{"id":230076,"title":"43 | 安全：反跨站请求伪造","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/NET-Core\">https://gitee.com/geektime-geekbang/NET-Core</a></p>","comments":[{"had_liked":false,"id":215775,"user_name":"熙","can_delete":false,"product_type":"c3","uid":1084863,"ip_address":"","ucode":"6D13CDBEA5CDDB","user_header":"https://static001.geekbang.org/account/avatar/00/10/8d/bf/507144e8.jpg","comment_is_top":false,"comment_ctime":1589101338,"is_pvip":false,"replies":[{"id":80587,"content":"跨站的情况下，伪造脚本没办法加header，因此无法攻击成功","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1589682804,"ip_address":"","comment_id":215775,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"老师，请教个问题：AntiforgeryToken 机制来防御 使用cookie的网站的跨站脚本攻击。如果伪造脚本的网站也加上了相同的Header，同样可以请求成功吧？\n","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494553,"discussion_content":"跨站的情况下，伪造脚本没办法加header，因此无法攻击成功","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589682804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1899883,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/fd/6b/d91521bf.jpg","nickname":"也許有一天","note":"","ucode":"61D4A89C97B096","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286405,"discussion_content":"应该说跨站伪造请求他没有登录过，是无法获取到你的cookie的，就算他添加header也是没有用的。要是他可以用你的帐号密码获取到cookie，那他直接登录转帐就行了，也 不用做啥跨站伪造请求...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593164341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1112367,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f9/2f/01b32495.jpg","nickname":"小孩","note":"","ucode":"A7F587FC641E63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1899883,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/fd/6b/d91521bf.jpg","nickname":"也許有一天","note":"","ucode":"61D4A89C97B096","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377972,"discussion_content":"cookie已经保存到客户端了，之前登录过了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622985280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":286405,"ip_address":"","group_id":0},"score":377972,"extra":""}]}]},{"had_liked":false,"id":357968,"user_name":"leon","can_delete":false,"product_type":"c3","uid":1071762,"ip_address":"广东","ucode":"47E792EA7080A0","user_header":"https://static001.geekbang.org/account/avatar/00/10/5a/92/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1663805338,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"如果用ajax+jsonp 携带header 跨站请求，怎么处理呢？","like_count":0}]}