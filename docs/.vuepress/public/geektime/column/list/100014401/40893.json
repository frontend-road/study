{"id":40893,"title":"19 | å¦‚ä½•ä½¿ç”¨æœåŠ¡è·¯ç”±ï¼Ÿ","content":"<p>ä¸“æ ä¸Šä¸€æœŸï¼Œæˆ‘ç»™ä½ è®²è§£äº†å¸¸ç”¨çš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå®ƒå¸®æˆ‘ä»¬è§£å†³äº†æœåŠ¡æ¶ˆè´¹è€…å¦‚ä½•ä»ä¼—å¤šå¯ç”¨çš„æœåŠ¡èŠ‚ç‚¹ä¸­é€‰å–ä¸€ä¸ªæœ€åˆé€‚çš„èŠ‚ç‚¹å‘èµ·è°ƒç”¨çš„é—®é¢˜ã€‚ä½†åœ¨ä¸šåŠ¡ä¸­ç»å¸¸è¿˜ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼Œæ¯”å¦‚æœåŠ¡Aéƒ¨ç½²åœ¨åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ä¸‰ä¸ªæ•°æ®ä¸­å¿ƒï¼Œæ‰€æœ‰çš„æœåŠ¡èŠ‚ç‚¹æŒ‰ç…§æ‰€åœ¨çš„æ•°æ®ä¸­å¿ƒè¢«åˆ†æˆäº†ä¸‰ç»„ï¼Œé‚£ä¹ˆæœåŠ¡Açš„æ¶ˆè´¹è€…åœ¨å‘èµ·è°ƒç”¨æ—¶ï¼Œè¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿè¿™å°±æ˜¯ä»Šå¤©æˆ‘è¦ç»™ä½ è®²è§£çš„æœåŠ¡è·¯ç”±çš„é—®é¢˜ã€‚</p>\n<p>é‚£ä¹ˆä»€ä¹ˆæ˜¯æœåŠ¡è·¯ç”±å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯<strong>æœåŠ¡è·¯ç”±å°±æ˜¯æœåŠ¡æ¶ˆè´¹è€…åœ¨å‘èµ·æœåŠ¡è°ƒç”¨æ—¶ï¼Œå¿…é¡»æ ¹æ®ç‰¹å®šçš„è§„åˆ™æ¥é€‰æ‹©æœåŠ¡èŠ‚ç‚¹ï¼Œä»è€Œæ»¡è¶³æŸäº›ç‰¹å®šçš„éœ€æ±‚</strong>ã€‚</p>\n<p><span class=\"orange\">é‚£ä¹ˆæœåŠ¡è·¯ç”±éƒ½æœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿå…·ä½“éƒ½æœ‰å“ªäº›è§„åˆ™å‘¢ï¼Ÿ</span></p>\n<h2>æœåŠ¡è·¯ç”±çš„åº”ç”¨åœºæ™¯</h2>\n<p>æ ¹æ®æˆ‘çš„å®è·µç»éªŒï¼ŒæœåŠ¡è·¯ç”±ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§åº”ç”¨åœºæ™¯ï¼š</p>\n<ul>\n<li>\n<p>åˆ†ç»„è°ƒç”¨ã€‚ä¸€èˆ¬æ¥è®²ï¼Œä¸ºäº†ä¿è¯æœåŠ¡çš„é«˜å¯ç”¨æ€§ï¼Œå®ç°å¼‚åœ°å¤šæ´»çš„éœ€æ±‚ï¼Œä¸€ä¸ªæœåŠ¡å¾€å¾€ä¸æ­¢éƒ¨ç½²åœ¨ä¸€ä¸ªæ•°æ®ä¸­å¿ƒï¼Œè€Œä¸”å‡ºäºèŠ‚çœæˆæœ¬ç­‰è€ƒè™‘ï¼Œæœ‰äº›ä¸šåŠ¡å¯èƒ½ä¸ä»…åœ¨ç§æœ‰æœºæˆ¿éƒ¨ç½²ï¼Œè¿˜ä¼šé‡‡ç”¨å…¬æœ‰äº‘éƒ¨ç½²ï¼Œç”šè‡³é‡‡ç”¨å¤šå®¶å…¬æœ‰äº‘éƒ¨ç½²ã€‚æœåŠ¡èŠ‚ç‚¹ä¹Ÿä¼šæŒ‰ç…§ä¸åŒçš„æ•°æ®ä¸­å¿ƒåˆ†æˆä¸åŒçš„åˆ†ç»„ï¼Œè¿™æ—¶å¯¹äºæœåŠ¡æ¶ˆè´¹è€…æ¥è¯´ï¼Œé€‰æ‹©å“ªä¸€ä¸ªåˆ†ç»„è°ƒç”¨ï¼Œå°±å¿…é¡»æœ‰ç›¸åº”çš„è·¯ç”±è§„åˆ™ã€‚</p>\n</li>\n<li>\n<p>ç°åº¦å‘å¸ƒã€‚åœ¨æœåŠ¡ä¸Šçº¿å‘å¸ƒçš„è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬éœ€è¦å…ˆåœ¨ä¸€å°éƒ¨åˆ†è§„æ¨¡çš„æœåŠ¡èŠ‚ç‚¹ä¸Šå…ˆå‘å¸ƒæœåŠ¡ï¼Œç„¶åéªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚å¦‚æœæ­£å¸¸çš„è¯å°±ç»§ç»­æ‰©å¤§å‘å¸ƒèŒƒå›´ï¼›å¦‚æœä¸æ­£å¸¸çš„è¯ï¼Œå°±éœ€è¦æ’æŸ¥é—®é¢˜ï¼Œè§£å†³é—®é¢˜åç»§ç»­å‘å¸ƒã€‚è¿™ä¸ªè¿‡ç¨‹å°±å«ä½œç°åº¦å‘å¸ƒï¼Œä¹Ÿå«é‡‘ä¸é›€éƒ¨ç½²ã€‚</p>\n</li>\n<li>\n<p>æµé‡åˆ‡æ¢ã€‚åœ¨ä¸šåŠ¡çº¿ä¸Šè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€äº›ä¸å¯æŠ—åŠ›å› ç´ å¯¼è‡´ä¸šåŠ¡æ•…éšœï¼Œæ¯”å¦‚æŸä¸ªæœºæˆ¿çš„å…‰ç¼†è¢«æŒ–æ–­ï¼Œæˆ–è€…å‘ç”Ÿç€ç«ç­‰äº‹æ•…å¯¼è‡´æ•´ä¸ªæœºæˆ¿çš„æœåŠ¡éƒ½ä¸å¯ç”¨ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦æŒ‰ç…§æŸä¸ªæŒ‡ä»¤ï¼Œèƒ½å¤ŸæŠŠåŸæ¥è°ƒç”¨è¿™ä¸ªæœºæˆ¿æœåŠ¡çš„æµé‡åˆ‡æ¢åˆ°å…¶ä»–æ­£å¸¸çš„æœºæˆ¿ã€‚</p>\n</li>\n<li>\n<p>è¯»å†™åˆ†ç¦»ã€‚å¯¹äºå¤§å¤šæ•°äº’è”ç½‘ä¸šåŠ¡æ¥è¯´éƒ½æ˜¯è¯»å¤šå†™å°‘ï¼Œæ‰€ä»¥åœ¨è¿›è¡ŒæœåŠ¡éƒ¨ç½²çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠè¯»å†™åˆ†å¼€éƒ¨ç½²ï¼Œæ‰€æœ‰å†™æ¥å£å¯ä»¥éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œè€Œè¯»æ¥å£éƒ¨ç½²åœ¨å¦å¤–çš„èŠ‚ç‚¹ä¸Šã€‚</p>\n</li>\n</ul><!-- [[[read_end]]] -->\n<p>ä¸Šé¢å››ç§åº”ç”¨åœºæ™¯æ˜¯å®é™…ä¸šåŠ¡ä¸­å¾ˆå¸¸è§çš„ï¼ŒæœåŠ¡è·¯ç”±å¯ä»¥é€šè¿‡å„ç§è§„åˆ™æ¥å®ç°ï¼Œé‚£ä¹ˆæœåŠ¡è·¯ç”±éƒ½æœ‰å“ªäº›è§„åˆ™å‘¢ï¼Ÿ</p>\n<h2>æœåŠ¡è·¯ç”±çš„è§„åˆ™</h2>\n<p>æ ¹æ®æˆ‘çš„å®è·µç»éªŒï¼ŒæœåŠ¡è·¯ç”±ä¸»è¦æœ‰ä¸¤ç§è§„åˆ™ï¼šä¸€ç§æ˜¯æ¡ä»¶è·¯ç”±ï¼Œä¸€ç§æ˜¯è„šæœ¬è·¯ç”±ã€‚</p>\n<p><strong>1. æ¡ä»¶è·¯ç”±</strong></p>\n<p>æ¡ä»¶è·¯ç”±æ˜¯åŸºäºæ¡ä»¶è¡¨è¾¾å¼çš„è·¯ç”±è§„åˆ™ï¼Œä»¥ä¸‹é¢çš„æ¡ä»¶è·¯ç”±ä¸ºä¾‹ï¼Œæˆ‘æ¥ç»™ä½ è¯¦ç»†è®²è§£ä¸‹å®ƒçš„ç”¨æ³•ã€‚</p>\n<pre><code>condition://0.0.0.0/dubbo.test.interfaces.TestService?category=routers&amp;dynamic=true&amp;priority=2&amp;enabled=true&amp;rule=&quot; + URL.encode(&quot; host = 10.20.153.10=&gt; host = 10.20.153.11&quot;)\n</code></pre>\n<p>è¿™é‡Œé¢â€œcondition://â€ä»£è¡¨äº†è¿™æ˜¯ä¸€æ®µç”¨æ¡ä»¶è¡¨è¾¾å¼ç¼–å†™çš„è·¯ç”±è§„åˆ™ï¼Œå…·ä½“çš„è§„åˆ™æ˜¯</p>\n<pre><code>host = 10.20.153.10 =&gt; host = 10.20.153.11\n</code></pre>\n<p>åˆ†éš”ç¬¦â€œ=&gt;â€å‰é¢æ˜¯æœåŠ¡æ¶ˆè´¹è€…çš„åŒ¹é…æ¡ä»¶ï¼Œåé¢æ˜¯æœåŠ¡æä¾›è€…çš„è¿‡æ»¤æ¡ä»¶ã€‚å½“æœåŠ¡æ¶ˆè´¹è€…èŠ‚ç‚¹æ»¡è¶³åŒ¹é…æ¡ä»¶æ—¶ï¼Œå°±å¯¹è¯¥æœåŠ¡æ¶ˆè´¹è€…æ‰§è¡Œåé¢çš„è¿‡æ»¤è§„åˆ™ã€‚é‚£ä¹ˆä¸Šé¢è¿™æ®µè¡¨è¾¾å¼è¡¨è¾¾çš„æ„ä¹‰å°±æ˜¯IPä¸ºâ€œ10.20.153.10â€çš„æœåŠ¡æ¶ˆè´¹è€…éƒ½è°ƒç”¨IPä¸ºâ€œ10.20.153.11â€çš„æœåŠ¡æä¾›è€…èŠ‚ç‚¹ã€‚</p>\n<p>å¦‚æœæœåŠ¡æ¶ˆè´¹è€…çš„åŒ¹é…æ¡ä»¶ä¸ºç©ºï¼Œå°±è¡¨ç¤ºå¯¹æ‰€æœ‰çš„æœåŠ¡æ¶ˆè´¹è€…åº”ç”¨ï¼Œå°±åƒä¸‹é¢çš„è¡¨è¾¾å¼ä¸€æ ·ã€‚</p>\n<pre><code>=&gt; host ï¼= 10.20.153.11\n</code></pre>\n<p>å¦‚æœæœåŠ¡æä¾›è€…çš„è¿‡æ»¤æ¡ä»¶ä¸ºç©ºï¼Œå°±è¡¨ç¤ºç¦æ­¢æœåŠ¡æ¶ˆè´¹è€…è®¿é—®ï¼Œå°±åƒä¸‹é¢çš„è¡¨è¾¾å¼ä¸€æ ·ã€‚</p>\n<pre><code>host = 10.20.153.10=&gt;\n</code></pre>\n<p>ä¸‹é¢æˆ‘ä¸¾ä¸€äº›Dubboæ¡†æ¶ä¸­çš„æ¡ä»¶è·¯ç”±ï¼Œæ¥ç»™ä½ è®²è§£ä¸‹æ¡ä»¶è·¯ç”±çš„å…·ä½“åº”ç”¨åœºæ™¯ã€‚</p>\n<ul>\n<li>æ’é™¤æŸä¸ªæœåŠ¡èŠ‚ç‚¹</li>\n</ul>\n<pre><code>=&gt; host != 172.22.3.91\n</code></pre>\n<p>ä¸€æ—¦è¿™æ¡è·¯ç”±è§„åˆ™è¢«åº”ç”¨åˆ°çº¿ä¸Šï¼Œæ‰€æœ‰çš„æœåŠ¡æ¶ˆè´¹è€…éƒ½ä¸ä¼šè®¿é—®IPä¸º172.22.3.91çš„æœåŠ¡èŠ‚ç‚¹ï¼Œè¿™ç§è·¯ç”±è§„åˆ™ä¸€èˆ¬åº”ç”¨åœ¨çº¿ä¸Šæµé‡æ’é™¤é¢„å‘å¸ƒæœºä»¥åŠæ‘˜é™¤æŸä¸ªæ•…éšœèŠ‚ç‚¹çš„åœºæ™¯ã€‚</p>\n<ul>\n<li>ç™½åå•å’Œé»‘åå•åŠŸèƒ½</li>\n</ul>\n<pre><code>host != 10.20.153.10,10.20.153.11 =&gt;\n</code></pre>\n<p>è¿™æ¡è·¯ç”±è§„åˆ™æ„æ€æ˜¯é™¤äº†IPä¸º10.20.153.10å’Œ10.20.153.11çš„æœåŠ¡æ¶ˆè´¹è€…å¯ä»¥å‘èµ·æœåŠ¡è°ƒç”¨ä»¥å¤–ï¼Œå…¶ä»–æœåŠ¡æ¶ˆè´¹è€…éƒ½ä¸å¯ä»¥ï¼Œä¸»è¦ç”¨äºç™½åå•è®¿é—®é€»è¾‘ï¼Œæ¯”å¦‚æŸä¸ªåå°æœåŠ¡åªå…è®¸ç‰¹å®šçš„å‡ å°æœºå™¨æ‰å¯ä»¥è®¿é—®ï¼Œè¿™æ ·çš„è¯å¯ä»¥æœºå™¨æ§åˆ¶è®¿é—®æƒé™ã€‚</p>\n<pre><code>host = 10.20.153.10,10.20.153.11 =&gt;\n</code></pre>\n<p>åŒç†ï¼Œè¿™æ¡è·¯ç”±è§„åˆ™æ„æ€æ˜¯é™¤äº†IPä¸º10.20.153.10å’Œ10.20.153.11çš„æœåŠ¡æ¶ˆè´¹è€…ä¸èƒ½å‘èµ·æœåŠ¡è°ƒç”¨ä»¥å¤–ï¼Œå…¶ä»–æœåŠ¡æ¶ˆè´¹è€…éƒ½å¯ä»¥ï¼Œä¹Ÿå°±æ˜¯å®ç°äº†é»‘åå•åŠŸèƒ½ï¼Œæ¯”å¦‚çº¿ä¸Šç»å¸¸ä¼šé‡åˆ°æŸäº›è°ƒç”¨æ–¹ä¸ç®¡æ˜¯å‡ºäºæœ‰æ„è¿˜æ˜¯æ— æ„çš„ä¸åˆç†è°ƒç”¨ï¼Œå½±å“äº†æœåŠ¡çš„ç¨³å®šæ€§ï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡é»‘åå•åŠŸèƒ½æš‚æ—¶äºˆä»¥å°æ€ã€‚</p>\n<ul>\n<li>æœºæˆ¿éš”ç¦»</li>\n</ul>\n<pre><code>host = 172.22.3.* =&gt; host = 172.22.3.*\n</code></pre>\n<p>è¿™æ¡è·¯ç”±è§„åˆ™æ„æ€æ˜¯IPç½‘æ®µä¸º172.22.3.*çš„æœåŠ¡æ¶ˆè´¹è€…ï¼Œæ‰å¯ä»¥è®¿é—®åŒç½‘æ®µçš„æœåŠ¡èŠ‚ç‚¹ï¼Œè¿™ç§è§„åˆ™ä¸€èˆ¬åº”ç”¨äºæœåŠ¡éƒ¨ç½²åœ¨å¤šä¸ªIDCï¼Œç†è®ºä¸ŠåŒä¸€ä¸ªIDCå†…çš„è°ƒç”¨æ€§èƒ½è¦æ¯”è·¨IDCè°ƒç”¨æ€§èƒ½è¦å¥½ï¼Œåº”ç”¨è¿™ä¸ªè§„åˆ™æ˜¯ä¸ºäº†å®ç°åŒIDCå°±è¿‘è®¿é—®ã€‚</p>\n<ul>\n<li>è¯»å†™åˆ†ç¦»</li>\n</ul>\n<pre><code>method = find*,list*,get*,is* =&gt; host =172.22.3.94,172.22.3.95\nmethod != find*,list*,get*,is* =&gt; host = 172.22.3.97,172.22.3.98\n</code></pre>\n<p>è¿™æ¡è·¯ç”±è§„åˆ™æ„æ€æ˜¯find*ã€get*ã€is*ç­‰è¯»æ–¹æ³•è°ƒç”¨IPä¸º172.22.3.94å’Œ172.22.3.95çš„èŠ‚ç‚¹ï¼Œé™¤æ­¤ä»¥å¤–çš„å†™æ–¹æ³•è°ƒç”¨IPä¸º172.22.3.97å’Œ172.22.3.98çš„èŠ‚ç‚¹ã€‚å¯¹äºå¤§éƒ¨åˆ†äº’è”ç½‘ä¸šåŠ¡æ¥è¯´ï¼Œå¾€å¾€è¯»è¯·æ±‚è¦è¿œè¿œå¤§äºå†™è¯·æ±‚ï¼Œè€Œå†™è¯·æ±‚çš„é‡è¦æ€§å¾€å¾€è¦è¿œè¿œé«˜äºè¯»è¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦æŠŠè¯»å†™è¯·æ±‚è¿›è¡Œåˆ†ç¦»ï¼Œä»¥é¿å…è¯»è¯·æ±‚å¼‚å¸¸å½±å“åˆ°å†™è¯·æ±‚ï¼Œè¿™æ—¶å€™å°±å¯ä»¥åº”ç”¨è¿™ç§è§„åˆ™ã€‚</p>\n<p><strong>2. è„šæœ¬è·¯ç”±</strong></p>\n<p>è„šæœ¬è·¯ç”±æ˜¯åŸºäºè„šæœ¬è¯­è¨€çš„è·¯ç”±è§„åˆ™ï¼Œå¸¸ç”¨çš„è„šæœ¬è¯­è¨€æ¯”å¦‚JavaScriptã€Groovyã€JRubyç­‰ã€‚ä»¥ä¸‹é¢çš„è„šæœ¬è·¯ç”±è§„åˆ™ä¸ºä¾‹ï¼Œæˆ‘æ¥ç»™ä½ è¯¦ç»†è®²è§£å®ƒçš„ç”¨æ³•ã€‚</p>\n<pre><code>&quot;script://0.0.0.0/com.foo.BarService?category=routers&amp;dynamic=false&amp;rule=&quot; + URL.encode(&quot;ï¼ˆfunction route(invokers) { ... } (invokers)ï¼‰&quot;)\n</code></pre>\n<p>è¿™é‡Œé¢â€œscript://â€å°±ä»£è¡¨äº†è¿™æ˜¯ä¸€æ®µè„šæœ¬è¯­è¨€ç¼–å†™çš„è·¯ç”±è§„åˆ™ï¼Œå…·ä½“è§„åˆ™å®šä¹‰åœ¨è„šæœ¬è¯­è¨€çš„routeæ–¹æ³•å®ç°é‡Œï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µç”¨JavaScriptç¼–å†™çš„route()æ–¹æ³•è¡¨è¾¾çš„æ„æ€æ˜¯ï¼Œåªæœ‰IPä¸º10.20.153.10çš„æœåŠ¡æ¶ˆè´¹è€…å¯ä»¥å‘èµ·æœåŠ¡è°ƒç”¨ã€‚</p>\n<pre><code>function route(invokers){\n  var result = new java.util.ArrayList(invokers.size());\n  for(i =0; i &lt; invokers.size(); i ++){\n    if(&quot;10.20.153.10&quot;.equals(invokers.get(i).getUrl().getHost())){ \n       result.add(invokers.get(i));\n    } \n  }\n  return result; \n } (invokers)ï¼‰;\n</code></pre>\n<p>æ—¢ç„¶æœåŠ¡è·¯ç”±æ˜¯é€šè¿‡è·¯ç”±è§„åˆ™æ¥å®ç°çš„ï¼Œé‚£ä¹ˆæœåŠ¡æ¶ˆè´¹è€…è¯¥å¦‚ä½•è·å–è·¯ç”±è§„åˆ™å‘¢ï¼Ÿ</p>\n<h2>æœåŠ¡è·¯ç”±çš„è·å–æ–¹å¼</h2>\n<p>æ ¹æ®æˆ‘çš„å®è·µç»éªŒï¼ŒæœåŠ¡è·¯ç”±çš„è·å–æ–¹å¼ä¸»è¦æœ‰ä¸‰ç§ï¼š</p>\n<ul>\n<li>æœ¬åœ°é…ç½®</li>\n</ul>\n<p>é¡¾åæ€ä¹‰å°±æ˜¯è·¯ç”±è§„åˆ™å­˜å‚¨åœ¨æœåŠ¡æ¶ˆè´¹è€…æœ¬åœ°ä¸Šã€‚æœåŠ¡æ¶ˆè´¹è€…å‘èµ·è°ƒç”¨æ—¶ï¼Œä»æœ¬åœ°å›ºå®šä½ç½®è¯»å–è·¯ç”±è§„åˆ™ï¼Œç„¶åæŒ‰ç…§è·¯ç”±è§„åˆ™é€‰å–ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹å‘èµ·è°ƒç”¨ã€‚</p>\n<ul>\n<li>é…ç½®ä¸­å¿ƒç®¡ç†</li>\n</ul>\n<p>è¿™ç§æ–¹å¼ä¸‹ï¼Œæ‰€æœ‰çš„æœåŠ¡æ¶ˆè´¹è€…éƒ½ä»é…ç½®ä¸­å¿ƒè·å–è·¯ç”±è§„åˆ™ï¼Œç”±é…ç½®ä¸­å¿ƒæ¥ç»Ÿä¸€ç®¡ç†ã€‚</p>\n<ul>\n<li>åŠ¨æ€ä¸‹å‘</li>\n</ul>\n<p>è¿™ç§æ–¹å¼ä¸‹ï¼Œä¸€èˆ¬æ˜¯è¿ç»´äººå‘˜æˆ–è€…å¼€å‘äººå‘˜ï¼Œé€šè¿‡æœåŠ¡æ²»ç†å¹³å°ä¿®æ”¹è·¯ç”±è§„åˆ™ï¼ŒæœåŠ¡æ²»ç†å¹³å°è°ƒç”¨é…ç½®ä¸­å¿ƒæ¥å£ï¼ŒæŠŠä¿®æ”¹åçš„è·¯ç”±è§„åˆ™æŒä¹…åŒ–åˆ°é…ç½®ä¸­å¿ƒã€‚å› ä¸ºæœåŠ¡æ¶ˆè´¹è€…è®¢é˜…äº†è·¯ç”±è§„åˆ™çš„å˜æ›´ï¼Œäºæ˜¯å°±ä¼šä»é…ç½®ä¸­å¿ƒè·å–æœ€æ–°çš„è·¯ç”±è§„åˆ™ï¼ŒæŒ‰ç…§æœ€æ–°çš„è·¯ç”±è§„åˆ™æ¥æ‰§è¡Œã€‚</p>\n<p>æ ¹æ®æˆ‘çš„å®è·µç»éªŒï¼Œä¸Šé¢ä¸‰ç§æ–¹å¼å®é™…ä½¿ç”¨æ—¶ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šåŒºåˆ«çš„ã€‚</p>\n<p>ä¸€èˆ¬æ¥è®²ï¼ŒæœåŠ¡è·¯ç”±æœ€å¥½æ˜¯å­˜å‚¨åœ¨é…ç½®ä¸­å¿ƒä¸­ï¼Œç”±é…ç½®ä¸­å¿ƒæ¥ç»Ÿä¸€ç®¡ç†ã€‚è¿™æ ·çš„è¯ï¼Œæ‰€æœ‰çš„æœåŠ¡æ¶ˆè´¹è€…å°±ä¸éœ€è¦åœ¨æœ¬åœ°ç®¡ç†æœåŠ¡è·¯ç”±ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„æœåŠ¡æ¶ˆè´¹è€…å¹¶ä¸å…³å¿ƒæœåŠ¡è·¯ç”±çš„é—®é¢˜ï¼Œæˆ–è€…è¯´ä¹Ÿä¸éœ€è¦å»äº†è§£å…¶ä¸­çš„ç»†èŠ‚ã€‚é€šè¿‡é…ç½®ä¸­å¿ƒï¼Œç»Ÿä¸€ç»™å„ä¸ªæœåŠ¡æ¶ˆè´¹è€…ä¸‹å‘ç»Ÿä¸€çš„æœåŠ¡è·¯ç”±ï¼ŒèŠ‚çœäº†æ²Ÿé€šå’Œç®¡ç†æˆæœ¬ã€‚</p>\n<p>ä½†ä¹Ÿä¸æ’é™¤æŸäº›æœåŠ¡æ¶ˆè´¹è€…æœ‰ç‰¹å®šçš„éœ€æ±‚ï¼Œéœ€è¦å®šåˆ¶è‡ªå·±çš„è·¯ç”±è§„åˆ™ï¼Œè¿™ä¸ªæ—¶å€™å°±é€‚åˆé€šè¿‡æœ¬åœ°é…ç½®æ¥å®šåˆ¶ã€‚</p>\n<p>è€ŒåŠ¨æ€ä¸‹å‘å¯ä»¥ç†è§£ä¸ºä¸€ç§é«˜çº§åŠŸèƒ½ï¼Œå®ƒèƒ½å¤ŸåŠ¨æ€åœ°ä¿®æ”¹è·¯ç”±è§„åˆ™ï¼Œåœ¨æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹ååˆ†æœ‰ç”¨ã€‚æ¯”å¦‚æŸä¸ªæ•°æ®ä¸­å¿ƒå­˜åœ¨é—®é¢˜ï¼Œéœ€è¦æŠŠè°ƒç”¨è¿™ä¸ªæ•°æ®ä¸­å¿ƒçš„æœåŠ¡æ¶ˆè´¹è€…éƒ½åˆ‡æ¢åˆ°å…¶ä»–æ•°æ®ä¸­å¿ƒï¼Œè¿™æ—¶å°±å¯ä»¥é€šè¿‡åŠ¨æ€ä¸‹å‘çš„æ–¹å¼ï¼Œå‘é…ç½®ä¸­å¿ƒä¸‹å‘ä¸€æ¡è·¯ç”±è§„åˆ™ï¼Œå°†æ‰€æœ‰è°ƒç”¨è¿™ä¸ªæ•°æ®ä¸­å¿ƒçš„è¯·æ±‚éƒ½è¿ç§»åˆ°åˆ«çš„åœ°æ–¹ã€‚</p>\n<p>å½“ç„¶ï¼Œè¿™ä¸‰ç§æ–¹å¼ä¹Ÿå¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡æ¶ˆè´¹è€…çš„åˆ¤æ–­ä¼˜å…ˆçº§æ˜¯æœ¬åœ°é…ç½®&gt;åŠ¨æ€ä¸‹å‘&gt;é…ç½®ä¸­å¿ƒç®¡ç†ã€‚</p>\n<h2>æ€»ç»“</h2>\n<p>ä»Šå¤©æˆ‘ç»™ä½ è®²è§£äº†æœåŠ¡è·¯ç”±çš„ä½œç”¨ï¼Œç®€å•æ¥è®²å°±æ˜¯ä¸ºäº†å®ç°æŸäº›è°ƒç”¨çš„ç‰¹æ®Šéœ€æ±‚ï¼Œæ¯”å¦‚åˆ†ç»„è°ƒç”¨ã€ç°åº¦å‘å¸ƒã€æµé‡åˆ‡æ¢ã€è¯»å†™åˆ†ç¦»ç­‰ã€‚åœ¨ä¸šåŠ¡è§„æ¨¡æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œå¯èƒ½æ‰€æœ‰çš„æœåŠ¡èŠ‚ç‚¹éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä¹Ÿå°±ä¸éœ€è¦æœåŠ¡è·¯ç”±ã€‚ä½†éšç€ä¸šåŠ¡è§„æ¨¡çš„æ‰©å¤§ã€æœåŠ¡èŠ‚ç‚¹å¢å¤šï¼Œå°¤å…¶æ˜¯æ¶‰åŠå¤šæ•°æ®ä¸­å¿ƒéƒ¨ç½²çš„æƒ…å†µï¼ŒæŠŠæœåŠ¡èŠ‚ç‚¹æŒ‰ç…§æ•°æ®ä¸­å¿ƒè¿›è¡Œåˆ†ç»„ï¼Œæˆ–è€…æŒ‰ç…§ä¸šåŠ¡çš„æ ¸å¿ƒç¨‹åº¦è¿›è¡Œåˆ†ç»„ï¼Œå¯¹æé«˜æœåŠ¡çš„å¯ç”¨æ€§æ˜¯ååˆ†æœ‰ç”¨çš„ã€‚ä»¥å¾®åšä¸šåŠ¡ä¸ºä¾‹ï¼Œæœ‰çš„æœåŠ¡ä¸ä»…è¿›è¡Œäº†æ ¸å¿ƒæœåŠ¡å’Œéæ ¸å¿ƒæœåŠ¡åˆ†ç»„ï¼Œè¿˜é’ˆå¯¹ç§æœ‰äº‘å’Œå…¬æœ‰äº‘æ‰€å¤„çš„ä¸åŒæ•°æ®ä¸­å¿ƒä¹Ÿè¿›è¡Œäº†åˆ†ç»„ï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥å°†æœåŠ¡ä¹‹é—´çš„è°ƒç”¨å°½é‡éƒ½é™å®šåœ¨åŒä¸€ä¸ªæ•°æ®ä¸­å¿ƒå†…éƒ¨ï¼Œæœ€å¤§é™åº¦é¿å…è·¨æ•°æ®ä¸­å¿ƒçš„ç½‘ç»œå»¶è¿Ÿã€æŠ–åŠ¨ç­‰å½±å“ã€‚</p>\n<p>è€ŒæœåŠ¡è·¯ç”±å…·ä½“æ˜¯åœ¨æœ¬åœ°é…ç½®ï¼Œè¿˜æ˜¯åœ¨é…ç½®ä¸­å¿ƒç»Ÿä¸€ç®¡ç†ï¼Œä¹Ÿæ˜¯è§†å…·ä½“ä¸šåŠ¡éœ€æ±‚è€Œå®šçš„ã€‚å¦‚æœæ²¡æœ‰å®šåˆ¶åŒ–çš„éœ€æ±‚ï¼Œå»ºè®®æŠŠè·¯ç”±è§„åˆ™éƒ½æ”¾åˆ°é…ç½®ä¸­å¿ƒä¸­ç»Ÿä¸€å­˜å‚¨ç®¡ç†ã€‚è€ŒåŠ¨æ€ä¸‹å‘è·¯ç”±è§„åˆ™å¯¹äºæœåŠ¡æ²»ç†ååˆ†æœ‰å¸®åŠ©ï¼Œå½“æ•°æ®ä¸­å¿ƒå‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œå¯ä»¥å®ç°åŠ¨æ€åˆ‡æ¢æµé‡ï¼Œè¿˜å¯ä»¥æ‘˜é™¤ä¸€äº›æœ‰æ•…éšœçš„æœåŠ¡èŠ‚ç‚¹ã€‚</p>\n<h2>æ€è€ƒé¢˜</h2>\n<p>åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œç»å¸¸æœ‰ä¸€ç±»éœ€æ±‚å°±æ˜¯ä¸€ä¸ªæ–°åŠŸèƒ½åœ¨å…¨é‡ä¸Šçº¿å‰ï¼Œä¼šåœˆä¸€æ‰¹ç”¨æˆ·ä¼˜å…ˆé€‚ç”¨ï¼Œå¦‚æœä½¿ç”¨æœåŠ¡è·¯ç”±åŠŸèƒ½çš„è¯ï¼Œä½ è§‰å¾—å¯ä»¥æ€ä¹ˆåšï¼Ÿ</p>\n<p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå†™ä¸‹è‡ªå·±çš„æ€è€ƒï¼Œä¸æˆ‘ä¸€èµ·è®¨è®ºã€‚</p>\n<p></p>\n","comments":[{"had_liked":false,"id":32279,"user_name":"æ³¢æ³¢å®‰","can_delete":false,"product_type":"c1","uid":1002452,"ip_address":"","ucode":"2A677908E5A75D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/d4/b7719327.jpg","comment_is_top":false,"comment_ctime":1539510421,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"164748267669","product_id":100014401,"comment_content":"æˆ‘ä»¬ç°åœ¨å¤„ç†çš„æ–¹å¼æ˜¯å…ˆåœˆå®šä¸€æ‰¹å‹å¥½ç”¨æˆ·ä½œä¸ºç°åº¦ç™½åå•ç”¨æˆ·ã€‚å¯¹äºè¿™ä¸€æ‰¹ç”¨æˆ·åœ¨ç™»å½•æ—¶ä¼šå†™ç‰¹å®šçš„cookieæ ‡è¯†ï¼Œè®¿é—®æ—¶ngæ ¹æ®cookieæ ‡è¯†åšè·¯ç”±ç­–ç•¥ã€‚å°†è¯·æ±‚åˆ†å‘åˆ°å‡çº§å¥½çš„ç°åº¦é›†ç¾¤ï¼ŒéªŒè¯æ–°åŠŸèƒ½ã€‚","like_count":39},{"had_liked":false,"id":52239,"user_name":"ylw66","can_delete":false,"product_type":"c1","uid":1228185,"ip_address":"","ucode":"3FD0A4937793B7","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/99/851b0db6.jpg","comment_is_top":false,"comment_ctime":1545353878,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"23020190358","product_id":100014401,"comment_content":"è€å¸ˆå¥½ï¼ŒDubboç™½åå•å’Œé»‘åå•çš„ä¾‹å­æœ‰æ²¡æœ‰å†™åï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1272026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/68/da/5bcb83b1.jpg","nickname":"ç™½æ™¨","note":"","ucode":"6D6171B8ECEDDD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24812,"discussion_content":"æ²¡æœ‰å†™åï¼Œæ³¨æ„çœ‹å¦‚æœæä¾›è€…æ¡ä»¶çœç•¥æ˜¯ç¦æ­¢æœåŠ¡æ¶ˆè´¹è€…è®¿é—®æ¥ç€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570270677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1276652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7a/ec/19104a37.jpg","nickname":"æå¼º","note":"","ucode":"EE1F99E12D212E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2960,"discussion_content":"æ²¡æœ‰å†™å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564063859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67715,"user_name":"Cain","can_delete":false,"product_type":"c1","uid":1005926,"ip_address":"","ucode":"82BDECC530E27C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/66/39eeb3f9.jpg","comment_is_top":false,"comment_ctime":1550228808,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18730097992","product_id":100014401,"comment_content":"ç­”ï¼šå¯ä»¥è€ƒè™‘ä½¿ç”¨statefulset+headless serviceçš„æ–¹å¼ï¼Œä½¿ç”¨k8så†…éƒ¨çš„dnsï¼Œæ¯”å¦‚pod1.svc.comæ–¹å¼ç›´æ¥è®¿é—®è¿™ä¸ªpod<br><br>ç”¨ä¸€ä¸ªç®€å•çš„è·¯ç”±è§„åˆ™ï¼Œå¦‚æœå¸Œæœ›ç™¾åˆ†ä¹‹ä¸€çš„ç”¨æˆ·ä½“éªŒæ–°ç‰ˆæœ¬ï¼Œå°†ç”¨æˆ·idå–æ¨¡100ç­‰äº1çš„ç”¨æˆ·è¯·æ±‚è½¬å‘ç»™æ–°çš„æœåŠ¡å™¨ã€‚éªŒè¯åé€æ­¥æ‰©å¤§ç”¨æˆ·æ¯”ä¾‹ï¼Œæœ€ç»ˆè¾¾åˆ°å…¨é‡ã€‚<br>è¿™é‡Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œç”¨dockerå’Œk8séƒ¨ç½²ä¸€ä¸ªmysqlçš„æœåŠ¡ï¼Œå¦‚æœè¿™ä¸ªæœåŠ¡å¯ä»¥å¼¹æ€§ä¼¸ç¼©ï¼Œä¸”æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªè™šæ‹Ÿipæ¥è¿æ¥è¿™ä¸ªæœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘çš„è¯·æ±‚ä¼šæŒ‰ç…§k8sçš„è´Ÿè½½å‡è¡¡è§„åˆ™è¿›è¡Œè·¯ç”±ï¼Œæˆ‘å¸Œæœ›æ“ä½œä¸€ä¸ªç”¨æˆ·ç›¸å…³çš„è¯·æ±‚ï¼Œéƒ½åˆ°åŒä¸€ä¸ªæ•°æ®åº“é‡Œé¢ï¼Œä¸çŸ¥é“è¿™ä¸ªåº”è¯¥æ€ä¹ˆæ“ä½œã€‚å¦‚æœæœ‰å¤šä¸ªæœåŠ¡ï¼Œè€Œä¸”å¯ä»¥åŠ¨æ€çš„å¢å‡ï¼Œè¿™é‡Œåº”è¯¥ä¼šç¢°åˆ°ä¸€å †çš„é—®é¢˜ï¼Œå¦‚æœè€å¸ˆæœ‰ç¢°åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œè¿™é‡Œæƒ³çŸ¥é“è€å¸ˆæ˜¯æ€ä¹ˆè§£å†³çš„ã€‚","like_count":4},{"had_liked":false,"id":30900,"user_name":"æ‹‰æ¬§","can_delete":false,"product_type":"c1","uid":1206605,"ip_address":"","ucode":"40996A8093A95F","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/4d/81c44f45.jpg","comment_is_top":false,"comment_ctime":1539045824,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14423947712","product_id":100014401,"comment_content":"å¯ä»¥é€šè¿‡ç½‘å…³é…ç½®è§„åˆ™ï¼Œå°†ç‰¹å®šçš„ç”¨æˆ·å¯¼æµåˆ°æŸä¸€æ•°æ®ä¸­å¿ƒï¼Œç„¶åé€šè¿‡é‡‘ä¸é›€å‘å¸ƒå‡çº§è¿™ä¸€æ•°æ®ä¸­å¿ƒçš„æœåŠ¡","like_count":4},{"had_liked":false,"id":34115,"user_name":"é…±äº†ä¸ªæ²¹","can_delete":false,"product_type":"c1","uid":1059627,"ip_address":"","ucode":"5A13CA4EAACB81","user_header":"https://static001.geekbang.org/account/avatar/00/10/2b/2b/bebf6eed.jpg","comment_is_top":false,"comment_ctime":1540006755,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5834974051","product_id":100014401,"comment_content":"æ³¨å†Œä¸­å¿ƒä¹Ÿå¯ä»¥ç®¡ç†è®¿é—®çš„æœåŠ¡åå•ï¼Œè¿™å’ŒæœåŠ¡è·¯ç”±æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæ˜¯ä¸æ˜¯ä¸€èˆ¬åªæ˜¯å¸®åŠ©æœåŠ¡é‡æ–°è·¯ç”±æ³¨å†Œä¸­å¿ƒï¼Ÿ","like_count":2},{"had_liked":false,"id":30072,"user_name":"è²èŠ±","can_delete":false,"product_type":"c1","uid":1220494,"ip_address":"","ucode":"3260F7DA59332D","user_header":"https://static001.geekbang.org/account/avatar/00/12/9f/8e/45ffff8f.jpg","comment_is_top":false,"comment_ctime":1538646086,"is_pvip":false,"replies":[{"id":"10906","content":"å¯ä»¥é€šè¿‡é…ç½®ä¸­å¿ƒä¸‹å‘æŒ‡ä»¤æ”¹å˜è®¢é˜…çš„åˆ†ç»„ï¼Œæ¯”å¦‚ä¸€ä¸ªåˆ†ç»„æ‰¿æ‹…70%ï¼Œä¸€ä¸ªæ‰¿æ‹…30%","user_name":"ä½œè€…å›å¤","comment_id":30072,"uid":"1010144","ip_address":"","utype":1,"ctime":1538796748,"user_name_real":"å¤æœˆä¸­å¿ƒç›¸å¿ƒ"}],"discussion_count":1,"race_medal":0,"score":"5833613382","product_id":100014401,"comment_content":"å¦‚æœé€šè¿‡è·¯ç”±å°½é‡å°†è®¿é—®é™å®šåœ¨åŒä¸€ä¸ªæ•°æ®ä¸­å¿ƒï¼Œå¦‚æœåŒä¸€ä¸ªæ•°æ®ä¸­å¿ƒè®¿é—®æ»¡äº†ï¼Œæ€ä¹ˆåˆ†æµåˆ°å¦ä¸€ä¸ªæ•°æ®ä¸­å¿ƒå»å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"èƒ¡å¿ æƒ³","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425844,"discussion_content":"å¯ä»¥é€šè¿‡é…ç½®ä¸­å¿ƒä¸‹å‘æŒ‡ä»¤æ”¹å˜è®¢é˜…çš„åˆ†ç»„ï¼Œæ¯”å¦‚ä¸€ä¸ªåˆ†ç»„æ‰¿æ‹…70%ï¼Œä¸€ä¸ªæ‰¿æ‹…30%","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538796748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29986,"user_name":"å®çˆ·","can_delete":false,"product_type":"c1","uid":1153664,"ip_address":"","ucode":"DD517FA7EB59AB","user_header":"https://static001.geekbang.org/account/avatar/00/11/9a/80/2bf8d7fc.jpg","comment_is_top":false,"comment_ctime":1538620091,"is_pvip":false,"replies":[{"id":"10786","content":"æˆ‘ç†è§£è¿™é‡Œä¸»è¦æ˜¯è®¿é—®è·¯ç”±çš„é—®é¢˜ï¼Œåˆæƒ³ç”¨k8såšåˆ°mysqlçš„åŠ¨æ€æ‰©ç¼©å®¹ï¼Œåˆæƒ³æŒ‰ç…§ç”¨æˆ·è®¿é—®hashåˆ°å›ºå®šæ•°æ®åº“ã€æˆ‘ä¸çŸ¥é“k8sèƒ½å¦è‡ªå®šä¹‰æ•°æ®è®¿é—®è·¯ç”±ï¼Œæˆ‘ä»¬çš„åšæ³•æ²¡æœ‰ä½¿ç”¨k8sï¼Œè‡ªå®šä¹‰æ•°æ®è®¿é—®è·¯ç”±","user_name":"ä½œè€…å›å¤","comment_id":29986,"uid":"1010144","ip_address":"","utype":1,"ctime":1538625805,"user_name_real":"å¤æœˆä¸­å¿ƒç›¸å¿ƒ"}],"discussion_count":1,"race_medal":0,"score":"5833587387","product_id":100014401,"comment_content":"ç”¨ä¸€ä¸ªç®€å•çš„è·¯ç”±è§„åˆ™ï¼Œå¦‚æœå¸Œæœ›ç™¾åˆ†ä¹‹ä¸€çš„ç”¨æˆ·ä½“éªŒæ–°ç‰ˆæœ¬ï¼Œå°†ç”¨æˆ·idå–æ¨¡100ç­‰äº1çš„ç”¨æˆ·è¯·æ±‚è½¬å‘ç»™æ–°çš„æœåŠ¡å™¨ã€‚éªŒè¯åé€æ­¥æ‰©å¤§ç”¨æˆ·æ¯”ä¾‹ï¼Œæœ€ç»ˆè¾¾åˆ°å…¨é‡ã€‚<br>è¿™é‡Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œç”¨dockerå’Œk8séƒ¨ç½²ä¸€ä¸ªmysqlçš„æœåŠ¡ï¼Œå¦‚æœè¿™ä¸ªæœåŠ¡å¯ä»¥å¼¹æ€§ä¼¸ç¼©ï¼Œä¸”æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªè™šæ‹Ÿipæ¥è¿æ¥è¿™ä¸ªæœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘çš„è¯·æ±‚ä¼šæŒ‰ç…§k8sçš„è´Ÿè½½å‡è¡¡è§„åˆ™è¿›è¡Œè·¯ç”±ï¼Œæˆ‘å¸Œæœ›æ“ä½œä¸€ä¸ªç”¨æˆ·ç›¸å…³çš„è¯·æ±‚ï¼Œéƒ½åˆ°åŒä¸€ä¸ªæ•°æ®åº“é‡Œé¢ï¼Œä¸çŸ¥é“è¿™ä¸ªåº”è¯¥æ€ä¹ˆæ“ä½œã€‚å¦‚æœæœ‰å¤šä¸ªæœåŠ¡ï¼Œè€Œä¸”å¯ä»¥åŠ¨æ€çš„å¢å‡ï¼Œè¿™é‡Œåº”è¯¥ä¼šç¢°åˆ°ä¸€å †çš„é—®é¢˜ï¼Œå¦‚æœè€å¸ˆæœ‰ç¢°åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œè¿™é‡Œæƒ³çŸ¥é“è€å¸ˆæ˜¯æ€ä¹ˆè§£å†³çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"èƒ¡å¿ æƒ³","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425801,"discussion_content":"æˆ‘ç†è§£è¿™é‡Œä¸»è¦æ˜¯è®¿é—®è·¯ç”±çš„é—®é¢˜ï¼Œåˆæƒ³ç”¨k8såšåˆ°mysqlçš„åŠ¨æ€æ‰©ç¼©å®¹ï¼Œåˆæƒ³æŒ‰ç…§ç”¨æˆ·è®¿é—®hashåˆ°å›ºå®šæ•°æ®åº“ã€æˆ‘ä¸çŸ¥é“k8sèƒ½å¦è‡ªå®šä¹‰æ•°æ®è®¿é—®è·¯ç”±ï¼Œæˆ‘ä»¬çš„åšæ³•æ²¡æœ‰ä½¿ç”¨k8sï¼Œè‡ªå®šä¹‰æ•°æ®è®¿é—®è·¯ç”±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538625805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29975,"user_name":"mgxian","can_delete":false,"product_type":"c1","uid":1014806,"ip_address":"","ucode":"7B7E77E6A83B87","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/16/4d1e5cc1.jpg","comment_is_top":false,"comment_ctime":1538618609,"is_pvip":false,"replies":[{"id":"10780","content":"é…ç½®ä¸­å¿ƒå­˜å‚¨å¯èƒ½åªæ˜¯åšä¸€ä¸ªé›†ä¸­å­˜å‚¨çš„åœ°æ–¹ï¼Œå®¢æˆ·ç«¯å¯åŠ¨çš„æ—¶å€™æ‰ä¼šä»é…ç½®ä¸­å¿ƒæ‹‰å–é…ç½®ã€‚åŠ¨æ€ä¸‹å‘æ˜¯å®¢æˆ·ç«¯è®¢é˜…äº†é…ç½®çš„æ›´æ–°ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œå®¢æˆ·ç«¯å°±ä¼šæ‹‰å–","user_name":"ä½œè€…å›å¤","comment_id":29975,"uid":"1010144","ip_address":"","utype":1,"ctime":1538625089,"user_name_real":"å¤æœˆä¸­å¿ƒç›¸å¿ƒ"}],"discussion_count":1,"race_medal":0,"score":"5833585905","product_id":100014401,"comment_content":"é…ç½®ä¸­å¿ƒé…ç½®è·¯ç”±ä¹‹åä¹Ÿæ˜¯éœ€è¦ä¸‹å‘çš„ é‚£è¿™å’ŒåŠ¨æ€ä¸‹å‘æ–¹å¼ä¸æ˜¯é‡å¤äº†å— æœ‰ä»€ä¹ˆä¸»è¦åŒºåˆ«å‘¢","like_count":1,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"èƒ¡å¿ æƒ³","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425796,"discussion_content":"é…ç½®ä¸­å¿ƒå­˜å‚¨å¯èƒ½åªæ˜¯åšä¸€ä¸ªé›†ä¸­å­˜å‚¨çš„åœ°æ–¹ï¼Œå®¢æˆ·ç«¯å¯åŠ¨çš„æ—¶å€™æ‰ä¼šä»é…ç½®ä¸­å¿ƒæ‹‰å–é…ç½®ã€‚åŠ¨æ€ä¸‹å‘æ˜¯å®¢æˆ·ç«¯è®¢é˜…äº†é…ç½®çš„æ›´æ–°ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œå®¢æˆ·ç«¯å°±ä¼šæ‹‰å–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538625089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343934,"user_name":"ğŸ¤”","can_delete":false,"product_type":"c1","uid":1676962,"ip_address":"","ucode":"40ACB53BF3C6B1","user_header":"https://static001.geekbang.org/account/avatar/00/19/96/a2/c1596dd8.jpg","comment_is_top":false,"comment_ctime":1651127541,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651127541","product_id":100014401,"comment_content":"istioï¼šhttps:&#47;&#47;istio.io&#47;latest&#47;docs&#47;tasks&#47;traffic-management&#47;request-routing&#47;#route-based-on-user-identity","like_count":0},{"had_liked":false,"id":315031,"user_name":"ä¿¯ç°é£æ™¯.","can_delete":false,"product_type":"c1","uid":1044166,"ip_address":"","ucode":"A6DB68B7B84AEE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/c6/bebcbcf0.jpg","comment_is_top":false,"comment_ctime":1633665870,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633665870","product_id":100014401,"comment_content":"æœåŠ¡è·¯ç”±çš„ç›®çš„æ˜¯ä¸ºäº†å®ç°æŸäº›ç‰¹æ®Šçš„æœåŠ¡è°ƒç”¨ï¼Œâ€œç‰¹æ®Šâ€ä½“ç°åœ¨é’ˆå¯¹æŸäº›ç‰¹å®šæœåŠ¡æ¶ˆè´¹è€…çš„æœåŠ¡è°ƒç”¨å¿…é¡»é€šè¿‡æŸäº›ç‰¹å®šçš„æœåŠ¡æä¾›è€…ã€‚<br><br>åº”ç”¨åœºæ™¯ä¸€èˆ¬æ˜¯ï¼šè¯»å†™åˆ†ç¦»ã€æœºæˆ¿éš”ç¦»ã€ç°åº¦å‘å¸ƒã€ç™½åå•å’Œé»‘åå•ã€æ’é™¤æŸä¸ªæœåŠ¡èŠ‚ç‚¹ç­‰ã€‚<br><br>æœåŠ¡è·¯ç”±è§„åˆ™å¯ä»¥å­˜æ”¾åœ¨æœåŠ¡æ¶ˆè´¹è€…çš„æœ¬åœ°ç¼“å­˜ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œä¹Ÿä¼šåœ¨é…ç½®ä¸­å¿ƒç»Ÿä¸€ç®¡ç†ï¼›åœ¨åŒä¸€ç»´æŠ¤çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šåœ¨æœåŠ¡æ²»ç†å¹³å°ä¿®æ”¹è§„åˆ™ç„¶ååŒæ­¥åˆ°é…ç½®ä¸­å¿ƒã€‚æ¶ˆè´¹è€…é€šè¿‡æ¶ˆè´¹è®¢é˜…çš„æ–¹å¼ä¸‹æ‹‰æœ€æ–°çš„æœåŠ¡è·¯ç”±è§„åˆ™åˆ°æœ¬åœ°ç¼“å­˜ä¸­ã€‚","like_count":0},{"had_liked":false,"id":109690,"user_name":"ææ˜¥æ’","can_delete":false,"product_type":"c1","uid":1033066,"ip_address":"","ucode":"F2DCA19EC66DC1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c3/6a/3272e095.jpg","comment_is_top":false,"comment_ctime":1562077547,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562077547","product_id":100014401,"comment_content":"åšçš„ç½‘å…³å¯¹äºæœåŠ¡ç«¯apiçš„ç°åº¦å‘å¸ƒæä¾›äº†ä¸¤ç§åˆ†å‘ç­–ç•¥ã€‚<br>ä¸€ç§æ˜¯æŒ‰æ¯”ä¾‹æµé‡åˆ‡åˆ†ï¼ŒæŒ‰ç…§ç”¨æˆ·è®¾å¤‡å·ã€‚<br>ä¸€ç§æ˜¯å®šç‚¹æµ‹è¯•(å¤šç”¨äºå†…éƒ¨ä½“éªŒ)ï¼ŒæŒ‡å®šç”¨æˆ·pinï¼Œç”¨æˆ·è®¾å¤‡å·","like_count":0},{"had_liked":false,"id":103943,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1560569455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560569455","product_id":100014401,"comment_content":"æˆ‘ä»¬æ˜¯é€šè¿‡å¼€å…³æ§åˆ¶çš„ï¼Œå¯ä»¥æœ‰ä¸åŒçš„ç»´åº¦ï¼Œæˆ‘ä»¬ä¸»è¦ä»¥ç”¨æˆ·ç»´åº¦ï¼Œå››çº§åœ°å€ç»´åº¦ï¼Œé…é€ä¸­å¿ƒå’Œä»“åº“ç»´åº¦ã€‚å’ŒæœåŠ¡è·¯ç”±æœ‰å·®å¼‚ï¼Œä¸»è¦æ˜¯é€šè¿‡æµé‡è·¯ç”±åˆ°ä¸åŒçš„ä¸šåŠ¡é€»è¾‘åˆ†æ”¯é‡Œå»å¤„ç†äº†ã€‚","like_count":0},{"had_liked":false,"id":32278,"user_name":"æ³¢æ³¢å®‰","can_delete":false,"product_type":"c1","uid":1002452,"ip_address":"","ucode":"2A677908E5A75D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/d4/b7719327.jpg","comment_is_top":false,"comment_ctime":1539510420,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1539510420","product_id":100014401,"comment_content":"æˆ‘ä»¬ç°åœ¨å¤„ç†çš„æ–¹å¼æ˜¯å…ˆåœˆå®šä¸€æ‰¹å‹å¥½ç”¨æˆ·ä½œä¸ºç°åº¦ç™½åå•ç”¨æˆ·ã€‚å¯¹äºè¿™ä¸€æ‰¹ç”¨æˆ·åœ¨ç™»å½•æ—¶ä¼šå†™ç‰¹å®šçš„cookieæ ‡è¯†ï¼Œè®¿é—®æ—¶ngæ ¹æ®cookieæ ‡è¯†åšè·¯ç”±ç­–ç•¥ã€‚å°†è¯·æ±‚åˆ†å‘åˆ°å‡çº§å¥½çš„ç°åº¦é›†ç¾¤ï¼ŒéªŒè¯æ–°åŠŸèƒ½ã€‚","like_count":0},{"had_liked":false,"id":30806,"user_name":"å¤§å…‰å¤´","can_delete":false,"product_type":"c1","uid":1041792,"ip_address":"","ucode":"8EF797AFD1E27C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo3DrWeV7ZwRLXrRZg4V3ic1LQYdZ3u1oicDhqPic47vMguvf5QS69roTiaJrwDr5Re3Sy2UyHDWwmsTA/132","comment_is_top":false,"comment_ctime":1539000217,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539000217","product_id":100014401,"comment_content":"åœˆå®šç”¨æˆ·éœ€è¦è·¯ç”±è§„åˆ™èƒ½å¤Ÿè¯†åˆ«ç”¨æˆ·IDæˆ–è€…æŸäº›æ ‡è¯†ï¼Œæ¯”å¦‚åœ°åŒºç­‰ã€‚æœ‰äº†è¿™ä¸ªåŠŸèƒ½å°±èƒ½å¤Ÿåšåˆ°åœˆå®šç”¨æˆ·å‘å¸ƒã€‚<br>æˆ‘ç°åœ¨çš„æœåŠ¡å¹¶æ²¡æœ‰æœåŠ¡è·¯ç”±åŠŸèƒ½ï¼Œæ‰€ä»¥è¿™äº›éƒ½æ˜¯åšåˆ°æœåŠ¡å†…éƒ¨","like_count":0},{"had_liked":false,"id":30804,"user_name":"å¤§å…‰å¤´","can_delete":false,"product_type":"c1","uid":1041792,"ip_address":"","ucode":"8EF797AFD1E27C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo3DrWeV7ZwRLXrRZg4V3ic1LQYdZ3u1oicDhqPic47vMguvf5QS69roTiaJrwDr5Re3Sy2UyHDWwmsTA/132","comment_is_top":false,"comment_ctime":1539000018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539000018","product_id":100014401,"comment_content":"é¦–å…ˆåœˆå®šç”¨æˆ·æ˜¯æ ¹æ®ç”¨æˆ·çš„IDï¼Œé‚£å°±éœ€è¦æ ¹æ®ç”¨æˆ·IDè¿›è¡Œè·¯ç”±ã€‚æ‰€ä»¥éœ€è¦è·¯ç”±è§„åˆ™é‡Œè¦èƒ½å¤Ÿè¯†åˆ«ç”¨æˆ·IDæ‰èƒ½æ»¡è¶³è¦æ±‚ã€‚","like_count":0},{"had_liked":false,"id":30803,"user_name":"å¤§å…‰å¤´","can_delete":false,"product_type":"c1","uid":1041792,"ip_address":"","ucode":"8EF797AFD1E27C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo3DrWeV7ZwRLXrRZg4V3ic1LQYdZ3u1oicDhqPic47vMguvf5QS69roTiaJrwDr5Re3Sy2UyHDWwmsTA/132","comment_is_top":false,"comment_ctime":1539000017,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539000017","product_id":100014401,"comment_content":"é¦–å…ˆåœˆå®šç”¨æˆ·æ˜¯æ ¹æ®ç”¨æˆ·çš„IDï¼Œé‚£å°±éœ€è¦æ ¹æ®ç”¨æˆ·IDè¿›è¡Œè·¯ç”±ã€‚æ‰€ä»¥éœ€è¦è·¯ç”±è§„åˆ™é‡Œè¦èƒ½å¤Ÿè¯†åˆ«ç”¨æˆ·IDæ‰èƒ½æ»¡è¶³è¦æ±‚ã€‚","like_count":0},{"had_liked":false,"id":30055,"user_name":"é­é¢–çª","can_delete":false,"product_type":"c1","uid":1184964,"ip_address":"","ucode":"097544C71EBDA7","user_header":"https://static001.geekbang.org/account/avatar/00/12/14/c4/e354d8ba.jpg","comment_is_top":false,"comment_ctime":1538639769,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538639769","product_id":100014401,"comment_content":"æ³¨å†Œä¸­å¿ƒä¹Ÿå¯ä»¥æ ¹æ®è·¯ç”±è§„åˆ™è¿›è¡Œè¿‡æ»¤ï¼Œå°†æœ€ç»ˆçš„api urlsç»“æœä½œä¸ºæœåŠ¡æä¾›è€…å‘ŠçŸ¥æ¶ˆè´¹è€…ã€‚å½“ç„¶å‰ææ˜¯æ³¨å†Œä¸­å¿ƒæ˜¯è‡ªç ”å¯æ§ã€‚","like_count":0}]}