{"id":824742,"title":"06ï½œOpenAI APIï¼šLLMç¼–ç¨‹çš„äº‹å®æ ‡å‡†ï¼ˆä¸‹ï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ‘æ™”ï¼</p><p>é€šè¿‡ä¸Šä¸€è®²çš„ä»‹ç»ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼ŒOpenAI API å·²ç»æˆä¸ºäº† LLM ç¼–ç¨‹çš„äº‹å®æ ‡å‡†ï¼Œä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å®ƒæœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ï¼Œå¹¶ä¸”é€‰æ‹©äº†èŠå¤©è¡¥å…¨è¿™ä¸ªæœ€æ ¸å¿ƒçš„ API ä½œä¸ºå­¦ä¹ çš„åˆ‡å…¥ç‚¹ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘ä»¬ä¸Šä¸€è®²åªè®²èŠå¤©è¡¥å…¨çš„è¯·æ±‚éƒ¨åˆ†ï¼Œè®©ä½ å¯¹æ€æ ·å¯¹ LLM æé—®æœ‰äº†åŸºæœ¬äº†è§£ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬è¿˜æœ‰æ›´é‡è¦çš„éƒ¨åˆ†è¦å»å¤„ç†ï¼Œè¿™å°±æ˜¯å¤§æ¨¡å‹çš„å›ç­”ã€‚è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°±ä¹¦æ¥ä¸Šæ–‡ï¼Œçœ‹çœ‹ LLM æ€æ ·å›ç­”æˆ‘ä»¬çš„é—®é¢˜ã€‚</p><h2>èŠå¤©åº”ç­”</h2><p>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼ŒèŠå¤©è¡¥å…¨çš„åº”ç­”å†…å®¹æœ¬èº«æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ HTTP çš„åº”ç­”ã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬è¿˜è¦æŠŠå®ƒå•ç‹¬æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯å®ƒè¿˜æœ‰ä¸€ç§æµå¼åº”ç­”çš„æ¨¡å¼ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹æ­£å¸¸çš„ HTTP åº”ç­”ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¯·æ±‚è¿‡å»ï¼Œå¤§æ¨¡å‹ç›´æ¥å›å¤ä¸€ä¸ªå®Œæ•´çš„åº”ç­”ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåº”ç­”çš„ä¾‹å­ï¼š</p><pre><code class=\"language-json\">{\n&nbsp; \"id\": \"chatcmpl-123\",\n&nbsp; \"object\": \"chat.completion\",\n&nbsp; \"created\": 1677652288,\n&nbsp; \"model\": \"gpt-4o-mini\",\n&nbsp; \"system_fingerprint\": \"fp_44709d6fcb\",\n&nbsp; \"choices\": [{\n&nbsp; &nbsp; \"index\": 0,\n&nbsp; &nbsp; \"message\": {\n&nbsp; &nbsp; &nbsp; \"role\": \"assistant\",\n&nbsp; &nbsp; &nbsp; \"content\": \"\\n\\nHello there, how may I assist you today?\",\n&nbsp; &nbsp; },\n&nbsp; &nbsp; \"logprobs\": null,\n&nbsp; &nbsp; \"finish_reason\": \"stop\"\n&nbsp; }],\n&nbsp; \"usage\": {\n&nbsp; &nbsp; \"prompt_tokens\": 9,\n&nbsp; &nbsp; \"completion_tokens\": 12,\n&nbsp; &nbsp; \"total_tokens\": 21\n&nbsp; }\n}\n</code></pre><!-- [[[read_end]]] --><p>æˆ‘ä»¬å…ˆæ¥äº†è§£å‡ ä¸ªç®€å•çš„å‚æ•°ï¼š</p><ul>\n<li>\n<p>idï¼Œåº”ç­”çš„å”¯ä¸€æ ‡è¯†ã€‚è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œæ–¹ä¾¿åœ¨å‡ºé—®é¢˜æ—¶å®šä½é—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>objectï¼Œå¯¹è±¡ç±»å‹ã€‚è¿™æ˜¯ OpenAI API åº”ç­”çš„ä¸€ä¸ªé€šç”¨å­—æ®µï¼Œä¸åŒç±»å‹çš„åº”ç­”éƒ½ä¼šæœ‰è‡ªå·±å›ºå®šçš„å¯¹è±¡ç±»å‹ï¼Œåœ¨èŠå¤©è¡¥å…¨æ¥å£ä¸­ï¼Œå®ƒçš„å€¼å°±æ˜¯ chat.completionã€‚</p>\n</li>\n<li>\n<p>createdï¼ŒUnix æ—¶é—´æˆ³ã€‚å®ƒè¡¨æ˜äº†è¿™ä¸ªåº”ç­”ç”Ÿæˆçš„æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>modelï¼Œç”Ÿæˆåº”ç­”çš„æ¨¡å‹ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå®ƒå°±æ˜¯è¯·æ±‚æ—¶æ‰€å¸¦çš„æ¨¡å‹ã€‚ä¸è¿‡ï¼ŒåŒä¸€ä¸ªæ¨¡å‹å¯èƒ½å­˜åœ¨ä¸åŒç‰ˆæœ¬çš„æƒ…å†µï¼Œå®ƒæœ‰æ—¶ä¼šè¿”å›å…·ä½“çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚ï¼šgpt-4o-mini-2024-07-18ã€‚</p>\n</li>\n<li>\n<p>system_fingerprintï¼Œç³»ç»ŸæŒ‡çº¹ã€‚å®ƒä»£è¡¨äº†æ¨¡å‹è¿è¡Œæ—¶ä½¿ç”¨çš„åç«¯é…ç½®ã€‚åœ¨è®²åˆ°è¯·æ±‚ä¸­çš„æŠ€æœ¯å‚æ•°æ—¶ï¼Œæˆ‘ä»¬æåˆ°è¿‡ä¸€ä¸ª seed å‚æ•°ï¼Œå¯ä»¥å½“åšåç«¯ç¼“å­˜æ¥çœ‹ã€‚seed å‚æ•°å°±æ˜¯è¦ä¸è¿™ä¸ª system_fingerprint é…åˆä½¿ç”¨çš„ã€‚</p>\n</li>\n</ul><p>å‰é¢å‡ ä¸ªå‚æ•°éƒ½éå¸¸å¥½ç†è§£ï¼Œæ¥ä¸‹æ¥çš„ <strong>choices</strong> æ‰æ˜¯æˆ‘ä»¬åº”ç­”çš„é‡ç‚¹ï¼Œè¿™æ˜¯å¤§æ¨¡å‹ç»™æˆ‘ä»¬å›å¤çš„çœŸæ­£å†…å®¹ã€‚choices æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨ï¼Œå…¶ä¸­çš„æ¯ä¸ªå¯¹è±¡å°±æ˜¯å¤§æ¨¡å‹ç”Ÿæˆæ–‡æœ¬çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸€ä¸‹ï¼š</p><ul>\n<li>\n<p>indexï¼Œç´¢å¼•ã€‚è¿™å°±æ˜¯ä¸€ä¸ªé¡ºåºç¼–å·ï¼Œå¦‚æœæ–‡æœ¬è¢«åˆ‡åˆ†äº†ï¼Œé€šè¿‡ç´¢å¼•å°±å¯ä»¥å°†å†…å®¹é‡æ–°æ’åˆ—ï¼Œç”Ÿæˆæ­£ç¡®çš„é¡ºåºã€‚ä¸è¿‡ï¼Œå¦‚æœå¯¹äºæ ‡å‡†çš„ HTTP åº”ç­”ï¼Œåˆ‡ç‰‡çš„å¿…è¦æ€§ä¸å¤§ï¼Œå¾€å¾€åªæœ‰ä¸€å—ã€‚</p>\n</li>\n<li>\n<p>finish_reasonï¼Œåœæ­¢ç”Ÿæˆ token çš„åŸå› ã€‚æ–‡æœ¬ä¸ä¼šæ— é™ç”Ÿæˆï¼Œæ€»ä¼šåœä¸‹æ¥ã€‚åˆ°äº†åœæ­¢ç‚¹æˆ–é‡åˆ°åœæ­¢åºåˆ—ï¼ŒåŸå› å°±æ˜¯ stopï¼Œåˆ°äº†ä¸€å®šçš„é•¿åº¦ï¼ŒåŸå› å°±æ˜¯ lengthï¼Œç”Ÿæˆäº†å·¥å…·è°ƒç”¨å°±æ˜¯ tool_callsã€‚</p>\n</li>\n<li>\n<p>messageï¼Œå›å¤çš„æ¶ˆæ¯ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŒ…å«äº†ä¸¤ä¸ªå­—æ®µï¼šè§’è‰²ï¼ˆroleï¼‰å’Œå†…å®¹ï¼ˆcontentï¼‰ã€‚è¿™ä¸ªéƒ¨åˆ†ä¸è¯·æ±‚ä¸­çš„æ¶ˆæ¯æ˜¯ä¸€æ ·çš„ï¼Œæœ€æ ¸å¿ƒçš„å­—æ®µå°±æ˜¯å†…å®¹ï¼Œè§’è‰²éƒ¨åˆ†å·²ç»è§£é‡Šè¿‡äº†ï¼ˆå¯ä»¥å›çœ‹ä¸Šä¸€è®²çš„æ ¸å¿ƒå‚æ•°éƒ¨åˆ†ï¼‰ã€‚</p>\n</li>\n</ul><p>é™¤äº†å¸¸è§„çš„å›å¤å†…å®¹ä¹‹å¤–ï¼Œå¦‚æœå›å¤å†…å®¹æ˜¯ä¸€ä¸ªå·¥å…·è°ƒç”¨ï¼Œä¹Ÿæ˜¯é€šè¿‡ message é‡Œè¿”å›çš„ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><pre><code class=\"language-json\">{\n&nbsp; \"id\": \"chatcmpl-abc123\",\n&nbsp; \"object\": \"chat.completion\",\n&nbsp; \"created\": 1699896916,\n&nbsp; \"model\": \"gpt-4o-mini\",\n&nbsp; \"choices\": [\n&nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; \"index\": 0,\n&nbsp; &nbsp; &nbsp; \"message\": {\n&nbsp; &nbsp; &nbsp; &nbsp; \"role\": \"assistant\",\n&nbsp; &nbsp; &nbsp; &nbsp; \"content\": null,\n&nbsp; &nbsp; &nbsp; &nbsp; \"tool_calls\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"id\": \"call_abc123\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"type\": \"function\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"function\": {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"name\": \"get_current_weather\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"arguments\": \"{\\n\\\"location\\\": \\\"Boston, MA\\\"\\n}\"\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; \"logprobs\": null,\n&nbsp; &nbsp; &nbsp; \"finish_reason\": \"tool_calls\"\n&nbsp; &nbsp; }\n&nbsp; ],\n&nbsp; \"usage\": {\n&nbsp; &nbsp; \"prompt_tokens\": 82,\n&nbsp; &nbsp; \"completion_tokens\": 17,\n&nbsp; &nbsp; \"total_tokens\": 99\n&nbsp; }\n}\n</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ° content å­—æ®µæ˜¯ç©ºçš„ï¼Œä½†å¤šäº†ä¸€ä¸ª tool_callsï¼Œæ­£å¦‚å…¶åå­—æ‰€ç¤ºï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡å¯ä»¥è¿”å›å¤šä¸ªå·¥å…·è°ƒç”¨ã€‚å…¶ä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«äº†ä¸€äº›å­—æ®µï¼š</p><ul>\n<li>\n<p>idï¼Œå‡½æ•°è°ƒç”¨çš„ IDã€‚</p>\n</li>\n<li>\n<p>typeï¼Œç›®å‰åªæ”¯æŒ functionï¼Œè¿™åœ¨å‰é¢è®²è¯·æ±‚çš„æ—¶å€™ä¹Ÿè¯´è¿‡äº†ã€‚</p>\n</li>\n<li>\n<p>functionï¼Œå‡½æ•°è°ƒç”¨éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…å«äº†åå­—ï¼ˆnameï¼‰å’Œå‚æ•°ï¼ˆargumentsï¼‰ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå°±è¡¨ç¤ºè°ƒç”¨ get_current_weather è¿™ä¸ªå‡½æ•°ï¼Œå…¶å‚æ•° location çš„å€¼æ˜¯ Boston, MAã€‚</p>\n</li>\n</ul><p>é™¤äº†åŸºæœ¬çš„å†…å®¹ï¼Œæˆ‘ä»¬å‰é¢è¿˜æåˆ°è¿‡ï¼Œå¤§æ¨¡å‹ç”Ÿæˆæ–‡æœ¬æ˜¯æ ¹æ®æ¦‚ç‡è¿›è¡Œè®¡ç®—çš„ï¼Œæˆ‘ä»¬ä¸Šä¸€è®²è¯´è¿‡ï¼Œè®¾ç½® logprobs å°±å¯ä»¥è®©å¤§æ¨¡å‹æŠŠæ¦‚ç‡è¿”å›ç»™æˆ‘ä»¬ï¼Œè®¾ç½® top_logprobs å¯ä»¥è¿”å›æ¦‚ç‡æ¯”è¾ƒé«˜çš„å‡ ä¸ªé€‰é¡¹ã€‚</p><p>ä¸‹é¢è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬å¼€å¯äº† logprobsï¼Œè¿˜æŠŠ top_logprobs è®¾ç½®æˆäº† 2ã€‚</p><pre><code class=\"language-json\">{\n&nbsp; \"id\": \"chatcmpl-123\",\n&nbsp; \"object\": \"chat.completion\",\n&nbsp; \"created\": 1702685778,\n&nbsp; \"model\": \"gpt-4o-mini\",\n&nbsp; \"choices\": [\n&nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; \"index\": 0,\n&nbsp; &nbsp; &nbsp; \"message\": {\n&nbsp; &nbsp; &nbsp; &nbsp; \"role\": \"assistant\",\n&nbsp; &nbsp; &nbsp; &nbsp; \"content\": \"Hello! How can I assist you today?\"\n&nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; \"logprobs\": {\n&nbsp; &nbsp; &nbsp; &nbsp; \"content\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"Hello\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.31725305,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [72, 101, 108, 108, 111],\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"top_logprobs\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"Hello\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.31725305,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [72, 101, 108, 108, 111]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"Hi\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -1.3190403,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [72, 105]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"!\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.02380986,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 33\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ],\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"top_logprobs\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"!\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.02380986,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [33]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" there\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -3.787621,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 116, 104, 101, 114, 101]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" How\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.000054669687,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 72, 111, 119],\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"top_logprobs\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" How\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.000054669687,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 72, 111, 119]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"&lt;|end|&gt;\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -10.953937,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": null\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" can\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.015801601,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 99, 97, 110],\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"top_logprobs\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" can\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.015801601,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 99, 97, 110]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" may\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -4.161023,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 109, 97, 121]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" I\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -3.7697225e-6,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 32,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 73\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ],\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"top_logprobs\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" I\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -3.7697225e-6,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 73]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" assist\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -13.596657,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 97, 115, 115, 105, 115, 116]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" assist\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.04571125,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 97, 115, 115, 105, 115, 116],\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"top_logprobs\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" assist\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.04571125,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 97, 115, 115, 105, 115, 116]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" help\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -3.1089056,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 104, 101, 108, 112]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" you\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -5.4385737e-6,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 121, 111, 117],\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"top_logprobs\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" you\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -5.4385737e-6,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 121, 111, 117]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" today\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -12.807695,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 116, 111, 100, 97, 121]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" today\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.0040071653,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 116, 111, 100, 97, 121],\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"top_logprobs\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \" today\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.0040071653,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [32, 116, 111, 100, 97, 121]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"?\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -5.5247097,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [63]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"?\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.0008108172,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [63],\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"top_logprobs\": [\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"?\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -0.0008108172,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [63]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"token\": \"?\\n\",\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"logprob\": -7.184561,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"bytes\": [63, 10]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; ]\n&nbsp; &nbsp; &nbsp; },\n&nbsp; &nbsp; &nbsp; \"finish_reason\": \"stop\"\n&nbsp; &nbsp; }\n&nbsp; ],\n&nbsp; \"usage\": {\n&nbsp; &nbsp; \"prompt_tokens\": 9,\n&nbsp; &nbsp; \"completion_tokens\": 9,\n&nbsp; &nbsp; \"total_tokens\": 18\n&nbsp; },\n&nbsp; \"system_fingerprint\": null\n}\n</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œåœ¨ logprobs çš„ content å­—æ®µé‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªä¸ª token ä¸å…¶å¯¹åº”çš„æ¦‚ç‡ï¼ˆlogprobï¼‰ã€‚bytes è¡¨ç¤ºè¿™ä¸ª token å¯¹åº”çš„ UTF-8 çš„å­—èŠ‚è¡¨ç°å½¢å¼ï¼Œè€Œ top_logprobs åˆ™åŒ…å«äº†æ¯ä¸ª token å¯¹åº”çš„å¤‡é€‰ token åŠå…¶æ¦‚ç‡ã€‚</p><h2>æµå¼åº”ç­”</h2><p>ç°åœ¨ä½ å·²ç»å¯¹å¤§æ¨¡å‹å›å¤çš„å†…å®¹æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„äº†è§£ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹å¤§æ¨¡å‹å›å¤çš„ä¸€ç§é‡è¦è¡Œä¸ºï¼šæµå¼åº”ç­”ã€‚</p><p>æµå¼åº”ç­”çš„å‡ºç°ä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¤§æ¨¡å‹ç”Ÿæˆæ–‡æœ¬æ¯”è¾ƒæ…¢çš„é—®é¢˜ã€‚å¦‚æœç­‰å¤§æ¨¡å‹æŠŠæ‰€æœ‰å†…å®¹ç”Ÿæˆä¸€æ¬¡æ€§è¿”å›ï¼Œç­‰å¾…çš„æ—¶é—´ä¼šéå¸¸é•¿ã€‚å¯¹äºèŠå¤©çš„åœºæ™¯ï¼Œè¿™ä¼šè®©æœ¬å·²å¾ˆé•¿çš„ç­‰å¾…æ—¶é—´ä¼šæ˜¾å¾—æ›´åŠ æ¼«é•¿ã€‚</p><p>å¦‚æœæƒ³è¦æé«˜å“åº”é€Ÿåº¦ï¼Œå¯ä»¥æ€ä¹ˆåšå‘¢ï¼Ÿä¹‹å‰æˆ‘ä»¬è®²è¿‡ï¼Œå¤§æ¨¡å‹çš„æ ¸å¿ƒå·¥ä½œå°±æ˜¯ä¸€æ¬¡æ·»åŠ ä¸€ä¸ª Tokenã€‚æ­£æ˜¯å› ä¸ºæœ‰äº†è¿™ç§å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬ä¸ç”¨ç­‰æ‰€æœ‰å†…å®¹ç”Ÿæˆå®Œæ¯•ï¼Œå·²ç»ç¡®å®šç”Ÿæˆå‡ºæ¥çš„å†…å®¹å¯ä»¥å…ˆæ¨é€ç»™ç”¨æˆ·ã€‚</p><p>å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œçœ‹åˆ°ç¬¬ä¸€ä¸ªå­—å‡ºæ¥ï¼Œå•çº¯çš„ç­‰å¾…å°±ç»“æŸäº†ã€‚è¿™æ ·ç»™äººçš„æ„Ÿè§‰å°±æ˜¯ï¼Œå“åº”é€Ÿåº¦å¾—åˆ°äº†å¤§å¹…åº¦æå‡ã€‚æ‰€ä»¥ï¼Œåœ¨å¤§éƒ¨åˆ†çš„å¤§æ¨¡å‹èŠå¤©ç•Œé¢ä¸Šï¼Œæˆ‘ä»¬éƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªå­—ä¸€ä¸ªå­—å¾€å¤–è¹¦çš„æ•ˆæœï¼Œè¦å®ç°è¿™ç§æ•ˆæœï¼Œé€šå¸¸å°±æ˜¯é‡‡ç”¨æµå¼åº”ç­”çš„æ–¹å¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/a7/a3769260afyy5ff7025befb0e58a4ca7.gif?wh=1252x552\" alt=\"å›¾ç‰‡\"></p><p>é‚£ä»€ä¹ˆæ—¶å€™è¯¥ç”¨æµå¼åº”ç­”ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ç”¨å¸¸è§„çš„åº”ç­”å‘¢ï¼Ÿæµå¼åº”ç­”ä¸»è¦æ˜¯ä¸ºäº†<strong>æé«˜èŠå¤©çš„å“åº”é€Ÿåº¦ï¼Œ</strong>è¿™å°±æ˜¯æµå¼åº”ç­”çš„ä¸»è¦å·¥ä½œåœºæ™¯ã€‚å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬æŠŠå¤§æ¨¡å‹å½“åšæ¨ç†å¼•æ“ï¼Œè®©å®ƒè§‰å¾—ä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆï¼Œé‚£å°±ç”¨å¸¸è§„çš„åº”ç­”ã€‚</p><p>æ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œæµå¼åº”ç­”å¯ä»¥é‡‡ç”¨ä»€ä¹ˆæŠ€æœ¯å®ç°å‘¢ï¼Ÿå¦‚æœä½ åšè¿‡æœåŠ¡ç«¯çš„å¼€å‘ï¼Œåƒè¿™ç§æ¶‰åŠåˆ°æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€å†…å®¹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé€‰æ‹© Websocketï¼Œä½† OpenAI åœ¨è¿™ä¸ªé—®é¢˜ä¸Šå´é€‰æ‹©äº† SSE è¿™ç§æŠ€æœ¯ã€‚</p><h3>SSE</h3><blockquote>\n<p>SSE æ˜¯æœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆServer-Sent Eventï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§æœåŠ¡å™¨æ¨é€æŠ€æœ¯ï¼Œå®¢æˆ·ç«¯é€šè¿‡ HTTP è¿æ¥æ¥æ”¶æ¥è‡ªæœåŠ¡å™¨çš„è‡ªåŠ¨æ›´æ–°ï¼Œå®ƒæè¿°äº†æœåŠ¡å™¨å¦‚ä½•åœ¨å»ºç«‹åˆå§‹å®¢æˆ·ç«¯è¿æ¥åå‘å®¢æˆ·ç«¯å‘èµ·æ•°æ®ä¼ è¾“ã€‚<br>\nâ€”â€”Wikipedia</p>\n</blockquote><p>ç®€å•ç†è§£ï¼ŒSSE å°±æ˜¯åœ¨ HTTP è¿æ¥å»ºç«‹èµ·æ¥ä¹‹åï¼Œç”±æœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯æ¨é€æ¶ˆæ¯ã€‚å°±åƒä¸‹å›¾æ‰€ç¤ºï¼Œå¸¸è§„çš„åº”ç­”ä¼šåœ¨å»ºç«‹èµ·çš„ HTTP é€šé“ä¸Šï¼Œä¸€æ¬¡æ€§åœ°æŠŠæ‰€æœ‰å†…å®¹éƒ½å‘é€ç»™å®¢æˆ·ç«¯ï¼Œè€Œ SSE çš„æ–¹å¼æ˜¯åœ¨è¿æ¥å»ºç«‹ä¹‹åï¼Œä¸€å—ä¸€å—åœ°æŠŠæ¶ˆæ¯å‘ç»™ç”¨æˆ·ã€‚å¯¹åº”åˆ°å¤§æ¨¡å‹ä¸Šï¼Œå°±æ˜¯æ¯ç”Ÿæˆä¸€éƒ¨åˆ†å†…å®¹å°±å‘é€ä¸€æ¬¡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e7/85/e7d6b86a01fe0871eb5fb1dbfcc7c885.jpg?wh=3747x3449\" alt=\"\"></p><p>å¯¹æ¯”å¾ˆå¤šäººç†Ÿæ‚‰çš„ Websocket æ¥çœ‹ï¼Œæˆ‘ä»¬ä¼šæ›´æ¸…æ¥šä¸€äº›ï¼š</p><ul>\n<li>\n<p>äºŒè€…éƒ½æ˜¯å»ºç«‹åœ¨ HTTP åè®®åŸºç¡€ä¸Šï¼Œ Websocket å»ºç«‹äº†ä¸€å¥—è‡ªå·±çš„é€šä¿¡åè®®ï¼Œè€Œ SSE åˆ™æ˜¯å¯ä»¥ç†è§£ä¸ºå»ºç«‹åœ¨ HTTP é€šä¿¡åè®®åŸºç¡€ä¸Šçš„ä¸€å±‚åº”ç”¨åè®®ã€‚</p>\n</li>\n<li>\n<p>Websocket ä¸»è¦æ˜¯åŒå‘é€šä¿¡ï¼ˆå®¢æˆ·ç«¯å¯ä»¥å‘æ¶ˆæ¯ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¹Ÿå¯ä»¥å‘æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ï¼‰ï¼ŒSSE æ˜¯å•å‘é€šä¿¡ï¼ˆä»æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯ï¼‰ã€‚</p>\n</li>\n<li>\n<p>Websocket é€šå¸¸ç”¨äºé•¿è¿æ¥ï¼ŒSSE æ›´é€‚åˆç”¨åœ¨å•æ¬¡è¯·æ±‚çš„åœºæ™¯ã€‚</p>\n</li>\n</ul><p>OpenAI ä¹‹æ‰€ä»¥é€‰æ‹© SSEï¼Œè€Œé WebSocketï¼Œæ˜¯å› ä¸º SSE çš„æŠ€æœ¯ç‰¹ç‚¹åˆšå¥½å¯ä»¥å¥‘åˆæµå¼åº”ç­”çš„éœ€æ±‚ï¼šå®¢æˆ·ç«¯ä¸å¤§æ¨¡å‹çš„äº¤äº’æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œæ¯äº§ç”Ÿä¸€ä¸ª tokenï¼ŒæœåŠ¡ç«¯å°±å¯ä»¥ç»™å®¢æˆ·ç«¯æ¨é€ä¸€æ¬¡ï¼Œå½“ç”Ÿæˆå†…å®¹ç»“æŸæ—¶ï¼Œæ–­æ‰è¿æ¥ï¼Œæ— éœ€è€ƒè™‘å®¢æˆ·ç«¯çš„å­˜æ´»æƒ…å†µã€‚</p><p>å¦‚æœé‡‡ç”¨ WebSocket çš„è¯ï¼ŒæœåŠ¡ç«¯å°±éœ€è¦ç»´æŠ¤è¿æ¥ï¼Œåƒ OpenAI è¿™æ ·çš„æœåŠ¡ä½“é‡ï¼Œç»´æŠ¤è¿æ¥å°±ä¼šé€ æˆå¾ˆå¤§çš„æœåŠ¡å™¨å‹åŠ›ï¼Œè€Œä¸”ï¼Œåœ¨ç”Ÿæˆå†…å®¹åœºæ™¯ä¸‹ï¼Œä¹Ÿæ²¡æœ‰å‘æœåŠ¡ç«¯è¿›ä¸€æ­¥å‘é€å†…å®¹ï¼ŒWebSocket çš„åŒå‘é€šä¿¡åœ¨è¿™é‡Œä¹Ÿæ˜¯å¤šä½™çš„ã€‚</p><p>å•å°± SSE è¿™é¡¹æŠ€æœ¯è€Œè¨€ï¼Œå®ƒå­˜åœ¨å·²ç»å¾ˆé•¿æ—¶é—´äº†ï¼Œ2004 å¹´å°±æœ‰äººæå‡ºï¼Œä½†ç›´åˆ°å¤§æ¨¡å‹çš„å…´èµ·ï¼Œè¿™é¡¹æŠ€æœ¯æ‰å½»åº•æµè¡Œèµ·æ¥ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ç‚¹ç»†èŠ‚çš„é—®é¢˜ï¼ŒSSE é€šå¸¸æ˜¯ç”¨åœ¨ GET è¯·æ±‚ä¸Šçš„ï¼Œè€Œ OpenAI çš„èŠå¤©æ¥å£æ˜¯ä¸€ä¸ª POST è¯·æ±‚ï¼Œä»è§„èŒƒçš„è§’åº¦çœ‹ï¼Œå®ƒçš„ç”¨æ³•å¹¶ä¸å®Œå…¨æ°å½“ï¼Œåªæ˜¯ OpenAI API çš„æµè¡Œè®©å¤§å®¶æ¥å—äº†å®ƒã€‚å¦‚æœä¸¥æ ¼éµå®ˆ SSE ç¨‹åºåº“å¤„ç† OpenAI API ï¼Œå°±å¯èƒ½ä¼šé‡åˆ°æ— æ³• POST è¯·æ±‚ SSE çš„æƒ…å†µã€‚</p><p>SSE è²Œä¼¼æ˜¯ä¸€é¡¹é«˜æ·±çš„æŠ€æœ¯ï¼Œä½†åªè¦æˆ‘ä»¬çœ‹ä¸€ä¸‹æŠ¥æ–‡å°±ä¸éš¾ç†è§£å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚æ ¹æ®æŠ¥æ–‡çš„å½¢å¼ï¼ŒSSE é€šå¸¸åˆ†æˆçº¯æ•°æ®æ¶ˆæ¯å’Œäº‹ä»¶æ¶ˆæ¯ã€‚çº¯æ•°æ®æ¶ˆæ¯ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯åªæœ‰æ•°æ®çš„æ¶ˆæ¯ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><pre><code class=\"language-json\">data: This is the first message.\n\ndata: This is the second message, it\ndata: has two lines.\n\ndata: This is the third message.\n</code></pre><p>æ­£å¦‚ä½ åœ¨è¿™é‡Œçœ‹åˆ°çš„ï¼Œæ¯ä¸€æ¡æ¶ˆæ¯å¼€å¤´éƒ½æœ‰ä¸€ä¸ª dataï¼Œè¡¨ç¤ºåé¢çš„å†…å®¹å°±æ˜¯ä¸€æ¡æ•°æ®ã€‚è¿™ç§å½¢å¼çš„æ•°æ®æ¶ˆæ¯å°±æ˜¯æµå¼åº”ç­”é‡Œæœ€å¸¸ç”¨çš„æ¶ˆæ¯ï¼Œæ¯æ¬¡ç”Ÿæˆäº†ä¸€ä¸ª tokenï¼Œå°±æ¨é€ä¸€æ¡ä»¥ data å¼€å¤´çš„æ•°æ®å—ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªåˆä¸€ä¸ªçš„æ¶ˆæ¯å—ã€‚</p><p>äº‹ä»¶æ¶ˆæ¯ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ä¹Ÿå°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼š</p><pre><code class=\"language-json\">event: add\ndata: 73857293\n\nevent: remove\ndata: 2153\n\nevent: add\ndata: 113411\n</code></pre><p>è¿™é‡Œçš„æ¶ˆæ¯ä¼šå…ˆæœ‰ä¸€ä¸ªäº‹ä»¶ï¼ˆeventï¼‰ï¼Œåé¢è·Ÿç€å…·ä½“çš„æ•°æ®ï¼ˆdataï¼‰ï¼Œå¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œè¿™ç§åšæ³•ç±»ä¼¼äºå‡½æ•°å’Œå®ƒçš„å‚æ•°ã€‚æœåŠ¡ç«¯æ¯æ¬¡æ¨é€ï¼Œéƒ½ä¼šæ¨é€ä¸€ä¸ªäº‹ä»¶åŠ ä¸Šä¸€ä¸ªæ•°æ®ã€‚</p><p>æ¸…æ¥šäº† SSE çš„å®ç°ï¼Œæˆ‘ä»¬å†æ¥çœ‹èŠå¤©è¡¥å…¨æ¥å£ä¸­æµå¼åº”ç­”çš„å®ç°ï¼Œä½ å°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><pre><code class=\"language-json\">{\"id\":\"chatcmpl-123\",\"object\":\"chat.completion.chunk\",\"created\":1694268190,\"model\":\"gpt-4o-mini\", \"system_fingerprint\": \"fp_44709d6fcb\", \"choices\":[{\"index\":0,\"delta\":{\"role\":\"assistant\",\"content\":\"\"},\"logprobs\":null,\"finish_reason\":null}]}\n\n{\"id\":\"chatcmpl-123\",\"object\":\"chat.completion.chunk\",\"created\":1694268190,\"model\":\"gpt-4o-mini\", \"system_fingerprint\": \"fp_44709d6fcb\", \"choices\":[{\"index\":0,\"delta\":{\"content\":\"Hello\"},\"logprobs\":null,\"finish_reason\":null}]}\n\n....\n\n{\"id\":\"chatcmpl-123\",\"object\":\"chat.completion.chunk\",\"created\":1694268190,\"model\":\"gpt-4o-mini\", \"system_fingerprint\": \"fp_44709d6fcb\", \"choices\":[{\"index\":0,\"delta\":{},\"logprobs\":null,\"finish_reason\":\"stop\"}]}\n</code></pre><p>è¿™é‡Œé¢æˆ‘ä»¬çœ‹åˆ°äº†å¾ˆå¤šæ¶ˆæ¯å—ï¼Œæ¯å—å°±å¯¹åº”ç€ SSE ä¸­çš„ä¸€ä¸ª data å—ã€‚æœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œæ¶ˆæ¯å†…å®¹ä¹Ÿå¾ˆå¥½ç†è§£äº†ï¼Œæˆ‘è¿™é‡ŒåªæŠŠéœ€è¦æ³¨æ„çš„ä¸€äº›ç»†èŠ‚è¯´ä¸€ä¸‹ï¼Œå…¶å®ƒéƒ¨åˆ†å«ä¹‰åŒä¹‹å‰çš„è§£é‡Šæ˜¯ä¸€è‡´çš„ã€‚</p><ul>\n<li>\n<p>idï¼Œæ‰€æœ‰æ¶ˆæ¯å—çš„ ID æ˜¯ä¸€æ ·çš„ï¼Œä¿è¯å®ƒä»¬æ˜¯ä¸€ä¸ªæ¶ˆæ¯ã€‚</p>\n</li>\n<li>\n<p>objectï¼Œæ¶ˆæ¯ç±»å‹æ˜¯ chat.completion.chunkï¼Œè¿™è¯´æ˜å®ƒæ˜¯ä¸€ä¸ªæ¶ˆæ¯å—ã€‚</p>\n</li>\n<li>\n<p>æ¶ˆæ¯å†…å®¹æ˜¯æ”¾åœ¨ choices åˆ—è¡¨ä¸­å¯¹è±¡çš„ delta å­—æ®µä¸­ï¼Œæœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œä½ å·²ç»çŸ¥é“äº†ï¼Œè¿™é‡Œé¢å­˜æ”¾çš„æ˜¯æ¯æ¬¡ç”Ÿæˆçš„ tokenã€‚</p>\n</li>\n</ul><h2>æ€»ç»“æ—¶åˆ»</h2><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬è®¨è®ºäº†èŠå¤©è¡¥å…¨æ¥å£çš„åº”ç­”æ¶ˆæ¯ï¼Œå…¶ä¸­ï¼Œæœ€æ ¸å¿ƒçš„ä¿¡æ¯æ˜¯æ¶ˆæ¯å†…å®¹ã€‚å½“ç„¶ï¼Œæ ¹æ®è¯·æ±‚å†…å®¹çš„ä¸åŒï¼Œåº”ç­”å¯èƒ½è¿˜ä¼šåŒ…å«å¾ˆå¤šå…¶å®ƒä¿¡æ¯ï¼Œæ¯”å¦‚å·¥å…·è°ƒç”¨ã€ç”Ÿæˆ token çš„æ¦‚ç‡ä¿¡æ¯ç­‰ã€‚</p><p>åº”ç­”çš„æ¨¡å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¸¸è§„çš„ HTTP åŒæ­¥åº”ç­”ï¼Œå¦ä¸€ç§æ˜¯æµå¼åº”ç­”ã€‚æµå¼åº”ç­”ä¸»è¦æ˜¯ç”¨åœ¨èŠå¤©çš„åœºæ™¯ï¼Œç”¨äºæé«˜å“åº”é€Ÿåº¦ã€‚æˆ‘ä»¬è¿˜è®¨è®ºäº†æµå¼åº”ç­”çš„åº•å±‚å®ç°æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ SSE æŠ€æœ¯ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>é™¤äº†èŠå¤©è¡¥å…¨æ¥å£ï¼Œè¿˜æœ‰ä¸€ä¸ª Embeddings API åœ¨å¼€å‘å¤§æ¨¡å‹åº”ç”¨ä¸­æ˜¯éå¸¸å¸¸ç”¨çš„ã€‚æˆ‘å»ºè®®ä½ å»å­¦ä¹ ä¸€ä¸‹ï¼Œç„¶ååœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„å¿ƒå¾—ä½“ä¼šã€‚</p>","neighbors":{"left":{"article_title":"05ï½œOpenAI APIï¼šLLMç¼–ç¨‹çš„äº‹å®æ ‡å‡†ï¼ˆä¸Šï¼‰","id":824312},"right":{"article_title":"07ï½œLangChainï¼šä¸€ä¸ªAIåº”ç”¨å¼€å‘ç”Ÿæ€","id":825266}},"comments":[{"had_liked":false,"id":395634,"user_name":"rOMEoç½—å¯†æ¬§","can_delete":false,"product_type":"c1","uid":1074365,"ip_address":"å¹¿ä¸œ","ucode":"9C7BF6E1274D26","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/bd/cbcdc4a6.jpg","comment_is_top":false,"comment_ctime":1731502726,"is_pvip":false,"replies":[{"id":143703,"content":"å¯ä»¥åˆ° OpenAI æˆ–æ˜¯ä»£ç†å¹³å°","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1258861,"ctime":1731828256,"ip_address":"é™•è¥¿","comment_id":395634,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100839101,"comment_content":"è¯·é—®ä¸€ä¸‹æœ‰å¯ä»¥å®æˆ˜çš„ç¯å¢ƒæˆ–è€…å¹³å°å—","like_count":5,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654063,"discussion_content":"å¯ä»¥åˆ° OpenAI æˆ–æ˜¯ä»£ç†å¹³å°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731828256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":1177931,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f9/4b/5532c234.jpg","nickname":"Messi","note":"","ucode":"04302B9E7F1D75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":655363,"discussion_content":"è¯·é—®æœ‰æ¨èçš„ä»£ç†å¹³å°å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734688121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":654063,"ip_address":"æ±Ÿè‹","group_id":0},"score":655363,"extra":""}]}]},{"had_liked":false,"id":395626,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"å®‰å¾½","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1731476207,"is_pvip":false,"replies":[{"id":143690,"content":"ä¸ç»æ„çš„çˆ†å‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1258861,"ctime":1731660962,"ip_address":"é™•è¥¿","comment_id":395626,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100839101,"comment_content":"æ¯ä¸ªæŠ€æœ¯éƒ½æœ‰è‡ªå·±çš„é€‚ç”¨åœºæ™¯ï¼šSSEï¼ˆServer-Sent Eventï¼‰è‡ªå·±å¯èƒ½éƒ½æ²¡æƒ³åˆ°ï¼Œæœ‰ä¸€å¤©æˆ‘ç«Ÿç„¶ä¼šä»æ— äººé—®æ´¥ï¼Œåˆ°ç«çˆ† AI å¼€å‘ã€‚","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654008,"discussion_content":"ä¸ç»æ„çš„çˆ†å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731660962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395833,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"åŒ—äº¬","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1732188773,"is_pvip":false,"replies":[{"id":143780,"content":"æŠ“ä½é‡ç‚¹äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1258861,"ctime":1732692847,"ip_address":"é™•è¥¿","comment_id":395833,"utype":1}],"discussion_count":1,"race_medal":2,"score":2,"product_id":100839101,"comment_content":"ç¬¬6è®²æ‰“å¡~\nStream æµå¼å“åº”ï¼Œç‰¹åˆ«æ˜¯åœ¨ AI èŠå¤©åº”ç”¨ä¸­ï¼Œå¯ä»¥å¤§å¹…æå‡ç”¨æˆ·ä½“éªŒã€‚","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654431,"discussion_content":"æŠ“ä½é‡ç‚¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1732692847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396171,"user_name":"æŠ€æœ¯éª¨å¹²","can_delete":false,"product_type":"c1","uid":1098720,"ip_address":"å¹¿ä¸œ","ucode":"8FCF8DE6D29201","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/e0/3db22579.jpg","comment_is_top":false,"comment_ctime":1733412433,"is_pvip":false,"replies":[{"id":143873,"content":"ç«å¾—è¶…å‡ºäº†è‡ªå·±çš„é¢„æœŸğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1258861,"ctime":1734079171,"ip_address":"é™•è¥¿","comment_id":396171,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100839101,"comment_content":"æ— æ„å¸¦ç« äº†ä¸€é¡¹æŠ€æœ¯SSE","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":655068,"discussion_content":"ç«å¾—è¶…å‡ºäº†è‡ªå·±çš„é¢„æœŸğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1734079172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395625,"user_name":"grok","can_delete":false,"product_type":"c1","uid":1341502,"ip_address":"ç¾å›½","ucode":"4744AB3FA28FE2","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/3e/f60ea472.jpg","comment_is_top":false,"comment_ctime":1731470252,"is_pvip":false,"replies":[{"id":143672,"content":"1. OpenAI API çš„åº•å±‚æœºåˆ¶\n2. å¦‚æœé‡‡ç”¨ WebSocketï¼Œä»€ä¹ˆæ—¶å€™æ–­æ‰è¿æ¥å°±æ˜¯ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Œå¾ˆéº»çƒ¦ï¼Œæœ‰äº† SSEï¼Œå°±ä¸éœ€è¦è€ƒè™‘è¿™ä¸ªé—®é¢˜äº†\n3. Claude å®ƒä»¬éƒ½æ˜¯ SSEï¼Œç°åœ¨åŸºæœ¬ä¸Šæˆäº†é€šç”¨çš„åšæ³•","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1258861,"ctime":1731508663,"ip_address":"é™•è¥¿","comment_id":395625,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100839101,"comment_content":"çº¯å°ç™½ï¼›æœ‰å‡ ä¸ªé—®é¢˜ï¼š\n1. è¿™ä¸ªSSE æŠ€æœ¯ï¼Œæ˜¯åœ¨ChatGPTç•Œé¢èŠå¤©çš„åº•å±‚æœºåˆ¶ï¼Ÿè¿˜æ˜¯æˆ‘ç”¨pythonè°ƒç”¨OpenAI APIæ—¶çš„åº•å±‚æœºåˆ¶ï¼Ÿä¼°è®¡ä¸¤ä¸ªéƒ½æ˜¯ï¼Ÿ\n2. å¦‚æœOpenAIé‡‡ç”¨WebSocket (&quot;æœåŠ¡ç«¯éœ€è¦ç»´æŠ¤è¿æ¥&quot;), ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒå’Œç°åœ¨æœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿæ›´æ…¢ï¼Ÿæ›´ä¸ç¨³å®šï¼Ÿè¿˜æ˜¯ç”¨æˆ·çš„ä½“éªŒå®Œå…¨ä¸€æ ·ï¼Ÿ\n3. åŒç†claude&#47;gemini&#47;etc.å…¨æ˜¯SSEï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"éƒ‘æ™”","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653885,"discussion_content":"1. OpenAI API çš„åº•å±‚æœºåˆ¶\n2. å¦‚æœé‡‡ç”¨ WebSocketï¼Œä»€ä¹ˆæ—¶å€™æ–­æ‰è¿æ¥å°±æ˜¯ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Œå¾ˆéº»çƒ¦ï¼Œæœ‰äº† SSEï¼Œå°±ä¸éœ€è¦è€ƒè™‘è¿™ä¸ªé—®é¢˜äº†\n3. Claude å®ƒä»¬éƒ½æ˜¯ SSEï¼Œç°åœ¨åŸºæœ¬ä¸Šæˆäº†é€šç”¨çš„åšæ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731508663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1160633,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b5/b9/e20ebfe7.jpg","nickname":"æ°”æ³¡","note":"","ucode":"50B60DEE3DDBF5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":654653,"discussion_content":"ChatGPTçš„é¡µé¢å’ŒæœåŠ¡å™¨ ä¹Ÿæœ‰ç”¨åˆ° SSEåè®®ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1733214479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}