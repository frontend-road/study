{"id":711843,"title":"04｜保持会话状态：让Chatbot获得记忆","content":"","comments":[{"had_liked":false,"id":382549,"user_name":"陈东","can_delete":false,"product_type":"c3","uid":2213995,"ip_address":"广西","ucode":"FCDE6D237CC621","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Ge7uhlEVxicQT73YuomDPrVKI8UmhqxKWrhtO5GMNlFjrHWfd3HAjgaSribR4Pzorw8yalYGYqJI4VPvUyPzicSKg/132","comment_is_top":false,"comment_ctime":1697552810,"is_pvip":true,"replies":[{"id":139328,"content":"1. 首先将chatbot的实现封装为一个服务，不含UI，提供API调用即可\n2. 学习在你想对接的通信工具中的聊天机器人的开发，\n3. 将聊天机器人和1中的服务对接。","user_name":"作者回复","user_name_real":"作者","uid":1008262,"ctime":1697595055,"ip_address":"北京","comment_id":382549,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"如何让这个chatbot对接到WeChat或者钉钉等工具上？在jupyterlab上的只能一个一个的对话。暂时找不到好的方法方式。谢谢老师。","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629740,"discussion_content":"1. 首先将chatbot的实现封装为一个服务，不含UI，提供API调用即可\n2. 学习在你想对接的通信工具中的聊天机器人的开发，\n3. 将聊天机器人和1中的服务对接。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697595055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":382691,"user_name":"Jepsenwan","can_delete":false,"product_type":"c3","uid":1220569,"ip_address":"新加坡","ucode":"FEED052E0C10F5","user_header":"","comment_is_top":false,"comment_ctime":1697811312,"is_pvip":false,"replies":[{"id":139383,"content":"感谢你的肯定和支持！\n关于记录状态，不知道你的测试程序是怎样的，你可以通过我给出的代码来验证一下。\n关于如何利用产品文档，可以参考第11讲内容，并通过这个LangChain提供的Loader （https:&#47;&#47;python.langchain.com&#47;docs&#47;integrations&#47;document_loaders&#47;web_base）来加载web上的内容。","user_name":"作者回复","user_name_real":"作者","uid":1008262,"ctime":1697882245,"ip_address":"新加坡","comment_id":382691,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"感谢这期的课程, 我这边测试GPT好像可以记录最近几次的状态..  是因为现在GPT加入了这个功能么？ 谢谢！ 最近在尝试构建个chatbot，通过LLM精确识别intention和entities（parameters），然后调用自己的API，您的课程很好地可以适用上。  另外这个chatbot需要再回答点问题，公网上有发布的产品文档，也只能通过LLM来回答这个第二类问题么，有没有办法用文档链接直接给它训练？ 谢谢！","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629956,"discussion_content":"感谢你的肯定和支持！\n关于记录状态，不知道你的测试程序是怎样的，你可以通过我给出的代码来验证一下。\n关于如何利用产品文档，可以参考第11讲内容，并通过这个LangChain提供的Loader （https://python.langchain.com/docs/integrations/document_loaders/web_base）来加载web上的内容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1697882245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"新加坡","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386884,"user_name":"浩仔是程序员","can_delete":false,"product_type":"c3","uid":1104601,"ip_address":"广东","ucode":"A7E5CF9E1571A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/d9/f051962f.jpg","comment_is_top":false,"comment_ctime":1705804559,"is_pvip":false,"replies":[{"id":141065,"content":"当然需要控制每次传人的记忆上下文的大小，可以参考后面的内容实用LangChain提供的记忆实现，其中一种很有意思，在超出token数限制的记忆窗口后，前面的对话内容会被总结。","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1705931884,"ip_address":"北京","comment_id":386884,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"老师你好，这样子是不是需要消耗很多token","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636314,"discussion_content":"当然需要控制每次传人的记忆上下文的大小，可以参考后面的内容实用LangChain提供的记忆实现，其中一种很有意思，在超出token数限制的记忆窗口后，前面的对话内容会被总结。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705931884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385444,"user_name":"常和森","can_delete":false,"product_type":"c3","uid":1499650,"ip_address":"北京","ucode":"60A5D5CFC49C10","user_header":"https://static001.geekbang.org/account/avatar/00/16/e2/02/783c2c11.jpg","comment_is_top":false,"comment_ctime":1702628189,"is_pvip":false,"replies":[{"id":140462,"content":"https:&#47;&#47;gitee.com&#47;chao-superman&#47;llm-in-practice&#47;blob&#47;master&#47;4.%20保持会话状态｜让chatbot获得记忆（1）.ipynb\n\nhttps:&#47;&#47;gitee.com&#47;chao-superman&#47;llm-in-practice&#47;blob&#47;master&#47;4.%20保持会话状态｜让chatbot获得记忆（2）.ipynb","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1702645574,"ip_address":"北京","comment_id":385444,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100625601,"comment_content":"示例代码在哪里能找到？谢谢老师","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633848,"discussion_content":"https://gitee.com/chao-superman/llm-in-practice/blob/master/4.%20保持会话状态｜让chatbot获得记忆（1）.ipynb\n\nhttps://gitee.com/chao-superman/llm-in-practice/blob/master/4.%20保持会话状态｜让chatbot获得记忆（2）.ipynb","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702645574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385416,"user_name":"苏文进","can_delete":false,"product_type":"c3","uid":2045506,"ip_address":"上海","ucode":"E73826626AB14A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/36/42/70d01532.jpg","comment_is_top":false,"comment_ctime":1702610041,"is_pvip":false,"replies":[{"id":140461,"content":"在：\n\nhttps:&#47;&#47;gitee.com&#47;chao-superman&#47;llm-in-practice&#47;blob&#47;master&#47;4.%20保持会话状态｜让chatbot获得记忆（1）.ipynb\n\nhttps:&#47;&#47;gitee.com&#47;chao-superman&#47;llm-in-practice&#47;blob&#47;master&#47;4.%20保持会话状态｜让chatbot获得记忆（2）.ipynb","user_name":"作者回复","user_name_real":"编辑","uid":1008262,"ctime":1702645560,"ip_address":"北京","comment_id":385416,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"老师你好，这节课的代码不在github和gitlab的仓库中。","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":633847,"discussion_content":"在：\n\nhttps://gitee.com/chao-superman/llm-in-practice/blob/master/4.%20保持会话状态｜让chatbot获得记忆（1）.ipynb\n\nhttps://gitee.com/chao-superman/llm-in-practice/blob/master/4.%20保持会话状态｜让chatbot获得记忆（2）.ipynb","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702645561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389861,"user_name":"Geek_13a516","can_delete":false,"product_type":"c3","uid":3870078,"ip_address":"中国香港","ucode":"F8ACA47F684A78","user_header":"","comment_is_top":false,"comment_ctime":1713704530,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"Event not found in queue. If you are deploying this Gradio app with multiple replicas, please enable stickiness to ensure that all requests from the same user are routed to the same instance.\n\ngradio可以正常开启，但提交prompt后报了一个keyerror的错误，请问是什么原因呢？","like_count":0},{"had_liked":false,"id":386771,"user_name":"Geek_3bc0jo","can_delete":false,"product_type":"c3","uid":1008378,"ip_address":"浙江","ucode":"0EE9DF2EBB279C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eodEJHBWZU7WCN6fNZvndhv9UwWaEqf0FoC1tCkn7S9URHNhlcgwZOziakiaxHibKQbgl0bBb6sWo6Og/132","comment_is_top":false,"comment_ctime":1705507273,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100625601,"comment_content":"老师您好，我在pycharm里运行提示词模版第一段代码，输出是空的。按照教程应该输出“Spectrum Socks”。老师帮忙看下","like_count":0,"discussions":[{"author":{"id":1008378,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eodEJHBWZU7WCN6fNZvndhv9UwWaEqf0FoC1tCkn7S9URHNhlcgwZOziakiaxHibKQbgl0bBb6sWo6Og/132","nickname":"Geek_3bc0jo","note":"","ucode":"0EE9DF2EBB279C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636099,"discussion_content":"找到问题了，因为代码需要用新课程的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1705590272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}