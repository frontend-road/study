{"id":127873,"title":"34ä¸¨ç­”ç–‘ç¯‡ï¼šå…³äºç´¢å¼•ä»¥åŠç¼“å†²æ± çš„ä¸€äº›è§£æƒ‘","content":"<p>è¿™ç¯‡æ–‡ç« æ˜¯è¿›é˜¶ç¯‡çš„æœ€åä¸€ç¯‡ï¼Œåœ¨è¿™ä¸€æ¨¡å—ä¸­ï¼Œæˆ‘ä¸»è¦é’ˆå¯¹SQLè¿è¡Œçš„åº•å±‚åŸç†è¿›è¡Œäº†è®²è§£ï¼Œå…¶ä¸­è¿˜æœ‰å¾ˆå¤šé—®é¢˜æ²¡æœ‰å›ç­”ï¼Œæˆ‘æ€»ç»“äº†è¿›é˜¶ç¯‡ä¸­å¸¸è§çš„ä¸€äº›é—®é¢˜ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚ä¸‹é¢çš„å†…å®¹ä¸»è¦åŒ…æ‹¬äº†ç´¢å¼•åŸåˆ™ã€è‡ªé€‚åº”Hashã€ç¼“å†²æ± æœºåˆ¶å’Œå­˜å‚¨å¼•æ“ç­‰ã€‚</p><h2>å…³äºç´¢å¼•ï¼ˆB+æ ‘ç´¢å¼•å’ŒHashç´¢å¼•ï¼Œä»¥åŠç´¢å¼•åŸåˆ™ï¼‰</h2><h3>ä»€ä¹ˆæ˜¯è‡ªé€‚åº” Hash ç´¢å¼•ï¼Ÿ</h3><p>åœ¨å›ç­”è¿™ä¸ªé—®é¢˜å‰ï¼Œè®©æˆ‘ä»¬å…ˆå›é¡¾ä¸‹B+æ ‘ç´¢å¼•å’ŒHashç´¢å¼•ï¼š</p><p>å› ä¸ºB+æ ‘å¯ä»¥ä½¿ç”¨åˆ°èŒƒå›´æŸ¥æ‰¾ï¼ŒåŒæ—¶æ˜¯æŒ‰ç…§é¡ºåºçš„æ–¹å¼å¯¹æ•°æ®è¿›è¡Œå­˜å‚¨ï¼Œå› æ­¤å¾ˆå®¹æ˜“å¯¹æ•°æ®è¿›è¡Œæ’åºæ“ä½œï¼Œåœ¨è”åˆç´¢å¼•ä¸­ä¹Ÿå¯ä»¥åˆ©ç”¨éƒ¨åˆ†ç´¢å¼•é”®è¿›è¡ŒæŸ¥è¯¢ã€‚è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ²¡æ³•ä½¿ç”¨Hashç´¢å¼•ï¼Œå› ä¸ºHashç´¢å¼•ä»…èƒ½æ»¡è¶³ï¼ˆ=ï¼‰ï¼ˆ&lt;&gt;ï¼‰å’ŒINæŸ¥è¯¢ï¼Œä¸èƒ½ä½¿ç”¨èŒƒå›´æŸ¥è¯¢ã€‚æ­¤å¤–ï¼ŒHashç´¢å¼•è¿˜æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œæ•°æ®çš„å­˜å‚¨æ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œåœ¨ORDER BYçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨Hashç´¢å¼•è¿˜éœ€è¦å¯¹æ•°æ®é‡æ–°æ’åºã€‚è€Œå¯¹äºè”åˆç´¢å¼•çš„æƒ…å†µï¼ŒHashå€¼æ˜¯å°†è”åˆç´¢å¼•é”®åˆå¹¶åä¸€èµ·æ¥è®¡ç®—çš„ï¼Œæ— æ³•å¯¹å•ç‹¬çš„ä¸€ä¸ªé”®æˆ–è€…å‡ ä¸ªç´¢å¼•é”®è¿›è¡ŒæŸ¥è¯¢ã€‚</p><p>MySQLé»˜è®¤ä½¿ç”¨B+æ ‘ä½œä¸ºç´¢å¼•ï¼Œå› ä¸ºB+æ ‘æœ‰ç€Hashç´¢å¼•æ²¡æœ‰çš„ä¼˜ç‚¹ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦è‡ªé€‚åº”Hashç´¢å¼•å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºHashç´¢å¼•åœ¨è¿›è¡Œæ•°æ®æ£€ç´¢çš„æ—¶å€™æ•ˆç‡éå¸¸é«˜ï¼Œé€šå¸¸åªéœ€è¦O(1)çš„å¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡å°±å¯ä»¥å®Œæˆæ•°æ®çš„æ£€ç´¢ã€‚è™½ç„¶Hashç´¢å¼•çš„ä½¿ç”¨åœºæ™¯æœ‰å¾ˆå¤šé™åˆ¶ï¼Œä½†æ˜¯ä¼˜ç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ‰€ä»¥MySQLæä¾›äº†ä¸€ä¸ªè‡ªé€‚åº”Hashç´¢å¼•çš„åŠŸèƒ½ï¼ˆAdaptive Hash Indexï¼‰ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„è‡ªé€‚åº”æŒ‡çš„æ˜¯ä¸éœ€è¦äººå·¥æ¥åˆ¶å®šï¼Œç³»ç»Ÿä¼šæ ¹æ®æƒ…å†µè‡ªåŠ¨å®Œæˆã€‚</p><!-- [[[read_end]]] --><p>ä»€ä¹ˆæƒ…å†µä¸‹æ‰ä¼šä½¿ç”¨è‡ªé€‚åº”Hashç´¢å¼•å‘¢ï¼Ÿå¦‚æœæŸä¸ªæ•°æ®ç»å¸¸è¢«è®¿é—®ï¼Œå½“æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æ—¶å€™ï¼Œå°±ä¼šå°†è¿™ä¸ªæ•°æ®é¡µçš„åœ°å€å­˜æ”¾åˆ°Hashè¡¨ä¸­ã€‚è¿™æ ·ä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥æ‰¾åˆ°è¿™ä¸ªé¡µé¢çš„æ‰€åœ¨ä½ç½®ã€‚</p><p>éœ€è¦è¯´æ˜çš„æ˜¯è‡ªé€‚åº”Hashç´¢å¼•åªä¿å­˜çƒ­æ•°æ®ï¼ˆç»å¸¸è¢«ä½¿ç”¨åˆ°çš„æ•°æ®ï¼‰ï¼Œå¹¶éå…¨è¡¨æ•°æ®ã€‚å› æ­¤æ•°æ®é‡å¹¶ä¸ä¼šå¾ˆå¤§ï¼Œå› æ­¤è‡ªé€‚åº”Hashä¹Ÿæ˜¯å­˜æ”¾åˆ°ç¼“å†²æ± ä¸­ï¼Œè¿™æ ·ä¹Ÿè¿›ä¸€æ­¥æå‡äº†æŸ¥æ‰¾æ•ˆç‡ã€‚</p><p>InnoDBä¸­çš„è‡ªé€‚åº”Hashç›¸å½“äºâ€œç´¢å¼•çš„ç´¢å¼•â€ï¼Œé‡‡ç”¨Hashç´¢å¼•å­˜å‚¨çš„æ˜¯B+æ ‘ç´¢å¼•ä¸­çš„é¡µé¢çš„åœ°å€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/69/e0/692193e1df655561619cb464201ba3e0.jpg?wh=757*574\" alt=\"\"><br>\nä½ èƒ½çœ‹åˆ°ï¼Œé‡‡ç”¨è‡ªé€‚åº”Hashç´¢å¼•ç›®çš„æ˜¯æ–¹ä¾¿æ ¹æ®SQLçš„æŸ¥è¯¢æ¡ä»¶åŠ é€Ÿå®šä½åˆ°å¶å­èŠ‚ç‚¹ï¼Œç‰¹åˆ«æ˜¯å½“B+æ ‘æ¯”è¾ƒæ·±çš„æ—¶å€™ï¼Œé€šè¿‡è‡ªé€‚åº”Hashç´¢å¼•å¯ä»¥æ˜æ˜¾æé«˜æ•°æ®çš„æ£€ç´¢æ•ˆç‡ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹è‡ªé€‚åº”Hashç´¢å¼•çš„åŸç†ã€‚</p><p>è‡ªé€‚åº”Hashé‡‡ç”¨Hashå‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªHashè¡¨ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒæŸ¥æ‰¾å­—å…¸ç±»å‹çš„æ•°æ®éå¸¸æ–¹ä¾¿ã€‚</p><p>Hashè¡¨æ˜¯æ•°ç»„+é“¾è¡¨çš„å½¢å¼ã€‚é€šè¿‡Hashå‡½æ•°å¯ä»¥è®¡ç®—ç´¢å¼•é”®å€¼æ‰€å¯¹åº”çš„bucketï¼ˆæ¡¶ï¼‰çš„ä½ç½®ï¼Œå¦‚æœäº§ç”ŸHashå†²çªï¼Œå°±éœ€è¦éå†é“¾è¡¨æ¥è§£å†³ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a6/ae/a6d510f8ca80feef8cb21b5fe55ef0ae.jpg?wh=1030*575\" alt=\"\"><br>\næˆ‘ä»¬å¯ä»¥é€šè¿‡<code>innodb_adaptive_hash_index</code>å˜é‡æ¥æŸ¥çœ‹æ˜¯å¦å¼€å¯äº†è‡ªé€‚åº”Hashï¼Œæ¯”å¦‚ï¼š</p><pre><code>mysql&gt; show variables like '%adaptive_hash_index';\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/70/99/70e9907a16ec51f03cb99295fafd0899.png?wh=1286*392\" alt=\"\"><br>\næˆ‘æ¥æ€»ç»“ä¸€ä¸‹ï¼ŒInnoDBæœ¬èº«ä¸æ”¯æŒHashç´¢å¼•ï¼Œä½†æ˜¯æä¾›è‡ªé€‚åº”Hashç´¢å¼•ï¼Œä¸éœ€è¦ç”¨æˆ·æ¥æ“ä½œï¼Œå­˜å‚¨å¼•æ“ä¼šè‡ªåŠ¨å®Œæˆã€‚è‡ªé€‚åº”Hashæ˜¯InnoDBä¸‰å¤§å…³é”®ç‰¹æ€§ä¹‹ä¸€ï¼Œå¦å¤–ä¸¤ä¸ªåˆ†åˆ«æ˜¯æ’å…¥ç¼“å†²å’ŒäºŒæ¬¡å†™ã€‚</p><h3>ä»€ä¹ˆæ˜¯è”åˆç´¢å¼•çš„æœ€å·¦åŸåˆ™ï¼Ÿ</h3><p>å…³äºè”åˆç´¢å¼•çš„æœ€å·¦åŸåˆ™ï¼Œè¯»è€…@è€æ¯• ç»™å‡ºäº†ä¸€ä¸ªéå¸¸å½¢è±¡çš„è§£é‡Šï¼š</p><p>å‡è®¾æˆ‘ä»¬æœ‰xã€yã€zä¸‰ä¸ªå­—æ®µï¼Œåˆ›å»ºè”åˆç´¢å¼•ï¼ˆx, y, zï¼‰ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠxã€yã€zåˆ†åˆ«ç±»æ¯”æˆâ€œç™¾åˆ†ä½â€ã€â€œååˆ†ä½â€å’Œâ€œä¸ªä½â€ã€‚</p><p>æŸ¥è¯¢â€œx=9 AND y=8 AND z=7â€çš„è¿‡ç¨‹ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªç”±å°åˆ°å¤§æ’åˆ—çš„æ•°å€¼åºåˆ—ä¸­å¯»æ‰¾â€œ987â€ï¼Œå¯ä»¥å¾ˆå¿«æ‰¾åˆ°ã€‚</p><p>æŸ¥è¯¢â€œy=8 AND z=7â€ï¼Œå°±ç”¨ä¸ä¸Šç´¢å¼•äº†ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨187ã€287ã€387ã€487â€¦â€¦â€¦è¿™æ ·å°±å¿…é¡»æ‰«ææ‰€æœ‰æ•°å€¼ã€‚</p><p>æˆ‘åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†è¡¥å……è¯´æ˜ä¸€ä¸‹ã€‚</p><p>æŸ¥è¯¢â€œz=7 AND y=8 AND x=9â€çš„æ—¶å€™ï¼Œå¦‚æœä¸‰ä¸ªå­—æ®µxã€yã€zåœ¨æ¡ä»¶æŸ¥è¯¢çš„æ—¶å€™æ˜¯ä¹±åºçš„ï¼Œä½†é‡‡ç”¨çš„æ˜¯ç­‰å€¼æŸ¥è¯¢ï¼ˆ=ï¼‰æˆ–è€…æ˜¯INæŸ¥è¯¢ï¼Œé‚£ä¹ˆMySQLçš„ä¼˜åŒ–å™¨å¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒæ•´ä¸ºå¯ä»¥ä½¿ç”¨è”åˆç´¢å¼•çš„å½¢å¼ã€‚</p><p>å½“æˆ‘ä»¬æŸ¥è¯¢â€œx=9 AND y&gt;8 AND z=7â€çš„æ—¶å€™ï¼Œå¦‚æœå»ºç«‹äº†(x,y,z)é¡ºåºçš„ç´¢å¼•ï¼Œè¿™æ—¶å€™zæ˜¯ç”¨ä¸ä¸Šç´¢å¼•çš„ã€‚è¿™æ˜¯å› ä¸ºMySQLåœ¨åŒ¹é…è”åˆç´¢å¼•æœ€å·¦å‰ç¼€çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°äº†èŒƒå›´æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼ˆ&lt;ï¼‰ï¼ˆ&gt;ï¼‰å’Œbetweenç­‰ï¼Œå°±ä¼šåœæ­¢åŒ¹é…ã€‚ç´¢å¼•åˆ—æœ€å¤šä½œç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼Œå¯¹äºåé¢çš„Zæ¥è¯´ï¼Œå°±æ²¡æ³•ä½¿ç”¨åˆ°ç´¢å¼•äº†ã€‚</p><p>é€šè¿‡è¿™ä¸ªæˆ‘ä»¬ä¹Ÿå¯ä»¥çŸ¥é“ï¼Œè”åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™é’ˆå¯¹çš„æ˜¯åˆ›å»ºçš„è”åˆç´¢å¼•ä¸­çš„é¡ºåºï¼Œå¦‚æœåˆ›å»ºäº†è”åˆç´¢å¼•ï¼ˆx,y,zï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•çš„ä½¿ç”¨é¡ºåºå°±å¾ˆé‡è¦äº†ã€‚å¦‚æœåœ¨æ¡ä»¶è¯­å¥ä¸­åªæœ‰yå’Œzï¼Œé‚£ä¹ˆå°±ç”¨ä¸ä¸Šè”åˆç´¢å¼•ã€‚</p><p>æ­¤å¤–ï¼ŒSQLæ¡ä»¶è¯­å¥ä¸­çš„å­—æ®µé¡ºåºå¹¶ä¸é‡è¦ï¼Œå› ä¸ºåœ¨é€»è¾‘æŸ¥è¯¢ä¼˜åŒ–é˜¶æ®µä¼šè‡ªåŠ¨è¿›è¡ŒæŸ¥è¯¢é‡å†™ã€‚</p><p>æœ€åä½ éœ€è¦è®°ä½ï¼Œå¦‚æœæˆ‘ä»¬é‡åˆ°äº†èŒƒå›´æ¡ä»¶æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼ˆ&lt;ï¼‰ï¼ˆ&lt;=ï¼‰ï¼ˆ&gt;ï¼‰ï¼ˆ&gt;=ï¼‰å’Œbetweenç­‰ï¼Œé‚£ä¹ˆèŒƒå›´åˆ—åçš„åˆ—å°±æ— æ³•ä½¿ç”¨åˆ°ç´¢å¼•äº†ã€‚</p><h3>Hashç´¢å¼•ä¸B+æ ‘ç´¢å¼•æ˜¯åœ¨å»ºç´¢å¼•çš„æ—¶å€™æ‰‹åŠ¨æŒ‡å®šçš„å—ï¼Ÿ</h3><p>å¦‚æœä½¿ç”¨çš„æ˜¯MySQLçš„è¯ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£MySQLçš„å­˜å‚¨å¼•æ“éƒ½æ”¯æŒå“ªäº›ç´¢å¼•ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå‚è€ƒæ¥æº <a href=\"https://dev.mysql.com/doc/refman/8.0/en/create-index.html\">https://dev.mysql.com/doc/refman/8.0/en/create-index.html</a>ï¼‰ã€‚å¦‚æœæ˜¯å…¶ä»–çš„DBMSï¼Œå¯ä»¥å‚è€ƒç›¸å…³çš„DBMSæ–‡æ¡£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f7/38/f7706327f9ebc7488653d69b4cd5f438.png?wh=1729*518\" alt=\"\"><br>\nä½ èƒ½çœ‹åˆ°ï¼Œé’ˆå¯¹InnoDBå’ŒMyISAMå­˜å‚¨å¼•æ“ï¼Œéƒ½ä¼šé»˜è®¤é‡‡ç”¨B+æ ‘ç´¢å¼•ï¼Œæ— æ³•ä½¿ç”¨Hashç´¢å¼•ã€‚InnoDBæä¾›çš„è‡ªé€‚åº”Hashæ˜¯ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šçš„ã€‚å¦‚æœæ˜¯Memory/Heapå’ŒNDBå­˜å‚¨å¼•æ“ï¼Œæ˜¯å¯ä»¥è¿›è¡Œé€‰æ‹©Hashç´¢å¼•çš„ã€‚</p><h2>å…³äºç¼“å†²æ± </h2><h3>ç¼“å†²æ± å’ŒæŸ¥è¯¢ç¼“å­˜æ˜¯ä¸€ä¸ªä¸œè¥¿å—ï¼Ÿ</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œç¼“å†²æ± éƒ½åŒ…æ‹¬äº†å“ªäº›ã€‚</p><p>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­æœ‰ä¸€éƒ¨åˆ†æ•°æ®ä¼šæ”¾åˆ°å†…å­˜ä¸­ï¼Œç¼“å†²æ± åˆ™å äº†è¿™éƒ¨åˆ†å†…å­˜çš„å¤§éƒ¨åˆ†ï¼Œå®ƒç”¨æ¥å­˜å‚¨å„ç§æ•°æ®çš„ç¼“å­˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/0e/dc/0eb57c0d0ea7611b16ac6efa76771bdc.jpg?wh=742*334\" alt=\"\"><br>\nä»å›¾ä¸­ï¼Œä½ èƒ½çœ‹åˆ°InnoDBç¼“å†²æ± åŒ…æ‹¬äº†æ•°æ®é¡µã€ç´¢å¼•é¡µã€æ’å…¥ç¼“å†²ã€é”ä¿¡æ¯ã€è‡ªé€‚åº”Hashå’Œæ•°æ®å­—å…¸ä¿¡æ¯ç­‰ã€‚</p><p>æˆ‘ä»¬ä¹‹å‰è®²è¿‡ä½¿ç”¨ç¼“å†²æ± æŠ€æœ¯çš„åŸå› ã€‚è¿™é‡Œé‡æ–°å›é¡¾ä¸€ä¸‹ã€‚InnoDBå­˜å‚¨å¼•æ“åŸºäºç£ç›˜æ–‡ä»¶å­˜å‚¨ï¼Œè®¿é—®ç‰©ç†ç¡¬ç›˜å’Œåœ¨å†…å­˜ä¸­è¿›è¡Œè®¿é—®ï¼Œé€Ÿåº¦ç›¸å·®å¾ˆå¤§ï¼Œä¸ºäº†å°½å¯èƒ½å¼¥è¡¥è¿™ä¸¤è€…ä¹‹é—´I/Oæ•ˆç‡çš„å·®å€¼ï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠç»å¸¸ä½¿ç”¨çš„æ•°æ®åŠ è½½åˆ°ç¼“å†²æ± ä¸­ï¼Œé¿å…æ¯æ¬¡è®¿é—®éƒ½è¿›è¡Œç£ç›˜I/Oã€‚</p><p>â€œé¢‘æ¬¡*ä½ç½®â€è¿™ä¸ªåŸåˆ™ï¼Œå¯ä»¥å¸®æˆ‘ä»¬å¯¹I/Oè®¿é—®æ•ˆç‡è¿›è¡Œä¼˜åŒ–ã€‚</p><p>é¦–å…ˆï¼Œä½ç½®å†³å®šæ•ˆç‡ï¼Œæä¾›ç¼“å†²æ± å°±æ˜¯ä¸ºäº†åœ¨å†…å­˜ä¸­å¯ä»¥ç›´æ¥è®¿é—®æ•°æ®ã€‚</p><p>å…¶æ¬¡ï¼Œé¢‘æ¬¡å†³å®šä¼˜å…ˆçº§é¡ºåºã€‚å› ä¸ºç¼“å†²æ± çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œæ¯”å¦‚ç£ç›˜æœ‰200Gï¼Œä½†æ˜¯å†…å­˜åªæœ‰16Gï¼Œç¼“å†²æ± å¤§å°åªæœ‰1Gï¼Œå°±æ— æ³•å°†æ‰€æœ‰æ•°æ®éƒ½åŠ è½½åˆ°ç¼“å†²æ± é‡Œï¼Œè¿™æ—¶å°±æ¶‰åŠåˆ°ä¼˜å…ˆçº§é¡ºåºï¼Œä¼šä¼˜å…ˆå¯¹ä½¿ç”¨é¢‘æ¬¡é«˜çš„çƒ­æ•°æ®è¿›è¡ŒåŠ è½½ã€‚</p><p>äº†è§£äº†ç¼“å†²æ± çš„ä½œç”¨ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£ç¼“å†²æ± çš„å¦ä¸€ä¸ªç‰¹æ€§ï¼šé¢„è¯»ã€‚</p><p>ç¼“å†²æ± çš„ä½œç”¨å°±æ˜¯æå‡I/Oæ•ˆç‡ï¼Œè€Œæˆ‘ä»¬è¿›è¡Œè¯»å–æ•°æ®çš„æ—¶å€™å­˜åœ¨ä¸€ä¸ªâ€œå±€éƒ¨æ€§åŸç†â€ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä½¿ç”¨äº†ä¸€äº›æ•°æ®ï¼Œå¤§æ¦‚ç‡è¿˜ä¼šä½¿ç”¨å®ƒå‘¨å›´çš„ä¸€äº›æ•°æ®ï¼Œå› æ­¤é‡‡ç”¨â€œé¢„è¯»â€çš„æœºåˆ¶æå‰åŠ è½½ï¼Œå¯ä»¥å‡å°‘æœªæ¥å¯èƒ½çš„ç£ç›˜I/Oæ“ä½œã€‚</p><p>é‚£ä¹ˆä»€ä¹ˆæ˜¯æŸ¥è¯¢ç¼“å­˜å‘¢ï¼Ÿ</p><p>æŸ¥è¯¢ç¼“å­˜æ˜¯æå‰æŠŠæŸ¥è¯¢ç»“æœç¼“å­˜èµ·æ¥ï¼Œè¿™æ ·ä¸‹æ¬¡ä¸éœ€è¦æ‰§è¡Œå°±å¯ä»¥ç›´æ¥æ‹¿åˆ°ç»“æœã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨MySQLä¸­çš„æŸ¥è¯¢ç¼“å­˜ï¼Œä¸æ˜¯ç¼“å­˜æŸ¥è¯¢è®¡åˆ’ï¼Œè€Œæ˜¯æŸ¥è¯¢å¯¹åº”çš„ç»“æœã€‚è¿™å°±æ„å‘³ç€æŸ¥è¯¢åŒ¹é…çš„é²æ£’æ€§å¤§å¤§é™ä½ï¼Œåªæœ‰ç›¸åŒçš„æŸ¥è¯¢æ“ä½œæ‰ä¼šå‘½ä¸­æŸ¥è¯¢ç¼“å­˜ã€‚å› æ­¤MySQLçš„æŸ¥è¯¢ç¼“å­˜å‘½ä¸­ç‡ä¸é«˜ï¼Œåœ¨MySQL8.0ç‰ˆæœ¬ä¸­å·²ç»å¼ƒç”¨äº†æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½ã€‚</p><p>æŸ¥çœ‹æ˜¯å¦ä½¿ç”¨äº†æŸ¥è¯¢ç¼“å­˜ï¼Œä½¿ç”¨å‘½ä»¤ï¼š</p><pre><code>show variables like '%query_cache%';\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/cb/c7/cb590bd0aac9751401943487534360c7.png?wh=1091*378\" alt=\"\"><br>\nç¼“å†²æ± å¹¶ä¸ç­‰äºæŸ¥è¯¢ç¼“å­˜ï¼Œå®ƒä»¬çš„å…±åŒç‚¹éƒ½æ˜¯é€šè¿‡ç¼“å­˜çš„æœºåˆ¶æ¥æå‡æ•ˆç‡ã€‚ä½†ç¼“å†²æ± æœåŠ¡äºæ•°æ®åº“æ•´ä½“çš„I/Oæ“ä½œï¼Œè€ŒæŸ¥è¯¢ç¼“å­˜æœåŠ¡äºSQLæŸ¥è¯¢å’ŒæŸ¥è¯¢ç»“æœé›†çš„ï¼Œå› ä¸ºå‘½ä¸­æ¡ä»¶è‹›åˆ»ï¼Œè€Œä¸”åªè¦æ•°æ®è¡¨å‘ç”Ÿå˜åŒ–ï¼ŒæŸ¥è¯¢ç¼“å­˜å°±ä¼šå¤±æ•ˆï¼Œå› æ­¤å‘½ä¸­ç‡ä½ã€‚</p><h2>å…¶ä»–</h2><p>å¾ˆå¤šäººå¯¹InnoDBå’ŒMyISAMçš„å–èˆå­˜åœ¨ç–‘é—®ï¼Œåˆ°åº•é€‰æ‹©å“ªä¸ªæ¯”è¾ƒå¥½å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬éœ€è¦å…ˆäº†è§£InnoDBå’ŒMyISAMå„è‡ªçš„ç‰¹ç‚¹ã€‚InnoDBæ”¯æŒäº‹åŠ¡å’Œè¡Œçº§é”ï¼Œæ˜¯MySQLé»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼›MyISAMåªæ”¯æŒè¡¨çº§é”ï¼Œä¸æ”¯æŒäº‹åŠ¡ï¼Œæ›´é€‚åˆè¯»å–æ•°æ®åº“çš„æƒ…å†µã€‚</p><p>å¦‚æœæ˜¯å°å‹çš„åº”ç”¨ï¼Œéœ€è¦å¤§é‡çš„SELECTæŸ¥è¯¢ï¼Œå¯ä»¥è€ƒè™‘MyISAMï¼›å¦‚æœæ˜¯äº‹åŠ¡å¤„ç†åº”ç”¨ï¼Œéœ€è¦é€‰æ‹©InnoDBã€‚</p><p>è¿™ä¸¤ç§å¼•æ“å„æœ‰ç‰¹ç‚¹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨MySQLä¸­ï¼Œé’ˆå¯¹ä¸åŒçš„æ•°æ®è¡¨ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„å­˜å‚¨å¼•æ“ã€‚</p><p>æœ€åç»™å¤§å®¶æä¾›ä¸€ä¸‹ä¸“æ ä¸­å­¦ä¹ èµ„æ–™çš„ä¸‹è½½ã€‚</p><p>å¦‚æœä½ æƒ³å¯¼å…¥æ–‡ç« ä¸­çš„â€œproduct_commentâ€è¡¨ç»“æ„å’Œæ•°æ®ï¼Œç‚¹å‡»<a href=\"https://github.com/cystanford/product_comment\">è¿™é‡Œ</a>å³å¯ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨<a href=\"https://pan.baidu.com/s/1LBEAm50DDP9AjErLtGplLg\">ç½‘ç›˜</a>é‡Œä¸‹è½½ï¼Œæå–ç ä¸º32epã€‚</p><p>å…³äºæ–‡ç« ä¸­æ¶‰åŠåˆ°çš„æ€ç»´å¯¼å›¾ï¼Œç‚¹å‡»<a href=\"https://github.com/cystanford/SQL-XMind\">è¿™é‡Œ</a>ä¸‹è½½å³å¯ã€‚</p><p>æœ€åç•™ä¸€é“æ€è€ƒé¢˜ï¼Œä¾›ä½ æ¶ˆåŒ–ä»Šå¤©ç­”ç–‘ç¯‡é‡Œçš„å†…å®¹ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰xã€yã€zä¸‰ä¸ªå­—æ®µï¼Œåˆ›å»ºè”åˆç´¢å¼•ï¼ˆx, y, zï¼‰ã€‚æ•°æ®è¡¨ä¸­çš„æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆå¯¹ä¸‹é¢è¯­å¥è¿›è¡ŒSQLæŸ¥è¯¢çš„æ—¶å€™ï¼Œå“ªä¸ªä¼šä½¿ç”¨è”åˆç´¢å¼•ï¼Ÿå¦‚æœä½¿ç”¨äº†è”åˆç´¢å¼•ï¼Œåˆ†åˆ«ä½¿ç”¨åˆ°äº†è”åˆç´¢å¼•çš„å“ªäº›éƒ¨åˆ†ï¼Ÿ</p><p>A</p><pre><code>SELECT x, y, z FROM table WHERE y=2 AND x&gt;1 AND z=3\n\n</code></pre><p>B</p><pre><code>SELECT x, y, z FROM table WHERE y=2 AND x=1 AND z&gt;3\n</code></pre><p>C</p><pre><code>SELECT x, y, z FROM table WHERE y=2 AND x=1 AND z=3\n</code></pre><p>D</p><pre><code>SELECT x, y, z FROM table WHERE y&gt;2 AND x=1 AND z=3\n\n</code></pre><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¼šå’Œä½ ä¸€èµ·äº¤æµï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":129170,"user_name":"DZ","can_delete":false,"product_type":"c1","uid":1132240,"ip_address":"","ucode":"452555FA0F9E0F","user_header":"https://static001.geekbang.org/account/avatar/00/11/46/d0/6bafd7d4.jpg","comment_is_top":false,"comment_ctime":1567056358,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"173365748198","product_id":100029501,"comment_content":"ABCDå››æ¡è¯­å¥éƒ½ä¼šä½¿ç”¨ç´¢å¼•ã€‚<br><br>A: WHERE y=2 AND x&gt;1 AND z=3  -- ä½¿ç”¨ç´¢å¼•(x,y,z)çš„xåˆ—ã€‚<br><br>xæ˜¯èŒƒå›´åˆ—ï¼Œç´¢å¼•åˆ—æœ€å¤šä½œç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼ŒèŒƒå›´åˆ—ä¹‹åçš„yåˆ—å’Œzåˆ—æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚<br><br>B: WHERE y=2 AND x=1 AND z&gt;3  -- å®Œæ•´ä½¿ç”¨ç´¢å¼•(x,y,z)ã€‚<br><br>C: WHERE y=2 AND x=1 AND z=3  -- å®Œæ•´ä½¿ç”¨ç´¢å¼•(x,y,z)ã€‚<br><br>zæ˜¯èŒƒå›´åˆ—ï¼Œç´¢å¼•å¯ä»¥è¢«ä½¿ç”¨ã€‚<br><br>D: WHERE y&gt;2 AND x=1 AND z=3 -- ä½¿ç”¨ç´¢å¼•(x,y,z)çš„xåˆ—å’Œyåˆ—ã€‚<br><br>yæ˜¯èŒƒå›´åˆ—ï¼Œç´¢å¼•åˆ—æœ€å¤šä½œç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼ŒèŒƒå›´åˆ—ä¹‹åçš„zåˆ—æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚<br><br><br>æ„Ÿè°¢è€å¸ˆæŒ‡æ­£ï¼Œçº æ­£äº†æˆ‘ä¹‹å‰çš„é”™è¯¯ç†è§£ã€‚","like_count":41,"discussions":[{"author":{"id":2962599,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","nickname":"å¹´å°‘æŒ½æ»‘ç¨½ä¸–æ— åŒ","note":"","ucode":"793DCBDE25A07B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588413,"discussion_content":"æ¸…æ™°ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663748172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1621959,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJBG6cXQGiayJlFxTeN3IPOichoX5NjdhqTt8rmyiaJDfd5VytLSrjwrufDAOdpoxFuROOLiawFh0mnBg/132","nickname":"studyï½","note":"","ucode":"6EFD4E284CD22F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14082,"discussion_content":"è¯·æ•™ä¸€ä¸‹ Dä¸­ ä¸ºä»€ä¹ˆä¼šæ˜¯ x yï¼Ÿç¬¬ä¸€ä¸ªy>2ä¸å°±æ˜¯èŒƒå›´ç´¢å¼•ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568726126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1132240,"avatar":"https://static001.geekbang.org/account/avatar/00/11/46/d0/6bafd7d4.jpg","nickname":"DZ","note":"","ucode":"452555FA0F9E0F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1621959,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJBG6cXQGiayJlFxTeN3IPOichoX5NjdhqTt8rmyiaJDfd5VytLSrjwrufDAOdpoxFuROOLiawFh0mnBg/132","nickname":"studyï½","note":"","ucode":"6EFD4E284CD22F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14091,"discussion_content":"å› ä¸ºç´¢å¼•å¦‚ä½•è¢«åˆ›å»ºå½±å“ç´¢å¼•å¦‚ä½•è¢«ä½¿ç”¨ï¼Œé¢˜ä¸­ç´¢å¼•çš„åˆ›å»ºè§„åˆ™æ˜¯X-Y-Zï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥ä¹Ÿæ˜¯æŒ‰æ­¤é¡ºåºã€‚","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1568727046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":14082,"ip_address":""},"score":14091,"extra":""}]}]},{"had_liked":false,"id":129844,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1567301044,"is_pvip":true,"replies":[{"id":"62734","content":"åˆ†æçš„ä¸é”™","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577087406,"ip_address":"","comment_id":129844,"utype":1}],"discussion_count":6,"race_medal":1,"score":"61696843188","product_id":100029501,"comment_content":"åˆ©ç”¨è€å¸ˆçš„ hexo è¡¨åšäº†ä¸€ä¸ªå®ç°ï¼š<br>æŒ‰ç…§è¿™ä¸ªé¡ºåº åœ¨ `hp_max`, `hp_growth`, `mp_max`  è¿™3ä¸ªå­—æ®µä¸Šå»ºç«‹è”åˆç´¢å¼•<br>ä¸Šé¢çš„ A æƒ…å†µï¼š<br>explain select * from heros where hp_max &gt; 5000 and hp_growth = 181.6 and mp_max = 200;<br>æ˜¯å…¨éƒ¨æ‰«æï¼Œä¸èµ°ç´¢å¼• type ä¸º all<br>ä¸Šé¢çš„ B æƒ…å†µï¼š<br>explain select * from heros where hp_max = 5000 and hp_growth = 181.6 and mp_max &gt; 200;<br>èµ°è”åˆç´¢å¼•ï¼Œ type ä¸º range<br>ä¸Šé¢çš„ C æƒ…å†µï¼š<br>explain select * from heros where hp_max = 5000 and hp_growth = 181.6 and mp_max = 200;<br>èµ°è”åˆç´¢å¼•ï¼Œ type ä¸º ref<br>ä¸Šé¢çš„ D æƒ…å†µï¼š<br>explain select * from heros where hp_max = 5000 and hp_growth &gt; 181.6 and mp_max = 200;<br>èµ°è”åˆç´¢å¼•ï¼Œ type ä¸º range","like_count":15,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465675,"discussion_content":"åˆ†æçš„ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577087406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1446375,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","nickname":"bookå°¾æ±","note":"","ucode":"AE2B8DFC643ACC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":201192,"discussion_content":"mysql> explain select * from heros where hp_max > 5000 and hp_growth = 288.8 and mp_max = 1746;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | heros | NULL       | ALL  | xyz           | NULL | NULL    | NULL |   69 |     1.45 | Using where |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+\nmysql> explain select * from heros ;\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+\n| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+\n|  1 | SIMPLE      | heros | NULL       | ALL  | NULL          | NULL | NULL    | NULL |   69 |   100.00 | NULL  |\n+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+\n1 row in set, 1 warning (0.00 sec)\nè¡¨é‡Œä¸€å…±å°±69è¡Œæ•°æ®ï¼Œx>5000è¿™ä¸ªè¿‡æ»¤æ¡ä»¶è¿‡æ»¤åº¦ä¸º100%ï¼Œæ‰€ä»¥æ‰æ˜¯type allçš„ï¼Œæ¢æˆå¤§äº7000å°±æ˜¯rangeäº†","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1583764976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1446375,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","nickname":"bookå°¾æ±","note":"","ucode":"AE2B8DFC643ACC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":201188,"discussion_content":"Aä½ çš„æ¡ä»¶>5000æœ‰é—®é¢˜å§ï¼Œæ•°æ®è¡¨é‡Œå°±æ²¡æœ‰å°äº5000çš„è¿™ä¸ªå­—æ®µï¼Œæ‰€ä»¥typeæ‰æ˜¯allï¼Œä½†explain ç»“æœçš„keyé‡Œæ˜¯æœ‰è”åˆç´¢å¼•çš„\n+----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+-----------------------+\n| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows | filtered | Extra                 |\n+----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+-----------------------+\n|  1 | SIMPLE      | heros | NULL       | range | xyz           | xyz  | 5       | NULL |   22 |     1.45 | Using index condition |\n+----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+-----------------------+\n1 row in set, 1 warning (0.00 sec)","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583764729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":96841,"discussion_content":"* éœ€è¦å›è¡¨çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577096039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1446375,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","nickname":"bookå°¾æ±","note":"","ucode":"AE2B8DFC643ACC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":201189,"discussion_content":"mysql> explain select * from heros where hp_max > 7000 and hp_growth = 288.8 and mp_max = 1746;\n+----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+-----------------------+\n| id | select_type | table | partitions | type  | possible_keys | key  | key_len | ref  | rows | filtered | Extra                 |\n+----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+-----------------------+\n|  1 | SIMPLE      | heros | NULL       | range | xyz           | xyz  | 5       | NULL |   22 |     1.45 | Using index condition |\n+----+-------------+-------+------------+-------+---------------+------+---------+------+------+----------+-----------------------+\n1 row in set, 1 warning (0.00 sec)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583764748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1532231,"avatar":"https://static001.geekbang.org/account/avatar/00/17/61/47/0a6e9729.jpg","nickname":"ç«¹å½±","note":"","ucode":"40386DFA60F899","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":96816,"discussion_content":"select * from heros where hp_max > 5000 and hp_growth = 181.6 and mp_max = 200ï¼›\nselect hp_max,hp_growth,mp_max from heros where hp_max > 5000 and hp_growth = 181.6 and mp_max = 200\nä¸ºä¸€ä¸ªtype=ALLï¼Œç¬¬äºŒä¸ªtype=indexï¼Ÿ* æŸ¥åŒ¹é…è¡Œçš„æ‰€æœ‰åˆ—ï¼Œtype=ALLæ˜¯å…¨è¡¨æ‰«æï¼Œè¿™ä¸¤äº’æœ‰å½±å“ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577095007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128724,"user_name":"Hanqiu_Tan","can_delete":false,"product_type":"c1","uid":1524000,"ip_address":"","ucode":"2F5BEF36FBC797","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1r98FrLibt2JkibgLGPuLxxyn2etGbDeo7pEByourpvvZL580RFmA4S1bwPgGOkIqtsmFfFCktgLEzC2UnH9DqMQ/132","comment_is_top":false,"comment_ctime":1566954729,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27336758505","product_id":100029501,"comment_content":"é¦–å…ˆåœ¨æ•°æ®é‡æ¯”è¾ƒå¤§çš„å‰æä¸‹ï¼ŒAä¸­xæ˜¯èŒƒå›´æŸ¥è¯¢æœ€å¯èƒ½åšçš„æ˜¯å…¨è¡¨æ‰«æåˆ©ç”¨å¤šå—è¯»æ–¹å¼ï¼Œè¿™æ ·æ•ˆæœå¾ˆå¥½ç‚¹ã€‚Bå’ŒCåº”è¯¥åˆ©ç”¨äº†è”åˆç´¢å¼•ï¼ˆx,y,zï¼‰ä¸­æ‰€æœ‰åˆ—ã€‚Dæ ¹æ®æœ€å·¦åŸåˆ™åº”è¯¥åˆ©ç”¨äº†è”åˆç´¢å¼•ä¸­çš„x,yåˆ—ï¼Œæ‰§è¡Œæ­¥éª¤åº”è¯¥æ˜¯ï¼Œé€šè¿‡x,yæ‰¾åˆ°rowid,å›è¡¨ï¼Œåœ¨é€šè¿‡åˆ¤æ–­zæ˜¯å¦ç­‰äº3ï¼Œå¾—åˆ°ç»“æœ","like_count":7,"discussions":[{"author":{"id":2815900,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/f7/9c/69c5c5dc.jpg","nickname":"è¶Šé”‹åˆ©","note":"","ucode":"63E9E3F3C7D53D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532758,"discussion_content":"æ²¡æ‡‚å•Šï¼ŒD çš„æƒ…å†µï¼Œè”åˆç´¢å¼•é‡Œå·²ç»æœ‰ z çš„å€¼äº†ï¼Œä¸ºå•¥è¿˜è¦å›è¡¨ï¼Œåœ¨ y ä¸Šè½¬å‡ åœˆä¸è¡Œå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637678562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190842,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1584698051,"is_pvip":true,"discussion_count":2,"race_medal":2,"score":"14469599939","product_id":100029501,"comment_content":"è€å¸ˆè¿™é‡Œè¯´çš„ï¼šæŸ¥è¯¢â€œz=7 AND y=8 AND x=9â€çš„æ—¶å€™ï¼Œå¦‚æœä¸‰ä¸ªå­—æ®µ xã€yã€z åœ¨æ¡ä»¶æŸ¥è¯¢çš„æ—¶å€™æ˜¯ä¹±åºçš„ï¼Œä½†é‡‡ç”¨çš„æ˜¯ç­‰å€¼æŸ¥è¯¢ï¼ˆ=ï¼‰æˆ–è€…æ˜¯ IN æŸ¥è¯¢ï¼Œé‚£ä¹ˆ MySQL çš„ä¼˜åŒ–å™¨å¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒæ•´ä¸ºå¯ä»¥ä½¿ç”¨è”åˆç´¢å¼•çš„å½¢å¼ã€‚<br><br>æˆ‘çš„ç†è§£æ˜¯æœ‰ç‚¹é—®é¢˜çš„ï¼Œçœ‹ä¸‹é¢åŒå­¦çš„å›ç­”ä¹Ÿç¡®å®è¯¯å¯¼äº†ä¸€äº›åŒå­¦ã€‚æœ‰çš„åŒå­¦å¯èƒ½è¿‡äºçœ‹é‡â€œä½†é‡‡ç”¨çš„æ˜¯ç­‰å€¼æŸ¥è¯¢ï¼ˆ=ï¼‰æˆ–è€…æ˜¯ IN æŸ¥è¯¢â€ è¿™å¥è¯äº†ã€‚<br><br>è¿™é‡Œè´´ä¸Šæµ‹è¯•æ–¹æ¡ˆï¼Œæœ‰å…´è¶£çš„å¯ä»¥è¯•è¯•ï¼š<br><br>å»ºè¡¨è¯­å¥ï¼š<br>CREATE TABLE `test` (<br>  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,<br>  `x` int(11) DEFAULT NULL,<br>  `y` int(11) DEFAULT NULL,<br>  `z` int(11) DEFAULT NULL,<br>  PRIMARY KEY (`id`),<br>  KEY `test` (`x`,`y`,`z`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;<br><br>å­˜å‚¨è¿‡ç¨‹ï¼š<br>DELIMITER &#47;&#47;<br>CREATE PROCEDURE testInsert(cnt int)<br>  BEGIN <br>    DECLARE i int DEFAULT 0;<br>    START TRANSACTION;<br>    WHILE i&lt;cnt<br>      DO <br>          INSERT INTO test(x,y,z) VALUES(i,i,i);<br>      set i=i+1;<br>      end WHILE;<br>    COMMIT;<br>    end &#47;&#47;<br>DELIMITER;<br><br>CALL testInsert(1000000);<br><br>åˆ†ææ–¹æ³•ï¼š<br>explain SELECT x, y, z FROM test WHERE y=2 AND x&gt;1 AND z=3;<br><br><br>explain SELECT x, y, z FROM test WHERE y=2 AND x=1 AND z&gt;3;<br><br><br>explain SELECT x, y, z FROM test WHERE y=2 AND x=1 AND z=3;<br><br><br>explain SELECT x, y, z FROM test WHERE y&gt;2 AND x=1 AND z=3;","like_count":4,"discussions":[{"author":{"id":2815900,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/f7/9c/69c5c5dc.jpg","nickname":"è¶Šé”‹åˆ©","note":"","ucode":"63E9E3F3C7D53D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532759,"discussion_content":"æœ‰è§£é¢˜æ–¹æ³•ï¼Œä½†æ˜¯æ²¡æœ‰ç­”æ¡ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637678640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269090,"discussion_content":"çœ‹äº†é‚£ä¹ˆå¤šè¯„è®º è¿˜æ˜¯ä½ çš„é è°±ç‚¹ ä½†æ˜¯å“¥ä»¬ä½ ä¸Šé¢çš„å­˜å‚¨è¿‡ç¨‹æœ‰ä¸ªè¯­æ³•å†™é”™äº†ã€‚ã€‚ã€‚\nåœ¨CALLè¿™è¡Œä¸Šé¢çš„ DELIMITER è¿™é‡Œè¦æ¢å¤æ­£å¸¸çš„MySQLåˆ†éš”ç¬¦è¯­æ³•è¿˜å°‘äº†ä¸€ä¸ªç©ºæ ¼ï¼Œåº”è¯¥æ˜¯è¿™æ ·ï¼š&#34;\nDELIMITER //\nCREATE PROCEDURE testInsert(cnt int)\n  BEGIN\n    DECLARE i int DEFAULT 0;\n    START TRANSACTION;\n    WHILE i<cnt\n      DO\n          INSERT INTO test(x,y,z) VALUES(i,i,i);\n      set i=i+1;\n      end WHILE;\n    COMMIT;\n    end //\nDELIMITER ;\n&#34;\næ‰æ˜¯å¯¹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589865876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183542,"user_name":"å››å–œ","can_delete":false,"product_type":"c1","uid":1071389,"ip_address":"","ucode":"C5EBED19C0F332","user_header":"https://static001.geekbang.org/account/avatar/00/10/59/1d/c89abcd8.jpg","comment_is_top":false,"comment_ctime":1583062561,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14467964449","product_id":100029501,"comment_content":"A-&gt; (x)<br>B-&gt; (x, y)<br>C-&gt; (x,y,z)<br>D-&gt; (x,y)","like_count":3},{"had_liked":false,"id":165322,"user_name":"çˆ¬è¡Œçš„èœ—ç‰›","can_delete":false,"product_type":"c1","uid":1033956,"ip_address":"","ucode":"6623B62DE63CE9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QD6bf8hkS5dHrabdW7M7Oo9An1Oo3QSxqoySJMDh7GTraxFRX77VZ2HZ13x3R4EVYddIGXicRRDAc7V9z5cLDlA/132","comment_is_top":false,"comment_ctime":1577200322,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14462102210","product_id":100029501,"comment_content":"A.  SELECT x, y, z FROM table WHERE y=2 AND x&gt;1 AND z=3 .  <br>ç”¨åˆ°è”åˆç´¢å¼•çš„x å­—æ®µï¼› å› ä¸ºx æ˜¯æœ€å·¦è¾¹çš„ï¼› <br><br>B. SELECT x, y, z FROM table WHERE y=2 AND x=1 AND z&gt;3 <br>åªæ˜¯ç”¨åˆ°è”åˆç´¢å¼•çš„x,y,z  å­—æ®µï¼› <br><br>C. SELECT x, y, z FROM table WHERE y=2 AND x=1 AND z=3<br>ç”¨åˆ°è”åˆç´¢å¼•ï¼Œ x,y,z å­—æ®µéƒ½ç”¨åˆ°ï¼› <br><br>D. SELECT x, y, z FROM table WHERE y&gt;2 AND x=1 AND z=3<br>ä½¿ç”¨åˆ° xï¼Œyå­—æ®µçš„ç´¢å¼•ï¼›  <br>","like_count":3},{"had_liked":false,"id":128713,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1566953902,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14451855790","product_id":100029501,"comment_content":"A -&gt; y<br>B -&gt; y,x<br>C -&gt; y,x,z<br>D -&gt; None","like_count":3,"discussions":[]},{"had_liked":false,"id":170264,"user_name":"rike","can_delete":false,"product_type":"c1","uid":1583833,"ip_address":"","ucode":"920AAD0BD9245C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","comment_is_top":false,"comment_ctime":1578558400,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10168492992","product_id":100029501,"comment_content":"æŒ‰ç…§herosè¡¨åŠ äº†è”åˆç´¢å¼•åçš„æ‰§è¡Œç»“æœï¼Œå¦‚æœèŒƒå›´æŸ¥è¯¢æ˜¯è”åˆç´¢å¼•çš„ç¬¬ä¸€åˆ—ï¼Œå°±æ— æ³•èµ°ç´¢å¼•äº†ï¼Ÿ","like_count":2},{"had_liked":false,"id":170183,"user_name":"rike","can_delete":false,"product_type":"c1","uid":1583833,"ip_address":"","ucode":"920AAD0BD9245C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","comment_is_top":false,"comment_ctime":1578544930,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10168479522","product_id":100029501,"comment_content":"åˆ›å»ºå®Œè¡¨åæŸ¥çœ‹è¡¨çš„ddlï¼Œå‘ç°PRIMARY KEY (`comment_id`) USING BTREE,è¿™é‡Œçš„BTREEæ˜¯æŒ‡bæ ‘è¿˜æ˜¯b+æ ‘ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1583833,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","nickname":"rike","note":"","ucode":"920AAD0BD9245C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126960,"discussion_content":"éº»çƒ¦ä½œè€…å€’æ˜¯å›å¤ä¸€ä¸‹å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578553618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1583833,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","nickname":"rike","note":"","ucode":"920AAD0BD9245C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269086,"discussion_content":"æˆ‘æŸ¥è¿‡å®˜æ–¹æ–‡æ¡£ï¼Œåœ¨å¯¹B-treeï¼ˆhttps://dev.mysql.com/doc/refman/8.0/en/glossary.htmlï¼‰çš„è§£é‡Šä¸‹é¢æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼šâ€œB-tree structures used by MySQL storage engines may be regarded as variants due to sophistications not present in a classic B-tree design. â€\nç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œMySQLå­˜å‚¨å¼•æ“ä½¿ç”¨B-treeè¿™ä¸ªæ•°æ®ç»“æ„ä¹Ÿè®¸æ˜¯å› ä¸ºå®ƒæ²¡æœ‰ä¼ ç»ŸB-treeè®¾è®¡çš„å¤æ‚æ€§ï¼Œå³è§†ä½œä¼ ç»ŸB-treeçš„å˜ä½“ã€‚â€\n\nç®€å•æ¥è®² è¿™é‡Œçš„USING BTREEå°±æ˜¯æŒ‡çš„B+æ ‘ï¼Œä½ å¯ä»¥ç¿»å›24èŠ‚ã€Šç´¢å¼•çš„åŸç†ã€‹é‚£é‡Œå†çœ‹çœ‹B æ ‘å’Œ B+æ ‘çš„åŒºåˆ«ã€‚ \n\nä¸ªäººç†è§£ï¼Œä»…ä¾›å‚è€ƒã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589865304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":126960,"ip_address":""},"score":269086,"extra":""}]}]},{"had_liked":false,"id":128986,"user_name":"æ¸´æœ›é£çš„å“ºä¹³ç±»","can_delete":false,"product_type":"c1","uid":1193958,"ip_address":"","ucode":"D16372552A2415","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/e6/71bcbc93.jpg","comment_is_top":false,"comment_ctime":1567001495,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"10156936087","product_id":100029501,"comment_content":"æ€è€ƒé¢˜ï¼š<br>Aï¼šå…¨è¡¨æ‰«æ<br>Bï¼šä½¿ç”¨è”åˆç´¢å¼•ï¼ˆxï¼Œyï¼Œzï¼‰<br>Cï¼šä½¿ç”¨è”åˆç´¢å¼•ï¼ˆxï¼Œyï¼Œzï¼‰<br>Dï¼šä½¿ç”¨è”åˆç´¢å¼•ï¼ˆxï¼Œyï¼‰","like_count":2},{"had_liked":false,"id":274700,"user_name":"zxjiao","can_delete":false,"product_type":"c1","uid":1242725,"ip_address":"","ucode":"01AD348ECAE76C","user_header":"https://static001.geekbang.org/account/avatar/00/12/f6/65/e4e04d15.jpg","comment_is_top":false,"comment_ctime":1611130957,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5906098253","product_id":100029501,"comment_content":"Aï¼šå…¨è¡¨æ‰«æï¼›<br>Bï¼šå› ä¸ºzçš„æ—¶å€™æœ‰èŒƒå›´åˆ¤æ–­ï¼Œåœæ­¢åŒ¹é…ï¼Œæ‰€ä»¥ä½¿ç”¨äº†è”åˆç´¢å¼•çš„ï¼ˆx,yï¼‰éƒ¨åˆ†ï¼›<br>Cï¼šä½¿ç”¨äº†è”åˆç´¢å¼•ï¼ˆx,y,zï¼‰<br>Dï¼šå› ä¸ºyçš„æ—¶å€™æœ‰èŒƒå›´åˆ¤æ–­ï¼Œåœæ­¢åŒ¹é…ï¼Œæ‰€ä»¥ä½¿ç”¨äº†è”åˆç´¢å¼•çš„ï¼ˆxï¼‰éƒ¨åˆ†ï¼›","like_count":1},{"had_liked":false,"id":265889,"user_name":"ğŸŒğŸ‡¨ğŸ‡³ğŸ‘¦","can_delete":false,"product_type":"c1","uid":1168085,"ip_address":"","ucode":"6BB08F05546D06","user_header":"https://static001.geekbang.org/account/avatar/00/11/d2/d5/ed93f2fa.jpg","comment_is_top":false,"comment_ctime":1607062722,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5902030018","product_id":100029501,"comment_content":"è€å¸ˆå¥½ï¼Œæƒ³é—®ä¸€ä¸‹æ€ä¹ˆç¦æ­¢æœ¬åœ°mysqlçš„ä¸€åˆ‡ç¼“å­˜ï¼Œæƒ³æµ‹è¯•sqlè¯­å¥å˜åŒ–&#47;ç´¢å¼•å˜åŒ–æ•ˆæœï¼Œä½†æ˜¯æœ‰ç¼“å­˜ä¸å¥½çœ‹å‡ºæ¥","like_count":1},{"had_liked":false,"id":225750,"user_name":"Devo","can_delete":false,"product_type":"c1","uid":1325667,"ip_address":"","ucode":"79583A5F52FFA9","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/63/a94f339e.jpg","comment_is_top":false,"comment_ctime":1591846042,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5886813338","product_id":100029501,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹â€œè¿™æ˜¯å› ä¸º MySQL åœ¨åŒ¹é…è”åˆç´¢å¼•æœ€å·¦å‰ç¼€çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°äº†èŒƒå›´æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼ˆ&lt;ï¼‰ï¼ˆ&gt;ï¼‰å’Œ between ç­‰ï¼Œå°±ä¼šåœæ­¢åŒ¹é…ã€‚ç´¢å¼•åˆ—æœ€å¤šä½œç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼Œå¯¹äºåé¢çš„ Z æ¥è¯´ï¼Œå°±æ²¡æ³•ä½¿ç”¨åˆ°ç´¢å¼•äº†ã€‚â€ï¼Œè¿™å¥è¯ä¸­ï¼Œä¸ºä»€ä¹ˆè”åˆç´¢å¼•é‡åˆ°èŒƒå›´æŸ¥è¯¢ä¼šåœæ­¢åé¢çš„åŒ¹é…ï¼Ÿä»ç´¢å¼•æ ‘çš„ç‰©ç†ç»“æ„æ¥è®²è¯¥å¦‚ä½•ç†è§£è¿™å¥è¯å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":195149,"user_name":"åšå¼ˆ","can_delete":false,"product_type":"c1","uid":1433344,"ip_address":"","ucode":"B1A69837E41972","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/EcYNib1bnDf5dz6JcrE8AoyZYMdqic2VNmbBtCcVZTO9EoDZZxqlQDEqQKo6klCCmklOtN9m0dTd2AOXqSneJYLw/132","comment_is_top":false,"comment_ctime":1585141124,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880108420","product_id":100029501,"comment_content":"ABCä¼šä½¿ç”¨æ˜¯ç´¢å¼•ï¼ŒDä¸ä¼šä½¿ç”¨ç´¢å¼•ã€‚","like_count":1},{"had_liked":false,"id":185132,"user_name":"Echo","can_delete":false,"product_type":"c1","uid":1409357,"ip_address":"","ucode":"F04C6BC4E288A7","user_header":"https://static001.geekbang.org/account/avatar/00/15/81/4d/5f892de2.jpg","comment_is_top":false,"comment_ctime":1583492142,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5878459438","product_id":100029501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼šè¯·é—®ï¼ŒInnoDB ä¸‰å¤§å…³é”®ç‰¹æ€§ä¹‹ä¸€â€˜äºŒæ¬¡å†™â€™æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ","like_count":1},{"had_liked":false,"id":170741,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1578701860,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5873669156","product_id":100029501,"comment_content":"ä¸ºä»€ä¹ˆä¸è¯´maraiadb","like_count":1},{"had_liked":false,"id":165310,"user_name":"çˆ¬è¡Œçš„èœ—ç‰›","can_delete":false,"product_type":"c1","uid":1033956,"ip_address":"","ucode":"6623B62DE63CE9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/QD6bf8hkS5dHrabdW7M7Oo9An1Oo3QSxqoySJMDh7GTraxFRX77VZ2HZ13x3R4EVYddIGXicRRDAc7V9z5cLDlA/132","comment_is_top":false,"comment_ctime":1577198480,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5872165776","product_id":100029501,"comment_content":"B. SELECT x, y, z FROM table WHERE y=2 AND x=1 AND z&gt;3 <br>åªæ˜¯ç”¨åˆ°è”åˆç´¢å¼•çš„x,y çš„å­—æ®µï¼› <br><br>C. SELECT x, y, z FROM table WHERE y=2 AND x=1 AND z=3<br>ç”¨åˆ°è”åˆç´¢å¼•ï¼Œ x,y,z å­—æ®µéƒ½ç”¨åˆ°ï¼› ","like_count":1},{"had_liked":false,"id":162741,"user_name":"å£¶ä¸­æ— é…’","can_delete":false,"product_type":"c1","uid":1339379,"ip_address":"","ucode":"9A4C59E6141F8F","user_header":"https://static001.geekbang.org/account/avatar/00/14/6f/f3/6cdf7f06.jpg","comment_is_top":false,"comment_ctime":1576583271,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5871550567","product_id":100029501,"comment_content":"ç­”é¢˜ï¼š<br>X<br>XYZ<br>XYZ<br>XY","like_count":1},{"had_liked":false,"id":154484,"user_name":"å†²","can_delete":false,"product_type":"c1","uid":1149914,"ip_address":"","ucode":"4191C8A4DF3840","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIk46cor5XVFTPZbPOnb7pViabgy450pobo46hRHFQz5nR5ocYRKIzC8vShic36vwa553H4Vj50x5wA/132","comment_is_top":false,"comment_ctime":1574441563,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5869408859","product_id":100029501,"comment_content":"åªæœ‰Cç”¨äº†ç´¢å¼•ï¼Œå…¶ä»–çš„å› ä¸ºæ¡ä»¶ä¸æ˜¯é‡‡ç”¨=æˆ–è€…inä¸ä¼šè¿›è¡Œæ’åº","like_count":1},{"had_liked":false,"id":144670,"user_name":"Coool","can_delete":false,"product_type":"c1","uid":1701702,"ip_address":"","ucode":"1D1AB3270B02B9","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/46/209ca424.jpg","comment_is_top":false,"comment_ctime":1571993120,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5866960416","product_id":100029501,"comment_content":"ä»¥herosè¡¨ä¸ºä¾‹ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼š<br>Aï¼šexplain select * from heros where hp_max &gt; 5000 and hp_growth = 329 and mp_max = 100; -- All<br><br>Bï¼šexplain select * from heros where hp_max = 5000 and hp_growth = 329 and mp_max &gt; 100; -- range<br><br>Cï¼šexplain select * from heros where hp_max = 5000 and hp_growth = 329 and mp_max = 100; -- ref<br><br>Dï¼šexplain select * from heros where hp_max = 5000 and hp_growth &gt; 329 and mp_max = 100; -- range","like_count":1},{"had_liked":false,"id":131568,"user_name":"NO.9","can_delete":false,"product_type":"c1","uid":1336970,"ip_address":"","ucode":"B92F14B493406F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/fUDCLLob6DFS8kZcMUfxOc4qQHeQfW4rIMK5Ty2u2AqLemcdhVRw7byx85HrVicSvy5AiabE0YGMj5gVt8ibgrusA/132","comment_is_top":false,"comment_ctime":1567815138,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5862782434","product_id":100029501,"comment_content":"A:x<br>B:xyz<br>C:xyz<br>D:xy","like_count":1},{"had_liked":false,"id":130169,"user_name":"niemo","can_delete":false,"product_type":"c1","uid":1100142,"ip_address":"","ucode":"71364762238367","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/6e/1ac1c955.jpg","comment_is_top":false,"comment_ctime":1567395771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5862363067","product_id":100029501,"comment_content":"è”åˆç´¢å¼•è¿™é‡Œæ˜¯ä¸æ˜¯è¦è®²ä¸‹å„ç§æ•°æ®åº“ä¹‹é—´çš„whereåæ¡ä»¶æ‰§è¡Œçš„é¡ºåºå•Šï¼Ÿmysqlæ˜¯ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œoracleæ˜¯ä»å³åˆ°å·¦ï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œå¯¹å§ï¼Ÿ<br>","like_count":1},{"had_liked":false,"id":129675,"user_name":"asdf100","can_delete":false,"product_type":"c1","uid":1043738,"ip_address":"","ucode":"39D8D71453E575","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","comment_is_top":false,"comment_ctime":1567215526,"is_pvip":false,"replies":[{"id":"62736","content":"é™¤äº†myisamåªæ”¯æŒè¡¨çº§é”ä»¥å¤–ï¼Œmyisamä¸æ˜¯äº‹åŠ¡å®‰å…¨çš„ï¼Œè€Œä¸”ä¸æ”¯æŒå¤–é”®ã€‚ä½ å¯ä»¥ç†è§£myisamæ›´ç®€åŒ–è½»é‡çº§","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577087625,"ip_address":"","comment_id":129675,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862182822","product_id":100029501,"comment_content":"å¯¹äºè¯»æ“ä½œï¼Œä¸ºä»€ä¹ˆé€‰æ‹©myisamæ¯”innobdæ•ˆç‡è¦é«˜ï¼Ÿæ˜¯å› ä¸ºé”çš„ç²’åº¦å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465595,"discussion_content":"é™¤äº†myisamåªæ”¯æŒè¡¨çº§é”ä»¥å¤–ï¼Œmyisamä¸æ˜¯äº‹åŠ¡å®‰å…¨çš„ï¼Œè€Œä¸”ä¸æ”¯æŒå¤–é”®ã€‚ä½ å¯ä»¥ç†è§£myisamæ›´ç®€åŒ–è½»é‡çº§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577087625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129672,"user_name":"asdf100","can_delete":false,"product_type":"c1","uid":1043738,"ip_address":"","ucode":"39D8D71453E575","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","comment_is_top":false,"comment_ctime":1567215019,"is_pvip":false,"replies":[{"id":"53407","content":"ä¹Ÿæ˜¯ä½¿ç”¨çš„B+æ ‘","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1570434287,"ip_address":"","comment_id":129672,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5862182315","product_id":100029501,"comment_content":"Myisamä½¿ç”¨çš„å¥½åƒæ˜¯b- æ ‘å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465594,"discussion_content":"ä¹Ÿæ˜¯ä½¿ç”¨çš„B+æ ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570434287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7033,"discussion_content":"éƒ½æ˜¯ B+ æ ‘ï¼Œåªä¸è¿‡å®ç°çš„æ–¹å¼ä¸ä¸€æ ·","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1567300100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1043738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","nickname":"asdf100","note":"","ucode":"39D8D71453E575","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"discussion":{"id":7051,"discussion_content":"ä½ è¯´çš„å¯¹çš„ï¼Œæˆ‘è®°é”™äº†ï¼ŒåŸºç¡€ä¸ç‰¢å›ºå‘€ï¼\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567324197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7033,"ip_address":""},"score":7051,"extra":""}]}]},{"had_liked":false,"id":316098,"user_name":"å‡¯æ–‡å°çŒª","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1634132802,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634132802","product_id":100029501,"comment_content":"CREATE TABLE `employees` (<br>  `id` int(11) NOT NULL AUTO_INCREMENT,<br>  `name` varchar(24) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;å§“å&#39;,<br>  `age` int(11) NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;å¹´é¾„&#39;,<br>  `position` varchar(20) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;èŒä½&#39;,<br>  `hire_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;å…¥èŒæ—¶é—´&#39;,<br>  PRIMARY KEY (`id`),<br>  KEY `idx_name_age_position` (`name`,`age`,`position`) USING BTREE<br>) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 COMMENT=&#39;å‘˜å·¥è®°å½•è¡¨&#39;;<br><br>è¯­å¥1ï¼š<br>EXPLAIN SELECT * FROM employees WHERE name= &#39;LiLei&#39; AND age &gt; 22 AND position =&#39;manager&#39;;<br>è¯­å¥2ï¼š<br>explain  select *<br>from employees<br>where name=&#39;LiLei&#39;<br>and age &gt;=22<br>and position = &#39;dev&#39;;<br><br><br>è¯­å¥1çš„ç»“æœï¼š<br>1\tSIMPLE\temployees\t\trange\tidx_name_age_position\tidx_name_age_position\t78\t\t1\t33.33\tUsing index condition<br><br><br>è¯­å¥2çš„ç»“æœ<br>1\tSIMPLE\temployees\t\trange\tidx_name_age_position\tidx_name_age_position\t140\t\t1\t33.33\tUsing index condition<br><br><br>æˆ‘çš„ç–‘é—®æ˜¯å¦‚æœæŒ‰ç…§èŒƒå›´åˆ—åªèƒ½åŒ¹é…ä¸€æ¬¡çš„è¯ï¼Œä¸ºä»€ä¹ˆç¬¬äºŒå¥çš„keylenæ˜¯140ï¼Œè¿™ä¸ªæ˜æ˜¾æ˜¯ä¸‰ä¸ªå­—æ®µéƒ½ç”¨ä¸Šäº†","like_count":0},{"had_liked":false,"id":128834,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566970788,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566970788","product_id":100029501,"comment_content":"æ€è€ƒé¢˜ï¼š<br>A.ä½¿ç”¨è”åˆç´¢å¼•çš„xéƒ¨åˆ†<br>B.ä½¿ç”¨è”åˆç´¢å¼•çš„x,y,zéƒ¨åˆ†<br>C.ä½¿ç”¨è”åˆç´¢å¼•çš„x,y,zéƒ¨åˆ†<br>ä½¿ç”¨è”åˆç´¢å¼•çš„x,yéƒ¨åˆ†","like_count":0},{"had_liked":false,"id":128810,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1566966899,"is_pvip":false,"discussion_count":3,"race_medal":1,"score":"1566966899","product_id":100029501,"comment_content":"æ‰€ä»¥ï¼Œæˆ‘çš„é—®é¢˜æ˜¯: æŸ¥è¯¢ç¼“å­˜çš„æ•°æ®æ˜¯ä¸æ˜¯æ¥è‡ªç¼“å­˜æ± ï¼Ÿæˆ‘ç†è§£æ˜¯çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"é©¬ä»¥","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6612,"discussion_content":"ä¸æ˜¯çš„ï¼ŒæŸ¥è¯¢ç¼“å­˜æ˜¯å¦‚æœä½ ç°åœ¨æŸ¥ä¸€å¼ è¡¨çš„æ•°æ®ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œmysqlä¼šæŠŠæ•°æ®æ”¾åˆ°ç¼“å­˜ä¸­ï¼ˆä¸€èˆ¬æ˜¯æŒ‰ç…§key-valueå­˜å‚¨ï¼Œkeyå°±æ˜¯ä½ çš„æŸ¥è¯¢è¯­å¥ï¼‰ï¼Œå¦‚æœä¸‹æ¬¡ä½ å†æ‰§è¡ŒåŒæ ·çš„è¯­å¥ï¼Œmysqlå°±ä¸ä¼šå»å¼•æ“å±‚å»æŸ¥äº†ï¼Œç›´æ¥æ‹¿ç¼“å­˜ä¸­çš„æ•°æ®è¿”å›ç»™ä½ ï¼Œä½†æ˜¯æŸ¥è¯¢ç¼“å­˜æœ‰ä¸€ä¸ªå¼Šç«¯å°±æ˜¯ä½ çš„æ•°æ®æ²¡æ›´æ–°ä¸€æ¬¡ï¼Œç¼“å­˜ä¸­çš„æ•°æ®å°±ä¼šå¤±æ•ˆï¼Œä¸‹æ¬¡å†æŸ¥çš„è¯è¿˜ä¼šå†å»å¼•æ“å±‚å–æ•°æ®ç„¶åæ”¾åˆ°æŸ¥è¯¢ç¼“å­˜ä¸­ï¼Œmysqlåœ¨8.0åç‰ˆæœ¬å·²ç»æŠŠè¿™ä¸ªå¹²æ‰äº†ï¼Œå› ä¸ºå¼Šç«¯å¤ªå¤§ï¼›è€Œç¼“å†²æ± æ˜¯å­˜çš„çƒ­ç‚¹æ•°æ®ï¼Œä½ å¯ä»¥ç†è§£ä¸ºå­˜çš„æ˜¯ä¸€é¡µä¸€é¡µçš„æ•°æ®ï¼Œè¿™éƒ¨åˆ†çš„æ•°æ®çš„ç‰¹ç‚¹ä½ å³ä½¿æ˜¯æ›´æ–°ä¹Ÿæ˜¯æ›´æ–°ç¼“å­˜ï¼ˆå‰ææ˜¯ä¸æ˜¯å”¯ä¸€ç´¢å¼•ï¼‰ï¼ŒæŒä¹…è¯ä¹Ÿå°±æ˜¯æŒ‡çš„è¿™mysqlçš„åˆ·è„é¡µã€‚è¯¦ç»†çš„å¯ä»¥æ‰¾ä¸€ä¸‹èµ„æ–™ï¼Œæˆ‘è¿™é‡Œè¯´ä¸ªå¤§æ¦‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566991651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1052859,"avatar":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","nickname":"Demon.Lee","note":"","ucode":"7F0E5493A8E345","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"é©¬ä»¥","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6805,"discussion_content":"è°¢è°¢è§£ç­”ï¼Œæˆ‘è¿˜ä»¥ä¸ºæŸ¥è¯¢ç¼“å­˜çš„æ•°æ®ä¹Ÿæ”¾åœ¨ç¼“å­˜æ± æ‰€åœ¨çš„é‚£å—å†…å­˜ç©ºé—´é‡Œå‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567127170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6612,"ip_address":""},"score":6805,"extra":""},{"author":{"id":1021638,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/96/c6/ac69caa9.jpg","nickname":"ä»Šæ™šåƒå•¥","note":"","ucode":"960608C402BA87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1052859,"avatar":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","nickname":"Demon.Lee","note":"","ucode":"7F0E5493A8E345","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":21619,"discussion_content":"æˆ‘çš„ç†è§£ï¼šè¿™é‡Œè®²çš„ç¼“å†²æ± ï¼Œæ˜¯ç”±å­˜å‚¨å¼•æ“è´Ÿè´£çš„ï¼›æŸ¥è¯¢ç¼“å­˜æ˜¯æ•°æ®åº“æŸ¥è¯¢å™¨åˆ†æSQLè¯­å¥æ—¶ï¼Œå¦‚æœè¿™æ¡åˆšæŸ¥è¿‡ï¼Œè¯»å–ç›¸åº”çš„ç¼“å­˜ï¼Œä¹Ÿæ˜¯å±äºâ€œç¼“å­˜â€ï¼Œä½†å’Œè¿™ä¸ªç¼“å†²æ± ä¸æ˜¯ä¸€èµ·ï¼Œä¸æ˜¯ç”±å­˜å‚¨å¼•æ“è´Ÿè´£çš„ã€‚æŸ¥è¯¢ç¼“å­˜çš„ç¼ºç‚¹å…¶ä»–äººè®²å¾ˆå¤šäº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1569504958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6805,"ip_address":""},"score":21619,"extra":""}]}]},{"had_liked":false,"id":128762,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1566958377,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566958377","product_id":100029501,"comment_content":"A: x<br>B: x,y,z<br>C: x,y,z<br>D: x,y","like_count":0,"discussions":[{"author":{"id":1052859,"avatar":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","nickname":"Demon.Lee","note":"","ucode":"7F0E5493A8E345","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6550,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566966463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}