{"id":93711,"title":"17 | è°ƒåº¦ï¼ˆä¸‹ï¼‰ï¼šæŠ¢å å¼è°ƒåº¦æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Ÿ","content":"<p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬è®²äº†ä¸»åŠ¨è°ƒåº¦ï¼Œå°±æ˜¯è¿›ç¨‹è¿è¡Œåˆ°ä¸€åŠï¼Œå› ä¸ºç­‰å¾…I/Oç­‰æ“ä½œè€Œä¸»åŠ¨è®©å‡ºCPUï¼Œç„¶åå°±è¿›å…¥äº†æˆ‘ä»¬çš„â€œè¿›ç¨‹è°ƒåº¦ç¬¬ä¸€å®šå¾‹â€ã€‚æ‰€æœ‰è¿›ç¨‹çš„è°ƒç”¨æœ€ç»ˆéƒ½ä¼šèµ°__scheduleå‡½æ•°ã€‚é‚£è¿™ä¸ªå®šå¾‹åœ¨è¿™ä¸€èŠ‚è¿˜æ˜¯è¦ç»§ç»­èµ·ä½œç”¨ã€‚</p><h2>æŠ¢å å¼è°ƒåº¦</h2><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬è®²çš„ä¸»åŠ¨è°ƒåº¦æ˜¯ç¬¬ä¸€ç§æ–¹å¼ï¼Œç¬¬äºŒç§æ–¹å¼ï¼Œå°±æ˜¯æŠ¢å å¼è°ƒåº¦ã€‚ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”ŸæŠ¢å å‘¢ï¼Ÿ</p><p>æœ€å¸¸è§çš„ç°è±¡å°±æ˜¯<strong>ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæ—¶é—´å¤ªé•¿äº†ï¼Œæ˜¯æ—¶å€™åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹äº†</strong>ã€‚é‚£æ€ä¹ˆè¡¡é‡ä¸€ä¸ªè¿›ç¨‹çš„è¿è¡Œæ—¶é—´å‘¢ï¼Ÿåœ¨è®¡ç®—æœºé‡Œé¢æœ‰ä¸€ä¸ªæ—¶é’Ÿï¼Œä¼šè¿‡ä¸€æ®µæ—¶é—´è§¦å‘ä¸€æ¬¡æ—¶é’Ÿä¸­æ–­ï¼Œé€šçŸ¥æ“ä½œç³»ç»Ÿï¼Œæ—¶é—´åˆè¿‡å»ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œè¿™æ˜¯ä¸ªå¾ˆå¥½çš„æ–¹å¼ï¼Œå¯ä»¥æŸ¥çœ‹æ˜¯å¦æ˜¯éœ€è¦æŠ¢å çš„æ—¶é—´ç‚¹ã€‚</p><p>æ—¶é’Ÿä¸­æ–­å¤„ç†å‡½æ•°ä¼šè°ƒç”¨scheduler_tick()ï¼Œå®ƒçš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>void scheduler_tick(void)\n{\n\tint cpu = smp_processor_id();\n\tstruct rq *rq = cpu_rq(cpu);\n\tstruct task_struct *curr = rq-&gt;curr;\n......\n\tcurr-&gt;sched_class-&gt;task_tick(rq, curr, 0);\n\tcpu_load_update_active(rq);\n\tcalc_global_load_tick(rq);\n......\n}\n</code></pre><p>è¿™ä¸ªå‡½æ•°å…ˆå–å‡ºå½“å‰CPUçš„è¿è¡Œé˜Ÿåˆ—ï¼Œç„¶åå¾—åˆ°è¿™ä¸ªé˜Ÿåˆ—ä¸Šå½“å‰æ­£åœ¨è¿è¡Œä¸­çš„è¿›ç¨‹çš„task_structï¼Œç„¶åè°ƒç”¨è¿™ä¸ªtask_structçš„è°ƒåº¦ç±»çš„task_tickå‡½æ•°ï¼Œé¡¾åæ€ä¹‰è¿™ä¸ªå‡½æ•°å°±æ˜¯æ¥å¤„ç†æ—¶é’Ÿäº‹ä»¶çš„ã€‚</p><p>å¦‚æœå½“å‰è¿è¡Œçš„è¿›ç¨‹æ˜¯æ™®é€šè¿›ç¨‹ï¼Œè°ƒåº¦ç±»ä¸ºfair_sched_classï¼Œè°ƒç”¨çš„å¤„ç†æ—¶é’Ÿçš„å‡½æ•°ä¸ºtask_tick_fairã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®ƒçš„å®ç°ã€‚</p><pre><code>static void task_tick_fair(struct rq *rq, struct task_struct *curr, int queued)\n{\n\tstruct cfs_rq *cfs_rq;\n\tstruct sched_entity *se = &amp;curr-&gt;se;\n\n\n\tfor_each_sched_entity(se) {\n\t\tcfs_rq = cfs_rq_of(se);\n\t\tentity_tick(cfs_rq, se, queued);\n\t}\n......\n}\n</code></pre><!-- [[[read_end]]] --><p>æ ¹æ®å½“å‰è¿›ç¨‹çš„task_structï¼Œæ‰¾åˆ°å¯¹åº”çš„è°ƒåº¦å®ä½“sched_entityå’Œcfs_rqé˜Ÿåˆ—ï¼Œè°ƒç”¨entity_tickã€‚</p><pre><code>static void\nentity_tick(struct cfs_rq *cfs_rq, struct sched_entity *curr, int queued)\n{\n\tupdate_curr(cfs_rq);\n\tupdate_load_avg(curr, UPDATE_TG);\n\tupdate_cfs_shares(curr);\n.....\n\tif (cfs_rq-&gt;nr_running &gt; 1)\n\t\tcheck_preempt_tick(cfs_rq, curr);\n}\n</code></pre><p>åœ¨entity_tické‡Œé¢ï¼Œæˆ‘ä»¬åˆè§åˆ°äº†ç†Ÿæ‚‰çš„update_currã€‚å®ƒä¼šæ›´æ–°å½“å‰è¿›ç¨‹çš„vruntimeï¼Œç„¶åè°ƒç”¨check_preempt_tickã€‚é¡¾åæ€ä¹‰å°±æ˜¯ï¼Œæ£€æŸ¥æ˜¯å¦æ˜¯æ—¶å€™è¢«æŠ¢å äº†ã€‚</p><pre><code>static void\ncheck_preempt_tick(struct cfs_rq *cfs_rq, struct sched_entity *curr)\n{\n\tunsigned long ideal_runtime, delta_exec;\n\tstruct sched_entity *se;\n\ts64 delta;\n\n\n\tideal_runtime = sched_slice(cfs_rq, curr);\n\tdelta_exec = curr-&gt;sum_exec_runtime - curr-&gt;prev_sum_exec_runtime;\n\tif (delta_exec &gt; ideal_runtime) {\n\t\tresched_curr(rq_of(cfs_rq));\n\t\treturn;\n\t}\n......\n\tse = __pick_first_entity(cfs_rq);\n\tdelta = curr-&gt;vruntime - se-&gt;vruntime;\n\tif (delta &lt; 0)\n\t\treturn;\n\tif (delta &gt; ideal_runtime)\n\t\tresched_curr(rq_of(cfs_rq));\n}\n</code></pre><p>check_preempt_tickå…ˆæ˜¯è°ƒç”¨sched_sliceå‡½æ•°è®¡ç®—å‡ºçš„ideal_runtimeã€‚ideal_runtimeæ˜¯ä¸€ä¸ªè°ƒåº¦å‘¨æœŸä¸­ï¼Œè¯¥è¿›ç¨‹è¿è¡Œçš„å®é™…æ—¶é—´ã€‚</p><p>sum_exec_runtimeæŒ‡è¿›ç¨‹æ€»å…±æ‰§è¡Œçš„å®é™…æ—¶é—´ï¼Œprev_sum_exec_runtimeæŒ‡ä¸Šæ¬¡è¯¥è¿›ç¨‹è¢«è°ƒåº¦æ—¶å·²ç»å ç”¨çš„å®é™…æ—¶é—´ã€‚æ¯æ¬¡åœ¨è°ƒåº¦ä¸€ä¸ªæ–°çš„è¿›ç¨‹æ—¶éƒ½ä¼šæŠŠå®ƒçš„se-&gt;prev_sum_exec_runtime = se-&gt;sum_exec_runtimeï¼Œæ‰€ä»¥sum_exec_runtime-prev_sum_exec_runtimeå°±æ˜¯è¿™æ¬¡è°ƒåº¦å ç”¨å®é™…æ—¶é—´ã€‚å¦‚æœè¿™ä¸ªæ—¶é—´å¤§äºideal_runtimeï¼Œåˆ™åº”è¯¥è¢«æŠ¢å äº†ã€‚</p><p>é™¤äº†è¿™ä¸ªæ¡ä»¶ä¹‹å¤–ï¼Œè¿˜ä¼šé€šè¿‡__pick_first_entityå–å‡ºçº¢é»‘æ ‘ä¸­æœ€å°çš„è¿›ç¨‹ã€‚å¦‚æœå½“å‰è¿›ç¨‹çš„vruntimeå¤§äºçº¢é»‘æ ‘ä¸­æœ€å°çš„è¿›ç¨‹çš„vruntimeï¼Œä¸”å·®å€¼å¤§äºideal_runtimeï¼Œä¹Ÿåº”è¯¥è¢«æŠ¢å äº†ã€‚</p><p>å½“å‘ç°å½“å‰è¿›ç¨‹åº”è¯¥è¢«æŠ¢å ï¼Œä¸èƒ½ç›´æ¥æŠŠå®ƒè¸¢ä¸‹æ¥ï¼Œè€Œæ˜¯æŠŠå®ƒæ ‡è®°ä¸ºåº”è¯¥è¢«æŠ¢å ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºè¿›ç¨‹è°ƒåº¦ç¬¬ä¸€å®šå¾‹å‘€ï¼Œä¸€å®šè¦ç­‰å¾…æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹è°ƒç”¨__scheduleæ‰è¡Œå•Šï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½å…ˆæ ‡è®°ä¸€ä¸‹ã€‚</p><p>æ ‡è®°ä¸€ä¸ªè¿›ç¨‹åº”è¯¥è¢«æŠ¢å ï¼Œéƒ½æ˜¯è°ƒç”¨resched_currï¼Œå®ƒä¼šè°ƒç”¨set_tsk_need_reschedï¼Œæ ‡è®°è¿›ç¨‹åº”è¯¥è¢«æŠ¢å ï¼Œä½†æ˜¯æ­¤æ—¶æ­¤åˆ»ï¼Œå¹¶ä¸çœŸçš„æŠ¢å ï¼Œè€Œæ˜¯æ‰“ä¸Šä¸€ä¸ªæ ‡ç­¾TIF_NEED_RESCHEDã€‚</p><pre><code>static inline void set_tsk_need_resched(struct task_struct *tsk)\n{\n\tset_tsk_thread_flag(tsk,TIF_NEED_RESCHED);\n}\n</code></pre><p>å¦å¤–ä¸€ä¸ªå¯èƒ½æŠ¢å çš„åœºæ™¯æ˜¯<strong>å½“ä¸€ä¸ªè¿›ç¨‹è¢«å”¤é†’çš„æ—¶å€™</strong>ã€‚</p><p>æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…ä¸€ä¸ªI/Oçš„æ—¶å€™ï¼Œä¼šä¸»åŠ¨æ”¾å¼ƒCPUã€‚ä½†æ˜¯å½“I/Oåˆ°æ¥çš„æ—¶å€™ï¼Œè¿›ç¨‹å¾€å¾€ä¼šè¢«å”¤é†’ã€‚è¿™ä¸ªæ—¶å€™æ˜¯ä¸€ä¸ªæ—¶æœºã€‚å½“è¢«å”¤é†’çš„è¿›ç¨‹ä¼˜å…ˆçº§é«˜äºCPUä¸Šçš„å½“å‰è¿›ç¨‹ï¼Œå°±ä¼šè§¦å‘æŠ¢å ã€‚try_to_wake_up()è°ƒç”¨ttwu_queueå°†è¿™ä¸ªå”¤é†’çš„ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—å½“ä¸­ã€‚ttwu_queueå†è°ƒç”¨ttwu_do_activateæ¿€æ´»è¿™ä¸ªä»»åŠ¡ã€‚ttwu_do_activateè°ƒç”¨ttwu_do_wakeupã€‚è¿™é‡Œé¢è°ƒç”¨äº†check_preempt_curræ£€æŸ¥æ˜¯å¦åº”è¯¥å‘ç”ŸæŠ¢å ã€‚å¦‚æœåº”è¯¥å‘ç”ŸæŠ¢å ï¼Œä¹Ÿä¸æ˜¯ç›´æ¥è¸¢èµ°å½“å‰è¿›ç¨‹ï¼Œè€Œæ˜¯å°†å½“å‰è¿›ç¨‹æ ‡è®°ä¸ºåº”è¯¥è¢«æŠ¢å ã€‚</p><pre><code>static void ttwu_do_wakeup(struct rq *rq, struct task_struct *p, int wake_flags,\n\t\t\t   struct rq_flags *rf)\n{\n\tcheck_preempt_curr(rq, p, wake_flags);\n\tp-&gt;state = TASK_RUNNING;\n\ttrace_sched_wakeup(p);\n</code></pre><p>åˆ°è¿™é‡Œï¼Œä½ ä¼šå‘ç°ï¼ŒæŠ¢å é—®é¢˜åªåšå®Œäº†ä¸€åŠã€‚å°±æ˜¯æ ‡è¯†å½“å‰è¿è¡Œä¸­çš„è¿›ç¨‹åº”è¯¥è¢«æŠ¢å äº†ï¼Œä½†æ˜¯çœŸæ­£çš„æŠ¢å åŠ¨ä½œå¹¶æ²¡æœ‰å‘ç”Ÿã€‚</p><h2>æŠ¢å çš„æ—¶æœº</h2><p>çœŸæ­£çš„æŠ¢å è¿˜éœ€è¦æ—¶æœºï¼Œä¹Ÿå°±æ˜¯éœ€è¦é‚£ä¹ˆä¸€ä¸ªæ—¶åˆ»ï¼Œè®©æ­£åœ¨è¿è¡Œä¸­çš„è¿›ç¨‹æœ‰æœºä¼šè°ƒç”¨ä¸€ä¸‹__scheduleã€‚</p><p>ä½ å¯ä»¥æƒ³è±¡ï¼Œä¸å¯èƒ½æŸä¸ªè¿›ç¨‹ä»£ç è¿è¡Œç€ï¼Œçªç„¶è¦å»è°ƒç”¨__scheduleï¼Œä»£ç é‡Œé¢ä¸å¯èƒ½è¿™ä¹ˆå†™ï¼Œæ‰€ä»¥ä¸€å®šè¦è§„åˆ’å‡ ä¸ªæ—¶æœºï¼Œè¿™ä¸ªæ—¶æœºåˆ†ä¸ºç”¨æˆ·æ€å’Œå†…æ ¸æ€ã€‚</p><h3>ç”¨æˆ·æ€çš„æŠ¢å æ—¶æœº</h3><p>å¯¹äºç”¨æˆ·æ€çš„è¿›ç¨‹æ¥è®²ï¼Œä»ç³»ç»Ÿè°ƒç”¨ä¸­è¿”å›çš„é‚£ä¸ªæ—¶åˆ»ï¼Œæ˜¯ä¸€ä¸ªè¢«æŠ¢å çš„æ—¶æœºã€‚</p><p>å‰é¢è®²ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ï¼Œ64ä½çš„ç³»ç»Ÿè°ƒç”¨çš„é“¾è·¯ä½do_syscall_64-&gt;syscall_return_slowpath-&gt;prepare_exit_to_usermode-&gt;exit_to_usermode_loopï¼Œå½“æ—¶æˆ‘ä»¬è¿˜æ²¡å…³æ³¨exit_to_usermode_loopè¿™ä¸ªå‡½æ•°ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚</p><pre><code>static void exit_to_usermode_loop(struct pt_regs *regs, u32 cached_flags)\n{\n\twhile (true) {\n\t\t/* We have work to do. */\n\t\tlocal_irq_enable();\n\n\n\t\tif (cached_flags &amp; _TIF_NEED_RESCHED)\n\t\t\tschedule();\n......\n\t}\n}\n</code></pre><p>ç°åœ¨æˆ‘ä»¬çœ‹åˆ°åœ¨exit_to_usermode_loopå‡½æ•°ä¸­ï¼Œä¸Šé¢æ‰“çš„æ ‡è®°èµ·äº†ä½œç”¨ï¼Œå¦‚æœè¢«æ‰“äº†_TIF_NEED_RESCHEDï¼Œè°ƒç”¨scheduleè¿›è¡Œè°ƒåº¦ï¼Œè°ƒç”¨çš„è¿‡ç¨‹å’Œä¸Šä¸€èŠ‚è§£æçš„ä¸€æ ·ï¼Œä¼šé€‰æ‹©ä¸€ä¸ªè¿›ç¨‹è®©å‡ºCPUï¼Œåšä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p><p>å¯¹äºç”¨æˆ·æ€çš„è¿›ç¨‹æ¥è®²ï¼Œä»ä¸­æ–­ä¸­è¿”å›çš„é‚£ä¸ªæ—¶åˆ»ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè¢«æŠ¢å çš„æ—¶æœºã€‚</p><p>åœ¨arch/x86/entry/entry_64.Sä¸­æœ‰ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹ã€‚åˆæ˜¯ä¸€æ®µæ±‡ç¼–è¯­è¨€ä»£ç ï¼Œä½ é‡ç‚¹é¢†ä¼šå®ƒçš„æ„æ€å°±è¡Œï¼Œä¸è¦çº ç»“æ¯ä¸€è¡Œéƒ½çœ‹æ‡‚ã€‚</p><pre><code>common_interrupt:\n        ASM_CLAC\n        addq    $-0x80, (%rsp) \n        interrupt do_IRQ\nret_from_intr:\n        popq    %rsp\n        testb   $3, CS(%rsp)\n        jz      retint_kernel\n/* Interrupt came from user space */\nGLOBAL(retint_user)\n        mov     %rsp,%rdi\n        call    prepare_exit_to_usermode\n        TRACE_IRQS_IRETQ\n        SWAPGS\n        jmp     restore_regs_and_iret\n/* Returning to kernel space */\nretint_kernel:\n#ifdef CONFIG_PREEMPT\n        bt      $9, EFLAGS(%rsp)  \n        jnc     1f\n0:      cmpl    $0, PER_CPU_VAR(__preempt_count)\n        jnz     1f\n        call    preempt_schedule_irq\n        jmp     0b\n</code></pre><p>ä¸­æ–­å¤„ç†è°ƒç”¨çš„æ˜¯do_IRQå‡½æ•°ï¼Œä¸­æ–­å®Œæ¯•ååˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ä¸ªæ˜¯è¿”å›ç”¨æˆ·æ€ï¼Œä¸€ä¸ªæ˜¯è¿”å›å†…æ ¸æ€ã€‚è¿™ä¸ªé€šè¿‡æ³¨é‡Šä¹Ÿèƒ½çœ‹å‡ºæ¥ã€‚</p><p>å’±ä»¬å…ˆæ¥çœ‹è¿”å›ç”¨æˆ·æ€è¿™ä¸€éƒ¨åˆ†ï¼Œå…ˆä¸ç®¡è¿”å›å†…æ ¸æ€çš„é‚£éƒ¨åˆ†ä»£ç ï¼Œretint_userä¼šè°ƒç”¨prepare_exit_to_usermodeï¼Œæœ€ç»ˆè°ƒç”¨exit_to_usermode_loopï¼Œå’Œä¸Šé¢çš„é€»è¾‘ä¸€æ ·ï¼Œå‘ç°æœ‰æ ‡è®°åˆ™è°ƒç”¨schedule()ã€‚</p><h3>å†…æ ¸æ€çš„æŠ¢å æ—¶æœº</h3><p>ç”¨æˆ·æ€çš„æŠ¢å æ—¶æœºè®²å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹å†…æ ¸æ€çš„æŠ¢å æ—¶æœºã€‚</p><p>å¯¹å†…æ ¸æ€çš„æ‰§è¡Œä¸­ï¼Œè¢«æŠ¢å çš„æ—¶æœºä¸€èˆ¬å‘ç”Ÿåœ¨preempt_enable()ä¸­ã€‚</p><p>åœ¨å†…æ ¸æ€çš„æ‰§è¡Œä¸­ï¼Œæœ‰çš„æ“ä½œæ˜¯ä¸èƒ½è¢«ä¸­æ–­çš„ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œè¿™äº›æ“ä½œä¹‹å‰ï¼Œæ€»æ˜¯å…ˆè°ƒç”¨preempt_disable()å…³é—­æŠ¢å ï¼Œå½“å†æ¬¡æ‰“å¼€çš„æ—¶å€™ï¼Œå°±æ˜¯ä¸€æ¬¡å†…æ ¸æ€ä»£ç è¢«æŠ¢å çš„æœºä¼šã€‚</p><p>å°±åƒä¸‹é¢ä»£ç ä¸­å±•ç¤ºçš„ä¸€æ ·ï¼Œpreempt_enable()ä¼šè°ƒç”¨preempt_count_dec_and_test()ï¼Œåˆ¤æ–­preempt_countå’ŒTIF_NEED_RESCHEDæ˜¯å¦å¯ä»¥è¢«æŠ¢å ã€‚å¦‚æœå¯ä»¥ï¼Œå°±è°ƒç”¨preempt_schedule-&gt;preempt_schedule_common-&gt;__scheduleè¿›è¡Œè°ƒåº¦ã€‚è¿˜æ˜¯æ»¡è¶³è¿›ç¨‹è°ƒåº¦ç¬¬ä¸€å®šå¾‹çš„ã€‚</p><pre><code>#define preempt_enable() \\\ndo { \\\n\tif (unlikely(preempt_count_dec_and_test())) \\\n\t\t__preempt_schedule(); \\\n} while (0)\n\n\n#define preempt_count_dec_and_test() \\\n\t({ preempt_count_sub(1); should_resched(0); })\n\n\nstatic __always_inline bool should_resched(int preempt_offset)\n{\n\treturn unlikely(preempt_count() == preempt_offset &amp;&amp;\n\t\t\ttif_need_resched());\n}\n\n\n#define tif_need_resched() test_thread_flag(TIF_NEED_RESCHED)\n\n\nstatic void __sched notrace preempt_schedule_common(void)\n{\n\tdo {\n......\n\t\t__schedule(true);\n......\n\t} while (need_resched())\n</code></pre><p>åœ¨å†…æ ¸æ€ä¹Ÿä¼šé‡åˆ°ä¸­æ–­çš„æƒ…å†µï¼Œå½“ä¸­æ–­è¿”å›çš„æ—¶å€™ï¼Œè¿”å›çš„ä»ç„¶æ˜¯å†…æ ¸æ€ã€‚è¿™ä¸ªæ—¶å€™ä¹Ÿæ˜¯ä¸€ä¸ªæ‰§è¡ŒæŠ¢å çš„æ—¶æœºï¼Œç°åœ¨æˆ‘ä»¬å†æ¥ä¸Šé¢ä¸­æ–­è¿”å›çš„ä»£ç ä¸­è¿”å›å†…æ ¸çš„é‚£éƒ¨åˆ†ä»£ç ï¼Œè°ƒç”¨çš„æ˜¯preempt_schedule_irqã€‚</p><pre><code>asmlinkage __visible void __sched preempt_schedule_irq(void)\n{\n......\n\tdo {\n\t\tpreempt_disable();\n\t\tlocal_irq_enable();\n\t\t__schedule(true);\n\t\tlocal_irq_disable();\n\t\tsched_preempt_enable_no_resched();\n\t} while (need_resched());\n......\n}\n</code></pre><p>preempt_schedule_irqè°ƒç”¨__scheduleè¿›è¡Œè°ƒåº¦ã€‚è¿˜æ˜¯æ»¡è¶³è¿›ç¨‹è°ƒåº¦ç¬¬ä¸€å®šå¾‹çš„ã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>å¥½äº†ï¼ŒæŠ¢å å¼è°ƒåº¦å°±è®²åˆ°è¿™é‡Œäº†ã€‚æˆ‘è¿™é‡Œç”»äº†ä¸€å¼ è„‘å›¾ï¼Œå°†æ•´ä¸ªè¿›ç¨‹çš„è°ƒåº¦ä½“ç³»éƒ½æ”¾åœ¨é‡Œé¢ã€‚</p><p>è¿™ä¸ªè„‘å›¾é‡Œé¢ç¬¬ä¸€æ¡å°±æ˜¯æ€»ç»“äº†è¿›ç¨‹è°ƒåº¦ç¬¬ä¸€å®šå¾‹çš„æ ¸å¿ƒå‡½æ•°__scheduleçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿™æ˜¯ä¸Šä¸€èŠ‚è®²çš„ï¼Œå› ä¸ºè¦åˆ‡æ¢çš„ä¸œè¥¿æ¯”è¾ƒå¤šï¼Œéœ€è¦ä½ è¯¦ç»†äº†è§£æ¯ä¸€éƒ¨åˆ†æ˜¯å¦‚ä½•åˆ‡æ¢çš„ã€‚</p><p>ç¬¬äºŒæ¡æ€»ç»“äº†æ ‡è®°ä¸ºå¯æŠ¢å çš„åœºæ™¯ï¼Œç¬¬ä¸‰æ¡æ˜¯æ‰€æœ‰çš„æŠ¢å å‘ç”Ÿçš„æ—¶æœºï¼Œè¿™é‡Œæ˜¯çœŸæ­£éªŒè¯äº†è¿›ç¨‹è°ƒåº¦ç¬¬ä¸€å®šå¾‹çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/93/7f/93588d71abd7f007397979f0ba7def7f.png?wh=2719*1259\" alt=\"\"></p><h2>è¯¾å ‚ç»ƒä¹ </h2><p>é€šè¿‡å¯¹äºå†…æ ¸ä¸­è¿›ç¨‹è°ƒåº¦çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œæ—¶é—´å¯¹äºè°ƒåº¦æ˜¯å¾ˆé‡è¦çš„ï¼Œä½ çŸ¥é“Linuxå†…æ ¸æ˜¯å¦‚ä½•ç®¡ç†å’Œåº¦é‡æ—¶é—´çš„å—ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„ç–‘æƒ‘å’Œè§è§£ï¼Œä¹Ÿæ¬¢è¿ä½ æ”¶è—æœ¬èŠ‚å†…å®¹ï¼Œ<span class=\"orange\">åå¤ç ”è¯»</span>ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå’Œä»–ä¸€èµ·å­¦ä¹ ã€è¿›æ­¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/37/8c0a95fa07a8b9a1abfd394479bdd637.jpg?wh=1110*659\" alt=\"\"></p>","comments":[{"had_liked":false,"id":93477,"user_name":"why","can_delete":false,"product_type":"c1","uid":1012937,"ip_address":"","ucode":"C9E796E53F6F5E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/c9/d3439ca4.jpg","comment_is_top":false,"comment_ctime":1557478206,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"194831006526","product_id":100024701,"comment_content":"- æŠ¢å å¼è°ƒåº¦<br>- ä¸¤ç§æƒ…å†µ: æ‰§è¡Œå¤ªä¹…, éœ€åˆ‡æ¢åˆ°å¦ä¸€è¿›ç¨‹; å¦ä¸€ä¸ªé«˜ä¼˜å…ˆçº§è¿›ç¨‹è¢«å”¤é†’<br>    - æ‰§è¡Œå¤ªä¹…: ç”±æ—¶é’Ÿä¸­æ–­è§¦å‘æ£€æµ‹, ä¸­æ–­å¤„ç†è°ƒç”¨ scheduler_tick <br>        - å–å½“å‰è¿›ç¨‹  task_struct-&gt;task_tick_fair()-&gt;å– sched_entity cfs_rq è°ƒç”¨ entity_tick()<br>        - entity_tick() è°ƒç”¨ update_curr æ›´æ–°å½“å‰è¿›ç¨‹ vruntime, è°ƒç”¨ check_preempt_tick æ£€æµ‹æ˜¯å¦éœ€è¦è¢«æŠ¢å <br>        - check_preempt_tick ä¸­è®¡ç®— ideal_runtime(ä¸€ä¸ªè°ƒåº¦å‘¨æœŸä¸­åº”è¯¥è¿è¡Œçš„å®é™…æ—¶é—´), è‹¥è¿›ç¨‹æœ¬æ¬¡è°ƒåº¦è¿è¡Œæ—¶é—´ &gt; ideal_runtime, åˆ™åº”è¯¥è¢«æŠ¢å <br>        - è¦è¢«æŠ¢å , åˆ™è°ƒç”¨ resched_curr, è®¾ç½® TIF_NEED_RESCHED, å°†å…¶æ ‡è®°ä¸ºåº”è¢«æŠ¢å è¿›ç¨‹(å› ä¸ºè¦ç­‰å¾…å½“å‰è¿›ç¨‹è¿è¡Œ `__schedule`)<br>    - å¦ä¸€ä¸ªé«˜ä¼˜å…ˆçº§è¿›ç¨‹è¢«å”¤é†’: å½“ I&#47;O å®Œæˆ, è¿›ç¨‹è¢«å”¤é†’, è‹¥ä¼˜å…ˆçº§é«˜äºå½“å‰è¿›ç¨‹åˆ™è§¦å‘æŠ¢å <br>        - try_to_wake_up()-&gt;ttwu_queue() å°†å”¤é†’ä»»åŠ¡åŠ å…¥é˜Ÿåˆ— è°ƒç”¨ ttwu_do_activate æ¿€æ´»ä»»åŠ¡<br>        - è°ƒç”¨ tt_do_wakeup()-&gt;check_preempt_curr() æ£€æŸ¥æ˜¯å¦åº”è¯¥æŠ¢å , è‹¥éœ€æŠ¢å åˆ™æ ‡è®°<br>- æŠ¢å æ—¶æœº: è®©è¿›ç¨‹è°ƒç”¨ `__schedule`, åˆ†ä¸ºç”¨æˆ·æ€å’Œå†…æ ¸æ€<br>    - ç”¨æˆ·æ€è¿›ç¨‹<br>        - æ—¶æœº-1: ä»ç³»ç»Ÿè°ƒç”¨ä¸­è¿”å›, è¿”å›è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨ exit_to_usermode_loop, æ£€æŸ¥ `_TIF_NEED_RESCHED`, è‹¥æ‰“äº†æ ‡è®°, åˆ™è°ƒç”¨ schedule()<br>        - æ—¶æœº-2: ä»ä¸­æ–­ä¸­è¿”å›, ä¸­æ–­è¿”å›åˆ†ä¸ºè¿”å›ç”¨æˆ·æ€å’Œå†…æ ¸æ€(æ±‡ç¼–ä»£ç : arch&#47;x86&#47;entry&#47;entry_64.S), è¿”å›ç”¨æˆ·æ€è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨ exit_to_usermode_loop()-&gt;shcedule()<br>    - å†…æ ¸æ€è¿›ç¨‹<br>        - æ—¶æœº-1: å‘ç”Ÿåœ¨ preempt_enable() ä¸­, å†…æ ¸æ€è¿›ç¨‹æœ‰çš„æ“ä½œä¸èƒ½è¢«ä¸­æ–­, ä¼šè°ƒç”¨ preempt_disable(), åœ¨å¼€å¯æ—¶(è°ƒç”¨ preempt_enable) æ—¶æ˜¯ä¸€ä¸ªæŠ¢å æ—¶æœº, ä¼šè°ƒç”¨ preempt_count_dec_and_test(), æ£€æµ‹ preempt_count å’Œæ ‡è®°, è‹¥å¯æŠ¢å åˆ™æœ€ç»ˆè°ƒç”¨ `__schedule`<br>        - æ—¶æœº-2: å‘ç”Ÿåœ¨ä¸­æ–­è¿”å›, ä¹Ÿä¼šè°ƒç”¨ `__schedule`<br>","like_count":46},{"had_liked":false,"id":120687,"user_name":"garlic","can_delete":false,"product_type":"c1","uid":1019579,"ip_address":"","ucode":"FEB147EDB5774E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/bb/c039dc11.jpg","comment_is_top":false,"comment_ctime":1564974668,"is_pvip":true,"replies":[{"id":"46361","content":"èµï¼Œå¾ˆç‰›","user_name":"ä½œè€…å›å¤","comment_id":120687,"uid":"1001590","ip_address":"","utype":1,"ctime":1566297089,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":1,"score":"117529091660","product_id":100024701,"comment_content":"linuxå†…æ ¸ä¾é ç¡¬ä»¶å®šæ—¶ç”µè·¯ç‰¹å®šæ—¶é’Ÿé¢‘ç‡ï¼Œtick rateï¼Œè§¦å‘æ—¶é’Ÿä¸­æ–­ï¼Œé€šè¿‡ä¸­æ–­å¤„ç†ï¼Œå®ç°ç³»ç»Ÿæ—¶é—´æ›´æ–°ï¼Œ å®šæ—¶å™¨è®¾ç½®ï¼Œå»¶æ—¶å¤„ç†ï¼Œ å­¦ä¹ ç¬”è®° https:&#47;&#47;garlicspace.com&#47;2019&#47;08&#47;04&#47;linuxå¦‚ä½•ç®¡ç†å’Œåº¦é‡æ—¶é—´&#47;","like_count":28,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461435,"discussion_content":"èµï¼Œå¾ˆç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566297089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99430,"user_name":"å…´æ–‡","can_delete":false,"product_type":"c1","uid":1197541,"ip_address":"","ucode":"A9F7F7E51E86B8","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/e5/163228b7.jpg","comment_is_top":false,"comment_ctime":1559212381,"is_pvip":false,"replies":[{"id":"49227","content":"tickä¼šä¸­æ–­ä»–çš„","user_name":"ä½œè€…å›å¤","comment_id":99430,"uid":"1001590","ip_address":"","utype":1,"ctime":1567604603,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":3,"race_medal":0,"score":"91753525597","product_id":100024701,"comment_content":"å¦‚æœç”¨æˆ·è¿›ç¨‹ä¸€ç›´åœ¨ç”¨æˆ·æ€æ‰§è¡Œï¼Œæ²¡æœ‰å‘ç”Ÿç³»ç»Ÿè°ƒç”¨å’Œä¸­æ–­ï¼Œå°±ä¸ä¼šè§¦å‘scheduleræ“ä½œï¼Œé‚£è¿™ä¸ªè¿›ç¨‹æ˜¯ä¸æ˜¯ä¸€ç›´å æœ‰CPUå•Šï¼Ÿ","like_count":22,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452106,"discussion_content":"tickä¼šä¸­æ–­ä»–çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567604603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1000076,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/8c/373d4027.jpg","nickname":"é¾è¦","note":"","ucode":"BE1D500833F070","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":543948,"discussion_content":"è€å¸ˆï¼Œè¿™ä¸ªé—®é¢˜å¥½åƒæ²¡æœ‰è§£é‡Šæ¸…æ¥šã€‚tickä¸­æ–­å®ƒï¼ŒæŒ‡çš„æ˜¯ä¸Šé¢æåˆ°çš„ä¸­æ–­å¤„ç†ç¨‹åºè¿”å›ç”¨æˆ·æ€è°ƒç”¨ scheduler() ?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641366452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":452106,"ip_address":""},"score":543948,"extra":""},{"author":{"id":2749565,"avatar":"https://static001.geekbang.org/account/avatar/00/29/f4/7d/9601abeb.jpg","nickname":"Shuyi Zhou","note":"","ucode":"0443B65D92868D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1000076,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/8c/373d4027.jpg","nickname":"é¾è¦","note":"","ucode":"BE1D500833F070","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":564351,"discussion_content":"æ—¶é’Ÿä¸­æ–­scheduler_tick()ï¼Œè¿™ä¸ªä¼šä¸€ç›´å‘ç”Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650218102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":543948,"ip_address":""},"score":564351,"extra":""}]}]},{"had_liked":false,"id":221164,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1590419406,"is_pvip":false,"replies":[{"id":"83065","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","comment_id":221164,"uid":"1001590","ip_address":"","utype":1,"ctime":1591784956,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":7,"race_medal":0,"score":"74604863438","product_id":100024701,"comment_content":"é’ˆå¯¹å¤§éƒ¨åˆ†ç•™è¨€è¯´å‡å¦‚æ²¡æœ‰ç³»ç»Ÿè°ƒç”¨ç­‰ï¼Œé‚£å²‚ä¸æ˜¯ä¼šæ­»å¾ªç¯è¿™ç±»é—®é¢˜ã€‚ç®€å•æ¥è¯´å°±æ˜¯å¦‚æœå‘ç”Ÿäº†ä¸­æ–­ï¼Œé‚£ä¹ˆå½“å‰è¿›ç¨‹è‚¯å®šä¼šé™·å…¥å†…æ ¸æ€ã€‚æ‰€ä»¥å¯èƒ½ä¼šæœ‰æ ‡è®°æ­¥éª¤å’ŒçœŸæ­£çš„æŠ¢å æ­¥éª¤ã€‚è¯¦ç»†ç‚¹æ¥è¯´ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨ CPU ä¸Šè¿è¡Œï¼Œå¦‚æœå‘ç”Ÿæ—¶é’Ÿä¸­æ–­ï¼Œé‚£ä¹ˆéœ€è¦å»å¤„ç†è¿™ä¸ªæ—¶é’Ÿä¸­æ–­ï¼Œä¹Ÿå°±æ˜¯ä¼šè°ƒç”¨ç›¸åº”çš„ä¸­æ–­å¤„ç†å‡½æ•°ï¼Œè€Œç›¸åº”çš„ä¸­æ–­å¤„ç†å‡½æ•°éœ€è¦åœ¨å†…æ ¸æ€ä¸‹æ‰§è¡Œï¼Œæ‰€ä»¥å½“å‰è¿›ç¨‹ä¼šé™·å…¥å†…æ ¸æ€ï¼Œç„¶åä¿å­˜ç”¨æˆ·æ€çš„æƒ…å†µï¼Œç„¶ååˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œæ ‡è®°ã€‚ç„¶åä¸­æ–­å‡½æ•°å¤„ç†å®Œä¹‹åï¼Œä¼šè¿”å›ç”¨æˆ·æ€ï¼Œè¿™ä¸ªæ—¶å€™åˆä¼šå‘ç”ŸæŠ¢å ã€‚","like_count":18,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496363,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591784956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2604257,"avatar":"https://static001.geekbang.org/account/avatar/00/27/bc/e1/7a39d6be.jpg","nickname":"è¶…è¶…è¶…ç»™åŠ›","note":"","ucode":"05FAA4361FAF63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552142,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645322748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1272730,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6b/9a/786b1ed8.jpg","nickname":"æœç²’æ©™","note":"","ucode":"000B15E28C68B6","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":398960,"discussion_content":"è§£ç­”äº†æˆ‘çš„ç–‘æƒ‘ï¼Œæ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632880626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1517457,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKkzrezV2dOBAgickt9DLzabz3dNFYyDEVXENMQ5ibrWhFbFqXIOia3ZaR21pozvB7UfoxJx4Ar688sA/132","nickname":"å¼€å¿ƒ","note":"","ucode":"C8E08E8724C7CE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379303,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623820507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547763,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/f3/3f6dd32b.jpg","nickname":"å¶ç´«çœŸ","note":"","ucode":"9CD7567FDB7F1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376103,"discussion_content":"ç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621956165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1262271,"avatar":"https://static001.geekbang.org/account/avatar/00/13/42/bf/8d366dd4.jpg","nickname":"æ³¢æ–¯ç ","note":"","ucode":"F8607AC2B1A37A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375310,"discussion_content":"è¯·é—®ä¸ºä»€ä¹ˆè¦å…ˆæ ‡è®°ï¼Œä¸­æ–­è¿”å›æ—¶ä¸€æ¬¡æ€§å¤„ç†ä¸é¦™å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621570784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1547763,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/f3/3f6dd32b.jpg","nickname":"å¶ç´«çœŸ","note":"","ucode":"9CD7567FDB7F1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1262271,"avatar":"https://static001.geekbang.org/account/avatar/00/13/42/bf/8d366dd4.jpg","nickname":"æ³¢æ–¯ç ","note":"","ucode":"F8607AC2B1A37A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376105,"discussion_content":"å°å“¥ï¼Œä»£ç è¦åˆ†å±‚ï¼Œä»»åŠ¡è¦åˆ†æ¸…æ¥šï¼Œä¸€ä¸ªæ˜¯ä»»åŠ¡çš„å‘å¸ƒè€…ï¼Œå¦ä¸€ä¸ªæ˜¯ä»»åŠ¡çš„æ¶ˆè´¹è€…ï¼ˆæ‰§è¡Œè€…ï¼‰ï¼Œå†™ä»£ç è¦è€ƒè™‘å¾ˆå¤šä¸œè¥¿ï¼Œåæ­£ä½ è¯´çš„é‚£ç§æ–¹å¼ä¸€å®šæ˜¯å¾ˆå·®åŠ²çš„","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1621956256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375310,"ip_address":""},"score":376105,"extra":""}]}]},{"had_liked":false,"id":108935,"user_name":"å«æ±Ÿ","can_delete":false,"product_type":"c1","uid":1101226,"ip_address":"","ucode":"DE2F7A6916F1A9","user_header":"https://static001.geekbang.org/account/avatar/00/10/cd/aa/33d48789.jpg","comment_is_top":false,"comment_ctime":1561940019,"is_pvip":false,"replies":[{"id":"39606","content":"åé¢æœ‰ä¸“é—¨çš„èŠ‚è®²ä¸­æ–­ï¼Œåˆ°æ—¶å€™å›æ¥çœ‹ï¼Œå°±å¯¹ä¸Šäº†ã€‚ä¸­æ–­çš„å¤„ç†æ˜¯åœ¨å†…æ ¸é‡Œé¢çš„ï¼Œç”¨ä¸åˆ°è¿›ç¨‹çš„ç”¨æˆ·æ ˆã€‚å½“cpuæ”¶åˆ°ä¸­æ–­çš„æ—¶å€™ï¼Œå°±ä¼šåœæ­¢å½“ç„¶æŒ‡ä»¤çš„è¿è¡Œï¼Œå»è°ƒç”¨å†…æ ¸ä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•°ã€‚åº”ç”¨å†æ€ä¹ˆæ­»å¾ªç¯ï¼Œå†…æ ¸é‡Œé¢è¯´æŠŠä»–æ‹¿ä¸‹æ¥ï¼Œä¸å°±æ‹¿ä¸‹æ¥äº†å—ã€‚","user_name":"ä½œè€…å›å¤","comment_id":108935,"uid":"1001590","ip_address":"","utype":1,"ctime":1562031550,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":3,"race_medal":0,"score":"65986449459","product_id":100024701,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹ï¼Œä¸­æ–­å¤„ç†ç¨‹åºåˆ°åº•æ˜¯ç”±è°è°ƒç”¨çš„ï¼Œè€Œä¸”ä¸€åˆ‡å‡½æ•°è°ƒç”¨è‚¯å®šéœ€è¦æ ˆï¼Œé‚£ä¸­æ–­åœ¨å“ªä¸ªæ ˆä¸Šé¢æ‰§è¡Œï¼Œå¦‚æœåœ¨ä¸€ä¸ªå•æ ¸çš„è®¡ç®—æœºä¸Šé¢ï¼Œæœ‰ä¸€ä¸ªè¿›ç¨‹å¤„äºç”¨æˆ·æ€æ­»å¾ªç¯ï¼Œæ²¡æœ‰è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™å‘ç”Ÿäº†æ—¶é—´ä¸­æ–­ï¼Œå†…æ ¸æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Œæ€ä¹ˆæ‰“æ–­å½“å‰çš„è¿›ç¨‹ï¼Œä»è€Œå¯èƒ½å½±å“è°ƒåº¦ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456173,"discussion_content":"åé¢æœ‰ä¸“é—¨çš„èŠ‚è®²ä¸­æ–­ï¼Œåˆ°æ—¶å€™å›æ¥çœ‹ï¼Œå°±å¯¹ä¸Šäº†ã€‚ä¸­æ–­çš„å¤„ç†æ˜¯åœ¨å†…æ ¸é‡Œé¢çš„ï¼Œç”¨ä¸åˆ°è¿›ç¨‹çš„ç”¨æˆ·æ ˆã€‚å½“cpuæ”¶åˆ°ä¸­æ–­çš„æ—¶å€™ï¼Œå°±ä¼šåœæ­¢å½“ç„¶æŒ‡ä»¤çš„è¿è¡Œï¼Œå»è°ƒç”¨å†…æ ¸ä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•°ã€‚åº”ç”¨å†æ€ä¹ˆæ­»å¾ªç¯ï¼Œå†…æ ¸é‡Œé¢è¯´æŠŠä»–æ‹¿ä¸‹æ¥ï¼Œä¸å°±æ‹¿ä¸‹æ¥äº†å—ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562031550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1067570,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/32/23db38ab.jpg","nickname":"Sunny","note":"","ucode":"FE57B69A9CF91D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379497,"discussion_content":"åˆšæƒ³åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå°±æ‰¾åˆ°ç­”æ¡ˆäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623929966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1019244,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/6c/0c2a26c7.jpg","nickname":"clip","note":"","ucode":"D0E142605A5BD5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1067570,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4a/32/23db38ab.jpg","nickname":"Sunny","note":"","ucode":"FE57B69A9CF91D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548389,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643175442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":379497,"ip_address":""},"score":548389,"extra":""}]}]},{"had_liked":false,"id":105322,"user_name":"zhouzg","can_delete":false,"product_type":"c1","uid":1060614,"ip_address":"","ucode":"40C8A4E115A5AE","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/06/aabd37b4.jpg","comment_is_top":false,"comment_ctime":1560969106,"is_pvip":false,"replies":[{"id":"49007","content":"ç‰›","user_name":"ä½œè€…å›å¤","comment_id":105322,"uid":"1001590","ip_address":"","utype":1,"ctime":1567579492,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"48805609362","product_id":100024701,"comment_content":"çœ‹ã€Šè®¡ç®—å™¨æ˜¯æ€æ ·è·‘èµ·æ¥çš„ã€‹ä¹¦ä¸­æœ‰Z80çš„ç”µè·¯å›¾ï¼Œé‡Œé¢æœ‰ä»‹ç»æ—¶é’Ÿå‘ç”Ÿå™¨ï¼Œå®ƒä¼šæŠŠç”µæµä¿¡å·åˆ‡å‰²æˆå•ä½ï¼Œè¿™æ ·å°±å¯ä»¥åº¦é‡å’Œç®¡ç†æ—¶é’Ÿäº†å§ï¼Ÿ","like_count":12,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454633,"discussion_content":"ç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567579492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92105,"user_name":"ç„°ç«","can_delete":false,"product_type":"c1","uid":1244606,"ip_address":"","ucode":"D3353B386DE3B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/fd/be/079c78c7.jpg","comment_is_top":false,"comment_ctime":1557189107,"is_pvip":true,"replies":[{"id":"49463","content":"ä¸èƒ½æŠŠè°ƒåº¦ç³»ç»Ÿæƒ³è±¡æˆä¸€ä¸ªè¿›ç¨‹ï¼Œä»–æ˜¯ç®¡å®¶ï¼Œä¸æ˜¯å¹²æ´»çš„ã€‚ä¸å­˜åœ¨ä»–å’Œåˆ«äººä¸€èµ·ç«äº‰çš„äº‹æƒ…ï¼Œä»–æƒ³æŠŠè°ä»cpuä¸Šæ‹¿ä¸‹æ¥ï¼Œå°±èƒ½æ‹¿ä¸‹æ¥ï¼Œä»–åªè¦ä¸€æ”¹æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼Œå°±èƒ½æ‹¿ä¸‹æ¥","user_name":"ä½œè€…å›å¤","comment_id":92105,"uid":"1001590","ip_address":"","utype":1,"ctime":1567672129,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":3,"race_medal":0,"score":"31621960179","product_id":100024701,"comment_content":"è¿›ç¨‹è°ƒåº¦ç¬¬ä¸€å®šå¾‹æ€»ç»“çš„å¤ªæ£’äº†ã€‚   <br><br>å¦å¤–æœ‰ä¸ªé—®é¢˜æƒ³é—®ä¸‹è€å¸ˆï¼šæˆ‘æŠŠæ•´ä¸ªè°ƒåº¦ç³»ç»Ÿæƒ³æˆä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªè°ƒåº¦è¿›ç¨‹æ¥å®ç°taskè°ƒåº¦ï¼Ÿ å¦‚æœæ˜¯è¿™æ ·çš„ï¼ŒLinuxå¦‚æœè·‘åœ¨å•CPUä¸Šï¼Œå¤šè¿›ç¨‹æ˜¯æ€ä¹ˆè°ƒåº¦çš„å‘¢ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449149,"discussion_content":"ä¸èƒ½æŠŠè°ƒåº¦ç³»ç»Ÿæƒ³è±¡æˆä¸€ä¸ªè¿›ç¨‹ï¼Œä»–æ˜¯ç®¡å®¶ï¼Œä¸æ˜¯å¹²æ´»çš„ã€‚ä¸å­˜åœ¨ä»–å’Œåˆ«äººä¸€èµ·ç«äº‰çš„äº‹æƒ…ï¼Œä»–æƒ³æŠŠè°ä»cpuä¸Šæ‹¿ä¸‹æ¥ï¼Œå°±èƒ½æ‹¿ä¸‹æ¥ï¼Œä»–åªè¦ä¸€æ”¹æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼Œå°±èƒ½æ‹¿ä¸‹æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567672129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004183,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/97/4593cda8.jpg","nickname":"MC","note":"","ucode":"AA0035C9C43516","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159590,"discussion_content":"å…³é”®åœ¨äºè®¡ç®—æœºä¸­æ–­æœºåˆ¶çš„å­˜åœ¨ã€‚æ“ä½œç³»ç»Ÿå¯ä»¥æ³¨å†Œä¸­æ–­å¤„ç†ç¨‹åºï¼Œå½“ç¡¬ä»¶æ—¶é’Ÿè§¦å‘ä¸­æ–­æ—¶ï¼ŒCPUä¼šå»æ‰§è¡Œæ“ä½œç³»ç»Ÿæ³¨å†Œçš„ç‰¹å®šç¨‹åºã€‚å¯ä»¥ç†è§£ä¸ºæ“ä½œç³»ç»Ÿé€šè¿‡è¿™ç§æ–¹å¼å–å›CPUèµ„æºä¸€ä¼šä¼šç”¨æ¥è°ƒåº¦ç¨‹åºã€‚ä¸çŸ¥é“æˆ‘çš„ç†è§£æ˜¯å¦æœ‰è¯¯ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1580711259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1131300,"avatar":"https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg","nickname":"zixuan","note":"","ucode":"C72920DD05B074","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587870,"discussion_content":"æ˜¯çš„ï¼Œç›¸å½“äºæœ‰å¤–éƒ¨å¹²é¢„æ¥å¼ºåˆ¶ä¿éšœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663327839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206979,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1586967612,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23061804092","product_id":100024701,"comment_content":"åˆ˜è€å¸ˆï¼š<br>æ‚¨åœ¨æ–‡ä¸­æåˆ°ï¼š<br>æ£€æŸ¥æ˜¯å¦æ˜¯æ—¶å€™è¢«æŠ¢å çš„å‡½æ•°è°ƒç”¨ï¼šcheck_preempt_tickï¼Œå…¶ä¸­è¯´åˆ°ï¼š<br>â€œideal_runtime æ˜¯ä¸€ä¸ªè°ƒåº¦å‘¨æœŸä¸­ï¼Œè¯¥è¿›ç¨‹è¿è¡Œçš„å®é™…æ—¶é—´ã€‚â€œ<br>ä»å­—é¢æ„æ€çœ‹ä¼¼ä¹åå®ä¸ç¬¦ã€‚æˆ‘æŸ¥åˆ°çš„ä¸€äº›èµ„æ–™å¤šè§£é‡Šä¸ºâ€œtypical time slice&quot;æˆ–è€…â€œtarget effortâ€ã€‚<br>æˆ‘ä¹Ÿç²—ç•¥æµè§ˆäº†ä¸€ä¸‹sched_sliceæ–¹æ³•çš„å®ç°ï¼Œä¼¼ä¹æ˜¯é€šè¿‡rq.load,entity.loadç­‰å‚æ•°è®¡ç®—å‡ºæ¥ä¸€ä¸ªé¢„æœŸçš„å·¥ä½œæ—¶é•¿ã€‚<br>æ‚¨çœ‹æ˜¯ä¸æ˜¯åº”è¯¥æ”¹æˆï¼šâ€œideal_runtime æ˜¯ä¸€ä¸ªè°ƒåº¦å‘¨æœŸä¸­ï¼Œè¯¥è¿›ç¨‹é¢„æœŸçš„è¿è¡Œåˆ†é…æ—¶é—´â€ä¸ºå®œï¼Ÿ","like_count":6},{"had_liked":false,"id":137504,"user_name":"JT","can_delete":false,"product_type":"c1","uid":1489942,"ip_address":"","ucode":"36D71949F34FD9","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/16/5ce59343.jpg","comment_is_top":false,"comment_ctime":1569755804,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"18749624988","product_id":100024701,"comment_content":"è€å¸ˆä½ è®²å¾—å¤ªå¥½äº†ï¼Œæ¸…æ¥šæ˜“æ‡‚ï¼Œæˆ‘è‡ªå·±çœ‹äº†ã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç°ã€‹ï¼Œç„¶åæ¥ç€çœ‹ã€Šæ·±å…¥Linuxå†…æ ¸ã€‹ï¼Œå‰å‰ååå°è¯•çœ‹äº†å‡ éï¼Œä½†å‘ç°æ€ä¹ˆä¹Ÿå•ƒä¸ä¸‹ã€‚çœ‹ä½ çš„è¯¾ï¼Œç„¶åæ€»ç»“ï¼Œæœ‰äº†æ€»ä½“æ€è·¯åï¼Œå†è‡ªå·±é˜…è¯»å†…æ ¸ä»£ç ï¼Œæ”¶è·çœŸçš„æ˜¯å¤ªå¤§äº†","like_count":4,"discussions":[{"author":{"id":1299347,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d3/93/c3fb8566.jpg","nickname":"ProcessIsTheKey","note":"","ucode":"BE02EFD75F7D98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375933,"discussion_content":"ä½©æœä½ ä»¬è¿™äº›èƒ½çœ‹æ‡‚çš„ï¼Œå‘œå‘œå‘œ","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1621872730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2423785,"avatar":"https://static001.geekbang.org/account/avatar/00/24/fb/e9/5445da3e.jpg","nickname":"helloï¼Œworld","note":"","ucode":"0106B9567CD1C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352030,"discussion_content":"è€å¸ˆçš„è¯¾ç¨‹æçº²æŒˆé¢†çš„æ€»ç»“æ¯”è¾ƒå¤šï¼Œå…¶ä»–é‚£äº›ä¹¦ç»†ææœ«èŠ‚å®ç°ä»£ç æ¯”è¾ƒå¤š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614579742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","nickname":"å¤šé€‰å‚æ•°","note":"","ucode":"B2294D80AB075F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273217,"discussion_content":"æ„Ÿè§‰è€å¸ˆè¿™é—¨è¯¾ç»†èŠ‚ä¸Šä¸å¤ªå¤šï¼Œä½†æ˜¯æœ‰ç‚¹å°±æ˜¯èƒ½è®©æˆ‘ä»¬ä¸²èµ·æ¥ï¼Œç‰¹åˆ«æ˜¯çœ‹è¿‡å…¶ä»–ä¹¦ç±ä¹‹åã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590419769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91998,"user_name":"äºŒæ˜Ÿçƒ","can_delete":false,"product_type":"c1","uid":1111552,"ip_address":"","ucode":"89EC5FEB98E7CE","user_header":"https://static001.geekbang.org/account/avatar/00/10/f6/00/2a248fd8.jpg","comment_is_top":false,"comment_ctime":1557151246,"is_pvip":false,"replies":[{"id":"49467","content":"æœ‰çš„ï¼Œçœ‹åé¢å®è·µç¯èŠ‚","user_name":"ä½œè€…å›å¤","comment_id":91998,"uid":"1001590","ip_address":"","utype":1,"ctime":1567672193,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"18737020430","product_id":100024701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘å–œæ¬¢è¾¹è°ƒè¯•è¾¹é˜…è¯»ä»£ç ï¼Œä»£ç æ˜¯æ­»çš„ä½†æ˜¯è·‘èµ·æ¥æ˜¯æ´»çš„å˜çš„ï¼Œlinuxå†…æ ¸ä»£ç æœ‰æ²¡æœ‰å¥½çš„è°ƒè¯•æ–¹å¼ï¼Œæˆ–è€…æ·»åŠ æ‰“å°æ—¥å¿—çš„æ–¹å¼ï¼›å¦å¤–æ—¶é’Ÿä¸­æ–­æ˜¯æ€ä¹ˆè§¦å‘çš„å‘¢ï¼Œæˆ‘è®°å¾—cpué‡Œé¢æ²¡æœ‰æ—¶é’Ÿè¿™ä¸ªç‰©ç†è®¾å¤‡çš„ï¼Œåº”è¯¥æœ‰ç±»ä¼¼å•ç‰‡æœºæ™¶æŒ¯è¿™ä¸ªä¸œè¥¿å»æ— é™å¾ªç¯æ‰§è¡ŒæŒ‡ä»¤çš„ï¼Œè¿™ä¸ªä¹Ÿä¸ä¼šæœ‰æ—¶é’Ÿä¸­æ–­å‘€","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449106,"discussion_content":"æœ‰çš„ï¼Œçœ‹åé¢å®è·µç¯èŠ‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567672193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226523,"user_name":"è¹¦å“’","can_delete":false,"product_type":"c1","uid":1458931,"ip_address":"","ucode":"56591A657DE7C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epcs6PibsP9vEXv4EibUw3bhQPUK04zRTOvfrvF08TwM67xPb1LBh2uRENHQwo2VqYfC5GhJmM7icxHA/132","comment_is_top":false,"comment_ctime":1592128007,"is_pvip":false,"replies":[{"id":"83453","content":"èä¼šè´¯é€š","user_name":"ä½œè€…å›å¤","comment_id":226523,"uid":"1001590","ip_address":"","utype":1,"ctime":1592185755,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"14477029895","product_id":100024701,"comment_content":"â€œè¿›ç¨‹è°ƒåº¦ç¬¬ä¸€å®šå¾‹â€ï¼Œä»¥åŠåœ¨å†…æ ¸ä¸­è¿›ç¨‹å’Œçº¿ç¨‹ç»Ÿä¸€ç”¨task_structè¡¨ç¤ºï¼Œè®©æˆ‘æƒ³èµ·äº†ä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼šç»„åˆæ¨¡å¼ï¼ˆComposite Design Patternï¼‰","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498275,"discussion_content":"èä¼šè´¯é€š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592185755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224651,"user_name":"liu-dan","can_delete":false,"product_type":"c1","uid":1238826,"ip_address":"","ucode":"8CBDF8A2D9E2F9","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2a/7d9ecf15.jpg","comment_is_top":false,"comment_ctime":1591497368,"is_pvip":false,"replies":[{"id":"83000","content":"ä¸€å¥æ›´å®¹æ˜“ç†è§£èƒœè¿‡åƒè¨€ä¸‡è¯­ï¼Œè°¢è°¢","user_name":"ä½œè€…å›å¤","comment_id":224651,"uid":"1001590","ip_address":"","utype":1,"ctime":1591752639,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"10181431960","product_id":100024701,"comment_content":"çœ‹äº†å¥½å‡ éï¼Œæ„Ÿè§‰æ…¢æ…¢èƒ½ä¸²è”èµ·æ¥ï¼Œè™½ç„¶ä¸å¦‚ç»å…¸çš„kernelä¹¦ç±ä¸¥è°¨å’Œå…¨é¢ï¼Œä½†æ˜¯æ›´å®¹æ˜“ç†è§£ï¼Œè®²çš„ç¡®å®å¾ˆä¸é”™ï¼Œå¾ˆå—ç”¨ï¼Œæ„Ÿè°¢è€å¸ˆï¼","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497554,"discussion_content":"ä¸€å¥æ›´å®¹æ˜“ç†è§£èƒœè¿‡åƒè¨€ä¸‡è¯­ï¼Œè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591752639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91817,"user_name":"MARK","can_delete":false,"product_type":"c1","uid":1126900,"ip_address":"","ucode":"9F429C9C5FEE6A","user_header":"https://static001.geekbang.org/account/avatar/00/11/31/f4/467cf5d7.jpg","comment_is_top":false,"comment_ctime":1557114041,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10147048633","product_id":100024701,"comment_content":"Linuxå†…æ ¸é€šè¿‡æ—¶é’Ÿä¸­æ–­ç®¡ç†å’Œåº¦é‡æ—¶é—´.<br>Linuxåœ¨åˆå§‹åŒ–æ—¶ä¼šä½¿ç”¨ä¸€ä¸ªinit_IRQ()å‡½æ•°è®¾å®šå®šæ—¶å‘¨æœŸ(IRQ:Interrupt Request)ï¼Œtime_init()ä¸­è°ƒç”¨setup_irq()è®¾ç½®æ—¶é—´ä¸­æ–­å‘é‡irq 0ï¼›ä¸­æ–­æœåŠ¡ç¨‹åºæ˜¯timer_interrupt()ï¼Œä¼šè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°do_timer_interrupt(),do_timer_interruptè¿˜ä¼šè°ƒç”¨do_timeræ›´æ–°ç³»ç»Ÿæ—¶é—´ã€‚do_timerä¸­çš„å·¥ä½œåŒ…æ‹¬ï¼Œè®©å…¨å±€å˜é‡jiffieså¢åŠ 1ï¼Œå¹¶ä¸”è°ƒç”¨update_process_timesæ¥æ›´æ–°è¿›ç¨‹çš„æ—¶é—´ç‰‡ä»¥åŠä¿®æ”¹è¿›ç¨‹çš„åŠ¨æ€ä¼˜å…ˆçº§...<br>æœç´¢çš„ä¸€ç‚¹ä¿¡æ¯ï¼ŒæœŸå¾…è€å¸ˆçš„è¯¦ç»†è®²è§£^_^","like_count":2},{"had_liked":false,"id":241879,"user_name":"ç›¸é€¢æ˜¯ç¼˜","can_delete":false,"product_type":"c1","uid":1060730,"ip_address":"","ucode":"CB299F53A95654","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/7a/ab6c811c.jpg","comment_is_top":false,"comment_ctime":1597485008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5892452304","product_id":100024701,"comment_content":"æŠ¢å å¼è°ƒåº¦<br>åœ¨è®¡ç®—æœºé‡Œé¢æœ‰ä¸€ä¸ªæ—¶é’Ÿï¼Œä¼šè¿‡ä¸€æ®µæ—¶é—´è§¦å‘ä¸€æ¬¡æ—¶é’Ÿä¸­æ–­ï¼Œé€šçŸ¥æ“ä½œç³»ç»Ÿï¼Œæ—¶é—´åˆè¿‡å»ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œè¿™æ˜¯ä¸ªå¾ˆå¥½çš„æ–¹å¼ï¼Œå¯ä»¥æŸ¥çœ‹æ˜¯å¦æ˜¯éœ€è¦æŠ¢å çš„æ—¶é—´ç‚¹<br>ä¸€ã€æ—¶é’Ÿä¸­æ–­å¤„ç†å‡½æ•°ä¼šè°ƒç”¨ scheduler_tick()<br>---è¿™ä¸ªå‡½æ•°å–å‡ºå½“å‰ CPU çš„è¿è¡Œé˜Ÿåˆ—ï¼Œç„¶åå¾—åˆ°è¿™ä¸ªé˜Ÿåˆ—ä¸Šå½“å‰æ­£åœ¨è¿è¡Œä¸­çš„è¿›ç¨‹çš„ task_structï¼Œç„¶åè°ƒç”¨è¿™ä¸ª task_struct çš„è°ƒåº¦ç±»çš„ task_tick å‡½æ•°ï¼›<br>---å¦‚æœä¸ºæ™®é€šè¿›ç¨‹ï¼Œè°ƒåº¦ç±»ä¸º fair_sched_classï¼Œè°ƒç”¨çš„å¤„ç†æ—¶é’Ÿçš„å‡½æ•°ä¸º task_tick_fair<br>---æ ¹æ®ä»–å½“å‰task_structï¼Œæ‰¾åˆ°å¯¹åº”çš„è°ƒåº¦å®ä½“ sched_entity å’Œ cfs_rq é˜Ÿåˆ—ï¼Œè°ƒç”¨ entity_tick<br>---entity_tick é‡Œé¢ï¼Œæ›´æ–°å½“å‰è¿›ç¨‹çš„ vruntimeï¼Œç„¶åè°ƒç”¨ check_preempt_tickï¼Œæ£€æŸ¥æ˜¯å¦æ˜¯æ—¶å€™è¢«æŠ¢å äº†<br>---æŠ¢å çš„ä¸¤ä¸ªæ¡ä»¶ï¼š<br>1ã€æ‰€ä»¥ sum_exec_runtime-prev_sum_exec_runtime å°±æ˜¯è¿™æ¬¡è°ƒåº¦å ç”¨å®é™…æ—¶é—´ã€‚å¦‚æœè¿™ä¸ªæ—¶é—´å¤§äº ideal_runtimeï¼Œåˆ™åº”è¯¥è¢«æŠ¢å äº†ï¼›<br>2ã€è¿˜ä¼šé€šè¿‡ __pick_first_entity å–å‡ºçº¢é»‘æ ‘ä¸­æœ€å°çš„è¿›ç¨‹ã€‚å¦‚æœå½“å‰è¿›ç¨‹çš„ vruntime å¤§äºçº¢é»‘æ ‘ä¸­æœ€å°çš„è¿›ç¨‹çš„ vruntimeï¼Œä¸”å·®å€¼å¤§äº ideal_runtimeï¼Œä¹Ÿåº”è¯¥è¢«æŠ¢å äº†ï¼›<br>---ç°å½“å‰è¿›ç¨‹åº”è¯¥è¢«æŠ¢å ï¼Œä¸èƒ½ç›´æ¥æŠŠå®ƒè¸¢ä¸‹æ¥ï¼Œè€Œæ˜¯æŠŠå®ƒæ ‡è®°ä¸ºåº”è¯¥è¢«æŠ¢å ï¼Œè€Œæ˜¯æ‰“ä¸Šä¸€ä¸ªæ ‡ç­¾ TIF_NEED_RESCHED<br>äºŒã€ä¸€ä¸ªå¯èƒ½æŠ¢å çš„åœºæ™¯æ˜¯å½“ä¸€ä¸ªè¿›ç¨‹è¢«å”¤é†’çš„æ—¶å€™<br>---ä½†æ˜¯å½“ I&#47;O åˆ°æ¥çš„æ—¶å€™ï¼Œè¿›ç¨‹å¾€å¾€ä¼šè¢«å”¤é†’ã€‚è¿™ä¸ªæ—¶å€™æ˜¯ä¸€ä¸ªæ—¶æœºã€‚å½“è¢«å”¤é†’çš„è¿›ç¨‹ä¼˜å…ˆçº§é«˜äº CPU ä¸Šçš„å½“å‰è¿›ç¨‹ï¼Œå°±ä¼šè§¦å‘æŠ¢å <br>---try_to_wake_up() è°ƒç”¨ ttwu_queue å°†è¿™ä¸ªå”¤é†’çš„ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—å½“ä¸­ã€‚ttwu_queue å†è°ƒç”¨ ttwu_do_activate æ¿€æ´»è¿™ä¸ªä»»åŠ¡ã€‚ttwu_do_activate è°ƒç”¨ ttwu_do_wakeupã€‚è¿™é‡Œé¢è°ƒç”¨äº† check_preempt_curr æ£€æŸ¥æ˜¯å¦åº”è¯¥å‘ç”ŸæŠ¢å ã€‚å¦‚æœåº”è¯¥å‘ç”ŸæŠ¢å ï¼Œä¹Ÿä¸æ˜¯ç›´æ¥è¸¢èµ°å½“å‰è¿›ç¨‹ï¼Œè€Œæ˜¯å°†å½“å‰è¿›ç¨‹æ ‡è®°ä¸ºåº”è¯¥è¢«æŠ¢å <br><br><br>æŠ¢å çš„æ—¶æœºï¼š<br>ç”¨æˆ·æ€çš„æŠ¢å æ—¶æœºï¼š<br>---ä»ç³»ç»Ÿè°ƒç”¨ä¸­è¿”å›çš„é‚£ä¸ªæ—¶åˆ»ï¼Œæ˜¯ä¸€ä¸ªè¢«æŠ¢å çš„æ—¶æœºï¼›<br>do_syscall_64-&gt;syscall_return_slowpath-&gt;prepare_exit_to_usermode-&gt;exit_to_usermode_loop<br> if (cached_flags &amp; _TIF_NEED_RESCHED)      schedule();<br>---ä»ä¸­æ–­ä¸­è¿”å›çš„é‚£ä¸ªæ—¶åˆ»ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè¢«æŠ¢å çš„æ—¶æœº<br>ä¸­æ–­å¤„ç†è°ƒç”¨çš„æ˜¯ do_IRQ å‡½æ•°ï¼Œä¸­æ–­å®Œæ¯•ååˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ä¸ªæ˜¯è¿”å›ç”¨æˆ·æ€ï¼Œä¸€ä¸ªæ˜¯è¿”å›å†…æ ¸æ€,retint_user ä¼šè°ƒç”¨ prepare_exit_to_usermodeï¼Œæœ€ç»ˆè°ƒç”¨ exit_to_usermode_loop,ä¹‹åå°±å’Œç³»ç»Ÿè°ƒç”¨ä¸€æ ·<br>å†…æ ¸æ€çš„æŠ¢å æ—¶æœºï¼š<br>---åœ¨å†…æ ¸æ€çš„æ‰§è¡Œä¸­ï¼Œæœ‰çš„æ“ä½œæ˜¯ä¸èƒ½è¢«ä¸­æ–­çš„ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œè¿™äº›æ“ä½œä¹‹å‰ï¼Œæ€»æ˜¯å…ˆè°ƒç”¨ preempt_disable() å…³é—­æŠ¢å ï¼Œå½“å†æ¬¡æ‰“å¼€çš„æ—¶å€™ï¼Œå°±æ˜¯ä¸€æ¬¡å†…æ ¸æ€ä»£ç è¢«æŠ¢å çš„æœºä¼šï¼›<br>eempt_enable() ä¼šè°ƒç”¨ preempt_count_dec_and_test()ï¼Œåˆ¤æ–­ preempt_count å’Œ TIF_NEED_RESCHED æ˜¯å¦å¯ä»¥è¢«æŠ¢å ã€‚å¦‚æœå¯ä»¥ï¼Œå°±è°ƒç”¨ preempt_schedule-&gt;preempt_schedule_common-&gt;__schedule è¿›è¡Œè°ƒåº¦<br>---åœ¨å†…æ ¸æ€ä¹Ÿä¼šé‡åˆ°ä¸­æ–­çš„æƒ…å†µï¼Œå½“ä¸­æ–­è¿”å›çš„æ—¶å€™ï¼Œè¿”å›çš„ä»ç„¶æ˜¯å†…æ ¸æ€ã€‚","like_count":1},{"had_liked":false,"id":191958,"user_name":"æœ‰ç±³","can_delete":false,"product_type":"c1","uid":1005042,"ip_address":"","ucode":"C9A10B7A67BC12","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/f2/ba68d931.jpg","comment_is_top":false,"comment_ctime":1584805856,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5879773152","product_id":100024701,"comment_content":"æ ‡è®°-æ¸…ç†ã€‚jvmå›æ”¶å†…å­˜çš„æ–¹æ³•ä¹‹ä¸€ã€‚çœ‹æ¥éƒ½æ˜¯ç›¸é€šçš„","like_count":1},{"had_liked":false,"id":160134,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1575876826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5870844122","product_id":100024701,"comment_content":"æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œæœ€ç®€åŒ–ä¹‹åï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå¤§å¾ªç¯ï¼Œé€šè¿‡å„ç§ä¸­æ–­ï¼Œå°¤å…¶æ˜¯æ—¶é’Ÿçš„ä¸­æ–­æ¥æ¨åŠ¨å†…æ ¸çš„è¿è¡Œï¼Œç›´åˆ°æ”¶åˆ°é€€å‡ºä¿¡å·ä¸ºæ­¢ã€‚<br><br>ä»Šå¤©å¯¹äºâ€œæŠ¢å å¼è°ƒåº¦â€ï¼Œæœ‰äº†è¿›ä¸€æ­¥çš„ç†è§£ï¼šâ€œæŠ¢å â€ä»ç„¶æ˜¯å†…æ ¸å¸®å„ä¸ªè¿›ç¨‹æŠ¢ï¼Œè€Œä¸æ˜¯æƒ³è·å–CPUæ—¶é—´çš„è¿›ç¨‹è‡ªå·±æŠ¢çš„ï¼Œæƒ³è·å–CPUæ—¶é—´çš„è¿›ç¨‹ï¼Œåªèƒ½é‡‡å–æŠŠè‡ªå·±çš„è¿›ç¨‹ä¼˜å…ˆçº§è°ƒé«˜çš„æ–¹å¼ï¼Œè®©è‡ªå·±æ’é˜Ÿé å‰è€Œå·²ã€‚è¯´ç™½äº†ï¼Œå†…æ ¸åªæ˜¯ç”¨äº†ä¸€ç§æ›´åˆç†çš„æ–¹å¼ï¼Œæ¥æ›´å¥½çš„å®‰æ’CPUè¿è¡Œæ—¶é—´ï¼Œé˜²æ­¢é¥¥é¥¿å’Œéœ¸å CPUèµ„æºã€‚è€Œè¿™ä¸€åˆ‡éƒ½æ˜¯åœ¨å†…æ ¸é‡Œå®Œæˆçš„ï¼Œç”¨æˆ·è¿›ç¨‹æƒ³è·å–CPUå’Œè®©æ¸¡CPUéƒ½æ˜¯è¦é å†…æ ¸æ€ã€‚","like_count":2},{"had_liked":false,"id":94908,"user_name":"wwj","can_delete":false,"product_type":"c1","uid":1053787,"ip_address":"","ucode":"B98AE5F5D85A87","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLzvaL724GwtzZ5mcldUnlicicSlI8BXL9icRZbUOB10qjRMlmog7UTvwxSBHXagnPGGR1BYdjWcGGSg/132","comment_is_top":false,"comment_ctime":1557919933,"is_pvip":false,"replies":[{"id":"34100","content":"ç‰©ç†å†…å­˜çš„ç®¡ç†ç¨‹åºä¹Ÿæ˜¯ç¨‹åºï¼Œä¹Ÿåˆ†ä»£ç éƒ¨åˆ†å’Œæ•°æ®éƒ¨åˆ†ï¼Œä»£ç éƒ¨åˆ†å½“ç„¶åœ¨å†…æ ¸ä»£ç æ®µé‡Œé¢äº†ï¼Œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™å°±åŠ è½½äº†ã€‚æ•°æ®éƒ¨åˆ†å¤§éƒ¨åˆ†åˆ†é…åœ¨ç›´æ¥æ˜ å°„åŒºï¼Œä¹Ÿä¼šåˆ†é…é¡µè¡¨ï¼Œé¡µè¡¨åœ¨å“ªé‡Œå‘¢ï¼Ÿé¡µè¡¨çš„æ ¹åœ¨ä»£ç æ®µçš„é‚£ä¸ªåŒºåŸŸé‡Œé¢ã€‚","user_name":"ä½œè€…å›å¤","comment_id":94908,"uid":"1001590","ip_address":"","utype":1,"ctime":1558068041,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"5852887229","product_id":100024701,"comment_content":"ç‰©ç†å†…å­˜ç»Ÿä¸€ç®¡ç† æœ¬èº«ä¹Ÿæ˜¯ç¨‹åº ä»–çš„å†…å­˜å¦‚ä½•ç®¡ç†","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450256,"discussion_content":"ç‰©ç†å†…å­˜çš„ç®¡ç†ç¨‹åºä¹Ÿæ˜¯ç¨‹åºï¼Œä¹Ÿåˆ†ä»£ç éƒ¨åˆ†å’Œæ•°æ®éƒ¨åˆ†ï¼Œä»£ç éƒ¨åˆ†å½“ç„¶åœ¨å†…æ ¸ä»£ç æ®µé‡Œé¢äº†ï¼Œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™å°±åŠ è½½äº†ã€‚æ•°æ®éƒ¨åˆ†å¤§éƒ¨åˆ†åˆ†é…åœ¨ç›´æ¥æ˜ å°„åŒºï¼Œä¹Ÿä¼šåˆ†é…é¡µè¡¨ï¼Œé¡µè¡¨åœ¨å“ªé‡Œå‘¢ï¼Ÿé¡µè¡¨çš„æ ¹åœ¨ä»£ç æ®µçš„é‚£ä¸ªåŒºåŸŸé‡Œé¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558068041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336637,"user_name":"ç™½é›²åŸä¸»","can_delete":false,"product_type":"c1","uid":2929240,"ip_address":"","ucode":"5A339657AC7A25","user_header":"https://static001.geekbang.org/account/avatar/00/2c/b2/58/e842dbd9.jpg","comment_is_top":false,"comment_ctime":1646269951,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646269951","product_id":100024701,"comment_content":"è€å¸ˆï¼Œå’¨è¯¢ä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æˆ‘çš„TICK é…ç½®çš„250ï¼Œä¹Ÿå°±æ˜¯æ¯ 4ms è°ƒç”¨ä¸€æ¬¡ task_tick_fairï¼ŒåŒæ ¸CPU åˆ›å»ºäº†4ä¸ªç”¨æˆ·è¿›ç¨‹ä¸€ç›´åœ¨è·‘ï¼Œæ­¤æ—¶åº”è¯¥æ— è®º min_granularity_ns æ˜¯å¤šå°‘ ï¼Œæ¯ä¸ªè¿›ç¨‹è‡³å°‘running 4msä»¥ä¸Šï¼Œä½†æ˜¯ç”¨trace-cmdæŠ“çš„æœ‰ä½äº4ms çš„æƒ…å†µï¼Œè¿™æ˜¯å¦‚ä½•å‘ç”Ÿçš„ ï¼Ÿ","like_count":0},{"had_liked":false,"id":336541,"user_name":"ç™½é›²åŸä¸»","can_delete":false,"product_type":"c1","uid":2929240,"ip_address":"","ucode":"5A339657AC7A25","user_header":"https://static001.geekbang.org/account/avatar/00/2c/b2/58/e842dbd9.jpg","comment_is_top":false,"comment_ctime":1646206824,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646206824","product_id":100024701,"comment_content":"åŒæ ¸CPU ï¼Œæœ€å°æ—¶é—´ç‰‡ä¸º1.5msï¼Œè°ƒåº¦å‘¨æœŸä¸º12msï¼Œèµ·äº†6ä¸ªè¿›ç¨‹ï¼Œç…§ç†è¯´åº”è¯¥æ¯ä¸ªè¿›ç¨‹è‡³å°‘è¿è¡Œ1.5ms æ‰è¢«æŠ¢å ï¼Œè¿˜ä¸è€ƒè™‘tick time çš„æƒ…å†µï¼Œä½†æ˜¯æŠ“çš„ schedule trace  event çœ‹åˆ°çš„æ¯ä¸ªè¿›ç¨‹å¤§æ¦‚åªè¿è¡Œäº†1.5uså°±è¢«æŠ¢å äº†ï¼Œè¿™ä¸ªæ˜¯å•¥é—®é¢˜é¢ ï¼Ÿ<br><br>sysctl_sched<br>  .sysctl_sched_latency                    : 12.000000<br>  .sysctl_sched_min_granularity            : 1.500000","like_count":0},{"had_liked":false,"id":333077,"user_name":"å‡‰å‡‰","can_delete":false,"product_type":"c1","uid":1325256,"ip_address":"","ucode":"FCCF976E41EF71","user_header":"https://static001.geekbang.org/account/avatar/00/14/38/c8/972a5024.jpg","comment_is_top":false,"comment_ctime":1644049108,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644049108","product_id":100024701,"comment_content":"è€å¸ˆ æˆ‘æƒ³é—®ä¸€ä¸‹ åœ¨æœ‰å¤šä¸ªcpu çš„æƒ…å†µä¸‹æˆ–è€…æ˜¯å¤šæ ¸çš„æƒ…å†µï¼Œè¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­cpuè¢«æŠ¢å äº† è¿™æ—¶å€™èƒ½ä¸èƒ½æŠŠè¿™ä¸ªè¿›ç¨‹è°ƒåº¦åˆ°å…¶ä»– cpu æˆ–è€… cpu å…¶ä»–æ ¸è¿è¡Œ","like_count":0},{"had_liked":false,"id":288942,"user_name":"æ—å•¸ä¹¾","can_delete":false,"product_type":"c1","uid":1994745,"ip_address":"","ucode":"74C5980337D205","user_header":"https://static001.geekbang.org/account/avatar/00/1e/6f/f9/6b5410c5.jpg","comment_is_top":false,"comment_ctime":1618795222,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618795222","product_id":100024701,"comment_content":"è€å¸ˆï¼Œåšioå¤„ç†å®Œæˆåæ‰“æ ‡è®°çš„æ“ä½œæ˜¯ç”±å“ªé‡Œåšçš„<br>","like_count":0},{"had_liked":false,"id":277156,"user_name":"Xuan Enzo","can_delete":false,"product_type":"c1","uid":1806265,"ip_address":"","ucode":"B45983FB42CDB7","user_header":"https://static001.geekbang.org/account/avatar/00/1b/8f/b9/ea858151.jpg","comment_is_top":false,"comment_ctime":1612278075,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1612278075","product_id":100024701,"comment_content":"åˆ˜è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼šçº¿ç¨‹åˆ°äº†å†…æ ¸ä¹Ÿæ˜¯taskï¼Œå†…æ ¸ä¸åšåŒºåˆ†ï¼Œä¸€æ ·åˆ‡æ¢ã€‚æ˜¯ä¸æ˜¯è¯´çº¿ç¨‹åˆ‡æ¢å’Œè¿›ç¨‹åˆ‡æ¢æµç¨‹éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœæ–°åˆ‡æ¢è¿›æ¥çš„çº¿ç¨‹å’Œæ—§çš„çº¿ç¨‹åŒå±äºä¸€ä¸ªè¿›ç¨‹ï¼Œé‚£å°±æ˜¯è¿›ç¨‹é—´çš„çº¿ç¨‹åˆ‡æ¢ï¼›å¦‚æœæ–°çš„çº¿ç¨‹å’Œæ—§çš„çº¿ç¨‹ä¸å±äºä¸€ä¸ªè¿›ç¨‹ï¼Œé‚£å°±æ˜¯è¿›ç¨‹åˆ‡æ¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1547763,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/f3/3f6dd32b.jpg","nickname":"å¶ç´«çœŸ","note":"","ucode":"9CD7567FDB7F1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376109,"discussion_content":"1.ä¸ç®¡æ˜¯çº¿ç¨‹è¿˜æ˜¯è¿›ç¨‹ï¼Œåœ¨å†…æ ¸ä¸­éƒ½æ˜¯ä¸€ä¸ªtaskï¼›\n2.ä½ è¿™ä¹ˆç†è§£å°±å¯¹äº†ï¼Œä½ æ‰€è¯´çš„è¿›ç¨‹æ˜¯ä¸€ä¸ªä¸»çº¿ç¨‹ï¼›\n3.ä½ æŠŠè¿›ç¨‹ä¼šè¿è¡Œçš„è¿™ç§äº‹å½»åº•æŠ›å¼ƒï¼Œèƒ½è¿è¡Œçš„æ°¸è¿œæ˜¯çº¿ç¨‹ï¼Œè€Œè¿›ç¨‹æ˜¯ä¸€ä¸ªèµ„æºï¼Œè¿›ç¨‹é‡Œé¢æœ‰ä¸€ä¸ªå¯ä»¥è¿è¡Œçš„ä¸»çº¿ç¨‹ï¼Œè€Œè¿›ç¨‹ä¸­çš„å…¶ä»–çº¿ç¨‹æ˜¯ä¸»çº¿ç¨‹åˆ›å»ºçš„ï¼›\n4.æ°¸è¿œè¦è®°ä½ï¼Œè¿›ç¨‹æ˜¯ä¸€ä¸ªèµ„æºï¼Œä¸æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨CPUä¸Šé¢è·‘çš„ä¸œè¥¿ï¼›","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1621956624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246467,"user_name":"ç¦¾ç”°æ—¥æˆ","can_delete":false,"product_type":"c1","uid":1450722,"ip_address":"","ucode":"4BBC18778FDF88","user_header":"https://static001.geekbang.org/account/avatar/00/16/22/e2/4ca2d6d1.jpg","comment_is_top":false,"comment_ctime":1599363139,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1599363139","product_id":100024701,"comment_content":"æ‚¨å¥½ï¼Œæƒ³é—®ä¸€ä¸‹ï¼ŒæŒ‰ç…§æ–‡ç« è®²çš„ï¼ŒæŠ¢å å¼è°ƒåº¦åªæœ‰åœ¨ä¸Šè¿°æŠ¢å æ—¶æœºæ‰èƒ½è¿›è¡Œè°ƒåº¦çš„è¯ï¼Œé‚£ä¹ˆå¦‚æœä¸€ä¸ªç¨‹åºä¸€ç›´åœ¨æ­»å¾ªç¯çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸ä¼šè¿›è¡Œè°ƒåº¦äº†å—","like_count":0,"discussions":[{"author":{"id":1262271,"avatar":"https://static001.geekbang.org/account/avatar/00/13/42/bf/8d366dd4.jpg","nickname":"æ³¢æ–¯ç ","note":"","ucode":"F8607AC2B1A37A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375311,"discussion_content":"æ—¶é’Ÿä¸­æ–­ä¼šæŠŠä»–æ‰“æ–­çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621571089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240519,"user_name":"Jemmy","can_delete":false,"product_type":"c1","uid":1007330,"ip_address":"","ucode":"A979F4A5210225","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/e2/1fad3052.jpg","comment_is_top":false,"comment_ctime":1596957933,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1596957933","product_id":100024701,"comment_content":"æœ‰ä¸€ä¸ªå›°æƒ‘ï¼š æ¯”å¦‚ ä¸€ä¸ª task åœ¨ cfs rqï¼Œå®ƒæ²¡æœ‰è¿è¡Œï¼Œç°åœ¨è¦ try_to_wake_up å®ƒï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šè°ƒç”¨ p-&gt;sched_class-&gt;enqueue_task(rq, p, flags); å»åš enqueueï¼›å®ƒä¸æ˜¯å·²ç»åœ¨äº†å—ï¼Œæ²¡æœ‰è¿è¡Œæ—¶éš¾é“å®ƒä¸åœ¨ cfs rq å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":229154,"user_name":"æåœ£æ‚¦","can_delete":false,"product_type":"c1","uid":1638427,"ip_address":"","ucode":"C1786C98824E50","user_header":"https://static001.geekbang.org/account/avatar/00/19/00/1b/eee13196.jpg","comment_is_top":false,"comment_ctime":1592910254,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592910254","product_id":100024701,"comment_content":"è€å¸ˆï¼Œåé¢æœ‰è¿›ç¨‹cpuåˆ‡æ¢çš„åŸç†ä¸ï¼Ÿè°ƒåº¦å®ä½“æ€ä¹ˆæŒ‚åˆ°åˆé€‚çš„åˆ†æ”¯ä¸Šï¼Ÿ","like_count":0},{"had_liked":false,"id":226098,"user_name":"ç¾½","can_delete":false,"product_type":"c1","uid":1316367,"ip_address":"","ucode":"7E329FECE728E4","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/0f/ebdcc4b7.jpg","comment_is_top":false,"comment_ctime":1591950933,"is_pvip":false,"replies":[{"id":"83461","content":"å¯¹äºæ“ä½œç³»ç»Ÿçœ‹æ¥ï¼Œæ¯ä¸ªæ ¸æ˜¯ä¸€ä¸ªcpu","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1592186010,"ip_address":"","comment_id":226098,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1591950933","product_id":100024701,"comment_content":"è¶…å“¥ è¯·æ•™ä¸€ä¸ªé—®é¢˜  å¯¹äºå•æ ¸çœ‹ç€ä¸Šé¢çš„è°ƒåº¦æ˜¯ç­æœ‰é—®é¢˜çš„ ä½†æ˜¯å¤šæ ¸ä¼¼ä¹æœ‰é—®é¢˜å•Š  è¿™ä¸ªå¤šæ ¸cpuå¦‚ä½•åŒæ­¥è¿™ä¸ªçº¿ç¨‹æ˜¯å¦æœ‰è°ƒåº¦å‘¢ï¼Ÿ å¦‚æœå¤šæ ¸ä½¿ç”¨åŒä¸€ä¸ªè°ƒåº¦é˜Ÿåˆ—ä»–ä»¬æ˜¯å¦‚ä½•åŒæ­¥çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498103,"discussion_content":"å¯¹äºæ“ä½œç³»ç»Ÿçœ‹æ¥ï¼Œæ¯ä¸ªæ ¸æ˜¯ä¸€ä¸ªcpu","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592186010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1180460,"avatar":"https://static001.geekbang.org/account/avatar/00/12/03/2c/33ba4d12.jpg","nickname":"å±±ä¸­æ— è€è™ ğŸ˜ª","note":"","ucode":"594247C3A976DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361555,"discussion_content":"https://blog.csdn.net/z1026544682/article/details/105714542 è¿™ä¸ªå¯ä»¥çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616686925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1316367,"avatar":"https://static001.geekbang.org/account/avatar/00/14/16/0f/ebdcc4b7.jpg","nickname":"ç¾½","note":"","ucode":"7E329FECE728E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283111,"discussion_content":" è¶…å“¥  å¤šä¸ªcpuæ˜¯é€šè¿‡ä»€ä¹ˆè¿›è¡ŒåŒæ­¥çš„å‘¢ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592186443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1500593,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIicibkDiceIZd7R3y57L7WIVFpVWU6ebp40G3ZNLFtlUWb7d4O5BpyxKQSd81FXo4rQFbQoUWu35jJg/132","nickname":"zhuxuxu","note":"","ucode":"DCD8E5D7F6F8A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1316367,"avatar":"https://static001.geekbang.org/account/avatar/00/14/16/0f/ebdcc4b7.jpg","nickname":"ç¾½","note":"","ucode":"7E329FECE728E4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334244,"discussion_content":"ä¸€èˆ¬å¤šæ ¸ä»»åŠ¡è°ƒåº¦ç®—æ³•æœ‰å…¨å±€é˜Ÿåˆ—è°ƒåº¦å’Œå±€éƒ¨é˜Ÿåˆ—è°ƒåº¦ã€‚å‰è€…æ˜¯æŒ‡æ“ä½œç³»ç»Ÿç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„ä»»åŠ¡ç­‰å¾…é˜Ÿåˆ—ï¼Œå½“ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªCPUæ ¸å¿ƒç©ºé—²æ—¶ï¼Œæ“ä½œç³»ç»Ÿå°±ä»å…¨å±€ä»»åŠ¡ç­‰å¾…é˜Ÿåˆ—ä¸­é€‰å–å°±ç»ªä»»åŠ¡å¼€å§‹åœ¨æ­¤æ ¸å¿ƒä¸Šæ‰§è¡Œã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯CPUæ ¸å¿ƒåˆ©ç”¨ç‡è¾ƒé«˜ã€‚åè€…æ˜¯æŒ‡æ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªCPUå†…æ ¸ç»´æŠ¤ä¸€ä¸ªå±€éƒ¨çš„ä»»åŠ¡ç­‰å¾…é˜Ÿåˆ—ï¼Œå½“ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªCPUå†…æ ¸ç©ºé—²æ—¶ï¼Œä¾¿ä»è¯¥æ ¸å¿ƒçš„ä»»åŠ¡ç­‰å¾…é˜Ÿåˆ—ä¸­é€‰å–æ°å½“çš„ä»»åŠ¡æ‰§è¡Œï¼Œè¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ä»»åŠ¡åŸºæœ¬ä¸Šæ— éœ€åœ¨å¤šä¸ªCPUæ ¸å¿ƒé—´åˆ‡æ¢ï¼Œæœ‰åˆ©äºæé«˜CPUæ ¸å¿ƒå±€éƒ¨Cacheå‘½ä¸­ç‡ã€‚ç›®å‰å¤šæ•°å¤šæ ¸CPUæ“ä½œç³»ç»Ÿé‡‡ç”¨çš„æ˜¯åŸºäºå…¨å±€é˜Ÿåˆ—çš„ä»»åŠ¡è°ƒåº¦ç®—æ³•ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607778436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":283111,"ip_address":""},"score":334244,"extra":""}]}]},{"had_liked":false,"id":200597,"user_name":"honnkyou","can_delete":false,"product_type":"c1","uid":1026608,"ip_address":"","ucode":"FD5EC4120EE803","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/30/acc91f01.jpg","comment_is_top":false,"comment_ctime":1585622246,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585622246","product_id":100024701,"comment_content":"ä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹è¢«å”¤é†’æ—¶æ˜¯æŠŠæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ ‡è®°ä¸º&quot;å¯ä»¥è¢«æŠ¢å &quot;æ˜¯å—ï¼Ÿ<br>æƒ³é—®ä¸€ä¸‹æ˜¯è°æ ‡è®°çš„å‘¢ï¼Ÿè°ƒåº¦å™¨å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":200238,"user_name":"honnkyou","can_delete":false,"product_type":"c1","uid":1026608,"ip_address":"","ucode":"FD5EC4120EE803","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/30/acc91f01.jpg","comment_is_top":false,"comment_ctime":1585561803,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585561803","product_id":100024701,"comment_content":"è€å¸ˆï¼Œideal_runtime æ˜¯æŒ‡è¿™æ®µæ—¶é—´ç‰‡å†…åº”è¯¥è¿è¡Œçš„æ—¶é—´å—ï¼Ÿdelta_exec æ˜¯å®é™…çš„è¿è¡Œæ—¶é—´ã€‚","like_count":0,"discussions":[{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387384,"discussion_content":"æ˜¯çš„ï¼Œideal_runtimeæ˜¯ç†è®ºä¸Šåº”è¯¥è¿è¡Œçš„æ—¶é—´/ è¿è¡Œæ—¶é—´é˜ˆå€¼ï¼›delta_execå¤§äºç­‰äºç†è®ºå€¼ä¹‹åï¼Œå°±éœ€è¦è¿›è¡Œè¿›ç¨‹è°ƒåº¦äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628146322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193333,"user_name":"Geek_b8928e","can_delete":false,"product_type":"c1","uid":1926597,"ip_address":"","ucode":"96E4ABE3F2F145","user_header":"","comment_is_top":false,"comment_ctime":1584890122,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584890122","product_id":100024701,"comment_content":"Linuxä¸­çš„ä¸¤ç§è°ƒåº¦ï¼šä¸»åŠ¨è°ƒåº¦å’ŒæŠ¢å å¼è°ƒåº¦","like_count":0},{"had_liked":false,"id":192643,"user_name":"OOK","can_delete":false,"product_type":"c1","uid":1342712,"ip_address":"","ucode":"BE6220D4E922E9","user_header":"https://static001.geekbang.org/account/avatar/00/14/7c/f8/1183f1ac.jpg","comment_is_top":false,"comment_ctime":1584865075,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1584865075","product_id":100024701,"comment_content":"å¦‚æœåˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œäº†ï¼Œä»è€Œè°ƒåº¦å…¶ä»–ç¨‹åºï¼Œè¿™ä¸ªä¹Ÿæ˜¯éæŠ¢å å¼è°ƒåº¦å§ï¼ŒæŠ¢å å¼è°ƒåº¦æ˜¯è¿›ç¨‹æ­£åœ¨ä½¿ç”¨åˆ†é…ç»™ä»–çš„æ—¶é—´ç‰‡ï¼Œå¦‚æœè¿™æ—¶å€™è¢«ä¸­æ–­ï¼Œè¿™æ˜¯æŠ¢å å¼è°ƒåº¦å§ã€‚ä¸»åŠ¨è°ƒåº¦å’Œè¢«åŠ¨è°ƒåº¦å¯¹åº”ï¼ŒéæŠ¢å å¼è°ƒåº¦å’ŒæŠ¢å å¼è°ƒåº¦å¯¹åº”å§ã€‚æœ‰ç‚¹ç–‘æƒ‘ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387385,"discussion_content":"è°ƒåº¦å°±ä¸¤ç§å“¦ï¼Œä¸€ç§ç­‰IOçš„ä¸»åŠ¨è®©è´¤ï¼›ä¸€ç§æ˜¯æ—¶é—´åˆ°äº†è¢«è¿«ä¸‹çº¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628146402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186872,"user_name":"äº¢ï¼ˆçŸ¥è¡Œåˆä¸€çš„è·¯ä¸Šï¼‰","can_delete":false,"product_type":"c1","uid":1347013,"ip_address":"","ucode":"958AF7C96EB9E8","user_header":"https://static001.geekbang.org/account/avatar/00/14/8d/c5/898b13b4.jpg","comment_is_top":false,"comment_ctime":1583942077,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1583942077","product_id":100024701,"comment_content":"Golang é‡Œé¢çš„æŠ¢å å¼è°ƒåº¦ä¹Ÿæœ‰ç±»ä¼¼ä¹‹å¤„ï¼Œä¹‹å‰é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹é‡Œé¢çš„ä¸€ä¸ª for å¾ªç¯ï¼Œé‡Œé¢ä»€ä¹ˆä¹Ÿä¸åšï¼Œå¼€å§‹è®¤ä¸ºè°ƒåº¦ç³»ç»Ÿä¼šåˆ‡æ¢åˆ°å¦å¤–çš„åç¨‹ç»§ç»­æ‰§è¡Œï¼Œç°åœ¨ç†è§£äº†ï¼Œç”±äº for å¾ªç¯é‡Œé¢ä»€ä¹ˆéƒ½æ²¡åšï¼Œå³æ²¡æœ‰ç³»ç»Ÿè°ƒç”¨ã€I&#47;O ä¸­æ–­ä¹‹ç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±æ— æ³•è¢«æŠ¢å ã€‚<br>äº†è§£äº†ç³»ç»Ÿåº•å±‚çš„å®ç°åŸç†ï¼Œæ‰èƒ½è§£é‡Šä¸€äº›çœ‹èµ·æ¥è¯¡å¼‚çš„ç°è±¡ï¼Œæ„Ÿè°¢è€å¸ˆï¼","like_count":0,"discussions":[{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387386,"discussion_content":"å¦‚æœæœ‰ä¼˜å…ˆçº§æ›´é«˜çš„çº¿ç¨‹è¿˜æ˜¯ä¼šè¢«æŠ¢å çš„ï¼Œä½ çœ‹åˆ°æ²¡æœ‰è¢«æŠ¢å ï¼Œå¯èƒ½å·²ç»è¢«æŠ¢å Næ¬¡ï¼Œåªä¸è¿‡ä½ æ²¡æœ‰æ„ŸçŸ¥è€Œå·²ï¼Œå› ä¸ºçº¿ç¨‹æœ‰æŠ¢å å›æ¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628146516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182258,"user_name":"çš®çš®ä¾ ","can_delete":false,"product_type":"c1","uid":1258402,"ip_address":"","ucode":"04205990C1DE1F","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/a2/6c0ffc15.jpg","comment_is_top":false,"comment_ctime":1582737400,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582737400","product_id":100024701,"comment_content":"é—®ä¸‹è€å¸ˆï¼Œä»2.6ç‰ˆæœ¬linuxæ—¶é’Ÿä»ä½ç²’åº¦åˆ‡æ¢åˆ°é«˜ç²’åº¦ï¼Œå¯¹æ•´ä¸ªå†…æ ¸ä»£ç å½±å“æ˜¯ä¸æ˜¯å¾ˆå¤§ï¼Ÿå½“æˆ‘ä»¬åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ä¿®å‰ªlinuxå†…æ ¸æ—¶ï¼Œå¯¹è¿™æ ·çš„æ”¹å˜éœ€è¦æ³¨æ„å“ªäº›é—®é¢˜å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":160872,"user_name":"Geek_mgk","can_delete":false,"product_type":"c1","uid":1756673,"ip_address":"","ucode":"61F5CB403F4D39","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ce/01/0b862dd3.jpg","comment_is_top":false,"comment_ctime":1576051333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576051333","product_id":100024701,"comment_content":"è¿›ç¨‹åˆ‡æ¢è°ƒåº¦æ˜¯ä¸æ˜¯æ„å‘³ç€å¤šä¸ªè¿›ç¨‹ä¸èƒ½åœ¨å¤šcpuä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œåªèƒ½å•ä¸ªè¿›ç¨‹çš„å¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼Ÿï¼Ÿè¿˜æ˜¯è¯´ï¼Œçº¿ç¨‹ä½œä¸ºè°ƒåº¦çš„æœ€å°å•ä½ï¼Œä½¿å¾—ä¸åŒè¿›ç¨‹çš„ä¸åŒçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œè¾¾åˆ°è¿›ç¨‹å¹¶è¡Œçš„ç›®çš„ï¼Ÿä¸ªäººç†è§£è¿˜ä¸å¤Ÿåˆ°ä½ã€‚","like_count":0},{"had_liked":false,"id":155309,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1574677002,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574677002","product_id":100024701,"comment_content":"è®¤è¯†åˆ°ï¼šæŠ¢å ï¼Œä¹Ÿæ˜¯æœ‰åŸå› ã€æœ‰æ—¶æœºé™åˆ¶çš„ï¼","like_count":0},{"had_liked":false,"id":150341,"user_name":"ç§‹å¤©","can_delete":false,"product_type":"c1","uid":1057056,"ip_address":"","ucode":"A7E1D953EF7E17","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","comment_is_top":false,"comment_ctime":1573520984,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1573520984","product_id":100024701,"comment_content":"çœ‹è¿™ä¸ªæ–‡ç« æ˜¯ä¸æ˜¯å…ˆçœ‹ä¸€ä¸‹ linux ç›¸å…³çš„ä¹¦ç±å•Šï¼Œæ„Ÿè§‰å¤§è„‘æ²¡æœ‰ä¸€ä¸ªå¤§æ¦‚çš„ linuxå¾—è¿è¡Œè¿‡ç¨‹å›¾è°±","like_count":0},{"had_liked":false,"id":137116,"user_name":"kdb_reboot","can_delete":false,"product_type":"c1","uid":1003594,"ip_address":"","ucode":"4C56FCA563FCA3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/4a/04fef27f.jpg","comment_is_top":false,"comment_ctime":1569628262,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569628262","product_id":100024701,"comment_content":"ä¸ªäººè§‚ç‚¹:cfs ä¸åº”è¯¥è®²ä¸€è®²å¦‚ä½•è®¡ç®—æ—¶é—´ç‰‡ä¹ˆ(è¿›ç¨‹åº”è¯¥è¿è¡Œçš„æ—¶é—´)","like_count":0},{"had_liked":false,"id":120560,"user_name":"kdb_reboot","can_delete":false,"product_type":"c1","uid":1003594,"ip_address":"","ucode":"4C56FCA563FCA3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/4a/04fef27f.jpg","comment_is_top":false,"comment_ctime":1564929241,"is_pvip":false,"replies":[{"id":"46362","content":"è°¢è°¢å¤¸å¥–ï¼Œä¸æ•¢ä¸æ•¢","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1566297116,"ip_address":"","comment_id":120560,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564929241","product_id":100024701,"comment_content":"åˆè¯»äº†å¥½å‡ é ç»ˆäºçœ‹æ‡‚äº†è°ƒåº¦ï¼Œæ‰‹é‡Œçš„èµ„æ–™lkd&#47;uldéƒ½æ˜¯è®²2.6å†…æ ¸çš„ï¼Œä¹Ÿåœ¨å¯¹ç€4.4çš„ä»£ç çœ‹ï¼Œè€å¸ˆå¾ˆå‰å®³ï¼Œæ„Ÿè§‰è¿™ä¸ªç³»åˆ—å¯ä»¥å«ulk 4.4 vertionäº†â€¦â€¦<br>ç®€å•æ¥è¯´ï¼Œè°ƒåº¦å°±æ˜¯è§£å†³ä»€ä¹ˆæ—¶é—´è°ƒåº¦ï¼Œé€‰å“ªä¸ªä»»åŠ¡è°ƒåº¦ï¼Œæ€ä¹ˆè°ƒåº¦ï¼Œæ¢å¥è¯å°±æ˜¯è¯´CPUä»€ä¹ˆæ—¶å€™è·‘å“ªä¸ªä»»åŠ¡ï¼Œåä¸¤ä¸ªé—®é¢˜å¯¹åº”è€å¸ˆå¯¼å›¾çš„ç¬¬ä¸€æ¡ï¼Œç¬¬ä¸€ä¸ªå¯¹åº”è€å¸ˆå¯¼å›¾çš„åä¸¤æ¡ï¼Œå…ˆå¾—æ ‡è®°ä¸€ä¸‹resched,ç„¶ååœ¨åˆé€‚çš„æ—¶å€™è¿›è¡Œè°ƒåº¦","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461384,"discussion_content":"è°¢è°¢å¤¸å¥–ï¼Œä¸æ•¢ä¸æ•¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566297116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116374,"user_name":"å°è™¾ç±³","can_delete":false,"product_type":"c1","uid":1005528,"ip_address":"","ucode":"F543987A7FAB20","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/d8/425e1b0a.jpg","comment_is_top":false,"comment_ctime":1563844706,"is_pvip":false,"replies":[{"id":"46428","content":"ä¼šï¼Œå¼„ä¸ªé«˜ä¼˜å…ˆçº§çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1566300014,"ip_address":"","comment_id":116374,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1563844706","product_id":100024701,"comment_content":"è¯·æ•™ä¸€ä¸‹ï¼Œå†™ä¸€ä¸ªæ­»å¾ªç¯ï¼Œå¾ªç¯é‡Œä»€ä¹ˆéƒ½ä¸åšï¼Œè¿™ä¸ªè¿›ç¨‹ä¼šè¢«è°ƒåº¦å‡ºå»å—","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459510,"discussion_content":"ä¼šï¼Œå¼„ä¸ªé«˜ä¼˜å…ˆçº§çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566300014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1450722,"avatar":"https://static001.geekbang.org/account/avatar/00/16/22/e2/4ca2d6d1.jpg","nickname":"ç¦¾ç”°æ—¥æˆ","note":"","ucode":"4BBC18778FDF88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303729,"discussion_content":"å’¦ï¼Œæƒ³é—®ä¸€ä¸‹ï¼Œè¿™ç§æŠ¢å å¼è°ƒåº¦ä¸æ˜¯ä¸€å®šè¦å¤„äºæŠ¢å æ—¶æœºæ‰å¯ä»¥å®Œæˆçš„å—ï¼Œæ­»å¾ªç¯åº”è¯¥æ²¡æœ‰å¤„äºé‚£äº›æ—¶æœºä¸­å§\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599363321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1472051,"avatar":"https://static001.geekbang.org/account/avatar/00/16/76/33/928ffd21.jpg","nickname":"AlexS","note":"","ucode":"3DA81A613CE645","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1450722,"avatar":"https://static001.geekbang.org/account/avatar/00/16/22/e2/4ca2d6d1.jpg","nickname":"ç¦¾ç”°æ—¥æˆ","note":"","ucode":"4BBC18778FDF88","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313215,"discussion_content":"åˆ«çš„è¯„è®ºé‡Œæœ‰ç­”æ¡ˆæ‹‰ï¼Œæ—¶é—´ä¸­æ–­ä¼šä¸­æ–­å®ƒå‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603004345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":303729,"ip_address":""},"score":313215,"extra":""}]}]},{"had_liked":false,"id":112525,"user_name":"CN....","can_delete":false,"product_type":"c1","uid":1228489,"ip_address":"","ucode":"2C265A33D4C642","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/c9/505bfb99.jpg","comment_is_top":false,"comment_ctime":1562751606,"is_pvip":false,"replies":[{"id":"46716","content":"ä¼šå‘€","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1566386134,"ip_address":"","comment_id":112525,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562751606","product_id":100024701,"comment_content":"è€å¸ˆå¥½,å¦‚æœä¸€ä¸ªè¿›ç¨‹å¼€å¯ç‰¹åˆ«å¤šçº¿ç¨‹,çº¿ç¨‹æ‰§è¡Œå†…å®¹éƒ½æ˜¯æ­»å¾ªç¯ å¾ªç¯ä½“ä¸­æ‰§è¡Œsleep(3ç§’),å¦‚æœå†…å­˜è¶³å¤Ÿå¤§,ä¼šéšç€çº¿ç¨‹æ•°å¢åŠ ,å¯¼è‡´cpuä½¿ç”¨ç‡å¢åŠ å—","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457779,"discussion_content":"ä¼šå‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566386134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108458,"user_name":"Amark","can_delete":false,"product_type":"c1","uid":1121326,"ip_address":"","ucode":"E5F48633654002","user_header":"https://static001.geekbang.org/account/avatar/00/11/1c/2e/93812642.jpg","comment_is_top":false,"comment_ctime":1561777102,"is_pvip":false,"replies":[{"id":"48828","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1567499979,"ip_address":"","comment_id":108458,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561777102","product_id":100024701,"comment_content":"è€å¸ˆ å‘ç”Ÿè°ƒåº¦å°±ä¸¤ç§æƒ…å†µå—ï¼Œä¸»åŠ¨è®©å‡ºï¼Œä¸è¢«åŠ¨è°ƒåº¦?","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455987,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567499979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104857,"user_name":"æ¨é¢†well","can_delete":false,"product_type":"c1","uid":1145650,"ip_address":"","ucode":"3974A03855168C","user_header":"https://static001.geekbang.org/account/avatar/00/11/7b/32/60089a62.jpg","comment_is_top":false,"comment_ctime":1560857007,"is_pvip":false,"replies":[{"id":"49021","content":"ä¼šæœ‰å•ç‹¬çš„ä¸€èŠ‚è®²ä¸­æ–­","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1567580064,"ip_address":"","comment_id":104857,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560857007","product_id":100024701,"comment_content":"è€å¸ˆèƒ½å¦è®²è§£ä¸€ä¸‹ä¸­æ–­çš„å®ç°ï¼Œè™½ç„¶è¿™é‡Œæœ‰æåˆ°ï¼Œä½†æ˜¯å¯¹äºä¸­æ–­çš„å®ç°è¿‡ç¨‹è¿˜æ˜¯æœ‰ç‚¹æ‡µ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454455,"discussion_content":"ä¼šæœ‰å•ç‹¬çš„ä¸€èŠ‚è®²ä¸­æ–­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567580064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97441,"user_name":"å¦‚æ˜¯","can_delete":false,"product_type":"c1","uid":1133500,"ip_address":"","ucode":"78F7D2402483C4","user_header":"https://static001.geekbang.org/account/avatar/00/11/4b/bc/86a9ac70.jpg","comment_is_top":false,"comment_ctime":1558669792,"is_pvip":false,"replies":[{"id":"34854","content":"ä¼šç”¨cpuçš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1558680677,"ip_address":"","comment_id":97441,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1558669792","product_id":100024701,"comment_content":"è€å¸ˆä¸­æ–­æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Œéš¾é“ä¸ä¼šç”¨åˆ°cpuå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451282,"discussion_content":"ä¼šç”¨cpuçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558680677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177797,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f8/c5/6d38f3e3.jpg","nickname":"é»‘å¾®ç‹—â€®â€®","note":"","ucode":"D44505E7E97BB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":186551,"discussion_content":"é‚£cpuå·²ç»åœ¨å¤„ç†æŸä¸ªè¿›ç¨‹äº† è¿˜æ€ä¹ˆå¤„ç†ä¸­æ–­å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582691087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95117,"user_name":"å‘¨å¹³","can_delete":false,"product_type":"c1","uid":1047936,"ip_address":"","ucode":"CA1869B139A4F6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fd/80/52763d62.jpg","comment_is_top":false,"comment_ctime":1557970346,"is_pvip":false,"replies":[{"id":"49344","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1567650469,"ip_address":"","comment_id":95117,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557970346","product_id":100024701,"comment_content":"ç®¡ç†çš„æ—¶é—´æˆ–è€…è¯´åº¦é‡çš„æ—¶é—´æ˜¯å¦å°±æ˜¯ç³»ç»Ÿæ—¶é’Ÿï¼Œå°±åƒMCUä¸­çš„æ—¶é’Ÿæºä¸€æ ·å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450335,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567650469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92001,"user_name":"tiankonghewo","can_delete":false,"product_type":"c1","uid":1476427,"ip_address":"","ucode":"7A55A9C17DD9DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/4b/16ea3997.jpg","comment_is_top":false,"comment_ctime":1557151666,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557151666","product_id":100024701,"comment_content":"å­¦ä¹ äº†","like_count":0},{"had_liked":false,"id":91711,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1557098512,"is_pvip":false,"replies":[{"id":"32850","content":"è¿™æ ·å¤¸å¥–","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1557154457,"ip_address":"","comment_id":91711,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557098512","product_id":100024701,"comment_content":"task_structä¸­æœ‰æŒ‡å‘è°ƒåº¦ç±»çš„æŒ‡é’ˆï¼Œç¬¬15è¯¾è°ƒåº¦ï¼ˆä¸Šï¼‰è¿˜æœ‰ç–‘é—®ä¸çŸ¥é“è¿™ä¸ªæŒ‡é’ˆæœ‰ä»€ä¹ˆç”¨ï¼Œåœ¨è¿™ä¸€èŠ‚æ‰¾åˆ°äº†ç­”æ¡ˆã€‚<br><br>è€å¸ˆè®²çš„æ¯”é‚£äº›å†…æ ¸ä¹¦ä¸Šè®²çš„å¥½å¤ªå¤šäº†ã€‚","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448998,"discussion_content":"è¿™æ ·å¤¸å¥–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557154457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}