{"id":88600,"title":"12 | iOS å´©æºƒåƒå¥‡ç™¾æ€ªï¼Œå¦‚ä½•å…¨é¢ç›‘æ§ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æˆ´é“­ã€‚ä»Šå¤©æˆ‘è¦è·Ÿä½ è¯´çš„æ˜¯å´©æºƒç›‘æ§ã€‚</p><p>Appä¸Šçº¿åï¼Œæˆ‘ä»¬æœ€æ€•å‡ºç°çš„æƒ…å†µå°±æ˜¯åº”ç”¨å´©æºƒäº†ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çº¿ä¸‹æµ‹è¯•å¥½å¥½çš„Appï¼Œä¸ºä»€ä¹ˆä¸Šçº¿åå°±å‘ç”Ÿå´©æºƒäº†å‘¢ï¼Ÿè¿™äº›å´©æºƒæ—¥å¿—ä¿¡æ¯æ˜¯æ€ä¹ˆé‡‡é›†çš„ï¼Ÿèƒ½å¤Ÿé‡‡é›†çš„å…¨å—ï¼Ÿé‡‡é›†ååˆè¦æ€ä¹ˆåˆ†æã€è§£å†³å‘¢ï¼Ÿ</p><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œ<strong>ä½ å°±å¯ä»¥äº†è§£åˆ°é€ æˆå´©æºƒçš„æƒ…å†µæœ‰å“ªäº›ï¼Œä»¥åŠè¿™äº›å´©æºƒçš„æ—¥å¿—éƒ½æ˜¯å¦‚ä½•æ•è·æ”¶é›†åˆ°çš„ã€‚</strong></p><p>App ä¸Šçº¿åï¼Œæ˜¯å¾ˆè„†å¼±çš„ï¼Œå¯¼è‡´å…¶å´©æºƒçš„é—®é¢˜ï¼Œä¸ä»…åŒ…æ‹¬ç¼–å†™ä»£ç æ—¶çš„å„ç§å°é©¬è™ï¼Œè¿˜åŒ…æ‹¬é‚£äº›è¢«ç³»ç»Ÿå¼ºæ€çš„ç–‘éš¾æ‚ç—‡ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±å…ˆçœ‹çœ‹å‡ ä¸ªå¸¸è§çš„ç¼–å†™ä»£ç æ—¶çš„å°é©¬è™ï¼Œæ˜¯å¦‚ä½•è®©åº”ç”¨å´©æºƒçš„ã€‚</p><ul>\n<li>æ•°ç»„è¶Šç•Œï¼šåœ¨å–æ•°æ®ç´¢å¼•æ—¶è¶Šç•Œï¼ŒAppä¼šå‘ç”Ÿå´©æºƒã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ç»™æ•°ç»„æ·»åŠ äº† nil ä¼šå´©æºƒã€‚</li>\n<li>å¤šçº¿ç¨‹é—®é¢˜ï¼šåœ¨å­çº¿ç¨‹ä¸­è¿›è¡Œ UI æ›´æ–°å¯èƒ½ä¼šå‘ç”Ÿå´©æºƒã€‚å¤šä¸ªçº¿ç¨‹è¿›è¡Œæ•°æ®çš„è¯»å–æ“ä½œï¼Œå› ä¸ºå¤„ç†æ—¶æœºä¸ä¸€è‡´ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ç½®ç©ºæ•°æ®çš„åŒæ—¶å¦ä¸€ä¸ªçº¿ç¨‹åœ¨è¯»å–è¿™ä¸ªæ•°æ®ï¼Œå¯èƒ½ä¼šå‡ºç°å´©æºƒæƒ…å†µã€‚</li>\n<li>ä¸»çº¿ç¨‹æ— å“åº”ï¼šå¦‚æœä¸»çº¿ç¨‹è¶…è¿‡ç³»ç»Ÿè§„å®šçš„æ—¶é—´æ— å“åº”ï¼Œå°±ä¼šè¢« Watchdog æ€æ‰ã€‚è¿™æ—¶ï¼Œå´©æºƒé—®é¢˜å¯¹åº”çš„å¼‚å¸¸ç¼–ç æ˜¯0x8badf00dã€‚å…³äºè¿™ä¸ªå¼‚å¸¸ç¼–ç ï¼Œæˆ‘è¿˜ä¼šåœ¨åæ–‡å’Œä½ è¯´æ˜ã€‚</li>\n<li>é‡æŒ‡é’ˆï¼šæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå·²åˆ é™¤çš„å¯¹è±¡è®¿é—®å†…å­˜åŒºåŸŸæ—¶ï¼Œä¼šå‡ºç°é‡æŒ‡é’ˆå´©æºƒã€‚é‡æŒ‡é’ˆé—®é¢˜æ˜¯éœ€è¦æˆ‘ä»¬é‡ç‚¹å…³æ³¨çš„ï¼Œå› ä¸ºå®ƒæ˜¯å¯¼è‡´Appå´©æºƒçš„æœ€å¸¸è§ï¼Œä¹Ÿæ˜¯æœ€éš¾å®šä½çš„ä¸€ç§æƒ…å†µã€‚å…³äºé‡æŒ‡é’ˆç­‰å†…å­˜ç›¸å…³é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨ç¬¬14ç¯‡æ–‡ç« â€œä¸´è¿‘ OOMï¼Œå¦‚ä½•è·å–è¯¦ç»†å†…å­˜åˆ†é…ä¿¡æ¯ï¼Œåˆ†æå†…å­˜é—®é¢˜ï¼Ÿâ€é‡Œå’Œä½ è¯¦ç»†è¯´æ˜ã€‚</li>\n</ul><!-- [[[read_end]]] --><p>ç¨‹åºå´©æºƒäº†ï¼Œä½ çš„ App å°±ä¸å¯ç”¨äº†ï¼Œå¯¹ç”¨æˆ·çš„ä¼¤å®³ä¹Ÿæ˜¯æœ€å¤§çš„ã€‚å› æ­¤ï¼Œæ¯å®¶å…¬å¸éƒ½ä¼šéå¸¸é‡è§†è‡ªå®¶äº§å“çš„å´©æºƒç‡ï¼Œå¹¶ä¸”ä¼šå°†å´©æºƒç‡ï¼ˆä¹Ÿå°±æ˜¯ä¸€æ®µæ—¶é—´å†…å´©æºƒæ¬¡æ•°ä¸å¯åŠ¨æ¬¡æ•°ä¹‹æ¯”ï¼‰ä½œä¸ºä¼˜å…ˆçº§æœ€é«˜çš„æŠ€æœ¯æŒ‡æ ‡ï¼Œæ¯”å¦‚åƒåˆ†ä½æ˜¯ç”Ÿæ­»çº¿ï¼Œä¸‡åˆ†ä½æ˜¯è¾¾æ ‡çº¿ç­‰ï¼Œå»è¡¡é‡ä¸€ä¸ªAppçš„é«˜å¯ç”¨æ€§ã€‚</p><p>è€Œå´©æºƒç‡ç­‰æŠ€æœ¯æŒ‡æ ‡ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”±å´©æºƒç›‘æ§ç³»ç»Ÿæ¥æœé›†ã€‚åŒæ—¶ï¼Œå´©æºƒç›‘æ§ç³»ç»Ÿæ”¶é›†åˆ°çš„å †æ ˆä¿¡æ¯ï¼Œä¹Ÿä¸ºè§£å†³å´©æºƒé—®é¢˜æä¾›äº†æœ€é‡è¦çš„ä¿¡æ¯ã€‚</p><p>ä½†æ˜¯ï¼Œå´©æºƒä¿¡æ¯çš„æ”¶é›†å´å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚å› ä¸ºï¼Œæœ‰äº›å´©æºƒæ—¥å¿—æ˜¯å¯ä»¥é€šè¿‡ä¿¡å·æ•è·åˆ°çš„ï¼Œè€Œå¾ˆå¤šå´©æºƒæ—¥å¿—å´æ˜¯é€šè¿‡ä¿¡å·æ•è·ä¸åˆ°çš„ã€‚</p><p>ä½ å¯ä»¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™å¹…å›¾ï¼Œæˆ‘åˆ—å‡ºäº†å¸¸è§çš„éƒ¨åˆ†å´©æºƒæƒ…å†µï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f9/fe/f97dda3b49351f74747dd74128a0ddfe.png?wh=2732*2048\" alt=\"\"></p><center><span class=\"reference\">å›¾1 å¸¸è§çš„éƒ¨åˆ†å´©æºƒæƒ…å†µåˆ†ç±»</span></center><p>é€šè¿‡è¿™å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ KVOé—®é¢˜ã€NSNotification çº¿ç¨‹é—®é¢˜ã€æ•°ç»„è¶Šç•Œã€é‡æŒ‡é’ˆç­‰å´©æºƒä¿¡æ¯ï¼Œæ˜¯å¯ä»¥é€šè¿‡ä¿¡å·æ•è·çš„ã€‚ä½†æ˜¯ï¼Œåƒåå°ä»»åŠ¡è¶…æ—¶ã€å†…å­˜è¢«æ‰“çˆ†ã€ä¸»çº¿ç¨‹å¡é¡¿è¶…é˜ˆå€¼ç­‰ä¿¡æ¯ï¼Œæ˜¯æ— æ³•é€šè¿‡ä¿¡å·æ•æ‰åˆ°çš„ã€‚</p><p>ä½†æ˜¯ï¼Œåªæœ‰æ•è·åˆ°æ‰€æœ‰å´©æºƒçš„æƒ…å†µï¼Œæˆ‘ä»¬æ‰èƒ½å®ç°å´©æºƒçš„å…¨é¢ç›‘æ§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å…ˆå‘ç°äº†é—®é¢˜ï¼Œç„¶åæ‰èƒ½å¤Ÿåˆ†æé—®é¢˜ï¼Œæœ€åè§£å†³é—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä¸€èµ·åˆ†æä¸‹å¦‚ä½•æ•è·åˆ°è¿™ä¸¤ç±»å´©æºƒä¿¡æ¯ã€‚</p><h2>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¿¡å·å¯æ•è·çš„å´©æºƒæ—¥å¿—æ”¶é›†</h2><p>æ”¶é›†å´©æºƒæ—¥å¿—æœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯æ‰“å¼€ Xcode çš„èœå•é€‰æ‹© Product -&gt; Archiveã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/bb/86/bbabfbe28cf3bbd2bfb38d6396b28886.png?wh=1604*666\" alt=\"\"></p><center><span class=\"reference\">å›¾2 æ”¶é›†å´©æºƒæ—¥å¿—æœ€ç®€å•çš„æ–¹æ³•</span></center><p>ç„¶åï¼Œåœ¨æäº¤æ—¶é€‰ä¸Šâ€œUpload your appâ€™s symbols to receive symbolicated reports from Appleâ€ï¼Œä»¥åä½ å°±å¯ä»¥ç›´æ¥åœ¨ Xcode çš„ Archive é‡Œçœ‹åˆ°ç¬¦å·åŒ–åçš„å´©æºƒæ—¥å¿—äº†ã€‚</p><p>ä½†æ˜¯è¿™ç§æŸ¥çœ‹æ—¥å¿—çš„æ–¹å¼ï¼Œæ¯æ¬¡éƒ½æ˜¯çº¯æ‰‹å·¥çš„æ“ä½œï¼Œè€Œä¸”æ—¶æ•ˆæ€§è¾ƒå·®ã€‚æ‰€ä»¥ï¼Œç›®å‰å¾ˆå¤šå…¬å¸çš„å´©æºƒæ—¥å¿—ç›‘æ§ç³»ç»Ÿï¼Œéƒ½æ˜¯é€šè¿‡<a href=\"https://www.plcrashreporter.org/\">PLCrashReporter</a> è¿™æ ·çš„ç¬¬ä¸‰æ–¹å¼€æºåº“æ•è·å´©æºƒæ—¥å¿—ï¼Œç„¶åä¸Šä¼ åˆ°è‡ªå·±æœåŠ¡å™¨ä¸Šè¿›è¡Œæ•´ä½“ç›‘æ§çš„ã€‚</p><p>è€Œæ²¡æœ‰æœåŠ¡ç«¯å¼€å‘èƒ½åŠ›ï¼Œæˆ–è€…å¯¹æ•°æ®ä¸æ•æ„Ÿçš„å…¬å¸ï¼Œåˆ™ä¼šç›´æ¥ä½¿ç”¨ <a href=\"https://get.fabric.io/\">Fabric</a>æˆ–è€…<a href=\"https://bugly.qq.com/v2/\">Bugly</a>æ¥ç›‘æ§å´©æºƒã€‚</p><p>ä½ å¯èƒ½çº³é—·äº†ï¼šPLCrashReporter å’Œ Buglyè¿™ç±»å·¥å…·ï¼Œæ˜¯æ€ä¹ˆçŸ¥é“ App ä»€ä¹ˆæ—¶å€™å´©æºƒçš„ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘å°±å’Œä½ è¯¦ç»†åˆ†æä¸‹ã€‚</p><p>åœ¨å´©æºƒæ—¥å¿—é‡Œï¼Œä½ ç»å¸¸ä¼šçœ‹åˆ°ä¸‹é¢è¿™æ®µè¯´æ˜ï¼š</p><pre><code>Exception Type:        EXC_BAD_ACCESS (SIGSEGV)\n</code></pre><p>å®ƒè¡¨ç¤ºçš„æ˜¯ï¼ŒEXC_BAD_ACCESS è¿™ä¸ªå¼‚å¸¸ä¼šé€šè¿‡ SIGSEGV ä¿¡å·å‘ç°æœ‰é—®é¢˜çš„çº¿ç¨‹ã€‚è™½ç„¶ä¿¡å·çš„ç§ç±»æœ‰å¾ˆå¤šï¼Œä½†æ˜¯éƒ½å¯ä»¥é€šè¿‡æ³¨å†Œ signalHandler æ¥æ•è·åˆ°ã€‚å…¶å®ç°ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>void registerSignalHandler(void) {\n    signal(SIGSEGV, handleSignalException);\n    signal(SIGFPE, handleSignalException);\n    signal(SIGBUS, handleSignalException);\n    signal(SIGPIPE, handleSignalException);\n    signal(SIGHUP, handleSignalException);\n    signal(SIGINT, handleSignalException);\n    signal(SIGQUIT, handleSignalException);\n    signal(SIGABRT, handleSignalException);\n    signal(SIGILL, handleSignalException);\n}\n\nvoid handleSignalException(int signal) {\n    NSMutableString *crashString = [[NSMutableString alloc]init];\n    void* callstack[128];\n    int i, frames = backtrace(callstack, 128);\n    char** traceChar = backtrace_symbols(callstack, frames);\n    for (i = 0; i &lt;frames; ++i) {\n        [crashString appendFormat:@&quot;%s\\n&quot;, traceChar[i]];\n    }\n    NSLog(crashString);\n}\n</code></pre><p>ä¸Šé¢è¿™æ®µä»£ç å¯¹å„ç§ä¿¡å·éƒ½è¿›è¡Œäº†æ³¨å†Œï¼Œæ•è·åˆ°å¼‚å¸¸ä¿¡å·åï¼Œåœ¨å¤„ç†æ–¹æ³• handleSignalException é‡Œé€šè¿‡ backtrace_symbols æ–¹æ³•å°±èƒ½è·å–åˆ°å½“å‰çš„å †æ ˆä¿¡æ¯ã€‚å †æ ˆä¿¡æ¯å¯ä»¥å…ˆä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶å†ä¸Šä¼ åˆ°å´©æºƒç›‘æ§æœåŠ¡å™¨å°±å¯ä»¥äº†ã€‚</p><p>å…ˆå°†æ•è·åˆ°çš„å †æ ˆä¿¡æ¯ä¿å­˜åœ¨æœ¬åœ°ï¼Œæ˜¯ä¸ºäº†å®ç°å †æ ˆä¿¡æ¯æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦å®ç°æŒä¹…åŒ–å­˜å‚¨å‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºï¼Œåœ¨ä¿å­˜å®Œè¿™äº›å †æ ˆä¿¡æ¯ä»¥åï¼ŒApp å°±å´©æºƒäº†ï¼Œå´©æºƒåå†…å­˜é‡Œçš„æ•°æ®ä¹Ÿå°±éƒ½æ²¡æœ‰äº†ã€‚è€Œå°†æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ç£ç›˜ä¸­ï¼Œå°±å¯ä»¥åœ¨Appä¸‹æ¬¡å¯åŠ¨æ—¶èƒ½å¤Ÿå¾ˆæ–¹ä¾¿åœ°è¯»å–åˆ°è¿™äº›ä¿¡æ¯ã€‚</p><h2>ä¿¡å·æ•è·ä¸åˆ°çš„å´©æºƒä¿¡æ¯æ€ä¹ˆæ”¶é›†ï¼Ÿ</h2><p>ä½ æ˜¯ä¸æ˜¯ç»å¸¸ä¼šé‡åˆ°è¿™ä¹ˆä¸€ç§æƒ…å†µï¼ŒApp é€€åˆ°åå°åï¼Œå³ä½¿ä»£ç é€»è¾‘æ²¡æœ‰é—®é¢˜ä¹Ÿå¾ˆå®¹æ˜“å‡ºç°å´©æºƒã€‚è€Œä¸”ï¼Œè¿™äº›å´©æºƒå¾€å¾€æ˜¯å› ä¸ºç³»ç»Ÿå¼ºåˆ¶æ€æ‰äº†æŸäº›è¿›ç¨‹å¯¼è‡´çš„ï¼Œè€Œç³»ç»Ÿå¼ºæ€æŠ›å‡ºçš„ä¿¡å·è¿˜ç”±äºç³»ç»Ÿé™åˆ¶æ— æ³•è¢«æ•è·åˆ°ã€‚</p><p>ä¸€èˆ¬ï¼Œåœ¨é€€åå°æ—¶ä½ éƒ½ä¼šæŠŠå…³é”®ä¸šåŠ¡æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœä¿å­˜è¿‡ç¨‹ä¸­å‡ºç°äº†å´©æºƒå°±ä¼šä¸¢å¤±æˆ–æŸåå…³é”®æ•°æ®ï¼Œè¿›è€Œæ•°æ®æŸååˆä¼šå¯¼è‡´åº”ç”¨ä¸å¯ç”¨ã€‚è¿™ç§å…³é”®æ•°æ®çš„æŸåä¼šç»™ç”¨æˆ·å¸¦æ¥å·¨å¤§çš„æŸå¤±ã€‚</p><p>é‚£ä¹ˆï¼Œåå°å®¹æ˜“å´©æºƒçš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¦‚ä½•é¿å…åå°å´©æºƒï¼Ÿæ€ä¹ˆå»æ”¶é›†åå°ä¿¡å·æ•è·ä¸åˆ°çš„é‚£äº›å´©æºƒä¿¡æ¯å‘¢ï¼Ÿè¿˜æœ‰å“ªäº›ä¿¡å·æ•è·ä¸åˆ°çš„å´©æºƒæƒ…å†µï¼Ÿæ€æ ·ç›‘æ§å…¶ä»–æ— æ³•é€šè¿‡ä¿¡å·æ•è·çš„å´©æºƒä¿¡æ¯ï¼Ÿ</p><p>ç°åœ¨ï¼Œä½ å°±å¸¦ç€è¿™äº”ä¸ªé—®é¢˜ï¼Œç»§ç»­å¬æˆ‘è¯´ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>åå°å®¹æ˜“å´©æºƒçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>è¿™é‡Œï¼Œæˆ‘å…ˆä»‹ç»ä¸‹ iOS åå°ä¿æ´»çš„5ç§æ–¹å¼ï¼šBackground Modeã€Background Fetchã€Silent Pushã€PushKitã€Background Taskã€‚</p><ul>\n<li>ä½¿ç”¨ Background Modeæ–¹å¼çš„è¯ï¼ŒApp Storeåœ¨å®¡æ ¸æ—¶ä¼šæé«˜å¯¹App çš„è¦æ±‚ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåªæœ‰é‚£äº›åœ°å›¾ã€éŸ³ä¹æ’­æ”¾ã€VoIP ç±»çš„ App æ‰èƒ½é€šè¿‡å®¡æ ¸ã€‚</li>\n<li>Background Fetchæ–¹å¼çš„å”¤é†’æ—¶é—´ä¸ç¨³å®šï¼Œè€Œä¸”ç”¨æˆ·å¯ä»¥åœ¨ç³»ç»Ÿé‡Œè®¾ç½®å…³é—­è¿™ç§æ–¹å¼ï¼Œå¯¼è‡´å®ƒçš„ä½¿ç”¨åœºæ™¯å¾ˆå°‘ã€‚</li>\n<li>Silent Push æ˜¯æ¨é€çš„ä¸€ç§ï¼Œä¼šåœ¨åå°å”¤èµ· App 30ç§’ã€‚å®ƒçš„ä¼˜å…ˆçº§å¾ˆä½ï¼Œä¼šè°ƒç”¨ application:didReceiveRemoteNotifiacation:fetchCompletionHandler: è¿™ä¸ª delegateï¼Œå’Œæ™®é€šçš„ remote push notification æ¨é€è°ƒç”¨çš„ delegate æ˜¯ä¸€æ ·çš„ã€‚</li>\n<li>PushKit åå°å”¤é†’ App åèƒ½å¤Ÿä¿æ´»30ç§’ã€‚å®ƒä¸»è¦ç”¨äºæå‡ VoIP åº”ç”¨çš„ä½“éªŒã€‚</li>\n<li>Background Task æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨æœ€å¤šçš„ã€‚App é€€åå°åï¼Œé»˜è®¤éƒ½ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</li>\n</ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±çœ‹ä¸€ä¸‹ï¼Œ<strong>Background Task æ–¹å¼ä¸ºä»€ä¹ˆæ˜¯ä½¿ç”¨æœ€å¤šçš„ï¼Œå®ƒå¯ä»¥è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ</strong></p><p>åœ¨ä½ çš„ç¨‹åºé€€åˆ°åå°ä»¥åï¼Œåªæœ‰å‡ ç§’é’Ÿçš„æ—¶é—´å¯ä»¥æ‰§è¡Œä»£ç ï¼Œæ¥ä¸‹æ¥å°±ä¼šè¢«ç³»ç»ŸæŒ‚èµ·ã€‚è¿›ç¨‹æŒ‚èµ·åæ‰€æœ‰çº¿ç¨‹éƒ½ä¼šæš‚åœï¼Œä¸ç®¡è¿™ä¸ªçº¿ç¨‹æ˜¯æ–‡ä»¶è¯»å†™è¿˜æ˜¯å†…å­˜è¯»å†™éƒ½ä¼šè¢«æš‚åœã€‚ä½†æ˜¯ï¼Œæ•°æ®è¯»å†™è¿‡ç¨‹æ— æ³•æš‚åœåªèƒ½è¢«ä¸­æ–­ï¼Œä¸­æ–­æ—¶æ•°æ®è¯»å†™å¼‚å¸¸è€Œä¸”å®¹æ˜“æŸåæ–‡ä»¶ï¼Œæ‰€ä»¥ç³»ç»Ÿä¼šé€‰æ‹©ä¸»åŠ¨æ€æ‰ App è¿›ç¨‹ã€‚</p><p>è€ŒBackground Taskè¿™ç§æ–¹å¼ï¼Œå°±æ˜¯ç³»ç»Ÿæä¾›äº† beginBackgroundTaskWithExpirationHandler æ–¹æ³•æ¥å»¶é•¿åå°æ‰§è¡Œæ—¶é—´ï¼Œå¯ä»¥è§£å†³ä½ é€€åå°åè¿˜éœ€è¦ä¸€äº›æ—¶é—´å»å¤„ç†ä¸€äº›ä»»åŠ¡çš„è¯‰æ±‚ã€‚</p><p>Background Task æ–¹å¼çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¦‚ä¸‹é¢è¿™æ®µä»£ç æ‰€ç¤ºï¼š</p><pre><code>- (void)applicationDidEnterBackground:(UIApplication *)application {\n    self.backgroundTaskIdentifier = [application beginBackgroundTaskWithExpirationHandler:^( void) {\n        [self yourTask];\n    }];\n}\n</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼ŒyourTask ä»»åŠ¡æœ€å¤šæ‰§è¡Œ3åˆ†é’Ÿï¼Œ3åˆ†é’Ÿå†… yourTask è¿è¡Œå®Œæˆï¼Œä½ çš„ App å°±ä¼šæŒ‚èµ·ã€‚ å¦‚æœ yourTask åœ¨3åˆ†é’Ÿä¹‹å†…æ²¡æœ‰æ‰§è¡Œå®Œçš„è¯ï¼Œç³»ç»Ÿä¼šå¼ºåˆ¶æ€æ‰è¿›ç¨‹ï¼Œä»è€Œé€ æˆå´©æºƒï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆAppé€€åå°å®¹æ˜“å‡ºç°å´©æºƒçš„åŸå› ã€‚</p><p>åå°å´©æºƒé€ æˆçš„å½±å“æ˜¯æœªçŸ¥çš„ã€‚æŒä¹…åŒ–å­˜å‚¨çš„æ•°æ®å‡ºç°äº†é—®é¢˜ï¼Œå°±ä¼šé€ æˆä½ çš„ App æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹çœ‹ç¬¬äºŒä¸ªé—®é¢˜ï¼š<strong>å¦‚ä½•é¿å…åå°å´©æºƒå‘¢ï¼Ÿ</strong></p><p>ä½ çŸ¥é“äº†ï¼Œ App é€€åå°åï¼Œå¦‚æœæ‰§è¡Œæ—¶é—´è¿‡é•¿å°±ä¼šå¯¼è‡´è¢«ç³»ç»Ÿæ€æ‰ã€‚é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬è¦æƒ³é¿å…è¿™ç§å´©æºƒå‘ç”Ÿçš„è¯ï¼Œå°±éœ€è¦ä¸¥æ ¼æ§åˆ¶åå°æ•°æ®çš„è¯»å†™æ“ä½œã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥å…ˆåˆ¤æ–­éœ€è¦å¤„ç†çš„æ•°æ®çš„å¤§å°ï¼Œå¦‚æœæ•°æ®è¿‡å¤§ï¼Œä¹Ÿå°±æ˜¯åœ¨åå°é™åˆ¶æ—¶é—´å†…æˆ–å»¶é•¿åå°æ‰§è¡Œæ—¶é—´åä¹Ÿå¤„ç†ä¸å®Œçš„è¯ï¼Œå¯ä»¥è€ƒè™‘åœ¨ç¨‹åºä¸‹æ¬¡å¯åŠ¨æˆ–åå°å”¤é†’æ—¶å†è¿›è¡Œå¤„ç†ã€‚</p><p>åŒæ—¶ï¼ŒAppé€€åå°åï¼Œè¿™ç§ç”±äºåœ¨è§„å®šæ—¶é—´å†…æ²¡æœ‰å¤„ç†å®Œè€Œè¢«ç³»ç»Ÿå¼ºåˆ¶æ€æ‰çš„å´©æºƒï¼Œæ˜¯æ— æ³•é€šè¿‡ä¿¡å·è¢«æ•è·åˆ°çš„ã€‚è¿™ä¹Ÿè¯´æ˜äº†ï¼Œéšç€å›¢é˜Ÿè§„æ¨¡æ‰©å¤§ï¼Œè¦æƒ³ä¿è¯ App é«˜å¯ç”¨çš„è¯ï¼Œåå°å´©æºƒçš„ç›‘æ§å°±å°¤ä¸ºé‡è¦äº†ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬åˆåº”è¯¥<strong>æ€ä¹ˆå»æ”¶é›†é€€åå°åè¶…è¿‡ä¿æ´»é˜ˆå€¼è€Œå¯¼è‡´ä¿¡å·æ•è·ä¸åˆ°çš„é‚£äº›å´©æºƒä¿¡æ¯å‘¢ï¼Ÿ</strong></p><p>é‡‡ç”¨Background Taskæ–¹å¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ® beginBackgroundTaskWithExpirationHandler ä¼šè®©åå°ä¿æ´»3åˆ†é’Ÿè¿™ä¸ªé˜ˆå€¼ï¼Œå…ˆè®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œåœ¨æ¥è¿‘3åˆ†é’Ÿæ—¶åˆ¤æ–­åå°ç¨‹åºæ˜¯å¦è¿˜åœ¨æ‰§è¡Œã€‚å¦‚æœè¿˜åœ¨æ‰§è¡Œçš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ¤æ–­è¯¥ç¨‹åºå³å°†åå°å´©æºƒï¼Œè¿›è¡Œä¸ŠæŠ¥ã€è®°å½•ï¼Œä»¥è¾¾åˆ°ç›‘æ§çš„æ•ˆæœã€‚</p><p><strong>è¿˜æœ‰å“ªäº›ä¿¡å·æ•è·ä¸åˆ°çš„å´©æºƒæƒ…å†µï¼Ÿæ€æ ·ç›‘æ§å…¶ä»–æ— æ³•é€šè¿‡ä¿¡å·æ•è·çš„å´©æºƒä¿¡æ¯ï¼Ÿ</strong></p><p>å…¶ä»–æ•è·ä¸åˆ°çš„å´©æºƒæƒ…å†µè¿˜æœ‰å¾ˆå¤šï¼Œä¸»è¦å°±æ˜¯å†…å­˜æ‰“çˆ†å’Œä¸»çº¿ç¨‹å¡é¡¿æ—¶é—´è¶…è¿‡é˜ˆå€¼è¢« watchdog æ€æ‰è¿™ä¸¤ç§æƒ…å†µã€‚</p><p>å…¶å®ï¼Œç›‘æ§è¿™ä¸¤ç±»å´©æºƒçš„æ€è·¯å’Œç›‘æ§åå°å´©æºƒç±»ä¼¼ï¼Œæˆ‘ä»¬éƒ½å…ˆè¦æ‰¾åˆ°å®ƒä»¬çš„é˜ˆå€¼ï¼Œç„¶ååœ¨ä¸´è¿‘é˜ˆå€¼æ—¶è¿˜åœ¨æ‰§è¡Œçš„åå°ç¨‹åºï¼Œåˆ¤æ–­ä¸ºå°†è¦å´©æºƒï¼Œæ”¶é›†ä¿¡æ¯å¹¶ä¸ŠæŠ¥ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šå…³äºå†…å­˜å’Œå¡é¡¿é˜ˆå€¼æ˜¯æ€ä¹ˆè·å–çš„ï¼Œæˆ‘ä¼šåœ¨ç¬¬13ç¯‡æ–‡ç« â€œå¦‚ä½•åˆ©ç”¨ RunLoop åŸç†å»ç›‘æ§å¡é¡¿ï¼Ÿâ€ï¼Œä»¥åŠç¬¬14ç¯‡æ–‡ç« â€œä¸´è¿‘ OOMï¼Œå¦‚ä½•è·å–è¯¦ç»†å†…å­˜åˆ†é…ä¿¡æ¯ï¼Œåˆ†æå†…å­˜é—®é¢˜ï¼Ÿâ€ä¸­å’Œä½ è¯¦ç»†è¯´æ˜ã€‚</p>\n</blockquote><p>å¯¹äºå†…å­˜æ‰“çˆ†ä¿¡æ¯çš„æ”¶é›†ï¼Œä½ å¯ä»¥é‡‡ç”¨å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰çš„æ–¹å¼æ¥ä¿å­˜ç°åœºã€‚ä¸»çº¿ç¨‹å¡é¡¿æ—¶é—´è¶…è¿‡é˜ˆå€¼è¿™ç§æƒ…å†µï¼Œä½ åªè¦æ”¶é›†å½“å‰çº¿ç¨‹çš„å †æ ˆä¿¡æ¯å°±å¯ä»¥äº†ã€‚</p><h2>é‡‡é›†åˆ°å´©æºƒä¿¡æ¯åå¦‚ä½•åˆ†æå¹¶è§£å†³å´©æºƒé—®é¢˜å‘¢ï¼Ÿ</h2><p>é€šè¿‡ä¸Šé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬å·²ç»è§£å†³äº†å´©æºƒä¿¡æ¯é‡‡é›†çš„é—®é¢˜ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¿™äº›ä¿¡æ¯è¿›è¡Œåˆ†æï¼Œè¿›è€Œè§£å†³Appçš„å´©æºƒé—®é¢˜ã€‚</p><p>æˆ‘ä»¬é‡‡é›†åˆ°çš„å´©æºƒæ—¥å¿—ï¼Œä¸»è¦åŒ…å«çš„ä¿¡æ¯ä¸ºï¼šè¿›ç¨‹ä¿¡æ¯ã€åŸºæœ¬ä¿¡æ¯ã€å¼‚å¸¸ä¿¡æ¯ã€çº¿ç¨‹å›æº¯ã€‚</p><ul>\n<li>è¿›ç¨‹ä¿¡æ¯ï¼šå´©æºƒè¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚å´©æºƒæŠ¥å‘Šå”¯ä¸€æ ‡è¯†ç¬¦ã€å”¯ä¸€é”®å€¼ã€è®¾å¤‡æ ‡è¯†ï¼›</li>\n<li>åŸºæœ¬ä¿¡æ¯ï¼šå´©æºƒå‘ç”Ÿçš„æ—¥æœŸã€iOS ç‰ˆæœ¬ï¼›</li>\n<li>å¼‚å¸¸ä¿¡æ¯ï¼šå¼‚å¸¸ç±»å‹ã€å¼‚å¸¸ç¼–ç ã€å¼‚å¸¸çš„çº¿ç¨‹ï¼›</li>\n<li>çº¿ç¨‹å›æº¯ï¼šå´©æºƒæ—¶çš„æ–¹æ³•è°ƒç”¨æ ˆã€‚</li>\n</ul><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ†æå´©æºƒæ—¥å¿—æ—¶æœ€å…ˆçœ‹çš„æ˜¯å¼‚å¸¸ä¿¡æ¯ï¼Œåˆ†æå‡ºé—®é¢˜çš„æ˜¯å“ªä¸ªçº¿ç¨‹ï¼Œåœ¨çº¿ç¨‹å›æº¯é‡Œæ‰¾åˆ°é‚£ä¸ªçº¿ç¨‹ï¼›ç„¶åï¼Œåˆ†ææ–¹æ³•è°ƒç”¨æ ˆï¼Œç¬¦å·åŒ–åçš„æ–¹æ³•è°ƒç”¨æ ˆå¯ä»¥å®Œæ•´åœ°çœ‹åˆ°æ–¹æ³•è°ƒç”¨çš„è¿‡ç¨‹ï¼Œä»è€ŒçŸ¥é“é—®é¢˜å‘ç”Ÿåœ¨å“ªä¸ªæ–¹æ³•çš„è°ƒç”¨ä¸Šã€‚</p><p>å…¶ä¸­ï¼Œæ–¹æ³•è°ƒç”¨æ ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/93/2a/93ae6e6c8275486052e08317a0d9db2a.png?wh=1830*1144\" alt=\"\"></p><center><span class=\"reference\">å›¾3 æ–¹æ³•è°ƒç”¨æ ˆå±•ç¤ºå›¾ç‰‡</span></center><p>æ–¹æ³•è°ƒç”¨æ ˆé¡¶ï¼Œå°±æ˜¯æœ€åå¯¼è‡´å´©æºƒçš„æ–¹æ³•è°ƒç”¨ã€‚å®Œæ•´çš„å´©æºƒæ—¥å¿—é‡Œï¼Œé™¤äº†çº¿ç¨‹æ–¹æ³•è°ƒç”¨æ ˆè¿˜æœ‰å¼‚å¸¸ç¼–ç ã€‚å¼‚å¸¸ç¼–ç ï¼Œå°±åœ¨å¼‚å¸¸ä¿¡æ¯é‡Œã€‚</p><p>ä¸€äº›è¢«ç³»ç»Ÿæ€æ‰çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼‚å¸¸ç¼–ç æ¥åˆ†æã€‚ä½ å¯ä»¥åœ¨ç»´åŸºç™¾ç§‘ä¸Šï¼ŒæŸ¥çœ‹<a href=\"https://en.wikipedia.org/wiki/Hexspeak\">å®Œæ•´çš„å¼‚å¸¸ç¼–ç </a>ã€‚è¿™é‡Œåˆ—å‡ºäº†44ç§å¼‚å¸¸ç¼–ç ï¼Œä½†å¸¸è§çš„å°±æ˜¯å¦‚ä¸‹ä¸‰ç§ï¼š</p><ul>\n<li>0x8badf00dï¼Œè¡¨ç¤º App åœ¨ä¸€å®šæ—¶é—´å†…æ— å“åº”è€Œè¢« watchdog æ€æ‰çš„æƒ…å†µã€‚</li>\n<li>0xdeadfa11ï¼Œè¡¨ç¤ºAppè¢«ç”¨æˆ·å¼ºåˆ¶é€€å‡ºã€‚</li>\n<li>0xc00010ffï¼Œè¡¨ç¤ºAppå› ä¸ºè¿è¡Œé€ æˆè®¾å¤‡æ¸©åº¦å¤ªé«˜è€Œè¢«æ€æ‰ã€‚</li>\n</ul><p>0x8badf00d è¿™ç§æƒ…å†µæ˜¯å‡ºç°æœ€å¤šçš„ã€‚å½“å‡ºç°è¢« watchdog æ€æ‰çš„æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠèŒƒå›´æ§åˆ¶åœ¨ä¸»çº¿ç¨‹è¢«å¡çš„æƒ…å†µã€‚æˆ‘ä¼šåœ¨ç¬¬13ç¯‡æ–‡ç« â€œå¦‚ä½•åˆ©ç”¨ RunLoop åŸç†å»ç›‘æ§å¡é¡¿ï¼Ÿâ€ä¸­ï¼Œå’Œä½ è¯¦ç»†è¯´æ˜å¦‚ä½•å»ç›‘æ§è¿™ç§æƒ…å†µæ¥é˜²èŒƒå’Œå¿«é€Ÿå®šä½åˆ°é—®é¢˜ã€‚</p><p>0xdeadfa11 çš„æƒ…å†µï¼Œæ˜¯ç”¨æˆ·çš„ä¸»åŠ¨è¡Œä¸ºï¼Œæˆ‘ä»¬ä¸ç”¨å¤ªå…³æ³¨ã€‚</p><p>0xc00010ff è¿™ç§æƒ…å†µï¼Œå°±è¦å¯¹æ¯ä¸ªçº¿ç¨‹ CPU è¿›è¡Œé’ˆå¯¹æ€§çš„æ£€æŸ¥å’Œä¼˜åŒ–ã€‚æˆ‘ä¼šåœ¨ç¬¬18ç¯‡æ–‡ç« â€œæ€ä¹ˆå‡å°‘ App çš„ç”µé‡æ¶ˆè€—ï¼Ÿâ€ä¸­ï¼Œå’Œä½ è¯¦ç»†è¯´æ˜ã€‚</p><p>é™¤äº†å´©æºƒæ—¥å¿—å¤–ï¼Œå´©æºƒç›‘æ§å¹³å°è¿˜éœ€è¦å¯¹æ‰€æœ‰é‡‡é›†ä¸Šæ¥çš„æ—¥å¿—è¿›è¡Œç»Ÿè®¡ã€‚æˆ‘ä»¥è…¾è®¯çš„ <a href=\"https://bugly.qq.com/v2/\">Bugly å¹³å°</a>ä¸ºä¾‹ï¼Œå’Œä½ ä¸€èµ·çœ‹ä¸€ä¸‹å´©æºƒç›‘æ§å¹³å°ä¸€èˆ¬éƒ½ä¼šè®°å½•å“ªäº›ä¿¡æ¯ï¼Œæ¥è¾…åŠ©å¼€å‘è€…è¿½æº¯å´©æºƒé—®é¢˜ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/55/2a/5546c31d852c3fc5c617ad2f7df08d2a.png?wh=1900*864\" alt=\"\"></p><center><span class=\"reference\">å›¾4 Buglyçš„å´©æºƒè¶‹åŠ¿å±•ç¤º</span></center><p>ä¸Šå›¾å±•ç¤ºçš„å°±æ˜¯æ•´ä½“å´©æºƒæƒ…å†µçš„è¶‹åŠ¿å›¾ï¼Œä½ å¯ä»¥é€‰æ‹© App çš„ä¸åŒç‰ˆæœ¬æŸ¥çœ‹ä¸åŒæ—¶é—´æ®µçš„è¶‹åŠ¿ã€‚è¿™ä¸ªç›¸å½“äºæ€»æ§å°ï¼Œèƒ½å¤Ÿå…¨å±€è§‚å¯Ÿ App çš„å´©æºƒå¤§ç›˜ã€‚</p><p>é™¤äº†å´©æºƒç‡ï¼Œä½ è¿˜å¯ä»¥åœ¨è¿™ä¸ªå¹³å°ä¸Šèƒ½æŸ¥çœ‹æ¬¡æ•°ã€ç”¨æˆ·æ•°ç­‰è¶‹åŠ¿ã€‚ä¸‹å›¾å±•ç¤ºçš„æ˜¯æŸä¸€ä¸ªAppçš„å´©æºƒåœ¨ä¸åŒ iOS ç³»ç»Ÿã€ä¸åŒiPhone è®¾å¤‡ã€App ç‰ˆæœ¬çš„å æ¯”æƒ…å†µã€‚è¿™ä¹Ÿæ˜¯å…¨å±€å¤§ç›˜è§‚å¯Ÿï¼Œä»ä¸åŒç»´åº¦æ¥åˆ†æã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/7c/0a663cafbb223c58c0f6b0ac49c32a7c.png?wh=1886*712\" alt=\"\"></p><center><span class=\"reference\">å›¾5 Appå´©æºƒåœ¨ä¸åŒçš„ç³»ç»Ÿç‰ˆæœ¬ã€è®¾å¤‡ã€ç‰ˆæœ¬ç‰ˆæœ¬çš„å æ¯”</span></center><p>æœ‰äº†å…¨å±€å¤§ç›˜ä¿¡æ¯ï¼Œä¸€æ—¦å‡ºç°å¤§é‡å´©æºƒï¼Œä½ å°±éœ€è¦æ˜ç™½æ˜¯å“ªäº›æ–¹æ³•è°ƒç”¨å‡ºç°äº†é—®é¢˜ï¼Œéœ€è¦æ ¹æ®å½±å“çš„ç”¨æˆ·æ•°é‡æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæ’åˆ—å‡ºæ¥ï¼Œä¼˜å…ˆè§£å†³å½±å“é¢å¤§çš„é—®é¢˜ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/03/d9/03ae8ce7dd38af5d1d96a8b71f1d9dd9.png?wh=1858*506\" alt=\"\"></p><center><span class=\"reference\">å›¾6 App å´©æºƒé—®é¢˜åˆ—è¡¨</span></center><p>åŒæ—¶ï¼Œæ¯ä¸ªå´©æºƒä¹Ÿéƒ½æœ‰è‡ªå·±çš„å´©æºƒè¶‹åŠ¿å›¾ã€iOS ç³»ç»Ÿåˆ†å¸ƒå›¾ç­‰ä¿¡æ¯ï¼Œæ¥è¾…åŠ©å¼€å‘è€…è·Ÿè¸ªå´©æºƒä¿®å¤æ•ˆæœã€‚</p><p>æœ‰äº†å´©æºƒçš„æ–¹æ³•è°ƒç”¨å †æ ˆåï¼Œå¤§éƒ¨åˆ†é—®é¢˜éƒ½èƒ½å¤Ÿé€šè¿‡æ–¹æ³•è°ƒç”¨å †æ ˆï¼Œæ¥å¿«é€Ÿåœ°å®šä½åˆ°å…·ä½“æ˜¯å“ªä¸ªæ–¹æ³•è°ƒç”¨å‡ºç°äº†é—®é¢˜ã€‚æœ‰äº›é—®é¢˜ä»…ä»…é€šè¿‡è¿™äº›å †æ ˆè¿˜æ— æ³•åˆ†æå‡ºæ¥ï¼Œè¿™æ—¶å°±éœ€è¦å€ŸåŠ©å´©æºƒå‰ç”¨æˆ·ç›¸å…³è¡Œä¸ºå’Œç³»ç»Ÿç¯å¢ƒçŠ¶å†µçš„æ—¥å¿—æ¥è¿›è¡Œè¿›ä¸€æ­¥åˆ†æã€‚</p><p>å…³äºæ—¥å¿—å¦‚ä½•æ”¶é›†ååŠ©åˆ†æé—®é¢˜ï¼Œæˆ‘ä¼šåœ¨ç¬¬15ç¯‡æ–‡ç« â€œæ—¥å¿—ç›‘æ§ï¼šæ€æ ·è·å– App ä¸­çš„å…¨é‡æ—¥å¿—ï¼Ÿâ€ä¸­ï¼Œå’Œä½ è¯¦ç»†è¯´æ˜ã€‚</p><h2>å°ç»“</h2><p>å­¦ä¹ å®Œä»Šå¤©çš„è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ç›¸ä¿¡ä½ å°±ä¸å†æ˜¯åªèƒ½ä¾èµ–ç°æœ‰å·¥å…·æ¥è§£å†³çº¿ä¸Šå´©æºƒé—®é¢˜çš„ iOS å¼€å‘è€…äº†ã€‚åœ¨é‡åˆ°é‚£äº›å·¥å…·æ— æ³•æä¾›ä¿¡æ¯çš„å´©æºƒåœºæ™¯æ—¶ï¼Œä½ ä¹Ÿæœ‰äº†è‡ªå·±åŠ¨æ‰‹å»æ”¶é›†å´©æºƒä¿¡æ¯çš„èƒ½åŠ›ã€‚</p><p>ç°æœ‰çš„å´©æºƒç›‘æ§ç³»ç»Ÿï¼Œä¸ç®¡æ˜¯å¼€æºçš„å´©æºƒæ—¥å¿—æ”¶é›†åº“è¿˜æ˜¯ç±»ä¼¼ Bugly çš„å´©æºƒç›‘æ§ç³»ç»Ÿï¼Œç¦»æœ€ä¼˜è§£éƒ½è¿˜æœ‰ä¸€å®šçš„è·ç¦»ã€‚</p><p>è¿™ä¸ªâ€œéæœ€ä¼˜â€ï¼Œæˆ‘ä»¬éœ€è¦åˆ†ä¸¤ä¸ªç»´åº¦æ¥çœ‹ï¼šä¸€ä¸ªç»´åº¦æ˜¯ï¼Œæ€æ ·æ‰èƒ½å¤Ÿè®©å´©æºƒä¿¡æ¯çš„æ”¶é›†æ•ˆç‡æ›´é«˜ï¼Œä¸¢å¤±ç‡æ›´ä½ï¼›å¦ä¸€ä¸ªç»´åº¦æ˜¯ï¼Œå¦‚ä½•èƒ½å¤Ÿæ”¶é›†åˆ°æ›´å¤šçš„å´©æºƒä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯ç³»ç»Ÿå¼ºæ€å¸¦æ¥çš„å´©æºƒã€‚</p><p>éšç€iOS ç³»ç»Ÿçš„è¿­ä»£æ›´æ–°ï¼Œå¼ºæ€é˜ˆå€¼å’Œå¼ºæ€ç§ç±»éƒ½åœ¨ä¸æ–­å˜åŒ–ï¼Œå› æ­¤å´©æºƒç›‘æ§ç³»ç»Ÿä¹Ÿéœ€è¦è·Ÿä¸Šç³»ç»Ÿè¿­ä»£æ›´æ–°çš„èŠ‚å¥ï¼ŒåŒæ—¶è¿˜è¦åšå¥½å‘ä¸‹å…¼å®¹ã€‚</p><h2>è¯¾åå°ä½œä¸š</h2><p>è¯·ä½ å†™ä¸€æ®µä»£ç ï¼Œåœ¨ App é€€åå°ä»¥åæ‰§è¡Œä¸€æ®µè¶…è¿‡3åˆ†é’Ÿçš„ä»»åŠ¡ï¼Œåœ¨ä¸´è¿‘3åˆ†é’Ÿæ—¶æ‰“å°å‡ºçº¿ç¨‹å †æ ˆã€‚</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p><span class=\"reference\">æœ€è¿‘ï¼Œæˆ‘æ”¶åˆ°ä¸€äº›åŒå­¦çš„åé¦ˆï¼Œè¯´è¿™é—¨è¯¾çš„ä¸€äº›å†…å®¹æ¯”è¾ƒæ·±ï¼Œä¸€æ—¶éš¾ä»¥ç¢ç£¨é€ã€‚å¦‚æœä½ ä¹Ÿæœ‰è¿™æ ·çš„æ„Ÿå—ï¼Œæ¨èä½ å­¦ä¹ æå®¢æ—¶é—´åˆšåˆšä¸Šæ–°çš„å¦ä¸€é—¨è§†é¢‘è¯¾ç¨‹ï¼šç”±è…¾è®¯é«˜çº§å·¥ç¨‹å¸ˆæœ±å¾·æƒï¼Œä¸»è®²çš„ã€Šä» 0 å¼€å‘ä¸€æ¬¾ iOS Appã€‹ã€‚</span></p><p><span class=\"reference\">æœ±å¾·æƒè€å¸ˆå°†ä¼šåŸºäºæœ€æ–°æŠ€æœ¯ï¼Œä»å®è·µå‡ºå‘ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ æ„å»ºç±»ä»Šæ—¥å¤´æ¡çš„Appã€‚è¦çŸ¥é“ï¼Œé‚£äº›å¾ˆç‰›çš„ iOS å¼€å‘è€…ï¼Œå¾€å¾€éƒ½å…·å¤‡ç‹¬ç«‹å¼€å‘ä¸€æ¬¾ App çš„èƒ½åŠ›ã€‚</span></p><p><span class=\"reference\">è¿™é—¨è¯¾æ­£åœ¨ä¸Šæ–°ä¼˜æƒ ï¼Œæ¬¢è¿ç‚¹å‡»<a href=\"https://time.geekbang.org/course/intro/169?utm_term=zeusKHUZ0&amp;utm_source=app&amp;utm_medium=geektime&amp;utm_campaign=169-presell&amp;utm_content=daiming\">è¿™é‡Œ</a>è¯•çœ‹ã€‚</span></p><p></p>","comments":[{"had_liked":false,"id":85094,"user_name":"Hjay","can_delete":false,"product_type":"c1","uid":1334835,"ip_address":"","ucode":"279C233D6AC437","user_header":"https://static001.geekbang.org/account/avatar/00/14/5e/33/6d1687fd.jpg","comment_is_top":false,"comment_ctime":1554977766,"is_pvip":false,"replies":[{"id":"30681","content":"ä½ è¯´çš„æ²¡é”™ï¼Œç°åœ¨æ”¶é›† crash çš„æ¡†æ¶éƒ½æ˜¯ç”¨çš„Machå¼‚å¸¸+Unixä¿¡å·æ–¹å¼è¿™æ ·çš„æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1555124872,"ip_address":"","comment_id":85094,"utype":1}],"discussion_count":4,"race_medal":0,"score":"100339225574","product_id":100024501,"comment_content":"æ–‡ä¸­æ‰€è®²çš„crashæ•è·åªè¯´äº†é’ˆå¯¹ä¿¡å·çš„ï¼ŒåŸºæœ¬éƒ½æ˜¯éœ€è¦å†…æ ¸æ“ä½œçš„ä¸€äº›æ‰ä¼šä»¥ä¿¡å·çš„å½¢å¼ç»™åˆ°è¿›ç¨‹ï¼Œè€Œocè‡ªå·±ä¹Ÿæœ‰å®šä¹‰ä¸€äº›å¹¶æ²¡æ·±å…¥åˆ°å†…æ ¸çš„ä¸€äº›exceptionï¼Œè¿™äº›æ˜¯é€šè¿‡æ³¨å†Œexceptionhandleæ¥è¿›è¡Œæ•è·çš„ï¼Œæ‰€ä»¥crashçš„æ”¶é›†åº”è¯¥æ˜¯åˆ†ä¸¤å—ï¼Œåªè¯´ä¿¡å·è¿™ä¸€ç§æ˜¯ä¸å¤Ÿå®Œæ•´çš„","like_count":23,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446556,"discussion_content":"ä½ è¯´çš„æ²¡é”™ï¼Œç°åœ¨æ”¶é›† crash çš„æ¡†æ¶éƒ½æ˜¯ç”¨çš„Machå¼‚å¸¸+Unixä¿¡å·æ–¹å¼è¿™æ ·çš„æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555124872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1097252,"avatar":"https://static001.geekbang.org/account/avatar/00/10/be/24/51d5d1f2.jpg","nickname":"iOSå°èœé¸Ÿ","note":"","ucode":"6F0C7DCE309692","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37639,"discussion_content":"æ‰€ä»¥è¯´ï¼Œå‹æ ¹å°±æ²¡æœ‰ä»‹ç»å…¨å•Šï¼Œè¿™ä¹ˆé‡è¦çš„ä¸€å—ç»™æ¼è®²äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1571650169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1202431,"avatar":"https://static001.geekbang.org/account/avatar/00/12/58/ff/a722ba13.jpg","nickname":"Aa","note":"","ucode":"C72E9C081F3BC9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1097252,"avatar":"https://static001.geekbang.org/account/avatar/00/10/be/24/51d5d1f2.jpg","nickname":"iOSå°èœé¸Ÿ","note":"","ucode":"6F0C7DCE309692","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":140150,"discussion_content":"ä½ è¯´çš„æ²¡é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579349475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":37639,"ip_address":""},"score":140150,"extra":""},{"author":{"id":1337598,"avatar":"https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg","nickname":"å²æœˆ","note":"","ucode":"29A2A2BC3C4FE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1202431,"avatar":"https://static001.geekbang.org/account/avatar/00/12/58/ff/a722ba13.jpg","nickname":"Aa","note":"","ucode":"C72E9C081F3BC9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216444,"discussion_content":"çœ‹ä¸å‡ºè¿™ä¸ªä¸“æ æœ‰ä»€ä¹ˆè¯šæ„..\næœ‰äº›æ–‡ç« éƒ½æ˜¯ç”¨ä½œè€…å¾ˆä¹…ä»¥å‰çš„åšæ–‡ç›´æ¥å¤åˆ¶è¿‡æ¥çš„..","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585451886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":140150,"ip_address":""},"score":216444,"extra":""}]}]},{"had_liked":false,"id":83344,"user_name":"WeZZard","can_delete":false,"product_type":"c1","uid":1471692,"ip_address":"","ucode":"7499FC0D624F08","user_header":"https://static001.geekbang.org/account/avatar/00/16/74/cc/5ff05eb3.jpg","comment_is_top":false,"comment_ctime":1554541538,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"53094149090","product_id":100024501,"comment_content":"çˆ†æ£§ä¹Ÿå¯ä»¥å¼•èµ·å´©æ½°ã€‚çœ‹äº†å¾ˆå¤š iOS é¢è©¦çš„éˆè¡¨é¡Œç­”æ¡ˆéƒ½æ˜¯å–®ç´”ç”¨çš„è‡ªå‹•å¼•ç”¨è¨ˆæ•¸ç®¡ç†å¾Œç¹¼ç¯€é»ï¼Œé€™ç¨®åšæ³•ä¸‹éˆè¡¨é•·åˆ°æ•¸è¬å¾Œä¸€ææ§‹å°±æœƒå´©ï¼ŒåŸå› å°±æ˜¯è‡ªå‹•å¼•ç”¨è¨ˆæ•¸å¼•èµ·çš„éˆéŒ¶å„ç¯€é»éˆå¼ææ§‹æ‰€å°è‡´çš„çˆ†æ£§ã€‚","like_count":12,"discussions":[{"author":{"id":1430042,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL8bkxdc5LXXZJWia2EBD8kIM3ic9KiaVibqVGicHyeHCB8GXvLOaDNMxSVqMnnnFRrlf6BDuYtcoLUribw/132","nickname":"Geek_fd2ec3","note":"","ucode":"F61F9E228B4EFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268484,"discussion_content":"æ€ä¹ˆè§£å†³çš„å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589789032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92990,"user_name":"Null","can_delete":false,"product_type":"c1","uid":1382587,"ip_address":"","ucode":"A7D4DF2A43C7D8","user_header":"https://static001.geekbang.org/account/avatar/00/15/18/bb/9299fab1.jpg","comment_is_top":false,"comment_ctime":1557373876,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"44507046836","product_id":100024501,"comment_content":"è€å¸ˆï¼Œæˆ‘æ˜¯åšSDKï¼Œè¦å¦‚ä½•ä»æ•è·çš„æ—¥å¿—ä¸­åŒºåˆ†å‡ºæ¥å“ªäº›æ˜¯æˆ‘çš„SDKçš„ï¼Œå“ªäº›æ˜¯ä¸»ç«¯APPçš„ï¼Œå“ªäº›æ˜¯å…¶ä»–Framworkã€‚ç›®å‰äº†è§£çš„ï¼ŒåŠ¨æ€åº“æ”¶é›†çš„æ—¥å¿—ä¼šæœ‰åº“ä¿¡æ¯ï¼Œé™æ€åº“æ”¶é›†åˆ°çš„ä¿¡æ¯éƒ½æ˜¯APPçš„åå­—ã€‚ã€‚æ‹œæ±‚è€å¸ˆæŒ‡å¯¼ä¸‹ã€‚","like_count":10,"discussions":[{"author":{"id":1467974,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqRllUL85m1azlV9BxVGpsAPhLiaLLeWjRsTO5cIxG9NFJavpiabEzVD9qDzudnjwMr2zWBXMMgAQww/132","nickname":"leopardpan","note":"","ucode":"8A721910CCCFB5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281039,"discussion_content":"å¯ä»¥é€šè¿‡ç±»åå’Œæ–¹æ³•ååˆ¤æ–­ï¼Œä¸€èˆ¬åšsdkçš„ç±»å‰ç¼€éƒ½æœ‰è‡ªå·±çš„æ ‡è¯†ï¼Œä¾‹å¦‚ç³»ç»Ÿçš„NSè¿™æ ·ï¼Œä¸€æ˜¯ä¸ºäº†é˜²æ­¢è·Ÿåº”ç”¨å†…å…¶å®ƒçš„frameworkæˆ–ä»£ç ç±»åå†²çªï¼ŒäºŒæ˜¯ä¸ºäº†å‡ºé—®é¢˜å¾—æ—¶å€™å¥½åŒºåˆ†æ˜¯å“ªä¸ªsdké‡Œçš„ä»£ç é—®é¢˜ã€‚\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591665117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89478,"user_name":"Lottyå‘¨å°é±¼","can_delete":false,"product_type":"c1","uid":1453544,"ip_address":"","ucode":"FBC2E6DE49895A","user_header":"https://static001.geekbang.org/account/avatar/00/16/2d/e8/d53cc6ee.jpg","comment_is_top":false,"comment_ctime":1556182591,"is_pvip":false,"replies":[{"id":"32664","content":"å¾ˆå¥½çš„å»ºè®®","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1556891215,"ip_address":"","comment_id":89478,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40210888255","product_id":100024501,"comment_content":"æœ‰ä¸ªå°å°çš„å»ºè®®ï¼Œå¸Œæœ›æˆ´è€å¸ˆä»¥åè´´å‡ºçš„ä»£ç ç‰‡æ®µå†™ä¸€ä¸‹æ¥æºæˆ–è€…æºç é“¾æ¥ï¼Œè¿™æ ·æ–¹ä¾¿æŸ¥çœ‹çš„æ—¶å€™å¿«é€Ÿç¿»é˜…ä¸Šä¸‹æ–‡ã€‚","like_count":9,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448148,"discussion_content":"å¾ˆå¥½çš„å»ºè®®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556891215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211480,"user_name":"null","can_delete":false,"product_type":"c1","uid":1642151,"ip_address":"","ucode":"B0ACD1B5CA541B","user_header":"https://static001.geekbang.org/account/avatar/00/19/0e/a7/9b79c245.jpg","comment_is_top":false,"comment_ctime":1587970786,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31652741858","product_id":100024501,"comment_content":"1. æµ‹è¯•åå°æ‰§è¡Œè”è°ƒæ—¶é—´æ—¶ï¼Œä¸èƒ½æ˜¯è°ƒè¯•çŠ¶æ€ã€‚å¿…é¡»æ–­å¼€xcode<br>2. beginBackgroundTaskWithExpirationHandlerä¸endBackgroundTaskæ˜¯æˆå¯¹å‡ºç°çš„ã€‚å¦‚æœä¸æˆå¯¹å‡ºç°ï¼Œ5s appä¼šè¢«æ€æ‰ã€‚<br>3.æ­£ç¡®å†™æ³•:yourTaskåº”è¯¥æ”¾åœ¨beginBackgroundTaskWithExpirationHandlerå‰è°ƒç”¨,è€Œä¸æ˜¯blockå—<br> [self yourTaskWithApplication:application];<br>    self.backgroundTaskIdentifier = [application beginBackgroundTaskWithExpirationHandler:^(void) {<br>        [application endBackgroundTask:self.backgroundTaskIdentifier];<br>        self.backgroundTaskIdentifier = UIBackgroundTaskInvalid;<br>    }];<br>4. æˆ‘ä»¬å¯ä»¥å€ŸåŠ© æ§åˆ¶å° æ¥åˆ¤æ–­appæ˜¯å¦è¿˜åœ¨æ‰§è¡Œï¼Œæ—¥å¿—æ˜¯å¦è¿˜åœ¨æ‰“å°<br>","like_count":7},{"had_liked":false,"id":83765,"user_name":"yehot","can_delete":false,"product_type":"c1","uid":1003962,"ip_address":"","ucode":"2F1C2A1E5DB900","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/ba/cae2ed38.jpg","comment_is_top":false,"comment_ctime":1554712518,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"31619483590","product_id":100024501,"comment_content":"ä½¿ç”¨ registerSignalHandler å’ŒhandleSignalHandler æ˜¯èƒ½å¤Ÿæ•è·åˆ°å¼‚å¸¸ã€‚<br>ä½†æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™ app å·²ç»ç«‹å³è¦ crash äº†ã€‚æ•è·çš„å¼‚å¸¸æ€ä¹ˆæ‰èƒ½ç¡®ä¿èƒ½å¤ŸæŒä¹…åŒ–åˆ°æ²™ç›’å‘¢ï¼Ÿå†™å…¥æ–‡ä»¶çš„ä»£ç æ˜¯æ²¡æ³•ä¿è¯åœ¨ crash å‰æ­£å¸¸æ‰§è¡Œå®Œçš„å§ï¼","like_count":7,"discussions":[{"author":{"id":2368333,"avatar":"","nickname":"Geek_83bbf5","note":"","ucode":"64B18E8DFC04AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350722,"discussion_content":"å†™å…¥æ•°æ®çš„æ—¶å€™ - (void)performSelectorOnMainThread:(SEL)aSelector withObject:(nullable id)arg waitUntilDone:(BOOL)wait;\nwaitUntilDone è®¾ç½®ä¸ºYES å°±æ˜¯ä¸»çº¿ç¨‹åŒæ­¥æ‰§è¡Œ æ‰§è¡Œå®Œæ‰ä¼šå´©æºƒ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1613990020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2681398,"avatar":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","nickname":"D","note":"","ucode":"4112DE94C80A5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390330,"discussion_content":"æˆ‘æ˜¯é€šè¿‡åŒæ­¥çš„ç½‘ç»œè¯·æ±‚æ¥å®ç°ä¸Šä¼ logçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629784529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2858088,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqLlZ7ibJqRocm0EM4YF8iaJJFeicGI9U0gh5ZLeWTjXeicOFlT4tjKtIz8SpGqBPXAspLMbWD5GnrdhQ/132","nickname":"ç—´äººæŒ‡è·¯","note":"","ucode":"302C8ACA410F38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2681398,"avatar":"https://static001.geekbang.org/account/avatar/00/28/ea/36/7d088c63.jpg","nickname":"D","note":"","ucode":"4112DE94C80A5B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548611,"discussion_content":"ä¸ä¿é™©ï¼Œç½‘ç»œæœ¬èº«å°±æ˜¯ä¸å¯é çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643275869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":390330,"ip_address":""},"score":548611,"extra":""}]},{"author":{"id":1108007,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e8/27/4cb985b9.jpg","nickname":"æ˜¥é£","note":"","ucode":"29A33F2D4EA374","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307512,"discussion_content":"æˆ‘æµ‹è¯•æœ‰æ—¶é—´ä¿å­˜ä¿¡æ¯ã€‚å¦‚æœæ¯”è¾ƒè€—æ—¶å¯ä»¥ä½¿ç”¨ mmapï¼ˆæœ‰ç¬¬ä¸‰æ–¹å¾®ä¿¡MMKVï¼‰ ä¿å­˜æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600673599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1458781,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erQ5LXNgaZ3RUt15nM76EZ91BJiaqW3Ud1Qsg9icZ3fDAyibl5UIvvJJHOy6ANUTlYEFnlS7kb09icJeA/132","nickname":"rico","note":"","ucode":"8B52C9130B5EDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304962,"discussion_content":"å¯ä»¥é€šè¿‡runloopä¿æ´»çº¿ç¨‹ï¼ŒæŒä¹…åŒ–æ•°æ®åå†è®©app crashã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599724659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83353,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1456034,"ip_address":"","ucode":"3CCF37176E2E6E","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/a2/045733b3.jpg","comment_is_top":false,"comment_ctime":1554542866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27324346642","product_id":100024501,"comment_content":"@Mhy<br>1. â€˜If your app targets iOS 9.0 and later or OS X v10.11 and later, you don&#39;t need to unregister an observer in its deallocation methodã€‚â€™ åœ¨9.0ä¹‹å‰éœ€è¦æ‰‹åŠ¨remove è§‚å¯Ÿè€…ï¼Œå¦‚æœæ²¡æœ‰ç§»é™¤ä¼šå‡ºç°è§‚å¯Ÿè€…å´©æºƒæƒ…å†µã€‚<br>2. NSNotification æœ‰åŒæ­¥ã€å¼‚æ­¥ã€èšåˆå‘é€ç­‰çº¿ç¨‹é—®é¢˜ï¼Œä¸åŒçš„çº¿ç¨‹å¤„ç†ä¸å¥½å°±å¯èƒ½å‡ºç°å´©æºƒï¼Œæƒ…å†µæ¯”è¾ƒå¤šå¯ä»¥å‚è€ƒä¸€äº›èµ„æ–™ã€‚","like_count":6},{"had_liked":false,"id":83287,"user_name":"Mhy","can_delete":false,"product_type":"c1","uid":1287774,"ip_address":"","ucode":"DE19BCAD1F856E","user_header":"https://static001.geekbang.org/account/avatar/00/13/a6/5e/b05254a6.jpg","comment_is_top":false,"comment_ctime":1554519208,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23029355688","product_id":100024501,"comment_content":"è¯·é—®å…³äºNSNotificationçº¿ç¨‹é—®é¢˜èƒ½å¤§è‡´çš„è®²ä¸€ä¸‹å— ","like_count":5,"discussions":[{"author":{"id":1002401,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4b/a1/c2719a5a.jpg","nickname":"PandağŸŸ","note":"","ucode":"C6007A3192516A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5464,"discussion_content":"http://southpeak.github.io/2015/03/14/nsnotification-and-multithreading/","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566286646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128907,"user_name":"ä¸€çº¸ä¸¶è’å¹´","can_delete":false,"product_type":"c1","uid":1458078,"ip_address":"","ucode":"9A4C0364B97780","user_header":"https://static001.geekbang.org/account/avatar/00/16/3f/9e/7a6e6442.jpg","comment_is_top":false,"comment_ctime":1566982507,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18746851691","product_id":100024501,"comment_content":"è€å¸ˆ æ‚¨å¥½ , æˆ‘ æƒ³çŸ¥é“çš„æ˜¯  ä½ è®²è¿™ä¸€ç¯‡æ–‡ç«  æ²¡æœ‰ç¡®åˆ‡çš„è§£å†³é—®é¢˜å–, æˆ‘æƒ³äº†è§£çš„æ˜¯  æ€ä¹ˆæ¥è§£è¯»é‚£äº› å †æ ˆä¿¡æ¯. é‚£äº›å´©æºƒæ—¥å¿—, éƒ½çœ‹ä¸æ‡‚çš„.","like_count":4,"discussions":[{"author":{"id":2029340,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f7/1c/d1cff020.jpg","nickname":"MELO","note":"","ucode":"70BE8FBA819F73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281723,"discussion_content":"å¯¼å‡ºCrashæ–‡ä»¶ï¼Œé…åˆdsymæ–‡ä»¶ï¼Œç”¨Xcode å·¥å…·symbolicatecrashåšç¬¦å·åŒ–è§£æ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591797950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132164,"user_name":"will","can_delete":false,"product_type":"c1","uid":1457442,"ip_address":"","ucode":"93DC3993A50CBB","user_header":"https://static001.geekbang.org/account/avatar/00/16/3d/22/c6ff6e02.jpg","comment_is_top":false,"comment_ctime":1568034568,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14452936456","product_id":100024501,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿™ä¸ªå¯¹å—ï¼Œæˆ‘çœ‹äº†ï¼Œç³»ç»Ÿåˆšå¥½åœ¨å¿«3åˆ†é’Ÿåˆ°æ—¶å€™æ‰§è¡Œæ‰“å°çº¿ç¨‹å †æ ˆä¿¡æ¯<br>- (void)applicationDidEnterBackground:(UIApplication *)application {<br>    UIApplication  *app = [UIApplication sharedApplication];<br>    __block UIBackgroundTaskIdentifier bgTask = 0;<br>    <br>    NSLog(@&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;);<br>    <br>    <br>    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{<br>        NSLog(@&quot;&lt;&lt;&lt;&lt;&lt;&lt;&quot;);<br>        NSLog(@&quot;çº¿ç¨‹å †æ ˆä¿¡æ¯ï¼š%@&quot;,[NSThread callStackSymbols]);<br>        if (bgTask != UIBackgroundTaskInvalid) {<br>            [app endBackgroundTask:bgTask];<br>            bgTask = UIBackgroundTaskInvalid;<br>        }<br>        <br>    }];<br>}","like_count":3},{"had_liked":false,"id":94533,"user_name":"é¼ è¾ˆ","can_delete":false,"product_type":"c1","uid":1457947,"ip_address":"","ucode":"F8CD6602D9320E","user_header":"https://static001.geekbang.org/account/avatar/00/16/3f/1b/40293181.jpg","comment_is_top":false,"comment_ctime":1557835101,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14442736989","product_id":100024501,"comment_content":"- (void)applicationDidEnterBackground:(UIApplication *)application {<br>    self.backgroundTaskIdentifier = [application beginBackgroundTaskWithExpirationHandler:^( void) {<br>        [self yourTask];<br>    }];<br>}<br>è¿™ä¸ªä»£ç ä¸­çš„yourTaskï¼Œæ˜¯åå°ç”³è¯·3åˆ†é’Ÿä¹‹åï¼Œæ‰ä¼šè°ƒç”¨çš„å§ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæ²¡æœ‰æ‰§è¡Œå®Œ,æˆ‘è¯•äº†ä¸ä¼šå´©æºƒã€‚æ±‚è§£é‡Š","like_count":3},{"had_liked":false,"id":85164,"user_name":"Hiuzi","can_delete":false,"product_type":"c1","uid":1458862,"ip_address":"","ucode":"E9D5D92CF3D294","user_header":"","comment_is_top":false,"comment_ctime":1554992970,"is_pvip":false,"replies":[{"id":"30677","content":"æ²¡æ³•é›†æˆä¸¤ä¸ªç‰ˆæœ¬ï¼Œç¬¦å·è‚¯å®šå†²çª","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1555123691,"ip_address":"","comment_id":85164,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14439894858","product_id":100024501,"comment_content":"æˆ´è€å¸ˆï¼Œæœ‰æ²¡æœ‰åŠæ³•åœ¨ä¸€ä¸ªé¡¹ç›®äº†é›†æˆæŸä¸ªç¬¬ä¸‰æ–¹sdkçš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Ÿæœ€è¿‘è¢«admob sdkå‘æƒ¨äº†ï¼Œä¸€ä¸ªæœˆå‘äº†4ä¸ªç‰ˆæœ¬éƒ½æ˜¯ä¿®å¤bugçš„ï¼Œæˆ‘æƒ³æ›´æ–°ä¸‹å¦‚æœæœ‰é—ªé€€åªèƒ½å›é€€è€ç‰ˆæœ¬äº†ï¼Œå›é€€è€ç‰ˆæœ¬åªèƒ½å‘ç‰ˆè§£å†³äº†ï¼Œæœ‰æ²¡æœ‰ä¸å‘ç‰ˆçš„æ–¹æ¡ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446578,"discussion_content":"æ²¡æ³•é›†æˆä¸¤ä¸ªç‰ˆæœ¬ï¼Œç¬¦å·è‚¯å®šå†²çª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555123691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170826,"user_name":"å°æ•","can_delete":false,"product_type":"c1","uid":1032627,"ip_address":"","ucode":"ECBCEBF8A3D496","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/mJsLrs6JP47z0lZCsPKyIicWYcolVZ0ZuMicsefoiaFfPbf5zcsV2vtOw7zHsgq4UzZqwpSRdwJB6ic102icm9m824Q/132","comment_is_top":false,"comment_ctime":1578732433,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10168667025","product_id":100024501,"comment_content":"è€å¸ˆï¼ŒPlå’Œå‹ç›Ÿå†²çªæ€ä¹ˆè§£å†³ï¼Ÿ","like_count":2},{"had_liked":false,"id":96441,"user_name":"å‘¨å°æ˜","can_delete":false,"product_type":"c1","uid":1187141,"ip_address":"","ucode":"A7BA114A53DD3D","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/45/aaad1f9a.jpg","comment_is_top":false,"comment_ctime":1558425222,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"10148359814","product_id":100024501,"comment_content":"æ‰“å°åˆ°äº† 1000+ è¶…è¿‡äº†10 åˆ†é’Ÿéƒ½æ²¡æœ‰ killã€‚è¯·é—®æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ<br><br>```` objc<br>- (void)applicationDidEnterBackground:(UIApplication *)application {<br>    [application beginBackgroundTaskWithExpirationHandler:^{<br>        __block int i = 1;<br>        dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, dispatch_get_main_queue());<br>        dispatch_source_set_timer(timer, DISPATCH_TIME_NOW, 1ull * NSEC_PER_SEC, 0 * NSEC_PER_SEC);<br>        dispatch_source_set_event_handler(timer, ^{<br>            NSLog(@&quot;%d&quot;,i);<br>            i++;<br>            if (i &gt; 60*100 + 5) {<br>                dispatch_source_cancel(timer);<br>            }<br>            <br>        });<br>        dispatch_resume(timer);<br>        <br>    }];<br>}<br><br>````","like_count":2,"discussions":[{"author":{"id":1015911,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/67/abb7bfe3.jpg","nickname":"æ¶‚æµ·ç”Ÿ","note":"","ucode":"E3DA62CF9A7745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2427,"discussion_content":"ä½ å¯èƒ½æ˜¯çœŸæœºè°ƒè¯•ï¼ŒçœŸæœºè°ƒè¯•å°±ä¸ä¼šè¢«kill","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563598130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1000014,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/4e/05e2b4a0.jpg","nickname":"Alan","note":"","ucode":"9B9F596302FAAF","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":1015911,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/67/abb7bfe3.jpg","nickname":"æ¶‚æµ·ç”Ÿ","note":"","ucode":"E3DA62CF9A7745","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3450,"discussion_content":"111","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564485066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2427,"ip_address":""},"score":3450,"extra":""}]},{"author":{"id":1642151,"avatar":"https://static001.geekbang.org/account/avatar/00/19/0e/a7/9b79c245.jpg","nickname":"null","note":"","ucode":"B0ACD1B5CA541B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248787,"discussion_content":"åœ¨è¯„è®ºåŒºæ‰¾åˆ°åŸå› äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587895836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85371,"user_name":"ssala","can_delete":false,"product_type":"c1","uid":1005356,"ip_address":"","ucode":"CCD82C81756FC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/2c/b0793828.jpg","comment_is_top":false,"comment_ctime":1555047765,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10144982357","product_id":100024501,"comment_content":"æˆ‘ä»¬é‡‡ç”¨çš„fabricç›‘æ§APP crashé—®é¢˜ï¼Œä½†æ˜¯æœ‰äº›crashçš„å †æ ˆå®Œå…¨çœ‹ä¸å‡ºå¤´ç»ªï¼Œåƒå¥‡ç™¾æ€ªã€‚","like_count":2},{"had_liked":false,"id":85367,"user_name":"é’å†ˆ","can_delete":false,"product_type":"c1","uid":1080446,"ip_address":"","ucode":"8E54B939937E6D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoYBX95GZxEdKz9LQJVwohUiaRxNge5WpHRbeOC2tGc2rsdpfYKCTKdQicBn8MvSrlZTX7HY2jS3YFA/132","comment_is_top":false,"comment_ctime":1555046934,"is_pvip":false,"replies":[{"id":"30675","content":"åœ¨DidEnterBackgroundé‡Œå°½å¿«å®Œæˆï¼Œä¸è¦è¶…æ—¶äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1555123613,"ip_address":"","comment_id":85367,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10144981526","product_id":100024501,"comment_content":"æˆ´è€å¸ˆï¼Œbuglyé’ˆå¯¹åº”ç”¨è¿›å…¥åå°è¢«ç³»ç»Ÿå¼ºæ€ä¹Ÿç®—æ˜¯ä¸€ç§crashã€‚æ‚¨å‘Šè¯‰æˆ‘æ˜¯åå°å·¥ä½œè¶…æ—¶ï¼Œé‚£è¿™ç§æƒ…å†µçš„è¯æˆ‘æ˜¯åº”è¯¥åœ¨DidEnterBackgroundè¿™ç§å‡½æ•°ä¸­åšä»€ä¹ˆå¤„ç†ï¼›è¿˜æ˜¯åœ¨buglyä¸­åšä»€ä¹ˆé…ç½®ï¼Œä¸æ•æ‰æŠŠè¿™ç§æƒ…å†µä¸‹çš„crashå‘¢?  appè¿›å…¥åå°ä¹‹åï¼ŒbuglyæŠ“æ•crashçš„åç§°æ˜¯ SEGV æ˜¯ segmentation violation çš„ç¼©å†™ï¼Œæ˜¯å½“ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªæ— æ•ˆçš„å†…å­˜å¼•ç”¨ï¼Œæˆ–å‘ç”Ÿæ®µé”™è¯¯æ—¶å‘é€ç»™å®ƒçš„ä¿¡å·ã€‚è¿™ç§çš„è¯ï¼Œæˆ‘åº”è¯¥","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446646,"discussion_content":"åœ¨DidEnterBackgroundé‡Œå°½å¿«å®Œæˆï¼Œä¸è¦è¶…æ—¶äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555123613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1344353,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/61/b32787f6.jpg","nickname":"rjb","note":"","ucode":"7D8ECE9044F5A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307439,"discussion_content":"appè¿›å…¥åå°ä¹‹åï¼ŒbuglyæŠ“æ•crashçš„åç§°æ˜¯ SEGVã€‚é‚£ä¹ˆè¿›å…¥åå°åçš„è¿™ä¸ªå´©æºƒå¦‚ä½•äº§ç”Ÿçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600651049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000014,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/42/4e/05e2b4a0.jpg","nickname":"Alan","note":"","ucode":"9B9F596302FAAF","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3448,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564483212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100851,"user_name":"å°è¢‹å­","can_delete":false,"product_type":"c1","uid":1403825,"ip_address":"","ucode":"2797320994938C","user_header":"https://static001.geekbang.org/account/avatar/00/15/6b/b1/32cb2393.jpg","comment_is_top":false,"comment_ctime":1559655011,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5854622307","product_id":100024501,"comment_content":"å»ºè®®è¦è‡ªå·±å®ç° crash æ—¥å¿—é‡‡é›†ç³»ç»Ÿçš„åŒå­¦å¯ä»¥å‚è€ƒ KSCrashï¼Œå¦å¤–åš SDK çš„åŒå­¦è¦å®ç°ä¸€å¥—æ”¶é›† SDK ç›¸å…³çš„ crashï¼ŒçœŸçš„æ˜¯ä¸–çºªéš¾é¢˜ï¼Œæˆ‘èƒ½æƒ³åˆ°çš„æ–¹æ³•å°±æ˜¯ç”¨ hook çš„æ–¹å¼å®æ—¶è®°å½• SDK çš„è°ƒç”¨æ ˆï¼Œ crash çš„æ—¶å€™ä¸Šä¼ ï¼Œè¾…åŠ©æ’æŸ¥ã€‚å¦å¤–å¯ä»¥å°† SDK çš„ä¸šåŠ¡éƒ½æ”¾åœ¨ä¸€ä¸ªå¸¦æœ‰ SDK æ ‡è¯†çš„ GCD é˜Ÿåˆ—ä¸­ï¼Œè¿™æ ·å´©æºƒæ—¥å¿—ä¼šæ˜ç¡®æŒ‡å‘ SDKï¼Œçœå¾—æ— æ³•ç¡®å®šé—®é¢˜çš„å½’å±æ–¹ã€‚ï¼ˆæ‰¾å®¢æˆ·è¦ç¬¦å·è¡¨çœŸçš„å¾ˆå›°éš¾ï¼‰","like_count":1},{"had_liked":false,"id":89236,"user_name":"(Jet)é»„ä»²å¹³","can_delete":false,"product_type":"c1","uid":1244363,"ip_address":"","ucode":"2AF4F9B460795C","user_header":"https://static001.geekbang.org/account/avatar/00/12/fc/cb/5e79c6ed.jpg","comment_is_top":false,"comment_ctime":1556113765,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5851081061","product_id":100024501,"comment_content":"æˆ´è€å¸ˆå¥½ï¼Œæˆ‘æœ€è¿‘æœ‰ä¸€ä¸ªå›°æƒ‘ï¼Œå°±æ˜¯æˆ‘ä»¬å…¬å¸è®¡åˆ’åšä¸€ä¸ªè‡ªå·±çš„â€œcrashç›‘æ§ç³»ç»Ÿâ€ã€‚å…¶ä¸­æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç›®æ ‡æ˜¯è¦å®ç°crashæ—¥å¿—ï¼Œèƒ½å®šä½åˆ°è´£ä»»äººï¼Œç„¶åè¿›è¡Œå¿«é€Ÿå“åº”ã€‚<br>ç›®å‰æˆ‘ä¸ªäººå¯¹è¿™ä»¶äº‹çš„è§£å†³æ€è·¯å¦‚ä¸‹ï¼š<br>1. æ”¶é›†crashæ—¥å¿—ï¼Œå¹¶ä¸Šä¼ æ—¥å¿—åˆ°æœåŠ¡å™¨ä¸Šï¼›<br>2. é€šè¿‡è§£ægit åº“çš„æäº¤æ—¥å¿—ï¼Œå¯¹ä»£ç æ–‡ä»¶ä¸ä½œè€…ä¸è¿›è¡Œå…³è¿å¹¶æŠŠæ—¥å¿—æäº¤åˆ°æœåŠ¡å™¨ï¼›<br>3.  å‘ç”Ÿcrashæ—¶ï¼Œé€šè¿‡æŠŠé”™è¯¯å †æ ˆä¿¡æ¯ä¸ç¬¦å·è¡¨(dysm)è¿›è¡ŒåŒ¹é…ï¼Œæ‰¾åˆ°å †æ ˆä¿¡æ¯é‡Œå«ç‰¹å®šå‰ç¼€çš„æ–‡ä»¶åã€‚è¿›è¡Œè´£ä»»äººåŒ¹é…ï¼›<br>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šä»¥ä¸Šæ˜¯æˆ‘çš„è§£å†³æ€è·¯ã€‚ä¸çŸ¥é“æˆ´è€å¸ˆæ˜¯å¦ä¹Ÿæ˜¯è¿™ç§æ€è·¯ï¼Ÿ<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šåœ¨ä¸Šé¢çš„ç¬¬ä¸€æ­¥æ—¥å¿—æ”¶é›†æ—¶æ˜¯é€šè¿‡ æ–‡ä¸­â€œhandleSignalExceptionâ€æ–¹æ³•æ¥æ”¶é›†ï¼Ÿè¿˜æ˜¯é€šè¿‡PLCrashReporter æ¥è¿›è¡Œæ”¶é›†ï¼Ÿ<br>ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼šdysm åœ¨è§£æå †æ ˆä¿¡æ¯æ—¶çš„å·¥ä½œåŸç†æœ‰æ— ç›¸å…³æ–‡ç«  è¿›è¡Œä»‹ç»ï¼›<br><br>æœ›è€å¸ˆç™¾å¿™ä¹‹ä¸­å¸®å¿™ç­”å¤ï¼Œä¸èƒœæ„Ÿæ¿€ã€‚<br>","like_count":1,"discussions":[{"author":{"id":1375813,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fe/45/992ffe11.jpg","nickname":"è€æ—sir","note":"","ucode":"757727F69D926C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1729,"discussion_content":"å®šä½åˆ°è´£ä»»äººï¼Ÿæç¬‘çš„å§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1562852929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2858088,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqLlZ7ibJqRocm0EM4YF8iaJJFeicGI9U0gh5ZLeWTjXeicOFlT4tjKtIz8SpGqBPXAspLMbWD5GnrdhQ/132","nickname":"ç—´äººæŒ‡è·¯","note":"","ucode":"302C8ACA410F38","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548615,"discussion_content":"å®šä½åˆ°è´£ä»»äººæˆ‘ä¹Ÿè§‰å¾—æœ‰ç‚¹ç„ä¹ï¼Œäººå¯æ˜¯æµåŠ¨çš„ï¼Œè€Œä¸”ï¼Œå¤§å‹é¡¹ç›®éƒ½ä¼šå­˜åœ¨åŒä¸€ä¸ªåŠŸèƒ½æ¨¡å—å…ˆååŒæ—¶å¤šäººç»´æŠ¤ä¸è¿­ä»£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643277305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84160,"user_name":"drunkenMouse","can_delete":false,"product_type":"c1","uid":1454037,"ip_address":"","ucode":"AA8CEA703ECBE8","user_header":"","comment_is_top":false,"comment_ctime":1554795397,"is_pvip":false,"replies":[{"id":"30734","content":"å¯¹ï¼Œä¸ä¸€å®šéè¦åœ¨åå°","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1555145457,"ip_address":"","comment_id":84160,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849762693","product_id":100024501,"comment_content":"â€œå…ˆè¦æ‰¾åˆ°å®ƒä»¬çš„é˜ˆå€¼ï¼Œç„¶ååœ¨ä¸´è¿‘é˜ˆå€¼æ—¶è¿˜åœ¨æ‰§è¡Œçš„åå°ç¨‹åºâ€å…¶å®ä¸ä¸€å®šéè¦æ˜¯åœ¨åå°å§ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446265,"discussion_content":"å¯¹ï¼Œä¸ä¸€å®šéè¦åœ¨åå°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555145457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83920,"user_name":"æ˜“è‹¥é£äº‘","can_delete":false,"product_type":"c1","uid":1040086,"ip_address":"","ucode":"6FB7B508301FED","user_header":"https://static001.geekbang.org/account/avatar/00/0f/de/d6/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1554733527,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5849700823","product_id":100024501,"comment_content":"æˆ´è€å¸ˆï¼Œé—®ä¸€ä¸‹ï¼Œocå¼•èµ·çš„å´©æºƒï¼Œå¦‚æ•°ç»„è¶Šç•Œï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰ä¿¡å·äº§ç”Ÿå‘¢ï¼Ÿé‚£è¿™ä¸ªå´©æºƒæ˜¯ä»å“ªé‡Œå‘å‡ºçš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1458103,"avatar":"https://static001.geekbang.org/account/avatar/00/16/3f/b7/bca5b113.jpg","nickname":"BiuBiuå´½","note":"","ucode":"5DF7740130C4B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352498,"discussion_content":"NSException å¯ä»¥æ•è·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614755669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83708,"user_name":"CoderJJMa","can_delete":false,"product_type":"c1","uid":1199251,"ip_address":"","ucode":"9A16138343D733","user_header":"https://static001.geekbang.org/account/avatar/00/12/4c/93/28bbf22e.jpg","comment_is_top":false,"comment_ctime":1554707277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5849674573","product_id":100024501,"comment_content":"- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {<br>    _timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(repeater) userInfo:nil repeats:YES];<br>    return YES;<br>}<br><br>-(void)repeater{<br>    <br>    NSLog(@&quot;%s&quot;,__func__);<br>    <br>}<br><br>- (void)applicationDidEnterBackground:(UIApplication *)application {<br>    <br>    NSLog(@&quot;===== : applicationDidEnterBackground&quot;);<br>    NSLog(@&quot;begin=============&quot;);<br><br>  self.bgIdentify = [application beginBackgroundTaskWithExpirationHandler:^{<br>        [self endBack];<br>    }];<br>}<br><br>-(void)endBack{<br>    <br>    NSLog(@&quot;end=============&quot;);<br>    NSLog(@&quot;callStackSymbols : %@&quot;,[NSThread callStackSymbols]);<br><br>    [[UIApplication sharedApplication] endBackgroundTask:self.bgIdentify];<br>    self.bgIdentify = UIBackgroundTaskInvalid;<br>}","like_count":1},{"had_liked":false,"id":354901,"user_name":"mk_objc","can_delete":false,"product_type":"c1","uid":2619203,"ip_address":"å››å·","ucode":"6516A1962A0F0F","user_header":"https://static001.geekbang.org/account/avatar/00/27/f7/43/7e9c6434.jpg","comment_is_top":false,"comment_ctime":1660874671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660874671","product_id":100024501,"comment_content":"æ²¡è®²åˆ°é‡ç‚¹","like_count":0},{"had_liked":false,"id":346830,"user_name":"NPC","can_delete":false,"product_type":"c1","uid":1458738,"ip_address":"","ucode":"7D89075DB55C4E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKyibtHpR7gUQwQyDnbQO5pODsRumWTMfyCeP0SyIJicJxNggANSGXibYJia35n2a4Xayb8LpicyPIicERQ/132","comment_is_top":false,"comment_ctime":1653466285,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653466285","product_id":100024501,"comment_content":"æˆ´é“­è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œç›®å‰buglyæœ‰ä»€ä¹ˆcrashæ˜¯æ— æ³•æ•è·åˆ°çš„","like_count":0},{"had_liked":false,"id":300339,"user_name":"sky","can_delete":false,"product_type":"c1","uid":2132195,"ip_address":"","ucode":"BFF31CCDFF8A86","user_header":"https://static001.geekbang.org/account/avatar/00/20/88/e3/1fb72807.jpg","comment_is_top":false,"comment_ctime":1625123344,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625123344","product_id":100024501,"comment_content":"å®Œæ•´çš„å¼‚å¸¸ç¼–ç  è€å¸ˆï¼Œæ–‡ä¸­è¿™ä¸ªé“¾æ¥æ‰“ä¸å¼€äº†ï¼Œå…¶ä»–åœ°æ–¹è¿˜å¯ä»¥çœ‹å—","like_count":0},{"had_liked":false,"id":300085,"user_name":"æ¶‚æµ·ç”Ÿ","can_delete":false,"product_type":"c1","uid":1015911,"ip_address":"","ucode":"E3DA62CF9A7745","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/67/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1624979120,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624979120","product_id":100024501,"comment_content":"æ²¡æœ‰å…·ä½“åˆ†æä¿¡å·é‡çš„crash","like_count":0},{"had_liked":false,"id":298551,"user_name":"Geek_14b699","can_delete":false,"product_type":"c1","uid":1229594,"ip_address":"","ucode":"02AC3773765AB9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJuQocTOGrXzPb8fgDibrdH5jBAtrdWckiaKjvner6OT1DeKtRm43Wo2jFqTuiaqmsKNqvfbxj25H4bg/132","comment_is_top":false,"comment_ctime":1624188411,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624188411","product_id":100024501,"comment_content":"ä¸ºä»€ä¹ˆbuglyéœ€è¦ä¸Šä¼ ç¬¦å·è¡¨ï¼Œè‡ªå·±å¦‚æœå†™äº†crashæ”¶é›†æ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦ç”¨åˆ°ç¬¦å·è¡¨å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":292323,"user_name":"é˜¿å‘†","can_delete":false,"product_type":"c1","uid":1455575,"ip_address":"","ucode":"7D02867E9D9527","user_header":"https://static001.geekbang.org/account/avatar/00/16/35/d7/8ac38c7d.jpg","comment_is_top":false,"comment_ctime":1620782924,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620782924","product_id":100024501,"comment_content":"ä¹‹å‰ä¹°çš„æ—¶å€™æ²¡æœ‰é‚£ä¹ˆå¤šå†…å®¹ï¼Œæ²¡æƒ³åˆ°ä¸€ç›´åœ¨æ›´æ–°ã€‚æ„Ÿè°¢æˆ´è€å¸ˆ","like_count":0},{"had_liked":false,"id":279880,"user_name":"Geek_83bbf5","can_delete":false,"product_type":"c1","uid":2368333,"ip_address":"","ucode":"64B18E8DFC04AF","user_header":"","comment_is_top":false,"comment_ctime":1613990138,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613990138","product_id":100024501,"comment_content":"signalé‡‡é›†çš„å´©æºƒï¼Œå †æ ˆä¿¡æ¯è¦æ€ä¹ˆè·å–æ‰èƒ½å®šä½å‡†ç¡®å‘¢ï¼Ÿ è¯•å†™çš„demo å †æ ˆä¿¡æ¯æ— æ³•å®šä½åˆ°å…·ä½“æ“ä½œ","like_count":0},{"had_liked":false,"id":234325,"user_name":"MELO","can_delete":false,"product_type":"c1","uid":2029340,"ip_address":"","ucode":"70BE8FBA819F73","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f7/1c/d1cff020.jpg","comment_is_top":false,"comment_ctime":1594646076,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594646076","product_id":100024501,"comment_content":"è€å¸ˆï¼šæ€ä¹ˆæŠŠä¸€ä¸ªçº¿ç¨‹è¿è¡Œåˆ°æŒ‡å®šçš„å¤„ç†å™¨æ ¸å¿ƒä¸Šï¼Ÿ","like_count":0},{"had_liked":false,"id":220456,"user_name":"kango","can_delete":false,"product_type":"c1","uid":1517095,"ip_address":"","ucode":"3D740DB0CE94F7","user_header":"https://static001.geekbang.org/account/avatar/00/17/26/27/a4abd984.jpg","comment_is_top":false,"comment_ctime":1590246178,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590246178","product_id":100024501,"comment_content":" KVO é—®é¢˜ã€NSNotification çº¿ç¨‹é—®é¢˜ã€æ•°ç»„è¶Šç•Œã€é‡æŒ‡é’ˆç­‰å´©æºƒä¿¡æ¯ï¼Œæ˜¯å¯ä»¥é€šè¿‡ä¿¡å·æ•è·çš„","like_count":0},{"had_liked":false,"id":219995,"user_name":"zruibin","can_delete":false,"product_type":"c1","uid":1002555,"ip_address":"","ucode":"C4A356409C8312","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/3b/9311c93f.jpg","comment_is_top":false,"comment_ctime":1590133026,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1590133026","product_id":100024501,"comment_content":"å†…å­˜æ‰“çˆ†å¦‚ä½•ç”¨mmap()æ¥ä¿å­˜ç°åœºè¿™ç‚¹éº»çƒ¦å‘¢è¯´æ¸…æ¥šç‚¹å—ï¼Ÿæ¯”å¦‚å†…å­˜çš„è¾¹ç•Œé˜ˆå€¼æ˜¯å¤šå°‘ï¼Ÿç°åœºæ˜¯ä»€ä¹ˆç°åœºï¼Ÿå„å¤§å †æ ˆçš„è€—æ—¶ä¸å¤§å°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2029340,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f7/1c/d1cff020.jpg","nickname":"MELO","note":"","ucode":"70BE8FBA819F73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290938,"discussion_content":"OOMçš„é˜ˆå€¼ï¼Œå¯ä»¥ç”¨task_vm_info_data_tæˆ–è€…os proc çš„å‡½æ•° os_proc_avariable_memory()æ¥è·å–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594645990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160184,"user_name":"æ™®é€šæ‹³","can_delete":false,"product_type":"c1","uid":1585359,"ip_address":"","ucode":"80612EB6C25F23","user_header":"https://static001.geekbang.org/account/avatar/00/18/30/cf/cccf3f6b.jpg","comment_is_top":false,"comment_ctime":1575887346,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575887346","product_id":100024501,"comment_content":"æˆ´è€å¸ˆè®²è§£å¾ˆé€å½»ã€‚ä¸è¿‡æˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¾ˆå¤šå…¬å¸çš„iOSå¼€å‘äººå‘˜æœ‰é™ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ²¡æœ‰å¤ªå¤šäººåŠ›ç‰©åŠ›å»åšä¸€äº›å¾ˆåº•å±‚çš„äº‹æƒ…ï¼Œæ¯”å¦‚æ”¶é›†å´©æºƒæ—¥å¿—ç­‰ã€‚æ‚¨ä¹‹å‰åœ¨æ»´æ»´çš„æ—¶å€™ï¼Œè¿™äº›å´©æºƒæ—¥å¿—çš„æ”¶é›†ã€æ€§èƒ½ç›‘æ§ç­‰ç­‰ï¼Œéƒ½æ˜¯è‡ªå·±å›¢é˜Ÿå¼€å‘çš„å—ï¼Ÿä½ ä»¬æ•´ä¸ªiOSæŠ€æœ¯å›¢é˜ŸåŒ…æ‹¬ä¸šåŠ¡ç»„åœ¨å†…ï¼Œä¸€å…±å¤§æ¦‚æœ‰å¤šå°‘äººå•Šï¼Ÿå¸Œæœ›è€å¸ˆèƒ½è§£ç­”æˆ‘çš„ç–‘æƒ‘~","like_count":0},{"had_liked":false,"id":143215,"user_name":"iOSå°èœé¸Ÿ","can_delete":false,"product_type":"c1","uid":1097252,"ip_address":"","ucode":"6F0C7DCE309692","user_header":"https://static001.geekbang.org/account/avatar/00/10/be/24/51d5d1f2.jpg","comment_is_top":false,"comment_ctime":1571650254,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571650254","product_id":100024501,"comment_content":"æ¼è®²äº†ä¸€ä¸ªé‡è¦çš„Machå¼‚å¸¸ï¼Œä¸è¡¥ä¸Šå—","like_count":0},{"had_liked":false,"id":116085,"user_name":"è¥¿äº¬å¯Œè´µå…”","can_delete":false,"product_type":"c1","uid":1455922,"ip_address":"","ucode":"4E185A019A072E","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/32/758ef1c7.jpg","comment_is_top":false,"comment_ctime":1563783566,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563783566","product_id":100024501,"comment_content":"æˆ´è€å¸ˆï¼Œå…³äº SIGTRAP è¿™ç§é—®é¢˜æ€ä¹ˆåˆ†æå¥½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":109189,"user_name":"tomcat","can_delete":false,"product_type":"c1","uid":1133556,"ip_address":"","ucode":"A7CE9FEE5E03CD","user_header":"https://static001.geekbang.org/account/avatar/00/11/4b/f4/de7809c1.jpg","comment_is_top":false,"comment_ctime":1561977373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561977373","product_id":100024501,"comment_content":"è¿›å…¥åå°ä¹‹åèƒ½åœ¨éä¸»çº¿ç¨‹æ‰“å°æ—¥å¿—å—ï¼Ÿä¸»çº¿ç¨‹æ‰“å°æ—¥å¿—çš„è¯å¯èƒ½ä¼šé€ æˆå¹²æ‰°ã€‚","like_count":0},{"had_liked":false,"id":108075,"user_name":"æ˜Ÿæ˜Ÿ","can_delete":false,"product_type":"c1","uid":1529046,"ip_address":"","ucode":"963621AAA04E41","user_header":"","comment_is_top":false,"comment_ctime":1561680143,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561680143","product_id":100024501,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œappå¦‚æœcrashåï¼Œæ€ä¹ˆé˜²æ­¢appé—ªé€€å‘¢ï¼Œçœ‹äº†ä¸€äº›æ–‡ç« ï¼ŒOCå¯ä»¥é€šè¿‡åˆ†ç±»å’Œruntimeæ›¿æ¢ä¸€äº›å¯èƒ½crashçš„æ–¹æ³•ï¼Œswiftéœ€è¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":102575,"user_name":"Sawillow","can_delete":false,"product_type":"c1","uid":1465136,"ip_address":"","ucode":"0D4187EF5B8336","user_header":"https://static001.geekbang.org/account/avatar/00/16/5b/30/e3a73c11.jpg","comment_is_top":false,"comment_ctime":1560256866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560256866","product_id":100024501,"comment_content":"å®Œæ•´çš„ç¼–ç å¼‚å¸¸   æ— æ³•æŸ¥çœ‹","like_count":0},{"had_liked":false,"id":95228,"user_name":"Null","can_delete":false,"product_type":"c1","uid":1382587,"ip_address":"","ucode":"A7D4DF2A43C7D8","user_header":"https://static001.geekbang.org/account/avatar/00/15/18/bb/9299fab1.jpg","comment_is_top":false,"comment_ctime":1557992279,"is_pvip":true,"replies":[{"id":"35013","content":"é€šè¿‡æ–¹æ³•å †æ ˆçœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1558850954,"ip_address":"","comment_id":95228,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1557992279","product_id":100024501,"comment_content":"crashä¸­æ˜¯å¦æœ‰æ˜ç¡®çš„æ ‡è¯†æ˜¾ç¤ºæ˜¯ç”±äºå“ªä¸ªä¸‰æ–¹åº“å¼•èµ·çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450377,"discussion_content":"é€šè¿‡æ–¹æ³•å †æ ˆçœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558850954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1229594,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJuQocTOGrXzPb8fgDibrdH5jBAtrdWckiaKjvner6OT1DeKtRm43Wo2jFqTuiaqmsKNqvfbxj25H4bg/132","nickname":"Geek_14b699","note":"","ucode":"02AC3773765AB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379851,"discussion_content":"æ–¹æ³•å †æ ˆéœ€è¦ç”¨åˆ°ç¬¦å·è¡¨ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624188674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89771,"user_name":"é˜¿ä¼¦","can_delete":false,"product_type":"c1","uid":1454351,"ip_address":"","ucode":"58D147F6211016","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/dHawibgghoCDFTuT4uIF3y6ZzQJ2azhU4Yq0ZLtMYiaPUP6mo6v30ib95DXgH1cVxY4MaEk4WBw1X4QWbdOSC8lQg/132","comment_is_top":false,"comment_ctime":1556261499,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556261499","product_id":100024501,"comment_content":"å°´å°¬...å†™äº†ä¸ªå®šæ—¶å™¨ï¼Œå®šäº†æ—¶é—´177sæ—¶è¾“å‡ºå †æ ˆä¿¡æ¯...ç»“æœå‘ç°174ç§’æ—¶å°±å·²ç»è¢«killäº†...","like_count":0},{"had_liked":false,"id":89347,"user_name":"äºŒæœ¨åˆåœŸ","can_delete":false,"product_type":"c1","uid":1296963,"ip_address":"","ucode":"7D939045990B4D","user_header":"https://static001.geekbang.org/account/avatar/00/13/ca/43/63bdc516.jpg","comment_is_top":false,"comment_ctime":1556157220,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556157220","product_id":100024501,"comment_content":"â€œUpload your appâ€™s symbols to receive symbolicated reports from Appleâ€ï¼Œè¿™ä¸ªåªèƒ½ç”¨æˆ·æˆæƒå…è®¸ä¸Šä¼ å´©æºƒä¿¡æ¯ï¼Œå¼€å‘è€…æ‰èƒ½çœ‹åˆ°çš„å§","like_count":0},{"had_liked":false,"id":86456,"user_name":"wendell","can_delete":false,"product_type":"c1","uid":1182836,"ip_address":"","ucode":"4445CC15200C07","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/74/dc8e0bde.jpg","comment_is_top":false,"comment_ctime":1555379242,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555379242","product_id":100024501,"comment_content":"@Mhy PLCrashReporter å¯¼å…¥é¡¹ç›®ä¸­ å‡ºç° bitcode é—®é¢˜ï¼Œç½‘ä¸Šå¾ˆå°‘ç›¸å…³ä¿¡æ¯ï¼Œè¯·é—®æ€ä¹ˆè§£ï¼Ÿæˆ–è€…åˆæ²¡æœ‰å¯ä»¥æ›¿ä»£å®ƒçš„æ¥æºåº“ã€‚è°¢è°¢ğŸ™","like_count":0},{"had_liked":false,"id":84086,"user_name":"æ²‰é»˜æ˜¯é‡‘","can_delete":false,"product_type":"c1","uid":1426919,"ip_address":"","ucode":"2F89ABDE3A8359","user_header":"https://static001.geekbang.org/account/avatar/00/15/c5/e7/84f2c620.jpg","comment_is_top":false,"comment_ctime":1554780498,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554780498","product_id":100024501,"comment_content":"swiftçš„Arrayçš„æ•°ç»„è¶Šç•Œæˆ–è€…å¼ºåˆ¶è§£åŒ…ç­‰ç­‰é€ æˆçš„å´©æºƒï¼Œç°åœ¨ä¸»æµçš„ä¸‰æ–¹åƒè…¾è®¯çš„buglyéƒ½æ— æ³•æ•è·è¿™ä¸ªäº‹ä»¶ã€‚ä¸çŸ¥é“å¤§å®¶éƒ½æ˜¯æ€ä¹ˆæ•è·çš„","like_count":0},{"had_liked":false,"id":83844,"user_name":"Hy","can_delete":false,"product_type":"c1","uid":1239531,"ip_address":"","ucode":"BF6AC9AA9B26A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/eb/2394e520.jpg","comment_is_top":false,"comment_ctime":1554723471,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554723471","product_id":100024501,"comment_content":"å¤§ä½¬ï¼Œæœ€å¥½èƒ½å‡ºä¸€ä¸ªå¦‚ä½•æé«˜é‡æŒ‡é’ˆé—ªé€€ï¼Œè¿›è€Œå‡å°‘çº¿ä¸Šé—ªé€€ï¼Œæ¯”å¦‚é‡Šæ”¾æ‰çš„å†…å­˜æ·»åŠ æ ‡è®°ä¸ºå·²ç»é‡Šæ”¾ï¼Œå½“æœ‰è°ƒç”¨è¯¥å†…å­˜æ—¶ä¼šé—ªé€€ï¼Œæ¥å¢åŠ é‡æŒ‡é’ˆå¤ç°åº¦ã€‚","like_count":0},{"had_liked":false,"id":83839,"user_name":"Hy","can_delete":false,"product_type":"c1","uid":1239531,"ip_address":"","ucode":"BF6AC9AA9B26A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/eb/2394e520.jpg","comment_is_top":false,"comment_ctime":1554723118,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554723118","product_id":100024501,"comment_content":"å¤§ä½¬ï¼Œç›®å‰é¡¹ç›®æœ‰åŠ¨æ€åº“æ’ä»¶ï¼Œappä¸Šçº¿åæœ‰ç»Ÿè®¡åˆ°æœ‰äº›åŠ¨æ€åº“åŠ è½½å¤±è´¥çš„é—ªé€€ï¼Œå¤§è‡´ç†ç”±æ˜¯ä»xxè·¯å¾„æœªèƒ½åŠ è½½A.frameworkï¼Œä½†æ˜¯åœ¨å¦å¤–ä¸€ä¸ªè·¯å¾„xxyæ‰¾åˆ°äº†A.frameworkã€‚","like_count":0},{"had_liked":false,"id":83835,"user_name":"Hy","can_delete":false,"product_type":"c1","uid":1239531,"ip_address":"","ucode":"BF6AC9AA9B26A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/eb/2394e520.jpg","comment_is_top":false,"comment_ctime":1554722407,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554722407","product_id":100024501,"comment_content":"å¾®ä¿¡è¯»ä¹¦æœ‰ç›‘æµ‹ä¸»çº¿ç¨‹å¡é¡¿çš„æ–‡ç« ï¼Œèµ·ä¸€ä¸ªä¸ä¼šè¢«é€€å‡ºçš„çº¿ç¨‹ï¼Œç›‘æµ‹ä¸»çº¿ç¨‹çš„runloopçŠ¶æ€","like_count":0},{"had_liked":false,"id":83774,"user_name":"é’å†ˆ","can_delete":false,"product_type":"c1","uid":1080446,"ip_address":"","ucode":"8E54B939937E6D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoYBX95GZxEdKz9LQJVwohUiaRxNge5WpHRbeOC2tGc2rsdpfYKCTKdQicBn8MvSrlZTX7HY2jS3YFA/132","comment_is_top":false,"comment_ctime":1554714404,"is_pvip":false,"replies":[{"id":"30354","content":"åå°å·¥ä½œè¶…æ—¶","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1554791538,"ip_address":"","comment_id":83774,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554714404","product_id":100024501,"comment_content":"Buglyä¸­ï¼Œé’ˆå¯¹åº”ç”¨è¿›å…¥åå°è¢«ç³»ç»Ÿå¼ºæ€ä¹Ÿç®—æ˜¯ä¸€ç§crashã€‚è¿™ç§æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446142,"discussion_content":"åå°å·¥ä½œè¶…æ—¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554791538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83682,"user_name":"Hy","can_delete":false,"product_type":"c1","uid":1239531,"ip_address":"","ucode":"BF6AC9AA9B26A7","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/eb/2394e520.jpg","comment_is_top":false,"comment_ctime":1554698742,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554698742","product_id":100024501,"comment_content":"å‰æ’","like_count":0},{"had_liked":false,"id":83669,"user_name":"ç‹å¼ºğŸ˜„ğŸ˜„ğŸ˜„ğŸ˜","can_delete":false,"product_type":"c1","uid":1342362,"ip_address":"","ucode":"A1F3F8B677BC02","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLB4OXWgz6l6IiaXKjABEU1iagBItV04ZnLicm4Aczxme80y2NFhdyn71x9VGyN7oXAQfVyPzY3c4ibYQ/132","comment_is_top":false,"comment_ctime":1554694801,"is_pvip":false,"replies":[{"id":"30268","content":"ä¸‹ä¸€ç¯‡å°±æ˜¯äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1554711315,"ip_address":"","comment_id":83669,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554694801","product_id":100024501,"comment_content":"æˆ´é“­è€å¸ˆï¼Œä¸»çº¿ç¨‹æ— å“åº” è¿™ä¸ªå¯ä»¥æå‰è®²å—ï¼Œæœ€è¿‘å·¥ç¨‹éœ€è¦åˆ°è¿™ä¸ªåœ°æ–¹çš„çŸ¥è¯†ï¼Œè°¢è°¢æˆ´é“­è€å¸ˆã€‚","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446121,"discussion_content":"ä¸‹ä¸€ç¯‡å°±æ˜¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554711315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83445,"user_name":"å°å‰ç«¯","can_delete":false,"product_type":"c1","uid":1271383,"ip_address":"","ucode":"F9C45FDF0E9084","user_header":"https://static001.geekbang.org/account/avatar/00/13/66/57/f76f20b6.jpg","comment_is_top":false,"comment_ctime":1554603651,"is_pvip":false,"replies":[{"id":"30161","content":"ä¸€æ¬¡å¯åŠ¨æœ€å¤šä¸€æ¬¡å´©æºƒï¼Œä¸€æ¬¡å¯åŠ¨æ²¡æœ‰å´©æºƒè¯´æ˜æˆåŠŸäº†ï¼Œä¸€æ¬¡å¯åŠ¨å´©æºƒäº†è¯´æ˜å¤±è´¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1554617245,"ip_address":"","comment_id":83445,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1554603651","product_id":100024501,"comment_content":"æ–‡ä¸­è¯´Crashç‡ä¸€èˆ¬æ˜¯crashæ¬¡æ•°ä¸å¯åŠ¨æ¬¡æ•°çš„æ¯”å€¼ï¼Ÿæ˜¯è¯´æˆ‘ä¸€å¤©æ‰“å¼€100æ¬¡appï¼Œcrashäº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥æ˜¯2ä¸ªç‚¹ï¼Ÿæˆ‘è§‰å¾—æ˜¯ä¸æ˜¯ç”¨DAUä½œä¸ºåˆ†æ¯æ›´åˆé€‚ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446026,"discussion_content":"ä¸€æ¬¡å¯åŠ¨æœ€å¤šä¸€æ¬¡å´©æºƒï¼Œä¸€æ¬¡å¯åŠ¨æ²¡æœ‰å´©æºƒè¯´æ˜æˆåŠŸäº†ï¼Œä¸€æ¬¡å¯åŠ¨å´©æºƒäº†è¯´æ˜å¤±è´¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554617245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1409087,"avatar":"https://static001.geekbang.org/account/avatar/00/15/80/3f/bc65b009.jpg","nickname":"Yest","note":"","ucode":"1E82B6355890C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3035,"discussion_content":"æœ‰æ²¡æœ‰ä¸€ç§å¯åŠ¨å°±å´©æºƒï¼Œæ¯”å¦‚å†…å­˜ä¸è¶³ï¼Œè¿™ç§èƒ½ç›‘æ§åˆ°å¯åŠ¨orå´©æºƒå—ï¼Ÿå¦‚æœä¸èƒ½ï¼Œè¿™æ ·çš„æƒ…å†µï¼Œå°±å½±å“ä¸åˆ° åˆ†å­oråˆ†æ¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564126976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83350,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1456034,"ip_address":"","ucode":"3CCF37176E2E6E","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/a2/045733b3.jpg","comment_is_top":false,"comment_ctime":1554542624,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554542624","product_id":100024501,"comment_content":"@Mhy  <br>1. iOS 9.0ä¹‹åNSNotificationCenterä¸ä¼šå¯¹ä¸€ä¸ªdeallocçš„è§‚å¯Ÿè€…å‘é€æ¶ˆæ¯ï¼Œæ‰€ä»¥å¦‚æœiOS9.0ä¹‹å‰çš„ç³»ç»Ÿéœ€è¦add éœ€è¦ remove æ¥ä¿è¯ä¸ä¼šå‡ºç°dellocåæ‰¾ä¸åˆ°è§‚å¯Ÿè€…å¯¼è‡´å´©æºƒ<br>â€˜If your app targets iOS 9.0 and later or OS X v10.11 and later, you don&#39;t need to unregister an observer in its deallocation methodã€‚â€™<br><br>2. NSNotification æœ‰å¾ˆå¤šç§çº¿ç¨‹å®ç°æ–¹å¼ï¼ŒåŒæ­¥ã€å¼‚æ­¥ã€èšåˆï¼Œæ‰€ä»¥ä¸æ°å½“çš„çº¿ç¨‹å‘é€å’Œæ¥æ”¶ä¼šå‡ºç°å´©æºƒé—®é¢˜ã€‚è¿™é‡Œæƒ…å†µæ¯”è¾ƒå¤šï¼Œå¯ä»¥æŸ¥è¯¢ç›¸å…³èµ„æ–™ã€‚","like_count":0},{"had_liked":false,"id":83272,"user_name":"Dude","can_delete":false,"product_type":"c1","uid":1453365,"ip_address":"","ucode":"71341F7E27CFB8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqzYdgPK7wApOch4BlROWdiarexic8KmhqBEH2IicFj93HzqcwPSn5KpKjptraCVZ4AMs9bWeQglIorQ/132","comment_is_top":false,"comment_ctime":1554511950,"is_pvip":false,"replies":[{"id":"30123","content":"å´©æºƒåˆ—è¡¨ç‚¹å‡»è¿›å»å°±å¯ä»¥çœ‹åˆ°è¯¦æƒ…äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1554549406,"ip_address":"","comment_id":83272,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554511950","product_id":100024501,"comment_content":"Buglyä¸­åœ¨å“ªå¯ä»¥çœ‹åˆ°å¼‚å¸¸ç¼–ç ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445951,"discussion_content":"å´©æºƒåˆ—è¡¨ç‚¹å‡»è¿›å»å°±å¯ä»¥çœ‹åˆ°è¯¦æƒ…äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554549406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}