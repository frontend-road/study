{"id":103541,"title":"17 | å¹¶å‘å®¹å™¨çš„ä½¿ç”¨ï¼šè¯†åˆ«ä¸åŒåœºæ™¯ä¸‹æœ€ä¼˜å®¹å™¨","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯åˆ˜è¶…ã€‚</p><p>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°å®¹å™¨ã€‚ä»Šå¤©æˆ‘è¦å’Œä½ åˆ†äº«çš„è¯é¢˜å°±æ˜¯ï¼šåœ¨ä¸åŒåœºæ™¯ä¸‹æˆ‘ä»¬è¯¥å¦‚ä½•é€‰æ‹©æœ€ä¼˜å®¹å™¨ã€‚</p><h2>å¹¶å‘åœºæ™¯ä¸‹çš„Mapå®¹å™¨</h2><p>å‡è®¾æˆ‘ä»¬ç°åœ¨è¦ç»™ä¸€ä¸ªç”µå•†ç³»ç»Ÿè®¾è®¡ä¸€ä¸ªç®€å•çš„ç»Ÿè®¡å•†å“é”€é‡TOP 10çš„åŠŸèƒ½ã€‚å¸¸è§„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨æ¥å­˜å‚¨å•†å“å’Œé”€é‡é”®å€¼å¯¹ï¼Œç„¶åä½¿ç”¨æ’åºè·å¾—é”€é‡å‰åçš„å•†å“ã€‚åœ¨è¿™é‡Œï¼Œå“ˆå¸Œè¡¨æ˜¯å®ç°è¯¥åŠŸèƒ½çš„å…³é”®ã€‚é‚£ä¹ˆè¯·æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœè¦ä½ è®¾è®¡è¿™ä¸ªåŠŸèƒ½ï¼Œä½ ä¼šä½¿ç”¨å“ªä¸ªå®¹å™¨å‘¢ï¼Ÿ</p><p>åœ¨07è®²ä¸­ï¼Œæˆ‘æ›¾è¯¦ç»†è®²è¿‡HashMapçš„å®ç°åŸç†ï¼Œä»¥åŠHashMapç»“æ„çš„å„ä¸ªä¼˜åŒ–ç»†èŠ‚ã€‚æˆ‘è¯´è¿‡HashMapçš„æ€§èƒ½ä¼˜è¶Šï¼Œç»å¸¸è¢«ç”¨æ¥å­˜å‚¨é”®å€¼å¯¹ã€‚é‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨HashMapå—ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ä¸å¯ä»¥ï¼Œæˆ‘ä»¬åˆ‡å¿Œåœ¨å¹¶å‘åœºæ™¯ä¸‹ä½¿ç”¨HashMapã€‚å› ä¸ºåœ¨JDK1.7ä¹‹å‰ï¼Œåœ¨å¹¶å‘åœºæ™¯ä¸‹ä½¿ç”¨HashMapä¼šå‡ºç°æ­»å¾ªç¯ï¼Œä»è€Œå¯¼è‡´CPUä½¿ç”¨ç‡å±…é«˜ä¸ä¸‹ï¼Œè€Œæ‰©å®¹æ˜¯å¯¼è‡´æ­»å¾ªç¯çš„ä¸»è¦åŸå› ã€‚è™½ç„¶Javaåœ¨JDK1.8ä¸­ä¿®å¤äº†HashMapæ‰©å®¹å¯¼è‡´çš„æ­»å¾ªç¯é—®é¢˜ï¼Œä½†åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¾ç„¶ä¼šæœ‰æ•°æ®ä¸¢å¤±ä»¥åŠä¸å‡†ç¡®çš„æƒ…å†µå‡ºç°ã€‚</p><p><span class=\"orange\">è¿™æ—¶ä¸ºäº†ä¿è¯å®¹å™¨çš„çº¿ç¨‹å®‰å…¨ï¼ŒJavaå®ç°äº†Hashtableã€ConcurrentHashMapä»¥åŠConcurrentSkipListMapç­‰Mapå®¹å™¨ã€‚</span></p><!-- [[[read_end]]] --><p>Hashtableã€ConcurrentHashMapæ˜¯åŸºäºHashMapå®ç°çš„ï¼Œå¯¹äºå°æ•°æ®é‡çš„å­˜å–æ¯”è¾ƒæœ‰ä¼˜åŠ¿ã€‚</p><p>ConcurrentSkipListMapæ˜¯åŸºäºTreeMapçš„è®¾è®¡åŸç†å®ç°çš„ï¼Œç•¥æœ‰ä¸åŒçš„æ˜¯å‰è€…åŸºäºè·³è¡¨å®ç°ï¼Œåè€…åŸºäºçº¢é»‘æ ‘å®ç°ï¼ŒConcurrentSkipListMapçš„ç‰¹ç‚¹æ˜¯å­˜å–å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯Oï¼ˆlogï¼ˆnï¼‰ï¼‰ï¼Œé€‚ç”¨äºå¤§æ•°æ®é‡å­˜å–çš„åœºæ™¯ï¼Œæœ€å¸¸è§çš„æ˜¯åŸºäºè·³è·ƒè¡¨å®ç°çš„æ•°æ®é‡æ¯”è¾ƒå¤§çš„ç¼“å­˜ã€‚</p><p>å›å½’åˆ°å¼€å§‹çš„æ¡ˆä¾‹å†çœ‹ä¸€ä¸‹ï¼Œå¦‚æœè¿™ä¸ªç”µå•†ç³»ç»Ÿçš„å•†å“æ€»é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Hashtableæˆ–ConcurrentHashMapæ¥å®ç°å“ˆå¸Œè¡¨çš„åŠŸèƒ½ã€‚</p><h3>Hashtable ğŸ†š ConcurrentHashMap</h3><p>æ›´ç²¾å‡†çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å¯¹æ¯”çœ‹çœ‹ä»¥ä¸Šä¸¤ç§å®¹å™¨ã€‚</p><p>åœ¨æ•°æ®ä¸æ–­åœ°å†™å…¥å’Œåˆ é™¤ï¼Œä¸”ä¸å­˜åœ¨æ•°æ®é‡ç´¯ç§¯ä»¥åŠæ•°æ®æ’åºçš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰ç”¨Hashtableæˆ–ConcurrentHashMapã€‚</p><p>Hashtableä½¿ç”¨SynchronizedåŒæ­¥é”ä¿®é¥°äº†putã€getã€removeç­‰æ–¹æ³•ï¼Œå› æ­¤åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œè¯»å†™æ“ä½œéƒ½ä¼šå­˜åœ¨å¤§é‡é”ç«äº‰ï¼Œç»™ç³»ç»Ÿå¸¦æ¥æ€§èƒ½å¼€é”€ã€‚</p><p>ç›¸æ¯”Hashtableï¼ŒConcurrentHashMapåœ¨ä¿è¯çº¿ç¨‹å®‰å…¨çš„åŸºç¡€ä¸Šå…¼å…·äº†æ›´å¥½çš„å¹¶å‘æ€§èƒ½ã€‚åœ¨JDK1.7ä¸­ï¼ŒConcurrentHashMapå°±ä½¿ç”¨äº†åˆ†æ®µé”Segmentå‡å°äº†é”ç²’åº¦ï¼Œæœ€ç»ˆä¼˜åŒ–äº†é”çš„å¹¶å‘æ“ä½œã€‚</p><p>åˆ°äº†JDK1.8ï¼ŒConcurrentHashMapåšäº†å¤§é‡çš„æ”¹åŠ¨ï¼Œæ‘’å¼ƒäº†Segmentçš„æ¦‚å¿µã€‚ç”±äºSynchronizedé”åœ¨Java6ä¹‹åçš„æ€§èƒ½å·²ç»å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œæ‰€ä»¥åœ¨JDK1.8ä¸­ï¼ŒJavaé‡æ–°å¯ç”¨äº†SynchronizedåŒæ­¥é”ï¼Œé€šè¿‡Synchronizedå®ç°HashEntryä½œä¸ºé”ç²’åº¦ã€‚è¿™ç§æ”¹åŠ¨å°†æ•°æ®ç»“æ„å˜å¾—æ›´åŠ ç®€å•äº†ï¼Œæ“ä½œä¹Ÿæ›´åŠ æ¸…æ™°æµç•…ã€‚</p><p>ä¸JDK1.7çš„putæ–¹æ³•ä¸€æ ·ï¼ŒJDK1.8åœ¨æ·»åŠ å…ƒç´ æ—¶ï¼Œåœ¨æ²¡æœ‰å“ˆå¸Œå†²çªçš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨CASè¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œï¼›å¦‚æœæœ‰å†²çªï¼Œåˆ™é€šè¿‡Synchronizedå°†é“¾è¡¨é”å®šï¼Œå†æ‰§è¡Œæ¥ä¸‹æ¥çš„æ“ä½œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/42/92/42b1a374f1d35789024291a4141d6192.png?wh=1027*461\" alt=\"\"></p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡é”€é‡TOP10åŠŸèƒ½æ—¶ï¼Œé¦–é€‰ConcurrentHashMapã€‚</p><p>ä½†è¦æ³¨æ„ä¸€ç‚¹ï¼Œè™½ç„¶ConcurrentHashMapçš„æ•´ä½“æ€§èƒ½è¦ä¼˜äºHashtableï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸­ï¼ŒConcurrentHashMapä¾ç„¶ä¸èƒ½ä»£æ›¿Hashtableã€‚ä¾‹å¦‚ï¼Œåœ¨å¼ºä¸€è‡´çš„åœºæ™¯ä¸­ConcurrentHashMapå°±ä¸é€‚ç”¨ï¼ŒåŸå› æ˜¯ConcurrentHashMapä¸­çš„getã€sizeç­‰æ–¹æ³•æ²¡æœ‰ç”¨åˆ°é”ï¼ŒConcurrentHashMapæ˜¯å¼±ä¸€è‡´æ€§çš„ï¼Œå› æ­¤æœ‰å¯èƒ½ä¼šå¯¼è‡´æŸæ¬¡è¯»æ— æ³•é©¬ä¸Šè·å–åˆ°å†™å…¥çš„æ•°æ®ã€‚</p><h3>ConcurrentHashMap ğŸ†š ConcurrentSkipListMap</h3><p>æˆ‘ä»¬å†çœ‹ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä¸Šå®¶å…¬å¸çš„æ“ä½œç³»ç»Ÿä¸­æœ‰è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œæé†’ç”¨æˆ·æ‰‹æœºå¡å®æ—¶æµé‡ä¸è¶³ã€‚ä¸»è¦çš„æµç¨‹æ˜¯æœåŠ¡ç«¯å…ˆé€šè¿‡è™šæ‹Ÿè¿è¥å•†åŒæ­¥ç”¨æˆ·å®æ—¶æµé‡ï¼Œå†é€šè¿‡æ‰‹æœºç«¯å®šæ—¶è§¦å‘æŸ¥è¯¢åŠŸèƒ½ï¼Œå¦‚æœæµé‡ä¸è¶³ï¼Œå°±å¼¹å‡ºç³»ç»Ÿé€šçŸ¥ã€‚</p><p>è¯¥åŠŸèƒ½çš„ç‰¹ç‚¹æ˜¯ç”¨æˆ·é‡å¤§ï¼Œå¹¶å‘é‡é«˜ï¼Œå†™å…¥å¤šäºæŸ¥è¯¢æ“ä½œã€‚è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦è®¾è®¡ä¸€ä¸ªç¼“å­˜ï¼Œç”¨æ¥å­˜æ”¾è¿™äº›ç”¨æˆ·ä»¥åŠå¯¹åº”çš„æµé‡é”®å€¼å¯¹ä¿¡æ¯ã€‚é‚£ä¹ˆå‡è®¾è®©ä½ æ¥å®ç°ä¸€ä¸ªç®€å•çš„ç¼“å­˜ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡å‘¢ï¼Ÿ</p><p>ä½ å¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨ConcurrentHashMapå®¹å™¨ï¼Œä½†æˆ‘åœ¨07è®²ä¸­è¯´è¿‡ï¼Œè¯¥å®¹å™¨åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚çº¢é»‘æ ‘åœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œåˆ é™¤å’Œæ’å…¥è¿‡ç¨‹ä¸­æœ‰ä¸ªå¹³è¡¡çš„è¿‡ç¨‹ï¼Œä¼šç‰µæ¶‰åˆ°å¤§é‡èŠ‚ç‚¹ï¼Œå› æ­¤ç«äº‰é”èµ„æºçš„ä»£ä»·ç›¸å¯¹æ¯”è¾ƒé«˜ã€‚</p><p>è€Œè·³è·ƒè¡¨çš„æ“ä½œé’ˆå¯¹å±€éƒ¨ï¼Œéœ€è¦é”ä½çš„èŠ‚ç‚¹å°‘ï¼Œå› æ­¤åœ¨å¹¶å‘åœºæ™¯ä¸‹çš„æ€§èƒ½ä¼šæ›´å¥½ä¸€äº›ã€‚ä½ å¯èƒ½ä¼šé—®äº†ï¼Œåœ¨éçº¿ç¨‹å®‰å…¨çš„Mapå®¹å™¨ä¸­ï¼Œæˆ‘å¹¶æ²¡æœ‰çœ‹åˆ°åŸºäºè·³è·ƒè¡¨å®ç°çš„SkipListMapå‘€ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨éçº¿ç¨‹å®‰å…¨çš„Mapå®¹å™¨ä¸­ï¼ŒåŸºäºçº¢é»‘æ ‘å®ç°çš„TreeMapåœ¨å•çº¿ç¨‹ä¸­çš„æ€§èƒ½è¡¨ç°å¾—å¹¶ä¸æ¯”è·³è·ƒè¡¨å·®ã€‚</p><p>å› æ­¤å°±å®ç°äº†<span class=\"orange\">åœ¨éçº¿ç¨‹å®‰å…¨çš„Mapå®¹å™¨ä¸­ï¼Œç”¨TreeMapå®¹å™¨æ¥å­˜å–å¤§æ•°æ®ï¼›åœ¨çº¿ç¨‹å®‰å…¨çš„Mapå®¹å™¨ä¸­ï¼Œç”¨SkipListMapå®¹å™¨æ¥å­˜å–å¤§æ•°æ®ã€‚</span></p><p>é‚£ä¹ˆConcurrentSkipListMapæ˜¯å¦‚ä½•ä½¿ç”¨è·³è·ƒè¡¨æ¥æå‡å®¹å™¨å­˜å–å¤§æ•°æ®çš„æ€§èƒ½å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹è·³è·ƒè¡¨çš„å®ç°åŸç†ã€‚</p><p><strong>ä»€ä¹ˆæ˜¯è·³è·ƒè¡¨</strong></p><p>è·³è·ƒè¡¨æ˜¯åŸºäºé“¾è¡¨æ‰©å±•å®ç°çš„ä¸€ç§ç‰¹æ®Šé“¾è¡¨ï¼Œç±»ä¼¼äºæ ‘çš„å®ç°ï¼Œè·³è·ƒè¡¨ä¸ä»…å®ç°äº†æ¨ªå‘é“¾è¡¨ï¼Œè¿˜å®ç°äº†å‚ç›´æ–¹å‘çš„åˆ†å±‚ç´¢å¼•ã€‚</p><p>ä¸€ä¸ªè·³è·ƒè¡¨ç”±è‹¥å¹²å±‚é“¾è¡¨ç»„æˆï¼Œæ¯ä¸€å±‚éƒ½å®ç°äº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ç´¢å¼•ï¼Œåªæœ‰æœ€åº•å±‚åŒ…å«äº†æ‰€æœ‰æ•°æ®ï¼Œæ¯ä¸€å±‚ç”±ä¸‹å¾€ä¸Šä¾æ¬¡é€šè¿‡ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸Šå±‚ç›¸åŒå€¼çš„å…ƒç´ ï¼Œæ¯å±‚æ•°æ®ä¾æ¬¡å‡å°‘ï¼Œç­‰åˆ°äº†æœ€é¡¶å±‚å°±åªä¼šä¿ç•™éƒ¨åˆ†æ•°æ®äº†ã€‚</p><p>è·³è·ƒè¡¨çš„è¿™ç§ç»“æ„ï¼Œæ˜¯åˆ©ç”¨äº†ç©ºé—´æ¢æ—¶é—´çš„æ–¹æ³•æ¥æé«˜äº†æŸ¥è¯¢æ•ˆç‡ã€‚ç¨‹åºæ€»æ˜¯ä»æœ€é¡¶å±‚å¼€å§‹æŸ¥è¯¢è®¿é—®ï¼Œé€šè¿‡åˆ¤æ–­å…ƒç´ å€¼æ¥ç¼©å°æŸ¥è¯¢èŒƒå›´ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ å¼ å›¾æ¥äº†è§£ä¸‹è·³è·ƒè¡¨çš„å…·ä½“å®ç°åŸç†ã€‚</p><p>é¦–å…ˆæ˜¯ä¸€ä¸ªåˆå§‹åŒ–çš„è·³è·ƒè¡¨ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/42/80/42f26c3109f56803a8f19bf7fb181c80.jpg?wh=2330*520\" alt=\"\"></p><p>å½“æŸ¥è¯¢keyå€¼ä¸º9çš„èŠ‚ç‚¹æ—¶ï¼Œæ­¤æ—¶æŸ¥è¯¢è·¯å¾„ä¸ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/21/eb/21b0cc4361d662642bddbaf773931feb.jpg?wh=2370*524\" alt=\"\"></p><p>å½“æ–°å¢ä¸€ä¸ªkeyå€¼ä¸º8çš„èŠ‚ç‚¹æ—¶ï¼Œé¦–å…ˆæ–°å¢ä¸€ä¸ªèŠ‚ç‚¹åˆ°æœ€åº•å±‚çš„é“¾è¡¨ä¸­ï¼Œæ ¹æ®æ¦‚ç‡ç®—å‡ºlevelå€¼ï¼Œå†æ ¹æ®levelå€¼æ–°å»ºç´¢å¼•å±‚ï¼Œæœ€åé“¾æ¥ç´¢å¼•å±‚çš„æ–°èŠ‚ç‚¹ã€‚æ–°å¢èŠ‚ç‚¹å’Œé“¾æ¥ç´¢å¼•éƒ½æ˜¯åŸºäºCASæ“ä½œå®ç°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d8/1f/d8de8217c34be6af856773b63c7b7e1f.jpg?wh=2366*494\" alt=\"\"></p><p>å½“åˆ é™¤ä¸€ä¸ªkeyå€¼ä¸º7çš„ç»“ç‚¹æ—¶ï¼Œé¦–å…ˆæ‰¾åˆ°å¾…åˆ é™¤ç»“ç‚¹ï¼Œå°†å…¶valueå€¼è®¾ç½®ä¸ºnullï¼›ä¹‹åå†å‘å¾…åˆ é™¤ç»“ç‚¹çš„nextä½ç½®æ–°å¢ä¸€ä¸ªæ ‡è®°ç»“ç‚¹ï¼Œä»¥ä¾¿å‡å°‘å¹¶å‘å†²çªï¼›ç„¶åè®©å¾…åˆ ç»“ç‚¹çš„å‰é©±èŠ‚ç‚¹ç›´æ¥è¶Šè¿‡æœ¬èº«æŒ‡å‘çš„å¾…åˆ ç»“ç‚¹ï¼Œç›´æ¥æŒ‡å‘åç»§ç»“ç‚¹ï¼Œä¸­é—´è¦è¢«åˆ é™¤çš„ç»“ç‚¹æœ€ç»ˆå°†ä¼šè¢«JVMåƒåœ¾å›æ”¶å¤„ç†æ‰ï¼›æœ€ååˆ¤æ–­æ­¤æ¬¡åˆ é™¤åæ˜¯å¦å¯¼è‡´æŸä¸€ç´¢å¼•å±‚æ²¡æœ‰å…¶å®ƒèŠ‚ç‚¹äº†ï¼Œå¹¶è§†æƒ…å†µåˆ é™¤è¯¥å±‚ç´¢å¼• ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a7/11/a76f5f8f4fcf23a6f0785d0412bfb911.jpg?wh=2360*420\" alt=\"\"></p><p>é€šè¿‡ä»¥ä¸Šä¸¤ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘æƒ³ä½ åº”è¯¥æ¸…æ¥šäº†Hashtableã€ConcurrentHashMapä»¥åŠConcurrentSkipListMapè¿™ä¸‰ç§å®¹å™¨çš„é€‚ç”¨åœºæ™¯äº†ã€‚</p><p><span class=\"orange\">å¦‚æœå¯¹æ•°æ®æœ‰å¼ºä¸€è‡´è¦æ±‚ï¼Œåˆ™éœ€ä½¿ç”¨Hashtableï¼›åœ¨å¤§éƒ¨åˆ†åœºæ™¯é€šå¸¸éƒ½æ˜¯å¼±ä¸€è‡´æ€§çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ConcurrentHashMapå³å¯ï¼›å¦‚æœæ•°æ®é‡åœ¨åƒä¸‡çº§åˆ«ï¼Œä¸”å­˜åœ¨å¤§é‡å¢åˆ æ”¹æ“ä½œï¼Œåˆ™å¯ä»¥è€ƒè™‘ä½¿ç”¨ConcurrentSkipListMapã€‚</span></p><h2>å¹¶å‘åœºæ™¯ä¸‹çš„Listå®¹å™¨</h2><p>ä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªå®é™…ç”Ÿäº§ç¯å¢ƒä¸­çš„æ¡ˆä¾‹ã€‚åœ¨å¤§éƒ¨åˆ†äº’è”ç½‘äº§å“ä¸­ï¼Œéƒ½ä¼šè®¾ç½®ä¸€ä»½é»‘åå•ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿå¯èƒ½ä¼šå°†ä¸€äº›é¢‘ç¹å‚ä¸æŠ¢è´­å´æ”¾å¼ƒä»˜æ¬¾çš„ç”¨æˆ·æ”¾å…¥åˆ°é»‘åå•åˆ—è¡¨ã€‚æƒ³æƒ³è¿™ä¸ªæ—¶å€™ä½ åˆä¼šä½¿ç”¨å“ªä¸ªå®¹å™¨å‘¢ï¼Ÿ</p><p>é¦–å…ˆç”¨æˆ·é»‘åå•çš„æ•°æ®é‡å¹¶ä¸ä¼šå¾ˆå¤§ï¼Œä½†åœ¨æŠ¢è´­ä¸­éœ€è¦æŸ¥è¯¢è¯¥å®¹å™¨ï¼Œå¿«é€Ÿè·å–åˆ°è¯¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨äºé»‘åå•ä¸­ã€‚å…¶æ¬¡ç”¨æˆ·IDæ˜¯æ•´æ•°ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨ã€‚é‚£ä¹ˆArrayListæ˜¯å¦æ˜¯ä½ ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„å‘¢ï¼Ÿ</p><p>æˆ‘è®²è¿‡ArrayListæ˜¯éçº¿ç¨‹å®‰å…¨å®¹å™¨ï¼Œåœ¨å¹¶å‘åœºæ™¯ä¸‹ä½¿ç”¨å¾ˆå¯èƒ½ä¼šå¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨Javaåœ¨å¹¶å‘ç¼–ç¨‹ä¸­æä¾›çš„çº¿ç¨‹å®‰å…¨æ•°ç»„ï¼ŒåŒ…æ‹¬Vectorå’ŒCopyOnWriteArrayListã€‚</p><p>Vectorä¹Ÿæ˜¯åŸºäºSynchronizedåŒæ­¥é”å®ç°çš„çº¿ç¨‹å®‰å…¨ï¼ŒSynchronizedå…³é”®å­—å‡ ä¹ä¿®é¥°äº†æ‰€æœ‰å¯¹å¤–æš´éœ²çš„æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨è¯»è¿œå¤§äºå†™çš„æ“ä½œåœºæ™¯ä¸­ï¼ŒVectorå°†ä¼šå‘ç”Ÿå¤§é‡é”ç«äº‰ï¼Œä»è€Œç»™ç³»ç»Ÿå¸¦æ¥æ€§èƒ½å¼€é”€ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒCopyOnWriteArrayListæ˜¯java.util.concurrentåŒ…æä¾›çš„æ–¹æ³•ï¼Œå®ƒå®ç°äº†è¯»æ“ä½œæ— é”ï¼Œå†™æ“ä½œåˆ™é€šè¿‡æ“ä½œåº•å±‚æ•°ç»„çš„æ–°å‰¯æœ¬æ¥å®ç°ï¼Œæ˜¯ä¸€ç§è¯»å†™åˆ†ç¦»çš„å¹¶å‘ç­–ç•¥ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å›¾ç¤ºæ¥äº†è§£ä¸‹CopyOnWriteArrayListçš„å…·ä½“å®ç°åŸç†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4a/eb/4a7e3d6b77645b3258ba1680aa8087eb.jpg?wh=1762*1094\" alt=\"\"></p><p>å›åˆ°æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“é»‘åå•æ˜¯ä¸€ä¸ªè¯»è¿œå¤§äºå†™çš„æ“ä½œä¸šåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥å›ºå®šåœ¨æŸä¸€ä¸ªä¸šåŠ¡æ¯”è¾ƒç©ºé—²çš„æ—¶é—´ç‚¹æ¥æ›´æ–°åå•ã€‚</p><p>è¿™ç§åœºæ™¯å¯¹å†™å…¥æ•°æ®çš„å®æ—¶è·å–å¹¶æ²¡æœ‰è¦æ±‚ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦ä¿è¯æœ€ç»ˆèƒ½è·å–åˆ°å†™å…¥æ•°ç»„ä¸­çš„ç”¨æˆ·IDå°±å¯ä»¥äº†ï¼Œè€ŒCopyOnWriteArrayListè¿™ç§å¹¶å‘æ•°ç»„å®¹å™¨æ— ç–‘æ˜¯æœ€é€‚åˆè¿™ç±»åœºæ™¯çš„äº†ã€‚</p><h2>æ€»ç»“</h2><p>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨å®¹å™¨æ¥å­˜å‚¨æ•°æ®æˆ–å¯¹è±¡ã€‚Javaåœ¨JDK1.1åˆ°JDK1.8è¿™ä¸ªæ¼«é•¿çš„å‘å±•è¿‡ç¨‹ä¸­ï¼Œä¾æ®åœºæ™¯çš„å˜åŒ–å®ç°äº†åŒç±»å‹çš„å¤šç§å®¹å™¨ã€‚æˆ‘å°†ä»Šå¤©çš„ä¸»è¦å†…å®¹ä¸ºä½ æ€»ç»“äº†ä¸€å¼ è¡¨æ ¼ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿ç•™è¨€è¡¥å……ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6d/99/6d6371fda6214743d69c54528cd8ff99.jpg?wh=1342*624\" alt=\"\"></p><h2>æ€è€ƒé¢˜</h2><p>åœ¨æŠ¢è´­ç±»ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨é˜Ÿåˆ—æ¥å®ç°æŠ¢è´­çš„æ’é˜Ÿç­‰å¾…ï¼Œ<span class=\"orange\">å¦‚æœè¦ä½ æ¥é€‰æ‹©æˆ–è€…è®¾è®¡ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä½ ä¼šæ€ä¹ˆè€ƒè™‘å‘¢ï¼Ÿ</span></p><p>æœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„è§è§£ã€‚ä¹Ÿæ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€è¯·ä»–ä¸€èµ·å­¦ä¹ ã€‚</p><p></p>","neighbors":{"left":{"article_title":"16 | å¤šçº¿ç¨‹è°ƒä¼˜ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•ä¼˜åŒ–å¤šçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ","id":102974},"right":{"article_title":"18 | å¦‚ä½•è®¾ç½®çº¿ç¨‹æ± å¤§å°ï¼Ÿ","id":104094}},"comments":[{"had_liked":false,"id":108175,"user_name":"æ™“æ°","can_delete":false,"product_type":"c1","uid":1441546,"ip_address":"","ucode":"1174C88EEBF8A6","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/0a/12faa44e.jpg","comment_is_top":false,"comment_ctime":1561690813,"is_pvip":false,"replies":[{"id":"39348","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561862177,"ip_address":"","comment_id":108175,"utype":1}],"discussion_count":3,"race_medal":0,"score":"181950317245","product_id":100028001,"comment_content":"å¯ä»¥ç”¨ConcurrentLinkedQueueï¼Œä¼˜åŠ¿å¦‚ä¸‹ï¼š<br>1ã€æŠ¢è´­åœºæ™¯ä¸€èˆ¬éƒ½æ˜¯å†™å¤šè¯»å°‘ï¼Œè¯¥é˜Ÿåˆ—åŸºäºé“¾è¡¨å®ç°ï¼Œæ‰€ä»¥æ–°å¢å’Œåˆ é™¤å…ƒç´ æ€§èƒ½è¾ƒé«˜<br>2ã€å†™æ•°æ®æ—¶é€šè¿‡casæ“ä½œï¼Œæ€§èƒ½è¾ƒé«˜ã€‚<br>ä½†æ˜¯LinkedQueueæœ‰ä¸€ä¸ªæ™®éå­˜åœ¨çš„é—®é¢˜ï¼Œå°±æ˜¯è¯¥é˜Ÿåˆ—æ˜¯æ— ç•Œçš„ï¼Œéœ€è¦æ§åˆ¶å®¹é‡ï¼Œå¦åˆ™å¯èƒ½å¼•èµ·å†…å­˜æº¢å‡º","like_count":43,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455857,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561862177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1230293,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c5/d5/90ca8efe.jpg","nickname":"æ‹‰å¯é‡Œå•¦","note":"","ucode":"26E20DF096BDAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257536,"discussion_content":"è¯·é—®æ€ä¹ˆè®¾ç½®ä¸ºæœ‰ç•Œé˜Ÿåˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588584942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066705,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/d1/a1ddf49f.jpg","nickname":"é˜¿æœ","note":"","ucode":"349D3572F5ABE7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85659,"discussion_content":"åŒæƒ³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576563752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107929,"user_name":"ä¸œæ–¹å¥‡éª¥","can_delete":false,"product_type":"c1","uid":1354850,"ip_address":"","ucode":"DEE7085F7E55A4","user_header":"https://static001.geekbang.org/account/avatar/00/14/ac/62/37912d51.jpg","comment_is_top":false,"comment_ctime":1561635198,"is_pvip":true,"replies":[{"id":"39196","content":"å¯¹çš„ï¼ŒCopyOnWriteArrayListåªé€‚åˆå¶å°”ä¸€ä¸¤æ¬¡æ•°æ®æ›´æ”¹çš„æ“ä½œã€‚æˆ‘ä»¬å¾ˆå¤šç¼“å­˜æ•°æ®å¾€å¾€æ˜¯åœ¨æ·±å¤œåœ¨æ²¡æœ‰è¯»æ“ä½œæ—¶ï¼Œè¿›è¡Œä¿®æ”¹ã€‚è¿™ç§åœºæ™¯é€‚åˆä½¿ç”¨CopyOnWriteArrayListã€‚<br><br>æˆ‘ä»¬å…ˆæ¥ç†è§£ä¸‹happens-beforeè§„åˆ™ä¸­ï¼Œå¯¹é”çš„è§„åˆ™ï¼š<br>ä¸€ä¸ªunLockæ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œï¼›<br><br>ä¹Ÿå°±æ˜¯è¯´ï¼ŒConcurrentHashMapä¸­çš„getå¦‚æœæœ‰é”æ“ä½œï¼Œåœ¨putæ“ä½œä¹‹åï¼Œgetæ“ä½œæ˜¯ä¸€å®šèƒ½æ‹¿åˆ°putåçš„æ•°æ®ï¼›è€Œå®é™…ä¸Šgetæ“ä½œæ—¶æ²¡æœ‰é”çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹é¢è¿™ç§æƒ…å†µï¼š<br>void func(){<br>map.put(key1,value1);<br>map.get(key1);<br>.<br>.<br>&#47;&#47;use key1 value to do something<br>}<br>æ­¤æ—¶ï¼Œgetè·å–å€¼çš„å¯èƒ½ä¸æ˜¯putä¿®æ”¹çš„å€¼ï¼Œè€Œæ­¤æ—¶getæ²¡æœ‰è·å–åˆ°çœŸæ­£è¦è·å–çš„å€¼ï¼Œæ­¤æ—¶å°±æ˜¯å¼±ä¸€è‡´äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561692657,"ip_address":"","comment_id":107929,"utype":1}],"discussion_count":6,"race_medal":0,"score":"113230784894","product_id":100028001,"comment_content":"å¦‚æœæ•°æ®å˜åŠ¨é¢‘ç¹ï¼Œå°±ä¸å»ºè®®ä½¿ç”¨CopyOnWriteArrayListäº†ï¼Œå› ä¸ºæ¯æ¬¡å†™éƒ½è¦æ‹·è´ä¸€ä»½ï¼Œä»£ä»·å¤ªå¤§ã€‚è€å¸ˆï¼Œæ€ä¹ˆç›´è§‚ç†è§£å¼ºä¸€è‡´æ€§å’Œå¼±ä¸€è‡´æ€§ï¼Ÿä¹‹å‰ä¸€ç›´è§‰å¾—ConcurrentHashMapå°±æ˜¯ç”¨æ¥ä»£æ›¿HashTableçš„ï¼Œå› ä¸ºHashTableå¹¶å‘æ—¶å› ä¸ºåŒæ­¥é”æ€§èƒ½å·®ã€‚","like_count":27,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455749,"discussion_content":"å¯¹çš„ï¼ŒCopyOnWriteArrayListåªé€‚åˆå¶å°”ä¸€ä¸¤æ¬¡æ•°æ®æ›´æ”¹çš„æ“ä½œã€‚æˆ‘ä»¬å¾ˆå¤šç¼“å­˜æ•°æ®å¾€å¾€æ˜¯åœ¨æ·±å¤œåœ¨æ²¡æœ‰è¯»æ“ä½œæ—¶ï¼Œè¿›è¡Œä¿®æ”¹ã€‚è¿™ç§åœºæ™¯é€‚åˆä½¿ç”¨CopyOnWriteArrayListã€‚\n\næˆ‘ä»¬å…ˆæ¥ç†è§£ä¸‹happens-beforeè§„åˆ™ä¸­ï¼Œå¯¹é”çš„è§„åˆ™ï¼š\nä¸€ä¸ªunLockæ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œï¼›\n\nä¹Ÿå°±æ˜¯è¯´ï¼ŒConcurrentHashMapä¸­çš„getå¦‚æœæœ‰é”æ“ä½œï¼Œåœ¨putæ“ä½œä¹‹åï¼Œgetæ“ä½œæ˜¯ä¸€å®šèƒ½æ‹¿åˆ°putåçš„æ•°æ®ï¼›è€Œå®é™…ä¸Šgetæ“ä½œæ—¶æ²¡æœ‰é”çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹é¢è¿™ç§æƒ…å†µï¼š\nvoid func(){\nmap.put(key1,value1);\nmap.get(key1);\n.\n.\n//use key1 value to do something\n}\næ­¤æ—¶ï¼Œgetè·å–å€¼çš„å¯èƒ½ä¸æ˜¯putä¿®æ”¹çš„å€¼ï¼Œè€Œæ­¤æ—¶getæ²¡æœ‰è·å–åˆ°çœŸæ­£è¦è·å–çš„å€¼ï¼Œæ­¤æ—¶å°±æ˜¯å¼±ä¸€è‡´äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561692657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1037708,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d5/8c/c0200a17.jpg","nickname":"M#","note":"","ucode":"1C80F782036173","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40203,"discussion_content":"æ‚¨çš„ä¾‹å­å¯ä»¥ç†è§£ï¼Œä½†æ˜¯mapä¸­çš„å€¼éƒ½æ˜¯è¢«volatileä¿®é¥°è¿‡çš„ï¼Œvolatileå¯ä»¥ä¿è¯hpçš„ï¼Œè¿™ä¸ªè¯´æ³•å¯¹å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572103948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136420,"avatar":"https://static001.geekbang.org/account/avatar/00/11/57/24/2d942948.jpg","nickname":"Eaglet","note":"","ucode":"AC20EDC1204860","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3195,"discussion_content":"è€å¸ˆï¼Œä½ è¿™ä¸ªä¸¾å¾—è¿™ä¸ªä¾‹å­æˆ‘è¿˜æ˜¯ä¸å¤ªç†è§£ï¼Œ åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œç¨‹åºæ€»æ˜¯çº¿æ€§æ‰§è¡Œçš„æŠŠï¼Œå…ˆ putï¼Œå† getï¼Œget æ€»èƒ½æ‹¿åˆ°æœ€æ–°å€¼å§ï¼Ÿ\næ‚¨è¿™é‡Œæ„æ€æ˜¯ä¸æ˜¯è¿™æ ·çš„ï¼Œä¸¤ä¸ªçº¿ç¨‹Aå’Œ Bï¼ŒAçº¿ç¨‹è·å–äº† put é”è¿›å…¥ put æ–¹æ³•å»ä¿®æ”¹æ•°æ®ï¼Œä¸æ­¤åŒæ—¶ï¼ŒBçº¿ç¨‹å A ä¸€æ­¥æ‰§è¡ŒåŒä¸€æ®µä»£ç æ®µï¼Œè¿™æ—¶å€™ A ç»§ç»­å¾€ä¸‹æ‰§è¡Œget æ–¹æ³•ï¼Œåªèƒ½ get åˆ°è‡ªå·±ä¿®æ”¹çš„ï¼ŒB åˆšåˆšä¿®æ”¹çš„æœ€æ–°æ•°æ® A å¯èƒ½å°± get ä¸åˆ°äº†ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿ\nè¯·è€å¸ˆè§£æƒ‘ï¼Œè°¢è°¢è€å¸ˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564294278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2055554,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5d/82/81b2ba91.jpg","nickname":"keep_it_real","note":"","ucode":"F5057CAF752FF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577004,"discussion_content":"Nodeç±»å‹çš„tableåŠ äº†volatileä¿®é¥°è¯æ„å‘³ç€è¿™ä¸ªtableçš„å¼•ç”¨æ˜¯çº¿ç¨‹é—´å¯è§çš„ï¼Œä½†å¯¹äºé‡Œé¢çš„å…ƒç´ å¹¶ä¸å¯è§ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¿åˆ°çš„éƒ½æ˜¯CPUç¼“å­˜ï¼Œåœ¨ä¿®æ”¹ååŒæ­¥åˆ°å†…å­˜ä¹‹å‰ï¼Œå…¶ä»–çº¿ç¨‹è·å–åˆ°çš„å€¼éƒ½æ˜¯ä¿®æ”¹å‰çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655880174,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1759325,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/d8/5d/07dfb3b5.jpg","nickname":"æ¯è«åœ","note":"","ucode":"4FA1D5CBBEF702","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2055554,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5d/82/81b2ba91.jpg","nickname":"keep_it_real","note":"","ucode":"F5057CAF752FF3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581295,"discussion_content":"å®é™…ä¸Štableä¸­å­˜çš„æ˜¯å¯¹æ¯ä¸ªNodeå¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶ä¸æ˜¯nodeå¯¹è±¡æœ¬èº«ï¼Œæ‰€ä»¥å¼•ç”¨è¢«volatileä¿®é¥°åªæ˜¯æ„å‘³ç€ tableå¯¹è±¡æ˜¯çº¿ç¨‹é—´å¯è§çš„è€Œnodeä¸æ˜¯ã€‚å› æ­¤çº¿ç¨‹ä¿®æ”¹çš„æ˜¯CPUç¼“å­˜ä¸­çš„nodeçš„æ•°æ®ï¼Œå¦‚æœè¿˜æœªåŒæ­¥åˆ°å†…å­˜ï¼Œputæ“ä½œåœ¨æ²¡æœ‰åŒæ­¥åˆ°å†…å­˜ä¹‹å‰ å°±getä¸åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658715212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":577004,"ip_address":""},"score":581295,"extra":""}]},{"author":{"id":2055554,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5d/82/81b2ba91.jpg","nickname":"keep_it_real","note":"","ucode":"F5057CAF752FF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577002,"discussion_content":"å°±æ˜¯çº¿ç¨‹Açš„putè¿˜åœ¨ä¸´ç•ŒåŒºï¼Œçº¿ç¨‹Bçš„getå»è·å–ï¼Œè·å–åˆ°çš„å€¼æ˜¯A putä¹‹å‰çš„å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655879926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150457,"user_name":"å¬é›¨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1573539942,"is_pvip":false,"replies":[{"id":"57991","content":"è¿™è·Ÿå¹¶å‘æœ‰å…³ç³»ï¼Œæˆ‘ä»¬çŸ¥é“ConcurrentHashMapå’ŒHashTableéƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå‡è®¾å…è®¸keyå’Œvalueä¸ºnullï¼Œæœ‰ä»¥ä¸‹ä»£ç ï¼š<br><br>if (map.containsKey(key)) {&#47;&#47;ä»£ç 1<br>   return map.get(key);&#47;&#47;ä»£ç 2<br>} else {<br>   throw new KeyNotPresentException();<br>}<br><br>å½“åœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«åœ¨æ“ä½œmapå®¹å™¨ï¼Œæ­¤æ—¶çº¿ç¨‹1åœ¨è¿è¡Œä»¥ä¸Šä»£ç ï¼Œå½“çº¿ç¨‹1è¿è¡Œåˆ°ä»£ç 1ä¸ä»£ç 2ä¸­é—´æ—¶ï¼Œåˆšå¥½æœ‰å¦å¤–ä¸€ä¸ªçº¿ç¨‹2æ‰§è¡Œäº†map.remove(key)æ“ä½œï¼Œæ­¤æ—¶ç»§ç»­è¿è¡Œä»£ç 2æ—¶ï¼Œä¾ç„¶ä¼šè¿”å›nullå€¼ã€‚è€Œæ­¤æ—¶çš„nullå®é™…ä¸Šæ˜¯mapä¸­çœŸå®çš„ä¸å­˜åœ¨è¯¥keyå€¼ï¼Œåº”è¯¥throw new KeyNotPresentException()çš„ã€‚æ‰€ä»¥ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œè¿™ä¸¤ä¸ªMapå®¹å™¨æ˜¯ä¸å…è®¸keyå’Œvalueä¸ºnullã€‚<br><br>è€ŒHashMapæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œä¸å­˜åœ¨ä»¥ä¸Šæˆ‘ä»¬æ‰€è¯´çš„å¹¶å‘æƒ…å†µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1573615051,"ip_address":"","comment_id":150457,"utype":1}],"discussion_count":6,"race_medal":0,"score":"100357787750","product_id":100028001,"comment_content":"ä¸ºä»€ä¹ˆConcurrentHashMapå’ŒHashTableçš„keyå’Œvalueä¸èƒ½ä¸ºç©ºï¼Œè€ŒHashMapå´å¯ä»¥ï¼Œè¿™ä¹ˆè®¾è®¡çš„åŸå› æ˜¯ä»€ä¹ˆå‘¢","like_count":22,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474165,"discussion_content":"è¿™è·Ÿå¹¶å‘æœ‰å…³ç³»ï¼Œæˆ‘ä»¬çŸ¥é“ConcurrentHashMapå’ŒHashTableéƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå‡è®¾å…è®¸keyå’Œvalueä¸ºnullï¼Œæœ‰ä»¥ä¸‹ä»£ç ï¼š\n\nif (map.containsKey(key)) {//ä»£ç 1\n   return map.get(key);//ä»£ç 2\n} else {\n   throw new KeyNotPresentException();\n}\n\nå½“åœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«åœ¨æ“ä½œmapå®¹å™¨ï¼Œæ­¤æ—¶çº¿ç¨‹1åœ¨è¿è¡Œä»¥ä¸Šä»£ç ï¼Œå½“çº¿ç¨‹1è¿è¡Œåˆ°ä»£ç 1ä¸ä»£ç 2ä¸­é—´æ—¶ï¼Œåˆšå¥½æœ‰å¦å¤–ä¸€ä¸ªçº¿ç¨‹2æ‰§è¡Œäº†map.remove(key)æ“ä½œï¼Œæ­¤æ—¶ç»§ç»­è¿è¡Œä»£ç 2æ—¶ï¼Œä¾ç„¶ä¼šè¿”å›nullå€¼ã€‚è€Œæ­¤æ—¶çš„nullå®é™…ä¸Šæ˜¯mapä¸­çœŸå®çš„ä¸å­˜åœ¨è¯¥keyå€¼ï¼Œåº”è¯¥throw new KeyNotPresentException()çš„ã€‚æ‰€ä»¥ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œè¿™ä¸¤ä¸ªMapå®¹å™¨æ˜¯ä¸å…è®¸keyå’Œvalueä¸ºnullã€‚\n\nè€ŒHashMapæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œä¸å­˜åœ¨ä»¥ä¸Šæˆ‘ä»¬æ‰€è¯´çš„å¹¶å‘æƒ…å†µã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573615051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1304195,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtlEYuHnR8VdRkNPcmkIqTM9DKahpcpicDdBvcmBWMIAAhBrd0QNWvl09slqrzB5TibryVcIfPmb7Q/132","nickname":"raisecomer","note":"","ucode":"32EA488E46471F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301900,"discussion_content":"åº”è¯¥å’ŒputIfAbsentæ–¹æ³•æœ‰å…³ï¼Œå¦‚æœå…è®¸nullï¼Œé‚£ä¹ˆå½“putIfAbsentè¿”å›nullæ—¶ï¼Œæ˜¯mapä¸­ä¸å­˜åœ¨è¯¥é”®å€¼å‘¢ï¼Œè¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªnullçš„valueå‘¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598704300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004698,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","nickname":"æ¯å¤©æ™’ç™½ç‰™","note":"","ucode":"A1B102CD933DEA","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204835,"discussion_content":"ConcurrentHashMapä¹Ÿä¼šå‡ºç°è€å¸ˆæ‚¨è¯´çš„è¿™ç§é—®é¢˜å§ï¼Ÿä¸¤ä¸ªçº¿ç¨‹æŒ‰ç…§ä¸Šé¢çš„é¡ºåºæ‰§è¡Œï¼Œä¹Ÿä¼šå‡ºç°nullçš„æƒ…å†µï¼Œè¿˜æœ›æŒ‡ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584231857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1254493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","nickname":"å¬é›¨","note":"","ucode":"252754F9FCFF0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1004698,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","nickname":"æ¯å¤©æ™’ç™½ç‰™","note":"","ucode":"A1B102CD933DEA","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":205673,"discussion_content":"æˆ‘æƒ³è€å¸ˆçš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸ºnullä¸èƒ½åŒºåˆ†ä¸¤ç§æƒ…å†µï¼šä¸€ç§æ˜¯å€¼ä¸ºnullï¼Œå¦ä¸€ç§æ˜¯å€¼ä¸å­˜åœ¨ã€‚concurrenthashmapæ’å…¥æœ‰ä¸€æ®µåˆ†æ”¯é€»è¾‘æ˜¯é€šè¿‡keyæ‰¾åˆ°å¯¹åº”çš„æ§½ä½ï¼Œå¦‚æœæ§½ä½æ˜¯nullï¼Œå°±æ’å…¥æ•°æ®ï¼Œå¦åˆ™èµ°å¦ä¸€ä¸ªåˆ†æ”¯ã€‚å¦‚æœconcurrenthashmapçš„å€¼å…è®¸ä¸ºnullï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯ä¸èƒ½åŒºåˆ†çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584330776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":204835,"ip_address":""},"score":205673,"extra":""},{"author":{"id":1190150,"avatar":"https://static001.geekbang.org/account/avatar/00/12/29/06/0b327738.jpg","nickname":"Gankki","note":"","ucode":"399C6F74286590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1004698,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","nickname":"æ¯å¤©æ™’ç™½ç‰™","note":"","ucode":"A1B102CD933DEA","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":224200,"discussion_content":"è¿™æ˜¯ä½œè€…Doug Leaå…³äºè¿™ä¸ªé—®é¢˜çš„è§£ç­”http://cs.oswego.edu/pipermail/concurrency-interest/2006-May/002485.html\nä¸€ï¼šå…³äºè€å¸ˆçš„å›ç­”ï¼Œé¦–å…ˆHashTableä¸­çš„æ–¹æ³•éƒ½æ˜¯ç”¨Synchronizedï¼Œæ‰€ä»¥åœ¨å½“ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°é”ä¹‹åï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åœ¨ä»£ç ä¸€å’ŒäºŒä¹‹é—´æ˜¯ä¸èƒ½è·å–åˆ°è¿™ä¸ªå¯¹è±¡çš„é”çš„ï¼Œå°±ä¸å­˜åœ¨ä¸Šé¢çš„æƒ…å†µã€‚\näºŒï¼šConcurrentHashMapå’ŒConcurrentSkipListHashMapï¼Œå®ƒä»¬çš„getæ–¹æ³•æ˜¯ä¸åŠ é”çš„ï¼ˆcontainsKeyä¹Ÿæ˜¯æ ¹æ®getæ–¹æ³•åˆ¤æ–­çš„ï¼‰ï¼Œå¦‚æœkey/valueå…è®¸ä¸ºnullï¼Œä»£ç ä¸€ä¸ºtrueåˆ™è¯´æ˜å­˜åœ¨keyä¸ºnullçš„é”®å€¼å¯¹ï¼Œæ­¤æ—¶åœ¨ä»£ç ä¸€ä¸äºŒä¹‹é—´å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°†è¿™ä¸ªä¸ºnullçš„keyåˆ é™¤äº†ï¼Œæ­¤æ—¶ä»£ç 2è¿”å›ä¸ºnullï¼Œæ ¹æ®é€»è¾‘è¿”å›çš„æ˜¯keyä¸ºnullçš„valueï¼Œå®é™…ä¸Škeyå·²ç»è¢«å¦å¤–ä¸€ä¸ªçº¿ç¨‹åˆ é™¤ï¼Œè¿™ä¸ªæ—¶å€™å°±æœ‰äº†æ­§ä¹‰ï¼Œå…³äºä»£ç äºŒè¿”å›çš„å€¼ï¼Œåˆ°åº•æ˜¯å­˜åœ¨keyä¸ºnullçš„é”®å€¼å¯¹è¿˜æ˜¯ä¸å­˜åœ¨æ˜¯æœ‰æ­§ä¹‰çš„ã€‚æ‰€ä»¥ä¸ºäº†é¿å…è¿™ç§æ­§ä¹‰ï¼Œçº¿ç¨‹å®‰å…¨çš„Mapå°±ä¸å…è®¸key/valueä¸ºnullï¼Œä¸å…è®¸äº†è¿”å›ä¸ºnullå°±æ˜¯å®¹å™¨ä¸­ä¸å­˜åœ¨key/valueä¸ºnullçš„é”®å€¼å¯¹ï¼Œä¸ç”¨å†çº ç»“æ˜¯key/valueweinulläº†ã€‚\n\nç»¼ä¸Šï¼šçº¿ç¨‹å®‰å…¨çš„mapä¸å…è®¸key/valueä¸ºnullï¼Œå› ä¸ºåœ¨å¤šçº¿ç¨‹æ¡ä»¶ä¸‹ï¼Œå¯¹äºkey/valueæ˜¯å¦çœŸçš„å­˜åœ¨æœ‰æ­§ä¹‰ã€‚\n\nä¸ªäººç†è§£ï¼Œä»…ä¾›å‚è€ƒã€‚","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1586272559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":204835,"ip_address":""},"score":224200,"extra":""},{"author":{"id":1307497,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f3/69/7039d03f.jpg","nickname":"ä¹¦ç­–ç¨ æµŠ","note":"","ucode":"A29875CE15FDA3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1190150,"avatar":"https://static001.geekbang.org/account/avatar/00/12/29/06/0b327738.jpg","nickname":"Gankki","note":"","ucode":"399C6F74286590","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381221,"discussion_content":"æ€»ç»“å¾—éå¸¸å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624957773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":224200,"ip_address":""},"score":381221,"extra":""}]}]},{"had_liked":false,"id":107669,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1561594959,"is_pvip":false,"replies":[{"id":"38960","content":"å¯¹çš„ï¼ŒConcurrentLinkedQueueæ˜¯åŸºäºCASä¹è§‚é”æ¥å®ç°çº¿ç¨‹å®‰å…¨ã€‚ConcurrentLinkedQueueæ˜¯æ— ç•Œçš„ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™è¦ç‰¹åˆ«æ³¨æ„å†…å­˜æº¢å‡ºé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561599206,"ip_address":"","comment_id":107669,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53101202511","product_id":100028001,"comment_content":"æŠ¢è´­çš„è¿‡ç¨‹ä¸­å­˜åœ¨å¹¶å‘æ“ä½œï¼Œæ‰€ä»¥éœ€è¦ç”¨çº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼ŒåŒæ—¶ï¼ŒæŠ¢è´­çš„ç”¨æˆ·ä¼šå¾ˆå¤šï¼Œåº”å½“ä½¿ç”¨é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œè¿™ç§åœºæ™¯å¾€å¾€æ˜¯å†™å¤šè¯»å°‘ï¼Œè¿˜éœ€è¦æ’é˜Ÿï¼Œæ‰€ä»¥ ConcurrentLinkedQueueåº”è¯¥æ˜¯æœ€åˆé€‚çš„","like_count":13,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455619,"discussion_content":"å¯¹çš„ï¼ŒConcurrentLinkedQueueæ˜¯åŸºäºCASä¹è§‚é”æ¥å®ç°çº¿ç¨‹å®‰å…¨ã€‚ConcurrentLinkedQueueæ˜¯æ— ç•Œçš„ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™è¦ç‰¹åˆ«æ³¨æ„å†…å­˜æº¢å‡ºé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561599206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107988,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1561644040,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"48806284296","product_id":100028001,"comment_content":"éº»çƒ¦è€å¸ˆåŠ é¤å‡ºä¸ªqueueå¹¶å‘ç›¸å…³çš„æ–‡ç« ï¼Œæ„Ÿæ¿€ä¸å°½ï¼ï¼ï¼","like_count":12},{"had_liked":false,"id":107745,"user_name":"å¤§é›å°é±¼","can_delete":false,"product_type":"c1","uid":1101017,"ip_address":"","ucode":"44090581E59FDA","user_header":"https://static001.geekbang.org/account/avatar/00/10/cc/d9/20d4f7c2.jpg","comment_is_top":false,"comment_ctime":1561602885,"is_pvip":false,"replies":[{"id":"39183","content":"å› ä¸ºConcurrentHashMapæœ‰äº›æ–¹æ³•æ˜¯æ²¡æœ‰é”çš„ï¼Œä¾‹å¦‚get æ–¹æ³•ã€‚å‡è®¾Aä¿®æ”¹äº†æ•°æ®ï¼Œè€ŒBåäºAä¸€ç¬é—´å»è·å–æ•°æ®ï¼Œæœ‰å¯èƒ½æ‹¿åˆ°çš„æ•°æ®æ˜¯Aä¿®æ”¹ä¹‹å‰çš„æ•°æ®ã€‚<br><br>è¿˜æœ‰ clear foreachæ–¹æ³•åœ¨æ“ä½œæ—¶ï¼Œéƒ½æœ‰å¯èƒ½å­˜åœ¨æ•°æ®ä¸ç¡®å®šæ€§ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561690253,"ip_address":"","comment_id":107745,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31626373957","product_id":100028001,"comment_content":"è€å¸ˆï¼ŒConcurrentHashMapä¸ºå•¥æ˜¯å¼±ä¸€è‡´æ€§çš„ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455651,"discussion_content":"å› ä¸ºConcurrentHashMapæœ‰äº›æ–¹æ³•æ˜¯æ²¡æœ‰é”çš„ï¼Œä¾‹å¦‚get æ–¹æ³•ã€‚å‡è®¾Aä¿®æ”¹äº†æ•°æ®ï¼Œè€ŒBåäºAä¸€ç¬é—´å»è·å–æ•°æ®ï¼Œæœ‰å¯èƒ½æ‹¿åˆ°çš„æ•°æ®æ˜¯Aä¿®æ”¹ä¹‹å‰çš„æ•°æ®ã€‚\n\nè¿˜æœ‰ clear foreachæ–¹æ³•åœ¨æ“ä½œæ—¶ï¼Œéƒ½æœ‰å¯èƒ½å­˜åœ¨æ•°æ®ä¸ç¡®å®šæ€§ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561690253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211199,"user_name":"å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1242455,"ip_address":"","ucode":"0CCCA6F4DCC480","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/57/ce10fb1b.jpg","comment_is_top":false,"comment_ctime":1587912878,"is_pvip":false,"replies":[{"id":"78607","content":"è™½ç„¶Node&lt;k,v&gt;å’Œvalueè¢«volatileä¿®é¥°ï¼Œå¯ä»¥è·å–åˆ°æœ€æ–°å€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæ–°Nodeï¼Œé‚£ä¹ˆå°±ä¸èƒ½é©¬ä¸Šåœ¨tableä¸­çœ‹åˆ°ã€‚è™½ç„¶Nodeçš„æ•°ç»„tableè¢«volatileä¿®é¥°ï¼Œä½†æ˜¯è¿™æ ·åªæ˜¯ä»£è¡¨tableçš„å¼•ç”¨åœ°å€è¢«ä¿®æ”¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹é©¬çœ‹åˆ°ï¼Œå¹¶ä¸ä»£è¡¨tableé‡Œçš„æ•°æ®è¢«ä¿®æ”¹ç«‹é©¬å¯ä»¥çœ‹åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1587987059,"ip_address":"","comment_id":211199,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23062749358","product_id":100028001,"comment_content":"ConcurrentHashMap æ˜¯å¼±ä¸€è‡´æ€§çš„ï¼Œå› æ­¤æœ‰å¯èƒ½ä¼šå¯¼è‡´æŸæ¬¡è¯»æ— æ³•é©¬ä¸Šè·å–åˆ°å†™å…¥çš„æ•°æ®ã€‚è¿™å¥è¯ä¸ç†è§£å•Šï¼Œä¸ºä»€ä¹ˆä¼šæ— æ³•é©¬ä¸Šè·å–åˆ°å†™å…¥çš„æ•°æ®å‘¢ï¼Ÿåˆä¸åƒmysqlé‚£æ ·å­˜åœ¨äº‹åŠ¡éš”ç¦»ã€‚","like_count":6,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493218,"discussion_content":"è™½ç„¶Node&amp;lt;k,v&amp;gt;å’Œvalueè¢«volatileä¿®é¥°ï¼Œå¯ä»¥è·å–åˆ°æœ€æ–°å€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæ–°Nodeï¼Œé‚£ä¹ˆå°±ä¸èƒ½é©¬ä¸Šåœ¨tableä¸­çœ‹åˆ°ã€‚è™½ç„¶Nodeçš„æ•°ç»„tableè¢«volatileä¿®é¥°ï¼Œä½†æ˜¯è¿™æ ·åªæ˜¯ä»£è¡¨tableçš„å¼•ç”¨åœ°å€è¢«ä¿®æ”¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹é©¬çœ‹åˆ°ï¼Œå¹¶ä¸ä»£è¡¨tableé‡Œçš„æ•°æ®è¢«ä¿®æ”¹ç«‹é©¬å¯ä»¥çœ‹åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587987059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107864,"user_name":"é™†ç¦»","can_delete":false,"product_type":"c1","uid":1483932,"ip_address":"","ucode":"2C8C206CE36A81","user_header":"https://static001.geekbang.org/account/avatar/00/16/a4/9c/b32ed9e9.jpg","comment_is_top":false,"comment_ctime":1561625201,"is_pvip":false,"replies":[{"id":"39049","content":"å¤šç•™è¨€å“¦ï½è¯´ä¸å®šåœ¨ä¸‹ä¸€æœŸçš„åŠ é¤ä¸­å°±æƒŠç°ç¦åˆ©äº†ï¼ğŸ˜à½²","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç‹å†¬é’","uid":"1356014","ctime":1561638350,"ip_address":"","comment_id":107864,"utype":2}],"discussion_count":1,"race_medal":0,"score":"23036461681","product_id":100028001,"comment_content":"è¿™ä¸€èŠ‚è¦æ˜¯æœ‰Queueå°±æ›´å¥½äº†ï¼Œé‚£å‡ ä¸ªblockingQueueè¿˜æ˜¯å¾ˆæœ‰æ„æ€çš„","like_count":6,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"å†¬é’","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455714,"discussion_content":"å¤šç•™è¨€å“¦ï½è¯´ä¸å®šåœ¨ä¸‹ä¸€æœŸçš„åŠ é¤ä¸­å°±æƒŠç°ç¦åˆ©äº†ï¼ğŸ˜à½²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561638350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132244,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1568069474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18747938658","product_id":100028001,"comment_content":"è¿˜ä¸é”™ï¼Œä»Šå¤©è®¤è¯†åˆ°ConcurrentHashMapå­˜åœ¨æ•°æ®å¼±ä¸€è‡´æ€§é—®é¢˜ï¼Œå‘ç”Ÿå¼±ä¸€è‡´æ€§é—®é¢˜åº”è¯¥æ˜¯ä¸ªå°æ¦‚ç‡äº‹ä»¶å§!è€å¸ˆæ¸…æ¥šå¤§æ¦‚ä»€ä¹ˆæ•°æ®é‡ä»€ä¹ˆæ¦‚ç‡å˜›ï¼Ÿ<br>è€å¸ˆè®²è§£çš„ä¸å…¨å‘€ğŸ˜„JUCä¸­å¹¶å‘å®¹å™¨å¯å¤šäº†ï¼Œæœ€å…¸å‹çš„éƒ½æ²¡è®²å…¨ï¼Œå»ºè®®åˆ—ä¸ªå…¨ä¸€äº›çš„å¯¹ç…§è¡¨æ›´å¥½ä¸€äº›ã€‚<br>ä¸è¿‡ï¼Œä»–ä»¬çš„ç‰¹ç‚¹å…¶å®å’Œéå¤šçº¿ç¨‹å®‰å…¨çš„ä¸»è¦å°±å·®åœ¨æ˜¯å¦å®‰å…¨ï¼Œç„¶åå°±æ˜¯è‡ªèº«ç»“æ„å†³å®šçš„ä¸€äº›ç‰¹æ€§å•¦ï¼<br>æ¯”å¦‚ï¼šè¯»å†™æ€§èƒ½ã€æ˜¯å¦æœ‰ç•Œã€æ˜¯å¦é˜»å¡ã€MAPå­˜å‚¨é”®å€¼å¯¹ã€LISTé€šå¸¸é€‚åˆå†™å¤šçš„åœºæ™¯ã€QUEUEé€‚åˆæ’é˜Ÿç­‰å¾…ç­‰ç­‰ã€‚","like_count":5},{"had_liked":false,"id":107949,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1561639162,"is_pvip":false,"replies":[{"id":"39186","content":"1ã€ä¸¤è€…çš„å¹³å‡æŸ¥è¯¢å¤æ‚åº¦éƒ½æ˜¯O(logn)ï¼Œæ‰€ä»¥æŸ¥è¯¢æ€§èƒ½å·®ä¸å¤šã€‚è€Œåœ¨æ–°å¢å’Œåˆ é™¤æ“ä½œï¼Œçº¢é»‘æ ‘æœ‰å¹³è¡¡æ“ä½œï¼Œä½†è·³è·ƒè¡¨ä¹Ÿæœ‰å»ºç«‹ç´¢å¼•å±‚æ“ä½œã€‚è·³è·ƒè¡¨çš„ç»“æ„ç®€å•æ˜“æ‡‚ã€‚<br><br>2ã€è¿™é‡Œæ˜¯åŸºäºæ•°æ®é‡æ¯”è¾ƒå¤§ï¼ˆä¾‹å¦‚åƒä¸‡çº§åˆ«ï¼‰ä¸”å†™å…¥æ“ä½œå¤šçš„æƒ…å†µä¸‹ï¼ŒConcurrentSkipListMapæ€§èƒ½è¦æ¯”ConcurrentHashMapå¥½ä¸€äº›ï¼Œå¹¶ä¸æ˜¯åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½è¦ä¼˜äºConcurrentHashMapçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561691081,"ip_address":"","comment_id":107949,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18741508346","product_id":100028001,"comment_content":"è¯·é—®ä¸€ä¸‹è€å¸ˆä¸¤ä¸ªé—®é¢˜:<br>1. ä¸ºä»€ä¹ˆåœ¨æ— é”æ˜¯çº¢é»‘æ ‘å’Œè·³è¡¨çš„æ€§èƒ½å·®ä¸å¤šå‘¢, çº¢é»‘æ ‘å†å¹³è¡¡çš„æ“ä½œä¼šä¸ä¼šæ›´å¤æ‚ä¸€äº›.<br>2. ä»æœ¬ç¯‡æ–‡ç« çœ‹å¥½åƒConcurrentSkipListMapçš„æ€§èƒ½æ¯”ConcurrentHashMapæ€§èƒ½è¦å¥½, é‚£ä¸ºå•¥å¹³æ—¶è¿˜æ˜¯ç”¨åè€…çš„äººæ›´å¤šå‘¢, æˆ‘æƒ³å¾ˆå®šæ˜¯åè€…ç›¸å¯¹å‰è€…ä¹Ÿæœ‰ä¸€å®šçš„ä¼˜åŠ¿å§, ä½†æˆ‘è‡ªå·±æ²¡æƒ³å‡ºæ¥, è€å¸ˆèƒ½ä¸èƒ½æŒ‡ç‚¹ä¸€ä¸‹æ˜¯å•¥ä¼˜åŠ¿.","like_count":5,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455761,"discussion_content":"1ã€ä¸¤è€…çš„å¹³å‡æŸ¥è¯¢å¤æ‚åº¦éƒ½æ˜¯O(logn)ï¼Œæ‰€ä»¥æŸ¥è¯¢æ€§èƒ½å·®ä¸å¤šã€‚è€Œåœ¨æ–°å¢å’Œåˆ é™¤æ“ä½œï¼Œçº¢é»‘æ ‘æœ‰å¹³è¡¡æ“ä½œï¼Œä½†è·³è·ƒè¡¨ä¹Ÿæœ‰å»ºç«‹ç´¢å¼•å±‚æ“ä½œã€‚è·³è·ƒè¡¨çš„ç»“æ„ç®€å•æ˜“æ‡‚ã€‚\n\n2ã€è¿™é‡Œæ˜¯åŸºäºæ•°æ®é‡æ¯”è¾ƒå¤§ï¼ˆä¾‹å¦‚åƒä¸‡çº§åˆ«ï¼‰ä¸”å†™å…¥æ“ä½œå¤šçš„æƒ…å†µä¸‹ï¼ŒConcurrentSkipListMapæ€§èƒ½è¦æ¯”ConcurrentHashMapå¥½ä¸€äº›ï¼Œå¹¶ä¸æ˜¯åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½è¦ä¼˜äºConcurrentHashMapçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561691081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1357623,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJmBKrLvqOIXDDbj3ocEIJzqsQx2e5VLDBSX6LmofYtprWwKaVAmHUqU2z3mjREHX8n9eLLiavlPg/132","nickname":"wg1993","note":"","ucode":"D5112FEFDB1DF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40300,"discussion_content":"ConcurrentHashMapåªæœ‰åœ¨æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™æ‰ä¼šå‡ºç°å¾ˆå¤šhashç¢°æ’ï¼Œåªæœ‰hashå†²çªå¾ˆå¤šæ—¶é“¾è¡¨æ‰ä¼šå¾ˆé•¿ï¼Œæ‰ä¼šéœ€è¦çº¢é»‘æ ‘ï¼Œæ‰ä¼šæœ‰çº¢é»‘æ ‘å†å¹³è¡¡é—®é¢˜ã€‚ã€‚ã€‚è€Œè·³è¡¨æ¯æ¬¡æ’å…¥ï¼Œåˆ é™¤éƒ½ä¼šæœ‰è·³è¡¨å†å¹³è¡¡ï¼Œä¹Ÿå°±æ˜¯ç´¢å¼•çš„å¢åˆ é—®é¢˜","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1572155690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1357623,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJmBKrLvqOIXDDbj3ocEIJzqsQx2e5VLDBSX6LmofYtprWwKaVAmHUqU2z3mjREHX8n9eLLiavlPg/132","nickname":"wg1993","note":"","ucode":"D5112FEFDB1DF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301114,"discussion_content":"ä½†æ˜¯å¹¶å‘é‡ä¸Šæ¥ä»¥åï¼ŒConcurrentHashMapä¼šé”ä½æ•´ä¸ªçº¢é»‘æ ‘ï¼Œè·³è¡¨é”ä½å•ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥é”ç²’åº¦æ›´å°æ€§èƒ½å°±æ›´å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598410798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":40300,"ip_address":""},"score":301114,"extra":""}]}]},{"had_liked":false,"id":108523,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1561791299,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14446693187","product_id":100028001,"comment_content":"èµæˆè®²ä¸‹é‚£å‡ ä¸ªblockingQueue","like_count":3},{"had_liked":false,"id":107654,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1561593847,"is_pvip":false,"replies":[{"id":"39197","content":"ConcurrentSkipListMapåªæ˜¯keyå€¼çš„å‡æ’åºï¼Œå¹¶æ²¡æœ‰å¯¹valueè¿›è¡Œæ’åºï¼›<br><br>CopyOnWriteåœ¨å‰¯æœ¬å†™æ—¶ï¼Œæ˜¯éœ€è¦åŠ é”çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561693029,"ip_address":"","comment_id":107654,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10151528439","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰2ä¸ªé—®é¢˜:<br><br>1 top 10 é—®é¢˜æ¶‰åŠåˆ°æ’åº, æˆ‘æ„Ÿè§‰ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—æˆ–å¸¦æ’åºåŠŸèƒ½çš„ConcurrentSkipListMapæ›´åˆé€‚ï¼ŸConcurrentHashMapä¸æ”¯æŒæ’åºå§<br><br>2 CopyOnWriteçš„listä¸ºä»€ä¹ˆè¿˜è¦åŠ é”å‘¢ï¼Œå‰¯æœ¬ä¸æ˜¯çº¿ç¨‹ç‹¬äº«çš„å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455607,"discussion_content":"ConcurrentSkipListMapåªæ˜¯keyå€¼çš„å‡æ’åºï¼Œå¹¶æ²¡æœ‰å¯¹valueè¿›è¡Œæ’åºï¼›\n\nCopyOnWriteåœ¨å‰¯æœ¬å†™æ—¶ï¼Œæ˜¯éœ€è¦åŠ é”çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561693029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151031,"user_name":"å¬é›¨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1573645188,"is_pvip":false,"replies":[{"id":"58544","content":"å¦‚æœæ˜¯ä¸€ä¸ªæ–°Nodeï¼Œé‚£ä¹ˆå°±ä¸èƒ½é©¬ä¸Šçœ‹åˆ°ï¼Œè™½ç„¶Nodeçš„æ•°ç»„tableè¢«volatileä¿®é¥°ï¼Œä½†æ˜¯è¿™æ ·åªæ˜¯ä»£è¡¨tableçš„å¼•ç”¨åœ°å€å¦‚æœè¢«ä¿®æ”¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹é©¬çœ‹åˆ°ï¼Œå¹¶ä¸ä»£è¡¨tableé‡Œçš„æ•°æ®è¢«ä¿®æ”¹ç«‹é©¬å¯ä»¥çœ‹åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1573983508,"ip_address":"","comment_id":151031,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5868612484","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„æ„æ€æ˜¯Unsafe#compareAndSetObjectå’ŒUnsafe#getObjectVolatileæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„volatileè¯­ä¹‰å¯ä»¥ä¿è¯æ•°ç»„å…ƒç´ çš„å¯è§æ€§ã€‚è¿™æ ·å³ä½¿æ–°å¢ä¸€ä¸ªnodeï¼Œè¿™ä¿©æ–¹æ³•ä¹Ÿå¯ä»¥ä¿è¯å…¶ä»–çº¿ç¨‹å¯ä»¥è¯»åˆ°ã€‚è¿˜æ˜¯è¯´æˆ‘å¯¹è¿™ä¸¤ä¸ªæ–¹æ³•æœ‰è¯¯è§£ï¼Œè¯·è€å¸ˆè§£æƒ‘ï¼","like_count":2,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474344,"discussion_content":"å¦‚æœæ˜¯ä¸€ä¸ªæ–°Nodeï¼Œé‚£ä¹ˆå°±ä¸èƒ½é©¬ä¸Šçœ‹åˆ°ï¼Œè™½ç„¶Nodeçš„æ•°ç»„tableè¢«volatileä¿®é¥°ï¼Œä½†æ˜¯è¿™æ ·åªæ˜¯ä»£è¡¨tableçš„å¼•ç”¨åœ°å€å¦‚æœè¢«ä¿®æ”¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹é©¬çœ‹åˆ°ï¼Œå¹¶ä¸ä»£è¡¨tableé‡Œçš„æ•°æ®è¢«ä¿®æ”¹ç«‹é©¬å¯ä»¥çœ‹åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573983508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1012369,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/72/91/73235447.jpg","nickname":"Steve","note":"","ucode":"C79D2A4C7B081D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293557,"discussion_content":"æˆ‘è§‰å¾—getæ“ä½œæ˜¯å¼ºä¸€è‡´æ€§çš„ï¼Œå³ä½¿æ˜¯æ–°å¢èŠ‚ç‚¹ï¼Œå› ä¸ºUnsafe#getObjectVolatileå°±æ˜¯è·å–åç§»é‡ä½ç½®ä¸Šæœ€æ–°çš„å¼•ç”¨ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªVolatileè¯»ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰ä¿®æ”¹ä¹Ÿæ˜¯èƒ½å¤Ÿè¯»å–åˆ°çš„ã€‚ä¸¾ä¸ªåä¾‹ï¼Œè‹¥getä¸æ˜¯å¼ºä¸€è‡´æ€§è¯»ï¼Œå¦‚æœgetè¯»ä¹‹å‰æœ‰ä¸€ä¸ªçº¿ç¨‹å·²ç»æ‰§è¡Œputæ“ä½œåœ¨getè¦è·å–çš„æ§½ä½åŠ äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç”±äºgetæ‰€åœ¨çº¿ç¨‹è¯»å–ä¸åˆ°æœ€æ–° æäº¤åˆ°ä¸»å†…å­˜çš„å€¼ï¼Œgetæ˜¯ä¸æ˜¯å°±ä¸€ç›´è¯»å–ä¸åˆ°æœ€æ–°å€¼ã€‚æˆ‘è¯»10æ¬¡å’Œè¯»1æ¬¡çš„ç»“æœéƒ½ä¸€æ ·ã€‚\næ‰€ä»¥æˆ‘è§‰å¾—getè¿˜æ˜¯å¼ºä¸€è‡´æ€§çš„ã€‚\nä½†concurrentHashMapä¾æ—§æ˜¯ä¸€ä¸ªå¼±ä¸€è‡´æ€§çš„å®¹å™¨ï¼Œå› ä¸ºæœ‰è¿­ä»£å™¨çš„å­˜åœ¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595580698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118206,"user_name":"Eaglet","can_delete":false,"product_type":"c1","uid":1136420,"ip_address":"","ucode":"AC20EDC1204860","user_header":"https://static001.geekbang.org/account/avatar/00/11/57/24/2d942948.jpg","comment_is_top":false,"comment_ctime":1564291064,"is_pvip":false,"replies":[{"id":"43378","content":"ä¼šæ¶‰åŠåˆ°æ’åºé—®é¢˜ï¼Œå¦‚æœæ•°æ®é‡ç‰¹åˆ«å¤§ï¼ŒCurrentHashMapå°±æ²¡æœ‰ä¼˜åŠ¿äº†ã€‚ä¸€èˆ¬é”€é‡top10æ˜¯åŸºäºè‡ªè¥å‹å•†åŸæˆ–æŸä¸€ç±»å‹çš„å•†å“æ¥åšçš„ï¼Œæ‰€ä»¥å•†å“æ•°é‡ä¸ä¼šå¤ªå¤§ï¼Œå•†å“åœ¨ä¸€æ®µæ—¶é—´å†…æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰æ•°æ®ç´¯è®¡é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1564364640,"ip_address":"","comment_id":118206,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5859258360","product_id":100028001,"comment_content":"è€å¸ˆï¼Œtop10çš„é—®é¢˜ï¼Œä½ è¯´ï¼šåœ¨æ•°æ®ä¸æ–­åœ°å†™å…¥å’Œåˆ é™¤ï¼Œä¸”ä¸å­˜åœ¨æ•°æ®é‡ç´¯ç§¯ä»¥åŠæ•°æ®æ’åºçš„åœºæ™¯ï¼Œå¯ä»¥é€‰ç”¨ CurrentHashMapã€‚å¯æ˜¯top10é—®é¢˜æœ‰æ’åºï¼Œæ•°æ®é‡ä¹Ÿåœ¨å®æ—¶çš„ç´¯ç§¯ï¼Œæ„Ÿè§‰ç”¨ CurrentHashMap ä¹Ÿä¸æ˜¯æœ€åˆé€‚å§ï¼Ÿè¿™é‡Œä¸å¤ªæ‡‚ï¼Œè¯·è€å¸ˆè§£é‡Šä¸‹æˆ‘æ˜¯å¦å¯¹ top10è¿™ä¸ªé—®é¢˜æœ¬èº«ç†è§£æœ‰é—®é¢˜ã€‚","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460301,"discussion_content":"ä¼šæ¶‰åŠåˆ°æ’åºé—®é¢˜ï¼Œå¦‚æœæ•°æ®é‡ç‰¹åˆ«å¤§ï¼ŒCurrentHashMapå°±æ²¡æœ‰ä¼˜åŠ¿äº†ã€‚ä¸€èˆ¬é”€é‡top10æ˜¯åŸºäºè‡ªè¥å‹å•†åŸæˆ–æŸä¸€ç±»å‹çš„å•†å“æ¥åšçš„ï¼Œæ‰€ä»¥å•†å“æ•°é‡ä¸ä¼šå¤ªå¤§ï¼Œå•†å“åœ¨ä¸€æ®µæ—¶é—´å†…æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰æ•°æ®ç´¯è®¡é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564364640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107715,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1561598764,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5856566060","product_id":100028001,"comment_content":"è€å¸ˆå¥½!ä¸ºå•¥æ²¡æœ‰CopyOnWriteMapå•Šï¼ŒConpOnwriteArrayListã€‚æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯O(n)å§ã€‚","like_count":1,"discussions":[{"author":{"id":1006789,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","nickname":"æ¢ä¸­å","note":"","ucode":"52FE40242CBAD0","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465,"discussion_content":"æˆ‘ä¹Ÿæ„Ÿè§‰è¿™ä¸ªä¾‹å­æœ‰ç‚¹å¥‡æ€ªï¼ŒæŸ¥æ‰¾é»‘åå•Mapç»“æ„æ›´å¿«å•Šï¼Œä¸ºå•¥ç”¨ArrayListå‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561602513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1235750,"avatar":"https://static001.geekbang.org/account/avatar/00/12/db/26/3c8d68fb.jpg","nickname":"å¤©ä½¿æ¢¦æ³ª","note":"","ucode":"782991747DD424","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1314,"discussion_content":"åº”è¯¥æ˜¯å¤åˆ¶æ—¶LISTç§»åŠ¨æ•°ç»„å†…å­˜ï¼Œæ¯”è¾ƒç®€å•ï¼ŒMapè¿˜è¦é‡æ–°è®¡ç®—hashï¼Œå†²çªç‡ä¼šå¢å¤§ï¼Œæ€§èƒ½ä¼šé™ä½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562558591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107652,"user_name":"å¼ å­¦ç£Š","can_delete":false,"product_type":"c1","uid":1250029,"ip_address":"","ucode":"F545F384A6F1E1","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotSSnZic41tGkbflx0ogIg3ia6g2muFY1hCgosL2t3icZm7I8Ax1hcv1jNgr6vrZ53dpBuGhaoc6DKg/132","comment_is_top":false,"comment_ctime":1561593632,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856560928","product_id":100028001,"comment_content":"ä¸ªäººè®¤ä¸ºæŠ¢è´­çš„æ’é˜Ÿç­‰å¾…åº”è¯¥ä½¿ç”¨ConcurrentLinkedQueueï¼Œç›¸æ¯”äºArrayBlockingQueue(ä¸€æŠŠå…¨å±€é”)å’ŒLinkedBlockingQueue(å­˜å–é‡‡ç”¨ä¸¤æŠŠé”)ï¼ŒCLQæ˜¯æ— é”çš„ï¼Œä½¿ç”¨CASæ“ä½œï¼Œä¸å­˜åœ¨é”çš„äº‰æŠ¢æ€§èƒ½æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œé€‚ç”¨äºå•ç”Ÿäº§è€…å¤šæ¶ˆè´¹è€…æƒ…å†µ","like_count":2},{"had_liked":false,"id":300792,"user_name":"å¹³æ°‘äººä¹‹åŠ©","can_delete":false,"product_type":"c1","uid":2658705,"ip_address":"","ucode":"5CCEC0BAC08AEC","user_header":"https://static001.geekbang.org/account/avatar/00/28/91/91/428a27a3.jpg","comment_is_top":false,"comment_ctime":1625388288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625388288","product_id":100028001,"comment_content":"æŠ¢è´­çš„é˜Ÿåˆ—ç”¨redisçš„ZSETï¼Œå…¶å®å°±æ˜¯åŸºäºè·³è¡¨æ’åºï¼Œredissonæä¾›äº†jucçš„æ‰€æœ‰æ”¯æŒï¼Œä¸€èˆ¬æŠ¢è´­å°±æ˜¯ç”¨ä¿¡å·ç¯æ¥å¤„ç†ã€‚","like_count":0},{"had_liked":false,"id":283016,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1096397,"ip_address":"","ucode":"14C0858C413E00","user_header":"https://static001.geekbang.org/account/avatar/00/10/ba/cd/1f91aa44.jpg","comment_is_top":false,"comment_ctime":1615519914,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615519914","product_id":100028001,"comment_content":"JDK1.8ä¸­ï¼ŒConcurrentHashMapçš„getæ–¹æ³•æ²¡æœ‰é”ï¼Œä½†æ˜¯valå’Œnextå±æ€§éƒ½æ˜¯ç”¨volatileå…³é”®å­—ä¿®é¥°çš„ï¼Œè¿™å°±ä¿è¯äº†å¯è§è¡Œï¼Œè¿™ä¸ªè¿˜æœ‰å¼±ä¸€è‡´æ€§çš„é—®é¢˜å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":238212,"user_name":"Gavin","can_delete":false,"product_type":"c1","uid":1616970,"ip_address":"","ucode":"A5735665E303FD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2UXuSevhia94o9Eky4OfMuSictaldxcqpjGuvRCOcvjIIoVBAENLEZbv2lgwmwC8icK1ZrUcneNtiaeFBV8MT3uzNg/132","comment_is_top":false,"comment_ctime":1596096331,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596096331","product_id":100028001,"comment_content":"å‡è®¾æˆ‘ä»¬ç°åœ¨è¦ç»™ä¸€ä¸ªç”µå•†ç³»ç»Ÿè®¾è®¡ä¸€ä¸ªç®€å•çš„ç»Ÿè®¡å•†å“é”€é‡ TOP 10 çš„åŠŸèƒ½ã€‚å¸¸è§„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨æ¥å­˜å‚¨å•†å“å’Œé”€é‡é”®å€¼å¯¹ï¼Œç„¶åä½¿ç”¨æ’åºè·å¾—é”€é‡å‰åçš„å•†å“ã€‚åœ¨è¿™é‡Œï¼Œå“ˆå¸Œè¡¨æ˜¯å®ç°è¯¥åŠŸèƒ½çš„å…³é”®ã€‚é‚£ä¹ˆè¯·æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœè¦ä½ è®¾è®¡è¿™ä¸ªåŠŸèƒ½ï¼Œä½ ä¼šä½¿ç”¨å“ªä¸ªå®¹å™¨å‘¢ï¼Ÿ<br><br><br>è¿™ä¸ªç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½ï¼Œä¸éœ€è¦æ’åºäº†","like_count":0},{"had_liked":false,"id":226952,"user_name":"è€¿å˜‰è‰º","can_delete":false,"product_type":"c1","uid":2023401,"ip_address":"","ucode":"727A22BD41E8AF","user_header":"","comment_is_top":false,"comment_ctime":1592234446,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592234446","product_id":100028001,"comment_content":"æ—¢ç„¶concurrenthashmapæ˜¯å¼±ä¸€è‡´æ€§ï¼Œä¿®æ”¹ç»“æœä¸ä¸€å®šèƒ½åŠæ—¶çœ‹åˆ°ï¼Œé‚£ä¸æ˜¯ä¸åº”è¯¥ç”¨äºæŸ¥è¯¢æ“ä½œå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":201258,"user_name":"will","can_delete":false,"product_type":"c1","uid":1156207,"ip_address":"","ucode":"7A7DBE3E0EEAEB","user_header":"https://static001.geekbang.org/account/avatar/00/11/a4/6f/672a27d4.jpg","comment_is_top":false,"comment_ctime":1585741057,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585741057","product_id":100028001,"comment_content":"é‡æ–°è®¤è¯†ä¸€ä¸‹è¿™äº›æ•°æ®ç»“æ„","like_count":0},{"had_liked":false,"id":196304,"user_name":"è„±ç¼°çš„é‡é©¬__","can_delete":false,"product_type":"c1","uid":1447569,"ip_address":"","ucode":"D5F993E7232C61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WtHCCMoLJ2DvzqQwPYZyj2RlN7eibTLMHDMTSO4xIKjfKR1Eh9L98AMkkZY7FmegWyGLahRQJ5ibPzeeFtfpeSow/132","comment_is_top":false,"comment_ctime":1585271258,"is_pvip":false,"replies":[{"id":"75253","content":"æ˜¯çš„ï¼Œéœ€è¦éå†ï¼Œè¿™é‡Œçš„é»‘åå•å‰ææ˜¯æ•°é‡å¾ˆå°ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ä½¿ç”¨çº¿ç¨‹å®‰å…¨mapæ›´ä½³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1585743901,"ip_address":"","comment_id":196304,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585271258","product_id":100028001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œé»‘åå•çš„æ¡ˆä¾‹ä¸ºä»€ä¹ˆä¸ç”¨çº¿ç¨‹å®‰å…¨çš„mapå•Šï¼Œè¿™æ ·ä¾¿äºæŸ¥è¯¢å§ï¼Œå¦‚æœæ€»é“¾è¡¨ï¼Œè¦æŸ¥è¯¢æŸä¸ªç”¨æˆ·æ˜¯å¦åœ¨é»‘åå•ä¸æ˜¯è¦éå†æ•´ä¸ªé“¾è¡¨å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489263,"discussion_content":"æ˜¯çš„ï¼Œéœ€è¦éå†ï¼Œè¿™é‡Œçš„é»‘åå•å‰ææ˜¯æ•°é‡å¾ˆå°ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ä½¿ç”¨çº¿ç¨‹å®‰å…¨mapæ›´ä½³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585743901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190059,"user_name":"Lambor","can_delete":false,"product_type":"c1","uid":1275494,"ip_address":"","ucode":"0E3C3C39A22495","user_header":"https://static001.geekbang.org/account/avatar/00/13/76/66/cbd6013c.jpg","comment_is_top":false,"comment_ctime":1584599427,"is_pvip":false,"replies":[{"id":"74194","content":"è¿™ä¸ªåœºæ™¯ä½¿ç”¨redisæ›´ä½³ï¼Œä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜ã€‚CopyOnWriteArrayListåŒæ ·å¯ä»¥å®ç°ï¼Œä½†å®ç°èµ·æ¥å°±æ›´ç¹çä¸€äº›ï¼Œä¾‹å¦‚ä½ è¯´çš„è¦ä¿è¯å„ä¸ªå®ä¾‹çš„æ•°æ®ä¸€è‡´æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1585139640,"ip_address":"","comment_id":190059,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584599427","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼ä¸€ç›´æœ‰ä¸ªç–‘æƒ‘ï¼Œç°åœ¨åŸºæœ¬éƒ½æ˜¯å¾®æœåŠ¡æ¶æ„ï¼ŒæœåŠ¡éƒ½æ˜¯å¤šå®ä¾‹è¿è¡Œï¼Œä¾‹å¦‚é»‘åå•é‚£ä¸ªåœºæ™¯ï¼Œæ•°æ®åº”è¯¥ä¸æ˜¯ç›´æ¥ä½¿ç”¨ CopyOnWriteArrayList ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œè¿™æ ·å¤šä¸ªå®ä¾‹çš„æ•°æ®å¯èƒ½ä¸ä¸€è‡´ï¼Œè€Œæ˜¯ç”¨ redis è¿™ç±»ä¸­é—´ä»¶ä¿å­˜èµ·æ¥ï¼ŒæœåŠ¡ä¸­æ¯æ¬¡æŸ¥è¯¢é»‘åå•æ—¶ä» redis æŸ¥è¯¢ï¼Œå†™å…¥åº”è¯¥ä¹Ÿæ˜¯å†™å…¥åˆ° redis çš„ã€‚æ‰€ä»¥è¿™ä¸ªåœºæ™¯ä½¿ç”¨ CopyOnWriteArrayList æˆ‘ä¸çŸ¥é“æ˜¯ä¸æ˜¯èƒ½æ»¡è¶³å®é™…çš„ä¸šåŠ¡éœ€æ±‚ã€‚è¿˜æœ›è§£ç­”ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487875,"discussion_content":"è¿™ä¸ªåœºæ™¯ä½¿ç”¨redisæ›´ä½³ï¼Œä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜ã€‚CopyOnWriteArrayListåŒæ ·å¯ä»¥å®ç°ï¼Œä½†å®ç°èµ·æ¥å°±æ›´ç¹çä¸€äº›ï¼Œä¾‹å¦‚ä½ è¯´çš„è¦ä¿è¯å„ä¸ªå®ä¾‹çš„æ•°æ®ä¸€è‡´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585139640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181457,"user_name":"L!en6o","can_delete":false,"product_type":"c1","uid":1054472,"ip_address":"","ucode":"E0931CB8998260","user_header":"https://static001.geekbang.org/account/avatar/00/10/17/08/566fb246.jpg","comment_is_top":false,"comment_ctime":1582543584,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582543584","product_id":100028001,"comment_content":"Concurrent*éƒ½æ˜¯å…¸å‹çš„å¹¶å‘å®¹å™¨ï¼Œä¿®æ”¹å¼€é”€è¾ƒä½ã€‚ ","like_count":0},{"had_liked":false,"id":157592,"user_name":"å¥‹æ–—çš„å°ç™½é¼ ","can_delete":false,"product_type":"c1","uid":1743483,"ip_address":"","ucode":"752BB901FFB7CE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/icHicAP9M4M4DIjAvlj5FDdFxIeA0pR3J15QdvVjXQXbznwunDN8OvrYqnsFchtBTNrZCCfGTE2RpPzIxjkvFAKg/132","comment_is_top":false,"comment_ctime":1575205822,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575205822","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹äº†æ‚¨çš„è§£é‡Šè¿˜æ˜¯ä¸æ˜ç™½ï¼Œnodeæ•°ç»„å’Œnodeæ•°ç»„é‡Œé¢çš„nodeèŠ‚ç‚¹ä»¥åŠnodeç»“ç‚¹çš„çš„valueéƒ½æ˜¯è¢«volatileä¿®é¥°ï¼Œä¸ºä»€ä¹ˆä½ è¯´æ–°å¢å°±æœªå¿…èƒ½ï¼Œèƒ½è§£é‡Šçš„è¯¦ç»†ç‚¹ä¸ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":150920,"user_name":"å¬é›¨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1573628651,"is_pvip":false,"replies":[{"id":"58089","content":"å¦‚æœæ˜¯ä¸€ä¸ªæ–°Nodeï¼Œé‚£ä¹ˆå°±ä¸èƒ½é©¬ä¸Šçœ‹åˆ°ï¼Œè™½ç„¶Nodeçš„æ•°ç»„tableè¢«volatileä¿®é¥°ï¼Œä½†æ˜¯è¿™æ ·åªæ˜¯ä»£è¡¨tableçš„å¼•ç”¨åœ°å€å¦‚æœè¢«ä¿®æ”¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹é©¬çœ‹åˆ°ï¼Œå¹¶ä¸ä»£è¡¨tableé‡Œçš„æ•°æ®è¢«ä¿®æ”¹ç«‹é©¬å¯ä»¥çœ‹åˆ°ã€‚<br><br>è¿™é‡Œè§£é‡Šçš„å¾ˆæ¸…æ¥šäº†ï¼Œå·²ç»å­˜åœ¨çš„valueæ˜¯å¯ä»¥é©¬ä¸Šçœ‹åˆ°ï¼Œä½†æ˜¯ä¸€ä¸ªæ–°å¢çš„å°±æœªå¿…èƒ½äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1573639639,"ip_address":"","comment_id":150920,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573628651","product_id":100028001,"comment_content":"concurrentHashMapæ·»åŠ å…ƒç´ ç”¨äº†Unsafe#compareAndSetObjectæ–¹æ³•ï¼Œè·å–å…ƒç´ ä½¿ç”¨Unsafe#getObjectVolatileæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸æ˜¯éƒ½æœ‰volatileè¯­ä¹‰å—ï¼ŒæŒ‰é“ç†æ¥è¯´éƒ½èƒ½è·å–åˆ°æœ€æ–°å€¼å‘€","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474311,"discussion_content":"å¦‚æœæ˜¯ä¸€ä¸ªæ–°Nodeï¼Œé‚£ä¹ˆå°±ä¸èƒ½é©¬ä¸Šçœ‹åˆ°ï¼Œè™½ç„¶Nodeçš„æ•°ç»„tableè¢«volatileä¿®é¥°ï¼Œä½†æ˜¯è¿™æ ·åªæ˜¯ä»£è¡¨tableçš„å¼•ç”¨åœ°å€å¦‚æœè¢«ä¿®æ”¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹é©¬çœ‹åˆ°ï¼Œå¹¶ä¸ä»£è¡¨tableé‡Œçš„æ•°æ®è¢«ä¿®æ”¹ç«‹é©¬å¯ä»¥çœ‹åˆ°ã€‚\n\nè¿™é‡Œè§£é‡Šçš„å¾ˆæ¸…æ¥šäº†ï¼Œå·²ç»å­˜åœ¨çš„valueæ˜¯å¯ä»¥é©¬ä¸Šçœ‹åˆ°ï¼Œä½†æ˜¯ä¸€ä¸ªæ–°å¢çš„å°±æœªå¿…èƒ½äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573639639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150515,"user_name":"å¬é›¨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1573548736,"is_pvip":false,"replies":[{"id":"57987","content":"ConcurrentHashMapæ˜¯volatileå…³é”®å­—ä¿è¯äº†å¯è§æ€§ã€‚<br><br>æˆ‘ä»¬çŸ¥é“Node&lt;k,v&gt;ä»¥åŠNode&lt;k,v&gt;çš„valueæ˜¯volatileä¿®é¥°çš„ï¼Œæ‰€ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹å¯¹å…¶è¿›è¡Œä¿®æ”¹åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥é©¬ä¸Šçœ‹åˆ°ã€‚<br>å¦‚æœæ˜¯ä¸€ä¸ªæ–°Nodeï¼Œé‚£ä¹ˆå°±ä¸èƒ½é©¬ä¸Šçœ‹åˆ°ï¼Œè™½ç„¶Nodeçš„æ•°ç»„tableè¢«volatileä¿®é¥°ï¼Œä½†æ˜¯è¿™æ ·åªæ˜¯ä»£è¡¨tableçš„å¼•ç”¨åœ°å€å¦‚æœè¢«ä¿®æ”¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹é©¬çœ‹åˆ°ï¼Œå¹¶ä¸ä»£è¡¨tableé‡Œçš„æ•°æ®è¢«ä¿®æ”¹ç«‹é©¬å¯ä»¥çœ‹åˆ°ã€‚â€”â€” ã€ŠåŠ é¤ | ä»€ä¹ˆæ˜¯æ•°æ®çš„å¼ºã€å¼±ä¸€è‡´æ€§ï¼Ÿã€‹","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1573612913,"ip_address":"","comment_id":150515,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573548736","product_id":100028001,"comment_content":"è€å¸ˆï¼Œ1.7ConcurrentHashMapå¼±ä¸€è‡´æ€§æˆ‘ç†è§£ï¼Œä½†æ˜¯1.8ä¸ºä»€ä¹ˆå‘€ï¼Œ1.8ä½¿ç”¨CASå¯ä»¥ä¿è¯å¯è§æ€§å§","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474186,"discussion_content":"ConcurrentHashMapæ˜¯volatileå…³é”®å­—ä¿è¯äº†å¯è§æ€§ã€‚\n\næˆ‘ä»¬çŸ¥é“Node&amp;lt;k,v&amp;gt;ä»¥åŠNode&amp;lt;k,v&amp;gt;çš„valueæ˜¯volatileä¿®é¥°çš„ï¼Œæ‰€ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹å¯¹å…¶è¿›è¡Œä¿®æ”¹åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥é©¬ä¸Šçœ‹åˆ°ã€‚\nå¦‚æœæ˜¯ä¸€ä¸ªæ–°Nodeï¼Œé‚£ä¹ˆå°±ä¸èƒ½é©¬ä¸Šçœ‹åˆ°ï¼Œè™½ç„¶Nodeçš„æ•°ç»„tableè¢«volatileä¿®é¥°ï¼Œä½†æ˜¯è¿™æ ·åªæ˜¯ä»£è¡¨tableçš„å¼•ç”¨åœ°å€å¦‚æœè¢«ä¿®æ”¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹é©¬çœ‹åˆ°ï¼Œå¹¶ä¸ä»£è¡¨tableé‡Œçš„æ•°æ®è¢«ä¿®æ”¹ç«‹é©¬å¯ä»¥çœ‹åˆ°ã€‚â€”â€” ã€ŠåŠ é¤ | ä»€ä¹ˆæ˜¯æ•°æ®çš„å¼ºã€å¼±ä¸€è‡´æ€§ï¼Ÿã€‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573612913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135388,"user_name":"èœèœ","can_delete":false,"product_type":"c1","uid":1393550,"ip_address":"","ucode":"2CEBA98DA63362","user_header":"https://static001.geekbang.org/account/avatar/00/15/43/8e/2c1ce77b.jpg","comment_is_top":false,"comment_ctime":1569144078,"is_pvip":false,"replies":[{"id":"52258","content":"åœ¨ç•™è¨€ä¸­å·²ç»è§£é‡Šè¿‡äº†ï¼Œå†ç¿»ä¸€ç¿»","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1569415471,"ip_address":"","comment_id":135388,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569144078","product_id":100028001,"comment_content":"concurrentHashMapä¸­çš„valueä¸æ˜¯åŠ äº†volatileä¿®é¥°å—? ä¸ºä»€ä¹ˆè¿˜å­˜åœ¨æ•°æ®å¼±ä¸€è‡´æ€§æ‹¿ä¸åˆ°æœ€æ–°å€¼çš„æƒ…å†µï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468169,"discussion_content":"åœ¨ç•™è¨€ä¸­å·²ç»è§£é‡Šè¿‡äº†ï¼Œå†ç¿»ä¸€ç¿»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569415471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127381,"user_name":"å°ç¬¨è›‹","can_delete":false,"product_type":"c1","uid":1118331,"ip_address":"","ucode":"7065FB157C4B70","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/7b/eed9d6d6.jpg","comment_is_top":false,"comment_ctime":1566684525,"is_pvip":true,"replies":[{"id":"50380","content":"æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå†å¥½çš„hashåˆ†æ•£ï¼Œé“¾è¡¨çš„é•¿åº¦ä¹Ÿä¼šéšç€æ•°æ®é‡çš„å¢åŠ è€Œå˜é•¿","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1567944340,"ip_address":"","comment_id":127381,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566684525","product_id":100028001,"comment_content":"æˆ‘æœ‰ä¸ªç–‘é—®ï¼Œä½ æœ‰æåˆ°ConcurrntHashMapé‡Œé¢æ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ä¼šæœ‰å¾ˆå¤šçš„çº¢é»‘æ ‘çš„è½¬åŒ–æ“ä½œï¼Œä½†æ˜¯æ®æˆ‘äº†è§£Javaé‡Œé¢çš„Hashç®—æ³•æ˜¯é‡‡ç”¨çš„åˆ†æ•£å¾ˆå¥½çš„Time33ç®—æ³•ï¼Œè¿™ä»½hashè¿˜æ˜¯å¾ˆå‡åŒ€çš„ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°å¤§é‡çš„çº¢é»‘æ ‘çš„è½¬åŒ–å·¥ä½œã€‚èƒ½éº»çƒ¦è€å¸ˆè§£ç­”ä¸€ä¸‹å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464465,"discussion_content":"æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå†å¥½çš„hashåˆ†æ•£ï¼Œé“¾è¡¨çš„é•¿åº¦ä¹Ÿä¼šéšç€æ•°æ®é‡çš„å¢åŠ è€Œå˜é•¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567944340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124591,"user_name":"è€æ¨åœ¨åŠªåŠ›","can_delete":false,"product_type":"c1","uid":1614410,"ip_address":"","ucode":"AA541B3BAD53A7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLM5CXZWgJuUXXbia0Gs8Th9wiacxAmibNd1qEMu1xkvUz7GEiaVUQMUfYF8SErPtrHWGuNwoSFrPgAdQ/132","comment_is_top":false,"comment_ctime":1565925662,"is_pvip":false,"replies":[{"id":"50705","content":"Disruptoræ˜¯ä¸€ä¸ªé«˜æ€§èƒ½é˜Ÿåˆ—","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1568168050,"ip_address":"","comment_id":124591,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565925662","product_id":100028001,"comment_content":"ä¸ªäººæ„Ÿè§‰å¯ä»¥ä½¿ç”¨LinkedTransferQueueæˆ–è€…Disruptoræ¥å®ç°éƒ½å¯ä»¥ï¼Œä½†æ˜¯æ›´å€¾å‘äºåè€…ï¼Œè€å¸ˆè®¤ä¸ºå“ªä¸ªæ›´å¥½ï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463237,"discussion_content":"Disruptoræ˜¯ä¸€ä¸ªé«˜æ€§èƒ½é˜Ÿåˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568168050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124111,"user_name":"åšå¼ˆ","can_delete":false,"product_type":"c1","uid":1433344,"ip_address":"","ucode":"B1A69837E41972","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/EcYNib1bnDf5dz6JcrE8AoyZYMdqic2VNmbBtCcVZTO9EoDZZxqlQDEqQKo6klCCmklOtN9m0dTd2AOXqSneJYLw/132","comment_is_top":false,"comment_ctime":1565827617,"is_pvip":false,"replies":[{"id":"45554","content":"åœ¨ç­”ç–‘è¯¾å ‚å·²ç»åšäº†è¡¥å……","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565831766,"ip_address":"","comment_id":124111,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565827617","product_id":100028001,"comment_content":"è€å¸ˆï¼Œå¯ä»¥æŠŠå‡ ä¸ªQUENEè®²ä¸€è®²","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463016,"discussion_content":"åœ¨ç­”ç–‘è¯¾å ‚å·²ç»åšäº†è¡¥å……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565831766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117877,"user_name":"é¢‰","can_delete":false,"product_type":"c1","uid":1147843,"ip_address":"","ucode":"2DCF7391851427","user_header":"https://static001.geekbang.org/account/avatar/00/11/83/c3/7bca8cbf.jpg","comment_is_top":false,"comment_ctime":1564159829,"is_pvip":false,"replies":[{"id":"44480","content":"è¿™ä¸ªæ²¡æœ‰å¼ºè°ƒè¿ç»­æ€§ï¼Œåªæ˜¯é™ˆè¿°ä¸æ˜¯ä¸€ä¸ªå¤§å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•´æ•°ç±»å‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1565055516,"ip_address":"","comment_id":117877,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564159829","product_id":100028001,"comment_content":"å…¶æ¬¡ç”¨æˆ· ID æ˜¯æ•´æ•°ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨ã€‚----è€å¸ˆ è¿™ä¸ªå¼¯æ²¡è½¬è¿‡æ¥ è¯·æ•™ä¸‹ ä¸ºä»€ä¹ˆidæ˜¯æ•´æ•°ç±»å‹ å°±è¦ç”¨æ•°ç»„ï¼Ÿç”¨æˆ·idå¯èƒ½æ˜¯æåº¦åˆ†æ•£çš„â€¦","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460155,"discussion_content":"è¿™ä¸ªæ²¡æœ‰å¼ºè°ƒè¿ç»­æ€§ï¼Œåªæ˜¯é™ˆè¿°ä¸æ˜¯ä¸€ä¸ªå¤§å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•´æ•°ç±»å‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565055516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114809,"user_name":"è¡Œè€…","can_delete":false,"product_type":"c1","uid":1063734,"ip_address":"","ucode":"EA31201A7C5AE1","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/36/2d61e080.jpg","comment_is_top":false,"comment_ctime":1563410979,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563410979","product_id":100028001,"comment_content":"redisä¸­mapçš„å®ç°å°±æ˜¯é€šè¿‡è·³è¡¨æ¥åšçš„ï¼Œç®€å•é«˜æ•ˆã€‚","like_count":1},{"had_liked":false,"id":114525,"user_name":"Johnny","can_delete":false,"product_type":"c1","uid":1125191,"ip_address":"","ucode":"180AAF61AD0BCA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIBpUsdg3ytlZrm9y64c5cq58iaqoh8kfp4rfYFqZQF8vdJ8mSCNSgbBgp1CHNrTHiaL5ibFEXZoqRoQ/132","comment_is_top":false,"comment_ctime":1563329256,"is_pvip":false,"replies":[{"id":"42040","content":"æˆ‘å·²ç»åœ¨è¯„è®ºä¸­å›å¤ç›¸å…³é—®é¢˜äº†ï¼Œéº»çƒ¦æŸ¥ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1563493502,"ip_address":"","comment_id":114525,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563329256","product_id":100028001,"comment_content":"è¿˜æ˜¯ä¸æ˜ç™½ï¼Œconcurrenthashmapçš„æ•°ç»„ä¸æ˜¯æœ‰volatileå±æ€§å—ï¼Œå°±ç®—æ²¡æœ‰é”å˜æ›´äº†å¯ä»¥ä¿è¯å…¶ä»–çº¿ç¨‹å¯è§å‘€ã€‚happenbeforeè§„åˆ™ä¹Ÿæ˜¯æœ‰è¿™ä¸ªçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458703,"discussion_content":"æˆ‘å·²ç»åœ¨è¯„è®ºä¸­å›å¤ç›¸å…³é—®é¢˜äº†ï¼Œéº»çƒ¦æŸ¥ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563493502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111384,"user_name":"Chaos","can_delete":false,"product_type":"c1","uid":1580479,"ip_address":"","ucode":"34704023199A43","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqw0R25Bt0iahFo3tfriat5ic3rto3u1qLdRlMI0ibGLwGR8MqiaU04N7VKsW8icpGLibo1ic0ebojUc5fNRA/132","comment_is_top":false,"comment_ctime":1562549692,"is_pvip":false,"replies":[{"id":"40615","content":"è¯·é—®ChaosåŒå­¦è¯´çš„æ˜¯ç”¨redisåˆ†å¸ƒå¼é”å®ç°æŠ¢è´­é˜Ÿåˆ—å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1562574955,"ip_address":"","comment_id":111384,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562549692","product_id":100028001,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œå¦‚æœè¿™ä¸ªä¸šåŠ¡ç”¨åˆ†å¸ƒå¼é”ï¼Œåˆ†å¸ƒå¼é”æ˜¯æ ¹æ®ä¸šåŠ¡æ¥å†³å®šé”å®šæ—¶é—´ï¼Œä½†æ˜¯å¦‚æœä¸šåŠ¡æ²¡æœ‰æ‰§è¡Œå®Œï¼Œä½†æ˜¯redisé‡Šæ”¾äº†é”ï¼Œè¿™æ—¶åº”è¯¥æ€ä¹ˆåŠå•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457328,"discussion_content":"è¯·é—®ChaosåŒå­¦è¯´çš„æ˜¯ç”¨redisåˆ†å¸ƒå¼é”å®ç°æŠ¢è´­é˜Ÿåˆ—å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562574955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108773,"user_name":"æ","can_delete":false,"product_type":"c1","uid":1396623,"ip_address":"","ucode":"426288EBB410C2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIfQFSpQJNKeqW5Q9PfciaLyDDFm9heqW5SHQCzlrajXO8f38RCH3BE5k8QHGPMictbbAM9IGvicj5EQ/132","comment_is_top":false,"comment_ctime":1561878801,"is_pvip":false,"replies":[{"id":"39616","content":"ä¸€èˆ¬åˆ†å¸ƒå¼çš„ç¼“å­˜ï¼Œæˆ‘ä»¬éƒ½æ˜¯åŸºäºrediså®ç°å­˜å‚¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1562033162,"ip_address":"","comment_id":108773,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1561878801","product_id":100028001,"comment_content":"åœ¨ç›®å‰çº¿ä¸Šæœºå™¨éƒ½æ˜¯å¤šå°éƒ¨ç½²çš„ï¼Œæƒ³é—®ä¸‹è€å¸ˆï¼Œå¦‚ä¸Šçš„æ•°æ®ç»“æ„å¦‚ä½•é€‰æ‹©ï¼Œæˆ–è€…ç”¨ä¸åˆ°å¦‚ä¸Šçš„é€‰æ‹©ï¼Œéƒ½å½©ç‰ç¬¬3æ–¹å­˜å‚¨ï¼Œæ¯”å¦‚rediså®ç°","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456109,"discussion_content":"ä¸€èˆ¬åˆ†å¸ƒå¼çš„ç¼“å­˜ï¼Œæˆ‘ä»¬éƒ½æ˜¯åŸºäºrediså®ç°å­˜å‚¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562033162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1138821,"avatar":"https://static001.geekbang.org/account/avatar/00/11/60/85/f72f1d94.jpg","nickname":"ä¸è·¯åŒé£","note":"","ucode":"2985F1440A1962","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308321,"discussion_content":"å¦‚æœæ˜¯å¤šæœºéƒ¨ç½²ï¼Œé‚£å²‚ä¸æ˜¯ä¸Šé¢çš„æ•°æ®æ¥å£éƒ½ç”¨ä¸ä¸Šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600915982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108090,"user_name":"nightmare","can_delete":false,"product_type":"c1","uid":1056314,"ip_address":"","ucode":"EF2E51C2122A86","user_header":"https://static001.geekbang.org/account/avatar/00/10/1e/3a/5b21c01c.jpg","comment_is_top":false,"comment_ctime":1561681328,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561681328","product_id":100028001,"comment_content":"æŠ¢è´­é˜Ÿåˆ—æˆ‘è§‰å¾—å†™å¤§äºè¯»ï¼Œé“¾è¡¨æ¯”è¾ƒåˆé€‚ï¼Œä½†æ˜¯æŠ¢è´­æ•°æ®ç¡®å®šï¼Œå¯ä»¥ç”¨linkedBlockQueueè®¾ç½®é•¿åº¦ä¸ºæŠ¢è´­æ•°æ®ï¼Œå°±ç®—åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œä¸ºéä¹Ÿå°±æ˜¯æŠ¢è´­æ•°é‡ä¹˜ä»¥æœºå™¨æ•°æ®ï¼ŒConcurentLinkedDequeæ— ç•Œé˜Ÿåˆ—ä¸åˆé€‚","like_count":0},{"had_liked":false,"id":108070,"user_name":"å·¦ç³","can_delete":false,"product_type":"c1","uid":1206589,"ip_address":"","ucode":"B262A3E99C8605","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/3d/3cfb9b87.jpg","comment_is_top":false,"comment_ctime":1561679192,"is_pvip":false,"replies":[{"id":"39151","content":"å¦‚æœæ˜¯å•çº¿ç¨‹å†™å…¥ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨HashSetã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561684321,"ip_address":"","comment_id":108070,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561679192","product_id":100028001,"comment_content":"é»‘åå•æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨ä¸æ˜¯åº”è¯¥ç”¨HashSetå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455811,"discussion_content":"å¦‚æœæ˜¯å•çº¿ç¨‹å†™å…¥ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨HashSetã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561684321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108038,"user_name":"....","can_delete":false,"product_type":"c1","uid":1104022,"ip_address":"","ucode":"C9F7F89CD00B13","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/96/60e0d8fe.jpg","comment_is_top":false,"comment_ctime":1561651599,"is_pvip":false,"replies":[{"id":"39347","content":"åœ¨æ–°å¢æ—¶ï¼Œæ˜¯é€šè¿‡éšæœºç®—å‡ºlevelå€¼ï¼Œæ ¹æ®levelæ–°å»ºå‚ç›´ç´¢å¼•é“¾ã€‚<br><br>&#47;&#47;è·å–ä¸€ä¸ªçº¿ç¨‹æ— å…³çš„éšæœºæ•°ï¼Œå å››ä¸ªå­—èŠ‚ï¼Œ32 ä¸ªæ¯”ç‰¹ä½<br>int rnd = ThreadLocalRandom.nextSecondarySeed();<br>    &#47;&#47;å’Œ 1000 0000 0000 0000 0000 0000 0000 0001 ä¸<br>    &#47;&#47;å¦‚æœç­‰äº 0ï¼Œè¯´æ˜è¿™ä¸ªéšæœºæ•°æœ€é«˜ä½å’Œæœ€ä½ä½éƒ½ä¸º 0ï¼Œè¿™ç§æ¦‚ç‡å¾ˆå¤§<br>    &#47;&#47;å¦‚æœä¸ç­‰äº 0ï¼Œé‚£ä¹ˆå°†ä»…ä»…æŠŠæ–°èŠ‚ç‚¹æ’å…¥åˆ°æœ€åº•å±‚çš„é“¾è¡¨ä¸­å³å¯ï¼Œä¸ä¼šå¾€ä¸Šå±‚é€’å½’<br>    if ((rnd &amp; 0x80000001) == 0) { <br>        int level = 1, max;<br>        &#47;&#47;ç”¨ä½ä½è¿ç»­ä¸º 1 çš„ä¸ªæ•°ä½œä¸º level çš„å€¼ï¼Œä¹Ÿæ˜¯ä¸€ç§æ¦‚ç‡ç­–ç•¥<br>        while (((rnd &gt;&gt;&gt;= 1) &amp; 1) != 0)<br>            ++level;<br>        Index&lt;K,V&gt; idx = null;<br>        HeadIndex&lt;K,V&gt; h = head;<br>        &#47;&#47;å¦‚æœæ¦‚ç‡ç®—å¾—çš„ level åœ¨å½“å‰è·³è¡¨ level èŒƒå›´å†…<br>        &#47;&#47;æ„å»ºä¸€ä¸ªä» 1 åˆ° level çš„çºµåˆ— index ç»“ç‚¹å¼•ç”¨<br>        if (level &lt;= (max = h.level)) {<br>            for (int i = 1; i &lt;= level; ++i)<br>                idx = new Index&lt;K,V&gt;(z, idx, null);<br>        }<br>        &#47;&#47;å¦åˆ™éœ€è¦æ–°å¢ä¸€ä¸ª level å±‚<br>        else { <br>            level = max + 1; <br>            @SuppressWarnings(&quot;unchecked&quot;)<br>            Index&lt;K,V&gt;[] idxs =(Index&lt;K,V&gt;[])new Index&lt;?,?&gt;[level+1];<br>            for (int i = 1; i &lt;= level; ++i)<br>                idxs[i] = idx = new Index&lt;K,V&gt;(z, idx, null);<br>            for (;;) {<br>                h = head;<br>                int oldLevel = h.level;<br>                &#47;&#47;level è‚¯å®šæ˜¯æ¯” oldLevel å¤§ä¸€çš„ï¼Œå¦‚æœå°äº†è¯´æ˜å…¶ä»–çº¿ç¨‹æ›´æ–°è¿‡è¡¨äº†<br>                if (level &lt;= oldLevel) <br>                    break;<br>                HeadIndex&lt;K,V&gt; newh = h;<br>                Node&lt;K,V&gt; oldbase = h.node;<br>                &#47;&#47;æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¾ªç¯åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœç”±äºå…¶ä»–çº¿ç¨‹çš„å¹¶å‘æ“ä½œå¯¼è‡´ oldLevel çš„å€¼ä¸ç¨³å®šï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œå¤šæ¬¡å¾ªç¯ä½“<br>                for (int j = oldLevel+1; j &lt;= level; ++j)<br>                    newh = new HeadIndex&lt;K,V&gt;(oldbase, newh, idxs[j], j);<br>                &#47;&#47;æ›´æ–°å¤´æŒ‡é’ˆ<br>                if (casHead(h, newh)) {<br>                    h = newh;<br>                    idx = idxs[level = oldLevel];<br>                    break;<br>                }<br>            }<br>        }<br><br>åœ¨åˆ é™¤æ—¶ï¼Œä¼šå…ˆåˆ é™¤åº•å±‚çš„èŠ‚ç‚¹ï¼Œæœ€åé€šè¿‡æ‰«æç´¢å¼•å±‚æ˜¯å¦å¤±å»äº†åº•å±‚èŠ‚ç‚¹æ¥å›æ”¶æ‰ç´¢å¼•å±‚ã€‚<br><br>&#47;&#47;åˆ¤æ–­æ­¤æ¬¡åˆ é™¤åæ˜¯å¦å¯¼è‡´æŸä¸€ç´¢å¼•å±‚æ²¡æœ‰å…¶ä»–èŠ‚ç‚¹äº†ï¼Œå¹¶åˆ é™¤è¯¥å±‚ç´¢å¼•  <br>if (head.right == null)<br>      ryReduceLevel();<br><br>å»ºè®®å…·ä½“çš„å¯ä»¥æ·±å…¥åˆ°æºç ä¸­æŸ¥çœ‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561862121,"ip_address":"","comment_id":108038,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561651599","product_id":100028001,"comment_content":"å…ƒç´ å¢å‡å¯¹æ¯å±‚é“¾è¡¨çš„å˜åŒ–æ˜¯æ€ä¹ˆæ ·çš„","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455799,"discussion_content":"åœ¨æ–°å¢æ—¶ï¼Œæ˜¯é€šè¿‡éšæœºç®—å‡ºlevelå€¼ï¼Œæ ¹æ®levelæ–°å»ºå‚ç›´ç´¢å¼•é“¾ã€‚\n\n//è·å–ä¸€ä¸ªçº¿ç¨‹æ— å…³çš„éšæœºæ•°ï¼Œå å››ä¸ªå­—èŠ‚ï¼Œ32 ä¸ªæ¯”ç‰¹ä½\nint rnd = ThreadLocalRandom.nextSecondarySeed();\n    //å’Œ 1000 0000 0000 0000 0000 0000 0000 0001 ä¸\n    //å¦‚æœç­‰äº 0ï¼Œè¯´æ˜è¿™ä¸ªéšæœºæ•°æœ€é«˜ä½å’Œæœ€ä½ä½éƒ½ä¸º 0ï¼Œè¿™ç§æ¦‚ç‡å¾ˆå¤§\n    //å¦‚æœä¸ç­‰äº 0ï¼Œé‚£ä¹ˆå°†ä»…ä»…æŠŠæ–°èŠ‚ç‚¹æ’å…¥åˆ°æœ€åº•å±‚çš„é“¾è¡¨ä¸­å³å¯ï¼Œä¸ä¼šå¾€ä¸Šå±‚é€’å½’\n    if ((rnd &amp;amp; 0x80000001) == 0) { \n        int level = 1, max;\n        //ç”¨ä½ä½è¿ç»­ä¸º 1 çš„ä¸ªæ•°ä½œä¸º level çš„å€¼ï¼Œä¹Ÿæ˜¯ä¸€ç§æ¦‚ç‡ç­–ç•¥\n        while (((rnd &amp;gt;&amp;gt;&amp;gt;= 1) &amp;amp; 1) != 0)\n            ++level;\n        Index&amp;lt;K,V&amp;gt; idx = null;\n        HeadIndex&amp;lt;K,V&amp;gt; h = head;\n        //å¦‚æœæ¦‚ç‡ç®—å¾—çš„ level åœ¨å½“å‰è·³è¡¨ level èŒƒå›´å†…\n        //æ„å»ºä¸€ä¸ªä» 1 åˆ° level çš„çºµåˆ— index ç»“ç‚¹å¼•ç”¨\n        if (level &amp;lt;= (max = h.level)) {\n            for (int i = 1; i &amp;lt;= level; ++i)\n                idx = new Index&amp;lt;K,V&amp;gt;(z, idx, null);\n        }\n        //å¦åˆ™éœ€è¦æ–°å¢ä¸€ä¸ª level å±‚\n        else { \n            level = max + 1; \n            @SuppressWarnings(&amp;quot;unchecked&amp;quot;)\n            Index&amp;lt;K,V&amp;gt;[] idxs =(Index&amp;lt;K,V&amp;gt;[])new Index&amp;lt;?,?&amp;gt;[level+1];\n            for (int i = 1; i &amp;lt;= level; ++i)\n                idxs[i] = idx = new Index&amp;lt;K,V&amp;gt;(z, idx, null);\n            for (;;) {\n                h = head;\n                int oldLevel = h.level;\n                //level è‚¯å®šæ˜¯æ¯” oldLevel å¤§ä¸€çš„ï¼Œå¦‚æœå°äº†è¯´æ˜å…¶ä»–çº¿ç¨‹æ›´æ–°è¿‡è¡¨äº†\n                if (level &amp;lt;= oldLevel) \n                    break;\n                HeadIndex&amp;lt;K,V&amp;gt; newh = h;\n                Node&amp;lt;K,V&amp;gt; oldbase = h.node;\n                //æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¾ªç¯åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœç”±äºå…¶ä»–çº¿ç¨‹çš„å¹¶å‘æ“ä½œå¯¼è‡´ oldLevel çš„å€¼ä¸ç¨³å®šï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œå¤šæ¬¡å¾ªç¯ä½“\n                for (int j = oldLevel+1; j &amp;lt;= level; ++j)\n                    newh = new HeadIndex&amp;lt;K,V&amp;gt;(oldbase, newh, idxs[j], j);\n                //æ›´æ–°å¤´æŒ‡é’ˆ\n                if (casHead(h, newh)) {\n                    h = ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561862121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108019,"user_name":"æˆ‘å·²ç»è®¾ç½®äº†æ˜µç§°","can_delete":false,"product_type":"c1","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1561648183,"is_pvip":false,"replies":[{"id":"39195","content":"æˆ‘ä»¬å…ˆæ¥ç†è§£ä¸‹happens-beforeè§„åˆ™ä¸­ï¼Œå¯¹é”çš„è§„åˆ™ï¼š<br>ä¸€ä¸ªunLockæ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œï¼›<br><br>ä¹Ÿå°±æ˜¯è¯´ï¼ŒConcurrentHashMapä¸­çš„getå¦‚æœæœ‰é”æ“ä½œï¼Œåœ¨putæ“ä½œä¹‹åï¼Œgetæ“ä½œæ˜¯ä¸€å®šèƒ½æ‹¿åˆ°putåçš„æ•°æ®ï¼›è€Œå®é™…ä¸Šgetæ“ä½œæ—¶æ²¡æœ‰é”çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹é¢è¿™ç§æƒ…å†µï¼š<br>void func(){<br>map.put(key1,value1);<br>map.get(key1);<br>.<br>.<br>&#47;&#47;use key1 value to do something<br>}<br>æ­¤æ—¶ï¼Œgetè·å–å€¼çš„å¯èƒ½ä¸æ˜¯putä¿®æ”¹çš„å€¼ï¼Œè€Œæ­¤æ—¶getæ²¡æœ‰è·å–åˆ°çœŸæ­£è¦è·å–çš„å€¼ï¼Œæ­¤æ—¶å°±æ˜¯å¼±ä¸€è‡´äº†ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561692457,"ip_address":"","comment_id":108019,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1561648183","product_id":100028001,"comment_content":"æˆ‘ä¹Ÿæ²¡å¤ªæ˜ç™½ä»€ä¹ˆå«å¼±ä¸€è‡´æ€§","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455791,"discussion_content":"æˆ‘ä»¬å…ˆæ¥ç†è§£ä¸‹happens-beforeè§„åˆ™ä¸­ï¼Œå¯¹é”çš„è§„åˆ™ï¼š\nä¸€ä¸ªunLockæ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œï¼›\n\nä¹Ÿå°±æ˜¯è¯´ï¼ŒConcurrentHashMapä¸­çš„getå¦‚æœæœ‰é”æ“ä½œï¼Œåœ¨putæ“ä½œä¹‹åï¼Œgetæ“ä½œæ˜¯ä¸€å®šèƒ½æ‹¿åˆ°putåçš„æ•°æ®ï¼›è€Œå®é™…ä¸Šgetæ“ä½œæ—¶æ²¡æœ‰é”çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹é¢è¿™ç§æƒ…å†µï¼š\nvoid func(){\nmap.put(key1,value1);\nmap.get(key1);\n.\n.\n//use key1 value to do something\n}\næ­¤æ—¶ï¼Œgetè·å–å€¼çš„å¯èƒ½ä¸æ˜¯putä¿®æ”¹çš„å€¼ï¼Œè€Œæ­¤æ—¶getæ²¡æœ‰è·å–åˆ°çœŸæ­£è¦è·å–çš„å€¼ï¼Œæ­¤æ—¶å°±æ˜¯å¼±ä¸€è‡´äº†ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561692457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1441546,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ff/0a/12faa44e.jpg","nickname":"æ™“æ°","note":"","ucode":"1174C88EEBF8A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544,"discussion_content":"æ ¹æ®happenbeforeçš„åŸåˆ™ï¼Œsynchronizeè¡¨ç¤ºä¸€ä¸ªé”çš„è§£é”å¯¹åç»­å¯¹è¿™ä¸ªé”çš„åŠ é”æ˜¯å¯è§çš„ï¼Œå› æ­¤ï¼Œé€šè¿‡ç”¨synchronizeä¿®é¥°çš„putæ–¹æ³•ä¿®æ”¹æˆ–è€…æ–°å¢å…ƒç´ ï¼Œå› ä¸ºgetæ–¹æ³•æ²¡æœ‰ç”¨synchronizeä¿®é¥°ï¼Œæ‰€ä»¥çœ‹ä¸åˆ°putæ–¹æ³•å¯¹å…ƒç´ çš„ä¿®æ”¹ï¼Œæ‰€ä»¥å®ƒæ˜¯å¼±ä¸€è‡´æ€§çš„ã€‚\nè¯·é—®è€å¸ˆï¼Œæˆ‘è¿™æ ·çš„è§£é‡Šæ­£ç¡®å—@åˆ˜è¶…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561686496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1117597,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0d/9d/58d09086.jpg","nickname":"è¾¾è¾¾é˜Ÿé•¿","note":"","ucode":"1C3F2E4F6B7637","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1441546,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ff/0a/12faa44e.jpg","nickname":"æ™“æ°","note":"","ucode":"1174C88EEBF8A6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220624,"discussion_content":"ç‰µæ‰¯åˆ°é‡æ’åºäº†ï¼Œgetåœ¨putä¹‹å‰æ‰§è¡Œäº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585908310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":544,"ip_address":""},"score":220624,"extra":""}]}]},{"had_liked":false,"id":107985,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1561643927,"is_pvip":false,"replies":[{"id":"39152","content":"æˆ‘ä»¬åé¢è¯´äº†ï¼Œåœ¨è·å–æ’åæ—¶ï¼Œéœ€è¦å¯¹concurrentHashMapè¿›è¡Œæ’åºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561684453,"ip_address":"","comment_id":107985,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561643927","product_id":100028001,"comment_content":"æˆ‘æƒ³é—®ä¸‹è€å¸ˆï¼ŒconcurrentHashMapæ˜¯æ— åºçš„ï¼Œæˆ‘ä¸å¤ªæ˜ç™½æ˜¯å¦‚ä½•å®ŒæˆTop10è¿™ä¸ªéœ€æ±‚çš„ï¼Œéº»çƒ¦è§£ç­”","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455774,"discussion_content":"æˆ‘ä»¬åé¢è¯´äº†ï¼Œåœ¨è·å–æ’åæ—¶ï¼Œéœ€è¦å¯¹concurrentHashMapè¿›è¡Œæ’åºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561684453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107752,"user_name":"æ¢ä¸­å","can_delete":false,"product_type":"c1","uid":1006789,"ip_address":"","ucode":"52FE40242CBAD0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","comment_is_top":false,"comment_ctime":1561603431,"is_pvip":true,"replies":[{"id":"39209","content":"ConcurrentSkipListMapçš„keyå€¼æ˜¯ä¸€ä¸ªå‡åºï¼Œè€ŒConcurrentHashmapçš„é»˜è®¤æ²¡æœ‰æ’åºã€‚åœ¨æŸ¥è¯¢é€Ÿç‡æ¥è¯´ï¼Œä¸¤è€…åŒºåˆ«ä¸å¤§ï¼ŒåŒºåˆ«åœ¨äºå­˜å‚¨å¤§é‡æ•°æ®æƒ…å†µä¸‹çš„å†™æ“ä½œæ€§èƒ½ä¸ä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561694474,"ip_address":"","comment_id":107752,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1561603431","product_id":100028001,"comment_content":"ConcurrentHashmapå’ŒConcurrentSkipListMapåœ¨åŠŸèƒ½ä¸Šçš„ä¸»è¦åŒºåˆ«æ˜¯å‰è€…ä¸æ’åºï¼Œåè€…è‡ªåŠ¨æ’åºã€‚å¹¶éæ•°æ®é‡ä¸Šçš„åŒºåˆ«å§ã€‚æ§åˆ¶å¥½ConcurrentHashmapé‡Œå…ƒç´ keyçš„hashcodeå€¼ï¼Œå°½é‡å‡å°‘ç¢°æ’ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹å¯èƒ½æ¯”ConcurrentSkipListMapçš„æ•ˆç‡æ›´å¥½ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455655,"discussion_content":"ConcurrentSkipListMapçš„keyå€¼æ˜¯ä¸€ä¸ªå‡åºï¼Œè€ŒConcurrentHashmapçš„é»˜è®¤æ²¡æœ‰æ’åºã€‚åœ¨æŸ¥è¯¢é€Ÿç‡æ¥è¯´ï¼Œä¸¤è€…åŒºåˆ«ä¸å¤§ï¼ŒåŒºåˆ«åœ¨äºå­˜å‚¨å¤§é‡æ•°æ®æƒ…å†µä¸‹çš„å†™æ“ä½œæ€§èƒ½ä¸ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561694474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107712,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1561598685,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561598685","product_id":100028001,"comment_content":"é‡‡ç”¨disruptoré˜Ÿåˆ—ã€‚ä¸€æ¬¡æ€§åˆå§‹åŒ–æ‰€æœ‰å…ƒç´ ã€‚ç±»ä¼¼å¯¹è±¡æ± ï¼›å ä½é˜²æ­¢ä¼ªå…±äº«å¯¼è‡´é”å‡€å¢ï¼›å…ƒç´ å­˜åœ¨ç›¸è¿‘çš„å†…å­˜å—","like_count":0},{"had_liked":false,"id":107706,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1561598242,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561598242","product_id":100028001,"comment_content":"æ„Ÿè§‰è·³è·ƒè¡¨å’ŒB+æ ‘æœ‰ç‚¹åƒ","like_count":0},{"had_liked":false,"id":107692,"user_name":"å¤§å«","can_delete":false,"product_type":"c1","uid":1019127,"ip_address":"","ucode":"D861709E483793","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/f7/a4de6f64.jpg","comment_is_top":false,"comment_ctime":1561597151,"is_pvip":false,"replies":[{"id":"38952","content":"ä¸‹ä¸€è®²æ˜¯çº¿ç¨‹æ± å¤§å°è®¾ç½®ã€‚åˆ†ç‰‡åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šä¹Ÿæ˜¯ä¸€ç§æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ¡ˆé—®é¢˜å°±åœ¨å¯èƒ½æœ‰äº›æœåŠ¡åº“å­˜æ²¡æœ‰äº†ï¼Œå…¶ä»–æœåŠ¡ä¸Šä¾ç„¶æœ‰åº“å­˜ã€‚ä¸€èˆ¬æ˜¯åŸºäºåˆ†å¸ƒå¼ç¼“å­˜æ¥å®ç°çš„ï¼Œä¾‹å¦‚åŸºäºredisåˆ†å¸ƒå¼é”æ¥å®ç°åº“å­˜çš„æ‰£å‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561598332,"ip_address":"","comment_id":107692,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561597151","product_id":100028001,"comment_content":"è€å¸ˆï¼Œè¿™ä¸€è®²ä¸æ˜¯è®²çš„çº¿ç¨‹æ± å¤§å°å¦‚ä½•è®¾ç½®å“ˆã€‚<br><br>æŠ¢è´­åœºæ™¯åç«¯æœåŠ¡æ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„ï¼Œæ˜¯å°†åº“å­˜åˆ†ç‰‡æ”¾åˆ°ä¸åŒæœåŠ¡å™¨ä¸Šå—ï¼Œç„¶åè€ƒè™‘å®¹å™¨çš„é€‰æ‹©ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455627,"discussion_content":"ä¸‹ä¸€è®²æ˜¯çº¿ç¨‹æ± å¤§å°è®¾ç½®ã€‚åˆ†ç‰‡åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šä¹Ÿæ˜¯ä¸€ç§æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ¡ˆé—®é¢˜å°±åœ¨å¯èƒ½æœ‰äº›æœåŠ¡åº“å­˜æ²¡æœ‰äº†ï¼Œå…¶ä»–æœåŠ¡ä¸Šä¾ç„¶æœ‰åº“å­˜ã€‚ä¸€èˆ¬æ˜¯åŸºäºåˆ†å¸ƒå¼ç¼“å­˜æ¥å®ç°çš„ï¼Œä¾‹å¦‚åŸºäºredisåˆ†å¸ƒå¼é”æ¥å®ç°åº“å­˜çš„æ‰£å‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561598332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107691,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1561597087,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561597087","product_id":100028001,"comment_content":"è°¢è°¢è€å¸ˆ:ä»¥å‰å¬è¿‡è·³è·ƒè¡¨ï¼Œä»Šå¤©è®¤è¯†è·³è·ƒè¡¨äº†","like_count":0},{"had_liked":false,"id":107683,"user_name":"å¬é›¨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1561596591,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561596591","product_id":100028001,"comment_content":"è€å¸ˆï¼Œåœ¨å¤§æ•°æ®é‡çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æŠŠConcurrentHashmapçš„é•¿åº¦æ”¾å¤§ç‚¹ï¼Œè¿™æ ·å…ƒç´ ç¢°æ’çš„å‡ ç‡ä¼šå°ç‚¹ï¼Œä¸å®¹æ˜“å‡ºç°é“¾è¡¨æˆ–çº¢é»‘æ ‘ï¼Œç›¸åº”çš„æŸ¥è¯¢é€Ÿåº¦æ˜¯ä¸æ˜¯ä¹Ÿä¼šå¾ˆå¿«å‘€ï¼Œæ‰€ä»¥æœ‰ç‚¹ä¸ç†è§£ä¸ºä»€ä¹ˆConcurrentHashmapå°±é€‚åˆå°æ•°æ®é‡ã€‚è¿˜æ˜¯è¯´ConcurrentHashmapåŸç†ä¸æ˜¯è¿™æ ·ï¼Œå› ä¸ºæˆ‘æ²¡çœ‹è¿‡å®ƒçš„æºç ï¼Œåªçœ‹è¿‡Hashmapçš„ï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰è¿™ä¿©åŸç†æ˜¯ç±»ä¼¼çš„","like_count":0},{"had_liked":false,"id":107667,"user_name":"å¯†ç 123456","can_delete":false,"product_type":"c1","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1561594840,"is_pvip":false,"replies":[{"id":"38961","content":"å¦‚æœæ˜¯ä¸€ä¸ªæ’é˜Ÿç­‰å¾…çš„é˜Ÿåˆ—ï¼Œæˆ‘ä»¬æ— éœ€è¦ç‰¹åˆ«åœ¨æ„å¼ºä¸€è‡´æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…","uid":"1228576","ctime":1561599310,"ip_address":"","comment_id":107667,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561594840","product_id":100028001,"comment_content":"æŠ¢è´­ç±»ï¼Œèµ„æºæ˜¯å›ºå®šçš„ã€‚é‚£ä¹ˆè¯´é˜Ÿåˆ—çš„é•¿åº¦å°±ç¡®å®šäº†ã€‚è€Œæ¶ˆè´¹è€…ä¼šç‰¹åˆ«å¤šã€‚éœ€è¦ä¸€ä¸ªå¼ºä¸€è‡´æ€§è¿›è¡Œç»´æŠ¤ã€‚æˆ‘è§‰å¾—ï¼Œvectæ¯”è¾ƒå¥½ã€‚","like_count":0,"discussions":[{"author":{"id":1228576,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bf/20/19d42715.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"CD56F93596E818","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455617,"discussion_content":"å¦‚æœæ˜¯ä¸€ä¸ªæ’é˜Ÿç­‰å¾…çš„é˜Ÿåˆ—ï¼Œæˆ‘ä»¬æ— éœ€è¦ç‰¹åˆ«åœ¨æ„å¼ºä¸€è‡´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561599310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}