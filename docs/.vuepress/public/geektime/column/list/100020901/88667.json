{"id":88667,"title":"55 | å¥—è·¯ç¯‡ï¼šåˆ†ææ€§èƒ½é—®é¢˜çš„ä¸€èˆ¬æ­¥éª¤","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†ï¼Œåº”ç”¨ç¨‹åºç›‘æ§çš„åŸºæœ¬æ€è·¯ï¼Œå…ˆç®€å•å›é¡¾ä¸€ä¸‹ã€‚</p><p>åº”ç”¨ç¨‹åºçš„ç›‘æ§ï¼Œå¯ä»¥åˆ†ä¸ºæŒ‡æ ‡ç›‘æ§å’Œæ—¥å¿—ç›‘æ§ä¸¤å¤§å—ã€‚</p><ul>\n<li>\n<p>æŒ‡æ ‡ç›‘æ§ï¼Œä¸»è¦æ˜¯å¯¹ä¸€å®šæ—¶é—´æ®µå†…çš„æ€§èƒ½æŒ‡æ ‡è¿›è¡Œæµ‹é‡ï¼Œç„¶åå†é€šè¿‡æ—¶é—´åºåˆ—çš„æ–¹å¼ï¼Œè¿›è¡Œå¤„ç†ã€å­˜å‚¨å’Œå‘Šè­¦ã€‚</p>\n</li>\n<li>\n<p>è€Œæ—¥å¿—ç›‘æ§ï¼Œåˆ™å¯ä»¥æä¾›æ›´è¯¦ç»†çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œé€šå¸¸é€šè¿‡ ELK æŠ€æœ¯æ ˆï¼Œæ¥è¿›è¡Œæ”¶é›†ã€ç´¢å¼•å’Œå›¾å½¢åŒ–å±•ç¤ºã€‚</p>\n</li>\n</ul><p>åœ¨è·¨å¤šä¸ªä¸åŒåº”ç”¨çš„å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œä½ è¿˜å¯ä»¥æ„å»ºå…¨é“¾è·¯è·Ÿè¸ªç³»ç»Ÿã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥åŠ¨æ€è·Ÿè¸ªè°ƒç”¨é“¾ä¸­å„ä¸ªç»„ä»¶çš„æ€§èƒ½ï¼Œç”Ÿæˆæ•´ä¸ªåº”ç”¨çš„è°ƒç”¨æ‹“æ‰‘å›¾ï¼Œä»è€ŒåŠ å¿«å®šä½å¤æ‚åº”ç”¨çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>ä¸è¿‡ï¼Œå¦‚æœä½ æ”¶åˆ°ç›‘æ§ç³»ç»Ÿçš„å‘Šè­¦ï¼Œå‘ç°ç³»ç»Ÿèµ„æºæˆ–è€…åº”ç”¨ç¨‹åºå‡ºç°æ€§èƒ½ç“¶é¢ˆï¼Œåˆè¯¥å¦‚ä½•è¿›ä¸€æ­¥åˆ†æå®ƒçš„æ ¹æºå‘¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘å°±åˆ†åˆ«ä»ç³»ç»Ÿèµ„æºç“¶é¢ˆå’Œåº”ç”¨ç¨‹åºç“¶é¢ˆè¿™ä¸¤ä¸ªè§’åº¦ï¼Œå¸¦ä½ ä¸€èµ·æ¥çœ‹çœ‹ï¼Œæ€§èƒ½åˆ†æçš„ä¸€èˆ¬æ­¥éª¤ã€‚</p><h2>ç³»ç»Ÿèµ„æºç“¶é¢ˆ</h2><p>é¦–å…ˆæ¥çœ‹ç³»ç»Ÿèµ„æºçš„ç“¶é¢ˆï¼Œè¿™ä¹Ÿæ˜¯æœ€ä¸ºå¸¸è§çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>åœ¨ç³»ç»Ÿç›‘æ§çš„ç»¼åˆæ€è·¯ç¯‡ä¸­ï¼Œæˆ‘æ›¾ç»ä»‹ç»è¿‡ï¼Œç³»ç»Ÿèµ„æºçš„ç“¶é¢ˆï¼Œå¯ä»¥é€šè¿‡ USE æ³•ï¼Œå³<strong>ä½¿ç”¨ç‡ã€é¥±å’Œåº¦ä»¥åŠé”™è¯¯æ•°è¿™ä¸‰ç±»æŒ‡æ ‡æ¥è¡¡é‡</strong>ã€‚ç³»ç»Ÿçš„èµ„æºï¼Œå¯ä»¥åˆ†ä¸ºç¡¬ä»¶èµ„æºå’Œè½¯ä»¶èµ„æºä¸¤ç±»ã€‚</p><ul>\n<li>\n<p>å¦‚ CPUã€å†…å­˜ã€ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿä»¥åŠç½‘ç»œç­‰ï¼Œéƒ½æ˜¯æœ€å¸¸è§çš„ç¡¬ä»¶èµ„æºã€‚</p>\n</li>\n<li>\n<p>è€Œæ–‡ä»¶æè¿°ç¬¦æ•°ã€è¿æ¥è·Ÿè¸ªæ•°ã€å¥—æ¥å­—ç¼“å†²åŒºå¤§å°ç­‰ï¼Œåˆ™æ˜¯å…¸å‹çš„è½¯ä»¶èµ„æºã€‚</p>\n</li>\n</ul><!-- [[[read_end]]] --><p>è¿™æ ·ï¼Œåœ¨ä½ æ”¶åˆ°ç›‘æ§ç³»ç»Ÿå‘Šè­¦æ—¶ï¼Œå°±å¯ä»¥å¯¹ç…§è¿™äº›èµ„æºåˆ—è¡¨ï¼Œå†æ ¹æ®æŒ‡æ ‡çš„ä¸åŒæ¥è¿›è¡Œå®šä½ã€‚</p><p>å®é™…ä¸Šï¼Œå’±ä»¬ä¸“æ å‰å››å¤§æ¨¡å—çš„æ ¸å¿ƒï¼Œæ­£æ˜¯å­¦ä¼šå»åˆ†æè¿™äº›èµ„æºç“¶é¢ˆå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚æ‰€ä»¥ï¼Œå½“ä½ ç¢°åˆ°äº†ç³»ç»Ÿèµ„æºçš„æ€§èƒ½ç“¶é¢ˆæ—¶ï¼Œå‰é¢æ¨¡å—çš„æ‰€æœ‰æ€è·¯ã€æ–¹æ³•ä»¥åŠå·¥å…·ï¼Œéƒ½å®Œå…¨å¯ä»¥ç…§ç”¨ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä» CPU æ€§èƒ½ã€å†…å­˜æ€§èƒ½ã€ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿ I/O æ€§èƒ½ä»¥åŠç½‘ç»œæ€§èƒ½ç­‰å››ä¸ªæ–¹é¢ï¼Œå¸¦ä½ å›é¡¾ä¸€ä¸‹å®ƒä»¬çš„åˆ†ææ­¥éª¤ã€‚</p><h3>CPUæ€§èƒ½åˆ†æ</h3><p>ç¬¬ä¸€ç§æœ€å¸¸è§çš„ç³»ç»Ÿèµ„æºæ˜¯ CPUã€‚å…³äº CPU çš„æ€§èƒ½åˆ†ææ–¹æ³•ï¼Œæˆ‘åœ¨<a href=\"https://time.geekbang.org/column/article/72685\">å¦‚ä½•è¿…é€Ÿåˆ†æå‡ºç³»ç»ŸCPUçš„ç“¶é¢ˆ</a>ä¸­ï¼Œå·²ç»ä¸ºä½ æ•´ç†äº†ä¸€ä¸ªè¿…é€Ÿåˆ†æ CPU æ€§èƒ½ç“¶é¢ˆçš„æ€è·¯ã€‚</p><p>è¿˜è®°å¾—è¿™å¼ å›¾å—ï¼Ÿåˆ©ç”¨ topã€vmstatã€pidstatã€strace ä»¥åŠ perf ç­‰å‡ ä¸ªæœ€å¸¸è§çš„å·¥å…·ï¼Œè·å– CPU æ€§èƒ½æŒ‡æ ‡åï¼Œå†ç»“åˆè¿›ç¨‹ä¸ CPU çš„å·¥ä½œåŸç†ï¼Œå°±å¯ä»¥è¿…é€Ÿå®šä½å‡º CPU æ€§èƒ½ç“¶é¢ˆçš„æ¥æºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/23/cd/238ee65ac4c8e32ef4f96fb0ba8cb0cd.png?wh=839*1014\" alt=\"\"></p><p>å®é™…ä¸Šï¼Œtopã€pidstatã€vmstat è¿™ç±»å·¥å…·æ‰€æ±‡æŠ¥çš„ CPU æ€§èƒ½æŒ‡æ ‡ï¼Œéƒ½æºè‡ª /proc æ–‡ä»¶ç³»ç»Ÿï¼ˆæ¯”å¦‚/proc/loadavgã€/proc/statã€/proc/softirqs ç­‰ï¼‰ã€‚è¿™äº›æŒ‡æ ‡ï¼Œéƒ½åº”è¯¥é€šè¿‡ç›‘æ§ç³»ç»Ÿç›‘æ§èµ·æ¥ã€‚è™½ç„¶å¹¶éæ‰€æœ‰æŒ‡æ ‡éƒ½éœ€è¦æŠ¥è­¦ï¼Œä½†è¿™äº›æŒ‡æ ‡å´å¯ä»¥åŠ å¿«æ€§èƒ½é—®é¢˜çš„å®šä½åˆ†æã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå½“ä½ æ”¶åˆ°ç³»ç»Ÿçš„ç”¨æˆ· CPU ä½¿ç”¨ç‡è¿‡é«˜å‘Šè­¦æ—¶ï¼Œä»ç›‘æ§ç³»ç»Ÿä¸­ç›´æ¥æŸ¥è¯¢åˆ°ï¼Œå¯¼è‡´ CPU ä½¿ç”¨ç‡è¿‡é«˜çš„è¿›ç¨‹ï¼›ç„¶åå†ç™»å½•åˆ°è¿›ç¨‹æ‰€åœ¨çš„ Linux æœåŠ¡å™¨ä¸­ï¼Œåˆ†æè¯¥è¿›ç¨‹çš„è¡Œä¸ºã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨ straceï¼ŒæŸ¥çœ‹è¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨æ±‡æ€»ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨ perf ç­‰å·¥å…·ï¼Œæ‰¾å‡ºè¿›ç¨‹çš„çƒ­ç‚¹å‡½æ•°ï¼›ç”šè‡³è¿˜å¯ä»¥ä½¿ç”¨åŠ¨æ€è¿½è¸ªçš„æ–¹æ³•ï¼Œæ¥è§‚å¯Ÿè¿›ç¨‹çš„å½“å‰æ‰§è¡Œè¿‡ç¨‹ï¼Œç›´åˆ°ç¡®å®šç“¶é¢ˆçš„æ ¹æºã€‚</p><h3>å†…å­˜æ€§èƒ½åˆ†æ</h3><p>è¯´å®Œäº† CPU çš„æ€§èƒ½åˆ†æï¼Œå†æ¥çœ‹çœ‹ç¬¬äºŒç§ç³»ç»Ÿèµ„æºï¼Œå³å†…å­˜ã€‚å…³äºå†…å­˜æ€§èƒ½çš„åˆ†ææ–¹æ³•ï¼Œæˆ‘åœ¨<a href=\"https://time.geekbang.org/column/article/76460\">å¦‚ä½•â€œå¿«å‡†ç‹ â€æ‰¾åˆ°ç³»ç»Ÿå†…å­˜çš„é—®é¢˜</a>ä¸­ï¼Œä¹Ÿå·²ç»ä¸ºä½ æ•´ç†äº†ä¸€ä¸ªå¿«é€Ÿåˆ†æçš„æ€è·¯ã€‚</p><p>ä¸‹é¢è¿™å¼ å›¾ï¼Œå°±æ˜¯ä¸€ä¸ªè¿…é€Ÿå®šä½å†…å­˜ç“¶é¢ˆçš„æµç¨‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ free å’Œ vmstat è¾“å‡ºçš„æ€§èƒ½æŒ‡æ ‡ï¼Œç¡®è®¤å†…å­˜ç“¶é¢ˆï¼›ç„¶åï¼Œå†æ ¹æ®å†…å­˜é—®é¢˜çš„ç±»å‹ï¼Œè¿›ä¸€æ­¥åˆ†æå†…å­˜çš„ä½¿ç”¨ã€åˆ†é…ã€æ³„æ¼ä»¥åŠç¼“å­˜ç­‰ï¼Œæœ€åæ‰¾å‡ºé—®é¢˜çš„æ¥æºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/29/98/292d64ac6bce0fe6a7a6b4250f34e998.png?wh=1629*885\" alt=\"\"></p><p>åŒ CPU æ€§èƒ½ä¸€æ ·ï¼Œå¾ˆå¤šå†…å­˜çš„æ€§èƒ½æŒ‡æ ‡ï¼Œä¹Ÿæ¥æºäº /proc æ–‡ä»¶ç³»ç»Ÿï¼ˆæ¯”å¦‚ /proc/meminfoã€/proc/slabinfoç­‰ï¼‰ï¼Œå®ƒä»¬ä¹Ÿéƒ½åº”è¯¥é€šè¿‡ç›‘æ§ç³»ç»Ÿç›‘æ§èµ·æ¥ã€‚è¿™æ ·ï¼Œå½“ä½ æ”¶åˆ°å†…å­˜å‘Šè­¦æ—¶ï¼Œå°±å¯ä»¥ä»ç›‘æ§ç³»ç»Ÿä¸­ï¼Œç›´æ¥å¾—åˆ°ä¸Šå›¾ä¸­çš„å„é¡¹æ€§èƒ½æŒ‡æ ‡ï¼Œä»è€ŒåŠ å¿«æ€§èƒ½é—®é¢˜çš„å®šä½è¿‡ç¨‹ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå½“ä½ æ”¶åˆ°å†…å­˜ä¸è¶³çš„å‘Šè­¦æ—¶ï¼Œé¦–å…ˆå¯ä»¥ä»ç›‘æ§ç³»ç»Ÿä¸­ã€‚æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å‡ ä¸ªè¿›ç¨‹ã€‚ç„¶åï¼Œå†æ ¹æ®è¿™äº›è¿›ç¨‹çš„å†…å­˜å ç”¨å†å²ï¼Œè§‚å¯Ÿæ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ã€‚ç¡®å®šå‡ºæœ€å¯ç–‘çš„è¿›ç¨‹åï¼Œå†ç™»å½•åˆ°è¿›ç¨‹æ‰€åœ¨çš„ Linux æœåŠ¡å™¨ä¸­ï¼Œåˆ†æè¯¥è¿›ç¨‹çš„å†…å­˜ç©ºé—´æˆ–è€…å†…å­˜åˆ†é…ï¼Œæœ€åå¼„æ¸…æ¥šè¿›ç¨‹ä¸ºä»€ä¹ˆä¼šå ç”¨å¤§é‡å†…å­˜ã€‚</p><h3>ç£ç›˜å’Œæ–‡ä»¶ç³»ç»ŸI/Oæ€§èƒ½åˆ†æ</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹ç¬¬ä¸‰ç§ç³»ç»Ÿèµ„æºï¼Œå³ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿçš„ I/Oã€‚å…³äºç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿçš„ I/O æ€§èƒ½åˆ†ææ–¹æ³•ï¼Œæˆ‘åœ¨<a href=\"https://time.geekbang.org/column/article/79001\">å¦‚ä½•è¿…é€Ÿåˆ†æå‡ºç³»ç»ŸI/Oçš„ç“¶é¢ˆ</a>ä¸­ä¹Ÿå·²ç»ä¸ºä½ æ•´ç†äº†ä¸€ä¸ªå¿«é€Ÿåˆ†æçš„æ€è·¯ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™å¼ å›¾ã€‚å½“ä½ ä½¿ç”¨ iostat ï¼Œå‘ç°ç£ç›˜I/O å­˜åœ¨æ€§èƒ½ç“¶é¢ˆï¼ˆæ¯”å¦‚ I/O ä½¿ç”¨ç‡è¿‡é«˜ã€å“åº”æ—¶é—´è¿‡é•¿æˆ–è€…ç­‰å¾…é˜Ÿåˆ—é•¿åº¦çªç„¶å¢å¤§ç­‰ï¼‰åï¼Œå¯ä»¥å†é€šè¿‡ pidstatã€ vmstat ç­‰ï¼Œç¡®è®¤ I/O çš„æ¥æºã€‚æ¥ç€ï¼Œå†æ ¹æ®æ¥æºçš„ä¸åŒï¼Œè¿›ä¸€æ­¥åˆ†ææ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜çš„ä½¿ç”¨ç‡ã€ç¼“å­˜ä»¥åŠè¿›ç¨‹çš„ I/O ç­‰ï¼Œä»è€Œæªå‡º I/O é—®é¢˜çš„çœŸå‡¶ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e0/0b/e075287cff9b32ba3964746fdaf2960b.png?wh=3732*1886\" alt=\"\"></p><p>åŒ CPU å’Œå†…å­˜æ€§èƒ½ç±»ä¼¼ï¼Œå¾ˆå¤šç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½æŒ‡æ ‡ï¼Œä¹Ÿæ¥æºäº /proc å’Œ /sys æ–‡ä»¶ç³»ç»Ÿï¼ˆæ¯”å¦‚ /proc/diskstatsã€/sys/block/sda/stat ç­‰ï¼‰ã€‚è‡ªç„¶ï¼Œå®ƒä»¬ä¹Ÿåº”è¯¥é€šè¿‡ç›‘æ§ç³»ç»Ÿç›‘æ§èµ·æ¥ã€‚è¿™æ ·ï¼Œå½“ä½ æ”¶åˆ° I/O æ€§èƒ½å‘Šè­¦æ—¶ï¼Œå°±å¯ä»¥ä»ç›‘æ§ç³»ç»Ÿä¸­ï¼Œç›´æ¥å¾—åˆ°ä¸Šå›¾ä¸­çš„å„é¡¹æ€§èƒ½æŒ‡æ ‡ï¼Œä»è€ŒåŠ å¿«æ€§èƒ½å®šä½çš„è¿‡ç¨‹ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå½“ä½ å‘ç°æŸå—ç£ç›˜çš„ I/O ä½¿ç”¨ç‡ä¸º 100% æ—¶ï¼Œé¦–å…ˆå¯ä»¥ä»ç›‘æ§ç³»ç»Ÿä¸­ï¼Œæ‰¾å‡º I/O æœ€å¤šçš„è¿›ç¨‹ã€‚ç„¶åï¼Œå†ç™»å½•åˆ°è¿›ç¨‹æ‰€åœ¨çš„ Linux æœåŠ¡å™¨ä¸­ï¼Œå€ŸåŠ© straceã€lsofã€perf ç­‰å·¥å…·ï¼Œåˆ†æè¯¥è¿›ç¨‹çš„ I/O è¡Œä¸ºã€‚æœ€åï¼Œå†ç»“åˆåº”ç”¨ç¨‹åºçš„åŸç†ï¼Œæ‰¾å‡ºå¤§é‡ I/O çš„åŸå› ã€‚</p><h3>ç½‘ç»œæ€§èƒ½åˆ†æ</h3><p>æœ€åçš„ç½‘ç»œæ€§èƒ½ï¼Œå…¶å®åŒ…å«ä¸¤ç±»èµ„æºï¼Œå³ç½‘ç»œæ¥å£å’Œå†…æ ¸èµ„æºã€‚åœ¨<a href=\"https://time.geekbang.org/column/article/83783\">ç½‘ç»œæ€§èƒ½ä¼˜åŒ–çš„å‡ ä¸ªæ€è·¯</a>ä¸­ï¼Œæˆ‘ä¹Ÿæ›¾æåˆ°è¿‡ï¼Œç½‘ç»œæ€§èƒ½çš„åˆ†æï¼Œè¦ä» Linux ç½‘ç»œåè®®æ ˆçš„åŸç†æ¥åˆ‡å…¥ã€‚ä¸‹é¢è¿™å¼ å›¾ï¼Œå°±æ˜¯ Linux ç½‘ç»œåè®®æ ˆçš„åŸºæœ¬åŸç†ï¼ŒåŒ…æ‹¬åº”ç”¨å±‚ã€å¥—æœºå­—æ¥å£ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ä»¥åŠé“¾è·¯å±‚ç­‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a1/3f/a118911721f9b67ce9c83de15666753f.png?wh=1826*1242\" alt=\"\"></p><p>è€Œè¦åˆ†æç½‘ç»œçš„æ€§èƒ½ï¼Œè‡ªç„¶ä¹Ÿæ˜¯è¦ä»è¿™å‡ ä¸ªåè®®å±‚å…¥æ‰‹ï¼Œé€šè¿‡ä½¿ç”¨ç‡ã€é¥±å’Œåº¦ä»¥åŠé”™è¯¯æ•°è¿™å‡ ç±»æ€§èƒ½æŒ‡æ ‡ï¼Œè§‚å¯Ÿæ˜¯å¦å­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚æ¯”å¦‚ ï¼š</p><ul>\n<li>\n<p>åœ¨é“¾è·¯å±‚ï¼Œå¯ä»¥ä»ç½‘ç»œæ¥å£çš„ååé‡ã€ä¸¢åŒ…ã€é”™è¯¯ä»¥åŠè½¯ä¸­æ–­å’Œç½‘ç»œåŠŸèƒ½å¸è½½ç­‰è§’åº¦åˆ†æï¼›</p>\n</li>\n<li>\n<p>åœ¨ç½‘ç»œå±‚ï¼Œå¯ä»¥ä»è·¯ç”±ã€åˆ†ç‰‡ã€å åŠ ç½‘ç»œç­‰è§’åº¦è¿›è¡Œåˆ†æï¼›</p>\n</li>\n<li>\n<p>åœ¨ä¼ è¾“å±‚ï¼Œå¯ä»¥ä» TCPã€UDP çš„åè®®åŸç†å‡ºå‘ï¼Œä»è¿æ¥æ•°ã€ååé‡ã€å»¶è¿Ÿã€é‡ä¼ ç­‰è§’åº¦è¿›è¡Œåˆ†æï¼›</p>\n</li>\n<li>\n<p>åœ¨åº”ç”¨å±‚ï¼Œå¯ä»¥ä»åº”ç”¨å±‚åè®®ï¼ˆå¦‚ HTTP å’Œ DNSï¼‰ã€è¯·æ±‚æ•°ï¼ˆQPSï¼‰ã€å¥—æ¥å­—ç¼“å­˜ç­‰è§’åº¦è¿›è¡Œåˆ†æã€‚</p>\n</li>\n</ul><p>åŒå‰é¢å‡ ç§èµ„æºç±»ä¼¼ï¼Œç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡ä¹Ÿéƒ½æ¥æºäºå†…æ ¸ï¼ŒåŒ…æ‹¬ /proc æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ /proc/netï¼‰ã€ç½‘ç»œæ¥å£ä»¥åŠconntrackç­‰å†…æ ¸æ¨¡å—ã€‚è¿™äº›æŒ‡æ ‡åŒæ ·éœ€è¦è¢«ç›‘æ§ç³»ç»Ÿç›‘æ§ã€‚è¿™æ ·ï¼Œå½“ä½ æ”¶åˆ°ç½‘ç»œå‘Šè­¦æ—¶ï¼Œå°±å¯ä»¥ä»ç›‘æ§ç³»ç»Ÿä¸­ï¼ŒæŸ¥è¯¢è¿™äº›åè®®å±‚çš„å„é¡¹æ€§èƒ½æŒ‡æ ‡ï¼Œä»è€Œæ›´å¿«å®šä½å‡ºæ€§èƒ½é—®é¢˜ã€‚</p><p>æ¯”å¦‚ï¼Œå½“ä½ æ”¶åˆ°ç½‘ç»œä¸é€šçš„å‘Šè­¦æ—¶ï¼Œå°±å¯ä»¥ä»ç›‘æ§ç³»ç»Ÿä¸­ï¼ŒæŸ¥æ‰¾å„ä¸ªåè®®å±‚çš„ä¸¢åŒ…æŒ‡æ ‡ï¼Œç¡®è®¤ä¸¢åŒ…æ‰€åœ¨çš„åè®®å±‚ã€‚ç„¶åï¼Œä»ç›‘æ§ç³»ç»Ÿçš„æ•°æ®ä¸­ï¼Œç¡®è®¤ç½‘ç»œå¸¦å®½ã€ç¼“å†²åŒºã€è¿æ¥è·Ÿè¸ªæ•°ç­‰è½¯ç¡¬ä»¶ï¼Œæ˜¯å¦å­˜åœ¨æ€§èƒ½ç“¶é¢ˆã€‚æœ€åï¼Œå†ç™»å½•åˆ°å‘ç”Ÿé—®é¢˜çš„ Linux æœåŠ¡å™¨ä¸­ï¼Œå€ŸåŠ© netstatã€tcpdumpã€bcc ç­‰å·¥å…·ï¼Œåˆ†æç½‘ç»œçš„æ”¶å‘æ•°æ®ï¼Œå¹¶ä¸”ç»“åˆå†…æ ¸ä¸­çš„ç½‘ç»œé€‰é¡¹ä»¥åŠ TCP ç­‰ç½‘ç»œåè®®çš„åŸç†ï¼Œæ‰¾å‡ºé—®é¢˜çš„æ¥æºã€‚</p><h2>åº”ç”¨ç¨‹åºç“¶é¢ˆ</h2><p>é™¤äº†ä»¥ä¸Šè¿™äº›æ¥è‡ªç½‘ç»œèµ„æºçš„ç“¶é¢ˆå¤–ï¼Œè¿˜æœ‰å¾ˆå¤šç“¶é¢ˆï¼Œå…¶å®ç›´æ¥æ¥è‡ªåº”ç”¨ç¨‹åºã€‚æ¯”å¦‚ï¼Œæœ€å…¸å‹çš„åº”ç”¨ç¨‹åºæ€§èƒ½é—®é¢˜ï¼Œå°±æ˜¯ååé‡ï¼ˆå¹¶å‘è¯·æ±‚æ•°ï¼‰ä¸‹é™ã€é”™è¯¯ç‡å‡é«˜ä»¥åŠå“åº”æ—¶é—´å¢å¤§ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè¿™äº›åº”ç”¨ç¨‹åºæ€§èƒ½é—®é¢˜è™½ç„¶å„ç§å„æ ·ï¼Œä½†å°±å…¶æœ¬è´¨æ¥æºï¼Œå®é™…ä¸Šåªæœ‰ä¸‰ç§ï¼Œä¹Ÿå°±æ˜¯èµ„æºç“¶é¢ˆã€ä¾èµ–æœåŠ¡ç“¶é¢ˆä»¥åŠåº”ç”¨è‡ªèº«çš„ç“¶é¢ˆã€‚</p><p>ç¬¬ä¸€ç§èµ„æºç“¶é¢ˆï¼Œå…¶å®è¿˜æ˜¯æŒ‡åˆšæ‰æåˆ°çš„ CPUã€å†…å­˜ã€ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿ I/Oã€ç½‘ç»œä»¥åŠå†…æ ¸èµ„æºç­‰å„ç±»è½¯ç¡¬ä»¶èµ„æºå‡ºç°äº†ç“¶é¢ˆï¼Œä»è€Œå¯¼è‡´åº”ç”¨ç¨‹åºçš„è¿è¡Œå—é™ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨å‰é¢ç³»ç»Ÿèµ„æºç“¶é¢ˆæ¨¡å—æåˆ°çš„å„ç§æ–¹æ³•æ¥åˆ†æã€‚</p><p>ç¬¬äºŒç§ä¾èµ–æœåŠ¡çš„ç“¶é¢ˆï¼Œä¹Ÿå°±æ˜¯è¯¸å¦‚æ•°æ®åº“ã€åˆ†å¸ƒå¼ç¼“å­˜ã€ä¸­é—´ä»¶ç­‰åº”ç”¨ç¨‹åºï¼Œç›´æ¥æˆ–è€…é—´æ¥è°ƒç”¨çš„æœåŠ¡å‡ºç°äº†æ€§èƒ½é—®é¢˜ï¼Œä»è€Œå¯¼è‡´åº”ç”¨ç¨‹åºçš„å“åº”å˜æ…¢ï¼Œæˆ–è€…é”™è¯¯ç‡å‡é«˜ã€‚è¿™è¯´ç™½äº†å°±æ˜¯è·¨åº”ç”¨çš„æ€§èƒ½é—®é¢˜ï¼Œä½¿ç”¨å…¨é“¾è·¯è·Ÿè¸ªç³»ç»Ÿï¼Œå°±å¯ä»¥å¸®ä½ å¿«é€Ÿå®šä½è¿™ç±»é—®é¢˜çš„æ ¹æºã€‚</p><p>æœ€åä¸€ç§ï¼Œåº”ç”¨ç¨‹åºè‡ªèº«çš„æ€§èƒ½é—®é¢˜ï¼ŒåŒ…æ‹¬äº†å¤šçº¿ç¨‹å¤„ç†ä¸å½“ã€æ­»é”ã€ä¸šåŠ¡ç®—æ³•çš„å¤æ‚åº¦è¿‡é«˜ç­‰ç­‰ã€‚å¯¹äºè¿™ç±»é—®é¢˜ï¼Œåœ¨æˆ‘ä»¬å‰é¢è®²è¿‡çš„åº”ç”¨ç¨‹åºæŒ‡æ ‡ç›‘æ§ä»¥åŠæ—¥å¿—ç›‘æ§ä¸­ï¼Œè§‚å¯Ÿå…³é”®ç¯èŠ‚çš„è€—æ—¶å’Œå†…éƒ¨æ‰§è¡Œè¿‡ç¨‹ä¸­çš„é”™è¯¯ï¼Œå°±å¯ä»¥å¸®ä½ ç¼©å°é—®é¢˜çš„èŒƒå›´ã€‚</p><p>ä¸è¿‡ï¼Œç”±äºè¿™æ˜¯åº”ç”¨ç¨‹åºå†…éƒ¨çš„çŠ¶æ€ï¼Œå¤–éƒ¨é€šå¸¸ä¸èƒ½ç›´æ¥è·å–è¯¦ç»†çš„æ€§èƒ½æ•°æ®ï¼Œæ‰€ä»¥å°±éœ€è¦åº”ç”¨ç¨‹åºåœ¨è®¾è®¡å’Œå¼€å‘æ—¶ï¼Œå°±æä¾›å‡ºè¿™äº›æŒ‡æ ‡ï¼Œä»¥ä¾¿ç›‘æ§ç³»ç»Ÿå¯ä»¥äº†è§£åº”ç”¨ç¨‹åºçš„å†…éƒ¨è¿è¡ŒçŠ¶æ€ã€‚</p><p>å¦‚æœè¿™äº›æ‰‹æ®µè¿‡åè¿˜æ˜¯æ— æ³•æ‰¾å‡ºç“¶é¢ˆï¼Œä½ è¿˜å¯ä»¥ç”¨ç³»ç»Ÿèµ„æºæ¨¡å—æåˆ°çš„å„ç±»è¿›ç¨‹åˆ†æå·¥å…·ï¼Œæ¥è¿›è¡Œåˆ†æå®šä½ã€‚æ¯”å¦‚ï¼š</p><ul>\n<li>\n<p>ä½ å¯ä»¥ç”¨ straceï¼Œè§‚å¯Ÿç³»ç»Ÿè°ƒç”¨ï¼›</p>\n</li>\n<li>\n<p>ä½¿ç”¨ perf å’Œç«ç„°å›¾ï¼Œåˆ†æçƒ­ç‚¹å‡½æ•°ï¼›</p>\n</li>\n<li>\n<p>ç”šè‡³ä½¿ç”¨åŠ¨æ€è¿½è¸ªæŠ€æœ¯ï¼Œæ¥åˆ†æè¿›ç¨‹çš„æ‰§è¡ŒçŠ¶æ€ã€‚</p>\n</li>\n</ul><p>å½“ç„¶ï¼Œç³»ç»Ÿèµ„æºå’Œåº”ç”¨ç¨‹åºæœ¬æ¥å°±æ˜¯ç›¸äº’å½±å“ã€ç›¸è¾…ç›¸æˆçš„ä¸€ä¸ªæ•´ä½“ã€‚å®é™…ä¸Šï¼Œå¾ˆå¤šèµ„æºç“¶é¢ˆï¼Œä¹Ÿæ˜¯åº”ç”¨ç¨‹åºè‡ªèº«è¿è¡Œå¯¼è‡´çš„ã€‚æ¯”å¦‚ï¼Œè¿›ç¨‹çš„å†…å­˜æ³„æ¼ï¼Œä¼šå¯¼è‡´ç³»ç»Ÿå†…å­˜ä¸è¶³ï¼›è¿›ç¨‹è¿‡å¤šçš„ I/O è¯·æ±‚ï¼Œä¼šæ‹–æ…¢æ•´ä¸ªç³»ç»Ÿçš„ I/O è¯·æ±‚ç­‰ã€‚</p><p>æ‰€ä»¥ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œèµ„æºç“¶é¢ˆå’Œåº”ç”¨è‡ªèº«ç“¶é¢ˆï¼Œå…¶å®éƒ½æ˜¯åŒä¸€ä¸ªé—®é¢˜å¯¼è‡´çš„ï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬é‡å¤åˆ†æã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘å¸¦ä½ ä»ç³»ç»Ÿèµ„æºç“¶é¢ˆå’Œåº”ç”¨ç¨‹åºç“¶é¢ˆè¿™ä¸¤ä¸ªè§’åº¦ï¼Œæ¢³ç†äº†æ€§èƒ½é—®é¢˜åˆ†æçš„ä¸€èˆ¬æ­¥éª¤ã€‚</p><p>ä»ç³»ç»Ÿèµ„æºç“¶é¢ˆçš„è§’åº¦æ¥è¯´ï¼ŒUSE æ³•æ˜¯æœ€ä¸ºæœ‰æ•ˆçš„æ–¹æ³•ï¼Œå³ä»ä½¿ç”¨ç‡ã€é¥±å’Œåº¦ä»¥åŠé”™è¯¯æ•°è¿™ä¸‰ä¸ªæ–¹é¢ï¼Œæ¥åˆ†æ CPUã€å†…å­˜ã€ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿ I/Oã€ç½‘ç»œä»¥åŠå†…æ ¸èµ„æºé™åˆ¶ç­‰å„ç±»è½¯ç¡¬ä»¶èµ„æºã€‚å…³äºè¿™äº›èµ„æºçš„åˆ†ææ–¹æ³•ï¼Œæˆ‘ä¹Ÿå¸¦ä½ ä¸€èµ·å›é¡¾äº†å’±ä»¬ä¸“æ å‰é¢å‡ å¤§æ¨¡å—çš„åˆ†æå¥—è·¯ã€‚</p><p>ä»åº”ç”¨ç¨‹åºç“¶é¢ˆçš„è§’åº¦æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ€§èƒ½é—®é¢˜çš„æ¥æºï¼Œåˆ†ä¸ºèµ„æºç“¶é¢ˆã€ä¾èµ–æœåŠ¡ç“¶é¢ˆä»¥åŠåº”ç”¨è‡ªèº«ç“¶é¢ˆè¿™ä¸‰ç±»ã€‚</p><ul>\n<li>\n<p>èµ„æºç“¶é¢ˆè·Ÿç³»ç»Ÿèµ„æºç“¶é¢ˆï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚</p>\n</li>\n<li>\n<p>ä¾èµ–æœåŠ¡ç“¶é¢ˆï¼Œä½ å¯ä»¥ä½¿ç”¨å…¨é“¾è·¯è·Ÿè¸ªç³»ç»Ÿè¿›è¡Œå®šä½ã€‚</p>\n</li>\n<li>\n<p>è€Œåº”ç”¨è‡ªèº«çš„é—®é¢˜ï¼Œä½ å¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨ã€çƒ­ç‚¹å‡½æ•°ï¼Œæˆ–è€…åº”ç”¨è‡ªèº«çš„æŒ‡æ ‡ç›‘æ§ä»¥åŠæ—¥å¿—ç›‘æ§ç­‰ï¼Œè¿›è¡Œåˆ†æå®šä½ã€‚</p>\n</li>\n</ul><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶æˆ‘æŠŠç“¶é¢ˆåˆ†ä¸ºäº†ç³»ç»Ÿå’Œåº”ç”¨ä¸¤ä¸ªè§’åº¦ï¼Œä½†åœ¨å®é™…è¿è¡Œæ—¶ï¼Œè¿™ä¸¤è€…å¾€å¾€æ˜¯ç›¸è¾…ç›¸æˆã€ç›¸äº’å½±å“çš„ã€‚<strong>ç³»ç»Ÿæ˜¯åº”ç”¨çš„è¿è¡Œç¯å¢ƒï¼Œç³»ç»Ÿçš„ç“¶é¢ˆä¼šå¯¼è‡´åº”ç”¨çš„æ€§èƒ½ä¸‹é™ï¼›è€Œåº”ç”¨çš„ä¸åˆç†è®¾è®¡ï¼Œä¹Ÿä¼šå¼•å‘ç³»ç»Ÿèµ„æºçš„ç“¶é¢ˆ</strong>ã€‚æˆ‘ä»¬åšæ€§èƒ½åˆ†æï¼Œå°±æ˜¯è¦ç»“åˆåº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿçš„åŸç†ï¼Œæªå‡ºå¼•å‘é—®é¢˜çš„çœŸå‡¶ã€‚</p><h2>æ€è€ƒ</h2><p>æœ€åï¼Œæˆ‘æƒ³é‚€è¯·ä½ ä¸€èµ·æ¥èŠèŠï¼Œä½ å¹³æ—¶æ˜¯æ€ä¹ˆåˆ†æå’Œå®šä½æ€§èƒ½é—®é¢˜çš„ï¼Ÿæœ‰æ²¡æœ‰å“ªä¸ªå°è±¡æ·±åˆ»çš„ç»å†å¯ä»¥è·Ÿæˆ‘åˆ†äº«å‘¢ï¼Ÿä½ å¯ä»¥ç»“åˆæˆ‘çš„è®²è¿°ï¼Œæ€»ç»“è‡ªå·±çš„æ€è·¯ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p></p>","neighbors":{"left":{"article_title":"54 | å¥—è·¯ç¯‡ï¼šåº”ç”¨ç›‘æ§çš„ä¸€èˆ¬æ€è·¯","id":88423},"right":{"article_title":"56 | å¥—è·¯ç¯‡ï¼šä¼˜åŒ–æ€§èƒ½é—®é¢˜çš„ä¸€èˆ¬æ–¹æ³•","id":89278}},"comments":[{"had_liked":false,"id":83449,"user_name":"èƒ¡é¹","can_delete":false,"product_type":"c1","uid":1326455,"ip_address":"","ucode":"52644EC57FA4DB","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/77/45e5e06d.jpg","comment_is_top":false,"comment_ctime":1554604760,"is_pvip":false,"replies":[{"id":"30184","content":"ğŸ‘è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","comment_id":83449,"uid":"1001282","ip_address":"","utype":1,"ctime":1554638157,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"40209310424","product_id":100020901,"comment_content":"å¹³æ—¶ç”¨phpçš„xhprof,æˆ–æ˜¯goçš„profå›¾ï¼Œåˆ†æä»£ç æ€§èƒ½ï¼Œ","like_count":10,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446029,"discussion_content":"ğŸ‘è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554638157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82670,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1554273671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31619044743","product_id":100020901,"comment_content":"[D55æ‰“å¡]<br>é›†åˆäº†å„æ¨¡å—å¥—è·¯çš„å¥—è·¯ç¯‡ï¼Œå“ˆå“ˆã€‚","like_count":7},{"had_liked":false,"id":82539,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1554250169,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18734119353","product_id":100020901,"comment_content":"æ‰“å¡day59<br>æœ¬ç¯‡å†…å®¹ç»¼åˆäº†ä¹‹å‰çš„å‡ å¤§å—çš„å¥—è·¯ï½","like_count":4},{"had_liked":false,"id":354188,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"é™•è¥¿","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1660174660,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1660174660","product_id":100020901,"comment_content":"ä½¿ç”¨ä¸€äº›ç®€å•çš„å‘½ä»¤åŠ åº”ç”¨ç¨‹åºæ—¥å¿—ï¼Œç¨å¾®é«˜çº§ä¸€ç‚¹çš„å·¥å…·éƒ½æ²¡ç”¨åˆ°è¿‡ã€‚","like_count":0},{"had_liked":false,"id":267036,"user_name":"æ­¦æ–‡æ–‡æ­¦","can_delete":false,"product_type":"c1","uid":1108924,"ip_address":"","ucode":"5288366646A15B","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/bc/6ccac4bb.jpg","comment_is_top":false,"comment_ctime":1607577675,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1607577675","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜æ’æŸ¥çš„æ€è·¯:<br>æˆ‘é‡‡ç”¨nettyä½œä¸ºç¼“å­˜ä»£ç†èŠ‚ç‚¹çš„é€šä¿¡æ¡†æ¶ï¼Œç›®å‰å­˜åœ¨ä¸‡åˆ†ä¹‹ä¸€çš„æ¦‚ç‡å‡ºç°200mså·¦å³çš„æ…¢è¯·æ±‚ï¼Œæ­£å¸¸æƒ…å†µä¸‹éƒ½æ˜¯1msï¼Œè¯·é—®è¿™ç§é—®é¢˜è¯¥å¦‚ä½•æ’æŸ¥å‘¢ï¼Œç«ç„°å›¾ä¹‹ç±»çš„åˆ†æå·¥å…·æ— æ³•åˆ†æå¶å‘å¦‚æ­¤ä½ï¼Œæ—¶é—´å¦‚æ­¤çŸ­çš„é—®é¢˜ï¼Œè¿˜è¯·æ‚¨ç»™æŒ‡ç‚¹ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1057745,"avatar":"https://static001.geekbang.org/account/avatar/00/10/23/d1/8de5aa5b.jpg","nickname":"è„å˜»å˜»","note":"","ucode":"F12C8A3388D884","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369364,"discussion_content":"æ…¢è¯·æ±‚çš„å‘ç”Ÿæ—¶é—´ç‚¹è·ŸGCæ—¶é—´ç‚¹èƒ½å»åˆå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619011982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249441,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1600657431,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1600657431","product_id":100020901,"comment_content":"1.å¾ˆæ£’çš„ä¸“æ ï¼Œé•¿äº†å¾ˆå¤šçŸ¥è¯†ã€‚<br>2.é—æ†¾çš„æ˜¯æˆ‘è¦æ’æŸ¥çš„é—®é¢˜ä¾æ—§æ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚<br>3.é—®é¢˜æè¿°: å¶å‘çš„æœåŠ¡qpsä¸‹é™(2000ä¸‹é™åˆ°200),ç³»ç»Ÿcpuè´Ÿè½½å’Œä½¿ç”¨ç‡éƒ½å‡ºç°å½ªé«˜æ‰“æ»¡,1så·¦å³åæ¢å¤ã€‚é€šè¿‡pidstatå®šæ—¶è·‘å¯ä»¥ç¡®å®šï¼Œåœ¨å¼‚å¸¸cpuèµ„æºä½¿ç”¨æƒ…å†µæ—¶ï¼Œåªæœ‰javaè¿›ç¨‹å ç”¨é«˜CPUåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯jvmè¿›ç¨‹è‡ªèº«çš„é—®é¢˜ã€‚åœ¨cpuä¸Šå‡æ—¶æ‰“å°å †æ ˆä¿¡æ¯å’ŒåµŒå…¥ä»£ç å‘ç°å¼‚å¸¸è¯·æ±‚è€—æ—¶æ‰“å°å †æ ˆï¼Œä¸¤ä¸ªæ–¹å¼éƒ½æ‰“å°ä¸åˆ°å¼‚å¸¸å †æ ˆ(cpuå½ªé«˜æ—¶ä¸¤ç§æ‰“å°éƒ½æ»åäº†ï¼Œæ»ååˆ°jvmæ­£å¸¸åæ‰æ‰“å°)<br><br>4.è¯·é—®ä»¥ä¸Šæœ‰å•¥å¥½çš„æ’æŸ¥æ€è·¯å—?ç›‘å¬å†…æ ¸äº‹ä»¶ï¼Ÿå¶å‘çš„ï¼Œä¸¤ä¸‰å¤©å‡ºä¸€æ¬¡ï¼Œä¹Ÿä¸å®šæ˜¯å‡ºåœ¨é›†ç¾¤å“ªå°æœºå™¨ï¼Œé‡‡é›†äº‹ä»¶æ—¥å¿—å¤ªå¤§äº†ã€‚","like_count":0,"discussions":[{"author":{"id":2967576,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/48/18/e524f344.jpg","nickname":"Soyoger","note":"","ucode":"D4D7BD0ABC4491","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585529,"discussion_content":"ç³»ç»Ÿè´Ÿè½½å¾ˆé«˜ï¼Œç¡®å®šï¼›cpuä½¿ç”¨ç‡æ‰“æ»¡ï¼Œæƒ³çŸ¥é“æ˜¯cpuçš„ us å’Œ sy åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿåˆ°åº•æ˜¯usæ»¡äº†ï¼Œè¿˜æ˜¯syæ»¡äº†ï¼Œè¿™2ä¸ªå¯¹é—®é¢˜æ’æŸ¥å¾ˆæœ‰ç”¨ã€‚ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661662559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191457,"user_name":"è‘£çš‹","can_delete":false,"product_type":"c1","uid":1902756,"ip_address":"","ucode":"2F05C3DDBC18F7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGMphabeneYRlxs1biaO9oKic6Dwgbe312561lE56V93uUHgXXAsGmK1pH18mvpElygoJh8SUtQPUA/132","comment_is_top":false,"comment_ctime":1584774830,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584774830","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":141915,"user_name":"é›ªå“¥","can_delete":false,"product_type":"c1","uid":1166268,"ip_address":"","ucode":"7AE50B31768A28","user_header":"https://static001.geekbang.org/account/avatar/00/11/cb/bc/fe68899c.jpg","comment_is_top":false,"comment_ctime":1571269017,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1571269017","product_id":100020901,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œåƒä¸‡çº§å¹¶å‘ç”¨æˆ·çš„å‹æµ‹ï¼Œä¸€èˆ¬ç”¨ä»€ä¹ˆå·¥å…·å•Šï¼Œæˆ–è€…å…¶ä»–æŠ€æœ¯æ‰‹æ®µå®ç°è¶…å¤§å¹¶å‘çš„æ€§èƒ½æµ‹è¯•","like_count":0,"discussions":[{"author":{"id":2967576,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/48/18/e524f344.jpg","nickname":"Soyoger","note":"","ucode":"D4D7BD0ABC4491","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585530,"discussion_content":"åƒä¸‡çº§çš„å¹¶å‘æµ‹è¯•ï¼Œå•æœºå¾ˆå—é™ï¼Œæœ‰å¯èƒ½å‘å‹æœºå™¨æœ¬èº«æˆä¸ºç“¶é¢ˆè€Œè¾¾ä¸åˆ°åƒä¸‡çº§çš„é‡ã€‚ä¸€èˆ¬ä¼šå¤šå°å‘å‹æœºä¸€èµ·è¿è¡Œï¼Œè€Œä¸”é‡‡ç”¨é€æ­¥æå‡é‡ï¼Œè€Œéä¸€ä¸‹å­æ‰“æ»¡ï¼›æˆ–è€…é‡‡ç”¨é›†ç¾¤å‘å‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661662725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2020720,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d5/70/93a34aa5.jpg","nickname":"Geek_76f04f","note":"","ucode":"2A3D34C303E19A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294245,"discussion_content":"abæµ‹è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595838211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88791,"user_name":"å¦‚æœ","can_delete":false,"product_type":"c1","uid":1320638,"ip_address":"","ucode":"138A3EEEE50850","user_header":"","comment_is_top":false,"comment_ctime":1556001225,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556001225","product_id":100020901,"comment_content":"DAY55ï¼Œæ‰“å¡","like_count":0},{"had_liked":false,"id":83217,"user_name":"æ¯æ—¥éƒ½æƒ³ä¸Šç­","can_delete":false,"product_type":"c1","uid":1060466,"ip_address":"","ucode":"1DE64120C8B14A","user_header":"https://static001.geekbang.org/account/avatar/00/10/2e/72/145c10db.jpg","comment_is_top":false,"comment_ctime":1554469484,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554469484","product_id":100020901,"comment_content":"å–œæ¬¢è€å¸ˆçš„è®²è§£","like_count":0},{"had_liked":false,"id":82742,"user_name":"coyang","can_delete":false,"product_type":"c1","uid":1024805,"ip_address":"","ucode":"563687E0F6A441","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a3/25/5da16c25.jpg","comment_is_top":false,"comment_ctime":1554294191,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1554294191","product_id":100020901,"comment_content":"éå¸¸å–œæ¬¢å€ªè€å¸ˆçš„ä¸“æ ï¼ŒæœŸå¾…ä¸‹ä¸€éƒ¨åˆ†å®æˆ˜æ¼”ç»ƒã€‚","like_count":0}]}