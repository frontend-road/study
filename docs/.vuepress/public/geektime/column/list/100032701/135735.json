{"id":135735,"title":"19ä¸¨æé«˜ç¯‡ç­”ç–‘ï¼šå¦‚ä½•ç†è§£TCPå››æ¬¡æŒ¥æ‰‹ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç››å»¶æ•ï¼Œè¿™é‡Œæ˜¯ç½‘ç»œç¼–ç¨‹å®æˆ˜ç¬¬19è®²ï¼Œæ¬¢è¿å›æ¥ã€‚</p><p>è¿™ä¸€ç¯‡æ–‡ç« æ˜¯æé«˜ç¯‡çš„ç­”ç–‘éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯æé«˜ç¯‡çš„æœ€åä¸€ç¯‡æ–‡ç« ã€‚éå¸¸æ„Ÿè°¢å¤§å®¶çš„ç§¯æè¯„è®ºä¸ç•™è¨€ï¼Œè®©æ¯ä¸€ç¯‡æ–‡ç« çš„ç•™è¨€åŒºéƒ½æˆä¸ºå­¦ä¹ äº’åŠ¨çš„å¥½åœ°æ–¹ã€‚åœ¨ä»Šå¤©çš„å†…å®¹é‡Œï¼Œæˆ‘å°†é’ˆå¯¹å¤§å®¶çš„é—®é¢˜åšä¸€æ¬¡é›†ä¸­å›ç­”ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ è§£å†³å‰é¢ç¢°åˆ°çš„ä¸€äº›é—®é¢˜ã€‚</p><p>è¿™éƒ¨åˆ†ï¼Œæˆ‘å°†é‡‡ç”¨Q&amp;Açš„å½¢å¼æ¥å±•å¼€ã€‚</p><h2>å¦‚ä½•ç†è§£TCPå››æ¬¡æŒ¥æ‰‹ï¼Ÿ</h2><p>TCPå»ºç«‹ä¸€ä¸ªè¿æ¥éœ€3æ¬¡æ¡æ‰‹ï¼Œè€Œç»ˆæ­¢ä¸€ä¸ªè¿æ¥åˆ™éœ€è¦å››æ¬¡æŒ¥æ‰‹ã€‚å››æ¬¡æŒ¥æ‰‹çš„æ•´ä¸ªè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/ea/b8911347d23251b6b0ca07c6ec03a1ea.png?wh=828*592\" alt=\"\"><br>\né¦–å…ˆï¼Œä¸€æ–¹åº”ç”¨ç¨‹åºè°ƒç”¨closeï¼Œæˆ‘ä»¬ç§°è¯¥æ–¹ä¸ºä¸»åŠ¨å…³é—­æ–¹ï¼Œè¯¥ç«¯çš„TCPå‘é€ä¸€ä¸ªFINåŒ…ï¼Œè¡¨ç¤ºéœ€è¦å…³é—­è¿æ¥ã€‚ä¹‹åä¸»åŠ¨å…³é—­æ–¹è¿›å…¥FIN_WAIT_1çŠ¶æ€ã€‚</p><p>æ¥ç€ï¼Œæ¥æ”¶åˆ°è¿™ä¸ªFINåŒ…çš„å¯¹ç«¯æ‰§è¡Œè¢«åŠ¨å…³é—­ã€‚è¿™ä¸ªFINç”±TCPåè®®æ ˆå¤„ç†ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒTCPåè®®æ ˆä¸ºFINåŒ…æ’å…¥ä¸€ä¸ªæ–‡ä»¶ç»“æŸç¬¦EOFåˆ°æ¥æ”¶ç¼“å†²åŒºä¸­ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡readè°ƒç”¨æ¥æ„ŸçŸ¥è¿™ä¸ªFINåŒ…ã€‚ä¸€å®šè¦æ³¨æ„ï¼Œè¿™ä¸ªEOFä¼šè¢«æ”¾åœ¨<strong>å·²æ’é˜Ÿç­‰å€™çš„å…¶ä»–å·²æ¥æ”¶çš„æ•°æ®ä¹‹å</strong>ï¼Œè¿™å°±æ„å‘³ç€æ¥æ”¶ç«¯åº”ç”¨ç¨‹åºéœ€è¦å¤„ç†è¿™ç§å¼‚å¸¸æƒ…å†µï¼Œå› ä¸ºEOFè¡¨ç¤ºåœ¨è¯¥è¿æ¥ä¸Šå†æ— é¢å¤–æ•°æ®åˆ°è¾¾ã€‚æ­¤æ—¶ï¼Œè¢«åŠ¨å…³é—­æ–¹è¿›å…¥CLOSE_WAITçŠ¶æ€ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œè¢«åŠ¨å…³é—­æ–¹å°†è¯»åˆ°è¿™ä¸ªEOFï¼Œäºæ˜¯ï¼Œåº”ç”¨ç¨‹åºä¹Ÿè°ƒç”¨closeå…³é—­å®ƒçš„å¥—æ¥å­—ï¼Œè¿™å¯¼è‡´å®ƒçš„TCPä¹Ÿå‘é€ä¸€ä¸ªFINåŒ…ã€‚è¿™æ ·ï¼Œè¢«åŠ¨å…³é—­æ–¹å°†è¿›å…¥LAST_ACKçŠ¶æ€ã€‚</p><!-- [[[read_end]]] --><p>æœ€ç»ˆï¼Œä¸»åŠ¨å…³é—­æ–¹æ¥æ”¶åˆ°å¯¹æ–¹çš„FINåŒ…ï¼Œå¹¶ç¡®è®¤è¿™ä¸ªFINåŒ…ã€‚ä¸»åŠ¨å…³é—­æ–¹è¿›å…¥TIME_WAITçŠ¶æ€ï¼Œè€Œæ¥æ”¶åˆ°ACKçš„è¢«åŠ¨å…³é—­æ–¹åˆ™è¿›å…¥CLOSEDçŠ¶æ€ã€‚ç»è¿‡2MSLæ—¶é—´ä¹‹åï¼Œä¸»åŠ¨å…³é—­æ–¹ä¹Ÿè¿›å…¥CLOSEDçŠ¶æ€ã€‚</p><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªæ–¹å‘éƒ½éœ€è¦ä¸€ä¸ªFINå’Œä¸€ä¸ªACKï¼Œå› æ­¤é€šå¸¸è¢«ç§°ä¸ºå››æ¬¡æŒ¥æ‰‹ã€‚</p><p>å½“ç„¶ï¼Œè¿™ä¸­é—´ä½¿ç”¨shutdownï¼Œæ‰§è¡Œä¸€ç«¯åˆ°å¦ä¸€ç«¯çš„åŠå…³é—­ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>å½“å¥—æ¥å­—è¢«å…³é—­æ—¶ï¼ŒTCPä¸ºå…¶æ‰€åœ¨ç«¯å‘é€ä¸€ä¸ªFINåŒ…ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ç”±åº”ç”¨è¿›ç¨‹è°ƒç”¨closeè€Œå‘ç”Ÿçš„ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªè¿›ç¨‹æ— è®ºæ˜¯æ­£å¸¸é€€å‡ºï¼ˆexitæˆ–è€…mainå‡½æ•°è¿”å›ï¼‰ï¼Œè¿˜æ˜¯éæ­£å¸¸é€€å‡ºï¼ˆæ¯”å¦‚ï¼Œæ”¶åˆ°SIGKILLä¿¡å·å…³é—­ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸å¸¸å¹²çš„kill -9ï¼‰ï¼Œæ‰€æœ‰è¯¥è¿›ç¨‹æ‰“å¼€çš„æè¿°ç¬¦éƒ½ä¼šè¢«ç³»ç»Ÿå…³é—­ï¼Œè¿™ä¹Ÿå¯¼è‡´TCPæè¿°ç¬¦å¯¹åº”çš„è¿æ¥ä¸Šå‘å‡ºä¸€ä¸ªFINåŒ…ã€‚</p><p>æ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ï¼Œä»»ä½•ä¸€ç«¯éƒ½å¯ä»¥å‘èµ·ä¸»åŠ¨å…³é—­ã€‚å¤§å¤šæ•°çœŸå®æƒ…å†µæ˜¯å®¢æˆ·ç«¯æ‰§è¡Œä¸»åŠ¨å…³é—­ï¼Œä½ å¯èƒ½ä¸ä¼šæƒ³åˆ°çš„æ˜¯ï¼ŒHTTP/1.0å´æ˜¯ç”±æœåŠ¡å™¨å‘èµ·ä¸»åŠ¨å…³é—­çš„ã€‚</p><h2>æœ€å¤§åˆ†ç»„ MSLæ˜¯TCP åˆ†ç»„åœ¨ç½‘ç»œä¸­å­˜æ´»çš„æœ€é•¿æ—¶é—´å—ï¼Ÿ</h2><p>MSLæ˜¯ä»»ä½•IPæ•°æ®æŠ¥èƒ½å¤Ÿåœ¨å› ç‰¹ç½‘ä¸­å­˜æ´»çš„æœ€é•¿æ—¶é—´ã€‚å…¶å®å®ƒçš„å®ç°ä¸æ˜¯é è®¡æ—¶å™¨æ¥å®Œæˆçš„ï¼Œåœ¨æ¯ä¸ªæ•°æ®æŠ¥é‡Œéƒ½åŒ…å«æœ‰ä¸€ä¸ªè¢«ç§°ä¸ºTTLï¼ˆtime to liveï¼‰çš„8ä½å­—æ®µï¼Œå®ƒçš„æœ€å¤§å€¼ä¸º255ã€‚TTLå¯è¯‘ä¸ºâ€œç”Ÿå­˜æ—¶é—´â€ï¼Œè¿™ä¸ªç”Ÿå­˜æ—¶é—´ç”±æºä¸»æœºè®¾ç½®åˆå§‹å€¼ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªIPæ•°æ®æŠ¥å¯ä»¥ç»è¿‡çš„æœ€å¤§è·³è·ƒæ•°ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œå°±ç›¸å½“äºç»è¿‡äº†ä¸€è·³ï¼Œå®ƒçš„å€¼å°±å‡1ï¼Œå½“æ­¤å€¼å‡ä¸º0æ—¶ï¼Œåˆ™æ‰€åœ¨çš„è·¯ç”±å™¨ä¼šå°†å…¶ä¸¢å¼ƒï¼ŒåŒæ—¶å‘é€ICMPæŠ¥æ–‡é€šçŸ¥æºä¸»æœºã€‚RFC793ä¸­è§„å®šMSLçš„æ—¶é—´ä¸º2åˆ†é’Ÿï¼ŒLinuxå®é™…è®¾ç½®ä¸º30ç§’ã€‚</p><h2>å…³äºlistenå‡½æ•°ä¸­å‚æ•°backlogçš„é‡Šä¹‰é—®é¢˜</h2><p>æˆ‘ä»¬è¯¥å¦‚ä½•ç†è§£listenå‡½æ•°ä¸­çš„å‚æ•°backlogï¼Ÿå¦‚æœbacklogè¡¨ç¤ºçš„æ˜¯æœªå®Œæˆè¿æ¥é˜Ÿåˆ—çš„å¤§å°ï¼Œé‚£ä¹ˆå·²å®Œæˆè¿æ¥çš„é˜Ÿåˆ—çš„å¤§å°æœ‰é™åˆ¶å—ï¼Ÿå¦‚æœéƒ½æ˜¯å·²ç»å»ºç«‹è¿æ¥çš„çŠ¶æ€ï¼Œé‚£ä¹ˆå¹¶å‘å–å†³äºå·²å®Œæˆè¿æ¥çš„é˜Ÿåˆ—çš„å¤§å°å—ï¼Ÿ</p><p>backlogçš„å€¼å«ä¹‰ä»æ¥å°±æ²¡æœ‰è¢«ä¸¥æ ¼å®šä¹‰è¿‡ã€‚åŸå…ˆLinuxå®ç°ä¸­ï¼Œbacklogå‚æ•°å®šä¹‰äº†è¯¥å¥—æ¥å­—å¯¹åº”çš„æœªå®Œæˆè¿æ¥é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ ï¼ˆpending connections)ã€‚å¦‚æœä¸€ä¸ªè¿æ¥åˆ°è¾¾æ—¶ï¼Œè¯¥é˜Ÿåˆ—å·²æ»¡ï¼Œå®¢æˆ·ç«¯å°†ä¼šæ¥æ”¶ä¸€ä¸ªECONNREFUSEDçš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœæ”¯æŒé‡ä¼ ï¼Œè¯¥è¯·æ±‚å¯èƒ½ä¼šè¢«å¿½ç•¥ï¼Œä¹‹åä¼šè¿›è¡Œä¸€æ¬¡é‡ä¼ ã€‚</p><p>ä»Linux 2.2å¼€å§‹ï¼Œbacklogçš„å‚æ•°å†…æ ¸æœ‰äº†æ–°çš„è¯­ä¹‰ï¼Œå®ƒç°åœ¨å®šä¹‰çš„æ˜¯å·²å®Œæˆè¿æ¥é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ï¼Œè¡¨ç¤ºçš„æ˜¯å·²å»ºç«‹çš„è¿æ¥ï¼ˆestablished connectionï¼‰ï¼Œæ­£åœ¨ç­‰å¾…è¢«æ¥æ”¶ï¼ˆacceptè°ƒç”¨è¿”å›ï¼‰ï¼Œè€Œä¸æ˜¯åŸå…ˆçš„æœªå®Œæˆé˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ã€‚ç°åœ¨ï¼Œæœªå®Œæˆé˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦å€¼å¯ä»¥é€šè¿‡ /proc/sys/net/ipv4/tcp_max_syn_backlogå®Œæˆä¿®æ”¹ï¼Œé»˜è®¤å€¼ä¸º128ã€‚</p><p>è‡³äºå·²å®Œæˆè¿æ¥é˜Ÿåˆ—ï¼Œå¦‚æœå£°æ˜çš„backlogå‚æ•°æ¯” /proc/sys/net/core/somaxconnçš„å‚æ•°è¦å¤§ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨æˆ‘ä»¬å£°æ˜çš„é‚£ä¸ªå€¼ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªé»˜è®¤çš„å€¼ä¸º128ã€‚æ³¨æ„åœ¨Linux 2.4.25ä¹‹å‰ï¼Œè¿™ä¸ªå€¼æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ä¸€ä¸ªå›ºå®šå€¼ï¼Œå¤§å°ä¹Ÿæ˜¯128ã€‚</p><p>è®¾è®¡è‰¯å¥½çš„ç¨‹åºï¼Œåœ¨128å›ºå®šå€¼çš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¯ä»¥æ”¯æŒæˆåƒä¸Šä¸‡çš„å¹¶å‘è¿æ¥çš„ï¼Œè¿™å–å†³äºI/Oåˆ†å‘çš„æ•ˆç‡ï¼Œä»¥åŠå¤šçº¿ç¨‹ç¨‹åºçš„è®¾è®¡ã€‚åœ¨åé¢çš„æ€§èƒ½ç¯‡é‡Œï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯è®¾è®¡è¿™æ ·çš„ç¨‹åºã€‚</p><h2>UDPè¿æ¥å’Œæ–­å¼€å¥—æ¥å­—çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</h2><p>UDPè¿æ¥å¥—æ¥å­—ä¸æ˜¯å‘èµ·è¿æ¥è¯·æ±‚çš„è¿‡ç¨‹ï¼Œè€Œæ˜¯è®°å½•ç›®çš„åœ°å€å’Œç«¯å£åˆ°å¥—æ¥å­—çš„æ˜ å°„å…³ç³»ã€‚</p><p>æ–­å¼€å¥—æ¥å­—åˆ™ç›¸åï¼Œå°†åˆ é™¤åŸæ¥è®°å½•çš„æ˜ å°„å…³ç³»ã€‚</p><h2>åœ¨UDPä¸­ä¸è¿›è¡Œconnectï¼Œä¸ºä»€ä¹ˆå®¢æˆ·ç«¯ä¼šæ”¶åˆ°ä¿¡æ¯ï¼Ÿ</h2><p>æœ‰äººè¯´ï¼Œå¦‚æœæŒ‰ç…§æˆ‘åœ¨æ–‡ç« ä¸­çš„è¯´æ³•ï¼ŒUDPåªæœ‰connectæ‰å»ºç«‹socketå’ŒIPåœ°å€çš„æ˜ å°„ï¼Œé‚£ä¹ˆå¦‚æœä¸è¿›è¡Œconnectï¼Œæ”¶åˆ°ä¿¡æ¯åå†…æ ¸åˆå¦‚ä½•æŠŠæ•°æ®äº¤ç»™å¯¹åº”çš„socketï¼Ÿ</p><p>è¿™ä¸ªé—®é¢˜éå¸¸æœ‰æ„æ€ã€‚æˆ‘åˆšåˆšçœ‹åˆ°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œå¿ƒé‡Œä¹Ÿåœ¨æƒ³ï¼Œæ˜¯å•Šï¼Œæˆ‘æ˜¯ä¸æ˜¯è¯´é”™äº†ï¼Ÿ</p><p>å…¶å®å‘¢ï¼Œè¿™å¯¹åº”äº†ä¸¤ä¸ªä¸åŒçš„APIåœºæ™¯ã€‚</p><p>ç¬¬ä¸€ä¸ªåœºæ™¯å°±æ˜¯æˆ‘è¿™é‡Œè®¨è®ºçš„connectåœºæ™¯ï¼Œåœ¨è¿™ä¸ªåœºæ™¯é‡Œï¼Œæˆ‘ä»¬è®¨è®ºçš„æ˜¯ICMPæŠ¥æ–‡å’Œsocketä¹‹é—´çš„å®šä½ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒICMPæŠ¥æ–‡å‘é€çš„æ˜¯ä¸€ä¸ªä¸å¯è¾¾çš„ä¿¡æ¯ï¼Œä¸å¯è¾¾çš„ä¿¡æ¯æ˜¯é€šè¿‡<strong>ç›®çš„åœ°å€å’Œç«¯å£</strong>æ¥åŒºåˆ†çš„ï¼Œå¦‚æœæ²¡æœ‰connectæ“ä½œï¼Œ<strong>ç›®çš„åœ°å€å’Œç«¯å£</strong>å°±æ²¡æœ‰åŠæ³•å’Œsocketå¥—æ¥å­—è¿›è¡Œå¯¹åº”ï¼Œæ‰€ä»¥ï¼Œå³ä½¿æ”¶åˆ°äº†ICMPæŠ¥æ–‡ï¼Œå†…æ ¸ä¹Ÿæ²¡æœ‰åŠæ³•é€šçŸ¥åˆ°å¯¹åº”çš„åº”ç”¨ç¨‹åºï¼Œå‘Šè¯‰å®ƒè¿æ¥åœ°å€ä¸å¯è¾¾ã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨ä¸connectçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯åˆå¯ä»¥æ”¶åˆ°æœåŠ¡å™¨å›æ˜¾çš„ä¿¡æ¯äº†ï¼Ÿ</p><p>è¿™å°±æ¶‰åŠåˆ°äº†ç¬¬äºŒä¸ªåœºæ™¯ï¼Œä¹Ÿå°±æ˜¯æŠ¥æ–‡å‘é€çš„åœºæ™¯ã€‚æ³¨æ„æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œå…ˆé€šè¿‡recvfromå‡½æ•°è°ƒç”¨è·å–äº†å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£ä¿¡æ¯ï¼Œè¿™å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºUDPæŠ¥æ–‡é‡Œé¢åŒ…å«äº†è¿™éƒ¨åˆ†ä¿¡æ¯ã€‚ç„¶åæˆ‘ä»¬çœ‹åˆ°æœåŠ¡å™¨ç«¯åˆé€šè¿‡è°ƒç”¨sendtoå‡½æ•°ï¼ŒæŠŠå®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£ä¿¡æ¯å‘Šè¯‰äº†å†…æ ¸åè®®æ ˆï¼Œå¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œä¹‹åå‘é€çš„UDPæŠ¥æ–‡å°±å¸¦ä¸Šäº†<strong>å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£ä¿¡æ¯</strong>ï¼Œé€šè¿‡å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£ä¿¡æ¯ï¼Œå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„å¥—æ¥å­—å’Œåº”ç”¨ç¨‹åºï¼Œå®Œæˆæ•°æ®çš„æ”¶å‘ã€‚</p><pre><code>//æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œå…ˆé€šè¿‡recvfromå‡½æ•°è°ƒç”¨è·å–äº†å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£ä¿¡æ¯\nint n = recvfrom(socket_fd, message, MAXLINE, 0, (struct sockaddr *) &amp;client_addr, &amp;client_len);\nmessage[n] = 0;\nprintf(&quot;received %d bytes: %s\\n&quot;, n, message);\n\nchar send_line[MAXLINE];\nsprintf(send_line, &quot;Hi, %s&quot;, message);\n\n//æœåŠ¡å™¨ç«¯ç¨‹åºè°ƒç”¨sendå‡½æ•°ï¼ŒæŠŠå®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£ä¿¡æ¯å‘Šè¯‰äº†å†…æ ¸\nsendto(socket_fd, send_line, strlen(send_line), 0, (struct sockaddr *) &amp;client_addr, client_len);\n</code></pre><p>ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„connectçš„ä½œç”¨æ˜¯è®°å½•<strong>å®¢æˆ·ç«¯ç›®çš„åœ°å€å’Œç«¯å£â€“å¥—æ¥å­—</strong>çš„å…³ç³»ï¼Œè€Œä¹‹æ‰€ä»¥èƒ½æ­£ç¡®æ”¶åˆ°ä»æœåŠ¡å™¨ç«¯å‘é€çš„æŠ¥æ–‡ï¼Œé‚£æ˜¯å› ä¸ºç³»ç»Ÿå·²ç»è®°å½•äº†<strong>å®¢æˆ·ç«¯æºåœ°å€å’Œç«¯å£â€“å¥—æ¥å­—</strong>çš„æ˜ å°„å…³ç³»ã€‚</p><h2>æˆ‘ä»¬æ˜¯å¦å¯ä»¥å¯¹ä¸€ä¸ª UDPå¥—æ¥å­—è¿›è¡Œå¤šæ¬¡connectçš„æ“ä½œ?</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºTCPå¥—æ¥å­—ï¼Œconnectåªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚ä½†æ˜¯ï¼Œå¯¹ä¸€ä¸ªUDPå¥—æ¥å­—æ¥è¯´ï¼Œè¿›è¡Œå¤šæ¬¡connectæ“ä½œæ˜¯è¢«å…è®¸çš„ï¼Œè¿™æ ·ä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ã€‚</p><p>ç¬¬ä¸€ä¸ªä½œç”¨æ˜¯å¯ä»¥é‡æ–°æŒ‡å®šæ–°çš„IPåœ°å€å’Œç«¯å£å·ï¼›ç¬¬äºŒä¸ªä½œç”¨æ˜¯å¯ä»¥æ–­å¼€ä¸€ä¸ªå·²è¿æ¥çš„å¥—æ¥å­—ã€‚ä¸ºäº†æ–­å¼€ä¸€ä¸ªå·²è¿æ¥çš„UDPå¥—æ¥å­—ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨connectæ—¶ï¼Œè°ƒç”¨æ–¹éœ€è¦æŠŠå¥—æ¥å­—åœ°å€ç»“æ„çš„åœ°å€æ—æˆå‘˜è®¾ç½®ä¸ºAF_UNSPECã€‚</p><h2>ç¬¬11è®²ä¸­ç¨‹åºå’Œæ—¶åºå›¾çš„è§£æƒ‘</h2><p>åœ¨11è®²ä¸­ï¼Œæˆ‘ä»¬è®²äº†å…³é—­è¿æ¥çš„å‡ ç§æ–¹å¼ï¼Œæœ‰åŒå­¦å¯¹è¿™ä¸€ç¯‡æ–‡ç« ä¸­çš„ç¨‹åºå’Œæ—¶åºå›¾å­˜åœ¨ç–‘æƒ‘ï¼Œå¹¶æå‡ºäº†ä¸‹é¢å‡ ä¸ªé—®é¢˜ï¼š</p><ol>\n<li>ä»£ç è¿è¡Œç»“æœæ˜¯å…ˆæ˜¾ç¤ºhi data1ï¼Œä¹‹åæ‰æ¥æ”¶åˆ°æ ‡å‡†è¾“å…¥çš„closeï¼Œä¸ºä»€ä¹ˆæ—¶åºå›¾ä¸­ç”»çš„æ˜¯å…ˆcloseæ‰æ¥æ”¶åˆ°hi data1ï¼Ÿ</li>\n<li>å½“ä¸€æ–¹ä¸»åŠ¨closeä¹‹åï¼Œå¦ä¸€æ–¹å‘é€æ•°æ®çš„æ—¶å€™æ”¶åˆ°RSTã€‚ä¸»åŠ¨æ–¹ç¼“å†²åŒºä¼šæŠŠè¿™ä¸ªæ•°æ®ä¸¢å¼ƒå—ï¼Ÿè¿™æ ·çš„è¯ï¼Œåº”ç”¨å±‚åº”è¯¥è¯»ä¸åˆ°äº†å§ï¼Ÿ</li>\n<li>ä»£ç ä¸­SIGPIPEçš„ä½œç”¨ä¸æ˜¯å¿½ç•¥å—ï¼Ÿä¸ºä»€ä¹ˆæœåŠ¡å™¨ç«¯ä¼šé€€å‡ºï¼Ÿ</li>\n<li>ä¸»åŠ¨è°ƒç”¨socketçš„é‚£æ–¹å…³é—­äº†å†™ç«¯ï¼Œä½†æ˜¯è¿˜æ²¡å…³é—­è¯»ç«¯ï¼Œè¿™æ—¶å€™socketå†è¯»åˆ°æ•°æ®æ˜¯ä¸æ˜¯å°±æ˜¯RSTï¼Ÿç„¶åå†SIGPIPEï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œä¸ºä»€ä¹ˆä¸ä¸€æ¬¡æ€§æŠŠè¯»å†™å…¨éƒ¨å…³é—­å‘¢ï¼Ÿ</li>\n</ol><p>æˆ‘è¿˜æ˜¯å†ä»”ç»†è®²ä¸€ä¸‹è¿™ä¸ªç¨‹åºå’Œæ—¶åºå›¾ã€‚</p><p>é¦–å…ˆå›ç­”é—®é¢˜1ã€‚é’ˆå¯¹closeè¿™ä¸ªä¾‹å­ï¼Œæ—¶åºå›¾é‡Œç”»çš„closeè¡¨ç¤ºçš„æ˜¯å®¢æˆ·ç«¯å‘èµ·çš„closeè°ƒç”¨ã€‚</p><p>å…³äºé—®é¢˜2ï¼Œâ€œHi, data1â€ç¡®å®æ˜¯ä¸åº”è¯¥è¢«æ¥æ”¶åˆ°çš„ï¼Œè¿™ä¸ªæ•°æ®æŠ¥å³ä½¿å‘é€å‡ºå»ä¹Ÿä¼šæ”¶åˆ°RSTå›æ‰§ï¼Œåº”ç”¨å±‚æ˜¯è¯»ä¸åˆ°çš„ã€‚</p><p>å…³äºé—®é¢˜3ä¸­SIGPIPEçš„ä½œç”¨ï¼Œäº‹å®ä¸Šï¼Œé»˜è®¤çš„SIGPIPEå¿½ç•¥è¡Œä¸ºå°±æ˜¯é€€å‡ºç¨‹åºï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼Œå½“ç„¶ï¼Œå®é™…ç¨‹åºè¿˜æ˜¯è¦åšä¸€äº›æ¸…ç†å·¥ä½œçš„ã€‚</p><p>é—®é¢˜4çš„ç†è§£æ˜¯é”™è¯¯çš„ã€‚ç¬¬äºŒä¸ªä¾‹å­ä¹Ÿæ˜¾ç¤ºäº†ï¼Œå¦‚æœä¸»åŠ¨å…³é—­çš„ä¸€æ–¹è°ƒç”¨shutdownå…³é—­ï¼Œæ²¡æœ‰å…³é—­è¯»è¿™ä¸€ç«¯ï¼Œä¸»åŠ¨å…³é—­çš„ä¸€æ–¹å¯ä»¥è¯»åˆ°å¯¹ç«¯çš„æ•°æ®ï¼Œæ³¨æ„è¿™ä¸ªæ—¶å€™ä¸»åŠ¨å…³é—­è¿æ¥çš„ä¸€æ–¹æ˜¯åœ¨ä½¿ç”¨readæ–¹æ³•è¿›è¡Œè¯»æ“ä½œï¼Œè€Œä¸æ˜¯writeå†™æ“ä½œï¼Œä¸ä¼šæœ‰RSTçš„å‘ç”Ÿï¼Œæ›´ä¸ä¼šæœ‰SIGPIPEçš„å‘ç”Ÿã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/9a/f283b804c7e33e25a900fedc8c36f09a.png?wh=4152*3256\" alt=\"\"></p><h2>æ€»ç»“</h2><p>ä»¥ä¸Šå°±æ˜¯æé«˜ç¯‡ä¸­ä¸€äº›åŒå­¦çš„ç–‘é—®ã€‚æˆ‘ä»¬å¸¸è¯´ï¼Œå­¦é—®å­¦é—®ï¼Œæœ‰å­¦æ‰æœ‰é—®ã€‚æˆ‘å¸Œæœ›é€šè¿‡ä»Šå¤©çš„ç­”ç–‘å¯ä»¥è®©ä½ åŠ æ·±å¯¹æ–‡ç« çš„ç†è§£ï¼Œä¸ºåé¢çš„æ¨¡å—åšå‡†å¤‡ã€‚</p><p>è¿™ç¯‡æ–‡ç« ä¹‹åï¼Œæˆ‘ä»¬å°±å°†è¿›å…¥åˆ°ä¸“æ ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ€§èƒ½ç¯‡å’Œå®æˆ˜ç¯‡äº†ï¼Œåœ¨æ€§èƒ½ç¯‡å’Œå®æˆ˜ç¯‡é‡Œï¼Œæˆ‘ä»¬å°†ä¼šä½¿ç”¨åˆ°ä¹‹å‰å­¦åˆ°çš„çŸ¥è¯†ï¼Œé€æ¸æ‰“é€ ä¸€ä¸ªé«˜æ€§èƒ½çš„ç½‘ç»œç¨‹åºæ¡†æ¶ï¼Œä½ ï¼Œå‡†å¤‡å¥½äº†å—ï¼Ÿ</p><p>å¦‚æœä½ è§‰å¾—ä»Šå¤©çš„ç­”ç–‘å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿æŠŠå®ƒè½¬å‘ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p>","neighbors":{"left":{"article_title":"18 | é˜²äººä¹‹å¿ƒä¸å¯æ— ï¼šæ£€æŸ¥æ•°æ®çš„æœ‰æ•ˆæ€§","id":134606},"right":{"article_title":"æœŸä¸­å¤§ä½œä¸šä¸¨åŠ¨æ‰‹ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„ç¨‹åºå§ï¼","id":136549}},"comments":[{"had_liked":false,"id":133061,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1568342524,"is_pvip":false,"replies":[{"id":"51624","content":" TTLä¸MSLæ˜¯æœ‰å…³ç³»çš„ä½†ä¸æ˜¯ç®€å•çš„ç›¸ç­‰çš„å…³ç³»ï¼ŒMSLè¦å¤§äºç­‰äºTTLã€‚<br><br>è®¾å¤‡åœ¨å¤„ç†TTLçš„æ—¶å€™ï¼Œæ˜¯éœ€è¦å¤„ç†æ—¶é—´çš„ï¼Œæ¯æ¬¡å¤„ç†TTLæ—¶è¿™ä¸ªå­—æ®µå°±éƒ½åº”è¯¥è¢«å‡å°‘ï¼Œæ¥ååº”èŠ±åœ¨å¤„ç†æŠ¥æ–‡ä¸Šçš„æ—¶é—´ã€‚æ¯”å¦‚è¯´å¤„ç†äº†1ç§’å‡1ï¼Œå¤„ç†äº†2ç§’å‡2ã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯TTLä¸º30çš„è‚¯å®šæ´»ä¸è¿‡30ç§’ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568887460,"ip_address":"","comment_id":133061,"utype":1}],"discussion_count":9,"race_medal":0,"score":"78877753852","product_id":100032701,"comment_content":"MSLçš„å€¼æ€ä¹ˆå’ŒTTLå¯¹åº”çš„å•Šï¼Ÿæ¯”å¦‚MSLè®¾ç½®ä¸º30ç§’ï¼Œé‚£æ€ä¹ˆè®¡ç®—å‡ºTTLçš„å€¼å‘¢ï¼Ÿæ€ä¹ˆä¿è¯ä¸€ä¸ªæŠ¥æ–‡åœ¨ç½‘ç»œä¸­çœŸçš„å­˜æ´»ä¸è¶…è¿‡30ç§’ï¼Ÿ","like_count":18,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467245,"discussion_content":" TTLä¸MSLæ˜¯æœ‰å…³ç³»çš„ä½†ä¸æ˜¯ç®€å•çš„ç›¸ç­‰çš„å…³ç³»ï¼ŒMSLè¦å¤§äºç­‰äºTTLã€‚\n\nè®¾å¤‡åœ¨å¤„ç†TTLçš„æ—¶å€™ï¼Œæ˜¯éœ€è¦å¤„ç†æ—¶é—´çš„ï¼Œæ¯æ¬¡å¤„ç†TTLæ—¶è¿™ä¸ªå­—æ®µå°±éƒ½åº”è¯¥è¢«å‡å°‘ï¼Œæ¥ååº”èŠ±åœ¨å¤„ç†æŠ¥æ–‡ä¸Šçš„æ—¶é—´ã€‚æ¯”å¦‚è¯´å¤„ç†äº†1ç§’å‡1ï¼Œå¤„ç†äº†2ç§’å‡2ã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯TTLä¸º30çš„è‚¯å®šæ´»ä¸è¿‡30ç§’ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568887460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073027,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5f/83/bb728e53.jpg","nickname":"Douglas","note":"","ucode":"CFDE3D76B9DAE6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":116577,"discussion_content":"è¿™å—ç¡®å®æ²¡æœ‰è®²æ˜ç™½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578063729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2948566,"avatar":"","nickname":"Geek_1696dd","note":"","ucode":"DEC1F02116F5F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591395,"discussion_content":"IPæ•°æ®æŠ¥çš„TTLå­—æ®µå€¼èƒ½å¤Ÿä¿è¯ç»è¿‡é‚£ä¹ˆå¤šè·³IPæ•°æ®æŠ¥ä¸¢å¼ƒï¼Œæ‰€ä»¥æ ¹æ®TTLå€¼èƒ½ä¼°ç®—å‡ºIPæ•°æ®æŠ¥çš„æœ€é•¿ç”Ÿå­˜æ—¶é—´ï¼Œè¿‘ä¼¼å°±æ˜¯æŠ¥æ–‡æ®µçš„æœ€é•¿ç”Ÿå­˜æ—¶é—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666579999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1685884,"avatar":"https://static001.geekbang.org/account/avatar/00/19/b9/7c/afe6f1eb.jpg","nickname":"vv_test","note":"","ucode":"1D164B2F034E2B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378999,"discussion_content":"æ–‡ç« ä¸­è¯´ï¼šâ€œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œå°±ç›¸å½“äºç»è¿‡äº†ä¸€è·³ï¼Œå®ƒçš„å€¼å°±å‡ 1â€\næˆ‘çš„ç†è§£è¿™é‡Œçš„è·¯ç”±å™¨å°±æ˜¯å¤„ç†æŠ¥æ–‡çš„ä¸€ç§ï¼Œé‚£å®ƒå…¶å®å¹¶ä¸æ˜¯ä¸€å®šæ˜¯å‡1å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623583882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445744,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/70/f59db672.jpg","nickname":"æ§‘Â·å…ˆç”Ÿ","note":"","ucode":"897F0475592E3A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360727,"discussion_content":"ä¹Ÿæ²¡æœ‰çœ‹æ˜ç™½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616509339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333676,"discussion_content":"åº”è¯¥æ˜¯æ ¹æ®ä¸€ä¸ªç»Ÿè®¡ä¿¡æ¯æ¥ç¡®å®š TTL MSLä¹‹é—´çš„å…³ç³»ï¼Œè¿™é‡Œ ä¸ç”¨ ä¹Ÿä¸éœ€è¦éå¸¸ä¸¥æ ¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607591032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130666,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/aa/49bbb007.jpg","nickname":"Ğ½Ã¡Ğ¿ã®ã‚›","note":"","ucode":"834FA877EFBAF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299994,"discussion_content":"ç›¸å½“äºæ˜¯é€šè¿‡æ§åˆ¶TTLæ¥è¿‘ä¼¼é™åˆ¶åœ¨MSLçš„æ—¶é—´èŒƒå›´å†…å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597903181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/af/32/74465c5e.jpg","nickname":"Karl","note":"","ucode":"7938C53C6D9387","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":11107,"discussion_content":"è¿™ç‚¹æˆ‘ä¹Ÿæ²¡çœ‹æ˜ç™½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568359988,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1188710,"avatar":"https://static001.geekbang.org/account/avatar/00/12/23/66/413c0bb5.jpg","nickname":"LDxy","note":"","ucode":"956432CE7B7761","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1027890,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/af/32/74465c5e.jpg","nickname":"Karl","note":"","ucode":"7938C53C6D9387","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":11208,"discussion_content":"åº”è¯¥æ˜¯æ²¡æœ‰å¯¹åº”å…³ç³»å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568369030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":11107,"ip_address":""},"score":11208,"extra":""}]}]},{"had_liked":false,"id":154602,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1574490450,"is_pvip":false,"replies":[{"id":"60390","content":"IPæ•°æ®æŠ¥ç»è¿‡å¤šå°‘è·¯ç”±å™¨è¿™ä¸ªæ˜¯æ— æ³•ç¡®å®šçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1575189499,"ip_address":"","comment_id":154602,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18754359634","product_id":100032701,"comment_content":"MSL æ˜¯ä»»ä½• IP æ•°æ®æŠ¥èƒ½å¤Ÿåœ¨å› ç‰¹ç½‘ä¸­å­˜æ´»çš„æœ€é•¿æ—¶é—´ã€‚å…¶å®å®ƒçš„å®ç°ä¸æ˜¯é è®¡æ—¶å™¨æ¥å®Œæˆçš„ï¼Œåœ¨æ¯ä¸ªæ•°æ®æŠ¥é‡Œéƒ½åŒ…å«æœ‰ä¸€ä¸ªè¢«ç§°ä¸º TTLï¼ˆtime to liveï¼‰çš„ 8 ä½å­—æ®µï¼Œå®ƒçš„æœ€å¤§å€¼ä¸º 255ã€‚TTL å¯è¯‘ä¸ºâ€œç”Ÿå­˜æ—¶é—´â€ï¼Œè¿™ä¸ªç”Ÿå­˜æ—¶é—´ç”±æºä¸»æœºè®¾ç½®åˆå§‹å€¼ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª IP æ•°æ®æŠ¥å¯ä»¥ç»è¿‡çš„æœ€å¤§è·³è·ƒæ•°ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œå°±ç›¸å½“äºç»è¿‡äº†ä¸€è·³ï¼Œå®ƒçš„å€¼å°±å‡ 1ï¼Œå½“æ­¤å€¼å‡ä¸º 0 æ—¶ï¼Œåˆ™æ‰€åœ¨çš„è·¯ç”±å™¨ä¼šå°†å…¶ä¸¢å¼ƒï¼ŒåŒæ—¶å‘é€ ICMP æŠ¥æ–‡é€šçŸ¥æºä¸»æœº<br><br>è¿™æ˜¯å¦æ„å‘³ç€ä¸€ä¸ªIPæ•°æ®æŠ¥ä¸å¯èƒ½ç»è¿‡255ä¸ªè·¯ç”±å™¨ï¼Ÿ<br>è¯·é—®ä¸€ä¸ªIPæ•°æ®æŠ¥ç»è¿‡å¤šå°‘è·¯ç”±å™¨ï¼Œè¿™ä¸ªç”±è°å†³å®šï¼Ÿæ€ä¹ˆå†³å®šï¼Ÿå’Œç½‘ç»œè·ç¦»è·ç¦»æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ<br><br>ğŸ˜…æ„Ÿè§‰è€å¸ˆçš„å›ç­”å’Œé—®é¢˜ï¼Œæ²¡æœ‰å®Œå…¨çš„å¯¹ä¸Šï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475519,"discussion_content":"IPæ•°æ®æŠ¥ç»è¿‡å¤šå°‘è·¯ç”±å™¨è¿™ä¸ªæ˜¯æ— æ³•ç¡®å®šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575189499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239397,"user_name":"Geek_f8c379","can_delete":false,"product_type":"c1","uid":2018685,"ip_address":"","ucode":"6CE8014B024FEB","user_header":"","comment_is_top":false,"comment_ctime":1596523246,"is_pvip":false,"replies":[{"id":"89391","content":"å› ä¸ºä½ ç»™SIGPIPEä¿¡å·è®¾ç½®äº†SIG_IGNï¼Œæ‰€ä»¥æ˜¯å¿½ç•¥ä¿¡å·ã€‚æˆ‘è¯´çš„æ˜¯å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤çš„SIGPIPEå¤„ç†çš„æ–¹å¼å³ä¸ºé€€å‡ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1597639796,"ip_address":"","comment_id":239397,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14481425134","product_id":100032701,"comment_content":"signal(SIGPIPE, SIG_IGN); å®é™…ä¸Šæ˜¯å¿½ç•¥ä¿¡å· è€Œä¸æ˜¯ æŒ‰ç…§é»˜è®¤çš„ä¿¡å·å¤„ç†ç¨‹åºå³é€€å‡º","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503094,"discussion_content":"å› ä¸ºä½ ç»™SIGPIPEä¿¡å·è®¾ç½®äº†SIG_IGNï¼Œæ‰€ä»¥æ˜¯å¿½ç•¥ä¿¡å·ã€‚æˆ‘è¯´çš„æ˜¯å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤çš„SIGPIPEå¤„ç†çš„æ–¹å¼å³ä¸ºé€€å‡ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597639796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209500,"user_name":"æ‰©æ•£æ€§ç™¾ä¸‡å’¸é¢åŒ…","can_delete":false,"product_type":"c1","uid":1905171,"ip_address":"","ucode":"6D703D51553B42","user_header":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","comment_is_top":false,"comment_ctime":1587560013,"is_pvip":false,"replies":[{"id":"78417","content":"è¿™æ˜¯ä¸¤ä¸ªå±‚é¢çš„ä¸œè¥¿ï¼Œå› ä¸ºæœ‰äº†TIME_WAITæ‰€ä»¥æ‰å¯¼è‡´ä¸è®¾ç½®SO_REUSEADDRçš„æœåŠ¡ç«¯ç¨‹åºä¼šå‡ºç°&quot;Address already in use&quot;çš„é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æœåŠ¡ç«¯ç¨‹åºbindä¹‹å‰ä¸€å®šè®°å¾—è¦è®¾ç½®SO_REUSEADDRã€‚<br><br>ä½†æ˜¯TIME_WAITæœ¬èº«è¿˜æ˜¯å¾ˆæœ‰ä»·å€¼çš„ï¼ŒTIME_WAIT çš„å¼•å…¥æ˜¯ä¸ºäº†è®© TCP æŠ¥æ–‡å¾—ä»¥è‡ªç„¶æ¶ˆå¤±ï¼ŒåŒæ—¶ä¸ºäº†è®©è¢«åŠ¨å…³é—­æ–¹èƒ½å¤Ÿæ­£å¸¸å…³é—­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1587804687,"ip_address":"","comment_id":209500,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10177494605","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆï¼ŒSO_REUSEADDRè™½è¯´æ˜¯é‡ç”¨TIME_WAITçš„socketï¼Œä¸ºä»€ä¹ˆä¸èƒ½ä½œä¸ºTIME_WAITçš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿæœ¬è´¨ä¸Šæ˜¯è§£å†³äº†ç«¯å£å ç”¨é—®é¢˜ï¼Œè€ŒTIME_WAITçš„ä¸»è¦å¼Šç«¯ä¸å°±åœ¨ä¸ç«¯å£å ç”¨å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492814,"discussion_content":"è¿™æ˜¯ä¸¤ä¸ªå±‚é¢çš„ä¸œè¥¿ï¼Œå› ä¸ºæœ‰äº†TIME_WAITæ‰€ä»¥æ‰å¯¼è‡´ä¸è®¾ç½®SO_REUSEADDRçš„æœåŠ¡ç«¯ç¨‹åºä¼šå‡ºç°&amp;quot;Address already in use&amp;quot;çš„é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æœåŠ¡ç«¯ç¨‹åºbindä¹‹å‰ä¸€å®šè®°å¾—è¦è®¾ç½®SO_REUSEADDRã€‚\n\nä½†æ˜¯TIME_WAITæœ¬èº«è¿˜æ˜¯å¾ˆæœ‰ä»·å€¼çš„ï¼ŒTIME_WAIT çš„å¼•å…¥æ˜¯ä¸ºäº†è®© TCP æŠ¥æ–‡å¾—ä»¥è‡ªç„¶æ¶ˆå¤±ï¼ŒåŒæ—¶ä¸ºäº†è®©è¢«åŠ¨å…³é—­æ–¹èƒ½å¤Ÿæ­£å¸¸å…³é—­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587804687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133852,"user_name":"é£ç¾½æ˜Ÿæ³‰","can_delete":false,"product_type":"c1","uid":1198377,"ip_address":"","ucode":"CBC63AA00C5D70","user_header":"https://static001.geekbang.org/account/avatar/00/12/49/29/bbeccb9f.jpg","comment_is_top":false,"comment_ctime":1568684281,"is_pvip":false,"replies":[{"id":"51609","content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568885608,"ip_address":"","comment_id":133852,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10158618873","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘æ‰¾åˆ°æˆ‘æäº¤çš„é—®é¢˜ç­”æ¡ˆäº†ã€‚ ä½¿ç”¨ man listen å‘½ä»¤ï¼Œå¯ä»¥æ‰¾åˆ°ä¸‹é¢è¿™ä¸€å¥è¯ï¼š<br>If the backlog argument is greater than the value in &#47;proc&#47;sys&#47;net&#47;core&#47;somaxconn, then it is silently truncated to that value;   ä¹Ÿå°±æ˜¯è¯´backlog è®¾ç½®çš„å€¼å¤§äºsomaxconnï¼Œä¼šè¢«æˆªæ–­ä¸ºsomaxconn çš„å€¼ã€‚","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467533,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568885608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133038,"user_name":"å°è›‹å£³","can_delete":false,"product_type":"c1","uid":1101602,"ip_address":"","ucode":"8344163BF7722E","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/22/5a483755.jpg","comment_is_top":false,"comment_ctime":1568333072,"is_pvip":false,"replies":[{"id":"51626","content":"nettyæ˜¯Javaçš„ç½‘ç»œé€šä¿¡æ¡†æ¶ï¼Œå…¶åº•å±‚å®ç°è¿˜æ˜¯ä¾èµ–ç±»ä¼¼epollçš„äº‹ä»¶åˆ†å‘æœºåˆ¶çš„ã€‚<br><br>spring mvcè¿™ç±»çš„ä½¿ç”¨çš„Javaç½‘ç»œç¼–ç¨‹æ¡†æ¶æ¥åšçš„ï¼Œtomcatä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚<br><br>Nginxæ˜¯ä½¿ç”¨ç±»ä¼¼epollçš„æœºåˆ¶æ¥è‡ªå·±å®ç°çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568887596,"ip_address":"","comment_id":133038,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10158267664","product_id":100032701,"comment_content":"é«˜æ€§èƒ½çš„ç½‘ç»œé€šä¿¡æ¡†æ¶ï¼Œæ˜¯ä¸æ˜¯ç±»ä¼¼nettyåšçš„äº‹ï¼Ÿã€‚é‚£æ¯”å¦‚spring mvcæˆ–è€…å…¶ä»–ä»»ä½•åº”ç”¨ç¨‹åºæ¡†æ¶å…¶å®åº•å±‚éƒ½éœ€è¦å¤„ç†ç½‘ç»œé€šè®¯è¿™å—ã€‚å¯ä»¥è¯´çŸ¥åçš„æ¡†æ¶è¿™å—å…¶å®å¤„ç†çš„éƒ½å¾ˆå¥½ï¼Ÿ javaåº”ç”¨ï¼Œæ˜¯tomcatå¤„ç†ç½‘ç»œè¯·æ±‚è¿˜æ˜¯springæ¥å¤„ç†çš„ï¼Ÿè¿˜æœ‰nginx","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467231,"discussion_content":"nettyæ˜¯Javaçš„ç½‘ç»œé€šä¿¡æ¡†æ¶ï¼Œå…¶åº•å±‚å®ç°è¿˜æ˜¯ä¾èµ–ç±»ä¼¼epollçš„äº‹ä»¶åˆ†å‘æœºåˆ¶çš„ã€‚\n\nspring mvcè¿™ç±»çš„ä½¿ç”¨çš„Javaç½‘ç»œç¼–ç¨‹æ¡†æ¶æ¥åšçš„ï¼Œtomcatä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚\n\nNginxæ˜¯ä½¿ç”¨ç±»ä¼¼epollçš„æœºåˆ¶æ¥è‡ªå·±å®ç°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568887596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343166,"user_name":"é“²é“²é˜Ÿ","can_delete":false,"product_type":"c1","uid":1132569,"ip_address":"","ucode":"D16372C34B7AE3","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/19/14dd81d9.jpg","comment_is_top":false,"comment_ctime":1650685045,"is_pvip":false,"replies":[{"id":"125677","content":"å­—é¢æ„æ€åº”è¯¥æ˜¯ä½ è¯´çš„é‚£ç§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1651405823,"ip_address":"","comment_id":343166,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5945652341","product_id":100032701,"comment_content":"è‡³äºå·²å®Œæˆè¿æ¥é˜Ÿåˆ—ï¼Œå¦‚æœå£°æ˜çš„ backlog å‚æ•°æ¯” &#47;proc&#47;sys&#47;net&#47;core&#47;somaxconn çš„å‚æ•°è¦å¤§ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨æˆ‘ä»¬å£°æ˜çš„é‚£ä¸ªå€¼<br>-----ã€‹è€å¸ˆï¼Œè¿™é‡Œæ˜¯ä¸æ˜¯æœ‰é—®é¢˜å‘¢ï¼ŒåŸæ–‡æ˜¯è¿™æ ·çš„ï¼š If  the  backlog  argument  is greater than the value in &#47;proc&#47;sys&#47;net&#47;core&#47;somaxconn, then it issilently truncated to that value<br>æ„æ€åº”è¯¥æ˜¯è®¾ç½®çš„backlogå€¼è¶…è¿‡äº†æœ€å¤§å€¼ï¼Œåˆ™è¢«æˆªæ–­ä¸ºæœ€å¤§å€¼æŠŠã€‚<br>","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569319,"discussion_content":"å­—é¢æ„æ€åº”è¯¥æ˜¯ä½ è¯´çš„é‚£ç§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651405823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133849,"user_name":"é£ç¾½æ˜Ÿæ³‰","can_delete":false,"product_type":"c1","uid":1198377,"ip_address":"","ucode":"CBC63AA00C5D70","user_header":"https://static001.geekbang.org/account/avatar/00/12/49/29/bbeccb9f.jpg","comment_is_top":false,"comment_ctime":1568683821,"is_pvip":false,"replies":[{"id":"51610","content":"å› ä¸ºä½ è®¾ç½®å¤ªå¤§ä¹Ÿæ²¡æœ‰ï¼Œç³»ç»Ÿæœ‰ä¸ªé»˜è®¤å€¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568885651,"ip_address":"","comment_id":133849,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5863651117","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæˆ‘ä¿®æ”¹äº†ç¨‹åºä¸­çš„backlogä¸º10ï¼Œ&#47;proc&#47;sys&#47;net&#47;core&#47;somaxconnæ²¡æœ‰å˜è¿˜æ˜¯é»˜è®¤å€¼128ã€‚æµ‹è¯•ç¨‹åºåŒæ—¶å‘èµ·800ä¸ªè¿æ¥è¯·æ±‚ï¼Œç”¨netstatè§‚å¯Ÿæ¯æ¬¡å¤§æ¦‚èƒ½å»ºç«‹10ä¸ªè¿æ¥ï¼Œæœ€åæœ‰å¤§é‡è¿æ¥æŠ¥é”™â€œA connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.â€ï¼›<br>å½“æˆ‘ä¿®æ”¹ç¨‹åºä¸­çš„backlogä¸º1000æ—¶ï¼Œæœ€å¤§å¯è¿æ¥æ•°å¹¶æ²¡æœ‰çªç ´128ï¼Œæœ€åä¹Ÿæ˜¯æŠ¥ä¸Šé¢é‚£ä¸ªé”™è¯¯ã€‚<br>æ˜¯ä¸æ˜¯backlogè®¾ç½®çš„å€¼åªèƒ½å°äºå†…æ ¸somaxconnçš„å€¼ï¼Œå¦‚æœæ¯”å®ƒå¤§ï¼Œåˆ™å–å†…æ ¸è®¾ç½®çš„å€¼ã€‚","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467531,"discussion_content":"å› ä¸ºä½ è®¾ç½®å¤ªå¤§ä¹Ÿæ²¡æœ‰ï¼Œç³»ç»Ÿæœ‰ä¸ªé»˜è®¤å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568885651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027840,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","nickname":"skye","note":"","ucode":"C55C9F52C78A00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":121413,"discussion_content":"æ˜¯è®¾ç½®ä¸ç”Ÿæ•ˆå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578318830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335899,"user_name":"ä¸‰å¹´äºŒç­é‚±å°ä¸œ","can_delete":false,"product_type":"c1","uid":2922136,"ip_address":"","ucode":"909B49C63C8EC6","user_header":"https://static001.geekbang.org/account/avatar/00/2c/96/98/89b96cda.jpg","comment_is_top":false,"comment_ctime":1645760152,"is_pvip":true,"replies":[{"id":"122799","content":"ä¸»åŠ¨æ–¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1645882032,"ip_address":"","comment_id":335899,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1645760152","product_id":100032701,"comment_content":"è€å¸ˆï¼Œä¸ºFINåŒ…æ’å…¥EOFçš„TCPåè®®æ ˆæ˜¯ä¸»åŠ¨å…³é—­æ–¹æ’å…¥çš„ï¼Œè¿˜æ˜¯è¢«åŠ¨å…³é—­æ–¹æ’å…¥çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553412,"discussion_content":"ä¸»åŠ¨æ–¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645882032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2944638,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/ee/7e/519b6808.jpg","nickname":"å“¦","note":"","ucode":"8DC2C012FEFA68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564400,"discussion_content":"è€å¸ˆï¼Œä¸Šé¢å†™çš„æ˜¯â€œTCP åè®®æ ˆä¸º FIN åŒ…æ’å…¥ä¸€ä¸ªæ–‡ä»¶ç»“æŸç¬¦ EOF åˆ°æ¥æ”¶ç¼“å†²åŒºä¸­â€ï¼Œå¦‚æœæ˜¯ä¸»åŠ¨æ–¹æ’å…¥EOFï¼Œä¸æ˜¯åº”è¯¥åœ¨å‘é€ç¼“å†²åŒºå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650243839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318478,"user_name":"GeekYanger","can_delete":false,"product_type":"c1","uid":2046036,"ip_address":"","ucode":"E674B7D25261CC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/sOuSC65kXWdWBAIIs6uXAD41Ed8Wo8tib81LLVOQJ2oK23TgPDy6x0PGmp7rXwLR3BHOicaKx1zib1DyfpCITK3dw/132","comment_is_top":false,"comment_ctime":1635307137,"is_pvip":false,"replies":[{"id":"115709","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1635669601,"ip_address":"","comment_id":318478,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635307137","product_id":100032701,"comment_content":"è®°å½•ä¸€ä¸‹ï¼ŒTIME_WAITæœ¬èº«è¿˜æ˜¯å¾ˆæœ‰ä»·å€¼çš„ï¼ŒTIME_WAIT çš„å¼•å…¥æ˜¯ä¸ºäº†è®© TCP æŠ¥æ–‡å¾—ä»¥è‡ªç„¶æ¶ˆå¤±ï¼ŒåŒæ—¶ä¸ºäº†è®©è¢«åŠ¨å…³é—­æ–¹èƒ½å¤Ÿæ­£å¸¸å…³é—­ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529262,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635669601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316620,"user_name":"landing","can_delete":false,"product_type":"c1","uid":2663758,"ip_address":"","ucode":"3911432A34C31F","user_header":"https://static001.geekbang.org/account/avatar/00/28/a5/4e/1c89bca4.jpg","comment_is_top":false,"comment_ctime":1634455670,"is_pvip":false,"replies":[{"id":"115261","content":"å†…æ ¸æ”¶åˆ°æ•°æ®æ˜¯é€šè¿‡æœåŠ¡ç«¯å¥—æ¥å­—æ¥å®Œæˆçš„ï¼Œè€Œè¦æŠŠæœåŠ¡ç«¯çš„æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯ï¼Œéœ€è¦ç»‘å®šæœåŠ¡ç«¯å¥—æ¥å­—å’Œå®¢æˆ·ç«¯åœ°å€-ç«¯å£ï¼Œè¿™å°±æ˜¯é€šè¿‡ä»£ç ä¸­recvformå’Œsendtoæ¥å®Œæˆçš„ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1635127847,"ip_address":"","comment_id":316620,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634455670","product_id":100032701,"comment_content":"&quot;æ³¨æ„æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œå…ˆé€šè¿‡ recvfrom å‡½æ•°è°ƒç”¨è·å–äº†å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£ä¿¡æ¯ï¼Œè¿™å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œå› ä¸º UDP æŠ¥æ–‡é‡Œé¢åŒ…å«äº†è¿™éƒ¨åˆ†ä¿¡æ¯ã€‚&quot;è¿™é‡Œä¸ç†è§£ã€‚å¦‚æœè§£é‡Šäº†å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„æ•°æ®æ˜¯å› ä¸ºæœåŠ¡ç«¯ç¬¬ä¸€æ¬¡æ¥å—å®¢æˆ·ç«¯æ•°æ®æ—¶è·å¾—äº†å®¢æˆ·ç«¯çš„åœ°å€ï¼Œç„¶åé€šè¿‡sendtoå‘Šè¯‰äº†å†…æ ¸ï¼Œé‚£ä¹ˆç¬¬ä¸€æ­¥å†…æ ¸ä¸ºä»€ä¹ˆæŠŠæ•°æ®ç»™æœåŠ¡ç«¯å¥—æ¥å­—ï¼Œè¿™ä¸€æ­¥æ²¡æœ‰å»ºç«‹æ˜ å°„å…³ç³»ï¼Œå†…æ ¸åº”è¯¥ä¹Ÿä¸çŸ¥é“å•Š","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528439,"discussion_content":"å†…æ ¸æ”¶åˆ°æ•°æ®æ˜¯é€šè¿‡æœåŠ¡ç«¯å¥—æ¥å­—æ¥å®Œæˆçš„ï¼Œè€Œè¦æŠŠæœåŠ¡ç«¯çš„æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯ï¼Œéœ€è¦ç»‘å®šæœåŠ¡ç«¯å¥—æ¥å­—å’Œå®¢æˆ·ç«¯åœ°å€-ç«¯å£ï¼Œè¿™å°±æ˜¯é€šè¿‡ä»£ç ä¸­recvformå’Œsendtoæ¥å®Œæˆçš„ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635127847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267079,"user_name":"duckman","can_delete":false,"product_type":"c1","uid":2184325,"ip_address":"","ucode":"0184C26C4B6C1B","user_header":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","comment_is_top":false,"comment_ctime":1607590944,"is_pvip":false,"replies":[{"id":"98876","content":"ä½ çš„å‘ç°æ˜¯æˆ‘çš„ç¨‹åºä¾‹å­çš„æ¨¡æ¿å§ï¼Œå®é™…ä¸Šä¸ä¸€å®šæ˜¯è¿™æ ·çš„ã€‚ä¸è¿‡ä½ å¯¹I&#47;Oå¤šè·¯å¤ç”¨çš„ç†è§£å€’æ˜¯æœ‰å¦å¤–ä¸€ä¸ªè§’åº¦ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªå±‚é¢çš„ç†è§£å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1610286087,"ip_address":"","comment_id":267079,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607590944","product_id":100032701,"comment_content":"çªç„¶å‘ç°äº†<br><br>æ— è®ºæ˜¯TCP&#47;UDP, å»ºç«‹è¿æ¥ä¹‹å, æœåŠ¡ç«¯æ€»æ˜¯å…ˆread, å®¢æˆ·ç«¯æ€»æ˜¯å…ˆwriteã€‚<br><br>æ‰€ä»¥ï¼Œæœ‰äº†IOå¤šè·¯å¤ç”¨ä¹‹å, æ˜¯ä¸æ˜¯ æœåŠ¡ç«¯&#47;å®¢æˆ·ç«¯å¯ä»¥æŠ›å¼ƒè¿™ä¸ªç»å…¸çš„å¯¹è¯æ¨¡å¼ï¼Œå®Œå…¨æ ¹æ®ä¸šåŠ¡å±‚é¢çš„éœ€æ±‚, å†³å®šæ˜¯å…ˆwriteè¿˜æ˜¯å…ˆread, è€Œä¸”ä¸¤ä¸ªåŠ¨ä½œæ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å½±å“ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511500,"discussion_content":"ä½ çš„å‘ç°æ˜¯æˆ‘çš„ç¨‹åºä¾‹å­çš„æ¨¡æ¿å§ï¼Œå®é™…ä¸Šä¸ä¸€å®šæ˜¯è¿™æ ·çš„ã€‚ä¸è¿‡ä½ å¯¹I/Oå¤šè·¯å¤ç”¨çš„ç†è§£å€’æ˜¯æœ‰å¦å¤–ä¸€ä¸ªè§’åº¦ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªå±‚é¢çš„ç†è§£å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610286087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251577,"user_name":"YUAN","can_delete":false,"product_type":"c1","uid":2153838,"ip_address":"","ucode":"98EF68EEE21893","user_header":"https://static001.geekbang.org/account/avatar/00/20/dd/6e/8f6f79d2.jpg","comment_is_top":false,"comment_ctime":1601698130,"is_pvip":false,"replies":[{"id":"92057","content":"UDPå°±æ˜¯ä¸çŸ¥é“çš„, ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å®¹å¿è¿™æ ·çš„ä¸¢å¤±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1601871366,"ip_address":"","comment_id":251577,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1601698130","product_id":100032701,"comment_content":"ä½¿ç”¨udpæ—¶ï¼Œå®¢æˆ·ç«¯å¦‚ä½•çŸ¥é“æœåŠ¡å™¨ç«¯æ”¶åˆ°äº†å®ƒå‘é€çš„è¯·æ±‚ï¼Ÿä¾‹å¦‚dnsæŸ¥è¯¢ï¼Œå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚å¦‚æœä¸¢å¤±ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å¦‚ä½•çŸ¥é“å‘ç”Ÿäº†æŠ¥æ–‡ä¸¢å¤±ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506552,"discussion_content":"UDPå°±æ˜¯ä¸çŸ¥é“çš„, ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å®¹å¿è¿™æ ·çš„ä¸¢å¤±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601871366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231577,"user_name":"å®‹è","can_delete":false,"product_type":"c1","uid":1880075,"ip_address":"","ucode":"7105B7D5B1E338","user_header":"","comment_is_top":false,"comment_ctime":1593731474,"is_pvip":false,"replies":[{"id":"85732","content":"ä¸ºå•¥ä¼šå‘ç”Ÿå‘¢ï¼Ÿç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©ç«¯å£ï¼Œå®ƒåº”è¯¥ä¼šé»˜é»˜è®°ä¸‹æ¥ä½¿ç”¨è¿‡çš„ç«¯å£çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1593954827,"ip_address":"","comment_id":231577,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593731474","product_id":100032701,"comment_content":"è€å¸ˆå¥½ï¼Œudpæ²¡ç»‘å®šç«¯å£çš„è¯ï¼Œæ“ä½œç³»ç»ŸåŠ¨æ€åˆ†é…ç«¯å£ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°ä¸¤ä¸ªsocketè‡ªåŠ¨ç»‘å®šåˆ°åŒä¸€ä¸ªç«¯å£çš„æƒ…å†µå—","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500354,"discussion_content":"ä¸ºå•¥ä¼šå‘ç”Ÿå‘¢ï¼Ÿç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©ç«¯å£ï¼Œå®ƒåº”è¯¥ä¼šé»˜é»˜è®°ä¸‹æ¥ä½¿ç”¨è¿‡çš„ç«¯å£çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593954827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224746,"user_name":"pc","can_delete":false,"product_type":"c1","uid":1652836,"ip_address":"","ucode":"1AD538B9A900B6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","comment_is_top":false,"comment_ctime":1591526715,"is_pvip":false,"replies":[{"id":"84270","content":"1. èƒ½ä¸èƒ½åˆå¹¶æˆ‘æ²¡æœ‰ç¡®åˆ‡çš„ç­”æ¡ˆï¼Œä¸è¿‡æˆ‘è§‰å¾—æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼›<br>2.closeå’Œshutdownéƒ½æ˜¯æ ‡å‡†çš„å››æ¬¡æŒ¥æ‰‹<br>3.æˆ‘åŒæ„ï¼Œä¸è¿‡è¿™ç§æ˜¯ç³»ç»Ÿå†…æ ¸å›æ”¶èµ„æºé¢å¤–å¸¦æ¥çš„ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1592742139,"ip_address":"","comment_id":224746,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1591526715","product_id":100032701,"comment_content":"çœ‹äº†å‰é¢çš„è¿æ¥å…³é—­ã€TCPå¯¹é“¾è·¯å¼‚å¸¸çš„æ„ŸçŸ¥ï¼Œä»¥åŠå››æ¬¡æŒ¥æ‰‹ï¼Œä¸²èµ·æ¥åæ€»æ„Ÿè§‰æœ‰ç‚¹ç³Šæ¶‚ã€‚çœ‹å®Œè¿™ç¯‡çš„å‡ ä¸ªé—®é¢˜ï¼Œåˆç¨å¾®æ˜ç™½äº†ä¸€ç‚¹ã€‚æƒ³ç€è¿˜æ˜¯æ€»ç»“ç€æé—®ä¸€ä¸‹ï¼š<br>1ã€é¦–å…ˆACK M+1 å’Œ FIN Nä¸¤æ¬¡æŒ¥æ‰‹ä¸èƒ½åˆå¹¶å§ï¼Ÿä¸Šå­¦è¯¾æœ¬è¿˜æœ‰ä¸€äº›åšå®¢ä¸æ˜¯éƒ½æœ‰æåˆ°ï¼Œä¸¤è€…ä¹‹å‰è¢«åŠ¨å…³é—­çš„ä¸€æ–¹è¿˜å¯ä»¥ç»§ç»­å‘é€æ•°æ®çš„ã€‚<br><br>2ã€æ‰€ä»¥TCPå››æ¬¡æŒ¥æ‰‹ç®€å•æ€»ç»“ä¸ºï¼šAç«¯å‘é€FINåŒ…ã€Bç«¯è¿”å›ACKï¼›Bç«¯ç»§ç»­send dataï¼›Bç«¯å‘é€FINåŒ…ã€Aç«¯è¿›å…¥TIME_WAITå¹¶å‘é€ACKã€‚<br>é’ˆå¯¹â€œè¢«åŠ¨å…³é—­æ–¹ç»§ç»­send dataâ€è¿™ç‚¹ï¼Œå›åº”åˆ°æœ¬æ–‡æœ€åä¸€ä¸ªé—®é¢˜ã€ä»¥åŠTCPæ„ŸçŸ¥é“¾è·¯å¼‚å¸¸çš„å‡ ç§æƒ…å†µâ€”â€”â€”å¦‚æœAç«¯æ˜¯closeå…³é—­ï¼ŒBç«¯ç»§ç»­send dataçš„æ—¶å€™å°±ä¼šæ”¶åˆ°RSTã€å†writeåˆ™è§¦å‘SIGPIPEä¿¡å·ï¼›å¦‚æœAç«¯æ˜¯shutdown(1)å…³é—­ï¼Œæ‰å¯ä»¥ç»§ç»­æ¥æ”¶åˆ°Bç«¯çš„æ•°æ®ï¼ŒBç«¯ä¹Ÿæ­£å¸¸çš„ç»§ç»­send dataã€‚ï¼ˆå°±æ˜¯æ–‡ä¸­æœ€åçš„æ—¶åºå›¾ï¼‰<br>è¿™æ ·çš„è¯ï¼Œå¯¹äºæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£æˆshutdownå…³é—­çš„æ—¶å€™æ‰æ˜¯å››æ¬¡æŒ¥æ‰‹çš„åœºæ™¯å‘¢ï¼Ÿåè¿‡æ¥è¯´ï¼Œå…³é—­çš„æ—¶å€™å¹¶ä¸éƒ½æ˜¯â€œæ ‡å‡†çš„å››æ¬¡æŒ¥æ‰‹â€ï¼Ÿ<br><br>3ã€åƒkill -9è¿™ç§æš´åŠ›å…³é—­ç¨‹åºï¼Œéƒ½åº”è¯¥ç±»ä¼¼closeå…³é—­å§ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497594,"discussion_content":"1. èƒ½ä¸èƒ½åˆå¹¶æˆ‘æ²¡æœ‰ç¡®åˆ‡çš„ç­”æ¡ˆï¼Œä¸è¿‡æˆ‘è§‰å¾—æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼›\n2.closeå’Œshutdownéƒ½æ˜¯æ ‡å‡†çš„å››æ¬¡æŒ¥æ‰‹\n3.æˆ‘åŒæ„ï¼Œä¸è¿‡è¿™ç§æ˜¯ç³»ç»Ÿå†…æ ¸å›æ”¶èµ„æºé¢å¤–å¸¦æ¥çš„ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592742139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333678,"discussion_content":"å®¢æˆ·ç«¯è°ƒç”¨close, read, write éƒ½å…³é—­, socketè¢«å›æ”¶, æ­¤æ—¶æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€æ•°æ®çš„æ—¶å€™ï¼Œè§¦å‘ SIGPIPE .\n\nå®¢æˆ·ç«¯è°ƒç”¨shutdown, åªå…³é—­äº†write, è¿˜å¯ä»¥read, æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯è¿˜æ˜¯å¯ä»¥æ­£å¸¸å¤„ç†ã€‚\n\næœ‰ç‚¹ç±»ä¼¼äº17è®²ç”¨read, writeæ¥æ¢æµ‹TCPè¿æ¥çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607591635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204248,"user_name":"æ—å­","can_delete":false,"product_type":"c1","uid":1132071,"ip_address":"","ucode":"A27F70B7B5FCBE","user_header":"https://static001.geekbang.org/account/avatar/00/11/46/27/e0b34360.jpg","comment_is_top":false,"comment_ctime":1586355701,"is_pvip":false,"replies":[{"id":"76798","content":"å¥½é—®é¢˜ï¼Œæˆ‘çŒœæ˜¯ä¸æ˜¯ä¼šæŠ¥é”™ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1586680810,"ip_address":"","comment_id":204248,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586355701","product_id":100032701,"comment_content":"é’ˆå¯¹UDP connectçš„é—®é¢˜æœ‰ä¸ªç–‘é—®ï¼ŒæŒ‰ç…§ä¸Šæ–‡è¯´çš„æ˜¯ä¸ºäº†è®©å†…æ ¸è®°å½•ç›®æ ‡ipç«¯å£åˆ°socketçš„æ˜ å°„å…³ç³»ï¼Œé‚£å¦‚æœæºä¸»æœºä¸Šæœ‰ä¸¤ä¸ªudp socketéƒ½connectåŒä¸€ä¸ªç›®æ ‡ipç«¯å£ï¼Œè¿™æ—¶å¦‚æœå‡ºç°icmpæŠ¥æ–‡æ—¶å†…æ ¸æ˜¯ä¸æ˜¯ä¼šé€šçŸ¥è¿™ä¸¤ä¸ªsocketå‘¢","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491117,"discussion_content":"å¥½é—®é¢˜ï¼Œæˆ‘çŒœæ˜¯ä¸æ˜¯ä¼šæŠ¥é”™ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586680810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185716,"user_name":"awmthink","can_delete":false,"product_type":"c1","uid":1331202,"ip_address":"","ucode":"742915BBCE7111","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/02/cce1cf67.jpg","comment_is_top":false,"comment_ctime":1583669851,"is_pvip":false,"replies":[{"id":"72379","content":"è¿™æ ·çš„åœºæ™¯æå…¶ç½•è§ï¼Œä¹Ÿå¾ˆéš¾æ¨¡æ‹Ÿï¼Œè€Œä¸”TCPçš„çŠ¶æ€å…¶å®æ˜¯ä¸€ä¸ªçŠ¶æ€æœºé©±åŠ¨æ¨¡å¼ï¼Œè‚¯å®šæœ‰ä¸€ä¸ªå…ˆæ¥åæ¥çš„æƒ…å†µï¼Œè¿›å…¥å…ˆæ¥çš„é‚£ä¸ªçŠ¶æ€æœºé©±åŠ¨æ¨¡å¼ï¼Œå°±ä¼šæŒ‰ç…§é‚£ä¸ªæ¨¡å¼èµ°ä¸‹å»ï¼Œè€Œä¸æ˜¯çªç„¶è·³å‡ºæ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1584174375,"ip_address":"","comment_id":185716,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1583669851","product_id":100032701,"comment_content":"è€å¸ˆï¼Œå¦‚æœè¿æ¥åŒæ–¹æ­£å¥½åŒæ—¶close conn fdï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Œç›¸å½“äºFIN_WAIT_1æ—¶ï¼Œæ”¶åˆ°äº†FINï¼Œä¼šä¸ä¼šç›´æ¥è·³è¿‡äº†FIN_WAIT_2ï¼Œå‘é€ACKåè¿›å…¥TIME_WAITäº†å‘¢ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486474,"discussion_content":"è¿™æ ·çš„åœºæ™¯æå…¶ç½•è§ï¼Œä¹Ÿå¾ˆéš¾æ¨¡æ‹Ÿï¼Œè€Œä¸”TCPçš„çŠ¶æ€å…¶å®æ˜¯ä¸€ä¸ªçŠ¶æ€æœºé©±åŠ¨æ¨¡å¼ï¼Œè‚¯å®šæœ‰ä¸€ä¸ªå…ˆæ¥åæ¥çš„æƒ…å†µï¼Œè¿›å…¥å…ˆæ¥çš„é‚£ä¸ªçŠ¶æ€æœºé©±åŠ¨æ¨¡å¼ï¼Œå°±ä¼šæŒ‰ç…§é‚£ä¸ªæ¨¡å¼èµ°ä¸‹å»ï¼Œè€Œä¸æ˜¯çªç„¶è·³å‡ºæ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584174375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1331202,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/02/cce1cf67.jpg","nickname":"awmthink","note":"","ucode":"742915BBCE7111","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200232,"discussion_content":"çœ‹äº†ä¸€ä¸‹TCPçš„çŠ¶æ€è½¬ç§»å›¾ï¼ŒFIN_WAIT_1å¦‚æœåŒæ—¶æ”¶åˆ°ACKå’ŒFINï¼Œåˆ™ä¼šå‘é€ACKï¼Œç„¶åè¿›è¡ŒTIME_WAITã€‚å¦‚æœåªæ”¶åˆ°FINï¼Œåˆ™ä¼šå‘é€ACKï¼Œåˆ™è¿›è¡ŒCLOSINGçŠ¶æ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583670936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180632,"user_name":"é¸ æ‘©Â·æ™º","can_delete":false,"product_type":"c1","uid":1211909,"ip_address":"","ucode":"6CD93CD1DB6955","user_header":"https://static001.geekbang.org/account/avatar/00/12/7e/05/431d380f.jpg","comment_is_top":false,"comment_ctime":1582356259,"is_pvip":false,"replies":[{"id":"71039","content":"ç¡®å®æ˜¯æ²¡æœ‰å†™ï¼Œæˆ‘åŠ ä¸Šï¼Œè®©ç¼–è¾‘æ”¹ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1583053205,"ip_address":"","comment_id":180632,"utype":1}],"discussion_count":2,"race_medal":1,"score":"1582356259","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæ–‡ç« å¼€å¤´æè¿°4æ¬¡æŒ¥æ‰‹ï¼Œè¢«åŠ¨æ–¹è¯»å–æ•°æ®åˆ°eofåï¼Œå‘ä¸»åŠ¨æ–¹å‘finçš„ackï¼Œä¸»åŠ¨æ–¹è¿›å…¥fin_wait_2ï¼Œè¿™é‡Œæ˜¯ä¸æ˜¯ç¼ºå¤±äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484737,"discussion_content":"ç¡®å®æ˜¯æ²¡æœ‰å†™ï¼Œæˆ‘åŠ ä¸Šï¼Œè®©ç¼–è¾‘æ”¹ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583053205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2916751,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/U5vvFI4v3jibf6uHbOFtkm1sBaXeLZnJicCOia0KW5KNb2KK06we5gkzJE7RiawfDzMAicHIpINUrTYfjrdZweQsuUA/132","nickname":"Geek_1cd0c8","note":"","ucode":"1F0C3F5E03C420","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579826,"discussion_content":"2022/07/13 fin_wait_2 è¿˜æ˜¯æ²¡æœ‰åŠ ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657703715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177777,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1581498046,"is_pvip":false,"replies":[{"id":"71017","content":"å¥½é—®é¢˜ï¼Œäº‹å®ä¸Šä¸ºäº†èŠ‚çœå¸¦å®½ï¼Œç¡®å®æœ‰è¿™æ ·åšçš„ï¼Œè¿™é‡Œä¸ºäº†è®²è¿°æ–¹ä¾¿ï¼Œå°†å…¶åˆ†å¼€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1583050948,"ip_address":"","comment_id":177777,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1581498046","product_id":100032701,"comment_content":"å››æ¬¡æŒ¥æ‰‹çš„ACKM+1 å’Œ FIN Nä¸ºå•¥ä¸èƒ½åˆå¹¶åˆ°ä¸€èµ·ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483537,"discussion_content":"å¥½é—®é¢˜ï¼Œäº‹å®ä¸Šä¸ºäº†èŠ‚çœå¸¦å®½ï¼Œç¡®å®æœ‰è¿™æ ·åšçš„ï¼Œè¿™é‡Œä¸ºäº†è®²è¿°æ–¹ä¾¿ï¼Œå°†å…¶åˆ†å¼€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583050948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184325,"avatar":"https://static001.geekbang.org/account/avatar/00/21/54/85/ab5148ce.jpg","nickname":"duckman","note":"","ucode":"0184C26C4B6C1B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333679,"discussion_content":"ç›¸å½“äº3æ¬¡æ¡æ‰‹ä¸­çš„æ­ä¾¿è½¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607591820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228275,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bd/f3/a59e8c99.jpg","nickname":"æ¹›","note":"","ucode":"08D2E233A952C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":172813,"discussion_content":"å¯ä»¥åˆå¹¶ ä¹‹æ‰€ä»¥åˆ†å¼€æ˜¯ä¸ºäº† æœåŠ¡ç«¯å¤„ç†å®Œå®¢æˆ·ç«¯å‘æ¥æœ€åçš„å†…å®¹å å¹¶å¯ä»¥å‘å®¢æˆ·ç«¯å‘é€ä¸€äº›æ¶ˆæ¯ å¦‚æœä½ æ²¡æœ‰æ¶ˆæ¯éœ€è¦å‘é€ å°±å¯ä»¥åˆå¹¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581797745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170345,"user_name":"Douglas","can_delete":false,"product_type":"c1","uid":1073027,"ip_address":"","ucode":"CFDE3D76B9DAE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/83/bb728e53.jpg","comment_is_top":false,"comment_ctime":1578575199,"is_pvip":false,"replies":[{"id":"68060","content":"ç†è§£æŒ¥æ‰‹çš„ç›®çš„å°±è‡ªç„¶ç†è§£ä¸ºå•¥æ˜¯4æ­¤äº†ï¼Œå› ä¸ºæ¯ä¸ªæ–¹å‘éƒ½éœ€è¦ä¸€ä¸ª FIN å’Œä¸€ä¸ª ACKï¼Œé€šå¸¸è¢«ç§°ä¸ºå››æ¬¡æŒ¥æ‰‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1580630091,"ip_address":"","comment_id":170345,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578575199","product_id":100032701,"comment_content":"è€å¸ˆå¥½åƒå¹¶æ²¡æœ‰è®²ä¸ºå•¥æ˜¯4æ¬¡æŒ¥æ‰‹","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480947,"discussion_content":"ç†è§£æŒ¥æ‰‹çš„ç›®çš„å°±è‡ªç„¶ç†è§£ä¸ºå•¥æ˜¯4æ­¤äº†ï¼Œå› ä¸ºæ¯ä¸ªæ–¹å‘éƒ½éœ€è¦ä¸€ä¸ª FIN å’Œä¸€ä¸ª ACKï¼Œé€šå¸¸è¢«ç§°ä¸ºå››æ¬¡æŒ¥æ‰‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580630091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169339,"user_name":"skye","can_delete":false,"product_type":"c1","uid":1027840,"ip_address":"","ucode":"C55C9F52C78A00","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","comment_is_top":false,"comment_ctime":1578318324,"is_pvip":false,"replies":[{"id":"68079","content":"é‡Šæ”¾æ‰å…¶ä»–å’Œå¥—æ¥å­—ç›¸å…³çš„ç³»ç»Ÿèµ„æºï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1580631368,"ip_address":"","comment_id":169339,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1578318324","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆï¼Œæˆ‘çœ‹ä¸€äº›å¼€æºä»£ç ä¸­shutdownä¹‹åå†è°ƒç”¨closeï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480515,"discussion_content":"é‡Šæ”¾æ‰å…¶ä»–å’Œå¥—æ¥å­—ç›¸å…³çš„ç³»ç»Ÿèµ„æºï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580631368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027840,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","nickname":"skye","note":"","ucode":"C55C9F52C78A00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158831,"discussion_content":"åŒä¸€ä¸ªå¥—æ¥å­—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580632269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140416,"user_name":"fl260919784","can_delete":false,"product_type":"c1","uid":1045678,"ip_address":"","ucode":"D6E10B8BDD0BB8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/ae/3b101c00.jpg","comment_is_top":false,"comment_ctime":1570934976,"is_pvip":false,"replies":[{"id":"54286","content":"è¿˜çœŸä¸å¥½æ¨¡æ‹Ÿï¼Œè¿™ä¸ªç›´æ¥é€šè¿‡ç¨‹åºæ¥å®ç°æ¯”è¾ƒæ–¹ä¾¿ï¼Œæ¯”å¦‚shutdownã€closeã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570968222,"ip_address":"","comment_id":140416,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570934976","product_id":100032701,"comment_content":"åº”ç”¨ç¨‹åºå¦‚ä½•æ¨¡æ‹Ÿä¸‰æ¬¡æŒ¥æ‰‹å…³é—­ä¸€æ¡tcpè¿æ¥ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹æ˜¯fin,ack,fin,ackï¼Œä½†ä¹Ÿå­˜åœ¨fin,ack+fin,ackï¼‰","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470381,"discussion_content":"è¿˜çœŸä¸å¥½æ¨¡æ‹Ÿï¼Œè¿™ä¸ªç›´æ¥é€šè¿‡ç¨‹åºæ¥å®ç°æ¯”è¾ƒæ–¹ä¾¿ï¼Œæ¯”å¦‚shutdownã€closeã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570968222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135491,"user_name":"ç å†œKevinäº®","can_delete":false,"product_type":"c1","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1569197747,"is_pvip":false,"replies":[{"id":"52202","content":"å¥½é—®é¢˜ï¼Œæˆ‘å¥½æƒ³çœ‹è¿‡æœ‰ç±»ä¼¼çš„ä¼˜åŒ–æ‰‹æ®µï¼Œå®é™…ä¸Šæ˜¯ä¸æ˜¯è¿™æ ·åšçš„ï¼Œæˆ‘ä¸æ•¢ä¿è¯ï¼Œå¯èƒ½è¦å»è¯»æºç äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1569407268,"ip_address":"","comment_id":135491,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1569197747","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆï¼Œä¸ºä»€ä¹ˆå››æ¬¡æŒ¥æ‰‹ä¸­ï¼Œè¢«åŠ¨å…³é—­æ–¹ä¸èƒ½æŠŠackä¸finåˆå¹¶å‘¢","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468214,"discussion_content":"å¥½é—®é¢˜ï¼Œæˆ‘å¥½æƒ³çœ‹è¿‡æœ‰ç±»ä¼¼çš„ä¼˜åŒ–æ‰‹æ®µï¼Œå®é™…ä¸Šæ˜¯ä¸æ˜¯è¿™æ ·åšçš„ï¼Œæˆ‘ä¸æ•¢ä¿è¯ï¼Œå¯èƒ½è¦å»è¯»æºç äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569407268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1357623,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJmBKrLvqOIXDDbj3ocEIJzqsQx2e5VLDBSX6LmofYtprWwKaVAmHUqU2z3mjREHX8n9eLLiavlPg/132","nickname":"wg1993","note":"","ucode":"D5112FEFDB1DF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52239,"discussion_content":"å®¢æˆ·ç«¯å‘ä¸€ä¸ªFINåŒ…è¿‡æ¥è¡¨ç¤ºè‡ªå·±è¦å…³é—­ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›ä¸€ä¸ªACKï¼Œä½†æ˜¯æ­¤æ—¶æœåŠ¡å™¨ç«¯å¯èƒ½è¿˜æœ‰æ•°æ®å¾…å‘é€ï¼Œè¦ç­‰æ•°æ®éƒ½å‘å®Œäº†æ‰èƒ½å‘é€ä¸€ä¸ªFINåŒ…è¿‡å»ï¼Œæ‰€ä»¥ä¸èƒ½åˆå¹¶ï¼Œä¸ªäººç†è§£","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1574006993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1167662,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d1/2e/d531b29b.jpg","nickname":"å›¾åå…”","note":"","ucode":"2395E9506CBE0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1357623,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJmBKrLvqOIXDDbj3ocEIJzqsQx2e5VLDBSX6LmofYtprWwKaVAmHUqU2z3mjREHX8n9eLLiavlPg/132","nickname":"wg1993","note":"","ucode":"D5112FEFDB1DF7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70811,"discussion_content":"èµåŒä½ çš„æƒ³æ³•ï¼ŒåŒæ ·å¯è¯´æ˜å»ºç«‹è¿æ¥ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æŒ¥æ‰‹ã€‚å»ºç«‹è¿æ¥æ—¶è‚¯å®šè¿˜æ²¡å‘é€æ•°æ®ï¼Œæ‰€ä»¥SYN+ACKæ˜¯æˆç«‹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575381160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":52239,"ip_address":""},"score":70811,"extra":""}]},{"author":{"id":1027028,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erHaczgBsEF7zqCj8Hlq2vtYh0M6Jj3pia66ZW0O4fFvNldbkHYX6d8B0fBHwicxAcMMRmcNzPrJLMA/132","nickname":"Jianwen Ji","note":"","ucode":"20A8AC1AA8A8E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21854,"discussion_content":"è€å¸ˆè®²çš„éƒ½æ˜¯ç»å…¸çš„ã€‚å¯ä»¥åˆå¹¶ã€‚ä¹Ÿå¯ä»¥æƒ³è±¡ä¸€ä¸‹åŒæ–¹åŒæ—¶å‘Finçš„æƒ…æ™¯ã€‚å¤šç ”ç©¶ä¸€ä¸‹TCPçŠ¶æ€æœºé‚£å¹…å›¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569547784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134644,"user_name":"kabuka","can_delete":false,"product_type":"c1","uid":1246009,"ip_address":"","ucode":"932DD1E875D850","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/39/18956b2e.jpg","comment_is_top":false,"comment_ctime":1568885099,"is_pvip":false,"replies":[{"id":"51751","content":"å“¦ï¼Œæˆ‘çš„æ„æ€æ˜¯EOFä½œä¸ºä¸€ä¸ªå¼‚å¸¸æƒ…å†µï¼Œéœ€è¦åŠ ä»¥å¤„ç†ï¼Œä¹Ÿå°±æ˜¯è¯»åˆ°è¿”å›å€¼ä¸º0çš„æƒ…å†µã€‚ç¡®å®å¦‚ä½ æ‰€è¨€ï¼Œç¨‹åºçš„é€»è¾‘æ˜¯æ­£å¸¸å¤„ç†çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568960380,"ip_address":"","comment_id":134644,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568885099","product_id":100032701,"comment_content":"â€œè¿™ä¸ª EOF ä¼šè¢«æ”¾åœ¨å·²æ’é˜Ÿç­‰å€™çš„å…¶ä»–å·²æ¥æ”¶çš„æ•°æ®ä¹‹åï¼Œè¿™å°±æ„å‘³ç€æ¥æ”¶ç«¯åº”ç”¨ç¨‹åºéœ€è¦å¤„ç†è¿™ç§å¼‚å¸¸æƒ…å†µâ€œ   é€™ç¨®æƒ…æ³ä¸å±¬æ–¼æ­£å¸¸å—ï¼Ÿ EOFæŒ‰ç…§é †åºæ’åœ¨éšŠåˆ—æœ€å¾Œé¢ï¼Œåœ¨è™•ç†å®ŒéšŠåˆ—å‰é¢çš„æ¶ˆæ¯åï¼Œåœ¨è™•ç†EOFï¼Œæ­£å¸¸çµæŸã€‚è€å¸«èªªçš„éœ€è¦è™•ç†ç•°å¸¸æƒ…æ³æ˜¯æŒ‡ä»€éº¼ï¼Ÿ<br> ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467842,"discussion_content":"å“¦ï¼Œæˆ‘çš„æ„æ€æ˜¯EOFä½œä¸ºä¸€ä¸ªå¼‚å¸¸æƒ…å†µï¼Œéœ€è¦åŠ ä»¥å¤„ç†ï¼Œä¹Ÿå°±æ˜¯è¯»åˆ°è¿”å›å€¼ä¸º0çš„æƒ…å†µã€‚ç¡®å®å¦‚ä½ æ‰€è¨€ï¼Œç¨‹åºçš„é€»è¾‘æ˜¯æ­£å¸¸å¤„ç†çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568960380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133393,"user_name":"ç°è‰²","can_delete":false,"product_type":"c1","uid":1178135,"ip_address":"","ucode":"869B400BBD520D","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/17/d0b8135f.jpg","comment_is_top":false,"comment_ctime":1568547465,"is_pvip":false,"replies":[{"id":"51618","content":"è¦ä¿è¯çš„ï¼Œä¸€èˆ¬æ¥è¯´MSLä¸ç­‰äºTTLï¼ŒMSLè¦æ¯”TTLå¤§ï¼Œä¿è¯2MSLçš„æ—¶é—´æ—¶å€™å¯¹åº”çš„åˆ†ç»„ä¸€å®šå˜å¾—æ— æ•ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568886895,"ip_address":"","comment_id":133393,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568547465","product_id":100032701,"comment_content":"å³ä½¿ç»è¿‡äº†2MSLä¹Ÿä¸ä¸€å®šä¿è¯ä¸€ä¸ªtcpåˆ†ç»„çš„TTLä¸º0å§ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªåˆ†ç»„å˜å¾—æ— æ•ˆï¼Œé‚£ä¹ˆTIME_WAITå¦‚ä½•é¿å…è¿æ¥â€œåŒ–èº«â€çš„é—®é¢˜å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467377,"discussion_content":"è¦ä¿è¯çš„ï¼Œä¸€èˆ¬æ¥è¯´MSLä¸ç­‰äºTTLï¼ŒMSLè¦æ¯”TTLå¤§ï¼Œä¿è¯2MSLçš„æ—¶é—´æ—¶å€™å¯¹åº”çš„åˆ†ç»„ä¸€å®šå˜å¾—æ— æ•ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568886895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133331,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1568518758,"is_pvip":false,"replies":[{"id":"51620","content":"ä¸æ˜¯å•Šï¼Œå¦‚æœå¯¹ç€ä¸€ä¸ªå¹¿æ’­åœ°å€å‘é€ï¼Œæ‰æ˜¯ä¸€ä¸ªå¹¿æ’­æ“ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568887013,"ip_address":"","comment_id":133331,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568518758","product_id":100032701,"comment_content":"ä»Šå¤©åˆå›å¤´è®²udpçš„connectçªç„¶æƒ³èµ·æ¥ é‚£udpçš„sendæ˜¯ä¸ªå¹¿æ’­æ“ä½œï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467353,"discussion_content":"ä¸æ˜¯å•Šï¼Œå¦‚æœå¯¹ç€ä¸€ä¸ªå¹¿æ’­åœ°å€å‘é€ï¼Œæ‰æ˜¯ä¸€ä¸ªå¹¿æ’­æ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568887013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133268,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1568472176,"is_pvip":false,"replies":[{"id":"51636","content":"ç¨‹åºè´´ä¸Šæ¥ï¼Œå¤§å®¶ä¸€èµ·ç ”ç©¶ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568888575,"ip_address":"","comment_id":133268,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568472176","product_id":100032701,"comment_content":"å®éªŒäº†ä¸€ä¸‹å¾€åŠå…³é—­ï¼ˆæœ¬ç«¯shutdownï¼‰çŠ¶æ€çš„è¿æ¥é‡Œå†™ä¸œè¥¿ï¼Œå‘ç°ä¸ä¼šè¿”å›ä»»ä½•é”™è¯¯ä¿¡æ¯,ï¼Œæ„Ÿè§‰å°±åƒæ­£å¸¸çš„è¿æ¥writeä¸€æ ·(ç„¶å®ƒå†™å¤šå°‘å­—èŠ‚ï¼Œå®ƒå°±è¿”å›å¤šå°‘)ï¼Œè¿™ä¸ªæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467327,"discussion_content":"ç¨‹åºè´´ä¸Šæ¥ï¼Œå¤§å®¶ä¸€èµ·ç ”ç©¶ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568888575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133059,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1568341434,"is_pvip":false,"replies":[{"id":"51625","content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568887484,"ip_address":"","comment_id":133059,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568341434","product_id":100032701,"comment_content":"å¯¹äºudpé‚£é‡Œï¼Œconnectçš„ä½œç”¨åº”è¯¥æ˜¯è®°å½•æœåŠ¡ç«¯ip,ç«¯å£å·å’Œsocketçš„å¯¹åº”å…³ç³»å§","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467244,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568887484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}