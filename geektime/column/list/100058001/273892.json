{"id":273892,"title":"01 åŸºç¡€ç¯‡ | å¦‚ä½•ç”¨æ•°æ®è§‚æµ‹Page Cacheï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é‚µäºšæ–¹ã€‚ä»Šå¤©æˆ‘æƒ³å’Œä½ èŠä¸€èŠPage Cacheçš„è¯é¢˜ã€‚</p><p>Page Cacheä½ åº”è¯¥ä¸é™Œç”Ÿäº†ï¼Œå¦‚æœä½ æ˜¯ä¸€ååº”ç”¨å¼€å‘è€…æˆ–è€…Linuxè¿ç»´äººå‘˜ï¼Œé‚£ä¹ˆåœ¨å·¥ä½œä¸­ï¼Œä½ å¯èƒ½é‡è§è¿‡ä¸Page Cacheæœ‰å…³çš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼š</p><ul>\n<li>æœåŠ¡å™¨çš„loadé£™é«˜ï¼›</li>\n<li>æœåŠ¡å™¨çš„I/Oååé£™é«˜ï¼›</li>\n<li>ä¸šåŠ¡å“åº”æ—¶å»¶å‡ºç°å¤§çš„æ¯›åˆºï¼›</li>\n<li>ä¸šåŠ¡å¹³å‡è®¿é—®æ—¶å»¶æ˜æ˜¾å¢åŠ ã€‚</li>\n</ul><p>è¿™äº›é—®é¢˜ï¼Œå¾ˆå¯èƒ½æ˜¯ç”±äºPage Cacheç®¡ç†ä¸åˆ°ä½å¼•èµ·çš„ï¼Œå› ä¸ºPage Cacheç®¡ç†ä¸å½“é™¤äº†ä¼šå¢åŠ ç³»ç»ŸI/Oååå¤–ï¼Œè¿˜ä¼šå¼•èµ·ä¸šåŠ¡æ€§èƒ½æŠ–åŠ¨ï¼Œæˆ‘åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šå¤„ç†è¿‡å¾ˆå¤šè¿™ç±»é—®é¢˜ã€‚</p><p>æ®æˆ‘è§‚å¯Ÿï¼Œè¿™ç±»é—®é¢˜å‡ºç°åï¼Œä¸šåŠ¡å¼€å‘äººå‘˜ä»¥åŠè¿ç»´äººå‘˜å¾€å¾€ä¼šæŸæ‰‹æ— ç­–ï¼Œç©¶å…¶åŸå› åœ¨äºä»–ä»¬å¯¹Page Cacheçš„ç†è§£ä»…ä»…åœç•™åœ¨æ¦‚å¿µä¸Šï¼Œå¹¶ä¸æ¸…æ¥šPage Cacheå¦‚ä½•å’Œåº”ç”¨ã€ç³»ç»Ÿå…³è”èµ·æ¥ï¼Œå¯¹å®ƒå¼•å‘çš„é—®é¢˜è‡ªç„¶ä¼šæŸæ‰‹æ— ç­–äº†ã€‚æ‰€ä»¥ï¼Œè¦æƒ³ä¸å†è¸©Page Cacheçš„å‘ï¼Œä½ å¿…é¡»å¯¹å®ƒæœ‰ä¸ªæ¸…æ™°çš„è®¤è¯†ã€‚</p><p>é‚£ä¹ˆåœ¨æˆ‘çœ‹æ¥ï¼Œè®¤è¯†Page Cacheæœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯ç”¨æ•°æ®è¯´è¯ï¼Œé€šè¿‡å…·ä½“çš„æ•°æ®ä½ ä¼šæ›´åŠ æ·±å…¥åœ°ç†è§£Page Cacheçš„æœ¬è´¨ã€‚ä¸ºäº†å¸®ä½ æ¶ˆåŒ–å’Œç†è§£ï¼Œæˆ‘ä¼šç”¨ä¸¤èŠ‚è¯¾çš„æ—¶é—´ï¼Œç”¨æ•°æ®å‰–æä»€ä¹ˆæ˜¯Page Cacheï¼Œä¸ºä»€ä¹ˆéœ€è¦Page Cacheï¼ŒPage Cacheçš„äº§ç”Ÿå’Œå›æ”¶æ˜¯ä»€ä¹ˆæ ·çš„ã€‚è¿™æ ·ä¸€æ¥ï¼Œä½ ä¼šä»æœ¬è´¨åˆ°è¡¨è±¡ï¼Œé€å½»ç†è§£å®ƒï¼Œæ·±åˆ‡æ„Ÿå—å®ƒå’Œä½ çš„åº”ç”¨ç¨‹åºä¹‹é—´çš„å…³ç³»ï¼Œä»è€Œèƒ½æ›´å¥½åœ°ç†è§£ä¸Šé¢æåˆ°çš„å››ä¸ªé—®é¢˜ã€‚</p><!-- [[[read_end]]] --><p>ä¸è¿‡ï¼Œåœ¨è¿™é‡Œæˆ‘æƒ³ç»™ä½ æä¸ªé†’ï¼Œè¦å­¦ä¹ ä»Šå¤©çš„å†…å®¹ï¼Œä½ æœ€å¥½å…·å¤‡ä¸€äº›Linuxç¼–ç¨‹çš„åŸºç¡€ï¼Œæ¯”å¦‚ï¼Œå¦‚ä½•æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼›å¦‚ä½•è¯»å†™ä¸€ä¸ªæ–‡ä»¶ï¼›å¦‚ä½•å…³é—­ä¸€ä¸ªæ–‡ä»¶ç­‰ç­‰ã€‚è¿™æ ·ï¼Œä½ ç†è§£ä»Šå¤©çš„å†…å®¹ä¼šæ›´åŠ å®¹æ˜“ï¼Œå½“ç„¶äº†ï¼Œä¸å…·å¤‡ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå¦‚æœé‡åˆ°ä½ å®åœ¨çœ‹ä¸æ‡‚çš„åœ°æ–¹ï¼Œä½ å¯ä»¥æŸ¥é˜…ã€ŠUNIXç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹è¿™æœ¬ä¹¦ï¼Œå®ƒæ˜¯æ¯ä¸€ä½Linuxå¼€å‘è€…ä»¥åŠè¿ç»´äººå‘˜å¿…çœ‹çš„å…¥é—¨ä¹¦ç±ã€‚</p><p>å¥½äº†ï¼Œè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬è¿›å…¥ä»Šå¤©çš„å­¦ä¹ ã€‚</p><h2>ä»€ä¹ˆæ˜¯Page Cacheï¼Ÿ</h2><p>æˆ‘è®°å¾—å¾ˆå¤šåº”ç”¨å¼€å‘è€…æˆ–è€…è¿ç»´åœ¨å‘æˆ‘å¯»æ±‚å¸®åŠ©ï¼Œè§£å†³Page Cacheå¼•èµ·çš„é—®é¢˜æ—¶ï¼Œæ€»æ˜¯å–œæ¬¢é—®æˆ‘Page Cacheåˆ°åº•æ˜¯å±äºå†…æ ¸è¿˜æ˜¯å±äºç”¨æˆ·ï¼Ÿé’ˆå¯¹è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä¸€èˆ¬ä¼šè®©ä»–ä»¬å…ˆçœ‹ä¸‹é¢è¿™å¼ å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f3/1b/f344917f3cacd5bc06ae7c743a217f1b.png?wh=2860*2440\" alt=\"\" title=\"åº”ç”¨ç¨‹åºäº§ç”ŸPage Cacheçš„é€»è¾‘ç¤ºæ„å›¾ \"></p><p>é€šè¿‡è¿™å¼ å›¾ç‰‡ä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œçº¢è‰²çš„åœ°æ–¹å°±æ˜¯Page Cacheï¼Œ<strong>å¾ˆæ˜æ˜¾ï¼ŒPage Cacheæ˜¯å†…æ ¸ç®¡ç†çš„å†…å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå±äºå†…æ ¸ä¸å±äºç”¨æˆ·ã€‚</strong></p><p>é‚£å’±ä»¬æ€ä¹ˆæ¥è§‚å¯ŸPage Cacheå‘¢ï¼Ÿå…¶å®ï¼Œåœ¨Linuxä¸Šç›´æ¥æŸ¥çœ‹Page Cacheçš„æ–¹å¼æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬/proc/meminfoã€free ã€/proc/vmstatå‘½ä»¤ç­‰ï¼Œå®ƒä»¬çš„å†…å®¹å…¶å®æ˜¯ä¸€è‡´çš„ã€‚</p><p>æˆ‘ä»¬æ‹¿/proc/meminfoå‘½ä»¤ä¸¾ä¾‹çœ‹ä¸€ä¸‹ï¼ˆå¦‚æœä½ æƒ³äº†è§£/proc/meminfoä¸­æ¯ä¸€é¡¹å…·ä½“å«ä¹‰çš„è¯ï¼Œå¯ä»¥å»çœ‹<a href=\"https://www.kernel.org/doc/Documentation/filesystems/proc.rst\">Kernel Documentation</a>çš„meminfoè¿™ä¸€èŠ‚ï¼Œå®ƒè¯¦ç»†è§£é‡Šäº†æ¯ä¸€é¡¹çš„å…·ä½“å«ä¹‰ï¼ŒKernel Documentationæ˜¯åº”ç”¨å¼€å‘è€…æƒ³è¦äº†è§£å†…æ ¸æœ€ç®€å•ã€ç›´æ¥çš„æ–¹å¼ï¼‰ã€‚</p><pre><code>$ cat /proc/meminfo\n...\nBuffers:            1224 kB\nCached:           111472 kB\nSwapCached:        36364 kB\nActive:          6224232 kB\nInactive:         979432 kB\nActive(anon):    6173036 kB\nInactive(anon):   927932 kB\nActive(file):      51196 kB\nInactive(file):    51500 kB\n...\nShmem:             10000 kB\n...\nSReclaimable:      43532 kB\n...\n</code></pre><p>æ ¹æ®ä¸Šé¢çš„æ•°æ®ï¼Œä½ å¯ä»¥ç®€å•å¾—å‡ºè¿™æ ·çš„å…¬å¼ï¼ˆç­‰å¼ä¸¤è¾¹ä¹‹å’Œéƒ½æ˜¯112696 KBï¼‰ï¼š</p><blockquote>\n<p>Buffers + Cached + SwapCached = Active(file) + Inactive(file) + Shmem + SwapCached</p>\n</blockquote><p><strong>é‚£ä¹ˆç­‰å¼ä¸¤è¾¹çš„å†…å®¹å°±æ˜¯æˆ‘ä»¬å¹³æ—¶è¯´çš„Page Cacheã€‚</strong>è¯·æ³¨æ„ä½ æ²¡æœ‰çœ‹é”™ï¼Œä¸¤è¾¹éƒ½æœ‰SwapCachedï¼Œä¹‹æ‰€ä»¥è¦æŠŠå®ƒæ”¾åœ¨ç­‰å¼é‡Œï¼Œå°±æ˜¯è¯´å®ƒä¹Ÿæ˜¯Page Cacheçš„ä¸€éƒ¨åˆ†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å¸¦ä½ åˆ†æä¸€ä¸‹è¿™äº›é¡¹çš„å…·ä½“å«ä¹‰ã€‚ç­‰å¼å³è¾¹è¿™äº›é¡¹æŠŠBufferså’ŒCachedåšäº†ä¸€ä¸‹ç»†åˆ†ï¼Œåˆ†ä¸ºäº†Active(file)ï¼ŒInactive(file) å’ŒShmemï¼Œå› ä¸ºBuffersæ›´åŠ ä¾èµ–äºå†…æ ¸å®ç°ï¼Œåœ¨ä¸åŒå†…æ ¸ç‰ˆæœ¬ä¸­å®ƒçš„å«ä¹‰å¯èƒ½æœ‰äº›ä¸ä¸€è‡´ï¼Œè€Œç­‰å¼å³è¾¹å’Œåº”ç”¨ç¨‹åºçš„å…³ç³»æ›´åŠ ç›´æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»ç­‰å¼å³è¾¹æ¥åˆ†æã€‚</p><p>åœ¨Page Cacheä¸­ï¼ŒActive(file)+Inactive(file)æ˜¯File-backed pageï¼ˆä¸æ–‡ä»¶å¯¹åº”çš„å†…å­˜é¡µï¼‰ï¼Œæ˜¯ä½ æœ€éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ã€‚å› ä¸ºä½ å¹³æ—¶ç”¨çš„mmap()å†…å­˜æ˜ å°„æ–¹å¼å’Œbuffered I/Oæ¥æ¶ˆè€—çš„å†…å­˜å°±å±äºè¿™éƒ¨åˆ†ï¼Œ<strong>æœ€é‡è¦çš„æ˜¯ï¼Œè¿™éƒ¨åˆ†åœ¨çœŸå®çš„ç”Ÿäº§ç¯å¢ƒä¸Šä¹Ÿæœ€å®¹æ˜“äº§ç”Ÿé—®é¢˜ï¼Œ</strong>æˆ‘ä»¬åœ¨æ¥ä¸‹æ¥çš„è¯¾ç¨‹æ¡ˆä¾‹ç¯‡ä¼šé‡ç‚¹åˆ†æå®ƒã€‚</p><p>è€ŒSwapCachedæ˜¯åœ¨æ‰“å¼€äº†Swapåˆ†åŒºåï¼ŒæŠŠInactive(anon)+Active(anon)è¿™ä¸¤é¡¹é‡Œçš„åŒ¿åé¡µç»™äº¤æ¢åˆ°ç£ç›˜ï¼ˆswap outï¼‰ï¼Œç„¶åå†è¯»å…¥åˆ°å†…å­˜ï¼ˆswap inï¼‰ååˆ†é…çš„å†…å­˜ã€‚<strong>ç”±äºè¯»å…¥åˆ°å†…å­˜ååŸæ¥çš„Swap Fileè¿˜åœ¨ï¼Œæ‰€ä»¥SwapCachedä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯File-backed pageï¼Œå³å±äºPage Cacheã€‚</strong>è¿™æ ·åšçš„ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†å‡å°‘I/Oã€‚ä½ æ˜¯ä¸æ˜¯è§‰å¾—è¿™ä¸ªè¿‡ç¨‹æœ‰äº›å¤æ‚ï¼Ÿæˆ‘ä»¬ç”¨ä¸€å¼ å›¾ç›´è§‚åœ°çœ‹ä¸€ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a9/7b/a9010acc1d7b55d5c24562d2c32b437b.jpg?wh=4336*1491\" alt=\"\"></p><p>æˆ‘å¸Œæœ›ä½ èƒ½é€šè¿‡è¿™ä¸ªç®€å•çš„ç¤ºæ„å›¾æ˜ç™½SwapCachedæ˜¯æ€ä¹ˆäº§ç”Ÿçš„ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä½ è¦æ³¨æ„ï¼ŒSwapCachedåªåœ¨Swapåˆ†åŒºæ‰“å¼€çš„æƒ…å†µä¸‹æ‰ä¼šæœ‰ï¼Œè€Œæˆ‘å»ºè®®ä½ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å…³é—­Swapåˆ†åŒºï¼Œå› ä¸ºSwapè¿‡ç¨‹äº§ç”Ÿçš„I/Oä¼šå¾ˆå®¹æ˜“å¼•èµ·æ€§èƒ½æŠ–åŠ¨ã€‚</p><p>é™¤äº†SwapCachedï¼ŒPage Cacheä¸­çš„Shmemæ˜¯æŒ‡åŒ¿åå…±äº«æ˜ å°„è¿™ç§æ–¹å¼åˆ†é…çš„å†…å­˜ï¼ˆfreeå‘½ä»¤ä¸­sharedè¿™ä¸€é¡¹ï¼‰ï¼Œæ¯”å¦‚tmpfsï¼ˆä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œè¿™éƒ¨åˆ†åœ¨çœŸå®çš„ç”Ÿäº§ç¯å¢ƒä¸­äº§ç”Ÿçš„é—®é¢˜æ¯”è¾ƒå°‘ï¼Œä¸æ˜¯æˆ‘ä»¬ä»Šå¤©çš„é‡ç‚¹å†…å®¹ï¼Œæˆ‘ä»¬è¿™èŠ‚è¯¾ä¸å¯¹å®ƒåšè¿‡å¤šå…³æ³¨ï¼Œä½ çŸ¥é“æœ‰è¿™å›äº‹å°±å¯ä»¥äº†ã€‚</p><p>å½“ç„¶äº†ï¼Œå¾ˆå¤šåŒå­¦ä¹Ÿå–œæ¬¢ç”¨freeå‘½ä»¤æ¥æŸ¥çœ‹ç³»ç»Ÿä¸­æœ‰å¤šå°‘Page Cacheï¼Œä¼šæ ¹æ®buff/cacheæ¥åˆ¤æ–­å­˜åœ¨å¤šå°‘Page Cacheã€‚å¦‚æœä½ å¯¹freeå‘½ä»¤æœ‰æ‰€äº†è§£çš„è¯ï¼Œè‚¯å®šçŸ¥é“freeå‘½ä»¤ä¹Ÿæ˜¯é€šè¿‡è§£æ/proc/meminfoå¾—å‡ºè¿™äº›ç»Ÿè®¡æ•°æ®çš„ï¼Œè¿™äº›éƒ½å¯ä»¥é€šè¿‡freeå·¥å…·çš„æºç æ¥æ‰¾åˆ°ã€‚freeå‘½ä»¤çš„æºç æ˜¯å¼€æºï¼Œä½ å¯ä»¥å»çœ‹ä¸‹<a href=\"https://gitlab.com/procps-ng/procps\">procfs</a>é‡Œçš„free.cæ–‡ä»¶ï¼Œæºç æ˜¯æœ€ç›´æ¥çš„ç†è§£æ–¹å¼ï¼Œå®ƒä¼šåŠ æ·±ä½ å¯¹freeå‘½ä»¤çš„ç†è§£ã€‚</p><p>ä¸è¿‡ä½ æ˜¯å¦å¥½å¥‡è¿‡ï¼Œfreeå‘½ä»¤ä¸­çš„buff/cacheç©¶ç«Ÿæ˜¯æŒ‡ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬åœ¨è¿™é‡Œå…ˆç®€å•åœ°çœ‹ä¸€ä¸‹ï¼š</p><pre><code>$ free -k\n              total        used        free      shared  buff/cache   available\nMem:        7926580     7277960      492392       10000      156228      430680\nSwap:       8224764      380748     7844016\n</code></pre><p>é€šè¿‡procfsæºç é‡Œé¢çš„<a href=\"https://gitlab.com/procps-ng/procps/-/blob/master/proc/sysinfo.c\">proc/sysinfo.c</a>è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥å‘ç°buff/cacheåŒ…æ‹¬ä¸‹é¢è¿™å‡ é¡¹ï¼š</p><blockquote>\n<p>buff/cache = Buffers + Cached + SReclaimable</p>\n</blockquote><p>é€šè¿‡å‰é¢çš„æ•°æ®æˆ‘ä»¬ä¹Ÿå¯ä»¥éªŒè¯è¿™ä¸ªå…¬å¼: 1224 + 111472 + 43532çš„å’Œæ˜¯156228ã€‚</p><p>å¦å¤–ï¼Œè¿™é‡Œä½ è¦æ³¨æ„ï¼Œä½ åœ¨åšæ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œä¸€å®šè¦è€ƒè™‘åˆ°è¿™äº›æ•°æ®æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œè€Œä¸”æ‰§è¡Œå‘½ä»¤æœ¬èº«ä¹Ÿä¼šå¸¦æ¥å†…å­˜å¼€é”€ï¼Œæ‰€ä»¥è¿™ä¸ªç­‰å¼æœªå¿…ä¼šä¸¥æ ¼ç›¸ç­‰ï¼Œä¸è¿‡ä½ ä¸å¿…æ€€ç–‘å®ƒçš„æ­£ç¡®æ€§ã€‚</p><p>ä»è¿™ä¸ªå…¬å¼ä¸­ï¼Œä½ èƒ½çœ‹åˆ°freeå‘½ä»¤ä¸­çš„buff/cacheæ˜¯ç”±Buffersã€Cachedå’ŒSReclaimableè¿™ä¸‰é¡¹ç»„æˆçš„ï¼Œå®ƒå¼ºè°ƒçš„æ˜¯å†…å­˜çš„å¯å›æ”¶æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥è¢«å›æ”¶çš„å†…å­˜ä¼šç»Ÿè®¡åœ¨è¿™ä¸€é¡¹ã€‚</p><p>å…¶ä¸­SReclaimableæ˜¯æŒ‡å¯ä»¥è¢«å›æ”¶çš„å†…æ ¸å†…å­˜ï¼ŒåŒ…æ‹¬dentryå’Œinodeç­‰ã€‚è€Œè¿™éƒ¨åˆ†å†…å®¹æ˜¯å†…æ ¸éå¸¸ç»†èŠ‚æ€§çš„ä¸œè¥¿ï¼Œå¯¹äºåº”ç”¨å¼€å‘è€…å’Œè¿ç»´äººå‘˜ç†è§£èµ·æ¥ç›¸å¯¹æœ‰äº›éš¾åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œä¸å¤šè¯´ã€‚</p><p>æŒæ¡äº†Page Cacheå…·ä½“ç”±å“ªäº›éƒ¨åˆ†æ„æˆä¹‹åï¼Œåœ¨å®ƒå¼•å‘ä¸€äº›é—®é¢˜æ—¶ï¼Œä½ å°±èƒ½å¤ŸçŸ¥é“éœ€è¦å»è§‚å¯Ÿä»€ä¹ˆã€‚æ¯”å¦‚è¯´ï¼Œåº”ç”¨æœ¬èº«æ¶ˆè€—å†…å­˜ï¼ˆRSSï¼‰ä¸å¤šçš„æƒ…å†µä¸‹ï¼Œæ•´ä¸ªç³»ç»Ÿçš„å†…å­˜ä½¿ç”¨ç‡è¿˜æ˜¯å¾ˆé«˜ï¼Œé‚£ä¸å¦¨å»æ’æŸ¥ä¸‹æ˜¯ä¸æ˜¯Shmem(å…±äº«å†…å­˜)æ¶ˆè€—äº†å¤ªå¤šå†…å­˜å¯¼è‡´çš„ã€‚</p><p>è®²åˆ°è¿™å„¿ï¼Œæˆ‘æƒ³ä½ åº”è¯¥å¯¹Page Cacheæœ‰äº†ä¸€äº›ç›´è§‚çš„è®¤è¯†äº†å§ï¼Ÿå½“ç„¶äº†ï¼Œæœ‰çš„äººå¯èƒ½ä¼šè¯´ï¼Œå†…æ ¸çš„Page Cacheè¿™ä¹ˆå¤æ‚ï¼Œæˆ‘ä¸è¦ä¸å¯ä»¥ä¹ˆï¼Ÿ</p><p>æˆ‘ç›¸ä¿¡æœ‰è¿™æ ·æƒ³æ³•çš„äººä¸åœ¨å°‘æ•°ï¼Œå¦‚æœä¸ç”¨å†…æ ¸ç®¡ç†çš„Page Cacheï¼Œé‚£æœ‰ä¸¤ç§æ€è·¯æ¥è¿›è¡Œå¤„ç†ï¼š</p><ul>\n<li>ç¬¬ä¸€ç§ï¼Œåº”ç”¨ç¨‹åºç»´æŠ¤è‡ªå·±çš„Cacheåšæ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œæ¯”å¦‚MySQLå°±æ˜¯è¿™æ ·åšçš„ï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://dev.mysql.com/doc/refman/8.0/en/innodb-buffer-pool.html\">MySQL Buffer Pool</a> ï¼Œå®ƒçš„å®ç°å¤æ‚åº¦è¿˜æ˜¯å¾ˆé«˜çš„ã€‚å¯¹äºå¤§å¤šæ•°åº”ç”¨è€Œè¨€ï¼Œå®ç°è‡ªå·±çš„Cacheæˆæœ¬è¿˜æ˜¯æŒºé«˜çš„ï¼Œä¸å¦‚å†…æ ¸çš„Page Cacheæ¥å¾—ç®€å•é«˜æ•ˆã€‚</li>\n<li>ç¬¬äºŒç§ï¼Œç›´æ¥ä½¿ç”¨Direct I/Oæ¥ç»•è¿‡Page Cacheï¼Œä¸ä½¿ç”¨Cacheäº†ï¼Œçœçš„å»ç®¡å®ƒäº†ã€‚è¿™ç§æ–¹æ³•å¯è¡Œä¹ˆï¼Ÿé‚£æˆ‘ä»¬ç»§ç»­ç”¨æ•°æ®è¯´è¯ï¼Œçœ‹çœ‹è¿™ç§åšæ³•çš„é—®é¢˜åœ¨å“ªå„¿ï¼Ÿ</li>\n</ul><h2>ä¸ºä»€ä¹ˆéœ€è¦Page Cacheï¼Ÿ</h2><p>é€šè¿‡ç¬¬ä¸€å¼ å›¾ä½ å…¶å®å·²ç»å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°ï¼Œæ ‡å‡†I/Oå’Œå†…å­˜æ˜ å°„ä¼šå…ˆæŠŠæ•°æ®å†™å…¥åˆ°Page Cacheï¼Œè¿™æ ·åšä¼šé€šè¿‡å‡å°‘I/Oæ¬¡æ•°æ¥æå‡è¯»å†™æ•ˆç‡ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥ç”Ÿæˆä¸€ä¸ª1Gå¤§å°çš„æ–°æ–‡ä»¶ï¼Œç„¶åæŠŠPage Cacheæ¸…ç©ºï¼Œç¡®ä¿æ–‡ä»¶å†…å®¹ä¸åœ¨å†…å­˜ä¸­ï¼Œä»¥æ­¤æ¥æ¯”è¾ƒç¬¬ä¸€æ¬¡è¯»æ–‡ä»¶å’Œç¬¬äºŒæ¬¡è¯»æ–‡ä»¶è€—æ—¶çš„å·®å¼‚ã€‚å…·ä½“çš„æµç¨‹å¦‚ä¸‹ã€‚</p><p>å…ˆç”Ÿæˆä¸€ä¸ª1Gçš„æ–‡ä»¶ï¼š</p><blockquote>\n<p>$ dd if=/dev/zero of=/home/yafang/test/dd.out bs=4096 count=$((1024*256))</p>\n</blockquote><p>å…¶æ¬¡ï¼Œæ¸…ç©ºPage Cacheï¼Œéœ€è¦å…ˆæ‰§è¡Œä¸€ä¸‹syncæ¥å°†è„é¡µï¼ˆç¬¬äºŒèŠ‚è¯¾ï¼Œæˆ‘ä¼šè§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯è„é¡µï¼‰åŒæ­¥åˆ°ç£ç›˜å†å»drop cacheã€‚</p><blockquote>\n<p>$ sync &amp;&amp; echo 3 &gt; /proc/sys/vm/drop_caches</p>\n</blockquote><p>ç¬¬ä¸€æ¬¡è¯»å–æ–‡ä»¶çš„è€—æ—¶å¦‚ä¸‹ï¼š</p><pre><code>$ time cat /home/yafang/test/dd.out &amp;&gt; /dev/null\nreal\t0m5.733s\nuser\t0m0.003s\nsys\t0m0.213s\n</code></pre><p>å†æ¬¡è¯»å–æ–‡ä»¶çš„è€—æ—¶å¦‚ä¸‹ï¼š</p><pre><code>$ time cat /home/yafang/test/dd.out &amp;&gt; /dev/null \nreal\t0m0.132s\nuser\t0m0.001s\nsys\t0m0.130s\n</code></pre><p>é€šè¿‡è¿™æ ·è¯¦ç»†çš„è¿‡ç¨‹ä½ å¯ä»¥çœ‹åˆ°ï¼Œç¬¬äºŒæ¬¡è¯»å–æ–‡ä»¶çš„è€—æ—¶è¿œå°äºç¬¬ä¸€æ¬¡çš„è€—æ—¶ï¼Œè¿™æ˜¯å› ä¸ºç¬¬ä¸€æ¬¡æ˜¯ä»ç£ç›˜æ¥è¯»å–çš„å†…å®¹ï¼Œç£ç›˜I/Oæ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œè€Œç¬¬äºŒæ¬¡è¯»å–çš„æ—¶å€™ç”±äºæ–‡ä»¶å†…å®¹å·²ç»åœ¨ç¬¬ä¸€æ¬¡è¯»å–æ—¶è¢«è¯»åˆ°å†…å­˜äº†ï¼Œæ‰€ä»¥æ˜¯ç›´æ¥ä»å†…å­˜è¯»å–çš„æ•°æ®ï¼Œå†…å­˜ç›¸æ¯”ç£ç›˜é€Ÿåº¦æ˜¯å¿«å¾ˆå¤šçš„ã€‚<strong>è¿™å°±æ˜¯Page Cacheå­˜åœ¨çš„æ„ä¹‰ï¼šå‡å°‘I/Oï¼Œæå‡åº”ç”¨çš„I/Oé€Ÿåº¦ã€‚</strong></p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ ä¸æƒ³ä¸ºäº†å¾ˆç»†è‡´åœ°ç®¡ç†å†…å­˜è€Œå¢åŠ åº”ç”¨ç¨‹åºçš„å¤æ‚åº¦ï¼Œé‚£ä½ è¿˜æ˜¯ä¹–ä¹–ä½¿ç”¨å†…æ ¸ç®¡ç†çš„Page Cacheå§ï¼Œå®ƒæ˜¯ROI(æŠ•å…¥äº§å‡ºæ¯”)ç›¸å¯¹è¾ƒé«˜çš„ä¸€ä¸ªæ–¹æ¡ˆã€‚</p><p>ä½ è¦çŸ¥é“ï¼Œæˆ‘ä»¬åœ¨åšæ–¹æ¡ˆæŠ‰æ‹©æ—¶æ‰¾åˆ°ä¸€ä¸ªå„æ–¹é¢éƒ½å¾ˆå®Œç¾çš„æ–¹æ¡ˆè¿˜æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯ç»è¿‡æƒè¡¡åæ¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ–¹æ¡ˆã€‚å› ä¸ºï¼Œæˆ‘ä¸€ç›´åšä¿¡ï¼Œåˆé€‚çš„å°±æ˜¯æœ€å¥½çš„ã€‚</p><p>è€Œæˆ‘ä¹‹æ‰€ä»¥è¯´Page Cacheæ˜¯åˆé€‚çš„ï¼Œè€Œä¸æ˜¯è¯´å®ƒæ˜¯æœ€å¥½çš„ï¼Œé‚£æ˜¯å› ä¸ºPage Cacheçš„ä¸è¶³ä¹‹å¤„ä¹Ÿæ˜¯æœ‰çš„ï¼Œè¿™ä¸ªä¸è¶³ä¹‹å¤„ä¸»è¦ä½“ç°åœ¨ï¼Œå®ƒå¯¹åº”ç”¨ç¨‹åºå¤ªè¿‡äºé€æ˜ï¼Œä»¥è‡³äºåº”ç”¨ç¨‹åºå¾ˆéš¾æœ‰å¥½æ–¹æ³•æ¥æ§åˆ¶å®ƒã€‚</p><p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿè¦æƒ³çŸ¥é“è¿™ä¸ªç­”æ¡ˆï¼Œä½ å°±éœ€è¦äº†è§£Page Cacheçš„äº§ç”Ÿè¿‡ç¨‹ï¼Œè¿™é‡Œå–ä¸ªå…³å­ï¼Œæˆ‘åœ¨ä¸‹ä¸€è®²ä¼šè·Ÿä½ è®¨è®ºã€‚</p><h2>è¯¾å ‚æ€»ç»“</h2><p>æˆ‘ä»¬è¿™èŠ‚è¯¾ä¸»è¦æ˜¯è®²è¿°äº†å¦‚ä½•å¾ˆå¥½åœ°ç†è§£Page Cacheï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè¦æƒ³å¾ˆå¥½çš„ç†è§£å®ƒï¼Œç›´è§‚çš„æ–¹å¼å°±æ˜¯ä»æ•°æ®å…¥æ‰‹ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»å¦‚ä½•è§‚æµ‹Page Cacheå‡ºå‘æ¥å¸¦ä½ è®¤è¯†ä»€ä¹ˆæ˜¯Page Cacheï¼›ç„¶åå†ä»å®ƒä¸ºä»€ä¹ˆå®¹æ˜“äº§ç”Ÿé—®é¢˜å‡ºå‘ï¼Œå¸¦ä½ å›é¡¾äº†å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼Œæˆ‘å¸Œæœ›é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œå¸®ä½ æ˜ç¡®è¿™æ ·å‡ ä¸ªè¦ç‚¹ï¼š</p><ol>\n<li>Page Cacheæ˜¯å±äºå†…æ ¸çš„ï¼Œä¸å±äºç”¨æˆ·ã€‚</li>\n<li>Page Cacheå¯¹åº”ç”¨æå‡I/Oæ•ˆç‡è€Œè¨€æ˜¯ä¸€ä¸ªæŠ•å…¥äº§å‡ºæ¯”è¾ƒé«˜çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥å®ƒçš„å­˜åœ¨è¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚</li>\n</ol><p>åœ¨æˆ‘çœ‹æ¥ï¼Œå¦‚ä½•ç®¡ç†å¥½Page Cacheï¼Œæœ€ä¸»è¦çš„æ˜¯ä½ è¦çŸ¥é“å¦‚ä½•æ¥è§‚æµ‹å®ƒä»¥åŠè§‚æµ‹å…³äºå®ƒçš„ä¸€äº›è¡Œä¸ºï¼Œæœ‰äº†è¿™äº›æ•°æ®åšæ”¯æ’‘ï¼Œä½ æ‰èƒ½å¤ŸæŠŠå®ƒå’Œä½ çš„ä¸šåŠ¡æ›´å¥½åœ°ç»“åˆèµ·æ¥ã€‚è€Œä¸”ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œå½“ä½ å¯¹æŸä¸€ä¸ªæ¦‚å¿µå¾ˆæ¨¡ç³Šã€æä¸æ¸…æ¥šå®ƒåˆ°åº•æ˜¯ä»€ä¹ˆæ—¶ï¼Œæœ€å¥½çš„è®¤çŸ¥æ–¹å¼å°±æ˜¯å…ˆææ˜ç™½å¦‚ä½•æ¥è§‚æµ‹å®ƒï¼Œç„¶ååŠ¨æ‰‹å»è§‚æµ‹çœ‹çœ‹å®ƒç©¶ç«Ÿæ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Œæ­£æ‰€è°“çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œï¼</p><p>è¿™èŠ‚è¯¾å°±è®²åˆ°è¿™é‡Œï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬ä½¿ç”¨æ•°æ®æ¥è§‚å¯ŸPage Cacheçš„äº§ç”Ÿå’Œé‡Šæ”¾ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä½ å°±èƒ½äº†è§£Page Cacheçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œä»è€Œå¯¹äºå®ƒå¼•å‘çš„ä¸€äº›é—®é¢˜èƒ½æœ‰ä¸€ä¸ªå¤§æ¦‚çš„åˆ¤æ–­ã€‚</p><h2>è¯¾åä½œä¸š</h2><p>æœ€åæˆ‘ç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ï¼Œè¯·ä½ å†™ä¸€ä¸ªç¨‹åºæ¥æ„é€ å‡ºæ¥Page Cacheï¼Œç„¶åè§‚å¯Ÿ/proc/meminfoå’Œ/proc/vmstaté‡Œé¢çš„æ•°æ®æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Œ æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„çœ‹æ³•ã€‚</p><p>æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœä½ è®¤ä¸ºè¿™èŠ‚è¯¾çš„å†…å®¹æœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ã€‚</p>","comments":[{"had_liked":false,"id":245302,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1598888331,"is_pvip":false,"replies":[{"id":"90245","content":"pagecacheå’Œç¡¬ä»¶å…³ç³»ä¸å¤§ï¼Œå¦‚æœè¯´pagecacheä¸€å®šè¦è·Ÿç¡¬ä»¶å…³è”èµ·æ¥çš„è¯ï¼Œä¼šæœ‰è¿™å‡ æ–¹é¢ï¼šä¸€ä¸ªpageæœ‰å¤šå¤§ï¼Œtlbæœ‰å¤šå¤§ï¼Œcacheæœ‰å¤šå¤§ï¼Œç‰©ç†å†…å­˜å¤šå¤§ï¼Œç£ç›˜æ˜¯ssdï¼Œhddè¿˜æ˜¯nvmeã€‚pageçš„å¤§å°å’Œç‰©ç†å†…å­˜çš„å¤§å°å†³å®šäº†pagecacheçš„é‡ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°pagecacheçš„å›æ”¶æœºåˆ¶å…¶å®æ˜¯ç‹¬ç«‹äºè¿™ä¸ªé‡çš„ï¼Œä¹Ÿå°±æ˜¯ï¼Œä¸è®ºå®ƒæœ‰å¤šå°‘ï¼Œactiveå’Œinactiveçš„æ›¿æ¢é€»è¾‘æ˜¯ä¸å˜çš„ã€‚tlbå¤§å°å’Œcacheå¤§å°åˆ™å½±å“äº†pagecacheå‘½ä¸­ä¸å¦çš„æ€§èƒ½ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°ç›¸æ¯”pagecache missè€Œè¨€ï¼Œtlb&#47;cache misså‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œè¿™æ˜¯ä¸åŒæ•°é‡çº§çš„å·®å¼‚ã€‚ç£ç›˜ä»‹è´¨åˆå†³å®šäº†pagecacheçš„é‡è¦æ€§ï¼Œå¦‚æœä½ çš„ç£ç›˜æ˜¯hddï¼Œé‚£pagecacheå¯¹åº”ç”¨çš„æå‡ä¼šéå¸¸æ˜æ˜¾ï¼›å¦‚æœæ˜¯nvmeï¼Œé‚£ä¹ˆpagecache missåä¸šåŠ¡çš„æ€§èƒ½ä¸‹é™ä¹Ÿä¸ä¼šå¤ªæ˜æ˜¾ï¼›ä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œä¸è®ºç£ç›˜ä»‹è´¨æ˜¯ä»€ä¹ˆï¼Œpagecacheå¦‚æœå‘½ä¸­çš„è¯ï¼Œå®ƒçš„æ€§èƒ½éƒ½æ˜¯æ•°é‡çº§çš„å·®å¼‚ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œpagecacheè‡ªèº«çš„æœºåˆ¶æ˜¯ç‹¬ç«‹ä¸ç¡¬ä»¶çš„ï¼Œä¸è®ºä½ æ˜¯ä»€ä¹ˆæ ·çš„ç¡¬ä»¶ï¼Œéƒ½è¦å°½é‡ä¿éšœçƒ­æ•°æ®åœ¨å†…å­˜ä¸­ï¼Œè€Œå†·æ•°æ®åˆ™å°½é‡ä¸è¦å ç”¨å†…å­˜ï¼Œè¿™å°±æ˜¯pagecacheæœºåˆ¶çš„æ ¸å¿ƒã€‚<br>æ¢ä¸€ä¸ªè§’åº¦è€Œè¨€ï¼Œä¸è®ºæ˜¯x86è¿˜æ˜¯armï¼Œlinuxéƒ½è¦èƒ½å·¥ä½œï¼Œè€Œèƒ½å·¥ä½œå°±æ˜¯linuxçš„æœ¬è´¨ï¼Œè¿™ä¸ªæœ¬è´¨æ˜¯æˆ‘ä»¬æƒ³è¦è®¨è®ºçš„ã€‚è€Œä¸æ˜¯è®¨è®ºlinuxåœ¨armä¸Šçš„å·¥ä½œå’Œx86çš„å·¥ä½œä¼šæœ‰ä»€ä¹ˆå·®å¼‚ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598935396,"ip_address":"","comment_id":245302,"utype":1}],"discussion_count":2,"race_medal":0,"score":"100383136139","product_id":100058001,"comment_content":"Codingèƒ½åŠ›æœ‰é™ï¼šä¸è¿‡å­¦è¿‡å€ªé¹é£è€å¸ˆçš„è¯¾ï¼Œä¾§é‡ç‚¹åº”å½“ä¸åŒå§ï¼›PageCacheå¤§å°çš„åˆç†è®¾ç½®ä¸çŸ¥é“ä¸ºä½•è€å¸ˆä¸æ›¾æåŠï¼Ÿå•ç‹¬çš„å»è°ˆä»£ç ä¼¼ä¹å¿˜äº†åº•å±‚ç¡¬ä»¶å§ã€‚æˆ‘ä»¬è¯´æ€§èƒ½æ˜¯åŸºäºç¡¬ä»¶å»æé—®ï¼Œè€å¸ˆå•ç‹¬çš„å»é—®è€Œä¸æåŠç¡¬ä»¶åŸºç¡€æ˜¯å¦ã€ã€ã€è¿™å°±åƒæˆ‘ä»¬å»è¯´æ€ä¹ˆæ ·å»è®¾ç½®è½¯ä»¶æ›´åˆç†ï¼Œä¸å»æåŠæˆ‘ä»¬ç¡¬ä»¶çš„ä¸»é¢‘å’Œå¤§å°ä»¥åŠã€ã€ã€","like_count":24,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504840,"discussion_content":"pagecacheå’Œç¡¬ä»¶å…³ç³»ä¸å¤§ï¼Œå¦‚æœè¯´pagecacheä¸€å®šè¦è·Ÿç¡¬ä»¶å…³è”èµ·æ¥çš„è¯ï¼Œä¼šæœ‰è¿™å‡ æ–¹é¢ï¼šä¸€ä¸ªpageæœ‰å¤šå¤§ï¼Œtlbæœ‰å¤šå¤§ï¼Œcacheæœ‰å¤šå¤§ï¼Œç‰©ç†å†…å­˜å¤šå¤§ï¼Œç£ç›˜æ˜¯ssdï¼Œhddè¿˜æ˜¯nvmeã€‚pageçš„å¤§å°å’Œç‰©ç†å†…å­˜çš„å¤§å°å†³å®šäº†pagecacheçš„é‡ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°pagecacheçš„å›æ”¶æœºåˆ¶å…¶å®æ˜¯ç‹¬ç«‹äºè¿™ä¸ªé‡çš„ï¼Œä¹Ÿå°±æ˜¯ï¼Œä¸è®ºå®ƒæœ‰å¤šå°‘ï¼Œactiveå’Œinactiveçš„æ›¿æ¢é€»è¾‘æ˜¯ä¸å˜çš„ã€‚tlbå¤§å°å’Œcacheå¤§å°åˆ™å½±å“äº†pagecacheå‘½ä¸­ä¸å¦çš„æ€§èƒ½ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°ç›¸æ¯”pagecache missè€Œè¨€ï¼Œtlb/cache misså‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œè¿™æ˜¯ä¸åŒæ•°é‡çº§çš„å·®å¼‚ã€‚ç£ç›˜ä»‹è´¨åˆå†³å®šäº†pagecacheçš„é‡è¦æ€§ï¼Œå¦‚æœä½ çš„ç£ç›˜æ˜¯hddï¼Œé‚£pagecacheå¯¹åº”ç”¨çš„æå‡ä¼šéå¸¸æ˜æ˜¾ï¼›å¦‚æœæ˜¯nvmeï¼Œé‚£ä¹ˆpagecache missåä¸šåŠ¡çš„æ€§èƒ½ä¸‹é™ä¹Ÿä¸ä¼šå¤ªæ˜æ˜¾ï¼›ä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œä¸è®ºç£ç›˜ä»‹è´¨æ˜¯ä»€ä¹ˆï¼Œpagecacheå¦‚æœå‘½ä¸­çš„è¯ï¼Œå®ƒçš„æ€§èƒ½éƒ½æ˜¯æ•°é‡çº§çš„å·®å¼‚ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œpagecacheè‡ªèº«çš„æœºåˆ¶æ˜¯ç‹¬ç«‹ä¸ç¡¬ä»¶çš„ï¼Œä¸è®ºä½ æ˜¯ä»€ä¹ˆæ ·çš„ç¡¬ä»¶ï¼Œéƒ½è¦å°½é‡ä¿éšœçƒ­æ•°æ®åœ¨å†…å­˜ä¸­ï¼Œè€Œå†·æ•°æ®åˆ™å°½é‡ä¸è¦å ç”¨å†…å­˜ï¼Œè¿™å°±æ˜¯pagecacheæœºåˆ¶çš„æ ¸å¿ƒã€‚\næ¢ä¸€ä¸ªè§’åº¦è€Œè¨€ï¼Œä¸è®ºæ˜¯x86è¿˜æ˜¯armï¼Œlinuxéƒ½è¦èƒ½å·¥ä½œï¼Œè€Œèƒ½å·¥ä½œå°±æ˜¯linuxçš„æœ¬è´¨ï¼Œè¿™ä¸ªæœ¬è´¨æ˜¯æˆ‘ä»¬æƒ³è¦è®¨è®ºçš„ã€‚è€Œä¸æ˜¯è®¨è®ºlinuxåœ¨armä¸Šçš„å·¥ä½œå’Œx86çš„å·¥ä½œä¼šæœ‰ä»€ä¹ˆå·®å¼‚ã€‚\n","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1598935396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2226372,"avatar":"https://static001.geekbang.org/account/avatar/00/21/f8/c4/106fb7c3.jpg","nickname":"QQ","note":"","ucode":"6925756AECB50D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385376,"discussion_content":"è€å¸ˆå›ç­”çš„èµã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1627020613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243082,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1597941575,"is_pvip":false,"replies":[{"id":"89724","content":"bufferå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç±»ç‰¹æ®Šæ–‡ä»¶çš„cacheï¼Œè¿™ç±»ç‰¹æ®Šæ–‡ä»¶å°±æ˜¯è®¾å¤‡æ–‡ä»¶ï¼Œæ¯”å¦‚&#47;dev&#47;sda1, è¿™ç±»è®¾å¤‡æ–‡ä»¶çš„å†…å®¹è¢«è¯»åˆ°å†…å­˜åå°±æ˜¯bufferã€‚è€Œcachedåˆ™æ˜¯æ™®é€šæ–‡ä»¶çš„å†…å®¹è¢«è¯»åˆ°äº†å†…å­˜ã€‚ä½ å¯ä»¥åšä¸€ä¸ªè¯•éªŒï¼Œè¿è¡Œä¸‹é¢è¿™ä¸ªç¨‹åºï¼Œç„¶åè§‚å¯Ÿ&#47;proc&#47;meminfoé‡ŒBufferså’ŒCachedè¿™ä¸¤é¡¹çš„å˜åŒ–ï¼Œä½ ä¼šå‘ç°å¢åŠ çš„æ˜¯å‰è€…ã€‚<br>#include &lt;sys&#47;types.h&gt;<br>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;sys&#47;stat.h&gt;<br>#include &lt;fcntl.h&gt;<br>#include &lt;unistd.h&gt;<br><br>#define DEV &quot;&#47;dev&#47;sda1&quot;<br>#define SIZE (1024 * 1024 * 1024)<br><br>int main()<br>{<br>        int fd = open(DEV, O_RDONLY);<br>        char *buf;<br>        int size;<br><br>        buf = malloc(SIZE);<br>        if (!buf)<br>                return -1;<br><br>        size = read(fd, buf, SIZE);<br>        printf(&quot;%d\\n&quot;, size);<br><br>        while (1) {<br>        }<br><br>        return 0;<br>}","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598175239,"ip_address":"","comment_id":243082,"utype":1}],"discussion_count":6,"race_medal":0,"score":"78907352903","product_id":100058001,"comment_content":"è€å¸ˆå¥½ï¼Œèƒ½è¯¦ç»†è®²ä¸€ä¸‹buffer cacheå’Œpage cacheçš„åŒºåˆ«å—ï¼Ÿè¿™ä¸¤ä¸ªåˆ°åº•ä½œç”¨åœ¨å“ªçš„ã€‚","like_count":19,"discussions":[{"author":{"id":1449481,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIt0nAFvqib3fpf9AIKUrEJMdbiaPjnKqCryevwjRdqrbzAIxdOn3P5wCz28MNb5Bgb2PwEdCezLEWg/132","nickname":"KennyQ","note":"","ucode":"5F9AFFCBC086DB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301232,"discussion_content":"æœ€ç®€å•çš„ç†è§£æ–¹å¼ï¼Œbufferæ˜¯ç¼“å­˜è£¸è®¾å¤‡çš„è¯»å†™ï¼Œcacheæ˜¯ç¼“å­˜æ–‡ä»¶ç³»ç»Ÿçš„è¯»å†™ã€‚","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1598449123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1318941,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/1d/0c1a184c.jpg","nickname":"ç½—è¾‘æ€ç»´","note":"","ucode":"D257A06EDE928E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540152,"discussion_content":"bufferæ˜¯å—æ•°æ®ï¼Œcacheæ˜¯æ–‡ä»¶ç³»ç»Ÿã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639972458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504173,"discussion_content":"bufferå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç±»ç‰¹æ®Šæ–‡ä»¶çš„cacheï¼Œè¿™ç±»ç‰¹æ®Šæ–‡ä»¶å°±æ˜¯è®¾å¤‡æ–‡ä»¶ï¼Œæ¯”å¦‚/dev/sda1, è¿™ç±»è®¾å¤‡æ–‡ä»¶çš„å†…å®¹è¢«è¯»åˆ°å†…å­˜åå°±æ˜¯bufferã€‚è€Œcachedåˆ™æ˜¯æ™®é€šæ–‡ä»¶çš„å†…å®¹è¢«è¯»åˆ°äº†å†…å­˜ã€‚ä½ å¯ä»¥åšä¸€ä¸ªè¯•éªŒï¼Œè¿è¡Œä¸‹é¢è¿™ä¸ªç¨‹åºï¼Œç„¶åè§‚å¯Ÿ/proc/meminfoé‡ŒBufferså’ŒCachedè¿™ä¸¤é¡¹çš„å˜åŒ–ï¼Œä½ ä¼šå‘ç°å¢åŠ çš„æ˜¯å‰è€…ã€‚\n#include &amp;lt;sys/types.h&amp;gt;\n#include &amp;lt;stdio.h&amp;gt;\n#include &amp;lt;stdlib.h&amp;gt;\n#include &amp;lt;sys/stat.h&amp;gt;\n#include &amp;lt;fcntl.h&amp;gt;\n#include &amp;lt;unistd.h&amp;gt;\n\n#define DEV &amp;quot;/dev/sda1&amp;quot;\n#define SIZE (1024 * 1024 * 1024)\n\nint main()\n{\n        int fd = open(DEV, O_RDONLY);\n        char *buf;\n        int size;\n\n        buf = malloc(SIZE);\n        if (!buf)\n                return -1;\n\n        size = read(fd, buf, SIZE);\n        printf(&amp;quot;%d\\n&amp;quot;, size);\n\n        while (1) {\n        }\n\n        return 0;\n}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598175239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2147698,"avatar":"https://static001.geekbang.org/account/avatar/00/20/c5/72/e1981015.jpg","nickname":"ç¥ç»è›™","note":"","ucode":"498A55DF0004B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301171,"discussion_content":"è¯»å†™ç£ç›˜çš„ç¼“å­˜å…·ä½“æŒ‡çš„æ˜¯å“ªäº›å†…å®¹å‘¢ï¼Ÿå…ƒæ•°æ®å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598432562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"Frank","note":"","ucode":"9DADD72C193296","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2147698,"avatar":"https://static001.geekbang.org/account/avatar/00/20/c5/72/e1981015.jpg","nickname":"ç¥ç»è›™","note":"","ucode":"498A55DF0004B7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301443,"discussion_content":"å…·ä½“æ˜¯ä»€ä¹ˆå‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598528698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301171,"ip_address":""},"score":301443,"extra":""}]},{"author":{"id":1066928,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/b0/a9b77a1e.jpg","nickname":"å†¬é£å‘å·¦å¹","note":"","ucode":"376C45C5134F93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300669,"discussion_content":"bufferæ˜¯è¯»å†™ç£ç›˜çš„ç¼“å­˜ï¼Œcacheæ˜¯è¯»å†™æ–‡ä»¶çš„ç¼“å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598230630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244707,"user_name":"Geek_lucky_brian","can_delete":false,"product_type":"c1","uid":1350275,"ip_address":"","ucode":"4949713DBF99A0","user_header":"https://static001.geekbang.org/account/avatar/00/14/9a/83/0802f4e7.jpg","comment_is_top":false,"comment_ctime":1598626604,"is_pvip":false,"replies":[{"id":"90102","content":"dropcacheä¸ä¼šæ¸…ç†è„é¡µï¼Œåªä¼šæ¸…ç†å¹²å‡€çš„é¡µï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³æ¸…ç†æ‰€æœ‰çš„é¡µçš„è¯ï¼Œæ˜¯éœ€è¦åœ¨dropå‰å…ˆsyncçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598717630,"ip_address":"","comment_id":244707,"utype":1}],"discussion_count":4,"race_medal":0,"score":"70318103340","product_id":100058001,"comment_content":"æ„Ÿè§‰å­¦ä¹ åˆ°äº†å¾ˆå¤šã€‚è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸åšsyncè€Œæ˜¯ç›´æ¥å»drop cacheï¼ŒdropæœŸé—´æ˜¯ä¸æ˜¯ä¹Ÿä¼šæŠŠè„é¡µåˆ·ç›˜å‘¢ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦å•ç‹¬åšä¸€æ¬¡syncå‘¢ï¼Ÿç›´æ¥drop cacheä¸å°±å¥½äº†å—","like_count":17,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504673,"discussion_content":"dropcacheä¸ä¼šæ¸…ç†è„é¡µï¼Œåªä¼šæ¸…ç†å¹²å‡€çš„é¡µï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³æ¸…ç†æ‰€æœ‰çš„é¡µçš„è¯ï¼Œæ˜¯éœ€è¦åœ¨dropå‰å…ˆsyncçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598717630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445744,"avatar":"https://static001.geekbang.org/account/avatar/00/16/0f/70/f59db672.jpg","nickname":"æ§‘Â·å…ˆç”Ÿ","note":"","ucode":"897F0475592E3A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378327,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623163728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1042714,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/1NMAMj2T81BGLJhsnJ7IZL9BeP6LoX6ajukkTKficABoStaE6mAFHBibRQ3HiaG3VNJibVtqQy5m9RMibGfic62yibd7g/132","nickname":"kali","note":"","ucode":"7159F913A83016","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369645,"discussion_content":"å¹²å‡€çš„é¡µè¿˜è¦æ¸…ç†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619103079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1318941,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/1d/0c1a184c.jpg","nickname":"ç½—è¾‘æ€ç»´","note":"","ucode":"D257A06EDE928E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1042714,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/1NMAMj2T81BGLJhsnJ7IZL9BeP6LoX6ajukkTKficABoStaE6mAFHBibRQ3HiaG3VNJibVtqQy5m9RMibGfic62yibd7g/132","nickname":"kali","note":"","ucode":"7159F913A83016","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541654,"discussion_content":"å¹²å‡€çš„é¡µæ˜¯æŒ‡å¯ä»¥è¢«ç›´æ¥å›æ”¶ï¼Œè€Œä¸ç”¨å†™å…¥åˆ°ç£ç›˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640502977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":369645,"ip_address":""},"score":541654,"extra":""}]}]},{"had_liked":false,"id":243461,"user_name":"Joe Black","can_delete":false,"product_type":"c1","uid":1052528,"ip_address":"","ucode":"21FE222A286445","user_header":"https://static001.geekbang.org/account/avatar/00/10/0f/70/c8680841.jpg","comment_is_top":false,"comment_ctime":1598140818,"is_pvip":false,"replies":[{"id":"89727","content":"æ˜¯çš„ã€‚å¦‚æœåªè¯»ä¸€éåç»­å†ä¹Ÿä¸ä¼šç”¨åˆ°ï¼Œé‚£ç¡®å®æ²¡æœ‰å¿…è¦è¿˜ç”¨pagecacheï¼Œä½¿ç”¨direct IOå°±å¯ä»¥äº†ã€‚è€Œä¸”è¶…å¤§æ–‡ä»¶è¯»å…¥åˆ°å†…å­˜ä¹Ÿä¼šå½±å“å…¶ä»–è¿›ç¨‹å¯¹å†…å­˜çš„ä½¿ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598175709,"ip_address":"","comment_id":243461,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57432715666","product_id":100058001,"comment_content":"æˆ‘ä»¬çš„æ•°æ®å¤„ç†ç®—æ³•å®é™…ä¸Šå¯¹è¶…å¤§è¾“å…¥æ–‡ä»¶æ˜¯ä»å¤´åˆ°å°¾è¯»ä¸€éï¼Œè€Œä¸”æ•´ä¸ªç¨‹åºä»…è¯»ä¸€éï¼Œè¿™æ ·å…¶å®ç”¨direct ioå°±è¡Œäº†å§ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504292,"discussion_content":"æ˜¯çš„ã€‚å¦‚æœåªè¯»ä¸€éåç»­å†ä¹Ÿä¸ä¼šç”¨åˆ°ï¼Œé‚£ç¡®å®æ²¡æœ‰å¿…è¦è¿˜ç”¨pagecacheï¼Œä½¿ç”¨direct IOå°±å¯ä»¥äº†ã€‚è€Œä¸”è¶…å¤§æ–‡ä»¶è¯»å…¥åˆ°å†…å­˜ä¹Ÿä¼šå½±å“å…¶ä»–è¿›ç¨‹å¯¹å†…å­˜çš„ä½¿ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598175709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242725,"user_name":"Q","can_delete":false,"product_type":"c1","uid":1047423,"ip_address":"","ucode":"785546C617D3DF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/7f/746a6f5e.jpg","comment_is_top":false,"comment_ctime":1597824608,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"31662595680","product_id":100058001,"comment_content":"â€ä»è¿™ä¸ªå…¬å¼ä¸­ï¼Œä½ èƒ½çœ‹åˆ° free å‘½ä»¤ä¸­çš„ buff&#47;cache æ˜¯ç”± Buffersã€Cached å’Œ SReclaimable è¿™ä¸‰é¡¹ç»„æˆçš„ï¼Œå®ƒå¼ºè°ƒçš„æ˜¯å†…å­˜çš„å¯å›æ”¶æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥è¢«å›æ”¶çš„å†…å­˜ä¼šç»Ÿè®¡åœ¨è¿™ä¸€é¡¹â€œ -- è¯»åˆ°è¿™å¥è¯ï¼Œæ„Ÿè§‰è±ç„¶å¼€æœ—ï¼Œæˆ‘ä»¬çŸ¥é“Linuxæ˜¯å°½å¯èƒ½æŠŠç©ºé—²å†…å­˜ä½œä¸ºIOçš„ç¼“å­˜æ¥ä½¿ç”¨ï¼Œæå‡æ–‡ä»¶è¯»å†™çš„æ•ˆç‡ï¼Œä½†æ˜¯è¿™äº›å†…å­˜æ˜¯å¯ä»¥æŒ‰å®é™…éœ€æ±‚ä¼šè¿›è¡Œå›æ”¶çš„ã€‚æœç„¶ï¼Œè·Ÿå¤§ä½¬å­¦ä¹ èƒ½å‡å°‘è‡ªå·±ç†è§£çš„éš¾åº¦ã€‚","like_count":8,"discussions":[{"author":{"id":2131211,"avatar":"https://static001.geekbang.org/account/avatar/00/20/85/0b/bc946509.jpg","nickname":"ç¬‘çœ‹é£äº‘","note":"","ucode":"941983B7CD786B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299943,"discussion_content":"ä»ç•™è¨€åŒºä¹Ÿèƒ½getåˆ°çŸ¥è¯†ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597885966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243541,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1598176198,"is_pvip":true,"replies":[{"id":"89923","content":"å¯ä»¥ç†è§£ä¸ºæ˜¯ç£ç›˜çš„ç¼“å­˜ï¼Œä½†æ˜¯å®ƒå±äºå†…å­˜ï¼Œä¸å±äºç£ç›˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598452238,"ip_address":"","comment_id":243541,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27367979974","product_id":100058001,"comment_content":"æ‰€ä»¥ Page Cache å°±æ˜¯ ç£ç›˜çš„ä¸€ä¸ªç¼“å­˜åŒºï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504321,"discussion_content":"å¯ä»¥ç†è§£ä¸ºæ˜¯ç£ç›˜çš„ç¼“å­˜ï¼Œä½†æ˜¯å®ƒå±äºå†…å­˜ï¼Œä¸å±äºç£ç›˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598452238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301956,"discussion_content":"åˆçœ‹åˆ°ä½ äº†ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598717251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1449481,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIt0nAFvqib3fpf9AIKUrEJMdbiaPjnKqCryevwjRdqrbzAIxdOn3P5wCz28MNb5Bgb2PwEdCezLEWg/132","nickname":"KennyQ","note":"","ucode":"5F9AFFCBC086DB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301236,"discussion_content":"å‡†ç¡®çš„è¯´æ˜¯é€šè¿‡å†…å­˜ç»™é€»è¾‘ç£ç›˜åˆ†é…ä¸€å—ç¼“å­˜åŒº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598449477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242662,"user_name":"å¤§é£å“¥","can_delete":false,"product_type":"c1","uid":1046810,"ip_address":"","ucode":"DEBAE3967CA0D3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f9/1a/d289c2ac.jpg","comment_is_top":false,"comment_ctime":1597806002,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27367609778","product_id":100058001,"comment_content":"å¾ˆæ£’ï¼Œè®©æˆ‘ä»¬æ¯”è¾ƒç³»ç»Ÿçš„äº†è§£äº†Page Cacheï¼Œè¦è§‚æµ‹PageCacheå°±ç›´æ¥è¯»å†™æ–‡ä»¶å°±èƒ½æ„Ÿå—å¾—åˆ°äº†ï¼Œç‰¹åˆ«æ˜¯å¤§æ–‡ä»¶ï¼Œå¯ä»¥ä¸O_DIRECTä¸€èµ·å¯¹æ¯”ã€‚å¦‚æœè°ƒè¯•è¿‡ç¨‹å‘ç°IOè¿™ä¸€å—ç¡®å®å®¹æ˜“å‡ºé—®é¢˜çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ mount -o commit é™ä½æ–‡ä»¶ç³»ç»ŸåŒæ­¥æ—¶é—´å¯ä»¥æ›´å¿«å¤ç°åŠæŸ¥æ‰¾é—®é¢˜ã€‚","like_count":7},{"had_liked":false,"id":247937,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1599921824,"is_pvip":true,"replies":[{"id":"91426","content":"ç¼“å­˜ioæ˜¯æŒ‡åº”ç”¨åœ¨è¯»ç£ç›˜æ–‡ä»¶çš„æ—¶å€™ä¼šå…ˆç»è¿‡ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ï¼Œè€Œä¸”ç›´æ¥ioåˆ™ä¸ç»è¿‡ç¼“å­˜è€Œç›´æ¥ä¸ç£ç›˜äº¤äº’ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1600510423,"ip_address":"","comment_id":247937,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23074758304","product_id":100058001,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œåœ¨æœ‰äº›åœ°æ–¹çœ‹åˆ°ç»è¿‡PageCacheçš„Ioå«ç¼“å­˜IOï¼Œæœ‰äº›åœ°æ–¹è¯´æ˜¯ç›´æ¥IOã€‚ä¸çŸ¥é“ç¼“å­˜IOï¼Œç›´æ¥IOæœ‰ä»€ä¹ˆåŒºåˆ«å—","like_count":6,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505530,"discussion_content":"ç¼“å­˜ioæ˜¯æŒ‡åº”ç”¨åœ¨è¯»ç£ç›˜æ–‡ä»¶çš„æ—¶å€™ä¼šå…ˆç»è¿‡ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ï¼Œè€Œä¸”ç›´æ¥ioåˆ™ä¸ç»è¿‡ç¼“å­˜è€Œç›´æ¥ä¸ç£ç›˜äº¤äº’ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600510423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243246,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1598003007,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23072839487","product_id":100058001,"comment_content":"è€å¸ˆè®²çš„ä¸é”™ï¼Œæ·±å…¥æµ…å‡ºï¼<br>æ€»ç»“ï¼š<br>PageCacheçš„è®¡ç®—ï¼š<br>Buffers + Cached + SwapCached = Active(file) + Inactive(file) + Shmem + SwapCached<br>â‘ SwapCached æ˜¯åœ¨æ‰“å¼€äº† Swap åˆ†åŒºåï¼ŒæŠŠ Inactive(anon)+Active(anon) è¿™ä¸¤é¡¹é‡Œçš„åŒ¿åé¡µç»™äº¤æ¢åˆ°ç£ç›˜ï¼ˆswap outï¼‰ï¼Œç„¶åå†è¯»å…¥åˆ°å†…å­˜ï¼ˆswap inï¼‰ååˆ†é…çš„å†…å­˜ã€‚ç”±äºè¯»å…¥åˆ°å†…å­˜ååŸæ¥çš„ Swap File è¿˜åœ¨ï¼Œæ‰€ä»¥ SwapCached ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ File-backed pageï¼Œå³å±äº Page Cacheã€‚<br>â‘¡SwapCached åªåœ¨ Swap åˆ†åŒºæ‰“å¼€çš„æƒ…å†µä¸‹æ‰ä¼šæœ‰ï¼Œè€Œæˆ‘å»ºè®®ä½ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å…³é—­ Swap åˆ†åŒºï¼Œå› ä¸º Swap è¿‡ç¨‹äº§ç”Ÿçš„ I&#47;O ä¼šå¾ˆå®¹æ˜“å¼•èµ·æ€§èƒ½æŠ–åŠ¨ï¼Œæ‰€ä»¥ä¸€èˆ¬åœ¨ç¦æ­¢swapçš„æƒ…å†µä¸‹å¿½ç•¥SwapCachedã€‚é‚£freeå‘½ä»¤ä¸­çš„buffer&#47;cacheå°±æ˜¯pageCacheã€‚","like_count":5},{"had_liked":false,"id":253476,"user_name":"Geek_c2089d","can_delete":false,"product_type":"c1","uid":1489545,"ip_address":"","ucode":"C66D345042525F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4Lprf2mIWpJOPibgibbFCicMtp5bpIibyLFOnyOhnBGbusrLZC0frG0FGWqdcdCkcKunKxqiaOHvXbCFE7zKJ8TmvIA/132","comment_is_top":false,"comment_ctime":1602749334,"is_pvip":false,"replies":[{"id":"92733","content":"å› ä¸ºswapå¾—æ•°æ®é‡å¾€å¾€è¾ƒå¤§ï¼Œè€Œä¸”å‘ç”Ÿswapæ—¶å¾€å¾€æ˜¯å†…å­˜å¾ˆç´§å¼ æ—¶ï¼Œå„ç§å› ç´ å åŠ ä¼šå¯¼è‡´swapè¿‡ç¨‹éå¸¸å®¹æ˜“å‡ºé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1602917634,"ip_address":"","comment_id":253476,"utype":1}],"discussion_count":4,"race_medal":0,"score":"14487651222","product_id":100058001,"comment_content":"Swap è¿‡ç¨‹äº§ç”Ÿçš„ I&#47;O ä¼šå¾ˆå®¹æ˜“å¼•èµ·æ€§èƒ½æŠ–åŠ¨ä¸å¤ªæ˜ç™½æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507082,"discussion_content":"å› ä¸ºswapå¾—æ•°æ®é‡å¾€å¾€è¾ƒå¤§ï¼Œè€Œä¸”å‘ç”Ÿswapæ—¶å¾€å¾€æ˜¯å†…å­˜å¾ˆç´§å¼ æ—¶ï¼Œå„ç§å› ç´ å åŠ ä¼šå¯¼è‡´swapè¿‡ç¨‹éå¸¸å®¹æ˜“å‡ºé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602917634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2735939,"avatar":"https://static001.geekbang.org/account/avatar/00/29/bf/43/745ca900.jpg","nickname":"Day-Dream","note":"","ucode":"F0A869729F74D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391461,"discussion_content":"åªè¦å‘ç”Ÿswapï¼Œé‚£ä¹ˆä»¥åå‘ç”Ÿswapçš„æ¦‚ç‡å°±å¾ˆå¤§ï¼Œswapçš„ioè¿‡ç¨‹å¾ˆé¢‘ç¹å°±ä¼šé€ æˆå¤§é‡çš„ä¸­æ–­å‘ç”Ÿï¼Œä½“éªŒä¸Šçœ‹ä½ çš„äº¤äº’æ“ä½œä¼šå¾ˆå¡ï¼Œmpstatçœ‹ioä¼šæ¯”è¾ƒé«˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1630475338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2113915,"avatar":"https://static001.geekbang.org/account/avatar/00/20/41/7b/cda2e622.jpg","nickname":"è‡´è‰¯çŸ¥","note":"","ucode":"73C722E31B726A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375597,"discussion_content":"å¤ªé¢‘ç¹çš„ç½®æ¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621762984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2153933,"avatar":"https://static001.geekbang.org/account/avatar/00/20/dd/cd/8a58ac89.jpg","nickname":"error","note":"","ucode":"AED1EF38DBAB76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559133,"discussion_content":"æˆ‘æœ‰ä¸€ä¸ªç–‘é—®æ˜¯å†…å­˜å……è¶³æ—¶ï¼Œswapå´å‘ç”Ÿäº†äº¤æ¢ï¼Œå¤§ä½¬ä»¬é‡åˆ°è¿‡å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648620996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244949,"user_name":"nestle","can_delete":false,"product_type":"c1","uid":1762252,"ip_address":"","ucode":"469800BED81B54","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","comment_is_top":false,"comment_ctime":1598760134,"is_pvip":false,"replies":[{"id":"90165","content":"pagecacheä¸æ˜¯vfsæ¨¡å—æ¥ç®¡ç†çš„ï¼Œvfsåªæ˜¯æä¾›äº†pagecacheçš„ä¸€ä¸ªä½¿ç”¨æ¥å£ï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†ioè¿™ç§æ¥å£ã€‚pagecacheæ˜¯mmè¿™ä¸ªæ¨¡å—æ¥ç®¡ç†çš„ï¼Œå›å†™å’Œé¢„è¯»ä¸»è¦æ˜¯æ¶‰åŠåˆ°mmå’Œioå­ç³»ç»Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598848564,"ip_address":"","comment_id":244949,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14483662022","product_id":100058001,"comment_content":"è€æ˜¯ï¼Œç¬¬ä¸€å¼ å›¾æœ‰ä¸ªåœ°æ–¹æ²¡å¤ªæ˜ç™½ï¼ŒPage Cacheæ˜¯ç”±VFSæ¨¡å—æ¥ç®¡ç†çš„å—ï¼Ÿå›å†™ã€é¢„è¯»è¿™äº›æ“ä½œéƒ½æ˜¯ç”±VFSæ§åˆ¶çš„å—ï¼Ÿè¿˜æ˜¯è¯´VFSåªè´Ÿè´£æ™®é€šæ–‡ä»¶I&#47;Oå‘¢ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504747,"discussion_content":"pagecacheä¸æ˜¯vfsæ¨¡å—æ¥ç®¡ç†çš„ï¼Œvfsåªæ˜¯æä¾›äº†pagecacheçš„ä¸€ä¸ªä½¿ç”¨æ¥å£ï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†ioè¿™ç§æ¥å£ã€‚pagecacheæ˜¯mmè¿™ä¸ªæ¨¡å—æ¥ç®¡ç†çš„ï¼Œå›å†™å’Œé¢„è¯»ä¸»è¦æ˜¯æ¶‰åŠåˆ°mmå’Œioå­ç³»ç»Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598848564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591118,"discussion_content":"ä»€ä¹ˆæ˜¯å›å†™ï¼Œä»€ä¹ˆæ˜¯é¢„è¯»ï¼Œåˆå¿˜è®°äº†ã€‚å¤§ä½¬ä»¬åœ¨å¸®å¿™è§£é‡Šä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666309841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":265429,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1606895947,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10196830539","product_id":100058001,"comment_content":"è€å¸ˆå¥½ï¼Œæƒ³é—®ä¸‹ä½ çŸ¥é“rocketmqæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä½œè€…ç”¨äº†ä¸€ä¸ªå †å¤–å†…å­˜ï¼Œæ‰‹åŠ¨commitä¸€é¡µ4kæ•°æ®æ¥ä¼˜åŒ–å†™pagecacheï¼Œä¸ºä»€ä¹ˆæ˜¯ä¼˜åŒ–å‘¢ï¼Œä¹Ÿå°±æ˜¯å°‘é‡çš„å†™pagecacheå’Œæ¯æ¬¡å†™ä¸€é¡µpagecacheæœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1570088,"avatar":"https://static001.geekbang.org/account/avatar/00/17/f5/28/898a6947.jpg","nickname":"deepz","note":"","ucode":"4BD23A44CDB384","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569312,"discussion_content":"åŒå­¦ï¼Œæœ‰å•¥ç»“è®ºå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651402469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1991953,"avatar":"http://thirdwx.qlogo.cn/mmopen/PiajxSqBRaEJpInuiale8QQNBdZ8uJtwezqxcdGGzsCMsIqlccEhkYnnTA2Zlco5BCLRrHib1VmoXhntCianuIB5DQ/132","nickname":"Geek_ebca97","note":"","ucode":"6BB17223D472F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381419,"discussion_content":"åŒå­¦ï¼Œæœ‰å•¥ç»“è®ºå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625045264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245500,"user_name":"nuo-promise","can_delete":false,"product_type":"c1","uid":1116668,"ip_address":"","ucode":"39C48245330A35","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/fc/6f53d426.jpg","comment_is_top":false,"comment_ctime":1598960887,"is_pvip":false,"replies":[{"id":"90295","content":"æˆ‘åœ¨Macä¸Šéƒ½æ˜¯ä½¿ç”¨Vim+cscopeæ¥é˜…è¯»å†…æ ¸æºç ï¼Œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œæœ€ä¸»è¦æ˜¯è¿™ç§æ–¹å¼åœ¨ä»€ä¹ˆå¹³å°ä¸Šéƒ½èƒ½ç”¨ï¼Œé€šç”¨æ€§è¾ƒå¥½ã€‚<br>è‡³äºå†…æ ¸æºç ï¼Œå¯ä»¥ç´§è·Ÿupstreamçš„æºç æ¥çœ‹ï¼Œåœ¨ä½ é‡åˆ°ä¸€äº›ç–‘æƒ‘æ—¶ï¼Œä½ å¯ä»¥git blameæ¥æŸ¥çœ‹ä¿®æ”¹è®°å½•ï¼Œä¿®æ”¹è®°å½•é‡Œä¸€èˆ¬éƒ½ä¼šè¯¦ç»†è¯´æ˜è¿™ä¹ˆå®ç°çš„åŸå› ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598976232,"ip_address":"","comment_id":245500,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10188895479","product_id":100058001,"comment_content":"è€å¸ˆ,  mac ä¸Šå¯ä»¥æ¨è è¯»linux  kernel çš„ ide å’Œ æ¨è kernel æºç çš„ç‰ˆæœ¬ä¹ˆï¼Ÿè·Ÿç€ä½ çš„æ•™ç¨‹,ç„¶å è¯¾å æºç æ–‡ä»¶çœ‹èµ·æ¥ æ•ˆæœè¿˜æ˜¯ä¸é”™çš„<br>","like_count":2,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504902,"discussion_content":"æˆ‘åœ¨Macä¸Šéƒ½æ˜¯ä½¿ç”¨Vim+cscopeæ¥é˜…è¯»å†…æ ¸æºç ï¼Œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œæœ€ä¸»è¦æ˜¯è¿™ç§æ–¹å¼åœ¨ä»€ä¹ˆå¹³å°ä¸Šéƒ½èƒ½ç”¨ï¼Œé€šç”¨æ€§è¾ƒå¥½ã€‚\nè‡³äºå†…æ ¸æºç ï¼Œå¯ä»¥ç´§è·Ÿupstreamçš„æºç æ¥çœ‹ï¼Œåœ¨ä½ é‡åˆ°ä¸€äº›ç–‘æƒ‘æ—¶ï¼Œä½ å¯ä»¥git blameæ¥æŸ¥çœ‹ä¿®æ”¹è®°å½•ï¼Œä¿®æ”¹è®°å½•é‡Œä¸€èˆ¬éƒ½ä¼šè¯¦ç»†è¯´æ˜è¿™ä¹ˆå®ç°çš„åŸå› ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598976232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242555,"user_name":"Rony","can_delete":false,"product_type":"c1","uid":1023108,"ip_address":"","ucode":"437B5A6ED2B595","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/84/4c72f91a.jpg","comment_is_top":false,"comment_ctime":1597759401,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"10187693993","product_id":100058001,"comment_content":"è¯·é—®ä¸‹flushå’Œfsyncæ“ä½œçš„åŒºåˆ«ï¼Œä»¥åŠé‚£ä¸ªæ“ä½œæ˜¯é’ˆå¯¹page cacheçš„å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1120332,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/4c/e12f3b41.jpg","nickname":"å§œå§œ","note":"","ucode":"1DAD620C8E9F31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342728,"discussion_content":"fflushæ˜¯glibcçš„å‡½æ•°ï¼Œæ˜¯å°†æ•°æ®ä»ç”¨æˆ·ç¼“å†²åŒºæ‰‹åŠ¨åˆ·æ–°åˆ°å†…æ ¸ç¼“å†²åŒºã€‚fsyncåˆ™æ˜¯å°†å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®åˆ·åˆ°ç£ç›˜ä¸­ã€‚äºŒè€…ä½œç”¨çš„å¯¹è±¡ä¸åŒã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610798318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299900,"discussion_content":"flushå’Œfsycnéƒ½å¯ä»¥ç”¨æ¥åˆ·è„é¡µï¼Œåªæ˜¯fsyncå¯ä»¥æ›´åŠ å…·ä½“ä¸€äº›ï¼šæ¯”å¦‚åªåˆ·dataæˆ–è€…åªåˆ·metadataã€‚è€Œä¸”éƒ½å¯ä»¥é’ˆå¯¹pagecacheã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597850645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"Frank","note":"","ucode":"9DADD72C193296","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":301478,"discussion_content":"é‚£ä¸sync å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598535343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299900,"ip_address":""},"score":301478,"extra":""},{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"Frank","note":"","ucode":"9DADD72C193296","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":301961,"discussion_content":"syncä¹Ÿä¼šåˆ·è„é¡µï¼Œå®ƒä¼šåˆ·æ•´ä¸ªç³»ç»Ÿçš„è„é¡µï¼Œè€Œä¸æ˜¯é’ˆå¯¹å…·ä½“æŸä¸ªæ–‡ä»¶ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1598718104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301478,"ip_address":""},"score":301961,"extra":""}]}]},{"had_liked":false,"id":298737,"user_name":"é‡‘æ—¶","can_delete":false,"product_type":"c1","uid":1120428,"ip_address":"","ucode":"3491B2367A7238","user_header":"https://static001.geekbang.org/account/avatar/00/11/18/ac/4d68ba46.jpg","comment_is_top":false,"comment_ctime":1624282701,"is_pvip":false,"replies":[{"id":"112946","content":"å†…æ ¸æ€å’Œç”¨æˆ·æ€æ˜¯æŒ‡è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ å¹¶ä¸èƒ½ç”¨æ¥è¡¨ç¤ºå†…å­˜ã€‚<br>åº”ç”¨ç¨‹åºé€šè¿‡mmapç³»ç»Ÿè°ƒç”¨è¿”å›çš„åœ°å€ç©ºé—´å±äºâ€œç”¨æˆ·ç©ºé—´â€ã€‚<br>mmapçš„ç”¨æˆ·ç©ºé—´çš„åœ°å€å¯¹åº”çš„ç‰©ç†å†…å­˜åˆ™æ˜¯page cacheï¼Œè¿™æ˜¯ä¸åŒçš„æ¦‚å¿µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1631438699,"ip_address":"","comment_id":298737,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5919249997","product_id":100058001,"comment_content":"mmap äº§ç”Ÿçš„pageCache ä¹Ÿæ˜¯å†…æ ¸æ€çš„å—","like_count":2,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522225,"discussion_content":"å†…æ ¸æ€å’Œç”¨æˆ·æ€æ˜¯æŒ‡è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ å¹¶ä¸èƒ½ç”¨æ¥è¡¨ç¤ºå†…å­˜ã€‚\nåº”ç”¨ç¨‹åºé€šè¿‡mmapç³»ç»Ÿè°ƒç”¨è¿”å›çš„åœ°å€ç©ºé—´å±äºâ€œç”¨æˆ·ç©ºé—´â€ã€‚\nmmapçš„ç”¨æˆ·ç©ºé—´çš„åœ°å€å¯¹åº”çš„ç‰©ç†å†…å­˜åˆ™æ˜¯page cacheï¼Œè¿™æ˜¯ä¸åŒçš„æ¦‚å¿µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631438699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242393,"user_name":"æƒ","can_delete":false,"product_type":"c1","uid":1251996,"ip_address":"","ucode":"BB608E9341FCD4","user_header":"https://static001.geekbang.org/account/avatar/00/13/1a/9c/082cf625.jpg","comment_is_top":false,"comment_ctime":1597712025,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5892679321","product_id":100058001,"comment_content":"ç¬¬ä¸€å¼ å›¾å¾ˆèµï¼Œä¸€å›¾èƒœåƒè¨€","like_count":1},{"had_liked":false,"id":315155,"user_name":"ç¥ ç€","can_delete":false,"product_type":"c1","uid":2412628,"ip_address":"","ucode":"B06A9CFA0A0269","user_header":"https://static001.geekbang.org/account/avatar/00/24/d0/54/9230c283.jpg","comment_is_top":false,"comment_ctime":1633707323,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633707323","product_id":100058001,"comment_content":"åœ¨è™šæ‹Ÿæœºç¯å¢ƒå’ŒçœŸæœºç¯å¢ƒä¸‹çš„Page Cacheæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿå¦å¤–æˆ‘æ³¨æ„åˆ°windowsçš„WSLç¯å¢ƒçš„ubuntuæ˜¯æ²¡æœ‰&#47;proc&#47;sys&#47;vm&#47;drop_cachesè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":301472,"user_name":"tianfeiyu","can_delete":false,"product_type":"c1","uid":1157786,"ip_address":"","ucode":"E65E6841AD5D7F","user_header":"https://static001.geekbang.org/account/avatar/00/11/aa/9a/92d2df36.jpg","comment_is_top":false,"comment_ctime":1625710109,"is_pvip":false,"replies":[{"id":"112942","content":"å¦‚æœæ²¡æœ‰å¼€å¯swapï¼ŒåŒ¿åé¡µå°±åªèƒ½åœ¨å†…å­˜ä¸­ï¼ŒçŸ¥é“å®ƒä»¬è¢«é‡Šæ”¾æ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1631437934,"ip_address":"","comment_id":301472,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1625710109","product_id":100058001,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰å¼€å¯ Swap åˆ†åŒºï¼ŒInactive(anon)+Active(anon) æ—¢ç„¶ä¸ä¼šåœ¨ page cacheï¼Œé‚£å°±åªä¼šå­˜åœ¨å†…å­˜ä¸­å—","like_count":1,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523006,"discussion_content":"å¦‚æœæ²¡æœ‰å¼€å¯swapï¼ŒåŒ¿åé¡µå°±åªèƒ½åœ¨å†…å­˜ä¸­ï¼ŒçŸ¥é“å®ƒä»¬è¢«é‡Šæ”¾æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631437934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294153,"user_name":"è½©è½©","can_delete":false,"product_type":"c1","uid":2135870,"ip_address":"","ucode":"80456F9A167A19","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/K2DPibcnicQFUOxEGrnHysfvAqK8uyXCR3vqsas3xNwqvIMVuGoWRIV37Kiaia3vUlPkMRD5mDWh1OPaOBTEs86zbA/132","comment_is_top":false,"comment_ctime":1621787659,"is_pvip":false,"replies":[{"id":"113035","content":"sreclaimableæ˜¯slabçš„ä¸€ç§ ä¸»è¦æ˜¯å†…æ ¸çš„ä¸€äº›æ•°æ®ç»“æ„å¯¹åº”çš„æ•°æ®ï¼›buffersåˆ™æ˜¯ç›´æ¥è¯»å–çš„è®¾å¤‡æ•°æ®ã€‚äºŒè€…çš„å«ä¹‰ä¸ä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1631546611,"ip_address":"","comment_id":294153,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1621787659","product_id":100058001,"comment_content":"ä½ å¥½ï¼Œâ€œä½ å¯ä»¥å‘ç° buff&#47;cache åŒ…æ‹¬ä¸‹é¢è¿™å‡ é¡¹ï¼š<br>buff&#47;cache = Buffers + Cached + SReclaimableâ€<br>è¯·é—®buffersç»Ÿè®¡é‡Œé¢çš„ç¡®æ˜¯ä¸åŒ…æ‹¬SReclaimableè¿™ä¸ªçš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520532,"discussion_content":"sreclaimableæ˜¯slabçš„ä¸€ç§ ä¸»è¦æ˜¯å†…æ ¸çš„ä¸€äº›æ•°æ®ç»“æ„å¯¹åº”çš„æ•°æ®ï¼›buffersåˆ™æ˜¯ç›´æ¥è¯»å–çš„è®¾å¤‡æ•°æ®ã€‚äºŒè€…çš„å«ä¹‰ä¸ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631546611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282991,"user_name":"å§‘å°„ä»™äºº","can_delete":false,"product_type":"c1","uid":1008517,"ip_address":"","ucode":"3EFC1F3E592165","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/85/1dc41622.jpg","comment_is_top":false,"comment_ctime":1615513060,"is_pvip":false,"replies":[{"id":"104499","content":"å¯¹çš„ï¼Œ page cacheå°±å±äºfilesystem cacheã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1618145741,"ip_address":"","comment_id":282991,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615513060","product_id":100058001,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹æ–‡ç« è¯´è¦ä¸ºESä¿ç•™è¶³å¤Ÿçš„filesystem cacheï¼Œè¿™ä¸ªå’ŒPage Cacheæ˜¯ä¸€å›äº‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516901,"discussion_content":"å¯¹çš„ï¼Œ page cacheå°±å±äºfilesystem cacheã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618145741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252871,"user_name":"BlingBling","can_delete":false,"product_type":"c1","uid":2059896,"ip_address":"","ucode":"E6EFCFE55B3672","user_header":"https://static001.geekbang.org/account/avatar/00/1f/6e/78/e7045b49.jpg","comment_is_top":false,"comment_ctime":1602504736,"is_pvip":true,"replies":[{"id":"92460","content":"Active(file)å’Œinactive(file)ä¼šè¢«åŒ…å«buffers+cachedä¸­ï¼Œä½ è¯´çš„è¿™ä¸ªç°è±¡å¾ˆè¯¡å¼‚ï¼Œä½ æ˜¯ä»€ä¹ˆå†…æ ¸ç‰ˆæœ¬ï¼Ÿèƒ½å¦æŠŠmeminfoé‡Œçš„ä¿¡æ¯éƒ½è´´å‡ºæ¥çœ‹ä¸‹ï¼Ÿ<br><br>freeå‘½ä»¤è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½è·Ÿä½ çš„freeç‰ˆæœ¬æœ‰å…³ï¼Œæœ‰äº›ç‰ˆæœ¬æŠŠbufferså’Œcachedç»™ç»Ÿä¸€äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1602596323,"ip_address":"","comment_id":252871,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1602504736","product_id":100058001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œæˆ‘è¿™è¾¹åœ¨é¡¹ç›®çš„åµŒå…¥å¼è®¾å¤‡ä¸Šï¼Œå‘ç°<br>Buffers + Cached + SwapCached = Active(file) + Inactive(file) + Shmem + SwapCached<br>ä¸¤è€…å¹¶ä¸ç›¸ç­‰ï¼Œ Active(file) + Inactive(file) çš„å’Œè¿œå¤§äºBuffers + Cachedï¼Œè¯·é—®ä¸‹è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿæˆ–è€…ä»€ä¹ˆåŸå› å¯èƒ½å¯¼è‡´è¿™ä¸ªç°è±¡ï¼Ÿ<br><br>å¦å¤–ï¼Œè¿™ä¸ªè®¾å¤‡ä¸Šæ‰§è¡Œfreeå‘½ä»¤ï¼Œçœ‹åˆ°çš„ä¹Ÿåªèƒ½çœ‹åˆ°buffersï¼Œçœ‹ä¸åˆ°cachedï¼Œè¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506903,"discussion_content":"Active(file)å’Œinactive(file)ä¼šè¢«åŒ…å«buffers+cachedä¸­ï¼Œä½ è¯´çš„è¿™ä¸ªç°è±¡å¾ˆè¯¡å¼‚ï¼Œä½ æ˜¯ä»€ä¹ˆå†…æ ¸ç‰ˆæœ¬ï¼Ÿèƒ½å¦æŠŠmeminfoé‡Œçš„ä¿¡æ¯éƒ½è´´å‡ºæ¥çœ‹ä¸‹ï¼Ÿ\n\nfreeå‘½ä»¤è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½è·Ÿä½ çš„freeç‰ˆæœ¬æœ‰å…³ï¼Œæœ‰äº›ç‰ˆæœ¬æŠŠbufferså’Œcachedç»™ç»Ÿä¸€äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602596323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252857,"user_name":"BlingBling","can_delete":false,"product_type":"c1","uid":2059896,"ip_address":"","ucode":"E6EFCFE55B3672","user_header":"https://static001.geekbang.org/account/avatar/00/1f/6e/78/e7045b49.jpg","comment_is_top":false,"comment_ctime":1602503123,"is_pvip":true,"replies":[{"id":"92457","content":"æ˜¯çš„ï¼Œå¹¶ä¸èƒ½ä¿éšœpagecacheè¢«æ¸…é™¤ï¼ŒåŸå› å¯èƒ½æœ‰å‡ ä¸ªï¼š<br>1. æœ‰äº›pagecacheè¢«lockäº†ï¼Œè¢«lockçš„pageæ˜¯æ— æ³•æ¸…æ‰çš„ï¼Œä½ å¯ä»¥é€šè¿‡meminfoæ¥çœ‹æœ‰å¤šlock&#47;unevictableçš„ã€‚<br>2. æœ‰äº›pagecacheè¿˜åœ¨percpuçš„pagevectoré‡Œï¼Œè¿˜æ²¡æœ‰è¢«æ”¾åˆ°lruä¸Šæ‰€ä»¥æ— æ³•æ¸…é™¤ã€‚<br>å¦å¤–ï¼Œä½ çš„å†…æ ¸æ˜¯ä»€ä¹ˆç‰ˆæœ¬ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1602595919,"ip_address":"","comment_id":252857,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1602503123","product_id":100058001,"comment_content":"è¯·æ•™ä¸€ä¸‹ï¼Œsync &amp;&amp; echo 3 &gt; &#47;proc&#47;sys&#47;vm&#47;drop_cacheså‘½ä»¤æ˜¯å¦å¹¶ä¸èƒ½ä¿è¯ä¸€å®šèƒ½å°†cacheæ¸…é™¤ï¼Ÿ<br>æˆ‘åœ¨ä¸€å°åµŒå…¥å¼è®¾å¤‡ä¸Šï¼Œ<br>1. å¤šæ¬¡æ‰§è¡Œcatå‘½ä»¤è¯»å–ddåˆ›å»ºçš„æ–‡ä»¶ï¼Œè€—æ—¶æ— å·®ï¼Œå¹¶ä¸”&#47;proc&#47;memeinfoé‡Œé¢cachedçš„å¤§å°ä¹ŸåŸºæœ¬ä¸å˜ï¼Œ<br>2. æ‰§è¡Œsync &amp;&amp; echo 3 &gt; &#47;proc&#47;sys&#47;vm&#47;drop_cacheså‘½ä»¤åï¼Œç«‹å³æŸ¥çœ‹&#47;proc&#47;memeinfoé‡Œé¢cachedçš„å¤§å°ï¼Œä¹Ÿå’Œå‘½ä»¤æ‰§è¡Œå‰åŸºæœ¬ä¸€è‡´ï¼Ÿ<br>è¯·æ•™ä¸‹è€æ˜¯è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506900,"discussion_content":"æ˜¯çš„ï¼Œå¹¶ä¸èƒ½ä¿éšœpagecacheè¢«æ¸…é™¤ï¼ŒåŸå› å¯èƒ½æœ‰å‡ ä¸ªï¼š\n1. æœ‰äº›pagecacheè¢«lockäº†ï¼Œè¢«lockçš„pageæ˜¯æ— æ³•æ¸…æ‰çš„ï¼Œä½ å¯ä»¥é€šè¿‡meminfoæ¥çœ‹æœ‰å¤šlock/unevictableçš„ã€‚\n2. æœ‰äº›pagecacheè¿˜åœ¨percpuçš„pagevectoré‡Œï¼Œè¿˜æ²¡æœ‰è¢«æ”¾åˆ°lruä¸Šæ‰€ä»¥æ— æ³•æ¸…é™¤ã€‚\nå¦å¤–ï¼Œä½ çš„å†…æ ¸æ˜¯ä»€ä¹ˆç‰ˆæœ¬ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602595919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2059896,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/6e/78/e7045b49.jpg","nickname":"BlingBling","note":"","ucode":"E6EFCFE55B3672","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312623,"discussion_content":"linux localhost 4.14.75","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602751255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249713,"user_name":"ç‰›ç‰›","can_delete":false,"product_type":"c1","uid":1194626,"ip_address":"","ucode":"CFCE68B4F92209","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/82/1ff83a38.jpg","comment_is_top":false,"comment_ctime":1600767655,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600767655","product_id":100058001,"comment_content":"ç¬”è®°ã€å¤‡å¿˜ ~~~~<br><br>buffer&#47;cache = kb_main_buffers + kb_main_cached = kb_main_buffers + (kb_page_cache + kb_slab_reclaimable) = Buffers + (Cached + SReclaimable)<br><br>SReclaimable: æ˜¯æŒ‡å¯ä»¥è¢«å›æ”¶çš„å†…æ ¸å†…å­˜<br><br>Buffers + Cached + SwapCached = Active(file) + Inactive(file) + Shmem + SwapCached<br><br>bufferå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç±»ç‰¹æ®Šæ–‡ä»¶çš„cacheï¼Œè¿™ç±»ç‰¹æ®Šæ–‡ä»¶å°±æ˜¯è®¾å¤‡æ–‡ä»¶<br>cache åˆ™æ˜¯æ™®é€šæ–‡ä»¶çš„ç¼“å­˜<br><br>swapCachedåªæœ‰åœ¨æ‰“å¼€swapçš„æƒ…å†µä¸‹æ‰æœ‰ã€è€Œå®é™…å»ºè®®å…³é—­swapã€æ­¤æ—¶çš„ pageCache = Buffer + cache<br><br>","like_count":0},{"had_liked":false,"id":245668,"user_name":"nuo-promise","can_delete":false,"product_type":"c1","uid":1116668,"ip_address":"","ucode":"39C48245330A35","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/fc/6f53d426.jpg","comment_is_top":false,"comment_ctime":1599020201,"is_pvip":false,"replies":[{"id":"90372","content":"Macæ˜¯æœ‰shellçš„ï¼Œå¯ä»¥åƒä½¿ç”¨linux shellä¸€æ ·æ¥ä½¿ç”¨å®ƒã€‚æˆ‘åœ¨æˆ‘çš„MacBookä¸Šæ˜¯ä½¿ç”¨Vim+cscopeæ¥é˜…è¯»å†…æ ¸æºç ï¼Œç„¶åsshåˆ°linuxä¸»æœºä¸Šå»å¼€å‘å†…æ ¸ã€‚<br>å¦å¤–ï¼ŒMacOSæ˜¯åŸºäºbsdçš„å†…æ ¸ï¼Œè·Ÿlinuxå†…æ ¸ç•¥æœ‰ä¸åŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1599059088,"ip_address":"","comment_id":245668,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1599020201","product_id":100058001,"comment_content":"è€å¸ˆ å¯ä»¥æ¨èä¸€ä¸‹ ä½ å¼€å‘kernel mac è¦éƒ¨ç½²çš„ç¯å¢ƒ æ•™ç¨‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504952,"discussion_content":"Macæ˜¯æœ‰shellçš„ï¼Œå¯ä»¥åƒä½¿ç”¨linux shellä¸€æ ·æ¥ä½¿ç”¨å®ƒã€‚æˆ‘åœ¨æˆ‘çš„MacBookä¸Šæ˜¯ä½¿ç”¨Vim+cscopeæ¥é˜…è¯»å†…æ ¸æºç ï¼Œç„¶åsshåˆ°linuxä¸»æœºä¸Šå»å¼€å‘å†…æ ¸ã€‚\nå¦å¤–ï¼ŒMacOSæ˜¯åŸºäºbsdçš„å†…æ ¸ï¼Œè·Ÿlinuxå†…æ ¸ç•¥æœ‰ä¸åŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599059088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1116668,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/fc/6f53d426.jpg","nickname":"nuo-promise","note":"","ucode":"39C48245330A35","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302903,"discussion_content":"è°¢è°¢ çŸ¥é“äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599059531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244277,"user_name":"KennyQ","can_delete":false,"product_type":"c1","uid":1449481,"ip_address":"","ucode":"5F9AFFCBC086DB","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIt0nAFvqib3fpf9AIKUrEJMdbiaPjnKqCryevwjRdqrbzAIxdOn3P5wCz28MNb5Bgb2PwEdCezLEWg/132","comment_is_top":false,"comment_ctime":1598449794,"is_pvip":true,"replies":[{"id":"89932","content":"æ˜¯çš„ éƒ½æ²¡æœ‰ç®—swapcacheï¼šï¼‰ ä½ æ˜¯ä¸ªå¾ˆç»†å¿ƒçš„äºº èµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598452966,"ip_address":"","comment_id":244277,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598449794","product_id":100058001,"comment_content":"ç­‰å¼ä¸¤è¾¹ä¹‹å’Œéƒ½æ˜¯ 112696 KBï¼Œè¿™ä¸ªå€¼buffer+cacheï¼Œæ²¡ç®—ä¸Šswapcache<br>Buffers:            1224 kB<br>Cached:           111472 kB<br>SwapCached:        36364 kB","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504537,"discussion_content":"æ˜¯çš„ éƒ½æ²¡æœ‰ç®—swapcacheï¼šï¼‰ ä½ æ˜¯ä¸ªå¾ˆç»†å¿ƒçš„äºº èµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598452966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244098,"user_name":"å¿ƒé™å¦‚æ°´","can_delete":false,"product_type":"c1","uid":1712523,"ip_address":"","ucode":"295631D721C3FD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/HFTNSboUOlebZEG3sFa4ewCWkyYyTFGhQhDYT4lQ1XgLBGG6JozjibygicofEG2fJBH5zru4ckA4ryOnrRKIKOvQ/132","comment_is_top":false,"comment_ctime":1598402396,"is_pvip":false,"replies":[{"id":"89929","content":"å¯¹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598452711,"ip_address":"","comment_id":244098,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598402396","product_id":100058001,"comment_content":"åŸæ¥åƒcacheä¸€ç±»çš„å¹¶ä¸æ˜¯ç¼“å­˜å…¨éƒ¨ï¼Œåªæ˜¯ç¼“å­˜ä¸€éƒ¨åˆ†ä½¿ç”¨åˆ°çš„è€Œå·²ï¼Œæ‰€ä»¥å»ºç«‹swapcacheæ˜ç™½äº†","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504480,"discussion_content":"å¯¹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598452711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244091,"user_name":"å¿ƒé™å¦‚æ°´","can_delete":false,"product_type":"c1","uid":1712523,"ip_address":"","ucode":"295631D721C3FD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/HFTNSboUOlebZEG3sFa4ewCWkyYyTFGhQhDYT4lQ1XgLBGG6JozjibygicofEG2fJBH5zru4ckA4ryOnrRKIKOvQ/132","comment_is_top":false,"comment_ctime":1598401428,"is_pvip":false,"replies":[{"id":"89928","content":"swapcacheå¯ä»¥ç†è§£ä¸ºæ˜¯è¾ƒæ´»è·ƒçš„swapï¼Œä½ å¯ä»¥ä»”ç»†çœ‹ä¸‹é‚£å¼ å›¾ç¤ºã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œå³è€ƒè™‘å†…å­˜éœ€æ±‚ï¼Œåˆå…¼é¡¾ioæ•ˆç‡ã€‚å°±åƒlruçš„inactiveå’Œactive listä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598452691,"ip_address":"","comment_id":244091,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1598401428","product_id":100058001,"comment_content":"æš‚æ—¶é—²ç½®çš„è¿›ç¨‹æ‰€å ç”¨çš„å†…å­˜ä¼šè¢«ç§»å‡ºå†…å­˜ä»¥ä¾›å…¶å®ƒå†…å­˜éœ€æ±‚é‡å¤§çš„è¿›ç¨‹ä½¿ç”¨ï¼Œåœ¨éœ€è¦è¿è¡Œæ­¤è¿›ç¨‹æ—¶å†åŠ è½½è¿›å†…å­˜ï¼Œæ­¤è¿‡ç¨‹ä¸­æ–‡ä»¶ç›¸å…³çš„å†…å­˜å¤„ç†æ˜¯ç”±VFSç®¡ç†çš„ï¼Œè€ŒåŒ¿åå†…å­˜æ˜¯è¢«äº¤æ¢è¿›swapåˆ†åŒºçš„ï¼ˆå±äºç¡¬ç›˜ï¼‰ï¼Œæœ¬æ¥å°±æ˜¯ä¸ºäº†æ¸…ç©ºå†…å­˜ä¾›å…¶å®ƒè¿›ç¨‹ä½¿ç”¨é‚£ä¸ºä½•è¿˜è¦æµªè´¹å†…å­˜å¯¹è¿™éƒ¨åˆ†å·²ç»äº¤æ¢åˆ°swapåˆ†åŒºçš„å†…å®¹å†æ¬¡åœ¨å†…å­˜ä¸­å»ºç«‹swapcacheå‘¢?! è¯´æ˜¯ä¸ºäº†å‡å°‘ioäº¤äº’ä¸æ˜¯æœ‰ç‚¹æœ¬æœ«å€’ç½®äº†å—ï¼Ÿä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹ï¼Œæ±‚ä½œè€…å¤§å¸ˆæŒ‡ç‚¹è¿·æ´¥ï¼Œå¤šè°¢ï¼","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504477,"discussion_content":"swapcacheå¯ä»¥ç†è§£ä¸ºæ˜¯è¾ƒæ´»è·ƒçš„swapï¼Œä½ å¯ä»¥ä»”ç»†çœ‹ä¸‹é‚£å¼ å›¾ç¤ºã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œå³è€ƒè™‘å†…å­˜éœ€æ±‚ï¼Œåˆå…¼é¡¾ioæ•ˆç‡ã€‚å°±åƒlruçš„inactiveå’Œactive listä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598452691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1449481,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIt0nAFvqib3fpf9AIKUrEJMdbiaPjnKqCryevwjRdqrbzAIxdOn3P5wCz28MNb5Bgb2PwEdCezLEWg/132","nickname":"KennyQ","note":"","ucode":"5F9AFFCBC086DB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301235,"discussion_content":"æ˜ç¡®ä¸€ç‚¹swapæ˜¯åœ¨ç‰©ç†å†…å­˜è€—å°½ä»¥åï¼Œæ‰ä¼šè¢«ç³»ç»Ÿå°†éƒ¨åˆ†ç¡¬ç›˜ç©ºé—´æ¨¡æ‹Ÿæˆå†…å­˜ä½¿ç”¨çš„ï¼Œæ­£å¸¸æƒ…å†µä¸‹æ˜¯ç”¨ä¸åˆ°çš„ã€‚æ‰€ä»¥ä¸å­˜åœ¨ä½ è¯´çš„è¿™ä¸ªæƒ…å†µï¼Œå¦å¤–å¦‚æœæ²¡æœ‰å¼€å¯ swapï¼Œé‚£ä¹ˆç³»ç»Ÿåœ¨å†…å­˜ç”¨å°½åä¼šè§¦å‘oomï¼Œä¸»åŠ¨æ€æ­»è¿›ç¨‹æ¥é‡Šæ”¾å†…å­˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598449415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243252,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1598003433,"is_pvip":false,"replies":[{"id":"89726","content":"å…¶å®åº•å±‚æœºåˆ¶å’Œå…·ä½“çš„è¯­è¨€æ— å…³ã€‚åªæ˜¯å¦‚æœæŒæ¡äº†cè¯­è¨€ï¼Œèƒ½å¤Ÿæ›´å¥½çš„ç†è§£åº•å±‚æœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é‚µäºšæ–¹","uid":"1981399","ctime":1598175570,"ip_address":"","comment_id":243252,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598003433","product_id":100058001,"comment_content":"è€å¸ˆï¼Œæˆ‘ä»¬æ˜¯javaå·¥ç¨‹å¸ˆï¼Œä¸æ‡‚Linuxç¼–ç¨‹ï¼Œæ‚¨åº”è¯¥æŒ‡çš„æ˜¯Cè¯­è¨€ç¼–ç¨‹å§","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504239,"discussion_content":"å…¶å®åº•å±‚æœºåˆ¶å’Œå…·ä½“çš„è¯­è¨€æ— å…³ã€‚åªæ˜¯å¦‚æœæŒæ¡äº†cè¯­è¨€ï¼Œèƒ½å¤Ÿæ›´å¥½çš„ç†è§£åº•å±‚æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598175570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242925,"user_name":"Q","can_delete":false,"product_type":"c1","uid":1047423,"ip_address":"","ucode":"785546C617D3DF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/7f/746a6f5e.jpg","comment_is_top":false,"comment_ctime":1597894719,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1597894719","product_id":100058001,"comment_content":"swap å…³é—­è¿™ä¸ªç‚¹ï¼Œå¾—åˆ†æƒ…å†µï¼Œå¦‚æœæ˜¯ç”Ÿäº§è¦ä¿è¯å¯ç”¨æ€§ï¼Œå¿½ç•¥æ€§èƒ½çš„å½±å“ï¼Œä¸ºäº†é¿å…å†…å­˜çš„ä¸è¶³å¼•èµ·çš„OOMï¼Œæˆ‘è§‰å¾—å¯ä»¥å¼€å¯ï¼ŒåŒæ—¶è®¾ç½®ä¸‹vm.swappiness ï¼Œå¹¶åšå¥½å¯¹swapçš„ç›‘æ§ã€‚","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300080,"discussion_content":"å¯¹çš„ã€‚å› ä¸ºoomçš„å±å®³ç¨‹åº¦å¯èƒ½ä¼šæ›´å¤§ï¼Œæ‰€ä»¥æœ‰çš„æ—¶å€™ä¸ºäº†åº”å¯¹ä¸€äº›çªå‘çš„å†…å­˜ç”³è¯·ï¼Œæ˜¯éœ€è¦å¼€å¯swapçš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1597931236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1118627,"avatar":"https://static001.geekbang.org/account/avatar/00/11/11/a3/7a2405ca.jpg","nickname":"rfyiamcool","note":"","ucode":"65FCBF05B13893","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302197,"discussion_content":"ä¸å»ºè®®å¼€swapï¼Œå› ä¸ºå¼€äº†äº¤æ¢åˆ†åŒºåä¼šæœ‰æ›´å¤šçš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸šåŠ¡è¯·æ±‚æ—¶å»¶å¢é«˜å’Œioé¢‘ç¹äº¤æ¢ã€‚å†…å­˜ç›‘æ§è¦åšå¥½ï¼Œå†…å­˜å¼‚å¸¸å¢é•¿æå‰å°±è¦å‘ç°ï¼Œå“ªæ€•å‡ºç°oomæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œæ¯•ç«Ÿç°åœ¨éƒ½æ˜¯é›†ç¾¤åŒ–çš„ä¸šåŠ¡ç³»ç»Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598838723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242876,"user_name":"Abby","can_delete":false,"product_type":"c1","uid":2133011,"ip_address":"","ucode":"EF21516434D445","user_header":"https://static001.geekbang.org/account/avatar/00/20/8c/13/62e221c7.jpg","comment_is_top":false,"comment_ctime":1597882293,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1597882293","product_id":100058001,"comment_content":"æˆ‘ç”¨sar å‘½ä»¤æ¥è§‚å¯Ÿpage miss,æ„Ÿè§‰è¿™ä¸ªæ›´åŠ èƒ½ä½“ç°å‡ºé—®é¢˜ï¼Œæ¯”å¦‚major missã€‚å¦å¤–ï¼Œå…³äºå…³é—­swap,å¤§å®¶ç»™çš„å»ºè®®ä¸ä¸€æ ·ï¼Œæœ‰çš„å»ºè®®è®¾ç½®æˆ1ï¼Œä¸ºäº†ä¿è¯ç³»ç»Ÿæœ€å·®æƒ…å†µä¸‹å¯ä»¥ç”¨swapä¿è¯åº”ç”¨æ´»ä¸‹å»ã€‚å¦å¤–ï¼Œæ®è¯´è®¾ç½®æˆ0ï¼Œç³»ç»Ÿä¹Ÿä¸ä¼šå®Œå…¨ç¦ç”¨swap,è€å¸ˆæ˜¯ä¸æ˜¯è¿™æ ·çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300083,"discussion_content":"å…³äºswappinessçš„å…·ä½“è®¾ç½®ï¼Œkernel docé‡Œé¢å…¶å®è§£é‡Šçš„å¾ˆå¥½äº†ï¼šhttps://www.kernel.org/doc/Documentation/sysctl/vm.txt ã€‚ \n\nâ€œA value of 0 instructs the kernel not to\ninitiate swap until the amount of free and file-backed pages is less\nthan the high water mark in a zone.\nâ€\nä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è®¾ç½®ä¸º0çš„æ—¶å€™ï¼Œå¦‚æœfreeå’Œfile-backed pagesä¹‹å’Œå°äºhigh water markæ—¶è¿˜æ˜¯ä¼šæœ‰swapè¡Œä¸ºã€‚\nå½“ä½ ä¸æ˜ç™½æŸä¸ªé…ç½®é¡¹çš„å…·ä½“å«ä¹‰æ—¶ï¼Œkernel docæ˜¯æœ€å¥½çš„äº†è§£æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597931631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":302029,"discussion_content":"æ ¹æ®æ­£æ–‡ä¸­çš„å‡ ä¸ªå…¬å¼ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è®¤ä¸ºfile-backedéƒ½æ˜¯å¯ä»¥è¢«å›æ”¶çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598764780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":300083,"ip_address":""},"score":302029,"extra":""},{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302641,"discussion_content":"file-backedéƒ½æ˜¯å¯å›æ”¶çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒå…·å¤‡å¯å›æ”¶æ€§ï¼Œä½†æ˜¯å®é™…èƒ½å¦è¢«å›æ”¶æ‰è¿˜è¦çœ‹è¿™ä¸ªpageçš„ä½¿ç”¨æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598976425,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302029,"ip_address":""},"score":302641,"extra":""}]}]},{"had_liked":false,"id":242579,"user_name":"eagle","can_delete":false,"product_type":"c1","uid":1129632,"ip_address":"","ucode":"D7601A2AFC1D17","user_header":"https://static001.geekbang.org/account/avatar/00/11/3c/a0/8b9d5aca.jpg","comment_is_top":false,"comment_ctime":1597767054,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1597767054","product_id":100058001,"comment_content":"å„ç§æ¦‚å¿µæ‰‘é¢è€Œæ¥ï¼Œæœ‰ç‚¹è·³è·ƒï¼Œå¯¹åˆå­¦è€…ä¸å¤Ÿå‹å¥½","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299897,"discussion_content":"å…¶å®è¿™äº›æ¦‚å¿µä¸»è¦æ˜¯ä¸ºäº†è§£é‡ŠåŸç†ï¼Œä½ å¯ä»¥ä¸ç”¨å»åˆ»æ„è®°è¿™äº›æ¦‚å¿µï¼Œè€Œä¸”é€šè¿‡è¿™äº›æ¦‚å¿µæ¥äº†è§£èƒŒåçš„æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597850392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242561,"user_name":"ray","can_delete":false,"product_type":"c1","uid":1717235,"ip_address":"","ucode":"10962C711CBC11","user_header":"","comment_is_top":false,"comment_ctime":1597760169,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1597760169","product_id":100058001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œ<br>è¯·é—®æ‚¨ä»€ä¹ˆæ ·çš„pageå¯ä»¥è¢«ç§°ä¸ºfile backed pageï¼Œä»€ä¹ˆæ ·çš„pageä¸æ˜¯file backed page?<br>è¿™é—®é¢˜ä¸€ç›´æä¸æ˜¯å¾ˆæ¸…æ¥šã€‚<br><br>è°¢è°¢è€å¸ˆçš„è§£ç­”äº†ï¼","like_count":0,"discussions":[{"author":{"id":1981399,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3b/d7/9d942870.jpg","nickname":"é‚µäºšæ–¹","note":"","ucode":"CDFABCB81B9782","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299899,"discussion_content":"ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¿›ç¨‹çš„å †æ ˆå°±ä¸æ˜¯file-backed pageï¼›é€šè¿‡mmap(MAP_FILE | MAP_SHARED)æ˜ å°„çš„æ–‡ä»¶å†…å®¹å¯¹åº”çš„å†…å­˜å°±æ˜¯file-backed pageã€‚ æˆ‘ä»¬åœ¨åé¢çš„è¯¾ç¨‹ä¼šè¯¦ç»†çš„è§£é‡Šè¿™äº›çŸ¥è¯†ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1597850548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}