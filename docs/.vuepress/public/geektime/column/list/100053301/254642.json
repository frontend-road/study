{"id":254642,"title":"08 | 应用1：正则如何处理 Unicode 编码的文本？","content":"<p>你好，我是伟忠。这一节我们来学习，如何使用正则来处理Unicode编码的文本。如果你需要使用正则处理中文，可以好好了解一下这些内容。</p><p>不过，在讲解正则之前，我会先给你讲解一些基础知识。只有搞懂了基础知识，我们才能更好地理解今天的内容。一起来看看吧！</p><h2>Unicode基础知识</h2><p><strong>Unicode</strong>（中文：万国码、国际码、统一码、单一码）是计算机科学领域里的一项业界标准。它对世界上大部分的文字进行了整理、编码。Unicode使计算机呈现和处理文字变得简单。</p><p>Unicode至今仍在不断增修，每个新版本都加入更多新的字符。目前Unicode最新的版本为 2020 年3月10日公布的13.0.0，已经收录超过 14 万个字符。</p><p>现在的Unicode字符分为17组编排，每组为一个平面（Plane），而每个平面拥有 65536（即2的16次方）个码值（Code Point）。然而，目前Unicode只用了少数平面，我们用到的绝大多数字符都属于第0号平面，即<strong>BMP平面</strong>。除了BMP 平面之外，其它的平面都被称为<strong>补充平面</strong>。</p><p>关于各个平面的介绍我在下面给你列了一个表，你可以看一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/61/8c1c6b9b87f10eec04dbc2224f755d61.png?wh=1660*684\" alt=\"\"></p><p>Unicode标准也在不断发展和完善。目前，使用4个字节的编码表示一个字符，就可以表示出全世界所有的字符。那么Unicode在计算机中如何存储和传输的呢？这就涉及编码的知识了。</p><!-- [[[read_end]]] --><p>Unicode相当于规定了字符对应的码值，这个码值得编码成字节的形式去传输和存储。最常见的编码方式是UTF-8，另外还有UTF-16，UTF-32 等。UTF-8 之所以能够流行起来，是因为其编码比较巧妙，采用的是变长的方法。也就是一个Unicode字符，在使用UTF-8编码表示时占用1到4个字节不等。最重要的是Unicode兼容ASCII编码，在表示纯英文时，并不会占用更多存储空间。而汉字呢，在UTF-8中，通常是用三个字节来表示。</p><pre><code>&gt;&gt;&gt; u'正'.encode('utf-8')\nb'\\xe6\\xad\\xa3'\n&gt;&gt;&gt; u'则'.encode('utf-8')\nb'\\xe5\\x88\\x99'\n\n</code></pre><p>下面是 Unicode 和 UTF-8 的转换规则，你可以参考一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/c8/ed/c8055321ed7e4782b3d862f5d06297ed.png?wh=852*570\" alt=\"\"></p><h2>Unicode中的正则</h2><p>在你大概了解了Unicode的基础知识后，接下来我来给你讲讲，在用Unicode中可能会遇到的坑，以及其中的点号匹配和字符组匹配的问题。</p><h3>编码问题的坑</h3><p>如果你在编程语言中使用正则，编码问题可能会让正则的匹配行为很奇怪。先说结论，在使用时一定尽可能地使用Unicode编码。</p><p>如果你需要在Python语言中使用正则，我建议你使用Python3。如果你不得不使用Python2，一定要记得使用 Unicode 编码。在Python2中，一般是以u开头来表示Unicode。如果不加u，会导致匹配出现问题。比如我们在“极客”这个文本中查找“时间”。你可能会很惊讶，竟然能匹配到内容。</p><p>下面是Python语言示例：</p><pre><code># 测试环境 macOS/Linux/Windows， Python2.7\n&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.search(r'[时间]', '极客') is not None\nTrue\n&gt;&gt;&gt; re.findall(r'[时间]', '极客')\n['\\xe6']\n# Windows下输出是 ['\\xbc']\n</code></pre><p>通过分析原因，我们可以发现，不使用Unicode编码时，正则会被编译成其它编码表示形式。比如，在macOS或Linux下，一般会编码成UTF-8，而在Windows下一般会编码成GBK。</p><p>下面是我在macOS上做的测试，“时间”这两个汉字表示成了UTF-8编码，正则不知道要每三个字节看成一组，而是把它们当成了6个单字符。</p><pre><code># 测试环境 macOS/Linux，Python 2.7\n&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.compile(r'[时间]', re.DEBUG)\nin\n  literal 230\n  literal 151\n  literal 182\n  literal 233\n  literal 151\n  literal 180\n&lt;_sre.SRE_Pattern object at 0x1053e09f0&gt;\n&gt;&gt;&gt; re.compile(ur'[时间]', re.DEBUG)\nin\n  literal 26102\n  literal 38388\n&lt;_sre.SRE_Pattern object at 0x1053f8710&gt;\n</code></pre><p>我们再看一下 “极客” 和 “时间” 这两个词语对应的UTF-8编码。你可以发现，这两个词语都含有 16进制表示的e6，而GBK编码时都含有16进制的bc，所以才会出现前面的表现。</p><p>下面是查看文本编码成UTF-8或GBK方式，以及编码的结果：</p><pre><code>\n# UTF-8\n&gt;&gt;&gt; u'极客'.encode('utf-8')\n'\\xe6\\x9e\\x81\\xe5\\xae\\xa2'  # 含有 e6\n&gt;&gt;&gt; u'时间'.encode('utf-8')\n'\\xe6\\x97\\xb6\\xe9\\x97\\xb4'  # 含有 e6\n\n# GBK\n&gt;&gt;&gt; u'极客'.encode('gbk')\n'\\xbc\\xab\\xbf\\xcd'  # 含有 bc\n&gt;&gt;&gt; u'时间'.encode('gbk')\n'\\xca\\xb1\\xbc\\xe4'  # 含有 bc\n</code></pre><p>这也是前面我们花时间讲编码基础知识的原因，只有理解了编码的知识，你才能明白这些。在学习其它知识的时候也是一样的思路，不要去死记硬背，搞懂了底层原理，你自然就掌握了。因此在使用时，一定要指定 Unicode 编码，这样就可以正常工作了。</p><pre><code># Python2 或 Python3 都可以\n&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.search(ur'[时间]', u'极客') is not None\nFalse\n&gt;&gt;&gt; re.findall(ur'[时间]', u'极客')\n[]\n\n</code></pre><h3>点号匹配</h3><p>之前我们学过，<strong>点号</strong>可以匹配除了换行符以外的任何字符，但之前我们接触的大多是单字节字符。在Unicode中，点号可以匹配上Unicode字符么？这个其实情况比较复杂，不同语言支持的也不太一样，具体的可以通过测试来得到答案。</p><p>下面我给出了在Python和JavaScript测试的结果：</p><pre><code># Python 2.7\n&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.findall(r'^.$', '学')\n[]\n&gt;&gt;&gt; re.findall(r'^.$', u'学')\n[u'\\u5b66']\n&gt;&gt;&gt; re.findall(ur'^.$', u'学')\n[u'\\u5b66']\n\n# Python 3.7\n&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.findall(r'^.$', '学')\n['学']\n&gt;&gt;&gt; re.findall(r'(?a)^.$', '学')\n['学']\n</code></pre><pre><code>/* JavaScript(ES6) 环境 */\n&gt; /^.$/.test(&quot;学&quot;)\ntrue\n\n</code></pre><p>至于其它的语言里面能不能用，你可以自己测试一下。在这个课程里，我更多地是希望你掌握这些学习的方法和思路，而不是单纯地记住某个知识点，一旦掌握了方法，之后就会简单多了。</p><h3>字符组匹配</h3><p>之前我们学习了很多字符组，比如\\d表示数字，\\w表示大小写字母、下划线、数字，\\s表示空白符号等，那 Unicode 下的数字，比如全角的1、2、３等，算不算数字呢？全角的空格算不算空白呢？同样，你可以用我刚刚说的方法，来测试一下你所用的语言对这些字符组的支持程度。</p><h2>Unicode 属性</h2><p>在正则中使用Unicode，还可能会用到Unicode的一些属性。这些属性把Unicode字符集划分成不同的字符小集合。</p><p>在正则中常用的有三种，分别是<strong>按功能划分</strong>的Unicode Categories（有的也叫 Unicode Property），比如标点符号，数字符号；按<strong>连续区间划分</strong>的Unicode Blocks，比如只是中日韩字符；按<strong>书写系统划分</strong>的Unicode Scripts，比如汉语中文字符。</p><p><img src=\"https://static001.geekbang.org/resource/image/2y/ae/2yy1c343b4151d14e088a795c4ec77ae.jpg?wh=1542*653\" alt=\"\"></p><p>在正则中如何使用这些Unicode属性呢？在正则中，这三种属性在正则中的表示方式都是\\p{属性}。比如，我们可以使用 Unicode Script 来实现查找连续出现的中文。</p><p><img src=\"https://static001.geekbang.org/resource/image/38/9c/383a10b093d483c095603930f968c29c.png?wh=1076*562\" alt=\"\"></p><p>你可以在<a href=\"https://regex101.com/r/Bgt4hl/1\">这里</a>进行测试。</p><p>其中，Unicode  Blocks在不同的语言中记法有差异，比如Java需要加上In前缀，类似于 \\p{<strong><span class=\"orange\">In</span></strong><strong>Bopomofo</strong>} 表示注音字符。</p><p>知道Unicode属性这些知识，基本上就够用了，在用到相关属性的时候，可以再查阅一下参考手册。如果你想知道Unicode属性更全面的介绍，可以看一下维基百科的对应链接。</p><ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Unicode_character_property\">Unicode Property</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Unicode_block\">Unicode Block</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Script_(Unicode)\">Unicode Script</a></li>\n</ul><h2>表情符号</h2><p>表情符号其实是“图片字符”，最初与日本的手机使用有关，在日文中叫“绘文字”，在英文中叫emoji，但现在从日本流行到了世界各地。不少同学在聊天的时候喜欢使用表情。下面是办公软件钉钉中一些表情的截图。</p><p><img src=\"https://static001.geekbang.org/resource/image/0e/e8/0ee6f3c217a13337b46c0ff41dc866e8.png?wh=958*202\" alt=\"\"></p><p>在2020 年 3 月 10 日公布的Unicode标准 13.0.0 中，新增了55个新的emoji表情，完整的表情列表你可以在这里查看<a href=\"http://www.unicode.org/emoji/charts/full-emoji-list.html\">这个链接</a>。</p><p>这些表情符号有如下特点。</p><ol>\n<li>许多表情不在BMP内，码值超过了 FFFF。使用 UTF-8编码时，普通的 ASCII 是1个字节，中文是3个字节，而有一些表情需要4个字节来编码。</li>\n<li>这些表情分散在BMP和各个补充平面中，要想用一个正则来表示所有的表情符号非常麻烦，即便使用编程语言处理也同样很麻烦。</li>\n<li>一些表情现在支持使用颜色修饰（Fitzpatrick modifiers），可以在5种色调之间进行选择。这样一个表情其实就是8个字节了。</li>\n</ol><p>在这里我给出了你有关于表情颜色修饰的5种色调，你可以看一看。</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/75/2e74dd14262807c7ab80c4867c3a8975.png?wh=944*390\" alt=\"\"></p><p>下面是使用IPython测试颜色最深的点赞表情，在macOS上的测试结果。你可以发现，它是由8个字节组成，这样用正则处理起来就很不方便了。因此，在处理表情符号时，我不建议你使用正则来处理。你可以使用专门的库，这样做一方面代码可读性更好，另一方面是表情在不断增加，使用正则的话不好维护，会给其它同学留坑。而使用专门的库可以通过升级版本来解决这个问题。</p><p><img src=\"https://static001.geekbang.org/resource/image/cf/69/cf9fbeddf035820a9303512dbedb2969.png?wh=946*250\" alt=\"\"></p><h2>总结</h2><p>好了，讲到这，今天的内容也就基本结束了。最后我来给你总结一下。</p><p>今天我们学习了Unicode编码的基础知识、了解了UTF-8编码、变长存储、以及它和Unicode的关系。Unicode字符按照功能，码值区间和书写系统等方式进行分类，比如按书写系统划分 \\p{Han} 可以表示中文汉字。</p><p>在正则中使用Unicode有一些坑主要是因为编码问题，使用的时候你要弄明白是拿Unicode去匹配，还是编码后的某部分字节去进行匹配的，这可以让你避开这些坑。</p><p>而在处理表情时，由于表情比较复杂，我不建议使用正则来处理，更建议使用专用的表情库来处理。</p><p><img src=\"https://static001.geekbang.org/resource/image/76/3f/76924343bfb8d3f1612b92b6cab4703f.png?wh=1852*1468\" alt=\"\"></p><h2>课后思考</h2><p>最后，我们来做一个小练习吧。在正则 xy{3} 中，你应该知道， y是重复3次，那如果正则是“极客{3}”的时候，代表是“客”这个汉字重复3次，还是“客”这个汉字对应的编码最后一个字节重复3次呢？如果是重复的最后一个字节，应该如何解决？</p><pre><code>'极客{3}'\n</code></pre><p>你可以自己来动动手，用自己熟悉的编程语言来试一试，经过不断练习你才能更好地掌握学习的内容。</p><p>今天的课程就结束了，希望可以帮助到你，也希望你在下方的留言区和我参与讨论，同时欢迎你把这节课分享给你的朋友或者同事，一起交流一下。</p>","comments":[{"had_liked":false,"id":243838,"user_name":"小乙哥","can_delete":false,"product_type":"c1","uid":1063308,"ip_address":"","ucode":"C77E79BEA0C325","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","comment_is_top":false,"comment_ctime":1598285543,"is_pvip":false,"replies":[{"id":"89813","content":"Unicode只规定了字符对应的码值，如果要进行存储或者网络传输等，这个码值得编码成字节，常见的编码方式是 UTF-8。<br>在内存中使用的时候可以使用unicode，但存储到硬盘里时就得转换成字节编码形式。","user_name":"作者回复","comment_id":243838,"uid":"1112089","ip_address":"","utype":1,"ctime":1598312810,"user_name_real":"伟忠"}],"discussion_count":6,"race_medal":0,"score":"40252991207","product_id":100053301,"comment_content":"有点看着蒙圈了，unicode和utf-8不都是编码吗？不都是对字符的编码？他们之间的关系没有搞太清楚","like_count":10,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504409,"discussion_content":"Unicode只规定了字符对应的码值，如果要进行存储或者网络传输等，这个码值得编码成字节，常见的编码方式是 UTF-8。\n在内存中使用的时候可以使用unicode，但存储到硬盘里时就得转换成字节编码形式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598312810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2818299,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/00/fb/85b07045.jpg","nickname":"肥柴","note":"","ucode":"5A454CA474C971","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571744,"discussion_content":"https://www.bilibili.com/video/BV1XK4y1t7D4?spm_id_from=333.999.0.0 这个视频相信你看完就可以搞懂了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652373355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1638541,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/8d/45c1f62f.jpg","nickname":"🇵  🇦  🇼  🇳 ","note":"","ucode":"1F825BACA9FD99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367467,"discussion_content":"unicode不是一种编码方式吗，不是规定了4个字节表示一个字符呀，不太懂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618370185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1086261,"avatar":"https://static001.geekbang.org/account/avatar/00/10/93/35/0cfb5732.jpg","nickname":"Kung","note":"","ucode":"862B39B7263447","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347451,"discussion_content":"老师，码值不就是16进制数字吗？不是直接就能转换成字节？ 还需要使用UTF-8编码吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612233412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1063308,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","nickname":"小乙哥","note":"","ucode":"C77E79BEA0C325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1086261,"avatar":"https://static001.geekbang.org/account/avatar/00/10/93/35/0cfb5732.jpg","nickname":"Kung","note":"","ucode":"862B39B7263447","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347466,"discussion_content":"Unicode是规定了字符背后的字节码，但是为了压缩存储，需要UTF-8去编码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612237297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":347451,"ip_address":""},"score":347466,"extra":""},{"author":{"id":1086261,"avatar":"https://static001.geekbang.org/account/avatar/00/10/93/35/0cfb5732.jpg","nickname":"Kung","note":"","ucode":"862B39B7263447","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1063308,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","nickname":"小乙哥","note":"","ucode":"C77E79BEA0C325","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347659,"discussion_content":"谢谢！已经在知乎找到答案了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612275613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":347466,"ip_address":""},"score":347659,"extra":""}]}]},{"had_liked":false,"id":230439,"user_name":"虹炎","can_delete":false,"product_type":"c1","uid":1600615,"ip_address":"","ucode":"9E28ACEBFB26D5","user_header":"https://static001.geekbang.org/account/avatar/00/18/6c/67/07bcc58f.jpg","comment_is_top":false,"comment_ctime":1593391559,"is_pvip":false,"replies":[{"id":"85297","content":"对的，没问题👍🏻","user_name":"作者回复","comment_id":230439,"uid":"1112089","ip_address":"","utype":1,"ctime":1593533505,"user_name_real":"伟忠"}],"discussion_count":12,"race_medal":0,"score":"35953129927","product_id":100053301,"comment_content":"我的答案：<br>客重复3次，如果重复的是最后一个字节，就这样‘极(客){3}’, 给客加个括号分组。<br>请老师指正？","like_count":9,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499890,"discussion_content":"对的，没问题👍🏻","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593533505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"蓦然回首","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538004,"discussion_content":"是啊，为啥不加括号，反而是当做unicode字符来匹配的，和文中讲的默认按照单字节来匹配不符合","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639296303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619980,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLbJkMdDyWMVqttDw4w4e7y71gjZHj4rianziaicTw0F0XHaSThWZGicKj90LQjOT8SicACNQ1mRgmM5NA/132","nickname":"peace_love","note":"","ucode":"439A7F518011C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324549,"discussion_content":"还是没明白，为啥极(客){3}加上分组后，python查询后返回只有&#39;客&#39;?\n在这个https://regex101.com/上面试了，返回的是‘极客客客’  老师能解释下么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605115678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003327,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4f/3f/6f62f982.jpg","nickname":"王坤祥","note":"","ucode":"FB988B9F381A33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291805,"discussion_content":"\np = &#34;极(客){3}&#34;\ns = &#34;极客客客客&#34;\nans = re.findall(p, s)\n---ans结果---\n[&#39;客&#39;]\n---\n这是为什么呀？我的【极】去哪里了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594958127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1600615,"avatar":"https://static001.geekbang.org/account/avatar/00/18/6c/67/07bcc58f.jpg","nickname":"虹炎","note":"","ucode":"9E28ACEBFB26D5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288035,"discussion_content":"括号表示分组，把括号内的内容看成一个整体了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593617170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"蓦然回首","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1600615,"avatar":"https://static001.geekbang.org/account/avatar/00/18/6c/67/07bcc58f.jpg","nickname":"虹炎","note":"","ucode":"9E28ACEBFB26D5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538005,"discussion_content":"既然一个整体，那不更应该匹配整个unicode字符，为啥当做一个整体反而匹配单字节了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639296624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288035,"ip_address":""},"score":538005,"extra":""},{"author":{"id":1172090,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/7a/38a27e47.jpg","nickname":"蓦然回首","note":"","ucode":"B17658DCFE6402","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1600615,"avatar":"https://static001.geekbang.org/account/avatar/00/18/6c/67/07bcc58f.jpg","nickname":"虹炎","note":"","ucode":"9E28ACEBFB26D5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538006,"discussion_content":"这不是自相矛盾了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639296652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288035,"ip_address":""},"score":538006,"extra":""}]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"一步","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288008,"discussion_content":"为什么最后一个字节的话 给 客 加上括号就可以了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593612520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"一步","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":288582,"discussion_content":"因为客是一个多字节的Unicode字符，我们把它看成一个字符，但正则不一定是这样。就像 xyz+ 你肯定知道是 z 重复一到多次，如果 xyz 要看成一个整体呢？我们就要加上括号。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593793752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288008,"ip_address":""},"score":288582,"extra":""},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"一步","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":288634,"discussion_content":"他把客加上括号了，不就是代表多个字节了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593830672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288582,"ip_address":""},"score":288634,"extra":""},{"author":{"id":2697815,"avatar":"https://static001.geekbang.org/account/avatar/00/29/2a/57/6629c858.jpg","nickname":"阿康","note":"","ucode":"DF20E1E33A8A34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":546726,"discussion_content":"客是三个字节，这个三个字节加上括号，不就是把这个三个字节看成了一个整体？这样不就是这三个字节重复3次？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642407734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288582,"ip_address":""},"score":546726,"extra":""}]}]},{"had_liked":false,"id":285054,"user_name":"lhs","can_delete":false,"product_type":"c1","uid":1252206,"ip_address":"","ucode":"41178CC21337FB","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/6e/1bc87ac8.jpg","comment_is_top":false,"comment_ctime":1616593317,"is_pvip":false,"replies":[{"id":"103851","content":"感谢分享，大家这部分查一下资料了解下","user_name":"作者回复","comment_id":285054,"uid":"1112089","ip_address":"","utype":1,"ctime":1617124288,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"18796462501","product_id":100053301,"comment_content":"解释一下UTF-8的编码规则，会比较好理解文章中提到的Unicode和UTF-8的转化：<br>对于单个字节的字符，第一位设为 0，后面的 7 位对应这个字符的 Unicode 码点。因此，对于英文中的 0 - 127 号字符，与 ASCII 码完全相同。这意味着 ASCII 码那个年代的文档用 UTF-8 编码打开完全没有问题。<br><br>对于需要使用 N 个字节来表示的字符（N &gt; 1），第一个字节的前 N 位都设为 1，第 N + 1 位设为 0，剩余的 N - 1 个字节的前两位都设位 10，剩下的二进制位则使用这个字符的 Unicode 码点来填充。","like_count":5,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517567,"discussion_content":"感谢分享，大家这部分查一下资料了解下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617124288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235731,"user_name":"天蓬太帅","can_delete":false,"product_type":"c1","uid":1181615,"ip_address":"","ucode":"21AB295504D0F9","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/af/351a9fe7.jpg","comment_is_top":false,"comment_ctime":1595165342,"is_pvip":false,"replies":[{"id":"87165","content":"这是一种匹配模式，可以查询下 Python 文档，看下 re 模块的说明。指的是ASCII模式，可以让 \\w 等只匹配 ASCII<br>https:&#47;&#47;docs.python.org&#47;3.8&#47;library&#47;re.html#module-re","user_name":"作者回复","comment_id":235731,"uid":"1112089","ip_address":"","utype":1,"ctime":1595261690,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"10185099934","product_id":100053301,"comment_content":"请问例子里有一个表达式是findall(r’(?a)^.$’, ‘学’)，这里面的?a是啥意思？","like_count":3,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501813,"discussion_content":"这是一种匹配模式，可以查询下 Python 文档，看下 re 模块的说明。指的是ASCII模式，可以让 \\w 等只匹配 ASCII\nhttps://docs.python.org/3.8/library/re.html#module-re","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595261690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231745,"user_name":"jooe","can_delete":false,"product_type":"c1","uid":1309784,"ip_address":"","ucode":"CFA08C8E72E2B6","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/58/102835d4.jpg","comment_is_top":false,"comment_ctime":1593763339,"is_pvip":false,"replies":[{"id":"85590","content":"嗯，看到不少同学留言回复的是 js 代码，就加上了","user_name":"作者回复","comment_id":231745,"uid":"1112089","ip_address":"","utype":1,"ctime":1593793252,"user_name_real":"伟忠"}],"discussion_count":2,"race_medal":0,"score":"5888730635","product_id":100053301,"comment_content":"感谢老师加了 js 的代码示例，对于不会后端语言的还是很友好的","like_count":1,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500425,"discussion_content":"嗯，看到不少同学留言回复的是 js 代码，就加上了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593793252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288583,"discussion_content":"虽然是不是后端同学，但文章中的示例都比较完整，可以安装一下 Python 测试一下，也没什么坏处。不要有抵触情绪，前后端都学一些，肯定是有好处的，Python入门还是很容易的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593793859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230559,"user_name":"好运来","can_delete":false,"product_type":"c1","uid":1113937,"ip_address":"","ucode":"F469ED6CEFEF30","user_header":"https://static001.geekbang.org/account/avatar/00/10/ff/51/9d5cfadd.jpg","comment_is_top":false,"comment_ctime":1593417552,"is_pvip":true,"replies":[{"id":"85474","content":"动手测试很赞，知识就是在练习中学习和掌握的。<br>思考题不难，可以参考下其它同学的答案，如果不支持，可以用括号把汉字括起来，这样就是整体重复了","user_name":"作者回复","comment_id":230559,"uid":"1112089","ip_address":"","utype":1,"ctime":1593705339,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":1,"score":"5888384848","product_id":100053301,"comment_content":"    print(u&#39;正&#39;.encode(&#39;utf-8&#39;))<br>    # 全角正则和全角字符串，不能匹配到<br>    print(re.findall(r&#39;＼ｗ＋&#39;, &#39;ａｂｃｄｅｆ&#39;)) # 输出[]<br>    # 半角正则和全角字符串，能够匹配到<br>    print(re.findall(r&#39;\\w+&#39;, &#39;ａｂｃｄｅｆ&#39;)) # 输出[&#39;ａｂｃｄｅｆ&#39;]<br>    # 半角正则和半角字符串，能够匹配到<br>    print(re.findall(r&#39;\\w+&#39;, &#39;abcdef&#39;)) # 输出[&#39;abcdef&#39;]<br>    # 同上<br>    print(re.findall(r&#39;＼ｄ＋&#39;, &#39;１２３４５６&#39;)) # 输出[]<br>    print(re.findall(r&#39;\\d+&#39;, &#39;１２３４５６&#39;)) # 输出[&#39;１２３４５６&#39;]<br>    print(re.findall(r&#39;\\d+&#39;, &#39;123456&#39;)) # 输出[&#39;123456&#39;]<br>    # 同上<br>    print(re.findall(r&#39;＼ｓ＋&#39;, &#39;　　&#39;)) # 输出[]<br>    print(re.findall(r&#39;\\s+&#39;, &#39;　　&#39;)) # 输出[&#39;\\u3000\\u3000&#39;]<br>    print(re.findall(r&#39;\\s+&#39;, &#39;  &#39;)) # [&#39;  &#39;]<br><br>    # “极客{3}”的时候，代表是“客”这个汉字重复 3 次<br>    re.compile(r&#39;极客{3}&#39;, re.DEBUG)<br>    print(re.findall(r&#39;极客{3}&#39;, &#39;极客客客&#39;))<br><br>    # 思考题没有想到好的解决方法<br>    print(re.compile(str(u&#39;极客&#39;.encode(&#39;utf-8&#39;)[-1:]).replace(&#39;b&#39;, &#39;&#39;)), re.DEBUG)<br>","like_count":1,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499936,"discussion_content":"动手测试很赞，知识就是在练习中学习和掌握的。\n思考题不难，可以参考下其它同学的答案，如果不支持，可以用括号把汉字括起来，这样就是整体重复了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593705339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230533,"user_name":"宁悦","can_delete":false,"product_type":"c1","uid":1901403,"ip_address":"","ucode":"68844C314FEEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg","comment_is_top":false,"comment_ctime":1593411250,"is_pvip":false,"replies":[{"id":"85296","content":"Python3对unicode支持还是挺好的","user_name":"作者回复","comment_id":230533,"uid":"1112089","ip_address":"","utype":1,"ctime":1593533481,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"5888378546","product_id":100053301,"comment_content":"py3下测试<br>re.findall(&#39;极客{3}&#39;, &#39;极客客客客气气气&#39;)<br>结果：[&#39;极客客客&#39;]","like_count":1,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499922,"discussion_content":"Python3对unicode支持还是挺好的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593533481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318982,"user_name":"Blue D","can_delete":false,"product_type":"c1","uid":2727241,"ip_address":"","ucode":"C8037CBDF1AAD3","user_header":"https://static001.geekbang.org/account/avatar/00/29/9d/49/372ced1b.jpg","comment_is_top":false,"comment_ctime":1635496280,"is_pvip":false,"replies":[{"id":"118090","content":"是的","user_name":"作者回复","comment_id":318982,"uid":"1112089","ip_address":"","utype":1,"ctime":1639002296,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"1635496280","product_id":100053301,"comment_content":"python2中的str等同于python3中的bytes类型，<br>而python2中的unicode等于python3中的str类型","like_count":1,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537226,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639002296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276866,"user_name":"octopus","can_delete":false,"product_type":"c1","uid":1896281,"ip_address":"","ucode":"708AEE6ECFF6AE","user_header":"https://static001.geekbang.org/account/avatar/00/1c/ef/59/6eda594b.jpg","comment_is_top":false,"comment_ctime":1612160596,"is_pvip":false,"replies":[{"id":"100642","content":"对的，用括号括起来，但也要注意子组要不要的问题","user_name":"作者回复","comment_id":276866,"uid":"1112089","ip_address":"","utype":1,"ctime":1612402632,"user_name_real":"伟忠"}],"discussion_count":2,"race_medal":0,"score":"1612160596","product_id":100053301,"comment_content":"客重复三次，如果要极客重复三次‘(极客){3}’","like_count":0,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514845,"discussion_content":"对的，用括号括起来，但也要注意子组要不要的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612402632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2985415,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM6eYFQZUv6GTJawvfuMRwJ0cTKicngWggxdWiaQqvS4KRLSBvJa8hwd7dNHdhc457kFIpHykksgnYEw/132","nickname":"Geek_a0cc42","note":"","ucode":"4B23DA3745EB14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567319,"discussion_content":"请问我为啥不能极客重复3次？\ns = &#34;极客极客极客客客极客jike极客&#34;\nlist=re.findall(&#34;(极客){3}&#34;,s)\nprint(list)\n只返回了一个极客","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650887500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":256098,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1603526844,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603526844","product_id":100053301,"comment_content":"Unicode（中文：万国码、国际码、统一码、单一码）是计算机科学领域里的一项业界标准。它对世界上大部分的文字进行了整理、编码。Unicode 使计算机呈现和处理文字变得简单。","like_count":0},{"had_liked":false,"id":242880,"user_name":"gsz","can_delete":false,"product_type":"c1","uid":1147531,"ip_address":"","ucode":"8FD1B41E884B18","user_header":"https://static001.geekbang.org/account/avatar/00/11/82/8b/5340fb27.jpg","comment_is_top":false,"comment_ctime":1597883702,"is_pvip":false,"replies":[{"id":"89815","content":"本质在于，正则是不是能知道哪几个字节要看成一个整体，如果它能认识，就不会识别出错；如果当成了多个单字节字符，就可能出错。","user_name":"作者回复","comment_id":242880,"uid":"1112089","ip_address":"","utype":1,"ctime":1598312973,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"1597883702","product_id":100053301,"comment_content":"Unicode和gbk编码时，即刻，时间两个词都包含相同的16位数，为什么unicode匹配不了，而gbk的可以匹配？","like_count":1,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504120,"discussion_content":"本质在于，正则是不是能知道哪几个字节要看成一个整体，如果它能认识，就不会识别出错；如果当成了多个单字节字符，就可能出错。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598312973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239112,"user_name":"Juntíng","can_delete":false,"product_type":"c1","uid":1039290,"ip_address":"","ucode":"F6A3B528D6F3FD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/ba/304a9a4a.jpg","comment_is_top":false,"comment_ctime":1596438296,"is_pvip":false,"replies":[{"id":"88452","content":"可以的","user_name":"作者回复","comment_id":239112,"uid":"1112089","ip_address":"","utype":1,"ctime":1596536182,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"1596438296","product_id":100053301,"comment_content":"JS 语言里, 客重复三次，<br>重复的是最后一个字节的话,将“客”独立为组再进行","like_count":0,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502985,"discussion_content":"可以的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596536182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235882,"user_name":"岁月轻狂","can_delete":false,"product_type":"c1","uid":1949612,"ip_address":"","ucode":"E91182A8D1A5A3","user_header":"","comment_is_top":false,"comment_ctime":1595234402,"is_pvip":false,"replies":[{"id":"87163","content":"这是一种匹配模式，可以查下Python文档，是以 ASCII 模式匹配","user_name":"作者回复","comment_id":235882,"uid":"1112089","ip_address":"","utype":1,"ctime":1595261471,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"1595234402","product_id":100053301,"comment_content":"老师，点好通配那里，（？a）是什么意思？","like_count":0,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501861,"discussion_content":"这是一种匹配模式，可以查下Python文档，是以 ASCII 模式匹配","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595261471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235761,"user_name":"吕伟","can_delete":false,"product_type":"c1","uid":1110096,"ip_address":"","ucode":"A443C94A717AD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/50/c348c2ea.jpg","comment_is_top":false,"comment_ctime":1595174466,"is_pvip":false,"replies":[{"id":"87164","content":"Unicode属性很多地方不支持，你可以用go语言等试试","user_name":"作者回复","comment_id":235761,"uid":"1112089","ip_address":"","utype":1,"ctime":1595261517,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"1595174466","product_id":100053301,"comment_content":"老师，为什么在sublime text3的正则搜索中输入\\p{Han}，没有显示匹配结果。","like_count":0,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501824,"discussion_content":"Unicode属性很多地方不支持，你可以用go语言等试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595261517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235758,"user_name":"吕伟","can_delete":false,"product_type":"c1","uid":1110096,"ip_address":"","ucode":"A443C94A717AD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/50/c348c2ea.jpg","comment_is_top":false,"comment_ctime":1595174235,"is_pvip":false,"replies":[{"id":"87168","content":"对的","user_name":"作者回复","comment_id":235758,"uid":"1112089","ip_address":"","utype":1,"ctime":1595261754,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"1595174235","product_id":100053301,"comment_content":"极(客){3}","like_count":0,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501821,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595261754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231233,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1593612267,"is_pvip":true,"replies":[{"id":"85374","content":"没有呢","user_name":"作者回复","comment_id":231233,"uid":"1112089","ip_address":"","utype":1,"ctime":1593621143,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"1593612267","product_id":100053301,"comment_content":"对于 emoji 表情 ， unicode 没有一个属性可以表示的吗？ 比如 \\p{P} 标点符号","like_count":0,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500209,"discussion_content":"没有呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593621143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230607,"user_name":"Robot","can_delete":false,"product_type":"c1","uid":1181473,"ip_address":"","ucode":"7215462D5AC0FA","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/21/b3394aa2.jpg","comment_is_top":false,"comment_ctime":1593426871,"is_pvip":false,"replies":[{"id":"85134","content":"看上去像是你自己打错了，re.findall","user_name":"作者回复","comment_id":230607,"uid":"1112089","ip_address":"","utype":1,"ctime":1593441937,"user_name_real":"伟忠"}],"discussion_count":3,"race_medal":0,"score":"1593426871","product_id":100053301,"comment_content":"本来想把python3、pyhon2统一处理为 re.findall(ur&#39;极客{3}&#39;, u&#39;极客客客&#39;)<br><br>碰到Unicode类型的统一加u<br><br>结果在python3下报错<br><br>&gt;&gt;&gt; re.findre.findall(ur&#39;极客{3}&#39;, u&#39;极客客客&#39;)<br>  File &quot;&lt;stdin&gt;&quot;, line 1<br>    re.findre.findall(ur&#39;极客{3}&#39;, u&#39;极客客客&#39;)<br>                        ^<br>SyntaxError: invalid syntax<br><br>","like_count":0,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499957,"discussion_content":"看上去像是你自己打错了，re.findall","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593441937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181473,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/21/b3394aa2.jpg","nickname":"Robot","note":"","ucode":"7215462D5AC0FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287574,"discussion_content":"## window\nPS C:\\windows\\system32> python3\nPython 3.8.3 (tags/v3.8.3:6f8c832, May 13 2020, 22:37:02) [MSC v.1924 64 bit (AMD64)] on win32\nType &#34;help&#34;, &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.\n>>> import re\n>>> re.findall(ur&#39;极客{3}&#39;,u&#39;极客客客&#39;)\n  File &#34;<stdin>&#34;, line 1\n    re.findall(ur&#39;极客{3}&#39;,u&#39;极客客客&#39;)\n                 ^\nSyntaxError: invalid syntax\n\n## linux\n$ python\nPython 2.6.6 (r266:84292, Jun 20 2019, 14:14:55) \n[GCC 4.4.7 20120313 (Red Hat 4.4.7-23)] on linux2\nType &#34;help&#34;, &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.\n>>> import re\n>>> re.findall(ur&#39;极客{3}&#39;,u&#39;极客客客&#39;)\n[u&#39;\\u6781\\u5ba2\\u5ba2\\u5ba2&#39;]\n>>> ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593484273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181473,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/21/b3394aa2.jpg","nickname":"Robot","note":"","ucode":"7215462D5AC0FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287459,"discussion_content":"哦哦明天我再试试","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593443225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230603,"user_name":"Robot","can_delete":false,"product_type":"c1","uid":1181473,"ip_address":"","ucode":"7215462D5AC0FA","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/21/b3394aa2.jpg","comment_is_top":false,"comment_ctime":1593426432,"is_pvip":false,"replies":[{"id":"85592","content":"对的，Python中是支持的","user_name":"作者回复","comment_id":230603,"uid":"1112089","ip_address":"","utype":1,"ctime":1593793419,"user_name_real":"伟忠"}],"discussion_count":2,"race_medal":0,"score":"1593426432","product_id":100053301,"comment_content":"课后思考：re.findall(ur&#39;极{3}&#39;, u&#39;极极极&#39;)<br>","like_count":0,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499956,"discussion_content":"对的，Python中是支持的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593793419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2210589,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/mxf69PhUt8PrXVN3XsKia14e4uA8RYbww7jcELIyJoYB3ic8XREsibW4wfhJ1hw3K8Er85TbLZcFgOHMTHWeTgqYA/132","nickname":"Geek_356683","note":"","ucode":"7F6317BA5C3AFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":584455,"discussion_content":"python3中报语法错误，u后面的r需要删掉，这是为什么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660829235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":499956,"ip_address":"江苏"},"score":584455,"extra":""}]}]},{"had_liked":false,"id":230510,"user_name":"盘胧","can_delete":false,"product_type":"c1","uid":1650748,"ip_address":"","ucode":"5386CC4C92ECC2","user_header":"https://static001.geekbang.org/account/avatar/00/19/30/3c/0668d6ae.jpg","comment_is_top":false,"comment_ctime":1593405334,"is_pvip":false,"replies":[{"id":"85135","content":"嗯嗯，编码的知识很基础很重要。搞懂了编码的知识，其他的也容易理解了。","user_name":"作者回复","comment_id":230510,"uid":"1112089","ip_address":"","utype":1,"ctime":1593442093,"user_name_real":"伟忠"}],"discussion_count":1,"race_medal":0,"score":"1593405334","product_id":100053301,"comment_content":"对编码知识一直模棱两可的，顺着这个再梳理一下吧","like_count":1,"discussions":[{"author":{"id":1112089,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/19/05a2695f.jpg","nickname":"伟忠","note":"","ucode":"FE77CF20ED6065","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499916,"discussion_content":"嗯嗯，编码的知识很基础很重要。搞懂了编码的知识，其他的也容易理解了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593442093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}