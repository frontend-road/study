{"id":174559,"title":"19 | äº‹åŠ¡å¼€å‘ï¼šå†™æ“ä½œäº‹åŠ¡","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-mongodb-course\">https://gitee.com/geektime-geekbang/geektime-mongodb-course</a></p>","comments":[{"had_liked":false,"id":164785,"user_name":"dream","can_delete":false,"product_type":"c3","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1577091290,"is_pvip":false,"replies":[{"id":62935,"content":"æ—¥å¿—ï¼š  è¿™ä¸ªæ˜¯ä¸€ä¸ªæ¯”è¾ƒé€šç”¨çš„æ¦‚å¿µï¼Œå¯ä»¥åŒ…æ‹¬ä½ è¯´çš„æ‰€æœ‰ï¼ˆjournal,oplog,ä»¥åŠserveræ—¥å¿—ï¼‰ã€‚\n\nå…·ä½“ä¸€ç‚¹æ¥è¯´ï¼Œ journalæ—¥å¿—æ˜¯æ•°æ®åº“çš„crash recoveryæ‰‹æ®µã€‚é€šå¸¸çš„åšæ³•æ˜¯æŠŠæ•°æ®åº“å†…çš„æ•°æ®å—ä¿®æ”¹ï¼Œæå‰ç”¨æ–‡ä»¶é¡ºåºå†™æ–¹å¼åˆ·åˆ°ç›˜ä¸Šï¼Œç„¶åå†å»çœŸæ­£çš„æäº¤æ•°æ®çš„ä¿®æ”¹ã€‚è¿™æ ·çš„ç›®çš„æ˜¯åœ¨æœåŠ¡å™¨å®•æœºçš„æ—¶å€™ï¼Œå†…å­˜ä¸­è¢«ä¸¢å¤±çš„æ•°æ®å¯ä»¥åœ¨æ¢å¤è¿‡ç¨‹ä¸­ä»journal æ—¥å¿—æ–‡ä»¶ä¸­è¯»å›æ¥ã€‚\n\nOplogä¹Ÿæ˜¯è®°å½•çš„æ•°æ®åº“çš„æ“ä½œæ—¥å¿—ï¼Œä½†æ˜¯è®°çš„æ˜¯é€»è¾‘æ“ä½œå‘½ä»¤ã€‚ä¸»è¦çš„ç›®çš„æ˜¯ç”¨äºèŠ‚ç‚¹ä¹‹é—´å¤åˆ¶æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸Šé¢journalä¸»è¦æ˜¯ç”¨æ¥recover crashã€‚\n\nè¿˜æœ‰ä¸€ç§å°±æ˜¯mongod.logï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œè®°å½•æ•°æ®åº“ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œå’Œé”™è¯¯ä¿¡æ¯ç­‰ç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577181040,"ip_address":"","comment_id":164785,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼šæ—¥å¿—ã€journalã€oplog è¿™ä¸‰ä¸ªæœ‰ä»€ä¹ˆè”ç³»ä¸åŒºåˆ«å‘¢ï¼Ÿæ„Ÿè§‰è¿™ä¸‰è€…çš„æ¦‚å¿µå¾ˆæ··æ·†ã€‚","like_count":10,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478893,"discussion_content":"æ—¥å¿—ï¼š  è¿™ä¸ªæ˜¯ä¸€ä¸ªæ¯”è¾ƒé€šç”¨çš„æ¦‚å¿µï¼Œå¯ä»¥åŒ…æ‹¬ä½ è¯´çš„æ‰€æœ‰ï¼ˆjournal,oplog,ä»¥åŠserveræ—¥å¿—ï¼‰ã€‚\n\nå…·ä½“ä¸€ç‚¹æ¥è¯´ï¼Œ journalæ—¥å¿—æ˜¯æ•°æ®åº“çš„crash recoveryæ‰‹æ®µã€‚é€šå¸¸çš„åšæ³•æ˜¯æŠŠæ•°æ®åº“å†…çš„æ•°æ®å—ä¿®æ”¹ï¼Œæå‰ç”¨æ–‡ä»¶é¡ºåºå†™æ–¹å¼åˆ·åˆ°ç›˜ä¸Šï¼Œç„¶åå†å»çœŸæ­£çš„æäº¤æ•°æ®çš„ä¿®æ”¹ã€‚è¿™æ ·çš„ç›®çš„æ˜¯åœ¨æœåŠ¡å™¨å®•æœºçš„æ—¶å€™ï¼Œå†…å­˜ä¸­è¢«ä¸¢å¤±çš„æ•°æ®å¯ä»¥åœ¨æ¢å¤è¿‡ç¨‹ä¸­ä»journal æ—¥å¿—æ–‡ä»¶ä¸­è¯»å›æ¥ã€‚\n\nOplogä¹Ÿæ˜¯è®°å½•çš„æ•°æ®åº“çš„æ“ä½œæ—¥å¿—ï¼Œä½†æ˜¯è®°çš„æ˜¯é€»è¾‘æ“ä½œå‘½ä»¤ã€‚ä¸»è¦çš„ç›®çš„æ˜¯ç”¨äºèŠ‚ç‚¹ä¹‹é—´å¤åˆ¶æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸Šé¢journalä¸»è¦æ˜¯ç”¨æ¥recover crashã€‚\n\nè¿˜æœ‰ä¸€ç§å°±æ˜¯mongod.logï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œè®°å½•æ•°æ®åº“ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œå’Œé”™è¯¯ä¿¡æ¯ç­‰ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577181040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1165671,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c9/67/7d446501.jpg","nickname":"å¤§å±•å®å…”","note":"","ucode":"21E6001F29951B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":576519,"discussion_content":"WAL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655623571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":478893,"ip_address":"","group_id":0},"score":576519,"extra":""}]},{"author":{"id":1180955,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/1b/fc1aa0ac.jpg","nickname":"ç‹å¤§ä¼Ÿ","note":"","ucode":"A3BDC4D7B94B0F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98759,"discussion_content":"è·Ÿmysqlçš„redolog binlogç›¸ä¼¼","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1577185340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166624,"user_name":"æ’‘ä¼ä¹Ÿæ˜¯é›¨ä¸­äººã€‚","can_delete":false,"product_type":"c3","uid":1610634,"ip_address":"","ucode":"743F23626ACF53","user_header":"https://static001.geekbang.org/account/avatar/00/18/93/8a/2b78f44d.jpg","comment_is_top":false,"comment_ctime":1577522796,"is_pvip":false,"replies":[{"id":65195,"content":"æœåŠ¡å™¨ç«¯æ— æ³•é…ç½®ã€‚\nä½ å¯ä»¥åœ¨Connection Stringä¸Šè®¾ç½®ï¼Œè¿™ä¸ªä¸€èˆ¬æ˜¯å…¨å±€ç»Ÿä¸€çš„è®¾ç½®ã€‚\n\nä¾‹å­ï¼š\n\nmongodb:&#47;&#47;db0.example.com,db1.example.com,db2.example.com&#47;?replicaSet=myRepl&amp;w=majority&amp;wtimeoutMS=5000\n\nè¯¦ç»†æ–‡æ¡£ï¼š\nhttps:&#47;&#47;docs.mongodb.com&#47;manual&#47;reference&#47;connection-string&#47;\n\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577967539,"ip_address":"","comment_id":166624,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆ mongoæ˜¯å¦å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯é…ç½® majority write concern ï¼Œè·Ÿ j : true ï¼Ÿ  å¦‚æœåœ¨sqlå±‚é¢æ¯æ¡è¯­å¥åŠ  w:majority , j : true æœ‰ç‚¹éº»çƒ¦ï¼Œå¼€å‘ä¹Ÿä¸ä¸€å®šæŒ‰ç…§è§„èŒƒæ¥æ“ä½œã€‚   å¦‚æœå¯ä»¥åœ¨æœåŠ¡å™¨ç›´æ¥é…ç½®ï¼Œè¯¥å¦‚ä½•é…ç½®","like_count":6,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479562,"discussion_content":"æœåŠ¡å™¨ç«¯æ— æ³•é…ç½®ã€‚\nä½ å¯ä»¥åœ¨Connection Stringä¸Šè®¾ç½®ï¼Œè¿™ä¸ªä¸€èˆ¬æ˜¯å…¨å±€ç»Ÿä¸€çš„è®¾ç½®ã€‚\n\nä¾‹å­ï¼š\n\nmongodb://db0.example.com,db1.example.com,db2.example.com/?replicaSet=myRepl&amp;amp;w=majority&amp;amp;wtimeoutMS=5000\n\nè¯¦ç»†æ–‡æ¡£ï¼š\nhttps://docs.mongodb.com/manual/reference/connection-string/\n\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577967539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1076081,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6b/71/e833b14a.jpg","nickname":"æè‹±æƒ","note":"","ucode":"FECAC14A9C414B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324368,"discussion_content":"å“‡ å¤ªæ„Ÿè°¢äº†ï¼Œæˆ‘ç ”ç©¶åŠå¤© æ²¡æ‰¾åˆ°springdataå“ªé‡Œå¯ä»¥é…ç½®wtimeout","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605095922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166005,"user_name":"wu526","can_delete":false,"product_type":"c3","uid":1022129,"ip_address":"","ucode":"69282EB175B48E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","comment_is_top":false,"comment_ctime":1577361480,"is_pvip":false,"replies":[{"id":66852,"content":"è¿™ä¸ªé—®é¢˜æˆ‘å·²ç»æäº¤ç»™åŸå‚äº†ï¼Œæš‚æ—¶è¿˜æ²¡æœ‰å›å¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1579170339,"ip_address":"","comment_id":166005,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘åœ¨æ¼”ç»ƒçš„æ—¶å€™å‘ç°(ä½¿ç”¨mongodbçš„cliå·¥å…·)ï¼Œå½“é›†ç¾¤ä¸º3ä¸ªçš„æ—¶å€™ï¼Œå°†writeConcernçš„wè®¾ç½®ä¸º4æ—¶, æ•°æ®ä»»ç„¶å¯ä»¥æ’å…¥æˆåŠŸï¼Œä½†æ˜¯cliæœ‰é”™è¯¯ä¿¡æ¯è¿”å›ã€‚è¿™ä¸ªå’Œé¢„æƒ³çš„æƒ…å†µä¸åŒã€‚å¦‚æœæˆ‘æƒ³è®©è¿™ç§æƒ…å†µä¹Ÿæ— æ³•æ’å…¥æ•°æ®åº”è¯¥å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479349,"discussion_content":"è¿™ä¸ªé—®é¢˜æˆ‘å·²ç»æäº¤ç»™åŸå‚äº†ï¼Œæš‚æ—¶è¿˜æ²¡æœ‰å›å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579170339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165388,"user_name":"å¥•","can_delete":false,"product_type":"c3","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1577232788,"is_pvip":false,"replies":[{"id":65228,"content":"j:1 è¡¨ç¤ºJournal æ—¥å¿—åˆ·ç›˜ï¼Œæ‰€ä»¥å°±æ˜¯è¦å†™æ–‡ä»¶åˆ°ç¡¬ç›˜ã€‚\n\næ­£å¸¸æ•°æ®åªæ˜¯å†™åˆ°å†…å­˜çš„Cacheï¼ˆä¸æ˜¯æ“ä½œç³»ç»Ÿçš„cacheï¼Œè€Œæ˜¯WiredTigerè‡ªå·±ç®¡ç†çš„Cacheï¼‰ï¼Œç„¶åå¼‚æ­¥åˆ·ç›˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577974118,"ip_address":"","comment_id":165388,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"Mongo è½ç›˜çš„æ—¶å€™ï¼Œæœ‰ç”¨åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ Page Cache æœºåˆ¶å—ï¼Ÿ\nå½“æœ‰ä¸€æ¡æ•°æ®æ›´æ–°çš„æ—¶å€™æ˜¯å…ˆå†™åˆ°å†…å­˜ï¼Œç„¶åæ˜¯Page Cache æœ€åæ˜¯ ç¡¬ç›˜å—ï¼Ÿ\n\nj è¿™ä¸ªå‚æ•°æ˜¯ä»£è¡¨å†™åˆ° Page Cache è¿˜æ˜¯ç¡¬ç›˜å‘¢ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479140,"discussion_content":"j:1 è¡¨ç¤ºJournal æ—¥å¿—åˆ·ç›˜ï¼Œæ‰€ä»¥å°±æ˜¯è¦å†™æ–‡ä»¶åˆ°ç¡¬ç›˜ã€‚\n\næ­£å¸¸æ•°æ®åªæ˜¯å†™åˆ°å†…å­˜çš„Cacheï¼ˆä¸æ˜¯æ“ä½œç³»ç»Ÿçš„cacheï¼Œè€Œæ˜¯WiredTigerè‡ªå·±ç®¡ç†çš„Cacheï¼‰ï¼Œç„¶åå¼‚æ­¥åˆ·ç›˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577974118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165671,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c9/67/7d446501.jpg","nickname":"å¤§å±•å®å…”","note":"","ucode":"21E6001F29951B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576525,"discussion_content":"&#34;æ­£å¸¸æ•°æ®åªæ˜¯å†™åˆ°å†…å­˜çš„Cache&#34; çœ‹èµ·æ¥å’ŒMySQL  innodb_flush_log_at_trx_commit å‚æ•°ä¸º0æ—¶ç±»ä¼¼ï¼Œéƒ½æ˜¯å…ˆæŠŠæ•°æ®ä¿å­˜åœ¨è‡ªå·±çš„è¿›ç¨‹å†…å­˜ä¸­ï¼› j: trueçš„è¯ï¼Œç±»ä¼¼ä¸Šé¢MySQLå‚æ•°å€¼&#34;1&#34;, å³ç›´æ¥åˆ·ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655627760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164228,"user_name":"dream","can_delete":false,"product_type":"c3","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1576910790,"is_pvip":false,"replies":[{"id":62959,"content":"æœ‰ç‚¹ç»•ã€‚ä½†æ˜¯â€œåˆšåˆšå†™çš„é‚£æ¡æ•°æ®æ˜¯åœ¨å®ƒç›‘å¬ä¹‹å‰å†™å…¥æ–°çš„ä¸»èŠ‚ç‚¹çš„æ—¥å¿—çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªä»èŠ‚ç‚¹ä¸å°±ä¸¢å¤±äº†è¿™æ¡å†™çš„æ•°æ®äº†â€ æˆ‘åªèƒ½è¯´ï¼Œè¿™ä¸ªä»èŠ‚ç‚¹ä¸ä¼šä¸¢å¤±ã€‚\n\næœ€åä¸€ä¸ªä»èŠ‚ç‚¹é€šè¿‡æ¯”è¾ƒè‡ªå·±çš„oplogå’Œæ–°ä¸»çš„oplogæ¥ç¡®å®šæ˜¯å¦è¦åŒæ­¥æ–°æ•°æ®ã€‚ä¸¤è€…çš„oplogè‚¯å®šä¼šå·®ä¸€æ¡ï¼ˆæ–°çš„æ•°æ®ï¼‰ï¼Œå°±ä¼šä»æ–°ä¸»é‚£é‡Œå¤åˆ¶ã€‚\n\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577183646,"ip_address":"","comment_id":164228,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆè¯·é—®ä¸€ä¸‹ï¼Œå°±æ˜¯ä¸€ä¸»äºŒä»çš„æ¨¡å¼ï¼ŒwriteConcern ä¸º majorityï¼Œåˆšå¥½å†™å…¥ä¸€æ¡æ•°æ®æ—¶ä¸»èŠ‚ç‚¹å®•æœºï¼Œæ­¤æ—¶ä¸¤ä¸ªä»èŠ‚ç‚¹ä¸€ä¸ªæœ‰æ•°æ®ï¼Œä¸€ä¸ªæ²¡æœ‰è¿™æ¡æ•°æ®ï¼Œæœ‰æ•°æ®çš„ä¸€ä¸ªä½œä¸ºä¸»èŠ‚ç‚¹ã€‚æ­¤æ—¶ï¼Œæ²¡æœ‰æ•°æ®çš„ä¸€ä¸ªè¿˜æ˜¯ä»èŠ‚ç‚¹ï¼Œå®ƒçš„åŒæ­¥æ˜¯å»ç›‘å¬æ–°çš„ä¸»èŠ‚ç‚¹çš„æ—¥å¿—å˜åŒ–ï¼Œä½†æ˜¯åˆšåˆšå†™çš„é‚£æ¡æ•°æ®æ˜¯åœ¨å®ƒç›‘å¬ä¹‹å‰å†™å…¥æ–°çš„ä¸»èŠ‚ç‚¹çš„æ—¥å¿—çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªä»èŠ‚ç‚¹ä¸å°±ä¸¢å¤±äº†è¿™æ¡å†™çš„æ•°æ®äº†å—ï¼Ÿmongodbè¿˜æœ‰å…¶ä»–ä»€ä¹ˆæœºåˆ¶ä¿è¯å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478686,"discussion_content":"æœ‰ç‚¹ç»•ã€‚ä½†æ˜¯â€œåˆšåˆšå†™çš„é‚£æ¡æ•°æ®æ˜¯åœ¨å®ƒç›‘å¬ä¹‹å‰å†™å…¥æ–°çš„ä¸»èŠ‚ç‚¹çš„æ—¥å¿—çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªä»èŠ‚ç‚¹ä¸å°±ä¸¢å¤±äº†è¿™æ¡å†™çš„æ•°æ®äº†â€ æˆ‘åªèƒ½è¯´ï¼Œè¿™ä¸ªä»èŠ‚ç‚¹ä¸ä¼šä¸¢å¤±ã€‚\n\næœ€åä¸€ä¸ªä»èŠ‚ç‚¹é€šè¿‡æ¯”è¾ƒè‡ªå·±çš„oplogå’Œæ–°ä¸»çš„oplogæ¥ç¡®å®šæ˜¯å¦è¦åŒæ­¥æ–°æ•°æ®ã€‚ä¸¤è€…çš„oplogè‚¯å®šä¼šå·®ä¸€æ¡ï¼ˆæ–°çš„æ•°æ®ï¼‰ï¼Œå°±ä¼šä»æ–°ä¸»é‚£é‡Œå¤åˆ¶ã€‚\n\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577183646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166945,"user_name":"Allen","can_delete":false,"product_type":"c3","uid":1168265,"ip_address":"","ucode":"10D365C791D28F","user_header":"https://static001.geekbang.org/account/avatar/00/11/d3/89/fcf95d32.jpg","comment_is_top":false,"comment_ctime":1577635441,"is_pvip":false,"replies":[{"id":65194,"content":"è¿™ä¸ªæ˜¯éœ€è¦ç”¨reconfigå‘½ä»¤æ‰èƒ½ç”Ÿæ•ˆçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577967416,"ip_address":"","comment_id":166945,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œæˆ‘å‘ç°é…ç½®å¥½äº†åï¼Œéœ€è¦è°ƒç”¨ä¸€ä¸‹rs.reconfig()å‘½ä»¤æ‰èƒ½ç”Ÿæ•ˆï¼Œè¿™ä¸ªå’Œmongodbçš„ç‰ˆæœ¬æœ‰å…³ç³»å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479688,"discussion_content":"è¿™ä¸ªæ˜¯éœ€è¦ç”¨reconfigå‘½ä»¤æ‰èƒ½ç”Ÿæ•ˆçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577967416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173166,"user_name":"æè‹±æƒ","can_delete":false,"product_type":"c3","uid":1076081,"ip_address":"","ucode":"FECAC14A9C414B","user_header":"https://static001.geekbang.org/account/avatar/00/10/6b/71/e833b14a.jpg","comment_is_top":false,"comment_ctime":1579442973,"is_pvip":false,"replies":[{"id":67374,"content":"é»˜è®¤æ˜¯read uncommittedã€‚æ­£å¸¸æƒ…å†µéƒ½ä¸ä¼šæœ‰é—®é¢˜ï¼Œé™¤äº†å‘ç”Ÿå®•æœºçš„æ—¶å€™ï¼Œè¿™ä¸ªå¯èƒ½ä¼šæœ‰é—®é¢˜ - ä½ è¯»åˆ°çš„ä¸€æ¡æ•°æ®å¯èƒ½ä¼šåœ¨å®•æœºçš„æ—¶å€™è¢«å›æ»šæ‰ã€‚è¿™ç§äº‹æƒ…æ¦‚ç‡å¾ˆå°ï¼Œå‘ç”Ÿäº†å¯èƒ½é—®é¢˜ä¹Ÿä¸ç®—ç‰¹åˆ«ä¸¥é‡ï¼Œå¾ˆå¤šåœºæ™¯å¯ä»¥æ¥å—ã€‚å¦‚æœè¦æ±‚æ¯”è¾ƒé«˜ï¼Œé‚£ä¹ˆéœ€è¦ç”¨ readConcern: majority æ¥æé«˜éš”ç¦»çº§åˆ«ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1579702594,"ip_address":"","comment_id":173166,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œmongodbäº‹åŠ¡çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Ÿå¬è¯´æ˜¯ç›¸å½“äºread uncommittedï¼Œè¿™æ ·ä¼¼ä¹å­˜åœ¨é—®é¢˜å•Š","like_count":2,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481984,"discussion_content":"é»˜è®¤æ˜¯read uncommittedã€‚æ­£å¸¸æƒ…å†µéƒ½ä¸ä¼šæœ‰é—®é¢˜ï¼Œé™¤äº†å‘ç”Ÿå®•æœºçš„æ—¶å€™ï¼Œè¿™ä¸ªå¯èƒ½ä¼šæœ‰é—®é¢˜ - ä½ è¯»åˆ°çš„ä¸€æ¡æ•°æ®å¯èƒ½ä¼šåœ¨å®•æœºçš„æ—¶å€™è¢«å›æ»šæ‰ã€‚è¿™ç§äº‹æƒ…æ¦‚ç‡å¾ˆå°ï¼Œå‘ç”Ÿäº†å¯èƒ½é—®é¢˜ä¹Ÿä¸ç®—ç‰¹åˆ«ä¸¥é‡ï¼Œå¾ˆå¤šåœºæ™¯å¯ä»¥æ¥å—ã€‚å¦‚æœè¦æ±‚æ¯”è¾ƒé«˜ï¼Œé‚£ä¹ˆéœ€è¦ç”¨ readConcern: majority æ¥æé«˜éš”ç¦»çº§åˆ«ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579702594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163041,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c3","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1576644993,"is_pvip":false,"replies":[{"id":62368,"content":"å¦‚æœä½ ä½¿ç”¨majority write concernçš„è¯ï¼Œä¸ä¸€å®šéå¾—éœ€è¦j:trueã€‚å› ä¸ºå³ä½¿åœ¨ä¸»èŠ‚ç‚¹crashåœºæ™¯ä¸‹ï¼Œè¿™æ¡æ•°æ®ä¹Ÿå·²ç»åœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæœ‰äº†ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1576888090,"ip_address":"","comment_id":163041,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œjå‚æ•°ä¸€èˆ¬è¦è®¾ç½®ä¸ºtrueå—","like_count":2,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478224,"discussion_content":"å¦‚æœä½ ä½¿ç”¨majority write concernçš„è¯ï¼Œä¸ä¸€å®šéå¾—éœ€è¦j:trueã€‚å› ä¸ºå³ä½¿åœ¨ä¸»èŠ‚ç‚¹crashåœºæ™¯ä¸‹ï¼Œè¿™æ¡æ•°æ®ä¹Ÿå·²ç»åœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæœ‰äº†ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576888090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1309984,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fd/20/2761ef0e.jpg","nickname":"cheriston","note":"","ucode":"617CBFCE0925C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":90965,"discussion_content":"éå¸¸é‡è¦æ•°æ®æ“ä½œè¦åŠ è¿™ä¸ªæ¡ä»¶å‚æ•°ï¼Œä¿è¯æ•°æ®å†å®•æœºåä¸ä¸¢å¤±æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576804442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1019332,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","nickname":"é•¿æœŸè§„åˆ’","note":"","ucode":"5EF65E9115834B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1309984,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fd/20/2761ef0e.jpg","nickname":"cheriston","note":"","ucode":"617CBFCE0925C4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":91031,"discussion_content":"è°¢è°¢ï¼Œå…¶å®åŠ äº†w=majorityæˆ‘æ„Ÿè§‰ä¹Ÿå¯ä»¥äº†å§ï¼Œå³ä½¿å®•æœºï¼Œä¹Ÿå·²ç»åœ¨ä»èŠ‚ç‚¹æœ‰æ•°æ®äº†ã€‚åœ¨MySQLä¸­jå¯¹åº”çš„åº”è¯¥æ˜¯redo logï¼Œä½†ç”±äºMySQLæ²¡æœ‰wå‚æ•°ï¼Œå³å®ƒä¸ä¼šç­‰åŒæ­¥ä»åº“åå†è¿”å›ï¼Œæ‰€ä»¥å®‰å…¨åšæ³•æ˜¯redo logè½ç›˜åå†è¿”å›ã€‚\nä½†Mongoæœ‰wï¼Œæˆ‘æ„Ÿè§‰jçš„å¿…è¦æ€§å·²ç»ä¸å¤§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576806403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":90965,"ip_address":"","group_id":0},"score":91031,"extra":""}]}]},{"had_liked":false,"id":224103,"user_name":"ç”°ç¿Œè¾°","can_delete":false,"product_type":"c3","uid":1430069,"ip_address":"","ucode":"4AF661C4C61C68","user_header":"https://static001.geekbang.org/account/avatar/00/15/d2/35/b25875e4.jpg","comment_is_top":false,"comment_ctime":1591275616,"is_pvip":false,"replies":[{"id":82545,"content":"oplogå’Œå°±æ˜¯ä¸€ä¸ªMongoDBçš„collection ï¼Œéƒ½æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ã€‚ å¯¹oplogçš„æ“ä½œåªæ˜¯é¡ºåºè¿½åŠ å†™å…¥ï¼Œæ‰€ä»¥æ•ˆç‡ç›¸å¯¹æ¥è¯´ä¼šé«˜ä¸å°‘ï¼Œç›¸æ¯”äºæ™®é€šcollection çš„éšæœºè¯»å†™ã€‚\n\næ¯ä¸€æ¬¡å¢åˆ æ”¹éƒ½ä¼šè®°å½•ç›¸åº”çš„oplogï¼Œå¹¶ä¸”å¯¹oplogçš„æ“ä½œå’Œæ•°æ®è¡¨çš„å†™å…¥æ˜¯åŒä¸€ä¸ªåŸå­äº‹åŠ¡çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1591322179,"ip_address":"","comment_id":224103,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œoplogæ˜¯åœ¨å†…å­˜ä¸­è¿˜æ˜¯åœ¨ç£ç›˜ä¸Šå‘¢ï¼Ÿ æ¯ä¸€æ¬¡å†™æ“ä½œéƒ½ä¼šäº‹åŠ¡çš„è®°å½•oplogå¯¹å§","like_count":1,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497367,"discussion_content":"oplogå’Œå°±æ˜¯ä¸€ä¸ªMongoDBçš„collection ï¼Œéƒ½æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ã€‚ å¯¹oplogçš„æ“ä½œåªæ˜¯é¡ºåºè¿½åŠ å†™å…¥ï¼Œæ‰€ä»¥æ•ˆç‡ç›¸å¯¹æ¥è¯´ä¼šé«˜ä¸å°‘ï¼Œç›¸æ¯”äºæ™®é€šcollection çš„éšæœºè¯»å†™ã€‚\n\næ¯ä¸€æ¬¡å¢åˆ æ”¹éƒ½ä¼šè®°å½•ç›¸åº”çš„oplogï¼Œå¹¶ä¸”å¯¹oplogçš„æ“ä½œå’Œæ•°æ®è¡¨çš„å†™å…¥æ˜¯åŒä¸€ä¸ªåŸå­äº‹åŠ¡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591322179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172819,"user_name":"é»˜","can_delete":false,"product_type":"c3","uid":1230305,"ip_address":"","ucode":"5008C954338844","user_header":"https://static001.geekbang.org/account/avatar/00/12/c5/e1/b8ca59b5.jpg","comment_is_top":false,"comment_ctime":1579324544,"is_pvip":false,"replies":[{"id":67873,"content":"æŒ‰ç…§mongodbå¤åˆ¶é›†é€‰ä¸¾è§„åˆ™ï¼Œæœ‰æœ€æ–°æ•°æ®çš„ä¼šç¬¬ä¸€ä¼˜å…ˆè¢«é€‰ä¸ºä¸»èŠ‚ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1580283917,"ip_address":"","comment_id":172819,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"æ€ä¹ˆå°±ç¡®å®šé‡æ–°å¯åŠ¨çš„ä¸»èŠ‚ç‚¹æ˜¯åŒæ­¥x=1çš„èŠ‚ç‚¹å‘¢.ä¹Ÿå¯èƒ½æ˜¯è¿˜æ²¡åŒæ­¥x=1èŠ‚ç‚¹.","like_count":1,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481865,"discussion_content":"æŒ‰ç…§mongodbå¤åˆ¶é›†é€‰ä¸¾è§„åˆ™ï¼Œæœ‰æœ€æ–°æ•°æ®çš„ä¼šç¬¬ä¸€ä¼˜å…ˆè¢«é€‰ä¸ºä¸»èŠ‚ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580283917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1370304,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLNgTWpN9vEUMZ77xTkiaPibX8E22c2L5GTmkgyP4cajbNiap5zEp28HicvA8eOCQqYo7YDsAhuafict2Q/132","nickname":"Geek_lbv7gj","note":"","ucode":"0CD6F332407936","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412069,"discussion_content":"æˆ‘ä¹Ÿåœ¨ç–‘æƒ‘è¿™ä¸ªé—®é¢˜ï¼Œå°±çœ‹åˆ°äº†è€å¸ˆçš„å›å¤ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636074147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167572,"user_name":"dream","can_delete":false,"product_type":"c3","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1577864019,"is_pvip":false,"replies":[{"id":65189,"content":"è·¨ç³»ç»Ÿäº‹åŠ¡ï¼ˆXAï¼‰ç›®å‰åœ¨MongoDB&#47;ESä¸Šå¹¶æ— å®ç°ã€‚Tough luck, æœç´¢ä¸‹Saga Patternï¼Œè‡ªå·±åšäº‹åŠ¡è¡¥å¿å§ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577966081,"ip_address":"","comment_id":167572,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸ªé—®é¢˜å‘€ï¼Œä¸€æ¡æ•°æ®åœ¨æŸä¸ªç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘éœ€è¦æŠŠå®ƒå†™å…¥ es ä¸ mongo(å…ˆå†™å…¥mongoï¼Œç„¶ååœ¨å†™å…¥es)ï¼Œå†™å…¥mongoæ˜¯okçš„ï¼Œä½†æ˜¯ç”±äºæŸäº›åŸå› å†™å…¥eså¤±è´¥ã€‚\nè¿™ä¸ªæ—¶å€™æˆ‘éœ€è¦å›æ»š mongo é‡Œé¢çš„æ•°æ®ï¼Œæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479902,"discussion_content":"è·¨ç³»ç»Ÿäº‹åŠ¡ï¼ˆXAï¼‰ç›®å‰åœ¨MongoDB/ESä¸Šå¹¶æ— å®ç°ã€‚Tough luck, æœç´¢ä¸‹Saga Patternï¼Œè‡ªå·±åšäº‹åŠ¡è¡¥å¿å§ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577966081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163743,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c3","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1576797434,"is_pvip":false,"replies":[{"id":62965,"content":"ä½ è¿™ä¸ªæ˜¯Triple Failure - ä¸‰é‡é”™è¯¯ã€‚ å¦‚æœæŒ‰ç…§è¿™ç§å‡è®¾ï¼Œæç«¯ç‚¹çš„è¯å°±åƒæ˜¯3ä¸ªç¡¬ç›˜åŒæ—¶åæ‰ï¼Œä½ å…¨éƒ¨å†™å…¥éƒ½æ²¡ç”¨ã€‚æ•°æ®è¿˜æ˜¯ä¸¢äº†ã€‚\n\nç„¶åï¼Œä½ çš„æè¿°ç¡®å®æœ‰å¯èƒ½å‘ç”Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577185428,"ip_address":"","comment_id":163743,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œw=majorityæ—¶ï¼Œå†™å…¥æˆåŠŸä¼šæ•°æ®ä¸€å®šä¸ä¼šä¸¢å§ï¼Ÿæ¯”å¦‚å‰¯æœ¬é›†æœ‰5ä¸ªèŠ‚ç‚¹ï¼ŒæŸä¸€æ¬¡æ›´æ–°å½•å½•è®°ä¸ºrï¼Œæ›´æ–°æˆåŠŸã€‚ä¸»å’Œå¦ä¸€ä»èŠ‚ç‚¹å®•æœºï¼Œå‰©ä¸‹Aï¼ŒBï¼ŒCä¸‰ä¸ªèŠ‚ç‚¹ï¼Œä¸”æ»¡è¶³\n1. Aä¸Bï¼ŒCèƒ½é€šä¿¡ï¼Œä½†Bå’ŒCä¹‹é—´æ— æ³•é€šä¿¡\n2. Aæ¯”Bå’ŒCæœ‰æ›´é«˜ä¼˜å…ˆçº§\n3. Açš„opIogæ¯”Bå’ŒCæ—§ï¼Œå°‘ä¸€ä¸ªä¿®æ”¹è®°å½•r\nè¿™ç§æƒ…å†µä¸‹ï¼ŒAæ˜¯ä¸æ˜¯æœ‰å¯èƒ½æˆä¸ºä¸»èŠ‚ç‚¹å‘¢ï¼Ÿå¦‚æœæ˜¯ï¼ŒBå’ŒCåŒæ­¥Açš„æ•°æ®åï¼Œä¼šå›æ»šé‚£ä¸ªè®°å½•rå§ï¼Ÿæ•°æ®ä¸å°±ä¸¢äº†å—","like_count":1,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478523,"discussion_content":"ä½ è¿™ä¸ªæ˜¯Triple Failure - ä¸‰é‡é”™è¯¯ã€‚ å¦‚æœæŒ‰ç…§è¿™ç§å‡è®¾ï¼Œæç«¯ç‚¹çš„è¯å°±åƒæ˜¯3ä¸ªç¡¬ç›˜åŒæ—¶åæ‰ï¼Œä½ å…¨éƒ¨å†™å…¥éƒ½æ²¡ç”¨ã€‚æ•°æ®è¿˜æ˜¯ä¸¢äº†ã€‚\n\nç„¶åï¼Œä½ çš„æè¿°ç¡®å®æœ‰å¯èƒ½å‘ç”Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577185428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1309984,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fd/20/2761ef0e.jpg","nickname":"cheriston","note":"","ucode":"617CBFCE0925C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":90987,"discussion_content":"å¯¹äºå¼ºä¸€è‡´æ€§åœºæ™¯ï¼Œå»ºè®®w>1æˆ–è€…ç­‰äºmajorityï¼Œä»¥åŠjournalä¸ºtrueï¼Œå¦åˆ™w=0 ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576805031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163047,"user_name":"qbit","can_delete":false,"product_type":"c3","uid":1262927,"ip_address":"","ucode":"96C70A1E47B93D","user_header":"https://static001.geekbang.org/account/avatar/00/13/45/4f/f94caf47.jpg","comment_is_top":false,"comment_ctime":1576647285,"is_pvip":false,"replies":[{"id":62370,"content":"32GBåªæ˜¯æ§åˆ¶æ•°æ®çš„ç¼“å­˜ç©ºé—´å¤§å°ã€‚MongoDBæœåŠ¡å™¨æœ¬èº«è¿˜éœ€è¦å†…å­˜æ¥è¿›è¡Œå·¥ä½œï¼Œå¦‚ç®¡ç†TCPè¿æ¥ï¼Œèšåˆã€æ’åºè¿ç®—ç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1576888354,"ip_address":"","comment_id":163047,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"è¯·é—®æ€æ ·é™åˆ¶ MongoDB ä½¿ç”¨çš„æ€»å†…å­˜å¤§å°ï¼Ÿ\nå°† mongod.cfg ä¸­ storage.wiredTiger.engineConfig.cacheSizeGB è®¾ç½®ä¸º 32 ä¹‹åï¼Œåœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­å‘ç°ï¼ŒMongoDB Server å ç”¨çš„å†…å­˜è¿˜æ˜¯è¾¾åˆ°äº† 45 GBï¼Œç›¸å…³é…ç½®å¦‚ä¸‹ï¼š\n```\nstorage:\n  dbPath: E:\\MongoDB\\Server\\4.2\\data\n  journal:\n    enabled: true\n  engine: wiredTiger\n  wiredTiger:\n    engineConfig:\n         cacheSizeGB: 32\n```\nç³»ç»Ÿç‰ˆæœ¬ï¼š Windows Server 2012 R2\nMondoDB ç‰ˆæœ¬ï¼š 4.2.1","like_count":1,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478228,"discussion_content":"32GBåªæ˜¯æ§åˆ¶æ•°æ®çš„ç¼“å­˜ç©ºé—´å¤§å°ã€‚MongoDBæœåŠ¡å™¨æœ¬èº«è¿˜éœ€è¦å†…å­˜æ¥è¿›è¡Œå·¥ä½œï¼Œå¦‚ç®¡ç†TCPè¿æ¥ï¼Œèšåˆã€æ’åºè¿ç®—ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576888354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1262927,"avatar":"https://static001.geekbang.org/account/avatar/00/13/45/4f/f94caf47.jpg","nickname":"qbit","note":"","ucode":"96C70A1E47B93D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93111,"discussion_content":"MongoDB æœ‰å‚æ•°é™åˆ¶è‡ªå·±ä½¿ç”¨çš„æ€»å†…å­˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576907996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207276,"user_name":"Geek_7c4953","can_delete":false,"product_type":"c3","uid":1809168,"ip_address":"","ucode":"359745D4725D4F","user_header":"","comment_is_top":false,"comment_ctime":1587040820,"is_pvip":false,"replies":[{"id":77483,"content":"å†™å…¥å¤šæ•°èŠ‚ç‚¹åï¼Œå³æ—¶ä¸€ä¸ªèŠ‚ç‚¹æ•°æ®å¤±æ•ˆ&#47;ä¸å¯ç”¨ï¼Œä½ çš„æ•°æ®è¿˜åœ¨å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚æ˜¯ä»è¿™ä¸ªè§’åº¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1587095683,"ip_address":"","comment_id":207276,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"ä¸ºä»€ä¹ˆè¯´å†™å…¥å¤šæ•°é›†ç¾¤æ‰ç®—å®‰å…¨å‘¢ï¼Ÿ\nå†™å…¥ä¸€ä¸ªæ•…éšœçš„æ¦‚ç‡å¦‚æœæ˜¯aï¼Œé‚£å†™å…¥ä¸¤ä¸ªåŒæ—¶æ•…éšœçš„æ¦‚ç‡å°±æ˜¯aå¹³æ–¹ï¼Œä¸‰ä¸ªå°±æ˜¯ä¸‰æ¬¡æ–¹ï¼Œä¹Ÿå°±æ˜¯å†™å…¥çš„å®‰å…¨æ€§åº”è¯¥æ˜¯è·Ÿå†™å…¥ä¸ªæ•°æŒ‡æ•°ç›¸å…³ï¼Œè·Ÿé›†ç¾¤çš„æ€»æ•°æ²¡æœ‰å…³ç³»å•Šã€‚","like_count":0,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492068,"discussion_content":"å†™å…¥å¤šæ•°èŠ‚ç‚¹åï¼Œå³æ—¶ä¸€ä¸ªèŠ‚ç‚¹æ•°æ®å¤±æ•ˆ/ä¸å¯ç”¨ï¼Œä½ çš„æ•°æ®è¿˜åœ¨å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚æ˜¯ä»è¿™ä¸ªè§’åº¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587095683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165781,"user_name":"Julien","can_delete":false,"product_type":"c3","uid":1204568,"ip_address":"","ucode":"2A3F0CF46B4034","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/58/7b078879.jpg","comment_is_top":false,"comment_ctime":1577322057,"is_pvip":false,"replies":[{"id":65208,"content":"â€œå†™æ€§èƒ½æ˜¯standalone mongodçš„å¥½å‡ å€â€\nå¤åˆ¶é›†æ¯”å•æœºæ›´å¿«ï¼Ÿè¿˜æ˜¯æ›´æ…¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577970110,"ip_address":"","comment_id":165781,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ 1 primary + 2 secondariesï¼Œ writeConcernï¼šmajority, j:1 çš„æƒ…å†µä¸‹ï¼Œå†™æ€§èƒ½æ˜¯standalone mongodçš„å¥½å‡ å€ï¼Œè¯·é—®è¿™ä¸ªç°è±¡æ˜¯æ­£å¸¸çš„å—ï¼Ÿç†è®ºä¸Šæ¥è¯´ï¼Œå®¢æˆ·ç«¯ä»£ç ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œå³ä½¿æ•°æ®éœ€è¦æ‹·è´åˆ°secondaryï¼Œä¹Ÿä¸è¿‡æ˜¯standaloneçš„ä¸¤å€æ—¶é—´ã€‚å¸Œæœ›è€å¸ˆæŒ‡æ•™ä¸€ä¸‹~","like_count":0,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479277,"discussion_content":"â€œå†™æ€§èƒ½æ˜¯standalone mongodçš„å¥½å‡ å€â€\nå¤åˆ¶é›†æ¯”å•æœºæ›´å¿«ï¼Ÿè¿˜æ˜¯æ›´æ…¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577970110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1204568,"avatar":"https://static001.geekbang.org/account/avatar/00/12/61/58/7b078879.jpg","nickname":"Julien","note":"","ucode":"2A3F0CF46B4034","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":114412,"discussion_content":"æ›´æ…¢äº†ï¼Œæ…¢äº†å¾ˆå¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577971560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164231,"user_name":"dream","can_delete":false,"product_type":"c3","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1576910971,"is_pvip":false,"replies":[{"id":62957,"content":"åè€…ã€‚å¯¹åº”äº w:N é‡Œé¢Nä¸ªèŠ‚ç‚¹çš„æ—¥å¿—è½ç›˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577183509,"ip_address":"","comment_id":164231,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ j:true æ˜¯ä¿è¯ä¸»èŠ‚ç‚¹çš„æ—¥å¿—å†™å…¥æˆåŠŸï¼Œè¿˜æ˜¯ä¿è¯writeConcerné…ç½®çš„å‚æ•°å¯¹åº”çš„èŠ‚ç‚¹çš„æ—¥å¿—å†™å…¥æˆåŠŸæ‰è¿”å›å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478688,"discussion_content":"åè€…ã€‚å¯¹åº”äº w:N é‡Œé¢Nä¸ªèŠ‚ç‚¹çš„æ—¥å¿—è½ç›˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577183509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164220,"user_name":"dream","can_delete":false,"product_type":"c3","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1576910432,"is_pvip":false,"replies":[{"id":66778,"content":"è¿™ä¸ªå°±æ˜¯è¿™ä¸ªè¯¾ç¨‹è®²çš„å†…å®¹ï¼Œä½ å†ä»”ç»†å­¦ä¹ ä¸€è¾¹ï¼Œå¦‚æœè§‰å¾—è¿˜æ˜¯æ²¡æœ‰å¾—åˆ°ç­”æ¡ˆï¼Œå¯ä»¥çº¿ä¸‹è”ç³»ä¸‹æˆ‘ tjtang826\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1579133436,"ip_address":"","comment_id":164220,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"è¯·é—®mongodbä¸ç®¡ä¸»èŠ‚ç‚¹ï¼Œè¿˜æ˜¯ä»èŠ‚ç‚¹ï¼Œåªè¦éœ€è¦å†™å…¥çš„æ•°æ®å†™å…¥åˆ°äº†å†…å­˜ä¸­ï¼Œå°±ä¼šå“åº”ç»™å®¢æˆ·ç«¯å†™å…¥æˆåŠŸå—ï¼Ÿ\n\nmongodb ä¸»èŠ‚ç‚¹æ¥æ”¶åˆ°å†™æ“ä½œåï¼Œä¸»èŠ‚ç‚¹çš„å†™å…¥è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿå…ˆå†™å…¥å†…å­˜ï¼Œåœ¨å†™å…¥rollbackæ–‡ä»¶ï¼Œåœ¨å†™å…¥æ—¥å¿—(æ­¤æ—¶ä»èŠ‚ç‚¹ç›‘å¬åˆ°ä¸»èŠ‚ç‚¹æ—¥å¿—å‘ç”Ÿå˜åŒ–ï¼ŒåŒæ­¥å˜åŒ–åˆ°ä»èŠ‚ç‚¹è¿›è¡Œç›¸åŒçš„æµç¨‹)ï¼Œåœ¨å†™å…¥ç£ç›˜ã€‚æ˜¯è¿™æ ·çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478683,"discussion_content":"è¿™ä¸ªå°±æ˜¯è¿™ä¸ªè¯¾ç¨‹è®²çš„å†…å®¹ï¼Œä½ å†ä»”ç»†å­¦ä¹ ä¸€è¾¹ï¼Œå¦‚æœè§‰å¾—è¿˜æ˜¯æ²¡æœ‰å¾—åˆ°ç­”æ¡ˆï¼Œå¯ä»¥çº¿ä¸‹è”ç³»ä¸‹æˆ‘ tjtang826\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579133436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323693,"user_name":"ä¼ªé’","can_delete":false,"product_type":"c3","uid":2164123,"ip_address":"","ucode":"7087364945A6B0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oOSgaSW8MFRDx6da1bicY40IVg7hoDNjYlSuTeIg93aB3nuKedhbTa2HQhXpBJmN2w0xU9icvkTDZWMzL5NVicrYw/132","comment_is_top":false,"comment_ctime":1638099626,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"è¿™åªèƒ½ç®—æ˜¯åˆ†å¸ƒå¼çš„ä¸€è‡´æ€§å§ï¼Œå’ŒSQLçš„äº‹åŠ¡æ²¡å…³ç³»","like_count":2,"discussions":[{"author":{"id":1227492,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ba/e4/6df89add.jpg","nickname":"èŠ‹å¤´","note":"","ucode":"A9C875548E4EE5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":612943,"discussion_content":"æ²¡æåˆ°AICDç‰¹æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681026263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169047,"user_name":"yihang","can_delete":false,"product_type":"c3","uid":1012361,"ip_address":"","ucode":"A5506F085D1793","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/89/1a83120a.jpg","comment_is_top":false,"comment_ctime":1578265246,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"1.6 day01 mongodbé«˜æ‰‹è¯¾\nå­¦ä¹ äº† writeconcern ç”¨æ³•\nå®ƒçš„ä½œç”¨æ˜¯æè¿°å†™å…¥æ“ä½œçš„æ•°æ®å¯é æ€§çš„ä¿è¯ï¼Œæ˜¯ä¸€è‡´æ€§å’Œæ€§èƒ½çš„ä¸€ä¸ªæƒè¡¡é€‰é¡¹\nä¾‹å¦‚\ninsert(æ•°æ®,{writeConcern:{w:å€¼,j:å€¼,timeout:å€¼}})\n* w é»˜è®¤ä¸º1ï¼Œå¦‚æœæ˜¯majorityè¡¨ç¤ºå¿…é¡»ä¼ æ’­è‡³é›†ç¾¤è¶…åŠæ•°èŠ‚ç‚¹æ‰è¿”å›ï¼Œå¦‚æœæ˜¯nè¡¨ç¤ºè¦ä¼ æ’­åˆ°é›†ç¾¤çš„nä¸ªèŠ‚ç‚¹æ‰è¿”å›\n* j ä¸º true è¡¨ç¤ºéœ€è¦å†™å…¥åˆ° journal æ—¥å¿—æ‰è¿”å›ï¼Œjournal æœ‰ç‚¹åƒ mysql çš„ redo logï¼Œæä¾›äº†crash æ¢å¤åŠŸèƒ½\n* wtimeout æŒ‡å®šäº†ä¼ æ’­è¶…æ—¶æ—¶é—´","like_count":2},{"had_liked":false,"id":356002,"user_name":"qxkbwl","can_delete":false,"product_type":"c3","uid":1130310,"ip_address":"å››å·","ucode":"B090F6CAD6984D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Hvst0m2ko7Yvrq4nld4PjZjnfM5krGZNf20icO6kbGraV0ZxjkR7icib49ibqMc2GL1xuy5EZgpluF5TRxGwicylsvg/132","comment_is_top":false,"comment_ctime":1661912504,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"cfg = rs.conf()\nç‰ˆæœ¬6:\ncfg.members[0].priority = 0\ncfg.members[0].hidden = true\ncfg.members[0].secondaryDelaySecs = 3600\nrs.reconfig(cfg)","like_count":1},{"had_liked":false,"id":351556,"user_name":"é™ˆæ˜Ÿå®‡(2.11)","can_delete":false,"product_type":"c3","uid":1450562,"ip_address":"","ucode":"970E48260B7924","user_header":"https://static001.geekbang.org/account/avatar/00/16/22/42/11674804.jpg","comment_is_top":false,"comment_ctime":1657893656,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œå¯¹æ¯”MySQLï¼Œjournalæ˜¯ç›¸å½“äºredoï¼ˆç”¨äºå‰æ»šå’Œå›é€€ï¼‰ï¼Œoplogæ˜¯ç›¸å½“äºbinlogï¼Œmongod logç›¸å½“äºgeneral logï¼ˆåŒ…å«slowlogã€errorlogï¼‰ï¼Ÿ","like_count":1},{"had_liked":false,"id":272587,"user_name":"æ³¨æ„åŠ›$","can_delete":false,"product_type":"c3","uid":1142316,"ip_address":"","ucode":"7FB3399A1EAB72","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/2c/e2f3cfc0.jpg","comment_is_top":false,"comment_ctime":1610165547,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œ write concern è®¾ç½® w=None, wtimeout=None, j=None, fsync=Noneï¼Œåœ¨ä¸»ä»arbteræ¶æ„ä¸­ï¼Œä»åº“æŒ‚äº†åï¼Œå‘ç°ä¸»åº“çš„æ•°æ®æ²¡æ³•åˆ·ç›˜ï¼Œå’Œrcä¸€è‡´æ€§è¯» æœ‰å…³ç³»å—","like_count":1},{"had_liked":false,"id":370561,"user_name":"ğŸ¤”","can_delete":false,"product_type":"c3","uid":1616114,"ip_address":"ç¾å›½","ucode":"5A80E3F01DE216","user_header":"https://static001.geekbang.org/account/avatar/00/18/a8/f2/91a7a3b4.jpg","comment_is_top":false,"comment_ctime":1678958773,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040001,"comment_content":"äº‹åŠ¡åº”è¯¥æ˜¯ä¸€ç»„å†™æ“ä½œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥å§ï¼Œæœ¬èŠ‚è¯¾æ²¡æœ‰è®²åˆ°","like_count":0},{"had_liked":false,"id":370031,"user_name":"æ•°å­¦æ±¤å®¶å‡¤","can_delete":false,"product_type":"c3","uid":2029485,"ip_address":"å¹¿ä¸œ","ucode":"DE84E777C384AD","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f7/ad/4fd4d867.jpg","comment_is_top":false,"comment_ctime":1678279940,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040001,"comment_content":"ä¸‰èŠ‚ç‚¹ï¼Œä¸æ¨èä½¿ç”¨æŠ•ç¥¨èŠ‚ç‚¹åŸå› ä¹‹ä¸€å°±æ˜¯å¦‚æœæ˜¯majorityï¼ŒæŒ‚äº†ä¸€ä¸ªæ•°æ®èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±ä¼šæ°¸ä¹…ç­‰å¾…äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":365868,"user_name":"éæ´²é»‘çŒ´å­","can_delete":false,"product_type":"c3","uid":2639724,"ip_address":"ç¾å›½","ucode":"F5FEAC07D562E0","user_header":"https://static001.geekbang.org/account/avatar/00/28/47/6c/78184d19.jpg","comment_is_top":false,"comment_ctime":1673162364,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":1,"score":4,"product_id":100040001,"comment_content":"MongoDB 5.0ä¹‹åçš„ç‰ˆæœ¬ï¼Œå»¶è¿ŸèŠ‚ç‚¹çš„ç°è±¡å¥½åƒæœ‰æ‰€ä¸åŒï¼šå†™å…¥ä¹‹åç«‹åˆ»å°±èƒ½ç»™å®¢æˆ·ç«¯è¿”å›æˆåŠŸï¼Œä½†æ˜¯å»¶è¿ŸèŠ‚ç‚¹10sä¹‹åæ‰èƒ½çœ‹åˆ°æ–°æ’å…¥çš„æ•°æ®","like_count":0},{"had_liked":false,"id":359062,"user_name":"coder.js","can_delete":false,"product_type":"c3","uid":1338120,"ip_address":"é‡åº†","ucode":"3DE173A5D23690","user_header":"https://static001.geekbang.org/account/avatar/00/14/6b/08/15c473ef.jpg","comment_is_top":false,"comment_ctime":1665215135,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040001,"comment_content":"æ–°ç‰ˆæœ¬å·²ç»ä¸èƒ½ä½¿ç”¨ slaveDelay äº†ï¼Œç”¨ secondaryDelaySecs æ›¿æ¢","like_count":0},{"had_liked":false,"id":323975,"user_name":"null","can_delete":false,"product_type":"c3","uid":2857634,"ip_address":"","ucode":"627A85BCBA3A10","user_header":"https://static001.geekbang.org/account/avatar/00/2b/9a/a2/1cd42c6f.jpg","comment_is_top":false,"comment_ctime":1638246376,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040001,"comment_content":"è€å¸ˆ æ¯”å¦‚æˆ‘åˆ3ä¸ªèŠ‚ç‚¹  writeconcern è®¾ç½®all  1ä¸ªèŠ‚ç‚¹å†™å…¥å·²ç»æˆåŠŸ å‰©ä¸‹çš„éƒ½å†™å…¥ä¸æˆåŠŸ æ­¤æ—¶è¿”å›å¤±è´¥  é‚£å†™å…¥æˆåŠŸçš„èŠ‚ç‚¹ä¼šè¿›è¡Œå›æ»šå—","like_count":0},{"had_liked":false,"id":298980,"user_name":"rnn","can_delete":false,"product_type":"c3","uid":1169811,"ip_address":"","ucode":"9DC14B9DCF477D","user_header":"https://static001.geekbang.org/account/avatar/00/11/d9/93/43c876e8.jpg","comment_is_top":false,"comment_ctime":1624414422,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œæœ€åä¸€ä¸ªä¾‹å­è¶…æ—¶ä¹‹ååŒæ ·æ’å…¥æˆåŠŸï¼Œå²‚ä¸æ˜¯è¿èƒŒäº†majorityå‚æ•°çš„å«ä¹‰ï¼Ÿå› ä¸ºæœªç¡®è®¤æ˜¯3ä¸ªèŠ‚ç‚¹å‡å†™å…¥æˆåŠŸï¼Œè€Œæ’å…¥å´æˆåŠŸäº†","like_count":0},{"had_liked":false,"id":280874,"user_name":"Ruby","can_delete":false,"product_type":"c3","uid":1741877,"ip_address":"","ucode":"78DCC0843B7F92","user_header":"https://static001.geekbang.org/account/avatar/00/1a/94/35/a5ace6ae.jpg","comment_is_top":false,"comment_ctime":1614433463,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œè¯·é—®mongodbå•èŠ‚ç‚¹ä¸ºä»€ä¹ˆä¸æ”¯æŒå¤šè¡¨æ“ä½œçš„äº‹åŠ¡ï¼Ÿ","like_count":0},{"had_liked":false,"id":274101,"user_name":"è¿è¾¹","can_delete":false,"product_type":"c3","uid":1391748,"ip_address":"","ucode":"54B5DA38449728","user_header":"https://static001.geekbang.org/account/avatar/00/15/3c/84/608f679b.jpg","comment_is_top":false,"comment_ctime":1610854552,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040001,"comment_content":"ä¸å¯¹ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªæ˜¯é›†ç¾¤ä¸­çš„äº‹åŠ¡ï¼Œæ§åˆ¶ä¸€æ¡æ•°æ®ä¼šæˆåŠŸå†™åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸­ï¼Œè€Œä¸æ˜¯ä¿è¯å¤šä¸ªsqlï¼Œæ‰§è¡ŒæˆåŠŸï¼Œä¸€èµ·æäº¤ï¼Œæ‰§è¡Œå¤±è´¥ï¼Œä¸€èµ·å›æ»šçš„é‚£ç§ä¸šåŠ¡ã€‚","like_count":0},{"had_liked":false,"id":274099,"user_name":"è¿è¾¹","can_delete":false,"product_type":"c3","uid":1391748,"ip_address":"","ucode":"54B5DA38449728","user_header":"https://static001.geekbang.org/account/avatar/00/15/3c/84/608f679b.jpg","comment_is_top":false,"comment_ctime":1610853997,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100040001,"comment_content":"è¿™ä¸ªäº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¯ç›´æ¥åœ¨è¿æ¥å±‚é¢è§£å†³çš„ï¼Ÿ\nä¹‹å‰å¯¹äº‹åŠ¡çš„ç†è§£ï¼Œå°±æ˜¯å‡ ä¸ªsqlæ“ä½œä¸åŒçš„è¡¨éƒ½æˆåŠŸï¼Œè¿™ç§è§£å†³æ–¹å¼å¥½ç²¾è¾Ÿçš„æ„Ÿè§‰ã€‚","like_count":0},{"had_liked":false,"id":235809,"user_name":"polk","can_delete":false,"product_type":"c3","uid":1165455,"ip_address":"","ucode":"1B6E948BA4DFAF","user_header":"https://static001.geekbang.org/account/avatar/00/11/c8/8f/e13a6552.jpg","comment_is_top":false,"comment_ctime":1595208536,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100040001,"comment_content":"åŸæœ¬æ¦‚å¿µé‡Œï¼Œå¯¹äº‹åŠ¡ä»…ä»…æ˜¯å‡ ä¸ªsqlä¸€èµ·æˆåŠŸä¸€èµ·å¤±è´¥ï¼Œè€å¸ˆè¿™ä¸ªè®²äº†ä¸»ä»çš„äº‹åŠ¡ï¼Œå—ç›ŠåŒªæµ…","like_count":0},{"had_liked":false,"id":180917,"user_name":"å¯†ç 123456","can_delete":false,"product_type":"c3","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1582442312,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100040001,"comment_content":"åœ¨javaä¸­ è¿™æ ·ä½¿ç”¨æ²¡æœ‰å‡ºç°é”™è¯¯ã€‚\nMongoCollection  obj= md.getCollection(&quot;test&quot;);\nobj.getWriteConcern().withW(4);\nåœ¨javaä¸­ writeConcern æ˜¯è¿™æ ·ç”¨çš„å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":177134,"user_name":"cording","can_delete":false,"product_type":"c3","uid":1786385,"ip_address":"","ucode":"82063AEC231613","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKlllSKrpQkhSXyNj0glDoCiaMKp23ey4Fw0nr54MKKhYAIxxU7toQuukJe2qZjwUC990ojdNmeicVQ/132","comment_is_top":false,"comment_ctime":1581299641,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œmongodbæœ‰åˆ†å¸ƒå¼é”å—ï¼Ÿå¦‚æœæœ‰å¦‚ä½•å®ç°ç”Ÿæˆå…¨å±€å”¯ä¸€IDå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":163678,"user_name":"å…œå…œ","can_delete":false,"product_type":"c3","uid":1297941,"ip_address":"","ucode":"9033348BEF5F5A","user_header":"https://static001.geekbang.org/account/avatar/00/13/ce/15/51187703.jpg","comment_is_top":false,"comment_ctime":1576766041,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100040001,"comment_content":"writeConcernå¢åŠ äº†å†™æ“ä½œå»¶æ—¶ï¼Œåº”è¯¥ä¸€å®šä¼šå¢åŠ é›†ç¾¤å‹åŠ›å§ï¼Ÿæ¯•ç«Ÿå»¶æ—¶æœŸé—´ï¼Œå ç”¨ç€èµ„æºï¼Œå¤„ç†èƒ½åŠ›ä¼šä¸‹é™ï¼Œååé‡ä¹Ÿä¼šä¸‹é™ï¼Œå»¶è¿Ÿå¤ªå¤§æœ€ç»ˆæˆåŠŸç‡ä¹Ÿä¼šæ‰","like_count":0}]}