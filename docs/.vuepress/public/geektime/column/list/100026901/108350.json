{"id":108350,"title":"31 | pdb & cProfile：调试和性能分析的法宝","content":"<p>你好，我是景霄。</p><p>在实际生产环境中，对代码进行调试和性能分析，是一个永远都逃不开的话题。调试和性能分析的主要场景，通常有这么三个：</p><ul>\n<li>一是代码本身有问题，需要我们找到root cause并修复；</li>\n<li>二是代码效率有问题，比如过度浪费资源，增加latency，因此需要我们debug；</li>\n<li>三是在开发新的feature时，一般都需要测试。</li>\n</ul><p>在遇到这些场景时，究竟应该使用哪些工具，如何正确的使用这些工具，应该遵循什么样的步骤等等，就是这节课我们要讨论的话题。</p><h2>用pdb进行代码调试</h2><h3>pdb的必要性</h3><p>首先，我们来看代码的调试。也许不少人会有疑问：代码调试？说白了不就是在程序中使用print()语句吗？</p><p>没错，在程序中相应的地方打印，的确是调试程序的一个常用手段，但这只适用于小型程序。因为你每次都得重新运行整个程序，或是一个完整的功能模块，才能看到打印出来的变量值。如果程序不大，每次运行都非常快，那么使用print()，的确是很方便的。</p><p>但是，如果我们面对的是大型程序，运行一次的调试成本很高。特别是对于一些tricky的例子来说，它们通常需要反复运行调试、追溯上下文代码，才能找到错误根源。这种情况下，仅仅依赖打印的效率自然就很低了。</p><!-- [[[read_end]]] --><p>我们可以想象下面这个场景。比如你最常使用的极客时间App，最近出现了一个bug，部分用户无法登陆。于是，后端工程师们开始debug。</p><p>他们怀疑错误的代码逻辑在某几个函数中，如果使用print()语句debug，很可能出现的场景是，工程师们在他们认为的10个最可能出现bug的地方，都使用print()语句，然后运行整个功能块代码（从启动到运行花了5min），看打印出来的结果值，是不是和预期相符。</p><p>如果结果值和预期相符，并能直接找到错误根源，显然是最好的。但实际情况往往是，</p><ul>\n<li>要么与预期并不相符，需要重复以上步骤，继续debug；</li>\n<li>要么虽说与预期相符，但前面的操作只是缩小了错误代码的范围，所以仍得继续添加print()语句，再一次运行相应的代码模块（又要5min），进行debug。</li>\n</ul><p>你可以看到，这样的效率就很低下了。哪怕只是遇到稍微复杂一点的case，两、三个工程师一下午的时间可能就没了。</p><p>可能又有人会说，现在很多的IDE不都有内置的debug工具吗？</p><p>这话说的也没错。比如我们常用的Pycharm，可以很方便地在程序中设置断点。这样程序只要运行到断点处，便会自动停下，你就可以轻松查看环境中各个变量的值，并且可以执行相应的语句，大大提高了调试的效率。</p><p>看到这里，你不禁会问，既然问题都解决了，那为什么还要学习pdb呢？其实在很多大公司，产品的创造与迭代，往往需要很多编程语言的支持；并且，公司内部也会开发很多自己的接口，尝试把尽可能多的语言给结合起来。</p><p>这就使得，很多情况下，单一语言的IDE，对混合代码并不支持UI形式的断点调试功能，或是只对某些功能模块支持。另外，考虑到不少代码已经挪到了类似Jupyter的Notebook中，往往就要求开发者使用命令行的形式，来对代码进行调试。</p><p>而Python的pdb，正是其自带的一个调试库。它为Python程序提供了交互式的源代码调试功能，是命令行版本的IDE断点调试器，完美地解决了我们刚刚讨论的这个问题。</p><h3>如何使用pdb</h3><p>了解了pdb的重要性与必要性后，接下来，我们就一起来看看，pdb在Python中到底应该如何使用。</p><p>首先，要启动pdb调试，我们只需要在程序中，加入<code>“import pdb”</code>和<code>“pdb.set_trace()”</code>这两行代码就行了，比如下面这个简单的例子：</p><pre><code>a = 1\nb = 2\nimport pdb\npdb.set_trace()\nc = 3\nprint(a + b + c)\n</code></pre><p>当我们运行这个程序时时，它的输出界面是下面这样的，表示程序已经运行到了<code>“pdb.set_trace()”</code>这行，并且暂停了下来，等待用户输入。</p><pre><code>&gt; /Users/jingxiao/test.py(5)&lt;module&gt;()\n-&gt; c = 3\n</code></pre><p>这时，我们就可以执行，在IDE断点调试器中可以执行的一切操作，比如打印，语法是<code>\"p &lt;expression&gt;\"</code>：</p><pre><code>(pdb) p a\n1\n(pdb) p b\n2\n</code></pre><p>你可以看到，我打印的是a和b的值，分别为1和2，与预期相符。为什么不打印c呢？显然，打印c会抛出异常，因为程序目前只运行了前面几行，此时的变量c还没有被定义：</p><pre><code>(pdb) p c\n*** NameError: name 'c' is not defined\n</code></pre><p>除了打印，常见的操作还有<code>“n”</code>，表示继续执行代码到下一行，用法如下：</p><pre><code>(pdb) n\n-&gt; print(a + b + c)\n</code></pre><p>而命令<code>”l“</code>，则表示列举出当前代码行上下的11行源代码，方便开发者熟悉当前断点周围的代码状态：</p><pre><code>(pdb) l\n  1  \ta = 1\n  2  \tb = 2\n  3  \timport pdb\n  4  \tpdb.set_trace()\n  5  -&gt;\tc = 3\n  6  \tprint(a + b + c)\n</code></pre><p>命令<code>“s“</code>，就是  step into  的意思，即进入相对应的代码内部。这时，命令行中会显示<code>”--Call--“</code>的字样，当你执行完内部的代码块后，命令行中则会出现<code>”--Return--“</code>的字样。</p><p>我们来看下面这个例子：</p><pre><code>def func():\n    print('enter func()')\n\na = 1\nb = 2\nimport pdb\npdb.set_trace()\nfunc()\nc = 3\nprint(a + b + c)\n\n# pdb\n&gt; /Users/jingxiao/test.py(9)&lt;module&gt;()\n-&gt; func()\n(pdb) s\n--Call--\n&gt; /Users/jingxiao/test.py(1)func()\n-&gt; def func():\n(Pdb) l\n  1  -&gt;\tdef func():\n  2  \t\tprint('enter func()')\n  3\n  4\n  5  \ta = 1\n  6  \tb = 2\n  7  \timport pdb\n  8  \tpdb.set_trace()\n  9  \tfunc()\n 10  \tc = 3\n 11  \tprint(a + b + c)\n\n(Pdb) n\n&gt; /Users/jingxiao/test.py(2)func()\n-&gt; print('enter func()')\n(Pdb) n\nenter func()\n--Return--\n&gt; /Users/jingxiao/test.py(2)func()-&gt;None\n-&gt; print('enter func()')\n\n(Pdb) n\n&gt; /Users/jingxiao/test.py(10)&lt;module&gt;()\n-&gt; c = 3\n</code></pre><p>这里，我们使用命令<code>”s“</code>进入了函数func()的内部，显示<code>”--Call--“</code>；而当我们执行完函数func()内部语句并跳出后，显示<code>”--Return--“</code>。</p><p>另外，</p><ul>\n<li>与之相对应的命令<code>”r“</code>，表示step out，即继续执行，直到当前的函数完成返回。</li>\n<li>命令<code>”b [ ([filename:]lineno | function) [, condition] ]“</code>可以用来设置断点。比方说，我想要在代码中的第10行，再加一个断点，那么在pdb模式下输入<code>”b 11“</code>即可。</li>\n<li>而<code>”c“</code>则表示一直执行程序，直到遇到下一个断点。</li>\n</ul><p>当然，除了这些常用命令，还有许多其他的命令可以使用，这里我就不在一一赘述了。你可以参考对应的官方文档（<a href=\"https://docs.python.org/3/library/pdb.html#module-pdb\">https://docs.python.org/3/library/pdb.html#module-pdb</a>），来熟悉这些用法。</p><h2>用cProfile进行性能分析</h2><p>关于调试的内容，我主要先讲这么多。事实上，除了要对程序进行调试，性能分析也是每个开发者的必备技能。</p><p>日常工作中，我们常常会遇到这样的问题：在线上，我发现产品的某个功能模块效率低下，延迟（latency）高，占用的资源多，但却不知道是哪里出了问题。</p><p>这时，对代码进行profile就显得异常重要了。</p><p>这里所谓的profile，是指对代码的每个部分进行动态的分析，比如准确计算出每个模块消耗的时间等。这样你就可以知道程序的瓶颈所在，从而对其进行修正或优化。当然，这并不需要你花费特别大的力气，在Python中，这些需求用cProfile就可以实现。</p><p>举个例子，比如我想计算<a href=\"https://en.wikipedia.org/wiki/Fibonacci_number\">斐波拉契数列</a>，运用递归思想，我们很容易就能写出下面这样的代码：</p><pre><code>def fib(n):\n    if n == 0:\n        return 0\n    elif n == 1:\n        return 1\n    else:\n        return fib(n-1) + fib(n-2)\n\ndef fib_seq(n):\n    res = []\n    if n &gt; 0:\n        res.extend(fib_seq(n-1))\n    res.append(fib(n))\n    return res\n\nfib_seq(30)\n</code></pre><p>接下来，我想要测试一下这段代码总的效率以及各个部分的效率。那么，我就只需在开头导入cProfile这个模块，并且在最后运行cProfile.run()就可以了：</p><pre><code>import cProfile\n# def fib(n)\n# def fib_seq(n):\ncProfile.run('fib_seq(30)')\n</code></pre><p>或者更简单一些，直接在运行脚本的命令中，加入选项<code>“-m cProfile”</code>也很方便：</p><pre><code>python3 -m cProfile xxx.py\n</code></pre><p>运行完毕后，我们可以看到下面这个输出界面：</p><p><img src=\"https://static001.geekbang.org/resource/image/2b/49/2b15939d6da0fd14d07e4c7c15fb3c49.png?wh=1384*428\" alt=\"\"></p><p>这里有一些参数你可能比较陌生，我来简单介绍一下：</p><ul>\n<li>ncalls，是指相应代码/函数被调用的次数；</li>\n<li>tottime，是指对应代码/函数总共执行所需要的时间（注意，并不包括它调用的其他代码/函数的执行时间）；</li>\n<li>tottime percall，就是上述两者相除的结果，也就是<code>tottime / ncalls</code>；</li>\n<li>cumtime，则是指对应代码/函数总共执行所需要的时间，这里包括了它调用的其他代码/函数的执行时间；</li>\n<li>cumtime percall，则是cumtime和ncalls相除的平均结果。</li>\n</ul><p>了解这些参数后，再来看这张图。我们可以清晰地看到，这段程序执行效率的瓶颈，在于第二行的函数fib()，它被调用了700多万次。</p><p>有没有什么办法可以提高改进呢？答案是肯定的。通过观察，我们发现，程序中有很多对fib()的调用，其实是重复的，那我们就可以用字典来保存计算过的结果，防止重复。改进后的代码如下所示：</p><pre><code>def memoize(f):\n    memo = {}\n    def helper(x):\n        if x not in memo:            \n            memo[x] = f(x)\n        return memo[x]\n    return helper\n\n@memoize\ndef fib(n):\n    if n == 0:\n        return 0\n    elif n == 1:\n        return 1\n    else:\n        return fib(n-1) + fib(n-2)\n\n\ndef fib_seq(n):\n    res = []\n    if n &gt; 0:\n        res.extend(fib_seq(n-1))\n    res.append(fib(n))\n    return res\n\nfib_seq(30)\n</code></pre><p>这时，我们再对其进行profile，你就会得到新的输出结果，很明显，效率得到了极大的提高。</p><p><img src=\"https://static001.geekbang.org/resource/image/2f/e3/2f5d33bf3151eb8099a54e1340bfd9e3.png?wh=1372*498\" alt=\"\"></p><p>这个简单的例子，便是cProfile的基本用法，也是我今天想讲的重点。当然，cProfile还有很多其他功能，还可以结合stats类来使用，你可以阅读相应的  <a href=\"https://docs.python.org/3.7/library/profile.html\">官方文档</a> 来了解。</p><h2>总结</h2><p>这节课，我们一起学习了Python中常用的调试工具pdb，和经典的性能分析工具cProfile。pdb为Python程序提供了一种通用的、交互式的高效率调试方案；而cProfile则是为开发者提供了每个代码块执行效率的详细分析，有助于我们对程序的优化与提高。</p><p>关于它们的更多用法，你可以通过它们的官方文档进行实践，都不太难，熟能生巧。</p><h2>思考题</h2><p>最后，留一个开放性的交流问题。你在平时的工作中，常用的调试和性能分析工具是什么呢？有发现什么独到的使用技巧吗？你曾用到过pdb、cProfile或是其他相似的工具吗？</p><p>欢迎在下方留言与我讨论，也欢迎你把这篇文章分享出去。我们一起交流，一起进步。</p><p></p>","neighbors":{"left":{"article_title":"30 | 真的有必要写单元测试吗？","id":107929},"right":{"article_title":"32 | 答疑（三）：如何选择合适的异常处理方式？","id":108661}},"comments":[{"had_liked":false,"id":115325,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1563533484,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"319391113388","product_id":100026901,"comment_content":"全文这个装饰器最牛逼。","like_count":75,"discussions":[{"author":{"id":2403543,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ac/d7/205f55aa.jpg","nickname":"我永远喜欢甘雨","note":"","ucode":"9FC9172D63F6B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383315,"discussion_content":"functools里有个实现好的函数缓存装饰器，functools.lru_cache","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1626057350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2369413,"avatar":"https://static001.geekbang.org/account/avatar/00/24/27/85/ddeeaf30.jpg","nickname":"dived","note":"","ucode":"141916A3BAF5A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375085,"discussion_content":"你实一下就知道了 没这个装饰器记录函数结果，需要时间成指数上升，\n普通地\n           fib_seq(34) 3.7秒\n           fib_seq(34) 6.3秒\n          fib_seq(35) 9.7秒，后面再加一个数字都很难了\n记忆版的 fib_seq(35) 只要1ms\nfib_seq(2948) 只要15ms #2949会出现最大递归错误。\n这里就可以感叹算法的威力了。\n","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1621477787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194568,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3a/48/fbacc564.jpg","nickname":"王震","note":"","ucode":"691C40D45510B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348773,"discussion_content":"通用地实现了记忆化搜索，也就是递归版本的动态规划，精炼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1612708183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2161248,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fa/60/a4366b9c.jpg","nickname":"ZY","note":"","ucode":"18A839AFDA611E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343183,"discussion_content":"能否讲解一下呢，没get到这个装饰器的精髓","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610964387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115086,"user_name":"AllenGFLiu","can_delete":false,"product_type":"c1","uid":1221991,"ip_address":"","ucode":"90FA8A619A2629","user_header":"https://static001.geekbang.org/account/avatar/00/12/a5/67/bf286335.jpg","comment_is_top":false,"comment_ctime":1563492547,"is_pvip":false,"replies":[{"id":"42075","content":"哈哈，我是fb的，不用vscode的哈","user_name":"作者回复","user_name_real":"Jingxiao","uid":"1259521","ctime":1563513067,"ip_address":"","comment_id":115086,"utype":1}],"discussion_count":5,"race_medal":0,"score":"53103100099","product_id":100026901,"comment_content":"哥，不怀好意的问一下，你们在谷歌会用微软的vscode 吗？[奸笑脸]<br>每次看你都是提到pycharm ,我是从pycharm 转到vscode 上的，感觉整个世界都安静了。","like_count":13,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458958,"discussion_content":"哈哈，我是fb的，不用vscode的哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563513067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202047,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oib0a89lqtOhJL1UvfUp4uTsRLrDbhoGk9jLiciazxMu0COibJsFCZDypK1ZFcHEJc9d9qgbjvgR41ImL6FNPoVlWA/132","nickname":"stefen","note":"","ucode":"7C9AAE829E7802","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313045,"discussion_content":"vscode那个目录区别太不明显了   不知道设计这个产品的人是否脑子有问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602923917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1266620,"avatar":"https://static001.geekbang.org/account/avatar/00/13/53/bc/72baeee8.jpg","nickname":"林黛玉","note":"","ucode":"F8507366012881","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":313039,"discussion_content":"哈哈哈哈哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602921065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1021745,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/97/31/c5651fa0.jpg","nickname":"hevin","note":"","ucode":"ADD0E8F9A5D3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12724,"discussion_content":"确实pycharm太吃内存了，一开笔记本就呼呼叫","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568564646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1211987,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/53/c29c2fc9.jpg","nickname":"sdjdd","note":"","ucode":"512F2338DFF793","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2349,"discussion_content":"老师不是 facebook 的吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563505836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115093,"user_name":"(￣_￣ )","can_delete":false,"product_type":"c1","uid":1133366,"ip_address":"","ucode":"8B6E2EF240D4AD","user_header":"https://static001.geekbang.org/account/avatar/00/11/4b/36/ed40fb3a.jpg","comment_is_top":false,"comment_ctime":1563493827,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40218199491","product_id":100026901,"comment_content":"和gdb的命令差不多","like_count":10},{"had_liked":false,"id":117477,"user_name":"frozen","can_delete":false,"product_type":"c1","uid":1530640,"ip_address":"","ucode":"4AFE75795BBA47","user_header":"https://static001.geekbang.org/account/avatar/00/17/5b/10/0a326331.jpg","comment_is_top":false,"comment_ctime":1564057234,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35923795602","product_id":100026901,"comment_content":"您好，pdb调试多线程的时候目前还不支持吧","like_count":9},{"had_liked":false,"id":123833,"user_name":"一只眼看世界","can_delete":false,"product_type":"c1","uid":1590236,"ip_address":"","ucode":"D221841AE5103F","user_header":"https://static001.geekbang.org/account/avatar/00/18/43/dc/4f70c936.jpg","comment_is_top":false,"comment_ctime":1565768656,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"31630539728","product_id":100026901,"comment_content":"dict1 = {}<br>def fibl(n):<br>    if n == 0:<br>        return 0<br>    if n == 1:<br>        return 1<br>    return (fibl(n-1) if n-1 not in dict1 else dict1[n-1]) + (fibl(n-2) if n-2 not in dict1 else dict1[n-2])<br><br>def all_fib(n):<br>    global dict1<br>    res =[]<br>    for i in range(n + 1):<br>        req = fibl(i)<br>        dict1[i] = req<br>        res.append(req)<br>    print(res)<br>all_fib(100000)<br><br>老师用的装饰器很高大上(看了好几遍才搞明白), 但是当数字大于995后会有超过递归深度报错, 所以过来皮一下&#47;狗头","like_count":8,"discussions":[{"author":{"id":1194568,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3a/48/fbacc564.jpg","nickname":"王震","note":"","ucode":"691C40D45510B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348776,"discussion_content":"# 将fib_seq()函数修改如下，便可以消除递归深度报错问题，其他代码无需改动。\ndef fib_seq(n):\n    return [fib(x) for x in range(n + 1)]","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612708701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2161248,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fa/60/a4366b9c.jpg","nickname":"ZY","note":"","ucode":"18A839AFDA611E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343184,"discussion_content":"能否讲解一下呢，没get到这个装饰器的精髓","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610964403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115838,"user_name":"new","can_delete":false,"product_type":"c1","uid":1096252,"ip_address":"","ucode":"DFFCDC2123CCAA","user_header":"https://static001.geekbang.org/account/avatar/00/10/ba/3c/2b642c9a.jpg","comment_is_top":false,"comment_ctime":1563756843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27333560619","product_id":100026901,"comment_content":"老师应该在这里回顾一下装饰器的用法","like_count":6},{"had_liked":false,"id":115212,"user_name":"JackDong","can_delete":false,"product_type":"c1","uid":1032651,"ip_address":"","ucode":"B1CD620D3167D8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/cb/3162747a.jpg","comment_is_top":false,"comment_ctime":1563508989,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23038345469","product_id":100026901,"comment_content":"还有一个ipdb是pdb的加强版，用法比较相近，不过需要pip安装一下","like_count":6},{"had_liked":false,"id":115175,"user_name":"lipan","can_delete":false,"product_type":"c1","uid":1347460,"ip_address":"","ucode":"76E2CEEE454017","user_header":"https://static001.geekbang.org/account/avatar/00/14/8f/84/2c2d8c47.jpg","comment_is_top":false,"comment_ctime":1563503541,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23038340021","product_id":100026901,"comment_content":"最近在用js撸小程序，一个console.log()搞定所有调试。","like_count":5,"discussions":[{"author":{"id":1305369,"avatar":"https://static001.geekbang.org/account/avatar/00/13/eb/19/0d990b03.jpg","nickname":"ZeroIce","note":"","ucode":"30133BA83CE349","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20766,"discussion_content":"加个微信一起研究研究?   【小程序开发的小伙伴】","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569373622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194340,"user_name":"泥土  ","can_delete":false,"product_type":"c1","uid":1528402,"ip_address":"","ucode":"BA441CC74169BB","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/52/a37d2689.jpg","comment_is_top":false,"comment_ctime":1585052365,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"18764921549","product_id":100026901,"comment_content":"看到memoize装饰器，想起装饰器那节中的LRU_CACHE，发现比memoize性能更高<br>import functools<br><br>@memoize<br># @functools.lru_cache(None)<br>def fib(n):<br>    ...","like_count":5,"discussions":[{"author":{"id":1999319,"avatar":"","nickname":"天山","note":"","ucode":"2C3EB08EBA7914","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278332,"discussion_content":"试了下，挺方便的，看前面的课程没用过印象不深，谢谢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591174800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2161248,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fa/60/a4366b9c.jpg","nickname":"ZY","note":"","ucode":"18A839AFDA611E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343185,"discussion_content":"能否讲解一下呢，没get到这个装饰器的精髓","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610964413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2935956,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/cc/94/395b7b7a.jpg","nickname":"longzili","note":"","ucode":"98AEAB6D5D97A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2161248,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fa/60/a4366b9c.jpg","nickname":"ZY","note":"","ucode":"18A839AFDA611E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558962,"discussion_content":"就是写法很漂亮，刷C++之类的一般都是写一个cache或者一个数组来做缓存。显然没有这个装饰器的写法漂亮。比方说数组实现，每次递归的时候你就需要手动去查询，代码就很不好看。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648532241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":343185,"ip_address":""},"score":558962,"extra":""}]}]},{"had_liked":false,"id":115315,"user_name":"未来已来","can_delete":false,"product_type":"c1","uid":1187130,"ip_address":"","ucode":"3A21ACFD53CB9C","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/3a/cdf9c55f.jpg","comment_is_top":false,"comment_ctime":1563529854,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18743399038","product_id":100026901,"comment_content":"被最后那个装饰器惊艳到了，以前只知道用循环，没想到 Python 还可以这么玩","like_count":4,"discussions":[{"author":{"id":2161248,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fa/60/a4366b9c.jpg","nickname":"ZY","note":"","ucode":"18A839AFDA611E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343187,"discussion_content":"能否讲解一下呢，没get到这个装饰器的精髓","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610964432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143345,"user_name":"自由民","can_delete":false,"product_type":"c1","uid":1346236,"ip_address":"","ucode":"435C67531697F1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg","comment_is_top":false,"comment_ctime":1571671817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14456573705","product_id":100026901,"comment_content":"多数是直接用IDE里的功能来调试，另外用过Linux里的gdb。调优没用过，顶多在代码里直接计时。","like_count":3},{"had_liked":false,"id":115659,"user_name":"小侠龙旋风","can_delete":false,"product_type":"c1","uid":1126441,"ip_address":"","ucode":"073F3924A99835","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","comment_is_top":false,"comment_ctime":1563686555,"is_pvip":false,"replies":[{"id":"48151","content":"哈哈好","user_name":"作者回复","user_name_real":"Jingxiao","uid":"1259521","ctime":1567124061,"ip_address":"","comment_id":115659,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14448588443","product_id":100026901,"comment_content":"我要把这个装饰器保存下来","like_count":3,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459212,"discussion_content":"哈哈好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567124061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2161248,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fa/60/a4366b9c.jpg","nickname":"ZY","note":"","ucode":"18A839AFDA611E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343186,"discussion_content":"能否讲解一下呢，没get到这个装饰器的精髓","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610964425,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2480331,"avatar":"https://static001.geekbang.org/account/avatar/00/25/d8/cb/12a9bd21.jpg","nickname":"While_True","note":"","ucode":"B94F9550C8197A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2161248,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fa/60/a4366b9c.jpg","nickname":"ZY","note":"","ucode":"18A839AFDA611E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382789,"discussion_content":"就是对已经计算过的结果做了缓存","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625725289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":343186,"ip_address":""},"score":382789,"extra":""}]}]},{"had_liked":false,"id":223753,"user_name":"天山","can_delete":false,"product_type":"c1","uid":1999319,"ip_address":"","ucode":"2C3EB08EBA7914","user_header":"","comment_is_top":false,"comment_ctime":1591174416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10181109008","product_id":100026901,"comment_content":"到这儿已经忘记装饰器的用法了，赶紧回去复习下","like_count":2},{"had_liked":false,"id":197875,"user_name":"Longerian","can_delete":false,"product_type":"c1","uid":1032464,"ip_address":"","ucode":"0B74EE70D09A2A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/10/28d5a686.jpg","comment_is_top":false,"comment_ctime":1585401661,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10175336253","product_id":100026901,"comment_content":"cprofiles 里的 ncalls 为什么有些显示 31&#47;1，有些显示 31，这两种数值的含义分别是什么？","like_count":2,"discussions":[{"author":{"id":1336145,"avatar":"https://static001.geekbang.org/account/avatar/00/14/63/51/a55ae72f.jpg","nickname":"七月","note":"","ucode":"24DED628D6ADAE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371028,"discussion_content":"有两个值的话表示有递归调用，第二个值是原生调用次数，第一个值是总调用次数。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1619616812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307174,"discussion_content":"同疑问🤔️","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600521835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186719,"user_name":"向南","can_delete":false,"product_type":"c1","uid":1325700,"ip_address":"","ucode":"E6072AD7CA6798","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/84/70340e87.jpg","comment_is_top":false,"comment_ctime":1583910670,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10173845262","product_id":100026901,"comment_content":"有时候会用装饰器试一下<br>def timeit_wrapper(func):<br>    @wraps(func)<br>    def wrapper(*args, **kwargs):<br>        start_time = time.perf_counter()<br>        func_return_value = func(*args, **kwargs)<br>        end_time = time.perf_counter()<br>        print(&#39;{0:&lt;10}.{1:&lt;8} : {2:&lt;8}&#39;.format(func.__module__, func.__name__, end_time - start_time))<br>        return func_return_value<br>    return wrapper<br><br>@timeit_wrapper<br>def some_func():<br>    ....","like_count":2},{"had_liked":false,"id":174953,"user_name":"一一","can_delete":false,"product_type":"c1","uid":1492286,"ip_address":"","ucode":"B4E5F0370ACA2E","user_header":"https://static001.geekbang.org/account/avatar/00/16/c5/3e/2bb7edc9.jpg","comment_is_top":false,"comment_ctime":1580474678,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10170409270","product_id":100026901,"comment_content":"cProfile真的太好用了","like_count":3},{"had_liked":false,"id":274788,"user_name":"Shu🐹","can_delete":false,"product_type":"c1","uid":2347194,"ip_address":"","ucode":"29521F803CE2CC","user_header":"https://static001.geekbang.org/account/avatar/00/23/d0/ba/98bc816b.jpg","comment_is_top":false,"comment_ctime":1611156497,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5906123793","product_id":100026901,"comment_content":"真是干货满满啊","like_count":1},{"had_liked":false,"id":179957,"user_name":"yupf","can_delete":false,"product_type":"c1","uid":1426903,"ip_address":"","ucode":"CED8AF7BCF9377","user_header":"https://static001.geekbang.org/account/avatar/00/15/c5/d7/f7a5775f.jpg","comment_is_top":false,"comment_ctime":1582127017,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5877094313","product_id":100026901,"comment_content":"这个装饰器稍微改改，就成单例模式了","like_count":1,"discussions":[{"author":{"id":2161248,"avatar":"https://static001.geekbang.org/account/avatar/00/20/fa/60/a4366b9c.jpg","nickname":"ZY","note":"","ucode":"18A839AFDA611E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343188,"discussion_content":"能否讲解一下呢，没get到这个装饰器的精髓","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610964443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116729,"user_name":"SuQiu","can_delete":false,"product_type":"c1","uid":1289128,"ip_address":"","ucode":"ABA149B869746F","user_header":"https://static001.geekbang.org/account/avatar/00/13/ab/a8/eb9f186e.jpg","comment_is_top":false,"comment_ctime":1563896311,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5858863607","product_id":100026901,"comment_content":"PySnooper这个调试挺好。","like_count":2,"discussions":[{"author":{"id":1528865,"avatar":"https://static001.geekbang.org/account/avatar/00/17/54/21/aaf74594.jpg","nickname":"Fullmetal Alchemist","note":"","ucode":"4D260084DBC2B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385398,"discussion_content":"是的，我也是推荐pysnooper","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627028031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312525,"user_name":"什么鬼额","can_delete":false,"product_type":"c1","uid":1203752,"ip_address":"","ucode":"C7F1BD1DF0E29B","user_header":"https://static001.geekbang.org/account/avatar/00/12/5e/28/678417c3.jpg","comment_is_top":false,"comment_ctime":1631849017,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1631849017","product_id":100026901,"comment_content":"pdb程序要怎么中断呢？循环中的程序要怎么删除断点？","like_count":0},{"had_liked":false,"id":297560,"user_name":"Bonaparte","can_delete":false,"product_type":"c1","uid":1021741,"ip_address":"","ucode":"27E9CEE38A30C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/97/2d/8e4836f3.jpg","comment_is_top":false,"comment_ctime":1623637316,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623637316","product_id":100026901,"comment_content":"到了如何使用 pdb 就看不懂了","like_count":0},{"had_liked":false,"id":286216,"user_name":"Jola💦","can_delete":false,"product_type":"c1","uid":1077587,"ip_address":"","ucode":"550AF47E097FC1","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/53/b74127fa.jpg","comment_is_top":false,"comment_ctime":1617196224,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617196224","product_id":100026901,"comment_content":"老师  想问一下  假如一个问题在线上出现平常基本不复现有什么好方法可以在线调试","like_count":0},{"had_liked":false,"id":124218,"user_name":"xavier","can_delete":false,"product_type":"c1","uid":1243128,"ip_address":"","ucode":"2F7918EA37ED9F","user_header":"https://static001.geekbang.org/account/avatar/00/12/f7/f8/3c0a6854.jpg","comment_is_top":false,"comment_ctime":1565836086,"is_pvip":false,"replies":[{"id":"48141","content":"这个具体看需求和个人习惯了，ide方便就ide来，但是有些项目只能用command line","user_name":"作者回复","user_name_real":"Jingxiao","uid":"1259521","ctime":1567123509,"ip_address":"","comment_id":124218,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565836086","product_id":100026901,"comment_content":"对应到C、C++就是gdb。现在被IDE给宠坏了，感觉还是Command Line纯粹。","like_count":0,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463063,"discussion_content":"这个具体看需求和个人习惯了，ide方便就ide来，但是有些项目只能用command line","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567123509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116090,"user_name":"Geek_d848f7","can_delete":false,"product_type":"c1","uid":1524021,"ip_address":"","ucode":"F24BC59B6E9E6B","user_header":"","comment_is_top":false,"comment_ctime":1563784205,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563784205","product_id":100026901,"comment_content":"get到新方法，我只用过print、断点、装饰器的方式，print用得最多(😓）","like_count":0},{"had_liked":false,"id":115575,"user_name":"leixin","can_delete":false,"product_type":"c1","uid":1318291,"ip_address":"","ucode":"9885DF5FB2E136","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/szNEybCR1Al4p6eDyT8atNjen7ZY9cBJSXOQl1EnrTM2efiaHlPtL7X44JeibXs9qEFLWv6HJWBwq5tVlNahGDGQ/132","comment_is_top":false,"comment_ctime":1563633492,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563633492","product_id":100026901,"comment_content":"ipython  好像也带debug模式","like_count":0},{"had_liked":false,"id":115428,"user_name":"Claywoow","can_delete":false,"product_type":"c1","uid":1524797,"ip_address":"","ucode":"1F1C70BCE33536","user_header":"https://static001.geekbang.org/account/avatar/00/17/44/3d/35d6670d.jpg","comment_is_top":false,"comment_ctime":1563587550,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563587550","product_id":100026901,"comment_content":"最近工作的一段时间一直在用pdb调试。。。pdb大法好啊 : )","like_count":0},{"had_liked":false,"id":115321,"user_name":"🇨🇳","can_delete":false,"product_type":"c1","uid":1306115,"ip_address":"","ucode":"D6C5E9CA44D082","user_header":"https://static001.geekbang.org/account/avatar/00/13/ee/03/09926387.jpg","comment_is_top":false,"comment_ctime":1563531512,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563531512","product_id":100026901,"comment_content":"老师您好，最近使用requests.get方法遇到一个问题，返回结果部分内容是“&lt;noscript&gt;You need to enable JavaScript to run this app.&lt;&#47;noscript&gt;”，请问您遇到过这种情况吗，怎么解决呢。谢谢","like_count":0},{"had_liked":false,"id":115145,"user_name":"321","can_delete":false,"product_type":"c1","uid":1541607,"ip_address":"","ucode":"0EBB0756D53A95","user_header":"https://static001.geekbang.org/account/avatar/00/17/85/e7/5c351369.jpg","comment_is_top":false,"comment_ctime":1563499817,"is_pvip":false,"replies":[{"id":"42074","content":"看你侧重点是什么？如果是性能，有类似cProfile的工具，如果只是简单的debug，可以通过设置breakpoint或者print","user_name":"作者回复","user_name_real":"Jingxiao","uid":"1259521","ctime":1563513047,"ip_address":"","comment_id":115145,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1563499817","product_id":100026901,"comment_content":"web 应用怎么调试？譬如flask或django框架开发的应用，该如何调试。","like_count":1,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458986,"discussion_content":"看你侧重点是什么？如果是性能，有类似cProfile的工具，如果只是简单的debug，可以通过设置breakpoint或者print","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563513047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1139591,"avatar":"https://static001.geekbang.org/account/avatar/00/11/63/87/d13aa7de.jpg","nickname":"Aodongq1n","note":"","ucode":"C77B0F833F6414","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337445,"discussion_content":"一个服务一直在跑，一直不结束可以用cProfile看性能吗，我试了，程序不结束cProfile没输出，不知道怎么搞了.......","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608906923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115079,"user_name":"ikimiy","can_delete":false,"product_type":"c1","uid":1067295,"ip_address":"","ucode":"CC67E87B99EE3C","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/1f/37e18877.jpg","comment_is_top":false,"comment_ctime":1563482604,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563482604","product_id":100026901,"comment_content":"python的pdb package和Linux下的pdb debug工具很类似","like_count":0}]}