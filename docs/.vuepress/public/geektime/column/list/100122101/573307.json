{"id":573307,"title":"02 | å¦‚ä½•é€šè¿‡é—­åŒ…å¯¹è±¡ç®¡ç†ç¨‹åºä¸­çŠ¶æ€çš„å˜åŒ–ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯çŸ³å·ã€‚</p><p>é€šè¿‡ä¸ŠèŠ‚è¯¾çš„å­¦ä¹ ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°å¼ç¼–ç¨‹ä¸­å­˜åœ¨å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œè€Œçº¯å‡½æ•°å’Œä¸å¯å˜å°±æ˜¯å‡å°‘å‰¯ä½œç”¨çš„ä¸¤ä¸ªæ ¸å¿ƒæ€æƒ³ã€‚é‚£ä¹ˆæŒ‰ç†è¯´ï¼Œæˆ‘ä»¬è¦æƒ³æŠŠå‰¯ä½œç”¨é™ä½åˆ°æ¥è¿‘ä¸ºé›¶ï¼Œå°±å¯ä»¥ç”¨çº¯å‡½æ•°ï¼ŒåŒæ—¶ä¸æ¥å—ä»»ä½•å‚æ•°ã€‚ä½†æ˜¯è¿™æ ·å®Œå…¨è‡ªæˆ‘å°é—­çš„å‡½æ•°ï¼Œä¹Ÿå°±å‡ ä¹æ²¡æœ‰ä»€ä¹ˆä½¿ç”¨æ„ä¹‰äº†ã€‚</p><p>æ‰€ä»¥ï¼Œä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¿˜æ˜¯è¦æœ‰è¾“å…¥ã€è®¡ç®—å’Œè¾“å‡ºï¼Œæ‰èƒ½å’Œå¤–ç•Œæœ‰äº’åŠ¨å¾€æ¥ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¹Ÿæ‰èƒ½â€œæ´»â€èµ·æ¥ã€‚è€Œä¸€ä¸ªæ´»çš„ç³»ç»Ÿï¼Œå®ƒçš„çŠ¶æ€è‚¯å®šæ˜¯åœ¨ä¸åœå˜åŒ–çš„ï¼Œ<strong>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‰èƒ½åœ¨ä¸å¯å˜çš„åŸåˆ™ä¸‹ï¼Œæ¥ç®¡ç†è¿™ç§å˜åŒ–å‘¢ï¼Ÿ</strong></p><p>ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹çœ‹åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œæœ‰å“ªäº›å€¼æ˜¯å¯å˜çš„ã€å“ªäº›ä¸å¯å˜ï¼Œä»¥åŠå¦‚ä½•èƒ½åœ¨çŠ¶æ€æ›´æ–°çš„åŒæ—¶åšåˆ°ä¸å¯å˜ã€‚</p><h2>å€¼çš„ï¼ˆä¸ï¼‰å¯å˜</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦ææ¸…æ¥šä¸€ä¸ªé—®é¢˜ï¼Œ<strong>å€¼åˆ°åº•æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Ÿ</strong>åœ¨JavaScriptä¸­ï¼Œå€¼ä¸€èˆ¬è¢«åˆ†ä¸ºä¸¤ç§ï¼šåŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹ã€‚</p><p>å…ˆæ¥çœ‹<strong>åŸå§‹ç±»å‹</strong>ã€‚åƒå­—ç¬¦ä¸²æˆ–æ•°å­—è¿™ç§æ•°æ®ç±»å‹ï¼Œéƒ½æ˜¯å±äºåŸå§‹ç±»å‹ï¼Œè€Œå®ƒä»¬æœ¬èº«æ˜¯ä¸å¯å˜çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼šåœ¨console.logä¸­è¾“å…¥2 = 2.5ï¼Œå¾—åˆ°çš„ç»“æœä¼šæ˜¯invalidï¼Œè¿™å°±è¯æ˜äº†æˆ‘ä»¬ä¸å¯èƒ½æ”¹å˜ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ã€‚</p><pre><code class=\"language-javascript\">2 = 2.5 // invalid\n</code></pre><p>ç„¶åæ˜¯<strong>å¯¹è±¡ç±»å‹</strong>ã€‚åœ¨JavaScriptä¸­ï¼Œåƒæ•°ç»„ã€å¯¹è±¡è¿™ç±»æ•°æ®ç±»å‹å°±å«åšå¯¹è±¡ç±»å‹ï¼Œè¿™ç±»æ•°æ®æ›´åƒæ˜¯ä¸€ç§æ•°æ®ç»“æ„æˆ–å®¹å™¨ã€‚é‚£è¿™æ ·çš„â€œå€¼â€æ˜¯å¦å¯å˜ï¼Ÿå…¶å®é€šè¿‡ä¸ŠèŠ‚è¯¾<a href=\"https://time.geekbang.org/column/article/572260\">æ•°ç»„</a>çš„ä¾‹å­ï¼Œä½ èƒ½çœ‹åˆ°è¿™ç±»å€¼æ˜¯å¯å˜çš„ï¼Œæ¯”å¦‚é€šè¿‡spliceè¿™ç§æ–¹æ³•ã€‚</p><!-- [[[read_end]]] --><p>æ‰€ä»¥ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹åœ¨ä½¿ç”¨å¯¹è±¡ç±»å‹çš„å€¼æ¥å­˜å‚¨çŠ¶æ€çš„æ—¶å€™ï¼Œè¦å¦‚ä½•åœ¨æ›´æ–°çŠ¶æ€çš„åŒæ—¶åšåˆ°ä¸å¯å˜ã€‚</p><h3>React.jsä¸­çš„propså’Œstate</h3><p>è¿™é‡Œï¼Œæˆ‘ä»¬å°±ä»¥React.jsä¸ºä¾‹ï¼Œæ¥è§‚å¯Ÿä¸‹å®ƒæ˜¯ç”¨ä»€ä¹ˆç±»å‹çš„å€¼ä½œä¸ºçŠ¶æ€çš„ã€‚</p><p>è¯´åˆ°çŠ¶æ€ï¼ŒReactä¸­æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µç»å¸¸å®¹æ˜“è¢«æ··æ·†ï¼Œåˆ†åˆ«æ˜¯propså’Œstateã€‚propsé€šå¸¸æ˜¯ä½œä¸ºä¸€ä¸ªå¤–éƒ¨å‚æ•°ä¼ å…¥åˆ°å‡½æ•°é‡Œï¼Œç„¶åä½œä¸º<strong>é™æ€å…ƒç´ </strong>è¾“å‡ºåœ¨UIä¸­æ¸²æŸ“ï¼›stateåˆ™æ˜¯ä¸€ä¸ªå†…éƒ¨å˜é‡ï¼Œå®ƒä¼šä½œä¸º<strong>åŠ¨æ€å…ƒç´ </strong>è¾“å‡ºåœ¨UIä¸­æ¸²æŸ“ï¼Œå¹¶æ ¹æ®è¡Œä¸ºæ›´æ–°çŠ¶æ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a7/76/a705d22e81c2e39dd81516a5d9709076.jpg?wh=2000x940\" alt=\"\"></p><p>åœ¨ä¸Šé¢è¿™ä¸ªå›¾ä¾‹ä¸­ï¼Œæœ‰ä¸€ä¸ªé™æ€çš„æ–‡æ¡ˆå’Œä¸€ä¸ªåŠ¨æ€çš„è®¡æ•°å™¨ã€‚å…¶ä¸­ï¼Œpropså°±æ˜¯â€œç‚¹å‡»å¢åŠ ï¼šâ€è¿™ä¸ªæ–‡æ¡ˆï¼Œå®ƒåœ¨é¡µé¢ä¸ŠåŸºæœ¬æ˜¯ä¸åº”è¯¥æœ‰ä»€ä¹ˆå˜åŒ–çš„ï¼Œå°±æ˜¯ä¸€å¥å›ºå®šçš„æç¤ºè¯­ï¼Œæ‰€ä»¥å®ƒå°±æ˜¯propsï¼Œä¸€ä¸ªé™æ€çš„â€œå±æ€§â€ã€‚</p><p>è€Œåœ¨è®¡æ•°æŒ‰é’®ä¸­ï¼Œå®ƒçš„å€¼æ˜¯åŸºäºæ¯æ¬¡ç‚¹å‡»åŠ ä¸€çš„ï¼Œä¹Ÿå°±æ˜¯åŸºäºç‚¹å‡»åŠ¨æ€å˜åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´å®ƒå°±æ˜¯stateï¼Œä¸€ä¸ªåŠ¨æ€â€œçŠ¶æ€â€ã€‚</p><pre><code class=\"language-javascript\">// å±æ€§ props \nclass Instruction extends React.Component {\n  render() {\n    return &lt;span&gt;æç¤º - {this.props.message}&lt;/span&gt;;\n  }\n}\nconst element = &lt;Instruction message=\"ç‚¹å‡»ä»¥ä¸‹æŒ‰é’®å¢åŠ ï¼š\" /&gt;;\n\n// çŠ¶æ€ state \nclass Button extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      count: 0,\n    };\n  }\n  updateCount() {}\n  render() {\n    return (&lt;button onClick={() =&gt; this.updateCount()}&gt; ç‚¹å‡»äº† {this.state.count} æ¬¡&lt;/button&gt;);\n  }\n}\n</code></pre><p>é‚£ä¹ˆå›åˆ°åˆšæ‰çš„é—®é¢˜ï¼Œåœ¨React.jsé‡Œï¼Œpropså’Œstateæ˜¯ä»€ä¹ˆç±»å‹çš„å€¼å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯¹è±¡ï¼Œpropså’Œstateéƒ½æ˜¯ç”¨å¯¹è±¡æ¥å‚¨å­˜çŠ¶æ€çš„ã€‚</p><p>å¯æ˜¯ï¼Œ<strong>Reactä¸ºä»€ä¹ˆç”¨å¯¹è±¡åšå±æ€§å’ŒçŠ¶æ€å­˜å‚¨å€¼ç±»å‹å‘¢ï¼Ÿå®ƒè¿˜æœ‰æ²¡æœ‰å…¶å®ƒé€‰æ‹©å‘¢ï¼Ÿ</strong>ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹ã€‚</p><h2>ç»“æ„å‹å€¼çš„ä¸å¯å˜</h2><p>æˆ‘ä»¬å…ˆæ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼špropså’Œstateæ˜¯ä¸æ˜¯å¿…é¡»çš„ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼Œpropsæ˜¯å¿…é¡»çš„ï¼Œè€Œstateä¸æ˜¯ã€‚å› ä¸ºå‡è®¾æˆ‘ä»¬çš„é¡µé¢æ˜¯ä¸€ä¸ªé™æ€é¡µé¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¸²æŸ“å†…å®¹å°±å¥½äº†ï¼Œä½†è¿™ç§<strong>çº¯é™æ€çš„åº”ç”¨ä¹Ÿå®Œå…¨æ— æ³•å’Œç”¨æˆ·äº’åŠ¨</strong>ã€‚</p><p>æ‰€ä»¥åœ¨å‰ç«¯ï¼Œçº¯é™æ€çš„åº”ç”¨è¢«å«åšdumb as f*ckã€‚å½“ç„¶è¿™æ˜¯ä¸€ä¸ªä¸å¤ªæ–‡æ˜çš„è¯ï¼Œä¸è¿‡è¯ç³™ç†ä¸ç³™ï¼Œè€Œä¸”å®ƒçš„æ„æ€ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯è¯´è¿™æ ·çš„åº”ç”¨ä¹Ÿå¤ªâ€œç¬¨â€äº†ã€‚</p><p>æˆ‘ä»¬çš„åº”ç”¨è‚¯å®šéœ€è¦å’Œç”¨æˆ·äº¤äº’ï¼Œè€Œä¸€æ—¦æœ‰äº¤äº’ï¼Œæˆ‘ä»¬å°±éœ€è¦ç®¡ç†å€¼çš„<strong>çŠ¶æ€ï¼ˆstateï¼‰</strong> å’Œå›´ç»•å€¼è®¾è®¡ä¸€ç³»åˆ—<strong>è¡Œä¸ºï¼ˆbehaviorï¼‰</strong>ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘çš„å°±æ˜¯ä¸€ä¸ªå€¼çš„<strong>ç»“æ„æ€§ä¸å¯å˜çš„é—®é¢˜</strong>ã€‚</p><p>æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€èµ·çœ‹çœ‹å›´ç»•å€¼çš„ç»“æ„æ€§æ“ä½œï¼Œéƒ½æœ‰å“ªäº›æ•°æ®ç±»å‹å¯ä»¥é€‰æ‹©ã€‚</p><h3>é—­åŒ…å’Œå¯¹è±¡</h3><p>é¦–å…ˆæ˜¯é—­åŒ…ï¼ˆclosureï¼‰å’Œå¯¹è±¡ï¼ˆobjectï¼‰ï¼Œè¿™äºŒè€…éƒ½å¯ä»¥å¯¹ä¸€ä¸ªçŠ¶æ€å€¼è¿›è¡Œå°è£…å’Œåˆ›å»ºè¡Œä¸ºã€‚</p><p>é—­åŒ…æœ€å¤§çš„ç‰¹ç‚¹æ˜¯<strong>å¯ä»¥çªç ´ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸçš„é™åˆ¶</strong>ï¼Œä¹Ÿå°±æ˜¯æ—¶é—´å’Œç©ºé—´çš„æ§åˆ¶ã€‚</p><p>è¿™é‡Œçš„çªç ´ç”Ÿå‘½å‘¨æœŸçš„é™åˆ¶æ˜¯æŒ‡ï¼Œå½“ä¸€ä¸ªå¤–éƒ¨å‡½æ•°å†…åµŒä¸€ä¸ªå†…éƒ¨å‡½æ•°æ—¶ï¼Œå¦‚æœå†…åµŒå‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡å°±ä¼šçªç ´ç”Ÿå‘½å‘¨æœŸçš„é™åˆ¶ï¼Œåœ¨å‡½æ•°ç»“æŸæ‰§è¡Œåï¼Œä»ç„¶å­˜åœ¨ã€‚æ¯”å¦‚åœ¨ä¸‹é¢é—­åŒ…çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯æ¬¡åŠ 1ï¼Œå¯ä»¥è®°ä½ä¸Šä¸€æ¬¡çš„å€¼ã€‚</p><p>è€Œçªç ´ä½œç”¨åŸŸçš„é™åˆ¶æ˜¯æŒ‡ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªå†…éƒ¨å‡½æ•°è¿”å›æˆä¸€ä¸ªæ–¹æ³•åœ¨å¤–éƒ¨è°ƒç”¨ã€‚æ¯”å¦‚ä»¥ä¸‹ä»£ç ä¸­ï¼Œcounterè¿”å›çš„countingæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡counter1æ¥æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œä»è€Œå°±çªç ´äº†counterä½œç”¨åŸŸçš„é™åˆ¶ã€‚</p><pre><code class=\"language-javascript\">function counter() {\n    let name = \"è®¡æ•°\";\n    let curVal = 0;\n    function counting() {\n        curVal++;\n    }\n    function getCount() {\n        console.log(\n            `${name}æ˜¯${curVal}`\n        );\n    }\n    return {counting,getCount}\n}\n\nvar counter1 = counter();\n\ncounter1.counting();  \ncounter1.counting();  \ncounter1.counting();  \ncounter1.getCount();  // è®¡æ•°æ˜¯3\n</code></pre><p>åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¯¹è±¡æ¥å°è£…ä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–¹æ³•æ¥ä½œç”¨äºè¿™ä¸ªçŠ¶æ€å€¼ã€‚</p><pre><code class=\"language-javascript\">var counter = {\n    name: \"è®¡æ•°\",\n    curVal: 0,\n    counting() {\n        this.curVal++;\n        console.log(\n            `${this.name}æ˜¯${this.curVal}`\n        );\n    }\n};\n\ncounter.counting(); // è®¡æ•°æ˜¯1\ncounter.counting(); // è®¡æ•°æ˜¯2\ncounter.counting(); // è®¡æ•°æ˜¯3\n</code></pre><p>æ‰€ä»¥ï¼Œå•çº¯ä»å€¼çš„çŠ¶æ€ç®¡ç†å’Œå›´ç»•å®ƒçš„ä¸€ç³»åˆ—è¡Œä¸ºçš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥è¯´é—­åŒ…å’Œå¯¹è±¡æ˜¯åŒå½¢æ€çš„ï¼ˆisomorphicï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥èµ·åˆ°å¼‚æ›²åŒå·¥çš„ä½œç”¨ã€‚æ¯”å¦‚ä¸Šé¢é—­åŒ…ä¾‹å­ä¸­çš„çŠ¶æ€ï¼Œå°±æ˜¯å¯¹è±¡ä¸­çš„å±æ€§ï¼Œæˆ‘ä»¬åœ¨é—­åŒ…ä¸­åˆ›å»ºçš„é’ˆå¯¹å€¼çš„è¡Œä¸ºï¼Œä¹Ÿå¯ä»¥åœ¨å¯¹è±¡ä¸­é€šè¿‡æ–¹æ³•æ¥å®ç°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/aa/bc/aab05b1538730f5d2d2594f1ed678bbc.jpg?wh=1920x686\" alt=\"å›¾ç‰‡\"></p><p>ä½ å¯èƒ½è¦é—®ï¼Œæˆ‘ä»¬å¯¹æ¯”å®ƒä»¬çš„æ„ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®æ˜¯å› ä¸ºå®ƒä»¬åœ¨éšç§ï¼ˆprivacyï¼‰ã€çŠ¶æ€æ‹·è´ï¼ˆstate cloningï¼‰å’Œæ€§èƒ½ï¼ˆperformanceï¼‰ä¸Šã€‚è¿˜æ˜¯æœ‰å·®åˆ«çš„ï¼Œè€Œè¿™äº›å·®åˆ«åœ¨ç»“æ„æ€§åœ°å¤„ç†å€¼çš„é—®é¢˜ä¸Šï¼Œå…·æœ‰ä¸åŒçš„ä¼˜åŠ£åŠ¿ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±ä»è¿™å‡ ä¸ªç»´åº¦çš„ä¸åŒç‚¹å±•å¼€æ¥çœ‹ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d4/d3/d4b33bdaebd78854338a331c407fc2d3.jpg?wh=1920x733\" alt=\"å›¾ç‰‡\"></p><h3>å±æ€§çš„æŸ¥æ”¹</h3><p>å®é™…ä¸Šï¼Œä½ é€šè¿‡é—­åŒ…çš„ä¾‹å­å¯ä»¥å‘ç°ï¼Œé™¤éæ˜¯é€šè¿‡æ¥å£ï¼Œä¹Ÿå°±æ˜¯åœ¨å¤–éƒ¨å‡½æ•°ä¸­è¿”å›å†…éƒ¨å‡½æ•°çš„æ–¹æ³•ï¼Œæ¯”å¦‚ç”¨æ¥è·å–å€¼çš„getCountæ–¹æ³•ï¼Œæˆ–è€…é‡æ–°èµ‹å€¼çš„countingæ–¹æ³•ï¼Œä¸ç„¶å†…éƒ¨çš„å€¼æ˜¯<strong>å¯¹å¤–ä¸å¯è§</strong>çš„ã€‚</p><p>æ‰€ä»¥ï¼Œå®ƒå…¶å®å¯ä»¥ç»†ç²’åº¦åœ°æ§åˆ¶æˆ‘ä»¬æƒ³è¦æš´éœ²æˆ–éšè—çš„å±æ€§ï¼Œä»¥åŠç›¸å…³çš„æ“ä½œã€‚</p><pre><code class=\"language-javascript\">counter1.counting();  \ncounter1.getCount();  \n</code></pre><p>è€Œå¯¹è±¡åˆ™ä¸åŒï¼Œæˆ‘ä»¬ä¸éœ€è¦ç‰¹æ®Šçš„æ–¹å¼ï¼Œå°±å¯ä»¥è·å–å¯¹è±¡ä¸­çš„å±æ€§å’Œé‡æ–°èµ‹å€¼ã€‚å¦‚æœæƒ³è¦éµå¾ªä¸å¯å˜çš„åŸåˆ™ï¼Œæœ‰ä¸€ä¸ª <strong>Object.freeze()</strong> çš„æ–¹æ³•ï¼Œå¯ä»¥æŠŠæ‰€æœ‰çš„å¯¹è±¡è®¾ç½®æˆåªè¯» <code>writable: false</code>ã€‚</p><p>ä½†è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œé€šè¿‡freezeä¼šè®©å¯¹è±¡æ‰€æœ‰çš„å±æ€§å˜å¾—åªè¯»ï¼Œè€Œä¸”ä¸å¯é€†ã€‚å½“ç„¶ï¼Œå®ƒçš„å¥½å¤„å°±æ˜¯ä¸¥æ ¼éµå®ˆäº†ä¸å¯å˜åŸåˆ™ã€‚</p><pre><code class=\"language-javascript\">counter.name; \ncounter.initVal; \ncounter.counting();\n</code></pre><h3>çŠ¶æ€çš„æ‹·è´</h3><p>æ‰€ä»¥åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œé’ˆå¯¹åŸå§‹ç±»å‹çš„æ•°æ®ï¼Œæ— éœ€è¿‡åº¦æ‹…å¿§å€¼çš„ä¸å¯å˜ã€‚</p><p>ä¸è¿‡ï¼Œæ—¢ç„¶åº”ç”¨æ˜¯â€œæ´»â€çš„ï¼Œå°±å¯èƒ½ä¼šæœ‰â€œä¸€ç³»åˆ—â€çŠ¶æ€ã€‚æˆ‘ä»¬é€šå¸¸éœ€è¦é€šè¿‡è¯¸å¦‚æ•°ç»„ã€å¯¹è±¡ç±»çš„æ•°æ®ç»“æ„ï¼Œæ¥ä¿å­˜â€œä¸€ç³»åˆ—â€çŠ¶æ€ï¼Œé‚£ä¹ˆåœ¨é¢å¯¹è¿™ä¸€ç±»çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•åšåˆ°éµå¾ªä¸å¯å˜çš„åŸåˆ™å‘¢ï¼Ÿ</p><ul>\n<li><strong>å¦‚ä½•é€šè¿‡æ‹·è´ç®¡ç†çŠ¶æ€ï¼Ÿ</strong></li>\n</ul><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>æ‹·è´+æ›´æ–°</strong>çš„æ–¹å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸å¯¹åŸå§‹çš„å¯¹è±¡å’Œæ•°ç»„å€¼åšæ”¹å˜ï¼Œè€Œæ˜¯æ‹·è´ä¹‹åï¼Œåœ¨æ‹·è´çš„ç‰ˆæœ¬ä¸Šåšå˜æ›´ã€‚</p><p>æ¯”å¦‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨spreadï¼Œæ¥å±•å¼€æ•°ç»„å’Œå¯¹è±¡ä¸­çš„å…ƒç´ ï¼Œç„¶åå†æŠŠå…ƒç´ èµ‹å€¼ç»™æ–°çš„å˜é‡ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å®Œæˆäº†æµ…æ‹·è´ã€‚ä¹‹åï¼Œæˆ‘ä»¬å†çœ‹æ•°ç»„å’Œå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šå‘ç°åŸå§‹çš„æ•°æ®ä¸ä¼šæœ‰å˜åŒ–ã€‚</p><pre><code class=\"language-javascript\">// æ•°ç»„æµ…æ‹·è´\nvar a = [ 1, 2 ];\nvar b = [ ...a ];\nb.push( 3 );\na;  // [1,2]\nb;  // [1,2,3]\n\n// å¯¹è±¡æµ…æ‹·è´\nvar o = {\n&nbsp; &nbsp; x: 1,\n&nbsp; &nbsp; y: 2\n};\nvar p = { ...o };\np.y = 3; \no.y;  // 2\np.y;  // 3\n</code></pre><p>æ‰€ä»¥å¯è§ï¼Œæ•°ç»„å’Œå¯¹è±¡éƒ½æ˜¯å¾ˆå®¹æ˜“æ‹·è´çš„ï¼Œè€Œé—­åŒ…åˆ™ç›¸å¯¹æ›´éš¾æ‹·è´ã€‚</p><ul>\n<li><strong>å¦‚ä½•è§£å†³æ‹·è´æ€§èƒ½é—®é¢˜ï¼Ÿ</strong></li>\n</ul><p>ä»ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é€šè¿‡å¯¹çŠ¶æ€çš„æ‹·è´ï¼Œæ˜¯å¯ä»¥åšåˆ°ä¸å¯å˜ï¼Œä¸è¿‡éšä¹‹è€Œæ¥çš„å°±æ˜¯<strong>æ€§èƒ½é—®é¢˜</strong>ã€‚</p><p>å¦‚æœè¿™ä¸ªå€¼åªæ”¹å˜ä¸€ä¸¤æ¬¡ï¼Œé‚£å°±æ²¡é—®é¢˜ã€‚ä½†å‡è®¾æˆ‘ä»¬çš„ç³»ç»Ÿä¸­æœ‰å€¼ä¸åœåœ¨æ”¹å˜ï¼Œå¦‚æœæ¯æ¬¡éƒ½æ‹·è´çš„è¯ï¼Œå°±ä¼šå æ®å¤§é‡å†…å­˜ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯ç”¨åˆ°ä¸€ä¸ªç±»ä¼¼<strong>é“¾è¡¨</strong>çš„ç»“æ„ï¼Œå½“ä¸­æœ‰ä¸€ç»„å¯¹è±¡è®°å½•æ”¹å˜çš„æŒ‡æ•°å’Œç›¸å…³çš„å€¼ã€‚</p><p>æ¯”å¦‚ä¸‹é¢çš„ [3, 1, 0, 7] è¿™ç»„æ•°ç»„ä¸­ï¼Œæˆ‘ä»¬æŠŠç¬¬0ä¸ªå€¼å˜æˆ2ï¼Œç¬¬3ä¸ªå€¼å˜æˆ6ï¼Œç¬¬4ä¸ªå€¼æ·»åŠ 1ï¼Œå½¢æˆäº† [2, 1, 0, 6, 1]ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬åªè®°å½•å˜åŒ–çš„è¯ï¼Œå°±æ˜¯0:2ã€3:6å’Œ4:1è¿™ä¸‰ç»„å¯¹è±¡ï¼Œæ˜¯ä¸æ˜¯å°±å‡å°‘äº†å¾ˆå¤šå†…å­˜å ç”¨ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/b4/9b/b4a1b444fe30607bc3d8051ea3410b9b.jpg?wh=1920x572\" alt=\"å›¾ç‰‡\"></p><p>å…¶å®ç›®å‰åœ¨å¸‚é¢ä¸Šï¼Œå·²ç»æœ‰å¾ˆå¤šæˆç†Ÿçš„ä¸‰æ–¹åº“æ¯”å¦‚immutable.jsï¼Œå®ƒä»¬ä¼šæœ‰è‡ªå·±çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚array listå’Œobject mapï¼Œä»¥åŠç›¸å…³ç®—æ³•æ¥è§£å†³ç±»ä¼¼çš„é—®é¢˜äº†ã€‚</p><h3>æ€§èƒ½çš„è€ƒè™‘</h3><p>æˆ‘ä»¬æ¥ç€å†æ¥çœ‹çœ‹æ€§èƒ½ä¸Šçš„è€ƒè™‘ã€‚</p><p>ä»æ€§èƒ½çš„è§’åº¦æ¥è®²ï¼Œå¯¹è±¡çš„å†…å­˜å’Œè¿ç®—é€šå¸¸è¦ä¼˜äºé—­åŒ…ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸‹é¢ç¬¬ä¸€ä¸ªé—­åŒ…çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡ä½¿ç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°è¡¨è¾¾ã€‚</p><p>è€Œç¬¬äºŒä¸ªå¯¹è±¡çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡bindå°†thisç»‘å®šåˆ°greetings2ä¸Šï¼Œè¿™æ ·ä¸€æ¥ï¼ŒPrintMessageBå°±ä¼šå¼•ç”¨greetings2.nameæ¥ä½œä¸ºthis.nameï¼Œä»è€Œè¾¾åˆ°å’Œé—­åŒ…ä¸€æ ·çš„æ•ˆæœã€‚ä½†æˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºä¸€ä¸ªé—­åŒ…ï¼Œåªéœ€è¦å°†thisæŒ‡å‘å¼•ç”¨çš„å¯¹è±¡å³å¯ã€‚</p><pre><code class=\"language-javascript\">// é—­åŒ…\nfunction PrintMessageA(name) {\n&nbsp; &nbsp; return function printName(){\n&nbsp; &nbsp; &nbsp; &nbsp; return `${name}, ä½ å¥½ï¼`;\n&nbsp; &nbsp; };\n}\nvar greetings1 = PrintMessageA( \"å…ˆç”Ÿ\" );\ngreetings1();  // å…ˆç”Ÿï¼Œä½ å¥½ï¼\n\n// å¯¹è±¡\nfunction PrintMessageB(){\n&nbsp; &nbsp;return `${this.name}, ä½ å¥½ï¼`;\n}\nvar greetings2 = PrintMessageB.bind( {\n&nbsp; &nbsp; name: \"å…ˆç”Ÿ\"\n} );\ngreetings2();  // å…ˆç”Ÿï¼Œä½ å¥½ï¼\n</code></pre><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä¸€èµ·æ·±å…¥ç†è§£äº†å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ä¸å¯å˜ã€‚æˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨çš„ï¼Œå°±æ˜¯å¯¹è±¡å’Œé—­åŒ…åœ¨å¤„ç†ä¸å¯å˜é—®é¢˜ä¸Šçš„ä¸åŒä¼˜åŠ¿ã€‚</p><ul>\n<li>åœ¨å±æ€§å’Œæ–¹æ³•çš„éšç§æ–¹é¢ï¼Œ<strong>é—­åŒ…å¤©ç„¶å¯¹å±æ€§æœ‰ä¿æŠ¤ä½œç”¨</strong>ï¼ŒåŒæ—¶å®ƒä¹Ÿå¯ä»¥æŒ‰éœ€æš´éœ²æ¥å£ï¼Œæ¥æ›´ç»†ç²’åº¦åœ°è·å–æˆ–é‡æ–°ç»™çŠ¶æ€èµ‹å€¼ã€‚ä½†æ˜¯å®ƒå’Œæˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜ï¼Œä¼¼ä¹å…³ç³»ä¸å¤§ã€‚</li>\n<li>è€Œå¯¹è±¡ä¸ä»…å¯ä»¥è½»æ¾åšåˆ° <strong>propsæ•´ä½“ä¸å¯å˜</strong>ï¼Œè€Œä¸”åœ¨éœ€è¦stateå˜åŒ–æ—¶ï¼Œåœ¨<strong>æ‹·è´</strong>ä¸Šä¹Ÿæ›´æœ‰ä¼˜åŠ¿ã€‚ä¸è¿‡ä»æ€§èƒ½çš„è§’åº¦æ¥çœ‹ï¼Œå¦‚æœæ‹·è´çš„é‡ä¸å¤§ï¼Œä¹Ÿè®¸å®ƒä»¬çš„æ€§èƒ½å·®ä¸å¤šï¼Œä½†å¦‚æœæ˜¯ä¸€ä¸ªé«˜é¢‘äº¤äº’çš„ç•Œé¢ï¼Œå¾®å°çš„å·®åˆ«å¯èƒ½å°±ä¼šè¢«æ”¾å¤§ã€‚</li>\n</ul><p>æ‰€ä»¥æ€»ç»“èµ·æ¥ï¼Œåœ¨React.jsä¸­ï¼Œå®ƒé€‰æ‹©ä½¿ç”¨å¯¹è±¡ä½œä¸ºpropså’Œstateçš„å€¼ç±»å‹ï¼Œèƒ½æ›´å®¹æ˜“ä¿è¯å±æ€§å’ŒçŠ¶æ€å€¼çš„æ•´ä½“ä¸å¯å˜ï¼›è€Œä¸”é¢å¯¹çŠ¶æ€çš„å˜åŒ–ï¼Œå®ƒä¹Ÿæ›´å®¹æ˜“æ‹·è´ï¼›åœ¨å¤„ç†é«˜é¢‘äº¤äº’æ—¶ï¼Œå®ƒçš„æ€§èƒ½ä¹Ÿä¼šæ›´å¥½ã€‚</p><p>è€Œé—­åŒ…è™½ç„¶æœ‰éšç§ä¸Šçš„ä¼˜åŠ¿å’Œæ›´ç»†ç²’åº¦çš„æ“ä½œï¼Œå¯æ˜¯åœ¨åº”ç”¨äº¤äº’å’ŒçŠ¶æ€ç®¡ç†è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œå®ƒå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…çš„ä½œç”¨ã€‚æ‰€ä»¥ï¼Œ<strong>æœ‰åˆ©äºä½¿ç”¨å¯¹è±¡çš„æ¡ä»¶ä¼šç›¸å¯¹å¤šä¸€äº›ã€‚</strong></p><p>æœ€åï¼Œä½ ä¹Ÿå¯ä»¥å†æ¥å¤ä¹ ä¸‹è¿™ä¸¤ç§æ–¹å¼çš„ä¼˜åŠ£åŠ¿ã€‚å…¶å®ï¼ŒåŸºäºReact.jsçš„ä¾‹å­ï¼Œä½ å¯ä»¥å‘ç°ï¼Œä¸åŒçš„æ•°æ®ç±»å‹å’Œå¤„ç†å˜ä¸ä¸å˜çš„æ–¹å¼ï¼Œå¹¶æ²¡æœ‰ç»å¯¹çš„å¥½ä¸ä¸å¥½ï¼Œè€Œæ˜¯éœ€è¦<strong>æ ¹æ®å…·ä½“æƒ…å†µ</strong>ï¼Œæ¥ç¡®å®šå“ªç§æ–¹å¼æ›´é€‚åˆä½ çš„ç¨‹åºå’Œåº”ç”¨æ‰€éœ€è¦æ”¯æŒçš„åœºæ™¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/02/c8/029e164f69eb1fa3de3568e8b2ea7cc8.jpg?wh=1920x736\" alt=\"å›¾ç‰‡\"></p><h2>æ€è€ƒé¢˜</h2><p>æˆ‘ä»¬åœ¨æåˆ°å€¼çš„çŠ¶æ€æ‹·è´æ—¶ï¼Œè¯´spreadåšåˆ°çš„æ˜¯æµ…æ‹·è´ï¼Œé‚£ä¹ˆä½ æ˜¯å¦äº†è§£ä¸ä¹‹å¯¹åº”çš„æ·±åº¦æ‹·è´ï¼Ÿå®ƒä¼šä¸ä¼šå½±å“çŠ¶æ€çš„ç®¡ç†ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><h2>å»¶ä¼¸é˜…è¯»</h2><ul>\n<li><a href=\"https://reactjs.org/docs/faq-state.html\">Component State - React</a></li>\n<li><a href=\"https://github.com/uberVU/react-guide/blob/master/props-vs-state.md\">Props vs State</a></li>\n<li><a href=\"https://lucybain.com/blog/2016/react-state-vs-pros/\">ReactJS: Props vs. State</a></li>\n<li><a href=\"https://github.com/getify/Functional-Light-JS/blob/master/manuscript/ch7.md/#chapter-7-closure-vs-object\">Closure vs. Object</a></li>\n</ul>","neighbors":{"left":{"article_title":"01 | å‡½æ•°å¼vs.é¢å‘å¯¹è±¡ï¼šå“åº”æœªçŸ¥å’Œä¸ç¡®å®š","id":572260},"right":{"article_title":"03 | å¦‚ä½•é€šè¿‡éƒ¨åˆ†åº”ç”¨å’ŒæŸ¯é‡ŒåŒ–è®©å‡½æ•°å…·è±¡åŒ–ï¼Ÿ","id":574132}},"comments":[{"had_liked":false,"id":358430,"user_name":"WGHä¸¶","can_delete":false,"product_type":"c1","uid":1922568,"ip_address":"åŒ—äº¬","ucode":"02E43256770C62","user_header":"https://static001.geekbang.org/account/avatar/00/1d/56/08/bd75f114.jpg","comment_is_top":false,"comment_ctime":1664294870,"is_pvip":false,"replies":[{"id":130482,"content":"å¾ˆå¥½åœ°æè¿°äº†ä¸¤è€…ç›¸å¯¹çš„ä»å±å…³ç³»","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1664632499,"ip_address":"åŒ—äº¬","comment_id":358430,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"æœ‰ä¸€ä¸ªè¯´æ³•æ˜¯ï¼šé—­åŒ…æ˜¯å¸¦æ•°æ®çš„è¡Œä¸ºï¼Œå¯¹è±¡æ˜¯å¸¦è¡Œä¸ºçš„æ•°æ®ã€‚","like_count":42,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589286,"discussion_content":"å¾ˆå¥½åœ°æè¿°äº†ä¸¤è€…ç›¸å¯¹çš„ä»å±å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664632500,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357997,"user_name":"I keep my idealsğŸ’¤","can_delete":false,"product_type":"c1","uid":1483413,"ip_address":"åŒ—äº¬","ucode":"38E68A0BCABA01","user_header":"https://static001.geekbang.org/account/avatar/00/16/a2/95/8f34237c.jpg","comment_is_top":false,"comment_ctime":1663826163,"is_pvip":false,"replies":[{"id":130311,"content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1663859635,"ip_address":"åŒ—äº¬","comment_id":357997,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"å¦‚æœè¦å®ç°å€¼çš„ç»å¯¹ä¸å¯å˜åº”è¯¥ä½¿ç”¨æ·±æ‹·è´ï¼Œè¿™æ ·å¯¹æ‹·è´å‡ºæ¥çš„å¤æ‚æ•°æ®ç»“æ„è¿›è¡Œä¿®æ”¹æ—¶æ‰èƒ½ä¿è¯ä¸ä¼šå¯¹åŸå§‹æ•°æ®é€ æˆå½±å“","like_count":8,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588583,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663859635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358026,"user_name":"è°·å²³","can_delete":false,"product_type":"c1","uid":1362023,"ip_address":"åŒ—äº¬","ucode":"2A1B4191CD87B8","user_header":"https://static001.geekbang.org/account/avatar/00/14/c8/67/5489998a.jpg","comment_is_top":false,"comment_ctime":1663836431,"is_pvip":true,"replies":[{"id":130330,"content":"æ˜¯çš„ï¼Œè™½ç„¶React.PureComponentä¸­çš„shouldComponentUpdate() åŸºäºæ€§èƒ½è€ƒè™‘ï¼Œä¸å»ºè®®ç”¨æ·±å¯¹æ¯”å’ŒJSON.stringify()ï¼›ä½†å¦‚æœç¨‹åºä¸­ç¡®å®æ˜¯éœ€è¦å¤„ç†å¤æ‚çš„æ•°æ®ç»“æ„å˜åŒ–çš„è¯ï¼Œå¯ä»¥ç”¨force updateæˆ–immutable-jsæ¥æ»¡è¶³ç±»ä¼¼çš„éœ€æ±‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1663983342,"ip_address":"åŒ—äº¬","comment_id":358026,"utype":1}],"discussion_count":1,"race_medal":3,"score":2,"product_id":100122101,"comment_content":"spread å±•å¼€è¯­æ³•ä»…èƒ½åšåˆ°æµ…æ‹·è´ï¼Œå› ä¸ºä»…éå†ä¸€å±‚ã€‚åœ¨å¼€å‘ä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ·±æ‹·è´æ–¹å¼æ˜¯ï¼šJSON.parse(JSON.stringify(obj))ã€‚è™½ç„¶stringifyæ–¹æ³•åœ¨è½¬åŒ–JSONå­—ç¬¦ä¸²æ—¶æœ‰ä¸å°‘ç‰¹æ®ŠçŠ¶å†µã€‚è¿™ç§æ–¹å¼ä¸ä¼šå½±å“çŠ¶æ€ï¼Œå› ä¸ºstringifyæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²ã€‚\n","like_count":6,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588673,"discussion_content":"æ˜¯çš„ï¼Œè™½ç„¶React.PureComponentä¸­çš„shouldComponentUpdate() åŸºäºæ€§èƒ½è€ƒè™‘ï¼Œä¸å»ºè®®ç”¨æ·±å¯¹æ¯”å’ŒJSON.stringify()ï¼›ä½†å¦‚æœç¨‹åºä¸­ç¡®å®æ˜¯éœ€è¦å¤„ç†å¤æ‚çš„æ•°æ®ç»“æ„å˜åŒ–çš„è¯ï¼Œå¯ä»¥ç”¨force updateæˆ–immutable-jsæ¥æ»¡è¶³ç±»ä¼¼çš„éœ€æ±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663983342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358001,"user_name":"Hello,Tomrrow","can_delete":false,"product_type":"c1","uid":1351769,"ip_address":"åŒ—äº¬","ucode":"F9407C1C91B157","user_header":"https://static001.geekbang.org/account/avatar/00/14/a0/59/86073794.jpg","comment_is_top":false,"comment_ctime":1663827723,"is_pvip":false,"replies":[{"id":130310,"content":"æ·±æ‹·è´çš„ç®€å•å®ç°æ˜¯JSON.parse(JSON.stringify(obj))ï¼Œä¸è¿‡è€ƒè™‘åˆ°JSON safeå’Œæ€§èƒ½é—®é¢˜ï¼Œé€’å½’æ˜¯ä¼šæ›´å¥½ä¸€äº›ã€‚\n\nReactä¸­çš„setState()æ˜¯æµ…åˆå¹¶è€Œä¸æ˜¯æ·±æ‹·è´ï¼Œä¼šä¸ä¼šå½±å“çœ‹æƒ…å†µï¼Œå¦‚æœæ˜¯â€œå¤æ‚ç±»å‹â€ä¹Ÿå°±æ˜¯åµŒå¥—å¯¹è±¡ï¼Œé‚£å°±ä¼šè¢«å½±å“äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1663859611,"ip_address":"åŒ—äº¬","comment_id":358001,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"å¯¹è±¡æˆ–æ•°ç»„çš„æµ…æ‹·è´ï¼Œæ˜¯ç®€å•çš„å€¼çš„å¤åˆ¶ï¼Œè¿™å¯¹äºå¯¹è±¡å±æ€§å€¼æˆ–æ•°ç»„å…ƒç´ æ˜¯ç®€å•ç±»å‹æ¥è¯´æ²¡æœ‰é—®é¢˜ï¼›å¦‚æœå¯¹è±¡å±æ€§å€¼æˆ–æ•°ç»„å…ƒç´ æ˜¯å¤æ‚ç±»å‹ï¼Œå­˜çš„æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œå¯¹å†…å­˜åœ°å€çš„å¤åˆ¶ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªæŒ‡å‘åŒä¸€ä¸ªç©ºé—´çš„æŒ‡é’ˆã€‚è¿™æ—¶éœ€è¦è¿›è¡Œæ·±æ‹·è´ï¼Œå¸¸ç”¨çš„æ–¹å¼é€šè¿‡é€’å½’çš„æ–¹å¼ã€‚\n\næ·±æ‹·è´ï¼Œæ˜¯ä¸ä¼šå½±å“çŠ¶æ€ç®¡ç†çš„ã€‚","like_count":4,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588582,"discussion_content":"æ·±æ‹·è´çš„ç®€å•å®ç°æ˜¯JSON.parse(JSON.stringify(obj))ï¼Œä¸è¿‡è€ƒè™‘åˆ°JSON safeå’Œæ€§èƒ½é—®é¢˜ï¼Œé€’å½’æ˜¯ä¼šæ›´å¥½ä¸€äº›ã€‚\n\nReactä¸­çš„setState()æ˜¯æµ…åˆå¹¶è€Œä¸æ˜¯æ·±æ‹·è´ï¼Œä¼šä¸ä¼šå½±å“çœ‹æƒ…å†µï¼Œå¦‚æœæ˜¯â€œå¤æ‚ç±»å‹â€ä¹Ÿå°±æ˜¯åµŒå¥—å¯¹è±¡ï¼Œé‚£å°±ä¼šè¢«å½±å“äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663859611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358057,"user_name":"Alison","can_delete":false,"product_type":"c1","uid":2438643,"ip_address":"åŒ—äº¬","ucode":"31A580836C778E","user_header":"https://static001.geekbang.org/account/avatar/00/25/35/f3/a661822e.jpg","comment_is_top":false,"comment_ctime":1663859603,"is_pvip":false,"replies":[{"id":130329,"content":"åœ¨Reactï¼Œæ—©æœŸæœ‰ä¸€ä¸ªshallowCompareé™„åŠ åŠŸèƒ½ï¼Œåé¢è¢«React.memoå’ŒReact.PureComponentå–ä»£äº†ï¼Œä½†æ˜¯åº•å±‚é€»è¾‘ç±»ä¼¼ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªæµ…å¯¹æ¯”ã€‚å¦‚æœæƒ³å¯¹æ¯”æ›´å¤æ‚çš„å¯¹è±¡ï¼ŒReact.memoä¹Ÿæ”¯æŒåœ¨ç¬¬äºŒä¸ªå®å‚ä¼ å…¥è‡ªå®šä¹‰çš„å¯¹æ¯”åŠŸèƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1663982114,"ip_address":"åŒ—äº¬","comment_id":358057,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"é€šå¸¸æ›´æ–°stateçš„æ—¶å€™æ¡†æ¶ä¼šç”¨Object.isæ¥åˆ¤æ–­2ä¸ªæ•°ç»„&#47;å¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œæµ…æ‹·è´å¯¹è±¡æ—¶ï¼Œå› æ‹·è´çš„æ˜¯å¼•ç”¨åœ°å€ï¼Œæ‰€ä»¥Object.iså¯¹æ¯”åçš„è¿”å›å€¼ä¼šæ˜¯trueï¼ŒçŠ¶æ€å°±æ— æ³•æ­£å¸¸æ›´æ–°ï¼›\næ·±æ‹·è´å¯¹è±¡çš„è¯ï¼Œæ‹·è´çš„æ˜¯å€¼ï¼Œæ­¤æ—¶ä¼šäº§ç”Ÿæ–°çš„å¼•ç”¨åœ°å€ï¼Œæ‰€ä»¥Object.iså¯¹æ¯”åçš„è¿”å›å€¼æ˜¯falseï¼ŒçŠ¶æ€ä¼šè¿›è¡Œæ›´æ–°","like_count":3,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588672,"discussion_content":"åœ¨Reactï¼Œæ—©æœŸæœ‰ä¸€ä¸ªshallowCompareé™„åŠ åŠŸèƒ½ï¼Œåé¢è¢«React.memoå’ŒReact.PureComponentå–ä»£äº†ï¼Œä½†æ˜¯åº•å±‚é€»è¾‘ç±»ä¼¼ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªæµ…å¯¹æ¯”ã€‚å¦‚æœæƒ³å¯¹æ¯”æ›´å¤æ‚çš„å¯¹è±¡ï¼ŒReact.memoä¹Ÿæ”¯æŒåœ¨ç¬¬äºŒä¸ªå®å‚ä¼ å…¥è‡ªå®šä¹‰çš„å¯¹æ¯”åŠŸèƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663982114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361345,"user_name":"é›¨ä¸­é€é™ˆèè","can_delete":false,"product_type":"c1","uid":1457879,"ip_address":"åŒ—äº¬","ucode":"409FA76EEED669","user_header":"https://static001.geekbang.org/account/avatar/00/16/3e/d7/399d2ba5.jpg","comment_is_top":false,"comment_ctime":1667442356,"is_pvip":false,"replies":[{"id":132376,"content":"Macè‡ªå¸¦çš„keynoteï¼Œæ²¡æœ‰ç‰¹åˆ«çš„å·¥å…·å“ˆï¼Œç±»ä¼¼äºWindowsä¸­çš„pptã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1670651681,"ip_address":"åŒ—äº¬","comment_id":361345,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"å¥½åƒè¦è€å¸ˆç”»å›¾çš„è½¯ä»¶ï¼Œè€å¸ˆå¯ä»¥å‘ŠçŸ¥ä¸€ä¸‹éº½","like_count":2,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596091,"discussion_content":"Macè‡ªå¸¦çš„keynoteï¼Œæ²¡æœ‰ç‰¹åˆ«çš„å·¥å…·å“ˆï¼Œç±»ä¼¼äºWindowsä¸­çš„pptã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670651681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359360,"user_name":"Change","can_delete":false,"product_type":"c1","uid":1161260,"ip_address":"åŒ—äº¬","ucode":"FB60D2378C9F02","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/2c/0f7baf3a.jpg","comment_is_top":false,"comment_ctime":1665473600,"is_pvip":false,"replies":[{"id":130868,"content":"1. é—­åŒ…å¦‚æœè¿”å›å±æ€§åˆ™å¤±å»å¯¹å±æ€§ä¿æŠ¤çš„æ„ä¹‰ã€‚\n---------------------------------\næ˜¯çš„ï¼Œæ‰€ä»¥å¯¹è±¡çš„å±æ€§æ˜¯å…¬å¼€çš„ï¼Œé—­åŒ…çš„æ„ä¹‰å°±æ˜¯éšè—ã€‚\n\n2. å¦‚æœä¸è¿”å›é€šè¿‡å“ªç§æ–¹å¼æ˜¯å®ç°å±æ€§æ‹·è´ã€‚\n---------------------------------\nè¿™ç§æƒ…å†µä¸‹ï¼Œå°±è¦åœ¨é—­åŒ…åµŒå¥—å±‚åŠ è·å–æƒé™çš„æ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1665842839,"ip_address":"åŒ—äº¬","comment_id":359360,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"æ–‡ä¸­æåˆ°é—­åŒ…æ¯”è¾ƒéš¾å®ç°æ‹·è´ï¼Œæ¯”è¾ƒæœ‰ç–‘é—®ï¼Ÿ\n1. é—­åŒ…å¦‚æœè¿”å›å±æ€§åˆ™å¤±å»å¯¹å±æ€§ä¿æŠ¤çš„æ„ä¹‰ã€‚\n2. å¦‚æœä¸è¿”å›é€šè¿‡å“ªç§æ–¹å¼æ˜¯å®ç°å±æ€§æ‹·è´ã€‚","like_count":1,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590538,"discussion_content":"1. é—­åŒ…å¦‚æœè¿”å›å±æ€§åˆ™å¤±å»å¯¹å±æ€§ä¿æŠ¤çš„æ„ä¹‰ã€‚\n---------------------------------\næ˜¯çš„ï¼Œæ‰€ä»¥å¯¹è±¡çš„å±æ€§æ˜¯å…¬å¼€çš„ï¼Œé—­åŒ…çš„æ„ä¹‰å°±æ˜¯éšè—ã€‚\n\n2. å¦‚æœä¸è¿”å›é€šè¿‡å“ªç§æ–¹å¼æ˜¯å®ç°å±æ€§æ‹·è´ã€‚\n---------------------------------\nè¿™ç§æƒ…å†µä¸‹ï¼Œå°±è¦åœ¨é—­åŒ…åµŒå¥—å±‚åŠ è·å–æƒé™çš„æ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665842840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358006,"user_name":"å¥•æ™¨","can_delete":false,"product_type":"c1","uid":3000956,"ip_address":"åŒ—äº¬","ucode":"59E240369BC1DC","user_header":"https://static001.geekbang.org/account/avatar/00/2d/ca/7c/98193e9e.jpg","comment_is_top":false,"comment_ctime":1663828600,"is_pvip":false,"replies":[{"id":130309,"content":"å¯¹äºåµŒå¥—çš„å¯¹è±¡ï¼Œæ˜¯æœ‰è¿™æ ·çš„å½±å“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":2785919,"ctime":1663856036,"ip_address":"åŒ—äº¬","comment_id":358006,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"spread åšåˆ°çš„æ˜¯æµ…æ‹·è´ï¼Œé‚£ä¹ˆä½ æ˜¯å¦äº†è§£ä¸ä¹‹å¯¹åº”çš„æ·±åº¦æ‹·è´ï¼Ÿ\néœ€è¦æ ¹æ®æ•°æ®ç±»å‹åŒºåˆ†ï¼Œè‹¥æ˜¯å¯¹è±¡çš„è¯ï¼Œæµ…æ‹·è´åï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå€¼ï¼Œä¼šå½±å“å¦ä¸€ä¸ªå€¼ï¼Œæ‹·è´çš„æ˜¯å¯¹è±¡çš„åœ°å€ï¼›æ·±åº¦æ‹·è´å°±æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„åœ°å€ï¼Œä¿®æ”¹å…¶ä¸­çš„å€¼ï¼Œäº’ä¸å½±å“ã€‚\n\nå®ƒä¼šä¸ä¼šå½±å“çŠ¶æ€çš„ç®¡ç†ï¼Ÿ\néœ€è¦é’ˆå¯¹props å’ŒstateåŒºåˆ†ï¼Œæ ¹æ®å€¼çš„ç±»å‹åˆ¤æ–­ï¼Œpropsä¸ä¼šï¼Œstateä¼šå½±å“ã€‚","like_count":1,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588572,"discussion_content":"å¯¹äºåµŒå¥—çš„å¯¹è±¡ï¼Œæ˜¯æœ‰è¿™æ ·çš„å½±å“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663856036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361129,"user_name":"æµ·","can_delete":false,"product_type":"c1","uid":1798213,"ip_address":"åŒ—äº¬","ucode":"3C2BC71C312062","user_header":"https://static001.geekbang.org/account/avatar/00/1b/70/45/7873e955.jpg","comment_is_top":false,"comment_ctime":1667263066,"is_pvip":false,"replies":[{"id":132063,"content":"å¯èƒ½æ˜¯æè¿°çš„é—®é¢˜ï¼Œæˆ‘å†æ”¹æ”¹ã€‚å› ä¸ºæ˜¯æ•°ç»„ï¼Œè¿™é‡Œæˆ‘ä»¬ä»0å¼€å§‹è®¡ç®—ç¬¬ä¸€ä½ï¼Œç„¶åç¬¬3ä¸ªå€¼å˜æˆ6æ˜¯ç¬¬å››ä½ï¼Œå†ç„¶åç¬¬4ä¸ªå€¼æ·»åŠ 1æ˜¯ç¬¬äº”ä½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1669345471,"ip_address":"åŒ—äº¬","comment_id":361129,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"æ¯”å¦‚ä¸‹é¢çš„ [3, 1, 0, 7] è¿™ç»„æ•°ç»„ä¸­ï¼Œæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªå€¼å˜æˆ 2ï¼Œç¬¬ä¸‰ä¸ªå€¼å˜æˆ 6ï¼Œç¬¬ 4 ä¸ªå€¼æ·»åŠ  1ï¼Œå½¢æˆäº† [2, 1, 0, 6, 1]ã€‚\n\nè€å¸ˆï¼Œè¿™é‡Œæ²¡å¤ªç†è§£å‘¢ï¼Œç¬¬3ä¸ªå€¼å˜æˆ6ï¼Œä¸æ˜¯ 2ï¼Œ1ï¼Œ6 å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594747,"discussion_content":"å¯èƒ½æ˜¯æè¿°çš„é—®é¢˜ï¼Œæˆ‘å†æ”¹æ”¹ã€‚å› ä¸ºæ˜¯æ•°ç»„ï¼Œè¿™é‡Œæˆ‘ä»¬ä»0å¼€å§‹è®¡ç®—ç¬¬ä¸€ä½ï¼Œç„¶åç¬¬3ä¸ªå€¼å˜æˆ6æ˜¯ç¬¬å››ä½ï¼Œå†ç„¶åç¬¬4ä¸ªå€¼æ·»åŠ 1æ˜¯ç¬¬äº”ä½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669345471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2692882,"avatar":"https://static001.geekbang.org/account/avatar/00/29/17/12/4200d701.jpg","nickname":"CherryğŸ’","note":"","ucode":"BE9F4EF0C9A1B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594667,"discussion_content":"æ ¹æ®ä¸‹æ ‡è¿›è¡Œçš„ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669273202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361090,"user_name":"å“å‘¦å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1200430,"ip_address":"åŒ—äº¬","ucode":"24076486C75030","user_header":"https://static001.geekbang.org/account/avatar/00/12/51/2e/6f7b0e7c.jpg","comment_is_top":false,"comment_ctime":1667203587,"is_pvip":false,"replies":[{"id":132062,"content":"è¿™é‡Œå’±ä»¬ç”¨çš„æ•°ç»„å’Œå¯¹è±¡å°±æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®ç»“æ„å“ˆã€‚\n\nä¸¾ä¸ªä¾‹å­ï¼š\nvar a = [1,2,3];\nvar b = a;\na[3] = 4;\nconsole.log(b); &#47;&#47;è¿”å› [1,2,3,4]\n\nä½ å¯ä»¥çœ‹åˆ°bå¼•ç”¨çš„æ˜¯açš„æ•°ç»„ä¸­çš„å…ƒç´ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1669344805,"ip_address":"åŒ—äº¬","comment_id":361090,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100122101,"comment_content":"è€å¸ˆï¼Œæ‰©å±•è¿ç®—ç¬¦ä¾‹å­é‚£æ•°ç»„å…ƒç´ ç”¨å¼•ç”¨ç±»å‹çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯æ¯”è¾ƒåˆç†ï¼ŒåŸå§‹ç±»å‹çš„æ•°æ®æ— æ³•æ·±æ‹·è´æµ…æ‹·è´çš„å†…å­˜åœ°å€åŒºåˆ«ï¼Œå®¹æ˜“è¿·ç³Šã€‚","like_count":0,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594744,"discussion_content":"è¿™é‡Œå’±ä»¬ç”¨çš„æ•°ç»„å’Œå¯¹è±¡å°±æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®ç»“æ„å“ˆã€‚\n\nä¸¾ä¸ªä¾‹å­ï¼š\nvar a = [1,2,3];\nvar b = a;\na[3] = 4;\nconsole.log(b); //è¿”å› [1,2,3,4]\n\nä½ å¯ä»¥çœ‹åˆ°bå¼•ç”¨çš„æ˜¯açš„æ•°ç»„ä¸­çš„å…ƒç´ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669344806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357984,"user_name":"Chaosæµ©","can_delete":false,"product_type":"c1","uid":1675943,"ip_address":"åŒ—äº¬","ucode":"4FFAE6EEAA460B","user_header":"https://static001.geekbang.org/account/avatar/00/19/92/a7/00fefed5.jpg","comment_is_top":false,"comment_ctime":1663812596,"is_pvip":false,"replies":[{"id":130307,"content":"å¾ˆé«˜å…´èƒ½å¸®åŠ©ä½ ç†è§£","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1663854213,"ip_address":"åŒ—äº¬","comment_id":357984,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100122101,"comment_content":"é—­åŒ…å’Œbindï¼Œç»å¸¸è§åˆ°è¿™ä¸¤ä¸ªæ¦‚å¿µä½†ä¸€ç›´ä¸€çŸ¥åŠè§£ï¼Œè¿™ä¸€è¯¾çœ‹å®Œè±ç„¶å¼€æœ—","like_count":0,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588568,"discussion_content":"å¾ˆé«˜å…´èƒ½å¸®åŠ©ä½ ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663854213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357979,"user_name":"RichardZhang","can_delete":false,"product_type":"c1","uid":2968022,"ip_address":"åŒ—äº¬","ucode":"FCA2AE70262123","user_header":"https://static001.geekbang.org/account/avatar/00/2d/49/d6/2027d07a.jpg","comment_is_top":false,"comment_ctime":1663810025,"is_pvip":false,"replies":[{"id":130306,"content":"æˆ‘ä»¬å‘¨å…­è§","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2785919,"ctime":1663851567,"ip_address":"åŒ—äº¬","comment_id":357979,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100122101,"comment_content":"å¥½æ–‡æ‰“å¡ï¼ŒæœŸå¾…å‘¨å…­ã€‚","like_count":0,"discussions":[{"author":{"id":2785919,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/82/7f/c22de3a3.jpg","nickname":"çŸ³å·","note":"","ucode":"99E480A265E25F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588564,"discussion_content":"æˆ‘ä»¬å‘¨å…­è§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663851568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366387,"user_name":"Nuvole Bianche","can_delete":false,"product_type":"c1","uid":2100301,"ip_address":"ä¸Šæµ·","ucode":"3C059A454C16C7","user_header":"https://static001.geekbang.org/account/avatar/00/20/0c/4d/90ab20d8.jpg","comment_is_top":false,"comment_ctime":1673679604,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100122101,"comment_content":"ä¹Ÿè®¸ä¸€æ–¹é¢æ˜¯æˆ‘è‡ªèº«çš„èƒ½åŠ›æ²¡è¾¾åˆ°ä¸€å®šé«˜åº¦ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ„Ÿè§‰ä½œè€…å¤§å¤§æ€»æ˜¯ç”¨ä¸€äº›çœ‹ä¸Šå»æ¯”è¾ƒâ€œå‡å¤§ç©ºâ€çš„è¯æ±‡ã€‚æ¯å½“è‡ªå·±çœ‹åˆ°è¿™äº›è¯æ±‡æ—¶ï¼Œæœ‰äº›ä¸çŸ¥æ‰€äº‘ï¼Œä¸€æ—¶éš¾ä»¥ç†è§£ã€‚ç„¶åè‡ªå·±è¯•ç€æ ¹æ®è‡ªå·±å·²æœ‰çš„çŸ¥è¯†ï¼Œæ‰¾ä¸€ä¸ªå¯èƒ½ä¸ä¹‹å¯¹åº”ã€ä½†æ›´å®åœ¨çš„è¯æ±‡æ¥ä»£æ›¿æ—¶ï¼Œå°±çªç„¶æ˜ç™½ï¼ŒåŸæ¥ä½œè€…æ˜¯è¿™ä¸ªæ„æ€å‘€ã€‚ æ¯”å¦‚åŸæ–‡ä¸­ï¼šæ‰€ä»¥ï¼Œå®ƒå…¶å®å¯ä»¥ç»†ç²’åº¦åœ°æ§åˆ¶æˆ‘ä»¬æƒ³è¦æš´éœ²æˆ–éšè—çš„å±æ€§ï¼Œä»¥åŠç›¸å…³çš„æ“ä½œã€‚   è¿™ä¸ªç»†ç²’åº¦è¯´ç™½äº†ä¸å°±æ˜¯æ›´åŠ å¯é¢„æµ‹å’Œå¯æ§å—ï¼Ÿ å¯ååæä¸ªå¤§è¯ï¼Œè¿˜æ˜¯æœ‰äº›ä¸ä¹ æƒ¯ã€‚  å¯èƒ½è¿™å°±æ˜¯ä½œè€…åœ¨å¼€ç¯‡è¯´çš„å…¥é—¨æ—¢æ˜¯å·…å³°è€…å¯¹èœé¸¡å°ç™½çš„ä¿¯è§†å§ã€‚   æˆ‘è¿˜æ˜¯çš„å’¬ç‰™åšæŒä¸€ä¸‹ã€‚","like_count":1},{"had_liked":false,"id":386088,"user_name":"é˜","can_delete":false,"product_type":"c1","uid":1518535,"ip_address":"ä¸­å›½å°æ¹¾","ucode":"0106652D5F7BD9","user_header":"https://static001.geekbang.org/account/avatar/00/17/2b/c7/9c8647c8.jpg","comment_is_top":false,"comment_ctime":1704037467,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100122101,"comment_content":"é—œæ–¼ æ€§èƒ½çš„è€ƒæ…® é€™å€‹å°ç¯€æåˆ°çš„ä¾‹å­:\nbind å…¶å¯¦ä¹Ÿæ˜¯æœƒå‰µå»ºä¸€å€‹æ–°çš„å‡½å¼, æ‰€ä»¥æˆ‘çš„æ„Ÿè¦ºè·Ÿé–‰åŒ…æ²’æœ‰å¤ªå¤§å·®ç•°, åè€Œæ˜¯ä½¿ç”¨é–‰åŒ…æ›´å¥½æ‡‚","like_count":0},{"had_liked":false,"id":381105,"user_name":"Osmond","can_delete":false,"product_type":"c1","uid":2836830,"ip_address":"è´µå·","ucode":"7D04C6D7B0DDCB","user_header":"https://static001.geekbang.org/account/avatar/00/2b/49/5e/f430ff83.jpg","comment_is_top":false,"comment_ctime":1694683009,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100122101,"comment_content":"&#47;&#47; æ•°ç»„æµ…æ‹·è´var a = [ 1, 2 ];var b = [ ...a ];b.push( 3 );a; &#47;&#47; [1,2]b; &#47;&#47; [1,2,3]\nè€å¸ˆè¿™é‡Œä¸åº”è¯¥æ˜¯æ·±æ‹·è´å— a bå†…å­˜åœ°å€ä¸ä¸€æ ·äº†ï¼Œæœ‰ç‚¹æ™•","like_count":0}]}