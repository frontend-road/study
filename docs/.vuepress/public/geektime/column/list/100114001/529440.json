{"id":529440,"title":"03 | æ•°ç»„ä¸é“¾è¡¨ï¼šå­˜å‚¨è®¾è®¡çš„åŸºçŸ³æœ‰å“ªäº›ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä¸å¨ã€‚</p><p>ä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬å°±è¦è¿›è¡ŒåŸºç¡€ç¯‡çš„å­¦ä¹ äº†ã€‚æƒ³è¦ç†Ÿç»ƒä½¿ç”¨ä¸­é—´ä»¶è§£å†³å„ç§å„æ ·çš„é—®é¢˜ï¼Œé¦–å…ˆéœ€è¦æŒæ¡ä¸­é—´ä»¶çš„åŸºç¡€çŸ¥è¯†ã€‚</p><p>æˆ‘è®¤ä¸ºï¼Œä¸­é—´ä»¶ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹ä¸‰æ–¹é¢çš„åŸºç¡€ï¼šæ•°æ®ç»“æ„ã€JUCå’ŒNettyï¼Œæ¥ä¸‹æ¥çš„ä¸¤èŠ‚è¯¾ï¼Œæˆ‘ä»¬å…ˆè®²æ•°æ®ç»“æ„ã€‚</p><p>æ•°æ®ç»“æ„ä¸»è¦è§£å†³çš„æ˜¯æ•°æ®çš„å­˜å‚¨æ–¹å¼é—®é¢˜ï¼Œæ˜¯ç¨‹åºè®¾è®¡çš„åŸºåº§ã€‚</p><p>æŒ‰ç…§é‡è¦æ€§å’Œå¤æ‚ç¨‹åº¦ï¼Œæˆ‘é€‰å–äº†æ•°ç»„å’Œé“¾è¡¨ã€é”®å€¼å¯¹(HashMap)ã€çº¢é»‘æ ‘ã€LinkedHashMapå’ŒPriorityQueueå‡ ç§æ•°æ®ç»“æ„é‡ç‚¹è§£æã€‚å…¶ä¸­ï¼Œæ•°ç»„ä¸é“¾è¡¨æ˜¯æœ€åº•å±‚çš„ä¸¤ç§ç»“æ„ï¼Œæ˜¯åç»­æ‰€æœ‰æ•°æ®ç»“æ„çš„åŸºç¡€ã€‚</p><p>æˆ‘ä¼šå¸¦ä½ åˆ†ææ¯ç§ç»“æ„çš„å­˜å‚¨ç»“æ„ã€æ–°å¢å…ƒç´ å’Œæœç´¢å…ƒç´ çš„æ–¹å¼ã€æ‰©å®¹æœºåˆ¶ç­‰ï¼Œè®©ä½ è¿…é€ŸæŠ“ä½æ•°æ®ç»“æ„åº•å±‚çš„ç‰¹æ€§ã€‚å½“ç„¶ï¼Œæˆ‘è¿˜ä¼šç»“åˆä¸€äº›å·¥ä¸šçº§å®è·µï¼Œå¸¦ä½ æ·±å…¥ç†è§£è¿™äº›å®¹å™¨èƒŒåè•´å«çš„è®¾è®¡ç†å¿µã€‚</p><p>è¯´æ˜ä¸€ä¸‹ï¼Œæ•°æ®ç»“æ„å…¶å®å¹¶ä¸åŒºåˆ†è¯­è¨€ï¼Œä½†ä¸ºäº†æ–¹ä¾¿é˜è¿°ï¼Œè¿™èŠ‚è¯¾æˆ‘ä¸»è¦åŸºäºJavaè¯­è¨€è¿›è¡Œè®²è§£ã€‚</p><h2>æ•°ç»„</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æ•°ç»„ã€‚</p><p>æ•°ç»„æ˜¯ç”¨äºå‚¨å­˜å¤šä¸ªç›¸åŒç±»å‹æ•°æ®çš„é›†åˆï¼Œå®ƒå…·æœ‰é¡ºåºæ€§ï¼Œå¹¶ä¸”ä¹Ÿè¦æ±‚å†…å­˜ç©ºé—´å¿…é¡»è¿ç»­ã€‚é«˜çº§ç¼–ç¨‹è¯­è¨€åŸºæœ¬éƒ½ä¼šæä¾›æ•°ç»„çš„å®ç°ã€‚</p><p>ä¸ºäº†æ›´ç›´è§‚åœ°äº†è§£æ•°ç»„çš„å†…å­˜å¸ƒå±€ï¼Œæˆ‘ä»¬å‡è®¾ä»æ“ä½œç³»ç»Ÿç”³è¯·äº†128å­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œå®ƒçš„æ•°æ®ç»“æ„å¯ä»¥å‚è€ƒä¸‹é¢è¿™å¼ å›¾ï¼š</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/09/57/09c4065e6081fc190a87662c0101b357.jpg?wh=1920x505\" alt=\"å›¾ç‰‡\"></p><p>ç»“åˆè¿™å¼ å›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Javaä¸­ï¼Œæ•°ç»„é€šå¸¸åŒ…å«ä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ã€‚</p><ul>\n<li>å¼•ç”¨ï¼šæ¯ä¸€ä¸ªå˜é‡éƒ½ä¼šåœ¨æ ˆä¸­å­˜å‚¨æ•°ç»„çš„å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•ç”¨å¯¹æ•°ç»„è¿›è¡Œæ“ä½œï¼Œå¯¹åº”ä¸Šå›¾çš„ array1ã€array2ã€‚</li>\n<li>å®¹é‡ï¼šæ•°ç»„åœ¨åˆ›å»ºæ—¶éœ€è¦æŒ‡å®šå®¹é‡ï¼Œä¸€æ—¦åˆ›å»ºï¼Œæ— æ³•ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°ç»„å¹¶ä¸èƒ½è‡ªåŠ¨æ‰©å®¹ã€‚</li>\n<li>ä¸‹æ ‡ï¼šæ•°ç»„å¯ä»¥é€šè¿‡ä¸‹æ ‡å¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œéšæœºè®¿é—®ï¼Œä¾‹å¦‚array1[0]è¡¨ç¤ºè®¿é—®æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸‹æ ‡ä»0å¼€å§‹ï¼Œå…¶æœ€å¤§å€¼ä¸ºå®¹é‡å‡ä¸€ã€‚</li>\n</ul><p>åœ¨åé¢çš„è®²è§£ä¸­ï¼Œä½ èƒ½çœ‹åˆ°å¾ˆå¤šæ•°æ®ç»“æ„éƒ½æ˜¯åŸºäºæ•°ç»„è€Œæ„å»ºçš„ã€‚</p><p>é‚£ä¹ˆæ•°ç»„æœ‰å“ªäº›ç‰¹æ€§å‘¢ï¼Ÿè¿™é‡Œæˆ‘æƒ³ä»‹ç»ä¸¤ä¸ªæˆ‘è®¤ä¸ºæœ€é‡è¦çš„ç‚¹ï¼š<strong>å†…å­˜è¿ç»­æ€§å’Œéšæœºè®¿é—®æ•ˆç‡é«˜ã€‚</strong></p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å†…å­˜è¿ç»­æ€§ã€‚</p><p>å†…å­˜è¿ç»­æ€§çš„æ„æ€æ˜¯ï¼Œæ•°ç»„åœ¨å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜æ—¶ï¼Œç”³è¯·çš„å¿…é¡»æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚æˆ‘ä»¬è¿˜æ˜¯ç»§ç»­ç”¨ä¸Šé¢è¿™ä¸ªä¾‹å­åšè¯´æ˜ã€‚æˆ‘ä»¬å·²ç»åˆ›å»ºäº†array1ã€array2ä¸¤ä¸ªæ•°ç»„ï¼Œå¦‚æœæƒ³è¦å†ç”³è¯·ä¸€ä¸ªæ‹¥æœ‰äº”ä¸ªintå…ƒç´ çš„æ•°ç»„ï¼Œèƒ½æŠŠè¿™äº”ä¸ªå…ƒç´ æ‹†å¼€ï¼Œåˆ†åˆ«æ”¾åœ¨æ•°ç»„1çš„å‰é¢å’Œåé¢å—ï¼Ÿä½ å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™å¼ ç¤ºæ„å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/bc/2e13df9e8ea3526801415096d62c72bc.jpg?wh=1920x589\" alt=\"å›¾ç‰‡\"></p><p>ç­”æ¡ˆå½“ç„¶æ˜¯ä¸å¯ä»¥ã€‚</p><p>è™½ç„¶å½“å‰å†…å­˜ä¸­å‰©ä½™å¯ç”¨ç©ºé—´ä¸º32ä¸ªå­—èŠ‚ï¼Œä¹ä¸€çœ‹ä¸Šå»æœ‰å……è¶³çš„å†…å­˜ã€‚ä½†æ˜¯ï¼Œå› ä¸ºä¸å­˜åœ¨è¿ç»­çš„20å­—èŠ‚çš„ç©ºé—´ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥åˆ›å»ºarray3ã€‚</p><p>å½“æˆ‘ä»¬æƒ³è¦åˆ›å»º20å­—èŠ‚é•¿åº¦çš„array3æ—¶ï¼Œåœ¨Javaä¸­ä¼šè§¦å‘ä¸€æ¬¡å†…å­˜å›æ”¶ï¼Œå¦‚æœåƒåœ¾å›æ”¶å™¨æ”¯æŒæ•´ç†ç‰¹æ€§ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶å™¨å¯¹å†…å­˜è¿›è¡Œå›æ”¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–°çš„å¸ƒå±€ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/b8/f2caf59b16797abb34fd61d2c5dedfb8.jpg?wh=1920x463\" alt=\"å›¾ç‰‡\"></p><p>ç»è¿‡å†…å­˜æ•´ç†åå°±èƒ½åˆ›å»ºæ•°ç»„3äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå†…å­˜ç®¡ç†ä¸å½“ï¼Œç¡®å®å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œä»è€Œå½±å“æ€§èƒ½ã€‚</p><p>é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦æŠŠå†…å­˜è®¾è®¡ä¸ºè¿ç»­çš„å‘¢ï¼Ÿæ¢å¥è¯è¯´ï¼Œè¿ç»­å†…å­˜æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p><p>è¿™å°±ä¸å¾—ä¸æåˆ°æ•°ç»„ä¸€ä¸ªæ— å¯æ¯”æ‹Ÿçš„ä¼˜åŠ¿äº†ï¼š<strong>æ•°ç»„çš„éšæœºè®¿é—®æ€§èƒ½æå¥½</strong>ã€‚<strong>è¿ç»­å†…å­˜ç¡®ä¿äº†åœ°å€ç©ºé—´çš„è¿ç»­æ€§ï¼Œå¯»å€éå¸¸ç®€å•é«˜æ•ˆã€‚</strong></p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå­˜æ”¾intæ•°æ®ç±»å‹çš„æ•°ç»„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">int[] array1 = new int[10];\n</code></pre><p>ç„¶åæˆ‘ä»¬çœ‹ä¸‹JVMä¸­çš„å¸ƒå±€ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/d1/7b5a75b843b04f09349ea95d1077d0d1.jpg?wh=1920x722\" alt=\"å›¾ç‰‡\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆå†…å­˜ç®¡ç†å™¨åœ¨æ ˆç©ºé—´ä¼šåˆ†é…ä¸€æ®µç©ºé—´ï¼Œç”¨å®ƒå­˜å‚¨æ•°ç»„åœ¨ç‰©ç†å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œè¿™ä¸ªèµ·å§‹åœ°å€æˆ‘ä»¬ç”¨baseOffsetè¡¨ç¤ºã€‚å¦‚æœæ˜¯64ä½æ“ä½œç³»ç»Ÿï¼Œé»˜è®¤ä¸€ä¸ªå˜é‡ä½¿ç”¨8å­—èŠ‚ï¼Œå¦‚æœé‡‡ç”¨äº†æŒ‡é’ˆå‹ç¼©æŠ€æœ¯ï¼Œå¯ä»¥å‡å°‘åˆ°4å­—èŠ‚ã€‚</p><p><strong>æ•°ç»„èƒ½å¤Ÿé«˜æ•ˆåœ°éšæœºè®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œä¸»è¦åŸå› æ˜¯å®ƒèƒ½å¤Ÿæ ¹æ®ä¸‹æ ‡å¿«é€Ÿè®¡ç®—å‡ºçœŸå®çš„ç‰©ç†åœ°å€ï¼Œå¯»æ‰¾ç®—æ³•ä¸ºâ€œbaseOffset + index * sizeâ€ã€‚</strong></p><p>å…¶ä¸­,sizeä¸ºæ•°ç»„ä¸­å•ä¸ªå…ƒç´ çš„é•¿åº¦ï¼Œæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚åœ¨ä¸Šé¢è¿™ä¸ªæ•°ç»„ä¸­ï¼Œå­˜å‚¨çš„å…ƒç´ æ˜¯intç±»å‹çš„æ•°æ®ï¼Œæ‰€ä»¥sizeä¸º4ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ ¹æ®æ•°ç»„ä¸‹æ ‡å°±å¯ä»¥è¿…é€Ÿæ‰¾åˆ°å¯¹åº”ä½ç½®å­˜å‚¨çš„æ•°æ®ã€‚</p><p>æ•°ç»„è¿™ç§é«˜æ•ˆçš„è®¿é—®æœºåˆ¶åœ¨ä¸­é—´ä»¶é¢†åŸŸæœ‰ç€éå¸¸å¹¿æ³›çš„åº”ç”¨ï¼Œå¤§åé¼é¼çš„æ¶ˆæ¯ä¸­é—´ä»¶RocketMQåœ¨å®ƒçš„æ–‡ä»¶è®¾è®¡ä¸­å°±çµæ´»è¿ç”¨äº†è¿™ä¸ªç‰¹æ€§ã€‚</p><p>RocketMQä¸ºäº†è¿½æ±‚æ¶ˆæ¯å†™å…¥æ—¶æè‡´çš„é¡ºåºå†™ï¼Œä¼šæŠŠæ‰€æœ‰ä¸»é¢˜çš„æ¶ˆæ¯å…¨éƒ¨é¡ºåºå†™å…¥åˆ°commitlogæ–‡ä»¶ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œcommitlogæ–‡ä»¶ä¸­æ··æ‚ç€å„ä¸ªä¸»é¢˜çš„æ¶ˆæ¯ï¼Œä½†æ¶ˆæ¯æ¶ˆè´¹æ—¶ï¼Œéœ€è¦æ ¹æ®ä¸»é¢˜ã€é˜Ÿåˆ—ã€æ¶ˆè´¹ä½ç½®å‘æ¶ˆæ¯æœåŠ¡å™¨æ‹‰å–æ¶ˆæ¯ã€‚å¦‚æœæƒ³ä»commitlogæ–‡ä»¶ä¸­è¯»å–æ¶ˆæ¯ï¼Œåˆ™éœ€è¦éå†commitlogæ–‡ä»¶ä¸­çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œæ£€ç´¢æ€§èƒ½éå¸¸ä½ä¸‹ã€‚</p><p>ä¸€å¼€å§‹ï¼Œä¸ºäº†æé«˜æ£€ç´¢æ•ˆç‡ï¼ŒRocketMQå¼•å…¥äº†ConsumeQueueæ–‡ä»¶ï¼Œå¯ä»¥ç†è§£ä¸ºcommitlogæ–‡ä»¶æŒ‰ç…§ä¸»é¢˜åˆ›å»ºç´¢å¼•ã€‚</p><p>ä¸ºäº†åœ¨æ¶ˆè´¹ç«¯æ”¯æŒæ¶ˆæ¯æŒ‰tagè¿›è¡Œæ¶ˆæ¯è¿‡æ»¤ï¼Œç´¢å¼•æ•°æ®ä¸­éœ€è¦åŒ…å«æ¶ˆæ¯çš„tagä¿¡æ¯ï¼Œå®ƒçš„æ•°æ®ç±»å‹æ˜¯Stringï¼Œç´¢å¼•æ–‡ä»¶éµå¾ª{topic}/{queueId}ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§ä¸»é¢˜ã€é˜Ÿåˆ—ä¸¤çº§ç›®å½•å­˜å‚¨ã€‚å•ä¸ªç´¢å¼•æ–‡ä»¶çš„å­˜å‚¨ç»“æ„è®¾è®¡å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/37/cc/37d00ef801366678bdd99e5966f74ecc.jpg?wh=1920x568\" alt=\"å›¾ç‰‡\"></p><p>ç´¢å¼•æ–‡ä»¶ä¸­ï¼Œæ¯ä¸€æ¡æ¶ˆæ¯éƒ½åŒ…å«åç§»é‡ã€æ¶ˆæ¯é•¿åº¦å’Œtagå†…å®¹ 3ä¸ªå­—æ®µã€‚</p><ul>\n<li>\n<p>commitlogåç§»é‡<br>\nå¯ä»¥æ ¹æ®è¯¥å€¼å¿«é€Ÿä»commitlogæ–‡ä»¶ä¸­æ‰¾åˆ°æ¶ˆæ¯ï¼Œè¿™ä¹Ÿæ˜¯ç´¢å¼•æ–‡ä»¶çš„æ„ä¹‰ã€‚</p>\n</li>\n<li>\n<p>æ¶ˆæ¯é•¿åº¦<br>\næ¶ˆæ¯çš„é•¿åº¦ï¼ŒçŸ¥é“å®ƒå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å¿«é€Ÿæå–ä¸€æ¡å®Œæ•´çš„æ¶ˆæ¯ã€‚</p>\n</li>\n<li>\n<p>tagå†…å®¹<br>\nç”±äºæ¶ˆæ¯çš„tagæ˜¯ç”±ç”¨æˆ·å®šä¹‰çš„ï¼Œä¾‹å¦‚tagAã€createorderç­‰ï¼Œå®ƒçš„é•¿åº¦å¯å˜ã€‚åœ¨æ–‡ä»¶å­˜å‚¨é¢†åŸŸï¼Œä¸€èˆ¬å­˜å‚¨å¯å˜é•¿çš„æ•°æ®ï¼Œé€šå¸¸ä¼šé‡‡ç”¨â€œé•¿åº¦å­—æ®µ+å…·ä½“å†…å®¹â€çš„å­˜å‚¨æ–¹å¼ã€‚å…¶ä¸­ç”¨æ¥å­˜å‚¨å†…å®¹çš„é•¿åº¦ä½¿ç”¨å›ºå®šé•¿åº¦ï¼Œå®ƒæ˜¯ç”¨æ¥è®°å½•åè¾¹å†…å®¹çš„é•¿åº¦ã€‚</p>\n</li>\n</ul><p>å›åˆ°æ¶ˆæ¯æ¶ˆè´¹è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬æ ¹æ®ä¸»é¢˜ã€æ¶ˆè´¹ç»„ï¼Œæ¶ˆæ¯ä½ç½®(é˜Ÿåˆ—ä¸­å­˜å‚¨çš„ç¬¬Næ¡æ¶ˆæ¯)ï¼Œèƒ½å¦å¿«é€Ÿæ‰¾åˆ°æ¶ˆæ¯å‘¢ï¼Ÿä¾‹å¦‚è¾“å…¥ topic:order_topicã€queueId:0,offset:2ï¼Œèƒ½ä¸èƒ½é©¬ä¸Šæ‰¾åˆ°ç¬¬Næ¡æ¶ˆæ¯ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯å¯ä»¥æ‰¾åˆ°ï¼Œä½†ä¸é‚£ä¹ˆé«˜æ•ˆã€‚åŸå› æ˜¯ï¼Œæˆ‘ä»¬æ ¹æ®topicã€queueidï¼Œèƒ½éå¸¸é«˜æ•ˆåœ°æ‰¾åˆ°å¯¹åº”çš„ç´¢å¼•æ–‡ä»¶ã€‚æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°å¯¹åº”çš„topicæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨å®ƒçš„å­ç›®å½•ä¸­æ‰¾åˆ°å¯¹åº”çš„é˜Ÿåˆ—idæ–‡ä»¶å¤¹å°±å¯ä»¥äº†ã€‚ä½†è¦æƒ³ä»ç´¢å¼•æ–‡ä»¶ä¸­æ‰¾åˆ°å…·ä½“æ¡ç›®ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¿…é¡»éå†ç´¢å¼•æ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªæ¡ç›®ï¼Œç›´åˆ°åˆ°è¾¾offsetçš„æ¡ç›®ï¼Œæ‰èƒ½å–å‡ºå¯¹åº”çš„commitlogåç§»é‡ã€‚</p><p>é‚£æ˜¯å¦æœ‰æ›´é«˜æ•ˆçš„ç´¢å¼•æ–¹å¼å‘¢ï¼Ÿ</p><p>å½“ç„¶æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸€ä¸ªæ¡ç›®è®¾è®¡æˆå›ºå®šé•¿åº¦ï¼Œç„¶åæŒ‰ç…§æ•°ç»„ä¸‹æ ‡çš„æ–¹å¼è¿›è¡Œæ£€ç´¢ã€‚</p><p>ä¸ºäº†å®ç°æ¯ä¸€ä¸ªæ¡ç›®å®šé•¿ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä¸å­˜å‚¨tagçš„åŸå§‹å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å­˜å‚¨åŸå§‹å­—ç¬¦ä¸²çš„hashCodeï¼Œè¿™æ ·å°±å¯ä»¥ç¡®ä¿å®šé•¿äº†ã€‚ä½ å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™å¼ è®¾è®¡å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6d/3b/6ddd2f39e7a4261caeef32248b29893b.jpg?wh=1920x487\" alt=\"å›¾ç‰‡\"></p><p>åŸºäºè¿™ç§è®¾è®¡ï¼Œå¦‚æœç»™å®šä¸€ä¸ªoffsetï¼Œæˆ‘ä»¬å†æƒ³å¿«é€Ÿæå–ä¸€æ¡ç´¢å¼•å°±å˜å¾—éå¸¸ç®€å•äº†ã€‚</p><p>é¦–å…ˆï¼Œæ ¹æ® offset * 20(æ¯ä¸€ä¸ªæ¡ç›®çš„é•¿åº¦)ï¼Œå®šä½åˆ°éœ€è¦æŸ¥æ‰¾æ¡ç›®çš„èµ·å§‹ä½ç½®ï¼Œç”¨startOffsetè¡¨ç¤ºã€‚</p><p>ç„¶åï¼Œä»startOffsetä½ç½®å¼€å§‹è¯»å–20ä¸ªå­—èŠ‚çš„é•¿åº¦ï¼Œå°±å¯ä»¥å¾—åˆ°ç‰©ç†åç§»é‡ã€æ¶ˆæ¯é•¿åº¦å’Œtagçš„hashCodeäº†ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡hashCodeè¿›è¡Œç¬¬ä¸€æ¬¡è¿‡æ»¤ï¼Œå¦‚æœé‡åˆ°hashå†²çªï¼Œå°±è®©å®¢æˆ·ç«¯å†æ ¹æ®æ¶ˆæ¯çš„tagå­—ç¬¦ä¸²ç²¾ç¡®è¿‡æ»¤ä¸€éã€‚</p><p>è¿™ç§æ–¹å¼ï¼Œæ˜¾ç„¶å€Ÿé‰´äº†æ•°ç»„é«˜æ•ˆè®¿é—®æ•°æ®çš„è®¾è®¡ç†å¿µï¼Œæ˜¯æ•°ç»„å®ç°ç†å¿µåœ¨æ–‡ä»¶å­˜å‚¨è¿‡ç¨‹ä¸­çš„ç»å…¸è¿ç”¨ã€‚</p><p>æ€»ä¹‹ï¼Œæ­£æ˜¯ç”±äºæ•°ç»„å…·æœ‰å†…å­˜è¿ç»­æ€§ï¼Œå…·æœ‰éšæœºè®¿é—®çš„ç‰¹æ€§ï¼Œå®ƒåœ¨å­˜å‚¨è®¾è®¡é¢†åŸŸçš„åº”ç”¨æ‰éå¸¸å¹¿æ³›ï¼Œæˆ‘ä»¬åé¢ä»‹ç»çš„HashMapä¹Ÿå¼•å…¥äº†æ•°ç»„ã€‚</p><h2>ArrayList</h2><p>ä¸è¿‡ï¼Œæ•°ç»„ä»ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´æ˜¯é¢å‘è¿‡ç¨‹ç¼–ç¨‹ä¸­çš„äº§ç‰©ï¼Œè€ŒJavaæ˜¯ä¸€é—¨é¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­è¨€ï¼Œæ‰€ä»¥ï¼Œç›´æ¥ä½¿ç”¨æ•°ç»„å®¹æ˜“ç ´åé¢å‘å¯¹è±¡çš„ç¼–ç¨‹èŒƒå¼ï¼Œæ•…é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€éƒ½ä¼šå¯¹æ•°ç»„è¿›è¡Œæ›´é«˜çº§åˆ«çš„æŠ½è±¡ï¼Œåœ¨Javaä¸­å¯¹åº”çš„å°±æ˜¯ArrayListã€‚</p><p>æˆ‘ä¼šä»æ•°æ®å­˜å‚¨ç»“æ„ã€æ‰©å®¹æœºåˆ¶ã€æ•°æ®è®¿é—®ç‰¹æ€§ä¸‰ä¸ªæ–¹é¢å’Œä½ ä¸€èµ·æ¥æ¢ç©¶ä¸€ä¸‹ArrayListã€‚</p><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ArrayListçš„åº•å±‚å­˜å‚¨ç»“æ„ï¼Œä½ å¯ä»¥å…ˆçœ‹ä¸‹è¿™ä¸ªç¤ºæ„å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ef/a2/efc6558677927715d84a4af456d117a2.jpg?wh=1920x357\" alt=\"å›¾ç‰‡\"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒArrayListçš„åº•å±‚æ•°æ®ç›´æ¥ä½¿ç”¨äº†æ•°ç»„ï¼Œæ˜¯å¯¹æ•°ç»„çš„æŠ½è±¡ã€‚</p><p>ArrayListç›¸æ¯”æ•°ç»„ï¼Œå¢åŠ äº†ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒæ”¯æŒè‡ªåŠ¨æ‰©å®¹ã€‚å…¶æ‰©å®¹æœºåˆ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/48/db/48d1bdc69795a3d3b0e03e79eb5fdcdb.jpg?wh=1920x702\" alt=\"\"></p><p>æ‰©å®¹çš„å®ç°æœ‰ä¸‰ä¸ªè¦ç‚¹ã€‚</p><ul>\n<li>æ‰©å®¹åçš„å®¹é‡= åŸå®¹é‡ +ï¼ˆåŸå®¹é‡ï¼‰/ 2ï¼Œä»¥ 1.5 å€è¿›è¡Œæ‰©å®¹ã€‚</li>\n<li>å†…éƒ¨è¦åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦ä¸ºæ‰©å®¹åçš„æ–°é•¿åº¦ã€‚</li>\n<li>éœ€è¦å°†åŸæ•°ç»„ä¸­çš„å†…å®¹æ‹·è´åˆ°æ–°çš„æ•°ç»„ï¼Œå³æ‰©å®¹è¿‡ç¨‹ä¸­å­˜åœ¨å†…å­˜å¤åˆ¶ç­‰è¾ƒé‡çš„æ“ä½œã€‚</li>\n</ul><p><strong>æ³¨æ„ï¼Œåªåœ¨å½“å‰æ— å‰©ä½™ç©ºé—´æ—¶æ‰ä¼šè§¦å‘æ‰©å®¹ã€‚åœ¨å®é™…çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¦å°½é‡åšå¥½å®¹é‡è¯„ä¼°ï¼Œå‡å°‘æ‰©å®¹çš„å‘ç”Ÿã€‚å› ä¸ºæ‰©å®¹çš„æˆæœ¬è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå­˜å‚¨çš„æ•°æ®è¶Šå¤šï¼Œæ‰©å®¹çš„æˆæœ¬è¶Šé«˜ã€‚</strong></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ArrayListçš„æ•°æ®è®¿é—®ç‰¹æ€§ã€‚</p><ul>\n<li>é¡ºåºæ·»åŠ å…ƒç´ çš„æ•ˆç‡é«˜</li>\n</ul><p>ArrayListé¡ºåºæ·»åŠ å…ƒç´ ï¼Œå¦‚æœä¸éœ€è¦æ‰©å®¹ï¼Œç›´æ¥å°†æ–°çš„æ•°æ®æ·»åŠ åˆ°elementData[size]ä½ç½®ï¼Œç„¶åsizeåŠ ä¸€å³å¯ï¼ˆå…¶ä¸­ï¼Œsizeè¡¨ç¤ºå½“å‰æ•°ç»„ä¸­å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°ï¼‰ã€‚</p><p>ArrayListæ·»åŠ å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸ä¼šéšç€å­˜å‚¨æ•°æ®çš„å¤§å°è€Œæ”¹å˜ï¼Œæ˜¯éå¸¸é«˜æ•ˆçš„å­˜å‚¨æ–¹å¼ã€‚</p><ul>\n<li>ä¸­é—´ä½ç½®æ’å…¥/åˆ é™¤å…ƒç´ çš„æ•ˆç‡ä½<br>\n<img src=\"https://static001.geekbang.org/resource/image/e7/b8/e74e9012db10cd7dc524831c697f5cb8.jpg?wh=1205x858\" alt=\"å›¾ç‰‡\"></li>\n</ul><p>åœ¨æ’å…¥å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å°†éœ€è¦æ’å…¥æ•°æ®çš„ä¸‹æ ‡ç”¨ index è¡¨ç¤ºï¼Œå°† index ä¹‹åçš„ä¾æ¬¡å‘åç§»åŠ¨(å¤åˆ¶åˆ° index + 1)ï¼Œç„¶åå°†æ–°æ•°æ®å­˜å‚¨åœ¨ä¸‹æ ‡ indexçš„ä½ç½®ã€‚</p><p>åˆ é™¤æ“ä½œä¸æ’å…¥ç±»ä¼¼ï¼Œåªæ˜¯ä¸€ä¸ªæ•°æ®æ˜¯å¾€åç§»ï¼Œè€Œåˆ é™¤åŠ¨ä½œæ˜¯å¾€å‰ç§»ã€‚</p><p>ArrayListåœ¨ä¸­é—´ä½ç½®è¿›è¡Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒä½æ•ˆçš„æ“ä½œã€‚</p><ul>\n<li>éšæœºè®¿é—®æ€§èƒ½é«˜</li>\n</ul><p>ç”±äºArrayListçš„åº•å±‚å°±æ˜¯æ•°ç»„ï¼Œå› æ­¤å®ƒæ‹¥æœ‰é«˜æ•ˆçš„éšæœºè®¿é—®æ•°æ®ç‰¹æ€§ã€‚</p><h2>LinkedList</h2><p>é™¤äº†ArrayListï¼Œåœ¨æ•°æ®ç»“æ„ä¸­ï¼Œè¿˜æœ‰ä¸€ç§ä¹Ÿå¾ˆç»å…¸çš„æ•°æ®ç»“æ„ï¼šé“¾è¡¨ã€‚LinkedListå°±æ˜¯é“¾è¡¨çš„å…·ä½“å®ç°ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹LinkedListçš„åº•å±‚å­˜å‚¨ç»“æ„ï¼Œæœ€åå†å¯¹æ¯”ä¸€ä¸‹å®ƒå’ŒArrayListçš„å·®å¼‚ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9f/73/9fb78d978bf28813c88aa381cfb93973.jpg?wh=1920x723\" alt=\"å›¾ç‰‡\"></p><p>ä»ä¸Šé¢è¿™å¼ å›¾ä½ å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªLinkedListå¯¹è±¡åœ¨å†…å­˜ä¸­é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šLinkedListå¯¹è±¡å’Œç”±NodeèŠ‚ç‚¹ç»„æˆçš„é“¾æ¡ã€‚</p><p>ä¸€ä¸ªLinkedListå¯¹è±¡åœ¨å†…å­˜ä¸­ä¸»è¦åŒ…å«3ä¸ªå­—æ®µã€‚</p><ul>\n<li>int sizeï¼šé“¾è¡¨ä¸­å½“å‰å­˜åœ¨çš„NodeèŠ‚ç‚¹æ•°ï¼Œä¸»è¦ç”¨æ¥åˆ¤æ–­æ˜¯å¦ä¸ºç©ºã€åˆ¤æ–­éšæœºè®¿é—®ä½ç‚¹æ˜¯å¦å­˜åœ¨ï¼›</li>\n<li>Node firstï¼šæŒ‡å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼›</li>\n<li>Node lastï¼šæŒ‡å‘é“¾è¡¨çš„å°¾èŠ‚ç‚¹ã€‚</li>\n</ul><p>å†æ¥è¯´è¯´ç”±NodeèŠ‚ç‚¹ç»„æˆçš„é“¾æ¡ã€‚NodeèŠ‚ç‚¹ç”¨äºå­˜å‚¨çœŸå®çš„æ•°æ®ï¼Œå¹¶ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆã€‚åˆ†åˆ«è§£é‡Šä¸€ä¸‹ã€‚</p><ul>\n<li>E itemï¼šæ‹¥æœ‰å­˜å‚¨ç”¨æˆ·æ•°æ®ï¼›</li>\n<li>Node prevï¼šå‰é©±èŠ‚ç‚¹ï¼ŒæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªæŒ‡é’ˆï¼›</li>\n<li>Node lastï¼šåç»§èŠ‚ç‚¹ï¼ŒæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚<br>\nç”±è¿™ä¸¤éƒ¨åˆ†æ„æˆçš„é“¾è¡¨å…·æœ‰ä¸€ä¸ªéå¸¸å…¸å‹çš„ç‰¹å¾ï¼š<strong>å†…å­˜çš„ç”³è¯·æ— é¡»è¿ç»­æ€§</strong>ã€‚è¿™å°±å‡å°‘äº†å†…å­˜ç”³è¯·çš„é™åˆ¶ã€‚</li>\n</ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•æ“ä½œé“¾è¡¨ã€‚å¯¹äºé“¾è¡¨çš„æ“ä½œä¸»è¦æœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯åœ¨é“¾è¡¨å‰åæ·»åŠ æˆ–åˆ é™¤èŠ‚ç‚¹ï¼Œä¸€ç±»æ˜¯åœ¨é“¾è¡¨ä¸­é—´æ·»åŠ æˆ–åˆ é™¤æ•°æ®ã€‚</p><p>å½“ä½ æƒ³è¦åœ¨é“¾è¡¨å‰åæ·»åŠ æˆ–åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨LinkedListå¯¹è±¡ä¸­æŒæœ‰é“¾è¡¨çš„å¤´å°¾æŒ‡é’ˆï¼Œå¯ä»¥éå¸¸å¿«åœ°å®šä½åˆ°å¤´éƒ¨æˆ–å°¾éƒ¨èŠ‚ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ—¶å¦‚æœæˆ‘ä»¬æƒ³è¦å¢åˆ æ•°æ®ï¼Œéƒ½åªéœ€è¦æ›´æ–°ç›¸å…³çš„å‰é©±æˆ–åç»§èŠ‚ç‚¹å°±å¯ä»¥äº†ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/71/a2/71723714cf880891a0b7a49440bf42a2.jpg?wh=1920x530\" alt=\"å›¾ç‰‡\"></p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬å‘å°¾éƒ¨èŠ‚ç‚¹æ·»åŠ èŠ‚ç‚¹ï¼Œå®ƒçš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-plain\">Node oldLastNode = list.last; //æ·»åŠ æ•°æ®ä¹‹å‰åŸå…ˆçš„å°¾éƒ¨èŠ‚ç‚¹\nNode newNode = new Node();\nnewNode.item = 4;//è®¾ç½®ç”¨æˆ·çš„å€¼\noldLastNode.next = newNode; // å°†åŸå…ˆå°¾éƒ¨èŠ‚ç‚¹çš„nextæŒ‡é’ˆæ›´æ–°ä¸ºæ–°æ·»åŠ çš„èŠ‚ç‚¹\nnewNode.prev = oldLastNode; // æ–°æ·»åŠ çš„èŠ‚ç‚¹çš„prevæŒ‡å‘æºå°¾éƒ¨èŠ‚ç‚¹ï¼Œé€šè¿‡è¿™ä¸¤æ­¥ï¼Œä½¿æ–°åŠ å…¥çš„èŠ‚ç‚¹æ·»åŠ åˆ°é“¾è¡¨ä¸­\nlist.last = newNode; // æ›´æ–°LinkedListçš„å°¾éƒ¨èŠ‚ç‚¹ä¸ºæ–°æ·»åŠ èŠ‚ç‚¹\n</code></pre><p>åœ¨é“¾è¡¨çš„å°¾éƒ¨ã€å¤´éƒ¨æ·»åŠ å’Œåˆ é™¤æ•°æ®ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼Œæ¯”ArrayListåœ¨å°¾éƒ¨æ·»åŠ èŠ‚ç‚¹æ•ˆç‡è¦é«˜ã€‚å› ä¸ºå½“ArrayListéœ€è¦æ‰©å®¹æ—¶ï¼Œä¼šè§¦å‘æ•°æ®çš„å¤§é‡å¤åˆ¶ï¼Œè€ŒLinkedListæ˜¯ä¸€ä¸ªæ— ç•Œé˜Ÿåˆ—ï¼Œä¸å­˜åœ¨æ‰©å®¹é—®é¢˜ã€‚</p><p>å¦‚æœè¦åœ¨é“¾è¡¨çš„ä¸­é—´æ·»åŠ æˆ–åˆ é™¤æ•°æ®ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦éå†é“¾è¡¨ï¼Œæ‰¾åˆ°æ“ä½œèŠ‚ç‚¹ã€‚å› ä¸ºé“¾è¡¨æ˜¯éè¿ç»­å†…å­˜ï¼Œæ— æ³•åƒæ•°ç»„é‚£æ ·ç›´æ¥æ ¹æ®ä¸‹æ ‡å¿«é€Ÿå®šä½åˆ°å†…å­˜åœ°å€ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¸‹æ ‡indexä¸º1çš„åé¢æ’å…¥æ–°çš„æ•°æ®ï¼Œå®ƒçš„æ“ä½œç¤ºä¾‹å›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/bd/92/bd79fd4b138507339412e3d325f53d92.jpg?wh=1920x1763\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘ä»¬ä»ä¸Šå¾€ä¸‹çœ‹ã€‚æ’å…¥æ–°èŠ‚ç‚¹çš„ç¬¬ä¸€æ­¥æ˜¯éœ€è¦ä»å¤´èŠ‚ç‚¹å¼€å§‹éå†ï¼Œæ‰¾åˆ°ä¸‹æ ‡ä¸ºi=1çš„èŠ‚ç‚¹ï¼Œç„¶ååœ¨è¯¥èŠ‚ç‚¹çš„åé¢æ’å…¥èŠ‚ç‚¹ï¼Œæœ€åæ‰§è¡Œæ’å…¥èŠ‚ç‚¹çš„é€»è¾‘ã€‚</p><p>æ’å…¥èŠ‚ç‚¹çš„å…·ä½“å®ç°ä¸»è¦æ˜¯ä¸ºäº†ç»´æŠ¤é“¾è¡¨ä¸­ç›¸å…³æ“ä½œèŠ‚ç‚¹çš„å‰é©±ä¸åç»§èŠ‚ç‚¹ã€‚</p><p>éå†é“¾è¡¨ã€æŸ¥è¯¢æ“ä½œèŠ‚ç‚¹çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç„¶ååŸºäºæ“ä½œèŠ‚ç‚¹è¿›è¡Œæ’å…¥ä¸åˆ é™¤åŠ¨ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p><p>å…³äºé“¾è¡¨çš„çŸ¥è¯†ç‚¹å°±è®²åˆ°è¿™é‡Œã€‚ç”±äºé“¾è¡¨ä¸æ•°ç»„æ˜¯æ•°æ®ç»“æ„ä¸­ä¸¤ç§æœ€åŸºæœ¬çš„å­˜å‚¨ç»“æ„ï¼Œä¸ºäº†è®©ä½ æ›´ç›´è§‚åœ°äº†è§£äºŒè€…çš„å·®å¼‚ï¼Œæˆ‘ä¹Ÿç»™ä½ ç”»äº†ä¸€ä¸ªè¡¨æ ¼ï¼Œå¯¹ä¸¤ç§æ•°æ®ç»“æ„åšäº†å¯¹æ¯”ï¼š</p><h2><img src=\"https://static001.geekbang.org/resource/image/26/32/267cd926d583043d2b1909byy2d37132.jpg?wh=1920x1028\" alt=\"å›¾ç‰‡\"></h2><h2>HashMap</h2><p>æ— è®ºæ˜¯é“¾è¡¨è¿˜æ˜¯æ•°ç»„éƒ½æ˜¯ä¸€ç»´çš„ï¼Œåœ¨ç°å®ä¸–ç•Œä¸­æœ‰ä¸€ç§å…³ç³»ä¹Ÿéå¸¸æ™®éï¼šå…³è”å…³ç³»ã€‚å…³è”å…³ç³»åœ¨è®¡ç®—æœºé¢†åŸŸä¸»è¦æ˜¯ç”¨é”®å€¼å¯¹æ¥å®ç°ï¼ŒHashMapå°±æ˜¯åŸºäºå“ˆå¸Œè¡¨Mapæ¥å£çš„å…·ä½“å®ç°ã€‚</p><p>JDK1.8ç‰ˆæœ¬ä¹‹å‰ï¼ŒHashMapçš„åº•å±‚å­˜å‚¨ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/7a/c8/7a0bdacf9de99f5ef3d064caa7f6ffc8.jpg?wh=1920x906\" alt=\"å›¾ç‰‡\"></p><p>HashMapçš„å­˜å‚¨ç»“æ„ä¸»ä½“æ˜¯å“ˆå¸Œæ§½ä¸é“¾è¡¨çš„ç»„åˆï¼Œç±»ä¼¼ä¸€ä¸ªæŠ½å±‰ã€‚</p><p>æˆ‘ä»¬å‘HashMapä¸­æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹ï¼Œç”¨è¿™ä¸ªä¾‹å­å¯¹HashMapçš„å­˜å‚¨ç»“æ„åšè¿›ä¸€æ­¥è¯´æ˜ã€‚</p><p>HashMapå†…éƒ¨æŒæœ‰ä¸€ä¸ªMap.Entry[]çš„æ•°ç»„ï¼Œä¿—ç§°å“ˆå¸Œæ§½ã€‚å½“æˆ‘ä»¬å¾€HashMapä¸­æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼ŒHashMapä¼šæ ¹æ®Keyçš„hashCodeä¸æ§½çš„æ€»æ•°è¿›è¡Œå–æ¨¡ï¼Œå¾—å‡ºæ§½çš„ä½ç½®(ä¹Ÿå°±æ˜¯æ•°ç»„çš„ä¸‹æ ‡)ï¼Œç„¶ååˆ¤æ–­æ§½ä¸­æ˜¯å¦å·²ç»å­˜å‚¨äº†æ•°æ®ã€‚å¦‚æœæœªå­˜å‚¨æ•°æ®ï¼Œåˆ™ç›´æ¥å°†å¾…æ·»åŠ çš„é”®å€¼å¯¹å­˜å…¥æŒ‡å®šçš„æ§½ï¼›å¦‚æœæ§½ä¸­å­˜åœ¨æ•°æ®ï¼Œé‚£å°±å°†æ–°çš„æ•°æ®åŠ å…¥æ§½å¯¹åº”çš„é“¾è¡¨ä¸­ï¼Œè§£å†³è¯¸å¦‚å“ˆå¸Œå†²çªçš„é—®é¢˜ã€‚</p><p>åœ¨HashMapä¸­ï¼Œå•ä¸ªé”®å€¼å¯¹ç”¨ä¸€ä¸ªMap.Entryç»“æ„è¡¨ç¤ºï¼Œå…·ä½“å­—æ®µä¿¡æ¯å¦‚ä¸‹ã€‚</p><ul>\n<li>K keyï¼šå­˜å‚¨çš„Keyï¼Œåç»­å¯ä»¥ç”¨è¯¥Keyè¿›è¡ŒæŸ¥æ‰¾</li>\n<li>V valueï¼šå­˜å‚¨çš„Valueï¼›</li>\n<li>int hashï¼šKeyçš„å“ˆå¸Œå€¼ï¼›</li>\n<li>Ma.Entry ï¼šnext é“¾è¡¨ã€‚</li>\n</ul><p>åˆ°è¿™é‡Œï¼Œä½ å¯ä»¥åœä¸‹æ¥æ€è€ƒä¸€ä¸‹ï¼Œå½“å“ˆå¸Œæ§½ä¸­å·²ç»å­˜åœ¨æ•°æ®æ—¶ï¼Œæ–°åŠ å…¥çš„å…ƒç´ æ˜¯å­˜å‚¨åœ¨é“¾è¡¨çš„å¤´éƒ¨è¿˜æ˜¯å°¾éƒ¨å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯æ”¾åœ¨å¤´éƒ¨ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">//å‡è®¾æ–°æ”¾å…¥çš„æ§½ä½ä¸‹æ ‡ç”¨ index è¡¨ç¤º,å“ˆå¸Œæ§½ç”¨ hashArray è¡¨ç¤º\nMap.Entry newEntry = new Map.Entry(key,value);\nnewEntry.next = hashArray[index];\nhashArray[index] = newEntry;\n</code></pre><p>æˆ‘ä»¬å°†æ–°å¢åŠ çš„å…ƒç´ æ”¾åˆ°é“¾è¡¨çš„å¤´éƒ¨ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥æ”¾åœ¨å“ˆå¸Œæ§½ä¸­ï¼Œç„¶åç”¨nextæŒ‡å‘åŸå…ˆå­˜åœ¨äºå“ˆå¸Œæ§½ä¸­çš„å…ƒç´ ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0b/c5/0b29590ca607556yyc816ff867313ac5.jpg?wh=1920x1041\" alt=\"å›¾ç‰‡\"></p><p>è¿™ç§æ–¹å¼çš„å¦™å¤„åœ¨äºï¼Œåªæ¶‰åŠä¸¤ä¸ªæŒ‡é’ˆçš„ä¿®æ”¹ã€‚å¦‚æœæˆ‘ä»¬æŠŠæ–°å¢åŠ çš„å…ƒç´ æ”¾å…¥é“¾è¡¨çš„å¤´éƒ¨ï¼Œé“¾è¡¨çš„å¤æ‚åº¦ä¸ºO(1)ã€‚ç›¸åï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ–°å…ƒç´ æ”¾åˆ°é“¾è¡¨çš„å°¾éƒ¨ï¼Œé‚£å°±éœ€è¦éå†æ•´æ¡é“¾è¡¨ï¼Œå†™å…¥å¤æ‚åº¦ä¼šæœ‰æ‰€æé«˜ï¼Œéšç€å“ˆå¸Œè¡¨ä¸­å­˜å‚¨çš„æ•°æ®è¶Šæ¥è¶Šå¤šï¼Œé‚£ä¹ˆæ–°å¢æ•°æ®çš„æ€§èƒ½å°†éšç€é“¾è¡¨é•¿åº¦çš„å¢åŠ è€Œé€æ­¥é™ä½ã€‚</p><p>ä»‹ç»å®Œæ·»åŠ å…ƒç´ ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…ƒç´ çš„æŸ¥æ‰¾æµç¨‹ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•æ ¹æ®KeyæŸ¥æ‰¾åˆ°æŒ‡å®šçš„é”®å€¼å¯¹ã€‚</p><p>é¦–å…ˆï¼Œè®¡ç®—Keyçš„hashCodeï¼Œç„¶åä¸å“ˆå¸Œæ§½æ€»æ•°è¿›è¡Œå–æ¨¡ï¼Œå¾—åˆ°å¯¹åº”å“ˆå¸Œæ§½ä¸‹æ ‡ã€‚</p><p>ç„¶åï¼Œè®¿é—®å“ˆå¸Œæ§½ä¸­å¯¹åº”ä½ç½®çš„æ•°æ®ã€‚å¦‚æœæ•°æ®ä¸ºç©ºï¼Œåˆ™è¿”å›â€œæœªæ‰¾åˆ°å…ƒç´ â€ã€‚å¦‚æœå“ˆå¸Œæ§½å¯¹åº”ä½ç½®çš„æ•°æ®ä¸ä¸ºç©ºï¼Œé‚£æˆ‘ä»¬å°±è¦åˆ¤æ–­Keyå€¼æ˜¯å¦åŒ¹é…äº†ã€‚å¦‚æœåŒ¹é…ï¼Œåˆ™è¿”å›å½“å‰æ•°æ®ï¼›å¦‚æœä¸åŒ¹é…ï¼Œåˆ™éœ€è¦éå†å“ˆå¸Œæ§½ï¼Œå¦‚æœéå†åˆ°é“¾è¡¨å°¾éƒ¨è¿˜æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•å…ƒç´ ï¼Œåˆ™è¿”å›â€œæœªæ‰¾åˆ°å…ƒç´ â€ã€‚</p><p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¸éš¾å¾—å‡ºè¿™æ ·ä¸€ä¸ªç»“è®ºï¼šå¦‚æœæ²¡æœ‰å‘ç”Ÿå“ˆå¸Œæ§½å†²çªï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ ¹æ®Keyå¯ä»¥ç›´æ¥å‘½ä¸­å“ˆå¸Œæ§½ä¸­çš„å…ƒç´ ï¼Œæ•°æ®è¯»å–è®¿é—®æ€§èƒ½éå¸¸é«˜ã€‚ä½†å¦‚æœéœ€è¦ä»é“¾è¡¨ä¸­æŸ¥æ‰¾æ•°æ®ï¼Œåˆ™æ€§èƒ½ä¸‹é™éå¸¸æ˜æ˜¾ï¼Œæ—¶é—´å¤æ‚åº¦å°†ä»O(1)æå‡åˆ°O(n)ï¼Œè¿™å¯¹æŸ¥æ‰¾æ¥è¯´å°±æ˜¯ä¸€ä¸ªâ€œå™©æ¢¦â€ã€‚</p><p>ä¸€æ—¦å‡ºç°è¿™ç§æƒ…å†µï¼ŒHashMapçš„ç»“æ„ä¼šå˜æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ae/80/ae0cc399328f69c6af771efc396bec80.jpg?wh=1920x624\" alt=\"å›¾ç‰‡\"></p><p>æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼ŸJDKçš„è®¾è®¡è€…ä»¬ç»™å‡ºäº†ä¸¤ç§ä¼˜åŒ–ç­–ç•¥ã€‚</p><p>ç¬¬ä¸€ç§ï¼Œå¯¹Hashæ§½è¿›è¡Œæ‰©å®¹ï¼Œè®©æ•°æ®å°½å¯èƒ½åˆ†å¸ƒåˆ°å“ˆå¸Œæ§½ä¸Šï¼Œä½†ä¸èƒ½è§£å†³å› ä¸ºå“ˆå¸Œå†²çªå¯¼è‡´çš„é“¾è¡¨å˜é•¿çš„é—®é¢˜ã€‚</p><p>ç¬¬äºŒç§ï¼Œå½“é“¾è¡¨è¾¾åˆ°æŒ‡å®šé•¿åº¦åï¼Œå°†é“¾è¡¨ç»“æ„è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œæå‡æ£€ç´¢æ€§èƒ½(JDK8å¼€å§‹å¼•å…¥)ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥é€šè¿‡æºç æ·±å…¥æ¢ç©¶ä¸€ä¸‹HashMapçš„æ‰©å®¹æœºåˆ¶ã€‚HashMapçš„æ‰©å®¹æœºåˆ¶ç”±resizeæ–¹æ³•å®ç°ï¼Œè¯¥æ–¹æ³•ä¸»è¦åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸ŠåŠéƒ¨åˆ†å¤„ç†åˆå§‹åŒ–æˆ–æ‰©å®¹å®¹é‡è®¡ç®—ï¼Œä¸‹åŠéƒ¨åˆ†å¤„ç†æ‰©å®¹åçš„æ•°æ®å¤åˆ¶(é‡æ–°å¸ƒå±€)ã€‚</p><p>ä¸ŠåŠéƒ¨åˆ†çš„å…·ä½“æºç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\"> &nbsp; &nbsp;/**\n &nbsp; &nbsp; * Initializes or doubles table size.  If null, allocates in\n &nbsp; &nbsp; * accord with initial capacity target held in field threshold.\n &nbsp; &nbsp; * Otherwise, because we are using power-of-two expansion, the\n &nbsp; &nbsp; * elements from each bin must either stay at same index, or move\n &nbsp; &nbsp; * with a power of two offset in the new table.\n &nbsp; &nbsp; *\n &nbsp; &nbsp; * @return the table\n &nbsp; &nbsp; */\n &nbsp; &nbsp;final Node&lt;K,V&gt;[] resize() {\n &nbsp; &nbsp; &nbsp; &nbsp;Node&lt;K,V&gt;[] oldTab = table;\n &nbsp; &nbsp; &nbsp; &nbsp;int oldCap = (oldTab == null) ? 0 : oldTab.length;\n &nbsp; &nbsp; &nbsp; &nbsp;int oldThr = threshold;\n &nbsp; &nbsp; &nbsp; &nbsp;int newCap, newThr = 0;\n &nbsp; &nbsp; &nbsp; &nbsp;if (oldCap &gt; 0) {\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (oldCap &gt;= MAXIMUM_CAPACITY) {\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;threshold = Integer.MAX_VALUE;\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return oldTab;\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp;\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY)\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;newThr = oldThr &lt;&lt; 1; // double threshold\n &nbsp; &nbsp; &nbsp;  }\n &nbsp; &nbsp; &nbsp; &nbsp;else if (oldThr &gt; 0) // initial capacity was placed in threshold\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;newCap = oldThr;\n &nbsp; &nbsp; &nbsp; &nbsp;else { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // zero initial threshold signifies using defaults\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;newCap = DEFAULT_INITIAL_CAPACITY;\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);\n &nbsp; &nbsp; &nbsp;  }\n &nbsp; &nbsp; &nbsp; &nbsp;if (newThr == 0) {\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;float ft = (float)newCap * loadFactor;\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ?\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  (int)ft : Integer.MAX_VALUE);\n &nbsp; &nbsp; &nbsp;  }\n &nbsp; &nbsp; &nbsp; &nbsp;threshold = newThr;\n &nbsp; &nbsp; &nbsp; &nbsp;@SuppressWarnings({\"rawtypes\",\"unchecked\"})\n &nbsp; &nbsp; &nbsp; &nbsp;Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap];\n &nbsp; &nbsp; &nbsp; &nbsp;table = newTab;\n &nbsp; &nbsp; &nbsp;//æ­¤å¤„çœç•¥æ•°æ®å¤åˆ¶ç›¸å…³ä»£ç \n &nbsp;  }\n</code></pre><p>ä¸ºäº†æ–¹ä¾¿ä½ å¯¹ä»£ç è¿›è¡Œç†è§£ï¼Œæˆ‘ç”»äº†ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„æµç¨‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/31/47/312f3caa99e8563c26b21038d2222347.jpg?wh=1920x1259\" alt=\"å›¾ç‰‡\"></p><p>æ€»ç»“ä¸€ä¸‹æ‰©å®¹çš„è¦ç‚¹ã€‚</p><ul>\n<li>HashMapçš„å®¹é‡å¹¶æ— é™åˆ¶ï¼Œä½†è¶…è¿‡2çš„30æ¬¡å¹‚åä¸å†æ‰©å®¹å“ˆå¸Œæ§½ã€‚</li>\n<li>å“ˆå¸Œæ§½æ˜¯æŒ‰å€æ•°æ‰©å®¹çš„ã€‚</li>\n<li>HashMapåœ¨ä¸æŒ‡å®šå®¹é‡æ—¶ï¼Œé»˜è®¤åˆå§‹å®¹é‡ä¸º16ã€‚</li>\n</ul><p>HashMapå¹¶ä¸æ˜¯åœ¨æ— å®¹é‡å¯ç”¨çš„æ—¶å€™æ‰æ‰©å®¹ã€‚å®ƒä¼šå…ˆè®¾ç½®ä¸€ä¸ªæ‰©å®¹ä¸´ç•Œå€¼ï¼Œå½“HashMapä¸­çš„å­˜å‚¨çš„æ•°æ®é‡è¾¾åˆ°è®¾ç½®çš„é˜”å€¼æ—¶å°±è§¦å‘æ‰©å®¹ï¼Œè¿™ä¸ªé˜”å€¼ç”¨thresholdè¡¨ç¤ºã€‚</p><p>æˆ‘ä»¬è¿˜å¼•å…¥äº†ä¸€ä¸ªå˜é‡loadFactoræ¥è®¡ç®—é˜”å€¼ï¼Œé˜”å€¼=å®¹é‡*loadFactorã€‚å…¶ä¸­ï¼ŒloadFactorè¡¨ç¤ºåŠ è½½å› å­ï¼Œé»˜è®¤ä¸º0.75ã€‚</p><p>åŠ è½½å› å­çš„å¼•å…¥ä¸HashMapå“ˆå¸Œæ§½çš„å­˜å‚¨ç»“æ„ä¸å­˜å‚¨ç®—æ³•æœ‰å…³ã€‚</p><p>HashMapåœ¨å‡ºç°å“ˆå¸Œå†²çªæ—¶ï¼Œä¼šå¼•å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œå½¢æˆâ€œæ•°ç»„+é“¾è¡¨â€çš„å­˜å‚¨ç»“æ„ã€‚è¿™å¸¦æ¥çš„æ•ˆæœå°±æ˜¯ï¼Œå¦‚æœHashMapæœ‰32ä¸ªå“ˆå¸Œæ§½ï¼Œå½“å‰å­˜å‚¨çš„æ•°æ®ä¹Ÿåˆšå¥½æœ‰32ä¸ªï¼Œè¿™äº›æ•°æ®å´ä¸ä¸€å®šå…¨ä¼šè½åœ¨å“ˆå¸Œæ§½ä¸­ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨hashå€¼ä¸€æ ·ä½†æ˜¯ä¸åŒKeyçš„æ•°æ®ï¼Œè¿™æ—¶ï¼Œæ•°æ®å°±ä¼šè¿›å…¥åˆ°é“¾è¡¨ä¸­ã€‚</p><p>å‰é¢æˆ‘ä»¬ä¹Ÿæåˆ°è¿‡ï¼Œæ•°æ®æ”¾å…¥é“¾è¡¨å°±å®¹æ˜“å¼•èµ·æŸ¥æ‰¾æ€§èƒ½çš„ä¸‹é™ï¼Œæ‰€ä»¥ï¼Œ<strong>HashMapçš„è®¾è®¡è€…ä¸ºäº†å°†æ•°æ®å°½å¯èƒ½åœ°å­˜å‚¨åˆ°å“ˆå¸Œæ§½ä¸­ï¼Œä¼šæå‰è¿›è¡Œæ‰©å®¹ï¼Œç”¨æ›´å¤šçš„ç©ºé—´æ¢æ¥æ£€ç´¢æ€§èƒ½çš„æé«˜</strong>ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æ‰©å®¹çš„ä¸‹åŠéƒ¨åˆ†ä»£ç ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¿™æ®µä»£ç ï¼š</p><pre><code class=\"language-java\">@SuppressWarnings({\"rawtypes\",\"unchecked\"})\nNode&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap];\ntable = newTab;\nif (oldTab != null) {\n    for (int j = 0; j &lt; oldCap; ++j) {\n        Node&lt;K,V&gt; e;\n        if ((e = oldTab[j]) != null) {\n            oldTab[j] = null;\n            if (e.next == null)\n                newTab[e.hash &amp; (newCap - 1)] = e;\n            else if (e instanceof TreeNode)\n                ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap);\n            else { // preserve order\n                Node&lt;K,V&gt; loHead = null, loTail = null;\n                Node&lt;K,V&gt; hiHead = null, hiTail = null;\n                Node&lt;K,V&gt; next;\n                do {\n                    next = e.next;\n                    if ((e.hash &amp; oldCap) == 0) {\n                        if (loTail == null)\n                            loHead = e;\n                        else\n                            loTail.next = e;\n                        loTail = e;\n                    }\n                    else {\n                        if (hiTail == null)\n                            hiHead = e;\n                        else\n                            hiTail.next = e;\n                        hiTail = e;\n                    }\n                } while ((e = next) != null);\n                if (loTail != null) {\n                    loTail.next = null;\n                    newTab[j] = loHead;\n                }\n                if (hiTail != null) {\n                    hiTail.next = null;\n                    newTab[j + oldCap] = hiHead;\n                }\n            }\n        }\n    }\n}\n</code></pre><p>è¿™æ®µä»£ç ä¸éš¾ç†è§£ï¼Œå°±æ˜¯æŒ‰ç…§æ‰©å®¹åçš„å®¹é‡åˆ›å»ºä¸€ä¸ªæ–°çš„å“ˆå¸Œæ§½æ•°ç»„ï¼Œéå†åŸå…ˆçš„å“ˆå¸Œæ§½(æ•°ç»„)ï¼Œç„¶åå°†æ•°æ®é‡æ–°æ”¾å…¥åˆ°æ–°çš„å“ˆå¸Œæ§½ä¸­ï¼Œä¸ºäº†ä¿è¯é“¾è¡¨ä¸­æ•°æ®çš„é¡ºåºæ€§ï¼Œåœ¨æ‰©å®¹æ—¶é‡‡ç”¨å°¾æ’æ³•ã€‚</p><p>é™¤äº†æ‰©å®¹ï¼ŒJDK8ä¹‹åçš„ç‰ˆæœ¬è¿˜æœ‰å¦å¤–ä¸€ç§æå‡æ£€ç´¢èƒ½åŠ›çš„æªæ–½ï¼Œé‚£å°±æ˜¯åœ¨é“¾è¡¨é•¿åº¦è¶…è¿‡8æ—¶ï¼Œå°†é“¾è¡¨æ¼”å˜ä¸º<strong>çº¢é»‘æ ‘</strong>ã€‚è¿™æ—¶çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(2lgN)ï¼Œå¯ä»¥æœ‰æ•ˆæå‡æ•ˆç‡ã€‚</p><p>å…³äºçº¢é»‘æ ‘ï¼Œæˆ‘ä¼šåœ¨ä¸‹èŠ‚è¯¾è¯¦ç»†ä»‹ç»ã€‚</p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä»‹ç»äº†æ•°ç»„ã€ArrayListã€LinkedListã€HashMapè¿™å‡ ç§æ•°æ®ç»“æ„ã€‚</p><p>æ•°ç»„ï¼Œç”±äºå…¶å†…å­˜çš„è¿ç»­æ€§ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼é«˜æ•ˆéšæœºåœ°è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ã€‚</p><p>æ•°ç»„ä¸é“¾è¡¨å¯ä»¥è¯´æ˜¯æ•°æ®ç»“æ„ä¸­ä¸¤ç§æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼Œè¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬è¯¦ç»†å¯¹æ¯”äº†ä¸¤ç§æ•°æ®ç»“æ„çš„å­˜å‚¨ç‰¹æ€§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/26/32/267cd926d583043d2b1909byy2d37132.jpg?wh=1920x1028\" alt=\"å›¾ç‰‡\"></p><p>å“ˆå¸Œè¡¨æ˜¯æˆ‘ä»¬ä½¿ç”¨å¾—æœ€å¤šçš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„åº•å±‚çš„è®¾è®¡ä¹Ÿå¾ˆå…·æŠ€å·§æ€§ã€‚å“ˆå¸Œè¡¨å……åˆ†è€ƒè™‘åˆ°æ•°ç»„ä¸é“¾è¡¨çš„ä¼˜åŠ£ï¼Œæ‰¬é•¿é¿çŸ­ï¼ŒHashMapå°±æ˜¯è¿™ä¸¤è€…çš„ç»„åˆä½“ã€‚ä¸ºäº†è§£å†³é“¾è¡¨æ£€ç´¢æ€§èƒ½ä½ä¸‹çš„é—®é¢˜ï¼ŒHashMapå†…éƒ¨åˆå¼•å…¥äº†æ‰©å®¹ä¸é“¾è¡¨æ ‘åŒ–ä¸¤ç§æ–¹å¼è¿›è¡Œæ€§èƒ½æå‡ï¼Œæé«˜äº†ä½¿ç”¨çš„ä¾¿åˆ©æ€§ï¼Œé™ä½äº†ä½¿ç”¨é—¨æ§›ã€‚</p><h2>è¯¾åé¢˜</h2><p>æœ€åï¼Œæˆ‘ä¹Ÿç»™ä½ ç•™ä¸¤é“æ€è€ƒé¢˜å§ï¼</p><p>1ã€ä¸šç•Œåœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶é™¤äº†ä½¿ç”¨é“¾è¡¨å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä»€ä¹ˆæ–¹æ¡ˆï¼Ÿè¯·ä½ å¯¹è¿™ä¸¤è€…çš„å·®å¼‚è¿›è¡Œç®€å•çš„å¯¹æ¯”ã€‚</p><p>2ã€HashMapä¸­å“ˆå¸Œæ§½çš„å®¹é‡ä¸ºä»€ä¹ˆå¿…é¡»ä¸º2çš„å€æ•°ï¼Ÿå¦‚æœä¸æ˜¯å¾ˆç†è§£ï¼Œæ¨èä½ å…ˆå­¦ä¹ ä¸€ä¸‹ä½è¿ç®—ï¼Œç„¶ååœ¨ç•™è¨€åŒºå‘Šè¯‰æˆ‘ä½ çš„ç­”æ¡ˆã€‚</p><p>æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","neighbors":{"left":{"article_title":"02ï½œä¸­é—´ä»¶ç”Ÿæ€ï¼ˆä¸‹ï¼‰ï¼šåŒç±»å‹çš„ä¸­é—´ä»¶å¦‚ä½•è¿›è¡Œé€‰å‹ï¼Ÿ","id":528224},"right":{"article_title":"04 | çº¢é»‘æ ‘ï¼šå›¾è§£çº¢é»‘æ ‘çš„æ„é€ è¿‡ç¨‹ä¸åº”ç”¨åœºæ™¯","id":530329}},"comments":[{"had_liked":false,"id":349968,"user_name":"è‹œè“¿Â°","can_delete":false,"product_type":"c1","uid":2725667,"ip_address":"","ucode":"BEEDCB2B88363A","user_header":"https://static001.geekbang.org/account/avatar/00/29/97/23/9c9bd0d4.jpg","comment_is_top":true,"comment_ctime":1656474151,"is_pvip":false,"replies":[{"id":127694,"content":"æ„Ÿè°¢ä½ çš„åˆ†äº«ï¼Œè¿™ä¸ªå¿…é¡»å¾—ğŸ”","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2348391,"ctime":1657468510,"ip_address":"","comment_id":349968,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"é—®é¢˜1\n\tç½‘ä¸Šæ‰¾å¯»èµ„æ–™å­¦ä¹ äº†ä¸€ä¸‹:\n\t\t(1) å¼€æ”¾å®šå€æ³•\n\t\t\tâ‘ çº¿æ€§æ¢æµ‹æ³•\n\t\t\tå®ç°è¿‡ç¨‹ï¼šå½“æˆ‘ä»¬çš„æ‰€éœ€è¦å­˜æ”¾å€¼çš„ä½ç½®è¢«å äº†ï¼Œæˆ‘ä»¬å°±å¾€åé¢ä¸€ç›´åŠ 1å¹¶å¯¹må–æ¨¡ç›´åˆ°å­˜åœ¨ä¸€ä¸ªç©ºä½™çš„åœ°å€ä¾›æˆ‘ä»¬å­˜æ”¾å€¼ï¼Œå–æ¨¡æ˜¯ä¸ºäº†ä¿è¯æ‰¾åˆ°çš„ä½ç½®åœ¨0~m-1çš„æœ‰æ•ˆç©ºé—´ä¹‹ä¸­ã€‚\n\t\t\tå…¬å¼ï¼šh(x)=(Hash(x)+i)mod (Hashtable.length);ï¼ˆiä¼šé€æ¸é€’å¢åŠ 1ï¼‰\n\t\t\tå­˜åœ¨é—®é¢˜ï¼šå‡ºç°éåŒä¹‰è¯å†²çªï¼ˆä¸¤ä¸ªä¸ç›¸åŒçš„å“ˆå¸Œå€¼ï¼ŒæŠ¢å åŒä¸€ä¸ªåç»­çš„å“ˆå¸Œåœ°å€ï¼‰è¢«ç§°ä¸ºå †ç§¯ï¼ˆèšé›†ï¼‰ç°è±¡\n\t\t\tâ‘¡å¹³æ–¹æ¢æµ‹æ³•ï¼ˆäºŒæ¬¡æ¢æµ‹ï¼‰\n\t\t\tå®ç°è¿‡ç¨‹ï¼š å½“æˆ‘ä»¬çš„æ‰€éœ€è¦å­˜æ”¾å€¼çš„ä½ç½®è¢«å äº†ï¼Œä¼šå‰åå¯»æ‰¾è€Œä¸æ˜¯å•ç‹¬æ–¹å‘çš„å¯»æ‰¾\n\t\t\tå…¬å¼ï¼šh(x)=(Hash(x) +i)mod (Hashtable.length);ï¼ˆiä¾æ¬¡ä¸º+(i^2)å’Œ-(i^2)ï¼‰\n\t\t\tå­˜åœ¨é—®é¢˜ï¼šç›¸æ¯”çº¿æ€§æ¢æµ‹å‡å°‘æ‰¾å¯»æ—¶é—´ï¼Œä½†ä¸ä¼šå‡å°‘å †ç§¯ï¼ˆèšé›†ï¼‰ç°è±¡\n\t\tï¼ˆ2ï¼‰å†å“ˆå¸Œæ³•\n\t\t\tå®ç°è¿‡ç¨‹ï¼šåŒæ—¶æ„é€ å¤šä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ï¼Œç­‰å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶å°±ä½¿ç”¨ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªâ€¦â€¦ç­‰å…¶ä»–çš„å“ˆå¸Œå‡½æ•°è®¡ç®—åœ°å€ï¼Œç›´åˆ°ä¸å‘ç”Ÿå†²çªä¸ºæ­¢\n\t\t\tå­˜åœ¨é—®é¢˜ï¼šä¸æ˜“å‘ç”Ÿèšé›†ï¼Œä½†æ˜¯å¢åŠ äº†è®¡ç®—æ—¶é—´\n\t\tï¼ˆ3ï¼‰å»ºç«‹å…¬å…±æº¢å‡ºåŒº\n\t\t\tå®ç°è¿‡ç¨‹ï¼šå°†å“ˆå¸Œè¡¨åˆ†ä¸ºåŸºæœ¬è¡¨å’Œæº¢å‡ºè¡¨ï¼Œå°†å‘ç”Ÿå†²çªçš„éƒ½å­˜æ”¾åœ¨æº¢å‡ºè¡¨ä¸­\n\t\t\tå­˜åœ¨é—®é¢˜ï¼šéœ€è¦å®æ—¶åŠ¨æ€ç»´æŠ¤ä¸¤å¼ å“ˆå¸Œè¡¨","like_count":14,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579474,"discussion_content":"æ„Ÿè°¢ä½ çš„åˆ†äº«ï¼Œè¿™ä¸ªå¿…é¡»å¾—ğŸ”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657468510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349174,"user_name":"æœ«æ—¥ï¼Œæˆæ¬¢","can_delete":false,"product_type":"c1","uid":1812201,"ip_address":"ä¸Šæµ·","ucode":"BBAEBB9C93558A","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLm8skz4F7FGGBTXWUMia6qVEc00BddeXapicv5FkAx62GmOnUNEcE4scSR60AmappQoNdIQhccKsBA/132","comment_is_top":false,"comment_ctime":1655782079,"is_pvip":false,"replies":[{"id":130055,"content":"è¶…çº§ğŸ‘ï¼Œè®²çœŸï¼Œæ˜¯çš„HashMapä¸­é‚£ä¸ªhashç®—æ³•ï¼Œä¸ºä»€ä¹ˆèƒ½è®©å€¼æ›´æ•£åˆ—ï¼Œå…¶å®æˆ‘è¿˜æ²¡ç†è§£ï¼Œä¹Ÿå¸Œæœ›ä½ å’Œæˆ‘å…³äºè¿™ä¸ªé—®é¢˜è¿›è¡Œä¸€æ­¥æ²Ÿé€šï¼ŒğŸ™","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2348391,"ctime":1663169848,"ip_address":"ä¸Šæµ·","comment_id":349174,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"HashMap ä¸­å“ˆå¸Œæ§½çš„å®¹é‡ä¸ºä»€ä¹ˆå¿…é¡»ä¸º 2 çš„å€æ•°ï¼Ÿ\n\nå½“æˆ‘ä»¬è®¡ç®—keyçš„ç´¢å¼•ä¸‹æ ‡æ—¶ï¼Œ é€šè¿‡ä¼šå¯¹keyçš„å“ˆå¸Œç å¯¹æ•°ç»„å–æ¨¡è¿ç®—æ¥è®¡ç®—å‡ºä¸‹æ ‡å€¼ã€‚\n\nè€ŒJAVAä¸­çš„å¤§ç¥å¯¹å–æ¨¡è¿ç®—åˆè¿›è¡Œäº†ä¸€æ¬¡ä¼˜åŒ–ã€‚ å°†å–æ¨¡è¿ç®—ä¼˜åŒ–ä¸ºä¸è¿ç®—ã€‚\n\nä¸ºä»€ä¹ˆèƒ½è¢«ä¼˜åŒ–ä¸ºä¸è¿ç®—å‘¢ï¼Ÿ\n\nä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š hashcodeä¸º11,æ•°ç»„å®¹é‡ä¸º4ã€‚ æˆ‘ä»¬çŸ¥é“å¯¹äº2çš„næ¬¡æ–¹ä¸€å®šèƒ½æ•´é™¤2çš„n-1æ¬¡æ–¹ã€‚\n\n11å¯¹8å–æ¨¡ï¼Œè·å–å®ƒçš„ä½™æ•°,ä¹Ÿå°±æ˜¯å®ƒçš„ä¸‹æ ‡å€¼ã€‚ \n\nè½¬åŒ–ä¸ºäºŒè¿›åˆ¶1011 % 0100, ä¹Ÿå°±æ˜¯1011&#47;0100, å› ä¸º2çš„næ¬¡æ–¹ä¸€å®šèƒ½æ•´é™¤2çš„n-1æ¬¡æ–¹çš„ç¼˜æ•…ï¼Œé«˜ä½ç›´æ¥èˆå¼ƒã€‚ \n\nå…¶ä½™çš„æ— æ³•è¢«æ•´æ•°çš„ä¹Ÿå°±æ˜¯å®ƒçš„ä½™æ•°ï¼Œå®ƒçš„ä½ä½å°±æ˜¯å®ƒçš„ä½™æ•°ï¼Œ è·å–å®ƒçš„ä½ä½å°±å¯ä»¥é€šè¿‡x011&amp;(0100-1)=&gt;ä¹Ÿå°±æ˜¯hash &amp; (n-1),èƒ½æ¨å¯¼å‡ºè¿™ä¸ªå…¬å¼æ˜¯å»ºç«‹åœ¨æ•°ç»„çš„å®¹é‡æ˜¯2çš„å€æ•°çš„å‰æä¸Šã€‚\n\nä¸ºä»€ä¹ˆè¦ä¼˜åŒ–ä¸ºä¸è¿ç®—å‘¢ï¼Ÿ\n\næˆ‘çš„çŒœæƒ³ï¼Œè®¡ç®—æœºå¯¹äºä¸è¿ç®—çš„æŒ‡ä»¤æ¯”å–æ¨¡è¿ç®—çš„æŒ‡ä»¤è¦å°‘çš„å¤šï¼Œ æ•…ä¸è¿ç®—è¦é«˜æ•ˆçš„å¤šã€‚\n\næœ€åï¼Œæˆ‘è¿˜æƒ³å†è¯´ä¸€ä¸ªkeyè·å–å“ˆå¸Œå€¼çš„ä¼˜åŒ–ã€‚\n\næˆ‘ä»¬çŸ¥é“ï¼Œç”Ÿæˆå“ˆå¸Œå€¼çš„åŸåˆ™å°±æ˜¯è¦å°½é‡è®©æ‰€æœ‰çš„å…ƒç´ éƒ½å‚ä¸åˆ°è®¡ç®—ã€‚\n\nkeyè·å–å“ˆå¸Œå€¼ï¼Œ å¹¶ä¸æ˜¯ç®€å•çš„ç›´æ¥è·å–å“ˆå¸Œç ï¼Œ è€Œæ˜¯è¯¥keyçš„å“ˆå¸Œå€¼é«˜ä½16ä½å†ä¸€æ¬¡åˆè¿›è¡Œäº†å¼‚æˆ–è¿ç®—ï¼Œè¿™æ ·å°±å¯ä»¥è®©å“ˆå¸Œå€¼å†æ¬¡å˜åŒ–ã€‚\n\nå…¶å®ä¹Ÿå¯ä»¥ä¸å˜åŒ–çš„ï¼Œä½†æ˜¯å¯¹äºèµ·å§‹å®¹é‡æ¯”è¾ƒå°ï¼Œå¤§é‡çš„å…ƒç´ å¦‚æœä½ä½éƒ½ç›¸åŒï¼Œå°±å¯èƒ½ä¼šé€ æˆå¤§é‡çš„å“ˆå¸Œå†²çªã€‚ \n\nè€Œå†ä¸€æ¬¡è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼Œ å³ä½¿ç›¸åŒçš„ä½ä½ä¹Ÿå¯ä»¥å†æ¬¡å˜åŒ–ï¼Œ å‡å°hashå†²çªã€‚\n","like_count":10,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587628,"discussion_content":"è¶…çº§ğŸ‘ï¼Œè®²çœŸï¼Œæ˜¯çš„HashMapä¸­é‚£ä¸ªhashç®—æ³•ï¼Œä¸ºä»€ä¹ˆèƒ½è®©å€¼æ›´æ•£åˆ—ï¼Œå…¶å®æˆ‘è¿˜æ²¡ç†è§£ï¼Œä¹Ÿå¸Œæœ›ä½ å’Œæˆ‘å…³äºè¿™ä¸ªé—®é¢˜è¿›è¡Œä¸€æ­¥æ²Ÿé€šï¼ŒğŸ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663169848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350184,"user_name":"è”«å·´çš„å°ç™½èœ","can_delete":false,"product_type":"c1","uid":1053509,"ip_address":"","ucode":"2B8A6134675ED7","user_header":"https://static001.geekbang.org/account/avatar/00/10/13/45/16c60da2.jpg","comment_is_top":false,"comment_ctime":1656641231,"is_pvip":false,"replies":[{"id":127693,"content":"ç†è§£çš„éå¸¸åˆ°ä½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2348391,"ctime":1657468424,"ip_address":"","comment_id":350184,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"hashmapï¼Œå®¹é‡è®¾è®¡æˆ2çš„æ•´æ•°å¹‚ï¼Œæˆ‘ç†è§£æœ‰ä¸¤ç‚¹ï¼š\n1.å°±æ˜¯è®¾è®¡æˆ2æ•´æ•°å¹‚å¯ä»¥åˆ©ç”¨ä½è¿ç®—çš„é«˜æ•ˆï¼Œå¿«é€Ÿæ‰¾åˆ°ä¸‹æ ‡ã€‚\n2.ä¸ºäº†æ‰©å®¹æ¬è¿å…ƒç´ æ–¹ä¾¿ï¼Œå°äºä¹‹å‰sizeçš„å…ƒç´ ï¼Œå¯ä»¥ç›´æ¥æ¬è¿åˆ°æ–°sizeçš„åŸå§‹ä½ç½®ï¼Œè€Œè¶…è¿‡åŸå§‹sizeçš„å…ƒç´ ï¼Œåªéœ€è¦ä¸‹æ ‡åŠ ä¸ŠåŸå§‹sizeå³å¯ï¼Œå®æˆ˜äº†é«˜æ•ˆçš„æ‰©å®¹å…ƒç´ è¿ç§»ã€‚","like_count":4,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579473,"discussion_content":"ç†è§£çš„éå¸¸åˆ°ä½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657468425,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1748871,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/xV5ChOHDo5XXX9YQB2rJCLb2xKPQFNk6UiclaPAcotlEWqzbd59VyfoJRRNuJGpOpZJbLQtS6XFADa415zfelGQ/132","nickname":"é™ˆæ ‡","note":"","ucode":"88BAB54D271072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578867,"discussion_content":"å¯ä»¥ç›´æ¥æ¬è¿åˆ°æ–°sizeçš„åŸå§‹ä½ç½® æ²¡ç†è§£ ä¸åº”è¯¥é‡æ–°è¿›è¡Œå–æ¨¡å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657072149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348821,"user_name":"ç‹¬è‡ªç­‰å¾…","can_delete":false,"product_type":"c1","uid":1150293,"ip_address":"","ucode":"51469EF7620D89","user_header":"https://static001.geekbang.org/account/avatar/00/11/8d/55/1345dff3.jpg","comment_is_top":false,"comment_ctime":1655437714,"is_pvip":false,"replies":[{"id":127055,"content":"è°¢è°¢è®¤å¯ï¼Œå¤šå¤šäº¤æµ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2348391,"ctime":1655732577,"ip_address":"","comment_id":348821,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"RocketMQè¿™å—çš„åˆ†æè¿˜å¯ä»¥","like_count":0,"discussions":[{"author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576680,"discussion_content":"è°¢è°¢è®¤å¯ï¼Œå¤šå¤šäº¤æµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655732577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2725667,"avatar":"https://static001.geekbang.org/account/avatar/00/29/97/23/9c9bd0d4.jpg","nickname":"è‹œè“¿Â°","note":"","ucode":"BEEDCB2B88363A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2348391,"avatar":"https://static001.geekbang.org/account/avatar/00/23/d5/67/54efabd8.jpg","nickname":"ä¸­é—´ä»¶å…´è¶£åœˆ","note":"","ucode":"EFC2384D08600E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":578028,"discussion_content":"æ˜¯çœŸæ»´æ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656474322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":576680,"ip_address":"","group_id":0},"score":578028,"extra":""}]},{"author":{"id":1029285,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b4/a5/396268e5.jpg","nickname":"æ­»è€…è‹ç”Ÿ","note":"","ucode":"830E0483DE52A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576646,"discussion_content":"æ¯•ç«Ÿrocketmqå¸ƒé“å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655724232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395384,"user_name":"Zero","can_delete":false,"product_type":"c1","uid":1236704,"ip_address":"æ±Ÿè‹","ucode":"ECFBACFAD95D7F","user_header":"https://static001.geekbang.org/account/avatar/00/12/de/e0/64e555ae.jpg","comment_is_top":false,"comment_ctime":1730543970,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"ArrayListä¸LinkedListçš„å¯¹æ¯”å›¾ä¸­ï¼ŒArrayListä¸­çš„æ•°ç»„æ˜¯ä»¥1.5å€è¿›è¡Œæ‰©å®¹çš„å§ï¼Œå›¾ä¸­æ ‡é”™äº†","like_count":0},{"had_liked":false,"id":351116,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1657531648,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"åˆ†æåˆ°ä½ å›¾æ ‡å¾ˆæ£’","like_count":0},{"had_liked":false,"id":350700,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1657101542,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"https:&#47;&#47;time.geekbang.org&#47;column&#47;article&#47;64586\næ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾\n\nå¯¹ç…§ç€å­¦ä¹ ï½ï½","like_count":0},{"had_liked":false,"id":349692,"user_name":"Geek_xbye50","can_delete":false,"product_type":"c1","uid":1006424,"ip_address":"","ucode":"0BF3780C247F22","user_header":"","comment_is_top":false,"comment_ctime":1656231652,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":2,"product_id":100114001,"comment_content":"hashmap1.8ä¹‹å‰é‡‡ç”¨å¤´æ’æ³•çš„è§£é‡Šå¾ˆç‰µå¼ºå•Šï¼é€šè¿‡å¤æ‚åº¦æ¯”è¾ƒçš„è¯å¤´å°¾ä¸éƒ½æ˜¯O(1)","like_count":0,"discussions":[{"author":{"id":3030678,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/y7jIeEicicdVXjNQhenrFGV5PzQenPxq2Dia8aCnszqthknibBo0xFBekCtdFRA8rBBneT0yHkhIY3f48NGTTNZZkQ/132","nickname":"Geek_0d7e31","note":"","ucode":"E146F218CF53B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594607,"discussion_content":"ä¸æ˜¯çš„å“¦ï¼Œå°±æ–‡ç« çš„å›¾ä¾‹æå†™è€Œè¨€ï¼Œlinkenlisté‡‡ç”¨çš„æ˜¯åŒå‘é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰éƒ½ä¼šè®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œåä¸€ä¸ªèŠ‚ç‚¹çš„å­˜å‚¨åœ°å€ï¼Œä½†æ˜¯hashmap1.8ä¹‹å‰é‡‡ç”¨çš„æ˜¯å•å‘é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªä¼šè®°å½•åä¸€ä¸ªèŠ‚ç‚¹çš„å­˜å‚¨åœ°å€ï¼Œå¦‚æœé‡‡ç”¨å°¾æ’æ³•çš„è¯å¾—éå†æ•´ä¸ªé“¾è¡¨æ‰èƒ½æ‰¾åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ä½ç½®ï¼Œæ•…æ—¶é—´å¤æ‚åº¦ä¸ºO(n)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669204830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1030082,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b7/c2/196932c7.jpg","nickname":"å—ç›ä¸€æ¢¦","note":"","ucode":"6338D5428DB2B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578159,"discussion_content":"è¿™éƒ½æ˜¯è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼Œç›¸å…³åˆ†æèµ„æ–™éå¸¸å¤šï¼Œçœ‹çœ‹çŸ¥é“å°±è¡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656550391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1006424,"avatar":"","nickname":"Geek_xbye50","note":"","ucode":"0BF3780C247F22","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1030082,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b7/c2/196932c7.jpg","nickname":"å—ç›ä¸€æ¢¦","note":"","ucode":"6338D5428DB2B0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579172,"discussion_content":"å®¹æ˜“é€ æˆè¯¯å¯¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657236706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":578159,"ip_address":"","group_id":0},"score":579172,"extra":""}]}]}]}