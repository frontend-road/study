{"id":610688,"title":"46｜常见常新：文件的关闭","content":"<p><strong>课后习题</strong><br>\n请打开一个不存在的文件，观察报错，并使用 close() 函数关闭文件，继续观察报错信息。</p><p><strong>课程代码、课件及其他相关资料地址</strong><br>\n<a href=\"https://gitee.com/wilsonyin/zero-basics-python\">https://gitee.com/wilsonyin/zero-basics-python</a></p>","comments":[{"had_liked":false,"id":390911,"user_name":"Mamba","can_delete":false,"product_type":"c3","uid":1475049,"ip_address":"湖北","ucode":"8B3EC90736B8EB","user_header":"https://static001.geekbang.org/account/avatar/00/16/81/e9/d131dd81.jpg","comment_is_top":false,"comment_ctime":1716725812,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"得看mode，如果是a或者w，也就是写入的话，系统会自动在当前目录创建一个文件，如果是r，只读的话，那么就会报错，no such file or directory","like_count":1},{"had_liked":false,"id":393537,"user_name":"刘立嘉","can_delete":false,"product_type":"c3","uid":2414637,"ip_address":"上海","ucode":"1241140EBE7FE3","user_header":"https://static001.geekbang.org/account/avatar/00/24/d8/2d/4b0355f3.jpg","comment_is_top":false,"comment_ctime":1724140226,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"s = &quot;&quot;&quot;Python 3.11 is up to 10-60% faster than Python 3.10.\nOn average, we measured a 1.25x speedup on the standard\nbenchmark suite. See Faster CPython for details.&quot;&quot;&quot;\n\nwith open(&#39;.&#47;demo.txt&#39;, mode=&#39;w&#39;, encoding=&#39;UTF-8&#39;) as f:\n    f.write(s)\n\nwith open(&#39;.&#47;demo.txt&#39;, mode=&#39;r&#39;, encoding=&#39;UTF-8&#39;) as f:\n    data = f.read()\nprint(data)","like_count":0},{"had_liked":false,"id":384356,"user_name":"依托答辩","can_delete":false,"product_type":"c3","uid":2383299,"ip_address":"上海","ucode":"4BE79E8A030813","user_header":"https://static001.geekbang.org/account/avatar/00/24/5d/c3/b8bb888c.jpg","comment_is_top":false,"comment_ctime":1700728525,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"老师，我再vscode打开文件时总是提示没有文件（但是我百分百确定路径是对的），网上查了下是因为vscode只能识别绝对路径。也确实换成绝对路径就能读到。但是看老师的演示并没有这样的问题，这是为啥。\n\n以下是报错信息\nTraceback (most recent call last):\n  File &quot;d:\\PythonLearning\\python-homework\\tong_zheng\\practice\\file.py&quot;, line 1, in &lt;module&gt;\n    with open(&#39;.&#47;..&#47;assets&#47;demo.txt&#39;) as f:\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: &#39;.&#47;..&#47;assets&#47;demo.txt&#39;","like_count":0},{"had_liked":false,"id":382049,"user_name":"MarkG","can_delete":false,"product_type":"c3","uid":3675806,"ip_address":"山东","ucode":"454082595FE769","user_header":"https://static001.geekbang.org/account/avatar/00/38/16/9e/48621655.jpg","comment_is_top":false,"comment_ctime":1696600505,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"代码：\nf4 = open(&#39;.&#47;demo3.txt&#39;, mode=&quot;r&quot;, encoding=&quot;utf-8&quot;)\nf4.close()\n\n\n打开一个不存在的文件，报如下错误：\nNo such file or directory: &#39;.&#47;demo3.txt&#39;\n\n使用不存在的文件的句柄，执行close函数关闭文件，报如下错误：\nname &#39;f4&#39; is not defined","like_count":0},{"had_liked":false,"id":381013,"user_name":"William","can_delete":false,"product_type":"c3","uid":1346215,"ip_address":"吉林","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1694585622,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"# 打开一个不存在的文件\nwith open(&#39;.&#47;notExist.txt&#39;, mode=&#39;r&#39;, encoding=&#39;UTF-8&#39;) as f:\n    data =f.read()\nprint(data)\n\n--------------------------------------------------\nTraceback (most recent call last):\n  File &quot;&#47;User&#47;......&#47;路径&#47;46_close.py&quot;, line 12, in &lt;module&gt;\n    with open(&#39;.&#47;notExist.txt&#39;, mode=&#39;r&#39;, encoding=&#39;UTF-8&#39;) as f:\nFileNotFoundError: [Errno 2] No such file or directory: &#39;.&#47;notExist.txt&#39;","like_count":0},{"had_liked":false,"id":380440,"user_name":"好困啊","can_delete":false,"product_type":"c3","uid":2094450,"ip_address":"上海","ucode":"D49429660F2DC8","user_header":"https://static001.geekbang.org/account/avatar/00/1f/f5/72/8cbc5cb3.jpg","comment_is_top":false,"comment_ctime":1693579729,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"with open(&#39;c.txt&#39;,&#39;r&#39;) as valid_file:\n    content = valid_file.read()\n\nprint(valid_file)\nvalid_file.close()\n\n---------------------------------------------------------------------------\nFileNotFoundError                         Traceback (most recent call last)\nCell In[4], line 1\n----&gt; 1 with open(&#39;c.txt&#39;,&#39;r&#39;) as valid_file:\n      2     content = valid_file.read()\n      4 print(valid_file)\n\nFile &#47;Library&#47;Frameworks&#47;Python.framework&#47;Versions&#47;3.10&#47;lib&#47;python3.10&#47;site-packages&#47;IPython&#47;core&#47;interactiveshell.py:284, in _modified_open(file, *args, **kwargs)\n    277 if file in {0, 1, 2}:\n    278     raise ValueError(\n    279         f&quot;IPython won&#39;t let you open fd={file} by default &quot;\n    280         &quot;as it is likely to crash IPython. If you know what you are doing, &quot;\n    281         &quot;you can use builtins&#39; open.&quot;\n    282     )\n--&gt; 284 return io_open(file, *args, **kwargs)\n\nFileNotFoundError: [Errno 2] No such file or directory: &#39;c.txt&#39;","like_count":0},{"had_liked":false,"id":378959,"user_name":"Geek_219b52","can_delete":false,"product_type":"c3","uid":1524531,"ip_address":"浙江","ucode":"955D79DEFD2DF4","user_header":"https://static001.geekbang.org/account/avatar/00/17/43/33/b9127867.jpg","comment_is_top":false,"comment_ctime":1691048754,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"#请打开一个不存在的文件，观察报错，并使用 close() 函数关闭文件，继续观察报错信息。\n\nf = open (&quot;D:\\\\零基础学python\\\\演示代码\\\\c.txt&quot;,mode = &quot;r&quot;,encoding=&#39;utf-8&#39;)\nf.close()\n\nwith open(&quot;D:\\\\零基础学python\\\\演示代码\\\\c.txt&quot;,mode = &quot;r&quot;,encoding=&#39;utf-8&#39;) as f:\n    f.read()","like_count":0},{"had_liked":false,"id":373159,"user_name":"Geek_e328af","can_delete":false,"product_type":"c3","uid":3599433,"ip_address":"山东","ucode":"8347D5B6F1684E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erib0wC5FsJFib2wFhaJt2NJY1ib2afNzEiaqE6hnlW7LRibqHUR2KaKBBJN0dzb4jO7gp3jU045rgR62w/132","comment_is_top":false,"comment_ctime":1682156784,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"FileNotFoundError: [Errno 2] No such file or directory: &#39;.&#47;demo333.txt&#39;","like_count":0},{"had_liked":false,"id":368093,"user_name":"sunny","can_delete":false,"product_type":"c3","uid":1904632,"ip_address":"江苏","ucode":"12350F6FF873D1","user_header":"https://static001.geekbang.org/account/avatar/00/1d/0f/f8/e1b9c1cc.jpg","comment_is_top":false,"comment_ctime":1675904790,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"with open(&quot;.&#47;demo_GBK.txt&quot;,mode=&quot;r&quot;,encoding=&quot;GBK&quot;) as f:\n    data=f.readlines()\n    print(data)","like_count":0},{"had_liked":false,"id":366362,"user_name":"聪少 Jeff","can_delete":false,"product_type":"c3","uid":1159983,"ip_address":"广东","ucode":"C791ACA9B47679","user_header":"https://static001.geekbang.org/account/avatar/00/11/b3/2f/d08a1363.jpg","comment_is_top":false,"comment_ctime":1673610176,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"# 使用open打开不存在文件\nwith open(&#39;.&#47;abc.txt&#39;, mode=&#39;r&#39;, encoding=&#39;UTF-8&#39;) as f:\n    data = f.read()\n# 使用with打开不存在文件\nf = open(&#39;.&#47;abc.txt&#39;, mode=&#39;r&#39;, encoding=&#39;UTF-8&#39;)\ndata = f.read()\nprint(data)\n# 报错信息都是一样的，目录中找不到文件\n# FileNotFoundError: [Errno 2] No such file or directory: &#39;.&#47;abc.txt&#39;","like_count":0}]}