{"id":764756,"title":"14｜业务知识管理中的LLM应用模式","content":"<p>你好，我是徐昊，今天我们来继续学习AI时代的软件工程。</p><p>经过前面的几节课的学习，我们已经看到大语言模型（Large Language Model，LLM）如何在业务知识管理的过程中辅助我们完成工作。今天，我们来总结一下在业务知识管理中，知识过程是怎么样的，以及典型的LLM模式有哪些。</p><h2>迭代式增量交付是一个持续学习的过程</h2><p>当代软件开发的基本思想是通过迭代的方式增量开发系统。在每个迭代结束后，根据收集到的反馈，调整目标和方向。这种方式下，开发人员能够利用前序迭代中学习到的知识，在后续迭代中改进交付的流程和结果。</p><p><img src=\"https://static001.geekbang.org/resource/image/d3/5b/d3abf967c2cbd0170c4d19af6957e85b.jpg?wh=1451x805\" alt=\"\"></p><p>迭代交付的关键在于，不要一开始就想实现全部的功能和需求，而是从一部分核心需求开始，通过持续的反馈，不断增强和演进当前的软件，调整目标和计划，直到整个系统做完为止。</p><p>从迭代软件交付的全流程上看，整个过程处在复杂的认知行为模式（Complex）。每一次迭代的过程，就是<strong>探测（Probe）<strong>的过程，收集反馈是</strong>感知（Sense）<strong>的行为，而最后对于目标和计划的调整就是</strong>响应（Respond）</strong>。</p><p>正如我们在前面的课程中讲到的，处于复杂认知行为模式时，我们对于不可言说知识的学习，是在行动与反馈中学习的过程。因而，迭代式增量交付实际是一个持续学习的过程。</p><!-- [[[read_end]]] --><p>那么在迭代式增量交付这个学习过程中，业务知识管理发挥了什么作用呢？站在迭代软件交付的全流程上，去看待业务知识管理时，不难发现业务知识管理的主要作用是提炼和传递不可言说知识：</p><ul>\n<li>从初始的业务愿景开始，产生整体解决方案（不可言说知识的提炼）；</li>\n<li>结合场景将整体解决方案切分成更小粒度的用户故事，以用户故事构成迭代计划（不可言说知识的传递）；</li>\n<li>按照具体的业务场景补充验收条件（不可言说知识的传递）；</li>\n<li>依照反馈，改进整体解决方案（不可言说知识的提炼）。</li>\n</ul><p>不难看出，业务知识管理中涉及到的不可言说知识，主要是整体解决方案，传递的方式是将整体解决方案切分为更小的粒度，然后通过明确验收条件的方式，强化知识传递的效果。</p><h2>无法加速的反馈循环</h2><p>谈到复杂的认知行为模式，我们很自然地想到，能不能利用LLM直接加速这个反馈循环呢？也就是由人通过业务知识管理定义问题，让LLM直接为我们生成软件，然后我们只需要验收LLM构造的软件就可以了。</p><p>某种程度上说，这是LLM给绝大多数人带来的美好愿景。通过简单几句话的描述，LLM就能帮助我们完成软件的开发。比如，在ChatGPT上线之初，我们看到过很多这样的例子：</p><blockquote>\n<p>请使用JavaScript编写一个贪吃蛇的游戏<br>\n然后ChatGPT就能够生成差不多的代码：</p>\n</blockquote><p><img src=\"https://static001.geekbang.org/resource/image/f2/1b/f2e9a67a3031d0e6063b6d8c82f15f1b.jpg?wh=1499x5881\" alt=\"\"></p><p>这一方面得益于ChatGPT丰富的训练语料，但更多是由于在互联网上有很多关于贪吃蛇的规则描述、示例代码等知识沉淀。也就是关于贪吃蛇的业务知识早就存在于互联网之上了，我们无需额外准备这些知识了。<strong>这里效率提升的主因并不是LLM，而是包含在训练语料中的知识</strong>。<strong>因而我们无法跳过知识管理这一步，让LLM直接帮助我们生成我们想要的代码。</strong></p><p>除去知识管理之外，目前的LLM系统还存在技术限制。无论是ChatGPT，Claude或是别的LLM都存在上下文的限制，也就是每一次LLM只能处理有限数量的token，以及产生有限数量token的结果。<strong>因而LLM能够理解的上下文规模，以及能够生成的应用规模都是有限的</strong>。对于大型系统而言，我们无法一次性将上下文传递给LLM，也无法从LLM中一次性获取整个应用。<strong>也就是说LLM存在一个极限的认知负载</strong>。</p><p>而就算我们准备好了全部的知识，且我们的应用规模很小，就像贪吃蛇一样，规则明确，功能简单，代码量也不多。那么这时候，<strong>反馈循环的瓶颈就变成了我们如何验证LLM生成的系统是正确且有效的</strong>。要时刻记得，LLM存在“<strong>幻觉</strong>”，会编造答案。</p><p>LLM生成的回答是基于其在训练数据中学到的模式和信息。模型的目标是根据输入提供有用和合理的文本，但并不能真正理解问题的含义。有时候，模型可能会生成看似合理但事实上不正确或不准确的答案。</p><p>这将意味着，每一次LLM根据我们的反馈提供新的答案时，我们都需要进行<strong>全量回归测试（Full regression test）</strong>。哪怕对于贪吃蛇如此简单的系统，我们也需要测试操作、贪吃蛇变长、贪吃蛇碰到自身导致游戏终止，以及各种边界条件。<strong>这对于人来说，是极大的认知负载。</strong></p><p>因而，以目前LLM（2024年1月）的能力来看，对于绝大多数实际工作中的生产系统而言，我们无法直接使用LLM，在整个系统维度形成快速的反馈循环，从而提高知识学习和传递的效率。</p><p>而且，由于LLM和人脑都存在认知负载超标的问题，我们仍然需要依靠业务知识管理的传统技法，比如通过用户故事去切分上下文，让LLM可以在有限的上下文内提供最大的帮助。也可以让人在受控的上下文内，去验证LLM产生的结果是否符合需求。</p><h2>LLM辅助业务知识管理的几个模式</h2><p>因为我们无法直接构成快速的反馈循环，我们就需要寻找其他的方式，利用LLM为业务知识管理提效。</p><p>首先，业务知识管理重在对于问题的定义，一旦问题定义错误，将带来成本巨大的返工和重做。那么我们首要任务就是验证对于问题的定义。然后才是根据问题定义，生成下游所需的新的知识，比如验收条件，比如业务模型。</p><p>在我们的课程中，介绍了两个不同的方式验证问题定义是否正确。第一个是由LLM根据业务上下文提问，通过人的回答，验证整体解决方案提取是否完整清晰；第二个是借助模型，验证业务描述是否可以通过模型展开解释。</p><p>这两个方法是完全不同的模式。第一种基于ReAct，是LLM推理能力的应用，是一种更为通用的模式，在不同的场合都能使用。</p><p>第二种，则是基于这样一个前提条件——<strong>模型是凝练的业务知识，模型表示了业务概念更普遍的关联。<strong>因而，模型在某种程度上，与文字表达的业务是</strong>同一种知识的不同表现形式</strong>。那么，我们可以通过将同一个知识的不同表现形式，做相互转化，就能交叉验证其中的偏差。</p><p>这里依赖于同样的知识有不同的表示形式，应用的场景就要受到一些限制。比如，不使用业务模型的团队，就无法使用这个方法验证。</p><p>在我们的课程中，还介绍了两种生成新知识的方式。第一种方式通过多个ChatGPT会话（ChatGPT session）构造反馈循环，利用LLM提速这个循环得到最后的结果，比如利用LLM建模。这是一种更为通用的模式，在不同的场合都能应用。</p><p>第二种是基于ReAct，利用LLM基础语料中的知识（验收条件），完成验收条件初稿的生成。在更一般的场景中，我们需要结合使用ReAct和思维链（Chain of Thought，CoT）完成最终结果的生成。</p><h2>总结</h2><p>至此，如何利用LLM辅助业务知识管理就讲完了。可以看到，我们讲解了两种验证问题定义的方法，以及两种生成新知识的方法。你可能会有一个疑问，为什么我们不使用LLM帮助我们分解用户故事，而着重在业务模型和验收条件呢？</p><p>答案是<strong>可以，但是没必要</strong>。我们讲解的场景，着重放在开发团队对业务知识的验证与学习（验收条件，模型展开），以及业务知识的学习上（LLM提问，辅助业务建模）。此时LLM帮助我们解决了团队瓶颈。</p><p>而用于故事分解时，我们解决的是一个庞杂认知模式（Complicated）的问题，LLM只帮助了业务分析师。而我们之前也讲过，庞杂模式如果不是有团队的放大效应，LLM并不能带来什么效率提升。因而，答案是，可以，但是没必要。</p><h2>思考题</h2><p>请尝试写一个分解用户故事的prompt模板。</p><p>欢迎在留言区分享你的想法，我会让编辑置顶一些优质回答供大家学习讨论。</p>","comments":[{"had_liked":false,"id":389610,"user_name":"范飞扬","can_delete":false,"product_type":"c1","uid":2721761,"ip_address":"浙江","ucode":"A665DF46833A81","user_header":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg","comment_is_top":false,"comment_ctime":1713060283,"is_pvip":false,"replies":[{"id":141762,"content":"分解用户故事的重点不在于写出来 而在于找到价值点 以及roi，如果自己一个人，你完全明白价值点的话 写不写出来都无所谓","user_name":"作者回复","user_name_real":"编辑","uid":2537798,"ctime":1713137845,"ip_address":"北京","comment_id":389610,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100755401,"comment_content":"老师说，使用LLM帮助分解用户故事，可以，但没必要。给的理由是，庞杂模式如果不是有团队的放大效应，LLM 并不能带来什么效率提升。\n\n我就不太同意这个答案了，答案应该是看情况：有时候有必要，有时候没必要。\n\n什么时候有必要？\n团队里没有业务分析师，需要自己分解用户故事。而且自己不在庞杂模式，而在复杂模式下。那么就有必要使用LLM了。\n\n我感觉我的情况就是属于有必要的情况，那么，老师的思考题就很有价值了。\n思考题是： 请尝试写一个分解用户故事的 prompt 模板。\n\n我理解，11讲就回答了怎么分解这个问题，“通过用户角色的目标，整体解决方案，用户旅程分解”。那么可以写出这个Prompt：（GPT对于这个Prompt的回复，我贴在这个留言的回复里）\n\n业务背景\n======\n这是一个教学学籍管理系统。\n    \n用户角色\n======\n教职员工（As a faculty），学生（As a student）\n\n核心目标\n======\n教职员工：追踪学生是否完成了教学计划的学习；学生：按照教学计划完成课程学习\n\n整体解决方案\n======\n设定一个教学计划，其中包含学生应该完成的所有课程，以及相应的学位。为每一位学生指定一个学籍，也就是学习某个教学计划的资格。学生需要根据教学计划，注册对应的课程。学生可以根据教学计划，学习对应课程，并获得成绩。每年依据学籍以及学生选课的成绩，判断学生是否能够毕业。\n\n用户旅程\n======\n教职员工：发放录取通知、结业；学生：注册学籍、选课\n\n用户故事分解方法\n======\n需要找到不同用户角色的目标，并根据这些目标设计整体解决方案。\n整体解决方案中包含业务中的核心概念、关键规则和主要流程。\n然后我们再根据整体解决方案，设计不同角色的用户旅程。接着我们就可以从用户旅程上切分用户故事了。\n那么此时，用户故事只有三种写法：\nSo that 可以满足某个用户角色的目标\nSo that 可以满足整体解决方案的规则或流程\nSo that 可以进行用户旅程的下一步\n\n\n\n任务\n===\n根据用户故事分解方法，写出多个用户故事。\n","like_count":4,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"徐八叉","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":641907,"discussion_content":"分解用户故事的重点不在于写出来 而在于找到价值点 以及roi，如果自己一个人，你完全明白价值点的话 写不写出来都无所谓","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1713137845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":1,"child_discussions":[{"author":{"id":2721761,"avatar":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg","nickname":"范飞扬","note":"","ucode":"A665DF46833A81","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"徐八叉","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":641913,"discussion_content":"哈哈，谢谢老师！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1713142132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":641907,"ip_address":"浙江","group_id":0},"score":641913,"extra":""}]},{"author":{"id":2721761,"avatar":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg","nickname":"范飞扬","note":"","ucode":"A665DF46833A81","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":641912,"discussion_content":"GPT 对于Prompt的回复：\n基于您提供的背景和整体解决方案，我会为教职员工和学生这两种用户角色编写一些用户故事。这些故事将帮助指导系统的设计和开发，确保满足不同用户的需求。\n\n### 教职员工的用户故事\n\n1. **用户故事**: 作为一名教职员工，我希望能够为新入学的学生发放录取通知书，这样他们可以正式注册成为本校的学生。\n   - **目的**: So that 可以满足新学生的入学需求。\n\n2. **用户故事**: 作为一名教职员工，我需要能够查看每位学生的课程完成情况和成绩，以确保他们是否按照教学计划在顺利推进。\n   - **目的**: So that 可以追踪学生是否完成了教学计划的学习。\n\n3. **用户故事**: 作为一名教职员工，我希望能够在每个学期末对学生的成绩进行审核，以决定是否可以给予他们结业证明。\n   - **目的**: So that 可以根据整体解决方案的规则，确定学生是否满足毕业条件。\n\n4. **用户故事**: 作为一名教职员工，我需要能够更新教学计划，以应对教育要求的变化或课程的更新。\n   - **目的**: So that 可以维持课程和学位的现代性和相关性。\n\n### 学生的用户故事\n\n1. **用户故事**: 作为一名学生，我希望在接到录取通知后能够注册学籍，这样我就可以正式开始我的学习旅程。\n   - **目的**: So that 可以进行用户旅程的下一步。\n\n2. **用户故事**: 作为一名学生，我需要能够查看可用的课程和教学计划，以便我可以做出明智的选课决策。\n   - **目的**: So that 可以根据教学计划完成课程学习。\n\n3. **用户故事**: 作为一名学生，我希望能够接受到及时的成绩反馈和课程完成情况的更新，这样我可以了解自己的学习进度。\n   - **目的**: So that 可以满足学生按照教学计划监控自己学习进度的需求。\n\n4. **用户故事**: 作为一名学生，我希望在满足所有学位要求后能够接收到结业证明，这样我就可以准备进入职场或继续深造。\n   - **目的**: So that 可以进行用户旅程的下一步并完成学业。\n\n这些用户故事将帮助开发团队理解不同角色的需求，并设计出能够支持这些需求的功能。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1713142043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389448,"user_name":"术子米德","can_delete":false,"product_type":"c1","uid":1898023,"ip_address":"日本","ucode":"382EA7E2AF0B56","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f6/27/c27599ae.jpg","comment_is_top":false,"comment_ctime":1712615924,"is_pvip":true,"replies":[{"id":141677,"content":"代码啊","user_name":"作者回复","user_name_real":"编辑","uid":2537798,"ctime":1712626944,"ip_address":"浙江","comment_id":389448,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100755401,"comment_content":"🤔☕️🤔☕️🤔\n【R】迭代式软件交付流程 = 复杂的认知行为模式\n精准匹配：Probe&#47;Sense&#47;Respond\n【.I.】迭代 ！= 分批。\n我分批，是因为我来不及，所以，完成一点交付一点，占满交付的带宽，就是最佳分批策略的实施。分批的别名就是分期。\n我迭代，是因为我不明白，所以，以现在所知，加前进方向，走出一步看情况，每次交付都有新知识和新问题，就是迭代的舒适节奏。矛盾在于，我们不能待在舒适区。\n【.I.】我写一句话需求，我自己写不出代码，大模型能刷一把写出代码，这说明，我说的需求，大模型已经门清，即这个需求对应的知识，之前已经是业界常识，大模型已经学会，而我也恰巧问对；如果大模型被我这一句话问呆滞，那么大概率是这句话背后的知识，大模型没有直接掌握，或者是我没有说清楚需求，我继续问大模型，或者我提示大模型来问我，这么我问你答、你问我答，逐步把这句没弄明白的需求，其中隐含的知识给弄明白，直到刷一把写出代码为止；而最终的瓶颈，一定会在我判定结果有效性的时候出现。\n【Q】迭代完成后走人，就会把这轮迭代中的知识带走，或者随风而散，如何能够边迭代边留下知识？\n— by 术子米德@2024年4月8日","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"徐八叉","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":641425,"discussion_content":"代码啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1712626944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":393123,"user_name":"Geek_310e53","can_delete":false,"product_type":"c1","uid":3938325,"ip_address":"澳大利亚","ucode":"F6B8B86DBFECDD","user_header":"","comment_is_top":false,"comment_ctime":1722926034,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100755401,"comment_content":"速如其名，八叉的语速更快了，1倍速就相当于常人的1.25~1.5倍速。","like_count":0},{"had_liked":false,"id":389502,"user_name":"听水的湖","can_delete":false,"product_type":"c1","uid":1501385,"ip_address":"北京","ucode":"B1759F90165D81","user_header":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","comment_is_top":false,"comment_ctime":1712746032,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100755401,"comment_content":"没有加群的注意通过小助手进一下课程群，方便接收后续直播通知。小助手微信号：geektime004，回复「徐昊」","like_count":0}]}