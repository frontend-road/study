{"id":106904,"title":"18 | Kafkaä¸­ä½ç§»æäº¤é‚£äº›äº‹å„¿","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å¤•ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠKafkaä¸­ä½ç§»æäº¤çš„é‚£äº›äº‹å„¿ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼ŒConsumerç«¯æœ‰ä¸ªä½ç§»çš„æ¦‚å¿µï¼Œå®ƒå’Œæ¶ˆæ¯åœ¨åˆ†åŒºä¸­çš„ä½ç§»ä¸æ˜¯ä¸€å›äº‹å„¿ï¼Œè™½ç„¶å®ƒä»¬çš„è‹±æ–‡éƒ½æ˜¯Offsetã€‚ä»Šå¤©æˆ‘ä»¬è¦èŠçš„ä½ç§»æ˜¯Consumerçš„æ¶ˆè´¹ä½ç§»ï¼Œå®ƒè®°å½•äº†Consumerè¦æ¶ˆè´¹çš„ä¸‹ä¸€æ¡æ¶ˆæ¯çš„ä½ç§»ã€‚è¿™å¯èƒ½å’Œä½ ä»¥å‰äº†è§£çš„æœ‰äº›å‡ºå…¥ï¼Œä¸è¿‡åˆ‡è®°æ˜¯ä¸‹ä¸€æ¡æ¶ˆæ¯çš„ä½ç§»ï¼Œè€Œä¸æ˜¯ç›®å‰æœ€æ–°æ¶ˆè´¹æ¶ˆæ¯çš„ä½ç§»ã€‚</p><p>æˆ‘æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹ã€‚å‡è®¾ä¸€ä¸ªåˆ†åŒºä¸­æœ‰10æ¡æ¶ˆæ¯ï¼Œä½ç§»åˆ†åˆ«æ˜¯0åˆ°9ã€‚æŸä¸ªConsumeråº”ç”¨å·²æ¶ˆè´¹äº†5æ¡æ¶ˆæ¯ï¼Œè¿™å°±è¯´æ˜è¯¥Consumeræ¶ˆè´¹äº†ä½ç§»ä¸º0åˆ°4çš„5æ¡æ¶ˆæ¯ï¼Œæ­¤æ—¶Consumerçš„ä½ç§»æ˜¯5ï¼ŒæŒ‡å‘äº†ä¸‹ä¸€æ¡æ¶ˆæ¯çš„ä½ç§»ã€‚</p><p><strong>Consumeréœ€è¦å‘Kafkaæ±‡æŠ¥è‡ªå·±çš„ä½ç§»æ•°æ®ï¼Œè¿™ä¸ªæ±‡æŠ¥è¿‡ç¨‹è¢«ç§°ä¸ºæäº¤ä½ç§»</strong>ï¼ˆCommitting Offsetsï¼‰ã€‚å› ä¸ºConsumerèƒ½å¤ŸåŒæ—¶æ¶ˆè´¹å¤šä¸ªåˆ†åŒºçš„æ•°æ®ï¼Œæ‰€ä»¥ä½ç§»çš„æäº¤å®é™…ä¸Šæ˜¯åœ¨åˆ†åŒºç²’åº¦ä¸Šè¿›è¡Œçš„ï¼Œå³<strong>Consumeréœ€è¦ä¸ºåˆ†é…ç»™å®ƒçš„æ¯ä¸ªåˆ†åŒºæäº¤å„è‡ªçš„ä½ç§»æ•°æ®</strong>ã€‚</p><p>æäº¤ä½ç§»ä¸»è¦æ˜¯ä¸ºäº†è¡¨å¾Consumerçš„æ¶ˆè´¹è¿›åº¦ï¼Œè¿™æ ·å½“Consumerå‘ç”Ÿæ•…éšœé‡å¯ä¹‹åï¼Œå°±èƒ½å¤Ÿä»Kafkaä¸­è¯»å–ä¹‹å‰æäº¤çš„ä½ç§»å€¼ï¼Œç„¶åä»ç›¸åº”çš„ä½ç§»å¤„ç»§ç»­æ¶ˆè´¹ï¼Œä»è€Œé¿å…æ•´ä¸ªæ¶ˆè´¹è¿‡ç¨‹é‡æ¥ä¸€éã€‚æ¢å¥è¯è¯´ï¼Œä½ç§»æäº¤æ˜¯Kafkaæä¾›ç»™ä½ çš„ä¸€ä¸ªå·¥å…·æˆ–è¯­ä¹‰ä¿éšœï¼Œä½ è´Ÿè´£ç»´æŒè¿™ä¸ªè¯­ä¹‰ä¿éšœï¼Œå³å¦‚æœä½ æäº¤äº†ä½ç§»Xï¼Œé‚£ä¹ˆKafkaä¼šè®¤ä¸ºæ‰€æœ‰ä½ç§»å€¼å°äºXçš„æ¶ˆæ¯ä½ éƒ½å·²ç»æˆåŠŸæ¶ˆè´¹äº†ã€‚</p><!-- [[[read_end]]] --><p>è¿™ä¸€ç‚¹ç‰¹åˆ«å…³é”®ã€‚å› ä¸ºä½ç§»æäº¤éå¸¸çµæ´»ï¼Œä½ å®Œå…¨å¯ä»¥æäº¤ä»»ä½•ä½ç§»å€¼ï¼Œä½†ç”±æ­¤äº§ç”Ÿçš„åæœä½ ä¹Ÿè¦ä¸€å¹¶æ‰¿æ‹…ã€‚å‡è®¾ä½ çš„Consumeræ¶ˆè´¹äº†10æ¡æ¶ˆæ¯ï¼Œä½ æäº¤çš„ä½ç§»å€¼å´æ˜¯20ï¼Œé‚£ä¹ˆä»ç†è®ºä¸Šè®²ï¼Œä½ç§»ä»‹äº11ï½19ä¹‹é—´çš„æ¶ˆæ¯æ˜¯æœ‰å¯èƒ½ä¸¢å¤±çš„ï¼›ç›¸ååœ°ï¼Œå¦‚æœä½ æäº¤çš„ä½ç§»å€¼æ˜¯5ï¼Œé‚£ä¹ˆä½ç§»ä»‹äº5ï½9ä¹‹é—´çš„æ¶ˆæ¯å°±æœ‰å¯èƒ½è¢«é‡å¤æ¶ˆè´¹ã€‚æ‰€ä»¥ï¼Œæˆ‘æƒ³å†å¼ºè°ƒä¸€ä¸‹ï¼Œ<strong>ä½ç§»æäº¤çš„è¯­ä¹‰ä¿éšœæ˜¯ç”±ä½ æ¥è´Ÿè´£çš„ï¼ŒKafkaåªä¼šâ€œæ— è„‘â€åœ°æ¥å—ä½ æäº¤çš„ä½ç§»</strong>ã€‚ä½ å¯¹ä½ç§»æäº¤çš„ç®¡ç†ç›´æ¥å½±å“äº†ä½ çš„Consumeræ‰€èƒ½æä¾›çš„æ¶ˆæ¯è¯­ä¹‰ä¿éšœã€‚</p><p>é‰´äºä½ç§»æäº¤ç”šè‡³æ˜¯ä½ç§»ç®¡ç†å¯¹Consumerç«¯çš„å·¨å¤§å½±å“ï¼ŒKafkaï¼Œç‰¹åˆ«æ˜¯KafkaConsumer APIï¼Œæä¾›äº†å¤šç§æäº¤ä½ç§»çš„æ–¹æ³•ã€‚<strong>ä»ç”¨æˆ·çš„è§’åº¦æ¥è¯´ï¼Œä½ç§»æäº¤åˆ†ä¸ºè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ï¼›ä»Consumerç«¯çš„è§’åº¦æ¥è¯´ï¼Œä½ç§»æäº¤åˆ†ä¸ºåŒæ­¥æäº¤å’Œå¼‚æ­¥æäº¤</strong>ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥è¯´è¯´è‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ã€‚æ‰€è°“è‡ªåŠ¨æäº¤ï¼Œå°±æ˜¯æŒ‡Kafka Consumeråœ¨åå°é»˜é»˜åœ°ä¸ºä½ æäº¤ä½ç§»ï¼Œä½œä¸ºç”¨æˆ·çš„ä½ å®Œå…¨ä¸å¿…æ“å¿ƒè¿™äº›äº‹ï¼›è€Œæ‰‹åŠ¨æäº¤ï¼Œåˆ™æ˜¯æŒ‡ä½ è¦è‡ªå·±æäº¤ä½ç§»ï¼ŒKafka Consumerå‹æ ¹ä¸ç®¡ã€‚</p><p>å¼€å¯è‡ªåŠ¨æäº¤ä½ç§»çš„æ–¹æ³•å¾ˆç®€å•ã€‚Consumerç«¯æœ‰ä¸ªå‚æ•°enable.auto.commitï¼ŒæŠŠå®ƒè®¾ç½®ä¸ºtrueæˆ–è€…å‹æ ¹ä¸è®¾ç½®å®ƒå°±å¯ä»¥äº†ã€‚å› ä¸ºå®ƒçš„é»˜è®¤å€¼å°±æ˜¯trueï¼Œå³Java Consumeré»˜è®¤å°±æ˜¯è‡ªåŠ¨æäº¤ä½ç§»çš„ã€‚å¦‚æœå¯ç”¨äº†è‡ªåŠ¨æäº¤ï¼ŒConsumerç«¯è¿˜æœ‰ä¸ªå‚æ•°å°±æ´¾ä¸Šç”¨åœºäº†ï¼šauto.commit.interval.msã€‚å®ƒçš„é»˜è®¤å€¼æ˜¯5ç§’ï¼Œè¡¨æ˜Kafkaæ¯5ç§’ä¼šä¸ºä½ è‡ªåŠ¨æäº¤ä¸€æ¬¡ä½ç§»ã€‚</p><p>ä¸ºäº†æŠŠè¿™ä¸ªé—®é¢˜è¯´æ¸…æ¥šï¼Œæˆ‘ç»™å‡ºäº†å®Œæ•´çš„Javaä»£ç ã€‚è¿™æ®µä»£ç å±•ç¤ºäº†è®¾ç½®è‡ªåŠ¨æäº¤ä½ç§»çš„æ–¹æ³•ã€‚æœ‰äº†è¿™æ®µä»£ç åšåŸºç¡€ï¼Œä»Šå¤©åé¢çš„è®²è§£æˆ‘å°±ä¸å†å±•ç¤ºå®Œæ•´çš„ä»£ç äº†ã€‚</p><pre><code>Properties props = new Properties();\n     props.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n     props.put(&quot;group.id&quot;, &quot;test&quot;);\n     props.put(&quot;enable.auto.commit&quot;, &quot;true&quot;);\n     props.put(&quot;auto.commit.interval.ms&quot;, &quot;2000&quot;);\n     props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n     props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n     KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);\n     consumer.subscribe(Arrays.asList(&quot;foo&quot;, &quot;bar&quot;));\n     while (true) {\n         ConsumerRecords&lt;String, String&gt; records = consumer.poll(100);\n         for (ConsumerRecord&lt;String, String&gt; record : records)\n             System.out.printf(&quot;offset = %d, key = %s, value = %s%n&quot;, record.offset(), record.key(), record.value());\n     }\n</code></pre><p>ä¸Šé¢çš„ç¬¬3ã€ç¬¬4è¡Œä»£ç ï¼Œå°±æ˜¯å¼€å¯è‡ªåŠ¨æäº¤ä½ç§»çš„æ–¹æ³•ã€‚æ€»ä½“æ¥è¯´ï¼Œè¿˜æ˜¯å¾ˆç®€å•çš„å§ã€‚</p><p>å’Œè‡ªåŠ¨æäº¤ç›¸åçš„ï¼Œå°±æ˜¯æ‰‹åŠ¨æäº¤äº†ã€‚å¼€å¯æ‰‹åŠ¨æäº¤ä½ç§»çš„æ–¹æ³•å°±æ˜¯è®¾ç½®enable.auto.commitä¸ºfalseã€‚ä½†æ˜¯ï¼Œä»…ä»…è®¾ç½®å®ƒä¸ºfalseè¿˜ä¸å¤Ÿï¼Œå› ä¸ºä½ åªæ˜¯å‘Šè¯‰Kafka Consumerä¸è¦è‡ªåŠ¨æäº¤ä½ç§»è€Œå·²ï¼Œä½ è¿˜éœ€è¦è°ƒç”¨ç›¸åº”çš„APIæ‰‹åŠ¨æäº¤ä½ç§»ã€‚</p><p>æœ€ç®€å•çš„APIå°±æ˜¯<strong>KafkaConsumer#commitSync()</strong>ã€‚è¯¥æ–¹æ³•ä¼šæäº¤KafkaConsumer#poll()è¿”å›çš„æœ€æ–°ä½ç§»ã€‚ä»åå­—ä¸Šæ¥çœ‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒæ­¥æ“ä½œï¼Œå³è¯¥æ–¹æ³•ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°ä½ç§»è¢«æˆåŠŸæäº¤æ‰ä¼šè¿”å›ã€‚å¦‚æœæäº¤è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œè¯¥æ–¹æ³•ä¼šå°†å¼‚å¸¸ä¿¡æ¯æŠ›å‡ºã€‚ä¸‹é¢è¿™æ®µä»£ç å±•ç¤ºäº†commitSync()çš„ä½¿ç”¨æ–¹æ³•ï¼š</p><pre><code>while (true) {\n            ConsumerRecords&lt;String, String&gt; records =\n                        consumer.poll(Duration.ofSeconds(1));\n            process(records); // å¤„ç†æ¶ˆæ¯\n            try {\n                        consumer.commitSync();\n            } catch (CommitFailedException e) {\n                        handle(e); // å¤„ç†æäº¤å¤±è´¥å¼‚å¸¸\n            }\n}\n</code></pre><p>å¯è§ï¼Œè°ƒç”¨consumer.commitSync()æ–¹æ³•çš„æ—¶æœºï¼Œæ˜¯åœ¨ä½ å¤„ç†å®Œäº†poll()æ–¹æ³•è¿”å›çš„æ‰€æœ‰æ¶ˆæ¯ä¹‹åã€‚å¦‚æœä½ è½æ’åœ°è¿‡æ—©æäº¤äº†ä½ç§»ï¼Œå°±å¯èƒ½ä¼šå‡ºç°æ¶ˆè´¹æ•°æ®ä¸¢å¤±çš„æƒ…å†µã€‚é‚£ä¹ˆä½ å¯èƒ½ä¼šé—®ï¼Œè‡ªåŠ¨æäº¤ä½ç§»å°±ä¸ä¼šå‡ºç°æ¶ˆè´¹æ•°æ®ä¸¢å¤±çš„æƒ…å†µäº†å—ï¼Ÿå®ƒèƒ½æ°åˆ°å¥½å¤„åœ°æŠŠæ¡æ—¶æœºè¿›è¡Œä½ç§»æäº¤å—ï¼Ÿä¸ºäº†ææ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»è¦æ·±å…¥åœ°äº†è§£ä¸€ä¸‹è‡ªåŠ¨æäº¤ä½ç§»çš„é¡ºåºã€‚</p><p>ä¸€æ—¦è®¾ç½®äº†enable.auto.commitä¸ºtrueï¼ŒKafkaä¼šä¿è¯åœ¨å¼€å§‹è°ƒç”¨pollæ–¹æ³•æ—¶ï¼Œæäº¤ä¸Šæ¬¡pollè¿”å›çš„æ‰€æœ‰æ¶ˆæ¯ã€‚ä»é¡ºåºä¸Šæ¥è¯´ï¼Œpollæ–¹æ³•çš„é€»è¾‘æ˜¯å…ˆæäº¤ä¸Šä¸€æ‰¹æ¶ˆæ¯çš„ä½ç§»ï¼Œå†å¤„ç†ä¸‹ä¸€æ‰¹æ¶ˆæ¯ï¼Œå› æ­¤å®ƒèƒ½ä¿è¯ä¸å‡ºç°æ¶ˆè´¹ä¸¢å¤±çš„æƒ…å†µã€‚ä½†è‡ªåŠ¨æäº¤ä½ç§»çš„ä¸€ä¸ªé—®é¢˜åœ¨äºï¼Œ<strong>å®ƒå¯èƒ½ä¼šå‡ºç°é‡å¤æ¶ˆè´¹</strong>ã€‚</p><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒConsumeræ¯5ç§’è‡ªåŠ¨æäº¤ä¸€æ¬¡ä½ç§»ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å‡è®¾æäº¤ä½ç§»ä¹‹åçš„3ç§’å‘ç”Ÿäº†Rebalanceæ“ä½œã€‚åœ¨Rebalanceä¹‹åï¼Œæ‰€æœ‰Consumerä»ä¸Šä¸€æ¬¡æäº¤çš„ä½ç§»å¤„ç»§ç»­æ¶ˆè´¹ï¼Œä½†è¯¥ä½ç§»å·²ç»æ˜¯3ç§’å‰çš„ä½ç§»æ•°æ®äº†ï¼Œæ•…åœ¨Rebalanceå‘ç”Ÿå‰3ç§’æ¶ˆè´¹çš„æ‰€æœ‰æ•°æ®éƒ½è¦é‡æ–°å†æ¶ˆè´¹ä¸€æ¬¡ã€‚è™½ç„¶ä½ èƒ½å¤Ÿé€šè¿‡å‡å°‘auto.commit.interval.msçš„å€¼æ¥æé«˜æäº¤é¢‘ç‡ï¼Œä½†è¿™ä¹ˆåšåªèƒ½ç¼©å°é‡å¤æ¶ˆè´¹çš„æ—¶é—´çª—å£ï¼Œä¸å¯èƒ½å®Œå…¨æ¶ˆé™¤å®ƒã€‚è¿™æ˜¯è‡ªåŠ¨æäº¤æœºåˆ¶çš„ä¸€ä¸ªç¼ºé™·ã€‚</p><p>åè§‚æ‰‹åŠ¨æäº¤ä½ç§»ï¼Œå®ƒçš„å¥½å¤„å°±åœ¨äºæ›´åŠ çµæ´»ï¼Œä½ å®Œå…¨èƒ½å¤ŸæŠŠæ§ä½ç§»æäº¤çš„æ—¶æœºå’Œé¢‘ç‡ã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå°±æ˜¯åœ¨è°ƒç”¨commitSync()æ—¶ï¼ŒConsumerç¨‹åºä¼šå¤„äºé˜»å¡çŠ¶æ€ï¼Œç›´åˆ°è¿œç«¯çš„Brokerè¿”å›æäº¤ç»“æœï¼Œè¿™ä¸ªçŠ¶æ€æ‰ä¼šç»“æŸã€‚åœ¨ä»»ä½•ç³»ç»Ÿä¸­ï¼Œå› ä¸ºç¨‹åºè€Œéèµ„æºé™åˆ¶è€Œå¯¼è‡´çš„é˜»å¡éƒ½å¯èƒ½æ˜¯ç³»ç»Ÿçš„ç“¶é¢ˆï¼Œä¼šå½±å“æ•´ä¸ªåº”ç”¨ç¨‹åºçš„TPSã€‚å½“ç„¶ï¼Œä½ å¯ä»¥é€‰æ‹©æ‹‰é•¿æäº¤é—´éš”ï¼Œä½†è¿™æ ·åšçš„åæœæ˜¯Consumerçš„æäº¤é¢‘ç‡ä¸‹é™ï¼Œåœ¨ä¸‹æ¬¡Consumeré‡å¯å›æ¥åï¼Œä¼šæœ‰æ›´å¤šçš„æ¶ˆæ¯è¢«é‡æ–°æ¶ˆè´¹ã€‚</p><p>é‰´äºè¿™ä¸ªé—®é¢˜ï¼ŒKafkaç¤¾åŒºä¸ºæ‰‹åŠ¨æäº¤ä½ç§»æä¾›äº†å¦ä¸€ä¸ªAPIæ–¹æ³•ï¼š<strong>KafkaConsumer#commitAsync()</strong>ã€‚ä»åå­—ä¸Šæ¥çœ‹å®ƒå°±ä¸æ˜¯åŒæ­¥çš„ï¼Œè€Œæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚è°ƒç”¨commitAsync()ä¹‹åï¼Œå®ƒä¼šç«‹å³è¿”å›ï¼Œä¸ä¼šé˜»å¡ï¼Œå› æ­¤ä¸ä¼šå½±å“Consumeråº”ç”¨çš„TPSã€‚ç”±äºå®ƒæ˜¯å¼‚æ­¥çš„ï¼ŒKafkaæä¾›äº†å›è°ƒå‡½æ•°ï¼ˆcallbackï¼‰ï¼Œä¾›ä½ å®ç°æäº¤ä¹‹åçš„é€»è¾‘ï¼Œæ¯”å¦‚è®°å½•æ—¥å¿—æˆ–å¤„ç†å¼‚å¸¸ç­‰ã€‚ä¸‹é¢è¿™æ®µä»£ç å±•ç¤ºäº†è°ƒç”¨commitAsync()çš„æ–¹æ³•ï¼š</p><pre><code>while (true) {\n            ConsumerRecords&lt;String, String&gt; records = \n\tconsumer.poll(Duration.ofSeconds(1));\n            process(records); // å¤„ç†æ¶ˆæ¯\n            consumer.commitAsync((offsets, exception) -&gt; {\n\tif (exception != null)\n\thandle(exception);\n\t});\n}\n</code></pre><p>commitAsyncæ˜¯å¦èƒ½å¤Ÿæ›¿ä»£commitSyncå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸èƒ½ã€‚commitAsyncçš„é—®é¢˜åœ¨äºï¼Œå‡ºç°é—®é¢˜æ—¶å®ƒä¸ä¼šè‡ªåŠ¨é‡è¯•ã€‚å› ä¸ºå®ƒæ˜¯å¼‚æ­¥æ“ä½œï¼Œå€˜è‹¥æäº¤å¤±è´¥åè‡ªåŠ¨é‡è¯•ï¼Œé‚£ä¹ˆå®ƒé‡è¯•æ—¶æäº¤çš„ä½ç§»å€¼å¯èƒ½æ—©å·²ç»â€œè¿‡æœŸâ€æˆ–ä¸æ˜¯æœ€æ–°å€¼äº†ã€‚å› æ­¤ï¼Œå¼‚æ­¥æäº¤çš„é‡è¯•å…¶å®æ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥commitAsyncæ˜¯ä¸ä¼šé‡è¯•çš„ã€‚</p><p>æ˜¾ç„¶ï¼Œå¦‚æœæ˜¯æ‰‹åŠ¨æäº¤ï¼Œæˆ‘ä»¬éœ€è¦å°†commitSyncå’ŒcommitAsyncç»„åˆä½¿ç”¨æ‰èƒ½è¾¾åˆ°æœ€ç†æƒ³çš„æ•ˆæœï¼ŒåŸå› æœ‰ä¸¤ä¸ªï¼š</p><ol>\n<li>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨commitSyncçš„è‡ªåŠ¨é‡è¯•æ¥è§„é¿é‚£äº›ç¬æ—¶é”™è¯¯ï¼Œæ¯”å¦‚ç½‘ç»œçš„ç¬æ—¶æŠ–åŠ¨ï¼ŒBrokerç«¯GCç­‰ã€‚å› ä¸ºè¿™äº›é—®é¢˜éƒ½æ˜¯çŸ­æš‚çš„ï¼Œè‡ªåŠ¨é‡è¯•é€šå¸¸éƒ½ä¼šæˆåŠŸï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¸æƒ³è‡ªå·±é‡è¯•ï¼Œè€Œæ˜¯å¸Œæœ›Kafka Consumerå¸®æˆ‘ä»¬åšè¿™ä»¶äº‹ã€‚</li>\n<li>æˆ‘ä»¬ä¸å¸Œæœ›ç¨‹åºæ€»å¤„äºé˜»å¡çŠ¶æ€ï¼Œå½±å“TPSã€‚</li>\n</ol><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œå®ƒå±•ç¤ºçš„æ˜¯å¦‚ä½•å°†ä¸¤ä¸ªAPIæ–¹æ³•ç»“åˆä½¿ç”¨è¿›è¡Œæ‰‹åŠ¨æäº¤ã€‚</p><pre><code>   try {\n           while(true) {\n                        ConsumerRecords&lt;String, String&gt; records = \n                                    consumer.poll(Duration.ofSeconds(1));\n                        process(records); // å¤„ç†æ¶ˆæ¯\n                        commitAysnc(); // ä½¿ç”¨å¼‚æ­¥æäº¤è§„é¿é˜»å¡\n            }\n} catch(Exception e) {\n            handle(e); // å¤„ç†å¼‚å¸¸\n} finally {\n            try {\n                        consumer.commitSync(); // æœ€åä¸€æ¬¡æäº¤ä½¿ç”¨åŒæ­¥é˜»å¡å¼æäº¤\n\t} finally {\n\t     consumer.close();\n}\n}\n</code></pre><p>è¿™æ®µä»£ç åŒæ—¶ä½¿ç”¨äº†commitSync()å’ŒcommitAsync()ã€‚å¯¹äºå¸¸è§„æ€§ã€é˜¶æ®µæ€§çš„æ‰‹åŠ¨æäº¤ï¼Œæˆ‘ä»¬è°ƒç”¨commitAsync()é¿å…ç¨‹åºé˜»å¡ï¼Œè€Œåœ¨Consumerè¦å…³é—­å‰ï¼Œæˆ‘ä»¬è°ƒç”¨commitSync()æ–¹æ³•æ‰§è¡ŒåŒæ­¥é˜»å¡å¼çš„ä½ç§»æäº¤ï¼Œä»¥ç¡®ä¿Consumerå…³é—­å‰èƒ½å¤Ÿä¿å­˜æ­£ç¡®çš„ä½ç§»æ•°æ®ã€‚å°†ä¸¤è€…ç»“åˆåï¼Œæˆ‘ä»¬æ—¢å®ç°äº†å¼‚æ­¥æ— é˜»å¡å¼çš„ä½ç§»ç®¡ç†ï¼Œä¹Ÿç¡®ä¿äº†Consumerä½ç§»çš„æ­£ç¡®æ€§ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ éœ€è¦è‡ªè¡Œç¼–å†™ä»£ç å¼€å‘ä¸€å¥—Kafka Consumeråº”ç”¨ï¼Œé‚£ä¹ˆæˆ‘æ¨èä½ ä½¿ç”¨ä¸Šé¢çš„ä»£ç èŒƒä¾‹æ¥å®ç°æ‰‹åŠ¨çš„ä½ç§»æäº¤ã€‚</p><p>æˆ‘ä»¬è¯´äº†è‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ï¼Œä¹Ÿè¯´äº†åŒæ­¥æäº¤å’Œå¼‚æ­¥æäº¤ï¼Œè¿™äº›å°±æ˜¯Kafkaä½ç§»æäº¤çš„å…¨éƒ¨äº†å—ï¼Ÿå…¶å®ï¼Œæˆ‘ä»¬è¿˜å·®ä¸€éƒ¨åˆ†ã€‚</p><p>å®é™…ä¸Šï¼ŒKafka Consumer APIè¿˜æä¾›äº†ä¸€ç»„æ›´ä¸ºæ–¹ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©ä½ å®ç°æ›´ç²¾ç»†åŒ–çš„ä½ç§»ç®¡ç†åŠŸèƒ½ã€‚åˆšåˆšæˆ‘ä»¬èŠåˆ°çš„æ‰€æœ‰ä½ç§»æäº¤ï¼Œéƒ½æ˜¯æäº¤pollæ–¹æ³•è¿”å›çš„æ‰€æœ‰æ¶ˆæ¯çš„ä½ç§»ï¼Œæ¯”å¦‚pollæ–¹æ³•ä¸€æ¬¡è¿”å›äº†500æ¡æ¶ˆæ¯ï¼Œå½“ä½ å¤„ç†å®Œè¿™500æ¡æ¶ˆæ¯ä¹‹åï¼Œå‰é¢æˆ‘ä»¬æåˆ°çš„å„ç§æ–¹æ³•ä¼šä¸€æ¬¡æ€§åœ°å°†è¿™500æ¡æ¶ˆæ¯çš„ä½ç§»ä¸€å¹¶å¤„ç†ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯<strong>ç›´æ¥æäº¤æœ€æ–°ä¸€æ¡æ¶ˆæ¯çš„ä½ç§»</strong>ã€‚ä½†å¦‚æœæˆ‘æƒ³æ›´åŠ ç»†ç²’åº¦åŒ–åœ°æäº¤ä½ç§»ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>è®¾æƒ³è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ çš„pollæ–¹æ³•è¿”å›çš„ä¸æ˜¯500æ¡æ¶ˆæ¯ï¼Œè€Œæ˜¯5000æ¡ã€‚é‚£ä¹ˆï¼Œä½ è‚¯å®šä¸æƒ³æŠŠè¿™5000æ¡æ¶ˆæ¯éƒ½å¤„ç†å®Œä¹‹åå†æäº¤ä½ç§»ï¼Œå› ä¸ºä¸€æ—¦ä¸­é—´å‡ºç°å·®é”™ï¼Œä¹‹å‰å¤„ç†çš„å…¨éƒ¨éƒ½è¦é‡æ¥ä¸€éã€‚è¿™ç±»ä¼¼äºæˆ‘ä»¬æ•°æ®åº“ä¸­çš„äº‹åŠ¡å¤„ç†ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›å°†ä¸€ä¸ªå¤§äº‹åŠ¡åˆ†å‰²æˆè‹¥å¹²ä¸ªå°äº‹åŠ¡åˆ†åˆ«æäº¤ï¼Œè¿™èƒ½å¤Ÿæœ‰æ•ˆå‡å°‘é”™è¯¯æ¢å¤çš„æ—¶é—´ã€‚</p><p>åœ¨Kafkaä¸­ä¹Ÿæ˜¯ç›¸åŒçš„é“ç†ã€‚å¯¹äºä¸€æ¬¡è¦å¤„ç†å¾ˆå¤šæ¶ˆæ¯çš„Consumerè€Œè¨€ï¼Œå®ƒä¼šå…³å¿ƒç¤¾åŒºæœ‰æ²¡æœ‰æ–¹æ³•å…è®¸å®ƒåœ¨æ¶ˆè´¹çš„ä¸­é—´è¿›è¡Œä½ç§»æäº¤ã€‚æ¯”å¦‚å‰é¢è¿™ä¸ª5000æ¡æ¶ˆæ¯çš„ä¾‹å­ï¼Œä½ å¯èƒ½å¸Œæœ›æ¯å¤„ç†å®Œ100æ¡æ¶ˆæ¯å°±æäº¤ä¸€æ¬¡ä½ç§»ï¼Œè¿™æ ·èƒ½å¤Ÿé¿å…å¤§æ‰¹é‡çš„æ¶ˆæ¯é‡æ–°æ¶ˆè´¹ã€‚</p><p>åº†å¹¸çš„æ˜¯ï¼ŒKafka Consumer APIä¸ºæ‰‹åŠ¨æäº¤æä¾›äº†è¿™æ ·çš„æ–¹æ³•ï¼šcommitSync(Map&lt;TopicPartition, OffsetAndMetadata&gt;)å’ŒcommitAsync(Map&lt;TopicPartition, OffsetAndMetadata&gt;)ã€‚å®ƒä»¬çš„å‚æ•°æ˜¯ä¸€ä¸ªMapå¯¹è±¡ï¼Œé”®å°±æ˜¯TopicPartitionï¼Œå³æ¶ˆè´¹çš„åˆ†åŒºï¼Œè€Œå€¼æ˜¯ä¸€ä¸ªOffsetAndMetadataå¯¹è±¡ï¼Œä¿å­˜çš„ä¸»è¦æ˜¯ä½ç§»æ•°æ®ã€‚</p><p>å°±æ‹¿åˆšåˆšæè¿‡çš„é‚£ä¸ªä¾‹å­æ¥è¯´ï¼Œå¦‚ä½•æ¯å¤„ç†100æ¡æ¶ˆæ¯å°±æäº¤ä¸€æ¬¡ä½ç§»å‘¢ï¼Ÿåœ¨è¿™é‡Œï¼Œæˆ‘ä»¥commitAsyncä¸ºä¾‹ï¼Œå±•ç¤ºä¸€æ®µä»£ç ï¼Œå®é™…ä¸Šï¼ŒcommitSyncçš„è°ƒç”¨æ–¹æ³•å’Œå®ƒæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p><pre><code>private Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets = new HashMap&lt;&gt;();\nint count = 0;\nâ€¦â€¦\nwhile (true) {\n            ConsumerRecords&lt;String, String&gt; records = \n\tconsumer.poll(Duration.ofSeconds(1));\n            for (ConsumerRecord&lt;String, String&gt; record: records) {\n                        process(record);  // å¤„ç†æ¶ˆæ¯\n                        offsets.put(new TopicPartition(record.topic(), record.partition()),\n                                   new OffsetAndMetadata(record.offset() + 1)ï¼›\n                       ifï¼ˆcount % 100 == 0ï¼‰\n                                    consumer.commitAsync(offsets, null); // å›è°ƒå¤„ç†é€»è¾‘æ˜¯null\n                        count++;\n\t}\n}\n</code></pre><p>ç®€å•è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç ã€‚ç¨‹åºå…ˆæ˜¯åˆ›å»ºäº†ä¸€ä¸ªMapå¯¹è±¡ï¼Œç”¨äºä¿å­˜Consumeræ¶ˆè´¹å¤„ç†è¿‡ç¨‹ä¸­è¦æäº¤çš„åˆ†åŒºä½ç§»ï¼Œä¹‹åå¼€å§‹é€æ¡å¤„ç†æ¶ˆæ¯ï¼Œå¹¶æ„é€ è¦æäº¤çš„ä½ç§»å€¼ã€‚è¿˜è®°å¾—ä¹‹å‰æˆ‘è¯´è¿‡è¦æäº¤ä¸‹ä¸€æ¡æ¶ˆæ¯çš„ä½ç§»å—ï¼Ÿè¿™å°±æ˜¯è¿™é‡Œæ„é€ OffsetAndMetadataå¯¹è±¡æ—¶ï¼Œä½¿ç”¨å½“å‰æ¶ˆæ¯ä½ç§»åŠ 1çš„åŸå› ã€‚ä»£ç çš„æœ€åéƒ¨åˆ†æ˜¯åšä½ç§»çš„æäº¤ã€‚æˆ‘åœ¨è¿™é‡Œè®¾ç½®äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯ç´¯è®¡100æ¡æ¶ˆæ¯å°±ç»Ÿä¸€æäº¤ä¸€æ¬¡ä½ç§»ã€‚ä¸è°ƒç”¨æ— å‚çš„commitAsyncä¸åŒï¼Œè¿™é‡Œè°ƒç”¨äº†å¸¦Mapå¯¹è±¡å‚æ•°çš„commitAsyncè¿›è¡Œç»†ç²’åº¦çš„ä½ç§»æäº¤ã€‚è¿™æ ·ï¼Œè¿™æ®µä»£ç å°±èƒ½å¤Ÿå®ç°æ¯å¤„ç†100æ¡æ¶ˆæ¯å°±æäº¤ä¸€æ¬¡ä½ç§»ï¼Œä¸ç”¨å†å—pollæ–¹æ³•è¿”å›çš„æ¶ˆæ¯æ€»æ•°çš„é™åˆ¶äº†ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ä»Šå¤©çš„å†…å®¹ã€‚Kafka Consumerçš„ä½ç§»æäº¤ï¼Œæ˜¯å®ç°Consumerç«¯è¯­ä¹‰ä¿éšœçš„é‡è¦æ‰‹æ®µã€‚ä½ç§»æäº¤åˆ†ä¸ºè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ï¼Œè€Œæ‰‹åŠ¨æäº¤åˆåˆ†ä¸ºåŒæ­¥æäº¤å’Œå¼‚æ­¥æäº¤ã€‚åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ¨èä½ ä½¿ç”¨æ‰‹åŠ¨æäº¤æœºåˆ¶ï¼Œå› ä¸ºå®ƒæ›´åŠ å¯æ§ï¼Œä¹Ÿæ›´åŠ çµæ´»ã€‚å¦å¤–ï¼Œå»ºè®®ä½ åŒæ—¶é‡‡ç”¨åŒæ­¥æäº¤å’Œå¼‚æ­¥æäº¤ä¸¤ç§æ–¹å¼ï¼Œè¿™æ ·æ—¢ä¸å½±å“TPSï¼Œåˆæ”¯æŒè‡ªåŠ¨é‡è¯•ï¼Œæ”¹å–„Consumeråº”ç”¨çš„é«˜å¯ç”¨æ€§ã€‚æ€»ä¹‹ï¼ŒKafka Consumer APIæä¾›äº†å¤šç§çµæ´»çš„æäº¤æ–¹æ³•ï¼Œæ–¹ä¾¿ä½ æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯å®šåˆ¶ä½ çš„æäº¤ç­–ç•¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a6/d1/a6e24c364321aaa44b8fedf3836bccd1.jpg?wh=2069*2569\" alt=\"\"></p><h2>å¼€æ”¾è®¨è®º</h2><p>å®é™…ä¸Šï¼Œæ‰‹åŠ¨æäº¤ä¹Ÿä¸èƒ½é¿å…æ¶ˆæ¯é‡å¤æ¶ˆè´¹ã€‚å‡è®¾Consumeråœ¨å¤„ç†å®Œæ¶ˆæ¯å’Œæäº¤ä½ç§»å‰å‡ºç°æ•…éšœï¼Œä¸‹æ¬¡é‡å¯åä¾ç„¶ä¼šå‡ºç°æ¶ˆæ¯é‡å¤æ¶ˆè´¹çš„æƒ…å†µã€‚è¯·ä½ æ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•å®ç°ä½ çš„ä¸šåŠ¡åœºæ™¯ä¸­çš„å»é‡é€»è¾‘å‘¢ï¼Ÿ</p><p>æ¬¢è¿å†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","comments":[{"had_liked":false,"id":159559,"user_name":"æ°´å¤©ä¸€è‰²","can_delete":false,"product_type":"c1","uid":1299931,"ip_address":"","ucode":"863643303BBB39","user_header":"https://static001.geekbang.org/account/avatar/00/13/d5/db/c45b90c8.jpg","comment_is_top":false,"comment_ctime":1575683617,"is_pvip":false,"replies":[{"id":"60990","content":"åªè¦consumeræ²¡æœ‰é‡å¯ï¼Œä¸ä¼šå‘ç”Ÿé‡å¤æ¶ˆè´¹ã€‚å› ä¸ºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­consumerä¼šè®°å½•å·²è·å–çš„æ¶ˆæ¯ä½ç§»","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1575719944,"ip_address":"","comment_id":159559,"utype":1}],"discussion_count":13,"race_medal":0,"score":"207734113825","product_id":100029201,"comment_content":"æ¶ˆè´¹è€…æäº†å¼‚æ­¥ commit å®é™…è¿˜æ²¡æ›´æ–°å®Œoffsetï¼Œæ¶ˆè´¹è€…å†ä¸æ–­åœ°pollï¼Œå…¶å®ä¼šæœ‰é‡å¤æ¶ˆè´¹çš„æƒ…å†µå§ï¼Ÿ","like_count":48,"discussions":[{"author":{"id":2577451,"avatar":"","nickname":"Geek_9c6c3e","note":"","ucode":"F3B71465B25BC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371394,"discussion_content":"éœ€è¦æäº¤çš„ä½ç§»åº”è¯¥ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯é‡å¯ä¹‹åæ¢å¤æ¶ˆæ¯è¿›åº¦ï¼Œconsumeræœ¬åœ°å†…å­˜ä¼šè®°å½•å½“å‰consumeræ¶ˆè´¹ä½ç§»ï¼Œæ”¹ä½ç§»å¯¹åº”æ­¤consumeræ­¤åˆ†åŒºï¼Œä¿è¯äº†æ¶ˆè´¹ä¸é‡å¤ä¹Ÿä¸ä¸¢å¤±ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1619753916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262460,"discussion_content":"â€œ åªè¦consumeræ²¡æœ‰é‡å¯ï¼Œä¸ä¼šå‘ç”Ÿé‡å¤æ¶ˆè´¹ã€‚å› ä¸ºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­consumerä¼šè®°å½•å·²è·å–çš„æ¶ˆæ¯ä½ç§»â€˜â€™\n\nè¿™å¥è¯ï¼Œè€å¸ˆçš„æ„æ€æ˜¯ï¼šè™½ç„¶ä¸èƒ½ä¿è¯å…ˆå¼‚æ­¥commitæˆåŠŸï¼Œç„¶åå¼€å§‹ä»commitçš„åœ°æ–¹pollï¼Œä½†æ˜¯consumer ç”±äºè®°å½•äº†ä¹‹å‰è·å–çš„æ¶ˆæ¯ä½ç§»ï¼Œæ‰€ä»¥ä¸‹æ¬¡pollæ—¶ï¼Œå®é™…æ˜¯ä»è¿˜æ²¡commit çš„offset å¼€å§‹poll?","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1589101577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284084,"discussion_content":"åº”è¯¥æ˜¯è¿™ä¸ªæ„æ€å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592442751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":262460,"ip_address":""},"score":284084,"extra":""},{"author":{"id":1702857,"avatar":"https://static001.geekbang.org/account/avatar/00/19/fb/c9/28e33d91.jpg","nickname":"å…»ç”Ÿå’–å•¡","note":"","ucode":"500DEDB969C9B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292664,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯æœ‰ä¸¤ä¸ªä½ç§»å’Œä¸€ä¸ªä¸´æ—¶å”¯ä¸€ï¼Œä¸€ä¸ªæ˜¯ä¸æ–­æ›´æ–°consumerç«¯çš„ä½ç§»Aä»¥åŠè¦æäº¤ç»™brokerä»ä½ç§»AæŸä¸ªæ—¶é—´ç‚¹æ‹·è´çš„ä¸´æ—¶ä½ç§»aã€‚æ¯æ¬¡pollä»¥ä½ç§»Aä¸ºå‡†ã€‚æœ€åä¸€ä¸ªä½ç§»Bä½äºbrokerç«¯ï¼Œæ˜¯consumeræäº¤è¿‡æ¥çš„ä¸´æ—¶ä½ç§»açš„å¤‡ä»½ï¼Œå¦‚æœconsumeré‡å¯ä¼šä¸¢å¤±ä½ç§»Aï¼Œaï¼Œæ­¤æ—¶éœ€è¦å»brokeræ‹‰å–å¤‡ä»½çš„ä½ç§»B","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1595300785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":262460,"ip_address":""},"score":292664,"extra":""}]},{"author":{"id":3069067,"avatar":"","nickname":"Geek_bd79d4","note":"","ucode":"63C47892E8F7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584459,"discussion_content":"Java docå›ç­”äº†ä½ è¿™ä¸ªç–‘é—®\n\nThis is an asynchronous call and will not block. Any errors encountered are either passed to the callback (if provided) or discarded.\nOffsets committed through multiple calls to this API are guaranteed to be sent in the same order as the invocations. Corresponding commit callbacks are also invoked in the same order. Additionally note that offsets committed through this API are guaranteed to complete before a subsequent call to commitSync() (and variants) returns.","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1660830434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540873,"discussion_content":"æˆ‘ä»¬çº¿ä¸Šé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ¶ˆè´¹è€…è·å–æ¶ˆæ¯åˆ—è¡¨ï¼ŒåŒ…å«æ¶ˆæ¯1ï¼Œ2ï¼Œ3ã€‚\næ¶ˆæ¯1æˆåŠŸæ¶ˆè´¹ï¼Œæ¶ˆæ¯2æ¶ˆè´¹å¤±è´¥ï¼Œè¿™æ—¶ä¸æ‰§è¡Œæ‰‹åŠ¨ commit offset(å¦‚æœ1ï¼Œ2ï¼Œ3éƒ½æˆåŠŸæ¶ˆè´¹ï¼Œä¼šæ‰§è¡Œæ‰‹åŠ¨ commit offset)ã€‚\nä¸‹ä¸€æ¬¡è·å–çš„æ¶ˆæ¯ä¸º4ï¼Œ5ï¼Œ6ã€‚æ¶ˆæ¯ 1ï¼Œ2ï¼Œ3 ä¸ä¼šå†è¢«è·å–åˆ°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640186468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477097,"discussion_content":"åªè¦consumeræ²¡æœ‰é‡å¯ï¼Œä¸ä¼šå‘ç”Ÿé‡å¤æ¶ˆè´¹ã€‚å› ä¸ºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­consumerä¼šè®°å½•å·²è·å–çš„æ¶ˆæ¯ä½ç§»","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575719944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1109389,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/8d/377c106a.jpg","nickname":"KWğŸ’¤","note":"","ucode":"290DD7016F4EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409284,"discussion_content":"æ¯æ¬¡pollå‰ä¼šæŠŠä¸Šæ¬¡pollçš„æœ€å¤§ä½ç§»åŒæ­¥commit","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635409362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2912918,"avatar":"","nickname":"Geek_284c06","note":"","ucode":"4BD6D4449D4F1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1109389,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/8d/377c106a.jpg","nickname":"KWğŸ’¤","note":"","ucode":"290DD7016F4EE0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577444,"discussion_content":"ä¸ä¸€å®šå§   å¦‚æœè¿˜æœªåˆ°é—´éš”æ—¶é—´æ€ä¹ˆæäº¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656120710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":409284,"ip_address":""},"score":577444,"extra":""}]},{"author":{"id":2114744,"avatar":"https://static001.geekbang.org/account/avatar/00/20/44/b8/d5fe40fb.jpg","nickname":"Vndi","note":"","ucode":"23DA6A7BE63E9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379252,"discussion_content":"é‚£å¦‚æœæ˜¯æ¶ˆè´¹è€…ç»„å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623771479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1589328,"avatar":"","nickname":"Cjmedia","note":"","ucode":"E1EEA0194078A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292514,"discussion_content":"æ­£æ˜¯æˆ‘æƒ³é—®çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595248932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065849,"avatar":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","nickname":"test","note":"","ucode":"9A4973E591DD12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286608,"discussion_content":"ä¸€ç›´å›°æƒ‘æˆ‘çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593243866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1636410,"avatar":"https://static001.geekbang.org/account/avatar/00/18/f8/3a/e0c14cb3.jpg","nickname":"lizhibo","note":"","ucode":"FDF4FA12C699B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275444,"discussion_content":"è€å¸ˆå¥½ï¼Œæˆ‘æƒ³å’¨è¯¢ä¸‹ï¼Œå¦‚æœæˆ‘æ¶ˆè´¹ç«¯ä»£ç å‡ºç°å¼‚å¸¸ï¼Œæˆ‘æ€ä¹ˆè®¾ç½®ä½“æ£€ä½ç§»è®©ä»–å¯ä»¥è‡ªåŠ¨æ¶ˆè´¹é‡è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590715978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113321,"user_name":"nightmare","can_delete":false,"product_type":"c1","uid":1056314,"ip_address":"","ucode":"EF2E51C2122A86","user_header":"https://static001.geekbang.org/account/avatar/00/10/1e/3a/5b21c01c.jpg","comment_is_top":false,"comment_ctime":1562951588,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"181951578020","product_id":100029201,"comment_content":"è€å¸ˆæ‰‹åŠ¨æäº¤çš„è®¾è®¡å¾ˆä¼˜ç¾ï¼Œå…ˆç”¨å¼‚æ­¥æäº¤ä¸å½±å“ç¨‹åºçš„æ€§èƒ½ï¼Œå†ç”¨consumerå…³é—­æ—¶åŒæ­¥æäº¤æ¥ç¡®ä¿ä½ç§»ä¸€å®šæäº¤æˆåŠŸã€‚è¿™é‡Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œæ¯”å¦‚æˆ‘ç¨‹åºè¿è¡ŒæœŸé—´æœ‰å¤šæ¬¡å¼‚æ­¥æäº¤æ²¡æœ‰æˆåŠŸï¼Œæ¯”å¦‚101çš„offsetå’Œ201çš„offsetæ²¡æœ‰æäº¤æˆåŠŸï¼Œç¨‹åºå…³é—­çš„æ—¶å€™501çš„offsetæäº¤æˆåŠŸäº†ï¼Œæ˜¯ä¸æ˜¯å°±ä»£è¡¨å‰é¢500æ¡æˆ‘è¿˜æ˜¯æ¶ˆè´¹æˆåŠŸäº†ï¼Œåªè¦æœ€æ–°çš„ä½ç§»æäº¤æˆåŠŸï¼Œå°±ä»£è¡¨ä¹‹å‰çš„æ¶ˆæ¯éƒ½æäº¤æˆåŠŸäº†ï¼Ÿç¬¬äºŒç‚¹ å°±æ˜¯æ‰¹é‡æäº¤å“ªé‡Œï¼Œå¦‚æœä¸€ä¸ªæ¶ˆè´¹è€…æ™“å¾—å¤šä¸ªåˆ†åŒºçš„æ¶ˆæ¯ï¼Œå°è£…åœ¨ä¸€ä¸ªMapå¯¹è±¡é‡Œé¢æ¶ˆè´¹è€…ä¹Ÿèƒ½æ­£ç¡®çš„å¯¹å¤šä¸ªåˆ†åŒºçš„ä½ç§»éƒ½ä¿è¯æ­£ç¡®çš„æäº¤å—ï¼Ÿ","like_count":42,"discussions":[{"author":{"id":1400754,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/b2/c4780c10.jpg","nickname":"æ›¹ä¼Ÿé›„","note":"","ucode":"9740E426C0742C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1886,"discussion_content":"ç¬¬1ä¸ªé—®é¢˜ï¼Œæ˜¯ä½ è¯´çš„é‚£æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563034260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324627,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ–‡ç« å¼€å¤´åº”è¯¥è·Ÿä½ è¯´çš„è¿™ç§åœºæ™¯ç±»ä¼¼å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605145472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1034204,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","nickname":"ban","note":"","ucode":"E523CE97E48266","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1889,"discussion_content":"ç¬¬äºŒä¸ªé—®é¢˜ï¼šoffsets.put(new TopicPartition(record.topic(), record.partition())\nmapé‡Œé¢å·²ç»åŒºåˆ«äº†topicå’Œåˆ†åŒºäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563037136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207098,"user_name":"Roy Liang","can_delete":false,"product_type":"c1","uid":1098898,"ip_address":"","ucode":"1DF5FC831A35DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/92/338b5609.jpg","comment_is_top":false,"comment_ctime":1587006256,"is_pvip":false,"replies":[{"id":"77468","content":"ä¸€ç›´ä»¥æ¥ï¼Œåœ¨ä¸šåŠ¡ç«¯å®ç°å»é‡æˆ–å¹‚ç­‰éƒ½æ˜¯é¿å…æ¶ˆè´¹çš„ä¸äºŒæ³•åˆ™ã€‚å•çº¯ä¾èµ–Kafkaé¿å…é‡å¤æ¶ˆè´¹å¾ˆéš¾åšåˆ°~","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1587089644,"ip_address":"","comment_id":207098,"utype":1}],"discussion_count":3,"race_medal":0,"score":"164795763504","product_id":100029201,"comment_content":"è¦å½»åº•é¿å…æ¶ˆæ¯é‡å¤æ¶ˆè´¹ï¼Œè¿™æ ·æ˜¯å¦å¯è¡Œï¼Ÿåœ¨consumerç«¯è¿›è¡Œå¹‚ç­‰æ“ä½œã€‚è¿™æ ·kafkaå°±å¯ä»¥è®¾ç½®è‡ªåŠ¨æäº¤ä½ç§»äº†","like_count":38,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492009,"discussion_content":"ä¸€ç›´ä»¥æ¥ï¼Œåœ¨ä¸šåŠ¡ç«¯å®ç°å»é‡æˆ–å¹‚ç­‰éƒ½æ˜¯é¿å…æ¶ˆè´¹çš„ä¸äºŒæ³•åˆ™ã€‚å•çº¯ä¾èµ–Kafkaé¿å…é‡å¤æ¶ˆè´¹å¾ˆéš¾åšåˆ°~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587089644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544177,"discussion_content":"ç¡®å®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641435018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2550743,"avatar":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","nickname":"if...else...","note":"","ucode":"D0565908C99695","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386777,"discussion_content":"å—¯ï¼Œæ­£è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627794153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113489,"user_name":"ban","can_delete":false,"product_type":"c1","uid":1034204,"ip_address":"","ucode":"E523CE97E48266","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","comment_is_top":false,"comment_ctime":1563030688,"is_pvip":false,"replies":[{"id":"41420","content":"ä¸ä¼šçš„ã€‚consumerå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæŒ‡é’ˆï¼Œèƒ½å¤Ÿæ¢æµ‹åˆ°ä¸‹ä¸€æ¡è¦æ¶ˆè´¹çš„æ•°æ®","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563156819,"ip_address":"","comment_id":113489,"utype":1}],"discussion_count":4,"race_medal":0,"score":"87462376608","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚æœ‰ä¸ªåœºæ™¯ä¸å¤ªæ˜ç™½ã€‚æˆ‘åšä¸ªå‡è®¾ï¼Œæ¯”å¦‚è¯´æˆ‘çš„æ¨¡å¼æ˜¯è‡ªåŠ¨æäº¤ï¼Œè‡ªåŠ¨æäº¤é—´éš”æ˜¯20ç§’ä¸€æ¬¡ï¼Œé‚£æˆ‘æ¶ˆè´¹äº†10ä¸ªæ¶ˆæ¯ï¼Œå¾ˆå¿«ä¸€ç§’å†…å°±ç»“æŸã€‚ä½†æ˜¯è¿™æ—¶å€™æˆ‘è‡ªåŠ¨æäº¤æ—¶é—´è¿˜æ²¡åˆ°ï¼ˆé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€ä¸ä¼šæäº¤offerï¼‰ï¼Œç„¶åè¿™æ—¶å€™æˆ‘åˆå»pollè·å–æ¶ˆæ¯ï¼Œä¼šä¸ä¼šå¯¼è‡´ä¸€ç›´è·å–ä¸Šä¸€æ‰¹çš„æ¶ˆæ¯ï¼Ÿ<br><br>è¿˜æ˜¯è¯´å¦‚æœconsumeræ¶ˆè´¹å®Œäº†ï¼Œè‡ªåŠ¨æäº¤æ—¶é—´è¿˜æ²¡åˆ°ï¼Œå¦‚æœä½ å»pollï¼Œè¿™æ—¶å€™ä¼šè‡ªåŠ¨æäº¤ï¼Œå°±ä¸ä¼šå‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å†µã€‚","like_count":20,"discussions":[{"author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262481,"discussion_content":"å‡å¦‚ è‡ªåŠ¨æäº¤ï¼Œé—´éš”20sï¼›ä¸€æ¬¡poll 10ä¸ªæ¶ˆæ¯ï¼Œ1s ç»“æŸï¼Œæ˜¾ç„¶ï¼Œè‡ªåŠ¨æäº¤çš„æ—¶åˆ»æœªåˆ°ï¼›\næ­¤æ—¶å† pollï¼Œå®é™…ä¸Šä¼šä»æ–°çš„ä½ç½®å¼€å§‹pollï¼Œè€Œä¸æ˜¯ä¹‹å‰çš„ä½ç½®ã€‚\n\nå…¶å®è¿™é‡Œæœ‰ä¸ªç»†èŠ‚ï¼š\næˆ‘ä»¬å¸¸è¯´ï¼Œconusmer poll æ˜¯ä»commit çš„ä½ç½®å¼€å§‹çš„ï¼›ä½†ä¹Ÿæœªå°½ç„¶ã€‚æŒç»­æ¶ˆè´¹çš„æ—¶å€™ï¼Œå°±ä¼šåˆ©ç”¨consumer å†…éƒ¨æŒ‡é’ˆæ¢æµ‹åˆ°ä¸‹ä¸€æ¬¡pollçš„ä½ç½®ï¼Œå¯èƒ½è¿™ä¸ªä½ç½®è¿˜æ²¡commit å‘¢ã€‚\n\n","likes_number":29,"is_delete":false,"is_hidden":false,"ctime":1589104608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2912918,"avatar":"","nickname":"Geek_284c06","note":"","ucode":"4BD6D4449D4F1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577388,"discussion_content":"æ‰€ä»¥ä»–åœ¨è¿˜æ²¡æäº¤ä½ç§»çš„æ—¶å€™çš„æ‹‰å–è¿˜æ˜¯ä¼šæŠŠä¸Šæ¬¡æ¶ˆè´¹è¿‡çš„æ¶ˆæ¯æ‹‰å–ä¸‹æ¥ã€‚\nåªä¸è¿‡ä¼šé€šè¿‡comsumeré‡Œé¢çš„æŒ‡é’ˆï¼Œæ¥é˜²æ­¢é‡å¤æ¶ˆè´¹ï¼Œå¯¹å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656061695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":262481,"ip_address":""},"score":577388,"extra":""}]},{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458246,"discussion_content":"ä¸ä¼šçš„ã€‚consumerå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæŒ‡é’ˆï¼Œèƒ½å¤Ÿæ¢æµ‹åˆ°ä¸‹ä¸€æ¡è¦æ¶ˆè´¹çš„æ•°æ®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563156819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2912918,"avatar":"","nickname":"Geek_284c06","note":"","ucode":"4BD6D4449D4F1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":577452,"discussion_content":"å®ƒç©¶ç«Ÿä¼šä¸ä¼šæŠŠå·²ç»æ¶ˆè´¹çš„æ•°æ®æ‹‰ä¸‹æ¥å‘¢ã€‚\næˆ‘çŒœåœ¨æ²¡æœ‰committedä½ç§»çš„æ—¶å€™å»pollåº”è¯¥æ˜¯ä¼šæ‹‰å–ä¸‹æ¥çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656122878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":458246,"ip_address":""},"score":577452,"extra":""}]}]},{"had_liked":false,"id":206721,"user_name":"july","can_delete":false,"product_type":"c1","uid":1344289,"ip_address":"","ucode":"E081987929063A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEYbNElGIxY6Le1rfiakWJecz8JIOp06Y9JQFR2YBn3T3gx3icI5CKxZNgxgqiaKbfVOicXquO3QBw9w/132","comment_is_top":false,"comment_ctime":1586921315,"is_pvip":false,"replies":[{"id":"77328","content":"åŸºæœ¬ä¸Šæ˜¯è¿™æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1587003781,"ip_address":"","comment_id":206721,"utype":1}],"discussion_count":3,"race_medal":0,"score":"70306398051","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¿™é‡Œæ˜¯å¦å¯ä»¥ç†è§£ä¸º è‡ªåŠ¨æäº¤é€»è¾‘æ˜¯åœ¨pollæ–¹æ³•ä¸­ï¼Œå¦‚æœé—´éš”å¤§äºæœ€å°æäº¤é—´éš”ï¼Œå°±ä¼šè¿è¡Œé€»è¾‘è¿›è¡Œoffsetæäº¤ï¼Œå¦‚æœå°äºæœ€å°é—´éš”ï¼Œåˆ™å¿½ç•¥offsetæäº¤é€»è¾‘ï¼Ÿä¹Ÿå°±æ˜¯è¯´ä¸Šæ¬¡poll çš„æ•°æ®å³ä¾¿å¤„ç†ç»“æŸï¼Œæ²¡æœ‰è°ƒç”¨ä¸‹ä¸€æ¬¡pollï¼Œé‚£ä¹ˆoffsetä¹Ÿä¸ä¼šæäº¤ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491878,"discussion_content":"åŸºæœ¬ä¸Šæ˜¯è¿™æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587003781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1618235,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/3b/f7453caa.jpg","nickname":"æš—æ ","note":"","ucode":"4BF154C17691AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360433,"discussion_content":"å¦‚æœç¬¬äºŒæ¬¡æ²¡æœ‰pull ï¼Œå³ä½¿è¶…è¿‡é—´éš”æ—¶é—´ä¹Ÿä¸ä¼šè‡ªåŠ¨æäº¤å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616433205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1346215,"avatar":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","nickname":"William","note":"","ucode":"55F5D9DEE485B1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1618235,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/3b/f7453caa.jpg","nickname":"æš—æ ","note":"","ucode":"4BF154C17691AA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544524,"discussion_content":"ä¸ªäººç†è§£ï¼Œè‹¥æ²¡æœ‰ç¬¬äºŒæ¬¡pullï¼Œè¶…è¿‡äº†é—´éš”æ—¶é—´å°±ä¼šæäº¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641545999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":360433,"ip_address":""},"score":544524,"extra":""}]}]},{"had_liked":false,"id":115655,"user_name":"æ— è‡æœ‹å‹","can_delete":false,"product_type":"c1","uid":1035562,"ip_address":"","ucode":"80482C5F0464A3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/2a/bdbed6ed.jpg","comment_is_top":false,"comment_ctime":1563685136,"is_pvip":false,"replies":[{"id":"42307","content":"å—¯ï¼Œ ä¸¥æ ¼æ¥è¯´ã€‚æäº¤é¢‘ç‡æŒ‡çš„æ˜¯æœ€å°çš„æäº¤é—´éš”ã€‚æ¯”å¦‚è®¾ç½®5sï¼ŒKafkaä¿è¯è‡³å°‘ç­‰å¾…5sæ‰ä¼šè‡ªåŠ¨æäº¤ä¸€æ¬¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563752607,"ip_address":"","comment_id":115655,"utype":1}],"discussion_count":4,"race_medal":0,"score":"65988194576","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆpollä¹‹å‰çš„æäº¤å’ŒæŒ‰é¢‘ç‡è‡ªåŠ¨æäº¤æ˜¯ä¸€ä¸ªæ—¶æœºï¼Œå‡å¦‚é¢‘ç‡æ˜¯5sæäº¤ä¸€æ¬¡ï¼ŒæŸä¸¤æ¬¡pollä¹‹é—´çš„é—´éš”æ˜¯6sï¼Œè¿™æ—¶å€™æ˜¯æ€ä¹ˆå¤„ç†æäº¤çš„ï¼Ÿå¿˜è€å¸ˆè§£ç­”ä¸‹ï¼Œç€å®æ²¡æƒ³é€šè¿™ä¸ªåœ°æ–¹","like_count":15,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459210,"discussion_content":"å—¯ï¼Œ ä¸¥æ ¼æ¥è¯´ã€‚æäº¤é¢‘ç‡æŒ‡çš„æ˜¯æœ€å°çš„æäº¤é—´éš”ã€‚æ¯”å¦‚è®¾ç½®5sï¼ŒKafkaä¿è¯è‡³å°‘ç­‰å¾…5sæ‰ä¼šè‡ªåŠ¨æäº¤ä¸€æ¬¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563752607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262474,"discussion_content":"é‚£å‡å¦‚ï¼š commit é¢‘ç‡æ˜¯5 s ï¼Œpoll é¢‘ç‡æ˜¯ 4s ,è¿™ç§æƒ…å†µä¸‹ï¼Œ å®é™… poll ä¹Ÿä¼šå˜æˆ 5sï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589103477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1257422,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2f/ce/c72d4c67.jpg","nickname":"movesan","note":"","ucode":"29CDF0F2B604C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296897,"discussion_content":"åº”è¯¥æ˜¯pollçš„æ—¶å€™æäº¤ï¼Œcommitçš„é¢‘ç‡æ˜¯æœ€å°æäº¤é—´éš”ï¼Œå‡å¦‚pollçš„é¢‘ç‡æ˜¯2ç§’ï¼Œå®é™…ä¸Šå‰ä¸¤æ¬¡poll çš„æ—¶å€™åº”è¯¥ä¸ä¼šæäº¤ï¼Œè€Œæ˜¯åœ¨ç¬¬ä¸‰æ¬¡pollçš„æ—¶å€™ä¹Ÿå°±æ˜¯6ç§’çš„æ—¶å€™æäº¤ï¼Œä¸ªäººç†è§£","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1596699328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":262474,"ip_address":""},"score":296897,"extra":""},{"author":{"id":2226367,"avatar":"https://static001.geekbang.org/account/avatar/00/21/f8/bf/59f2e600.jpg","nickname":"æœˆæ˜é£æ¸…","note":"","ucode":"65A97CF2E320FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1257422,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2f/ce/c72d4c67.jpg","nickname":"movesan","note":"","ucode":"29CDF0F2B604C8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572896,"discussion_content":"å¦‚æœä½ æ²¡æœ‰æäº¤ï¼Œä¸¤æ¬¡ pollï¼Œä¸ä¼šè¯»åˆ°é‡å¤çš„æ¶ˆæ¯å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653032727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296897,"ip_address":""},"score":572896,"extra":""}]}]},{"had_liked":false,"id":148016,"user_name":"æ³¨å®šéå‡¡","can_delete":false,"product_type":"c1","uid":1113597,"ip_address":"","ucode":"80673056E131B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","comment_is_top":false,"comment_ctime":1572929219,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"61702471363","product_id":100029201,"comment_content":"1 æ¦‚å¿µåŒºåˆ†<br>\tA ï¼šConsumerç«¯çš„ä½ç§»æ¦‚å¿µå’Œæ¶ˆæ¯åˆ†åŒºçš„ä½ç§»æ¦‚å¿µä¸æ˜¯ä¸€å›äº‹ã€‚<br>\tB ï¼šConsumerçš„æ¶ˆè´¹ä½ç§»ï¼Œè®°å½•çš„æ˜¯Consumerè¦æ¶ˆè´¹çš„ä¸‹ä¸€æ¡æ¶ˆæ¯çš„ä½ç§»ã€‚<br><br>2 æäº¤ä½ç§»<br>\tA ï¼šConsumer è¦å‘Kafkaæ±‡æŠ¥è‡ªå·±çš„ä½ç§»æ•°æ®ï¼Œè¿™ä¸ªæ±‡æŠ¥è¿‡ç¨‹è¢«ç§°ä¸ºæäº¤ä½ç§»ï¼ˆCommitting Offsetsï¼‰ã€‚<br>\tB ï¼šConsumeréœ€è¦ä¸ºåˆ†é…ç»™å®ƒçš„æ¯ä¸ªåˆ†åŒºæäº¤å„è‡ªçš„ä½ç§»æ•°æ®ã€‚<br><br>3æäº¤ä½ç§»çš„ä½œç”¨<br>\tA ï¼šæäº¤ä½ç§»ä¸»è¦æ˜¯ä¸ºäº†è¡¨å¾Consumerçš„æ¶ˆè´¹è¿›åº¦ï¼Œè¿™æ ·å½“Consumerå‘ç”Ÿæ•…éšœé‡å¯åï¼Œèƒ½å¤Ÿä»kafkaä¸­è¯»å–ä¹‹å‰æäº¤çš„ä½ç§»å€¼ï¼Œä»ç›¸åº”çš„ä½ç½®ç»§ç»­æ¶ˆè´¹ï¼Œé¿å…ä»å¤´åœ¨æ¶ˆè´¹ä¸€éã€‚<br><br>4 ä½ç§»æäº¤çš„ç‰¹ç‚¹<br>\tA ï¼šä½ç§»æäº¤çš„è¯­ä¹‰ä¿éšœæ˜¯ç”±ä½ æ¥è´Ÿè´£çš„ï¼ŒKafkaåªä¼šâ€œæ— è„‘â€åœ°æ¥å—ä½ æäº¤çš„ä½ç§»ã€‚ä½ç§»æäº¤é”™è¯¯ï¼Œå°±ä¼šæ¶ˆæ¯æ¶ˆè´¹é”™è¯¯ã€‚<br><br>5 ä½ç§»æäº¤æ–¹å¼<br>\tA ï¼šä»ç”¨æˆ·çš„è§’åº¦è®²ï¼Œä½ç§»æäº¤åˆ†ä¸ºè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ï¼›ä»Consumerç«¯çš„è§’åº¦è€Œè¨€ï¼Œä½ç§»æäº¤åˆ†ä¸ºåŒæ­¥æäº¤å’Œå¼‚æ­¥æäº¤ã€‚<br><br>\tB ï¼šè‡ªåŠ¨æäº¤ï¼šç”±Kafka consumeråœ¨åå°é»˜é»˜çš„æ‰§è¡Œæäº¤ä½ç§»ï¼Œç”¨æˆ·ä¸ç”¨ç®¡ã€‚å¼€å¯ç®€å•ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œä½†å¯èƒ½ä¼šå‡ºç°é‡å¤æ¶ˆè´¹ã€‚<br><br>\tC ï¼šæ‰‹åŠ¨æäº¤ï¼šå¥½å¤„åœ¨æ›´åŠ çµæ´»ï¼Œå®Œå…¨èƒ½å¤ŸæŠŠæ§ä½ç§»æäº¤çš„æ—¶æœºå’Œé¢‘ç‡ã€‚<br>\t\tï¼ˆ1ï¼‰åŒæ­¥æäº¤ï¼šåœ¨è°ƒç”¨commitSync()æ—¶ï¼ŒConsumerç¨‹åºä¼šå¤„äºé˜»å¡çŠ¶æ€ï¼Œç›´åˆ°è¿œç«¯Brokerè¿”å›æäº¤ç»“æœï¼Œè¿™ä¸ªçŠ¶æ€æ‰ä¼šç»“æŸã€‚å¯¹TPSå½±å“æ˜¾è‘—<br>\t\tï¼ˆ2ï¼‰å¼‚æ­¥æäº¤ï¼šåœ¨è°ƒç”¨commitAsync()æ—¶ï¼Œä¼šç«‹å³ç»™å“åº”ï¼Œä½†æ˜¯å‡ºé—®é¢˜äº†å®ƒä¸ä¼šè‡ªåŠ¨é‡è¯•ã€‚<br>\t\tï¼ˆ3ï¼‰æ‰‹åŠ¨æäº¤æœ€å¥½æ˜¯åŒæ­¥å’Œå¼‚æ­¥ç»“åˆä½¿ç”¨ï¼Œæ­£å¸¸ç”¨å¼‚æ­¥æäº¤ï¼Œå¦‚æœå¼‚æ­¥æäº¤å¤±è´¥ï¼Œç”¨åŒæ­¥æäº¤æ–¹å¼è¡¥å¿æäº¤ã€‚<br>\t<br>\tD ï¼šæ‰¹æ¬¡æäº¤ï¼šå¯¹äºä¸€æ¬¡è¦å¤„ç†å¾ˆå¤šæ¶ˆè´¹çš„Consumerè€Œè¨€ï¼Œå°†ä¸€ä¸ªå¤§äº‹åŠ¡åˆ†å‰²æˆè‹¥å¹²ä¸ªå°äº‹åŠ¡åˆ†åˆ«æäº¤ã€‚è¿™å¯ä»¥æœ‰æ•ˆå‡å°‘é”™è¯¯æ¢å¤çš„æ—¶é—´ï¼Œé¿å…å¤§æ‰¹é‡çš„æ¶ˆæ¯é‡æ–°æ¶ˆè´¹ã€‚<br>\t\tï¼ˆ1ï¼‰ä½¿ç”¨commitSyncï¼ˆMap&lt;TopicPartitionï¼ŒOffset&gt;ï¼‰å’ŒcommitAsync(Map&lt;TopicPartitionï¼ŒOffsetAndMetadata&gt;)ã€‚<br>","like_count":14,"discussions":[{"author":{"id":2739957,"avatar":"","nickname":"Geek_39299b","note":"","ucode":"908C2FC4DECD33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389448,"discussion_content":"éå‡¡å“¥ ç»ˆäºæ¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629279530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113356,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1562983838,"is_pvip":false,"replies":[{"id":"41422","content":"å¦‚æœè°ƒç”¨æ²¡æœ‰å‚æ•°çš„commitï¼Œé‚£ä¹ˆæäº¤çš„æ˜¯500","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563157078,"ip_address":"","comment_id":113356,"utype":1}],"discussion_count":11,"race_medal":0,"score":"53102591390","product_id":100029201,"comment_content":"å¯¹äºæ‰‹åŠ¨åŒæ­¥å’Œå¼‚æ­¥æäº¤ç»“åˆçš„åœºæ™¯ï¼Œå¦‚æœpollå‡ºæ¥çš„æ¶ˆæ¯æ˜¯500æ¡ï¼Œè€Œä¸šåŠ¡å¤„ç†200æ¡çš„æ—¶å€™ï¼Œä¸šåŠ¡æŠ›å¼‚å¸¸äº†ï¼Œåç»­æ¶ˆæ¯æ ¹æœ¬å°±æ²¡æœ‰è¢«éå†è¿‡ï¼Œfinallyé‡Œæ‰‹åŠ¨åŒæ­¥æäº¤çš„æ˜¯201è¿˜æ˜¯000ï¼Œè¿˜æ˜¯501ï¼Ÿ","like_count":12,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458184,"discussion_content":"å¦‚æœè°ƒç”¨æ²¡æœ‰å‚æ•°çš„commitï¼Œé‚£ä¹ˆæäº¤çš„æ˜¯500","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563157078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1096652,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bb/cc/fac12364.jpg","nickname":"xxx","note":"","ucode":"E79CEA70430449","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584319,"discussion_content":"åŒæœ‰æ­¤é—®ï¼Œæ‰€ä»¥è€å¸ˆé‚£ä¸ªä¾‹å­ä¸èƒ½è¿™ä¹ˆç©ï¼Œé™¤éä¸šåŠ¡ä¸è¦æ±‚ç²¾ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660744643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329418,"discussion_content":"æ‰‹åŠ¨æäº¤ï¼Œåº”è¯¥æ˜¯ç­‰500æ¡éƒ½æ¶ˆè´¹åœ¨æäº¤ï¼Œä¸‹å› æ¶ˆè´¹åº”è¯¥ä»0å¼€å§‹å§ï¼Œå› ä¸ºä½ éƒ½æ²¡æäº¤offsetï¼Œä¸ºå•¥å¾ˆå¤šäººè¯´500ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606381404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1529871,"avatar":"https://static001.geekbang.org/account/avatar/00/17/58/0f/c412b4a9.jpg","nickname":"Curry","note":"","ucode":"AABD3AA2EB2C95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258148,"discussion_content":"è¯·é—®è€å¸ˆé‚£è¿™äº›æ²¡æ¶ˆè´¹çš„æ•°æ®å²‚ä¸æ˜¯ä¸¢å¤±äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588653463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1529871,"avatar":"https://static001.geekbang.org/account/avatar/00/17/58/0f/c412b4a9.jpg","nickname":"Curry","note":"","ucode":"AABD3AA2EB2C95","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262469,"discussion_content":"ä¸¥æ ¼æ¥è¯´ï¼Œè¿™ç§æƒ…å†µä¸‹çš„é˜²â€œä¸¢å¤±â€ä¸æ˜¯kafkaå®¢æˆ·ç«¯è¦åšçš„ã€‚\nè€Œæ˜¯ç”±ä¸šåŠ¡ä»£ç è‡ªå·±ä¿è¯çš„ã€‚\næŒ‰ç…§è€å¸ˆåŒæ­¥ ã€å¼‚æ­¥æäº¤ç»“åˆçš„èŒƒä¾‹ä»£ç ï¼Œå…¶å®æ˜¯è¦æ±‚ä¸šåŠ¡ä¸Šåšå¥½ process() ä¸­çš„å¼‚å¸¸å¤„ç†çš„ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1589102514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":258148,"ip_address":""},"score":262469,"extra":""},{"author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1529871,"avatar":"https://static001.geekbang.org/account/avatar/00/17/58/0f/c412b4a9.jpg","nickname":"Curry","note":"","ucode":"AABD3AA2EB2C95","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262471,"discussion_content":"ç®€å•ç²—æš´ç†è§£ï¼š\nä¸€æ¬¡poll æˆåŠŸ çš„ æ¶ˆæ¯é›†åˆï¼Œåœ¨kafkaçœ‹æ¥ï¼Œå°±æ˜¯ â€œæ¶ˆè´¹â€æˆåŠŸäº†ï¼Œå³ä½¿åœ¨ä¸šåŠ¡ä¸Šçœ‹å¹¶éå¦‚æ­¤ã€‚\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1589102694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":258148,"ip_address":""},"score":262471,"extra":""}]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52299,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574037451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1503593,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f1/69/19a0a4ce.jpg","nickname":"Tearsç¬T","note":"","ucode":"2AD0EE638D3DDB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6640,"discussion_content":"500å§ï¼Œ0~499","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567006036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1050508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","nickname":"èš‚èšå†…æ¨+v","note":"","ucode":"24B10AEE54B3FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1503593,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f1/69/19a0a4ce.jpg","nickname":"Tearsç¬T","note":"","ucode":"2AD0EE638D3DDB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85516,"discussion_content":"é‚£200-500çš„æ¶ˆæ¯å²‚ä¸æ˜¯å°±æœªæ¶ˆè´¹ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1576551503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6640,"ip_address":""},"score":85516,"extra":""}]},{"author":{"id":1400754,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/b2/c4780c10.jpg","nickname":"æ›¹ä¼Ÿé›„","note":"","ucode":"9740E426C0742C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1887,"discussion_content":"æ˜¯501","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563034389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1400754,"avatar":"https://static001.geekbang.org/account/avatar/00/15/5f/b2/c4780c10.jpg","nickname":"æ›¹ä¼Ÿé›„","note":"","ucode":"9740E426C0742C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279133,"discussion_content":"0-499 500","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591284987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1887,"ip_address":""},"score":279133,"extra":""}]}]},{"had_liked":false,"id":219191,"user_name":"æˆ‘å·²ç»è®¾ç½®äº†æ˜µç§°","can_delete":false,"product_type":"c1","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1589964031,"is_pvip":false,"replies":[{"id":"80978","content":"è¿™ä¸ªå‚æ•°å…¶å®æœ‰ç‚¹è¯¯å¯¼ã€‚å®ƒå…¶å®çš„æ„æ€æ˜¯è‡³å°‘5ç§’ã€‚å¯èƒ½å¤šäº5ç§’","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1589974335,"ip_address":"","comment_id":219191,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35949702399","product_id":100029201,"comment_content":"auto.commit.interval.msä¸º5ç§’ï¼Œä¸”ä¸ºè‡ªåŠ¨æäº¤<br>å¦‚æœä¸šåŠ¡5ç§’å†…è¿˜æ²¡å¤„ç†å®Œï¼Œè¿™ä¸ªå®¢æˆ·ç«¯æ€ä¹ˆå¤„ç†offset","like_count":8,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495708,"discussion_content":"è¿™ä¸ªå‚æ•°å…¶å®æœ‰ç‚¹è¯¯å¯¼ã€‚å®ƒå…¶å®çš„æ„æ€æ˜¯è‡³å°‘5ç§’ã€‚å¯èƒ½å¤šäº5ç§’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589974335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136243,"user_name":"Algoric","can_delete":false,"product_type":"c1","uid":1298722,"ip_address":"","ucode":"78D9850A88C254","user_header":"https://static001.geekbang.org/account/avatar/00/13/d1/22/706c492e.jpg","comment_is_top":false,"comment_ctime":1569394766,"is_pvip":false,"replies":[{"id":"52218","content":"hmmm... å…¶å®æˆ‘ä¸€ç›´è§‰å¾—æäº¤é—´éš”è¿™ä¸ªå‚æ•°çš„å‘½åæœ‰äº›é—®é¢˜ã€‚å®ƒå®é™…ä¿è¯çš„æ˜¯ä½ç§»è‡³å°‘è¦éš”ä¸€æ®µæ—¶é—´æ‰ä¼šæäº¤ï¼Œå¦‚æœä½ æ˜¯å•çº¿ç¨‹å¤„ç†æ¶ˆæ¯ï¼Œé‚£ä¹ˆåªæœ‰å¤„ç†å®Œæ¶ˆæ¯åæ‰ä¼šæäº¤ä½ç§»ï¼Œå¯èƒ½è¿œæ¯”ä½ è®¾ç½®çš„é—´éš”é•¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1569409730,"ip_address":"","comment_id":136243,"utype":1}],"discussion_count":8,"race_medal":0,"score":"31634165838","product_id":100029201,"comment_content":"è‡ªåŠ¨æäº¤ä¸€å®šä¸ä¼šæ¶ˆæ¯ä¸¢å¤±å—ï¼Œå¦‚æœæ¯æ¬¡pollçš„æ•°æ®è¿‡å¤šï¼Œåœ¨æäº¤æ—¶é—´å†…æ²¡æœ‰å¤„ç†å®Œï¼Œè¿™æ—¶è¾¾åˆ°æäº¤æ—¶é—´ï¼Œé‚£ä¹ˆKafkaè¿˜æ˜¯é‡å¤æäº¤ä¸Šæ¬¡pollçš„æœ€å¤§ä½ç§»å—ï¼Œè¿˜æ˜¯è®²æœ¬æ¬¡pollçš„æ¶ˆæ¯æœ€å¤§ä½ç§»æäº¤ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468523,"discussion_content":"hmmm... å…¶å®æˆ‘ä¸€ç›´è§‰å¾—æäº¤é—´éš”è¿™ä¸ªå‚æ•°çš„å‘½åæœ‰äº›é—®é¢˜ã€‚å®ƒå®é™…ä¿è¯çš„æ˜¯ä½ç§»è‡³å°‘è¦éš”ä¸€æ®µæ—¶é—´æ‰ä¼šæäº¤ï¼Œå¦‚æœä½ æ˜¯å•çº¿ç¨‹å¤„ç†æ¶ˆæ¯ï¼Œé‚£ä¹ˆåªæœ‰å¤„ç†å®Œæ¶ˆæ¯åæ‰ä¼šæäº¤ä½ç§»ï¼Œå¯èƒ½è¿œæ¯”ä½ è®¾ç½®çš„é—´éš”é•¿ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569409730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2213774,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLWlndLduM3SGiauJvia0oVdhH8FhbviaS9EsD0fM93PwEKg0Syk1I5strKbsZNoXE0klauTGAwW1DGQ/132","nickname":"é™ˆæ–°å«","note":"","ucode":"6EF232730D0FD7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333303,"discussion_content":"å¦‚æœè‡ªåŠ¨æäº¤ä½ç§»çš„é€»è¾‘åœ¨pollé‡Œé¢ï¼Œé‚£å¦‚æœæˆ‘è¿™æ¬¡æ‹‰å–äº†10æ¡æ¶ˆæ¯ï¼Œç„¶åä¸å†è°ƒç”¨poll,é‚£ä¹ˆè¿™10æ¡æ¶ˆæ¯å¯¹åº”çš„ä½ç§»è¿˜ä¼šæäº¤å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607498128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1618235,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b1/3b/f7453caa.jpg","nickname":"æš—æ ","note":"","ucode":"4BF154C17691AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2213774,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLWlndLduM3SGiauJvia0oVdhH8FhbviaS9EsD0fM93PwEKg0Syk1I5strKbsZNoXE0klauTGAwW1DGQ/132","nickname":"é™ˆæ–°å«","note":"","ucode":"6EF232730D0FD7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360434,"discussion_content":"å¦‚æœä½ æ—¶é—´å¤ªé•¿ï¼Œä¼šè§¦å‘é‡å¹³è¡¡ï¼Œä¼šé‡æ–°æ¶ˆè´¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616433443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":333303,"ip_address":""},"score":360434,"extra":""},{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2213774,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLWlndLduM3SGiauJvia0oVdhH8FhbviaS9EsD0fM93PwEKg0Syk1I5strKbsZNoXE0klauTGAwW1DGQ/132","nickname":"é™ˆæ–°å«","note":"","ucode":"6EF232730D0FD7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379675,"discussion_content":"å¦‚æœè‡ªåŠ¨æäº¤çš„æ—¶é—´åˆ°äº†ï¼Œç„¶åè·ä¸Šæ¬¡æäº¤ä¹Ÿè¶…è¿‡äº†auto.commit.interval.msï¼Œé‚£æœ¬æ¬¡è‡ªåŠ¨æäº¤å°±ä¼šæˆåŠŸã€‚è€Œä¸”åº”è¯¥ä¸ä¼šä¸è°ƒç”¨pollï¼Œè¿™ä¸ç›¸å½“äºconsumerä¸åœ¨å¹²æ´»ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624069309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":333303,"ip_address":""},"score":379675,"extra":""}]},{"author":{"id":1344289,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEYbNElGIxY6Le1rfiakWJecz8JIOp06Y9JQFR2YBn3T3gx3icI5CKxZNgxgqiaKbfVOicXquO3QBw9w/132","nickname":"july","note":"","ucode":"E081987929063A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233371,"discussion_content":"è€å¸ˆä½ å¥½ï¼Œè¿™é‡Œæ˜¯å¦å¯ä»¥ç†è§£ä¸º è‡ªåŠ¨æäº¤é€»è¾‘æ˜¯åœ¨pollæ–¹æ³•ä¸­ï¼Œå¦‚æœé—´éš”å¤§äºæœ€å°æäº¤é—´éš”ï¼Œå°±ä¼šè¿è¡Œé€»è¾‘è¿›è¡Œoffsetæäº¤ï¼Œå¦‚æœå°äºæœ€å°é—´éš”ï¼Œåˆ™å¿½ç•¥offsetæäº¤é€»è¾‘ï¼Ÿä¹Ÿå°±æ˜¯è¯´ä¸Šæ¬¡poll çš„æ•°æ®å³ä¾¿å¤„ç†ç»“æŸï¼Œæ²¡æœ‰è°ƒç”¨ä¸‹ä¸€æ¬¡pollï¼Œé‚£ä¹ˆoffsetä¹Ÿä¸ä¼šæäº¤ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586921235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1344289,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEYbNElGIxY6Le1rfiakWJecz8JIOp06Y9JQFR2YBn3T3gx3icI5CKxZNgxgqiaKbfVOicXquO3QBw9w/132","nickname":"july","note":"","ucode":"E081987929063A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390146,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629689986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":233371,"ip_address":""},"score":390146,"extra":""}]},{"author":{"id":1398824,"avatar":"https://static001.geekbang.org/account/avatar/00/15/58/28/c86340ca.jpg","nickname":"è¾¾æ–‡è¥¿","note":"","ucode":"01C1063F23D634","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53379,"discussion_content":"mark,  auto.commit.interval.ms è®¾ç½®çš„æ˜¯æœ€å°æäº¤é—´éš”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574162923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1298722,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d1/22/706c492e.jpg","nickname":"Algoric","note":"","ucode":"78D9850A88C254","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21011,"discussion_content":"åŸæ¥æ˜¯è¿™æ ·ï¼Œè°¢è°¢è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569412361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113760,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1563152385,"is_pvip":false,"replies":[{"id":"41414","content":"å®ƒä»¬å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ—¶æœº","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563156066,"ip_address":"","comment_id":113760,"utype":1}],"discussion_count":4,"race_medal":0,"score":"23037988865","product_id":100029201,"comment_content":"æ‰€ä»¥è‡ªåŠ¨æäº¤æœ‰2ä¸ªæ—¶æœºå—ï¼Ÿ<br><br>1 å›ºå®šé¢‘ç‡æåŠï¼Œä¾‹å¦‚5sæåŠä¸€æ¬¡<br>2 pollæ–°æ•°æ®ä¹‹å‰æäº¤å‰é¢æ¶ˆè´¹çš„æ•°æ®","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458372,"discussion_content":"å®ƒä»¬å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ—¶æœº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563156066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1473167,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/et0qH6zf5icoo6YJoH2WDyia7MTtdQiasicFecfMupzT5VD18aOjzoiaym1OP9RGUEUvLsPRUmCZVSTbrmydpNicVAPA/132","nickname":"GeekJohn","note":"","ucode":"C00462E2195C81","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576593,"discussion_content":"auto.commit.interval.msåªæ˜¯ç¡®å®šäº†æäº¤ä½ç§»çš„æœ€å°æ—¶é—´é—´éš”ï¼Œè€Œæäº¤ä½ç§»çš„åŠ¨ä½œæ˜¯éšè—åœ¨æ¯ä¸€æ¬¡çš„pollæ–¹æ³•ä¸­çš„ï¼Œè¿™ä¸€æ¬¡çš„pollä¼šå…ˆæäº¤ä¸Šä¸€æ¬¡çš„ä½ç§»ï¼Œpollæ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœæ—¶é—´é—´éš”å¤§äºauto.commit.interval.msè®¾ç½®çš„æ—¶é—´é—´éš”ï¼Œå°±ä¼šè¿›è¡Œä½ç§»æäº¤ï¼Œå¦‚æœå°äºï¼Œåˆ™ä¸ä¼šè¿›è¡Œæäº¤ã€‚å½“ç„¶ï¼Œå¦‚æœè¿‡äº†auto.commit.interval.msçš„æ—¶é—´é—´éš”ï¼Œä»ç„¶æ²¡æœ‰ä¸‹ä¸€æ¬¡çš„pollæ–¹æ³•ï¼Œé‚£ä¹ˆä¾ç„¶ä¸ä¼šè¿›è¡Œä½ç§»æäº¤ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655692590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001861,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/85/3f161d95.jpg","nickname":"Alpha","note":"","ucode":"60CA15A25EC796","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310659,"discussion_content":"ä¸å¤ªæ˜ç™½ä¸ºä»€ä¹ˆæ˜¯åŒä¸€ä¸ªæ—¶æœºï¼Ÿå¦‚æœæ˜¯pollæ—¶è§¦å‘æäº¤ï¼Œé‚£å¹¶ä¸æ˜¯å›ºå®šé¢‘ç‡å§ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601975439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2213774,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLWlndLduM3SGiauJvia0oVdhH8FhbviaS9EsD0fM93PwEKg0Syk1I5strKbsZNoXE0klauTGAwW1DGQ/132","nickname":"é™ˆæ–°å«","note":"","ucode":"6EF232730D0FD7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333302,"discussion_content":"æœ‰æ˜ç™½çš„ç«¥é‹å¸®å¿™è§£é‡Šä¸€ä¸‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607497559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113497,"user_name":"aof","can_delete":false,"product_type":"c1","uid":1062864,"ip_address":"","ucode":"5815D63C4926BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/37/d0/26975fba.jpg","comment_is_top":false,"comment_ctime":1563033123,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"23037869603","product_id":100029201,"comment_content":"å…ˆè¯´ä¸€ä¸‹ï¼Œè¯¾åæ€è€ƒï¼Œè§£å†³çš„åŠæ³•åº”è¯¥å°±æ˜¯ï¼Œå°†æ¶ˆæ¯å¤„ç†å’Œä½ç§»æäº¤æ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚<br><br>è€å¸ˆæ–‡ç« é‡Œé¢çš„ä¸¾çš„ä¸€ä¸ªä¾‹å­æ²¡æœ‰å¾ˆæ˜ç™½ï¼Œèƒ½ä¸èƒ½å†è§£é‡Šä¸€ä¸‹ã€‚å°±æ˜¯é‚£ä¸ªä½ç§»æäº¤åRebalanceçš„ä¾‹å­ã€‚","like_count":5,"discussions":[{"author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268120,"discussion_content":"rebalanceä¹‹å‰consumerè®°å½•äº†offsetä¿¡æ¯ï¼Œä¸ä¼šé‡å¤æ¶ˆè´¹ã€‚rebalanceä¹‹åconsumeré‡æ–°åˆ†é…äº†åˆ†åŒºï¼Œå¯¼è‡´è®°å½•çš„offsetä¿¡æ¯å¤±æ•ˆï¼Œéœ€è¦ä»å†…éƒ¨ä½ç§»ä¸»é¢˜ä¸­è·å–offsetï¼Œå°±ä¼šçš„å¯¼è‡´é‡æ–°æ¶ˆè´¹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589727832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1656848,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/fy2rpUzbSEeIAQHfbt0EkYkMIIuEPhWO6GFkjJNmLy5gbRp2UnNlrLh1fAAU52bQKfiahl17ZTOjhbYiatmrNibDg/132","nickname":"æ¨å°æ›¹","note":"","ucode":"D266D0A11BC573","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380558,"discussion_content":"é‚£æ‰‹å·¥æäº¤ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624580950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":268120,"ip_address":""},"score":380558,"extra":""}]},{"author":{"id":1521451,"avatar":"https://static001.geekbang.org/account/avatar/00/17/37/2b/b32f1d66.jpg","nickname":"Ball","note":"","ucode":"1EE949E68D84CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":129165,"discussion_content":"è¿™ä¸ªæƒ³æ³•æŒºå¥½çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578670946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1712090,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/1f/da/698cd223.jpg","nickname":"banderSnatchğŸ±","note":"","ucode":"66C08C96E0D51A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115771,"discussion_content":"é‡å¹³è¡¡åä½ç§»ä¼šå›åˆ°ä¸Šæ¬¡æäº¤çš„åœ°æ–¹ï¼Œä¸é‡å¹³è¡¡çš„è¯å°±ç®—ä¸æäº¤ä½ç§»ä¹Ÿä¼šå¾€ä¸‹èµ°ï¼Œä¸ä¼šé‡å¤æ¶ˆè´¹ã€‚æˆ‘è¯•äº†ä¸€ä¸‹æ˜¯è¿™æ ·çš„ï¼ŒåŸç†ä¸Šå°±ä¸çŸ¥é“äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578034104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1196886,"avatar":"https://static001.geekbang.org/account/avatar/00/12/43/56/62c38c36.jpg","nickname":"æ¬§é˜³","note":"","ucode":"2612576E262813","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1712090,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/1f/da/698cd223.jpg","nickname":"banderSnatchğŸ±","note":"","ucode":"66C08C96E0D51A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229484,"discussion_content":"åº”è¯¥æ˜¯consumerè‡ªå·±ä¼šè®°å½•å·²ç»æ¶ˆè´¹(poll)çš„ä½ç§»ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586656901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":115771,"ip_address":""},"score":229484,"extra":""}]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52300,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ï¼Œå¯æƒœæ²¡å›ç­”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574037477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113377,"user_name":"Tony Du","can_delete":false,"product_type":"c1","uid":1001661,"ip_address":"","ucode":"F5FCC400E615EA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/bd/6c7d4230.jpg","comment_is_top":false,"comment_ctime":1562988382,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23037824862","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï½ çœ‹äº†ä»Šå¤©çš„æ•™ç¨‹æˆ‘æœ‰ä¸¤ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸‹ï¼Œå¸Œæœ›è€å¸ˆèƒ½èµæ•™ã€‚<br>1. ä»æ–‡ä¸­çš„ä»£ç çœ‹ä¸Šå»ï¼Œä½¿ç”¨commitAsyncæä¾›offsetï¼Œä¸éœ€è¦ç­‰å¾…å¼‚æ­¥æ‰§è¡Œç»“æœå†æ¬¡pollå°±èƒ½æ‹¿åˆ°ä¸‹ä¸€æ‰¹æ¶ˆæ¯ï¼Œæ˜¯é‚£ä¹ˆè¿™ä¸ªoffsetçš„æœ€æ–°å€¼æ˜¯ä¸æ˜¯ç†è§£ä¸ºå…¶å®æ˜¯åœ¨consumer clientçš„å†…å­˜ä¸­ç®¡ç†çš„ï¼ˆå› ä¸ºå®é™…commitAsyncå¦‚æœå¤±è´¥çš„è¯ï¼Œoffsetä¸ä¼šå†™å…¥brokerä¸­ï¼‰ï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œå¦‚æœåœ¨æ‰§è¡Œåˆ°commitSyncä¹‹å‰ï¼Œconsumer clientè¿›ç¨‹é‡å¯äº†ï¼Œå°±æœ‰å¯èƒ½ä¼šæ¶ˆè´¹åˆ°å› commitAsyncå¤±è´¥äº§ç”Ÿçš„é‡å¤æ¶ˆæ¯ã€‚<br>2. æ•™ç¨‹ä¸­æ‰‹åŠ¨æäº¤100æ¡æ¶ˆæ¯çš„ä»£ç æ˜¯ä¸€ä¸ªåŒæ­¥å¤„ç†çš„ä»£ç ï¼Œæˆ‘åœ¨å®é™…å·¥ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œä¸ºäº†æé«˜æ¶ˆæ¯å¤„ç†æ•ˆç‡ï¼Œcoumser pollåˆ°ä¸€æ‰¹æ¶ˆæ¯åä¼šæäº¤åˆ°ä¸€ä¸ªthread poolä¸­å¤„ç†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¯·æ•™ä¸‹æ€æ ·åšåˆ°æ§åˆ¶offsetåˆ†æ‰¹æäº¤ï¼Ÿ<br>è°¢è°¢","like_count":5,"discussions":[{"author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262465,"discussion_content":"å…³äºç¬¬2 ç‚¹ï¼š\n\nåŸç”Ÿå®¢æˆ·ç«¯åšä¸åˆ°ã€‚ä½ çš„éœ€æ±‚æ˜¯ä½¿ç”¨æ›´å¤šçš„çº¿ç¨‹ä»¥æé«˜æ•ˆç‡ï¼Œé‚£å¯ä»¥å¤šå»ºåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºåˆ†é…ä¸€ä¸ªconsumerï¼Œæ¯ä¸ªconsumeråŒæ­¥æ¶ˆè´¹ï¼Œæ•ˆæœä¹Ÿæ˜¯ç±»ä¼¼çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589102187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257200,"user_name":"Luke","can_delete":false,"product_type":"c1","uid":1590953,"ip_address":"","ucode":"2C8A1FAB8B6301","user_header":"https://static001.geekbang.org/account/avatar/00/18/46/a9/70fa676f.jpg","comment_is_top":false,"comment_ctime":1603878813,"is_pvip":false,"replies":[{"id":"93981","content":"åŒæ„ã€‚äº‹å®ä¸Šï¼ŒKafkaäº‹åŠ¡å¯¹producerç«¯çš„é‡å¤ç”Ÿäº§æ¶ˆæ¯è§£å†³å¾ˆå¥½ï¼Œä½†å¯¹æ¶ˆè´¹è€…ç«¯é¿å…é‡å¤æ¶ˆè´¹ä¿è¯ä¾ç„¶æ˜¯å¼±çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1604283894,"ip_address":"","comment_id":257200,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18783747997","product_id":100029201,"comment_content":"æˆ‘çš„ç†è§£ï¼Œä¸ç®¡æ€æ ·åšï¼Œå•é Kafkaæ— æ³•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹ï¼Œæ— è®ºæ—¶å€™è‡ªåŠ¨æäº¤è¿˜æ˜¯æ‰‹åŠ¨æäº¤ï¼ŒåŒæ­¥æäº¤è¿˜æ˜¯å¼‚æ­¥æäº¤ï¼Œæ¶ˆæ¯çš„ä¸‹æ¸¸æ¶ˆè´¹éƒ½è¦åšå»é‡å’Œå¹‚ç­‰å¤„ç†ã€‚é™¤éèƒ½å¤Ÿä¿è¯æ¶ˆæ¯çš„æ¶ˆè´¹å’Œä½ç‚¹çš„æäº¤æ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚è€Œè¿™ä¸ªåŸå­æ€§å¤ªéš¾ä¿è¯äº†ï¼ŒåŸºæœ¬ä¸Šåˆè¦å¼•å…¥åˆ†å¸ƒå¼ä¸€è‡´æ€§çš„é‚£ä¸€å¥—ä¸œè¥¿äº†ã€‚","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508253,"discussion_content":"åŒæ„ã€‚äº‹å®ä¸Šï¼ŒKafkaäº‹åŠ¡å¯¹producerç«¯çš„é‡å¤ç”Ÿäº§æ¶ˆæ¯è§£å†³å¾ˆå¥½ï¼Œä½†å¯¹æ¶ˆè´¹è€…ç«¯é¿å…é‡å¤æ¶ˆè´¹ä¿è¯ä¾ç„¶æ˜¯å¼±çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604283894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178467,"user_name":"bbbi","can_delete":false,"product_type":"c1","uid":1682175,"ip_address":"","ucode":"9A539AEF791428","user_header":"https://static001.geekbang.org/account/avatar/00/19/aa/ff/e2c331e0.jpg","comment_is_top":false,"comment_ctime":1581694535,"is_pvip":false,"replies":[{"id":"69230","content":"offsetæ˜¯longå‹çš„ï¼Œå‡ ä¹ä¸å¯èƒ½ç”¨å®Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1581728689,"ip_address":"","comment_id":178467,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18761563719","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼æœ‰ä¸€ä¸ªé—®é¢˜æ—¶ã€‚Kafkaçš„offsetæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å€¼æœ€å¤§æ—¶å¤šå°‘ï¼Ÿæœ‰æ²¡æœ‰å¯èƒ½å­˜åœ¨ç”¨å®Œçš„æƒ…å†µï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483837,"discussion_content":"offsetæ˜¯longå‹çš„ï¼Œå‡ ä¹ä¸å¯èƒ½ç”¨å®Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581728689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162592,"user_name":"çŒ«å“­","can_delete":false,"product_type":"c1","uid":1319617,"ip_address":"","ucode":"17358613AABE3D","user_header":"https://static001.geekbang.org/account/avatar/00/14/22/c1/3ba7deca.jpg","comment_is_top":false,"comment_ctime":1576561867,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18756431051","product_id":100029201,"comment_content":"ä¸šåŠ¡ç«¯æ¥ä¿è¯ï¼›ä¸šåŠ¡ç«¯é‡å¤æ¶ˆè´¹æ˜¯å¦æ˜¯å¹‚ç­‰çš„ï¼Ÿå¦‚æœæ˜¯å¹‚ç­‰ï¼Œå¯¹ä¸šåŠ¡æ— å½±å“ï¼Œé‡å¤æ¶ˆè´¹æ²¡å…³ç³»ï¼›å¦‚æœä¸æ˜¯å¹‚ç­‰ï¼Œåœ¨ç”Ÿäº§è€…ç»™kafkaå‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œç»™æ¯æ¡æ¶ˆæ¯ç”Ÿæˆä¸€ä¸ªå”¯ä¸€IDï¼Œæ¶ˆè´¹ç«¯ï¼Œè§†ä¸šåŠ¡åœºæ™¯è€Œè¨€ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼š1.å¦‚æœæ˜¯æ•æ„Ÿä¸šåŠ¡ï¼Œå¦‚ä¸é’±ç›¸å…³ï¼Œåœ¨æ•°æ®åº“å»ºä¸€å¼ æ¶ˆè´¹æ¶ˆæ¯çš„æµæ°´è¡¨ï¼Œæ¯æ¬¡æ¶ˆè´¹å‰åˆ°æ•°æ®åº“å»æŸ¥è¯¢ä¸€ä¸‹ï¼Œçœ‹æ˜¯å¦æ¶ˆè´¹è¿‡ï¼Œæ¶ˆè´¹è¿‡å°±å¿½ç•¥ï¼Œæ²¡æœ‰æ¶ˆè´¹è¿‡å°±æ¶ˆè´¹ã€‚2.éæ•æ„Ÿä¸šåŠ¡ï¼Œå¯ä»¥å­˜åˆ°redisï¼Œæ¶ˆè´¹å‰å»redisæŸ¥è¯¢ï¼Œè¯¥æ¡æ¶ˆæ¯æ˜¯å¦æ¶ˆè´¹è¿‡","like_count":4},{"had_liked":false,"id":114219,"user_name":"z.l","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/d35ab9a1.jpg","comment_is_top":false,"comment_ctime":1563254408,"is_pvip":false,"replies":[{"id":"41685","content":"æ˜¯çš„ã€‚è¿™å–å†³äºä½ å¯¹å¼‚å¸¸çš„å¤„ç†æ€åº¦ã€‚å¦‚æœä½ è§‰å¾—å¤„ç†å¼‚å¸¸åè¿˜èƒ½ç»§ç»­æ¶ˆè´¹ï¼Œä¹Ÿå¯ä»¥å°†try-catchæ”¾å…¥whileå†…","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563274400,"ip_address":"","comment_id":114219,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18743123592","product_id":100029201,"comment_content":"try {<br>        while (true) {<br>            ConsumerRecords&lt;String, String&gt; records = <br>                        consumer.poll(Duration.ofSeconds(1));<br>            process(records); &#47;&#47; å¤„ç†æ¶ˆæ¯<br>            commitAysnc(); &#47;&#47; ä½¿ç”¨å¼‚æ­¥æäº¤è§„é¿é˜»å¡<br>        }<br>     } catch (Exception e) {<br>        handle(e); &#47;&#47; å¤„ç†å¼‚å¸¸<br>    } finally {<br>        try {<br>            consumer.commitSync(); &#47;&#47; æœ€åä¸€æ¬¡æäº¤ä½¿ç”¨åŒæ­¥é˜»å¡å¼æäº¤<br>        } finally {<br>            consumer.close();<br>        }<br>    }<br>è¿™æ®µä»£ç å¦‚æœå¼‚å¸¸äº†ï¼Œä¸å°±é€€å‡ºwhileå¾ªç¯äº†ä¹ˆï¼Ÿä¹Ÿå°±ç›¸å½“äºæ¶ˆè´¹è€…çº¿ç¨‹å¼‚å¸¸é€€å‡ºï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458562,"discussion_content":"æ˜¯çš„ã€‚è¿™å–å†³äºä½ å¯¹å¼‚å¸¸çš„å¤„ç†æ€åº¦ã€‚å¦‚æœä½ è§‰å¾—å¤„ç†å¼‚å¸¸åè¿˜èƒ½ç»§ç»­æ¶ˆè´¹ï¼Œä¹Ÿå¯ä»¥å°†try-catchæ”¾å…¥whileå†…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563274400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2103,"discussion_content":"å½“å‰è¿™ä¸ªæ¶ˆè´¹è€…ç»“æŸäº†ï¼Œä½†æ˜¯ä¿è¯çš„æ˜¯æäº¤äº†æ­£ç¡®çš„offsetï¼Œè¿™æ ·åœ¨é‡å¯consumeræˆ–è€…å…¶å®ƒconsumeræ¥ç®¡çš„æ—¶å€™ä¸ä¼šé‡å¤æ¶ˆè´¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563261322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329420,"discussion_content":"é‚£è¿™å¿…ç„¶å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼Œæ‰€ä»¥ å¼‚å¸¸é‡Œé¢å¯ä»¥è¿›è¡Œåç»­çš„è¡¥å¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606381555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2103,"ip_address":""},"score":329420,"extra":""}]}]},{"had_liked":false,"id":113554,"user_name":"kursk.ye","can_delete":false,"product_type":"c1","uid":1015995,"ip_address":"","ucode":"9D6A3854E408F9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/bb/c0ed9d76.jpg","comment_is_top":false,"comment_ctime":1563076011,"is_pvip":false,"replies":[{"id":"41416","content":"é¦–å…ˆï¼Œpoll(10)ä¸æ˜¯è·å–10æ¡æ¶ˆæ¯çš„æ„æ€ã€‚<br>å…¶æ¬¡ï¼Œconsumerè·å–çš„ä½ç§»æ˜¯å®ƒä¹‹å‰æœ€æ–°ä¸€æ¬¡æäº¤çš„ä½ç§»ï¼Œå› æ­¤æ˜¯99","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563156649,"ip_address":"","comment_id":113554,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18742945195","product_id":100029201,"comment_content":"æˆ‘ç°åœ¨æœ‰ç‚¹ç³Šæ¶‚äº†ï¼Œkafkaçš„offsetæ˜¯ä»¥brokerå‘æ¶ˆæ¯ç»™consumeræ—¶ï¼Œbrokerçš„offsetä¸ºå‡†ï¼›è¿˜æ˜¯ä»¥consumer çš„commit offsetä¸ºå‡†ï¼Ÿæ¯”å¦‚ï¼Œä¸€ä¸ªpartitionç°åœ¨çš„offsetæ˜¯99ï¼Œæ‰§è¡Œpoll(10)æ–¹æ³•æ—¶ï¼Œbrokerç»™consumerå‘é€äº†10æ¡è®°å½•ï¼Œåœ¨brokerä¸­offsetå˜ä¸º109ï¼›å‡å¦‚ enable.auto.commit ä¸ºfalseï¼Œä¸ºæ‰‹åŠ¨æäº¤consumer offset,ä½†æ˜¯cosumeråœ¨æ‰§è¡Œconsumer.commitSync()æˆ–consumer.commitAsync()æ—¶è¿›ç¨‹å¤±è´¥ï¼Œæ•´ä¸ªconsumerè¿›ç¨‹éƒ½å´©æºƒäº†ï¼›äºæ˜¯ä¸€ä¸ªæ–°çš„consumeræ¥æ›¿åŸconsumerç»§ç»­æ¶ˆè´¹ï¼Œé‚£ä¹ˆä»–æ˜¯ä»99å¼€å§‹æ¶ˆè´¹ï¼Œè¿˜æ˜¯ä»109å¼€å§‹æ¶ˆè´¹ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458275,"discussion_content":"é¦–å…ˆï¼Œpoll(10)ä¸æ˜¯è·å–10æ¡æ¶ˆæ¯çš„æ„æ€ã€‚\nå…¶æ¬¡ï¼Œconsumerè·å–çš„ä½ç§»æ˜¯å®ƒä¹‹å‰æœ€æ–°ä¸€æ¬¡æäº¤çš„ä½ç§»ï¼Œå› æ­¤æ˜¯99","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563156649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329436,"discussion_content":"poll é‡Œé¢çš„å‚æ•°æ˜¯è¶…æ—¶æ—¶é—´","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1606383931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1881786,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/b6/ba/f76d996b.jpg","nickname":"æœºè½¦","note":"","ucode":"CD32A645AE310A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341038,"discussion_content":"brokeré‡Œçš„offsetæ˜¯ä¸ºäº†æ•…éšœé‡å¯ç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610269844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236184,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1595339404,"is_pvip":false,"replies":[{"id":"87311","content":"ä¸è¦é€šè¿‡Kafka manageræŸ¥ï¼Œç”¨kafka-consumer-groupså‘½ä»¤æŸ¥","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1595386696,"ip_address":"","comment_id":236184,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14480241292","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘çœŸçš„é‡åˆ°äº†æ— è®ºæ˜¯è‡ªåŠ¨æäº¤æˆ–è€…æ˜¯æ‰‹åŠ¨æäº¤ï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯æ¶ˆè´¹ä½ç§»å°±æ˜¯æ²¡æœ‰å¢é•¿ï¼Œå¿ƒå¡å¡ï¼ï¼ï¼æ±‚åŠ©ğŸ†˜","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501975,"discussion_content":"ä¸è¦é€šè¿‡Kafka manageræŸ¥ï¼Œç”¨kafka-consumer-groupså‘½ä»¤æŸ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595386696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201115,"user_name":"ç«åŠ›å…¨å¼€","can_delete":false,"product_type":"c1","uid":1412220,"ip_address":"","ucode":"8CE1733A2F618C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIaTvOKvUt4WnuSjkBp0tjd6O6vvVyw5fcib3UgZibE8tz2ICbTfkwbzs8MHNMJjV6W2mLjywLsvBibg/132","comment_is_top":false,"comment_ctime":1585718170,"is_pvip":false,"replies":[{"id":"75361","content":"å¯ä»¥çš„ï¼Œä½¿ç”¨Consumerçš„seekToEnd","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1585792194,"ip_address":"","comment_id":201115,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14470620058","product_id":100029201,"comment_content":"è¯·é—®è€å¸ˆKafkaèƒ½é…ç½®æˆæ¯æ¬¡è¿æ¥åªæ¶ˆè´¹æœ€æ–°çš„æ¶ˆæ¯å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490243,"discussion_content":"å¯ä»¥çš„ï¼Œä½¿ç”¨Consumerçš„seekToEnd","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585792194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144605,"user_name":"ä¸å¿˜åˆå¿ƒä¸¶æ–¹å¾—å§‹ç»ˆ","can_delete":false,"product_type":"c1","uid":1176917,"ip_address":"","ucode":"2D16DBA695D347","user_header":"https://static001.geekbang.org/account/avatar/00/11/f5/55/5ba20e79.jpg","comment_is_top":false,"comment_ctime":1571978321,"is_pvip":false,"replies":[{"id":"55957","content":"å¦‚æœæ˜¯æ‰¹ä»»åŠ¡ï¼Œèƒ½å¦ç­‰åˆ°æ•°æ®æŠ½å–å®Œäº†å†è¿›è¡Œæ¶ˆè´¹ã€‚å¦‚æœæ˜¯streamingä»»åŠ¡ï¼Œè¿™æ˜¯ç»å…¸çš„table-table joinï¼Œæœ€å¥½ä½¿ç”¨ç‰¹å®šçš„æµå¤„ç†æ¡†æ¶æ¥å¤„ç†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1572225077,"ip_address":"","comment_id":144605,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14456880209","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œé—®ä¸ªé—®é¢˜ï¼Œç›®å‰å…¬å¸è¦ç”¨kafkaåŒæ­¥è€æ•°æ®åº“æ•°æ®ï¼ŒåŒæ­¥è¿‡ç¨‹æ˜¯æŒ‰ç…§è€æ•°æ®åº“çš„bin.logæ—¥å¿—é¡ºåºè¿›è¡ŒåŒæ­¥ï¼Œä½†æ˜¯åœ¨åŒæ­¥è¿‡ç¨‹ä¸­ï¼Œæœ‰äº›è¡¨æ˜¯æœ‰å…³è”çš„ï¼ŒåŠ å…¥å°†æ•°æ®æ”¾åˆ°å¤šä¸ªåˆ†åŒºï¼Œä¸åŒåˆ†åŒºæ•°æ®æ¶ˆè´¹é¡ºåºä¸ä¸€æ ·ï¼Œå°±ä¼šå¯¼è‡´æ•°æ®åŒæ­¥å‡ºç°å…³è”é—®é¢˜ï¼Œå¦‚æœè®¾ç½®ä¸€ä¸ªåˆ†åŒºâ€¦â€¦è¿™æ ·åˆå¤ªæ…¢ï¼Œæœ‰ä»€ä¹ˆå¥½çš„å»ºè®®å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472027,"discussion_content":"å¦‚æœæ˜¯æ‰¹ä»»åŠ¡ï¼Œèƒ½å¦ç­‰åˆ°æ•°æ®æŠ½å–å®Œäº†å†è¿›è¡Œæ¶ˆè´¹ã€‚å¦‚æœæ˜¯streamingä»»åŠ¡ï¼Œè¿™æ˜¯ç»å…¸çš„table-table joinï¼Œæœ€å¥½ä½¿ç”¨ç‰¹å®šçš„æµå¤„ç†æ¡†æ¶æ¥å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572225077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119955,"user_name":"Li Shunduo","can_delete":false,"product_type":"c1","uid":1222882,"ip_address":"","ucode":"6C5AB4129E9780","user_header":"https://static001.geekbang.org/account/avatar/00/12/a8/e2/f8e51df2.jpg","comment_is_top":false,"comment_ctime":1564737181,"is_pvip":false,"replies":[{"id":"44266","content":"å°†offsetæäº¤ä¸äº‹ä»¶å¤„ç†ç»“æœæ”¾å…¥ä¸€ä¸ªæ”¯æŒåŸå­æ€§æ“ä½œçš„å­˜å‚¨å¯ä»¥é¿å…ï¼Œç±»ä¼¼äºäº‹åŠ¡ã€‚å¦å¤–Kafka Streamsæ”¯æŒç²¾ç¡®ä¸€æ¬¡å¤„ç†è¯­ä¹‰ï¼Œä¹Ÿå¯ä»¥ä¸€è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564966668,"ip_address":"","comment_id":119955,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14449639069","product_id":100029201,"comment_content":"ä»æ–‡ç« çœ‹ï¼Œæ— è®ºæ˜¯è‡ªåŠ¨æäº¤è¿˜æ˜¯æ‰‹åŠ¨æäº¤ï¼Œéƒ½æ˜¯æœ‰å¯èƒ½å­˜åœ¨æ¶ˆæ¯é‡å¤æ¶ˆè´¹çš„ã€‚è¯·é—®æœ‰æ²¡æœ‰åŠæ³•é€šè¿‡offsetç®¡ç†é¿å…é‡å¤æ¶ˆè´¹å‘¢ï¼Ÿè¿˜æ˜¯è¦å€ŸåŠ©å¤–éƒ¨çš„å·¥å…·åšæ¶ˆè´¹å‰çš„æ£€æŸ¥ã€‚","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461148,"discussion_content":"å°†offsetæäº¤ä¸äº‹ä»¶å¤„ç†ç»“æœæ”¾å…¥ä¸€ä¸ªæ”¯æŒåŸå­æ€§æ“ä½œçš„å­˜å‚¨å¯ä»¥é¿å…ï¼Œç±»ä¼¼äºäº‹åŠ¡ã€‚å¦å¤–Kafka Streamsæ”¯æŒç²¾ç¡®ä¸€æ¬¡å¤„ç†è¯­ä¹‰ï¼Œä¹Ÿå¯ä»¥ä¸€è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564966668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113337,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1562978200,"is_pvip":false,"replies":[{"id":"41425","content":"å—¯å—¯ï¼Œæˆ‘çš„æ„æ€æ˜¯consumeræäº¤çš„ä½ç§»å€¼è™½ç„¶å°±æ˜¯æ¶ˆæ¯åœ¨åˆ†åŒºä¸­çš„ä½ç§»å€¼ï¼Œä½†è¿™ä¸ªæäº¤ä½ç§»çš„æ¦‚å¿µå’Œåˆ†åŒºä¸­çš„ä½ç§»æ¦‚å¿µæ˜¯ä¸åŒçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563157357,"ip_address":"","comment_id":113337,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14447880088","product_id":100029201,"comment_content":"æˆ‘æ„Ÿè§‰æœ‰ç‚¹ä¸æ˜¯å¾ˆç†è§£æ¶ˆè´¹è€…ç«¯çš„ä½ç§»æ¦‚å¿µå’Œæ¶ˆæ¯åœ¨åˆ†åŒºä¸­çš„ä½ç§»ä¸ºå•¥ä¸æ˜¯ä¸€å›äº‹ï¼Œæˆ‘ç†åƒæ˜¯ä¸€å›äº‹ï¼Œå› ä¸ºæ¶ˆè´¹è€…ç«¯æŠŠè‡ªå·±æ¶ˆè´¹çš„ä½ç§»æäº¤åˆ°Brokerçš„ä½ç§»ä¸»é¢˜é‡Œä¸å°±å®šä¹‰äº†ä¸‹æ¬¡æ¶ˆè´¹çš„èµ·ç‚¹äº†å—ï¼Œä¸ºå•¥è¯´ä¸æ˜¯ä¸€å›äº‹å‘¢ï¼Œæœ‰å•¥åŒºåˆ«å‘¢ï¼Œè¯·è€å¸ˆå…·ä½“æŒ‡å¯¼ä¸€ä¸‹ã€‚","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458175,"discussion_content":"å—¯å—¯ï¼Œæˆ‘çš„æ„æ€æ˜¯consumeræäº¤çš„ä½ç§»å€¼è™½ç„¶å°±æ˜¯æ¶ˆæ¯åœ¨åˆ†åŒºä¸­çš„ä½ç§»å€¼ï¼Œä½†è¿™ä¸ªæäº¤ä½ç§»çš„æ¦‚å¿µå’Œåˆ†åŒºä¸­çš„ä½ç§»æ¦‚å¿µæ˜¯ä¸åŒçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563157357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315792,"user_name":"xzy","can_delete":false,"product_type":"c1","uid":1002095,"ip_address":"","ucode":"1A44368083A19E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/6f/e36b3908.jpg","comment_is_top":false,"comment_ctime":1634002700,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10223937292","product_id":100029201,"comment_content":"<br>   try {<br>           while(true) {<br>                        ConsumerRecords&lt;String, String&gt; records = <br>                                    consumer.poll(Duration.ofSeconds(1));<br>                        process(records); &#47;&#47; å¤„ç†æ¶ˆæ¯<br>                        commitAysnc(); &#47;&#47; ä½¿ç”¨å¼‚æ­¥æäº¤è§„é¿é˜»å¡<br>            }<br>} catch(Exception e) {<br>            handle(e); &#47;&#47; å¤„ç†å¼‚å¸¸<br>} finally {<br>            try {<br>                        consumer.commitSync(); &#47;&#47; æœ€åä¸€æ¬¡æäº¤ä½¿ç”¨åŒæ­¥é˜»å¡å¼æäº¤<br>  } finally {<br>       consumer.close();<br>}<br>}<br><br>æ„Ÿè§‰è¿™æ®µä»£ç æœ‰å¾ˆä¸¥é‡çš„bugï¼Œå¦‚æœåœ¨å¤„ç†ç¬¬ä¸€æ¡æ¶ˆæ¯æ—¶å‘ç”Ÿäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆè¿™æ¬¡poll()çš„æ¶ˆæ¯ä¼šå…¨éƒ¨ä¸¢å¤±","like_count":2,"discussions":[{"author":{"id":2113978,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLLniccwC1Mootc7IQsRGUTX3ZkkCKPc7lYV0g8CAqscWtAjd8xkHYcY3UFbYvicm42FXuAO5bZP6WQ/132","nickname":"Geek_417e74","note":"","ucode":"BEA8915879274D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558625,"discussion_content":"è¿™é‡Œsyncæäº¤çš„è¯­ä¹‰æ˜¯consumerå…³é—­æ—¶ï¼Œåªæ˜¯ä¼ªä»£ç ã€‚ä½ pollçš„æ¶ˆæ¯è‡ªç„¶è¦ä¿è¯æŠŠå®ƒå¤„ç†å®Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648407047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294354,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1621911415,"is_pvip":false,"replies":[{"id":"107173","content":"Kafkaæ²¡æœ‰è¿™ä¸ªæ‰€è°“çš„åŠŸèƒ½ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1622353715,"ip_address":"","comment_id":294354,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10211846007","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œ<br>ç”±äºä½ç§»æäº¤æ˜¯æœ‰åºçš„ï¼Œæ¯”å¦‚å‰5æ¬¡çš„å¼‚æ­¥æäº¤ï¼Œå…¶ä¸­ç¬¬3æ¬¡æäº¤æ—¶å€™å‘ç”Ÿç½‘ç»œæŠ–åŠ¨ï¼Œè¿™ä¸ªæ—¶å€™ç¬¬3æ¬¡çš„å¼‚æ­¥æäº¤å¼€å§‹åŒæ­¥é‡è¯•ï¼Œä½†æ˜¯ç¬¬4æ¬¡å’Œç¬¬5æ¬¡çš„å·²ç»å¼‚æ­¥æäº¤æˆåŠŸï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªâ€åŒæ­¥é‡è¯•â€œåº”è¯¥è¢«å¿½ç•¥ï¼Œå¦åˆ™ä½ç§»æ•°æ®å°†è¢«è¦†ç›–äº†å§ã€‚","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520618,"discussion_content":"Kafkaæ²¡æœ‰è¿™ä¸ªæ‰€è°“çš„åŠŸèƒ½ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622353715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258530,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1604475849,"is_pvip":false,"replies":[{"id":"94414","content":"1. é‡è¯•æ—¶æŒ‚èµ·æ¶ˆè´¹çº¿ç¨‹ï¼Œç›´åˆ°retryæˆåŠŸï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šæ›´æ–°ä½ç§»ã€‚<br>2. å¯èƒ½å‡ºç°ã€‚rebalanceå¯èƒ½ä¼šå½±å“æ¶ˆæ¯æäº¤ã€‚ä¸è®ºæ˜¯è‡ªåŠ¨è¿˜æ˜¯æ‰‹åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1604887575,"ip_address":"","comment_id":258530,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10194410441","product_id":100029201,"comment_content":"è€å¸ˆæœ‰ä¸¤ä¸ªåœ°æ–¹æä¸æ˜ç™½<br>1.spring boot kafkaTemplateæä¾›é‡è¯•åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯åŒæ­¥å’Œå¼‚æ­¥éƒ½æ”¯æŒé‡è¯•ï¼Œå®ƒæ€ä¹ˆåšåˆ°é¿å…ä½ç§»è¿‡æœŸé—®é¢˜çš„ï¼Ÿ<br>2.æ‰‹åŠ¨æäº¤ä¸ä¼šå‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å†µå—ï¼Ÿé‡å¹³è¡¡ä¸ä¼šå½±å“æ‰‹åŠ¨æäº¤å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508682,"discussion_content":"1. é‡è¯•æ—¶æŒ‚èµ·æ¶ˆè´¹çº¿ç¨‹ï¼Œç›´åˆ°retryæˆåŠŸï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šæ›´æ–°ä½ç§»ã€‚\n2. å¯èƒ½å‡ºç°ã€‚rebalanceå¯èƒ½ä¼šå½±å“æ¶ˆæ¯æäº¤ã€‚ä¸è®ºæ˜¯è‡ªåŠ¨è¿˜æ˜¯æ‰‹åŠ¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604887575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130026,"user_name":"ç›˜å°¼è¥¿æ—","can_delete":false,"product_type":"c1","uid":1197347,"ip_address":"","ucode":"B59569FC25144F","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/23/28311447.jpg","comment_is_top":false,"comment_ctime":1567353366,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10157287958","product_id":100029201,"comment_content":"å‘ç”Ÿé‡å¹³è¡¡ä¹‹å‰å¯ä»¥æ·»åŠ ä¸€ä¸ªConsumerRebalanceListenerï¼Œé˜²æ­¢offsetä¸¢å¤±ã€‚ åœ¨ä¸€ä¸ªæ¶ˆè´¹è€…å¯¹ä¸€ä¸ªåˆ†åŒºå¤±å»æ‰€æœ‰æƒä¹‹å‰ ä¼šè°ƒç”¨è¿™ä¸ªConsumerRebalanceListenerï¼ŒConsumerRebalanceListeneråœ¨è°ƒç”¨subscribe()æ–¹æ³•ä¼ è¿›å»ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªlistenerä¸­æ·»åŠ commit offset","like_count":2},{"had_liked":false,"id":115877,"user_name":"æå¤","can_delete":false,"product_type":"c1","uid":1134503,"ip_address":"","ucode":"288994A8EAA913","user_header":"https://static001.geekbang.org/account/avatar/00/11/4f/a7/f7124e0f.jpg","comment_is_top":false,"comment_ctime":1563760963,"is_pvip":false,"replies":[{"id":"42574","content":"consumerä¸€ç›´åœ¨æ¶ˆè´¹æ—¶å°±å¯ä»¥å‡ºç°","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563849551,"ip_address":"","comment_id":115877,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10153695555","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå¼‚æ­¥æäº¤é‡è¯•æ—¶æäº¤çš„ä½ç§»å€¼å¯èƒ½æ—©å·²ç»â€œè¿‡æœŸâ€æˆ–ä¸æ˜¯æœ€æ–°å€¼äº†ã€‚ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459327,"discussion_content":"consumerä¸€ç›´åœ¨æ¶ˆè´¹æ—¶å°±å¯ä»¥å‡ºç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563849551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113984,"user_name":"æˆ‘å·²ç»è®¾ç½®äº†æ˜µç§°","can_delete":false,"product_type":"c1","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1563198411,"is_pvip":false,"replies":[{"id":"41583","content":"è‡ªåŠ¨æäº¤å°±æ˜¯åœ¨pollæ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¦‚æœè®¾ç½®äº†5ç§’ï¼Œè¡¨ç¤ºè‡³å°‘5ç§’æäº¤ä¸€æ¬¡","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563237614,"ip_address":"","comment_id":113984,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10153133003","product_id":100029201,"comment_content":"çœ‹ä¸‹æ¥æ„Ÿè§‰è‡ªåŠ¨æäº¤æœ‰ä¸¤ä¸ªæäº¤æ–¹æ³•ï¼Œ1.\bé»˜è®¤5ç§’ä¸€æ¬¡ï¼Œ2.æ¯æ¬¡è°ƒç”¨pollæ–¹æ³•çš„æ—¶å€™ã€‚æ˜¯è¿™æ ·å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458467,"discussion_content":"è‡ªåŠ¨æäº¤å°±æ˜¯åœ¨pollæ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¦‚æœè®¾ç½®äº†5ç§’ï¼Œè¡¨ç¤ºè‡³å°‘5ç§’æäº¤ä¸€æ¬¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563237614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390148,"discussion_content":"æ‰§è¡Œ poll() æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥è·ç¦»ä¸Šä¸€æ¬¡è‡ªåŠ¨æäº¤çš„é—´éš”æ˜¯å¦è¶…è¿‡ 5 ç§’ï¼Œè¶…è¿‡äº†å°±ä¼šæäº¤ï¼Œæ²¡æœ‰å°±ä¸ä¼šæäº¤ï¼Œä½ çš„ä¸¾ä¾‹ä¸­ï¼Œä¸šåŠ¡å¤„ç† 6 ç§’ï¼Œé‚£ä¸‹ä¸€æ¬¡ poll() çš„æ—¶å€™å°±ä¼šè§¦å‘ä¸Šä¸€æ‰¹æ¶ˆæ¯çš„ä½ç§»æäº¤ã€‚å¦‚æœä½ çš„ä¸šåŠ¡å¤„ç† èŠ±è´¹ 3 ç§’ï¼Œé‚£ä¹ˆè¿™ä¸€æ¬¡ poll() ä¸ä¼šæäº¤ä½ç§»ï¼Œéœ€è¦ç­‰å¾…åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸‹ä¸€æ¬¡çš„ poll() å°±ä¼šæäº¤ä¸¤æ‰¹çš„æ•°æ®ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1629690697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1636683,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkTktMhVRbkn7U3mvnHUBBKkbzf17l98iaYZ35MQibvZPeZfXDV1licucYOI1Z70hk51X7TB9K8erpg/132","nickname":"åˆ˜é‘«","note":"","ucode":"E818077E19CD98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38615,"discussion_content":"å¦‚æœæ˜¯5ç§’ï¼Œä¸šåŠ¡å¤„ç†è€—æ—¶6ç§’ï¼Œæ€ä¹ˆä¿è¯è‡³å°‘5ç§’æäº¤çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571809812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280400,"user_name":"estimator","can_delete":false,"product_type":"c1","uid":1491721,"ip_address":"","ucode":"99A8643B11E7A8","user_header":"https://static001.geekbang.org/account/avatar/00/16/c3/09/027f2f17.jpg","comment_is_top":false,"comment_ctime":1614178306,"is_pvip":false,"replies":[{"id":"101803","content":"ä¸ä¼šï¼Œåªæ˜¯é‡å¤æ¶ˆè´¹","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1614217245,"ip_address":"","comment_id":280400,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5909145602","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå¦‚æœå¼‚æ­¥æäº¤ä½ç§»æˆåŠŸäº†ï¼Œä½†æ˜¯ç”±äºç½‘ç»œæŠ–åŠ¨è¿”å›å¤±è´¥äº†ã€‚é‚£ä¹ˆåŒæ­¥æäº¤åˆä¼šæäº¤ä¸€æ¬¡ï¼Œè¿™æ—¶å°±ä¼šä¸¢æ¶ˆæ¯å§ã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516084,"discussion_content":"ä¸ä¼šï¼Œåªæ˜¯é‡å¤æ¶ˆè´¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614217245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275291,"user_name":"å½’é›¶","can_delete":false,"product_type":"c1","uid":1103208,"ip_address":"","ucode":"C99B8E93009A46","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","comment_is_top":false,"comment_ctime":1611451834,"is_pvip":true,"replies":[{"id":"99930","content":"consumeré¦–å…ˆä¼šä»brokerå¤„è·å–æ‹‰å–ä½ç§»çš„ä½ç½®ï¼Œä¹‹åå°±æ˜¯è‡ªå·±ç»´æŠ¤è¿™ä¸ªä½ç½®ä¸æ–­æ›´æ–°","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1611539058,"ip_address":"","comment_id":275291,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5906419130","product_id":100029201,"comment_content":"consumerå»æ‹‰æ¶ˆæ¯çš„æ—¶å€™æ€ä¹ˆçŸ¥é“ä½ç§»çš„æ•°æ®ï¼Ÿæ˜¯brokerè®°å½•è¿™ä¸ªæ•°æ®ï¼Œè¿˜æ˜¯æœ¬åœ°å­˜å‚¨çš„(åŒæ—¶å¼‚å¸¸é‡å¯åä»brokerè·å–)","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514296,"discussion_content":"consumeré¦–å…ˆä¼šä»brokerå¤„è·å–æ‹‰å–ä½ç§»çš„ä½ç½®ï¼Œä¹‹åå°±æ˜¯è‡ªå·±ç»´æŠ¤è¿™ä¸ªä½ç½®ä¸æ–­æ›´æ–°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611539058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390152,"discussion_content":"consumer æœ¬åœ°ç¼“å­˜ä¸€ä»½ç»´æŠ¤åˆ†åŒºæ¶ˆè´¹ä½ç½®ï¼Œå¹¶ç»´æŠ¤å’Œæ›´æ–°ï¼Œconsumer  ä»¥æœ¬åœ°ç»´æŠ¤çš„ä¸ºä¸»ï¼Œæ²¡æœ‰å†åˆ° __consumer_offset ä¸»é¢˜æ‰¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629690965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271780,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1609807650,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5904774946","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä»¥ä¸‹è¿™ä¸ªä¸ç®—ç¼ºç‚¹å§ï¼Œå› ä¸ºè‡ªåŠ¨æäº¤ä¹Ÿæ˜¯åŒæ­¥é˜»å¡çš„ã€‚ä¸èƒ½ç®—ä¸¤è€…æ¯”è¾ƒåçš„ç¼ºç‚¹ã€‚<br><br><br>åè§‚æ‰‹åŠ¨æäº¤ä½ç§»ï¼Œå®ƒçš„å¥½å¤„å°±åœ¨äºæ›´åŠ çµæ´»ï¼Œä½ å®Œå…¨èƒ½å¤ŸæŠŠæ§ä½ç§»æäº¤çš„æ—¶æœºå’Œé¢‘ç‡ã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå°±æ˜¯åœ¨è°ƒç”¨ commitSync() æ—¶ï¼ŒConsumer ç¨‹åºä¼šå¤„äºé˜»å¡çŠ¶æ€ï¼Œç›´åˆ°è¿œç«¯çš„ Broker è¿”å›æäº¤ç»“æœï¼Œè¿™ä¸ªçŠ¶æ€æ‰ä¼šç»“æŸã€‚","like_count":1},{"had_liked":false,"id":224144,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1591284542,"is_pvip":false,"replies":[{"id":"82549","content":"å—¯ï¼Œç¡®å®è¦çœ‹å…·ä½“çš„åœºæ™¯æ¥å†³å®šæ°å½“çš„æ–¹æ¡ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1591323759,"ip_address":"","comment_id":224144,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5886251838","product_id":100029201,"comment_content":"å¦‚æœæ•°æ®æ˜¯å®æ—¶ä¸”éå¿…é¡»å¤„ç†,æ¯”å¦‚çš„å£«å®æ—¶åæ ‡æ•°æ®,å¯ä»¥åˆ¤æ–­æ—¶é—´æ˜¯å¦å®æ—¶æ¥è¿‡æ»¤,å³ä½¿é‡å¤æ¶ˆè´¹ä¹Ÿä¸ä¼šå†æ¬¡æ¶ˆè´¹è¿™æ¡æ•°æ®,å› ä¸ºè¿‡æœŸäº†..<br>å¦‚æœæ˜¯å¿…é¡»å¤„ç†çš„æ•°æ®åªèƒ½é€šè¿‡æŸ¥è¯¢æ•°æ®å¤„ç†æ¥åˆ¤æ–­æ˜¯å¦é‡å¤æ¶ˆè´¹äº†.","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497374,"discussion_content":"å—¯ï¼Œç¡®å®è¦çœ‹å…·ä½“çš„åœºæ™¯æ¥å†³å®šæ°å½“çš„æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591323759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214959,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1588857602,"is_pvip":true,"replies":[{"id":"79680","content":"æ˜¯å¯èƒ½é‡å¤æ¶ˆè´¹çš„ï¼Œæ¯•ç«Ÿæ¶ˆè´¹å’Œä½ç§»æäº¤ä¸æ˜¯åŸå­æ€§æ“ä½œã€‚è¿™å’Œæ˜¯å¦æ˜¯ä¸€ä¸ªgroup idå…³ç³»ä¸å¤§ã€‚<br>â€œä½ç§»å…¶å®æ˜¯æ¶ˆè´¹è€…åœ¨æ§åˆ¶ï¼Œcustomer_offsetä¸»é¢˜åªæ˜¯ä¸ºäº†ä¿æŒæ¶ˆè´¹è€…ä½ç§»çš„æŒä¹…æ€§â€ â€”â€” æˆ‘åŸºæœ¬åŒæ„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1588983521,"ip_address":"","comment_id":214959,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5883824898","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè‹¥æ˜¯å¤šå°æœºå™¨ï¼Œå³ä½¿é…ç½®ç›¸åŒçš„groupIDï¼Œæ˜¯ä¸æ˜¯ä¹Ÿä¼šé‡å¤æ¶ˆè´¹ï¼Ÿä½ç§»å…¶å®æ˜¯æ¶ˆè´¹è€…åœ¨æ§åˆ¶ï¼Œcustomer_offsetä¸»é¢˜åªæ˜¯ä¸ºäº†ä¿æŒæ¶ˆè´¹è€…ä½ç§»çš„æŒä¹…æ€§","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494258,"discussion_content":"æ˜¯å¯èƒ½é‡å¤æ¶ˆè´¹çš„ï¼Œæ¯•ç«Ÿæ¶ˆè´¹å’Œä½ç§»æäº¤ä¸æ˜¯åŸå­æ€§æ“ä½œã€‚è¿™å’Œæ˜¯å¦æ˜¯ä¸€ä¸ªgroup idå…³ç³»ä¸å¤§ã€‚\nâ€œä½ç§»å…¶å®æ˜¯æ¶ˆè´¹è€…åœ¨æ§åˆ¶ï¼Œcustomer_offsetä¸»é¢˜åªæ˜¯ä¸ºäº†ä¿æŒæ¶ˆè´¹è€…ä½ç§»çš„æŒä¹…æ€§â€ â€”â€” æˆ‘åŸºæœ¬åŒæ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588983521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149289,"user_name":"æƒœæ˜”","can_delete":false,"product_type":"c1","uid":1441589,"ip_address":"","ucode":"B3478E40B612FC","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/35/b744c027.jpg","comment_is_top":false,"comment_ctime":1573183776,"is_pvip":false,"replies":[{"id":"57424","content":"æœ‰å¯èƒ½çš„~","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1573212022,"ip_address":"","comment_id":149289,"utype":1}],"discussion_count":6,"race_medal":0,"score":"5868151072","product_id":100029201,"comment_content":"è€å¸ˆ æ‰‹åŠ¨æäº¤ä½ç§»çš„æ—¶å€™ å¦‚æœä¸€ä¸ªæŸä¸ªæ¶ˆè´¹è€…ç»„çš„ä¸€ä¸ªæ¶ˆè´¹è€…å®ä¾‹ä»offsetä¸‹æ ‡4å¼€å§‹æ¶ˆè´¹çš„ ä½†æ˜¯æ¶ˆè´¹è€…çš„æ¶ˆè´¹é€»è¾‘æ¯”è¾ƒé‡é‡çº§ï¼Œå¤„ç†çš„æ—¶é—´æ¯”è¾ƒé•¿ï¼Œè¿˜æ²¡æœ‰æäº¤ã€‚è¿™æ—¶å€™å¦å¤–ä¸€ä¸ªæ¶ˆè´¹è€…ç»„çš„ä¸€ä¸ªæ¶ˆè´¹è€…å®ä¾‹æ¥ç›¸åŒçš„åˆ†åŒºæ¥æ‹¿æ¶ˆæ¯ï¼Œä¼šä¸ä¼šæ‹¿çš„æ˜¯ä¸Šä¸€ä¸ªæ¶ˆè´¹è€…å·²ç»æ‹¿è¿‡çš„æ¶ˆè´¹ï¼Œä»è€Œé‡å¤æ¶ˆè´¹ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473808,"discussion_content":"æœ‰å¯èƒ½çš„~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573212022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1398824,"avatar":"https://static001.geekbang.org/account/avatar/00/15/58/28/c86340ca.jpg","nickname":"è¾¾æ–‡è¥¿","note":"","ucode":"01C1063F23D634","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53376,"discussion_content":"åŒä¸€ä¸ªtopicä¸‹çš„æŸä¸ªåˆ†åŒºä¸æ˜¯åªä¼šè¢«åˆ†é…ç»™å”¯ä¸€çš„ä¸€ä¸ªæ¶ˆè´¹è€…å—?è¿™ç§æƒ…å†µæ€ä¹ˆä¼šé‡å¤æ¶ˆè´¹å‘¢?","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1574162789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1240624,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ee/30/cfdd1b86.jpg","nickname":"åˆ˜æµ©","note":"","ucode":"81F5D6E62751C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200994,"discussion_content":"ä½ è¿™æ˜¯è®¢é˜…æ¨¡å‹ï¼Œæ€ä¹ˆå¯ä»¥å«é‡å¤æ¶ˆè´¹å‘¢","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1583750398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112415,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f9/5f/b0a125a9.jpg","nickname":"chp","note":"","ucode":"F0A2442230CD45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":146315,"discussion_content":"nä½ éƒ½è¯´äº†æ˜¯å¦ä¸€ä¸ªæ¶ˆè´¹è€…ç»„äº†ï¼Œä¸¤ä¸ªæ¶ˆè´¹è€…ç»„çš„æ¶ˆè´¹è¿›åº¦æ²¡æœ‰å…³ç³»","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1579608115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390153,"discussion_content":"ä½ èƒ½é—®è¿™æ ·çš„é—®é¢˜ï¼Œè¯´æ˜ä½ å·²ç»ä¸å…·å¤‡å¾€ä¸‹çœ‹çš„æ¡ä»¶äº†ï¼Œè€å¸ˆä¹Ÿæ˜¯åœ¨æç¬‘ï¼Œå›å»çœ‹åŸºç¡€éƒ¨åˆ†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629691105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1606581,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJIIibocUHNRgafeNUvibW0YI2v1qDaiaZCVQ37FcrMs0ettIDD0snhsy4Ac2ADnLmjM7KGNeznj2hrg/132","nickname":"ä¸€åå…­å¤œ","note":"","ucode":"41D4A6695B2A7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214591,"discussion_content":"åŒä¸€ä¸ªåˆ†åŒºå¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…ç»„æ¶ˆè´¹ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585212103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135623,"user_name":"jc9090kkk","can_delete":false,"product_type":"c1","uid":1338831,"ip_address":"","ucode":"6C992D07A2E78F","user_header":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","comment_is_top":false,"comment_ctime":1569230456,"is_pvip":false,"replies":[{"id":"51994","content":"å¦‚æœæ²¡æœ‰è¾¾åˆ°æäº¤æ—¶é—´å°±ä¸ä¼šæäº¤ï¼Œè‡ªåŠ¨æäº¤å®Œå…¨ç”±consumerè‡ªè¡Œç»´æŠ¤ï¼Œç¡®å®å¯èƒ½é€ æˆæ•°æ®çš„é‡å¤æ¶ˆè´¹ã€‚ä½ çš„ç†è§£å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼šï¼‰<br><br>ç›®å‰å•çº¯ä¾èµ–consumeræ˜¯æ— æ³•é¿å…æ¶ˆæ¯çš„é‡å¤æ¶ˆè´¹çš„ï¼ŒKafkaé»˜è®¤æä¾›çš„æ¶ˆæ¯å¤„ç†è¯­ä¹‰å°±æ˜¯è‡³å°‘ä¸€æ¬¡å¤„ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1569230859,"ip_address":"","comment_id":135623,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5864197752","product_id":100029201,"comment_content":"æ„Ÿè§‰è€å¸ˆåˆ†äº«ï¼Œå¯¹äºæ–‡ç« ä¸­çš„é‚£ä¸ªè‡ªåŠ¨æäº¤çš„ä¾‹å­æœ‰ç‚¹ç–‘æƒ‘ï¼Œå¸Œæœ›è€å¸ˆèƒ½è§£ç­”ä¸€ä¸‹ï¼š<br>auto.commit.interval.msè®¾ç½®ä¸º5sï¼Œä¹Ÿå°±æ˜¯è¯´consumeræ¯5ç§’æ‰æäº¤ä¸€æ¬¡ä½ç§»ä¿¡æ¯ï¼Œé‚£consumerå¦‚æœæ¯æ¶ˆè´¹ä¸€æ¡æ•°æ®ï¼Œä½†æ˜¯æ²¡æœ‰è¾¾åˆ°è‡ªåŠ¨æäº¤çš„æ—¶é—´ï¼Œè¿™ä¸ªä½ç§»ä¿¡æ¯è¯¥å¦‚ä½•ç®¡ç†ï¼Ÿconsumerè‡ªå·±åšç»´æŠ¤å—ï¼Ÿä½†æ˜¯ä¹Ÿéœ€è¦è·Ÿbrokerç«¯è¿›è¡Œä½ç§»ä¿¡æ¯åŒæ­¥çš„å§ï¼Ÿ ä¸ç„¶å¯èƒ½ä¼šé€ æˆæ•°æ®çš„é‡å¤æ¶ˆè´¹ï¼Ÿè¿˜æ˜¯æ¯5sçš„æäº¤å’Œconsumerè‡ªåŠ¨æäº¤çš„æ—¶å€™éƒ½ä¼šä¼´éšä½ç§»ä¿¡æ¯çš„åŒæ­¥ï¼Ÿæ˜¯æˆ‘çš„ç†è§£æœ‰é—®é¢˜å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468276,"discussion_content":"å¦‚æœæ²¡æœ‰è¾¾åˆ°æäº¤æ—¶é—´å°±ä¸ä¼šæäº¤ï¼Œè‡ªåŠ¨æäº¤å®Œå…¨ç”±consumerè‡ªè¡Œç»´æŠ¤ï¼Œç¡®å®å¯èƒ½é€ æˆæ•°æ®çš„é‡å¤æ¶ˆè´¹ã€‚ä½ çš„ç†è§£å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼šï¼‰\n\nç›®å‰å•çº¯ä¾èµ–consumeræ˜¯æ— æ³•é¿å…æ¶ˆæ¯çš„é‡å¤æ¶ˆè´¹çš„ï¼ŒKafkaé»˜è®¤æä¾›çš„æ¶ˆæ¯å¤„ç†è¯­ä¹‰å°±æ˜¯è‡³å°‘ä¸€æ¬¡å¤„ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569230859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1031756,"avatar":"","nickname":"å°å°","note":"","ucode":"AF1F011FDDE29B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282623,"discussion_content":"æ„Ÿè§‰è€å¸ˆéƒ½å›ç­”å‰åçŸ›ç›¾äº†ï¼Œâ€œconsumerå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæŒ‡é’ˆâ€ ä¸Šé¢æœ‰ä¸ªé—®é¢˜ï¼Œä»–æ˜¯è¿™æ ·å›ç­”çš„ã€‚ã€‚æˆ‘ç°åœ¨çœŸæ™•äº†ï¼Œè°èƒ½è§£æƒ‘ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592032366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1031756,"avatar":"","nickname":"å°å°","note":"","ucode":"AF1F011FDDE29B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379677,"discussion_content":"å°±æ˜¯consumerè‡ªå·±ä¹Ÿè®°å½•ä¸€ä¸ªoffsetå•Šï¼Œæ¯æ¬¡æ‹‰å–éƒ½æŒ‰è‡ªå·±çš„offsetæ‹‰å•Šï¼Œè‡ªå·±æŒ‚äº†é‡å¯æ‰ä»offset_topicé‡Œæ‹¿offsetå•Šï¼Œconsumerè‡ªå·±ç»´æŠ¤ä¸€ä¸ªoffsetå°±æ˜¯é¿å…å¼‚æ­¥ä¿å­˜offsetä¸åŠæ—¶ä¹‹ç±»çš„é—®é¢˜å•Š","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1624069894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282623,"ip_address":""},"score":379677,"extra":""}]},{"author":{"id":1172145,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e2/b1/d00399c0.jpg","nickname":"å¿ƒæœ‰æ—å¤•","note":"","ucode":"BC6E1AE557BFF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":43137,"discussion_content":"ä¸å¤ªç†è§£ï¼Œä¸æ˜¯è¯´pullä¹‹å‰ä¼šä¿è¯æäº¤ä¸Šæ¬¡pullçš„ä½ç§»ä¹ˆï¼Ÿè¿™ä¸¤ä¸ªæ¦‚å¿µä¸æ˜¯å†²çªä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572859720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132458,"user_name":"è°¢ç‰¹","can_delete":false,"product_type":"c1","uid":1248684,"ip_address":"","ucode":"9C30DBFECFE649","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/ac/09678490.jpg","comment_is_top":false,"comment_ctime":1568126559,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5863093855","product_id":100029201,"comment_content":"ä¸æ¼ä¸é‡å¤å¾ˆéš¾åšåˆ°ï¼Œæˆ‘ç°åœ¨éƒ½ä¸çŸ¥é“æ€ä¹ˆå¼„ï¼Œè¯»åç§»é‡å®¹æ˜“ï¼Œæäº¤å¤ªéš¾","like_count":1},{"had_liked":false,"id":114315,"user_name":"calljson","can_delete":false,"product_type":"c1","uid":1505262,"ip_address":"","ucode":"A5F81A6A5B4497","user_header":"https://static001.geekbang.org/account/avatar/00/16/f7/ee/6eeb58a3.jpg","comment_is_top":false,"comment_ctime":1563270506,"is_pvip":false,"replies":[{"id":"41681","content":"1. ä¼šçš„<br>2. ä¸€ä¸ªKafkaConsumerå®ä¾‹å°±ç®—ä¸€ä¸ªå®¢æˆ·ç«¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563274203,"ip_address":"","comment_id":114315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858237802","product_id":100029201,"comment_content":"è¯·æ•™è€å¸ˆä¸¤ä¸ªé—®é¢˜ï¼Œ<br>1.  consumer.close()ä¼šè§¦å‘rebalanceå—ï¼Ÿ<br>2. ä¸€ä¸ªconsumerå®ä¾‹å°±æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å—ï¼Ÿæ¯”å¦‚ï¼šçº¿ç¨‹æ± ä¸­newäº†ä¸¤ä¸ªconsumerå®ä¾‹ï¼Œæ˜¯ä¸æ˜¯æ„å‘³ç€å¼€å¯äº†ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Ÿ<br>éº»çƒ¦è€å¸ˆè§£æƒ‘ï¼Œè°¢è°¢æ‚¨","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458604,"discussion_content":"1. ä¼šçš„\n2. ä¸€ä¸ªKafkaConsumerå®ä¾‹å°±ç®—ä¸€ä¸ªå®¢æˆ·ç«¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563274203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114115,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1563239383,"is_pvip":false,"replies":[{"id":"41688","content":"è‡ªåŠ¨æäº¤è‡ªåŠ¨å°±èƒ½ä¿è¯æ­£ç¡®æ€§ï¼Œåªæ˜¯æœ‰å¯èƒ½é‡å¤æ¶ˆè´¹","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563274557,"ip_address":"","comment_id":114115,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858206679","product_id":100029201,"comment_content":"è‡ªåŠ¨æäº¤æ¨¡å¼ä¸‹ï¼Œå¤šçº¿ç¨‹æ¶ˆè´¹ï¼ŒKafka client å¦‚ä½•ä¿è¯ä½ç§»æäº¤çš„æ­£ç¡®æ€§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458524,"discussion_content":"è‡ªåŠ¨æäº¤è‡ªåŠ¨å°±èƒ½ä¿è¯æ­£ç¡®æ€§ï¼Œåªæ˜¯æœ‰å¯èƒ½é‡å¤æ¶ˆè´¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563274557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113684,"user_name":"åŒå¶","can_delete":false,"product_type":"c1","uid":1009260,"ip_address":"","ucode":"6DA1D477F9D580","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/6c/4a68a916.jpg","comment_is_top":false,"comment_ctime":1563117438,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5858084734","product_id":100029201,"comment_content":"æˆ‘ç†è§£ä¸­çš„ enable.auto.commit è·Ÿæ–‡ç« ä¸­è¯´çš„ä¸å¤ªä¸€æ ·ï¼Œæˆ‘ç†è§£è®¾ç½®ä¸º true çš„æ—¶å€™æä¾›çš„æ˜¯è‡³å¤šä¸€æ¬¡çš„è¯­ä¹‰ï¼Œè€Œä¸æ˜¯è‡³å°‘ä¸€æ¬¡çš„è¯­ä¹‰ã€‚<br><br>æˆ‘ä¸ç”¨ javaï¼Œçœ‹çš„æ˜¯ librdkafka çš„æ–‡æ¡£ã€‚enable.auto.commit çš„æ–‡æ¡£è¯´æ˜æ˜¯ï¼šAutomatically and periodically commit offsets in the background. ä¹Ÿå°±æ˜¯è¯´ä»–ä¼šå®šæœŸæäº¤ offsetï¼Œä½†æ˜¯è¿™é‡Œæ²¡æœ‰æ˜è¯´æäº¤çš„ offset æ˜¯ä»€ä¹ˆæ—¶å€™è®°å½•çš„ï¼Œæˆ‘çš„ç†è§£æ˜¯è®°å½•æ˜¯ç”± enable.auto.offset.store å†³å®šçš„ã€‚<br><br>enable.auto.offset.store æ–‡æ¡£è¯´æ˜æ˜¯ï¼šAutomatically store offset of last message provided to application. The offset store is an in-memory store of the next offset to (auto-)commit for each partition. ä¹Ÿå°±æ˜¯è¯´å¦‚æœè®¾ç½®æˆ trueï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œä»–ä¼šè‡ªåŠ¨æŠŠä¸Šä¸ªæäº¤ç»™åº”ç”¨ç¨‹åºçš„offset è®°å½•åˆ°å†…å­˜ä¸­ã€‚<br><br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåº”ç”¨æ‹¿åˆ°ä¸€ä¸ª offset äº†ï¼Œlibrdkafka å°±ä¼šæŠŠè¿™ä¸ª offset è®°å½•åˆ°å†…å­˜ä¸­ï¼Œç„¶åé»˜è®¤æƒ…å†µä¸‹è‡³å¤š 5s ä¹‹åï¼Œå°±ä¼šæäº¤ç»™ brokerã€‚è¿™æ—¶å€™å¦‚æœåº”ç”¨è¿˜æ²¡æœ‰å®Œæˆè¿™ä¸ª offset çš„å¤„ç†æ—¶ï¼Œå‘ç”Ÿäº†å´©æºƒï¼Œè¿™ä¸ª offset å°±ä¸¢æ‰äº†ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªè‡³å¤šä¸€æ¬¡çš„è¯­ä¹‰ã€‚<br><br>æˆ‘ç†è§£ä¸­æä¾›è‡³å°‘ä¸€æ¬¡è¯­ä¹‰éœ€è¦å…³æ‰ enable.auto.commit è‡ªå·±æ§åˆ¶æäº¤æ‰è¡Œã€‚","like_count":1,"discussions":[{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390154,"discussion_content":"è‡ªåŠ¨æäº¤å°±æ˜¯è‡³å°‘ä¸€æ¬¡è¯­ä¹‰ï¼Œå› ä¸ºæ¶ˆæ¯ä½ç§»çš„æäº¤åªå‘ç”Ÿåœ¨ poll() æ–¹æ³•é‡Œï¼Œæ²¡æœ‰æ‰€è°“å…¶ä»–åœ°æ–¹æˆ–è€…å­çº¿ç¨‹è§¦å‘æäº¤è¿™ä¸ªæ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629691520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1900382,"avatar":"","nickname":"Geek_b924b4","note":"","ucode":"B071335B28CE04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343553,"discussion_content":"æäº¤ç”±pollé‡Œé¢å®Œæˆï¼Œå•çº¿ç¨‹æ¶ˆè´¹ä¸ä¼š\nä½†æ˜¯å¤šçº¿ç¨‹æ¶ˆè´¹å°±ä¼šå‘ç”Ÿæ¶ˆæ¯ä¸¢å¤±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611071930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113323,"user_name":"nightmare","can_delete":false,"product_type":"c1","uid":1056314,"ip_address":"","ucode":"EF2E51C2122A86","user_header":"https://static001.geekbang.org/account/avatar/00/10/1e/3a/5b21c01c.jpg","comment_is_top":false,"comment_ctime":1562951762,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5857919058","product_id":100029201,"comment_content":"å¯¹äºé‡å¤æ¶ˆè´¹æ—¢ç„¶é¿å…ä¸äº†å°±æŠŠæ¶ˆæ¯çš„ä¸šåŠ¡é€»è¾‘å”¯ä¸€æ€§å­˜å‚¨ä¸‹æ¥ï¼Œå¦‚æœå·²ç»å­˜å‚¨å°±ä¸æ¶ˆè´¹ï¼Œè€Œæ²¡æœ‰å†æ¶ˆè´¹ï¼Œæ¯”å¦‚å­˜å‚¨åˆ°mongodbä¸­ï¼Œå¦‚æœè€ƒè™‘æ€§èƒ½redisä¹Ÿå¯ä»¥ï¼Œå¦‚æœä¸šåŠ¡æ¯”è¾ƒé‡è¦å¯ä»¥ç”¨æ•°æ®åº“çš„ä¹è§‚é”æ¥ä¿è¯å¹‚ç­‰æ€§ï¼Œå› ä¸ºé‡å¤æ¶ˆè´¹æ¯•ç«Ÿæ˜¯å°æ¦‚ç‡äº‹ä»¶","like_count":1,"discussions":[{"author":{"id":1676519,"avatar":"https://static001.geekbang.org/account/avatar/00/19/94/e7/bfef4648.jpg","nickname":"é£å¤©å¤§ç™½èœ","note":"","ucode":"77344998A30D6E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21790,"discussion_content":"å…¶å®å°±æ˜¯end-to-end arguments in system designã€‚å³ä½¿ä¸­é—´ä»¶å¦‚kafkaæä¾›äº†&#34;exactly once&#34;è¯­ä¹‰ï¼Œæœ€åend systemsä»ç„¶è¦è‡ªå·±å»å®ç°dedupã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569520963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360307,"user_name":"beifengzhishen001","can_delete":false,"product_type":"c1","uid":2109853,"ip_address":"é‡åº†","ucode":"77D42B7DD9E754","user_header":"","comment_is_top":false,"comment_ctime":1666417638,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666417638","product_id":100029201,"comment_content":"çœ‹äº†éƒ¨åˆ†è¯„è®ºæ€»ç»“ä¸‹ï¼š1.å®¢æˆ·ç«¯æäº¤ä½ç§»æ˜¯ä¸ºäº†å†å¹³è¡¡åèƒ½å¾—çŸ¥å„ä¸ªåˆ†åŒºä»å“ªå¼€å§‹æ¶ˆè´¹,å¯¹äºæ¶ˆè´¹è€…ç»„æ­£å¸¸æ¶ˆè´¹æœªå‘ç”Ÿå†å¹³è¡¡çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…æ˜¯åœ¨å†…å­˜é‡Œç»´æŠ¤ç€è‡ªå·±è´Ÿè´£çš„å„ä¸ªåˆ†åŒºçš„æ¶ˆè´¹è¿›åº¦çš„ï¼Œä¸ä¼šé‡å¤æ‹‰å–æ¶ˆæ¯ï¼Œå³ä½¿ä¸Šä¸€æ¬¡æ‹‰å–æ¶ˆæ¯å¤„ç†æ¶ˆæ¯åï¼Œæäº¤åç§»é‡å¤±è´¥ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ä¸‹ä¸€æ¬¡æ‹‰å–é‡å¤çš„æ¶ˆæ¯<br>å› æ­¤ï¼Œå‡è®¾æŸä¸ªæ¶ˆè´¹è€…æ‹‰å»åˆ°äº†æŸåˆ†åŒº1ï½3åç§»é‡çš„æ¶ˆæ¯ï¼Œå³ä½¿æ²¡æœ‰å°†åç§»é‡4æäº¤ï¼Œä¸‹æ¬¡æ‹‰å–ä¾ç„¶ä¸ä¼šæ‹‰å»åˆ°123æ¶ˆæ¯ã€‚å¦å¤–ï¼Œå¦‚æœæ¶ˆè´¹è€…æ¶ˆè´¹1ï½3å¤±è´¥ï¼Œå¯¹äºkafkaè€Œè¨€ï¼Œè¿™ä¸‰æ¡æ¶ˆæ¯å¯¹äºè¯¥æ¶ˆè´¹è€…ä¹Ÿå·²ç»æ¶ˆè´¹è¿‡ï¼Œä¸‹æ¬¡æ‹‰å–ä¾ç„¶ä»4å¼€å§‹æ‹‰å–ï¼Œå³ä½¿æ¶ˆè´¹å¤±è´¥åæ²¡æœ‰æ‰‹åŠ¨æäº¤åç§»é‡ï¼Œå› æ­¤ä¸šåŠ¡ä¸Šçš„æ¶ˆè´¹æ¶ˆæ¯å’ŒKafkaæœ¬èº«çš„æ¶ˆè´¹æ¶ˆæ¯æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼ˆkafka:ç»™ä½ æœºä¼šå¯ä½ ä¸ä¸­ç”¨å•Šï¼‰ã€‚å½“ç„¶ï¼Œæ­¤æ—¶å¦‚æœå‘ç”Ÿå†å¹³è¡¡ï¼Œæ–°åˆ†é…åˆ°è¿™ä¸ªåˆ†åŒºçš„æ¶ˆè´¹è€…åˆ™ä¼šé‡å¤æ¶ˆè´¹åˆ°1ï½3æ¶ˆæ¯ã€‚<br>2.é‚£ä¸ªè‡ªåŠ¨æäº¤ä½ç§»åç§»é‡æ—¶é—´é—´éš”æ˜¯ä¸ªè‡ªåŠ¨æäº¤æ—¶é—´é—´éš”ä¸‹é™ï¼Œåªæœ‰ä¸¤æ¬¡pollæ—¶é—´é—´éš”è¶…è¿‡å®ƒï¼Œç¬¬äºŒæ¬¡pollæ‰ä¼šæäº¤ä½ç§»åç§»é‡ï¼Œä¸æ˜¯è¯´è¿‡äº†è¯¥æ—¶é—´é—´éš”å°±è‡ªåŠ¨æäº¤ä½ç§»ï¼Œè¿˜æ˜¯è¦é pollæ¥è§¦å‘","like_count":0},{"had_liked":false,"id":354865,"user_name":"Geek_bd79d4","can_delete":false,"product_type":"c1","uid":3069067,"ip_address":"ä¸Šæµ·","ucode":"63C47892E8F7B1","user_header":"","comment_is_top":false,"comment_ctime":1660830410,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660830410","product_id":100029201,"comment_content":"å¦‚æœä¸¤ä¸ªcommitAsyncå¦‚ä½•ä¿è¯é¡ºåºï¼Œä»¥åŠcommitAsyncå’ŒcommitSyncå¦‚ä½•ä¿è¯é¡ºåº<br><br>This is an asynchronous call and will not block. Any errors encountered are either passed to the callback (if provided) or discarded.<br>Offsets committed through multiple calls to this API are guaranteed to be sent in the same order as the invocations. Corresponding commit callbacks are also invoked in the same order. Additionally note that offsets committed through this API are guaranteed to complete before a subsequent call to commitSync() (and variants) returns.","like_count":0},{"had_liked":false,"id":350044,"user_name":"Geek_f8f454","can_delete":false,"product_type":"c1","uid":1436394,"ip_address":"","ucode":"C9E9E20A3C45C5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJNnicJ5b5NnXIXamjcgibvs7DujIIuBZQr17Ke1q9HQvI4GD1rFjupxwXDoZHias41wRD2XFS5yZ8Ww/132","comment_is_top":false,"comment_ctime":1656517787,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1656517787","product_id":100029201,"comment_content":"è€å¸ˆæœ‰ä¸€ä¸ªé—®é¢˜è¯·æ•™ä¸‹ï¼Œ<br>å¦‚æœæ¯æ¬¡åªpoll ä¸€æ¡æ•°æ®ï¼Œæ‹¿åˆ°æ•°æ®æ‰”åˆ°çº¿ç¨‹æ± ä¸­å»æ‰§è¡Œä¸šåŠ¡ï¼Œä¸šåŠ¡éœ€è¦çš„æ—¶é—´ä¸å›ºå®šï¼›åœ¨æ­¤æœŸé—´å¦‚æœçº¿ç¨‹æ± çš„ç­‰å¾…é˜Ÿåˆ—æ»¡äº†ï¼Œå¾ªç¯pollä¼šé˜»å¡ï¼Œè¶…è¿‡ä¸€å®šæ—¶é—´ä¼šè§¦å‘é‡å¹³è¡¡ï¼›é’ˆå¯¹è¿™ç§ä¸šåŠ¡åœºæ™¯ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•ã€‚<br>æˆ‘è®¾æƒ³è‡ªå·±ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè®°å½•offset,å¾ªç¯æ—¶æ ¹æ®offset pollæ•°æ®ï¼Œå¦‚æœå‘ç°é˜Ÿåˆ—ä¸æ»¡å°±æ‰”è¿›å»ï¼Œè®¡æ•°å™¨+1,å¦‚æœå‘ç°æ»¡äº†ï¼Œç»§ç»­å¾ªç¯ï¼Œä¸çŸ¥æ˜¯å¦å¯è¡Œã€‚","like_count":0},{"had_liked":false,"id":346311,"user_name":"æœˆæ˜é£æ¸…","can_delete":false,"product_type":"c1","uid":2226367,"ip_address":"","ucode":"65A97CF2E320FA","user_header":"https://static001.geekbang.org/account/avatar/00/21/f8/bf/59f2e600.jpg","comment_is_top":false,"comment_ctime":1653015855,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653015855","product_id":100029201,"comment_content":"æ–‡ç« ä¸­å¤šæ¬¡æåˆ°äº†â€œè¯­ä¹‰ä¿éšœâ€ï¼Œæˆ‘ä¸å¤ªç†è§£è¿™ä¸ªè¯ï¼Œæƒ³é—®ä¸€ä¸‹è€å¸ˆã€‚","like_count":0},{"had_liked":false,"id":345966,"user_name":"äºŒåäºŒ","can_delete":false,"product_type":"c1","uid":2310614,"ip_address":"","ucode":"F3B89CBAC6C905","user_header":"https://static001.geekbang.org/account/avatar/00/23/41/d6/412e9fa4.jpg","comment_is_top":false,"comment_ctime":1652722333,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652722333","product_id":100029201,"comment_content":"æ¶ˆè´¹è€…ä½ç§»è¡¨ç¤ºä¸‹ä¸€æ¡è¦æ¶ˆè´¹çš„æ¶ˆæ¯ä½ç½®ä¸å¤ªå‡†ç¡®ï¼Œåªèƒ½è¯´æ˜¯ä¸‹ä¸€æ¡å¾…æäº¤ä½ç§»çš„æ¶ˆæ¯çš„çš„ä½ç½®ã€‚è‡ªåŠ¨æäº¤æ—¶å¯èƒ½pollå¤šæ¬¡ï¼Œæ‰‹åŠ¨æäº¤ä¹Ÿå¯ä»¥å¤šæ¬¡pollï¼Œæœ€åå†æäº¤ä¸€æ¬¡ä½ç§»","like_count":0},{"had_liked":false,"id":342247,"user_name":"ç»˜ä¸–æµ®å¤¸ ã¤","can_delete":false,"product_type":"c1","uid":1763933,"ip_address":"","ucode":"6A3960195753BA","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ea/5d/ccb4c205.jpg","comment_is_top":false,"comment_ctime":1650126182,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650126182","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£æ¶ˆæ¯æ¶ˆè´¹åçš„Offsetæ—¢ä¼šåœ¨__consumer_offsetè¿™ä¸ªä½ç§»ä¸»é¢˜ä¸­å­˜å‚¨å…¶offsetåç§»é‡ï¼Œä¹Ÿä¼šåœ¨å„è‡ªçš„topicä¸­å­˜å‚¨å­˜å‚¨ä¸€ä»½ä»¥æ¶ˆè´¹åˆ°çš„offsetï¼Œä¹Ÿå°±æ˜¯offset+1ï¼Œä¸‹ä¸€ä¸ªéœ€è¦æ¶ˆè´¹çš„ä½ç½®","like_count":0},{"had_liked":false,"id":339951,"user_name":"i_chase","can_delete":false,"product_type":"c1","uid":1795511,"ip_address":"","ucode":"09C41C863F4EA3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/b7/058276dc.jpg","comment_is_top":false,"comment_ctime":1648482002,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648482002","product_id":100029201,"comment_content":"æƒ³é—®ä¸€ä¸‹consumerçš„æ¶ˆè´¹æµç¨‹ï¼Œæ˜¯ä¸æ˜¯ä¸‹é¢è¿™æ ·ï¼š<br>consumeræ¶ˆè´¹çš„æ—¶å€™ï¼Œä¼šè®°å½•å·²ç»æ‹‰å–è¿‡çš„æ¶ˆæ¯çš„offsetã€‚pollæ¶ˆæ¯æ—¶ï¼Œå³ä½¿ä¹‹å‰çš„æ¶ˆæ¯è¿˜æ²¡æœ‰æäº¤offsetï¼Œä¹Ÿä¸ä¼šé‡å¤æ‹‰å–ã€‚åªè¦consumeræ²¡æœ‰é‡å¯ï¼Œé‚£ä¹ˆpollæ¶ˆæ¯æ—¶çš„offsetæ˜¯å®¢æˆ·ç«¯å†…éƒ¨ç»´æŠ¤è®°å½•çš„ã€‚åªæœ‰consumerç¬¬ä¸€æ¬¡æˆ–è€…é‡å¯åï¼Œæ‰ä¼šå»_consumer_offsets topicè·å–æ¶ˆè´¹è¿›åº¦","like_count":0},{"had_liked":false,"id":339832,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1648430921,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648430921","product_id":100029201,"comment_content":"è€å¸ˆè¿™å¥è¯ä¸æ˜¯ç‰¹åˆ«ç†è§£ï¼Œå…¶å®è‡ªåŠ¨æäº¤ä¹Ÿå­˜åœ¨é˜»å¡çš„é—®é¢˜ï¼Œè¿™ä¸èƒ½ç®—æ˜¯æ‰‹åŠ¨çš„ä¸€ä¸ªç¼ºç‚¹å§ã€‚è¿™æ˜¯è‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨çš„åŒæ­¥æäº¤çš„å…±åŒçš„ç¼ºç‚¹ã€‚<br><br>å®ƒä¹Ÿæœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå°±æ˜¯åœ¨è°ƒç”¨ commitSync() æ—¶ï¼ŒConsumer ç¨‹åºä¼šå¤„äºé˜»å¡çŠ¶æ€","like_count":0},{"had_liked":false,"id":333693,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1644476210,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644476210","product_id":100029201,"comment_content":"enable.auto.commit ä¸º true  è‡ªåŠ¨æäº¤ï¼Œ <br>enable.auto.commit ä¸º falseæ—¶å€™   è°ƒç”¨ consumer.commitSync() æ–¹æ³•   å…³é—­è‡ªåŠ¨æäº¤ï¼Œ<br>ä»ç”¨æˆ·çš„è§’åº¦æ¥è¯´ï¼Œä½ç§»æäº¤åˆ†ä¸ºè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ï¼›ä» Consumer ç«¯çš„è§’åº¦æ¥è¯´ï¼Œä½ç§»æäº¤åˆ†ä¸ºåŒæ­¥æäº¤å’Œå¼‚æ­¥æäº¤ã€‚","like_count":0},{"had_liked":false,"id":332978,"user_name":"é™ˆæ–Œ","can_delete":false,"product_type":"c1","uid":1367048,"ip_address":"","ucode":"B639AB5F6AA03D","user_header":"https://static001.geekbang.org/account/avatar/00/14/dc/08/64f5ab52.jpg","comment_is_top":false,"comment_ctime":1643907258,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1643907258","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½~<br>æ¶ˆè´¹å¤±è´¥åï¼Œæˆ‘èƒ½ä¸èƒ½ç«‹å³é‡æ–°æ¶ˆè´¹ï¼Œè€Œä¸æ˜¯ç­‰åˆ°Consumerä¸‹æ¬¡é‡æ–°å¯åŠ¨æ—¶å»æ¶ˆè´¹ï¼Ÿ<br>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒConsumeråœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè¢«é‡å¯ï¼Œæˆ‘ç†è§£ä¸€èˆ¬æƒ…å†µæˆ‘çš„Consumerä¸ä¼šæŒ‚æ‰ã€‚å¦‚æœæˆ‘çš„Consumerä¸æŒ‚æ‰çš„è¯æˆ‘æ²¡æœ‰æäº¤çš„æ¶ˆæ¯æ˜¯ä¸æ˜¯æ°¸è¿œä¸ä¼šè¢«é‡æ–°æ¶ˆè´¹ï¼Ÿ","like_count":0},{"had_liked":false,"id":329822,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1641552337,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1641552337","product_id":100029201,"comment_content":"å…³äºè‡ªåŠ¨æäº¤æŸ¥è¯¢åˆ°æœ‰4ä¸ªåœ°æ–¹ï¼ˆçœ‹çš„csndçš„åšå®¢ï¼‰ã€‚<br><br>1ã€æ¶ˆè´¹è€…æ‰‹åŠ¨æŒ‡å®šè‡ªå·±éœ€è¦æ¶ˆè´¹çš„åˆ†åŒº(æ­¤å¤„æ˜¯å¼‚æ­¥æäº¤)<br>  KafkaConsumer#assign#å†…éƒ¨è°ƒç”¨äº† <br>    this.coordinator.maybeAutoCommitOffsetsAsync(this.time.milliseconds());<br><br>2ã€æ¶ˆè´¹è€…æ‹‰å–æ¶ˆæ¯çš„æ—¶å€™(æ­¤å¤„æ˜¯å¼‚æ­¥æäº¤)<br>è°ƒç”¨æ ˆï¼š<br>KafkaConsumer#poll--&gt;this.updateAssignmentMetadataIfNeeded(timer, false);<br>--&gt;!this.coordinator.poll(timer, waitForJoinGroup)<br>--&gt;this.maybeAutoCommitOffsetsAsync(timer.currentTimeMs());<br><br><br>public void maybeAutoCommitOffsetsAsync(long now) {<br>        if (this.autoCommitEnabled) {<br>            this.nextAutoCommitTimer.update(now);<br>            if (this.nextAutoCommitTimer.isExpired()) {<br>                this.nextAutoCommitTimer.reset((long)this.autoCommitIntervalMs);<br>                this.doAutoCommitOffsetsAsync();<br>            }<br>        }<br><br>    }<br><br>3ã€æ¶ˆè´¹è€…ä»¥æ¶ˆè´¹è€…ç»„æ¨¡å¼å¯åŠ¨ï¼ŒåŠ å…¥ç»„é‡æ–°rebalanceä¹‹å‰(æ­¤å¤„æ˜¯åŒæ­¥æäº¤)<br><br>AbstractCoordinator#ensureActiveGroup<br><br>AbstractCoordinator#joinGroupIfNeeded<br>AbstractCoordinator#onJoinPrepare<br>ConsumerCoordinator#maybeAutoCommitOffsetsSync<br>åªè¦å¼€å¯äº†è‡ªåŠ¨æäº¤ï¼Œæ­¤å¤„æ˜¯ä¸€å®šä¼šå‘åè°ƒè€…åŒæ­¥æäº¤ä½ç§»ï¼Œå› ä¸ºéœ€è¦é‡æ–°rebalanceï¼Œæ¶ˆè´¹è€…ç»„ä¸­å„ä¸ªæ¶ˆè´¹è€…çš„åˆ†åŒºæ—¢æœ‰å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œé‡æ–°æ¶ˆè´¹ä¹‹å‰ä¸€å®šè¦è·å–æœ€æ–°çš„å”¯ä¸€ï¼Œå°½æœ€å¤§åŠªåŠ›é¿å…é‡å¤æ¶ˆè´¹ã€‚<br><br>4ã€ æ¶ˆè´¹è€…å…³é—­çš„æ—¶å€™ï¼Œ ä¹Ÿä¼šå‡ºå‘rebalance<br>ConsumerCoordinator#close<br>å…³é—­çš„æ—¶å€™è‚¯å®šæ˜¯è¦åŒæ­¥æäº¤æ¶ˆè´¹ä½ç§»çš„ã€‚<br><br>","like_count":0},{"had_liked":false,"id":328688,"user_name":"æ°´æ»´s","can_delete":false,"product_type":"c1","uid":1264431,"ip_address":"","ucode":"1C684514B54B6F","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/2f/2f73fd52.jpg","comment_is_top":false,"comment_ctime":1640843021,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640843021","product_id":100029201,"comment_content":"æ‰‹åŠ¨æäº¤ä½ç§»èƒ½æäº¤ä¸å±äºåˆ†é…ç»™è‡ªå·±åˆ†åŒºçš„ä½ç§»å—ï¼Œå¦‚æœå¯ä»¥ï¼Œæ¯æ¬¡æäº¤åéƒ½è¦æ¸…ç©ºè‡ªå·±ä¿å­˜ä½ç§»çš„Mapå§ï¼Œé˜²æ­¢rebalanceåMapä¸­æœ‰åˆ«çš„åˆ†åŒºçš„ä½ç§»ä¿¡æ¯ï¼Ÿ","like_count":0},{"had_liked":false,"id":323875,"user_name":"æœ€çƒ¦èµ·åå­—","can_delete":false,"product_type":"c1","uid":2153662,"ip_address":"","ucode":"405A886940AD46","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIXbxuhFpUq10M3H87WiaE4bbqI5gTtmxfQCZDPUad4KrCJn8NiaPxhask5YSzRyQiaRaEJqaGoax35A/132","comment_is_top":false,"comment_ctime":1638190478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638190478","product_id":100029201,"comment_content":"try {<br>           while(true) {<br>                        ConsumerRecords&lt;String, String&gt; records = <br>                                    consumer.poll(Duration.ofSeconds(1));<br>                        process(records); &#47;&#47; å¤„ç†æ¶ˆæ¯<br>                        commitAysnc(); &#47;&#47; ä½¿ç”¨å¼‚æ­¥æäº¤è§„é¿é˜»å¡<br>            }<br>} catch(Exception e) {<br>            handle(e); &#47;&#47; å¤„ç†å¼‚å¸¸<br>} finally {<br>            try {<br>                        consumer.commitSync(); &#47;&#47; æœ€åä¸€æ¬¡æäº¤ä½¿ç”¨åŒæ­¥é˜»å¡å¼æäº¤<br>  } finally {<br>       consumer.close();<br>}<br>}<br><br><br>è€å¸ˆï¼Œè¿™æ®µä»£ç ï¼Œæ˜¯ä¸æ˜¯ä½ç§»è¢«æäº¤äº†ä¸¤æ¬¡å‘¢","like_count":0},{"had_liked":false,"id":314520,"user_name":"åˆ˜å›½","can_delete":false,"product_type":"c1","uid":2780661,"ip_address":"","ucode":"BED5A222F32C0C","user_header":"https://static001.geekbang.org/account/avatar/00/2a/6d/f5/d5c528c1.jpg","comment_is_top":false,"comment_ctime":1633167121,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633167121","product_id":100029201,"comment_content":"å¦‚æœä¸šåŠ¡æ‰§è¡Œæ—¶é—´3sï¼Œæœ€å°æäº¤æ—¶é—´5sï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡pollä¸ä¼šæäº¤offsetï¼Œè¦ç­‰åˆ°ä¸‹æ¬¡pollè¶…è¿‡5säº†æ‰æäº¤ã€‚","like_count":0},{"had_liked":false,"id":306448,"user_name":"è‰¾æ–‡","can_delete":false,"product_type":"c1","uid":2304575,"ip_address":"","ucode":"44D35A7248F7B0","user_header":"https://static001.geekbang.org/account/avatar/00/23/2a/3f/a97fe8ef.jpg","comment_is_top":false,"comment_ctime":1628565999,"is_pvip":false,"replies":[{"id":"111187","content":"é€šå¸¸è¡¨ç¤ºæ¶ˆæ¯ä¸¢å¤±äº†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1628841981,"ip_address":"","comment_id":306448,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1628565999","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä»€ä¹ˆæƒ…å†µä¸‹kafkaçš„æ¶ˆæ¯å †ç§¯é‡LAGä¼šä¸ºè´Ÿæ•°äº†ï¼Œä¾‹å¦‚-1200","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524769,"discussion_content":"é€šå¸¸è¡¨ç¤ºæ¶ˆæ¯ä¸¢å¤±äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628841981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298755,"user_name":"å¤§å®å½“","can_delete":false,"product_type":"c1","uid":1181578,"ip_address":"","ucode":"418EEFBD0C5A85","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/8a/4bef6202.jpg","comment_is_top":false,"comment_ctime":1624290141,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624290141","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå¥½åƒcommitAsyncæ–¹æ³•å¾ˆå¥½å°±ä¸å†æŠ›å‡ºå¼‚å¸¸äº†ï¼Ÿhttps:&#47;&#47;issues.apache.org&#47;jira&#47;browse&#47;KAFKA-5052","like_count":0},{"had_liked":false,"id":298149,"user_name":"æ‹‰å¯é‡Œå•¦","can_delete":false,"product_type":"c1","uid":1230293,"ip_address":"","ucode":"26E20DF096BDAF","user_header":"https://static001.geekbang.org/account/avatar/00/12/c5/d5/90ca8efe.jpg","comment_is_top":false,"comment_ctime":1623924487,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623924487","product_id":100029201,"comment_content":"åŸæ¥å¦‚æ­¤ï¼Œæäº¤ä½ç§»æ˜¯ä¸ºäº†é˜²æ­¢æ¶ˆè´¹è€…é‡å¯æ‰¾ä¸åˆ°æ¶ˆè´¹ä½ç½®æ‰æœ‰çš„ã€‚ä¸é‡å¯çš„è¯ï¼Œæ¶ˆè´¹è€…è‡ªå·±ä¼šä¿å­˜æ¶ˆè´¹ä½ç§»çš„ï¼Œä¸ä¼šå‡ºç°æ¶ˆæ¯é”™ä½çš„ï¼Œä¸€æ—¦é‡å¯äº†ï¼Œæ¶ˆè´¹è€…ä¿å­˜åœ¨å†…å­˜ä¸­çš„ä½ç§»å°±æ²¡äº†ï¼Œå°±éœ€è¦å°†ä½ç§»æäº¤åˆ°è¿œç¨‹æŒä¹…åŒ–äº†","like_count":0},{"had_liked":false,"id":294417,"user_name":"å¤§åŠ›æ°´æ‰‹Jerry","can_delete":false,"product_type":"c1","uid":1227840,"ip_address":"","ucode":"E4A6C71E275DB5","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/40/2279cfb5.jpg","comment_is_top":false,"comment_ctime":1621935613,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621935613","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå¼‚æ­¥å…¨é‡æäº¤æ¨¡å¼çš„ä¾‹å­ä¸­â€œ<br>while (true) {<br>            ConsumerRecords&lt;String, String&gt; records = <br>  consumer.poll(Duration.ofSeconds(1));<br>            process(records); &#47;&#47; å¤„ç†æ¶ˆæ¯<br>            consumer.commitAsync((offsets, exception) -&gt; {<br>  if (exception != null)<br>  handle(exception);<br>  });<br>}â€<br>åº”è¯¥æ˜¯ â€œconsumer.commitAsync((exception) -&gt; {&quot;ï¼Œä¸éœ€è¦offsetå‚æ•°ã€‚","like_count":0},{"had_liked":false,"id":291336,"user_name":"Zain","can_delete":false,"product_type":"c1","uid":1920896,"ip_address":"","ucode":"03EDF7B1BE9CF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4f/80/19f946ba.jpg","comment_is_top":false,"comment_ctime":1620215161,"is_pvip":false,"replies":[{"id":"105695","content":"1. â€œæ¶ˆæ¯æ‹‰å›æ¥äº†ä½†æ˜¯ä¸šåŠ¡è¿˜æ²¡å¤„ç†å®Œï¼Œè¿™æ—¶æäº¤ä½ç§»çš„è¯â€ --- ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚æ¶ˆæ¯å¤„ç†å®Œæˆåæ‰ä¼šæäº¤ä½ç§»<br>2. åŒä¸Šï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1620613897,"ip_address":"","comment_id":291336,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1620215161","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹äº†è¿™èŠ‚è¯¾æ‰€æœ‰çš„è¯„è®ºï¼ŒåŸºæœ¬éƒ½æ˜¯åœ¨é—®è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œèƒ½ä¸èƒ½éº»çƒ¦æ‚¨æŠ½ç©ºå†è§£é‡Šä¸€ä¸‹<br>1. consumerè‡ªåŠ¨æäº¤çš„æƒ…å†µä¸‹ï¼Œauto.commit.interval.ms è®¾ç½®çš„æ¯”è¾ƒçŸ­ï¼Œæ¶ˆæ¯æ‹‰å›æ¥äº†ä½†æ˜¯ä¸šåŠ¡è¿˜æ²¡å¤„ç†å®Œï¼Œè¿™æ—¶æäº¤ä½ç§»çš„è¯ï¼Œä¸‡ä¸€åç»­æœªå¤„ç†çš„ä¸šåŠ¡æŠ¥é”™ï¼Œé‚£æ˜¯ä¸æ˜¯å°±è¡¨ç¤ºè¿™æ¬¡çš„ä¿¡æ¯ä¸¢äº†ä¸€éƒ¨åˆ†ï¼Œä¸‹æ¬¡ä¹Ÿæ¶ˆè´¹ä¸åˆ°è¿™éƒ¨åˆ†äº†<br>2.ä¹Ÿæ˜¯è‡ªåŠ¨æäº¤ï¼Œpollæ¯”auto.commit.interval.msé¢‘ç¹çš„è¯ï¼Œæ˜¯ä¸æ˜¯æ¯pollä¸€æ¬¡å°±æäº¤ä¸€æ¬¡ä½ç§»ï¼Œç­‰åˆ°é—´éš”åˆ°äº†ä¹Ÿä¼šå†æäº¤ä¸€æ¬¡<br><br>è°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519443,"discussion_content":"1. â€œæ¶ˆæ¯æ‹‰å›æ¥äº†ä½†æ˜¯ä¸šåŠ¡è¿˜æ²¡å¤„ç†å®Œï¼Œè¿™æ—¶æäº¤ä½ç§»çš„è¯â€ --- ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚æ¶ˆæ¯å¤„ç†å®Œæˆåæ‰ä¼šæäº¤ä½ç§»\n2. åŒä¸Šï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620613897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2083187,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/c9/73/047f51d2.jpg","nickname":"ybonfire","note":"","ucode":"9A8D541DEFFBB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":372814,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ï¼Œä¸å­˜åœ¨æ¶ˆæ¯æ‹‰å›æ¥ä¸šåŠ¡è¿˜æ²¡å¤„ç†å®Œçš„æƒ…å†µã€‚å¦‚æœå‡ºç°äº†è¿™ä¸ªæƒ…å†µï¼Œå°±è¦è§¦å‘REBALANCEäº†ï¼Œè¿™æ¬¡çš„ä½ç§»ä¸ä¼šæäº¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620469347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290912,"user_name":"çŸ³æ –","can_delete":false,"product_type":"c1","uid":1496443,"ip_address":"","ucode":"35600F645A479F","user_header":"https://static001.geekbang.org/account/avatar/00/16/d5/7b/c512da6a.jpg","comment_is_top":false,"comment_ctime":1619855681,"is_pvip":false,"replies":[{"id":"105699","content":" æŠ±æ­‰ï¼Œä¸å¤ªæ¸…æ¥šspring-kafkaå®¢æˆ·ç«¯çš„å®ç°ã€‚å¦‚æœä½ è§‰å¾—è§£å†³äº†é—®é¢˜ï¼Œé‚£åº”è¯¥å°±æ²¡é—®é¢˜äº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1620614328,"ip_address":"","comment_id":290912,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619855681","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚æˆ‘æœ€è¿‘è«åå…¶å¦™é‡åˆ°ä¸€ä¸ªé—®é¢˜ã€‚Kafkaç‰ˆæœ¬è¯•è¿‡ï¼š2.0.1&#47;2.3.1&#47;2.6 éƒ½æ˜¯ä¸€æ ·çš„ã€‚æˆ‘çš„å®¢æˆ·ç«¯æ˜¯ï¼šSpring-Kafkaï¼š2.2.3 + kafka-clients: 2.3.1. Consumerçš„é…ç½®ï¼šenable.auto.commit = trueï¼Œ auto.commit.interval.ms = 5000 ï¼ˆ5sï¼‰ï¼Œ max.poll.interval.ms = 300000 ï¼ˆ5 minï¼‰ï¼Œmax.poll.records = 500 ã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œå‘ç°auto-commitå½¢åŒè™šè®¾ï¼Œå¦‚æœæ¯5sä¼šæäº¤ï¼Œä¸è¯¥å‡ºç°å¤§é¢ç§¯çš„é‡å¤æ¶ˆè´¹ã€‚ç°åœ¨åªè¦5minæ— æ³•æŠŠæ‰€æœ‰æ¶ˆæ¯å¤„ç†å®Œï¼Œå°±ä¼šå¯¼è‡´ä¸æ–­é‡æ–°æ¶ˆè´¹ã€‚ç„¶åå‡ºç°æ­»å¾ªç¯ã€‚åæ¥å‘ç°spring-kafkaè¿˜æœ‰ä¸€ä¸ªAckModeå¯ä»¥é…ç½®ï¼Œé»˜è®¤å€¼æ˜¯Batch ï¼ˆä¹Ÿå°±æ˜¯åªæœ‰åœ¨ä¸‹æ¬¡pollçš„æ—¶å€™ï¼Œæ‰ä¼šä¸€èµ·æäº¤ï¼‰ã€‚æŒ‰ç…§å®˜æ–¹æ–‡æ¡£https:&#47;&#47;docs.spring.io&#47;spring-kafka&#47;reference&#47;html&#47;#committing-offsetsï¼Œæˆ‘çš„ç†è§£æ˜¯åªæœ‰åœ¨enable.auto.commit=falseçš„æ—¶å€™ï¼Œæ‰ä¼šç”Ÿæ•ˆã€‚ä½†æ˜¯æˆ‘æŠŠAckModeä¿®æ”¹æˆRecordï¼ˆä¹Ÿå°±æ˜¯æ¯æ¡è®°å½•å¤„ç†å®Œï¼Œå°±ä¼šç›´æ¥æäº¤ï¼‰ï¼Œå°±æ²¡æœ‰å‰é¢è¯´çš„æ­»å¾ªç¯çš„é—®é¢˜äº†ã€‚ä½†æ˜¯è¿™å—æˆ‘æ²¡æ³•ç†è§£ï¼Œenable.auto.commit=trueçš„æ—¶å€™ï¼Œè¿˜æ˜¯æœ‰å½±å“ã€‚æˆ‘æ„Ÿè§‰è‡ªå·±å‘ç°äº†é—®é¢˜çš„root causeï¼Œä½†æ˜¯æ²¡æ³•è‡ªåœ†å…¶è¯´ï¼Œæ›´æ²¡æ³•è·Ÿå…¶ä»–äººå»è¯´ã€‚ã€‚ã€‚å› ä¸ºæˆ‘å‘ç°çš„è·Ÿå®˜æ–¹æ–‡æ¡£ ä»¥åŠ google&#47;ç™¾åº¦åˆ°çš„ï¼Œä¸ä¸€æ ·ã€‚æˆ‘è§‰å¾—è¿™ä¸ªè·Ÿæˆ‘å®¢æˆ·ç«¯ç‰ˆæœ¬åº”è¯¥å…³ç³»ä¸å¤§å§ã€‚ã€‚å› ä¸ºKafka serverçš„ç‰ˆæœ¬ä¹Ÿéƒ½è¯•è¿‡å¾ˆå¤šäº†ã€‚æˆ‘åé¢ä¹Ÿæ¢ä¸ªå®¢æˆ·ç«¯ç‰ˆæœ¬è¯•è¯•ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519320,"discussion_content":" æŠ±æ­‰ï¼Œä¸å¤ªæ¸…æ¥šspring-kafkaå®¢æˆ·ç«¯çš„å®ç°ã€‚å¦‚æœä½ è§‰å¾—è§£å†³äº†é—®é¢˜ï¼Œé‚£åº”è¯¥å°±æ²¡é—®é¢˜äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620614328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290792,"user_name":"Geek_9c6c3e","can_delete":false,"product_type":"c1","uid":2577451,"ip_address":"","ucode":"F3B71465B25BC6","user_header":"","comment_is_top":false,"comment_ctime":1619753703,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619753703","product_id":100029201,"comment_content":"åˆ†åŒº+groupçš„è®¾è®¡æ˜¯ä¸ºäº†ä¿è¯ï¼šé«˜å¯ç”¨ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå¯æ‹“å±•ã€‚","like_count":0},{"had_liked":false,"id":290578,"user_name":"çŸ³æ –","can_delete":false,"product_type":"c1","uid":1496443,"ip_address":"","ucode":"35600F645A479F","user_header":"https://static001.geekbang.org/account/avatar/00/16/d5/7b/c512da6a.jpg","comment_is_top":false,"comment_ctime":1619626698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619626698","product_id":100029201,"comment_content":"å¦‚æœenable.auto.commit=true, auto.commit.interval.ms=5sï¼Œmax.poll.interval.ms=5mã€‚ç„¶åconsumerä¸€æ¬¡æ‹‰äº†100æ¡è¿‡æ¥ï¼Œ5mä¹‹å†…åªå¤„ç†äº†30æ¡ï¼Œå¤§æ¦‚10sä¸€æ¡ã€‚è¿™ä¸ªæ—¶å€™ä¼šå‘ç”Ÿï¼Œrebalanceã€‚ç„¶åä¸‹æ¬¡å¯èƒ½ä¼šç»§ç»­ä»ç¬¬30&#47;31æ¡ï¼Œå¼€å§‹ç»§ç»­æ¶ˆè´¹ï¼ˆç¬¬30æ¡å¯èƒ½ä¼šé‡å¤æ¶ˆè´¹ï¼‰ã€‚é‚£ä¸‹æ¬¡å‘ç”Ÿrebalance å’Œé‡å¤æ¶ˆè´¹çš„messageï¼Œå¤§æ¦‚åº”è¯¥æ˜¯ç¬¬60æ¡ï¼›ä¸€æ¬¡ç±»æ¨ï¼Œåé¢åº”è¯¥æ˜¯ç¬¬90æ¡ï¼›æœ€åè¿˜æ˜¯ä¼šå…¨éƒ¨æ‰§è¡Œå®Œã€‚  å¯æ˜¯æˆ‘é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„é—®é¢˜ï¼Œå°±æ˜¯ä»ç¬¬30æ¡å¼€å§‹ï¼Œåˆ°ç¬¬100æ¡ï¼Œå…¨éƒ¨ä¸€ç›´æ— é™å¾ªç¯å»æ¶ˆè´¹å¤„ç†ã€‚ã€‚ã€‚ã€‚æˆ‘ä¸èƒ½ç†è§£ï¼Œå¸Œæœ›ä½œè€… æˆ–è€… å…¶ä»–å¤§ç‰›å¯ä»¥è§£ç­”ä¸€ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":288628,"user_name":"Edon du","can_delete":false,"product_type":"c1","uid":1074742,"ip_address":"","ucode":"1648624751AAE9","user_header":"https://static001.geekbang.org/account/avatar/00/10/66/36/b4a4e6fb.jpg","comment_is_top":false,"comment_ctime":1618567600,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618567600","product_id":100029201,"comment_content":"æ–‡ç« ä½œè€…è¯´äº†æ˜¯Rebalanceåè¿›è¡Œäº†é‡å¤æ¶ˆè´¹ï¼Œæˆ‘ç»™åˆ†æä¸€ä¸‹<br>ä¹Ÿå¸Œæœ›æœ‰åŒå­¦è¡¥å……ä¸€ä¸‹ï¼š<br><br>æ¶ˆè´¹è€…ç»„çš„æ¯ä¸ªæˆå‘˜å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª  åˆ†åŒº:ä½ç§»çš„map<br>consumer0ç»´æŠ¤äº† partition0:10, partition1:20<br>consumer1ç»´æŠ¤äº† partition2:10, partition3:20<br>consumer2ç»´æŠ¤äº† partition4:10, partition5:20<br><br>è¿™æ—¶å€™consumer2æ‰§è¡Œäº†pollæ–¹æ³•ï¼Œéœ€è¦å…ˆæäº¤äº†ä¸Šä¸€æ‰¹10ä¸ªæ¶ˆæ¯çš„ä½ç§»ï¼Œå‡å¦‚è¯´æ˜¯åˆ†partition4çš„ä½ç§»<br>è¿™æ—¶å€™consumer2çš„çŠ¶æ€æ˜¯<br>consumer2ç»´æŠ¤äº† partition4:21, partition5:20<br>ç´§æ¥ç€æ‹‰å–äº†10æ¡æ¶ˆæ¯ï¼Œè¿›è¡Œå¤„ç†ï¼Œå¤„ç†äº†3ç§’å¤„ç†äº†8æ¡æ¶ˆæ¯ï¼Œè¿™æ—¶å€™consumer0æŒ‚äº†ï¼Œç³»ç»Ÿè¦è¿›è¡Œé‡å¹³è¡¡<br>é‡å¹³è¡¡åçš„ç»“æœä¸º<br>consumer1ç»´æŠ¤äº† partition2:10, partition3:20, partition4:21<br>consumer2ç»´æŠ¤äº† partition0:10, partition1:20, partition5:20<br><br>è¿™æ—¶å€™consumer2å†æ‰§è¡Œpollæ–¹æ³•æ˜¯ä¸èƒ½æäº¤ä¸Šä¸€æ‰¹çš„ä½ç§»çš„ï¼Œå› ä¸ºä¸Šä¸€æ‰¹çš„ä½ç§»æ‰€åœ¨çš„åˆ†åŒºå·²ç»ä¸å±äºå®ƒäº†<br>å¦‚æœè¿˜èƒ½æäº¤æ—§åˆ†åŒºçš„ä½ç§»ï¼Œè¿™æ—¶å€™æ—§åˆ†åŒºæ‰€å½’å±çš„consumer1å·²ç»å¼€å§‹æ¶ˆè´¹äº†ï¼Œæ˜¯å¦ä¹Ÿé‡å¤æ¶ˆè´¹äº†å‘¢<br>æ‰€ä»¥æˆ‘çŒœæƒ³ï¼Œkafkaå†…éƒ¨çš„è®¾è®¡å°±æ˜¯é‡å¹³è¡¡åéœ€è¦é‡æ–°ä»åˆ†åŒºçš„æœ€æ–°ä½ç§»è¿›è¡Œæ¶ˆè´¹","like_count":0},{"had_liked":false,"id":285511,"user_name":"Allan","can_delete":false,"product_type":"c1","uid":1310388,"ip_address":"","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1616852880,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616852880","product_id":100029201,"comment_content":"1ã€å¯¹äºé‡å¤æ¶ˆè´¹ï¼Œå¦‚æœè¦é¿å…ï¼Œåªæ¶ˆè´¹ä¸€æ¬¡ï¼Œå…¶å®å¯ä»¥æŠŠæ¯æ¬¡æ¶ˆè´¹çš„ç»“æœå­˜å‚¨åœ¨ä¸€ä¸ªä½ç½®ï¼Œæ¯”å¦‚ å­˜å…¥redisï¼Œä¸‹æ¬¡æ¶ˆè´¹å¦‚æœæ¶ˆæ¯å­˜åœ¨redisä¸­ï¼Œé‚£ä¹ˆå°±ä¸ç”¨å†æ¬¡å¤„ç†äº†ã€‚","like_count":0},{"had_liked":false,"id":273847,"user_name":"Edward Lee","can_delete":false,"product_type":"c1","uid":1228518,"ip_address":"","ucode":"156223F1D7E94A","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/e6/7808520d.jpg","comment_is_top":false,"comment_ctime":1610695635,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610695635","product_id":100029201,"comment_content":"æ—¢ç„¶é‡å¤æ¶ˆè´¹æ— æ³•é¿å…ï¼Œé‚£ä¹ˆæ¶ˆè´¹åº”ç”¨ç¨‹åºå°±å¿…é¡»è¦è€ƒè™‘é‡å¤æ¶ˆè´¹çš„æƒ…å†µï¼Œç„¶è€Œåº”ç”¨ç¨‹åºå·²ç»è€ƒè™‘äº†å»é‡çš„æƒ…å†µï¼Œé‚£ä¹ˆä½¿ç”¨ enable.auto.commit= trueï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼ˆæ³¨æ„ Log Cleaner ä¸èƒ½åœï¼‰<br><br>è¯¾åè®¨è®º<br>1. å¯¹äºå¯æŒç»­æ›´æ–°ç±»çš„æ¶ˆæ¯å¢åŠ ä¸€ä¸ªæœ€åæ›´æ–°æ—¶é—´ï¼Œæ¶ˆè´¹è€…ç¨‹åºéœ€è¦å¯¹æ¯”æœ€åçš„æ›´æ–°æ—¶é—´ï¼Œè¾ƒæ—©æœŸçš„æ¶ˆæ¯å¿½ç•¥å¤„ç†ï¼ˆç±»ä¼¼äºæ¶ˆæ¯çš„ç‰ˆæœ¬å·ï¼‰<br>2. å¯¹äºä¸€æ¬¡æ€§çš„æ¶ˆæ¯ï¼Œä½¿ç”¨æ•°æ®å”¯ä¸€æ ‡è¯†ï¼Œæ¶ˆè´¹è€…åªéœ€è¦ç®€å•æŸ¥è¯¢åŒ¹é…å»é‡<br><br>ä½¿ç”¨ commitSync(Map) å’Œ commitAsync(Map) çš„å‰ææ˜¯ poll ä¸‹æ¥çš„æ¶ˆæ¯çš„ offset å¿…é¡»ä»¥æŒ‰ç…§å„ä¸ªåˆ†åŒºçš„ä»å°åˆ°å¤§é¡ºåºæ’åˆ—ï¼Œé¿å…æäº¤çš„ offset ä¼šå¤§å°é¢ å€’é—®é¢˜","like_count":0},{"had_liked":false,"id":272765,"user_name":"æœºè½¦","can_delete":false,"product_type":"c1","uid":1881786,"ip_address":"","ucode":"CD32A645AE310A","user_header":"https://static001.geekbang.org/account/avatar/00/1c/b6/ba/f76d996b.jpg","comment_is_top":false,"comment_ctime":1610268681,"is_pvip":false,"replies":[{"id":"99093","content":"ä¸ä¼šå•Šã€‚ä»0å¼€å§‹ï¼Œåˆ°99ï¼Œæ­£å¥½100æ¡æ¶ˆæ¯","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1610620993,"ip_address":"","comment_id":272765,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1610268681","product_id":100029201,"comment_content":"åˆå§‹å€¼ count=1 æ‰å¯¹å§ï¼Œä¸ç„¶ç¬¬ä¸€æ¬¡æäº¤æ˜¯æ¶ˆè´¹101æ¡æ•°æ®","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513377,"discussion_content":"ä¸ä¼šå•Šã€‚ä»0å¼€å§‹ï¼Œåˆ°99ï¼Œæ­£å¥½100æ¡æ¶ˆæ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610620993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264989,"user_name":"wind","can_delete":false,"product_type":"c1","uid":1507189,"ip_address":"","ucode":"5EC77AEB18130E","user_header":"https://static001.geekbang.org/account/avatar/00/16/ff/75/9c1b2ece.jpg","comment_is_top":false,"comment_ctime":1606729342,"is_pvip":false,"replies":[{"id":"96630","content":"è¿™å–å†³äºä½ å¦‚ä½•å¤„ç†æ¶ˆè´¹å¤±è´¥ï¼Œå¦‚æœç›´æ¥åäº†ï¼Œæ˜¯å¯ä»¥ç»§ç»­æ¶ˆè´¹ä¸‹é¢çš„ï¼Œå¦‚æœfail fastå°±å¦è¯´äº†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1607078089,"ip_address":"","comment_id":264989,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606729342","product_id":100029201,"comment_content":"å¦‚æœè®¾ç½®æ‰‹åŠ¨æäº¤ä½†æ˜¯å› ä¸ºå‡ºç°æ¶ˆè´¹å¤±è´¥çš„æƒ…å†µæ²¡æœ‰æäº¤ï¼Œæ˜¯ä¸æ˜¯åé¢çš„æ¶ˆæ¯éƒ½æ¶ˆè´¹ä¸äº†äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510761,"discussion_content":"è¿™å–å†³äºä½ å¦‚ä½•å¤„ç†æ¶ˆè´¹å¤±è´¥ï¼Œå¦‚æœç›´æ¥åäº†ï¼Œæ˜¯å¯ä»¥ç»§ç»­æ¶ˆè´¹ä¸‹é¢çš„ï¼Œå¦‚æœfail fastå°±å¦è¯´äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607078089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264227,"user_name":"æœ´ç´ æŸ æª¬c","can_delete":false,"product_type":"c1","uid":1547667,"ip_address":"","ucode":"2D4CBB70D801B1","user_header":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","comment_is_top":false,"comment_ctime":1606384716,"is_pvip":false,"replies":[{"id":"95848","content":"ä¸å†²çªã€‚ä½ èƒ½çœ‹åˆ°çš„ä½ç§»æ˜¯å·²æäº¤çš„ä½ç§»ï¼Œä½ çœ‹ä¸åˆ°çš„ä½ç§»åˆ™æ˜¯pollå†…éƒ¨ç»´æŠ¤çš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1606438323,"ip_address":"","comment_id":264227,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606384716","product_id":100029201,"comment_content":"ä¸€ä¼šè¯´ä¸‹æ¬¡pollçš„æ—¶å€™ æäº¤ä¸Šæ¬¡çš„æ¶ˆæ¯çš„offsetï¼Œä¸€ä¼šåˆè¯´è°ƒç”¨pollçš„è¿‡ç¨‹ä¸­ï¼Œç°åœ¨åˆè¯´åœ¨pollè‡ªå·±ç»´æŠ¤ï¼Œä¹±äº†ä¹±äº†ï¼Œåˆ°åº•æ˜¯æ–‡ä¸­è¯´çš„è¿˜æ˜¯è¯„è®ºä¸­è¯´çš„å•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510472,"discussion_content":"ä¸å†²çªã€‚ä½ èƒ½çœ‹åˆ°çš„ä½ç§»æ˜¯å·²æäº¤çš„ä½ç§»ï¼Œä½ çœ‹ä¸åˆ°çš„ä½ç§»åˆ™æ˜¯pollå†…éƒ¨ç»´æŠ¤çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606438323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264212,"user_name":"æœ´ç´ æŸ æª¬c","can_delete":false,"product_type":"c1","uid":1547667,"ip_address":"","ucode":"2D4CBB70D801B1","user_header":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","comment_is_top":false,"comment_ctime":1606381002,"is_pvip":false,"replies":[{"id":"95851","content":"å—¯å—¯ï¼Œå·®ä¸å¤šã€‚æ€»ä¹‹æ˜¯æäº¤ä½ç§»æ˜¯åœ¨pollæ–¹æ³•ä¸­å®Œæˆçš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1606439355,"ip_address":"","comment_id":264212,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606381002","product_id":100029201,"comment_content":"è‡ªåŠ¨æäº¤ å½“å‰pollæ–¹æ³•ï¼Œææ¡¥ä¸Šä¼ pollæ‰§è¡Œçš„æ¶ˆæ¯åç§»ï¼Œè¿™å—æ²¡æ˜ç™½ï¼Œwhileå¾ªç¯ä¸‹æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸Šæ¬¡ä¸šåŠ¡ä»£ç å·²ç»æ‰§è¡Œå®Œäº†ï¼Œç„¶ååœ¨æ‰§è¡Œè‡ªåŠ¨æäº¤åç§»ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510464,"discussion_content":"å—¯å—¯ï¼Œå·®ä¸å¤šã€‚æ€»ä¹‹æ˜¯æäº¤ä½ç§»æ˜¯åœ¨pollæ–¹æ³•ä¸­å®Œæˆçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606439355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261729,"user_name":"ï½é£é“ƒï½","can_delete":false,"product_type":"c1","uid":1116191,"ip_address":"","ucode":"4EEA12C17BA913","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/1f/b24a561d.jpg","comment_is_top":false,"comment_ctime":1605506753,"is_pvip":true,"replies":[{"id":"95342","content":"å—¯å—¯ï¼Œæ–‡ä¸­åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚ä½ å½“ç„¶å¯ä»¥ç»“åˆè‡ªå·±çš„æ¶ˆè´¹ç­–ç•¥é€‰æ‹©æ˜¯å¦ç»§ç»­ç­‰å¾…æ”¶é›†å‰©ä¸‹çš„99æ¡ï¼Œè¿˜æ˜¯å®ç°å³æ—¶æ¶ˆæ¯å¤„ç†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1605838437,"ip_address":"","comment_id":261729,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605506753","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼æ‰¹é‡æäº¤é‚£é‡Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼šæ¯100æ¡æ¶ˆæ¯æäº¤ä¸€æ¬¡ï¼Œé‚£ä¹ˆå¦‚æœæœ‰5001æ¡ï¼Œå‰©ä¸‹è¿™1æ¡æ¶ˆæ¯æ€ä¹ˆåŠï¼Ÿ ä»è¿™ä¸ªä»£ç çœ‹æ˜¯æ¶ˆè´¹ä¸äº†çš„","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509586,"discussion_content":"å—¯å—¯ï¼Œæ–‡ä¸­åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚ä½ å½“ç„¶å¯ä»¥ç»“åˆè‡ªå·±çš„æ¶ˆè´¹ç­–ç•¥é€‰æ‹©æ˜¯å¦ç»§ç»­ç­‰å¾…æ”¶é›†å‰©ä¸‹çš„99æ¡ï¼Œè¿˜æ˜¯å®ç°å³æ—¶æ¶ˆæ¯å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605838437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":255607,"user_name":"Impassive","can_delete":false,"product_type":"c1","uid":1639924,"ip_address":"","ucode":"4C386167F67559","user_header":"https://static001.geekbang.org/account/avatar/00/19/05/f4/216ad755.jpg","comment_is_top":false,"comment_ctime":1603378339,"is_pvip":false,"replies":[{"id":"93385","content":"æ²¡å¤ªæ‡‚ã€‚mapé‡Œé¢éƒ½æ˜¯ä¸åŒçš„keyï¼Œä¹Ÿå°±æ˜¯ä¸åŒçš„åˆ†åŒºï¼Œéƒ½ä¼šæäº¤çš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1603675558,"ip_address":"","comment_id":255607,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1603378339","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚æœæ”¾åˆ°mapé‡Œé¢æäº¤ï¼Œæ˜¯mapé‡Œé¢çš„æ‰€æœ‰å€¼éƒ½ä¼šæäº¤ä¸€æ¬¡ï¼Œè¿˜æ˜¯åªä¼šé€‰æ‹©å…¶ä¸­æœ€å¤§çš„ä¸€ä¸ªå€¼ï¼Ÿè°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507768,"discussion_content":"æ²¡å¤ªæ‡‚ã€‚mapé‡Œé¢éƒ½æ˜¯ä¸åŒçš„keyï¼Œä¹Ÿå°±æ˜¯ä¸åŒçš„åˆ†åŒºï¼Œéƒ½ä¼šæäº¤çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603675558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1069755,"avatar":"https://static001.geekbang.org/account/avatar/00/10/52/bb/225e70a6.jpg","nickname":"hunterlodge","note":"","ucode":"5B83A79E784161","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328633,"discussion_content":"æˆ‘æœ¬æ¥ä¹Ÿæœ‰æ­¤ä¸€é—®ï¼Œä¸è¿‡æ¨æ•²äº†ä¸€ç•ªï¼Œå‘ç°æ²¡æœ‰é—®é¢˜ã€‚å› ä¸ºä»TopicPartitionçš„hashCodeåŠequalsä»£ç åˆ¤æ–­ï¼ŒåŒä¸€ä¸ªtopicçš„åŒä¸€ä¸ªpartitionï¼Œä»–ä»¬çš„hashCodeå€¼ç›¸åŒä¸”equalï¼Œæ‰€ä»¥å¦‚æœè¢«map putäº†å¤šæ¬¡ï¼Œåˆ™åé¢çš„æ•°æ®ä¼šè¦†ç›–å‰é¢çš„æ•°æ®ï¼Œå³mapä¸­åªä¼šä¿å­˜æœ€æ–°ä¸€æ¬¡çš„ä½ç§»å€¼ï¼ˆå³æœ€å¤§å€¼)ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606199696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253067,"user_name":"å¯¹ä¸é”™","can_delete":false,"product_type":"c1","uid":1682027,"ip_address":"","ucode":"EF55733E3BD78B","user_header":"https://static001.geekbang.org/account/avatar/00/19/aa/6b/ab9a072a.jpg","comment_is_top":false,"comment_ctime":1602584208,"is_pvip":false,"replies":[{"id":"92488","content":"&quot;å½“å‰æ¶ˆè´¹è¿›åº¦è¢«æ›´æ–°ä¸º15ï¼Œé‚£ä¸­é—´æ¶ˆè´¹å¤±è´¥çš„å‡ æ¡æ¶ˆæ¯ä¼šéšç€é‡å¯æ¶ˆè´¹è€…è€Œé‡æ–°æ¶ˆè´¹å—ï¼Ÿ&quot; -- ä¸ä¼š<br><br>ä¸ä¼šè¢«åˆ é™¤ï¼Œåªæ˜¯ä¹‹å‰æäº¤çš„è¿›åº¦ä¼šè¢«æ–°çš„è¿›åº¦åºŸå¼ƒ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1602636643,"ip_address":"","comment_id":253067,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1602584208","product_id":100029201,"comment_content":"è¯·é—®kafkaæ¶ˆè´¹è€…ä½¿ç”¨æ‰‹åŠ¨æäº¤ä½ç§»çš„æ–¹å¼ï¼Œå½“å‰æ¶ˆè´¹è¿›åº¦ä¸º10ï¼Œ,ç„¶åæ¶ˆè´¹å‡ æ¡å¤±è´¥ä¹‹åï¼Œæäº¤ä½ç§»å¤±è´¥ï¼Œåé¢æ¶ˆè´¹æ–°çš„æ¶ˆæ¯æˆåŠŸä¹‹åï¼Œå½“å‰æ¶ˆè´¹è¿›åº¦è¢«æ›´æ–°ä¸º15ï¼Œé‚£ä¸­é—´æ¶ˆè´¹å¤±è´¥çš„å‡ æ¡æ¶ˆæ¯ä¼šéšç€é‡å¯æ¶ˆè´¹è€…è€Œé‡æ–°æ¶ˆè´¹å—ï¼Ÿä½ç§»ä¸»é¢˜é‡Œé¢çš„æ¶ˆè´¹è¿›åº¦ä¼šéšç€é‡å¯æ¶ˆè´¹è€…è€Œè¢«åˆ é™¤å—?å¦‚æœä¸è¢«åˆ é™¤ï¼Œé‚£åº”è¯¥ä¸ä¼šé‡æ–°æ¶ˆè´¹å¤±è´¥çš„é‚£å‡ æ¡æ¶ˆæ¯å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506962,"discussion_content":"&amp;quot;å½“å‰æ¶ˆè´¹è¿›åº¦è¢«æ›´æ–°ä¸º15ï¼Œé‚£ä¸­é—´æ¶ˆè´¹å¤±è´¥çš„å‡ æ¡æ¶ˆæ¯ä¼šéšç€é‡å¯æ¶ˆè´¹è€…è€Œé‡æ–°æ¶ˆè´¹å—ï¼Ÿ&amp;quot; -- ä¸ä¼š\n\nä¸ä¼šè¢«åˆ é™¤ï¼Œåªæ˜¯ä¹‹å‰æäº¤çš„è¿›åº¦ä¼šè¢«æ–°çš„è¿›åº¦åºŸå¼ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602636643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251923,"user_name":"Alpha","can_delete":false,"product_type":"c1","uid":1001861,"ip_address":"","ucode":"60CA15A25EC796","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/85/3f161d95.jpg","comment_is_top":false,"comment_ctime":1601975239,"is_pvip":false,"replies":[{"id":"92144","content":"auto.commit.interval.mså®é™…ä¸Šæ˜¯æœ€ä½çš„æäº¤é—´éš”ï¼Œæ¯”å¦‚è®¾ç½®5sï¼ŒKafkaè‡³å°‘ä¼šä¿è¯5ç§’å†…ä¸æäº¤ä½ç§»ã€‚è‡³äºæ˜¯å¦èƒ½å¤Ÿç²¾å‡†åœ°5ç§’æäº¤ï¼Œå–å†³äºpollè°ƒç”¨çš„æ—¶æœº","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1602205872,"ip_address":"","comment_id":251923,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1601975239","product_id":100029201,"comment_content":"å…³äºè‡ªåŠ¨æäº¤ï¼Œæ—¢ç„¶æ˜¯å•ç‹¬çš„çº¿ç¨‹æ¥æäº¤ï¼Œé‚£ä¹ˆ auto.commit.interval.ms æ—¶é—´ä¸€åˆ°å°±æäº¤ï¼Œä¸ºä½•ä¼šè·Ÿpoll()æœ‰å…³ç³»å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506664,"discussion_content":"auto.commit.interval.mså®é™…ä¸Šæ˜¯æœ€ä½çš„æäº¤é—´éš”ï¼Œæ¯”å¦‚è®¾ç½®5sï¼ŒKafkaè‡³å°‘ä¼šä¿è¯5ç§’å†…ä¸æäº¤ä½ç§»ã€‚è‡³äºæ˜¯å¦èƒ½å¤Ÿç²¾å‡†åœ°5ç§’æäº¤ï¼Œå–å†³äºpollè°ƒç”¨çš„æ—¶æœº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602205872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251423,"user_name":"Geek_58a455","can_delete":false,"product_type":"c1","uid":1519269,"ip_address":"","ucode":"C20E856D38D338","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2qHhibwFEiaNWNjCqTpe8kCHqWian0rBdkulmkvVXpkr4CSOpuibVHNVozHUERAmvMDMticfycjzgwYDv6Gfav1dZ3A/132","comment_is_top":false,"comment_ctime":1601542287,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601542287","product_id":100029201,"comment_content":"æ€»ç»“ä¸€ä¸‹ï¼š<br>æ¶ˆæ¯å¤„ç†é€»è¾‘ï¼šå…ˆæ˜¯ä¸šåŠ¡å¤„ç†ï¼Œç„¶åæäº¤ä½ç§»ï¼›è¿™ä¸ªå¤§ä½“æ€è·¯æ˜¯æ²¡å¾—é—®é¢˜çš„ï¼Œæ‰€ä»¥åœ¨å¤„ç†å’Œæäº¤ä½ç§»ä¹‹å‰å‡ºé—®é¢˜äº†ï¼Œé‚£ä¹ˆä¸‹æ¬¡å‡ºç°é‡å¤æ¶ˆè´¹è‚¯å®šæ˜¯ä¸šåŠ¡çš„é—®é¢˜å–½ï¼Œæ‰€ä»¥æœ€å¥½çš„åŠæ³•æ˜¯åœ¨ä¸šåŠ¡å¤„ç†ä¸Šï¼Œæ¶ˆè´¹ä¸€æ¡ï¼Œç¡®è®¤ä¸€æ¡ï¼Œæœ€å¤§é™åº¦é˜²æ­¢å…¨éƒ¨æ¶ˆè´¹ï¼Œç„¶åå†ç¡®è®¤ï¼Œå†æäº¤ä½ç§»çš„æƒ…å†µå‡ºç°ï¼Œå—¯ï¼Œå¥½åƒæ²¡æœ‰100%é˜²æ­¢ä¸¢å¤±çš„åŠæ³•ï¼Œåªèƒ½å°½é‡å§ã€‚å¦‚æœåœ¨ç¡®è®¤ä¸€æ¡çš„è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜äº†ï¼Œä¹Ÿæœ‰é—®é¢˜ï¼Œä¸»è¦è¿˜æ˜¯æ²¡æœ‰åŠæ³•ä¿è¯processä¸šåŠ¡å’Œç¡®è®¤æ˜¯äº‹åŠ¡çš„è¿‡ç¨‹ï¼Œå¦‚æœèƒ½å¤Ÿä¿è¯äº‹åŠ¡æ€§å°±å¥½äº†","like_count":0},{"had_liked":false,"id":251225,"user_name":"timmy21","can_delete":false,"product_type":"c1","uid":1174860,"ip_address":"","ucode":"9D6DED247B1F38","user_header":"https://static001.geekbang.org/account/avatar/00/11/ed/4c/8674b6ad.jpg","comment_is_top":false,"comment_ctime":1601429485,"is_pvip":false,"replies":[{"id":"92156","content":"ä¸æ˜¯ã€‚pollå†…éƒ¨ç»´æŒäº†ä¸€ä¸ªä½ç§»ï¼Œåªä¸è¿‡è¿™ä¸ªä½ç§»å¯¹ç”¨æˆ·ä¸å¯è§","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1602208265,"ip_address":"","comment_id":251225,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1601429485","product_id":100029201,"comment_content":"è€å¸ˆæ¯æ¬¡ä»kafka pollæ¶ˆæ¯éƒ½æ˜¯ä»å·²æäº¤çš„ä½ç§»å¤„è¯»å–ï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œæ¯ä¸€æ¬¡pollå¤„ç†å®Œå¿…é¡»æäº¤ä½ç§»ï¼Œä¸ç„¶ä¸‹æ¬¡pollå°±ä¼šé‡å¤æ¶ˆè´¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506420,"discussion_content":"ä¸æ˜¯ã€‚pollå†…éƒ¨ç»´æŒäº†ä¸€ä¸ªä½ç§»ï¼Œåªä¸è¿‡è¿™ä¸ªä½ç§»å¯¹ç”¨æˆ·ä¸å¯è§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602208265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329439,"discussion_content":"ä¸€ä¼šè¯´ä¸‹æ¬¡pollçš„æ—¶å€™ æäº¤ä¸Šæ¬¡çš„æ¶ˆæ¯çš„offsetï¼Œä¸€ä¼šåˆè¯´è°ƒç”¨pollçš„è¿‡ç¨‹ä¸­ï¼Œç°åœ¨åˆè¯´åœ¨pollè‡ªå·±ç»´æŠ¤ï¼Œä¹±äº†ä¹±äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606384680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247009,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1599556843,"is_pvip":false,"replies":[{"id":"90936","content":"æ˜¯è¿™æ ·çš„ã€‚è€Œä¸”producerä¼šå¤ç”¨ä¹‹å‰batch sizeå¤§å°çš„bytebufferã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1599791056,"ip_address":"","comment_id":247009,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1599556843","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆæ‚¨å¥½ï¼Œä½ çš„æºç é˜…è¯»è¯¾æˆ‘ä¹Ÿæ˜¯ä¸€å¼€å§‹å°±è®¢é˜…äº†çš„ã€‚åªæ˜¯è¿˜æ²¡å¼€å¯é˜…è¯»ä¹‹æ—…ã€‚<br>è¿™ä¸¤å¤©çœ‹produceræœ‰ä¸ªç–‘é—®å“ˆï¼Œaccumulatorä¸­çš„bufferpool é»˜è®¤æ˜¯32MBã€‚ä½†æ˜¯æˆ‘çœ‹å®ƒä¸æ˜¯ç«‹å³åˆ†é…å†…å­˜ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯è¿ç»­çš„å­ï¼Ÿ<br>å› ä¸ºå®ƒä¹Ÿåªæ˜¯æ¥ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰ä¼šå»åˆ†é…byteBufferå˜›ï¼Œ<br>æ‰€ä»¥produceråœ¨bufferpoolè¿™é‡Œçš„è®¾è®¡æ˜¯é€šè¿‡é€»è¾‘ä¸Šçš„æ‰‹æ®µç®¡ç†å†…å­˜å“ˆï¼Œå¹¶æ²¡æœ‰ç®¡ç†ä¸€ä¸ªè¿ç»­çš„32MBå¤§å°çš„å†…å­˜å—å“ˆï¼Ÿ<br>æˆ‘å°±æ˜¯æƒ³æ‰¾æ‚¨æ±‚è¯ä¸€ä¸‹ï¼Œè°¢è°¢èƒ¡è€å¸ˆï½","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505286,"discussion_content":"æ˜¯è¿™æ ·çš„ã€‚è€Œä¸”producerä¼šå¤ç”¨ä¹‹å‰batch sizeå¤§å°çš„bytebufferã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599791056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1074310,"avatar":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","nickname":"å¤šè¥„ä¸¸","note":"","ucode":"1AA1497C5A293C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305135,"discussion_content":"è°¢è°¢èƒ¡è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599792507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244808,"user_name":"genshen","can_delete":false,"product_type":"c1","uid":1100042,"ip_address":"","ucode":"155B3484DBAD26","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/0a/5bb778eb.jpg","comment_is_top":false,"comment_ctime":1598687499,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598687499","product_id":100029201,"comment_content":"è®²çš„é€šä¿—æ˜“æ‡‚ï¼Œæ„Ÿè°¢è€å¸ˆ","like_count":0},{"had_liked":false,"id":243502,"user_name":"å•æœ‹è£","can_delete":false,"product_type":"c1","uid":1272662,"ip_address":"","ucode":"8AD121BEDD9675","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/56/37a4cea7.jpg","comment_is_top":false,"comment_ctime":1598156532,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598156532","product_id":100029201,"comment_content":"åŒæ­¥&#47;å¼‚æ­¥ç»“åˆä½¿ç”¨ï¼Œé™¤äº†åœ¨æœ€åä¸€æ¬¡èƒ½è§„é¿å¼‚æ­¥æäº¤ä½ç§»ä¸èƒ½é‡è¯•çš„é—®é¢˜ï¼Œä¸­é—´å‡ºé—®é¢˜äº†ï¼ˆç¨‹åºéæ­£å¸¸å…³é—­ï¼Œåº”è¯¥è§£å†³ä¸äº†ã€‚<br>è¿™è®©æˆ‘æƒ³åˆ°äº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œrebalanceæ—¶ï¼Œæ¶ˆè´¹åå†æäº¤ä½ç§»ï¼Œå› å—rebalanceçš„å½±å“ï¼Œâ€œå¼‚æ­¥â€æäº¤çš„é—®é¢˜ä¼šä¸ä¼šè¶…è¿‡å…³é—­å‰çš„â€œåŒæ­¥â€æœ€åä¸€æ¬¡ä½ç§»ï¼Œä¼šä¸ä¼šå‡ºç°æ¶ˆæ¯ä¸¢å¤±çš„é—®é¢˜å•Šï¼Ÿ<br>æ•´ä½“æ¥çœ‹ï¼Œè¿˜æ˜¯ç”¨æ•ˆç‡æ¢å‡†ç¡®ç‡çš„åšæ³•ï¼Œåªèƒ½ç”¨æœ€åä¸€æ¬¡çš„â€œåŒæ­¥â€ä½ç§»æäº¤ï¼Œæ¥ä¸€å®šç¨‹åº¦ä¸Šè§„é¿â€œå¼‚æ­¥â€å­˜åœ¨çš„é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":242509,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1597744659,"is_pvip":false,"replies":[{"id":"89549","content":"å¯¹äºæ–°çš„groupè€Œè¨€ï¼Œè¿™æ˜¯æ­£å¸¸çš„ç°è±¡ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•æäº¤ä½ç§»ï¼Œæ‰€ä»¥ä¼šâ€œfound no committed&quot;ï¼Œä»è€Œâ€resetting offset....&quot; ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1597885796,"ip_address":"","comment_id":242509,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597744659","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œæ¶ˆè´¹é‡å¯åä¼šä»åˆ†åŒºä¸Šæ¬¡æäº¤ä½ç§»çš„åœ°æ–¹å¼€å§‹æ¶ˆè´¹ï¼Œé‚£ä¹ˆæŠ¥:Found no committed offset for partition xx_topic-0,è¿™æ ·çš„æ—¥å¿—æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Ÿ<br>å®é™…ä¸­é‡åˆ°è¿‡è¿™ç§é—®é¢˜å°±æ˜¯ï¼šåªæœ‰æŒ‡å®šçš„groupIdå¯ä»¥æ­£å¸¸æ¶ˆè´¹ï¼Œå…¶ä»–çš„ä»»æ„groupidå…¨éƒ¨æŠ¥è¿™ä¸ªæ—¥å¿—ã€‚ç„¶åè¿˜æœ‰Resetting offset for partition xx_topic-0 to offset 2365(2365æ˜¯æˆ‘çš„åˆ†åŒºæœ€æ–°ä½ç§»)ï¼Œä½†å®é™…ä¸Šæˆ‘çš„groupidä»æœªæ¶ˆè´¹è¿‡è¿™ä¸ªä¸»é¢˜ã€‚è€å¸ˆæœ‰é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜å— å¯èƒ½çš„åŸå› æ˜¯å•¥å‘¢ï¼Ÿè¯·è€å¸ˆæŒ‡ç‚¹è¿·æ´¥","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504024,"discussion_content":"å¯¹äºæ–°çš„groupè€Œè¨€ï¼Œè¿™æ˜¯æ­£å¸¸çš„ç°è±¡ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•æäº¤ä½ç§»ï¼Œæ‰€ä»¥ä¼šâ€œfound no committed&amp;quot;ï¼Œä»è€Œâ€resetting offset....&amp;quot; ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597885796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238876,"user_name":"å¤œé‡Œåƒè¥¿ç“œ","can_delete":false,"product_type":"c1","uid":1066678,"ip_address":"","ucode":"362817AF375E38","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/b6/edfe7ce8.jpg","comment_is_top":false,"comment_ctime":1596353867,"is_pvip":false,"replies":[{"id":"88292","content":"è‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤éƒ½æ˜¯å¤–å›´çš„äº‹æƒ…ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å†™ä½ç§»ä¸»é¢˜æ¶ˆæ¯","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1596425904,"ip_address":"","comment_id":238876,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596353867","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ã€‚è¿™ç¯‡è¯´çš„ä½ç§»æäº¤ä¹Ÿæ˜¯æäº¤åˆ°æ‰€è°“çš„ä½ç§»ä¸»é¢˜ä¸­å—ï¼ˆ__consumer_offsetsï¼‰ã€‚è¿™ç¯‡æ–‡ç« ä¸­è¯´çš„è‡ªåŠ¨æäº¤ä¸æ‰‹åŠ¨æäº¤çš„é…ç½®éƒ½ä¸16ç« èŠ‚è¯´çš„ä¸€è‡´ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå†…å®¹è¿˜æ˜¯æœ‰ç‚¹æ¨¡ç³Š","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502878,"discussion_content":"è‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤éƒ½æ˜¯å¤–å›´çš„äº‹æƒ…ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å†™ä½ç§»ä¸»é¢˜æ¶ˆæ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596425904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236798,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1595552614,"is_pvip":false,"replies":[{"id":"87678","content":"ä¸ä¼šã€‚ä¸åŒæ¶ˆè´¹è€…ç»„ä¹‹é—´æ¯«ä¸å½±å“ï¼Œæ²¡æœ‰å…³è”","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1595811077,"ip_address":"","comment_id":236798,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595552614","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå¦‚æœè¯´â€œKafka åªä¼šâ€œæ— è„‘â€åœ°æ¥å—ä½ æäº¤çš„ä½ç§»â€ï¼Œé‚£ä¹ˆå½“å¯åŠ¨ä¸¤ä¸ªgroupidä¸åŒï¼Œtopicç›¸åŒçš„consumerï¼Œä¼šä¸ä¼šå‡ºç°åŒæ ·åˆ†åŒºXçš„æ¶ˆæ¯è¢«groupidAçš„æ¶ˆè´¹è€…æ¶ˆè´¹ä¸”æäº¤äº†ä½ç§»ï¼Œå¯¼è‡´groupidBçš„æ¶ˆè´¹è€…æ¶ˆè´¹ä¸åˆ°ï¼Ÿé‚£å¯¹äºgroupidBè¿™ä¸ªæ¶ˆè´¹è€…æ¥è¯´ï¼Œ åˆ†åŒºXä¸­çš„æ•°æ®å°±æ˜¯ä¸¢å¤±äº†å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502213,"discussion_content":"ä¸ä¼šã€‚ä¸åŒæ¶ˆè´¹è€…ç»„ä¹‹é—´æ¯«ä¸å½±å“ï¼Œæ²¡æœ‰å…³è”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595811077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226739,"user_name":"è§å—å±±","can_delete":false,"product_type":"c1","uid":1118111,"ip_address":"","ucode":"6A8BB82B7573CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","comment_is_top":false,"comment_ctime":1592192578,"is_pvip":false,"replies":[{"id":"83669","content":"æ²¡é”™ï¼Œä¸šåŠ¡å»é‡æ˜¯ä¸€ç§æ–¹å¼","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1592297166,"ip_address":"","comment_id":226739,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592192578","product_id":100029201,"comment_content":"å°†æ¶ˆæ¯å¤„ç†å’Œä½ç§»æäº¤æ”¾åˆ°ä¸€ä¸ªäº‹åŠ¡é€»è¾‘ä¸­ï¼Œä¸€èµ·å¤±è´¥æˆ–æˆåŠŸã€‚<br>ä½†æ˜¯ï¼Œåœ¨å®é™…å¤„ç†ä¸­ï¼Œå¯ä»¥ç›´æ¥åœ¨ä¸šåŠ¡ç«¯å»é‡ï¼Œæ¯”å¦‚æŸä¸ªå­—æ®µä½œä¸ºæ¶ˆæ¯çš„å”¯ä¸€å€¼ï¼Œå¦‚æœé‡å¤åˆ™å°†æ¶ˆæ¯ç›´æ¥ä¸¢å¼ƒå³å¯","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498348,"discussion_content":"æ²¡é”™ï¼Œä¸šåŠ¡å»é‡æ˜¯ä¸€ç§æ–¹å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592297166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226311,"user_name":"å°å°","can_delete":false,"product_type":"c1","uid":1031756,"ip_address":"","ucode":"AF1F011FDDE29B","user_header":"","comment_is_top":false,"comment_ctime":1592033187,"is_pvip":false,"replies":[{"id":"83440","content":"ç¬¬ä¸€ä¸ªé—®é¢˜è®¨è®ºçš„æ˜¯æ­£å¸¸æƒ…å†µä¸‹consumerå¦‚ä½•é¿å…é‡å¤æ¶ˆè´¹çš„äº‹æƒ…ï¼›ç¬¬äºŒä¸ªé—®é¢˜è¯´çš„æ˜¯å½“å‡ºç°é—®é¢˜æ—¶consumeræ— æ³•é¿å…é‡å¤æ¶ˆè´¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1592183597,"ip_address":"","comment_id":226311,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1592033187","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æ˜¯æœ€è¿‘æ‰å¼€å§‹çœ‹è¿™ä¸ªè¯¾çš„ï¼Œä¸çŸ¥é“æ‚¨ä¼šä¸ä¼šçœ‹åˆ°ç•™è¨€ï¼Œè¿›è¡Œå›å¤ã€‚<br><br>1ã€é’ˆå¯¹banåŒå­¦çš„é—®é¢˜â€œè€å¸ˆï¼Œä½ å¥½ã€‚æœ‰ä¸ªåœºæ™¯ä¸å¤ªæ˜ç™½ã€‚æˆ‘åšä¸ªå‡è®¾ï¼Œæ¯”å¦‚è¯´æˆ‘çš„æ¨¡å¼æ˜¯è‡ªåŠ¨æäº¤ï¼Œè‡ªåŠ¨æäº¤é—´éš”æ˜¯20ç§’ä¸€æ¬¡ï¼Œé‚£æˆ‘æ¶ˆè´¹äº†10ä¸ªæ¶ˆæ¯ï¼Œå¾ˆå¿«ä¸€ç§’å†…å°±ç»“æŸã€‚ä½†æ˜¯è¿™æ—¶å€™æˆ‘è‡ªåŠ¨æäº¤æ—¶é—´è¿˜æ²¡åˆ°ï¼ˆé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€ä¸ä¼šæäº¤offerï¼‰ï¼Œç„¶åè¿™æ—¶å€™æˆ‘åˆå»pollè·å–æ¶ˆæ¯ï¼Œä¼šä¸ä¼šå¯¼è‡´ä¸€ç›´è·å–ä¸Šä¸€æ‰¹çš„æ¶ˆæ¯ï¼Ÿ<br>è¿˜æ˜¯è¯´å¦‚æœconsumeræ¶ˆè´¹å®Œäº†ï¼Œè‡ªåŠ¨æäº¤æ—¶é—´è¿˜æ²¡åˆ°ï¼Œå¦‚æœä½ å»pollï¼Œè¿™æ—¶å€™ä¼šè‡ªåŠ¨æäº¤ï¼Œå°±ä¸ä¼šå‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å†µã€‚â€<br><br>æ‚¨çš„å›å¤æ˜¯ â€œä¸ä¼šçš„ã€‚consumerå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæŒ‡é’ˆï¼Œèƒ½å¤Ÿæ¢æµ‹åˆ°ä¸‹ä¸€æ¡è¦æ¶ˆè´¹çš„æ•°æ®â€<br><br><br>2ã€é’ˆå¯¹jc9090kkkåŒå­¦çš„æé—®â€œæ„Ÿè§‰è€å¸ˆåˆ†äº«ï¼Œå¯¹äºæ–‡ç« ä¸­çš„é‚£ä¸ªè‡ªåŠ¨æäº¤çš„ä¾‹å­æœ‰ç‚¹ç–‘æƒ‘ï¼Œå¸Œæœ›è€å¸ˆèƒ½è§£ç­”ä¸€ä¸‹ï¼š<br>auto.commit.interval.msè®¾ç½®ä¸º5sï¼Œä¹Ÿå°±æ˜¯è¯´consumeræ¯5ç§’æ‰æäº¤ä¸€æ¬¡ä½ç§»ä¿¡æ¯ï¼Œé‚£consumerå¦‚æœæ¯æ¶ˆè´¹ä¸€æ¡æ•°æ®ï¼Œä½†æ˜¯æ²¡æœ‰è¾¾åˆ°è‡ªåŠ¨æäº¤çš„æ—¶é—´ï¼Œè¿™ä¸ªä½ç§»ä¿¡æ¯è¯¥å¦‚ä½•ç®¡ç†ï¼Ÿconsumerè‡ªå·±åšç»´æŠ¤å—ï¼Ÿä½†æ˜¯ä¹Ÿéœ€è¦è·Ÿbrokerç«¯è¿›è¡Œä½ç§»ä¿¡æ¯åŒæ­¥çš„å§ï¼Ÿ ä¸ç„¶å¯èƒ½ä¼šé€ æˆæ•°æ®çš„é‡å¤æ¶ˆè´¹ï¼Ÿè¿˜æ˜¯æ¯5sçš„æäº¤å’Œconsumerè‡ªåŠ¨æäº¤çš„æ—¶å€™éƒ½ä¼šä¼´éšä½ç§»ä¿¡æ¯çš„åŒæ­¥ï¼Ÿæ˜¯æˆ‘çš„ç†è§£æœ‰é—®é¢˜å—ï¼Ÿâ€<br><br>æ‚¨çš„å›å¤æ˜¯â€œå¦‚æœæ²¡æœ‰è¾¾åˆ°æäº¤æ—¶é—´å°±ä¸ä¼šæäº¤ï¼Œè‡ªåŠ¨æäº¤å®Œå…¨ç”±consumerè‡ªè¡Œç»´æŠ¤ï¼Œç¡®å®å¯èƒ½é€ æˆæ•°æ®çš„é‡å¤æ¶ˆè´¹ã€‚ä½ çš„ç†è§£å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼šï¼‰â€<br><br>æˆ‘çš„ç–‘é—®æ˜¯ï¼š<br>è¿™ä¸ªä¸¤ä¸ªç­”æ¡ˆæ˜¯ä¸æ˜¯çŸ›ç›¾å‘¢ï¼Œè¿˜æ˜¯æˆ‘æœ‰å“ªé‡Œæ²¡æœ‰ç†è§£æ­£ç¡®å‘¢ï¼Œå¸Œæœ›è€å¸ˆçœ‹åˆ°äº†çš„è¯ï¼Œè§£ç­”ä¸€ä¸‹ï¼Œæˆ‘çœ‹è¯„è®ºé‡Œé¢ï¼Œå¥½å¤šäººéƒ½å¯¹è¿™ä¸ªé—®é¢˜æœ‰ç–‘é—®ï¼Œè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498184,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜è®¨è®ºçš„æ˜¯æ­£å¸¸æƒ…å†µä¸‹consumerå¦‚ä½•é¿å…é‡å¤æ¶ˆè´¹çš„äº‹æƒ…ï¼›ç¬¬äºŒä¸ªé—®é¢˜è¯´çš„æ˜¯å½“å‡ºç°é—®é¢˜æ—¶consumeræ— æ³•é¿å…é‡å¤æ¶ˆè´¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592183597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1031756,"avatar":"","nickname":"å°å°","note":"","ucode":"AF1F011FDDE29B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283138,"discussion_content":"è°¢è°¢ è€å¸ˆçš„è§£ç­”ã€‚åé¢åˆæ¥äº†å‡ éã€‚ç†è§£äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592193817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224148,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1591285600,"is_pvip":false,"replies":[{"id":"82548","content":"æˆ‘ä»¬ç¼–å†™ä»£ç å¯ä»¥ä¿è¯çº¿ç¨‹å¤„ç†å®Œæˆä¹‹åå†è¿›è¡Œæäº¤ã€‚å¤šçº¿ç¨‹çš„ä¸»è¦é—®é¢˜æ˜¯æäº¤çš„é¡ºåºé—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1591323732,"ip_address":"","comment_id":224148,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591285600","product_id":100029201,"comment_content":"è¯·é—®ä¸‹,æ–‡ç« çš„ä½ç§»æäº¤ä»£ç å‡è®¾æ˜¯å¤šçº¿ç¨‹æ‰§è¡Œ,é‚£ä¹ˆå¼‚æ­¥æäº¤ä¼šä¸ä¼šå‡ºç°é—®é¢˜..å®é™…ä¸Šå¤šçº¿ç¨‹çš„æ¶ˆæ¯è¿˜æ²¡æ¶ˆè´¹å®Œæˆ,å°±æäº¤ä½ç§»çš„æƒ…å†µä¸‹..","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497376,"discussion_content":"æˆ‘ä»¬ç¼–å†™ä»£ç å¯ä»¥ä¿è¯çº¿ç¨‹å¤„ç†å®Œæˆä¹‹åå†è¿›è¡Œæäº¤ã€‚å¤šçº¿ç¨‹çš„ä¸»è¦é—®é¢˜æ˜¯æäº¤çš„é¡ºåºé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591323732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222204,"user_name":"lizhibo","can_delete":false,"product_type":"c1","uid":1636410,"ip_address":"","ucode":"FDF4FA12C699B3","user_header":"https://static001.geekbang.org/account/avatar/00/18/f8/3a/e0c14cb3.jpg","comment_is_top":false,"comment_ctime":1590716223,"is_pvip":false,"replies":[{"id":"81992","content":"å¦‚æœæ¶ˆè´¹è€…å¼‚å¸¸ï¼Œç¨‹åºä¼šæ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œç­‰ä½ å¤„ç†å®Œäº†å†ç»§ç»­æ¶ˆè´¹ã€‚å¦‚æœäº‹ä»¶è¯»å–ä¸å¤„ç†åœ¨ä¸åŒçº¿ç¨‹ï¼Œé‚£ä¹ˆä½¿ç”¨seekæ–¹æ³•é‡è®¾ä½ç§»å€¼é‡æ–°æ¶ˆè´¹+å¤„ç†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1590750324,"ip_address":"","comment_id":222204,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590716223","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘æƒ³å’¨è¯¢ä¸‹å¦‚æœæ¶ˆè´¹è€…å¼‚å¸¸ï¼Œæˆ‘æ€ä¹ˆæäº¤ä½ç§»å¯ä»¥è¿›è¡Œè‡ªåŠ¨é‡è¯•","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496713,"discussion_content":"å¦‚æœæ¶ˆè´¹è€…å¼‚å¸¸ï¼Œç¨‹åºä¼šæ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œç­‰ä½ å¤„ç†å®Œäº†å†ç»§ç»­æ¶ˆè´¹ã€‚å¦‚æœäº‹ä»¶è¯»å–ä¸å¤„ç†åœ¨ä¸åŒçº¿ç¨‹ï¼Œé‚£ä¹ˆä½¿ç”¨seekæ–¹æ³•é‡è®¾ä½ç§»å€¼é‡æ–°æ¶ˆè´¹+å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590750324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200407,"user_name":"Sruby","can_delete":false,"product_type":"c1","uid":1016232,"ip_address":"","ucode":"A7D1B93F41DA0F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/81/a8/559afe8b.jpg","comment_is_top":false,"comment_ctime":1585580643,"is_pvip":false,"replies":[{"id":"75001","content":"ä¸šåŠ¡ç«¯å»é‡çš„ç¡®æ˜¯æ¶ˆæ¯å»é‡çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1585618008,"ip_address":"","comment_id":200407,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1585580643","product_id":100029201,"comment_content":"åœ¨æ¶ˆæ¯ä¸­å¢åŠ å”¯ä¸€æ ‡è¯†åšæ¶ˆæ¯çš„å»é‡ï¼Œå®ç°æ¶ˆæ¯å»é‡åå†å¼€å¯è‡ªåŠ¨æäº¤ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å¯ä»¥ç®€åŒ–æ¶ˆæ¯å¤„ç†çš„é€»è¾‘ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490017,"discussion_content":"ä¸šåŠ¡ç«¯å»é‡çš„ç¡®æ˜¯æ¶ˆæ¯å»é‡çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585618008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171521,"user_name":"Sancho","can_delete":false,"product_type":"c1","uid":1436391,"ip_address":"","ucode":"78849913082622","user_header":"https://static001.geekbang.org/account/avatar/00/15/ea/e7/9ce305ec.jpg","comment_is_top":false,"comment_ctime":1578961013,"is_pvip":false,"replies":[{"id":"66481","content":"5000æ¡æ¶ˆæ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1578968220,"ip_address":"","comment_id":171521,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578961013","product_id":100029201,"comment_content":"æ–‡ä¸­çš„åœºæ™¯ï¼špollæ–¹æ³•è¿”å›5000æ¡æ¶ˆæ¯ï¼ŒæŒ‡çš„æ˜¯5000æ¡æ¶ˆæ¯é›†åˆï¼Œè¿˜æ˜¯å•æ¡æ¶ˆæ¯ï¼Ÿå¦‚æœæ˜¯å•æ¡æ¶ˆæ¯çš„è¯ï¼Œå¤„ç†å®Œ100æ¡å•æ¡æ¶ˆæ¯å°±æäº¤ä½ç§»ï¼Œä¼šå¯¼è‡´Brokerè§£å¼€æ¶ˆæ¯é›†åˆå—ï¼Ÿ<br>æˆ‘çš„çŒœæµ‹ï¼šä¸ä¼šè§£å¼€æ¶ˆæ¯é›†åˆï¼Œå¦‚æœ5000æ¡æ¶ˆæ¯åœ¨ä¸€ä¸ªæ¶ˆæ¯é›†åˆé‡Œï¼Œå°±ç®—æ²¡æœ‰è¢«å®Œå…¨æäº¤ä½ç§»ï¼Œä¸‹æ¬¡é‡æ–°pollæ—¶ï¼Œè¿˜æ˜¯ä¼šè¿”å›5000æ¡å®Œæ•´çš„æ¶ˆæ¯é›†åˆï¼Œåªä¸è¿‡æ­¤æ—¶æ¶ˆè´¹ä½ç§»ä¸æ˜¯ä»è¿™5000æ¡çš„å¼€å§‹ä½ç§»ï¼ŒConsumerè‡ªç„¶ä¼šè·³è¿‡è¿™éƒ¨åˆ†å·²ç»æäº¤è¿‡çš„ä½ç§»æ•°æ®ï¼Œä»ä¸­é—´æŸä¸ªä½ç§»å¼€å§‹æ¶ˆè´¹æ¶ˆæ¯ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481394,"discussion_content":"5000æ¡æ¶ˆæ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578968220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168263,"user_name":"banderSnatchğŸ±","can_delete":false,"product_type":"c1","uid":1712090,"ip_address":"","ucode":"66C08C96E0D51A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1f/da/698cd223.jpg","comment_is_top":false,"comment_ctime":1578039777,"is_pvip":false,"replies":[{"id":"65582","content":"æŠ±æ­‰ï¼Œä¸å¤ªæ¸…æ¥šspring-kafkaçš„å®ç°ç»†èŠ‚ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1578280037,"ip_address":"","comment_id":168263,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578039777","product_id":100029201,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼Œspring-kafkaæ¡†æ¶æœ‰æ§åˆ¶æ‰‹åŠ¨å¼‚æ­¥æäº¤ä½ç§»çš„æ–¹æ³•å—ï¼Ÿç½‘ä¸ŠæŸ¥äº†ä¸€äº›èµ„æ–™éƒ½æ²¡æ‰¾åˆ°ã€‚åªæœ‰ä¸€ä¸ªAcknowledgementå¯¹è±¡çš„acknowledge()æ–¹æ³•æ‰‹åŠ¨æäº¤ã€‚ä½†æ˜¯è¯•äº†ä¸€ä¸‹å‘ç°é€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480175,"discussion_content":"æŠ±æ­‰ï¼Œä¸å¤ªæ¸…æ¥šspring-kafkaçš„å®ç°ç»†èŠ‚ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578280037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166268,"user_name":"w h l","can_delete":false,"product_type":"c1","uid":1170172,"ip_address":"","ucode":"89D52C49E80366","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/fc/49a90c01.jpg","comment_is_top":false,"comment_ctime":1577428654,"is_pvip":false,"replies":[{"id":"63377","content":"ä¸ç¡®å®šç™¾åˆ†ä¹‹ç™¾åœ°ç†è§£äº†æ‚¨çš„é—®é¢˜ã€‚é€šå¸¸æ¥è¯´ï¼Œå½“è°ƒç”¨KafkaConsumer.closeæ–¹æ³•æ—¶consumerä¼šå…³é—­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1577435278,"ip_address":"","comment_id":166268,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577428654","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œè¯·é—®ä¸€ä¸‹consumeå…³é—­çš„æ—¶æœºæ˜¯ä»€ä¹ˆæ—¶å€™å‘¢ï¼Œè¿™é‡Œå¯ä»¥è§£é‡Šä¸‹å—","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479467,"discussion_content":"ä¸ç¡®å®šç™¾åˆ†ä¹‹ç™¾åœ°ç†è§£äº†æ‚¨çš„é—®é¢˜ã€‚é€šå¸¸æ¥è¯´ï¼Œå½“è°ƒç”¨KafkaConsumer.closeæ–¹æ³•æ—¶consumerä¼šå…³é—­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577435278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153581,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1574262441,"is_pvip":false,"replies":[{"id":"59024","content":"å¶å‘çš„æäº¤å¤±è´¥ä¹Ÿä¸ä¸€å®šå°±æ„å‘³ç€é‡å¤æ¶ˆè´¹ï¼Œçœ‹consumerç¨‹åºçš„è¿è¡Œæƒ…å†µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1574295841,"ip_address":"","comment_id":153581,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1574262441","product_id":100029201,"comment_content":"ä½ å¥½ï¼Œè¯·é—®ä¸‹åˆ†åŒºè‡ªåŠ¨æäº¤å¤±è´¥ï¼Œè¯·æ±‚è¶…æ—¶ã€‚ä¼šå¯¼è‡´ä»€ä¹ˆåæœå‘¢<br>é‡å¤æ¶ˆè´¹å—ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475218,"discussion_content":"å¶å‘çš„æäº¤å¤±è´¥ä¹Ÿä¸ä¸€å®šå°±æ„å‘³ç€é‡å¤æ¶ˆè´¹ï¼Œçœ‹consumerç¨‹åºçš„è¿è¡Œæƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574295841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":54332,"discussion_content":"ç„¶åå¤šæ¬¡è¿™æ ·ï¼Œè¿‡æ®µæ—¶é—´ç›´æ¥å†…å­˜æº¢å‡ºã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574296114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152609,"user_name":"xiaoniu","can_delete":false,"product_type":"c1","uid":1166713,"ip_address":"","ucode":"837893E7D9691E","user_header":"https://static001.geekbang.org/account/avatar/00/11/cd/79/00dc7885.jpg","comment_is_top":false,"comment_ctime":1574049404,"is_pvip":true,"replies":[{"id":"58750","content":"å¦‚æœä¸é‡å¯çš„è¯ï¼Œç¨‹åºé‡Œé¢æ˜¯å¦æ˜¾å¼è°ƒç”¨äº†seeké‡æ–°è°ƒæ•´äº†offsetå‘¢ï¼Ÿå¦‚æœæ²¡æœ‰å°±æ— æ³•é‡æ–°æ¶ˆè´¹é‚£äº›å·²ç»æ¶ˆè´¹çš„æ¶ˆæ¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1574130640,"ip_address":"","comment_id":152609,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574049404","product_id":100029201,"comment_content":"è€å¸ˆ ä½ å¥½ é—®ä¸ªé—®é¢˜ï¼ŒKafkaå¯¹æœªæäº¤çš„æ¶ˆæ¯ä¸€å®šè¦ç­‰åˆ°æ¶ˆè´¹å·¥ç¨‹é‡å¯æ‰é‡æ–°æ¶ˆè´¹å—ï¼Ÿæ¯”å¦‚ï¼šæˆ‘çš„æ¶ˆè´¹å·¥ç¨‹ æ”¯æŒå¹‚ç­‰æ€§ï¼Œå¯ä»¥é‡å¤æ¶ˆè´¹ï¼Œä½†æ˜¯ç”±äºæŸæ—¶åˆ»æ•°æ®åº“æŒ‚äº†ï¼Œå¯¼è‡´æ¶ˆæ¯æœªæäº¤ï¼Œä½†éš”äº†ä¸€æ®µæ—¶é—´æ•°æ®åº“åˆå¥½äº†ï¼Œä¹‹å‰æœªæäº¤çš„æ¶ˆæ¯å¯ä»¥åœ¨ä¸é‡å¯çš„æƒ…å†µä¸‹å†æ¬¡æ¶ˆè´¹ä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474873,"discussion_content":"å¦‚æœä¸é‡å¯çš„è¯ï¼Œç¨‹åºé‡Œé¢æ˜¯å¦æ˜¾å¼è°ƒç”¨äº†seeké‡æ–°è°ƒæ•´äº†offsetå‘¢ï¼Ÿå¦‚æœæ²¡æœ‰å°±æ— æ³•é‡æ–°æ¶ˆè´¹é‚£äº›å·²ç»æ¶ˆè´¹çš„æ¶ˆæ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574130640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131216,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1567672589,"is_pvip":true,"replies":[{"id":"49809","content":"æˆ‘è§‰å¾—è¯´çš„æŒºå¥½çš„ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1567731024,"ip_address":"","comment_id":131216,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567672589","product_id":100029201,"comment_content":"æ¯ä¸ªConsumeræ¶ˆè´¹å®Œæ•°æ®åéœ€è¦æš‚å­˜ä¸‹offsetï¼Œè€ƒè™‘åˆ°ä¸€ä¸ªåˆ†åŒºçš„æ•°æ®åªä¼šè¢«ä¸€ä¸ªå½“å‰ç»„ä¸‹çš„ä¸€ä¸ªConsumeræ¶ˆè´¹ï¼Œé‚£ä¹ˆæœ‰ä»¨ç§æƒ…å†µè¦å¤„ç†ï¼š<br>1ã€ç»§ç»­æ¶ˆè´¹æ—¶ï¼Œé‚£ä¹ˆå¯ä»¥åˆ¤æ–­åç»­pollåˆ°çš„offsetå’Œè‡ªå·±ä¿å­˜çš„å€¼çš„å¤§å°ï¼Œåªæ¶ˆè´¹ä¸å°äºçš„æ¶ˆæ¯<br>2ã€å¤„ç†æœ€åä¸€ä¸ªæ¶ˆæ¯æ—¶ï¼Œè¿™æ—¶å€™å¯ä»¥ä»¿ç…§TCPçš„æœ€åä¸€æ¬¡æŒ¥æ‰‹ä¸­çš„CLOSE_WAITçŠ¶æ€ï¼Œè®¾å®šä¸€ä¸ªè¶…æ—¶æ—¶é—´â€”â€”è¿™éœ€è¦ç»“åˆæ—¥å¸¸çš„ä¸šåŠ¡åœºæ™¯ï¼Œè‡³å°‘è¦å–æœ€å¤§ä¼ è¾“æ—¶å»¶çš„2å€ï¼Œå› ä¸ºå¤§å¤šæ•°æƒ…å†µä¸‹æ¶ˆæ¯æ˜¯ä¸æ–­åˆ°è¾¾çš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶é—´è®¾å®šç¨å¾®ä¹…è¿œä¸€ç‚¹ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚<br>3ã€å‰ä¸¤ç§éƒ½æ˜¯æˆåŠŸæ¶ˆè´¹çš„æƒ…å†µï¼Œå¦‚æœæ¶ˆè´¹å¤±è´¥å¯¼è‡´ä½ç§»æ›´æ–°å¤±è´¥ï¼Œé‚£ä¹ˆè¿™ä¸ªæœºåˆ¶å°±æ²¡æœ‰ä»»ä½•ç”Ÿæ•ˆçš„æ„ä¹‰äº†ï¼Œè¿™æ—¶å€™é‡å¤æ¶ˆè´¹å°±ä¸å¯é¿å…äº†ã€‚<br>è‡ªå·±çš„ä¸€äº›è§è§£ï¼Œæœ‰ä»€ä¹ˆä¸åˆé€‚çš„æƒ…å†µæœ›è€å¸ˆæŒ‡ç‚¹ä¸€äºŒ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466339,"discussion_content":"æˆ‘è§‰å¾—è¯´çš„æŒºå¥½çš„ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567731024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125062,"user_name":"å˜‰å˜‰â˜•","can_delete":false,"product_type":"c1","uid":1059771,"ip_address":"","ucode":"632A5CC4B53BB1","user_header":"https://static001.geekbang.org/account/avatar/00/10/2b/bb/5cf70df8.jpg","comment_is_top":false,"comment_ctime":1566053178,"is_pvip":false,"replies":[{"id":"46042","content":"â€œè¿˜æ²¡å¤„ç†å®Œå‘¢, å°±è°ƒç”¨äº†å®ƒçš„closeæ–¹æ³•â€ --- ä¸ä¼šå•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566181992,"ip_address":"","comment_id":125062,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566053178","product_id":100029201,"comment_content":"è€å¸ˆ, è¯·é—®ä¸€ä¸‹, <br>å¦‚æœconsumeræ‹‰è¿‡æ¥ä¸€æ‰¹æ¶ˆæ¯, è¿˜æ²¡å¤„ç†å®Œå‘¢, å°±è°ƒç”¨äº†å®ƒçš„closeæ–¹æ³•, consumerä¼šç»§ç»­æ¶ˆè´¹å®Œæˆå— ? è¿˜æ˜¯ä¼šåšå‡ºä¸€äº›å…¶ä»–çš„è¡Œä¸º ?<br>è°¢è°¢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463420,"discussion_content":"â€œè¿˜æ²¡å¤„ç†å®Œå‘¢, å°±è°ƒç”¨äº†å®ƒçš„closeæ–¹æ³•â€ --- ä¸ä¼šå•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566181992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124637,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1565933996,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565933996","product_id":100029201,"comment_content":"0ï¼šä½ç§»æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ<br>ä»Šå¤©æˆ‘ä»¬è¦èŠçš„ä½ç§»æ˜¯ Consumer çš„æ¶ˆè´¹ä½ç§»ï¼Œå®ƒè®°å½•äº† Consumer è¦æ¶ˆè´¹çš„ä¸‹ä¸€æ¡æ¶ˆæ¯çš„ä½ç§»ã€‚è¿™å¯èƒ½å’Œä½ ä»¥å‰äº†è§£çš„æœ‰äº›å‡ºå…¥ï¼Œä¸è¿‡åˆ‡è®°æ˜¯ä¸‹ä¸€æ¡æ¶ˆæ¯çš„ä½ç§»ï¼Œè€Œä¸æ˜¯ç›®å‰æœ€æ–°æ¶ˆè´¹æ¶ˆæ¯çš„ä½ç§»ã€‚<br>consumerä¾§çš„ä½ç§»ï¼Œè¡¨ç¤ºconsumeræ¶ˆè´¹æ¶ˆæ¯çš„è¿›åº¦å’Œå³å°†è¦æ¶ˆè´¹çš„æ¶ˆæ¯åœ¨åˆ†åŒºä¸­çš„å…·ä½“ä½ç½®ã€‚<br><br>1ï¼šæäº¤ä½ç§»æ˜¯æŒ‡ä»€ä¹ˆæ„æ€ï¼Ÿ<br>Consumer éœ€è¦å‘ Kafka æ±‡æŠ¥è‡ªå·±çš„ä½ç§»æ•°æ®ï¼Œè¿™ä¸ªæ±‡æŠ¥è¿‡ç¨‹è¢«ç§°ä¸ºæäº¤ä½ç§»ï¼ˆCommitting Offsetsï¼‰ã€‚å› ä¸º Consumer èƒ½å¤ŸåŒæ—¶æ¶ˆè´¹å¤šä¸ªåˆ†åŒºçš„æ•°æ®ï¼Œæ‰€ä»¥ä½ç§»çš„æäº¤å®é™…ä¸Šæ˜¯åœ¨åˆ†åŒºç²’åº¦ä¸Šè¿›è¡Œçš„ï¼Œå³Consumer éœ€è¦ä¸ºåˆ†é…ç»™å®ƒçš„æ¯ä¸ªåˆ†åŒºæäº¤å„è‡ªçš„ä½ç§»æ•°æ®<br><br>2ï¼šæäº¤ä½ç§»çš„ä½œç”¨æ˜¯å•¥ï¼Ÿ<br>æäº¤ä½ç§»ä¸»è¦æ˜¯ä¸ºäº†è¡¨å¾ Consumer çš„æ¶ˆè´¹è¿›åº¦ï¼Œè¿™æ ·å½“ Consumer å‘ç”Ÿæ•…éšœé‡å¯ä¹‹åï¼Œå°±èƒ½å¤Ÿä» Kafka ä¸­è¯»å–ä¹‹å‰æäº¤çš„ä½ç§»å€¼ï¼Œç„¶åä»ç›¸åº”çš„ä½ç§»å¤„ç»§ç»­æ¶ˆè´¹ï¼Œä»è€Œé¿å…æ•´ä¸ªæ¶ˆè´¹è¿‡ç¨‹é‡æ¥ä¸€éã€‚æ¢å¥è¯è¯´ï¼Œä½ç§»æäº¤æ˜¯ Kafka æä¾›ç»™ä½ çš„ä¸€ä¸ªå·¥å…·æˆ–è¯­ä¹‰ä¿éšœï¼Œä½ è´Ÿè´£ç»´æŒè¿™ä¸ªè¯­ä¹‰ä¿éšœï¼Œå³å¦‚æœä½ æäº¤äº†ä½ç§» Xï¼Œé‚£ä¹ˆ Kafka ä¼šè®¤ä¸ºæ‰€æœ‰ä½ç§»å€¼å°äº X çš„æ¶ˆæ¯ä½ éƒ½å·²ç»æˆåŠŸæ¶ˆè´¹äº†ã€‚<br><br>2ï¼šæäº¤ä½ç§»çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ<br>ä»ç”¨æˆ·çš„è§’åº¦æ¥è¯´ï¼Œä½ç§»æäº¤åˆ†ä¸ºè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ï¼›ä» Consumer ç«¯çš„è§’åº¦æ¥è¯´ï¼Œä½ç§»æäº¤åˆ†ä¸ºåŒæ­¥æäº¤å’Œå¼‚æ­¥æäº¤ã€‚<br>è‡ªåŠ¨æäº¤ä½ç§»ï¼Œå«©ä¸ªä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨æ¶ˆæ¯çš„é‡å¤æ¶ˆè´¹ã€‚<br>æ‰‹åŠ¨æäº¤ä½ç§»ï¼Œkafkaæä¾›äº†åŒæ­¥å’Œå¼‚æ­¥çš„APIï¼Œè€å¸ˆä¹Ÿæä¾›äº†æ‰‹åŠ¨æäº¤çš„ä»£ç èŒƒä¾‹ã€‚<br>è€å¸ˆæ¨èæ‰‹åŠ¨æäº¤ï¼Œçµæ´»ï¼Œå¯æ§ï¼ŒåŒæ­¥å¼‚æ­¥ç»“åˆä½¿ç”¨ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ä½ç§»æäº¤å¦‚æœé”™è¯¯ä¼šå‡ºç°æ¶ˆæ¯ä¸¢å¤±æˆ–é‡å¤æ¶ˆè´¹çš„æƒ…å†µã€‚æ‰‹åŠ¨æäº¤æ—¶ï¼Œä½ç§»æäº¤çš„è¯­ä¹‰ä¿éšœæ˜¯ç”±æˆ‘ä»¬è‡ªå·±æ¥è´Ÿè´£çš„ï¼ŒKafka åªä¼šâ€œæ— è„‘â€åœ°æ¥å—æˆ‘ä»¬æäº¤çš„ä½ç§»ã€‚æˆ‘ä»¬å¯¹ä½ç§»æäº¤çš„ç®¡ç†ç›´æ¥å½±å“äº†æˆ‘ä»¬çš„ Consumer æ‰€èƒ½æä¾›çš„æ¶ˆæ¯è¯­ä¹‰ä¿éšœã€‚<br><br>è¯·é—®è€å¸ˆï¼Œæ‰‹åŠ¨æäº¤ä½ç§»æ—¶ï¼Œkafkaå¯¹è¾¹ç•Œå€¼æœ‰æ ¡éªŒå˜›ï¼Ÿæ¯”å¦‚ï¼šä¸€ä¸ªåˆ†åŒºæœ‰0ï½9åä¸ªä½ç½®ï¼Œæˆ‘ä¼ è¿‡å»ä¸€ä¸ª-1æˆ–è€…11ï¼Œkafkaä¼šå°†æ‰€æœ‰æ¶ˆæ¯é‡å¤æ¶ˆè´¹æˆ–å…¨éƒ¨ä¸¢æ‰å˜›ï¼Ÿ<br>ä¸šåŠ¡ä¾§æ¥è¿›è¡Œæ¶ˆæ¯å»é‡ï¼Œå¯ä»¥åˆ©ç”¨æ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•ï¼Œè¿™éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„ä¸šåŠ¡å­—æ®µï¼Œæ¯”å¦‚ï¼šè®¢å•å·<br>å¦‚æœä¸èƒ½åˆ©ç”¨æ•°æ®åº“æ¥åšï¼Œæˆ‘è§‰å¾—å¯ä»¥ç¼“å­˜æ¶ˆæ¯ï¼Œç„¶åç”¨äºæ¶ˆæ¯å»é‡ï¼Œæ¶ˆæ¯é‡å¤å‘é€çš„æ—¶æœºåº”è¯¥æ—¶å·®æ¯”è¾ƒçŸ­ã€‚<br>å†è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œå‡å¦‚ç°åœ¨åªæœ‰ä¸€ä¸ªproducerã€ä¸€ä¸ªbrokerã€ä¸€ä¸ªåˆ†åŒºã€ä¸€ä¸ªconsumerï¼Œä½ç§»ä»producerçš„è§’åº¦æœ‰ä¸€ä¸ªï¼Œä»consumerçš„è§’åº¦æœ‰ä¸€ä¸ªï¼Œä¸è¿‡å…¨æ˜¯é’ˆå¯¹è¿™ä¸€ä¸ªåˆ†åŒºè€Œè¨€çš„å¯¹å—ï¼Ÿå¦‚æœæ˜¯ï¼Œæˆ‘è¿˜æƒ³å†é—®ä¸€æ¬¡åˆ†åŒºçš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿçœ‹ä¹‹å‰çš„å›¾åƒæ˜¯æ•°ç»„ï¼Œæ˜¯ä¸æ˜¯æ•°ç»„å‘¢ï¼Ÿå¦‚æœæ˜¯ï¼Œä¸€ç«¯è´Ÿè´£å†™å…¥æ•°æ®ï¼Œä¸€ç«¯è´Ÿè´£è¯»å–æ•°æ®ï¼Œéƒ½æ˜¯é€šè¿‡ä½ç§»æ¥æ§åˆ¶çš„ï¼Œä¹Ÿèƒ½ç†è§£ã€‚åªæ˜¯è¿™æ•°ç»„çš„é•¿åº¦å’Œåˆ é™¤æ¶ˆæ¯çš„æ“ä½œæ€ä¹ˆæ§åˆ¶çš„å‘¢ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":122717,"user_name":"Devin","can_delete":false,"product_type":"c1","uid":1025067,"ip_address":"","ucode":"7BDCD517BD8DD2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/2b/3ba9f64b.jpg","comment_is_top":false,"comment_ctime":1565501188,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565501188","product_id":100029201,"comment_content":"â€œæ‰‹åŠ¨å¼‚æ­¥æäº¤ä½ç§»â€ç†è®ºä¸Šæ˜¯ä¸æ˜¯å®¹æ˜“å‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å†µï¼Ÿ<br>ä¸¾ä¾‹ï¼šAåˆ†åŒºå½“å‰æ¶ˆè´¹è€…ä½ç§»æ˜¯100ï¼Œconsumer ç»§ç»­æ¶ˆè´¹ 101~200ï¼Œç„¶åè°ƒç”¨å¼‚æ­¥ commitAsync(201)ï¼Œå‡è®¾åœ¨commitAsync(201)è¿˜æœªè¢«æˆåŠŸå¤„ç†å®Œæˆå‰ consumer åˆå»å–æ¶ˆæ¯ï¼Œè¿™æ—¶å–çš„æ¶ˆæ¯è¿˜æ˜¯ 101~200 å§ï¼Œé‚£è¿™å°±â€œé‡å¤æ¶ˆè´¹â€äº†ã€‚<br>å¦‚æœä¸¾ä¾‹æˆç«‹çš„è¯ï¼Œæ„Ÿè§‰è¿™ä¸ªç†è®ºä¸Šè¿˜æ˜¯æ¯”ä»·å®¹æ˜“å‘ç”Ÿçš„ï¼Œå¦‚ä½•é¿å…ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1613002,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK8ZEzZjlpMkibWlbuyablZ4An03be8uGBYqU95yIxQeicHFqnSiaqiaiaTxZRlWSh9R1qMYG3OLcVrhUw/132","nickname":"Geek_d62be1","note":"","ucode":"68EBEBC8B637EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19676,"discussion_content":"offsetåœ¨å†…å­˜ä¸­åº”è¯¥æ˜¯æœ‰å€¼çš„ï¼Œç±»ä¼¼äºå…¨å±€å˜é‡ï¼Œæ¯æ¬¡å»è·å–æ¶ˆæ¯ï¼Œç”¨çš„æ˜¯å†…å­˜ä¸­çš„offset,æäº¤ä½ç§»ï¼Œåªæ˜¯ä¸ºäº†æ¢å¤æˆ–è€…rebalenceç­‰æƒ…å†µä¿è¯æ¶ˆæ¯è¯­ä¹‰ä½¿ç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569216056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121937,"user_name":"ç›˜å°¼è¥¿æ—","can_delete":false,"product_type":"c1","uid":1197347,"ip_address":"","ucode":"B59569FC25144F","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/23/28311447.jpg","comment_is_top":false,"comment_ctime":1565252711,"is_pvip":false,"replies":[{"id":"44818","content":"åˆ°åº•æ˜¯ä¸¢å¤±è¿˜æ˜¯é‡å¤å‘¢ï¼Ÿè‡ªåŠ¨æäº¤åº”è¯¥ä¸ä¼šé€ æˆæ•°æ®ä¸¢å¤±ï¼Œä½†ç¡®å®å¯èƒ½é€ æˆæ•°æ®é‡å¤","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565276895,"ip_address":"","comment_id":121937,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1565252711","product_id":100029201,"comment_content":"æˆ‘ä¹Ÿæœ‰ä¸€ä¸ªç–‘é—®å°±æ˜¯è‡ªåŠ¨æäº¤rebalanceå¯¼è‡´æ•°æ®ä¸¢å¤±çš„æƒ…å†µï¼Œæ˜¯ä¸æ˜¯ è‡ªåŠ¨æäº¤çš„æ—¶å€™å½“consumeræ¶ˆè´¹å®Œä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„offsetæ²¡æœ‰è¢«æäº¤ è€Œæ˜¯åœ¨å†…å­˜ä¸­ç­‰å¾…åå°cronçº¿ç¨‹ æˆ–è€…ä¸‹æ¬¡pollçš„æ—¶å€™åˆ·å…¥ç£ç›˜ï¼Œä¸­é—´å‘ç”Ÿé‡å¯æˆ–è€…rebalanceè¿™éƒ¨åˆ†æ•°æ®å°±ä¸¢å¤±äº†ï¼Œæœ€åå¯¼è‡´é‡å¤æ¶ˆè´¹","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462014,"discussion_content":"åˆ°åº•æ˜¯ä¸¢å¤±è¿˜æ˜¯é‡å¤å‘¢ï¼Ÿè‡ªåŠ¨æäº¤åº”è¯¥ä¸ä¼šé€ æˆæ•°æ®ä¸¢å¤±ï¼Œä½†ç¡®å®å¯èƒ½é€ æˆæ•°æ®é‡å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565276895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":398458,"discussion_content":"æ•°æ®æ˜¯ä¸ä¼šä¸¢å¤± ä»–ä»¬å·²ç»é€šè¿‡è¿½åŠ çš„æ–¹å¼å†™å…¥æ—¥å¿— é™¤éæ—¥å¿—æŒä¹…åŒ–å¤±è´¥ã€‚é‚£ä¹Ÿå°±æ„å‘³ç€åç§»é‡å¯èƒ½ä¼šè¯¯æŠ¥ è¿™å°±æ˜¯é‡æ¶ˆè´¹çš„ç”±æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632795410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1197347,"avatar":"https://static001.geekbang.org/account/avatar/00/12/45/23/28311447.jpg","nickname":"ç›˜å°¼è¥¿æ—","note":"","ucode":"B59569FC25144F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7091,"discussion_content":"ä¸¢å¤±offset","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567353767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121705,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1565187795,"is_pvip":false,"replies":[{"id":"44745","content":"çœ‹ä½ çš„åœºæ™¯äº†ã€‚æ¶ˆè´¹è€…ç¢°åˆ°ä¸¥é‡å¼‚å¸¸è¦é€€å‡ºä¹Ÿæ˜¯å¾ˆæ­£å¸¸çš„æƒ…å†µ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565225068,"ip_address":"","comment_id":121705,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565187795","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå¼‚æ­¥å’ŒåŒæ­¥ç»“åˆé‚£æ®µä»£ç ï¼Œå½“æ¶ˆè´¹å‡ºå¼‚å¸¸å°±åœ¨finallyä¸­æŠŠæ¶ˆè´¹è€…closeäº†ï¼Ÿï¼Ÿä¸æ˜¯è¿™æ ·çš„å§ï¼Œæ¶ˆè´¹è€…æ°¸è¿œä¸åº”è¯¥close","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461913,"discussion_content":"çœ‹ä½ çš„åœºæ™¯äº†ã€‚æ¶ˆè´¹è€…ç¢°åˆ°ä¸¥é‡å¼‚å¸¸è¦é€€å‡ºä¹Ÿæ˜¯å¾ˆæ­£å¸¸çš„æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565225068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119634,"user_name":"EricJones","can_delete":false,"product_type":"c1","uid":1207580,"ip_address":"","ucode":"0A80B609400D6B","user_header":"https://static001.geekbang.org/account/avatar/00/12/6d/1c/d9746372.jpg","comment_is_top":false,"comment_ctime":1564641928,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564641928","product_id":100029201,"comment_content":"è€å¸ˆæ‰‹åŠ¨æäº¤çš„è®¾è®¡å¾ˆä¼˜ç¾ï¼Œå…ˆç”¨å¼‚æ­¥æäº¤ä¸å½±å“ç¨‹åºçš„æ€§èƒ½ï¼Œå†ç”¨consumerå…³é—­æ—¶åŒæ­¥æäº¤æ¥ç¡®ä¿ä½ç§»ä¸€å®šæäº¤æˆåŠŸã€‚è¿™é‡Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œæ¯”å¦‚æˆ‘ç¨‹åºè¿è¡ŒæœŸé—´æœ‰å¤šæ¬¡å¼‚æ­¥æäº¤æ²¡æœ‰æˆåŠŸï¼Œæ¯”å¦‚101çš„offsetå’Œ201çš„offsetæ²¡æœ‰æäº¤æˆåŠŸï¼Œç¨‹åºå…³é—­çš„æ—¶å€™501çš„offsetæäº¤æˆåŠŸäº†ï¼Œæ˜¯ä¸æ˜¯å°±ä»£è¡¨å‰é¢500æ¡æˆ‘è¿˜æ˜¯æ¶ˆè´¹æˆåŠŸäº†ï¼Œåªè¦æœ€æ–°çš„ä½ç§»æäº¤æˆåŠŸï¼Œå°±ä»£è¡¨ä¹‹å‰çš„æ¶ˆæ¯éƒ½æäº¤æˆåŠŸäº†ï¼Ÿ<br>è€å¸ˆè¿™ä¸ªé—®é¢˜ å²‚ä¸æ˜¯ä¸¢æ•°æ®äº†ï¼Ÿ<br>commitAsync å¼‚æ­¥æäº¤ï¼Œç„¶åä¼šç»§ç»­æ¶ˆè´¹ poll çš„æ¶ˆæ¯ï¼Œæ¯”å¦‚ä¸Šä¸€ä¸ªpoll åˆ° 101 ä¸‹é¢ä¸€ä¸ªåˆ° 201ã€‚ä¸Šä¸€ä¸ªåˆ°101 ä½ç§»æ¶ˆæ¯æäº¤äº†ã€‚ç»§ç»­æ¶ˆè´¹101-201çš„æ¶ˆæ¯ã€‚è¿™æ˜¯å·²ç»æ¶ˆè´¹åˆ°200äº†ï¼Œä¸Šæ¬¡poll çš„æ¶ˆæ¯ 101ä½ç§»æäº¤å¤±è´¥ï¼Œç„¶ååœ¨è°ƒç”¨ commitSync åŒæ­¥æäº¤è¿™é‡Œçš„é€»è¾‘ï¼Œç„¶åå·²ç»æ¶ˆè´¹åˆ°200 çš„æ¶ˆæ¯ä¸æ˜¯å°±ç™½æ¶ˆè´¹äº†ï¼Ÿè¿™é‡Œåº”è¯¥æ˜¯æ€ä¹ˆä¸ªé€»è¾‘ï¼Ÿæ˜¯consumer å…³é—­ï¼Œç„¶ååœ¨poll æ¶ˆæ¯é‚£è¿˜æ˜¯poll çš„101-201 ã€‚åˆšæ‰çš„æ¶ˆè´¹åˆ°200 å°±åˆé‡å¤äº†ã€‚","like_count":0},{"had_liked":false,"id":117793,"user_name":"è€é±¼","can_delete":false,"product_type":"c1","uid":1221974,"ip_address":"","ucode":"2C873D9E34CB00","user_header":"https://static001.geekbang.org/account/avatar/00/12/a5/56/d1f70c0d.jpg","comment_is_top":false,"comment_ctime":1564132095,"is_pvip":false,"replies":[{"id":"43218","content":"ä¸æ˜¯ï¼Œæ˜¯å‘ä½ç§»ä¸»é¢˜æäº¤ä½ç§»","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564216299,"ip_address":"","comment_id":117793,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564132095","product_id":100029201,"comment_content":"è€å¸ˆï¼Œpollæ—¶ä¼šè‡ªåŠ¨æäº¤ä½ç§»ï¼Œè¿™é‡Œçš„ä½ç§»æ˜¯åˆ†åŒºä¸­ä½ç§»ä¸»é¢˜çš„ä½ç§»ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460119,"discussion_content":"ä¸æ˜¯ï¼Œæ˜¯å‘ä½ç§»ä¸»é¢˜æäº¤ä½ç§»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564216299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116077,"user_name":"æ¥ç¢—ç»¿è±†æ±¤","can_delete":false,"product_type":"c1","uid":1070051,"ip_address":"","ucode":"B0AB63B8D9729F","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/e3/39dcfb11.jpg","comment_is_top":false,"comment_ctime":1563782366,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563782366","product_id":100029201,"comment_content":"å¦‚æœæ¶ˆæ¯è¢«å¤„ç†äº†ï¼Œä½†æ˜¯offsetæäº¤å¤±è´¥ï¼Œé‚£ä»brokerçš„è§’åº¦æ¥çœ‹å°±æ˜¯æ¶ˆæ¯æ²¡è¢«å¤„ç†ï¼Œä¸‹æ¬¡è‚¯å®šè¿˜ä¼šé‡å¤è¢«æ¶ˆè´¹ï¼›ä½†æ˜¯ä»consumerçš„è§’åº¦çœ‹çš„è¯æ˜¯æ¶ˆæ¯è¢«å¤„ç†äº†ï¼Œç„¶ååˆè¦è¢«å¤„ç†ä¸€éã€‚è¿™æ—¶å€™å¦‚æœæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘å¦‚æœæ˜¯ç­‰å¹‚çš„ï¼Œåˆ™æ— æ‰€è°“ï¼›å¦‚æœä¸æ˜¯ï¼Œæˆ‘èƒ½ç›¸å¯¹ä¸¤ç§æ–¹æ¡ˆï¼š1ï¼Œ æœ‰ä¸ªäº‹åŠ¡å­˜åœ¨ï¼Œæ•°æ®å¤„ç†å’Œæäº¤offsetåœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥åˆ™éƒ½å›æ»šï¼›2ï¼Œè‡ªå·±åœ¨ä¸šåŠ¡é€»è¾‘ç«¯åŠ ä¸€ä¸ªéªŒè¯ï¼Œåˆ¤æ–­æ¶ˆæ¯æ˜¯å¦æ˜¯é‡å¤æ¶ˆè´¹ã€‚","like_count":0},{"had_liked":false,"id":115106,"user_name":"æ›¹ä¼Ÿé›„","can_delete":false,"product_type":"c1","uid":1400754,"ip_address":"","ucode":"9740E426C0742C","user_header":"https://static001.geekbang.org/account/avatar/00/15/5f/b2/c4780c10.jpg","comment_is_top":false,"comment_ctime":1563496176,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563496176","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œèƒ½å¦è¯´ä¸€ä¸‹spring kafkaæ‰‹åˆ°æäº¤çš„æœ€ä½³å®è·µï¼Œè°¢è°¢!","like_count":0},{"had_liked":false,"id":114819,"user_name":"lujg","can_delete":false,"product_type":"c1","uid":1054963,"ip_address":"","ucode":"6CCCD89A29B06D","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/f3/cd07e64c.jpg","comment_is_top":false,"comment_ctime":1563412136,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1563412136","product_id":100029201,"comment_content":"å…¶å®æ€»ç»“æ¥è¯´1ï¼Œ2ï¼Œ4éƒ½æ˜¯åœ¨æ¶ˆè´¹è€…ç«¯ç¼©çŸ­pollåˆ°commité—´çš„å¤„ç†æ—¶é—´ï¼Œè€Œ3æ˜¯å¢åŠ pollåˆ°commité—´å…è®¸çš„æ—¶é•¿ï¼Œä»è€Œç¡®ä¿pollåˆ°commité—´çš„æ—¶é—´å°äºç³»ç»Ÿé…ç½®çš„æ—¶é—´ã€‚","like_count":0},{"had_liked":false,"id":114720,"user_name":"ä¿¡ä¿¡","can_delete":false,"product_type":"c1","uid":1303865,"ip_address":"","ucode":"8DF0EC045579FD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/39/951f89c8.jpg","comment_is_top":false,"comment_ctime":1563370180,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563370180","product_id":100029201,"comment_content":"å’Œä¸€æ¥¼æœ‰åŒæ ·çš„ç–‘æƒ‘ï¼šåŒæ—¶ä½¿ç”¨commitSync() å’Œ commitAsync()æ–¹æ¡ˆï¼Œä¸€æ ·å¯èƒ½ä¼šå‡ºç°ï¼šæ—©å·²ç»â€œè¿‡æœŸâ€æˆ–ä¸æ˜¯æœ€æ–°å€¼äº† çš„æƒ…å†µå•Šã€‚ã€‚ã€‚å› ä¸ºå¼‚æ­¥è¿”å›exception çš„æ—¶å€™ï¼Œå¯èƒ½å‡ºé”™çš„é‚£æ¡æ¶ˆæ¯ä¹‹åçš„ä½ç§»å·²ç»è¢«æ›´æ–°äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1470958,"avatar":"https://static001.geekbang.org/account/avatar/00/16/71/ee/31b19304.jpg","nickname":"å°å¯çˆ±","note":"","ucode":"5379D1F00E8796","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6500,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¯¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566931277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114516,"user_name":"Jason_é¹","can_delete":false,"product_type":"c1","uid":1179329,"ip_address":"","ucode":"4A3DCAAC531724","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/c1/6c99fff4.jpg","comment_is_top":false,"comment_ctime":1563328233,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563328233","product_id":100029201,"comment_content":"è‡ªåŠ¨æäº¤ä¹Ÿä¼šå‡ºç°æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µå§ï¼Œä¾‹å¦‚æ¶ˆè´¹è€…polläº†10ä¸ªæ¡æ¶ˆæ¯ï¼Œå‡è®¾è¿™10æ¡æ¶ˆæ¯çš„åç§»é‡æ˜¯0åˆ°9ï¼Œå½“æ¶ˆè´¹è€…æ¶ˆè´¹åˆ°åç§»é‡ä¸º5çš„æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨æäº¤æ¶ˆè´¹ä½ç§»ä¸º10ï¼Œåç»­å‘ç”Ÿrbalanceæˆ–è€…æ¶ˆè´¹è€…å¼‚å¸¸é‡å¯ï¼Œå†æ¬¡pollæ—¶ä¼špollåç§»é‡ä¸º10çš„æ¶ˆæ¯ï¼Œé‚£6åˆ°9çš„æ¶ˆæ¯å°±ä¸¢å¤±äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1308502,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83erabhkvu3jKSia1Y3l7pvicBy1YibN6GuIxLuZmI9E9icR8zdjP7BZ570PsDXv7ZLlMTU4Xr3Xz6N9bZg/132","nickname":"Geek_669721","note":"","ucode":"631471460ACFF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":23510,"discussion_content":"è¿™ç§æƒ…å†µä¸ä¼šè‡ªåŠ¨æäº¤çš„ï¼Œè‡ªåŠ¨æäº¤ä¼šåœ¨ä¸‹ä¸€æ¬¡pollçš„æ—¶å€™æ‰ä¼šæäº¤ä¸Šä¸€æ¬¡çš„offset","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569828773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114459,"user_name":"james","can_delete":false,"product_type":"c1","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1563322031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563322031","product_id":100029201,"comment_content":"å¯ä»¥ç»™æ¶ˆæ¯æ·»åŠ ä¸€ä¸ªkeyï¼Œrocketmqå°±æœ‰çš„ï¼Œæ¶ˆè´¹å®Œä¹‹åå†™å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå¦‚redisçš„æ’ä»¶ï¼Œæ¯æ¬¡æ¶ˆè´¹å‰çœ‹é‡Œé¢æœ‰æ²¡æœ‰ï¼Œä½†æ˜¯æ¶ˆè´¹æˆåŠŸæ’å¸ƒéš†è¿‡æ»¤å™¨æœ‰å¯èƒ½å¤±è´¥å°±åˆæ— è§£äº†ï¼Œå“ˆå“ˆ","like_count":0},{"had_liked":false,"id":114399,"user_name":"October","can_delete":false,"product_type":"c1","uid":1137879,"ip_address":"","ucode":"CEDA78F4A5F8B1","user_header":"https://static001.geekbang.org/account/avatar/00/11/5c/d7/e4673fde.jpg","comment_is_top":false,"comment_ctime":1563289843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563289843","product_id":100029201,"comment_content":"æˆ‘è®¤ä¸ºé¿å…é‡å¤æ¶ˆè´¹è¿™ä¸ªé—®é¢˜æ˜¯è¦æœ‰æ¡ä»¶çš„ï¼Œéœ€è¦ä¿è¯åç§»é‡çš„æäº¤å’Œæ¶ˆæ¯çš„æ¶ˆè´¹èƒ½å¤Ÿåœ¨ä¸€ä¸ªæ”¯æŒå›æ»šçš„äº‹åŠ¡å†…è¿›è¡Œï¼Œåç§»é‡å¯ä»¥å›æ»šï¼Œæ¶ˆæ¯çš„æ¶ˆè´¹ä¹Ÿå¯ä»¥å›æ»šï¼Œæ¯”å¦‚æ¶ˆæ¯çš„æ¶ˆè´¹é€»è¾‘æ˜¯å­˜å…¥RDBMSï¼Œå¯ä»¥æ˜æ˜¾çœ‹å‡ºè¿™ç§æ–¹å¼çš„åº”ç”¨åœºæ™¯éå¸¸å±€é™ã€‚å…¶ä»–é¿å…é‡å¤æ¶ˆè´¹çš„é—®é¢˜ï¼Œè¿˜å¾—è¯·è€å¸ˆæŒ‡æ­£ã€‚","like_count":0},{"had_liked":false,"id":114320,"user_name":"Walking In The Air","can_delete":false,"product_type":"c1","uid":1198231,"ip_address":"","ucode":"8142444472AD8E","user_header":"https://static001.geekbang.org/account/avatar/00/12/48/97/520f3511.jpg","comment_is_top":false,"comment_ctime":1563271823,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563271823","product_id":100029201,"comment_content":"è€å¸ˆæœ‰æ²¡æœ‰äº†è§£è¿‡nats, èƒ½ä¸èƒ½åšä¸ªç®€å•å¯¹æ¯”è¯´ä¸‹","like_count":0},{"had_liked":false,"id":114291,"user_name":"Geek_817ea4","can_delete":false,"product_type":"c1","uid":1579066,"ip_address":"","ucode":"D1194D33C4DC11","user_header":"https://static001.geekbang.org/account/avatar/00/18/18/3a/b407889c.jpg","comment_is_top":false,"comment_ctime":1563266753,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563266753","product_id":100029201,"comment_content":"val redisManage: Map[TopicPartition, Long] = new RedisOffset().getLastCommittedOffsets(properties.getProperty(&quot;topic&quot;))<br>    val result: InputDStream[ConsumerRecord[String, String]] = if (redisManage.isEmpty) {<br>      KafkaUtils.createDirectStream[String, String](sc, LocationStrategies.PreferConsistent, ConsumerStrategies.Subscribe[String, String](topics, kafkaPrograms))<br>    } else {<br>      KafkaUtils.createDirectStream[String, String](sc, LocationStrategies.PreferConsistent, ConsumerStrategies.Assign[String, String](redisManage.keys, kafkaPrograms, redisManage))<br>    }<br>    &#47;&#47;ä¸šåŠ¡é€»è¾‘å¤„ç†<br>    result.foreachRDD({ (rdd: RDD[ConsumerRecord[String, String]]) =&gt;<br>      &#47;&#47;è·å–Jediså¯¹è±¡<br>      val jedis: Jedis = new RedisClient().getJedis<br>      &#47;&#47;è·å¾—åç§»é‡å¯¹è±¡æ•°ç»„<br>      val offsetRanges: Array[OffsetRange] = rdd.asInstanceOf[HasOffsetRanges].offsetRanges<br>      rdd.foreachPartition({ (it: Iterator[ConsumerRecord[String, String]]) =&gt;<br>        &#47;&#47;æ•°æ®é€»è¾‘å¤„ç†<br>        it.foreach(f = (pair: ConsumerRecord[String, String]) =&gt; {<br>\t\té€»è¾‘ä»£ç ç•¥<br>        })<br>      })<br>      &#47;&#47;æ›´æ–°offset<br>      offsetRanges.foreach { (offsetRange: OffsetRange) =&gt;<br>        jedis.hset(properties.getProperty(&quot;group.id&quot;), offsetRange.topic + &quot;-&quot; + offsetRange.partition, offsetRange.untilOffset.toString)<br>      }<br>æˆ‘æ˜¯æŠŠoffsetä¿å­˜åœ¨äº†redisï¼Œè™½ç„¶ä¸ä¼šä¸¢æ•°æ®ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šå‘ç”Ÿä¼šé‡å¤æ¶ˆè´¹ï¼Œåº”è¯¥æ€ä¹ˆè®¾è®¡ï¼","like_count":0},{"had_liked":false,"id":114155,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1563244040,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563244040","product_id":100029201,"comment_content":"è€å¸ˆè¿˜ï¼Œè¿˜æ˜¯å…³äºå‡ ä¸ªæ—¶é—´å‚æ•°çš„é…ç½®å’Œé‡å¤æ¶ˆè´¹ï¼Œå‰ææ˜¯è‡ªåŠ¨æäº¤ï¼Œå‚æ•°å’Œä»£ç ä¸ºï¼šmax.poll.interval.ms=5sï¼Œauto.commit.interval.ms=10sï¼Œconsumer.poll(Duration.ofSeconds(1))ï¼Œç„¶ååœ¨consumer while(true)æœ€åThread.sleep(6000L); ä¼‘çœ 6sï¼Œå‘ç°ä¼šä¸€ç›´é‡å¤æ¶ˆè´¹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œé€šè¿‡æ§åˆ¶å˜é‡æ³•= =ï¼Œæˆ‘å‘ç°åªè¦consumeræ¶ˆè´¹çš„æ—¶é—´å¤§äºmax.poll.interval.msçš„è®¾ç½®ï¼Œå°±ä¼šä¸€ç›´é‡å¤æ¶ˆè´¹ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æˆåŠŸæäº¤offsetå—ï¼Ÿä¸ºä»€ä¹ˆå’Œmax.poll.interval.msæœ‰å…³ç³»å‘¢ï¼Œåè€Œå’Œauto.commit.interval.msæ²¡å…³ç³»ä¼¼çš„ï¼Œè€å¸ˆèƒ½è¯¦ç»†è®²è®²å—ï¼Ÿæˆ‘çœ‹kafkaé»˜è®¤çš„max.poll.interval.ms=300sï¼Œæ˜¯ä¸æ˜¯ä¸åº”è¯¥æŠŠè¿™ä¸ªæ—¶é—´è°ƒçš„å¤ªå°ï¼Œè¿™æ ·ä¼šå¼•èµ·é‡å¤æ¶ˆè´¹ã€‚","like_count":0},{"had_liked":false,"id":114100,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1563238178,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563238178","product_id":100029201,"comment_content":"è¿½é—®æˆ‘çš„ä¸Šä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¯´æ˜¯ä¸€ä¸ªæ—¶æœºï¼Œæ˜¯å› ä¸º5s pollä¸€æ¬¡å—","like_count":0},{"had_liked":false,"id":114004,"user_name":"å¾·æƒ å…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1178969,"ip_address":"","ucode":"FD8AEBEC32085F","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/59/4416b40f.jpg","comment_is_top":false,"comment_ctime":1563202922,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563202922","product_id":100029201,"comment_content":"æ™®é€šçš„åšæ³•æ˜¯ç”¨redisæˆ–è€…æ•°æ®åº“åšä¸€ä¸ªæ¶ˆè´¹é”ï¼Œæ¶ˆè´¹ä¹‹å‰è·å–ï¼Œæ¶ˆè´¹ä¹‹åé‡Šæ”¾ã€‚è·å–åˆ°ä¹‹åå¦‚æœå‘ç°å·²ç»è¢«æ¶ˆè´¹è¿‡åˆ™ä¸¢å¼ƒè¿™æ¬¡æ¶ˆè´¹ã€‚ä½†è¿™æ ·çš„åšæ³•éœ€è¦å¼•å…¥æ–°çš„å¤–éƒ¨ä¾èµ–ï¼Œä¼šå˜å¾—å¾ˆé‡ï¼Œè€Œä¸”å¯¹æ¶ˆè´¹æ€§èƒ½ä¹Ÿä¼šå½±å“ï¼Œå¹¶ä¸”ä¸­å¤®å¼æœåŠ¡ä¹Ÿå®¹æ˜“æˆä¸ºæ‰©å±•çš„ç“¶é¢ˆã€‚è€å¸ˆæœ‰ä»€ä¹ˆå¥½æ–¹æ³•å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":113957,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1563194078,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563194078","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œè¿˜æ˜¯consumeræ¶ˆè´¹çš„é—®é¢˜ï¼Œæˆ‘çœ‹æœ‰äººé—®äº†ï¼Œå¦‚æœè‡ªåŠ¨æäº¤æ—¶é—´è®¾ç½®ä¸º20sï¼Œé‚£ä¹ˆä¸­é—´æ¶ˆè´¹å®Œäº†ï¼Œç„¶ååˆå»æ‹‰å–æ–°æ¶ˆæ¯ï¼Œæ€ä¹ˆä¿è¯ä¸é‡å¤æ¶ˆè´¹å‘¢ï¼Ÿæˆ‘çœ‹å›å¤çš„æ˜¯â€œconsumerå†…éƒ¨æœ‰ä¸ªæŒ‡é’ˆï¼Œä¼šæ¢æµ‹åˆ°ä¸‹ä¸€æ¡è¦æ¶ˆè´¹çš„æ•°æ®â€ï¼Œè¿™ä¸ªæ„æ€æ˜¯è™½ç„¶æ²¡æœ‰æäº¤offsetï¼Œä½†æ˜¯consumerç«¯æœ‰è‡ªå·±çš„offsetï¼Œå¯ä»¥ä¿è¯ä»ä¸Šæ¬¡æ¶ˆè´¹è¿‡åçš„ä½ç½®æ‹‰å–æ–°æ¶ˆæ¯ï¼Œå¦‚æœåœ¨è¿™ä¸ªä¸­é—´ï¼ŒconsumeræŒ‚äº†ï¼Œé‚£å°±ä¼šæœ‰é‡å¤æ¶ˆè´¹çš„æƒ…å†µã€‚æ˜¯è¿™æ ·çš„å—ï¼Ÿè¿™æ ·çš„è¯å…¶å®consumeræ¶ˆè´¹æ•°æ®æ˜¯å’Œè¿™ä¸ªæŒ‡é’ˆçš„ä½ç½®æœ‰å…³ç³»ï¼Œè‡³äºæäº¤çš„offsetä»…ä»…æ˜¯ä¸ºäº†ä¿è¯consumerå…³é—­é‡å¯æ—¶ç¡®å®šå¼€å§‹æ¶ˆè´¹çš„ä½ç½®ã€‚è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯ï¼Œconsumeræ¯æ¬¡æ¶ˆè´¹æ•°æ®å°±æ˜¯ä»¥æäº¤çš„offsetä¸ºå‡†ï¼ŒæŠŠè¿™äº›æ•°æ®éƒ½æ‹‰å–åˆ°ï¼Œä½†æ˜¯consumerç«¯ä¼šæŒ‰ç…§è‡ªå·±çš„æŒ‡é’ˆï¼Œåªå¤„ç†æŒ‡é’ˆä½ç½®åé¢çš„æ•°æ®ï¼Œä¹‹å‰çš„æ•°æ®è·³è¿‡æ‰ã€‚","like_count":0},{"had_liked":false,"id":113767,"user_name":"æ›¾è½¼éºŸ","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1563153314,"is_pvip":false,"replies":[{"id":"41413","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563156036,"ip_address":"","comment_id":113767,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563153314","product_id":100029201,"comment_content":"ä¸è¿‡è€å¸ˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œpollä¸‹æ¥çš„æ•°æ®æ˜¯æœ‰åºçš„å—ï¼ŸåŒä¸€ä¸ªpartitionä¸­å„ä¸ªæ¶ˆæ¯çš„ç›¸å¯¹é¡ºåºï¼Œå½“ç„¶ä¸åŒpartitionåº”è¯¥æ˜¯ä¸ä¸€å®šçš„","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458375,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563156036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113765,"user_name":"æ›¾è½¼éºŸ","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1563153154,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563153154","product_id":100029201,"comment_content":"æˆ‘ä»¬ç›®å‰çš„åšæ³•æ˜¯kafkaæ¶ˆè´¹å‰éƒ½æœ‰ä¸€ä¸ªæ¶ˆæ¯æ¥å£è¡¨ï¼Œå¯ä»¥ä½¿ç”¨Redisæˆ–è€…MySQL(Redisåªå­˜æœ€è¿‘100ä¸ªæ¶ˆæ¯)ï¼Œç„¶åä¼šè®¾ç½®consumeræ‹‰å–æ¶ˆæ¯çš„å¤§å°æé™ï¼Œä¿è¯æ¶ˆæ¯æ•°é‡ä¸è¶…è¿‡100(è¿™ä¸ªé˜ˆå€¼å¯ä»¥è‡ªè¡Œè°ƒæ•´)ï¼Œå…¶ä¸­æˆ‘ä»¬ä¼šä¿è¯kafkaæ¶ˆæ¯çš„keyæ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œæ¯”å¦‚ä½¿ç”¨é›ªèŠ±ç®—æ³•ï¼Œåœ¨è¿›è¡Œæ¶ˆè´¹çš„æ—¶å€™å¯ä»¥é€šè¿‡å‰ç½®è¡¨è¿›è¡Œå¹‚ç­‰æ€§å»é‡","like_count":0},{"had_liked":false,"id":113754,"user_name":"ikimiy","can_delete":false,"product_type":"c1","uid":1067295,"ip_address":"","ucode":"CC67E87B99EE3C","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/1f/37e18877.jpg","comment_is_top":false,"comment_ctime":1563151833,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563151833","product_id":100029201,"comment_content":"è€å¸ˆ consumer offsetåœ¨sparkç¨‹åºä¸­å¦‚ä½•æ§åˆ¶æ‰‹åŠ¨æäº¤çš„ æœ‰æ²¡æœ‰sample codeå¯ä»¥å‚è€ƒçš„ thks","like_count":0},{"had_liked":false,"id":113753,"user_name":"calljson","can_delete":false,"product_type":"c1","uid":1505262,"ip_address":"","ucode":"A5F81A6A5B4497","user_header":"https://static001.geekbang.org/account/avatar/00/16/f7/ee/6eeb58a3.jpg","comment_is_top":false,"comment_ctime":1563151808,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563151808","product_id":100029201,"comment_content":"é¿å…é‡å¤æ¶ˆè´¹ï¼š<br>1. ï¼ˆä¸è€ƒè™‘rebalanceï¼‰produceråœ¨ç”Ÿæˆæ¶ˆæ¯ä½“æ˜¯ï¼Œé‡Œé¢åŠ ä¸Šå”¯ä¸€æ ‡è¯†ç¬¦æ¯”å¦‚ï¼šå”¯ä¸€Idï¼Œå³ä¿è¯æ¶ˆæ¯çš„å¹‚ç­‰æ€§ï¼Œconsumeråœ¨å¤„ç†æ¶ˆæ¯çš„è¿‡ç¨‹ä¸­ï¼Œå°†æ¶ˆè´¹åçš„æ¶ˆæ¯Idå­˜å‚¨åˆ°æ•°æ®åº“ä¸­æˆ–è€…redisï¼Œç­‰æ¶ˆæ¯å¤„ç†å®Œæ¯•ååœ¨æ‰‹åŠ¨æäº¤offset<br>2. ï¼ˆè€ƒè™‘rebalanceï¼‰ç›‘å¬consumerçš„rebalanceï¼Œrebalanceå‘ç”Ÿå‰å°†topic-partion-offsetå­˜å…¥æ•°æ®åº“ï¼Œrebalanceåæ ¹æ®è·å–åˆ°çš„åˆ†åŒºä¿¡æ¯åˆ°æ•°æ®åº“ä¸­æŸ¥æ‰¾ä¸Šæ¬¡æ¶ˆè´¹åˆ°çš„ä½ç½®seekåˆ°ä¸Šæ¬¡æ¶ˆè´¹ä½ç½®ï¼Œåœ¨å¤„ç†æ¶ˆæ¯ä¸­ï¼Œåˆ©ç”¨æ•°æ®åº“äº‹åŠ¡ç®¡ç†å¤„ç†æ¶ˆæ¯<br>2. ","like_count":0,"discussions":[{"author":{"id":1618482,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/32/d26f92c5.jpg","nickname":"å¢¨å°é›¨çš„çŒ«","note":"","ucode":"A14EBA5949837D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8047,"discussion_content":"æ€ä¹ˆçŸ¥é“rebalanceå³å°†å‘ç”Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567766446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113689,"user_name":"z.l","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/d35ab9a1.jpg","comment_is_top":false,"comment_ctime":1563118842,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563118842","product_id":100029201,"comment_content":"æ¶ˆè´¹è€…ç«¯å®ç°æ¶ˆè´¹å¹‚ç­‰ã€‚å…·ä½“åšæ³•ï¼šåˆ›å»ºæœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œä»¥messageIdä½œä¸ºä¸»é”®ã€‚æ¶ˆè´¹æ¶ˆæ¯çš„åŒæ—¶ä¹Ÿæ’å…¥æ¶ˆæ¯è¡¨ï¼ŒæŠŠæ¶ˆè´¹é€»è¾‘çš„sqlè¯­å¥å’Œæ¶ˆæ¯è¡¨çš„insertè¯­å¥æ”¾åœ¨åŒä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ä¸­ã€‚","like_count":0},{"had_liked":false,"id":113549,"user_name":"ç”µå…‰ç«çŸ³","can_delete":false,"product_type":"c1","uid":1013160,"ip_address":"","ucode":"3AD33BB4AA940F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg","comment_is_top":false,"comment_ctime":1563075358,"is_pvip":false,"replies":[{"id":"41417","content":"å¯ä»¥æ§åˆ¶ï¼Œä½¿ç”¨KafkaConsumer.seekå¯ä»¥ç²¾ç¡®æ§åˆ¶ä½ è¦å¼€å§‹æ¶ˆè´¹çš„ä½ç§»","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563156672,"ip_address":"","comment_id":113549,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1563075358","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œconsumerçš„apiåœ¨è¯»å–çš„æ—¶å€™èƒ½æŒ‡å®šä»æŸä¸ªpartitionçš„æŸä¸ªoffsetå¼€å§‹è¯»å–å—ï¼Ÿçœ‹å‚æ•°åªèƒ½ç”¨latest,oldestè¿›è¡ŒæŒ‡å®šï¼Œç„¶åç”¨kafkaè®°å½•çš„offsetè¿›è¡Œè¯»å–ï¼Œæˆ‘ä»¬èƒ½è‡ªå·±æ§åˆ¶èµ·å§‹çš„offsetå—ï¼Œè¿™æ ·å¯ä»¥åšæ›´ç²¾å‡†çš„exact onceçš„è¯­ä¹‰","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458273,"discussion_content":"å¯ä»¥æ§åˆ¶ï¼Œä½¿ç”¨KafkaConsumer.seekå¯ä»¥ç²¾ç¡®æ§åˆ¶ä½ è¦å¼€å§‹æ¶ˆè´¹çš„ä½ç§»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563156672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":52450,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574052462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009260,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/6c/4a68a916.jpg","nickname":"åŒå¶","note":"","ucode":"6DA1D477F9D580","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1950,"discussion_content":"å¯ä»¥ seek","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563116030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113494,"user_name":"ban","can_delete":false,"product_type":"c1","uid":1034204,"ip_address":"","ucode":"E523CE97E48266","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","comment_is_top":false,"comment_ctime":1563031425,"is_pvip":false,"replies":[{"id":"41419","content":"tryä¸æ˜¯åœ¨whileå¤–é¢å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563156769,"ip_address":"","comment_id":113494,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1563031425","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘é—®ã€‚commitSync å’Œ commitAsync ç»„åˆè¿™ä¸ªä»£ç ï¼Œæ•è·å¼‚å¸¸åœ¨whileå¾ªç¯å¤–é¢ï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸ä¸å°±ä¸èµ°äº†å—ï¼Œç¨‹åºä¹Ÿå°±åœæ­¢ã€‚æ˜¯ä¸æ˜¯æ”¾åœ¨whileå¾ªç¯æ¯”è¾ƒå¥½ï¼Œæ—¢å¯ä»¥å¤„ç†å¼‚å¸¸ï¼Œè¿˜èƒ½æäº¤åç§»é‡ï¼Œè¿˜èƒ½ç»§ç»­æ¶ˆè´¹å¤„ç†æ¶ˆæ¯ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458249,"discussion_content":"tryä¸æ˜¯åœ¨whileå¤–é¢å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563156769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1034204,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","nickname":"ban","note":"","ucode":"E523CE97E48266","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1981,"discussion_content":"æ”¾åœ¨whileå¾ªç¯é‡Œé¢ï¼Œè¿™æ ·å¤„ç†å®Œå¼‚å¸¸è¿˜èƒ½ç»§ç»­æ¶ˆè´¹æ¶ˆæ¯","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563160752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1034204,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","nickname":"ban","note":"","ucode":"E523CE97E48266","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1982,"discussion_content":"è¿™æ ·ä¼šä¸ä¼šæ›´å¥½ä¸€ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563160812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113464,"user_name":"æ˜ç¿¼","can_delete":false,"product_type":"c1","uid":1068361,"ip_address":"","ucode":"E77F86BEB3D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","comment_is_top":false,"comment_ctime":1563023378,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563023378","product_id":100029201,"comment_content":"æœ‰åŒå­¦é—®offsetæ˜¯å¦åœ¨å†…å­˜æ§åˆ¶ç­‰é—®é¢˜ï¼Œå¯èƒ½æ˜¯æ²¡ç”¨è¿‡kafkaï¼Œkafkaçš„æ¶ˆè´¹è€…å¯åŠ¨æ—¶å€™å¯ä»¥è®¾ç½®å‚æ•°ä»ä»€ä¹ˆä½ç½®å¼€å§‹è¯»ï¼Œæœ‰çš„æ˜¯ä»æœ€æ–°çš„å¼€å§‹è¯»ï¼Œæœ‰çš„æ˜¯ä»æœ€è€çš„å¼€å§‹è¯»ï¼Œä»æœ€æ–°ä½ç½®è¯»å°±æ˜¯ä»ä¸Šæ¬¡æäº¤çš„ä½ç§»è¯»ï¼Œæ‰€ä»¥æäº¤çš„offsetæ˜¯ç”¨ä½œä¸‹ä¸€æ¬¡ç¨‹åºå¯åŠ¨æˆ–é‡æ–°å¹³è¡¡åè¯»å–çš„ä½ç½®çš„ã€‚åŒæ ·åƒè€å¸ˆè¿™ç§å…ˆå¼‚æ­¥å†åŒæ­¥æäº¤æ•°æ®çš„åœºæ™¯å¦‚æœä¸€æ¬¡æ‹‰500æ¡æ•°æ®ï¼Œæ¶ˆè´¹åˆ°200æ¡ä¹‹åå¼‚å¸¸äº†ï¼ŒåŒæ­¥æäº¤æ˜¯æäº¤500æ¡çš„ï¼Œæˆ‘è§‰å¾—æ˜¯ä¸æ˜¯å¯ä»¥ç±»ä¼¼ä¸‹é¢åˆ†æ‰¹æäº¤çš„æ–¹æ³•æäº¤ä¸çŸ¥é“æ­¤æ–¹æ³•æœ‰åŒæ­¥çš„å—ï¼Ÿæœ‰çš„è¯åº”è¯¥ä¼šæ¯”è¾ƒå®Œç¾è§£å†³ã€‚<br><br>å¯¹äºè€å¸ˆçš„é—®é¢˜ï¼Œæƒ³ä¸é‡å¤åªæœ‰è‡ªå·±åœ¨ç¨‹åºä¸­ä¿ç•™offsetid.å¦‚æœåç«¯ç³»ç»Ÿæœ‰æ•°æ®åº“ç±»ä¼¼æ•°æ®åº“ä¸»å»ºæœºåˆ¶ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ï¼Œæ’å…¥æŠ¥çº¦æŸå†²çªå°±å¿½è§†â€¦","like_count":0,"discussions":[{"author":{"id":1034204,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","nickname":"ban","note":"","ucode":"E523CE97E48266","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1890,"discussion_content":"æ–‡ä¸­å·²ç»æœ‰åˆ†æ‰¹åŒæ­¥çš„æ–¹æ³•\ncommitSync(Map<TopicPartition, OffsetAndMetadata>)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563037705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113453,"user_name":"è›‹ç‚’ç•ªèŒ„","can_delete":false,"product_type":"c1","uid":1095049,"ip_address":"","ucode":"3F963347C4A97C","user_header":"https://static001.geekbang.org/account/avatar/00/10/b5/89/9a1b4dee.jpg","comment_is_top":false,"comment_ctime":1563015536,"is_pvip":false,"replies":[{"id":"41421","content":"ä¸èƒ½ç»å¯¹ä¿è¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563156927,"ip_address":"","comment_id":113453,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1563015536","product_id":100029201,"comment_content":"è‡ªåŠ¨æäº¤å°±ä¸€å®šèƒ½å¤Ÿä¿è¯ä¸ä¸¢æ¶ˆæ¯å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458230,"discussion_content":"ä¸èƒ½ç»å¯¹ä¿è¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563156927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1308401,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f6/f1/5ccbe3fe.jpg","nickname":"è€é†‹","note":"","ucode":"D6DF921AAB9E7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1936,"discussion_content":"èƒ½å§ï¼Œè€å¸ˆè®²äº†ä¸‹æ¬¡poolæ—¶å…ˆæäº¤ä¸Šæ¬¡æ¶ˆè´¹çš„ä½ç§»ï¼Œåªå¯èƒ½å¯¼è‡´é‡å¤æ¶ˆè´¹çš„æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563108870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113380,"user_name":"ç§‘è«æ¹–ç•”çš„çƒç«¥","can_delete":false,"product_type":"c1","uid":1025780,"ip_address":"","ucode":"E63B6D4F7EA129","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/f4/f641a356.jpg","comment_is_top":false,"comment_ctime":1562988975,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562988975","product_id":100029201,"comment_content":"Consumerè‡ªå·±è®°å½•ä¸€ä¸‹æœ€è¿‘ä¸€æ¬¡å·²æ¶ˆè´¹çš„offset","like_count":0},{"had_liked":false,"id":113365,"user_name":"æµ·è´¼ç‹","can_delete":false,"product_type":"c1","uid":1396015,"ip_address":"","ucode":"EAF7CE34AF05DC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/T2WIS5gJVKoeQHPohZ0SkCZRjChjyqRJ7v0Urw2UTuWrUX3mBb3Om0PGGRFosb6Avibyab4661jCqrTsFrnPC6A/132","comment_is_top":false,"comment_ctime":1562984681,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562984681","product_id":100029201,"comment_content":"è‡ªåŠ¨æäº¤ä¹Ÿå¯èƒ½å‡ºç°æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µï¼Œå¦‚æœæ‹‰å–æ¶ˆæ¯å’Œå¤„ç†æ¶ˆæ¯æ˜¯ä¸¤ä¸ªçº¿ç¨‹å»å¤„ç†çš„å°±å¯èƒ½å‘ç”Ÿæ‹‰å–çº¿ç¨‹æ‹‰å–äº†ä¸¤æ¬¡ï¼Œå¤„ç†çº¿ç¨‹ç¬¬ä¸€æ¬¡çš„æ¶ˆæ¯æ²¡å¤„ç†å®Œï¼Œå´©æºƒæ¢å¤åå†æ¶ˆè´¹å¯¼è‡´å¯èƒ½ä¸¢å¤±æŸäº›æ¶ˆæ¯ã€‚ä¸è¿‡æˆ‘è§‰å¾—è¿™ä¸èƒ½æ€ªkafkaäº†ï¼Œè¿™ç§ä¸¢å¤±è¶…å‡ºkafkaçš„è´£ä»»è¾¹ç•Œäº†","like_count":0},{"had_liked":false,"id":113358,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1562984019,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562984019","product_id":100029201,"comment_content":"å…³äºä¸šåŠ¡å»é‡çš„é€»è¾‘ï¼Œå¯ä»¥è€ƒè™‘åœ¨ä¸šåŠ¡å­—æ®µé‡ŒåŠ ä¸€ä¸ªtxidï¼Œç”¨consumerçš„offsetå€¼è¡¨ç¤ºäº‹åŠ¡idï¼Œå¦‚æœæœ‰è¿™ä¸ªidè¡¨ç¤ºè¢«å¤„ç†è¿‡äº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è¡¨ç¤ºè¿˜æ²¡å¤„ç†è¿‡ï¼Œè¿™æ ·å¯ä»¥åˆ©ç”¨mysqlæˆ–è€…MongoDBæ¥å®ç°é¿å…é‡å¤æ¶ˆè´¹","like_count":0},{"had_liked":false,"id":113347,"user_name":"nico","can_delete":false,"product_type":"c1","uid":1209075,"ip_address":"","ucode":"DDB5EFE9F3A70E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Pr8laRQY3skrzzgen37ZIt4HQvtaThAcqvyK8eAzc9DRiak803q5HS7gCnXFxpx6CWibqT1Sic0h1TLMmVNUpJRibA/132","comment_is_top":false,"comment_ctime":1562982074,"is_pvip":true,"replies":[{"id":"41424","content":"è¦çœ‹æ•°æ®é‡æ˜¯å¦skewed","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563157282,"ip_address":"","comment_id":113347,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1562982074","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œæˆ‘è¿™é¢ç”¨springçš„æ³¨è§£æ–¹å¼æ¶ˆè´¹kafkaæ¶ˆæ¯ï¼Œä½¿ç”¨çš„æ˜¯æ‰‹åŠ¨æäº¤ä½ç§»ï¼Œæˆ‘å°†ä¸€ä¸ªjavaåº”ç”¨ï¼Œéƒ¨ç½²åœ¨ä¸¤å°æœºå™¨ä¸Šé¢å¯åŠ¨ï¼ŒåŒä¸€ä¸ªæ¶ˆè´¹ç»„ï¼Œä¸€å…±30ä¸ªpartition,å‘ç°éƒ¨åˆ†1-25çš„partitionå †ç§¯ï¼Œ25-30çš„æ¶ˆè´¹æ­£å¸¸ï¼Œè¿™ä¸ªè¦æ€ä¹ˆåˆ†æï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458179,"discussion_content":"è¦çœ‹æ•°æ®é‡æ˜¯å¦skewed","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563157282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1209075,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Pr8laRQY3skrzzgen37ZIt4HQvtaThAcqvyK8eAzc9DRiak803q5HS7gCnXFxpx6CWibqT1Sic0h1TLMmVNUpJRibA/132","nickname":"nico","note":"","ucode":"DDB5EFE9F3A70E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2101,"discussion_content":"æ•°æ®æ²¡æœ‰skewed,å †ç§¯çš„partitionå’Œæ²¡æœ‰å †ç§¯çš„ï¼Œç”Ÿäº§çš„offsetéƒ½åœ¨ä¸€ä¸ªèŒƒå›´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563259849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}