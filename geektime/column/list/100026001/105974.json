{"id":105974,"title":"32 | FPGA和ASIC：计算机体系结构的黄金时代","content":"<p>过去很长一段时间里，大家在讲到高科技、互联网、信息技术的时候，谈的其实都是“软件”。从1995年微软发布Windows 95开始，高科技似乎就等同于软件业和互联网。著名的风险投资基金Andreessen Horowitz的合伙人Marc Andreessen，在2011年发表了<a href=\"https://a16z.com/2011/08/20/why-software-is-eating-the-world/\">一篇博客</a>，声称“Software is Eating the World”。Marc Andreessen，不仅是投资人，更是Netscape的创始人之一。他当时的搭档就是我们在前两讲提过的SGI创始人Jim Clark。</p><p>的确，过去20年计算机工业界的中心都在软件上。似乎硬件对大家来说，慢慢变成了一个黑盒子。虽然必要，但却显得有点无关紧要。</p><p>不过，在上世纪70～80年代，计算机的世界可不是这样的。那个时候，计算机工业届最激动人心的，是层出不穷的硬件。无论是Intel的8086，还是摩托罗拉的68000，这样用于个人电脑的CPU，还是直到今天大家还会提起的Macintosh，还有史上最畅销的计算机Commodore 64，都是在那个时代被创造出来的。</p><p><img src=\"https://static001.geekbang.org/resource/image/32/3e/325bfc1e0daa59c3451a6e5361dece3e.png?wh=1920*1080\" alt=\"\"></p><center><span class=\"reference\">电视剧Halt and Catch Fire，灵感应该就是来自第一台笔记本电脑Compaq Portable的诞生</span></center><!-- [[[read_end]]] --><p>不过，随着计算机主频提升越来越困难。这几年，计算机硬件又进入了一个新的、快速发展的时期。</p><p>从树莓派基金会这样的非盈利组织开发35美元的单片机，到Google这样的巨头为了深度学习专门开发出来的TPU，新的硬件层出不穷，也无怪乎David Patterson老爷爷，去年在拿图灵奖之后专门发表<a href=\"https://eecs.berkeley.edu/turing-colloquium/schedule/patterson\">讲话</a>，说计算机体系结构又进入了一个黄金时代。那今天我就带你一起来看看，FPGA和ASIC这两个最近比较时髦的硬件发展。</p><h2>FPGA</h2><p>之前我们讲解CPU的硬件实现的时候说过，其实CPU其实就是一些简单的门电路像搭积木一样搭出来的。从最简单的门电路，搭建成半加器、全加器，然后再搭建成完整功能的ALU。这些电路里呢，有完成各种实际计算功能的组合逻辑电路，也有用来控制数据访问，创建出寄存器和内存的时序逻辑电路。如果你对这块儿内容印象不深，可以回顾一下第12讲到第14讲的内容，以及第17讲的内容。</p><p>好了，那现在我问你一个问题，在我们现代CPU里面，有多少个晶体管这样的电路开关呢？这个答案说出来有点儿吓人。一个四核i7的Intel CPU，上面的晶体管数量差不多有20亿个。那接着问题就来了，我们要想设计一个CPU，就要想办法连接这20亿个晶体管。</p><p>这已经够难了，后面还有更难的。就像我们写程序一样，连接晶体管不是一次就能完事儿了的。设计更简单一点儿的专用于特定功能的芯片，少不了要几个月。而设计一个CPU，往往要以“年”来计。在这个过程中，硬件工程师们要设计、验证各种各样的技术方案，可能会遇到各种各样的Bug。如果我们每次验证一个方案，都要单独设计生产一块芯片，那这个代价也太高了。</p><p>我们有没有什么办法，不用单独制造一块专门的芯片来验证硬件设计呢？能不能设计一个硬件，通过不同的程序代码，来操作这个硬件之前的电路连线，通过“编程”让这个硬件变成我们设计的电路连线的芯片呢？</p><p><img src=\"https://static001.geekbang.org/resource/image/88/7a/88becfbd1d82daad6d2bfebc92809f7a.png?wh=569*613\" alt=\"\"></p><center><a href=\"https://commons.wikimedia.org/wiki/File:Fpga_xilinx_spartan.jpg\">图片来源</a></center><center><span class=\"reference\">XILINX的FPGA芯片</span></center><p>这个，就是我们接下来要说的FPGA，也就是<strong>现场可编程门阵列</strong>（Field-Programmable Gate Array）。看到这个名字，你可能要说了，这里面每个单词单独我都认识，放到一起就不知道是什么意思了。</p><p>没关系，我们就从FPGA里面的每一个字符，一个一个来看看它到底是什么意思。</p><ul>\n<li>P代表Programmable，这个很容易理解。也就是说这是一个可以通过编程来控制的硬件。</li>\n<li>G代表Gate也很容易理解，它就代表芯片里面的门电路。我们能够去进行编程组合的就是这样一个一个门电路。</li>\n<li>A代表的Array，叫作阵列，说的是在一块FPGA上，密密麻麻列了大量Gate这样的门电路。</li>\n<li>最后一个F，不太容易理解。它其实是说，一块FPGA这样的板子，可以在“现场”多次进行编程。它不像PAL（Programmable Array Logic，可编程阵列逻辑）这样更古老的硬件设备，只能“编程”一次，把预先写好的程序一次性烧录到硬件里面，之后就不能再修改了。</li>\n</ul><p>这么看来，其实“FPGA”这样的组合，基本上解决了我们前面说的想要设计硬件的问题。我们可以像软件一样对硬件编程，可以反复烧录，还有海量的门电路，可以组合实现复杂的芯片功能。</p><p>不过，相信你和我一样好奇，我们究竟怎么对硬件进行编程呢？我们之前说过，CPU其实就是通过晶体管，来实现各种组合逻辑或者时序逻辑。那么，我们怎么去“编程”连接这些线路呢？</p><p>FPGA的解决方案很精巧，我把它总结为这样三个步骤。</p><p><strong>第一，用存储换功能实现组合逻辑。</strong>在实现CPU的功能的时候，我们需要完成各种各样的电路逻辑。在FPGA里，这些基本的电路逻辑，不是采用布线连接的方式进行的，而是预先根据我们在软件里面设计的逻辑电路，算出对应的真值表，然后直接存到一个叫作LUT（Look-Up Table，查找表）的电路里面。这个LUT呢，其实就是一块存储空间，里面存储了“特定的输入信号下，对应输出0还是1”。</p><p><img src=\"https://static001.geekbang.org/resource/image/da/1e/da9a35820e7c1038c30ad54390888a1e.jpeg?wh=1978*1396\" alt=\"\"></p><p>如果还没理解，你可以想一下这个问题。假如现在我们要实现一个函数，这个函数需要返回斐波那契数列的第N项，并且限制这个N不会超过100。该怎么解决这个问题呢？</p><p>斐波那契数列的通项公式是 f(N) = f(N-1) + f(N-2) 。所以，我们的第一种办法，自然是写一个程序，从第1项开始算。但其实还有一种办法，就是我们预先用程序算好斐波那契数量前100项，然后把它预先放到一个数组里面。这个数组就像 [1, 1, 2, 3, 5…] 这样。当要计算第N项的时候呢，我们并不是去计算得到结果，而是直接查找这个数组里面的第N项。</p><p>这里面的关键就在于，这个查表的办法，不只能够提供斐波那契数列。如果我们要有一个获得N的5次方的函数，一样可以先计算好，放在表里面进行查询。这个“查表”的方法，其实就是FPGA通过LUT来实现各种组合逻辑的办法。</p><p><strong>第二，对于需要实现的时序逻辑电路，我们可以在FPGA里面直接放上D触发器，作为寄存器。</strong>这个和CPU里的触发器没有什么本质不同。不过，我们会把很多个LUT的电路和寄存器组合在一起，变成一个叫作逻辑簇（Logic Cluster）的东西。在FPGA里，这样组合了多个LUT和寄存器的设备，也被叫做CLB（Configurable Logic Block，可配置逻辑块）。</p><p>我们通过配置CLB实现的功能有点儿像我们前面讲过的全加器。它已经在最基础的门电路上做了组合，能够提供更复杂一点的功能。更复杂的芯片功能，我们不用再从门电路搭起，可以通过CLB组合搭建出来。</p><p><img src=\"https://static001.geekbang.org/resource/image/32/00/325f24043bf68651063dd5b907ab3300.jpeg?wh=1648*1639\" alt=\"\"></p><p><strong>第三，FPGA是通过可编程逻辑布线，来连接各个不同的CLB，最终实现我们想要实现的芯片功能。</strong>这个可编程逻辑布线，你可以把它当成我们的铁路网。整个铁路系统已经铺好了，但是整个铁路网里面，设计了很多个道岔。我们可以通过控制道岔，来确定不同的列车线路。在可编程逻辑布线里面，“编程”在做的，就是拨动像道岔一样的各个电路开关，最终实现不同CLB之间的连接，完成我们想要的芯片功能。</p><p>于是，通过LUT和寄存器，我们能够组合出很多CLB，而通过连接不同的CLB，最终有了我们想要的芯片功能。最关键的是，这个组合过程是可以“编程”控制的。而且这个编程出来的软件，还可以后续改写，重新写入到硬件里。让同一个硬件实现不同的芯片功能。从这个角度来说，FPGA也是“软件吞噬世界”的一个很好的例子。</p><h2>ASIC</h2><p>除了CPU、GPU，以及刚刚的FPGA，我们其实还需要用到很多其他芯片。比如，现在手机里就有专门用在摄像头里的芯片；录音笔里会有专门处理音频的芯片。尽管一个CPU能够处理好手机拍照的功能，也能处理好录音的功能，但是我们直接在手机或者录音笔里塞上一个Intel CPU，显然比较浪费。</p><p>于是，我们就考虑为这些有专门用途的场景，单独设计一个芯片。这些专门设计的芯片呢，我们称之为<strong>ASIC</strong>（Application-Specific Integrated Circuit），也就是<strong>专用集成电路</strong>。事实上，过去几年，ASIC发展得特别快。因为ASIC是针对专门用途设计的，所以它的电路更精简，单片的制造成本也比CPU更低。而且，因为电路精简，所以通常能耗要比用来做通用计算的CPU更低。而我们上一讲所说的早期的图形加速卡，其实就可以看作是一种ASIC。</p><p>因为ASIC的生产制造成本，以及能耗上的优势，过去几年里，有不少公司设计和开发ASIC用来“挖矿”。这个“挖矿”，说的其实就是设计专门的数值计算芯片，用来“挖”比特币、ETH这样的数字货币。</p><p>那么，我们能不能用刚才说的FPGA来做ASIC的事情呢？当然是可以的。我们对FPGA进行“编程”，其实就是把FPGA的电路变成了一个ASIC。这样的芯片，往往在成本和功耗上优于需要做通用计算的CPU和GPU。</p><p>那你可能又要问了，那为什么我们干脆不要用ASIC了，全都用FPGA不就好了么？你要知道，其实FPGA一样有缺点，那就是它的硬件上有点儿“浪费”。这个很容易理解，我一说你就明白了。</p><p>每一个LUT电路，其实都是一个小小的“浪费”。一个LUT电路设计出来之后，既可以实现与门，又可以实现或门，自然用到的晶体管数量，比单纯连死的与门或者或门的要多得多。同时，因为用的晶体管多，它的能耗也比单纯连死的电路要大，单片FPGA的生产制造的成本也比ASIC要高不少。</p><p>当然，有缺点就有优点，FPGA的优点在于，它没有硬件研发成本。ASIC的电路设计，需要仿真、验证，还需要经过流片（Tape out），变成一个印刷的电路版，最终变成芯片。这整个从研发到上市的过程，最低花费也要几万美元，高的话，会在几千万乃至数亿美元。更何况，整个设计还有失败的可能。所以，如果我们设计的专用芯片，只是要制造几千片，那买几千片现成的FPGA，可能远比花上几百万美元，来设计、制造ASIC要经济得多。</p><p>实际上，到底使用ASIC这样的专用芯片，还是采用FPGA这样可编程的通用硬件，核心的决策因素还是成本。不过这个成本，不只是单个芯片的生产制造成本，还要考虑<strong>总体拥有成本</strong>（Total Cost of Ownership），也就是说，除了生产成本之外，我们要把研发成本也算进去。如果我们只制造了一片芯片，那么成本就是“这枚芯片的成本+为了这枚芯片建的生产线的成本+芯片的研发成本”，而不只是“芯片的原材料沙子的成本+生产的电费”。</p><p>单个ASIC的生产制造成本比FPGA低，ASIC的能耗也比能实现同样功能的FPGA要低。能耗低，意味着长时间运行这些芯片，所用的电力成本也更低。</p><p>但是，ASIC有一笔很高的NRE（Non-Recuring Engineering Cost，一次性工程费用）成本。这个成本，就是ASIC实际“研发”的成本。只有需要大量生产ASIC芯片的时候，我们才能摊薄这份研发成本。</p><p><img src=\"https://static001.geekbang.org/resource/image/4c/34/4cbada39aeedefd718eca8c329797834.jpeg?wh=1726*1558\" alt=\"\"></p><p>其实，在我们的日常软件开发过程中，也需要做同样的决策。很多我们需要的功能，可能在市面上已经有开源的软件可以实现。我们可以在开源的软件之上做配置或者开发插件，也可以选择自己从头开始写代码。</p><p>在开源软件或者是买来的商业软件上启动，往往能很快让产品上线。如果从头开始写代码，往往会有一笔不地的NRE成本，也就是研发成本。但是通常我们自己写的代码，能够100%贴近我们的业务需求，后续随着业务需求的改造成本会更低。如果要大规模部署很多服务器的话，服务器的成本会更低。学会从TCO和NRE的成本去衡量做决策，也是每一个架构师的必修课。</p><h2>总结延伸</h2><p>好了，这一讲里，我为你介绍了FPGA和ASIC这两种近年来非常时髦的芯片。</p><p>FPGA本质上是一个可以通过编程，来控制硬件电路的芯片。我们通过用LUT这样的存储设备，来代替需要的硬连线的电路，有了可编程的逻辑门，然后把很多LUT和寄存器放在一起，变成一个更复杂的逻辑电路，也就是CLB，然后通过控制可编程布线中的很多开关，最终设计出属于我们自己的芯片功能。FPGA，常常被我们用来进行芯片的设计和验证工作，也可以直接拿来当成专用的芯片，替换掉CPU或者GPU，以节约成本。</p><p>相比FPGA，ASIC在“专用”上更进一步。它是针对特定的使用场景设计出来的芯片，比如，摄像头、音频、“挖矿”或者深度学习。虽然ASIC的研发成本高昂，但是生产制造成本和能耗都很低。所以，对于有大量需求的专用芯片，用ASIC是很划得来的。而在FPGA和ASIC之间进行取舍，就要看两者的整体拥有成本哪一个更低了。</p><p>专用芯片的故事我们还没有讲完，下一讲，我们来看看Google开发的TPU，这个近两年最知名的ASIC芯片的故事。</p><h2>推荐阅读</h2><p>既然用了David Patterson老爷爷的“黄金时代”作为这一讲的标题，那么他的这篇讲话不可不读。我在文稿里留下了对应的<a href=\"https://cacm.acm.org/magazines/2019/2/234352-a-new-golden-age-for-computer-architecture/fulltext\">文章链接</a>，你也可以在网络上看对应的<a href=\"https://eecs.berkeley.edu/turing-colloquium/schedule/patterson\">讲话视频和PPT。</a></p><h2>课后思考</h2><p>最后，给你留一道思考题。除了我今天讲到的FPGA、ASIC之外，你最近关注到什么新的、有意思的硬件呢？</p><p>欢迎在留言区分享出来。让我们不只了解计算机“软件”，也能够看到更广阔的“硬件”世界。同时，如果你觉得今天的内容很有收获，你也可以把这篇文章分享给你的朋友。</p><p></p>","comments":[{"had_liked":false,"id":111763,"user_name":"LDxy","can_delete":false,"product_type":"c1","uid":1188710,"ip_address":"","ucode":"956432CE7B7761","user_header":"https://static001.geekbang.org/account/avatar/00/12/23/66/413c0bb5.jpg","comment_is_top":false,"comment_ctime":1562595676,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"100346843484","product_id":100026001,"comment_content":"学习FPGA给我印象最深的是，编写FPGA代码需要完全不同于任何一种软件编程语言的思路，因为所有的可执行语句在FPGA中都是并行执行的。编写FPGA代码时若不彻底抛弃以往的软件编写思维方式，你可能连一个最简单的功能都写不出","like_count":24,"discussions":[{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412672,"discussion_content":"硬件描述语言的特点，他本来就是描述输入和输出关系的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636252782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157176,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1575072863,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"83179451487","product_id":100026001,"comment_content":"学到后边，人越来越少了，看来已经成功一半了，哈哈哈","like_count":20,"discussions":[{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"完美坚持","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391022,"discussion_content":"有点遗憾的是，老师的回复也少了。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1630231593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122034,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1e/f2/453d5f88.jpg","nickname":"seker","note":"","ucode":"9B705F91355873","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295021,"discussion_content":"头几篇文章偏简单，好理解，学的人多留言也多。随着课程深入，估计不少同学都弃了，坚持不来。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596071568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"完美坚持","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391023,"discussion_content":"能提出有洞见的。评论或者留言的人也很少。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630231614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146075,"user_name":"阿木林","can_delete":false,"product_type":"c1","uid":1520320,"ip_address":"","ucode":"086C697370716C","user_header":"","comment_is_top":false,"comment_ctime":1572428416,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"48817068672","product_id":100026001,"comment_content":"老师，在设计和实验阶段用FPGA，等方案敲定了，再制作ASIC大规模生产，是不是最优的选择？","like_count":12,"discussions":[{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412673,"discussion_content":"这就是目前ASIC的流程","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636252824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2393751,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TTPicMEZ5s1zKiaKYecIljicficvicdle0K4gbpuicqHFicplZt2fbbogjpeIRtdCTc8nVKKIoM8dMl59JRFNxRNgxS3g/132","nickname":"Geek_0ddc45","note":"","ucode":"4C9BCD7BED6E70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373495,"discussion_content":"是的，海思就是这个思路","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620745111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810189,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZHw73tgCqGKhvticUWGRz4icgicu4hFWfKtacoFJeItH7maNuNUmjnEgDTJvOibwUWgGV0p6guNPibMVWDV4BUmEmlA/132","nickname":"Ethan","note":"","ucode":"75F613D58909DB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298664,"discussion_content":"我也有这样的疑惑，感觉可行啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597374151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238465,"user_name":"seker","can_delete":false,"product_type":"c1","uid":1122034,"ip_address":"","ucode":"9B705F91355873","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/f2/453d5f88.jpg","comment_is_top":false,"comment_ctime":1596176589,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"31660947661","product_id":100026001,"comment_content":"可以配合infoq的这篇 “FPGA 的历史、现状和未来” 一起阅读：https:&#47;&#47;www.infoq.cn&#47;article&#47;wmijrofwZCEHRk0OySjP","like_count":8},{"had_liked":false,"id":111351,"user_name":"ezra.xu","can_delete":false,"product_type":"c1","uid":1014005,"ip_address":"","ucode":"6C3E11889BC6AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/f5/ae200a94.jpg","comment_is_top":false,"comment_ctime":1562547249,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"23037383729","product_id":100026001,"comment_content":"老师，有空给我们讲讲哈佛体系结构吧……","like_count":5,"discussions":[{"author":{"id":1240126,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ec/3e/885ec1d2.jpg","nickname":"宋不肥","note":"","ucode":"32B34AF579C91C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1300,"discussion_content":"哈佛结构是内存和数据分开存储，分别有各自的译码器，主要的区别在chapter22提过的.....","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1562547884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412674,"discussion_content":"解决结构冲突的，前面说过了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636252865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003005,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","nickname":"许童童","note":"","ucode":"4B799C0C6BC678","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1346,"discussion_content":"讲过了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562569599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130205,"user_name":"活的潇洒","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1567403035,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10157337627","product_id":100026001,"comment_content":"“这个可编程逻辑布线，你可以把它当成我们的铁路网。整个铁路系统已经铺好了，<br>但是整个铁路网里面，设计了很多个道岔。我们可以通过控制道岔，来确定不同的列车线路。在可编程逻辑布线里面，“编程”在做的，就是拨动像道岔一样的各个电路开关，最终实现不同CLB之间的连接，完成我们想要的芯片功能。” 我的第一专业就是铁道信号，老师的这个比喻恨到位<br><br>day32 天笔记：https:&#47;&#47;www.cnblogs.com&#47;luoahong&#47;p&#47;11424314.html","like_count":2},{"had_liked":false,"id":282037,"user_name":"静✨","can_delete":false,"product_type":"c1","uid":1658413,"ip_address":"","ucode":"1B33229C206339","user_header":"https://static001.geekbang.org/account/avatar/00/19/4e/2d/06d3f9f5.jpg","comment_is_top":false,"comment_ctime":1615024483,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5909991779","product_id":100026001,"comment_content":"用我在上一行的话来说，就是根据这个零件的需求量，来决定是用cnc单独加工几个还是专门去开模来大批量生产😂","like_count":1,"discussions":[{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412685,"discussion_content":"和机械加工一样😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636253806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203123,"user_name":"sun","can_delete":false,"product_type":"c1","uid":1136181,"ip_address":"","ucode":"948FD34662AFB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/35/eeee9309.jpg","comment_is_top":false,"comment_ctime":1586142165,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5881109461","product_id":100026001,"comment_content":"cpu是不是也可以说是一种ASIC，相比于其他ASIC多了控制的功能，又显得更通用，但是和FPGA的通用不一样。","like_count":1,"discussions":[{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412677,"discussion_content":"专用和通用的区别，他们的共性就是都是IC，硅片，一堆有序的沙子。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636252979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172035,"user_name":"许先森","can_delete":false,"product_type":"c1","uid":1795371,"ip_address":"","ucode":"1F42D4A6B5C6AF","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/2b/446ef7b6.jpg","comment_is_top":false,"comment_ctime":1579076547,"is_pvip":false,"replies":[{"id":"68076","content":"许先森同学，<br><br>好问题，你可以考一下古，看看FPGA是怎么来的。<br>","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1580631319,"ip_address":"","comment_id":172035,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5874043843","product_id":100026001,"comment_content":"干嘛不叫“可重复编程门阵列”哈哈","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481594,"discussion_content":"许先森同学，\n\n好问题，你可以考一下古，看看FPGA是怎么来的。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580631319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1637933,"avatar":"https://static001.geekbang.org/account/avatar/00/18/fe/2d/e23fc6ee.jpg","nickname":"深水蓝","note":"","ucode":"3E3B195DE54DE1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":183204,"discussion_content":"其实早期的FPGA真的是现场的，不是重复的。FPGA可以理解为只是一个CPU，而执行什么样的逻辑线路是CPU上电的时候通过存储芯片读入的。现在有大部分的FPGA都集成了存储的功能而已。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1582469517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1637933,"avatar":"https://static001.geekbang.org/account/avatar/00/18/fe/2d/e23fc6ee.jpg","nickname":"深水蓝","note":"","ucode":"3E3B195DE54DE1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412678,"discussion_content":"嗯，像内存一样，掉电就没了，必须每次加载。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636253089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":183204,"ip_address":""},"score":412678,"extra":""}]}]},{"had_liked":false,"id":154692,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1561842,"ip_address":"","ucode":"63A89D36BE72E8","user_header":"https://static001.geekbang.org/account/avatar/00/17/d4/f2/98201045.jpg","comment_is_top":false,"comment_ctime":1574512954,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5869480250","product_id":100026001,"comment_content":"RISC-V","like_count":1},{"had_liked":false,"id":111456,"user_name":"靠人品去赢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1562560890,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5857528186","product_id":100026001,"comment_content":"老师是不是这两种，只适合那种硬件自己给自己适配的芯片，上限很低的那种？因为现在看一些智能家居，芯片都用上ARM了。","like_count":1,"discussions":[{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412682,"discussion_content":"两个概念，ARM和x86是说不同的CPU架构。\nASIC是区别于通用处理器的专用处理器。\n他们的共性就是都商业量产了。\nFPGA是让用户可小批量实现硬件逻辑的机制，你可以用它只做一个与门（现实中太浪费了，没人这样），也可以物尽其用去做处理器（只要它里面的逻辑单元够用）。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636253670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336284,"user_name":"Sudouble","can_delete":false,"product_type":"c1","uid":1365574,"ip_address":"","ucode":"B369B09DAF8D20","user_header":"https://static001.geekbang.org/account/avatar/00/14/d6/46/5eb5261b.jpg","comment_is_top":false,"comment_ctime":1646049824,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646049824","product_id":100026001,"comment_content":"这节主要学习到了总成本的估算方法——取决于最终的使用方法。","like_count":0},{"had_liked":false,"id":318206,"user_name":"tk103331","can_delete":false,"product_type":"c1","uid":1060819,"ip_address":"","ucode":"221F935D7AF3BB","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/d3/d97c5993.jpg","comment_is_top":false,"comment_ctime":1635207573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635207573","product_id":100026001,"comment_content":"看过奔腾年代，里面的人是真的牛","like_count":0},{"had_liked":false,"id":311332,"user_name":"Geek_f4fb8b","can_delete":false,"product_type":"c1","uid":2756819,"ip_address":"","ucode":"32114B90BF7060","user_header":"","comment_is_top":false,"comment_ctime":1631175723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631175723","product_id":100026001,"comment_content":"华为 NPU","like_count":0},{"had_liked":false,"id":299793,"user_name":"Yongtao","can_delete":false,"product_type":"c1","uid":2324603,"ip_address":"","ucode":"248BE5661D6532","user_header":"https://static001.geekbang.org/account/avatar/00/23/78/7b/09defb8d.jpg","comment_is_top":false,"comment_ctime":1624863136,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1624863136","product_id":100026001,"comment_content":"希姆计算在今年的RISC-V中国峰会上，展示了一款基于RISC-V的深度学习推理加速器。这个应该也算是ASIC吧？","like_count":0,"discussions":[{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412684,"discussion_content":"量产后就算","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636253755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":255939,"user_name":"风","can_delete":false,"product_type":"c1","uid":1077538,"ip_address":"","ucode":"104638BF19B048","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/22/b8c596b6.jpg","comment_is_top":false,"comment_ctime":1603462050,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1603462050","product_id":100026001,"comment_content":"我其实挺关心一块小小的cpu是如何把20亿个晶体管组合在一起的，而且还要有电路，如何实现的呢？","like_count":0,"discussions":[{"author":{"id":1939316,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/97/74/a933d664.jpg","nickname":"莜戏","note":"","ucode":"C3488A2BB44359","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376008,"discussion_content":"这就是传说中的纳米级 &#34;光刻&#34; 了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621925874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1319117,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/cd/c1838842.jpg","nickname":"RebeccaZzz","note":"","ucode":"95E3496A0A0CC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537350,"discussion_content":"去研究半导体物理吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639040866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412686,"discussion_content":"这是制造恭喜了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636253886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208978,"user_name":"hshayq","can_delete":false,"product_type":"c1","uid":1237880,"ip_address":"","ucode":"F5435E14BCCD25","user_header":"https://static001.geekbang.org/account/avatar/00/12/e3/78/3321053c.jpg","comment_is_top":false,"comment_ctime":1587477248,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587477248","product_id":100026001,"comment_content":"对硬件原理不是很懂，权当了解，开阔思路","like_count":0},{"had_liked":false,"id":182312,"user_name":"三件事","can_delete":false,"product_type":"c1","uid":1055819,"ip_address":"","ucode":"BCC867C8961A24","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/4b/2e5df06f.jpg","comment_is_top":false,"comment_ctime":1582767294,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1582767294","product_id":100026001,"comment_content":"最近几章感觉有点抽象，不知道怎么学了。是不是因为偏硬件的原因？那这些知识是了解一下就可以，还是要掌握到什么程度？","like_count":0,"discussions":[{"author":{"id":2837328,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/4b/50/fae00aff.jpg","nickname":"HollyWong","note":"","ucode":"03A66A2BCC0A58","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412688,"discussion_content":"看你干什么的，如果不是做IC设计，可跳过，知道各种处理器设计生产需要这些流程就可以，不需要知道细节。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636254037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172871,"user_name":"Salina喜欢计算机","can_delete":false,"product_type":"c1","uid":1374667,"ip_address":"","ucode":"90EDC4654AABF4","user_header":"https://static001.geekbang.org/account/avatar/00/14/f9/cb/26889909.jpg","comment_is_top":false,"comment_ctime":1579343652,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579343652","product_id":100026001,"comment_content":"写的真好！感谢","like_count":1},{"had_liked":false,"id":111753,"user_name":"LDxy","can_delete":false,"product_type":"c1","uid":1188710,"ip_address":"","ucode":"956432CE7B7761","user_header":"https://static001.geekbang.org/account/avatar/00/12/23/66/413c0bb5.jpg","comment_is_top":false,"comment_ctime":1562594157,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562594157","product_id":100026001,"comment_content":"又回忆起了大学时的FPGA课程","like_count":1}]}