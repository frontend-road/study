{"id":85350,"title":"13 | Go语言的函数","content":"<h1>课件及源代码地址</h1><p><a href=\"https://gitee.com/geektime-geekbang/go_learning\">https://gitee.com/geektime-geekbang/go_learning</a></p><h2>书目推荐</h2><p><a href=\"time://mall?url=https%3A%2F%2Fh5.youzan.com%2Fv2%2Fgoods%2F1ycmk3uob0ryw\">《计算机程序的构造和解释》</a></p>","comments":[{"had_liked":false,"id":90876,"user_name":"熊大棒@KONAKONA","can_delete":false,"product_type":"c3","uid":1023346,"ip_address":"","ucode":"A40F961BEB766B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9d/72/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1556702633,"is_pvip":false,"replies":[{"id":32616,"content":"放轻松，其实就是函数是可以作为参数和返回值的。","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1556760565,"ip_address":"","comment_id":90876,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"PHPer表示，看GO的这个func a(inner func(op int) int ) func (op int)需要速效救心丸……","like_count":12,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448703,"discussion_content":"放轻松，其实就是函数是可以作为参数和返回值的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556760565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3184152,"avatar":"https://static001.geekbang.org/account/avatar/00/30/96/18/67592af2.jpg","nickname":"安然。","note":"","ucode":"3781C87F9ACF59","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595884,"discussion_content":"PHPer看哭了。。。完全没理解啥意思。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670429899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1581375,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PXT6vnzzI60Pkgh6bTNr9Q3S0OoYvyUgYupqQTVPs8A5z7VEf0ea8ZvCCzBvj5U68PaF5DPLibfUSENfZt0jLPA/132","nickname":"Geek_jychen","note":"","ucode":"183409DA65485F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564530,"discussion_content":"php看的话确实有点吃力， Java的话看这个就还好， lamda","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650269475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2732243,"avatar":"https://static001.geekbang.org/account/avatar/00/29/b0/d3/200e82ff.jpg","nickname":"功夫熊猫","note":"","ucode":"D124F4FA4E816F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388779,"discussion_content":"C语言的指针在配合起来不直接裂开","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628950827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2266546,"avatar":"","nickname":"Geek_9524a1","note":"","ucode":"6DF5DE13FCC908","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381983,"discussion_content":"PHPer表示，这就相当于PHP的闭包。function mock(\\Closure callable)  { return function(){}; }","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625356773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1055624,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1b/88/ac69f57a.jpg","nickname":"磉盘","note":"","ucode":"1C245991F30A73","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":264131,"discussion_content":"看看函数编程范式，js的学这个还可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589290679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76327,"user_name":"Jason","can_delete":false,"product_type":"c3","uid":1217554,"ip_address":"","ucode":"C5A540BC5A60B9","user_header":"https://static001.geekbang.org/account/avatar/00/12/94/12/15558f28.jpg","comment_is_top":false,"comment_ctime":1552572955,"is_pvip":false,"replies":[{"id":27947,"content":"是的。其实这是Go对函数式编程的支持","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1552652308,"ip_address":"","comment_id":76327,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"老师，go函数以函数作为参数和作为返回值，是否类似于c++里传递了函数指针，通过包装将原本单一功能的函数提供额外的能力","like_count":3,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443256,"discussion_content":"是的。其实这是Go对函数式编程的支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552652308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98239,"user_name":"cyper","can_delete":false,"product_type":"c3","uid":1250672,"ip_address":"","ucode":"78A5CF5B4C0737","user_header":"https://static001.geekbang.org/account/avatar/00/13/15/70/a709107a.jpg","comment_is_top":false,"comment_ctime":1558939929,"is_pvip":false,"replies":[{"id":35179,"content":"这是因为这里是伪随机数，你可以在前面加上下一行\nrand.Seed(time.Now().UnixNano())","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1558966962,"ip_address":"","comment_id":98239,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"和浪迹天涯的问题一样，每次运行都打印1，7，一点不随机。网上说想每次不一样得先后调用rand.NewSource(), rand.New()等方法。😯","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451611,"discussion_content":"这是因为这里是伪随机数，你可以在前面加上下一行\nrand.Seed(time.Now().UnixNano())","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558966962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84598,"user_name":"库博","can_delete":false,"product_type":"c3","uid":1221604,"ip_address":"","ucode":"0D5DD558C9EB25","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/e4/50266292.jpg","comment_is_top":false,"comment_ctime":1554882789,"is_pvip":false,"replies":[{"id":31659,"content":"你可以将定义做的适当灵活些，如将入参类型定义为interface｛｝，多个参数可以通过结构传入","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1555813941,"ip_address":"","comment_id":84598,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"老师好，看完这节对函数式编程有了一定的理解，对于func timespend(inner func(op1 int) int) func(op2 int) int这个方法，这个方法虽然有了一定的复用性，但是也只能用到只有1个参数为int、只有1个返回值也为int的情况，如果参数或返回值发生了变化，那么这个方法将不再适用，得重写另一个方法，请问能实现忽略方法的参数和返回值去进行复用吗？","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446395,"discussion_content":"你可以将定义做的适当灵活些，如将入参类型定义为interface｛｝，多个参数可以通过结构传入","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555813941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79760,"user_name":"浪迹天涯","can_delete":false,"product_type":"c3","uid":1473437,"ip_address":"","ucode":"F331CFE4A4D056","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKxvOIEwZaSSR1S2JicuhMtQw7ecGicH13Cib1nWcxy5FgF05246o6WTRUarEISEjm7IRnUBa4KKqMiaw/132","comment_is_top":false,"comment_ctime":1553541952,"is_pvip":false,"replies":[{"id":29194,"content":"可以把完整的代码贴出来吗？","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1553605637,"ip_address":"","comment_id":79760,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"rand.Intn(10)最终的每次执行都是相同的值(我这里是1),如果改为rand.Intn(20)每次执行都返回11,为什么不是随机的呢?","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444611,"discussion_content":"可以把完整的代码贴出来吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553605637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2075177,"avatar":"","nickname":"Geek_Lydia","note":"","ucode":"E45E96348B2DF0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292981,"discussion_content":"其实这个是因为使用了统一的Seed，rand.Seed(seed int64) 调用一下，使用时间戳","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1595402665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"奕","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":184335,"discussion_content":"我的也是一样，每次执行的值都是相同的值，你找到原因了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582553149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75446,"user_name":"天津小度","can_delete":false,"product_type":"c3","uid":1068885,"ip_address":"","ucode":"B987C4ECBA095E","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/55/f3462db4.jpg","comment_is_top":false,"comment_ctime":1552398961,"is_pvip":false,"replies":[{"id":27946,"content":"函数式编程涉及的知识很多，有机会我们做个专题来讲","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1552652168,"ip_address":"","comment_id":75446,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"希望例子能够更多一些，也希望穿插讲一讲函数式编程的思维模式","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442897,"discussion_content":"函数式编程涉及的知识很多，有机会我们做个专题来讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552652168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158926,"user_name":"WING","can_delete":false,"product_type":"c3","uid":1485200,"ip_address":"","ucode":"E4723BA4027407","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IdElofI20lsCUm1NIQPSpYFzAGLbLs41SL324FkmTb0icqnRJicW6mqX4iag1BQUSNtc7BtKJ2fEUYwU4rN47vEsQ/132","comment_is_top":false,"comment_ctime":1575502767,"is_pvip":false,"replies":[{"id":60868,"content":"👍","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1575547778,"ip_address":"","comment_id":158926,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"老师的一句装饰者模式，让我豁然开朗。后面那三行代码也可以一行调用：timeSpent(slowFn)(10)","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476893,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575547778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153085,"user_name":"哈哈贝贝","can_delete":false,"product_type":"c3","uid":1169365,"ip_address":"","ucode":"78F8EBDFAD0C6B","user_header":"https://static001.geekbang.org/account/avatar/00/11/d7/d5/f489acba.jpg","comment_is_top":false,"comment_ctime":1574155166,"is_pvip":false,"replies":[{"id":59309,"content":"是的。","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1574482035,"ip_address":"","comment_id":153085,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"假如我传入的函数返回值不是int，这个计算时间的方法就没用了吧？","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475036,"discussion_content":"是的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574482035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129051,"user_name":"Hao","can_delete":false,"product_type":"c3","uid":1644394,"ip_address":"","ucode":"95B9D62AA86766","user_header":"https://static001.geekbang.org/account/avatar/00/19/17/6a/fc76fa23.jpg","comment_is_top":false,"comment_ctime":1567035709,"is_pvip":false,"replies":[{"id":48327,"content":"please，try it. You would get the answer;)","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1567171800,"ip_address":"","comment_id":129051,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"May I define the function like the below by removing &quot;op&quot;?\n\nfunc myfunc(inner func(int) int) func(int) int {\n}","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465245,"discussion_content":"please，try it. You would get the answer;)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567171800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1292703,"avatar":"https://static001.geekbang.org/account/avatar/00/13/b9/9f/bd2b4b81.jpg","nickname":"Fuxixixi","note":"","ucode":"46228E03988ED9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574785,"discussion_content":"Are&#39;nt you Chinese?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654335404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85169,"user_name":"大名府卢员外","can_delete":false,"product_type":"c3","uid":1480941,"ip_address":"","ucode":"A2EBEF5ADCD0F9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ia5Tiav3icxKhgPY3cticZSDSib1crqqlfRxlckDWOtdAWePXR3hkANUsfIgO2RZgnEumsRAwDesy6UjtQthibeGIOTQ/132","comment_is_top":false,"comment_ctime":1554993426,"is_pvip":true,"replies":[{"id":30617,"content":"你的文件名是以_test结尾的吗？","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1555049220,"ip_address":"","comment_id":85169,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"老师您好，这次函数包装的练习，我的单侧没有run test的功能，您的是怎么调用出来的呢？\n一直提示如下：\nexported function TestGun should have comment or be unexported\ncode：\nfunc TestGun(t *testing.T) {\n\tnewGun := toolBoostGun(ju)\n\tt.Log(newGun(10))\n}\n辛苦老师解答，困惑许久。","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446580,"discussion_content":"你的文件名是以_test结尾的吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555049220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76349,"user_name":"Flygar","can_delete":false,"product_type":"c3","uid":1202817,"ip_address":"","ucode":"9C3A47125FBDEE","user_header":"https://static001.geekbang.org/account/avatar/00/12/5a/81/8cb542f2.jpg","comment_is_top":false,"comment_ctime":1552574687,"is_pvip":false,"replies":[{"id":27940,"content":"很赞的反馈.你的留言可以帮助很多同学！","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1552651726,"ip_address":"","comment_id":76349,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"编辑器我觉得还是用Jetbrains家的GoLand舒服点，函数传值时都会显示是用的是哪个函数的形参。对新手帮助很大,加深理解。\n\nfunc TestFunc(t *testing.T) {\n\ttsSF := timespend(slowFunc) &#47;&#47; 返回一个新的函数\n\tfmt.Println(tsSF(222)) &#47;&#47; op2: 222\n\tt.Log(timespend(slowFunc)(222)) &#47;&#47; op2: 222\n\n}\n\nfunc slowFunc(op int) int {\n\ttime.Sleep(time.Second * 2)\n\treturn op\n}\n\nfunc timespend(inner func(op1 int) int) func(op2 int) int {\n\tfmt.Println(inner(111)) &#47;&#47; op1: 111\n\treturn func(op3 int) int {\n\t\tstart := time.Now()\n\t\tret := inner(op3)\n\t\tfmt.Println(&quot;time spent:&quot;, time.Since(start).Seconds())\n\t\treturn ret\n\t}\n}","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443269,"discussion_content":"很赞的反馈.你的留言可以帮助很多同学！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552651726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267496,"user_name":"云仔糕","can_delete":false,"product_type":"c3","uid":1807330,"ip_address":"","ucode":"858DD733F1D31E","user_header":"https://static001.geekbang.org/account/avatar/00/1b/93/e2/2044bafe.jpg","comment_is_top":false,"comment_ctime":1607771063,"is_pvip":false,"replies":[{"id":97200,"content":"inner在这里是参数名","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1607857445,"ip_address":"","comment_id":267496,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"老师，inner func(op int) int ...其中的inner也是go语言一种类型么？谢谢","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511657,"discussion_content":"inner在这里是参数名","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607857445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181508,"user_name":"奕","can_delete":false,"product_type":"c3","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1582553127,"is_pvip":false,"replies":[{"id":71766,"content":"这是由于rand是一种伪随机数，你可以通过设定不同seed的方法来解决这个问题\n\nfunc returnMultiValues() (int, int) {\n\trand.Seed(time.Now().UTC().UnixNano())\n\treturn rand.Intn(10), rand.Intn(20)\n}","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1583675318,"ip_address":"","comment_id":181508,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"func returnMultiValues() (int, int) {\n\treturn rand.Intn(10), rand.Intn(20)\n}\n\n对于这个函数，每次返回的随机值都是一样的，这个随机不随机啊，这是有什么没考虑到吗？","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485017,"discussion_content":"这是由于rand是一种伪随机数，你可以通过设定不同seed的方法来解决这个问题\n\nfunc returnMultiValues() (int, int) {\n\trand.Seed(time.Now().UTC().UnixNano())\n\treturn rand.Intn(10), rand.Intn(20)\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583675318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123018,"user_name":"Geek_338030","can_delete":false,"product_type":"c3","uid":1614014,"ip_address":"","ucode":"6F2ACB3C528BAA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1ZcgbSZ1Q0eARic4sFq9PRO0rT55MAYUAcBVNK3dE6ficOQViblBlzUTnMJyK2bZbU3IsewnDxKD5Wtrq01DeHnWQ/132","comment_is_top":false,"comment_ctime":1565592528,"is_pvip":false,"replies":[{"id":45469,"content":"这节主要是讲functional programming，函数可以作为返回值和参数 。 其中：tsSF是个函数，如下\nfunc(n int) int {\n\t\tstart := time.Now()\n\t\tret := inner(n)\n\t\tfmt.Println(&quot;time spent:&quot;, time.Since(start).Seconds())\n\t\treturn ret\n\t}\n\n如果你还是不是特别明白，推荐你看看我讲座中推荐的书籍关于functional programming的。","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1565790619,"ip_address":"","comment_id":123018,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"这次课讲的太短了，没看懂整个代码，代码里的return func(n int) int 这个对应的是哪个呢？传入参数n打印了下，是下面tsSF（10）里的这个10，可是这个10是怎么传入函数的，怎么就跟n int对应上了呢？还有就是\ttsSF := timeSpent(slowFun) 这一行也是没有看懂啥意思。","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462499,"discussion_content":"这节主要是讲functional programming，函数可以作为返回值和参数 。 其中：tsSF是个函数，如下\nfunc(n int) int {\n\t\tstart := time.Now()\n\t\tret := inner(n)\n\t\tfmt.Println(&amp;quot;time spent:&amp;quot;, time.Since(start).Seconds())\n\t\treturn ret\n\t}\n\n如果你还是不是特别明白，推荐你看看我讲座中推荐的书籍关于functional programming的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565790619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89558,"user_name":"流风之回雪","can_delete":false,"product_type":"c3","uid":1202376,"ip_address":"","ucode":"BDB41EC122BF8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/c8/8824c9b1.jpg","comment_is_top":false,"comment_ctime":1556204918,"is_pvip":false,"replies":[{"id":32304,"content":"inner不是Go内置的函数，而是一个自定义函数作为参数传入","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1556438880,"ip_address":"","comment_id":89558,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"老师您好！请问 ret := inner(n) 中的 inner 是什么意思啊?是一个内置函数吗？","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448172,"discussion_content":"inner不是Go内置的函数，而是一个自定义函数作为参数传入","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556438880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1807330,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/93/e2/2044bafe.jpg","nickname":"云仔糕","note":"","ucode":"858DD733F1D31E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334221,"discussion_content":"inner是自定义函数的方法名么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607771160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101575,"user_name":"杨宇铎(duo)","can_delete":false,"product_type":"c3","uid":1309873,"ip_address":"","ucode":"7694E8163AFF78","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/b1/e381bc33.jpg","comment_is_top":false,"comment_ctime":1559874524,"is_pvip":false,"replies":null,"discussion_count":5,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"函数的输入输出参数类型都没讲清楚，就结束了，","like_count":24,"discussions":[{"author":{"id":1811277,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a3/4d/59390ba9.jpg","nickname":"排骨","note":"","ucode":"A413CF46211E1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":597915,"discussion_content":"学过C#的委托，感觉一样的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1672319202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1189663,"avatar":"https://static001.geekbang.org/account/avatar/00/12/27/1f/ee4bdace.jpg","nickname":"七月上","note":"","ucode":"0908AE5D2F4D61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553879,"discussion_content":"确实","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646124742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1429336,"avatar":"https://static001.geekbang.org/account/avatar/00/15/cf/58/dabb0f73.jpg","nickname":"Super Ollie","note":"","ucode":"4F30DE41673C97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405652,"discussion_content":"这个课不应该叫go语言入门，应该叫《讲少量go基础的时候顺便炫技》，希望极客时间能出个退款模式！作为入门课程，难道不是应让让学生先学会基础语法并且能写代码吗？函数讲了寥寥几句直接跳到了函数编程，这真的适合小白入门吗？？？\n顺便推荐一本书《go语言圣经》，我是靠这本书入门的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634612980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2834523,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/gC0ujfu46rHmBPJDQrbafIhFfjFeTehQehKw3DpxwGSUnlfy5k6qWbKN9gCHSwF2uhIWSbVfZbo790EpNKleKA/132","nickname":"funtrin","note":"","ucode":"6C73FE32EDF0F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1429336,"avatar":"https://static001.geekbang.org/account/avatar/00/15/cf/58/dabb0f73.jpg","nickname":"Super Ollie","note":"","ucode":"4F30DE41673C97","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545291,"discussion_content":"其实老师一直在强调这是面向有经验的程序员的，但是极客时间在宣传的时候，确实没说清楚。。。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1641894999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":405652,"ip_address":"","group_id":0},"score":545291,"extra":""}]},{"author":{"id":2146748,"avatar":"","nickname":"Fool_one","note":"","ucode":"3B0AC611B875E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400093,"discussion_content":"我也觉得是","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633163413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100901,"user_name":"Eden","can_delete":false,"product_type":"c3","uid":1197733,"ip_address":"","ucode":"BE0AD731E5EF5E","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/a5/51449de6.jpg","comment_is_top":false,"comment_ctime":1559681674,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"初学语言，用中文做了一下解释，有利于理解这个柯里化一样的东西\n```\n&#47;&#47; 延时一秒后返回入参\nfunc SlowFun(op int) int {\n\ttime.Sleep(time.Second * 1)\n\treturn op\n}\n\n&#47;&#47; 定义一个函数timeSpent帮助记录入参函数的执行耗时\n&#47;&#47;                   入参是一个函数,               返回也是一个函数\nfunc timeSpent(入参函数名 func(op int) int) func(op int) int {\n\treturn func(返回函数的参数 int) int {\n\t\tstart := time.Now()\n\t\tret := 入参函数名(返回函数的参数) &#47;&#47; 执行有入参的该函数\n\t\tfmt.Println(&quot;该入参函数执行结果：&quot;, ret)\n\t\tfmt.Println(&quot;时间损耗:&quot;, time.Since(start).Seconds())\n\t\treturn ret\n\t}\n}\n\nfunc TestFn(t *testing.T) {\n\t&#47;&#47; 给timeSpent入参一个函数, 我们返回一个函数, 这个函数执行这个入参函数并打印该的执行时间\n\t&#47;&#47; tsSF 得到的就是返回的函数，我们给这个函数提供一个 「返回函数的参数」-&gt; 10\n\ttsSF := timeSpent(SlowFun)\n\t&#47;&#47; 打印执行\n\tt.Log(tsSF(10))\n}\n```","like_count":11,"discussions":[{"author":{"id":1014570,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/2a/73495eee.jpg","nickname":"北纬32°","note":"","ucode":"66D21E24CBF468","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270768,"discussion_content":"注释💯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590051244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206496,"user_name":"木头发芽","can_delete":false,"product_type":"c3","uid":1419723,"ip_address":"","ucode":"657B381C5DA963","user_header":"https://static001.geekbang.org/account/avatar/00/15/a9/cb/a431bde5.jpg","comment_is_top":false,"comment_ctime":1586870195,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"mark， slice之所以会被误解为传引用，因为函数参数传值的时候切片的结构体里的有一个指向连续内存地址的一个指针，这个指针的值被复制后还是指向那块内存地址，所以改切片值就会影响到原有切片","like_count":5,"discussions":[{"author":{"id":1995515,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/72/fb/e918f97f.jpg","nickname":"coder67","note":"","ucode":"21EB2FAD7952D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577442,"discussion_content":"就以看做传指针","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656120409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2925584,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/a4/10/af92dd38.jpg","nickname":"Zhao Li","note":"","ucode":"78B7494B4C0830","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554445,"discussion_content":"浅拷贝","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646382407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133728,"user_name":"jimmy","can_delete":false,"product_type":"c3","uid":1199091,"ip_address":"","ucode":"9B93DCAB317572","user_header":"https://static001.geekbang.org/account/avatar/00/12/4b/f3/8b9df836.jpg","comment_is_top":false,"comment_ctime":1568642255,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"老师讲的需要再深入一些","like_count":5},{"had_liked":false,"id":206094,"user_name":"Alvin-L","can_delete":false,"product_type":"c3","uid":1603052,"ip_address":"","ucode":"5AC96AAB75B720","user_header":"https://static001.geekbang.org/account/avatar/00/18/75/ec/c60b29f5.jpg","comment_is_top":false,"comment_ctime":1586786225,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"package fn_test\n\nimport (\n\t&quot;fmt&quot;\n\t&quot;math&#47;rand&quot;\n\t&quot;testing&quot;\n\t&quot;time&quot;\n)\n\n&#47;&#47;多个返回值\nfunc returnMultiValues2() (int, int) {\n\treturn rand.Intn(10), rand.Intn(20)\n}\n\n&#47;&#47;装饰者模式，将函数inner作为参数传入，然后在inner前后做一些事,\n&#47;&#47;而返回值也是一个函数，这个返回值函数在外部(TestFn2函数里)可以赋值给一个变量tsSF\n&#47;&#47;tsSF就可以当函数使用，通过外部调用tsSF函数，将参数10(tsSF(10))传入进\n&#47;&#47;timeSpent2的返回值代码中return func(n int) int {...}\n&#47;&#47;外部调用tsSF函数，相当于timeSpent2内部调用func(n int) int {...}\n&#47;&#47;timeSpent2内部调用func，就相当于可以在调用inner前加一点东西，之后又加一点东西，而不必改动inner\n&#47;&#47;即，外部调用tsSF(10)，而实际是调用slowFun2(10)+装饰代码\nfunc timeSpent2(inner func(op int) int) func(op int) int {\n\treturn func(n int) int {\n\t\tstart := time.Now()\n\t\tfmt.Println(&quot;time start:&quot;, start)\n\t\tret := inner(n)\n\t\t&#47;&#47; fmt.Println(&quot;time spent:&quot;, time.Since(start).Seconds())\n\t\tend := time.Now()\n\t\tfmt.Println(&quot;time end:&quot;, end)\n\t\treturn ret\n\t}\n}\n\nfunc slowFun2(op int) int {\n\ttime.Sleep(time.Second * 1)\n\treturn op\n}\n\nfunc TestFn2(t *testing.T) {\n\ta, _ := returnMultiValues2()\n\tt.Log(&quot;a =&quot;, a)\n\ttsSF := timeSpent2(slowFun2)\n\tt.Log(tsSF(10))\n}\n","like_count":4,"discussions":[{"author":{"id":1152178,"avatar":"https://static001.geekbang.org/account/avatar/00/11/94/b2/6d587bb1.jpg","nickname":"久违的","note":"","ucode":"34F703D88A643D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561184,"discussion_content":"//外部调用tsSF函数，相当于timeSpent2内部调用func(n int) int {...}\n//timeSpent2内部调用func，就相当于可以在调用inner前加一点东西，之后又加一点东西，而不必改动inner\n//即，外部调用tsSF(10)，而实际是调用slowFun2(10)+装饰代码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649573156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346761,"user_name":"PHP菜鸟","can_delete":false,"product_type":"c3","uid":1899397,"ip_address":"","ucode":"77B7DC81B5AA1F","user_header":"https://static001.geekbang.org/account/avatar/00/1c/fb/85/f3fd1724.jpg","comment_is_top":false,"comment_ctime":1653404354,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"没讲闭包。。","like_count":1},{"had_liked":false,"id":220684,"user_name":"YanZu","can_delete":false,"product_type":"c3","uid":1223076,"ip_address":"","ucode":"B3954130EF8AD3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a9/a4/9e0834a8.jpg","comment_is_top":false,"comment_ctime":1590308104,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"用中文做了一下解释，有利于理解这个柯里化一样的东西\n```\n&#47;&#47; 延时一秒后返回入参\nfunc SlowFun(op int) int {\ntime.Sleep(time.Second * 1)\nreturn op\n}\n\n&#47;&#47; 定义一个函数timeSpent帮助记录入参函数的执行耗时\n&#47;&#47; 入参是一个函数, 返回也是一个函数\nfunc timeSpent(入参函数名 func(op int) int) func(op int) int {\nreturn func(返回函数的参数 int) int {\nstart := time.Now()\nret := 入参函数名(返回函数的参数) &#47;&#47; 执行有入参的该函数\nfmt.Println(&quot;该入参函数执行结果：&quot;, ret)\nfmt.Println(&quot;时间损耗:&quot;, time.Since(start).Seconds())\nreturn ret\n}\n}\n\nfunc TestFn(t *testing.T) {\n&#47;&#47; 给timeSpent入参一个函数, 我们返回一个函数, 这个函数执行这个入参函数并打印该的执行时间\n&#47;&#47; tsSF 得到的就是返回的函数，我们给这个函数提供一个 「返回函数的参数」-&gt; 10\ntsSF := timeSpent(SlowFun)\n&#47;&#47; 打印执行\nt.Log(tsSF(10))\n}\n```","like_count":1},{"had_liked":false,"id":394680,"user_name":"郭泽鑫🐤","can_delete":false,"product_type":"c3","uid":1890825,"ip_address":"广东","ucode":"40B9981EEC524F","user_header":"https://static001.geekbang.org/account/avatar/00/1c/da/09/5fc3b526.jpg","comment_is_top":false,"comment_ctime":1727580891,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"补上函数名的获取\nfunc timeSpent(f func(int) int) func(int) int {\n\treturn func(n int) int {\n\t\tstart := time.Now()\n\t\t&#47;&#47; 执行原方法\n\t\tret := f(n)\n\t\t&#47;&#47; 获取函数名\n\t\tfn := reflect.ValueOf(f).Pointer()\n\t\t&#47;&#47; 打印耗时日志\n\t\tfmt.Printf(&quot;func: %s, time spent: %f&quot;, runtime.FuncForPC(fn).Name(), time.Since(start).Seconds())\n\t\t&#47;&#47; 返回原方法结果\n\t\treturn ret\n\t}\n}","like_count":0},{"had_liked":false,"id":394679,"user_name":"郭泽鑫🐤","can_delete":false,"product_type":"c3","uid":1890825,"ip_address":"广东","ucode":"40B9981EEC524F","user_header":"https://static001.geekbang.org/account/avatar/00/1c/da/09/5fc3b526.jpg","comment_is_top":false,"comment_ctime":1727580848,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"func timeSpent(f func(int) int) func(int) int {\n\treturn func(n int) int {\n\t\tstart := time.Now()\n\t\t&#47;&#47; 执行原方法\n\t\tret := f(n)\n\t\t&#47;&#47; 获取函数名\n\t\tfn := reflect.ValueOf(f).Pointer()\n\t\t&#47;&#47; 打印耗时日志\n\t\tfmt.Printf(&quot;func: %s, time spent: %f&quot;, runtime.FuncForPC(fn).Name(), time.Since(start).Seconds())\n\t\t&#47;&#47; 返回原方法结果\n\t\treturn ret\n\t}\n}","like_count":0},{"had_liked":false,"id":391771,"user_name":"阿白","can_delete":false,"product_type":"c3","uid":2747949,"ip_address":"上海","ucode":"AB4C1151CE21AF","user_header":"https://static001.geekbang.org/account/avatar/00/29/ee/2d/6c16642a.jpg","comment_is_top":false,"comment_ctime":1719052386,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"传值,传引用那里,slice传递值, 相当于是java里面的浅拷贝","like_count":0},{"had_liked":false,"id":382180,"user_name":"小琥珀007","can_delete":false,"product_type":"c3","uid":2765420,"ip_address":"美国","ucode":"F9F54542BBDD78","user_header":"https://static001.geekbang.org/account/avatar/00/2a/32/6c/463bf6ed.jpg","comment_is_top":false,"comment_ctime":1696841348,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"感觉和js的函数几乎一样 函数套函数就是HOC的概念","like_count":0},{"had_liked":false,"id":373315,"user_name":"Asun","can_delete":false,"product_type":"c3","uid":2995636,"ip_address":"广东","ucode":"0A574841B63BEE","user_header":"https://static001.geekbang.org/account/avatar/00/2d/b5/b4/6798c7b1.jpg","comment_is_top":false,"comment_ctime":1682388092,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"例子直接定义一个inner函数 传slowfunc进去就好了 为什么inner外面还要包一层函数 不多余吗？","like_count":0},{"had_liked":false,"id":353499,"user_name":"right-chen","can_delete":false,"product_type":"c3","uid":1435172,"ip_address":"北京","ucode":"E0E940E80E7A2D","user_header":"https://static001.geekbang.org/account/avatar/00/15/e6/24/30806a88.jpg","comment_is_top":false,"comment_ctime":1659500573,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"视频中，老师对方法传值又原样返回，感觉参数的作用不大。所以写了一个无参数无返回值的demo：\n\n\n&#47;**\n函数作为返回值\n*&#47;\nfunc CountTimeSpent(inner func()) func() {\n\treturn func() {\n\t\tstart := time.Now()\n\t\tinner()\n\t\tfmt.Println(&quot;程序执行时间：&quot;, time.Since(start).Seconds())\n\n\t}\n}\n\nfunc SlowFun() {\n\tfmt.Println(time.Duration(2) * time.Second)\n}\n\nfunc TestFun(t *testing.T) {\n\tnickname_fun := CountTimeSpent(SlowFun)\n\tnickname_fun()\n}","like_count":0},{"had_liked":false,"id":342899,"user_name":"Geek_f289b5","can_delete":false,"product_type":"c3","uid":2981035,"ip_address":"","ucode":"615F1A8B2DE719","user_header":"","comment_is_top":false,"comment_ctime":1650526580,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"随机数，除了设置rand.Seed，还需要检查缓存是否关掉，不然每次都是相同的值","like_count":0},{"had_liked":false,"id":338351,"user_name":"微笑","can_delete":false,"product_type":"c3","uid":2086675,"ip_address":"","ucode":"70E4D426431734","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d7/13/dcf3a495.jpg","comment_is_top":false,"comment_ctime":1647434176,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"打卡一下\n\n\npackage _func\n\nimport (\n\t&quot;fmt&quot;\n\t&quot;math&#47;rand&quot;\n\t&quot;testing&quot;\n\t&quot;time&quot;\n)\n\nfunc returnMultValues() (int, int) {\n\treturn rand.Intn(100), rand.Intn(100)\n\n}\n\n&#47;&#47;实现装饰器效果，函数名（参数）返回值；此处参数和返回值都是函数\nfunc timeSpent(inner func(op int) int) func(op int) int {\n\treturn func(n int) int {\n\t\tstart := time.Now()\n\t\tret := inner(n) &#47;&#47;在原有函数的基础上添加了时间运算\n\t\tfmt.Println(&quot;time spent&quot;, time.Since(start).Seconds())\n\t\treturn ret\n\n\t}\n}\n\nfunc TestFn(t *testing.T) {\n\ta, b := returnMultValues()\n\tt.Log(a, b)\n\t&#47;&#47;tsSF := timeSpent(slowFun)\t&#47;&#47;将函数作为变量的值\n\t&#47;&#47;t.Log(tsSF(3))\n\t&#47;&#47;slowFun(3)\t&#47;&#47;直接调用函数\n\ttimeSpent(slowFun)(3) &#47;&#47;使用装饰器调用函数，此处使用装饰时改变了调用方法\n\t&#47;&#47;t.Log(timeSpent(slowFun)(3))\n}\n\n&#47;&#47;延迟指定时间后返回延迟的时间值\nfunc slowFun(op int) int {\n\ttime.Sleep(time.Second * time.Duration(op)) &#47;&#47;此处注意时间格式的只能与时间格式的进行运算\n\treturn op\n}\n","like_count":0},{"had_liked":false,"id":335406,"user_name":"Return12321","can_delete":false,"product_type":"c3","uid":1134694,"ip_address":"","ucode":"F7A3C5ED02E1D9","user_header":"https://static001.geekbang.org/account/avatar/00/11/50/66/047ee060.jpg","comment_is_top":false,"comment_ctime":1645507549,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"函数中参数是函数、返回值也是函数的，和python的注解很像啊！","like_count":0},{"had_liked":false,"id":330973,"user_name":"Gary","can_delete":false,"product_type":"c3","uid":1218372,"ip_address":"","ucode":"12265D6A578113","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/44/3929e620.jpg","comment_is_top":false,"comment_ctime":1642332112,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"为什么timespent函数要返回一个函数，不能直接返回运行时间吗，返回一个整型表示消费时间，想弄明白返回一个函数的好处是什么？","like_count":0},{"had_liked":false,"id":323912,"user_name":"Quo fata ferunt","can_delete":false,"product_type":"c3","uid":1232575,"ip_address":"","ucode":"79ED660DD54B9D","user_header":"https://static001.geekbang.org/account/avatar/00/12/ce/bf/0756c980.jpg","comment_is_top":false,"comment_ctime":1638213818,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"有一两门门写过项目的编程语言基础，学习go顺便看看概念。其实我觉得这门课还算蛮适合我的。。。虽然课程时间不长，但是真正要deep dive没有捷径，只有读经典著作啊，老师这门课能让有语言基础的人快速上手，感觉还可以","like_count":0},{"had_liked":false,"id":314512,"user_name":"Fool_one","can_delete":false,"product_type":"c3","uid":2146748,"ip_address":"","ucode":"3B0AC611B875E5","user_header":"","comment_is_top":false,"comment_ctime":1633163804,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"10这个参数怎么和func(n int) int 中的n是对应的呢？","like_count":0,"discussions":[{"author":{"id":2587479,"avatar":"https://static001.geekbang.org/account/avatar/00/27/7b/57/e9b3d886.jpg","nickname":"阿昌","note":"","ucode":"C7AF1905B72AD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558614,"discussion_content":"n写成op也是可以的，只是一个参数名，怎么定义都可以。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648395010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299649,"user_name":"山水如初","can_delete":false,"product_type":"c3","uid":1930382,"ip_address":"","ucode":"D4BE5C836DE53D","user_header":"https://static001.geekbang.org/account/avatar/00/1d/74/8e/caa7afec.jpg","comment_is_top":false,"comment_ctime":1624781712,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"可以理解成 Python 里面的闭包或装饰器。\n将代码写成Python 的形式：\n\nfunc TimeSpend(inner func(int) int) func(int) int {\n\tf := func(n int) int {\n\t\tstart := time.Now()\n\t\tres := inner(n)\n\t\tfmt.Println(&quot;time spend: &quot;, time.Since(start).Seconds())\n\t\treturn res\n\t}\n\treturn f\n} ","like_count":0},{"had_liked":false,"id":286540,"user_name":"escray","can_delete":false,"product_type":"c3","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1617364387,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"其实每次从留言里面都能看到很不错内容，对于视频课程是一个很好的补充。\n\n就目前来看，这个课程比较适合我这种有一些编程经验，但是对于 Go 语言又完全陌生的人。完全的小白，可能觉得跨度比较大，例如函数式编程；对 Go 语言有所了解的，可能觉得前面的内容比较无趣。\n\n其实有一点好奇，Go 语言对于完全小白的新手来说，究竟算不算友好？\n\n对于那个随机函数，我加上\n\nrand.Seed(time.Now().UnixNano())\n\n之后，输出的仍然是同样的，或者说在一段时间内输出值是一样的，除非稍微修改一下代码，可能是因为缓存的缘故？\n\n找到一本《计算机程序的构造和解释》，其实这本来应该是本科时候应该看的，不知道有没有机会拜读一下。","like_count":0},{"had_liked":false,"id":266687,"user_name":"plevium","can_delete":false,"product_type":"c3","uid":1534177,"ip_address":"","ucode":"E8903123757863","user_header":"https://static001.geekbang.org/account/avatar/00/17/68/e1/c271b3ac.jpg","comment_is_top":false,"comment_ctime":1607439047,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"timeSpent 那个函数返回的函数是不是有闭包～","like_count":0},{"had_liked":false,"id":248238,"user_name":"爸玩鳖鸡","can_delete":false,"product_type":"c3","uid":1352515,"ip_address":"","ucode":"320D0404FDE1FE","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ6LU6qMyRjoicvaHQh5xhPdAIwmjZqbW8IF6LvXGkuia3fFWtapxHicnicib9OeYba6BHf408vsOiclzhw/132","comment_is_top":false,"comment_ctime":1600076377,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"为什么每次随机出来的值是一样的","like_count":0},{"had_liked":false,"id":237572,"user_name":"曾立涵","can_delete":false,"product_type":"c3","uid":1242498,"ip_address":"","ucode":"C8E9019A44FB9B","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/82/75f71508.jpg","comment_is_top":false,"comment_ctime":1595867033,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"timeSpent大概的意思就是传入一个函数，返回一个函数；\n返回的函数里{\n   &#47;&#47;增加功能1（开始计时）\n     调用传入的函数\n   &#47;&#47;增加功能2（计时停止，打印时间）\n     返回传入函数调用时返回的int值\n}\n通过tsSF的引用我们获得了传入函数的增强版，也就是增加了1，2功能的传入函数\n然后再用tsSF来使用这个船新版本的函数，也就是增加了计时功能的函数\n头一次接触函数式编程，打开了新世界\n","like_count":0},{"had_liked":false,"id":219615,"user_name":"北纬32°","can_delete":false,"product_type":"c3","uid":1014570,"ip_address":"","ucode":"66D21E24CBF468","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7b/2a/73495eee.jpg","comment_is_top":false,"comment_ctime":1590051294,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"需要消化一下函数直接的调用关系，尤其是把函数作为参数进行传递的时候","like_count":0},{"had_liked":false,"id":214217,"user_name":"张三说","can_delete":false,"product_type":"c3","uid":1065988,"ip_address":"","ucode":"F1BE933F314D6C","user_header":"https://static001.geekbang.org/account/avatar/00/10/44/04/7904829d.jpg","comment_is_top":false,"comment_ctime":1588678531,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100024001,"comment_content":"辛亏把Java8的函数式编程的新特性学得还算透彻，不然理解起来确实费力，建议老师再出点课后文章，帮大家理解这块😂，不然编程思想的转变还是挺困难的","like_count":0},{"had_liked":false,"id":177158,"user_name":"王宇","can_delete":false,"product_type":"c3","uid":1438475,"ip_address":"","ucode":"0E9BC3AD99C8E5","user_header":"https://static001.geekbang.org/account/avatar/00/15/f3/0b/4560079e.jpg","comment_is_top":false,"comment_ctime":1581305648,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100024001,"comment_content":"之前看过js的函数编程，一个意思，思想一样，还有注解的实现也对函数前置后置的行为处理","like_count":0},{"had_liked":false,"id":89697,"user_name":"kubernetes","can_delete":false,"product_type":"c3","uid":1496693,"ip_address":"","ucode":"B1BC6F1E7B3CCC","user_header":"https://static001.geekbang.org/account/avatar/00/16/d6/75/792acf22.jpg","comment_is_top":false,"comment_ctime":1556245986,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100024001,"comment_content":"&#47;**\n输入是一个函数类型，返回是一个函数类型\n\nfunc timeSpent(inner func(op int) int --&gt; 函数类型) func(op int) int --&gt; 函数类型\n\n *&#47;\nfunc timeSpent(inner func(op int) int) func(op int) int {\n\n\t&#47;&#47;返回一个函数\n\treturn func(n int) int {\n\t\tstart := time.Now()\n\t\tret := inner(n) &#47;&#47;调用传入的函数\n\n\t\tfmt.Println(&quot;time spent:&quot;, time.Since(start).Seconds())\n\t\treturn ret\n\t}\n}","like_count":0},{"had_liked":false,"id":77878,"user_name":"小先生","can_delete":false,"product_type":"c3","uid":1343518,"ip_address":"","ucode":"E4426C65296345","user_header":"https://static001.geekbang.org/account/avatar/00/14/80/1e/99d0b7a7.jpg","comment_is_top":false,"comment_ctime":1553011006,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100024001,"comment_content":"感觉函数这里能不能再细一点。或者多写几个例子","like_count":0},{"had_liked":false,"id":77329,"user_name":"Griffin","can_delete":false,"product_type":"c3","uid":1087329,"ip_address":"","ucode":"CF766B92A65261","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/61/34a0da09.jpg","comment_is_top":false,"comment_ctime":1552907750,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100024001,"comment_content":"还是Vim好。 go的插件就一个fatih&#47;vim-go。","like_count":0}]}