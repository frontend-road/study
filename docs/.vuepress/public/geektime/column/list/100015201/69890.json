{"id":69890,"title":"41 | åå­—è·¯å£ä¸Šçš„Kubernetesé»˜è®¤è°ƒåº¦å™¨","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ç£Šã€‚ä»Šå¤©æˆ‘å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼šåå­—è·¯å£ä¸Šçš„Kubernetesé»˜è®¤è°ƒåº¦å™¨ã€‚</p><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸»è¦ä¸ºä½ ä»‹ç»äº†Kubernetesé‡Œå…³äºèµ„æºæ¨¡å‹å’Œèµ„æºç®¡ç†çš„è®¾è®¡æ–¹æ³•ã€‚è€Œåœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°±æ¥ä¸ºä½ ä»‹ç»ä¸€ä¸‹Kubernetesçš„é»˜è®¤è°ƒåº¦å™¨ï¼ˆdefault schedulerï¼‰ã€‚</p><p><strong>åœ¨Kubernetesé¡¹ç›®ä¸­ï¼Œé»˜è®¤è°ƒåº¦å™¨çš„ä¸»è¦èŒè´£ï¼Œå°±æ˜¯ä¸ºä¸€ä¸ªæ–°åˆ›å»ºå‡ºæ¥çš„Podï¼Œå¯»æ‰¾ä¸€ä¸ªæœ€åˆé€‚çš„èŠ‚ç‚¹ï¼ˆNodeï¼‰ã€‚</strong></p><p>è€Œè¿™é‡Œâ€œæœ€åˆé€‚â€çš„å«ä¹‰ï¼ŒåŒ…æ‹¬ä¸¤å±‚ï¼š</p><ol>\n<li>\n<p>ä»é›†ç¾¤æ‰€æœ‰çš„èŠ‚ç‚¹ä¸­ï¼Œæ ¹æ®è°ƒåº¦ç®—æ³•æŒ‘é€‰å‡ºæ‰€æœ‰å¯ä»¥è¿è¡Œè¯¥Podçš„èŠ‚ç‚¹ï¼›</p>\n</li>\n<li>\n<p>ä»ç¬¬ä¸€æ­¥çš„ç»“æœä¸­ï¼Œå†æ ¹æ®è°ƒåº¦ç®—æ³•æŒ‘é€‰ä¸€ä¸ªæœ€ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ä½œä¸ºæœ€ç»ˆç»“æœã€‚</p>\n</li>\n</ol><p>æ‰€ä»¥åœ¨å…·ä½“çš„è°ƒåº¦æµç¨‹ä¸­ï¼Œé»˜è®¤è°ƒåº¦å™¨ä¼šé¦–å…ˆè°ƒç”¨ä¸€ç»„å«ä½œPredicateçš„è°ƒåº¦ç®—æ³•ï¼Œæ¥æ£€æŸ¥æ¯ä¸ªNodeã€‚ç„¶åï¼Œå†è°ƒç”¨ä¸€ç»„å«ä½œPriorityçš„è°ƒåº¦ç®—æ³•ï¼Œæ¥ç»™ä¸Šä¸€æ­¥å¾—åˆ°çš„ç»“æœé‡Œçš„æ¯ä¸ªNodeæ‰“åˆ†ã€‚æœ€ç»ˆçš„è°ƒåº¦ç»“æœï¼Œå°±æ˜¯å¾—åˆ†æœ€é«˜çš„é‚£ä¸ªNodeã€‚</p><p>è€Œæˆ‘åœ¨å‰é¢çš„æ–‡ç« ä¸­æ›¾ç»ä»‹ç»è¿‡ï¼Œè°ƒåº¦å™¨å¯¹ä¸€ä¸ªPodè°ƒåº¦æˆåŠŸï¼Œå®é™…ä¸Šå°±æ˜¯å°†å®ƒçš„spec.nodeNameå­—æ®µå¡«ä¸Šè°ƒåº¦ç»“æœçš„èŠ‚ç‚¹åå­—ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šè¿™é‡Œä½ å¯ä»¥å†å›é¡¾ä¸‹ç¬¬14ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/40366\">ã€Šæ·±å…¥è§£æPodå¯¹è±¡ï¼ˆä¸€ï¼‰ï¼šåŸºæœ¬æ¦‚å¿µã€‹</a>ä¸­çš„ç›¸å…³å†…å®¹ã€‚</p>\n</blockquote><!-- [[[read_end]]] --><p>åœ¨Kubernetesä¸­ï¼Œä¸Šè¿°è°ƒåº¦æœºåˆ¶çš„å·¥ä½œåŸç†ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„ä¸€å¹…ç¤ºæ„å›¾æ¥è¡¨ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/bb/53/bb95a7d4962c95d703f7c69caf53ca53.jpg?wh=1631*981\" alt=\"\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<span class=\"orange\">Kubernetesçš„è°ƒåº¦å™¨çš„æ ¸å¿ƒï¼Œå®é™…ä¸Šå°±æ˜¯ä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„æ§åˆ¶å¾ªç¯ã€‚</span></p><p>å…¶ä¸­ï¼Œ<strong>ç¬¬ä¸€ä¸ªæ§åˆ¶å¾ªç¯ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºInformer Path</strong>ã€‚å®ƒçš„ä¸»è¦ç›®çš„ï¼Œæ˜¯å¯åŠ¨ä¸€ç³»åˆ—Informerï¼Œç”¨æ¥ç›‘å¬ï¼ˆWatchï¼‰Etcdä¸­Podã€Nodeã€Serviceç­‰ä¸è°ƒåº¦ç›¸å…³çš„APIå¯¹è±¡çš„å˜åŒ–ã€‚æ¯”å¦‚ï¼Œå½“ä¸€ä¸ªå¾…è°ƒåº¦Podï¼ˆå³ï¼šå®ƒçš„nodeNameå­—æ®µæ˜¯ç©ºçš„ï¼‰è¢«åˆ›å»ºå‡ºæ¥ä¹‹åï¼Œè°ƒåº¦å™¨å°±ä¼šé€šè¿‡Pod Informerçš„Handlerï¼Œå°†è¿™ä¸ªå¾…è°ƒåº¦Podæ·»åŠ è¿›è°ƒåº¦é˜Ÿåˆ—ã€‚</p><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetesçš„è°ƒåº¦é˜Ÿåˆ—æ˜¯ä¸€ä¸ªPriorityQueueï¼ˆä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰ï¼Œå¹¶ä¸”å½“æŸäº›é›†ç¾¤ä¿¡æ¯å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œè°ƒåº¦å™¨è¿˜ä¼šå¯¹è°ƒåº¦é˜Ÿåˆ—é‡Œçš„å†…å®¹è¿›è¡Œä¸€äº›ç‰¹æ®Šæ“ä½œã€‚è¿™é‡Œçš„è®¾è®¡ï¼Œä¸»è¦æ˜¯å‡ºäºè°ƒåº¦ä¼˜å…ˆçº§å’ŒæŠ¢å çš„è€ƒè™‘ï¼Œæˆ‘ä¼šåœ¨åé¢çš„æ–‡ç« ä¸­å†è¯¦ç»†ä»‹ç»è¿™éƒ¨åˆ†å†…å®¹ã€‚</p><p>æ­¤å¤–ï¼ŒKubernetesçš„é»˜è®¤è°ƒåº¦å™¨è¿˜è¦è´Ÿè´£å¯¹è°ƒåº¦å™¨ç¼“å­˜ï¼ˆå³ï¼šscheduler cacheï¼‰è¿›è¡Œæ›´æ–°ã€‚äº‹å®ä¸Šï¼ŒKubernetes è°ƒåº¦éƒ¨åˆ†è¿›è¡Œæ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªæœ€æ ¹æœ¬åŸåˆ™ï¼Œå°±æ˜¯å°½æœ€å¤§å¯èƒ½å°†é›†ç¾¤ä¿¡æ¯CacheåŒ–ï¼Œä»¥ä¾¿ä»æ ¹æœ¬ä¸Šæé«˜Predicateå’ŒPriorityè°ƒåº¦ç®—æ³•çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>è€Œ<strong>ç¬¬äºŒä¸ªæ§åˆ¶å¾ªç¯ï¼Œæ˜¯è°ƒåº¦å™¨è´Ÿè´£Podè°ƒåº¦çš„ä¸»å¾ªç¯ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºScheduling Pathã€‚</strong></p><p>Scheduling Pathçš„ä¸»è¦é€»è¾‘ï¼Œå°±æ˜¯ä¸æ–­åœ°ä»è°ƒåº¦é˜Ÿåˆ—é‡Œå‡ºé˜Ÿä¸€ä¸ªPodã€‚ç„¶åï¼Œè°ƒç”¨Predicatesç®—æ³•è¿›è¡Œâ€œè¿‡æ»¤â€ã€‚è¿™ä¸€æ­¥â€œè¿‡æ»¤â€å¾—åˆ°çš„ä¸€ç»„Nodeï¼Œå°±æ˜¯æ‰€æœ‰å¯ä»¥è¿è¡Œè¿™ä¸ªPodçš„å®¿ä¸»æœºåˆ—è¡¨ã€‚å½“ç„¶ï¼ŒPredicatesç®—æ³•éœ€è¦çš„Nodeä¿¡æ¯ï¼Œéƒ½æ˜¯ä»Scheduler Cacheé‡Œç›´æ¥æ‹¿åˆ°çš„ï¼Œè¿™æ˜¯è°ƒåº¦å™¨ä¿è¯ç®—æ³•æ‰§è¡Œæ•ˆç‡çš„ä¸»è¦æ‰‹æ®µä¹‹ä¸€ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œè°ƒåº¦å™¨å°±ä¼šå†è°ƒç”¨Prioritiesç®—æ³•ä¸ºä¸Šè¿°åˆ—è¡¨é‡Œçš„Nodeæ‰“åˆ†ï¼Œåˆ†æ•°ä»0åˆ°10ã€‚å¾—åˆ†æœ€é«˜çš„Nodeï¼Œå°±ä¼šä½œä¸ºè¿™æ¬¡è°ƒåº¦çš„ç»“æœã€‚</p><p>è°ƒåº¦ç®—æ³•æ‰§è¡Œå®Œæˆåï¼Œè°ƒåº¦å™¨å°±éœ€è¦å°†Podå¯¹è±¡çš„nodeNameå­—æ®µçš„å€¼ï¼Œä¿®æ”¹ä¸ºä¸Šè¿°Nodeçš„åå­—ã€‚<strong>è¿™ä¸ªæ­¥éª¤åœ¨Kubernetesé‡Œé¢è¢«ç§°ä½œBindã€‚</strong></p><p>ä½†æ˜¯ï¼Œä¸ºäº†ä¸åœ¨å…³é”®è°ƒåº¦è·¯å¾„é‡Œè¿œç¨‹è®¿é—®APIServerï¼ŒKubernetesçš„é»˜è®¤è°ƒåº¦å™¨åœ¨Bindé˜¶æ®µï¼Œåªä¼šæ›´æ–°Scheduler Cacheé‡Œçš„Podå’ŒNodeçš„ä¿¡æ¯ã€‚<strong>è¿™ç§åŸºäºâ€œä¹è§‚â€å‡è®¾çš„APIå¯¹è±¡æ›´æ–°æ–¹å¼ï¼Œåœ¨Kubernetesé‡Œè¢«ç§°ä½œAssumeã€‚</strong></p><p>Assumeä¹‹åï¼Œè°ƒåº¦å™¨æ‰ä¼šåˆ›å»ºä¸€ä¸ªGoroutineæ¥å¼‚æ­¥åœ°å‘APIServerå‘èµ·æ›´æ–°Podçš„è¯·æ±‚ï¼Œæ¥çœŸæ­£å®Œæˆ Bind æ“ä½œã€‚å¦‚æœè¿™æ¬¡å¼‚æ­¥çš„Bindè¿‡ç¨‹å¤±è´¥äº†ï¼Œå…¶å®ä¹Ÿæ²¡æœ‰å¤ªå¤§å…³ç³»ï¼Œç­‰Scheduler CacheåŒæ­¥ä¹‹åä¸€åˆ‡å°±ä¼šæ¢å¤æ­£å¸¸ã€‚</p><p>å½“ç„¶ï¼Œæ­£æ˜¯ç”±äºä¸Šè¿°Kubernetesè°ƒåº¦å™¨çš„â€œä¹è§‚â€ç»‘å®šçš„è®¾è®¡ï¼Œå½“ä¸€ä¸ªæ–°çš„Podå®Œæˆè°ƒåº¦éœ€è¦åœ¨æŸä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œèµ·æ¥ä¹‹å‰ï¼Œè¯¥èŠ‚ç‚¹ä¸Šçš„kubeletè¿˜ä¼šé€šè¿‡ä¸€ä¸ªå«ä½œAdmitçš„æ“ä½œæ¥å†æ¬¡éªŒè¯è¯¥Podæ˜¯å¦ç¡®å®èƒ½å¤Ÿè¿è¡Œåœ¨è¯¥èŠ‚ç‚¹ä¸Šã€‚è¿™ä¸€æ­¥Admitæ“ä½œï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠä¸€ç»„å«ä½œGeneralPredicatesçš„ã€æœ€åŸºæœ¬çš„è°ƒåº¦ç®—æ³•ï¼Œæ¯”å¦‚ï¼šâ€œèµ„æºæ˜¯å¦å¯ç”¨â€â€œç«¯å£æ˜¯å¦å†²çªâ€ç­‰å†æ‰§è¡Œä¸€éï¼Œä½œä¸º kubelet ç«¯çš„äºŒæ¬¡ç¡®è®¤ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šå…³äºKubernetesé»˜è®¤è°ƒåº¦å™¨çš„è°ƒåº¦ç®—æ³•ï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« é‡Œä¸ºä½ è®²è§£ã€‚</p>\n</blockquote><p><strong>é™¤äº†ä¸Šè¿°çš„â€œCacheåŒ–â€å’Œâ€œä¹è§‚ç»‘å®šâ€ï¼ŒKubernetesé»˜è®¤è°ƒåº¦å™¨è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„è®¾è®¡ï¼Œé‚£å°±æ˜¯â€œæ— é”åŒ–â€ã€‚</strong></p><p>åœ¨Scheduling Pathä¸Šï¼Œè°ƒåº¦å™¨ä¼šå¯åŠ¨å¤šä¸ªGoroutineä»¥èŠ‚ç‚¹ä¸ºç²’åº¦å¹¶å‘æ‰§è¡ŒPredicatesç®—æ³•ï¼Œä»è€Œæé«˜è¿™ä¸€é˜¶æ®µçš„æ‰§è¡Œæ•ˆç‡ã€‚è€Œä¸ä¹‹ç±»ä¼¼çš„ï¼ŒPrioritiesç®—æ³•ä¹Ÿä¼šä»¥MapReduceçš„æ–¹å¼å¹¶è¡Œè®¡ç®—ç„¶åå†è¿›è¡Œæ±‡æ€»ã€‚è€Œåœ¨è¿™äº›æ‰€æœ‰éœ€è¦å¹¶å‘çš„è·¯å¾„ä¸Šï¼Œè°ƒåº¦å™¨ä¼šé¿å…è®¾ç½®ä»»ä½•å…¨å±€çš„ç«äº‰èµ„æºï¼Œä»è€Œå…å»äº†ä½¿ç”¨é”è¿›è¡ŒåŒæ­¥å¸¦æ¥çš„å·¨å¤§çš„æ€§èƒ½æŸè€—ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨è¿™ç§æ€æƒ³çš„æŒ‡å¯¼ä¸‹ï¼Œå¦‚æœä½ å†å»æŸ¥çœ‹ä¸€ä¸‹å‰é¢çš„è°ƒåº¦å™¨åŸç†å›¾ï¼Œä½ å°±ä¼šå‘ç°ï¼ŒKubernetesè°ƒåº¦å™¨åªæœ‰å¯¹è°ƒåº¦é˜Ÿåˆ—å’ŒScheduler Cacheè¿›è¡Œæ“ä½œæ—¶ï¼Œæ‰éœ€è¦åŠ é”ã€‚è€Œè¿™ä¸¤éƒ¨åˆ†æ“ä½œï¼Œéƒ½ä¸åœ¨Scheduling Pathçš„ç®—æ³•æ‰§è¡Œè·¯å¾„ä¸Šã€‚</p><p>å½“ç„¶ï¼ŒKubernetesè°ƒåº¦å™¨çš„ä¸Šè¿°è®¾è®¡æ€æƒ³ï¼Œä¹Ÿæ˜¯åœ¨é›†ç¾¤è§„æ¨¡ä¸æ–­å¢é•¿çš„æ¼”è¿›è¿‡ç¨‹ä¸­é€æ­¥å®ç°çš„ã€‚å°¤å…¶æ˜¯ <strong>â€œCacheåŒ–â€ï¼Œè¿™ä¸ªå˜åŒ–å…¶å®æ˜¯æœ€è¿‘å‡ å¹´Kubernetesè°ƒåº¦å™¨æ€§èƒ½å¾—ä»¥æå‡çš„ä¸€ä¸ªå…³é”®æ¼”åŒ–ã€‚</strong></p><p>ä¸è¿‡ï¼Œéšç€Kubernetesé¡¹ç›®å‘å±•åˆ°ä»Šå¤©ï¼Œå®ƒçš„é»˜è®¤è°ƒåº¦å™¨ä¹Ÿå·²ç»æ¥åˆ°äº†ä¸€ä¸ªå…³é”®çš„åå­—è·¯å£ã€‚äº‹å®ä¸Šï¼ŒKubernetesç°ä»Šå‘å±•çš„ä¸»æ—‹å¾‹ï¼Œæ˜¯æ•´ä¸ªå¼€æºé¡¹ç›®çš„â€œæ°‘ä¸»åŒ–â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒKubernetesä¸‹ä¸€æ­¥å‘å±•çš„æ–¹å‘ï¼Œæ˜¯ç»„ä»¶çš„è½»é‡åŒ–ã€æ¥å£åŒ–å’Œæ’ä»¶åŒ–ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ‰æœ‰äº†CRIã€CNIã€CSIã€CRDã€Aggregated APIServerã€Initializerã€Device Pluginç­‰å„ä¸ªå±‚çº§çš„å¯æ‰©å±•èƒ½åŠ›ã€‚å¯æ˜¯ï¼Œé»˜è®¤è°ƒåº¦å™¨ï¼Œå´æˆäº†Kubernetesé¡¹ç›®é‡Œæœ€åä¸€ä¸ªæ²¡æœ‰å¯¹å¤–æš´éœ²å‡ºè‰¯å¥½å®šä¹‰è¿‡çš„ã€å¯æ‰©å±•æ¥å£çš„ç»„ä»¶ã€‚</p><p>å½“ç„¶ï¼Œè¿™æ˜¯æœ‰ä¸€å®šçš„å†å²åŸå› çš„ã€‚åœ¨è¿‡å»å‡ å¹´ï¼ŒKuberneteså‘å±•çš„é‡ç‚¹ï¼Œéƒ½æ˜¯ä»¥åŠŸèƒ½æ€§éœ€æ±‚çš„å®ç°å’Œå®Œå–„ä¸ºæ ¸å¿ƒã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå®ƒçš„å¾ˆå¤šå†³ç­–ï¼Œè¿˜æ˜¯ä»¥ä¼˜å…ˆæœåŠ¡å…¬æœ‰äº‘çš„éœ€æ±‚ä¸ºä¸»ï¼Œè€Œæ€§èƒ½å’Œè§„æ¨¡åˆ™å±…äºç›¸å¯¹æ¬¡è¦çš„ä½ç½®ã€‚</p><p>è€Œç°åœ¨ï¼Œéšç€Kubernetesé¡¹ç›®é€æ­¥è¶‹äºç¨³å®šï¼Œè¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·å¼€å§‹æŠŠKubernetesç”¨åœ¨è§„æ¨¡æ›´å¤§ã€ä¸šåŠ¡æ›´åŠ å¤æ‚çš„ç§æœ‰é›†ç¾¤å½“ä¸­ã€‚å¾ˆå¤šä»¥å‰çš„Mesosç”¨æˆ·ï¼Œä¹Ÿå¼€å§‹å°è¯•ä½¿ç”¨Kubernetesæ¥æ›¿ä»£å…¶åŸæœ‰æ¶æ„ã€‚<span class=\"orange\">åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œå¯¹é»˜è®¤è°ƒåº¦å™¨è¿›è¡Œæ‰©å±•å’Œé‡æ–°å®ç°ï¼Œå°±æˆäº†ç¤¾åŒºå¯¹Kubernetesé¡¹ç›®æœ€ä¸»è¦çš„ä¸€ä¸ªè¯‰æ±‚ã€‚</span></p><p>æ‰€ä»¥ï¼ŒKubernetesçš„é»˜è®¤è°ƒåº¦å™¨ï¼Œæ˜¯ç›®å‰è¿™ä¸ªé¡¹ç›®é‡Œä¸ºæ•°ä¸å¤šçš„ã€æ­£åœ¨ç»å†å¤§é‡é‡æ„çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚è¿™äº›æ­£åœ¨è¿›è¡Œçš„é‡æ„çš„ç›®çš„ï¼Œä¸€æ–¹é¢æ˜¯å°†é»˜è®¤è°ƒåº¦å™¨é‡Œå¤§é‡çš„â€œæŠ€æœ¯å€ºâ€æ¸…ç†å¹²å‡€ï¼›å¦ä¸€æ–¹é¢ï¼Œå°±æ˜¯ä¸ºé»˜è®¤è°ƒåº¦å™¨çš„å¯æ‰©å±•æ€§è®¾è®¡è¿›è¡Œé“ºå«ã€‚</p><p>è€ŒKubernetesé»˜è®¤è°ƒåº¦å™¨çš„å¯æ‰©å±•æ€§è®¾è®¡ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„ä¸€å¹…ç¤ºæ„å›¾æ¥æè¿°ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/fd/cd/fd17097799fe17fcbc625bf178496acd.jpg?wh=1489*757\" alt=\"\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤è°ƒåº¦å™¨çš„å¯æ‰©å±•æœºåˆ¶ï¼Œåœ¨Kubernetesé‡Œé¢å«ä½œScheduler Frameworkã€‚é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªè®¾è®¡çš„ä¸»è¦ç›®çš„ï¼Œå°±æ˜¯åœ¨è°ƒåº¦å™¨ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªå…³é”®ç‚¹ä¸Šï¼Œä¸ºç”¨æˆ·æš´éœ²å‡ºå¯ä»¥è¿›è¡Œæ‰©å±•å’Œå®ç°çš„æ¥å£ï¼Œä»è€Œå®ç°ç”±ç”¨æˆ·è‡ªå®šä¹‰è°ƒåº¦å™¨çš„èƒ½åŠ›ã€‚</p><p>ä¸Šå›¾ä¸­ï¼Œæ¯ä¸€ä¸ªç»¿è‰²çš„ç®­å¤´éƒ½æ˜¯ä¸€ä¸ªå¯ä»¥æ’å…¥è‡ªå®šä¹‰é€»è¾‘çš„æ¥å£ã€‚æ¯”å¦‚ï¼Œä¸Šé¢çš„Queueéƒ¨åˆ†ï¼Œå°±æ„å‘³ç€ä½ å¯ä»¥åœ¨è¿™ä¸€éƒ¨åˆ†æä¾›ä¸€ä¸ªè‡ªå·±çš„è°ƒåº¦é˜Ÿåˆ—çš„å®ç°ï¼Œä»è€Œæ§åˆ¶æ¯ä¸ªPodå¼€å§‹è¢«è°ƒåº¦ï¼ˆå‡ºé˜Ÿï¼‰çš„æ—¶æœºã€‚</p><p>è€ŒPredicateséƒ¨åˆ†ï¼Œåˆ™æ„å‘³ç€ä½ å¯ä»¥æä¾›è‡ªå·±çš„è¿‡æ»¤ç®—æ³•å®ç°ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œæ¥å†³å®šé€‰æ‹©å“ªäº›æœºå™¨ã€‚</p><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°è¿™äº›å¯æ’æ‹”å¼é€»è¾‘ï¼Œéƒ½æ˜¯æ ‡å‡†çš„Goè¯­è¨€æ’ä»¶æœºåˆ¶ï¼ˆGo plugin æœºåˆ¶ï¼‰</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ éœ€è¦åœ¨ç¼–è¯‘çš„æ—¶å€™é€‰æ‹©æŠŠå“ªäº›æ’ä»¶ç¼–è¯‘è¿›å»ã€‚</p><p>æœ‰äº†ä¸Šè¿°è®¾è®¡ä¹‹åï¼Œæ‰©å±•å’Œè‡ªå®šä¹‰Kubernetesçš„é»˜è®¤è°ƒåº¦å™¨å°±å˜æˆäº†ä¸€ä»¶éå¸¸å®¹æ˜“å®ç°çš„äº‹æƒ…ã€‚è¿™ä¹Ÿæ„å‘³ç€é»˜è®¤è°ƒåº¦å™¨åœ¨åé¢çš„å‘å±•è¿‡ç¨‹ä¸­ï¼Œå¿…ç„¶ä¸ä¼šåœ¨ç°åœ¨çš„å®ç°ä¸Šå†æ·»åŠ å¤ªå¤šçš„åŠŸèƒ½ï¼Œåè€Œè¿˜ä¼šå¯¹ç°åœ¨çš„å®ç°è¿›è¡Œç²¾ç®€ï¼Œæœ€ç»ˆæˆä¸ºScheduler Frameworkçš„ä¸€ä¸ªæœ€å°å®ç°ã€‚è€Œè°ƒåº¦é¢†åŸŸæ›´å¤šçš„åˆ›æ–°å’Œå·¥ç¨‹å·¥ä½œï¼Œå°±å¯ä»¥äº¤ç»™æ•´ä¸ªç¤¾åŒºæ¥å®Œæˆäº†ã€‚è¿™ä¸ªæ€è·¯ï¼Œæ˜¯å®Œå…¨ç¬¦åˆæˆ‘åœ¨å‰é¢æåˆ°çš„Kubernetesçš„â€œæ°‘ä¸»åŒ–â€è®¾è®¡çš„ã€‚</p><p>ä¸è¿‡ï¼Œè¿™æ ·çš„Scheduler Frameworkä¹Ÿæœ‰ä¸€ä¸ªä¸å°çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ä¸€æ—¦è¿™äº›æ’å…¥ç‚¹çš„æ¥å£è®¾è®¡ä¸åˆç†ï¼Œå°±ä¼šå¯¼è‡´æ•´ä¸ªç”Ÿæ€æ²¡åŠæ³•å¾ˆå¥½åœ°æŠŠè¿™ä¸ªæ’ä»¶æœºåˆ¶ä½¿ç”¨èµ·æ¥ã€‚è€Œä¸æ­¤åŒæ—¶ï¼Œè¿™äº›æ¥å£æœ¬èº«çš„å˜æ›´åˆæ˜¯ä¸€ä¸ªè´¹æ—¶è´¹åŠ›çš„è¿‡ç¨‹ï¼Œä¸€æ—¦æŠŠæ§ä¸å¥½ï¼Œå°±å¾ˆå¯èƒ½ä¼šæŠŠç¤¾åŒºæ¨å‘å¦ä¸€ä¸ªæç«¯ï¼Œå³ï¼šScheduler Frameworkæ²¡æ³•å®é™…è½åœ°ï¼Œå¤§å®¶åªå¥½éƒ½å†æ¬¡fork kube-schedulerã€‚</p><h2>æ€»ç»“</h2><p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸ºä½ è¯¦ç»†è®²è§£äº†Kubernetesé‡Œé»˜è®¤è°ƒåº¦å™¨çš„è®¾è®¡ä¸å®ç°ï¼Œåˆ†æäº†å®ƒç°åœ¨æ­£åœ¨ç»å†çš„é‡æ„ï¼Œä»¥åŠæœªæ¥çš„èµ°å‘ã€‚</p><p>ä¸éš¾çœ‹åˆ°ï¼Œåœ¨ Kubernetes çš„æ•´ä½“æ¶æ„ä¸­ï¼Œkube-scheduler çš„è´£ä»»è™½ç„¶é‡å¤§ï¼Œä½†å…¶å®å®ƒå´æ˜¯åœ¨ç¤¾åŒºé‡Œæœ€å°‘å—åˆ°å…³æ³¨çš„ç»„ä»¶ä¹‹ä¸€ã€‚è¿™é‡Œçš„åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œè°ƒåº¦è¿™ä¸ªäº‹æƒ…ï¼Œåœ¨ä¸åŒçš„å…¬å¸å’Œå›¢é˜Ÿé‡Œçš„å®é™…éœ€æ±‚ä¸€å®šæ˜¯å¤§ç›¸å¾„åº­çš„ï¼Œä¸Šæ¸¸ç¤¾åŒºä¸å¯èƒ½æä¾›ä¸€ä¸ªå¤§è€Œå…¨çš„æ–¹æ¡ˆå‡ºæ¥ã€‚æ‰€ä»¥ï¼Œå°†é»˜è®¤è°ƒåº¦å™¨è¿›ä¸€æ­¥åšè½»åšè–„ï¼Œå¹¶ä¸”æ’ä»¶åŒ–ï¼Œæ‰æ˜¯ kube-scheduler æ­£ç¡®çš„æ¼”è¿›æ–¹å‘ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¯·é—®ï¼ŒKubernetesé»˜è®¤è°ƒåº¦å™¨ä¸Mesosçš„â€œä¸¤çº§â€è°ƒåº¦å™¨ï¼Œæœ‰ä»€ä¹ˆå¼‚åŒå‘¢ï¼Ÿ</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ ç»™æˆ‘ç•™è¨€ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p>","neighbors":{"left":{"article_title":"40 | Kubernetesçš„èµ„æºæ¨¡å‹ä¸èµ„æºç®¡ç†","id":69678},"right":{"article_title":"42 | Kubernetesé»˜è®¤è°ƒåº¦å™¨è°ƒåº¦ç­–ç•¥è§£æ","id":70211}},"comments":[{"had_liked":false,"id":44450,"user_name":"CYH","can_delete":false,"product_type":"c1","uid":1099568,"ip_address":"","ucode":"396AF8DBD0C8AE","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/30/2f8b78e9.jpg","comment_is_top":false,"comment_ctime":1543450531,"is_pvip":false,"replies":[{"id":"15904","content":"ä¸€ç‚¹éƒ½ä¸æ‹™ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1543467915,"ip_address":"","comment_id":44450,"utype":1}],"discussion_count":3,"race_medal":0,"score":"319371030435","product_id":100015201,"comment_content":"é—®é¢˜å›ç­”ï¼šmessosäºŒçº§è°ƒåº¦æ˜¯èµ„æºè°ƒåº¦å’Œä¸šåŠ¡è°ƒåº¦åˆ†å¼€ï¼›ä¼˜ç‚¹ï¼šæ’ä»¶åŒ–è°ƒåº¦æ¡†æ¶ï¼ˆç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰è‡ªå·±è°ƒåº¦å™¨ç„¶åæ³¨å†Œåˆ°messosèµ„æºè°ƒåº¦æ¡†æ¶å³å¯ï¼‰ï¼Œçµæ´»å¯æ‰©å±•æ€§é«˜.ç¼ºç‚¹ï¼šèµ„æºå’Œä¸šåŠ¡è°ƒåº¦åˆ†å¼€æ— æ³•è·å–èµ„æºä½¿ç”¨æƒ…å†µï¼Œè¿›è€Œæ— æ³•åšæ›´ç»†ç²’åº¦çš„è°ƒåº¦.k8sè°ƒåº¦æ˜¯ç»Ÿä¸€è°ƒåº¦ä¹Ÿå°±æ˜¯ä¸šåŠ¡å’Œèµ„æºè°ƒåº¦è¿›è¡Œç»Ÿä¸€è°ƒåº¦ï¼Œå¯ä»¥è¿›è¡Œæ›´ç»†ç²’åº¦çš„è°ƒåº¦ï¼›ç¼ºç‚¹å…¶è°ƒåº¦å™¨æ‰©å±•æ€§å·®ã€‚ä»¥ä¸Šæ˜¯æœ¬äººæ‹™è§ï¼Œè¯·è€å¸ˆæŒ‡æ­£ã€‚","like_count":74,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430765,"discussion_content":"ä¸€ç‚¹éƒ½ä¸æ‹™ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543467915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1708412,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/11/7c/bf5049b3.jpg","nickname":"Freddy","note":"","ucode":"5822B746265DB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573635,"discussion_content":"æ¥è‡ª2022 --ï¼ŒMesosçš„ä¸¤çº§è°ƒåº¦ï¼Œæˆ‘ç†è§£çš„æ˜¯ï¼Œ1.MesosæŠŠå¯ç”¨èµ„æºç»™åˆ°å„ä¸ªåº”ç”¨æ¡†æ¶ï¼› 2.åº”ç”¨æ¡†æ¶è‡ªèº«å®Œæˆä»»åŠ¡çš„è°ƒåº¦ï¼› ä¼˜ç‚¹ï¼šè°ƒåº¦é€»è¾‘æ¸…æ™°ï¼Œç®€å•ï¼› ç¼ºç‚¹ï¼šå„ä¸ªåº”ç”¨æ¡†æ¶æ— æ³•æ²Ÿé€šï¼Œè¿›è€Œæ„ŸçŸ¥é›†ç¾¤æ•´ä½“èµ„æºä½¿ç”¨æƒ…å†µï¼Œæ— æ³•åšåˆ°å…¨å±€ä¼˜åŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653557160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1293354,"avatar":"https://static001.geekbang.org/account/avatar/00/13/bc/2a/00a3d488.jpg","nickname":"gl328518397","note":"","ucode":"05AF4661EF0AAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":18374,"discussion_content":"å—ç›ŠåŒªæµ…ã€‚æ˜¯å¦å¯ä»¥è°ˆè°ˆæŸäº›å…¬å¸æŠŠkubernetesè·‘åˆ°Mesosä¸Šçš„åšæ³•ï¼Ÿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569052852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97929,"user_name":"Vip He","can_delete":false,"product_type":"c1","uid":1233393,"ip_address":"","ucode":"68619AE682C991","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/f1/48f16eaa.jpg","comment_is_top":false,"comment_ctime":1558842849,"is_pvip":false,"replies":[{"id":"36294","content":"ä¸²è¡Œçš„","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1559619052,"ip_address":"","comment_id":97929,"utype":1}],"discussion_count":1,"race_medal":0,"score":"87458188769","product_id":100015201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¿™ä¸ªpodè°ƒåº¦è¿‡ç¨‹æ˜¯å¹¶è¡Œçš„å—è¿˜æ˜¯ä¸€ä¸ªä¸€ä¸ªpodè°ƒåº¦ï¼Ÿ","like_count":21,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451475,"discussion_content":"ä¸²è¡Œçš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1559619052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319213,"user_name":"Jasper","can_delete":false,"product_type":"c1","uid":1202174,"ip_address":"","ucode":"A07ABF45D39089","user_header":"https://static001.geekbang.org/account/avatar/00/12/57/fe/beab006d.jpg","comment_is_top":false,"comment_ctime":1635678561,"is_pvip":true,"discussion_count":5,"race_medal":0,"score":"48880318817","product_id":100015201,"comment_content":"2021å¹´äº†ï¼Œæ¥è¿˜18å¹´æ²¡è¯»å®Œçš„å€ºã€‚åœ¨è€å­Ÿçš„æŒ‡å¯¼ä¸‹å­¦ä¹ ï¼Œå†å›é¦–å¼ ç£Šè€å¸ˆçš„æ–‡ç« ï¼Œæ„Ÿæ…¨ä¸‡åƒ","like_count":12,"discussions":[{"author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586568,"discussion_content":"çŸ¥é“äº†ï¼Œå­Ÿå‡¡æ° ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662346450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1529530,"avatar":"https://static001.geekbang.org/account/avatar/00/17/56/ba/693c6d12.jpg","nickname":"283","note":"","ucode":"01386C3D17C95C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560409,"discussion_content":"ä¸¤è€…ç»“åˆæ„Ÿè§‰ä¸é”™ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649317683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545514,"discussion_content":"è€å­Ÿæ˜¯è°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641980178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2806043,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBFkSq1oiaEMRjtyyv4ZpCI0OuaSsqs04ODm0OkZF6QhsAh3SvqhxibS2n7PLAVZE3QRSn5Hic0DyXg/132","nickname":"ddh","note":"","ucode":"8E852375365F16","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":553227,"discussion_content":"ä»–æ˜¯çœŸçš„å°¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645774438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":545514,"ip_address":""},"score":553227,"extra":""},{"author":{"id":1116807,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0a/87/56b07589.jpg","nickname":"nearzk","note":"","ucode":"CDEA6841E5F54C","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":580841,"discussion_content":"6å°æ—¶æå®šKubernetesè®¾è®¡åŸåˆ™çš„é‚£ä¸ªäºº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658389420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":545514,"ip_address":""},"score":580841,"extra":""}]}]},{"had_liked":false,"id":43193,"user_name":"dgonly","can_delete":false,"product_type":"c1","uid":1068829,"ip_address":"","ucode":"AD38B8FF495378","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/1d/0995be72.jpg","comment_is_top":false,"comment_ctime":1543195227,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"31607966299","product_id":100015201,"comment_content":"è°ƒåº¦å™¨å¯¹APIServerçš„æ›´æ–°å¤±è´¥ï¼ŒBindè¿‡ç¨‹å¤±è´¥ï¼Œè€å¸ˆè¯´ç­‰schedule cacheåŒæ­¥åå°±æ¢å¤æ­£å¸¸ï¼Œè¿™ä¸ªæ€ä¹ˆç†è§£ï¼Ÿ<br>æˆ‘ç†è§£æ˜¯informer pathç»§ç»­watchï¼Œå‘ç°podæ²¡æœ‰è¢«bindåˆ°nodeå°±ç»§ç»­æ‰§è¡Œä¸€éè°ƒåº¦æµç¨‹å—ï¼Ÿå¦‚æœæŸç§åŸå› æ›´æ–°APIServerä¸€ç›´å¤±è´¥ï¼Œä¼šä¸ä¼šå°±ä¸€ç›´æ‰§è¡Œé‡æ–°è°ƒåº¦çš„æ“ä½œï¼Œæœ‰æ²¡æœ‰ä¸€ç§ç±»ä¼¼é‡è¯•è¶…è¿‡ä¸€å®šæ¯”å¦‚å°±ä¸¢å¼ƒçš„æœºåˆ¶ã€‚è°¢è°¢ï¼","like_count":8,"discussions":[{"author":{"id":1175329,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ef/21/69c181b8.jpg","nickname":"Rain","note":"","ucode":"603DFFAC6A3755","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335204,"discussion_content":"åº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œassumeè¿‡ç¨‹ä¼šå°†è¯¥podçš„ä¿¡æ¯æå‰æ·»åŠ åˆ°cacheä¸­ï¼Œå¦‚æœbindè¿‡ç¨‹å¤±è´¥äº†ï¼Œé‚£å°±ä¼šå°†è¯¥podç›¸å…³çš„cacheæ¸…ç©ºï¼Œç„¶åå°†è¯¥podå†æ”¾å…¥åˆ°è°ƒåº¦é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…é‡æ–°è°ƒåº¦ã€‚ç›®å‰çœ‹é»˜è®¤æ²¡æœ‰è¿™ç§â€œé‡è¯•è¶…è¿‡ä¸€å®šæ¬¡æ•°å°±ä¸¢å¼ƒçš„æœºåˆ¶â€ï¼Œä¸è¿‡å¯ä»¥è‡ªå·±å†™æ’ä»¶æ¥å®ç°ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1608118328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1610260,"avatar":"https://static001.geekbang.org/account/avatar/00/18/92/14/6ca50b3b.jpg","nickname":"å¤§Gæ¥äº†å‘¦","note":"","ucode":"97711D9CCA73B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1175329,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ef/21/69c181b8.jpg","nickname":"Rain","note":"","ucode":"603DFFAC6A3755","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378519,"discussion_content":"è¿™ä¸ªè¿‡ç¨‹ä¹‹å‰podä¿¡æ¯å°±å·²ç»åœ¨ç¼“å­˜ä¸­äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623254116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":335204,"ip_address":""},"score":378519,"extra":""}]}]},{"had_liked":false,"id":47999,"user_name":"loda","can_delete":false,"product_type":"c1","uid":1043287,"ip_address":"","ucode":"3F9575DBFA1031","user_header":"https://static001.geekbang.org/account/avatar/00/0f/eb/57/3032e1a7.jpg","comment_is_top":false,"comment_ctime":1544308616,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"18724177800","product_id":100015201,"comment_content":"æƒ³è¯·æ•™ä¸ªé—®é¢˜ï¼Œkuberneteså¦‚ä½•ä¿è¯ç”¨æˆ·èƒ½æå‰çŸ¥é“è¿™æ¬¡è°ƒåº¦èƒ½å¦æˆåŠŸï¼Ÿ<br>åœºæ™¯ï¼šå¾ˆå¤šå…¬å¸éƒ½å¸Œæœ›æå‰å°±å‘ç°èµ„æºæ± ä½™é‡æ˜¯å¦å……è¶³ï¼Œä»è€Œå†³å®šæ˜¯è¦åŠ æœºå™¨è¿˜æ˜¯å¯ä»¥ç»§ç»­æ‰©å®¹<br>æ‹™è§ï¼š<br>1.schedulerçš„ç¼“å­˜å…¶å®æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ•°æ®ï¼Œå¯ä»¥æä¾›å½“å‰æ—¶åˆ»è°ƒåº¦èƒ½å¦æˆåŠŸçš„è§†å›¾ï¼Œä½†æ˜¯ç›´æ¥æš´éœ²å‡ºæ¥ä¸å¤ªç¬¦åˆkubernetesä»¥apiserverä¸ºä¾æ®çš„åŸåˆ™<br>2.æä¾›ä½™é‡æ£€æŸ¥æ¥å£ï¼Œå®æ—¶æŸ¥è¯¢apiserverä¸­æ‰€æœ‰podå’Œnodeï¼Œæ ¹æ®æ‰©å®¹å‚æ•°ç®—å‡ºå‰©ä½™èµ„æºé‡ã€‚ä¸è¿‡è§„æ¨¡å¤§åï¼Œå¯¹é›†ç¾¤å‹åŠ›å¤ªå¤§<br>3.å®šæ—¶é‡‡é›†ä¸Šè¿°æŒ‡æ ‡ï¼Œç¼ºç‚¹æ˜¯å®æ—¶æ€§å¤ªå·®<br>4.ç›‘å¬pod crudï¼Œè‡ªå·±ç‹¬ç«‹ç»´æŠ¤ä¸€ä¸ªå’Œschedulerä¸€æ ·çš„ç¼“å­˜æˆ–æŒä¹…è¯æ•°æ®ï¼Œæ¯æ¬¡åŸºäºè¿™ä¸ªæ•°æ®åˆ¤æ–­å‰©ä½™é‡ã€‚ç¼ºç‚¹æ˜¯ç»´æŠ¤æˆæœ¬è¾ƒé«˜ï¼Œå®¹æ˜“å‡ºç°æ•°æ®ä¸ä¸€è‡´<br><br>æƒ³é—®ä¸‹ï¼Œæœ‰æ²¡æœ‰æ›´åˆé€‚çš„æ–¹å¼ï¼Ÿ<br>","like_count":4,"discussions":[{"author":{"id":1117803,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0e/6b/9ee9f422.jpg","nickname":"wx","note":"","ucode":"7AA8F0FEFD1128","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385744,"discussion_content":"è¿™ä¸ªéœ€æ±‚éå¸¸æœ‰æ„ä¹‰ï¼Œè¯•æƒ³30ä¸ªå‡ ç‚¹dbé›†ç¾¤æ‰©å®¹ä¸€å€ï¼Œä¸èƒ½æå‰çŸ¥é“èµ„æºå¤Ÿä¸å¤Ÿï¼Œå°±å¾ˆéš¾æã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627259867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1372895,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f2/df/29300d65.jpg","nickname":"å°å“¥","note":"","ucode":"1B168B2A3B4C10","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1117803,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0e/6b/9ee9f422.jpg","nickname":"wx","note":"","ucode":"7AA8F0FEFD1128","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533800,"discussion_content":"ç°åœ¨clusterautoscalerçš„å®ç°ä¹Ÿå¾ˆå¤šäº†ï¼Œå¯ä»¥å…³æ³¨ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637980436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":385744,"ip_address":""},"score":533800,"extra":""}]},{"author":{"id":1356206,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b1/ae/344fbda3.jpg","nickname":"è¿½é£","note":"","ucode":"D1D463D7B911A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276218,"discussion_content":"ä½ ä»¬é›†ç¾¤èµ„æºå°±é‚£ä¹ˆç´§å¼ ä¹ˆï¼Ÿè¿™ç§éœ€æ±‚çš„è®¾è®¡æœ‰ä»€ä¹ˆå®è´¨æ€§æ„ä¹‰ä¹ˆã€‚å®ç°ä¹Ÿæ˜¯å¼Šå¤§äºåˆ©","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590842656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2560209,"avatar":"https://static001.geekbang.org/account/avatar/00/27/10/d1/8a299043.jpg","nickname":"é£å¤©å°é¢–çŒª","note":"","ucode":"1322039BFC4C11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544161,"discussion_content":"è¿™ç§æƒ…å†µç›‘æ§å°±å¤Ÿäº†å§ï¼Œæˆ‘ç†è§£ä¸éœ€è¦é‚£ä¹ˆå®æ—¶å’Œç²¾ç¡®çš„æ•°æ®ï¼Œè‚¯å®šæ˜¯é›†ç¾¤èµ„æºå‰©ä½™å……è¶³çš„æƒ…å†µæ‰ä¼šå»æ‰©å®¹ï¼Œåˆšåˆšå¤Ÿä¹Ÿä¸ä¼šå†³å®šæ‰©å®¹ï¼Œæ‰€ä»¥ä¸€ç‚¹è¯¯å·®åº”è¯¥æ˜¯å¯ä»¥æ¥å—çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641433318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43866,"user_name":"å®‹æ™“æ˜","can_delete":false,"product_type":"c1","uid":1146507,"ip_address":"","ucode":"DC866DCE2FBA9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/7e/8b/3cc461b3.jpg","comment_is_top":false,"comment_ctime":1543313981,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14428215869","product_id":100015201,"comment_content":"è€å¸ˆ åˆšæ‰é‡åˆ°ä¸€ä¸ªé—®é¢˜ æˆ‘åˆå§‹åŒ–çš„æ—¶å€™ åˆ†é…çš„ipèŒƒå›´æ˜¯10.64.200.0&#47;22 ç„¶åä¸¤ä¸ªmaster 3ä¸ªnode  kubernetesè‡ªå·±åˆ†é…masteråˆ†åˆ«æ˜¯200.0&#47;24 201.0&#47;24  ç„¶åå…¶ä»–ä¸¤ä¸ªnodeæ˜¯202.0&#47;24 203.0&#47;24 å…¶å®è¿™äº›èŒƒå›´å·²ç»ç”¨æ»¡äº† åœ¨åŠ ç¬¬ä¸‰ä¸ªnode åœ¨masterçœ‹ä¹ŸæˆåŠŸäº† ä½†åˆ›å»ºå¤šä¸ªpodçš„æ—¶å€™ ç¬¬ä¸‰ä¸ªnodeä¸Šçš„podæ˜¯å¤±è´¥çš„,åæ¥å‘ç°ç¬¬ä¸‰ä¸ªnodeä¸Škube-bridgeç½‘æ¡¥ä¸Šæ²¡æœ‰IPåœ°å€ï¼Œéœ€æ±‚æ˜¯ï¼šå› ä¸ºmasterä¸Šä¸ä¼šæœ‰è‡ªå·±åˆ›å»ºçš„podçš„ï¼Œæ‰€ä»¥masterä¸Šåœ°å€æ®µæœ‰ç‚¹æµªè´¹ï¼Œæˆ‘å¦‚ä½•æŠŠmasterä¸Šç©ºé—²çš„åœ°å€æ®µç”¨åˆ°æ–°å¢nodeä¸Šï¼Œè¿˜æ˜¯ä¸ç”¨ç®¡ï¼Œè¿˜æ˜¯æ€ä¹ˆæ ·ï¼Ÿ","like_count":3},{"had_liked":false,"id":319441,"user_name":"é™ˆæ–¯ä½³","can_delete":false,"product_type":"c1","uid":1259323,"ip_address":"","ucode":"C236F874FC767A","user_header":"https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg","comment_is_top":false,"comment_ctime":1635816200,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10225750792","product_id":100015201,"comment_content":"ç¬¬å››åä¸€è¯¾:åå­—è·¯å£ä¸Šçš„Kubernetesé»˜è®¤è°ƒåº¦å™¨<br>K8sé¡¹ç›®ä¸­é»˜è®¤è°ƒåº¦å™¨çš„ä¸»è¦èŒè´£æ˜¯å°±æ˜¯ä¸ºäº†æ–°åˆ›å»ºå‡ºæ¥çš„Podå¯»æ‰¾ä¸€ä¸ªæœ€åˆé€‚çš„Nodeã€‚<br><br>è°ƒåº¦å™¨é¦–å…ˆä¼šè°ƒç”¨ä¸€ç»„å«Predicateçš„è°ƒåº¦ç®—æ³•ï¼Œæ¥æ£€æ¯ä¸€ä¸ªNodeã€‚ç„¶åå†è°ƒç”¨ä¸€ç»„å«ä½œPriorityçš„è°ƒåº¦ç®—æ³•æ¥ç»™ä¸Šä¸€æ­¥å¾—åˆ°çš„ç»“æœé‡Œçš„æ¯ä¸€ä¸ªNodeæ‰“åˆ†ã€‚æœ€ç»ˆçš„è°ƒåº¦ç»“æœå°±æ˜¯å¾—åˆ†æœ€é«˜çš„é‚£ä¸ªNodeã€‚<br><br>Kubernetes çš„è°ƒåº¦å™¨çš„æ ¸å¿ƒï¼Œå®é™…ä¸Šå°±æ˜¯ä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„æ§åˆ¶å¾ªç¯ã€‚ç¬¬ä¸€ä¸ªæ˜¯Informer Pathï¼Œä¸»è¦æ˜¯å¯åŠ¨ä¸€ç³»åˆ—Informerç”¨æ¥ç›‘å¬(Watch)Etcdä¸­çš„Pod,Node, Serviceç­‰ä¸è°ƒåº¦ç›¸å…³çš„APIå¯¹è±¡çš„å˜åŒ–ã€‚æ­¤å¤–ï¼ŒKubernetes çš„é»˜è®¤è°ƒåº¦å™¨è¿˜è¦è´Ÿè´£å¯¹è°ƒåº¦å™¨ç¼“å­˜ï¼ˆå³ï¼šscheduler cacheï¼‰è¿›è¡Œæ›´æ–°ã€‚äº‹å®ä¸Šï¼ŒKubernetes è°ƒåº¦éƒ¨åˆ†è¿›è¡Œæ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªæœ€æ ¹æœ¬åŸåˆ™ï¼Œå°±æ˜¯å°½æœ€å¤§å¯èƒ½å°†é›†ç¾¤ä¿¡æ¯ Cache åŒ–ï¼Œä»¥ä¾¿ä»æ ¹æœ¬ä¸Šæé«˜ Predicate å’Œ Priority è°ƒåº¦ç®—æ³•çš„æ‰§è¡Œæ•ˆç‡ã€‚ç¬¬äºŒä¸ªæ§åˆ¶å¾ªç¯æ˜¯Scheduling Pathï¼Œä¸»è¦é€»è¾‘æ˜¯ä¸æ–­ä»è°ƒåº¦é˜Ÿåˆ—é‡Œè°ƒå‡ºPodï¼Œç„¶åç”¨Predicatesç®—æ³•è¿›è¡Œè¿‡æ»¤ï¼Œå¾—åˆ°ä¸€ç»„å¯ä»¥è¿è¡Œè¿™ä¸ªPodçš„å®¿ä¸»æœºåˆ—è¡¨ï¼Œç„¶åå†ç”¨Priorityæ‰“åˆ†ï¼Œå¾—åˆ†é«˜çš„ç§°ä¸ºPodç»“æœã€‚<br>","like_count":2},{"had_liked":false,"id":162679,"user_name":"Dong","can_delete":false,"product_type":"c1","uid":1228202,"ip_address":"","ucode":"B467D06C2CD7E5","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/aa/f53a6800.jpg","comment_is_top":false,"comment_ctime":1576576912,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5871544208","product_id":100015201,"comment_content":"å˜¿å˜¿","like_count":1},{"had_liked":false,"id":63543,"user_name":"å‡Œ","can_delete":false,"product_type":"c1","uid":1257995,"ip_address":"","ucode":"41369B360C794F","user_header":"https://static001.geekbang.org/account/avatar/00/13/32/0b/81ae214b.jpg","comment_is_top":false,"comment_ctime":1548397325,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5843364621","product_id":100015201,"comment_content":"å¦‚æœèƒ½ç»“åˆæºç å°†è§£å†³å°±æ›´å¥½äº†ï¼Œä¸çŸ¥é“ç›¸å…³ä»£ç åœ¨å“ªå•Š","like_count":1},{"had_liked":false,"id":357436,"user_name":"Geek_439a6d","can_delete":false,"product_type":"c1","uid":2074776,"ip_address":"åŒ—äº¬","ucode":"BD83066D05B4B2","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/uQoCBsia00Dr1g05SCZ69esjDwJWP4QGbckxNZAO44xg4Hu2YjDROoITtvcLr23ae9SrE5tVR95U8ricVMicdnUIw/132","comment_is_top":false,"comment_ctime":1663249053,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1663249053","product_id":100015201,"comment_content":"è¯·æ•™ä¸‹ï¼Œä¸ºä»€ä¹ˆ kubernetesè°ƒåº¦å™¨ è¿›è¡Œæ€§èƒ½ä¼˜åŒ–çš„æœ€æ ¹æœ¬åŸåˆ™ï¼Œæ˜¯å°†é›†ç¾¤ä¿¡æ¯ Cache åŒ–ï¼Ÿæ˜¯å› ä¸ºå¦‚æœä¸å°†é›†ç¾¤ä¿¡æ¯ Cache åŒ–ï¼Œè°ƒåº¦å™¨æ€§èƒ½ç“¶é¢ˆåœ¨ä» APIServer æ‹‰å–è°ƒåº¦è¿‡ç¨‹ä¸­éœ€è¦çš„å„ç§ä¿¡æ¯å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":332447,"user_name":"åˆå¿ƒ?å›ºæ‰§?","can_delete":false,"product_type":"c1","uid":2899801,"ip_address":"","ucode":"061802402BCEBC","user_header":"https://static001.geekbang.org/account/avatar/00/2c/3f/59/3b9da34b.jpg","comment_is_top":false,"comment_ctime":1643254688,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643254688","product_id":100015201,"comment_content":"å¯ä»¥è¯·æ•™ä¸ªé—®é¢˜å—ï¼Ÿ<br>æˆ‘ä¸å¤ªæƒ³åŠ¨æ•°æ®åº“ä¸€çº§ï¼Œåªå¯¹å…¶å®ƒçš„åº”ç”¨ä½¿ç”¨k8sé›†ç¾¤éƒ¨ç½²ï¼Œ<br>ç„¶åæˆ‘æƒ³k8sçš„èŠ‚ç‚¹å’Œè¿™äº›æ•°æ®åº“èŠ‚ç‚¹å…±å­˜(æœ‰äº›æ•°æ®åº“æœåŠ¡å™¨åªå ç”¨äº†å¾ˆå°‘ä¸€éƒ¨åˆ†èµ„æº)ï¼Œ<br><br>è¯·é—®è¿™ç§æƒ…å†µä¸‹èµ„æºè°ƒåº¦å™¨æ˜¯æ€ä¹ˆçŸ¥é“è¿™ä¸ªèŠ‚ç‚¹ä¸Šå‰©ä½™å¯ç”¨çš„cpuå’Œå†…å­˜çš„? ","like_count":0},{"had_liked":false,"id":321572,"user_name":"è±†è±†","can_delete":false,"product_type":"c1","uid":1275407,"ip_address":"","ucode":"97788B134C3212","user_header":"https://static001.geekbang.org/account/avatar/00/13/76/0f/c7c8021d.jpg","comment_is_top":false,"comment_ctime":1636950619,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636950619","product_id":100015201,"comment_content":"å…³äºé»˜è®¤è°ƒåº¦å™¨åœ¨scheduling pathé˜¶æ®µæ— é”åŒ–æè¿°ï¼Œéš¾é“åœ¨predicateé˜¶æ®µï¼Œä»queueä¸­å–podæ—¶ï¼Œä¸éœ€è¦åŠ é”å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":295399,"user_name":"ç½—å³°","can_delete":false,"product_type":"c1","uid":1218501,"ip_address":"","ucode":"5F3D6AF8F28322","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/c5/84491beb.jpg","comment_is_top":false,"comment_ctime":1622413502,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622413502","product_id":100015201,"comment_content":"Scheduleræ˜¯å¤šå®ä¾‹çš„ï¼Œå¯è°ƒåº¦æ˜¯ä¸²è¡Œçš„ï¼Œæ˜¯é€šè¿‡åŠ é”å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":295107,"user_name":"ç½—å³°","can_delete":false,"product_type":"c1","uid":1218501,"ip_address":"","ucode":"5F3D6AF8F28322","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/c5/84491beb.jpg","comment_is_top":false,"comment_ctime":1622249385,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1622249385","product_id":100015201,"comment_content":"è®°å½•ä¸‹ï¼Œè°ƒåº¦çš„è¿‡ç¨‹ ä¸¤ä¸ªç‹¬ç«‹çš„å¾ªç¯ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡informerç¼“å­˜pod nodeä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯ ç»™éœ€è¦çš„podè¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼Œç„¶åè®¡ç®—å¾—åˆ†æ’åºã€‚","like_count":0,"discussions":[{"author":{"id":1218501,"avatar":"https://static001.geekbang.org/account/avatar/00/12/97/c5/84491beb.jpg","nickname":"ç½—å³°","note":"","ucode":"5F3D6AF8F28322","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376901,"discussion_content":"å¤šå®ä¾‹scheduleré€šè¿‡cacheä¹è§‚é”æ–¹å¼æ¥è°ƒåº¦ï¼Œä¹Ÿå°±æ˜¯å³ä½¿æœ‰ä¸‰ä¸ªå®ä¾‹åœ¨è°ƒåº¦ï¼Œæœ€åæ›´æ–°ç»“æœåªæœ‰ä¸€ä¸ªæ›´æ–°æˆåŠŸï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯è¿™æ ·ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622414257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276146,"user_name":"å°å¯å­ã€‚(â‰¥3â‰¤)","can_delete":false,"product_type":"c1","uid":1206545,"ip_address":"","ucode":"6D978BDCBB2862","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/11/831cec7d.jpg","comment_is_top":false,"comment_ctime":1611811653,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611811653","product_id":100015201,"comment_content":"2021å¹´ï¼Œæ‰¾åˆ°ä»£ç äº† https:&#47;&#47;github.com&#47;kubernetes-sigs&#47;scheduler-plugins&#47;blob&#47;master&#47;pkg&#47;trimaran&#47;handler.go ä¸çŸ¥é“è¿™æ˜¯ä¸æ˜¯æ­£ç¡®çš„åœ°æ–¹ã€‚","like_count":0},{"had_liked":false,"id":195934,"user_name":"é‚£è¿¦æ ‘","can_delete":false,"product_type":"c1","uid":1055625,"ip_address":"","ucode":"34519C1DEA41A0","user_header":"https://static001.geekbang.org/account/avatar/00/10/1b/89/b7fae170.jpg","comment_is_top":false,"comment_ctime":1585224780,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585224780","product_id":100015201,"comment_content":"ä¸çŸ¥é“k8sçš„è°ƒåº¦å™¨æ˜¯å¦å¯ä»¥è‡ªå®šä¹‰ï¼Œæˆ‘ä»¬é¡¹ç›®çš„éœ€æ±‚åœ¨ç›®å‰å·²æœ‰çš„è°ƒåº¦å™¨è¿˜ä¸èƒ½å®Œå…¨æ»¡è¶³","like_count":0,"discussions":[{"author":{"id":1031711,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/be/1f/57c88dd1.jpg","nickname":"å°ä¸¢ğŸ‘£","note":"","ucode":"A7699F00418FC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346845,"discussion_content":"å®Œå…¨å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612080953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66830,"user_name":"wypsmall","can_delete":false,"product_type":"c1","uid":1317144,"ip_address":"","ucode":"5E46543D47F2C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/19/18/33b7e63b.jpg","comment_is_top":false,"comment_ctime":1550026691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550026691","product_id":100015201,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œè°ƒåº¦ç­–ç•¥ä¸­æœ‰æ²¡æœ‰å¯¹ç½‘ç»œioé™åˆ¶å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´ä¸å¸Œæœ›é«˜ç½‘ç»œioçš„podè¢«è°ƒåº¦åˆ°åŒä¸€ä¸ªå®¿ä¸»æœºã€‚","like_count":0}]}