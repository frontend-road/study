{"id":271373,"title":"01｜什么是分布式数据库？","content":"<p>你好，我是王磊，你也可以叫我Ivan。</p><p>在这门课的第1讲，我想和你探讨一个最基本的问题：<strong>什么是分布式数据库？</strong></p><p>回答这个问题，其实就是在给分布式数据库下定义。</p><p>分布式数据库和很多技术概念一样，没有权威机构来做这个定义，甚至对于哪些机构是权威机构，我们都很难有共识。</p><p>作为技术人员，我们常会提到一个概念，叫“事实标准”。当一个技术产品占据市场的主导位置时，它自然就成了同类产品的事实标准。例如，对于关系型数据库，可以说Oracle就是事实标准，因为所有数据库产品发布新版本时，都要拿自己的特性去和Oracle比一比。</p><p>很遗憾，分布式数据库作为一个新兴的基础软件，还没有一款产品占据“事实标准”的位置。既然没有参照，我们就自己动手，一起来定义分布式数据库这个概念吧。</p><p>由表及里、由外到内是人们认识事物的普遍规律，所以我们让也从内外部两个视角来观察。</p><h2>外部视角：外部特性</h2><p>外部视角，就是看看分布式数据库具备哪些特性，能解决什么问题。</p><p>通常，业务应用系统可以按照交易类型分为联机交易（OLTP）场景和联机分析（OLAP）场景两大类。OLTP是面向交易的处理过程，单笔交易的数据量小，但是要在很短的时间内给出结果，典型场景包括购物、缴费、转账等；而OLAP场景通常是基于大数据集的运算，典型场景包括生成个人年度账单和企业财务报表等。</p><!-- [[[read_end]]] --><p>OLTP与OLAP两种场景有很大的差异，所以很难在一款产品中完全满足两者的需求，因此在单体数据库时代就演化出了两个的不同技术体系，也就是两类不同的关系型数据库。向分布式架构演进后，两者在架构设计上也采用了完全不同的策略，很难在一个框架下说清楚。</p><p>所以，为了让你有更好的学习体验，<strong>在这个课程中，我们先专注于讨论OLTP场景下的分布式数据库。</strong></p><p>说到这里，我想和你统一一下概念，如果没有特别说明，这个课程中出现的“数据库”都默认为“关系型数据库”，分布式数据库也都是指支持关系模型的分布式数据库。这就是说，NoSQL不是我们要讨论的核心内容。</p><p>你可能会说，NoSQL也很重要呀，MongoDB多火呀。</p><p>NoSQL当然很重要，MongoDB确实也在一些细分场景中取得了成功。但是，从整体看，关系型数据库由于支持SQL、提供ACID事务保障，显然具有更好的通用性，在更广泛的场景中无法被NoSQL取代。这一点通过NoSQL十余年的发展已经被证明。</p><p>事实上，分布式数据库的目标正是融合传统关系型数据库与NoSQL数据库的优势，而且已经取得了不错的效果。</p><h3>定义1.0 OLTP关系型数据库</h3><p>仅用“OLTP场景”作为定语显然不够精准，我们来进一步看看OLTP场景具体的技术特点。</p><p>OLTP场景的通常有三个特点：</p><ul>\n<li><strong>写多读少</strong>，而且读操作的复杂度较低，一般不涉及大数据集的汇总计算；</li>\n<li><strong>低延时</strong>，用户对于延时的容忍度较低，通常在500毫秒以内，稍微放大一些也就是秒级，超过5秒的延时通常是无法接受的；</li>\n<li><strong>高并发</strong>，并发量随着业务量而增长，没有理论上限。</li>\n</ul><p>我们是不是可以有这样一个结论：<strong>分布式数据库是服务于写多读少、低延时、高并发的OLTP场景的数据库</strong>。</p><h3>定义2.0 +海量并发</h3><p>你可能会说这个定义有问题，比如MySQL和Oracle这样的关系型数据库也是服务于OLTP场景的，但它们并不是分布式数据库。</p><p>你的感觉没错，确实有问题。</p><p>那么，相对于传统关系型数据库，分布式数据库最大的差异是什么呢？答案就是分布式数据库远高于前者的并发处理能力。</p><p>传统关系型数据库往往是单机模式，也就是主要负载运行在一台机器上。这样，数据库的并发处理能力与单机的资源配置是线性相关的，所以并发处理能力的上限也就受限于单机配置的上限。这种依靠提升单机资源配置来扩展性能的方式，被称为垂直扩展（Scale Up）。</p><p>在一台机器中，随随便便就能多塞进些CPU和内存来提升提性能吗？当然没那么容易。所以，物理机单机配置上限的提升是相对缓慢的。</p><p>这意味着，在一定时期内，依赖垂直扩展的数据库总会存在性能的天花板。很多银行采购小型机或大型机的原因之一，就是相比x86服务器，这些机器能够安装更多的CPU和内存，可以把天花板推高一些。</p><p>而分布式数据库就不同了，在维持关系型数据库特性不变的基础上，它可以通过水平扩展，也就是增加机器数量的方式，提供远高于单体数据库的并发量。这个并发量几乎不受单机性能限制，我将这个级别的并发量称为“海量并发”。</p><p>听到这里你可能还要追问，这个“海量并发”到底是多大呢，有没有一个数字？</p><p>很遗憾，据我所知并没有权威数字。虽然理论上是可以找一台世界上最好的机器来测试一下，但考虑到商业因素，这个数字不会有什么实际价值。不过，我可以给出一个经验值，这个“海量并发”的下限大致是10,000TPS。如果你有相关的经验，也欢迎你在评论区留言，我们一起讨论。</p><p>现在，基于这些理解，我们可以再得到一个2.0版本的定义：<strong>分布式数据库是服务于写多读少、低延时、海量并发OLTP场景的关系型数据库</strong>。</p><h3>定义3.0 +高可靠</h3><p>这个定义你觉得满意吗？</p><p>其实，这个2.0版本仍然有问题。</p><p>是不是没有海量并发需求，就不需要使用分布式数据库了呢？不是的，你还要考虑数据库的高可靠性。</p><p>一般来说，可靠性是与硬件设备的故障率有关的。</p><p>与银行不同，很多互联网公司和中小企业通常是采用x86服务器的。x86服务器有很多优势，但故障率会相对高一些，坊间流传的年故障率在5%左右。</p><p>一些更加可靠的数据来自Google的论文<a href=\"http://bnrg.eecs.berkeley.edu/~randy/Courses/CS294.F07/11.3.pdf\"><em>Failure Trends in a Large Disk Drive Population</em></a>，文中详细探讨了通用设备磁盘的故障情况。它给出的磁盘年度故障率的统计图，如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/5f/21/5fc9118207cb1f45f270bdd5f5090221.png?wh=2852*1780\" alt=\"\"></p><p>可以看到，前三个月会超过2%的磁盘损坏率，到第二年这个数字会上升到8%左右。</p><p>你可能会说，这个数字也不是很高啊。</p><p>但你要知道，对金融行业的关键应用系统来说，通常是要求具备5个9的可靠性（99.999%），也就是说，一年中系统的服务中断时间不能超过5.26分钟（365<code>*</code>24<code>*</code>60<code>*</code>（1-99.999%） ≈ 5.26 ）。</p><p>而且，不只是金融行业，随着人们对互联网的依赖，越来越多的系统都会有这样高的可靠性要求。</p><p>根据这两个数字，我们可以设想一下，如果你所在的公司有四、五个关键业务系统，十几台数据库服务器，磁盘数量一定会超过100个吧？那么我们保守估计，按照损坏率2%来算，一年中就会碰到2次磁盘损坏的情况，要达到5个9的可靠性你就只有5.26分钟，能处理完一次磁盘故障吗？这几乎是做不到的，可能你刚冲到机房，时间就用完了。</p><p>我猜你会建议用RAID（独立冗余磁盘阵列）来提高磁盘的可靠性。这确实是一个办法，但也会带来性能上的损耗和存储空间上的损失。分布式数据库的副本机制可以比RAID更好地平衡可靠性、性能和空间利用率三者的关系。副本机制就是将一份数据同时存储在多个机器上，形成多个物理副本。</p><p>回到数据库的话题上，可靠性还要更复杂一点，包括两个度量指标，恢复时间目标（Recovery Time Objective, RTO）和恢复点目标（Recovery Point Objective, RPO）。RTO是指故障恢复所花费的时间，可以等同于可靠性；RPO则是指恢复服务后丢失数据的数量。</p><p>数据库存储着重要数据，而金融行业的数据库更是关系到客户资产安全，不能容忍任何数据丢失。所以，数据库高可靠意味着RPO等于0，RTO小于5分钟。</p><p>传统上，银行通过两种方法配合来实现这个目标。</p><p>第一种还是采购小型机和大型机，因为它们的稳定性优于x86服务器。</p><p>第二种是引入专业存储方案，例如EMC的Symmetrix远程镜像软件（Symmetrix Remote Data Facility, SRDF）。数据库采用主备模式，在高端共享存储上保存数据库文件和日志，使数据库近似于无状态化。主库一旦出现问题，备库启动并加载共享存储的文件，继续提供服务。这样就可以做到RPO为零，RTO也比较小。</p><p>但是，这套方案依赖专用的软硬件，不仅价格昂贵，而且技术体系封闭。在去IOE（IBM小型机、Oracle数据库和EMC存储设备）的大背景下，我们必须另辟蹊径。分布式数据库则是一个很好的备选方案，它凭借节点之间的互为备份、自动切换的机制，降低了x86服务器的单点故障对系统整体的影响，提供了高可靠性保障。</p><p>令人兴奋的是，这种单点故障处理机制甚至可以延展到机房层面，通过远距离跨机房部署。如此一来，即使在单机房整体失效的情况下，系统仍然能够正常运行，数据库永不宕机。</p><p>至此，我们得出一个3.0版本的定义，<strong>分布式数据库是服务于写多读少、低延时、海量并发OLTP场景的，高可靠的关系型数据库</strong>。</p><h3>定义4.0 +海量存储</h3><p>还有没有4.0版本呢？</p><p>你猜的没错，我们还要补充一些存储能力的变化。</p><p>虽然单体数据库依靠外置存储设备可以扩展存储能力，但这种方式本质上不是数据库的能力。现在，借助分布式的横向扩展架构，通过物理机的本地磁盘就可以获得强大的存储能力，这让海量存储成为分布式数据库的标配。</p><p>最后，我们终于得到一个4.0终极版本的定义，<strong>分布式数据库是服务于写多读少、低延时、海量并发OLTP场景的，具备海量数据存储能力和高可靠性的关系型数据库</strong>。</p><h2>内部视角：内部构成</h2><p>只通过外部视角来看分布式数据库，已经足够了吗？其实，具有相同的外在特性和功效，未必就是同样的事物。</p><p>举个例子，哥白尼刚提出“日心说”来反驳“地心说”的时候，要用到34个圆周来解释天体的运动轨迹；而100多年后，开普勒只用7个椭圆就达到了同样的效果，彻底摧毁了“地心说”。从哥白尼到开普勒，效果近似，简洁程度却大不一样，这背后代表的是巨大的科学进步。</p><p>因此，讲完分布式数据库的外部特性之后，我们还要从内部视角来进行观察。</p><p>事实上，为了应对海量存储和海量并发，很多解决方案在效果上跟我们4.0版本的定义很相似。但是，它们向用户暴露了太多的内部复杂性。在我看来，对用户约束太多、使用过程太复杂、不够内聚的方案，不能称为成熟的产品。同时，业界的主流观点并不认为它们是分布式数据库，所以我们这门课也就不重点讨论了。</p><p>为了让你看清其中的差别，我将这些方案简单地分类介绍一下。</p><ol>\n<li><strong>客户端组件 + 单体数据库</strong></li>\n</ol><p>通过独立的逻辑层建立数据分片和路由规则，实现单体数据库的初步管理，使应用能够对接多个单体数据库，实现并发、存储能力的扩展。其作为应用系统的一部分，对业务侵入比较深。</p><p>这种客户端组件的典型产品是Sharding-JDBC。</p><p><img src=\"https://static001.geekbang.org/resource/image/7a/da/7a86887e1f8f97f8a660c9434febc9da.jpg?wh=2700*1341\" alt=\"\"></p><ol start=\"2\">\n<li><strong>代理中间件 + 单体数据库</strong></li>\n</ol><p>以独立中间件的方式，管理数据规则和路由规则，以独立进程存在，与业务应用层和单体数据库相隔离，减少了对应用的影响。随着代理中间件的发展，还会衍生出部分分布式事务处理能力。</p><p>这种中间件的典型产品是MyCat。</p><p><img src=\"https://static001.geekbang.org/resource/image/88/ec/88728291d4c48a8a999bd56a04488cec.jpg?wh=2700*1437\" alt=\"\"></p><ol start=\"3\">\n<li><strong>单元化架构 + 单体数据库</strong></li>\n</ol><p>单元化架构是对业务应用系统的彻底重构，应用系统被拆分成若干实例，配置独立的单体数据库，让每个实例管理一定范围的数据。例如对于银行贷款系统，可以为每个支行搭建独立的应用实例，管理支行各自的用户，当出现跨支行业务时，由应用层代码通过分布式事务组件保证事务的ACID特性。</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/97/4b41ffef868c2277ae40580cd2044997.jpg?wh=2700*1401\" alt=\"\"></p><p>根据不同的分布式事务模型，应用系统要配合改造，复杂性也相应增加。例如TCC模型下，应用必须能够提供幂等操作。</p><p>在分布式数据库出现前，一些头部互联网公司使用过这种架构风格，该方案的应用系统的改造量最大，实施难度也最高。</p><p>看过这三种方案，我相信你能够明白，它们共同的特点是单体数据库仍然能够被应用系统感知到。相反，分布式数据库则是<strong>将技术细节收敛到产品内部，以一个整体面对业务应用。</strong></p><p>我猜，看到这里你一定很想知道，分布式数据库的内部架构到底长什么样呢？它跟这三种方案有什么区别呢？回答这个复杂的问题，就是我们这门课的使命了。这里你也可以先记下自己的答案，等学完这门课以后再回过头来做个对比，也是对自己学习效果的一种检验。</p><h2>小结</h2><p>好了，以上就是今天的主要内容了，我们来小结一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/8c/a4/8c0e6e7100efdfbf57412840a3fddda4.jpg?wh=2003*801\" alt=\"\"></p><p>我们通过逐层递进的方式，勾勒出分布式数据库的六个外部特性，分别是<strong>写多读少、低延时、海量并发、海量存储、高可靠性、关系型数据库。</strong></p><p>同时，也存在一些与分布式数据库能力近似的解决方案，这些方案的不足之处是都需要对应用系统进行一定的改造，对应用的侵入程度更深；其优势则在于可以最大程度利用单体数据库的稳定可靠，毕竟这些特性已经历经无数次的考验。</p><p>最后，我想就分布式数据库的名称做一些延伸。</p><p>“分布式数据库”在字面上可以分解为“分布式”和“数据库”两部分，代表了它是跨学科的产物，它的理论基础来自两个领域。这同时也呼应了产品发展的两条不同路径，一些产品是从分布式存储系统出发，进而增加关系型数据库的能力；另外一些产品是从单体数据库出发，增加分布式技术元素。而随着分布式数据库的走向工业应用，在外部需求的驱动下，这两种发展思路又呈现出进一步融合的趋势。</p><h2>思考题</h2><p>在准备分布式数据库这门课的过程中，有的朋友建议我讲讲Aurora，但其实Aurora和这里说的分布式数据库还是有明显差别的，所以没有纳入正式课程。你了解Aurora或者它的同类产品吗？你觉得它和我所说的分布式数据库之间的差异是什么？那导致这种差异的原因又是什么呢？</p><p>欢迎你在评论区留言和我一起讨论，我会在答疑篇回复这个问题，如果感兴趣的同学很多，说不定会有加餐哦。</p><p>最后，如果你身边也有朋友对如何定义分布式数据库这个概念有困惑，欢迎你把今天这一讲分享给他，我们一起讨论。</p>","neighbors":{"left":{"article_title":"开篇词｜为什么要学习分布式数据库？","id":271369},"right":{"article_title":"02｜强一致性：那么多数据一致性模型，究竟有啥不一样？","id":272104}},"comments":[{"had_liked":false,"id":241272,"user_name":"趁早","can_delete":false,"product_type":"c1","uid":1031970,"ip_address":"","ucode":"949FB3AA250D80","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/22/26530e66.jpg","comment_is_top":false,"comment_ctime":1597233890,"is_pvip":false,"replies":[{"id":"89138","content":"你好，之所以强调写多读少，因为写操作的负载只能是单体数据库的主节点上，是无法转移的；而读操作，如果对一致性要求不高可以转移到备节点，甚至在某些条件下还能保证一致性。就是说单体数据库可以通过一主多备解决读负载大的问题，而无需引入分布式数据库","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597238064,"ip_address":"","comment_id":241272,"utype":1}],"discussion_count":6,"race_medal":0,"score":"259295271650","product_id":100057401,"comment_content":"我也不太能理解老师说的分布式数据库服务于写多读少的应用，我觉得不管是写多还是读多都可以应用分布式，关键是单体已经承担不了这么多请求了（不论读写），所以其实高并发就够了，不应该吧写多读少加入到分布式数据库的定义里面","like_count":61,"discussions":[{"author":{"id":1729060,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/62/24/07e2507c.jpg","nickname":"托尼斯威特","note":"","ucode":"98A1035527292E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301787,"discussion_content":"强调的是write heavy, 不一定读就少，是吧","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1598637527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1032375,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c0/b7/b518912b.jpg","nickname":"KayGuoWhu","note":"","ucode":"7C5BCFEA6ECF3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1729060,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/62/24/07e2507c.jpg","nickname":"托尼斯威特","note":"","ucode":"98A1035527292E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361874,"discussion_content":"不过相对NoSQL，这里所说的写多，其实就不算多了。比如HBase、Cassandra这些NoSQL系统，是专门针对高并发和高吞吐写入场景设计的，当然是非结构化和半结构化数据的场景。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1616770982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301787,"ip_address":""},"score":361874,"extra":""}]},{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503690,"discussion_content":"你好，之所以强调写多读少，因为写操作的负载只能是单体数据库的主节点上，是无法转移的；而读操作，如果对一致性要求不高可以转移到备节点，甚至在某些条件下还能保证一致性。就是说单体数据库可以通过一主多备解决读负载大的问题，而无需引入分布式数据库","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1597238064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1215758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8d/0e/1f49ade9.jpg","nickname":"大汉_客家族_数据工程_曾院士","note":"","ucode":"AD73C36D617CA1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371426,"discussion_content":"实际上OLTP业务是复杂的基本上读多写少。80%读20%写","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1619766986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2946390,"avatar":"","nickname":"Geek_9789cf","note":"","ucode":"0AC5CE57A086E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575342,"discussion_content":"那应该是事务写多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654761398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2830698,"avatar":"","nickname":"Geek5715","note":"","ucode":"57A8F9D983ABD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533975,"discussion_content":"我也这样认为，这类场景读取多余写入","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638047152,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240886,"user_name":"kylexy_0817","can_delete":false,"product_type":"c1","uid":1068372,"ip_address":"","ucode":"392DD9DD5E4B6E","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/54/9c214885.jpg","comment_is_top":false,"comment_ctime":1597110142,"is_pvip":false,"replies":[{"id":"89067","content":"分布式数据库和分库分表的最大区别在于，分布式数据库的使用体验是非常接近关系型数据库的，不需要应用进行额外的控制，这就降低了代码的开发难度。而分库分表方案在分布式事务和跨节点查询等方面，通常支持的都不好。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597133000,"ip_address":"","comment_id":240886,"utype":1}],"discussion_count":1,"race_medal":0,"score":"74611554174","product_id":100057401,"comment_content":"一直没接触过分布式关系型数据库，感觉就是把客户端或中间件的方案直接作为数据库服务端的特性组件，把分库分表做得更为自动化🙃","like_count":18,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503585,"discussion_content":"分布式数据库和分库分表的最大区别在于，分布式数据库的使用体验是非常接近关系型数据库的，不需要应用进行额外的控制，这就降低了代码的开发难度。而分库分表方案在分布式事务和跨节点查询等方面，通常支持的都不好。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1597133000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240805,"user_name":"峰","can_delete":false,"product_type":"c1","uid":1056019,"ip_address":"","ucode":"C53CB64E8E7D19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/13/31ea1b0b.jpg","comment_is_top":false,"comment_ctime":1597070526,"is_pvip":true,"replies":[{"id":"89066","content":"总结的很好，log is database是aurora类数据库的设计思想。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597132719,"ip_address":"","comment_id":240805,"utype":1}],"discussion_count":1,"race_medal":0,"score":"61726612670","product_id":100057401,"comment_content":"云dbms再分布式基础上更关注于计算存储分离后可独立扩展，甚至动态扩缩容，self-driven搞起来，更好卖了哈哈哈。当然这引发了不少问题，aurora提出了log is database的思想，降低写压力，snowflake通过建立中间分布式换存层，降低网络瓶颈等等。","like_count":15,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503566,"discussion_content":"总结的很好，log is database是aurora类数据库的设计思想。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597132719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289854,"user_name":"Scott少聪@SequoiaDB","can_delete":false,"product_type":"c1","uid":2389431,"ip_address":"","ucode":"9362B0548DD385","user_header":"https://static001.geekbang.org/account/avatar/00/24/75/b7/e5f8c418.jpg","comment_is_top":false,"comment_ctime":1619231443,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"48863871699","product_id":100057401,"comment_content":"活学活用「加餐」&amp;「拍砖」，希望与更多朋友交流分布式观点。<br><br>关于“Aurora是不是分布式数据库”的问题，更为精准的答案应该是：“Aurora（及PolarDB，PolarDB-X除外）是应用了分布式存储能力的数据库”。<br><br>Aurora提供的是基于MySQL或PostgreSQL改造的一写多读架构，现有架构下写节点只能Scale-up，不能横向扩展，只读节点可以扩展到15个。同时，借助于分布式存储的多副本及横向扩展能力实现更高的IO带宽，也提升了存储的容错能力，但存储容量最大只能到128TB。Aurora利用最新的CPU、RDMA网络甚至如同Optane这样最新的硬件降低延迟，提升整体性能及高可用切换效率。<br><br>回到王老师的观点，分布式数据库是：“写多读少、低延时、海量并发、海量存储、高可靠性、关系型数据库”。Aurora在写多读少方面因只支持一写多读，而有不足；海量并发方面因最多也只能扩展15个只读节点，而有不足；海量存储方面因最大只能到128TB，而有不足。有了以上的前提，可以认为“Aurora是不是分布式数据库”。<br><br>[未完待续…]","like_count":12},{"had_liked":false,"id":241508,"user_name":"开心哥","can_delete":false,"product_type":"c1","uid":1705468,"ip_address":"","ucode":"D44C1F03B23C5A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/05/fc/bceb3f2b.jpg","comment_is_top":false,"comment_ctime":1597314551,"is_pvip":false,"replies":[{"id":"89184","content":"你好，说的很好。不能多写，这点很关键，适用场景会有很大区别，所以这是一个重要标准。但是，因为Aurora是基于共享存储的，所以说它是分布式也不是没道理。我们定标准的目的，只是为了让学习的思路更清晰。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597329353,"ip_address":"","comment_id":241508,"utype":1}],"discussion_count":2,"race_medal":0,"score":"44546987511","product_id":100057401,"comment_content":"aurora也用到一点投票机制，6个副本，半数以上就确认写入成功。也算沾点边。但没有分片，不能多写，肯定不算分布式。","like_count":10,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503757,"discussion_content":"你好，说的很好。不能多写，这点很关键，适用场景会有很大区别，所以这是一个重要标准。但是，因为Aurora是基于共享存储的，所以说它是分布式也不是没道理。我们定标准的目的，只是为了让学习的思路更清晰。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597329353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1905171,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","nickname":"扩散性百万咸面包","note":"","ucode":"6D703D51553B42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307092,"discussion_content":"Aurora支持分片。分片都不支持，那为什么要存储水平扩展。。没有意义","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600494838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246062,"user_name":"Bryant.C","can_delete":false,"product_type":"c1","uid":1172363,"ip_address":"","ucode":"0DF832373CFA97","user_header":"https://static001.geekbang.org/account/avatar/00/11/e3/8b/27f875ba.jpg","comment_is_top":false,"comment_ctime":1599147712,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35958886080","product_id":100057401,"comment_content":"老师好，对于分布式数据库设计上的几种不同的share方式，在这个课程里有介绍吗？在平时经常听说类似share nothing，share everything，share disk以及share storage，这些设计理念在网上的概念都不是特别清晰，想听听老师对这块知识的梳理，谢谢～","like_count":8},{"had_liked":false,"id":241668,"user_name":"xy🥝","can_delete":false,"product_type":"c1","uid":1029430,"ip_address":"","ucode":"DA1EC0789071F0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b5/36/d444d19e.jpg","comment_is_top":false,"comment_ctime":1597386801,"is_pvip":false,"replies":[{"id":"89214","content":"你好，你说的很对，三款产品都是类似的架构，还有华为的Taurus。这个架构的局限是写入不能横向扩展，但对于中小型应用也够了。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597409333,"ip_address":"","comment_id":241668,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35957125169","product_id":100057401,"comment_content":"AWS aurora，阿里polarDB，腾讯CynosDB，架构上是比较类似的，计算存储分离。<br>所有计算节点都访问存储节点上的同一份数据，也可以说是分布式架构的。建议老师加个餐讲讲","like_count":8,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503808,"discussion_content":"你好，你说的很对，三款产品都是类似的架构，还有华为的Taurus。这个架构的局限是写入不能横向扩展，但对于中小型应用也够了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597409333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289855,"user_name":"Scott少聪@SequoiaDB","can_delete":false,"product_type":"c1","uid":2389431,"ip_address":"","ucode":"9362B0548DD385","user_header":"https://static001.geekbang.org/account/avatar/00/24/75/b7/e5f8c418.jpg","comment_is_top":false,"comment_ctime":1619231479,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"27389035255","product_id":100057401,"comment_content":"[接上]<br><br>先来「加个餐」，对于为什么Aurora只能支持到128TB，我有一个猜想：是因为每一次进行SQL的处理是，实际上只会有1个计算节点参与处理，因此用尽1个节点的CPU、内存可以处理的数据量最终是有限的。所以我猜想，并不是存储扩展能力有限，而是从产品设计角度出发，存储再大实际上没有意义，因此控制存储大小引导客户使用其他产品处理更大的数据量问题，才是云厂商的上策。<br><br>再来「拍个砖」，王老师在本课程将只讨论“关系型数据库”，因为基于SQL的结构化关系型模型是大众使用最为广泛的。但是，实际上我还是十分希望可以有机会进行更广泛的讨论，数据库的形态多样，仅仅NoSQL就可以分出Document、KV、图、时序、对象等一众序列，我认为未来数据库的发展，会推动多种不同模型之间产生更多的连接和融合。","like_count":6,"discussions":[{"author":{"id":2115304,"avatar":"","nickname":"Kk","note":"","ucode":"4CDC63959C5A06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553410,"discussion_content":"oracle已经接入mongodb的api了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645881775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1855112,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIYj6Zv3ibicLebxo7lsPMEwpBynHkYp8pLc3FcltUfmOBSRxpmicEwIAgP9OvSKnGGdaxwsZ7yiciaSsQ/132","nickname":"冯磊","note":"","ucode":"4FFB8B984269FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371587,"discussion_content":"同感，大数据三年遇到太多分布式框架，可惜学习不成系统，希望能加个好友，有幸交流下，VX：aacc6688521","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619857024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241798,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1597446143,"is_pvip":false,"replies":[{"id":"89279","content":"这个建议很好，我和编辑商量下，看看放在哪个部分","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597467357,"ip_address":"","comment_id":241798,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23072282623","product_id":100057401,"comment_content":"建议老师画一张分布式数据库的全景图，后续的章节都可以在这张图上添砖加瓦，不然单节学完就是学完了而已，没有成体系，谢谢","like_count":5,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503847,"discussion_content":"这个建议很好，我和编辑商量下，看看放在哪个部分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597467357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240851,"user_name":"万丰路甲一号","can_delete":false,"product_type":"c1","uid":1516184,"ip_address":"","ucode":"4C32CDD7D8ADEA","user_header":"https://static001.geekbang.org/account/avatar/00/17/22/98/7151165f.jpg","comment_is_top":false,"comment_ctime":1597104914,"is_pvip":false,"replies":[{"id":"89065","content":"你好，如果需要交易代码配合做出补偿和回放，这很可能意味着它不是分布式数据库。在分布式数据库成熟前，确实有不少应用代码配合单体数据库的方式。这类应用代码也会被抽离出来形成独立的框架，如果你感兴趣，可以研究下阿里的SOFA。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597132657,"ip_address":"","comment_id":240851,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23071941394","product_id":100057401,"comment_content":"希望老师能够讲讲交易场景下，交易代码配合分布式数据库而做出的交易补偿或者数据回放等等","like_count":5,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503577,"discussion_content":"你好，如果需要交易代码配合做出补偿和回放，这很可能意味着它不是分布式数据库。在分布式数据库成熟前，确实有不少应用代码配合单体数据库的方式。这类应用代码也会被抽离出来形成独立的框架，如果你感兴趣，可以研究下阿里的SOFA。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597132657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242283,"user_name":"赵赟","can_delete":false,"product_type":"c1","uid":1164481,"ip_address":"","ucode":"B027E6F3449F9C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c4/c1/1118e24e.jpg","comment_is_top":false,"comment_ctime":1597657921,"is_pvip":false,"replies":[{"id":"89430","content":"谢谢:)","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597663773,"ip_address":"","comment_id":242283,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18777527105","product_id":100057401,"comment_content":"从老师的措辞上来看感觉老师水平很高，相对于其它老师学术范更浓一点。","like_count":4,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503970,"discussion_content":"谢谢:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597663773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240863,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1597106271,"is_pvip":true,"replies":[{"id":"89068","content":"你好，首先，OLTP的写多读少，是指请求数量。互联网确实可以通过通过一主多满足“读多写少”的场景，但前提是对读对一致性要求较低。而在金融场景中，很多读操作依然是无法在备库运行的，就是一致性不满足要求。所以，我觉得对互联网也不能一概而论，还是要区分场景。有关一致性的话题，我在02&#47;03会具体讲解，你可以先看看，我们再讨论。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597133476,"ip_address":"","comment_id":240863,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18776975455","product_id":100057401,"comment_content":"请问OLTP中“写多读少”中的“多”和“少”是指请求的数量还是请求的大小，或是什么其他的指标呢？都说互联网应用的数据请求通常是“读多写少”，所以才会有一主多从读写分离、全量数据缓存等解决“读”的问题的扩容手段。如果说的是同一个指标的话，是不是意味着分布式数据库不适合互联网应用？","like_count":4,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503580,"discussion_content":"你好，首先，OLTP的写多读少，是指请求数量。互联网确实可以通过通过一主多满足“读多写少”的场景，但前提是对读对一致性要求较低。而在金融场景中，很多读操作依然是无法在备库运行的，就是一致性不满足要求。所以，我觉得对互联网也不能一概而论，还是要区分场景。有关一致性的话题，我在02/03会具体讲解，你可以先看看，我们再讨论。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597133476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241028,"user_name":"赵见跃","can_delete":false,"product_type":"c1","uid":1319949,"ip_address":"","ucode":"F89B0BE32C3329","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJqUkoCXOxRraVNVg1fTm4O892WFVCjeL9pS8kUX2nEeTEcaS6k0kP25h3rRKtUCwSoUrY6dvP43w/132","comment_is_top":false,"comment_ctime":1597155113,"is_pvip":false,"replies":[{"id":"89139","content":"这个还是挺多的，最典型的是MPP架构数据库，比如Greenplum和华为的GaussDB 200，它们的内核都使用了PostgreSQL。此外，还有Vertica。OLAP不再强调事务的支持，如果弱化了对数据更新的要求，很多大数据生态的产品就都可以纳入进来，比如Clickhouse，Hive on spark，甚至Kylin都可以算是广义的OLAP分布式数据库","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597238602,"ip_address":"","comment_id":241028,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14482057001","product_id":100057401,"comment_content":"老师您好，基于OLAP使用场景的分布式关系型数据库，都有哪些呀？谢谢，","like_count":3,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503623,"discussion_content":"这个还是挺多的，最典型的是MPP架构数据库，比如Greenplum和华为的GaussDB 200，它们的内核都使用了PostgreSQL。此外，还有Vertica。OLAP不再强调事务的支持，如果弱化了对数据更新的要求，很多大数据生态的产品就都可以纳入进来，比如Clickhouse，Hive on spark，甚至Kylin都可以算是广义的OLAP分布式数据库","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597238602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2115304,"avatar":"","nickname":"Kk","note":"","ucode":"4CDC63959C5A06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553411,"discussion_content":"tidb\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645881822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1319949,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJqUkoCXOxRraVNVg1fTm4O892WFVCjeL9pS8kUX2nEeTEcaS6k0kP25h3rRKtUCwSoUrY6dvP43w/132","nickname":"赵见跃","note":"","ucode":"F89B0BE32C3329","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298365,"discussion_content":"学习了，多谢多谢老师。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597280862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240912,"user_name":"James","can_delete":false,"product_type":"c1","uid":1513489,"ip_address":"","ucode":"953966DEFE4461","user_header":"https://static001.geekbang.org/account/avatar/00/17/18/11/f1f37801.jpg","comment_is_top":false,"comment_ctime":1597115370,"is_pvip":false,"replies":[{"id":"89064","content":"呵呵，别急哈，一周更三篇。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597132611,"ip_address":"","comment_id":240912,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14482017258","product_id":100057401,"comment_content":"可以更新快点吗？不够看的","like_count":3,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503594,"discussion_content":"呵呵，别急哈，一周更三篇。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597132611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259120,"user_name":"咱是吓大的","can_delete":false,"product_type":"c1","uid":1292324,"ip_address":"","ucode":"A47C6DA5C00C6F","user_header":"https://static001.geekbang.org/account/avatar/00/13/b8/24/039f84a2.jpg","comment_is_top":false,"comment_ctime":1604633626,"is_pvip":true,"replies":[{"id":"94794","content":"每台节点只存储部分数据，这样才能存储才是可水平扩展的，否则数据库的总数据量只能限制在单节点上。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1605239535,"ip_address":"","comment_id":259120,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10194568218","product_id":100057401,"comment_content":"课程看到这里还有一个疑问，分布式数据库的数据是分别完整存储在几台不同服务器，还是以某种规则拆分存储在几台服务器","like_count":2,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508852,"discussion_content":"每台节点只存储部分数据，这样才能存储才是可水平扩展的，否则数据库的总数据量只能限制在单节点上。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605239535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241527,"user_name":"南国","can_delete":false,"product_type":"c1","uid":1897062,"ip_address":"","ucode":"0D8D3C5F4EB8AE","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f2/66/b16f9ca9.jpg","comment_is_top":false,"comment_ctime":1597325851,"is_pvip":false,"replies":[{"id":"89213","content":"你好，首先你把Aurora的特点说得很清楚了。我们这里说有分别，是因为Aurora的特点是Share storage，计算节点垂直扩展，存储节点水平扩展，写入性能收单机资源的影响。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597409074,"ip_address":"","comment_id":241527,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10187260443","product_id":100057401,"comment_content":"仅仅是简单看过Aurora的论文，算是有一点点了解。对于老师的问题，首先我觉得Aurora是提出一种新的单体架构以减少网络IO和同步阻塞，逻辑上可以看做一个庞大的单体数据库，用分布式来支持容错和高吞吐量。至于差异方面，我个人其实并没有看出差异。。理由如下：Aurora分片的方式是将数据库的总容量划分为固定大小的数据段，在每一段内存储数据，每一个段是一组机器（六个），个人认为算是支持分片；写多读少、低延时这就是Aurora所重点的做的事情，通过log is database和支持异步来实现；海量存储可以靠堆机器（当然这些机器肯定是有一个控制中心来管理的，论文中没有提）；高可靠则是靠每一个数据段把数据冗余到三个可用区的六台机器；而且它同样也是关系型数据库呀。希望老师纠正！","like_count":2,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503763,"discussion_content":"你好，首先你把Aurora的特点说得很清楚了。我们这里说有分别，是因为Aurora的特点是Share storage，计算节点垂直扩展，存储节点水平扩展，写入性能收单机资源的影响。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1597409074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241033,"user_name":"赵见跃","can_delete":false,"product_type":"c1","uid":1319949,"ip_address":"","ucode":"F89B0BE32C3329","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJqUkoCXOxRraVNVg1fTm4O892WFVCjeL9pS8kUX2nEeTEcaS6k0kP25h3rRKtUCwSoUrY6dvP43w/132","comment_is_top":false,"comment_ctime":1597156758,"is_pvip":false,"replies":[{"id":"89142","content":"你好，首先我对MyCat的最新发展了解的不多。个人认为随着分布式数据库的发展，MyCat这类中间件的市场会越来越小。当然，它的使用场景也可能转向对异构数据库的支持，就像Presto那样。<br>PolarDB和Aurora的架构类似，计算与存储分离，计算节点垂直扩展，存储节点水平扩展。这意味着它的写入能力是有上限的，但是因为简化了日志的存储，和其他一些优化，单节点能力比普通的MySQL好强很多。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597239735,"ip_address":"","comment_id":241033,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10187091350","product_id":100057401,"comment_content":"老师好，MyCat现在发展的怎么样，性能上不知道，是否改善了。谢谢。<br>再请教一个问题，阿里的PolarDB是分布式数据库吧？它采用的是哪种方案呢？靠谱不？谢谢。","like_count":2,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503627,"discussion_content":"你好，首先我对MyCat的最新发展了解的不多。个人认为随着分布式数据库的发展，MyCat这类中间件的市场会越来越小。当然，它的使用场景也可能转向对异构数据库的支持，就像Presto那样。\nPolarDB和Aurora的架构类似，计算与存储分离，计算节点垂直扩展，存储节点水平扩展。这意味着它的写入能力是有上限的，但是因为简化了日志的存储，和其他一些优化，单节点能力比普通的MySQL好强很多。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597239735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1319949,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJqUkoCXOxRraVNVg1fTm4O892WFVCjeL9pS8kUX2nEeTEcaS6k0kP25h3rRKtUCwSoUrY6dvP43w/132","nickname":"赵见跃","note":"","ucode":"F89B0BE32C3329","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298363,"discussion_content":"学习了，多谢多谢老师。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597280704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":254016,"user_name":"test","can_delete":false,"product_type":"c1","uid":1129610,"ip_address":"","ucode":"C57A175CBC6547","user_header":"https://static001.geekbang.org/account/avatar/00/11/3c/8a/900ca88a.jpg","comment_is_top":false,"comment_ctime":1603017391,"is_pvip":false,"replies":[{"id":"92798","content":"分布式数据库一直是学术界的研究课题，是基础软件。区块链更多是一种偏应用层面的技术，谈不上推动分布式数据库的发展。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1603079333,"ip_address":"","comment_id":254016,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5897984687","product_id":100057401,"comment_content":"分布式数据库是区块链流行的推动吗？还是技术领域本来就到了他出场的时候，因为感觉分布式数据正好适用于区块链的场景，区块链也催生分布式数据库","like_count":1,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507253,"discussion_content":"分布式数据库一直是学术界的研究课题，是基础软件。区块链更多是一种偏应用层面的技术，谈不上推动分布式数据库的发展。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603079333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241529,"user_name":"南国","can_delete":false,"product_type":"c1","uid":1897062,"ip_address":"","ucode":"0D8D3C5F4EB8AE","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f2/66/b16f9ca9.jpg","comment_is_top":false,"comment_ctime":1597326106,"is_pvip":false,"replies":[{"id":"89217","content":"你好，BigTable是分布式键值系统，并不属于分布式数据库。因为这里所说的分布式数据库是分布式架构实现的关系型数据库。当然它的底层依赖一个分布式文件系统，所以看上去也是分为两层，但它的职能和数据库差别很大，推荐你看下04讲，关注其中的PGXC风格分布式数据库，有问题可以接着留言，我们继续聊。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597410377,"ip_address":"","comment_id":241529,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5892293402","product_id":100057401,"comment_content":"想问问老师，根据文中的定义，BigTable就算是属于特殊的（代理中间件 + 单体数据库（分布式文件系统））吗？它毕竟是靠Chubby来作为一个中间层的，不过数据的获取是直接与文件系统中交互完成的。我一直以为它也算是分布式数据库。","like_count":1,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503765,"discussion_content":"你好，BigTable是分布式键值系统，并不属于分布式数据库。因为这里所说的分布式数据库是分布式架构实现的关系型数据库。当然它的底层依赖一个分布式文件系统，所以看上去也是分为两层，但它的职能和数据库差别很大，推荐你看下04讲，关注其中的PGXC风格分布式数据库，有问题可以接着留言，我们继续聊。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597410377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241162,"user_name":"扩散性百万咸面包","can_delete":false,"product_type":"c1","uid":1905171,"ip_address":"","ucode":"6D703D51553B42","user_header":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","comment_is_top":false,"comment_ctime":1597205402,"is_pvip":false,"replies":[{"id":"89140","content":"你好，这里没有纳入Aurora，是因为它架构不支持对写入负载的横向扩展。当然，对很多小规模的应用来说也足够了，所以这不影响它取得商业成功。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597238915,"ip_address":"","comment_id":241162,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5892172698","product_id":100057401,"comment_content":"不是很懂为什么说Aurora不是分布式数据库。Aurora通过计算和存储服务分离，使得亚马逊的云存储服务更加高效和易于使用。算是Newsql中比较成功的一个流派了。","like_count":1,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503660,"discussion_content":"你好，这里没有纳入Aurora，是因为它架构不支持对写入负载的横向扩展。当然，对很多小规模的应用来说也足够了，所以这不影响它取得商业成功。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597238915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1494311,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epdUKuOV21hnfTmXPibv5ReJCCIxiamtzXkibh9p41sSJeYQ87swreLWlTNEibh5ibefsoJfFppOvR088Q/132","nickname":"Geek_05de53","note":"","ucode":"20872B89D6A782","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379481,"discussion_content":"Aurora虽是存储计算分离，但计算层还是一主多从的架构，且主节点无法横向扩容。设计上也不属于NewSQL，更像是云上的MySQL。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623923520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356583,"user_name":"Geek_aa8617","can_delete":false,"product_type":"c1","uid":1609390,"ip_address":"上海","ucode":"D63495B14B22C2","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJMwJp2vbhkH4z9WAg71xquHp2mCialKbtgOwOjmHjG1DgZOF6Nne53xHl7JXlAjr9NYQfEcl8vqzg/132","comment_is_top":false,"comment_ctime":1662438523,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662438523","product_id":100057401,"comment_content":"请教一下，OLAP和OLTP是不是需要选用不同的数据库存储方案？目前OLAP 一般都用大数据平台进行计算，但还是会把结果数据导出到数据库进行报表、数据接口类的应用。是不是应用数据的存储也需要选择不同于传统数据库的，更适合快速查询的存储方案？","like_count":0},{"had_liked":false,"id":343425,"user_name":"wangshanhe","can_delete":false,"product_type":"c1","uid":1204846,"ip_address":"","ucode":"1457998F100A89","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKmyjUJe2FxeyL5VMuJlpCFeJKy4SYpicbpCgyPSqbiafPlhibQT2fLWJzqV1ANSDiaSMDVTJVGyAnIow/132","comment_is_top":false,"comment_ctime":1650849121,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650849121","product_id":100057401,"comment_content":"单元化架构下，通过路由进行数据分片，而对于单个单元下，又使用了一主两从的主备复制的数据库架构设计方案，现在针对这个单个单元的两个备用数据库想要利用起来，想在这个基础上再去做读写分离，想请教一下老师这种有没有风险，对于整链路的可靠性是否有影响？","like_count":0},{"had_liked":false,"id":327345,"user_name":"杜思奇","can_delete":false,"product_type":"c1","uid":2865281,"ip_address":"","ucode":"390D2D5045AE95","user_header":"https://static001.geekbang.org/account/avatar/00/2b/b8/81/a0afe928.jpg","comment_is_top":false,"comment_ctime":1640073597,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640073597","product_id":100057401,"comment_content":"老师想问下，华为 GaussDB(for MySQL)是不是也不算咱们本次课程所讲的分布式数据库。根据华为的官方文档 GaussDB(for MySQL)是1写15读，不支持多写","like_count":0},{"had_liked":false,"id":300023,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1624957972,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624957972","product_id":100057401,"comment_content":"分布式最大的特点应当是在其处理高并发且底层存储分布式吧，之前应用中给我的感觉也是如此-尤其是其分片、分表确实操作上RMDB的老手都不好处理。<br>记得看过盖国强对GoldenDB的分析和评述，其解释的重大也在存储这方面。","like_count":0},{"had_liked":false,"id":295679,"user_name":"十","can_delete":false,"product_type":"c1","uid":2350684,"ip_address":"","ucode":"8A2A93FD8DB36B","user_header":"https://static001.geekbang.org/account/avatar/00/23/de/5c/3b594e24.jpg","comment_is_top":false,"comment_ctime":1622541138,"is_pvip":false,"replies":[{"id":"108731","content":"是的，针对OLTP","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1624886319,"ip_address":"","comment_id":295679,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622541138","product_id":100057401,"comment_content":"老师，我向问下，分布式数据库的六个外部特性，是不是只是针对OLTP场景的，如果是OLAP，就不是这六个特性了？","like_count":0,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521177,"discussion_content":"是的，针对OLTP","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624886319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290863,"user_name":"冯磊","can_delete":false,"product_type":"c1","uid":1855112,"ip_address":"","ucode":"4FFB8B984269FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIYj6Zv3ibicLebxo7lsPMEwpBynHkYp8pLc3FcltUfmOBSRxpmicEwIAgP9OvSKnGGdaxwsZ7yiciaSsQ/132","comment_is_top":false,"comment_ctime":1619792157,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619792157","product_id":100057401,"comment_content":"在极客学习了MySQL、Redis、Kafka、MQ好多门课程了，发现对分布式越来越有兴趣。从业大数据三年，各种分布式存储框架，计算框架都需要学习分布式的知识。有没有交流群，专门讨论分布式数据库，有的话请加下好友，或者我来组织一个。VX：aacc6688521。","like_count":0},{"had_liked":false,"id":287755,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1618134187,"is_pvip":false,"replies":[{"id":"104500","content":"分布式数据库的最核心特性是可横向扩展，所以必然不能是单点，这个单点是指物理设备。而从外部看，它的目标是将功能性表现想单体数据库一样。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1618145837,"ip_address":"","comment_id":287755,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618134187","product_id":100057401,"comment_content":"所谓分布式数据库我认为是屏蔽了内部细节的单点数据库吧。比如分布式数据一致性，分布式事务等都是分布式数据库必须解决的问题。","like_count":0,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518407,"discussion_content":"分布式数据库的最核心特性是可横向扩展，所以必然不能是单点，这个单点是指物理设备。而从外部看，它的目标是将功能性表现想单体数据库一样。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618145837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281099,"user_name":"咱是吓大的","can_delete":false,"product_type":"c1","uid":1292324,"ip_address":"","ucode":"A47C6DA5C00C6F","user_header":"https://static001.geekbang.org/account/avatar/00/13/b8/24/039f84a2.jpg","comment_is_top":false,"comment_ctime":1614582375,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1614582375","product_id":100057401,"comment_content":"请教下老师，分布式数据库和数据库集群有什么异同点和优劣","like_count":0,"discussions":[{"author":{"id":1215758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8d/0e/1f49ade9.jpg","nickname":"大汉_客家族_数据工程_曾院士","note":"","ucode":"AD73C36D617CA1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371429,"discussion_content":"一定程度上提高了TPS","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619767898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1215758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8d/0e/1f49ade9.jpg","nickname":"大汉_客家族_数据工程_曾院士","note":"","ucode":"AD73C36D617CA1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371428,"discussion_content":"数据库集群基本上类似计算节点水平扩展，数据存储只能垂直扩展。满足高可用，ORACLE  RAC  MYSQL MGR","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619767845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258350,"user_name":"dbtiger","can_delete":false,"product_type":"c1","uid":1324202,"ip_address":"","ucode":"05E8447593318C","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/aa/431de942.jpg","comment_is_top":false,"comment_ctime":1604393825,"is_pvip":false,"replies":[{"id":"97611","content":"简单来说，如果用户感受几乎不到它与单体数据库的区别，才是一个真正的分布式数据库。也就是说，要做到对应用几乎是透明的。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1608522371,"ip_address":"","comment_id":258350,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604393825","product_id":100057401,"comment_content":"“将技术细节收敛到产品内部，以一个整体面对业务应用。”这句话怎么来理解呢？怎么区分真正的分布式，如果应用端发起SQL，各个节点都起会话，1个应用端连接就占用节点个数连接数资源，那这样算是那种框架的分布式数据库呢？","like_count":0,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508629,"discussion_content":"简单来说，如果用户感受几乎不到它与单体数据库的区别，才是一个真正的分布式数据库。也就是说，要做到对应用几乎是透明的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608522371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":256243,"user_name":"小炭","can_delete":false,"product_type":"c1","uid":1109544,"ip_address":"","ucode":"E20E3958CAF06C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/28/c04a0c83.jpg","comment_is_top":false,"comment_ctime":1603583902,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1603583902","product_id":100057401,"comment_content":"老师讲的非常好，非常清楚的定义了现代及未来的分布式数据库要解决的实际问题。","like_count":0},{"had_liked":false,"id":254017,"user_name":"test","can_delete":false,"product_type":"c1","uid":1129610,"ip_address":"","ucode":"C57A175CBC6547","user_header":"https://static001.geekbang.org/account/avatar/00/11/3c/8a/900ca88a.jpg","comment_is_top":false,"comment_ctime":1603017881,"is_pvip":false,"replies":[{"id":"92799","content":"关于开源数据库的稳定性，可以先了解下MySQL和PostgreSQL。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1603082757,"ip_address":"","comment_id":254017,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603017881","product_id":100057401,"comment_content":"看到老师说银行上线tidb，感觉开源数据库可能没商用的oracle稳定，会不会出现丢数据的bug呢","like_count":0,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507254,"discussion_content":"关于开源数据库的稳定性，可以先了解下MySQL和PostgreSQL。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603082757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246759,"user_name":"Aaron","can_delete":false,"product_type":"c1","uid":1198001,"ip_address":"","ucode":"261C1321DB7DC7","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/b1/290cd99d.jpg","comment_is_top":false,"comment_ctime":1599471221,"is_pvip":false,"replies":[{"id":"90669","content":"当然有选NewSQL了：），北京银行和光大银行都上线了TiDB，Oceanbase也在南京银行落地了。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1599474708,"ip_address":"","comment_id":246759,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1599471221","product_id":100057401,"comment_content":"老师现在银行选用Newsql的多嘛？光大银行本身有没有使用newsql？","like_count":0,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505221,"discussion_content":"当然有选NewSQL了：），北京银行和光大银行都上线了TiDB，Oceanbase也在南京银行落地了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599474708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1061404,"avatar":"https://static001.geekbang.org/account/avatar/00/10/32/1c/3e3cdad2.jpg","nickname":"Jackson","note":"","ucode":"FD22D39510CF8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371918,"discussion_content":"作者回答有歧义了，是否选择nosql和是否用到核心流程是两码事，这种回答很同意让不太了解的人把两者画等号。使用tidb的银行，是否都是核心交易流程的全替换呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620052977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1623409,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c5/71/f7c43b49.jpg","nickname":"风向北吹","note":"","ucode":"2FD0BC5159E1C1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332141,"discussion_content":"TiDB兼容MySQL，可以无缝迁移，现在还支持OLAP，前途不可限量","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607073611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244596,"user_name":"tracy","can_delete":false,"product_type":"c1","uid":1230864,"ip_address":"","ucode":"24C3A7422BF040","user_header":"https://static001.geekbang.org/account/avatar/00/12/c8/10/36f36b42.jpg","comment_is_top":false,"comment_ctime":1598588225,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598588225","product_id":100057401,"comment_content":"OLAP的分布式数据库（greenplum之类的）也想要了解","like_count":0},{"had_liked":false,"id":243724,"user_name":"Geek_mango","can_delete":false,"product_type":"c1","uid":1526460,"ip_address":"","ucode":"C9B4FD825065B5","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/bc/21b36468.jpg","comment_is_top":false,"comment_ctime":1598256995,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1598256995","product_id":100057401,"comment_content":"我也不太理解老师说的读多写少，虽然有那个能力但是不一定要那样做，就像汽车能开到200码但是一般不会。如果说是具有高写入能力更能理解。","like_count":0,"discussions":[{"author":{"id":1215758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8d/0e/1f49ade9.jpg","nickname":"大汉_客家族_数据工程_曾院士","note":"","ucode":"AD73C36D617CA1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371434,"discussion_content":"老师说是写多读少。是说读写分离后如何提高主库写能力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619768053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241893,"user_name":"FF","can_delete":false,"product_type":"c1","uid":1056165,"ip_address":"","ucode":"79E0D7C291CD1E","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/a5/d50f4c9f.jpg","comment_is_top":false,"comment_ctime":1597489697,"is_pvip":false,"replies":[{"id":"89308","content":"你好，Aurora还是关系型数据库，而分布式存储系统范围较广，比如HBase这样的分布式键值系统。两者在功能上有很大差异。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597561504,"ip_address":"","comment_id":241893,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597489697","product_id":100057401,"comment_content":"可以从实际场景说下Aurora和分布式存储的应用的差别吗","like_count":0,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503868,"discussion_content":"你好，Aurora还是关系型数据库，而分布式存储系统范围较广，比如HBase这样的分布式键值系统。两者在功能上有很大差异。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597561504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240796,"user_name":"_______Harvey凝枫😗","can_delete":false,"product_type":"c1","uid":1693393,"ip_address":"","ucode":"91F03CA28935D1","user_header":"https://static001.geekbang.org/account/avatar/00/19/d6/d1/dc09b604.jpg","comment_is_top":false,"comment_ctime":1597068030,"is_pvip":false,"replies":[{"id":"89063","content":"<br>嗯，AWS的拳头产品，云原生数据库，还是很有特点的。","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597132575,"ip_address":"","comment_id":240796,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597068030","product_id":100057401,"comment_content":"没主动了解过Aurora，一直把它当成常见的分布式数据库看待的，他很特殊么？","like_count":0,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503564,"discussion_content":"\n嗯，AWS的拳头产品，云原生数据库，还是很有特点的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597132575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240781,"user_name":"gtp","can_delete":false,"product_type":"c1","uid":1372089,"ip_address":"","ucode":"12E21307343B3A","user_header":"https://static001.geekbang.org/account/avatar/00/14/ef/b9/c0c12bea.jpg","comment_is_top":false,"comment_ctime":1597062000,"is_pvip":false,"replies":[{"id":"89069","content":"谢谢，希望不辜负你的期待","user_name":"作者回复","user_name_real":"王磊(Ivan)","uid":"1602401","ctime":1597133534,"ip_address":"","comment_id":240781,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597062000","product_id":100057401,"comment_content":"期待已久","like_count":0,"discussions":[{"author":{"id":1602401,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/61/3059679f.jpg","nickname":"王磊(Ivan)","note":"","ucode":"CF0B955A06FE2A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503557,"discussion_content":"谢谢，希望不辜负你的期待","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597133534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}