{"id":215640,"title":"加餐  | 拜占庭将军问题：如何基于签名消息实现作战计划的一致性？","content":"<p>你好，我是韩健。</p><p>在<a href=\"https://time.geekbang.org/column/article/195662\">01讲</a>中，为了不啰嗦，让你举一反三地学习，我对签名消息型拜占庭问题之解，没有详细展开，而是聚焦在最核心的点“签名约束了叛徒的作恶行为”，但从留言来看，很多同学在理解签名和如何实现作战一致性上，还是遇到了问题。比如不理解如何实现作战计划的一致性。</p><p>另外，考虑到签名消息是一些常用的拜占庭容错算法（比如PBFT）的实现基础，很重要，所以这节课我会对签名消息型拜占庭问题之解进行补充。在今天的内容中，除了具体讲解如何基于签名消息实现作战计划的一致性之外，我还会说一说什么是签名消息。希望在帮你掌握签名消息型拜占庭问题之解的同时，还帮你吃透相关的基础知识。</p><p>当然，在学完01讲之后，相信你已经明白了，签名消息拜占庭问题之解，之所以能够容忍任意数量的叛徒，关键就在于通过消息的签名，约束了叛徒的作恶行为，也就是说，任何篡改和伪造忠将的消息的行为，都会被发现。</p><p>既然签名消息这么重要，那么什么是签名消息呢？</p><h2>什么是签名消息？</h2><p>签名消息指的就是带有数字签名的消息，你可以这么理解“数字签名”：类似在纸质合同上进行签名来确认合同内容和证明身份。</p><p>在这里我想说的是，数字签名既可以证实内容的完整性，又可以确认内容的来源，实现不可抵赖性（Non-Repudiation）。既然签名消息优点那么多，<strong>那么如何实现签名消息呢？</strong></p><!-- [[[read_end]]] --><p>你应该还记得密码学的学术CP（Bob和Alice）吧（不记得的话也没关系，你把他们当作2个人就可以了），今天Bob要给Alice发送一个消息，告诉她，“我已经到北京了”，但是Bob希望这个消息能被Alice完整地接收到，内容不能被篡改或者伪造，我们一起帮Bob和Alice想想办法，看看如何实现这个消息。</p><p>首先，为了避免密钥泄露，我们推荐Bob和Alice使用非对称加密算法（比如RSA）。也就是说，加密和解密使用不同的秘钥，在这里，Bob持有需要安全保管的私钥，Alice持有公开的公钥。</p><p>然后，Bob用哈希算法（比如MD5）对消息进行摘要，然后用私钥对摘要进行加密，生成数字签名（Signature），就像下图的样子：</p><p><img src=\"https://static001.geekbang.org/resource/image/8d/75/8d69065c69944b74d77592a2aa5ea075.jpg?wh=1142*285\" alt=\"\" title=\"图1\"></p><p>接着，Bob将加密摘要和消息一起发送给Alice：</p><p><img src=\"https://static001.geekbang.org/resource/image/92/e0/924cd677d20a1fa7dca41936fc1e5ee0.jpg?wh=1142*319\" alt=\"\" title=\"图2\"></p><p>接下来，当Alice接收到消息和加密摘要（Signature）后，她会用自己的公钥对加密摘要（Signature）进行解密，并对消息内容进行摘要（Degist-2），然后将新获取的摘要（Degist-2）和解密后的摘要（Degist-1）进行对比，如果2个摘要（Digest-1和Digest-2）一致，就说明消息是来自Bob的，并且是完整的，就像下图的样子：</p><p><img src=\"https://static001.geekbang.org/resource/image/fe/9d/fe974b9037e9ef4e85c227b5a867d39d.jpg?wh=1142*541\" alt=\"\" title=\"图3\"></p><p>你看，通过这种方法，Bob的消息就能被Alice完整接收到了，任何篡改和伪造Bob消息的行为，都会因为摘要不一致，而被发现。<strong>而这个消息就是签名消息。</strong></p><p>现在，你应该理解了什么是签名消息了吧？另外，关于在留言区提到的“为什么签名消息能约束叛将们的作恶行为？”，在这里，我再补充下，通过上面的Bob和Alice的故事，我们可以看到，在数字签名的约束下，叛将们是无法篡改和伪造忠将的消息的，因为任何篡改和伪造消息的行为都会被发现，也就是作恶的行为被约束了。也就是说，叛将这时能做“小”恶（比如，不响应消息，或者叛将们相互串通发送指定的消息）但他们无法篡改或伪造忠将的消息了。</p><p>既然数字签名约束了叛将们的作恶行为，那么苏秦怎么做才能实现作战的一致性的呢？也就是忠将们执行一致的作战计划。</p><h2>如何实现作战计划的一致性？</h2><p>之前我已经提到了，苏秦可以通过签名消息的方式，不仅能在不增加将军人数的情况下，解决二忠一叛的难题，还能实现无论叛将数多少，忠诚的将军们始终能达成一致的作战计划。</p><p>为了方便你理解，我以二忠二叛（更复杂的叛徒作恶模型，因为叛徒们可以相互勾结串通）为例具体演示一下，是怎样实现作战计划的一致性的：</p><p><img src=\"https://static001.geekbang.org/resource/image/25/f9/25bdee6e350e7d4f70401c649f40bef9.jpg?wh=1142*807\" alt=\"\" title=\"图4\"></p><p>需要你注意的是，4位将军约定了一些流程来发送作战信息、执行作战指令。</p><p><strong>第一轮：</strong></p><ul>\n<li>先发送作战指令的将军，作为指挥官，其他的将军作为副官。</li>\n<li>指挥官将他的签名的作战指令发送给每位副官。</li>\n<li>每位副官，将从指挥官处收到的新的作战指令（也就与之前收的作战指令不同），按照顺序（比如按照首字母字典排序）放到一个盒子里。</li>\n</ul><p><strong>第二轮：</strong></p><ul>\n<li>除了第一轮的指挥官外，剩余的3位将军将分别作为指挥官，在上一轮收到的作战指令上，加上自己的签名，并转发给其他将军。</li>\n</ul><p><strong>第三轮：</strong></p><ul>\n<li>除了第一、二轮的指挥官外，剩余的2位将军将分别作为指挥官，在上一轮收到的作战指令上，加上自己的签名，并转发给其他将军。</li>\n</ul><p>最后，各位将军按照约定，比如使用盒子里最中间的那个指令来执行作战指令。（假设盒子中的指令为A、B、C，那中间的指令也就是第n /2个命令。其中，n为盒子里的指令数，指令从0开始编号，也就是B）。</p><p>为了帮你直观地理解，如何基于签名消息实现忠将们作战计划的一致性，我来演示一下作战信息协商过程。<strong>而且我会分别以忠将和叛将先发送作战信息为例来演示，</strong>这样可以完整地演示叛将对作战计划干扰破坏的可能性。</p><p>那么忠诚的将军先发送作战信息的情况是什么呢？</p><p>为了演示方便，假设苏秦先发起带有签名的作战信息，作战指令是“进攻”。那么在第一轮作战信息协商中，苏秦向齐、楚、燕发送作战指令“进攻”。</p><p><img src=\"https://static001.geekbang.org/resource/image/66/be/66add595b082b18e3a6feaeb4b5e6ebe.jpg?wh=1142*702\" alt=\"\" title=\"图5\"></p><p>在第二轮作战信息协商中，齐、楚、燕分别作为指挥官，向另外2位发送作战信息“进攻”。可是楚、燕已经叛变了，<strong>但在签名的约束下，他们无法篡改和伪造忠将的消息，</strong>为了达到干扰作战计划的目的，他们俩一个选择发送消息，一个默不作声，不配合。</p><p><img src=\"https://static001.geekbang.org/resource/image/6b/d0/6b5878c8dce6279dabc8db92d666cfd0.jpg?wh=1142*673\" alt=\"\" title=\"图6\"></p><p>在第三轮作战信息协商中，齐、楚分别作为指挥官，将接收到的作战信息，附加上自己的签名，并转发给另外一位（这时的叛徒燕，还是默不作声，不配合）。</p><p><img src=\"https://static001.geekbang.org/resource/image/35/23/355f1a1453547731c9a1d05090eaa123.jpg?wh=1142*699\" alt=\"\" title=\"图7\"></p><p>最终，齐收到的作战信息都是“进攻”（它收到了苏秦和楚的），按照“执行盒子最中间的指令”的约定，齐会和苏秦一起执行作战指令“进攻”，实现忠将们作战计划的一致性。</p><p>那么如果是叛徒楚先发送作战信息，干扰作战计划，结果会有所不同吗？我们来具体看一看。在第一轮作战信息协商中，楚向苏秦发送作战指令“进攻”，向齐、燕发送作战指令“撤退”。（当然还有其他的情况，这里只是选择了其中一种，其他的情况，你可以都推导着试试，看看结果是不是一样？）</p><p><img src=\"https://static001.geekbang.org/resource/image/d6/0b/d6e1997399d8e37177a4a1e98e31cb0b.jpg?wh=1142*707\" alt=\"\" title=\"图8\"></p><p>然后，在第二轮作战信息协商中，苏秦、齐、燕分别作为指挥官，将接收到的作战信息，附加上自己的签名，并转发给另外两位。</p><p><img src=\"https://static001.geekbang.org/resource/image/7e/2c/7e9066308ae3338a53c2e5561d43b22c.jpeg?wh=1142*875\" alt=\"\" title=\"图9\"></p><p><strong>为了达到干扰作战计划的目的，叛徒楚和燕相互勾结了。</strong>比如，燕拿到了楚的私钥，也就是燕可以伪造楚的签名，这个时候，燕为了干扰作战计划，给苏秦发送作战指令“进攻”，给齐发送作战指令却是“撤退”。</p><p>接着，在第三轮作战信息协商中，苏秦、齐、燕分别作为指挥官，将接收到的作战信息，附加上自己的签名，并转发给另外一位。</p><p><img src=\"https://static001.geekbang.org/resource/image/bd/e3/bd82590e3db9184067d455cf0d3a74e3.jpg?wh=1142*887\" alt=\"\" title=\"图10\"></p><p>最终，苏秦和齐收到的作战信息都是“撤退、进攻”，按照“执行盒子最中间的指令”的约定，苏秦、齐和燕一起执行作战指令“撤退”，实现了作战计划的一致性。也就是说，无论叛将楚和燕如何捣乱，苏秦和齐都能执行一致的作战计划，保证作战的胜利。</p><p>另外在这里，我想补充一点，签名消息的拜占庭问题之解，也是需要进行m+1轮（其中m为叛将数，所以你看，只有楚、燕是叛变的，那么就进行了三轮协商）。你也可以从另外一个角度理解：n位将军，能容忍(n - 2) 位叛将（只有一位忠将没有意义，因为此时不需要达成共识了）。<strong>关于这个公式，你只需要记住就好了，推导过程你可以参考论文。</strong></p><p>最后，我想说的是，签名消息型拜占庭问题之解，解决的是忠将们如何就作战计划达成共识的问题，也就只要忠将们执行了一致的作战计划就可以了。但它不关心这个共识是什么，比如，在适合进攻的时候，忠将们可能执行的作战计划是撤退。也就是，这个算法比较理论化。</p><p>关于理论化这一点，有的同学会想知道它如何去用，在我看来呢，这个算法解决的是共识的问题，没有与实际场景结合，是很难在实际场景中落地的。在实际场景中，你可以考虑后来的改进过后的拜占庭容错算法，比如PBFT算法。</p><h2>内容小结</h2><p>本节课我主要带你了解了什么签名消息，以及忠将们如何通过签名消息实现作战的一致性，我希望你明确这样几个重点：</p><p>1.数字签名是基于非对称加密算法（比如RSA、DSA、DH）实现的，它能防止消息的内容被篡改和消息被伪造。</p><p>2.签名消息约束了叛徒的作恶行为，比如，叛徒可以不响应，可以相互勾结串通，但叛徒无法篡改和伪造忠将的消息。</p><p>3.需要你注意的是，签名消息拜占庭问题之解，虽然实现了忠将们作战计划的一致性，但它不关心达成共识的结果是什么。</p><p>最后，我想说的是，签名消息、拜占庭将军问题的签名消息之解是非常经典的基础知识，影响和启发了后来的众多拜占庭容错算法（比如PBFT），理解了本讲的内容后，你能更好地理解其他的拜占庭容错算法，以及它们如何改进的？为什么要这么改进？比如，在PBFT中，基于性能的考虑，大部分场景的消息采用消息认证码（MAC），只有在视图变更（View Change）等少数场景中采用了数字签名。</p><h2>课堂思考</h2><p>我演示了在“二忠二叛”情况下，忠将们如何实现作战计划的一致性，那么你不妨推演下，在“二忠一叛”情况下，忠将们如何实现作战计划的一致性呢？欢迎在留言区分享你的看法，与我一同讨论。</p><p>最后，感谢你的阅读，如果这篇文章让你有所收获，也欢迎你将它分享给更多的朋友。</p>","comments":[{"had_liked":false,"id":194659,"user_name":"安排","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1585095438,"is_pvip":false,"replies":[{"id":"76002","content":"加一颗星:)，执行多少轮，不是由“是否当过指挥官”决定的，而是叛将数m决定的，也就是m个叛将，需要执行m +1轮。另外，论文中的“指挥官”和“副官”，是辅助大家理解的。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586197911,"ip_address":"","comment_id":194659,"utype":1}],"discussion_count":9,"race_medal":0,"score":"83189474062","product_id":100046101,"comment_content":"除了第一、二轮的指挥官外，剩余的 2 位将军将分别作为指挥官，在上一轮收到的作战指令上，加上自己的签名，并转发给其他将军。<br><br>第一二轮不是所有人都当过指挥官了吗？为什么还会有剩余的两位将军呢？","like_count":19,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488867,"discussion_content":"加一颗星:)，执行多少轮，不是由“是否当过指挥官”决定的，而是叛将数m决定的，也就是m个叛将，需要执行m +1轮。另外，论文中的“指挥官”和“副官”，是辅助大家理解的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586197911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004264,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/e8/92a2e66d.jpg","nickname":"第二少","note":"","ucode":"4A09D1E7589F67","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394792,"discussion_content":"老师在这里的表述确实不容易理解，其实应该从指令的角度来看更清楚：所有指令最初是由楚（图8）发出，第一轮共发出3条指令，都带上了楚的签名，其他将军接下来都只是转发这3条指令；第二轮，齐、苏、燕分别把第一轮收到的指令转发出去，并各自带上自己的签名，由于指令上已经有楚的签名了，所以不再把指令转发给楚，同时，齐、苏、燕又分别收到了两条指令；第三轮，齐、苏、燕继续转发第二轮收到的指令，同样，如果一条指令上已经有了某个签名，就不再把这条指令转发给对应的将军，比如齐在第二轮收到了【进攻：楚、苏】，就只把【进攻：楚、苏】转发给燕，而不再转发给楚、苏，燕最终收到的指令就是【进攻：楚、苏、齐】，可以看出这条指令最初由楚发出，然后依次流转到苏、齐、燕","likes_number":25,"is_delete":false,"is_hidden":false,"ctime":1632056891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1667093,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLan7hiaUUpTd4KiaU9XsgjxKMvIIWDZe0uNiaMjqhPZPGtZDDpCb3iaTeDj6Uozic7VzstTtiat8tsXhBg/132","nickname":"小黄人大眼睛","note":"","ucode":"33FB5E1810C46E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291953,"discussion_content":"一开始酒知道判将数那还进攻啥子","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1595031107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185200,"avatar":"https://static001.geekbang.org/account/avatar/00/12/15/b0/da3f7899.jpg","nickname":"JACK","note":"","ucode":"D33DAED49B37CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277875,"discussion_content":"显然这是没讲清楚吗，呵呵","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1591111450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1972836,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/1a/64/36f511e0.jpg","nickname":"Geek_森","note":"","ucode":"FC5D51B6CA8620","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343652,"discussion_content":"我有着楼主同样的疑问，结合坐着的模拟叛徒的例子，第三轮应该没问将军依次作为指挥官，将自己在第二轮中收到的每条消息加上自己的签名后，发给除了第一轮的将军，和第二给自己发送这条消息的叫军的其他人。但是我没想明白的是题主说的是需要协商M+1轮，那么不知道多少叛徒的情况下，协商的终止条件是什么。","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1611123854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185504,"avatar":"https://static001.geekbang.org/account/avatar/00/12/16/e0/7abad3cc.jpg","nickname":"星期八","note":"","ucode":"34A37F73A48E7F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215751,"discussion_content":"剩余的两位将军,在第二轮每位当指挥官除外的另外两位的意思吧,所以第三轮是三位将军两两发送吧","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1585378963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2900973,"avatar":"","nickname":"Geek_064e72","note":"","ucode":"D627BACE46C37C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557933,"discussion_content":"还知道叛徒数的多少？然后根据这个数量做多少轮判断？笔者明明就没有说清楚，或者说根本就是说错了。其实要完成这样的事情，是有很多前提的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1648028578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2029485,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f7/ad/4fd4d867.jpg","nickname":"数学汤家凤","note":"","ucode":"DE84E777C384AD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2900973,"avatar":"","nickname":"Geek_064e72","note":"","ucode":"D627BACE46C37C","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":559677,"discussion_content":"我也觉得，根本没说明白，看了半天，还是没看懂","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1648876300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":557933,"ip_address":""},"score":559677,"extra":""}]},{"author":{"id":2036705,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/13/e1/6939ae4f.jpg","nickname":"knight劉先生","note":"","ucode":"CEE9BFC8D3D969","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328150,"discussion_content":"保证了作战的一致性，而非胜利，胜利这个话有迷惑性","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606091601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283767,"user_name":"充值一万","can_delete":false,"product_type":"c1","uid":1519086,"ip_address":"","ucode":"1B4B3AEFA9C8C2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epRK5v3IkvSfjicKNKlRLE2nTQUowhMvQkwWWWUSESat8EBbcPvMk4aAjZHGcsE5DCibES9WicHcC9Qw/132","comment_is_top":false,"comment_ctime":1615909934,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"44565582894","product_id":100046101,"comment_content":"老师好。困惑于指令序列。按照文中列子，第一轮苏秦收到指令[功]，齐收到[撤]；第二轮后苏秦[功、功、撤]，齐[撤、功、撤]，（收到其他指挥官的指令的顺序可能不一定一致，不影响最终排序）。第三轮，苏秦[功、功、撤、撤、撤]，齐[撤、功、撤、功、功]。排序后，苏秦[撤、撤、撤、功、功]，齐[撤、撤、功、功、功]，取中间的话指令不一致了。<br>还是说指令集合是去重后排序的？","like_count":10,"discussions":[{"author":{"id":1496696,"avatar":"https://static001.geekbang.org/account/avatar/00/16/d6/78/4f0847d6.jpg","nickname":"walker","note":"","ucode":"ECE078AEE377F4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578549,"discussion_content":"不用去重吧，按字母排序，顺序就一致了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656897188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194934,"user_name":"羽翼1982","can_delete":false,"product_type":"c1","uid":1130194,"ip_address":"","ucode":"1C7362888B7E3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/3e/d2/5f9d3fa7.jpg","comment_is_top":false,"comment_ctime":1585121628,"is_pvip":false,"replies":[{"id":"76001","content":"加一颗星:)，问题1，是的；问题2，需要排序的是指令，而不是消息。可以这么理解，最终所有忠诚的将军都会收到完全相同的作战指令集合，如果把这些指令按照一定的顺序进行排序，再约定执行某个位置的指令，就能保证忠将们执行一致的作战指令了。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586197617,"ip_address":"","comment_id":194934,"utype":1}],"discussion_count":5,"race_medal":0,"score":"40239827292","product_id":100046101,"comment_content":"每位副官，将从指挥官处收到的新的作战指令（也就与之前收的作战指令不同），按照顺序（比如按照首字母字典排序）放到一个盒子里。<br>----------------------------------<br>这个排序的方法感觉不是说的很清楚，是按照命令本省的字面量（进攻 &#47; 撤退这两个文字）的字典序进行排序吗？<br>在上面的2忠2叛问题中，1名武将会收到 1+2+2=5条消息，这些消息如何排序，麻烦用例子说明的清晰些","like_count":10,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488933,"discussion_content":"加一颗星:)，问题1，是的；问题2，需要排序的是指令，而不是消息。可以这么理解，最终所有忠诚的将军都会收到完全相同的作战指令集合，如果把这些指令按照一定的顺序进行排序，再约定执行某个位置的指令，就能保证忠将们执行一致的作战指令了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586197617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1204868,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/YicovLZyvibpkfJwuAib1FEyibVDN6Oia1Wsg7jibT0uTj0UDH75KAX6vfSvstjy1IHTW7WpNbMlZZO9SnGoPj3AE2DQ/132","nickname":"要努力的兵长","note":"","ucode":"0144DF1BB82763","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"discussion":{"id":557763,"discussion_content":"其实不是很懂，为什么是按照约定的取某个位置的值 作为自己执行的依据，而不是以 出现次数最多的指令 来作为自己执行的指令(也就是大多数原则)。是那个论文里面就是这样写的 还是只是为了说明 最终没有达成想要的共识 这种情况？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647958089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":488933,"ip_address":""},"score":557763,"extra":""}]},{"author":{"id":1004264,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/e8/92a2e66d.jpg","nickname":"第二少","note":"","ucode":"4A09D1E7589F67","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394791,"discussion_content":"简单说就是，每个将军多次收到的指令，去重后再按相同的规则排序","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632056887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332453,"discussion_content":"叛将先发消息，第三轮结束，作战指令排序后，齐收到的是：撤退、撤退、进攻、进攻。苏秦收到的是：撤退、撤退、撤退、进攻。都取中间值：撤退","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607227069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1519086,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epRK5v3IkvSfjicKNKlRLE2nTQUowhMvQkwWWWUSESat8EBbcPvMk4aAjZHGcsE5DCibES9WicHcC9Qw/132","nickname":"充值一万","note":"","ucode":"1B4B3AEFA9C8C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358086,"discussion_content":"应该不是这样，叛楚给苏秦先发的功；然后，苏秦收到齐和燕的指令分别为撤和功，但是这两个指令的到来顺序不一样。所以应该是对指令去重排序再取结果吧？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615909168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":332453,"ip_address":""},"score":358086,"extra":""}]}]},{"had_liked":false,"id":195384,"user_name":"Geek_8af153","can_delete":false,"product_type":"c1","uid":1119105,"ip_address":"","ucode":"5DEFA54ECF1ECB","user_header":"https://static001.geekbang.org/account/avatar/00/11/13/81/4dcb0f55.jpg","comment_is_top":false,"comment_ctime":1585184603,"is_pvip":false,"replies":[{"id":"74380","content":"盒子的指令要排序的，比如字典排序，因为C在J前面，所以，“撤退”排在了“进攻”前面。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1585242842,"ip_address":"","comment_id":195384,"utype":1}],"discussion_count":3,"race_medal":0,"score":"35944922971","product_id":100046101,"comment_content":"在楚发起的两忠两叛案例中，苏秦的盒子的第一个指令不是进攻吗？为什么变成撤退了？","like_count":8,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489048,"discussion_content":"盒子的指令要排序的，比如字典排序，因为C在J前面，所以，“撤退”排在了“进攻”前面。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585242842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144504,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","nickname":"KAGEMUSHA","note":"","ucode":"DFC05BE62A9C10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292990,"discussion_content":"我跟你想法正好反过来我不理解齐","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595405922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1119105,"avatar":"https://static001.geekbang.org/account/avatar/00/11/13/81/4dcb0f55.jpg","nickname":"Geek_8af153","note":"","ucode":"5DEFA54ECF1ECB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214932,"discussion_content":"有道理，排序后取中间就是大多数的意思，6","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585243074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268474,"user_name":"Jackie","can_delete":false,"product_type":"c1","uid":1179920,"ip_address":"","ucode":"B853ECB3E962C5","user_header":"https://static001.geekbang.org/account/avatar/00/12/01/10/cb36bfed.jpg","comment_is_top":false,"comment_ctime":1608210206,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"31672981278","product_id":100046101,"comment_content":"https:&#47;&#47;www.zhihu.com&#47;question&#47;52493697&#47;answer&#47;1600962734 看了这篇文章，再来看本文感觉好理解多了","like_count":7,"discussions":[{"author":{"id":1661365,"avatar":"https://static001.geekbang.org/account/avatar/00/19/59/b5/26d3c637.jpg","nickname":"Yc","note":"","ucode":"407776D104D6F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375125,"discussion_content":"m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621490852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282486,"user_name":"Jowin","can_delete":false,"product_type":"c1","uid":1114356,"ip_address":"","ucode":"19017F7D06C22A","user_header":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","comment_is_top":false,"comment_ctime":1615276571,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"27385080347","product_id":100046101,"comment_content":"一个简便的理解：类比http的via头字段，每个节点收到一条消息后，都在via后面追加自己的签名，并把消息转发给所有其他不在via里面的节点。最终，每一条消息，都会经过所有节点的签名。换句话说，所有节点都了解完整的决策列表。","like_count":6,"discussions":[{"author":{"id":1114356,"avatar":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","nickname":"Jowin","note":"","ucode":"19017F7D06C22A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":354484,"discussion_content":"补充：1、作弊节点会发出矛盾的消息(无论是初始消息，还是转发消息)，但由于这些消息最终都会被所有节点收到，所以决策列表里就会出现[x,y...]多个决策，按约定的排序和选取算法，可靠节点会做出相同的选择，例如，x或y。 2、沉默节点不影响达成一致。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615296584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1080210,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7b/92/0f1a7fd6.jpg","nickname":"[發][發][發][發]","note":"","ucode":"848C71253925ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549420,"discussion_content":"谢谢，感觉茅塞顿开","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643962458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1949323,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIeN5Bn6G5BokYeM6Lv1jiaxT2FDzkzZlVYoR7at4Eia2Z1kgR2Rbw4H5jbkYLfu09jyoE1RbUU2xUA/132","nickname":"蔬菜、","note":"","ucode":"D2D377E8BD4FFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377735,"discussion_content":"谢谢，感觉茅塞顿开","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622796669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234697,"user_name":"dakingkong","can_delete":false,"product_type":"c1","uid":1247568,"ip_address":"","ucode":"6B492887E7E4A2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/J1ADsCjfat7ibMcup6DV9DhH3lzKo2lIeBqCjuBa5nIWYu7u8NYDFb3iaPRp9cia9uH4464GDaGKcd7c0d0dkhibbA/132","comment_is_top":false,"comment_ctime":1594775348,"is_pvip":false,"replies":[{"id":"87643","content":"加一颗星:)，从将军总数来反推，n个将军，能容忍(n - 2)个叛将。需要我们注意的是，这个算法是“早期经典”算法，比较理论化，很难在实际场景中落地，在实际场景中一般使用PBFT等算法。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595754894,"ip_address":"","comment_id":234697,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27364579124","product_id":100046101,"comment_content":"实际操作时，不知道判将的数目，怎么判断是否迭代了m+1轮","like_count":6,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501474,"discussion_content":"加一颗星:)，从将军总数来反推，n个将军，能容忍(n - 2)个叛将。需要我们注意的是，这个算法是“早期经典”算法，比较理论化，很难在实际场景中落地，在实际场景中一般使用PBFT等算法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595754894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3001763,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/cd/a3/0c7770ef.jpg","nickname":"9761滴","note":"","ucode":"EB058974126597","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579094,"discussion_content":"n个将军，能容忍n-2个叛将，所以在n个将军的时候，不管实际的叛将有多少个，都是迭代n-2+1伦吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657174451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257514,"user_name":"Geek_8c4282","can_delete":false,"product_type":"c1","uid":1562826,"ip_address":"","ucode":"09E13C2DDBA48D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq3opKxGyQia0CQibZU8If7Qv6ia3j4XiaWIdCHxrK0T3uZ5RVUSgwf0IJVRVt0wVLibryycTqv4VnEzbw/132","comment_is_top":false,"comment_ctime":1604019323,"is_pvip":false,"replies":[{"id":"96009","content":"加一颗星:)，因为在第三轮作战信息协商中，苏秦、齐、燕分别作为指挥官，将接收到的作战信息，附加上自己的签名，并转发给另外一位，而他们接收到的消息可能是不同的，比如，齐需要将来自“楚、燕”的作战指令“撤退”转发给苏秦，需要将来自“楚、苏秦”的作战指令“进攻”转发给燕。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606640198,"ip_address":"","comment_id":257514,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23078855803","product_id":100046101,"comment_content":"老师图10没有看懂，每个将军发送其他两人的指令为什么不一致呢，我的理解是每个将军，当然除了叛将外，忠将发送的指令都是一致的，是不是画错了？","like_count":5,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508359,"discussion_content":"加一颗星:)，因为在第三轮作战信息协商中，苏秦、齐、燕分别作为指挥官，将接收到的作战信息，附加上自己的签名，并转发给另外一位，而他们接收到的消息可能是不同的，比如，齐需要将来自“楚、燕”的作战指令“撤退”转发给苏秦，需要将来自“楚、苏秦”的作战指令“进攻”转发给燕。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606640198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312848,"user_name":"第二少","can_delete":false,"product_type":"c1","uid":1004264,"ip_address":"","ucode":"4A09D1E7589F67","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/e8/92a2e66d.jpg","comment_is_top":false,"comment_ctime":1632057120,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10221991712","product_id":100046101,"comment_content":"&gt; 第三轮：除了第一、二轮的指挥官外，剩余的 2 位将军将分别作为指挥官，在上一轮收到的作战指令上，加上自己的签名，并转发给其他将军。<br><br>老师在这里的表述确实比较费解，其实应该从指令的角度来看更清楚：所有指令最初是由楚（图8）发出，第一轮共发出3条指令，都带上了楚的签名，其他将军接下来都只是转发这3条指令；第二轮，齐、苏、燕分别把第一轮收到的指令转发出去，并各自带上自己的签名，由于指令上已经有楚的签名了，所以不再把指令转发给楚，同时，齐、苏、燕又分别收到了两条指令；第三轮，齐、苏、燕继续转发第二轮收到的指令，同样，如果一条指令上已经有了某个签名，就不再把这条指令转发给对应的将军，比如齐在第二轮收到了【进攻：楚、苏】，就只把【进攻：楚、苏】转发给燕，而不再转发给楚、苏，燕最终收到的指令就是【进攻：楚、苏、齐】，可以看出这条指令最初由楚发出，然后依次流转到苏、齐、燕","like_count":2},{"had_liked":false,"id":286844,"user_name":"Geek_4c6cb8","can_delete":false,"product_type":"c1","uid":1666952,"ip_address":"","ucode":"4EF13DAF850937","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/LBOHwXq4wliccC1HUPEghTOkWsnVR5zOmSQsias4O6obKJb2tOEpqoiaPE9mGibTlrrnGeMC5m4fp1fY234k4p9PgA/132","comment_is_top":false,"comment_ctime":1617630645,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"10207565237","product_id":100046101,"comment_content":"第三轮，“除了第一、二轮的指挥官外，剩余的 2 位将军将分别作为指挥官，在上一轮收到的作战指令上，加上自己的签名，并转发给其他将军。”结合前文的逻辑，剩余的将军数量是0，这个2是哪里来的？  按照图示，第二轮齐楚之间进行了通信，所以第三轮齐楚之间就不进行通信，第二轮齐楚都没有收到燕的消息，所以第三轮齐楚都要向燕发送一次消息，是这样的吗？作者可以回复一下吗，感谢。","like_count":2,"discussions":[{"author":{"id":1630357,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUDO6GZGnOqYhaEUt06qiazKprjBgicxNvvxq8UBOM9ZjicRKhHLzmDhfLnmXh25ASKsEfShEcAKm9Q/132","nickname":"Roc","note":"","ucode":"A1C8A2CE78318B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375352,"discussion_content":"唉，我也没看明白","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621587013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":249545,"user_name":"Geek_201736","can_delete":false,"product_type":"c1","uid":2090297,"ip_address":"","ucode":"DD2EF193CC982C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erg8t0El6jTadC1rulcyVG0jdicEPIFKSDwseqKNoF2wftWrh5ia23dcUIlbWSwjwiaTy9TPZjcsOcNA/132","comment_is_top":false,"comment_ctime":1600688596,"is_pvip":false,"replies":[{"id":"96270","content":"加一颗星:)，赞，思考很细致，1. 在图中没有对将军顺序在显示上做特别区分；2. 是对所有接收到指令进行排序，而不是只对一轮接收到的指令进行排序；3. 是的，消息的多轮传递链条，确保了所有忠将能最终接收到相同的指令集合。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606796673,"ip_address":"","comment_id":249545,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5895655892","product_id":100046101,"comment_content":"你好，下面内容是我个人的理解，不知道是否正确。<br>图9中苏秦指向齐的箭头应为：“进攻：楚、苏秦”而非“进攻：苏秦、楚”<br>图10中苏秦指向齐的箭头应为：“进攻：楚、燕、苏秦”而非“进攻：苏秦、楚、燕”<br>图10下面文字结论：“最终，苏秦和齐收到的作战信息都是‘撤退、进攻’”，事实上，仔细看图，发现第三轮的作战协商，苏秦收到的作战信息为：<br>{撤退：楚、燕、齐；撤退：楚、齐、燕} 齐收到的作战信息为：{进攻：楚、苏秦，燕；进攻：楚、燕、苏秦}。<br>而苏秦和齐发出的指令倒是“进攻”和“撤退“都包含。<br><br>看了你下面的回复，是针对指令进行排序，收到的指令无法排出来“撤退、进攻”序列。请指明。如果再进行第四轮协商，苏秦都将收到“进攻”，而齐都将收到“撤退”，而且苏秦发出的指令都是”撤退“，而齐发出的指令都是进攻。<br><br>另外因为非对称密钥的特性，考虑一旦指令传递链条中有忠将的私钥进行过加密，则这条指令不能再被篡改或伪造，因此指令后跟随的信息传递链条的顺序应该很重要，不可以擅自更改顺序。是不是这样描述会更准确些。<br>由于geekbang这边，您如果不精选留言，我看不到这条留言，因此重发了一下，盼回复解惑，多谢。","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505951,"discussion_content":"加一颗星:)，赞，思考很细致，1. 在图中没有对将军顺序在显示上做特别区分；2. 是对所有接收到指令进行排序，而不是只对一轮接收到的指令进行排序；3. 是的，消息的多轮传递链条，确保了所有忠将能最终接收到相同的指令集合。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606796673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351429,"user_name":"Rayjun","can_delete":false,"product_type":"c1","uid":1002514,"ip_address":"","ucode":"61A3D1A3D03569","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/12/f0c145d4.jpg","comment_is_top":false,"comment_ctime":1657782781,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657782781","product_id":100046101,"comment_content":"文章中关于公钥和私钥的说法不严谨，使用私钥叫签名，此时公钥是验签，使用公钥才叫加密，此时私钥用来解密","like_count":1},{"had_liked":false,"id":346173,"user_name":"三景页","can_delete":false,"product_type":"c1","uid":1243410,"ip_address":"","ucode":"38588DDAA495BC","user_header":"https://static001.geekbang.org/account/avatar/00/12/f9/12/0e6620cd.jpg","comment_is_top":false,"comment_ctime":1652868481,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652868481","product_id":100046101,"comment_content":"最后一幅图 苏秦发给齐的换成 进攻：楚 燕 苏秦 会不会更好一些，就跟这条指令下发的顺序一致了","like_count":0},{"had_liked":false,"id":346059,"user_name":"三景页","can_delete":false,"product_type":"c1","uid":1243410,"ip_address":"","ucode":"38588DDAA495BC","user_header":"https://static001.geekbang.org/account/avatar/00/12/f9/12/0e6620cd.jpg","comment_is_top":false,"comment_ctime":1652795532,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652795532","product_id":100046101,"comment_content":"签名消息推荐可以看掘金这个文章，会比较好理解一些：https:&#47;&#47;juejin.cn&#47;post&#47;6844904021925298183","like_count":0},{"had_liked":false,"id":340683,"user_name":"惜心（伟祺）","can_delete":false,"product_type":"c1","uid":1067846,"ip_address":"","ucode":"393DF1A9E81332","user_header":"https://static001.geekbang.org/account/avatar/00/10/4b/46/717d5cb9.jpg","comment_is_top":false,"comment_ctime":1649044408,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649044408","product_id":100046101,"comment_content":"如果身体和嘴不一致问题怎么解决<br>叛徒嘴上完全支持忠臣做法<br>要出兵时候并不出兵<br>或者拦截某队出兵<br>或者同时制造信息混乱 同时协商线下搞破坏","like_count":0},{"had_liked":false,"id":335760,"user_name":"janey","can_delete":false,"product_type":"c1","uid":1227067,"ip_address":"","ucode":"0BD4BDB4EB2E94","user_header":"https://static001.geekbang.org/account/avatar/00/12/b9/3b/7224f3b8.jpg","comment_is_top":false,"comment_ctime":1645675443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645675443","product_id":100046101,"comment_content":"原文：<br>第一轮：先发送作战指令的将军，作为指挥官，其他的将军作为副官。。。<br>第二轮：除了第一轮的指挥官外，剩余的 3 位将军将分别作为指挥官，。。。<br>第三轮：除了第一、二轮的指挥官外，剩余的 2 位将军将分别作为指挥官<br><br>问题：第三轮“剩余的2位将军”是怎么来的？从原文描述理解这时候还有3位将军","like_count":0},{"had_liked":false,"id":324479,"user_name":"Geek_42bdf1","can_delete":false,"product_type":"c1","uid":2859831,"ip_address":"","ucode":"EDC55C95F022FB","user_header":"","comment_is_top":false,"comment_ctime":1638452322,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638452322","product_id":100046101,"comment_content":"如果真的只有两个忠将(A和B)，那么无论A从叛将那儿得到什么信息，他都会同步给B；B也会将任何信息同步给A。所以他们俩收到的信息去重排序后肯定是一样的，所以最终能达成一致。不知道我理解的是否正确？","like_count":0},{"had_liked":false,"id":321141,"user_name":"FelixFly","can_delete":false,"product_type":"c1","uid":1160461,"ip_address":"","ucode":"1D39A7C3D0E31F","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/0d/0e65dee6.jpg","comment_is_top":false,"comment_ctime":1636687217,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1636687217","product_id":100046101,"comment_content":"第二轮协商后苏秦和齐收到的作战信息都是&quot;撤销、进攻&quot;，就可以按照执行盒子最中间的指令了，为啥还需要第三轮协商？第三轮协商的目的何在？","like_count":0},{"had_liked":false,"id":316673,"user_name":"LWD","can_delete":false,"product_type":"c1","uid":1986739,"ip_address":"","ucode":"DDA444DB113C01","user_header":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","comment_is_top":false,"comment_ctime":1634485325,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634485325","product_id":100046101,"comment_content":"为了达到干扰作战计划的目的，叛徒楚和燕相互勾结了。比如，燕拿到了楚的私钥，也就是燕可以伪造楚的签名。。。这个已经违反了签名规则了吧。如果私钥都泄露了只能通过口信消息型方式才能解决。而这里有2个叛徒,4个根本解决不了吧。。看迷糊了求解惑","like_count":0},{"had_liked":false,"id":312545,"user_name":"达子不一般","can_delete":false,"product_type":"c1","uid":1315527,"ip_address":"","ucode":"A91C8DB45184F7","user_header":"https://static001.geekbang.org/account/avatar/00/14/12/c7/a7a5df8b.jpg","comment_is_top":false,"comment_ctime":1631860320,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1631860320","product_id":100046101,"comment_content":"数字签名为什么要对摘要进行非对称加密呢？不加密的话摘要算法也可以使用salt，中间人不知道salt也无法伪造内容","like_count":0,"discussions":[{"author":{"id":1201350,"avatar":"https://static001.geekbang.org/account/avatar/00/12/54/c6/c2481790.jpg","nickname":"lisiur","note":"","ucode":"CEB2DBCE29CAA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407942,"discussion_content":"中间人不知道salt，解密人也同样不知道，无法验证消息真假。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635154637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":309233,"user_name":"神垂死","can_delete":false,"product_type":"c1","uid":1016334,"ip_address":"","ucode":"EE924E8E0A6814","user_header":"https://static001.geekbang.org/account/avatar/00/0f/82/0e/9c42e6f9.jpg","comment_is_top":false,"comment_ctime":1629992301,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629992301","product_id":100046101,"comment_content":"签名消息：<br>1. 只保证忠臣的行为是一致的，而不关心行为是否正确<br>2. 第一轮后，每轮都会互相发消息，直到k = m时结束，m表示叛军个数，k表示接收到的命令数<br>3. 针对“进攻”还是“撤退”可以这样理解，多轮是为了保证每个节点收到的命令是全的，通过去重，排序，得到命令集合（进攻、撤退），然后按一种选取方法就行。可以把这个命令替换成1、2、3、4之类的数字比较好理解，多轮就是为了让每个节点都收到（1、2、3、4、5、6）（需要去重和排序），然后忠诚的节点按一个选取方法就会执行对应的命令。可以看一下这个文章：https:&#47;&#47;www.8btc.com&#47;article&#47;70370<br>4. 已知叛军数量是解决拜占庭问题的前提，这个不用纠结怎么知道，这是学术研究","like_count":0},{"had_liked":false,"id":296337,"user_name":"Geek7651","can_delete":false,"product_type":"c1","uid":2328992,"ip_address":"","ucode":"72B6866CAE9230","user_header":"","comment_is_top":false,"comment_ctime":1622903775,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622903775","product_id":100046101,"comment_content":"签名消息不能按照投票的个数进行决定的吗, 如进攻消息比撤退消息多, 则决定进攻?","like_count":0},{"had_liked":false,"id":291410,"user_name":"子杰","can_delete":false,"product_type":"c1","uid":1025250,"ip_address":"","ucode":"717D10394391BE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/e2/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1620279023,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1620279023","product_id":100046101,"comment_content":"这个签名消息解决拜占庭问题，我理解的是只实现了一致性而忽略了正确性吗？","like_count":0},{"had_liked":false,"id":281305,"user_name":"叶落风行","can_delete":false,"product_type":"c1","uid":1221391,"ip_address":"","ucode":"8CE594ED9B2001","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/0f/a5839c1d.jpg","comment_is_top":false,"comment_ctime":1614683767,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614683767","product_id":100046101,"comment_content":"可以把进攻、撤退指令抽象成0、1、2、3，通过m+1轮交换消息之后，最终忠将会得到相同的指令例如0、1、2这种","like_count":0,"discussions":[{"author":{"id":1519086,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epRK5v3IkvSfjicKNKlRLE2nTQUowhMvQkwWWWUSESat8EBbcPvMk4aAjZHGcsE5DCibES9WicHcC9Qw/132","nickname":"充值一万","note":"","ucode":"1B4B3AEFA9C8C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358090,"discussion_content":"比如进攻为1，撤退为0，假设苏秦按序收到的指令是011010，那么最终的指令序列算[0,1] ?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615909348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278547,"user_name":"Geek1560","can_delete":false,"product_type":"c1","uid":2028949,"ip_address":"","ucode":"5F27A28B8002E6","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/95/a362f01b.jpg","comment_is_top":false,"comment_ctime":1613038874,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1613038874","product_id":100046101,"comment_content":"老师，如果不是在信息发送过程被篡改而是内存数据被篡改了，使用签名消息实现一致性是不是就不可行了？","like_count":0,"discussions":[{"author":{"id":1201350,"avatar":"https://static001.geekbang.org/account/avatar/00/12/54/c6/c2481790.jpg","nickname":"lisiur","note":"","ucode":"CEB2DBCE29CAA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407945,"discussion_content":"改内存同样会造成签名无效吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635154772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273323,"user_name":"KW💤","can_delete":false,"product_type":"c1","uid":1109389,"ip_address":"","ucode":"290DD7016F4EE0","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/8d/377c106a.jpg","comment_is_top":false,"comment_ctime":1610534473,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610534473","product_id":100046101,"comment_content":"作者这里是排除了信息伪造的判断过程的，因为信息伪造肯定会被揪出来，所以不在情况讨论范围内","like_count":0},{"had_liked":false,"id":260371,"user_name":"X中倪","can_delete":false,"product_type":"c1","uid":1418862,"ip_address":"","ucode":"F28FAFF2FEDD1A","user_header":"https://static001.geekbang.org/account/avatar/00/15/a6/6e/21907ff9.jpg","comment_is_top":false,"comment_ctime":1604994174,"is_pvip":false,"replies":[{"id":"96007","content":"加一颗星:)，不会出现这种情况，忠将们是忠诚的，他们之前的通讯是能确保正常的。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606639719,"ip_address":"","comment_id":260371,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604994174","product_id":100046101,"comment_content":"假设 数据丢失  某个忠将的盒子里面只有一条数据，另外忠将的盒子有多条数据 ，按照之前的约定 （取盒子里面第二条指令）如何达到统一的作战计划。","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509178,"discussion_content":"加一颗星:)，不会出现这种情况，忠将们是忠诚的，他们之前的通讯是能确保正常的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606639719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259612,"user_name":"罗杰.菲の樂","can_delete":false,"product_type":"c1","uid":2016408,"ip_address":"","ucode":"63590706846EEA","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c4/98/9c7a1a23.jpg","comment_is_top":false,"comment_ctime":1604773938,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1604773938","product_id":100046101,"comment_content":"接下来，当 Alice 接收到消息和加密摘要（Signature）后，她会用自己的公钥对加密摘要（Signature）进行解密。这种情况下公钥是用于验证而不是解密吧？而且一般来说，公钥是不能用于解密的吧？","like_count":0,"discussions":[{"author":{"id":1048423,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ff/67/6ffe3a52.jpg","nickname":"马里奥的马里奥","note":"","ucode":"6848D9E82B58E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331410,"discussion_content":"类似于调用支付宝的支付接口，我们用自己的私钥加密，然后发送给支付宝，支付宝有我们的公钥。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606868179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257620,"user_name":"Simon","can_delete":false,"product_type":"c1","uid":1959960,"ip_address":"","ucode":"5D698B46059E9E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoPMcS7sF2AIWBen383n11MGH161fEjR5JzNicF931YHia3SWy0ic34VXMaGrh7uSCiczmd4lFvgHFKlg/132","comment_is_top":false,"comment_ctime":1604044420,"is_pvip":false,"replies":[{"id":"96008","content":"加一颗星:)，因为在第三轮作战信息协商中，苏秦、齐、燕分别作为指挥官，将接收到的作战信息，附加上自己的签名，并转发给另外一位。也就是说，齐将来自“楚、燕”的作战指令“撤退”转发给苏秦，将来自“楚、苏秦”的作战指令“进攻”转发给燕。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606640084,"ip_address":"","comment_id":257620,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604044420","product_id":100046101,"comment_content":"叛徒楚先发送作战信息的情况下，在第三轮中，齐为何会向苏发撤退，向燕发进攻？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508392,"discussion_content":"加一颗星:)，因为在第三轮作战信息协商中，苏秦、齐、燕分别作为指挥官，将接收到的作战信息，附加上自己的签名，并转发给另外一位。也就是说，齐将来自“楚、燕”的作战指令“撤退”转发给苏秦，将来自“楚、苏秦”的作战指令“进攻”转发给燕。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606640084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248469,"user_name":"每天都要加油","can_delete":false,"product_type":"c1","uid":2182027,"ip_address":"","ucode":"24CA76A24FFE80","user_header":"","comment_is_top":false,"comment_ctime":1600174310,"is_pvip":false,"replies":[{"id":"91810","content":"加一颗星:)，略微补充下，3个m的含义不同，“m”和“m - 2”中的m，表示将军数；“m+1”中的m，表示叛将数。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1601300552,"ip_address":"","comment_id":248469,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1600174310","product_id":100046101,"comment_content":" 对于通过签名问题来解决拜占庭将军问题的时候，目标是保证忠将行动的一致性，对于有m个将军的情况，能够容忍m-2个叛徒， 需要进行m+1轮次的信息交换来保证忠将行动的一致性。签名问题能够保证叛将发送错误的消息，能够保证叛徒无法改变忠将之间的通信。","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505658,"discussion_content":"加一颗星:)，略微补充下，3个m的含义不同，“m”和“m - 2”中的m，表示将军数；“m+1”中的m，表示叛将数。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601300552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246077,"user_name":"Mars","can_delete":false,"product_type":"c1","uid":1088584,"ip_address":"","ucode":"D7BAA9EBB7D89C","user_header":"https://static001.geekbang.org/account/avatar/00/10/9c/48/44965714.jpg","comment_is_top":false,"comment_ctime":1599157036,"is_pvip":false,"replies":[{"id":"96352","content":"加一颗星:)，算法是能保证的，可以推导体验下。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606821207,"ip_address":"","comment_id":246077,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599157036","product_id":100046101,"comment_content":"请问下老师，由于第二轮燕发送了背叛消息，直觉上感觉最后大家收到的排过序的指令不应该完全一致，会导致最后的决策也不一致。想问下能解释下指令序列是如何最后完全一致的嘛？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505053,"discussion_content":"加一颗星:)，算法是能保证的，可以推导体验下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606821207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243482,"user_name":"Wxpwindy","can_delete":false,"product_type":"c1","uid":1006430,"ip_address":"","ucode":"194712BD851900","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLvGib1QwkBHiclOTRMHdNSh0lrEbscqvYfSRPrU4h7Siaob3jcZPp1pXrkK1cKULiblvDjddNicNCfThw/132","comment_is_top":false,"comment_ctime":1598151308,"is_pvip":false,"replies":[{"id":"90284","content":"加一颗星:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1598965719,"ip_address":"","comment_id":243482,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598151308","product_id":100046101,"comment_content":"我的一点理解哈，也更正上一课的理解：签名实际上就是做了剪枝，限制了叛将的影响大小，从而可以支持更多的叛将数目","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504300,"discussion_content":"加一颗星:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598965719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240604,"user_name":"山头","can_delete":false,"product_type":"c1","uid":1610142,"ip_address":"","ucode":"9CD45A7966F37E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/1R7lHGBvwPTVfb3BAQrPX3AhsYWnXyicbUJUYDgWagWxMGTnsNFvKibzeJ8v7fF2vJLQGf2EY9dV07rnn5Mhv9Uw/132","comment_is_top":false,"comment_ctime":1596998148,"is_pvip":false,"replies":[{"id":"95950","content":"加一颗星:)，图例中有标识，比如，在图例演示第一种情况中，第一轮是3个作战消息，第二轮是4个作战消息，第三轮是2个作战消息。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1606573486,"ip_address":"","comment_id":240604,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596998148","product_id":100046101,"comment_content":"请问老师，第一轮发送了几条作战指令，第二轮又发送了几条指令，第三轮发送了几条指令","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503499,"discussion_content":"加一颗星:)，图例中有标识，比如，在图例演示第一种情况中，第一轮是3个作战消息，第二轮是4个作战消息，第三轮是2个作战消息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606573486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239407,"user_name":"西门吹牛","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1596525824,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596525824","product_id":100046101,"comment_content":"关键第三轮中参与指挥官的人数问题，个人理解：<br>和将军数无关，确定轮次了之后，把上轮收到的在这轮发送给对方，文中老师说的除第一、二轮的指挥官外，剩余的 2 位将军将分别作为指挥官，那是因为，第二轮，有一个没发消息，因此别人没收到他的消息， 在下一轮也无需将他参与进来，因为上一轮没收到他的消息，下一轮也就谈不上把他发的消息广播出去，所以他还参与干嘛，都失联了；<br>还有评论说，一开始就知道叛将还进攻啥：<br>不需要知道叛将是谁，只要大概估计出叛将的个数，就可以得到最终的一致性进攻方案<br>","like_count":0},{"had_liked":false,"id":236393,"user_name":"KAGEMUSHA","can_delete":false,"product_type":"c1","uid":1144504,"ip_address":"","ucode":"DFC05BE62A9C10","user_header":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","comment_is_top":false,"comment_ctime":1595406017,"is_pvip":false,"replies":[{"id":"87647","content":"加一颗星:)，是按照约定的顺序（按照“执行盒子最中间的指令”），从排序后的指令集中选择一个指令来执行，文中也是举例演示了一种情况。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595755254,"ip_address":"","comment_id":236393,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595406017","product_id":100046101,"comment_content":"第三轮中苏秦的情况理解了，但是齐收到的都是进攻，累计也是进攻多，为啥跟苏秦一样选择撤退了？说不通啊","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502039,"discussion_content":"加一颗星:)，是按照约定的顺序（按照“执行盒子最中间的指令”），从排序后的指令集中选择一个指令来执行，文中也是举例演示了一种情况。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595755254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":232827,"user_name":"kylin","can_delete":false,"product_type":"c1","uid":1728183,"ip_address":"","ucode":"42003EDE4EC9AF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Iofqk26ibmjFxAZKRibgUmwf6OGGA3IujQ9lnbXrApCiaYmR48GrdkljG0t9XdKnO64rb3LBcSWJIZsEokbxiauSOQ/132","comment_is_top":false,"comment_ctime":1594124952,"is_pvip":false,"replies":[{"id":"87638","content":"加一颗星:)，可以这么理解。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595751811,"ip_address":"","comment_id":232827,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594124952","product_id":100046101,"comment_content":"也就是说，上面的指令只有两种“撤退”和“进攻”，知道忠臣都收到了两种指，因为约定了排序，所以都是执行都是一致的？多轮就是为了让他们受到相同的指令集合？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500782,"discussion_content":"加一颗星:)，可以这么理解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595751811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222992,"user_name":"宁悦","can_delete":false,"product_type":"c1","uid":1901403,"ip_address":"","ucode":"68844C314FEEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg","comment_is_top":false,"comment_ctime":1590978374,"is_pvip":false,"replies":[{"id":"87754","content":"抱歉哈，伪代码没看明白，能帮忙补充下吗？或者采用递归的方式，来表达。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1595865662,"ip_address":"","comment_id":222992,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590978374","product_id":100046101,"comment_content":"第三轮的消息是不是这样，<br>            for 指挥官 in（齐，楚，燕）<br>                   指挥官，发送消息<br>                for  x in（楚燕，齐燕，楚燕） <br>                    x    发送消息                      &#47;&#47;这里的x是两个<br>不知道这样理解对不对             ","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496981,"discussion_content":"抱歉哈，伪代码没看明白，能帮忙补充下吗？或者采用递归的方式，来表达。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595865662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214938,"user_name":"念念碎的碎碎念","can_delete":false,"product_type":"c1","uid":1401709,"ip_address":"","ucode":"F6DCE52AD8F1C3","user_header":"https://static001.geekbang.org/account/avatar/00/15/63/6d/fba85466.jpg","comment_is_top":false,"comment_ctime":1588853271,"is_pvip":false,"replies":[{"id":"79870","content":"加一颗星:)，加上自己的签名，转发上一轮收到的作战指令，也就是第二轮的，也就是说，发送&lt;进攻：苏秦、齐、燕&gt;给楚，发送&lt;进攻：苏秦、楚、燕&gt;给齐。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1589122931,"ip_address":"","comment_id":214938,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588853271","product_id":100046101,"comment_content":"如果第三轮，叛徒燕将接收到的作战信息，附加上自己的签名，并转发给另外两位，是发送第一轮的苏燕，还是第二轮的苏齐燕，苏齐楚呢<br>这地方还是有点不明白，请老师和各位指点迷津","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494246,"discussion_content":"加一颗星:)，加上自己的签名，转发上一轮收到的作战指令，也就是第二轮的，也就是说，发送&amp;lt;进攻：苏秦、齐、燕&amp;gt;给楚，发送&amp;lt;进攻：苏秦、楚、燕&amp;gt;给齐。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589122931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197353,"user_name":"东尘西土","can_delete":false,"product_type":"c1","uid":1014174,"ip_address":"","ucode":"D8960CE8A5A210","user_header":"https://static001.geekbang.org/account/avatar/00/0f/79/9e/12a23f16.jpg","comment_is_top":false,"comment_ctime":1585370457,"is_pvip":false,"replies":[{"id":"75995","content":"这个问题没看明白，能否举个具体的示例？咱们聊聊呢:)","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1586195137,"ip_address":"","comment_id":197353,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1585370457","product_id":100046101,"comment_content":"除去第一轮，剩下的m轮中如果收到的指令不是相同的指令，那该如何去通知剩下的n-2人呢？","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489505,"discussion_content":"这个问题没看明白，能否举个具体的示例？咱们聊聊呢:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586195137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014174,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/79/9e/12a23f16.jpg","nickname":"东尘西土","note":"","ucode":"D8960CE8A5A210","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223348,"discussion_content":"图10中，苏秦在第三轮通知齐是进攻指令，是由于第二轮收到燕的进攻指令，如果苏秦在第二轮收到超过一个指令的话，怎么通知齐？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586218574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196134,"user_name":"一只苦逼","can_delete":false,"product_type":"c1","uid":1185288,"ip_address":"","ucode":"5DBE0D8F2F26E3","user_header":"https://static001.geekbang.org/account/avatar/00/12/16/08/6f9bf74b.jpg","comment_is_top":false,"comment_ctime":1585238059,"is_pvip":true,"replies":[{"id":"75559","content":"加油！多交流:)。","user_name":"作者回复","user_name_real":"hanj4096","uid":"1642497","ctime":1585935042,"ip_address":"","comment_id":196134,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585238059","product_id":100046101,"comment_content":"打卡","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489233,"discussion_content":"加油！多交流:)。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585935042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}