{"id":528660,"title":"04ï½œåˆ›å»ºå®¹å™¨é•œåƒï¼šå¦‚ä½•ç¼–å†™æ­£ç¡®ã€é«˜æ•ˆçš„Dockerfile","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>ä¸Šä¸€æ¬¡çš„è¯¾ç¨‹é‡Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†å®¹å™¨åŒ–çš„åº”ç”¨ï¼Œä¹Ÿå°±æ˜¯è¢«æ‰“åŒ…æˆé•œåƒçš„åº”ç”¨ç¨‹åºï¼Œç„¶åå†ç”¨å„ç§Dockerå‘½ä»¤æ¥è¿è¡Œã€ç®¡ç†å®ƒä»¬ã€‚</p><p>é‚£ä¹ˆè¿™åˆä¼šå¸¦æ¥ä¸€ä¸ªç–‘é—®ï¼šè¿™äº›é•œåƒæ˜¯æ€ä¹ˆåˆ›å»ºå‡ºæ¥çš„ï¼Ÿæˆ‘ä»¬èƒ½ä¸èƒ½å¤Ÿåˆ¶ä½œå±äºè‡ªå·±çš„é•œåƒå‘¢ï¼Ÿ</p><p>æ‰€ä»¥ä»Šå¤©ï¼Œæˆ‘å°±æ¥è®²è§£é•œåƒçš„å†…éƒ¨æœºåˆ¶ï¼Œè¿˜æœ‰é«˜æ•ˆã€æ­£ç¡®åœ°ç¼–å†™Dockerfileåˆ¶ä½œå®¹å™¨é•œåƒçš„æ–¹æ³•ã€‚</p><h2>é•œåƒçš„å†…éƒ¨æœºåˆ¶æ˜¯ä»€ä¹ˆ</h2><p>ç°åœ¨ä½ åº”è¯¥çŸ¥é“ï¼Œé•œåƒå°±æ˜¯ä¸€ä¸ªæ‰“åŒ…æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†åº”ç”¨ç¨‹åºè¿˜æœ‰å®ƒè¿è¡Œæ‰€ä¾èµ–çš„ç¯å¢ƒï¼Œä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿã€ç¯å¢ƒå˜é‡ã€é…ç½®å‚æ•°ç­‰ç­‰ã€‚</p><p>ç¯å¢ƒå˜é‡ã€é…ç½®å‚æ•°è¿™äº›ä¸œè¥¿è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œéšä¾¿ç”¨ä¸€ä¸ªmanifestæ¸…å•å°±å¯ä»¥ç®¡ç†ï¼ŒçœŸæ­£éº»çƒ¦çš„æ˜¯æ–‡ä»¶ç³»ç»Ÿã€‚ä¸ºäº†ä¿è¯å®¹å™¨è¿è¡Œç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Œé•œåƒå¿…é¡»æŠŠåº”ç”¨ç¨‹åºæ‰€åœ¨æ“ä½œç³»ç»Ÿçš„æ ¹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯rootfsï¼Œéƒ½åŒ…å«è¿›æ¥ã€‚</p><p>è™½ç„¶è¿™äº›æ–‡ä»¶é‡Œä¸åŒ…å«ç³»ç»Ÿå†…æ ¸ï¼ˆå› ä¸ºå®¹å™¨å…±äº«äº†å®¿ä¸»æœºçš„å†…æ ¸ï¼‰ï¼Œä½†å¦‚æœæ¯ä¸ªé•œåƒéƒ½é‡å¤åšè¿™æ ·çš„æ‰“åŒ…æ“ä½œï¼Œä»ç„¶ä¼šå¯¼è‡´å¤§é‡çš„å†—ä½™ã€‚å¯ä»¥æƒ³è±¡ï¼Œå¦‚æœæœ‰ä¸€åƒä¸ªé•œåƒï¼Œéƒ½åŸºäºUbuntuç³»ç»Ÿæ‰“åŒ…ï¼Œé‚£ä¹ˆè¿™äº›é•œåƒé‡Œå°±ä¼šé‡å¤ä¸€åƒæ¬¡Ubuntuæ ¹ç›®å½•ï¼Œå¯¹ç£ç›˜å­˜å‚¨ã€ç½‘ç»œä¼ è¾“éƒ½æ˜¯å¾ˆå¤§çš„æµªè´¹ã€‚</p><p>å¾ˆè‡ªç„¶çš„ï¼Œæˆ‘ä»¬å°±ä¼šæƒ³åˆ°ï¼Œåº”è¯¥æŠŠé‡å¤çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œåªå­˜æ”¾ä¸€ä»½Ubuntuæ ¹ç›®å½•æ–‡ä»¶ï¼Œç„¶åè®©è¿™ä¸€åƒä¸ªé•œåƒä»¥æŸç§æ–¹å¼å…±äº«è¿™éƒ¨åˆ†æ•°æ®ã€‚</p><!-- [[[read_end]]] --><p>è¿™ä¸ªæ€è·¯ï¼Œä¹Ÿæ­£æ˜¯å®¹å™¨é•œåƒçš„ä¸€ä¸ªé‡å¤§åˆ›æ–°ç‚¹ï¼šåˆ†å±‚ï¼Œæœ¯è¯­å«â€œ<strong>Layer</strong>â€ã€‚</p><p>å®¹å™¨é•œåƒå†…éƒ¨å¹¶ä¸æ˜¯ä¸€ä¸ªå¹³å¦çš„ç»“æ„ï¼Œè€Œæ˜¯ç”±è®¸å¤šçš„é•œåƒå±‚ç»„æˆçš„ï¼Œæ¯å±‚éƒ½æ˜¯åªè¯»ä¸å¯ä¿®æ”¹çš„ä¸€ç»„æ–‡ä»¶ï¼Œç›¸åŒçš„å±‚å¯ä»¥åœ¨é•œåƒä¹‹é—´å…±äº«ï¼Œç„¶åå¤šä¸ªå±‚åƒæ­ç§¯æœ¨ä¸€æ ·å †å èµ·æ¥ï¼Œå†ä½¿ç”¨ä¸€ç§å«â€œ<strong>Union FSè”åˆæ–‡ä»¶ç³»ç»Ÿ</strong>â€çš„æŠ€æœ¯æŠŠå®ƒä»¬åˆå¹¶åœ¨ä¸€èµ·ï¼Œå°±å½¢æˆäº†å®¹å™¨æœ€ç»ˆçœ‹åˆ°çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆ<a href=\"https://linoxide.com/wp-content/uploads/2015/03/docker-filesystems-busyboxrw.png\">å›¾ç‰‡æ¥æº</a>ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c7/3f/c750a7795ff4787c6639dd42bf0a473f.png?wh=800x600\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘æ¥æ‹¿å¤§å®¶éƒ½ç†Ÿæ‚‰çš„åƒå±‚ç³•åšä¸€ä¸ªå½¢è±¡çš„æ¯”å–»å§ã€‚</p><p>åƒå±‚ç³•ä¹Ÿæ˜¯ç”±å¾ˆå¤šå±‚å åŠ åœ¨ä¸€èµ·çš„ï¼Œä»æœ€ä¸Šé¢å¯ä»¥çœ‹åˆ°æ¯å±‚é‡Œé¢é•¶åµŒçš„è‘¡è„å¹²ã€æ ¸æ¡ƒã€æä»ã€é’ä¸ç­‰ï¼Œæ¯ä¸€å±‚ç³•å°±ç›¸å½“äºä¸€ä¸ªLayerï¼Œå¹²æœå°±å¥½æ¯”æ˜¯Layeré‡Œçš„å„ä¸ªæ–‡ä»¶ã€‚ä½†å¦‚æœæŸä¸¤å±‚çš„åŒä¸€ä¸ªä½ç½®éƒ½æœ‰å¹²æœï¼Œä¹Ÿå°±æ˜¯æœ‰æ–‡ä»¶åŒåï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åªèƒ½çœ‹åˆ°ä¸Šå±‚çš„æ–‡ä»¶ï¼Œè€Œä¸‹å±‚çš„å°±è¢«å±è”½äº†ã€‚</p><p>ä½ å¯ä»¥ç”¨å‘½ä»¤ <code>docker inspect</code> æ¥æŸ¥çœ‹é•œåƒçš„åˆ†å±‚ä¿¡æ¯ï¼Œæ¯”å¦‚nginx:alpineé•œåƒï¼š</p><pre><code class=\"language-plain\">docker inspect nginx:alpine\n</code></pre><p>å®ƒçš„åˆ†å±‚ä¿¡æ¯åœ¨â€œRootFSâ€éƒ¨åˆ†ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/5y/b7/5yybd821a12ec1323f6ea8bb5a5c4ab7.png?wh=1920x592\" alt=\"å›¾ç‰‡\"></p><p>é€šè¿‡è¿™å¼ æˆªå›¾å°±å¯ä»¥çœ‹åˆ°ï¼Œnginx:alpineé•œåƒé‡Œä¸€å…±æœ‰6ä¸ªLayerã€‚</p><p>ç›¸ä¿¡ä½ ç°åœ¨ä¹Ÿå°±æ˜ç™½ï¼Œä¹‹å‰åœ¨ä½¿ç”¨ <code>docker pull</code>ã€<code>docker rmi</code> ç­‰å‘½ä»¤æ“ä½œé•œåƒçš„æ—¶å€™ï¼Œé‚£äº›â€œå¥‡æ€ªâ€çš„è¾“å‡ºä¿¡æ¯æ˜¯ä»€ä¹ˆäº†ï¼Œå…¶å®å°±æ˜¯é•œåƒé‡Œçš„å„ä¸ªLayerã€‚Dockerä¼šæ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„å±‚ï¼Œå¦‚æœæœ¬åœ°å·²ç»å­˜åœ¨å°±ä¸ä¼šé‡å¤ä¸‹è½½ï¼Œå¦‚æœå±‚è¢«å…¶ä»–é•œåƒå…±äº«å°±ä¸ä¼šåˆ é™¤ï¼Œè¿™æ ·å°±å¯ä»¥èŠ‚çº¦ç£ç›˜å’Œç½‘ç»œæˆæœ¬ã€‚</p><h2>Dockerfileæ˜¯ä»€ä¹ˆ</h2><p>çŸ¥é“äº†å®¹å™¨é•œåƒçš„å†…éƒ¨ç»“æ„å’ŒåŸºæœ¬åŸç†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥å­¦ä¹ å¦‚ä½•è‡ªå·±åŠ¨æ‰‹åˆ¶ä½œå®¹å™¨é•œåƒäº†ï¼Œä¹Ÿå°±æ˜¯è‡ªå·±æ‰“åŒ…åº”ç”¨ã€‚</p><p>åœ¨ä¹‹å‰æˆ‘ä»¬è®²å®¹å™¨çš„æ—¶å€™ï¼Œæ›¾ç»è¯´è¿‡å®¹å™¨å°±æ˜¯â€œå°æ¿æˆ¿â€ï¼Œé•œåƒå°±æ˜¯â€œæ ·æ¿é—´â€ã€‚é‚£ä¹ˆï¼Œè¦é€ å‡ºè¿™ä¸ªâ€œæ ·æ¿é—´â€ï¼Œå°±å¿…ç„¶è¦æœ‰ä¸€ä¸ªâ€œæ–½å·¥å›¾çº¸â€ï¼Œç”±å®ƒæ¥è§„å®šå¦‚ä½•å»ºé€ åœ°åŸºã€é“ºè®¾æ°´ç”µã€å¼€çª—æ­é—¨ç­‰åŠ¨ä½œã€‚è¿™ä¸ªâ€œæ–½å·¥å›¾çº¸â€å°±æ˜¯â€œ<strong>Dockerfile</strong>â€ã€‚</p><p>æ¯”èµ·å®¹å™¨ã€é•œåƒæ¥è¯´ï¼ŒDockerfileéå¸¸æ™®é€šï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬ï¼Œé‡Œé¢è®°å½•äº†ä¸€ç³»åˆ—çš„æ„å»ºæŒ‡ä»¤ï¼Œæ¯”å¦‚é€‰æ‹©åŸºç¡€é•œåƒã€æ‹·è´æ–‡ä»¶ã€è¿è¡Œè„šæœ¬ç­‰ç­‰ï¼Œæ¯ä¸ªæŒ‡ä»¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ªLayerï¼Œè€ŒDockeré¡ºåºæ‰§è¡Œè¿™ä¸ªæ–‡ä»¶é‡Œçš„æ‰€æœ‰æ­¥éª¤ï¼Œæœ€åå°±ä¼šåˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„é•œåƒå‡ºæ¥ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„Dockerfileå®ä¾‹ï¼š</p><pre><code class=\"language-plain\"># Dockerfile.busybox\nFROM busybox                  # é€‰æ‹©åŸºç¡€é•œåƒ\nCMD echo \"hello world\"        # å¯åŠ¨å®¹å™¨æ—¶é»˜è®¤è¿è¡Œçš„å‘½ä»¤\n</code></pre><p>è¿™ä¸ªæ–‡ä»¶é‡Œåªæœ‰ä¸¤æ¡æŒ‡ä»¤ã€‚</p><p>ç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯ <code>FROM</code>ï¼Œæ‰€æœ‰çš„Dockerfileéƒ½è¦ä»å®ƒå¼€å§‹ï¼Œè¡¨ç¤ºé€‰æ‹©æ„å»ºä½¿ç”¨çš„åŸºç¡€é•œåƒï¼Œç›¸å½“äºâ€œæ‰“åœ°åŸºâ€ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯busyboxã€‚</p><p>ç¬¬äºŒæ¡æŒ‡ä»¤æ˜¯ <code>CMD</code>ï¼Œå®ƒæŒ‡å®š <code>docker run</code> å¯åŠ¨å®¹å™¨æ—¶é»˜è®¤è¿è¡Œçš„å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†echoå‘½ä»¤ï¼Œè¾“å‡ºâ€œhello worldâ€å­—ç¬¦ä¸²ã€‚</p><p>ç°åœ¨æœ‰äº†Dockerfileè¿™å¼ â€œæ–½å·¥å›¾çº¸â€ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯·å‡ºâ€œæ–½å·¥é˜Ÿâ€äº†ï¼Œç”¨ <code>docker build</code> å‘½ä»¤æ¥åˆ›å»ºå‡ºé•œåƒï¼š</p><pre><code class=\"language-plain\">docker build -f Dockerfile.busybox .\n\nSending build context to Docker daemon&nbsp; &nbsp;7.68kB\nStep 1/2 : FROM busybox\n&nbsp;---&gt; d38589532d97\nStep 2/2 : CMD echo \"hello world\"\n&nbsp;---&gt; Running in c5a762edd1c8\nRemoving intermediate container c5a762edd1c8\n&nbsp;---&gt; b61882f42db7\nSuccessfully built b61882f42db7\n</code></pre><p>ä½ éœ€è¦ç‰¹åˆ«æ³¨æ„å‘½ä»¤çš„æ ¼å¼ï¼Œç”¨ <code>-f</code> å‚æ•°æŒ‡å®šDockerfileæ–‡ä»¶åï¼Œåé¢å¿…é¡»è·Ÿä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œå«åšâ€œ<strong>æ„å»ºä¸Šä¸‹æ–‡</strong>â€ï¼ˆbuildâ€™s contextï¼‰ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªç®€å•çš„ç‚¹å·ï¼Œè¡¨ç¤ºå½“å‰è·¯å¾„çš„æ„æ€ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä½ å°±ä¼šçœ‹åˆ°Dockerä¼šé€è¡Œåœ°è¯»å–å¹¶æ‰§è¡ŒDockerfileé‡Œçš„æŒ‡ä»¤ï¼Œä¾æ¬¡åˆ›å»ºé•œåƒå±‚ï¼Œå†ç”Ÿæˆå®Œæ•´çš„é•œåƒã€‚</p><p>æ–°çš„é•œåƒæš‚æ—¶è¿˜æ²¡æœ‰åå­—ï¼ˆç”¨ <code>docker images</code> ä¼šçœ‹åˆ°æ˜¯ <code>&lt;none&gt;</code>ï¼‰ï¼Œä½†æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨â€œIMAGE IDâ€æ¥æŸ¥çœ‹æˆ–è€…è¿è¡Œï¼š</p><pre><code class=\"language-plain\">docker inspect b61\ndocker run b61\n</code></pre><h2>æ€æ ·ç¼–å†™æ­£ç¡®ã€é«˜æ•ˆçš„Dockerfile</h2><p>å¤§æ¦‚äº†è§£äº†Dockerfileä¹‹åï¼Œæˆ‘å†æ¥è®²è®²ç¼–å†™Dockerfileçš„ä¸€äº›å¸¸ç”¨æŒ‡ä»¤å’Œæœ€ä½³å®è·µï¼Œå¸®ä½ åœ¨ä»Šåçš„å·¥ä½œä¸­æŠŠå®ƒå†™å¥½ã€ç”¨å¥½ã€‚</p><p>é¦–å…ˆå› ä¸ºæ„å»ºé•œåƒçš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¿…é¡»æ˜¯ <code>FROM</code>ï¼Œæ‰€ä»¥åŸºç¡€é•œåƒçš„é€‰æ‹©éå¸¸å…³é”®ã€‚å¦‚æœå…³æ³¨çš„æ˜¯é•œåƒçš„å®‰å…¨å’Œå¤§å°ï¼Œé‚£ä¹ˆä¸€èˆ¬ä¼šé€‰æ‹©Alpineï¼›å¦‚æœå…³æ³¨çš„æ˜¯åº”ç”¨çš„è¿è¡Œç¨³å®šæ€§ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šé€‰æ‹©Ubuntuã€Debianã€CentOSã€‚</p><pre><code class=\"language-plain\">FROM alpine:3.15                # é€‰æ‹©Alpineé•œåƒ\nFROM ubuntu:bionic              # é€‰æ‹©Ubuntué•œåƒ\n</code></pre><p>æˆ‘ä»¬åœ¨æœ¬æœºä¸Šå¼€å‘æµ‹è¯•æ—¶ä¼šäº§ç”Ÿä¸€äº›æºç ã€é…ç½®ç­‰æ–‡ä»¶ï¼Œéœ€è¦æ‰“åŒ…è¿›é•œåƒé‡Œï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ <code>COPY</code> å‘½ä»¤ï¼Œå®ƒçš„ç”¨æ³•å’ŒLinuxçš„cpå·®ä¸å¤šï¼Œä¸è¿‡æ‹·è´çš„æºæ–‡ä»¶å¿…é¡»æ˜¯â€œ<strong>æ„å»ºä¸Šä¸‹æ–‡</strong>â€è·¯å¾„é‡Œçš„ï¼Œä¸èƒ½éšæ„æŒ‡å®šæ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¦ä»æœ¬æœºå‘é•œåƒæ‹·è´æ–‡ä»¶ï¼Œå°±å¿…é¡»æŠŠè¿™äº›æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªä¸“é—¨çš„ç›®å½•ï¼Œç„¶ååœ¨ <code>docker build</code> é‡ŒæŒ‡å®šâ€œæ„å»ºä¸Šä¸‹æ–‡â€åˆ°è¿™ä¸ªç›®å½•æ‰è¡Œã€‚</p><p>è¿™é‡Œæœ‰ä¸¤ä¸ª <code>COPY</code> å‘½ä»¤ç¤ºä¾‹ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ï¼š</p><pre><code class=\"language-plain\">COPY ./a.txt  /tmp/a.txt    # æŠŠæ„å»ºä¸Šä¸‹æ–‡é‡Œçš„a.txtæ‹·è´åˆ°é•œåƒçš„/tmpç›®å½•\nCOPY /etc/hosts  /tmp       # é”™è¯¯ï¼ä¸èƒ½ä½¿ç”¨æ„å»ºä¸Šä¸‹æ–‡ä¹‹å¤–çš„æ–‡ä»¶\n</code></pre><p>æ¥ä¸‹æ¥è¦è¯´çš„å°±æ˜¯Dockerfileé‡Œæœ€é‡è¦çš„ä¸€ä¸ªæŒ‡ä»¤ <code>RUN</code> ï¼Œå®ƒå¯ä»¥æ‰§è¡Œä»»æ„çš„Shellå‘½ä»¤ï¼Œæ¯”å¦‚æ›´æ–°ç³»ç»Ÿã€å®‰è£…åº”ç”¨ã€ä¸‹è½½æ–‡ä»¶ã€åˆ›å»ºç›®å½•ã€ç¼–è¯‘ç¨‹åºç­‰ç­‰ï¼Œå®ç°ä»»æ„çš„é•œåƒæ„å»ºæ­¥éª¤ï¼Œéå¸¸çµæ´»ã€‚</p><p><code>RUN</code> é€šå¸¸ä¼šæ˜¯Dockerfileé‡Œæœ€å¤æ‚çš„æŒ‡ä»¤ï¼Œä¼šåŒ…å«å¾ˆå¤šçš„Shellå‘½ä»¤ï¼Œä½†Dockerfileé‡Œä¸€æ¡æŒ‡ä»¤åªèƒ½æ˜¯ä¸€è¡Œï¼Œæ‰€ä»¥æœ‰çš„ <code>RUN</code> æŒ‡ä»¤ä¼šåœ¨æ¯è¡Œçš„æœ«å°¾ä½¿ç”¨ç»­è¡Œç¬¦ <code>\\</code>ï¼Œå‘½ä»¤ä¹‹é—´ä¹Ÿä¼šç”¨ <code>&amp;&amp;</code> æ¥è¿æ¥ï¼Œè¿™æ ·ä¿è¯åœ¨é€»è¾‘ä¸Šæ˜¯ä¸€è¡Œï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p><pre><code class=\"language-plain\">RUN apt-get update \\\n&nbsp; &nbsp; &amp;&amp; apt-get install -y \\\n&nbsp; &nbsp; &nbsp; &nbsp; build-essential \\\n&nbsp; &nbsp; &nbsp; &nbsp; curl \\\n&nbsp; &nbsp; &nbsp; &nbsp; make \\\n&nbsp; &nbsp; &nbsp; &nbsp; unzip \\\n&nbsp; &nbsp; &amp;&amp; cd /tmp \\\n&nbsp; &nbsp; &amp;&amp; curl -fSL xxx.tar.gz -o xxx.tar.gz\\\n&nbsp; &nbsp; &amp;&amp; tar xzf xxx.tar.gz \\\n&nbsp; &nbsp; &amp;&amp; cd xxx \\\n&nbsp; &nbsp; &amp;&amp; ./config \\\n&nbsp; &nbsp; &amp;&amp; make \\\n    &amp;&amp; make clean\n</code></pre><p>æœ‰çš„æ—¶å€™åœ¨Dockerfileé‡Œå†™è¿™ç§è¶…é•¿çš„ <code>RUN</code> æŒ‡ä»¤å¾ˆä¸ç¾è§‚ï¼Œè€Œä¸”ä¸€æ—¦å†™é”™äº†ï¼Œæ¯æ¬¡è°ƒè¯•éƒ½è¦é‡æ–°æ„å»ºä¹Ÿå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ä½ å¯ä»¥é‡‡ç”¨ä¸€ç§å˜é€šçš„æŠ€å·§ï¼š<strong>æŠŠè¿™äº›Shellå‘½ä»¤é›†ä¸­åˆ°ä¸€ä¸ªè„šæœ¬æ–‡ä»¶é‡Œï¼Œç”¨ <code>COPY</code> å‘½ä»¤æ‹·è´è¿›å»å†ç”¨ <code>RUN</code> æ¥æ‰§è¡Œ</strong>ï¼š</p><pre><code class=\"language-plain\">COPY setup.sh  /tmp/                # æ‹·è´è„šæœ¬åˆ°/tmpç›®å½•\n\nRUN cd /tmp &amp;&amp; chmod +x setup.sh \\  # æ·»åŠ æ‰§è¡Œæƒé™\n    &amp;&amp; ./setup.sh &amp;&amp; rm setup.sh    # è¿è¡Œè„šæœ¬ç„¶åå†åˆ é™¤\n</code></pre><p><code>RUN</code> æŒ‡ä»¤å®é™…ä¸Šå°±æ˜¯Shellç¼–ç¨‹ï¼Œå¦‚æœä½ å¯¹å®ƒæœ‰æ‰€äº†è§£ï¼Œå°±åº”è¯¥çŸ¥é“å®ƒæœ‰å˜é‡çš„æ¦‚å¿µï¼Œå¯ä»¥å®ç°å‚æ•°åŒ–è¿è¡Œï¼Œè¿™åœ¨Dockerfileé‡Œä¹Ÿå¯ä»¥åšåˆ°ï¼Œéœ€è¦ä½¿ç”¨ä¸¤ä¸ªæŒ‡ä»¤ <code>ARG</code> å’Œ<code> ENV</code>ã€‚</p><p><strong>å®ƒä»¬åŒºåˆ«åœ¨äº <code>ARG</code> åˆ›å»ºçš„å˜é‡åªåœ¨é•œåƒæ„å»ºè¿‡ç¨‹ä¸­å¯è§ï¼Œå®¹å™¨è¿è¡Œæ—¶ä¸å¯è§ï¼Œè€Œ <code>ENV</code> åˆ›å»ºçš„å˜é‡ä¸ä»…èƒ½å¤Ÿåœ¨æ„å»ºé•œåƒçš„è¿‡ç¨‹ä¸­ä½¿ç”¨ï¼Œåœ¨å®¹å™¨è¿è¡Œæ—¶ä¹Ÿèƒ½å¤Ÿä»¥ç¯å¢ƒå˜é‡çš„å½¢å¼è¢«åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚</strong></p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½¿ç”¨ <code>ARG</code> å®šä¹‰äº†åŸºç¡€é•œåƒçš„åå­—ï¼ˆå¯ä»¥ç”¨åœ¨â€œFROMâ€æŒ‡ä»¤é‡Œï¼‰ï¼Œä½¿ç”¨ <code>ENV</code> å®šä¹‰äº†ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼š</p><pre><code class=\"language-plain\">ARG IMAGE_BASE=\"node\"\nARG IMAGE_TAG=\"alpine\"\n\nENV PATH=$PATH:/tmp\nENV DEBUG=OFF\n</code></pre><p>è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æŒ‡ä»¤æ˜¯ <code>EXPOSE</code>ï¼Œå®ƒç”¨æ¥å£°æ˜å®¹å™¨å¯¹å¤–æœåŠ¡çš„ç«¯å£å·ï¼Œå¯¹ç°åœ¨åŸºäºNode.jsã€Tomcatã€Nginxã€Goç­‰å¼€å‘çš„å¾®æœåŠ¡ç³»ç»Ÿæ¥è¯´éå¸¸æœ‰ç”¨ï¼š</p><pre><code class=\"language-plain\">EXPOSE 443           # é»˜è®¤æ˜¯tcpåè®®\nEXPOSE 53/udp        # å¯ä»¥æŒ‡å®šudpåè®®\n</code></pre><p>è®²äº†è¿™äº›DockerfileæŒ‡ä»¤ä¹‹åï¼Œæˆ‘è¿˜è¦ç‰¹åˆ«å¼ºè°ƒä¸€ä¸‹ï¼Œå› ä¸ºæ¯ä¸ªæŒ‡ä»¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ªé•œåƒå±‚ï¼Œæ‰€ä»¥Dockerfileé‡Œæœ€å¥½ä¸è¦æ»¥ç”¨æŒ‡ä»¤ï¼Œå°½é‡ç²¾ç®€åˆå¹¶ï¼Œå¦åˆ™å¤ªå¤šçš„å±‚ä¼šå¯¼è‡´é•œåƒè‡ƒè‚¿ä¸å ªã€‚</p><h2>docker buildæ˜¯æ€ä¹ˆå·¥ä½œçš„</h2><p>Dockerfileå¿…é¡»è¦ç»è¿‡ <code>docker build</code> æ‰èƒ½ç”Ÿæ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å†æ¥çœ‹çœ‹ <code>docker build</code> çš„è¯¦ç»†ç”¨æ³•ã€‚</p><p>åˆšæ‰åœ¨æ„å»ºé•œåƒçš„æ—¶å€™ï¼Œä½ æ˜¯å¦å¯¹â€œæ„å»ºä¸Šä¸‹æ–‡â€è¿™ä¸ªè¯æ„Ÿåˆ°æœ‰äº›å›°æƒ‘å‘¢ï¼Ÿå®ƒåˆ°åº•æ˜¯ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿ</p><p>æˆ‘è§‰å¾—ç”¨Dockerçš„å®˜æ–¹æ¶æ„å›¾æ¥ç†è§£ä¼šæ¯”è¾ƒæ¸…æ¥šï¼ˆæ³¨æ„å›¾ä¸­ä¸â€œdocker buildâ€å…³è”çš„è™šçº¿ï¼‰ã€‚</p><p>å› ä¸ºå‘½ä»¤è¡Œâ€œdockerâ€æ˜¯ä¸€ä¸ªç®€å•çš„å®¢æˆ·ç«¯ï¼ŒçœŸæ­£çš„é•œåƒæ„å»ºå·¥ä½œæ˜¯ç”±æœåŠ¡å™¨ç«¯çš„â€œDocker daemonâ€æ¥å®Œæˆçš„ï¼Œæ‰€ä»¥â€œdockerâ€å®¢æˆ·ç«¯å°±åªèƒ½æŠŠâ€œæ„å»ºä¸Šä¸‹æ–‡â€ç›®å½•æ‰“åŒ…ä¸Šä¼ ï¼ˆæ˜¾ç¤ºä¿¡æ¯ <code>Sending build context to Docker daemon</code> ï¼‰ï¼Œè¿™æ ·æœåŠ¡å™¨æ‰èƒ½å¤Ÿè·å–æœ¬åœ°çš„è¿™äº›æ–‡ä»¶ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c8/fe/c8116066bdbf295a7c9fc25b87755dfe.jpg?wh=1920x1048\" alt=\"å›¾ç‰‡\"></p><p>æ˜ç™½äº†è¿™ä¸€ç‚¹ï¼Œä½ å°±ä¼šçŸ¥é“ï¼Œâ€œæ„å»ºä¸Šä¸‹æ–‡â€å…¶å®ä¸Dockerfileå¹¶æ²¡æœ‰ç›´æ¥çš„å…³ç³»ï¼Œå®ƒå…¶å®æŒ‡å®šäº†è¦æ‰“åŒ…è¿›é•œåƒçš„ä¸€äº›ä¾èµ–æ–‡ä»¶ã€‚è€Œ <code>COPY</code> å‘½ä»¤ä¹Ÿåªèƒ½ä½¿ç”¨åŸºäºâ€œæ„å»ºä¸Šä¸‹æ–‡â€çš„ç›¸å¯¹è·¯å¾„ï¼Œå› ä¸ºâ€œDocker daemonâ€çœ‹ä¸åˆ°æœ¬åœ°ç¯å¢ƒï¼Œåªèƒ½çœ‹åˆ°æ‰“åŒ…ä¸Šä¼ çš„é‚£äº›æ–‡ä»¶ã€‚</p><p>ä½†è¿™ä¸ªæœºåˆ¶ä¹Ÿä¼šå¯¼è‡´ä¸€äº›éº»çƒ¦ï¼Œå¦‚æœç›®å½•é‡Œæœ‰çš„æ–‡ä»¶ï¼ˆä¾‹å¦‚readme/.git/.svnç­‰ï¼‰ä¸éœ€è¦æ‹·è´è¿›é•œåƒï¼Œdockerä¹Ÿä¼šä¸€è‚¡è„‘åœ°æ‰“åŒ…ä¸Šä¼ ï¼Œæ•ˆç‡å¾ˆä½ã€‚</p><p>ä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œä½ å¯ä»¥åœ¨â€œæ„å»ºä¸Šä¸‹æ–‡â€ç›®å½•é‡Œå†å»ºç«‹ä¸€ä¸ª <code>.dockerignore</code> æ–‡ä»¶ï¼Œè¯­æ³•ä¸ <code>.gitignore</code> ç±»ä¼¼ï¼Œæ’é™¤é‚£äº›ä¸éœ€è¦çš„æ–‡ä»¶ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œè¡¨ç¤ºä¸æ‰“åŒ…ä¸Šä¼ åç¼€æ˜¯â€œswpâ€â€œshâ€çš„æ–‡ä»¶ï¼š</p><pre><code class=\"language-plain\"># docker ignore\n*.swp\n*.sh\n</code></pre><p>å¦å¤–å…³äºDockerfileï¼Œä¸€èˆ¬åº”è¯¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ <code>-f</code> æ¥æ˜¾å¼æŒ‡å®šã€‚ä½†å¦‚æœçœç•¥è¿™ä¸ªå‚æ•°ï¼Œ<code>docker build</code> å°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ‰¾åå­—æ˜¯ <code>Dockerfile</code> çš„æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæ„å»ºç›®æ ‡çš„è¯ï¼Œæ–‡ä»¶ç›´æ¥å«â€œDockerfileâ€æ˜¯æœ€çœäº‹çš„ã€‚</p><p>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ <code>docker build</code> åº”è¯¥å°±æ²¡ä»€ä¹ˆéš¾ç‚¹äº†ï¼Œä¸è¿‡æ„å»ºå‡ºæ¥çš„é•œåƒåªæœ‰â€œIMAGE IDâ€æ²¡æœ‰åå­—ï¼Œä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚</p><p>ä¸ºæ­¤ä½ å¯ä»¥åŠ ä¸Šä¸€ä¸ª <code>-t</code> å‚æ•°ï¼Œä¹Ÿå°±æ˜¯æŒ‡å®šé•œåƒçš„æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œè¿™æ ·Dockerå°±ä¼šåœ¨æ„å»ºå®Œæˆåè‡ªåŠ¨ç»™é•œåƒæ·»åŠ åå­—ã€‚å½“ç„¶ï¼Œåå­—å¿…é¡»è¦ç¬¦åˆä¸ŠèŠ‚è¯¾é‡Œçš„å‘½åè§„èŒƒï¼Œç”¨ <code>:</code> åˆ†éš”åå­—å’Œæ ‡ç­¾ï¼Œå¦‚æœä¸æä¾›æ ‡ç­¾é»˜è®¤å°±æ˜¯â€œlatestâ€ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†å®¹å™¨é•œåƒçš„å†…éƒ¨ç»“æ„ï¼Œé‡ç‚¹ç†è§£<strong>å®¹å™¨é•œåƒæ˜¯ç”±å¤šä¸ªåªè¯»çš„Layeræ„æˆçš„ï¼ŒåŒä¸€ä¸ªLayerå¯ä»¥è¢«ä¸åŒçš„é•œåƒå…±äº«</strong>ï¼Œå‡å°‘äº†å­˜å‚¨å’Œä¼ è¾“çš„æˆæœ¬ã€‚</p><p>å¦‚ä½•ç¼–å†™Dockerfileå†…å®¹ç¨å¾®å¤šä¸€ç‚¹ï¼Œæˆ‘å†ç®€å•åšä¸ªå°ç»“ï¼š</p><ol>\n<li>åˆ›å»ºé•œåƒéœ€è¦ç¼–å†™Dockerfileï¼Œå†™æ¸…æ¥šåˆ›å»ºé•œåƒçš„æ­¥éª¤ï¼Œæ¯ä¸ªæŒ‡ä»¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ªLayerã€‚</li>\n<li>Dockerfileé‡Œï¼Œç¬¬ä¸€ä¸ªæŒ‡ä»¤å¿…é¡»æ˜¯ <code>FROM</code>ï¼Œç”¨æ¥é€‰æ‹©åŸºç¡€é•œåƒï¼Œå¸¸ç”¨çš„æœ‰Alpineã€Ubuntuç­‰ã€‚å…¶ä»–å¸¸ç”¨çš„æŒ‡ä»¤æœ‰ï¼š<code>COPY</code>ã€<code>RUN</code>ã€<code>EXPOSE</code>ï¼Œåˆ†åˆ«æ˜¯æ‹·è´æ–‡ä»¶ï¼Œè¿è¡ŒShellå‘½ä»¤ï¼Œå£°æ˜æœåŠ¡ç«¯å£å·ã€‚</li>\n<li><code>docker build</code> éœ€è¦ç”¨ <code>-f</code> æ¥æŒ‡å®šDockerfileï¼Œå¦‚æœä¸æŒ‡å®šå°±ä½¿ç”¨å½“å‰ç›®å½•ä¸‹åå­—æ˜¯â€œDockerfileâ€çš„æ–‡ä»¶ã€‚</li>\n<li><code>docker build</code> éœ€è¦æŒ‡å®šâ€œæ„å»ºä¸Šä¸‹æ–‡â€ï¼Œå…¶ä¸­çš„æ–‡ä»¶ä¼šæ‰“åŒ…ä¸Šä¼ åˆ°Docker daemonï¼Œæ‰€ä»¥å°½é‡ä¸è¦åœ¨â€œæ„å»ºä¸Šä¸‹æ–‡â€ä¸­å­˜æ”¾å¤šä½™çš„æ–‡ä»¶ã€‚</li>\n<li>åˆ›å»ºé•œåƒçš„æ—¶å€™åº”å½“å°½é‡ä½¿ç”¨ <code>-t</code> å‚æ•°ï¼Œä¸ºé•œåƒèµ·ä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</li>\n</ol><p>ä»Šå¤©è®²äº†ä¸å°‘ï¼Œä½†å…³äºåˆ›å»ºé•œåƒè¿˜æœ‰å¾ˆå¤šé«˜çº§æŠ€å·§ç­‰å¾…ä½ å»æ¢ç´¢ï¼Œæ¯”å¦‚ä½¿ç”¨ç¼“å­˜ã€å¤šé˜¶æ®µæ„å»ºç­‰ç­‰ï¼Œä½ å¯ä»¥å†å‚è€ƒDockerå®˜æ–¹æ–‡æ¡£ï¼ˆ<a href=\"https://docs.docker.com/engine/reference/builder/\">https://docs.docker.com/engine/reference/builder/</a>ï¼‰ï¼Œæˆ–è€…ä¸€äº›çŸ¥ååº”ç”¨çš„é•œåƒï¼ˆå¦‚Nginxã€Redisã€Node.jsç­‰ï¼‰è¿›ä¸€æ­¥å­¦ä¹ ã€‚</p><h2>è¯¾ä¸‹ä½œä¸š</h2><p>æœ€åæ˜¯è¯¾ä¸‹ä½œä¸šæ—¶é—´ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå®Œæ•´çš„Dockerfileç¤ºä¾‹ï¼Œä½ å¯ä»¥å°è¯•ç€å»è§£é‡Šä¸€ä¸‹å®ƒçš„å«ä¹‰ï¼Œç„¶åå†è‡ªå·±æ„å»ºä¸€ä¸‹ï¼š</p><pre><code class=\"language-plain\"># Dockerfile\n# docker build -t ngx-app .\n# docker build -t ngx-app:1.0 .\n\nARG IMAGE_BASE=\"nginx\"\nARG IMAGE_TAG=\"1.21-alpine\"\n\nFROM ${IMAGE_BASE}:${IMAGE_TAG}\n\nCOPY ./default.conf /etc/nginx/conf.d/\n\nRUN cd /usr/share/nginx/html \\\n&nbsp; &nbsp; &amp;&amp; echo \"hello nginx\" &gt; a.txt\n\nEXPOSE 8081 8082 8083\n</code></pre><p>å½“ç„¶è¿˜æœ‰ä¸¤ä¸ªæ€è€ƒé¢˜ï¼š</p><ol>\n<li>é•œåƒé‡Œçš„å±‚éƒ½æ˜¯åªè¯»ä¸å¯ä¿®æ”¹çš„ï¼Œä½†å®¹å™¨è¿è¡Œçš„æ—¶å€™ç»å¸¸ä¼šå†™å…¥æ•°æ®ï¼Œè¿™ä¸ªå†²çªåº”è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿï¼ˆç­”æ¡ˆåœ¨æœ¬æœŸæ‰¾ï¼‰</li>\n<li>ä½ èƒ½å†åˆ—ä¸¾ä¸€ä¸‹é•œåƒçš„åˆ†å±‚ç»“æ„å¸¦æ¥äº†å“ªäº›å¥½å¤„å—ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ç§¯æç•™è¨€ã€‚å¦‚æœä½ è§‰å¾—æœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹åŒäº‹ä¸€èµ·è®¨è®ºå­¦ä¹ ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/17/24/1705133103a8aaf6c7fed770afa6dc24.jpg?wh=1920x2805\" alt=\"\"></p>","neighbors":{"left":{"article_title":"03ï½œå®¹å™¨åŒ–çš„åº”ç”¨ï¼šä¼šäº†è¿™äº›ä½ å°±æ˜¯Dockeré«˜æ‰‹","id":528651},"right":{"article_title":"05ï½œé•œåƒä»“åº“ï¼šè¯¥æ€æ ·ç”¨å¥½Docker Hubè¿™ä¸ªå®è—","id":528677}},"comments":[{"had_liked":false,"id":349988,"user_name":"includestdio.h","can_delete":false,"product_type":"c1","uid":2314854,"ip_address":"","ucode":"5027BACE9319CD","user_header":"https://static001.geekbang.org/account/avatar/00/23/52/66/3e4d4846.jpg","comment_is_top":false,"comment_ctime":1656491186,"is_pvip":true,"replies":[{"id":"127374","content":"many thanksã€‚","user_name":"ä½œè€…å›å¤","comment_id":349988,"uid":"1181974","ip_address":"","utype":1,"ctime":1656546001,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":4,"score":"134800477362","product_id":100114501,"comment_content":"å…³äºæŒ‡ä»¤ç”Ÿæˆå±‚çš„é—®é¢˜éœ€è¦å†è¡¥å……å“ˆï¼šåªæœ‰ RUN, COPY, ADD ä¼šç”Ÿæˆæ–°çš„é•œåƒå±‚ï¼Œå…¶å®ƒæŒ‡ä»¤åªä¼šäº§ç”Ÿä¸´æ—¶å±‚ï¼Œä¸å½±å“æ„å»ºå¤§å°ï¼Œå®˜ç½‘çš„é•œåƒæ„å»ºæœ€ä½³å®è·µé‡Œé¢æœ‰æåŠ<br><br>https:&#47;&#47;docs.docker.com&#47;develop&#47;develop-images&#47;dockerfile_best-practices&#47;<br>Only the instructions RUN, COPY, ADD create layers. Other instructions create temporary intermediate images, and do not increase the size of the build.","like_count":32,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578143,"discussion_content":"many thanksã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656546001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579662,"discussion_content":"ç¡®å®šä¸æ˜¯buildkitçš„åŠŸèƒ½ï¼Ÿä¸€ç›´è®°å¾—æ˜¯æ¯ä¸ªæŒ‡ä»¤éƒ½ä¼šäº§ç”Ÿä¸€å±‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657604950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349994,"user_name":"é™ˆå§è™«","can_delete":false,"product_type":"c1","uid":1481979,"ip_address":"","ucode":"44BB84712436AB","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/fb/7fe6df5b.jpg","comment_is_top":false,"comment_ctime":1656493976,"is_pvip":true,"replies":[{"id":"127373","content":"great","user_name":"ä½œè€…å›å¤","comment_id":349994,"uid":"1181974","ip_address":"","utype":1,"ctime":1656545972,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":5,"score":"44606166936","product_id":100114501,"comment_content":"1. åˆ›å»ºå’Œä¿®æ”¹æ–‡ä»¶ï¼šé€šè¿‡åœ¨å†™æ—¶å¤åˆ¶å®ç°ï¼›åˆ é™¤æ–‡ä»¶ï¼šé€šè¿‡ç™½éšœå®ç°ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¸€ä¸ªæ–‡ä»¶è®°å½•å·²ç»è¢«åˆ é™¤çš„æ–‡ä»¶ã€‚<br>2. é•œåƒåˆ†å±‚çš„å¥½å¤„ï¼šå¯ä»¥é‡å¤ä½¿ç”¨æœªè¢«æ”¹åŠ¨çš„layerï¼Œæ¯æ¬¡ä¿®æ”¹æ‰“åŒ…é•œåƒï¼Œåªéœ€é‡æ–°æ„å»ºè¢«æ”¹åŠ¨çš„éƒ¨åˆ†","like_count":10,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578142,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656545972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350047,"user_name":"CK","can_delete":false,"product_type":"c1","uid":2005775,"ip_address":"","ucode":"F91C280D773738","user_header":"https://static001.geekbang.org/account/avatar/00/1e/9b/0f/ef415e32.jpg","comment_is_top":false,"comment_ctime":1656520091,"is_pvip":false,"replies":[{"id":"127384","content":"â€œä¸Šä¸‹æ–‡â€è¿™ä¸ªè¯ç¡®å®å¾ˆéš¾ç†è§£ï¼Œæœ€å¥½ç›´æ¥ç”¨è‹±æ–‡contextï¼Œå°±æ˜¯è¦æ‰“åŒ…è¿›é•œåƒçš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚<br><br>å¦‚æœcopyæ—¶åœ¨è¿™ä¸ªç›®å½•é‡Œæ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå½“ç„¶å°±ä¼šæŠ¥é”™äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":350047,"uid":"1181974","ip_address":"","utype":1,"ctime":1656557722,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"23131356571","product_id":100114501,"comment_content":"è¿˜æ˜¯æ²¡å¤ªç†è§£æ„å»ºä¸Šä¸‹æ–‡çš„æ„æ€ï¼Œæ˜¯æŒ‡docker buildçš„æ—¶å€™æŒ‡å®šè·¯å¾„ï¼Ÿæ¯”å¦‚æ–‡ä¸­ç¤ºä¾‹docker build -f Dockerfile.busybox .  æ˜¯ä¸€ä¸ª.è¡¨ç¤ºï¼Œæˆ‘æ‰§è¡Œæ–‡æœ«çš„è¯¾ä¸‹ä½œä¸šæ—¶ï¼Œæ˜¾ç¤ºCOPY failed: file not found in build context or excluded by .dockerignore: stat default.conf: file does not existï¼Œæ˜¯ä¸æ˜¯docker buildæ—¶çš„è·¯å¾„æ²¡æŒ‡å®šå¥½å‘¢<br>","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578184,"discussion_content":"â€œä¸Šä¸‹æ–‡â€è¿™ä¸ªè¯ç¡®å®å¾ˆéš¾ç†è§£ï¼Œæœ€å¥½ç›´æ¥ç”¨è‹±æ–‡contextï¼Œå°±æ˜¯è¦æ‰“åŒ…è¿›é•œåƒçš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚\n\nå¦‚æœcopyæ—¶åœ¨è¿™ä¸ªç›®å½•é‡Œæ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œå½“ç„¶å°±ä¼šæŠ¥é”™äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1656557722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350042,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1656514988,"is_pvip":true,"replies":[{"id":"127379","content":"çœ‹å°è´´å£«åº”è¯¥å°±èƒ½å¤Ÿç†è§£å®ƒä»¬ä¸¤ä¸ªçš„åŒºåˆ«äº†ï¼ŒENTRYPOINTæ˜¯æ‰§è¡Œçš„å‘½ä»¤ï¼Œ CMDæ˜¯å‚æ•°ã€‚<br><br>æ„Ÿè§‰è¿™åº”è¯¥æ˜¯dockerå½“åˆçš„è®¾è®¡å°å¤±è¯¯ï¼Œå…¶å®ç”¨å“ªä¸ªæ²¡æœ‰ä»€ä¹ˆå¤ªä¸¥æ ¼çš„åŒºåˆ†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":350042,"uid":"1181974","ip_address":"","utype":1,"ctime":1656546226,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":1,"score":"23131351468","product_id":100114501,"comment_content":"ENTRYPOINT å’Œ CMD çš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆçš„ï¼Ÿ ä»€ä¹ˆæ—¶å€™ç”¨ ENTRYPOINT ä»€ä¹ˆæ—¶å€™ç”¨ CMDï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578149,"discussion_content":"çœ‹å°è´´å£«åº”è¯¥å°±èƒ½å¤Ÿç†è§£å®ƒä»¬ä¸¤ä¸ªçš„åŒºåˆ«äº†ï¼ŒENTRYPOINTæ˜¯æ‰§è¡Œçš„å‘½ä»¤ï¼Œ CMDæ˜¯å‚æ•°ã€‚\n\næ„Ÿè§‰è¿™åº”è¯¥æ˜¯dockerå½“åˆçš„è®¾è®¡å°å¤±è¯¯ï¼Œå…¶å®ç”¨å“ªä¸ªæ²¡æœ‰ä»€ä¹ˆå¤ªä¸¥æ ¼çš„åŒºåˆ†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656546226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2935759,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/cb/cf/fc97de76.jpg","nickname":"Geektimer","note":"","ucode":"13746813BA173A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590626,"discussion_content":"ä¸€ä¸ªå¯ä»¥è¢«å¤–éƒ¨è¦†ç›–ï¼Œä¸€ä¸ªä¸å¯ä»¥(CMD)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665931944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349938,"user_name":"é£é£˜ï¼Œå¾ç‹¬æ€","can_delete":false,"product_type":"c1","uid":1131032,"ip_address":"","ucode":"4DF0E7DC22EE53","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/18/edc1b373.jpg","comment_is_top":false,"comment_ctime":1656464637,"is_pvip":false,"replies":[{"id":"127360","content":"great","user_name":"ä½œè€…å›å¤","comment_id":349938,"uid":"1181974","ip_address":"","utype":1,"ctime":1656471874,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"23131301117","product_id":100114501,"comment_content":"1.å®¹å™¨æœ€ä¸Šä¸€å±‚æ˜¯è¯»å†™å±‚ï¼Œé•œåƒæ‰€æœ‰çš„å±‚æ˜¯åªè¯»å±‚ã€‚å®¹å™¨å¯åŠ¨åï¼ŒDocker daemonä¼šåœ¨å®¹å™¨çš„é•œåƒä¸Šæ·»åŠ ä¸€ä¸ªè¯»å†™å±‚ã€‚<br>2.å®¹å™¨åˆ†å±‚å¯ä»¥å…±äº«èµ„æºï¼ŒèŠ‚çº¦ç©ºé—´ï¼Œç›¸åŒçš„å†…å®¹åªéœ€è¦åŠ è½½ä¸€ä»½ä»½åˆ°å†…å­˜ã€‚","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578016,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656471874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351871,"user_name":"hiDaLao","can_delete":false,"product_type":"c1","uid":2917100,"ip_address":"","ucode":"3C2DC2A3A377E4","user_header":"https://static001.geekbang.org/account/avatar/00/2c/82/ec/99b480e8.jpg","comment_is_top":false,"comment_ctime":1658244413,"is_pvip":true,"replies":[{"id":"127954","content":"docker pullçš„layeræ˜¯å‹ç¼©æ•°æ®çš„sha256ï¼Œdocker inspectæ˜¯è§£å‹åæ•°æ®çš„sha256ã€‚","user_name":"ä½œè€…å›å¤","comment_id":351871,"uid":"1181974","ip_address":"","utype":1,"ctime":1658282463,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"10248179005","product_id":100114501,"comment_content":"è¯·é—®ä¸‹docker pullæ—¶è¾“å‡ºçš„layerçš„å€¼ä¸ºä»€ä¹ˆå’Œdocker inspecté‡Œé¢layerä¿¡æ¯çš„sha256çš„å€¼ä¸ä¸€æ ·å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580596,"discussion_content":"docker pullçš„layeræ˜¯å‹ç¼©æ•°æ®çš„sha256ï¼Œdocker inspectæ˜¯è§£å‹åæ•°æ®çš„sha256ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658282463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356100,"user_name":"jone","can_delete":false,"product_type":"c1","uid":1318619,"ip_address":"åŒ—äº¬","ucode":"00D0C54BE1005C","user_header":"https://static001.geekbang.org/account/avatar/00/14/1e/db/921367d6.jpg","comment_is_top":false,"comment_ctime":1661963797,"is_pvip":false,"replies":[{"id":"129626","content":"è¿™ä¸ªè¦çœ‹é•œåƒé‡Œæ˜¯ä»€ä¹ˆäº†ï¼Œå¦‚æœæ˜¯Nginxã€Redisè¿™æ ·çš„ä¼šè‡ªåŠ¨åœ¨åå°è¿è¡Œï¼Œå¦‚æœæ˜¯shellè„šæœ¬é‚£ä¹ˆå¯åŠ¨åä¼šç«‹å³ç»“æŸã€‚","user_name":"ä½œè€…å›å¤","comment_id":356100,"uid":"1181974","ip_address":"åŒ—äº¬","utype":1,"ctime":1661997331,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5956931093","product_id":100114501,"comment_content":"ã€è¯¾ä¸‹ä½œä¸šã€‘ ï¼Œç”¨docker buildæ‰“å¥½é•œåƒåï¼Œå³ä½¿ä½¿ç”¨-dï¼Œä¹Ÿæ˜¯ä¼šè‡ªåŠ¨é€€å‡ºã€‚å¦‚æœæƒ³è¦çœ‹å®¹å™¨é‡Œé¢åˆšåˆšcopyå’Œç”Ÿæˆçš„a.txtæ–‡ä»¶ï¼Œåªèƒ½é‡‡ç”¨ï¼š docker run -it ngx-app:1.0 sh ï¼Œè¿™æ ·å°±è¿›å…¥åˆ°å®¹å™¨é‡Œé¢äº†ï¼Œå½“ç„¶exitsä¹‹åï¼Œå°±ä¼šé€€å‡ºå®¹å™¨äº†ã€‚  è€å¸ˆï¼Œè¿™ä¸ªè¦æ€ä¹ˆç†è§£å‘¢ã€‚å³ä½¿ç”¨äº†-dï¼Œä¹Ÿæ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œå®¹å™¨ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586125,"discussion_content":"è¿™ä¸ªè¦çœ‹é•œåƒé‡Œæ˜¯ä»€ä¹ˆäº†ï¼Œå¦‚æœæ˜¯Nginxã€Redisè¿™æ ·çš„ä¼šè‡ªåŠ¨åœ¨åå°è¿è¡Œï¼Œå¦‚æœæ˜¯shellè„šæœ¬é‚£ä¹ˆå¯åŠ¨åä¼šç«‹å³ç»“æŸã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661997331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352255,"user_name":"YueShi","can_delete":false,"product_type":"c1","uid":1625530,"ip_address":"","ucode":"8F7AFAE4641A7D","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","comment_is_top":false,"comment_ctime":1658483020,"is_pvip":true,"replies":[{"id":"128141","content":"<br>1.ä¸å¯ä»¥ï¼Œå› ä¸ºcontextä¼šè¢«æ‰“åŒ…å‘é€ç»™daemonï¼Œå®ƒå°±æ˜¯æ ¹ã€‚<br><br>2.è¿™ä¸ªå°±æ˜¯dockerçš„build cacheï¼Œå¯ä»¥å†æŸ¥ç›¸å…³çš„èµ„æ–™ã€‚<br><br>3.æ˜¯çš„ï¼Œé»˜è®¤å°±æ˜¯docker hubçš„libraryåå­—ï¼Œåé¢ä¼šè®²ã€‚","user_name":"ä½œè€…å›å¤","comment_id":352255,"uid":"1181974","ip_address":"","utype":1,"ctime":1658486356,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"5953450316","product_id":100114501,"comment_content":"1: æ„å»ºä¸Šä¸‹æ–‡ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ˜¯ä¸æ˜¯å½“å‰å°±æ˜¯é¡¶å±‚ï¼Œé™åˆ¶é€šè¿‡ ..&#47; çš„æ–¹å¼å»åˆ°æ„å»ºä¸Šä¸‹æ–‡çš„ä¸Šä¸€å±‚<br><br>2. runçš„æŒ‡ä»¤ä¼šç”Ÿæˆæ–°çš„ä¸€å±‚ï¼Œä½†æ˜¯å¦‚æœ ã€runä¹‹å‰çš„æŒ‡ä»¤ä¸ä¸€æ ·ï¼Œä¾‹å¦‚fromã€‘ã€runé‡Œé¢çš„ä¸œè¥¿å¤ªå¤šã€‘ï¼Œæ˜¯ä¸æ˜¯å¤§éƒ¨åˆ†runç”Ÿæˆçš„è¿™ä¸€å±‚éƒ½ä¸èƒ½é‡ç”¨å‘¢ï¼Ÿè¿™ä¸€å—æ¯”è¾ƒå¥½å¥‡<br><br>3. buildåçš„åå­—ä¸º  =&gt; =&gt; naming to docker.io&#47;library&#47;homeworkã€‚      å‰é¢çš„è¿™ä¸ªdocker.Io&#47;library è¿™ä¸ªæ˜¯é»˜è®¤çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581078,"discussion_content":"\n1.ä¸å¯ä»¥ï¼Œå› ä¸ºcontextä¼šè¢«æ‰“åŒ…å‘é€ç»™daemonï¼Œå®ƒå°±æ˜¯æ ¹ã€‚\n\n2.è¿™ä¸ªå°±æ˜¯dockerçš„build cacheï¼Œå¯ä»¥å†æŸ¥ç›¸å…³çš„èµ„æ–™ã€‚\n\n3.æ˜¯çš„ï¼Œé»˜è®¤å°±æ˜¯docker hubçš„libraryåå­—ï¼Œåé¢ä¼šè®²ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658486356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1625530,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","nickname":"YueShi","note":"","ucode":"8F7AFAE4641A7D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":581079,"discussion_content":"æ„Ÿè°¢ç½—è€å¸ˆè§£æƒ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658486420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":581078,"ip_address":""},"score":581079,"extra":""}]}]},{"had_liked":false,"id":350363,"user_name":"ä¹æš®","can_delete":false,"product_type":"c1","uid":3034677,"ip_address":"","ucode":"85DEB728BF6097","user_header":"https://static001.geekbang.org/account/avatar/00/2e/4e/35/d5d1aec8.jpg","comment_is_top":false,"comment_ctime":1656847341,"is_pvip":false,"replies":[{"id":"127441","content":"è‚¯å®šæ˜¯æœ‰çš„ï¼ŒDockerfileé‡Œçš„æŒ‡ä»¤åœ¨buildçš„æ—¶å€™å°±ç”Ÿæˆåœ¨é•œåƒé‡Œäº†ï¼Œçœ‹çœ‹ç›®å½•å¯¹ä¸å¯¹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":350363,"uid":"1181974","ip_address":"","utype":1,"ctime":1656896205,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5951814637","product_id":100114501,"comment_content":"RUN cd &#47;usr&#47;share&#47;nginx&#47;html \\    &amp;&amp; echo &quot;hello nginx&quot; &gt; a.txt<br>è€å¸ˆï¼Œè¿™å¥è¯åœ¨å®¹å™¨æ‰§è¡Œï¼Œæˆ‘è¿›å…¥åˆ°å®¹å™¨å†…éƒ¨ç»“æœæ²¡æœ‰ä¿å­˜ä¸‹æ¥å‘¢ï¼Œæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶<br>","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578547,"discussion_content":"è‚¯å®šæ˜¯æœ‰çš„ï¼ŒDockerfileé‡Œçš„æŒ‡ä»¤åœ¨buildçš„æ—¶å€™å°±ç”Ÿæˆåœ¨é•œåƒé‡Œäº†ï¼Œçœ‹çœ‹ç›®å½•å¯¹ä¸å¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656896206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350158,"user_name":"ä»Šå¤©ä½ å­¦ä¹ äº†å—ï¼Ÿ","can_delete":false,"product_type":"c1","uid":1489002,"ip_address":"","ucode":"1CACF4492D7843","user_header":"https://static001.geekbang.org/account/avatar/00/16/b8/6a/d37ed9ab.jpg","comment_is_top":false,"comment_ctime":1656605686,"is_pvip":false,"replies":[{"id":"127399","content":"æ­£æ–‡é‡Œæ²¡æœ‰å†™ï¼Œå…¶å®è¿™ä¸ªä¹Ÿä¸æ˜¯éœ€è¦ç‰¹åˆ«äº†è§£çš„çŸ¥è¯†ç‚¹ï¼Œä¸å½±å“æˆ‘ä»¬çš„ä½¿ç”¨ã€‚","user_name":"ä½œè€…å›å¤","comment_id":350158,"uid":"1181974","ip_address":"","utype":1,"ctime":1656644641,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"5951572982","product_id":100114501,"comment_content":"æ²¡çœ‹åˆ°è¯´cowçš„æ–¹æ³•å‘€ï¼Œè¿™ä¸ªä»å“ªè¯´åˆ°äº†å‘¢<br>","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578295,"discussion_content":"æ­£æ–‡é‡Œæ²¡æœ‰å†™ï¼Œå…¶å®è¿™ä¸ªä¹Ÿä¸æ˜¯éœ€è¦ç‰¹åˆ«äº†è§£çš„çŸ¥è¯†ç‚¹ï¼Œä¸å½±å“æˆ‘ä»¬çš„ä½¿ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656644642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625530,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","nickname":"YueShi","note":"","ucode":"8F7AFAE4641A7D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581067,"discussion_content":"æ²¡è¯´åˆ°ï¼Œä½†æ˜¯é‚£ä¸ªå›¾å¯ä»¥çœ‹å‡ºæ¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658482608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350144,"user_name":"æœ±é›¯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1656597408,"is_pvip":true,"replies":[{"id":"127404","content":"å½“ç„¶äº†ï¼Œæ¯ä¸ªå±‚éƒ½ä¼šæœ‰ä¸€ç‚¹ç©ºé—´å ç”¨ï¼Œç§¯ç´¯å¤šäº†é•œåƒå°±ä¼šè¶Šæ¥è¶Šå¤§ã€‚","user_name":"ä½œè€…å›å¤","comment_id":350144,"uid":"1181974","ip_address":"","utype":1,"ctime":1656644867,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"5951564704","product_id":100114501,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜ å±‚æ•°å¤šå°‘ä¼šå½±å“é•œåƒæ€»å¤§å°å— è¿˜æ˜¯ä¸å½±å“ ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578303,"discussion_content":"å½“ç„¶äº†ï¼Œæ¯ä¸ªå±‚éƒ½ä¼šæœ‰ä¸€ç‚¹ç©ºé—´å ç”¨ï¼Œç§¯ç´¯å¤šäº†é•œåƒå°±ä¼šè¶Šæ¥è¶Šå¤§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656644867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1035744,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","nickname":"æœ±é›¯","note":"","ucode":"064C45FBF6B51F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":578526,"discussion_content":"è€å¸ˆæˆ‘çš„æ„æ€æ˜¯ åŒæ ·çš„å®‰è£…ï¼Œä½†ä½¿ç”¨ä¸åŒçš„å±‚æ•° å¥¹ä»¬çš„å¤§å°æœ‰åŒºåˆ«å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656856639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":578303,"ip_address":""},"score":578526,"extra":""}]}]},{"had_liked":false,"id":350021,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1656508406,"is_pvip":false,"replies":[{"id":"127377","content":"awesome","user_name":"ä½œè€…å›å¤","comment_id":350021,"uid":"1181974","ip_address":"","utype":1,"ctime":1656546080,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"5951475702","product_id":100114501,"comment_content":"1: dockeråœ¨æŒ‚è½½é•œåƒæ–‡ä»¶çš„æ—¶å€™é™¤äº†é•œåƒæ–‡ä»¶çš„åªè¯»å±‚ï¼Œè¿˜ä¼šæŒ‚è½½ä¸€ä¸ªâ€˜å¯è¯»å†™å±‚â€™ï¼Œåœ¨å®¹å™¨è¿è¡Œæ˜¯ï¼Œå®ƒä»¥copy-on-writeçš„æ–¹å¼ï¼Œè®°å½•å®¹å™¨ä¸­çš„â€œå†™â€æ“ä½œï¼›<br>2: a: é•œåƒåˆ†å±‚çš„å¥½å¤„åœ¨äºä»–å¯ä»¥å‡å°‘åˆ¶ä½œæˆæœ¬ï¼Œä»è€Œè¿…é€Ÿè¿­ä»£ï¼Œå®ƒä½¿å¾—æˆ‘ä»¬èƒ½ä»¥ä¸€ç§å¢é‡çš„æ–¹å¼å¯¹ç°æœ‰å·²ç»å­˜åœ¨çš„é•œåƒåšæ”¹é€ ï¼Œè€Œä¸æ˜¯æ¯ä¸€æ¬¡éƒ½ä»0å¼€å§‹é‡å¤åˆ¶ä½œï¼Œ<br>        é™ä½äº†æŠ€æœ¯äººå‘˜ä¹‹é—´çš„æ“ä½œæˆæœ¬ï¼›<br>    b: å ç”¨ç©ºé—´æ›´ä¸‹ï¼Œæ¯æ¬¡æ‹‰å–å’Œæ¨é€éƒ½åªæ“ä½œå¢é‡çš„éƒ¨åˆ†ï¼Œçœæ—¶çœåŠ›ï¼›","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578147,"discussion_content":"awesome","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656546080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578233,"discussion_content":"è¿™é‡Œçš„â€œcopy-on-writeâ€è¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1656596016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350010,"user_name":"æ˜Ÿå‚å¹³é‡é˜”","can_delete":false,"product_type":"c1","uid":3010581,"ip_address":"","ucode":"036EC20979D406","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/WrANpwBMr6DsGAE207QVs0YgfthMXy3MuEKJxR8icYibpGDCI1YX4DcpDq1EsTvlP8ffK1ibJDvmkX9LUU4yE8X0w/132","comment_is_top":false,"comment_ctime":1656503108,"is_pvip":true,"replies":[{"id":"127376","content":"å·®ä¸å¤šï¼Œå¯ä»¥å†å‚è€ƒå…¶ä»–åŒå­¦çš„å›ç­”ã€‚<br><br>å±‚æ•°å¤ªå¤šå°±ä¼šå¯¼è‡´é•œåƒåŠ è½½æ•ˆç‡ä½ï¼Œæ‰€ä»¥è¦ä¼˜åŒ–Dockerfileã€‚","user_name":"ä½œè€…å›å¤","comment_id":350010,"uid":"1181974","ip_address":"","utype":1,"ctime":1656546068,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5951470404","product_id":100114501,"comment_content":"ä½œä¸šï¼š<br>1.å†™çš„æ—¶å€™å¾€ä¸Šå åŠ ä¸€å±‚<br>2.é¿å…é‡å¤æ‰“åŒ…<br><br>è¯¾åæ€è€ƒï¼š<br>ä¸‡ä¸€æ‰“åŒ…å±‚æ•°è¿‡é«˜æ€ä¹ˆåŠï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578146,"discussion_content":"å·®ä¸å¤šï¼Œå¯ä»¥å†å‚è€ƒå…¶ä»–åŒå­¦çš„å›ç­”ã€‚\n\nå±‚æ•°å¤ªå¤šå°±ä¼šå¯¼è‡´é•œåƒåŠ è½½æ•ˆç‡ä½ï¼Œæ‰€ä»¥è¦ä¼˜åŒ–Dockerfileã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656546068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349947,"user_name":"èåœå¤´ç‹","can_delete":false,"product_type":"c1","uid":1008716,"ip_address":"","ucode":"A8DEB35A48E651","user_header":"https://static001.geekbang.org/account/avatar/00/0f/64/4c/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1656468269,"is_pvip":true,"replies":[{"id":"127361","content":"æ˜¯çš„ï¼ŒDockerfileçš„æ³¨é‡Šå¿…é¡»æ˜¯#å¼€å¤´ï¼Œåœ¨æ–‡æ¡£é‡Œåªæ˜¯ç¤ºæ„æ€§è´¨çš„è¯´æ˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":349947,"uid":"1181974","ip_address":"","utype":1,"ctime":1656472159,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5951435565","product_id":100114501,"comment_content":"æ–‡ç« ä¸­çš„dockerfileé‡Œé¢çš„æ³¨é‡Šä¿¡æ¯(ä»¥#å¼€å¤´çš„å†…å®¹)ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æ”¾åœ¨å•ç‹¬çš„ä¸€è¡Œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578018,"discussion_content":"æ˜¯çš„ï¼ŒDockerfileçš„æ³¨é‡Šå¿…é¡»æ˜¯#å¼€å¤´ï¼Œåœ¨æ–‡æ¡£é‡Œåªæ˜¯ç¤ºæ„æ€§è´¨çš„è¯´æ˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656472159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358586,"user_name":"Geek_666217","can_delete":false,"product_type":"c1","uid":2750205,"ip_address":"åŒ—äº¬","ucode":"46E70539D34E32","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL6RvdCzKZCGibZqanPxlib453uP5oXvMTjR6uJsjfMZsib5ShMicDdgBUr6yHSibSKSKgiazqR6tNibDibibQ/132","comment_is_top":false,"comment_ctime":1664444331,"is_pvip":true,"replies":[{"id":"130453","content":"æ˜¯çš„ï¼ŒDockerfileçš„æ³¨é‡Šæ¯”è¾ƒç‰¹æ®Šï¼Œå¿…é¡»çš„å•ç‹¬ä¸€è¡Œï¼Œä¸èƒ½åœ¨è¡Œå°¾ã€‚","user_name":"ä½œè€…å›å¤","comment_id":358586,"uid":"1181974","ip_address":"åŒ—äº¬","utype":1,"ctime":1664459606,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1664444331","product_id":100114501,"comment_content":"æ„å»ºåŒ…å¦‚æœå‡ºé”™äº†ï¼Œæ³¨æ„æ³¨é‡Šå’Œå†…å®¹ä¸è¦å†åŒä¸€è¡Œï¼Œä¼šå°†æ³¨é‡Šè§†ä¸ºå‚æ•°<br>","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589160,"discussion_content":"æ˜¯çš„ï¼ŒDockerfileçš„æ³¨é‡Šæ¯”è¾ƒç‰¹æ®Šï¼Œå¿…é¡»çš„å•ç‹¬ä¸€è¡Œï¼Œä¸èƒ½åœ¨è¡Œå°¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664459606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357588,"user_name":"Geek_f20da9","can_delete":false,"product_type":"c1","uid":3181095,"ip_address":"åŒ—äº¬","ucode":"8D8F0F0A3527BE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er3Ey0Uq2w4wLhVNGGReZKLd06PCDU4ZeefZWFMNvf3LibtibDqzBBpzkYW5n5AkYuJGPa4KEdQ5qgA/132","comment_is_top":false,"comment_ctime":1663427770,"is_pvip":false,"replies":[{"id":"130169","content":"å†™çš„å¾ˆå¥½ã€‚","user_name":"ä½œè€…å›å¤","comment_id":357588,"uid":"1181974","ip_address":"åŒ—äº¬","utype":1,"ctime":1663556908,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1663427770","product_id":100114501,"comment_content":"è€å¸ˆæœ‰æ—¶é—´å¸®å¿™çœ‹ä¸€ä¸‹ï¼Œä¸çŸ¥é“å†™çš„å¯¹ä¸å¯¹ã€‚<br><br>dockerfileå¸¸ç”¨å‚æ•°ï¼š<br>1.ARGï¼šé•œåƒå±‚çš„ç¯å¢ƒå˜é‡<br>2.FROMï¼šæ‹‰å–åŸºç¡€é•œåƒ<br>3.COPY:æ‹·è´æ–‡ä»¶<br>4.ADDï¼šæ‹·è´æ–‡ä»¶ã€URLã€å‹ç¼©æ–‡ä»¶ç­‰<br>5.EVNï¼šé•œåƒå±‚å’Œå®¹å™¨å±‚å‚æ•°<br>6.EXPOSE:æš´éœ²å®¹å™¨å†…éƒ¨ç«¯å£ç»™å¤–éƒ¨ä½¿ç”¨<br>7.RUNï¼šæ‰§è¡ŒshellæŒ‡ä»¤<br>8.CMDï¼šæ„å»ºå®Œæˆæ—¶æ‰§è¡Œçš„æŒ‡ä»¤<br><br>æ€è€ƒé¢˜ï¼š<br>1.dockeré‡‡ç”¨UNION FSæ–‡ä»¶ç³»ç»Ÿï¼Œå°†æ–‡ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸Šå±‚å’Œä¸‹å±‚ã€‚å³ä¸Šå±‚ä¸ºå®¹å™¨å±‚ï¼Œä¸‹å±‚ä¸ºé•œåƒå±‚ã€‚å¦‚æœä¸‹å±‚æœ‰ä¿®æ”¹ï¼Œè¿è¡Œå®¹å™¨æ—¶ï¼Œä¸Šå±‚ä¼šåŒæ­¥ä¿®æ”¹ã€‚å¦‚æœä¸Šå±‚æœ‰æ•°æ®ä¿®æ”¹ï¼ˆå³å®¹å™¨å±‚æ•°æ®ä¿®æ”¹ï¼‰ï¼Œä¸ä¼šå½±å“åˆ°ä¸‹å±‚ï¼ˆå³é•œåƒå±‚ï¼‰ã€‚<br>2.å¥½å¤„ï¼šå…±äº«å·²å­˜åœ¨çš„layerï¼Œå¦‚æœæœ‰æ–°çš„æ•°æ®åŠ å…¥ï¼Œåªä¼šå¢é‡åœ¨æœ€ä¸Šå±‚æ–°å¢layerå±‚ã€‚å‡å°‘äº†ç½‘ç»œä¼ è¾“ç­‰ä¸€äº›æˆæœ¬ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588103,"discussion_content":"å†™çš„å¾ˆå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663556909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357529,"user_name":"torchlight","can_delete":false,"product_type":"c1","uid":1586169,"ip_address":"åŒ—äº¬","ucode":"1E05FD0360BEF3","user_header":"https://static001.geekbang.org/account/avatar/00/18/33/f9/658f5bd2.jpg","comment_is_top":false,"comment_ctime":1663338831,"is_pvip":true,"replies":[{"id":"130146","content":"çœ‹æ ·å­copyæ˜¯æˆåŠŸäº†ï¼Œåœ¨runè¿™æ­¥å‡ºé”™ï¼Œå¥½åƒæ˜¯setup.shæœ‰é—®é¢˜ï¼Œå¯ä»¥ä¿®æ”¹runé‡Œçš„å‘½ä»¤ï¼Œé€ä¸ªè¯•éªŒï¼Œçœ‹å…·ä½“æ˜¯å“ªé‡Œæœ‰é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":357529,"uid":"1181974","ip_address":"åŒ—äº¬","utype":1,"ctime":1663396783,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"1663338831","product_id":100114501,"comment_content":"<br>COPY setup.sh  &#47;tmp&#47;                # æ‹·è´è„šæœ¬åˆ°&#47;tmpç›®å½•<br><br>RUN cd &#47;tmp &amp;&amp; chmod +x setup.sh \\  # æ·»åŠ æ‰§è¡Œæƒé™<br>    &amp;&amp; .&#47;setup.sh &amp;&amp; rm setup.sh    # è¿è¡Œè„šæœ¬ç„¶åå†åˆ é™¤<br>---------------------------------------------<br>è€å¸ˆï¼Œæƒ³é—®ä¸‹ç”¨docker buildæ‰§è¡ŒDockerfileåï¼Œæ˜¾ç¤ºâ€œdocker build -f Dockerfile .<br>Sending build context to Docker daemon  4.096kB<br>Step 1&#47;3 : FROM ubuntu:latest<br> ---&gt; 2dc39ba059dc<br>Step 2&#47;3 : COPY setup.sh  &#47;tmp&#47;<br> ---&gt; Using cache<br> ---&gt; 6c98412815b0<br>Step 3&#47;3 : RUN cd &#47;tmp &amp;&amp; chmod +x setup.sh &amp;&amp; .&#47;setup.sh &amp;&amp; rm setup.sh<br> ---&gt; Running in f854d51dc422<br>.&#47;setup.sh: 2: RUN: not found<br>The command &#39;&#47;bin&#47;sh -c cd &#47;tmp &amp;&amp; chmod +x setup.sh &amp;&amp; .&#47;setup.sh &amp;&amp; rm setup.sh&#39; returned a non-zero code: 127â€ï¼Œèƒ½å¦æŒ‡ç‚¹ä¸‹è¿·æ´¥ï¼Œè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587946,"discussion_content":"çœ‹æ ·å­copyæ˜¯æˆåŠŸäº†ï¼Œåœ¨runè¿™æ­¥å‡ºé”™ï¼Œå¥½åƒæ˜¯setup.shæœ‰é—®é¢˜ï¼Œå¯ä»¥ä¿®æ”¹runé‡Œçš„å‘½ä»¤ï¼Œé€ä¸ªè¯•éªŒï¼Œçœ‹å…·ä½“æ˜¯å“ªé‡Œæœ‰é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663396783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1586169,"avatar":"https://static001.geekbang.org/account/avatar/00/18/33/f9/658f5bd2.jpg","nickname":"torchlight","note":"","ucode":"1E05FD0360BEF3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588113,"discussion_content":"æœ€åè¯•äº†æŠŠ./setup.shè¿™ä¸ªæŒ‡ä»¤æ”¹æˆ sh setup.shå°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663557930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355270,"user_name":"Panda.","can_delete":false,"product_type":"c1","uid":2919755,"ip_address":"åŒ—äº¬","ucode":"FFD5930D0D4CC5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/G0U7VYeOiaeBoqcibZ5fzYxgmBIEGAjl7ibg9sib91s1U7Bxib3qI4qywpTNpEzEOiabnic5x5BicibdrhrSJt3ssgEm28Q/132","comment_is_top":false,"comment_ctime":1661241774,"is_pvip":false,"replies":[{"id":"129276","content":"åº”è¯¥æ˜¯æ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶Dockerfile.busyboxå§ï¼Œçœ‹çœ‹è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚","user_name":"ä½œè€…å›å¤","comment_id":355270,"uid":"1181974","ip_address":"åŒ—äº¬","utype":1,"ctime":1661300103,"user_name_real":"ç¼–è¾‘"}],"discussion_count":3,"race_medal":0,"score":"1661241774","product_id":100114501,"comment_content":"è¾“å…¥â€œdocker build -f Dockerfile.busybox .â€ä¹‹åæ˜¾ç¤ºâ€œunable to prepare the content ..... no such file or directoryâ€è¯¥æ€ä¹ˆåŠï¼Œåœ¨CSDNé‡Œé¢æ‰¾ä¸åˆ°å¥½çš„è§£å†³æ–¹æ³•","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585026,"discussion_content":"åº”è¯¥æ˜¯æ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶Dockerfile.busyboxå§ï¼Œçœ‹çœ‹è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661300103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2919755,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/G0U7VYeOiaeBoqcibZ5fzYxgmBIEGAjl7ibg9sib91s1U7Bxib3qI4qywpTNpEzEOiabnic5x5BicibdrhrSJt3ssgEm28Q/132","nickname":"Panda.","note":"","ucode":"FFD5930D0D4CC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":585366,"discussion_content":"è€å¸ˆï¼Œè·¯å¾„ä¸æ˜¯åªæœ‰ä¸€ä¸ªç‚¹å—ï¼Œè¡¨ç¤ºå½“å‰è·¯å¾„ï¼Œè¿™æ€ä¹ˆå‡ºé”™çš„å•Šã€‚è€Œä¸”æˆ‘çš„ç†è§£æ˜¯åœ¨å½“å‰è·¯å¾„buildä¸€ä¸ªæ–°çš„fileï¼Œä¸ºä»€ä¹ˆæŠ¥é”™æ˜¯è¯´æ‰¾ä¸åˆ°å‘¢ã€‚è€å¸ˆæœ‰ç©ºçš„è¯å¯ä»¥å›å¤å†è¯¦ç»†ä¸€ç‚¹å—ï¼Œè°¢è°¢æ‚¨ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661500782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585026,"ip_address":"å¹¿ä¸œ"},"score":585366,"extra":""}]},{"author":{"id":2863851,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/b2/eb/0e63a8db.jpg","nickname":"çœ¸","note":"","ucode":"4181EBB38E57B7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587588,"discussion_content":"ä½ è¦å…ˆåˆ›å»ºè¿™ä¸ªDockerfile.busyboxæ–‡ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663158309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353369,"user_name":"rongyefeng","can_delete":false,"product_type":"c1","uid":1959482,"ip_address":"åŒ—äº¬","ucode":"9A15D947E9D645","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","comment_is_top":false,"comment_ctime":1659406904,"is_pvip":false,"replies":[{"id":"128479","content":"å…¶å®ä¸éœ€è¦å¤ªæ˜ç™½ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç›®çš„æ˜¯å­¦ä¹ Kubernetesï¼Œå®¹å™¨åªè¦çŸ¥é“ä¸ªå¤§æ¦‚å°±è¡Œï¼Œç­‰ç†Ÿæ‚‰äº†Kuberneteså†å›å¤´çœ‹å®¹å™¨å¯èƒ½ä¼šæ›´å®¹æ˜“ç†è§£ã€‚","user_name":"ä½œè€…å›å¤","comment_id":353369,"uid":"1181974","ip_address":"åŒ—äº¬","utype":1,"ctime":1659425809,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1659406904","product_id":100114501,"comment_content":"è¯´å®è¯ï¼Œå®¹å™¨çš„å†…éƒ¨ç»“æ„è®²è§£è¿˜æ˜¯æ²¡çœ‹å¤ªæ˜ç™½","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582409,"discussion_content":"å…¶å®ä¸éœ€è¦å¤ªæ˜ç™½ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç›®çš„æ˜¯å­¦ä¹ Kubernetesï¼Œå®¹å™¨åªè¦çŸ¥é“ä¸ªå¤§æ¦‚å°±è¡Œï¼Œç­‰ç†Ÿæ‚‰äº†Kuberneteså†å›å¤´çœ‹å®¹å™¨å¯èƒ½ä¼šæ›´å®¹æ˜“ç†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659425809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351201,"user_name":"æ˜ŸæœŸä¸€çš„åŒ…å­","can_delete":false,"product_type":"c1","uid":2914948,"ip_address":"","ucode":"A37C5310C0EB64","user_header":"https://static001.geekbang.org/account/avatar/00/2c/7a/84/07b4c263.jpg","comment_is_top":false,"comment_ctime":1657606750,"is_pvip":true,"replies":[{"id":"127749","content":"è¿™ä¸ªä¸å¤ªäº†è§£äº†ï¼Œsorryã€‚","user_name":"ä½œè€…å›å¤","comment_id":351201,"uid":"1181974","ip_address":"","utype":1,"ctime":1657610938,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1657606750","product_id":100114501,"comment_content":"è€å¸ˆæåˆ°Union FS è”åˆæ–‡ä»¶ç³»ç»Ÿæ˜¯å¦å’Œäº‘ç›˜çš„åŸç†ç›¸ä¼¼å•Š","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579672,"discussion_content":"è¿™ä¸ªä¸å¤ªäº†è§£äº†ï¼Œsorryã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657610938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351107,"user_name":"é‚®å·®","can_delete":false,"product_type":"c1","uid":2939706,"ip_address":"","ucode":"65ED22E1ABCF5D","user_header":"https://static001.geekbang.org/account/avatar/00/2c/db/3a/e470d9fd.jpg","comment_is_top":false,"comment_ctime":1657529270,"is_pvip":true,"replies":[{"id":"127728","content":"<br>1.è¿™ä¸ªè¦çœ‹è¿™ä¸ªé•œåƒçš„ç›¸å…³æ–‡æ¡£å¥½Dockerfileï¼Œhistoryå¯èƒ½ä¸ä¼šé‚£ä¹ˆè¯¦ç»†ã€‚<br><br>2.inspectåº”è¯¥å°±å·®ä¸å¤šäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1657534362,"ip_address":"","comment_id":351107,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1657529270","product_id":100114501,"comment_content":"ç½—è€å¸ˆï¼Œæˆ‘æœ‰ä¸¤ä¸ªç†è§£æ‚¨çœ‹å¯¹ä¸å¯¹ã€‚1ï¼Œæˆ‘pullä¸€é•œåƒä¸‹æ¥åï¼Œæƒ³çŸ¥é“è¯¥é•œåƒçš„ç¨‹åºå®‰è£…ç›®å½•ã€é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ã€ç«¯å£ç­‰ æ˜¯ä¸æ˜¯ç”¨docker historyï¼ˆå› ä¸ºæ¯”å¦‚æˆ‘è¦æ˜ å°„é…ç½®æ–‡ä»¶æˆ‘å¾—çŸ¥é“è¿™ä¸ªé•œåƒæ„å»ºå¾—æ—¶å€™æ”¾åœ¨å“ªé‡Œï¼‰ï¼›2ï¼Œæˆ‘ä½¿ç”¨docker run è¿è¡Œä¸€ä¸ªå®¹å™¨åï¼Œæˆ‘æƒ³çŸ¥é“è¿™ä¸ªå®¹å™¨å¾—åŸºæœ¬ä¿¡æ¯ï¼ˆdocker run åé¢å¾—ç›¸å…³å‚æ•°ï¼Œæ¯”å¦‚ç«¯å£ã€ç›®å½•æ˜ å°„ç­‰ï¼‰æ˜¯ä¸æ˜¯é€šè¿‡docker inspect å®¹å™¨åã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579578,"discussion_content":"\n1.è¿™ä¸ªè¦çœ‹è¿™ä¸ªé•œåƒçš„ç›¸å…³æ–‡æ¡£å¥½Dockerfileï¼Œhistoryå¯èƒ½ä¸ä¼šé‚£ä¹ˆè¯¦ç»†ã€‚\n\n2.inspectåº”è¯¥å°±å·®ä¸å¤šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657534362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350786,"user_name":"è‡ªç”±","can_delete":false,"product_type":"c1","uid":2576960,"ip_address":"","ucode":"4E3B53D29D86CA","user_header":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","comment_is_top":false,"comment_ctime":1657192445,"is_pvip":false,"replies":[{"id":"127636","content":"<br>1.é•œåƒä¼šåŒ…å«åŸºç¡€é•œåƒé‡Œçš„å±‚ã€‚<br><br>2.å…·ä½“å±‚æ•°æ˜¯å¦‚ä½•è®¡ç®—çš„å¯èƒ½å¾—æ·±å…¥å»çœ‹dockerçš„å†…éƒ¨äº†ï¼Œæˆ‘è§‰å¾—æš‚æ—¶å¯ä»¥ä¸å…³å¿ƒï¼ŒæŠŠdockerã€Kuberneteséƒ½å­¦å®Œäº†ï¼Œæœ‰å¿…è¦å†æ·±ç©¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1657250322,"ip_address":"","comment_id":350786,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1657192445","product_id":100114501,"comment_content":"ç½—è€å¸ˆï¼Œæˆ‘ç»ƒä¹ äº†ç»“å°¾çš„ä½œä¸šï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ã€‚ä¸ºä»€ä¹ˆæ„å»ºå‡ºæ¥çš„ ngx-app ï¼Œé€šè¿‡ docker inspect xxx æŸ¥çœ‹ï¼Œå®ƒçš„ Layers æœ‰ 8 å±‚å‘¢ï¼Ÿåœ¨æˆ‘çœ‹æ¥ Dockerfile åªæœ‰ 7 ä¸ªå‘½ä»¤ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒFROM æ˜¯å¦ä¼šæ„å»ºä¸€ä¸ªå±‚ï¼Ÿå¦‚æœä¼šï¼Œä¸ºä»€ä¹ˆä¹‹å‰çš„ docker build -f Dockerfile.busybox . çš„ image äº§ç‰©é€šè¿‡ docker inspect æŸ¥çœ‹åªæœ‰ä¸€å±‚ Layer å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579211,"discussion_content":"\n1.é•œåƒä¼šåŒ…å«åŸºç¡€é•œåƒé‡Œçš„å±‚ã€‚\n\n2.å…·ä½“å±‚æ•°æ˜¯å¦‚ä½•è®¡ç®—çš„å¯èƒ½å¾—æ·±å…¥å»çœ‹dockerçš„å†…éƒ¨äº†ï¼Œæˆ‘è§‰å¾—æš‚æ—¶å¯ä»¥ä¸å…³å¿ƒï¼ŒæŠŠdockerã€Kuberneteséƒ½å­¦å®Œäº†ï¼Œæœ‰å¿…è¦å†æ·±ç©¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657250322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2576960,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","nickname":"è‡ªç”±","note":"","ucode":"4E3B53D29D86CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":579660,"discussion_content":"è°¢è°¢ç½—è€å¸ˆå›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657602268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":579211,"ip_address":""},"score":579660,"extra":""}]}]},{"had_liked":false,"id":350743,"user_name":"pythonbug","can_delete":false,"product_type":"c1","uid":1487274,"ip_address":"","ucode":"1A70CA92FFF8EB","user_header":"https://wx.qlogo.cn/mmopen/vi_32/wgMMrp1hvSB3E30KqZvMsj3KQdAI3T1uQM77LT7hZ65nVSjPGRg3AbUOyiahnssA6AIT5PAkyHFmlTBzUH9gdyQ/132","comment_is_top":false,"comment_ctime":1657155847,"is_pvip":true,"replies":[{"id":"127606","content":"æ˜¯çš„ï¼Œçœ‹ä¸€ä¸‹é‚£å¼ å›¾ç‰‡ï¼Œåœ¨é•œåƒçš„æœ€ä¸Šé¢ï¼Œæœ‰ä¸€ä¸ªå¯å†™å±‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1657159741,"ip_address":"","comment_id":350743,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1657155847","product_id":100114501,"comment_content":"1ã€åˆå›å»ç¿»äº†ç¿»ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯é‚£ä¸ªåƒå±‚ç³•çš„ä¾‹å­ï¼Œç”Ÿæˆä¸€ä¸ªå¯å†™çš„åŒåå±‚ï¼Œè¿™æ ·ä¸‹å±‚ä¸å¯å†™çš„é•œåƒå°±è¢«å±è”½äº†ã€‚<br>2ã€è¿˜çœŸæ²¡æƒ³å‡ºæ¥ï¼Œçœ‹äº†å…¶ä»–åŒå­¦çš„è¯„è®ºï¼Œæ„Ÿè§‰è¯´çš„å¾ˆå¥½","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579058,"discussion_content":"æ˜¯çš„ï¼Œçœ‹ä¸€ä¸‹é‚£å¼ å›¾ç‰‡ï¼Œåœ¨é•œåƒçš„æœ€ä¸Šé¢ï¼Œæœ‰ä¸€ä¸ªå¯å†™å±‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657159741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350315,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1656784254,"is_pvip":false,"replies":[{"id":"127432","content":"ç¬¬ä¸€ä¸ªè·¯å¾„æ˜¯contextç›®å½•ï¼Œä¸æ˜¯å½“å‰ç›®å½•ï¼Œä¸€å®šè¦å¼„æ¸…æ¥šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1656842384,"ip_address":"","comment_id":350315,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1656784254","product_id":100114501,"comment_content":"å°è¯•äº†å‡ æ¬¡ï¼Œå…³äº `COPY .&#47;default.conf &#47;etc&#47;nginx&#47;conf.d&#47;` è¿™ä¸ªæŒ‡ä»¤ï¼Œå‰é¢çš„ä¸€ä¸ªè·¯å¾„è¡¨ç¤ºçš„å½“å‰ç¯å¢ƒï¼Œè¿™é‡ŒæŒ‡å®šçš„ filepath å¿…é¡»åœ¨æ„å»ºç›®å½•ä¸‹ä¸”çœŸå®å­˜åœ¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚åé¢çš„è·¯å¾„è¡¨ç¤ºçš„æ˜¯é•œåƒä¸­çš„è·¯å¾„ï¼Œè¿™ä¸ª path ä¸éœ€è¦åœ¨åŸå§‹é•œåƒï¼ˆFROM ...ï¼‰ä¸­çœŸå®å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ„å»ºè¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨åˆ›å»ºï¼ˆåŒºåˆ«äº Linux ä¸­çš„ cpï¼‰ã€‚ä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸å¯¹ï¼Œæœ›è€å¸ˆæŒ‡æ•™","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578509,"discussion_content":"ç¬¬ä¸€ä¸ªè·¯å¾„æ˜¯contextç›®å½•ï¼Œä¸æ˜¯å½“å‰ç›®å½•ï¼Œä¸€å®šè¦å¼„æ¸…æ¥šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656842384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578589,"discussion_content":"äº†è§£äº†ï¼Œcontext ç›®å½•æ˜¯æˆ‘ä»¬åœ¨ docker build æ—¶æŒ‡å®šçš„å§ï¼Œæ¯”å¦‚ docker build -f Dockerfile . å°±æŒ‡å®šäº†å½“å‰ç›®å½•ä¸º context ç›®å½•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656911511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350141,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1656596356,"is_pvip":false,"replies":[{"id":"127398","content":"æ€è€ƒé¢˜ï¼Œæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œå°±æ˜¯è¦è‡ªå·±æ€è€ƒå¾—å‡ºç»“è®ºï¼Œé‡è¦çš„æ˜¯è¿‡ç¨‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1656644592,"ip_address":"","comment_id":350141,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1656596356","product_id":100114501,"comment_content":"è¯¾åçš„é—®é¢˜ï¼Œå¦‚æœè®©è€å¸ˆæ¥å›ç­”ï¼Œè€å¸ˆä¼šæ€ä¹ˆå›å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578294,"discussion_content":"æ€è€ƒé¢˜ï¼Œæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œå°±æ˜¯è¦è‡ªå·±æ€è€ƒå¾—å‡ºç»“è®ºï¼Œé‡è¦çš„æ˜¯è¿‡ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656644593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350043,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1656515995,"is_pvip":false,"replies":[{"id":"127372","content":"<br>1.ä¸€èˆ¬ç¿»è¯‘æˆæ¸…å•ã€‚ä¸è¿‡æˆ‘è®¤ä¸ºè¿™ç§è‹±æ–‡æœ¯è¯­è¿˜æ˜¯ä¸è¦å¼ºæ±‚ä¸­æ–‡ç¿»è¯‘ï¼Œjust feel itã€‚<br><br>2.ä¼šä»¥åŠ é¤çš„å½¢å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1656545962,"ip_address":"","comment_id":350043,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1656515995","product_id":100114501,"comment_content":"è¯·é—®è€å¸ˆï¼š<br><br>1. manifest è¿™ä¸ªå•è¯æ­£ç¡®çš„ä¸­æ–‡ç¿»è¯‘åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆç†è§£è¿™ä¸ªæœ¯è¯­çš„å«ä¹‰æ¯”è¾ƒå‡†ç¡®å‘¢ï¼Ÿ<br><br>2. docker-compose åé¢ä¼šè®²è§£åˆ°ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578141,"discussion_content":"\n1.ä¸€èˆ¬ç¿»è¯‘æˆæ¸…å•ã€‚ä¸è¿‡æˆ‘è®¤ä¸ºè¿™ç§è‹±æ–‡æœ¯è¯­è¿˜æ˜¯ä¸è¦å¼ºæ±‚ä¸­æ–‡ç¿»è¯‘ï¼Œjust feel itã€‚\n\n2.ä¼šä»¥åŠ é¤çš„å½¢å¼ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1656545962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":578144,"discussion_content":"è°¢è°¢è€å¸ˆå›ç­”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656546004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":578141,"ip_address":""},"score":578144,"extra":""}]}]},{"had_liked":false,"id":349949,"user_name":"xmr","can_delete":false,"product_type":"c1","uid":1009622,"ip_address":"","ucode":"1BBF165F91F10B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/d6/2f5cb85c.jpg","comment_is_top":false,"comment_ctime":1656469199,"is_pvip":true,"replies":[{"id":"127358","content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1656471801,"ip_address":"","comment_id":349949,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1656469199","product_id":100114501,"comment_content":"1.cow: å†™æ—¶å¤åˆ¶<br>2.å‡å°‘å‚¨å­˜ç©ºé—´ï¼Œå‡å°‘ä¸Šä¼ å’Œä¸‹è½½çš„æ—¶é—´","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578014,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656471802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}