{"id":97866,"title":"15 | 浮点数和定点数（上）：怎么用有限的Bit表示尽可能多的信息？","content":"<p>在我们日常的程序开发中，不只会用到整数。更多情况下，我们用到的都是实数。比如，我们开发一个电商App，商品的价格常常会是9块9；再比如，现在流行的深度学习算法，对应的机器学习里的模型里的各个权重也都是1.23这样的数。可以说，在实际的应用过程中，这些有零有整的实数，是和整数同样常用的数据类型，我们也需要考虑到。</p><h2>浮点数的不精确性</h2><p>那么，我们能不能用二进制表示所有的实数，然后在二进制下计算它的加减乘除呢？先不着急，我们从一个有意思的小案例来看。</p><p>你可以在Linux下打开Python的命令行Console，也可以在Chrome浏览器里面通过开发者工具，打开浏览器里的Console，在里面输入“0.3 + 0.6”，然后看看你会得到一个什么样的结果。</p><pre><code>&gt;&gt;&gt; 0.3 + 0.6\n0.8999999999999999\n</code></pre><p>不知道你有没有大吃一惊，这么简单的一个加法，无论是在Python还是在JavaScript里面，算出来的结果居然不是准确的0.9，而是0.8999999999999999这么个结果。这是为什么呢？</p><p>在回答为什么之前，我们先来想一个更抽象的问题。通过前面的这么多讲，你应该知道我们现在用的计算机通常用16/32个比特（bit）来表示一个数。那我问你，我们用32个比特，能够表示所有实数吗？</p><!-- [[[read_end]]] --><p>答案很显然是不能。32个比特，只能表示2的32次方个不同的数，差不多是40亿个。如果表示的数要超过这个数，就会有两个不同的数的二进制表示是一样的。那计算机可就会一筹莫展，不知道这个数到底是多少。</p><p>40亿个数看似已经很多了，但是比起无限多的实数集合却只是沧海一粟。所以，这个时候，计算机的设计者们，就要面临一个问题了：我到底应该让这40亿个数映射到实数集合上的哪些数，在实际应用中才能最划得来呢？</p><h2>定点数的表示</h2><p>有一个很直观的想法，就是我们用4个比特来表示0～9的整数，那么32个比特就可以表示8个这样的整数。然后我们把最右边的2个0～9的整数，当成小数部分；把左边6个0～9的整数，当成整数部分。这样，我们就可以用32个比特，来表示从0到999999.99这样1亿个实数了。</p><p><img src=\"https://static001.geekbang.org/resource/image/f5/b3/f5a0b0f2188ebe0d18f4424578a588b3.jpg?wh=1723*1322\" alt=\"\"></p><p>这种用二进制来表示十进制的编码方式，叫作<a href=\"https://zh.wikipedia.org/wiki/%E4%BA%8C%E9%80%B2%E7%A2%BC%E5%8D%81%E9%80%B2%E6%95%B8\"><strong>BCD编码</strong></a>（Binary-Coded Decimal）。其实它的运用非常广泛，最常用的是在超市、银行这样需要用小数记录金额的情况里。在超市里面，我们的小数最多也就到分。这样的表示方式，比较直观清楚，也满足了小数部分的计算。</p><p>不过，这样的表示方式也有几个缺点。</p><p><strong>第一，这样的表示方式有点“浪费”。</strong>本来32个比特我们可以表示40亿个不同的数，但是在BCD编码下，只能表示1亿个数，如果我们要精确到分的话，那么能够表示的最大金额也就是到100万。如果我们的货币单位是人民币或者美元还好，如果我们的货币单位变成了津巴布韦币，这个数量就不太够用了。</p><p><strong>第二，这样的表示方式没办法同时表示很大的数字和很小的数字。</strong>我们在写程序的时候，实数的用途可能是多种多样的。有时候我们想要表示商品的金额，关心的是9.99这样小的数字；有时候，我们又要进行物理学的运算，需要表示光速，也就是$3×10^8$这样很大的数字。那么，我们有没有一个办法，既能够表示很小的数，又能表示很大的数呢？</p><h2>浮点数的表示</h2><p>答案当然是有的，就是你可能经常听说过的<strong>浮点数</strong>（Floating Point），也就是<strong>float类型</strong>。</p><p>我们先来想一想。如果我们想在一张便签纸上，用一行来写一个十进制数，能够写下多大范围的数？因为我们要让人能够看清楚，所以字最小也有一个限制。你会发现一个和上面我们用BCD编码表示数一样的问题，就是纸张的宽度限制了我们能够表示的数的大小。如果宽度只放得下8个数字，那么我们还是只能写下最大到99999999这样的数字。</p><p><img src=\"https://static001.geekbang.org/resource/image/c3/56/c321a0b9d95ba475439f9fbdff07bf56.png?wh=811*533\" alt=\"\"></p><center><span class=\"reference\">有限宽度的便签，只能写下有限大小的数字</span></center><p>其实，这里的纸张宽度，就和我们32个比特一样，是在空间层面的限制。那么，在现实生活中，我们是怎么表示一个很大的数的呢？比如说，我们想要在一本科普书里，写一下宇宙内原子的数量，莫非是用一页纸，用好多行写下很多个0么？</p><p>当然不是了，我们会用科学计数法来表示这个数字。宇宙内的原子的数量，大概在 10的82次方左右，我们就用$1.0×10^82$这样的形式来表示这个数值，不需要写下82个0。</p><p>在计算机里，我们也可以用一样的办法，用科学计数法来表示实数。浮点数的科学计数法的表示，有一个<strong>IEEE</strong>的标准，它定义了两个基本的格式。一个是用32比特表示单精度的浮点数，也就是我们常常说的float或者float32类型。另外一个是用64比特表示双精度的浮点数，也就是我们平时说的double或者float64类型。</p><p>双精度类型和单精度类型差不多，这里，我们来看单精度类型，双精度你自然也就明白了。</p><p><img src=\"https://static001.geekbang.org/resource/image/91/41/914b71bf1d85fb6ed76e1135f39b6941.jpg?wh=2243*342\" alt=\"\"></p><p>单精度的32个比特可以分成三部分。</p><p>第一部分是一个<strong>符号位</strong>，用来表示是正数还是负数。我们一般用<strong>s</strong>来表示。在浮点数里，我们不像正数分符号数还是无符号数，所有的浮点数都是有符号的。</p><p>接下来是一个8个比特组成的<strong>指数位</strong>。我们一般用<strong>e</strong>来表示。8个比特能够表示的整数空间，就是0～255。我们在这里用1～254映射到-126～127这254个有正有负的数上。因为我们的浮点数，不仅仅想要表示很大的数，还希望能够表示很小的数，所以指数位也会有负数。</p><p>你发现没，我们没有用到0和255。没错，这里的 0（也就是8个比特全部为0） 和 255 （也就是8个比特全部为1）另有它用，我们等一下再讲。</p><p>最后，是一个23个比特组成的<strong>有效数位</strong>。我们用<strong>f</strong>来表示。综合科学计数法，我们的浮点数就可以表示成下面这样：</p><p>$(-1)^s×1.f×2^e$</p><p>你会发现，这里的浮点数，没有办法表示0。的确，要表示0和一些特殊的数，我们就要用上在e里面留下的0和255这两个表示，这两个表示其实是两个标记位。在e为0且f为0的时候，我们就把这个浮点数认为是0。至于其它的e是0或者255的特殊情况，你可以看下面这个表格，分别可以表示出无穷大、无穷小、NAN以及一个特殊的不规范数。</p><p><img src=\"https://static001.geekbang.org/resource/image/f9/4c/f922249a89667c4d10239eb8840dc94c.jpg?wh=2043*807\" alt=\"\"></p><p>我们可以以0.5为例子。0.5的符号为s应该是0，f应该是0，而e应该是-1，也就是</p><p>$0.5= (-1)^0×1.0×2^{-1}=0.5$，对应的浮点数表示，就是32个比特。</p><p><img src=\"https://static001.geekbang.org/resource/image/51/50/5168fce3f313f4fc0b600ce5d1805c50.jpeg?wh=2743*463\" alt=\"\"></p><p>$s=0，e = 2^{-1}$，需要注意，e表示从-126到127个，-1是其中的第126个数，这里的e如果用整数表示，就是$2^6+2^5+2^4+2^3+2^2+2^1=126$，$1.f=1.0$。</p><p>在这样的浮点数表示下，不考虑符号的话，浮点数能够表示的最小的数和最大的数，差不多是$1.17×10^{-38}$和$3.40×10^{38}$。比前面的BCD编码能够表示的范围大多了。</p><h2>总结延伸</h2><p>你会看到，在这样的表示方式下，浮点数能够表示的数据范围一下子大了很多。正是因为这个数对应的小数点的位置是“浮动”的，它才被称为浮点数。随着指数位e的值的不同，小数点的位置也在变动。对应的，前面的BCD编码的实数，就是小数点固定在某一位的方式，我们也就把它称为<strong>定点数</strong>。</p><p>回到我们最开头，为什么我们用0.3 + 0.6不能得到0.9呢？这是因为，浮点数没有办法精确表示0.3、0.6和0.9。事实上，我们拿出0.1～0.9这9个数，其中只有0.5能够被精确地表示成二进制的浮点数，也就是s = 0、e = -1、f = 0这样的情况。</p><p>而0.3、0.6乃至我们希望的0.9，都只是一个近似的表达。这个也为我们带来了一个挑战，就是浮点数无论是表示还是计算其实都是近似计算。那么，在使用过程中，我们该怎么来使用浮点数，以及使用浮点数会遇到些什么问题呢？下一讲，我会用更多的实际代码案例，来带你看看浮点数计算中的各种“坑”。</p><h2>推荐阅读</h2><p>如果对浮点数的表示还不是很清楚，你可以仔细阅读一下《计算机组成与设计：硬件/软件接口》的3.5.1节。</p><h2>课后思考</h2><p>对于BCD编码的定点数，如果我们用7个比特来表示连续两位十进制数，也就是00～99，是不是可以让32比特表示更大一点的数据范围？如果我们还需要表示负数，那么一个32比特的BCD编码，可以表示的数据范围是多大？</p><p>欢迎你在留言区写下你的思考和疑问，和大家一起探讨。你也可以把今天的文章分享给你朋友，和他一起学习和进步。</p><p></p>","neighbors":{"left":{"article_title":"14 | 乘法器：如何像搭乐高一样搭电路（下）？","id":97477},"right":{"article_title":"16 | 浮点数和定点数（下）：深入理解浮点数到底有什么用？","id":98312}},"comments":[{"had_liked":false,"id":98755,"user_name":"lzhao","can_delete":false,"product_type":"c1","uid":1509217,"ip_address":"","ucode":"9E71888215D3E1","user_header":"","comment_is_top":false,"comment_ctime":1559090972,"is_pvip":false,"replies":[{"id":"35449","content":"最大的数，会是小数位全部为1，指数位二进制表示成127<br><br>表示成二进制就是 1.11111... ^(2^127)<br>差不多就是1.9999999 ^(2^127)<br>差不多正好是 3.4028235 x (10 ^ 38)<br><br>最小的数就是 1.000..... ^ (2^-126)<br>差不多就是 1.0000 ^ (2^-126)<br>差不多正好就是 1.17549435 x (10^-38)","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1559120484,"ip_address":"","comment_id":98755,"utype":1}],"discussion_count":7,"race_medal":0,"score":"237782292252","product_id":100026001,"comment_content":"在这样的浮点数表示下，不考虑符号的话，浮点数能够表示的最小的数和最大的数，差不多是 1.17×10−381.17×10−38 和 3.40×10383.40×1038。比前面的 BCD 编码能够表示的范围大多了<br><br><br>这个范围怎么得来的","like_count":56,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451823,"discussion_content":"最大的数，会是小数位全部为1，指数位二进制表示成127\n\n表示成二进制就是 1.11111... ^(2^127)\n差不多就是1.9999999 ^(2^127)\n差不多正好是 3.4028235 x (10 ^ 38)\n\n最小的数就是 1.000..... ^ (2^-126)\n差不多就是 1.0000 ^ (2^-126)\n差不多正好就是 1.17549435 x (10^-38)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559120484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"完美坚持","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379185,"discussion_content":"查了下老师的写法有问题，具体讲，老师写的是 \n1.11111... ^(2^127) \n这是不对的（中间的符号错了）\n应该是1.11111... * (2^127)\n其中 1.11111…… 小数点后23个1，是*二进制表示*，它等于\n1.11111…… （二进制表示） = 2(十进制) - 0.0……01(二进制，小数点后22个0和1个1) = 2(十进制) - 2^(-23)  (十进制) 约等于 1.9999998807907104\n（二进制逢二进一，可以用在线转换器https://lostphp.com/hexconvert/ 自己尝试转换一下看对不对）\n因此 浮点数的最大绝对值 为 \n[2 - 2^(-23)] * (2^127) 约等于  1.17549435 x (10^-38)\n或者说浮点数的最大绝对值约等于\n1.9999998807907104 * (2^127) 约等于  1.17549435 x (10^-38)\n\n最小的比较好理解就不具体展开了。\n\n我是参考 https://blog.csdn.net/qq_20185737/article/details/114895220 的\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623745037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"完美坚持","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379184,"discussion_content":"1.1111111 x 2^(127) 吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623744040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625628,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLjiaBdicic93IOs2GlnT54iarib6qHZga5x58yyseVMUoQY2VBIHfq6ea3I510qQ3813bFFwmG5oTDGiaQ/132","nickname":"Geek_c5ffc5","note":"","ucode":"282EBC6E355D50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374216,"discussion_content":"fmax=8388607  fmin=0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621066226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625628,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLjiaBdicic93IOs2GlnT54iarib6qHZga5x58yyseVMUoQY2VBIHfq6ea3I510qQ3813bFFwmG5oTDGiaQ/132","nickname":"Geek_c5ffc5","note":"","ucode":"282EBC6E355D50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374215,"discussion_content":"到不了1.9999999999 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621066114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330999,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/KhQRc8hIxHHyPV3Og2Fc5l8w2y7ibGwGn6odmzl3wTt6fPrNv589uHmia1rgiaZhRiaLVHv9ibhzkxFx1zo42uNIS9A/132","nickname":"道长","note":"","ucode":"15B2E9CEF84634","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363885,"discussion_content":"还是没看到咋换算到10^38的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617319256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1559182,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ca/8e/4b1d7063.jpg","nickname":"Mr.Chen","note":"","ucode":"2AF23AAF147037","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2330999,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/KhQRc8hIxHHyPV3Og2Fc5l8w2y7ibGwGn6odmzl3wTt6fPrNv589uHmia1rgiaZhRiaLVHv9ibhzkxFx1zo42uNIS9A/132","nickname":"道长","note":"","ucode":"15B2E9CEF84634","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364822,"discussion_content":"觉得还是借助计算器算一下子吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617617643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":363885,"ip_address":""},"score":364822,"extra":""}]}]},{"had_liked":false,"id":98742,"user_name":"小崔","can_delete":false,"product_type":"c1","uid":1104958,"ip_address":"","ucode":"4E537416787752","user_header":"https://static001.geekbang.org/account/avatar/00/10/dc/3e/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1559089414,"is_pvip":false,"replies":[{"id":"35450","content":"s = 0, e = 0 的时候，无论 f 是多少，都是表示浮点数 0<br>f = 5，底数是1.5 而不是 0.5","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1559120585,"ip_address":"","comment_id":98742,"utype":1}],"discussion_count":13,"race_medal":0,"score":"117523206406","product_id":100026001,"comment_content":"对于0.5，按照老师的说法，可以用s = 0、e = -1、f = 0来表示。<br>但是对照表格，似乎s = 0、e = 0、f = 5也可以表示？请解惑","like_count":27,"discussions":[{"author":{"id":1115689,"avatar":"https://static001.geekbang.org/account/avatar/00/11/06/29/bf619df8.jpg","nickname":"三军","note":"","ucode":"C1BCA262D7DE6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221917,"discussion_content":"表格有错，当阶码域为全0时，浮点数值并不是0.f，而是（-1）^ s x 0.f x 2 ^ (1 - bias)。《深入理解计算机系统》71页，“当阶码域为全0时，所表示的数就是非规格化形式，在这种情况下，阶码值是E = 1 - Bias，而尾数的值是M = f，也就是小数字段的值，不包含隐含的开头的1。”","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1586080252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1439408,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f6/b0/7ffbe2d4.jpg","nickname":"Bobo","note":"","ucode":"0E573F53BF417D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":160314,"discussion_content":"那您表格里e=0，f!=0，s=0or1，浮点数=0.f是什么意思\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1580786067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451816,"discussion_content":"s = 0, e = 0 的时候，无论 f 是多少，都是表示浮点数 0\nf = 5，底数是1.5 而不是 0.5","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1559120585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115689,"avatar":"https://static001.geekbang.org/account/avatar/00/11/06/29/bf619df8.jpg","nickname":"三军","note":"","ucode":"C1BCA262D7DE6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221901,"discussion_content":"阶码为0时，代表这是一个非规格化数，表达式为(-1) ^ s x 0.f x 2 ^ (-bias + 1)，对于单精度来说这时候阶码是-126","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586078178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1363634,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ce/b2/1f914527.jpg","nickname":"海盗船长","note":"","ucode":"ECB28BA21A4113","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1115689,"avatar":"https://static001.geekbang.org/account/avatar/00/11/06/29/bf619df8.jpg","nickname":"三军","note":"","ucode":"C1BCA262D7DE6C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339183,"discussion_content":"对的，也可以看下阮一峰这篇文章 http://www.ruanyifeng.com/blog/2010/06/ieee_floating-point_representation.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609554502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":221901,"ip_address":""},"score":339183,"extra":""}]},{"author":{"id":1004869,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/55/45/e4314bc6.jpg","nickname":"magicnum","note":"","ucode":"96B3696961F654","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62,"discussion_content":"那您表格里e=0，f!=0，s=0or1，浮点数=0.f是什么意思","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1561040348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484192,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/a0/e0cccf7e.jpg","nickname":"圆圆满满","note":"","ucode":"396E7A822014D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576433,"discussion_content":"又学习了下网上其他资料（https://www.jianshu.com/p/ae5e68051244）以及《深入理解计算机系统》，f!=0的场景需要再划分出来，分出格式化值和非格式化值（接近0的数字）。这个接近0的尺度范围定义为： float时小数&lt;2^-127；double时小数&lt;2^-1023。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655543736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"完美坚持","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379187,"discussion_content":"可以参考下：https://blog.csdn.net/a10201516595/article/details/102715146，比较简单清楚明白。\n阶码指的是8位二进制转化成的十进制数，阶码的真值在阶码不为0或255的时候，就是文中提到的e\n三军 同学的提醒也很有帮助：\n【摘录】\n表格有错，当阶码域为全0时，浮点数值并不是0.f，而是（-1）^ s x 0.f x 2 ^ (1 - bias)。《深入理解计算机系统》71页，“当阶码域为全0时，所表示的数就是非规格化形式，在这种情况下，阶码值是E = 1 - Bias，而尾数的值是M = f，也就是小数字段的值，不包含隐含的开头的1。”\n【摘录】\n3.非规格化数\n阶码全为0，尾数非0\n顺带解释，为什么要有非规格化数\n\n大家知道浮点数是有隐藏位“ 1 ”的\n然后，浮点数的计算会有1. XXX * 2^n\n那怎么表示0呢？？？\n\n这里就需要有非规格化数了\n因为阶码全为0的非规格化数的隐藏位是“ 0 ”，这时就可以处理 0 的问题了！\n\nPs：阶码为0时，阶码的真值不再是0-127=-127，而是IEEE754规定的-126，承接规格化数的最小阶码真值（1-127=-126）\n\n这里顺带引出所谓的规格化数\n也就是\n阶码非0，且阶码不全为1\n这里看一下规格化数的最小值\n根据语法，阶码的最小值为1\n1-127=-126\n则有最小的规格化数1.0*2^-126\n你会发现这个数字要比非规格化数要大\n所以说，非规格化数还用于处理比规格化数更小的数值\n\n综上：\n非规格化数有两个作用：\n1.处理 0 的问题\n2.处理比规格化数更小的数值\n————————————————\n版权声明：本文为CSDN博主「Free Jim」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\n原文链接：https://blog.csdn.net/a10201516595/article/details/102715146","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623746364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1455958,"avatar":"https://static001.geekbang.org/account/avatar/00/16/37/56/11068390.jpg","nickname":"倡印","note":"","ucode":"4F53AA5D017D89","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":178685,"discussion_content":"我也觉得老师说法怪怪的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582188906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339339,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6f/cb/bacbfef6.jpg","nickname":"EatheinWong","note":"","ucode":"F1F1C20D3FF55B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135162,"discussion_content":"我猜是表格里的数据写错了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579074083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1311315,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLW8JDURuH8rWWd4kibR9ibsehbiaERqBJIP20GDJfZjaRlGQQVqw6780NTxrfxBujrzQvBnIcrmfkCg/132","nickname":"gibson1112","note":"","ucode":"51CF21A78A35C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21509,"discussion_content":"上面说的存储的e等于0，实际公式的值是-127，因此不管正负都是很小的趋向0。而全1则是128，就是很大的，再根据f来判断是不是nan","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569492261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1311315,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLW8JDURuH8rWWd4kibR9ibsehbiaERqBJIP20GDJfZjaRlGQQVqw6780NTxrfxBujrzQvBnIcrmfkCg/132","nickname":"gibson1112","note":"","ucode":"51CF21A78A35C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21503,"discussion_content":"0.5按照通用转成2进制，小数点左边是0，右边按照乘2和1比较的选择正好是1。即0.5就是二进制的0.1，套用格式加移位就是(-1)^0*1.0*2^(-1)，这样e就是-1+127=126.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569491973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073601,"avatar":"https://static001.geekbang.org/account/avatar/00/10/61/c1/93031a2a.jpg","nickname":"Aaaaaaaaaaayou","note":"","ucode":"67BA315B87587D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2248,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563411679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98739,"user_name":"陆离","can_delete":false,"product_type":"c1","uid":1483932,"ip_address":"","ucode":"2C8C206CE36A81","user_header":"https://static001.geekbang.org/account/avatar/00/16/a4/9c/b32ed9e9.jpg","comment_is_top":false,"comment_ctime":1559089209,"is_pvip":false,"replies":[{"id":"35454","content":"👍<br><br>其实这一讲还有下篇，具体s, e, f怎么计算大家可以看一下周五的下篇，以及里面给的交互演示网页。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1559120948,"ip_address":"","comment_id":98739,"utype":1}],"discussion_count":2,"race_medal":0,"score":"53098696761","product_id":100026001,"comment_content":"如果觉得没有理解老师讲的可以参考阮一峰的一篇文章<br>http:&#47;&#47;www.ruanyifeng.com&#47;blog&#47;2010&#47;06&#47;ieee_floating-point_representation.html","like_count":12,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451815,"discussion_content":"👍\n\n其实这一讲还有下篇，具体s, e, f怎么计算大家可以看一下周五的下篇，以及里面给的交互演示网页。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1559120948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1581509,"avatar":"https://static001.geekbang.org/account/avatar/00/18/21/c5/024e1ef1.jpg","nickname":"X","note":"","ucode":"BE05C1D25CE313","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":584155,"discussion_content":"其实s,f,e的计算应该放在上篇讲解。因为这个章节都已经提到sfe了，然后我们只能看见老是您直接计算出来的结果，我们并不知道如何计算的，所以看得有点懵，只能自己先找资料。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660645543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":451815,"ip_address":"上海"},"score":584155,"extra":""}]}]},{"had_liked":false,"id":98996,"user_name":"Geek","can_delete":false,"product_type":"c1","uid":1358337,"ip_address":"","ucode":"276E2950D31AFB","user_header":"https://static001.geekbang.org/account/avatar/00/14/ba/01/c5161563.jpg","comment_is_top":false,"comment_ctime":1559127871,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"48803768127","product_id":100026001,"comment_content":"7个比特的话，99的二进制是1100011，32位里有四个7，那就是99999999，还剩4个比特，正好用来表示一个9，所以最大应该是9999999.99，如果表示负数，第一位是符号位，所以之前剩余的四位，最大是（正）0111和（负）1111，也即是±7，所以结果是-7999999.99-7999999.99","like_count":11,"discussions":[{"author":{"id":1254103,"avatar":"https://static001.geekbang.org/account/avatar/00/13/22/d7/fed46140.jpg","nickname":"DreamItPossible","note":"","ucode":"232FCE2BB22012","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4908,"discussion_content":"您好，这里剩余四位中最小的负数计算有问题，第一位是符号位的话，最小的负数表示为1000，即-8，所以最终的最小结果为-8999999.99","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1565828984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98849,"user_name":"愤怒的虾干","can_delete":false,"product_type":"c1","uid":1266043,"ip_address":"","ucode":"CEBD1B2BE7BCEE","user_header":"https://static001.geekbang.org/account/avatar/00/13/51/7b/191a2112.jpg","comment_is_top":false,"comment_ctime":1559105860,"is_pvip":false,"replies":[{"id":"35447","content":"愤怒的虾干同学你好，<br><br>toHexString表示的是把10进制转换成16进制表示。<br><br>0.9999999的小数部分转换成16进制，采用的是 乘以2 然后如果大于1去减1这样的操作过程。你试一下就知道就会是1111111...因为一共有23位长，所以最后有一位可能是0，所以就是 fffffe，就是表示0.999999<br><br>以1.5f为例，小数部分是0.5<br>乘以2就是1.0，减1就是0<br>那么0.5表示成2进制就是 0.1000000<br>4位表示1个16进制数第一位就是8，后面都是0会截断显示。<br><br>你可以照着接下来第16讲的转换过程试一下，看看小数部分会变成什么样子。<br><br>然后把二进制转换成16进制，就能知道为什么了。<br>","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1559120173,"ip_address":"","comment_id":98849,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31623876932","product_id":100026001,"comment_content":"老师，我在java里验证了下，譬如1.9999999f，小数点后的位数，即“9999999”七个9是没办法用8个bit位表示的，我猜测会失去精度变成2.0f，但是调用Float.toHexString发现是0x1.fffffep0，fffffe怎么看都不可能是9999999。于是我换了个数1.5f，16进制浮点数表示为0x1.8p0，可以看到小数点后是8,16进制的一半。这样看的话，上面的小数部分十进制显示是：fffffe&#47;2^23 = 0.9999999，加上小数点前的1就是1.9999999了。<br>根据这个思路可以推算出规则浮点数最小1.0*2^（-126），最大(1 + (2^23 - 1)&#47;2^23)*2^(127)","like_count":7,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451862,"discussion_content":"愤怒的虾干同学你好，\n\ntoHexString表示的是把10进制转换成16进制表示。\n\n0.9999999的小数部分转换成16进制，采用的是 乘以2 然后如果大于1去减1这样的操作过程。你试一下就知道就会是1111111...因为一共有23位长，所以最后有一位可能是0，所以就是 fffffe，就是表示0.999999\n\n以1.5f为例，小数部分是0.5\n乘以2就是1.0，减1就是0\n那么0.5表示成2进制就是 0.1000000\n4位表示1个16进制数第一位就是8，后面都是0会截断显示。\n\n你可以照着接下来第16讲的转换过程试一下，看看小数部分会变成什么样子。\n\n然后把二进制转换成16进制，就能知道为什么了。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559120173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98780,"user_name":"古夜","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1559094427,"is_pvip":false,"replies":[{"id":"35445","content":"底数就是 1.小数位，也就是1.f。因为是二进制，所以底数的“整数”部分可以认为必然是1啊，不存在其他情况","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1559118659,"ip_address":"","comment_id":98780,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31623865499","product_id":100026001,"comment_content":"对于那个公式，底数怎么表示？32位都给了符号位，指数位，小数位，底数怎么办？","like_count":7,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451835,"discussion_content":"底数就是 1.小数位，也就是1.f。因为是二进制，所以底数的“整数”部分可以认为必然是1啊，不存在其他情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559118659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99194,"user_name":"旺旺","can_delete":false,"product_type":"c1","uid":1213887,"ip_address":"","ucode":"161B267F67EBCA","user_header":"https://static001.geekbang.org/account/avatar/00/12/85/bf/5c5e86bb.jpg","comment_is_top":false,"comment_ctime":1559176904,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"27328980680","product_id":100026001,"comment_content":"0.3无法被精确表达：<br>1、首先想到会使用这种情况：s=0，e=0，f=11<br>但却触发了这个特殊规则：当s和e都为0，f不为0时，表达的是0.f<br>但是，0.f的时候，无论f怎么取值，都无法精确表达0.3。因为0.3的精确二进制表达式1.1","like_count":6,"discussions":[{"author":{"id":1501383,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIXY0VM0oTs6qIDEmswGibbX8sGUJ0iargaAYXcFVAiaPJfnobG4RZNW4MhpjP7X5CpyLNsy277J6MUg/132","nickname":"郑楚周","note":"","ucode":"CC811E4249620A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8327,"discussion_content":"如果s=0，f=2，e=-2；那么表达式就为\n（-1）^0*1.2*（2）^-2=0.3，这不就可以精确表达0.3了吗？","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1567920537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1270780,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8AdNibZHbZriaqLQZrNPcX8hVOpY91o0ELl7eOq7qy3aTibjia10ymIsKUKW6Ucs9SuXBDWlg6sjahw/132","nickname":"逆舟","note":"","ucode":"B303B4B8E10E0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1501383,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIXY0VM0oTs6qIDEmswGibbX8sGUJ0iargaAYXcFVAiaPJfnobG4RZNW4MhpjP7X5CpyLNsy277J6MUg/132","nickname":"郑楚周","note":"","ucode":"CC811E4249620A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273501,"discussion_content":"还真是啊，不知道老师怎么解释","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590464318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":8327,"ip_address":""},"score":273501,"extra":""}]},{"author":{"id":2425841,"avatar":"https://static001.geekbang.org/account/avatar/00/25/03/f1/69e111f0.jpg","nickname":"walter","note":"","ucode":"C45C93E3DFFAF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365833,"discussion_content":"首先f=11时，是（0.75）10进制\n其次，f=2时，转化为二进制是0.0 1001 1001...一直循环下去，有精度损失\n还有，1.2*2的-2次方不是十进制算下来等于1.2*（1/4）=0.3，这里的2的-2次方表示小数点的移动","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617889711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1270780,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8AdNibZHbZriaqLQZrNPcX8hVOpY91o0ELl7eOq7qy3aTibjia10ymIsKUKW6Ucs9SuXBDWlg6sjahw/132","nickname":"逆舟","note":"","ucode":"B303B4B8E10E0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273565,"discussion_content":"@徐文浩 老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590472002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98803,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1559097551,"is_pvip":false,"replies":[{"id":"35451","content":"👍","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1559120649,"ip_address":"","comment_id":98803,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27328901327","product_id":100026001,"comment_content":"如果7位表示0-99的话，32位的取值范围是0-9999999.99。如果需要负数，第一位表示符号位，取值范围是-7999999.99-7999999.99","like_count":6,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451845,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559120649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98843,"user_name":"任雪龙","can_delete":false,"product_type":"c1","uid":1126708,"ip_address":"","ucode":"E0D5F4DDB729D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/31/34/ba1c8fc7.jpg","comment_is_top":false,"comment_ctime":1559103846,"is_pvip":false,"replies":[{"id":"35448","content":"任雪龙同学你好，<br><br>这个在第16讲里面会讲解一下计算过程，因为一讲的篇幅有限，所以没有放在15讲里面讲完。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1559120215,"ip_address":"","comment_id":98843,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23033940326","product_id":100026001,"comment_content":"老师，感觉今天这个讲的太粗糙了，很多东西都是用结果解释结果，比如对 0.5 这个数 s 、e、f 的值，值是从哪里推导得来的都没有解释，希望可以详细解释下","like_count":5,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451859,"discussion_content":"任雪龙同学你好，\n\n这个在第16讲里面会讲解一下计算过程，因为一讲的篇幅有限，所以没有放在15讲里面讲完。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559120215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139939,"user_name":"曙光","can_delete":false,"product_type":"c1","uid":1476450,"ip_address":"","ucode":"04D65BF7F19845","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/62/f99b5b05.jpg","comment_is_top":false,"comment_ctime":1570771108,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14455672996","product_id":100026001,"comment_content":"突然发现，s f e不知道如何表示浮点数1了","like_count":3,"discussions":[{"author":{"id":2813178,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ec/fa/918fb95d.jpg","nickname":"南","note":"","ucode":"E936D8396C3C76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544676,"discussion_content":"我也有这个疑问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641634518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1504652,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f5/8c/82fb5890.jpg","nickname":"抱小星","note":"","ucode":"BA7B0DAFDA4AF5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347555,"discussion_content":"00111111100000000000000000000000","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612256947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113181,"user_name":"瀚海星尘","can_delete":false,"product_type":"c1","uid":1024461,"ip_address":"","ucode":"90F418299EA3BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/cd/2c513481.jpg","comment_is_top":false,"comment_ctime":1562909109,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10152843701","product_id":100026001,"comment_content":"老师，这样一来，1用浮点数咋表示？","like_count":2,"discussions":[{"author":{"id":2222614,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/1fXYkS0UlZUQQtzUpG2TZzVhVZHarfpWT5wjO7iajw959zysQks1vLFM2uQsKnYG3uQAhzenH9LP86goiciaCDNibQ/132","nickname":"Xingyi_Xie","note":"","ucode":"D1849DB8BFB1B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530769,"discussion_content":"s=0, f=0, e=0, (-1)^s * 1.f * 2^e = 1 * 1.0 * 1 = 1.0 注意，不是直接 e = 0，e 其实是 127，被映射到 -126～127 中的 0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637144767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195037,"user_name":"o_O","can_delete":false,"product_type":"c1","uid":1257283,"ip_address":"","ucode":"7C469AE3DA323B","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/43/e24212bb.jpg","comment_is_top":false,"comment_ctime":1585129956,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880097252","product_id":100026001,"comment_content":"打卡，老师也算是领进门吧，想要深入的了解还需要自己查阅相关书籍","like_count":1},{"had_liked":false,"id":124141,"user_name":"DreamItPossible","can_delete":false,"product_type":"c1","uid":1254103,"ip_address":"","ucode":"232FCE2BB22012","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/d7/fed46140.jpg","comment_is_top":false,"comment_ctime":1565830193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5860797489","product_id":100026001,"comment_content":"课后思考题解答：<br>如果使用7个比特表示连续两位的十进制数，则32个比特位可以划分为1个4比特位后跟着连续的4个7比特位的十进制数，且将最后一个7比特位作为小数部分，注意开头的4比特位可以表示的最大十进制数为9，那么这种表示方法可以表示的最大数为9999999.99；<br>如果要表示负数，则只需让开头的4比特位中的最高位表示符号位即可，即开头的4比特位可以表示的十进制数范围是-8到7，即整个32比特位可以表示的数值范围是-8999999.99到7999999.99；<br>","like_count":1},{"had_liked":false,"id":100854,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1559655615,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"5854622911","product_id":100026001,"comment_content":"如果指数位 e 位最大值 255 那么有效位 f 必须为 0，否则就不是一个数 NaN,  这是规定吗？还是有一定的依据的？","like_count":1},{"had_liked":false,"id":99121,"user_name":"范宁","can_delete":false,"product_type":"c1","uid":1255768,"ip_address":"","ucode":"A4E929D4D89F64","user_header":"https://static001.geekbang.org/account/avatar/00/13/29/58/e4a8093b.jpg","comment_is_top":false,"comment_ctime":1559145028,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5854112324","product_id":100026001,"comment_content":"老师可以讲一下计算机怎么识别规格化浮点数和非规格化浮点数吗","like_count":1},{"had_liked":false,"id":98896,"user_name":"Only now","can_delete":false,"product_type":"c1","uid":1038574,"ip_address":"","ucode":"C617473A03AE27","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/ee/6e7c2264.jpg","comment_is_top":false,"comment_ctime":1559113994,"is_pvip":false,"replies":[{"id":"35500","content":"对，整个是浮点数的标准<br>https:&#47;&#47;zh.wikipedia.org&#47;zh-hans&#47;IEEE_754","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1559127868,"ip_address":"","comment_id":98896,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5854081290","product_id":100026001,"comment_content":"IEEE754?","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451881,"discussion_content":"对，整个是浮点数的标准\nhttps://zh.wikipedia.org/zh-hans/IEEE_754","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559127868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98785,"user_name":"鱼向北游","can_delete":false,"product_type":"c1","uid":1439908,"ip_address":"","ucode":"580EC7DCE57E9A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IPdZZXuHVMibwfZWmm7NiawzeEFGsaRoWjhuN99iaoj5amcRkiaOePo6rH1KJ3jictmNlic4OibkF4I20vOGfwDqcBxfA/132","comment_is_top":false,"comment_ctime":1559094556,"is_pvip":false,"replies":[{"id":"35444","content":"这个想法不错，我看是否搞一章加餐","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1559118561,"ip_address":"","comment_id":98785,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5854061852","product_id":100026001,"comment_content":"老师可以扩展讲一下 移码 毕竟阶码部分并不是我们常见的原码或者补码 也不是移码的常见表示 还有非规格化表示法的由来","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451837,"discussion_content":"这个想法不错，我看是否搞一章加餐","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559118561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356756,"user_name":"Sancho","can_delete":false,"product_type":"c1","uid":1436391,"ip_address":"上海","ucode":"78849913082622","user_header":"https://static001.geekbang.org/account/avatar/00/15/ea/e7/9ce305ec.jpg","comment_is_top":false,"comment_ctime":1662558928,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662558928","product_id":100026001,"comment_content":"【【CSAPP-深入理解计算机系统】2-4.浮点数(上)】 https:&#47;&#47;www.bilibili.com&#47;video&#47;BV1VK4y1f7o6?share_source=copy_web&amp;vd_source=eea49f3616bea428cb6315f9dcd55caa","like_count":0},{"had_liked":false,"id":354651,"user_name":"X","can_delete":false,"product_type":"c1","uid":1581509,"ip_address":"上海","ucode":"BE05C1D25CE313","user_header":"https://static001.geekbang.org/account/avatar/00/18/21/c5/024e1ef1.jpg","comment_is_top":false,"comment_ctime":1660640634,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660640634","product_id":100026001,"comment_content":"老师这一章节没有说清楚有效位是怎么来的。<br>在同学推荐的阮一峰老师的文章里明白了。<br>http:&#47;&#47;www.ruanyifeng.com&#47;blog&#47;2010&#47;06&#47;ieee_floating-point_representation.html<br>如何得到一个小数的符号位：s，有效位：f，以及指数位：e呢？<br>5.0为例：<br>5用二进制表示成：101<br>0用二进制表示成：0<br>所以5.0的二进制表示是：101.0<br>用科学计数法表示成：1.01 * 2 ^ 2 <br>由于是正数，所有符号位 s=0。<br>有效位就是 f = 1.01<br>指数位自然是 e = 2","like_count":0},{"had_liked":false,"id":353786,"user_name":"X","can_delete":false,"product_type":"c1","uid":1581509,"ip_address":"上海","ucode":"BE05C1D25CE313","user_header":"https://static001.geekbang.org/account/avatar/00/18/21/c5/024e1ef1.jpg","comment_is_top":false,"comment_ctime":1659778015,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659778015","product_id":100026001,"comment_content":"定点数：定的这个点就是小数点。如果32位比表示的是有两位小数的实数，那么就需要8位比特表示小数位，1位表示符号位，只剩23位表示数的范围。<br>浮点数：浮的这个点也是小数点。可以表示的精度更高。相同位的情况下表示的数据范围比定点数大很多很多。<br>","like_count":0},{"had_liked":false,"id":339447,"user_name":"憨豆桑","can_delete":false,"product_type":"c1","uid":2828274,"ip_address":"","ucode":"E5EDC12708DA82","user_header":"https://static001.geekbang.org/account/avatar/00/2b/27/f2/50ba2f35.jpg","comment_is_top":false,"comment_ctime":1648108457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648108457","product_id":100026001,"comment_content":"CSAPP上有道题：<br>求表达式是否总正确。<br>x==（int）（float）x（假定x的类型是int）。<br>答案说当x为TMax时表达式错了，没懂。<br>滴个聪明的老师帮我解答(๑•̀ㅂ•́)و✧","like_count":0},{"had_liked":false,"id":336564,"user_name":"Condor Hero","can_delete":false,"product_type":"c1","uid":1528334,"ip_address":"","ucode":"BD850FE812D22F","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/0e/c5ff46d2.jpg","comment_is_top":false,"comment_ctime":1646216576,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1646216576","product_id":100026001,"comment_content":"「大概在 10 的 82 次方左右，我们就用 1.0×1082」，2 排版错误，没有放在指数位置。","like_count":0},{"had_liked":false,"id":335100,"user_name":"小鳄鱼","can_delete":false,"product_type":"c1","uid":1178888,"ip_address":"","ucode":"9C30CAFB41A263","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/08/c039f840.jpg","comment_is_top":false,"comment_ctime":1645331102,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645331102","product_id":100026001,"comment_content":"整数的表示，是使用2的次幂来表示的：2^0+2^1+2^2+...<br>而小数的表示，是使用1&#47;2的次幂表示的2^-1+2^-2+2^-3...如果能正好凑成某个小数，则该小数就能被完整的表示。如果凑不到，那么就只能近似表示了","like_count":0},{"had_liked":false,"id":329933,"user_name":"南","can_delete":false,"product_type":"c1","uid":2813178,"ip_address":"","ucode":"E936D8396C3C76","user_header":"https://static001.geekbang.org/account/avatar/00/2a/ec/fa/918fb95d.jpg","comment_is_top":false,"comment_ctime":1641655097,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641655097","product_id":100026001,"comment_content":"s = 0, f = 0, e 的映射是 0, e  = 127;(e 到它的映射,这个关系是 e - 127)  这样即能表示 1.0 * 2^0 = 1","like_count":0},{"had_liked":false,"id":324940,"user_name":"小叶","can_delete":false,"product_type":"c1","uid":1851730,"ip_address":"","ucode":"EFD624AD6B2686","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ooYDTtTQHL9CZQmonDOQSC4Af9S4uqicXzUicOqEJqSOtHyOZ81PTpxcTqK5ibNHsaNWJIuHiaVcxB8gIo9RNXsshA/132","comment_is_top":false,"comment_ctime":1638749834,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638749834","product_id":100026001,"comment_content":"s=0，e = 2^{-1}，需要注意，e 表示从 -126 到 127 个。这里e=后面是不是写错啦","like_count":0},{"had_liked":false,"id":305786,"user_name":"Dan","can_delete":false,"product_type":"c1","uid":2652241,"ip_address":"","ucode":"ABD9F2F0BC2002","user_header":"https://static001.geekbang.org/account/avatar/00/28/78/51/43c48673.jpg","comment_is_top":false,"comment_ctime":1628160904,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628160904","product_id":100026001,"comment_content":"老师，为什么0.3+0.4能被精确计算呢","like_count":0},{"had_liked":false,"id":302328,"user_name":"张二旦","can_delete":false,"product_type":"c1","uid":1930366,"ip_address":"","ucode":"7FC6DAD82D0167","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1ZeNR1gSiczchhbLsk53niaTJic7fkY3SetAeXAD6Dvr8T353f3ORiaNLfflYJ3oDfcoD7t8acpt9OkH3FuWVsjopA/132","comment_is_top":false,"comment_ctime":1626167415,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626167415","product_id":100026001,"comment_content":"表示负数，取值范围可以是-999999.97-999999.97吗","like_count":0},{"had_liked":false,"id":300656,"user_name":"不渡","can_delete":false,"product_type":"c1","uid":1309975,"ip_address":"","ucode":"F18FB1FF2C1D52","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/17/be429dab.jpg","comment_is_top":false,"comment_ctime":1625290149,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625290149","product_id":100026001,"comment_content":"“如果我们要精确到分的话，那么能够表示的最大金额也就是到 100 万”<br>最大不是999999.99吗？100万是怎么算出来的","like_count":0},{"had_liked":false,"id":277090,"user_name":"抱小星","can_delete":false,"product_type":"c1","uid":1504652,"ip_address":"","ucode":"BA7B0DAFDA4AF5","user_header":"https://static001.geekbang.org/account/avatar/00/16/f5/8c/82fb5890.jpg","comment_is_top":false,"comment_ctime":1612257522,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1612257522","product_id":100026001,"comment_content":"最小的数不是1.0000*2^-126，而是仅有效数位第23位为1，即0.00…0001 *2^-126, 本身还有大概10的-7次方，总大小为1.40129846432e-45","like_count":0},{"had_liked":false,"id":264439,"user_name":"今夜秋风和","can_delete":false,"product_type":"c1","uid":1434066,"ip_address":"","ucode":"453C8197FFC81D","user_header":"https://static001.geekbang.org/account/avatar/00/15/e1/d2/42ad2c87.jpg","comment_is_top":false,"comment_ctime":1606467509,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606467509","product_id":100026001,"comment_content":"指数位0，尾数位0的利用公式算下来不是 0，这个为什么最后定义为0 呢","like_count":0},{"had_liked":false,"id":263342,"user_name":"LearnAndTry","can_delete":false,"product_type":"c1","uid":1512860,"ip_address":"","ucode":"0ECF4398C870DC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Rr8ABLicfgJHZ3xs3bXNjHdicwVN0zBiaFtIEXw4D1licedSuia3zicxJC4lqtrNwPmCeAW5UR2Ugia0dNfcvtXYnpOwQ/132","comment_is_top":false,"comment_ctime":1606108892,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606108892","product_id":100026001,"comment_content":"e和f都是0的时候表示0， 那如何表示1呢？","like_count":0},{"had_liked":false,"id":250625,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1601176772,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601176772","product_id":100026001,"comment_content":"课后题：0.00-799999.99","like_count":0},{"had_liked":false,"id":239427,"user_name":"罗力友","can_delete":false,"product_type":"c1","uid":1269780,"ip_address":"","ucode":"6B10A00221B25A","user_header":"https://static001.geekbang.org/account/avatar/00/13/60/14/6cb28332.jpg","comment_is_top":false,"comment_ctime":1596530045,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596530045","product_id":100026001,"comment_content":"在 e 为 0 且 f 为 0 的时候，我们就把这个浮点数认为是 0。<br><br>想问下老师，那1怎么表示呢？","like_count":0},{"had_liked":false,"id":229772,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1810189,"ip_address":"","ucode":"75F613D58909DB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZHw73tgCqGKhvticUWGRz4icgicu4hFWfKtacoFJeItH7maNuNUmjnEgDTJvOibwUWgGV0p6guNPibMVWDV4BUmEmlA/132","comment_is_top":false,"comment_ctime":1593142075,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593142075","product_id":100026001,"comment_content":"单精度浮点是1.0z怎表示呢？各位朋友","like_count":0},{"had_liked":false,"id":204272,"user_name":"WENMURAN","can_delete":false,"product_type":"c1","uid":1915404,"ip_address":"","ucode":"5D1CE8B41937C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqXNhbTULKiakib8lYXrvGF2zPwfedooBzC2EtSv1nt1MwV1KUvTkcJrvCBFvcdwJicnr3OEXnk9GUCg/132","comment_is_top":false,"comment_ctime":1586358236,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586358236","product_id":100026001,"comment_content":"浮点数的表示<br>32个比特表示的数大约40个，如果表示带2位小数的数，可以表示大约1亿个。<br>问题：浪费，没办法表示很大的数和很小的数<br>解决：浮点数，用科学计数法表示<br>单精度32比特，分成三部分：1比特的符号位，8比特的指数位，23比特的有效数位，范围1.17*10**-38 ----- 3.4*10**38<br>计算机中的小数都不是精确的。","like_count":0},{"had_liked":false,"id":183642,"user_name":"北风一叶","can_delete":false,"product_type":"c1","uid":1087302,"ip_address":"","ucode":"30310E66341D2A","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/46/fe1f21d8.jpg","comment_is_top":false,"comment_ctime":1583105064,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583105064","product_id":100026001,"comment_content":"浮点数在计算机中是怎么表示的，32位的浮点数使用1位符号，8位指数位和23位有效位","like_count":0},{"had_liked":false,"id":183061,"user_name":"程序员班吉","can_delete":false,"product_type":"c1","uid":1478098,"ip_address":"","ucode":"BD48CF7649609A","user_header":"https://static001.geekbang.org/account/avatar/00/16/8d/d2/8a6be8d8.jpg","comment_is_top":false,"comment_ctime":1582946225,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582946225","product_id":100026001,"comment_content":"老师，这个课程可以应付本科计算机课程的考试吗？","like_count":0},{"had_liked":false,"id":160038,"user_name":"88591","can_delete":false,"product_type":"c1","uid":1254656,"ip_address":"","ucode":"04CE3E46455185","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/00/3afbab43.jpg","comment_is_top":false,"comment_ctime":1575859794,"is_pvip":false,"replies":[{"id":"68676","content":"loser同学，<br><br>你好，这个我的确也不知道，有兴趣大家可以一起来考古一下。","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1581241103,"ip_address":"","comment_id":160038,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575859794","product_id":100026001,"comment_content":"老师，为什么公式定义是 s x 1.f x 2e ,不是s x 2ex 1.f （这种方式更容易对应位数 ：符号位，指数位，有效位数）。","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477241,"discussion_content":"loser同学，\n\n你好，这个我的确也不知道，有兴趣大家可以一起来考古一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581241103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150294,"user_name":"梦倚栏杆","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1573514193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573514193","product_id":100026001,"comment_content":"看了程序是怎么跑起来里的浮点数表示有两个疑问：<br>1.为什么对补码取反再加+1就找到了对应的人可以看懂的数值，这是和现实中相反数的相反数等于本身是一个道理吗？<br>2.整数的正负数既然是用补码表示的，为什么浮点数的指数部分不能用补码表示呢？我没太理解节省一个符号位的意义是什么<br>","like_count":0},{"had_liked":false,"id":139471,"user_name":"天王","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1570665228,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570665228","product_id":100026001,"comment_content":"浮点数和定点数 小数用二进制怎么表示，1 定点数的表示，32个比特，右8位表示小秋，左24位表示整数，定点数的缺点是表示的数据有限。2 浮点数的表示 32位的二进制，第一位作为符号位，后8位作为指数位，剩下的23的有效数位。公式 (-1)*1.f*2e，0.3，0.6，0.9用浮点数不能被精确的表示","like_count":0},{"had_liked":false,"id":134857,"user_name":"林峰峰","can_delete":false,"product_type":"c1","uid":1457609,"ip_address":"","ucode":"83C2093135BBB8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3B5MoC4DfBt00nnVshEBFHHkNVgbcBrXsd3SxFicdN3XX5ILOe7GJxKvtJKCY53xNCuxSV8ABxNulbhkibm1lXIw/132","comment_is_top":false,"comment_ctime":1568943508,"is_pvip":false,"replies":[{"id":"52612","content":"👍加油，又学会一点新知识呀","user_name":"作者回复","user_name_real":"徐文浩","uid":"1053568","ctime":1569653104,"ip_address":"","comment_id":134857,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568943508","product_id":100026001,"comment_content":"突然发现今天才知道什么是浮点数...","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"徐文浩","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467930,"discussion_content":"👍加油，又学会一点新知识呀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569653104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126416,"user_name":"活的潇洒","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1566384896,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566384896","product_id":100026001,"comment_content":"“为什么我们用0.3 + 0.6不能得到0.9呢？这是因为，浮点数没有办法精确表示0.3、0.6和0.9”<br>day15 笔记：https:&#47;&#47;www.cnblogs.com&#47;luoahong&#47;p&#47;10942468.html","like_count":0,"discussions":[{"author":{"id":1501383,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIXY0VM0oTs6qIDEmswGibbX8sGUJ0iargaAYXcFVAiaPJfnobG4RZNW4MhpjP7X5CpyLNsy277J6MUg/132","nickname":"郑楚周","note":"","ucode":"CC811E4249620A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8329,"discussion_content":"如果s=0，f=2，e=-2；那么表达式就为\n（-1）^0*1.2*（2）^-2=0.3，这不就可以精确表达0.3了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567920595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120140,"user_name":"蒋旺Foo","can_delete":false,"product_type":"c1","uid":1265741,"ip_address":"","ucode":"4325AB9674975C","user_header":"https://static001.geekbang.org/account/avatar/00/13/50/4d/392f969b.jpg","comment_is_top":false,"comment_ctime":1564798460,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564798460","product_id":100026001,"comment_content":"老师在文中提到了“浮点数能够表示的最小的数和最大的数”。根据文中计算公式：(−1)^s×1.f×2^e，计算最大值则，s=1,f=23,e=127。由于1.f 的范围1～2，最大值约等于2，所以约等于 2*2^127=3.4*10^38。~_~","like_count":0},{"had_liked":false,"id":113283,"user_name":"Brightness","can_delete":false,"product_type":"c1","uid":1511167,"ip_address":"","ucode":"7767173DE8E96D","user_header":"https://static001.geekbang.org/account/avatar/00/17/0e/ff/100f158a.jpg","comment_is_top":false,"comment_ctime":1562933440,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562933440","product_id":100026001,"comment_content":"现在看不了了吗，好多都是Math Process Error","like_count":0},{"had_liked":false,"id":113183,"user_name":"瀚海星尘","can_delete":false,"product_type":"c1","uid":1024461,"ip_address":"","ucode":"90F418299EA3BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/cd/2c513481.jpg","comment_is_top":false,"comment_ctime":1562909411,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562909411","product_id":100026001,"comment_content":"老师，1的那个问题，我想明白了！","like_count":0,"discussions":[{"author":{"id":1228471,"avatar":"https://static001.geekbang.org/account/avatar/00/12/be/b7/638b5d30.jpg","nickname":"白泗小林","note":"","ucode":"CEF6A23B70947D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217353,"discussion_content":"兄弟，1.0 怎么表示","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585547672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110011,"user_name":"花仙子","can_delete":false,"product_type":"c1","uid":1249216,"ip_address":"","ucode":"9840BF416F1F0F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0f/c0/e6151cce.jpg","comment_is_top":false,"comment_ctime":1562150802,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562150802","product_id":100026001,"comment_content":"指数位没有使用补码？","like_count":0},{"had_liked":false,"id":105730,"user_name":"Amark","can_delete":false,"product_type":"c1","uid":1121326,"ip_address":"","ucode":"E5F48633654002","user_header":"https://static001.geekbang.org/account/avatar/00/11/1c/2e/93812642.jpg","comment_is_top":false,"comment_ctime":1561079378,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561079378","product_id":100026001,"comment_content":"浮点数 比如2.15，难道不可以表示成 2   .   1    5这四个字符吗","like_count":0},{"had_liked":false,"id":104470,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1560760394,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560760394","product_id":100026001,"comment_content":"用7比特的BCD编码，可以表示0000000.00~9999999.99，范围扩大了；如果要表示负数，第一位是符号位，可以表示-7999999.99~7999999.99","like_count":0},{"had_liked":false,"id":104439,"user_name":"Geek_a220b1","can_delete":false,"product_type":"c1","uid":1510034,"ip_address":"","ucode":"17D7AE8E3816EC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqQsr3lxPqIj3DDWRNicib5ZEXF1CvUFQEZL08dHicIXKVHjl1UVQspmp8wNKdYdMsWic3LdHlr2hXpAw/132","comment_is_top":false,"comment_ctime":1560754613,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560754613","product_id":100026001,"comment_content":"1","like_count":0},{"had_liked":false,"id":102554,"user_name":"Clover","can_delete":false,"product_type":"c1","uid":1089950,"ip_address":"","ucode":"DFDE91A5D735DE","user_header":"https://static001.geekbang.org/account/avatar/00/10/a1/9e/f50a2cef.jpg","comment_is_top":false,"comment_ctime":1560251008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560251008","product_id":100026001,"comment_content":"想问下老师，0.3*0.6为什么不发生异常得到了正确答案0.18","like_count":0},{"had_liked":false,"id":101431,"user_name":"开心","can_delete":false,"product_type":"c1","uid":1517457,"ip_address":"","ucode":"C8E08E8724C7CE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKkzrezV2dOBAgickt9DLzabz3dNFYyDEVXENMQ5ibrWhFbFqXIOia3ZaR21pozvB7UfoxJx4Ar688sA/132","comment_is_top":false,"comment_ctime":1559807178,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1559807178","product_id":100026001,"comment_content":"这里的e表示负数是没有符号位的概念了吗？ ","like_count":0},{"had_liked":false,"id":100296,"user_name":"曾轼麟","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1559524371,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559524371","product_id":100026001,"comment_content":"老师希望您可以讲一下有关高位int32转低位bit8中溢出的过程","like_count":0},{"had_liked":false,"id":99057,"user_name":"Ant","can_delete":false,"product_type":"c1","uid":1079563,"ip_address":"","ucode":"07E6374F91F61E","user_header":"https://static001.geekbang.org/account/avatar/00/10/79/0b/4346a253.jpg","comment_is_top":false,"comment_ctime":1559136822,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559136822","product_id":100026001,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":98871,"user_name":"活的潇洒","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1559110482,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559110482","product_id":100026001,"comment_content":"“算出来的结果居然不是准确的 0.9，而是 0.8999999999999999”<br>经实际在python控制台和浏览器测试确实如此，实战笔记：<br>https:&#47;&#47;www.cnblogs.com&#47;luoahong&#47;p&#47;10942468.html<br>","like_count":0}]}