{"id":176897,"title":"20 | äº‹åŠ¡å¼€å‘ï¼šè¯»æ“ä½œäº‹åŠ¡ä¹‹ä¸€","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-mongodb-course\">https://gitee.com/geektime-geekbang/geektime-mongodb-course</a></p>","comments":[{"had_liked":false,"id":164521,"user_name":"hal","can_delete":false,"product_type":"c3","uid":1359844,"ip_address":"","ucode":"98E625F7327FD9","user_header":"https://static001.geekbang.org/account/avatar/00/14/bf/e4/45758517.jpg","comment_is_top":false,"comment_ctime":1577020219,"is_pvip":false,"replies":[{"id":62944,"content":"ä¸¤ä¸ªä»èŠ‚ç‚¹æ˜¯å¦éƒ½æœ‰é”ä½ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577182173,"ip_address":"","comment_id":164521,"utype":1}],"discussion_count":23,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘éƒ½æ˜¯æŒ‰ç…§æ­¥éª¤åšçš„å®éªŒï¼Œslaveè®¾ç½®äº†db.fsynclock(),åœ¨slaveä¸Šdb.test.find()ä¹Ÿç¡®å®æ²¡æœ‰x:2,ä½†æ˜¯primaryä¸Šæ‰§è¡Œdb.test.find().readPref(&quot;secondary&quot;)\n{ &quot;_id&quot; : ObjectId(&quot;5dcf9491fb56b2bcfb260b70&quot;), &quot;x&quot; : 1 }\n{ &quot;_id&quot; : ObjectId(&quot;5dcf951cfb56b2bcfb260b71&quot;), &quot;x&quot; : 2 }\nè¿˜æœ‰ä¼šçœ‹åˆ°æœ‰2æ¡æ•°æ®ã€‚ã€‚","like_count":8,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478799,"discussion_content":"ä¸¤ä¸ªä»èŠ‚ç‚¹æ˜¯å¦éƒ½æœ‰é”ä½ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577182173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440873,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fc/69/02953435.jpg","nickname":"å¤§æ‡’è™«","note":"","ucode":"51014C4A7074DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366081,"discussion_content":"æˆ‘æ¥å›å¤ä¸€ä¸‹å§ï¼Œshellè¿æ¥å¤åˆ¶é›†ï¼Œéœ€è¦è¿™ä¹ˆè¿mongo --host rs0/127.0.0.1:28017,è¿™æ ·æ‰èƒ½å¤ç°å‡ºè€å¸ˆçš„ç»“æœï¼Œå…·ä½“å‚è§https://jira.mongodb.org/browse/SERVER-22289","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1617956161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2726005,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/icQMkmKS4koq2SIIMKZf89npRWy65MldL6GicEF2fdDwuHmNh86uaVPvwgiaibxUW6w8icfFeQYfsZxfrVhKG0ibRqMA/132","nickname":"Geek_jayzzz","note":"","ucode":"930BA971F39350","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1440873,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fc/69/02953435.jpg","nickname":"å¤§æ‡’è™«","note":"","ucode":"51014C4A7074DA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389221,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629183011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":366081,"ip_address":"","group_id":0},"score":389221,"extra":""}]},{"author":{"id":1519881,"avatar":"https://static001.geekbang.org/account/avatar/00/17/31/09/f5d68957.jpg","nickname":"ç¤¼æ‹œä¸‰","note":"","ucode":"C36A84E76E163D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310669,"discussion_content":"è¿™ä¸ªé—®é¢˜ä½œè€…ä¸ç®¡äº†å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601984977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809843,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/b3/46d03057.jpg","nickname":"Colin","note":"","ucode":"00F7AD85CE0073","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165234,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°è¿™ä¸ªæƒ…å†µï¼Œæœ‰ç‚¹å¥‡æ€ª","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581260622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208184,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6f/78/69a862ee.jpg","nickname":"ä¸€å…µä¸€å’","note":"","ucode":"594B4441559209","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":110889,"discussion_content":"æˆ‘ä¹Ÿæ˜¯é‡åˆ°è¿™ç§æƒ…å†µï¼Œ2ä¸ªä»èŠ‚ç‚¹éƒ½é”ä½äº†ï¼Œçœ‹ä¸åˆ°x:2çš„æ•°æ®ï¼Œä½†åœ¨2ä¸ªprimaryçš„çª—å£çœ‹éƒ½æ˜¯èƒ½æŸ¥åˆ°x:2æ•°æ®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577762638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168265,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d3/89/fcf95d32.jpg","nickname":"Allen","note":"","ucode":"10D365C791D28F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":108940,"discussion_content":"æˆ‘ä¹Ÿä¸€æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577637647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022129,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","nickname":"wu526","note":"","ucode":"69282EB175B48E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":102986,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°ä¸€æ ·çš„æƒ…å†µäº†ï¼Œæˆ‘100%ç¡®å®šä¸¤ä¸ªä»èŠ‚ç‚¹éƒ½é”å®šäº†ã€‚mongodb versionæ˜¯db version v4.2.1","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577369239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1359844,"avatar":"https://static001.geekbang.org/account/avatar/00/14/bf/e4/45758517.jpg","nickname":"hal","note":"","ucode":"98E625F7327FD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1022129,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","nickname":"wu526","note":"","ucode":"69282EB175B48E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104213,"discussion_content":"ğŸ¤ğŸ¤ğŸ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577416889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":102986,"ip_address":"","group_id":0},"score":104213,"extra":""},{"author":{"id":1359844,"avatar":"https://static001.geekbang.org/account/avatar/00/14/bf/e4/45758517.jpg","nickname":"hal","note":"","ucode":"98E625F7327FD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1022129,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","nickname":"wu526","note":"","ucode":"69282EB175B48E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104215,"discussion_content":"ä½ ç”¨compassè¿è¿‡å»æŸ¥è¯¢ï¼Œæ˜¯ç¬¦åˆå®éªŒé¢„æœŸçš„ï¼Œæ‰€ä»¥ä¹Ÿæ‡µäº†â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577416920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":102986,"ip_address":"","group_id":0},"score":104215,"extra":""},{"author":{"id":1786752,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/43/80/b1ae32cd.jpg","nickname":"Kennethã€‚ğŸŒ","note":"","ucode":"299ADF236395CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1359844,"avatar":"https://static001.geekbang.org/account/avatar/00/14/bf/e4/45758517.jpg","nickname":"hal","note":"","ucode":"98E625F7327FD9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342424,"discussion_content":"compassè¿æ¥ä¸»èŠ‚ç‚¹ï¼ŒreadPreference=secondary è¿æ¥ï¼Œä¹Ÿä¸è¡Œï¼Œä½ æ˜¯æ€ä¹ˆæ“ä½œçš„ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610678791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":104215,"ip_address":"","group_id":0},"score":342424,"extra":""}]},{"author":{"id":1359844,"avatar":"https://static001.geekbang.org/account/avatar/00/14/bf/e4/45758517.jpg","nickname":"hal","note":"","ucode":"98E625F7327FD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100996,"discussion_content":"éƒ½é”äº†ï¼Œç”¨compassæŸ¥ï¼Œè®¾ç½®secondaryæ˜¯ç¬¦åˆå®éªŒé¢„æœŸçš„ï¼Œåªæ˜¯å‘½ä»¤è¡ŒæŸ¥ä¸ç¬¦åˆé¢„æœŸï¼Œæœ‰ç‚¹è¯¡å¼‚ï¼Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577282347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541013,"discussion_content":"è¿æ¥å¤åˆ¶é›†çš„æ–¹å¼æœ‰é—®é¢˜ï¼Œå¯¼è‡´ä¸èƒ½å¤ç°è€å¸ˆçš„å®éªŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640230305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2281842,"avatar":"","nickname":"ä½ å¥½ï¼ŒJava","note":"","ucode":"4FA103B707B78D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343684,"discussion_content":"ç”¨3Té€£ä¸»ç¯€é»ï¼Œç¢ºå®šç„¡æ³•read from secondary","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611134489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1307184,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f2/30/960fbed7.jpg","nickname":"é‚£äº›å¹´Dç›˜é‡Œ","note":"","ucode":"BFF643E6A2E13A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332344,"discussion_content":"MongoDB server version: 4.2.3, mongo shell ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607161284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120298,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/2a/9c18a3c4.jpg","nickname":"wzp","note":"","ucode":"2C511B2755A1E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302880,"discussion_content":"ä¸¤ä¸ªä»èŠ‚ç‚¹éƒ½é”äº†ï¼Œä¸»èŠ‚ç‚¹ä½¿ç”¨db.test.find().readPref(&#34;secondary&#34;) æœ‰ä¸¤æ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599054848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2031099,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/vl03zfnk5BDF0rDNq2mYSxlNibZ18wCxQx9avW753a9PG4Q4ptopX1BMicNmnmcaFYvKWUEiaPgr0O15ia4Ffqnk2A/132","nickname":"Geek_6ccc2f","note":"","ucode":"81A6EA14B45CA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301717,"discussion_content":"è¿™ä¸ªé—®é¢˜è¿˜æ²¡æœ‰è§£å†³å—ï¼Œæˆ‘çš„ä¹Ÿæ˜¯ä¸¤æ¡æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598617906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1803177,"avatar":"","nickname":"david","note":"","ucode":"3E05713BC5CD5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298461,"discussion_content":"è€å¸ˆä»€ä¹ˆç‰ˆæœ¬å•Šï¼Œæˆ‘çš„ä¹Ÿæ˜¯å¯ä»¥æŸ¥çœ‹åˆ°å•Š \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597303077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241239,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/97/9c69ea5c.jpg","nickname":"èª ","note":"","ucode":"ED389558F141F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296690,"discussion_content":"æ˜¯ç‰ˆæœ¬çš„bugä¹ˆï¼Œæˆ‘ä¹Ÿé‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œæˆ‘çš„ç‰ˆæœ¬æ˜¯4.2.8","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596622646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1182802,"avatar":"https://static001.geekbang.org/account/avatar/00/12/0c/52/f25c3636.jpg","nickname":"é•¿è„–å­æ ‘","note":"","ucode":"D9090EF67EEB1B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":175948,"discussion_content":"ç‰ˆæœ¬ 4.2.3 ä½¿ç”¨ shell æŸ¥çš„, ä¸¤ä¸ªä»èŠ‚ç‚¹éƒ½æœ‰é”ä½, ä½†åœ¨ä¸»èŠ‚ç‚¹æ’å…¥ä¹‹å, readPref(&#34;secondary&#34;) å¯ä»¥è¯»å–åˆ°æ–°æ’å…¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582007788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243939,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fb/23/e5c346e7.jpg","nickname":"AAAAAAres","note":"","ucode":"B12540906635C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":157289,"discussion_content":"+1, compassæŸ¥ç¬¦åˆé¢„æœŸï¼ŒshellæŸ¥ä¸è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580464851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":3,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1359844,"avatar":"https://static001.geekbang.org/account/avatar/00/14/bf/e4/45758517.jpg","nickname":"hal","note":"","ucode":"98E625F7327FD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1243939,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fb/23/e5c346e7.jpg","nickname":"AAAAAAres","note":"","ucode":"B12540906635C7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":157495,"discussion_content":"ä½ çš„ç‰ˆæœ¬æ˜¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580481002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":157289,"ip_address":"","group_id":0},"score":157495,"extra":""},{"author":{"id":1984156,"avatar":"","nickname":"Geek_a4c5d3","note":"","ucode":"81817A9A311DA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1243939,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fb/23/e5c346e7.jpg","nickname":"AAAAAAres","note":"","ucode":"B12540906635C7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299944,"discussion_content":"compass æ€ä¹ˆæŒ‡å®šä»èŠ‚ç‚¹è¯»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597886284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":157289,"ip_address":"","group_id":0},"score":299944,"extra":""}]}]},{"had_liked":false,"id":163996,"user_name":"æ—ºæ—º","can_delete":false,"product_type":"c3","uid":1159196,"ip_address":"","ucode":"FE2CF90F446BFB","user_header":"https://static001.geekbang.org/account/avatar/00/11/b0/1c/2e30eeb8.jpg","comment_is_top":false,"comment_ctime":1576843312,"is_pvip":false,"replies":[{"id":62964,"content":"æœ‰è¿™ä¸ªå¯èƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577183953,"ip_address":"","comment_id":163996,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"é”å®š2ä¸ªsecondaryï¼Œprimaryä¸Šæ’å…¥{x:2}åï¼Œè§£é”å…¶ä¸­ä¸€ä¸ªsecondaryï¼Œç„¶ååœ¨primaryä¸Šç”¨find().readPref(&quot;secondary&quot;)è¯»å–æ—¶æ˜¯ä¸æ˜¯ä¹Ÿæœ‰å¯èƒ½è¯»å–ä¸åˆ°å‘¢ï¼Ÿ\nå› ä¸º2ä¸ªsecondaryï¼Œåªè§£é”äº†ä¸€ä¸ªï¼Œåªæœ‰ä¸€ä¸ªé“œé¼“è¿‡å»äº†ï¼Œå¦‚æœä»æ²¡æœ‰è§£é”æœªåŒæ­¥è¿‡å»çš„é‚£ä¸ªsecondaryä¸Šè¯»å–çš„è¯ï¼Œä¸æ˜¯è¿˜è¯»å–ä¸åˆ°{x:2}è¿™è®°å½•å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478610,"discussion_content":"æœ‰è¿™ä¸ªå¯èƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577183953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194524,"user_name":"DZZ","can_delete":false,"product_type":"c3","uid":1516167,"ip_address":"","ucode":"C8E4C4B089BCE2","user_header":"https://static001.geekbang.org/account/avatar/00/17/22/87/e7bd2acf.jpg","comment_is_top":false,"comment_ctime":1585065075,"is_pvip":false,"replies":[{"id":74321,"content":"ä¸èƒ½ã€‚å†™å…¥å¿…é¡»æ˜¯ä¸»èŠ‚ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1585221354,"ip_address":"","comment_id":194524,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"èšåˆæ“ä½œè¯­å¥å¦‚æœè®¾ç½®readpreference ä¸ºä»èŠ‚ç‚¹ï¼Œèšåˆä¸­å†â€™$outç”Ÿæˆæ–°çš„é›†åˆï¼Œè¿™æ ·èƒ½æ’å…¥åˆ°ä»èŠ‚ç‚¹å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488835,"discussion_content":"ä¸èƒ½ã€‚å†™å…¥å¿…é¡»æ˜¯ä¸»èŠ‚ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585221354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1516167,"avatar":"https://static001.geekbang.org/account/avatar/00/17/22/87/e7bd2acf.jpg","nickname":"DZZ","note":"","ucode":"C8E4C4B089BCE2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214649,"discussion_content":"å·²å®è·µï¼Œç¡®å®ä¸èƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585222339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165297,"user_name":"ğŸ‘» å°äºŒ","can_delete":false,"product_type":"c3","uid":1625463,"ip_address":"","ucode":"9EEA8553163270","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/77/b2ab5d44.jpg","comment_is_top":false,"comment_ctime":1577195619,"is_pvip":false,"replies":[{"id":65215,"content":"100ä¸ªuuidçš„å­—æ®µï¼Œå­—æ®µåéƒ½ä¸ä¸€æ ·å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1577971438,"ip_address":"","comment_id":165297,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œ é—®ä¸ªé—®é¢˜ï¼Œ mongoå¦‚æœå¤§é‡å­˜å…¥ä¸åŒå­—æ®µçš„æ•°æ®ï¼Œ ä¼šæœ‰é—®é¢˜å—ï¼Ÿ  æ¯”å¦‚æˆ‘å­˜å…¥100wæ¡ï¼Œ å­—æ®µæ˜¯uuidï¼Œ å”¯ä¸€çš„æ•°æ®ï¼Œ æ¯æ¡æœ‰100ä¸ªuuidçš„å­—æ®µï¼Œ è¿™æ ·ï¼Œ æ•´å¼ è¡¨åŠ èµ·æ¥å°±æœ‰ 1äº¿ä¸ªä¸åŒçš„å­—æ®µã€‚","like_count":1,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479111,"discussion_content":"100ä¸ªuuidçš„å­—æ®µï¼Œå­—æ®µåéƒ½ä¸ä¸€æ ·å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577971438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625463,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/77/b2ab5d44.jpg","nickname":"ğŸ‘» å°äºŒ","note":"","ucode":"9EEA8553163270","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":114440,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577972146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251550,"user_name":"Geek_32772e","can_delete":false,"product_type":"c3","uid":1446158,"ip_address":"","ucode":"2850EF64F4775F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoribOUgcicu1sOqZZVtPqpSDSS43vicxW0GesxQeBRjUC47CzulKSzYNj2aMg9YOZDdjPdAZxS3jNcQ/132","comment_is_top":false,"comment_ctime":1601666888,"is_pvip":false,"replies":[{"id":93806,"content":"ä¸æ”¯æŒè¿™ç§æ“ä½œï¼Œä½ éœ€è¦åœ¨ç¨‹åºé‡Œä½¿ç”¨APIå¦‚æœå¸Œæœ›å¯¹æŸä¸ªè¡¨é‡‡ç”¨ä¸åŒçš„è¯»å†™ç­–ç•¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1604037215,"ip_address":"","comment_id":251550,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"MongoDBå‚æ•°è¿æ¥æ–¹å¼æœ‰æ²¡æœ‰å¯¹äºæŸå¼ è¡¨è¿›è¡Œå‰¯æœ¬ä¼˜å…ˆè¯»å–çš„è®¾ç½®ï¼Ÿå› ä¸ºæˆ‘ä»¬çš„é…ç½®ä¸­æ˜¯åŒ…å«è¡¨åçš„URIï¼Œæˆ‘è¯•äº†ä¸‹ç›´æ¥åŠ è¡¨åæ˜¯è¯»å–ä¸åˆ°çš„","like_count":0,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506538,"discussion_content":"ä¸æ”¯æŒè¿™ç§æ“ä½œï¼Œä½ éœ€è¦åœ¨ç¨‹åºé‡Œä½¿ç”¨APIå¦‚æœå¸Œæœ›å¯¹æŸä¸ªè¡¨é‡‡ç”¨ä¸åŒçš„è¯»å†™ç­–ç•¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604037215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182468,"user_name":"è¶æ—©","can_delete":false,"product_type":"c3","uid":1031970,"ip_address":"","ucode":"949FB3AA250D80","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/22/26530e66.jpg","comment_is_top":false,"comment_ctime":1582792489,"is_pvip":false,"replies":[{"id":70944,"content":"4.0 ä¹‹å‰ä»èŠ‚ç‚¹å¯èƒ½ä¼šé˜»å¡ï¼Œåœ¨å†™å…¥å¾ˆå¤§çš„æƒ…å†µä¸‹ã€‚ä½ è¯´çš„æƒ…å†µè¿˜ä¸å¤ªæ¸…æ¥š","user_name":"ä½œè€…å›å¤","user_name_real":"è¿œèˆªçš„TJ å”å»ºæ³•","uid":1260017,"ctime":1583028167,"ip_address":"","comment_id":182468,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"æˆ‘å°è±¡ä¸­æœ‰ç‰ˆæœ¬çš„mongodbï¼Œåšè¯»å†™åˆ†ç¦»çš„æ—¶å€™ä¼šå¯¼è‡´ä¸»åº“æ—¶ä¸æ—¶å‡ºç°å†™å…¥æ…¢çš„æƒ…å†µï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1260017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/f1/6d18a4d1.jpg","nickname":"è¿œèˆªçš„TJ å”å»ºæ³•","note":"","ucode":"0719807390250A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485347,"discussion_content":"4.0 ä¹‹å‰ä»èŠ‚ç‚¹å¯èƒ½ä¼šé˜»å¡ï¼Œåœ¨å†™å…¥å¾ˆå¤§çš„æƒ…å†µä¸‹ã€‚ä½ è¯´çš„æƒ…å†µè¿˜ä¸å¤ªæ¸…æ¥š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583028167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287459,"user_name":"å¤§æ‡’è™«","can_delete":false,"product_type":"c3","uid":1440873,"ip_address":"","ucode":"51014C4A7074DA","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/69/02953435.jpg","comment_is_top":false,"comment_ctime":1617958089,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"shellè¿æ¥å¤åˆ¶é›†ï¼Œéœ€è¦è¿™ä¹ˆè¿mongo --host rs0&#47;127.0.0.1:28017,è¿™æ ·æ‰èƒ½å¤ç°å‡ºè€å¸ˆçš„ç»“æœï¼Œå…·ä½“å‚è§https:&#47;&#47;jira.mongodb.org&#47;browse&#47;SERVER-22289","like_count":1},{"had_liked":false,"id":263737,"user_name":"å®‰é™çš„å°æ°”æ³¡","can_delete":false,"product_type":"c3","uid":2314428,"ip_address":"","ucode":"61D50A59F3B938","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEL1kzELNkpAgMLag4ne9259ZjFZ1dhApP6u0f5j86NgvXVPmJmgNHJQVMEuVFDw3UsoopgcEhtSnw/132","comment_is_top":false,"comment_ctime":1606241360,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæˆ‘ä¹Ÿæ˜¯æŒ‰æ­¥éª¤å®éªŒäº†å¾ˆä¹…ï¼Œä¹Ÿçœ‹äº†å®˜æ–¹æ–‡æ¡£ï¼Œç‰ˆæœ¬åˆ‡æ¢è¿‡4.2.11å’Œ4.4.1ï¼Œä¹Ÿè¯•éªŒäº†è®¾ç½® db.getMongo().setReadPref(&#39;secondary&#39;)æˆ–è€…æŒ‰æ‚¨è¯´çš„æ–¹å¼è®¾ç½®ï¼Œåœ¨shellç¯å¢ƒä¸‹ã€‚     é€šè¿‡ä»£ç æŸ¥è¯¢secondaryï¼Œç¡®å®æŸ¥ä¸åˆ°ä¸»èŠ‚ç‚¹çš„æ•°æ®äº†ï¼Œæ²¡é—®é¢˜ï¼Œé€šè¿‡shellï¼Œåœ¨ä¸»èŠ‚ç‚¹ä¸Šdb.test.find().readPref(&quot;secondary&quot;)ï¼Œè¿˜æ˜¯èƒ½æŸ¥è¯¢åˆ°æ•°æ®ï¼Œç ”ç©¶äº†ä¸¤ä¸ªæ™šä¸Šï¼Œå®åœ¨æ²¡ææ‡‚ï¼Œè°¢è°¢äº†ï¼ï¼ï¼","like_count":1,"discussions":[{"author":{"id":2354474,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/UNC7eWZWvRyAPWUpIJicgZBWLNpkljMbgeaFVWU3QNmWgaibchc8aGFfAG7gWh7eghHSrtSuSqMDp2ibVnvE2eLJg/132","nickname":"Geek_a88948","note":"","ucode":"C7FF3099A180D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352283,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™æ ·ï¼Œmongo4.0.21 ä¸»èŠ‚ç‚¹ç”¨shellæŸ¥æ˜¯ä¸¤æ¡æ•°æ®ï¼Œåœ¨ä»£ç ä¸­ä½¿ç”¨é©±åŠ¨æŸ¥ï¼Œæ˜¯ä»èŠ‚ç‚¹æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614672483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":380278,"user_name":"æ¯›","can_delete":false,"product_type":"c3","uid":1104191,"ip_address":"åŒ—äº¬","ucode":"84C4B39145D9F9","user_header":"https://static001.geekbang.org/account/avatar/00/10/d9/3f/33c758df.jpg","comment_is_top":false,"comment_ctime":1693301187,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"æ„Ÿè§‰å¹¶ä¸æ˜¯äº‹åŠ¡å§ï¼Œäº‹åŠ¡çš„acidæœ‰ä¿è¯å—","like_count":0},{"had_liked":false,"id":336705,"user_name":"Julia.SQL","can_delete":false,"product_type":"c3","uid":2657631,"ip_address":"","ucode":"D5E9550547F451","user_header":"https://static001.geekbang.org/account/avatar/00/28/8d/5f/cfc12526.jpg","comment_is_top":false,"comment_ctime":1646301724,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040001,"comment_content":"æˆ‘é‡åˆ°ä¸€å€‹æƒ…æ³ï¼Œå·²è¨­å®šReadPreference.secondaryPreferred()ï¼Œä½†å¯¦éš›è§€å¯Ÿåˆ° Primary çš„QPSç¸½æ˜¯æœ€é«˜ï¼ŒPrimary ä¸»è¦çš„ operation æ˜¯ returnedã€‚\nç‰ˆæœ¬ï¼šv4.4.10\nè«‹å•æˆ‘å¯ä»¥å¦‚ä½•è§£é‡‹é€™å€‹æƒ…æ³ã€èª¿æ•´ï¼Ÿ\n\npublic MongoDatabase getMongoDatabaseForRead(String database) {\n    return getMongoClient() MongoClient\n             .getDatabase (database) MongoDatabase\n             .withReadConcern(ReadConcern.AVAILABLE)\n             .withReadPreference(ReadPreference.secondaryPreferred());\n}","like_count":0},{"had_liked":false,"id":328383,"user_name":"åˆ˜æ°¸è‡£","can_delete":false,"product_type":"c3","uid":2033098,"ip_address":"","ucode":"31426CE31CA514","user_header":"https://static001.geekbang.org/account/avatar/00/1f/05/ca/eefef69b.jpg","comment_is_top":false,"comment_ctime":1640697106,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"åˆ†æ¡¶ï¼ˆèˆªç­è®°å½•ï¼‰ã€åˆ—è½¬è¡Œï¼ˆä¸åŒåœ°åŒºçš„å‘è¡Œæ—¥æœŸï¼Œä¼˜åŒ–ç´¢å¼•é‡çº§ï¼‰ã€ç‰ˆæœ¬å­—æ®µï¼ˆåº”å¯¹å¤šç‰ˆæœ¬æƒ…å†µï¼Œæ–‡æ¡£æ¨¡å‹æ ¼å¼å¤ªå¤šï¼‰ã€è¿‘ä¼¼è®¡ç®—ï¼ˆç”¨äºå¯¹ç²¾åº¦è¦æ±‚ä¸é«˜çš„åœºæ™¯ï¼Œæ¯”å¦‚ç»Ÿè®¡ç½‘é¡µç‚¹å‡»æµè§ˆï¼‰ã€é¢„èšåˆå­—æ®µï¼ˆä¸šç»©æ’åï¼Œæ¸¸æˆæ’åï¼Œå•†å“ç»Ÿè®¡ç­‰ç²¾ç¡®ç»Ÿè®¡ï¼‰ï¼Œ","like_count":0},{"had_liked":false,"id":278166,"user_name":"Geek_7154af","can_delete":false,"product_type":"c3","uid":2082306,"ip_address":"","ucode":"E738DC8F4C93C0","user_header":"","comment_is_top":false,"comment_ctime":1612781626,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæ˜¯å¦å¯ä»¥é€šè¿‡readPreferenceå®ç°è¯»å†™åˆ†ç¦»çš„ä½œç”¨ï¼Ÿ\nä¹Ÿå°±æ˜¯å¦ä¸éœ€è¦å†ä¸ºmongoå¤åˆ¶é›†åšæµ®äº‘VIPæ“ä½œäº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":239714,"user_name":"èª ","can_delete":false,"product_type":"c3","uid":1241239,"ip_address":"","ucode":"ED389558F141F8","user_header":"https://static001.geekbang.org/account/avatar/00/12/f0/97/9c69ea5c.jpg","comment_is_top":false,"comment_ctime":1596622036,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"åœ¨ä¸»èŠ‚ç‚¹æ‰§è¡Œdb.test.find().readPref(&quot;secondary&quot;)æ˜¯ä¸¤æ¡æ•°æ®ï¼Œåœ¨secondaryèŠ‚ç‚¹ä¸Šæ‰§è¡Œdb.test.find().readPref(&quot;primary&quot;)æç¤ºï¼š&quot;errmsg&quot; : &quot;not master and slaveOk=false&quot;ï¼Œä½†æ˜¯åœ¨secondaryèŠ‚ç‚¹ä¸Šæ‰§è¡Œdb.test.find().readPref(&quot;secondary&quot;)æ˜¯å¯ä»¥æŸ¥åˆ°1æ¡æ•°æ®","like_count":0,"discussions":[{"author":{"id":2459867,"avatar":"https://static001.geekbang.org/account/avatar/00/25/88/db/48366dc1.jpg","nickname":"äººç”Ÿå°±æ˜¯æ¢¦","note":"","ucode":"4E1B3C51FB9CB8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351826,"discussion_content":"åŒé—®\nError: error: {\n\t&#34;operationTime&#34; : Timestamp(1614479205, 1),\n\t&#34;ok&#34; : 0,\n\t&#34;errmsg&#34; : &#34;not master and slaveOk=false&#34;,\n\t&#34;code&#34; : 13435,\n\t&#34;codeName&#34; : &#34;NotPrimaryNoSecondaryOk&#34;,\n\t&#34;$clusterTime&#34; : {\n\t\t&#34;clusterTime&#34; : Timestamp(1614479205, 1),\n\t\t&#34;signature&#34; : {\n\t\t\t&#34;hash&#34; : BinData(0,&#34;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&#34;),\n\t\t\t&#34;keyId&#34; : NumberLong(0)\n\t\t}\n\t}\n}\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614479343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":213213,"user_name":"è‘«èŠ¦å¨ƒ-Dear","can_delete":false,"product_type":"c3","uid":1743582,"ip_address":"","ucode":"606C2E1D80B612","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9a/de/abd008f3.jpg","comment_is_top":false,"comment_ctime":1588332566,"is_pvip":false,"replies":null,"discussion_count":4,"race_medal":0,"score":3,"product_id":100040001,"comment_content":"ä¸¤ä¸ªä»èŠ‚ç‚¹éƒ½é”ä½äº†ï¼Œä½†æ˜¯ä¸»èŠ‚ç‚¹æ‰§è¡Œdb.test.find().readPref(&quot;secondary&quot;)æ˜¯ä¸¤æ¡æ•°æ®","like_count":0,"discussions":[{"author":{"id":2556093,"avatar":"https://static001.geekbang.org/account/avatar/00/27/00/bd/a55237a0.jpg","nickname":"gsh","note":"","ucode":"616A4F7AAEC8AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566276,"discussion_content":"mongo mongodb://root1:123456@10.0.0.29:28017,10.0.0.30:28017,10.0.0.31:28017/?replicaSet=my_repl  ä½¿ç”¨æ­¤æ–¹å¼é“¾æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650638239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2485664,"avatar":"https://static001.geekbang.org/account/avatar/00/25/ed/a0/cc89c128.jpg","nickname":"å¤§è–","note":"","ucode":"5FD991D883BE78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552348,"discussion_content":"ä½ åº”è¯¥æ˜¯åœ¨ä¸»èŠ‚ç‚¹è·‘çš„å§ï¼Œæˆ‘æ²¡æŸ¥åˆ°æ–‡æ¡£ï¼Œä½†æ˜¯æ€€ç–‘ä¸»èŠ‚çš„shellé‡Œç›´æ¥æŸ¥ï¼Œæœ€åå‘ç°ä»èŠ‚ç‚¹æ²¡æœ‰è¿˜æ˜¯åˆ°ä¸»èŠ‚ç‚¹å»æŸ¥äº†ã€‚å¦‚æœæ˜¯è¿œç¨‹è¿æ¥å»æŸ¥çš„è¯ï¼Œdb.test.find().readPref(&#34;secondary&#34;)æ˜¯æŸ¥è¯¢ä¸åˆ°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645425324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1803177,"avatar":"","nickname":"david","note":"","ucode":"3E05713BC5CD5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298459,"discussion_content":"æˆ‘ä¹Ÿæ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597303014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241239,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/97/9c69ea5c.jpg","nickname":"èª ","note":"","ucode":"ED389558F141F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296685,"discussion_content":"è¯·é—®ä½ çš„é—®é¢˜è§£å†³äº†ä¹ˆï¼Œæˆ‘çš„ä¹Ÿæ˜¯ä¸»èŠ‚ç‚¹æ‰§è¡Œdb.test.find().readPref(&#34;secondary&#34;)æ˜¯ä¸¤æ¡æ•°æ®ï¼Œåœ¨secondaryèŠ‚ç‚¹ä¸Šæ‰§è¡Œdb.test.find().readPref(&#34;primary&#34;)æç¤ºï¼š&#34;errmsg&#34; : &#34;not master and slaveOk=false&#34;ï¼Œä½†æ˜¯åœ¨secondaryèŠ‚ç‚¹ä¸Šæ‰§è¡Œdb.test.find().readPref(&#34;secondary&#34;)æ˜¯å¯ä»¥æŸ¥åˆ°1æ¡æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596622009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}