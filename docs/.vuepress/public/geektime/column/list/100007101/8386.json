{"id":8386,"title":"第6讲 | 交换机与VLAN：办公室太复杂，我要回学校","content":"<p>上一次，我们在宿舍里组建了一个本地的局域网LAN，可以愉快地玩游戏了。这是一个非常简单的场景，因为只有一台交换机，电脑数目很少。今天，让我们切换到一个稍微复杂一点的场景，办公室。</p><h2>拓扑结构是怎么形成的？</h2><p>我们常见到的办公室大多是一排排的桌子，每个桌子都有网口，一排十几个座位就有十几个网口，一个楼层就会有几十个甚至上百个网口。如果算上所有楼层，这个场景自然比你宿舍里的复杂多了。具体哪里复杂呢？我来给你具体讲解。</p><p>首先，这个时候，一个交换机肯定不够用，需要多台交换机，交换机之间连接起来，就形成一个稍微复杂的<strong>拓扑结构</strong>。</p><p>我们先来看<strong>两台交换机</strong>的情形。两台交换机连接着三个局域网，每个局域网上都有多台机器。如果机器1只知道机器4的IP地址，当它想要访问机器4，把包发出去的时候，它必须要知道机器4的MAC地址。</p><p><img src=\"https://static001.geekbang.org/resource/image/08/29/0867321c36cc52bd3dd4d7622583fa29.jpg?wh=2866*2176\" alt=\"\"></p><p>于是机器1发起广播，机器2收到这个广播，但是这不是找它的，所以没它什么事。交换机A一开始是不知道任何拓扑信息的，在它收到这个广播后，采取的策略是，除了广播包来的方向外，它还要转发给其他所有的网口。于是机器3也收到广播信息了，但是这和它也没什么关系。</p><p>当然，交换机B也是能够收到广播信息的，但是这时候它也是不知道任何拓扑信息的，因而也是进行广播的策略，将包转发到局域网三。这个时候，机器4和机器5都收到了广播信息。机器4主动响应说，这是找我的，这是我的MAC地址。于是一个ARP请求就成功完成了。</p><!-- [[[read_end]]] --><p>在上面的过程中，交换机A和交换机B都是能够学习到这样的信息：机器1是在左边这个网口的。当了解到这些拓扑信息之后，情况就好转起来。当机器2要访问机器1的时候，机器2并不知道机器1的MAC地址，所以机器2会发起一个ARP请求。这个广播消息会到达机器1，也同时会到达交换机A。这个时候交换机A已经知道机器1是不可能在右边的网口的，所以这个广播信息就不会广播到局域网二和局域网三。</p><p>当机器3要访问机器1的时候，也需要发起一个广播的ARP请求。这个时候交换机A和交换机B都能够收到这个广播请求。交换机A当然知道主机A是在左边这个网口的，所以会把广播消息转发到局域网一。同时，交换机B收到这个广播消息之后，由于它知道机器1是不在右边这个网口的，所以不会将消息广播到局域网三。</p><h2>如何解决常见的环路问题？</h2><p>这样看起来，两台交换机工作得非常好。随着办公室越来越大，交换机数目肯定越来越多。当整个拓扑结构复杂了，这么多网线，绕过来绕过去，不可避免地会出现一些意料不到的情况。其中常见的问题就是<strong>环路问题</strong>。</p><p>例如这个图，当两个交换机将两个局域网同时连接起来的时候。你可能会觉得，这样反而有了高可用性。但是却不幸地出现了环路。出现了环路会有什么结果呢？</p><p><img src=\"https://static001.geekbang.org/resource/image/1f/ea/1f909508a8253d4842ffe962883421ea.jpg?wh=3001*1591\" alt=\"\"></p><p>我们来想象一下机器1访问机器2的过程。一开始，机器1并不知道机器2的MAC地址，所以它需要发起一个ARP的广播。广播到达机器2，机器2会把MAC地址返回来，看起来没有这两个交换机什么事情。</p><p>但是问题来了，这两个交换机还是都能够收到广播包的。交换机A一开始是不知道机器2在哪个局域网的，所以它会把广播消息放到局域网二，在局域网二广播的时候，交换机B右边这个网口也是能够收到广播消息的。交换机B会将这个广播信息发送到局域网一。局域网一的这个广播消息，又会到达交换机A左边的这个接口。交换机A这个时候还是不知道机器2在哪个局域网，于是将广播包又转发到局域网二。左转左转左转，好像是个圈哦。</p><p>可能有人会说，当两台交换机都能够逐渐学习到拓扑结构之后，是不是就可以了？</p><p>别想了，压根儿学不会的。机器1的广播包到达交换机A和交换机B的时候，本来两个交换机都学会了机器1是在局域网一的，但是当交换机A将包广播到局域网二之后，交换机B右边的网口收到了来自交换机A的广播包。根据学习机制，这彻底损坏了交换机B的三观，刚才机器1还在左边的网口呢，怎么又出现在右边的网口呢？哦，那肯定是机器1换位置了，于是就误会了，交换机B就学会了，机器1是从右边这个网口来的，把刚才学习的那一条清理掉。同理，交换机A右边的网口，也能收到交换机B转发过来的广播包，同样也误会了，于是也学会了，机器1从右边的网口来，不是从左边的网口来。</p><p>然而当广播包从左边的局域网一广播的时候，两个交换机再次刷新三观，原来机器1是在左边的，过一会儿，又发现不对，是在右边的，过一会，又发现不对，是在左边的。</p><p>这还是一个包转来转去，每台机器都会发广播包，交换机转发也会复制广播包，当广播包越来越多的时候，按照上一节讲过一个共享道路的算法，也就是路会越来越堵，最后谁也别想走。所以，必须有一个方法解决环路的问题，怎么破除环路呢？</p><h2>STP协议中那些难以理解的概念</h2><p>在数据结构中，有一个方法叫做<strong>最小生成树</strong>。有环的我们常称为<strong>图</strong>。将图中的环破了，就生成了<strong>树</strong>。在计算机网络中，生成树的算法叫作<strong>STP</strong>，全称<strong>Spanning Tree Protocol</strong>。</p><p>STP协议比较复杂，一开始很难看懂，但是其实这是一场血雨腥风的武林比武或者华山论剑，最终决出五岳盟主的方式。</p><p><img src=\"https://static001.geekbang.org/resource/image/47/23/47baa69073b38357e0ae3f88ff74dd23.jpg?wh=3623*2579\" alt=\"\"></p><p>在STP协议里面有很多概念，译名就非常拗口，但是我一作比喻，你很容易就明白了。</p><ul>\n<li>\n<p><strong>Root Bridge</strong>，也就是<strong>根交换机</strong>。这个比较容易理解，可以比喻为“掌门”交换机，是某棵树的老大，是掌门，最大的大哥。</p>\n</li>\n<li>\n<p><strong>Designated Bridges</strong>，有的翻译为<strong>指定交换机</strong>。这个比较难理解，可以想像成一个“小弟”，对于树来说，就是一棵树的树枝。所谓“指定”的意思是，我拜谁做大哥，其他交换机通过这个交换机到达根交换机，也就相当于拜他做了大哥。这里注意是树枝，不是叶子，因为叶子往往是主机。</p>\n</li>\n<li>\n<p><strong>Bridge Protocol Data Units （BPDU）</strong> ，<strong>网桥协议数据单元</strong>。可以比喻为“相互比较实力”的协议。行走江湖，比的就是武功，拼的就是实力。当两个交换机碰见的时候，也就是相连的时候，就需要互相比一比内力了。BPDU只有掌门能发，已经隶属于某个掌门的交换机只能传达掌门的指示。</p>\n</li>\n<li>\n<p><strong>Priority Vector</strong>，<strong>优先级向量</strong>。可以比喻为实力 （值越小越牛）。实力是啥？就是一组ID数目，[Root Bridge ID, Root Path Cost, Bridge ID, and Port ID]。为什么这样设计呢？这是因为要看怎么来比实力。先看Root Bridge ID。拿出老大的ID看看，发现掌门一样，那就是师兄弟；再比Root Path Cost，也即我距离我的老大的距离，也就是拿和掌门关系比，看同一个门派内谁和老大关系铁；最后比Bridge ID，比我自己的ID，拿自己的本事比。</p>\n</li>\n</ul><h2>STP的工作过程是怎样的？</h2><p>接下来，我们来看STP的工作过程。</p><p>一开始，江湖纷争，异常混乱。大家都觉得自己是掌门，谁也不服谁。于是，所有的交换机都认为自己是掌门，每个网桥都被分配了一个ID。这个ID里有管理员分配的优先级，当然网络管理员知道哪些交换机贵，哪些交换机好，就会给它们分配高的优先级。这种交换机生下来武功就很高，起步就是乔峰。</p><p><img src=\"https://static001.geekbang.org/resource/image/66/2b/66237be156bea81a801dca8d507c1e2b.jpg?wh=1655*1376\" alt=\"\"></p><p>既然都是掌门，互相都连着网线，就互相发送BPDU来比功夫呗。这一比就发现，有人是岳不群，有人是封不平，赢的接着当掌门，输的就只好做小弟了。当掌门的还会继续发BPDU，而输的人就没有机会了。它们只有在收到掌门发的BPDU的时候，转发一下，表示服从命令。</p><p><img src=\"https://static001.geekbang.org/resource/image/5d/47/5da50b7e328ea3cf8f90430f1deb3f47.jpg?wh=1655*1379\" alt=\"\"></p><p>数字表示优先级。就像这个图，5和6碰见了，6的优先级低，所以乖乖做小弟。于是一个小门派形成，5是掌门，6是小弟。其他诸如1-7、2-8、3-4这样的小门派，也诞生了。于是江湖出现了很多小的门派，小的门派，接着合并。</p><p>合并的过程会出现以下四种情形，我分别来介绍。</p><h3>情形一：掌门遇到掌门</h3><p>当5碰到了1，掌门碰见掌门，1觉得自己是掌门，5也刚刚跟别人PK完成为掌门。这俩掌门比较功夫，最终1胜出。于是输掉的掌门5就会率领所有的小弟归顺。结果就是1成为大掌门。</p><p><img src=\"https://static001.geekbang.org/resource/image/fb/56/fb0e19a14e00b5825dac11d359ffe056.jpg?wh=1655*1379\" alt=\"\"></p><h3>情形二：同门相遇</h3><p>同门相遇可以是掌门与自己的小弟相遇，这说明存在“环”了。这个小弟已经通过其他门路拜在你门下，结果你还不认识，就PK了一把。结果掌门发现这个小弟功夫不错，不应该级别这么低，就把它招到门下亲自带，那这个小弟就相当于升职了。</p><p>我们再来看，假如1和6相遇。6原来就拜在1的门下，只不过6的上司是5，5的上司是1。1发现，6距离我才只有2，比从5这里过来的5（=4+1）近多了，那6就直接汇报给我吧。于是，5和6分别汇报给1。</p><p><img src=\"https://static001.geekbang.org/resource/image/1e/d8/1ef3c9fb5b7d386c519402202233a8d8.jpg?wh=1655*1379\" alt=\"\"></p><p>同门相遇还可以是小弟相遇。这个时候就要比较谁和掌门的关系近，当然近的当大哥。刚才5和6同时汇报给1了，后来5和6在比较功夫的时候发现，5你直接汇报给1距离是4，如果5汇报给6再汇报给1，距离只有2+1=3，所以5干脆拜6为上司。</p><h3>情形三：掌门与其他帮派小弟相遇</h3><p>小弟拿本帮掌门和这个掌门比较，赢了，这个掌门拜入门来。输了，会拜入新掌门，并且逐渐拉拢和自己连接的兄弟，一起弃暗投明。</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/da/8e852604ac81ab453115470edb9e70da.jpg?wh=1655*1379\" alt=\"\"></p><p>例如，2和7相遇，虽然7是小弟，2是掌门。就个人武功而言，2比7强，但是7的掌门是1，比2牛，所以没办法，2要拜入7的门派，并且连同自己的小弟都一起拜入。</p><h3>情形四：不同门小弟相遇</h3><p>各自拿掌门比较，输了的拜入赢的门派，并且逐渐将与自己连接的兄弟弃暗投明。<br>\n<img src=\"https://static001.geekbang.org/resource/image/fd/bf/fdab777fb2f69666e1fd5d838278b1bf.jpg?wh=1655*1379\" alt=\"\"></p><p>例如，5和4相遇。虽然4的武功好于5，但是5的掌门是1，比4牛，于是4拜入5的门派。后来当3和4相遇的时候，3发现4已经叛变了，4说我现在老大是1，比你牛，要不你也来吧，于是3也拜入1。</p><p>最终，生成一棵树，武林一统，天下太平。但是天下大势，分久必合，合久必分，天下统一久了，也会有相应的问题。</p><h3>如何解决广播问题和安全问题？</h3><p>毕竟机器多了，交换机也多了，就算交换机比Hub智能一些，但是还是难免有广播的问题，一大波机器，相关的部门、不相关的部门，广播一大堆，性能就下来了。就像一家公司，创业的时候，一二十个人，坐在一个会议室，有事情大家讨论一下，非常方便。但是如果变成了50个人，全在一个会议室里面吵吵，就会乱得不得了。</p><p>你们公司有不同的部门，有的部门需要保密的，比如人事部门，肯定要讨论升职加薪的事儿。由于在同一个广播域里面，很多包都会在一个局域网里面飘啊飘，碰到了一个会抓包的程序员，就能抓到这些包，如果没有加密，就能看到这些敏感信息了。还是上面的例子，50个人在一个会议室里面七嘴八舌地讨论，其中有两个HR，那他们讨论的问题，肯定被其他人偷偷听走了。</p><p>那咋办，分部门，分会议室呗。那我们就来看看怎么分。</p><p>有两种分的方法，一个是<strong>物理隔离</strong>。每个部门设一个单独的会议室，对应到网络方面，就是每个部门有单独的交换机，配置单独的子网，这样部门之间的沟通就需要路由器了。路由器咱们还没讲到，以后再说。这样的问题在于，有的部门人多，有的部门人少。人少的部门慢慢人会变多，人多的部门也可能人越变越少。如果每个部门有单独的交换机，口多了浪费，少了又不够用。</p><p>另外一种方式是<strong>虚拟隔离</strong>，就是用我们常说的<strong>VLAN</strong>，或者叫<strong>虚拟局域网</strong>。使用VLAN，一个交换机上会连属于多个局域网的机器，那交换机怎么区分哪个机器属于哪个局域网呢？<br>\n<img src=\"https://static001.geekbang.org/resource/image/ba/60/ba720f6988558f95c381f4deaab11660.jpg?wh=2066*1583\" alt=\"\"></p><p>我们只需要在原来的二层的头上加一个TAG，里面有一个VLAN ID，一共12位。为什么是12位呢？因为12位可以划分4096个VLAN。这样是不是还不够啊。现在的情况证明，目前云计算厂商里面绝对不止4096个用户。当然每个用户需要一个VLAN了啊，怎么办呢，这个我们在后面的章节再说。</p><p>如果我们买的交换机是支持VLAN的，当这个交换机把二层的头取下来的时候，就能够识别这个VLAN ID。这样只有相同VLAN的包，才会互相转发，不同VLAN的包，是看不到的。这样广播问题和安全问题就都能够解决了。<br>\n<img src=\"https://static001.geekbang.org/resource/image/5c/4a/5c207a6e2c1c9881823b04e648f4ba4a.jpg?wh=2593*1873\" alt=\"\"></p><p>我们可以设置交换机每个口所属的VLAN。如果某个口坐的是程序员，他们属于VLAN 10；如果某个口坐的是人事，他们属于VLAN 20；如果某个口坐的是财务，他们属于VLAN 30。这样，财务发的包，交换机只会转发到VLAN 30的口上。程序员啊，你就监听VLAN 10吧，里面除了代码，啥都没有。</p><p>而且对于交换机来讲，每个VLAN的口都是可以重新设置的。一个财务走了，把他所在座位的口从VLAN 30移除掉，来了一个程序员，坐在财务的位置上，就把这个口设置为VLAN 10，十分灵活。</p><p>有人会问交换机之间怎么连接呢？将两个交换机连接起来的口应该设置成什么VLAN呢？对于支持VLAN的交换机，有一种口叫作<strong>Trunk口</strong>。它可以转发属于任何VLAN的口。交换机之间可以通过这种口相互连接。</p><p>好了，解决这么多交换机连接在一起的问题，办公室的问题似乎搞定了。然而这只是一般复杂的场景，因为你能接触到的网络，到目前为止，不管是你的台式机，还是笔记本所连接的网络，对于带宽、高可用等都要求不高。就算出了问题，一会儿上不了网，也不会有什么大事。</p><p>我们在宿舍、学校或者办公室，经常会访问一些网站，这些网站似乎永远不会“挂掉”。那是因为这些网站都生活在一个叫做数据中心的地方，那里的网络世界更加复杂。在后面的章节，我会为你详细讲解。</p><h2>小结</h2><p>好了，这节就到这里，我们这里来总结一下：</p><ul>\n<li>当交换机的数目越来越多的时候，会遭遇环路问题，让网络包迷路，这就需要使用STP协议，通过华山论剑比武的方式，将有环路的图变成没有环路的树，从而解决环路问题。</li>\n<li>交换机数目多会面临隔离问题，可以通过VLAN形成虚拟局域网，从而解决广播问题和安全问题。</li>\n</ul><p>最后，给你留两个思考题。</p><ol>\n<li>STP协议能够很好地解决环路问题，但是也有它的缺点，你能举几个例子吗？</li>\n<li>在一个比较大的网络中，如果两台机器不通，你知道应该用什么方式调试吗？</li>\n</ol><p>欢迎你留言和我讨论。趣谈网络协议，我们下期见！</p>","neighbors":{"left":{"article_title":"第5讲 | 从物理层到MAC层：如何在宿舍里自己组网玩联机游戏？","id":8094},"right":{"article_title":"第7讲 | ICMP与ping：投石问路的侦察兵","id":8445}},"comments":[{"had_liked":false,"id":10655,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":true,"comment_ctime":1527640887,"is_pvip":true,"replies":[{"id":"3394","content":"赞，我以为不会有人问这个问题的，哈哈，老的局域网都是连到线上的，所以延续了这个图，为了准确，这里面中间的局域网可以认为是一个非直连的，例如中间隐藏了交换机等细节的，为了说明这个理论而简化","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527646902,"ip_address":"","comment_id":10655,"utype":1}],"discussion_count":15,"race_medal":0,"score":"9.2233730648795996e+18","product_id":100007101,"comment_content":"第一张图中，机器三是如何同时链接两台交换机？","like_count":240,"discussions":[{"author":{"id":1507640,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/38/5daf2cfb.jpg","nickname":"吴军旗^_^","note":"","ucode":"5760CE31AE3FA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":694,"discussion_content":"我也一直有这个问题， 哈哈， 一直想不通，我想肯定是隐藏了hub, 看了评论区，果然是，哈哈","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1561967973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1635932,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKSEVQdSoW2SwDic2U3uIibsa1bH3qSSzCvYTN5xHC5ppGDS2DBxL1KcbuxZ6Ez6kyOGj1F4toiaiazBA/132","nickname":"PeiHongbing","note":"","ucode":"F115AD8740B0DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288658,"discussion_content":"我看到这里也思考过，衔接前文，我想应该是Hub，或者我可以想象成机器3具有双网卡。","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1593833619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":254912,"discussion_content":"我是小白，至今觉的没问题……","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1588347010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981613,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/8Dj4ugujXwY24G8pcpgDFGiciarXetG3ItQ4M9mSQMLyRdRRXEXXJVfib48mGUQAu87QcvImwyJIVJlEFeEguV44w/132","nickname":"Geek_ac7784","note":"","ucode":"62F0E5E6D6F4BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270783,"discussion_content":"我也想到这个问题，想了一会就知道应该是集线器hub。上节课讲的宿舍里3台电脑用hub连接的例子。多个电脑组成一个lan。lan可能由多个hub口连接，其中两个hub再连接不同的交换机就行了。应该是这样。","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1590053651,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1486895,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b0/2f/e2096905.jpg","nickname":"马成","note":"","ucode":"664F2BAA2E0F0B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213,"discussion_content":"可以把LAN节点那个看出是集线器，两个交换机和机器三都是连接到集线器上的","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1561285909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2235191,"avatar":"https://static001.geekbang.org/account/avatar/00/22/1b/37/9a1a5bfa.jpg","nickname":"梁召峰","note":"","ucode":"22E713C5C1F489","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353707,"discussion_content":"什么是“这里面中间的局域网可以认为是一个非直连的”","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1615194161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1503340,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKU0MC8lDhUl8Z7kGVFRMUxK9iaBeKDSnhJ5mgD1lCzvXibjlDDicjeHeBfMyEttibREvG9BUpOeNHQbg/132","nickname":"Geek_4c94d2","note":"","ucode":"B4A037EBAA2D21","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36289,"discussion_content":"如果有两个网卡。就可以直接连了","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1571359439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2235191,"avatar":"https://static001.geekbang.org/account/avatar/00/22/1b/37/9a1a5bfa.jpg","nickname":"梁召峰","note":"","ucode":"22E713C5C1F489","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353708,"discussion_content":"很多表述我听着这么费解呢？","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1615194176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2235191,"avatar":"https://static001.geekbang.org/account/avatar/00/22/1b/37/9a1a5bfa.jpg","nickname":"梁召峰","note":"","ucode":"22E713C5C1F489","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353706,"discussion_content":"什么是“老的局域网都是连到线上的”","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1615194116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418553,"discussion_content":"赞，我以为不会有人问这个问题的，哈哈，老的局域网都是连到线上的，所以延续了这个图，为了准确，这里面中间的局域网可以认为是一个非直连的，例如中间隐藏了交换机等细节的，为了说明这个理论而简化","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1527646902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2667580,"avatar":"https://static001.geekbang.org/account/avatar/00/28/b4/3c/e4a08d98.jpg","nickname":"Janus Pen","note":"","ucode":"70B3F972739278","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545390,"discussion_content":"那也就是图2也是有问题的咯，","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641947576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1350812,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9c/9c/e02a0daf.jpg","nickname":"运斤成风","note":"","ucode":"BAFF69C29FDFA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538713,"discussion_content":"现在都不用集线器了，为什么不从现在的情况去讲解呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639491347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","nickname":"多选参数","note":"","ucode":"B2294D80AB075F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407374,"discussion_content":"就是把中间那个 lan 看成 Hub","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634994083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153933,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9b/8d/154dff81.jpg","nickname":"hellochenpro","note":"","ucode":"97A896D0ABD22B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390108,"discussion_content":"中间就是逻辑上把它看成一个网络，屏蔽IP层以外的差异，这样是不影响分析。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629676470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200857,"discussion_content":"中间是 集线器。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583730167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10630,"user_name":"narry","can_delete":false,"product_type":"c1","uid":1033576,"ip_address":"","ucode":"B8010C1DE39D08","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/68/7afb7304.jpg","comment_is_top":false,"comment_ctime":1527638394,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"830456326522","product_id":100007101,"comment_content":"stp中如果有掌门死掉了，又得全部重选一次，用的时间比较长，期间网络就会中断的","like_count":194,"discussions":[{"author":{"id":1129610,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3c/8a/900ca88a.jpg","nickname":"test","note":"","ucode":"C57A175CBC6547","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304396,"discussion_content":"继承人提前选好","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1599563699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015812,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/04/e6989d2a.jpg","nickname":"极客时间攻城狮","note":"","ucode":"E279553F00309F","race_medal":1,"user_type":8,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293259,"discussion_content":"666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595493966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10700,"user_name":"杨武刚@纷享销客","can_delete":false,"product_type":"c1","uid":1138050,"ip_address":"","ucode":"2D88BAA5BEBA65","user_header":"https://static001.geekbang.org/account/avatar/00/11/5d/82/39491fa6.jpg","comment_is_top":false,"comment_ctime":1527655254,"is_pvip":false,"replies":[{"id":"3420","content":"谢谢","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527683676,"ip_address":"","comment_id":10700,"utype":1}],"discussion_count":2,"race_medal":0,"score":"435319352150","product_id":100007101,"comment_content":"老师的这个比喻让我这个门外汉听得很爽，化繁为简，赞一个，希望老师以后多用比喻","like_count":101,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418569,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527683676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015812,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/04/e6989d2a.jpg","nickname":"极客时间攻城狮","note":"","ucode":"E279553F00309F","race_medal":1,"user_type":8,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293263,"discussion_content":"嗯嗯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595494164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10889,"user_name":"硅谷居士","can_delete":false,"product_type":"c1","uid":1018463,"ip_address":"","ucode":"BD3D3BA142F280","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/5f/c60d0ffe.jpg","comment_is_top":false,"comment_ctime":1527732061,"is_pvip":false,"replies":[{"id":"3446","content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527743250,"ip_address":"","comment_id":10889,"utype":1}],"discussion_count":1,"race_medal":0,"score":"366599952221","product_id":100007101,"comment_content":"1. STP 对于跨地域甚至跨国组织的网络支持，就很难做了，计算量摆着呢。<br><br>2. ping 加抓包工具，如 wireshark","like_count":86,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418630,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527743250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10624,"user_name":"iLeGeND","can_delete":false,"product_type":"c1","uid":1055475,"ip_address":"","ucode":"4055A628A6E97C","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/f3/41d5ba7d.jpg","comment_is_top":false,"comment_ctime":1527636953,"is_pvip":false,"replies":[{"id":"3384","content":"如果是开发，一般可能接触到的是传输层，但是一旦往底层学，这些知识是必须的。对于比喻的事情呢？当前学一门科学，最本质的是去看最原始的文档，表达严谨，论文一样，但是上来门槛比较高，所以做个比喻让人容易理解，建议对着图看一下，这个比喻我其实想了好久，内部培训同事的时候是讲的明白的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527645396,"ip_address":"","comment_id":10624,"utype":1}],"discussion_count":14,"race_medal":0,"score":"340830053337","product_id":100007101,"comment_content":"第一:怎么感觉像培训网管呢<br>第二:有些东西 不适合做比喻 掌门那块不是到在讲什么 太乱了","like_count":80,"discussions":[{"author":{"id":1453696,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2e/80/825426e0.jpg","nickname":"绍清","note":"","ucode":"4B6D8B964691A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62635,"discussion_content":"我反而觉得讲的特别好，感谢老师，这让我很清晰了解到了我们接触的网络大概的样子，以及各个设备之间是怎么工作的跟什么协议是用来解决什么问题的。","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1574856320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1079634,"avatar":"https://static001.geekbang.org/account/avatar/00/10/79/52/af632a6c.jpg","nickname":"陈熹荣","note":"","ucode":"B07C83A8020DC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39861,"discussion_content":"我也觉得，越讲越乱","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1572004428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228195,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bd/a3/a9dfb238.jpg","nickname":"lw","note":"","ucode":"CC94D65F4B86C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327744,"discussion_content":"如果你有数据结构和算法知识,学一下图相关的算法.就能明白是什么意思了.","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1605931353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418544,"discussion_content":"如果是开发，一般可能接触到的是传输层，但是一旦往底层学，这些知识是必须的。对于比喻的事情呢？当前学一门科学，最本质的是去看最原始的文档，表达严谨，论文一样，但是上来门槛比较高，所以做个比喻让人容易理解，建议对着图看一下，这个比喻我其实想了好久，内部培训同事的时候是讲的明白的","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1527645396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2017732,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/c9/c4/0eefd3b4.jpg","nickname":"张宁","note":"","ucode":"9C353E37D57E4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552290,"discussion_content":"我实话，我原先是知道spanning tree的，也自己写过，但看完比喻，我懵了。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1645373991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1409705,"avatar":"https://static001.geekbang.org/account/avatar/00/15/82/a9/5c64c6b0.jpg","nickname":"苏木春夏冬","note":"","ucode":"4D19AB2AEC9C2E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210967,"discussion_content":"讲的挺好的，我从第一节开始看不懂，到现在已经能慢慢跟上，基本能懂了。看不懂建议多看几遍","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1584796025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1245504,"avatar":"https://static001.geekbang.org/account/avatar/00/13/01/40/a203a3b9.jpg","nickname":"爱学习不害怕","note":"","ucode":"BE325C02E4C92F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223867,"discussion_content":"掌门的比喻第一次看挺懵的，又看了两遍后恍然大悟。之前没学这么底层，现在有时间想多学习","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586259542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2489054,"avatar":"https://static001.geekbang.org/account/avatar/00/25/fa/de/0152aa04.jpg","nickname":"Once.","note":"","ucode":"79C9F1DD2171D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407065,"discussion_content":"如果学过数据结构中的最小生成树算法你就会明白这个比喻了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634903710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1118091,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0f/8b/25d118be.jpg","nickname":"Aitozi","note":"","ucode":"B8096312BAD560","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2489054,"avatar":"https://static001.geekbang.org/account/avatar/00/25/fa/de/0152aa04.jpg","nickname":"Once.","note":"","ucode":"79C9F1DD2171D0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570675,"discussion_content":"说实话看这个比喻是为了搞懂这个算法，而不是懂这个算法来看懂这个比喻，有点本末倒置。这位老师莫名奇妙的比喻实在看的头疼","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1651851550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":407065,"ip_address":""},"score":570675,"extra":""}]},{"author":{"id":1129610,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3c/8a/900ca88a.jpg","nickname":"test","note":"","ucode":"C57A175CBC6547","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":149590,"discussion_content":"倒觉得网络其实就是掌门的严谨版，但思路还是掌门，如果要优雅，纯数学的可能优雅一些","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579765984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2620984,"avatar":"","nickname":"张阳光","note":"","ucode":"C3B336399695E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587133,"discussion_content":"我并没有觉得比喻用多了很好，反而会让人抓不住重点，我们花时间学习当然想要的是满满的干货，总不能到时候给人学术交流时说的都是这些比喻吧。大学的时候老师讲TCP 三次握手的时候就是全是比喻，把seq ,ACK 等标识符全部换成了你好，我在等语言。结果大家只记得这些语言了，重要的seq是啥。他和ACK 关系是怎样的 全部都没记住。还是希望老师尽量用专业术语。难点可以先专业在比喻。这样我们能分清主次，要点，以及便于理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662809517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"中国香港"},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1055475,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1a/f3/41d5ba7d.jpg","nickname":"iLeGeND","note":"","ucode":"4055A628A6E97C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2620984,"avatar":"","nickname":"张阳光","note":"","ucode":"C3B336399695E2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587137,"discussion_content":"科普可以比喻，但是来的都是程序员，学知识是正真解决问题的，还是严谨好，有些比喻，没点基础的人根本听不出本体还是喻体，容易本误导，","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662813007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":587133,"ip_address":"北京"},"score":587137,"extra":""}]},{"author":{"id":2834597,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/40/a5/5552e56f.jpg","nickname":"猪","note":"","ucode":"2030961A18DBED","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":551657,"discussion_content":"听大佬的课最重要的就是听比喻，不是吗？这种思维模式性质、经验性质的东西，来自越厉害的人就越宝贵。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645077748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2675399,"avatar":"https://static001.geekbang.org/account/avatar/00/28/d2/c7/b7f52df2.jpg","nickname":"雨里","note":"","ucode":"C475DE8B5375AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549315,"discussion_content":"这个比喻不是挺好的吗？   你权值越大，不就责任越大，你就是老大，比我小的就是我小弟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643851915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":12485,"user_name":"李晓东","can_delete":false,"product_type":"c1","uid":1132413,"ip_address":"","ucode":"3CA1760ED6FA3C","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/7d/21df5e98.jpg","comment_is_top":false,"comment_ctime":1528857351,"is_pvip":false,"discussion_count":8,"race_medal":0,"score":"272111796999","product_id":100007101,"comment_content":"请教个问题，讲STP的时候，两个交换机之间连线的数字代表什么？怎么得来的？","like_count":63,"discussions":[{"author":{"id":1483392,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a2/80/c2086557.jpg","nickname":"lwshang","note":"","ucode":"9194A3CB628D40","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2415,"discussion_content":"Wikipedia 说这个数字跟两个交换机之间的带宽有关，带宽越大，数字越小。更准确地说是倒数关系。","likes_number":25,"is_delete":false,"is_hidden":false,"ctime":1563572238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1370341,"avatar":"https://static001.geekbang.org/account/avatar/00/14/e8/e5/fd4c7ea6.jpg","nickname":"雾雾glu","note":"","ucode":"00C6AA3DB823E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1483392,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a2/80/c2086557.jpg","nickname":"lwshang","note":"","ucode":"9194A3CB628D40","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60560,"discussion_content":"感谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574738219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2415,"ip_address":""},"score":60560,"extra":""},{"author":{"id":1955459,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/d6/83/bd4a8410.jpg","nickname":"白开水","note":"","ucode":"2E05353E8D9317","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1483392,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a2/80/c2086557.jpg","nickname":"lwshang","note":"","ucode":"9194A3CB628D40","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294366,"discussion_content":"先记着","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595860779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2415,"ip_address":""},"score":294366,"extra":""}]},{"author":{"id":1079634,"avatar":"https://static001.geekbang.org/account/avatar/00/10/79/52/af632a6c.jpg","nickname":"陈熹荣","note":"","ucode":"B07C83A8020DC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39860,"discussion_content":"为何我觉得掌门的比喻更难理解了","likes_number":17,"is_delete":false,"is_hidden":false,"ctime":1572004369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1398630,"avatar":"https://static001.geekbang.org/account/avatar/00/15/57/66/b41610e6.jpg","nickname":"obulks","note":"","ucode":"FADFC3FD6A0334","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366235,"discussion_content":"我是当做距离来理解，比如1是1米，4是4米，这样好像也跟老师讲解的说得通","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1617985785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2848612,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIShQFfZkuPib0K09UHAGnsGMiaAWhYX9pxogWIH68swS4foNkgwHTKZcNablWI50S4fn856LnI88OQ/132","nickname":"Geek_wyq","note":"","ucode":"E20CC23E665879","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":531619,"discussion_content":"一般说成网络开销，即cost","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1637357258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1258402,"avatar":"https://static001.geekbang.org/account/avatar/00/13/33/a2/6c0ffc15.jpg","nickname":"皮皮侠","note":"","ucode":"04205990C1DE1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":201573,"discussion_content":"除了带宽，还有其他的参数","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583809729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200858,"discussion_content":"带宽？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583730211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10637,"user_name":"颇忒妥","can_delete":false,"product_type":"c1","uid":1026448,"ip_address":"","ucode":"AA86AD1049BC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/90/0c5ed3d9.jpg","comment_is_top":false,"comment_ctime":1527639513,"is_pvip":false,"replies":[{"id":"3400","content":"这是个虚指的局域网，不一定直连，里面可以隐藏一些设备，例如hub，交换机","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527647392,"ip_address":"","comment_id":10637,"utype":1}],"discussion_count":4,"race_medal":0,"score":"246340775385","product_id":100007101,"comment_content":"图一和图二有点看不懂，图里的交换机和PC 是物理设备，这个LAN 是什么？不是应该交换机和PC 直接用一根线相连么？","like_count":57,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418547,"discussion_content":"这是个虚指的局域网，不一定直连，里面可以隐藏一些设备，例如hub，交换机","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527647392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2324722,"avatar":"https://static001.geekbang.org/account/avatar/00/23/78/f2/02eb3b5c.jpg","nickname":"j","note":"","ucode":"96BAF9A9524C9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340470,"discussion_content":"说实话，我一开始也是看图1和图2，懵了1下午","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610012426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1197009,"avatar":"https://static001.geekbang.org/account/avatar/00/12/43/d1/3dd582a8.jpg","nickname":"米雄雄","note":"","ucode":"FBDF8D3D4BF8FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":79770,"discussion_content":"老师，如果2台机器连的hub,hub连到交换机，那交换机的转发表中，hub连接的口是不是的对应2台机器的地址？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576111093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241121,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/21/7168f973.jpg","nickname":"JStFs","note":"","ucode":"636E85653555DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3714,"discussion_content":"我也是对这个图中的LAN不解，这一点老师为什么不直接\n写上去呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564730683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":13064,"user_name":"magict4","can_delete":false,"product_type":"c1","uid":1043789,"ip_address":"","ucode":"CB6F063D881AAC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/4d/1d1a1a00.jpg","comment_is_top":false,"comment_ctime":1529357634,"is_pvip":false,"replies":[{"id":"4368","content":"好像这个说法的确有问题，不是arp过程的，是发包过程的，由全部转发变成有脑子的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1529406656,"ip_address":"","comment_id":13064,"utype":1}],"discussion_count":10,"race_medal":0,"score":"237752558914","product_id":100007101,"comment_content":"老师你好，我跟zixuan@有着相同的疑问。<br><br>文中提到：<br><br>当机器 2 要访问机器 1 的时候，机器 2 并不知道机器 1 的 MAC 地址，所以机器 2 会发起一个 ARP 请求。这个广播消息会到达机器 1，也同时会到达交换机 A。这个时候交换机 A 已经知道机器 1 是不可能在右边的网口的，所以这个广播信息就不会广播到局域网二和局域网三。<br><br>根据前一小节的内容，我有以下理解：<br>1. 交换机是二层设备，不会读取 IP 层的内容。<br>2. 交换机会缓存 MAC 地址跟转发端口的关系。<br>3. ARP 协议是广播的，目的地 MAC 地址是广播地址。<br><br>如果我的理解是正确的，那机器 2 发起的 ARP 请求中，是不含机器 1 的 MAC 地址的，只有广播地址。交换机 A 中缓存的信息是没法被利用起来的。那么交换机 A 是如何知道不需要把请求转发到其它局域网的呢？<br><br>","like_count":56,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419522,"discussion_content":"好像这个说法的确有问题，不是arp过程的，是发包过程的，由全部转发变成有脑子的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1529406656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1147711,"avatar":"https://static001.geekbang.org/account/avatar/00/11/83/3f/bc2ea80d.jpg","nickname":"陌.寒哲","note":"","ucode":"B7079FF211D712","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":163901,"discussion_content":"这里应该不是arp包，是普通数据包，普通数据包刚开始被交换机转发到除来源之外的所有扣，有一个来源就会学习到一条规则，经过很多个来源包之后，它掌握了全部映射关系，就会只向目的网口转发。arp包确实是广播地址，只要没有vlan的过滤，就会全转发","likes_number":15,"is_delete":false,"is_hidden":false,"ctime":1581126967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153455,"avatar":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","nickname":"饭粒","note":"","ucode":"4C3220B0D43997","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65358,"discussion_content":"这里是不是机器2在之前机器1发广播包的时候，机器2本地学习到了 ARP缓存表：ip<->mac，然后机器2再访问机器1的时候就可以不用 ARP 广播了，直接填目标机器1的 ip 和 mac。","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1574997636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1153455,"avatar":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","nickname":"饭粒","note":"","ucode":"4C3220B0D43997","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386480,"discussion_content":"两回事，这里是老师笔误了，普通发包过程写成ARP广播","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627608907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":65358,"ip_address":""},"score":386480,"extra":""}]},{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386477,"discussion_content":"刚看完文章有问题，一看果然有仁兄提问了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627608774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2712167,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Bb0c1RZVKHXhoCWYZK4I8eibFLHMNuibO8JX6t9OneceXFAIQv3mk7r6umw8f5yruZP7fLEWLic8w7AHnoMeMeoQw/132","nickname":"Geek_c6e7a9","note":"","ucode":"13CA14BBEDA193","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385529,"discussion_content":"这里不能是arp包吧，arp是工作在网络层的，有ip地址但是交换机看不见ip地址","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627113105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134511,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/af/50c3e8dd.jpg","nickname":"登品","note":"","ucode":"DA94DA7A7CFE3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377053,"discussion_content":"交换机a学习了机器1的交互后，就有记忆功能了的；当机器2的广播到达交换机a的时候，不是直接从交换机a转发给机器1的嘛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622472579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1134511,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/af/50c3e8dd.jpg","nickname":"登品","note":"","ucode":"DA94DA7A7CFE3D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386478,"discussion_content":"机器2的广播目标是IP地址，交换机是二层设备","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627608834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":377053,"ip_address":""},"score":386478,"extra":""}]},{"author":{"id":1902002,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/05/b2/93b64021.jpg","nickname":"Geek_jikuo","note":"","ucode":"D4AF9E736701B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351205,"discussion_content":"赞一个，很细心呀。又学到了很多知识。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614177097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1541386,"avatar":"https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg","nickname":"N_H","note":"","ucode":"109B67557AB3CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554,"discussion_content":"我觉得交换机是不是不仅记录每个口和每个mac地址的对应信息，应该也记录了其他信息，然后发送的arp请求里面也包含了其他的表名要找的机器的信息，不仅仅是mac地址。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561697525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11373,"user_name":"A7","can_delete":false,"product_type":"c1","uid":1139012,"ip_address":"","ucode":"3181456C2BB8F7","user_header":"https://static001.geekbang.org/account/avatar/00/11/61/44/66cd6f3f.jpg","comment_is_top":false,"comment_ctime":1528098359,"is_pvip":false,"discussion_count":4,"race_medal":1,"score":"190506659383","product_id":100007101,"comment_content":"感觉spanning tree和vlan会死一堆人……<br>stp的缺点就是，当掌门死了或者有新人进入江湖，江湖上就又要经历一场血雨腥风，如果江湖很大的话，就会血雨腥风很久……","like_count":45,"discussions":[{"author":{"id":2216844,"avatar":"https://static001.geekbang.org/account/avatar/00/21/d3/8c/28ce0e71.jpg","nickname":"叁碎","note":"","ucode":"8E5F7D2830DBB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325922,"discussion_content":"这个比喻把STP的缺点表达的淋漓尽致","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1605469526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193755,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","nickname":"拿笔小星","note":"","ucode":"D3D8F6A959710D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":180895,"discussion_content":"所以性能很差","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1582301030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2597449,"avatar":"https://static001.geekbang.org/account/avatar/00/27/a2/49/7e749be2.jpg","nickname":"Nick","note":"","ucode":"37E60C08183617","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404310,"discussion_content":"所以现在还有mstp、rstp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634284863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1751818,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/bb/0a/f9d81f3e.jpg","nickname":"挥手自兹去，萧萧班马鸣","note":"","ucode":"AE3A2187AC1A30","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323576,"discussion_content":"这样比喻真好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604970491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11706,"user_name":"戴劼 DAI JIE🤪","can_delete":false,"product_type":"c1","uid":1141215,"ip_address":"","ucode":"1993EA58CA7D83","user_header":"https://static001.geekbang.org/account/avatar/00/11/69/df/71563d52.jpg","comment_is_top":false,"comment_ctime":1528307060,"is_pvip":false,"replies":[{"id":"3814","content":"是的，赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1528348900,"ip_address":"","comment_id":11706,"utype":1}],"discussion_count":4,"race_medal":0,"score":"177621966196","product_id":100007101,"comment_content":"有一次办公室断网，排查时候发现路由器某一个部门的端口的灯在狂闪，拔掉后恢复正常。然后去那个部门排查才发现他们插错了口，形成了环路导致广播风暴。","like_count":42,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418964,"discussion_content":"是的，赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528348900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310814,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/5e/73dd7bf6.jpg","nickname":"乘风","note":"","ucode":"51C1BCC1701BDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36299,"discussion_content":"不是有stp协议吗?","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571360726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165201,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7mAt63VrbLZPHpeZxSc4IlBYswQSnaAB5wGePaGFDehgiaNfIxI1SJ5yIHIlmVk8hsw0RaoaSCPA/132","nickname":"Stephen","note":"","ucode":"0D49223E6CB7B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306957,"discussion_content":"为啥我试了下,路由器直接灯全灭了呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600430833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1240709,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ee/85/59e39469.jpg","nickname":"Xianping","note":"","ucode":"108EF4AFF699C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225743,"discussion_content":"同问，stp协议不就是解决这个问题的嘛\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586395129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10908,"user_name":"奔跑的蜗牛","can_delete":false,"product_type":"c1","uid":1110688,"ip_address":"","ucode":"730D49FFE27708","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/a0/021aefb5.jpg","comment_is_top":false,"comment_ctime":1527735526,"is_pvip":false,"replies":[{"id":"3442","content":"谢谢","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527743082,"ip_address":"","comment_id":10908,"utype":1}],"discussion_count":2,"race_medal":0,"score":"147556623590","product_id":100007101,"comment_content":"从公众号追过来的，头一次听到这么好听的STP，终于明白原理了，再看STP就不那么头大了","like_count":34,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418638,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527743082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2663872,"avatar":"https://static001.geekbang.org/account/avatar/00/28/a5/c0/58672ae0.jpg","nickname":"昔曰","note":"","ucode":"8FCB9D414C32EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380053,"discussion_content":"什么公众号呀，我也想关注一下，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624320308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10772,"user_name":"埃罗芒阿老师","can_delete":false,"product_type":"c1","uid":1134044,"ip_address":"","ucode":"6A6FB0ACC2C036","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/dc/87809ad2.jpg","comment_is_top":false,"comment_ctime":1527693439,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"121786777727","product_id":100007101,"comment_content":"1.stp缺点的话，一个是某个交换机状态发生变化的时候，整个树需要重新构建，另一个是被破开的环的链路被浪费了<br>2.先ping，不通的话traceroute，参数逐渐加一","like_count":28,"discussions":[{"author":{"id":1129610,"avatar":"https://static001.geekbang.org/account/avatar/00/11/3c/8a/900ca88a.jpg","nickname":"test","note":"","ucode":"C57A175CBC6547","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":149709,"discussion_content":"感觉可以不重新构建","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579774736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11180,"user_name":"化雨","can_delete":false,"product_type":"c1","uid":1130880,"ip_address":"","ucode":"3402A03CF31B50","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/80/bd6419bb.jpg","comment_is_top":false,"comment_ctime":1527909555,"is_pvip":false,"replies":[{"id":"3570","content":"看来这个图应该重新画了，谢谢","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527934526,"ip_address":"","comment_id":11180,"utype":1}],"discussion_count":1,"race_medal":0,"score":"87427255475","product_id":100007101,"comment_content":"文中的拓扑图确实令我疑惑，好在thomas已经帮我发问了哈哈。能否考虑调整下拓扑图的画法：线条真实反应各个节点(主机，交换机等)的物理连接，同一个局域网的节点用虚线框出来","like_count":20,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418743,"discussion_content":"看来这个图应该重新画了，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527934526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11319,"user_name":"渔夫","can_delete":false,"product_type":"c1","uid":1019289,"ip_address":"","ucode":"6BF08FD8923E45","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/99/f886543d.jpg","comment_is_top":false,"comment_ctime":1528071515,"is_pvip":false,"replies":[{"id":"3602","content":"有的，现在很少用stp了，后面讲数据中心的时候会提到","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1528075788,"ip_address":"","comment_id":11319,"utype":1}],"discussion_count":1,"race_medal":0,"score":"74542515547","product_id":100007101,"comment_content":"所有交换机都支持STP协议吗？除了STP还有别的什么机制能防止或预防网络环路风暴？谢谢","like_count":17,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418792,"discussion_content":"有的，现在很少用stp了，后面讲数据中心的时候会提到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528075788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10674,"user_name":"一叶孤航","can_delete":false,"product_type":"c1","uid":1112056,"ip_address":"","ucode":"CA63ABBBA1F2BE","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/f8/3f0b07dd.jpg","comment_is_top":false,"comment_ctime":1527644226,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"70247120962","product_id":100007101,"comment_content":"没看懂图一，机器和交换机不是直接网线连接的么？那么LAN1,LAN2是什么?LAN2又是怎么同时连接两台路由器的?求解惑","like_count":16},{"had_liked":false,"id":10659,"user_name":"天空白云","can_delete":false,"product_type":"c1","uid":1138104,"ip_address":"","ucode":"BC073B70F5D981","user_header":"https://static001.geekbang.org/account/avatar/00/11/5d/b8/740c9b30.jpg","comment_is_top":false,"comment_ctime":1527641081,"is_pvip":false,"replies":[{"id":"3392","content":"是哒","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527646006,"ip_address":"","comment_id":10659,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53067248633","product_id":100007101,"comment_content":"第二个问题？ping ，traceroute？","like_count":12,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418555,"discussion_content":"是哒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527646006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15233,"user_name":"张玮(大圣)","can_delete":false,"product_type":"c1","uid":1111343,"ip_address":"","ucode":"D567C4BE87D116","user_header":"https://static001.geekbang.org/account/avatar/00/10/f5/2f/56117bab.jpg","comment_is_top":false,"comment_ctime":1531020381,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44480693341","product_id":100007101,"comment_content":"无网络基础，看起来有点费力啊","like_count":10},{"had_liked":false,"id":10633,"user_name":"灰飞灰猪不会灰飞.烟灭","can_delete":false,"product_type":"c1","uid":1127314,"ip_address":"","ucode":"FF9FB4C902D1F5","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/92/99530cee.jpg","comment_is_top":false,"comment_ctime":1527639104,"is_pvip":false,"replies":[{"id":"3396","content":"应该用路由器","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527647049,"ip_address":"","comment_id":10633,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40182344768","product_id":100007101,"comment_content":"老师，那假如既要保证vlan之间通讯，又要和其它部门通讯怎么呢？通过设置trunk吗？","like_count":9,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418546,"discussion_content":"应该用路由器","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527647049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1485365,"avatar":"https://static001.geekbang.org/account/avatar/00/16/aa/35/1a4884f9.jpg","nickname":"1043","note":"","ucode":"AAA69CC175AEE3","race_medal":5,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378695,"discussion_content":"vlan间通信，如果交换机是二层的，就用在开个trunk口封装802.1q和路由器开子接口互联，叫单臂路由，或用三层交换机通过svi接口直接建立直连路由。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623339838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25811,"user_name":"李博越","can_delete":false,"product_type":"c1","uid":1027808,"ip_address":"","ucode":"E6CDA0CDC0BCE6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/e0/3e636955.jpg","comment_is_top":false,"comment_ctime":1537443387,"is_pvip":false,"replies":[{"id":"9414","content":"交换机可以识别vlan的，交换机本身没有所谓的网段，交换机的口上不配置ip.一个vlan一个网段是对的，在同一个vlan的机器配置相同的网段就可以了，和交换机关系不大","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1537488531,"ip_address":"","comment_id":25811,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31602214459","product_id":100007101,"comment_content":"看文章里最后一张图，两个不同的交换机，肯定是2个不同的网段，又为何能使用同一个vlanId进行网络划分呢？一个vlanId只能绑定一个网段才对吧？甚是不解","like_count":8,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424423,"discussion_content":"交换机可以识别vlan的，交换机本身没有所谓的网段，交换机的口上不配置ip.一个vlan一个网段是对的，在同一个vlan的机器配置相同的网段就可以了，和交换机关系不大","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537488531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10675,"user_name":"Regular","can_delete":false,"product_type":"c1","uid":1025998,"ip_address":"","ucode":"80B3EA083534CA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a7/ce/7ee0d672.jpg","comment_is_top":false,"comment_ctime":1527644681,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31592415753","product_id":100007101,"comment_content":"第一张图中，机器3、交换机A、交换机B三者是怎么连接的？","like_count":7},{"had_liked":false,"id":11786,"user_name":"Lsoul","can_delete":false,"product_type":"c1","uid":1127019,"ip_address":"","ucode":"AADB10136AEE67","user_header":"https://static001.geekbang.org/account/avatar/00/11/32/6b/85e3d900.jpg","comment_is_top":false,"comment_ctime":1528351529,"is_pvip":false,"replies":[{"id":"3819","content":"这个比较复杂，看这两个网卡在机器里面是怎么配置的了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1528369162,"ip_address":"","comment_id":11786,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27298155305","product_id":100007101,"comment_content":"请问，图一机器三如果是双网卡又是如何通信的呢","like_count":6,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418997,"discussion_content":"这个比较复杂，看这两个网卡在机器里面是怎么配置的了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528369162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73989,"user_name":"程序员人生","can_delete":false,"product_type":"c1","uid":1113668,"ip_address":"","ucode":"C5C5073D89AAA2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/44/3e3040ac.jpg","comment_is_top":false,"comment_ctime":1552054583,"is_pvip":false,"replies":[{"id":"50273","content":"那不是，他是基于规则的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567838774,"ip_address":"","comment_id":73989,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23026891063","product_id":100007101,"comment_content":"原来交换机是机器学习的鼻祖","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442371,"discussion_content":"那不是，他是基于规则的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567838774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2172552,"avatar":"https://static001.geekbang.org/account/avatar/00/21/26/88/fac80f53.jpg","nickname":"everything=42","note":"","ucode":"787BE6C8D16F2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349192,"discussion_content":"感叹数据结构无处不在","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612960183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2405411,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b4/23/0e296758.jpg","nickname":"姜尧","note":"","ucode":"D813E046DD81E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340986,"discussion_content":"交换机基于规则，ml基于训练，交换机更像是愣头青","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610249667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193554,"user_name":"Zeal","can_delete":false,"product_type":"c1","uid":1898857,"ip_address":"","ucode":"327D516A1D0F0E","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f9/69/384e33e6.jpg","comment_is_top":false,"comment_ctime":1584926358,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18764795542","product_id":100007101,"comment_content":"比喻很生动，其实就是并查集。","like_count":4,"discussions":[{"author":{"id":1500109,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e3/cd/9c518a02.jpg","nickname":"🙉.野孩子","note":"","ucode":"5DB634C8A5591B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339664,"discussion_content":"但也有一点不同的，即便是同门，也会存在在打一架的情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609754304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1500109,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e3/cd/9c518a02.jpg","nickname":"🙉.野孩子","note":"","ucode":"5DB634C8A5591B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339660,"discussion_content":"一下子就被你点醒了，赞~！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609753960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148776,"user_name":"宋桓公","can_delete":false,"product_type":"c1","uid":1151948,"ip_address":"","ucode":"04235C2B87AB0E","user_header":"https://static001.geekbang.org/account/avatar/00/11/93/cc/dfe92ee1.jpg","comment_is_top":false,"comment_ctime":1573085950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18752955134","product_id":100007101,"comment_content":"评论也是个宝库呀，这个栏目的听众质量高啊","like_count":4},{"had_liked":false,"id":82683,"user_name":"蒋旺Foo","can_delete":false,"product_type":"c1","uid":1265741,"ip_address":"","ucode":"4325AB9674975C","user_header":"https://static001.geekbang.org/account/avatar/00/13/50/4d/392f969b.jpg","comment_is_top":false,"comment_ctime":1554275263,"is_pvip":false,"replies":[{"id":"50003","content":"好像是","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567789276,"ip_address":"","comment_id":82683,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18734144447","product_id":100007101,"comment_content":"在讲解STP工作过程的时候，交换机如果能使用字母来命名那应该会更加清晰。因为交换机之间用数字表示距离，交换机命令也用数字，难免使人混淆。谢谢老师。","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445682,"discussion_content":"好像是","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567789276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310814,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/5e/73dd7bf6.jpg","nickname":"乘风","note":"","ucode":"51C1BCC1701BDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36306,"discussion_content":"交换机的数字代表的是优先级","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571361328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65645,"user_name":"ferry","can_delete":false,"product_type":"c1","uid":1255187,"ip_address":"","ucode":"0A848FA96C3AD8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGOSxM1GIHX9Y2JIe7vGQ87rK8xpo5F03KmiaGyXeKnozZsicHeSZrbSlzUVhTOdDlXCkTrcYNIVJg/132","comment_is_top":false,"comment_ctime":1549533583,"is_pvip":false,"replies":[{"id":"25961","content":"是的，一个是学会了，不广播，一个是不在同一个vlan，不广播","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1551438613,"ip_address":"","comment_id":65645,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18729402767","product_id":100007101,"comment_content":"老师，您前面讲到交换机上的转发表是用于找到要接受的MAC地址，避免广播的，vlan也是用于避免全部广播的，那么他们之间的区别是否在于，转发表适用于只发送信息给一个机器，而vlan适合发送信息到一部分（大于等于1个）的机器呢？","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438534,"discussion_content":"是的，一个是学会了，不广播，一个是不在同一个vlan，不广播","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551438613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":44009,"user_name":"王先统","can_delete":false,"product_type":"c1","uid":1236218,"ip_address":"","ucode":"4D208672C0D359","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/fa/3975f8da.jpg","comment_is_top":false,"comment_ctime":1543364862,"is_pvip":false,"replies":[{"id":"15732","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1543372603,"ip_address":"","comment_id":44009,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18723234046","product_id":100007101,"comment_content":"无论是hub还是交换机都是为了解决局域网内部机器的互通问题，到现在为止我们还没讲到广域网的访问，是吧？","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430592,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543372603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23758,"user_name":"Tom","can_delete":false,"product_type":"c1","uid":1109832,"ip_address":"","ucode":"00EEDE4CB11776","user_header":"","comment_is_top":false,"comment_ctime":1536635596,"is_pvip":false,"replies":[{"id":"8671","content":"对的，后面答疑环节纠正了这个问题","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1536645380,"ip_address":"","comment_id":23758,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18716504780","product_id":100007101,"comment_content":"你好，环路那个图，lan1的机器1和机器2怎么同时连两个交换机的，中间是有个集线器吗？","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423712,"discussion_content":"对的，后面答疑环节纠正了这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536645380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11468,"user_name":"姬野用菜刀","can_delete":false,"product_type":"c1","uid":1062188,"ip_address":"","ucode":"613CC95A16B8E4","user_header":"https://static001.geekbang.org/account/avatar/00/10/35/2c/429323f3.jpg","comment_is_top":false,"comment_ctime":1528160514,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18708029698","product_id":100007101,"comment_content":"刘老师，stp图中交换机之间连线的数字是什么哈？另外为了解决成环问题而增加这个机制，会对性能有多少影响呢","like_count":4,"discussions":[{"author":{"id":1039886,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/de/0e/af8dd241.jpg","nickname":"GeekZd","note":"","ucode":"D2AA3305A6AFE8","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413004,"discussion_content":"距离 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636357930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10677,"user_name":"Geek_8a2f3f","can_delete":false,"product_type":"c1","uid":1136829,"ip_address":"","ucode":"940BEE99DE158B","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/bd/bcc27593.jpg","comment_is_top":false,"comment_ctime":1527644991,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18707514175","product_id":100007101,"comment_content":"老师有个问题不明白。第二个图中说交换机A和B组成环路，且交换机都学会了，机器1在局域网一中。当机器1的包到达交换机A时，既然交换机A已经知道机器1在左边网络，为什么还会将包广播到局域网二中？","like_count":4,"discussions":[{"author":{"id":2343058,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c0/92/91e2b26e.jpg","nickname":"🇾 🇸 🇱","note":"","ucode":"36E1C561D780D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331287,"discussion_content":"因为交换机觉得这个口的电脑人为拆掉了，改装到另一个口上了。所以它不会这么智能，只觉得我要更新端口数据。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606823265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90375,"user_name":"Geek_94e115","can_delete":false,"product_type":"c1","uid":1476955,"ip_address":"","ucode":"DBDB27A0472B55","user_header":"","comment_is_top":false,"comment_ctime":1556502997,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14441404885","product_id":100007101,"comment_content":"<br>什么是广播风暴 <br>===<br>1. 首先要熟悉 两台主机跨两个交换机 arp请求过程  <br><br>VM1 | SW1 - SW2 | VM3 <br><br>\t- vm1 arping -b vm3   <br>\t- sw1 学习到 vm1 是在自己左边的  #关注这个 <br>\t- sw2 学习到 vm1 是在自己左边的 <br>\t- vm3 回应 arp 单播 <br>\t- sw2 根据转发表 给 SW1 <br>\t- sw1 根据转发表 给 vm1<br><br>\t<br>2. 广播风暴   #这个问题不用过分关注，vm1 vm2 所在的网段 <br><br>VM1 | SW1 | VM3<br> - sw0   sw3 - <br>VM2\t| SW2 |   <br>     <br>\t- VM1 arping -b vm2 <br>\t- sw1 学习到vm1是在自己左边的 <br>\t- sw2 经过 sw3 转发 认为 vm1 在自己的右边 <br>\t- sw2 通过 sw0 转发 认为 vm1 在自己的左边 <br>\t- #sw2中对于 vm1 对应哪个网口的转发条目不停的变化这样就会导致 sw2 不能正常工作<br>\t- #这个广播报文会不停的转圈，占用带宽 <br><br>3. 解决方案<br>\tstp #面对物理环路，通过软件逻辑破环 <br>\t<br>vxlan<br>===<br>1.   VID 2^12 可表示 4096 个 vlan      #后续出现vxlan 解决了该瓶颈，同样vxlan还有其他的优势<br>2.   #广播域：指 广播报文（eth frame）可传播的范围                                    #是数据链路层的观念 #通过交换机来拓展  # 通过vlan来隔离 #广播  #面向对象 ethf<br>\t #冲撞域: 指 原始点对多链路，总线型拓扑，共享链路，发包会有冲撞  后续出现 CSMA&#47;CD #是物理层的概念     #通过hub来拓展     # ？                    #面向对象 数据包 <br>\t\t\t\t\t <br>3.显然 vlan 是面对 ethf 的协议，实现广播域的隔离  \t","like_count":3,"discussions":[{"author":{"id":1898597,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/LWicoUend7QOH6pyXGJyJicAzm5T4TUD8TaicSCHVPJp7sbIicpeArcicZiaMGcQ7uUDWjGZYgVnUqNGFFDVe9h0EV4w/132","nickname":"Geek_f7658e","note":"","ucode":"108AA63DEF6A2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202848,"discussion_content":"这样的笔记的理解交流提高我们菜鸟的学习效率","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583970665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65649,"user_name":"ferry","can_delete":false,"product_type":"c1","uid":1255187,"ip_address":"","ucode":"0A848FA96C3AD8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGOSxM1GIHX9Y2JIe7vGQ87rK8xpo5F03KmiaGyXeKnozZsicHeSZrbSlzUVhTOdDlXCkTrcYNIVJg/132","comment_is_top":false,"comment_ctime":1549535697,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14434437585","product_id":100007101,"comment_content":"又查找了很多资料，明确了转发表和vlan的区别，转发表作用时是用于客户端之间通信过程中，避免给无关客户端广播，而vlan则是划分广播域，使消息在广播时只在一个小范围内传播，侧重于安全性。","like_count":3},{"had_liked":false,"id":221568,"user_name":"zhushenghang","can_delete":false,"product_type":"c1","uid":1994374,"ip_address":"","ucode":"712CFE335C7CE4","user_header":"https://static001.geekbang.org/account/avatar/00/1e/6e/86/c682976b.jpg","comment_is_top":false,"comment_ctime":1590542462,"is_pvip":false,"replies":[{"id":"87154","content":"二层交换机是没有ARP表的，而三层交换机是有ARP表的。<br><br>二层交换机在转发报文时，使用的是MAC表。根据MAC地址确定目的主机所在端口。<br><br>三层交换机在转发报文时，使用ARP表。根据IP地址确定目的MAC和所在端口。<br><br>虽然现在三层交换机是主流，但是这里是理论讲解，还在讨论二层交换机的情况。","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1595254180,"ip_address":"","comment_id":221568,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10180477054","product_id":100007101,"comment_content":"图一画的不准确。后面的说法也有问题。既然机器1的广播机器4和机器3能收到，那么他们肯定是处于一个广播域内，通俗的讲就是在一个VLAN内，那么就是纯二层的东西。<br>根据二层转发流程：<br>提取数据报的源MAC地址，查询MAC转发表（也就是L2FDB），如果找到就直接发送到对应端口。<br>对于表中不包含的地址，通过广播发送，也就是发送到所有端口。<br>使用地址自动学习（根据源MAC地址学习）和老化机制（定时机制）来维护MAC转发表的信息，二层转发一般不会更改数据包内容。<br>在上面的过程中，交换机 A 和交换机 B 都是能够学习到这样的信息：<br>机器 1 是在左边这个网口的。当了解到这些拓扑信息之后，情况就好转起来。<br>当机器 2 要访问机器 1 的时候，机器 2 并不知道机器 1 的 MAC 地址，所以机器 2 会发起一个 ARP 请求。<br>这个广播消息会到达机器 1，也同时会到达交换机 A。这个时候交换机 A 已经知道机器 1 是不可能在右边的网口的，所以这个广播信息就不会广播到局域网二和局域网三。<br>-&gt;这个广播照样会到达局域网二和局域网三，因为处于同一个广播域，目的MAC地址是全F的。<br>-&gt;二层交换机不过是提取数据报的源MAC地址，记录到二层的MAC表里方便下次收到的数据报的目的MAC是这个的时候直接转发。<br>-&gt;二层交换机发现数据报的目的MAC是广播地址，就会在VLAN里进行广播，所有同VLAN的服务器都能收到。<br><br>当机器 3 要访问机器 1 的时候，也需要发起一个广播的 ARP 请求。这个时候交换机 A 和交换机 B 都能够收到这个广播请求。交换机 A 当然知道主机 A 是在左边这个网口的，所以会把广播消息转发到局域网一。<br>同时，交换机 B 收到这个广播消息之后，由于它知道机器 1 是不在右边这个网口的，所以不会将消息广播到局域网三。<br>-&gt;因此这个说法也有问题，如果有多台交换机A、B上行到核心且处于同一个VLAN，同时接入交换机的集群为K8S集群，<br>-&gt;那么如果其中有容器从A交换机漂移到了B交换机且仅MAC发生了改变IP地址不变，那即使A交换机下的容器再广播也找不到这个容器了？<br>-&gt;按前面的说法聪明的交换机A并不会把广播包发往交换机B。那岂不是不通了？得等交换机mac表老化了才能通了？<br>-&gt;很明显交换机不会这么设计，其实上面这个只要A交换机下的容器广播了那么所有处于广播域的服务器都能收到。","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496497,"discussion_content":"二层交换机是没有ARP表的，而三层交换机是有ARP表的。\n\n二层交换机在转发报文时，使用的是MAC表。根据MAC地址确定目的主机所在端口。\n\n三层交换机在转发报文时，使用ARP表。根据IP地址确定目的MAC和所在端口。\n\n虽然现在三层交换机是主流，但是这里是理论讲解，还在讨论二层交换机的情况。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595254180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2000101,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/84/e5/b787a477.jpg","nickname":"明天、你好","note":"","ucode":"A334F7FCD09CD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359041,"discussion_content":"我觉得这一段老师讲的有点牵强。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616106914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203746,"user_name":"雷刚","can_delete":false,"product_type":"c1","uid":1655725,"ip_address":"","ucode":"115FE2BE1AAB61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/pTD8nS0SsORKiaRD3wB0NK9Bpd0wFnPWtYLPfBRBhvZ68iaJErMlM2NNSeEibwQfY7GReILSIYZXfT9o8iaicibcyw3g/132","comment_is_top":false,"comment_ctime":1586262057,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10176196649","product_id":100007101,"comment_content":"STP 算法感觉和 Raft 协议很像啊。<br>1. Zab 协议也是先投自己一票（也相当于是先掌门），然后把消息广播出去，然后按照 [epoch, zxid, service_id] 三个维度进行 PK，直到选票半数以上则为老大。<br>2. STP 算法也是先投自己一票，然后也是把消息广播出去，然后按照 [Root Bridge ID, Root Path Cost, Bridge ID, and Port ID] 进行 PK。不过感觉还是要比 Raft 协议复杂一些。","like_count":2,"discussions":[{"author":{"id":1240970,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ef/8a/e639595e.jpg","nickname":"阿体","note":"","ucode":"E836BC56D79D37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360628,"discussion_content":"这个比较不错👍🏻\n领导人选举上确实很像，STP还要生成树的结构，角色复杂点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616492778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155871,"user_name":"Phoenix","can_delete":false,"product_type":"c1","uid":1005368,"ip_address":"","ucode":"C51BE4C948755B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/38/ba6a106f.jpg","comment_is_top":false,"comment_ctime":1574770802,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10164705394","product_id":100007101,"comment_content":"作为非科班出身的程序员，我居然看懂了，可见老师的功力深厚，感谢老师","like_count":2},{"had_liked":false,"id":86193,"user_name":"随风","can_delete":false,"product_type":"c1","uid":1476862,"ip_address":"","ucode":"037CE3554D8AB9","user_header":"https://static001.geekbang.org/account/avatar/00/16/88/fe/c18a85fe.jpg","comment_is_top":false,"comment_ctime":1555321475,"is_pvip":false,"replies":[{"id":"49659","content":"是的。也可以连hub","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567696165,"ip_address":"","comment_id":86193,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10145256067","product_id":100007101,"comment_content":"LAN1&#47;LAN2是什么东西？机器不都是直接连接交换机的吗？","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446913,"discussion_content":"是的。也可以连hub","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567696165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54614,"user_name":"Vicky🐣🐣🐣","can_delete":false,"product_type":"c1","uid":1266840,"ip_address":"","ucode":"F659F178A2FF34","user_header":"https://static001.geekbang.org/account/avatar/00/13/54/98/52ca7053.jpg","comment_is_top":false,"comment_ctime":1545914575,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10135849167","product_id":100007101,"comment_content":"老师好！<br>1. STP协议，prioprity vector 中的 PORT ID 指的是什么呢？<br>2. 包的 VLAN TAG中的 优先级指的是什么？是属于这个VALN的包的转发优先级吗？","like_count":2},{"had_liked":false,"id":45842,"user_name":"HelloBug","can_delete":false,"product_type":"c1","uid":1249598,"ip_address":"","ucode":"E61A4AD5C2F724","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/3e/925aa996.jpg","comment_is_top":false,"comment_ctime":1543802607,"is_pvip":true,"replies":[{"id":"16457","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1543840043,"ip_address":"","comment_id":45842,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133737199","product_id":100007101,"comment_content":"老师，你好~只用交换机连接起来的网络，都是在一个局域网里是吧？","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431235,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543840043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":45525,"user_name":"叮咚","can_delete":false,"product_type":"c1","uid":1145795,"ip_address":"","ucode":"203FF6DC17AEEE","user_header":"https://static001.geekbang.org/account/avatar/00/11/7b/c3/a1a0b9ff.jpg","comment_is_top":false,"comment_ctime":1543660546,"is_pvip":true,"replies":[{"id":"16453","content":"不一定开启stp","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1543839929,"ip_address":"","comment_id":45525,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10133595138","product_id":100007101,"comment_content":"既然stp能解决环路，为什么实际场景中还是有环路发生？","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431077,"discussion_content":"不一定开启stp","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543839929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":23833,"user_name":"李金洋","can_delete":false,"product_type":"c1","uid":1165101,"ip_address":"","ucode":"54B73A7C90B59F","user_header":"https://static001.geekbang.org/account/avatar/00/11/c7/2d/05a18518.jpg","comment_is_top":false,"comment_ctime":1536678637,"is_pvip":false,"replies":[{"id":"8730","content":"不能单向广播","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1536718665,"ip_address":"","comment_id":23833,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10126613229","product_id":100007101,"comment_content":"是说把交换机变成单向广播吗？比如ABC三台交换机，两两互联，最后通过STP，变成A广播只发给B，B广播只发给C，然后反过来c只发给B，b只发给A(不同方向)","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423751,"discussion_content":"不能单向广播","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536718665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10688,"user_name":"Jin","can_delete":false,"product_type":"c1","uid":1102022,"ip_address":"","ucode":"B298DB78C72769","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/c6/0358a528.jpg","comment_is_top":false,"comment_ctime":1527648045,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10117582637","product_id":100007101,"comment_content":"最前点赞两个问题我也想问的","like_count":2},{"had_liked":false,"id":10687,"user_name":"第五季","can_delete":false,"product_type":"c1","uid":1131272,"ip_address":"","ucode":"C78150265C311F","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/08/8a068b10.jpg","comment_is_top":false,"comment_ctime":1527647483,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10117582075","product_id":100007101,"comment_content":"问一个问题，我们应用服务器读redis缓存每分钟都有一个超时。并发是每分钟四万。三台虚拟redis。看应用服务器和redisc都无压力，red is也无队列阻塞。命令也是get，都是小可以。red is是集群模式，使用cachecloud搜狐产品监控。运维说网络也无问题。请问这种情况我怎么从Tcp协议层监控，怎么样找问题呢<br>2018-05-29<br>","like_count":2},{"had_liked":false,"id":10682,"user_name":"顾骨","can_delete":false,"product_type":"c1","uid":1131165,"ip_address":"","ucode":"3F6BA592AB7723","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/9d/c36b7ef7.jpg","comment_is_top":false,"comment_ctime":1527645858,"is_pvip":true,"replies":[{"id":"3405","content":"为了描述意思简化了，好多人问这个问题，看来有时候不能简化，但是不简化容易让读者从当时应该关注的点精力分散，比较难权衡","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527652112,"ip_address":"","comment_id":10682,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10117580450","product_id":100007101,"comment_content":"为什么网页没法留言。。。<br>想请教一下，第一张图能详细一点吗，有点没看懂，一个交换机怎么接2个局域网呢，机器3怎么会被两个交换机接入","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418562,"discussion_content":"为了描述意思简化了，好多人问这个问题，看来有时候不能简化，但是不简化容易让读者从当时应该关注的点精力分散，比较难权衡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527652112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10657,"user_name":"肖一林","can_delete":false,"product_type":"c1","uid":1113317,"ip_address":"","ucode":"1DE45D906EB836","user_header":"https://static001.geekbang.org/account/avatar/00/10/fc/e5/605f423f.jpg","comment_is_top":false,"comment_ctime":1527641020,"is_pvip":false,"replies":[{"id":"3393","content":"会的，所以要堆叠","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527646025,"ip_address":"","comment_id":10657,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10117575612","product_id":100007101,"comment_content":"要是有交换机挂了，特别是掌门挂了，这个江湖会不会大乱","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418554,"discussion_content":"会的，所以要堆叠","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527646025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10654,"user_name":"博白","can_delete":false,"product_type":"c1","uid":1144383,"ip_address":"","ucode":"F39994B497CC33","user_header":"","comment_is_top":false,"comment_ctime":1527640875,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10117575467","product_id":100007101,"comment_content":"可以推荐一下这方面的书籍吗","like_count":2},{"had_liked":false,"id":10626,"user_name":"sunlight001","can_delete":false,"product_type":"c1","uid":1126975,"ip_address":"","ucode":"A72C4274D5DE8A","user_header":"https://static001.geekbang.org/account/avatar/00/11/32/3f/fa4ac035.jpg","comment_is_top":false,"comment_ctime":1527637060,"is_pvip":false,"replies":[{"id":"3397","content":"交换机解决的，通过协议。也不是，为了穷举所有的场景，故意构建的这个图和这种合并顺序","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527647144,"ip_address":"","comment_id":10626,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10117571652","product_id":100007101,"comment_content":"有个疑问，环路问题是交换机解决的还是人工解决的，stp在比较的时候一开始都是形成两两的门派吗，他们怎么比较成为老大的这个没看明白，请老师给解释下","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418545,"discussion_content":"交换机解决的，通过协议。也不是，为了穷举所有的场景，故意构建的这个图和这种合并顺序","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527647144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283999,"user_name":"Wangyf","can_delete":false,"product_type":"c1","uid":2226219,"ip_address":"","ucode":"349068A07CB1D4","user_header":"https://static001.geekbang.org/account/avatar/00/21/f8/2b/339660f1.jpg","comment_is_top":false,"comment_ctime":1616034093,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5911001389","product_id":100007101,"comment_content":"STP 的缺点，我只想到了，毕竟是图和树的转换，计算量可能比较大。文章中只有几个节点，已经用了大段篇幅描述了，如果是实际情况主机数量很多的话，计算量就更大了<br>别的同学提到的，如果其中有一台机器或者是根节点的交换机没了，需要重新把这个过程来一遍，我是没想到<br>在学校机房里上课的时候，我看实验室的老师都先 ping 一波百度，看看网线什么的有没有问题。然后再去看角落放着的机柜，再然后，就是重启电脑了.....","like_count":1},{"had_liked":false,"id":248262,"user_name":"shihao121","can_delete":false,"product_type":"c1","uid":1647592,"ip_address":"","ucode":"3851225F0ABD6C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ww9BprMJWfKIaxjQqOToMyg5Oiaox3qr1olJLIPW9QZicRlvJXcxoIArtAoibBTxbE3aSLtibh0qUzck4icSSoIokqQ/132","comment_is_top":false,"comment_ctime":1600083672,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5895050968","product_id":100007101,"comment_content":"图中两个交换机相连接的数字1、2、4是不是port cost。根据port cost来选择两个网段内的Designated bridge。","like_count":1},{"had_liked":false,"id":248260,"user_name":"shihao121","can_delete":false,"product_type":"c1","uid":1647592,"ip_address":"","ucode":"3851225F0ABD6C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ww9BprMJWfKIaxjQqOToMyg5Oiaox3qr1olJLIPW9QZicRlvJXcxoIArtAoibBTxbE3aSLtibh0qUzck4icSSoIokqQ/132","comment_is_top":false,"comment_ctime":1600083464,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5895050760","product_id":100007101,"comment_content":"文章中说生成树的算法叫做STP，但是STP是spanning-tree protocal，它只是个协议不是算法，他使用的算法是STA（spanning-tree algorithm）","like_count":1},{"had_liked":false,"id":222169,"user_name":"干饭团","can_delete":false,"product_type":"c1","uid":1004720,"ip_address":"","ucode":"D05B108D9468E0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/b0/c9f8fb0b.jpg","comment_is_top":false,"comment_ctime":1590712163,"is_pvip":true,"replies":[{"id":"83170","content":"不能重复的，是管理员自己配置的，那个时候交换机数目没这么多","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1591840741,"ip_address":"","comment_id":222169,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5885679459","product_id":100007101,"comment_content":"老师好 请问这么多交换机都要分配id优先级？这个优先级是怎么标记的，保存在什么地方，如果有两个1怎么办？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496701,"discussion_content":"不能重复的，是管理员自己配置的，那个时候交换机数目没这么多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591840741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170479,"user_name":"AMIR","can_delete":false,"product_type":"c1","uid":1782777,"ip_address":"","ucode":"65142D9669071B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/33/f9/50b76abe.jpg","comment_is_top":false,"comment_ctime":1578619225,"is_pvip":false,"replies":[{"id":"66277","content":"就用到下一节的路由了，跨网段访问","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1578823908,"ip_address":"","comment_id":170479,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873586521","product_id":100007101,"comment_content":"老师，设置了vlan ，那么程序员想和秘书交流感情的时候，结果在不同的vlan，这时候怎么处理","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480996,"discussion_content":"就用到下一节的路由了，跨网段访问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578823908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170233,"user_name":"鸠摩·智","can_delete":false,"product_type":"c1","uid":1211909,"ip_address":"","ucode":"6CD93CD1DB6955","user_header":"https://static001.geekbang.org/account/avatar/00/12/7e/05/431d380f.jpg","comment_is_top":false,"comment_ctime":1578554761,"is_pvip":false,"replies":[{"id":"66283","content":"每个口都可以配置的，不是死的，是可以通过命令进行配置","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1578824082,"ip_address":"","comment_id":170233,"utype":1}],"discussion_count":1,"race_medal":5,"score":"5873522057","product_id":100007101,"comment_content":"老师，有个问题请教！支持vlan的交换机之间是通过trunk口通信的，那一台交换机上trunk口有几个呢？如果只有一个，那就只能2台交换机连接在一起了，还是交换机上的所有网口都支持在普通和trunk之间随意切换？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480896,"discussion_content":"每个口都可以配置的，不是死的，是可以通过命令进行配置","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578824082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120775,"user_name":"花脸猫","can_delete":false,"product_type":"c1","uid":1519651,"ip_address":"","ucode":"FC36052CD22618","user_header":"https://static001.geekbang.org/account/avatar/00/17/30/23/e1454937.jpg","comment_is_top":false,"comment_ctime":1564994071,"is_pvip":false,"replies":[{"id":"46359","content":"同一网段的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566297047,"ip_address":"","comment_id":120775,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5859961367","product_id":100007101,"comment_content":"第一张图，机器一和机器三应该不是同一网段的吧... 包怎么过去的","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461471,"discussion_content":"同一网段的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566297047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103713,"user_name":"焦太郎","can_delete":false,"product_type":"c1","uid":1325464,"ip_address":"","ucode":"72D48AD49C07C3","user_header":"https://static001.geekbang.org/account/avatar/00/14/39/98/4c96c6f4.jpg","comment_is_top":false,"comment_ctime":1560496470,"is_pvip":false,"replies":[{"id":"49042","content":"没有变成STP协议，而是用上STP协议之后，所有的环都破了，变成了树。","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567584184,"ip_address":"","comment_id":103713,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855463766","product_id":100007101,"comment_content":"为什么变成STP协议就解决了环路问题，本人愚笨，不明点就不懂","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453976,"discussion_content":"没有变成STP协议，而是用上STP协议之后，所有的环都破了，变成了树。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567584184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":94266,"user_name":"傲娇的小宝","can_delete":false,"product_type":"c1","uid":1493922,"ip_address":"","ucode":"C079B19BCC1B7C","user_header":"https://static001.geekbang.org/account/avatar/00/16/cb/a2/5e7c557e.jpg","comment_is_top":false,"comment_ctime":1557756852,"is_pvip":false,"replies":[{"id":"49362","content":"一旦变动，的确麻烦","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567651135,"ip_address":"","comment_id":94266,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852724148","product_id":100007101,"comment_content":"大网络不通就分段调，看到哪段不通的，不过在有环路的情况下，其实不会不同的，因为相互算备份了。记得大学学的时候除了根桥还有个副根桥，根桥挂掉是副的升级（比较久了可能会记错），问题应该是网络太大的时候路由变动了会比较麻烦吧。","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449986,"discussion_content":"一旦变动，的确麻烦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567651135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86200,"user_name":"随风","can_delete":false,"product_type":"c1","uid":1476862,"ip_address":"","ucode":"037CE3554D8AB9","user_header":"https://static001.geekbang.org/account/avatar/00/16/88/fe/c18a85fe.jpg","comment_is_top":false,"comment_ctime":1555322875,"is_pvip":false,"replies":[{"id":"49658","content":"三层通信","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567696123,"ip_address":"","comment_id":86200,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850290171","product_id":100007101,"comment_content":"vlan id不同的机器是不是就没法通信了？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446915,"discussion_content":"三层通信","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567696123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83481,"user_name":"春和景明","can_delete":false,"product_type":"c1","uid":1272482,"ip_address":"","ucode":"A27970A276ECD6","user_header":"https://static001.geekbang.org/account/avatar/00/13/6a/a2/f9efd9dc.jpg","comment_is_top":false,"comment_ctime":1554620855,"is_pvip":true,"replies":[{"id":"49894","content":"如果小弟认了新的大哥就会，不认就不会","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567781139,"ip_address":"","comment_id":83481,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849588151","product_id":100007101,"comment_content":"老师，是不是小弟不会给大哥转发数据包","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446041,"discussion_content":"如果小弟认了新的大哥就会，不认就不会","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567781139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78413,"user_name":"啦啦啦","can_delete":false,"product_type":"c1","uid":1131687,"ip_address":"","ucode":"6B12EC90A62525","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/a7/171c1e86.jpg","comment_is_top":false,"comment_ctime":1553142349,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5848109645","product_id":100007101,"comment_content":"这篇文章对老师讲的是一个补充，大家可以看看https:&#47;&#47;www.cnblogs.com&#47;weiyikang&#47;p&#47;4999432.html","like_count":1},{"had_liked":false,"id":71346,"user_name":"zhj","can_delete":false,"product_type":"c1","uid":1311772,"ip_address":"","ucode":"65B9E222D6E075","user_header":"https://static001.geekbang.org/account/avatar/00/14/04/1c/b0c6c009.jpg","comment_is_top":false,"comment_ctime":1551324567,"is_pvip":false,"replies":[{"id":"50286","content":"不是广播，但是都能收到是物理层做的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567839358,"ip_address":"","comment_id":71346,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846291863","product_id":100007101,"comment_content":"你好 麻烦问下，知道了对方的具体mac地址后，在同一局域网内发给具体明确的mac地址时，同一lan内的其他机器也能收到该包吗，也就是除了arp寻址阶段的明确广播外，之后寻址后的真正具体mac地址通讯也是会广播给其他lan内的机器吗(只有这样好像vlan才显得有意义，不然vlan只是个例单纯的arp广播好像意义不大)，还望解答","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441116,"discussion_content":"不是广播，但是都能收到是物理层做的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567839358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":35920,"user_name":"阿拉D","can_delete":false,"product_type":"c1","uid":1274457,"ip_address":"","ucode":"CCED5B38E3B092","user_header":"https://static001.geekbang.org/account/avatar/00/13/72/59/1a932daf.jpg","comment_is_top":false,"comment_ctime":1540861781,"is_pvip":false,"replies":[{"id":"12808","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1540886131,"ip_address":"","comment_id":35920,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5835829077","product_id":100007101,"comment_content":"不知道刘老师还能不能看到。我想问，支持VLAN的交换机，是不是交换机转发表也会多VLAN ID这个字段？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427709,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540886131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24487,"user_name":"朝闻道","can_delete":false,"product_type":"c1","uid":1203260,"ip_address":"","ucode":"F7F2120A660285","user_header":"","comment_is_top":false,"comment_ctime":1537075590,"is_pvip":false,"replies":[{"id":"8961","content":"没有，后面讲数据中心的时候，会讲这个历程，但是不能忽略","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1537081142,"ip_address":"","comment_id":24487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5832042886","product_id":100007101,"comment_content":"数据中心都不用生成树吧，网易的数据中心有用生成树么？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424005,"discussion_content":"没有，后面讲数据中心的时候，会讲这个历程，但是不能忽略","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537081142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24294,"user_name":"Tom","can_delete":false,"product_type":"c1","uid":1109832,"ip_address":"","ucode":"00EEDE4CB11776","user_header":"","comment_is_top":false,"comment_ctime":1536892195,"is_pvip":false,"replies":[{"id":"8904","content":"lan123的说法有误导性，其实是物理网络123","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1536902949,"ip_address":"","comment_id":24294,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5831859491","product_id":100007101,"comment_content":"第一个图物理的LAN123都能广播，划分VLan为什么就广播不了了呢？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423921,"discussion_content":"lan123的说法有误导性，其实是物理网络123","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536902949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24236,"user_name":"Tom","can_delete":false,"product_type":"c1","uid":1109832,"ip_address":"","ucode":"00EEDE4CB11776","user_header":"","comment_is_top":false,"comment_ctime":1536858914,"is_pvip":false,"replies":[{"id":"8903","content":"交换机不是网关","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1536901509,"ip_address":"","comment_id":24236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5831826210","product_id":100007101,"comment_content":"交换机本身有IP吧？第一个图中，交换机是网关吗？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423891,"discussion_content":"交换机不是网关","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536901509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20923,"user_name":"jacky","can_delete":false,"product_type":"c1","uid":1183026,"ip_address":"","ucode":"5BF759FA201761","user_header":"https://static001.geekbang.org/account/avatar/00/12/0d/32/3ab2277e.jpg","comment_is_top":false,"comment_ctime":1534814690,"is_pvip":false,"replies":[{"id":"7386","content":"cos","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1534895719,"ip_address":"","comment_id":20923,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5829781986","product_id":100007101,"comment_content":"老师你好，拓扑结构连线中的数字代表什么，还是仅仅是作为标记","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422458,"discussion_content":"cos","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534895719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":13712,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1529942162,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5824909458","product_id":100007101,"comment_content":"交换机是怎么计算距离的","like_count":1},{"had_liked":false,"id":13026,"user_name":"zixuan","can_delete":false,"product_type":"c1","uid":1131300,"ip_address":"","ucode":"C72920DD05B074","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg","comment_is_top":false,"comment_ctime":1529308911,"is_pvip":false,"replies":[{"id":"4330","content":"不会读payload，是上一轮1广播的时候学习的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1529332054,"ip_address":"","comment_id":13026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5824276207","product_id":100007101,"comment_content":"前面这段例子感觉不太恰当：“当机器 2 要访问机器 1 的时候，机器 2 并不知道机器 1 的 MAC 地址，所以机器 2 会发起一个 ARP 请求。这个广播消息会到达机器 1，也同时会到达交换机 A。这个时候交换机 A 已经知道机器 1 是不可能在右边的网口的”。  从前面几节的内容仅能推出交换机是根据记录Mac来做转发，而ARP里面显然没有机器1的Mac地址的，只有机器2的Mac和机器1的IP，难到交换机会去理解并取出二层包payload?","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419505,"discussion_content":"不会读payload，是上一轮1广播的时候学习的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1529332054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11630,"user_name":"zj坚果","can_delete":false,"product_type":"c1","uid":1070601,"ip_address":"","ucode":"D6E787FF032D7B","user_header":"https://static001.geekbang.org/account/avatar/00/10/56/09/4a9d4a35.jpg","comment_is_top":false,"comment_ctime":1528252560,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5823219856","product_id":100007101,"comment_content":"stp不足之处：<br>1.每次有改变就需要再华山论剑，所以拓扑收敛<br>2.不能提供负载均衡，浪费网络资源。<br>各位老师和读者大哥，是不是这样呀，还有其他不足吗？","like_count":1},{"had_liked":false,"id":11371,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1140680,"ip_address":"","ucode":"589F41933B2DB6","user_header":"https://static001.geekbang.org/account/avatar/00/11/67/c8/61c232a2.jpg","comment_is_top":false,"comment_ctime":1528097081,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5823064377","product_id":100007101,"comment_content":"stp部分有疑问<br>1、是当一台交换机接入网络时，这台交换机向周围直接相连的发起比武？找出离掌门最近的路。<br>2、当有一台交换机离开网络时，是不是与它直接相连的都要向周围重新发起比武？<br>3、一开始每台交换机的武力值以及同周围连线的距离都要管理员手动指定吗？工作量是不是太大了？","like_count":1},{"had_liked":false,"id":11024,"user_name":"刘意","can_delete":false,"product_type":"c1","uid":1132653,"ip_address":"","ucode":"1657763A741923","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/6d/b06fd61f.jpg","comment_is_top":false,"comment_ctime":1527809119,"is_pvip":false,"replies":[{"id":"3556","content":"不在那个口就不转了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527867652,"ip_address":"","comment_id":11024,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5822776415","product_id":100007101,"comment_content":"交换机建立了mac地址表后不会转发已知mac地址的arp广播吗","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418678,"discussion_content":"不在那个口就不转了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527867652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10754,"user_name":"darrylling","can_delete":false,"product_type":"c1","uid":1140723,"ip_address":"","ucode":"2AEEEA484D1E65","user_header":"https://static001.geekbang.org/account/avatar/00/11/67/f3/43d374a6.jpg","comment_is_top":false,"comment_ctime":1527687797,"is_pvip":false,"replies":[{"id":"3432","content":"这个比较容易理解，就是口也有编号，编号小的优先级高。看来是不严谨了，我需要改进。","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527728816,"ip_address":"","comment_id":10754,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5822655093","product_id":100007101,"comment_content":"Priority Vector，优先级向量就是一组 ID 数目Root Bridge ID, Root Path Cost, Bridge ID, and Port ID。先看 Root Bridge ID再比 Root Path Cost最后比 Bridge ID。为什么没说到PORTID?","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418588,"discussion_content":"这个比较容易理解，就是口也有编号，编号小的优先级高。看来是不严谨了，我需要改进。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527728816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10730,"user_name":"文子","can_delete":false,"product_type":"c1","uid":1133748,"ip_address":"","ucode":"E75A669A3BB979","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/b4/1b079b47.jpg","comment_is_top":false,"comment_ctime":1527679545,"is_pvip":false,"replies":[{"id":"3415","content":"不在同一网段，是不会发arp的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527681470,"ip_address":"","comment_id":10730,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5822646841","product_id":100007101,"comment_content":"对于二层交换机来说，对于其无法确定的端口arp请求采取是广播的方式，将包分发出去，那如果不同网段的两台主机a，b连接在同一个交换机上，那a发送给b的arp请求，b应该能接收到，且b能回复自己的ip地址，这两台主机是不是可以通信？有点不理解。","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418581,"discussion_content":"不在同一网段，是不会发arp的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527681470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1902002,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/05/b2/93b64021.jpg","nickname":"Geek_jikuo","note":"","ucode":"D4AF9E736701B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390117,"discussion_content":"linux主机发送报文时，三层的处理：先查路由表，找到下一跳的ip地址，下一跳和自己肯定在同一网段，a和b linux主机不在同一网段，a的下一跳是网关的ip地址；二层的处理：再去查找arp表，希望找到网关的mac地址，如果没有找到就arp请求网关的mac地址，这个数据包就被发送到网关上了；\n\n只要两个网关配置了路由，linux主机 a和b就能通信","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629679465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10684,"user_name":"CH.en","can_delete":false,"product_type":"c1","uid":1142436,"ip_address":"","ucode":"F7035EBA519E48","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/a4/e3bb31e0.jpg","comment_is_top":false,"comment_ctime":1527646355,"is_pvip":false,"replies":[{"id":"3404","content":"见ieee 802.1D","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527651973,"ip_address":"","comment_id":10684,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5822613651","product_id":100007101,"comment_content":"老师，那个root  path  cost怎么来的呢？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418564,"discussion_content":"见ieee 802.1D","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527651973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358133,"user_name":"王彬","can_delete":false,"product_type":"c1","uid":1337269,"ip_address":"北京","ucode":"4B00E6B2075643","user_header":"https://static001.geekbang.org/account/avatar/00/14/67/b5/8ad13885.jpg","comment_is_top":false,"comment_ctime":1663927098,"is_pvip":true,"discussion_count":0,"race_medal":3,"score":"1663927098","product_id":100007101,"comment_content":"STP生成树协议这篇文章我觉得讲得很好，大家可以参考，https:&#47;&#47;blog.csdn.net&#47;weixin_60067160&#47;article&#47;details&#47;125871101","like_count":0},{"had_liked":false,"id":356348,"user_name":"小杰","can_delete":false,"product_type":"c1","uid":2853200,"ip_address":"浙江","ucode":"BBDF8E9F348F65","user_header":"https://static001.geekbang.org/account/avatar/00/2b/89/50/aee9fdab.jpg","comment_is_top":false,"comment_ctime":1662186818,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662186818","product_id":100007101,"comment_content":"1、由于stp相当于是根，然后根下面的树枝，会按顺序依次转发消息，如果包正好是从头到尾，那将会比较耗时。2、如果是知道ip，不知道mac，可以用arp，如果知道mac不知道ip，可以用rarp。看了下面的回答，最好还是ping 或者抓请求的完整路径","like_count":0},{"had_liked":false,"id":353608,"user_name":"。。。","can_delete":false,"product_type":"c1","uid":1035567,"ip_address":"上海","ucode":"6882BABE9C3D6B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/2f/f4adcb41.jpg","comment_is_top":false,"comment_ctime":1659598874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659598874","product_id":100007101,"comment_content":"什么时候使用交换机，什么时候使用路由器？这两个什么区别？","like_count":0},{"had_liked":false,"id":341309,"user_name":"戴宇","can_delete":false,"product_type":"c1","uid":1185158,"ip_address":"","ucode":"66A56B2D742903","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/86/cd97bf7e.jpg","comment_is_top":false,"comment_ctime":1649514499,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649514499","product_id":100007101,"comment_content":"回头来看这个spanning tree， 发现这个就是并查集","like_count":0},{"had_liked":false,"id":338923,"user_name":"Geek6900","can_delete":false,"product_type":"c1","uid":2206784,"ip_address":"","ucode":"F7683A08B17241","user_header":"","comment_is_top":false,"comment_ctime":1647788757,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647788757","product_id":100007101,"comment_content":"这个视频讲STP讲得不错<br>https:&#47;&#47;www.youtube.com&#47;watch?v=Ilpmn-H8UgE","like_count":0},{"had_liked":false,"id":335886,"user_name":"Sean","can_delete":false,"product_type":"c1","uid":2571291,"ip_address":"","ucode":"2B4D0BAAEB5AD4","user_header":"https://static001.geekbang.org/account/avatar/00/27/3c/1b/07c453a7.jpg","comment_is_top":false,"comment_ctime":1645756332,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645756332","product_id":100007101,"comment_content":"stp就是通过多个交换机复杂的链接选出最简短的到目标地址的的协议么","like_count":0},{"had_liked":false,"id":334280,"user_name":"itzzy","can_delete":false,"product_type":"c1","uid":1058553,"ip_address":"","ucode":"25C4B6F6FDE945","user_header":"https://static001.geekbang.org/account/avatar/00/10/26/f9/2a7d80a3.jpg","comment_is_top":false,"comment_ctime":1644847625,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644847625","product_id":100007101,"comment_content":"stp那块有点像图里用迪杰特斯拉&#47;弗洛伊德算法求最短路径","like_count":0},{"had_liked":false,"id":330925,"user_name":"刘玉琪","can_delete":false,"product_type":"c1","uid":2400676,"ip_address":"","ucode":"9CAFC96E725F12","user_header":"https://static001.geekbang.org/account/avatar/00/24/a1/a4/4def335a.jpg","comment_is_top":false,"comment_ctime":1642303248,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642303248","product_id":100007101,"comment_content":"有环路的第一张图，当机器2回复机器1发起的ARP请求的时候，两台交换机能学习到机器2的位置吗？","like_count":0},{"had_liked":false,"id":328093,"user_name":"i_chase","can_delete":false,"product_type":"c1","uid":1795511,"ip_address":"","ucode":"09C41C863F4EA3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/b7/058276dc.jpg","comment_is_top":false,"comment_ctime":1640527720,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1640527720","product_id":100007101,"comment_content":"stp生成过程中，各个交换机是什么时候见面比武的？最终有了生成树以后，只有树上的父子交换机节点才能互相转发报文吗？stp生成树作用是什么呢，没看到","like_count":0},{"had_liked":false,"id":324707,"user_name":"amber","can_delete":false,"product_type":"c1","uid":2849942,"ip_address":"","ucode":"AA171E49C0DF2A","user_header":"https://static001.geekbang.org/account/avatar/00/2b/7c/96/d430fa56.jpg","comment_is_top":false,"comment_ctime":1638581826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638581826","product_id":100007101,"comment_content":"vlan可以隔离广播域，那么如果需要不同的VLAN之间通信时，该如何做呢？","like_count":0},{"had_liked":false,"id":321770,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1637036073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637036073","product_id":100007101,"comment_content":"1.STP 协议能够很好地解决环路问题，但是也有它的缺点，你能举几个例子吗？<br>  ==》收敛速度不够快，从而有了 RSTP，MSTP<br><br>2.在一个比较大的网络中，如果两台机器不通，你知道应该用什么方式调试吗？<br>  ==》先看线、设备物理连通性，再从物理层往上查，查ARP表，查路由表","like_count":0},{"had_liked":false,"id":321767,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1637035690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637035690","product_id":100007101,"comment_content":"VLANID为12位，即2^12=4096，但只能分4094,0和4095保留","like_count":0},{"had_liked":false,"id":320574,"user_name":"zgrClassTestGroup","can_delete":false,"product_type":"c1","uid":1819701,"ip_address":"","ucode":"EAF7BDFD1F9D3B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEXurKI41BT8cicyYAJD8dQgA65VF8qAROmaNdK4CGlK0CdLQVAY5A1sl5FrowCvmwa4Kckic99DLw/132","comment_is_top":false,"comment_ctime":1636383312,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1636383312","product_id":100007101,"comment_content":"看的不是很明白，有没有简单易懂的书籍推荐","like_count":0},{"had_liked":false,"id":304917,"user_name":"极客","can_delete":false,"product_type":"c1","uid":2625292,"ip_address":"","ucode":"DFB3B48045EA56","user_header":"https://static001.geekbang.org/account/avatar/00/28/0f/0c/5583558f.jpg","comment_is_top":false,"comment_ctime":1627700732,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627700732","product_id":100007101,"comment_content":"看不懂了🤷🤷🤷🤷","like_count":0},{"had_liked":false,"id":303940,"user_name":"Geek_c6e7a9","can_delete":false,"product_type":"c1","uid":2712167,"ip_address":"","ucode":"13CA14BBEDA193","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Bb0c1RZVKHXhoCWYZK4I8eibFLHMNuibO8JX6t9OneceXFAIQv3mk7r6umw8f5yruZP7fLEWLic8w7AHnoMeMeoQw/132","comment_is_top":false,"comment_ctime":1627112069,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627112069","product_id":100007101,"comment_content":"这里的交换机都是三层交换机吗<br>","like_count":0},{"had_liked":false,"id":301941,"user_name":"鲍勃","can_delete":false,"product_type":"c1","uid":1142312,"ip_address":"","ucode":"9B5E4A5B1A54E5","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/28/1e307312.jpg","comment_is_top":false,"comment_ctime":1625990144,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625990144","product_id":100007101,"comment_content":"老师，请问下你有研究过工业网络里面常用的光纤环路网吗？你知道这个光纤遇到网络风暴问题是怎么解决的吗？谢谢啊","like_count":0},{"had_liked":false,"id":296496,"user_name":"一途","can_delete":false,"product_type":"c1","uid":2628926,"ip_address":"","ucode":"AF732FFB7AF22A","user_header":"https://static001.geekbang.org/account/avatar/00/28/1d/3e/e2c6e678.jpg","comment_is_top":false,"comment_ctime":1623018723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623018723","product_id":100007101,"comment_content":"看了评论解决了心中一个大迷惑。VLAN和转发表的区别。一个是对区域一个是对点。STP也真有意思，哈哈哈可能是老师讲的有意思吧。想多了解一些这种（算法？？）知识。","like_count":0},{"had_liked":false,"id":289345,"user_name":"Gabriel","can_delete":false,"product_type":"c1","uid":1437358,"ip_address":"","ucode":"714772A93E93DC","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/ae/855b7e6e.jpg","comment_is_top":false,"comment_ctime":1618985205,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618985205","product_id":100007101,"comment_content":"就从这个标题开始吧？办公室太复杂，我要回学校，上一章咱们网络是易宿舍为单位，人少，两条交换线，链接就好了。现在呢，到了办公室，办公室几百号人，成千，一栋楼，那得多少人呐。<br>这样简单的网路机构就不行了，而且网路在传输过程中，都是广播取出，寻址。<br>面对这么多，网路、就需要单方面去分层了。每个层之间联系。交换机沟通。<br>公司大了，人多了，每个部门都有自己的工作职责和秘密。当不同部门之间沟通不见得的事时，就不想让其他部门听见，那么就需要将不同部门之间都有一个标识。这样消息在传播的过程中，发现发送出来的tag不是相同的，就不把消息传递给他，达到消息隔离的作用。<br><br>ARP：address resolution protocol的简称，中文翻译过来是，地址解析协议。是通过解析网络层地址来找寻数据链路层地址和网络传输协议，他在ipv4中及其重要。<br>","like_count":0},{"had_liked":false,"id":286743,"user_name":"布拉姆","can_delete":false,"product_type":"c1","uid":1311125,"ip_address":"","ucode":"479FF27D73BCAD","user_header":"https://static001.geekbang.org/account/avatar/00/14/01/95/fd09e8a8.jpg","comment_is_top":false,"comment_ctime":1617545615,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617545615","product_id":100007101,"comment_content":"老师，STP原理示意图中，节点和节点之前的路径数值是随意定的吗？比如有的是1，有的是4。仅仅是为了举例而已吗","like_count":0},{"had_liked":false,"id":284633,"user_name":"Geek_8866d4","can_delete":false,"product_type":"c1","uid":2435064,"ip_address":"","ucode":"34EAED72C2FAD0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ia5NFICdEuzaQ8Vib0depvkB6UmxPBFib51aClSJYfCIa7tn2nXauddwxDvbxYuQ9UeRGVICLfTtDJysnDJ5EfQcg/132","comment_is_top":false,"comment_ctime":1616396023,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616396023","product_id":100007101,"comment_content":"老师，我想向你你请教一个问题，如果交换机没有确定当前网络是否存在目标MAC就将数据包转发到其他的交换器上去，那这个数据包什么时候停止转发呢<br>","like_count":0},{"had_liked":false,"id":283723,"user_name":"小东","can_delete":false,"product_type":"c1","uid":1080466,"ip_address":"","ucode":"1F8300E21A5157","user_header":"https://static001.geekbang.org/account/avatar/00/10/7c/92/63ae5917.jpg","comment_is_top":false,"comment_ctime":1615896874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615896874","product_id":100007101,"comment_content":"VLAN可以格力广播的包，但针对需要广播的包是怎么处理的呢？<br>1：DHCP协议需要广播包到DHCP Server, 那需要每个VLAN都配置一个DHCP Server，还是有其他机制<br>2: VLAN1的A电脑需要和VLAN2的B电脑通讯、A知道B的IP地址，怎么通过ARP获取B电脑的MAC地址，还是说这里已经是跨LAN了，但是他们链接的交换机，也没有路由器的功能，A用什么方式和B通信?","like_count":0},{"had_liked":false,"id":280774,"user_name":"Johar","can_delete":false,"product_type":"c1","uid":1101969,"ip_address":"","ucode":"834136A6F64CDC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/91/89123507.jpg","comment_is_top":false,"comment_ctime":1614356967,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1614356967","product_id":100007101,"comment_content":"超哥，自动探测网络拓扑有没有什么推荐的资料？","like_count":0},{"had_liked":false,"id":280607,"user_name":"我叫不客气","can_delete":false,"product_type":"c1","uid":2225314,"ip_address":"","ucode":"0540861A2FBC25","user_header":"https://static001.geekbang.org/account/avatar/00/21/f4/a2/26327ecf.jpg","comment_is_top":false,"comment_ctime":1614263118,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614263118","product_id":100007101,"comment_content":"请问一下，交换机不是有记录MAC的功能吗，比如电脑A第一次发送信息到电脑B，交换机会进行一次广播，成功之后交换机记录了电脑B在那个口，在后面电脑A继续发送信息到电脑B是不是就不用进行广播了？因此就不会产生广播问题和安全问题？","like_count":0},{"had_liked":false,"id":269722,"user_name":"www","can_delete":false,"product_type":"c1","uid":1898338,"ip_address":"","ucode":"ADC9BC655EA16C","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f7/62/947004d0.jpg","comment_is_top":false,"comment_ctime":1608771562,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608771562","product_id":100007101,"comment_content":"妙蛙，把环路结构通过算法变成逻辑上的树型结构","like_count":0},{"had_liked":false,"id":263383,"user_name":"西电","can_delete":false,"product_type":"c1","uid":2063037,"ip_address":"","ucode":"95BD4CE9D93018","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7a/bd/1f461acf.jpg","comment_is_top":false,"comment_ctime":1606121062,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606121062","product_id":100007101,"comment_content":"交换机中需要广播的内容都是ARP请求啊，具体的数据都不会被广播。为什么还要怕被抓包呢？","like_count":0},{"had_liked":false,"id":263297,"user_name":"良凯尔","can_delete":false,"product_type":"c1","uid":1806492,"ip_address":"","ucode":"8204DA338BA8F4","user_header":"https://static001.geekbang.org/account/avatar/00/1b/90/9c/288e4db2.jpg","comment_is_top":false,"comment_ctime":1606095051,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1606095051","product_id":100007101,"comment_content":"如图中的VLAN机器划分图，如果机器1要和机器2通信，机器1先广播ARP协议的包，是不是就不会转发给机器2，所以也知道不了机器2的mac地址，从而通信不了？","like_count":0},{"had_liked":false,"id":254819,"user_name":"陈德伟","can_delete":false,"product_type":"c1","uid":1106323,"ip_address":"","ucode":"5250CCF3937854","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/93/365ba71d.jpg","comment_is_top":false,"comment_ctime":1603192683,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603192683","product_id":100007101,"comment_content":"1.，STP协议的问题：A、太复杂，需要较长时间才能形成层级  B、不能充分利用交换机的性能，可能有的流量大，有的小，但和层级不匹配  2，使用traceroute之类的命令，看是在哪一个转发路径上中断的，然后具体看该路径的路由转发表；或者能拿到网络拓扑查看","like_count":0},{"had_liked":false,"id":254523,"user_name":"蚝不鱿鱼","can_delete":false,"product_type":"c1","uid":1428043,"ip_address":"","ucode":"5DB98E406F1D3E","user_header":"https://static001.geekbang.org/account/avatar/00/15/ca/4b/c1ace3aa.jpg","comment_is_top":false,"comment_ctime":1603122592,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603122592","product_id":100007101,"comment_content":"好好跟大佬学起来，大家加油","like_count":0},{"had_liked":false,"id":250252,"user_name":"yudh","can_delete":false,"product_type":"c1","uid":1772912,"ip_address":"","ucode":"CC1F12DC674280","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqI3D6RUpstvFJRLU3dxvFbUqicaTXudNScMRl7fTiaTwGeVAlHINZ8fqQUb70hV4LqMfjXYX70R5bA/132","comment_is_top":false,"comment_ctime":1601003274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601003274","product_id":100007101,"comment_content":"老师，环路问题那张图，机器1 发起广播，机器2 是可以收到的，机器2 发起广播，交换机A 和 交换机B 不就都可以收到广播，知道机器2 在哪个局域网了吗？为什么说它们不知道在哪个局域网呢？","like_count":0},{"had_liked":false,"id":247616,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","comment_is_top":false,"comment_ctime":1599778595,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599778595","product_id":100007101,"comment_content":"STP收敛通过华山论剑方式来讲解，十分生动形象。这个也不能觉得听懂了，也得自己动手试试。","like_count":0},{"had_liked":false,"id":247362,"user_name":"浩楠","can_delete":false,"product_type":"c1","uid":2164409,"ip_address":"","ucode":"97F146863F3645","user_header":"https://static001.geekbang.org/account/avatar/00/21/06/b9/0bf35c12.jpg","comment_is_top":false,"comment_ctime":1599669621,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599669621","product_id":100007101,"comment_content":"老师，VLAN的原理是通过限制ARP请求获取Mac地址么？如果是，说明在不同VLAN口中ARP请求是不能进行的？","like_count":0},{"had_liked":false,"id":242646,"user_name":"郑祖煌","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1597803718,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597803718","product_id":100007101,"comment_content":"1.当这个网络中有机器移除或者宕机的时候就会重新计算，越是 根交换机 或者说是 离根交换机越近的机器 计算的量就越大。<br>2. 通过ping和抓包工具","like_count":0},{"had_liked":false,"id":239482,"user_name":"搬瓦工","can_delete":false,"product_type":"c1","uid":1474993,"ip_address":"","ucode":"3DC2152A418CBE","user_header":"https://static001.geekbang.org/account/avatar/00/16/81/b1/10609c05.jpg","comment_is_top":false,"comment_ctime":1596545214,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596545214","product_id":100007101,"comment_content":"我有最近经历了一次断网事件，有很多疑问。事情是这样的，我们学校实验室有根网线连到一个计算机的A1网卡上，通过认证登陆后，又通过这台计算机的另一张A2网卡连到了路由器的wan口，再将路由器的lan口与交换机相连，从而使得我的电脑能够上网。我平时上网很正常，我的电脑和路由器是一个网段，可以通过网关的ip地址登陆路由器。<br>但是，有一天实验室停电了，来电后就断网了，我去检查的时候发现负责认证的电脑是可以上网的但是，我的电脑没网，也无法登陆路由器。我将路由器lan口插到朋友的笔记本上，因为笔记本的网关和学校的不太一样，所以我设置了笔记本网卡的ip地址和网关地址，随后笔记本就可以上网了并且可以登陆路由器，然后再把网线插回到交换机实验室就来网了。然而出现了一个奇怪的现象，我的电脑虽然可以正常上网，ping路由器也ping得通，可就是无法登陆路由器。<br>我的问题是：<br>1. 我的电脑必须和路由器是一个网段才能上网么？<br>2. 路由器无线网卡的网段和路由器的有线网卡网段必须不同么？为什么?<br>3. 能够大致推断一下实验室断网可能的原因么？<br>4. 我把笔记本连到路由器lan口后只是设置了笔记本网卡的网关，又把线插回到交换机上为什么就来网了？<br>5. 为什么我的电脑无法登陆路由器了？","like_count":0},{"had_liked":false,"id":238448,"user_name":"惘 闻","can_delete":false,"product_type":"c1","uid":1181650,"ip_address":"","ucode":"C5909F034BF072","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","comment_is_top":false,"comment_ctime":1596171075,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596171075","product_id":100007101,"comment_content":"我有疑问，一开始 1不是已经知道了2的位置了吗，而且包在循环转圈，每次都是广播形式，每次都会知道2的位置吧。为什么老师说转了一圈回来之后1还是不知道，仍然会继续发送广播包呢？","like_count":0},{"had_liked":false,"id":233929,"user_name":"勇闯天涯","can_delete":false,"product_type":"c1","uid":1496539,"ip_address":"","ucode":"3C0F9F7DA2CA9A","user_header":"https://static001.geekbang.org/account/avatar/00/16/d5/db/3f9499d1.jpg","comment_is_top":false,"comment_ctime":1594521868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594521868","product_id":100007101,"comment_content":"老师，VLAN通过在二层的头部插入一个TAG后，不是破坏了二层数据包格式了吗？交换机怎么就知道跳过目标MAC和源MAC后，第三个字段就是VLAN ID呢？正常的以太网数据链路层格式中，第三个字段是“类型”，这点没有我没有想通","like_count":0},{"had_liked":false,"id":228464,"user_name":"Wintersweet","can_delete":false,"product_type":"c1","uid":1135672,"ip_address":"","ucode":"174B9EC2FACE19","user_header":"https://static001.geekbang.org/account/avatar/00/11/54/38/ff728ee3.jpg","comment_is_top":false,"comment_ctime":1592703288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592703288","product_id":100007101,"comment_content":"“程序员啊，你就监听 VLAN 10 吧，里面除了代码，啥都没有”，这句话感觉就像在对着我说。技术岗位做久了，动不动就想抓个包来看看的冲动已经深入骨髓了","like_count":0},{"had_liked":false,"id":226014,"user_name":"湮汐","can_delete":false,"product_type":"c1","uid":1106268,"ip_address":"","ucode":"FB6185621891E5","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/5c/86606d9c.jpg","comment_is_top":false,"comment_ctime":1591928774,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1591928774","product_id":100007101,"comment_content":"不太理解图一，lan1,lan2,lan3应该是同一个网段吧？同一个网段不应该就是一个局域网吗？为啥分三个呢？还是这三个局域网是不同的网段？<br>技术太菜了，原谅我提出这么傻逼的问题。","like_count":0},{"had_liked":false,"id":222747,"user_name":"小侠","can_delete":false,"product_type":"c1","uid":1045025,"ip_address":"","ucode":"A35A61061E41B2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/21/00600713.jpg","comment_is_top":false,"comment_ctime":1590904029,"is_pvip":false,"replies":[{"id":"83163","content":"谢谢","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1591839228,"ip_address":"","comment_id":222747,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1590904029","product_id":100007101,"comment_content":"掌门的比喻非常形象","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496901,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591839228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219330,"user_name":"张舒","can_delete":false,"product_type":"c1","uid":2000766,"ip_address":"","ucode":"6D8A19682014B2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epEuxNkyqFG5Gpicu8XALibeicQLOlicL64tKw40J4zTWOvhAJV6CJu2GVzJG0UucIaSKzia5hzxicyKQaQ/132","comment_is_top":false,"comment_ctime":1589989878,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589989878","product_id":100007101,"comment_content":"原老大被迫改做不如自己的小弟的小弟，这种是不是会造成原先性能优秀的交换机资源浪费呢？","like_count":0},{"had_liked":false,"id":216727,"user_name":"饭粒","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1589333125,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589333125","product_id":100007101,"comment_content":"有个疑问：首轮机器1访问机器4时发送ARP广播，它的IP地址和MAC地址会被其他收到广播的机器ARP缓存到吗？如果缓存了，后续机器2访问机器1是不是就不需要ARP请求了？","like_count":0},{"had_liked":false,"id":214392,"user_name":"意无尽","can_delete":false,"product_type":"c1","uid":1234489,"ip_address":"","ucode":"DA179626C46B81","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/39/6b45878d.jpg","comment_is_top":false,"comment_ctime":1588738028,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588738028","product_id":100007101,"comment_content":"总结：<br><br>当交换机较少的时候，一开始要传输包的时候，并不知道谁是谁，经过第一次传输后，交换机学习了知道哪个是哪个(拓扑结构)，可以提高传输的效率。<br><br>但是，当交换机数量越来越多的时候，会遭遇环路问题，让网络包迷路，这就需要使用 STP 协议，即最小生成树。<br><br>STP 的工作过程：<br><br>一开始各自为营，每个网桥都被分配了一个 ID，这个 ID 里有管理员分配的优先级。<br><br>然后各个节点会逐渐找出树根，慢慢形成树。<br><br>如何解决广播问题和安全问题？<br><br>为了解决网络中被抓包导致数据的不安全，有两种方法来解决这样的问题：<br><br>1) 物理隔离。每个部门都单独设置一个交换机。单独配置自己的子网，部门之间的沟通靠路由器。<br><br>存在的问题：这样的问题在于，有的部门人多，有的部门人少。人少的部门慢慢人会变多，人多的部门也可能人越变越少。如果每个部门有单独的交换机，口多了浪费，少了又不够用。<br><br>2) 虚拟隔离，VLAN，或者叫虚拟局域网。在原来的二层的头上加一个 TAG，里面有一个 VLAN ID，一共 12 位。<br><br>我们可以设置交换机每个口所属的 VLAN。这样只有相同 VLAN 的包，才会互相转发，不同 VLAN 的包，是看不到的。","like_count":0},{"had_liked":false,"id":213270,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1588347692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588347692","product_id":100007101,"comment_content":"比武的例子很容易讲明白了STP协议使用最小生成树的算法解决环路问题的过程。文章很有趣，是看了老师在B站的视频，就毫不犹豫的参加了课程。之前感觉网络协议离我很远，知道一点就行了，也被《TCP&#47;IP详解》这类书的封皮吓到过，觉得这些理论又难又无聊。老师的文章和您在视频中一样风趣幽默。<br><br>学习总结：<br><br>STP 协议<br>使用最小生成树算法，将有环路的图变成没有环路的树，从而解决环路问题。<br>缺点：对于跨地域甚至跨国组织的网络支持，很难，因为计算量过大！","like_count":0},{"had_liked":false,"id":209346,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1587539823,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587539823","product_id":100007101,"comment_content":"机器1在发送消息给机器2的时候,会发送一个广播包,这时候交换A和机器2都能收到,A会会将广播包转发出去,而机器2收到会返回一个普通数据包,但不是广播的包,这个包只会在第一次交给交换机A的时候去广播出去,后来就学会了,不广播了,是这样吗","like_count":0},{"had_liked":false,"id":202755,"user_name":"马以","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1586062986,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586062986","product_id":100007101,"comment_content":"vlan_id怎么设置呢？","like_count":0},{"had_liked":false,"id":196335,"user_name":"Captain","can_delete":false,"product_type":"c1","uid":1468381,"ip_address":"","ucode":"126BF68EEAD76E","user_header":"https://static001.geekbang.org/account/avatar/00/16/67/dd/7d71c96b.jpg","comment_is_top":false,"comment_ctime":1585273643,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585273643","product_id":100007101,"comment_content":"我很想知道，交换机和路由器有什么区别？","like_count":0},{"had_liked":false,"id":191430,"user_name":"宋健","can_delete":false,"product_type":"c1","uid":1283082,"ip_address":"","ucode":"7DD1CAB40440C3","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/0a/7f7c9b25.jpg","comment_is_top":false,"comment_ctime":1584772386,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584772386","product_id":100007101,"comment_content":"学习啦！","like_count":0},{"had_liked":false,"id":191429,"user_name":"宋健","can_delete":false,"product_type":"c1","uid":1283082,"ip_address":"","ucode":"7DD1CAB40440C3","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/0a/7f7c9b25.jpg","comment_is_top":false,"comment_ctime":1584772371,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584772371","product_id":100007101,"comment_content":"很不错生动形象","like_count":0},{"had_liked":false,"id":191428,"user_name":"宋健","can_delete":false,"product_type":"c1","uid":1283082,"ip_address":"","ucode":"7DD1CAB40440C3","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/0a/7f7c9b25.jpg","comment_is_top":false,"comment_ctime":1584772363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584772363","product_id":100007101,"comment_content":"我觉得老师讲的很好啊！","like_count":0},{"had_liked":false,"id":191420,"user_name":"宋健","can_delete":false,"product_type":"c1","uid":1283082,"ip_address":"","ucode":"7DD1CAB40440C3","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/0a/7f7c9b25.jpg","comment_is_top":false,"comment_ctime":1584772163,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584772163","product_id":100007101,"comment_content":"收获很大","like_count":0},{"had_liked":false,"id":190955,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","comment_is_top":false,"comment_ctime":1584712983,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584712983","product_id":100007101,"comment_content":"文中讲STP时以华山论讲，江湖比武为例，是有益于理解STP整个选举和工作过程，但读者能不能先正统学院派，再来接地气地思考和升华更好呢？对于问题1、在STP结合VRRP使用时要二三层统一；2、网络不通两把杀手锏：ping、trancert程序。","like_count":0},{"had_liked":false,"id":182793,"user_name":"lakeslove","can_delete":false,"product_type":"c1","uid":1277081,"ip_address":"","ucode":"65E14D29D3C981","user_header":"https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg","comment_is_top":false,"comment_ctime":1582868096,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582868096","product_id":100007101,"comment_content":"所谓的“数字表示优先级”是怎么表示的？感觉从图上看不出来哪个比哪个优先级高啊","like_count":0},{"had_liked":false,"id":181679,"user_name":"豪曹","can_delete":false,"product_type":"c1","uid":1106109,"ip_address":"","ucode":"93C1CE47B74899","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/bd/3abd26fd.jpg","comment_is_top":false,"comment_ctime":1582614807,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582614807","product_id":100007101,"comment_content":"请教一下，第一个图中，这些电脑、交换机组成的不是一个局域网吗，为什么会有3个LAN，还有这个时候这些机器的IP是不是必须在同一个网段下？","like_count":0},{"had_liked":false,"id":180470,"user_name":"一个假的程序员","can_delete":false,"product_type":"c1","uid":1062414,"ip_address":"","ucode":"1CC0521D665C3E","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/0e/a41a4cdb.jpg","comment_is_top":false,"comment_ctime":1582291028,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582291028","product_id":100007101,"comment_content":"“使用 VLAN，一个交换机上会连属于多个局域网的机器，那交换机怎么区分哪个机器属于哪个局域网呢”这句话中的局域网指的应该是虚拟局域网吧？","like_count":0},{"had_liked":false,"id":179231,"user_name":"肖小强","can_delete":false,"product_type":"c1","uid":1245065,"ip_address":"","ucode":"A929A8D1DAD3C4","user_header":"https://static001.geekbang.org/account/avatar/00/12/ff/89/32e3f682.jpg","comment_is_top":false,"comment_ctime":1581941154,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581941154","product_id":100007101,"comment_content":"老师，我的理解是，stp协议使得在某些交换机下，不如交换机A，在A中包只能从左到右，不能从右到左是吧?那如果右边的机器要向左边的机器发送包，怎么处理的?是不是存在另外一台交换机，它的包的转发方向刚好和A相反?","like_count":0},{"had_liked":false,"id":178062,"user_name":"kissrain","can_delete":false,"product_type":"c1","uid":1120583,"ip_address":"","ucode":"2177C53E3B2DCC","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/47/b27f1314.jpg","comment_is_top":false,"comment_ctime":1581580716,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581580716","product_id":100007101,"comment_content":"第一张图中，2和8中间的连线是1 5和6中间的连线是1，为什么1和7中间的连线是3，这个3代表什么呢？","like_count":0},{"had_liked":false,"id":167590,"user_name":"吃水不用钱","can_delete":false,"product_type":"c1","uid":1797135,"ip_address":"","ucode":"8A5D5978F0D4E5","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6c/0f/7d242cc2.jpg","comment_is_top":false,"comment_ctime":1577869775,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577869775","product_id":100007101,"comment_content":"在上面的过程中，交换机 A 和交换机 B 都是能够学习到这样的信息：机器 1 是在左边这个网口的。<br><br>请问下交互机B如何学习到 机器 1 是在左边这个网口的。<br>我能理解A是如何学习到 机器 1 是在左边这个网口。但对于B来说，它收到的MAC帧，源mac地址应该是A,B应该只能确定，与自己端口相连的机器里面没有 机器1.","like_count":0},{"had_liked":false,"id":156926,"user_name":"饭粒","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1574997308,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574997308","product_id":100007101,"comment_content":"老师，请问下，文中说的局域网和子网有什么区别？或者说怎么区分？","like_count":0},{"had_liked":false,"id":153727,"user_name":"美美","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1574299868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574299868","product_id":100007101,"comment_content":"交换机的作用是什么，既然是划分局域网，为什么不用路由器","like_count":0},{"had_liked":false,"id":152774,"user_name":"Eleven","can_delete":false,"product_type":"c1","uid":1168452,"ip_address":"","ucode":"FB4A0C8CA732BE","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/44/0ec958f4.jpg","comment_is_top":false,"comment_ctime":1574078188,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574078188","product_id":100007101,"comment_content":"STP的问题我觉得有以下几点：<br>1.第一“统一整个武林”是需要时间的，在这个期间其实还是会出现环路的问题。<br>2.第二，这个好像和软件界的一致性算法有点类似，我们这边会出现脑裂的情况，不知道STP是否会有这种情况出现。<br>3.第三，就像刘超老师说的，天下分久必合，合久必分，是不是间隔多久这个“武林争夺”的过程又会出现，这期间又回再出现环路问题。","like_count":0},{"had_liked":false,"id":151007,"user_name":"teddytyy","can_delete":false,"product_type":"c1","uid":1268738,"ip_address":"","ucode":"E1569D81A4154E","user_header":"https://static001.geekbang.org/account/avatar/00/13/5c/02/e7af1750.jpg","comment_is_top":false,"comment_ctime":1573642232,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573642232","product_id":100007101,"comment_content":"STP节点优先级变动会导致重新产生最小生成树","like_count":0},{"had_liked":false,"id":148513,"user_name":"雨后的夜","can_delete":false,"product_type":"c1","uid":1359202,"ip_address":"","ucode":"0E8C183AEB02EF","user_header":"https://static001.geekbang.org/account/avatar/00/14/bd/62/283e24ab.jpg","comment_is_top":false,"comment_ctime":1573023193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573023193","product_id":100007101,"comment_content":"我觉得这个比喻很赞也更好理解，总结来说就是，生成树的过程中，节点的级别会发生变化，拓扑也在变化，直到生成最终的一棵树。一开始都是自立山头，PK各自武功收小弟，但后来发现更重要的还要比谁的掌门牛，另外谁离更厉害的掌门近还可以改投其下。靠山 &gt; 距离 &gt; 武功。","like_count":0},{"had_liked":false,"id":145595,"user_name":"方寸","can_delete":false,"product_type":"c1","uid":1686496,"ip_address":"","ucode":"FABF9235F9DF3C","user_header":"https://static001.geekbang.org/account/avatar/00/19/bb/e0/72d9448e.jpg","comment_is_top":false,"comment_ctime":1572322841,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572322841","product_id":100007101,"comment_content":"有个问题，机器1怎样可以知道机器4的mac地址？","like_count":0},{"had_liked":false,"id":144659,"user_name":"INFRA_1","can_delete":false,"product_type":"c1","uid":1655744,"ip_address":"","ucode":"7DA033D5278E58","user_header":"","comment_is_top":false,"comment_ctime":1571991320,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571991320","product_id":100007101,"comment_content":"老师，对于环的问题，既然路由器a已经学会了，为什么还会把包发到2中呢？","like_count":0},{"had_liked":false,"id":143979,"user_name":"扶幽","can_delete":false,"product_type":"c1","uid":1322612,"ip_address":"","ucode":"1400EDFF8970D3","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/74/88c613e0.jpg","comment_is_top":false,"comment_ctime":1571819527,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571819527","product_id":100007101,"comment_content":"1，可能会消耗的性能比较多，使得延时更大；<br>2，先ping本地回环地址，看是否可以ping通，判断是否个人主机网卡有问题；再ping同一局域网下其他机子，判断是否局域网下设备出现问题；依次，，，，","like_count":0},{"had_liked":false,"id":142360,"user_name":"Geek_4c94d2","can_delete":false,"product_type":"c1","uid":1503340,"ip_address":"","ucode":"B4A037EBAA2D21","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKU0MC8lDhUl8Z7kGVFRMUxK9iaBeKDSnhJ5mgD1lCzvXibjlDDicjeHeBfMyEttibREvG9BUpOeNHQbg/132","comment_is_top":false,"comment_ctime":1571359719,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1571359719","product_id":100007101,"comment_content":"感谢作者。有个疑问，可以使用vlan来划分虚拟局域网。但是这个vlan，是在第二层包头中。那这个vlan的值是由谁来填充的呢？用户的操作系统填充的吗？还是由交换机来填充的","like_count":0},{"had_liked":false,"id":138967,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1570519940,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570519940","product_id":100007101,"comment_content":"traceroute命令不错","like_count":0},{"had_liked":false,"id":134656,"user_name":"JoyQueen","can_delete":false,"product_type":"c1","uid":1141092,"ip_address":"","ucode":"E7AD7F9237A886","user_header":"https://static001.geekbang.org/account/avatar/00/11/69/64/335525c5.jpg","comment_is_top":false,"comment_ctime":1568886940,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568886940","product_id":100007101,"comment_content":"去年买的课，现在才有机会听，很好，受益匪浅，有助于我夯实基础。","like_count":0},{"had_liked":false,"id":134550,"user_name":"木乃伊","can_delete":false,"product_type":"c1","uid":1173789,"ip_address":"","ucode":"CD63B29412D698","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjkibwInXV0IDWMF4aaN7rzrEXs1bVJVP26RUKVAA3gWm4suplQq9icd6F6SR5EySd2QlDS14G0ibLQ/132","comment_is_top":false,"comment_ctime":1568863286,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568863286","product_id":100007101,"comment_content":"老师，那个图是真的看不懂，粗线代表什么，细线代表什么，数字代表什么完全找不到对应。还有过多的比喻最后的结果就是忘记了本源吗T_T，感觉到后面我已经搞不懂对应关系了，2333333","like_count":0},{"had_liked":false,"id":131219,"user_name":"飞飞","can_delete":false,"product_type":"c1","uid":1085471,"ip_address":"","ucode":"82EC77571644DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/90/1f/a3fb1e0f.jpg","comment_is_top":false,"comment_ctime":1567673894,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567673894","product_id":100007101,"comment_content":"环路问题，当机器1的广播从B左到B右，然后到A右，最后到A左，此时A左发送广播时机器2会主动响应说，这是我的MAC地址，此时不就结束不再循环了吗？<br>对此很疑惑，希望老师指点一下<br>十分感谢","like_count":0},{"had_liked":false,"id":128975,"user_name":"多襄丸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1566998875,"is_pvip":false,"replies":[{"id":"48750","content":"谢谢，记笔记是个好习惯","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567493671,"ip_address":"","comment_id":128975,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566998875","product_id":100007101,"comment_content":"大赞 超哥 我从18年5月份买的专栏 当时看不太懂 觉得很吃力 现在才看到第六讲 但是没每讲都理解了 都要做笔记记录超哥的讲解和留言 <br> 极客时间的超哥太多了 都喜欢! <br>等我看完了 凭借这个专栏啃透一半网络协议 我给杭州网易的超哥寄旌旗!","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465202,"discussion_content":"谢谢，记笔记是个好习惯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567493671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127166,"user_name":"Januarius","can_delete":false,"product_type":"c1","uid":1519994,"ip_address":"","ucode":"A408191A532771","user_header":"https://static001.geekbang.org/account/avatar/00/17/31/7a/f8b0a282.jpg","comment_is_top":false,"comment_ctime":1566573699,"is_pvip":false,"replies":[{"id":"48780","content":"赞，多看几遍是王道","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567495804,"ip_address":"","comment_id":127166,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566573699","product_id":100007101,"comment_content":"看了几遍终于搞明白了O(∩_∩)O哈哈~","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464350,"discussion_content":"赞，多看几遍是王道","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567495804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124136,"user_name":"-_-","can_delete":false,"product_type":"c1","uid":1304884,"ip_address":"","ucode":"6B70C4BB44D391","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/34/83025564.jpg","comment_is_top":false,"comment_ctime":1565829967,"is_pvip":false,"replies":[{"id":"46281","content":"管理员可以设置","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566280924,"ip_address":"","comment_id":124136,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565829967","product_id":100007101,"comment_content":"优先级向量是自己设置的吗，那些ID是怎么来的，交换机本来自带的吗，还是拿来自己设置的","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463026,"discussion_content":"管理员可以设置","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566280924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122325,"user_name":"Roger","can_delete":false,"product_type":"c1","uid":1319960,"ip_address":"","ucode":"78EA978779F92E","user_header":"https://static001.geekbang.org/account/avatar/00/14/24/18/8edc6b97.jpg","comment_is_top":false,"comment_ctime":1565339000,"is_pvip":false,"replies":[{"id":"46326","content":"不会的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566289595,"ip_address":"","comment_id":122325,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565339000","product_id":100007101,"comment_content":"在图一中，当机器2要访问机器1时，机器1会不会收到两个相同的推送？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462207,"discussion_content":"不会的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566289595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134511,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/af/50c3e8dd.jpg","nickname":"登品","note":"","ucode":"DA94DA7A7CFE3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377063,"discussion_content":"难道机器2的广播只有交换机a能收到❓","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622474255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96173,"user_name":"糖小宝","can_delete":false,"product_type":"c1","uid":1386966,"ip_address":"","ucode":"15A8B649F668B1","user_header":"https://static001.geekbang.org/account/avatar/00/15/29/d6/6dafc576.jpg","comment_is_top":false,"comment_ctime":1558348800,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1558348800","product_id":100007101,"comment_content":"老师您好，看了您讲的STP协议的工作过程，您看我这样理解对不对：<br><br>复杂的网络拓扑结构易形成环路<br><br>环路会造成广播数据风暴，致使网路阻塞<br><br>为解决这一问题，在形成环路的地方应用STP协议打破环路<br><br>图4中，1、5、6为环路<br><br>应用STP算法1为根交换机<br><br>5到1距离为4，6到1距离为2，取最近值<br>故打破1到5的连接，进而避免环路<br><br><br><br>但实际运用中，STP协议会对整个网络结构进行计算，无法智能判断局部，效率很低<br><br>再加上，网络中若节点改变，根据STP协议就要对整个网络进行重新计算<br><br>再再加上，若节点变化频繁，那就需要频繁的重新计算，那效率就低的令人窒息了","like_count":0},{"had_liked":false,"id":91331,"user_name":"麦芒小蚱蜢","can_delete":false,"product_type":"c1","uid":1270410,"ip_address":"","ucode":"5EC406B13B798E","user_header":"https://static001.geekbang.org/account/avatar/00/13/62/8a/28abe548.jpg","comment_is_top":false,"comment_ctime":1556982405,"is_pvip":false,"replies":[{"id":"49484","content":"没有，多看几遍就熟了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567675104,"ip_address":"","comment_id":91331,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1556982405","product_id":100007101,"comment_content":"我是不是走错片场了，非计算机专业，从事非网络的相关的后端编码工作，本来是抱着学习一下网络相关的内容，虽然老师讲的很有趣，也能听大概明白，但是对于里面出现的名词，大多都很陌生 -_-","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448890,"discussion_content":"没有，多看几遍就熟了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567675104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1702502,"avatar":"https://static001.geekbang.org/account/avatar/00/19/fa/66/1edbfe83.jpg","nickname":"フォドラの暁風","note":"","ucode":"609C59A2D2B4B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36978,"discussion_content":"服务端很有必要看下这个课程的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571474670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87490,"user_name":"Geek_f6f02b","can_delete":false,"product_type":"c1","uid":1365476,"ip_address":"","ucode":"29E5C81FF63E77","user_header":"","comment_is_top":false,"comment_ctime":1555617387,"is_pvip":false,"replies":[{"id":"49604","content":"不能的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567691365,"ip_address":"","comment_id":87490,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555617387","product_id":100007101,"comment_content":"每个网桥都被分配了一个 ID。这个 ID 里有管理员分配，我想问这个优先级有没有可能管理员失误分配错误了，或者机器本身问题性能下降了，能通过BPDU来自动修正优先级吗？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447481,"discussion_content":"不能的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567691365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86214,"user_name":"随风","can_delete":false,"product_type":"c1","uid":1476862,"ip_address":"","ucode":"037CE3554D8AB9","user_header":"https://static001.geekbang.org/account/avatar/00/16/88/fe/c18a85fe.jpg","comment_is_top":false,"comment_ctime":1555325922,"is_pvip":false,"replies":[{"id":"49657","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567696069,"ip_address":"","comment_id":86214,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555325922","product_id":100007101,"comment_content":"1向2首次发送消息时，应该先通过arp获得2的mac地址吧？这样交换机A就知道了1和2的mac地址，下次1再向2发消息时，由于消息里有源mac和目的mac，所以交换机就知道了2在左侧，不需要向右边广播了，不知道这样理解对不对。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446922,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567696069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86209,"user_name":"随风","can_delete":false,"product_type":"c1","uid":1476862,"ip_address":"","ucode":"037CE3554D8AB9","user_header":"https://static001.geekbang.org/account/avatar/00/16/88/fe/c18a85fe.jpg","comment_is_top":false,"comment_ctime":1555324910,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555324910","product_id":100007101,"comment_content":"老师能说详细解答下 @ magict4的问题呢？其实一直想问的是能否提供一个平台（qq群、微信群等）可以让学员相互交流解答问题也好，我看每节课下面都有很多疑问都没有解答。感觉即可平台功能太简陋了，不太适合教学。基础的课堂交流、学生相互交流答疑功能都没有，真说不过去。","like_count":0},{"had_liked":false,"id":83425,"user_name":"David","can_delete":false,"product_type":"c1","uid":1477617,"ip_address":"","ucode":"65017975243D41","user_header":"","comment_is_top":false,"comment_ctime":1554592361,"is_pvip":false,"replies":[{"id":"49901","content":"是的，做了人家的小弟，就不能做人家老大了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567781432,"ip_address":"","comment_id":83425,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554592361","product_id":100007101,"comment_content":"请问在情形二：同门相遇时，下级交换机修改上级关系时，在新建上级关系时是否同时删除旧的关系？<br>","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446019,"discussion_content":"是的，做了人家的小弟，就不能做人家老大了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567781432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76430,"user_name":"天王","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1552611277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552611277","product_id":100007101,"comment_content":"交换机，用来判断目标mac地址，转到哪台电脑上。第一次不知道转到哪个口，会都转，会记住mac地址来自于哪个口，有回复的话，直接就转出去了。同一个局域网的不同机器之间，用ARP广播，机器1通过ip找机器2，机器2应答，来通过ip找到的mac地址。在一个局域网广播，其他机器和交换机都能收到，如果是在一个局域网，目标机器会应答，否则交换机会广播到其他局域网。2个交换机之间可以形成回环，用华山论剑，将图转成没回环的树。","like_count":0},{"had_liked":false,"id":69487,"user_name":"传说中的成大大","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1550755448,"is_pvip":false,"replies":[{"id":"50294","content":"会啊，所以会广播来，广播去，形成环","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567840003,"ip_address":"","comment_id":69487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550755448","product_id":100007101,"comment_content":"我不太明白的是 交换机A B那个图  机器1广播要找机器2  交换机A左边端口收到了广播到局域网2 然后到达 交换机B端口,为啥交换机就发往局域网1了呢 难道交换机B就不会收到这个广播吗？如果交换机B左边端口在最开始也收到了广播又该如何处理呢？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440143,"discussion_content":"会啊，所以会广播来，广播去，形成环","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567840003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67065,"user_name":"黄土高坡","can_delete":false,"product_type":"c1","uid":1064234,"ip_address":"","ucode":"7018F0FAE464A5","user_header":"https://static001.geekbang.org/account/avatar/00/10/3d/2a/16357640.jpg","comment_is_top":false,"comment_ctime":1550066078,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550066078","product_id":100007101,"comment_content":"问题一<br>第一张图中机器1先连接到一个【浅灰色的窄条设备】，这个【浅灰色的窄条设备】才连接到交换机A。想知道这个浅灰色窄条表示的是什么设备？<br><br>问题二<br><br>对于图一，有这么一段文字：<br><br>当机器 2 要访问机器 1 的时候，机器 2 并不知道机器 1 的 MAC 地址，所以机器 2 会发起一个 ARP 请求。这个广播消息会到达机器 1，也同时会到达交换机 A。<br><br>机器2发送的ARP广播会同时到达【机器1和交换机A】，之所以【同时到达】是不是因为这个请求分别通过【窄条设备】到达机器1，和通过【窄条设备】到达交换机A 的？","like_count":0},{"had_liked":false,"id":65404,"user_name":"陈泰成","can_delete":false,"product_type":"c1","uid":1206383,"ip_address":"","ucode":"A4C81C9765E6B2","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/6f/d2d3465a.jpg","comment_is_top":false,"comment_ctime":1549335980,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1549335980","product_id":100007101,"comment_content":"0.比喻清新脱俗，很赞<br>1.stp缺点主要应该还是网络收敛慢，无负载均衡效果<br>2.最常用的网络调试当然非属ping工具不可","like_count":0},{"had_liked":false,"id":57156,"user_name":"古夜","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1546664995,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546664995","product_id":100007101,"comment_content":"看这篇之前是不是得去百度找找金庸？岳不群是谁？封不平又是谁？","like_count":0},{"had_liked":false,"id":56357,"user_name":"古夜","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1546428529,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546428529","product_id":100007101,"comment_content":"如何解决常见的环路问题？上面的一段，交换机A怎么知道1在A的局域网内？B怎么就知道没有？","like_count":0},{"had_liked":false,"id":55300,"user_name":"Oliveryoung","can_delete":false,"product_type":"c1","uid":1239917,"ip_address":"","ucode":"1EA8AB91949B82","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/OVq8d3D1m1SkoOUL6iaerJjDfVlibDDfutGBJ3ceu2vpskOXb6ib6vS7iaLAQSUK7U5kv2xrHcdqFXR6ROo5QeAhow/132","comment_is_top":false,"comment_ctime":1546097658,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546097658","product_id":100007101,"comment_content":"https:&#47;&#47;www.youtube.com&#47;watch?v=4jXzuEu-qYE<br><br>还不清楚的童鞋建议看这个视频讲解 5分钟大概","like_count":0},{"had_liked":false,"id":53792,"user_name":"Tyella","can_delete":false,"product_type":"c1","uid":1218413,"ip_address":"","ucode":"685790B37E0CFF","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/6d/4ea904c1.jpg","comment_is_top":false,"comment_ctime":1545726098,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545726098","product_id":100007101,"comment_content":"刘老师讲的太好了，一口气学了5节，根本停不下来。","like_count":0},{"had_liked":false,"id":52630,"user_name":"caohuan","can_delete":false,"product_type":"c1","uid":1256428,"ip_address":"","ucode":"4B092E33F3DF1E","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/ec/af6d0b10.jpg","comment_is_top":false,"comment_ctime":1545458352,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545458352","product_id":100007101,"comment_content":"本篇 所得：1.接入到网络的设备越多，需要更多的交换机，交换机 很多，会形成 环路（闭环），这会不停的消耗资源，纸质耗尽资源，可以通过STP协议解决环路，让环路 变成 没有闭环的树<br><br>2.很多的交换机 面临隔离问题，可以通过 VLAN形成虚拟局域网，能解决 广播 和 安全问题。<br><br>回答老师第一个问题：STP协议的缺点1.效率不高 2.消耗资源比较多。","like_count":0},{"had_liked":false,"id":51820,"user_name":"罗格","can_delete":false,"product_type":"c1","uid":1206701,"ip_address":"","ucode":"B5DAA40E7DE008","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/ad/f5df3e6a.jpg","comment_is_top":false,"comment_ctime":1545267266,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545267266","product_id":100007101,"comment_content":"一开始的5-6，1-7，2-8，3-4是假设还是有什么依据这样初始化的？？","like_count":0},{"had_liked":false,"id":50532,"user_name":"程序员大天地","can_delete":false,"product_type":"c1","uid":1249001,"ip_address":"","ucode":"7A21F15FEE2D5B","user_header":"https://static001.geekbang.org/account/avatar/00/13/0e/e9/98b6ea61.jpg","comment_is_top":false,"comment_ctime":1545007532,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545007532","product_id":100007101,"comment_content":"精彩！","like_count":0},{"had_liked":false,"id":49604,"user_name":"王先统","can_delete":false,"product_type":"c1","uid":1236218,"ip_address":"","ucode":"4D208672C0D359","user_header":"https://static001.geekbang.org/account/avatar/00/12/dc/fa/3975f8da.jpg","comment_is_top":false,"comment_ctime":1544746851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544746851","product_id":100007101,"comment_content":"如果一个交换机所连接两个局域网所配置的ip地址段是一样的，它们之间还能通信吗？我如何指定另一个局域网的ip而不是自己所在局域网的同一个ip?","like_count":0},{"had_liked":false,"id":42750,"user_name":"乖鱼","can_delete":false,"product_type":"c1","uid":1313816,"ip_address":"","ucode":"28F9B75728044C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJx6YiaEictwmdAfVE1KBRohxfVsMYXNKqBw0WhIqiaAClCkuXpydSW0TWP7y37JKPiccpEna20zTpAlw/132","comment_is_top":false,"comment_ctime":1543033328,"is_pvip":false,"replies":[{"id":"15318","content":"这个的细节参考答疑环节","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1543056576,"ip_address":"","comment_id":42750,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543033328","product_id":100007101,"comment_content":"交换机B是如何收到机器1的广播包的，是由机器3转发的吗","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430182,"discussion_content":"这个的细节参考答疑环节","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543056576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42046,"user_name":"Ada","can_delete":false,"product_type":"c1","uid":1227248,"ip_address":"","ucode":"FFF580C333DC04","user_header":"https://static001.geekbang.org/account/avatar/00/12/b9/f0/cf8e01e5.jpg","comment_is_top":false,"comment_ctime":1542897383,"is_pvip":false,"replies":[{"id":"15143","content":"路径的距离有个值，相加","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1542947345,"ip_address":"","comment_id":42046,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1542897383","product_id":100007101,"comment_content":"假如 1 和 6 相遇。6 原来就拜在 1 的门下，只不过 6 的上司是 5，5 的上司是 1。1 发现，6 距离我才只有 2，比从 5 这里过来的 5（=4+1）近多了，那 6 就直接汇报给我吧。<br><br>老师，这里的6距离1只有2，5到1需要4+1，这是怎么算出来的啊？还是仅仅只是发个比方，这里听的有点晕。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429982,"discussion_content":"路径的距离有个值，相加","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542947345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":40734,"user_name":"最琴箫","can_delete":false,"product_type":"c1","uid":1311219,"ip_address":"","ucode":"BA67EA1A67ACF8","user_header":"https://static001.geekbang.org/account/avatar/00/14/01/f3/6464f5af.jpg","comment_is_top":false,"comment_ctime":1542672914,"is_pvip":false,"replies":[{"id":"14728","content":"会有一个边被禁掉","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1542704989,"ip_address":"","comment_id":40734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1542672914","product_id":100007101,"comment_content":"老师，图二中的环路，用stp的方式是怎么解除环路的呢？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429595,"discussion_content":"会有一个边被禁掉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542704989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":40149,"user_name":"Sisyphus","can_delete":false,"product_type":"c1","uid":1197112,"ip_address":"","ucode":"C036C3D7EF1A75","user_header":"https://static001.geekbang.org/account/avatar/00/12/44/38/36c41c84.jpg","comment_is_top":false,"comment_ctime":1542527161,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542527161","product_id":100007101,"comment_content":"可不可以理解广播风暴只会发生在交换机存在并联的场景","like_count":0},{"had_liked":false,"id":38774,"user_name":"阿拉D","can_delete":false,"product_type":"c1","uid":1274457,"ip_address":"","ucode":"CCED5B38E3B092","user_header":"https://static001.geekbang.org/account/avatar/00/13/72/59/1a932daf.jpg","comment_is_top":false,"comment_ctime":1542124672,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542124672","product_id":100007101,"comment_content":"刘老师好！<br>原文此处，“当机器 2 要访问机器 1 的时候，机器 2 并不知道机器 1 的 MAC 地址，所以机器 2 会发起一个 ARP 请求。这个广播消息会到达机器 1，也同时会到达交换机 A。这个时候交换机 A 已经知道机器 1 是不可能在右边的网口的，所以这个广播信息就不会广播到局域网二和局域网三。”<br>我有几个疑问：<br>①机器2发起的ARP请求中，只有机器1的IP地址，交换机是根据IP地址得知机器1是不可能在右边的网口的？<br>②如果是根据IP地址，那是在之前机器1发送ARP请求时获得的？<br>③如果是，那交换机不仅摘下了帧头，还看了ARP里面的数据？","like_count":0},{"had_liked":false,"id":35296,"user_name":"金龟","can_delete":false,"product_type":"c1","uid":1228500,"ip_address":"","ucode":"1C7D35C8AE8D9D","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/d4/ff1c1319.jpg","comment_is_top":false,"comment_ctime":1540512982,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1540512982","product_id":100007101,"comment_content":"老师请问下，vlan在交换机上的设置 ，是不是相当于 交换机一个口只能对应一个vlan","like_count":0},{"had_liked":false,"id":34746,"user_name":"Pakhay","can_delete":false,"product_type":"c1","uid":1029090,"ip_address":"","ucode":"87A6CAE978B081","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b3/e2/b90bf7c4.jpg","comment_is_top":false,"comment_ctime":1540280399,"is_pvip":false,"replies":[{"id":"12460","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1540357031,"ip_address":"","comment_id":34746,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1540280399","product_id":100007101,"comment_content":"我记得读书的时候学到vlan是三层的知识了，vlan划分不同网段至少应该使用三层交换机才能够通信，请老师解惑。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427319,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540357031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25104,"user_name":"云上漫步","can_delete":false,"product_type":"c1","uid":1230907,"ip_address":"","ucode":"4E9E9B2FE5E2A5","user_header":"https://static001.geekbang.org/account/avatar/00/12/c8/3b/210e32c2.jpg","comment_is_top":false,"comment_ctime":1537246525,"is_pvip":false,"replies":[{"id":"9149","content":"一般广播是，除了来的口，其他都发送","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1537256225,"ip_address":"","comment_id":25104,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537246525","product_id":100007101,"comment_content":"机器1广播，广播请求先到交换机，然后交换机会广播，然后机器2才收到。是这样过程吗，如果不是，那机器2收到机器1广播，交换机再广播，那机器2还会再一次收到吗","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424191,"discussion_content":"一般广播是，除了来的口，其他都发送","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537256225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24979,"user_name":"云上漫步","can_delete":false,"product_type":"c1","uid":1230907,"ip_address":"","ucode":"4E9E9B2FE5E2A5","user_header":"https://static001.geekbang.org/account/avatar/00/12/c8/3b/210e32c2.jpg","comment_is_top":false,"comment_ctime":1537234354,"is_pvip":false,"replies":[{"id":"9125","content":"机器一广播","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1537243241,"ip_address":"","comment_id":24979,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537234354","product_id":100007101,"comment_content":"机器1广播ARP请求，机器2收到，是交换机广播后机器2收到的，还是机器1广播收到的","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424153,"discussion_content":"机器一广播","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537243241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24965,"user_name":"马若飞","can_delete":false,"product_type":"c1","uid":1046394,"ip_address":"","ucode":"3D0327329A10AE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","comment_is_top":false,"comment_ctime":1537233742,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537233742","product_id":100007101,"comment_content":"STP选掌门的过程感觉有点像Paxos的选举，当然理念相同，算法完全不同了","like_count":0},{"had_liked":false,"id":24496,"user_name":"wrzgeek","can_delete":false,"product_type":"c1","uid":1031589,"ip_address":"","ucode":"69C4980053E388","user_header":"","comment_is_top":false,"comment_ctime":1537084121,"is_pvip":false,"replies":[{"id":"8980","content":"6会转发他们掌门的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1537144620,"ip_address":"","comment_id":24496,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537084121","product_id":100007101,"comment_content":"情形2，1和6比的时候是怎么比的，6不是不能发送BPDU吗？<br>","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424008,"discussion_content":"6会转发他们掌门的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537144620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20176,"user_name":"冷磊","can_delete":false,"product_type":"c1","uid":1006765,"ip_address":"","ucode":"08FF1DA51FE323","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/ad/1769fe7e.jpg","comment_is_top":false,"comment_ctime":1534298283,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1534298283","product_id":100007101,"comment_content":" 拓扑结构的地方：当机器 3 要访问机器 1 的时候，也需要发起一个广播的 ARP 请求。这个时候交换机 A 和交换机 B 都能够收到这个广播请求。交换机 A 当然知道主机 A 是在左边这个网口的，所以会把广播消息转发到局域网一。<br><br>应该是“交换机 A 当然知道 机器 1（主机 A）A是在左边这个网口的”。。原文表述有歧义","like_count":0},{"had_liked":false,"id":17792,"user_name":"千年孤独","can_delete":false,"product_type":"c1","uid":1037215,"ip_address":"","ucode":"282CA1A68E8774","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d3/9f/36ea3be4.jpg","comment_is_top":false,"comment_ctime":1532956519,"is_pvip":false,"replies":[{"id":"6217","content":"变成树就没有环了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1533039772,"ip_address":"","comment_id":17792,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1532956519","product_id":100007101,"comment_content":"说了这么多，回到最开始的交换机A和交换机B图,还没说应用了stp协议后如何破环？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421273,"discussion_content":"变成树就没有环了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533039772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17789,"user_name":"生煎馒头","can_delete":false,"product_type":"c1","uid":1130759,"ip_address":"","ucode":"9873671284E2AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/41/07/e9ea3254.jpg","comment_is_top":false,"comment_ctime":1532954619,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532954619","product_id":100007101,"comment_content":"老师那个STP 是不是就是最短路径算法吗？","like_count":0},{"had_liked":false,"id":17679,"user_name":"千年孤独","can_delete":false,"product_type":"c1","uid":1037215,"ip_address":"","ucode":"282CA1A68E8774","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d3/9f/36ea3be4.jpg","comment_is_top":false,"comment_ctime":1532872939,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532872939","product_id":100007101,"comment_content":"在那江湖纷争图中，如果1和2的位置互换，并且2是7的掌门。<br>如果这时1掌门和7相遇了，与2掌门决斗胜了。<br>那么此时2的上司是谁？是7吗？","like_count":0},{"had_liked":false,"id":15509,"user_name":"yao","can_delete":false,"product_type":"c1","uid":1099014,"ip_address":"","ucode":"4EB0A467E1D6DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/c5/06/6b1ae431.jpg","comment_is_top":false,"comment_ctime":1531251817,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531251817","product_id":100007101,"comment_content":"最近正好在看MST算法，看了这篇文章知道算法的切实用处了，再次感谢","like_count":0},{"had_liked":false,"id":14792,"user_name":"小咯咯","can_delete":false,"product_type":"c1","uid":1167583,"ip_address":"","ucode":"706ADDF3B75299","user_header":"","comment_is_top":false,"comment_ctime":1530666897,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1530666897","product_id":100007101,"comment_content":"请教下，stp协议讲解中，假如1和6距离是3，两边距离是一样的如何标记从哪边走","like_count":0},{"had_liked":false,"id":13343,"user_name":"烬默","can_delete":false,"product_type":"c1","uid":1080229,"ip_address":"","ucode":"6BF7C7C5FC0C56","user_header":"https://static001.geekbang.org/account/avatar/00/10/7b/a5/31fd290d.jpg","comment_is_top":false,"comment_ctime":1529545546,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1529545546","product_id":100007101,"comment_content":"什么协议会去检测是否有环路吗？如果没有环路使用stp性能应该会下降很多","like_count":0},{"had_liked":false,"id":12911,"user_name":"-Nao剧-","can_delete":false,"product_type":"c1","uid":1154700,"ip_address":"","ucode":"3B537EE81A416D","user_header":"https://static001.geekbang.org/account/avatar/00/11/9e/8c/27b04935.jpg","comment_is_top":false,"comment_ctime":1529127384,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1529127384","product_id":100007101,"comment_content":"在stp那块看懵了。","like_count":0},{"had_liked":false,"id":12874,"user_name":"hunterlodge","can_delete":false,"product_type":"c1","uid":1069755,"ip_address":"","ucode":"5B83A79E784161","user_header":"https://static001.geekbang.org/account/avatar/00/10/52/bb/225e70a6.jpg","comment_is_top":false,"comment_ctime":1529107123,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1529107123","product_id":100007101,"comment_content":"STP中的距离是指通信时间吗？如果是的话，岂不是会频繁更新拓扑？","like_count":0},{"had_liked":false,"id":12873,"user_name":"hunterlodge","can_delete":false,"product_type":"c1","uid":1069755,"ip_address":"","ucode":"5B83A79E784161","user_header":"https://static001.geekbang.org/account/avatar/00/10/52/bb/225e70a6.jpg","comment_is_top":false,"comment_ctime":1529107002,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1529107002","product_id":100007101,"comment_content":"请问VLAN是如何配置的？就是说某台主机的VLANID是如何确定的呢？","like_count":0},{"had_liked":false,"id":11453,"user_name":"宇宙尘埃","can_delete":false,"product_type":"c1","uid":1135277,"ip_address":"","ucode":"462BC8A74193DC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eot29u0tswbTm7DNBibMuLcpmFM0zxWRQETKIuccuLqjfhib1unYicjtWVQSNibPcedqr9klicNUeZfheQ/132","comment_is_top":false,"comment_ctime":1528158449,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528158449","product_id":100007101,"comment_content":"STP协议大学时就没学会，如今从事云计算行业这么多年，面对复杂的网络规划时，出现网络问题时，依然还是没理解透彻！","like_count":0},{"had_liked":false,"id":11348,"user_name":"楚人","can_delete":false,"product_type":"c1","uid":1136791,"ip_address":"","ucode":"A25527A14BBD6C","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/97/8e14e7d0.jpg","comment_is_top":false,"comment_ctime":1528080094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528080094","product_id":100007101,"comment_content":"老师，Priority Vector和Bridge ID需要详细解释一下，枝只能转发根的Bpdu","like_count":0},{"had_liked":false,"id":11313,"user_name":"风太息","can_delete":false,"product_type":"c1","uid":1142785,"ip_address":"","ucode":"44A0ED4231822D","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/01/0315f9ff.jpg","comment_is_top":false,"comment_ctime":1528067124,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528067124","product_id":100007101,"comment_content":"一个二层的广播包封装了arp协议，这个广播包到了一个2层的交换机，1.因为是2层交换机不识别arp信息，2. 2层交换机默认根据mac地址转发，默认将这个2层广播转发除接收端口外的所有其他端口，比如这个是主机1请求主机2Mac的2层广播包封装了arp，数据包到是交换机，交换机就算知道主机2的Mac地址，它的行为默认也是广播到除接收端口外的所有接口，因为是2层交换机不识别arp协议，并且2层的mac地址是广播mac，2层交换机只根据mac地址转发，如果是一个3层的交换机有arp表，交换机也不会拆开2层为广播地址而不是自己mac地址的包，它的行为也是丢给除接收端口外的所有接口，这样对吧","like_count":0},{"had_liked":false,"id":11129,"user_name":"左思","can_delete":false,"product_type":"c1","uid":1135105,"ip_address":"","ucode":"54D9DC97FB3B40","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/01/c05a82db.jpg","comment_is_top":false,"comment_ctime":1527868949,"is_pvip":false,"replies":[{"id":"3571","content":"原来的广播包是一直在的，arp没有ttl的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527934624,"ip_address":"","comment_id":11129,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1527868949","product_id":100007101,"comment_content":"老师有个问题不明白。第二个图中说交换机A和B组成环路，且交换机都学会了，机器1在局域网一中。当机器1的包到达交换机A时，既然交换机A已经知道机器1在左边网络，为什么还会将包广播到局域网二中？<br>就是这样的，源主机需要知道目的mac是谁，所以需要交换机继续转发。一旦目的mac的主机回应后，交换机就学会了目的主机的mac地址。两台主机间的通信之路构建完毕，从而停止广播之后两台主机的通信。但是老化时间到了，继续之前的行为。<br>","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418726,"discussion_content":"原来的广播包是一直在的，arp没有ttl的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527934624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11023,"user_name":"刘意","can_delete":false,"product_type":"c1","uid":1132653,"ip_address":"","ucode":"1657763A741923","user_header":"https://static001.geekbang.org/account/avatar/00/11/48/6d/b06fd61f.jpg","comment_is_top":false,"comment_ctime":1527809009,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1527809009","product_id":100007101,"comment_content":"交换机建立了mac地址表后不会转发已知mac地址的arp广播吗？看到前面的介绍感觉就是这个意思，想要确认一下","like_count":0},{"had_liked":false,"id":10874,"user_name":"痴痴","can_delete":false,"product_type":"c1","uid":1116149,"ip_address":"","ucode":"B14C2AE04AF134","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/f5/33d5cf22.jpg","comment_is_top":false,"comment_ctime":1527730175,"is_pvip":false,"replies":[{"id":"3443","content":"是的，请看下一段，说了这个学会以后的问题","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527743127,"ip_address":"","comment_id":10874,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1527730175","product_id":100007101,"comment_content":"环路问题：机器2在返回mac地址的时候，交换机不就知道机器2属于哪个局域网了吗？怎么会像你文章中说的一直左转左转呢？？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418620,"discussion_content":"是的，请看下一段，说了这个学会以后的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527743127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10773,"user_name":"云学","can_delete":false,"product_type":"c1","uid":1027233,"ip_address":"","ucode":"366AE90BA06356","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg","comment_is_top":false,"comment_ctime":1527693594,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1527693594","product_id":100007101,"comment_content":"请问交换机可以设置某个口为出口吗？发往外部的包都从这个口出去？交换机的每个口ip都是同网段吗？路由器的每个口ip可以不同吗？一台pc用网线直连交换机，那网线两端的网口ip是一样吗？","like_count":0},{"had_liked":false,"id":10735,"user_name":"晓迪","can_delete":false,"product_type":"c1","uid":1111687,"ip_address":"","ucode":"A70ACBBB23D23A","user_header":"https://static001.geekbang.org/account/avatar/00/10/f6/87/b4d23dcb.jpg","comment_is_top":false,"comment_ctime":1527681184,"is_pvip":false,"replies":[{"id":"3417","content":"对的，你说nat把我说晕了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527683612,"ip_address":"","comment_id":10735,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1527681184","product_id":100007101,"comment_content":"老师，不好意思，刚才写错了，是ARP协议。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418584,"discussion_content":"对的，你说nat把我说晕了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527683612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10734,"user_name":"晓迪","can_delete":false,"product_type":"c1","uid":1111687,"ip_address":"","ucode":"A70ACBBB23D23A","user_header":"https://static001.geekbang.org/account/avatar/00/10/f6/87/b4d23dcb.jpg","comment_is_top":false,"comment_ctime":1527680881,"is_pvip":false,"replies":[{"id":"3416","content":"是的，同一个二层里面。","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527683587,"ip_address":"","comment_id":10734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1527680881","product_id":100007101,"comment_content":"老师，LAN1,LAN2,LAN3里所有机器的IP应该是属同一个网络号的吧？这里交换机应该是二层交换机吧？NAT协议只是在目标IP地址和源IP地址同属一个网络才起作用吧？若目标IP地址和源IP地址不在同一个网络，源机器系统不会利用NAT找目标MAC地址，而是应该将数据包直接发给源机器所在网络的网关吧？（当然可能会用NAT找网关的MAC地址）。 我的理解准确吗？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418583,"discussion_content":"是的，同一个二层里面。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527683587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10689,"user_name":"fang","can_delete":false,"product_type":"c1","uid":1131637,"ip_address":"","ucode":"1A7A1B474EE041","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/75/f4a202ac.jpg","comment_is_top":false,"comment_ctime":1527648492,"is_pvip":false,"replies":[{"id":"3406","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527652787,"ip_address":"","comment_id":10689,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1527648492","product_id":100007101,"comment_content":"形成环路的那个例子里机器1的广播不只会发给交换机a左边的口，也会发给交换机b左边的口。两个交换机又会分别广播到右边的子网，这样会形成两条环路吧？导致网络中的包越来越多。<br><br>stp那个例子有点不太明白，root path cost是两台交换机连线上的值吗？这个是不是也是管理员指定的？还是怎么生成的？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418565,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527652787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10661,"user_name":"冯选刚","can_delete":false,"product_type":"c1","uid":1018444,"ip_address":"","ucode":"A186F31A730F04","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/4c/d976b42c.jpg","comment_is_top":false,"comment_ctime":1527641308,"is_pvip":false,"replies":[{"id":"3391","content":"谢谢","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1527645997,"ip_address":"","comment_id":10661,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1527641308","product_id":100007101,"comment_content":"学到了，跟小说一样的爽文。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418556,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527645997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10638,"user_name":"chino","can_delete":false,"product_type":"c1","uid":1130463,"ip_address":"","ucode":"2A768755F75A8C","user_header":"https://static001.geekbang.org/account/avatar/00/11/3f/df/f6a37df5.jpg","comment_is_top":false,"comment_ctime":1527639525,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1527639525","product_id":100007101,"comment_content":"请问vlan存在安全问题吗？比如说可以突破vlan的限制访问到其它vlan的设备。","like_count":0},{"had_liked":false,"id":10635,"user_name":"颇忒妥","can_delete":false,"product_type":"c1","uid":1026448,"ip_address":"","ucode":"AA86AD1049BC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/90/0c5ed3d9.jpg","comment_is_top":false,"comment_ctime":1527639388,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1527639388","product_id":100007101,"comment_content":"有些交换机的规格说明中说自己支持802.1Q VLAN 和Port-based VLAN 。一直没搞明白这两有啥区别。","like_count":0}]}