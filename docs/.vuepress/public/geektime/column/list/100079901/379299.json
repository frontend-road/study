{"id":379299,"title":"03ï½œå†…ç½® Hooksï¼ˆ1ï¼‰ï¼šå¦‚ä½•ä¿å­˜ç»„ä»¶çŠ¶æ€å’Œä½¿ç”¨ç”Ÿå‘½å‘¨æœŸï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹æ²›ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ åŸºæœ¬ Hooks çš„ç”¨æ³•ã€‚</p><p>å¦‚æœä½ ç”¨è¿‡åŸºäºç±»çš„ç»„ä»¶ï¼Œé‚£ä¹ˆå¯¹ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸€å®šä¸ä¼šé™Œç”Ÿï¼Œä¾‹å¦‚ componentDidMount, componentDidUpdateï¼Œç­‰ç­‰ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œé‚£ä¹Ÿæ²¡å…³ç³»ï¼Œå› ä¸ºåœ¨ä»Šå¤©è¿™èŠ‚è¯¾é‡Œï¼Œä½ ä¼šçœ‹åˆ°åŸºäº Hooks å»è€ƒè™‘ç»„ä»¶çš„å®ç°ï¼Œè¿™ä¼šæ˜¯ä¸€ä¸ªéå¸¸ä¸åŒçš„æ€è·¯ï¼Œä½ å®Œå…¨ä¸ç”¨å»å…³å¿ƒä¸€ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ€æ ·çš„ã€‚</p><p>ç‰¹åˆ«æ˜¯å¦‚æœä½ å·²ç»ä¹ æƒ¯äº†ç±»ç»„ä»¶çš„å¼€å‘ï¼Œé‚£ä¹ˆè¦åšçš„ï¼Œç”šè‡³æ˜¯å½»åº•å¿˜æ‰é‚£äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ä¸è¦é‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜ å°„åˆ°è¿™ä¸ªåŠŸèƒ½è¯¥åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸä¸­å»åšï¼Œç„¶ååˆè¦å»æƒ³åŸæ¥çš„å£°æ˜å‘¨æœŸæ–¹æ³•åœ¨å‡½æ•°ç»„ä»¶ä¸­åº”è¯¥æ€ä¹ˆç”¨ Hooks å»å®ç°ã€‚</p><p>æ­£ç¡®çš„æ€è·¯åº”è¯¥æ˜¯<strong>é‡åˆ°éœ€æ±‚æ—¶ï¼Œç›´æ¥è€ƒè™‘åœ¨ Hooks ä¸­å»å¦‚ä½•å®ç°</strong>ã€‚</p><p>React æä¾›çš„ Hooks å…¶å®éå¸¸å°‘ï¼Œä¸€å…±åªæœ‰10ä¸ªï¼Œæ¯”å¦‚ useStateã€useEffectã€useCallbackã€useMemoã€useRefã€useContextç­‰ç­‰ã€‚è¿™ä¸€è®²æˆ‘ä»¬ä¼šå…ˆå­¦ä¹  useState å’Œ useEffect è¿™ä¸¤ä¸ªæœ€ä¸ºæ ¸å¿ƒçš„ Hooksã€‚ä¸‹ä¸€è®²åˆ™ä¼šä»‹ç»å¦å¤–å››ä¸ªå¸¸ç”¨çš„ Hooksã€‚æŒæ¡äº†è¿™äº›Hooksï¼Œä½ å°±èƒ½è¿›è¡Œ90%çš„React å¼€å‘äº†ã€‚</p><p>ä¸è¿‡åœ¨è®²ä¹‹å‰æˆ‘æƒ³å¼ºè°ƒä¸€ç‚¹ï¼Œè¿™äº› Hooks çš„åŠŸèƒ½å…¶å®éå¸¸ç®€å•ï¼Œå¤šçœ‹çœ‹å®˜æ–¹æ–‡æ¡£å°±å¯ä»¥äº†ã€‚å› ä¸ºè¿™èŠ‚è¯¾çš„ç›®çš„ï¼Œå…¶å®æ˜¯è®©ä½ å­¦ä¼šå¦‚ä½•ç”¨ Hooks çš„æ€è·¯å»è¿›è¡ŒåŠŸèƒ½çš„å®ç°ã€‚</p><!-- [[[read_end]]] --><h1>useStateï¼šè®©å‡½æ•°ç»„ä»¶å…·æœ‰ç»´æŒçŠ¶æ€çš„èƒ½åŠ›</h1><p>åœ¨ç¬¬ä¸€è®²ä¸­ï¼Œä½ å·²ç»çŸ¥é“äº† state æ˜¯ React ç»„ä»¶çš„ä¸€ä¸ªæ ¸å¿ƒæœºåˆ¶ï¼Œé‚£ä¹ˆ useState è¿™ä¸ª Hook å°±æ˜¯ç”¨æ¥ç®¡ç† state çš„ï¼Œå®ƒå¯ä»¥<strong>è®©å‡½æ•°ç»„ä»¶å…·æœ‰ç»´æŒçŠ¶æ€çš„èƒ½åŠ›</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªå‡½æ•°ç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ï¼Œè¿™ä¸ª state æ˜¯å…±äº«çš„ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­å°±æ˜¾ç¤ºäº† useState çš„ç”¨æ³•ï¼š</p><pre><code>import React, { useState } from 'react';\n\nfunction Example() {\n  // åˆ›å»ºä¸€ä¸ªä¿å­˜ count çš„ stateï¼Œå¹¶ç»™åˆå§‹å€¼ 0\n  const [count, setCount] = useState(0);\n\n  return (\n    &lt;div&gt;\n      &lt;p&gt;{count}&lt;/p&gt;\n      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;\n        +\n      &lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªåä¸º count çš„ stateï¼Œå¹¶å¾—åˆ°äº†è®¾ç½®è¿™ä¸ª count å€¼çš„å‡½æ•° setCountã€‚å½“è°ƒç”¨ setCount æ—¶ï¼Œcount è¿™ä¸ª state å°±ä¼šè¢«æ›´æ–°ï¼Œå¹¶è§¦å‘ç»„ä»¶çš„åˆ·æ–°ã€‚é‚£ä¹ˆ useState è¿™ä¸ª Hook çš„ç”¨æ³•æ€»ç»“å‡ºæ¥å°±æ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>useState(initialState) çš„å‚æ•° initialState æ˜¯åˆ›å»º state çš„åˆå§‹å€¼ï¼Œå®ƒå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œæ¯”å¦‚æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ç­‰ç­‰ã€‚</li>\n<li>useState() çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæœ‰ç€ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚ç¬¬ä¸€ä¸ªæ•°ç»„å…ƒç´ ç”¨æ¥è¯»å– state çš„å€¼ï¼Œç¬¬äºŒä¸ªåˆ™æ˜¯ç”¨æ¥è®¾ç½®è¿™ä¸ª state çš„å€¼ã€‚åœ¨è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œstate çš„å˜é‡ï¼ˆä¾‹å­ä¸­çš„ countï¼‰æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»é€šè¿‡ç¬¬äºŒä¸ªæ•°ç»„å…ƒç´  setCount æ¥è®¾ç½®å®ƒçš„å€¼ã€‚</li>\n<li>å¦‚æœè¦åˆ›å»ºå¤šä¸ª stateï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¤šæ¬¡è°ƒç”¨ useStateã€‚æ¯”å¦‚è¦åˆ›å»ºå¤šä¸ª stateï¼Œä½¿ç”¨çš„ä»£ç å¦‚ä¸‹ï¼š</li>\n</ol><pre><code>// å®šä¹‰ä¸€ä¸ªå¹´é¾„çš„ stateï¼Œåˆå§‹å€¼æ˜¯ 42\nconst [age, setAge] = useState(42);\n// å®šä¹‰ä¸€ä¸ªæ°´æœçš„ stateï¼Œåˆå§‹å€¼æ˜¯ banana\nconst [fruit, setFruit] = useState('banana');\n// å®šä¸€ä¸ªä¸€ä¸ªæ•°ç»„ stateï¼Œåˆå§‹å€¼æ˜¯åŒ…å«ä¸€ä¸ª todo çš„æ•°ç»„\nconst [todos, setTodos] = useState([{ text: 'Learn Hooks' }]);\n</code></pre><p>ä»è¿™æ®µä»£ç å¯ä»¥çœ‹åˆ°ï¼ŒuseState æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ Hookï¼Œå®ƒè®©ä½ å¾ˆæ–¹ä¾¿åœ°å»åˆ›å»ºä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶æä¾›ä¸€ä¸ªç‰¹å®šçš„æ–¹æ³•ï¼ˆæ¯”å¦‚ setAge ï¼‰æ¥è®¾ç½®è¿™ä¸ªçŠ¶æ€ã€‚</p><p>å¦‚æœä½ ä¹‹å‰ç”¨è¿‡ç±»ç»„ä»¶ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ useState å°±å’Œç±»ç»„ä»¶ä¸­çš„ setStateéå¸¸ç±»ä¼¼ã€‚ä¸è¿‡ä¸¤è€…æœ€å¤§çš„åŒºåˆ«å°±åœ¨äºï¼Œç±»ç»„ä»¶ä¸­çš„ state åªèƒ½æœ‰ä¸€ä¸ªã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡ä½œä¸º ä¸€ä¸ªstateï¼Œç„¶åå†é€šè¿‡ä¸åŒçš„å±æ€§æ¥è¡¨ç¤ºä¸åŒçš„çŠ¶æ€ã€‚è€Œå‡½æ•°ç»„ä»¶ä¸­ç”¨ useState åˆ™å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ›å»ºå¤šä¸ª stateï¼Œæ‰€ä»¥å®ƒæ›´åŠ è¯­ä¹‰åŒ–ã€‚</p><p>å¯ä»¥è¯´ï¼Œstate æ˜¯ React ç»„ä»¶éå¸¸é‡è¦çš„ä¸€ä¸ªæœºåˆ¶ï¼Œé‚£ä¹ˆä»€ä¹ˆæ ·çš„å€¼åº”è¯¥ä¿å­˜åœ¨ state ä¸­å‘¢ï¼Ÿè¿™æ˜¯æ—¥å¸¸å¼€å‘ä¸­éœ€è¦ç»å¸¸æ€è€ƒçš„é—®é¢˜ã€‚é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬è¦éµå¾ªçš„ä¸€ä¸ªåŸåˆ™å°±æ˜¯ï¼š<strong>state ä¸­æ°¸è¿œä¸è¦ä¿å­˜å¯ä»¥é€šè¿‡è®¡ç®—å¾—åˆ°çš„å€¼</strong>ã€‚æ¯”å¦‚è¯´ï¼š</p><ol>\n<li>ä» props ä¼ é€’è¿‡æ¥çš„å€¼ã€‚æœ‰æ—¶å€™ props ä¼ é€’è¿‡æ¥çš„å€¼æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯è¦é€šè¿‡ä¸€å®šçš„è®¡ç®—åå†åœ¨ UI ä¸Šå±•ç¤ºï¼Œæ¯”å¦‚è¯´æ’åºã€‚é‚£ä¹ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯æ¯æ¬¡ç”¨çš„æ—¶å€™ï¼Œéƒ½é‡æ–°æ’åºä¸€ä¸‹ï¼Œæˆ–è€…åˆ©ç”¨æŸäº› cache æœºåˆ¶ï¼Œè€Œä¸æ˜¯å°†ç»“æœç›´æ¥æ”¾åˆ° state é‡Œã€‚</li>\n<li>ä» URL ä¸­è¯»åˆ°çš„å€¼ã€‚æ¯”å¦‚æœ‰æ—¶éœ€è¦è¯»å– URL ä¸­çš„å‚æ•°ï¼ŒæŠŠå®ƒä½œä¸ºç»„ä»¶çš„ä¸€éƒ¨åˆ†çŠ¶æ€ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡éœ€è¦ç”¨çš„æ—¶å€™ä» URL ä¸­è¯»å–ï¼Œè€Œä¸æ˜¯è¯»å‡ºæ¥ç›´æ¥æ”¾åˆ° state é‡Œã€‚</li>\n<li>ä» cookieã€localStorage ä¸­è¯»å–çš„å€¼ã€‚é€šå¸¸æ¥è¯´ï¼Œä¹Ÿæ˜¯æ¯æ¬¡è¦ç”¨çš„æ—¶å€™ç›´æ¥å»è¯»å–ï¼Œè€Œä¸æ˜¯è¯»å‡ºæ¥åæ”¾åˆ° state é‡Œã€‚</li>\n</ol><p>ä¸è¿‡ï¼Œstateè™½ç„¶ä¾¿äºç»´æŠ¤çŠ¶æ€ï¼Œä½†ä¹Ÿæœ‰è‡ªå·±çš„å¼Šç«¯ã€‚<strong>ä¸€æ—¦ç»„ä»¶æœ‰è‡ªå·±çŠ¶æ€ï¼Œæ„å‘³ç€ç»„ä»¶å¦‚æœé‡æ–°åˆ›å»ºï¼Œå°±éœ€è¦æœ‰æ¢å¤çŠ¶æ€çš„è¿‡ç¨‹ï¼Œè¿™é€šå¸¸ä¼šè®©ç»„ä»¶å˜å¾—æ›´å¤æ‚</strong>ã€‚</p><p>æ¯”å¦‚ä¸€ä¸ªç»„ä»¶æƒ³åœ¨æœåŠ¡å™¨ç«¯è¯·æ±‚è·å–ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨å¹¶æ˜¾ç¤ºï¼Œå¦‚æœæŠŠè¯»å–åˆ°çš„æ•°æ®æ”¾åˆ°æœ¬åœ°çš„ state é‡Œï¼Œé‚£ä¹ˆæ¯ä¸ªç”¨åˆ°è¿™ä¸ªç»„ä»¶çš„åœ°æ–¹ï¼Œå°±éƒ½éœ€è¦é‡æ–°è·å–ä¸€éã€‚</p><p>è€Œå¦‚æœé€šè¿‡ä¸€äº›çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œå»ç®¡ç†æ‰€æœ‰ç»„ä»¶çš„ state çš„è¯ï¼Œæ¯”å¦‚æˆ‘åœ¨ç¬¬7è®²ä¼šä»‹ç»çš„ Reduxï¼Œé‚£ä¹ˆç»„ä»¶æœ¬èº«å°±å¯ä»¥æ˜¯æ— çŠ¶æ€çš„ã€‚æ— çŠ¶æ€ç»„ä»¶å¯ä»¥æˆä¸ºæ›´çº¯ç²¹çš„è¡¨ç°å±‚ï¼Œæ²¡æœ‰å¤ªå¤šçš„ä¸šåŠ¡é€»è¾‘ï¼Œä»è€Œæ›´æ˜“äºä½¿ç”¨ã€æµ‹è¯•å’Œç»´æŠ¤ã€‚</p><h1>useEffectï¼šæ‰§è¡Œå‰¯ä½œç”¨</h1><p>useEffect ï¼Œé¡¾åæ€ä¹‰ï¼Œç”¨äºæ‰§è¡Œä¸€æ®µå‰¯ä½œç”¨ã€‚</p><p>ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨å‘¢ï¼Ÿé€šå¸¸æ¥è¯´ï¼Œå‰¯ä½œç”¨æ˜¯æŒ‡<strong>ä¸€æ®µå’Œå½“å‰æ‰§è¡Œç»“æœæ— å…³çš„ä»£ç ã€‚</strong>æ¯”å¦‚è¯´è¦ä¿®æ”¹å‡½æ•°å¤–éƒ¨çš„æŸä¸ªå˜é‡ï¼Œè¦å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œç­‰ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å‡½æ•°ç»„ä»¶çš„å½“æ¬¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒuseEffect ä¸­ä»£ç çš„æ‰§è¡Œæ˜¯ä¸å½±å“æ¸²æŸ“å‡ºæ¥çš„ UI çš„ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒçš„å…·ä½“ç”¨æ³•ã€‚useEffect å¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå‡½æ•°ç­¾åå¦‚ä¸‹ï¼š</p><pre><code>useEffect(callback, dependencies)\n</code></pre><p>ç¬¬ä¸€ä¸ªä¸ºè¦æ‰§è¡Œçš„å‡½æ•°callbackï¼Œç¬¬äºŒä¸ªæ˜¯å¯é€‰çš„ä¾èµ–é¡¹æ•°ç»„dependenciesã€‚å…¶ä¸­ä¾èµ–é¡¹æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé‚£ä¹ˆ callback å°±ä¼šåœ¨æ¯æ¬¡å‡½æ•°ç»„ä»¶æ‰§è¡Œå®Œåéƒ½æ‰§è¡Œï¼›å¦‚æœæŒ‡å®šäº†ï¼Œé‚£ä¹ˆåªæœ‰ä¾èµ–é¡¹ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šæ‰§è¡Œã€‚</p><p>å¯¹åº”åˆ° Class ç»„ä»¶ï¼Œé‚£ä¹ˆ useEffect å°±æ¶µç›–äº† ComponentDidMountã€componentDidUpdateå’ŒcomponentWillUnmount ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ä¸è¿‡å¦‚æœä½ ä¹ æƒ¯äº†ä½¿ç”¨Class ç»„ä»¶ï¼Œé‚£åƒä¸‡ä¸è¦æŒ‰ç…§æŠŠ useEffect å¯¹åº”åˆ°æŸä¸ªæˆ–è€…æŸå‡ ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ã€‚ä½ åªè¦è®°ä½ï¼Œ<strong>useEffect æ˜¯æ¯æ¬¡ç»„ä»¶ render å®Œååˆ¤æ–­ä¾èµ–å¹¶æ‰§è¡Œ</strong>å°±å¯ä»¥äº†ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼ŒæŸä¸ªç»„ä»¶ç”¨äºæ˜¾ç¤ºä¸€ç¯‡ Blog æ–‡ç« ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶ä¼šæ¥æ”¶ä¸€ä¸ªå‚æ•°æ¥è¡¨ç¤º Blog çš„ IDã€‚è€Œå½“ ID å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶éœ€è¦å‘èµ·è¯·æ±‚æ¥è·å–æ–‡ç« å†…å®¹å¹¶å±•ç¤ºï¼š</p><pre><code>import React, { useState, useEffect } from &quot;react&quot;;\n\nfunction BlogView({ id }) {\n  // è®¾ç½®ä¸€ä¸ªæœ¬åœ° state ç”¨äºä¿å­˜ blog å†…å®¹\n  const [blogContent, setBlogContent] = useState(null);\n\n  useEffect(() =&gt; {\n    // useEffect çš„ callback è¦é¿å…ç›´æ¥çš„ async å‡½æ•°ï¼Œéœ€è¦å°è£…ä¸€ä¸‹\n    const doAsync = async () =&gt; {\n      // å½“ id å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†å½“å‰å†…å®¹æ¸…æ¥šä»¥ä¿æŒä¸€è‡´æ€§\n      setBlogContent(null);\n      // å‘èµ·è¯·æ±‚è·å–æ•°æ®\n      const res = await fetch(`/blog-content/${id}`);\n      // å°†è·å–çš„æ•°æ®æ”¾å…¥ state\n      setBlogContent(await res.text());\n    };\n    doAsync();\n  }, [id]); // ä½¿ç”¨ id ä½œä¸ºä¾èµ–é¡¹ï¼Œå˜åŒ–æ—¶åˆ™æ‰§è¡Œå‰¯ä½œç”¨\n\n  // å¦‚æœæ²¡æœ‰ blogContent åˆ™è®¤ä¸ºæ˜¯åœ¨ loading çŠ¶æ€\n  const isLoading = !blogContent;\n  return &lt;div&gt;{isLoading ? &quot;Loading...&quot; : blogContent}&lt;/div&gt;;\n}\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨ useEffect å®Œæˆäº†ä¸€ä¸ªç®€å•çš„æ•°æ®è¯·æ±‚çš„éœ€æ±‚ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠ ID ä½œä¸ºä¾èµ–é¡¹å‚æ•°ï¼Œè¿™æ ·å°±å¾ˆè‡ªç„¶åœ°åœ¨ IDå‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ©ç”¨useEffectæ‰§è¡Œå‰¯ä½œç”¨å»è·å–æ•°æ®ã€‚å¦‚æœåœ¨ä¹‹å‰çš„ç±»ç»„ä»¶ä¸­è¦å®Œæˆç±»ä¼¼çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ componentDidUpdate è¿™ä¸ªæ–¹æ³•é‡Œï¼Œè‡ªå·±å»åˆ¤æ–­ä¸¤æ¬¡IDæ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚å¦‚æœå˜äº†ï¼Œæ‰å»å‘èµ·è¯·æ±‚ã€‚è¿™æ ·çš„è¯ï¼Œé€»è¾‘ä¸Šå°±ä¸å¦‚ useEffect æ¥å¾—ç›´è§‚ã€‚</p><p>useEffect è¿˜æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„ç”¨æ³•ï¼š<strong>æ²¡æœ‰ä¾èµ–é¡¹ï¼Œä»¥åŠä¾èµ–é¡¹ä½œä¸ºç©ºæ•°ç»„</strong>ã€‚æˆ‘ä»¬æ¥å…·ä½“åˆ†æä¸‹ã€‚</p><ol>\n<li>æ²¡æœ‰ä¾èµ–é¡¹ï¼Œåˆ™æ¯æ¬¡ render åéƒ½ä¼šé‡æ–°æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š</li>\n</ol><pre><code>useEffect(() =&gt; {\n  // æ¯æ¬¡ render å®Œä¸€å®šæ‰§è¡Œ\n  console.log('re-rendered');\n});\n\n</code></pre><ol start=\"2\">\n<li>ç©ºæ•°ç»„ä½œä¸ºä¾èµ–é¡¹ï¼Œåˆ™åªåœ¨é¦–æ¬¡æ‰§è¡Œæ—¶è§¦å‘ï¼Œå¯¹åº”åˆ° Class ç»„ä»¶å°±æ˜¯ componentDidMountã€‚ä¾‹å¦‚ï¼š</li>\n</ol><pre><code>useEffect(() =&gt; {\n  // ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œï¼Œç­‰ä»·äº class ç»„ä»¶ä¸­çš„ componentDidMount\n  console.log('did mount');\n}, [])\n</code></pre><p>é™¤äº†è¿™äº›æœºåˆ¶ä¹‹å¤–ï¼ŒuseEffect è¿˜<strong>å…è®¸ä½ è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™åšä¸€äº›æ¸…ç†çš„æ“ä½œ</strong>ã€‚æ¯”å¦‚ç§»é™¤äº‹ä»¶çš„ç›‘å¬ã€‚è¿™ä¸ªæœºåˆ¶å°±å‡ ä¹ç­‰ä»·äºç±»ç»„ä»¶ä¸­çš„ componentWillUnmountã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç›‘å¬çª—å£çš„å¤§å°å˜åŒ–ï¼Œä»¥ä¾¿åšä¸€äº›å¸ƒå±€ä¸Šçš„è°ƒæ•´ï¼š</p><pre><code>// è®¾ç½®ä¸€ä¸ª size çš„ state ç”¨äºä¿å­˜å½“å‰çª—å£å°ºå¯¸\nconst [size, setSize] = useState({});\nuseEffect(() =&gt; {\n  // çª—å£å¤§å°å˜åŒ–äº‹ä»¶å¤„ç†å‡½æ•°\n  const handler = () =&gt; {\n    setSize(getSize());\n  };\n  // ç›‘å¬ resize äº‹ä»¶\n  window.addEventListener('resize', handler);\n  \n  // è¿”å›ä¸€ä¸ª callback åœ¨ç»„ä»¶é”€æ¯æ—¶è°ƒç”¨\n  return () =&gt; {\n    // ç§»é™¤ resize äº‹ä»¶\n    window.removeEventListener('resize', handler);\n  };\n}, []);\n</code></pre><p>é€šè¿‡è¿™æ ·ä¸€ä¸ªç®€å•çš„æœºåˆ¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°ç®¡ç†å‰¯ä½œç”¨ï¼Œä»è€Œç¡®ä¿ç»„ä»¶å’Œå‰¯ä½œç”¨çš„ä¸€è‡´æ€§ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼ŒuseEffect è®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸‹é¢å››ç§æ—¶æœºå»æ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°äº§ç”Ÿå‰¯ä½œç”¨ï¼š</p><ol>\n<li>æ¯æ¬¡ render åæ‰§è¡Œï¼šä¸æä¾›ç¬¬äºŒä¸ªä¾èµ–é¡¹å‚æ•°ã€‚æ¯”å¦‚<br>\nuseEffect(() =&gt; {})ã€‚</li>\n<li>ä»…ç¬¬ä¸€æ¬¡render åæ‰§è¡Œï¼šæä¾›ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºä¾èµ–é¡¹ã€‚æ¯”å¦‚<br>\nuseEffect(() =&gt; {}, [])ã€‚</li>\n<li>ç¬¬ä¸€æ¬¡ä»¥åŠä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰§è¡Œï¼šæä¾›ä¾èµ–é¡¹æ•°ç»„ã€‚æ¯”å¦‚<br>\nuseEffect(() =&gt; {}, [deps])ã€‚</li>\n<li>ç»„ä»¶ unmount åæ‰§è¡Œï¼šè¿”å›ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚æ¯”å¦‚<br>\nuseEffect() =&gt; { return () =&gt; {} }, [])ã€‚</li>\n</ol><h1>ç†è§£ Hooks çš„ä¾èµ–</h1><p>åœ¨ useEffect Hook ä¸­ä½ å·²ç»çœ‹åˆ°äº†ä¾èµ–é¡¹çš„æ¦‚å¿µã€‚å…¶å®é™¤äº†åœ¨ useEffect ä¸­ä¼šç”¨åˆ°å¤–ï¼Œåœ¨ç¬¬5è®²çš„ useCallback å’Œ useMemo ä¸­ä¹Ÿä¼šç”¨åˆ°ã€‚æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°±å…ˆé€å½»äº†è§£å®ƒçš„å·¥ä½œæœºåˆ¶ï¼Œå¸®åŠ©ä½ åœ¨å®é™…å¼€å‘ä¸­èƒ½å¤Ÿæ­£ç¡®åœ°ä½¿ç”¨ã€‚</p><p>æ­£å¦‚åœ¨ç¬¬2è®²ä¸­ä»‹ç»çš„ï¼ŒHooks æä¾›äº†è®©ä½ ç›‘å¬æŸä¸ªæ•°æ®å˜åŒ–çš„èƒ½åŠ›ã€‚è¿™ä¸ªå˜åŒ–å¯èƒ½ä¼šè§¦å‘ç»„ä»¶çš„åˆ·æ–°ï¼Œä¹Ÿå¯èƒ½æ˜¯å»åˆ›å»ºä¸€ä¸ªå‰¯ä½œç”¨ï¼Œåˆæˆ–è€…æ˜¯åˆ·æ–°ä¸€ä¸ªç¼“å­˜ã€‚é‚£ä¹ˆå®šä¹‰è¦ç›‘å¬å“ªäº›æ•°æ®å˜åŒ–çš„æœºåˆ¶ï¼Œå…¶å®å°±æ˜¯æŒ‡å®š Hooks çš„ä¾èµ–é¡¹ã€‚</p><p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¾èµ–é¡¹å¹¶ä¸æ˜¯å†…ç½® Hooks çš„ä¸€ä¸ªç‰¹æ®Šæœºåˆ¶ï¼Œè€Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚æœ‰ç±»ä¼¼éœ€æ±‚çš„ Hooks éƒ½å¯ä»¥ç”¨è¿™ç§æ¨¡å¼å»å®ç°ã€‚</p><p>é‚£ä¹ˆåœ¨å®šä¹‰ä¾èµ–é¡¹æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ol>\n<li>ä¾èµ–é¡¹ä¸­å®šä¹‰çš„å˜é‡ä¸€å®šæ˜¯ä¼šåœ¨å›è°ƒå‡½æ•°ä¸­ç”¨åˆ°çš„ï¼Œå¦åˆ™å£°æ˜ä¾èµ–é¡¹å…¶å®æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</li>\n<li>ä¾èµ–é¡¹ä¸€èˆ¬æ˜¯ä¸€ä¸ªå¸¸é‡æ•°ç»„ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå˜é‡ã€‚å› ä¸ºä¸€èˆ¬åœ¨åˆ›å»º callback çš„æ—¶å€™ï¼Œä½ å…¶å®éå¸¸æ¸…æ¥šå…¶ä¸­è¦ç”¨åˆ°å“ªäº›ä¾èµ–é¡¹äº†ã€‚</li>\n<li>React ä¼šä½¿ç”¨æµ…æ¯”è¾ƒæ¥å¯¹æ¯”ä¾èµ–é¡¹æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥è¦ç‰¹åˆ«æ³¨æ„æ•°ç»„æˆ–è€…å¯¹è±¡ç±»å‹ã€‚å¦‚æœä½ æ˜¯æ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå³ä½¿å’Œä¹‹å‰çš„å€¼æ˜¯ç­‰ä»·çš„ï¼Œä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯ä¾èµ–é¡¹å‘ç”Ÿäº†å˜åŒ–ã€‚è¿™æ˜¯ä¸€ä¸ªåˆšå¼€å§‹ä½¿ç”¨ Hooksæ—¶å¾ˆå®¹æ˜“å¯¼è‡´ Bug çš„åœ°æ–¹ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</li>\n</ol><pre><code>function Sample() {\n  // è¿™é‡Œåœ¨æ¯æ¬¡ç»„ä»¶æ‰§è¡Œæ—¶åˆ›å»ºäº†ä¸€ä¸ªæ–°æ•°ç»„\n  const todos = [{ text: 'Learn hooks.'}];\n  useEffect(() =&gt; {\n    console.log('Todos changed.');\n  }, [todos]);\n}\n</code></pre><p>ä»£ç çš„åŸæ„å¯èƒ½æ˜¯åœ¨ todos å˜åŒ–çš„æ—¶å€™å»äº§ç”Ÿä¸€äº›å‰¯ä½œç”¨ï¼Œä½†æ˜¯è¿™é‡Œçš„ todos å˜é‡æ˜¯åœ¨å‡½æ•°å†…åˆ›å»ºçš„ï¼Œå®é™…ä¸Šæ¯æ¬¡éƒ½äº§ç”Ÿäº†ä¸€ä¸ªæ–°æ•°ç»„ã€‚æ‰€ä»¥åœ¨ä½œä¸ºä¾èµ–é¡¹çš„æ—¶å€™è¿›è¡Œå¼•ç”¨çš„æ¯”è¾ƒï¼Œå®é™…ä¸Šè¢«è®¤ä¸ºæ˜¯å‘ç”Ÿäº†å˜åŒ–çš„ã€‚</p><h1>æŒæ¡ Hooks çš„ä½¿ç”¨è§„åˆ™</h1><p>Hooks æœ¬èº«ä½œä¸ºçº¯ç²¹çš„ JavaScript å‡½æ•°ï¼Œä¸æ˜¯é€šè¿‡æŸä¸ªç‰¹æ®Šçš„ API å»åˆ›å»ºçš„ï¼Œè€Œæ˜¯ç›´æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ã€‚å®ƒéœ€è¦åœ¨é™ä½å­¦ä¹ å’Œä½¿ç”¨æˆæœ¬çš„åŒæ—¶ï¼Œè¿˜éœ€è¦éµå¾ªä¸€å®šçš„è§„åˆ™æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚å› è€ŒHooksçš„ä½¿ç”¨è§„åˆ™åŒ…æ‹¬ä»¥ä¸‹ä¸¤ä¸ªï¼š<strong>åªèƒ½åœ¨å‡½æ•°ç»„ä»¶çš„é¡¶çº§ä½œç”¨åŸŸä½¿ç”¨ï¼›åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è€…å…¶ä»–Hooksä¸­ä½¿ç”¨ã€‚</strong></p><h2>Hooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶çš„é¡¶çº§ä½œç”¨åŸŸä½¿ç”¨</h2><p>æ‰€è°“<strong>é¡¶å±‚ä½œç”¨åŸŸ</strong>ï¼Œå°±æ˜¯ <strong>Hooks ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…åµŒå¥—å‡½æ•°å†…æ‰§è¡Œï¼Œè€Œå¿…é¡»æ˜¯åœ¨é¡¶å±‚</strong>ã€‚åŒæ—¶ <strong>Hooks åœ¨ç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ï¼Œå¿…é¡»æŒ‰é¡ºåºè¢«æ‰§è¡Œ</strong>ã€‚å› ä¸ºåœ¨ React ç»„ä»¶å†…éƒ¨ï¼Œå…¶å®æ˜¯ç»´æŠ¤äº†ä¸€ä¸ªå¯¹åº”ç»„ä»¶çš„å›ºå®š Hooks æ‰§è¡Œåˆ—è¡¨çš„ï¼Œä»¥ä¾¿åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒ Hooks çš„çŠ¶æ€ï¼Œå¹¶åšå¯¹æ¯”ã€‚</p><p>æ¯”å¦‚è¯´ä¸‹é¢çš„ä»£ç æ˜¯å¯è¡Œçš„ï¼Œå› ä¸º Hooks ä¸€å®šä¼šè¢«æ‰§è¡Œåˆ°ï¼š</p><pre><code>function MyComp() {\n  const [count, setCount] = useState(0);\n  // ...\n  return &lt;div&gt;{count}&lt;/div&gt;;\n}\n\n</code></pre><p>è€Œä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºåœ¨æŸäº›æ¡ä»¶ä¸‹ Hooks æ˜¯ä¸ä¼šè¢«æ‰§è¡Œåˆ°çš„ï¼š</p><pre><code>function MyComp() {\n  const [count, setCount] = useState(0);\n  if (count &gt; 10) {\n    // é”™è¯¯ï¼šä¸èƒ½å°† Hook ç”¨åœ¨æ¡ä»¶åˆ¤æ–­é‡Œ\n    useEffect(() =&gt; {\n      // ...\n    }, [count])\n  }\n  \n  // è¿™é‡Œå¯èƒ½æå‰è¿”å›ç»„ä»¶æ¸²æŸ“ç»“æœï¼Œåé¢å°±ä¸èƒ½å†ç”¨ Hooks äº†\n  if (count === 0) {\n    return 'No content';\n  }\n\n  // é”™è¯¯ï¼šä¸èƒ½å°† Hook æ”¾åœ¨å¯èƒ½çš„ return ä¹‹å\n  const [loading, setLoading] = useState(false);\n  \n  //...\n  return &lt;div&gt;{count}&lt;/div&gt;\n}\n</code></pre><p>æ‰€ä»¥ Hooks çš„è¿™ä¸ªè§„åˆ™å¯ä»¥æ€»ç»“ä¸ºä¸¤ç‚¹ï¼š<strong>ç¬¬ä¸€ï¼Œæ‰€æœ‰ Hook å¿…é¡»è¦è¢«æ‰§è¡Œåˆ°ã€‚ç¬¬äºŒï¼Œå¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œã€‚</strong></p><h2>Hooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è€…å…¶å®ƒ Hooks ä¸­ä½¿ç”¨</h2><p>Hooks ä½œä¸ºä¸“é—¨ä¸ºå‡½æ•°ç»„ä»¶è®¾è®¡çš„æœºåˆ¶ï¼Œä½¿ç”¨çš„æƒ…å†µåªæœ‰ä¸¤ç§ï¼Œ<strong>ä¸€ç§æ˜¯åœ¨å‡½æ•°ç»„ä»¶å†…ï¼Œå¦å¤–ä¸€ç§åˆ™æ˜¯åœ¨è‡ªå®šä¹‰çš„ Hooks é‡Œé¢</strong>ã€‚</p><p>è¿™ä¸ªè§„åˆ™åœ¨å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶åŒæ—¶å­˜åœ¨çš„é¡¹ç›®ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆä¸€å®šçš„å›°æ‰°ï¼Œå› ä¸º Hooks ç®€æ´ã€ç›´è§‚ï¼Œæˆ‘ä»¬å¯èƒ½éƒ½å€¾å‘äºç”¨ Hooks æ¥å®ç°é€»è¾‘çš„é‡ç”¨ï¼Œä½†æ˜¯å¦‚æœä¸€å®šè¦åœ¨ Class ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œé‚£åº”è¯¥å¦‚ä½•åšå‘¢ï¼Ÿå…¶å®æœ‰ä¸€ä¸ªé€šç”¨çš„æœºåˆ¶ï¼Œé‚£å°±æ˜¯<strong>åˆ©ç”¨é«˜é˜¶ç»„ä»¶çš„æ¨¡å¼ï¼Œå°† Hooks å°è£…æˆé«˜é˜¶ç»„ä»¶ï¼Œä»è€Œè®©ç±»ç»„ä»¶ä½¿ç”¨ã€‚</strong></p><p>ä¸¾ä¸ªä¾‹å­ã€‚æˆ‘ä»¬å·²ç»å®šä¹‰äº†ç›‘å¬çª—å£å¤§å°å˜åŒ–çš„ä¸€ä¸ª Hookï¼šuseWindowSizeã€‚é‚£ä¹ˆå¾ˆå®¹æ˜“å°±å¯ä»¥å°†å…¶è½¬æ¢ä¸ºé«˜é˜¶ç»„ä»¶ï¼š</p><pre><code>import React from 'react';\nimport { useWindowSize } from '../hooks/useWindowSize';\n\nexport const withWindowSize = (Comp) =&gt; {\n  return props =&gt; {\n    const windowSize = useWindowSize();\n    return &lt;Comp windowSize={windowSize} {...props} /&gt;;\n  };\n};\n</code></pre><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç æ¥ä½¿ç”¨è¿™ä¸ªé«˜é˜¶ç»„ä»¶ï¼š</p><pre><code>import React from 'react';\nimport { withWindowSize } from './withWindowSize';\n\nclass MyComp {\n  render() {\n    const { windowSize } = this.props;\n    // ...\n  }\n}\n\n// é€šè¿‡ withWindowSize é«˜é˜¶ç»„ä»¶ç»™ MyComp æ·»åŠ  windowSize å±æ€§\nexport default withWindowSize(MyComp);\n\n</code></pre><p>è¿™æ ·ï¼Œé€šè¿‡ withWindowSize è¿™æ ·ä¸€ä¸ªé«˜é˜¶ç»„ä»¶æ¨¡å¼ï¼Œä½ å°±å¯ä»¥æŠŠ useWindowSize çš„ç»“æœä½œä¸ºå±æ€§ï¼Œä¼ é€’ç»™éœ€è¦ä½¿ç”¨çª—å£å¤§å°çš„ç±»ç»„ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°åœ¨ Class ç»„ä»¶ä¸­å¤ç”¨ Hooks çš„é€»è¾‘äº†ã€‚</p><h1>ä½¿ç”¨ ESLint æ’ä»¶å¸®åŠ©æ£€æŸ¥ Hooks çš„ä½¿ç”¨</h1><p>åˆšæ‰ä½ å·²ç»çœ‹åˆ°äº†ä½¿ç”¨ Hooks çš„ä¸€äº›ç‰¹æ€§å’Œè¦éµå¾ªçš„è§„åˆ™ï¼Œé‚£ä¹ˆåº”ç”¨åˆ°æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œå°±å¿…é¡»æ—¶åˆ»æ³¨æ„ä¸èƒ½å†™é”™ã€‚æˆ‘æ€»ç»“äº†ä¸€ä¸‹ï¼ŒåŒ…æ‹¬è¿™ä¹ˆä¸‰ç‚¹ï¼š</p><ol>\n<li>åœ¨ useEffect çš„å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨çš„å˜é‡ï¼Œéƒ½å¿…é¡»åœ¨ä¾èµ–é¡¹ä¸­å£°æ˜ï¼›</li>\n<li>Hooks ä¸èƒ½å‡ºç°åœ¨æ¡ä»¶è¯­å¥æˆ–è€…å¾ªç¯ä¸­ï¼Œä¹Ÿä¸èƒ½å‡ºç°åœ¨ return ä¹‹åï¼›</li>\n<li>Hooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è€…è‡ªå®šä¹‰ Hooks ä¸­ä½¿ç”¨ã€‚</li>\n</ol><p>é‚£ä¹ˆä½ å¯èƒ½è¦é—®ï¼Œè¦ä¿è¯å®Œå…¨éµå¾ªè§„åˆ™ï¼Œçœ‹ä¸Šå»å¥½åƒæŒºå›°éš¾çš„ï¼Œå¿…é¡»å¾—éå¸¸å°å¿ƒï¼Œä¸çŸ¥é“æœ‰ä»€ä¹ˆå¥½åŠæ³•å¯ä»¥å¸®åŠ©æŒæ¡å—ï¼Ÿè´´å¿ƒçš„ React å®˜æ–¹ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª ESLint çš„æ’ä»¶ï¼Œ<strong>ä¸“é—¨ç”¨æ¥æ£€æŸ¥ Hooks æ˜¯å¦æ­£ç¡®è¢«ä½¿ç”¨ï¼Œå®ƒå°±æ˜¯</strong> <a href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\"><strong>eslint-plugin-react-hooks</strong></a> ã€‚</p><p>é€šè¿‡è¿™ä¸ªæ’ä»¶ï¼Œå¦‚æœå‘ç°ç¼ºå°‘ä¾èµ–é¡¹å®šä¹‰è¿™æ ·è¿åè§„åˆ™çš„æƒ…å†µï¼Œå°±ä¼šæŠ¥ä¸€ä¸ªé”™è¯¯æç¤ºï¼ˆç±»ä¼¼äºè¯­æ³•é”™è¯¯çš„æç¤ºï¼‰ï¼Œæ–¹ä¾¿è¿›è¡Œä¿®æ”¹ï¼Œä»è€Œé¿å… Hooks çš„é”™è¯¯ä½¿ç”¨ã€‚</p><p>ä½¿ç”¨çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ npm æˆ–è€… yarn å®‰è£…è¿™ä¸ªæ’ä»¶ï¼š</p><pre><code>npm install eslint-plugin-react-hooks --save-dev\n</code></pre><p>ç„¶ååœ¨ä½ çš„ ESLint é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä¸¤ä¸ªè§„åˆ™ï¼š<strong>rules-of-hooks å’Œ exhaustive-deps</strong>ã€‚å¦‚ä¸‹ï¼š</p><pre><code>{\n  &quot;plugins&quot;: [\n    // ...\n    &quot;react-hooks&quot;\n  ],\n  &quot;rules&quot;: {\n    // ...\n    // æ£€æŸ¥ Hooks çš„ä½¿ç”¨è§„åˆ™\n    &quot;react-hooks/rules-of-hooks&quot;: &quot;error&quot;, \n    // æ£€æŸ¥ä¾èµ–é¡¹çš„å£°æ˜\n    &quot;react-hooks/exhaustive-deps&quot;: &quot;warn&quot;\n  }\n}\n</code></pre><p>è¦çŸ¥é“ï¼Œè¿™ä¸ªæ’ä»¶å‡ ä¹æ˜¯ React å‡½æ•°ç»„ä»¶å¼€å‘å¿…å¤‡çš„å·¥å…·ï¼Œèƒ½å¤Ÿé¿å…å¾ˆå¤šå¯èƒ½çœ‹ä¸Šå»å¾ˆå¥‡æ€ªçš„é”™è¯¯ã€‚æ‰€ä»¥ä½œä¸ºå¼€å§‹å¼€å‘çš„ç¬¬ä¸€æ­¥ï¼Œä¸€å®šè¦å®‰è£…å¹¶é…ç½®å¥½è¿™ä¸ªæ’ä»¶ã€‚</p><h1>å°ç»“</h1><p>åœ¨è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº† useState å’Œ useEffect è¿™ä¸¤ä¸ªæ ¸å¿ƒ Hooks çš„ç”¨æ³•ï¼Œä¸€ä¸ªç”¨äºä¿å­˜çŠ¶æ€ï¼Œä¸€ä¸ªç”¨äºæ‰§è¡Œå‰¯ä½œç”¨ã€‚å¯ä»¥è¯´ï¼Œ<strong>æŒæ¡äº†è¿™ä¸¤ä¸ª Hooksï¼Œå‡ ä¹å°±èƒ½å®Œæˆå¤§éƒ¨åˆ†çš„ React çš„å¼€å‘äº†</strong>ã€‚</p><p>åŒæ—¶ï¼Œæ ¹æ®è¿™ä¸¤ä¸ª Hooks çš„ç”¨æ³•å®ä¾‹ï¼Œæˆ‘ä»¬è¿˜è¿›ä¸€æ­¥å­¦ä¹ äº† Hooks ä¾èµ–é¡¹çš„å«ä¹‰ï¼Œä»¥åŠä½¿ç”¨è§„åˆ™ã€‚é€šè¿‡å®šä¹‰ä¸åŒç±»å‹çš„ä¾èµ–é¡¹ï¼Œä½ å°±å¯ä»¥åœ¨ç»„ä»¶çš„ä¸åŒç”Ÿå‘½å‘¨æœŸä¸­å»æ‰§è¡Œä¸åŒçš„é€»è¾‘ã€‚</p><p>è¦çŸ¥é“ï¼Œç†è§£äº†è¿™äº›æœºåˆ¶æ˜¯ä¸€åŠ³æ°¸é€¸çš„ï¼Œå› ä¸ºæ— è®ºæ˜¯å…¶å®ƒçš„å†…ç½® Hooksï¼Œè¿˜æ˜¯è‡ªå®šä¹‰ Hooksï¼Œéƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™å°†æœ‰åŠ©äºåé¢ Hooks çš„å­¦ä¹ ã€‚</p><h1>æ€è€ƒé¢˜</h1><ol>\n<li>åœ¨ useEffect ä¸­å¦‚æœä½¿ç”¨äº†æŸäº›å˜é‡ï¼Œå´æ²¡æœ‰åœ¨ä¾èµ–é¡¹ä¸­æŒ‡å®šï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</li>\n<li>å¯¹äºè¿™èŠ‚è¯¾ä¸­æ˜¾ç¤ºçš„ Blog æ–‡ç« çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨ useEffect ä¸­ä½¿ç”¨äº† setBlogContent è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼Œæœ¬è´¨ä¸Šå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°éœ€è¦è¢«ä½œä¸ºä¾èµ–é¡¹å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>\n</ol><p>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æƒ³æ³•å’Œæ€è€ƒï¼Œæˆ‘ä¼šå’Œä½ ä¸€èµ·äº¤æµè®¨è®ºï¼æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","neighbors":{"left":{"article_title":"02ï½œç†è§£ Hooksï¼šReact ä¸ºä»€ä¹ˆè¦å‘æ˜ Hooksï¼Ÿ","id":378311},"right":{"article_title":"04ï½œå†…ç½® Hooksï¼ˆ2ï¼‰ï¼šä¸ºä»€ä¹ˆè¦é¿å…é‡å¤å®šä¹‰å›è°ƒå‡½æ•°ï¼Ÿ","id":380210}},"comments":[[{"had_liked":false,"id":296863,"user_name":"ç‹¬ç™½","can_delete":false,"product_type":"c1","uid":1700211,"ip_address":"","ucode":"EDC477BD20B032","user_header":"https://static001.geekbang.org/account/avatar/00/19/f1/73/6f7e3b35.jpg","comment_is_top":true,"comment_ctime":1623206300,"is_pvip":false,"replies":[{"id":"107979","content":"ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","comment_id":296863,"uid":"1018676","ip_address":"","utype":1,"ctime":1623470716,"user_name_real":"Nate"}],"discussion_count":2,"race_medal":0,"score":"9.2233721029024993e+18","product_id":100079901,"comment_content":"1. 1ï¼‰ä¾èµ–é‚£é‡Œæ²¡æœ‰ä¼ ä»»ä½•å‚æ•°çš„è¯ï¼Œä¼šæ¯æ¬¡renderéƒ½æ‰§è¡Œã€‚2ï¼‰ä¾èµ–é¡¹æœ‰ä¼ å€¼ä½†æ˜¯ï¼Œæœ‰éƒ¨åˆ†ä¾èµ–æ²¡æœ‰ä¼ ï¼Œé‚£ä¹ˆæ²¡æœ‰ä¼ çš„é‚£éƒ¨åˆ†ï¼Œæ•°æ®å³ä½¿å˜åŒ–ä¹Ÿä¸ä¼šæ‰§è¡Œå‰¯ä½œç”¨ã€‚<br>2.å‡½æ•°åº”è¯¥æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦ç›‘å¬ã€‚","like_count":15,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521618,"discussion_content":"ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623470716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1369514,"avatar":"https://static001.geekbang.org/account/avatar/00/14/e5/aa/57926594.jpg","nickname":"Ppei","note":"","ucode":"C354F8EF0C5814","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380006,"discussion_content":"setBlogContentæ¯æ¬¡renderè¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå¥æŸ„ï¼Œç±»ä¼¼äºuseCallbackçš„æ•ˆæœ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1624279483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295234,"user_name":"Condor Hero","can_delete":false,"product_type":"c1","uid":1528334,"ip_address":"","ucode":"BD850FE812D22F","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/0e/c5ff46d2.jpg","comment_is_top":false,"comment_ctime":1622310747,"is_pvip":true,"replies":[{"id":"107182","content":"ä½ å¥½ï¼Œå­¦ä¹ çš„å¾ˆè®¤çœŸå“ˆï¼Œå®˜æ–¹æ–‡æ¡£é€šå¸¸æ˜¯æœ€å¥½çš„æŒæ¡å¥½åŸºç¡€æ¦‚å¿µæœ€å…¨é¢çš„æ–¹å¼ã€‚eslint æ’ä»¶çš„ç›®çš„ä¸»è¦æ˜¯å¸®åŠ©ä½ å‘ç°å¯èƒ½çš„é”™è¯¯ã€‚ä½†æ˜¯ deps çš„æœ¬è´¨åœ¨äºç¡®ä¿callback é‡Œéœ€è¦ç”¨åˆ°çš„å˜é‡åœ¨å˜åŒ–æ—¶ä¿è¯é‡æ–°æ‰§è¡Œã€‚æ‰€ä»¥è¿™ä¸ªé€»è¾‘åªè¦ä½ è‡ªå·±éå¸¸ç¡®å®šä¸å‡ºé”™å°±å¯ä»¥äº†ã€‚eslint åªæ˜¯èµ·ä¸€ä¸ªè¾…åŠ©åˆ¤æ–­çš„ä½œç”¨ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œä½ å®Œå…¨å¯ä»¥åŠ ä¸€ä¸ªæ³¨é‡Šï¼š<br>&#47;&#47; eslint-disable-line <br>è®© eslint å¿½ç•¥è¿™ä¸ªæ£€æŸ¥ã€‚ä½ è‡ªå·±æ¥å†³å®šè¿™ä¸ªä»£ç æ˜¯ä¸æ˜¯æ­£ç¡®çš„é€»è¾‘ã€‚å› ä¸ºæœ¬è´¨ä¸Šï¼Œæ— è®ºæ€ä¹ˆå†™ï¼Œè¯­æ³•ä¸Šéƒ½æ˜¯æ­£ç¡®çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":295234,"uid":"1018676","ip_address":"","utype":1,"ctime":1622362382,"user_name_real":"Nate"}],"discussion_count":2,"race_medal":1,"score":"48866951003","product_id":100079901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘çœ‹åˆ° redux å®˜ç½‘å®ç° useActions å‡½æ•°ï¼Œè®©æˆ‘å¾ˆå›°æƒ‘ï¼š<br><br>åœ°å€ï¼šhttps:&#47;&#47;react-redux.js.org&#47;api&#47;hooks#recipe-useactions<br><br>æ‘˜å½•æºç ï¼Œå®ƒçš„ä¾èµ–æ•°ç»„æ˜¯åŠ¨æ€çš„ï¼Œè¿™è‚¯å®šæ˜¯ä¸å¯¹çš„ï¼Œä½†æ˜¯å¦‚ä½•åœ¨ eslint-plugin-react-hooks è§„åˆ™ä¸‹å†™è¿™ä¸ªå‡½æ•°çš„å‘¢ï¼Ÿï¼š<br><br>```react<br>import { bindActionCreators } from &#39;redux&#39;<br>import { useDispatch } from &#39;react-redux&#39;<br>import { useMemo } from &#39;react&#39;<br><br>export function useActions(actions, deps) {<br>    const dispatch = useDispatch()<br>    return useMemo(<br>        () =&gt; {<br>            if (Array.isArray(actions)) {<br>                return actions.map(a =&gt; bindActionCreators(a, dispatch))<br>            }<br>            return bindActionCreators(actions, dispatch)<br>        },<br>        &#47;&#47; è¿™ä¸ªä¾èµ–æ•°ç»„ä¸æ˜¯å¸¸é‡çš„<br>        deps ? [dispatch, ...deps] : [dispatch]<br>    )<br>}<br>```<br><br>","like_count":12,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521000,"discussion_content":"ä½ å¥½ï¼Œå­¦ä¹ çš„å¾ˆè®¤çœŸå“ˆï¼Œå®˜æ–¹æ–‡æ¡£é€šå¸¸æ˜¯æœ€å¥½çš„æŒæ¡å¥½åŸºç¡€æ¦‚å¿µæœ€å…¨é¢çš„æ–¹å¼ã€‚eslint æ’ä»¶çš„ç›®çš„ä¸»è¦æ˜¯å¸®åŠ©ä½ å‘ç°å¯èƒ½çš„é”™è¯¯ã€‚ä½†æ˜¯ deps çš„æœ¬è´¨åœ¨äºç¡®ä¿callback é‡Œéœ€è¦ç”¨åˆ°çš„å˜é‡åœ¨å˜åŒ–æ—¶ä¿è¯é‡æ–°æ‰§è¡Œã€‚æ‰€ä»¥è¿™ä¸ªé€»è¾‘åªè¦ä½ è‡ªå·±éå¸¸ç¡®å®šä¸å‡ºé”™å°±å¯ä»¥äº†ã€‚eslint åªæ˜¯èµ·ä¸€ä¸ªè¾…åŠ©åˆ¤æ–­çš„ä½œç”¨ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œä½ å®Œå…¨å¯ä»¥åŠ ä¸€ä¸ªæ³¨é‡Šï¼š\n// eslint-disable-line \nè®© eslint å¿½ç•¥è¿™ä¸ªæ£€æŸ¥ã€‚ä½ è‡ªå·±æ¥å†³å®šè¿™ä¸ªä»£ç æ˜¯ä¸æ˜¯æ­£ç¡®çš„é€»è¾‘ã€‚å› ä¸ºæœ¬è´¨ä¸Šï¼Œæ— è®ºæ€ä¹ˆå†™ï¼Œè¯­æ³•ä¸Šéƒ½æ˜¯æ­£ç¡®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622362382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1528334,"avatar":"https://static001.geekbang.org/account/avatar/00/17/52/0e/c5ff46d2.jpg","nickname":"Condor Hero","note":"","ucode":"BD850FE812D22F","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376757,"discussion_content":"è€å¸ˆæˆ‘å‘ç°ä¸æ­¢ Redux ä½¿ç”¨äº†åŠ¨æ€çš„ä¾èµ–æ•°ç»„ï¼Œalibaba çš„å¼€æºé¡¹ç›®ä¹Ÿç”¨äº†ï¼Œæ¯”å¦‚å®ƒä»¬å°è£…çš„ useUpdateEffect hookï¼š\n\nå‚è€ƒåœ°å€ï¼šhttps://github.com/alibaba/hooks/blob/master/packages/hooks/src/useUpdateEffect/index.ts\n\n```ts\nimport { useEffect, useRef } from &#39;react&#39;;\n\nconst useUpdateEffect: typeof useEffect = (effect, deps) => {\n\tconst isMounted = useRef(false);\n\n\tuseEffect(() => {\n\t\tif (!isMounted.current) {\n\t\t\tisMounted.current = true;\n\t\t} else {\n\t\t\treturn effect();\n\t\t}\n\t// deps æ˜¯ä¸ªå˜é‡\n\t}, deps);\n};\n\nexport default useUpdateEffect;\n```\n\nè€å¸ˆï¼Œæˆ‘çš„ç–‘é—®ï¼š\n\n1. hooks çš„ä¾èµ–æ•°ç»„ï¼Œåˆ°åº•èƒ½ä¸èƒ½ç”¨è¡¨è¾¾å¼æˆ–å˜é‡æ¥æ›¿ä»£å­—é¢é‡æ•°ç»„\n2. å¦‚æœä¾èµ–æ•°ç»„ä¸èƒ½ä½¿ç”¨åŠ¨æ€çš„ï¼Œåªèƒ½æŒ‡å®šå­—é¢é‡ä¾èµ–æ•°ç»„ï¼Œé‚£ä¹ˆè¿™ç§éœ€æ±‚ hook å¦‚ä½•å°è£…ï¼Ÿ\n3. è¿˜æœ‰å°±æ˜¯ç”¨é˜¿é‡Œå·´å·´æˆ– Redux çš„ useActions ï¼Œæˆ‘è¯¥å¦‚ä½•é…åˆ eslint-plugin-react-hooks ä½¿ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622312007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295235,"user_name":"William","can_delete":false,"product_type":"c1","uid":1241365,"ip_address":"","ucode":"4499F99B180102","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/15/8fcf8038.jpg","comment_is_top":false,"comment_ctime":1622312089,"is_pvip":true,"replies":[{"id":"107184","content":"1. æ­£ç¡®<br>2. æ²¡å¿…è¦çš„åŸå› åœ¨äº React çŸ¥é“ setBlogContent æ˜¯æ°¸è¿œä¸ä¼šå˜çš„ï¼Œå› ä¸ºæ˜¯ useState ä¸­è¿”å›çš„ã€‚æ‰€ä»¥å¯ä»¥å¿½ç•¥ã€‚<br>3. æ˜¯çš„ï¼Œå¾ˆå¥½çš„æç¤ºã€‚å¦‚æœåœ¨ useEffect ä¸­è¦ä½¿ç”¨ï¼Œå¯ä»¥ç”¨å‡½æ•°ä½œä¸º set æ–¹æ³•çš„å‚æ•°ï¼Œæ¯”å¦‚ setSomeState(prevState =&gt; newState) ","user_name":"ä½œè€…å›å¤","comment_id":295235,"uid":"1018676","ip_address":"","utype":1,"ctime":1622362537,"user_name_real":"Nate"}],"discussion_count":6,"race_medal":1,"score":"27392115865","product_id":100079901,"comment_content":"æ€è€ƒé¢˜ï¼š<br>1. æœªåœ¨ä¾èµ–é¡¹ä¸­æŒ‡å®šå˜é‡Xï¼Œå½“Xå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸ä¼šè§¦å‘ useEffect æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚<br>2. setBlogContentå¯ä»¥ä½œä¸ºä¾èµ–é¡¹ï¼Œä½†æ˜¯æ²¡å¿…è¦ã€‚å› ä¸ºä»–åªæ˜¯ç”¨æ¥ setStateã€‚<br>3. blogContentä¸å¯ä»¥ä½œä¸ºä¾èµ–é¡¹ï¼Œä¼šå¼•èµ·æ­»å¾ªç¯ã€‚å› ä¸ºåœ¨useEffectä¸­ä¿®æ”¹äº†blogContentï¼Œä¼šå¼•èµ·æ–°ä¸€è½®â€œå‰¯ä½œç”¨â€å›è°ƒã€‚<br><br>https:&#47;&#47;github.com&#47;Si3ver&#47;react-hooks-demos&#47;blob&#47;main&#47;src&#47;03&#47;BlogView.js","like_count":6,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521001,"discussion_content":"1. æ­£ç¡®\n2. æ²¡å¿…è¦çš„åŸå› åœ¨äº React çŸ¥é“ setBlogContent æ˜¯æ°¸è¿œä¸ä¼šå˜çš„ï¼Œå› ä¸ºæ˜¯ useState ä¸­è¿”å›çš„ã€‚æ‰€ä»¥å¯ä»¥å¿½ç•¥ã€‚\n3. æ˜¯çš„ï¼Œå¾ˆå¥½çš„æç¤ºã€‚å¦‚æœåœ¨ useEffect ä¸­è¦ä½¿ç”¨ï¼Œå¯ä»¥ç”¨å‡½æ•°ä½œä¸º set æ–¹æ³•çš„å‚æ•°ï¼Œæ¯”å¦‚ setSomeState(prevState =&amp;gt; newState) ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622362537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1374957,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fa/ed/0742b854.jpg","nickname":"Jeffrey Ma","note":"","ucode":"0C5E2AB51E6A83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579420,"discussion_content":"æˆ–è€…è¯´ ä¸ä¼šå¾ªç¯å—ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657441121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1374957,"avatar":"https://static001.geekbang.org/account/avatar/00/14/fa/ed/0742b854.jpg","nickname":"Jeffrey Ma","note":"","ucode":"0C5E2AB51E6A83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579419,"discussion_content":"æƒ³è¯·é—®ä¸€ä¸‹ï¼Œ è¿™ä¸ªå¼‚æ­¥å‡½æ•°é‡Œé¢çš„ setContentçš„å€¼ç¬¬ä¸€æ¬¡è¢«èµ‹å€¼ä¸º null, é‚£ä¹ˆå¼•èµ·è§†å›¾çš„æ›´æ–°ï¼Œä¼šå†æ‰§è¡Œä¸€æ¬¡useEffectçš„è¯ï¼Œä¸ä¼šå‘èµ·ä¸¤æ¬¡è¯·æ±‚å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657441098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2645928,"avatar":"https://static001.geekbang.org/account/avatar/00/28/5f/a8/4a6c6d9b.jpg","nickname":"Afan","note":"","ucode":"A5FA23706A387A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377305,"discussion_content":"æ˜¯ä¸æ˜¯åœºæ™¯ä¸åŒï¼Œå¸Œæœ›è€å¸ˆåˆ†æä¸‹åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622597060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2645928,"avatar":"https://static001.geekbang.org/account/avatar/00/28/5f/a8/4a6c6d9b.jpg","nickname":"Afan","note":"","ucode":"A5FA23706A387A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377304,"discussion_content":"è¿™å—æˆ‘æœ‰ä¸€äº›ç–‘é—®ï¼Œè®¾ç½®äº†ä¾èµ–é¡¹blogContentï¼Œä¸ä¼šå¼•èµ·æ­»å¾ªç¯çš„ã€‚ hooksæœ¬èº«æœ‰ä¸€ç§æœºåˆ¶bailing out psï¼šhttps://reactjs.org/docs/hooks-reference.html#bailing-out-of-a-dispatch\n\nIf you return the same value from a Reducer Hook as the current state, React will bail out without rendering the children or firing effects. ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622596989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2885242,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLCEsLNSXFBaT1s1tRU0bVmWc0ekGvMpicFmZdiaSM5IdpibltMh4BvFaYM9rtq8sRafLX1kJCZcjNSg/132","nickname":"zyzxrj","note":"","ucode":"44C9B0F43A43C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2645928,"avatar":"https://static001.geekbang.org/account/avatar/00/28/5f/a8/4a6c6d9b.jpg","nickname":"Afan","note":"","ucode":"A5FA23706A387A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552213,"discussion_content":"å¯æ˜¯ä»ä»£ç å±‚é¢æ¥è¯´è¿™æ ·å†™é€»è¾‘æ˜¯ä¸åˆç†çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645348995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":377304,"ip_address":""},"score":552213,"extra":""}]}]},{"had_liked":false,"id":295184,"user_name":"é€é¥ä¸€ç”Ÿ","can_delete":false,"product_type":"c1","uid":1467212,"ip_address":"","ucode":"B0F879BE34E4A1","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/4c/09fe3f7a.jpg","comment_is_top":false,"comment_ctime":1622288528,"is_pvip":false,"replies":[{"id":"107180","content":"1. ä¸æŒ‡å®šä¾èµ–çš„è¯ï¼Œå°±æ¯æ¬¡æ‰§è¡Œã€‚ä¸åªæ˜¯æ€§èƒ½é—®é¢˜ï¼Œæœ‰å¯èƒ½ä¼šäº§ç”Ÿ bugï¼Œæ¯”å¦‚ä¸åœçš„äº§ç”Ÿå‰¯ä½œç”¨å‘è¯·æ±‚ç»™åç«¯ã€‚ç¬¬äºŒç‚¹å¯¹çš„ï¼Œæ¼æ‰çš„è¯ä¼šå¯¼è‡´ä¾èµ–å˜åŒ–æ—¶å‰¯ä½œç”¨ä¸æ‰§è¡Œã€‚<br>2. ä¸éœ€è¦çš„åŸå› åœ¨äº React çŸ¥é“ setBlogContent ç¡®å®šæ˜¯ä¸ä¼šå˜çš„ã€‚è¿™æ˜¯ useState çš„æœºåˆ¶å†³å®šçš„ï¼ŒReact å’Œ ESLint æ’ä»¶éƒ½çŸ¥é“ï¼Œæ‰€ä»¥å†™ä¸å†™éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥å¿½ç•¥ã€‚<br>","user_name":"ä½œè€…å›å¤","comment_id":295184,"uid":"1018676","ip_address":"","utype":1,"ctime":1622360700,"user_name_real":"Nate"}],"discussion_count":2,"race_medal":0,"score":"27392092304","product_id":100079901,"comment_content":"1. åˆ†ä¸¤ç§æƒ…å†µï¼Œ1ï¼‰å¦‚æœä¾èµ–ä¸ºç©ºï¼Œåˆ™æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œï¼Œæ€§èƒ½æœ‰æŸè€—  2ï¼‰ä¾èµ–ä¸ºæ•°ç»„ï¼Œä¸”æ¼æ‰äº†éƒ¨åˆ†çš„ä¾èµ–ï¼Œä¼šå¯¼è‡´è¯¥ä¾èµ–å‘ç”Ÿå˜åŒ–çš„æ—¶å€™useEffectå†…éƒ¨çš„é€»è¾‘ä¸æ‰§è¡Œ<br><br>2. ä¸éœ€è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›çš„ä»…ä»…æ˜¯åœ¨idå˜åŒ–çš„æ—¶å€™è§¦å‘æ›´æ–°","like_count":6,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520977,"discussion_content":"1. ä¸æŒ‡å®šä¾èµ–çš„è¯ï¼Œå°±æ¯æ¬¡æ‰§è¡Œã€‚ä¸åªæ˜¯æ€§èƒ½é—®é¢˜ï¼Œæœ‰å¯èƒ½ä¼šäº§ç”Ÿ bugï¼Œæ¯”å¦‚ä¸åœçš„äº§ç”Ÿå‰¯ä½œç”¨å‘è¯·æ±‚ç»™åç«¯ã€‚ç¬¬äºŒç‚¹å¯¹çš„ï¼Œæ¼æ‰çš„è¯ä¼šå¯¼è‡´ä¾èµ–å˜åŒ–æ—¶å‰¯ä½œç”¨ä¸æ‰§è¡Œã€‚\n2. ä¸éœ€è¦çš„åŸå› åœ¨äº React çŸ¥é“ setBlogContent ç¡®å®šæ˜¯ä¸ä¼šå˜çš„ã€‚è¿™æ˜¯ useState çš„æœºåˆ¶å†³å®šçš„ï¼ŒReact å’Œ ESLint æ’ä»¶éƒ½çŸ¥é“ï¼Œæ‰€ä»¥å†™ä¸å†™éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥å¿½ç•¥ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622360700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1742144,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJPXN6tO1ka2YhSEnzFLocuXCY9ibrTP8yczqymEGXKwJsDE276MaVBXHSibYiaOl8Z6XOoRTpAbyUnA/132","nickname":"Geek_97af74","note":"","ucode":"73D8823A964877","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376753,"discussion_content":"ç¬¬äºŒé¢˜ï¼Œä¸éœ€è¦æ˜¯å› ä¸ºreactä¿è¯äº†setXXXå‡½æ•°å§‹ç»ˆæ˜¯ç¨³å®šçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ å…¥ä¾èµ–ï¼Œæ‰€ä»¥å°±ç®—ä¸åŠ å…¥lintå·¥å…·ä¹Ÿä¸ä¼šæœ‰warningã€‚\nè¿™ä¸ªæ–‡æ¡£é‡Œæœ‰å†™çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1622310877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297541,"user_name":"å¥ç‰Œå“¥.","can_delete":false,"product_type":"c1","uid":1374132,"ip_address":"","ucode":"671B0247FFF223","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/b4/d0a6c7d2.jpg","comment_is_top":false,"comment_ctime":1623607448,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10213542040","product_id":100079901,"comment_content":"è€å¸ˆèƒ½è¯¦ç»†è®²ä¸€ä¸‹hooksä¸ºä»€ä¹ˆåªèƒ½åœ¨å‡½æ•°é¡¶å±‚è°ƒç”¨å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2652102,"avatar":"","nickname":"Geek_d221bc","note":"","ucode":"DB6B2581688624","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535526,"discussion_content":"æ‰€è°“é¡¶å±‚ä½œç”¨åŸŸï¼Œå°±æ˜¯ Hooks ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…åµŒå¥—å‡½æ•°å†…æ‰§è¡Œï¼Œè€Œå¿…é¡»æ˜¯åœ¨é¡¶å±‚ã€‚åŒæ—¶ Hooks åœ¨ç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ï¼Œå¿…é¡»æŒ‰é¡ºåºè¢«æ‰§è¡Œã€‚å› ä¸ºåœ¨ React ç»„ä»¶å†…éƒ¨ï¼Œå…¶å®æ˜¯ç»´æŠ¤äº†ä¸€ä¸ªå¯¹åº”ç»„ä»¶çš„å›ºå®š Hooks æ‰§è¡Œåˆ—è¡¨çš„ï¼Œä»¥ä¾¿åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒ Hooks çš„çŠ¶æ€ï¼Œå¹¶åšå¯¹æ¯”ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1638457761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2819061,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/03/f5/ed243c62.jpg","nickname":"ææµ…","note":"","ucode":"351D5C13345B5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582986,"discussion_content":"å› ä¸ºåœ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé€šè¿‡ if æ¡ä»¶è¯­å¥ï¼Œå¢åŠ æˆ–è€…åˆ é™¤ hooksï¼Œåœ¨å¤ç”¨ hooks è¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿå¤ç”¨ hooks çŠ¶æ€å’Œå½“å‰ hooks ä¸ä¸€è‡´çš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659861875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295555,"user_name":"é—²é—²","can_delete":false,"product_type":"c1","uid":1637571,"ip_address":"","ucode":"B2099BDCFF6191","user_header":"https://static001.geekbang.org/account/avatar/00/18/fc/c3/0991edfc.jpg","comment_is_top":false,"comment_ctime":1622474462,"is_pvip":false,"replies":[{"id":"107372","content":"setState æ—¶å†…éƒ¨æ˜¯é€šè¿‡å¼•ç”¨æ¯”è¾ƒä¸¤æ¬¡å€¼æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥ä¸€å®šè¦ç”¨ immutable çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡æ¥ä¿®æ”¹å€¼ï¼Œæ¯”å¦‚ setState({...oldState, aa: 2})ã€‚","user_name":"ä½œè€…å›å¤","comment_id":295555,"uid":"1018676","ip_address":"","utype":1,"ctime":1622558628,"user_name_real":"Nate"}],"discussion_count":2,"race_medal":0,"score":"10212409054","product_id":100079901,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œ<br>æˆ‘ä»¬é¡¹ç›®é‡Œé¢ç”¨åˆ°hookï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œstateä¼šå¾ˆå¤šï¼Œä¸å¯èƒ½ä¸€ä¸¤ä¸ªï¼Œæ‰€ä»¥ä¼šæŠŠsateç»„åˆæˆå¯¹è±¡ï¼Œä½†æ˜¯æœ‰æ—¶å€™å¯¹è±¡å‘ç”Ÿäº†æ”¹å˜ï¼Œä¾‹å¦‚{aa:1}--&gt;{aa:2},useEffect ç›‘å¬å‡½æ•°æ²¡æœ‰è¿›ï¼Œéœ€è¦æ‰‹åŠ¨çš„å°†ä¸¤æ¬¡å¯¹è±¡Obeject.assginä¸€ä¸‹æ‰èƒ½è§¦å‘ç›‘å¬ï¼Œä¸çŸ¥é“è€å¸ˆæœ‰æ²¡æœ‰é‡åˆ°è¿‡ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521126,"discussion_content":"setState æ—¶å†…éƒ¨æ˜¯é€šè¿‡å¼•ç”¨æ¯”è¾ƒä¸¤æ¬¡å€¼æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥ä¸€å®šè¦ç”¨ immutable çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡æ¥ä¿®æ”¹å€¼ï¼Œæ¯”å¦‚ setState({...oldState, aa: 2})ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622558628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1044036,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ee/44/26ac883e.jpg","nickname":"æ¡ƒç¿","note":"","ucode":"CB438AF450DC00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377103,"discussion_content":"è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¦å¤–ä½ ä¹Ÿå¯ä»¥æŠŠå¯¹è±¡çš„å±æ€§ç”¨æ¥åšä¾èµ–ï¼Œæ¯”å¦‚ [obj.aa] ä½œä¸ºä¾èµ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622509295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308653,"user_name":"Geek_6b7a3b","can_delete":false,"product_type":"c1","uid":2649052,"ip_address":"","ucode":"A53B5DD6A828A0","user_header":"","comment_is_top":false,"comment_ctime":1629719818,"is_pvip":false,"replies":[{"id":"111728","content":"åœ¨å‡½æ•°å†…éƒ¨çš„å˜é‡éƒ½æ˜¯å±€éƒ¨å˜é‡ã€‚åªæ˜¯è¿™ä¸ªå˜é‡æ¯æ¬¡è¢«èµ‹äºˆçš„å€¼æ¥è‡ªçš„ hook ä¿è¯å®ƒçš„å€¼æ¯æ¬¡éƒ½ä¸å˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":308653,"uid":"1018676","ip_address":"","utype":1,"ctime":1629726011,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"5924687114","product_id":100079901,"comment_content":"è€å¸ˆï¼Œç¬¬äºŒä¸ªé—®é¢˜ä¸ºä»€ä¹ˆè¯´setBlogContentæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè¿™ä¸ªéš¾é“ä¸æ˜¯å…¨å±€çš„å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":305462,"user_name":"Hottou","can_delete":false,"product_type":"c1","uid":1435166,"ip_address":"","ucode":"0EEC47D9D2968A","user_header":"https://static001.geekbang.org/account/avatar/00/15/e6/1e/ab237ae4.jpg","comment_is_top":false,"comment_ctime":1627982057,"is_pvip":false,"replies":[{"id":"110626","content":"useState èƒ½å¤Ÿä¿è¯ setBlogContent æ¯æ¬¡éƒ½æ˜¯åŒä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æ— éœ€ä½œä¸ºä¾èµ–é¡¹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":305462,"uid":"1018676","ip_address":"","utype":1,"ctime":1628154758,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"5922949353","product_id":100079901,"comment_content":"ç‹è€å¸ˆï¼Œå¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œå› ä¸ºæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡setBlogContentå‡½æ•°ï¼Œå®ƒçš„æŒ‡å‘åœ°å€æ˜¯ä¸å˜çš„ï¼Œæ‰€ä»¥å³ä½¿æŠŠå®ƒä½œä¸ºä¾èµ–é¡¹ï¼Œé‚£ä¹ˆå®ƒæ°¸è¿œä¹Ÿä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ˜¯è¿™æ ·å­å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":299878,"user_name":"æˆ‘è¦çš„é£ç¿”","can_delete":false,"product_type":"c1","uid":1200447,"ip_address":"","ucode":"41C51DBC8372BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/51/3f/41c68054.jpg","comment_is_top":false,"comment_ctime":1624891827,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5919859123","product_id":100079901,"comment_content":"è€å¸ˆå¥½ï¼Œæƒ³é—®ä¸€ä¸ªé—®é¢˜ï½<br>åœ¨ç”¨useEffectå¤„ç†å‰¯ä½œç”¨çš„æ—¶å€™ï¼Œå¦‚æœåªæƒ³åœ¨ä¾èµ–é¡¹å˜åŒ–çš„æ—¶å€™æ‰§è¡Œï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡ä¸æ‰§è¡Œï¼Œ<br>ç±»ä¼¼äºåªéœ€è¦classç»„ä»¶ä¸­çš„componentDidUpdateåº”è¯¥æ€ä¹ˆå†™å‘¢","like_count":1,"discussions":[{"author":{"id":1200447,"avatar":"https://static001.geekbang.org/account/avatar/00/12/51/3f/41c68054.jpg","nickname":"æˆ‘è¦çš„é£ç¿”","note":"","ucode":"41C51DBC8372BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381422,"discussion_content":"å˜¿å˜¿ è€å¸ˆè¿˜æ²¡å›  è¯´ä¸€ä¸‹æˆ‘çš„æ€è·¯ï½\nå¯èƒ½éœ€è¦å€ŸåŠ©useRefæ¥å®ç°ä¸€ä¸‹ï¼Œå£°æ˜ä¸€ä¸ªå˜é‡æ¥è®°å½•æ˜¯å¦â€œæ‰§è¡Œè¿‡â€œå‰¯ä½œç”¨\nç„¶åå†useEffectæ‰§è¡Œå‰¯ä½œç”¨çš„æ—¶å€™æ ¹æ®è¿™è¾¹å˜é‡åˆ¤æ–­æ‰§è¡Œè¿‡ï¼Œå¦‚æœæ²¡æ‰§è¡Œè¿‡å°±ä¸­æ–­å¹¶ä¸”æ‰§è¡Œè¿‡ç½®trueï¼Œå¦åˆ™æ‰æ‰§è¡ŒçœŸæ­£çš„å‰¯ä½œç”¨å‡½æ•°ã€‚\nconst didMountRef = useRef(false);\nuseEffect(() => {\n  if (!didMountRef.current) {\n    didMountRef.current = true;\n    return;\n  } else {\n    func();\n  }\n}, deps)","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1625046106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2759225,"avatar":"","nickname":"dreamarts","note":"","ucode":"962C170E013FEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392993,"discussion_content":"æˆ‘è§‰å¾—ä½ è¿™æ ·å†™æ²¡æ¯›ç—…ï¼Œæˆ‘ç†è§£useRef()å°±æ˜¯ä¸€ä¸ªæ ‡è®°å˜é‡ï¼Œå¯ä»¥æ ‡è®°renderçš„æ¬¡æ•°ä»€ä¹ˆçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631198048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2632198,"avatar":"https://static001.geekbang.org/account/avatar/00/28/2a/06/da417908.jpg","nickname":"æ¸…é£æœˆæ˜","note":"","ucode":"54C98300A9F4DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381171,"discussion_content":"è§‚æˆ˜ä¸­ ~ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624936563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295806,"user_name":"Dark I","can_delete":false,"product_type":"c1","uid":1398772,"ip_address":"","ucode":"B19417BA2ED7A1","user_header":"https://static001.geekbang.org/account/avatar/00/15/57/f4/63c3c5ae.jpg","comment_is_top":false,"comment_ctime":1622604214,"is_pvip":true,"replies":[{"id":"107457","content":"useEffect æ˜¯å‰¯ä½œç”¨ï¼Œä¸€å®šè¦è®°ä½è¯­ä¹‰ï¼Œå‰¯ä½œç”¨çš„é€»è¾‘æ‰éœ€è¦ç”¨åœ¨ useEffect ä¸­ã€‚è€Œä¸” useEffect æ˜¯åœ¨ render åæ‰§è¡Œã€‚å‡½æ•°ä½“æ˜¯å’Œå½“å‰ render ç»“æœç›¸å…³çš„é€»è¾‘ã€‚","user_name":"ä½œè€…å›å¤","comment_id":295806,"uid":"1018676","ip_address":"","utype":1,"ctime":1622727510,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"5917571510","product_id":100079901,"comment_content":"å‡½æ•°ä½“ä¹Ÿæ˜¯æ¯æ¬¡renderéƒ½ä¼šæ‰§è¡Œ é‚£ä¹ˆéœ€è¦æ¯æ¬¡éƒ½ä¼šrenderæ‰§è¡Œçš„è¯­å¥æ˜¯æ”¾åœ¨ æ— ä¾èµ–çš„useEffectä¸­è¿˜æ˜¯ç›´æ¥æ”¾åœ¨å‡½æ•°ä½“ä¸­æ¯”è¾ƒå¥½å‘¢","like_count":1},{"had_liked":false,"id":295729,"user_name":"é™ˆå¨ä¸¥","can_delete":false,"product_type":"c1","uid":1026142,"ip_address":"","ucode":"BE5F6BC588CE17","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a8/5e/e5307db8.jpg","comment_is_top":false,"comment_ctime":1622562482,"is_pvip":false,"replies":[{"id":"107453","content":"æ²¡æœ‰ï¼ŒJS æ­¤ç±»å‡½æ•°çš„åƒåœ¾æ”¶é›†æ•ˆç‡æ˜¯éå¸¸é«˜çš„ï¼Œå¯ä»¥å¿½ç•¥ã€‚","user_name":"ä½œè€…å›å¤","comment_id":295729,"uid":"1018676","ip_address":"","utype":1,"ctime":1622727363,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":1,"score":"5917529778","product_id":100079901,"comment_content":"å°†å‡½æ•°å®šä¹‰åœ¨ useEffect çš„ callback ä¸­ï¼Œæ¯æ¬¡æ‰§è¡Œ useEffect æ—¶éƒ½ä¼šé‡æ–°åˆ›å»ºå‡½æ•°ï¼Œè¿™æ ·å¯¹æ€§èƒ½ä¼šæœ‰å½±å“å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":295612,"user_name":"cyh41","can_delete":false,"product_type":"c1","uid":1387620,"ip_address":"","ucode":"8B342968050F93","user_header":"https://static001.geekbang.org/account/avatar/00/15/2c/64/2a185538.jpg","comment_is_top":false,"comment_ctime":1622513907,"is_pvip":false,"replies":[{"id":"107374","content":"ç”±è¯­ä¹‰å†³å®šï¼Œä¸€èˆ¬åœ¨å‡½æ•°ç»„ä»¶ï¼Œä¸€ä¸ªå€¼å°±æ˜¯ä¸€ä¸ª stateã€‚åœ¨ class ç»„ä»¶æ˜¯ä¸å¾—ä¸å°†æ‰€æœ‰å€¼éƒ½æ”¾åˆ°ä¸€ä¸ª state é‡Œã€‚","user_name":"ä½œè€…å›å¤","comment_id":295612,"uid":"1018676","ip_address":"","utype":1,"ctime":1622558783,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"5917481203","product_id":100079901,"comment_content":"å»ºè®®åˆ†å¼€ç”¨å¤šä¸ªå€¼å¤šä¸ªuseStateï¼Œè¿˜æ˜¯å¤šä¸ªå€¼åˆæˆä¸€ä¸ªuseStateå‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":351523,"user_name":"Andrew","can_delete":false,"product_type":"c1","uid":1856849,"ip_address":"","ucode":"B1598E1E447EC6","user_header":"https://static001.geekbang.org/account/avatar/00/1c/55/51/c7bffc64.jpg","comment_is_top":false,"comment_ctime":1657864108,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657864108","product_id":100079901,"comment_content":"è€å¸ˆï¼Œä¸æ˜¯å¾ˆç†è§£hookså¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œè¿™å¥è¯ã€‚æœ¬æ¥ä¸å°±æ˜¯æŒ‰é¡ºåºé€æ¡æ‰§è¡Œçš„å—ï¼Ÿæ˜¯ä¸æ˜¯æŒ‡å¸¦æœ‰callbackçš„hookï¼Œä»–ä»¬çš„callbackæ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":341986,"user_name":"ä½•ä»¥è§£å¿§","can_delete":false,"product_type":"c1","uid":1915533,"ip_address":"","ucode":"4DFE2BDBAF4919","user_header":"https://static001.geekbang.org/account/avatar/00/1d/3a/8d/f5e7a20d.jpg","comment_is_top":false,"comment_ctime":1649942492,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649942492","product_id":100079901,"comment_content":"useEffect ä¾èµ–é¡¹æ˜¯ç©ºæ•°ç»„çš„æ—¶å€™ï¼ŒåŠ¨æ€æŒ‚è½½çš„æ—¶å€™ä¸ºä»€ä¹ˆä¼šæ‰§è¡Œä¸¤æ¬¡","like_count":0},{"had_liked":false,"id":339202,"user_name":"å®˜é”­AL","can_delete":false,"product_type":"c1","uid":1345325,"ip_address":"","ucode":"793901C6577895","user_header":"https://static001.geekbang.org/account/avatar/00/14/87/2d/dc5fe99f.jpg","comment_is_top":false,"comment_ctime":1647972990,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647972990","product_id":100079901,"comment_content":"useEffectä½¿ç”¨asyncå‡½æ•°ç›´æ¥ä½œä¸ºcbï¼Œæœ‰å•¥é—®é¢˜å˜›","like_count":0},{"had_liked":false,"id":337217,"user_name":"Geek_202275","can_delete":false,"product_type":"c1","uid":2924362,"ip_address":"","ucode":"B5D2B3F713F461","user_header":"","comment_is_top":false,"comment_ctime":1646704440,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646704440","product_id":100079901,"comment_content":"åœ¨ useEffect ä¸­å¦‚æœä½¿ç”¨äº†æŸäº›å˜é‡ï¼Œå´æ²¡æœ‰åœ¨ä¾èµ–é¡¹ä¸­æŒ‡å®šï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":335914,"user_name":"åˆ˜ä¸€å³°","can_delete":false,"product_type":"c1","uid":2784231,"ip_address":"","ucode":"2A59F4325DA5F7","user_header":"","comment_is_top":false,"comment_ctime":1645768780,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645768780","product_id":100079901,"comment_content":"useEffectçš„callbackå‡½æ•°ä¸­å¦‚ä½•returnä¸€ä¸ªå‡½æ•°ï¼Œå®ƒåº”è¯¥æ˜¯åœ¨ç»„ä»¶è¢«å¸è½½ä¹‹å‰æ‰§è¡Œï¼Œè€Œä¸æ˜¯å¸è½½ä¹‹åæ‰§è¡Œã€‚","like_count":0},{"had_liked":false,"id":334133,"user_name":"Geek_5ae50a","can_delete":false,"product_type":"c1","uid":2909669,"ip_address":"","ucode":"DBAECA446E5BB4","user_header":"","comment_is_top":false,"comment_ctime":1644758839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644758839","product_id":100079901,"comment_content":"è€å¸ˆï¼Œè¯·é—®æ–‡ä¸­è¿™å¥è¯ã€å› ä¸ºåœ¨ React ç»„ä»¶å†…éƒ¨ï¼Œå…¶å®æ˜¯ç»´æŠ¤äº†ä¸€ä¸ªå¯¹åº”ç»„ä»¶çš„å›ºå®š Hooks æ‰§è¡Œåˆ—è¡¨çš„ï¼Œä»¥ä¾¿åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒ Hooks çš„çŠ¶æ€ï¼Œå¹¶åšå¯¹æ¯”ã€‚ã€‘å¯¹æ¯”çš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":327993,"user_name":"Light èƒ–è™","can_delete":false,"product_type":"c1","uid":2876591,"ip_address":"","ucode":"D5FCFE14172D31","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e4/af/f8cf4bc2.jpg","comment_is_top":false,"comment_ctime":1640440560,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640440560","product_id":100079901,"comment_content":"å¦‚æœæ•´ä¸ªé¡¹ç›®éƒ½é€‚ç”¨hooksæ˜¯ä¸æ˜¯å¾ˆå°‘ä¼šç”¨åˆ°é«˜é˜¶ç»„ä»¶ï¼Œé«˜é˜¶ç»„ä»¶åœ¨hooksçš„ä»€ä¹ˆåœºæ™¯ä¼šç”¨åˆ°å‘¢","like_count":0},{"had_liked":false,"id":321207,"user_name":"Osmond","can_delete":false,"product_type":"c1","uid":2836830,"ip_address":"","ucode":"7D04C6D7B0DDCB","user_header":"https://static001.geekbang.org/account/avatar/00/2b/49/5e/f430ff83.jpg","comment_is_top":false,"comment_ctime":1636708051,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636708051","product_id":100079901,"comment_content":"è€å¸ˆï¼Œä¹‹å‰è¢«é—®åˆ°ä¸€ä¸ªé—®é¢˜ classå’Œfunctionçš„reactä¸­stateåˆ†åˆ«å­˜åœ¨å“ªé‡Œ","like_count":0},{"had_liked":false,"id":315899,"user_name":"Geek_6b7a3b","can_delete":false,"product_type":"c1","uid":2649052,"ip_address":"","ucode":"A53B5DD6A828A0","user_header":"","comment_is_top":false,"comment_ctime":1634036758,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634036758","product_id":100079901,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œè¢«useCallbackåŒ…è£¹çš„å‡½æ•°åœ¨ä¾èµ–æ²¡æœ‰å˜çš„æ—¶å€™ä¼šé‡æ–°ç”Ÿæˆå—","like_count":0},{"had_liked":false,"id":313498,"user_name":"arronK","can_delete":false,"product_type":"c1","uid":1192961,"ip_address":"","ucode":"58DC6FBF2CF0C1","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/01/30ca98e6.jpg","comment_is_top":false,"comment_ctime":1632466241,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1632466241","product_id":100079901,"comment_content":"å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜æ¥è¯´ï¼Œåœ¨ useEffect ä¸­ä½¿ç”¨äº†å˜é‡ï¼Œä½†åœ¨å…¶ä¾èµ–é¡¹ä¸­æ²¡æœ‰æŒ‡å®šï¼ˆå‡è®¾æŒ‡å®šäº†å…¶å®ƒçš„ä¾èµ–é¡¹ï¼‰ï¼Œé‚£å°±ä¼šå¯¼è‡´è¿™ä¸ªå˜é‡å˜åŒ–çš„æ—¶å€™ä¸ä¼šè§¦å‘ useEffect çš„æ‰§è¡Œã€‚<br><br>ç¬¬äºŒä¸ªé—®é¢˜ï¼ŒsetBlogContent æ˜¯ useState è¿”å›çš„è®¾ç½® state å€¼çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸å˜çš„ï¼Œåœ¨æ¯æ¬¡ render çš„æ—¶å€™ï¼ŒuseState è¿”å›çš„ setBlogContent éƒ½æ˜¯åŒä¸€ä¸ªå‡½æ•°å€¼ã€‚æ‰€ä»¥æ²¡æœ‰æ”¾å…¥ä¾èµ–é¡¹çš„å¿…è¦","like_count":0},{"had_liked":false,"id":310251,"user_name":"åŠå¤","can_delete":false,"product_type":"c1","uid":1232197,"ip_address":"","ucode":"2E06D5323096C8","user_header":"https://static001.geekbang.org/account/avatar/00/12/cd/45/15d2f59e.jpg","comment_is_top":false,"comment_ctime":1630568877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630568877","product_id":100079901,"comment_content":"é—®é¢˜1ï¼š<br>- æ— ä¾èµ–é¡¹ï¼Œæ¯æ¬¡éƒ½æ‰§è¡Œå‰¯ä½œç”¨ï¼›<br>- ä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„ï¼Œæ‰§è¡Œä¸€æ¬¡ï¼›<br>- å°‘å†™äº†éƒ¨åˆ†çš„ä¾èµ–ï¼Œåœ¨è¿™äº›ä¾èµ–å˜åŒ–çš„æ—¶å€™ä¸èƒ½æ­£ç¡®è§¦å‘å‰¯ä½œç”¨æ‰§è¡Œï¼Œä¸”åœ¨å‰¯ä½œç”¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå°‘å†™çš„è¿™éƒ¨åˆ†ä¾èµ–å€¼å¯èƒ½ä¸æ˜¯æœ€æ–°çš„å€¼ï¼›<br><br>é—®é¢˜2ï¼š<br>- å¯ä»¥ä¸å†™ï¼Œå› ä¸ºsetBlogContentä¸å˜ï¼Œä¸ä¼šå½±å“åˆ°å‰¯ä½œç”¨çš„æ‰§è¡Œï¼Œä½†æ˜¯è£…äº†ä¾èµ–æ£€æŸ¥çš„è¯ä¼šæœ‰æç¤ºï¼›","like_count":0},{"had_liked":false,"id":310168,"user_name":"Geek_6b7a3b","can_delete":false,"product_type":"c1","uid":2649052,"ip_address":"","ucode":"A53B5DD6A828A0","user_header":"","comment_is_top":false,"comment_ctime":1630509684,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630509684","product_id":100079901,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³çŸ¥é“setCountæ˜¯ä¸æ˜¯ä¼šæŠŠè¿ç»­çš„ä¸¤æ¬¡è°ƒç”¨åˆå¹¶æˆä¸€æ¬¡ï¼Ÿå°±æ¯”å¦‚ä¸€å¼€å§‹countä¸º1ï¼Œç„¶ååœ¨ä¸€ä¸ªäº‹ä»¶é‡Œå†™äº†ä¸¤ésetCount(count + 1)ï¼Œé‚£ä¹ˆæœ€ç»ˆcountæ˜¯2ï¼Œè€Œä¸æ˜¯3","like_count":0},{"had_liked":false,"id":308774,"user_name":"èµµå¤©å¤©","can_delete":false,"product_type":"c1","uid":2181781,"ip_address":"","ucode":"456924B8A0763F","user_header":"","comment_is_top":false,"comment_ctime":1629794080,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1629794080","product_id":100079901,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œå¦‚æœä¸€ä¸ªå˜é‡ï¼Œæ›´æ”¹åä¸æ¶‰åŠUIçš„å˜åŒ–ï¼Œè¿™ç§å˜é‡åº”è¯¥æ€ä¹ˆåšå¤„ç†å‘¢ï¼Œç”Ÿå‘½ä¸ºä¸€ä¸ªæ™®é€šå˜é‡è¿˜æ˜¯ç”¨useStateå‘¢","like_count":0},{"had_liked":false,"id":306275,"user_name":"Geek_d9bc76","can_delete":false,"product_type":"c1","uid":2728834,"ip_address":"","ucode":"7D5DEDC3C04CB9","user_header":"","comment_is_top":false,"comment_ctime":1628482271,"is_pvip":false,"replies":[{"id":"111737","content":"åœ¨ä»€ä¹ˆæ—¶æœºè®¡ç®—ï¼ŸclientWidth å¯ä»¥ä½œä¸º stateï¼Œä½†è®¡ç®—å¾—åˆ°çš„item ä¸ªæ•°ä¸è¦æ”¾åˆ° stateï¼Œç”¨çš„æ—¶å€™å»è®¡ç®—ã€‚","user_name":"ä½œè€…å›å¤","comment_id":306275,"uid":"1018676","ip_address":"","utype":1,"ctime":1629726795,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1628482271","product_id":100079901,"comment_content":"â€œstateä¸­æ°¸è¿œä¸è¦ä¿å­˜å¯ä»¥é€šè¿‡è®¡ç®—å¾—åˆ°çš„å€¼â€ï¼Œä¸å¤ªæ˜ç™½ï¼Œæˆ‘è§†å›¾éœ€è¦æ ¹æ®clineWidthè®¡ç®—å‡ºçš„å€¼å†³å®šæ¸²æŸ“itemçš„ä¸ªæ•°ï¼Œå¦‚æœä¸é€šè¿‡useStateï¼Œæˆ‘è¦æ€ä¹ˆè§¦å‘ç•Œé¢æ›´æ–°å‘¢ï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":304582,"user_name":"Tristan","can_delete":false,"product_type":"c1","uid":1359476,"ip_address":"","ucode":"DC454E16AAA66A","user_header":"https://static001.geekbang.org/account/avatar/00/14/be/74/0d900ed9.jpg","comment_is_top":false,"comment_ctime":1627484676,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1627484676","product_id":100079901,"comment_content":"è€å¸ˆå¼€ä¸€é—¨react+hooks+tsä»é›¶å¼€å‘ä¸€ä¸ªæ•°æ®åˆ†æå¹³å°çš„æœ€ä½³å®è·µè¯¾ç¨‹å—ï¼Œè‚¯å®šå¤§ç«ã€‚psï¼šæˆ‘ä»¬è€æ¿è®©æˆ‘æä¸€ä¸ªã€‚","like_count":0,"discussions":[{"author":{"id":2923979,"avatar":"","nickname":"Geek_e51667","note":"","ucode":"C7B1B1B87A5DAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553270,"discussion_content":"è¾¾èŠ¬å¥‡äº†è§£ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645799395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2752761,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTItAXhe4SUU9uDhVOibDkp44QURM157wMmIUpTzfjBdQITzttsADHLXdXGHz5odxyXk7URZsn1lyzw/132","nickname":"æœäº­","note":"","ucode":"3658A350F755BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403448,"discussion_content":"ä½ ç›´æ¥è®©è€å¸ˆå¸®ä½ å†™ä¸€ä¸ªå¾—äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634085923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1923987,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/5b/93/c55ed4bf.jpg","nickname":"å¤©æ‰çƒå‘˜éƒ­æ•¬æ˜","note":"","ucode":"858ADEE7A07AB0","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390177,"discussion_content":"æ˜ç›®å¼ èƒ†çš„å·æ‡’ğŸ˜‚ğŸ˜‚ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629704100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300642,"user_name":"little","can_delete":false,"product_type":"c1","uid":2657169,"ip_address":"","ucode":"C6E0939DCE832A","user_header":"https://static001.geekbang.org/account/avatar/00/28/8b/91/c5c53ee4.jpg","comment_is_top":false,"comment_ctime":1625283089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625283089","product_id":100079901,"comment_content":"<br>.....<br>const PostDetails = () =&gt; {<br>const {post, posts , isLoading} = useSelector((state) =&gt; state.posts);<br>const dispatch = useDispatch();<br>const history = useHistory();<br>const classes = useStyles();<br>const{ id } = useParams();<br><br>useEffect(() =&gt; {<br>  dispatch(getPost(id));<br>},[id, dispatch]);<br><br>useEffect(() =&gt; {<br>  if(post) {<br>    dispatch(getPostsBySearch({ search: &#39;none&#39;, tags:post?.tags.join(&#39;,&#39;)}));<br>  }<br>}, [post, dispatch]);<br><br> return (<br>        &lt;Paper ......&gt;<br>        ......<br>            <br>            &lt;Typography gutterBottom variant=&quot;h6&quot; color=&quot;textSecondary&quot; component=&quot;h2&quot;&gt;{post.tags.map((tag) =&gt; `#${tag}`)}&lt;&#47;Typography&gt;<br>         ......<br>            &lt;Divider style={{ margin: &#39;20px 0&#39; }} &#47;&gt;<br>            &lt;Typography variant=&quot;body1&quot;&gt;&lt;strong&gt;Realtime Chat - coming soon!&lt;&#47;strong&gt;&lt;&#47;Typography&gt;<br>            &lt;Divider style={{ margin: &#39;20px 0&#39; }} &#47;&gt;<br>            <br>          &lt;div className={classes.imageSection}&gt;<br>            &lt;img className={classes.media} src={post.selectedFile} alt={post.title} &#47;&gt;<br>          &lt;&#47;div&gt;<br>          &lt;&#47;div&gt;  <br>é—®é¢˜ï¼š<br>ä¸¤ä¸ªuseEffecté‡Œé¢æŒ‰ç…§é¡¹ç›®è¦æ±‚ï¼Œä¾èµ–æ•°ç»„åªéœ€è¦id,ä¸éœ€è¦dispatchï¼Œç»ˆç«¯å°±æ˜¾ç¤º React Hook useEffect has a missing dependency: &#39;dispatch&#39;. Either include it or remove the dependency array  react-hooks&#47;exhaustive-depsã€‚è¾“å…¥dispatchï¼Œè¿™ä¸ªé—®é¢˜è§£å†³äº†ã€‚ä½†æ˜¯ï¼Œåé¢returnçš„å†…å®¹æ— æ³•render.ã€‚è€å¸ˆï¼Œè¿™æ ·çš„æƒ…å†µè¯¥æ€ä¹ˆåŠï¼Ÿ","like_count":0},{"had_liked":false,"id":300424,"user_name":"Ziè±å·","can_delete":false,"product_type":"c1","uid":1187484,"ip_address":"","ucode":"6E568629E9F847","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/9c/6208483e.jpg","comment_is_top":false,"comment_ctime":1625150624,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1625150624","product_id":100079901,"comment_content":"ä¸ºä»€ä¹ˆ useState åœ¨æ¥å—ä¸€ä¸ª å‡½æ•°å¼ç»„ä»¶ ä½œä¸ºå‚æ•°æ—¶ï¼Œä¼šè¿”å›è¿™ä¸ªç»„ä»¶æ¸²æŸ“åçš„Nodeä¿¡æ¯ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª function å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":300423,"user_name":"Ziè±å·","can_delete":false,"product_type":"c1","uid":1187484,"ip_address":"","ucode":"6E568629E9F847","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/9c/6208483e.jpg","comment_is_top":false,"comment_ctime":1625150603,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625150603","product_id":100079901,"comment_content":"ä¸ºä»€ä¹ˆ useState åœ¨æ¥å—ä¸€ä¸ª å‡½æ•°å¼ç»„ä»¶ ä½œä¸ºå‚æ•°æ—¶ï¼Œä¼šè¿”å›è¿™ä¸ªç»„ä»¶æ¸²æŸ“åçš„Nodeä¿¡æ¯ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª function å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":299430,"user_name":"zzz","can_delete":false,"product_type":"c1","uid":2672273,"ip_address":"","ucode":"7CE7975DF49558","user_header":"","comment_is_top":false,"comment_ctime":1624623258,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624623258","product_id":100079901,"comment_content":"1.æ²¡æœ‰åœ¨ä¾èµ–é¡¹ä¸­æŒ‡å®šï¼Œä¼šæ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ<br>2.ä¸éœ€è¦ï¼Œå±€éƒ¨å˜é‡ä¸èƒ½ä½œä¸ºä¾èµ–é¡¹","like_count":0},{"had_liked":false,"id":296216,"user_name":"å¯‡äº‘","can_delete":false,"product_type":"c1","uid":1001332,"ip_address":"","ucode":"87181F16F83543","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/74/5e292ded.jpg","comment_is_top":false,"comment_ctime":1622810822,"is_pvip":false,"replies":[{"id":"107742","content":"é—®é¢˜2æ˜¯ä¸æ˜¯çœ‹é”™é—®é¢˜äº†~","user_name":"ä½œè€…å›å¤","comment_id":296216,"uid":"1018676","ip_address":"","utype":1,"ctime":1623081409,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622810822","product_id":100079901,"comment_content":"æ€è€ƒé¢˜1:å¤§éƒ¨åˆ†åŒå­¦å›ç­”çš„æŒºå¥½äº† <br>é—®é¢˜2ï¼š å¯ä»¥æŠŠ content  å’Œ loading  å°è£…æˆä¸€ä¸ªhooks,  const [loading, content] =  useBolgContent(id)","like_count":0},{"had_liked":false,"id":295797,"user_name":"é›…ä¸½ä¸½","can_delete":false,"product_type":"c1","uid":2642535,"ip_address":"","ucode":"C601E4CC285AEF","user_header":"https://static001.geekbang.org/account/avatar/00/28/52/67/f4e1d20a.jpg","comment_is_top":false,"comment_ctime":1622601146,"is_pvip":false,"replies":[{"id":"107456","content":"å› ä¸ºè¿™æ ·å°±éœ€è¦ç»´æŠ¤æºstate å’Œç›®æ ‡ state çš„ä¸€è‡´æ€§ï¼Œä¼šå¸¦æ¥å„ç§å¤æ‚åº¦ï¼Œåé¢è¯¾ç¨‹æœ‰ä»‹ç»","user_name":"ä½œè€…å›å¤","comment_id":295797,"uid":"1018676","ip_address":"","utype":1,"ctime":1622727457,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622601146","product_id":100079901,"comment_content":"state ä¸­æ°¸è¿œä¸è¦ä¿å­˜å¯ä»¥é€šè¿‡è®¡ç®—å¾—åˆ°çš„å€¼ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":295777,"user_name":"Afan","can_delete":false,"product_type":"c1","uid":2645928,"ip_address":"","ucode":"A5FA23706A387A","user_header":"https://static001.geekbang.org/account/avatar/00/28/5f/a8/4a6c6d9b.jpg","comment_is_top":false,"comment_ctime":1622597794,"is_pvip":false,"replies":[{"id":"107468","content":"å—¯ï¼Œä¸‹é¢çš„æœ‰ä¸¤ä¸ªä¾èµ–ï¼Œid å’Œ blogContent æ˜¯ä¸¤æ¬¡å¼‚æ­¥å˜åŒ–ï¼Œä¸æ˜¯ä¸€èµ·å˜çš„ï¼Œæ‰€ä»¥ä¸¤æ¬¡ 1","user_name":"ä½œè€…å›å¤","comment_id":295777,"uid":"1018676","ip_address":"","utype":1,"ctime":1622728223,"user_name_real":"Nate"}],"discussion_count":2,"race_medal":0,"score":"1622597794","product_id":100079901,"comment_content":"import React, { useState, useEffect } from &quot;react&quot;;<br><br>export default  function BlogView() {<br>    &#47;&#47; è®¾ç½®ä¸€ä¸ªæœ¬åœ° state ç”¨äºä¿å­˜ blog å†…å®¹<br>    const [blogContent, setBlogContent] = useState(&#39;&#39;);<br>    const id = 100;<br><br>    &#47;&#47; useEffect çš„ callback è¦é¿å…ç›´æ¥çš„ async å‡½æ•°ï¼Œéœ€è¦å°è£…ä¸€ä¸‹<br>    const doAsync =  () =&gt; {<br>        setBlogContent(&#39;demo&#39;);<br>    };<br><br>    useEffect(() =&gt; {<br>        console.log(1);<br>        doAsync();<br>    }, [id]); &#47;&#47; ä½¿ç”¨ id ä½œä¸ºä¾èµ–é¡¹ï¼Œå˜åŒ–æ—¶åˆ™æ‰§è¡Œå‰¯ä½œç”¨<br><br>    &#47;&#47; å¦‚æœæ²¡æœ‰ blogContent åˆ™è®¤ä¸ºæ˜¯åœ¨ loading çŠ¶æ€<br>    const isLoading = !blogContent;<br>    return &lt;div&gt;{isLoading ? &quot;Loading...&quot; : blogContent}&lt;&#47;div&gt;;<br>}<br>æ‰“å°ä¸€æ¬¡1<br><br><br>import React, { useState, useEffect } from &quot;react&quot;;<br><br>export default  function BlogView() {<br>    &#47;&#47; è®¾ç½®ä¸€ä¸ªæœ¬åœ° state ç”¨äºä¿å­˜ blog å†…å®¹<br>    const [blogContent, setBlogContent] = useState(&#39;&#39;);<br>    const id = 100;<br><br>    &#47;&#47; useEffect çš„ callback è¦é¿å…ç›´æ¥çš„ async å‡½æ•°ï¼Œéœ€è¦å°è£…ä¸€ä¸‹<br>    const doAsync =  () =&gt; {<br>        setBlogContent(&#39;demo&#39;);<br>    };<br><br>    useEffect(() =&gt; {<br>        console.log(1);<br>        doAsync();<br>    }, [id, blogContent]); &#47;&#47; ä½¿ç”¨ id ä½œä¸ºä¾èµ–é¡¹ï¼Œå˜åŒ–æ—¶åˆ™æ‰§è¡Œå‰¯ä½œç”¨<br><br>    &#47;&#47; å¦‚æœæ²¡æœ‰ blogContent åˆ™è®¤ä¸ºæ˜¯åœ¨ loading çŠ¶æ€<br>    const isLoading = !blogContent;<br>    return &lt;div&gt;{isLoading ? &quot;Loading...&quot; : blogContent}&lt;&#47;div&gt;;<br>}<br>æ‰“å°2æ¬¡1","like_count":0,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521213,"discussion_content":"å—¯ï¼Œä¸‹é¢çš„æœ‰ä¸¤ä¸ªä¾èµ–ï¼Œid å’Œ blogContent æ˜¯ä¸¤æ¬¡å¼‚æ­¥å˜åŒ–ï¼Œä¸æ˜¯ä¸€èµ·å˜çš„ï¼Œæ‰€ä»¥ä¸¤æ¬¡ 1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622728223,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1707743,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0e/df/a64b3146.jpg","nickname":"Forest","note":"","ucode":"B75CB4919FF25A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377332,"discussion_content":"ä¸ºä»€ä¹ˆä¼šæŠŠblogContentæ·»åŠ è¿›ä¾èµ–é¡¹ï¼Ÿæˆ‘å¾—ç†è§£æ˜¯å½“idå‘ç”Ÿæ”¹å˜æ—¶ï¼ŒuseEffectæ‰§è¡Œäº†ä¸€æ¬¡ï¼Œä¸”åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰§è¡Œäº†doAsyncæ–¹æ³•ä»è€Œæ”¹å˜äº†blogContentï¼ŒblogContentæ”¹å˜ä¹‹ååˆæ‰§è¡Œäº†ä¸€æ¬¡useEffectï¼Œæ‰€ä»¥æ‰“å°äº†ä¸¤æ¬¡1ï¼Œè‹¥æœ‰ä¸å¯¹è¿˜æœ›æŒ‡æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622605286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295236,"user_name":"William","can_delete":false,"product_type":"c1","uid":1241365,"ip_address":"","ucode":"4499F99B180102","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/15/8fcf8038.jpg","comment_is_top":false,"comment_ctime":1622312528,"is_pvip":true,"replies":[{"id":"107185","content":"å¾ˆä¸é”™ï¼ŒæŠŠå®é™…ä»£ç å†™å‡ºæ¥å¯ä»¥æ›´å¥½çš„ç†è§£æ•´ä¸ªæµç¨‹~","user_name":"ä½œè€…å›å¤","comment_id":295236,"uid":"1018676","ip_address":"","utype":1,"ctime":1622362657,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":1,"score":"1622312528","product_id":100079901,"comment_content":"æ€è€ƒé¢˜ï¼š<br>1. ä¸æ”¾åœ¨ä¾èµ–æ•°ç»„ä¸­ï¼Œåˆ™æ— æ³•è§¦å‘ useEffect å›è°ƒï¼›<br>2. ä¸éœ€è¦ï¼ŒsetBlogContent ä»…ä»…æ˜¯ç”¨æ¥æ›´æ–°åšå®¢å†…å®¹çš„å‡½æ•°ï¼›<br><br>å†™äº†ä¸ªdemo: https:&#47;&#47;github.com&#47;Si3ver&#47;react-hooks-demos&#47;blob&#47;main&#47;src&#47;03&#47;BlogView.js","like_count":0},{"had_liked":false,"id":295179,"user_name":"é˜³å°‘å®‡","can_delete":false,"product_type":"c1","uid":1308648,"ip_address":"","ucode":"977CA6F42C7DB6","user_header":"","comment_is_top":false,"comment_ctime":1622286106,"is_pvip":false,"replies":[{"id":"107167","content":"1. æ­£ç¡®ã€‚<br>2. æœ¬è´¨ä¸Šæ¥è¯´å®ƒæ˜¯ä¸€ä¸ªä¾èµ–ï¼Œå†™åˆ°ä¾èµ–é¡¹ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚å› ä¸º useState çš„æœºåˆ¶èƒ½ä¿è¯ setBlogContent æ°¸è¿œä¸ä¼šå˜åŒ–ï¼Œæ‰€ä»¥ä¸å˜åŒ–çš„å€¼æ˜¯å¯ä»¥ä¸ç”¨å†™åˆ°ä¾èµ–é¡¹ çš„ã€‚æ‰€ä»¥ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¸å†™ã€‚React æä¾›çš„ ESLint æ’ä»¶ä¹Ÿå¯¹æ­¤åšäº†ç‰¹æ®Šå¤„ç†ï¼Œå³ä½¿ä¸å†™ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚","user_name":"ä½œè€…å›å¤","comment_id":295179,"uid":"1018676","ip_address":"","utype":1,"ctime":1622353419,"user_name_real":"Nate"}],"discussion_count":1,"race_medal":0,"score":"1622286106","product_id":100079901,"comment_content":"1.å½“å˜é‡å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒuseEffectä¸ä¼šå»æ‰§è¡Œ<br>2. ä¸èƒ½ï¼Œå¦‚æœè¢«ä½œä¸ºä¾èµ–é¡¹ä¼šå‘ç”Ÿæ­»å¾ªç¯ã€‚å› ä¸ºuseEffectä½¿ç”¨setBlogContentä¼šè§¦å‘çŠ¶æ€çš„æ›´æ–°ï¼ŒçŠ¶æ€æ›´æ–°ä¼šå¯¼è‡´å‡½æ•°ç»„ä»¶é‡æ–°renderï¼Œè¿™æ ·setBlogContentä¹Ÿä¼šè¢«æ›´æ–°","like_count":0},{"had_liked":false,"id":295123,"user_name":"aloha66","can_delete":false,"product_type":"c1","uid":1469820,"ip_address":"","ucode":"60AF4685BF38A2","user_header":"https://static001.geekbang.org/account/avatar/00/16/6d/7c/e91866cf.jpg","comment_is_top":false,"comment_ctime":1622255287,"is_pvip":true,"replies":[{"id":"107164","content":"å½“ç„¶ï¼Œè¿™è¾¹çš„ todos åªæ˜¯ä¸ªå¸¸é‡ï¼Œå®é™…æƒ…å†µå¯èƒ½ä¼šé€šè¿‡æŸäº›ä¼ å…¥çš„ props å»åˆ›å»ºï¼Œæ¯”å¦‚ initialTodosã€‚é‚£ä¹ˆåº”è¯¥ç”¨ ä¸‹ä¸€è¯¾è®²åˆ°çš„ useMemo å»ç¼“å­˜è¿™ä¸ª todos:<br>const todos = useMemo(() =&gt; {<br>  return [{ text: &#39;Learn hooks.&#39;}];<br>}, []);<br><br>æ‰€ä»¥è¿™è¾¹æ›´å¤šçš„æ˜¯ä¸€ä¸ªç¤ºæ„ï¼Œè¦ç‰¹åˆ«ä¸»è¦ä¸¤ä¸ªObject å³ä½¿å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å› ä¸ºæ˜¯å¼•ç”¨æ¯”è¾ƒï¼Œè¿˜æ˜¯ä¼šè¢«è®¤ä¸ºä¸ä¸€æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":295123,"uid":"1018676","ip_address":"","utype":1,"ctime":1622352924,"user_name_real":"Nate"}],"discussion_count":6,"race_medal":0,"score":"1622255287","product_id":100079901,"comment_content":"ä»£ç çš„åŸæ„å¯èƒ½æ˜¯åœ¨ todos å˜åŒ–çš„æ—¶å€™å»äº§ç”Ÿä¸€äº›å‰¯ä½œç”¨<br>const todos = [{ text: &#39;Learn hooks.&#39;}];  useEffect(() =&gt; {    console.log(&#39;Todos changed.&#39;);  }, [todos]);<br>å¦‚æœçœŸçš„æ˜¯éœ€è¦ç›‘å¬todoså˜åŒ–åšä¸€äº›æ“ä½œåº”è¯¥æ€ä¹ˆå®è·µäº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520954,"discussion_content":"å½“ç„¶ï¼Œè¿™è¾¹çš„ todos åªæ˜¯ä¸ªå¸¸é‡ï¼Œå®é™…æƒ…å†µå¯èƒ½ä¼šé€šè¿‡æŸäº›ä¼ å…¥çš„ props å»åˆ›å»ºï¼Œæ¯”å¦‚ initialTodosã€‚é‚£ä¹ˆåº”è¯¥ç”¨ ä¸‹ä¸€è¯¾è®²åˆ°çš„ useMemo å»ç¼“å­˜è¿™ä¸ª todos:\nconst todos = useMemo(() =&amp;gt; {\n  return [{ text: &amp;#39;Learn hooks.&amp;#39;}];\n}, []);\n\næ‰€ä»¥è¿™è¾¹æ›´å¤šçš„æ˜¯ä¸€ä¸ªç¤ºæ„ï¼Œè¦ç‰¹åˆ«ä¸»è¦ä¸¤ä¸ªObject å³ä½¿å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å› ä¸ºæ˜¯å¼•ç”¨æ¯”è¾ƒï¼Œè¿˜æ˜¯ä¼šè¢«è®¤ä¸ºä¸ä¸€æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622352924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241365,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f1/15/8fcf8038.jpg","nickname":"William","note":"","ucode":"4499F99B180102","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376755,"discussion_content":"å†™äº†ä¸ªä¾‹å­å¯ä»¥å‚è€ƒä¸‹ï¼š\nhttps://github.com/Si3ver/react-hooks-demos/blob/main/src/03/UseEffect.js","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622310971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1742144,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJPXN6tO1ka2YhSEnzFLocuXCY9ibrTP8yczqymEGXKwJsDE276MaVBXHSibYiaOl8Z6XOoRTpAbyUnA/132","nickname":"Geek_97af74","note":"","ucode":"73D8823A964877","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376754,"discussion_content":"useMemoå³å¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622310958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1469820,"avatar":"https://static001.geekbang.org/account/avatar/00/16/6d/7c/e91866cf.jpg","nickname":"aloha66","note":"","ucode":"60AF4685BF38A2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1742144,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJPXN6tO1ka2YhSEnzFLocuXCY9ibrTP8yczqymEGXKwJsDE276MaVBXHSibYiaOl8Z6XOoRTpAbyUnA/132","nickname":"Geek_97af74","note":"","ucode":"73D8823A964877","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376776,"discussion_content":"ç”¨useMemoè¿”å›çš„å€¼æ”¾è¿›useEffectä¾èµ–æ•°ç»„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622340075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376754,"ip_address":""},"score":376776,"extra":""},{"author":{"id":1742144,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJPXN6tO1ka2YhSEnzFLocuXCY9ibrTP8yczqymEGXKwJsDE276MaVBXHSibYiaOl8Z6XOoRTpAbyUnA/132","nickname":"Geek_97af74","note":"","ucode":"73D8823A964877","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1469820,"avatar":"https://static001.geekbang.org/account/avatar/00/16/6d/7c/e91866cf.jpg","nickname":"aloha66","note":"","ucode":"60AF4685BF38A2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":376786,"discussion_content":"å¯¹ï¼Œä¾èµ–é¡¹ä¸­å¦‚æœæœ‰å¤åˆç±»å‹ï¼Œä¸”è¯¥å¤åˆç±»å‹ä¸æ˜¯å…¶ä»–stateï¼Œé‚£ä¹ˆåŸºæœ¬éƒ½è¦ç”¨useMemoåšå°è£…å†æ·»åŠ åˆ°ä¾èµ–é‡Œã€‚å¦‚æœæ˜¯åŸºæœ¬ç±»å‹å°±æ²¡å…³ç³»ã€‚\n\nåŒæ ·çš„ï¼Œå¯¹äºä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸ºå‡½æ•°ä¹Ÿæ˜¯å¤åˆç±»å‹ï¼Œæ‰€ä»¥å¦‚æœè¦å°†å‡½æ•°æ·»åŠ åˆ°ä¾èµ–ä¸­ï¼Œå°±æ˜¯ç”¨useCallbackåŒ…è£…ï¼Œç„¶åæ”¾å…¥ã€‚\n\nuseMemo(() => () => {}, []) ç­‰ä»·äº useCallback(() => {}, [])","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622344285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376776,"ip_address":""},"score":376786,"extra":""}]},{"author":{"id":1334751,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/qzPPBIl5ydsxKfSEgrjo8FxO4sMYgxyxTlOiakNI4bDz2cgdsqYias3wAndrriahztr0TcVUqeJZ8asj9PA22ZXaA/132","nickname":"Lucas","note":"","ucode":"677EEA40E973B5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376667,"discussion_content":"è‡ªå®šä¹‰æ·±æ¯”è¾ƒçš„hooks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622266587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]]}