{"id":67477,"title":"41 | ioåŒ…ä¸­çš„æ¥å£å’Œå·¥å…· ï¼ˆä¸‹ï¼‰","content":"<p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸»è¦è®²åˆ°äº†<code>io.Reader</code>çš„æ‰©å±•æ¥å£å’Œå®ç°ç±»å‹ã€‚å½“ç„¶ï¼Œ<code>io</code>ä»£ç åŒ…ä¸­çš„æ ¸å¿ƒæ¥å£ä¸æ­¢<code>io.Reader</code>ä¸€ä¸ªã€‚</p><p>æˆ‘ä»¬åŸºäºå®ƒå¼•å‡ºçš„ä¸€æ¡ä¸»çº¿ï¼Œåªæ˜¯<code>io</code>åŒ…ç±»å‹ä½“ç³»ä¸­çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬å¾ˆæœ‰å¿…è¦å†ä»å¦ä¸€ä¸ªè§’åº¦å»æ¢ç´¢ä¸€ä¸‹ï¼Œä»¥æ±‚å¯¹<code>io</code>åŒ…æœ‰æ›´åŠ å…¨é¢çš„äº†è§£ã€‚</p><p>ä¸‹é¢çš„ä¸€ä¸ªé—®é¢˜å°±ä¸æ­¤æœ‰å…³ã€‚</p><h2>çŸ¥è¯†æ‰©å±•</h2><h3>é—®é¢˜ï¼š<code>io</code>åŒ…ä¸­çš„æ¥å£éƒ½æœ‰å“ªäº›ï¼Ÿå®ƒä»¬ä¹‹é—´éƒ½æœ‰ç€æ€æ ·çš„å…³ç³»ï¼Ÿ</h3><p>æˆ‘ä»¬å¯ä»¥æŠŠæ²¡æœ‰åµŒå…¥å…¶ä»–æ¥å£å¹¶ä¸”åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•çš„æ¥å£å«åš<strong>ç®€å•æ¥å£</strong>ã€‚åœ¨<code>io</code>åŒ…ä¸­ï¼Œè¿™æ ·çš„æ¥å£ä¸€å…±æœ‰11ä¸ªã€‚</p><p>åœ¨å®ƒä»¬ä¹‹ä¸­ï¼Œæœ‰çš„æ¥å£æœ‰ç€ä¼—å¤šçš„æ‰©å±•æ¥å£å’Œå®ç°ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸º<strong>æ ¸å¿ƒæ¥å£</strong>ã€‚<strong><code>io</code>åŒ…ä¸­çš„æ ¸å¿ƒæ¥å£åªæœ‰3ä¸ªï¼Œå®ƒä»¬æ˜¯ï¼š<code>io.Reader</code>ã€<code>io.Writer</code>å’Œ<code>io.Closer</code>ã€‚</strong></p><p>æˆ‘ä»¬è¿˜å¯ä»¥æŠŠ<code>io</code>åŒ…ä¸­çš„ç®€å•æ¥å£åˆ†ä¸ºå››å¤§ç±»ã€‚è¿™å››å¤§ç±»æ¥å£åˆ†åˆ«é’ˆå¯¹äºå››ç§æ“ä½œï¼Œå³ï¼šè¯»å–ã€å†™å…¥ã€å…³é—­å’Œè¯»å†™ä½ç½®è®¾å®šã€‚å‰ä¸‰ç§æ“ä½œå±äºåŸºæœ¬çš„I/Oæ“ä½œã€‚</p><p><strong>å…³äºè¯»å–æ“ä½œï¼Œæˆ‘ä»¬åœ¨å‰é¢å·²ç»é‡ç‚¹è®¨è®ºè¿‡æ ¸å¿ƒæ¥å£<code>io.Reader</code>ã€‚å®ƒåœ¨<code>io</code>åŒ…ä¸­æœ‰5ä¸ªæ‰©å±•æ¥å£ï¼Œå¹¶æœ‰6ä¸ªå®ç°ç±»å‹ã€‚é™¤äº†å®ƒï¼Œè¿™ä¸ªåŒ…ä¸­é’ˆå¯¹è¯»å–æ“ä½œçš„æ¥å£è¿˜æœ‰ä¸å°‘ã€‚æˆ‘ä»¬ä¸‹é¢å°±æ¥æ¢³ç†ä¸€ä¸‹ã€‚</strong></p><p>é¦–å…ˆæ¥çœ‹<code>io.ByteReader</code>å’Œ<code>io.RuneReader</code>è¿™ä¸¤ä¸ªç®€å•æ¥å£ã€‚å®ƒä»¬åˆ†åˆ«å®šä¹‰äº†ä¸€ä¸ªè¯»å–æ–¹æ³•ï¼Œå³ï¼š<code>ReadByte</code>å’Œ<code>ReadRune</code>ã€‚</p><!-- [[[read_end]]] --><p>ä½†ä¸<code>io.Reader</code>æ¥å£ä¸­<code>Read</code>æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªè¯»å–æ–¹æ³•åˆ†åˆ«åªèƒ½å¤Ÿè¯»å–ä¸‹ä¸€ä¸ªå•ä¸€çš„å­—èŠ‚å’ŒUnicodeå­—ç¬¦ã€‚</p><p>æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„æ•°æ®ç±»å‹<code>strings.Reader</code>å’Œ<code>bytes.Buffer</code>éƒ½æ˜¯<code>io.ByteReader</code>å’Œ<code>io.RuneReader</code>çš„å®ç°ç±»å‹ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œè¿™ä¸¤ä¸ªç±»å‹è¿˜éƒ½å®ç°äº†<code>io.ByteScanner</code>æ¥å£å’Œ<code>io.RuneScanner</code>æ¥å£ã€‚</p><p><code>io.ByteScanner</code>æ¥å£å†…åµŒäº†ç®€å•æ¥å£<code>io.ByteReader</code>ï¼Œå¹¶å®šä¹‰äº†é¢å¤–çš„<code>UnreadByte</code>æ–¹æ³•ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå®ƒå°±æŠ½è±¡å‡ºäº†ä¸€ä¸ªèƒ½å¤Ÿè¯»å–å’Œè¯»å›é€€å•ä¸ªå­—èŠ‚çš„åŠŸèƒ½é›†ã€‚</p><p>ä¸ä¹‹ç±»ä¼¼ï¼Œ<code>io.RuneScanner</code>å†…åµŒäº†ç®€å•æ¥å£<code>io.RuneReader</code>ï¼Œå¹¶å®šä¹‰äº†é¢å¤–çš„<code>UnreadRune</code>æ–¹æ³•ã€‚å®ƒæŠ½è±¡çš„æ˜¯å¯ä»¥è¯»å–å’Œè¯»å›é€€å•ä¸ªUnicodeå­—ç¬¦çš„åŠŸèƒ½é›†ã€‚</p><p>å†æ¥çœ‹<code>io.ReaderAt</code>æ¥å£ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªç®€å•æ¥å£ï¼Œå…¶ä¸­åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•<code>ReadAt</code>ã€‚ä¸æˆ‘ä»¬åœ¨å‰é¢è¯´è¿‡çš„è¯»å–æ–¹æ³•éƒ½ä¸åŒï¼Œ<code>ReadAt</code>æ˜¯ä¸€ä¸ªçº¯ç²¹çš„åªè¯»æ–¹æ³•ã€‚</p><p>å®ƒåªå»è¯»å–å…¶æ‰€å±å€¼ä¸­åŒ…å«çš„å­—èŠ‚ï¼Œè€Œä¸å¯¹è¿™ä¸ªå€¼è¿›è¡Œä»»ä½•çš„æ”¹åŠ¨ï¼Œæ¯”å¦‚ï¼Œå®ƒç»å¯¹ä¸èƒ½å»ä¿®æ”¹å·²è¯»è®¡æ•°çš„å€¼ã€‚è¿™ä¹Ÿæ˜¯<code>io.ReaderAt</code>æ¥å£ä¸å…¶å®ç°ç±»å‹ä¹‹é—´æœ€é‡è¦çš„ä¸€ä¸ªçº¦å®šã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä»…ä»…å¹¶å‘åœ°è°ƒç”¨æŸä¸€ä¸ªå€¼çš„<code>ReadAt</code>æ–¹æ³•ï¼Œé‚£ä¹ˆå®‰å…¨æ€§åº”è¯¥æ˜¯å¯ä»¥å¾—åˆ°ä¿éšœçš„ã€‚</p><p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªè¯»å–æ“ä½œç›¸å…³çš„æ¥å£æˆ‘ä»¬æ²¡æœ‰ä»‹ç»è¿‡ï¼Œå®ƒå°±æ˜¯<code>io.WriterTo</code>ã€‚è¿™ä¸ªæ¥å£å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>WriteTo</code>çš„æ–¹æ³•ã€‚</p><p>åƒä¸‡ä¸è¦è¢«å®ƒçš„åå­—è¿·æƒ‘ï¼Œè¿™ä¸ª<code>WriteTo</code>æ–¹æ³•å…¶å®æ˜¯ä¸€ä¸ªè¯»å–æ–¹æ³•ã€‚å®ƒä¼šæ¥å—ä¸€ä¸ª<code>io.Writer</code>ç±»å‹çš„å‚æ•°å€¼ï¼Œå¹¶ä¼šæŠŠå…¶æ‰€å±å€¼ä¸­çš„æ•°æ®è¯»å‡ºå¹¶å†™å…¥åˆ°è¿™ä¸ªå‚æ•°å€¼ä¸­ã€‚</p><p>ä¸ä¹‹ç›¸å¯¹åº”çš„æ˜¯<code>io.ReaderFrom</code>æ¥å£ã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªåå«<code>ReadFrom</code>çš„å†™å…¥æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šæ¥å—ä¸€ä¸ª<code>io.Reader</code>ç±»å‹çš„å‚æ•°å€¼ï¼Œå¹¶ä¼šä»è¯¥å‚æ•°å€¼ä¸­è¯»å‡ºæ•°æ®,å¹¶å†™å…¥åˆ°å…¶æ‰€å±å€¼ä¸­ã€‚</p><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨å‰é¢ç”¨åˆ°è¿‡çš„<code>io.CopyN</code>å‡½æ•°ï¼Œåœ¨å¤åˆ¶æ•°æ®çš„æ—¶å€™ä¼šå…ˆæ£€æµ‹å…¶å‚æ•°<code>src</code>çš„å€¼ï¼Œæ˜¯å¦å®ç°äº†<code>io.WriterTo</code>æ¥å£ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå®ƒå°±ç›´æ¥åˆ©ç”¨è¯¥å€¼çš„<code>WriteTo</code>æ–¹æ³•ï¼ŒæŠŠå…¶ä¸­çš„æ•°æ®æ‹·è´ç»™å‚æ•°<code>dst</code>ä»£è¡¨çš„å€¼ã€‚</p><p>ç±»ä¼¼çš„ï¼Œè¿™ä¸ªå‡½æ•°è¿˜ä¼šæ£€æµ‹<code>dst</code>çš„å€¼æ˜¯å¦å®ç°äº†<code>io.ReaderFrom</code>æ¥å£ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šåˆ©ç”¨è¿™ä¸ªå€¼çš„<code>ReadFrom</code>æ–¹æ³•ï¼Œç›´æ¥ä»<code>src</code>é‚£é‡ŒæŠŠæ•°æ®æ‹·è´è¿›è¯¥å€¼ã€‚</p><p>å®é™…ä¸Šï¼Œå¯¹äº<code>io.Copy</code>å‡½æ•°å’Œ<code>io.CopyBuffer</code>å‡½æ•°æ¥è¯´ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºå®ƒä»¬åœ¨å†…éƒ¨åšæ•°æ®å¤åˆ¶çš„æ—¶å€™ç”¨çš„éƒ½æ˜¯åŒä¸€å¥—ä»£ç ã€‚</p><p>ä½ ä¹Ÿçœ‹åˆ°äº†ï¼Œ<code>io.ReaderFrom</code>æ¥å£ä¸<code>io.WriterTo</code>æ¥å£å¯¹åº”å¾—å¾ˆè§„æ•´ã€‚<strong>å®é™…ä¸Šï¼Œåœ¨<code>io</code>åŒ…ä¸­ï¼Œä¸å†™å…¥æ“ä½œæœ‰å…³çš„æ¥å£éƒ½ä¸è¯»å–æ“ä½œçš„ç›¸å…³æ¥å£æœ‰ç€ä¸€å®šçš„å¯¹åº”å…³ç³»ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥è¯´è¯´å†™å…¥æ“ä½œç›¸å…³çš„æ¥å£ã€‚</strong></p><p>é¦–å…ˆå½“ç„¶æ˜¯æ ¸å¿ƒæ¥å£<code>io.Writer</code>ã€‚åŸºäºå®ƒçš„æ‰©å±•æ¥å£é™¤äº†æœ‰æˆ‘ä»¬å·²çŸ¥çš„<code>io.ReadWriter</code>ã€<code>io.ReadWriteCloser</code>å’Œ<code>io.ReadWriteSeeker</code>ä¹‹å¤–ï¼Œè¿˜æœ‰<code>io.WriteCloser</code>å’Œ<code>io.WriteSeeker</code>ã€‚</p><p>æˆ‘ä»¬ä¹‹å‰æåŠçš„<code>*io.pipe</code>å°±æ˜¯<code>io.ReadWriter</code>æ¥å£çš„å®ç°ç±»å‹ã€‚ç„¶è€Œï¼Œåœ¨<code>io</code>åŒ…ä¸­å¹¶æ²¡æœ‰<code>io.ReadWriteCloser</code>æ¥å£çš„å®ç°ï¼Œå®ƒçš„å®ç°ç±»å‹ä¸»è¦é›†ä¸­åœ¨<code>net</code>åŒ…ä¸­ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œå†™å…¥æ“ä½œç›¸å…³çš„ç®€å•æ¥å£è¿˜æœ‰<code>io.ByteWriter</code>å’Œ<code>io.WriterAt</code>ã€‚å¯æƒœï¼Œ<code>io</code>åŒ…ä¸­ä¹Ÿæ²¡æœ‰å®ƒä»¬çš„å®ç°ç±»å‹ã€‚ä¸è¿‡ï¼Œæœ‰ä¸€ä¸ªæ•°æ®ç±»å‹å€¼å¾—åœ¨è¿™é‡Œæä¸€å¥ï¼Œé‚£å°±æ˜¯<code>*os.File</code>ã€‚</p><p>è¿™ä¸ªç±»å‹ä¸ä½†æ˜¯<code>io.WriterAt</code>æ¥å£çš„å®ç°ç±»å‹ï¼Œè¿˜åŒæ—¶å®ç°äº†<code>io.ReadWriteCloser</code>æ¥å£å’Œ<code>io.ReadWriteSeeker</code>æ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥ç±»å‹æ”¯æŒçš„I/Oæ“ä½œéå¸¸çš„ä¸°å¯Œã€‚</p><p><code>io.Seeker</code>æ¥å£ä½œä¸ºä¸€ä¸ªè¯»å†™ä½ç½®è®¾å®šç›¸å…³çš„ç®€å•æ¥å£ï¼Œä¹Ÿä»…ä»…å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œåå«<code>Seek</code>ã€‚</p><p>æˆ‘åœ¨è®²<code>strings.Reader</code>ç±»å‹çš„æ—¶å€™è¿˜ä¸“é—¨è¯´è¿‡è¿™ä¸ª<code>Seek</code>æ–¹æ³•ï¼Œå½“æ—¶è¿˜ç»™å‡ºäº†ä¸€ä¸ªä¸å·²è¯»è®¡æ•°ä¼°ç®—æœ‰å…³çš„ä¾‹å­ã€‚è¯¥æ–¹æ³•ä¸»è¦ç”¨äºå¯»æ‰¾å¹¶è®¾å®šä¸‹ä¸€æ¬¡è¯»å–æˆ–å†™å…¥æ—¶çš„èµ·å§‹ç´¢å¼•ä½ç½®ã€‚</p><p><code>io</code>åŒ…ä¸­æœ‰å‡ ä¸ªåŸºäº<code>io.Seeker</code>çš„æ‰©å±•æ¥å£ï¼ŒåŒ…æ‹¬å‰é¢è®²è¿‡çš„<code>io.ReadSeeker</code>å’Œ<code>io.ReadWriteSeeker</code>ï¼Œä»¥åŠè¿˜æœªæ›¾æè¿‡çš„<code>io.WriteSeeker</code>ã€‚<code>io.WriteSeeker</code>æ˜¯åŸºäº<code>io.Writer</code>å’Œ<code>io.Seeker</code>çš„æ‰©å±•æ¥å£ã€‚</p><p>æˆ‘ä»¬ä¹‹å‰å¤šæ¬¡æåˆ°çš„ä¸¤ä¸ªæŒ‡é’ˆç±»å‹<code>strings.Reader</code>å’Œ<code>io.SectionReader</code>éƒ½å®ç°äº†<code>io.Seeker</code>æ¥å£ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œè¿™ä¸¤ä¸ªç±»å‹ä¹Ÿéƒ½æ˜¯<code>io.ReaderAt</code>æ¥å£çš„å®ç°ç±»å‹ã€‚</p><p>æœ€åï¼Œå…³é—­æ“ä½œç›¸å…³çš„æ¥å£<code>io.Closer</code>éå¸¸é€šç”¨ï¼Œå®ƒçš„æ‰©å±•æ¥å£å’Œå®ç°ç±»å‹éƒ½ä¸å°‘ã€‚æˆ‘ä»¬å•ä»åç§°ä¸Šå°±èƒ½å¤Ÿä¸€çœ¼çœ‹å‡º<code>io</code>åŒ…ä¸­çš„å“ªäº›æ¥å£æ˜¯å®ƒçš„æ‰©å±•æ¥å£ã€‚è‡³äºå®ƒçš„å®ç°ç±»å‹ï¼Œ<code>io</code>åŒ…ä¸­åªæœ‰<code>io.PipeReader</code>å’Œ<code>io.PipeWriter</code>ã€‚</p><h2>æ€»ç»“</h2><p>æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹è¿™ä¸¤ç¯‡çš„å†…å®¹ã€‚åœ¨Goè¯­è¨€ä¸­ï¼Œå¯¹æ¥å£çš„æ‰©å±•æ˜¯é€šè¿‡æ¥å£ç±»å‹ä¹‹é—´çš„åµŒå…¥æ¥å®ç°çš„ï¼Œè¿™ä¹Ÿå¸¸è¢«å«åšæ¥å£çš„ç»„åˆã€‚è€Œ<code>io</code>ä»£ç åŒ…æ°æ°å°±å¯ä»¥ä½œä¸ºæ¥å£æ‰©å±•çš„ä¸€ä¸ªæ ‡æ†ï¼Œå®ƒå¯ä»¥æˆä¸ºæˆ‘ä»¬è¿ç”¨è¿™ç§æŠ€å·§æ—¶çš„ä¸€ä¸ªå‚è€ƒæ ‡å‡†ã€‚</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æ ¹æ®æ¥å£å®šä¹‰çš„æ–¹æ³•çš„æ•°é‡ä»¥åŠæ˜¯å¦æœ‰æ¥å£åµŒå…¥ï¼ŒæŠŠ<code>io</code>åŒ…ä¸­çš„æ¥å£åˆ†ä¸ºäº†ç®€å•æ¥å£å’Œæ‰©å±•æ¥å£ã€‚</p><p>åŒæ—¶ï¼Œæˆ‘åˆæ ¹æ®è¿™äº›ç®€å•æ¥å£çš„æ‰©å±•æ¥å£å’Œå®ç°ç±»å‹çš„æ•°é‡çº§ï¼ŒæŠŠå®ƒä»¬åˆ†ä¸ºäº†æ ¸å¿ƒæ¥å£å’Œéæ ¸å¿ƒæ¥å£ã€‚</p><p>åœ¨<code>io</code>åŒ…ä¸­ï¼Œç§°å¾—ä¸Šæ ¸å¿ƒæ¥å£çš„ç®€å•æ¥å£åªæœ‰3ä¸ªï¼Œå³ï¼š<code>io.Reader</code>ã€<code>io.Writer</code>å’Œ<code>io.Closer</code>ã€‚è¿™äº›æ ¸å¿ƒæ¥å£åœ¨Goè¯­è¨€æ ‡å‡†åº“ä¸­çš„å®ç°ç±»å‹éƒ½åœ¨200ä¸ªä»¥ä¸Šã€‚</p><p>å¦å¤–ï¼Œæ ¹æ®é’ˆå¯¹çš„I/Oæ“ä½œçš„ä¸åŒï¼Œæˆ‘è¿˜æŠŠç®€å•æ¥å£åˆ†ä¸ºäº†å››å¤§ç±»ã€‚è¿™å››å¤§ç±»æ¥å£é’ˆå¯¹çš„æ“ä½œåˆ†åˆ«æ˜¯ï¼šè¯»å–ã€å†™å…¥ã€å…³é—­å’Œè¯»å†™ä½ç½®è®¾å®šã€‚</p><p>å…¶ä¸­ï¼Œå‰ä¸‰ç§æ“ä½œå±äºåŸºæœ¬çš„I/Oæ“ä½œã€‚åŸºäºæ­¤ï¼Œæˆ‘å¸¦ä½ æ¢³ç†äº†æ¯ä¸ªç±»åˆ«çš„ç®€å•æ¥å£ï¼Œå¹¶è®²è§£äº†å®ƒä»¬åœ¨<code>io</code>åŒ…ä¸­çš„æ‰©å±•æ¥å£ï¼Œä»¥åŠå…·æœ‰ä»£è¡¨æ€§çš„å®ç°ç±»å‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e5/0b/e5b4af00105769cdc9f0ab729bb3b30b.png?wh=1822*1016\" alt=\"\"></p><p>ï¼ˆ ioåŒ…ä¸­çš„æ¥å£ä½“ç³»ï¼‰</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è¿˜ä»å¤šä¸ªç»´åº¦ä¸ºä½ æè¿°äº†ä¸€äº›é‡è¦ç¨‹åºå®ä½“çš„åŠŸç”¨å’Œæœºç†ï¼Œæ¯”å¦‚ï¼šæ•°æ®æ®µè¯»å–å™¨<code>io.SectionReader</code>ã€ä½œä¸ºåŒæ­¥å†…å­˜ç®¡é“æ ¸å¿ƒå®ç°çš„<code>io.pipe</code>ç±»å‹ï¼Œä»¥åŠç”¨äºæ•°æ®æ‹·è´çš„<code>io.CopyN</code>å‡½æ•°ï¼Œç­‰ç­‰ã€‚</p><p>æˆ‘å¦‚æ­¤è¯¦å°½ä¸”å¤šè§’åº¦çš„é˜é‡Šï¼Œæ­£æ˜¯ä¸ºäº†è®©ä½ èƒ½å¤Ÿè®°ç‰¢<code>io</code>ä»£ç åŒ…ä¸­æœ‰ç€ç½‘çŠ¶å…³ç³»çš„æ¥å£å’Œæ•°æ®ç±»å‹ã€‚æˆ‘å¸Œæœ›è¿™ä¸ªç›®çš„å·²ç»è¾¾åˆ°äº†ï¼Œæœ€èµ·ç ï¼Œæœ¬æ–‡å¯ä»¥ä½œä¸ºä½ æ·±åˆ»è®°å¿†å®ƒä»¬çš„å¼€å§‹ã€‚</p><p>æœ€åå†å¼ºè°ƒä¸€ä¸‹ï¼Œ<code>io</code>åŒ…ä¸­çš„ç®€å•æ¥å£å…±æœ‰11ä¸ªã€‚å…¶ä¸­ï¼Œè¯»å–æ“ä½œç›¸å…³çš„æ¥å£æœ‰5ä¸ªï¼Œå†™å…¥æ“ä½œç›¸å…³çš„æ¥å£æœ‰4ä¸ªï¼Œè€Œä¸å…³é—­æ“ä½œæœ‰å…³çš„æ¥å£åªæœ‰1ä¸ªï¼Œå¦å¤–è¿˜æœ‰ä¸€ä¸ªè¯»å†™ä½ç½®è®¾å®šç›¸å…³çš„æ¥å£ã€‚</p><p>æ­¤å¤–ï¼Œ<code>io</code>åŒ…è¿˜åŒ…å«äº†9ä¸ªåŸºäºè¿™äº›ç®€å•æ¥å£çš„æ‰©å±•æ¥å£ã€‚ä½ éœ€è¦åœ¨ä»Šåæ€è€ƒå’Œå®è·µçš„æ˜¯ï¼Œä½ åœ¨ä»€ä¹ˆæ—¶å€™åº”è¯¥ç¼–å†™å“ªäº›æ•°æ®ç±»å‹å®ç°<code>io</code>åŒ…ä¸­çš„å“ªäº›æ¥å£ï¼Œå¹¶ä»¥æ­¤å¾—åˆ°æœ€å¤§çš„å¥½å¤„ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©çš„æ€è€ƒé¢˜æ˜¯ï¼š<code>io</code>åŒ…ä¸­çš„åŒæ­¥å†…å­˜ç®¡é“çš„è¿ä½œæœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><a href=\"https://github.com/hyper0x/Golang_Puzzlers\">æˆ³æ­¤æŸ¥çœ‹Goè¯­è¨€ä¸“æ æ–‡ç« é…å¥—è¯¦ç»†ä»£ç ã€‚</a></p><p></p>","comments":[{"had_liked":false,"id":160894,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1576055907,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"66000565347","product_id":100013101,"comment_content":"äºŒåˆ·<br>ioåŒ…ä¸­io.goæ–‡ä»¶ä¸­çš„ç›¸å…³æ¥å£ï¼Œç‰¹åˆ«æ˜¯å‡½æ•°å’Œç±»å‹æ–¹æ³•çš„å®ç°çš„ä»£ç å†™çš„çœŸæ˜¯ç®€æ´ã€ç²¾ç‚¼ï¼çœ‹åçœŸæ˜¯æƒ­æ„§è‡ªå·±ä»€ä¹ˆæ—¶å€™èƒ½å†™å‡ºè¿™ä¹ˆç®€æ´ä¼˜é›…çš„ä»£ç ï¼<br>å¢™è£‚æ¨èio.goæºç ï¼Œå¹ä¸ºè§‚æ­¢","like_count":15},{"had_liked":false,"id":39154,"user_name":"æˆ‘è¦æ”»å‡»ä¹‹çˆª","can_delete":false,"product_type":"c1","uid":1092661,"ip_address":"","ucode":"CCA9D04B7D1376","user_header":"https://static001.geekbang.org/account/avatar/00/10/ac/35/b6dbfab8.jpg","comment_is_top":false,"comment_ctime":1542199985,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40196905649","product_id":100013101,"comment_content":"éƒæ€»ï¼Œèº«ä½“æ€ä¹ˆæ ·äº†ï¼Œç¥æ—©æ—¥åº·å¤ï¼","like_count":10},{"had_liked":false,"id":288968,"user_name":"noisyes","can_delete":false,"product_type":"c1","uid":2538540,"ip_address":"","ucode":"94EC310B284AD2","user_header":"https://static001.geekbang.org/account/avatar/00/26/bc/2c/963688bb.jpg","comment_is_top":false,"comment_ctime":1618802667,"is_pvip":false,"replies":[{"id":"104915","content":"ç®€çŸ­çš„å›ç­”ï¼šæ˜¯è¿™æ ·çš„ã€‚è¿™æ˜¯æ­£å¸¸çš„ã€‚<br><br>å¤æ‚çš„å›ç­”ï¼š<br>å®é™…ä¸Šï¼Œâ€œåŒæ—¶â€æ˜¯ä¸å¯èƒ½å‘ç”Ÿçš„ï¼ˆè¯´åˆ°åº•ï¼Œä»»ä½•ä»£ç çš„æ‰§è¡Œæ€»ä¼šæœ‰å…ˆåï¼Œæœ€å¤šåœ¨æ—¶é—´ä¸Šçš„è·ç¦»éå¸¸éå¸¸éå¸¸è¿‘è€Œå·²ï¼‰ã€‚æˆ‘ä»¬åªèƒ½è¯´åœ¨ä¸€æ®µå¾ˆçŸ­çš„æ—¶é—´æ®µå†…ï¼Œå®ƒä»¬åŒæ—¶æ‰§è¡Œäº†ï¼ˆä½†ç°åœ¨å¤§å®¶å¸¸å¸¸ç®€å†™ä¸ºâ€œåŒæ—¶æ‰§è¡Œâ€ï¼‰ã€‚<br><br>å¦‚æœè¿™ç§â€œåŒæ—¶æ‰§è¡Œâ€çš„æƒ…å†µçœŸçš„å‘ç”Ÿäº†ï¼Œé‚£ä¹ˆâ€œå®ƒä»¬è°å…ˆè°åâ€è¿™ç§å¤ªè¿‡ç»†å¾®çš„åˆ¤æ–­å°±åªèƒ½å¿½ç•¥ä¸è®¡äº†ã€‚ä¸€ä¸ªåŸå› æ˜¯è¿™ç§åˆ¤æ–­çš„æˆæœ¬è¿œè¿œå¤§äºæ”¶ç›Šï¼Œå¦ä¸€ä¸ªåŸå› æ˜¯å®åœ¨æ²¡æœ‰å¿…è¦æ‰£è¿™ä¹ˆç»†ã€‚<br><br>æ‰€ä»¥ï¼Œå½“ pipe ä¸­çš„ wrCh æœ‰â€œä¿¡å·â€çš„åŒæ—¶ done ä¹Ÿæœ‰â€œä¿¡å·â€ï¼Œé‚£ä¹ˆåœ¨æ­¤æ¬¡ç›´æ¥è¿”å› readCloseError ä¸åœ¨ä¸‹æ¬¡è¯»æ—¶å†è¿”å› readCloseError çš„å·®åˆ«å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚åŸå› æˆ‘åœ¨ä¸Šé¢è¯´è¿‡äº†ã€‚<br><br>å®ƒä»¬çš„ç»“å±€éƒ½æ˜¯â€œå›  pipe è¢«æå‰å…³é—­ï¼Œå¯¼è‡´æ•°æ®è¯»å–ä¸å®Œæ•´â€ã€‚<br><br>åœ¨ç¨‹åºè®¾è®¡ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ Write æ–¹æ³•çš„è°ƒç”¨ä¸€æ–¹å…³é—­ pipeã€‚å¦‚æœ Write æ–¹æ³•æ­£å¸¸æ‰§è¡Œç»“æŸï¼Œé‚£ä¹ˆä½ è¯´çš„è¿™ç§æƒ…å†µå°±ä¸ä¼šå‡ºç°ï¼Œå› ä¸º Write æ–¹æ³•ä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼š<br><br>\tfor once := true; once || len(b) &gt; 0; once = false {<br>\t\tselect {<br>\t\tcase p.wrCh &lt;- b:<br>\t\t\tnw := &lt;-p.rdCh &#47;&#47; æ­¤è¡Œæ˜¯å…³é”®ã€‚<br>\t\t&#47;&#47; ......<br>\t}<br><br><br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1618900147,"ip_address":"","comment_id":288968,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27388606443","product_id":100013101,"comment_content":"func (p *pipe) Read(b []byte) (n int, err error) {<br>\tselect {<br>\tcase &lt;-p.done:<br>\t\treturn 0, p.readCloseError()<br>\tdefault:<br>\t}<br><br>\tselect {<br>\tcase bw := &lt;-p.wrCh:<br>\t\tnr := copy(b, bw)<br>\t\tp.rdCh &lt;- nr<br>\t\treturn nr, nil<br>\tcase &lt;-p.done:<br>\t\treturn 0, p.readCloseError()<br>\t}<br>}<br>ä»¥ä¸Šæ˜¯pipereaderçš„ä»£ç ï¼Œæœ‰ä¸ªç–‘é—®selectè¯­å¥ä¸­ p.wrChå’Œp.doneåŒæ—¶æœ‰ä¿¡å·äº§ç”Ÿï¼Œä½†æ˜¯æœ€ç»ˆé€‰æ‹©äº†doneçš„åˆ†æ”¯è¯­å¥ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€åç»­æ•°æ®å°±æ²¡æ³•è¯»å‡ºæ¥äº†ï¼Œè¿™ç§æƒ…å†µæ˜¯æ­£å¸¸çš„å—","like_count":6,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518781,"discussion_content":"ç®€çŸ­çš„å›ç­”ï¼šæ˜¯è¿™æ ·çš„ã€‚è¿™æ˜¯æ­£å¸¸çš„ã€‚\n\nå¤æ‚çš„å›ç­”ï¼š\nå®é™…ä¸Šï¼Œâ€œåŒæ—¶â€æ˜¯ä¸å¯èƒ½å‘ç”Ÿçš„ï¼ˆè¯´åˆ°åº•ï¼Œä»»ä½•ä»£ç çš„æ‰§è¡Œæ€»ä¼šæœ‰å…ˆåï¼Œæœ€å¤šåœ¨æ—¶é—´ä¸Šçš„è·ç¦»éå¸¸éå¸¸éå¸¸è¿‘è€Œå·²ï¼‰ã€‚æˆ‘ä»¬åªèƒ½è¯´åœ¨ä¸€æ®µå¾ˆçŸ­çš„æ—¶é—´æ®µå†…ï¼Œå®ƒä»¬åŒæ—¶æ‰§è¡Œäº†ï¼ˆä½†ç°åœ¨å¤§å®¶å¸¸å¸¸ç®€å†™ä¸ºâ€œåŒæ—¶æ‰§è¡Œâ€ï¼‰ã€‚\n\nå¦‚æœè¿™ç§â€œåŒæ—¶æ‰§è¡Œâ€çš„æƒ…å†µçœŸçš„å‘ç”Ÿäº†ï¼Œé‚£ä¹ˆâ€œå®ƒä»¬è°å…ˆè°åâ€è¿™ç§å¤ªè¿‡ç»†å¾®çš„åˆ¤æ–­å°±åªèƒ½å¿½ç•¥ä¸è®¡äº†ã€‚ä¸€ä¸ªåŸå› æ˜¯è¿™ç§åˆ¤æ–­çš„æˆæœ¬è¿œè¿œå¤§äºæ”¶ç›Šï¼Œå¦ä¸€ä¸ªåŸå› æ˜¯å®åœ¨æ²¡æœ‰å¿…è¦æ‰£è¿™ä¹ˆç»†ã€‚\n\næ‰€ä»¥ï¼Œå½“ pipe ä¸­çš„ wrCh æœ‰â€œä¿¡å·â€çš„åŒæ—¶ done ä¹Ÿæœ‰â€œä¿¡å·â€ï¼Œé‚£ä¹ˆåœ¨æ­¤æ¬¡ç›´æ¥è¿”å› readCloseError ä¸åœ¨ä¸‹æ¬¡è¯»æ—¶å†è¿”å› readCloseError çš„å·®åˆ«å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚åŸå› æˆ‘åœ¨ä¸Šé¢è¯´è¿‡äº†ã€‚\n\nå®ƒä»¬çš„ç»“å±€éƒ½æ˜¯â€œå›  pipe è¢«æå‰å…³é—­ï¼Œå¯¼è‡´æ•°æ®è¯»å–ä¸å®Œæ•´â€ã€‚\n\nåœ¨ç¨‹åºè®¾è®¡ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ Write æ–¹æ³•çš„è°ƒç”¨ä¸€æ–¹å…³é—­ pipeã€‚å¦‚æœ Write æ–¹æ³•æ­£å¸¸æ‰§è¡Œç»“æŸï¼Œé‚£ä¹ˆä½ è¯´çš„è¿™ç§æƒ…å†µå°±ä¸ä¼šå‡ºç°ï¼Œå› ä¸º Write æ–¹æ³•ä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼š\n\n\tfor once := true; once || len(b) &amp;gt; 0; once = false {\n\t\tselect {\n\t\tcase p.wrCh &amp;lt;- b:\n\t\t\tnw := &amp;lt;-p.rdCh // æ­¤è¡Œæ˜¯å…³é”®ã€‚\n\t\t// ......\n\t}\n\n\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618900147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":40616,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1542636545,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27312440321","product_id":100013101,"comment_content":"æ„Ÿè§‰è¿™ä¸ªä¸“æ å¾ˆå€¼ã€‚æœ€å¼€å§‹å†™çš„11æœˆ2å·æ›´æ–°å®Œï¼Œç°åœ¨è¿˜åœ¨æ›´ã€‚æœ€è¿‘è¿™å‡ ç« çš„åŸºç¡€åŒ…ï¼Œæˆ‘åªæ˜¯è¿‡äº†ä¸€éï¼Œè§‰å¾—å†™çš„å¾ˆè¯¦ç»†ï¼Œä½†è‡ªå·±æ¶ˆåŒ–çš„å¾ˆæœ‰é™ã€‚å‡†å¤‡è¿‡æ®µæ—¶é—´äº†å†å›è¿‡å¤´æ¥çœ‹çœ‹ã€‚","like_count":6},{"had_liked":false,"id":176186,"user_name":"CcczzZ","can_delete":false,"product_type":"c1","uid":1019568,"ip_address":"","ucode":"5F46DA5053D2BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/b0/ef201991.jpg","comment_is_top":false,"comment_ctime":1580982307,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10170916899","product_id":100013101,"comment_content":"ioç›¸å…³æ–‡ç« åæºç ï¼Œéœ€è¦æ…¢æ…¢æ¶ˆåŒ–ï¼Œæ—¥å¸¸å¼€å‘è¿˜æœªä½¿ç”¨åˆ°ï¼Œä½†æ˜¯å®ƒå®ç°çš„æ¥å£ç»„åˆæ–¹å¼ï¼Œå´æ˜¯åœ¨æ—¥å¸¸å¼€å‘ç»å¸¸ç”¨åˆ°çš„ï¼Œèµï¼","like_count":2},{"had_liked":false,"id":87486,"user_name":"ğŸ„½ğŸ„¸ğŸ…‡ğŸ…„ğŸ…‚","can_delete":false,"product_type":"c1","uid":1000060,"ip_address":"","ucode":"853763C229A5AA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","comment_is_top":false,"comment_ctime":1555609535,"is_pvip":false,"replies":[{"id":"31513","content":"åŠ æ²¹åŠ æ²¹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1555651475,"ip_address":"","comment_id":87486,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850576831","product_id":100013101,"comment_content":"æœ¬ä»¥ä¸ºgoæ ‡å‡†åº“, å­¦ä¹ èµ·æ¥ä¼šæ¯”å‰é¢çš„è½»æ¾ä¸€äº›çš„, ç»“æœå‘ç°å®Œå…¨ä¸æ˜¯è¿™ä¹ˆå›äº‹, æ„Ÿè§‰æ¯”ä¹‹å‰å­¦èµ·æ¥æ›´ç´¯","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447479,"discussion_content":"åŠ æ²¹åŠ æ²¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555651475,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82724,"user_name":"å˜å˜","can_delete":false,"product_type":"c1","uid":1356047,"ip_address":"","ucode":"039447D8E1353A","user_header":"https://static001.geekbang.org/account/avatar/00/14/b1/0f/e81a93ed.jpg","comment_is_top":false,"comment_ctime":1554287647,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5849254943","product_id":100013101,"comment_content":"åˆ†ä¸ºè¯»å†™wrã€rd ä¸¤ä¸ªchanï¼Œå‡ä¸ºé˜»å¡ã€‚writeråœ¨wrä¸­æ— æœªè¯»å–æ•°æ®æ—¶å†™å…¥ï¼Œreaderè¯»å–åˆ°æ•°æ®åï¼Œå‘rdå†™å…¥è¯»å–åˆ°çš„æ•°æ®çš„é•¿åº¦ã€‚","like_count":1},{"had_liked":false,"id":52814,"user_name":"lovyhui","can_delete":false,"product_type":"c1","uid":1203034,"ip_address":"","ucode":"92338CEE283378","user_header":"https://static001.geekbang.org/account/avatar/00/12/5b/5a/24fb6f33.jpg","comment_is_top":false,"comment_ctime":1545534650,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"5840501946","product_id":100013101,"comment_content":"é—®é¢˜:<br>åŸºäºéç¼“å†²é€šé“ä¼ è¾“æ•°æ®, å µå¡è¯», ç›´è‡³ç»“æŸ. å µå¡å†™, æ ¹æ®é€šé“å·²è¯»è®¡æ•°,è®¡ç®—æ¯ä¸€æ¬¡å†™å…¥é€šé“çš„æ•°æ®, ç›´è‡³ç»“æŸ","like_count":1},{"had_liked":false,"id":359674,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1217554,"ip_address":"æµ™æ±Ÿ","ucode":"C5A540BC5A60B9","user_header":"https://static001.geekbang.org/account/avatar/00/12/94/12/15558f28.jpg","comment_is_top":false,"comment_ctime":1665740439,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665740439","product_id":100013101,"comment_content":"ioåŒ…ä¸­çš„åŒæ­¥å†…å­˜ç®¡é“çš„è¿ä½œæœºåˆ¶æ˜¯é€šè¿‡pipeä¸­çš„rdChå’ŒwrChè¿›è¡Œæ•°æ®çš„æµè½¬ã€‚è¯»ç«¯ä¼šä¸€ç›´é˜»å¡ç›´åˆ°å†™ç«¯å†™å…¥æ•°æ®ï¼Œæˆ–è€…å†™ç«¯å…³é—­ç®¡é“ã€‚å†™ç«¯ä¼šä¸€ç›´é˜»å¡ç›´åˆ°è¯»ç«¯è¯»èµ°æ•°æ®æˆ–è¯»ç«¯å…³é—­ç®¡é“ã€‚å†™ç«¯ä¼šæ ¹æ®è¯»ç«¯è¿”å›çš„è¯»å–é•¿åº¦ï¼Œæ¥ç»§ç»­å†™å…¥æ•°æ®ï¼Œå¹¶ä¿è¯å†™å…¥çš„æ•°æ®èƒ½å®Œæ•´çš„è¢«è¯»ç«¯è¯»å–ã€‚","like_count":0},{"had_liked":false,"id":334455,"user_name":"Geek_f62433","can_delete":false,"product_type":"c1","uid":2897824,"ip_address":"","ucode":"227F8013345AD6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJYJ74BKhY0ibtDEsWs0eBcWERTSOcsibQ6ke5ibhicibWYRmeyuQOoCN0t7mw0pf9o3lWmtU7ZPY2Azg/132","comment_is_top":false,"comment_ctime":1644967932,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1644967932","product_id":100013101,"comment_content":"å†™çš„å¾ˆå¥½ï¼Œå¾ˆè¯¦ç»†ï¼Œå„ä¸ªæ¥å£çš„å…³ç³»ä¹Ÿå¾ˆæ¸…æ¥š","like_count":0},{"had_liked":false,"id":76572,"user_name":"manatee","can_delete":false,"product_type":"c1","uid":1041112,"ip_address":"","ucode":"708D90E7A265BD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e2/d8/f0562ede.jpg","comment_is_top":false,"comment_ctime":1552633977,"is_pvip":false,"replies":[{"id":"28881","content":"å—¯ï¼Œå¿…é¡»çš„ï¼Œè¿™äº›ç±»å‹å¾ˆæ ¸å¿ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1553399236,"ip_address":"","comment_id":76572,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552633977","product_id":100013101,"comment_content":"ioåŒ…åŒ…å«çš„ç±»å‹éœ€è¦å¥½å¥½å†æ¶ˆåŒ–ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443359,"discussion_content":"å—¯ï¼Œå¿…é¡»çš„ï¼Œè¿™äº›ç±»å‹å¾ˆæ ¸å¿ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553399236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73905,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1552030202,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552030202","product_id":100013101,"comment_content":"æ‰“å¡<br>","like_count":0},{"had_liked":false,"id":41148,"user_name":"æœ‰åŒªå›å­","can_delete":false,"product_type":"c1","uid":1204061,"ip_address":"","ucode":"72B91AFC96E285","user_header":"https://static001.geekbang.org/account/avatar/00/12/5f/5d/63010e32.jpg","comment_is_top":false,"comment_ctime":1542732865,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1542732865","product_id":100013101,"comment_content":"ä½ å¥½ï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ï¼Œæ¯æ¬¡ä¼ è¿‡æ¥çš„å€¼éƒ½æ˜¯[]byteç±»å‹ï¼Œæƒ³ç”¨biranry.writeç›´æ¥å†™è¿›å»ã€‚ä½†æ¯æ¬¡éƒ½éœ€è¦ä¸å®‰æ’[]byteè½¬æ¢æˆbuffersæ‰èƒ½å†™è¿›ç»“æ„ä½“ã€‚æœ‰å¯ä»¥ç›´æ¥å†™çš„æ–¹æ³•å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1217554,"avatar":"https://static001.geekbang.org/account/avatar/00/12/94/12/15558f28.jpg","nickname":"Jason","note":"","ucode":"C5A540BC5A60B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590432,"discussion_content":"https://github.com/lunixbochs/struc","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665737823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}