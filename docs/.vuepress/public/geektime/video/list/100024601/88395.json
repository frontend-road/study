{"id":88395,"title":"25 | Nuxt核心原理是什么？","content":"","comments":[{"had_liked":false,"id":96242,"user_name":"CrazyMuyang","can_delete":false,"product_type":"c3","uid":1161349,"ip_address":"","ucode":"C592928715EB9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/85/27aa9f63.jpg","comment_is_top":false,"comment_ctime":1558362565,"is_pvip":false,"replies":[{"id":35056,"content":"👍","user_name":"作者回复","user_name_real":"唐","uid":1316874,"ctime":1558878330,"ip_address":"","comment_id":96242,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"回复给 @weison。老师可以酌情放一放\n极客时间的留言不能进行用户间的交流貌似也是一个槽点。\n目前nuxt部署的流行做法是在服务端通过`pm2`来守护进程，通览文档还是比较容易上手的。官方文档：`https:&#47;&#47;pm2.io&#47;doc&#47;en&#47;runtime&#47;overview&#47;?utm_source=pm2&amp;utm_medium=website&amp;utm_campaign=rebranding`  最近似乎出了中文版文档，刚才没找到，可以找找。但是这样仍然有一个问题，无法真正意义上实现无停机热更新正在运行的应用，虽然可以通过node的cluster模式做一下折中，这个在pm2文档中也有详细的介绍。所以更好的做法似乎应该是通过docker来进行进一步的包装，结合ci来实现一套自动化部署方案。\n\n关于公用导航的问题，假设短期内数据不变，比较笨的办法是在所有用到导航组件的页面请求接口，并将数据存入store中，这时候的前置做法是先判断store中的数据是否为空，若不为空则跳过api请求直接用现有数据。暂时想不到好的解决办法（或者可以考虑在server端拿到数据，通过session+redis进行缓存，并通过nuxtServerInit方法拿到数据？）。。。","like_count":3,"discussions":[{"author":{"id":1316874,"avatar":"https://static001.geekbang.org/account/avatar/00/14/18/0a/28206510.jpg","nickname":"唐金州","note":"","ucode":"563B97D87C66AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450787,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558878330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82499,"user_name":"weison","can_delete":false,"product_type":"c3","uid":1084163,"ip_address":"","ucode":"6A41DBE9ECEE01","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcVY6PZjlzlibxa0w8bRm7cd9T79HWtxAtfhWPYUibKMkBJAysxeG9Buibhib2GpOgYnXROgAMJiccuIg/132","comment_is_top":false,"comment_ctime":1554224991,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"老师，我现在在用nuxt，遇到两个问题想请教一下\n1.官方文档和现在文章都是介绍通过运行npm run build &amp; npm run start 来进行部署的，但随着项目越来越大，我感觉在服务器上编译越来越难，所以我想先在本地编译，然后把编译好的.nuxt文件夹放到服务器，再执行，但我发现这样不可以，运行的还是旧的内容，请问如果我想本地打包再放到服务器部署，要怎么操作；\n2.nuxt的asyncData只支持页面而不支持component，到假如页面有从后台获取数据渲染的公用导航，那怎么样才能实现ssr呢？\n请老师赐教，谢谢","like_count":5,"discussions":[{"author":{"id":1567745,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ec/01/7a2d7f84.jpg","nickname":"ただの観です。","note":"","ucode":"D2EF872BEAF4C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1241,"discussion_content":"弱弱问一下，层主找到解决的方法了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562433675,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206229,"user_name":"ca7pe","can_delete":false,"product_type":"c3","uid":1172692,"ip_address":"","ucode":"AF106BB55E1905","user_header":"https://static001.geekbang.org/account/avatar/00/11/e4/d4/4f39f71d.jpg","comment_is_top":false,"comment_ctime":1586826254,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"SSR是否意味着每次都得回源？","like_count":0},{"had_liked":false,"id":171104,"user_name":"😈😈","can_delete":false,"product_type":"c3","uid":1690629,"ip_address":"","ucode":"669F96BB58FF30","user_header":"https://static001.geekbang.org/account/avatar/00/19/cc/05/ee628b35.jpg","comment_is_top":false,"comment_ctime":1578845301,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024601,"comment_content":"在使用nuxt，在nuxt.config.js里面，router里面配置了base，build里面配置了publicPath。在build时，生成的index.html里面静态文件相对路径是2级，但是希望可以只有1级。想问一下，如何进行配置？\n如：在router里面，base:&quot;&#47;intl&#47;&quot;，在build里面，publicPath:&quot;&#47;intl&#47;&quot;，这样build完毕后，index.html里面静态文件相对路径是：&quot;&#47;intl&#47;intl&#47;XXX.js&quot;，希望是&quot;&#47;intl&#47;XXX.js&quot;","like_count":0}]}