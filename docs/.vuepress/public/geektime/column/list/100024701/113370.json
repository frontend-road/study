{"id":113370,"title":"56 | å®¹å™¨ï¼šå¤§å…¬å¸ä¸ºä¿æŒåˆ›æ–°ï¼Œé¼“åŠ±å†…éƒ¨åˆ›ä¸š","content":"<p>ä¸Šä¸€ç« ï¼Œæˆ‘ä»¬è®²äº†è™šæ‹ŸåŒ–çš„åŸç†ã€‚ä»ä¸€å°ç‰©ç†æœºè™šæ‹ŸåŒ–å‡ºå¾ˆå¤šçš„è™šæ‹Ÿæœºè¿™ç§æ–¹å¼ï¼Œä¸€å®šç¨‹åº¦ä¸Šå®ç°äº†èµ„æºåˆ›å»ºçš„çµæ´»æ€§ã€‚ä½†æ˜¯ä½ åŒæ—¶ä¼šå‘ç°ï¼Œè™šæ‹ŸåŒ–çš„æ–¹å¼è¿˜æ˜¯éå¸¸å¤æ‚çš„ã€‚è¿™æœ‰ç‚¹å„¿åƒï¼Œä½ å»æˆç«‹å­å…¬å¸ï¼Œè™½ç„¶è¯´å…¬å¸å°ï¼Œä½†æ¯•ç«Ÿæ˜¯ä¸€äº›ç‹¬ç«‹çš„å…¬å¸ï¼Œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ï¼Œå› è€Œå°±åƒä¸Šä¸€ç« æˆ‘ä»¬çœ‹åˆ°çš„é‚£æ ·ï¼ŒCPUã€å†…å­˜ã€ç½‘ç»œã€ç¡¬ç›˜å…¨éƒ¨éœ€è¦è™šæ‹ŸåŒ–ï¼Œä¸€ä¸ªéƒ½ä¸èƒ½å·æ‡’ã€‚</p><p>é‚£æœ‰æ²¡æœ‰ä¸€ç§æ›´åŠ çµæ´»çš„æ–¹å¼ï¼Œæ—¢å¯ä»¥éš”ç¦»å‡ºä¸€éƒ¨åˆ†èµ„æºï¼Œä¸“é—¨ç”¨äºæŸä¸ªè¿›ç¨‹ï¼Œåˆä¸éœ€è¦è´¹åŠ²å‘¨æŠ˜çš„è™šæ‹ŸåŒ–è¿™ä¹ˆå¤šçš„ç¡¬ä»¶å‘¢ï¼Ÿæ¯•ç«Ÿæœ€ç»ˆæˆ‘åªæƒ³è·‘ä¸€ä¸ªç¨‹åºï¼Œè€Œä¸æ˜¯è¦ä¸€æ•´ä¸ªLinuxç³»ç»Ÿã€‚è¿™å°±åƒåœ¨ä¸€å®¶å¤§å…¬å¸æåˆ›æ–°ï¼Œå¦‚æœæ¯ä¸€ä¸ªåˆ›æ–°é¡¹ç›®éƒ½è¦æˆç«‹ä¸€å®¶å­å…¬å¸çš„è¯ï¼Œé‚£ç®€ç›´å¤ªéº»çƒ¦äº†ã€‚ä¸€èˆ¬æ–¹å¼æ˜¯åœ¨å…¬å¸å†…éƒ¨æˆç«‹ä¸€ä¸ªç‹¬ç«‹çš„ç»„ç»‡ï¼Œåˆ†é…ç‹¬ç«‹çš„èµ„æºå’ŒäººåŠ›ï¼Œå…ˆåšä¸€æ®µæ—¶é—´çš„å†…éƒ¨åˆ›ä¸šã€‚å¦‚æœçœŸçš„åšæˆåŠŸäº†ï¼Œå†æˆç«‹å­å…¬å¸ä¹Ÿä¸è¿Ÿã€‚</p><p>åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€é¡¹æ–°çš„æŠ€æœ¯ï¼Œç§°ä¸ºå®¹å™¨ï¼Œå®ƒå°±å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p>å®¹å™¨çš„è‹±æ–‡å«Containerï¼ŒContainerçš„å¦ä¸€ä¸ªæ„æ€æ˜¯â€œé›†è£…ç®±â€ã€‚å…¶å®å®¹å™¨å°±åƒèˆ¹ä¸Šçš„ä¸åŒçš„é›†è£…ç®±è£…ç€ä¸åŒçš„è´§ç‰©ï¼Œæœ‰ä¸€å®šçš„éš”ç¦»ï¼Œä½†æ˜¯éš”ç¦»æ€§åˆæ²¡æœ‰é‚£ä¹ˆå¥½ï¼Œä»…ä»…åšç®€å•çš„å°è£…ã€‚å½“ç„¶å°è£…ä¹Ÿå¸¦æ¥äº†å¥½å¤„ï¼Œä¸€ä¸ªæ˜¯æ‰“åŒ…ï¼ŒäºŒæ˜¯æ ‡å‡†ã€‚</p><p>åœ¨æ²¡æœ‰é›†è£…ç®±çš„æ—¶ä»£ï¼Œå‡è®¾æˆ‘ä»¬è¦å°†è´§ç‰©ä»Aè¿åˆ°Bï¼Œä¸­é—´è¦ç»è¿‡ä¸‰ä¸ªç å¤´ã€æ¢ä¸‰æ¬¡èˆ¹ã€‚é‚£ä¹ˆæ¯æ¬¡éƒ½è¦å°†è´§ç‰©å¸ä¸‹èˆ¹æ¥ï¼Œå¼„å¾—ä¹±ä¸ƒå…«ç³Ÿï¼Œç„¶åè¿˜è¦å†æ¬ä¸Šèˆ¹é‡æ–°æ‘†å¥½ã€‚å› æ­¤åœ¨æ²¡æœ‰é›†è£…ç®±çš„æ—¶å€™ï¼Œæ¯æ¬¡æ¢èˆ¹ï¼Œèˆ¹å‘˜ä»¬éƒ½è¦åœ¨å²¸ä¸Šå¾…å‡ å¤©æ‰èƒ½å¹²å®Œæ´»ã€‚</p><!-- [[[read_end]]] --><p>æœ‰äº†å°ºå¯¸å…¨éƒ¨éƒ½ä¸€æ ·çš„é›†è£…ç®±ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„è´§ç‰©éƒ½æ‰“åŒ…åœ¨ä¸€èµ·ã€‚æ¯æ¬¡æ¢èˆ¹çš„æ—¶å€™ï¼ŒæŠŠæ•´ä¸ªé›†è£…ç®±æ¬è¿‡å»å°±è¡Œäº†ï¼Œå‡ ä¸ªå°æ—¶å°±èƒ½å®Œæˆã€‚èˆ¹å‘˜æ¢èˆ¹æ—¶é—´å¤§å¤§ç¼©çŸ­äº†ã€‚è¿™æ˜¯é›†è£…ç®±çš„â€œæ‰“åŒ…â€å’Œâ€œæ ‡å‡†â€ä¸¤å¤§ç‰¹ç‚¹åœ¨ç”Ÿæ´»ä¸­çš„åº”ç”¨ã€‚</p><p>å…¶å®å®¹å™¨çš„æ€æƒ³å°±æ˜¯è¦å˜æˆè½¯ä»¶äº¤ä»˜çš„é›†è£…ç®±ã€‚é‚£ä¹ˆå®¹å™¨å¦‚ä½•å¯¹åº”ç”¨æ‰“åŒ…å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸€ä¸‹é›†è£…ç®±çš„æ‰“åŒ…è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¾—æœ‰ä¸ªå°é—­çš„ç¯å¢ƒï¼Œå°†è´§ç‰©å°è£…èµ·æ¥ï¼Œè®©è´§ç‰©ä¹‹é—´äº’ä¸å¹²æ‰°ï¼Œäº’ç›¸éš”ç¦»ï¼Œè¿™æ ·è£…è´§å¸è´§æ‰æ–¹ä¾¿ã€‚</p><p>å®¹å™¨å®ç°å°é—­çš„ç¯å¢ƒä¸»è¦è¦é ä¸¤ç§æŠ€æœ¯ï¼Œä¸€ç§æ˜¯çœ‹èµ·æ¥æ˜¯éš”ç¦»çš„æŠ€æœ¯ï¼Œç§°ä¸º<strong>namespace</strong>ï¼ˆå‘½åç©ºé—´ï¼‰ã€‚åœ¨æ¯ä¸ªnamespaceä¸­çš„åº”ç”¨çœ‹åˆ°çš„ï¼Œéƒ½æ˜¯ä¸åŒçš„ IPåœ°å€ã€ç”¨æˆ·ç©ºé—´ã€è¿›ç¨‹IDç­‰ã€‚å¦ä¸€ç§æ˜¯ç”¨èµ·æ¥æ˜¯éš”ç¦»çš„æŠ€æœ¯ï¼Œç§°ä¸º<strong>cgroup</strong>ï¼ˆç½‘ç»œèµ„æºé™åˆ¶ï¼‰ï¼Œå³æ˜æ˜æ•´å°æœºå™¨æœ‰å¾ˆå¤šçš„ CPUã€å†…å­˜ï¼Œä½†æ˜¯ä¸€ä¸ªåº”ç”¨åªèƒ½ç”¨å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p><p>æœ‰äº†è¿™ä¸¤é¡¹æŠ€æœ¯ï¼Œå°±ç›¸å½“äºæˆ‘ä»¬ç„Šå¥½äº†é›†è£…ç®±ã€‚æ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œå¦‚ä½•â€œå°†è¿™äº›é›†è£…ç®±æ ‡å‡†åŒ–â€ï¼Œåœ¨å“ªè‰˜èˆ¹ä¸Šéƒ½èƒ½è¿è¾“ã€‚è¿™é‡Œå°±è¦ç”¨åˆ°é•œåƒäº†ã€‚</p><p>æ‰€è°“<strong>é•œåƒ</strong>ï¼ˆImageï¼‰ï¼Œå°±æ˜¯åœ¨ä½ ç„Šå¥½é›†è£…ç®±çš„é‚£ä¸€åˆ»ï¼Œå°†é›†è£…ç®±çš„çŠ¶æ€ä¿å­˜ä¸‹æ¥ã€‚å°±åƒå­™æ‚Ÿç©ºè¯´ï¼šâ€œå®šï¼â€ï¼Œé›†è£…ç®±é‡Œçš„çŠ¶æ€å°±è¢«â€œå®šâ€åœ¨äº†é‚£ä¸€åˆ»ï¼Œç„¶åè¿™ä¸€åˆ»çš„çŠ¶æ€ä¼šè¢«ä¿å­˜æˆä¸€ç³»åˆ—æ–‡ä»¶ã€‚æ— è®ºåœ¨å“ªé‡Œè¿è¡Œè¿™ä¸ªé•œåƒï¼Œéƒ½èƒ½å®Œæ•´åœ°è¿˜åŸå½“æ—¶çš„æƒ…å†µã€‚</p><p>å½“ç¨‹åºå‘˜æ ¹æ®äº§å“è®¾è®¡å¼€å‘å®Œæ¯•ä¹‹åï¼Œå¯ä»¥å°†ä»£ç è¿åŒè¿è¡Œç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªå®¹å™¨é•œåƒã€‚è¿™ä¸ªæ—¶å€™é›†è£…ç®±å°±ç„Šå¥½äº†ã€‚æ¥ä¸‹æ¥ï¼Œæ— è®ºæ˜¯åœ¨å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒï¼Œè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒè¿è¡Œä»£ç ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„é•œåƒã€‚å°±å¥½åƒé›†è£…ç®±åœ¨å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§è¿™ä¸‰ä¸ªç å¤´éå¸¸é¡ºåˆ©åœ°æ•´ä½“è¿ç§»ï¼Œè¿™æ ·äº§å“çš„å‘å¸ƒå’Œä¸Šçº¿é€Ÿåº¦å°±åŠ å¿«äº†ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥ä½“éªŒä¸€ä¸‹è¿™ä¸ªLinuxä¸Šçš„å®¹å™¨æŠ€æœ¯ï¼</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å®‰è£…ä¸€ä¸ªç›®å‰æœ€ä¸»æµçš„å®¹å™¨æŠ€æœ¯çš„å®ç°Dockerã€‚å‡è®¾æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿæ˜¯CentOSï¼Œä½ å¯ä»¥å‚è€ƒ<a href=\"https://docs.docker.com/install/linux/docker-ce/centos/\">https://docs.docker.com/install/linux/docker-ce/centos/</a>è¿™ä¸ªå®˜æ–¹æ–‡æ¡£ï¼Œè¿›è¡Œå®‰è£…ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œåˆ é™¤åŸæœ‰ç‰ˆæœ¬çš„Dockerã€‚</p><pre><code>yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n</code></pre><p>ç¬¬äºŒæ­¥ï¼Œå®‰è£…ä¾èµ–çš„åŒ…ã€‚</p><pre><code>yum install -y yum-utils \\\n  device-mapper-persistent-data \\\n  lvm2\n</code></pre><p>ç¬¬ä¸‰æ­¥ï¼Œå®‰è£…Dockeræ‰€å±çš„åº“ã€‚</p><pre><code>yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\n\n</code></pre><p>ç¬¬å››æ­¥ï¼Œå®‰è£…Dockerã€‚</p><pre><code>yum install docker-ce docker-ce-cli containerd.io\n</code></pre><p>ç¬¬äº”æ­¥ï¼Œå¯åŠ¨Dockerã€‚</p><pre><code>systemctl start docker\n</code></pre><p>Dockerå®‰è£…å¥½ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥è¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚</p><p>å°±åƒä¸Šé¢æˆ‘ä»¬è®²è¿‡çš„ï¼Œå®¹å™¨çš„è¿è¡Œéœ€è¦ä¸€ä¸ªé•œåƒï¼Œè¿™æ˜¯æˆ‘ä»¬é›†è£…ç®±å°è£…çš„é‚£ä¸ªç¯å¢ƒï¼Œåœ¨<a href=\"https://hub.docker.com/\">https://hub.docker.com/</a>ä¸Šï¼Œä½ èƒ½æ‰¾åˆ°ä½ èƒ½æƒ³åˆ°çš„å‡ ä¹æ‰€æœ‰ç¯å¢ƒã€‚</p><p>æœ€åŸºç¡€çš„ç¯å¢ƒå°±æ˜¯æ“ä½œç³»ç»Ÿã€‚</p><p>å’±ä»¬æœ€åˆè®²å‘½ä»¤è¡Œçš„æ—¶å€™è®²è¿‡ï¼Œæ¯ç§æ“ä½œç³»ç»Ÿçš„å‘½ä»¤è¡Œä¸å¤ªä¸€æ ·ï¼Œå°±åƒé»‘è¯ä¸€æ ·ã€‚æœ‰æ—¶å€™æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬ï¼Œéœ€è¦åŸºäºæŸç§ç±»å‹çš„æ“ä½œç³»ç»Ÿï¼Œä¾‹å¦‚ï¼ŒUbuntuæˆ–è€…centOSã€‚ä½†æ˜¯ï¼ŒUbuntuæˆ–è€…centOSä¸åŒç‰ˆæœ¬çš„å‘½ä»¤ä¹Ÿä¸ä¸€æ ·ï¼Œéœ€è¦æœ‰ä¸€ä¸ªç¯å¢ƒå°è¯•ä¸€ä¸‹å‘½ä»¤æ˜¯å¦æ­£ç¡®ã€‚</p><p>æœ€å¸¸è§çš„åšæ³•æ˜¯æœ‰å‡ ç§ç±»å‹çš„æ“ä½œç³»ç»Ÿï¼Œå°±å¼„å‡ å°ç‰©ç†æœºã€‚å½“ç„¶è¿™æ ·ä¸€èˆ¬äººå¯ç©ä¸èµ·ï¼Œä½†æ˜¯æœ‰äº†è™šæ‹Ÿæœºå°±å¥½ä¸€äº›äº†ã€‚ä½ å¯ä»¥åœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šåˆ›å»ºå¤šå°è™šæ‹Ÿæœºï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™åˆä¼šæœ‰å¦ä¸€ä¸ªè‹¦æ¼ï¼Œé‚£å°±æ˜¯ï¼Œè™šæ‹Ÿæœºå¾€å¾€éœ€è¦æ¯”è¾ƒå¤§çš„å†…å­˜ï¼Œä¸€èˆ¬ä¸€å°ç¬”è®°æœ¬ç”µè„‘ä¸Šæ— æ³•å¯åŠ¨å¤šå°è™šæ‹Ÿæœºï¼Œæ‰€ä»¥åšèµ·å®éªŒæ¥è¦ç»å¸¸åˆ‡æ¢è™šæ‹Ÿæœºï¼Œéå¸¸éº»çƒ¦ã€‚ç°åœ¨æœ‰äº†å®¹å™¨ï¼Œå¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€å°è™šæ‹Ÿæœºä¸Šåˆ›å»ºä»»æ„çš„æ“ä½œç³»ç»Ÿç¯å¢ƒäº†ã€‚</p><p>æ¯”æ–¹è¯´ï¼Œä½ å¯ä»¥åœ¨<a href=\"https://hub.docker.com/\">https://hub.docker.com/</a>ä¸Šæœç´¢Ubuntuã€‚ç‚¹å¼€ä¹‹åï¼Œæ‰¾åˆ°Tagsã€‚é•œåƒéƒ½æœ‰Tagï¼Œè¿™æ˜¯é•œåƒåˆ¶ä½œè€…è‡ªå·±ä»»æ„æŒ‡å®šçš„ï¼Œå¤šç”¨äºè¡¨ç¤ºè¿™ä¸ªé•œåƒçš„ç‰ˆæœ¬å·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/16/fb/160b839adb2bd7390c16c4591204befb.png?wh=1368*944\" alt=\"\"></p><p>å¦‚æœä»”ç»†çœ‹è¿™äº›Tagsï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œå“ªæ€•éå¸¸è€ç‰ˆæœ¬çš„Ubuntuï¼Œè¿™é‡Œé¢éƒ½æœ‰ï¼Œä¾‹å¦‚14.04ã€‚å¦‚æœæˆ‘ä»¬çªç„¶éœ€è¦ä¸€ä¸ªåŸºäºUbuntu 14.04çš„å‘½ä»¤ï¼Œé‚£å°±ä¸éœ€è¦è´¹åŠ²å»å¯»æ‰¾ã€å®‰è£…ä¸€ä¸ªè¿™ä¹ˆè€çš„è™šæ‹Ÿæœºï¼Œåªè¦æ ¹æ®å‘½ä»¤ä¸‹è½½è¿™ä¸ªé•œåƒå°±å¯ä»¥äº†ã€‚</p><pre><code># docker pull ubuntu:14.04\n14.04: Pulling from library/ubuntu\na7344f52cb74: Pull complete \n515c9bb51536: Pull complete \ne1eabe0537eb: Pull complete \n4701f1215c13: Pull complete \nDigest: sha256:2f7c79927b346e436cc14c92bd4e5bd778c3bd7037f35bc639ac1589a7acfa90\nStatus: Downloaded newer image for ubuntu:14.04\n</code></pre><p>ä¸‹è½½å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹é•œåƒã€‚</p><pre><code># docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nubuntu              14.04               2c5e00d77a67        2 months ago        188MB\n</code></pre><p>æœ‰äº†é•œåƒï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¸‹é¢çš„å¯åŠ¨ä¸€ä¸ªå®¹å™¨å•¦ã€‚</p><p>å¯åŠ¨ä¸€ä¸ªå®¹å™¨éœ€è¦ä¸€ä¸ªå«entrypointçš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯å…¥å£ã€‚ä¸€ä¸ªå®¹å™¨å¯åŠ¨èµ·æ¥ä¹‹åï¼Œä¼šä»è¿™ä¸ªæŒ‡ä»¤å¼€å§‹è¿è¡Œï¼Œå¹¶ä¸”åªæœ‰è¿™ä¸ªæŒ‡ä»¤åœ¨è¿è¡Œï¼Œå®¹å™¨æ‰å¯åŠ¨ç€ã€‚å¦‚æœè¿™ä¸ªæŒ‡ä»¤é€€å‡ºï¼Œæ•´ä¸ªå®¹å™¨å°±é€€å‡ºäº†ã€‚</p><p>å› ä¸ºæˆ‘ä»¬æƒ³å°è¯•å‘½ä»¤ï¼Œæ‰€ä»¥è¿™é‡Œentrypointè¦è®¾ç½®ä¸ºbashã€‚é€šè¿‡cat /etc/lsb-releaseï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè¿™é‡Œé¢å·²ç»æ˜¯ä¸€ä¸ªè€çš„Ubuntu 14.04çš„ç¯å¢ƒã€‚</p><pre><code># docker run -it --entrypoint bash ubuntu:14.04\nroot@0e35f3f1fbc5:/# cat /etc/lsb-release \nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=&quot;Ubuntu 14.04.6 LTS&quot;\n</code></pre><p>å¦‚æœæˆ‘ä»¬æƒ³å°è¯•centOS 6ï¼Œä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚</p><pre><code># docker pull centos:6\n6: Pulling from library/centos\nff50d722b382: Pull complete \nDigest: sha256:dec8f471302de43f4cfcf82f56d99a5227b5ea1aa6d02fa56344986e1f4610e7\nStatus: Downloaded newer image for centos:6\n\n# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nubuntu              14.04               2c5e00d77a67        2 months ago        188MB\ncentos              6                   d0957ffdf8a2        4 months ago        194MB\n\n# docker run -it --entrypoint bash centos:6\n[root@af4c8d598bdf /]# cat /etc/redhat-release \nCentOS release 6.10 (Final)\n</code></pre><p>é™¤äº†å¯ä»¥å¦‚æ­¤ç®€å•åœ°åˆ›å»ºä¸€ä¸ªæ“ä½œç³»ç»Ÿç¯å¢ƒï¼Œå®¹å™¨è¿˜æœ‰ä¸€ä¸ªå¾ˆé…·çš„åŠŸèƒ½ï¼Œå°±æ˜¯é•œåƒé‡Œé¢å¸¦åº”ç”¨ã€‚è¿™æ ·çš„è¯ï¼Œåº”ç”¨å°±å¯ä»¥åƒé›†è£…ç®±ä¸€æ ·ï¼Œåˆ°å¤„è¿ç§»ï¼Œå¯åŠ¨å³å¯æä¾›æœåŠ¡ã€‚è€Œä¸ç”¨åƒè™šæ‹Ÿæœºé‚£æ ·ï¼Œè¦å…ˆæœ‰ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„ç¯å¢ƒï¼Œç„¶åå†åœ¨é‡Œé¢å®‰è£…åº”ç”¨ã€‚</p><p>æˆ‘ä»¬ä¸¾ä¸€ä¸ªæœ€ç®€å•çš„åº”ç”¨çš„ä¾‹å­ï¼Œä¹Ÿå°±æ˜¯nginxã€‚æˆ‘ä»¬å¯ä»¥ä¸‹è½½ä¸€ä¸ªnginxçš„é•œåƒï¼Œè¿è¡Œèµ·æ¥ï¼Œé‡Œé¢å°±è‡ªå¸¦nginxäº†ï¼Œå¹¶ä¸”ç›´æ¥å¯ä»¥è®¿é—®äº†ã€‚</p><pre><code># docker pull nginx\nUsing default tag: latest\nlatest: Pulling from library/nginx\nfc7181108d40: Pull complete \nd2e987ca2267: Pull complete \n0b760b431b11: Pull complete \nDigest: sha256:48cbeee0cb0a3b5e885e36222f969e0a2f41819a68e07aeb6631ca7cb356fed1\nStatus: Downloaded newer image for nginx:latest\n\n# docker run -d -p 8080:80 nginx\n73ff0c8bea6e169d1801afe807e909d4c84793962cba18dd022bfad9545ad488\n\n# docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES\n73ff0c8bea6e        nginx               &quot;nginx -g 'daemon ofâ€¦&quot;   2 minutes ago       Up 2 minutes        0.0.0.0:8080-&gt;80/tcp   modest_payne\n\n# curl http://localhost:8080\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Welcome to nginx!&lt;/title&gt;\n</code></pre><p>è¿™æ¬¡nginxé•œåƒè¿è¡Œçš„æ–¹å¼å’Œæ“ä½œç³»ç»Ÿä¸å¤ªä¸€æ ·ï¼Œä¸€ä¸ªæ˜¯-dï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåº”ç”¨ï¼Œä¸éœ€è¦åƒæ“ä½œç³»ç»Ÿé‚£æ ·æœ‰äº¤äº’å‘½ä»¤è¡Œï¼Œè€Œæ˜¯ä»¥åå°æ–¹å¼è¿è¡Œï¼Œ-då°±æ˜¯daemonçš„æ„æ€ã€‚</p><p>å¦å¤–ä¸€ä¸ªå°±æ˜¯ç«¯å£-p 8080:80ã€‚å®¹å™¨è¿™ä¹ˆå®¹æ˜“å¯åŠ¨ï¼Œæ¯å°æœºå™¨ä¸Šå¯ä»¥å¯åŠ¨Nä¸ªnginxã€‚å¤§å®¶éƒ½ç›‘å¬80ç«¯å£ï¼Œä¸å°±å†²çªäº†å—ï¼Ÿæ‰€ä»¥æˆ‘ä»¬è¦è®¾ç½®ç«¯å£ï¼Œå†’å·åé¢çš„80æ˜¯å®¹å™¨å†…éƒ¨ç¯å¢ƒç›‘å¬çš„ç«¯å£ï¼Œå†’å·å‰é¢çš„8080æ˜¯å®¿ä¸»æœºä¸Šç›‘å¬çš„ç«¯å£ã€‚</p><p>ä¸€æ—¦å®¹å™¨å¯åŠ¨èµ·æ¥ä¹‹åï¼Œé€šè¿‡docker pså°±å¯ä»¥æŸ¥çœ‹éƒ½æœ‰å“ªäº›å®¹å™¨æ­£åœ¨è¿è¡Œã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡curlå‘½ä»¤ï¼Œè®¿é—®æœ¬æœºçš„8080ç«¯å£ï¼Œå¯ä»¥æ‰“å°å‡ºnginxçš„æ¬¢è¿é¡µé¢ã€‚</p><p>docker runä¸€ä¸‹ï¼Œåº”ç”¨å°±å¯åŠ¨èµ·æ¥äº†ï¼Œæ˜¯ä¸æ˜¯éå¸¸æ–¹ä¾¿ï¼Ÿnginxæ˜¯å·²ç»æœ‰äººæ‰“åŒ…å¥½çš„å®¹å™¨é•œåƒï¼Œæ”¾åœ¨å…¬å…±çš„é•œåƒä»“åº“é‡Œé¢ã€‚å¦‚æœæ˜¯ä½ è‡ªå·±å¼€å‘çš„åº”ç”¨ï¼Œåº”è¯¥å¦‚ä½•æ‰“åŒ…æˆä¸ºé•œåƒå‘¢ï¼Ÿ</p><p>å› ä¸ºJavaä»£ç æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬è¿™é‡Œä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚å‡è®¾ä½ è‡ªå·±å†™çš„HTMLçš„æ–‡ä»¶å°±æ˜¯ä»£ç ã€‚</p><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Welcome to nginx Test 7!&lt;/title&gt;\n    &lt;style&gt;\n      body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Test 7&lt;/h1&gt;\n    &lt;p&gt;If you see this page, the nginx web server is successfully installed and\n    working. Further configuration is required.&lt;/p&gt;\n    &lt;p&gt;For online documentation and support please refer to\n    &lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;\n    Commercial support is available at\n    &lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;\n    &lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>é‚£æˆ‘ä»¬å¦‚ä½•å°†è¿™äº›ä»£ç æ”¾åˆ°å®¹å™¨é•œåƒé‡Œé¢å‘¢ï¼Ÿè¦é€šè¿‡Dockerfileï¼ŒDockerfileçš„æ ¼å¼åº”è¯¥åŒ…å«ä¸‹é¢çš„éƒ¨åˆ†ï¼š</p><ul>\n<li>FROM åŸºç¡€é•œåƒ</li>\n<li>RUN è¿è¡Œè¿‡çš„æ‰€æœ‰å‘½ä»¤</li>\n<li>COPY æ‹·è´åˆ°å®¹å™¨ä¸­çš„èµ„æº</li>\n<li>ENTRYPOINT å‰å°å¯åŠ¨çš„å‘½ä»¤æˆ–è€…è„šæœ¬</li>\n</ul><p>æŒ‰ç…§ä¸Šé¢è¯´çš„æ ¼å¼ï¼Œå¯ä»¥æœ‰ä¸‹é¢çš„Dockerfileã€‚</p><pre><code>FROM ubuntu:14.04\nRUN echo &quot;deb http://archive.ubuntu.com/ubuntu trusty main restricted universe multiverse&quot; &gt; /etc/apt/sources.list\nRUN echo &quot;deb http://archive.ubuntu.com/ubuntu trusty-updates main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list\nRUN apt-get -y update\nRUN apt-get -y install nginx\nCOPY test.html /usr/share/nginx/html/test.html\nENTRYPOINT nginx -g &quot;daemon off;&quot;\n</code></pre><p>å°†ä»£ç ã€Dockerfileã€è„šæœ¬ï¼Œæ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œä»¥ä¸Šé¢çš„Dockerfileä¸ºä¾‹å­ã€‚</p><pre><code>[nginx]# ls\nDockerfile  test.html\n</code></pre><p>ç°åœ¨æˆ‘ä»¬ç¼–è¯‘è¿™ä¸ªDockerfileã€‚</p><pre><code>docker build -f Dockerfile -t testnginx:1 .\n</code></pre><p>ç¼–è¯‘è¿‡åï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªæ–°çš„é•œåƒã€‚</p><pre><code># docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ntestnginx           1                   3b0e5da1a384        11 seconds ago      221MB\nnginx               latest              f68d6e55e065        13 days ago         109MB\nubuntu              14.04               2c5e00d77a67        2 months ago        188MB\ncentos              6                   d0957ffdf8a2        4 months ago        194MB\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡Œè¿™ä¸ªæ–°çš„é•œåƒã€‚</p><pre><code># docker run -d -p 8081:80 testnginx:1\nf604f0e34bc263bc32ba683d97a1db2a65de42ab052da16df3c7811ad07f0dc3\n# docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES\nf604f0e34bc2        testnginx:1         &quot;/bin/sh -c 'nginx -â€¦&quot;   2 seconds ago       Up 2 seconds        0.0.0.0:8081-&gt;80/tcp   youthful_torvalds\n73ff0c8bea6e        nginx               &quot;nginx -g 'daemon ofâ€¦&quot;   33 minutes ago      Up 33 minutes       0.0.0.0:8080-&gt;80/tcp   modest_payne\n</code></pre><p>æˆ‘ä»¬å†æ¥è®¿é—®æˆ‘ä»¬åœ¨nginxé‡Œé¢å†™çš„ä»£ç ã€‚</p><pre><code>[root@deployer nginx]# curl http://localhost:8081/test.html\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Welcome to nginx Test 7!&lt;/title&gt;\n</code></pre><p>çœ‹ï¼Œæˆ‘ä»¬çš„ä»£ç å·²ç»è¿è¡Œèµ·æ¥äº†ã€‚æ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿ</p><p>å…¶å®è¿™ç§è¿è¡Œæ–¹å¼æœ‰æ›´åŠ é…·çš„åŠŸèƒ½ã€‚</p><p>ç¬¬ä¸€å°±æ˜¯æŒç»­é›†æˆã€‚</p><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ å†™äº†ä¸€ä¸ªç¨‹åºï¼Œç„¶åæŠŠå®ƒæ‰“æˆäº†ä¸Šé¢ä¸€æ ·çš„é•œåƒã€‚ä½ åœ¨æœ¬åœ°ä¸€è¿è¡Œdocker runå°±æŠŠä»–è¿è¡Œèµ·æ¥äº†ã€‚æ¥ä¸‹æ¥ï¼Œä½ äº¤ç»™æµ‹è¯•çš„å°±ä¸æ˜¯ä¸€ä¸ªâ€œç¨‹åºåŒ…+é…ç½®+æ‰‹å†Œâ€äº†ï¼Œè€Œæ˜¯ä¸€ä¸ªå®¹å™¨é•œåƒäº†ã€‚æµ‹è¯•å°ä¼™ä¼´åŒæ ·é€šè¿‡docker runä¹Ÿå°±è¿è¡Œèµ·æ¥äº†ï¼Œä¸å­˜åœ¨â€œä½ è¿™é‡Œè·‘çš„èµ·æ¥ï¼Œä»–é‚£é‡Œè·‘ä¸èµ·æ¥çš„æƒ…å†µâ€ã€‚æµ‹è¯•å®Œäº†å†ä¸Šç”Ÿäº§ï¼Œäº¤ç»™è¿ç»´çš„å°ä¼™ä¼´ä¹Ÿæ˜¯è¿™æ ·ä¸€ä¸ªé•œåƒï¼ŒåŒæ ·çš„è¿è¡ŒåŒæ ·çš„é¡ºç•…ã€‚è¿™ç§æ¨¡å¼ä½¿å¾—è½¯ä»¶çš„äº¤ä»˜æ•ˆç‡å¤§å¤§æé«˜ï¼Œå¯ä»¥ä¸€å¤©å‘å¸ƒå¤šæ¬¡ã€‚</p><p>ç¬¬äºŒå°±æ˜¯å¼¹æ€§ä¼¸ç¼©ã€‚</p><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ å†™äº†ä¸€ä¸ªç¨‹åºï¼Œå¹³æ—¶ç”¨çš„äººå°‘ï¼Œåªéœ€è¦10ä¸ªå‰¯æœ¬å°±èƒ½å¤Ÿæ‰›ä½äº†ã€‚çªç„¶æœ‰ä¸€å¤©ï¼Œè¦åšä¿ƒé”€ï¼Œéœ€è¦100ä¸ªå‰¯æœ¬ï¼Œå¦å¤–90å°æœºå™¨åˆ›å»ºå‡ºæ¥ç›¸å¯¹æ¯”è¾ƒå®¹æ˜“ï¼Œç”¨ä»»ä½•ä¸€ä¸ªäº‘éƒ½å¯ä»¥åšåˆ°ï¼Œä½†æ˜¯é‡Œé¢90ä¸ªå‰¯æœ¬çš„åº”ç”¨å¦‚ä½•éƒ¨ç½²å‘¢ï¼Ÿä¸€ä¸ªä¸ªä¸Šå»æ‰‹åŠ¨éƒ¨ç½²å—ï¼Ÿæœ‰äº†å®¹å™¨å°±æ–¹ä¾¿å¤šäº†ï¼Œåªè¦åœ¨æ¯å°æœºå™¨ä¸Šdocker runä¸€ä¸‹å°±æå®šäº†ã€‚</p><p>ç¬¬ä¸‰å°±æ˜¯è·¨äº‘è¿ç§»ã€‚</p><p>å¦‚æœä½ ä¸ç›¸ä¿¡ä»»ä½•ä¸€ä¸ªäº‘ï¼Œæ€•è¢«ä¸€ä¸ªäº‘ç»‘å®šï¼Œæ€•ä¸€ä¸ªäº‘æŒ‚äº†è‡ªå·±çš„åº”ç”¨ä¹Ÿå°±æŒ‚äº†ã€‚é‚£æˆ‘ä»¬æƒ³ä¸€æƒ³ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä½ åªèƒ½æ‰‹åŠ¨åœ¨ä¸€ä¸ªäº‘ä¸Šéƒ¨ç½²ä¸€ä»½ï¼Œåœ¨å¦å¤–ä¸€ä¸ªäº‘ä¸Šä¹Ÿéƒ¨ç½²ä¸€ä»½ã€‚æœ‰äº†å®¹å™¨äº†ä¹‹åï¼Œç”±äºå®¹å™¨é•œåƒå¯¹äºäº‘æ˜¯ä¸­ç«‹çš„ï¼Œä½ åœ¨è¿™ä¸ªäº‘ä¸Šdocker runï¼Œå°±åœ¨è¿™ä¸ªäº‘ä¸Šæä¾›æœåŠ¡ï¼Œç­‰å“ªå¤©æƒ³ç”¨å¦ä¸€ä¸ªäº‘äº†ï¼Œä¸ç”¨æ€•åº”ç”¨è¿ç§»ä¸èµ°ï¼Œåªè¦åœ¨å¦å¤–ä¸€ä¸ªäº‘ä¸Šdocker runä¸€ä¸‹å°±è§£å†³äº†ã€‚</p><p>åˆ°ç°åœ¨ï¼Œæ˜¯ä¸æ˜¯èƒ½å¤Ÿæ„Ÿå—åˆ°å®¹å™¨çš„é›†è£…ç®±åŠŸèƒ½äº†ï¼Œè¿™å°±æ˜¯çœ‹èµ·æ¥éš”ç¦»çš„ä½œç”¨ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œå¤šä¸ªå®¹å™¨è¿è¡Œåœ¨ä¸€å°æœºå™¨ä¸Šï¼Œä¸ä¼šç›¸äº’å½±å“å—ï¼Ÿå¦‚ä½•é™åˆ¶CPUå’Œå†…å­˜çš„ä½¿ç”¨å‘¢ï¼Ÿ</p><p>Dockeræœ¬èº«æä¾›äº†è¿™æ ·çš„åŠŸèƒ½ã€‚Dockerå¯ä»¥é™åˆ¶å¯¹äºCPUçš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†å‡ ç§çš„æ–¹å¼ã€‚</p><ul>\n<li>Dockerå…è®¸ç”¨æˆ·ä¸ºæ¯ä¸ªå®¹å™¨è®¾ç½®ä¸€ä¸ªæ•°å­—ï¼Œä»£è¡¨å®¹å™¨çš„ CPU shareï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªå®¹å™¨çš„ share æ˜¯ 1024ã€‚è¿™ä¸ªæ•°å€¼æ˜¯ç›¸å¯¹çš„ï¼Œæœ¬èº«å¹¶ä¸èƒ½ä»£è¡¨ä»»ä½•ç¡®å®šçš„æ„ä¹‰ã€‚å½“ä¸»æœºä¸Šæœ‰å¤šä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œæ¯ä¸ªå®¹å™¨å ç”¨çš„ CPU æ—¶é—´æ¯”ä¾‹ä¸ºå®ƒçš„ share åœ¨æ€»é¢ä¸­çš„æ¯”ä¾‹ã€‚Dockerä¸ºå®¹å™¨è®¾ç½®CPU share çš„å‚æ•°æ˜¯ -c --cpu-sharesã€‚</li>\n<li>Dockeræä¾›äº† --cpus å‚æ•°å¯ä»¥é™å®šå®¹å™¨èƒ½ä½¿ç”¨çš„ CPU æ ¸æ•°ã€‚</li>\n<li>Dockerå¯ä»¥é€šè¿‡ --cpuset å‚æ•°è®©å®¹å™¨åªè¿è¡Œåœ¨æŸäº›æ ¸ä¸Š</li>\n</ul><p>Dockerä¼šé™åˆ¶å®¹å™¨å†…å­˜ä½¿ç”¨é‡ï¼Œä¸‹é¢æ˜¯ä¸€äº›å…·ä½“çš„å‚æ•°ã€‚</p><ul>\n<li>-m --memoryï¼šå®¹å™¨èƒ½ä½¿ç”¨çš„æœ€å¤§å†…å­˜å¤§å°ã€‚</li>\n<li>â€“memory-swapï¼šå®¹å™¨èƒ½å¤Ÿä½¿ç”¨çš„ swap å¤§å°ã€‚</li>\n<li>â€“memory-swappinessï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»æœºå¯ä»¥æŠŠå®¹å™¨ä½¿ç”¨çš„åŒ¿åé¡µswapå‡ºæ¥ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ª 0-100 ä¹‹é—´çš„å€¼ï¼Œä»£è¡¨å…è®¸ swap å‡ºæ¥çš„æ¯”ä¾‹ã€‚</li>\n<li>â€“memory-reservationï¼šè®¾ç½®ä¸€ä¸ªå†…å­˜ä½¿ç”¨çš„ soft limitï¼Œå¦‚æœ docker å‘ç°ä¸»æœºå†…å­˜ä¸è¶³ï¼Œä¼šæ‰§è¡Œ OOM (Out of Memory)æ“ä½œã€‚è¿™ä¸ªå€¼å¿…é¡»å°äº --memory è®¾ç½®çš„å€¼ã€‚</li>\n<li>â€“kernel-memoryï¼šå®¹å™¨èƒ½å¤Ÿä½¿ç”¨çš„ kernel memory å¤§å°ã€‚</li>\n<li>â€“oom-kill-disableï¼šæ˜¯å¦è¿è¡Œ OOM (Out of Memory)çš„æ—¶å€™æ€æ­»å®¹å™¨ã€‚åªæœ‰è®¾ç½®äº† -mï¼Œæ‰å¯ä»¥æŠŠè¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸º falseï¼Œå¦åˆ™å®¹å™¨ä¼šè€—å°½ä¸»æœºå†…å­˜ï¼Œè€Œä¸”å¯¼è‡´ä¸»æœºåº”ç”¨è¢«æ€æ­»ã€‚</li>\n</ul><p>è¿™å°±æ˜¯ç”¨èµ·æ¥éš”ç¦»çš„æ•ˆæœã€‚</p><p>é‚£è¿™äº›çœ‹èµ·æ¥éš”ç¦»å’Œç”¨èµ·æ¥éš”ç¦»çš„æŠ€æœ¯ï¼Œåˆ°å†…æ ¸é‡Œé¢æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸‹ä¸€èŠ‚ä»”ç»†åˆ†æã€‚</p><h2>æ€»ç»“æ—¶åˆ»</h2><p>è¿™é‡Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹è¿™ä¸€èŠ‚çš„å†…å®¹ã€‚æ— è®ºæ˜¯å®¹å™¨ï¼Œè¿˜æ˜¯è™šæ‹Ÿæœºï¼Œéƒ½ä¾èµ–äºå†…æ ¸ä¸­çš„æŠ€æœ¯ï¼Œè™šæ‹Ÿæœºä¾èµ–çš„æ˜¯KVMï¼Œå®¹å™¨ä¾èµ–çš„æ˜¯namespaceå’Œcgroupå¯¹è¿›ç¨‹è¿›è¡Œéš”ç¦»ã€‚</p><p>ä¸ºäº†è¿è¡ŒDockerï¼Œæœ‰ä¸€ä¸ªdaemonè¿›ç¨‹Docker Daemonç”¨äºæ¥æ”¶å‘½ä»¤è¡Œã€‚</p><p>ä¸ºäº†æè¿°Dockeré‡Œé¢è¿è¡Œçš„ç¯å¢ƒå’Œåº”ç”¨ï¼Œæœ‰ä¸€ä¸ªDockerfileï¼Œé€šè¿‡buildå‘½ä»¤ç§°ä¸ºå®¹å™¨é•œåƒã€‚å®¹å™¨é•œåƒå¯ä»¥ä¸Šä¼ åˆ°é•œåƒä»“åº“ï¼Œä¹Ÿå¯ä»¥é€šè¿‡pullå‘½ä»¤ä»é•œåƒä»“åº“ä¸­ä¸‹è½½ç°æˆçš„å®¹å™¨é•œåƒã€‚</p><p>é€šè¿‡Docker runå‘½ä»¤å°†å®¹å™¨é•œåƒè¿è¡Œä¸ºå®¹å™¨ï¼Œé€šè¿‡namespaceå’Œcgroupè¿›è¡Œéš”ç¦»ï¼Œå®¹å™¨é‡Œé¢ä¸åŒ…å«å†…æ ¸ï¼Œæ˜¯å…±äº«å®¿ä¸»æœºçš„å†…æ ¸çš„ã€‚å¯¹æ¯”è™šæ‹Ÿæœºï¼Œè™šæ‹Ÿæœºåœ¨qemuè¿›ç¨‹é‡Œé¢æ˜¯æœ‰å®¢æˆ·æœºå†…æ ¸çš„ï¼Œåº”ç”¨è¿è¡Œåœ¨å®¢æˆ·æœºçš„ç”¨æˆ·æ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5a/c5/5a499cb50a1b214a39ddf19cbb63dcc5.jpg?wh=1813*1783\" alt=\"\"></p><h2>è¯¾å ‚ç»ƒä¹ </h2><p>è¯·ä½ è¯•ç€ç”¨Tomcatçš„å®¹å™¨é•œåƒå¯åŠ¨ä¸€ä¸ªJavaç½‘ç«™ç¨‹åºï¼Œå¹¶è¿›è¡Œè®¿é—®ã€‚</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„ç–‘æƒ‘å’Œè§è§£ï¼Œä¹Ÿæ¬¢è¿æ”¶è—æœ¬èŠ‚å†…å®¹ï¼Œåå¤ç ”è¯»ã€‚ä½ ä¹Ÿå¯ä»¥æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå’Œä»–ä¸€èµ·å­¦ä¹ å’Œè¿›æ­¥ã€‚</p>","neighbors":{"left":{"article_title":"55 | ç½‘ç»œè™šæ‹ŸåŒ–ï¼šå¦‚ä½•æˆç«‹ç‹¬ç«‹çš„åˆä½œéƒ¨ï¼Ÿ","id":111686},"right":{"article_title":"57 | NamespaceæŠ€æœ¯ï¼šå†…éƒ¨åˆ›ä¸šå…¬å¸åº”è¯¥ç‹¬ç«‹è¿è¥","id":113692}},"comments":[{"had_liked":false,"id":207224,"user_name":"dwjwlxs","can_delete":false,"product_type":"c1","uid":1154932,"ip_address":"","ucode":"F0897B5AF9D5C7","user_header":"https://static001.geekbang.org/account/avatar/00/11/9f/74/d6a89648.jpg","comment_is_top":false,"comment_ctime":1587027444,"is_pvip":false,"replies":[{"id":"83918","content":"å“ˆå“ˆï¼Œé‚£å°±å¤šè½¬å‘ï¼Œè¿˜æœ‰åˆ†äº«è´¹ç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1592458709,"ip_address":"","comment_id":207224,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35946765812","product_id":100024701,"comment_content":"è¿™ä¸ªè¯¾ç¨‹å–99å—çœŸæ˜¯å¤ªä¾¿å®œäº†ï¼Œåº”è¯¥å–999ğŸ˜‚","like_count":8,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492050,"discussion_content":"å“ˆå“ˆï¼Œé‚£å°±å¤šè½¬å‘ï¼Œè¿˜æœ‰åˆ†äº«è´¹ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592458709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120771,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1564992554,"is_pvip":false,"replies":[{"id":"46360","content":"çš„ç¡®å¦™","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1566297076,"ip_address":"","comment_id":120771,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31629763626","product_id":100024701,"comment_content":"Dockerä½¿ç”¨å®¿ä¸»æœºçš„å†…æ ¸ï¼Œé€šè¿‡cgroupå’ŒnamespacesåŠ ä¸ŠUnionFSæ¥å®ç°ï¼ŒçœŸæ˜¯çš„å¦™å•Šã€‚","like_count":7,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461470,"discussion_content":"çš„ç¡®å¦™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566297076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124435,"user_name":"é¥­ç²’","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1565883277,"is_pvip":false,"replies":[{"id":"46267","content":"å¯¹çš„ï¼Œçœ‹æ¥æ‚¨å¯¹å®¹å™¨å¾ˆç†Ÿæ‚‰ï¼Œè¿™é‡Œä»…ä»…å±•ç¤ºåŸç†","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1566280576,"ip_address":"","comment_id":124435,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23040719757","product_id":100024701,"comment_content":"ç»ˆäºæ¥ä¸€èŠ‚ä¸æ˜¯é‚£ä¹ˆæ·±ä¸”æ¯”è¾ƒç†Ÿæ‚‰çš„ã€‚å¼¹æ€§ä¼¸ç¼©ä¸Š k8s æ›´å¥½ï¼Œé¡ºå¸¦å®‰åˆ©ä¸‹å¼ ç£Šè€å¸ˆçš„ k8s ä¸“æ ï¼Œä¹Ÿæ˜¯å¾ˆä¸é”™çš„ä¸€ä¸ªä¸“æ ã€‚ç¤ºä¾‹ dockerfile çš„å‡ è¡Œ RUN å‘½ä»¤å¥½åƒç”¨ &amp;&amp; æˆ– ï¼›å¼„æˆä¸€å¥æ›´å¥½ï¼Œè¿™æ ·é•œåƒçš„ UFS å¯ä»¥å°‘å‡ å±‚ã€‚","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463174,"discussion_content":"å¯¹çš„ï¼Œçœ‹æ¥æ‚¨å¯¹å®¹å™¨å¾ˆç†Ÿæ‚‰ï¼Œè¿™é‡Œä»…ä»…å±•ç¤ºåŸç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566280576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180861,"user_name":"ç½—è¾‘æ€ç»´","can_delete":false,"product_type":"c1","uid":1318941,"ip_address":"","ucode":"D257A06EDE928E","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/1d/0c1a184c.jpg","comment_is_top":false,"comment_ctime":1582430857,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14467332745","product_id":100024701,"comment_content":"æ³¨ï¼šä»¥ä¸‹åœ¨ubuntu 18.04.4 LTS docke-ce:19.03.6æ“ä½œæˆåŠŸ<br>\t1.  docker pull tomcat #ä¸‹è½½tomcaté•œåƒ<br>\t2. docker run -d -p 20000:8080 tomcat #è¿è¡Œtomcaté•œåƒï¼Œ ã€Œ-d ã€æ˜¯ä»¥åå°æ–¹å¼è¿è¡Œï¼›ã€Œ-p  20000:8080ã€:20000æ˜¯å®¿ä¸»æœºç«¯å£å·ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼›8080æ˜¯tomcatæœåŠ¡ç«¯å£å·ï¼Œé»˜è®¤æ˜¯8080<br>å¦‚æœç”¨æµè§ˆè®¿é—®å®¿ä¸»æœºIPï¼Œå‡ºç°ç½‘é¡µ404ï¼Œé‚£ä¹ˆæ‰§è¡Œå¦‚ä¸‹æ­¥éª¤3<br>\t3. docker exec -it 3cae48db60ee &#47;bin&#47;bash #3cae48db60eeæ˜¯container idï¼Œç”¨docker pså‘½ä»¤æŸ¥è¯¢ <br>ä¸‹é¢è¿›åˆ°ã€Œtomcat containerã€æ“ä½œ<br>root@3cae48db60ee:&#47;usr&#47;local&#47;tomcat# rm -rf webapps<br>root@3cae48db60ee:&#47;usr&#47;local&#47;tomcat# mv webapps.dist webapps","like_count":3,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"éƒ­è•¾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":192887,"discussion_content":"å‰å®³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583109108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177768,"user_name":"å°æ¡Œå­","can_delete":false,"product_type":"c1","uid":1684581,"ip_address":"","ucode":"00E8CDEFBECBBF","user_header":"https://static001.geekbang.org/account/avatar/00/19/b4/65/71454201.jpg","comment_is_top":false,"comment_ctime":1581495548,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14466397436","product_id":100024701,"comment_content":"æˆ‘ä¸€ç›´æƒ³ä¸é€šæœ‰äº†å®¹å™¨åŒ–ä¹‹åï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å®Œå…¨æ›¿ä»£è™šæ‹ŸåŒ–ï¼Œä»–ä»¬çš„åœºæ™¯å¥½åƒé‡å ï¼Œå¹¶ä¸”dockeræ›´æœ‰ä¼˜åŠ¿å•Šï¼Œè™šæ‹ŸåŒ–è¿˜æœ‰æœªæ¥å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1155210,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a0/8a/69f4023c.jpg","nickname":"Dunbreak","note":"","ucode":"A64010733754BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345953,"discussion_content":"æœ‰ï¼ŒDockeråšå‡ºæ¥çš„å®¹å™¨åŒ–éƒ½æ˜¯å‡éš”ç¦»ï¼Œå®¹å™¨å†…è¿è¡Œçš„ç¨‹åºçœ‹èµ·æ¥æ˜¯éš”ç¦»çš„ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯å…±äº«å®¿ä¸»æœºlinuxå†…æ ¸çš„ï¼Œå®‰å…¨æ€§å ªå¿§ã€‚æ‰€ä»¥ç›®å‰çš„ä½¿ç”¨æ–¹æ³•éƒ½æ˜¯è½»é‡çº§è™šæ‹Ÿæœº+å®¹å™¨çš„å½¢å¼ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘çš„å®‰å…¨å®¹å™¨å°±æ˜¯è¿™æ ·å®ç°çš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1611822581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317416,"user_name":"GeekCoder","can_delete":false,"product_type":"c1","uid":1523315,"ip_address":"","ucode":"14BB73CBE28545","user_header":"","comment_is_top":false,"comment_ctime":1634789553,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5929756849","product_id":100024701,"comment_content":"dockerä¸­æ²¡æœ‰åŒ…å«oséƒ¨åˆ†ï¼Œåº•å±‚ç³»ç»Ÿè°ƒç”¨éƒ½æ˜¯è°ƒç”¨ä¸»æœºçš„ï¼Œé‚£æ¯”å¦‚æˆ‘åœ¨linuxæœ€æ–°ç‰ˆæœ¬åˆ¶ä½œäº†çš„ä¸€ä¸ªé•œåƒï¼Œç”¨åˆ°äº†æœ€æ–°çš„ç³»ç»Ÿè°ƒç”¨Aï¼Œè€Œåœ¨æ—§ç‰ˆæœ¬LINUXä¸­æ²¡æœ‰è¿™ä¸ªç³»ç»Ÿè°ƒç”¨Aï¼Œé‚£ä¹ˆè¿™ä¸ªé•œåƒå¯ä»¥åœ¨æ—§ç‰ˆæœ¬ä¸­å¯ä»¥è¿è¡Œå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1210029,"avatar":"https://static001.geekbang.org/account/avatar/00/12/76/ad/4c998423.jpg","nickname":"é¾™ä¹‹é­‚","note":"","ucode":"D0C68901B3503B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572028,"discussion_content":"è¿™ä¹Ÿæ˜¯æˆ‘æƒ³é—®çš„ï¼Œæ²¡æƒ³æ˜ç™½ï¼Ÿå‡å¦‚å®¹å™¨ä¸­è·‘çš„æ˜¯å…¶ä»–æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚Windowsï¼Œç›¸å…³çš„ç³»ç»Ÿè°ƒç”¨å¦‚ä½•å®ç°ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652571726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130774,"user_name":"æ½˜æ”¿å®‡","can_delete":false,"product_type":"c1","uid":1254758,"ip_address":"","ucode":"9A6658EE862D95","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/66/4835d92e.jpg","comment_is_top":false,"comment_ctime":1567533156,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5862500452","product_id":100024701,"comment_content":"é›†è£…ç®±ï¼Œ20ä¸–çºªæœ€ä¼Ÿå¤§çš„å‘æ˜ä¹‹ä¸€ï¼ï¼ï¼","like_count":1},{"had_liked":false,"id":121980,"user_name":"å¡æ–¯ç“¦å¾·","can_delete":false,"product_type":"c1","uid":1011332,"ip_address":"","ucode":"E944E5BC507D5C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/84/45a909a6.jpg","comment_is_top":false,"comment_ctime":1565262154,"is_pvip":false,"replies":[{"id":"46337","content":"å¯¹çš„ï¼Œä¸ä¼šè®²è¿™ä¸ªäº†ï¼Œå†…å®¹å¤ªå¤šï¼Œæ”¶ä¸ä½äº†","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1566296092,"ip_address":"","comment_id":121980,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860229450","product_id":100024701,"comment_content":"è²Œä¼¼dockerè¿˜æœ‰device-mapperæŠ€æœ¯å§ï¼Œå…³äºç‰©ç†å­˜å‚¨åˆ†é…ï¼Œè¿™é‡Œä¼šç»†è®²å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462040,"discussion_content":"å¯¹çš„ï¼Œä¸ä¼šè®²è¿™ä¸ªäº†ï¼Œå†…å®¹å¤ªå¤šï¼Œæ”¶ä¸ä½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566296092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354852,"user_name":"å†¬ç“œè”¡","can_delete":false,"product_type":"c1","uid":1117673,"ip_address":"æµ™æ±Ÿ","ucode":"2F04A446D28201","user_header":"https://static001.geekbang.org/account/avatar/00/11/0d/e9/2f02a383.jpg","comment_is_top":false,"comment_ctime":1660821784,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660821784","product_id":100024701,"comment_content":"æ–‡æœ«è¿™å¼ å›¾å¾ˆèµ","like_count":0},{"had_liked":false,"id":349518,"user_name":"å°é³„é±¼","can_delete":false,"product_type":"c1","uid":1178888,"ip_address":"","ucode":"9C30CAFB41A263","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/08/c039f840.jpg","comment_is_top":false,"comment_ctime":1656038118,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1656038118","product_id":100024701,"comment_content":"è¿˜æœ‰ä¸€ä¸ªéå¸¸å¤§çš„å¥½å¤„ï¼šç»Ÿä¸€åº”ç”¨çš„ç¯å¢ƒï¼é¿å…è¿ç»´æ‰‹åŠ¨æ“ä½œå¯¼è‡´æŸäº›ä¸­é—´ä»¶&#47;ç¯å¢ƒé…ç½®ä¸ä¸€è‡´ï¼","like_count":0,"discussions":[{"author":{"id":1657276,"avatar":"https://static001.geekbang.org/account/avatar/00/19/49/bc/3ea23054.jpg","nickname":"èƒ¡æ·˜å°˜","note":"","ucode":"8C8222F73C7B4C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578424,"discussion_content":"æ´»æ‰ä¸€åªå°é³„é±¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656731806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339503,"user_name":"herongwei","can_delete":false,"product_type":"c1","uid":1153928,"ip_address":"","ucode":"E4158BF7AD2E70","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/88/34c171f1.jpg","comment_is_top":false,"comment_ctime":1648137100,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648137100","product_id":100024701,"comment_content":"è€å¸ˆè®²çš„è¯¾éå¸¸è®¤çœŸï¼Œä¸‹äº†ç­å›åˆ°å®¶è¿çœ‹ä¸‰èŠ‚ä¸çŸ¥ä¸è§‰å·²ç»æ·±å¤œ","like_count":0},{"had_liked":false,"id":232494,"user_name":"å¤–å›½è‚‰å¤¹é¦","can_delete":false,"product_type":"c1","uid":1131027,"ip_address":"","ucode":"00BADDCFEA92B8","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/13/860e176a.jpg","comment_is_top":false,"comment_ctime":1594018693,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594018693","product_id":100024701,"comment_content":"æ€è€ƒé¢˜ï¼š<br>å…ˆpullä¸€ä¸ªtomcaté•œåƒï¼Œè¿™é‡Œé€‰ç”¨8.5çš„ï¼š<br>docker pull tomcat:8.5<br>pullä¸‹æ¥åï¼Œè¿è¡Œè‡ªå·±çš„waråŒ…æœ‰ä¸¤ç§æ–¹å¼ï¼š<br>1.åŸºäºtomcat:8.5çš„é•œåƒï¼Œå†™ä¸€ä¸ªDockerFileï¼ŒæŠŠwaråŒ…æ‹·è´è¿›å»ï¼Œbuildyä¸€ä¸ªä¸“å±é•œåƒï¼Œè¿è¡Œ<br>2.ç›´æ¥é€šè¿‡å‘½ä»¤è¿è¡Œ<br>æˆ‘ç”¨çš„æ˜¯ç¬¬äºŒç§ï¼š<br>docker run -v &#47;xxx&#47;xxx.war:&#47;usr&#47;local&#47;tomcat&#47;webapps&#47;xxx.war -it -p 9090:8080 tomcat:8.5","like_count":0},{"had_liked":false,"id":232474,"user_name":"å¤–å›½è‚‰å¤¹é¦","can_delete":false,"product_type":"c1","uid":1131027,"ip_address":"","ucode":"00BADDCFEA92B8","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/13/860e176a.jpg","comment_is_top":false,"comment_ctime":1594014590,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594014590","product_id":100024701,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸‹å¦‚æœæ˜¯macosä¸Šè·‘dockerï¼Œæ¯”å¦‚è¿è¡Œä¸€ä¸ªubuntuçš„é•œåƒï¼Œè¿˜æ˜¯å…±äº«å®¿ä¸»æœºå†…æ ¸å—ï¼Ÿæ„Ÿè§‰åº”è¯¥ä¸æ˜¯å§ï¼Ÿæ˜¯å¦ä¹Ÿæ˜¯ç”¨åˆ°äº†ç±»ä¼¼KVMçš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Ÿ","like_count":0},{"had_liked":false,"id":214781,"user_name":"LiYanbin","can_delete":false,"product_type":"c1","uid":1129976,"ip_address":"","ucode":"2F50493F818909","user_header":"https://static001.geekbang.org/account/avatar/00/11/3d/f8/b13674e6.jpg","comment_is_top":false,"comment_ctime":1588818197,"is_pvip":false,"replies":[{"id":"83477","content":"èµ","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1592186795,"ip_address":"","comment_id":214781,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588818197","product_id":100024701,"comment_content":"docker run -d ä¸­ å®˜æ–¹æ–‡æ¡£çš„è§£é‡Š æ˜¯detachçš„short commandï¼Œ https:&#47;&#47;docs.docker.com&#47;engine&#47;reference&#47;run&#47;#detached--d","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494200,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592186795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199649,"user_name":"æ˜¯Codingå°‘å¥³å•Š","can_delete":false,"product_type":"c1","uid":1915322,"ip_address":"","ucode":"BFBDCE002D0E86","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/ba/631a128a.jpg","comment_is_top":false,"comment_ctime":1585493181,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585493181","product_id":100024701,"comment_content":"â€œå½“ç¨‹åºå‘˜æ ¹æ®äº§å“è®¾è®¡å¼€å‘å®Œæ¯•ä¹‹åï¼Œå¯ä»¥å°†ä»£ç è¿åŒè¿è¡Œç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªå®¹å™¨é•œåƒã€‚æ¥ä¸‹æ¥ï¼Œæ— è®ºæ˜¯åœ¨å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒï¼Œè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒè¿è¡Œä»£ç ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„é•œåƒã€‚â€<br><br>æˆ‘æƒ³é—®ä¸‹ï¼Œå¦‚æœæµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°é—®é¢˜ï¼Œæ˜¯éœ€è¦å¼€å‘å·¥ç¨‹å¸ˆé‡æ–°ä¿®æ”¹ä»£ç æ‰“åŒ…ä¸€ä¸ªæ–°çš„é•œåƒå—ï¼Ÿé•œåƒå¯ä»¥åªåŒ…æ‹¬è¿è¡Œçš„ç¯å¢ƒè€Œä¸åŒ…æ‹¬æµ‹è¯•çš„è„šæœ¬å—ï¼Œå°±æ˜¯docker buildå¥½é•œåƒï¼Œç„¶ådocker run -itè¿›å…¥åˆ°å®¹å™¨ä¸­ï¼Œè¿è¡Œæµ‹è¯•ä»£ç ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœä»£ç æœ‰é—®é¢˜ï¼Œæ˜¯å¯ä»¥ç›´æ¥ä¿®æ”¹ä»£ç ï¼Œä¸éœ€è¦å†é‡æ–°æ‰“åŒ…ä¸€ä¸ªé•œåƒå¯¹å—ï¼Ÿè¯·è€å¸ˆæŒ‡æ•™ï½","like_count":0,"discussions":[{"author":{"id":2037522,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/YbUxEV3741vKZAiasOXggWucQbmicJwIjg3HDE58oyibYXbSop9QQFqZ7X6OhynDoo6rDHwzK8njSeJjN9hx3pJXg/132","nickname":"é»„å ƒå¥","note":"","ucode":"B4AD5250A41B3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368132,"discussion_content":"éœ€è¦é‡æ–°æ‰“åŒ… docker build","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618577025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128764,"user_name":"å¤§é›„","can_delete":false,"product_type":"c1","uid":1284205,"ip_address":"","ucode":"74AAAD6F84A1F3","user_header":"https://static001.geekbang.org/account/avatar/00/13/98/6d/25823bf0.jpg","comment_is_top":false,"comment_ctime":1566959086,"is_pvip":false,"replies":[{"id":"48759","content":"è°ƒç”¨åº•å±‚éƒ½æ˜¯é€šè¿‡ç»Ÿä¸€çš„ç³»ç»Ÿè°ƒç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘","uid":"1001590","ctime":1567494512,"ip_address":"","comment_id":128764,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566959086","product_id":100024701,"comment_content":"å¤§ä¾ å¥½ï¼Œè¯·é—®ä¸‹ æŒ‰ç…§æ¶æ„å›¾ï¼Œdockerä¸­æ²¡æœ‰OSè¿™ä¹ˆä¸€éƒ¨åˆ†çš„ä¹ˆï¼Œä½†æ˜¯ä¸ºä½•ä»»æ„çš„åŸºç¡€é•œåƒä¸­éƒ½æœ‰linuxï¼Œè¿˜æœ‰å°±æ˜¯dockeræ˜¯å¦‚ä½•å’Œç³»ç»Ÿå…±äº«å†…æ ¸çš„å‘€ã€‚","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465093,"discussion_content":"è°ƒç”¨åº•å±‚éƒ½æ˜¯é€šè¿‡ç»Ÿä¸€çš„ç³»ç»Ÿè°ƒç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567494512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}