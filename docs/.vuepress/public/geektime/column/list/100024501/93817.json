{"id":93817,"title":"25 | æ€æ ·æ„å»ºåº•å±‚çš„å‘å¸ƒå’Œè®¢é˜…äº‹ä»¶æ€»çº¿ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æˆ´é“­ã€‚ä»Šå¤©ï¼Œæˆ‘æ¥è·Ÿä½ èŠèŠæ€ä¹ˆæ„å»ºäº‹ä»¶æ€»çº¿ã€‚</p><p>äº‹ä»¶æ€»çº¿æ˜¯å¯¹å‘å¸ƒå’Œè®¢é˜…è®¾è®¡æ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œé€šè¿‡å‘å¸ƒã€è®¢é˜…å¯ä»¥å°†ç»„ä»¶é—´ä¸€å¯¹ä¸€å’Œä¸€å¯¹å¤šçš„è€¦åˆå…³ç³»è§£å¼€ã€‚è¿™ç§è®¾è®¡æ¨¡å¼ï¼Œç‰¹åˆ«é€‚åˆæ•°æ®å±‚é€šè¿‡å¼‚æ­¥å‘å¸ƒæ•°æ®çš„æ–¹å¼å‘ŠçŸ¥ UI å±‚è®¢é˜…è€…ï¼Œä½¿å¾— UI å±‚å’Œæ•°æ®å±‚å¯ä»¥ä¸ç”¨è€¦åˆåœ¨ä¸€èµ·ï¼Œåœ¨é‡æ„æ•°æ®å±‚æˆ–è€… UI å±‚æ—¶ä¸å½±å“ä¸šåŠ¡å±‚ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å…ˆä¸€èµ·æ¥æ‹ä¸€ä¸‹ iOS ç³»ç»Ÿé‡Œæœ‰æ²¡æœ‰ç°æˆå¯ç”¨çš„æŠ€æœ¯ï¼Œå½“æ•°æ®å±‚å¼‚æ­¥å‘å¸ƒæ•°æ®åï¼Œå¯ä»¥é€šè¿‡ Delegate å›è°ƒç»™ UI å±‚æ¥è¿›è¡Œå±•ç¤ºï¼Œä½†æ˜¯è¿™ä¸ªåªé€‚åˆä¸€å¯¹ä¸€çš„æ¨¡å¼ã€‚å¦‚æœå¼‚æ­¥å¤„ç†å®Œåï¼Œè¿˜éœ€è¦å°†æ•°æ®å‘å¸ƒç»™å…¶ä»– UI è¿›è¡Œå¤„ç†å’Œå±•ç¤ºçš„è¯ï¼Œå°±éœ€è¦ç»§ç»­å‘å¸ƒç»™å…¶ä»– Delegateï¼Œä»è€Œé€ æˆ Delegate å¥— Delegate çš„æƒ…å†µã€‚</p><p>ä½¿ç”¨ Block å’Œä½¿ç”¨ Delegate çš„æƒ…å†µç±»ä¼¼ã€‚å¦‚æœéœ€è¦ä¸æ–­å¼‚æ­¥å‘å¸ƒç»™ä¸‹ä¸€ä¸ªæ•°æ®è®¢é˜…è€…çš„è¯ï¼Œä¹Ÿä¼šå‡ºç° Block å›è°ƒåµŒå¥—å…¶ä»– Block å›è°ƒçš„æƒ…å†µã€‚</p><p>iOS ç³»ç»Ÿé‡Œä¹Ÿæœ‰ä¸€å¯¹å¤šæ¨¡å¼çš„æŠ€æœ¯ï¼Œæ¯”å¦‚ KVO å’Œ NSNotificationCenterã€‚</p><p>ä½¿ç”¨ KVO æ˜¯å¼ºä¾èµ–å±æ€§çš„ï¼Œåªè¦æ›´æ–°äº†å±æ€§å°±ä¼šå‘å¸ƒç»™æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œå¯¹åº”å…³ç³»è¿‡äºçµæ´»ï¼Œéš¾ä»¥ç®¡æ§å’Œç»´æŠ¤ã€‚NSNotificationCenter ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜ï¼Œé€šè¿‡å­—ç¬¦ä¸²æ¥ç»´æŠ¤å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„å…³ç³»ï¼Œä¸ä»…å¯è¯»æ€§å·®ï¼Œè€Œä¸”å’Œ KVO ä¸€æ ·é¢ä¸´ç€éš¾ä»¥ç®¡æ§å’Œç»´æŠ¤çš„æƒ…å†µã€‚</p><!-- [[[read_end]]] --><p>æ€»çš„æ¥è¯´ï¼Œç”±äº Delegate å’Œ Block åªé€‚åˆåšä¸€å¯¹ä¸€æ•°æ®ä¼ é€’ï¼ŒKVO å’Œ NSNotificationCenter è™½ç„¶å¯ä»¥æ”¯æŒä¸€å¯¹å¤šçš„æ•°æ®ä¼ é€’ï¼Œä½†å­˜åœ¨è¿‡äºçµæ´»è€Œæ— æ³•ç®¡æ§å’Œç»´æŠ¤çš„é—®é¢˜ï¼Œè€Œäº‹ä»¶æ€»çº¿éœ€è¦é€šè¿‡å‘å¸ƒå’Œè®¢é˜…è¿™ç§å¯ç®¡æ§æ–¹å¼å®ç°ä¸€å¯¹ä¸€å’Œä¸€å¯¹å¤šæ•°æ®ä¼ é€’ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼ŒiOS ç°æœ‰çš„ Delegateã€Blockã€KVOã€NSNotificationCenter ç­‰æŠ€æœ¯å¹¶ä¸é€‚åˆæ¥åšäº‹ä»¶æ€»çº¿ã€‚</p><p>æ—¢ç„¶iOSç³»ç»Ÿæä¾›çš„æŠ€æœ¯æ²¡æœ‰é€‚åˆåšäº‹ä»¶æ€»çº¿çš„ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰å¥½çš„ç¬¬ä¸‰æ–¹åº“å¯ä»¥å¤„ç†äº‹ä»¶æ€»çº¿å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œå“åº”å¼ç¬¬ä¸‰æ–¹åº“ ReactiveCocoa å’Œ RxSwift å¯¹äº‹ä»¶æ€»çº¿çš„æ”¯æŒæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†è¿™ä¸¤ä¸ªåº“æ›´ä¾§é‡çš„æ˜¯å“åº”å¼ç¼–ç¨‹ï¼Œäº‹ä»¶æ€»çº¿åªæ˜¯å…¶ä¸­å¾ˆå°çš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨å®ƒä»¬çš„è¯ï¼Œå°±æœ‰ç§æ€é¸¡ç„‰ç”¨ç‰›åˆ€çš„æ„Ÿè§‰ã€‚</p><p>é‚£ä¹ˆï¼Œäº‹ä»¶æ€»çº¿æœ‰æ²¡æœ‰å°è€Œç¾çš„ç¬¬ä¸‰æ–¹åº“å¯ç”¨å‘¢ï¼Ÿ</p><h2>Promise</h2><p>ç°åœ¨å‰ç«¯é¢†åŸŸæœ‰ä¸€ç§æ¨¡å¼å«ä½œ Promiseï¼Œè¿™æ˜¯ä¸€ç§ä¸“é—¨é’ˆå¯¹å¼‚æ­¥æ•°æ®æ“ä½œç¼–å†™çš„ä¸€å¥—ç»Ÿä¸€è§„åˆ™çš„æ¨¡å¼ã€‚</p><p>æœ¬è´¨ä¸Šï¼Œè¿™ç§æ¨¡å¼æœ¬è´¨æ˜¯é€šè¿‡ Promise å¯¹è±¡ä¿å­˜å¼‚æ­¥æ•°æ®æ“ä½œï¼ŒåŒæ—¶ Promise å¯¹è±¡æä¾›ç»Ÿä¸€çš„å¼‚æ­¥æ•°æ®æ“ä½œäº‹ä»¶å¤„ç†çš„æ¥å£ã€‚è¿™æ ·ï¼Œäº‹ä»¶æ€»çº¿çš„æ•°æ®è®¢é˜…å’Œæ•°æ®å‘å¸ƒäº‹ä»¶ï¼Œå°±å¯ä»¥é€šè¿‡ Promise å¯¹è±¡æä¾›çš„æ¥å£å®ç°å‡ºæ¥ï¼Œæ¯”ä»¥å‰é€šè¿‡Delegateå›è°ƒå¤„ç†å¼‚æ­¥äº‹ä»¶æ¥è¯´æ›´åŠ åˆç†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†ä¸€èµ·çœ‹çœ‹ï¼ŒPromise æ¨¡å¼ä¸­çš„ Promise å¯¹è±¡æ˜¯æ€ä¹ˆè¿ä½œçš„ã€‚</p><p>Promiseçš„æ¦‚å¿µæœ€æ—©æ˜¯åœ¨ <a href=\"http://erights.org/elib/distrib/pipeline.html\">E è¯­è¨€</a>ä¸­è¢«æå‡ºçš„ã€‚C++ 11 ä»¥ std :: promise æ¨¡æ¿å½¢å¼åŠ å…¥åˆ°æ ‡å‡†åº“ä¸­ï¼Œéšåå‡ºç°äº† CommonJS Promises/A è§„èŒƒï¼ŒjQuery å°†è¿™ä¸ªè§„èŒƒå®ç°åå¼•å…¥åˆ° jQuery 1.5 ç‰ˆæœ¬ä¸­ã€‚</p><p>Promise æ¨¡å¼å¤§å—æ¬¢è¿åï¼Œ ECMAScript 6 å°†å…¶å†™å…¥äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼Œå¹¶æä¾›äº†åŸç”Ÿ çš„Promise å¯¹è±¡ã€‚ Promise å¯¹è±¡é‡Œä¿å­˜æœ‰å¼‚æ­¥äº‹ä»¶ï¼ŒPromise çš„ç»Ÿä¸€æ¥å£ï¼Œä½¿å¾—å…¶ä»–å¼‚æ­¥æ“ä½œéƒ½èƒ½å¤Ÿç”¨ç›¸åŒçš„æ¥å£æ¥å¤„ç†äº‹ä»¶ã€‚</p><p><strong>Promise å¯¹è±¡ä¼šæœ‰ä¸‰ç§çŠ¶æ€</strong>ï¼Œåˆ†åˆ«æ˜¯ pendingã€fulfilledã€rejectedï¼š</p><ul>\n<li>pending è¡¨ç¤º Promise å¯¹è±¡å½“å‰æ­£åœ¨ç­‰å¾…å¼‚æ­¥äº‹ä»¶å¤„ç†ä¸­ï¼›</li>\n<li>fulfilled æŒ‡çš„æ˜¯ Promise å¯¹è±¡å½“å‰å¤„ç†çš„å¼‚æ­¥äº‹ä»¶å·²ç»æˆåŠŸå®Œæˆï¼›</li>\n<li>rejected è¡¨ç¤º Promise å¯¹è±¡å½“å‰å¤„ç†çš„å¼‚æ­¥äº‹ä»¶æ²¡æœ‰æˆåŠŸã€‚</li>\n</ul><p><strong>Promise å¯¹è±¡è¿˜æœ‰ä¸¤ä¸ªé‡è¦çš„æ–¹æ³•</strong>ï¼Œåˆ†åˆ«æ˜¯ then å’Œ catchã€‚Promise å¯¹è±¡æ¯æ¬¡æ‰§è¡Œå®Œ then å’Œ catch æ–¹æ³•åï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¼šè¿”å›å…ˆå‰çš„ Promise å¯¹è±¡ï¼ŒåŒæ—¶æ ¹æ®å¼‚æ­¥æ“ä½œç»“æœæ”¹å˜ Promise å¯¹è±¡çš„çŠ¶æ€ã€‚</p><p>then å’Œ catch æ–¹æ³•ä¸ Promise å¯¹è±¡çŠ¶æ€æ›´æ”¹å…³ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/99/c9/999e30f1245495434e8d39186d70c5c9.png?wh=1920*1080\" alt=\"\"><br>\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ‰§è¡Œ then æ–¹æ³•åè¿”å›çš„Promise å¯¹è±¡æ˜¯ rejected çŠ¶æ€çš„è¯ï¼Œç¨‹åºä¼šç›´æ¥æ‰§è¡Œ catch æ–¹æ³•ã€‚then æ–¹æ³•æ‰§è¡Œçš„å°±æ˜¯è®¢é˜…æ“ä½œï¼ŒPromise å¯¹è±¡è§¦å‘ then æ–¹æ³•å°±æ˜¯äº‹ä»¶æ€»çº¿ä¸­çš„å‘å¸ƒæ“ä½œï¼Œthen æ–¹æ³•æ‰§è¡Œå®Œè¿”å› Promise å¯¹è±¡èƒ½å¤Ÿç»§ç»­åŒæ­¥æ‰§è¡Œå¤šä¸ª then æ–¹æ³•ï¼Œç”±æ­¤ï¼Œå®ç°äº†ä¸€ä¸ªå‘å¸ƒæ“ä½œå¯¹åº”å¤šä¸ªè®¢é˜…äº‹ä»¶ã€‚</p><p>æœ‰äº† Promise å¯¹è±¡åï¼Œæ•´ä¸ªå¼‚æ­¥å‘å¸ƒå’Œè®¢é˜…æ“ä½œéƒ½ä»¥åŒæ­¥æ“ä½œçš„æ–¹å¼è¡¨ç°å‡ºæ¥äº†ã€‚Promise å¯¹è±¡ä¸ä»…èƒ½å¤Ÿé¿å…å›è°ƒå±‚å±‚åµŒå¥—ï¼Œè€Œä¸”é€šè¿‡ Promiseçš„ç»Ÿä¸€æ¥å£ï¼Œä½¿å¾—äº‹ä»¶æ€»çº¿çš„å‘å¸ƒå’Œè®¢é˜…æ“ä½œæ›´åŠ è§„èŒƒå’Œæ˜“ç”¨ã€‚</p><h2>PromiseKit</h2><p>ECMAScript 6 å·²ç»å†…ç½®äº† Promise å¯¹è±¡ï¼Œä½¿å¾—å‰ç«¯å¼€å‘è€…æ— éœ€å¼•å…¥å…¶ä»–åº“å°±èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ Promise æ¥è¿›è¡Œæ—¥å¸¸å¼€å‘ã€‚éšåï¼ŒHomebrewçš„ä½œè€… Max Howell å¼€å‘äº† PromiseKitï¼Œå°† Promise æ ‡å‡†å¸¦åˆ°äº† iOS ä¸­ã€‚æ‰€ä»¥ï¼Œç°åœ¨ iOS ä¸Šä¹Ÿæœ‰äº†å°è€Œç¾çš„äº‹ä»¶æ€»çº¿æŠ€æœ¯ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±è·Ÿä½ ä»‹ç»ä¸‹å¦‚ä½•ä½¿ç”¨ PromiseKit å§ï¼Œç›¸ä¿¡ä½ ä¸€å®šä¼šæœ‰ç§ç›¸è§æ¨æ™šçš„æ„Ÿè§‰ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹<strong>å¦‚ä½•ä½¿ç”¨ Promise å¯¹è±¡çš„ then å’Œ catch æ–¹æ³•</strong>ã€‚</p><p>å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼š</p><ul>\n<li>é¦–å…ˆï¼Œé€šè¿‡ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼›</li>\n<li>ç„¶åï¼Œæ ¹æ®è·å–åˆ°çš„ç”¨æˆ·ä¿¡æ¯é‡Œçš„ç”¨æˆ·ç¼–å·å†å»å¼‚æ­¥è¯·æ±‚è·å–ç”¨æˆ·çš„æ—¶é—´è½´åˆ—è¡¨ï¼›</li>\n<li>æœ€åï¼Œå°†ç”¨æˆ·çš„æ—¶é—´è½´åˆ—è¡¨æ•°æ®ï¼Œèµ‹å€¼ç»™å½“å‰ç±»çš„æ—¶é—´è½´åˆ—è¡¨å±æ€§ã€‚</li>\n</ul><p>è¿™é‡Œï¼Œæˆ‘å…ˆç»™å‡ºä½¿ç”¨ PromiseKit å®ç°çš„å…·ä½“ä»£ç ï¼Œç„¶åæˆ‘å†å’Œä½ åˆ†æå…¶ä¸­çš„å…³é”®æ­¥éª¤ã€‚</p><p>ä½¿ç”¨PromiseKitå®ç°çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>firstly {\n    // å¼‚æ­¥è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯\n    fetchUserInfo()\n}.then { userInfo in\n    // ä½¿ç”¨å¼‚æ­¥è·å–åˆ°çš„ç”¨æˆ·ä¿¡æ¯ä¸­çš„ uid å†å»å¼‚æ­¥è·å–ç”¨æˆ·çš„ timeline\n    fetchUserTimeline(uid: userInfo.uid)\n}.then { timeline in\n    // è®°å½• timeline\n    self.timeline = timeline\n}.catch {\n    // æ•´ä¸ªæ–¹æ³•é“¾çš„é”™è¯¯éƒ½ä¼šåœ¨è¿™å¤„ç†\n}\n</code></pre><p>å¯ä»¥çœ‹å‡ºï¼Œå¤šæ¬¡å¼‚æ­¥è¯·æ±‚é€šè¿‡ Promise çš„æ–¹æ³•è°ƒç”¨ï¼Œçœ‹èµ·æ¥å°±åƒè¿›è¡ŒåŒæ­¥æ“ä½œä¸€æ ·ï¼Œé¡ºåºå’Œé€»è¾‘ä¹Ÿæ›´åŠ æ¸…æ™°äº†ã€‚ä½¿ç”¨ then æ–¹æ³•å¯ä»¥è®©å¼‚æ­¥æ“ä½œä¸€ä¸ªæ¥ç€ä¸€ä¸ªåœ°æŒ‰é¡ºåºè¿›è¡Œã€‚å¦‚æœå¼‚æ­¥æ“ä½œ fetchUserInfo å¤±è´¥ï¼Œä¼šè¿”å›ä¸€ä¸ªçŠ¶æ€æ˜¯ rejected çš„ Promise å¯¹è±¡ï¼Œè¿”å›çš„è¿™ä¸ª Promiseå¯¹è±¡ä¼šè·³è¿‡åé¢æ‰€æœ‰çš„then æ–¹æ³•ç›´æ¥æ‰§è¡Œ catch æ–¹æ³•ã€‚è¿™å°±å’Œäº‹ä»¶æ€»çº¿ä¸­å‘å¸ƒäº‹ä»¶è§¦å‘åï¼Œè®¢é˜…äº‹ä»¶ä¼šä¸€ä¸ªæ¥ä¸€ä¸ªæ‰§è¡Œæ˜¯ä¸€æ ·çš„ã€‚</p><p>é™¤äº† then å’Œ catch æ–¹æ³•ä»¥å¤–ï¼ŒPromiseKit è¿˜æœ‰ä¸€äº›å¥½ç”¨çš„æ–¹æ³•ã€‚</p><ul>\n<li>æ¯”å¦‚ alwaysæ–¹æ³•ã€‚ä½¿ç”¨äº† always æ–¹æ³•ä»¥åï¼Œ Promise å¯¹è±¡æ¯æ¬¡åœ¨æ‰§è¡Œæ–¹æ³•æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ always æ–¹æ³•ã€‚</li>\n<li>å†æ¯”å¦‚when æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ï¼ŒæŒ‡å®šå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œç­‰è¿™äº›æ“ä½œéƒ½æ‰§è¡Œå®Œæˆåå°±ä¼šæ‰§è¡Œ when æ–¹æ³•ã€‚when æ–¹æ³•ç±»ä¼¼ GCD é‡Œé¢çš„ Dispatch Groupï¼Œè™½ç„¶å®ç°çš„åŠŸèƒ½ä¸€æ ·ï¼Œä½†æ˜¯ä»£ç ç®€å•äº†å¾ˆå¤šï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ›´åŠ æ–¹ä¾¿ã€‚</li>\n</ul><p>PromiseKit è¿˜ä¸ºè‹¹æœçš„ API æä¾›äº†æ‰©å±•ã€‚è¿™äº›æ‰©å±•éœ€è¦å•ç‹¬é›†æˆï¼Œä½ å¯ä»¥åœ¨<a href=\"https://github.com/PromiseKit\">PromiseKit ç»„ç»‡é¡µé¢</a>è·å–ã€‚ç›®å‰å¤§éƒ¨åˆ†å¸¸ç”¨çš„APIéƒ½æœ‰æ‰©å±•ï¼Œæ¯”å¦‚ UIKitã€Foundationã€CoreLocationã€QuartzCoreã€CloudKit ç­‰ç­‰ï¼Œç”šè‡³è¿˜æ”¯æŒäº†ç¬¬ä¸‰æ–¹çš„æ¡†æ¶ Alamofireã€‚</p><p>å¦‚æœä½ è§‰å¾—PromiseKit æä¾›çš„æ‰©å±•è¿˜ä¸å¤Ÿï¼Œè¿˜æƒ³è®©ä½ ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ä¹Ÿæ”¯æŒ Promisesçš„è¯ï¼Œå¯ä»¥é€šè¿‡ PromiseKit æä¾›çš„æ‰©å±•æ–‡æ¡£ï¼Œæˆ–è€…ç›´æ¥æŸ¥çœ‹å·²æ”¯æŒçš„ç¬¬ä¸‰æ–¹åº“ï¼ˆæ¯”å¦‚ Alamofire ï¼‰çš„æ‰©å±•å®ç°ï¼Œå»å­¦ä¹ å¦‚ä½•è®©å…¶ä»–åº“ä¹Ÿæ”¯æŒ Promisesã€‚</p><h2>å°ç»“</h2><p>åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ åˆ†äº«äº†äº‹ä»¶æ€»çº¿æ˜¯ä»€ä¹ˆï¼Œä»¥åŠäº‹ä»¶æ€»çº¿è§£å†³äº†ä»€ä¹ˆæ ·çš„é—®é¢˜ã€‚</p><p>å½“å·¥ç¨‹ä¸šåŠ¡é€»è¾‘è¶Šæ¥è¶Šå¤æ‚æ—¶ï¼Œä½ ä¼šå‘ç°å¦‚æœæ•°æ®å±‚å’Œ UI å±‚ä¸åšè§£è€¦ï¼Œæ—¥åæƒ³è¿›è¡Œé‡æ„æˆ–è€…ä¼˜åŒ–å°±ä¼šéå¸¸å›°éš¾ã€‚è¿™ï¼Œä¹Ÿæ˜¯å¾ˆå¤šå·¥ç¨‹å‰æœŸæ²¡æœ‰ä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼Œåˆ°äº†åæœŸä¼šç•™ä¸‹å¤§é‡æ— æ³•ä¿®æ”¹çš„ä»£ç çš„åŸå› æ‰€åœ¨ã€‚</p><p>å¦‚æœä½¿ç”¨ç±»ä¼¼ Promise è¿™æ ·çš„æŠ€æœ¯è§„èŒƒå®ç°äº‹ä»¶æ€»çº¿ï¼Œé€šè¿‡ç®€å•ã€æ¸…æ™°ã€è§„èŒƒçš„ Promise æ¥å£å°†å¼‚æ­¥çš„æ•°æ®è·å–ã€ä¸šåŠ¡é€»è¾‘ã€ç•Œé¢ä¸²èµ·æ¥ï¼Œå¯¹äºæ—¥åçš„ç»´æŠ¤æˆ–é‡æ„éƒ½ä¼šå®¹æ˜“å¾ˆå¤šã€‚</p><h2>è¯¾åå°ä½œä¸š</h2><p>PromiseKitä¸ä»…æ”¯æŒ Swiftè¯­è¨€ï¼Œè¿˜æ”¯æŒ Objective-Cã€‚æ‰€ä»¥ï¼Œä»Šå¤©çš„è¯¾åä½œä¸šæ˜¯ï¼Œå°† PromiseKit é›†æˆåˆ°ä½ çš„Objective-Cå·¥ç¨‹ä¸­ï¼Œå¹¶å¯¹å…¶ä¸­ä¸€ä¸ªæ¨¡å—è¿›è¡Œæ”¹é€ ã€‚</p><p>å¾ˆå¤šä¼˜ç§€å·¥å…·éƒ½æ˜¯ç”¨è¿‡æ‰çŸ¥é“å¥½ï¼Œå¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼Œä½ ä¹Ÿè¯•è¯•å§ã€‚</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","neighbors":{"left":{"article_title":"24 | A/B æµ‹è¯•ï¼šéªŒè¯å†³ç­–æ•ˆæœçš„åˆ©å™¨","id":93097},"right":{"article_title":"26 | å¦‚ä½•æé«˜ JSON è§£æçš„æ€§èƒ½ï¼Ÿ","id":93819}},"comments":[{"had_liked":false,"id":92221,"user_name":"éƒ‘æ°","can_delete":false,"product_type":"c1","uid":1014917,"ip_address":"","ucode":"789EAB2A08EBEF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/85/8b221758.jpg","comment_is_top":false,"comment_ctime":1557204334,"is_pvip":true,"discussion_count":4,"race_medal":0,"score":"194830732654","product_id":100024501,"comment_content":"è¿™é‡Œåªè¯´äº† åµŒå¥—å›è°ƒçš„é—®é¢˜ç”¨PromiseKitæ€ä¹ˆè§£å†³ï¼Œæ²¡è¯´PromiseKitæ€ä¹ˆå®ç°äº‹ä»¶æ€»çº¿å•Š","like_count":46,"discussions":[{"author":{"id":1147040,"avatar":"https://static001.geekbang.org/account/avatar/00/11/80/a0/26a8d76b.jpg","nickname":"Chok Wah","note":"","ucode":"4DD3D6E978BA36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374980,"discussion_content":"2021å¹´äº†ï¼Œè¿˜æ˜¯ä¸å˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621429770,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1458509,"avatar":"https://static001.geekbang.org/account/avatar/00/16/41/4d/35a56bf5.jpg","nickname":"æºªé£","note":"","ucode":"A3836221833AD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302283,"discussion_content":"åŒæ„Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598867752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1099324,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c6/3c/8ab9deb0.jpg","nickname":"@è®¸è¿˜çœŸ","note":"","ucode":"6D754D5AE44CEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283425,"discussion_content":"åŒæ„Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592272026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003193,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4e/b9/37a5b57a.jpg","nickname":"Cofunctor","note":"","ucode":"A3F644248719F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":33197,"discussion_content":"è¿™ç¯‡æ–‡ç« æ˜¯ä¸æ˜¯æ²¡å†™å®Œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571107557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92160,"user_name":"zhangkk","can_delete":false,"product_type":"c1","uid":1454235,"ip_address":"","ucode":"9B3FEF97CDED55","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/9b/7bddc304.jpg","comment_is_top":false,"comment_ctime":1557193508,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23032029988","product_id":100024501,"comment_content":"å¦‚æœä¸€å¯¹å¤šï¼Œå¤šä¸ªç±»ä¹‹é—´éœ€è¦ä¼ é€’ä¸€ä¸ªå…¬å…±promiseå¯¹è±¡ï¼Œæ¥æ¥å—catchå›è°ƒåçš„é€šçŸ¥ï¼Ÿ","like_count":6},{"had_liked":false,"id":99223,"user_name":"GREEN ISLAND","can_delete":false,"product_type":"c1","uid":1131989,"ip_address":"","ucode":"E836FC7DE402C9","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/d5/df2614f5.jpg","comment_is_top":false,"comment_ctime":1559179159,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18739048343","product_id":100024501,"comment_content":"ä¸€å¯¹å¤š éƒ½æ²¡å¬å€’å…·ä½“ç”¨æ³•","like_count":5},{"had_liked":false,"id":92315,"user_name":"mosn","can_delete":false,"product_type":"c1","uid":1454761,"ip_address":"","ucode":"0FD6967D15DB64","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/a9/ce5d2609.jpg","comment_is_top":false,"comment_ctime":1557230526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18737099710","product_id":100024501,"comment_content":"PromiseKit å’Œ Bolts-iOS, è¿˜æœ‰ coobjc å“ªä¸ªå¥½ï¼Ÿ","like_count":5},{"had_liked":false,"id":116647,"user_name":"Calabash_Boy","can_delete":false,"product_type":"c1","uid":1453760,"ip_address":"","ucode":"19E4D819792983","user_header":"","comment_is_top":false,"comment_ctime":1563884653,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5858851949","product_id":100024501,"comment_content":"&quot;NSNotificationCenteræ˜¯éš¾ä»¥ç®¡æ§å’Œç»´æŠ¤çš„&quot;,è¿™å¥è¯ä¸çŸ¥å¤§ä½¬æ˜¯å¦‚ä½•ç†è§£çš„? ","like_count":1,"discussions":[{"author":{"id":1243460,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/44/1a5e5992.jpg","nickname":"Tracy.li","note":"","ucode":"0338DEC133CC9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343162,"discussion_content":"å°±æ˜¯é€šçŸ¥å‘å‡ºå»äº†å°±ä¸ç®¡äº†ï¼Œæ‡‚äº†æ²¡ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610960894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2263562,"avatar":"https://static001.geekbang.org/account/avatar/00/22/8a/0a/bfec1501.jpg","nickname":"An","note":"","ucode":"F4CD3377DF0D5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340158,"discussion_content":"é«˜ç±»èšã€ä½è€¦åˆã€‚ã€‚æˆ‘æƒ³åº”è¯¥å¯ä»¥è§£é‡Šå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609919938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1431314,"avatar":"https://static001.geekbang.org/account/avatar/00/15/d7/12/416b60ba.jpg","nickname":"Sean Ma","note":"","ucode":"A467C04AF3CADE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5289,"discussion_content":"å‡è®¾å¦‚æœæŸä¸ªç±»æ³¨å†Œäº†é€šçŸ¥ï¼Œè€Œåˆå†…å­˜æ³„æ¼æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå¯èƒ½å°±ä¼šå‡ºç°ä¸€å †è«åå…¶å¦™çš„bug","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566138742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95250,"user_name":"æˆ‘å””çŸ¥ç‚¹æ­»å•Š","can_delete":false,"product_type":"c1","uid":1454319,"ip_address":"","ucode":"032CCE72B8F848","user_header":"","comment_is_top":false,"comment_ctime":1557997155,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5852964451","product_id":100024501,"comment_content":"èŠ±äº†3å¤©çš„æ—¶é—´ï¼ŒæŠŠPromiseKitåº”ç”¨åˆ°OCé¡¹ç›®ä¸­ï¼Œå¹¶ä¿®æ”¹äº†æ³¨å†Œç™»å½•æ¨¡å—ã€‚ä»£ç ç®€åŒ–å¾ˆå¤šï¼Œçœ‹èµ·æ¥ä¹Ÿå¾ˆèˆ’æœã€‚ç›®å‰é‡åˆ°2ä¸ªé—®é¢˜ï¼š<br>1. å¦‚ä½•å»¶æ—¶å¤„ç†ä¸‹ä¸€ä¸ªæ“ä½œï¼Ÿï¼ˆæ¯”å¦‚ï¼šæ³¨å†ŒæˆåŠŸåå»¶æ—¶2ç§’å†ç™»å½•ï¼‰<br>2. æ–‡ç« ä¸­ä»‹ç»äº†alwayså’Œwhenæ–¹æ³•ï¼Œè€Œåœ¨AnyPromiseç±»æ–‡ä»¶å´æ²¡çœ‹åˆ°å®ƒä»¬çš„è¸ªå½±ã€‚","like_count":1,"discussions":[{"author":{"id":1627358,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJia5Ax51D8Nyap5xcPkaveicguf5Nm4715fXKT4TfccvBYKiabWVJTeHtrejmDNtdmM12JYLzxiaUVEQ/132","nickname":"Rookie-Red","note":"","ucode":"A2CC287D3442D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":17285,"discussion_content":"// Whenä½¿ç”¨  univercityPromise å’Œ hotCityPromise æ˜¯ç‹¬ç«‹çš„è¯·æ±‚ã€‚\n    PMKWhen(@[univercityPromise, hotCityPromise]).then(^(){}","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568966348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1093005,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ad/8d/3b2ac759.jpg","nickname":"å¤§å¹´åˆä¸€","note":"","ucode":"AE2AE59763BFCA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":93521,"discussion_content":"å†å†™ä¸€ä¸ª then","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576930780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92190,"user_name":"æ¢…é•¿è‹","can_delete":false,"product_type":"c1","uid":1238732,"ip_address":"","ucode":"DD1CBB46E444A3","user_header":"https://static001.geekbang.org/account/avatar/00/12/e6/cc/7fc82af4.jpg","comment_is_top":false,"comment_ctime":1557198106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5852165402","product_id":100024501,"comment_content":"é™¤äº†RACè¿˜æœ‰çº¯OCçš„å‘å¸ƒ è®¢é˜…æ¡†æ¶å—ï¼Ÿ","like_count":1},{"had_liked":false,"id":92095,"user_name":"yuhao0x0628","can_delete":false,"product_type":"c1","uid":1332463,"ip_address":"","ucode":"BFD472974828A5","user_header":"https://static001.geekbang.org/account/avatar/00/14/54/ef/3cdfd916.jpg","comment_is_top":false,"comment_ctime":1557188327,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5852155623","product_id":100024501,"comment_content":"PromiseKit å¸¶ä¾† delegate èˆ‡ block çš„è§£å¶ï¼Œä¸¦ä¸”å¢åŠ æ˜“è®€æ€§èˆ‡ é¿å… callback åœ°ç„ã€‚é …ç›®ä¹Ÿæ­£åœ¨ä½¿ç”¨lib, Google ä¹Ÿé–‹æºäº†è‡ªå·±çš„ Promise lib, Promises, æä¾› await ç­‰æ›´åŠ ç›´è¦ºçš„ä½¿ç”¨æ–¹å¼ï¼Œæœ€è¿‘æ‰“ç®—ä¾†è©•ä¼°ä¸€ä¸‹ã€‚","like_count":2},{"had_liked":false,"id":248664,"user_name":"äº«å—æ…¢ç”Ÿæ´»ğŸš¨ğŸš¨","can_delete":false,"product_type":"c1","uid":1658839,"ip_address":"","ucode":"1B381CBE50B78B","user_header":"https://static001.geekbang.org/account/avatar/00/19/4f/d7/79f72168.jpg","comment_is_top":false,"comment_ctime":1600255719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600255719","product_id":100024501,"comment_content":"å…¶å®iosåŸç”Ÿæœ‰å†…éƒ¨æ”¯æŒçš„opration q ä¹Ÿæ˜¯æ”¯æŒçš„ä»¥åŠswiftçš„result ","like_count":0},{"had_liked":false,"id":150197,"user_name":"å¶å°åˆ","can_delete":false,"product_type":"c1","uid":1453701,"ip_address":"","ucode":"C41C95AAEA8C4A","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/85/358315f3.jpg","comment_is_top":false,"comment_ctime":1573477446,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573477446","product_id":100024501,"comment_content":"ocå¼€å‘ç¯å¢ƒé›†æˆPromiseKit å…¨æ˜¯é”™è¯¯","like_count":0},{"had_liked":false,"id":96465,"user_name":"å¾ç§€æ»¨","can_delete":false,"product_type":"c1","uid":1457337,"ip_address":"","ucode":"36895D00A181FB","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/b9/42b228f8.jpg","comment_is_top":false,"comment_ctime":1558429843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558429843","product_id":100024501,"comment_content":"æƒ³è¦è®©thenèƒ½å¤Ÿä¼ é€’å‚æ•°ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨thençš„blockè¿”å›Promiseï¼Œä½†æ˜¯å¦‚æœblockæ˜¯æ•°æ®è¯·æ±‚ï¼Œé‚£å°±ä¼šç ´åå·²æœ‰çš„å†™æ³•ã€‚è¿™ä¸ªè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":94007,"user_name":"å¼€å…ƒâ‚‚Â³Â³Â³Â³Â³Â³Â³","can_delete":false,"product_type":"c1","uid":1170155,"ip_address":"","ucode":"AB391580A9B051","user_header":"https://static001.geekbang.org/account/avatar/00/11/da/eb/0a356fdb.jpg","comment_is_top":false,"comment_ctime":1557705969,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1557705969","product_id":100024501,"comment_content":"å¸Œæœ›å¤§ç¥èƒ½è®²è®²promiseçš„å…·ä½“åº”ç”¨ï¼ŒçŸ¥é“è¿™ä¸ªæ¡†æ¶ï¼Œä¸€ç›´æ— æ³•åº”ç”¨åˆ°è‡ªå·±çš„é¡¹ç›®","like_count":0,"discussions":[{"author":{"id":1243460,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/44/1a5e5992.jpg","nickname":"Tracy.li","note":"","ucode":"0338DEC133CC9F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343163,"discussion_content":"å»å­¦å­¦å‰ç«¯å§  ä½ å°±ä¼šäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610961015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93114,"user_name":"@syj@","can_delete":false,"product_type":"c1","uid":1271764,"ip_address":"","ucode":"FB7647C7F2EE8E","user_header":"https://static001.geekbang.org/account/avatar/00/13/67/d4/97eded36.jpg","comment_is_top":false,"comment_ctime":1557400718,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557400718","product_id":100024501,"comment_content":"äº‹ä»¶æ€»çº¿è¿˜æ˜¯æ²¡è¯´æ¸…æ¥šï¼Œè®²è§£çš„åªæ˜¯æŠŠä¹‹å‰çš„blockæˆ–è€…delegateæ–¹æ³•æ¢æˆAnyPromiseæ–¹æ³•ï¼Œå¸Œæœ›å¤§ç¥è¯¦ç»†è®²è§£ä¸‹ä¸€å¯¹å¤šçš„","like_count":0},{"had_liked":false,"id":92957,"user_name":"Boomm","can_delete":false,"product_type":"c1","uid":1482035,"ip_address":"","ucode":"2823892613C1FE","user_header":"","comment_is_top":false,"comment_ctime":1557368453,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1557368453","product_id":100024501,"comment_content":"ç®€åŒ–å¼‚æ­¥è°ƒç”¨ä¸ºåŒæ­¥ä¹¦å†™è¿™ä¸€ç‚¹ä¸Šï¼Œå’Œé˜¿é‡Œå¼€æºçš„coobjcå¾ˆç›¸ä¼¼ï¼Œæƒ³è¯·æ•™è¿™ä¸¤è€…æœ‰ä»€ä¹ˆå¤§çš„åŒºåˆ«ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":92140,"user_name":"æˆ‘çš„å¤§å¥½æ—¶å…‰","can_delete":false,"product_type":"c1","uid":1455038,"ip_address":"","ucode":"7ABD0ABBA19633","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/be/1525566f.jpg","comment_is_top":false,"comment_ctime":1557191805,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557191805","product_id":100024501,"comment_content":"ğŸ‘","like_count":0},{"had_liked":false,"id":92093,"user_name":"geeklyc","can_delete":false,"product_type":"c1","uid":1264061,"ip_address":"","ucode":"F25441AB6433B3","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/bd/ae37990b.jpg","comment_is_top":false,"comment_ctime":1557188146,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557188146","product_id":100024501,"comment_content":"æŠ¢æ²™å‘","like_count":0},{"had_liked":false,"id":92079,"user_name":"æå¿—åˆš","can_delete":false,"product_type":"c1","uid":1239779,"ip_address":"","ucode":"13F17BF13275F8","user_header":"https://static001.geekbang.org/account/avatar/00/12/ea/e3/5818be1e.jpg","comment_is_top":false,"comment_ctime":1557186797,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557186797","product_id":100024501,"comment_content":"å¾ˆå®ç”¨ï¼Œè§£å†³äº†æŸä¸ªæ“ä½œä¾èµ–å¤šä¸ªå¼‚æ­¥äº‹ä»¶çš„åœºæ™¯ï¼Œæ¯”å¦‚ç™»é™†æ“ä½œä¾èµ–å¤šä¸ªç½‘ç»œè¯·æ±‚è¿”å›çš„åœºæ™¯ã€‚","like_count":0}]}