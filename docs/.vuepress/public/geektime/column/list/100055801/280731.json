{"id":280731,"title":"æ‹“å±•4 | æ’ä»¶æ ·ä¾‹åˆ†æï¼šè‡ªå·±åŠ¨æ‰‹æ”¹è¿›æ’ä»¶","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬å¯¹ Vim è„šæœ¬ä½œäº†åˆæ­¥çš„ä»‹ç»ã€‚Vim è„šæœ¬å¯ä»¥åº”ç”¨åœ¨å¾ˆå¤šä¸åŒçš„åœºæ™¯ä¸‹ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„ vimrc é…ç½®æ–‡ä»¶å’Œé…è‰²æ–¹æ¡ˆä¹Ÿéƒ½æ˜¯ Vim è„šæœ¬ã€‚ä½†æˆ‘ä»¬ä»Šå¤©æ›´å…³å¿ƒçš„ï¼Œæ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ã€ä¸€èˆ¬ç§°ä¸ºâ€œæ’ä»¶â€çš„ç‰¹æ®Š Vim è„šæœ¬ã€‚è™½è¯´æ’ä»¶å’Œå…¶ä»– Vim è„šæœ¬ä¹‹é—´çš„ç•Œé™ä¹Ÿå¹¶éæ³¾æ¸­åˆ†æ˜ï¼Œä½†æˆ‘ä»¬ä¸€èˆ¬æŠŠæ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„ Vim è„šæœ¬ç§°ä¸ºæ’ä»¶ï¼š</p><ul>\n<li>åŠŸèƒ½ç‹¬ç«‹ï¼Œä¸ä¾èµ–ç‰¹æ®Šçš„ä¸ªæ€§åŒ–é…ç½®</li>\n<li>å­˜åœ¨åŠ è½½æ—¶å³ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œä¸€èˆ¬æ”¾åœ¨ plugin ç›®å½•ä¸‹ï¼ˆä¹Ÿæœ‰æ”¾åœ¨ ftpluginã€ftdetect ç­‰å…¶ä»–ç›®å½•ä¸‹çš„æƒ…å†µï¼‰</li>\n</ul><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨ç›®å‰å­¦åˆ°çš„çŸ¥è¯†ï¼Œæ¥ç”±æµ…å…¥æ·±åœ°åˆ†æå››ä¸ªæ ·ä¾‹ï¼Œäº†è§£æ’ä»¶ä»£ç æ˜¯å¦‚ä½•ç¼–å†™çš„ï¼Œä»è€Œå¯ä»¥è‡ªå·±åŠ¨æ‰‹å®šåˆ¶ã€æ”¹è¿›ï¼Œè¿›è€Œç¼–å†™è‡ªå·±çš„æ’ä»¶ï¼ŒçœŸçœŸæ­£æ­£åœ°å®šåˆ¶è‡ªå·±çš„ Vim ç¯å¢ƒï¼Œå¹¶ä¸ºæ•´ä¸ª Vim ç¤¾åŒºä½œå‡ºè´¡çŒ®ã€‚</p><h2>ycmconf</h2><p>æˆ‘ä»¬è¦çœ‹çš„ç¬¬ä¸€ä¸ªè„šæœ¬ï¼Œæ˜¯åœ¨è®² YCM æ—¶å¼•å…¥çš„ ycmconfã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ’ä»¶ï¼Œæˆ‘ä»¬å°±æ‹¿å®ƒå¼€å§‹æˆ‘ä»¬ä»Šå¤©çš„è¯¾ç¨‹ã€‚</p><p>å¦‚æœä½ ä¹‹å‰æŒ‰æˆ‘è¯´çš„æ­¥éª¤å®‰è£…çš„è¯ï¼Œç°åœ¨åº”è¯¥å¯ä»¥åœ¨ Vim é…ç½®ç›®å½•ä¸‹çš„ pack/minpac/start/ycmconf é‡Œæ‰¾åˆ°å®ƒã€‚ä½ ä¹Ÿå¯ä»¥è‡ªå·±ç”¨ Git ç­¾å‡ºï¼š</p><pre><code class=\"language-bash\">git clone https://github.com/adah1972/ycmconf.git\n</code></pre><!-- [[[read_end]]] --><p>é™¤å»ä¸€äº›æ–‡æœ¬è¯´æ˜æ–‡ä»¶ï¼Œè¿™ä¸ªæ’ä»¶é‡Œåªæœ‰ä¸¤ä¸ªçœŸæ­£çš„è„šæœ¬æ–‡ä»¶ï¼š</p><ul>\n<li>plugin/ycmconf.vim</li>\n<li>ycm_extra_conf.py</li>\n</ul><p>plugin ç›®å½•æ˜¯ Vim é‡Œä¸»è¦æ”¾ç½®æ— æ¡ä»¶æ‰§è¡Œçš„è„šæœ¬çš„åœ°æ–¹ï¼Œå³â€œæ’ä»¶â€çš„ä¸»ä½“ã€‚æ‰“å¼€ plugin/ycmconf.vimï¼Œæˆ‘ä»¬çœ‹åˆ°é‡Œé¢åªæœ‰ä¸€è¡Œæ³¨é‡ŠåŠ ä¸€è¡Œä»£ç ï¼š</p><pre><code class=\"language-vim\">\" Set the global extra configuration\nlet g:ycm_global_ycm_extra_conf=expand('&lt;sfile&gt;:p:h:h') . '/ycm_extra_conf.py'\n</code></pre><p>è¿™ä¸ªå·®ä¸å¤šæ˜¯ä¸ªæœ€ç®€å•çš„æ’ä»¶äº†å§ã€‚Vim è„šæœ¬é‡Œåªåšäº†ä¸€ä»¶äº‹ï¼Œè®¾ç½®å…¨å±€å˜é‡ <code>g:ycm_global_ycm_extra_conf</code> ç»™ YCM ç”¨ã€‚å…³äºè„šæœ¬ä¸­çš„ <code>expand</code> å‡½æ•°ï¼Œæˆ‘ä»¬ç¨å¾®å±•å¼€ä¸€ä¸‹ï¼š</p><ul>\n<li><code>expand</code> æ˜¯ç”¨æ¥å±•å¼€æ–‡ä»¶åçš„ã€‚å‚æ•°å­—ç¬¦ä¸²é‡Œå¦‚æœæœ‰ <code>%</code>ï¼Œå°±ä»£è¡¨å½“å‰ç¼–è¾‘çš„æ–‡ä»¶åï¼›å¦‚æœæœ‰ <code>&lt;sfile&gt;</code>ï¼Œä»£è¡¨å½“å‰æ‰§è¡Œçš„æºä»£ç æ–‡ä»¶ï¼ˆå…¶ä»–å¯å±•å¼€çš„åå­—è¯·å‚è§ <a href=\"https://yianwillis.github.io/vimcdoc/doc/eval.html#expand()\"><code>:help expand()</code></a>ï¼‰ã€‚</li>\n<li><code>:p</code> ç”¨æ¥å‘Šè¯‰ <code>expand</code>ï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°å®Œæ•´çš„è·¯å¾„ã€‚æ¯”å¦‚ï¼Œåœ¨æˆ‘çš„æœºå™¨ä¸Šï¼Œè¿™æ ·å±•å¼€çš„ç»“æœæ˜¯ <code>/Users/yongwei/.vim/pack/minpac/start/ycmconf/plugin/ycmconf.vim</code>ã€‚</li>\n<li><code>:h</code> ç”¨æ¥å‘Šè¯‰ <code>expand</code>ï¼Œæˆ‘ä»¬éœ€è¦å¤´éƒ¨ï¼Œå³å»æ‰è·¯å¾„çš„æœ€åéƒ¨åˆ†ã€‚æˆ‘ä¼šå¾—åˆ° <code>/Users/yongwei/.vim/pack/minpac/start/ycmconf/plugin</code>ã€‚</li>\n<li>ç¬¬äºŒæ¬¡ä½¿ç”¨ <code>:h</code>ï¼Œæˆ‘ä»¬å†æ¬¡å»æ‰è·¯å¾„çš„æœ€åéƒ¨åˆ†ï¼Œå³ <code>plugin</code>ã€‚æˆ‘ä¼šå¾—åˆ° <code>/Users/yongwei/.vim/pack/minpac/start/ycmconf</code>ã€‚</li>\n</ul><p>éšåï¼Œæˆ‘ä»¬æ‹¿è¿™ä¸ªè·¯å¾„è·Ÿ <code>'/ycm_extra_conf.py'</code> è¿›è¡Œæ‹¼æ¥ï¼Œå°±å¾—åˆ°äº† YCM å¯ä»¥çœ‹åˆ°çš„ ycm_extra_conf.py æ–‡ä»¶çš„è·¯å¾„ã€‚</p><p>è¿™ä¸ªæ’ä»¶çš„ä¸»ä½“åŠŸèƒ½åœ¨ ycm_extra_conf.py é‡Œã€‚é‰´äºè¿™æ˜¯ Python çš„ä»£ç ï¼Œè€Œä¸æ˜¯ Vim è„šæœ¬ï¼Œæˆ‘å°±ä¸å†è®²è§£äº†ã€‚ä½ å¦‚æœæœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªå·±çœ‹ä¸€ä¸‹ã€‚æ–‡ä»¶è™½ç„¶æ€»å…±è¦å¥½å‡ ç™¾è¡Œï¼Œä½†æ³¨é‡Šæ¯”è¾ƒå¤šï¼Œé€»è¾‘å…¶å®ä¸å¤æ‚ï¼›å¦‚æœä½ æ‡‚ Pythonï¼Œä¸€å®šå¯ä»¥ç†è§£é‡Œé¢çš„å†…å®¹ã€‚</p><h2>cscope_maps.vim</h2><p>ä½ ä¸€å®šè§‰å¾—ï¼Œä¸Šé¢è¿™ä¸ªè„šæœ¬å®åœ¨ä¹Ÿå¤ªå¤ªå¤ªç®€å•äº†å§â€¦â€¦</p><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸ªç¨å¤æ‚ç‚¹çš„ã€‚<a href=\"https://time.geekbang.org/column/article/277058\">æ‹“å±• 2</a> é‡Œæˆ‘ç»™å‡ºäº†ä¸€ä¸ªè‡ªå·±æ”¹è¿‡çš„ cscope_maps.vimï¼Œæˆ‘ä»¬ç°åœ¨å°±æ¥çœ‹çœ‹å®ƒçš„åŸå§‹ç‰ˆæœ¬ï¼Œç„¶åçœ‹ä¸€ä¸‹æ€ä¹ˆä¿®æ”¹å®ƒçš„è¡Œä¸ºã€‚</p><p>åŸå§‹ç‰ˆæœ¬åœ¨ <a href=\"http://cscope.sourceforge.net/cscope_maps.vim\">Cscope çš„ç½‘ç«™</a>ä¸Šã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ Vim è„šæœ¬ï¼Œåº”å½“ç›´æ¥æ”¾åˆ° plugin ç›®å½•ä¸‹ã€‚è™½ç„¶æ–‡ä»¶æ€»å…±æœ‰ä¸€ç™¾å¤šè¡Œï¼Œå€’æœ‰ä¸€å¤§åŠæ˜¯æ³¨é‡Šï¼›å®é™…ä»£ç è¡Œåªæœ‰ä¸‰åå‡ è¡Œã€‚æˆ‘ä»¬å¯ä»¥ç»†ç»†åœ°åˆ†æä¸€ä¸‹ï¼š</p><p>æœ€å¤–å›´ï¼Œæ˜¯ä¸€ä¸ªæ¡ä»¶è¯­å¥ï¼Œç¡®ä¿è¿™ä¸ªæ’ä»¶çš„å†…å®¹ä»…åœ¨ Vim æ”¯æŒ Cscope æ—¶å¾—åˆ°æ‰§è¡Œï¼š</p><pre><code class=\"language-vim\">if has(\"cscope\")\n    â€¦\nendif\n</code></pre><p>åœ¨æ¡ä»¶è¯­å¥é‡Œï¼Œæœ‰ä¸‰è¡Œæ˜¯è®¾ç½® Vim é€‰é¡¹çš„ï¼š</p><pre><code class=\"language-vim\">set cscopetag\nset csto=0\nset cscopeverbose\n</code></pre><p>æˆ‘ä»¬åœ¨ Vim å¸®åŠ©é‡Œå¯ä»¥æŸ¥åˆ°å®ƒä»¬çš„è¯¦ç»†è¯´æ˜ã€‚ç®€å•æ¥è¯´ï¼š</p><ul>\n<li>è®¾ç½® <code>cscopetag</code> ä½¿å¾—æˆ‘ä»¬åœ¨ä½¿ç”¨åŸå…ˆ tags ç›¸å…³çš„å‘½ä»¤æ—¶ä¼šåŒæ—¶æŸ¥æ‰¾ Cscope æ•°æ®åº“</li>\n<li>è®¾ç½® <code>csto</code> ä¸º 0 æ˜¯è®© Vim å…ˆæŸ¥æ‰¾ Cscope æ•°æ®åº“ï¼Œæ‰¾ä¸åˆ°æ‰æŸ¥æ‰¾ tags</li>\n<li>è®¾ç½® <code>cscopeverbose</code> æ˜¯è®© Vim åœ¨ä¹‹åæ·»åŠ  Cscope æ•°æ®åº“æ—¶ï¼Œå‘Šè¯‰ä½ ç»“æœæˆåŠŸä¸å¦</li>\n</ul><p>è®¾ç½®æœ€åè¿™ä¸ªé€‰é¡¹æ˜¯åœ¨ä¸‹é¢çš„è¯­å¥ä¹‹åï¼š</p><pre><code class=\"language-vim\">if filereadable(\"cscope.out\")\n    cs add cscope.out\nelseif $CSCOPE_DB != \"\"\n    cs add $CSCOPE_DB\nendif\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒVim ä¼šåœ¨å¯åŠ¨æ—¶æ‚„æ— å£°æ¯åœ°è¯•å›¾åŠ è½½å½“å‰ç›®å½•ä¸‹çš„ cscope.out æ•°æ®åº“æˆ–ç¯å¢ƒå˜é‡ <code>CSCOPE_DB</code> æŒ‡å®šçš„æ•°æ®åº“ï¼Œå¹¶ä¸”ä¸ä¼šæŠ¥å‘Šç»“æœã€‚</p><p>å‰©ä¸‹çš„ä»£ç å°±å…¨éƒ¨æ˜¯â€¦â€¦é”®æ˜ å°„äº†ã€‚æˆ‘ä»¬å°±çœ‹å…¶ä¸­çš„ä¸€ä¸ªï¼Œå…¶ä½™çš„éƒ½å¤§åŒå°å¼‚ï¼š</p><pre><code class=\"language-vim\">nmap &lt;C-\\&gt;s :cs find s &lt;C-R&gt;=expand(\"&lt;cword&gt;\")&lt;CR&gt;&lt;CR&gt;\n</code></pre><p>è¿™ä¸ªé”®æ˜ å°„æŠŠ <code>&lt;C-\\&gt;s</code> æ˜ å°„æˆäº†ä¸€ä¸ª <code>:cs find s â€¦</code> å‘½ä»¤ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯å‘½ä»¤çš„ååŠæˆªï¼š</p><ul>\n<li>è„šæœ¬é‡Œä½¿ç”¨ <code>&lt;C-R&gt;=â€¦&lt;CR&gt;</code> æ¥æ‰§è¡Œä¸€ä¸ª Vim è¡¨è¾¾å¼ï¼Œå¹¶æŠŠç»“æœå¡«åˆ°å‘½ä»¤é‡Œã€‚</li>\n<li>æˆ‘ä»¬åˆä¸€æ¬¡è§åˆ°äº† <code>expand</code> å‡½æ•°ã€‚è¿™ä¸€æ¬¡ï¼Œè¦å±•å¼€çš„æ˜¯ <code>&lt;cword&gt;</code>ï¼Œå³å½“å‰å…‰æ ‡ä¸‹çš„å•è¯ã€‚</li>\n<li>æ³¨æ„ç»“å°¾ä¸¤ä¸ª <code>&lt;CR&gt;</code> é‡Œç¬¬ä¸€ä¸ªæ˜¯ç»™ <code>&lt;C-R&gt;=</code> çš„ï¼Œç¬¬äºŒä¸ªæ‰æ˜¯æ‰§è¡Œå‘½ä»¤çš„å›è½¦é”®ã€‚</li>\n</ul><p>è®©æˆ‘æœ‰æ„è§çš„æ˜¯ä¸‹é¢è¿™æ ·çš„é”®æ˜ å°„ï¼š</p><pre><code class=\"language-vim\">nmap &lt;C-@&gt;s :scs find s &lt;C-R&gt;=expand(\"&lt;cword&gt;\")&lt;CR&gt;&lt;CR&gt;\n</code></pre><p>è¿™å„¿ç”¨ <code>&lt;C-@&gt;</code> ä»£è¡¨ Ctrl-ç©ºæ ¼ï¼Œè€Œè¿™ä¸ªç»„åˆé”®åœ¨å¾ˆå¤šç³»ç»Ÿä¸Šä¸å¯ç”¨ã€‚æ—¢ç„¶å·²ç»ä½¿ç”¨äº† Ctrl-\\ ä½œä¸º Cscope çš„ä¸“ç”¨èµ·å§‹é”®ï¼Œæˆ‘è§‰å¾—ç»§ç»­ç”¨ Shift-\\ å°±å¥½ã€‚ç”±äº <code>|</code> åœ¨ Vim é‡Œç”¨æ¥åˆ†éš”å¤šä¸ªè¯­å¥ï¼Œè¿™å„¿æˆ‘ä»¬è¦æ¢ä¸ªå†™æ³•ï¼Œæ”¹æˆï¼š</p><pre><code class=\"language-vim\">nmap &lt;bar&gt;s :scs find s &lt;C-R&gt;=expand(\"&lt;cword&gt;\")&lt;CR&gt;&lt;CR&gt;\n</code></pre><p>æˆ‘çš„å®Œæ•´ä¿®æ”¹è¿‡ç¨‹ï¼Œå¯ä»¥æŸ¥çœ‹ï¼š</p><p><a href=\"https://github.com/adah1972/cscope_maps.vim/commits/master\">https://github.com/adah1972/cscope_maps.vim/commits/master</a></p><p>æ€»çš„æ¥è¯´ï¼Œè¿™ä¹Ÿæ˜¯ä¸ªéå¸¸å°ã€éå¸¸è½»æ¾çš„ä¿®æ”¹ã€‚</p><h2>EchoFunc</h2><p>äº‹å®ä¸Šï¼Œå¤§éƒ¨åˆ†è¡Œä¸ºè‰¯å¥½çš„æ’ä»¶ä¼šå…è®¸ç”¨æˆ·é€šè¿‡ä¸€äº›å…¨å±€å˜é‡æ¥å®šåˆ¶é”®æ˜ å°„ä¹‹ç±»çš„è®¾å®šã€‚ä¸è¿‡ï¼Œå¯¹äºæ²¡æœ‰æä¾›è¿™ç§å®šåˆ¶æ€§çš„æ’ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±æ‰¾åˆ°ä»£ç é‡Œçš„é”®æ˜ å°„è¯­å¥ï¼Œæ‰‹å·¥ä¿®æ”¹ä¸€ä¸‹ï¼Œä¹Ÿæ˜¯ä¸€ç§å¯èƒ½å‘ç”Ÿçš„å¸¸è§æƒ…å†µã€‚æ¯”å¦‚ï¼Œ<a href=\"https://github.com/mbbill/echofunc\">EchoFunc</a> é‡ŒæŸ¥çœ‹ä¸‹ä¸€ä¸ªå’Œä¸Šä¸€ä¸ªå‡½æ•°çš„æŒ‰é”®åˆ†åˆ«å¯ä»¥ç”¨å…¨å±€å˜é‡ <code>g:EchoFuncKeyNext</code> å’Œ <code>g:EchoFuncKeyPrev</code> æ¥ä¿®æ”¹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ’ä»¶çš„æ–‡æ¡£é‡Œä¼šè¿›è¡Œè¯´æ˜ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æ’ä»¶é‡Œé€šè¿‡æœç´¢ <code>exists</code> å‡½æ•°æ¥æ‰¾åˆ°æ’ä»¶æä¾›å‡ºæ¥çš„å®šåˆ¶ç‚¹ã€‚</p><p>ä»¥ EchoFunc ä¸ºä¾‹ï¼Œå®ƒè™½ç„¶ç®€å•åˆ°æ²¡æœ‰æä¾›å¸®åŠ©æ–‡æ¡£ï¼Œä½†æ’ä»¶çš„ä¸»æ–‡ä»¶ï¼ˆafter/plugin/echofunc.vimï¼‰å¼€å¤´æœ‰å¤§æ®µçš„æ³¨é‡Šã€‚åŒæ—¶ï¼Œå®ƒæœ‰å¤§é‡çš„ <code>exists</code> çš„å‡½æ•°è°ƒç”¨ï¼Œæ¥æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»å®šä¹‰äº†æŸä¸€å…¨å±€å˜é‡æ¥å®šåˆ¶è¡Œä¸ºï¼š</p><pre><code class=\"language-vim\">if !exists(\"g:EchoFuncMaxBalloonDeclarations\")\n    let g:EchoFuncMaxBalloonDeclarations=20\nendif\n\nif !exists(\"g:EchoFuncKeyNext\")\n    if has (\"mac\")\n        let g:EchoFuncKeyNext='â‰ '\n    else\n        let g:EchoFuncKeyNext='&lt;M-=&gt;'\n    endif\nendif\n\nif !exists(\"g:EchoFuncKeyPrev\")\n    if has (\"mac\")\n        let g:EchoFuncKeyPrev='Â±'\n    else\n        let g:EchoFuncKeyPrev='&lt;M--&gt;'\n    endif\nendif\n</code></pre><p>åœ¨æˆ‘è¿™å„¿ç»™å‡ºçš„ä¸‰ä¸ªå…¨å±€å˜é‡çš„ç›¸å…³å®šä¹‰é‡Œï¼Œç¬¬ä¸€ä¸ªæ˜¯å¯¹èµ·æ³¡æç¤ºçš„æ•°é‡é™åˆ¶ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸‹ä¸€ä¸ªå‡½æ•°çš„é”®å®šä¹‰ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¸Šä¸€ä¸ªå‡½æ•°çš„é”®å®šä¹‰ã€‚åœ¨åä¸¤ä¸ªé”®å®šä¹‰é‡Œï¼Œè¿˜åˆ†å¹³å°ï¼ˆMac æˆ–é Macï¼‰è¿›è¡Œäº†ä¸åŒçš„è®¾ç½®ã€‚è¿™äº›éƒ½æ˜¯éå¸¸ç›´æ¥äº†å½“çš„ã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨ <code>EchoFuncKeyNext</code> ä¸Šé¢æŒ‰ä¸‹ <code>*</code> æ¥æœç´¢è¿™ä¸ªå˜é‡çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°å®ƒä»¬æ˜¯åœ¨å‡½æ•° <code>EchoFuncStart</code> é‡Œè¢«çœŸæ­£ä½¿ç”¨çš„ï¼š</p><pre><code class=\"language-vim\">if maparg(g:EchoFuncKeyNext, \"i\") == '' &amp;&amp; maparg(g:EchoFuncKeyPrev, \"i\") == ''\n    exec 'inoremap &lt;silent&gt; &lt;buffer&gt; ' . g:EchoFuncKeyNext . ' &lt;c-r&gt;=EchoFuncN()&lt;cr&gt;'\n    exec 'inoremap &lt;silent&gt; &lt;buffer&gt; ' . g:EchoFuncKeyPrev . ' &lt;c-r&gt;=EchoFuncP()&lt;cr&gt;'\nendif\n</code></pre><p>è¿™å„¿çš„ä»£ç è¯´çš„æ˜¯ï¼š</p><ul>\n<li>å¦‚æœ <code>g:EchoFuncKeyNext</code> å’Œ <code>g:EchoFuncKeyPrev</code> æè¿°çš„é”®æ˜ å°„ï¼ˆ<a href=\"https://yianwillis.github.io/vimcdoc/doc/eval.html#maparg()\"><code>:help maparg()</code></a>ï¼‰åœ¨æ’å…¥æ¨¡å¼ï¼ˆ<code>\"i\"</code>ï¼‰æ²¡æœ‰è¢«å ç”¨ï¼ˆ<code>== ''</code>ï¼‰çš„è¯ï¼Œé‚£æˆ‘ä»¬å°±æ‰§è¡Œï¼ˆ<code>exec</code>ï¼‰é’ˆå¯¹å½“å‰ç¼“å†²åŒºï¼ˆ<code>&lt;buffer&gt;</code>ï¼‰çš„æ’å…¥æ¨¡å¼é”®æ˜ å°„ï¼ˆ<code>inoremap</code>ï¼‰ï¼Œè®©å…¶å®‰é™åœ°ï¼ˆ<code>&lt;silent&gt;</code>ï¼‰æ‰§è¡Œï¼ˆ<code>&lt;c-r&gt;=</code>ï¼‰å‡½æ•°ä¸­çš„è¯­å¥ã€‚</li>\n</ul><p>æ³¨æ„ï¼Œåœ¨é”®æ˜ å°„ä¸­ä½¿ç”¨ <code>&lt;C-R&gt;=</code> æ¥æ‰§è¡Œè¯­å¥æ˜¯ä¸€ç§å¸¸ç”¨æŠ€å·§ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¸æ˜¯è¦è·å¾—å‡½æ•°è¿”å›çš„ç»“æœï¼ˆæ‰€ä»¥è¿™äº›å‡½æ•°é€šå¸¸è¿”å› <code>''</code>ï¼‰ï¼Œè€Œåªæ˜¯éœ€è¦æ‰§è¡Œä¸€äº›æŒ‡å®šçš„ä»£ç ï¼Œäº§ç”Ÿéœ€è¦çš„â€œå‰¯ä½œç”¨â€ã€‚åœ¨è¿™å„¿ï¼Œæˆ‘ä»¬éœ€è¦çš„å‰¯ä½œç”¨å°±æ˜¯é€‰æ‹©å‡½æ•°åˆ—è¡¨é‡Œçš„ä¸‹ä¸€é¡¹å’Œä¸Šä¸€é¡¹äº†ã€‚</p><p>EchoFunc ç®—æ˜¯ä¸€ä¸ªä¸­ç­‰è§„æ¨¡çš„ Vim æ’ä»¶ï¼Œä¹Ÿæœ‰å¥½å‡ ç™¾è¡Œä»£ç äº†ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦å…¨éƒ¨è®²ä¸€éã€‚å®ƒçš„åˆå§‹åŒ–è¿‡ç¨‹æ¯”è¾ƒæœ‰ç‰¹ç‚¹ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼š</p><pre><code class=\"language-vim\">augroup EchoFunc\n    autocmd BufRead,BufNewFile * call s:EchoFuncInitialize()\naugroup END\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¯»å…¥æ–‡ä»¶åï¼Œæˆ–åˆ›å»ºæ–°æ–‡ä»¶åï¼Œæ‰è°ƒç”¨ <code>s:EchoFuncInitialize()</code> è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>é‚£ <code>s:EchoFuncInitialize()</code> ç©¶ç«Ÿåšäº†äº›ä»€ä¹ˆå‘¢ï¼Ÿçœ‹ä¸‹é¢ï¼š</p><pre><code class=\"language-vim\">function! s:EchoFuncInitialize()\n    augroup EchoFunc\n        autocmd!\n        autocmd InsertLeave * call EchoFuncRestoreSettings()\n        autocmd BufRead,BufNewFile * call CheckedEchoFuncStart()\n        if has('gui_running')\n            menu    &amp;Tools.Echo\\ F&amp;unction.Echo\\ F&amp;unction\\ Start   :call EchoFuncStart()&lt;CR&gt;\n            menu    &amp;Tools.Echo\\ F&amp;unction.Echo\\ Function\\ Sto&amp;p    :call EchoFuncStop()&lt;CR&gt;\n        endif\n\n        if has(\"balloon_eval\")\n            autocmd BufRead,BufNewFile * call CheckedBalloonDeclarationStart()\n            if has('gui_running')\n                menu    &amp;Tools.Echo\\ Function.&amp;Balloon\\ Declaration\\ Start  :call BalloonDeclarationStart()&lt;CR&gt;\n                menu    &amp;Tools.Echo\\ Function.Balloon\\ Declaration\\ &amp;Stop   :call BalloonDeclarationStop()&lt;CR&gt;\n            endif\n        endif\n    augroup END\n\n    call CheckedEchoFuncStart()\n    if has(\"balloon_eval\")\n        call CheckedBalloonDeclarationStart()\n    endif\nendfunction\n</code></pre><p>æˆ‘ä¸‹é¢æ¦‚è¦è§£è¯´ä¸€ä¸‹ï¼š</p><ul>\n<li>åœ¨ EchoFunc è‡ªåŠ¨å‘½ä»¤ç»„é‡Œï¼Œæ‰§è¡Œ <code>autocmd!</code>ï¼Œæ¸…ç©ºå·²æœ‰çš„è‡ªåŠ¨å‘½ä»¤ï¼Œå³åˆšæ‰çš„ <code>call s:EchoFuncInitialize()</code> è¯­å¥ã€‚</li>\n<li>åœ¨ <code>InsertLeave</code>ï¼Œç¦»å¼€æ’å…¥æ¨¡å¼äº‹ä»¶é‡Œï¼Œè°ƒç”¨ <code>EchoFuncRestoreSettings</code> å‡½æ•°ï¼Œåœæ­¢å‡½æ•°å›æ˜¾ã€‚</li>\n<li>åœ¨è¯»å…¥æ–‡ä»¶æˆ–åˆ›å»ºæ–°æ–‡ä»¶æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦å¯ç”¨å‡½æ•°å›æ˜¾ã€‚</li>\n<li>åœ¨å›¾å½¢ç•Œé¢ä¸‹åˆ›å»ºå¯åœå‡½æ•°å›æ˜¾çš„èœå•é¡¹ã€‚</li>\n<li>å¦‚æœ Vim æ”¯æŒæ°”æ³¡æ˜¾ç¤ºï¼Œåœ¨è¯»å…¥æ–‡ä»¶æˆ–åˆ›å»ºæ–°æ–‡ä»¶æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦å¯ç”¨æ°”æ³¡å‡½æ•°å£°æ˜æç¤ºï¼Œå¹¶åœ¨å›¾å½¢ç•Œé¢ä¸‹åˆ›å»ºå¯åœæ°”æ³¡å‡½æ•°å£°æ˜æç¤ºçš„èœå•é¡¹ã€‚</li>\n<li>å¯¹å½“å‰æ–‡ä»¶ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦å¯ç”¨å‡½æ•°å›æ˜¾å’Œèµ·æ³¡å‡½æ•°å£°æ˜æç¤ºã€‚</li>\n</ul><p>æœ€åï¼Œå¦‚æœä½ å¥½å¥‡ä¸ºä»€ä¹ˆ EchoFunc é€‰æ‹©ä½¿ç”¨ after/plugin ç›®å½•è€Œä¸æ˜¯ plugin ç›®å½•ï¼Œåœ¨å®ƒçš„ Git æ—¥å¿—é‡Œæ˜¯æœ‰è¯´æ˜çš„ï¼š</p><blockquote>\n<p>1) fix key â€œ(â€ â€œ)â€ mapping conflict with other plugins:<br>\n&nbsp;<br>\nâ€‹     first, move plugin folder into after/ folder, so that echofunc will be load after most plugins have been loaded<br>\n&nbsp;<br>\nâ€‹     Second, if during initialization time, if it find â€œ(â€ or â€œ)â€ key have been mapped, it will try to append &lt;Plug&gt;EchofuncXX function to it.</p>\n</blockquote><p>å› ä¸ºå®ƒç”¨åˆ° <code>(</code> å’Œ <code>)</code> ä½œä¸ºé”®æ˜ å°„ï¼Œå®¹æ˜“å’Œå…¶ä»–æ’ä»¶å†²çªï¼Œå› æ­¤å®ƒä¼šæœ€ååŠ è½½ï¼Œå¹¶å°½é‡æŠŠè‡ªå·±é”®æ˜ å°„è¡¥å……è¿›å»ã€‚</p><p>å¯¹äºæ’ä»¶åŠŸèƒ½æœ¬èº«çš„ç‰¹æ®Šé€»è¾‘ï¼Œæˆ‘å°±ä¸è§£é‡Šå•¦ã€‚</p><h2>arm-syntax-vim</h2><p>ä»Šå¤©æœ€åä¸€ä¸ªæ’ä»¶æ ·ä¾‹ï¼Œæ˜¯æˆ‘æœ€è¿‘çš„ä¸€ä¸ªå®é™…éœ€æ±‚ã€‚ç”±äºæˆ‘å†™çš„ä»£ç éœ€è¦æœ€ç»ˆè·‘åœ¨ ARM å¹³å°ä¸Šï¼Œæˆ‘å¶å°”éœ€è¦æ£€æŸ¥ä¸€ä¸‹äº§ç”Ÿçš„ ARM æ±‡ç¼–ä»£ç ã€‚åœ¨ Vim çš„é»˜è®¤é…ç½®ä¸‹ï¼Œäº§ç”Ÿçš„æ±‡ç¼–ä»£ç æ•ˆæœä¸å¤ªç†æƒ³ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c0/04/c0865cfb19f614e6bc1fdaeca55b6504.png?wh=1142*990\" alt=\"FigX4.1\" title=\"ä½¿ç”¨ asm è¯­æ³•ç±»å‹æ˜¾ç¤ºçš„ ARM æ±‡ç¼–\"></p><p>è¿™é‡Œæœ€ç³Ÿç³•çš„åœ°æ–¹æ˜¯ï¼Œ<code>stmfd</code> é‚£è¡Œé‡Œçš„ <code>{r4, lr}</code> å±…ç„¶æ˜¾ç¤ºæˆäº†æ³¨é‡Šï¼Ÿæ˜¯å¯å¿ï¼Œå­°ä¸å¯å¿ï¼</p><p>è¿˜å¥½ï¼Œæˆ‘ç”¨ä¸ç€ä»å¤´å¼€å§‹è‡ªå·±æã€‚ç½‘ä¸Šç•¥åŠ æœç´¢ï¼Œæˆ‘å°±æ‰¾åˆ°äº† <a href=\"ARM9/arm-syntax-vim\">ARM9/arm-syntax-vim</a> è¿™ä¸ª Vim è„šæœ¬ï¼Œå¯ä»¥è·å¾—å¥½å¾—å¤šçš„æ•ˆæœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/02/b6/02c7aa2c55ec800d11935d7a810b0db6.png?wh=1142*990\" alt=\"FigX4.2\" title=\"ä½¿ç”¨ arm è¯­æ³•ç±»å‹æ˜¾ç¤ºçš„ ARM æ±‡ç¼–\"></p><p>ä¸è¿‡ï¼Œè¿™ä¸ªè„šæœ¬è¿˜æ˜¯ç¼ºäº†ç‚¹ä¸œè¥¿ï¼Œå®ƒåªåŒ…å«äº†è¯­æ³•æ–‡ä»¶ï¼Œä¸èƒ½æŠŠ GCC äº§ç”Ÿçš„ .s æ–‡ä»¶è¯†åˆ«ä¸ºå®ƒæ”¯æŒçš„ armã€armv4 å’Œ armv5 æ ¼å¼ã€‚æˆ‘è¦åšçš„å°±æ˜¯æ·»åŠ æ–‡ä»¶ç±»å‹è¯†åˆ«ï¼Œè®© Vim æŠŠ ARM çš„æ±‡ç¼–æ–‡ä»¶è¯†åˆ«æˆåˆé€‚çš„ ARM æ ¼å¼ã€‚</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/271208\">ç¬¬ 8 è®²</a>è®¨è®ºæ–‡ä»¶ç±»å‹åˆ¤æ–­æ—¶ï¼Œæˆ‘å·²ç»è¯´è¿‡ï¼Œåœ¨ Vim é‡Œåç¼€ä¸æ˜¯åˆ¤æ–­æ–‡ä»¶ç±»å‹çš„å”¯ä¸€ä¾æ®ã€‚æ—¢ç„¶æˆ‘æ‡’åˆ°ä¸æ„¿æ„åœ¨æ±‡ç¼–æ–‡ä»¶é‡ŒåŠ å¸®åŠ©è¯†åˆ«çš„æ–‡æœ¬ï¼Œæˆ‘å½“ç„¶ä¹Ÿæ‡’å¾—å»æ”¹æ±‡ç¼–æ–‡ä»¶çš„åç¼€äº†ã€‚GCC äº§ç”Ÿçš„æ±‡ç¼–ä»£ç é‡Œçš„ä¸€äº›ç‰¹å®šæ ‡è¯†ï¼Œä¹Ÿä½¿å¾—æˆ‘åˆ©ç”¨æ–‡æœ¬åˆ¤æ–­å˜å¾—ç›¸å½“å®¹æ˜“ï¼šå–å†³äºä¸åŒçš„ç¯å¢ƒï¼Œæ±‡ç¼–ä¸­ä¸€èˆ¬ä¼šå‡ºç° <code>.arch arm</code> å’Œ <code>.cpu arm</code> è¿™æ ·çš„æ˜ç¡®è¡Œã€‚</p><p>è¦è®© Vim è¿›è¡Œæ–‡ä»¶ç±»å‹åˆ¤æ–­ï¼Œæ ‡å‡†åšæ³•æ˜¯åœ¨ ftdetect ç›®å½•ä¸‹åŠ å…¥åˆ¤æ–­è„šæœ¬ã€‚æ—¢ç„¶æˆ‘ä»¬çŸ¥é“åç¼€æ˜¯ .sï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æˆ‘ä¼šå†™å…¥ï¼š</p><pre><code class=\"language-vim\">au BufRead *.[sS]  call arm#ft#FTarm()\n</code></pre><p>ä¸ºäº†åŠ å¿« Vim çš„å¯åŠ¨é€Ÿåº¦ï¼ŒçœŸæ­£æ£€æµ‹éœ€è¦çš„ä»£ç ä¸€èˆ¬æ¨èæ”¾åˆ° autoload ç›®å½•ä¸‹ã€‚è¿™æ˜¯ Vim çš„ä¸“é—¨æœºåˆ¶ï¼Œå…è®¸è„šæœ¬â€œæŒ‰éœ€â€åŠ è½½ï¼Œä»…åœ¨ç”¨åˆ°å‡½æ•°çš„æ—¶å€™ï¼Œæ‰è½½å…¥å‡½æ•°çš„å®šä¹‰ï¼ˆ<a href=\"https://yianwillis.github.io/vimcdoc/doc/eval.html#autoload\"><code>:help autoload</code></a>ï¼‰ã€‚åœ¨ä¸Šé¢çš„å†™æ³•ä¸‹é¢ï¼Œå½“ Vim è¯»å…¥åç¼€ä¸º .s æˆ– .S çš„æ–‡ä»¶æ—¶ï¼ŒVim ä¼šè‡ªåŠ¨åœ¨ autoload/arm ç›®å½•ä¸‹è½½å…¥ ft.vimï¼Œç„¶åè°ƒç”¨å…¶ä¸­çš„ <code>FTarm</code> å‡½æ•°ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ ft.vim æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶ä¸å¤§ï¼Œå®Œæ•´å†…å®¹å±•ç¤ºå¦‚ä¸‹ï¼š</p><pre><code class=\"language-vim\">let s:cpo_save = &amp;cpo\nset cpo&amp;vim\n\nfunction! arm#ft#FTarm()\n  let head = ' '.getline(1).' '.getline(2).' '.getline(3).' '.getline(4).\n\t\\' '.getline(5).' '\n  \" Can't use setf, as we need to overrule the default filetype setting\n  if matchstr(head, '\\s\\.arch\\s\\+armv4') != ''\n    set filetype=armv4\n  elseif matchstr(head, '\\s\\.arch\\s\\+armv5') != ''\n    set filetype=armv5\n  elseif matchstr(head, '\\s\\.arch\\s\\+arm') != ''\n    set filetype=arm\n  elseif matchstr(head, '\\s\\.cpu\\s\\+arm') != ''\n    set filetype=arm\n  endif\nendfunction\n\nlet &amp;cpo = s:cpo_save\nunlet s:cpo_save\n</code></pre><p>å¼€å¤´å’Œç»“å°¾çš„å››è¡Œå±äº Vim è„šæœ¬çš„æ ‡å‡†æ¨¡æ¿å†™æ³•ï¼šè¿›å…¥è„šæœ¬æ—¶ä¿å­˜å…¼å®¹æ€§é€‰é¡¹ï¼ˆ<a href=\"https://yianwillis.github.io/vimcdoc/doc/options.html#'cpoptions'\"><code>:help 'cpoptions'</code></a>ï¼‰çš„å½“å‰å€¼ï¼Œç„¶åæ¢å¤å…¶ä¸ºé»˜è®¤å€¼ï¼Œå…å¾—å…¶ä»–åœ°æ–¹çš„è®¾ç½®å½±å“å¯¹è„šæœ¬çš„è§£é‡Šï¼›é€€å‡ºæ—¶åˆ™æ¢å¤åŸæ¥ä¿å­˜çš„å…¼å®¹æ€§é€‰é¡¹å€¼ã€‚</p><p>ä¸­é—´ä¸»ä½“éƒ¨åˆ†å°±ä¸€ä¸ªå‡½æ•°ï¼Œåšçš„äº‹æƒ…ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠæ–‡ä»¶çš„å¤´äº”è¡Œå†…å®¹æ‹¼åˆ°ä¸€èµ·ï¼Œç„¶åçœ‹èƒ½ä¸èƒ½æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„â€œ.archâ€å’Œâ€œ.cpuâ€è¯­å¥ã€‚æ‰¾åˆ°çš„è¯ï¼Œå°±è®¾ç½®åˆé€‚çš„æ–‡ä»¶ç±»å‹ï¼›æ‰¾ä¸åˆ°ï¼Œå°±ä¸åšå¤„ç†ï¼Œç•™ç»™å…¶ä»–çš„ Vim è„šæœ¬æ¥ç»§ç»­åˆ¤æ–­ã€‚</p><p>è¿™å„¿å”¯ä¸€æ¯”è¾ƒç‰¹åˆ«ç‚¹çš„åœ°æ–¹æ˜¯ï¼Œä¸€èˆ¬è®¾ç½®æ–‡ä»¶ç±»å‹æ¨èä½¿ç”¨ <code>:setfiletype</code> å‘½ä»¤ï¼Œå®ƒä¼šé¿å…é‡å¤è®¾ç½®ï¼Œåœ¨ä¸€æ¬¡ Vim çš„è‡ªåŠ¨äº‹ä»¶è§¦å‘è¿‡ç¨‹ä¸­åªæ‰§è¡Œä¸€æ¬¡ã€‚å¯¹äºæˆ‘ä»¬å½“å‰çš„ç›®çš„ï¼Œè¿™æ˜¯ä¸å¤Ÿçš„ï¼šå› ä¸ºåœ¨æˆ‘ä»¬çš„ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œå½“å‰ç¼“å†²åŒºä¸€èˆ¬å·²ç»è¢«ç³»ç»Ÿçš„è‡ªåŠ¨å‘½ä»¤è®¾ç½®è¿‡ç±»å‹äº†ã€‚å…·ä½“æ¥è¯´ï¼Œæ˜¯è¿è¡Œæ”¯æŒæ–‡ä»¶é‡Œçš„ autoload/dist/ft.vim é‡Œçš„ <code>dist#ft#FTasm</code> å‡½æ•°ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿™å„¿éœ€è¦å¼ºè¡Œè¦†ç›–å·²ç»è®¾ç½®çš„æ–‡ä»¶ç±»å‹ï¼Œç”¨ <code>set filetype=â€¦</code> å°±å¯ä»¥åšåˆ°ã€‚è¦æ³¨æ„ï¼Œä»…åœ¨ä½ å¾ˆæœ‰ä¿¡å¿ƒä½ è®¾ç½®çš„ç±»å‹æ­£ç¡®æ—¶æ‰å¯ä»¥è¿™ä¹ˆåšï¼Œå¦åˆ™ï¼Œä½ å¯èƒ½ä¼šå¹²æ‰°å…¶ä»–æ’ä»¶çš„ç»“æœã€‚</p><p>è¿™æ ·ï¼Œæˆ‘å°±åšåˆ°äº†åœ¨ç”¨ Vim æ‰“å¼€ GCC äº§ç”Ÿçš„ ARM æ±‡ç¼–æ–‡ä»¶æ—¶ï¼Œèƒ½è‡ªåŠ¨æ£€æµ‹å¹¶åº”ç”¨åˆé€‚çš„ arm è¯­æ³•ã€‚å®Œæ•´çš„ä»£ç å¯ä» <a href=\"adah1972/arm-syntax-vim\">adah1972/arm-syntax-vim</a> ä¸‹è½½ã€‚</p><h2>å†…å®¹å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬åˆ†æäº†å››ä¸ªå¤§å°ä¸åŒçš„ Vim è„šæœ¬ï¼Œå¹¶å±•ç¤ºäº†å¸¸è§çš„ Vim è„šæœ¬ç”¨æ³•ã€‚æˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼š</p><ul>\n<li>Vim é‡Œä¸»è¦æ”¾ç½®æ— æ¡ä»¶æ‰§è¡Œè„šæœ¬çš„ç›®å½•æ˜¯ pluginã€‚</li>\n<li><code>exists</code> ã€<code>expand</code> å’Œ <code>has</code> ææ€•æ˜¯ Vim é‡Œæœ€é‡è¦çš„å‡½æ•°ï¼Œå¸¸ç”¨æ³•éœ€è¦ç‰¢ç‰¢æŒæ¡ã€‚</li>\n<li>å¥½çš„ Vim è„šæœ¬ä¸€èˆ¬ä¼šé€šè¿‡å…¨å±€å˜é‡å…è®¸ç”¨æˆ·å®šåˆ¶éƒ¨åˆ†è¡Œä¸ºï¼Œå¦‚é”®æ˜ å°„ï¼›Vim è„šæœ¬é‡Œé¢é€šè¿‡ <code>exists</code> å‡½æ•°æ¥æ£€æµ‹ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ã€‚</li>\n<li>ä¸€èˆ¬æ¥è¯´ï¼Œæ’ä»¶ä¼šä½¿ç”¨è‡ªå·±çš„åå­—å¼€å§‹è‡ªå·±çš„è‡ªåŠ¨å‘½ä»¤ç»„ï¼Œè¿™æ ·æ¯”è¾ƒä¾¿äºç®¡ç†ï¼ŒåŒ…æ‹¬ç»Ÿä¸€æ¸…é™¤ã€‚</li>\n<li><code>after</code> ç›®å½•ä¸‹çš„å†…å®¹ä¼šæ™šäºå…¶ä»–ç›®å½•åŠ è½½ã€‚</li>\n<li><code>ftdetect</code> ç›®å½•ä¸‹ä¸€èˆ¬æ”¾ç½®ç”¨æ¥æ£€æµ‹æ–‡ä»¶ç±»å‹çš„è„šæœ¬ã€‚</li>\n<li><code>autoload</code> ç›®å½•ä¸“é—¨æ”¾ç½®å»¶è¿ŸåŠ è½½çš„è„šæœ¬ã€‚</li>\n</ul><h2>è¯¾åç»ƒä¹ </h2><p>è¯·é€‰æ‹©ä¸€ä¸ªä½ å¸¸ç”¨çš„æ’ä»¶ï¼ˆå¦‚ nerdtree å’Œ undotreeï¼‰ï¼Œåˆ†æå®ƒçš„ä¸»ä½“ç»“æ„ï¼Œçœ‹ä¸€ä¸‹å®ƒä½¿ç”¨äº†å“ªäº›ä¸åŒçš„ç›®å½•ï¼Œåˆ†æˆå‡ ä¸ªä¸»è¦çš„æ¨¡å—ï¼Œæä¾›äº†å“ªäº›å‘½ä»¤ï¼Œåˆç»™ç”¨æˆ·ç•™å‡ºäº†å“ªäº›å®šåˆ¶ç‚¹ã€‚</p><p>å¦‚æœæœ‰ä»»ä½•çš„é—®é¢˜å’Œæƒ³æ³•ï¼Œè¯·ç•™è¨€å’Œæˆ‘äº¤æµã€‚æˆ‘ä»¬ä¸‹ä¸€è®²å†è§ã€‚</p>","neighbors":{"left":{"article_title":"æ‹“å±•3ï½œPython ç¨‹åºå‘˜çš„ Vim å·¥ä½œç¯å¢ƒï¼šå®Œæ•´çš„ Python å¼€å‘ç¯å¢ƒ","id":278870},"right":{"article_title":"æ‹“å±•5 | å…¶ä»–æ’ä»¶å’ŒæŠ€å·§ï¼šå´å’ç‚œçš„ç®±åº•ç§è—","id":282412}},"comments":[{"had_liked":false,"id":245755,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1599041518,"is_pvip":false,"replies":[{"id":"90403","content":"æˆ‘è§‰å¾—ä½ å¾ˆå‰å®³å•Šï¼Œè‡³å°‘å­¦ä¹ çš„åŠ¨åŠ›æ¯”å¹´è½»äººéƒ½è¶³ï¼ˆå¦‚æœä½ çœŸç§°å¾—ä¸Šâ€œå¹´çºªå¤§äº†â€ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1599098903,"ip_address":"","comment_id":245755,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5894008814","product_id":100055801,"comment_content":"éš¾å¾—æœ‰ä¸€å›`ä¸€è¨€ä¸åˆå°±çœ‹æºç `çš„å‹‡æ°”.<br>è™½ç„¶å¹³å¸¸ä¹Ÿçœ‹ä¸å¤ªæ‡‚,ä½†å¯ä»¥åŠ è°ƒè¯•æ—¥å¿—,çŸ¥é“è¿è¡Œçš„çŠ¶æ€.<br>å¶å°”æ”¹æ”¹äº†è¿˜èƒ½ç«‹é©¬çœ‹çœ‹æ•ˆæœ.<br><br>ç”±äºæˆ‘èµ·æ­¥æ™š,ç°åœ¨å¹´çºªä¹Ÿå¤§äº†,å®åœ¨æ˜¯æ²¡ç²¾åŠ›é’»ç ”è¿™ä¸ªè¯­è¨€äº†.<br>ç¾¡æ…•å’Œæ„Ÿæ¿€å“ªäº›æŒç»­æä¾›å’Œæ”¹è¿›vimæ’ä»¶çš„ä½œè€…ä»¬.<br>","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504980,"discussion_content":"æˆ‘è§‰å¾—ä½ å¾ˆå‰å®³å•Šï¼Œè‡³å°‘å­¦ä¹ çš„åŠ¨åŠ›æ¯”å¹´è½»äººéƒ½è¶³ï¼ˆå¦‚æœä½ çœŸç§°å¾—ä¸Šâ€œå¹´çºªå¤§äº†â€ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599098903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303003,"discussion_content":"ç›¸æ¯”å¾ˆå¤šä¸“æ çš„è€å¸ˆæ¥è¯´,æˆ‘è‚¯å®šç®—æ˜¯å¹´è½»äº†çš„.ğŸ˜\næˆ‘æœ€è¿‘è§£å†³ä¸€ä¸ªé—®é¢˜,æœç´¢åˆ°çš„è¿˜æ˜¯é™¶è¾‰è€å¸ˆ6å¹´å‰å†™çš„æ–‡ç« .\n\næˆ‘åœ¨ç¬¬ä¸€å®¶å…¬å¸å¹²äº†åå¹´,æœŸé—´ä¹Ÿåšäº†å¾ˆä¹…çš„å’¸é±¼.æ‰€ä»¥æŠ€æœ¯ä¸Šæ²¡å•¥ç§¯ç´¯å’Œé•¿è¿›.\næ¥è§¦äº†æå®¢æ—¶é—´å,æ‰è§‰å¯Ÿåˆ°ä¸ªäººèƒ½åŠ›ä¸è¡Œä¸šæ°´å¹³ç›¸å·®ç”šè¿œ.\nåœ¨æå®¢æ—¶é—´å­¦ä¹ äº†ä¸€å¹´å,é™è–ªè·³æ§½åˆ°äº†ç°åœ¨çš„å•ä½.ç°åœ¨ä¹Ÿå¹²äº†ä¸€å¹´å¤šäº†.\nè¿™æœŸé—´çš„æˆé•¿åº”è¯¥è¿˜æ˜¯è›®å¤§çš„.\næˆ‘ç°åœ¨çš„ç›´å±é¢†å¯¼éƒ½æ¯”æˆ‘å°.\n\né©¬ä¸Šå°±è¦åˆ°35çš„åäº†,å†ä¸åŠªåŠ›çœŸçš„ä¸è¡Œäº†.\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599111185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303009,"discussion_content":"35 è¿˜æ²¡åˆ°ã€‚å¤ªå¹´è½»äº†ï¼Œæ¯”æˆ‘å°ä¸€è½®ä»¥ä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599112965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":303003,"ip_address":""},"score":303009,"extra":""},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":303062,"discussion_content":"ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599126899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":303009,"ip_address":""},"score":303062,"extra":""}]}]},{"had_liked":false,"id":256116,"user_name":"ç€šæµ·æ˜Ÿå°˜","can_delete":false,"product_type":"c1","uid":1024461,"ip_address":"","ucode":"90F418299EA3BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/cd/2c513481.jpg","comment_is_top":false,"comment_ctime":1603531057,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603531057","product_id":100055801,"comment_content":"åŸæ¥æ’ä»¶æ˜¯è¿™ä¹ˆå·¥ä½œçš„ï¼Œä¹‹å‰è¿˜å¥½å¥‡ä»–ä»¬æ˜¯å¦‚ä½•æ•´åˆè¿›æ¥çš„ï¼Œå¯ç®—æŠ“åˆ°å¤§æ¦‚äº†ï½","like_count":0},{"had_liked":false,"id":245932,"user_name":"è€ç‹","can_delete":false,"product_type":"c1","uid":2147274,"ip_address":"","ucode":"86BE7C68CFFFAF","user_header":"https://static001.geekbang.org/account/avatar/00/20/c3/ca/9ffef865.jpg","comment_is_top":false,"comment_ctime":1599114565,"is_pvip":false,"replies":[{"id":"90430","content":"è¯·ç»™å‡ºï¼š<br><br>ä½¿ç”¨çš„ç¼–è¯‘å™¨<br>ä½¿ç”¨çš„ makeprg é€‰é¡¹æ•°å€¼<br>ä½¿ç”¨çš„ errorformat é€‰é¡¹æ•°å€¼<br>å«æ–‡ä»¶åçš„é”™è¯¯ä¿¡æ¯æ ·ä¾‹<br><br>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ MSVCï¼Œåˆ™è¯·ç›´æ¥å‚ç…§ç¬¬ 10 è®²é…ç½® errorformat å³å¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1599147924,"ip_address":"","comment_id":245932,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599114565","product_id":100055801,"comment_content":"ä½¿ç”¨quickfixæ‰“å¼€makeå‡ºé”™çš„æ–‡ä»¶è·¯å¾„ï¼Œå±å¹•æ˜¯ç©ºç™½çš„ï¼Œæ˜æ˜¾æ˜¯æ‰“å¼€çš„è·¯å¾„é”™äº†ï¼Œè¯·é—®æ€ä¹ˆèƒ½é…ç½®æ‰“å¼€å‡ºé”™æ–‡ä»¶çš„è·¯å¾„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505013,"discussion_content":"è¯·ç»™å‡ºï¼š\n\nä½¿ç”¨çš„ç¼–è¯‘å™¨\nä½¿ç”¨çš„ makeprg é€‰é¡¹æ•°å€¼\nä½¿ç”¨çš„ errorformat é€‰é¡¹æ•°å€¼\nå«æ–‡ä»¶åçš„é”™è¯¯ä¿¡æ¯æ ·ä¾‹\n\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ MSVCï¼Œåˆ™è¯·ç›´æ¥å‚ç…§ç¬¬ 10 è®²é…ç½® errorformat å³å¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599147924,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}