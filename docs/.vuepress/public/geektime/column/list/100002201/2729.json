{"id":2729,"title":"35 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼ˆ6ï¼‰- é¢å‘å¯¹è±¡ç¼–ç¨‹","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆçš“ï¼Œç½‘åå·¦è€³æœµè€—å­ã€‚</p>\n<p>å‰é¢æˆ‘ä»¬è°ˆäº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œå‡½æ•°å¼ç¼–ç¨‹æ€»ç»“èµ·æ¥å°±æ˜¯æŠŠä¸€äº›åŠŸèƒ½æˆ–é€»è¾‘ä»£ç é€šè¿‡å‡½æ•°æ‹¼è£…æ–¹å¼æ¥ç»„ç»‡çš„ç©æ³•ã€‚è¿™å…¶ä¸­æ¶‰åŠæœ€å¤šçš„æ˜¯å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ç¼–ç¨‹ä¸­çš„ä»£ç é€»è¾‘ã€‚ä½†æˆ‘ä»¬çŸ¥é“ï¼Œä»£ç ä¸­è¿˜æ˜¯éœ€è¦å¤„ç†æ•°æ®çš„ï¼Œè¿™äº›å°±æ˜¯æ‰€è°“çš„â€œçŠ¶æ€â€ï¼Œå‡½æ•°å¼ç¼–ç¨‹éœ€è¦æˆ‘ä»¬å†™å‡ºæ— çŠ¶æ€çš„ä»£ç ã€‚</p>\n<p>è€Œè¿™å¤©ä¸‹å¹¶ä¸å­˜åœ¨æ²¡æœ‰çŠ¶æ€æ²¡æœ‰æ•°æ®çš„ä»£ç ï¼Œå¦‚æœå‡½æ•°å¼ç¼–ç¨‹ä¸å¤„ç†çŠ¶æ€è¿™äº›ä¸œè¥¿ï¼Œé‚£ä¹ˆï¼ŒçŠ¶æ€ä¼šæ”¾åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿæ€»æ˜¯éœ€è¦ä¸€ä¸ªåœ°æ–¹æ”¾è¿™äº›æ•°æ®çš„ã€‚</p>\n<p>å¯¹äºçŠ¶æ€å’Œæ•°æ®çš„å¤„ç†ï¼Œæˆ‘ä»¬æœ‰å¿…è¦æä¸€ä¸‹â€œé¢å‘å¯¹è±¡ç¼–ç¨‹â€ï¼ˆObject-oriented programmingï¼ŒOOPï¼‰è¿™ä¸ªç¼–ç¨‹èŒƒå¼äº†ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œ<strong>é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æœ‰ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿å’Œå¤šæ€</strong>ã€‚</p>\n<p>é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¸€ç§å…·æœ‰å¯¹è±¡æ¦‚å¿µçš„ç¨‹åºç¼–ç¨‹èŒƒå‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§ç¨‹åºå¼€å‘çš„æŠ½è±¡æ–¹é’ˆï¼Œå®ƒå¯èƒ½åŒ…å«æ•°æ®ã€å±æ€§ã€ä»£ç ä¸æ–¹æ³•ã€‚å¯¹è±¡åˆ™æŒ‡çš„æ˜¯ç±»çš„å®ä¾‹ã€‚å®ƒå°†å¯¹è±¡ä½œä¸ºç¨‹åºçš„åŸºæœ¬å•å…ƒï¼Œå°†ç¨‹åºå’Œæ•°æ®å°è£…å…¶ä¸­ï¼Œä»¥æé«˜è½¯ä»¶çš„å¯é‡ç”¨æ€§ã€çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå¯¹è±¡é‡Œçš„ç¨‹åºå¯ä»¥è®¿é—®åŠä¿®æ”¹å¯¹è±¡ç›¸å…³è”çš„æ•°æ®ã€‚åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹é‡Œï¼Œè®¡ç®—æœºç¨‹åºä¼šè¢«è®¾è®¡æˆå½¼æ­¤ç›¸å…³çš„å¯¹è±¡ã€‚</p>\n<p>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡å¯ä»¥çœ‹ä½œä¸€ç§åœ¨ç¨‹åºä¸­åŒ…å«å„ç§ç‹¬ç«‹è€Œåˆäº’ç›¸è°ƒç”¨çš„å¯¹è±¡çš„æ€æƒ³ï¼Œè¿™ä¸ä¼ ç»Ÿçš„æ€æƒ³åˆšå¥½ç›¸åï¼šä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡ä¸»å¼ å°†ç¨‹åºçœ‹ä½œä¸€ç³»åˆ—å‡½æ•°çš„é›†åˆï¼Œæˆ–è€…ç›´æ¥å°±æ˜¯ä¸€ç³»åˆ—å¯¹è®¡ç®—æœºä¸‹è¾¾çš„æŒ‡ä»¤ã€‚é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½åº”è¯¥èƒ½å¤Ÿæ¥å—æ•°æ®ã€å¤„ç†æ•°æ®å¹¶å°†æ•°æ®ä¼ è¾¾ç»™å…¶å®ƒå¯¹è±¡ï¼Œå› æ­¤å®ƒä»¬éƒ½å¯ä»¥è¢«çœ‹ä½œä¸€ä¸ªå°å‹çš„â€œæœºå™¨â€ï¼Œå³å¯¹è±¡ã€‚</p>\n<p>ç›®å‰å·²ç»è¢«è¯å®çš„æ˜¯ï¼Œé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ¨å¹¿äº†ç¨‹åºçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå¹¶ä¸”åœ¨å¤§å‹é¡¹ç›®è®¾è®¡ä¸­å¹¿ä¸ºåº”ç”¨ã€‚æ­¤å¤–ï¼Œæ”¯æŒè€…å£°ç§°é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¦æ¯”ä»¥å¾€çš„åšæ³•æ›´åŠ ä¾¿äºå­¦ä¹ ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿè®©äººä»¬æ›´ç®€å•åœ°è®¾è®¡å¹¶ç»´æŠ¤ç¨‹åºï¼Œä½¿å¾—ç¨‹åºæ›´åŠ ä¾¿äºåˆ†æã€è®¾è®¡ã€ç†è§£ã€‚</p>\n<p>ç°åœ¨ï¼Œå‡ ä¹æ‰€æœ‰çš„ä¸»æµè¯­è¨€éƒ½æ”¯æŒé¢å‘å¯¹è±¡ï¼Œæ¯”å¦‚ï¼šCommon Lispã€Pythonã€C++ã€Objective-Cã€Smalltalkã€Delphiã€Javaã€Swiftã€C#ã€Perlã€Rubyä¸PHPç­‰ã€‚</p>\n<p>è¯´èµ·é¢å‘å¯¹è±¡ï¼Œå°±ä¸å¾—ä¸æç”±Erich Gammaã€Richard Helmã€Ralph Johnsonå’ŒJohn Vlissidesåˆä½œå‡ºç‰ˆçš„ã€Š<a href=\"https://book.douban.com/subject/1052241/\">è®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€</a>ã€‹ï¼ˆDesign Patterns - Elements of Reusable Object-Oriented Softwareï¼‰ä¸€ä¹¦ï¼Œåœ¨æ­¤ä¹¦ä¸­å…±æ”¶å½•äº†23ç§è®¾è®¡æ¨¡å¼ã€‚</p>\n<!-- [[[read_end]]] -->\n<p>è¿™æœ¬ä¹¦çš„23ä¸ªç»å…¸çš„è®¾è®¡æ¨¡å¼ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯è¯´äº†ä¸¤ä¸ªé¢å‘å¯¹è±¡çš„æ ¸å¿ƒç†å¿µï¼š</p>\n<ul>\n<li><strong>â€œProgram to an â€˜interfaceâ€™, not an â€˜implementationâ€™.â€</strong>\n<ul>\n<li>ä½¿ç”¨è€…ä¸éœ€è¦çŸ¥é“æ•°æ®ç±»å‹ã€ç»“æ„ã€ç®—æ³•çš„ç»†èŠ‚ã€‚</li>\n<li>ä½¿ç”¨è€…ä¸éœ€è¦çŸ¥é“å®ç°ç»†èŠ‚ï¼Œåªéœ€è¦çŸ¥é“æä¾›çš„æ¥å£ã€‚</li>\n<li>åˆ©äºæŠ½è±¡ã€å°è£…ã€åŠ¨æ€ç»‘å®šã€å¤šæ€ã€‚</li>\n<li>ç¬¦åˆé¢å‘å¯¹è±¡çš„ç‰¹è´¨å’Œç†å¿µã€‚</li>\n</ul>\n</li>\n<li><strong>â€œFavor â€˜object compositionâ€™ over â€˜class inheritanceâ€™.â€</strong>\n<ul>\n<li>ç»§æ‰¿éœ€è¦ç»™å­ç±»æš´éœ²ä¸€äº›çˆ¶ç±»çš„è®¾è®¡å’Œå®ç°ç»†èŠ‚ã€‚</li>\n<li>çˆ¶ç±»å®ç°çš„æ”¹å˜ä¼šé€ æˆå­ç±»ä¹Ÿéœ€è¦æ”¹å˜ã€‚</li>\n<li>æˆ‘ä»¬ä»¥ä¸ºç»§æ‰¿ä¸»è¦æ˜¯ä¸ºäº†ä»£ç é‡ç”¨ï¼Œä½†å®é™…ä¸Šåœ¨å­ç±»ä¸­éœ€è¦é‡æ–°å®ç°å¾ˆå¤šçˆ¶ç±»çš„æ–¹æ³•ã€‚</li>\n<li>ç»§æ‰¿æ›´å¤šçš„åº”è¯¥æ˜¯ä¸ºäº†å¤šæ€ã€‚</li>\n</ul>\n</li>\n</ul>\n<h1>ç¤ºä¾‹ä¸€ï¼šæ‹¼è£…å¯¹è±¡</h1>\n<p>å¥½ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹çš„æè¿°ï¼š</p>\n<ul>\n<li><strong>å››ä¸ªç‰©ä½“</strong>ï¼šæœ¨å¤´æ¡Œå­ã€æœ¨å¤´æ¤…å­ã€å¡‘æ–™æ¡Œå­ã€å¡‘æ–™æ¤…å­</li>\n<li><strong>å››ä¸ªå±æ€§</strong>ï¼šç‡ƒç‚¹ã€å¯†åº¦ã€ä»·æ ¼ã€é‡é‡</li>\n</ul>\n<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥è®¾è®¡æˆ‘ä»¬çš„ç±»å‘¢ï¼Ÿ</p>\n<p>å‚çœ‹ä¸‹å›¾ï¼š</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/31/1d/312b75985fa6a969084f7180efc2861d.jpg?wh=2109x1260\" alt=\"\" /></p>\n<ul>\n<li>å›¾çš„å·¦è¾¹æ˜¯â€œæè´¨ç±»â€ Materialã€‚å…¶å±æ€§æœ‰ç‡ƒç‚¹å’Œå¯†åº¦ã€‚</li>\n<li>å›¾çš„å³è¾¹æ˜¯â€œå®¶å…·ç±»â€ Furnitureã€‚å…¶å±æ€§æœ‰ä»·æ ¼å’Œä½“ç§¯ã€‚</li>\n<li>åœ¨Furnitureä¸­è€¦åˆäº†Materialã€‚è€Œå…·ä½“çš„Materialæ˜¯Woodè¿˜æ˜¯Plasticï¼Œè¿™åœ¨æ„é€ å¯¹è±¡çš„æ—¶å€™æ³¨å…¥åˆ°Furnitureé‡Œå°±å¥½äº†ã€‚</li>\n<li>è¿™æ ·ï¼Œåœ¨å®¶å…·ç±»ä¸­ï¼Œé€šè¿‡ææ–™çš„å¯†åº¦å±æ€§å’Œå®¶å…·çš„ä½“ç§¯å±æ€§å°±å¯ä»¥è®¡ç®—å‡ºé‡é‡å±æ€§ã€‚</li>\n</ul>\n<p>è¿™æ ·è®¾è®¡çš„ä¼˜ç‚¹æ˜¾è€Œæ˜“è§ï¼Œå®ƒèƒ½å’Œç°å®ä¸–ç•Œç›¸å¯¹åº”èµ·æ¥ï¼Œè€Œä¸”ï¼Œææ–™ç±»æ˜¯å¯ä»¥é‡ç”¨çš„ã€‚è¿™ä¸ªæ¨¡å¼ä¹Ÿè¡¨ç°äº†é¢å‘å¯¹è±¡çš„æ‹¼è£…æ•°æ®çš„å¦ä¸€ä¸ªç²¾é«“â€”â€”å–œæ¬¢ç»„åˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿ã€‚è¿™ä¸ªæ¨¡å¼åœ¨è®¾è®¡æ¨¡å¼é‡Œå«â€œæ¡¥æ¥ï¼ˆBridgeï¼‰æ¨¡å¼â€ã€‚</p>\n<p>å’Œå‡½æ•°å¼ç¼–ç¨‹æ¥æ¯”è¾ƒï¼Œå‡½æ•°å¼å¼ºè°ƒåŠ¨è¯ï¼Œè€Œé¢å‘å¯¹è±¡å¼ºè°ƒåè¯ï¼Œé¢å‘å¯¹è±¡æ›´å¤šåœ°å…³æ³¨æ¥å£é—´çš„å…³ç³»ï¼Œè€Œé€šè¿‡å¤šæ€æ¥é€‚é…ä¸åŒçš„å…·ä½“å®ç°ã€‚</p>\n<h1>ç¤ºä¾‹äºŒï¼šæ‹¼è£…åŠŸèƒ½</h1>\n<p>å†æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ã€‚æˆ‘ä»¬çš„éœ€æ±‚æ˜¯ï¼šå¤„ç†ç”µå•†ç³»ç»Ÿä¸­çš„è®¢å•ï¼Œå¤„ç†è®¢å•æœ‰ä¸€ä¸ªå…³é”®çš„åŠ¨ä½œå°±æ˜¯è®¡ç®—è®¢å•çš„ä»·æ ¼ã€‚æœ‰çš„è®¢å•éœ€è¦æ‰“æŠ˜ï¼Œæœ‰çš„åˆ™ä¸æ‰“æŠ˜ã€‚</p>\n<p>åœ¨è¿›è¡Œé¢å‘å¯¹è±¡ç¼–ç¨‹æ—¶ï¼Œå‡è®¾æˆ‘ä»¬ç”¨Javaè¯­è¨€ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå†™ä¸€ä¸ªæ¥å£â€”â€” <code>BillingStrategy</code>ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹æ³•å°±æ˜¯<code>getActPrice(double rawPrice)</code>ï¼Œè¾“å…¥ä¸€ä¸ªåŸå§‹çš„ä»·æ ¼ï¼Œè¾“å‡ºä¸€ä¸ªæ ¹æ®ç›¸åº”çš„ç­–ç•¥è®¡ç®—å‡ºæ¥çš„ä»·æ ¼ã€‚</p>\n<pre><code>interface BillingStrategy {\n    public double getActPrice(double rawPrice);\n}\n</code></pre>\n<p>è¿™ä¸ªæ¥å£å¾ˆç®€å•ï¼Œåªæ˜¯å¯¹æ¥å£çš„æŠ½è±¡ï¼Œè€Œä¸å®ç°æ— å…³ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸ªæ¥å£è¿›è¡Œå®ç°ã€‚</p>\n<pre><code>// Normal billing strategy (unchanged price)\nclass NormalStrategy implements BillingStrategy {\n    @Override\n    public double getActPrice(double rawPrice) {\n        return rawPrice;\n    }\n}\n\n// Strategy for Happy hour (50% discount)\nclass HappyHourStrategy implements BillingStrategy {\n    @Override\n    public double getActPrice(double rawPrice) {\n        return rawPrice * 0.5;\n    }\n}\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç å®ç°äº†ä¸¤ä¸ªç­–ç•¥ï¼Œä¸€ä¸ªæ˜¯ä¸æ‰“æŠ˜çš„ï¼š<code>NormalStrategy</code>ï¼Œä¸€ä¸ªæ˜¯æ‰“äº†5æŠ˜çš„ï¼š<code>HappyHourStrategy</code>ã€‚</p>\n<p>äºæ˜¯ï¼Œæˆ‘ä»¬å…ˆå°è£…è®¢å•é¡¹ <code>OrderItem</code>ï¼Œå…¶åŒ…å«äº†æ¯ä¸ªå•†å“çš„åŸå§‹ä»·æ ¼å’Œæ•°é‡ï¼Œä»¥åŠè®¡ç®—ä»·æ ¼çš„ç­–ç•¥ã€‚</p>\n<pre><code>class OrderItem {\n    public String Name;\n    public double Price;\n    public int Quantity;\n    public BillingStrategy Strategy;\n    public OrderItem(String name, double price, int quantity, BillingStrategy strategy) {\n        this.Name = name;\n        this.Price = price;\n        this.Quantity = quantity;\n        this.Strategy = strategy;\n    }\n}\n</code></pre>\n<p>ç„¶åï¼Œåœ¨æˆ‘ä»¬çš„è®¢å•ç±»â€”â€” <code>Order</code> ä¸­å°è£…äº† <code>OrderItem</code> çš„åˆ—è¡¨ï¼Œå³å•†å“åˆ—è¡¨ã€‚å¹¶åœ¨æ“ä½œè®¢å•æ·»åŠ è´­ä¹°å•†å“æ—¶ï¼ŒåŠ å…¥ä¸€ä¸ªè®¡ç®—ä»·æ ¼çš„ <code>BillingStrategy</code>ã€‚</p>\n<pre><code>class Order {\n    private List&lt;OrderItem&gt; orderItems = new ArrayList&lt;OrderItem&gt;();\n    private BillingStrategy strategy = new NormalStrategy();\n\n    public void Add(String name, double price, int quantity, BillingStrategy strategy) {\n        orderItems.add(new OrderItem(name, price, quantity, strategy));\n    }\n    \n    // Payment of bill\n    public void PayBill() {\n        double sum = 0;\n        for (OrderItem item : orderItems) {\n            \n            actPrice = item.Strategy.getActPrice(item.price * item.quantity);\n            sum += actPrice;\n            \n            System.out.println(&quot;%s -- %f(%d) - %f&quot;, \n            \t\titem.name, item.price, item.quantity, actPrice);\n        }\n        System.out.println(&quot;Total due: &quot; + sum);\n    }\n}\n\n</code></pre>\n<p>æœ€ç»ˆï¼Œæˆ‘ä»¬åœ¨ <code>PayBill()</code> å‡½æ•°ä¸­ï¼ŒæŠŠæ•´ä¸ªè®¢å•çš„ä»·æ ¼æ˜ç»†å’Œæ€»ä»·æ‰“å°å‡ºæ¥ã€‚</p>\n<p>åœ¨ä¸Šé¢è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘æŠŠå®šä»·ç­–ç•¥å’Œè®¢å•å¤„ç†çš„æµç¨‹åˆ†å¼€äº†ã€‚è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥éšæ—¶ç»™ä¸åŒçš„å•†å“æ³¨å…¥ä¸åŒçš„ä»·æ ¼è®¡ç®—ç­–ç•¥ï¼Œè¿™æ ·ä¸€æ¥å°±æœ‰å¾ˆé«˜çš„çµæ´»åº¦äº†ã€‚å‰©ä¸‹çš„äº‹å°±äº¤ç»™æˆ‘ä»¬çš„è¿è¥äººå‘˜æ¥é…ç½®ä¸åŒçš„å•†å“ä½¿ç”¨ä»€ä¹ˆæ ·çš„ä»·æ ¼è®¡ç®—ç­–ç•¥äº†ã€‚</p>\n<p>æ³¨æ„ï¼šç°å®ç¤¾ä¼šä¸­ï¼Œè®¢å•ä»·æ ¼è®¡ç®—ä¼šæ¯”è¿™ä¸ªäº‹å¤æ‚å¾—å¤šï¼Œæ¯”å¦‚ï¼šæœ‰ä¼šå‘˜ä»·ï¼Œæœ‰æ‰“æŠ˜å¡ï¼Œè¿˜æœ‰å•†å“çš„æ‰“åŒ…ä»·ç­‰ï¼Œè€Œä¸”è¿˜å¯ä»¥å åŠ ä¸åŒçš„ç­–ç•¥ï¼ˆå åŠ ç­–ç•¥ç”¨å‰é¢è¯´çš„å‡½æ•°å¼çš„pipelineæˆ–decoratorå°±å¯ä»¥å®ç°ï¼‰ã€‚æˆ‘ä»¬è¿™é‡Œåªæ˜¯ä¸ºäº†è¯´æ˜é¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒå¼ï¼Œæ‰€ä»¥æ•…æ„ç®€å•åŒ–äº†ã€‚</p>\n<p>å…¶å®ï¼Œè¿™ä¸ªè®¾è®¡æ¨¡å¼å«â€”â€”ç­–ç•¥æ¨¡å¼ã€‚æˆ‘è®¤ä¸ºï¼Œè¿™æ˜¯è®¾è®¡æ¨¡å¼ä¸­æœ€ä¸ºç»å…¸çš„æ¨¡å¼äº†ï¼Œå…¶å……åˆ†ä½“ç°äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ–¹å¼ã€‚</p>\n<h1>ç¤ºä¾‹ä¸‰ï¼šèµ„æºç®¡ç†</h1>\n<p>å…ˆçœ‹ä¸€æ®µä»£ç ï¼š</p>\n<pre><code>mutex m;\n\nvoid foo() {\n    m.lock();\n    Func();\n    if ( ! everythingOk() ) return; \n    ...\n    ...\n    m.unlock();\n}\n</code></pre>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢è¿™æ®µä»£ç æ˜¯æœ‰é—®é¢˜çš„ï¼ŒåŸå› æ˜¯ï¼šé‚£ä¸ª <code>if</code> è¯­å¥è¿”å›æ—¶æ²¡æœ‰æŠŠé”ç»™unlockæ‰ï¼Œè¿™ä¼šå¯¼è‡´é”æ²¡æœ‰è¢«é‡Šæ”¾ã€‚å¦‚æœæˆ‘ä»¬è¦æŠŠä»£ç å†™å¯¹ï¼Œéœ€è¦åœ¨returnå‰unlockä¸€ä¸‹ã€‚</p>\n<pre><code>mutex m;\n\nvoid foo() {\n    m.lock();\n    Func();\n    if ( ! everythingOk() ) {\n        m.unlock();\n        return;\n    } \n    ...\n    ...\n    m.unlock();\n}\n</code></pre>\n<p>ä½†æ˜¯ï¼Œåœ¨æ‰€æœ‰çš„å‡½æ•°é€€å‡ºçš„åœ°æ–¹éƒ½è¦åŠ ä¸Š <code>m.unlock();</code> è¯­å¥ï¼Œè¿™ä¼šè®©æˆ‘ä»¬å¾ˆéš¾ç»´æŠ¤ä»£ç ã€‚äºæ˜¯å¯ä»¥ä½¿ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ¨¡å¼ï¼Œæˆ‘ä»¬å…ˆè®¾è®¡ä¸€ä¸ªä»£ç†ç±»ã€‚</p>\n<pre><code>class lock_guard {\n\tprivate: \n\t\tmutex &amp;_m;\n\tpublic:\n\t\tlock_guard(mutex &amp;m):_m(m) { _m.lock(); }\n\t\t~lock_guard() { _m.unlock(); }\n};\n</code></pre>\n<p>ç„¶åï¼Œæˆ‘ä»¬çš„ä»£ç å°±å¯ä»¥è¿™æ ·å†™äº†ï¼š</p>\n<pre><code>mutex m;\n\nvoid foo() {\n\tlock_guard guard(m);\n\tFunc();\n\tif ( ! everythingOk() ) {\n\t\treturn;\n\t} \n\t...\n\t...\n}\n</code></pre>\n<p>è¿™ä¸ªæŠ€æœ¯å«RAIIï¼ˆResource Acquisition Is Initializationï¼Œèµ„æºè·å–å°±æ˜¯åˆå§‹åŒ–ï¼‰ï¼Œ æ˜¯C++ä¸­çš„ä¸€ä¸ªåˆ©ç”¨äº†é¢å‘å¯¹è±¡çš„æŠ€æœ¯ã€‚è¿™ä¸ªè®¾è®¡æ¨¡å¼å«â€œä»£ç†æ¨¡å¼â€ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä¸€äº›æ§åˆ¶èµ„æºåˆ†é…å’Œé‡Šæ”¾çš„é€»è¾‘äº¤ç»™è¿™äº›ä»£ç†ç±»ï¼Œç„¶åï¼Œåªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ä»£ç äº†ã€‚è€Œä¸”ï¼Œåœ¨æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­ï¼Œå‡å°‘äº†è¿™äº›å’Œä¸šåŠ¡é€»è¾‘ä¸ç›¸å…³çš„ç¨‹åºæ§åˆ¶çš„ä»£ç ã€‚</p>\n<p>ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹é¢å‡ ä¸ªé¢å‘å¯¹è±¡çš„äº‹æƒ…ã€‚</p>\n<ul>\n<li>\n<p>æˆ‘ä»¬ä½¿ç”¨æ¥å£æŠ½è±¡äº†å…·ä½“çš„å®ç°ç±»ã€‚</p>\n</li>\n<li>\n<p>ç„¶åå…¶å®ƒç±»è€¦åˆçš„æ˜¯æ¥å£è€Œä¸æ˜¯å®ç°ç±»ã€‚è¿™å°±æ˜¯å¤šæ€ï¼Œå…¶å¢åŠ äº†ç¨‹åºçš„å¯æ‰©å±•æ€§ã€‚</p>\n</li>\n<li>\n<p>å› ä¸ºè¿™å°±æ˜¯æ¥å£ç¼–ç¨‹ï¼Œæ‰€è°“æ¥å£ä¹Ÿå°±æ˜¯ä¸€ç§â€œåè®®â€ï¼Œå°±åƒHTTPåè®®ä¸€æ ·ã€‚æµè§ˆå™¨å’Œåç«¯çš„ç¨‹åºéƒ½ä¾èµ–äºè¿™ä¸€ç§åè®®ï¼Œè€Œä¸æ˜¯å…·ä½“å®ç°ï¼ˆå¦‚æœæ˜¯ä¾èµ–å…·ä½“å®ç°ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±è¦ä¾èµ–åç«¯çš„ç¼–ç¨‹è¯­è¨€æˆ–ä¸­é—´ä»¶äº†ï¼Œè¿™å°±å¤ªæ¶å¿ƒäº†ï¼‰ã€‚äºæ˜¯ï¼Œæµè§ˆå™¨å’Œåç«¯çš„ç¨‹åºå°±å®Œå…¨è§£é™¤ä¾èµ–å…³ç³»ï¼Œè€Œå»ä¾èµ–äºä¸€ä¸ªæ ‡å‡†çš„åè®®ã€‚</p>\n</li>\n<li>\n<p>è¿™å°±æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹èŒƒå¼çš„ç²¾é«“ï¼åŒæ ·ä¹Ÿæ˜¯IoC/DIPï¼ˆæ§åˆ¶åè½¬/ä¾èµ–å€’ç½®ï¼‰çš„æœ¬è´¨ã€‚</p>\n</li>\n</ul>\n<h1>IoC æ§åˆ¶åè½¬</h1>\n<p>å…³äºIoCçš„çš„æ¦‚å¿µæå‡ºæ¥å·²ç»å¾ˆå¤šå¹´äº†ï¼Œå…¶è¢«ç”¨äºä¸€ç§é¢å‘å¯¹è±¡çš„è®¾è®¡ã€‚æˆ‘åœ¨è¿™é‡Œå†ç®€å•åœ°å›é¡¾ä¸€ä¸‹è¿™ä¸ªæ¦‚å¿µã€‚æˆ‘å…ˆè°ˆæŠ€æœ¯ï¼Œå†è¯´ç®¡ç†ã€‚</p>\n<p>è¯è¯´ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¼€å…³è¦æ§åˆ¶ä¸€ä¸ªç¯çš„å¼€å’Œå…³è¿™ä¸¤ä¸ªåŠ¨ä½œï¼Œæœ€å¸¸è§ä¹Ÿæ˜¯æœ€æ²¡æœ‰æŠ€æœ¯å«é‡çš„å®ç°ä¼šæ˜¯è¿™ä¸ªæ ·å­ï¼š</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/31/16/31b5900acf68c8bf0a60abe13615a816.jpg?wh=1350x759\" alt=\"\" /><br />\nç„¶åï¼Œæœ‰ä¸€å¤©ï¼Œæˆ‘ä»¬å‘ç°éœ€è¦å¯¹ç¯æ³¡æ‰©å±•ä¸€ä¸‹ï¼Œäºæ˜¯åšäº†ä¸ªæŠ½è±¡ç±»ï¼š</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/10/11/1013e5f8ab38fcb1591d02f38c813911.jpg?wh=1623x1023\" alt=\"\" /><br />\nä½†æ˜¯ï¼Œå¦‚æœæœ‰ä¸€å¤©ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ªå¼€å…³å¯èƒ½è¿˜è¦æ§åˆ¶åˆ«çš„ä¸å•å•æ˜¯ç¯æ³¡çš„ä¸œè¥¿ï¼Œå°±ä¼šå‘ç°è¿™ä¸ªå¼€å…³è€¦åˆäº†ç¯æ³¡è¿™ç§ç±»åˆ«ï¼Œéå¸¸ä¸åˆ©äºæ‰©å±•ï¼Œäºæ˜¯åè½¬æ§åˆ¶å‡ºç°äº†ã€‚</p>\n<p>å°±åƒç°å®ä¸–ç•Œä¸€æ ·ï¼Œé€ å¼€å…³çš„å·¥å‚æ ¹æœ¬ä¸å…³å¿ƒè¦æ§åˆ¶çš„ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Œå®ƒåªåšä¸€ä¸ªå¼€å…³åº”è¯¥åšå¥½çš„äº‹ï¼Œå°±æ˜¯æŠŠç”µæ¥é€šï¼ŒæŠŠç”µæ–­å¼€ï¼ˆä¸ç®¡æ˜¯æ‰‹åŠ¨çš„ï¼Œè¿˜æ˜¯å£°æ§çš„ï¼Œè¿˜æ˜¯å…‰æ§ï¼Œè¿˜æ˜¯é¥æ§çš„ï¼‰ã€‚è€Œæˆ‘ä»¬é€ çš„å„ç§å„æ ·çš„ç¯æ³¡ï¼ˆä¸ç®¡æ˜¯æ—¥å…‰ç¯ã€ç™½ç‚½ç¯ï¼‰çš„å·¥å‚ä¹Ÿä¸å…³å¿ƒä½ ç”¨ä»€ä¹ˆæ ·çš„å¼€å…³ï¼Œåæ­£æˆ‘åªç®¡æŠŠç¯çš„ç”µæºæ¥å£ç»™åšå‡ºæ¥ã€‚ç„¶åï¼Œå¼€å…³å‚å’Œç”µç¯å‚ä¾èµ–äºä¸€ä¸ªæ ‡å‡†çš„é€šç”µå’Œæ–­ç”µçš„æ¥å£ã€‚äºæ˜¯äº§ç”Ÿäº†IoCæ§åˆ¶åè½¬ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/62/40/62eedb8a4ffdae94604759659078db40.jpg?wh=2190x1587\" alt=\"\" /><br />\næ‰€è°“æ§åˆ¶åè½¬çš„æ„æ€æ˜¯ï¼Œå¼€å…³ä»ä»¥å‰è®¾å¤‡çš„ä¸“ç”¨å¼€å…³ï¼Œè½¬å˜åˆ°äº†æ§åˆ¶ç”µæºçš„å¼€å…³ï¼Œè€Œä»¥å‰çš„è®¾å¤‡è¦åè¿‡æ¥ä¾èµ–äºå¼€å…³å‚å£°æ˜çš„ç”µæºè¿æ¥æ¥å£ã€‚åªè¦ç¬¦åˆå¼€å…³å‚å®šä¹‰çš„ç”µæºè¿æ¥çš„æ¥å£ï¼Œè¿™ä¸ªå¼€å…³å¯ä»¥æ§åˆ¶æ‰€æœ‰ç¬¦åˆè¿™ä¸ªç”µæºè¿æ¥æ¥å£çš„è®¾å¤‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼€å…³ä»ä¾èµ–è®¾å¤‡è¿™ç§æƒ…å†µï¼Œå˜æˆäº†è®¾å¤‡åè¿‡æ¥ä¾èµ–äºå¼€å…³æ‰€å®šä¹‰çš„æ¥å£ã€‚</p>\n<p>è¿™æ ·çš„ä¾‹å­åœ¨ç”Ÿæ´»ä¸­å¤ªå¤šè§äº†ï¼Œæ¯”å¦‚è¯´ï¼š</p>\n<ul>\n<li>\n<p>é’±å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ä»¥å‰å¤§å®¶éƒ½æ˜¯â€œä»¥ç‰©æ˜“ç‰©â€ï¼Œæ‰€ä»¥ï¼Œåœ¨å„ç§ç‰©å“ä¹‹å‰éƒ½éœ€è¦ç›¸åº”çš„â€œäº¤æ˜“ç­–ç•¥â€ï¼Œæ¯”å¦‚ï¼šä¸€å¤´ç¾Šæ¢2è¢‹ç±³ï¼Œä¸€è¢‹ç±³æ¢ä¸€æ–¤çŒªåè…¿è‚‰â€¦â€¦è¿™ç§æ¢ç®—å¤ªå¤æ‚äº†ã€‚äºæ˜¯ï¼Œâ€œé’±â€å°±å‡ºæ¥äº†ï¼Œæ‰€è°“â€œé’±â€ï¼Œå…¶å®å°±æ˜¯ä¸€ç§äº¤æ˜“åè®®ï¼Œæ‰€æœ‰çš„å•†å“éƒ½ä¾èµ–è¿™ä¸ªåè®®ï¼Œè€Œä¸ç”¨å†äº’ç›¸ä¾èµ–äº†ã€‚äºæ˜¯æ•´ä¸ªä¸–ç•Œçš„è¿ä½œå°±ç®€å•äº†å¾ˆå¤šã€‚</p>\n</li>\n<li>\n<p>åœ¨äº¤æ˜“çš„è¿‡ç¨‹ä¸­ï¼Œå–å®¶å‘ä¹°å®¶å–ä¸œè¥¿ï¼Œä¸€æ‰‹äº¤é’±ä¸€æ‰‹äº¤è´§ï¼Œæ‰€ä»¥ï¼ŒåŸºæœ¬ä¸Šæ¥è¯´å–å®¶å’Œä¹°å®¶å¿…éœ€å¼ºè€¦åˆï¼ˆå¿…éœ€è§é¢ï¼‰ã€‚è¿™ä¸ªæ—¶å€™ï¼Œé“¶è¡Œå‡ºæ¥åšæ‹…ä¿ï¼Œä¹°å®¶æŠŠé’±å…ˆå«åˆ°é“¶è¡Œï¼Œé“¶è¡Œè®©å–å®¶å‘è´§ï¼Œä¹°å®¶éªŒè´§åï¼Œé“¶è¡Œå†æŠŠé’±æ‰“ç»™å–å®¶ã€‚è¿™å°±æ˜¯åè½¬æ§åˆ¶ã€‚ä¹°å–åŒæ–¹æŠŠå¯¹å¯¹æ–¹çš„ç›´æ¥ä¾èµ–å’Œæ§åˆ¶ï¼Œåè½¬åˆ°äº†è®©å¯¹æ–¹æ¥ä¾èµ–ä¸€ä¸ªæ ‡å‡†çš„äº¤æ˜“æ¨¡å‹çš„æ¥å£ã€‚è‚¡ç¥¨äº¤æ˜“ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¯äº¤æ‰€å°±æ˜¯ä¹°å–åŒæ–¹çš„æ ‡å‡†äº¤æ˜“æ¨¡å‹æ¥å£ã€‚</p>\n</li>\n<li>\n<p>ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œå¯èƒ½è¿˜ä¸æ˜æ˜¾ï¼Œå†ä¸¾ä¸€ä¸ªä¾‹å­ã€‚æµ·å°”å…¬å¸ä½œä¸ºä¸€ä¸ªç”µå™¨åˆ¶å•†éœ€è¦æŠŠè‡ªå·±çš„å•†å“åˆ†é”€åˆ°å…¨å›½å„åœ°ï¼Œä½†æ˜¯å‘ç°ï¼Œä¸åŒçš„åˆ†é”€æ¸ é“æœ‰ä¸åŒçš„ç©æ³•ï¼Œäºæ˜¯æ´¾å‡ºäº†å„ç§é”€å”®ä»£è¡¨ç©ä¸åŒçš„ç©æ³•ã€‚éšç€æ¸ é“è¶Šæ¥è¶Šå¤šï¼Œå‘ç°ï¼Œæ¯å¢åŠ ä¸€ä¸ªæ¸ é“å°±è¦æ–°å¢ä¸€æ‰¹äººå’Œä¸€ä¸ªæ–°çš„æµç¨‹ï¼Œä¸¥é‡è€¦åˆå¹¶ä¾èµ–å„æ¸ é“å•†çš„ç©æ³•ã€‚</p>\n</li>\n</ul>\n<p>å®åœ¨å—ä¸äº†äº†ï¼Œäºæ˜¯åˆ¶å®šä¸šåŠ¡æ ‡å‡†ï¼Œå¼€å‘åˆ†é”€ä¿¡æ¯åŒ–ç³»ç»Ÿï¼Œåªæœ‰ç¬¦åˆè¿™ä¸ªæ ‡å‡†çš„æ¸ é“å•†æ‰èƒ½æˆä¸ºæµ·å°”çš„åˆ†é”€å•†ï¼Œè®©å„ä¸ªæ¸ é“å•†åè¿‡æ¥ä¾èµ–è‡ªå·±æ ‡å‡†ã€‚åè½¬äº†æ§åˆ¶ï¼Œå€’ç½®äº†ä¾èµ–ã€‚</p>\n<p>è¿™ä¸ªæ€ç»´æ–¹å¼å…¶å®è¿˜æ·±è¿œåœ°å½±å“äº†å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„ç³»ç»Ÿæ¶æ„ã€‚</p>\n<ul>\n<li>äº‘è®¡ç®—å¹³å°ä¸­æœ‰å¾ˆå¤šçš„äº‘äº§å“çº¿ã€‚ä¸€äº›åº•å±‚æœåŠ¡çš„å¼€å‘å›¢é˜Ÿåªç®¡å¼€å‘åº•å±‚çš„æŠ€æœ¯ï¼Œç„¶åä»€ä¹ˆä¹Ÿä¸ç®¡äº†ï¼Œå°±äº¤ç»™ä¸Šå±‚çš„å¼€å‘äººå‘˜ã€‚ä¸Šå±‚å¼€å‘äººå‘˜åœ¨åº•å±‚å›¢é˜Ÿå¼€å‘å‡ºæ¥çš„äº§å“ä¸Šé¢å¼€å‘å„ç§ç®¡ç†è¿™ä¸ªåº•å±‚èµ„æºçš„ä¸œè¥¿ï¼Œæ¯”å¦‚ï¼šç”Ÿäº§åº•å±‚èµ„æºçš„ä¸šåŠ¡ï¼Œåº•å±‚èµ„æºçš„æ§åˆ¶å°ï¼Œåº•å±‚èµ„æºçš„ç›‘æ§ç³»ç»Ÿã€‚</li>\n</ul>\n<p>ç„¶è€Œï¼Œéšç€æ¥å…¥çš„èµ„æºè¶Šæ¥è¶Šå¤šï¼Œä¸Šå±‚ä¸ºå„ä¸ªäº‘èµ„æºæ§åˆ¶ç”Ÿäº§ï¼Œå¼€å‘æ§åˆ¶å°å’Œç›‘æ§çš„å›¢é˜Ÿï¼Œå®Œå…¨å¹²ä¸è¿‡æ¥äº†ã€‚è¿™ä¸ªæ—¶å€™ä¾èµ–å€’ç½®å’Œåè½¬æ§åˆ¶åˆå¯ä»¥è§£å†³é—®é¢˜äº†ã€‚ä¸ºäº†æœ‰ç»Ÿä¸€ä½“éªŒï¼Œå„ä¸ªäº‘äº§å“çº¿éœ€è¦éµä»ä¸€å®šçš„åè®®æˆ–è§„èŒƒæ¥å¼€å‘ã€‚æ¯”å¦‚ï¼Œæ¯ä¸ªäº‘äº§å“å›¢é˜Ÿéœ€è¦æŒ‰ç…§æ ‡å‡†å®šä¹‰ç›¸å…³èµ„æºçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæä¾›æ§åˆ¶å°ï¼Œæ¥å…¥æ•´ä½“ç›‘æ§ç³»ç»Ÿï¼Œé€šè¿‡æ ‡å‡†çš„åè®®å¼€å‘æ§åˆ¶ç³»ç»Ÿã€‚</p>\n<ul>\n<li>é›†ä¸­å¼å¤„ç†ç”µå­å•†åŠ¡è®¢å•çš„æµç¨‹ã€‚å„ä¸ªå‚ç›´ä¸šåŠ¡çº¿éƒ½éœ€è¦é€šè¿‡è¿™ä¸ªå¹³å°æ¥å¤„ç†è‡ªå·±çš„äº¤æ˜“ä¸šåŠ¡ï¼Œä½†æ˜¯å‚ç›´ä¸šåŠ¡çº¿ä¸Šçš„ä¸ªæ€§åŒ–éœ€æ±‚å¤ªå¤šã€‚äºæ˜¯ï¼Œè¿™ä¸ªæŠ€æœ¯å¹³å°å¼€å§‹å‘ç°ï¼Œå¯¹æ¥è‡ªå„ä¸ªä¸šåŠ¡æ–¹çš„éœ€æ±‚åº”æ¥ä¸æš‡ï¼Œå„ç§å˜æ€éœ€æ±‚ä¸¥é‡å¹²æ‰°ç³»ç»Ÿï¼Œå„ç§æŠ€æœ¯å†³ç­–è¶Šæ¥è¶Šä¸å¥½åšï¼Œå¯¼è‡´éœ€æ±‚æ’æœŸæ’ä¸è¿‡æ¥ã€‚</li>\n</ul>\n<p>è¿™ä¸ªæ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¾èµ–å€’ç½®å’Œåè½¬æ§åˆ¶çš„æ€æƒ³æ¥è§£å†³é—®é¢˜ï¼šå¼€å‘ä¸€ä¸ªæ’ä»¶æ¨¡å‹ã€å·¥ä½œæµå¼•æ“å’ŒPub/Subç³»ç»Ÿï¼Œè®©ä¸šåŠ¡æ–¹çš„ä¸ªæ€§åŒ–éœ€æ±‚æ”¯æŒä»¥æ’ä»¶çš„æ–¹å¼æ’å…¥è®¢å•æµç¨‹ä¸­ã€‚ä¸šåŠ¡æ–¹è‡ªå·±çš„æ•°æ®å­˜åœ¨è‡ªå·±çš„åº“ä¸­ï¼Œä¸šåŠ¡é€»è¾‘ä¹Ÿä¸è¦ä¾µå…¥ç³»ç»Ÿï¼Œå¹¶å¯ä»¥ä½¿ç”¨å·¥ä½œæµå¼•æ“æˆ–Pub/Subçš„åè®®æ ‡å‡†æ¥è‡ªå·±å®šä¹‰å·¥ä½œæµçš„å„ä¸ªæ­¥éª¤ï¼ˆç”šè‡³æŠŠå·¥ä½œæµå¼•æ“çš„å„ä¸ªæ­¥éª¤çš„decideräº¤ç»™å„ä¸ªä¸šåŠ¡æ–¹è‡ªè¡Œå¤„ç†ï¼‰ã€‚</p>\n<p>è®©å„ä¸ªä¸šåŠ¡æ–¹æ¥ä¾èµ–äºæ ‡å‡†æ’ä»¶å’Œå·¥ä½œæµæ¥å£ï¼Œåè½¬æ§åˆ¶ï¼Œè®©å®ƒä»¬æ¥æ§åˆ¶ç³»ç»Ÿï¼Œä¾èµ–å€’ç½®ï¼Œè®©å®ƒä»¬æ¥ä¾èµ–æ ‡å‡†ã€‚</p>\n<p>ä¸Šé¢è¿™äº›æˆ‘æƒ³è¯´ä»€ä¹ˆï¼Ÿæˆ‘æƒ³è¯´çš„æ˜¯ï¼š</p>\n<ul>\n<li>\n<p>æˆ‘ä»¬æ¯å¤©éƒ½åœ¨æ ‡å‡†åŒ–å’Œå®šåˆ¶åŒ–ä¸­çº ç»“ã€‚æˆ‘ä»¬ç—›è‹¦äºå“ªäº›åº”è¯¥æ˜¯å¹³å°è¦åšçš„ï¼Œå“ªäº›åº”è¯¥è¦ç”©å‡ºå»çš„ã€‚</p>\n</li>\n<li>\n<p>è¿™é‡Œé¢ä¼šå‡ºç°å¤§é‡çš„ä¸ä¸šåŠ¡æ— å…³çš„è½¯ä»¶æˆ–ä¸­é—´ä»¶ï¼ŒåŒ…æ‹¬åè®®ã€æ•°æ®ã€æ¥å£â€¦â€¦</p>\n</li>\n<li>\n<p>é€šè¿‡é¢å‘å¯¹è±¡çš„è¿™äº›æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŠ½è±¡æ¥è§£è€¦ï¼Œé€šè¿‡ä¸­é—´ä»¶æ¥è§£è€¦ï¼Œè¿™æ ·å¯ä»¥é™ä½è½¯ä»¶çš„å¤æ‚åº¦ã€‚</p>\n</li>\n</ul>\n<p>æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬å°±æ˜¯æƒ³é€šè¿‡ä¸€ç§æ ‡å‡†æ¥è®©ä¸šåŠ¡æ›´ä¸ºè§„èŒƒã€‚</p>\n<h1>å°ç»“</h1>\n<p>ä¸è¿‡ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦çŸ¥é“é¢å‘å¯¹è±¡çš„ä¼˜ç¼ºç‚¹ã€‚</p>\n<p><strong>ä¼˜ç‚¹</strong></p>\n<ul>\n<li>èƒ½å’ŒçœŸå®çš„ä¸–ç•Œäº¤ç›¸è¾‰æ˜ ï¼Œç¬¦åˆäººçš„ç›´è§‰ã€‚</li>\n<li>é¢å‘å¯¹è±¡å’Œæ•°æ®åº“æ¨¡å‹è®¾è®¡ç±»å‹ï¼Œæ›´å¤šåœ°å…³æ³¨å¯¹è±¡é—´çš„æ¨¡å‹è®¾è®¡ã€‚</li>\n<li>å¼ºè°ƒäºâ€œåè¯â€è€Œä¸æ˜¯â€œåŠ¨è¯â€ï¼Œæ›´å¤šåœ°å…³æ³¨å¯¹è±¡å’Œå¯¹è±¡é—´çš„æ¥å£ã€‚</li>\n<li>æ ¹æ®ä¸šåŠ¡çš„ç‰¹å¾å½¢æˆä¸€ä¸ªä¸ªé«˜å†…èšçš„å¯¹è±¡ï¼Œæœ‰æ•ˆåœ°åˆ†ç¦»äº†æŠ½è±¡å’Œå…·ä½“å®ç°ï¼Œå¢å¼ºäº†å¯é‡ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚</li>\n<li>æ‹¥æœ‰å¤§é‡éå¸¸ä¼˜ç§€çš„è®¾è®¡åŸåˆ™å’Œè®¾è®¡æ¨¡å¼ã€‚</li>\n<li>S.O.L.I.Dï¼ˆå•ä¸€åŠŸèƒ½ã€å¼€é—­åŸåˆ™ã€é‡Œæ°æ›¿æ¢ã€æ¥å£éš”ç¦»ä»¥åŠä¾èµ–åè½¬ï¼Œæ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„äº”ä¸ªåŸºæœ¬åŸåˆ™ï¼‰ã€IoC/DIPâ€¦â€¦</li>\n</ul>\n<p><strong>ç¼ºç‚¹</strong></p>\n<ul>\n<li>ä»£ç éƒ½éœ€è¦é™„ç€åœ¨ä¸€ä¸ªç±»ä¸Šï¼Œä»ä¸€ä¾§é¢ä¸Šè¯´ï¼Œå…¶é¼“åŠ±äº†ç±»å‹ã€‚</li>\n<li>ä»£ç éœ€è¦é€šè¿‡å¯¹è±¡æ¥è¾¾åˆ°æŠ½è±¡çš„æ•ˆæœï¼Œå¯¼è‡´äº†ç›¸å½“åšé‡çš„â€œä»£ç ç²˜åˆå±‚â€ã€‚</li>\n<li>å› ä¸ºå¤ªå¤šçš„å°è£…ä»¥åŠå¯¹çŠ¶æ€çš„é¼“åŠ±ï¼Œå¯¼è‡´äº†å¤§é‡ä¸é€æ˜å¹¶åœ¨å¹¶å‘ä¸‹å‡ºç°å¾ˆå¤šé—®é¢˜ã€‚</li>\n</ul>\n<p>è¿˜æ˜¯å¥½å¤šäººå¹¶ä¸æ˜¯å–œæ¬¢é¢å‘å¯¹è±¡ï¼Œå°¤å…¶æ˜¯å–œæ¬¢å‡½æ•°å¼å’Œæ³›å‹é‚£äº›äººï¼Œä¼¼ä¹éƒ½æ˜¯éå¸¸è®¨åŒé¢å‘å¯¹è±¡çš„ã€‚</p>\n<p>é€šè¿‡å¯¹è±¡æ¥è¾¾åˆ°æŠ½è±¡ç»“æœï¼ŒæŠŠä»£ç åˆ†æ•£åœ¨ä¸åŒçš„ç±»é‡Œé¢ï¼Œç„¶åï¼Œè¦è®©å®ƒä»¬æ‰§è¡Œèµ·æ¥ï¼Œå°±éœ€è¦æŠŠè¿™äº›ç±»ç²˜åˆèµ·æ¥ã€‚æ‰€ä»¥ï¼Œå®ƒå¦å¤–ä¸€æ–¹é¢é¼“åŠ±ç›¸å½“åšé‡çš„ä»£ç é»åˆå±‚ï¼ˆä»£ç é»åˆå±‚å°±æ˜¯æŠŠä»£ç é»åˆåˆ°è¿™é‡Œé¢ï¼‰ã€‚</p>\n<p>åœ¨Javaé‡Œæœ‰å¾ˆå¤šæ³¨å…¥æ–¹å¼ï¼ŒåƒSpringé‚£äº›æ³¨å…¥ï¼Œé¼“åŠ±é»åˆï¼Œå¯¼è‡´äº†å¤§é‡çš„å°è£…ï¼Œå®Œå…¨ä¸çŸ¥é“é‡Œé¢åœ¨å¹²ä»€ä¹ˆäº‹æƒ…ã€‚è€Œä¸”å°è£…å±è”½äº†ç»†èŠ‚ï¼Œå…·ä½“å‘ç”Ÿå•¥äº‹ä½ è¿˜ä¸çŸ¥é“ã€‚è¿™äº›éƒ½æ˜¯é¢å‘å¯¹è±¡ä¸å¤ªå¥½çš„åœ°æ–¹ã€‚</p>\n<p>ä»¥ä¸‹æ˜¯ã€Šç¼–ç¨‹èŒƒå¼æ¸¸è®°ã€‹ç³»åˆ—æ–‡ç« çš„ç›®å½•ï¼Œæ–¹ä¾¿ä½ äº†è§£è¿™ä¸€ç³»åˆ—å†…å®¹çš„å…¨è²Œã€‚</p>\n<ul>\n<li><a href=\"https://time.geekbang.org/column/article/301\">01 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šèµ·æº</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/303\">02 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šæ³›å‹ç¼–ç¨‹</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2017\">03 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šç±»å‹ç³»ç»Ÿå’Œæ³›å‹çš„æœ¬è´¨</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2711\">04 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šå‡½æ•°å¼ç¼–ç¨‹</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2723\">05 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šä¿®é¥°å™¨æ¨¡å¼</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2729\">06 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2741\">07 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šåŸºäºåŸå‹çš„ç¼–ç¨‹èŒƒå¼</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2748\">08 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šGo è¯­è¨€çš„å§”æ‰˜æ¨¡å¼</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2751\">09 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šç¼–ç¨‹çš„æœ¬è´¨</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2752\">10 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šé€»è¾‘ç¼–ç¨‹èŒƒå¼</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2754\">11 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šç¨‹åºä¸–ç•Œé‡Œçš„ç¼–ç¨‹èŒƒå¼</a></li>\n</ul>\n","neighbors":{"left":{"article_title":"34 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼ˆ5ï¼‰- ä¿®é¥°å™¨æ¨¡å¼","id":2723},"right":{"article_title":"36 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼ˆ7ï¼‰- åŸºäºåŸå‹çš„ç¼–ç¨‹èŒƒå¼","id":2741}},"comments":[{"had_liked":false,"id":195113,"user_name":"ä¸šä½™çˆ±å¥½è€…","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1585138036,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"203448600948","product_id":100002201,"comment_content":"æ§åˆ¶åè½¬å°±æ˜¯:ä»â€œå—åˆ¶äºäººâ€åˆ°â€œæˆåˆ¶äºäººâ€ã€‚","like_count":46},{"had_liked":false,"id":2445,"user_name":"å…‰æ˜","can_delete":false,"product_type":"c1","uid":1002252,"ip_address":"","ucode":"0A5E7CFD91A3CF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/0c/dab49a2b.jpg","comment_is_top":false,"comment_ctime":1517272384,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"87416618304","product_id":100002201,"comment_content":"æ–‡ç« å¤ªå¥½äº†ï¼ŒèµğŸ‘","like_count":20,"discussions":[{"author":{"id":1509673,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ts4U7Bn2aPoHmHkKfib1FfmBWrJrDwiaddia5P6HVE3NA26LkRasybwPzWScn3ZUSTYib4kz5zlANTTcy0JSlUnkmA/132","nickname":"lrlzhcoding","note":"","ucode":"9E71B9093B9667","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210700,"discussion_content":"ç‰›å‘€ï¼Œå°±æ˜¯è¿™ä¹ˆæœ‰æ·±åº¦ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584762219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98244,"user_name":"æ‹‰æ¬§","can_delete":false,"product_type":"c1","uid":1206605,"ip_address":"","ucode":"40996A8093A95F","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/4d/81c44f45.jpg","comment_is_top":false,"comment_ctime":1558941111,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"61688483255","product_id":100002201,"comment_content":"é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä¸€æ˜¯æŠ½è±¡æ€ç»´ï¼ŒæŠŠæ•°æ®å’Œç®—æ³•æŠ½è±¡æˆç±»å’Œå¯¹è±¡ï¼›äºŒæ˜¯æ ‡å‡†åŒ–ï¼Œæ¥å£å³åè®®ï¼Œæ‰€æœ‰çš„å®ç°ç±»éƒ½è¦æ»¡è¶³å®šä¹‰çš„æ¥å£æ‰å¯ä»¥ä½œä¸ºä¾èµ–ï¼›ä¸‰æ˜¯å°è£…ï¼Œå¯¹è±¡ä¹‹é—´é€šè¿‡æ¥å£è°ƒç”¨ï¼Œäº’ç›¸ä¹‹é—´ä¸å…³å¿ƒå½¼æ­¤çš„ç»†èŠ‚ï¼›æ€»ä¹‹ï¼Œæ¥å£çš„å®šä¹‰æ˜¯å¦æ¸…æ™°æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„å…³é”®ï¼›<br>ç”±äºå¯¹è±¡å†…å°è£…äº†çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨å¹¶å‘ç¯å¢ƒä¸‹å¤©ç„¶å­˜åœ¨é—®é¢˜","like_count":14},{"had_liked":false,"id":113919,"user_name":"ç€šæµ·æ˜Ÿå°˜","can_delete":false,"product_type":"c1","uid":1024461,"ip_address":"","ucode":"90F418299EA3BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/cd/2c513481.jpg","comment_is_top":false,"comment_ctime":1563185073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35922923441","product_id":100002201,"comment_content":"IoC&#47;DIPçš„æ€æƒ³çœŸæ˜¯é…·å•Šï¼ï¼ï¼","like_count":8},{"had_liked":false,"id":5658,"user_name":"è¿å­","can_delete":false,"product_type":"c1","uid":1083778,"ip_address":"","ucode":"9A8F2BBE5AA736","user_header":"https://static001.geekbang.org/account/avatar/00/10/89/82/9df54b61.jpg","comment_is_top":false,"comment_ctime":1523715032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31588486104","product_id":100002201,"comment_content":"é¢†åŸŸå»ºæ¨¡å•¥æ—¶å€™è®²è®²ï¼Ÿ","like_count":7},{"had_liked":false,"id":3529,"user_name":"Join","can_delete":false,"product_type":"c1","uid":1014873,"ip_address":"","ucode":"20F51EFFD8FEDE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/59/dc9bbb21.jpg","comment_is_top":false,"comment_ctime":1519825135,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31584596207","product_id":100002201,"comment_content":"åˆšå¥½ä»Šå¤©ä»£ç é‡Œç”¨åˆ°äº†IOC&#47;DI,è¿™æ—¶å€™çœ‹ä¸‹æ–‡ç« å¤ªæœ‰æ„Ÿè§‰äº†ï¼Œæœ‰è¡¥å……äº†æ–°çš„çŸ¥è¯†ï¼Œè°¢è°¢çš“å­å”","like_count":7},{"had_liked":false,"id":5253,"user_name":"fsj","can_delete":false,"product_type":"c1","uid":1017571,"ip_address":"","ucode":"5DA2B549C9B5FE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/86/e3/28d1330a.jpg","comment_is_top":false,"comment_ctime":1522942631,"is_pvip":false,"replies":[{"id":"1430","content":"æ±‚ä¸ä¸‘é™‹çš„ä¾‹å­","user_name":"ä½œè€…å›å¤","user_name_real":"å·¦è€³æœµ","uid":"1001269","ctime":1523159616,"ip_address":"","comment_id":5253,"utype":1}],"discussion_count":7,"race_medal":0,"score":"27292746407","product_id":100002201,"comment_content":"ç¤ºä¾‹ä¸‰ä¸­çš„ä»£ç æ„Ÿè§‰ä½¿ç”¨äº†RAIIæŠ€æœ¯ä¹Ÿå¾ˆä¸‘é™‹ï¼›æ§åˆ¶åè½¬æŒºéš¾ç†è§£çš„ï¼Œä½†æ˜¯æˆ‘è§‰å¾—æ›´éš¾çš„æ˜¯è¯†åˆ«å‡ºå“ªé‡Œéœ€è¦æ§åˆ¶åè½¬","like_count":6,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"å·¦è€³æœµ","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416652,"discussion_content":"æ±‚ä¸ä¸‘é™‹çš„ä¾‹å­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1523159616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1182146,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/c2/8c5442bf.jpg","nickname":"è€åº„é“äºº","note":"","ucode":"C102EA323A69B4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539407,"discussion_content":"å¯¹äºC++ç†Ÿæ‚‰çš„äººå°±ä¼šæ„Ÿè§‰è¿™æ˜¯C++ä¸–ç•Œé‡Œæœ€é‡è¦çš„æŠ€æœ¯ä¹‹ä¸€äº†ï¼è€Œä¸”C++æ˜¯ç¡®å®šæ€§ææ„ï¼Œå®Œå…¨å¯ä»¥è®¡ç®—åœ¨å“ªé‡Œææ„ï¼Œå“ªé‡Œé€€å‡ºï¼Œä½¿å¾—å®Œå…¨æ§åˆ¶æˆä¸ºå¯èƒ½ï¼ˆä¸åƒJavaï¼Œä½¿ç”¨åƒåœ¾å›æ”¶ï¼Œå®Œå…¨æ— æ³•è®¡ç®—å‡ºä½•æ—¶ææ„å¯¹è±¡ï¼‰\nå¦å¤–ï¼Œä»€ä¹ˆæ˜¯ä¸‘é™‹ï¼Œä»€ä¹ˆä¸æ˜¯ä¸‘é™‹å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639709407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1273920,"avatar":"https://static001.geekbang.org/account/avatar/00/13/70/40/ce062d99.jpg","nickname":"ä¸ç«¹ä¹±è€³","note":"","ucode":"933A41A394B0E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412914,"discussion_content":"æˆ‘è§‰å¾—ä¹ŸæŒºéš¾ç†è§£çš„ ä¸»è¦æ˜¯ææ„å‡½æ•°  ä½•æ—¶é€€å‡ºã€‚æˆ‘ä¹Ÿå¿˜è®°äº†ã€‚æˆ‘è§‰å¾—è€—å­åº”è¯¥è§£é‡Šä¸€ä¸‹çš„ã€‚ä¾‹å­æ˜¯ä¸å¥½ç†è§£ã€‚æ¢æˆjavaçš„ä»£ç†å°±éå¸¸æ£’äº†ã€‚ä½ ä»¬è¿™äº›äººå‘ è¿˜ä¸è®©äººæœ‰å…¶ä»–å£°éŸ³ æœäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636331809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1363691,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ce/eb/d5489892.jpg","nickname":"CComma","note":"","ucode":"58AE7F9013D402","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371454,"discussion_content":"æ§åˆ¶åè½¬æ˜¯æœ€åŸºæœ¬çš„æ¦‚å¿µäº†å§ã€‚ã€‚ã€‚éšä¾¿æ‰¾ä¸ªåº”å±Šç”Ÿé—®é—®åº”è¯¥éƒ½çŸ¥é“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619774158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2446418,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/zdK3dSkFwicZHtx5CLAKFJRORRibq2YqvHOP0tySLxVx0X1oD9AJanan2wia2hHaswgxdrCzEEGyVgFTVZ8sElTzQ/132","nickname":"Geek_fbfc4f","note":"","ucode":"7010B242A3F474","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369850,"discussion_content":"è¯´åˆ«äººä»£ç ä¸‘é™‹ï¼Œé‚£å°±è¯·ä½ ç»™å‡ºä¸ä¸‘é™‹çš„ä¾‹å­å‡ºæ¥ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619173232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148292,"avatar":"https://static001.geekbang.org/account/avatar/00/11/85/84/0dbdf8c1.jpg","nickname":"Jover","note":"","ucode":"0D4D45ED55C37B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320158,"discussion_content":"è§‰å¾—è¿™é‡ŒRAIIä¸‘é™‹çš„ï¼Œæˆ‘æ€€ç–‘ä½ æ˜¯å¤–è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604278817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2002555,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/8e/7b/701c741f.jpg","nickname":"éš¾å¾—è‡ªç„¶èŒ","note":"","ucode":"73C86B48236104","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302183,"discussion_content":"C#ä¸­æ¥å£Proxy","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598833749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96041,"user_name":"ä¸ƒæœˆæœ‰é£","can_delete":false,"product_type":"c1","uid":1439990,"ip_address":"","ucode":"B3F82397347C5B","user_header":"https://static001.geekbang.org/account/avatar/00/15/f8/f6/3e2db176.jpg","comment_is_top":false,"comment_ctime":1558315759,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14443217647","product_id":100002201,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼ŒRAII é‚£æ®µä»£ç åœ¨C++ä¸­å¯ä»¥é‚£æ ·å»å®ç°ï¼Œåœ¨JavaScriptä¸­æœ‰æ²¡æœ‰æ›¿ä»£æ–¹æ¡ˆï¼Œæœ€è¿‘å°±æœ‰è¿™ä¸ªé—®é¢˜ï¼Œä¸€ç›´æ²¡æ‰¾åˆ°å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚è¯·è€å¸ˆå›å¤ã€‚","like_count":3,"discussions":[{"author":{"id":1620237,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b9/0d/ae745ec0.jpg","nickname":"åˆ¹é‚£","note":"","ucode":"E0B1C29EB07754","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251261,"discussion_content":"è£…é¥°å™¨","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1588077374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1723812,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/4d/a4/d28eb55d.jpg","nickname":"æ‹’ç»","note":"","ucode":"36BBA79BBFEA8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":192425,"discussion_content":"ä¸æˆç†Ÿçš„å°å»ºè®®ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å°è¯•ä¸‹ä¸­é—´ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583074107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106498,"user_name":"edisonhuang","can_delete":false,"product_type":"c1","uid":1530167,"ip_address":"","ucode":"BB2F639A779F96","user_header":"https://static001.geekbang.org/account/avatar/00/17/59/37/bd2de0a4.jpg","comment_is_top":false,"comment_ctime":1561336867,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10151271459","product_id":100002201,"comment_content":"é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æœ‰ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿å’Œå¤šæ€<br>ç›¸æ¯”äºå‡½æ•°å¼ç¼–ç¨‹æ›´å¼ºè°ƒåŠ¨ä½œï¼Œé¢å‘å¯¹è±¡åˆ™æ›´å¼ºè°ƒåè¯ã€‚å®ƒæ›´ç¬¦åˆæˆ‘ä»¬äººç±»çš„æ€è€ƒæ¨¡å¼ï¼Œå°†æ•°æ®å°è£…åœ¨å¯¹è±¡ä¹‹ä¸­ <br>é¢å‘å¯¹è±¡å¼ºè°ƒä¸¤ç‚¹ï¼Œä¸€æ˜¯é¢å‘æ¥å£è€Œéé¢å‘å®ç°ç¼–ç¨‹ã€‚äºŒæ˜¯åå‘ä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿ã€‚<br>é€šè¿‡é¢å‘å¯¹è±¡çš„æ–¹æ³•ï¼Œå®ç°æ§åˆ¶åè½¬ä¸ªä¾èµ–å¯¼è‡´ã€‚å¯¹äºåº•å±‚çš„æœåŠ¡æ›´å¤šçš„æ˜¯å®ç°æ ‡å‡†çš„åè®®ï¼ŒåŒæ—¶å°†åè®®å¼€æ”¾å‡ºæ¥æä¾›ç»™å…¶ä»–ç³»ç»Ÿè®¢é˜… ã€‚è€ŒåŸºäºåè®®éœ€è¦åšæ€æ ·çš„å…·ä½“æ“ä½œï¼Œåˆ™äº¤ç»™å…¶ä»–ç³»ç»Ÿä»¥åŠæ¥å†³ç­–<br>","like_count":3},{"had_liked":false,"id":99440,"user_name":"Valen","can_delete":false,"product_type":"c1","uid":1142948,"ip_address":"","ucode":"282DB2DB480507","user_header":"https://static001.geekbang.org/account/avatar/00/11/70/a4/33bf86a0.jpg","comment_is_top":false,"comment_ctime":1559214851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10149149443","product_id":100002201,"comment_content":"@xilie å…³äºä¼šå‘˜ç­‰çº§ä¸å¤šä¸ªä¸šåŠ¡ç‰¹æƒå¯¹åº”çš„é—®é¢˜, æƒ³äº†ä¸‹å¯ä»¥ç”¨æ§åˆ¶åè½¬çš„æ–¹æ³•. å°±æ˜¯æŠ½å‡ºä¸€ä¸ª ç­‰çº§&lt;-&gt;ç‰¹æƒ çš„æ ‡å‡†å‡ºæ¥, å‘å¤–æä¾› ç±»ä¼¼ `getPrivileges(level)`, `havePrivilege(privilege, level)` çš„æ¥å£, ç„¶åä¼šå‘˜ç­‰çº§ç³»ç»Ÿå’Œä¸šåŠ¡ç³»ç»Ÿéƒ½ä¾èµ–äºè¿™ä¸ªæ ‡å‡†. æœ‰å˜åŠ¨çš„è¯å°±ç›´æ¥æ”¹è¿™ä¸ªæ ‡å‡†å°±è¡Œ","like_count":2},{"had_liked":false,"id":89147,"user_name":"xilie","can_delete":false,"product_type":"c1","uid":1013805,"ip_address":"","ucode":"AFCC4E157F7830","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVegfjqa0gM4hcRrBhZkIf7Uc5oeTMYsg6o5pd76IQlUoIIh2ic6P22xVEFtRnAzjyLtiaPVstkKug/132","comment_is_top":false,"comment_ctime":1556090991,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10146025583","product_id":100002201,"comment_content":"æœ‰ä¸ªé¢å‘å¯¹è±¡çš„è®¾è®¡é—®é¢˜æ±‚è§£ï¼š<br><br>èƒŒæ™¯ï¼š1ã€æœ‰ä¼šå‘˜ç­‰çº§ç³»ç»Ÿï¼Œç­‰çº§çº§åˆ«åˆ†ç±»éœ€è¦ç”±è¿è¥æƒ…å†µæ¥å®šå¯ä¼¸ç¼©ï¼Œå¹¶ä¸å›ºå®šï¼›2ã€å¥½å‡ ä¸ªä¸šåŠ¡ç³»ç»Ÿï¼Œè·Ÿè¿›ä¼šå‘˜ç­‰çº§ï¼Œç»™äºˆä¸åŒçš„ä¼šå‘˜æƒåˆ©ï¼›<br><br>é—®é¢˜ï¼šå¦‚æœä¼šå‘˜ç­‰çº§ç³»ç»Ÿåªæä¾›æ¥å£ï¼Œä¸šåŠ¡ç³»ç»Ÿä½¿ç”¨ï¼Œè¿™æ ·è™½ç„¶ä¼šå‘˜ç­‰çº§ç³»ç»Ÿå¾ˆå¹²å‡€ï¼Œå¯æ˜¯ä¸€æ—¦ä¼šå‘˜ç­‰çº§ç³»ç»Ÿçš„çº§åˆ«åˆ†ç±»å˜åŒ–ï¼Œå„ä¸šåŠ¡ç³»ç»Ÿå¾—å¯¹åº”å¼€å‘ã€‚è€Œå¦‚æœæ¢ä¸ªæ–¹å¼ï¼Œä¸šåŠ¡ç³»ç»Ÿæ³¨å…¥ä¸åŒç­‰çº§çš„ä¼šå‘˜æƒåˆ©ï¼Œä¼šå‘˜ç­‰çº§ç³»ç»Ÿå°±å¾ˆä¸å¹²å‡€ï¼Œè€Œä¸”å„ä¸šåŠ¡ç³»ç»Ÿæ³¨å…¥çš„ä¼šå‘˜ç­‰çº§å¯èƒ½ä¸ä¸€è‡´ï¼Œé€ æˆæ··ä¹±ã€‚<br><br>ä¸åƒå¼€å…³ï¼Œåªæœ‰å¼€å’Œå…³ï¼Œå›ºå®šä¸å˜ï¼Œä¼šå‘˜ç­‰çº§ç³»ç»Ÿå†…çš„ç­‰çº§çº§åˆ«ä¼šå˜åŒ–ï¼Œæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1062530,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/1dqCdNfN3fwbWl9JGEiamPW2Nqy53msKRZQRASEszfdsYEgbGwSVJy2S6EhJbmH5htbuwWZUYuicskRM7Jw2ibiaUA/132","nickname":"Jack","note":"","ucode":"E2D6427C2E65B6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":110876,"discussion_content":"ç»Ÿä¸€ç­‰çº§ï¼Œä¸šåŠ¡ç³»ç»Ÿå„è‡ªå®ç°æƒåˆ©","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577761911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2066246,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/87/46/125e5997.jpg","nickname":"Thyyyy","note":"","ucode":"EF90097F54784E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376639,"discussion_content":"é€‰1ï¼Œå› ä¸ºä¸åŒç­‰çº§çš„ä¼šå‘˜æƒåˆ©æ˜¯çº¯ä¸šåŠ¡çš„ä¸œè¥¿ä¸åº”è¯¥è¿›ä¼šå‘˜ç­‰çº§ç³»ç»Ÿã€‚ è¿™é‡Œæœ‰é—®é¢˜çš„æ˜¯éœ€æ±‚çš„è®¾è®¡ï¼Œä¼šå‘˜ç­‰çº§èƒ½éšæ„ä¼¸ç¼©æœ¬è´¨ä¸Šæ„å‘³ç€â€œä¼šå‘˜ç­‰çº§â€ä¸æ˜¯ä¸€ä¸ªä¸¥æ ¼å®šä¹‰çš„è§„èŒƒï¼Œåœ¨æ²¡æœ‰è§„èŒƒçš„æƒ…å†µä¸‹è°ˆä¼šå‘˜æƒåˆ©æœ¬æ¥å°±æ˜¯ä¸å¯èƒ½çš„ã€‚\næœ‰ä¸€ä¸ªå¯èƒ½åˆ°æŠ˜è¡·æ–¹æ¡ˆæ˜¯ï¼Œé¢„å…ˆå®šä¹‰å‡ºä¸€ä¸ªæ¯”è¾ƒç»†çš„å¯¹å†…ä¼šå‘˜ç­‰çº§ï¼ˆæ¯”å¦‚åˆ†100çº§ï¼‰ï¼Œä¸šåŠ¡æ–¹é’ˆå¯¹è¿™ä¸ª100çº§èµ‹äºˆæƒåˆ©ã€‚åŒæ—¶è¿è¥æ–¹åœ¨è¿™ä¸ª100çº§é‡Œé¢å»åŒºåˆ†å¤–éƒ¨çœ‹åˆ°çš„ä¼šå‘˜ç­‰çº§ã€‚\nå½“ç„¶è¿™æ ·è¿˜æ˜¯ä¸å¥½ï¼Œç†æƒ³æƒ…å†µä¸‹åº”è¯¥æ˜¯è®¨è®ºæ¸…æ¥šéœ€æ±‚ï¼Œé¢„å…ˆç¡®å®šä¸ä¼šä¿®æ”¹çš„ç­‰çº§çº§åˆ«ï¼Œæ‰èƒ½ä¿è¯å„ä¸ªä¸šåŠ¡æˆæƒç»Ÿä¸€æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622247251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20524,"user_name":"å®‹æ¡“å…¬","can_delete":false,"product_type":"c1","uid":1151948,"ip_address":"","ucode":"04235C2B87AB0E","user_header":"https://static001.geekbang.org/account/avatar/00/11/93/cc/dfe92ee1.jpg","comment_is_top":false,"comment_ctime":1534509466,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10124444058","product_id":100002201,"comment_content":"æˆ‘è§‰å¾—é¢å‘å¯¹è±¡æœ€æœ‰ç”¨çš„æ˜¯å¤šæ€","like_count":2,"discussions":[{"author":{"id":2002555,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/8e/7b/701c741f.jpg","nickname":"éš¾å¾—è‡ªç„¶èŒ","note":"","ucode":"73C86B48236104","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302184,"discussion_content":"é¦–å…ˆè¦æœ‰å°è£…æ‰ä¼šæœ‰ç»§æ‰¿æœ‰äº†ç»§æ‰¿æ‰ä¼šæœ‰å¤šæ€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598833809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169616,"user_name":"slark","can_delete":false,"product_type":"c1","uid":1143574,"ip_address":"","ucode":"7E8DE962AA23A7","user_header":"https://static001.geekbang.org/account/avatar/00/11/73/16/595b0342.jpg","comment_is_top":false,"comment_ctime":1578390615,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5873357911","product_id":100002201,"comment_content":"é¢å‘å¯¹è±¡ä»äº†è§£æ—¶å€™æ„Ÿè§‰å¾ˆè‡ªç„¶ï¼Œé€šè¿‡ç±»å°è£…æ•°æ®ï¼Œå¯¹å¤–åªæš´éœ²æ¥å£ï¼Œåªè¦æ¥å£ä¸å˜ï¼Œåº•å±‚å®ç°å¯ä»¥è¿›è¡Œæ›´æ–°ï¼ŒåŒæ—¶é€šè¿‡ç»§æ‰¿å’Œå¤šæ€ï¼Œé€‚åº”äº†åŠ¨æ€åœºæ™¯ã€‚ä½†å‡½æ•°å¼ç¼–ç¨‹é‡Œå°±ä¸éœ€è¦äº†ä¹ˆï¼ŸæœŸå¾…åç»­è¯´æ˜","like_count":1},{"had_liked":false,"id":140290,"user_name":"ä¸šä½™çˆ±å¥½è€…","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1570871475,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5865838771","product_id":100002201,"comment_content":"æœ¬æ–‡çš„æ§åˆ¶åè½¬ä¼¼ä¹å’Œspringä¸­çš„æ§åˆ¶åè½¬ä¸æ˜¯ä¸€å›äº‹ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1156607,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a5/ff/6201122c.jpg","nickname":"Geek_89bbab","note":"","ucode":"B3110D5B3C9500","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288993,"discussion_content":"Martin Fowlerä¸€ç¯‡æ–‡ç« ä¸­æåˆ°ï¼š\nç°åœ¨å¯¹æ§åˆ¶åè½¬çš„å«ä¹‰æœ‰äº›æ··æ·†;æœ‰äº›äººå°†è¿™é‡Œçš„ä¸€èˆ¬åŸåˆ™ä¸è¿™äº›å®¹å™¨ä½¿ç”¨çš„æ§åˆ¶åè½¬(å¦‚ä¾èµ–æ³¨å…¥)çš„ç‰¹å®šæ ·å¼æ··æ·†äº†ã€‚\næ–‡ä¸­è®²çš„æ˜¯é€šç”¨çš„IOCçš„ä¸€èˆ¬åŸåˆ™ã€‚ springä¸­çš„iocå¤§å¤šæ˜¯ä¾èµ–æ³¨å…¥çš„æ¨¡å¼ã€‚\nThere is some confusion these days over the meaning of inversion of control due to the rise of IoC containers; some people confuse the general principle here with the specific styles of inversion of control (such as dependency injection) that these containers use. The name is somewhat confusing (and ironic) since IoC containers are generally regarded as a competitor to EJB, yet EJB uses inversion of control just as much (if not more).","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1593952826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144462,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/8e/cf43b065.jpg","nickname":"Lee","note":"","ucode":"314D7BCB5C7C24","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379704,"discussion_content":"Springçš„IOCè®²çš„å…¶å®å°±æ˜¯ä¾èµ–æ³¨å…¥ï¼Œè€Œæˆ‘è§‰å¾—ä½œè€…è®²çš„IOCæ›´åƒæ˜¯ä¾èµ–åè½¬ï¼Œç°åœ¨å¤§å®¶å¯¹IOCçš„ç†è§£å°±åƒå¯¹é¢å‘å¯¹è±¡çš„ç†è§£ä¸€æ ·ï¼Œä¸€å®¶ä¸€ä¸ªæ ·å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624085628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":2478,"user_name":"Freezer","can_delete":false,"product_type":"c1","uid":1013840,"ip_address":"","ucode":"5592D85A343C3C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/50/1c9a95f8.jpg","comment_is_top":false,"comment_ctime":1517368279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5812335575","product_id":100002201,"comment_content":"è€—å­ç¥ï¼Œæ›´æ–°çš„å¤ªæ…¢äº†ï¼Œæ±‚åŠ é¤å•ŠğŸ™ğŸ™ğŸ™","like_count":1},{"had_liked":false,"id":2468,"user_name":"RZ_diversity","can_delete":false,"product_type":"c1","uid":1007035,"ip_address":"","ucode":"C1F39517927DE4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/bb/1c579a50.jpg","comment_is_top":false,"comment_ctime":1517345473,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5812312769","product_id":100002201,"comment_content":"çœ‹è¿‡åï¼Œå¯¹æœ¬ç§‘å­¦çš„Cï¼‹ï¼‹æœ‰äº†æ–°çš„è®¤è¯†ï¼Œéœ€è¦åå¤é¢†ä¼šå…¶ä¸­çš„çŸ¥è¯†ç‚¹","like_count":1},{"had_liked":false,"id":332283,"user_name":"ä¸ç«¹ä¹±è€³","can_delete":false,"product_type":"c1","uid":1273920,"ip_address":"","ucode":"933A41A394B0E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/70/40/ce062d99.jpg","comment_is_top":false,"comment_ctime":1643157411,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643157411","product_id":100002201,"comment_content":"é¢å‘å¯¹è±¡æœ€å¤§çš„é—®é¢˜ æŠŠé€»è¾‘å†™åœ¨ä¸åŒæ–‡ä»¶ä¸­ï¼Œç„¶ååˆæƒ³åŠæ³•èšé›†åœ¨ä¸€èµ·ã€‚æå‡ºä¸€å¤§å †  æ¦‚å¿µã€‚åŠ¨æ€ä»£ç† å§”æ‰˜ spi<br>è®©äººçœ‹ä¸æ‡‚ ç”šè‡³å¤´ç–¼ã€‚","like_count":0},{"had_liked":false,"id":276596,"user_name":"å–œå‰§ã€‚","can_delete":false,"product_type":"c1","uid":1042681,"ip_address":"","ucode":"5F9CF567792B8A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/f9/4412b473.jpg","comment_is_top":false,"comment_ctime":1612022232,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612022232","product_id":100002201,"comment_content":"ä»¥å‰å¯¹æ¥å£çš„ç†è§£ä¸æ˜¯é‚£ä¹ˆæ·±åˆ»ï¼Œä»Šå¤©å­¦ä¹ åˆ°äº†ã€‚","like_count":0},{"had_liked":false,"id":266454,"user_name":"åˆ˜åŒ¿å","can_delete":false,"product_type":"c1","uid":1319157,"ip_address":"","ucode":"CB4C1DC8C1BB31","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/f5/6cdbfa90.jpg","comment_is_top":false,"comment_ctime":1607344159,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1607344159","product_id":100002201,"comment_content":"é¢å‘å¯¹è±¡ç¡®å®æ˜¯å¾ˆå¥½çš„è®¾è®¡æ€æƒ³ï¼Œä¸è¿‡å¾ˆå¤šæƒ…å†µä¸‹ç¡®å®ä¼šå¼•èµ·å±‚å±‚å°è£…ã€‚<br>ç”¨å¥½é¢å‘å¯¹è±¡çš„éš¾ç‚¹ä¸»è¦æ˜¯å¯¹è±¡æ¦‚å¿µçš„æ‹†åˆ†å§ï¼Œé¢—ç²’åº¦å¤šå¤§åˆé€‚ï¼Ÿæ˜¯å¦æœ‰å¿…è¦æ‰€æœ‰é€»è¾‘éƒ½åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Ÿå½“å‰è¿™ä¹ˆæ‹†æ˜¯å¦æ˜¯è¿‡åº¦è®¾è®¡ï¼Ÿ<br>è¿›ä¸€æ­¥è®²ï¼Œéš¾ç‚¹è¿˜æ˜¯åœ¨äºéœ€æ±‚èµ°å‘çš„æŠŠæ¡å§","like_count":0},{"had_liked":false,"id":261529,"user_name":"çˆ±å­¦ä¹ çš„å¤§å”","can_delete":false,"product_type":"c1","uid":1085152,"ip_address":"","ucode":"91F9ABF1EC98D0","user_header":"https://static001.geekbang.org/account/avatar/00/10/8e/e0/847348b1.jpg","comment_is_top":false,"comment_ctime":1605402952,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605402952","product_id":100002201,"comment_content":"ç”¨äº†å‡ å¹´c#ï¼Œé¢å‘å¯¹è±¡ä½ æ€»æ˜¯å¯ä»¥å¾ˆå¥½çš„å»æ ¹æ®ç°å®ä¸–ç•Œå»æŠ½è±¡äº‹ç‰©ï¼Œåå¤„å°±æ˜¯ç³»ç»Ÿå¤§äº†ç±»æ»¡å¤©é£ï¼Œä½†æ˜¯ä½ åˆä¸å¾—ä¸ç”¨ã€‚","like_count":0},{"had_liked":false,"id":256623,"user_name":"å°æ–‡åŒå­¦","can_delete":false,"product_type":"c1","uid":1001893,"ip_address":"","ucode":"48F2AEB989C12A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","comment_is_top":false,"comment_ctime":1603692409,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603692409","product_id":100002201,"comment_content":"é¢å‘å¯¹è±¡ç¼–ç¨‹å¯ä»¥è¯´æ˜¯æˆ‘æœ€ç†Ÿæ‚‰çš„ç¼–ç¨‹èŒƒå¼ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„ä¸€ç‚¹ç‚¹ç†è§£ï¼š<br>1ã€é¢å‘å¯¹è±¡ç¼–ç¨‹æ³¨é‡æŠ½è±¡å’Œåˆ†å±‚ï¼Œè¿™æ˜¯è®¡ç®—æœºç§‘å­¦è§£å†³å¤æ‚é—®é¢˜çš„æ–¹æ¡ˆï¼Œç”šè‡³æ˜¯äººç±»è§£å†³å¤æ‚é—®é¢˜çš„æ–¹æ¡ˆã€‚å¦‚ SpringMVCï¼Œå°±æ˜¯å…¸å‹çš„ä¸€ç§åˆ†å±‚å’ŒæŠ½è±¡ç­–ç•¥ï¼Œå®ƒè®©æˆ‘ä»¬è®¾è®¡å¤§å‹å¤æ‚ç³»ç»Ÿæˆä¸ºäº†å¯èƒ½ï¼Œå¯ä»¥é€å±‚å‡»ç ´ï¼Œå¹¶ä¸”å„è‡ªä¼˜åŒ–ã€‚<br>2ã€é¢å‘å¯¹è±¡ç¼–ç¨‹è¿˜å¤©ç„¶åœ°å¥‘åˆç°å®ç”Ÿæ´»ï¼Œä½¿ä»£ç æ˜“äºç†è§£ã€‚<br><br>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œæˆ‘è‡ªå·±è¸©è¿‡çš„å‘ï¼Œå°±æ˜¯åˆ†å±‚é€ä¼ é—®é¢˜ã€‚åº•å±‚çš„å®ç°ç›´æ¥æµ®ä¸ŠæŠ½è±¡å±‚ï¼Œè¿™æ ·å°±ä¼šå‡ºç°ä»£ç é€æ¸å¥”æºƒçš„ç°è±¡ã€‚å‡å¦‚å¯ä»¥æ·±å…¥å›ç­”ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘è§‰å¾—å¯ä»¥ç†è§£ä¸ºå¯¹OOPå…¥é—¨ï¼š<br>1ã€ä¸ºä»€ä¹ˆç±»ä¼¼çš„ å®ä½“ç±» å¯¹è±¡ï¼Œè¦åˆ† VOã€Entityã€DOç­‰å¤šä¸ªç±»ä¼¼çš„å¯¹è±¡ï¼Ÿ<br>2ã€ä¸ºä»€ä¹ˆå†™ä¸€ä¸ªå®ç°ç±»ï¼Œæ€»æ˜¯è¦å…ˆå†™ä¸€ä¸ªæ¥å£ï¼Ÿ<br>3ã€ä¸ºä»€ä¹ˆå¾ˆå¤šåœ°æ–¹éœ€è¦ä¸€ä¸ªå·¥å‚æ¨¡å¼ï¼Ÿä¸å»ºè®®ç›´æ¥ new ä¸€ä¸ªå¯¹è±¡ï¼Ÿ","like_count":0},{"had_liked":false,"id":247764,"user_name":"ä½ ä¸ºå•¥é‚£ä¹ˆç‰›","can_delete":false,"product_type":"c1","uid":1503506,"ip_address":"","ucode":"1ABC604A54A8F6","user_header":"https://static001.geekbang.org/account/avatar/00/16/f1/12/7dac30d6.jpg","comment_is_top":false,"comment_ctime":1599824017,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1599824017","product_id":100002201,"comment_content":"é¢å‘å¯¹è±¡ï¼Œæœ‰ä¸€ç§å†™æ³•ï¼Œéœ€è¦è€—å­å”æä¾›ç‚¹å»ºè®®ã€‚<br>æ¯”å¦‚æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯ç”¨æˆ·å¯¹è±¡ Userï¼Œä¸€ä¸ªæ˜¯ç»„ç»‡å¯¹è±¡Organizationã€‚<br>1ã€æˆ‘æƒ³æŸ¥æœºæ„ä¸‹æ‰€æœ‰ç”¨æˆ·ï¼Œæ¯”å¦‚å®šä¹‰äº†GetUser(string orgId)ï¼Œé‚£è¿™ä¸ªå®šä¹‰æ˜¯å½’å±äºUserã€è¿˜æ˜¯Organizationï¼Ÿ<br>2ã€æ¯”å¦‚æˆ‘è¦å£°æ˜ä¸€ä¸ªç»„ç»‡å¯¹è±¡ï¼Œæœ‰ä¸€ç§å†™æ³•æ˜¯å†Organizationå¾—æ„é€ å‡½æ•°é‡Œï¼Œä¼ å…¥äº†orgIdï¼Œç”¨äºåˆå§‹åŒ–æœºæ„å¯¹è±¡ã€‚æ¯”å¦‚ var org = new Organization(&quot;orgId&quot;); æ­¤ç§æ–¹å¼ï¼Œå¯ä¸å¯å–ï¼Ÿ<br>3ã€æ¯”å¦‚å®šä¹‰GetUser å½’å±äºç»„ç»‡ä¸‹ï¼Œä¾¿æœ‰äº†æ­¤è°ƒç”¨ã€‚List&lt;User&gt; usr = org.GetUser()ï¼Œæœºæ„IDå¾—å‚æ•°æ˜¯é€šè¿‡æ„é€ å™¨ä¼ å…¥å¾—ã€‚å¾ªç¯usræ—¶ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨usrå†…çš„å±æ€§ã€æ–¹æ³•ç­‰ï¼Œç»§ç»­è¿›è¡ŒUserå¯¹è±¡å¾—æ“ä½œã€‚<br><br>ä»¥ä¸Šæ–¹å¼ï¼Œå°±æ˜¯å¾®è½¯æ¨å´‡å¾—é¢å‘å¯¹è±¡ç¼–ç¨‹å¾—é€»è¾‘ï¼Œæ„Ÿè§‰å¾ˆæ­£ç¡®ï¼Œä½†ä¹Ÿè§‰å¾—å¾ˆä¸çˆ½ï¼è€—å­å”ï¼Œä½ æ€ä¹ˆçœ‹ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1299347,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d3/93/c3fb8566.jpg","nickname":"ProcessIsTheKey","note":"","ucode":"BE02EFD75F7D98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376610,"discussion_content":"ä¸ªäººè§è§£ï¼š\n1ã€getUser(String orgId)è¿™ä¸ªå®šä¹‰ä¸ªäººè§‰å¾—å½’å±äºUseræ›´å¥½ï¼Œè·å–æŸç±»æˆ–æŸä¸ªå¯¹è±¡å°±åº”è¯¥å½’å±äºå®ƒæ‰€åœ¨çš„é¢†åŸŸå†…ï¼Œç»Ÿä¸€è¿™æ ·å¤„ç†ï¼Œä¸šåŠ¡åŠä»£ç è¾¹ç•Œéå¸¸æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ï¼›\n2ã€Organization org = new Organization(&#34;orgId&#34;);è¿™ç§æ–¹å¼ï¼Œä¸€èˆ¬å¯ä»¥ç”¨ï¼Œå¤šæ•°æƒ…å†µä¸‹new ä¸€ä¸ªç©ºçš„å¯¹è±¡ï¼Œç„¶åè°ƒç”¨setteræ–¹æ³•æ›´åˆé€‚ä¸€äº›ã€‚\n3ã€è¿™ä¸€ç‚¹è·Ÿç¬¬ä¸€ç‚¹æœ‰äº›å†²çªäº†ï¼Œä¸å¤ªå»ºè®®ä½¿ç”¨ã€‚\nä»¥ä¸Šçº¯ç²¹ä¸ªäººè§è§£ï¼Œè¿˜è¯·å„ä½å¤§ä½¬æŒ‡æ•™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622210618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223433,"user_name":"è‚–è‡§","can_delete":false,"product_type":"c1","uid":1047733,"ip_address":"","ucode":"4FAC9FF54DD6A0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/b5/ac717737.jpg","comment_is_top":false,"comment_ctime":1591088384,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591088384","product_id":100002201,"comment_content":"â€œactPrice = item.Strategy.GetActPrice(item.price * item.quantity)â€<br>Itemè¿™ä¸ªç±»åº”è¯¥æœ‰ä¸ªgetPriceæ–¹æ³•å§ï¼Œç„¶ååœ¨å§”æ‰˜ç»™BillStrategyæ¥å£çš„getActPriceæ–¹æ³•ï¼Œæˆ‘è§‰å¾—ä¸åº”è¯¥æŠŠStrategyæš´éœ²å‡ºæ¥ï¼Œè¿™æ ·è¿åå°è£…æ€§äº†ã€‚å¦å¤–è¿™æ˜¯Javaä»£ç å§ï¼Œè‡³å°‘æ–¹æ³•çš„å‘½åè§„åˆ™ä¹Ÿåº”è¯¥ç¬¦åˆé©¼å³°å‘½åæ³•ã€‚æ„Ÿè§‰è¿™ä¸ªä¾‹å­ä¸åƒè€—å­è€å¸ˆä¸¥è°¨çš„é£æ ¼ã€‚","like_count":0},{"had_liked":false,"id":213226,"user_name":"Edward Lee","can_delete":false,"product_type":"c1","uid":1228518,"ip_address":"","ucode":"156223F1D7E94A","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/e6/7808520d.jpg","comment_is_top":false,"comment_ctime":1588335970,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588335970","product_id":100002201,"comment_content":"æˆ‘è§‰å¾—é¢å‘å¯¹è±¡ç¼–ç¨‹å…¶ä¸­ä¸€ä¸ªç¼ºç‚¹æ˜¯å®¹æ˜“äº§ç”Ÿè¿‡åº¦è®¾è®¡ï¼Œæ›´ä¸¥é‡çš„ç¼ºç‚¹åˆæ˜¯ä¸è®¾è®¡","like_count":0},{"had_liked":false,"id":211315,"user_name":"Geek_dwq","can_delete":false,"product_type":"c1","uid":1817279,"ip_address":"","ucode":"7DC6BFCF746787","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/wI2LwgvwseNqXwkF67zicD9UXBSle9DPhmL6uyKG9Nib6NLfU3OuKYuSQ4DHCWxIQecnqell2vKVvNX8boox0B8w/132","comment_is_top":false,"comment_ctime":1587948050,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587948050","product_id":100002201,"comment_content":"IoC æ§åˆ¶åè½¬ä½¿ç”¨çš„ä¾‹å­å¾ˆèµï¼Œé€šä¿—æ˜“æ‡‚","like_count":0},{"had_liked":false,"id":205826,"user_name":"LeonardRon","can_delete":false,"product_type":"c1","uid":1026808,"ip_address":"","ucode":"1B3ACC61DE1877","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/f8/4b89254e.jpg","comment_is_top":false,"comment_ctime":1586744663,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586744663","product_id":100002201,"comment_content":"ç†è®ºçŸ¥è¯†ï¼Œè¿˜æ˜¯è¦å¤šå“æ‰èƒ½é¢†æ‚Ÿ","like_count":0},{"had_liked":false,"id":200443,"user_name":"æœªæ¥å°å¨ƒ","can_delete":false,"product_type":"c1","uid":1047329,"ip_address":"","ucode":"477D166EBB6B70","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/21/d017438c.jpg","comment_is_top":false,"comment_ctime":1585584837,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585584837","product_id":100002201,"comment_content":"è€—å­å”è®²æŠ€æœ¯æ·±å…¥æµ…å‡ºï¼Œå°±å–œæ¬¢è¿™ç§feel","like_count":0},{"had_liked":false,"id":183202,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1582971168,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582971168","product_id":100002201,"comment_content":"è¿™ä¸ªè¿˜æ¯”è¾ƒç†Ÿæ‚‰ï¼Œé¢å‘å¯¹è±¡ï¼Œä¸‡äº‹ä¸‡ç‰©çš†å¯¹è±¡ï¼Œå¼ºè°ƒé¢å‘æ¥å£ç¼–ç¨‹ï¼ˆæ¥å£æ—¢åè®®ï¼Œå¥½ä¼¼å¼ºè°ƒå¥‘çº¦ç²¾ç¥ï¼Œåè®®æ—¢å®šä»¥è¯šä¸ºæœ¬ï¼‰åŠç»„åˆä¼˜äºç»§æ‰¿ã€‚<br>æ§åˆ¶åè½¬å’Œä¾èµ–å€’ç½®é‚£ä¸€å—å’Œä¹‹å‰å­¦çš„å¤§åŒå°å¼‚ï¼Œä¼°è®¡æ˜¯è®²è§£è§’åº¦çš„å·®å¼‚å¼•èµ·çš„ã€‚","like_count":0},{"had_liked":false,"id":180638,"user_name":"æŠ€æœ¯éª¨å¹²","can_delete":false,"product_type":"c1","uid":1098720,"ip_address":"","ucode":"8FCF8DE6D29201","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/e0/3db22579.jpg","comment_is_top":false,"comment_ctime":1582356845,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582356845","product_id":100002201,"comment_content":"è®²çš„é€šä¿—æ˜“æ‡‚ã€‚","like_count":0},{"had_liked":false,"id":171600,"user_name":"è¡Œé“æœ‰å¾·","can_delete":false,"product_type":"c1","uid":1495977,"ip_address":"","ucode":"92B2A5A6E8E7C3","user_header":"https://static001.geekbang.org/account/avatar/00/16/d3/a9/36e59707.jpg","comment_is_top":false,"comment_ctime":1578972710,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578972710","product_id":100002201,"comment_content":"æŠ½ä¸å‰¥èŒ§","like_count":0}]}