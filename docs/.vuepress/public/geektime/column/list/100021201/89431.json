{"id":89431,"title":"49 | æ¨èç³»ç»Ÿï¼ˆä¸Šï¼‰ï¼šå¦‚ä½•å®ç°åŸºäºç›¸ä¼¼åº¦çš„ååŒè¿‡æ»¤ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ç”³ã€‚</p><p>ä¸ªæ€§åŒ–æ¨èè¿™ç§æŠ€æœ¯åœ¨å„å¤§äº’è”ç½‘ç«™ç‚¹å·²ç»æ™®éä½¿ç”¨äº†ï¼Œç³»ç»Ÿä¼šæ ¹æ®ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œä¸»åŠ¨æå‡ºä¸€äº›å»ºè®®ï¼Œå¸®åŠ©ä»–ä»¬å‘ç°ä¸€äº›å¯èƒ½æ„Ÿå…´è¶£çš„ç”µå½±ã€ä¹¦ç±æˆ–è€…æ˜¯å•†å“ç­‰ç­‰ã€‚åœ¨è¿™æ–¹é¢ï¼Œæœ€ç»å…¸çš„æ¡ˆä¾‹åº”è¯¥æ˜¯ç¾å›½çš„äºšé©¬é€Šç”µå­å•†åŠ¡ç½‘ç«™ï¼Œå®ƒæ˜¯å…¨çƒæœ€å¤§çš„B2Cç”µå•†ç½‘ç«™ä¹‹ä¸€ã€‚åœ¨å…¬å¸åˆ›ç«‹ä¹‹åˆï¼Œæœ€ä¸ºå‡ºåçš„å°±æ˜¯å…¶ä¸°å¯Œçš„å›¾ä¹¦å“ç±»ï¼Œä»¥åŠç›¸åº”çš„æ¨èæŠ€æœ¯ã€‚äºšé©¬é€Šçš„æ¨èé”€å”®å æ¯”å¯ä»¥è¾¾åˆ°æ•´ä½“é”€å”®çš„30%å·¦å³ã€‚å¯è§ï¼Œå¯¹äºå…¬å¸æ¥è¯´ï¼Œæ¨èç³»ç»Ÿä¹Ÿæ˜¯é”€å”®çš„ç»å¥½æœºä¼šã€‚å› æ­¤ï¼Œæ¥ä¸‹æ¥çš„ä¸¤èŠ‚ï¼Œæˆ‘ä¼šä½¿ç”¨ä¸€ä¸ªç»å…¸çš„æ•°æ®é›†ï¼Œå¸¦ä½ è¿›è¡Œæ¨èç³»ç»Ÿæ ¸å¿ƒæ¨¡å—çš„è®¾è®¡å’Œå®ç°ã€‚</p><h2>MovieLensæ•°æ®é›†</h2><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸€ä¸ªçŸ¥åçš„æ•°æ®é›†ï¼ŒMovieLensã€‚ä½ å¯ä»¥åœ¨å®ƒçš„<a href=\"http://files.grouplens.org/datasets/movielens/\">ä¸»é¡µ</a>æŸ¥çœ‹è¯¦ç»†çš„ä¿¡æ¯ã€‚è¿™ä¸ªæ•°æ®é›†æœ€æ ¸å¿ƒçš„å†…å®¹æ˜¯å¤šä½ç”¨æˆ·å¯¹ä¸åŒç”µå½±çš„è¯„åˆ†ï¼Œæ­¤å¤–ï¼Œå®ƒä¹ŸåŒ…æ‹¬äº†ä¸€äº›ç”µå½±å’Œç”¨æˆ·çš„å±æ€§ä¿¡æ¯ï¼Œä¾¿äºæˆ‘ä»¬ç ”ç©¶æ¨èç»“æœæ˜¯ä¸æ˜¯åˆç†ã€‚å› æ­¤ï¼Œè¿™ä¸ªæ•°æ®é›†ç»å¸¸ç”¨æ¥åšæ¨èç³»ç»Ÿã€æˆ–è€…å…¶ä»–æœºå™¨å­¦ä¹ ç®—æ³•çš„æµ‹è¯•é›†ã€‚</p><p>æ—¶è‡³ä»Šæ—¥ï¼Œè¿™ä¸ªæ•°æ®é›†å·²ç»å»¶ä¼¸å‡ºå‡ ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼Œæœ‰ä¸åŒçš„æ•°æ®è§„æ¨¡å’Œæ›´æ–°æ—¥æœŸã€‚æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸€ä¸ªæœ€æ–°çš„å°è§„æ¨¡æ•°æ®é›†ï¼ŒåŒ…å«äº†600ä½ç”¨æˆ·å¯¹äº9000éƒ¨ç”µå½±çš„çº¦10ä¸‡æ¡è¯„åˆ†ï¼Œæœ€åæ›´æ–°äº2018å¹´9æœˆã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ï¼š<a href=\"http://files.grouplens.org/datasets/movielens/ml-latest-small.zip\">http://files.grouplens.org/datasets/movielens/ml-latest-small.zip</a>ã€‚</p><!-- [[[read_end]]] --><p>è§£å‹äº†è¿™ä¸ªzipå‹ç¼©åŒ…ä¹‹åï¼Œä½ ä¼šçœ‹åˆ°readmeæ–‡ä»¶å’Œå››ä¸ªcsvæ–‡ä»¶ï¼ˆratingsã€moviesã€linkså’Œtagsï¼‰ã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯ratingsï¼Œå®ƒåŒ…å«äº†10ä¸‡æ¡è¯„åˆ†ï¼Œæ¯æ¡è®°å½•æœ‰4ä¸ªå­—æ®µï¼ŒåŒ…æ‹¬userIdã€movieIdã€ratingã€timestampã€‚userIdè¡¨ç¤ºæ¯ä½ç”¨æˆ·çš„idï¼ŒmovieIdæ˜¯æ¯éƒ¨ç”µå½±çš„IDï¼Œratingæ˜¯è¿™ä½ç”¨æˆ·å¯¹è¿™éƒ¨ç”µå½±çš„è¯„åˆ†ï¼Œå–å€¼ä¸º0-5åˆ†ã€‚timestampæ˜¯æ—¶é—´æˆ³ã€‚è€ŒmoviesåŒ…å«äº†ç”µå½±çš„ä¸»è¦å±æ€§ä¿¡æ¯ï¼Œtitleå’Œgenresåˆ†åˆ«è¡¨ç¤ºç”µå½±çš„æ ‡é¢˜å’Œç±»å‹ï¼Œä¸€éƒ¨ç”µå½±å¯ä»¥å±äºå¤šç§ç±»å‹ã€‚linkså’Œtagsåˆ™åŒ…å«äº†ç”µå½±çš„å…¶ä»–å±æ€§ä¿¡æ¯ã€‚æˆ‘ä»¬çš„å®éªŒä¸»è¦ä½¿ç”¨ratingså’Œmoviesé‡Œçš„æ•°æ®ã€‚</p><h2>è®¾è®¡çš„æ•´ä½“æ€è·¯</h2><p>æœ‰äº†ç”¨äºå®éªŒçš„æ•°æ®ï¼Œæ¥ä¸‹æ¥å°±è¦å¼€å§‹è€ƒè™‘å¦‚ä½•è®¾è®¡è¿™ä¸ªæ¨èç³»ç»Ÿã€‚æˆ‘åœ¨ç¬¬38æœŸè®²è§£äº†ä»€ä¹ˆæ˜¯ååŒè¿‡æ»¤æ¨èç®—æ³•ã€åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤å’ŒåŸºäºç‰©å“çš„ååŒè¿‡æ»¤ã€‚è¿™ä¸€èŠ‚æˆ‘ä»¬å°±ä»¥ååŒè¿‡æ»¤ä¸ºåŸºç¡€ï¼Œåˆ†åˆ«å®ç°åŸºäºç”¨æˆ·å’Œç‰©å“çš„è¿‡æ»¤ã€‚</p><p>æ ¹æ®ååŒè¿‡æ»¤ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼Œæ•´ä¸ªç³»ç»Ÿå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªå¤§çš„æ­¥éª¤ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œç”¨æˆ·è¯„åˆ†çš„æ ‡å‡†åŒ–ã€‚å› ä¸ºæœ‰äº›ç”¨æˆ·çš„æ‰“åˆ†æ¯”è¾ƒå®½æ¾ï¼Œè€Œæœ‰äº›ç”¨æˆ·æ‰“åˆ†åˆ™æ¯”è¾ƒæŒ‘å‰”ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ ‡å‡†åŒ–æˆ–è€…å½’ä¸€åŒ–ï¼Œè®©ä¸åŒç”¨æˆ·çš„æ‰“åˆ†å…·æœ‰å¯æ¯”æ€§ï¼Œè¿™é‡Œæˆ‘ä¼šä½¿ç”¨<strong>zåˆ†æ•°</strong>æ ‡å‡†åŒ–ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œè¡¡é‡å’Œå…¶ä»–ç”¨æˆ·æˆ–è€…ç‰©å“ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚æˆ‘ä»¬è¿™é‡Œçš„ç‰©å“å°±æ˜¯ç”µå½±ã€‚åœ¨åŸºäºç”¨æˆ·çš„è¿‡æ»¤ä¸­ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°ç›¸ä¼¼çš„ç”¨æˆ·ã€‚åœ¨åŸºäºç‰©å“çš„è¿‡æ»¤ä¸­ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°ç›¸ä¼¼çš„ç”µå½±ã€‚æˆ‘è¿™é‡Œåˆ—å‡ºè®¡ç®—ç”¨æˆ·ä¹‹é—´ç›¸ä¼¼åº¦$us$å’Œç‰©å“ä¹‹é—´ç›¸ä¼¼åº¦$is$çš„å…¬å¼ã€‚ä¹‹å‰æˆ‘ä»¬è®²è¿‡ï¼Œè¿™äº›éƒ½å¯ä»¥é€šè¿‡çŸ©é˜µæ“ä½œæ¥å®ç°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/ec/8e002cc0e287f675221e42df5c249fec.png?wh=794*158\" alt=\"\"><img src=\"https://static001.geekbang.org/resource/image/3c/2b/3c04082d6f87f9268eceb65cb624892b.png?wh=812*154\" alt=\"\"></p><p>æˆ‘ä»¬ä»¥åŸºäºç”¨æˆ·çš„è¿‡æ»¤ä¸ºä¾‹ã€‚å‡è®¾æˆ‘ä»¬ä½¿ç”¨å¤¹è§’ä½™å¼¦æ¥è¡¡é‡ç›¸ä¼¼åº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨ç”¨æˆ·è¯„åˆ†çš„çŸ©é˜µç‚¹ä¹˜è‡ªèº«çš„è½¬ç½®æ¥è®¡ç®—ä½™å¼¦å¤¹è§’ã€‚ç”¨æˆ·è¯„åˆ†çš„çŸ©é˜µ$X$ä¸­ï¼Œæ¯ä¸€è¡Œæ˜¯æŸä½ç”¨æˆ·çš„è¡Œå‘é‡ï¼Œæ¯ä¸ªåˆ†é‡è¡¨ç¤ºè¿™ä½ç”¨æˆ·å¯¹æŸéƒ¨ç”µå½±çš„æ‰“åˆ†ã€‚è€ŒçŸ©é˜µ$Xâ€™$çš„æ¯ä¸€åˆ—æ˜¯æŸä¸ªç”¨æˆ·çš„åˆ—å‘é‡ï¼Œæ¯ä¸ªåˆ†é‡è¡¨ç¤ºç”¨æˆ·å¯¹æŸéƒ¨ç”µå½±çš„æ‰“åˆ†ã€‚</p><p>æˆ‘ä»¬å‡è®¾$XXâ€™$çš„ç»“æœä¸ºçŸ©é˜µ$Y$ï¼Œé‚£ä¹ˆ$y_{i,j}$å°±è¡¨ç¤ºç”¨æˆ·$i$å’Œç”¨æˆ·$j$è¿™ä¸¤è€…å–œå¥½åº¦å‘é‡çš„ç‚¹ä¹˜ç»“æœï¼Œå®ƒå°±æ˜¯å¤¹è§’ä½™å¼¦å…¬å¼ä¸­çš„åˆ†å­ã€‚å¦‚æœ$i$ç­‰äº$j$ï¼Œé‚£ä¹ˆè¿™ä¸ªè®¡ç®—å€¼ä¹Ÿæ˜¯å¤¹è§’ä½™å¼¦å…¬å¼åˆ†æ¯çš„ä¸€éƒ¨åˆ†ã€‚ä»çŸ©é˜µçš„è§’åº¦æ¥çœ‹ï¼Œ$Y$ä¸­ä»»ä½•ä¸€ä¸ªå…ƒç´ éƒ½å¯èƒ½ç”¨äºå¤¹è§’ä½™å¼¦å…¬å¼çš„åˆ†å­ï¼Œè€Œå¯¹è§’çº¿ä¸Šçš„å€¼ä¼šç”¨äºå¤¹è§’ä½™å¼¦å…¬å¼çš„åˆ†æ¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨$Y$æ¥è®¡ç®—ä»»ä½•ä¸¤ä¸ªç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªç¤ºä¾‹è®²è§£è¿‡å¯¹äºåŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ï¼Œå¦‚ä½•è®¡ç®—çŸ©é˜µ$Y$ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨$Y$æ¥è®¡ç®—ä½™å¼¦å¤¹è§’ï¼Œæˆ‘è¿™é‡Œåˆ—å‡ºæ¥ç»™ä½ å‚è€ƒã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/79/2b/79e7065dade1b1a4d38639bb9d2cea2b.png?wh=984*964\" alt=\"\"><img src=\"https://static001.geekbang.org/resource/image/9d/42/9ddfe8b7874d9d708fa367ccca967942.png?wh=1768*1028\" alt=\"\"></p><p>ç¬¬ä¸‰æ­¥ï¼Œæ ¹æ®ç›¸ä¼¼çš„ç”¨æˆ·æˆ–ç‰©å“ï¼Œç»™å‡ºé¢„æµ‹çš„å¾—åˆ†pã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0a/29/0ace6bd5295a83ab6da8f5357a755929.png?wh=306*210\" alt=\"\"><img src=\"https://static001.geekbang.org/resource/image/8e/23/8e170042ec88bdf48908ea0bdc2d7423.png?wh=282*200\" alt=\"\"></p><p>ä¹‹å‰æˆ‘ä»¬ä¹Ÿè§£é‡Šè¿‡å¦‚ä½•ä½¿ç”¨çŸ©é˜µæ“ä½œæ¥å®ç°è¿™ä¸€æ­¥ã€‚è¿˜æ˜¯ä»¥åŸºäºç”¨æˆ·çš„è¿‡æ»¤ä¸ºä¾‹ã€‚å‡è®¾é€šè¿‡ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬å·²ç»å¾—åˆ°ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ$US$ï¼Œ$US$å’Œè¯„åˆ†çŸ©é˜µ$X$çš„ç‚¹ä¹˜ç»“æœä¸ºçŸ©é˜µ$USP$ã€‚æ²¿ç”¨å‰é¢çš„ç¤ºä¾‹ï¼Œç»“æœå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/65/1f/65ff214ce18ccc12193bf17cd1ec201f.png?wh=1108*468\" alt=\"\"></p><p>ç„¶åå¯¹$US$æŒ‰è¡Œæ±‚å’Œï¼Œè·å¾—çŸ©é˜µ$USR$ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/28/0e/28c5469d3fcacda96604f66dfc883a0e.png?wh=852*330\" alt=\"\"></p><p>æœ€ç»ˆï¼Œæˆ‘ä»¬ä½¿ç”¨$USP$å’Œ$USR$çš„å…ƒç´ å¯¹åº”é™¤æ³•ï¼Œå°±å¯ä»¥æ±‚å¾—ä»»æ„ç”¨æˆ·å¯¹ä»»æ„ç”µå½±çš„è¯„åˆ†çŸ©é˜µ$P$ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/eb/c8/eba06795db612c7be96118b9fa93cfc8.png?wh=1452*592\" alt=\"\"></p><p>æœ‰äº†è¿™ä¸ªè®¾è®¡çš„æ€è·¯ï¼Œä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Pythonè¿›è¡Œå®è·µäº†ã€‚</p><h2>æ ¸å¿ƒPythonä»£ç </h2><p>åœ¨å®ç°ä¸Šè¿°è®¾è®¡çš„ä¸‰ä¸ªä¸»è¦æ­¥éª¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŠŠè§£å‹åçš„csvæ–‡ä»¶åŠ è½½åˆ°æ•°ç»„ï¼Œå¹¶è½¬ä¸ºçŸ©é˜µã€‚ä¸‹é¢æˆ‘åˆ—å‡ºäº†ä¸»è¦çš„æ­¥éª¤å’Œæ³¨é‡Šã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºè¿™ä¸ªæ•°æ®é›†ä¸­çš„ç”¨æˆ·å’Œç”µå½±IDéƒ½æ˜¯ä»1å¼€å§‹è€Œä¸æ˜¯ä»0å¼€å§‹ï¼Œæ‰€ä»¥éœ€è¦å‡å»1ï¼Œæ‰èƒ½å’ŒPythonæ•°ç»„ä¸­çš„ç´¢å¼•ä¸€è‡´ã€‚</p><pre><code>import pandas as pd\nfrom numpy import *\n\n\n# åŠ è½½ç”¨æˆ·å¯¹ç”µå½±çš„è¯„åˆ†æ•°æ®\ndf = pd.read_csv(&quot;/Users/shenhuang/Data/ml-latest-small/ratings.csv&quot;)\n\n\n# è·å–ç”¨æˆ·çš„æ•°é‡å’Œç”µå½±çš„æ•°é‡\nuser_num = df[&quot;userId&quot;].max()\nmovie_num = df[&quot;movieId&quot;].max()\n\n\n# æ„é€ ç”¨æˆ·å¯¹ç”µå½±çš„äºŒå…ƒå…³ç³»çŸ©é˜µ\nuser_rating = [[0.0] * movie_num for i in range(user_num)]\n\n\ni = 0\nfor index, row in df.iterrows():   # è·å–æ¯è¡Œçš„indexã€row\n\n\n  # ç”±äºç”¨æˆ·å’Œç”µå½±çš„IDéƒ½æ˜¯ä»1å¼€å§‹ï¼Œä¸ºäº†å’ŒPythonçš„ç´¢å¼•ä¸€è‡´ï¼Œå‡å»1\n  userId = int(row[&quot;userId&quot;]) - 1\n  movieId = int(row[&quot;movieId&quot;]) - 1\n\n\n  # è®¾ç½®ç”¨æˆ·å¯¹ç”µå½±çš„è¯„åˆ†\n  user_rating[userId][movieId] = row[&quot;rating&quot;]\n\n\n  # æ˜¾ç¤ºè¿›åº¦\n  i += 1\n  if i % 10000 == 0:\n    print(i)\n\n\n# æŠŠäºŒç»´æ•°ç»„è½¬åŒ–ä¸ºçŸ©é˜µ\nx = mat(user_rating)\nprint(x)\n</code></pre><p>åŠ è½½äº†æ•°æ®ä¹‹åï¼Œç¬¬ä¸€æ­¥å°±æ˜¯å¯¹çŸ©é˜µä¸­çš„æ•°æ®ï¼Œä»¥è¡Œä¸ºç»´åº¦ï¼Œè¿›è¡Œæ ‡å‡†åŒ–ã€‚</p><pre><code># æ ‡å‡†åŒ–æ¯ä½ç”¨æˆ·çš„è¯„åˆ†æ•°æ®\nfrom sklearn.preprocessing import scale\n\n\n# å¯¹æ¯ä¸€è¡Œçš„æ•°æ®ï¼Œè¿›è¡Œæ ‡å‡†åŒ–\nx_s = scale(x, with_mean=True, with_std=True, axis=1)\nprint(&quot;æ ‡å‡†åŒ–åçš„çŸ©é˜µï¼š&quot;, x_s)\n</code></pre><p>ç¬¬äºŒæ­¥æ˜¯è®¡ç®—è¡¨ç¤ºç”¨æˆ·ä¹‹é—´ç›¸ä¼¼åº¦çš„çŸ©é˜µUSã€‚å…¶ä¸­ï¼Œyå˜é‡ä¿å­˜äº†çŸ©é˜µXå·¦ä¹˜è½¬ç½®çŸ©é˜µXâ€™çš„ç»“æœã€‚è€Œåˆ©ç”¨yå˜é‡ä¸­çš„å…ƒç´ ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥å¾—åˆ°ä¸åŒå‘é‡ä¹‹é—´çš„å¤¹è§’ä½™å¼¦ã€‚</p><pre><code># è·å–XX'\ny = x_s.dot(x_s.transpose())\nprint(&quot;XX'çš„ç»“æœæ˜¯'ï¼š&quot;, y)\n\n\n# è·å¾—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µUS\nus = [[0.0] * user_num for i in range(user_num)]\nfor userId1 in range(user_num):\n    for userId2 in range(user_num):\n        # é€šè¿‡çŸ©é˜µYä¸­çš„å…ƒç´ ï¼Œè®¡ç®—å¤¹è§’ä½™å¼¦\n        us[userId1][userId2] = y[userId1][userId2] / sqrt((y[userId1][userId1] * y[userId2][userId2]))\n\n</code></pre><p>åœ¨æœ€åä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡ŒåŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤æ¨èäº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨å…ƒç´ å¯¹åº”çš„é™¤æ³•æ¥å®ç°å½’ä¸€åŒ–ã€‚</p><pre><code># é€šè¿‡ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œè®¡ç®—USPçŸ©é˜µ\nusp = mat(us).dot(x_s)\n\n\n# æ±‚ç”¨äºå½’ä¸€åŒ–çš„åˆ†æ¯\nusr = [0.0] * user_num\nfor userId in range(user_num):\n    usr[userId] = sum(us[userId])\n\n\n# è¿›è¡Œå…ƒç´ å¯¹åº”çš„é™¤æ³•ï¼Œå®Œæˆå½’ä¸€åŒ–\np = divide(usp, mat(usr).transpose())\n</code></pre><p>æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸ªå±•ç¤ºæ¨èæ•ˆæœçš„ä¾‹å­ã€‚åœ¨åŸå§‹çš„è¯„åˆ†æ•°æ®ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°IDä¸º1çš„ç”¨æˆ·å¹¶æ²¡æœ‰å¯¹IDä¸º2çš„ç”µå½±è¿›è¡Œè¯„åˆ†ã€‚è€Œåœ¨æœ€ç»ˆçš„çŸ©é˜µPä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºç³»ç»Ÿå¯¹ç”¨æˆ·1ç»™ç”µå½±2çš„è¯„åˆ†åšå‡ºäº†è¾ƒé«˜çš„é¢„æµ‹ï¼Œæ¢å¥è¯è¯´ï¼Œç³»ç»Ÿè®¤ä¸ºç”¨æˆ·1å¾ˆå¯èƒ½ä¼šå–œå¥½ç”µå½±2ã€‚è¿›ä¸€æ­¥ç ”ç©¶ç”µå½±çš„æ ‡é¢˜å’Œç±»å‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ç”¨æˆ·1å¯¹ã€Šç©å…·æ€»åŠ¨å‘˜ã€‹ï¼ˆ1995å¹´ï¼‰è¿™ç±»å†’é™©ç±»å’ŒåŠ¨ä½œç±»çš„é¢˜ææ›´æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥æ¨èç”µå½±2ã€Šå‹‡æ•¢è€…çš„æ¸¸æˆã€‹ï¼ˆ1995å¹´ï¼‰ä¹Ÿæ˜¯åˆç†çš„ã€‚</p><h2>æ€»ç»“</h2><p>åœ¨ä»Šå¤©çš„å†…å®¹ä¸­ï¼Œæˆ‘é€šè¿‡ä¸€ä¸ªå¸¸ç”¨çš„å®éªŒæ•°æ®ï¼Œè®¾è®¡å¹¶å®ç°äº†æœ€ç®€å•çš„åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ã€‚æˆ‘ä»¬æœ€å…³å¿ƒçš„æ˜¯è¿™ä¸ªæ•°æ®ä¸­ï¼Œç”¨æˆ·å¯¹ç”µå½±çš„è¯„åˆ†ã€‚æœ‰äº†è¿™ç§äºŒå…ƒå…³ç³»ï¼Œæˆ‘ä»¬å°±èƒ½æ„å»ºçŸ©é˜µï¼Œå¹¶é€šè¿‡çŸ©é˜µçš„æ“ä½œæ¥å‘ç°ç”¨æˆ·æˆ–ç‰©å“ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œå¹¶è¿›è¡ŒåŸºäºç”¨æˆ·æˆ–è€…ç‰©å“çš„ååŒè¿‡æ»¤ã€‚å¯¹äºæœ€ç»ˆçš„è®¡ç®—ç»“æœï¼Œä½ å¯ä»¥å°è¯•åˆ†æé’ˆå¯¹ä¸åŒç”¨æˆ·çš„æ¨èï¼Œçœ‹çœ‹ååŒè¿‡æ»¤æ¨èçš„æ•ˆæœæ˜¯ä¸æ˜¯åˆç†ã€‚</p><p>åœ¨ä½ åˆ†ææ¨èç»“æœçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‚è€ƒmovie.csvè¿™ä¸ªæ–‡ä»¶ä¸­æ‰€æè¿°çš„ç”µå½±ç±»å‹ã€‚è¿™äº›ç”µå½±ç±»å‹éƒ½æ˜¯ä¸€å¼€å§‹äººå·¥æ ‡æ³¨å¥½çš„ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰å¯èƒ½åœ¨æ²¡æœ‰è¿™ç§æ ‡æ³¨æ•°æ®çš„æƒ…å†µä¸‹ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè‡ªåŠ¨åˆ†æå“ªäº›ç”µå½±å±äºåŒä¸€ä¸ªæˆ–è€…è¿‘ä¼¼çš„ç±»å‹å‘¢ï¼Ÿå¦‚æœå¯ä»¥ï¼Œæœ‰æ²¡æœ‰å¯èƒ½åœ¨è¿™ç§è‡ªåŠ¨åˆ’åˆ†ç”µå½±ç±»å‹çš„åŸºç¡€ä¹‹ä¸Šï¼Œç»™å‡ºç”µå½±çš„æ¨èå‘¢ï¼Ÿä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä¼šé€šè¿‡SVDå¥‡å¼‚å€¼åˆ†è§£ï¼Œæ¥è¿›è¡Œè¿™ä¸ªæ–¹å‘çš„å°è¯•ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©æˆ‘ä½¿ç”¨Pythonä»£ç å®ç°äº†åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ã€‚ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é‡‡ç”¨çŸ©é˜µæ“ä½œæ¥å®ç°åŸºäºç‰©å“çš„ååŒè¿‡æ»¤ï¼Œè¯·ä½¿ç”¨ä½ æ“…é•¿çš„è¯­è¨€æ¥å®ç°è¯•è¯•ã€‚</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå†™ä¸‹ä»Šå¤©çš„å­¦ä¹ ç¬”è®°ã€‚ä½ å¯ä»¥ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™ä½ çš„å¥½å‹ï¼Œå’Œä»–ä¸€èµ·ç²¾è¿›ã€‚</p>","comments":[{"had_liked":false,"id":88065,"user_name":"qinggeouye","can_delete":false,"product_type":"c1","uid":1251536,"ip_address":"","ucode":"5B53EEDD7BEC9C","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/d0/49b06424.jpg","comment_is_top":false,"comment_ctime":1555832925,"is_pvip":false,"replies":[{"id":"31699","content":"æ„Ÿè°¢ä»£ç çš„ä¼˜åŒ–ğŸ™","user_name":"ä½œè€…å›å¤","user_name_real":"é»„ç”³","uid":"1275061","ctime":1555885616,"ip_address":"","comment_id":88065,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35915571293","product_id":100021201,"comment_content":"# ä¼˜åŒ–äº†ä¸€ä¸‹ï¼Œè¿è¡Œæ—¶é—´å‡å°‘ä¸€åŠä»¥ä¸Š<br># https:&#47;&#47;github.com&#47;qinggeouye&#47;GeekTime&#47;blob&#47;master&#47;MathematicProgrammer&#47;49_recommendSystem&#47;lesson49_2.py<br><br>import numpy as np<br>import pandas as pd<br>from sklearn.preprocessing import scale<br>import time<br><br>&quot;&quot;&quot;<br>å¯¹ lesson49_1.py ä¼˜åŒ–ï¼šçŸ©é˜µæ“ä½œ<br>&quot;&quot;&quot;<br># è¿è¡Œå¼€å§‹æ—¶é—´<br>time_start = time.time()<br><br># åŠ è½½ç”¨æˆ·å¯¹ç”µå½±å¯¹è¯„åˆ†æ•°æ®<br>df = pd.read_csv(&quot;ml-latest-small&#47;ratings.csv&quot;)<br><br># è·å–ç”¨æˆ·å¯¹æ•°é‡å’Œç”µå½±å¯¹æ•°é‡<br>user_num = df[&quot;userId&quot;].max()<br>movie_num = df[&quot;movieId&quot;].max()<br><br># æ„é€ ç”¨æˆ·å¯¹ç”µå½±çš„äºŒå…ƒå…³ç³»çŸ©é˜µ<br>user_rating = np.zeros((user_num, movie_num))<br># ç”±äºç”¨æˆ·å’Œç”µå½±çš„ ID éƒ½æ˜¯ä» 1 å¼€å§‹ï¼Œä¸ºäº†å’Œ Python çš„ç´¢å¼•ä¸€è‡´ï¼Œå‡å» 1<br>df[&quot;userId&quot;] = df[&quot;userId&quot;] - 1<br>df[&quot;movieId&quot;] = df[&quot;movieId&quot;] - 1<br>for index in range(user_num):<br>    user_rating[index][df[df[&quot;userId&quot;] == index][&quot;movieId&quot;]] = df[df[&quot;userId&quot;] == index][&quot;rating&quot;]<br><br># æŠŠäºŒç»´æ•°ç»„è½¬åŒ–ä¸ºçŸ©é˜µ<br>x = np.mat(user_rating)<br># å¯¹æ¯ä¸€è¡Œå¯¹æ•°æ®ï¼Œè¿›è¡Œæ ‡å‡†åŒ–<br>x_s = scale(x, with_mean=True, with_std=True, axis=1)<br><br># è·å– XX&#39;<br>y = x_s.dot(x_s.transpose())<br># å¤¹è§’ä½™å¼¦çš„åˆ†æ¯<br>v = np.zeros((np.shape(y)[0], np.shape(y)[1]))<br>v[:] = np.diag(y)<br># è·ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ US , å¯¹åº”ä½ç½®ä¸Šå…ƒç´ ç›¸é™¤<br>us = y&#47;v<br><br># é€šè¿‡ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œè®¡ç®— USP çŸ©é˜µ<br>usp = np.mat(us).dot(x_s)<br><br># æ±‚ç”¨äºå½’ä¸€åŒ–çš„åˆ†æ¯ æŒ‰è¡Œæ±‚å’Œ<br>usr = np.sum(us, axis=1)<br><br># è¿›è¡Œå…ƒç´ å¯¹åº”çš„é™¤æ³• å½’ä¸€åŒ–<br>p = np.divide(usp, np.mat(usr).transpose())<br><br># è¿è¡Œç»“æŸæ—¶é—´<br>time_end = time.time()<br><br>print(p)<br>print(np.shape(p))<br><br>print(&quot;ç¨‹åºè¿è¡Œè€—æ—¶ï¼š&quot;, time_end - time_start)<br>","like_count":8,"discussions":[{"author":{"id":1275061,"avatar":"https://static001.geekbang.org/account/avatar/00/13/74/b5/b68e3740.jpg","nickname":"é»„ç”³","note":"","ucode":"EE9AC074A322FF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447709,"discussion_content":"æ„Ÿè°¢ä»£ç çš„ä¼˜åŒ–ğŸ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555885616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358088,"user_name":"013923","can_delete":false,"product_type":"c1","uid":3035193,"ip_address":"ä¸Šæµ·","ucode":"1214DAADBCA848","user_header":"","comment_is_top":false,"comment_ctime":1663903942,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663903942","product_id":100021201,"comment_content":"æ¨èç³»ç»Ÿ1å­¦ä¹ ","like_count":0},{"had_liked":false,"id":317454,"user_name":"å‘µå‘µ","can_delete":false,"product_type":"c1","uid":1009759,"ip_address":"","ucode":"AB503E8DCA0752","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erIBYBQl9STN6IENoMFcMibp9cP4PeeRjIzO3J45rXoTfWor9NwmicC075mut1gVe47Wic0JScNY54Qg/132","comment_is_top":false,"comment_ctime":1634801824,"is_pvip":false,"replies":[{"id":"115686","content":"USçŸ©é˜µè¡¨ç¤ºç”¨æˆ·å’Œç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œå¯¹äºç»™å®šæŸä¸ªç”¨æˆ·aï¼Œæˆ‘ä»¬è®¤ä¸ºä»–&#47;å¥¹å’Œå…¶ä»–ç”¨æˆ·b,c,d...nçš„ç›¸ä¼¼åº¦åˆ†åˆ«æ˜¯0.1, 0.05, 0.3, 0.01...ï¼Œè¿™æ ·ç”¨å®ƒå·¦ä¹˜åŸå§‹çš„è¯„åˆ†çŸ©é˜µXï¼Œå°±èƒ½å¾—åˆ°åŸºäºè¿™äº›æƒé‡ï¼Œä»¥åŠb,c,d...nè¿™äº›äººå¯¹ç‰©å“è¯„åˆ†çš„ä¸€ä¸ªåŠ æƒå¹³å‡ï¼Œè€Œç”¨è¿™ä¸ªåŠ æƒå¹³å‡ä½œä¸ºç»™å®šç”¨æˆ·aå¯¹è¯¥ç‰©å“çš„ç»¼åˆè¯„åˆ†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é»„ç”³","uid":"1275061","ctime":1635638276,"ip_address":"","comment_id":317454,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634801824","product_id":100021201,"comment_content":"ä¸å¤ªç†è§£USPè¿™ä¸ªçŸ©é˜µçš„å…·ä½“æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Œé»„è€å¸ˆèƒ½ä¸èƒ½ç»™è§£é‡Šä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1275061,"avatar":"https://static001.geekbang.org/account/avatar/00/13/74/b5/b68e3740.jpg","nickname":"é»„ç”³","note":"","ucode":"EE9AC074A322FF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528822,"discussion_content":"USçŸ©é˜µè¡¨ç¤ºç”¨æˆ·å’Œç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œå¯¹äºç»™å®šæŸä¸ªç”¨æˆ·aï¼Œæˆ‘ä»¬è®¤ä¸ºä»–/å¥¹å’Œå…¶ä»–ç”¨æˆ·b,c,d...nçš„ç›¸ä¼¼åº¦åˆ†åˆ«æ˜¯0.1, 0.05, 0.3, 0.01...ï¼Œè¿™æ ·ç”¨å®ƒå·¦ä¹˜åŸå§‹çš„è¯„åˆ†çŸ©é˜µXï¼Œå°±èƒ½å¾—åˆ°åŸºäºè¿™äº›æƒé‡ï¼Œä»¥åŠb,c,d...nè¿™äº›äººå¯¹ç‰©å“è¯„åˆ†çš„ä¸€ä¸ªåŠ æƒå¹³å‡ï¼Œè€Œç”¨è¿™ä¸ªåŠ æƒå¹³å‡ä½œä¸ºç»™å®šç”¨æˆ·aå¯¹è¯¥ç‰©å“çš„ç»¼åˆè¯„åˆ†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635638276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271494,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1609666122,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609666122","product_id":100021201,"comment_content":"æ€è€ƒé¢˜ï¼š<br>åŸºäºç‰©å“çš„ååŒè¿‡æ»¤çš„ä»£ç å®ç°ï¼š<br><br># å‰é¢çš„åˆå§‹åŒ–æ­¥éª¤å’Œè¯„åˆ†æ ‡å‡†åŒ–æ­¥éª¤å’Œè€å¸ˆå†™çš„åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ä¸€è‡´ï¼Œä¸å†é‡å¤<br># ç¬¬ä¸€æ­¥ï¼šè®¡ç®—è¡¨ç¤ºç‰©å“ä¹‹é—´ç›¸ä¼¼åº¦çš„çŸ©é˜µ IS<br># ç”±äºå†…å­˜ä¸å¤Ÿï¼Œè¿™é‡Œå–æ‰€æœ‰ç”¨æˆ·å¯¹å‰100éƒ¨ç”µå½±çš„è¯„ä»·ä¿¡æ¯<br>x2_s = x_s[:,0:100]<br>x2_s<br># è·å–X&#39;X<br>y = (x2_s.transpose()).dot(x2_s)<br>print(&quot;X&#39;Xçš„ç»“æœæ˜¯&#39;ï¼š&quot;, y)<br><br><br># è·å¾—ç‰©å“ç›¸ä¼¼åº¦çŸ©é˜µIS<br>IS = [[0.0] * movie_num for i in range(movie_num)]<br>for movieId1 in range(movie_num):<br>    for movieId2 in range(movie_num):<br>        # é€šè¿‡çŸ©é˜µYä¸­çš„å…ƒç´ ï¼Œè®¡ç®—å¤¹è§’ä½™å¼¦<br>        IS[movieId1][movieId2] = y[movieId1][movieId2] &#47; sqrt((y[movieId1][movieId1] * y[movieId2][movieId2]))<br><br># ç¬¬äºŒæ­¥ï¼šåŸºäºç‰©å“çš„ååŒè¿‡æ»¤æ¨è<br><br># é€šè¿‡ç‰©å“ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œè®¡ç®—ISPçŸ©é˜µ<br>ISP = x2_s.dot(mat(IS))<br><br># æ±‚ç”¨äºå½’ä¸€åŒ–çš„åˆ†æ¯<br>ISR = [0.0] * movie_num<br>for movieId in range(movie_num):<br>    ISR[movieId] = sum(IS[movieId])<br><br># è¿›è¡Œå…ƒç´ å¯¹åº”çš„é™¤æ³•ï¼Œå®Œæˆå½’ä¸€åŒ–<br>p = divide(ISP, mat(ISR))<br>print(p)","like_count":0},{"had_liked":false,"id":142318,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1571349665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571349665","product_id":100021201,"comment_content":"åŸå§‹æ¨èæ•°æ®å¯ä»¥æ‰¾å‡ºç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œå†æ±‚å‡ºæ‰€æœ‰ç”¨æˆ·å¯¹ä»»æ„ç”µå½±çš„è¯„ä»·ï¼Œè¿›è€Œè¡¥ä¸Šé‚£äº›åŸå§‹æ¨èæ•°æ®ä¸­æ²¡æœ‰çš„é…å¯¹ã€‚","like_count":0},{"had_liked":false,"id":90226,"user_name":"å†„ï½","can_delete":false,"product_type":"c1","uid":1342639,"ip_address":"","ucode":"10CE4BC3E22890","user_header":"https://static001.geekbang.org/account/avatar/00/14/7c/af/52643b27.jpg","comment_is_top":false,"comment_ctime":1556453295,"is_pvip":false,"replies":[{"id":"32345","content":"æˆ‘å›å¤´ä»”ç»†çœ‹ä¸€ä¸‹ï¼Œå¯èƒ½æ˜¯ä¸ªç¬”è¯¯","user_name":"ä½œè€…å›å¤","user_name_real":"é»„ç”³","uid":"1275061","ctime":1556472145,"ip_address":"","comment_id":90226,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1556453295","product_id":100021201,"comment_content":"è€å¸ˆå¥½ï¼Œæ„Ÿè§‰æŒ‰ç…§å…¬å¼æ¥çœ‹ï¼ŒUSRä½œä¸ºåˆ†æ¯ï¼Œç¬¬ä¸€è¡Œåº”è¯¥æ˜¯USçš„ç¬¬ä¸€è¡Œå…ƒç´ æ±‚å’Œï¼ˆ1+0.482+0.671ï¼‹0ï¼2.153ï¼‰ï¼Œè€Œä¸æ˜¯USPçš„ç¬¬ä¸€è¡Œæ±‚å’Œï¼ˆ0.500+0.790+0.496=1.786ï¼‰ã€‚å¦åˆ™ä¼šåƒæ–‡ä¸­ä¸€æ ·ï¼ŒpçŸ©é˜µæ¯è¡Œæ±‚å’Œä¸º1ä¹Ÿæ˜¯å› ä¸ºUSRè¿™æ ·è®¡ç®—å¯¼è‡´çš„ã€‚ä»£ç éƒ¨åˆ†usr[userId] = sum(us[userId])åº”è¯¥æ˜¯å¯¹çš„ã€‚ä¸çŸ¥æˆ‘ç†è§£å¾—å¯¹ä¸å¯¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1275061,"avatar":"https://static001.geekbang.org/account/avatar/00/13/74/b5/b68e3740.jpg","nickname":"é»„ç”³","note":"","ucode":"EE9AC074A322FF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448428,"discussion_content":"æˆ‘å›å¤´ä»”ç»†çœ‹ä¸€ä¸‹ï¼Œå¯èƒ½æ˜¯ä¸ªç¬”è¯¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556472145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1364656,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d2/b0/adfe237b.jpg","nickname":"æ´‹~simon","note":"","ucode":"EEE0B25962C097","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5527,"discussion_content":"ç¬”è¯¯æœ‰æ²¡æœ‰éƒ½ä¿®æ­£ï¼Œå¾ˆå½±å“å­¦ä¹ ä¿¡å¿ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566346905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}