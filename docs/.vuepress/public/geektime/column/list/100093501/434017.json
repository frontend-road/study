{"id":434017,"title":"09ï½œå³å­¦å³ç»ƒï¼šæ„å»ºä¸€ä¸ªWebæœåŠ¡å°±æ˜¯è¿™ä¹ˆç®€å•","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Tony Baiã€‚</p><p>åœ¨å…¥é—¨ç¯‡å‰é¢çš„å‡ èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä»Goå¼€å‘ç¯å¢ƒçš„å®‰è£…ï¼Œä¸€è·¯è®²åˆ°äº†GoåŒ…çš„åˆå§‹åŒ–æ¬¡åºä¸Goå…¥å£å‡½æ•°ã€‚è®²è§£è¿™äº›ï¼Œä¸ä»…ä»…æ˜¯å› ä¸ºå®ƒä»¬æ˜¯ä½ å­¦ä¹ Goè¯­è¨€çš„åŸºç¡€ï¼ŒåŒæ—¶æˆ‘ä¹Ÿæƒ³ä¸ºä½ å»ºç«‹â€œæ‰‹å‹¤â€çš„æ„è¯†æ‰“å¥½åŸºç¡€ã€‚</p><p>ä½œä¸ºGoè¯­è¨€å­¦ä¹ çš„â€œè¿‡æ¥äººâ€ï¼Œå­¦åˆ°è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘æ·±çŸ¥ä½ å¿ƒé‡Œéƒ½åœ¨è·ƒè·ƒæ¬²è¯•ï¼Œæƒ³å°†å‰é¢å­¦åˆ°çš„çŸ¥è¯†ç»¼åˆè¿ç”¨èµ·æ¥ï¼Œå®ç°ä¸€ä¸ªå±äºè‡ªå·±çš„Goç¨‹åºã€‚ä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰å¼€å§‹GoåŸºç¡€è¯­æ³•çš„ç³»ç»Ÿå­¦ä¹ ï¼Œä½ è‚¯å®šä¼šæœ‰ä¸€ç§â€œæ— ç±³ä¸‹ç‚Šâ€çš„æ„Ÿè§‰ã€‚</p><p>ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘åœ¨è¿™èŠ‚è¯¾å®‰æ’äº†ä¸€ä¸ªå®æˆ˜å°é¡¹ç›®ã€‚åœ¨è¿™ä¸ªå°é¡¹ç›®é‡Œï¼Œæˆ‘å¸Œæœ›ä½ ä¸è¦å›°åœ¨å„ç§è¯­æ³•é‡Œï¼Œè€Œæ˜¯å…ˆè·Ÿç€æˆ‘â€œâ€œç…§çŒ«ç”»è™â€åœ°å†™ä¸€éã€è·‘ä¸€æ¬¡ï¼Œæ„Ÿå—Goé¡¹ç›®çš„ç»“æ„ï¼Œä½“ä¼šGoè¯­è¨€çš„é­…åŠ›ã€‚</p><h2>é¢„çƒ­ï¼šæœ€ç®€å•çš„HTTPæœåŠ¡</h2><p>åœ¨æƒ³é€‰æ‹©ä»¥ä»€ä¹ˆç±»å‹çš„é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘è¿˜é¢‡è´¹äº†ä¸€ç•ªè„‘ç­‹ã€‚æˆ‘æŸ¥é˜…äº†<a href=\"https://go.dev/blog/survey2020-results\">Goå®˜æ–¹ç”¨æˆ·2020è°ƒæŸ¥æŠ¥å‘Š</a>ï¼Œæ‰¾åˆ°Goåº”ç”¨æœ€å¹¿æ³›çš„é¢†åŸŸè°ƒæŸ¥ç»“æœå›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/9a/91/9ab73568ef659d75a313f3394a811491.png?wh=1194x1158\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒGoåº”ç”¨çš„å‰4ä¸ªé¢†åŸŸä¸­ï¼Œæœ‰ä¸¤ä¸ªéƒ½æ˜¯WebæœåŠ¡ç›¸å…³çš„ã€‚ä¸€ä¸ªæ˜¯æ’åœ¨ç¬¬ä¸€ä½çš„API/RPCæœåŠ¡ï¼Œå¦ä¸€ä¸ªæ˜¯æ’åœ¨ç¬¬å››ä½çš„WebæœåŠ¡ï¼ˆè¿”å›htmlé¡µé¢ï¼‰ã€‚è€ƒè™‘åˆ°åç»­ä½ æŠŠGoåº”ç”¨äºWebæœåŠ¡é¢†åŸŸçš„æœºä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™èŠ‚è¯¾æˆ‘ä»¬å°±é€‰æ‹©ä¸€ä¸ªWebæœåŠ¡é¡¹ç›®ä½œä¸ºå®æˆ˜å°é¡¹ç›®ã€‚</p><!-- [[[read_end]]] --><p>ä¸è¿‡åœ¨çœŸæ­£å¼€å§‹æˆ‘ä»¬çš„å®æˆ˜å°é¡¹ç›®å‰ï¼Œæˆ‘ä»¬å…ˆæ¥é¢„çƒ­ä¸€ä¸‹ï¼Œåšä¸€ä¸‹æŠ€æœ¯é“ºå«ã€‚æˆ‘å…ˆæ¥ç»™ä½ æ¼”ç¤ºä¸€ä¸‹<strong>åœ¨Goä¸­åˆ›å»ºä¸€ä¸ªåŸºäºHTTPåè®®çš„WebæœåŠ¡æ˜¯å¤šä¹ˆçš„ç®€å•</strong>ã€‚</p><p>è¿™ç§ç®€å•åˆè¦å½’åŠŸäºGoâ€œé¢å‘å·¥ç¨‹â€ç‰¹æ€§ã€‚åœ¨02è®²ä»‹ç»Goçš„è®¾è®¡å“²å­¦æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿè¯´è¿‡ï¼ŒGoâ€œé¢å‘å·¥ç¨‹â€çš„ç‰¹æ€§ï¼Œä¸ä»…ä½“ç°åœ¨è¯­è¨€è®¾è®¡æ–¹é¢æ—¶åˆ»è€ƒè™‘å¼€å‘äººå‘˜çš„ä½“éªŒï¼Œè€Œä¸”å®ƒè¿˜æä¾›äº†å®Œå–„çš„å·¥å…·é“¾å’Œâ€œè‡ªå¸¦ç”µæ± â€çš„æ ‡å‡†åº“ï¼Œè¿™å°±ä½¿å¾—Goç¨‹åºå¤§å¤§å‡å°‘äº†å¯¹å¤–éƒ¨ç¬¬ä¸‰æ–¹åŒ…çš„ä¾èµ–ã€‚ä»¥å¼€å‘WebæœåŠ¡ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºGoæ ‡å‡†åº“æä¾›çš„net/httpåŒ…ï¼Œè½»æ¾æ„å»ºä¸€ä¸ªæ‰¿è½½Webå†…å®¹ä¼ è¾“çš„HTTPæœåŠ¡ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥æ„å»ºä¸€ä¸ªæœ€ç®€å•çš„HTTPæœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±æ˜¯å½“æ”¶åˆ°ä¸€ä¸ªHTTPè¯·æ±‚åï¼Œç»™è¯·æ±‚æ–¹è¿”å›åŒ…å«â€œhello, worldâ€æ•°æ®çš„å“åº”ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆæŒ‰ä¸‹é¢æ­¥éª¤å»ºç«‹ä¸€ä¸ªsimple-http-serverç›®å½•ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåä¸ºsimple-http-serverçš„Go Moduleï¼š</p><pre><code class=\"language-plain\">$mkdir simple-http-server\n$cd simple-http-server\n$go mod init simple-http-server\n</code></pre><p>ç”±äºè¿™ä¸ªHTTPæœåŠ¡æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬é‡‡ç”¨æœ€ç®€é¡¹ç›®å¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯åœ¨simple-http-serverç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmain.goæºæ–‡ä»¶ï¼š</p><pre><code class=\"language-go\">  package main\n \n  import \"net/http\"\n  \n  func main() {\n      http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request){\n          w.Write([]byte(\"hello, world\"))\n      })\n      http.ListenAndServe(\":8080\", nil)\n }\n</code></pre><p>è¿™äº›ä»£ç å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„HTTPæœåŠ¡çš„å®ç°äº†ã€‚åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†Goæ ‡å‡†åº“çš„httpåŒ…ã€‚å¯èƒ½ä½ ç°åœ¨å¯¹httpåŒ…è¿˜ä¸ç†Ÿæ‚‰ï¼Œä½†æ²¡æœ‰å…³ç³»ï¼Œä½ ç°åœ¨åªéœ€è¦å¤§è‡´äº†è§£ä¸Šé¢ä»£ç çš„ç»“æ„ä¸åŸç†å°±å¯ä»¥äº†ã€‚</p><p>è¿™æ®µä»£ç é‡Œï¼Œä½ è¦æ³¨æ„ä¸¤ä¸ªé‡è¦çš„å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯ListenAndServeï¼Œå¦ä¸€ä¸ªæ˜¯HandleFuncã€‚</p><p>ä½ ä¼šçœ‹åˆ°ï¼Œä»£ç çš„ç¬¬9è¡Œï¼Œæˆ‘ä»¬é€šè¿‡httpåŒ…æä¾›çš„ListenAndServeå‡½æ•°ï¼Œå»ºç«‹èµ·ä¸€ä¸ªHTTPæœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡ç›‘å¬æœ¬åœ°çš„8080ç«¯å£ã€‚å®¢æˆ·ç«¯é€šè¿‡è¿™ä¸ªç«¯å£ä¸æœåŠ¡å»ºç«‹è¿æ¥ï¼Œå‘é€HTTPè¯·æ±‚å°±å¯ä»¥å¾—åˆ°ç›¸åº”çš„å“åº”ç»“æœã€‚</p><p>é‚£ä¹ˆæœåŠ¡ç«¯æ˜¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚çš„å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸Šé¢ä»£ç ä¸­çš„ç¬¬6è¡Œã€‚åœ¨è¿™ä¸€è¡Œä¸­ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªæœåŠ¡è®¾ç½®äº†ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„å‡½æ•°åŸå‹æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-go\">func(w http.ResponseWriter, r *http.Request)\n</code></pre><p>è¿™ä¸ªå‡½æ•°é‡Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œwå’Œrã€‚ç¬¬äºŒä¸ªå‚æ•°rä»£è¡¨æ¥è‡ªå®¢æˆ·ç«¯çš„HTTPè¯·æ±‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°wåˆ™æ˜¯ç”¨æ¥æ“ä½œè¿”å›ç»™å®¢æˆ·ç«¯çš„åº”ç­”çš„ï¼ŒåŸºäºhttpåŒ…å®ç°çš„HTTPæœåŠ¡çš„å¤„ç†å‡½æ•°éƒ½è¦ç¬¦åˆè¿™ä¸€åŸå‹ã€‚</p><p>ä½ ä¹Ÿå‘ç°äº†ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ‰€æœ‰æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæ— è®ºè¯·æ±‚çš„URIè·¯å¾„ï¼ˆRequestURIï¼‰æ˜¯ä»€ä¹ˆï¼Œè¯·æ±‚éƒ½ä¼šè¢«æˆ‘ä»¬è®¾ç½®çš„å¤„ç†å‡½æ•°å¤„ç†ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬é€šè¿‡http.HandleFuncè®¾ç½®è¿™ä¸ªå¤„ç†å‡½æ•°æ—¶ï¼Œä¼ å…¥çš„æ¨¡å¼å­—ç¬¦ä¸²ä¸ºâ€œ/â€ã€‚HTTPæœåŠ¡å™¨åœ¨æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå°†è¯·æ±‚ä¸­çš„URIè·¯å¾„ä¸è®¾ç½®çš„æ¨¡å¼å­—ç¬¦ä¸²è¿›è¡Œ<strong>æœ€é•¿å‰ç¼€åŒ¹é…</strong>ï¼Œå¹¶æ‰§è¡ŒåŒ¹é…åˆ°çš„æ¨¡å¼å­—ç¬¦ä¸²æ‰€å¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä»…è®¾ç½®äº†â€œ/â€è¿™ä¸€ä¸ªæ¨¡å¼å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æ‰€æœ‰è¯·æ±‚çš„URIéƒ½èƒ½ä¸ä¹‹åŒ¹é…ï¼Œè‡ªç„¶æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«æˆ‘ä»¬è®¾ç½®çš„å¤„ç†å‡½æ•°å¤„ç†ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬å†æ¥ç¼–è¯‘è¿è¡Œä¸€ä¸‹è¿™ä¸ªç¨‹åºï¼Œç›´è§‚æ„Ÿå—ä¸€ä¸‹HTTPæœåŠ¡å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬é¦–å…ˆæŒ‰ä¸‹é¢æ­¥éª¤æ¥ç¼–è¯‘å¹¶è¿è¡Œè¿™ä¸ªç¨‹åºï¼š</p><pre><code class=\"language-go\">$cd simple-http-server\n$go build\n$./simple-http-server\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨curlå‘½ä»¤è¡Œå·¥å…·æ¨¡æ‹Ÿå®¢æˆ·ç«¯ï¼Œå‘ä¸Šè¿°æœåŠ¡å»ºç«‹è¿æ¥å¹¶å‘é€httpè¯·æ±‚ï¼š</p><pre><code class=\"language-go\">$curl localhost:8080/\nhello, world\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒcurlæˆåŠŸå¾—åˆ°äº†httpæœåŠ¡è¿”å›çš„â€œhello, worldâ€å“åº”æ•°æ®ã€‚åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„HTTPæœåŠ¡å°±æ„å»ºæˆåŠŸäº†ã€‚</p><p>å½“ç„¶äº†ï¼ŒçœŸå®ä¸–ç•Œçš„WebæœåŠ¡ä¸å¯èƒ½åƒä¸Šè¿°ä¾‹å­è¿™ä¹ˆç®€å•ï¼Œè¿™ä»…ä»…æ˜¯ä¸€ä¸ªâ€œé¢„çƒ­â€ã€‚æˆ‘æƒ³è®©ä½ çŸ¥é“ï¼Œä½¿ç”¨Goæ„å»ºWebæœåŠ¡æ˜¯éå¸¸å®¹æ˜“çš„ã€‚å¹¶ä¸”ï¼Œè¿™æ ·çš„é¢„çƒ­ä¹Ÿèƒ½è®©ä½ åˆæ­¥äº†è§£å®ç°ä»£ç çš„ç»“æ„ï¼Œå…ˆæœ‰ä¸€ä¸ªæŠ€æœ¯é“ºå«ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±è¿›å…¥è¿™èŠ‚è¯¾çš„å®æˆ˜å°é¡¹ç›®ï¼Œä¸€ä¸ªæ›´æ¥è¿‘äºçœŸå®ä¸–ç•Œæƒ…å†µçš„<strong>å›¾ä¹¦ç®¡ç†APIæœåŠ¡</strong>ã€‚</p><h2>å›¾ä¹¦ç®¡ç†APIæœåŠ¡</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥æ˜ç¡®ä¸€ä¸‹æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p>åœ¨è¿™ä¸ªå®æˆ˜å°é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿçš„æ˜¯çœŸå®ä¸–ç•Œçš„ä¸€ä¸ªä¹¦åº—çš„å›¾ä¹¦ç®¡ç†åç«¯æœåŠ¡ã€‚è¿™ä¸ªæœåŠ¡ä¸ºå¹³å°å‰ç«¯ä»¥åŠå…¶ä»–å®¢æˆ·ç«¯ï¼Œæä¾›é’ˆå¯¹å›¾ä¹¦çš„CRUDï¼ˆåˆ›å»ºã€æ£€ç´¢ã€æ›´æ–°ä¸åˆ é™¤ï¼‰çš„åŸºäºHTTPåè®®çš„APIã€‚APIé‡‡ç”¨å…¸å‹çš„RESTfulé£æ ¼è®¾è®¡ï¼Œè¿™ä¸ªæœåŠ¡æä¾›çš„APIé›†åˆå¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/99/51/99717b62f7553e1a5139edcf2ac03b51.jpg?wh=1980x788\" alt=\"\"></p><p>è¿™ä¸ªAPIæœåŠ¡çš„é€»è¾‘å¹¶ä¸å¤æ‚ã€‚ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬é€šè¿‡idæ¥å”¯ä¸€æ ‡è¯†ä¸€æœ¬ä¹¦ï¼Œå¯¹äºå›¾ä¹¦æ¥è¯´ï¼Œè¿™ä¸ªidé€šå¸¸æ˜¯ISBNå·ã€‚è‡³äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸­è¯·æ±‚ä¸å“åº”çš„æ•°æ®ï¼Œæˆ‘ä»¬é‡‡ç”¨æ”¾åœ¨HTTPåè®®åŒ…ä½“ï¼ˆBodyï¼‰ä¸­çš„Jsonæ ¼å¼æ•°æ®æ¥æ‰¿è½½ã€‚</p><p>ä¸šåŠ¡é€»è¾‘æ˜¯ä¸æ˜¯å¾ˆç®€å•å•Šï¼Ÿä¸‹é¢æˆ‘ä»¬å°±ç›´æ¥å¼€å§‹åˆ›å»ºè¿™ä¸ªé¡¹ç›®ã€‚</p><h3>é¡¹ç›®å»ºç«‹ä¸å¸ƒå±€è®¾è®¡</h3><p>æˆ‘ä»¬æŒ‰ç…§ä¸‹é¢æ­¥éª¤åˆ›å»ºä¸€ä¸ªåä¸ºbookstoreçš„Goé¡¹ç›®å¹¶åˆ›å»ºå¯¹åº”çš„Go Moduleï¼š</p><pre><code class=\"language-go\">$mkdir bookstore\n$cd bookstore\n$go mod init bookstore\ngo: creating new go.mod: module bookstore\n</code></pre><p>é€šè¿‡ä¸Šé¢çš„ä¸šåŠ¡é€»è¾‘è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæœåŠ¡å¤§ä½“æ‹†åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯HTTPæœåŠ¡å™¨ï¼Œç”¨æ¥å¯¹å¤–æä¾›APIæœåŠ¡ï¼›å¦ä¸€éƒ¨åˆ†æ˜¯å›¾ä¹¦æ•°æ®çš„å­˜å‚¨æ¨¡å—ï¼Œæ‰€æœ‰çš„å›¾ä¹¦æ•°æ®å‡å­˜å‚¨åœ¨è¿™é‡Œã€‚</p><p>åŒæ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªä»¥æ„å»ºå¯æ‰§è¡Œç¨‹åºä¸ºç›®çš„çš„Goé¡¹ç›®ï¼Œæˆ‘ä»¬å‚è€ƒGoé¡¹ç›®å¸ƒå±€æ ‡å‡†ä¸€è®²ä¸­çš„é¡¹ç›®å¸ƒå±€ï¼ŒæŠŠè¿™ä¸ªé¡¹ç›®çš„ç»“æ„å¸ƒå±€è®¾è®¡æˆè¿™æ ·ï¼š</p><pre><code class=\"language-go\">â”œâ”€â”€ cmd/\nâ”‚&nbsp;&nbsp; â””â”€â”€ bookstore/         // æ”¾ç½®bookstore mainåŒ…æºç \nâ”‚&nbsp;&nbsp;     â””â”€â”€ main.go\nâ”œâ”€â”€ go.mod                 // module bookstoreçš„go.mod\nâ”œâ”€â”€ go.sum\nâ”œâ”€â”€ internal/              // å­˜æ”¾é¡¹ç›®å†…éƒ¨åŒ…çš„ç›®å½•\nâ”‚&nbsp;&nbsp; â””â”€â”€ store/\nâ”‚&nbsp;&nbsp;     â””â”€â”€ memstore.go     \nâ”œâ”€â”€ server/                // HTTPæœåŠ¡å™¨æ¨¡å—\nâ”‚&nbsp;&nbsp; â”œâ”€â”€ middleware/\nâ”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ middleware.go\nâ”‚&nbsp;&nbsp; â””â”€â”€ server.go          \nâ””â”€â”€ store/                 // å›¾ä¹¦æ•°æ®å­˜å‚¨æ¨¡å—\n    â”œâ”€â”€ factory/\n    â”‚&nbsp;&nbsp; â””â”€â”€ factory.go\n    â””â”€â”€ store.go\n</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ—¢ç»™å‡ºäº†è¿™ä¸ªé¡¹ç›®çš„ç»“æ„å¸ƒå±€ï¼Œä¹Ÿç»™å‡ºäº†è¿™ä¸ªé¡¹ç›®æœ€ç»ˆå®ç°çš„æºç æ–‡ä»¶åˆ†å¸ƒæƒ…å†µã€‚ä¸‹é¢æˆ‘ä»¬å°±ä»mainåŒ…å¼€å§‹ï¼Œè‡ªä¸Šè€Œä¸‹é€ä¸€çœ‹çœ‹è¿™ä¸ªé¡¹ç›®çš„æ¨¡å—è®¾è®¡ä¸å®ç°ã€‚</p><h3>é¡¹ç›®mainåŒ…</h3><p>mainåŒ…æ˜¯ä¸»è¦åŒ…ï¼Œä¸ºäº†ææ¸…æ¥šå„ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘åœ¨è¿™é‡Œç»™å‡ºäº†mainåŒ…çš„å®ç°é€»è¾‘å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5e/19/5e8ee50b67a4229210b12afb94f55a19.jpg?wh=1980x1080\" alt=\"\"></p><p>åŒæ—¶ï¼Œæˆ‘ä¹Ÿåˆ—å‡ºäº†mainåŒ…ï¼ˆmain.goï¼‰çš„æ‰€æœ‰ä»£ç ï¼Œä½ å¯ä»¥å…ˆèŠ±å‡ åˆ†é’Ÿçœ‹ä¸€ä¸‹ï¼š</p><pre><code class=\"language-go\">  package main\n \n  import (\n      _ \"bookstore/internal/store\"\n      \"bookstore/server\"\n      \"bookstore/store/factory\"\n      \"context\"\n      \"log\"\n      \"os\"\n      \"os/signal\"\n      \"syscall\"\n      \"time\"\n )\n \n func main() {\n     s, err := factory.New(\"mem\") // åˆ›å»ºå›¾ä¹¦æ•°æ®å­˜å‚¨æ¨¡å—å®ä¾‹\n     if err != nil {\n         panic(err)\n     }\n \n     srv := server.NewBookStoreServer(\":8080\", s) // åˆ›å»ºhttpæœåŠ¡å®ä¾‹\n \n     errChan, err := srv.ListenAndServe() // è¿è¡ŒhttpæœåŠ¡\n     if err != nil {\n         log.Println(\"web server start failed:\", err)\n         return\n     }\n     log.Println(\"web server start ok\")\n \n     c := make(chan os.Signal, 1)\n     signal.Notify(c, syscall.SIGINT, syscall.SIGTERM)\n \n     select { // ç›‘è§†æ¥è‡ªerrChanä»¥åŠcçš„äº‹ä»¶\n     case err = &lt;-errChan:\n         log.Println(\"web server run failed:\", err)\n         return\n     case &lt;-c:\n         log.Println(\"bookstore program is exiting...\")\n         ctx, cf := context.WithTimeout(context.Background(), time.Second)\n         defer cf()\n         err = srv.Shutdown(ctx) // ä¼˜é›…å…³é—­httpæœåŠ¡å®ä¾‹\n     }\n \n     if err != nil {\n         log.Println(\"bookstore program exit error:\", err)\n         return\n     }\n     log.Println(\"bookstore program exit ok\")\n }\n</code></pre><p>åœ¨Goä¸­ï¼ŒmainåŒ…ä¸ä»…åŒ…å«äº†æ•´ä¸ªç¨‹åºçš„å…¥å£ï¼Œå®ƒè¿˜æ˜¯æ•´ä¸ªç¨‹åºä¸­ä¸»è¦æ¨¡å—åˆå§‹åŒ–ä¸ç»„è£…çš„åœºæ‰€ã€‚é‚£å¯¹åº”åœ¨æˆ‘ä»¬è¿™ä¸ªç¨‹åºä¸­ï¼Œä¸»è¦æ¨¡å—å°±æ˜¯ç¬¬16è¡Œçš„åˆ›å»ºå›¾ä¹¦å­˜å‚¨æ¨¡å—å®ä¾‹ï¼Œä»¥åŠç¬¬21è¡Œåˆ›å»ºHTTPæœåŠ¡æ¨¡å—å®ä¾‹ã€‚è€Œä¸”ï¼Œä½ è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬21è¡Œåˆ›å»ºHTTPæœåŠ¡æ¨¡å—å®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠå›¾ä¹¦æ•°æ®å­˜å‚¨å®ä¾‹sä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™äº†NewBookStoreServerå‡½æ•°ã€‚è¿™ä¸¤ä¸ªå®ä¾‹çš„åˆ›å»ºåŸç†ï¼Œæˆ‘ä»¬ç­‰ä¼šå†æ¥ç»†ç»†æ¢è®¨ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬é‡ç‚¹æ¥çœ‹mainå‡½æ•°çš„ååŠéƒ¨åˆ†ï¼ˆç¬¬30è¡Œ~ç¬¬42è¡Œï¼‰ï¼Œè¿™é‡Œè¡¨ç¤ºçš„æ˜¯ï¼Œæˆ‘ä»¬é€šè¿‡ç›‘è§†ç³»ç»Ÿä¿¡å·å®ç°äº†httpæœåŠ¡å®ä¾‹çš„ä¼˜é›…é€€å‡ºã€‚</p><p>æ‰€è°“ä¼˜é›…é€€å‡ºï¼ŒæŒ‡çš„å°±æ˜¯ç¨‹åºæœ‰æœºä¼šç­‰å¾…å…¶ä»–çš„äº‹æƒ…å¤„ç†å®Œå†é€€å‡ºã€‚æ¯”å¦‚å°šæœªå®Œæˆçš„äº‹åŠ¡å¤„ç†ã€æ¸…ç†èµ„æºï¼ˆæ¯”å¦‚å…³é—­æ–‡ä»¶æè¿°ç¬¦ã€å…³é—­socketï¼‰ã€ä¿å­˜å¿…è¦ä¸­é—´çŠ¶æ€ã€å†…å­˜æ•°æ®æŒä¹…åŒ–è½ç›˜ï¼Œç­‰ç­‰ã€‚å¦‚æœä½ ç»å¸¸ç”¨Goæ¥ç¼–å†™httpæœåŠ¡ï¼Œé‚£ä¹ˆhttpæœåŠ¡å¦‚ä½•ä¼˜é›…é€€å‡ºï¼Œå°±æ˜¯ä½ ç»å¸¸è¦è€ƒè™‘çš„é—®é¢˜ã€‚</p><p>åœ¨è¿™ä¸ªé—®é¢˜çš„å…·ä½“å®ç°ä¸Šï¼Œæˆ‘ä»¬é€šè¿‡signalåŒ…çš„Notifyæ•è·äº†SIGINTã€SIGTERMè¿™ä¸¤ä¸ªç³»ç»Ÿä¿¡å·ã€‚è¿™æ ·ï¼Œå½“è¿™ä¸¤ä¸ªä¿¡å·ä¸­çš„ä»»ä½•ä¸€ä¸ªè§¦å‘æ—¶ï¼Œæˆ‘ä»¬çš„httpæœåŠ¡å®ä¾‹éƒ½æœ‰æœºä¼šåœ¨é€€å‡ºå‰åšä¸€äº›æ¸…ç†å·¥ä½œã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å†ä½¿ç”¨httpæœåŠ¡å®ä¾‹ï¼ˆsrvï¼‰è‡ªèº«æä¾›çš„Shutdownæ–¹æ³•ï¼Œæ¥å®ç°httpæœåŠ¡å®ä¾‹å†…éƒ¨çš„é€€å‡ºæ¸…ç†å·¥ä½œï¼ŒåŒ…æ‹¬ï¼šç«‹å³å…³é—­æ‰€æœ‰listenerã€å…³é—­æ‰€æœ‰ç©ºé—²çš„è¿æ¥ã€ç­‰å¾…å¤„äºæ´»åŠ¨çŠ¶æ€çš„è¿æ¥å¤„ç†å®Œæ¯•ï¼Œç­‰ç­‰ã€‚å½“httpæœåŠ¡å®ä¾‹çš„æ¸…ç†å·¥ä½œå®Œæˆåï¼Œæˆ‘ä»¬æ•´ä¸ªç¨‹åºå°±å¯ä»¥æ­£å¸¸é€€å‡ºäº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†é‡ç‚¹çœ‹çœ‹æ„æˆbookstoreç¨‹åºçš„ä¸¤ä¸ªä¸»è¦æ¨¡å—ï¼šå›¾ä¹¦æ•°æ®å­˜å‚¨æ¨¡å—ä¸HTTPæœåŠ¡æ¨¡å—çš„å®ç°ã€‚æˆ‘ä»¬æŒ‰ç…§mainå‡½æ•°ä¸­çš„åˆå§‹åŒ–é¡ºåºï¼Œå…ˆæ¥çœ‹çœ‹å›¾ä¹¦æ•°æ®å­˜å‚¨æ¨¡å—ã€‚</p><h3>å›¾ä¹¦æ•°æ®å­˜å‚¨æ¨¡å—ï¼ˆstore)</h3><p>å›¾ä¹¦æ•°æ®å­˜å‚¨æ¨¡å—çš„èŒè´£å¾ˆæ¸…æ™°ï¼Œå°±æ˜¯ç”¨æ¥<strong>å­˜å‚¨æ•´ä¸ªbookstoreçš„å›¾ä¹¦æ•°æ®</strong>çš„ã€‚å›¾ä¹¦æ•°æ®å­˜å‚¨æœ‰å¾ˆå¤šç§å®ç°æ–¹å¼ï¼Œæœ€ç®€å•çš„æ–¹å¼è«è¿‡äºåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªmapï¼Œä»¥å›¾ä¹¦idä½œä¸ºkeyï¼Œæ¥ä¿å­˜å›¾ä¹¦ä¿¡æ¯ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸€è®²ä¸­ä¹Ÿä¼šé‡‡ç”¨è¿™ç§æ–¹å¼ã€‚ä½†å¦‚æœæˆ‘ä»¬è¦è€ƒè™‘ä¸Šç”Ÿäº§ç¯å¢ƒï¼Œæ•°æ®è¦è¿›è¡ŒæŒä¹…åŒ–ï¼Œé‚£ä¹ˆæœ€å®é™…çš„æ–¹å¼å°±æ˜¯é€šè¿‡Nosqlæ•°æ®åº“ç”šè‡³æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œå®ç°å¯¹å›¾ä¹¦æ•°æ®çš„å­˜å‚¨ä¸ç®¡ç†ã€‚</p><p>è€ƒè™‘åˆ°å¯¹å¤šç§å­˜å‚¨å®ç°æ–¹å¼çš„æ”¯æŒï¼Œæˆ‘ä»¬å°†é’ˆå¯¹å›¾ä¹¦çš„æœ‰é™ç§å­˜å‚¨æ“ä½œï¼Œæ”¾ç½®åœ¨ä¸€ä¸ªæ¥å£ç±»å‹Storeä¸­ï¼Œå¦‚ä¸‹æºç æ‰€ç¤ºï¼š</p><pre><code class=\"language-go\">// store/store.go\n\n type Book struct {\n     Id      string   `json:\"id\"`      // å›¾ä¹¦ISBN ID\n     Name    string   `json:\"name\"`    // å›¾ä¹¦åç§°\n     Authors []string `json:\"authors\"` // å›¾ä¹¦ä½œè€…\n     Press   string   `json:\"press\"`   // å‡ºç‰ˆç¤¾\n }\n \n type Store interface {\n     Create(*Book) error        // åˆ›å»ºä¸€ä¸ªæ–°å›¾ä¹¦æ¡ç›®\n     Update(*Book) error        // æ›´æ–°æŸå›¾ä¹¦æ¡ç›®\n     Get(string) (Book, error)  // è·å–æŸå›¾ä¹¦ä¿¡æ¯\n     GetAll() ([]Book, error)   // è·å–æ‰€æœ‰å›¾ä¹¦ä¿¡æ¯\n     Delete(string) error       // åˆ é™¤æŸå›¾ä¹¦æ¡ç›®\n }\n</code></pre><p>è¿™é‡Œï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªå¯¹åº”å›¾ä¹¦æ¡ç›®çš„æŠ½è±¡æ•°æ®ç±»å‹Bookï¼Œä»¥åŠé’ˆå¯¹Bookå­˜å–çš„æ¥å£ç±»å‹Storeã€‚è¿™æ ·ï¼Œå¯¹äºæƒ³è¦è¿›è¡Œå›¾ä¹¦æ•°æ®æ“ä½œçš„ä¸€æ–¹æ¥è¯´ï¼Œä»–åªéœ€è¦å¾—åˆ°ä¸€ä¸ªæ»¡è¶³Storeæ¥å£çš„å®ä¾‹ï¼Œå°±å¯ä»¥å®ç°å¯¹å›¾ä¹¦æ•°æ®çš„å­˜å‚¨æ“ä½œäº†ï¼Œä¸ç”¨å†å…³å¿ƒå›¾ä¹¦æ•°æ®ç©¶ç«Ÿé‡‡ç”¨äº†ä½•ç§å­˜å‚¨æ–¹å¼ã€‚è¿™å°±å®ç°äº†å›¾ä¹¦å­˜å‚¨æ“ä½œä¸åº•å±‚å›¾ä¹¦æ•°æ®å­˜å‚¨æ–¹å¼çš„è§£è€¦ã€‚è€Œä¸”ï¼Œè¿™ç§é¢å‘æ¥å£ç¼–ç¨‹ä¹Ÿæ˜¯Goç»„åˆè®¾è®¡å“²å­¦çš„ä¸€ä¸ªé‡è¦ä½“ç°ã€‚</p><p>é‚£æˆ‘ä»¬å…·ä½“å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ»¡è¶³Storeæ¥å£çš„å®ä¾‹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å‚è€ƒã€Šè®¾è®¡æ¨¡å¼ã€‹æä¾›çš„å¤šç§åˆ›å»ºå‹æ¨¡å¼ï¼Œé€‰æ‹©ä¸€ç§Goé£æ ¼çš„å·¥å‚æ¨¡å¼ï¼ˆåˆ›å»ºå‹æ¨¡å¼çš„ä¸€ç§ï¼‰æ¥å®ç°æ»¡è¶³Storeæ¥å£å®ä¾‹çš„åˆ›å»ºã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹store/factoryåŒ…çš„æºç ï¼š</p><pre><code class=\"language-go\">// store/factory/factory.go\n\n var (\n     providersMu sync.RWMutex\n     providers   = make(map[string]store.Store)\n )\n \n func Register(name string, p store.Store) {\n     providersMu.Lock()\n    defer providersMu.Unlock()\n     if p == nil {\n         panic(\"store: Register provider is nil\")\n     }\n \n     if _, dup := providers[name]; dup {\n         panic(\"store: Register called twice for provider \" + name)\n     }\n     providers[name] = p\n }\n \n func New(providerName string) (store.Store, error) {\n     providersMu.RLock()\n     p, ok := providers[providerName]\n     providersMu.RUnlock()\n     if !ok {\n         return nil, fmt.Errorf(\"store: unknown provider %s\", providerName)\n     }\n \n     return p, nil\n }\n</code></pre><p>è¿™æ®µä»£ç å®é™…ä¸Šæ˜¯æ•ˆä»¿äº†Goæ ‡å‡†åº“çš„database/sqlåŒ…é‡‡ç”¨çš„æ–¹å¼ï¼ŒfactoryåŒ…é‡‡ç”¨äº†ä¸€ä¸ªmapç±»å‹æ•°æ®ï¼Œå¯¹å·¥å‚å¯ä»¥â€œç”Ÿäº§â€çš„ã€æ»¡è¶³Storeæ¥å£çš„å®ä¾‹ç±»å‹è¿›è¡Œç®¡ç†ã€‚factoryåŒ…è¿˜æä¾›äº†Registerå‡½æ•°ï¼Œè®©å„ä¸ªå®ç°Storeæ¥å£çš„ç±»å‹å¯ä»¥æŠŠè‡ªå·±â€œæ³¨å†Œâ€åˆ°å·¥å‚ä¸­æ¥ã€‚</p><p>ä¸€æ—¦æ³¨å†ŒæˆåŠŸï¼ŒfactoryåŒ…å°±å¯ä»¥â€œç”Ÿäº§â€å‡ºè¿™ç§æ»¡è¶³Storeæ¥å£çš„ç±»å‹å®ä¾‹ã€‚è€Œä¾èµ–Storeæ¥å£çš„ä½¿ç”¨æ–¹ï¼Œåªéœ€è¦è°ƒç”¨factoryåŒ…çš„Newå‡½æ•°ï¼Œå†ä¼ å…¥æœŸæœ›ä½¿ç”¨çš„å›¾ä¹¦å­˜å‚¨å®ç°çš„åç§°ï¼Œå°±å¯ä»¥å¾—åˆ°å¯¹åº”çš„ç±»å‹å®ä¾‹äº†ã€‚</p><p>åœ¨é¡¹ç›®çš„internal/storeç›®å½•ä¸‹ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¸€ä¸ªåŸºäºå†…å­˜mapçš„Storeæ¥å£çš„å®ç°ï¼Œæˆ‘ä»¬å…·ä½“çœ‹ä¸€ä¸‹è¿™ä¸ªå®ç°æ˜¯æ€ä¹ˆè‡ªæ³¨å†Œåˆ°factoryåŒ…ä¸­çš„ï¼š</p><pre><code class=\"language-go\">// internal/store/memstore.go\n\n package store\n  \n import (\n     mystore \"bookstore/store\"\n     factory \"bookstore/store/factory\"\n     \"sync\"\n )\n  \n func init() {\n     factory.Register(\"mem\", &amp;MemStore{\n         books: make(map[string]*mystore.Book),\n     })\n }\n \n type MemStore struct {\n     sync.RWMutex\n     books map[string]*mystore.Book\n }\n</code></pre><p>ä»memstoreçš„ä»£ç æ¥çœ‹ï¼Œå®ƒæ˜¯åœ¨åŒ…çš„initå‡½æ•°ä¸­è°ƒç”¨factoryåŒ…æä¾›çš„Registerå‡½æ•°ï¼ŒæŠŠè‡ªå·±çš„å®ä¾‹ä»¥â€œmemâ€çš„åç§°æ³¨å†Œåˆ°factoryä¸­çš„ã€‚è¿™æ ·åšæœ‰ä¸€ä¸ªå¥½å¤„ï¼Œä¾èµ–Storeæ¥å£è¿›è¡Œå›¾ä¹¦æ•°æ®ç®¡ç†çš„ä¸€æ–¹ï¼Œåªè¦å¯¼å…¥internal/storeè¿™ä¸ªåŒ…ï¼Œå°±å¯ä»¥è‡ªåŠ¨å®Œæˆæ³¨å†ŒåŠ¨ä½œäº†ã€‚</p><p>ç†è§£äº†è¿™ä¸ªä¹‹åï¼Œæˆ‘ä»¬å†çœ‹ä¸‹é¢mainåŒ…ä¸­ï¼Œåˆ›å»ºå›¾ä¹¦æ•°æ®å­˜å‚¨æ¨¡å—å®ä¾‹æ—¶é‡‡ç”¨çš„ä»£ç ï¼Œæ˜¯ä¸æ˜¯å°±è±ç„¶å¼€æœ—äº†ï¼Ÿ</p><pre><code class=\"language-go\">import (\n    ... ...\n    _ \"bookstore/internal/store\" // internal/storeå°†è‡ªèº«æ³¨å†Œåˆ°factoryä¸­\n)\n\nfunc main() {\n    s, err := factory.New(\"mem\") // åˆ›å»ºåä¸º\"mem\"çš„å›¾ä¹¦æ•°æ®å­˜å‚¨æ¨¡å—å®ä¾‹\n    if err != nil {\n        panic(err)\n    }\n    ... ...\n}\n</code></pre><p>è‡³äºmemstore.goä¸­å›¾ä¹¦æ•°æ®å­˜å‚¨çš„å…·ä½“é€»è¾‘ï¼Œå°±æ¯”è¾ƒç®€å•äº†ï¼Œæˆ‘è¿™é‡Œå°±ä¸è¯¦ç»†åˆ†æäº†ï¼Œä½ è¯¾åè‡ªå·±é˜…è¯»ä¸€ä¸‹å§ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹bookstoreç¨‹åºçš„å¦å¤–ä¸€ä¸ªé‡è¦æ¨¡å—ï¼šHTTPæœåŠ¡æ¨¡å—ã€‚</p><h3>HTTPæœåŠ¡æ¨¡å—ï¼ˆserverï¼‰</h3><p>HTTPæœåŠ¡æ¨¡å—çš„èŒè´£æ˜¯<strong>å¯¹å¤–æä¾›HTTP APIæœåŠ¡ï¼Œå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„å„ç§è¯·æ±‚ï¼Œå¹¶é€šè¿‡Storeæ¥å£å®ä¾‹æ‰§è¡Œé’ˆå¯¹å›¾ä¹¦æ•°æ®çš„ç›¸å…³æ“ä½œ</strong>ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æŠ½è±¡å¤„ç†ä¸€ä¸ªserveråŒ…ï¼Œè¿™ä¸ªåŒ…ä¸­å®šä¹‰äº†ä¸€ä¸ªBookStoreServerç±»å‹å¦‚ä¸‹ï¼š</p><pre><code class=\"language-go\">// server/server.go\n\n type BookStoreServer struct {\n     s   store.Store\n     srv *http.Server\n }\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸ªç±»å‹å®è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ ‡å‡†åº“çš„http.Serverï¼Œå¹¶ä¸”ç»„åˆäº†æ¥è‡ªstore.Storeæ¥å£çš„èƒ½åŠ›ã€‚serveråŒ…æä¾›äº†NewBookStoreServerå‡½æ•°ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªBookStoreServerç±»å‹å®ä¾‹ï¼š</p><pre><code class=\"language-go\">// server/server.go\n\n func NewBookStoreServer(addr string, s store.Store) *BookStoreServer {\n     srv := &amp;BookStoreServer{\n         s: s,\n         srv: &amp;http.Server{\n             Addr: addr,\n         },\n     }\n \n     router := mux.NewRouter()\n     router.HandleFunc(\"/book\", srv.createBookHandler).Methods(\"POST\")\n     router.HandleFunc(\"/book/{id}\", srv.updateBookHandler).Methods(\"POST\")\n     router.HandleFunc(\"/book/{id}\", srv.getBookHandler).Methods(\"GET\")\n     router.HandleFunc(\"/book\", srv.getAllBooksHandler).Methods(\"GET\")\n     router.HandleFunc(\"/book/{id}\", srv.delBookHandler).Methods(\"DELETE\")\n \n     srv.srv.Handler = middleware.Logging(middleware.Validating(router))\n     return srv\n }\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°å‡½æ•°NewBookStoreServeræ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯HTTPæœåŠ¡ç›‘å¬çš„æœåŠ¡åœ°å€ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å®ç°äº†store.Storeæ¥å£çš„ç±»å‹å®ä¾‹ã€‚è¿™ç§å‡½æ•°åŸå‹çš„è®¾è®¡æ˜¯Goè¯­è¨€çš„ä¸€ç§æƒ¯ç”¨è®¾è®¡æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ¥å—ä¸€ä¸ªæ¥å£ç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“ç±»å‹ã€‚è¿”å›çš„å…·ä½“ç±»å‹ç»„åˆäº†ä¼ å…¥çš„æ¥å£ç±»å‹çš„èƒ½åŠ›ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œå’Œå‰é¢é¢„çƒ­æ—¶å®ç°çš„ç®€å•httpæœåŠ¡ä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜éœ€ä¸ºHTTPæœåŠ¡å™¨è®¾ç½®è¯·æ±‚çš„å¤„ç†å‡½æ•°ã€‚</p><p>ç”±äºè¿™ä¸ªæœåŠ¡è¯·æ±‚URIçš„æ¨¡å¼å­—ç¬¦ä¸²æ¯”è¾ƒå¤æ‚ï¼Œæ ‡å‡†åº“httpåŒ…å†…ç½®çš„URIè·¯å¾„æ¨¡å¼åŒ¹é…å™¨ï¼ˆServeMuxï¼Œä¹Ÿç§°ä¸ºè·¯ç”±ç®¡ç†å™¨ï¼‰ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå› æ­¤åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…github.com/gorilla/muxæ¥å®ç°æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><p>åœ¨ä¸Šé¢ä»£ç çš„ç¬¬11è¡Œåˆ°ç¬¬16è¡Œï¼Œæˆ‘ä»¬é’ˆå¯¹ä¸åŒURIè·¯å¾„æ¨¡å¼è®¾ç½®äº†ä¸åŒçš„å¤„ç†å‡½æ•°ã€‚æˆ‘ä»¬ä»¥createBookHandlerå’ŒgetBookHandlerä¸ºä¾‹æ¥çœ‹çœ‹è¿™äº›å¤„ç†å‡½æ•°çš„å®ç°ï¼š</p><pre><code class=\"language-go\">// server/server.go\n\n  func (bs *BookStoreServer) createBookHandler(w http.ResponseWriter, req *http.Request) {\n      dec := json.NewDecoder(req.Body)\n      var book store.Book\n      if err := dec.Decode(&amp;book); err != nil {\n          http.Error(w, err.Error(), http.StatusBadRequest)\n          return\n      }\n  \n      if err := bs.s.Create(&amp;book); err != nil {\n          http.Error(w, err.Error(), http.StatusBadRequest)\n          return\n      }\n  }\n\n  func (bs *BookStoreServer) getBookHandler(w http.ResponseWriter, req *http.Request) {\n      id, ok := mux.Vars(req)[\"id\"]\n      if !ok {\n          http.Error(w, \"no id found in request\", http.StatusBadRequest)\n          return\n      }\n  \n     book, err := bs.s.Get(id)\n     if err != nil {\n         http.Error(w, err.Error(), http.StatusBadRequest)\n         return\n     }\n \n     response(w, book)\n }\n\n func response(w http.ResponseWriter, v interface{}) {\n     data, err := json.Marshal(v)\n     if err != nil {\n         http.Error(w, err.Error(), http.StatusInternalServerError)\n         return\n     }\n     w.Header().Set(\"Content-Type\", \"application/json\")\n     w.Write(data)\n }\n</code></pre><p>è¿™äº›å¤„ç†å‡½æ•°çš„å®ç°éƒ½å¤§åŒå°å¼‚ï¼Œéƒ½æ˜¯å…ˆè·å–httpè¯·æ±‚åŒ…ä½“æ•°æ®ï¼Œç„¶åé€šè¿‡æ ‡å‡†åº“jsonåŒ…å°†è¿™äº›æ•°æ®ï¼Œè§£ç ï¼ˆdecodeï¼‰ä¸ºæˆ‘ä»¬éœ€è¦çš„store.Bookç»“æ„ä½“å®ä¾‹ï¼Œå†é€šè¿‡Storeæ¥å£å¯¹å›¾ä¹¦æ•°æ®è¿›è¡Œå­˜å‚¨æ“ä½œã€‚å¦‚æœæˆ‘ä»¬æ˜¯è·å–å›¾ä¹¦æ•°æ®çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå¤„ç†å‡½æ•°å°†é€šè¿‡responseå‡½æ•°ï¼ŒæŠŠå–å‡ºçš„å›¾ä¹¦æ•°æ®ç¼–ç åˆ°httpå“åº”çš„åŒ…ä½“ä¸­ï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>ç„¶åï¼Œåœ¨NewBookStoreServerå‡½æ•°å®ç°çš„å°¾éƒ¨ï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°äº†è¿™æ ·ä¸€è¡Œä»£ç ï¼š</p><pre><code class=\"language-go\">     srv.srv.Handler = middleware.Logging(middleware.Validating(router))\n</code></pre><p>è¿™è¡Œä»£ç çš„æ„æ€æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨routerçš„å¤–å›´åŒ…è£¹äº†ä¸¤å±‚middlewareã€‚ä»€ä¹ˆæ˜¯middlewareå‘¢ï¼Ÿå¯¹äºæˆ‘ä»¬çš„ä¸Šä¸‹æ–‡æ¥è¯´ï¼Œè¿™äº›middlewareå°±æ˜¯ä¸€äº›é€šç”¨çš„httpå¤„ç†å‡½æ•°ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™é‡Œçš„ä¸¤ä¸ªmiddlewareï¼Œä¹Ÿå°±æ˜¯Loggingä¸Validatingå‡½æ•°çš„å®ç°ï¼š</p><pre><code class=\"language-go\">// server/middleware/middleware.go\n\n  func Logging(next http.Handler) http.Handler {\n     return http.HandlerFunc(func(w http.ResponseWriter, req *http.Request) {\n         log.Printf(\"recv a %s request from %s\", req.Method, req.RemoteAddr)\n         next.ServeHTTP(w, req)\n     })\n }\n \n func Validating(next http.Handler) http.Handler {\n     return http.HandlerFunc(func(w http.ResponseWriter, req *http.Request) {\n         contentType := req.Header.Get(\"Content-Type\")\n         mediatype, _, err := mime.ParseMediaType(contentType)\n         if err != nil {\n             http.Error(w, err.Error(), http.StatusBadRequest)\n             return\n         }\n         if mediatype != \"application/json\" {\n             http.Error(w, \"invalid Content-Type\", http.StatusUnsupportedMediaType)\n             return\n         }\n         next.ServeHTTP(w, req)\n     })\n }\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒLoggingå‡½æ•°ä¸»è¦ç”¨æ¥è¾“å‡ºæ¯ä¸ªåˆ°è¾¾çš„HTTPè¯·æ±‚çš„ä¸€äº›æ¦‚è¦ä¿¡æ¯ï¼Œè€ŒValidatingåˆ™ä¼šå¯¹æ¯ä¸ªhttpè¯·æ±‚çš„å¤´éƒ¨è¿›è¡Œæ£€æŸ¥ï¼Œæ£€æŸ¥Content-Typeå¤´å­—æ®µæ‰€è¡¨ç¤ºçš„åª’ä½“ç±»å‹æ˜¯å¦ä¸ºapplication/jsonã€‚è¿™äº›é€šç”¨çš„middlewareå‡½æ•°ï¼Œä¼šè¢«ä¸²è”åˆ°æ¯ä¸ªçœŸæ­£çš„å¤„ç†å‡½æ•°ä¹‹å‰ï¼Œé¿å…æˆ‘ä»¬åœ¨æ¯ä¸ªå¤„ç†å‡½æ•°ä¸­é‡å¤å®ç°è¿™äº›é€»è¾‘ã€‚</p><p>åˆ›å»ºå®ŒBookStoreServerå®ä¾‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨å…¶ListenAndServeæ–¹æ³•è¿è¡Œè¿™ä¸ªhttpæœåŠ¡äº†ï¼Œæ˜¾ç„¶è¿™ä¸ªæ–¹æ³•çš„åå­—æ˜¯ä»¿æ•ˆhttp.Serverç±»å‹çš„åŒåæ–¹æ³•ï¼Œæˆ‘ä»¬çš„å®ç°æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class=\"language-go\">// server/server.go\n\n func (bs *BookStoreServer) ListenAndServe() (&lt;-chan error, error) {\n     var err error\n     errChan := make(chan error)\n     go func() {\n         err = bs.srv.ListenAndServe()\n         errChan &lt;- err\n     }()\n \n     select {\n     case err = &lt;-errChan:\n         return nil, err\n     case &lt;-time.After(time.Second):\n         return errChan, nil\n     }\n }\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸ªå‡½æ•°æŠŠBookStoreServerå†…éƒ¨çš„http.Serverçš„è¿è¡Œï¼Œæ”¾ç½®åˆ°ä¸€ä¸ªå•ç‹¬çš„è½»é‡çº§çº¿ç¨‹Goroutineä¸­ã€‚è¿™æ˜¯å› ä¸ºï¼Œhttp.Server.ListenAndServeä¼šé˜»å¡ä»£ç çš„ç»§ç»­è¿è¡Œï¼Œå¦‚æœä¸æŠŠå®ƒæ”¾åœ¨å•ç‹¬çš„Goroutineä¸­ï¼Œåé¢çš„ä»£ç å°†æ— æ³•å¾—åˆ°æ‰§è¡Œã€‚</p><p>ä¸ºäº†æ£€æµ‹åˆ°http.Server.ListenAndServeçš„è¿è¡ŒçŠ¶æ€ï¼Œæˆ‘ä»¬å†é€šè¿‡ä¸€ä¸ªchannelï¼ˆä½äºç¬¬5è¡Œçš„errChanï¼‰ï¼Œåœ¨æ–°åˆ›å»ºçš„Goroutineä¸ä¸»Goroutineä¹‹é—´å»ºç«‹çš„é€šä¿¡æ¸ é“ã€‚é€šè¿‡è¿™ä¸ªæ¸ é“ï¼Œè¿™æ ·æˆ‘ä»¬èƒ½åŠæ—¶å¾—åˆ°http serverçš„è¿è¡ŒçŠ¶æ€ã€‚</p><h3>ç¼–è¯‘ã€è¿è¡Œä¸éªŒè¯</h3><p>åˆ°è¿™é‡Œï¼Œbookstoreé¡¹ç›®çš„å¤§éƒ¨åˆ†é‡è¦ä»£ç æˆ‘ä»¬éƒ½åˆ†æäº†ä¸€éï¼Œæ˜¯æ—¶å€™å°†ç¨‹åºè·‘èµ·æ¥çœ‹çœ‹äº†ã€‚</p><p>ä¸è¿‡ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ç¨‹åºä¸­å¼•å…¥äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼Œæ‰€ä»¥åœ¨æ„å»ºé¡¹ç›®ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼Œè®©Goå‘½ä»¤è‡ªåŠ¨åˆ†æä¾èµ–é¡¹å’Œç‰ˆæœ¬ï¼Œå¹¶æ›´æ–°go.modï¼š</p><pre><code class=\"language-go\">$go mod tidy\ngo: finding module for package github.com/gorilla/mux\ngo: found github.com/gorilla/mux in github.com/gorilla/mux v1.8.0\n</code></pre><p>å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‰ä¸‹é¢çš„æ­¥éª¤æ¥æ„å»ºå¹¶æ‰§è¡Œbookstoreäº†ï¼š</p><pre><code class=\"language-go\">$go build bookstore/cmd/bookstore\n$./bookstore\n2021/10/05 16:08:36 web server start ok\n</code></pre><p>å¦‚æœä½ çœ‹åˆ°ä¸Šé¢è¿™ä¸ªè¾“å‡ºçš„æ—¥å¿—ï¼Œè¯´æ˜æˆ‘ä»¬çš„ç¨‹åºå¯åŠ¨æˆåŠŸäº†ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒå‰é¢ä¸€æ ·ä½¿ç”¨curlå‘½ä»¤è¡Œå·¥å…·ï¼Œæ¨¡ä»¿å®¢æˆ·ç«¯å‘bookstoreæœåŠ¡å‘èµ·è¯·æ±‚äº†ï¼Œæ¯”å¦‚åˆ›å»ºä¸€ä¸ªæ–°ä¹¦æ¡ç›®ï¼š</p><pre><code class=\"language-go\">$curl -X POST -H \"Content-Type:application/json\" -d '{\"id\": \"978-7-111-55842-2\", \"name\": \"The Go Programming Language\", \"authors\":[\"Alan A.A.Donovan\", \"Brian W. Kergnighan\"],\"press\": \"Pearson Education\"}' localhost:8080/book\n</code></pre><p>æ­¤æ—¶æœåŠ¡ç«¯ä¼šè¾“å‡ºå¦‚ä¸‹æ—¥å¿—ï¼Œè¡¨æ˜æˆ‘ä»¬çš„bookstoreæœåŠ¡æ”¶åˆ°äº†å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p><pre><code class=\"language-go\">2021/10/05 16:09:10 recv a POST request from [::1]:58021\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥è·å–ä¸€ä¸‹è¿™æœ¬ä¹¦çš„ä¿¡æ¯ï¼š</p><pre><code class=\"language-go\">$curl -X GET -H \"Content-Type:application/json\" localhost:8080/book/978-7-111-55842-2\n{\"id\":\"978-7-111-55842-2\",\"name\":\"The Go Programming Language\",\"authors\":[\"Alan A.A.Donovan\",\"Brian W. Kergnighan\"],\"press\":\"Pearson Education\"}\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°curlå¾—åˆ°çš„å“åº”ä¸æˆ‘ä»¬é¢„æœŸçš„æ˜¯ä¸€è‡´çš„ã€‚</p><p>å¥½äº†ï¼Œæˆ‘ä»¬ä¸å†è¿›ä¸€æ­¥éªŒè¯äº†ï¼Œä½ è¯¾åè¿˜å¯ä»¥è‡ªè¡Œç¼–è¯‘ã€æ‰§è¡Œå¹¶éªŒè¯ã€‚</p><h2>å°ç»“</h2><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®Œæˆäº†æˆ‘ä»¬ç¬¬ä¸€ä¸ªå®æˆ˜å°é¡¹ç›®ï¼Œä¸çŸ¥é“ä½ æ„Ÿè§‰å¦‚ä½•å‘¢ï¼Ÿ</p><p>åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬å¸¦ä½ ç”¨Goè¯­è¨€æ„å»ºäº†ä¸€ä¸ªæœ€ç®€å•çš„HTTPæœåŠ¡ï¼Œä»¥åŠä¸€ä¸ªæ¥è¿‘çœŸå®çš„å›¾ä¹¦ç®¡ç†APIæœåŠ¡ã€‚åœ¨æ•´ä¸ªå®æˆ˜å°é¡¹ç›®çš„å®ç°è¿‡ç¨‹ä¸­ï¼Œä½ ä¹Ÿèƒ½åˆæ­¥å­¦ä¹ åˆ°Goç¼–ç æ—¶å¸¸ç”¨çš„ä¸€äº›æƒ¯ç”¨æ³•ï¼Œæ¯”å¦‚åŸºäºæ¥å£çš„ç»„åˆã€ç±»ä¼¼database/sqlæ‰€ä½¿ç”¨çš„æƒ¯ç”¨åˆ›å»ºæ¨¡å¼ï¼Œç­‰ç­‰ã€‚</p><p>é€šè¿‡è¿™èŠ‚è¯¾çš„å­¦ä¹ ï¼Œä½ æ˜¯å¦ä½“ä¼šåˆ°äº†Goè¯­è¨€çš„é­…åŠ›äº†å‘¢ï¼Ÿæ˜¯å¦å¯Ÿè§‰åˆ°Goç¼–ç ä¸å…¶ä»–ä¸»æµè¯­è¨€ä¸åŒçš„é£æ ¼äº†å‘¢ï¼Ÿå…¶å®ä¸è®ºä½ çš„ç†è§£ç¨‹åº¦æœ‰å¤šå°‘ï¼Œéƒ½ä¸é‡è¦ã€‚åªè¦ä½ èƒ½â€œç…§çŒ«ç”»è™â€åœ°å°†ä¸Šé¢çš„ç¨‹åºè‡ªå·±ç¼–å†™ä¸€éï¼Œæ„å»ºã€è¿è¡Œèµ·æ¥å¹¶éªŒè¯ä¸€éï¼Œå°±ç®—æ˜¯å®Œç¾è¾¾æˆè¿™ä¸€è®²çš„ç›®æ ‡äº†ã€‚</p><p>ä½ åœ¨è¿™ä¸ªè¿‡ç¨‹è‚¯å®šä¼šæœ‰å„ç§å„æ ·çš„é—®é¢˜ï¼Œä½†æ²¡å…³ç³»ï¼Œè¿™äº›é—®é¢˜ä¼šæˆä¸ºä½ ç»§ç»­å‘ä¸‹å­¦ä¹ Goçš„åŠ¨åŠ›ã€‚æ¯•ç«Ÿï¼Œ<strong>å¸¦ç€é—®é¢˜çš„å­¦ä¹ ï¼Œèƒ½è®©ä½ çš„å­¦ä¹ è¿‡ç¨‹æ›´æœ‰çš„æ”¾çŸ¢ã€æ›´é«˜æ•ˆ</strong>ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å¦‚æœä½ å®Œæˆäº†ä»Šå¤©çš„ä»£ç ï¼Œè§‰å¾—è‡ªå·±å­¦æœ‰ä½™åŠ›ï¼Œå¯ä»¥å†æŒ‘æˆ˜ä¸€ä¸‹ï¼Œä¸å¦¨è¯•è¯•åŸºäºnosqlæ•°æ®åº“ï¼Œæˆ‘ä»¬æ€ä¹ˆå®ç°ä¸€ä¸ªæ–°store.Storeæ¥å£çš„å®ç°å§ï¼Ÿ</p><p>æ¬¢è¿æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šå¯¹Goè¯­è¨€æ„Ÿå…´è¶£çš„æœ‹å‹ã€‚æˆ‘æ˜¯Tony Baiï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p><h2>èµ„æºé“¾æ¥</h2><p><a href=\"https://github.com/bigwhite/publication/tree/master/column/timegeek/go-first-course/09/bookstore\">è¿™èŠ‚è¯¾çš„å›¾ä¹¦ç®¡ç†é¡¹ç›®çš„å®Œæ•´æºç åœ¨è¿™é‡Œï¼</a></p>","neighbors":{"left":{"article_title":"08ï½œå…¥å£å‡½æ•°ä¸åŒ…åˆå§‹åŒ–ï¼šææ¸…Goç¨‹åºçš„æ‰§è¡Œæ¬¡åº","id":432021},"right":{"article_title":"10ï½œå˜é‡å£°æ˜ï¼šé™æ€è¯­è¨€æœ‰åˆ«äºåŠ¨æ€è¯­è¨€çš„é‡è¦ç‰¹å¾","id":435858}},"comments":[{"had_liked":false,"id":320108,"user_name":"è‡ªç”±","can_delete":false,"product_type":"c1","uid":2576960,"ip_address":"","ucode":"4E3B53D29D86CA","user_header":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","comment_is_top":false,"comment_ctime":1636083248,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"164844840496","product_id":100093501,"comment_content":"Tony Bai è€å¸ˆçš„è¿™ç¯‡â€œç®€å•â€çš„ Web ä»£ç æ„å»ºï¼Œç»†èŠ‚ç‰¹åˆ«å¤šï¼Œè¶³çŸ£çœ‹å‡ºåŠŸåŠ›æ·±åšã€‚ä¾‹å¦‚é”çš„é€‰å‹ã€å·¥ç¨‹åŒ–ã€ä¸ºä»€ä¹ˆç”¨é”ã€é¢å‘æ¥å£ã€è®¾è®¡æ¨¡å¼ã€é€šè¿‡ Channel é€šä¿¡è€Œä¸æ˜¯å…±äº«å†…å­˜ã€panic å’Œ error çš„åŒºåˆ«ã€‚æˆ‘è®¤ä¸ºè¿™æ ·çš„ä»£ç ï¼Œæ˜¯ä¸€ä¸ªå®Œç¾çš„å¼€å§‹ã€‚","like_count":39,"discussions":[{"author":{"id":1068192,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4c/a0/6cfdefa6.jpg","nickname":"ç‰¹ä¿®æ–¯ä¹‹èˆ¹","note":"","ucode":"C041A289017D0C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546498,"discussion_content":"è¿™æ§çš„ï¼Œæ˜¯æ‰˜å§ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1642322436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1681459,"avatar":"https://static001.geekbang.org/account/avatar/00/19/a8/33/b71635c1.jpg","nickname":"é”‹å­","note":"","ucode":"89FFA85BDB1C99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576479,"discussion_content":"é¢~æ€ä¹ˆè¯´å‘¢ï¼Œå…¥é—¨çš„æ—¶å€™çœ‹å¾—æœ‰ç‚¹æ‡µï¼Œå­¦å®Œååˆè§‰å¾—å°±æ˜¯æŠŠå¾ˆå¤šçŸ¥è¯†ç‚¹èè¿›å»äº†ï¼Œä½†æ˜¯æ”¾åœ¨å¼€å¤´ï¼Œå¹¶æ²¡æœ‰è§‰å¾—æ˜¯ä¸ªå®Œç¾çš„å¼€å§‹ã€‚ã€‚ã€‚ã€‚å°±ã€‚ã€‚ã€‚å¾ˆæ™®é€šã€‚ çœŸçš„æ–°æ‰‹çœ‹ä¸æ‡‚ä¹Ÿæ— æ‰€è°“ï¼Œåé¢å†å›è¿‡æ¥çœ‹å§ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655570050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2968936,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/4d/68/3e5ed2ce.jpg","nickname":"Geek_zzzheng","note":"","ucode":"B5F6C61E2EAA4B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1681459,"avatar":"https://static001.geekbang.org/account/avatar/00/19/a8/33/b71635c1.jpg","nickname":"é”‹å­","note":"","ucode":"89FFA85BDB1C99","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587072,"discussion_content":"ç­‰ä½ ç‹¬è‡ªå¼€å‘webåº”ç”¨ä¸€æ®µæ—¶é—´åï¼Œé‡åˆ°å›°å¢ƒäº†å†å›æ¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œä½ ç»å¯¹ä¼šå—ç›ŠåŒªæµ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662732964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":576479,"ip_address":"è¾½å®"},"score":587072,"extra":""}]},{"author":{"id":2282788,"avatar":"","nickname":"Geek_e7b923","note":"","ucode":"A0963ABABF197D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412504,"discussion_content":"ä¹æ­»æˆ‘å¾—äº†ï¼Œä½†å‡¡èƒ½è®²ä¸ªè¯¾çš„ï¼Œè¿™äº›è¿˜æ˜¯äº®ç‚¹äº†ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636194991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2576960,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","nickname":"è‡ªç”±","note":"","ucode":"4E3B53D29D86CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2282788,"avatar":"","nickname":"Geek_e7b923","note":"","ucode":"A0963ABABF197D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413350,"discussion_content":"æˆ‘è§‰å¾—é‡ç‚¹åœ¨äºå­¦ä¹ çš„äººï¼Œèƒ½å¦çŸ¥é“è¿™äº›äº®ç‚¹","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1636453620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":412504,"ip_address":""},"score":413350,"extra":""}]}]},{"had_liked":false,"id":324042,"user_name":"æ‰£å‰‘ä¹¦ç”Ÿ","can_delete":false,"product_type":"c1","uid":2855599,"ip_address":"","ucode":"6F5FD189D2916C","user_header":"https://static001.geekbang.org/account/avatar/00/2b/92/af/ad02ae4b.jpg","comment_is_top":false,"comment_ctime":1638270377,"is_pvip":false,"replies":[{"id":"117965","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1638828027,"ip_address":"","comment_id":324042,"utype":1}],"discussion_count":1,"race_medal":0,"score":"74652714409","product_id":100093501,"comment_content":"store.goæä¾›äº† å›¾ä¹¦ å’Œ æ¥å£çš„æ¨¡æ¿<br>factory ç”¨äºç”Ÿäº§ æ¥å£å®ä¾‹<br>memstore.go ç”¨äºå…·ä½“å®ç°ä¸€ä¸ªæ¥å£å®ä¾‹ï¼Œå®ç°å…¶æ–¹æ³•ï¼Œå¹¶æŠŠæ ·ä¾‹å‘é€åˆ°å·¥å‚<br>server.go ç”¨äºæŠŠè·¯ç”±å’Œæ¥å£çš„æ–¹æ³•å¯¹æ¥èµ·æ¥","like_count":17,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536591,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638828027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320734,"user_name":"å°§ä¹ä¹‹é˜³","can_delete":false,"product_type":"c1","uid":2722684,"ip_address":"","ucode":"3B6BB2AE30022A","user_header":"https://static001.geekbang.org/account/avatar/00/29/8b/7c/fe7b1bf7.jpg","comment_is_top":false,"comment_ctime":1636475700,"is_pvip":false,"replies":[{"id":"116719","content":"goæœ€åˆæœ‰å¾ˆå¤šwebæ¡†æ¶ï¼Œç»è¿‡å¤šå¹´æ¼”è¿›ï¼Œç›®å‰ginè¿™ä¸ªwebæ¡†æ¶ä¼¼ä¹æˆä¸ºäº†goç¤¾åŒºçš„é¦–é€‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636901267,"ip_address":"","comment_id":320734,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31701246772","product_id":100093501,"comment_content":"Goç°åœ¨æœ‰æµè¡Œçš„webæœåŠ¡å™¨æ¡†æ¶ä¹ˆï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530094,"discussion_content":"goæœ€åˆæœ‰å¾ˆå¤šwebæ¡†æ¶ï¼Œç»è¿‡å¤šå¹´æ¼”è¿›ï¼Œç›®å‰ginè¿™ä¸ªwebæ¡†æ¶ä¼¼ä¹æˆä¸ºäº†goç¤¾åŒºçš„é¦–é€‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636901267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112676,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/64/457325e6.jpg","nickname":"Sam Fu","note":"","ucode":"EA285A4943271F","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413746,"discussion_content":"gin?","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636554103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319926,"user_name":"å¸ƒå‡¡","can_delete":false,"product_type":"c1","uid":1202465,"ip_address":"","ucode":"346FCD332F8BFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","comment_is_top":false,"comment_ctime":1636010624,"is_pvip":false,"replies":[{"id":"116234","content":"é¡¹ç›®éƒ½æ˜¯åœ¨mac&#47;linuxä¸Šåšçš„ã€‚ä½†ç†è®ºä¸Šwindowså¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ä½ æåˆ°çš„é¡¹ç›®æ”¾åœ¨gopathæˆ–gorootä¸‹æ˜¯ä¸å¿…è¦çš„ã€‚æ”¯æŒgo moduleæ¨¡å¼åï¼Œå¦‚æœå¯ç”¨äº†go moduleæ„å»ºæ¨¡å¼ï¼Œæ”¾åœ¨å“ªä¸ªç›®å½•ä¸‹éƒ½æ˜¯å¯ä»¥çš„ã€‚<br><br>å¦å¤–é¡¹ç›®ä»£ç æ”¾åœ¨äº†githubä¸Šï¼Œåœ¨æ–‡ç« æœ«å°¾æœ‰é“¾æ¥ã€‚å¯ç›´æ¥cloneåä½¿ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636386802,"ip_address":"","comment_id":319926,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27405814400","product_id":100093501,"comment_content":"ç»ˆäºå®éªŒæˆåŠŸï¼š<br>ä»¥ä¸‹å‡ ä¸ªç‚¹éœ€æ³¨æ„ï¼š<br>1ã€é¡¹ç›®åº”æ”¾åˆ° gopathè´§gorootç›¸å…³çš„ç›®å½•ä¸‹ï¼Œå¦åˆ™æœ¬åœ°åŒ…çš„å¼•ç”¨ä¼šæŠ¥é”™ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š&quot;could not import errors (cannot find package &quot;errors&quot; in any of c:\\go\\src\\errors (from $GOROOT)...)&quot;<br>2ã€å¦‚æœæ˜¯å¤åˆ¶çš„ä»£ç åº”è¯¥æ³¨æ„æ–‡ä»¶æ ¼å¼ï¼Œå¯èƒ½æŠ¥é”™&quot;package main: read unexpected NUL in input&quot;","like_count":7,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529813,"discussion_content":"é¡¹ç›®éƒ½æ˜¯åœ¨mac/linuxä¸Šåšçš„ã€‚ä½†ç†è®ºä¸Šwindowså¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ä½ æåˆ°çš„é¡¹ç›®æ”¾åœ¨gopathæˆ–gorootä¸‹æ˜¯ä¸å¿…è¦çš„ã€‚æ”¯æŒgo moduleæ¨¡å¼åï¼Œå¦‚æœå¯ç”¨äº†go moduleæ„å»ºæ¨¡å¼ï¼Œæ”¾åœ¨å“ªä¸ªç›®å½•ä¸‹éƒ½æ˜¯å¯ä»¥çš„ã€‚\n\nå¦å¤–é¡¹ç›®ä»£ç æ”¾åœ¨äº†githubä¸Šï¼Œåœ¨æ–‡ç« æœ«å°¾æœ‰é“¾æ¥ã€‚å¯ç›´æ¥cloneåä½¿ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636386802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1155437,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a1/6d/a4ff33bb.jpg","nickname":"Lee","note":"","ucode":"0FF1C4EAF7F98A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":592036,"discussion_content":"è€å¸ˆ æˆ‘go moduleå¯ç”¨äº†ï¼Œä½†æ˜¯go buildçš„æ—¶å€™è¿˜æ˜¯æŠ¥ package bookstore/cmd/bookstore is not in GOROOT (/usr/local/go/src/bookstore/cmd/bookstore)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667038517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":529813,"ip_address":"å¹¿ä¸œ"},"score":592036,"extra":""}]},{"author":{"id":1202465,"avatar":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","nickname":"å¸ƒå‡¡","note":"","ucode":"346FCD332F8BFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413238,"discussion_content":"æ„Ÿè°¢è€å¸ˆæŒ‡ç‚¹ï¼Œæˆ‘å†å»ç ”ç©¶ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636422742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319550,"user_name":"çŒ«é¥¼","can_delete":false,"product_type":"c1","uid":1310456,"ip_address":"","ucode":"675F4880937469","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/f8/3e8de9b1.jpg","comment_is_top":false,"comment_ctime":1635846825,"is_pvip":false,"replies":[{"id":"115897","content":"å…ˆâ€œç…§çŒ«ç”»è™â€å§ã€‚ä¸€æ—¦æ¶‰åŠæ­¤ç±»å®æˆ˜å°é¡¹ç›®ï¼Œå¿…ç„¶ä¼šæœ‰æ²¡æœ‰ç³»ç»Ÿå­¦ä¹ çš„å†…å®¹ã€‚åé¢å­¦ä¹ æ–°è¯­æ³•æ—¶ï¼Œå¯ä»¥å›è¿‡å¤´æ¥å¤ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1635932636,"ip_address":"","comment_id":319550,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23110683305","product_id":100093501,"comment_content":"æˆ‘æœç„¶è¿˜æ˜¯å¤ªèœäº† æˆ‘å¼€å§‹çœ‹ä¸æ‡‚äº†","like_count":5,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529668,"discussion_content":"å…ˆâ€œç…§çŒ«ç”»è™â€å§ã€‚ä¸€æ—¦æ¶‰åŠæ­¤ç±»å®æˆ˜å°é¡¹ç›®ï¼Œå¿…ç„¶ä¼šæœ‰æ²¡æœ‰ç³»ç»Ÿå­¦ä¹ çš„å†…å®¹ã€‚åé¢å­¦ä¹ æ–°è¯­æ³•æ—¶ï¼Œå¯ä»¥å›è¿‡å¤´æ¥å¤ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635932636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310456,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fe/f8/3e8de9b1.jpg","nickname":"çŒ«é¥¼","note":"","ucode":"675F4880937469","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412434,"discussion_content":"æ„Ÿè°¢è€å¸ˆ  æˆ‘ä¼šåšæŒçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636166915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319374,"user_name":"é«˜é›ªæ–Œ","can_delete":false,"product_type":"c1","uid":2827964,"ip_address":"","ucode":"75E9F13CB7C66D","user_header":"https://static001.geekbang.org/account/avatar/00/2b/26/bc/18314557.jpg","comment_is_top":false,"comment_ctime":1635764130,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23110600610","product_id":100093501,"comment_content":"C++è½¬Go, Goè¯­è¨€è®¾è®¡çš„ç¡®å®å¾ˆç®€æ´ã€ç²¾å¦™ã€‚Tony Baiè€å¸ˆä»è¯­è¨€ç»“æ„å¼€å§‹è®²çš„é£æ ¼éå¸¸å—ç”¨ï¼Œæ¯”é€šå¸¸çš„ä»è¯­æ³•å¼€å§‹è®²çš„å½¢å¼è¦å¥½ï¼Œè™½ç„¶ä¸€äº›ä»£ç ç°åœ¨çœ‹ä¸æ˜ç™½ï¼Œä½†è¿™æ ·å¸¦ç€é—®é¢˜å­¦ä¹ è¯­æ³•æ›´å®¹æ˜“ç†è§£ã€‚","like_count":5},{"had_liked":false,"id":335329,"user_name":"é¡·","can_delete":false,"product_type":"c1","uid":1132878,"ip_address":"","ucode":"096B6859C1FA80","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/4e/8798cd01.jpg","comment_is_top":false,"comment_ctime":1645452963,"is_pvip":true,"replies":[{"id":"122615","content":"å¥½é—®é¢˜ï¼<br><br>é¦–å…ˆerrChanå¹¶ä¸æ˜¯ç­‰shutdownä¹‹å listenAndServeæŠ¥é”™çš„ã€‚è€Œæ˜¯ç­‰è¿è¡Œå›½äº§ä¸­ï¼Œlistenandserveä¸€æ—¦æŠ¥é”™ï¼Œç¨‹åºå¯ä»¥é€€å‡ºã€‚<br><br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†è¯´è¯´ä¼˜é›…é€€å‡ºã€‚æŒ‰ç…§ä½ çš„æè¿°ï¼Œæˆ‘ç¿»äº†ä¸€ä¸‹net.httpçš„æ–‡æ¡£ï¼š<br><br>â€œShutdown gracefully shuts down the server without interrupting any active connections. Shutdown works by first closing all open listeners, then closing all idle connections, and then waiting indefinitely for connections to return to idle and then shut down. If the provided context expires before the shutdown is complete, Shutdown returns the context&#39;s error, otherwise it returns any error returned from closing the Server&#39;s underlying Listener(s).â€<br><br>æˆ‘çš„ç†è§£æ˜¯è°ƒç”¨Shutdownåï¼ŒListenAndServe()æ–¹æ³•çš„ç¡®ä¼šé©¬ä¸Šè¿”å›ï¼Œä¸è¿‡è¿™ä¸ªæ— æ‰€è°“äº†,listenandserveråªæ˜¯å°†listenç«¯å£å…³é—­ï¼Œä¸æ¥å—æ–°è¿æ¥äº†ã€‚<br><br>çœŸæ­£ç­‰å¾…å­˜é‡è¿æ¥å¤„ç†å®Œæ¯•çš„æ˜¯shutdownæ–¹æ³•ï¼Œshutdownæ–¹æ³•è°ƒç”¨åï¼Œä¸æ˜¯é©¬ä¸Šé€€å‡ºçš„å“¦ã€‚shutdownæ–¹æ³•æœ‰ä¸€ä¸ªctxï¼Œä¸“æ ä¸­ä¼ å…¥äº†ä¸€ä¸ªtimeout ctxï¼Œæ—¶é—´ä¸º1sã€‚å³ç­‰å¾…1sã€‚å…³é”®å°±åœ¨è¿™é‡Œã€‚åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å¯èƒ½ä¸èƒ½æ— é™æœŸç­‰å¾…ç¨‹åºé€€å‡ºï¼Œæˆ‘ä»¬ä¼šè®¾ç½®ä¸€ä¸ªtimeoutã€‚å¦‚æœshutdownåœ¨1så†…å®Œæˆç­‰å¾…ï¼ŒæˆåŠŸé€€å‡ºï¼Œè¿™æ˜¯æœ€ç†æƒ³çš„ã€‚å¦‚æœshutdownæ²¡æœ‰åœ¨1så†…å®Œæˆç­‰å¾…ï¼Œå³å­˜é‡è¿æ¥è¿˜æ²¡æœ‰å¤„ç†å®Œï¼Œé‚£ä¹ˆæŒ‰ç…§æˆ‘ä»¬çš„çº¦å®šï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½å†ç­‰äº†ã€‚<br><br>å½“ç„¶è¿™é‡Œåªæ˜¯demoï¼Œä½¿ç”¨çš„timeout=1sã€‚åœ¨ç”Ÿäº§ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®ä¸šåŠ¡çš„ç±»å‹ä»¥åŠç»éªŒå€¼æ¥ç­‰å¾…ã€‚ç”šè‡³å¯ä»¥è¿›è¡Œæ— é™ç­‰å¾…ï¼Œè¿™å®Œå…¨å–å†³äºä½ çš„ç³»ç»Ÿã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1645606554,"ip_address":"","comment_id":335329,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18825322147","product_id":100093501,"comment_content":"è€å¸ˆçš„è¿™ä¸ªç¤ºä¾‹ï¼Œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ã€‚ä¸è¿‡main.goé‡Œæœ‰ä¸€ç‚¹ç–‘é—®ï¼šhttp.Server.Shutdown(ctx)è¢«è°ƒç”¨åï¼Œhttp.Server.ListenAndServe()æ–¹æ³•é©¬ä¸Šä¼šè¿”å›errorå§ï¼ŒæŒ‰ç…§å®ä¾‹ä»£ç é‡Œçš„å†™æ³•ï¼Œæ¥æ”¶åˆ°ä¸­æ–­ä¿¡å·åï¼Œé©¬ä¸Šè°ƒç”¨Shutdownæ–¹æ³•ï¼Œæ­¤æ—¶errChanä¼šè¿”å›ErrServerClosedï¼Œselecté€»è¾‘èµ°å®Œï¼Œmainæ–¹æ³•å°±é€€å‡ºäº†ï¼Œè€Œgoçš„httpåŒ…é‡Œç¤ºæ„äº†æˆ‘ä»¬éœ€è¦ç¡®ä¿shutdownè°ƒç”¨åï¼Œæ•´ä¸ªä»£ç ä¸èƒ½é©¬ä¸Šé€€å‡ºï¼Œè¯·è€å¸ˆè§£æƒ‘ã€‚ã€‚","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552831,"discussion_content":"å¥½é—®é¢˜ï¼\n\né¦–å…ˆerrChanå¹¶ä¸æ˜¯ç­‰shutdownä¹‹å listenAndServeæŠ¥é”™çš„ã€‚è€Œæ˜¯ç­‰è¿è¡Œå›½äº§ä¸­ï¼Œlistenandserveä¸€æ—¦æŠ¥é”™ï¼Œç¨‹åºå¯ä»¥é€€å‡ºã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†è¯´è¯´ä¼˜é›…é€€å‡ºã€‚æŒ‰ç…§ä½ çš„æè¿°ï¼Œæˆ‘ç¿»äº†ä¸€ä¸‹net.httpçš„æ–‡æ¡£ï¼š\n\nâ€œShutdown gracefully shuts down the server without interrupting any active connections. Shutdown works by first closing all open listeners, then closing all idle connections, and then waiting indefinitely for connections to return to idle and then shut down. If the provided context expires before the shutdown is complete, Shutdown returns the context&#39;s error, otherwise it returns any error returned from closing the Server&#39;s underlying Listener(s).â€\n\næˆ‘çš„ç†è§£æ˜¯è°ƒç”¨Shutdownåï¼ŒListenAndServe()æ–¹æ³•çš„ç¡®ä¼šé©¬ä¸Šè¿”å›ï¼Œä¸è¿‡è¿™ä¸ªæ— æ‰€è°“äº†,listenandserveråªæ˜¯å°†listenç«¯å£å…³é—­ï¼Œä¸æ¥å—æ–°è¿æ¥äº†ã€‚\n\nçœŸæ­£ç­‰å¾…å­˜é‡è¿æ¥å¤„ç†å®Œæ¯•çš„æ˜¯shutdownæ–¹æ³•ï¼Œshutdownæ–¹æ³•è°ƒç”¨åï¼Œä¸æ˜¯é©¬ä¸Šé€€å‡ºçš„å“¦ã€‚shutdownæ–¹æ³•æœ‰ä¸€ä¸ªctxï¼Œä¸“æ ä¸­ä¼ å…¥äº†ä¸€ä¸ªtimeout ctxï¼Œæ—¶é—´ä¸º1sã€‚å³ç­‰å¾…1sã€‚å…³é”®å°±åœ¨è¿™é‡Œã€‚åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å¯èƒ½ä¸èƒ½æ— é™æœŸç­‰å¾…ç¨‹åºé€€å‡ºï¼Œæˆ‘ä»¬ä¼šè®¾ç½®ä¸€ä¸ªtimeoutã€‚å¦‚æœshutdownåœ¨1så†…å®Œæˆç­‰å¾…ï¼ŒæˆåŠŸé€€å‡ºï¼Œè¿™æ˜¯æœ€ç†æƒ³çš„ã€‚å¦‚æœshutdownæ²¡æœ‰åœ¨1så†…å®Œæˆç­‰å¾…ï¼Œå³å­˜é‡è¿æ¥è¿˜æ²¡æœ‰å¤„ç†å®Œï¼Œé‚£ä¹ˆæŒ‰ç…§æˆ‘ä»¬çš„çº¦å®šï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½å†ç­‰äº†ã€‚\n\nå½“ç„¶è¿™é‡Œåªæ˜¯demoï¼Œä½¿ç”¨çš„timeout=1sã€‚åœ¨ç”Ÿäº§ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®ä¸šåŠ¡çš„ç±»å‹ä»¥åŠç»éªŒå€¼æ¥ç­‰å¾…ã€‚ç”šè‡³å¯ä»¥è¿›è¡Œæ— é™ç­‰å¾…ï¼Œè¿™å®Œå…¨å–å†³äºä½ çš„ç³»ç»Ÿã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645606554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111176,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f4/88/133bc14b.jpg","nickname":"c340","note":"","ucode":"D64CC3DDD09A0F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582751,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659658430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319551,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1635847046,"is_pvip":false,"replies":[{"id":"115896","content":"é—®é¢˜1. ä½ çš„ç†è§£æ²¡æœ‰é”™ã€‚<br>é—®é¢˜2. å¯ä»¥ä¸ç”¨å¦èµ·ï¼Œè®°å¾—å¥½åƒæœ‰äº›å·¥å…·åœ¨æ ¼å¼åŒ–æ—¶ä¼šè‡ªåŠ¨å¡«ä¸Šã€‚<br>3. å®šä½ä¸åŒï¼Œè¿™ä¸ªæ˜¯å…¥é—¨ä¸“æ ã€‚é‚£ä¸ªè¿›é˜¶ä¸“æ ã€‚æœ‰å¾ˆå°éƒ¨åˆ†æœ‰ç›¸ä¼¼çš„åœ°æ–¹ï¼Œä½†è®²è§£æ–¹å¼éƒ½åšäº†è°ƒæ•´å’Œä¼˜åŒ–ã€‚å»ºè®®å­¦å®Œè¿™ä¸ªä¸“æ åï¼Œå†å»çœ‹çœ‹é‚£ä¸ªä¸“æ ã€‚<br>4. rpcå°è£…çš„å¾ˆæ·±ï¼Œå¦‚æœä»…æ˜¯ä½¿ç”¨çš„è¯ï¼Œæ²¡å•¥ä¸œè¥¿ã€‚è¿™ä¸ªä¸“æ æ›´å¤šèšç„¦äºgoè¯­æ³•ä»¥åŠå°½é‡ä½¿ç”¨æ ‡å‡†åº“çš„ä¸œè¥¿åšä¸€äº›å®ç”¨ç¨‹åºå’Œé¡¹ç›®ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1635932582,"ip_address":"","comment_id":319551,"utype":1}],"discussion_count":5,"race_medal":0,"score":"18815716230","product_id":100093501,"comment_content":"æ„Ÿè°¢ Tony Bai è€å¸ˆè¿™æ ·ç”±æµ…å…¥æ·±ï¼Œå¹¶ä¸”å°½å¯èƒ½è´´è¿‘å®æˆ˜çš„è®²è§£ã€‚<br><br>æœ‰ä»¥ä¸‹å›°æƒ‘ï¼Œéº»çƒ¦è§£å¿§ã€‚<br><br>1. å¯¹äºä¸€ä¸ªmoduleä¸­ï¼Œç›¸åŒçš„åŒ…åï¼Œgoå†…éƒ¨æ˜¯æ ¹æ®æ–‡ä»¶ä½ç½®çš„ä¸åŒï¼ŒåŠ ä»¥åŒºåˆ†çš„å§ï¼Ÿ ä¾‹å¦‚ï¼šbookstore&#47;store å’Œ bookstore&#47;internal&#47;store è¿™ä¸¤ä¸ª package åŒåï¼Œä½†æ˜¯æ–‡ä»¶çš„è·¯å¾„ä¸åŒï¼Œæ‰€ä»¥å¹¶ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚å¦‚æœåœ¨åŒä¸€ä¸ªpackageä¸­ï¼Œå¯¼å…¥å¦ä¸€ä¸ªåŒåçš„packageï¼Œæœ€ä½³å®è·µæ˜¯å–ä¸ªåˆ«åï¼Œæˆ‘çš„ç†è§£æ²¡é”™å§ï¼Ÿ<br><br>2. å¦å¤–åœ¨ memstore.go ä¸­çš„ åŒ…å¯¼å…¥è¯­å¥ä¸­ï¼š factory &quot;bookstore&#47;store&#47;factory&quot;ï¼Œè¿™ä¸ª é»˜è®¤ä½¿ç”¨çš„æ˜¯factoryåå­—ï¼Œä¸éœ€è¦å†å¦èµ·åå­—ä¸ºfactoryå§ï¼Ÿ<br><br>3. è¿™é—¨è¯¾ä¸­çš„çŸ¥è¯†å’Œä½ åœ¨å¦å¤–çš„ä¸€ä¸ªå¹³å°çš„ã€Šæ”¹å–„Goè¯­è¨€ç¼–ç¨‹è´¨é‡çš„50ä¸ªæœ‰æ•ˆå®è·µã€‹çš„å†…å®¹é‡åˆåº¦å¤§å—ï¼Ÿ ç²¾åŠ›æœ‰é™ï¼Œå¦‚æœé‡åˆåº¦å¤§ï¼Œå°±ä¸“å¿ƒçœ‹è¿™ä¸ªå°±å¥½äº†ã€‚<br><br>4. è¿™é—¨è¯¾ä¼šè®²è®²Goå†™RPCæœåŠ¡æ–¹é¢çš„çŸ¥è¯†å—ï¼Ÿ è¿™ä¸ªåœ¨ç”Ÿäº§ä¸­æŒºå¸¸ç”¨çš„ã€‚","like_count":4,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529669,"discussion_content":"é—®é¢˜1. ä½ çš„ç†è§£æ²¡æœ‰é”™ã€‚\né—®é¢˜2. å¯ä»¥ä¸ç”¨å¦èµ·ï¼Œè®°å¾—å¥½åƒæœ‰äº›å·¥å…·åœ¨æ ¼å¼åŒ–æ—¶ä¼šè‡ªåŠ¨å¡«ä¸Šã€‚\n3. å®šä½ä¸åŒï¼Œè¿™ä¸ªæ˜¯å…¥é—¨ä¸“æ ã€‚é‚£ä¸ªè¿›é˜¶ä¸“æ ã€‚æœ‰å¾ˆå°éƒ¨åˆ†æœ‰ç›¸ä¼¼çš„åœ°æ–¹ï¼Œä½†è®²è§£æ–¹å¼éƒ½åšäº†è°ƒæ•´å’Œä¼˜åŒ–ã€‚å»ºè®®å­¦å®Œè¿™ä¸ªä¸“æ åï¼Œå†å»çœ‹çœ‹é‚£ä¸ªä¸“æ ã€‚\n4. rpcå°è£…çš„å¾ˆæ·±ï¼Œå¦‚æœä»…æ˜¯ä½¿ç”¨çš„è¯ï¼Œæ²¡å•¥ä¸œè¥¿ã€‚è¿™ä¸ªä¸“æ æ›´å¤šèšç„¦äºgoè¯­æ³•ä»¥åŠå°½é‡ä½¿ç”¨æ ‡å‡†åº“çš„ä¸œè¥¿åšä¸€äº›å®ç”¨ç¨‹åºå’Œé¡¹ç›®ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635932582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1681459,"avatar":"https://static001.geekbang.org/account/avatar/00/19/a8/33/b71635c1.jpg","nickname":"é”‹å­","note":"","ucode":"89FFA85BDB1C99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576480,"discussion_content":"åˆ«é—®ï¼Œé—®å°±æ˜¯éƒ½çœ‹ã€‚ å“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655570182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552592,"discussion_content":"è¯·é—®ï¼Œã€Šæ”¹å–„Goè¯­è¨€ç¼–ç¨‹è´¨é‡çš„50ä¸ªæœ‰æ•ˆå®è·µã€‹ åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645520574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1793879,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJHTX1IwEl1Eh1CCO2ejL2gKe08Vxib61UZz9l5WGA81ObK0Nk5MCZ3ic6IWcW5kyX0DtwBNMEMl2Q/132","nickname":"Geek_8ed998","note":"","ucode":"1C164836354665","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411861,"discussion_content":"package bookstore/cmd/bookstore is not in GOROOT (/usr/local/go/src/bookstore/cmd/bookstore) æŒ‰è€å¸ˆçš„æ­¥éª¤æ‰§è¡Œåˆ°è¿™é‡Œå‡ºé”™ï¼Œä»€ä¹ˆåŸå› é˜¿\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636020580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2576960,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","nickname":"è‡ªç”±","note":"","ucode":"4E3B53D29D86CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1793879,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJHTX1IwEl1Eh1CCO2ejL2gKe08Vxib61UZz9l5WGA81ObK0Nk5MCZ3ic6IWcW5kyX0DtwBNMEMl2Q/132","nickname":"Geek_8ed998","note":"","ucode":"1C164836354665","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412139,"discussion_content":"å˜¿ï¼ŒæŠ¥é”™ä¿¡æ¯æ˜¯ GOROOT æœªè®¾ç½®ï¼Œæœ‰äº›ç¼–è¾‘å™¨æ˜¯è‡ªå·±çš„ä¸€å¥—é…ç½®ç¯å¢ƒï¼Œä¾‹å¦‚ IDEAã€‚ä½ å¯ä»¥å…ˆ go env | grep root çœ‹ä¸€ä¸‹è·¯å¾„ï¼Œç„¶åæœä¸€ä¸‹ç¼–è¾‘å™¨ä¸­ GOROOT çš„ç›¸å…³é…ç½®ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°ä½ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636083004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":411861,"ip_address":""},"score":412139,"extra":""}]}]},{"had_liked":false,"id":319313,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1635739568,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18815608752","product_id":100093501,"comment_content":"è€å¸ˆè®²çš„å¤ªèµäº†<br>å¸‚é¢ä¸Š è®² go æ¥å£æ€æƒ³å¾ˆå¥½ï¼Œ æ¨èç»„åˆæ€æƒ³ã€‚  ä½†æ˜¯éƒ½å…‰è¯´ä¸ç»ƒï¼Œçœ‹æ‡‚ä½†å­¦ä¸ä¼šã€‚<br>ä»Šå¤©è€å¸ˆ ç»™çš„è¿™ä¸ªä¾‹å­ çœŸå®ï¼Œç®€çŸ­ ä¸” æŠŠæ¥å£å’Œç»„åˆçš„ æ€æƒ³éƒ½ åšäº†å‡ºæ¥ï¼Œ å¤ªç‰›äº†ã€‚<br>è¿™ä¸€ç¯‡ éœ€è¦å®è·µè€Œä¸”éœ€è¦åå¤æ£æ‘©ã€‚","like_count":4,"discussions":[{"author":{"id":1793879,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJHTX1IwEl1Eh1CCO2ejL2gKe08Vxib61UZz9l5WGA81ObK0Nk5MCZ3ic6IWcW5kyX0DtwBNMEMl2Q/132","nickname":"Geek_8ed998","note":"","ucode":"1C164836354665","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411860,"discussion_content":"package bookstore/cmd/bookstore is not in GOROOT (/usr/local/go/src/bookstore/cmd/bookstore) æŒ‰è€å¸ˆçš„æ­¥éª¤æ‰§è¡Œåˆ°è¿™é‡Œå‡ºé”™ï¼Œä»€ä¹ˆåŸå› é˜¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636020567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1519230,"avatar":"https://static001.geekbang.org/account/avatar/00/17/2e/7e/acc47ee1.jpg","nickname":"OUO","note":"","ucode":"52EEB72E80BAF8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1793879,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJHTX1IwEl1Eh1CCO2ejL2gKe08Vxib61UZz9l5WGA81ObK0Nk5MCZ3ic6IWcW5kyX0DtwBNMEMl2Q/132","nickname":"Geek_8ed998","note":"","ucode":"1C164836354665","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537672,"discussion_content":"golandå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639136126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":411860,"ip_address":""},"score":537672,"extra":""}]}]},{"had_liked":false,"id":339947,"user_name":"includestdio.h","can_delete":false,"product_type":"c1","uid":2314854,"ip_address":"","ucode":"5027BACE9319CD","user_header":"https://static001.geekbang.org/account/avatar/00/23/52/66/3e4d4846.jpg","comment_is_top":false,"comment_ctime":1648479193,"is_pvip":true,"replies":[{"id":"124395","content":"è¿™ä¸€è®²å¼€å¤´æˆ‘å°±è¯´äº†ï¼šâ€œåœ¨è¿™ä¸ªå°é¡¹ç›®é‡Œï¼Œæˆ‘å¸Œæœ›ä½ ä¸è¦å›°åœ¨å„ç§è¯­æ³•é‡Œï¼Œè€Œæ˜¯å…ˆè·Ÿç€æˆ‘â€œâ€œç…§çŒ«ç”»è™â€åœ°å†™ä¸€éã€è·‘ä¸€æ¬¡ï¼Œæ„Ÿå— Go é¡¹ç›®çš„ç»“æ„ï¼Œä½“ä¼š Go è¯­è¨€çš„é­…åŠ›ã€‚â€ ğŸ˜  ä¸ç”¨æ‹…å¿ƒï¼Œå¾€åå­¦ä¸€å­¦ä¹‹åå†æ¥å¤ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1648644127,"ip_address":"","comment_id":339947,"utype":1}],"discussion_count":2,"race_medal":4,"score":"14533381081","product_id":100093501,"comment_content":"ä½œä¸ºåŸºæœ¬0åŸºç¡€å­¦goï¼Œè¿™ä¸€èŠ‚å®Œå…¨æ²¡çœ‹æ‡‚-ï¼Œ- æŠŠåé¢çš„åŸºç¡€ç¯‡çœ‹å®Œå›æ¥å†è¯•è¯•å§","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559198,"discussion_content":"è¿™ä¸€è®²å¼€å¤´æˆ‘å°±è¯´äº†ï¼šâ€œåœ¨è¿™ä¸ªå°é¡¹ç›®é‡Œï¼Œæˆ‘å¸Œæœ›ä½ ä¸è¦å›°åœ¨å„ç§è¯­æ³•é‡Œï¼Œè€Œæ˜¯å…ˆè·Ÿç€æˆ‘â€œâ€œç…§çŒ«ç”»è™â€åœ°å†™ä¸€éã€è·‘ä¸€æ¬¡ï¼Œæ„Ÿå— Go é¡¹ç›®çš„ç»“æ„ï¼Œä½“ä¼š Go è¯­è¨€çš„é­…åŠ›ã€‚â€ ğŸ˜  ä¸ç”¨æ‹…å¿ƒï¼Œå¾€åå­¦ä¸€å­¦ä¹‹åå†æ¥å¤ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648644128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1627670,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d6/16/107f0d04.jpg","nickname":"å±±é’","note":"","ucode":"904AE3C23D3B92","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580015,"discussion_content":"ç°åœ¨åº”è¯¥çœ‹æ‡‚äº†å§ æˆ‘è‡ªå·±é‡å†™äº†ä¸€é  â€œï¼š8080â€å°‘å†™äº†ä¸ª:å°±å‡ºé”™äº†ã€å¿…é¡»è‡ªå·±æ¥ä¸€é","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657807296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324553,"user_name":"å·¦è€³æœµä¸œ","can_delete":false,"product_type":"c1","uid":1160678,"ip_address":"","ucode":"60134ACF12BB52","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/e6/c67f12bd.jpg","comment_is_top":false,"comment_ctime":1638498652,"is_pvip":false,"replies":[{"id":"117982","content":"ä½ è¯´çš„æ˜¯func (bs *BookStoreServer) ListenAndServeè¿™ä¸ªæ–¹æ³•å§ï¼Ÿè¿™ä¸ªå‡½æ•°ç­‰å¾…1såè¿”å›å•Šã€‚ä½†å®ƒå¯åŠ¨çš„å­goroutineä¾æ—§åœ¨è¿è¡Œçš„ã€‚å­goroutineä¸­bs.srv.ListenAndServeä¸€ç›´åœ¨å·¥ä½œï¼Œå¹¶æä¾›æœåŠ¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1638830244,"ip_address":"","comment_id":324553,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14523400540","product_id":100093501,"comment_content":"server&#47;server.go æ–‡ä»¶ä¸­ select é‚£é‡Œï¼Œç¬¬äºŒä¸ª case çš„æ„æ€æ˜¯å®šæ—¶ 1 ç§’åå°±ä¼šè§¦å‘ï¼Œä»è€Œæ‰§è¡Œåé¢çš„ returnï¼Œä¸ºä»€ä¹ˆæœåŠ¡æ²¡æœ‰ç»ˆæ­¢ä¸€ç›´åœ¨è¿è¡Œå‘¢ï¼Ÿéº»çƒ¦è€å¸ˆè§£ç­”ä¸€ä¸‹","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536610,"discussion_content":"ä½ è¯´çš„æ˜¯func (bs *BookStoreServer) ListenAndServeè¿™ä¸ªæ–¹æ³•å§ï¼Ÿè¿™ä¸ªå‡½æ•°ç­‰å¾…1såè¿”å›å•Šã€‚ä½†å®ƒå¯åŠ¨çš„å­goroutineä¾æ—§åœ¨è¿è¡Œçš„ã€‚å­goroutineä¸­bs.srv.ListenAndServeä¸€ç›´åœ¨å·¥ä½œï¼Œå¹¶æä¾›æœåŠ¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638830244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1160678,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b5/e6/c67f12bd.jpg","nickname":"å·¦è€³æœµä¸œ","note":"","ucode":"60134ACF12BB52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":537812,"discussion_content":"æ‡‚äº†ï¼Œè°¢è°¢è€å¸ˆè§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639203822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":536610,"ip_address":""},"score":537812,"extra":""}]},{"author":{"id":1045910,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f5/96/0cf9f3c7.jpg","nickname":"Aeins","note":"","ucode":"D5BF220767541D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573458,"discussion_content":"å¹¶ä¸æ˜¯ã€‚\n\n1. func (bs *BookStoreServer) ListenAndServe() (&lt;-chan error, error) è¿™ä¸ªå‡½æ•° 1 ç§’åå°±ä¼šè¿”å›ã€‚æ­¤æ—¶å¯åŠ¨ HTTP æœåŠ¡çš„å­ goroutine è¿˜åœ¨è¿è¡Œ\n\n2. å¯åŠ¨ HTTP æœåŠ¡çš„å­ goroutine å­æ‰€ä»¥è¿˜åœ¨è¿è¡Œï¼Œä¸€æ˜¯å› ä¸º err = bs.srv.ListenAndServe() æ˜¯é˜»å¡çš„ã€‚äºŒæ˜¯å› ä¸ºä¸» goroutine æ²¡æœ‰ç»“æŸ\n\n3. ä¸» goroutine ä¹‹æ‰€ä»¥æ²¡æœ‰ç»“æŸæ˜¯å› ä¸º main.go ä¸­çš„ select è¯­å¥æ²¡æœ‰é»˜è®¤åˆ†æ”¯ã€‚\n\n4. å½“ select è¯­å¥æ‰§è¡Œæ—¶ï¼Œè‹¥æ²¡æœ‰æ»¡è¶³æ‰§è¡Œæ¡ä»¶çš„åˆ†æ”¯ï¼Œä¸”æ²¡æœ‰é»˜è®¤åˆ†æ”¯ï¼Œåˆ™ select è¯­å¥é˜»å¡\n\n5. ç»¼ä¸Šï¼ŒæœåŠ¡ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°æœ‰è¢«ç›‘å¬çš„ä¿¡å·äº§ç”Ÿæˆ–è€… HTTP æœåŠ¡æŠ¥é”™å¯¼è‡´ errChan å¯è¯»\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1653445348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319291,"user_name":"jc9090kkk","can_delete":false,"product_type":"c1","uid":1338831,"ip_address":"","ucode":"6C992D07A2E78F","user_header":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","comment_is_top":false,"comment_ctime":1635734620,"is_pvip":false,"replies":[{"id":"115925","content":"ç”Ÿäº§é¡¹ç›®ä¸€èˆ¬ä¸ä¼šå°†é…ç½®â€œç¡¬ç¼–ç â€è¿›å»çš„ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œé…ç½®é¡¹ä¼šå­˜å‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¹Ÿæœ‰é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ å…¥ç¨‹åºçš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ä¼ å…¥ç¨‹åºã€‚Goæ ‡å‡†åº“æ²¡æœ‰å†…ç½®é…ç½®è¯»å†™æ¡†æ¶ï¼Œç›®å‰goç¤¾åŒºåº”ç”¨è¾ƒå¤šçš„ç¬¬ä¸‰æ–¹åº“æ˜¯Goæ ¸å¿ƒå›¢é˜Ÿæˆå‘˜å¼€å‘çš„viper(github.com&#47;spf13&#47;viper)ã€‚<br><br>å¯¹äºä¸€äº›æ›´å¤§çš„å¹³å°ï¼Œå¸¸å¸¸æœ‰å¾ˆå¤šæœåŠ¡ï¼Œè¿™äº›æœåŠ¡çš„é…ç½®ä¸€èˆ¬å­˜å‚¨åœ¨ä¸“é—¨çš„é…ç½®ä¸­å¿ƒä¸­ï¼Œç”±é…ç½®ä¸­å¿ƒç®¡ç†ä¸åˆ†å‘ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1635946972,"ip_address":"","comment_id":319291,"utype":1}],"discussion_count":5,"race_medal":0,"score":"14520636508","product_id":100093501,"comment_content":"è¿™èŠ‚è¯¾çš„é¡¹ç›®å†…å®¹ç†è§£èµ·æ¥ä¸å›°éš¾ï¼Œä½†æ˜¯å¯¹äºå®é™…çš„ç”Ÿäº§é¡¹ç›®è€Œè¨€ï¼Œå°¤å…¶æ˜¯å¯¹ç¬¬ä¸‰æ–¹çš„ä¸­é—´ä»¶æœ‰ä¾èµ–çš„å‰æä¸‹ï¼Œå¤§éƒ½ä¼šé’ˆå¯¹çš„å°†é…ç½®å•ç‹¬å­˜å‚¨ä¸ºé…ç½®æ–‡ä»¶ä»¥æ–¹ä¾¿ç»´æŠ¤ï¼Œæˆ‘æƒ³é—®ä¸‹è€å¸ˆgoé¡¹ç›®é’ˆå¯¹é…ç½®æ–‡ä»¶æœ‰ä»€ä¹ˆæœ€ä½³å®è·µæ–¹å¼å—? æˆ‘è‡ªå·±æœ¬åœ°å†™äº†ä¸€ä¸ªå°é¡¹ç›®ï¼Œç”¨çš„æ˜¯ä»¥ä¸‹æ–¹å¼æ¥é…ç½®MySQLè¿æ¥çš„ï¼Œæˆ‘æ€»è§‰å¾—ä¸å¤ªä¼˜é›…ï¼Œå¤§å¤šé¡¹ç›®ä¼šæ ¹æ®å¼€å‘ç¯å¢ƒçš„ä¸åŒé€‰å–ä¸åŒçš„é…ç½®æ–‡ä»¶ä½œä¸ºé…ç½®é¡¹åŠ è½½ï¼Œä½†æ˜¯å¦‚æœé€šè¿‡ç¡¬ç¼–ç çš„æ–¹å¼æ·»åŠ è¿›å»ä¼šè®©é¡¹ç›®å˜å¾—å¾ˆå¥‡æ€ªã€‚ã€‚ã€‚<br><br>package config<br><br>&#47;&#47; GetDBConfig æ•°æ®åº“é…ç½®<br>func GetDBConfig() map[string]string {<br>\t&#47;&#47; åˆå§‹åŒ–æ•°æ®åº“é…ç½®map<br>\tdbConfig := make(map[string]string)<br><br>\tdbConfig[&quot;DB_HOST&quot;] = &quot;127.0.0.1&quot;<br>\tdbConfig[&quot;DB_PORT&quot;] = &quot;3306&quot;<br>\tdbConfig[&quot;DB_NAME&quot;] = &quot;test&quot;<br>\tdbConfig[&quot;DB_USER&quot;] = &quot;root&quot;<br>\tdbConfig[&quot;DB_PWD&quot;] = &quot;123456&quot;<br>\tdbConfig[&quot;DB_CHARSET&quot;] = &quot;utf8&quot;<br><br>\t&#47;&#47; è¿æ¥æ± æœ€å¤§è¿æ¥æ•°<br>\tdbConfig[&quot;DB_MAX_OPEN_CONNECTS&quot;] = &quot;20&quot;<br>\t&#47;&#47; è¿æ¥æ± æœ€å¤§ç©ºé—²æ•°<br>\tdbConfig[&quot;DB_MAX_IDLE_CONNECTS&quot;] = &quot;10&quot;<br>\t&#47;&#47; è¿æ¥æ± é“¾æ¥æœ€é•¿ç”Ÿå‘½å‘¨æœŸ<br>\tdbConfig[&quot;DB_MAX_LIFETIME_CONNECTS&quot;] = &quot;7200&quot;<br><br>\treturn dbConfig<br>}","like_count":3,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529575,"discussion_content":"ç”Ÿäº§é¡¹ç›®ä¸€èˆ¬ä¸ä¼šå°†é…ç½®â€œç¡¬ç¼–ç â€è¿›å»çš„ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œé…ç½®é¡¹ä¼šå­˜å‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¹Ÿæœ‰é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ å…¥ç¨‹åºçš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ä¼ å…¥ç¨‹åºã€‚Goæ ‡å‡†åº“æ²¡æœ‰å†…ç½®é…ç½®è¯»å†™æ¡†æ¶ï¼Œç›®å‰goç¤¾åŒºåº”ç”¨è¾ƒå¤šçš„ç¬¬ä¸‰æ–¹åº“æ˜¯Goæ ¸å¿ƒå›¢é˜Ÿæˆå‘˜å¼€å‘çš„viper(github.com/spf13/viper)ã€‚\n\nå¯¹äºä¸€äº›æ›´å¤§çš„å¹³å°ï¼Œå¸¸å¸¸æœ‰å¾ˆå¤šæœåŠ¡ï¼Œè¿™äº›æœåŠ¡çš„é…ç½®ä¸€èˆ¬å­˜å‚¨åœ¨ä¸“é—¨çš„é…ç½®ä¸­å¿ƒä¸­ï¼Œç”±é…ç½®ä¸­å¿ƒç®¡ç†ä¸åˆ†å‘ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635946972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2576960,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","nickname":"è‡ªç”±","note":"","ucode":"4E3B53D29D86CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412141,"discussion_content":"å˜¿ï¼Œå†ç»™ä½ ä¸€ä¸ªå°å»ºè®®ï¼Œå°½é‡ä½¿ç”¨å¤šé…ç½®æ–‡ä»¶ï¼Œè¿™æ ·ä¼šé¿å…ä¸å¿…è¦çš„å±‚æ¬¡ç»“æ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636083353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1793879,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJHTX1IwEl1Eh1CCO2ejL2gKe08Vxib61UZz9l5WGA81ObK0Nk5MCZ3ic6IWcW5kyX0DtwBNMEMl2Q/132","nickname":"Geek_8ed998","note":"","ucode":"1C164836354665","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411859,"discussion_content":"package bookstore/cmd/bookstore is not in GOROOT (/usr/local/go/src/bookstore/cmd/bookstore) æŒ‰è€å¸ˆçš„æ­¥éª¤æ‰§è¡Œåˆ°è¿™é‡Œå‡ºé”™ï¼Œä»€ä¹ˆåŸå› é˜¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636020554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410640,"discussion_content":"ä½¿ç”¨é…ç½®æ–‡ä»¶çš„å½¢å¼ï¼Œç„¶åä½¿ç”¨ viper åŒ…è¿›è¡Œç®¡ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635749943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1338831,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6d/cf/ec335526.jpg","nickname":"jc9090kkk","note":"","ucode":"6C992D07A2E78F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"discussion":{"id":411010,"discussion_content":"è°¢è°¢ï¼Œæˆ‘å»ç ”ç©¶ä¸‹è¿™ä¸ªåŒ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635828507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":410640,"ip_address":""},"score":411010,"extra":""}]}]},{"had_liked":false,"id":320112,"user_name":"snow","can_delete":false,"product_type":"c1","uid":1007935,"ip_address":"","ucode":"A759813C78135F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/3f/2ce014e7.jpg","comment_is_top":false,"comment_ctime":1636084705,"is_pvip":false,"replies":[{"id":"116253","content":"åŸåˆ™å°±æ˜¯å¦‚æœæ ‡å‡†åº“ä¸­çš„muxå¯ä»¥æ»¡è¶³ï¼Œå°½é‡ä¸å¼•ç”¨ç¬¬ä¸‰æ–¹åŒ…ã€‚å¦‚æœæ ‡å‡†åº“æ— æ³•æ»¡è¶³ï¼Œå°½é‡å¼•ç”¨è§„æ¨¡è¾ƒå°çš„åŒ…ã€‚ginæ˜¯æ›´å¤§çš„webæ¡†æ¶ã€‚é™¤äº†muxï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–åŠŸèƒ½ã€‚å¦‚æœä¸æ˜¯é¡¹ç›®å¿…éœ€ï¼Œä½¿ç”¨æ›´â€œä¸“ä¸€â€çš„åŒ…å¯èƒ½æ›´å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636422934,"ip_address":"","comment_id":320112,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10226019297","product_id":100093501,"comment_content":"æˆ‘çœ‹è¿™é‡Œä½¿ç”¨äº†muxåŒ…ï¼Œæˆ‘åªç”¨è¿‡ginåŒ…ï¼Œè¯·é—®è¿™ä¸¤ä¸ªè€å¸ˆæ›´å–œæ¬¢å“ªä¸ªï¼Ÿä»¥åŠè¿™é‡Œé€‰æ‹©muxçš„åŸå› ã€‚","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529879,"discussion_content":"åŸåˆ™å°±æ˜¯å¦‚æœæ ‡å‡†åº“ä¸­çš„muxå¯ä»¥æ»¡è¶³ï¼Œå°½é‡ä¸å¼•ç”¨ç¬¬ä¸‰æ–¹åŒ…ã€‚å¦‚æœæ ‡å‡†åº“æ— æ³•æ»¡è¶³ï¼Œå°½é‡å¼•ç”¨è§„æ¨¡è¾ƒå°çš„åŒ…ã€‚ginæ˜¯æ›´å¤§çš„webæ¡†æ¶ã€‚é™¤äº†muxï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–åŠŸèƒ½ã€‚å¦‚æœä¸æ˜¯é¡¹ç›®å¿…éœ€ï¼Œä½¿ç”¨æ›´â€œä¸“ä¸€â€çš„åŒ…å¯èƒ½æ›´å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636422934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320100,"user_name":"é‚°æ´‹ä¸€","can_delete":false,"product_type":"c1","uid":1188486,"ip_address":"","ucode":"148DA7C913B28B","user_header":"https://static001.geekbang.org/account/avatar/00/12/22/86/3fe860c9.jpg","comment_is_top":false,"comment_ctime":1636082119,"is_pvip":true,"replies":[{"id":"116247","content":"ä½ çš„å»ºè®®å¾ˆå¥½ã€‚ä¸è¿‡ä¸€ä¸ªä¾‹å­è€Œå·²ï¼Œåˆ«å¤ªè®¡è¾ƒï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636422331,"ip_address":"","comment_id":320100,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10226016711","product_id":100093501,"comment_content":"è€å¸ˆï¼Œé‡‡ç”¨Restfulè§„èŒƒï¼Œæ›´æ–°ä¸€æ¡å›¾ä¹¦æ¡ç›®  httpæ–¹æ³•é‡‡ç”¨PUTï¼Œå½“ç„¶postä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œput book&#47;idï¼Œæ˜¯æˆ‘å¤ªé™å®šè‡ªå·±äº†å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529872,"discussion_content":"ä½ çš„å»ºè®®å¾ˆå¥½ã€‚ä¸è¿‡ä¸€ä¸ªä¾‹å­è€Œå·²ï¼Œåˆ«å¤ªè®¡è¾ƒï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636422331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112676,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/64/457325e6.jpg","nickname":"Sam Fu","note":"","ucode":"EA285A4943271F","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413922,"discussion_content":"è€Œä¸”bookåº”è¯¥è¦ç”¨å¤æ•° books","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636609764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339248,"user_name":"FECoding","can_delete":false,"product_type":"c1","uid":1253140,"ip_address":"","ucode":"A3E8397FDD20D6","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/14/57cb7926.jpg","comment_is_top":false,"comment_ctime":1648006705,"is_pvip":true,"replies":[{"id":"124098","content":"æ–¹æ³•è‚¯å®šæ˜¯æœ‰çš„å•Šã€‚<br><br>$go doc sync.RWMutex.RLock<br>package sync &#47;&#47; import &quot;sync&quot;<br><br>func (rw *RWMutex) RLock()<br>    RLock locks rw for reading.<br><br>    It should not be used for recursive read locking; a blocked Lock call<br>    excludes new readers from acquiring the lock. See the documentation on the<br>    RWMutex type.<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1648109364,"ip_address":"","comment_id":339248,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5942974001","product_id":100093501,"comment_content":"providersMu.RLock()<br>æˆ‘çš„golandé‡Œé¢æŠ¥é”™å•Šï¼Œæ²¡æœ‰è¿™ä¸ªæ–¹æ³•å‘¢","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558161,"discussion_content":"æ–¹æ³•è‚¯å®šæ˜¯æœ‰çš„å•Šã€‚\n\n$go doc sync.RWMutex.RLock\npackage sync // import &#34;sync&#34;\n\nfunc (rw *RWMutex) RLock()\n    RLock locks rw for reading.\n\n    It should not be used for recursive read locking; a blocked Lock call\n    excludes new readers from acquiring the lock. See the documentation on the\n    RWMutex type.\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648109364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338773,"user_name":"å°æ˜","can_delete":false,"product_type":"c1","uid":2812380,"ip_address":"","ucode":"F10955FF010368","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e9/dc/cc05ebc7.jpg","comment_is_top":false,"comment_ctime":1647714411,"is_pvip":false,"replies":[{"id":"123858","content":"good ideaã€‚å·²åˆ›å»ºhttps:&#47;&#47;gitee.com&#47;bigwhite&#47;publication&#47;tree&#47;master&#47;column&#47;timegeek&#47;go-first-course ä¾›ä¸‹è½½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1647811435,"ip_address":"","comment_id":338773,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5942681707","product_id":100093501,"comment_content":"èƒ½åœ¨gitee ä¸Šä¹Ÿæ”¾ä¸€ä»½å—ï¼Ÿgithubç°åœ¨å·²ç»æ²¡é‚£ä¹ˆå‹å¥½äº†<br>","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557435,"discussion_content":"good ideaã€‚å·²åˆ›å»ºhttps://gitee.com/bigwhite/publication/tree/master/column/timegeek/go-first-course ä¾›ä¸‹è½½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647811435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":2812380,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/e9/dc/cc05ebc7.jpg","nickname":"å°æ˜","note":"","ucode":"F10955FF010368","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":581649,"discussion_content":"404","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658908686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":557435,"ip_address":""},"score":581649,"extra":""},{"author":{"id":2537474,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b8/02/b538e9f4.jpg","nickname":"ç„¶è€Œ","note":"","ucode":"F1F1E093925934","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":2812380,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/e9/dc/cc05ebc7.jpg","nickname":"å°æ˜","note":"","ucode":"F10955FF010368","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581654,"discussion_content":"å¯ä»¥æ‰“å¼€äº†ï¼Œä½ åˆ·æ–°çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658909642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":581649,"ip_address":""},"score":581654,"extra":""}]}]},{"had_liked":false,"id":338514,"user_name":"601073891","can_delete":false,"product_type":"c1","uid":2822078,"ip_address":"","ucode":"FD90354D83B08B","user_header":"","comment_is_top":false,"comment_ctime":1647531247,"is_pvip":false,"replies":[{"id":"123865","content":"æ˜¯ä¸æ˜¯å‘½ä»¤è¡Œcurlä¸­çš„å•å¼•å·ã€åŒå¼•å·çš„å…¨åŠè§’é—®é¢˜å¯¼è‡´çš„å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1647826362,"ip_address":"","comment_id":338514,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5942498543","product_id":100093501,"comment_content":"å¤§å¤§ä½ å¥½ï¼Œè¿™æ¬¡é‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š<br>    è¿™æ¬¡çš„ä»£ç åœ¨linuxä¸‹èƒ½æˆåŠŸçš„è¿è¡Œï¼Œä½†æ˜¯åœ¨windowä¸‹è™½ç„¶èƒ½æˆåŠŸæ„å»ºå‡ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿèƒ½æˆåŠŸæ‰§è¡Œï¼Œ<br>D:\\Goproject\\src\\entity\\class\\bookstore\\cmd\\bookstore&gt;bookstore.exe<br>2022&#47;03&#47;17 23:10:49 web server start ok<br>ä½†åœ¨æœ¬æœºé€šè¿‡curl è®¿é—®æ—¶å´æœ‰è¿™æ ·ä¸€ä¸ªæŠ¥é”™ï¼š<br>C:\\Users\\user&gt;curl -X POST -H &quot;Content-Type:application&#47;json&quot; -d &#39;{&quot;id&quot;: &quot;978-7-111-55842-2&quot;, &quot;name&quot;: &quot;The Go Programming Language&quot;, &quot;authors&quot;:[&quot;Alan A.A.Donovan&quot;, &quot;Brian W. Kergnighan&quot;],&quot;press&quot;: &quot;Pearson Education&quot;}&#39; 192.168.1.7:8080&#47;book<br>curl: (6) Could not resolve host: 978-7-111-55842-2,<br>curl: (3) URL using bad&#47;illegal format or missing URL<br>curl: (3) URL using bad&#47;illegal format or missing URL<br>curl: (3) bad range in URL position 10:<br>authors:[Alan A.A.Donovan,<br><br>ä¸åŒç³»ç»Ÿä¸‹çš„goç‰ˆæœ¬éƒ½æ˜¯1.17ï¼Œå…¨éƒ¨é»˜è®¤ä½¿ç”¨go moduleï¼Œæˆ‘ç™¾åº¦äº†ä¸€ä¸‹ï¼Œæœ‰è¯´æ˜¯URLæ ¼å¼çš„é—®é¢˜ï¼Œä½†æ²¡æœ‰å¾ˆå¯¹åº”ï¼Œçœ‹äº†è¯„è®ºæ‚¨ä¹Ÿåœ¨windowsä¸Šèƒ½æˆåŠŸæ‰§è¡Œï¼Œæ‰€ä»¥æœ‰è¿™ä¸ªç–‘é—®ï¼Œæ‚¨çŸ¥é“è¿™ä¼šæ˜¯æ€ä¹ˆå›äº‹å—ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557451,"discussion_content":"æ˜¯ä¸æ˜¯å‘½ä»¤è¡Œcurlä¸­çš„å•å¼•å·ã€åŒå¼•å·çš„å…¨åŠè§’é—®é¢˜å¯¼è‡´çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647826362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2822078,"avatar":"","nickname":"601073891","note":"","ucode":"FD90354D83B08B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":559039,"discussion_content":"éå¸¸æ„Ÿè°¢è€å¸ˆçš„å›ç­”ã€‚\næˆ‘åœ¨è‡ªå·±å¼€äº†ä¸€å°è™šæ‹ŸæœºAæ¥è¾“å…¥curl postå‘½ä»¤æ—¶ï¼Œä¹Ÿæ˜¯èƒ½æˆåŠŸçš„ï¼Œæ‰€ä»¥åˆæ­¥å®šä½åˆ°æ—¶windowçš„cmdçš„é—®é¢˜ï¼Œç„¶ååˆå‘ç°åœ¨windowsçš„cmdä¸Šå¯ä»¥GETåˆ°Aæœºå™¨POSTå­˜å‚¨çš„æ•°æ®ï¼Œè€Œcurl GETå‘½ä»¤é‡Œæœ‰åŒå¼•å·ï¼Œå¦‚æœæ˜¯å…¨åŠè§’çš„é—®é¢˜çš„è¯é‚£å°±åŸºæœ¬å®šä½åˆ°é—®é¢˜æ˜¯å•å¼•å·çš„é—®é¢˜äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648576848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":557451,"ip_address":""},"score":559039,"extra":""}]}]},{"had_liked":false,"id":323309,"user_name":"è«åå››ä¸‹é‡Œ","can_delete":false,"product_type":"c1","uid":1436027,"ip_address":"","ucode":"83F1FE3A3FC255","user_header":"https://static001.geekbang.org/account/avatar/00/15/e9/7b/4e0ede2a.jpg","comment_is_top":false,"comment_ctime":1637828421,"is_pvip":false,"replies":[{"id":"117584","content":"è¿›å…¥bookstoreç›®å½•ï¼Œgo build .&#47;cmd&#47;bookstoreæˆ–go build bookstore&#47;cmd&#47;bookstore","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1638263216,"ip_address":"","comment_id":323309,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5932795717","product_id":100093501,"comment_content":"Tony Bai è€å¸ˆ<br>$ go build bookstore&#47;cmd&#47;bookstore&#47;        <br>package bookstore&#47;cmd&#47;bookstore is not in GOROOT (&#47;usr&#47;local&#47;go&#47;src&#47;bookstore&#47;cmd&#47;bookstore)<br>æ— æ³•æ„å»º   <br><br>é…ç½® GOROOT=&quot;&#47;usr&#47;local&#47;go&quot;<br>æŠ¥é”™  &#47;usr&#47;local&#47;go&#47;src&#47;bookstore&#47;cmd&#47;bookstore","like_count":2,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534726,"discussion_content":"è¿›å…¥bookstoreç›®å½•ï¼Œgo build ./cmd/bookstoreæˆ–go build bookstore/cmd/bookstore","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638263216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1155437,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a1/6d/a4ff33bb.jpg","nickname":"Lee","note":"","ucode":"0FF1C4EAF7F98A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":592038,"discussion_content":"è¿›å…¥åˆ°bookstore æ‰§è¡Œäº† go build ./cmd/bookstore æ²¡æœ‰æŠ¥é”™ã€‚ç„¶åæ‰§è¡Œ./cmd/bookstore æç¤ºzsh: permission denied: ./cmd/bookstore","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667039168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":534726,"ip_address":"å¹¿ä¸œ"},"score":592038,"extra":""}]},{"author":{"id":1436027,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e9/7b/4e0ede2a.jpg","nickname":"è«åå››ä¸‹é‡Œ","note":"","ucode":"83F1FE3A3FC255","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533298,"discussion_content":"å¿½ç•¥ åº”è¯¥æ˜¯ç¼–è¾‘å™¨ç¼“å­˜æˆ–è€…é…ç½®é”™è¯¯   æˆ‘åˆ äº†æ‰€æœ‰æ’ä»¶  å’Œ  å…³äºgoçš„é…ç½®  é‡æ–°ä¸‹è½½vscode\nç›®å‰å·²æ­£å¸¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637834413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320498,"user_name":"xsgzh","can_delete":false,"product_type":"c1","uid":1231479,"ip_address":"","ucode":"BDD8C353D37D67","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIqhXd8JapYK3q6EQzSC6brm7EPqwEe2vCKjOO0FibzAgc1svqtAvVe6HMN8oUiaXZTFtxWJuM36nlA/132","comment_is_top":false,"comment_ctime":1636353816,"is_pvip":false,"replies":[{"id":"116275","content":"å¦‚æœms.books[book.id] = bookï¼Œé‚£ä¹ˆç”±äºå­˜å‚¨çš„valueæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå½“å¤–éƒ¨çš„bookå‘ç”Ÿå˜åŒ–æ—¶ï¼Œmapä¸­å­˜å‚¨çš„valueå®é™…ä¸Šä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚<br><br>æˆ‘çš„ä»£ç ä¸­é€šè¿‡â€œcloneâ€ï¼Œå®é™…ä¸Šæ˜¯å°†å­˜å‚¨åœ¨mapä¸­çš„bookä¸å¤–éƒ¨ä¼ å…¥çš„bookåˆ†ç¦»å¼€æ¥ï¼Œå®ƒä»¬æ˜¯ä¸¤å—ä¸åŒçš„å­˜å‚¨åŒºåŸŸã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636427976,"ip_address":"","comment_id":320498,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5931321112","product_id":100093501,"comment_content":"è€å¸ˆè¯·æ•™ä¸ªæ–‡ä»¶<br>store&#47;memstore.goæ–‡ä»¶ä¸­ç¬¬29 - 30è¡Œï¼Œç›´æ¥èµ‹å€¼ä¸å¯ä»¥ä¹ˆï¼Œms.books[book.id] = book?<br>\tnBook := *book<br>\tms.books[book.Id] = &amp;nBook<br>","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530015,"discussion_content":"å¦‚æœms.books[book.id] = bookï¼Œé‚£ä¹ˆç”±äºå­˜å‚¨çš„valueæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå½“å¤–éƒ¨çš„bookå‘ç”Ÿå˜åŒ–æ—¶ï¼Œmapä¸­å­˜å‚¨çš„valueå®é™…ä¸Šä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚\n\næˆ‘çš„ä»£ç ä¸­é€šè¿‡â€œcloneâ€ï¼Œå®é™…ä¸Šæ˜¯å°†å­˜å‚¨åœ¨mapä¸­çš„bookä¸å¤–éƒ¨ä¼ å…¥çš„bookåˆ†ç¦»å¼€æ¥ï¼Œå®ƒä»¬æ˜¯ä¸¤å—ä¸åŒçš„å­˜å‚¨åŒºåŸŸã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636427976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1160678,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b5/e6/c67f12bd.jpg","nickname":"å·¦è€³æœµä¸œ","note":"","ucode":"60134ACF12BB52","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535622,"discussion_content":"æˆ‘ä¹Ÿæ³¨æ„åˆ°äº†è¿™é‡Œï¼Œè±ç„¶å¼€æœ—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638499191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111176,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f4/88/133bc14b.jpg","nickname":"c340","note":"","ucode":"D64CC3DDD09A0F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582752,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659658466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319612,"user_name":"ä¸è´Ÿé’æ˜¥ä¸è´Ÿå·±ğŸ¤˜","can_delete":false,"product_type":"c1","uid":1363671,"ip_address":"","ucode":"A6DD8E8B20EA6E","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/d7/5315f6ce.jpg","comment_is_top":false,"comment_ctime":1635864227,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"5930831523","product_id":100093501,"comment_content":"çªç„¶å‘ç°ä¸€ä¸ªå¥½ç©çš„github åŠŸèƒ½ï¼Œå³å°†.com å˜æˆdev ä¼šå˜æˆ web ç‰ˆçš„<br>https:&#47;&#47;github.dev&#47;bigwhite&#47;publication&#47;tree&#47;master&#47;column&#47;timegeek&#47;go-first-course&#47;09&#47;bookstore","like_count":1,"discussions":[{"author":{"id":2224761,"avatar":"https://static001.geekbang.org/account/avatar/00/21/f2/79/0bef90f8.jpg","nickname":"ç››æ¡ğŸŒ¿","note":"","ucode":"25D12D413CD373","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579340,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657359841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1793879,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJHTX1IwEl1Eh1CCO2ejL2gKe08Vxib61UZz9l5WGA81ObK0Nk5MCZ3ic6IWcW5kyX0DtwBNMEMl2Q/132","nickname":"Geek_8ed998","note":"","ucode":"1C164836354665","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411858,"discussion_content":"package bookstore/cmd/bookstore is not in GOROOT (/usr/local/go/src/bookstore/cmd/bookstore) æŒ‰è€å¸ˆçš„æ­¥éª¤æ‰§è¡Œåˆ°è¿™é‡Œå‡ºé”™ï¼Œä»€ä¹ˆåŸå› é˜¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636020539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359605,"user_name":"Bengå“å’”å•¦å’”","can_delete":false,"product_type":"c1","uid":2981277,"ip_address":"ç¾å›½","ucode":"9B1942EFFCB126","user_header":"https://static001.geekbang.org/account/avatar/00/2d/7d/9d/ced762c5.jpg","comment_is_top":false,"comment_ctime":1665672879,"is_pvip":false,"replies":[{"id":"130835","content":"ä¸“æ çš„ç¡®æ²¡æœ‰è§„åˆ’è°ƒè¯•ç›¸å…³çš„ç« èŠ‚ï¼Œæˆ‘ä¸ªäººæœ€å¸¸ç”¨çš„å…¶å®è¿˜æ˜¯printå¤§æ³•ï¼Œå¦‚æœè¯´å·¥å…·ï¼Œé‚£ä¹ˆdelve(https:&#47;&#47;github.com&#47;go-delve&#47;delve<br>)æ˜¯ä¸äºŒä¹‹é€‰çš„äº‹å®æ ‡å‡†ã€‚vscodeç”¨çš„åº”è¯¥ä¹Ÿæ˜¯delveå§ã€‚ä¸è¿‡æˆ‘ä¸ªäººé€šå¸¸å–œæ¬¢åŸºäºå‘½ä»¤è¡Œçš„è°ƒè¯•ã€‚<br><br>å¦‚æœæ²¡æœ‰åˆ«çš„èµ„æ–™ï¼Œå»ºè®®è¿˜æ˜¯çœ‹å®˜æ–¹æ–‡æ¡£ https:&#47;&#47;github.com&#47;go-delve&#47;delve&#47;blob&#47;master&#47;Documentation&#47;cli&#47;getting_started.md<br><br>å¦‚æœéè¦çœ‹æˆ‘å‡ºå“çš„èµ„æ–™:)ï¼Œå¯ä»¥æ‰¾æ‰¾æˆ‘çš„ä¹¦ã€ŠGoè¯­è¨€ç²¾è¿›ä¹‹è·¯ã€‹ï¼Œé‚£ä¸ªä¸Šé¢æœ‰è°ƒè¯•ç›¸å…³çš„å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1665740593,"ip_address":"ç¾å›½","comment_id":359605,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1665672879","product_id":100093501,"comment_content":"Tony Bai è€å¸ˆï¼Œèƒ½è®²ä¸‹å¦‚ä½•è°ƒè¯•goå·¥ç¨‹ä»£ç å—ï¼Ÿæˆ‘ç”¨vscodeä¸€ç›´ä¸èƒ½è°ƒè¯•ï¼Œç…§ç½‘ä¸Šçš„åŠæ³•è®¾ç½®äº†ä¹Ÿæ²¡èƒ½è¡Œï¼Œä¸æ™“å¾—å…·ä½“é—®é¢˜å‡ºåœ¨å“ª","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590440,"discussion_content":"ä¸“æ çš„ç¡®æ²¡æœ‰è§„åˆ’è°ƒè¯•ç›¸å…³çš„ç« èŠ‚ï¼Œæˆ‘ä¸ªäººæœ€å¸¸ç”¨çš„å…¶å®è¿˜æ˜¯printå¤§æ³•ï¼Œå¦‚æœè¯´å·¥å…·ï¼Œé‚£ä¹ˆdelve(https://github.com/go-delve/delve\n)æ˜¯ä¸äºŒä¹‹é€‰çš„äº‹å®æ ‡å‡†ã€‚vscodeç”¨çš„åº”è¯¥ä¹Ÿæ˜¯delveå§ã€‚ä¸è¿‡æˆ‘ä¸ªäººé€šå¸¸å–œæ¬¢åŸºäºå‘½ä»¤è¡Œçš„è°ƒè¯•ã€‚\n\nå¦‚æœæ²¡æœ‰åˆ«çš„èµ„æ–™ï¼Œå»ºè®®è¿˜æ˜¯çœ‹å®˜æ–¹æ–‡æ¡£ https://github.com/go-delve/delve/blob/master/Documentation/cli/getting_started.md\n\nå¦‚æœéè¦çœ‹æˆ‘å‡ºå“çš„èµ„æ–™:)ï¼Œå¯ä»¥æ‰¾æ‰¾æˆ‘çš„ä¹¦ã€ŠGoè¯­è¨€ç²¾è¿›ä¹‹è·¯ã€‹ï¼Œé‚£ä¸ªä¸Šé¢æœ‰è°ƒè¯•ç›¸å…³çš„å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665740593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ç¾å›½"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358722,"user_name":"Geek_a8ce05","can_delete":false,"product_type":"c1","uid":2956682,"ip_address":"åŒ—äº¬","ucode":"C1D4002C48568F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/rvQxUmekECjyZu1RwbUguBWpBcQuKywQPtiaxNVFJSib07QMZnNUr8MnRF3RYEsn6MhgGFJibwlrVomibEicYMiaia7ZQ/132","comment_is_top":false,"comment_ctime":1664620530,"is_pvip":false,"replies":[{"id":"130488","content":"è¿™ä¸€èŠ‚å¼€å§‹å¤„å°±æœ‰&quot;ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘åœ¨è¿™èŠ‚è¯¾å®‰æ’äº†ä¸€ä¸ªå®æˆ˜å°é¡¹ç›®ã€‚åœ¨è¿™ä¸ªå°é¡¹ç›®é‡Œï¼Œæˆ‘å¸Œæœ›ä½ ä¸è¦å›°åœ¨å„ç§è¯­æ³•é‡Œï¼Œè€Œæ˜¯å…ˆè·Ÿç€æˆ‘â€œâ€œç…§çŒ«ç”»è™â€åœ°å†™ä¸€éã€è·‘ä¸€æ¬¡ï¼Œæ„Ÿå— Go é¡¹ç›®çš„ç»“æ„ï¼Œä½“ä¼š Go è¯­è¨€çš„é­…åŠ›ã€‚&quot;çš„è¯´æ³•ï¼Œè¿™ä¸€èŠ‚å¹¶ä¸ä¼šè¦æ±‚å¤§å®¶éƒ½èƒ½çœ‹æ‡‚çš„ã€‚æ‰€ä»¥æ”¾å¹³å¿ƒæ€ï¼Œç»§ç»­å­¦ä¹ ï¼Œåç»­å†å›é¦–æ¥çœ‹çœ‹ï¼Œé‚£æ—¶å€™è‡ªç„¶å°±æ‡‚äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1664676720,"ip_address":"åŒ—äº¬","comment_id":358722,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1664620530","product_id":100093501,"comment_content":"å­¦ä¹ æ›²çº¿å¤ªé™¡å³­äº†ï¼Œå®Œå…¨æ²¡çœ‹æ‡‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589301,"discussion_content":"è¿™ä¸€èŠ‚å¼€å§‹å¤„å°±æœ‰&#34;ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘åœ¨è¿™èŠ‚è¯¾å®‰æ’äº†ä¸€ä¸ªå®æˆ˜å°é¡¹ç›®ã€‚åœ¨è¿™ä¸ªå°é¡¹ç›®é‡Œï¼Œæˆ‘å¸Œæœ›ä½ ä¸è¦å›°åœ¨å„ç§è¯­æ³•é‡Œï¼Œè€Œæ˜¯å…ˆè·Ÿç€æˆ‘â€œâ€œç…§çŒ«ç”»è™â€åœ°å†™ä¸€éã€è·‘ä¸€æ¬¡ï¼Œæ„Ÿå— Go é¡¹ç›®çš„ç»“æ„ï¼Œä½“ä¼š Go è¯­è¨€çš„é­…åŠ›ã€‚&#34;çš„è¯´æ³•ï¼Œè¿™ä¸€èŠ‚å¹¶ä¸ä¼šè¦æ±‚å¤§å®¶éƒ½èƒ½çœ‹æ‡‚çš„ã€‚æ‰€ä»¥æ”¾å¹³å¿ƒæ€ï¼Œç»§ç»­å­¦ä¹ ï¼Œåç»­å†å›é¦–æ¥çœ‹çœ‹ï¼Œé‚£æ—¶å€™è‡ªç„¶å°±æ‡‚äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664676720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357828,"user_name":"Bryant Ba","can_delete":false,"product_type":"c1","uid":1901839,"ip_address":"åŒ—äº¬","ucode":"F54A60446A04DF","user_header":"https://static001.geekbang.org/account/avatar/00/1d/05/0f/fbfaaf3c.jpg","comment_is_top":false,"comment_ctime":1663667121,"is_pvip":true,"replies":[{"id":"130248","content":"08è®²æè¿‡ï¼Œç©ºå¯¼å…¥(import _ &quot;xxx&quot;)æ˜¯æœ‰â€œå‰¯ä½œç”¨â€çš„ï¼Œå³ä¾¿æ˜¯ç©ºå¯¼å…¥ï¼Œxxxä¸­çš„initå‡½æ•°ä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥å¦‚æœä¸å¼•ç”¨internal&#47;storeåŒ…ï¼ŒstoreåŒ…ä¸­çš„initå‡½æ•°å°±æ²¡æœ‰è¢«æ‰§è¡Œï¼Œä¸€äº›å†…å­˜ç»“æ„å°±æ²¡æ³•åˆå§‹åŒ–ã€‚<br><br>ä¸è¿‡ä¸å¯¼å…¥è¿™ä¸ªåŒ…ä¸ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯å§ï¼Œä½†è¿è¡Œç¨‹åºä¼šå‡ºé”™ï¼<br><br>$.&#47;bookstore<br>panic: store: unknown provider mem<br><br>goroutine 1 [running]:<br>main.main()<br>\t&#47;Users&#47;tonybai&#47;github&#47;geekbang&#47;column&#47;go-primer&#47;part2&#47;sources&#47;bookstore&#47;cmd&#47;bookstore&#47;main.go:18 +0x3ea","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1663745102,"ip_address":"åŒ—äº¬","comment_id":357828,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1663667121","product_id":100093501,"comment_content":"_ &quot;tonybai_learning&#47;internal&#47;store&quot;  è€å¸ˆé—®ä¸‹ä¸ºä»€ä¹ˆmainé‡Œä¸å¼•è¿™ä¸ªåŒ…ä¼šç¼–è¯‘æŠ¥é”™å‘¢ï¼Œçœ‹å¥½åƒæ²¡æœ‰å¯¹è¿™ä¸ªåŒ…çš„è°ƒç”¨ï¼Œå¤šè°¢è€å¸ˆæŒ‡ç‚¹ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588405,"discussion_content":"08è®²æè¿‡ï¼Œç©ºå¯¼å…¥(import _ &#34;xxx&#34;)æ˜¯æœ‰â€œå‰¯ä½œç”¨â€çš„ï¼Œå³ä¾¿æ˜¯ç©ºå¯¼å…¥ï¼Œxxxä¸­çš„initå‡½æ•°ä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥å¦‚æœä¸å¼•ç”¨internal/storeåŒ…ï¼ŒstoreåŒ…ä¸­çš„initå‡½æ•°å°±æ²¡æœ‰è¢«æ‰§è¡Œï¼Œä¸€äº›å†…å­˜ç»“æ„å°±æ²¡æ³•åˆå§‹åŒ–ã€‚\n\nä¸è¿‡ä¸å¯¼å…¥è¿™ä¸ªåŒ…ä¸ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯å§ï¼Œä½†è¿è¡Œç¨‹åºä¼šå‡ºé”™ï¼\n\n$./bookstore\npanic: store: unknown provider mem\n\ngoroutine 1 [running]:\nmain.main()\n\t/Users/tonybai/github/geekbang/column/go-primer/part2/sources/bookstore/cmd/bookstore/main.go:18 +0x3ea","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663745102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357240,"user_name":"Fibonacci","can_delete":false,"product_type":"c1","uid":1168361,"ip_address":"åŒ—äº¬","ucode":"31DB723EB4BBA1","user_header":"https://static001.geekbang.org/account/avatar/00/11/d3/e9/59ff9004.jpg","comment_is_top":false,"comment_ctime":1663083012,"is_pvip":false,"replies":[{"id":"130028","content":"å¥½é—®é¢˜ã€‚<br><br>è¿”å›æŒ‡é’ˆï¼Œç›¸å½“äºæŠŠmapçš„valueè¿”å›å‡ºå»äº†ï¼Œè¿™æ ·å¤–éƒ¨å¯ä»¥ä¸é€šè¿‡mapå³å¯é€šè¿‡æŒ‡é’ˆä¿®æ”¹mapå†…å…ƒç´ çš„valueã€‚è¿™åœ¨å·¥ç¨‹ç¼–ç ä¸­å¯èƒ½ä¼šå› å…¶ä»–äººè¯¯ä¿®æ”¹è€Œå¯¼è‡´ç¨‹åºçš„æ€ªå¼‚è¡Œä¸ºï¼ˆbugï¼‰ã€‚<br><br>è¿™é‡Œåšäº†ä¸€ä»½copyï¼Œè¿™æ ·è¿”å›çš„å€¼ä¸mapä¸­çš„å…ƒç´ å°±â€œæ²¡æœ‰å…³è”â€äº†ã€‚å¤–éƒ¨ä¿®æ”¹mapå†…å…ƒç´ å€¼åªèƒ½é€šè¿‡mapæ¥è¿›è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1663136677,"ip_address":"åŒ—äº¬","comment_id":357240,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1663083012","product_id":100093501,"comment_content":"bookstore&#47;internal&#47;store&#47;memstore.goé‡Œçš„Updateæ–¹æ³•45è¡Œï¼Œæ˜¯å¦ä¸éœ€è¦nBook := *oldBookè½¬æ¢å‘¢ï¼Ÿè½¬æ¢äº†ä¼šæœ‰copyäº†å§ï¼Ÿç›´æ¥ç”¨åŸæ¥çš„æŒ‡é’ˆç›´æ¥æ“ä½œæ˜¯ä¸æ˜¯å¥½ä¸€ç‚¹ï¼Ÿå°ç™½ä¸æ‡‚é—®ä¸€ä¸‹è¿™é‡Œ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587541,"discussion_content":"å¥½é—®é¢˜ã€‚\n\nè¿”å›æŒ‡é’ˆï¼Œç›¸å½“äºæŠŠmapçš„valueè¿”å›å‡ºå»äº†ï¼Œè¿™æ ·å¤–éƒ¨å¯ä»¥ä¸é€šè¿‡mapå³å¯é€šè¿‡æŒ‡é’ˆä¿®æ”¹mapå†…å…ƒç´ çš„valueã€‚è¿™åœ¨å·¥ç¨‹ç¼–ç ä¸­å¯èƒ½ä¼šå› å…¶ä»–äººè¯¯ä¿®æ”¹è€Œå¯¼è‡´ç¨‹åºçš„æ€ªå¼‚è¡Œä¸ºï¼ˆbugï¼‰ã€‚\n\nè¿™é‡Œåšäº†ä¸€ä»½copyï¼Œè¿™æ ·è¿”å›çš„å€¼ä¸mapä¸­çš„å…ƒç´ å°±â€œæ²¡æœ‰å…³è”â€äº†ã€‚å¤–éƒ¨ä¿®æ”¹mapå†…å…ƒç´ å€¼åªèƒ½é€šè¿‡mapæ¥è¿›è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663136677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356381,"user_name":"Geek_c2083d","can_delete":false,"product_type":"c1","uid":3170814,"ip_address":"åŒ—äº¬","ucode":"124E13F664E45A","user_header":"","comment_is_top":false,"comment_ctime":1662222460,"is_pvip":false,"replies":[{"id":"129771","content":"åŒä¸€ä¸ªpackageåœ¨ä¸åŒç›®å½•ä¸‹ï¼Ÿè¿™ä¸ªä»€ä¹ˆæ„æ€?åŒä¸€ä¸ªgo packageåªèƒ½åœ¨ä¸€ä¸ªç›®å½•ä¸‹å•Šï¼Œæ— æ³•åˆ†åœ¨å¤šä¸ªç›®å½•ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1662348057,"ip_address":"åŒ—äº¬","comment_id":356381,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1662222460","product_id":100093501,"comment_content":"åŒä¸€ä¸ªpackageåˆ†åœ¨ä¸åŒç›®å½•ä¸‹ï¼Œä¼šä¸ä¼šä¸å¥½ç»´æŠ¤ï¼Œ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586574,"discussion_content":"åŒä¸€ä¸ªpackageåœ¨ä¸åŒç›®å½•ä¸‹ï¼Ÿè¿™ä¸ªä»€ä¹ˆæ„æ€?åŒä¸€ä¸ªgo packageåªèƒ½åœ¨ä¸€ä¸ªç›®å½•ä¸‹å•Šï¼Œæ— æ³•åˆ†åœ¨å¤šä¸ªç›®å½•ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662348057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356101,"user_name":"å“ç„¶","can_delete":false,"product_type":"c1","uid":1202149,"ip_address":"åŒ—äº¬","ucode":"F0E173FD82181B","user_header":"https://static001.geekbang.org/account/avatar/00/12/57/e5/0af7593f.jpg","comment_is_top":false,"comment_ctime":1661964131,"is_pvip":false,"replies":[{"id":"129663","content":"æˆ‘è§‰å¾—ä¸èƒ½ä¸ºäº†å•å…ƒæµ‹è¯•é—®é¢˜è€Œå¦å®šäº†ç»“æ„ä¸Šçš„è®¾è®¡ã€‚è¿™ä¸ªç»“æ„æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ›å»ºå‹å·¥å‚æ¨¡å¼ï¼Œgoæ ‡å‡†åº“çš„sql&#47;databaseä½¿ç”¨çš„æ˜¯åŒç±»è®¾è®¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1662083451,"ip_address":"åŒ—äº¬","comment_id":356101,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1661964131","product_id":100093501,"comment_content":"è¯·æ•™è€å¸ˆä¸ªé—®é¢˜ï¼Œfactory.Register(&quot;mem&quot;, &amp;MemStore{ books: make(map[string]*mystore.Book), })æ”¾åˆ°memstore.go çš„initå†…æ˜¯å¦åˆé€‚?æ„Ÿè§‰memstoreæ²¡æœ‰å¿…è¦ä¾èµ–factoryï¼Œåœ¨å¯¹memstore åšå•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œinitå‡½æ•°ä¹Ÿä¼šè¢«æ‰§è¡Œï¼Œä½†æ€»æ„Ÿè§‰æ²¡ç”¨å¿…è¦æ‰§è¡Œinitå‡½æ•°","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586261,"discussion_content":"æˆ‘è§‰å¾—ä¸èƒ½ä¸ºäº†å•å…ƒæµ‹è¯•é—®é¢˜è€Œå¦å®šäº†ç»“æ„ä¸Šçš„è®¾è®¡ã€‚è¿™ä¸ªç»“æ„æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ›å»ºå‹å·¥å‚æ¨¡å¼ï¼Œgoæ ‡å‡†åº“çš„sql/databaseä½¿ç”¨çš„æ˜¯åŒç±»è®¾è®¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662083451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353492,"user_name":"ç™½å°ç™½","can_delete":false,"product_type":"c1","uid":1031680,"ip_address":"åŒ—äº¬","ucode":"2CCB878DA2E93D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/pESfAX6YVRnVg3HpOX44bTa64bHTbhsnlHJqqDjicBeELxCs5rwwIXibFibd0fua3VyVExypnqnfgTSUp8WoYmc9g/132","comment_is_top":false,"comment_ctime":1659497372,"is_pvip":false,"replies":[{"id":"128688","content":"é”™è¯¯çš„å«ä¹‰æ˜¯ï¼šä½ çš„serverçš„listen Addrä¸­æ²¡æœ‰åŒ…å«portä¿¡æ¯ï¼Œä½ æ˜¯ä¸æ˜¯ä¼ å…¥äº†â€œ8081â€ï¼Œè€Œä¸æ˜¯&quot;:8081&quot;ï¼Œæ˜¯ä¸æ˜¯å°‘äº†å†’å·å•Šï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1659924320,"ip_address":"åŒ—äº¬","comment_id":353492,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1659497372","product_id":100093501,"comment_content":" æ‰§è¡Œmain.goä¹‹åï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼šweb server start failed: listen tcp: address 8081: missing port in addressã€‚è€å¸ˆï¼Œè¯·é—®æ˜¯æˆ‘ç«¯å£æ²¡å¼€å¯çš„åŸå› å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583115,"discussion_content":"é”™è¯¯çš„å«ä¹‰æ˜¯ï¼šä½ çš„serverçš„listen Addrä¸­æ²¡æœ‰åŒ…å«portä¿¡æ¯ï¼Œä½ æ˜¯ä¸æ˜¯ä¼ å…¥äº†â€œ8081â€ï¼Œè€Œä¸æ˜¯&#34;:8081&#34;ï¼Œæ˜¯ä¸æ˜¯å°‘äº†å†’å·å•Šï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659924320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352905,"user_name":"å°æ˜","can_delete":false,"product_type":"c1","uid":2812380,"ip_address":"é™•è¥¿","ucode":"F10955FF010368","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e9/dc/cc05ebc7.jpg","comment_is_top":false,"comment_ctime":1659002070,"is_pvip":false,"replies":[{"id":"128372","content":"æ…¢æ…¢æ¥ã€‚è¿™ä¸ªä¾‹å­ç›®çš„å¹¶éè®©åˆå­¦è€…å»å®Œå…¨ç†è§£ï¼Œè€Œæ˜¯â€œæ„Ÿå— Go é¡¹ç›®çš„ç»“æ„ï¼Œä½“ä¼š Go è¯­è¨€çš„é­…åŠ›â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1659102247,"ip_address":"é™•è¥¿","comment_id":352905,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1659002070","product_id":100093501,"comment_content":"æˆ‘å¾—è‡ªå·±å†™ä¸€éï¼Œè¿è¡Œèµ·æ¥è¿˜ä¸è¡Œï¼Œä¸ç„¶æ²¡æœ‰æ•ˆæœã€‚ä¸è¿‡è¿è¡Œèµ·æ¥ä»¥åï¼Œå†™å°±æ›´æœ‰ä¿¡å¿ƒäº†ï¼Œä¸€æ­¥ä¸€æ­¥æ¥å¤„ç†","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581987,"discussion_content":"æ…¢æ…¢æ¥ã€‚è¿™ä¸ªä¾‹å­ç›®çš„å¹¶éè®©åˆå­¦è€…å»å®Œå…¨ç†è§£ï¼Œè€Œæ˜¯â€œæ„Ÿå— Go é¡¹ç›®çš„ç»“æ„ï¼Œä½“ä¼š Go è¯­è¨€çš„é­…åŠ›â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659102247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352903,"user_name":"å°æ˜","can_delete":false,"product_type":"c1","uid":2812380,"ip_address":"é™•è¥¿","ucode":"F10955FF010368","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e9/dc/cc05ebc7.jpg","comment_is_top":false,"comment_ctime":1659001026,"is_pvip":false,"replies":[{"id":"128371","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1659101997,"ip_address":"é™•è¥¿","comment_id":352903,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1659001026","product_id":100093501,"comment_content":"æˆ‘çœ‹åˆ°äº†main åŒ…é‡Œé¢   _ &quot;bookstore&#47;internal&#47;store&quot;   è¿™ä¸ªæ˜¯ç¬¬ä¸€ä¸ªï¼Œå°±æ˜¯å…ˆè°ƒç”¨äº†ä»–çš„ init æ–¹æ³•ï¼ŒæŠŠ mem æ³¨å†Œå·¥å‚ï¼Œç„¶å  s, err := factory.New(&quot;mem&quot;) &#47;&#47; åˆ›å»ºå›¾ä¹¦æ•°æ®å­˜å‚¨æ¨¡å—å®ä¾‹ å°±å¯ä»¥ç›´æ¥å®ä¾‹åŒ–è¿™ä¸ªmen å–æ•°æ® ã€‚æ–°æ‰‹ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œè¯´é”™äº†åˆ«ç¬‘è¯ï¼Œæœ‰é”™è¯¯è¯·æŒ‡å‡º","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581986,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659101998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352902,"user_name":"å°æ˜","can_delete":false,"product_type":"c1","uid":2812380,"ip_address":"é™•è¥¿","ucode":"F10955FF010368","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e9/dc/cc05ebc7.jpg","comment_is_top":false,"comment_ctime":1659000642,"is_pvip":false,"replies":[{"id":"128373","content":"å¾ˆæ­£å¸¸ï¼Œè¿™ä¸ªä¾‹å­å¹¶éè®©ä½ å®Œå…¨ç†è§£ï¼Œå­¦åˆ°ç¬¬09è®²è¦æ˜¯å®Œå…¨ç†è§£äº†ï¼Œé‚£åé¢å°±ä¸ç”¨å­¦ä¹ äº†:)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1659102302,"ip_address":"é™•è¥¿","comment_id":352902,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1659000642","product_id":100093501,"comment_content":"çœ‹äº†ä¸¤éä»£ç ï¼Œèƒ½è·‘èµ·æ¥ï¼Œä½†æ˜¯åªåƒé€äº†ç™¾åˆ†ä¹‹ä¸‰åï¼Œå¥½ç€æ€¥å•Š  memstore.go   æ²¡çœ‹æ‡‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581988,"discussion_content":"å¾ˆæ­£å¸¸ï¼Œè¿™ä¸ªä¾‹å­å¹¶éè®©ä½ å®Œå…¨ç†è§£ï¼Œå­¦åˆ°ç¬¬09è®²è¦æ˜¯å®Œå…¨ç†è§£äº†ï¼Œé‚£åé¢å°±ä¸ç”¨å­¦ä¹ äº†:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659102302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350764,"user_name":"wei ä¸¶","can_delete":false,"product_type":"c1","uid":1234929,"ip_address":"","ucode":"331DE893F75B95","user_header":"https://static001.geekbang.org/account/avatar/00/12/d7/f1/ce10759d.jpg","comment_is_top":false,"comment_ctime":1657179693,"is_pvip":false,"replies":[{"id":"127668","content":"1. å½“ListenAndServeå‘ç”Ÿerrï¼Œè¯´æ˜serverå¯åŠ¨å¤±è´¥ï¼Œåç»­æ•´ä¸ªç¨‹åºä¹Ÿå°±é€€å‡ºäº†ã€‚å†…å­˜æ³„ä¸æ³„éœ²éƒ½æ²¡å…³ç³»ã€‚<br>2. goæ˜¯å¸¦gcè¯­è¨€ï¼Œå½“timer fireåä¼šè¢«è‡ªåŠ¨å›æ”¶æ‰ï¼Œæ‰€ä»¥ä¹Ÿä¸å­˜åœ¨å†…å­˜æ³„éœ²é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1657405120,"ip_address":"","comment_id":350764,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1657179693","product_id":100093501,"comment_content":"è€å¸ˆè¿™ä¸€è¡Œä»£ç ä½¿ç”¨time.afterå¦‚æœerrå‘ç”Ÿäº†ä¸ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼äº†? https:&#47;&#47;github.com&#47;bigwhite&#47;publication&#47;blob&#47;master&#47;column&#47;timegeek&#47;go-first-course&#47;09&#47;bookstore&#47;server&#47;server.go#L49","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579372,"discussion_content":"1. å½“ListenAndServeå‘ç”Ÿerrï¼Œè¯´æ˜serverå¯åŠ¨å¤±è´¥ï¼Œåç»­æ•´ä¸ªç¨‹åºä¹Ÿå°±é€€å‡ºäº†ã€‚å†…å­˜æ³„ä¸æ³„éœ²éƒ½æ²¡å…³ç³»ã€‚\n2. goæ˜¯å¸¦gcè¯­è¨€ï¼Œå½“timer fireåä¼šè¢«è‡ªåŠ¨å›æ”¶æ‰ï¼Œæ‰€ä»¥ä¹Ÿä¸å­˜åœ¨å†…å­˜æ³„éœ²é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657405120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1234929,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d7/f1/ce10759d.jpg","nickname":"wei ä¸¶","note":"","ucode":"331DE893F75B95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":579850,"discussion_content":"å“¦å“¦å“¦ï¼Œè€å¸ˆçš„æ„æ€æ˜¯å¦‚æœListenAndServeå‘ç”Ÿerræ•´ä¸ªç¨‹åºé€€å‡ºé‚£ä¹ˆå°±ä¸å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œå¦‚æœæ­£å¸¸é‚£ä¹ˆtimer.Cä¼šè¢«è§¦å‘ï¼Œé‚£å°±ä¼šè‡ªåŠ¨å›æ”¶ï¼Œæ‰€ä»¥æ²¡æœ‰é—®é¢˜äº†å˜›~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657713476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":579372,"ip_address":""},"score":579850,"extra":""}]}]},{"had_liked":false,"id":350500,"user_name":"s t o a","can_delete":false,"product_type":"c1","uid":2135449,"ip_address":"","ucode":"B6862E64F2536A","user_header":"https://static001.geekbang.org/account/avatar/00/20/95/99/959f14de.jpg","comment_is_top":false,"comment_ctime":1656949047,"is_pvip":false,"replies":[{"id":"127517","content":"ä½ æ˜¯åœ¨å‘½ä»¤è¡Œä¸‹ç”¨goå‘½ä»¤ç¼–è¯‘çš„ï¼Ÿè¿˜æ˜¯åœ¨golandä¸­ç¼–è¯‘çš„ï¼Ÿ<br><br>internal&#47;store&#47;memstore.goä¸­æ˜¯æœ‰Createæ–¹æ³•çš„å®ç°çš„ï¼š<br><br>func (ms *MemStore) Create(book *mystore.Book) error {<br> ... ...<br>}<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1656995757,"ip_address":"","comment_id":350500,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1656949047","product_id":100093501,"comment_content":"cannot use &amp;MemStore{â€¦} (value of type *MemStore) as type &quot;bookstore&#47;store&quot;.Store in argument to factory.Register:<br>\t*MemStore does not implement &quot;bookstore&#47;store&quot;.Store (missing Create method)<br><br>è¿™ä¸ªé—®é¢˜è¦æ€ä¹ˆè§£å†³","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578757,"discussion_content":"ä½ æ˜¯åœ¨å‘½ä»¤è¡Œä¸‹ç”¨goå‘½ä»¤ç¼–è¯‘çš„ï¼Ÿè¿˜æ˜¯åœ¨golandä¸­ç¼–è¯‘çš„ï¼Ÿ\n\ninternal/store/memstore.goä¸­æ˜¯æœ‰Createæ–¹æ³•çš„å®ç°çš„ï¼š\n\nfunc (ms *MemStore) Create(book *mystore.Book) error {\n ... ...\n}\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656995758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349037,"user_name":"xiong","can_delete":false,"product_type":"c1","uid":1099375,"ip_address":"","ucode":"C1BFD9EF96372F","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/6f/ac3003fa.jpg","comment_is_top":false,"comment_ctime":1655683636,"is_pvip":false,"replies":[{"id":"127028","content":"çœŸå®ç”Ÿäº§ä¸­è¿è¡Œçš„ç¨‹åºä¸æ—¥å¸¸ç¼–å†™çš„demoä¾‹å­ä¸åŒï¼Œè¦è€ƒè™‘å„ç§æƒ…å†µï¼Œé€€å‡ºä¹Ÿè¦è€ƒè™‘â€œä¼˜é›…é€€å‡ºâ€ã€‚è¿™é‡Œçš„ä¾‹å­æ²¡æœ‰ç›´æ¥exitï¼Œè€Œæ˜¯åŠ å…¥äº†ä¸€äº›ä¼˜é›…é€€å‡ºçš„è€ƒè™‘ï¼Œæ‰€ä»¥çœ‹èµ·æ¥&quot;ç¹ç&quot;äº†äº›ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1655703268,"ip_address":"","comment_id":349037,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1655683636","product_id":100093501,"comment_content":"è¿™é€€å‡ºä¸ºä»€ä¹ˆè¿™ä¹ˆç¹çå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576613,"discussion_content":"çœŸå®ç”Ÿäº§ä¸­è¿è¡Œçš„ç¨‹åºä¸æ—¥å¸¸ç¼–å†™çš„demoä¾‹å­ä¸åŒï¼Œè¦è€ƒè™‘å„ç§æƒ…å†µï¼Œé€€å‡ºä¹Ÿè¦è€ƒè™‘â€œä¼˜é›…é€€å‡ºâ€ã€‚è¿™é‡Œçš„ä¾‹å­æ²¡æœ‰ç›´æ¥exitï¼Œè€Œæ˜¯åŠ å…¥äº†ä¸€äº›ä¼˜é›…é€€å‡ºçš„è€ƒè™‘ï¼Œæ‰€ä»¥çœ‹èµ·æ¥&#34;ç¹ç&#34;äº†äº›ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655703268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348879,"user_name":"å†›","can_delete":false,"product_type":"c1","uid":1326801,"ip_address":"","ucode":"7D4DE0E435BF21","user_header":"https://static001.geekbang.org/account/avatar/00/14/3e/d1/17f3160c.jpg","comment_is_top":false,"comment_ctime":1655483788,"is_pvip":true,"replies":[{"id":"127027","content":"ä¼°è®¡é€šè¿‡è¿™ä¸ªä¾‹å­çš„æ’é”™è¿‡ç¨‹ï¼Œå¯ä»¥è®©ä½ æ›´å¥½çš„ç†è§£goä»£ç çš„è¿ä½œæœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1655703123,"ip_address":"","comment_id":348879,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1655483788","product_id":100093501,"comment_content":"åˆšå­¦goå°±ç¢°ä¸Šä¸€ä¸ªå¤§å‘<br>ä¸å°å¿ƒæŠŠfactoryåŒ…çš„Registerä¸­çš„defer providersMu.Unlock()è¯¯å†™æˆdefer providersMu.Lock()<br>é€ æˆæ­»é”ï¼Œè¿è¡Œserviceä¹Ÿæ²¡æç¤ºï¼Œcurlè¯·æ±‚Connection refused<br><br>è°ƒè¯•è¿‡ç¨‹è®°å½•ï¼š<br>1. main.mainæ‰€æœ‰ä»£ç æ³¨é‡Šæ‰ï¼Œåªå†™ä¸€ä¸ªlogï¼Œå¯åŠ¨æ­£å¸¸<br>2. å¯¼å…¥ _ &quot;bookstore&#47;internal&#47;store&quot;åŒ…ï¼Œå¯åŠ¨ï¼Œå°±èƒ½çœ‹åˆ°æ­»é”æŠ¥é”™äº†<br><br>fatal error: all goroutines are asleep - deadlock!","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576612,"discussion_content":"ä¼°è®¡é€šè¿‡è¿™ä¸ªä¾‹å­çš„æ’é”™è¿‡ç¨‹ï¼Œå¯ä»¥è®©ä½ æ›´å¥½çš„ç†è§£goä»£ç çš„è¿ä½œæœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655703124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348452,"user_name":"licorne","can_delete":false,"product_type":"c1","uid":1952288,"ip_address":"","ucode":"A5248434D0039C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/ca/20/60ca5f47.jpg","comment_is_top":false,"comment_ctime":1655110582,"is_pvip":false,"replies":[{"id":"126970","content":"å·²ç»å°†Shutdownå®šä¹‰ä¸ºBookStoreServerçš„æ–¹æ³•äº†ï¼š<br><br>func (bs *BookStoreServer) Shutdown(ctx context.Context) error {<br>    return bs.srv.Shutdown(ctx)<br>}<br><br>ä¸éœ€è¦å¯¼å‡ºBookStoreServerå†…éƒ¨çš„å­—æ®µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1655270902,"ip_address":"","comment_id":348452,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1655110582","product_id":100093501,"comment_content":"type BookStoreServer struct {<br>\ts   store.Store<br>\tSrv *http.Server<br>}<br><br>è¿™ä¸ªçš„srvåº”è¯¥é¦–å­—æ¯å¤§å†™,ä¸ç„¶main.goé‡Œçš„srv.Shutdown ä¹Ÿè°ƒç”¨ä¸åˆ°,ä¹Ÿå¾— srv.Srv.Shutdown","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576073,"discussion_content":"å·²ç»å°†Shutdownå®šä¹‰ä¸ºBookStoreServerçš„æ–¹æ³•äº†ï¼š\n\nfunc (bs *BookStoreServer) Shutdown(ctx context.Context) error {\n    return bs.srv.Shutdown(ctx)\n}\n\nä¸éœ€è¦å¯¼å‡ºBookStoreServerå†…éƒ¨çš„å­—æ®µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655270902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347181,"user_name":"qiutian","can_delete":false,"product_type":"c1","uid":1313498,"ip_address":"","ucode":"99658A8E342498","user_header":"https://static001.geekbang.org/account/avatar/00/14/0a/da/dcf8f2b1.jpg","comment_is_top":false,"comment_ctime":1653797323,"is_pvip":true,"replies":[{"id":"126638","content":"æˆ‘è¿™ç¼–è¯‘æ­£å¸¸å•Šã€‚<br>internal&#47;store&#47;memstore.goä¸­çš„*MemStoreä¹Ÿæœ‰Createæ–¹æ³•çš„å®ç°å•Šã€‚<br><br>&#47;&#47; Create creates a new Book in the store.<br>func (ms *MemStore) Create(book *mystore.Book) error {<br>    ms.Lock()<br>    defer ms.Unlock()<br><br>    if _, ok := ms.books[book.Id]; ok {<br>        return mystore.ErrExist<br>    }<br><br>    nBook := *book<br>    ms.books[book.Id] = &amp;nBook<br><br>    return nil<br>}<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1653898112,"ip_address":"","comment_id":347181,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1653797323","product_id":100093501,"comment_content":"internal&#47;store&#47;memstore.go:10:26: cannot use &amp;MemStore{...} (type *MemStore) as type store.Store in argument to factory.Register:<br>        *MemStore does not implement store.Store (missing Create method)<br>åœ¨memstore.goçš„initæ–¹æ³•ä¸­è°ƒç”¨factory.Registeræ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°&amp;MemStore{<br>\t\tbooks: make(map[string]*mystore.Book),<br>\t}æ— æ³•é€šè¿‡ç¼–è¯‘","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574203,"discussion_content":"æˆ‘è¿™ç¼–è¯‘æ­£å¸¸å•Šã€‚\ninternal/store/memstore.goä¸­çš„*MemStoreä¹Ÿæœ‰Createæ–¹æ³•çš„å®ç°å•Šã€‚\n\n// Create creates a new Book in the store.\nfunc (ms *MemStore) Create(book *mystore.Book) error {\n    ms.Lock()\n    defer ms.Unlock()\n\n    if _, ok := ms.books[book.Id]; ok {\n        return mystore.ErrExist\n    }\n\n    nBook := *book\n    ms.books[book.Id] = &amp;nBook\n\n    return nil\n}\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653898112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1313498,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/da/dcf8f2b1.jpg","nickname":"qiutian","note":"","ucode":"99658A8E342498","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":574760,"discussion_content":"æˆ‘çŸ¥é“äº†ï¼Œæ˜¯å› ä¸ºæˆ‘æ˜¯ç…§ç€ä¸“æ é‡Œé¢çš„ä»£ç æ¥æ•²çš„ï¼Œç„¶ååœ¨è¿™ä¸ªmemstore.goä¸­çš„MemStoreè¿™ä¸ªstructæ²¡æœ‰å®ç°Storeæ¥å£é‡Œé¢çš„å‡ ä¸ªæ–¹æ³•ï¼Œå¯¼è‡´&amp;MemStore()æ²¡åŠæ³•è¯†åˆ«æˆå®ç°äº†Storeæ¥å£ï¼Œä¹Ÿå°±æ˜¯MemStoreç±»å‹è¿˜æ²¡æœ‰å®ç°Storeæ¥å£ï¼Œæ‰æ— æ³•ç¼–è¯‘ã€‚æˆ‘æ˜¯çœ‹äº†githubä¸Šçš„æºç æ‰å‘ç°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654322819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":574203,"ip_address":""},"score":574760,"extra":""}]}]},{"had_liked":false,"id":346804,"user_name":"Aeins","can_delete":false,"product_type":"c1","uid":1045910,"ip_address":"","ucode":"D5BF220767541D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/96/0cf9f3c7.jpg","comment_is_top":false,"comment_ctime":1653445924,"is_pvip":true,"replies":[{"id":"126471","content":"ğŸ‘ åç»­ç« èŠ‚éƒ½æœ‰é’ˆå¯¹æ€§è§£ç­”ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1653465257,"ip_address":"","comment_id":346804,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653445924","product_id":100093501,"comment_content":"ç¤ºä¾‹ç¨‹åºå€¼å¾—ç»†çœ‹ã€‚å¯¹æ²¡é¡¹ç›®ç»éªŒè€Œè¨€ã€‚çŸ¥è¯†ç‚¹ç¡®å®å¤š<br><br>ç¨‹åºç»„ç»‡ç»“æ„ã€‚Init æ³¨å†Œæœºåˆ¶ï¼Œè¯»å†™é”å¯¹ Mapçš„ä¿æŠ¤ï¼Œchannel å’Œ select çš„ç»†èŠ‚ï¼ŒæŒ‡é’ˆè§£å¼•ç”¨æ—¶çš„å¤åˆ¶è¡Œä¸ºï¼Œå‡ ä¸ªæ ‡å‡†åº“çš„ç”¨æ³•ï¼Œæ¥å£å®ç°ç±»å‹åˆ°åº•é€‰æŒ‡é’ˆï¼Œè¿˜æ˜¯å€¼çš„è€ƒé‡ç­‰ç­‰<br><br>","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573490,"discussion_content":"ğŸ‘ åç»­ç« èŠ‚éƒ½æœ‰é’ˆå¯¹æ€§è§£ç­”ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653465258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346802,"user_name":"Jay","can_delete":false,"product_type":"c1","uid":1070670,"ip_address":"","ucode":"ED9970F7E66080","user_header":"https://static001.geekbang.org/account/avatar/00/10/56/4e/9291fac0.jpg","comment_is_top":false,"comment_ctime":1653444362,"is_pvip":true,"replies":[{"id":"126472","content":"Goçš„å˜é‡å‘½åçš„ç¡®éµå¾ªç€â€œæœ€çŸ­è¾¾æ„â€çš„åŸåˆ™ï¼Œå³åœ¨ä»£ç ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­ï¼Œåœ¨å¯ä»¥è¡¨æ„çš„å‰æä¸‹ï¼Œä½¿ç”¨å°½å¯èƒ½çŸ­çš„åå­—ã€‚<br><br>è¿™ä¸ªä½ å¯ä»¥ç¿»ç¿»Goæ ‡å‡†åº“ä»£ç ï¼Œæ‰¾æ‰¾æ„Ÿè§‰:)ã€‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1026224","ctime":1653466313,"ip_address":"","comment_id":346802,"utype":1}],"discussion_count":1,"race_medal":4,"score":"1653444362","product_id":100093501,"comment_content":"æœ¬äººç°åœ¨å†™iOSï¼ŒiOSå¹³å°çš„ç‰¹ç‚¹æ˜¯é¼“åŠ±å‘½ååœ¨éç‰¹æ®Šæƒ…å†µä¸‹ä¸èƒ½ç®€å†™ï¼Œæ¯”å¦‚ä¸šç•Œå…±è¯†å½¢çš„ç¼©å†™å‘½åå¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯åœ¨åˆ›å»ºå¯¹è±¡ã€æ–¹æ³•ã€æ–‡ä»¶æ—¶ï¼Œæ¯”å¦‚ä½¿ç”¨å®Œæ•´çš„å•è¯ï¼Œè™½ç„¶æœ‰æ—¶é•¿äº†äº›ï¼Œä½†æ˜¯å¯¹äºè¯»ä»£ç çš„äººæ¥è¯´ï¼Œå¾ˆå®¹æ˜“å¿«è¯»çœ‹æ‡‚ã€‚<br><br>ä½†æˆ‘çœ‹åˆ°ç™½è€å¸ˆç»™çš„exampleé‡Œé¢ï¼Œå¥½å¤šå˜é‡åç”¨äº†ç¼©å†™ï¼Œä½œä¸ºä¸€ä¸ªç¼–ç¨‹å¤šå¹´çš„äººï¼Œçœ‹è¿™äº›ç¼©å†™ï¼Œè¿˜æ˜¯è¦æƒ³ä¸€ä¼šå„¿æ‰èƒ½æ˜ç™½è¿™ä¸ªå‘½åä»£è¡¨ä»€ä¹ˆï¼Œè™½ç„¶ç®€å†™äº†ï¼Œä½†æ˜¯å¯¼è‡´è¯»ä»£ç æ•ˆç‡ä¸é«˜ã€‚æƒ³é—®ä¸‹ï¼Œè¿™åœ¨goç¼–ç¨‹é¢†åŸŸä¼šéå¸¸å¸¸è§å—ï¼Ÿè¿˜æ˜¯è€å¸ˆä¸ºäº†æ¼”ç¤ºè€Œåˆ»æ„ä¸ºä¹‹çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573497,"discussion_content":"Goçš„å˜é‡å‘½åçš„ç¡®éµå¾ªç€â€œæœ€çŸ­è¾¾æ„â€çš„åŸåˆ™ï¼Œå³åœ¨ä»£ç ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­ï¼Œåœ¨å¯ä»¥è¡¨æ„çš„å‰æä¸‹ï¼Œä½¿ç”¨å°½å¯èƒ½çŸ­çš„åå­—ã€‚\n\nè¿™ä¸ªä½ å¯ä»¥ç¿»ç¿»Goæ ‡å‡†åº“ä»£ç ï¼Œæ‰¾æ‰¾æ„Ÿè§‰:)ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653466313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346730,"user_name":"Geek_244c46","can_delete":false,"product_type":"c1","uid":2034469,"ip_address":"","ucode":"419D97DA9F1F9B","user_header":"","comment_is_top":false,"comment_ctime":1653385999,"is_pvip":false,"replies":[{"id":"126524","content":"è¿™ä¸ªåº”è¯¥æ²¡å°‘å§ã€‚srvæ˜¯BookStoreServerå®ä¾‹ï¼ŒShutdownæ˜¯BookStoreServerç±»å‹çš„æ–¹æ³•ï¼Œsrv.Shutdownæ˜¯æ­£ç¡®çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1653626354,"ip_address":"","comment_id":346730,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653385999","product_id":100093501,"comment_content":"main.goä¸­çš„ä¼˜é›…å…³é—­httpæœåŠ¡å®ä¾‹é‚£ä¸€è¡Œçš„ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„ï¼šerr = srv.Srv.Shutdown(ctx) ï¼Œæ–‡ä¸­çš„ä»£ç å°‘äº†ç¬¬äºŒä¸ªSrv","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573746,"discussion_content":"è¿™ä¸ªåº”è¯¥æ²¡å°‘å§ã€‚srvæ˜¯BookStoreServerå®ä¾‹ï¼ŒShutdownæ˜¯BookStoreServerç±»å‹çš„æ–¹æ³•ï¼Œsrv.Shutdownæ˜¯æ­£ç¡®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653626354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346508,"user_name":"Geek_67261d","can_delete":false,"product_type":"c1","uid":1619169,"ip_address":"","ucode":"2409166C0B5AF1","user_header":"https://static001.geekbang.org/account/avatar/00/18/b4/e1/5fe28375.jpg","comment_is_top":false,"comment_ctime":1653207070,"is_pvip":false,"replies":[{"id":"126415","content":"è„±ç¦»å¼€golandï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œä¸‹ è¯•è¿‡go mod tidyå’Œgo buildä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1653268228,"ip_address":"","comment_id":346508,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1653207070","product_id":100093501,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæˆ‘ç”¨çš„golandç¼–è¾‘å™¨ä½¿ç”¨go mod tidyçš„æ—¶å€™æ²¡æœ‰ååº”ï¼Œå°±ç”¨äº†go get -uçš„æ–¹å¼ä¸‹è½½äº†ä¸‹æ¥ï¼Œå…¶ä¸­go.modä¸­æ˜¯æœ‰è¿™ä¸ªåŒ…çš„ï¼š ä¸‹é¢æ˜¯go.modä¸­çš„å†…å®¹ï¼š <br>module bookstore <br>go 1.17 require github.com&#47;gorilla&#47;mux v1.8.0 <br>å…¶ä¸­æœ€åä¸€è¡Œæ˜¯é£˜çº¢çš„ ï¼Œè¯´æ˜¯æ²¡æœ‰åŒæ­¥ä¾èµ–å…³ç³»ï¼Œæ‰‹åŠ¨åŒæ­¥åè¿˜æ˜¯çº¢è‰²çš„æ˜¾ç¤ºï¼Œå¹¶ä¸”åœ¨server.goä¸­è¿™ä¸ªåŒ…ä¹Ÿæ²¡æœ‰è¢«æ­£ç¡®çš„å¼•å…¥ã€‚è¯·é—®è¿™ç§é—®é¢˜è¯¥å¦‚ä½•è§£å†³ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573204,"discussion_content":"è„±ç¦»å¼€golandï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œä¸‹ è¯•è¿‡go mod tidyå’Œgo buildä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653268228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1619169,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b4/e1/5fe28375.jpg","nickname":"Geek_67261d","note":"","ucode":"2409166C0B5AF1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578746,"discussion_content":"è§£å†³äº†é—®é¢˜äº†è€å¸ˆï¼Œåº”è¯¥å…ˆæŠŠåŒ…å¼•å…¥å†åœ¨ä»£ç é‡Œä½¿ç”¨ï¼Œå†è¿›è¡Œgo mod tidy,æˆ‘æ˜¯åªå†™åˆ°ä»£ç é‡Œæ²¡æœ‰åœ¨importä¸­å¼•ç”¨ç„¶ågo mod tidyçš„ï¼ŒæŠŠgo mod tidyæƒ³çš„å¤ªæ™ºèƒ½äº†ï¼Œä»¥ä¸ºåªè¦ä»£ç é‡Œç”¨äº†å°±èƒ½è‡ªåŠ¨æ‹‰å–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656992655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346171,"user_name":"Geek_zkg","can_delete":false,"product_type":"c1","uid":2376255,"ip_address":"","ucode":"C55FD4C85CE9CE","user_header":"https://static001.geekbang.org/account/avatar/00/24/42/3f/cb0d8a8d.jpg","comment_is_top":false,"comment_ctime":1652867579,"is_pvip":false,"replies":[{"id":"126372","content":"é—®ä¸€ä¸‹ï¼Œä½ çš„golandç‰ˆæœ¬æ˜¯ï¼Ÿæ˜¯å¦æ”¯æŒgo moduleç¼–è¯‘ï¼ŸGO111MODULE=&quot;on&quot;å¯¹äºgolandæ˜¯å¦ç”Ÿæ•ˆäº†ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1653057229,"ip_address":"","comment_id":346171,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1652867579","product_id":100093501,"comment_content":"æˆ‘æ˜¯macç¯å¢ƒï¼ŒæŒ‰ç…§è€å¸ˆä¸Šé¢çš„æ­¥éª¤èµ°ä¸‹æ¥ï¼Œåœ¨go build bookstore&#47;cmd&#47;bookstoreçš„æ—¶å€™<br>æŠ¥é”™package bookstore&#47;cmd&#47;bookstore is not in GOROOT (&#47;usr&#47;local&#47;go&#47;src&#47;bookstore&#47;cmd&#47;bookstore)<br>æˆ‘å·²ç»è®¾ç½®äº†GO111MODULE=&quot;on&quot;<br>ç”¨golandå¼€å‘çš„<br>æƒ³è¯·è€å¸ˆå¸®å¿™è§£å†³ä¸€ä¸‹","like_count":1,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572936,"discussion_content":"é—®ä¸€ä¸‹ï¼Œä½ çš„golandç‰ˆæœ¬æ˜¯ï¼Ÿæ˜¯å¦æ”¯æŒgo moduleç¼–è¯‘ï¼ŸGO111MODULE=&#34;on&#34;å¯¹äºgolandæ˜¯å¦ç”Ÿæ•ˆäº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653057230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344288,"user_name":"westfall","can_delete":false,"product_type":"c1","uid":1632773,"ip_address":"","ucode":"F3F5CB7DF695FC","user_header":"https://static001.geekbang.org/account/avatar/00/18/ea/05/b164dc15.jpg","comment_is_top":false,"comment_ctime":1651421582,"is_pvip":false,"replies":[{"id":"125699","content":"æŠ¥ä»€ä¹ˆé”™è¯¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1651491869,"ip_address":"","comment_id":344288,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1651421582","product_id":100093501,"comment_content":"ä¸ºä»€ä¹ˆç”¨æµè§ˆå™¨æ‰“å¼€ http:&#47;&#47;localhost:8080&#47;book&#47; ä¼šæŠ¥é”™ï¼Ÿç”¨ curl è¯·æ±‚æ­£å¸¸ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569589,"discussion_content":"æŠ¥ä»€ä¹ˆé”™è¯¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651491869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1632773,"avatar":"https://static001.geekbang.org/account/avatar/00/18/ea/05/b164dc15.jpg","nickname":"westfall","note":"","ucode":"F3F5CB7DF695FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":569603,"discussion_content":"æµè§ˆå™¨çš„getè¯·æ±‚é»˜è®¤æ²¡å¸¦content typeï¼Œæ²¡æœ‰é€šè¿‡ä¸­é—´ä»¶çš„æ ¡éªŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651494628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":569589,"ip_address":""},"score":569603,"extra":""}]},{"author":{"id":1632773,"avatar":"https://static001.geekbang.org/account/avatar/00/18/ea/05/b164dc15.jpg","nickname":"westfall","note":"","ucode":"F3F5CB7DF695FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569526,"discussion_content":"å•Šï¼Œæˆ‘æ˜ç™½äº†ï¼Œä¸­é—´ä»¶é‡Œå¯¹ Content-Type åšäº†æ ¡éªŒï¼Œæµè§ˆå™¨çš„ get è¯·æ±‚é»˜è®¤æ˜¯æ²¡æœ‰å¸¦è¿™ä¸ª header çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651469806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1627670,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d6/16/107f0d04.jpg","nickname":"å±±é’","note":"","ucode":"904AE3C23D3B92","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580017,"discussion_content":"ç”¨postman header åŠ ä¸ªContent-Typeå°±å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657808014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343945,"user_name":"é¢œæµ·èˆª","can_delete":false,"product_type":"c1","uid":1308159,"ip_address":"","ucode":"5644F6328BF901","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/ff/523fb378.jpg","comment_is_top":false,"comment_ctime":1651136109,"is_pvip":false,"replies":[{"id":"125615","content":"Go webç›¸å…³çš„ä¹¦ä¸å¤šã€‚æ¯”è¾ƒåŸºç¡€çš„æœ‰ è°¢å­Ÿå†›(astaxie)çš„go webç¼–ç¨‹ã€manningå‡ºç‰ˆç¤¾ä¹Ÿæœ‰ä¸€æœ¬go web programmingã€‚è¿™äº›éƒ½æ˜¯å…³äºå¦‚ä½•åŸºäºGoåŸç”Ÿæ ‡å‡†åº“æ„å»ºwebåº”ç”¨ã€‚<br><br>å¦‚æœæŒ‡å®šæ¡†æ¶ginï¼Œå»ºè®®çœ‹ginè‡ªå·±å®˜æ–¹ç«™ç‚¹çš„æ–‡æ¡£ã€‚å…³äºginçš„ä¸“é—¨ä¹¦ç±ä¸å¤šï¼Œå¦‚æœéè¦çœ‹ä¹¦ï¼Œå¯ä»¥è¯•è¯•packtpubå‡ºå“çš„å‡ æœ¬ - https:&#47;&#47;subscription.packtpub.com&#47;search?query=gin ã€‚ä½†ä¼°è®¡ä¹¦çš„è´¨é‡ä¸æ˜¯å¤ªé«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1026224","ctime":1651211864,"ip_address":"","comment_id":343945,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1651136109","product_id":100093501,"comment_content":"è€å¸ˆ æƒ³ç³»ç»Ÿå­¦ä¹ go web ç¼–ç¨‹æˆ–è€… gin æœ‰ä»€ä¹ˆä¹¦ç±æˆ–è€…æ•™ç¨‹æ¨èå—","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568725,"discussion_content":"Go webç›¸å…³çš„ä¹¦ä¸å¤šã€‚æ¯”è¾ƒåŸºç¡€çš„æœ‰ è°¢å­Ÿå†›(astaxie)çš„go webç¼–ç¨‹ã€manningå‡ºç‰ˆç¤¾ä¹Ÿæœ‰ä¸€æœ¬go web programmingã€‚è¿™äº›éƒ½æ˜¯å…³äºå¦‚ä½•åŸºäºGoåŸç”Ÿæ ‡å‡†åº“æ„å»ºwebåº”ç”¨ã€‚\n\nå¦‚æœæŒ‡å®šæ¡†æ¶ginï¼Œå»ºè®®çœ‹ginè‡ªå·±å®˜æ–¹ç«™ç‚¹çš„æ–‡æ¡£ã€‚å…³äºginçš„ä¸“é—¨ä¹¦ç±ä¸å¤šï¼Œå¦‚æœéè¦çœ‹ä¹¦ï¼Œå¯ä»¥è¯•è¯•packtpubå‡ºå“çš„å‡ æœ¬ - https://subscription.packtpub.com/search?query=gin ã€‚ä½†ä¼°è®¡ä¹¦çš„è´¨é‡ä¸æ˜¯å¤ªé«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651211864,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1308159,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f5/ff/523fb378.jpg","nickname":"é¢œæµ·èˆª","note":"","ucode":"5644F6328BF901","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570605,"discussion_content":"è°¢è°¢è€å¸ˆï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651833088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":568725,"ip_address":""},"score":570605,"extra":""}]}]},{"had_liked":false,"id":343271,"user_name":"è°¢å°è·¯","can_delete":false,"product_type":"c1","uid":1035064,"ip_address":"","ucode":"C9FE2EB10DC105","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","comment_is_top":false,"comment_ctime":1650755562,"is_pvip":false,"replies":[{"id":"125425","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1650969376,"ip_address":"","comment_id":343271,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1650755562","product_id":100093501,"comment_content":"ä¸€äº›åŒå­¦å¯èƒ½ä½¿ç”¨çš„æ˜¯ Goland æˆ–è€… Jetbrains æ——ä¸‹çš„ IDE go æ’ä»¶ç¼–å†™ä»£ç ã€‚clone è€å¸ˆä»£ç åº”è¯¥ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚æ¯”å¦‚ IDE æŠ¥é”™å•Šã€‚ç¼–è¯‘ä¸èµ·æ¥é—®é¢˜ç­‰ã€‚<br><br>è€å¸ˆçš„ github åœ°å€ï¼Œè¿™èŠ‚çš„ä»£ç ç›®å½•æ‰˜ç®¡çš„å±‚çº§æœ‰ç‚¹æ·±ã€‚ä¸ç®¡ç›®å½•å±‚çº§æœ‰å¤šæ·±ï¼Œç”¨ IDE æ‰“å¼€ç›®å½•çš„åŸåˆ™éƒ½æ˜¯ä»¥å­˜åœ¨ go.mod æ–‡ä»¶æ‰€åœ¨çš„é‚£ä¸ªå±‚çº§ä¸ºé¡¹ç›®çš„æ ¹ç›®å½•ä¸ºå‡†ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567658,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650969376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1627670,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d6/16/107f0d04.jpg","nickname":"å±±é’","note":"","ucode":"904AE3C23D3B92","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580018,"discussion_content":"ç›´æ¥ä¸‹è½½æ‰“å¼€å³å¯ç¼–è¯‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657808063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343188,"user_name":"Geek_as","can_delete":false,"product_type":"c1","uid":1534500,"ip_address":"","ucode":"AB7B70DBC2B5F8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/qhonwcQle1RBufvLdTm4MgSNl554GBXUZtNNH65oYajbbRLxKsZX4hM9vFtrLLpDM0H93ZNWRFAZSrIZC7yAsQ/132","comment_is_top":false,"comment_ctime":1650698156,"is_pvip":true,"replies":[{"id":"125439","content":"ç†è§£çš„æ²¡é”™ã€‚signal.Notify å°±æ˜¯ç”¨æ¥æ¥æ”¶killçš„signalçš„å•Šã€‚åœ¨ç¨‹åºé€€å‡ºå‰æœ‰æœºä¼š è¿›è¡Œä¸€äº›é€€å‡ºå‰çš„å¤„ç†å·¥ä½œã€‚è¿™ä¸ªä½ å¯ä»¥æ‰¾æœ¬unixé«˜çº§ç¯å¢ƒç¼–ç¨‹çš„ä¹¦ç±çœ‹çœ‹ï¼Œå°±çŸ¥é“ç³»ç»Ÿsignalçš„è¿è¡Œæœºåˆ¶äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1651011579,"ip_address":"","comment_id":343188,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650698156","product_id":100093501,"comment_content":"æ•²äº†ä¸€æ™šä¸Šå°´å°¬ï¼Œå…¶ä»–è¿˜å¥½å°±æ˜¯ä¸æ‡‚æœ€åsignal.Notify(c, syscall.SIGINT, syscall.SIGTERM)å®ç°ä¼˜é›…å…³é—­çš„ä½œç”¨ï¼Œéš¾é“æ˜¯å½“ç³»ç»Ÿkillå®ƒçš„æ—¶å€™ï¼Œèƒ½å¤Ÿè¢«æ„ŸçŸ¥åˆ°æ‰§è¡Œå®Œå…³é—­æ“ä½œåå†é€€å‡ºï¼Œè¿˜æœ‰å°±æ˜¯middleware.Logging(middleware.Validating(router))ï¼Œæ„Ÿè§‰æœ‰ç‚¹åƒä¸€ä¸ªè°ƒç”¨é“¾ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½è¦ç»è¿‡æ‰“å°ä¿¡æ¯å’Œç±»å‹åˆ¤æ–­æ“ä½œ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567820,"discussion_content":"ç†è§£çš„æ²¡é”™ã€‚signal.Notify å°±æ˜¯ç”¨æ¥æ¥æ”¶killçš„signalçš„å•Šã€‚åœ¨ç¨‹åºé€€å‡ºå‰æœ‰æœºä¼š è¿›è¡Œä¸€äº›é€€å‡ºå‰çš„å¤„ç†å·¥ä½œã€‚è¿™ä¸ªä½ å¯ä»¥æ‰¾æœ¬unixé«˜çº§ç¯å¢ƒç¼–ç¨‹çš„ä¹¦ç±çœ‹çœ‹ï¼Œå°±çŸ¥é“ç³»ç»Ÿsignalçš„è¿è¡Œæœºåˆ¶äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651011579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342279,"user_name":"Williamleelol","can_delete":false,"product_type":"c1","uid":1019105,"ip_address":"","ucode":"4C9379D25AEC09","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erD8CwHKGGIia1HwRBxy5GxMLTfGGzOeLjrmZ6ich9Ng7bbPia89iaSibbldnV4uiaKNXFcO2vQ3ztibCrDw/132","comment_is_top":false,"comment_ctime":1650166715,"is_pvip":true,"replies":[{"id":"125121","content":"çœ‹ä¸€ä¸‹åŠ é¤ï¼šèŠèŠGoæŒ‡é’ˆå§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1650328541,"ip_address":"","comment_id":342279,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650166715","product_id":100093501,"comment_content":"è€å¸ˆä½ å¥½ï¼š<br>ä¸æ˜¯å¾ˆæ¸…æ¥šä»€ä¹ˆæ—¶å€™ç”¨å€¼ç±»å‹ï¼Œä»€ä¹ˆæ—¶å€™ç”¨æŒ‡é’ˆç±»å‹ï¼Ÿä»å“ªäº›æ–¹é¢è¿›è¡Œåˆ¤æ–­å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564757,"discussion_content":"çœ‹ä¸€ä¸‹åŠ é¤ï¼šèŠèŠGoæŒ‡é’ˆå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650328541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342267,"user_name":"Williamleelol","can_delete":false,"product_type":"c1","uid":1019105,"ip_address":"","ucode":"4C9379D25AEC09","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erD8CwHKGGIia1HwRBxy5GxMLTfGGzOeLjrmZ6ich9Ng7bbPia89iaSibbldnV4uiaKNXFcO2vQ3ztibCrDw/132","comment_is_top":false,"comment_ctime":1650164783,"is_pvip":true,"replies":[{"id":"125122","content":"å› ä¸ºmemstoreåº•å±‚ä½¿ç”¨çš„mapç±»å‹ä¸ºmap[string]*mystore.Bookï¼Œ valueç”¨çš„æ˜¯BookæŒ‡é’ˆï¼Œå¦‚æœç›´æ¥è¿”å›æŒ‡é’ˆæœ‰é£é™©ï¼Œè¿™æ ·å¤–é¢çš„ä»£ç å°±å¯ä»¥ç›´æ¥ä¿®æ”¹memstoreä¸­çš„æ•°æ®äº†ã€‚<br><br>è¿”å›Bookç±»å‹æ—¶ä¼šæœ‰ä¸€æ¬¡mem copyã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1650329443,"ip_address":"","comment_id":342267,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1650164783","product_id":100093501,"comment_content":"ä½ å¥½è€å¸ˆï¼Œ<br>Get(string) (Book, error) &#47;&#47; è·å–æŸå›¾ä¹¦ä¿¡æ¯ <br>GetAll() ([]Book, error) &#47;&#47; è·å–æ‰€æœ‰å›¾ä¹¦ä¿¡æ¯<br>è¿™ä¸¤ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¸ºä»€ä¹ˆä¸æ˜¯*Bookå‘¢ï¼ŸæŸ¥è¯¢å‡ºæ¥çš„ç»“æœåº”è¯¥æ˜¯Bookçš„å®ä¾‹äº†ï¼Œè¿”å›å€¼ç±»å‹æ˜¯Bookä¼šå‘ç”ŸCopyä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564764,"discussion_content":"å› ä¸ºmemstoreåº•å±‚ä½¿ç”¨çš„mapç±»å‹ä¸ºmap[string]*mystore.Bookï¼Œ valueç”¨çš„æ˜¯BookæŒ‡é’ˆï¼Œå¦‚æœç›´æ¥è¿”å›æŒ‡é’ˆæœ‰é£é™©ï¼Œè¿™æ ·å¤–é¢çš„ä»£ç å°±å¯ä»¥ç›´æ¥ä¿®æ”¹memstoreä¸­çš„æ•°æ®äº†ã€‚\n\nè¿”å›Bookç±»å‹æ—¶ä¼šæœ‰ä¸€æ¬¡mem copyã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650329443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1627670,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d6/16/107f0d04.jpg","nickname":"å±±é’","note":"","ucode":"904AE3C23D3B92","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580019,"discussion_content":"æ­£è§£ å¦‚æœä¸ç›´æ¥è¿”å›copyï¼Œåœ¨é‡Šæ”¾é”ä»¥åè¢«ä¿®æ”¹äº† é‚£ä¹ˆå®¢æˆ·ç«¯æ‹¿åˆ°çš„å€¼å°±æ˜¯ä¿®æ”¹è¿‡çš„å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657808171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341145,"user_name":"å®å®","can_delete":false,"product_type":"c1","uid":1063004,"ip_address":"","ucode":"D60DCB1844F441","user_header":"https://static001.geekbang.org/account/avatar/00/10/38/5c/c6a4e7f0.jpg","comment_is_top":false,"comment_ctime":1649389935,"is_pvip":false,"replies":[{"id":"124913","content":"23-27è¡Œè°ƒç”¨çš„ListenAndServeå†…éƒ¨ä¼šå¯åŠ¨ä¸€ä¸ªgoroutineæ¥çœŸæ­£å¯åŠ¨æœåŠ¡ç›‘å¬ã€‚ListenAndServeä¼šè¿”å›ä¸€ä¸ªerrChanç”¨äºåœ¨ä¸¤ä¸ªgorourineä¹‹é—´ä¼ è¾“é”™è¯¯ä¿¡æ¯çš„ã€‚åœ¨ListenAndServeä¸­å¯¹errChançš„ç›‘å¬åªæ˜¯ç”¨äºå¤„ç†æœåŠ¡å¯åŠ¨æ—¶çš„ä¸´æ—¶é”™è¯¯ï¼Œæ¯”å¦‚listenç«¯å£å·²ç»å ç”¨ç­‰ã€‚<br><br>è€Œ34-36è¡Œçš„ç›‘å¬å…¶å®æ˜¯ç”¨äºåœ¨web serverè¿è¡ŒæœŸé—´å‡ºç°é”™è¯¯æ—¶ï¼Œè¿”å›é”™è¯¯ç”¨çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1649915973,"ip_address":"","comment_id":341145,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649389935","product_id":100093501,"comment_content":"main.goæ–¹æ³•çš„23-27è¡Œå·²ç»æœ‰æ•è·erré€€å‡ºäº†ï¼Œä¸ºä»€ä¹ˆmain.goçš„34-26è¡Œè¿˜è¦å†ç›‘å¬ä¸€éå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562963,"discussion_content":"23-27è¡Œè°ƒç”¨çš„ListenAndServeå†…éƒ¨ä¼šå¯åŠ¨ä¸€ä¸ªgoroutineæ¥çœŸæ­£å¯åŠ¨æœåŠ¡ç›‘å¬ã€‚ListenAndServeä¼šè¿”å›ä¸€ä¸ªerrChanç”¨äºåœ¨ä¸¤ä¸ªgorourineä¹‹é—´ä¼ è¾“é”™è¯¯ä¿¡æ¯çš„ã€‚åœ¨ListenAndServeä¸­å¯¹errChançš„ç›‘å¬åªæ˜¯ç”¨äºå¤„ç†æœåŠ¡å¯åŠ¨æ—¶çš„ä¸´æ—¶é”™è¯¯ï¼Œæ¯”å¦‚listenç«¯å£å·²ç»å ç”¨ç­‰ã€‚\n\nè€Œ34-36è¡Œçš„ç›‘å¬å…¶å®æ˜¯ç”¨äºåœ¨web serverè¿è¡ŒæœŸé—´å‡ºç°é”™è¯¯æ—¶ï¼Œè¿”å›é”™è¯¯ç”¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649915973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340387,"user_name":"Mr Zeng","can_delete":false,"product_type":"c1","uid":2747144,"ip_address":"","ucode":"C565205FBD1BD2","user_header":"https://static001.geekbang.org/account/avatar/00/29/eb/08/1b57fb37.jpg","comment_is_top":false,"comment_ctime":1648792033,"is_pvip":true,"replies":[{"id":"124469","content":"å¦‚æœä½ è¦ä¸¥æ ¼æŒ‰ç…§å…­è¾¹å½¢æ¶æ„ä¸é¡¹ç›®çš„å¸ƒå±€å¯¹åº”ï¼Œé‚£å°±åœ¨ç¬¬äº”è®²çš„å¸ƒå±€æ ‡å‡†çš„åŸºç¡€ä¸Šï¼ŒæŒ‰ç…§å…­è¾¹å½¢æ¶æ„æ¥ç»„ç»‡ç›®å½•ç»“æ„å§ï¼Œä¸»è¦æ˜¯è€ƒè™‘å¦‚ä½•æ”¾ç½®pkgNåŒ…ã€‚è¿™ä¸ªæ²¡æœ‰æ ‡å‡†å¯å¾ªã€‚githubä¸Šæœ‰ä¸€äº›æŒ‰å…­è¾¹å½¢æ¶æ„ç»„ç»‡çš„é¡¹ç›®ï¼Œä½†å¸ƒå±€ç»“æ„ä¹Ÿå„ä¸ç›¸åŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1648806390,"ip_address":"","comment_id":340387,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1648792033","product_id":100093501,"comment_content":"è¿™ç§é¡¹ç›®æ¶æ„å¦‚ä½•è·Ÿé¢†åŸŸé©±åŠ¨çš„å…­è¾¹å½¢æ¶æ„ç»“åˆå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559531,"discussion_content":"å¦‚æœä½ è¦ä¸¥æ ¼æŒ‰ç…§å…­è¾¹å½¢æ¶æ„ä¸é¡¹ç›®çš„å¸ƒå±€å¯¹åº”ï¼Œé‚£å°±åœ¨ç¬¬äº”è®²çš„å¸ƒå±€æ ‡å‡†çš„åŸºç¡€ä¸Šï¼ŒæŒ‰ç…§å…­è¾¹å½¢æ¶æ„æ¥ç»„ç»‡ç›®å½•ç»“æ„å§ï¼Œä¸»è¦æ˜¯è€ƒè™‘å¦‚ä½•æ”¾ç½®pkgNåŒ…ã€‚è¿™ä¸ªæ²¡æœ‰æ ‡å‡†å¯å¾ªã€‚githubä¸Šæœ‰ä¸€äº›æŒ‰å…­è¾¹å½¢æ¶æ„ç»„ç»‡çš„é¡¹ç›®ï¼Œä½†å¸ƒå±€ç»“æ„ä¹Ÿå„ä¸ç›¸åŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648806390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338516,"user_name":"å½³äºå£å·´","can_delete":false,"product_type":"c1","uid":1627148,"ip_address":"","ucode":"889B2732433C50","user_header":"https://static001.geekbang.org/account/avatar/00/18/d4/0c/31b42514.jpg","comment_is_top":false,"comment_ctime":1647533839,"is_pvip":false,"replies":[{"id":"123855","content":"å¤šçœ‹å‡ éğŸ’ª","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1647810539,"ip_address":"","comment_id":338516,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1647533839","product_id":100093501,"comment_content":"æˆ‘çš„goè¯­è¨€ç¬¬ä¸€è¯¾çœŸä¸é…çœ‹è¿™ä¸ªï¼Œæˆ‘çœ‹å®ŒåŸºç¡€éƒ½è¿˜æ˜¯çœ‹ä¸æ‡‚è¿™èŠ‚è¯¾çš„ä»£ç ç»†èŠ‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557432,"discussion_content":"å¤šçœ‹å‡ éğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647810539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335788,"user_name":"å”ä¼Ÿ","can_delete":false,"product_type":"c1","uid":2875151,"ip_address":"","ucode":"D05BCFC94FA271","user_header":"https://static001.geekbang.org/account/avatar/00/2b/df/0f/004d6fee.jpg","comment_is_top":false,"comment_ctime":1645688615,"is_pvip":false,"replies":[{"id":"122718","content":"ä½ éœ€è¦åœ¨go.modæ–‡ä»¶æ‰€åœ¨ç›®å½•å»æ‰§è¡Œgo build bookstore&#47;cmd&#47;bookstoreã€‚å¦‚æœä½ åœ¨cmd&#47;bookstoreç›®å½•ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨go build main.go","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1645716801,"ip_address":"","comment_id":335788,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1645688615","product_id":100093501,"comment_content":"ä¹¦å¾ˆå¥½ï¼Œæ„Ÿè°¢ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜è¯·æ•™è€å¸ˆï¼š<br>è¿™ä¸ªé¡¹ç›®çš„å‡ æ¡ç¼–è¯‘å‘½ä»¤ æ€ä¹ˆéƒ½ä¸æˆåŠŸï¼Œæˆ‘æ˜¯mac+go1.17<br>æ„Ÿè§‰è€å¸ˆçš„å‘½ä»¤éƒ½æ²¡æŒ‡å®šç›®å½•çš„ï¼Œèƒ½ä¸èƒ½å‘½ä»¤å‰pwdä¸€ä¸‹ï¼Œæ–°æ‰‹å¾ˆå¤´ç—›ã€‚ã€‚ã€‚ã€‚<br><br>% go build bookstore&#47;cmd&#47;bookstore<br>package bookstore&#47;cmd&#47;bookstore is not in GOROOT (&#47;usr&#47;local&#47;go&#47;src&#47;bookstore&#47;cmd&#47;bookstore)","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553118,"discussion_content":"ä½ éœ€è¦åœ¨go.modæ–‡ä»¶æ‰€åœ¨ç›®å½•å»æ‰§è¡Œgo build bookstore/cmd/bookstoreã€‚å¦‚æœä½ åœ¨cmd/bookstoreç›®å½•ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨go build main.go","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645716801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335482,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1645535154,"is_pvip":true,"replies":[{"id":"122612","content":"è·‘èµ·æ¥ï¼Œä½ å°±æˆåŠŸäº†ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1645604882,"ip_address":"","comment_id":335482,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1645535154","product_id":100093501,"comment_content":"cloneä¸‹ä»£ç ï¼Œæ­£å¸¸è¿è¡Œã€‚<br>âœ  bookstore go build bookstore&#47;cmd&#47;bookstore<br>âœ  bookstore ls<br>Makefile  bookstore cmd       go.mod    go.sum    internal  server    store<br>âœ  bookstore .&#47;bookstore <br>2022&#47;02&#47;22 21:03:02 web server start ok<br>2022&#47;02&#47;22 21:03:45 recv a POST request from [::1]:55968<br>2022&#47;02&#47;22 21:04:06 recv a GET request from [::1]:55979<br><br>âœ  bookstore curl -X POST -H &quot;Content-Type:application&#47;json&quot; -d &#39;{&quot;id&quot;: &quot;978-7-111-55842-2&quot;, &quot;name&quot;: &quot;The Go Programming Language&quot;, &quot;authors&quot;:[&quot;Alan A.A.Donovan&quot;, &quot;Brian W. Kergnighan&quot;],&quot;press&quot;: &quot;Pearson Education&quot;}&#39; localhost:8080&#47;book<br>âœ  bookstore curl -X GET -H &quot;Content-Type:application&#47;json&quot; localhost:8080&#47;book&#47;978-7-111-55842-2<br>{&quot;id&quot;:&quot;978-7-111-55842-2&quot;,&quot;name&quot;:&quot;The Go Programming Language&quot;,&quot;authors&quot;:[&quot;Alan A.A.Donovan&quot;,&quot;Brian W. Kergnighan&quot;],&quot;press&quot;:&quot;Pearson Education&quot;}<br>{&quot;id&quot;:&quot;978-7-111-55842-2&quot;,&quot;name&quot;:&quot;The Go Programming Language&quot;,&quot;authors&quot;:[&quot;Alan A.A.Donovan&quot;,&quot;Brian W. Kergnighan&quot;],&quot;press&quot;:&quot;Pearson Education&quot;}zsh: no matches found: id:978-7-111-55842-2,name:The Go Programming Language,authors:[Alan A.A.Donovan,Brian W. Kergnighan],press:Pearson Education<br>âœ  bookstore <br><br>å…¶ä¸­æœ‰äº›ä»£ç è¿˜æ˜¯æ²¡çœ‹æ˜ç™½ï¼Œå…ˆå°†é¡¹ç›®è·‘èµ·æ¥ï¼Œç„¶åå†å¸¦ç€é—®é¢˜ç»§ç»­ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552825,"discussion_content":"è·‘èµ·æ¥ï¼Œä½ å°±æˆåŠŸäº†ğŸ‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1645604882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335091,"user_name":"å®å®","can_delete":false,"product_type":"c1","uid":1063004,"ip_address":"","ucode":"D60DCB1844F441","user_header":"https://static001.geekbang.org/account/avatar/00/10/38/5c/c6a4e7f0.jpg","comment_is_top":false,"comment_ctime":1645324002,"is_pvip":false,"replies":[{"id":"122525","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1645539173,"ip_address":"","comment_id":335091,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1645324002","product_id":100093501,"comment_content":"é€šä¿—æ˜“æ‡‚ï¼Œèµ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552659,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645539173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334394,"user_name":"ryan","can_delete":false,"product_type":"c1","uid":1201217,"ip_address":"","ucode":"C60ED9AA42B58A","user_header":"https://static001.geekbang.org/account/avatar/00/12/54/41/9871f5ec.jpg","comment_is_top":false,"comment_ctime":1644916573,"is_pvip":false,"replies":[{"id":"122583","content":"æˆ‘ç‰¹æ„åœ¨windowsä¸‹å®‰è£…äº†ä¸€ä¸‹goç¯å¢ƒï¼Œæ— è®ºç”¨go run cmd\\bookstore\\main.goè¿˜æ˜¯å¸¦æœ‰ç»å¯¹è·¯å¾„main.goï¼Œè¿è¡Œéƒ½æ˜¯okçš„ã€‚ä½ ç¡®è®¤ä»€ä¹ˆéƒ½æ²¡æœ‰æ”¹è¿‡ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1026224","ctime":1645596517,"ip_address":"","comment_id":334394,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1644916573","product_id":100093501,"comment_content":"C:\\Users\\ryan\\Downloads\\publication-master\\column\\timegeek\\go-first-course\\09\\bookstore&gt;go env<br>set GO111MODULE=on<br>set GOARCH=amd64<br>set GOBIN=<br>set GOCACHE=C:\\Users\\ryan\\AppData\\Local\\go-build<br>set GOENV=C:\\Users\\ryan\\AppData\\Roaming\\go\\env  <br>set GOEXE=.exe<br>set GOEXPERIMENT=<br>set GOFLAGS=<br>set GOHOSTARCH=amd64<br>set GOHOSTOS=windows<br>set GOINSECURE=<br>set GOMODCACHE=E:\\go\\pkg\\mod<br>set GONOPROXY=<br>set GONOSUMDB=<br>set GOOS=windows<br>set GOPATH=E:\\go;<br>set GOPRIVATE=<br>set GOPROXY=https:&#47;&#47;goproxy.cn,direct<br>set GOROOT=D:\\Program Files\\Go<br>set GOSUMDB=sum.golang.org<br>set GOTMPDIR=<br>set GOTOOLDIR=D:\\Program Files\\Go\\pkg\\tool\\windows_amd64<br>set GOVCS=<br>set GOVERSION=go1.17.7<br>set GCCGO=gccgo<br>set AR=ar<br>set CC=gcc<br>set CXX=g++<br>set CGO_ENABLED=1<br>set GOMOD=C:\\Users\\ryan\\Downloads\\publication-master\\column\\timegeek\\go-first-course\\09\\bookstore\\go.mod<br>set CGO_CFLAGS=-g -O2<br>set CGO_CPPFLAGS=<br>set CGO_CXXFLAGS=-g -O2<br>set CGO_FFLAGS=-g -O2<br>set CGO_LDFLAGS=-g -O2<br>set PKG_CONFIG=pkg-config<br>set GOGCCFLAGS=-m64 -mthreads -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=C:\\Users\\ryan\\AppData\\Local\\Temp\\go-build2831317448=&#47;tmp&#47;go-build -gno-record-gcc-switches <br><br>C:\\Users\\ryan\\Downloads\\publication-master\\column\\timegeek\\go-first-course\\09\\bookstore&gt;go run &quot;c:\\Users\\ryan\\Downloads\\publication-master\\column\\timegeek\\go-first-course\\09\\bookstore\\cmd\\bookstore\\main.go&quot;<br>package command-line-arguments<br>        cmd\\bookstore\\main.go:4:2: use of internal package bookstore&#47;internal&#47;store not allowed<br><br><br>æˆ‘ç›´æ¥æ‹‰è€å¸ˆçš„ä»£ç ï¼Œè·‘èµ·æ¥æç¤ºè¿™ä¸ª","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552785,"discussion_content":"æˆ‘ç‰¹æ„åœ¨windowsä¸‹å®‰è£…äº†ä¸€ä¸‹goç¯å¢ƒï¼Œæ— è®ºç”¨go run cmd\\bookstore\\main.goè¿˜æ˜¯å¸¦æœ‰ç»å¯¹è·¯å¾„main.goï¼Œè¿è¡Œéƒ½æ˜¯okçš„ã€‚ä½ ç¡®è®¤ä»€ä¹ˆéƒ½æ²¡æœ‰æ”¹è¿‡ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645596517,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331632,"user_name":"ä¸‹é›¨å¥½ç¡çœ ","can_delete":false,"product_type":"c1","uid":2766990,"ip_address":"","ucode":"D5CB8939D22B22","user_header":"https://static001.geekbang.org/account/avatar/00/2a/38/8e/26a2a02e.jpg","comment_is_top":false,"comment_ctime":1642679136,"is_pvip":true,"replies":[{"id":"121595","content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1643525855,"ip_address":"","comment_id":331632,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1642679136","product_id":100093501,"comment_content":"Tony Bai è€å¸ˆï¼š <br>        factory.Register(&quot;mem&quot;, &amp;MemStore{<br>                                                            books: make(map[string]*mystore.Book),    <br>                                                                 })<br>è¿™é‡Œæ˜¯å°†ä¸€ä¸ª MemStroe å®ä¾‹å­˜å‚¨åˆ° provider è¿™ä¸ªç»“æ„ä½“é‡Œé¢ï¼Œæ‰€ä»¥å¦‚æœåœ¨ main.go ä¸­è°ƒç”¨ä¸¤æ¬¡ factory.New(&quot;mem&quot;)ï¼Œæ˜¯ä¸æ˜¯å¾—åˆ°çš„å®ä¾‹å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªï¼Ÿæ¯”å¦‚ï¼š<br>s1, err := factory.New(&quot;mem&quot;)<br>s2, err := factory.New(&quot;mem&quot;)<br>è¿™é‡Œçš„ s1 å’Œ s2 æ˜¯ä¸æ˜¯æœ¬è´¨ä¸Šæ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549038,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643525855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330877,"user_name":"ç›˜èƒ§","can_delete":false,"product_type":"c1","uid":1650748,"ip_address":"","ucode":"5386CC4C92ECC2","user_header":"https://static001.geekbang.org/account/avatar/00/19/30/3c/0668d6ae.jpg","comment_is_top":false,"comment_ctime":1642240207,"is_pvip":false,"replies":[{"id":"121585","content":"ä½ ä½¿ç”¨çš„è¯·æ±‚urlåœ°å€æ˜¯å¤šå°‘ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1643521617,"ip_address":"","comment_id":330877,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1642240207","product_id":100093501,"comment_content":"éš¾æ æœ¬åœ°æœåŠ¡å¯åŠ¨èµ·æ¥äº†  2022&#47;01&#47;15 17:48:09 web server start ok  <br>å‘è¯·æ±‚è¿‡å»ï¼Œpage not found 404","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549026,"discussion_content":"ä½ ä½¿ç”¨çš„è¯·æ±‚urlåœ°å€æ˜¯å¤šå°‘ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643521617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019807,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8f/9f/e49b68ea.jpg","nickname":"å¹½å¼¥ç‹‚","note":"","ucode":"5AECEA7D6ADF33","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559015,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™æ ·ï¼Œä» git ä¸Šæ‹‰ä¸‹æ¥ä¹Ÿæ˜¯è¿™æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1648562497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"è°¢å°è·¯","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566733,"discussion_content":"å¦‚æœé¡¹ç›®è¿è¡Œèµ·æ¥æ²¡æœ‰é—®é¢˜æŠ¥é”™çš„è¯ã€‚page not found 404 çš„é—®é¢˜åŸºæœ¬ä¸Šæ˜¯è·¯ç”±å†™çš„ä¸å¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650756093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1650748,"avatar":"https://static001.geekbang.org/account/avatar/00/19/30/3c/0668d6ae.jpg","nickname":"ç›˜èƒ§","note":"","ucode":"5386CC4C92ECC2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"è°¢å°è·¯","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570908,"discussion_content":"å¯¹çš„ï¼Œåº”è¯¥æ˜¯æˆ‘wsl çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651992795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":566733,"ip_address":""},"score":570908,"extra":""}]}]},{"had_liked":false,"id":329172,"user_name":"Vettel","can_delete":false,"product_type":"c1","uid":1639787,"ip_address":"","ucode":"FB3E71DD1E8E7C","user_header":"https://static001.geekbang.org/account/avatar/00/19/05/6b/d9d6d68b.jpg","comment_is_top":false,"comment_ctime":1641194795,"is_pvip":false,"replies":[{"id":"120124","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1641540838,"ip_address":"","comment_id":329172,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641194795","product_id":100093501,"comment_content":"Restful-&gt;RESTful","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544496,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641540838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328037,"user_name":"éƒ‘å°","can_delete":false,"product_type":"c1","uid":1005282,"ip_address":"","ucode":"181B0FDE5E1532","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/e2/2dcab30d.jpg","comment_is_top":false,"comment_ctime":1640495993,"is_pvip":false,"replies":[{"id":"120335","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1641884756,"ip_address":"","comment_id":328037,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640495993","product_id":100093501,"comment_content":"è·Ÿç€è¯¾ç¨‹å­¦ä¹ äº†å‡ å¤©ï¼Œä¾è‘«èŠ¦ç”»ç“¢å†™äº†ä¸ªç»ƒæ‰‹çš„èŠå¤©å®¤ï¼Œä¸å¾—ä¸è¯´Goåœ¨è¿™æ–¹é¢ç”Ÿäº§åŠ›è´¼å¼ºå¤§ã€‚æ¬¢è¿æ‹ç –goæ–°æ‰‹ä»£ç  https:&#47;&#47;gitee.com&#47;izhengyin&#47;go-chat","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545241,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641884756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327026,"user_name":"é™ˆè¡","can_delete":false,"product_type":"c1","uid":1810649,"ip_address":"","ucode":"8A6535DDB4B611","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a0/d9/49578be1.jpg","comment_is_top":false,"comment_ctime":1639845536,"is_pvip":false,"replies":[{"id":"119118","content":"å»ºè®®æŒ‰åŸæ–‡çš„æ­¥éª¤æ„å»ºä¸æ‰§è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1640061564,"ip_address":"","comment_id":327026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639845536","product_id":100093501,"comment_content":"è€å¸ˆæˆ‘è¿è¡Œåä¸€è‡´æç¤ºè¿™ä¸ªé”™è¯¯ï¼Œæ„Ÿè§‰æ²¡æœ‰ä»€ä¹ˆæ€è·¯å‘¢ï¼ä¹Ÿå®šä½ä¸åˆ°é—®é¢˜<br>[Running] go run &quot;&#47;Users&#47;chenkan&#47;goprojects&#47;bookstore&#47;cmd&#47;bookstore&#47;main.go&quot;<br>2021&#47;12&#47;19 00:35:47 web server start ok<br>panic: web server start ok<br><br><br>goroutine 1 [running]:<br>log.Panicln({0xc0000adee8, 0x5, 0x12e37f8})<br>\t&#47;usr&#47;local&#47;go&#47;src&#47;log&#47;log.go:368 +0x65<br>main.main()<br>\t&#47;Users&#47;chenkan&#47;goprojects&#47;bookstore&#47;cmd&#47;bookstore&#47;main.go:28 +0x145<br>exit status 2<br><br>[Done] exited with code=1 in 1.953 seconds<br>","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540469,"discussion_content":"å»ºè®®æŒ‰åŸæ–‡çš„æ­¥éª¤æ„å»ºä¸æ‰§è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640061564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326917,"user_name":"Geek_f55887","can_delete":false,"product_type":"c1","uid":2871654,"ip_address":"","ucode":"F6B29FCD4FB5E9","user_header":"","comment_is_top":false,"comment_ctime":1639748925,"is_pvip":false,"replies":[{"id":"118996","content":"https:&#47;&#47;github.com&#47;bigwhite&#47;publication&#47;tree&#47;master&#47;column&#47;timegeek&#47;go-first-course&#47;09&#47;bookstore<br><br>å¯ä»¥æ‰“å¼€çš„ï¼ŒGitHub é“¾æ¥ï¼Œä½ æŸ¥ä¸‹è‡ªå·±çš„ç½‘ç»œã€‚","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":"1000473","ctime":1639965029,"ip_address":"","comment_id":326917,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1639748925","product_id":100093501,"comment_content":"æœ€ä¸‹é¢çš„èµ„æºé“¾æ¥é‚£é‡Œç‚¹ä¸å¼€","like_count":0,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"éƒ­è•¾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540122,"discussion_content":"https://github.com/bigwhite/publication/tree/master/column/timegeek/go-first-course/09/bookstore\n\nå¯ä»¥æ‰“å¼€çš„ï¼ŒGitHub é“¾æ¥ï¼Œä½ æŸ¥ä¸‹è‡ªå·±çš„ç½‘ç»œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639965029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321824,"user_name":"delicate","can_delete":false,"product_type":"c1","uid":1187083,"ip_address":"","ucode":"AE262751C50CDD","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/0b/5f353b88.jpg","comment_is_top":false,"comment_ctime":1637054752,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637054752","product_id":100093501,"comment_content":"NewBookStoreServer é‡Œ srv ä¸€ä¸ªå˜é‡åä»£è¡¨äº†ä¸¤ä¸ªä¸åŒçš„å˜é‡ï¼Œæœ‰ä¸€ç‚¹å½±å“ä»£ç ç†è§£ğŸ˜‚","like_count":0},{"had_liked":false,"id":321765,"user_name":"å¤šé€‰å‚æ•°","can_delete":false,"product_type":"c1","uid":1248326,"ip_address":"","ucode":"B2294D80AB075F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","comment_is_top":false,"comment_ctime":1637033804,"is_pvip":false,"replies":[{"id":"117132","content":"å—¯ï¼Œä¸€å®šè¦åšæŒè‡ªå·±åŠ¨æ‰‹è¾“å…¥ä»£ç ï¼Œç¼–è¯‘ä»£ç ï¼Œè¿è¡Œç¨‹åºï¼Œèµ°ä¸€éå’Œçœ‹ä¸€éçš„æ”¶è·æ˜¯å®Œå…¨ä¸åŒçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1026224","ctime":1637552027,"ip_address":"","comment_id":321765,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637033804","product_id":100093501,"comment_content":"è¿™èŠ‚è¯¾çš„å°é¡¹ç›®å¯ä»¥è¯´æ˜¯ï¼Œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ï¼ä¹‹å‰ä¸€ç›´çœ‹å¤§é¡¹ç›®çš„ä»£ç ï¼Œä½†æ˜¯æ²¡æœ‰çœŸæ­£è½åœ°å»æ•²è¿‡ï¼Œæ„Ÿè§‰æ€»æ˜¯å·®äº†ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532193,"discussion_content":"å—¯ï¼Œä¸€å®šè¦åšæŒè‡ªå·±åŠ¨æ‰‹è¾“å…¥ä»£ç ï¼Œç¼–è¯‘ä»£ç ï¼Œè¿è¡Œç¨‹åºï¼Œèµ°ä¸€éå’Œçœ‹ä¸€éçš„æ”¶è·æ˜¯å®Œå…¨ä¸åŒçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637552027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320989,"user_name":"Sid","can_delete":false,"product_type":"c1","uid":2056347,"ip_address":"","ucode":"733443C9F3BAAD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/60/9b/ea3d6d65.jpg","comment_is_top":false,"comment_ctime":1636611474,"is_pvip":false,"replies":[{"id":"116754","content":"â€œprovidersè¿™ä¸ªå˜é‡æ˜¯åœ¨å‡½æ•°è¿è¡ŒæœŸé—´ä¸€ç›´éƒ½ä¼šåŠ è½½åœ¨å†…å­˜é‡Œå˜›ï¼Ÿ--- æ˜¯çš„ã€‚providersæ˜¯ä¸€ä¸ªåŒ…çº§å˜é‡ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸä¸ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€è‡´çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636929358,"ip_address":"","comment_id":320989,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636611474","product_id":100093501,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œè¿™ç« æœ‰ç‚¹æŒ‘æˆ˜ï¼Œæœ‰ä¸€ä¸ªåœ°æ–¹æˆ‘æƒ³ç¡®å®šä¸€ä¸‹ã€‚ç¨‹åºç¬¬ä¸€æ­¥å°±æ˜¯ import _ &quot;bookstore&#47;internal&#47;store&quot;ï¼Œ è¿™é‡Œé¢æœ‰ä¸€ä¸ª func init(), è¿™ä¸ªå‡½æ•°åº”è¯¥æ˜¯ä¼šè¢«ç«‹é©¬è°ƒç”¨å§ï¼Ÿç„¶åè°ƒç”¨äº†å·¥å‚å‡½æ•°é‡Œé¢çš„Registerï¼ŒRegisterçš„æœ€åä¸€æ­¥æ˜¯ providers[name]=pã€‚æˆ‘çš„ç–‘é—®æ˜¯providersè¿™ä¸ªå˜é‡æ˜¯åœ¨å‡½æ•°è¿è¡ŒæœŸé—´ä¸€ç›´éƒ½ä¼šåŠ è½½åœ¨å†…å­˜é‡Œå˜›ï¼Ÿ<br><br>å› ä¸ºæˆ‘çœ‹åˆ°åé¢çš„Newä¼šå¯¹&quot;mem&quot;è¿™ä¸ªprovideråšä¸€ä¸ªæ˜¯å¦å­˜åœ¨çš„åˆ¤å®šã€‚è°¢è°¢è€å¸ˆçš„è€å¿ƒè§£ç­”ã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530180,"discussion_content":"â€œprovidersè¿™ä¸ªå˜é‡æ˜¯åœ¨å‡½æ•°è¿è¡ŒæœŸé—´ä¸€ç›´éƒ½ä¼šåŠ è½½åœ¨å†…å­˜é‡Œå˜›ï¼Ÿ--- æ˜¯çš„ã€‚providersæ˜¯ä¸€ä¸ªåŒ…çº§å˜é‡ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸä¸ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€è‡´çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636929358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320147,"user_name":"å…‰","can_delete":false,"product_type":"c1","uid":1284618,"ip_address":"","ucode":"BDA7F41566E4FE","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/0a/6c74e932.jpg","comment_is_top":false,"comment_ctime":1636098940,"is_pvip":true,"replies":[{"id":"116263","content":"Authorsæ˜¯ä¸€ä¸ªå…ƒç´ ç±»å‹ä¸ºstringç±»å‹çš„åˆ‡ç‰‡ï¼Œæ‰€ä»¥ç”¨nilè¿›è¡Œæ¯”è¾ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636425274,"ip_address":"","comment_id":320147,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1636098940","product_id":100093501,"comment_content":"memorystore.go<br> if book.Authors != nil {<br>\t\tnBook.Authors = book.Authors<br>\t}<br>è¿™é‡Œæ˜¯ä¸æ˜¯åº”è¯¥æ”¹æˆï¼š<br> if book.Authors != &quot;&quot; {<br>\t\tnBook.Authors = book.Authors<br>\t}","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529895,"discussion_content":"Authorsæ˜¯ä¸€ä¸ªå…ƒç´ ç±»å‹ä¸ºstringç±»å‹çš„åˆ‡ç‰‡ï¼Œæ‰€ä»¥ç”¨nilè¿›è¡Œæ¯”è¾ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636425274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1898332,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f7/5c/8a0b5b90.jpg","nickname":"æ°¸é‡ä¹","note":"","ucode":"B11D8B55B51188","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412453,"discussion_content":"Authors å®šä¹‰çš„ç±»å‹æ˜¯[]string,æ‰€ä»¥ç”¨!=nil","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636172148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320052,"user_name":"å°é¬¼","can_delete":false,"product_type":"c1","uid":1818889,"ip_address":"","ucode":"2CB18AD358B5A4","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c1/09/49dfb810.jpg","comment_is_top":false,"comment_ctime":1636068934,"is_pvip":false,"replies":[{"id":"116241","content":"è®¾ç½®ä¸€ä¸‹GOPROXYè¿™ä¸ªç¯å¢ƒå˜é‡ã€‚è¿™ä¸ªåœ¨ä¹‹å‰çš„è®²è§£ä¸­æœ‰æåŠã€‚å…·ä½“æ­¥éª¤ä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘å†™çš„Goç¬¬ä¸€è¯¾FAQï¼šhttps:&#47;&#47;tonybai.com&#47;go-course-faqã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636421643,"ip_address":"","comment_id":320052,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1636068934","product_id":100093501,"comment_content":"go mod tidy<br>go: finding module for package github.com&#47;gorilla&#47;mux<br>bookstore&#47;server imports<br>        github.com&#47;gorilla&#47;mux: module github.com&#47;gorilla&#47;mux: Get &quot;https:&#47;&#47;proxy.golang.org&#47;github.com&#47;gorilla&#47;mux&#47;@v&#47;list&quot;: dial tcp<br> 216.58.200.49:443: connectex: A connection attempt failed because the connected party did not properly respond after a period of time<br>, or established connection failed because connected host has failed to respond.<br><br>è¯·é—®ä¸‹è¿™ä¸ªæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529854,"discussion_content":"è®¾ç½®ä¸€ä¸‹GOPROXYè¿™ä¸ªç¯å¢ƒå˜é‡ã€‚è¿™ä¸ªåœ¨ä¹‹å‰çš„è®²è§£ä¸­æœ‰æåŠã€‚å…·ä½“æ­¥éª¤ä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘å†™çš„Goç¬¬ä¸€è¯¾FAQï¼šhttps://tonybai.com/go-course-faqã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636421643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2576960,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","nickname":"è‡ªç”±","note":"","ucode":"4E3B53D29D86CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412142,"discussion_content":"hiï¼Œè¿™ä¸ªå¯ä»¥å°è¯•è®¾ç½®ä¸€ä¸‹å›½å†…ä»£ç†ï¼Œgo env -w  GOPROXY=https://goproxy.io,direct","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636083458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319970,"user_name":"Dunbreak","can_delete":false,"product_type":"c1","uid":1155210,"ip_address":"","ucode":"A64010733754BF","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/8a/69f4023c.jpg","comment_is_top":false,"comment_ctime":1636023018,"is_pvip":false,"replies":[{"id":"116239","content":"09è®²æœ«å°¾æœ‰è¿™ä¸ªå®æˆ˜é¡¹ç›®çš„æºç é“¾æ¥ï¼Œä½ ä¸‹è½½åå’Œä½ è‡ªå·±æ‰‹æ•²çš„å…ˆå¯¹æ¯”ä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å·®åˆ«","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636420749,"ip_address":"","comment_id":319970,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1636023018","product_id":100093501,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘æŒ‰ç…§æºç å†™äº†è¿™ä¸ªå°é¡¹ç›®ï¼Œä½†æ˜¯factoryåŒ…çš„Registerå‡½æ•°ä»æ¥éƒ½ä¸è°ƒç”¨å‘¢ï¼Ÿæ–­ç‚¹åŠ åœ¨memstore.goçš„ initå‡½æ•°ä¸­ä¹Ÿä¸æ‰§è¡Œï¼Œæœ€ç»ˆå¯¼è‡´runèµ·æ¥ç›´æ¥å°±æŠ¥panicäº†","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529832,"discussion_content":"09è®²æœ«å°¾æœ‰è¿™ä¸ªå®æˆ˜é¡¹ç›®çš„æºç é“¾æ¥ï¼Œä½ ä¸‹è½½åå’Œä½ è‡ªå·±æ‰‹æ•²çš„å…ˆå¯¹æ¯”ä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å·®åˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636420749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155210,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a0/8a/69f4023c.jpg","nickname":"Dunbreak","note":"","ucode":"A64010733754BF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413267,"discussion_content":"æˆ‘å·²ç»è§£å†³äº†ï¼Œæ˜¯å°‘äº†åŒ¿ååŒ…å¼•ç”¨çš„ä»£ç ï¼ŒåŠ ä¸Šä¹‹åinitå‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636427155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1898332,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f7/5c/8a0b5b90.jpg","nickname":"æ°¸é‡ä¹","note":"","ucode":"B11D8B55B51188","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412457,"discussion_content":"æˆ‘çš„æŠ¥ï¼španic: store: unknown provider men ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636174691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/771a5dca.jpg","nickname":"å¥”è·‘çš„å’¸é±¼","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411954,"discussion_content":"è€å¸ˆçš„é‚£ä¸ªmain.goç¨‹åºé‡Œé¢ï¼ŒåŒ…å¯¼å…¥çš„ç¬¬ä¸€è¡Œåªæ‰§è¡Œäº†initå‡½æ•°ï¼Œä½¿ç”¨IDEçš„è¯æ˜¯ä¸ä¼šè‡ªåŠ¨å¯¼å…¥çš„ï¼Œéœ€è¦è‡ªå·±å†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636036613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319908,"user_name":"Geek_8ed998","can_delete":false,"product_type":"c1","uid":1793879,"ip_address":"","ucode":"1C164836354665","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJHTX1IwEl1Eh1CCO2ejL2gKe08Vxib61UZz9l5WGA81ObK0Nk5MCZ3ic6IWcW5kyX0DtwBNMEMl2Q/132","comment_is_top":false,"comment_ctime":1636007117,"is_pvip":false,"replies":[{"id":"116238","content":"æ˜¯ä»æ–‡ä¸­æœ«å°¾çš„githubé“¾æ¥ä¸‹è½½çš„æºç ä¹ˆï¼Ÿä½ æœ¬åœ°çš„goæ˜¯ä»€ä¹ˆç‰ˆæœ¬ï¼Ÿå¼€å¯go moduleæ„å»ºæ¨¡å¼äº†ä¹ˆï¼Ÿç¡®è®¤ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1636420678,"ip_address":"","comment_id":319908,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1636007117","product_id":100093501,"comment_content":"package bookstore&#47;cmd&#47;bookstore is not in GOROOT (&#47;usr&#47;local&#47;go&#47;src&#47;bookstore&#47;cmd&#47;bookstore)  è¿™ä¸ªå•¥åŸå› é˜¿","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529810,"discussion_content":"æ˜¯ä»æ–‡ä¸­æœ«å°¾çš„githubé“¾æ¥ä¸‹è½½çš„æºç ä¹ˆï¼Ÿä½ æœ¬åœ°çš„goæ˜¯ä»€ä¹ˆç‰ˆæœ¬ï¼Ÿå¼€å¯go moduleæ„å»ºæ¨¡å¼äº†ä¹ˆï¼Ÿç¡®è®¤ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636420678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1896658,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/f0/d2/771a5dca.jpg","nickname":"å¥”è·‘çš„å’¸é±¼","note":"","ucode":"28C2B95415BBF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411948,"discussion_content":"go build bookstore/cm/bookstoreè¿™ä¸ªå‘½ä»¤è¦åœ¨go.modæ–‡ä»¶æ‰€åœ¨è·¯å¾„ä¸‹æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636036290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319603,"user_name":"ä¸è´Ÿé’æ˜¥ä¸è´Ÿå·±ğŸ¤˜","can_delete":false,"product_type":"c1","uid":1363671,"ip_address":"","ucode":"A6DD8E8B20EA6E","user_header":"https://static001.geekbang.org/account/avatar/00/14/ce/d7/5315f6ce.jpg","comment_is_top":false,"comment_ctime":1635862763,"is_pvip":true,"replies":[{"id":"115894","content":"ä¸æ˜ç™½å°±åå¤å¤šçœ‹å¤šå¬å‡ éã€‚æœ‰é—®é¢˜éšæ—¶ç•™è¨€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1635931996,"ip_address":"","comment_id":319603,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1635862763","product_id":100093501,"comment_content":"è¿™èŠ‚æœ‰ç‚¹å¤æ‚ï¼Œå…ˆrunå§ï¼Œåé¢åœ¨å¤ä¹ ä¸€ä¸‹:)","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529685,"discussion_content":"ä¸æ˜ç™½å°±åå¤å¤šçœ‹å¤šå¬å‡ éã€‚æœ‰é—®é¢˜éšæ—¶ç•™è¨€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635931996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1627670,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d6/16/107f0d04.jpg","nickname":"å±±é’","note":"","ucode":"904AE3C23D3B92","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580020,"discussion_content":"å…¨éƒ¨å­¦å®Œå‡ éå†å›æ¥æ•²è¿™ä¸ªä¸€éå°±OKäº† ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657808368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319599,"user_name":"è¿›åŒ–èŒ","can_delete":false,"product_type":"c1","uid":1276861,"ip_address":"","ucode":"B30A5F78BB4171","user_header":"https://static001.geekbang.org/account/avatar/00/13/7b/bd/ccb37425.jpg","comment_is_top":false,"comment_ctime":1635862402,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1635862402","product_id":100093501,"comment_content":"å¼€å§‹æ„Ÿè§‰æœ‰äº›éš¾åº¦äº†ï¼Œå¾—å¤šçœ‹ä¸¤éï¼ŒæŠŠç¨‹åºè·‘èµ·æ¥æ‰è¡Œäº†~","like_count":0},{"had_liked":false,"id":319587,"user_name":"Guoo","can_delete":false,"product_type":"c1","uid":2821421,"ip_address":"","ucode":"5D63DE57EBC8E5","user_header":"https://static001.geekbang.org/account/avatar/00/2b/0d/2d/655a626d.jpg","comment_is_top":false,"comment_ctime":1635859303,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1635859303","product_id":100093501,"comment_content":"è€å¸ˆç¡®å®è¿‡æ¥äººï¼Œæ­£å‡†å¤‡æ‰¾ä¸ªé¡¹ç›®æ‰‹æ’¸ä¸€éå‘¢","like_count":0,"discussions":[{"author":{"id":1793879,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJHTX1IwEl1Eh1CCO2ejL2gKe08Vxib61UZz9l5WGA81ObK0Nk5MCZ3ic6IWcW5kyX0DtwBNMEMl2Q/132","nickname":"Geek_8ed998","note":"","ucode":"1C164836354665","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411857,"discussion_content":"package bookstore/cmd/bookstore is not in GOROOT (/usr/local/go/src/bookstore/cmd/bookstore) æŒ‰è€å¸ˆçš„æ­¥éª¤æ‰§è¡Œåˆ°è¿™é‡Œå‡ºé”™ï¼Œä»€ä¹ˆåŸå› é˜¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636020524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319408,"user_name":"é™ˆä¸œ","can_delete":false,"product_type":"c1","uid":2213995,"ip_address":"","ucode":"FCDE6D237CC621","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Ge7uhlEVxicQT73YuomDPrVKI8UmhqxKWrhtO5GMNlFjrHWfd3HAjgaSribR4Pzorw8yalYGYqJI4VPvUyPzicSKg/132","comment_is_top":false,"comment_ctime":1635781228,"is_pvip":true,"replies":[{"id":"115901","content":"å­¦ä¹ ä»»ä½•ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œè¿™ä¸ªè¿‡ç¨‹éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚åªæ˜¯å¯¹ç€ä¸“æ æ–‡ç« æˆ–ä¹¦ç±çœ‹ï¼Œé‚£æ˜¯å­¦ä¸ä¼šç¼–ç çš„ï¼Œå¿…é¡»åŠ¨æ‰‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1635933593,"ip_address":"","comment_id":319408,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1635781228","product_id":100093501,"comment_content":"å…ˆæŠŠä»£ç æ•²ä¸€é,æ‹é¡ºä¹‹å,å†ç†è§£,æ˜¯ä¸æ˜¯å¯¹æ–°æ‰‹æ˜¯æ¯”è¾ƒå¥½çš„æ–¹å¼?","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529626,"discussion_content":"å­¦ä¹ ä»»ä½•ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œè¿™ä¸ªè¿‡ç¨‹éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚åªæ˜¯å¯¹ç€ä¸“æ æ–‡ç« æˆ–ä¹¦ç±çœ‹ï¼Œé‚£æ˜¯å­¦ä¸ä¼šç¼–ç çš„ï¼Œå¿…é¡»åŠ¨æ‰‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635933593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319293,"user_name":"å¼ é¹","can_delete":false,"product_type":"c1","uid":2814235,"ip_address":"","ucode":"ED292A97B0744C","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f1/1b/ae72d9a3.jpg","comment_is_top":false,"comment_ctime":1635734873,"is_pvip":false,"replies":[{"id":"115924","content":"store.Storeæ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œè€ŒMemStoreå®ç°äº†è¿™ä¸ªæ¥å£ï¼Œè‡ªç„¶æ˜¯å¯ä»¥ä¼ ç»™store.Storeçš„ã€‚å…³äºæ¥å£ç±»å‹ï¼Œåœ¨åç»­è¯¾ç¨‹ä¸­ä¼šè¯¦ç»†è®²è§£ã€‚è¿™é‡Œå¤§å®¶å…ˆæœ‰ä¸ªæ„Ÿæ€§è®¤è¯†å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1635946685,"ip_address":"","comment_id":319293,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1635734873","product_id":100093501,"comment_content":"è€å¸ˆï¼ŒRegister(name string, p store.Store)æ–¹æ³•ç¬¬äºŒå‚æ•°è¦æ±‚ä¼ å…¥Storeï¼Œmemstore.goä¸­çš„initæ–¹æ³•ä½¿ç”¨Registeræ—¶ä¼ å…¥çš„æ˜¯MemStoreç±»å‹ï¼Œç±»å‹ä¸åŒ¹é…å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529577,"discussion_content":"store.Storeæ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œè€ŒMemStoreå®ç°äº†è¿™ä¸ªæ¥å£ï¼Œè‡ªç„¶æ˜¯å¯ä»¥ä¼ ç»™store.Storeçš„ã€‚å…³äºæ¥å£ç±»å‹ï¼Œåœ¨åç»­è¯¾ç¨‹ä¸­ä¼šè¯¦ç»†è®²è§£ã€‚è¿™é‡Œå¤§å®¶å…ˆæœ‰ä¸ªæ„Ÿæ€§è®¤è¯†å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635946685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411037,"discussion_content":"çœ‹äº†æ–‡æœ«çš„GitHubé“¾æ¥äº†å—ï¼Ÿ MemStore å®ç°äº†Storeæ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œæ‰€ä»¥ä¹Ÿå°±å±äº Store ç±»å‹äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635836276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1505492,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/exfIUlVdCpicQPc7fOI6XezUuXd7rayRia7sB2GGHGP7IEBibI6TJbQS2R0bMNejzR1odAIDFP05cWjujrmbIzzwg/132","nickname":"AlexWillBeGood","note":"","ucode":"6D7BB91781E38C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411103,"discussion_content":"Storeæ˜¯æ¥å£ Memstoreé€šè¿‡duck typeå®ç°äº†æ¥å£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635850260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410639,"discussion_content":"MemStore è¦è‡ªå·±å®ç°ä¸€ä¸‹ Store æ¥å£çš„æ–¹æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635749883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319286,"user_name":"å¼ é¹","can_delete":false,"product_type":"c1","uid":2814235,"ip_address":"","ucode":"ED292A97B0744C","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f1/1b/ae72d9a3.jpg","comment_is_top":false,"comment_ctime":1635733117,"is_pvip":false,"replies":[{"id":"115926","content":"åŒ…åå¯ä»¥ä»»æ„å‘½åï¼Œæ²¡æœ‰é™åˆ¶ï¼Œä½†ç¤¾åŒºå…¬è®¤çš„å¥½çš„åŒ…åé€šå¸¸ä¸ºä¸€ä¸ªå°å†™å•è¯ã€‚ä¸€ä¸ªç›®å½•ä¸‹ä»…å…è®¸å­˜æ”¾ä¸€ä¸ªåŒ…ã€‚é€šå¸¸ä¸€ä¸ªä¼˜ç§€çš„å®è·µæ˜¯åŒ…åä¸ç›®å½•åç›¸åŒã€‚ä½†ä¹Ÿæœ‰å¾ˆå¤šé¡¹ç›®æ²¡æœ‰éµå®ˆè¿™ä¸ªçº¦å®šä¿—æˆçš„è§„åˆ™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1635947100,"ip_address":"","comment_id":319286,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1635733117","product_id":100093501,"comment_content":"è€å¸ˆï¼Œä½ æ¯ä¸ªæ–‡ä»¶çš„åŒ…åæ€ä¹ˆå‘½åï¼Ÿæ ¹æ®ç›®å½•æ¥å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529573,"discussion_content":"åŒ…åå¯ä»¥ä»»æ„å‘½åï¼Œæ²¡æœ‰é™åˆ¶ï¼Œä½†ç¤¾åŒºå…¬è®¤çš„å¥½çš„åŒ…åé€šå¸¸ä¸ºä¸€ä¸ªå°å†™å•è¯ã€‚ä¸€ä¸ªç›®å½•ä¸‹ä»…å…è®¸å­˜æ”¾ä¸€ä¸ªåŒ…ã€‚é€šå¸¸ä¸€ä¸ªä¼˜ç§€çš„å®è·µæ˜¯åŒ…åä¸ç›®å½•åç›¸åŒã€‚ä½†ä¹Ÿæœ‰å¾ˆå¤šé¡¹ç›®æ²¡æœ‰éµå®ˆè¿™ä¸ªçº¦å®šä¿—æˆçš„è§„åˆ™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635947100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2576960,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","nickname":"è‡ªç”±","note":"","ucode":"4E3B53D29D86CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410634,"discussion_content":"åŒ…çš„å‘½åï¼Œä¹‹å‰åœ¨ 05 é¡¹ç›®å¸ƒå±€å·²ç»è¯´äº†å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635747807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319275,"user_name":"ç½—æ°","can_delete":false,"product_type":"c1","uid":1320487,"ip_address":"","ucode":"96BAFAA147341F","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg","comment_is_top":false,"comment_ctime":1635730047,"is_pvip":false,"replies":[{"id":"115927","content":"å“ˆå“ˆï¼Œæ…¢æ…¢æ¥ï¼Œä¸€ç‚¹ç‚¹æ‘¸ç´¢å’Œä¼˜åŒ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1635947138,"ip_address":"","comment_id":319275,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1635730047","product_id":100093501,"comment_content":"çœ‹äº†è€å¸ˆçš„è®²è§£ï¼Œæˆ‘éƒ½ä¸å¥½æ„æ€è¯´æˆ‘çš„ç”Ÿäº§ç¯å¢ƒæœ‰å¤šä¹ˆçš„ç³Ÿç³•äº†ã€‚æ–°çš„é¡¹ç›®æˆ‘ä»¥æœ¬æ–‡ä½œä¸ºæœ€ä½³å®è·µå»å‚è€ƒã€‚","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529568,"discussion_content":"å“ˆå“ˆï¼Œæ…¢æ…¢æ¥ï¼Œä¸€ç‚¹ç‚¹æ‘¸ç´¢å’Œä¼˜åŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635947138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319261,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1635726959,"is_pvip":false,"replies":[{"id":"115928","content":"çœ‹server&#47;server.goä¸­NewBookStoreServerå‡½æ•°çš„å®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Tony Bai","uid":"1026224","ctime":1635947218,"ip_address":"","comment_id":319261,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1635726959","product_id":100093501,"comment_content":"è€å¸ˆ è·¯ç”±åœ¨å“ªé‡Œè®¾ç½®çš„å‘¢ æˆ‘æ€ä¹ˆçŸ¥é“å¯¹åº”çš„æ˜¯å“ªä¸ªrestfulæ–¹æ³•å‘¢","like_count":0,"discussions":[{"author":{"id":1026224,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a8/b0/6f87ab08.jpg","nickname":"Tony Bai","note":"","ucode":"B6B08985F6FA89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529560,"discussion_content":"çœ‹server/server.goä¸­NewBookStoreServerå‡½æ•°çš„å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635947218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1218761,"avatar":"https://static001.geekbang.org/account/avatar/00/12/98/c9/9b457156.jpg","nickname":"è¥¿çº¢æŸ¿ç‰›è…©æ³¡é¥¼","note":"","ucode":"0B090A9D8588F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411028,"discussion_content":"è·¯ç”±æ˜¯åœ¨server/server.goçš„NewBookStoreServerå‡½æ•°ä¸­å®ç°çš„ï¼Œé€šè¿‡ä½¿ç”¨muxåŒ…æä¾›çš„æ–¹æ³•å®ç°ï¼Œä»£ç åŠè®²è§£åœ¨å½“å‰å°èŠ‚çš„HTTP æœåŠ¡æ¨¡å—ï¼ˆserverï¼‰å¤„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635834762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}