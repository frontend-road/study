{"id":118848,"title":"12 | 序列化与反序列化：如何通过网络传输结构化的数据？","content":"<p>你好，我是李玥。</p><p>最近有一些同学留言说，感觉这几节课讲的内容和消息关系不大。这里我解释一下，因为我们课程其中的一个目的，是让同学们不仅会使用消息队列，还可以通过对消息队列的学习，在代码能力上有一个提升，具备“造轮子”的能力。这样，你对消息队列的理解才能足够的深入，而不只是浮于表面。如果你细心可能也会发现，很多大厂在面试时，提到消息队列的问题，也不会仅仅局限在消息队列的使用上，他更多的会考察“你为什么这么实现”。</p><p>所以在进阶篇的上半部分，我会把开发一个消息队列需要用到的一些底层的关键技术给大家讲解清楚，然后我们再来一起分析消息队列的源代码。</p><p>在上节课中，我们解决了如何实现高性能的网络传输的问题。那是不是程序之间就可以通信了呢？这里面还有一些问题需要解决。</p><p>我们知道，在TCP的连接上，它传输数据的基本形式就是二进制流，也就是一段一段的1和0。在一般编程语言或者网络框架提供的API中，传输数据的基本形式是字节，也就是Byte。一个字节就是8个二进制位，8个Bit，所以在这里，二进制流和字节流本质上是一样的。</p><p>那对于我们编写的程序来说，它需要通过网络传输的数据是什么形式的呢？是结构化的数据，比如，一条命令、一段文本或者是一条消息。对应到我们写的代码中，这些结构化的数据是什么？这些都可以用一个类（Class）或者一个结构体（Struct）来表示。</p><!-- [[[read_end]]] --><p>那显然，<strong>要想使用网络框架的API来传输结构化的数据，必须得先实现结构化的数据与字节流之间的双向转换。</strong>这种将结构化数据转换成字节流的过程，我们称为序列化，反过来转换，就是反序列化。</p><p>序列化的用途除了用于在网络上传输数据以外，另外的一个重要用途是，将结构化数据保存在文件中，因为在文件内保存数据的形式也是二进制序列，和网络传输过程中的数据是一样的，所以序列化同样适用于将结构化数据保存在文件中。</p><p>很多处理海量数据的场景中，都需要将对象序列化后，把它们暂时从内存转移到磁盘中，等需要用的时候，再把数据从磁盘中读取出来，反序列化成对象来使用，这样不仅可以长期保存不丢失数据，而且可以节省有限的内存空间。</p><p>这节课，我们就来聊聊，怎么来实现高性能的序列化和反序列化。</p><h2>你该选择哪种序列化实现？</h2><p>如果说，只是实现序列化和反序列的功能，并不难，方法也有很多，比如我们最常使用的，把一个对象转换成字符串并打印出来，这其实就是一种序列化的实现，这个字符串只要转成字节序列，就可以在网络上传输或者保存在文件中了。</p><p>但是，你千万不要在你的程序中这么用，这种实现的方式仅仅只是能用而已，绝不是一个好的选择。</p><p>有很多通用的序列化实现，我们可以直接拿来使用。Java和Go语言都内置了序列化实现，也有一些流行的开源序列化实现，比如，Google 的Protobuf、Kryo、Hessian等；此外，像JSON、XML这些标准的数据格式，也可以作为一种序列化实现来使用。</p><p>当然，我们也可以自己来实现私有的序列化实现。</p><p>面对这么多种序列化实现，我们该如何选择呢？你需要权衡这样几个因素：</p><ol>\n<li>序列化后的数据最好是易于人类阅读的；</li>\n<li>实现的复杂度是否足够低；</li>\n<li>序列化和反序列化的速度越快越好；</li>\n<li>序列化后的信息密度越大越好，也就是说，同样的一个结构化数据，序列化之后占用的存储空间越小越好；</li>\n</ol><p>当然，<strong>不会存在一种序列化实现在这四个方面都是最优的</strong>，否则我们就没必要来纠结到底选择哪种实现了。因为，大多数情况下，易于阅读和信息密度是矛盾的，实现的复杂度和性能也是互相矛盾的。所以，我们需要根据所实现的业务，来选择合适的序列化实现。</p><p>像JSON、XML这些序列化方法，可读性最好，但信息密度也最低。像Kryo、Hessian这些通用的二进制序列化实现，适用范围广，使用简单，性能比JSON、XML要好一些，但是肯定不如专用的序列化实现。</p><p>对于一些强业务类系统，比如说电商类、社交类的应用系统，这些系统的特点是，业务复杂，需求变化快，但是对性能的要求没有那么苛刻。这种情况下，我推荐你使用JSON这种实现简单，数据可读性好的序列化实现，这种实现使用起来非常简单，序列化后的JSON数据我们都可以看得懂，无论是接口调试还是排查问题都非常方便。付出的代价就是多一点点CPU时间和存储空间而已。</p><p>比如我们要序列化一个User对象，它包含3个属性，姓名zhangsan，年龄：23，婚姻状况：已婚。</p><pre><code>User:\n  name: &quot;zhangsan&quot;\n  age: 23\n  married: true\n</code></pre><p>使用JSON序列化后：</p><pre><code>{&quot;name&quot;:&quot;zhangsan&quot;,&quot;age&quot;:&quot;23&quot;,&quot;married&quot;:&quot;true&quot;}\n</code></pre><p>这里面的数据我们不需要借助工具，是直接可以看懂的。</p><p>序列化的代码也比较简单，直接调用JSON序列化框架提供的方法就可以了：</p><pre><code>byte [] serializedUser = JsonConvert.SerializeObject(user).getBytes(&quot;UTF-8&quot;);\n</code></pre><p>如果JSON序列化的性能达不到你系统的要求，可以采用性能更好的二进制序列化实现，实现的复杂度和JSON序列化是差不多的，都很简单，但是序列化性能更好，信息密度也更高，代价就是失去了可读性。</p><p>比如我们用Kryo来序列化User对象，它的代码如下：</p><pre><code>kryo.register(User.class);\nOutput output = new Output(new FileOutputStream(&quot;file.bin&quot;));\nkryo.writeObject(output, user);\n</code></pre><p>在这段代码里，先要向Kryo注册一下User类，然后创建一个流，最后调用writeObject方法，将user对象序列化后直接写到流中。这个过程也是非常简单的。</p><h2>实现高性能的序列化和反序列化</h2><p>绝大部分系统，使用上面这两类通用的序列化实现都可以满足需求，而像消息队列这种用于解决通信问题的中间件，它对性能要求非常高，通用的序列化实现达不到性能要求，所以，很多的消息队列都选择自己实现高性能的专用序列化和反序列化。</p><p>使用专用的序列化方法，可以提高序列化性能，并有效减小序列化后的字节长度。</p><p>在专用的序列化方法中，不必考虑通用性。比如，我们可以固定字段的顺序，这样在序列化后的字节里面就不必包含字段名，只要字段值就可以了，不同类型的数据也可以做针对性的优化：</p><p>对于同样的User对象，我们可以把它序列化成这样：</p><pre><code>03   | 08 7a 68 61 6e 67 73 61 6e | 17 | 01\nUser |    z  h  a  n  g  s  a  n  | 23 | true\n</code></pre><p>我解释一下，这个序列化方法是怎么表示User对象的。</p><p>首先我们需要标识一下这个对象的类型，这里面我们用一个字节来表示类型，比如用03表示这是一个User类型的对象。</p><p>我们约定，按照name、age、married这个固定顺序来序列化这三个属性。按照顺序，第一个字段是name，我们不存字段名，直接存字段值“zhangsan”就可以了，由于名字的长度不固定，我们用第一个字节08表示这个名字的长度是8个字节，后面的8个字节就是zhangsan。</p><p>第二个字段是年龄，我们直接用一个字节表示就可以了，23的16进制是17 。</p><p>最后一个字段是婚姻状态，我们用一个字节来表示，01表示已婚，00表示未婚，这里面保存一个01。</p><p>可以看到，同样的一个User对象，JSON序列化后需要47个字节，这里只要12个字节就够了。</p><p>专用的序列化方法显然更高效，序列化出来的字节更少，在网络传输过程中的速度也更快。但缺点是，需要为每种对象类型定义专门的序列化和反序列化方法，实现起来太复杂了，大部分情况下是不划算的。</p><h2>小结</h2><p>进程之间要通过网络传输结构化的数据，需要通过序列化和反序列化来实现结构化数据和二进制数据的双向转换。在选择序列化实现的时候，需要综合考虑数据可读性，实现复杂度，性能和信息密度这四个因素。</p><p>大多数情况下，选择一个高性能的通用序列化框架都可以满足要求，在性能可以满足需求的前提下，推荐优先选择JSON这种可读性好的序列化方法。</p><p>如果说我们需要超高的性能，或者是带宽有限的情况下，可以使用专用的序列化方法，来提升序列化性能，节省传输流量。不过实现起来很复杂，大部分情况下并不划算。</p><h2>思考题</h2><p>课后，你可以想一下这个问题：在内存里存放的任何数据，它最基础的存储单元也是二进制比特，也就是说，我们应用程序操作的对象，它在内存中也是使用二进制存储的，既然都是二进制，为什么不能直接把内存中，对象对应的二进制数据直接通过网络发送出去，或者保存在文件中呢？为什么还需要序列化和反序列化呢？欢迎在留言区与我分享讨论。</p><p>感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给你的朋友。</p><p></p>","comments":[{"had_liked":false,"id":125915,"user_name":"👻 小二","can_delete":false,"product_type":"c1","uid":1625463,"ip_address":"","ucode":"9EEA8553163270","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/77/b2ab5d44.jpg","comment_is_top":false,"comment_ctime":1566271185,"is_pvip":false,"replies":[{"id":46498,"content":"这个总结好，简单明确，赞！","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566349787,"ip_address":"","comment_id":125915,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"尝试回答一下问题：\n内存里存的东西，不通用， 不同系统， 不同语言的组织可能都是不一样的， 而且还存在很多引用， 指针，并不是直接数据块。\n序列化， 反序列化， 其实是约定一种标准吧， 大家都按这个标准去弄， 就能跨平台 ， 跨语言。","like_count":247},{"had_liked":false,"id":125387,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1566177379,"is_pvip":false,"replies":[{"id":46030,"content":"👍👍👍","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566178180,"ip_address":"","comment_id":125387,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"个人对今天的内容进行简单的描述：\n1. 序列化：是一种规则，它定义了数据表达的规则；\n2. 反序列化：依靠给定的规则，还原数据。\n3. 今天的问题：\n内存中的对象数据应该具有语言独特性，例如表达相同业务的User对象(id&#47;name&#47;age字段),Java和PHP在内存中的数据格式应该不一样的，如果直接用内存中的数据，可能会造成语言不通。通常两个服务之间没有严格要求语言必须一致，只要对序列化的数据格式进行了协商，任何2个语言直接都可以进行序列化传输、接收。","like_count":28,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463556,"discussion_content":"👍👍👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566178180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126889,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1566517895,"is_pvip":false,"replies":[{"id":46941,"content":"近期会发一个加餐来解答你的问题。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566523320,"ip_address":"","comment_id":126889,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"课后思考及问题\n1：课后，你可以想一下这个问题：在内存里存放的任何数据，它最基础的存储单元也是二进制比特，也就是说，我们应用程序操作的对象，它在内存中也是使用二进制存储的，既然都是二进制，为什么不能直接把内存中，对象对应的二进制数据直接通过网络发送出去，或者保存在文件中呢？为什么还需要序列化和反序列化呢？\n非常赞，老师的这个问题太经典了，可以拓宽认知边界。\n具有细节，我不清楚，不过大概知道原因，比如：\n1-1：JAVA说01表示TRUE，PHP说01表示我是世界上最好的语言\n1-2：Mac说01表示1，Windows说10表示1\n1-3：虽然0&#47;1在计算机的世界里，可以组合表示万事万物，比如：文字、图片、音频、视频、数据、指令等等，但是不同的语言、操作系统、硬件体系并没有被一个唯一的皇帝统一，他们的标准和存储方式都是有差异性的。所以，字符集有N多种就是这样，同样一个字符0在不同王国有不同的含义。\n\n2：看了老师的讲解，感觉自己也能自定义一个序列化和反序列化的框架，可能性能、通用性待优化。我的问题是，如果我想自己实现一个这样的框架，该怎么思考才能实现的更好？Jd自研的是怎么思考的？或者换个问法，老师在自研时是怎么考虑和设计的，有什么坑没？性能如何？关键想知道怎么自研的？","like_count":8,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464227,"discussion_content":"近期会发一个加餐来解答你的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566523320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"钱","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5938,"discussion_content":"老师帅气啊😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566543089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143127,"user_name":"星愿","can_delete":false,"product_type":"c1","uid":1434022,"ip_address":"","ucode":"ADEF252DEEA84E","user_header":"https://static001.geekbang.org/account/avatar/00/15/e1/a6/311b8639.jpg","comment_is_top":false,"comment_ctime":1571635006,"is_pvip":false,"replies":[{"id":55379,"content":"和其它的MQ的实现是类似的，自身的命令用的专用序列化，消息本身如何序列化是由业务代码决定的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1571707080,"ip_address":"","comment_id":143127,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"Jmq用的啥序列化框架呢","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471393,"discussion_content":"和其它的MQ的实现是类似的，自身的命令用的专用序列化，消息本身如何序列化是由业务代码决定的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571707080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"拼yin世界","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414988,"discussion_content":"这个自身的命令，具体指的是什么？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636955916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"拼yin世界","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548517,"discussion_content":"比如 同步异步发送、心跳、rebalance、获取topic等等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643246493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":414988,"ip_address":"","group_id":0},"score":548517,"extra":""}]}]},{"had_liked":false,"id":125404,"user_name":"oscarwin","can_delete":false,"product_type":"c1","uid":1131956,"ip_address":"","ucode":"492430BA342593","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/b4/ec66d499.jpg","comment_is_top":false,"comment_ctime":1566179739,"is_pvip":false,"replies":[{"id":46205,"content":"👍","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566263560,"ip_address":"","comment_id":125404,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"虽然都是二进制的数据，但是序列化的二进制数据是通过一定的协议将数据字段进行拼接。第一个优势是：不同的语言都可以遵循这种协议进行解析，实现了跨语言。第二个优势是：这种数据可以直接持久化到磁盘，从磁盘读取后也可以通过这个协议解析出来。如果是内存中的数据不能直接存盘的，直接存盘后再读出来我们根本无法辨识这是个什么数据。","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463563,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566263560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552841,"discussion_content":"内存中的数据，不能直接存储到磁盘吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645610577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222956,"user_name":"梵高","can_delete":false,"product_type":"c1","uid":1360741,"ip_address":"","ucode":"E2E07B78382395","user_header":"https://static001.geekbang.org/account/avatar/00/14/c3/65/b5f8581d.jpg","comment_is_top":false,"comment_ctime":1590973747,"is_pvip":false,"replies":[{"id":82357,"content":"其实序列化和反序列化是无所谓“跨语言”问题的。\n\n序列化之后的数据，就是一段二进制数据，只要知道序列化的规则，用任何语言都可以反序列化。\n\n如果是跨语言来传递对象，需要注意的就是不同语言之间数据类型的对应问题，特别是数据类型的长度和高低位问题。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1591150972,"ip_address":"","comment_id":222956,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师，您好。咨询一个问题，序列化与反序列化是如何实现跨语言的。例如，服务端是java实现的，请求端是php的","like_count":6,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496972,"discussion_content":"其实序列化和反序列化是无所谓“跨语言”问题的。\n\n序列化之后的数据，就是一段二进制数据，只要知道序列化的规则，用任何语言都可以反序列化。\n\n如果是跨语言来传递对象，需要注意的就是不同语言之间数据类型的对应问题，特别是数据类型的长度和高低位问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591150972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145047,"user_name":"淡定的、王先森","can_delete":false,"product_type":"c1","uid":1637596,"ip_address":"","ucode":"ECF2FB5D168C85","user_header":"https://static001.geekbang.org/account/avatar/00/18/fc/dc/8ff43984.jpg","comment_is_top":false,"comment_ctime":1572169751,"is_pvip":false,"replies":[{"id":56031,"content":"你在使用消息队列的时候，发消息之前就需要对消息进行序列化，收到消息再反序列化。\n\n可能你日常发送的都是String类型的消息，没有意识到？\n\n比如，你要通过消息发送一个有结构的对象到对端，就需要把这个对象序列化。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1572242469,"ip_address":"","comment_id":145047,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"想问下老师，在项目开发中，什么时候需要显式的实现对象的序列化，或者用到序列化？感觉日常开发中并没有涉及，或者应用的框架给做了我并没有察觉到？ 大多数项目都是怎么设计序列化的呢？请老师提示或指教下，不胜感激","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472223,"discussion_content":"你在使用消息队列的时候，发消息之前就需要对消息进行序列化，收到消息再反序列化。\n\n可能你日常发送的都是String类型的消息，没有意识到？\n\n比如，你要通过消息发送一个有结构的对象到对端，就需要把这个对象序列化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572242469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125245,"user_name":"深藏Blue","can_delete":false,"product_type":"c1","uid":1031616,"ip_address":"","ucode":"CBEBCBDA47281C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bd/c0/57b06721.jpg","comment_is_top":false,"comment_ctime":1566130167,"is_pvip":false,"replies":[{"id":45975,"content":"一般来说，即时通信类系统并不适合用消息队列来实现。很多即时通讯软件都是使用一些P2P技术，数据直接点对点传输，不经过服务端转发的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566133945,"ip_address":"","comment_id":125245,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师好，寻求个帮助。我遇到个这样的需求：一个c&#47;s的架构应用，需要实现client之间的点对点数据通信以及群组通信  实际上就是一个即时通讯应用  由于没有即时通讯相关的经验  还请老师能够指导一下。其中的数据传输使用MQ转发 还是基于netty自定义？自己两种方式都琢磨了一下，基于MQ的话，topic  tag会很多  只要涉及一端client 操作（比如：打开某个界面）需要同步到其他client的话 就需要对topic进行生产以及订阅消费。 第二就是基于netty自定义，这种情况下c端和s端都要定义一个类似servlet或者springmvc里面的dispatcher根据相关参数分发到具体的业务方法。这方面我是小白，还请老师以及知道的朋友给予指点","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463494,"discussion_content":"一般来说，即时通信类系统并不适合用消息队列来实现。很多即时通讯软件都是使用一些P2P技术，数据直接点对点传输，不经过服务端转发的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566133945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1031616,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bd/c0/57b06721.jpg","nickname":"深藏Blue","note":"","ucode":"CBEBCBDA47281C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5284,"discussion_content":"额，老师能否指点一下都有哪些 p2p技术可以选型  这个c端是winform开发的  s端是java开发的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566134273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124899,"user_name":"游弋云端","can_delete":false,"product_type":"c1","uid":1208637,"ip_address":"","ucode":"A960E8F5AA25B9","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/3d/da8dc880.jpg","comment_is_top":false,"comment_ctime":1566011245,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"需要面临的问题：\n1、网络字节序与主机字节序问题，业务要感知和处理大小端问题；\n2、平台差异，各平台对基本数据类型的长度定义不一致、结构体对齐策略不一致，无法实现平台兼容；\n3、连续内存问题，一个对象可能引用，指向其他对象，指针就是一个地址，传输后在另外的设备上是无效值；\n\n如果解决这些问题了，也变相的实现了自己的序列化框架了。","like_count":58,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463494,"discussion_content":"一般来说，即时通信类系统并不适合用消息队列来实现。很多即时通讯软件都是使用一些P2P技术，数据直接点对点传输，不经过服务端转发的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566133945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1031616,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bd/c0/57b06721.jpg","nickname":"深藏Blue","note":"","ucode":"CBEBCBDA47281C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5284,"discussion_content":"额，老师能否指点一下都有哪些 p2p技术可以选型  这个c端是winform开发的  s端是java开发的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566134273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124804,"user_name":"a、","can_delete":false,"product_type":"c1","uid":1532404,"ip_address":"","ucode":"590FE8DB111492","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","comment_is_top":false,"comment_ctime":1565993886,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"1.因为应用程序里的对象，除了属性和属性值以外，还有一些其他的信息，比如jdk编译的版本，类的全限定名，类继承的父类和实现的接口等信息。如果服务端是jdk1.8编译的对象，发给客户端，客户端用的是jdk1.7，肯定会报错。\n2.这些其他的信息是多余的，传输中会增加网络负担","like_count":23,"discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585722,"discussion_content":"是啊    干脆把电脑寄过去得了。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661773404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125915,"user_name":"👻 小二","can_delete":false,"product_type":"c1","uid":1625463,"ip_address":"","ucode":"9EEA8553163270","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/77/b2ab5d44.jpg","comment_is_top":false,"comment_ctime":1566271185,"is_pvip":false,"replies":[{"id":46498,"content":"这个总结好，简单明确，赞！","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566349787,"ip_address":"","comment_id":125915,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"尝试回答一下问题：\n内存里存的东西，不通用， 不同系统， 不同语言的组织可能都是不一样的， 而且还存在很多引用， 指针，并不是直接数据块。\n序列化， 反序列化， 其实是约定一种标准吧， 大家都按这个标准去弄， 就能跨平台 ， 跨语言。","like_count":247,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463747,"discussion_content":"这个总结好，简单明确，赞！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566349787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125387,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1566177379,"is_pvip":false,"replies":[{"id":46030,"content":"👍👍👍","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566178180,"ip_address":"","comment_id":125387,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"个人对今天的内容进行简单的描述：\n1. 序列化：是一种规则，它定义了数据表达的规则；\n2. 反序列化：依靠给定的规则，还原数据。\n3. 今天的问题：\n内存中的对象数据应该具有语言独特性，例如表达相同业务的User对象(id&#47;name&#47;age字段),Java和PHP在内存中的数据格式应该不一样的，如果直接用内存中的数据，可能会造成语言不通。通常两个服务之间没有严格要求语言必须一致，只要对序列化的数据格式进行了协商，任何2个语言直接都可以进行序列化传输、接收。","like_count":28,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463747,"discussion_content":"这个总结好，简单明确，赞！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566349787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126889,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1566517895,"is_pvip":false,"replies":[{"id":46941,"content":"近期会发一个加餐来解答你的问题。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566523320,"ip_address":"","comment_id":126889,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"课后思考及问题\n1：课后，你可以想一下这个问题：在内存里存放的任何数据，它最基础的存储单元也是二进制比特，也就是说，我们应用程序操作的对象，它在内存中也是使用二进制存储的，既然都是二进制，为什么不能直接把内存中，对象对应的二进制数据直接通过网络发送出去，或者保存在文件中呢？为什么还需要序列化和反序列化呢？\n非常赞，老师的这个问题太经典了，可以拓宽认知边界。\n具有细节，我不清楚，不过大概知道原因，比如：\n1-1：JAVA说01表示TRUE，PHP说01表示我是世界上最好的语言\n1-2：Mac说01表示1，Windows说10表示1\n1-3：虽然0&#47;1在计算机的世界里，可以组合表示万事万物，比如：文字、图片、音频、视频、数据、指令等等，但是不同的语言、操作系统、硬件体系并没有被一个唯一的皇帝统一，他们的标准和存储方式都是有差异性的。所以，字符集有N多种就是这样，同样一个字符0在不同王国有不同的含义。\n\n2：看了老师的讲解，感觉自己也能自定义一个序列化和反序列化的框架，可能性能、通用性待优化。我的问题是，如果我想自己实现一个这样的框架，该怎么思考才能实现的更好？Jd自研的是怎么思考的？或者换个问法，老师在自研时是怎么考虑和设计的，有什么坑没？性能如何？关键想知道怎么自研的？","like_count":8,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463556,"discussion_content":"👍👍👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566178180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143127,"user_name":"星愿","can_delete":false,"product_type":"c1","uid":1434022,"ip_address":"","ucode":"ADEF252DEEA84E","user_header":"https://static001.geekbang.org/account/avatar/00/15/e1/a6/311b8639.jpg","comment_is_top":false,"comment_ctime":1571635006,"is_pvip":false,"replies":[{"id":55379,"content":"和其它的MQ的实现是类似的，自身的命令用的专用序列化，消息本身如何序列化是由业务代码决定的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1571707080,"ip_address":"","comment_id":143127,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"Jmq用的啥序列化框架呢","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464227,"discussion_content":"近期会发一个加餐来解答你的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566523320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"钱","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5938,"discussion_content":"老师帅气啊😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566543089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125404,"user_name":"oscarwin","can_delete":false,"product_type":"c1","uid":1131956,"ip_address":"","ucode":"492430BA342593","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/b4/ec66d499.jpg","comment_is_top":false,"comment_ctime":1566179739,"is_pvip":false,"replies":[{"id":46205,"content":"👍","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566263560,"ip_address":"","comment_id":125404,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"虽然都是二进制的数据，但是序列化的二进制数据是通过一定的协议将数据字段进行拼接。第一个优势是：不同的语言都可以遵循这种协议进行解析，实现了跨语言。第二个优势是：这种数据可以直接持久化到磁盘，从磁盘读取后也可以通过这个协议解析出来。如果是内存中的数据不能直接存盘的，直接存盘后再读出来我们根本无法辨识这是个什么数据。","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471393,"discussion_content":"和其它的MQ的实现是类似的，自身的命令用的专用序列化，消息本身如何序列化是由业务代码决定的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571707080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"拼yin世界","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414988,"discussion_content":"这个自身的命令，具体指的是什么？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636955916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walle斌","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1255277,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDVXsv6JOOficLK07867AkAb21eoG5KBgYFmwhMXKJooU5B6iaIZwyDxExicokVQSiaKEwZ4qPicqVFcg/132","nickname":"拼yin世界","note":"","ucode":"9571428A12B72A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548517,"discussion_content":"比如 同步异步发送、心跳、rebalance、获取topic等等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643246493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":414988,"ip_address":"","group_id":0},"score":548517,"extra":""}]}]},{"had_liked":false,"id":222956,"user_name":"梵高","can_delete":false,"product_type":"c1","uid":1360741,"ip_address":"","ucode":"E2E07B78382395","user_header":"https://static001.geekbang.org/account/avatar/00/14/c3/65/b5f8581d.jpg","comment_is_top":false,"comment_ctime":1590973747,"is_pvip":false,"replies":[{"id":82357,"content":"其实序列化和反序列化是无所谓“跨语言”问题的。\n\n序列化之后的数据，就是一段二进制数据，只要知道序列化的规则，用任何语言都可以反序列化。\n\n如果是跨语言来传递对象，需要注意的就是不同语言之间数据类型的对应问题，特别是数据类型的长度和高低位问题。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1591150972,"ip_address":"","comment_id":222956,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师，您好。咨询一个问题，序列化与反序列化是如何实现跨语言的。例如，服务端是java实现的，请求端是php的","like_count":6,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463563,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566263560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552841,"discussion_content":"内存中的数据，不能直接存储到磁盘吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645610577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145047,"user_name":"淡定的、王先森","can_delete":false,"product_type":"c1","uid":1637596,"ip_address":"","ucode":"ECF2FB5D168C85","user_header":"https://static001.geekbang.org/account/avatar/00/18/fc/dc/8ff43984.jpg","comment_is_top":false,"comment_ctime":1572169751,"is_pvip":false,"replies":[{"id":56031,"content":"你在使用消息队列的时候，发消息之前就需要对消息进行序列化，收到消息再反序列化。\n\n可能你日常发送的都是String类型的消息，没有意识到？\n\n比如，你要通过消息发送一个有结构的对象到对端，就需要把这个对象序列化。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1572242469,"ip_address":"","comment_id":145047,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"想问下老师，在项目开发中，什么时候需要显式的实现对象的序列化，或者用到序列化？感觉日常开发中并没有涉及，或者应用的框架给做了我并没有察觉到？ 大多数项目都是怎么设计序列化的呢？请老师提示或指教下，不胜感激","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496972,"discussion_content":"其实序列化和反序列化是无所谓“跨语言”问题的。\n\n序列化之后的数据，就是一段二进制数据，只要知道序列化的规则，用任何语言都可以反序列化。\n\n如果是跨语言来传递对象，需要注意的就是不同语言之间数据类型的对应问题，特别是数据类型的长度和高低位问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591150972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125245,"user_name":"深藏Blue","can_delete":false,"product_type":"c1","uid":1031616,"ip_address":"","ucode":"CBEBCBDA47281C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bd/c0/57b06721.jpg","comment_is_top":false,"comment_ctime":1566130167,"is_pvip":false,"replies":[{"id":45975,"content":"一般来说，即时通信类系统并不适合用消息队列来实现。很多即时通讯软件都是使用一些P2P技术，数据直接点对点传输，不经过服务端转发的。","user_name":"作者回复","user_name_real":"李玥","uid":1501046,"ctime":1566133945,"ip_address":"","comment_id":125245,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"老师好，寻求个帮助。我遇到个这样的需求：一个c&#47;s的架构应用，需要实现client之间的点对点数据通信以及群组通信  实际上就是一个即时通讯应用  由于没有即时通讯相关的经验  还请老师能够指导一下。其中的数据传输使用MQ转发 还是基于netty自定义？自己两种方式都琢磨了一下，基于MQ的话，topic  tag会很多  只要涉及一端client 操作（比如：打开某个界面）需要同步到其他client的话 就需要对topic进行生产以及订阅消费。 第二就是基于netty自定义，这种情况下c端和s端都要定义一个类似servlet或者springmvc里面的dispatcher根据相关参数分发到具体的业务方法。这方面我是小白，还请老师以及知道的朋友给予指点","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"李玥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472223,"discussion_content":"你在使用消息队列的时候，发消息之前就需要对消息进行序列化，收到消息再反序列化。\n\n可能你日常发送的都是String类型的消息，没有意识到？\n\n比如，你要通过消息发送一个有结构的对象到对端，就需要把这个对象序列化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572242469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124899,"user_name":"游弋云端","can_delete":false,"product_type":"c1","uid":1208637,"ip_address":"","ucode":"A960E8F5AA25B9","user_header":"https://static001.geekbang.org/account/avatar/00/12/71/3d/da8dc880.jpg","comment_is_top":false,"comment_ctime":1566011245,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"需要面临的问题：\n1、网络字节序与主机字节序问题，业务要感知和处理大小端问题；\n2、平台差异，各平台对基本数据类型的长度定义不一致、结构体对齐策略不一致，无法实现平台兼容；\n3、连续内存问题，一个对象可能引用，指向其他对象，指针就是一个地址，传输后在另外的设备上是无效值；\n\n如果解决这些问题了，也变相的实现了自己的序列化框架了。","like_count":58,"discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585722,"discussion_content":"是啊    干脆把电脑寄过去得了。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661773404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124804,"user_name":"a、","can_delete":false,"product_type":"c1","uid":1532404,"ip_address":"","ucode":"590FE8DB111492","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIvUlicgrWtibbDzwhLw5cQrDSy2JuE1mVvmXq11KQIwpLicgDuWfpp9asE0VCN6HhibPDWn7wBc2lfmA/132","comment_is_top":false,"comment_ctime":1565993886,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"1.因为应用程序里的对象，除了属性和属性值以外，还有一些其他的信息，比如jdk编译的版本，类的全限定名，类继承的父类和实现的接口等信息。如果服务端是jdk1.8编译的对象，发给客户端，客户端用的是jdk1.7，肯定会报错。\n2.这些其他的信息是多余的，传输中会增加网络负担","like_count":23},{"had_liked":false,"id":124913,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566014279,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"内存在每个平台的分布都是不一样的，一个对象不光有用户定义的属性，还包括平台定义的属性，如果不经过序列化就传输过去，一方面会浪费大量的带宽，另一方面还可能因为平台不同等问题导致不兼容，从而无法解析。","like_count":8},{"had_liked":false,"id":236035,"user_name":"you-aholic","can_delete":false,"product_type":"c1","uid":1499363,"ip_address":"","ucode":"E346825EC3AA53","user_header":"https://static001.geekbang.org/account/avatar/00/16/e0/e3/31a250ce.jpg","comment_is_top":false,"comment_ctime":1595295878,"is_pvip":false,"replies":null,"discussion_count":4,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"张三23岁就结婚了，而我25的单身狗还在学消息队列。😂😂🤣","like_count":4},{"had_liked":false,"id":129611,"user_name":"楚翔style","can_delete":false,"product_type":"c1","uid":1174846,"ip_address":"","ucode":"E715F82C34A9AA","user_header":"https://static001.geekbang.org/account/avatar/00/11/ed/3e/c1725237.jpg","comment_is_top":false,"comment_ctime":1567172523,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"序列化:把对象转成通用格式数据(byte json)\n反序列化:通用格式转成服务端能认的对象,比如json-&gt;Java Object","like_count":4,"discussions":[{"author":{"id":2884519,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/eSqzzuCjD7iaPssYHGmZzYV0DkMe5XPHcGaY2WSRYlSYSKtUVnBESkqiawYAb4soE4HaXwHYZC4hfRjGf1TwQA9g/132","nickname":"不忘初心","note":"","ucode":"1B0B65C60DFA1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650515,"discussion_content":"24年你找到女朋友了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725175694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"陕西","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1373602,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f5/a2/8a470344.jpg","nickname":"Run_dream","note":"","ucode":"1BD4AAFCE72B99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553927,"discussion_content":"我27了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646133837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2311463,"avatar":"https://static001.geekbang.org/account/avatar/00/23/45/27/4fbf8f6a.jpg","nickname":"luke Y","note":"","ucode":"111F98D367235B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1373602,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f5/a2/8a470344.jpg","nickname":"Run_dream","note":"","ucode":"1BD4AAFCE72B99","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575199,"discussion_content":"看回复时间按其实。。你俩同岁。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654664837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":553927,"ip_address":"","group_id":0},"score":575199,"extra":""},{"author":{"id":1449940,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1f/d4/87759d78.jpg","nickname":"提桶男孩","note":"","ucode":"3F21C8BCFE2C8E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2311463,"avatar":"https://static001.geekbang.org/account/avatar/00/23/45/27/4fbf8f6a.jpg","nickname":"luke Y","note":"","ucode":"111F98D367235B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576363,"discussion_content":"你这是要笑死我，哈哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655460613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":575199,"ip_address":"","group_id":0},"score":576363,"extra":""}]}]},{"had_liked":false,"id":126350,"user_name":"南辕北辙","can_delete":false,"product_type":"c1","uid":1214502,"ip_address":"","ucode":"03EC406AE0D591","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","comment_is_top":false,"comment_ctime":1566369819,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"个人理解，序列化与反序列化的通用思想和通信协议挺类似的，只要通信双方约好什么样的格式去定义数据，想怎么玩就怎么玩。","like_count":3},{"had_liked":false,"id":140280,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1049360,"ip_address":"","ucode":"D8A7F7F6A0BEA9","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","comment_is_top":false,"comment_ctime":1570870227,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"在内存中，存放的对象也是有相应的结构的。如果直接保存，直接读取，那么也需要有相应的转换器，将数据转换为内存中的对象。而且这样的对象，不通用，换一种语言或者实现就不能通用了，并且这样的对象不一定是最节省空间的。\n我们损失一部分性能，换取跨语言性、节省存储空间也是一种两者取较好的选择。","like_count":2},{"had_liked":false,"id":352313,"user_name":"zhoufeng","can_delete":false,"product_type":"c1","uid":1447741,"ip_address":"","ucode":"6F92F7866F9EB4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKq0oQVibKcmYJqmpqaNNQibVgia7EsEgW65LZJIpDZBMc7FyMcs7J1JmFCtp06pY8ibbcpW4ibRtG7Frg/132","comment_is_top":false,"comment_ctime":1658547359,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"问个小白问题，既然序列化是将结构化数据转换成字节流，那为什么json序列化后是字符串形式的","like_count":1,"discussions":[{"author":{"id":1161271,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","nickname":"不似旧日","note":"","ucode":"DF4C5E3AB9570C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360797,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616516543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335642,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1645611043,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"每天都在学习，感觉有收获不断。","like_count":1},{"had_liked":false,"id":322705,"user_name":"凯文小猪","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1637559841,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"二刷尝试回答下老师的问题：\n以java为例，内存中对象存储格式是：对象头+this指针+payload+对齐数据\n1.所以对象头、this指针、对齐数据对实际传输是多余的 当然通常他们也就不过几十到几百个字节不等。但是设计一个协议 脏数据总是要考虑移除的。\n2.内存中数据是按照class文件定义存放的 比方说我定义了 class User{ String name; int age}\n那么 第一个出现的必然是name 第二个出现的就是age 。但是直接将该数据传送出去 其他语言框架未必就是按照这个格式来读取的 所以就不具备通用性\n3.现代语言通常为了节省内存 对于确定性常量都会构造常量池 这部分拆解可想而知非常麻烦。\n4.反序列化原生java内存对象 还需要将class定义也一起传送 故又多了一个成本\n\n综上 序列化需要一个通常的协议 即使是常用的json也比直接用内存对象好","like_count":1},{"had_liked":false,"id":180770,"user_name":"Trident","can_delete":false,"product_type":"c1","uid":1609530,"ip_address":"","ucode":"53E6788CF33398","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/l4nngwyggBGqeMXC0micwO8bM1hSttgQXa1Y5frJSqWa8NibDhia5icwPcHM5wOpV3hfsf0UicDY0ypFqnQ3iarG0T1w/132","comment_is_top":false,"comment_ctime":1582383907,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"自己实现序列化反序列化，虽然可以节省一点存储成本或者网络传输带宽，但是牺牲了可读性，对于一般应用来说，没有必要为了性能的提升而降低数据的可阅读性","like_count":1},{"had_liked":false,"id":154777,"user_name":"业余爱好者","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1574561727,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"从语义上理解序列化与反序列化，序列化就是把内存中结构化的对象转化为跨平台的可以在网络上传输的二进制“流”。关键词是流，也就是说，它是一个线性的数据结构。而在内存中的数据是结构化的，非线性的，而且各个平台，各种语言的存在方式还不一样。\n\n序列化就是把要传输的信息从专用的表示方式转换为通用的二进制流的表示方式。反序列化的过程刚好相反。\n\n虽然都是二进制，不过信息的编码方式不同。","like_count":1,"discussions":[{"author":{"id":3462841,"avatar":"","nickname":"Geek_9384c9","note":"","ucode":"07C3F033FC11A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606197,"discussion_content":"都是序列化，只不过一个由java对象转成了json对象，一个由java对象转成了字节数组","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677029186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3167302,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLz44WGtTHNfNiaficzyiasJAQgLcSh6cVLsTpczlXxIlbBXNhAT1qKbM4OZRpcWP56KAp2fHiaJVsKGw/132","nickname":"Geek_eabafe","note":"","ucode":"4D94487320B33B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":605465,"discussion_content":"我也有这个疑问呐，还是文章里说 把user对象转成json格式的对象，它叫序列化；把user直接用json转成二进制也是序列化\nbyte [] serializedUser = JsonConvert.SerializeObject(user).getBytes(&#34;UTF-8&#34;);\n所以我着实有些蒙圈\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676643481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124913,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1566014279,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"内存在每个平台的分布都是不一样的，一个对象不光有用户定义的属性，还包括平台定义的属性，如果不经过序列化就传输过去，一方面会浪费大量的带宽，另一方面还可能因为平台不同等问题导致不兼容，从而无法解析。","like_count":8},{"had_liked":false,"id":236035,"user_name":"you-aholic","can_delete":false,"product_type":"c1","uid":1499363,"ip_address":"","ucode":"E346825EC3AA53","user_header":"https://static001.geekbang.org/account/avatar/00/16/e0/e3/31a250ce.jpg","comment_is_top":false,"comment_ctime":1595295878,"is_pvip":false,"replies":null,"discussion_count":4,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"张三23岁就结婚了，而我25的单身狗还在学消息队列。😂😂🤣","like_count":4,"discussions":[{"author":{"id":2884519,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/eSqzzuCjD7iaPssYHGmZzYV0DkMe5XPHcGaY2WSRYlSYSKtUVnBESkqiawYAb4soE4HaXwHYZC4hfRjGf1TwQA9g/132","nickname":"不忘初心","note":"","ucode":"1B0B65C60DFA1E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650515,"discussion_content":"24年你找到女朋友了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725175694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"陕西","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1373602,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f5/a2/8a470344.jpg","nickname":"Run_dream","note":"","ucode":"1BD4AAFCE72B99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553927,"discussion_content":"我27了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646133837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2311463,"avatar":"https://static001.geekbang.org/account/avatar/00/23/45/27/4fbf8f6a.jpg","nickname":"luke Y","note":"","ucode":"111F98D367235B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1373602,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f5/a2/8a470344.jpg","nickname":"Run_dream","note":"","ucode":"1BD4AAFCE72B99","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575199,"discussion_content":"看回复时间按其实。。你俩同岁。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654664837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":553927,"ip_address":"","group_id":0},"score":575199,"extra":""},{"author":{"id":1449940,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1f/d4/87759d78.jpg","nickname":"提桶男孩","note":"","ucode":"3F21C8BCFE2C8E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2311463,"avatar":"https://static001.geekbang.org/account/avatar/00/23/45/27/4fbf8f6a.jpg","nickname":"luke Y","note":"","ucode":"111F98D367235B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576363,"discussion_content":"你这是要笑死我，哈哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655460613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":575199,"ip_address":"","group_id":0},"score":576363,"extra":""}]}]},{"had_liked":false,"id":129611,"user_name":"楚翔style","can_delete":false,"product_type":"c1","uid":1174846,"ip_address":"","ucode":"E715F82C34A9AA","user_header":"https://static001.geekbang.org/account/avatar/00/11/ed/3e/c1725237.jpg","comment_is_top":false,"comment_ctime":1567172523,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"序列化:把对象转成通用格式数据(byte json)\n反序列化:通用格式转成服务端能认的对象,比如json-&gt;Java Object","like_count":4,"discussions":[{"author":{"id":1161271,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","nickname":"不似旧日","note":"","ucode":"DF4C5E3AB9570C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360797,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616516543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126350,"user_name":"南辕北辙","can_delete":false,"product_type":"c1","uid":1214502,"ip_address":"","ucode":"03EC406AE0D591","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","comment_is_top":false,"comment_ctime":1566369819,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"个人理解，序列化与反序列化的通用思想和通信协议挺类似的，只要通信双方约好什么样的格式去定义数据，想怎么玩就怎么玩。","like_count":3},{"had_liked":false,"id":140280,"user_name":"Switch","can_delete":false,"product_type":"c1","uid":1049360,"ip_address":"","ucode":"D8A7F7F6A0BEA9","user_header":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","comment_is_top":false,"comment_ctime":1570870227,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"在内存中，存放的对象也是有相应的结构的。如果直接保存，直接读取，那么也需要有相应的转换器，将数据转换为内存中的对象。而且这样的对象，不通用，换一种语言或者实现就不能通用了，并且这样的对象不一定是最节省空间的。\n我们损失一部分性能，换取跨语言性、节省存储空间也是一种两者取较好的选择。","like_count":2},{"had_liked":false,"id":352313,"user_name":"zhoufeng","can_delete":false,"product_type":"c1","uid":1447741,"ip_address":"","ucode":"6F92F7866F9EB4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKq0oQVibKcmYJqmpqaNNQibVgia7EsEgW65LZJIpDZBMc7FyMcs7J1JmFCtp06pY8ibbcpW4ibRtG7Frg/132","comment_is_top":false,"comment_ctime":1658547359,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"问个小白问题，既然序列化是将结构化数据转换成字节流，那为什么json序列化后是字符串形式的","like_count":1,"discussions":[{"author":{"id":3462841,"avatar":"","nickname":"Geek_9384c9","note":"","ucode":"07C3F033FC11A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606197,"discussion_content":"都是序列化，只不过一个由java对象转成了json对象，一个由java对象转成了字节数组","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677029186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3167302,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLz44WGtTHNfNiaficzyiasJAQgLcSh6cVLsTpczlXxIlbBXNhAT1qKbM4OZRpcWP56KAp2fHiaJVsKGw/132","nickname":"Geek_eabafe","note":"","ucode":"4D94487320B33B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":605465,"discussion_content":"我也有这个疑问呐，还是文章里说 把user对象转成json格式的对象，它叫序列化；把user直接用json转成二进制也是序列化\nbyte [] serializedUser = JsonConvert.SerializeObject(user).getBytes(&#34;UTF-8&#34;);\n所以我着实有些蒙圈\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676643481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335642,"user_name":"William Ning","can_delete":false,"product_type":"c1","uid":1592279,"ip_address":"","ucode":"4DB8D05E69E5F3","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","comment_is_top":false,"comment_ctime":1645611043,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"每天都在学习，感觉有收获不断。","like_count":1},{"had_liked":false,"id":322705,"user_name":"凯文小猪","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1637559841,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"二刷尝试回答下老师的问题：\n以java为例，内存中对象存储格式是：对象头+this指针+payload+对齐数据\n1.所以对象头、this指针、对齐数据对实际传输是多余的 当然通常他们也就不过几十到几百个字节不等。但是设计一个协议 脏数据总是要考虑移除的。\n2.内存中数据是按照class文件定义存放的 比方说我定义了 class User{ String name; int age}\n那么 第一个出现的必然是name 第二个出现的就是age 。但是直接将该数据传送出去 其他语言框架未必就是按照这个格式来读取的 所以就不具备通用性\n3.现代语言通常为了节省内存 对于确定性常量都会构造常量池 这部分拆解可想而知非常麻烦。\n4.反序列化原生java内存对象 还需要将class定义也一起传送 故又多了一个成本\n\n综上 序列化需要一个通常的协议 即使是常用的json也比直接用内存对象好","like_count":1},{"had_liked":false,"id":180770,"user_name":"Trident","can_delete":false,"product_type":"c1","uid":1609530,"ip_address":"","ucode":"53E6788CF33398","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/l4nngwyggBGqeMXC0micwO8bM1hSttgQXa1Y5frJSqWa8NibDhia5icwPcHM5wOpV3hfsf0UicDY0ypFqnQ3iarG0T1w/132","comment_is_top":false,"comment_ctime":1582383907,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"自己实现序列化反序列化，虽然可以节省一点存储成本或者网络传输带宽，但是牺牲了可读性，对于一般应用来说，没有必要为了性能的提升而降低数据的可阅读性","like_count":1},{"had_liked":false,"id":154777,"user_name":"业余爱好者","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1574561727,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"从语义上理解序列化与反序列化，序列化就是把内存中结构化的对象转化为跨平台的可以在网络上传输的二进制“流”。关键词是流，也就是说，它是一个线性的数据结构。而在内存中的数据是结构化的，非线性的，而且各个平台，各种语言的存在方式还不一样。\n\n序列化就是把要传输的信息从专用的表示方式转换为通用的二进制流的表示方式。反序列化的过程刚好相反。\n\n虽然都是二进制，不过信息的编码方式不同。","like_count":1},{"had_liked":false,"id":369475,"user_name":"小红帽","can_delete":false,"product_type":"c1","uid":1135290,"ip_address":"广东","ucode":"876000FB67C980","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/ba/440c0157.jpg","comment_is_top":false,"comment_ctime":1677575906,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"为什么不能直接把内存中，对象对应的二进制数据直接通过网络发送出去，或者保存在文件中呢？为什么还需要序列化和反序列化呢？\n首先这些落地的数据我们肯定要看的，可读性我们有要求；\n其次，像java 虚拟机，他内部操作的也是字节，只不过我们代码书写的时候不可能针对字节来编写代码；\n终上所述，我们的业务不需要如此高的性能，宁愿多付出一点序列化，反序列化的时间，也要提高代码和数据的可读性；","like_count":0},{"had_liked":false,"id":368752,"user_name":"Geek_eabafe","can_delete":false,"product_type":"c1","uid":3167302,"ip_address":"河北","ucode":"4D94487320B33B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLz44WGtTHNfNiaficzyiasJAQgLcSh6cVLsTpczlXxIlbBXNhAT1qKbM4OZRpcWP56KAp2fHiaJVsKGw/132","comment_is_top":false,"comment_ctime":1676643680,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"\n问个小白问题，既然序列化是将结构化数据转换成字节流，那为什么json序列化后是字符串形式的\n………………………………………………………………………\n我也有这个疑问呐，还是文章里说 把user对象转成json格式的对象，它叫序列化；把user直接用json转成二进制也是序列化\nbyte [] serializedUser = JsonConvert.SerializeObject(user).getBytes(&quot;UTF-8&quot;);\n所以我着实有些蒙圈","like_count":0},{"had_liked":false,"id":355794,"user_name":"凯文小猪","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"上海","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1661756000,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"a.JVM里的对象的schema是VM定义的，并不是协议期望的schema。即JVM的数据类型表示不等价于协议的数据类型\nb.JVM对象是非串行化的原生数据，不符合现代RPC调用\nc.JVM对象为了实现性能最优，都做了内存对齐，这个在RPC中是多余的，因为会降低数据的熵","like_count":0},{"had_liked":false,"id":351135,"user_name":"Geek_7794e2","can_delete":false,"product_type":"c1","uid":2350043,"ip_address":"","ucode":"2F749554FEA20D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/sFkJYPdIIjHfxgCxAh1D4Pyk1jAueicu7egY1PUvR8egs12gAXxmO51YT6Bk7NianYRyMRPTpd3kKWXvZ8TEkRyw/132","comment_is_top":false,"comment_ctime":1657541429,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"金融的8583 就是这么序列化的","like_count":0},{"had_liked":false,"id":348390,"user_name":"尔东橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/6LaITPQ4Lk5fZn8ib1tfsPW8vI9icTuSwAddiajVfibPDiaDvMU2br6ZT7K0LWCKibSQuicT7sIEVmY4K7ibXY0T7UQEiag/132","comment_is_top":false,"comment_ctime":1655045040,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"JSON序列化后的内容按道理不也是二进制串么，不然怎么在网络传输","like_count":0},{"had_liked":false,"id":348377,"user_name":"尔东橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/6LaITPQ4Lk5fZn8ib1tfsPW8vI9icTuSwAddiajVfibPDiaDvMU2br6ZT7K0LWCKibSQuicT7sIEVmY4K7ibXY0T7UQEiag/132","comment_is_top":false,"comment_ctime":1655033879,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"我觉得课程排布本身没问题，内容可以丰富点。每个人的基础不一样，不可能照顾到所有人。只要能把枯燥的知识通俗易懂讲个大家听就行。重要的是理解原理。","like_count":0},{"had_liked":false,"id":347708,"user_name":"剑八","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1654332743,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"目的层次不同\n网络上最终是二进制的，这个是一定的，是计算机层面的。\n序列化最终是业务信息层面的协议，如json，发送双方约定下。接收方以约定的格式进行解码。","like_count":0},{"had_liked":false,"id":340979,"user_name":"再见理想","can_delete":false,"product_type":"c1","uid":1245999,"ip_address":"","ucode":"FAC88B3F6F6DFD","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","comment_is_top":false,"comment_ctime":1649251961,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"网络传输时，数据是二进制表示的,每一位都是0&#47;1（一个字节8位）。\n客户端需要指定具体的序列化&#47;反序列化方法，这样我们才能将二进制数据转化为类&#47;对象供程序使用。\n序列化方法有如下几个参考指标：\n1，实现的复杂度\n2，数据密码，也就是占用空间的大小\n3，序列化的性能\n4，数据是否是易读的\n","like_count":0},{"had_liked":false,"id":335120,"user_name":"Geek_783504","can_delete":false,"product_type":"c1","uid":2743789,"ip_address":"","ucode":"549D3F0549743C","user_header":"https://static001.geekbang.org/account/avatar/00/29/dd/ed/f6c5432b.jpg","comment_is_top":false,"comment_ctime":1645344178,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"内存中的对象具有语言特性，如果直接发送就不能实现跨语言跨平台的调用。序列化与反序列化是一种规范目的就是在网络传输中客服语言，平台的特性","like_count":0},{"had_liked":false,"id":319481,"user_name":"梦倚栏杆","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1635831254,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"内存有系统性，不通用？","like_count":0,"discussions":[{"author":{"id":1245999,"avatar":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","nickname":"再见理想","note":"","ucode":"FAC88B3F6F6DFD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560501,"discussion_content":"数据密度","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649347487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369475,"user_name":"小红帽","can_delete":false,"product_type":"c1","uid":1135290,"ip_address":"广东","ucode":"876000FB67C980","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/ba/440c0157.jpg","comment_is_top":false,"comment_ctime":1677575906,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"为什么不能直接把内存中，对象对应的二进制数据直接通过网络发送出去，或者保存在文件中呢？为什么还需要序列化和反序列化呢？\n首先这些落地的数据我们肯定要看的，可读性我们有要求；\n其次，像java 虚拟机，他内部操作的也是字节，只不过我们代码书写的时候不可能针对字节来编写代码；\n终上所述，我们的业务不需要如此高的性能，宁愿多付出一点序列化，反序列化的时间，也要提高代码和数据的可读性；","like_count":0},{"had_liked":false,"id":368752,"user_name":"Geek_eabafe","can_delete":false,"product_type":"c1","uid":3167302,"ip_address":"河北","ucode":"4D94487320B33B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLz44WGtTHNfNiaficzyiasJAQgLcSh6cVLsTpczlXxIlbBXNhAT1qKbM4OZRpcWP56KAp2fHiaJVsKGw/132","comment_is_top":false,"comment_ctime":1676643680,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"\n问个小白问题，既然序列化是将结构化数据转换成字节流，那为什么json序列化后是字符串形式的\n………………………………………………………………………\n我也有这个疑问呐，还是文章里说 把user对象转成json格式的对象，它叫序列化；把user直接用json转成二进制也是序列化\nbyte [] serializedUser = JsonConvert.SerializeObject(user).getBytes(&quot;UTF-8&quot;);\n所以我着实有些蒙圈","like_count":0},{"had_liked":false,"id":355794,"user_name":"凯文小猪","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"上海","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1661756000,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"a.JVM里的对象的schema是VM定义的，并不是协议期望的schema。即JVM的数据类型表示不等价于协议的数据类型\nb.JVM对象是非串行化的原生数据，不符合现代RPC调用\nc.JVM对象为了实现性能最优，都做了内存对齐，这个在RPC中是多余的，因为会降低数据的熵","like_count":0},{"had_liked":false,"id":351135,"user_name":"Geek_7794e2","can_delete":false,"product_type":"c1","uid":2350043,"ip_address":"","ucode":"2F749554FEA20D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/sFkJYPdIIjHfxgCxAh1D4Pyk1jAueicu7egY1PUvR8egs12gAXxmO51YT6Bk7NianYRyMRPTpd3kKWXvZ8TEkRyw/132","comment_is_top":false,"comment_ctime":1657541429,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"金融的8583 就是这么序列化的","like_count":0},{"had_liked":false,"id":348390,"user_name":"尔东橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/6LaITPQ4Lk5fZn8ib1tfsPW8vI9icTuSwAddiajVfibPDiaDvMU2br6ZT7K0LWCKibSQuicT7sIEVmY4K7ibXY0T7UQEiag/132","comment_is_top":false,"comment_ctime":1655045040,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"JSON序列化后的内容按道理不也是二进制串么，不然怎么在网络传输","like_count":0},{"had_liked":false,"id":348377,"user_name":"尔东橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/6LaITPQ4Lk5fZn8ib1tfsPW8vI9icTuSwAddiajVfibPDiaDvMU2br6ZT7K0LWCKibSQuicT7sIEVmY4K7ibXY0T7UQEiag/132","comment_is_top":false,"comment_ctime":1655033879,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"我觉得课程排布本身没问题，内容可以丰富点。每个人的基础不一样，不可能照顾到所有人。只要能把枯燥的知识通俗易懂讲个大家听就行。重要的是理解原理。","like_count":0},{"had_liked":false,"id":347708,"user_name":"剑八","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1654332743,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"目的层次不同\n网络上最终是二进制的，这个是一定的，是计算机层面的。\n序列化最终是业务信息层面的协议，如json，发送双方约定下。接收方以约定的格式进行解码。","like_count":0},{"had_liked":false,"id":340979,"user_name":"再见理想","can_delete":false,"product_type":"c1","uid":1245999,"ip_address":"","ucode":"FAC88B3F6F6DFD","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","comment_is_top":false,"comment_ctime":1649251961,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"网络传输时，数据是二进制表示的,每一位都是0&#47;1（一个字节8位）。\n客户端需要指定具体的序列化&#47;反序列化方法，这样我们才能将二进制数据转化为类&#47;对象供程序使用。\n序列化方法有如下几个参考指标：\n1，实现的复杂度\n2，数据密码，也就是占用空间的大小\n3，序列化的性能\n4，数据是否是易读的\n","like_count":0,"discussions":[{"author":{"id":1245999,"avatar":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","nickname":"再见理想","note":"","ucode":"FAC88B3F6F6DFD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560501,"discussion_content":"数据密度","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649347487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335120,"user_name":"Geek_783504","can_delete":false,"product_type":"c1","uid":2743789,"ip_address":"","ucode":"549D3F0549743C","user_header":"https://static001.geekbang.org/account/avatar/00/29/dd/ed/f6c5432b.jpg","comment_is_top":false,"comment_ctime":1645344178,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"内存中的对象具有语言特性，如果直接发送就不能实现跨语言跨平台的调用。序列化与反序列化是一种规范目的就是在网络传输中客服语言，平台的特性","like_count":0},{"had_liked":false,"id":319481,"user_name":"梦倚栏杆","can_delete":false,"product_type":"c1","uid":1095857,"ip_address":"","ucode":"BDEB97F2822445","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvj76PmeUvW8kokyu91IZWuRATKmabibDWbzAj2TajeEic7WvKCJOLaOh6jibEmdQ36EO3sBUZ0HibAiapsrZo64U8w/132","comment_is_top":false,"comment_ctime":1635831254,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"内存有系统性，不通用？","like_count":0},{"had_liked":false,"id":312231,"user_name":"宙斯","can_delete":false,"product_type":"c1","uid":2041396,"ip_address":"","ucode":"80DF36BAD298AD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","comment_is_top":false,"comment_ctime":1631695297,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"问题：在内存里存放的任何数据，它最基础的存储单元也是二进制比特，也就是说，我们应用程序操作的对象，它在内存中也是使用二进制存储的，既然都是二进制，为什么不能直接把内存中，对象对应的二进制数据直接通过网络发送出去，或者保存在文件中呢？为什么还需要序列化和反序列化呢？\n回答：二进制方式没法区分哪个是哪个程序哪个对象的，需要处理做数据处理，处理过程就需要读出来写入再发送了。","like_count":0},{"had_liked":false,"id":296110,"user_name":"非洲黑猴子","can_delete":false,"product_type":"c1","uid":2639724,"ip_address":"","ucode":"F5FEAC07D562E0","user_header":"https://static001.geekbang.org/account/avatar/00/28/47/6c/78184d19.jpg","comment_is_top":false,"comment_ctime":1622767396,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":1,"score":5,"product_id":100032301,"comment_content":"硬盘和内存中，以字节或者4k等更大的粒度读取数据；而网络中传输是bit by bit... 自然要让byte中的每一位都排好队啦，而且不许插队😂不知道我猜的对不对？","like_count":0},{"had_liked":false,"id":296034,"user_name":"LQS  KF","can_delete":false,"product_type":"c1","uid":1364737,"ip_address":"","ucode":"3C0A07A8220094","user_header":"https://static001.geekbang.org/account/avatar/00/14/d3/01/716d45b6.jpg","comment_is_top":false,"comment_ctime":1622711111,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"为了跨主机操作平台。各个pc操作平台的内存分布可能不一致。","like_count":0},{"had_liked":false,"id":291599,"user_name":"凯文小猪","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1620378555,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"实际上可以比较常见的网络传输四层模型（这里就不用OSI七层模型了 因为它不是事实上的标准）。应用层的数据是无法在网线中传输的 相反直接给出一堆0101的比特流 机器、代码、人都无法识别。这就需要两两之间相互转化 所以就引申出了序列化&#47;反序列化技术。不过老师忘记说了安全性问题 这个实际上是我们选型的第一考量 如果代码上线 公司有大量资损 这个方案也就直接被否了","like_count":0},{"had_liked":false,"id":289000,"user_name":"良记","can_delete":false,"product_type":"c1","uid":1033503,"ip_address":"","ucode":"F78CC56BB32D8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/1f/8e9ee163.jpg","comment_is_top":false,"comment_ctime":1618815558,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"最后这个问题很有意思，以前完全没有想过。","like_count":0},{"had_liked":false,"id":284902,"user_name":"不似旧日","can_delete":false,"product_type":"c1","uid":1161271,"ip_address":"","ucode":"DF4C5E3AB9570C","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","comment_is_top":false,"comment_ctime":1616516698,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"学到了，序列化是按照一定规则序列化成byte (java object -&gt; json,java object -&gt; xml)\n反序列化是还原。","like_count":0},{"had_liked":false,"id":267932,"user_name":"渠梁","can_delete":false,"product_type":"c1","uid":1488038,"ip_address":"","ucode":"DC86BDEC63C9BC","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/a6/b6fa2562.jpg","comment_is_top":false,"comment_ctime":1607999357,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"请问http是通过json序列化的吗；如果是那么json序列化后是json串，不是0,1啊，为什么可以在网络传输","like_count":0},{"had_liked":false,"id":222850,"user_name":"Yayu","can_delete":false,"product_type":"c1","uid":1058015,"ip_address":"","ucode":"5E7842458D8229","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","comment_is_top":false,"comment_ctime":1590930468,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"我对文末问题理解是：计算机存储的数据本质是二进制比特，但是每种文件的规格不一样，要想传输一份数据，必须让发送方和接收方约定好统一的操作规格。而特定的序列化协议就是前面说的规格。","like_count":0},{"had_liked":false,"id":218753,"user_name":"贺宇","can_delete":false,"product_type":"c1","uid":1445040,"ip_address":"","ucode":"55854825CC4AD2","user_header":"https://static001.geekbang.org/account/avatar/00/16/0c/b0/26c0e53f.jpg","comment_is_top":false,"comment_ctime":1589867159,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"本地内存中的东西就像docx文件，而对面接受的程序却不一定是word","like_count":0},{"had_liked":false,"id":197420,"user_name":"akatski","can_delete":false,"product_type":"c1","uid":1629459,"ip_address":"","ucode":"60B5B74AC0AE05","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKf9u3sCOuqRVKEjSw6PDqic6msToE3MUeObPz2G6ibunicwxZ4fUZPgtI9gepI6s0nv3KFViatB4JyLQ/132","comment_is_top":false,"comment_ctime":1585376154,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"老师好，对于思考题，我之前的方法是这样的，object的memory layout, padding依赖具体实现，可以用C struct或者C++的POD加packed唯一确定layout和size，通过header共享给其它组件，其它组件或者通过调用dll或者自己根据header自己解析收到的bytes。但我理解里protobuf或者thrift还加了自己的压缩机制，效率可能更高，不知道是不是这样？","like_count":0,"discussions":[{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552842,"discussion_content":"应该是还有一层二进制序列化，只不过不需要在语言层面做【程序员不需要关心】。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645610883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":312231,"user_name":"宙斯","can_delete":false,"product_type":"c1","uid":2041396,"ip_address":"","ucode":"80DF36BAD298AD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg","comment_is_top":false,"comment_ctime":1631695297,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"问题：在内存里存放的任何数据，它最基础的存储单元也是二进制比特，也就是说，我们应用程序操作的对象，它在内存中也是使用二进制存储的，既然都是二进制，为什么不能直接把内存中，对象对应的二进制数据直接通过网络发送出去，或者保存在文件中呢？为什么还需要序列化和反序列化呢？\n回答：二进制方式没法区分哪个是哪个程序哪个对象的，需要处理做数据处理，处理过程就需要读出来写入再发送了。","like_count":0},{"had_liked":false,"id":296110,"user_name":"非洲黑猴子","can_delete":false,"product_type":"c1","uid":2639724,"ip_address":"","ucode":"F5FEAC07D562E0","user_header":"https://static001.geekbang.org/account/avatar/00/28/47/6c/78184d19.jpg","comment_is_top":false,"comment_ctime":1622767396,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":1,"score":5,"product_id":100032301,"comment_content":"硬盘和内存中，以字节或者4k等更大的粒度读取数据；而网络中传输是bit by bit... 自然要让byte中的每一位都排好队啦，而且不许插队😂不知道我猜的对不对？","like_count":0},{"had_liked":false,"id":296034,"user_name":"LQS  KF","can_delete":false,"product_type":"c1","uid":1364737,"ip_address":"","ucode":"3C0A07A8220094","user_header":"https://static001.geekbang.org/account/avatar/00/14/d3/01/716d45b6.jpg","comment_is_top":false,"comment_ctime":1622711111,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"为了跨主机操作平台。各个pc操作平台的内存分布可能不一致。","like_count":0},{"had_liked":false,"id":291599,"user_name":"凯文小猪","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1620378555,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"实际上可以比较常见的网络传输四层模型（这里就不用OSI七层模型了 因为它不是事实上的标准）。应用层的数据是无法在网线中传输的 相反直接给出一堆0101的比特流 机器、代码、人都无法识别。这就需要两两之间相互转化 所以就引申出了序列化&#47;反序列化技术。不过老师忘记说了安全性问题 这个实际上是我们选型的第一考量 如果代码上线 公司有大量资损 这个方案也就直接被否了","like_count":0},{"had_liked":false,"id":289000,"user_name":"良记","can_delete":false,"product_type":"c1","uid":1033503,"ip_address":"","ucode":"F78CC56BB32D8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/1f/8e9ee163.jpg","comment_is_top":false,"comment_ctime":1618815558,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"最后这个问题很有意思，以前完全没有想过。","like_count":0},{"had_liked":false,"id":284902,"user_name":"不似旧日","can_delete":false,"product_type":"c1","uid":1161271,"ip_address":"","ucode":"DF4C5E3AB9570C","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","comment_is_top":false,"comment_ctime":1616516698,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"学到了，序列化是按照一定规则序列化成byte (java object -&gt; json,java object -&gt; xml)\n反序列化是还原。","like_count":0},{"had_liked":false,"id":267932,"user_name":"渠梁","can_delete":false,"product_type":"c1","uid":1488038,"ip_address":"","ucode":"DC86BDEC63C9BC","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/a6/b6fa2562.jpg","comment_is_top":false,"comment_ctime":1607999357,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"请问http是通过json序列化的吗；如果是那么json序列化后是json串，不是0,1啊，为什么可以在网络传输","like_count":0,"discussions":[{"author":{"id":1592279,"avatar":"https://static001.geekbang.org/account/avatar/00/18/4b/d7/f46c6dfd.jpg","nickname":"William Ning","note":"","ucode":"4DB8D05E69E5F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552842,"discussion_content":"应该是还有一层二进制序列化，只不过不需要在语言层面做【程序员不需要关心】。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645610883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222850,"user_name":"Yayu","can_delete":false,"product_type":"c1","uid":1058015,"ip_address":"","ucode":"5E7842458D8229","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/df/645f8087.jpg","comment_is_top":false,"comment_ctime":1590930468,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"我对文末问题理解是：计算机存储的数据本质是二进制比特，但是每种文件的规格不一样，要想传输一份数据，必须让发送方和接收方约定好统一的操作规格。而特定的序列化协议就是前面说的规格。","like_count":0},{"had_liked":false,"id":218753,"user_name":"贺宇","can_delete":false,"product_type":"c1","uid":1445040,"ip_address":"","ucode":"55854825CC4AD2","user_header":"https://static001.geekbang.org/account/avatar/00/16/0c/b0/26c0e53f.jpg","comment_is_top":false,"comment_ctime":1589867159,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"本地内存中的东西就像docx文件，而对面接受的程序却不一定是word","like_count":0},{"had_liked":false,"id":197420,"user_name":"akatski","can_delete":false,"product_type":"c1","uid":1629459,"ip_address":"","ucode":"60B5B74AC0AE05","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKf9u3sCOuqRVKEjSw6PDqic6msToE3MUeObPz2G6ibunicwxZ4fUZPgtI9gepI6s0nv3KFViatB4JyLQ/132","comment_is_top":false,"comment_ctime":1585376154,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"老师好，对于思考题，我之前的方法是这样的，object的memory layout, padding依赖具体实现，可以用C struct或者C++的POD加packed唯一确定layout和size，通过header共享给其它组件，其它组件或者通过调用dll或者自己根据header自己解析收到的bytes。但我理解里protobuf或者thrift还加了自己的压缩机制，效率可能更高，不知道是不是这样？","like_count":0},{"had_liked":false,"id":155923,"user_name":"Kylin","can_delete":false,"product_type":"c1","uid":1058304,"ip_address":"","ucode":"4D0B2FD56AACEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/26/00/7d9a9f6a.jpg","comment_is_top":false,"comment_ctime":1574778802,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"\n03   | 08 7a 68 61 6e 67 73 61 6e | 17 | 01\nUser |    z  h  a  n  g  s  a  n  | 23 | true\n类似erlang的序列化方式","like_count":0},{"had_liked":false,"id":133720,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1568641023,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"不知道是什么类型的数据，每个程序对字段的解析规则都不一样。二进制解析都需要自定义好协议后才可以解析的，比如协议头编码格式等等都不一样。","like_count":0},{"had_liked":false,"id":126531,"user_name":"毛露","can_delete":false,"product_type":"c1","uid":1014373,"ip_address":"","ucode":"3FCA43A6C06A40","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/65/9baae043.jpg","comment_is_top":false,"comment_ctime":1566401971,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"想到了tcp报文。。","like_count":0},{"had_liked":false,"id":126114,"user_name":"青莲","can_delete":false,"product_type":"c1","uid":1181787,"ip_address":"","ucode":"6BA5D5D47DE38E","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/5b/2a342424.jpg","comment_is_top":false,"comment_ctime":1566315026,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"序列化和反序列化前提条件是，以什么样的格式或约定的协议对内容进行解析，内存中的二进制具有特定语方的协议，只在当前运行的应用环境有效；","like_count":0},{"had_liked":false,"id":125711,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1566229609,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"内存中的对象并不是独立存在的，他们会有各种引用关系，直接存储的话，可能存储的很多都是内存地址吧","like_count":0},{"had_liked":false,"id":125692,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1566227072,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"       打卡：没太想明白，不过问题记在大脑里总归会想出点东西。","like_count":0},{"had_liked":false,"id":125349,"user_name":"ヾ(◍°∇°◍)ﾉﾞ","can_delete":false,"product_type":"c1","uid":1044175,"ip_address":"","ucode":"89545632BDA56E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOBwR7MCVqwZbPA5RQ2mjUjd571jUXUcBCE7lY5vSMibWn8D5S4PzDZMaAhRPdnRBqYbVOBTJibhJg/132","comment_is_top":false,"comment_ctime":1566172790,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"内存数据要搭配元数据定义，这个定义在不同语言平台等兼容非常难通用。拿内存本身也不是特别容易的事情","like_count":0},{"had_liked":false,"id":125251,"user_name":"whhbbq","can_delete":false,"product_type":"c1","uid":1018494,"ip_address":"","ucode":"4A93F3E375CB44","user_header":"","comment_is_top":false,"comment_ctime":1566131439,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"服务端和客户端可能是不同平台，同样的数据在内存中的二进制比特是不一样的。通过序列化和反序列化实现系统通信的跨平台。","like_count":0},{"had_liked":false,"id":125208,"user_name":"A9","can_delete":false,"product_type":"c1","uid":1053211,"ip_address":"","ucode":"76D07F8EBE8DD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/1b/f62722ca.jpg","comment_is_top":false,"comment_ctime":1566119433,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"即使只传输数据的内存结构，对于不同版本的代码，每种编程语言的不同版本，不同语言，都会导致兼容问题。序列化处理可以避开这些问题，保证程序的长期稳定运行，也符合中间件的使用方式","like_count":0},{"had_liked":false,"id":125107,"user_name":"羽球","can_delete":false,"product_type":"c1","uid":1015015,"ip_address":"","ucode":"FC6E750828ABAB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/e7/65d06580.jpg","comment_is_top":false,"comment_ctime":1566088812,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"本地应用通过基地址+偏移量的方式访问内存中的成员变量，因为它知道偏移量代表什么。\n通过网络发给对方的话，对方并不知道偏移量代表什么，所以无法解析。","like_count":0},{"had_liked":false,"id":155923,"user_name":"Kylin","can_delete":false,"product_type":"c1","uid":1058304,"ip_address":"","ucode":"4D0B2FD56AACEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/26/00/7d9a9f6a.jpg","comment_is_top":false,"comment_ctime":1574778802,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"\n03   | 08 7a 68 61 6e 67 73 61 6e | 17 | 01\nUser |    z  h  a  n  g  s  a  n  | 23 | true\n类似erlang的序列化方式","like_count":0},{"had_liked":false,"id":133720,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1568641023,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"不知道是什么类型的数据，每个程序对字段的解析规则都不一样。二进制解析都需要自定义好协议后才可以解析的，比如协议头编码格式等等都不一样。","like_count":0},{"had_liked":false,"id":126531,"user_name":"毛露","can_delete":false,"product_type":"c1","uid":1014373,"ip_address":"","ucode":"3FCA43A6C06A40","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/65/9baae043.jpg","comment_is_top":false,"comment_ctime":1566401971,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"想到了tcp报文。。","like_count":0},{"had_liked":false,"id":126114,"user_name":"青莲","can_delete":false,"product_type":"c1","uid":1181787,"ip_address":"","ucode":"6BA5D5D47DE38E","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/5b/2a342424.jpg","comment_is_top":false,"comment_ctime":1566315026,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"序列化和反序列化前提条件是，以什么样的格式或约定的协议对内容进行解析，内存中的二进制具有特定语方的协议，只在当前运行的应用环境有效；","like_count":0},{"had_liked":false,"id":125711,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1566229609,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"内存中的对象并不是独立存在的，他们会有各种引用关系，直接存储的话，可能存储的很多都是内存地址吧","like_count":0},{"had_liked":false,"id":125692,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1566227072,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"       打卡：没太想明白，不过问题记在大脑里总归会想出点东西。","like_count":0},{"had_liked":false,"id":125349,"user_name":"ヾ(◍°∇°◍)ﾉﾞ","can_delete":false,"product_type":"c1","uid":1044175,"ip_address":"","ucode":"89545632BDA56E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOBwR7MCVqwZbPA5RQ2mjUjd571jUXUcBCE7lY5vSMibWn8D5S4PzDZMaAhRPdnRBqYbVOBTJibhJg/132","comment_is_top":false,"comment_ctime":1566172790,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"内存数据要搭配元数据定义，这个定义在不同语言平台等兼容非常难通用。拿内存本身也不是特别容易的事情","like_count":0},{"had_liked":false,"id":125251,"user_name":"whhbbq","can_delete":false,"product_type":"c1","uid":1018494,"ip_address":"","ucode":"4A93F3E375CB44","user_header":"","comment_is_top":false,"comment_ctime":1566131439,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"服务端和客户端可能是不同平台，同样的数据在内存中的二进制比特是不一样的。通过序列化和反序列化实现系统通信的跨平台。","like_count":0},{"had_liked":false,"id":125208,"user_name":"A9","can_delete":false,"product_type":"c1","uid":1053211,"ip_address":"","ucode":"76D07F8EBE8DD0","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/1b/f62722ca.jpg","comment_is_top":false,"comment_ctime":1566119433,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"即使只传输数据的内存结构，对于不同版本的代码，每种编程语言的不同版本，不同语言，都会导致兼容问题。序列化处理可以避开这些问题，保证程序的长期稳定运行，也符合中间件的使用方式","like_count":0},{"had_liked":false,"id":125107,"user_name":"羽球","can_delete":false,"product_type":"c1","uid":1015015,"ip_address":"","ucode":"FC6E750828ABAB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/e7/65d06580.jpg","comment_is_top":false,"comment_ctime":1566088812,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100032301,"comment_content":"本地应用通过基地址+偏移量的方式访问内存中的成员变量，因为它知道偏移量代表什么。\n通过网络发给对方的话，对方并不知道偏移量代表什么，所以无法解析。","like_count":0},{"had_liked":false,"id":125099,"user_name":"Jian","can_delete":false,"product_type":"c1","uid":1023040,"ip_address":"","ucode":"358133EC2AFEB0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/40/6323850e.jpg","comment_is_top":false,"comment_ctime":1566081927,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"本机的操作系统或虚拟机管理着存于内存中的数据。\n通过网络传输或是文件转存的方式，其目的是给下一个系统使用，那么这里就需要一个协议完成两个系统的数据交换。\n内存中的数据基本是瞬时态，如果只是传送内存中的部分数据话，数据如何存储呢？数据属性可能是分布在内存中的非连续地址，属性中间的非目标数据该如何处理？具体该如何传输呢？\n举个例子，系统A的内存中存储着所有的汉子，我跟系统A说，”请给我三百首唐诗“，结果我收到的是几千个散列的汉字。。。\n（不知道这个例子是否恰当）","like_count":0},{"had_liked":false,"id":125064,"user_name":"张学磊","can_delete":false,"product_type":"c1","uid":1250029,"ip_address":"","ucode":"F545F384A6F1E1","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotSSnZic41tGkbflx0ogIg3ia6g2muFY1hCgosL2t3icZm7I8Ax1hcv1jNgr6vrZ53dpBuGhaoc6DKg/132","comment_is_top":false,"comment_ctime":1566053424,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"举一个例子，如果直接取LinkedList在内中的字节流作为序列化结果，那么只能包含一个头节点和一个子节点，必须使用LinkedList自己实现的writeObject方法进行序列化","like_count":0},{"had_liked":false,"id":124895,"user_name":"石维康","can_delete":false,"product_type":"c1","uid":1067564,"ip_address":"","ucode":"E39ED8416B2C01","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/2c/f8451d77.jpg","comment_is_top":false,"comment_ctime":1566010493,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"还有一个因素是每台机器的大小端可能不同，会对内存中的数据有不同的解释。","like_count":0},{"had_liked":false,"id":124879,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1566007152,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"一直对序列化反序列化的概念很含糊，今天有了进步，公司用的就是专用的序列化实现，有时候需要通过约定好的文档去查看每一位的意义。当然也学到了这种专用的实现的代价。","like_count":0},{"had_liked":false,"id":124839,"user_name":"马成","can_delete":false,"product_type":"c1","uid":1486895,"ip_address":"","ucode":"664F2BAA2E0F0B","user_header":"https://static001.geekbang.org/account/avatar/00/16/b0/2f/e2096905.jpg","comment_is_top":false,"comment_ctime":1566004751,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"因为内存里的对象不是一串连续的字节流，而是通过地址相互引用，比如map，其值是一个地址，表示值在哪里，而不是值本身","like_count":0},{"had_liked":false,"id":124785,"user_name":"努力奋斗的Pisces","can_delete":false,"product_type":"c1","uid":1336441,"ip_address":"","ucode":"AD4F8909CF190A","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/79/f1e1ca76.jpg","comment_is_top":false,"comment_ctime":1565974079,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"不太清楚存储的过程，但是传输或者存储更应该考虑到编码译码的问题，可能带便","like_count":0},{"had_liked":false,"id":124784,"user_name":"飞翔","can_delete":false,"product_type":"c1","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1565973478,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"最后真是个好问题 就是不知道答案 我还以为在内存中存的是对象呢， 如果内存中存的是二进制 那谁吧二进制换成对象的？","like_count":0},{"had_liked":false,"id":125099,"user_name":"Jian","can_delete":false,"product_type":"c1","uid":1023040,"ip_address":"","ucode":"358133EC2AFEB0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/40/6323850e.jpg","comment_is_top":false,"comment_ctime":1566081927,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"本机的操作系统或虚拟机管理着存于内存中的数据。\n通过网络传输或是文件转存的方式，其目的是给下一个系统使用，那么这里就需要一个协议完成两个系统的数据交换。\n内存中的数据基本是瞬时态，如果只是传送内存中的部分数据话，数据如何存储呢？数据属性可能是分布在内存中的非连续地址，属性中间的非目标数据该如何处理？具体该如何传输呢？\n举个例子，系统A的内存中存储着所有的汉子，我跟系统A说，”请给我三百首唐诗“，结果我收到的是几千个散列的汉字。。。\n（不知道这个例子是否恰当）","like_count":0},{"had_liked":false,"id":125064,"user_name":"张学磊","can_delete":false,"product_type":"c1","uid":1250029,"ip_address":"","ucode":"F545F384A6F1E1","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotSSnZic41tGkbflx0ogIg3ia6g2muFY1hCgosL2t3icZm7I8Ax1hcv1jNgr6vrZ53dpBuGhaoc6DKg/132","comment_is_top":false,"comment_ctime":1566053424,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"举一个例子，如果直接取LinkedList在内中的字节流作为序列化结果，那么只能包含一个头节点和一个子节点，必须使用LinkedList自己实现的writeObject方法进行序列化","like_count":0},{"had_liked":false,"id":124895,"user_name":"石维康","can_delete":false,"product_type":"c1","uid":1067564,"ip_address":"","ucode":"E39ED8416B2C01","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/2c/f8451d77.jpg","comment_is_top":false,"comment_ctime":1566010493,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"还有一个因素是每台机器的大小端可能不同，会对内存中的数据有不同的解释。","like_count":0},{"had_liked":false,"id":124879,"user_name":"张三","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1566007152,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"一直对序列化反序列化的概念很含糊，今天有了进步，公司用的就是专用的序列化实现，有时候需要通过约定好的文档去查看每一位的意义。当然也学到了这种专用的实现的代价。","like_count":0},{"had_liked":false,"id":124839,"user_name":"马成","can_delete":false,"product_type":"c1","uid":1486895,"ip_address":"","ucode":"664F2BAA2E0F0B","user_header":"https://static001.geekbang.org/account/avatar/00/16/b0/2f/e2096905.jpg","comment_is_top":false,"comment_ctime":1566004751,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"因为内存里的对象不是一串连续的字节流，而是通过地址相互引用，比如map，其值是一个地址，表示值在哪里，而不是值本身","like_count":0},{"had_liked":false,"id":124785,"user_name":"努力奋斗的Pisces","can_delete":false,"product_type":"c1","uid":1336441,"ip_address":"","ucode":"AD4F8909CF190A","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/79/f1e1ca76.jpg","comment_is_top":false,"comment_ctime":1565974079,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"不太清楚存储的过程，但是传输或者存储更应该考虑到编码译码的问题，可能带便","like_count":0},{"had_liked":false,"id":124784,"user_name":"飞翔","can_delete":false,"product_type":"c1","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1565973478,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":7,"product_id":100032301,"comment_content":"最后真是个好问题 就是不知道答案 我还以为在内存中存的是对象呢， 如果内存中存的是二进制 那谁吧二进制换成对象的？","like_count":0,"discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"奕","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5142,"discussion_content":"应用程序把数据从内存中取出来的时候就会把二进制数据转换成对象的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566006949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}