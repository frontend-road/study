{"id":2271,"title":"11 | 微服务 API 服务网关（二）开源网关 Zuul","content":"<p>无</p>\n","comments":[{"had_liked":false,"id":2380,"user_name":"LMD","can_delete":false,"product_type":"c3","uid":1013443,"ip_address":"","ucode":"7626FBB7A4E771","user_header":"","comment_is_top":true,"comment_ctime":1516964827,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"关于《微服务架构核心20讲》课程讲义（PDF 文件），学员可复制下面链接到浏览器下载获取。 http:&#47;&#47;t.cn&#47;RQs9iTw","like_count":9},{"had_liked":false,"id":16855,"user_name":"稻草","can_delete":false,"product_type":"c3","uid":1105348,"ip_address":"","ucode":"83441881B7F75F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLiaURkQOrwf1tjLEoUNmQ8Hia9rYPWuXib9cbz09qcD8hqfZeJCBickvveEt7QFnTn5obLoXgOzz9F9w/132","comment_is_top":false,"comment_ctime":1532256352,"is_pvip":false,"replies":[{"id":6171,"content":"技术上两者有点相似，但是gateway比esb更轻量，gateway基本上就是一个转发代理，一般不做较重的协议转换，传统esb一般里头有较重的转换逻辑；另外gateway一般处在微服务的边界上，企业内部服务一般可以采用直连，暴露出去的时候才需要通过gateway，gateway一般无状态，可以水平扩，另外gateway可以通过容错限流等手段保证高可用性，esb一般处在企业内部，是一个中心hub，所以有单点风险。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1532957463,"ip_address":"","comment_id":16855,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"网关和soa架构中的esb有什么区别？难道不是同样会造成整个平台性能瓶颈的痛点吗？希望解答，谢谢","like_count":9,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420948,"discussion_content":"技术上两者有点相似，但是gateway比esb更轻量，gateway基本上就是一个转发代理，一般不做较重的协议转换，传统esb一般里头有较重的转换逻辑；另外gateway一般处在微服务的边界上，企业内部服务一般可以采用直连，暴露出去的时候才需要通过gateway，gateway一般无状态，可以水平扩，另外gateway可以通过容错限流等手段保证高可用性，esb一般处在企业内部，是一个中心hub，所以有单点风险。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1532957463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132733,"user_name":"Geek_deb968","can_delete":false,"product_type":"c3","uid":1440025,"ip_address":"","ucode":"2305597B009AF3","user_header":"https://static001.geekbang.org/account/avatar/00/15/f9/19/7c3b12ee.jpg","comment_is_top":false,"comment_ctime":1568207889,"is_pvip":false,"replies":[{"id":50942,"content":"对，在工作中思考实践过，再学习课程效果会更好。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1568289667,"ip_address":"","comment_id":132733,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"半年后来看，发现讲得真好，半年前看不懂","like_count":5,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467095,"discussion_content":"对，在工作中思考实践过，再学习课程效果会更好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568289667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9885,"user_name":"barry","can_delete":false,"product_type":"c3","uid":1126657,"ip_address":"","ucode":"502297130784F4","user_header":"https://static001.geekbang.org/account/avatar/00/11/31/01/c143e4fd.jpg","comment_is_top":false,"comment_ctime":1527144163,"is_pvip":true,"replies":[{"id":4001,"content":"请参考我之前在聊聊架构公众号发表的文章《现代发布技术》https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;WdCM6cOmjdhAEa6PtviH9A","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1528645170,"ip_address":"","comment_id":9885,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"请问，灰度发布是如何做的？","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418241,"discussion_content":"请参考我之前在聊聊架构公众号发表的文章《现代发布技术》https://mp.weixin.qq.com/s/WdCM6cOmjdhAEa6PtviH9A","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528645170,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":3381,"user_name":"self-discipline","can_delete":false,"product_type":"c3","uid":1024457,"ip_address":"","ucode":"A5AEDCA9ACC68A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/c9/501a1d02.jpg","comment_is_top":false,"comment_ctime":1519289056,"is_pvip":false,"replies":[{"id":1375,"content":"可以做成动态刷新方式就不需要重启了，比如我之前公司在网关里头有个scheduler，定期去一个中央地址服务拉取最新地址信息。","user_name":"作者回复","user_name_real":"晨晖","uid":1000463,"ctime":1522821267,"ip_address":"","comment_id":3381,"utype":1}],"discussion_count":0,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"有个问题咨询下杨老师,我们现在的网关用zuul,使用spring cloud  技术框架,一旦某个单一服务重启了,必须跟着重启网关,不然网关找不到对应的服务,不知道您遇到过这个问题没有,自己如何解决这个问题,期待您的回复,谢谢","like_count":3},{"had_liked":false,"id":74343,"user_name":"春和景明","can_delete":false,"product_type":"c3","uid":1272482,"ip_address":"","ucode":"A27970A276ECD6","user_header":"https://static001.geekbang.org/account/avatar/00/13/6a/a2/f9efd9dc.jpg","comment_is_top":false,"comment_ctime":1552195569,"is_pvip":false,"replies":[{"id":27284,"content":"是，Gateway本质上也是一种反向代理，Zuul&#47;Nginx都可以实现，Nginx比较传统一点，用c&#47;lua写门槛高点，偏运维，Zuul则基于Java，对开发更友好，适合DevOps。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1552309749,"ip_address":"","comment_id":74343,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"感觉类似Nginx在处理HTTP请求的几个阶段的各个模块的作用。我们公司就是用Nginx做的Gateway","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442540,"discussion_content":"是，Gateway本质上也是一种反向代理，Zuul/Nginx都可以实现，Nginx比较传统一点，用c/lua写门槛高点，偏运维，Zuul则基于Java，对开发更友好，适合DevOps。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1552309749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":39977,"user_name":"Jowin","can_delete":false,"product_type":"c3","uid":1114356,"ip_address":"","ucode":"19017F7D06C22A","user_header":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","comment_is_top":false,"comment_ctime":1542426342,"is_pvip":false,"replies":[{"id":16611,"content":"不建议在网关上做RPC到HTTP转换（虽然可以这样做），建议开发适配服务（也叫聚合转换服务或BFF），在后台RPC和网关之间专门做转换聚合等适配工作。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1543930404,"ip_address":"","comment_id":39977,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"如果内部微服务之间使用RPC，出口是HTTP，在网关的地方必然要有一个转换逻辑，这个老师是怎么考虑的？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429314,"discussion_content":"不建议在网关上做RPC到HTTP转换（虽然可以这样做），建议开发适配服务（也叫聚合转换服务或BFF），在后台RPC和网关之间专门做转换聚合等适配工作。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543930404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1242712,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f6/58/fb449e95.jpg","nickname":"Rainie","note":"","ucode":"A2B77099E9205C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":630539,"discussion_content":"老师 想知道不建议这样做的原因是什么呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1698633704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":429314,"ip_address":"上海","group_id":0},"score":630539,"extra":""}]}]},{"had_liked":false,"id":39976,"user_name":"Jowin","can_delete":false,"product_type":"c3","uid":1114356,"ip_address":"","ucode":"19017F7D06C22A","user_header":"https://static001.geekbang.org/account/avatar/00/11/00/f4/cc5f0896.jpg","comment_is_top":false,"comment_ctime":1542426273,"is_pvip":false,"replies":[{"id":16612,"content":"网关可以集成负载均衡，比Zuul对接Eureka&#47;Ribbon实现软负载。如果内部服务使用集中式负载，比如nginx，则网关不需要负载均衡功能，可直接通过域名调服务，会间接通过nginx做负载均衡。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1543930633,"ip_address":"","comment_id":39976,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"老师有一个问题，假如一个微服务部署了多个实例，那网关必然要从多个服务实例中选择一个来进行服务调用，也就是必须要具备一点负载均衡的功能，这个是不能省掉的吧？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":429313,"discussion_content":"网关可以集成负载均衡，比Zuul对接Eureka/Ribbon实现软负载。如果内部服务使用集中式负载，比如nginx，则网关不需要负载均衡功能，可直接通过域名调服务，会间接通过nginx做负载均衡。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543930633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":7649,"user_name":"小喵喵","can_delete":false,"product_type":"c3","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1525606791,"is_pvip":false,"replies":[{"id":2326,"content":"网关是微服务基础设施，一般由企业框架团队负责维护，管路由，安全，监控等跨横功面功能，一般研发不直接接触","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1525874040,"ip_address":"","comment_id":7649,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"网关是干什么的？我完全不懂，和程序有什么关系呢？我平时写程序没有涉及网关。请指点一下谢谢","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417431,"discussion_content":"网关是微服务基础设施，一般由企业框架团队负责维护，管路由，安全，监控等跨横功面功能，一般研发不直接接触","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1525874040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5204,"user_name":"wang","can_delete":false,"product_type":"c3","uid":1082072,"ip_address":"","ucode":"1D7B5654EA2D71","user_header":"","comment_is_top":false,"comment_ctime":1522841010,"is_pvip":false,"replies":[{"id":1843,"content":"你的做法把聚合服务和网关做在一起了，建议网关独立不含聚合逻辑，只负责路由监控等逻辑，聚合服务单独一层躲在网关层后面，这样架构更清晰关注分离","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1524748932,"ip_address":"","comment_id":5204,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100003901,"comment_content":"您好，请教个问题。聚合服务和网关有什么联系么，比如可能一个公司内部可能会有多组服务，每组服务都有自己的网关，比如app端，一个请求要夸多组服务，是否需要提供一个聚合服务？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416635,"discussion_content":"你的做法把聚合服务和网关做在一起了，建议网关独立不含聚合逻辑，只负责路由监控等逻辑，聚合服务单独一层躲在网关层后面，这样架构更清晰关注分离","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1524748932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218463,"user_name":"我来也","can_delete":false,"product_type":"c3","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1589805104,"is_pvip":false,"replies":[{"id":80882,"content":"right.","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1589899068,"ip_address":"","comment_id":218463,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"爬虫过滤放在前置过滤中比较合适吧.\n避免了真正的远程调用的资源消耗.","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495468,"discussion_content":"right.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589899068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37805,"user_name":"庄周是我🐟","can_delete":false,"product_type":"c3","uid":1128751,"ip_address":"","ucode":"FCE868F0F1236E","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/2f/d7f9e2ef.jpg","comment_is_top":false,"comment_ctime":1541731922,"is_pvip":false,"replies":[{"id":13631,"content":"可关注我的《微服务架构实践160讲》，其中一个模块专门讲zuul网关实践。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1541766998,"ip_address":"","comment_id":37805,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"杨老师，zuul这块讲得再深入一点就好了，特别是如何优化，提高吞吐量这块","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428490,"discussion_content":"可关注我的《微服务架构实践160讲》，其中一个模块专门讲zuul网关实践。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541766998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":36407,"user_name":"enbo","can_delete":false,"product_type":"c3","uid":1256738,"ip_address":"","ucode":"5A6CABD52CE2C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/2d/22/5c3e953c.jpg","comment_is_top":false,"comment_ctime":1541084291,"is_pvip":false,"replies":[{"id":12992,"content":"要多参与项目实践加深理解，也可进一步学习我的视频课程《微服务架构和实践160讲》，既有理论也更偏重实践。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1541160540,"ip_address":"","comment_id":36407,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"理论感觉听得懂，但是实际操作却不清楚！有点小痛苦","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427853,"discussion_content":"要多参与项目实践加深理解，也可进一步学习我的视频课程《微服务架构和实践160讲》，既有理论也更偏重实践。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541160540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":15874,"user_name":"曾晓东","can_delete":false,"product_type":"c3","uid":1144149,"ip_address":"","ucode":"E6578B3CD552D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/75/55/d933c95e.jpg","comment_is_top":false,"comment_ctime":1531577623,"is_pvip":false,"replies":[{"id":5718,"content":"技术上ok，html页面应用也算一种BFF，实际要看企业具体技术和业务上下文。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1531973648,"ip_address":"","comment_id":15874,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"杨老师你好，我想提问一个问题：前端使用了SSR服务器端渲染生成html的方式，这个适合放到网关里面的BFF层实现吗？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420581,"discussion_content":"技术上ok，html页面应用也算一种BFF，实际要看企业具体技术和业务上下文。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531973648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":11549,"user_name":"米琴","can_delete":false,"product_type":"c3","uid":1138358,"ip_address":"","ucode":"7F7BCCF2E10CE2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/K3amnH6ccoYibM2p8SJQsMibP5QEZFZaNfGRALBDtrpPzufV1BQqtKOR7VSMibjUjbfKYbRB4FHOIo5uEPHoQ5ibXw/132","comment_is_top":false,"comment_ctime":1528196615,"is_pvip":false,"replies":[{"id":4000,"content":"《微服务架构实战160讲》会专门有一模块剖析eureka。eureka是开源的，问题实在搞不定，就拉原码到本地跟踪调试一把。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1528644914,"ip_address":"","comment_id":11549,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"杨老师有没有讲eureka的呀，今天遇到一个问题，eureka client 注册时，空指针，API网关是可以注册成功的，业务服务注册不成功。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418894,"discussion_content":"《微服务架构实战160讲》会专门有一模块剖析eureka。eureka是开源的，问题实在搞不定，就拉原码到本地跟踪调试一把。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528644914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9734,"user_name":"sayid","can_delete":false,"product_type":"c3","uid":1101465,"ip_address":"","ucode":"E40E0D86768DCA","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/99/4382727b.jpg","comment_is_top":false,"comment_ctime":1527051182,"is_pvip":false,"replies":[{"id":3056,"content":"谢谢支持🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1527163833,"ip_address":"","comment_id":9734,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"听到这一课才突然发现杨老师说话很有磁性啊 哈哈","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418184,"discussion_content":"谢谢支持🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527163833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9681,"user_name":"二康","can_delete":false,"product_type":"c3","uid":1097497,"ip_address":"","ucode":"45E85D80DE4544","user_header":"https://static001.geekbang.org/account/avatar/00/10/bf/19/24cc3e7c.jpg","comment_is_top":false,"comment_ctime":1527035645,"is_pvip":false,"replies":[{"id":3057,"content":"多谢支持🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1527163847,"ip_address":"","comment_id":9681,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"老师讲的很好","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418162,"discussion_content":"多谢支持🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527163847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8212,"user_name":"彡工鸟","can_delete":false,"product_type":"c3","uid":1108881,"ip_address":"","ucode":"37867BF7151F33","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/91/12612612.jpg","comment_is_top":false,"comment_ctime":1525968319,"is_pvip":false,"replies":[{"id":2427,"content":"不确定有没有参考iptable，但和职责键模式思路接近","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1526044567,"ip_address":"","comment_id":8212,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"这个设计基本是参照iptable来的吧","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417633,"discussion_content":"不确定有没有参考iptable，但和职责键模式思路接近","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526044567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":4049,"user_name":"快乐","can_delete":false,"product_type":"c3","uid":1045565,"ip_address":"","ucode":"B5A0FD8D5723CF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/3d/e3406ac4.jpg","comment_is_top":false,"comment_ctime":1521387939,"is_pvip":false,"replies":[{"id":1856,"content":"是的，同时要收集访问数据，做大数据分析，作为防爬虫决策依据","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1524750042,"ip_address":"","comment_id":4049,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"防爬虫过滤器放在前置过滤器是最合适的，如果检测出是爬虫行为，可以直接拒绝请求，而不会当做正常请求去处理，避免了后端服务的资源浪费","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416181,"discussion_content":"是的，同时要收集访问数据，做大数据分析，作为防爬虫决策依据","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1524750042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":2706,"user_name":"名贤集","can_delete":false,"product_type":"c3","uid":1033131,"ip_address":"","ucode":"220A754095BECE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c3/ab/c2ca35e6.jpg","comment_is_top":false,"comment_ctime":1518404085,"is_pvip":false,"replies":[{"id":3064,"content":"谢谢支持🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1527164175,"ip_address":"","comment_id":2706,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100003901,"comment_content":"J杨老师讲解的非常好","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":415821,"discussion_content":"谢谢支持🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527164175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216029,"user_name":"jun","can_delete":false,"product_type":"c3","uid":1899314,"ip_address":"","ucode":"3A9633CA1FE72E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/LalJD9ruYQI5zVM1GOCe4PjunIbbeeMiacFHC4TAj0DBVeialKt3vRCLs9dxn1vYXvfp8pgcyaeEQkh1nde1JoBQ/132","comment_is_top":false,"comment_ctime":1589171699,"is_pvip":false,"replies":[{"id":79982,"content":"对，到一定规模，建议关注分离，网关专注跨横切面功能(路由&#47;日志&#47;安全&#47;监控&#47;限流)等，业务逻辑放在后台聚合服务或者基础服务去做。\n\n当然，企业业务和团队规模较小时，也可以让网关承担一部分聚合层逻辑。所以这个职责划分只是一般指导原则，但不是绝对。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1589204991,"ip_address":"","comment_id":216029,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"网关层应该更关注通用的安全认证、日志监控，做到真正的门卫职责。而不应该把业务逻辑放在网关层。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494645,"discussion_content":"对，到一定规模，建议关注分离，网关专注跨横切面功能(路由/日志/安全/监控/限流)等，业务逻辑放在后台聚合服务或者基础服务去做。\n\n当然，企业业务和团队规模较小时，也可以让网关承担一部分聚合层逻辑。所以这个职责划分只是一般指导原则，但不是绝对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589204991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":7431,"user_name":"宁碧夏","can_delete":false,"product_type":"c3","uid":1116111,"ip_address":"","ucode":"7AA7D43F6047AA","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/cf/7f5ce6a6.jpg","comment_is_top":false,"comment_ctime":1525481662,"is_pvip":false,"replies":[{"id":2329,"content":"加油🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1525874361,"ip_address":"","comment_id":7431,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"受益匪浅","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417341,"discussion_content":"加油🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1525874361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":2232,"user_name":"lgtao","can_delete":false,"product_type":"c3","uid":1022718,"ip_address":"","ucode":"5854B3CBAC87CC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9a/fe/3e37a60e.jpg","comment_is_top":false,"comment_ctime":1516428247,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"每节课的思考题，老师是不是也给出你的意见呀！","like_count":36},{"had_liked":false,"id":39377,"user_name":"张闯","can_delete":false,"product_type":"c3","uid":1090513,"ip_address":"","ucode":"D5AD46A8DD6FB7","user_header":"https://static001.geekbang.org/account/avatar/00/10/a3/d1/a30a4d06.jpg","comment_is_top":false,"comment_ctime":1542259617,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"首先要识别爬虫请求。爬虫请求的特点有很多，比如单个IP在短时间内高频率地请求。\n在网关的pre-filter层对爬虫请求进行识别，拒绝请求，并创建IP黑名单。","like_count":9},{"had_liked":false,"id":2689,"user_name":"杨波","can_delete":false,"product_type":"c3","uid":1030344,"ip_address":"","ucode":"FA3418BB703BCA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","comment_is_top":false,"comment_ctime":1518355701,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"也有LB兼具Gateway功能，或者Gateway兼具LB功能做法，小网站可以这样做，建议网站到一定体量把两者分层布署","like_count":6},{"had_liked":false,"id":9970,"user_name":"wang","can_delete":false,"product_type":"c3","uid":1023191,"ip_address":"","ucode":"990C1FDACF9927","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9c/d7/9c4d1cb1.jpg","comment_is_top":false,"comment_ctime":1527207681,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"跟iptables 很像","like_count":3},{"had_liked":false,"id":2688,"user_name":"杨波","can_delete":false,"product_type":"c3","uid":1030344,"ip_address":"","ucode":"FA3418BB703BCA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","comment_is_top":false,"comment_ctime":1518355508,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"LB代表负载均衡，因为网关本身一般是无状态部署，可以部署多个，所以一般前置需要F5（硬件）或者LVS（软件）等负载均衡。网关Gateway主要负责一些跨横切面的逻辑（路由，安全，限流等），也可能包含LB逻辑，比如一种流行做法是网关（Zuul）+客户端软负载（Ribbon）配合服务注册中心（Eureka）实现对后端微服务的负载均衡调用。","like_count":3},{"had_liked":false,"id":200861,"user_name":"郭新鹏","can_delete":false,"product_type":"c3","uid":1154281,"ip_address":"","ucode":"F9D76691B335FC","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/e9/5ba8b1a3.jpg","comment_is_top":false,"comment_ctime":1585663638,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"爬虫过滤器，放在前置阶段，这个要有专门的团队来做这个事情，反爬虫。","like_count":1},{"had_liked":false,"id":191328,"user_name":"华仔","can_delete":false,"product_type":"c3","uid":1047435,"ip_address":"","ucode":"241962BCA71674","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/8b/a1feb0bf.jpg","comment_is_top":false,"comment_ctime":1584763798,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"杨老师很有亲和力","like_count":1},{"had_liked":false,"id":181039,"user_name":"钱","can_delete":false,"product_type":"c3","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1582465045,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100003901,"comment_content":"开源网关ZUUL，设计的很灵活，关注的少，听老师讲解感觉还好。\n有些类似SpringMVC的过滤器，功能类似，原理想通。","like_count":1},{"had_liked":false,"id":49058,"user_name":"探索无止境","can_delete":false,"product_type":"c3","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1544596196,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":5,"product_id":100003901,"comment_content":"老师你好，反爬虫程序可以写在前置过滤器上，但是有一个问题，现在大家都是用代理上网，假如我们监控到某个ip发起了恶意攻击，将这个ip列入黑名单，但会导致一片的无辜用户也无法正常访问，这个问题怎么办？如何可以更精确锁定到某个具体的用户？","like_count":1,"discussions":[{"author":{"id":1305921,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/41/4823e701.jpg","nickname":"蛙声一片","note":"","ucode":"856916A10D6097","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2113,"discussion_content":"X-Forwarded-for头部里有客户端ip啊","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1563266310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":2620,"user_name":"所长是我小李","can_delete":false,"product_type":"c3","uid":1023980,"ip_address":"","ucode":"0764C0BDC710F6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/ec/97c0f68c.jpg","comment_is_top":false,"comment_ctime":1518067862,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100003901,"comment_content":"老师您好，LB和Gateway有什么本质的区别呢？还是只是一个软件担任的角色不同？因为我在想如果要实现一个网关，或者实现一个LB，他们有许多功能是重叠的。比如他们都可以做反向代理，也可以限流，也可以做auth……不是太理解","like_count":1},{"had_liked":false,"id":2291,"user_name":"章洁","can_delete":false,"product_type":"c3","uid":1028624,"ip_address":"","ucode":"9009DC36CB4B9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/10/a6debd39.jpg","comment_is_top":false,"comment_ctime":1516682898,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100003901,"comment_content":"自己多思考，每个人答案不同","like_count":1},{"had_liked":false,"id":391809,"user_name":"丁丁历险记","can_delete":false,"product_type":"c3","uid":1661704,"ip_address":"广东","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1719140838,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100003901,"comment_content":"有用traefik 的同学没？  举下手","like_count":0},{"had_liked":false,"id":383178,"user_name":"Rainie","can_delete":false,"product_type":"c3","uid":1242712,"ip_address":"上海","ucode":"A2B77099E9205C","user_header":"https://static001.geekbang.org/account/avatar/00/12/f6/58/fb449e95.jpg","comment_is_top":false,"comment_ctime":1698633440,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100003901,"comment_content":"老师你好，请问servlet一般起到什么作用？","like_count":0},{"had_liked":false,"id":345751,"user_name":"jerry guo","can_delete":false,"product_type":"c3","uid":1267753,"ip_address":"","ucode":"179943AFCB93F8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo2GMhevabZrjINs2TKvIeGC7TJkicNlLvqTticuM5KL8ZN80OC2CnrsUyzPcZXO4uptj4Q1S4jT2lQ/132","comment_is_top":false,"comment_ctime":1652547906,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100003901,"comment_content":"一般内部服务（都在一个防火墙内）的服务间的调用会使用网关吗？会和外部调用使用的是一个网关吗？如果没有网关，如何实现限流，LB等功能呢","like_count":0},{"had_liked":false,"id":329280,"user_name":"凯文1985","can_delete":false,"product_type":"c3","uid":1036921,"ip_address":"","ucode":"9A42344649072B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d2/79/0a432fde.jpg","comment_is_top":false,"comment_ctime":1641266386,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100003901,"comment_content":"聚合服务一般按照Web，mobile分了不同的聚合服务，但是网关也需要吗 还是直接统一网关即可? ","like_count":0}]}