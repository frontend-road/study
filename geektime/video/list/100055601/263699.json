{"id":263699,"title":"20 | Selenium屏幕截图：实现屏幕截屏、按照日期时间格式保存图片","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Selenium\">https://gitee.com/geektime-geekbang/Selenium</a></p>","comments":[{"had_liked":false,"id":238478,"user_name":"GAC·DU","can_delete":false,"product_type":"c3","uid":1385403,"ip_address":"","ucode":"7847FBE1C13740","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/bb/a1a61f7c.jpg","comment_is_top":false,"comment_ctime":1596179210,"is_pvip":false,"replies":[{"id":88102,"content":"使用PhantomJS可以实现","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1596191866,"ip_address":"","comment_id":238478,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师如何截滚动屏？","like_count":2,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502764,"discussion_content":"使用PhantomJS可以实现","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596191866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":274847,"user_name":"简单丶灬","can_delete":false,"product_type":"c3","uid":1402200,"ip_address":"","ucode":"CD37BC6793D2A9","user_header":"https://static001.geekbang.org/account/avatar/00/15/65/58/c9a5352b.jpg","comment_is_top":false,"comment_ctime":1611194829,"is_pvip":false,"replies":[{"id":100064,"content":"看看 你的屏幕分辨率  我在后面视频里有介绍如何设置","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1611660216,"ip_address":"","comment_id":274847,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师我一样的代码，那个时间的部分的截屏就是不能产生效果 ，代码如下：\nfrom selenium import webdriver\nfrom time import sleep, strftime, time, localtime\nimport os\n\n\nclass TestCase(object):\n    def __init__(self):\n        self.driver = webdriver.Chrome()\n        self.driver.get(&#39;https:&#47;&#47;www.baidu.com&#39;)\n\n    def test1(self):\n        self.driver.find_element_by_id(&#39;kw&#39;).send_keys(&#39;selenium&#39;)\n        self.driver.find_element_by_id(&#39;su&#39;).click()\n        sleep(2)\n        # 第一种\n        # self.driver.save_screenshot(&#39;baidu.png&#39;)\n        # 第二种\n        st = strftime(&#39;%Y-%m-%d-%H:%M:%S&#39;, localtime(time()))\n        print(st)\n        file_name = st + &#39;.png&#39;\n        sleep(2)\n        self.driver.save_screenshot(file_name)\n        # 第三种\n        # st = strftime(&#39;%Y-%m-%d %H:%M:%S&#39;, localtime())\n        # file_name = st + &#39;.png&#39;\n        # path = os.path.abspath(&#39;screenshot&#39;)\n        # file_path = path + &#39;&#47;&#39; + file_name\n        # self.driver.get_screenshot_as_file(file_path)\n\n\nif __name__ == &#39;__main__&#39;:\n    case = TestCase()\n    case.test1()\n","like_count":1,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514143,"discussion_content":"看看 你的屏幕分辨率  我在后面视频里有介绍如何设置","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611660216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2917285,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/83/a5/cbe5f028.jpg","nickname":"别摸我的人鱼线","note":"","ucode":"A6A4F007DE0934","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":560614,"discussion_content":"老师，请问一下 第几章有讲到这个设置呢？我也遇到同样问题，请指导一下，谢谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649404425,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":514143,"ip_address":"","group_id":0},"score":560614,"extra":""}]},{"author":{"id":2889359,"avatar":"","nickname":"Geek_c55394","note":"","ucode":"63775F49FDEF71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585365,"discussion_content":"我猜测是因为文件名称不能带冒号","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661500494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2889359,"avatar":"","nickname":"Geek_c55394","note":"","ucode":"63775F49FDEF71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585362,"discussion_content":"应该是格式化时间这行写错了，改成这个试试st = strftime(&#34;%Y-%m-%d-%H-%M-%S&#34;, localtime(time()))","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661500100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2917285,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/83/a5/cbe5f028.jpg","nickname":"别摸我的人鱼线","note":"","ucode":"A6A4F007DE0934","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560607,"discussion_content":"请问你问题解决了吗？我遇到和你一样的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649403350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1165554,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c8/f2/c1dff942.jpg","nickname":"木头人","note":"","ucode":"0B2746334522A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352617,"discussion_content":"请问你问题解决了吗？我遇到和你一样的问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614780853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240943,"user_name":"笑","can_delete":false,"product_type":"c3","uid":2083086,"ip_address":"","ucode":"19428318ADCC57","user_header":"","comment_is_top":false,"comment_ctime":1597128853,"is_pvip":false,"replies":[{"id":89131,"content":"没有文档 查看官网 selenium.dev","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1597228077,"ip_address":"","comment_id":240943,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"下了课件源码，里面只有课件的pdf和demo，没有看到selenium的文档啊","like_count":1,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503601,"discussion_content":"没有文档 查看官网 selenium.dev","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597228077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237770,"user_name":"wudang","can_delete":false,"product_type":"c3","uid":1963470,"ip_address":"","ucode":"F8A641A17AE0FE","user_header":"","comment_is_top":false,"comment_ctime":1595948725,"is_pvip":false,"replies":[{"id":87856,"content":"错误 就加 try except 在异常里 截屏","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1595984570,"ip_address":"","comment_id":237770,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"当我们跑脚本遇到错误时如何判断截屏，后面的会讲到么？","like_count":1,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502531,"discussion_content":"错误 就加 try except 在异常里 截屏","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595984570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328524,"user_name":"Vayne","can_delete":false,"product_type":"c3","uid":2064984,"ip_address":"","ucode":"1CEDEA8E862525","user_header":"https://static001.geekbang.org/account/avatar/00/1f/82/58/edbba4b4.jpg","comment_is_top":false,"comment_ctime":1640762995,"is_pvip":false,"replies":[{"id":119814,"content":"就是前面有语法错误 修正了错误 提示就有了","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1640946197,"ip_address":"","comment_id":328524,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，我的pycharm ，输入top = self.driver.find_element_by_name(&#39;top&#39;)后，driver.find_element_by_name被划线了，而且接着在后面输入c，不自动联想click()了。","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543074,"discussion_content":"就是前面有语法错误 修正了错误 提示就有了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640946197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303451,"user_name":"loomz","can_delete":false,"product_type":"c3","uid":1066146,"ip_address":"","ucode":"32F35D3432ED5D","user_header":"https://static001.geekbang.org/account/avatar/00/10/44/a2/8000e268.jpg","comment_is_top":false,"comment_ctime":1626793806,"is_pvip":false,"replies":[{"id":111089,"content":"有在github上 看课程资料链接","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1628692201,"ip_address":"","comment_id":303451,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":" PTT、源码有共享吗","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523683,"discussion_content":"有在github上 看课程资料链接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628692201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292745,"user_name":"pat","can_delete":false,"product_type":"c3","uid":1115790,"ip_address":"","ucode":"C89570BF45F8E2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erYC10qj8SliaHlueoKNiaWNQtPYSTLxJ2iafWSuUkXLJ75EXVbGWwibC4GExuaoEDqW3icIqMr2RcsE6Q/132","comment_is_top":false,"comment_ctime":1620959258,"is_pvip":false,"replies":[{"id":107096,"content":"根据条件添加等待 ","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1622182824,"ip_address":"","comment_id":292745,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师有个问题哈，假设table标签里面的td标签有个title属性。我模拟鼠标移动上去。等到title显示出来。在截图 会发现截图上面没有title的显示效果","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519943,"discussion_content":"根据条件添加等待 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622182824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291570,"user_name":"Geek_b14ecf","can_delete":false,"product_type":"c3","uid":2448251,"ip_address":"","ucode":"C04C6B5796F4C3","user_header":"","comment_is_top":false,"comment_ctime":1620369396,"is_pvip":false,"replies":[{"id":107094,"content":"看看文件路径对不 是否可以找到","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1622182645,"ip_address":"","comment_id":291570,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，最后一步bo = self.driver.get_screenshot_as_file(file_path)，这里会返回false，代码是一样的","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519512,"discussion_content":"看看文件路径对不 是否可以找到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622182645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238628,"user_name":"Geek_c7af9c","can_delete":false,"product_type":"c3","uid":2065001,"ip_address":"","ucode":"7F384B44ED65DF","user_header":"https://static001.geekbang.org/account/avatar/00/1f/82/69/e4c1f431.jpg","comment_is_top":false,"comment_ctime":1596241856,"is_pvip":false,"replies":[{"id":88164,"content":"都在源码里哈","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1596278082,"ip_address":"","comment_id":238628,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师。中间看的那个selenium文档可以提供一下吗","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502807,"discussion_content":"都在源码里哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596278082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}