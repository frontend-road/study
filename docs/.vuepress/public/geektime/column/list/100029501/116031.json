{"id":116031,"title":"26ä¸¨ç´¢å¼•çš„ä½¿ç”¨åŸåˆ™ï¼šå¦‚ä½•é€šè¿‡ç´¢å¼•è®©SQLæŸ¥è¯¢æ•ˆç‡æœ€å¤§åŒ–ï¼Ÿ","content":"<p>æˆ‘ä¹‹å‰è®²äº†ç´¢å¼•çš„ä½¿ç”¨å’Œå®ƒçš„åº•å±‚åŸç†ï¼Œä»Šå¤©æˆ‘æ¥è®²ä¸€è®²ç´¢å¼•çš„ä½¿ç”¨åŸåˆ™ã€‚æ—¢ç„¶æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æå‡SQLçš„æŸ¥è¯¢æ•ˆç‡ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•é€šè¿‡ç´¢å¼•è®©æ•ˆç‡æœ€å¤§åŒ–å‘¢ï¼Ÿ</p><p>ä»Šå¤©çš„è¯¾ç¨‹ä¸»è¦åŒ…æ‹¬ä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol>\n<li>ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ç´¢å¼•ï¼Ÿå½“æˆ‘ä»¬è¿›è¡Œæ•°æ®è¡¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œéƒ½æœ‰å“ªäº›ç‰¹å¾éœ€è¦æˆ‘ä»¬åˆ›å»ºç´¢å¼•ï¼Ÿ</li>\n<li>ç´¢å¼•ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œç´¢å¼•è®¾è®¡çš„ä¸åˆç†å¯èƒ½ä¼šé˜»ç¢æ•°æ®åº“å’Œä¸šåŠ¡å¤„ç†çš„æ€§èƒ½ã€‚é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼Ÿ</li>\n<li>åˆ›å»ºäº†ç´¢å¼•ä¸ä¸€å®šä»£è¡¨ä¸€å®šç”¨å¾—ä¸Šï¼Œç”šè‡³åœ¨æœ‰äº›æƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆã€‚å“ªäº›æƒ…å†µä¸‹ï¼Œç´¢å¼•ä¼šå¤±æ•ˆå‘¢ï¼Ÿåˆè¯¥å¦‚ä½•é¿å…è¿™ä¸€æƒ…å†µï¼Ÿ</li>\n</ol><h2>åˆ›å»ºç´¢å¼•æœ‰å“ªäº›è§„å¾‹ï¼Ÿ</h2><p>åˆ›å»ºç´¢å¼•æœ‰ä¸€å®šçš„è§„å¾‹ã€‚å½“è¿™äº›è§„å¾‹å‡ºç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åˆ›å»ºç´¢å¼•æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ä»€ä¹ˆæƒ…å†µä¸‹å¯ä»¥åˆ›å»ºç´¢å¼•ï¼š</p><p><strong>1.å­—æ®µçš„æ•°å€¼æœ‰å”¯ä¸€æ€§çš„é™åˆ¶ï¼Œæ¯”å¦‚ç”¨æˆ·å</strong></p><p>ç´¢å¼•æœ¬èº«å¯ä»¥èµ·åˆ°çº¦æŸçš„ä½œç”¨ï¼Œæ¯”å¦‚å”¯ä¸€ç´¢å¼•ã€ä¸»é”®ç´¢å¼•éƒ½æ˜¯å¯ä»¥èµ·åˆ°å”¯ä¸€æ€§çº¦æŸçš„ï¼Œå› æ­¤åœ¨æˆ‘ä»¬çš„æ•°æ®è¡¨ä¸­ï¼Œå¦‚æœæŸä¸ªå­—æ®µæ˜¯å”¯ä¸€æ€§çš„ï¼Œå°±å¯ä»¥ç›´æ¥åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•ï¼Œæˆ–è€…ä¸»é”®ç´¢å¼•ã€‚</p><p><strong>2.é¢‘ç¹ä½œä¸ºWHEREæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µï¼Œå°¤å…¶åœ¨æ•°æ®è¡¨å¤§çš„æƒ…å†µä¸‹</strong></p><p>åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼ŒæŸä¸ªå­—æ®µåœ¨SQLæŸ¥è¯¢çš„WHEREæ¡ä»¶ä¸­ç»å¸¸è¢«ä½¿ç”¨åˆ°ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»™è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•äº†ã€‚åˆ›å»ºæ™®é€šç´¢å¼•å°±å¯ä»¥å¤§å¹…æå‡æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ã€‚</p><p>æˆ‘ä¹‹å‰åˆ—ä¸¾äº†product_commentæ•°æ®è¡¨ï¼Œè¿™å¼ æ•°æ®è¡¨ä¸­ä¸€å…±æœ‰100ä¸‡æ¡æ•°æ®ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢user_id=785110çš„ç”¨æˆ·å¯¹å•†å“çš„è¯„è®ºã€‚</p><!-- [[[read_end]]] --><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯¹user_idå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œè¿›è¡Œå¦‚ä¸‹æŸ¥è¯¢ï¼š</p><pre><code>SELECT comment_id, product_id, comment_text, comment_time, user_id FROM product_comment WHERE user_id = 785110\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3b/25/3b79db6d310ade55958199cc60f16525.png?wh=941*103\" alt=\"\"><br>\nè¿è¡Œæ—¶é—´ä¸º0.699sï¼Œä½ èƒ½çœ‹åˆ°æŸ¥è¯¢æ•ˆç‡è¿˜æ˜¯æ¯”è¾ƒä½çš„ã€‚å½“æˆ‘ä»¬å¯¹user_idå­—æ®µåˆ›å»ºç´¢å¼•ä¹‹åï¼Œè¿è¡Œæ—¶é—´ä¸º0.047sï¼Œä¸åˆ°åŸæ¥æŸ¥è¯¢æ—¶é—´çš„1/10ï¼Œæ•ˆç‡æå‡è¿˜æ˜¯æ˜æ˜¾çš„ã€‚</p><p><strong>3.éœ€è¦ç»å¸¸GROUP BYå’ŒORDER BYçš„åˆ—</strong></p><p>ç´¢å¼•å°±æ˜¯è®©æ•°æ®æŒ‰ç…§æŸç§é¡ºåºè¿›è¡Œå­˜å‚¨æˆ–æ£€ç´¢ï¼Œå› æ­¤å½“æˆ‘ä»¬ä½¿ç”¨GROUP BYå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„æŸ¥è¯¢ï¼Œæˆ–è€…ä½¿ç”¨ORDER BYå¯¹æ•°æ®è¿›è¡Œæ’åºçš„æ—¶å€™ï¼Œå°±éœ€è¦å¯¹åˆ†ç»„æˆ–è€…æ’åºçš„å­—æ®µè¿›è¡Œç´¢å¼•ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æŒ‰ç…§user_idå¯¹å•†å“è¯„è®ºæ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºä¸åŒçš„user_idå’Œå•†å“è¯„è®ºçš„æ•°é‡ï¼Œæ˜¾ç¤º100ä¸ªå³å¯ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä¸å¯¹user_idåˆ›å»ºç´¢å¼•ï¼Œæ‰§è¡Œä¸‹é¢çš„SQLè¯­å¥ï¼š</p><pre><code>SELECT user_id, count(*) as num FROM product_comment group by user_id limit 100\n</code></pre><p>è¿è¡Œç»“æœï¼ˆ100æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´1.666sï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/19/31/196f6848455aff7fe8b2a60b1fc81731.png?wh=434*245\" alt=\"\"><br>\nå¦‚æœæˆ‘ä»¬å¯¹user_idåˆ›å»ºç´¢å¼•ï¼Œå†æ‰§è¡ŒSQLè¯­å¥ï¼š</p><pre><code>SELECT user_id, count(*) as num FROM product_comment group by user_id limit 100\n</code></pre><p>è¿è¡Œç»“æœï¼ˆ100æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´0.042sï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/61/73/616c6c2dec1e700f80815e9bf34c5a73.png?wh=437*245\" alt=\"\"><br>\nä½ èƒ½çœ‹åˆ°å½“å¯¹user_idåˆ›å»ºç´¢å¼•åï¼Œå¾—åˆ°çš„ç»“æœä¸­user_idå­—æ®µçš„æ•°å€¼ä¹Ÿæ˜¯æŒ‰ç…§é¡ºåºå±•ç¤ºçš„ï¼Œè¿è¡Œæ—¶é—´å´ä¸åˆ°åŸæ¥æ—¶é—´çš„1/40ï¼Œæ•ˆç‡æå‡å¾ˆæ˜æ˜¾ã€‚</p><p>åŒæ ·ï¼Œå¦‚æœæ˜¯ORDER BYï¼Œä¹Ÿéœ€è¦å¯¹å­—æ®µåˆ›å»ºç´¢å¼•ã€‚æˆ‘ä»¬å†æ¥çœ‹ä¸‹åŒæ—¶æœ‰GROUP BYå’ŒORDER BYçš„æƒ…å†µã€‚æ¯”å¦‚æˆ‘ä»¬æŒ‰ç…§user_idè¿›è¡Œè¯„è®ºåˆ†ç»„ï¼ŒåŒæ—¶æŒ‰ç…§è¯„è®ºæ—¶é—´é™åºçš„æ–¹å¼è¿›è¡Œæ’åºï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦åŒæ—¶è¿›è¡ŒGROUP BYå’ŒORDER BYï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯éœ€è¦å•ç‹¬åˆ›å»ºuser_idçš„ç´¢å¼•å’Œcomment_timeçš„ç´¢å¼•å‘¢ï¼Ÿ</p><p>å½“æˆ‘ä»¬å¯¹user_idå’Œcomment_timeåˆ†åˆ«åˆ›å»ºç´¢å¼•ï¼Œæ‰§è¡Œä¸‹é¢çš„SQLæŸ¥è¯¢ï¼š</p><pre><code>SELECT user_id, count(*) as num FROM product_comment group by user_id order by comment_time desc limit 100\n</code></pre><p>è¿è¡Œç»“æœï¼ˆè¿è¡Œæ—¶é—´&gt;100sï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/f4/2ee78c19372613d84c4b10cf27037ef4.png?wh=472*247\" alt=\"\"><br>\nå®é™…ä¸Šå¤šä¸ªå•åˆ—ç´¢å¼•åœ¨å¤šæ¡ä»¶æŸ¥è¯¢æ—¶åªä¼šç”Ÿæ•ˆä¸€ä¸ªç´¢å¼•ï¼ˆMySQLä¼šé€‰æ‹©å…¶ä¸­ä¸€ä¸ªé™åˆ¶æœ€ä¸¥æ ¼çš„ä½œä¸ºç´¢å¼•ï¼‰ï¼Œæ‰€ä»¥åœ¨å¤šæ¡ä»¶è”åˆæŸ¥è¯¢çš„æ—¶å€™æœ€å¥½åˆ›å»ºè”åˆç´¢å¼•ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè”åˆç´¢å¼•(user_id, comment_time)ï¼Œå†æ¥çœ‹ä¸‹æŸ¥è¯¢çš„æ—¶é—´ï¼ŒæŸ¥è¯¢æ—¶é—´ä¸º0.775sï¼Œæ•ˆç‡æå‡äº†å¾ˆå¤šã€‚å¦‚æœæˆ‘ä»¬åˆ›å»ºè”åˆç´¢å¼•çš„é¡ºåºä¸º(comment_time, user_id)å‘¢ï¼Ÿè¿è¡Œæ—¶é—´ä¸º1.990sï¼ŒåŒæ ·æ¯”ä¸¤ä¸ªå•åˆ—ç´¢å¼•è¦å¿«ï¼Œä½†æ˜¯ä¼šæ¯”é¡ºåºä¸º(user_id, comment_time)çš„ç´¢å¼•è¦æ…¢ä¸€äº›ã€‚è¿™æ˜¯å› ä¸ºåœ¨è¿›è¡ŒSELECTæŸ¥è¯¢çš„æ—¶å€™ï¼Œå…ˆè¿›è¡ŒGROUP BYï¼Œå†å¯¹æ•°æ®è¿›è¡ŒORDER BYçš„æ“ä½œï¼Œæ‰€ä»¥æŒ‰ç…§è¿™ä¸ªè”åˆç´¢å¼•çš„é¡ºåºæ•ˆç‡æ˜¯æœ€é«˜çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/bd/5a/bd960478632418c1e99fc0915398425a.png?wh=699*227\" alt=\"\"><br>\n<strong>4.UPDATEã€DELETEçš„WHEREæ¡ä»¶åˆ—ï¼Œä¸€èˆ¬ä¹Ÿéœ€è¦åˆ›å»ºç´¢å¼•</strong></p><p>æˆ‘ä»¬åˆšæ‰è¯´çš„æ˜¯æ•°æ®æ£€ç´¢çš„æƒ…å†µã€‚é‚£ä¹ˆå½“æˆ‘ä»¬å¯¹æŸæ¡æ•°æ®è¿›è¡ŒUPDATEæˆ–è€…DELETEæ“ä½œçš„æ—¶å€™ï¼Œæ˜¯å¦ä¹Ÿéœ€è¦å¯¹WHEREçš„æ¡ä»¶åˆ—åˆ›å»ºç´¢å¼•å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å¯¹æ•°æ®è¿›è¡ŒUPDATEçš„æƒ…å†µã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦æŠŠcomment_textä¸º462eed7ac6e791292a79å¯¹åº”çš„product_idä¿®æ”¹ä¸º10002ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰å¯¹comment_textè¿›è¡Œç´¢å¼•çš„æ—¶å€™ï¼Œæ‰§è¡ŒSQLè¯­å¥ï¼š</p><pre><code>UPDATE product_comment SET product_id = 10002 WHERE comment_text = '462eed7ac6e791292a79'\n</code></pre><p>è¿è¡Œç»“æœä¸ºAffected rows: 1ï¼Œè¿è¡Œæ—¶é—´ä¸º1.173sã€‚</p><p>ä½ èƒ½çœ‹åˆ°æ•ˆç‡ä¸é«˜ï¼Œä½†å¦‚æœæˆ‘ä»¬å¯¹comment_textå­—æ®µåˆ›å»ºäº†ç´¢å¼•ï¼Œç„¶åå†æŠŠåˆšæ‰é‚£æ¡è®°å½•æ›´æ–°å›product_id=10001ï¼Œæ‰§è¡ŒSQLè¯­å¥ï¼š</p><pre><code>UPDATE product_comment SET product_id = 10001 WHERE comment_text = '462eed7ac6e791292a79'\n</code></pre><p>è¿è¡Œç»“æœä¸ºAffected rows: 1ï¼Œè¿è¡Œæ—¶é—´ä»…ä¸º0.1110sã€‚ä½ èƒ½çœ‹åˆ°è¿™ä¸ªè¿è¡Œæ—¶é—´æ˜¯ä¹‹å‰çš„1/10ï¼Œæ•ˆç‡æœ‰äº†å¤§å¹…çš„æå‡ã€‚</p><p>å¦‚æœæˆ‘ä»¬å¯¹æŸæ¡æ•°æ®è¿›è¡ŒDELETEï¼Œæ•ˆç‡å¦‚ä½•å‘¢ï¼Ÿ</p><p>æ¯”å¦‚æˆ‘ä»¬æƒ³åˆ é™¤comment_textä¸º462eed7ac6e791292a79çš„æ•°æ®ã€‚å½“æˆ‘ä»¬æ²¡æœ‰å¯¹comment_textå­—æ®µè¿›è¡Œç´¢å¼•çš„æ—¶å€™ï¼Œæ‰§è¡ŒSQLè¯­å¥ï¼š</p><pre><code>DELETE FROM product_comment WHERE comment_text = '462eed7ac6e791292a79'\n</code></pre><p>è¿è¡Œç»“æœä¸ºAffected rows: 1ï¼Œè¿è¡Œæ—¶é—´ä¸º1.027sï¼Œæ•ˆç‡ä¸é«˜ã€‚</p><p>å¦‚æœæˆ‘ä»¬å¯¹comment_textåˆ›å»ºäº†ç´¢å¼•ï¼Œå†æ¥æ‰§è¡Œè¿™æ¡SQLè¯­å¥ï¼Œè¿è¡Œæ—¶é—´ä¸º0.032sï¼Œæ—¶é—´æ˜¯åŸæ¥çš„1/32ï¼Œæ•ˆç‡æœ‰äº†å¤§å¹…çš„æå‡ã€‚</p><p>ä½ èƒ½çœ‹åˆ°ï¼Œå¯¹æ•°æ®æŒ‰ç…§æŸä¸ªæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢åå†è¿›è¡ŒUPDATEæˆ–DELETEçš„æ“ä½œï¼Œå¦‚æœå¯¹WHEREå­—æ®µåˆ›å»ºäº†ç´¢å¼•ï¼Œå°±èƒ½å¤§å¹…æå‡æ•ˆç‡ã€‚åŸç†æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦å…ˆæ ¹æ®WHEREæ¡ä»¶åˆ—æ£€ç´¢å‡ºæ¥è¿™æ¡è®°å½•ï¼Œç„¶åå†å¯¹å®ƒè¿›è¡Œæ›´æ–°æˆ–åˆ é™¤ã€‚å¦‚æœè¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œæ›´æ–°çš„å­—æ®µæ˜¯éç´¢å¼•å­—æ®µï¼Œæå‡çš„æ•ˆç‡ä¼šæ›´æ˜æ˜¾ï¼Œè¿™æ˜¯å› ä¸ºéç´¢å¼•å­—æ®µæ›´æ–°ä¸éœ€è¦å¯¹ç´¢å¼•è¿›è¡Œç»´æŠ¤ã€‚</p><p>ä¸è¿‡åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ³¨æ„å¹³è¡¡ï¼Œå¦‚æœç´¢å¼•å¤ªå¤šäº†ï¼Œåœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœæ¶‰åŠåˆ°ç´¢å¼•æ›´æ–°ï¼Œå°±ä¼šé€ æˆè´Ÿæ‹…ã€‚</p><p><strong>5.DISTINCTå­—æ®µéœ€è¦åˆ›å»ºç´¢å¼•</strong></p><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æŸä¸ªå­—æ®µè¿›è¡Œå»é‡ï¼Œä½¿ç”¨DISTINCTï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œä¹Ÿä¼šæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢å•†å“è¯„è®ºè¡¨ä¸­ä¸åŒçš„user_idéƒ½æœ‰å“ªäº›ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯¹user_idåˆ›å»ºç´¢å¼•ï¼Œæ‰§è¡ŒSQLè¯­å¥ï¼Œçœ‹çœ‹æƒ…å†µæ˜¯æ€æ ·çš„ã€‚</p><pre><code>SELECT DISTINCT(user_id) FROM `product_comment`\n</code></pre><p>è¿è¡Œç»“æœï¼ˆ600637æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´2.283sï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/38/d2/38f7685bc8befad4bb6e5c8d5c6f7ed2.png?wh=157*248\" alt=\"\"><br>\nå¦‚æœæˆ‘ä»¬å¯¹user_idåˆ›å»ºç´¢å¼•ï¼Œå†æ‰§è¡ŒSQLè¯­å¥ï¼Œçœ‹çœ‹æƒ…å†µåˆæ˜¯æ€æ ·çš„ã€‚</p><pre><code>SELECT DISTINCT(user_id) FROM `product_comment`\n</code></pre><p>è¿è¡Œç»“æœï¼ˆ600637æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´0.627sï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c2/5e/c2b42b9308735a141848c176294d0d5e.png?wh=162*245\" alt=\"\"><br>\nä½ èƒ½çœ‹åˆ°SQLæŸ¥è¯¢æ•ˆç‡æœ‰äº†æå‡ï¼ŒåŒæ—¶æ˜¾ç¤ºå‡ºæ¥çš„user_idè¿˜æ˜¯æŒ‰ç…§é€’å¢çš„é¡ºåºè¿›è¡Œå±•ç¤ºçš„ã€‚è¿™æ˜¯å› ä¸ºç´¢å¼•ä¼šå¯¹æ•°æ®æŒ‰ç…§æŸç§é¡ºåºè¿›è¡Œæ’åºï¼Œæ‰€ä»¥åœ¨å»é‡çš„æ—¶å€™ä¹Ÿä¼šå¿«å¾ˆå¤šã€‚</p><p><strong>6.åšå¤šè¡¨JOINè¿æ¥æ“ä½œæ—¶ï¼Œåˆ›å»ºç´¢å¼•éœ€è¦æ³¨æ„ä»¥ä¸‹çš„åŸåˆ™</strong></p><p>é¦–å…ˆï¼Œè¿æ¥è¡¨çš„æ•°é‡å°½é‡ä¸è¦è¶…è¿‡3å¼ ï¼Œå› ä¸ºæ¯å¢åŠ ä¸€å¼ è¡¨å°±ç›¸å½“äºå¢åŠ äº†ä¸€æ¬¡åµŒå¥—çš„å¾ªç¯ï¼Œæ•°é‡çº§å¢é•¿ä¼šéå¸¸å¿«ï¼Œä¸¥é‡å½±å“æŸ¥è¯¢çš„æ•ˆç‡ã€‚</p><p>å…¶æ¬¡ï¼Œå¯¹WHEREæ¡ä»¶åˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºWHEREæ‰æ˜¯å¯¹æ•°æ®æ¡ä»¶çš„è¿‡æ»¤ã€‚å¦‚æœåœ¨æ•°æ®é‡éå¸¸å¤§çš„æƒ…å†µä¸‹ï¼Œæ²¡æœ‰WHEREæ¡ä»¶è¿‡æ»¤æ˜¯éå¸¸å¯æ€•çš„ã€‚</p><p>æœ€åï¼Œå¯¹ç”¨äºè¿æ¥çš„å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå¹¶ä¸”è¯¥å­—æ®µåœ¨å¤šå¼ è¡¨ä¸­çš„ç±»å‹å¿…é¡»ä¸€è‡´ã€‚æ¯”å¦‚user_idåœ¨product_commentè¡¨å’Œuserè¡¨ä¸­éƒ½ä¸ºint(11)ç±»å‹ï¼Œè€Œä¸èƒ½ä¸€ä¸ªä¸ºintå¦ä¸€ä¸ªä¸ºvarcharç±»å‹ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬åªå¯¹user_idåˆ›å»ºç´¢å¼•ï¼Œæ‰§è¡ŒSQLè¯­å¥ï¼š</p><pre><code>SELECT comment_id, comment_text, product_comment.user_id, user_name FROM product_comment JOIN user ON product_comment.user_id = user.user_id\nWHERE comment_text = '462eed7ac6e791292a79'\n</code></pre><p>è¿è¡Œç»“æœï¼ˆ1æ¡æ•°æ®ï¼Œè¿è¡Œæ—¶é—´0.810sï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d8/13/d8d0804d09f264db7846209498ddb813.png?wh=845*107\" alt=\"\"><br>\nè¿™é‡Œæˆ‘ä»¬å¯¹comment_textåˆ›å»ºç´¢å¼•ï¼Œå†æ‰§è¡Œä¸Šé¢çš„SQLè¯­å¥ï¼Œè¿è¡Œæ—¶é—´ä¸º0.046sã€‚</p><p>å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨WHEREæ¡ä»¶æŸ¥è¯¢ï¼Œè€Œæ˜¯ç›´æ¥é‡‡ç”¨JOINâ€¦ONâ€¦è¿›è¡Œè¿æ¥çš„è¯ï¼Œå³ä½¿ä½¿ç”¨äº†å„ç§ä¼˜åŒ–æ‰‹æ®µï¼Œæ€»çš„è¿è¡Œæ—¶é—´ä¹Ÿä¼šå¾ˆé•¿ï¼ˆ&gt;100sï¼‰ã€‚</p><h2>ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦åˆ›å»ºç´¢å¼•</h2><p>æˆ‘ä¹‹å‰è®²åˆ°è¿‡ç´¢å¼•ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæœ‰ä¸€äº›æƒ…å†µæ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„ï¼Œè¿™é‡Œå†è¿›è¡Œä¸€ä¸‹è¯´æ˜ã€‚</p><p>WHEREæ¡ä»¶ï¼ˆåŒ…æ‹¬GROUP BYã€ORDER BYï¼‰é‡Œç”¨ä¸åˆ°çš„å­—æ®µä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼Œç´¢å¼•çš„ä»·å€¼æ˜¯å¿«é€Ÿå®šä½ï¼Œå¦‚æœèµ·ä¸åˆ°å®šä½çš„å­—æ®µé€šå¸¸æ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><pre><code>SELECT comment_id, product_id, comment_time FROM product_comment WHERE user_id = 41251\n</code></pre><p>å› ä¸ºæˆ‘ä»¬æ˜¯æŒ‰ç…§user_idæ¥è¿›è¡Œæ£€ç´¢çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦å¯¹å…¶ä»–å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå³ä½¿è¿™äº›å­—æ®µå‡ºç°åœ¨SELECTå­—æ®µä¸­ã€‚</p><p>ç¬¬äºŒç§æƒ…å†µæ˜¯ï¼Œå¦‚æœè¡¨è®°å½•å¤ªå°‘ï¼Œæ¯”å¦‚å°‘äº1000ä¸ªï¼Œé‚£ä¹ˆæ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„ã€‚æˆ‘ä¹‹å‰è®²è¿‡ä¸€ä¸ªSQLæŸ¥è¯¢çš„ä¾‹å­ï¼ˆç¬¬23ç¯‡ä¸­çš„herosæ•°æ®è¡¨æŸ¥è¯¢çš„ä¾‹å­ï¼Œä¸€å…±69ä¸ªè‹±é›„ä¸ç”¨ç´¢å¼•ä¹Ÿå¾ˆå¿«ï¼‰ï¼Œè¡¨è®°å½•å¤ªå°‘ï¼Œæ˜¯å¦åˆ›å»ºç´¢å¼•å¯¹æŸ¥è¯¢æ•ˆç‡çš„å½±å“å¹¶ä¸å¤§ã€‚</p><p>ç¬¬ä¸‰ç§æƒ…å†µæ˜¯ï¼Œå­—æ®µä¸­å¦‚æœæœ‰å¤§é‡é‡å¤æ•°æ®ï¼Œä¹Ÿä¸ç”¨åˆ›å»ºç´¢å¼•ï¼Œæ¯”å¦‚æ€§åˆ«å­—æ®µã€‚ä¸è¿‡æˆ‘ä»¬ä¹Ÿéœ€è¦æ ¹æ®å®é™…æƒ…å†µæ¥åšåˆ¤æ–­ï¼Œè¿™ä¸€ç‚¹æˆ‘åœ¨ä¹‹å‰çš„æ–‡ç« é‡Œå·²ç»è¿›è¡Œäº†è¯´æ˜ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><p>æœ€åä¸€ç§æƒ…å†µæ˜¯ï¼Œé¢‘ç¹æ›´æ–°çš„å­—æ®µä¸ä¸€å®šè¦åˆ›å»ºç´¢å¼•ã€‚å› ä¸ºæ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æ›´æ–°ç´¢å¼•ï¼Œå¦‚æœç´¢å¼•å¤ªå¤šï¼Œåœ¨æ›´æ–°ç´¢å¼•çš„æ—¶å€™ä¹Ÿä¼šé€ æˆè´Ÿæ‹…ï¼Œä»è€Œå½±å“æ•ˆç‡ã€‚</p><h2>ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•å¤±æ•ˆ</h2><p>æˆ‘ä»¬åˆ›å»ºäº†ç´¢å¼•ï¼Œè¿˜è¦é¿å…ç´¢å¼•å¤±æ•ˆï¼Œä½ å¯ä»¥å…ˆæ€è€ƒä¸‹éƒ½æœ‰å“ªäº›æƒ…å†µä¼šé€ æˆç´¢å¼•å¤±æ•ˆå‘¢ï¼Ÿä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„ç´¢å¼•å¤±æ•ˆçš„ä¾‹å­ï¼š</p><p><strong>1.å¦‚æœç´¢å¼•è¿›è¡Œäº†è¡¨è¾¾å¼è®¡ç®—ï¼Œåˆ™ä¼šå¤±æ•ˆ</strong></p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨EXPLAINå…³é”®å­—æ¥æŸ¥çœ‹MySQLä¸­ä¸€æ¡SQLè¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼Œæ¯”å¦‚ï¼š</p><pre><code>EXPLAIN SELECT comment_id, user_id, comment_text FROM product_comment WHERE comment_id+1 = 900001\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n| id | select_type | table           | partitions | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra       |\n+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n|  1 | SIMPLE      | product_comment | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 996663 |   100.00 | Using where |\n+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n</code></pre><p>ä½ èƒ½çœ‹åˆ°å¦‚æœå¯¹ç´¢å¼•è¿›è¡Œäº†è¡¨è¾¾å¼è®¡ç®—ï¼Œç´¢å¼•å°±å¤±æ•ˆäº†ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦æŠŠç´¢å¼•å­—æ®µçš„å–å€¼éƒ½å–å‡ºæ¥ï¼Œç„¶åä¾æ¬¡è¿›è¡Œè¡¨è¾¾å¼çš„è®¡ç®—æ¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå› æ­¤é‡‡ç”¨çš„å°±æ˜¯å…¨è¡¨æ‰«æçš„æ–¹å¼ï¼Œè¿è¡Œæ—¶é—´ä¹Ÿä¼šæ…¢å¾ˆå¤šï¼Œæœ€ç»ˆè¿è¡Œæ—¶é—´ä¸º2.538ç§’ã€‚</p><p>ä¸ºäº†é¿å…ç´¢å¼•å¤±æ•ˆï¼Œæˆ‘ä»¬å¯¹SQLè¿›è¡Œé‡å†™ï¼š</p><pre><code>SELECT comment_id, user_id, comment_text FROM product_comment WHERE comment_id = 900000\n</code></pre><p>è¿è¡Œæ—¶é—´ä¸º0.039ç§’ã€‚</p><p><strong>2.å¦‚æœå¯¹ç´¢å¼•ä½¿ç”¨å‡½æ•°ï¼Œä¹Ÿä¼šé€ æˆå¤±æ•ˆ</strong></p><p>æ¯”å¦‚æˆ‘ä»¬æƒ³è¦å¯¹comment_textçš„å‰ä¸‰ä½ä¸ºabcçš„å†…å®¹è¿›è¡Œæ¡ä»¶ç­›é€‰ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥æŸ¥çœ‹ä¸‹æ‰§è¡Œè®¡åˆ’ï¼š</p><pre><code>EXPLAIN SELECT comment_id, user_id, comment_text FROM product_comment WHERE SUBSTRING(comment_text, 1,3)='abc'\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n| id | select_type | table           | partitions | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra       |\n+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n|  1 | SIMPLE      | product_comment | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 996663 |   100.00 | Using where |\n+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n</code></pre><p>ä½ èƒ½çœ‹åˆ°å¯¹ç´¢å¼•å­—æ®µè¿›è¡Œå‡½æ•°æ“ä½œï¼Œé€ æˆäº†ç´¢å¼•å¤±æ•ˆï¼Œè¿™æ—¶å¯ä»¥è¿›è¡ŒæŸ¥è¯¢é‡å†™ï¼š</p><pre><code>SELECT comment_id, user_id, comment_text FROM product_comment WHERE comment_text LIKE 'abc%'\n</code></pre><p>ä½¿ç”¨EXPLAINå¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œåˆ†æï¼š</p><pre><code>+----+-------------+-----------------+------------+-------+---------------+--------------+---------+------+------+----------+-----------------------+\n| id | select_type | table           | partitions | type  | possible_keys | key          | key_len | ref  | rows | filtered | Extra                 |\n+----+-------------+-----------------+------------+-------+---------------+--------------+---------+------+------+----------+-----------------------+\n|  1 | SIMPLE      | product_comment | NULL       | range | comment_text  | comment_text | 767     | NULL |  213 |   100.00 | Using index condition |\n+----+-------------+-----------------+------------+-------+---------------+--------------+---------+------+------+----------+-----------------------+\n</code></pre><p>ä½ èƒ½çœ‹åˆ°ç»è¿‡æŸ¥è¯¢é‡å†™åï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•è¿›è¡ŒèŒƒå›´æ£€ç´¢ï¼Œä»è€Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p><p><strong>3.åœ¨WHEREå­å¥ä¸­ï¼Œå¦‚æœåœ¨ORå‰çš„æ¡ä»¶åˆ—è¿›è¡Œäº†ç´¢å¼•ï¼Œè€Œåœ¨ORåçš„æ¡ä»¶åˆ—æ²¡æœ‰è¿›è¡Œç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•ä¼šå¤±æ•ˆã€‚</strong></p><p>æ¯”å¦‚ä¸‹é¢çš„SQLè¯­å¥ï¼Œcomment_idæ˜¯ä¸»é”®ï¼Œè€Œcomment_textæ²¡æœ‰è¿›è¡Œç´¢å¼•ï¼Œå› ä¸ºORçš„å«ä¹‰å°±æ˜¯ä¸¤ä¸ªåªè¦æ»¡è¶³ä¸€ä¸ªå³å¯ï¼Œå› æ­¤åªæœ‰ä¸€ä¸ªæ¡ä»¶åˆ—è¿›è¡Œäº†ç´¢å¼•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œåªè¦æœ‰æ¡ä»¶åˆ—æ²¡æœ‰è¿›è¡Œç´¢å¼•ï¼Œå°±ä¼šè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå› æ­¤ç´¢å¼•çš„æ¡ä»¶åˆ—ä¹Ÿä¼šå¤±æ•ˆï¼š</p><pre><code>EXPLAIN SELECT comment_id, user_id, comment_text FROM product_comment WHERE comment_id = 900001 OR comment_text = '462eed7ac6e791292a79'\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n| id | select_type | table           | partitions | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra       |\n+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n|  1 | SIMPLE      | product_comment | NULL       | ALL  | PRIMARY       | NULL | NULL    | NULL | 996663 |    10.00 | Using where |\n+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n</code></pre><p>å¦‚æœæˆ‘ä»¬æŠŠcomment_textåˆ›å»ºäº†ç´¢å¼•ä¼šæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p><pre><code>+----+-------------+-----------------+------------+-------------+----------------------+----------------------+---------+------+------+----------+------------------------------------------------+\n| id | select_type | table           | partitions | type        | possible_keys        | key                  | key_len | ref  | rows | filtered | Extra                                          |\n+----+-------------+-----------------+------------+-------------+----------------------+----------------------+---------+------+------+----------+------------------------------------------------+\n|  1 | SIMPLE      | product_comment | NULL       | index_merge | PRIMARY,comment_text | PRIMARY,comment_text | 4,767   | NULL |    2 |   100.00 | Using union(PRIMARY,comment_text); Using where |\n+----+-------------+-----------------+------------+-------------+----------------------+----------------------+---------+------+------+----------+------------------------------------------------+\n</code></pre><p>ä½ èƒ½çœ‹åˆ°è¿™é‡Œä½¿ç”¨åˆ°äº†index mergeï¼Œç®€å•æ¥è¯´index mergeå°±æ˜¯å¯¹comment_idå’Œcomment_textåˆ†åˆ«è¿›è¡Œäº†æ‰«æï¼Œç„¶åå°†è¿™ä¸¤ä¸ªç»“æœé›†è¿›è¡Œäº†åˆå¹¶ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯é¿å…äº†å…¨è¡¨æ‰«æã€‚</p><p><strong>4.å½“æˆ‘ä»¬ä½¿ç”¨LIKEè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™ï¼Œå‰é¢ä¸èƒ½æ˜¯%</strong></p><pre><code>EXPLAIN SELECT comment_id, user_id, comment_text FROM product_comment WHERE comment_text LIKE '%abc'\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n| id | select_type | table           | partitions | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra       |\n+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n|  1 | SIMPLE      | product_comment | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 996663 |    11.11 | Using where |\n+----+-------------+-----------------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n</code></pre><p>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå¦‚æœä¸€æœ¬å­—å…¸æŒ‰ç…§å­—æ¯é¡ºåºè¿›è¡Œæ’åºï¼Œæˆ‘ä»¬ä¼šä»é¦–ä½å¼€å§‹è¿›è¡ŒåŒ¹é…ï¼Œè€Œä¸ä¼šå¯¹ä¸­é—´ä½ç½®è¿›è¡ŒåŒ¹é…ï¼Œå¦åˆ™ç´¢å¼•å°±å¤±æ•ˆäº†ã€‚</p><p><strong>5.ç´¢å¼•åˆ—å°½é‡è®¾ç½®ä¸ºNOT NULLçº¦æŸã€‚</strong></p><p><a href=\"https://dev.mysql.com/doc/refman/5.5/en/data-size.html\">MySQLå®˜æ–¹æ–‡æ¡£</a>å»ºè®®æˆ‘ä»¬å°½é‡å°†æ•°æ®è¡¨çš„å­—æ®µè®¾ç½®ä¸ºNOT NULLçº¦æŸï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥æ›´å¥½åœ°ä½¿ç”¨ç´¢å¼•ï¼ŒèŠ‚çœç©ºé—´ï¼Œç”šè‡³åŠ é€ŸSQLçš„è¿è¡Œã€‚<br>\nåˆ¤æ–­ç´¢å¼•åˆ—æ˜¯å¦ä¸ºNOT NULLï¼Œå¾€å¾€éœ€è¦èµ°å…¨è¡¨æ‰«æï¼Œå› æ­¤æˆ‘ä»¬æœ€å¥½åœ¨è®¾è®¡æ•°æ®è¡¨çš„æ—¶å€™å°±å°†å­—æ®µè®¾ç½®ä¸ºNOT NULLçº¦æŸæ¯”å¦‚ä½ å¯ä»¥å°†INTç±»å‹çš„å­—æ®µï¼Œé»˜è®¤å€¼è®¾ç½®ä¸º0ã€‚å°†å­—ç¬¦ç±»å‹çš„é»˜è®¤å€¼è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²(<code>''</code>)ã€‚</p><p><strong>6.æˆ‘ä»¬åœ¨ä½¿ç”¨è”åˆç´¢å¼•çš„æ—¶å€™è¦æ³¨æ„æœ€å·¦åŸåˆ™</strong></p><p>æœ€å·¦åŸåˆ™ä¹Ÿå°±æ˜¯éœ€è¦ä»å·¦åˆ°å³çš„ä½¿ç”¨ç´¢å¼•ä¸­çš„å­—æ®µï¼Œä¸€æ¡SQLè¯­å¥å¯ä»¥åªä½¿ç”¨è”åˆç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯éœ€è¦ä»æœ€å·¦ä¾§å¼€å§‹ï¼Œå¦åˆ™å°±ä¼šå¤±æ•ˆã€‚æˆ‘åœ¨è®²è”åˆç´¢å¼•çš„æ—¶å€™ä¸¾è¿‡ç´¢å¼•å¤±æ•ˆçš„ä¾‹å­ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å¯¹ç´¢å¼•çš„ä½¿ç”¨åŸåˆ™è¿›è¡Œäº†æ¢³ç†ï¼Œä½¿ç”¨å¥½ç´¢å¼•å¯ä»¥æå‡SQLæŸ¥è¯¢çš„æ•ˆç‡ï¼Œä½†åŒæ—¶ ä¹Ÿè¦æ³¨æ„ç´¢å¼•ä¸æ˜¯ä¸‡èƒ½çš„ã€‚ä¸ºäº†é¿å…å…¨è¡¨æ‰«æï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„æœ‰å“ªäº›æƒ…å†µå¯èƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡ŒæŸ¥è¯¢é‡å†™ï¼Œè®©ç´¢å¼•å‘æŒ¥ä½œç”¨ã€‚</p><p>å®é™…å·¥ä½œä¸­ï¼ŒæŸ¥è¯¢çš„éœ€æ±‚å¤šç§å¤šæ ·ï¼Œåˆ›å»ºçš„ç´¢å¼•ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚è¿™æ—¶è¿˜éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½æ‰©å±•ç´¢å¼•ï¼Œè€Œä¸æ˜¯æ–°å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•æ•°é‡è¿‡å¤šéœ€è¦ç»´æŠ¤çš„æˆæœ¬ä¹Ÿä¼šå˜å¤§ï¼Œå¯¼è‡´å†™æ•ˆç‡å˜ä½ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šæœŸæŸ¥è¯¢ä½¿ç”¨ç‡ä½çš„ç´¢å¼•ï¼Œå¯¹äºä»æœªä½¿ç”¨è¿‡çš„ç´¢å¼•å¯ä»¥è¿›è¡Œåˆ é™¤ï¼Œè¿™æ ·æ‰èƒ½è®©ç´¢å¼•åœ¨SQLæŸ¥è¯¢ä¸­å‘æŒ¥æœ€å¤§ä»·å€¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/81/f4/81147e99e2533126533500a087086ef4.jpg?wh=3341*2220\" alt=\"\"><br>\né’ˆå¯¹product_commentæ•°æ®è¡¨ï¼Œå…¶ä¸­comment_timeå·²ç»åˆ›å»ºäº†æ™®é€šç´¢å¼•ã€‚å‡è®¾æˆ‘æƒ³æŸ¥è¯¢è¯„è®ºæ—¶é—´åœ¨2018å¹´10æœˆ1æ—¥ä¸Šåˆ10ç‚¹åˆ°2018å¹´10æœˆ2æ—¥ä¸Šåˆ10ç‚¹ä¹‹é—´çš„è¯„è®ºï¼ŒSQLè¯­å¥ä¸ºï¼š</p><pre><code>SELECT comment_id, comment_text, comment_time FROM product_comment WHERE DATE(comment_time) &gt;= '2018-10-01 10:00:00' AND comment_time &lt;= '2018-10-02 10:00:00'\n</code></pre><p>ä½ å¯ä»¥æƒ³ä¸€ä¸‹è¿™æ—¶å€™ç´¢å¼•æ˜¯å¦ä¼šå¤±æ•ˆï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœå¤±æ•ˆçš„è¯ï¼Œè¦è¿›è¡ŒæŸ¥è¯¢é‡å†™ï¼Œåº”è¯¥æ€æ ·å†™ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„ç­”æ¡ˆï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·æ¥äº¤æµã€‚</p>","neighbors":{"left":{"article_title":"25ä¸¨Hashç´¢å¼•çš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ","id":113669},"right":{"article_title":"27ä¸¨ä»æ•°æ®é¡µçš„è§’åº¦ç†è§£B+æ ‘æŸ¥è¯¢","id":116766}},"comments":[{"had_liked":false,"id":122432,"user_name":"wusiration","can_delete":false,"product_type":"c1","uid":1104438,"ip_address":"","ucode":"A9403377054F1E","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/36/ac0ff6a7.jpg","comment_is_top":false,"comment_ctime":1565366264,"is_pvip":false,"replies":[{"id":"63543","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577517479,"ip_address":"","comment_id":122432,"utype":1}],"discussion_count":9,"race_medal":0,"score":"207723796472","product_id":100029501,"comment_content":"ç´¢å¼•å¤±æ•ˆï¼Œå› ä¸ºä½¿ç”¨äº†dateå‡½æ•°ã€‚æ”¹æˆSELECT comment_id, comment_text, comment_time FROM product_comment WHERE comment_time BETWEEN DATE(&#39;2018-10-01 10:00:00&#39;) AND DATE(&#39;2018-10-02 10:00:00&#39;)<br>","like_count":49,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462248,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577517479,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1901164,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/02/6c/e0ae650d.jpg","nickname":"Chica Digital","note":"","ucode":"33F3847052167F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208392,"discussion_content":"å…³é”®åœ¨äºWHEREåçš„æŸ¥è¯¢å¯¹è±¡ä¸èƒ½è¿›è¡Œè¡¨è¾¾å¼è¿ç®—æˆ–è€…å‡½æ•°è®¡ç®—ï¼Œè€Œdate()å°±æ˜¯æ•°æ®åº“å†…ç½®çš„æ—¥æœŸå‡½æ•°ï¼Œå› ä¸ºè¿™æ ·çš„è¯å¼•æ“å¿…é¡»æŠŠæ¯ä¸ªç´¢å¼•å…¨éƒ¨å–å‡ºæ¥å†è¿›è¡Œå‡½æ•°è¿ç®—æ¥çœ‹æ˜¯å¦æ»¡è¶³å…¶ç­›é€‰æ¡ä»¶ï¼Œæ­¤æ—¶è¿›è¡Œçš„æ˜¯å…¨è¡¨æ‰«æï¼Œç´¢å¼•å°±å¤±å»äº†ä½œç”¨ã€‚\nä½†æ˜¯WHEREç­›é€‰æ¡ä»¶é‡Œçš„å˜é‡å°±æ— æ‰€è°“äº†ï¼Œå¯¹å­—ç¬¦ä¸²ä½¿ç”¨dateå‡½æ•°ä¹Ÿåªæ˜¯è½¬å˜å…¶æ ¼å¼è€Œå·²ï¼Œè€Œæˆ‘ä»¬çš„WHEREæŸ¥è¯¢å¯¹è±¡comment_timeæœ¬èº«å°±æ˜¯æ—¥æœŸç±»å‹æ•°æ®ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1584543139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1640978,"avatar":"https://static001.geekbang.org/account/avatar/00/19/0a/12/f8b988b8.jpg","nickname":"Kyle(","note":"","ucode":"0C14C4C086CAA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343959,"discussion_content":"é¢˜ç›®å†™çš„æ˜¯ä¸æ˜¯è¦æŸ¥â€”â€”â€œè¯„è®ºæ—¶é—´åœ¨ 2018 å¹´ 10 æœˆ 1 æ—¥ä¸Šåˆ 10 ç‚¹åˆ° 2018 å¹´ 10 æœˆ 2 æ—¥ä¸Šåˆ 10 ç‚¹ä¹‹é—´çš„è¯„è®ºâ€ï¼Œé‚£ä¹ˆç”¨dateå‡½æ•°åˆé€‚å—ï¼Ÿè¿™æ ·æŸ¥çš„å®é™…ä¸æ˜¯ 2018 å¹´ 10 æœˆ 1 æ—¥é›¶ç‚¹ åˆ°  2018 å¹´ 10 æœˆ 2 æ—¥é›¶ç‚¹çš„æ•°æ®å—ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1611217907,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400187,"discussion_content":"åº”è¯¥ä¸è¦ç”¨Dateå‡½æ•°å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633185963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2089504,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/e2/20/c01bc5d3.jpg","nickname":"å¤§ä¼š","note":"","ucode":"4C052BE39736C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299809,"discussion_content":"æ”¹æˆbetween andä¹‹åï¼Œä¹Ÿè¿˜æ˜¯ç”¨åˆ°äº†dateå‡½æ•°ï¼Œé‚£è¿˜æ˜¯ä¼šå¼•èµ·ç´¢å¼•å¤±æ•ˆå•Šï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ\nè®°å¾—å‰é¢è¯¾ç¨‹é‡Œè¯´è¿‡ï¼Œç”¨æ¯”è¾ƒè¿ç®—ç¬¦çš„æ—¶å€™ï¼Œä¼šå¼•èµ·ç´¢å¼•å¤±æ•ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597827137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1154146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9c/62/f625b2bb.jpg","nickname":"é…¸è‘¡è„","note":"","ucode":"9D059C4FB327C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135337,"discussion_content":"ä¸ºä»€ä¹ˆæ”¹æˆbetween ... and...å°±å¯ä»¥äº†å‘¢ï¼Ÿåˆ©ç”¨äº†B+æ ‘çš„èŒƒå›´æŸ¥è¯¢å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579087143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":1154146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9c/62/f625b2bb.jpg","nickname":"é…¸è‘¡è„","note":"","ucode":"9D059C4FB327C0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206686,"discussion_content":"å…³é”®ä¸æ˜¯ betweenï¼Œè€Œæ˜¯å­—æ®µæœ¬èº«æœªä½¿ç”¨ Date å‡½æ•°","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1584427308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":135337,"ip_address":""},"score":206686,"extra":""},{"author":{"id":1706074,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/08/5a/4d709cf5.jpg","nickname":"Prayã€PF","note":"","ucode":"1E3E4073763490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1154146,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9c/62/f625b2bb.jpg","nickname":"é…¸è‘¡è„","note":"","ucode":"9D059C4FB327C0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284249,"discussion_content":"ä¹Ÿå¯ä»¥ä¸ç”¨between andï¼Œç›´æ¥æ¯”è¾ƒä¹Ÿå¯ä»¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592485485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":135337,"ip_address":""},"score":284249,"extra":""}]},{"author":{"id":1322612,"avatar":"https://static001.geekbang.org/account/avatar/00/14/2e/74/88c613e0.jpg","nickname":"æ‰¶å¹½","note":"","ucode":"1400EDFF8970D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":45608,"discussion_content":"logç§€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573051628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134441,"user_name":"Yuhui","can_delete":false,"product_type":"c1","uid":1110470,"ip_address":"","ucode":"811933B016179F","user_header":"https://static001.geekbang.org/account/avatar/00/10/f1/c6/6f39a982.jpg","comment_is_top":false,"comment_ctime":1568835247,"is_pvip":false,"replies":[{"id":"53358","content":"ä½ å¯ä»¥æŸ¥çœ‹ä¸‹MySQLä¸­çš„performance_schema.table_io_waits_summary_by_index_usageæ•°æ®è¡¨ï¼Œå®ƒè¡¨æ˜äº†æ¯ä¸ªç´¢å¼•è¿›è¡Œç»Ÿè®¡çš„I&#47;Oç­‰å¾…äº‹ä»¶ï¼Œå…¶ä¸­COUNT_STARä»£è¡¨äº†äº‹ä»¶çš„æ¬¡æ•°ã€‚è¿‡æ»¤æ‰ä¸€äº›ç³»ç»Ÿè¡¨ï¼ŒæŸ¥çœ‹ä¸‹æ•°æ®è¡¨ä¸­æœ‰å“ªäº›ç´¢å¼•ä¸ç»å¸¸ä½¿ç”¨ï¼Œå…·ä½“çš„SQLè¯­å¥ï¼šSELECT OBJECT_SCHEMA, OBJECT_NAME, INDEX_NAME,COUNT_STAR FROM performance_schema.table_io_waits_summary_by_index_usage<br>WHERE INDEX_NAME IS NOT NULL<br>AND COUNT_STAR = 0<br>AND OBJECT_SCHEMA != &#39;mysql&#39; AND OBJECT_SCHEMA != &#39;performance_schema&#39;","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1570427961,"ip_address":"","comment_id":134441,"utype":1}],"discussion_count":1,"race_medal":0,"score":"130417854127","product_id":100029501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼è¯·æ•™ä¸€ä¸‹å¦‚ä½•æŸ¥æ‰¾â€œä¸ç»å¸¸ä½¿ç”¨çš„â€œç´¢å¼•å‘¢ï¼Ÿè°¢è°¢ï¼","like_count":30,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467750,"discussion_content":"ä½ å¯ä»¥æŸ¥çœ‹ä¸‹MySQLä¸­çš„performance_schema.table_io_waits_summary_by_index_usageæ•°æ®è¡¨ï¼Œå®ƒè¡¨æ˜äº†æ¯ä¸ªç´¢å¼•è¿›è¡Œç»Ÿè®¡çš„I/Oç­‰å¾…äº‹ä»¶ï¼Œå…¶ä¸­COUNT_STARä»£è¡¨äº†äº‹ä»¶çš„æ¬¡æ•°ã€‚è¿‡æ»¤æ‰ä¸€äº›ç³»ç»Ÿè¡¨ï¼ŒæŸ¥çœ‹ä¸‹æ•°æ®è¡¨ä¸­æœ‰å“ªäº›ç´¢å¼•ä¸ç»å¸¸ä½¿ç”¨ï¼Œå…·ä½“çš„SQLè¯­å¥ï¼šSELECT OBJECT_SCHEMA, OBJECT_NAME, INDEX_NAME,COUNT_STAR FROM performance_schema.table_io_waits_summary_by_index_usage\nWHERE INDEX_NAME IS NOT NULL\nAND COUNT_STAR = 0\nAND OBJECT_SCHEMA != &amp;#39;mysql&amp;#39; AND OBJECT_SCHEMA != &amp;#39;performance_schema&amp;#39;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570427961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122593,"user_name":"é»‘å±±è€å¦–","can_delete":false,"product_type":"c1","uid":1074011,"ip_address":"","ucode":"ED19A0D768A29C","user_header":"https://static001.geekbang.org/account/avatar/00/10/63/5b/062da5eb.jpg","comment_is_top":false,"comment_ctime":1565430724,"is_pvip":true,"discussion_count":9,"race_medal":0,"score":"48810070980","product_id":100029501,"comment_content":"è€å¸ˆ SELECT user_id, count(*) as num FROM product_comment group by user_id order by comment_time desc limit 100<br>è¿™ä¸ªä¾‹å­ä¸­ å¯¹ï¼ˆcomment_time,user_idï¼‰è¿›è¡Œç´¢å¼• ï¼Œè€å¸ˆä¸æ˜¯è¯´æŒ‰ç…§æœ€å·¦åŸåˆ™ï¼Œç´¢å¼•ä¼šå¤±æ•ˆå˜› ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼šèµ·ä½œç”¨ï¼Œæœ›è€å¸ˆè§£ç­” ï¼šï¼‰","like_count":11,"discussions":[{"author":{"id":1043738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","nickname":"asdf100","note":"","ucode":"39D8D71453E575","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4626,"discussion_content":"group by user_idæ‰§è¡Œåœ¨å‰ï¼Œæ‰§è¡Œè¿™ä¸ªçš„æ—¶å€™è¿™ä¸ªç´¢å¼•å·²ç»ä¸å¯ç”¨äº†ï¼Œå°±æ˜¯é€»è¾‘å·²ç»ä¸åœ¨ç´¢å¼•æ ‘ä¸Šèµ°äº†","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1565607607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1074011,"avatar":"https://static001.geekbang.org/account/avatar/00/10/63/5b/062da5eb.jpg","nickname":"é»‘å±±è€å¦–","note":"","ucode":"ED19A0D768A29C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1043738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","nickname":"asdf100","note":"","ucode":"39D8D71453E575","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4687,"discussion_content":"ä½ å¥½ ä¾‹å­ä¸Šè¯´åˆ›å»º(comment_time,user_id)è¿˜æ˜¯æ¯”ä¸¤ä¸ªå•åˆ—ç´¢å¼•å¿« ç–‘æƒ‘ç‚¹æ˜¯ä¸Šè¿°è”åˆç´¢å¼•åº”è¯¥æ˜¯å¤±æ•ˆäº†ï¼Œä¸ºä»€ä¹ˆè¿˜æ¯”å•åˆ—ç´¢å¼•å¿«","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1565661781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4626,"ip_address":""},"score":4687,"extra":""},{"author":{"id":1012325,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/72/65/68bd8177.jpg","nickname":"é›ªé£é¸¿","note":"","ucode":"65D7B030828809","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1074011,"avatar":"https://static001.geekbang.org/account/avatar/00/10/63/5b/062da5eb.jpg","nickname":"é»‘å±±è€å¦–","note":"","ucode":"ED19A0D768A29C","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":35352,"discussion_content":"ä¸ªäººç†è§£ï¼Œorder byä½¿ç”¨äº†ç´¢å¼•","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571272388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4687,"ip_address":""},"score":35352,"extra":""}]},{"author":{"id":2962599,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","nickname":"å¹´å°‘æŒ½æ»‘ç¨½ä¸–æ— åŒ","note":"","ucode":"793DCBDE25A07B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587666,"discussion_content":"è¯­å¥ä¸­åªç”¨ä¸€éƒ¨åˆ†éœ€è¦è€ƒè™‘æœ€å·¦åŒ¹é…åŸåˆ™ï¼Œå¦‚æœè”åˆç´¢å¼•ä¸­çš„å­—æ®µè¯­å¥éƒ½ç”¨äº†ï¼Œå°±ä¸éœ€è¦è€ƒè™‘æœ€å·¦åŒ¹é…åŸåˆ™äº†ï¼Œç´¢å¼•ä¸ä¼šå¤±æ•ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663208989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2962599,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","nickname":"å¹´å°‘æŒ½æ»‘ç¨½ä¸–æ— åŒ","note":"","ucode":"793DCBDE25A07B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587662,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663208242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1798260,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/70/74/06742258.jpg","nickname":"demnox","note":"","ucode":"C3D8A08ED74ED1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":123382,"discussion_content":"å¯èƒ½æ˜¯åªç”¨åˆ°äº†comment_timeç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578401884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1584098,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIR9QrAn9TZOrJMSYMyN96PAuAjETVrN5SPp3hMbfUAGIWtHceWPEoQtPdXeuBn7VB7dagtxynAIA/132","nickname":"ballgod","note":"","ucode":"C20E95E98EAC43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":78381,"discussion_content":"å¸Œæœ›è€å¸ˆå›ç­”ä¸€ä¸‹è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575988697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1721278,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLAhj2fB8NI2TPI1SNicgiciczuMUHyAb9HHBkkKJHrgtR162fsicaTqdAneHfuVX7icDXaVibDHstM9L47g/132","nickname":"Geek_0c1732","note":"","ucode":"6276D0412CCE51","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63801,"discussion_content":"æŸ¥è¯¢å­—æ®µè·ŸæŸ¥è¯¢æ¡ä»¶éƒ½æœ‰ç´¢å¼•ï¼Œè¿™ä¸ªæ—¶å€™åªä¼šåœ¨ç´¢å¼•æ ‘ä¸ŠæŸ¥è¯¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574911899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1219496,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","nickname":"LeonğŸ“·","note":"","ucode":"B9BBD1EFAAE5A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8162,"discussion_content":" ä¸€æ¡ SQL è¯­å¥å¯ä»¥åªä½¿ç”¨è”åˆç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯éœ€è¦ä»æœ€å·¦ä¾§å¼€å§‹ï¼Œå¦åˆ™å°±ä¼šå¤±æ•ˆï¼Œè”åˆç´¢å¼•å¦‚æœè¯­å¥éƒ½ä½¿ç”¨çš„è¯å°±ä¸ä¼šå¤±æ•ˆ,","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567809913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126375,"user_name":"ä½šèŠ±","can_delete":false,"product_type":"c1","uid":1246853,"ip_address":"","ucode":"B84288F748780A","user_header":"https://static001.geekbang.org/account/avatar/00/13/06/85/f1b4d5c4.jpg","comment_is_top":false,"comment_ctime":1566374749,"is_pvip":false,"replies":[{"id":"47666","content":"å¯¹çš„ å¦‚æœ%åœ¨å·¦ä¾§å°±æ˜¯å‰æ¨¡ç³ŠåŒ¹é…ï¼Œæœ‰ç´¢å¼•ä¹Ÿä¼šå¤±æ•ˆã€‚æ‰€ä»¥å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…çš„æ—¶å€™ï¼Œéœ€è¦æœ€å·¦ä¾§æ˜¯ä¸ªæ˜ç¡®çš„å­—ç¬¦æ‰èƒ½ä½¿ç”¨ä¸Šç´¢å¼•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1566901090,"ip_address":"","comment_id":126375,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35926113117","product_id":100029501,"comment_content":"å…³äºlike. <br>%åœ¨å·¦è¾¹ï¼Œå³ä½¿æœ‰ç´¢å¼•ï¼Œä¹Ÿä¼šå¤±æ•ˆ.<br>åªæœ‰å½“%åœ¨å³è¾¹æ—¶ï¼Œæ‰ä¼šç”Ÿæ•ˆ","like_count":8,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463960,"discussion_content":"å¯¹çš„ å¦‚æœ%åœ¨å·¦ä¾§å°±æ˜¯å‰æ¨¡ç³ŠåŒ¹é…ï¼Œæœ‰ç´¢å¼•ä¹Ÿä¼šå¤±æ•ˆã€‚æ‰€ä»¥å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…çš„æ—¶å€™ï¼Œéœ€è¦æœ€å·¦ä¾§æ˜¯ä¸ªæ˜ç¡®çš„å­—ç¬¦æ‰èƒ½ä½¿ç”¨ä¸Šç´¢å¼•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566901090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122227,"user_name":"haer","can_delete":false,"product_type":"c1","uid":1146728,"ip_address":"","ucode":"0216267E645431","user_header":"","comment_is_top":false,"comment_ctime":1565319364,"is_pvip":false,"replies":[{"id":"63552","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577517953,"ip_address":"","comment_id":122227,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31630090436","product_id":100029501,"comment_content":"ç´¢å¼•å¤±æ•ˆï¼Œå› ä¸ºä½¿ç”¨äº†dateå‡½æ•°","like_count":7,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462160,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577517953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122555,"user_name":"æ¢¦æƒ³å¤©ç©º","can_delete":false,"product_type":"c1","uid":1236327,"ip_address":"","ucode":"942A3755932E3F","user_header":"https://static001.geekbang.org/account/avatar/00/12/dd/67/7d0d566a.jpg","comment_is_top":false,"comment_ctime":1565423196,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"27335226972","product_id":100029501,"comment_content":"è€å¸ˆ æ‚¨å¥½ã€‚ä½¿ç”¨selet * from T where a&lt;4 or a=9;   aæœ‰ç´¢å¼•ï¼Œä½†è¿˜æ˜¯å…¨ç›˜æ‰«æï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ","like_count":6,"discussions":[{"author":{"id":1043738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","nickname":"asdf100","note":"","ucode":"39D8D71453E575","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4630,"discussion_content":"å…ˆçœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯è¡¨æ•°æ®å¤ªå°‘çš„ï¼Œæ•°æ®å¤ªå°‘çš„æ—¶å€™ä¼˜åŒ–åˆ†æå™¨ä¼šè®¤ä¸ºç”¨ç´¢å¼•è¿˜ä¸å¦‚ç›´æ¥å…¨è¡¨æ‰«æå¿«ï¼Œæ¯•ç«Ÿè¿˜å¾—å›è¡¨ä¸€æ¬¡ï¼Œå­˜åœ¨IO","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1565608677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1236327,"avatar":"https://static001.geekbang.org/account/avatar/00/12/dd/67/7d0d566a.jpg","nickname":"æ¢¦æƒ³å¤©ç©º","note":"","ucode":"942A3755932E3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1043738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","nickname":"asdf100","note":"","ucode":"39D8D71453E575","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4822,"discussion_content":"è¯•äº†ä¸€ä¸‹ï¼Œæ˜¯æˆ‘æ•°æ®å¤ªå°‘äº†é€ æˆå…¨è¡¨æ‰«æçš„ã€‚å†é—®æ‚¨ä¸€ä¸‹ï¼Œselet * from T where (a<4 or a=9) and b=10;æ˜¯åº”è¯¥ç”¨è”åˆç´¢å¼•ï¼ˆa,bï¼‰ï¼Œè¿˜æ˜¯å•ç‹¬çš„ç´¢å¼•å‘¢\n ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565753069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4630,"ip_address":""},"score":4822,"extra":""},{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":1236327,"avatar":"https://static001.geekbang.org/account/avatar/00/12/dd/67/7d0d566a.jpg","nickname":"æ¢¦æƒ³å¤©ç©º","note":"","ucode":"942A3755932E3F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":16207,"discussion_content":"å¦‚ä½•å»ºç´¢å¼•éœ€è¦è€ƒè™‘å¦‚ä½•è¿›è¡Œç­›é€‰ã€‚å¦‚æœä»…ä»…æ˜¯ä¸Šé¢è¿™ä¸ª sqlï¼Œæˆ‘è§‰å¾— (b,a) ç´¢å¼•çš„æ•ˆç‡æ˜¯æœ€é«˜çš„\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1568876686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4822,"ip_address":""},"score":16207,"extra":""},{"author":{"id":1178870,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fc/f6/d50bfaf4.jpg","nickname":"åŠ›ä¸»é“","note":"","ucode":"8C2BE1B9B10A28","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"discussion":{"id":296949,"discussion_content":"ä¸ºä»€ä¹ˆæ˜¯(b,a)äº†?è€Œä¸æ˜¯(a,b)äº†?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596711508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":16207,"ip_address":""},"score":296949,"extra":""}]},{"author":{"id":1231549,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","nickname":"åƒé¥­é¥­","note":"","ucode":"95CFA07CDA2957","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126973,"discussion_content":"ä½¿ç”¨æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™æ—¶ï¼Œä½ è¦æ˜æŠ¥ä¸€ä¸ªè¦æ±‚ï¼šmysql ä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢(>ã€<ã€betweenã€like) å°±åœæ­¢åŒ¹é…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578554943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122088,"user_name":"Vackine","can_delete":false,"product_type":"c1","uid":1139588,"ip_address":"","ucode":"8E412EE82D3B59","user_header":"https://static001.geekbang.org/account/avatar/00/11/63/84/f45c4af9.jpg","comment_is_top":false,"comment_ctime":1565282860,"is_pvip":false,"replies":[{"id":"44839","content":"ä¸€æœ¬ç»å…¸çš„ä¹¦ã€ŠTowards a Logical Reconstruction of Relational Database Theoryã€‹<br>å¦å¤–å…³ç³»å‹æ•°æ®åº“é‡Œé¢ä¹Ÿæœ‰ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚å…³äºå›¾åƒæ£€ç´¢çš„<br>ã€ŠChabot: Retrieval from a Relational Database of Imagesã€‹<br>æŸ¥è¯¢XMLçš„ï¼š<br>ã€ŠStoring and querying ordered XML using a relational database systemã€‹<br>","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1565310803,"ip_address":"","comment_id":122088,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23040119340","product_id":100029501,"comment_content":"å…³äºå…³ç³»å‹æ•°æ®åº“æ¨¡å‹ä»‹ç»çš„è®ºæ–‡ï¼Œè€å¸ˆæœ‰æ¨èçš„ä¹ˆâœ¨","like_count":5,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462092,"discussion_content":"ä¸€æœ¬ç»å…¸çš„ä¹¦ã€ŠTowards a Logical Reconstruction of Relational Database Theoryã€‹\nå¦å¤–å…³ç³»å‹æ•°æ®åº“é‡Œé¢ä¹Ÿæœ‰ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚å…³äºå›¾åƒæ£€ç´¢çš„\nã€ŠChabot: Retrieval from a Relational Database of Imagesã€‹\næŸ¥è¯¢XMLçš„ï¼š\nã€ŠStoring and querying ordered XML using a relational database systemã€‹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565310803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127765,"user_name":"Andywu","can_delete":false,"product_type":"c1","uid":1578457,"ip_address":"","ucode":"29D95287086BA1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/mVtGLzdgB7pKFgaQdYUoAaNDic1xCqLqATcuVYPGCBuCy4tTwEBhicaZ70tvSbMaGAEEia7cJwcjfmdfTffFlAsSw/132","comment_is_top":false,"comment_ctime":1566789224,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18746658408","product_id":100029501,"comment_content":"å»æ‰dateå‡½æ•°åï¼ŒæŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œç´¢å¼•ç”Ÿæ•ˆäº†ã€‚<br>mysql&gt; explain SELECT comment_id, comment_text, comment_time FROM product_comment WHERE comment_time &gt;= &#39;2018-10-01 10:00:00&#39; AND comment_time &lt;= &#39;2018-10-02 10:00:00&#39;;<br>+----+-------------+-----------------+------------+-------+---------------+--------------+---------+------+------+----------+-----------------------+<br>| id | select_type | table           | partitions | type  | possible_keys | key          | key_len | ref  | rows | filtered | Extra                 |<br>+----+-------------+-----------------+------------+-------+---------------+--------------+---------+------+------+----------+-----------------------+<br>|  1 | SIMPLE      | product_comment | NULL       | range | comment_time  | comment_time | 6       | NULL | 2929 |   100.00 | Using index condition |<br>+----+-------------+-----------------+------------+-------+---------------+--------------+---------+------+------+----------+-----------------------+<br>1 row in set, 1 warning (0.00 sec)<br><br>æŸ¥è¯¢æ—¶é—´ç¼©çŸ­ä¸º0.01sã€‚<br>mysql&gt; SELECT comment_id, comment_text, comment_time FROM product_comment WHERE comment_time &gt;= &#39;2018-10-01 10:00:00&#39; AND comment_time &lt;= &#39;2018-10-02 10:00:00&#39;;<br>2929 rows in set (0.01 sec)","like_count":4},{"had_liked":false,"id":123495,"user_name":"Goal","can_delete":false,"product_type":"c1","uid":1307012,"ip_address":"","ucode":"C337CD4C7E07B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f1/84/7d21bd9e.jpg","comment_is_top":false,"comment_ctime":1565686449,"is_pvip":false,"replies":[{"id":"45375","content":"å› ä¸ºæ–‡ä»¶å¤§äº100Mï¼Œå°±å…ˆæ”¾åˆ°ç™¾åº¦ç½‘ç›˜ï¼šhttps:&#47;&#47;pan.baidu.com&#47;s&#47;1LBEAm50DDP9AjErLtGplLg <br>æå–ç ï¼š32ep<br>å¤šè°¢å»ºè®®ï¼Œæˆ‘æŠŠå®ƒä¹Ÿæ”¾åˆ°GitHubä¸Šï¼Œå¤§äº100Mçš„ç»™å‡ºç™¾åº¦ç½‘ç›˜çš„é“¾æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1565767207,"ip_address":"","comment_id":123495,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18745555633","product_id":100029501,"comment_content":"è€å¸ˆï¼Œä»Šå¤©æ–‡ç« ä¸­çš„â€œproduct_commentâ€è¡¨ç»“æ„å’Œæ•°æ®ï¼Œæ˜¯ä»å“ªé‡Œå¯¼å…¥çš„å‘¢ï¼Ÿ<br><br>ä¸ªäººæ„Ÿè§‰ï¼Œæœ¬è¯¾ç¨‹ç”¨åˆ°çš„æ‰€æœ‰è¡¨éƒ½å¯ä»¥æ”¾åˆ°ä¸€ä¸ªç»Ÿä¸€çš„åœ°æ–¹ï¼Œæ¯”å¦‚ä¹‹å‰çš„ GitHubä¸Šé¢ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç»Ÿä¸€ä¸‹è½½ã€‚","like_count":4,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462697,"discussion_content":"å› ä¸ºæ–‡ä»¶å¤§äº100Mï¼Œå°±å…ˆæ”¾åˆ°ç™¾åº¦ç½‘ç›˜ï¼šhttps://pan.baidu.com/s/1LBEAm50DDP9AjErLtGplLg \næå–ç ï¼š32ep\nå¤šè°¢å»ºè®®ï¼Œæˆ‘æŠŠå®ƒä¹Ÿæ”¾åˆ°GitHubä¸Šï¼Œå¤§äº100Mçš„ç»™å‡ºç™¾åº¦ç½‘ç›˜çš„é“¾æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565767207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122354,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1565347302,"is_pvip":false,"replies":[{"id":"63548","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577517707,"ip_address":"","comment_id":122354,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18745216486","product_id":100029501,"comment_content":"ç´¢å¼•ä¼šå¤±æ•ˆï¼Œå› ä¸ºä½¿ç”¨äº†dateå‡½æ•°ã€‚<br><br>å¦‚æœä¿®æ”¹çš„è¯ï¼Œå¯ä»¥ç”¨betweenå’Œandï¼Œå¯¹æŸ¥è¯¢æ¡ä»¶è¿›è¡Œè½¬æ¢ã€‚<br><br>ä¾‹å¦‚:currtime between date(&#39;2018-01-10 10:00:00) and date(&#39;2018-02-10 12:00:00&#39;) <br><br>æ‰‹æœºå›å¤ï¼Œæ²¡æœ‰å®é™…è¿è¡Œï¼Œå¦‚æœ‰é”™è¯¯è¯·è€å¸ˆæŒ‡æ­£ï¼Œè°¢è°¢","like_count":4,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462218,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577517707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166417,"user_name":"rike","can_delete":false,"product_type":"c1","uid":1583833,"ip_address":"","ucode":"920AAD0BD9245C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","comment_is_top":false,"comment_ctime":1577444556,"is_pvip":false,"replies":[{"id":"82661","content":"åº”è¯¥æ˜¯å¯ä»¥è¿è¡Œçš„ï¼ŒrikeåŒå­¦å†è¯•è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1591443659,"ip_address":"","comment_id":166417,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14462346444","product_id":100029501,"comment_content":"â€œæŒ‰ç…§ user_id è¿›è¡Œè¯„è®ºåˆ†ç»„ï¼ŒåŒæ—¶æŒ‰ç…§è¯„è®ºæ—¶é—´é™åºçš„æ–¹å¼è¿›è¡Œæ’åºâ€ï¼Œæ‰§è¡Œå¯¹åº”çš„sqlåï¼ŒæŠ¥é”™ã€‚æœ›å¤§ç¥éªŒè¯ä¸€ä¸‹ï¼Œä¸è¦è¯¯å¯¼ä»˜è´¹å­¦ä¹ çš„è¯»è€…ã€‚","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479502,"discussion_content":"åº”è¯¥æ˜¯å¯ä»¥è¿è¡Œçš„ï¼ŒrikeåŒå­¦å†è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591443659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2230130,"avatar":"https://static001.geekbang.org/account/avatar/00/22/07/72/ca9dbf26.jpg","nickname":"å­Ÿç‘ç‘","note":"","ucode":"5678909530C36E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321786,"discussion_content":"åº”è¯¥sql_mode é—®é¢˜ è®¾ç½®ç©ºè¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604632455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261065,"discussion_content":"æˆ‘æ‰§è¡Œå°±æ²¡æœ‰æŠ¥é”™å•Šï¼ŸæŠ¥é”™ä»€ä¹ˆäº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588936643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154632,"user_name":"æŠ¢å°å­©å­ç³–åƒ","can_delete":false,"product_type":"c1","uid":1690807,"ip_address":"","ucode":"09F302FC76582A","user_header":"https://static001.geekbang.org/account/avatar/00/19/cc/b7/af6ef83d.jpg","comment_is_top":false,"comment_ctime":1574496709,"is_pvip":false,"replies":[{"id":"59720","content":"è¿™ä¸ªçœ‹éœ€æ±‚ï¼Œå¯¹äºæŸä¸ªç–¾ç—…ï¼ˆå‘ç—…ç‡å¾ˆä½ï¼‰çš„æ­£æ ·æœ¬ï¼Œå¯ä»¥é€‰æ‹©åˆ›å»ºç´¢å¼•ã€‚å¦‚æœæ€§åˆ«ç”·å¥³éƒ½éœ€è¦æŸ¥çœ‹ï¼Œå¯ä»¥ä¸å»ºç´¢å¼•ï¼Œå¯¹äºå¥³æ€§ï¼Œä¼˜åŒ–å™¨ä¹Ÿä¸ä¼šä½¿ç”¨ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1574737548,"ip_address":"","comment_id":154632,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14459398597","product_id":100029501,"comment_content":"è€å¸ˆ å¦‚æœæˆ‘ä»¬ç»™å¥³å„¿å›½çš„æ€§åˆ«åŠ ä¸Šäº†ç´¢å¼•   æˆ‘ä»¬æŸ¥çœ‹ç”·æ€§çš„è¯ä¼šå¿«å¾ˆå¤š <br>ä½†å¦‚æœæˆ‘ä»¬æœ‰æ—¶éœ€è¦æŸ¥çœ‹ç”·æ€§ æœ‰æ—¶éœ€è¦æŸ¥çœ‹å¥³æ€§ è¿˜é€‚åˆåœ¨æ€§åˆ«ä¸Šå»ºç´¢å¼•å—  <br>æŸ¥çœ‹å¥³æ€§çš„æ—¶å€™ä¼˜åŒ–å™¨ä¼šé€‰æ‹©ç”¨è¿™ä¸ªç´¢å¼•æ‰¾æ•°æ®å—","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475531,"discussion_content":"è¿™ä¸ªçœ‹éœ€æ±‚ï¼Œå¯¹äºæŸä¸ªç–¾ç—…ï¼ˆå‘ç—…ç‡å¾ˆä½ï¼‰çš„æ­£æ ·æœ¬ï¼Œå¯ä»¥é€‰æ‹©åˆ›å»ºç´¢å¼•ã€‚å¦‚æœæ€§åˆ«ç”·å¥³éƒ½éœ€è¦æŸ¥çœ‹ï¼Œå¯ä»¥ä¸å»ºç´¢å¼•ï¼Œå¯¹äºå¥³æ€§ï¼Œä¼˜åŒ–å™¨ä¹Ÿä¸ä¼šä½¿ç”¨ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574737548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122220,"user_name":"niemo","can_delete":false,"product_type":"c1","uid":1100142,"ip_address":"","ucode":"71364762238367","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/6e/1ac1c955.jpg","comment_is_top":false,"comment_ctime":1565317925,"is_pvip":false,"replies":[{"id":"63553","content":"SQLæ‰§è¡Œé¡ºåºï¼š<br>SELECT DISTINCT player_id, player_name, count(*) as num #é¡ºåº5<br>FROM player JOIN team ON player.team_id = team.team_id #é¡ºåº1<br>WHERE height &gt; 1.80 #é¡ºåº2<br>GROUP BY player.team_id #é¡ºåº3<br>HAVING num &gt; 2 #é¡ºåº4<br>ORDER BY num DESC #é¡ºåº6<br>LIMIT 2 #é¡ºåº7","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577517977,"ip_address":"","comment_id":122220,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14450219813","product_id":100029501,"comment_content":"è€å¸ˆ æ‚¨å¥½ï¼Œsqlæ¡ä»¶æ‰§è¡Œé¡ºåºä¸æ˜¯ä»å³åˆ°å·¦ä¹ˆï¼Ÿæ‰€æœ‰åœ¨ä½¿ç”¨è”åˆç´¢å¼•çš„æ—¶å€™ï¼ŒæŠŠæœ€å·¦çš„ç´¢å¼•å†™åœ¨whereæ¡ä»¶çš„æœ€å³è¾¹ï¼Œè¿™æ ·ç†è§£å¯¹ä¹ˆï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462155,"discussion_content":"SQLæ‰§è¡Œé¡ºåºï¼š\nSELECT DISTINCT player_id, player_name, count(*) as num #é¡ºåº5\nFROM player JOIN team ON player.team_id = team.team_id #é¡ºåº1\nWHERE height &amp;gt; 1.80 #é¡ºåº2\nGROUP BY player.team_id #é¡ºåº3\nHAVING num &amp;gt; 2 #é¡ºåº4\nORDER BY num DESC #é¡ºåº6\nLIMIT 2 #é¡ºåº7","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577517977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194786,"user_name":"åšå¼ˆ","can_delete":false,"product_type":"c1","uid":1433344,"ip_address":"","ucode":"B1A69837E41972","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/EcYNib1bnDf5dz6JcrE8AoyZYMdqic2VNmbBtCcVZTO9EoDZZxqlQDEqQKo6klCCmklOtN9m0dTd2AOXqSneJYLw/132","comment_is_top":false,"comment_ctime":1585106378,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10175040970","product_id":100029501,"comment_content":"<br>éœ€è¦åˆ›å»ºç´¢å¼•çš„æƒ…å†µï¼š<br>1ã€\tå­—æ®µå€¼å”¯ä¸€<br>2ã€\tWhereæ¡ä»¶<br>3ã€\tGroup by å’Œorder by<br>4ã€\tUpdateã€deleteçš„whereæ¡ä»¶<br>5ã€\tDistinctå­—æ®µ<br>6ã€\tå¤šè¡¨joinæ“ä½œæ—¶ï¼Œè¡¨å°½é‡ä¸è¶…è¿‡3ä¸ªï¼Œå¯¹whereæ¡ä»¶åˆ›å»ºç´¢å¼•ï¼Œå¯¹è¿æ¥çš„å­—æ®µåˆ›å»ºç´¢å¼•ä¸”ç±»å‹ä¸€è‡´<br>7ã€\tå¤šä¸ªå•åˆ—ç´¢å¼•åœ¨å¤šæ¡ä»¶æŸ¥è¯¢æ—¶åªä¼šç”Ÿæ•ˆä¸€ä¸ªç´¢å¼•ï¼ˆMySQL ä¼šé€‰æ‹©å…¶ä¸­ä¸€ä¸ªé™åˆ¶æœ€ä¸¥æ ¼çš„ä½œä¸ºç´¢å¼•ï¼‰ï¼Œæ‰€ä»¥åœ¨å¤šæ¡ä»¶è”åˆæŸ¥è¯¢çš„æ—¶å€™æœ€å¥½åˆ›å»ºè”åˆç´¢å¼•ã€‚<br><br>ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„æƒ…å†µï¼š<br>1ã€\tWHERE æ¡ä»¶ï¼ˆåŒ…æ‹¬ GROUP BYã€ORDER BYï¼‰é‡Œç”¨ä¸åˆ°çš„å­—æ®µä¸éœ€è¦åˆ›å»ºç´¢å¼•<br>2ã€\tå¦‚æœè¡¨è®°å½•å¤ªå°‘ï¼Œæ¯”å¦‚å°‘äº 1000 ä¸ªï¼Œé‚£ä¹ˆæ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„<br>3ã€\tå­—æ®µä¸­å¦‚æœæœ‰å¤§é‡é‡å¤æ•°æ®ï¼Œä¹Ÿä¸ç”¨åˆ›å»ºç´¢å¼•ï¼Œæ¯”å¦‚æ€§åˆ«å­—æ®µ<br>4ã€\té¢‘ç¹æ›´æ–°çš„å­—æ®µä¸ä¸€å®šè¦åˆ›å»ºç´¢å¼•<br><br>ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µï¼š<br>1ã€\tå¦‚æœç´¢å¼•è¿›è¡Œäº†è¡¨è¾¾å¼è®¡ç®—ï¼Œåˆ™ä¼šå¤±æ•ˆ<br>2ã€\tå¦‚æœå¯¹ç´¢å¼•ä½¿ç”¨å‡½æ•°ï¼Œä¹Ÿä¼šé€ æˆå¤±æ•ˆ<br>3ã€\tåœ¨ WHERE å­å¥ä¸­ï¼Œå¦‚æœåœ¨ OR å‰çš„æ¡ä»¶åˆ—è¿›è¡Œäº†ç´¢å¼•ï¼Œè€Œåœ¨ OR åçš„æ¡ä»¶åˆ—æ²¡æœ‰è¿›è¡Œç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•ä¼šå¤±æ•ˆ<br>4ã€\tå½“æˆ‘ä»¬ä½¿ç”¨ LIKE è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™ï¼Œåé¢ä¸èƒ½æ˜¯ %<br>5ã€\tç´¢å¼•åˆ—å°½é‡è®¾ç½®ä¸º NOT NULL çº¦æŸ<br>6ã€\tæˆ‘ä»¬åœ¨ä½¿ç”¨è”åˆç´¢å¼•çš„æ—¶å€™è¦æ³¨æ„æœ€å·¦åŸåˆ™","like_count":2},{"had_liked":false,"id":129429,"user_name":"åŠ è½½ä¸­â€¦â€¦","can_delete":false,"product_type":"c1","uid":1366948,"ip_address":"","ucode":"3E59A0A0784D0A","user_header":"https://static001.geekbang.org/account/avatar/00/14/db/a4/191be6ad.jpg","comment_is_top":false,"comment_ctime":1567128357,"is_pvip":false,"replies":[{"id":"53410","content":"é‡å¤å€¼é«˜çš„å­—æ®µä¸€èˆ¬ä¸åˆ›å»ºç´¢å¼•ï¼Œé‡å¤ç‡é«˜äº10%å¯ä»¥è€ƒè™‘ä¸åˆ›å»ºç´¢å¼•ï¼Œå…·ä½“æƒ…å†µä¹Ÿè¦å…·ä½“åˆ†æï¼Œæ¯”å¦‚é€šå¸¸æˆ‘ä»¬éƒ½ä¸åº”è¯¥ç»™æ€§åˆ«å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºé‡å¤åº¦é«˜ï¼Œä½†æ˜¯å¦‚æœæ•°æ®é›†æ˜¯å¥³äººå›½ï¼Œç”·æ€§æ¯”ä¾‹åªæœ‰0.01%ï¼Œè€Œä¸”æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢å“ªäº›ä¸ºç”·æ€§çš„æƒ…å†µï¼Œæ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ•ˆç‡ä¼šæ›´é«˜ã€‚è¿™ç§æƒ…å†µä¹Ÿé€‚ç”¨äºæŸç§ç–¾ç—…çš„æŸ¥è¯¢ï¼Œæ˜¯å¦æ‚£æœ‰æŸä¸ªç½•è§ç—…çš„æ•°å€¼ä¸º0æˆ–è€…1ï¼Œä¸”ç–¾ç—…çš„å‘ç—…ç‡ï¼ˆæ•°å€¼=1çš„æƒ…å†µï¼‰å¾€å¾€å¾ˆä½ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦è¿›è¡ŒæŸ¥è¯¢å“ªäº›äººæ‚£ç—…äº†è¿™ç§ç–¾ç—…ï¼Œå°†è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ•ˆç‡é«˜ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³è¦æŸ¥æ‰¾çš„è¿™ä¸ªäººç¾¤åŒºåˆ†åº¦è¿˜æ˜¯å¾ˆé«˜çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1570434894,"ip_address":"","comment_id":129429,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10157062949","product_id":100029501,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œæœ‰æ²¡æœ‰ç»éªŒæ•°æ®ï¼Œåœ¨ç´¢å¼•åŒºåˆ†åº¦ä½äºâ€œæŸä¸ªå€¼â€(80%)çš„æ—¶å€™ï¼Œå°±ä¸é€‚åˆåœ¨è¿™ä¸ªåˆ—ä¸Šå»ºç«‹ç´¢å¼•äº†ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465463,"discussion_content":"é‡å¤å€¼é«˜çš„å­—æ®µä¸€èˆ¬ä¸åˆ›å»ºç´¢å¼•ï¼Œé‡å¤ç‡é«˜äº10%å¯ä»¥è€ƒè™‘ä¸åˆ›å»ºç´¢å¼•ï¼Œå…·ä½“æƒ…å†µä¹Ÿè¦å…·ä½“åˆ†æï¼Œæ¯”å¦‚é€šå¸¸æˆ‘ä»¬éƒ½ä¸åº”è¯¥ç»™æ€§åˆ«å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºé‡å¤åº¦é«˜ï¼Œä½†æ˜¯å¦‚æœæ•°æ®é›†æ˜¯å¥³äººå›½ï¼Œç”·æ€§æ¯”ä¾‹åªæœ‰0.01%ï¼Œè€Œä¸”æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢å“ªäº›ä¸ºç”·æ€§çš„æƒ…å†µï¼Œæ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ•ˆç‡ä¼šæ›´é«˜ã€‚è¿™ç§æƒ…å†µä¹Ÿé€‚ç”¨äºæŸç§ç–¾ç—…çš„æŸ¥è¯¢ï¼Œæ˜¯å¦æ‚£æœ‰æŸä¸ªç½•è§ç—…çš„æ•°å€¼ä¸º0æˆ–è€…1ï¼Œä¸”ç–¾ç—…çš„å‘ç—…ç‡ï¼ˆæ•°å€¼=1çš„æƒ…å†µï¼‰å¾€å¾€å¾ˆä½ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦è¿›è¡ŒæŸ¥è¯¢å“ªäº›äººæ‚£ç—…äº†è¿™ç§ç–¾ç—…ï¼Œå°†è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ•ˆç‡é«˜ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³è¦æŸ¥æ‰¾çš„è¿™ä¸ªäººç¾¤åŒºåˆ†åº¦è¿˜æ˜¯å¾ˆé«˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570434894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122416,"user_name":"Geek_Wison","can_delete":false,"product_type":"c1","uid":1504371,"ip_address":"","ucode":"2CD880F07FDD57","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er4HlmmWfWicNmo3x3HKaOwz3ibcicDFlV5xILbILKGFCXbnaLf2fZRARfBdVBC5NhIPmXxaxA0T9Jhg/132","comment_is_top":false,"comment_ctime":1565361945,"is_pvip":false,"replies":[{"id":"63545","content":"å¦‚æœè”åˆç´¢å¼•çš„ä¸­çš„å­—æ®µè¯­å¥éƒ½ç”¨äº†ï¼Œå°±ä¸ä¼šå¤±æ•ˆï¼Œä¸‹é¢æœ‰åŒå­¦å›ç­”äº†ï¼Œè§£é‡Šçš„æ­£ç¡®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577517569,"ip_address":"","comment_id":122416,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10155296537","product_id":100029501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ¬èŠ‚çš„å†…å®¹æˆ‘æœ‰ä¸ªç–‘æƒ‘çš„åœ°æ–¹ï¼šåˆ›å»ºè”åˆç´¢å¼•(comment_time, user_id)ï¼Œä½†æ˜¯æŸ¥è¯¢è¯­å¥æ˜¯å…ˆGROUP BYï¼Œç„¶åå†ORDER BYï¼Œé‚£è¿™æ ·å­çš„è¯ï¼Œè¿™ä¸ªè”åˆç´¢å¼•ä¸æ˜¯åº”è¯¥ä¸ç¬¦åˆæœ€å·¦ä¾§åŸåˆ™è€Œå¤±æ•ˆäº†å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462242,"discussion_content":"å¦‚æœè”åˆç´¢å¼•çš„ä¸­çš„å­—æ®µè¯­å¥éƒ½ç”¨äº†ï¼Œå°±ä¸ä¼šå¤±æ•ˆï¼Œä¸‹é¢æœ‰åŒå­¦å›ç­”äº†ï¼Œè§£é‡Šçš„æ­£ç¡®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577517569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1219496,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","nickname":"LeonğŸ“·","note":"","ucode":"B9BBD1EFAAE5A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8163,"discussion_content":"è¯­å¥ä¸­åªç”¨ä¸€éƒ¨åˆ†éœ€è¦è€ƒè™‘æœ€å·¦åŒ¹é…åŸåˆ™ï¼Œå¦‚æœè”åˆç´¢å¼•çš„ä¸­çš„å­—æ®µè¯­å¥éƒ½ç”¨äº†ï¼Œå°±ä¸éœ€è¦è€ƒè™‘æœ€å·¦åŒ¹é…åŸåˆ™äº†ï¼Œä¸ä¼šå¤±æ•ˆ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1567811094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122383,"user_name":"Ronnyz","can_delete":false,"product_type":"c1","uid":1488280,"ip_address":"","ucode":"9F34527B1D343D","user_header":"https://static001.geekbang.org/account/avatar/00/16/b5/98/ffaf2aca.jpg","comment_is_top":false,"comment_ctime":1565353905,"is_pvip":false,"replies":[{"id":"63547","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577517679,"ip_address":"","comment_id":122383,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10155288497","product_id":100029501,"comment_content":"ä½œä¸šï¼š<br>å¯¹comment_timeä½¿ç”¨äº†å‡½æ•°ï¼Œç´¢å¼•å¤±æ•ˆ<br>SELECT comment_id, comment_text, comment_time FROM product_comment WHERE comment_time BETWEEN DATE(&#39;2018-10-01 10:00:00&#39;) AND DATE(&#39;2018-10-02 10:00:00&#39;);<br><br>2888 rows in set (1.60 sec)","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462231,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577517679,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158677,"user_name":"å¡å¸ƒ","can_delete":false,"product_type":"c1","uid":1188032,"ip_address":"","ucode":"BB8C34DE1D67D9","user_header":"https://static001.geekbang.org/account/avatar/00/12/20/c0/6367536e.jpg","comment_is_top":false,"comment_ctime":1575431401,"is_pvip":false,"replies":[{"id":"62625","content":"åŠ æ²¹å¡å¸ƒ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577078304,"ip_address":"","comment_id":158677,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870398697","product_id":100029501,"comment_content":"KLOOKæ ¡æ‹›é¢è¯•çš„æ—¶å€™å°±é—®äº†ç´¢å¼•ï¼Œé‚£æ—¶å€™å¯¹ç´¢å¼•ä¸€æ¦‚ä¸é€šï¼Œè¿™å›å¾—åœ¨ä¸“æ è¡¥å›æ¥ã€‚","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476804,"discussion_content":"åŠ æ²¹å¡å¸ƒ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577078304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123600,"user_name":"melon","can_delete":false,"product_type":"c1","uid":1327313,"ip_address":"","ucode":"AFBE9426C10AFA","user_header":"https://static001.geekbang.org/account/avatar/00/14/40/d1/fb6f402a.jpg","comment_is_top":false,"comment_ctime":1565709730,"is_pvip":false,"replies":[{"id":"63793","content":"æå‡æ£€ç´¢æ•ˆç‡","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577542073,"ip_address":"","comment_id":123600,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860677026","product_id":100029501,"comment_content":"è€å¸ˆ ä¸ºä»€ä¹ˆgroup by   åçš„åˆ—è¦åŠ ç´¢å¼•å‘¢ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462741,"discussion_content":"æå‡æ£€ç´¢æ•ˆç‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577542073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122183,"user_name":"LiuChen","can_delete":false,"product_type":"c1","uid":1578078,"ip_address":"","ucode":"91DAAE1029E3B9","user_header":"https://static001.geekbang.org/account/avatar/00/18/14/5e/6d4f328f.jpg","comment_is_top":false,"comment_ctime":1565313640,"is_pvip":false,"replies":[{"id":"63557","content":"ç›´æ¥ç”¨å°±å¯ä»¥ï¼Œå°±æ˜¯çœ‹èƒ½å¦ä½¿ç”¨ä¸Šç´¢å¼•ï¼Œä½ å¯ä»¥ç”¨ EXPLAINæ¥æ£€æŸ¥ä¸‹ï¼Œçœ‹çœ‹SQLè¯­å¥æ˜¯å¦ç”¨åˆ°äº†ç´¢å¼•","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577518109,"ip_address":"","comment_id":122183,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860280936","product_id":100029501,"comment_content":"è€å¸ˆï¼Œå¯¹äºå·²æœ‰çš„è¡¨ç»“æ„å»åˆ›å»ºç´¢å¼•ï¼Œåˆ›å»ºåå°±ç›´æ¥å¯ä»¥ç”¨å—ï¼Ÿéœ€ä¸éœ€è¦å…¶ä»–æ“ä½œï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462136,"discussion_content":"ç›´æ¥ç”¨å°±å¯ä»¥ï¼Œå°±æ˜¯çœ‹èƒ½å¦ä½¿ç”¨ä¸Šç´¢å¼•ï¼Œä½ å¯ä»¥ç”¨ EXPLAINæ¥æ£€æŸ¥ä¸‹ï¼Œçœ‹çœ‹SQLè¯­å¥æ˜¯å¦ç”¨åˆ°äº†ç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577518109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122151,"user_name":"è’™å¼€å¼º","can_delete":false,"product_type":"c1","uid":1317706,"ip_address":"","ucode":"61B3183781B9F7","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/4a/f9df2d06.jpg","comment_is_top":false,"comment_ctime":1565311400,"is_pvip":false,"replies":[{"id":"63560","content":"WHEREæ¡ä»¶åˆ¤æ–­ï¼Œç°åœ¨æŸ¥è¯¢ä¼˜åŒ–å™¨CBOå°±å¸®æˆ‘ä»¬æ¥æ“ä½œäº†ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ä¸ç”¨æ‹…å¿ƒ å·¦å³é¡ºåºé—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577518190,"ip_address":"","comment_id":122151,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5860278696","product_id":100029501,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼ŒSQLæ‰§è¡Œwhereæ¡ä»¶çš„æ—¶å€™æ˜¯ä»å·¦åˆ°å³è¿˜æ˜¯ä»å³åˆ°å·¦å‘¢ï¼Œè¿‡æ»¤çš„æ—¶å€™å¯ä»¥ä¼˜åŒ–å…ˆæ‰§è¡Œè¿‡æ»¤æ•°æ®å¤šçš„æ¡ä»¶ã€‚","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462120,"discussion_content":"WHEREæ¡ä»¶åˆ¤æ–­ï¼Œç°åœ¨æŸ¥è¯¢ä¼˜åŒ–å™¨CBOå°±å¸®æˆ‘ä»¬æ¥æ“ä½œäº†ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ä¸ç”¨æ‹…å¿ƒ å·¦å³é¡ºåºé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577518190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043738,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","nickname":"asdf100","note":"","ucode":"39D8D71453E575","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4632,"discussion_content":"åœ¨æœ€æ–°ç‰ˆæœ¬çš„MYSQLä¸­ï¼Œå¯¹äºwhereä¸­å­—æ®µçš„é¡ºåºå…¶å®ä¼šè‡ªåŠ¨è°ƒæ•´ä¸ºç¬¦åˆç´¢å¼•å­—æ®µçš„é¡ºåºï¼Œä¸è¿‡å»ºè®®ç»Ÿä¸€æŒ‰ç´¢å¼•å­—æ®µçš„é¡ºåºå†™. å¦‚idx(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;)ï¼Œåˆ™where t=&#39;test&#39; and b=1 and c=2 and a=8 ä¹Ÿæ˜¯å¯ä»¥åˆ©ç”¨åˆ°ç´¢å¼•çš„, ï¼ˆæµ‹è¯•çš„ mysql5.7ç‰ˆæœ¬ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565609189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1100142,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c9/6e/1ac1c955.jpg","nickname":"niemo","note":"","ucode":"71364762238367","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4331,"discussion_content":"sqlæ‰§è¡Œwhereæ¡ä»¶çš„é¡ºåºæ˜¯ä»å³åˆ°å·¦å§ï¼Œè€Œåœ¨ä½¿ç”¨è”åˆç´¢å¼•çš„æ—¶å€™ æ˜¯ä¸æ˜¯è¦æŠŠæœ€å·¦çš„ç´¢å¼• å†™åœ¨whereçš„æœ€å³è¾¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565318034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358273,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"é™•è¥¿","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1664162358,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1664162358","product_id":100029501,"comment_content":"ç´¢å¼•ä½¿ç”¨å‡½æ•°DATE()ï¼Œä¹Ÿä¼šé€ æˆå¤±æ•ˆ","like_count":0},{"had_liked":false,"id":357374,"user_name":"å¹´å°‘æŒ½æ»‘ç¨½ä¸–æ— åŒ","can_delete":false,"product_type":"c1","uid":2962599,"ip_address":"å››å·","ucode":"793DCBDE25A07B","user_header":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","comment_is_top":false,"comment_ctime":1663209124,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1663209124","product_id":100029501,"comment_content":"ç´¢å¼•å¤±æ•ˆï¼Œå› ä¸ºå¯¹ç´¢å¼•ä½¿ç”¨äº†å‡½æ•°---&gt;DATE()ã€‚<br>ä¿®æ”¹ï¼š<br>SELECT comment_id, comment_text, comment_time FROM product_comment WHERE comment_time &gt;= &#39;2018-10-01 10:00:00&#39; AND comment_time &lt;= &#39;2018-10-02 10:00:00&#39;ï¼›","like_count":0},{"had_liked":false,"id":353583,"user_name":"Geek_ea4107","can_delete":false,"product_type":"c1","uid":2884374,"ip_address":"æµ™æ±Ÿ","ucode":"E1C6556D87CE55","user_header":"","comment_is_top":false,"comment_ctime":1659582119,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659582119","product_id":100029501,"comment_content":"å½“æˆ‘ä»¬ä½¿ç”¨ LIKE è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™ï¼Œæ–‡å­—æè¿°çš„æ˜¯â€œå‰é¢ä¸èƒ½æ˜¯%â€<br>åœ¨æ€»ç»“xmindå›¾è¡¨é‡Œâ€œåé¢ä¸èƒ½æ˜¯ %â€<br>æ˜¯ä¸æ˜¯ç¬”è¯¯äº†ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":301656,"user_name":"å¼ æ»”","can_delete":false,"product_type":"c1","uid":1322636,"ip_address":"","ucode":"87ABAFF0E861E0","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","comment_is_top":false,"comment_ctime":1625801341,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625801341","product_id":100029501,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªsqlä¼˜åŒ–çš„é—®é¢˜ã€‚<br><br>SELECT * FROM T1 LEFT JOIN T2 ON T1.f1 = T2.f1 AND T2.f2 IS NULL WHERE T1.f1 = &#39;2875205&#39;;<br><br><br>SELECT * FROM T1 LEFT JOIN T2 ON T1.f1 = T2.f1 WHERE T1.f1 = &#39;2875205&#39; AND T2.f2 IS NULL;<br><br><br>T1.f1    T2.f1     T2.f2éƒ½æœ‰ç´¢å¼•ï¼ŒT1è¡¨å¤§çº¦3ä¸‡è¡Œï¼ŒT2è¡¨å¤§çº¦100ä¸‡è¡Œï¼Œè¿™ä¸¤æ¡sqlçš„ç»“æœé›†æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œä¸ºä»€ä¹ˆç¬¬ä¸€æ¡sqlè¦3ç§’ï¼Œç¬¬äºŒæ¡sqlåªæœ‰1æ¯«ç§’ï¼Ÿ","like_count":0},{"had_liked":false,"id":299538,"user_name":"é†‰é£","can_delete":false,"product_type":"c1","uid":1541095,"ip_address":"","ucode":"3A70CBF9B768DD","user_header":"https://static001.geekbang.org/account/avatar/00/17/83/e7/81478c84.jpg","comment_is_top":false,"comment_ctime":1624697552,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624697552","product_id":100029501,"comment_content":"ä½¿ç”¨äº†å‡½æ•°date<br>SELECT comment_id, comment_text, comment_time FROM product_comment WHERE comment_time &gt;= &#39;2018-10-01 10:00:00&#39; AND comment_time &lt;= &#39;2018-10-02 10:00:00&#39; ","like_count":0},{"had_liked":false,"id":277709,"user_name":"é¥­","can_delete":false,"product_type":"c1","uid":1610573,"ip_address":"","ucode":"B3F1702D4DE604","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132","comment_is_top":false,"comment_ctime":1612521676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612521676","product_id":100029501,"comment_content":"è€å¸ˆï¼Œæˆ‘æ˜¯åšmeså·¥å‚åˆ¶é€ ä¸šæ–¹é¢çš„ç³»ç»Ÿï¼ŒæŸ¥è¯¢æ•°æ®è¡¨ï¼Œç»å¸¸ä¸€æ¡sqlè¦joinå…³è”åæ¥å¼ ï¼Œå¦‚æœæƒ³ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œä¸çŸ¥é“è¿™ç§æƒ…å†µæ‚¨æ€ä¹ˆçœ‹ï¼Œæ˜¯è¡¨ç»“æ„æ²¡è®¾è®¡å¥½ï¼Œè¿˜æ˜¯å¾—ä»å“ªä¸‹åŠŸå¤«","like_count":0},{"had_liked":false,"id":274087,"user_name":"å¾®ä¿¡è¿˜æ˜¯æ”¯ä»˜å®","can_delete":false,"product_type":"c1","uid":1731048,"ip_address":"","ucode":"E9C27DEFB6908C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/69/e8/bba34199.jpg","comment_is_top":false,"comment_ctime":1610841057,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610841057","product_id":100029501,"comment_content":"ç´¢å¼•å¤±æ•ˆï¼Œå› ä¸ºä½¿ç”¨äº†MySQLå†…ç½®å‡½æ•°date().","like_count":0},{"had_liked":false,"id":269343,"user_name":"Geek_c54967","can_delete":false,"product_type":"c1","uid":2244934,"ip_address":"","ucode":"464F843C45FFA9","user_header":"","comment_is_top":false,"comment_ctime":1608617608,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608617608","product_id":100029501,"comment_content":"æœ‰äº†è”åˆç´¢å¼•ï¼Œæ˜¯ä¸æ˜¯ä¸éœ€è¦å†å»ºå•åˆ—ç´¢å¼•äº†ï¼Œæ¯”å¦‚æœ‰abçš„è”åˆç´¢å¼•ï¼Œå¯¹äºæŒ‰aæˆ–è€…bå•åˆ—æ¡ä»¶æŸ¥çš„æƒ…å†µï¼Œè¿˜éœ€è¦åˆ›å»ºaå’Œbçš„å•åˆ—ç´¢å¼•å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":269341,"user_name":"Geek_c54967","can_delete":false,"product_type":"c1","uid":2244934,"ip_address":"","ucode":"464F843C45FFA9","user_header":"","comment_is_top":false,"comment_ctime":1608617261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608617261","product_id":100029501,"comment_content":"è€å¸ˆï¼Œå¯¹äºæ–‡ç« ä¸­ä¸¾çš„åœºæ™¯åœ¨å®é™…åº”ç”¨ä¸­å¯¹äºå„ç§æŸ¥è¯¢æ¡ä»¶ç»„åˆï¼ŒåŒä¸€å­—æ®µæ˜¯ä¸æ˜¯æ—¢å¯èƒ½è¦å»ºå•åˆ—ç´¢å¼•ï¼Œä¹Ÿè¦å»ºè”åˆç´¢å¼•çš„æƒ…å†µ?","like_count":0},{"had_liked":false,"id":262548,"user_name":"beyondzhao","can_delete":false,"product_type":"c1","uid":1003123,"ip_address":"","ucode":"439C944D5B1192","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/73/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1605765684,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605765684","product_id":100029501,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š<br>1. ç´¢å¼•å¯ä»¥ç†è§£ä¸ºæ•°æ®è¡Œçš„æ’åºï¼Œé‚£ä¹ˆä¸€ä¸ªæ•°æ®è¡¨å­˜åœ¨å¤šä¸ªç´¢å¼•æ—¶ï¼Œå¦‚ä½•ç†è§£å¯¹æ•°æ®è¡Œçš„æ’åºå‘¢ï¼Ÿæ˜¯ä¾æ¬¡æŒ‰ç´¢å¼•åˆ—å¯¹æ•°æ®è¡Œæ’åºï¼Œè¿˜æ˜¯å¯¹æ¯ä¸ªç´¢å¼•å­—æ®µéƒ½å­˜åœ¨ä¸€ä¸ªæ’åºï¼Ÿ<br>2. åœ¨æ–‡ä¸­æåˆ°å¯¹ OR çš„ç´¢å¼•å¤±æ•ˆæƒ…å†µï¼Œå¯¹æ¯”æƒ³åˆ°å¦‚æœæ˜¯ AND çš„è¯ï¼ŒAND å‰çš„åˆ—æœªè¿›è¡Œç´¢å¼•ï¼Œè€ŒAND åçš„åˆ—è¿›è¡Œäº†ç´¢å¼•ï¼Œé‚£ä¹ˆå¯¹ AND å‰çš„åˆ—ä¹Ÿä¼šè¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ­¤æ—¶ AND åè¿›è¡Œçš„ç´¢å¼•æ˜¯å¦ä¹Ÿä¼šå¤±æ•ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":221625,"user_name":"ä¼Ÿä¼Ÿå“¦","can_delete":false,"product_type":"c1","uid":1394961,"ip_address":"","ucode":"51E5FC28E6F0B3","user_header":"https://static001.geekbang.org/account/avatar/00/15/49/11/31d961a1.jpg","comment_is_top":false,"comment_ctime":1590551326,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590551326","product_id":100029501,"comment_content":"è€å¸ˆé—®ä¸ªé—®é¢˜ï¼š<br><br>å¦‚æœæ˜¯ æ—¶é—´èŒƒå›´æŸ¥æ‰¾ï¼Œå¦‚ä½•ä¼˜åŒ–<br>å› ä¸ºå·¦å‰ç¼€åŸå› ï¼ŒèŒƒå›´æŸ¥æ‰¾ä¸ä¼šèµ°ç´¢å¼•ã€order by æ’åºä¹Ÿå¤±æ•ˆ <br><br>è¿™ä¸ªæ€ä¹ˆä¼˜åŒ–<br>select pveTaskid,count(DISTINCT(uid)) as num from es_battle_step_log where gssid=134 and time&gt;=1589644800 and time&lt;=1590595140 group by pveTaskid order by pveTaskid","like_count":0},{"had_liked":false,"id":218515,"user_name":"Fæœ¨æœˆã€","can_delete":false,"product_type":"c1","uid":1137998,"ip_address":"","ucode":"B968471439AA8A","user_header":"https://static001.geekbang.org/account/avatar/00/11/5d/4e/79b7fa88.jpg","comment_is_top":false,"comment_ctime":1589813079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589813079","product_id":100029501,"comment_content":"è€å¸ˆåˆ›å»ºç´¢å¼•è§„å¾‹çš„ç¬¬ä¸‰æ¡ä¸­ï¼Œä¸ºä»€ä¹ˆåˆ›å»ºè”åˆç´¢å¼•çš„é¡ºåºä¸º (comment_time, user_id) è¿è¡Œæ—¶é—´ä¸º 1.990sï¼Œä¼šæ¯”ä¸¤ä¸ªå•åˆ—ç´¢å¼•è¦å¿«å‘¢ï¼Ÿè¿™ä¸ªè”åˆç´¢å¼•çš„æŸ¥è¯¢æ—¶é—´åº”è¯¥å’Œcomment_timeå•åˆ—ç´¢å¼•æ•ˆç‡ä¸€æ ·å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":216005,"user_name":"éª‘è¡Œçš„æŒæŸœJ","can_delete":false,"product_type":"c1","uid":1474214,"ip_address":"","ucode":"3163102651C653","user_header":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","comment_is_top":false,"comment_ctime":1589166239,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589166239","product_id":100029501,"comment_content":"è¿˜æ˜¯ä¹‹å‰çš„ç™¾ä¸‡æ•°æ®ï¼Œç°åœ¨å¯¼å…¥å‡ºç°äº†æ—¥æœŸç±»å‹å¼‚å¸¸æ˜¾ç¤º&quot;0000-00-00 00:00:00&quot;,ç„¶åæ€»ç»“äº†è§£å†³çš„åŠæ³•ï¼Œè¯·çœ‹åšæ–‡ğŸ‘‰https:&#47;&#47;blog.csdn.net&#47;weixin_41013322&#47;article&#47;details&#47;106024913 è°¢è°¢","like_count":0},{"had_liked":false,"id":205854,"user_name":"UKNOW","can_delete":false,"product_type":"c1","uid":1887734,"ip_address":"","ucode":"FB048BA678DD67","user_header":"https://static001.geekbang.org/account/avatar/00/1c/cd/f6/30ff4666.jpg","comment_is_top":false,"comment_ctime":1586747297,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1586747297","product_id":100029501,"comment_content":"â€œæˆ‘ä»¬è¿˜éœ€è¦å®šæœŸæŸ¥è¯¢ä½¿ç”¨ç‡ä½çš„ç´¢å¼•ï¼Œå¯¹äºä»æœªä½¿ç”¨è¿‡çš„ç´¢å¼•å¯ä»¥è¿›è¡Œåˆ é™¤â€ï¼Œæœ‰ä»€ä¹ˆå·¥å…·å¯ä»¥ç›´æ¥æŸ¥è¯¢ä½¿ç”¨ç‡ä½çš„ç´¢å¼•å—","like_count":0,"discussions":[{"author":{"id":2815900,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/f7/9c/69c5c5dc.jpg","nickname":"è¶Šé”‹åˆ©","note":"","ucode":"63E9E3F3C7D53D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411186,"discussion_content":"æ¥¼ä¸Šæœ‰æ¡è¯„è®ºé—®äº†ä¸€æ ·çš„é—®é¢˜ï¼Œæœ‰å›å¤çš„ã€‚mysql æœ‰ç»Ÿè®¡çš„å¯ä»¥çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635862158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":189652,"user_name":"åˆ˜å‡¯","can_delete":false,"product_type":"c1","uid":1350608,"ip_address":"","ucode":"EFDC932CAE61A6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/d0/86aee34c.jpg","comment_is_top":false,"comment_ctime":1584538723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584538723","product_id":100029501,"comment_content":"å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨ WHERE æ¡ä»¶æŸ¥è¯¢ï¼Œè€Œæ˜¯ç›´æ¥é‡‡ç”¨ JOINâ€¦ONâ€¦è¿›è¡Œè¿æ¥çš„è¯ï¼Œå³ä½¿ä½¿ç”¨äº†å„ç§ä¼˜åŒ–æ‰‹æ®µï¼Œæ€»çš„è¿è¡Œæ—¶é—´ä¹Ÿä¼šå¾ˆé•¿ï¼ˆ&gt;100sï¼‰ã€‚<br>joinè¦å°‘ç”¨ï¼Ÿjoinä¸€èˆ¬åªæ˜¯ä¸»å¤–å¥ç›¸é“¾æ¥å•Šï¼Œè¿™æ ·ä¹Ÿä¼šå¤±æ•ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":183838,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1583143843,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1583143843","product_id":100029501,"comment_content":"â€œå¦‚æœè¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œæ›´æ–°çš„å­—æ®µæ˜¯éç´¢å¼•å­—æ®µï¼Œæå‡çš„æ•ˆç‡ä¼šæ›´æ˜æ˜¾ï¼Œè¿™æ˜¯å› ä¸ºéç´¢å¼•å­—æ®µæ›´æ–°ä¸éœ€è¦å¯¹ç´¢å¼•è¿›è¡Œç»´æŠ¤â€œ  è€å¸ˆï¼Œè¿™å¥è¯æœ‰ç‚¹æ­§ä¹‰ã€‚éç´¢å¼•å­—æ®µä¸éœ€è¦ç»´æŠ¤ç´¢å¼•åº”è¯¥æ•ˆç‡æ¯”ç´¢å¼•æ›´æ–°æ•ˆç‡é«˜æ‰æ˜¯ã€‚è¿™è¾¹åº”è¯¥ç†è§£ä¸ºæ˜¯å› ä¸ºéç´¢å¼•å­—æ®µéœ€è¦èµ°å…¨è¡¨æ‰«æï¼Œæ‰€ä»¥åŠ äº†ç´¢å¼•æ•ˆç‡ä¼šæ›´é«˜å§ã€‚","like_count":0,"discussions":[{"author":{"id":1901164,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/02/6c/e0ae650d.jpg","nickname":"Chica Digital","note":"","ucode":"33F3847052167F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208411,"discussion_content":"ä½ ç†è§£é”™äº†ï¼Œè€å¸ˆçš„æ„æ€æ˜¯æ›´æ–°çš„å­—æ®µä¸ºéç´¢å¼•å­—æ®µï¼Œæ‰€ä»¥æ›´æ–°æ•ˆç‡è¦é«˜äº›ï¼Œå¦‚æœæ˜¯ç´¢å¼•å­—æ®µï¼Œä½ æ›´æ–°æ—¶è¿˜éœ€è¦æ›´æ–°ç›¸åº”çš„ç´¢å¼•ï¼Œåˆ™æ›´æ–°æ•ˆç‡ä½ã€‚ä»–è¿™é‡Œè¯´çš„æ˜¯æ›´æ–°å­—æ®µå’Œæ•ˆç‡ä¸æ˜¯è¯´æŸ¥è¯¢çš„å­—æ®µï¼Œæ‰€ä»¥å“ªæ¥çš„å…¨è¡¨æ‰«æï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584543686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183832,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1583142306,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583142306","product_id":100029501,"comment_content":"å¦‚æœæ™®é€šç´¢å¼•ä¸­æœ‰nullå€¼ï¼Œåœ¨B+æ ‘ä¸­å¦‚ä½•å­˜å‚¨çš„","like_count":0},{"had_liked":false,"id":183830,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1583142084,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583142084","product_id":100029501,"comment_content":"æ›´æ–°è”åˆç´¢å¼•çš„è¯è¦å›è¡¨åˆ°èšç°‡ç´¢å¼•æ›´æ–°ä¹ˆ<br>","like_count":0},{"had_liked":false,"id":183427,"user_name":"ğŸƒ","can_delete":false,"product_type":"c1","uid":1337052,"ip_address":"","ucode":"D1E4560C49139A","user_header":"https://static001.geekbang.org/account/avatar/00/14/66/dc/fdffbc96.jpg","comment_is_top":false,"comment_ctime":1583038081,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583038081","product_id":100029501,"comment_content":"è¯·é—®ä»€ä¹ˆæ—¶å€™éœ€è¦å»ºè”åˆç´¢å¼•ï¼Œä»€ä¹ˆæ—¶å€™å¯¹å¤šä¸ªå­—æ®µåˆ†åˆ«å»ºç«‹ç´¢å¼•å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":179026,"user_name":"Jun","can_delete":false,"product_type":"c1","uid":1608959,"ip_address":"","ucode":"48B7D8DDAE9CB6","user_header":"https://static001.geekbang.org/account/avatar/00/18/8c/ff/9edc274f.jpg","comment_is_top":false,"comment_ctime":1581885646,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1581885646","product_id":100029501,"comment_content":"è¯·é—®è€å¸ˆï¼Œå¦‚æœwhereé‡Œé¢å­—æ®µæœ‰ç´¢å¼•ï¼ŒæŠŠå®ƒçš„è¿‡æ»¤æ¡ä»¶æ”¹ä¸ºæ”¾åœ¨Join on çš„è¡¨é“¾æ¥æ¡ä»¶é‡Œé¢ï¼Œæ€§èƒ½ä¼šæœ‰å˜åŒ–å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1350608,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9b/d0/86aee34c.jpg","nickname":"åˆ˜å‡¯","note":"","ucode":"EFDC932CAE61A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208252,"discussion_content":"æœŸå¾…å›ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584540524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174320,"user_name":"CrazyCodes","can_delete":false,"product_type":"c1","uid":1081205,"ip_address":"","ucode":"C9C0E72522EB5B","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/75/551c5d6c.jpg","comment_is_top":false,"comment_ctime":1580139544,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580139544","product_id":100029501,"comment_content":"ä½¿ç”¨äº†dateå‡½æ•°ï¼Œæ‰€ä»¥å¤±æ•ˆ","like_count":0},{"had_liked":false,"id":174319,"user_name":"CrazyCodes","can_delete":false,"product_type":"c1","uid":1081205,"ip_address":"","ucode":"C9C0E72522EB5B","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/75/551c5d6c.jpg","comment_is_top":false,"comment_ctime":1580139516,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1580139516","product_id":100029501,"comment_content":"é™ˆè€å¸ˆå¥½ï¼Œæˆ‘å¯¹æœ¬ç¯‡<br>â€œæˆ‘ä»¬è¦å°½å¯èƒ½æ‰©å±•ç´¢å¼•ï¼Œè€Œä¸æ˜¯æ–°å»ºç´¢å¼•â€ è¿™å¥è¯ä¸å¤ªç†è§£<br><br>å¦‚ä½•æ‰©å±•ç´¢å¼•","like_count":0,"discussions":[{"author":{"id":1698994,"avatar":"https://static001.geekbang.org/account/avatar/00/19/ec/b2/b88f8464.jpg","nickname":"ç‹ç£Š","note":"","ucode":"294775E8EEA078","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299391,"discussion_content":"å°±æ˜¯åœ¨åŸæœ‰ç´¢å¼•ä¸Šæ‰©å±•ï¼Œe.g:åœ¨è”åˆç´¢å¼•ä¸Šæ·»åŠ æ–°çš„å­—æ®µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597672164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167178,"user_name":"rike","can_delete":false,"product_type":"c1","uid":1583833,"ip_address":"","ucode":"920AAD0BD9245C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","comment_is_top":false,"comment_ctime":1577708395,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577708395","product_id":100029501,"comment_content":"â€œWHERE æ¡ä»¶ï¼ˆåŒ…æ‹¬ GROUP BYã€ORDER BYï¼‰é‡Œç”¨ä¸åˆ°çš„å­—æ®µä¸éœ€è¦åˆ›å»ºç´¢å¼•â€ï¼Œè¿™å¥è¯åº”è¯¥åº”è¯¥æ”¹ä¸ºæŸ¥è¯¢ç»“æœé‡Œçš„å­—æ®µä¸éœ€è¦åˆ›å»ºç´¢å¼•ã€‚","like_count":0},{"had_liked":false,"id":165306,"user_name":"taoist","can_delete":false,"product_type":"c1","uid":1195004,"ip_address":"","ucode":"D70AFE25CD8F10","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/fc/04a75cd0.jpg","comment_is_top":false,"comment_ctime":1577197863,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1577197863","product_id":100029501,"comment_content":"ç´¢å¼•ä¼šå¤±æ•ˆ,å› ä¸ºå¯¹ç´¢å¼•å­—æ®µè¿›è¡Œå‡½æ•°æ“ä½œã€‚<br><br>SELECT comment_id, comment_text, comment_time FROM product_comment WHERE comment_time &gt;= DATE(&#39;2018-10-01 10:00:00&#39;) AND comment_time &lt;= DATE(&#39;2018-10-02 10:00:00&#39;)","like_count":0},{"had_liked":false,"id":164979,"user_name":"æ—…é€”","can_delete":false,"product_type":"c1","uid":1212902,"ip_address":"","ucode":"5022477E8E9441","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/e6/6cafed37.jpg","comment_is_top":false,"comment_ctime":1577121970,"is_pvip":false,"replies":[{"id":"63475","content":"å“ˆå“ˆ è°¢è°¢æ—…é€”åŒå­¦ Fighting~","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577503787,"ip_address":"","comment_id":164979,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577121970","product_id":100029501,"comment_content":"è¿™èŠ‚ä¸“æ æˆ‘æƒ³èƒŒä¸‹æ¥,å¹²è´§å¤ªå¤šäº†<br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478975,"discussion_content":"å“ˆå“ˆ è°¢è°¢æ—…é€”åŒå­¦ Fighting~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577503787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164486,"user_name":"ç‹åŠ æ­¦","can_delete":false,"product_type":"c1","uid":1665471,"ip_address":"","ucode":"DDCFE578C6C428","user_header":"https://static001.geekbang.org/account/avatar/00/19/69/bf/50a824a4.jpg","comment_is_top":false,"comment_ctime":1577006298,"is_pvip":false,"replies":[{"id":"62647","content":"å¯¹çš„ è¯´æ˜çš„ä¸é”™","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577080926,"ip_address":"","comment_id":164486,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577006298","product_id":100029501,"comment_content":"ç´¢å¼•ä¼šå¤±æ•ˆçš„ï¼<br>åŸå› â€”â€”<br>åœ¨ä¸Šè¿°çš„é‚£æ¡æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨äº†Date()å‡½æ•°ï¼Œæ‰€ä»¥ç´¢å¼•ä¼šå¤±æ•ˆï¼Œ<br><br>æœ€ç»ˆéœ€è¦æ”¹ä¸º<br>SELECT comment_id, comment_text, comment_time FROM product_comment WHERE  comment_time BETWEEN DATE(&#39;2018-10-01 10:00:00&#39;) AND DATE(&#39;2018-10-02 10:00:00&#39;)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478787,"discussion_content":"å¯¹çš„ è¯´æ˜çš„ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577080926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147926,"user_name":"Tonge","can_delete":false,"product_type":"c1","uid":1501729,"ip_address":"","ucode":"4A247F628C4DCC","user_header":"https://static001.geekbang.org/account/avatar/00/16/ea/21/e3b11423.jpg","comment_is_top":false,"comment_ctime":1572919570,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572919570","product_id":100029501,"comment_content":"è€å¸ˆï¼ŒEXPLAIN åœ¨SQL SERVERä¸Šä¸èƒ½ç”¨ï¼Œæœ‰å“ªä¸ªæ˜¯ç­‰ä»·çš„å—åœ¨SQL SERVERä¸Šï¼Ÿ","like_count":0},{"had_liked":false,"id":144278,"user_name":"Coool","can_delete":false,"product_type":"c1","uid":1701702,"ip_address":"","ucode":"1D1AB3270B02B9","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/46/209ca424.jpg","comment_is_top":false,"comment_ctime":1571887096,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571887096","product_id":100029501,"comment_content":"ä¸ºä»€ä¹ˆå»ºç«‹äº†current_timeçš„ç´¢å¼•ï¼ŒæŸ¥è¯¢è¯„è®ºæ—¶é—´åœ¨ 2018 å¹´ 10 æœˆ 1 æ—¥ä¸Šåˆ 10 ç‚¹åˆ° 2018 å¹´ 10 æœˆ 2 æ—¥ä¸Šåˆ 10 ç‚¹ä¹‹é—´çš„è¯„è®ºè¿˜æ˜¯è¿è¡Œæ—¶é—´å¥½æ…¢ï¼Ÿå·²ç»å°†dateå‡½æ•°ä½œç”¨åœ¨å…·ä½“æ—¶é—´ä¸Šï¼Œæœªå¯¹current_timeè¿›è¡Œå‡½æ•°å¤„ç†ã€‚","like_count":0},{"had_liked":false,"id":144228,"user_name":"Coool","can_delete":false,"product_type":"c1","uid":1701702,"ip_address":"","ucode":"1D1AB3270B02B9","user_header":"https://static001.geekbang.org/account/avatar/00/19/f7/46/209ca424.jpg","comment_is_top":false,"comment_ctime":1571880995,"is_pvip":false,"replies":[{"id":"62696","content":"å—¯ å¸¸ç”¨å­—æ®µåˆ›å»ºç´¢å¼•","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577084822,"ip_address":"","comment_id":144228,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571880995","product_id":100029501,"comment_content":"SELECT<br>\tuser_id,<br>\tCOUNT(*) AS num <br>FROM<br>\tproduct_comment <br>GROUP BY<br>\tuser_id <br>\tLIMIT 100;<br><br>æœªåˆ›å»ºç´¢å¼•æŸ¥è¯¢æ—¶é—´ï¼š10.148s<br><br>åˆ›å»ºuser_idç´¢å¼•åæŸ¥è¯¢æ—¶é—´ï¼š0.076s","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471852,"discussion_content":"å—¯ å¸¸ç”¨å­—æ®µåˆ›å»ºç´¢å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577084822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141939,"user_name":"é›ªé£é¸¿","can_delete":false,"product_type":"c1","uid":1012325,"ip_address":"","ucode":"65D7B030828809","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/65/68bd8177.jpg","comment_is_top":false,"comment_ctime":1571272716,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1571272716","product_id":100029501,"comment_content":"ä¸€å¼ è¡¨æœ‰A,B,C,Då››ä¸ªå­—æ®µï¼Œå»ºç«‹è¦†ç›–ç´¢å¼•(A,B) include(C)<br>æ‰§è¡ŒæŸ¥è¯¢ï¼šSELECT C FROM Table WHERE A=&#39;&#39; AND B=&#39;&#39;ä½¿ç”¨äº†ç´¢å¼•<br>æŸ¥è¯¢ï¼šSELECT D FROM Table WHERE A=&#39;&#39; AND B=&#39;&#39; çœ‹æ‰§è¡Œè®¡åˆ’RID Lookup(Heap)æ¶ˆè€—å ç”¨92%ï¼ŒIndex Seek(NonClustered)æ¶ˆè€—å 8%<br>æ‰€ä»¥ï¼Œæ˜¯å¦å¯ä»¥ç†è§£ä¸ºä½¿ä¸ä½¿ç”¨ç´¢å¼•ä¸ä»…è¦çœ‹whereæ¡ä»¶ï¼Œä¹Ÿè¦çœ‹è¦æŸ¥è¯¢çš„å­—æ®µï¼Ÿ","like_count":0},{"had_liked":false,"id":137154,"user_name":"Ansyear","can_delete":false,"product_type":"c1","uid":1629257,"ip_address":"","ucode":"489CE96852EA2C","user_header":"https://static001.geekbang.org/account/avatar/00/18/dc/49/43ae1627.jpg","comment_is_top":false,"comment_ctime":1569636304,"is_pvip":false,"replies":[{"id":"53339","content":"æ„Ÿè°¢ï¼æœ‰äº›åœ°æ–¹ä¼šç»™å‡ºæ•°æ®é›†ï¼Œè®©å¤§å®¶åšç»ƒä¹ ï¼Œè¿™æ ·ä¼šæ›´å®¹æ˜“ç†è§£","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1570423098,"ip_address":"","comment_id":137154,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569636304","product_id":100029501,"comment_content":"å¾ˆå¤šç« èŠ‚ç¡®å®æ¯”mysql45è®²çš„æ›´æ¸…æ¥šæ›´å®¹æ˜“ç†è§£ï¼Œä¹Ÿæ›´è¯¦ç»†","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468961,"discussion_content":"æ„Ÿè°¢ï¼æœ‰äº›åœ°æ–¹ä¼šç»™å‡ºæ•°æ®é›†ï¼Œè®©å¤§å®¶åšç»ƒä¹ ï¼Œè¿™æ ·ä¼šæ›´å®¹æ˜“ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570423098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134504,"user_name":"ruvikvan","can_delete":false,"product_type":"c1","uid":1053354,"ip_address":"","ucode":"C6B5FDDB6A266B","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/aa/1299c316.jpg","comment_is_top":false,"comment_ctime":1568856540,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"1568856540","product_id":100029501,"comment_content":"æœ€å·¦åŸåˆ™(a,b,c)åœ¨ä½¿ç”¨ï¼ˆb,cï¼‰ã€ï¼ˆcï¼‰ä¹Ÿä¼šèµ°ç´¢å¼• ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1706074,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/08/5a/4d709cf5.jpg","nickname":"Prayã€PF","note":"","ucode":"1E3E4073763490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284252,"discussion_content":"ä¸ä¼šèµ°å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592485992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":16203,"discussion_content":"æ€ä¹ˆçŸ¥é“ (b,c) å’Œ (c) ä¹Ÿç”¨äº†ç´¢å¼•ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568876562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1053354,"avatar":"https://static001.geekbang.org/account/avatar/00/10/12/aa/1299c316.jpg","nickname":"ruvikvan","note":"","ucode":"C6B5FDDB6A266B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"discussion":{"id":19252,"discussion_content":"explain","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569155684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":16203,"ip_address":""},"score":19252,"extra":""},{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":1053354,"avatar":"https://static001.geekbang.org/account/avatar/00/10/12/aa/1299c316.jpg","nickname":"ruvikvan","note":"","ucode":"C6B5FDDB6A266B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20036,"discussion_content":"é‚£ä½ å€’æ˜¯è´´å‡ºæ¥å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569251105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":19252,"ip_address":""},"score":20036,"extra":""}]}]},{"had_liked":false,"id":124918,"user_name":"melon","can_delete":false,"product_type":"c1","uid":1327313,"ip_address":"","ucode":"AFBE9426C10AFA","user_header":"https://static001.geekbang.org/account/avatar/00/14/40/d1/fb6f402a.jpg","comment_is_top":false,"comment_ctime":1566014916,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566014916","product_id":100029501,"comment_content":"ç´¢å¼•åˆ— å­˜null ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ ä½†æ˜¯ ä¸ºä»€ä¹ˆæœ‰çš„æ—¶å€™ä¸ä¼šå‘¢ï¼Ÿmysql ç‰ˆæœ¬5.7.26<br>1.show index from heros;<br>| Table | Non_unique | Key_name        | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |<br>+-------+------------+-----------------+--------------+-------------+-------<br>| heros |          0 | PRIMARY         |            1 | name        | A         |          69 | NULL     | NULL   |      | BTREE      |         |               |<br>| heros |          1 | idx_role_assist |            1 | role_assist | A         |           6 | NULL     | NULL   | YES  | BTREE      |         |               |<br><br>2.explain select * from heros where role_assist is null;<br>+----+-------------+-------+------------+------+-----------------+-----------------+---------+-------+------+----------+-----------------------+<br>| id | select_type | table | partitions | type | possible_keys   | key             | key_len | ref   | rows | filtered | Extra                 |<br>+----+-------------+-------+------------+------+-----------------+-----------------+---------+-------+------+----------+-----------------------+<br>|  1 | SIMPLE      | heros | NULL       | ref  | idx_role_assist | idx_role_assist | 768     | const |   40 |   100.00 | Using index condition |<br><br>3. explain select * from heros where role_assist is not null;<br>+----+-------------+-------+------------+------+-----------------+------+---------+------+------+----------+-------------+<br>| id | select_type | table | partitions | type | possible_keys   | key  | key_len | ref  | rows | filtered | Extra       |<br>+----+-------------+-------+------------+------+-----------------+------+---------+------+------+----------+-------------+<br>|  1 | SIMPLE      | heros | NULL       | ALL  | idx_role_assist | NULL | NULL    | NULL |   69 |    42.03 | Using where |<br>éº»çƒ¦è€å¸ˆ è§£ç­”ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":124726,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1565953091,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565953091","product_id":100029501,"comment_content":"å»ºç«‹å‡½æ•°ç´¢å¼•","like_count":0},{"had_liked":false,"id":123767,"user_name":"ç¬ƒå®š","can_delete":false,"product_type":"c1","uid":1316173,"ip_address":"","ucode":"92E06FA13CC046","user_header":"https://static001.geekbang.org/account/avatar/00/14/15/4d/bbfda6b7.jpg","comment_is_top":false,"comment_ctime":1565754094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565754094","product_id":100029501,"comment_content":"ä¸Šè¿°æŸ¥è¯¢ä¸­ç¬¬äºŒæ¬¡é‡å¤æŸ¥è¯¢ä¹Ÿä¼šç”¨åˆ°æ•°æ®åº“çš„ç¼“å­˜å§ï¼Œä¹Ÿæœ‰ç´¢å¼•çš„ä½œç”¨","like_count":0},{"had_liked":false,"id":123525,"user_name":"Gankki","can_delete":false,"product_type":"c1","uid":1190150,"ip_address":"","ucode":"399C6F74286590","user_header":"https://static001.geekbang.org/account/avatar/00/12/29/06/0b327738.jpg","comment_is_top":false,"comment_ctime":1565693292,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"1565693292","product_id":100029501,"comment_content":"è€å¸ˆå¥½ï¼ŒSELECT user_id, count(*) as num FROM product_comment group by user_id order by comment_time desc limit 100<br>ï¼Œå•ç‹¬å»ºç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶é—´æŒç»­100Sä»¥ä¸Šï¼Œå¯ä»¥å¤§æ¦‚è§£é‡Šä¸€ä¸‹åŸå› å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1219496,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","nickname":"LeonğŸ“·","note":"","ucode":"B9BBD1EFAAE5A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8165,"discussion_content":"å•ç‹¬å»ºç«‹ç´¢å¼•éœ€è¦ user_idï¼Œcomment_timeä¸¤ä¸ªç´¢å¼•æ ‘ï¼Œè¯­å¥éœ€è¦æ‰«æä¸¤é¢—ç´¢å¼•æ ‘ ç„¶åè·å–ä¸¤ä¸ªç»“æœé›†åˆï¼Œç„¶åæŒ‰ç…§user_idåˆ†ç»„ï¼Œç„¶åæ ¹æ®comment_timeè¿›è¡Œæ’åºï¼Œå¦‚æœå»ºç«‹è”åˆç´¢å¼•ï¼ˆuser_idï¼Œcomment_timeï¼‰ï¼Œåªæœ‰ä¸€æ£µç´¢å¼•æ ‘user_idï¼Œcomment_timeæ˜¯æŒ‰ç…§å…ˆæ’åºuser_idå’Œç„¶åæ’åºcomment_timeç»„ç»‡çš„ï¼Œè¿›è¡Œgroup byæ“ä½œéå¸¸å¿«ï¼Œcomment_timeä¹Ÿä¸éœ€è¦æ’åºäº†ï¼Œå› ä¸ºå·²ç»æ˜¯æœ‰åºçš„ï¼Œå¦‚æœå»ºç«‹è”åˆç´¢å¼•ï¼ˆcomment_time,useridï¼‰ï¼Œå…ˆæŠŠuseridå–å‡ºæ¥ï¼Œç„¶ågroupæ“ä½œï¼Œç„¶åè¿˜è¦è¿›è¡Œcomment_timeæ’åºï¼Œç´¢å¼•ï¼ˆcomment_time,useridï¼‰ æ¯”ï¼ˆuser_idï¼Œcomment_timeï¼‰æ…¢ï¼Œæ‰€ä»¥è”åˆç´¢å¼•åº”è¯¥æŒ‰ç…§FROM > WHERE > GROUP BY > HAVING > SELECT çš„å­—æ®µ > DISTINCT > ORDER BY > LIMITçš„é¡ºåºæ¥ç¼–æ’","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567812009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1190150,"avatar":"https://static001.geekbang.org/account/avatar/00/12/29/06/0b327738.jpg","nickname":"Gankki","note":"","ucode":"399C6F74286590","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1219496,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","nickname":"LeonğŸ“·","note":"","ucode":"B9BBD1EFAAE5A2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20765,"discussion_content":"éå¸¸æ„Ÿè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569373619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":8165,"ip_address":""},"score":20765,"extra":""},{"author":{"id":1012325,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/72/65/68bd8177.jpg","nickname":"é›ªé£é¸¿","note":"","ucode":"65D7B030828809","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1219496,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","nickname":"LeonğŸ“·","note":"","ucode":"B9BBD1EFAAE5A2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":35348,"discussion_content":"ä¸æ˜¯ä¸€æ¬¡æŸ¥è¯¢åªä½¿ç”¨ä¸€ä¸ªç´¢å¼•ï¼Ÿæ€ä¹ˆä¼šå»è·å–ä¸¤ä¸ªå•ç‹¬ç´¢å¼•çš„ç»“æœé›†ï¼Ÿ\nå•ç‹¬å»ºç´¢å¼•æŸ¥è¯¢è¾ƒæ…¢ï¼Œå› ä¸ºåªä½¿ç”¨äº†user_idè¿™ä¸ªç´¢å¼•ï¼Œè€Œcomment_timeå¯¹äºæŸ¥è¯¢ä»ç„¶å¤„äºæ— åºçŠ¶æ€ï¼Œè¿™ä¸ªæ‰æ˜¯æ…¢çš„åŸå› ã€‚\nè”åˆç´¢å¼•(comment_time,user_id)æ¯”(user_id,comment_time)æ…¢å› ä¸ºgroup byæ—¶ä¸ç¬¦åˆæœ€å·¦åŒ¹é…åŸåˆ™ï¼Œåªåœ¨order byæ—¶æ‰ä½¿ç”¨äº†ç´¢å¼•ã€‚ä½†ç›¸æ¯”äºå•ç‹¬ç´¢å¼•ï¼Œcomment_timeå’Œuser_idå¯¹äºæŸ¥è¯¢éƒ½æ˜¯æœ‰åºçŠ¶æ€ï¼Œæ‰€ä»¥æ¯”å•ç‹¬ç´¢å¼•å¿«ã€‚\nä»¥ä¸Šä¸ºä¸ªäººç†è§£","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571272297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":8165,"ip_address":""},"score":35348,"extra":""},{"author":{"id":1512599,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/88nXicqmkJWm3IXVfPfGQSk8SKIBVKjuC4qhzaCkf5Ud88uvKgS4Vf5AzCJ1uaFO0gpPnxdh4CowfhpxV1kSbXw/132","nickname":"lixin","note":"","ucode":"94D99DAFB6C929","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1219496,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","nickname":"LeonğŸ“·","note":"","ucode":"B9BBD1EFAAE5A2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586994,"discussion_content":"è¶…å“¥ï¼Œä¼˜ç§€\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662648546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":8165,"ip_address":"å¹¿ä¸œ"},"score":586994,"extra":""}]}]},{"had_liked":false,"id":122279,"user_name":"JustDoDT","can_delete":false,"product_type":"c1","uid":1127175,"ip_address":"","ucode":"6AF0B80F00EAEF","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","comment_is_top":false,"comment_ctime":1565328988,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1565328988","product_id":100029501,"comment_content":"é‡åˆ°1055é”™è¯¯ï¼ŒåŸå› æ˜¯sql_mode=only_full_group_byï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰é‡åˆ°çš„ã€‚<br>æ‰§è¡Œsqlè¯­å¥ï¼š<br>SELECT user_id, count(*) as num FROM product_comment group by user_id order by comment_time desc limit 100;<br>æŠ¥é”™ä¿¡æ¯ï¼š<br>ERROR 1055 (42000): Expression #1 of ORDER BY clause is not in GROUP BY clause and contains nonaggregated column &#39;wucai.product_comment.comment_time&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by","like_count":0,"discussions":[{"author":{"id":1234682,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d6/fa/1f5bf642.jpg","nickname":"æœªæ¥çš„èƒ¡å…ˆæ£®","note":"","ucode":"AFF193AC0E2E6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5231,"discussion_content":"æŠ¥é”™é‡Œæœ‰æç¤ºçš„ï¼Œä½ è¦æ’åºçš„æ•°æ®æœªåœ¨åˆ†ç»„åçš„æ•°æ®ä¸­å‡ºç°ï¼Œæ— æ³•æ’åºï¼Œä½ è¦æŠŠæ’åºæ”¾åˆ°æŸ¥è¯¢å­—æ®µé‡Œï¼Œæˆ–è€…å†…åµŒä¸€ä¸ªå­æŸ¥è¯¢ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566098868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2597449,"avatar":"https://static001.geekbang.org/account/avatar/00/27/a2/49/7e749be2.jpg","nickname":"Nick","note":"","ucode":"37E60C08183617","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390762,"discussion_content":"å°†sql_modeè®¾ç½®ä¸ºç©ºï¼š\nSET GLOBAL sql_mode=(SELECT REPLACE(@@sql_mode,&#39;ONLY_FULL_GROUP_BY&#39;,&#39;&#39;));\n#then reconnect in mysqlworkbench or restart mysql with: service mysql restart","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630030700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122250,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1565322640,"is_pvip":false,"replies":[{"id":"63551","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577517949,"ip_address":"","comment_id":122250,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565322640","product_id":100029501,"comment_content":"ä¼šç´¢å¼•å¤±æ•ˆï¼Œç”¨åˆ°äº†DATEå‡½æ•°ï¼Œåº”è¯¥ç»™å­—ç¬¦ä¸²ä½¿ç”¨DATEå‡½æ•°<br>SELECT comment_id, comment_text, comment_time FROM product_comment WHERE comment_time &gt;= DATE(&#39;2018-10-01 10:00:00&#39;) AND comment_time &lt;= DATE(&#39;2018-10-02 10:00:00&#39;)<br><br><br>","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462174,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577517949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122198,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1565315336,"is_pvip":false,"replies":[{"id":"63556","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577518064,"ip_address":"","comment_id":122198,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565315336","product_id":100029501,"comment_content":"åº”è¯¥æŠŠå­—ç¬¦ä¸²è½¬ä¸ºdateç±»å‹","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462144,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577518064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}