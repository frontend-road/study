{"id":80449,"title":"36 | ä¸ºä»€ä¹ˆä¸´æ—¶è¡¨å¯ä»¥é‡åï¼Ÿ","content":"<p><span class=\"orange\">ä»Šå¤©æ˜¯å¤§å¹´ä¸‰åï¼Œåœ¨å¼€å§‹æˆ‘ä»¬ä»Šå¤©çš„å­¦ä¹ ä¹‹å‰ï¼Œæˆ‘è¦å…ˆå’Œä½ é“ä¸€å£°æ˜¥èŠ‚å¿«ä¹ï¼</span></p><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¼˜åŒ–joinæŸ¥è¯¢çš„æ—¶å€™ä½¿ç”¨åˆ°äº†ä¸´æ—¶è¡¨ã€‚å½“æ—¶ï¼Œæˆ‘ä»¬æ˜¯è¿™ä¹ˆç”¨çš„ï¼š</p><pre><code>create temporary table temp_t like t1;\nalter table temp_t add index(b);\ninsert into temp_t select * from t2 where b&gt;=1 and b&lt;=2000;\nselect * from t1 join temp_t on (t1.b=temp_t.b);\n</code></pre><p>ä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ä¸´æ—¶è¡¨å‘¢ï¼Ÿç›´æ¥ç”¨æ™®é€šè¡¨æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥å‘¢ï¼Ÿ</p><p>ä»Šå¤©æˆ‘ä»¬å°±ä»è¿™ä¸ªé—®é¢˜è¯´èµ·ï¼šä¸´æ—¶è¡¨æœ‰å“ªäº›ç‰¹å¾ï¼Œä¸ºä»€ä¹ˆå®ƒé€‚åˆè¿™ä¸ªåœºæ™¯ï¼Ÿ</p><p>è¿™é‡Œï¼Œæˆ‘éœ€è¦å…ˆå¸®ä½ å˜æ¸…ä¸€ä¸ªå®¹æ˜“è¯¯è§£çš„é—®é¢˜ï¼šæœ‰çš„äººå¯èƒ½ä¼šè®¤ä¸ºï¼Œä¸´æ—¶è¡¨å°±æ˜¯å†…å­˜è¡¨ã€‚ä½†æ˜¯ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µå¯æ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p><ul>\n<li>\n<p>å†…å­˜è¡¨ï¼ŒæŒ‡çš„æ˜¯ä½¿ç”¨Memoryå¼•æ“çš„è¡¨ï¼Œå»ºè¡¨è¯­æ³•æ˜¯create table â€¦ engine=memoryã€‚è¿™ç§è¡¨çš„æ•°æ®éƒ½ä¿å­˜åœ¨å†…å­˜é‡Œï¼Œç³»ç»Ÿé‡å¯çš„æ—¶å€™ä¼šè¢«æ¸…ç©ºï¼Œä½†æ˜¯è¡¨ç»“æ„è¿˜åœ¨ã€‚é™¤äº†è¿™ä¸¤ä¸ªç‰¹æ€§çœ‹ä¸Šå»æ¯”è¾ƒâ€œå¥‡æ€ªâ€å¤–ï¼Œä»å…¶ä»–çš„ç‰¹å¾ä¸Šçœ‹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ­£å¸¸çš„è¡¨ã€‚</p>\n</li>\n<li>\n<p>è€Œä¸´æ—¶è¡¨ï¼Œå¯ä»¥ä½¿ç”¨å„ç§å¼•æ“ç±»å‹ ã€‚å¦‚æœæ˜¯ä½¿ç”¨InnoDBå¼•æ“æˆ–è€…MyISAMå¼•æ“çš„ä¸´æ—¶è¡¨ï¼Œå†™æ•°æ®çš„æ—¶å€™æ˜¯å†™åˆ°ç£ç›˜ä¸Šçš„ã€‚å½“ç„¶ï¼Œä¸´æ—¶è¡¨ä¹Ÿå¯ä»¥ä½¿ç”¨Memoryå¼•æ“ã€‚</p>\n</li>\n</ul><p>å¼„æ¸…æ¥šäº†å†…å­˜è¡¨å’Œä¸´æ—¶è¡¨çš„åŒºåˆ«ä»¥åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ä¸´æ—¶è¡¨æœ‰å“ªäº›ç‰¹å¾ã€‚</p><h1>ä¸´æ—¶è¡¨çš„ç‰¹æ€§</h1><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä¸‹é¢è¿™ä¸ªæ“ä½œåºåˆ—ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3c/e3/3cbb2843ef9a84ee582330fb1bd0d6e3.png?wh=934*631\" alt=\"\"></p><center><span class=\"reference\">å›¾1 ä¸´æ—¶è¡¨ç‰¹æ€§ç¤ºä¾‹</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸´æ—¶è¡¨åœ¨ä½¿ç”¨ä¸Šæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ol>\n<li>\n<p>å»ºè¡¨è¯­æ³•æ˜¯create temporary table â€¦ã€‚</p>\n</li>\n<li>\n<p>ä¸€ä¸ªä¸´æ—¶è¡¨åªèƒ½è¢«åˆ›å»ºå®ƒçš„sessionè®¿é—®ï¼Œå¯¹å…¶ä»–çº¿ç¨‹ä¸å¯è§ã€‚æ‰€ä»¥ï¼Œå›¾ä¸­session Aåˆ›å»ºçš„ä¸´æ—¶è¡¨tï¼Œå¯¹äºsession Bå°±æ˜¯ä¸å¯è§çš„ã€‚</p>\n</li>\n<li>\n<p>ä¸´æ—¶è¡¨å¯ä»¥ä¸æ™®é€šè¡¨åŒåã€‚</p>\n</li>\n<li>\n<p>session Aå†…æœ‰åŒåçš„ä¸´æ—¶è¡¨å’Œæ™®é€šè¡¨çš„æ—¶å€™ï¼Œshow createè¯­å¥ï¼Œä»¥åŠå¢åˆ æ”¹æŸ¥è¯­å¥è®¿é—®çš„æ˜¯ä¸´æ—¶è¡¨ã€‚</p>\n</li>\n<li>\n<p>show tableså‘½ä»¤ä¸æ˜¾ç¤ºä¸´æ—¶è¡¨ã€‚</p>\n</li>\n</ol><!-- [[[read_end]]] --><p>ç”±äºä¸´æ—¶è¡¨åªèƒ½è¢«åˆ›å»ºå®ƒçš„sessionè®¿é—®ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªsessionç»“æŸçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ é™¤ä¸´æ—¶è¡¨ã€‚ä¹Ÿæ­£æ˜¯ç”±äºè¿™ä¸ªç‰¹æ€§ï¼Œ<strong>ä¸´æ—¶è¡¨å°±ç‰¹åˆ«é€‚åˆæˆ‘ä»¬æ–‡ç« å¼€å¤´çš„joinä¼˜åŒ–è¿™ç§åœºæ™¯</strong>ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>åŸå› ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p><ol>\n<li>\n<p>ä¸åŒsessionçš„ä¸´æ—¶è¡¨æ˜¯å¯ä»¥é‡åçš„ï¼Œå¦‚æœæœ‰å¤šä¸ªsessionåŒæ—¶æ‰§è¡Œjoinä¼˜åŒ–ï¼Œä¸éœ€è¦æ‹…å¿ƒè¡¨åé‡å¤å¯¼è‡´å»ºè¡¨å¤±è´¥çš„é—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>ä¸éœ€è¦æ‹…å¿ƒæ•°æ®åˆ é™¤é—®é¢˜ã€‚å¦‚æœä½¿ç”¨æ™®é€šè¡¨ï¼Œåœ¨æµç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­å®¢æˆ·ç«¯å‘ç”Ÿäº†å¼‚å¸¸æ–­å¼€ï¼Œæˆ–è€…æ•°æ®åº“å‘ç”Ÿå¼‚å¸¸é‡å¯ï¼Œè¿˜éœ€è¦ä¸“é—¨æ¥æ¸…ç†ä¸­é—´è¿‡ç¨‹ä¸­ç”Ÿæˆçš„æ•°æ®è¡¨ã€‚è€Œä¸´æ—¶è¡¨ç”±äºä¼šè‡ªåŠ¨å›æ”¶ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿™ä¸ªé¢å¤–çš„æ“ä½œã€‚</p>\n</li>\n</ol><h1>ä¸´æ—¶è¡¨çš„åº”ç”¨</h1><p>ç”±äºä¸ç”¨æ‹…å¿ƒçº¿ç¨‹ä¹‹é—´çš„é‡åå†²çªï¼Œä¸´æ—¶è¡¨ç»å¸¸ä¼šè¢«ç”¨åœ¨å¤æ‚æŸ¥è¯¢çš„ä¼˜åŒ–è¿‡ç¨‹ä¸­ã€‚å…¶ä¸­ï¼Œåˆ†åº“åˆ†è¡¨ç³»ç»Ÿçš„è·¨åº“æŸ¥è¯¢å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä½¿ç”¨åœºæ™¯ã€‚</p><p>ä¸€èˆ¬åˆ†åº“åˆ†è¡¨çš„åœºæ™¯ï¼Œå°±æ˜¯è¦æŠŠä¸€ä¸ªé€»è¾‘ä¸Šçš„å¤§è¡¨åˆ†æ•£åˆ°ä¸åŒçš„æ•°æ®åº“å®ä¾‹ä¸Šã€‚æ¯”å¦‚ã€‚å°†ä¸€ä¸ªå¤§è¡¨htï¼ŒæŒ‰ç…§å­—æ®µfï¼Œæ‹†åˆ†æˆ1024ä¸ªåˆ†è¡¨ï¼Œç„¶ååˆ†å¸ƒåˆ°32ä¸ªæ•°æ®åº“å®ä¾‹ä¸Šã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/dd/81/ddb9c43526dfd9b9a3e6f8c153478181.jpg?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾2 åˆ†åº“åˆ†è¡¨ç®€å›¾</span></center><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™ç§åˆ†åº“åˆ†è¡¨ç³»ç»Ÿéƒ½æœ‰ä¸€ä¸ªä¸­é—´å±‚proxyã€‚ä¸è¿‡ï¼Œä¹Ÿæœ‰ä¸€äº›æ–¹æ¡ˆä¼šè®©å®¢æˆ·ç«¯ç›´æ¥è¿æ¥æ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰proxyè¿™ä¸€å±‚ã€‚</p><p>åœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼Œåˆ†åŒºkeyçš„é€‰æ‹©æ˜¯ä»¥â€œå‡å°‘è·¨åº“å’Œè·¨è¡¨æŸ¥è¯¢â€ä¸ºä¾æ®çš„ã€‚å¦‚æœå¤§éƒ¨åˆ†çš„è¯­å¥éƒ½ä¼šåŒ…å«fçš„ç­‰å€¼æ¡ä»¶ï¼Œé‚£ä¹ˆå°±è¦ç”¨fåšåˆ†åŒºé”®ã€‚è¿™æ ·ï¼Œåœ¨proxyè¿™ä¸€å±‚è§£æå®ŒSQLè¯­å¥ä»¥åï¼Œå°±èƒ½ç¡®å®šå°†è¿™æ¡è¯­å¥è·¯ç”±åˆ°å“ªä¸ªåˆ†è¡¨åšæŸ¥è¯¢ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™æ¡è¯­å¥ï¼š</p><pre><code>select v from ht where f=N;\n</code></pre><p>è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åˆ†è¡¨è§„åˆ™ï¼ˆæ¯”å¦‚ï¼ŒN%1024)æ¥ç¡®è®¤éœ€è¦çš„æ•°æ®è¢«æ”¾åœ¨äº†å“ªä¸ªåˆ†è¡¨ä¸Šã€‚è¿™ç§è¯­å¥åªéœ€è¦è®¿é—®ä¸€ä¸ªåˆ†è¡¨ï¼Œæ˜¯åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆæœ€æ¬¢è¿çš„è¯­å¥å½¢å¼äº†ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœè¿™ä¸ªè¡¨ä¸Šè¿˜æœ‰å¦å¤–ä¸€ä¸ªç´¢å¼•kï¼Œå¹¶ä¸”æŸ¥è¯¢è¯­å¥æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>select v from ht where k &gt;= M order by t_modified desc limit 100;\n</code></pre><p>è¿™æ—¶å€™ï¼Œç”±äºæŸ¥è¯¢æ¡ä»¶é‡Œé¢æ²¡æœ‰ç”¨åˆ°åˆ†åŒºå­—æ®µfï¼Œåªèƒ½åˆ°æ‰€æœ‰çš„åˆ†åŒºä¸­å»æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰è¡Œï¼Œç„¶åç»Ÿä¸€åšorder by çš„æ“ä½œã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰ä¸¤ç§æ¯”è¾ƒå¸¸ç”¨çš„æ€è·¯ã€‚</p><p><strong>ç¬¬ä¸€ç§æ€è·¯æ˜¯ï¼Œ</strong>åœ¨proxyå±‚çš„è¿›ç¨‹ä»£ç ä¸­å®ç°æ’åºã€‚</p><p>è¿™ç§æ–¹å¼çš„ä¼˜åŠ¿æ˜¯å¤„ç†é€Ÿåº¦å¿«ï¼Œæ‹¿åˆ°åˆ†åº“çš„æ•°æ®ä»¥åï¼Œç›´æ¥åœ¨å†…å­˜ä¸­å‚ä¸è®¡ç®—ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªæ–¹æ¡ˆçš„ç¼ºç‚¹ä¹Ÿæ¯”è¾ƒæ˜æ˜¾ï¼š</p><ol>\n<li>\n<p>éœ€è¦çš„å¼€å‘å·¥ä½œé‡æ¯”è¾ƒå¤§ã€‚æˆ‘ä»¬ä¸¾ä¾‹çš„è¿™æ¡è¯­å¥è¿˜ç®—æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¦‚æœæ¶‰åŠåˆ°å¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚group byï¼Œç”šè‡³joinè¿™æ ·çš„æ“ä½œï¼Œå¯¹ä¸­é—´å±‚çš„å¼€å‘èƒ½åŠ›è¦æ±‚æ¯”è¾ƒé«˜ï¼›</p>\n</li>\n<li>\n<p>å¯¹proxyç«¯çš„å‹åŠ›æ¯”è¾ƒå¤§ï¼Œå°¤å…¶æ˜¯å¾ˆå®¹æ˜“å‡ºç°å†…å­˜ä¸å¤Ÿç”¨å’ŒCPUç“¶é¢ˆçš„é—®é¢˜ã€‚</p>\n</li>\n</ol><p><strong>å¦ä¸€ç§æ€è·¯å°±æ˜¯ï¼Œ</strong>æŠŠå„ä¸ªåˆ†åº“æ‹¿åˆ°çš„æ•°æ®ï¼Œæ±‡æ€»åˆ°ä¸€ä¸ªMySQLå®ä¾‹çš„ä¸€ä¸ªè¡¨ä¸­ï¼Œç„¶ååœ¨è¿™ä¸ªæ±‡æ€»å®ä¾‹ä¸Šåšé€»è¾‘æ“ä½œã€‚</p><p>æ¯”å¦‚ä¸Šé¢è¿™æ¡è¯­å¥ï¼Œæ‰§è¡Œæµç¨‹å¯ä»¥ç±»ä¼¼è¿™æ ·ï¼š</p><ul>\n<li>åœ¨æ±‡æ€»åº“ä¸Šåˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨temp_htï¼Œè¡¨é‡ŒåŒ…å«ä¸‰ä¸ªå­—æ®µvã€kã€t_modifiedï¼›</li>\n<li>åœ¨å„ä¸ªåˆ†åº“ä¸Šæ‰§è¡Œ</li>\n</ul><pre><code>select v,k,t_modified from ht_x where k &gt;= M order by t_modified desc limit 100;\n</code></pre><ul>\n<li>æŠŠåˆ†åº“æ‰§è¡Œçš„ç»“æœæ’å…¥åˆ°temp_htè¡¨ä¸­ï¼›</li>\n<li>æ‰§è¡Œ</li>\n</ul><pre><code>select v from temp_ht order by t_modified desc limit 100; \n</code></pre><p>å¾—åˆ°ç»“æœã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹å¯¹åº”çš„æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f5/0d/f5ebe0f5af37deeb4d0b63d6fb11fc0d.jpg?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾3 è·¨åº“æŸ¥è¯¢æµç¨‹ç¤ºæ„å›¾</span></center><p><strong>åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šå‘ç°æ¯ä¸ªåˆ†åº“çš„è®¡ç®—é‡éƒ½ä¸é¥±å’Œï¼Œæ‰€ä»¥ä¼šç›´æ¥æŠŠä¸´æ—¶è¡¨temp_htæ”¾åˆ°32ä¸ªåˆ†åº“ä¸­çš„æŸä¸€ä¸ªä¸Šã€‚</strong>è¿™æ—¶çš„æŸ¥è¯¢é€»è¾‘ä¸å›¾3ç±»ä¼¼ï¼Œä½ å¯ä»¥è‡ªå·±å†æ€è€ƒä¸€ä¸‹å…·ä½“çš„æµç¨‹ã€‚</p><h1>ä¸ºä»€ä¹ˆä¸´æ—¶è¡¨å¯ä»¥é‡åï¼Ÿ</h1><p>ä½ å¯èƒ½ä¼šé—®ï¼Œä¸åŒçº¿ç¨‹å¯ä»¥åˆ›å»ºåŒåçš„ä¸´æ—¶è¡¨ï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±çœ‹ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p><p>æˆ‘ä»¬åœ¨æ‰§è¡Œ</p><pre><code>create temporary table temp_t(id int primary key)engine=innodb;\n</code></pre><p>è¿™ä¸ªè¯­å¥çš„æ—¶å€™ï¼ŒMySQLè¦ç»™è¿™ä¸ªInnoDBè¡¨åˆ›å»ºä¸€ä¸ªfrmæ–‡ä»¶ä¿å­˜è¡¨ç»“æ„å®šä¹‰ï¼Œè¿˜è¦æœ‰åœ°æ–¹ä¿å­˜è¡¨æ•°æ®ã€‚</p><p><strong>è¿™ä¸ªfrmæ–‡ä»¶æ”¾åœ¨ä¸´æ—¶æ–‡ä»¶ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åçš„åç¼€æ˜¯.frmï¼Œå‰ç¼€æ˜¯â€œ#sql{è¿›ç¨‹id}_{çº¿ç¨‹id}_åºåˆ—å·â€</strong>ã€‚ä½ å¯ä»¥ä½¿ç”¨select @@tmpdirå‘½ä»¤ï¼Œæ¥æ˜¾ç¤ºå®ä¾‹çš„ä¸´æ—¶æ–‡ä»¶ç›®å½•ã€‚</p><p>è€Œå…³äºè¡¨ä¸­æ•°æ®çš„å­˜æ”¾æ–¹å¼ï¼Œåœ¨ä¸åŒçš„MySQLç‰ˆæœ¬ä¸­æœ‰ç€ä¸åŒçš„å¤„ç†æ–¹å¼ï¼š</p><ul>\n<li>åœ¨5.6ä»¥åŠä¹‹å‰çš„ç‰ˆæœ¬é‡Œï¼ŒMySQLä¼šåœ¨ä¸´æ—¶æ–‡ä»¶ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç›¸åŒå‰ç¼€ã€ä»¥.ibdä¸ºåç¼€çš„æ–‡ä»¶ï¼Œç”¨æ¥å­˜æ”¾æ•°æ®æ–‡ä»¶ï¼›</li>\n<li>è€Œä» 5.7ç‰ˆæœ¬å¼€å§‹ï¼ŒMySQLå¼•å…¥äº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶è¡¨ç©ºé—´ï¼Œä¸“é—¨ç”¨æ¥å­˜æ”¾ä¸´æ—¶æ–‡ä»¶çš„æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†åˆ›å»ºibdæ–‡ä»¶äº†ã€‚</li>\n</ul><p>ä»æ–‡ä»¶åçš„å‰ç¼€è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®åˆ›å»ºä¸€ä¸ªå«ä½œt1çš„InnoDBä¸´æ—¶è¡¨ï¼ŒMySQLåœ¨å­˜å‚¨ä¸Šè®¤ä¸ºæˆ‘ä»¬åˆ›å»ºçš„è¡¨åè·Ÿæ™®é€šè¡¨t1æ˜¯ä¸åŒçš„ï¼Œå› æ­¤åŒä¸€ä¸ªåº“ä¸‹é¢å·²ç»æœ‰æ™®é€šè¡¨t1çš„æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯å¯ä»¥å†åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨t1çš„ã€‚</p><p>ä¸ºäº†ä¾¿äºåé¢è®¨è®ºï¼Œæˆ‘å…ˆæ¥ä¸¾ä¸€ä¸ªä¾‹å­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/22/1b/22078eab5c7688c9fbfd6185555bd91b.png?wh=930*261\" alt=\"\"></p><center><span class=\"reference\">å›¾4 ä¸´æ—¶è¡¨çš„è¡¨å</span></center><p>è¿™ä¸ªè¿›ç¨‹çš„è¿›ç¨‹å·æ˜¯1234ï¼Œsession Açš„çº¿ç¨‹idæ˜¯4ï¼Œsession Bçš„çº¿ç¨‹idæ˜¯5ã€‚æ‰€ä»¥ä½ çœ‹åˆ°äº†ï¼Œsession Aå’Œsession Båˆ›å»ºçš„ä¸´æ—¶è¡¨ï¼Œåœ¨ç£ç›˜ä¸Šçš„æ–‡ä»¶ä¸ä¼šé‡åã€‚</p><p>MySQLç»´æŠ¤æ•°æ®è¡¨ï¼Œé™¤äº†ç‰©ç†ä¸Šè¦æœ‰æ–‡ä»¶å¤–ï¼Œå†…å­˜é‡Œé¢ä¹Ÿæœ‰ä¸€å¥—æœºåˆ¶åŒºåˆ«ä¸åŒçš„è¡¨ï¼Œæ¯ä¸ªè¡¨éƒ½å¯¹åº”ä¸€ä¸ªtable_def_keyã€‚</p><ul>\n<li>ä¸€ä¸ªæ™®é€šè¡¨çš„table_def_keyçš„å€¼æ˜¯ç”±â€œåº“å+è¡¨åâ€å¾—åˆ°çš„ï¼Œæ‰€ä»¥å¦‚æœä½ è¦åœ¨åŒä¸€ä¸ªåº“ä¸‹åˆ›å»ºä¸¤ä¸ªåŒåçš„æ™®é€šè¡¨ï¼Œåˆ›å»ºç¬¬äºŒä¸ªè¡¨çš„è¿‡ç¨‹ä¸­å°±ä¼šå‘ç°table_def_keyå·²ç»å­˜åœ¨äº†ã€‚</li>\n<li>è€Œå¯¹äºä¸´æ—¶è¡¨ï¼Œtable_def_keyåœ¨â€œåº“å+è¡¨åâ€åŸºç¡€ä¸Šï¼ŒåˆåŠ å…¥äº†â€œserver_id+thread_idâ€ã€‚</li>\n</ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œsession Aå’ŒsessionBåˆ›å»ºçš„ä¸¤ä¸ªä¸´æ—¶è¡¨t1ï¼Œå®ƒä»¬çš„table_def_keyä¸åŒï¼Œç£ç›˜æ–‡ä»¶åä¹Ÿä¸åŒï¼Œå› æ­¤å¯ä»¥å¹¶å­˜ã€‚</p><p>åœ¨å®ç°ä¸Šï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ç»´æŠ¤äº†è‡ªå·±çš„ä¸´æ—¶è¡¨é“¾è¡¨ã€‚è¿™æ ·æ¯æ¬¡sessionå†…æ“ä½œè¡¨çš„æ—¶å€™ï¼Œå…ˆéå†é“¾è¡¨ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è¿™ä¸ªåå­—çš„ä¸´æ—¶è¡¨ï¼Œå¦‚æœæœ‰å°±ä¼˜å…ˆæ“ä½œä¸´æ—¶è¡¨ï¼Œå¦‚æœæ²¡æœ‰å†æ“ä½œæ™®é€šè¡¨ï¼›åœ¨sessionç»“æŸçš„æ—¶å€™ï¼Œå¯¹é“¾è¡¨é‡Œçš„æ¯ä¸ªä¸´æ—¶è¡¨ï¼Œæ‰§è¡Œ â€œDROP TEMPORARY TABLE +è¡¨åâ€æ“ä½œã€‚</p><p>è¿™æ—¶å€™ä½ ä¼šå‘ç°ï¼Œbinlogä¸­ä¹Ÿè®°å½•äº†DROP TEMPORARY TABLEè¿™æ¡å‘½ä»¤ã€‚ä½ ä¸€å®šä¼šè§‰å¾—å¥‡æ€ªï¼Œä¸´æ—¶è¡¨åªåœ¨çº¿ç¨‹å†…è‡ªå·±å¯ä»¥è®¿é—®ï¼Œä¸ºä»€ä¹ˆéœ€è¦å†™åˆ°binlogé‡Œé¢ï¼Ÿ</p><p>è¿™ï¼Œå°±éœ€è¦è¯´åˆ°ä¸»å¤‡å¤åˆ¶äº†ã€‚</p><h1>ä¸´æ—¶è¡¨å’Œä¸»å¤‡å¤åˆ¶</h1><p>æ—¢ç„¶å†™binlogï¼Œå°±æ„å‘³ç€å¤‡åº“éœ€è¦ã€‚</p><p>ä½ å¯ä»¥è®¾æƒ³ä¸€ä¸‹ï¼Œåœ¨ä¸»åº“ä¸Šæ‰§è¡Œä¸‹é¢è¿™ä¸ªè¯­å¥åºåˆ—ï¼š</p><pre><code>create table t_normal(id int primary key, c int)engine=innodb;/*Q1*/\ncreate temporary table temp_t like t_normal;/*Q2*/\ninsert into temp_t values(1,1);/*Q3*/\ninsert into t_normal select * from temp_t;/*Q4*/\n</code></pre><p>å¦‚æœå…³äºä¸´æ—¶è¡¨çš„æ“ä½œéƒ½ä¸è®°å½•ï¼Œé‚£ä¹ˆåœ¨å¤‡åº“å°±åªæœ‰create table t_normalè¡¨å’Œinsert into t_normal select * from temp_tè¿™ä¸¤ä¸ªè¯­å¥çš„binlogæ—¥å¿—ï¼Œå¤‡åº“åœ¨æ‰§è¡Œåˆ°insert into t_normalçš„æ—¶å€™ï¼Œå°±ä¼šæŠ¥é”™â€œè¡¨temp_tä¸å­˜åœ¨â€ã€‚</p><p>ä½ å¯èƒ½ä¼šè¯´ï¼Œå¦‚æœæŠŠbinlogè®¾ç½®ä¸ºrowæ ¼å¼å°±å¥½äº†å§ï¼Ÿå› ä¸ºbinlogæ˜¯rowæ ¼å¼æ—¶ï¼Œåœ¨è®°å½•insert into t_normalçš„binlogæ—¶ï¼Œè®°å½•çš„æ˜¯è¿™ä¸ªæ“ä½œçš„æ•°æ®ï¼Œå³ï¼šwrite_row eventé‡Œé¢è®°å½•çš„é€»è¾‘æ˜¯â€œæ’å…¥ä¸€è¡Œæ•°æ®ï¼ˆ1,1)â€ã€‚</p><p>ç¡®å®æ˜¯è¿™æ ·ã€‚å¦‚æœå½“å‰çš„binlog_format=rowï¼Œé‚£ä¹ˆè·Ÿä¸´æ—¶è¡¨æœ‰å…³çš„è¯­å¥ï¼Œå°±ä¸ä¼šè®°å½•åˆ°binlogé‡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªåœ¨binlog_format=statment/mixed çš„æ—¶å€™ï¼Œbinlogä¸­æ‰ä¼šè®°å½•ä¸´æ—¶è¡¨çš„æ“ä½œã€‚</p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ›å»ºä¸´æ—¶è¡¨çš„è¯­å¥ä¼šä¼ åˆ°å¤‡åº“æ‰§è¡Œï¼Œå› æ­¤å¤‡åº“çš„åŒæ­¥çº¿ç¨‹å°±ä¼šåˆ›å»ºè¿™ä¸ªä¸´æ—¶è¡¨ã€‚ä¸»åº“åœ¨çº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ é™¤ä¸´æ—¶è¡¨ï¼Œä½†æ˜¯å¤‡åº“åŒæ­¥çº¿ç¨‹æ˜¯æŒç»­åœ¨è¿è¡Œçš„ã€‚æ‰€ä»¥ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦åœ¨ä¸»åº“ä¸Šå†å†™ä¸€ä¸ªDROP TEMPORARY TABLEä¼ ç»™å¤‡åº“æ‰§è¡Œã€‚</p><p><strong>ä¹‹å‰æœ‰äººé—®è¿‡æˆ‘ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼š</strong>MySQLåœ¨è®°å½•binlogçš„æ—¶å€™ï¼Œä¸è®ºæ˜¯create tableè¿˜æ˜¯alter tableè¯­å¥ï¼Œéƒ½æ˜¯åŸæ ·è®°å½•ï¼Œç”šè‡³äºè¿ç©ºæ ¼éƒ½ä¸å˜ã€‚ä½†æ˜¯å¦‚æœæ‰§è¡Œdrop table t_normalï¼Œç³»ç»Ÿè®°å½•binlogå°±ä¼šå†™æˆï¼š</p><pre><code>DROP TABLE `t_normal` /* generated by server */\n</code></pre><p>ä¹Ÿå°±æ˜¯æ”¹æˆäº†æ ‡å‡†çš„æ ¼å¼ã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ ï¼Ÿ</p><p>ç°åœ¨ä½ çŸ¥é“åŸå› äº†ï¼Œé‚£å°±æ˜¯ï¼šdrop tableå‘½ä»¤æ˜¯å¯ä»¥ä¸€æ¬¡åˆ é™¤å¤šä¸ªè¡¨çš„ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè®¾ç½®binlog_format=rowï¼Œå¦‚æœä¸»åº“ä¸Šæ‰§è¡Œ \"drop table t_normal, temp_t\"è¿™ä¸ªå‘½ä»¤ï¼Œé‚£ä¹ˆbinlogä¸­å°±åªèƒ½è®°å½•ï¼š</p><pre><code>DROP TABLE `t_normal` /* generated by server */\n</code></pre><p>å› ä¸ºå¤‡åº“ä¸Šå¹¶æ²¡æœ‰è¡¨temp_tï¼Œå°†è¿™ä¸ªå‘½ä»¤é‡å†™åå†ä¼ åˆ°å¤‡åº“æ‰§è¡Œï¼Œæ‰ä¸ä¼šå¯¼è‡´å¤‡åº“åŒæ­¥çº¿ç¨‹åœæ­¢ã€‚</p><p>æ‰€ä»¥ï¼Œdrop tableå‘½ä»¤è®°å½•binlogçš„æ—¶å€™ï¼Œå°±å¿…é¡»å¯¹è¯­å¥åšæ”¹å†™ã€‚â€œ/* generated by server */â€è¯´æ˜äº†è¿™æ˜¯ä¸€ä¸ªè¢«æœåŠ¡ç«¯æ”¹å†™è¿‡çš„å‘½ä»¤ã€‚</p><p>è¯´åˆ°ä¸»å¤‡å¤åˆ¶ï¼Œ<strong>è¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜éœ€è¦è§£å†³</strong>ï¼šä¸»åº“ä¸Šä¸åŒçš„çº¿ç¨‹åˆ›å»ºåŒåçš„ä¸´æ—¶è¡¨æ˜¯æ²¡å…³ç³»çš„ï¼Œä½†æ˜¯ä¼ åˆ°å¤‡åº“æ‰§è¡Œæ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿ</p><p>ç°åœ¨ï¼Œæˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢çš„åºåˆ—ä¸­å®ä¾‹Sæ˜¯Mçš„å¤‡åº“ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/74/ba/74e789024f10bcde515f21c0368847ba.png?wh=935*293\" alt=\"\"></p><center><span class=\"reference\">å›¾5 ä¸»å¤‡å…³ç³»ä¸­çš„ä¸´æ—¶è¡¨æ“ä½œ</span></center><p>ä¸»åº“Mä¸Šçš„ä¸¤ä¸ªsessionåˆ›å»ºäº†åŒåçš„ä¸´æ—¶è¡¨t1ï¼Œè¿™ä¸¤ä¸ªcreate temporary table t1 è¯­å¥éƒ½ä¼šè¢«ä¼ åˆ°å¤‡åº“Sä¸Šã€‚</p><p>ä½†æ˜¯ï¼Œå¤‡åº“çš„åº”ç”¨æ—¥å¿—çº¿ç¨‹æ˜¯å…±ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¦åœ¨åº”ç”¨çº¿ç¨‹é‡Œé¢å…ˆåæ‰§è¡Œè¿™ä¸ªcreate è¯­å¥ä¸¤æ¬¡ã€‚ï¼ˆå³ä½¿å¼€äº†å¤šçº¿ç¨‹å¤åˆ¶ï¼Œä¹Ÿå¯èƒ½è¢«åˆ†é…åˆ°ä»åº“çš„åŒä¸€ä¸ªworkerä¸­æ‰§è¡Œï¼‰ã€‚é‚£ä¹ˆï¼Œè¿™ä¼šä¸ä¼šå¯¼è‡´åŒæ­¥çº¿ç¨‹æŠ¥é”™ ï¼Ÿ</p><p>æ˜¾ç„¶æ˜¯ä¸ä¼šçš„ï¼Œå¦åˆ™ä¸´æ—¶è¡¨å°±æ˜¯ä¸€ä¸ªbugäº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤‡åº“çº¿ç¨‹åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œè¦æŠŠè¿™ä¸¤ä¸ªt1è¡¨å½“åšä¸¤ä¸ªä¸åŒçš„ä¸´æ—¶è¡¨æ¥å¤„ç†ã€‚è¿™ï¼Œåˆæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p><p>MySQLåœ¨è®°å½•binlogçš„æ—¶å€™ï¼Œä¼šæŠŠä¸»åº“æ‰§è¡Œè¿™ä¸ªè¯­å¥çš„çº¿ç¨‹idå†™åˆ°binlogä¸­ã€‚è¿™æ ·ï¼Œåœ¨å¤‡åº“çš„åº”ç”¨çº¿ç¨‹å°±èƒ½å¤ŸçŸ¥é“æ‰§è¡Œæ¯ä¸ªè¯­å¥çš„ä¸»åº“çº¿ç¨‹idï¼Œå¹¶åˆ©ç”¨è¿™ä¸ªçº¿ç¨‹idæ¥æ„é€ ä¸´æ—¶è¡¨çš„table_def_keyï¼š</p><ol>\n<li>\n<p>session Açš„ä¸´æ—¶è¡¨t1ï¼Œåœ¨å¤‡åº“çš„table_def_keyå°±æ˜¯ï¼šåº“å+t1+â€œMçš„serveridâ€+â€œsession Açš„thread_idâ€;</p>\n</li>\n<li>\n<p>session Bçš„ä¸´æ—¶è¡¨t1ï¼Œåœ¨å¤‡åº“çš„table_def_keyå°±æ˜¯ ï¼šåº“å+t1+â€œMçš„serveridâ€+â€œsession Bçš„thread_idâ€ã€‚</p>\n</li>\n</ol><p>ç”±äºtable_def_keyä¸åŒï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªè¡¨åœ¨å¤‡åº“çš„åº”ç”¨çº¿ç¨‹é‡Œé¢æ˜¯ä¸ä¼šå†²çªçš„ã€‚</p><h1>å°ç»“</h1><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å’Œä½ ä»‹ç»äº†ä¸´æ—¶è¡¨çš„ç”¨æ³•å’Œç‰¹æ€§ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸´æ—¶è¡¨ä¸€èˆ¬ç”¨äºå¤„ç†æ¯”è¾ƒå¤æ‚çš„è®¡ç®—é€»è¾‘ã€‚ç”±äºä¸´æ—¶è¡¨æ˜¯æ¯ä¸ªçº¿ç¨‹è‡ªå·±å¯è§çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦è€ƒè™‘å¤šä¸ªçº¿ç¨‹æ‰§è¡ŒåŒä¸€ä¸ªå¤„ç†é€»è¾‘æ—¶ï¼Œä¸´æ—¶è¡¨çš„é‡åé—®é¢˜ã€‚åœ¨çº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œä¸´æ—¶è¡¨ä¹Ÿèƒ½è‡ªåŠ¨åˆ é™¤ï¼Œçœå»äº†æ”¶å°¾å’Œå¼‚å¸¸å¤„ç†çš„å·¥ä½œã€‚</p><p>åœ¨binlog_format='rowâ€™çš„æ—¶å€™ï¼Œä¸´æ—¶è¡¨çš„æ“ä½œä¸è®°å½•åˆ°binlogä¸­ï¼Œä¹Ÿçœå»äº†ä¸å°‘éº»çƒ¦ï¼Œè¿™ä¹Ÿå¯ä»¥æˆä¸ºä½ é€‰æ‹©binlog_formatæ—¶çš„ä¸€ä¸ªè€ƒè™‘å› ç´ ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸Šé¢è¯´åˆ°çš„è¿™ç§ä¸´æ—¶è¡¨ï¼Œæ˜¯ç”¨æˆ·è‡ªå·±åˆ›å»ºçš„ ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºç”¨æˆ·ä¸´æ—¶è¡¨ã€‚ä¸å®ƒç›¸å¯¹åº”çš„ï¼Œå°±æ˜¯å†…éƒ¨ä¸´æ—¶è¡¨ï¼Œåœ¨<a href=\"https://time.geekbang.org/column/article/73795\">ç¬¬17ç¯‡æ–‡ç« </a>ä¸­æˆ‘å·²ç»å’Œä½ ä»‹ç»è¿‡ã€‚</p><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>ä¸‹é¢çš„è¯­å¥åºåˆ—æ˜¯åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œå¹¶å°†å…¶æ”¹åï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/33/f9/333ad95b2ce16de1931fe347128caff9.png?wh=1087*214\" alt=\"\"></p><center><span class=\"reference\">å›¾6 å…³äºä¸´æ—¶è¡¨æ”¹åçš„æ€è€ƒé¢˜</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨alter tableè¯­æ³•ä¿®æ”¹ä¸´æ—¶è¡¨çš„è¡¨åï¼Œè€Œä¸èƒ½ä½¿ç”¨renameè¯­æ³•ã€‚ä½ çŸ¥é“è¿™æ˜¯ä»€ä¹ˆåŸå› å—ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„åˆ†æå†™åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾å’Œä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>ä¸ŠæœŸçš„é—®é¢˜æ˜¯ï¼Œå¯¹äºä¸‹é¢è¿™ä¸ªä¸‰ä¸ªè¡¨çš„joinè¯­å¥ï¼Œ</p><pre><code>select * from t1 join t2 on(t1.a=t2.a) join t3 on (t2.b=t3.b) where t1.c&gt;=X and t2.c&gt;=Y and t3.c&gt;=Z;\n</code></pre><p>å¦‚æœæ”¹å†™æˆstraight_joinï¼Œè¦æ€ä¹ˆæŒ‡å®šè¿æ¥é¡ºåºï¼Œä»¥åŠæ€ä¹ˆç»™ä¸‰ä¸ªè¡¨åˆ›å»ºç´¢å¼•ã€‚</p><p>ç¬¬ä¸€åŸåˆ™æ˜¯è¦å°½é‡ä½¿ç”¨BKAç®—æ³•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨BKAç®—æ³•çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯â€œå…ˆè®¡ç®—ä¸¤ä¸ªè¡¨joinçš„ç»“æœï¼Œå†è·Ÿç¬¬ä¸‰ä¸ªè¡¨joinâ€ï¼Œè€Œæ˜¯ç›´æ¥åµŒå¥—æŸ¥è¯¢çš„ã€‚</p><p>å…·ä½“å®ç°æ˜¯ï¼šåœ¨t1.c&gt;=Xã€t2.c&gt;=Yã€t3.c&gt;=Zè¿™ä¸‰ä¸ªæ¡ä»¶é‡Œï¼Œé€‰æ‹©ä¸€ä¸ªç»è¿‡è¿‡æ»¤ä»¥åï¼Œæ•°æ®æœ€å°‘çš„é‚£ä¸ªè¡¨ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªé©±åŠ¨è¡¨ã€‚æ­¤æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹ä¸¤ç§æƒ…å†µã€‚</p><p>ç¬¬ä¸€ç§æƒ…å†µï¼Œå¦‚æœé€‰å‡ºæ¥æ˜¯è¡¨t1æˆ–è€…t3ï¼Œé‚£å‰©ä¸‹çš„éƒ¨åˆ†å°±å›ºå®šäº†ã€‚</p><ol>\n<li>\n<p>å¦‚æœé©±åŠ¨è¡¨æ˜¯t1ï¼Œåˆ™è¿æ¥é¡ºåºæ˜¯t1-&gt;t2-&gt;t3ï¼Œè¦åœ¨è¢«é©±åŠ¨è¡¨å­—æ®µåˆ›å»ºä¸Šç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯t2.a å’Œ t3.bä¸Šåˆ›å»ºç´¢å¼•ï¼›</p>\n</li>\n<li>\n<p>å¦‚æœé©±åŠ¨è¡¨æ˜¯t3ï¼Œåˆ™è¿æ¥é¡ºåºæ˜¯t3-&gt;t2-&gt;t1ï¼Œéœ€è¦åœ¨t2.b å’Œ t1.aä¸Šåˆ›å»ºç´¢å¼•ã€‚</p>\n</li>\n</ol><p>åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ç¬¬ä¸€ä¸ªé©±åŠ¨è¡¨çš„å­—æ®µcä¸Šåˆ›å»ºç´¢å¼•ã€‚</p><p>ç¬¬äºŒç§æƒ…å†µæ˜¯ï¼Œå¦‚æœé€‰å‡ºæ¥çš„ç¬¬ä¸€ä¸ªé©±åŠ¨è¡¨æ˜¯è¡¨t2çš„è¯ï¼Œåˆ™éœ€è¦è¯„ä¼°å¦å¤–ä¸¤ä¸ªæ¡ä»¶çš„è¿‡æ»¤æ•ˆæœã€‚</p><p>æ€»ä¹‹ï¼Œæ•´ä½“çš„æ€è·¯å°±æ˜¯ï¼Œå°½é‡è®©æ¯ä¸€æ¬¡å‚ä¸joinçš„é©±åŠ¨è¡¨çš„æ•°æ®é›†ï¼Œè¶Šå°è¶Šå¥½ï¼Œå› ä¸ºè¿™æ ·æˆ‘ä»¬çš„é©±åŠ¨è¡¨å°±ä¼šè¶Šå°ã€‚</p><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>\n<p>@åº“æ·˜æ·˜ åšäº†å®éªŒéªŒè¯ï¼›<br>\n@poppyåŒå­¦åšäº†å¾ˆä¸é”™çš„åˆ†æï¼›<br>\n@dzkk åŒå­¦åœ¨è¯„è®ºä¸­ä»‹ç»äº†MariaDBæ”¯æŒçš„hash joinï¼Œå¤§å®¶å¯ä»¥äº†è§£ä¸€ä¸‹ï¼›<br>\n@è€æ¨åŒå¿—æäº†ä¸€ä¸ªå¥½é—®é¢˜ï¼Œå¦‚æœè¯­å¥ä½¿ç”¨äº†ç´¢å¼•aï¼Œç»“æœè¿˜è¦å¯¹aæ’åºï¼Œå°±ä¸ç”¨MRRä¼˜åŒ–äº†ï¼Œå¦åˆ™å›è¡¨å®Œè¿˜è¦å¢åŠ é¢å¤–çš„æ’åºè¿‡ç¨‹ï¼Œå¾—ä¸å¿å¤±ã€‚</p>\n</blockquote><p></p>","comments":[{"had_liked":false,"id":65599,"user_name":"è¾£æ¤’","can_delete":false,"product_type":"c1","uid":1330376,"ip_address":"","ucode":"85C62DE976C6A5","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/c8/bed1e08a.jpg","comment_is_top":false,"comment_ctime":1549494444,"is_pvip":false,"replies":[{"id":"23225","content":"ä¼šï¼Œâ€œä¸´æ—¶è¡¨ä¼šè‡ªåŠ¨å›æ”¶â€è¿™ä¸ªåŠŸèƒ½ï¼Œä¸»è¦ç”¨äºâ€œåº”ç”¨ç¨‹åºå¼‚å¸¸æ–­å¼€ã€MySQLå¼‚å¸¸é‡å¯â€åï¼Œä¸éœ€è¦ä¸»åŠ¨å»åˆ é™¤è¡¨ã€‚<br><br>è€Œå¹³æ—¶æ­£å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œç”¨å®Œåˆ é™¤ï¼Œè¿˜æ˜¯åº”è¯¥æœ‰çš„å¥½ä¹ æƒ¯ã€‚ğŸ˜†<br><br>å¥½é—®é¢˜ï¼Œæ–°å¹´å¿«ä¹~","user_name":"ä½œè€…å›å¤","comment_id":65599,"uid":"1264162","ip_address":"","utype":1,"ctime":1549502884,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"804708378796","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¸åŒçº¿ç¨‹å¯ä»¥ä½¿ç”¨åŒåçš„ä¸´æ—¶è¡¨ï¼Œè¿™ä¸ªæ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœåœ¨ç¨‹åºä¸­ï¼Œç”¨çš„æ˜¯è¿æ¥æ± ä¸­çš„è¿æ¥æ¥æ“ä½œçš„ï¼Œè€Œè¿™äº›è¿æ¥ä¸ä¼šé‡Šæ”¾ï¼Œå’Œæ•°æ®åº“ä¿æŒé•¿è¿æ¥ã€‚è¿™æ ·ä½¿ç”¨ä¸´æ—¶è¡¨ä¼šæœ‰é—®é¢˜å—?ã€‚","like_count":188,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438513,"discussion_content":"ä¼šï¼Œâ€œä¸´æ—¶è¡¨ä¼šè‡ªåŠ¨å›æ”¶â€è¿™ä¸ªåŠŸèƒ½ï¼Œä¸»è¦ç”¨äºâ€œåº”ç”¨ç¨‹åºå¼‚å¸¸æ–­å¼€ã€MySQLå¼‚å¸¸é‡å¯â€åï¼Œä¸éœ€è¦ä¸»åŠ¨å»åˆ é™¤è¡¨ã€‚\n\nè€Œå¹³æ—¶æ­£å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œç”¨å®Œåˆ é™¤ï¼Œè¿˜æ˜¯åº”è¯¥æœ‰çš„å¥½ä¹ æƒ¯ã€‚ğŸ˜†\n\nå¥½é—®é¢˜ï¼Œæ–°å¹´å¿«ä¹~","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1549502884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1466840,"avatar":"https://static001.geekbang.org/account/avatar/00/16/61/d8/3bc19bff.jpg","nickname":"æ‹åœ¨é‚£æ—¶","note":"","ucode":"7F026B4B708C7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555771,"discussion_content":"åœ¨æˆ‘è¿˜æ²¡æœ‰è¯»å®Œçš„æ—¶å€™ï¼Œæˆ‘å°±æƒ³é—®æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„éƒ½æ˜¯æ•°æ®åº“è¿æ¥æ± ï¼Œä¸ä¼šæ–­å¼€è¿æ¥ï¼Œä¼šå¤ç”¨è¿æ¥ï¼Œæ–‡ä¸­è¯´çš„æ˜¯çº¿ç¨‹æ–­å¼€è¿æ¥çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ é™¤è¿™ä¸ªä¸´æ—¶è¡¨ï¼Œé‚£ä¹ˆä½¿ç”¨ä¸´æ—¶è¡¨ï¼Œä¸æ‰‹åŠ¨åˆ é™¤ä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Ÿé—®å‡ºæˆ‘çš„å¿ƒå£°ï¼Œç‚¹èµã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647071194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1227366,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ba/66/7d9f45e7.jpg","nickname":"å¤ªç©ºç‰›ä»”","note":"","ucode":"0205635C3854AF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543934,"discussion_content":"ä½¿ç”¨ mysql_reset_conection é‡ç½®è¿æ¥èµ„æº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641357056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65378,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1549295703,"is_pvip":false,"replies":[{"id":"23203","content":"æ–°å¹´å¥½ï¼<br><br>â€œinsert into  selectè¯­å¥å¥½åƒä¼šç»™selectçš„è¡¨åŠ é”ï¼Œå¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œå°±é”å…¨è¡¨â€ï¼Œæ˜¯çš„ã€‚<br><br>è¿™ç±»æœ€å¥½ä¸è¦å¾ˆå¤§èƒ†ğŸ˜†ï¼Œå¦‚æœä¸æ˜¯ä¸šåŠ¡æ€¥éœ€çš„ï¼Œä»æºè¡¨å¯¼å‡ºæ¥å†å†™åˆ°ç›®æ ‡è¡¨ä¹Ÿæ˜¯å¥½çš„ã€‚<br><br> åé¢ç¬¬40ç¯‡ä¼šè¯´åˆ°å“ˆã€‚<br><br>","user_name":"ä½œè€…å›å¤","comment_id":65378,"uid":"1264162","ip_address":"","utype":1,"ctime":1549338757,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"233477529687","product_id":100020801,"comment_content":"æ–°å¹´å¿«ä¹ï¼Œè€å¸ˆå¥½å‹¤å¥‹ï¼<br>æœ‰ä¸ªé—®é¢˜ï¼Œinsert into  selectè¯­å¥å¥½åƒä¼šç»™selectçš„è¡¨åŠ é”ï¼Œå¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œå°±é”å…¨è¡¨ï¼Œæ˜¯ä¸æ˜¯è¿™æ ·ï¼Ÿä»€ä¹ˆæ—¶å€™å¯ä»¥å¤§èƒ†çš„ç”¨è¿™ç±»è¯­å¥ï¼Ÿ","like_count":55,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438431,"discussion_content":"æ–°å¹´å¥½ï¼\n\nâ€œinsert into  selectè¯­å¥å¥½åƒä¼šç»™selectçš„è¡¨åŠ é”ï¼Œå¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œå°±é”å…¨è¡¨â€ï¼Œæ˜¯çš„ã€‚\n\nè¿™ç±»æœ€å¥½ä¸è¦å¾ˆå¤§èƒ†ğŸ˜†ï¼Œå¦‚æœä¸æ˜¯ä¸šåŠ¡æ€¥éœ€çš„ï¼Œä»æºè¡¨å¯¼å‡ºæ¥å†å†™åˆ°ç›®æ ‡è¡¨ä¹Ÿæ˜¯å¥½çš„ã€‚\n\n åé¢ç¬¬40ç¯‡ä¼šè¯´åˆ°å“ˆã€‚\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1549338757,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1227366,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ba/66/7d9f45e7.jpg","nickname":"å¤ªç©ºç‰›ä»”","note":"","ucode":"0205635C3854AF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543936,"discussion_content":"å¦‚æœinnodb_auto_lock_mode=2   bbinlog_format=rowä¹Ÿä¼šé”è¡¨å—ï¼Ÿæˆ‘æ„Ÿè§‰è¿™æ ·å°±ä¸ä¼šé”è¡¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641357276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367225,"discussion_content":"æˆ‘æœ‰ä¸ªå¤§èƒ†çš„æƒ³æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618300288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2252648,"avatar":"https://static001.geekbang.org/account/avatar/00/22/5f/68/8e4407c7.jpg","nickname":"ğŸ’¡","note":"","ucode":"8AB762A8CDFEF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390971,"discussion_content":"å¼€é™¤ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1630205711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":367225,"ip_address":""},"score":390971,"extra":""}]}]},{"had_liked":false,"id":70585,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1551143792,"is_pvip":false,"replies":[{"id":"25187","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":70585,"uid":"1264162","ip_address":"","utype":1,"ctime":1551145215,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"220594475888","product_id":100020801,"comment_content":"ä¸´æ—¶è¡¨å»ºè¡¨è¯­æ³•create temporary table ï¼Œå’Œæ™®é€šçš„è¡¨ä¸ä¸€æ ·ï¼Œå’Œå†…å­˜è¡¨ä¹Ÿä¸ä¸€æ ·ã€‚å†…å­˜è¡¨æ•°æ®ä¿å­˜åˆ°å†…å­˜é‡Œï¼Œé‡å¯ä¼šä¸¢å¤±ï¼Œä¸´æ—¶è¡¨ä¼šå†™å…¥åˆ°ç£ç›˜ã€‚ä¸´æ—¶è¡¨åªå¯¹è‡ªå·±çš„sessionä¸­å¯è§ï¼Œsessionç»“æŸåè‡ªåŠ¨åˆ é™¤è¡¨ç»“æ„å’Œè¡¨æ•°æ®ã€‚é€‚ç”¨åœºæ™¯æ˜¯åˆ†åº“åˆ†è¡¨ï¼ŒæŸ¥è¯¢åˆ°çš„æ•°æ®åœ¨ä¸´æ—¶è¡¨ä¸­åšèšåˆã€‚ä¸´æ—¶è¡¨å¯ä»¥é‡åï¼Œå®é™…çš„å­˜å‚¨æ–‡ä»¶åæœ‰çº¿ç¨‹idï¼Œåœ¨å†…å­˜ä¸­è¡¨çš„å‘½åæœ‰table_ref_keyï¼Œæ˜¯ç”±åº“ååŠ è¡¨ååŠ serverid+çº¿ç¨‹idç»„æˆã€‚bin logè®¾ç½®ä¸ºrowæ¨¡å¼ï¼Œä¸´æ—¶è¡¨ä¸ä¼šåŒæ­¥åˆ°å¤‡åº“ä¸­ï¼Œè®¾ç½®ä¸ºstatementæ¨¡å¼ï¼Œä¼šåŒæ­¥åˆ°å¤‡åº“ä¸­ã€‚","like_count":52,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440710,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551145215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1988150,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/56/36/91f69881.jpg","nickname":"JackieDeng","note":"","ucode":"6FFC39F9B482AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343771,"discussion_content":"å¤§ä½¬ï¼Œæˆ‘è¿™ä¸ªå°ç™½éƒ½èƒ½çœ‹æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611153811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282441,"discussion_content":"æ€»ç»“çš„ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591972545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65337,"user_name":"poppy","can_delete":false,"product_type":"c1","uid":1182792,"ip_address":"","ucode":"2ED2BDF703D0D9","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/48/ba59d28d.jpg","comment_is_top":false,"comment_ctime":1549249522,"is_pvip":false,"replies":[{"id":"23181","content":"æ˜¥èŠ‚å¿«ä¹<br><br>ğŸ‘<br>","user_name":"ä½œè€…å›å¤","comment_id":65337,"uid":"1264162","ip_address":"","utype":1,"ctime":1549270183,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"151873104882","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ–°å¹´å¿«ä¹ã€‚<br>å…³äºæ€è€ƒé¢˜ï¼Œalter table temp_t rename to temp_t2,æˆ‘çš„ç†è§£æ˜¯mysqlç›´æ¥ä¿®æ”¹çš„æ˜¯table_def_keyï¼Œè€Œå¯¹äºrename table temp_t2 to temp_t3,mysqlç›´æ¥å»mysqlçš„dataç›®å½•ä¸‹è¯¥æ•°æ®åº“çš„ç›®å½•(ä¾‹å¦‚è€å¸ˆå®éªŒç”¨çš„åº”è¯¥æ˜¯testæ•°æ®åº“ï¼Œæ‰€ä»¥å¯¹åº”çš„æ˜¯testç›®å½•)ä¸‹å¯»æ‰¾åä¸ºtemp_t2.frmçš„æ–‡ä»¶å»ä¿®æ”¹åç§°ï¼Œæ‰€ä»¥å°±å‡ºç°äº†&quot;Can&#39;t find file &#39;.&#47;test&#47;temp_t2.frm&#39;(errno: 2 - No such file or directory)","like_count":36,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438412,"discussion_content":"æ˜¥èŠ‚å¿«ä¹\n\nğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549270183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218244,"user_name":"Carisy","can_delete":false,"product_type":"c1","uid":1657429,"ip_address":"","ucode":"67E887967347BA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwTZdUafC5YM7bCASt8icUnoyYfV4hUHulexibDI7B4eaokTxYXHFtoic97DBlCAU9j5Jw4QUuGhyZQ/132","comment_is_top":false,"comment_ctime":1589764586,"is_pvip":false,"replies":[{"id":"80727","content":"æ˜¯çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸€ä¸ªäº‹åŠ¡åˆ›å»ºä¸´æ—¶è¡¨ä»¥åï¼Œè¯»å†™åˆ†ç¦»å°±ä¼šé»˜è®¤æ¥ä¸‹æ¥çš„è¯·æ±‚éƒ½è·¯ç”±åˆ°ä¸»åº“å»äº†","user_name":"ä½œè€…å›å¤","comment_id":218244,"uid":"1264162","ip_address":"","utype":1,"ctime":1589773780,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"134733750762","product_id":100020801,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœè¯´åˆ›å»ºä¸´æ—¶è¡¨åœ¨ä¸»åº“ï¼ŒæŸ¥è¯¢çš„æ—¶å€™æ‰“åˆ°ä»åº“ä¸Šï¼ŒæŸ¥è¯¢æ˜¯ä¸æ˜¯å°±æœ‰é—®é¢˜äº†ï¼ŒæŸ¥è¯¢ä¸»åº“çš„çº¿ç¨‹idè·Ÿä»åº“ä¸ä¸€è‡´","like_count":32,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495400,"discussion_content":"æ˜¯çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸€ä¸ªäº‹åŠ¡åˆ›å»ºä¸´æ—¶è¡¨ä»¥åï¼Œè¯»å†™åˆ†ç¦»å°±ä¼šé»˜è®¤æ¥ä¸‹æ¥çš„è¯·æ±‚éƒ½è·¯ç”±åˆ°ä¸»åº“å»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589773780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67290,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1550124730,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"134694110906","product_id":100020801,"comment_content":"è´´ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ä¸­çš„è¯´æ˜ï¼šTo rename TEMPORARY tables, RENAME TABLE does not work. Use ALTER TABLE instead.<br>å…¨æ–‡è§ï¼šhttps:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;rename-table.html<br><br>","like_count":32},{"had_liked":false,"id":66446,"user_name":"é¸ ç¿±","can_delete":false,"product_type":"c1","uid":1116568,"ip_address":"","ucode":"7D498AF2BC4289","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/98/b11c372b.jpg","comment_is_top":false,"comment_ctime":1549940574,"is_pvip":false,"replies":[{"id":"23576","content":"æ˜¯è¿™æ ·çš„ï¼Œè¦çœ‹è¿æ¥æ± æ€ä¹ˆå®ç°ã€‚<br><br>å¦‚æœAå®¢æˆ·ç«¯åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ›å»ºäº†ä¸´æ—¶è¡¨ï¼Œç”¨å®Œäº†è¿æ¥å°±æ”¾å›æ± å­é‡Œé¢ï¼Œæ²¡æœ‰åšåˆ«çš„æ¸…ç†å·¥ä½œï¼Œç„¶åæ–°çš„å®¢æˆ·ç«¯Bå¤ç”¨è¿™ä¸ªè¿æ¥ï¼Œå°±å¯èƒ½ä¼šçœ‹åˆ°Açš„ä¸´æ—¶è¡¨","user_name":"ä½œè€…å›å¤","comment_id":66446,"uid":"1264162","ip_address":"","utype":1,"ctime":1549978107,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"87449286494","product_id":100020801,"comment_content":"æ”¾å‡ç»“æŸè¯¥è¡¥è¯¾äº†ğŸ˜…<br><br>è¯„è®ºåŒºæœ‰ä¸ªå›ç­”è¯´åˆ°äº†è¿æ¥æ± çš„é—®é¢˜é—®åˆ°ä¼šä¸ä¼šæœ‰é—®é¢˜â€¦â€¦è€Œè€å¸ˆæ‚¨å›ç­”çš„æ˜¯ä¼šæœ‰é—®é¢˜ å¯æ˜¯ä¸´æ—¶è¡¨åœ¨sessionç»“æŸåä¸å°±åˆ é™¤äº†å˜› é‚£ä¹ˆå³ä½¿æ˜¯ç”¨åŒä¸€ä¸ªçº¿ç¨‹åˆæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ","like_count":20,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438803,"discussion_content":"æ˜¯è¿™æ ·çš„ï¼Œè¦çœ‹è¿æ¥æ± æ€ä¹ˆå®ç°ã€‚\n\nå¦‚æœAå®¢æˆ·ç«¯åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ›å»ºäº†ä¸´æ—¶è¡¨ï¼Œç”¨å®Œäº†è¿æ¥å°±æ”¾å›æ± å­é‡Œé¢ï¼Œæ²¡æœ‰åšåˆ«çš„æ¸…ç†å·¥ä½œï¼Œç„¶åæ–°çš„å®¢æˆ·ç«¯Bå¤ç”¨è¿™ä¸ªè¿æ¥ï¼Œå°±å¯èƒ½ä¼šçœ‹åˆ°Açš„ä¸´æ—¶è¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549978107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1644104,"avatar":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","nickname":"èŒ¶æ²¡å–å®Œ","note":"","ucode":"D72D88C42A1258","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347922,"discussion_content":"æœ€å¥½æ˜¯ç”¨å®Œä¸»åŠ¨åˆ é™¤ä¸´æ—¶è¡¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612365529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65324,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1086346,"ip_address":"","ucode":"5B8E59AEA6E3F2","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/8a/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1549244853,"is_pvip":false,"replies":[{"id":"23182","content":"ç”¨æˆ·æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šä¸»é”®çš„è¯ï¼ŒInnoDBå¼•æ“ä¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªéšè—çš„ä¸»é”®ï¼Œä½†æ˜¯è¿™ä¸ªä¸»é”®å¯¹Serverå±‚æ˜¯é€æ˜çš„ï¼Œä¼˜åŒ–å™¨ç”¨ä¸ä¸Šã€‚<br><br>æ–°å¹´å¿«ä¹~","user_name":"ä½œè€…å›å¤","comment_id":65324,"uid":"1264162","ip_address":"","utype":1,"ctime":1549270333,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"78858656181","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåœ¨25è¯¾é‡Œé¢çš„ç½®é¡¶ç•™è¨€â€œ6.è¡¨ä¸Šæ— ä¸»é”®çš„æƒ…å†µ(ä¸»åº“åˆ©ç”¨ç´¢å¼•æ›´æ”¹æ•°æ®,å¤‡åº“å›æ”¾åªèƒ½ç”¨å…¨è¡¨æ‰«æ,è¿™ç§æƒ…å†µå¯ä»¥è°ƒæ•´slave_rows_search_algorithmså‚æ•°é€‚å½“ä¼˜åŒ–ä¸‹)â€<br>ä¸ºå•¥ä¼šå­˜åœ¨æ— ä¸»é”®çš„è¡¨å‘¢ï¼Œå°±ç®—dbaæ²¡åˆ›å»ºä¸»é”®ï¼ŒInnodbå¯ä»¥ç”¨rowidç»™è‡ªåŠ¨å»ºä¸€ä¸ªè™šæ‹Ÿä¸»é”®å‘€ï¼Œè¿™æ ·ä¸å°±æ˜¯æ‰€æœ‰çš„è¡¨éƒ½æœ‰ä¸»é”®äº†å—ï¼Ÿ","like_count":19,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438407,"discussion_content":"ç”¨æˆ·æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šä¸»é”®çš„è¯ï¼ŒInnoDBå¼•æ“ä¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªéšè—çš„ä¸»é”®ï¼Œä½†æ˜¯è¿™ä¸ªä¸»é”®å¯¹Serverå±‚æ˜¯é€æ˜çš„ï¼Œä¼˜åŒ–å™¨ç”¨ä¸ä¸Šã€‚\n\næ–°å¹´å¿«ä¹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549270333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66055,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1549864714,"is_pvip":false,"replies":[{"id":"23400","content":"1. å¥½é—®é¢˜ï¼Œé‡å¯ä»¥åMySQLä¼šæ‰«æä¸´æ—¶ç›®å½•ï¼ŒæŠŠè¡¨éƒ½åˆ æ‰ï¼›<br>2. å°±æ˜¯æˆ‘ä»¬æ–‡ä¸­è¯´çš„ï¼Œå¦‚æœbinlogæ˜¯statementçš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦åŒæ­¥åˆ°å¤‡åº“å»ï¼Œå¦åˆ™å¤‡åº“ä¸Šæ‰§è¡Œä¸€ä¸ª<br>insert into t_normal (select * from t_temp) å°±ä¼šæŠ¥é”™äº†","user_name":"ä½œè€…å›å¤","comment_id":66055,"uid":"1264162","ip_address":"","utype":1,"ctime":1549873483,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"53089472266","product_id":100020801,"comment_content":"è€å¸ˆ æœ‰å‡ ä¸ªé—®é¢˜<br>1. åœ¨ session ç»“æŸçš„æ—¶å€™ä¼šæ‰§è¡Œ DROP TEMPORARY TABLEï¼Œå¦‚æœæ•°æ®åº“æ‰ç”µï¼Œè¿™ä¸ªä¸´æ—¶è¡¨ä»€ä¹ˆæ—¶å€™ä¼šè¢«æ¸…é™¤<br>2. å¦‚æœbinlog ä¸­è®°å½•äº†ä¸´æ—¶è¡¨çš„æ“ä½œï¼Œå› ä¸º session ä¸åŒï¼Œåœ¨ä»åº“ä¸­è®¿é—®ä¸åˆ°ï¼Œè¿™æ ·åšçš„æ„ä¹‰æ˜¯ä»€ä¹ˆ<br><br>è¾›è‹¦è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼Œè°¢è°¢è€å¸ˆ","like_count":12,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438689,"discussion_content":"1. å¥½é—®é¢˜ï¼Œé‡å¯ä»¥åMySQLä¼šæ‰«æä¸´æ—¶ç›®å½•ï¼ŒæŠŠè¡¨éƒ½åˆ æ‰ï¼›\n2. å°±æ˜¯æˆ‘ä»¬æ–‡ä¸­è¯´çš„ï¼Œå¦‚æœbinlogæ˜¯statementçš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦åŒæ­¥åˆ°å¤‡åº“å»ï¼Œå¦åˆ™å¤‡åº“ä¸Šæ‰§è¡Œä¸€ä¸ª\ninsert into t_normal (select * from t_temp) å°±ä¼šæŠ¥é”™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549873483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2172435,"avatar":"https://static001.geekbang.org/account/avatar/00/21/26/13/0319db8a.jpg","nickname":"Allen","note":"","ucode":"AFDFD3036A8779","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379480,"discussion_content":"å¤‡åº“çš„åŒæ­¥çº¿ç¨‹å¯ä»¥ç”¨åˆ°å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623922451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66052,"user_name":"å¸ƒè¡£éª‡å®¢","can_delete":false,"product_type":"c1","uid":1256280,"ip_address":"","ucode":"5226B0F67090D1","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/58/11c05ccb.jpg","comment_is_top":false,"comment_ctime":1549864079,"is_pvip":false,"replies":[{"id":"23396","content":"æ–°å¹´å¿«ä¹ï¼ŒåŠ æ²¹ğŸ’ª","user_name":"ä½œè€…å›å¤","comment_id":66052,"uid":"1264162","ip_address":"","utype":1,"ctime":1549872896,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"27319667855","product_id":100020801,"comment_content":"é”™è¿‡å¾—è¿˜æ˜¯å¾—è¡¥ä¸Šï¼Œæ–°å¾—ä¸€å¹´ï¼Œæ–°çš„å¼€å§‹ï¼ŒåŠ æ²¹","like_count":6,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438688,"discussion_content":"æ–°å¹´å¿«ä¹ï¼ŒåŠ æ²¹ğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549872896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65314,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1086346,"ip_address":"","ucode":"5B8E59AEA6E3F2","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/8a/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1549241515,"is_pvip":false,"replies":[{"id":"23175","content":"æ–°å¹´å¿«ä¹ï¼Œå…±åŒè¿›æ­¥ğŸ˜„","user_name":"ä½œè€…å›å¤","comment_id":65314,"uid":"1264162","ip_address":"","utype":1,"ctime":1549258835,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"23024077995","product_id":100020801,"comment_content":"è€å¸ˆè¿‡å¹´å¥½å‘€ï¼Œç¥æ‚¨çŒªå¹´å¤§å‰ï¼Œè´¢æºå¹¿è¿›ï¼›è€å¸ˆå’±ä»¬è¿™ä¸ªè¯¾ç»“æŸåï¼Œå†å¼€ä¸€æœŸå¥½ä¸å¥½å•Šï¼Œæ²¡å­¦å¤Ÿå•Šï¼Œè¿™æ˜¯æˆ‘çš„æ–°å¹´æ„¿æœ›å“¦","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438400,"discussion_content":"æ–°å¹´å¿«ä¹ï¼Œå…±åŒè¿›æ­¥ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549258835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84840,"user_name":"ç –ç“¦å·¥","can_delete":false,"product_type":"c1","uid":1021194,"ip_address":"","ucode":"A0AAF93973D6A8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/95/0a/817c4356.jpg","comment_is_top":false,"comment_ctime":1554925727,"is_pvip":false,"replies":[{"id":"30745","content":"ğŸ¤  åŠ æ²¹","user_name":"ä½œè€…å›å¤","comment_id":84840,"uid":"1264162","ip_address":"","utype":1,"ctime":1555146575,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"18734794911","product_id":100020801,"comment_content":"ä¸€ç‚¹ä¸€ç‚¹åˆ·æ–°ç€æˆ‘å¯¹mysqlçš„è®¤è¯†ï¼ŒçœŸå¿ƒè°¢è°¢è€å¸ˆï¼æœŸå¾…è€å¸ˆæœ‰æ›´åŠ å¤šçš„è¯¾ç¨‹ï¼ç¥ç¦è€å¸ˆï¼","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446466,"discussion_content":"ğŸ¤  åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555146575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65343,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1549260255,"is_pvip":false,"replies":[{"id":"23180","content":"æ˜¥èŠ‚å¿«ä¹ æ–°å¹´èº«ä½“å¥åº·å“ˆ","user_name":"ä½œè€…å›å¤","comment_id":65343,"uid":"1264162","ip_address":"","utype":1,"ctime":1549270110,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"14434162143","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ–°å¹´å¿«ä¹ã€‚ç”±äºè‡ªèº«åŸå› ï¼Œé”™è¿‡å‡ æœŸç²¾å½©çš„å†…å®¹ï¼Œå¹´åä¸Šç­ä»¥ååœ¨å¥½å¥½è¡¥è¡¥ã€‚","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438416,"discussion_content":"æ˜¥èŠ‚å¿«ä¹ æ–°å¹´èº«ä½“å¥åº·å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549270110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172549,"user_name":"æ²¡æœ‰æ˜µç§°","can_delete":false,"product_type":"c1","uid":1763208,"ip_address":"","ucode":"565783BDD01CE4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e7/88/c8b4ad9c.jpg","comment_is_top":false,"comment_ctime":1579222506,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5874189802","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¤‡åº“çš„çº¿ç¨‹idå’Œä¸»åº“åº”è¯¥æ˜¯ä¸åŒçš„å§ï¼Œè¿™æ ·æ€ä¹ˆä¿è¯ä¸»åº“åˆ›å»ºçš„ä¸´æ—¶è¡¨å¤‡åº“ä¸Šå¯ä»¥è®¿é—®ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1788647,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/4a/e7/6c16af5d.jpg","nickname":"æ±‰æ±Ÿ","note":"","ucode":"01622D984B8F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360178,"discussion_content":"å¤‡åº“è®¿é—®ä¸äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616383144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1649662,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","nickname":"pdf","note":"","ucode":"A44250955878BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338155,"discussion_content":"å†™binlogçš„æ—¶å€™  æŠŠä¸»åº“çš„çº¿ç¨‹IDå†™ä¸Šäº†   ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609204587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84666,"user_name":"å”¯å¥¹å‘½","can_delete":false,"product_type":"c1","uid":1240398,"ip_address":"","ucode":"8F687E8D306840","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/4e/ef406442.jpg","comment_is_top":false,"comment_ctime":1554891855,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5849859151","product_id":100020801,"comment_content":"è€å¸ˆ ä¸ºä»€ä¹ˆè¿‡æ»¤äº†æ¡ä»¶ä¹‹åï¼Œé€‰æ‹©äº†t1æˆ–è€…t3,å‰©ä¸‹çš„å°±å›ºå®šäº†å‘¢ï¼Ÿé€‰æ‹©äº†t2å°±éœ€è¦é‡æ–°è¯„ä¼°t1å’Œt3å‘¢ï¼Ÿä¸æ˜ç™½","like_count":1,"discussions":[{"author":{"id":1997293,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/79/ed/4737a49b.jpg","nickname":"é›ªã®é›«Â·é›¨ã®éŸ³","note":"","ucode":"0693DA3939A321","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":272768,"discussion_content":"ä¸çŸ¥é“è¿™ä¹ˆç†è§£å¯¹ä¸å¯¹ï¼šå¦‚æœé€‰æ‹©äº†t2ä½œä¸ºé©±åŠ¨è¡¨ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„t1å’Œt3å°±æ˜¯è¢«é©±åŠ¨è¡¨ï¼Œä½†æ˜¯t1å’Œt3è¢«é©±åŠ¨çš„å…ˆåé¡ºåºä¸ä¸€æ ·æœ€ç»ˆæ˜¯ä¼šå½±å“æ€§èƒ½çš„ï¼Œè¿™ä¸ªå½±å“è·Ÿt1å’Œt3çš„è¿‡æ»¤æ¡ä»¶æœ‰å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590338569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1371095,"avatar":"https://static001.geekbang.org/account/avatar/00/14/eb/d7/712912a7.jpg","nickname":"mumu","note":"","ucode":"E409BDA36091A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42413,"discussion_content":"t1å’Œt3 æ²¡æœ‰è¿æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572667200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83376,"user_name":"åœŸé—¨ä¸€å“¥","can_delete":false,"product_type":"c1","uid":1155883,"ip_address":"","ucode":"0F1EBE439E10F3","user_header":"","comment_is_top":false,"comment_ctime":1554549301,"is_pvip":false,"replies":[{"id":"30149","content":"ğŸ˜†åŠ æ²¹","user_name":"ä½œè€…å›å¤","comment_id":83376,"uid":"1264162","ip_address":"","utype":1,"ctime":1554608558,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"5849516597","product_id":100020801,"comment_content":"åˆè¦å»å­¦ä¹ åˆ†åº“åˆ†è¡¨äº†ï¼Œå­¦è€å¸ˆçš„ä¸€èŠ‚è¯¾ç¨‹ä»æ¥éƒ½ä¸æ­¢å­¦ä¸€èŠ‚è¯¾â€¦â€¦","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445998,"discussion_content":"ğŸ˜†åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554608558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66909,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1550040055,"is_pvip":false,"replies":[{"id":"23673","content":"æ–°å¹´å¿«ä¹","user_name":"ä½œè€…å›å¤","comment_id":66909,"uid":"1264162","ip_address":"","utype":1,"ctime":1550047779,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"5845007351","product_id":100020801,"comment_content":"è¿‡å¹´çš„æ—¶å€™è¯¾ç¨‹è½ä¸‹äº†ï¼Œç»™è€å¸ˆæ‹œä¸ªå¹´ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438971,"discussion_content":"æ–°å¹´å¿«ä¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550047779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66089,"user_name":"â˜","can_delete":false,"product_type":"c1","uid":1302793,"ip_address":"","ucode":"6FAEF05F234D2A","user_header":"https://static001.geekbang.org/account/avatar/00/13/e1/09/9483f537.jpg","comment_is_top":false,"comment_ctime":1549875707,"is_pvip":false,"replies":[{"id":"23415","content":"æ­£å¸¸create è¯­å¥ä¹Ÿä¼šè®°å½•çš„ã€‚<br><br>è¿˜æœ‰ï¼Œå› ä¸ºdrop è¯­å¥é‡Œé¢å› ä¸ºæœ‰TEMPORARYï¼Œæ‰€ä»¥æ‹¿åˆ°å¤‡åº“æ‰§è¡Œï¼Œå³ä½¿å¤‡åº“æ²¡è¿™ä¸ªä¸´æ—¶è¡¨ï¼Œä¹Ÿæ²¡å…³ç³»ã€‚","user_name":"ä½œè€…å›å¤","comment_id":66089,"uid":"1264162","ip_address":"","utype":1,"ctime":1549880001,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"5844843003","product_id":100020801,"comment_content":"è€å¸ˆæ–°å¹´å¥½ï¼š<br>        è¯·é—®è€å¸ˆä¸€ä¸‹æˆ‘åšçš„å®éªŒï¼Œä¸»ä»æƒ…å†µä¸‹ï¼Œbinlogä¸ºrowæ¨¡å¼çš„æ—¶å€™ï¼Œé€€å‡ºçº¿ç¨‹ä»ä¸»åº“çš„binlogä¸­å…³äºä¸´æ—¶è¡¨åªæ‰¾åˆ°äº†DROP &#47;*!40005 TEMPORARY *&#47; TABLE IF EXISTS `temp_t`ï¼Œæ²¡æœ‰æ‰¾åˆ°createç›¸å…³çš„ä¿¡æ¯ï¼Œä»åº“æ˜¯æ€ä¹ˆåº”ç”¨è¿™éƒ¨åˆ†createçš„å‘¢ï¼Œè€Œä¸”å…³äºdropæ“ä½œé‚£é‡Œä¹Ÿæåˆ°äº†ä»åº“æ²¡æœ‰è¿™ä¸ªä¸´æ—¶è¡¨ï¼Œæ˜¯ä¸æ˜¯æœ‰æ‰€å†²çªå•Š","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438698,"discussion_content":"æ­£å¸¸create è¯­å¥ä¹Ÿä¼šè®°å½•çš„ã€‚\n\nè¿˜æœ‰ï¼Œå› ä¸ºdrop è¯­å¥é‡Œé¢å› ä¸ºæœ‰TEMPORARYï¼Œæ‰€ä»¥æ‹¿åˆ°å¤‡åº“æ‰§è¡Œï¼Œå³ä½¿å¤‡åº“æ²¡è¿™ä¸ªä¸´æ—¶è¡¨ï¼Œä¹Ÿæ²¡å…³ç³»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549880001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2076283,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","nickname":"è´ºå­","note":"","ucode":"A64DC9D9CF7CCD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370943,"discussion_content":"rowæ ¼å¼ä¸æ˜¯ä¸è®°å½•binlogå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619588348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65377,"user_name":"æ…•å¡”","can_delete":false,"product_type":"c1","uid":1302106,"ip_address":"","ucode":"5C6C668C1106A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/A94RKUfWfwzRzb68T9xskctQ43TBgXSBIL78p0N0ria2tQxmsTTJebYmefhkbHK7zwpoxokxs43UxpgDTdwm5tg/132","comment_is_top":false,"comment_ctime":1549295659,"is_pvip":false,"replies":[{"id":"23202","content":"æ–°å¹´å¿«ä¹ã€å…±åŒè¿›æ­¥ğŸ¤<br><br>å¥½å‹¤å¥‹å‘€ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":65377,"uid":"1264162","ip_address":"","utype":1,"ctime":1549332804,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"5844262955","product_id":100020801,"comment_content":"æ‰“å¡ æ–°å¹´å¿«ä¹ğŸ˜²ğŸ˜²ğŸ˜²","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438430,"discussion_content":"æ–°å¹´å¿«ä¹ã€å…±åŒè¿›æ­¥ğŸ¤\n\nå¥½å‹¤å¥‹å‘€ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549332804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65363,"user_name":"cheriston","can_delete":false,"product_type":"c1","uid":1309984,"ip_address":"","ucode":"617CBFCE0925C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/20/2761ef0e.jpg","comment_is_top":false,"comment_ctime":1549282925,"is_pvip":false,"replies":[{"id":"23197","content":"åŒç¥æ–°å¹´å¥½ï¼Œå…±åŒè¿›æ­¥ğŸ˜„","user_name":"ä½œè€…å›å¤","comment_id":65363,"uid":"1264162","ip_address":"","utype":1,"ctime":1549299312,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"5844250221","product_id":100020801,"comment_content":"è€å¸ˆè¾›è‹¦äº†ï¼Œå¤§å¹´ä¸‰åè¿˜ç»™æˆ‘ä»¬åˆ†äº«æŠ€æœ¯ï¼Œè€å¸ˆæ–°å¹´å¥½ğŸ‰.","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438423,"discussion_content":"åŒç¥æ–°å¹´å¥½ï¼Œå…±åŒè¿›æ­¥ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549299312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65360,"user_name":"é•¿æ°","can_delete":false,"product_type":"c1","uid":1312212,"ip_address":"","ucode":"DD52C9494005F7","user_header":"https://static001.geekbang.org/account/avatar/00/14/05/d4/e06bf86d.jpg","comment_is_top":false,"comment_ctime":1549282251,"is_pvip":false,"replies":[{"id":"23196","content":"æ–°æ˜¥å¿«ä¹ï½","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549299288,"ip_address":"","comment_id":65360,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5844249547","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ–°å¹´å¿«ä¹ï¼Œä¸‡äº‹å¦‚æ„ï¼","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438421,"discussion_content":"æ–°æ˜¥å¿«ä¹ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549299288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65346,"user_name":"æ°","can_delete":false,"product_type":"c1","uid":1336109,"ip_address":"","ucode":"9947A0B159727A","user_header":"https://static001.geekbang.org/account/avatar/00/14/63/2d/80427196.jpg","comment_is_top":false,"comment_ctime":1549262724,"is_pvip":false,"replies":[{"id":"23179","content":"æ–°å¹´å¿«ä¹ å·¥ä½œé¡ºåˆ©~","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549270094,"ip_address":"","comment_id":65346,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5844230020","product_id":100020801,"comment_content":"ä¸å¤§å¤§æ–°æ˜¥å¿«ä¹","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438417,"discussion_content":"æ–°å¹´å¿«ä¹ å·¥ä½œé¡ºåˆ©~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549270094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65320,"user_name":"å°˜å°","can_delete":false,"product_type":"c1","uid":1247006,"ip_address":"","ucode":"CEE0C006387A03","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/1e/bdbe93f4.jpg","comment_is_top":false,"comment_ctime":1549241964,"is_pvip":false,"replies":[{"id":"23174","content":"æ–°å¹´å¿«ä¹ğŸ¤","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549258803,"ip_address":"","comment_id":65320,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5844209260","product_id":100020801,"comment_content":"æ–°å¹´å¿«ä¹","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438405,"discussion_content":"æ–°å¹´å¿«ä¹ğŸ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549258803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344467,"user_name":"æ ¸æ¡ƒ","can_delete":false,"product_type":"c1","uid":1385204,"ip_address":"","ucode":"7AB05270CBCCCB","user_header":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","comment_is_top":false,"comment_ctime":1651571666,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651571666","product_id":100020801,"comment_content":"å…³äºbinlogæ ¼å¼ä¸ºrowä¸è®°å½•ä¸´æ—¶è¡¨æ“ä½œè¿™ä¸ªï¼Œæˆ‘æŸ¥äº†ä¸€ä¸‹ï¼Œç°åœ¨æœ‰ä¸ä¸€æ ·çš„ï¼Œå¦‚æœæ˜¯åŸºäºgtidçš„è¯ï¼Œé‚£ä¹ˆä¸»ä»æ˜¯ä¼šè®°å½•çš„.<br><br>https:&#47;&#47;dev.mysql.com&#47;blog-archive&#47;temporary-tables-are-now-allowed-in-transactions-when-gtids-are-enabled&#47;","like_count":0},{"had_liked":false,"id":304372,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1627375633,"is_pvip":true,"discussion_count":1,"race_medal":1,"score":"1627375633","product_id":100020801,"comment_content":"å¯¹äºæ€è€ƒé¢˜ï¼Œæˆ‘ä¸ºä»€ä¹ˆéƒ½å¯ä»¥æ‰§è¡ŒæˆåŠŸçš„ï¼Ÿ<br><br>alter table temp_t rename to temp_2;<br>rename table temp_2 to temp_3;","like_count":0,"discussions":[{"author":{"id":1657561,"avatar":"https://static001.geekbang.org/account/avatar/00/19/4a/d9/b8046b4b.jpg","nickname":"zhangm365","note":"","ucode":"60E7DEFB3F5840","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387262,"discussion_content":"ä½ æœ‰ä¸ªæ™®é€šè¡¨å§ï¼Œrename ä¿®æ”¹çš„æ™®é€šè¡¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628075623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290488,"user_name":"è´ºå­","can_delete":false,"product_type":"c1","uid":2076283,"ip_address":"","ucode":"A64DC9D9CF7CCD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","comment_is_top":false,"comment_ctime":1619587815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619587815","product_id":100020801,"comment_content":"è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ›å»ºä¸´æ—¶è¡¨çš„è¯­å¥ä¼šä¼ åˆ°å¤‡åº“æ‰§è¡Œï¼Œå› æ­¤å¤‡åº“çš„åŒæ­¥çº¿ç¨‹å°±ä¼šåˆ›å»ºè¿™ä¸ªä¸´æ—¶è¡¨ã€‚ä¸»åº“åœ¨çº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ é™¤ä¸´æ—¶è¡¨ï¼Œä½†æ˜¯å¤‡åº“åŒæ­¥çº¿ç¨‹æ˜¯æŒç»­åœ¨è¿è¡Œçš„ã€‚æ‰€ä»¥ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦åœ¨ä¸»åº“ä¸Šå†å†™ä¸€ä¸ª DROP TEMPORARY TABLE ä¼ ç»™å¤‡åº“æ‰§è¡Œã€‚<br>æ‚¨å¥½è€å¸ˆï¼Œè¿™é‡Œæœ‰ç‚¹ç–‘é—®ï¼Œrowæ ¼å¼ä¸è®°binlogé‚£ä¹ˆä¹Ÿå°±ä¸ä¼šåŒæ­¥åˆ°ä»åº“ï¼Œæ‰€ä»¥ä¸éœ€è¦è€ƒè™‘DROP TEMPORARY TABLEï¼Œå¦‚æœæ˜¯statementæˆ–è€…mixæ ¼å¼é‚£ä¹ˆå°±ä¼šè®°å½•binlogï¼Œè‡ªç„¶ä¹Ÿä¼šè®°å½•dropï¼Œé‚£ä¹ˆæ‚¨æ€ä¹ˆè¯´è¿˜è¦å†ä¸»åº“ä¸Šå†™ä¸€ä¸ª DROP TEMPORARY TABLE ä¼ ç»™å¤‡åº“æ‰§è¡Œï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":287144,"user_name":"Z","can_delete":false,"product_type":"c1","uid":1588016,"ip_address":"","ucode":"13BB106EABA035","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIz50ciaONXadCquPf8WDzKzyMYMeDSChgZcMR605sMfSibdw1vXbXvpAFkQxW70GkRtDqFu9lwPlFg/132","comment_is_top":false,"comment_ctime":1617793925,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1617793925","product_id":100020801,"comment_content":"å…³äºåˆ†åº“åˆ†è¡¨ä½¿ç”¨ä¸´æ—¶è¡¨ä¼˜åŒ–çš„ç‚¹æœ‰äº›ç–‘æƒ‘ï¼Œå·²ç»åœ¨æ‰€æœ‰åˆ†åŒºè¿›è¡Œäº†æ‰«æï¼Œä¸ºä½•ä¸ç›´æ¥æ‹¿åˆ°æ•°æ®ï¼Œè€Œæ˜¯è¦æ”¾åˆ°ä¸´æ—¶è¡¨ä¸­å†æŸ¥ä¸€éä¸´æ—¶è¡¨å‘¢","like_count":0,"discussions":[{"author":{"id":1385204,"avatar":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","nickname":"æ ¸æ¡ƒ","note":"","ucode":"7AB05270CBCCCB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569842,"discussion_content":"éœ€è¦æœ‰ä¸ªåœ°æ–¹åˆå¹¶æ•°æ®è¿‡æ»¤å•Šï¼Œå°±ç±»ä¼¼mapreduceçš„è¿‡ç¨‹é‚£æ ·.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651570870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286383,"user_name":"å¸æ±Ÿ","can_delete":false,"product_type":"c1","uid":1590610,"ip_address":"","ucode":"93CBA4E4D05DA5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/B9vSOjMc2a86kYA8R5yDkVdFiaj2JeBZ1PuI9oUKhbnvuZwuibdUam6FTcGzDaiaFdk2GWJveUGhfCVpv4KaOdicoQ/132","comment_is_top":false,"comment_ctime":1617275595,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617275595","product_id":100020801,"comment_content":"sessionç»“æŸä¼šè‡ªåŠ¨åˆ é™¤ä¸´æ—¶è¡¨.é•¿è¿æ¥ä¼šä¸ä¼šæœ‰å½±å“?ä¸ç†è§£é•¿è¿æ¥.å°¤å…¶æ˜¯åœ¨æœ‰proxyå±‚çš„æ—¶å€™.","like_count":0},{"had_liked":false,"id":279179,"user_name":"uking","can_delete":false,"product_type":"c1","uid":1522824,"ip_address":"","ucode":"41005AC547327B","user_header":"https://static001.geekbang.org/account/avatar/00/17/3c/88/e83528da.jpg","comment_is_top":false,"comment_ctime":1613645634,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613645634","product_id":100020801,"comment_content":"&quot;ä¸€ä¸ªä¸´æ—¶è¡¨åªèƒ½è¢«åˆ›å»ºå®ƒçš„ session è®¿é—®ï¼Œå¯¹å…¶ä»–çº¿ç¨‹ä¸å¯è§&quot;ï¼Œä¸è€å¸ˆä½ å¥½ï¼Œè¿™é‡Œæˆ‘ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œsessionå’Œçº¿ç¨‹ä¸æ˜¯ä¸¤ä¸ªæ¦‚å¿µä¹ˆï¼Œåœ¨å¾ˆå¤šæ–‡ç« ä¸­æåˆ°çš„çº¿ç¨‹æˆ‘ç†è§£æ˜¯innoDBçš„æ‰§è¡Œçº¿ç¨‹å“‡","like_count":0},{"had_liked":false,"id":268023,"user_name":"æµ©å…‹","can_delete":false,"product_type":"c1","uid":1333389,"ip_address":"","ucode":"99F5D4F24AF574","user_header":"https://static001.geekbang.org/account/avatar/00/14/58/8d/bc69cde1.jpg","comment_is_top":false,"comment_ctime":1608033029,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608033029","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåœ¨25è¯¾é‡Œé¢çš„ç½®é¡¶ç•™è¨€â€œ6.è¡¨ä¸Šæ— ä¸»é”®çš„æƒ…å†µ(ä¸»åº“åˆ©ç”¨ç´¢å¼•æ›´æ”¹æ•°æ®,å¤‡åº“å›æ”¾åªèƒ½ç”¨å…¨è¡¨æ‰«æ,è¿™ç§æƒ…å†µå¯ä»¥è°ƒæ•´slave_rows_search_algorithmså‚æ•°é€‚å½“ä¼˜åŒ–ä¸‹)â€<br>ä¸ºå•¥ä¼šå­˜åœ¨æ— ä¸»é”®çš„è¡¨å‘¢ï¼Œå°±ç®—dbaæ²¡åˆ›å»ºä¸»é”®ï¼ŒInnodbå¯ä»¥ç”¨rowidç»™è‡ªåŠ¨å»ºä¸€ä¸ªè™šæ‹Ÿä¸»é”®å‘€ï¼Œè¿™æ ·ä¸å°±æ˜¯æ‰€æœ‰çš„è¡¨éƒ½æœ‰ä¸»é”®äº†å—ï¼Ÿ<br>ä½œè€…å›å¤: ç”¨æˆ·æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šä¸»é”®çš„è¯ï¼ŒInnoDBå¼•æ“ä¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªéšè—çš„ä¸»é”®ï¼Œä½†æ˜¯è¿™ä¸ªä¸»é”®å¯¹Serverå±‚æ˜¯é€æ˜çš„ï¼Œä¼˜åŒ–å™¨ç”¨ä¸ä¸Šã€‚<br><br>è€å¸ˆä½ çœ‹è¿™ä¹ˆç†è§£å¯¹ä¸ï¼Œè¡¨ä¸Šæ— ä¸»é”®çš„æƒ…å†µ(ä¸»åº“åˆ©ç”¨ç´¢å¼•æ›´æ”¹æ•°æ®,å¤‡åº“å›æ”¾åªèƒ½ç”¨å…¨è¡¨æ‰«æ,è¿™ç§æƒ…å†µå¯ä»¥è°ƒæ•´slave_rows_search_algorithmså‚æ•°é€‚å½“ä¼˜åŒ–ä¸‹)ï¼Œè¿™ä¸ªæè¿°çš„åœºæ™¯æ˜¯ï¼Œåœ¨binlog_format=rowï¼Œå¦‚æœä¸»åº“ä½¿ç”¨updateæ›´æ–°å¾ˆå¤šæ¡è¯­å¥çš„è¯ï¼ŒåŒæ­¥åˆ°ä»åº“å°±æ˜¯ä¸€è¡Œè¡Œçš„æ›´æ–°è®°å½•ï¼Œæ¯ä¸€ä¸ªæ›´æ–°è®°å½•ä»åº“éƒ½éœ€è¦å…¨è¡¨æ‰«é¢ä¸€éï¼Œè€Œä¸»åº“çš„æ›´æ–°åªéœ€è¦ä¸€æ¬¡å…¨è¡¨æ‰«æå°±æ›´æ–°å®Œæˆäº†ï¼Œå³ä½¿ä¸»åº“ä½¿ç”¨ç´¢å¼•æ›´æ–°ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯éœ€è¦ä¸€æ¬¡å…¨è¡¨æ‰«æï¼Œæ˜¯è¿™ä¹ˆç†è§£çš„å§ï¼Ÿä¹Ÿå°±æ˜¯è¯´è¡¨åœ¨æ— ä¸»é”®çš„æƒ…å†µä¸‹çš„æ›´æ–°éƒ½æ˜¯èµ°å…¨è¡¨æ‰«ææ¥æ›´æ–°çš„ï¼Œå³ä½¿é€šè¿‡äºŒçº§ç´¢å¼•æ¥æ›´æ–°ä¹Ÿæ˜¯éœ€è¦å…¨è¡¨æ‰«ææ›´æ–°è¡Œæ•°æ®é¡µçš„ï¼Œæœ‰ç†è§£åå·®çš„åœ°æ–¹éº»çƒ¦è¯·è€å¸ˆå¸®å¿™æŒ‡æ­£ä¸‹ï¼ŒæŠ±æ‹³äº†<br>","like_count":0},{"had_liked":false,"id":239072,"user_name":"lleft","can_delete":false,"product_type":"c1","uid":1970443,"ip_address":"","ucode":"D573EB509455AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","comment_is_top":false,"comment_ctime":1596426722,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596426722","product_id":100020801,"comment_content":"binlog_format=rowï¼Œbinlogä¸­æ²¡æœ‰è®°å½•ä»»ä½•ä¸ä¸´æ—¶è¡¨ç›¸å…³çš„è¯­å¥ï¼Œåˆ›å»ºä¸´æ—¶è¡¨ã€å¢åˆ æ”¹ä¹Ÿéƒ½æ²¡æœ‰è®°å½•ï¼Œåªæœ‰åœ¨ä¸»åŠ¨dropä¸´æ—¶è¡¨çš„æ—¶å€™ï¼Œæ‰ä¼šåœ¨binlogä¸­è®°å½•drop temporay tableã€‚ã€‚çš„ä¿¡æ¯ã€‚","like_count":0},{"had_liked":false,"id":232379,"user_name":"å’¸é±¼","can_delete":false,"product_type":"c1","uid":1179028,"ip_address":"","ucode":"5E79636DE48155","user_header":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","comment_is_top":false,"comment_ctime":1593990719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593990719","product_id":100020801,"comment_content":"MySQLçš„çº¿ç¨‹æ˜¯ä¸æ˜¯ä¹Ÿæ˜¯æ± åŒ–çš„èµ„æºï¼Ÿä¸€èˆ¬åœ¨ä½¿ç”¨æ—¶å®¢æˆ·ç«¯çš„æ± åŒ–è¿æ¥å’Œå’ŒMySQLæœåŠ¡çš„æ‰§è¡Œçº¿ç¨‹æ˜¯ä¸æ˜¯æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Ÿ","like_count":0},{"had_liked":false,"id":178047,"user_name":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","can_delete":false,"product_type":"c1","uid":1453053,"ip_address":"","ucode":"FADCDFA9F9E5E8","user_header":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","comment_is_top":false,"comment_ctime":1581578007,"is_pvip":false,"replies":[{"id":"69153","content":"æ–°å¹´å¿«ä¹ğŸ¤","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1581651968,"ip_address":"","comment_id":178047,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581578007","product_id":100020801,"comment_content":"æ–°å¹´å¿«ä¹ï¼Œå“ˆå“ˆå“ˆ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483646,"discussion_content":"æ–°å¹´å¿«ä¹ğŸ¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581651968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173214,"user_name":"Socket","can_delete":false,"product_type":"c1","uid":1313213,"ip_address":"","ucode":"932CF3D692FFB5","user_header":"https://static001.geekbang.org/account/avatar/00/14/09/bd/cc31c95d.jpg","comment_is_top":false,"comment_ctime":1579480187,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579480187","product_id":100020801,"comment_content":"æœ‰ä¸ªé—®é¢˜æ—¢ç„¶ä¸´æ—¶è¡¨æ˜¯çº¿ç¨‹æ–­å¼€ååˆ é™¤ï¼Œé‚£æ˜¯ä¸æ˜¯æ²¡æœ‰å¿…è¦å†™å…¥binglogç„¶åä¸»ä»åŒæ­¥ã€‚åæ­£æ–­å¼€æˆ–å…³æœºéƒ½ä¼šåˆ é™¤ã€‚","like_count":0},{"had_liked":false,"id":154710,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1574517704,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574517704","product_id":100020801,"comment_content":"çš„ç¡®ï¼Œåœ¨ä¸šåŠ¡å±‚è¿›è¡Œèšåˆï¼Œæˆæœ¬é«˜ã€‚SQLæ”¹å˜ï¼Œä¸šåŠ¡å±‚çš„å®ç°ä¹Ÿè¦å˜ã€‚åœ¨MySQLå†…å®ç°æœ€å¥½ï¼Œå®ç°æ—¶å¯ä»¥ç”¨ä¸´æ—¶è¡¨ï¼Œæˆ‘ä¸ªäººæ„Ÿè§‰ä¸­é—´ä»¶åº”è¯¥å®ç°è¿™éƒ¨åˆ†åŠŸèƒ½ï¼Œè¿™æ ·ï¼Œåˆ†åº“åˆ†è¡¨å¯¹ä¸šåŠ¡å±‚é€æ˜ã€‚<br>æˆ‘ä¹‹å‰åœ¨å…¬å¸æ—¶ï¼Œä½¿ç”¨äº†åœ¨ä¸šåŠ¡å±‚èšåˆï¼Œæ˜¯æœ‰äº›å¤æ‚ï¼Œæœ€éº»çƒ¦çš„æ˜¯SQLä¸åŒï¼Œä¸šåŠ¡ä»£ç å°±ä¸åŒï¼Œæ— æ³•å¤ç”¨åŒä¸€å¥—ä¸šåŠ¡ä»£ç ã€‚å‡†ç¡®è¯´ï¼Œåœ¨ä¸šåŠ¡å±‚å®ç°ä¸€ä¸ªé€šç”¨çš„å‡½æ•°å®ç°ä»»æ„SQLéš¾åº¦å¤§ä¸€äº›ï¼Œå®ç°åçš„æ•ˆç‡å¦‚ä½•ä¹Ÿä¸å¥½è¯´ï¼Œä½†åº”è¯¥èƒ½å®ç°ï¼Œå› ä¸ºSQLæœ‰ä¸€ä¸ªç»Ÿä¸€è¯­å¥","like_count":0},{"had_liked":false,"id":153963,"user_name":"éšå¿ƒè€Œè‡³","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1574337888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574337888","product_id":100020801,"comment_content":"æˆ‘è§‰å¾—ä¸´æ—¶è¡¨, æ™®é€šè¡¨æ˜¯ä¸æ˜¯å¯ä»¥ç±»æ¯”Javaé‡Œé¢çš„æ–¹æ³•çš„å±€éƒ¨å˜é‡å’Œç±»çš„å­—æ®µ","like_count":0},{"had_liked":false,"id":150114,"user_name":"ç¬‘ç€æ´»ä¸‹å»","can_delete":false,"product_type":"c1","uid":1621001,"ip_address":"","ucode":"23B8B4F9390A2B","user_header":"https://static001.geekbang.org/account/avatar/00/18/bc/09/d6b138fb.jpg","comment_is_top":false,"comment_ctime":1573463809,"is_pvip":false,"replies":[{"id":"57916","content":"rowæ ¼å¼ä¸‹ï¼Œå¤‡åº“æ ¹æœ¬å°±ä¸äº§ç”Ÿä¸´æ—¶è¡¨äº†ï¼Œä¹Ÿæ²¡æœ‰å¾€ä¸´æ—¶è¡¨é‡Œé¢å†™æ•°æ®çš„æ“ä½œäº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1573564461,"ip_address":"","comment_id":150114,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573463809","product_id":100020801,"comment_content":"è€å¸ˆï¼Œrowæ ¼å¼çš„binlogä¸è®°å½•ä¸´æ—¶è¡¨çš„æ“ä½œï¼Œé‚£ä¹ˆåœ¨å¤‡åº“æ’å…¥è®°å½•ï¼ˆå¯¹åº”ä¸»åº“ä¸Šé¢æ’å…¥åˆ°ä¸´æ—¶è¡¨ï¼‰æ˜¯æ’å…¥åˆ°å“ªé‡Œå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474067,"discussion_content":"rowæ ¼å¼ä¸‹ï¼Œå¤‡åº“æ ¹æœ¬å°±ä¸äº§ç”Ÿä¸´æ—¶è¡¨äº†ï¼Œä¹Ÿæ²¡æœ‰å¾€ä¸´æ—¶è¡¨é‡Œé¢å†™æ•°æ®çš„æ“ä½œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573564461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148826,"user_name":"Fs","can_delete":false,"product_type":"c1","uid":1083184,"ip_address":"","ucode":"0AD0EFB5544B9A","user_header":"https://static001.geekbang.org/account/avatar/00/10/87/30/4626c8c0.jpg","comment_is_top":false,"comment_ctime":1573091877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573091877","product_id":100020801,"comment_content":"æŠŠå„ä¸ªåˆ†åº“æ‹¿åˆ°çš„æ•°æ®ï¼Œæ±‡æ€»åˆ°ä¸€ä¸ª MySQL å®ä¾‹çš„ä¸€ä¸ªè¡¨ä¸­ï¼Œç„¶ååœ¨è¿™ä¸ªæ±‡æ€»å®ä¾‹ä¸Šåšé€»è¾‘æ“ä½œã€‚<br><br>è¿™ä¸ªæ˜¯serverç«¯æ˜¯æ€ä¹ˆåšåˆ°ï¼Ÿåˆ†å¸ƒå¼æ•°æ®åº“æ¯”å¦‚cassandraè¿™ç§æ˜¯æœ‰coordinate nodeå»åšè¿™ç§äº‹ã€‚mysqlå„ä¸ªåº“è¡¨éƒ½æ˜¯ä¸€æ ·çš„è§’è‰²ï¼Œæ€ä¹ˆåšåˆ°çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":142864,"user_name":"Chocolate","can_delete":false,"product_type":"c1","uid":1013822,"ip_address":"","ucode":"242CF0E3C10E97","user_header":"https://static001.geekbang.org/account/avatar/00/0f/78/3e/c39d86f1.jpg","comment_is_top":false,"comment_ctime":1571567078,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571567078","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œåœ¨ä¸Šä¸€æœŸçš„é—®é¢˜å›ç­”é‡Œï¼Œæœ‰ä¸€ä¸ªé—®é¢˜å’¨è¯¢ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©åœ¨ t1.c &gt; Xã€t2.c &gt; Yã€t3.c &gt;Z é‡Œé¢é€‰æ‹©æ•°æ®é‡æœ€å°çš„ä¸€å¼ è¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼Œä¸æ˜¯ç›´æ¥é€‰åœ¨ t1ã€t2ã€t3 é‡Œæ•°æ®é‡æœ€å°çš„ï¼Ÿç„¶åï¼Œå‡è®¾ 1 æ•°æ®é‡æœ€å°ï¼Œåœ¨ä¸ t2ã€t3 join çš„æ—¶å€™ç›´æ¥å°† t2.c &gt; Y æ”¾åœ¨ä¸ t2 join on çš„æ¡ä»¶ä¸Šï¼Œå°† t3.c &gt; Z æ”¾åœ¨ä¸ t3 join on çš„æ¡ä»¶ä¸Šï¼Œè¿™ç§åšæ³•å¯ä»¥å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":135088,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1569018048,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569018048","product_id":100020801,"comment_content":"è€å¸ˆå¥½!æˆ‘æœ‰ä¸ªé—®é¢˜ï¼ŒäºŒå‰æ ‘åˆ°åº•æœ‰å¤šå°‘å‰å’Œå†…å­˜æ¯é¡µå¤§å°å’Œï¼Œç´¢å¼•å¤§å°æœ‰å…³çº¦(é¡µå¤§å°&#47;å•ä¸ªç´¢å¼•å¤§å°)ã€‚é‚£å¦‚æœå†…å­˜é¡µå¤§å°æ”¹å˜äº†(å˜å¤§æˆ–å˜å°)ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå•Š?å‰æ•°ä¼šå˜ä¹ˆ?","like_count":0},{"had_liked":false,"id":123482,"user_name":"åŠ è½½ä¸­â€¦â€¦","can_delete":false,"product_type":"c1","uid":1366948,"ip_address":"","ucode":"3E59A0A0784D0A","user_header":"https://static001.geekbang.org/account/avatar/00/14/db/a4/191be6ad.jpg","comment_is_top":false,"comment_ctime":1565685175,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565685175","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ã€‚<br>â€œç¬¬ä¸€åŸåˆ™å°½é‡ä½¿ç”¨BKAâ€ã€‚æˆ‘æŸ¥çœ‹é˜¿é‡Œäº‘çš„æ•°æ®åº“(5.7.27)é»˜è®¤é…ç½®ç»“æœå¦‚ä¸‹ï¼š<br>show variables like &#39;optimizer_switch&#39;;<br>mrr=on,mrr_cost_based=on,batched_key_access=off<br>åº”è¯¥æ˜¯æ²¡æœ‰å¼€å¯BKAå’ŒMRRçš„åŠŸèƒ½, é˜¿é‡Œäº‘çš„æ•°æ®åº“é»˜è®¤é…ç½®æ²¡æœ‰å¯ç”¨BKAå’ŒMRRæ˜¯æœ‰ä»€ä¹ˆè€ƒè™‘ä¹ˆï¼Ÿ<br>å¦‚æœæ‰“å¼€MRRå’ŒBKA çš„è®¾ç½®æ˜¯ä¸æ˜¯åªæœ‰å¥½å¤„ï¼Œæ²¡æœ‰åå¤„?","like_count":0},{"had_liked":false,"id":121262,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1565089665,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1565089665","product_id":100020801,"comment_content":"è¡¨ç»“æ„æ–‡ä»¶ï¼š#sql{è¿›ç¨‹ id}_{çº¿ç¨‹ id}_ åºåˆ—å·.frm<br>table_def_keyï¼š åº“å+è¡¨å+server_id+thread_id<br><br>----<br>æ“ä½œæ­¥éª¤<br><br>0. create temporary table temp_t1(id int primary key)engine=innodb;<br>è¡¨ç»“æ„æ–‡ä»¶ï¼š#sql15d86_168_0.frm<br><br>1. create temporary table temp_t2(id int primary key)engine=innodb;<br>è¡¨ç»“æ„æ–‡ä»¶ï¼š#sql15d86_100000168_1.frm<br><br>2. create temporary table temp_t3(id int primary key)engine=innodb;<br>è¡¨ç»“æ„æ–‡ä»¶ï¼š#sql15d86_200000168_2.frm<br><br>3. create temporary table temp_t4(id int primary key)engine=innodb;<br>è¡¨ç»“æ„æ–‡ä»¶ï¼š#sql15d86_300000168_3.frm<br><br>4. create temporary table temp_t1(id int primary key)engine=innodb;<br>=ã€‹Error : Table &#39;temp_t1&#39; already exists<br><br>5. create temporary table temp_t5(id int primary key)engine=innodb;<br>è¡¨ç»“æ„æ–‡ä»¶ï¼š#sql15d86_500000168_5.frm<br><br>----<br><br>é—®é¢˜ä¸€ï¼šè¡¨ç»“æ„æ–‡ä»¶æ˜¯çš„ {çº¿ç¨‹ id} å’Œ table_def_key ä¸­çš„ thread_id æ˜¯åŒä¸€ä¸ªå€¼ä¹ˆï¼Ÿ<br><br>é—®é¢˜äºŒï¼š&#39;168&#39; å’Œ &#39;x00000168&#39;ï¼Œå“ªä¸ªæ˜¯çº¿ç¨‹ id?<br><br>åœ¨ç¬¬ 4. æ—¶ï¼Œé‡å¤åˆ›å»º temp_t1ï¼ŒæŠ¥é”™ï¼šè¡¨å·²å­˜åœ¨ï¼Œå¹¶ä¸”åºåˆ—å·è·³è¿‡äº† 4ã€‚è¿™é‡Œçš„ &#39;çº¿ç¨‹ id&#39; æ˜¯ &#39;168&#39;ï¼Œè¿˜æ˜¯ &#39;x00000168&#39;ï¼ˆæ„Ÿè§‰è¿™ä¸ª x æ˜¯åºåˆ—å·æ·»åŠ è¿›å»çš„ï¼‰?<br>å¦‚æœ &#39;çº¿ç¨‹ id&#39; æ˜¯ &#39;x00000168&#39;ï¼Œåˆ™ &#39;çº¿ç¨‹ id&#39; æ˜¯å˜åŒ–çš„ï¼Œè¿™æ˜¯å¦‚ä½•ç¡®å®š &#39;temp_t1&#39; å·²å­˜åœ¨çš„å‘¢ï¼Ÿ<br>è€Œ table_def_key ä¹Ÿæ˜¯ç”± &#39;çº¿ç¨‹ id&#39; ç»„æˆï¼Œå› æ­¤ table_def_key ä¹Ÿæ— æ³•æ ¡éªŒä¸´æ—¶è¡¨åçš„å”¯ä¸€æ€§å‘€ã€‚<br><br>è°¢è°¢è€å¸ˆï¼ï¼","like_count":0,"discussions":[{"author":{"id":1324550,"avatar":"https://static001.geekbang.org/account/avatar/00/14/36/06/08c46bcd.jpg","nickname":"è‚åˆ©","note":"","ucode":"808E064089724D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587783,"discussion_content":"è¿™é‡Œæ‰€æœ‰çš„æ•°å­—éƒ½æ˜¯16è¿›åˆ¶çš„ï¼Œæ‰€ä»¥åŠ x, éªŒè¯è¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663292597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121053,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1565053148,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565053148","product_id":100020801,"comment_content":"å’ŒçŒœæµ‹è¿‘ä¼¼ï¼Œä¸´æ—¶è¡¨å¯ä»¥é‡åï¼Œæ˜¯ä¸ªç›¸å¯¹åˆ¤å®šã€‚<br>åŒä¸€ä¸ªåº“çš„è¡¨åæ˜¯ä¸èƒ½é‡å¤çš„ï¼Œå¦åˆ™æŸ¥è¯¢çš„æ—¶å€™å°±æ‡µé€¼äº†ã€‚è¿™é‡Œçš„é‡åï¼Œåªæ˜¯è¡¨åé‡å¤äº†ï¼Œä½†æ˜¯æŸ¥çš„æ—¶å€™ä¼šå¸¦ä¸Šå…¶ä»–è¯†åˆ«ä¿¡æ¯ï¼Œå¹¶ä¸”æ‰€åœ¨çš„åœˆå±‚ä¹Ÿå˜åŒ–äº†ã€‚<br>ä¸´æ—¶è¡¨åœ¨æŸäº›åœºæ™¯ç¡®å®å¥½ç”¨ï¼Œä¸è¿‡å®é™…å·¥ä½œä¸­å‡ ä¹æœªç”¨è¿‡ï¼Œæ„Ÿè§‰å†™å­˜å‚¨è¿‡ç¨‹æ‰ç”¨çš„åˆ°ï¼Œå¹³æ—¶çš„ä¸šåŠ¡å¼€å‘ä¸ä¼šè¿™ä¹ˆç©ã€‚","like_count":0},{"had_liked":false,"id":118877,"user_name":"ZHANG","can_delete":false,"product_type":"c1","uid":1442437,"ip_address":"","ucode":"BAFD110AE33328","user_header":"https://static001.geekbang.org/account/avatar/00/16/02/85/9a81a973.jpg","comment_is_top":false,"comment_ctime":1564456485,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564456485","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘é—®å“ˆ<br>ä¸´æ—¶è¡¨çš„ç‰¹æ€§ç¬¬4ç‚¹é‡Œè¯´â€œsession Aå†…æœ‰åŒåçš„ä¸´æ—¶è¡¨å’Œæ™®é€šè¡¨çš„æ—¶å€™ï¼Œshow createè¯­å¥ï¼Œä»¥åŠå¢åˆ æ”¹æŸ¥è¯­å¥è®¿é—®çš„æ˜¯ä¸´æ—¶è¡¨â€<br>å¦‚æœè¿™æ—¶å€™æƒ³è®¿é—®å’Œä¸´æ—¶è¡¨åŒåçš„æ™®é€šè¡¨æ€ä¹ˆè®¿é—®å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299804,"discussion_content":"show tables","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597826378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92597,"user_name":"llx","can_delete":false,"product_type":"c1","uid":1153012,"ip_address":"","ucode":"95741E1BD74B26","user_header":"https://static001.geekbang.org/account/avatar/00/11/97/f4/6709b8cf.jpg","comment_is_top":false,"comment_ctime":1557305498,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557305498","product_id":100020801,"comment_content":"æŸ¥è¯¢éœ€è¦sessionï¼Œæ‰€ä»¥åŒæ­¥åˆ°å¤‡åº“å…¶å®æ˜¯æŸ¥è¯¢ä¸åˆ°çš„ï¼Œåªæ˜¯å¤‡ä»½ç”¨","like_count":0}]}