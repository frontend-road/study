{"id":260646,"title":"08 | 实现元素定位：掌握Selenium八大定位方法","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Selenium\">https://gitee.com/geektime-geekbang/Selenium</a></p><p><strong>如果你无法从GitHub正常下载课件及Demo，请打开下方链接进行下载：</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Selenium\">https://gitee.com/geektime-geekbang/Selenium</a></p>","comments":[{"had_liked":false,"id":362610,"user_name":"陈欣彤","can_delete":false,"product_type":"c3","uid":1949910,"ip_address":"辽宁","ucode":"5D58BCC53E8467","user_header":"","comment_is_top":false,"comment_ctime":1668676121,"is_pvip":false,"replies":[{"id":134386,"content":"在代码中，创建了一个 TestCase 类，该类在初始化方法 `__init__` 中创建了一个 Chrome 驱动器对象，打开了百度网站，并最大化窗口。接着，在 `test_id` 方法中，通过该驱动器对象找到搜索框，输入搜索词并点击搜索按钮，最后等待 10 秒后关闭浏览器。\n\n在主程序中，首先创建了一个 TestCase 的实例，然后调用该实例的 `test_id` 方法。\n\n由于在 `__init__` 方法中已经打开了百度网站并最大化了窗口，因此在调用 `test_id` 方法时，又会打开一个新的百度窗口。因此，程序最终会打开两个百度窗口。\n\n为了解决这个问题，可以将打开网站和最大化窗口的代码从 `__init__` 方法中移动到 `test_id` 方法中，或者在初始化方法中加入判断，如果浏览器已经打开，则不再打开。例如：\n\n```\nclass TestCase(object):\n    def __init__(self):\n        self.driver = None\n    \n    def test_id(self):\n        if not self.driver:\n            self.driver = webdriver.Chrome()\n            self.driver.get(&#39;http:&#47;&#47;www.baidu.com&#39;)\n            self.driver.maximize_window()\n            sleep(3)\n        element = self.driver.find_element(By.ID, &#39;kw&#39;).send_keys(&#39;yuanshen&#39;)\n        sleep(3)\n        self.driver.find_element(By.ID, &#39;su&#39;).click()\n        sleep(10)\n        self.driver.quit()\n\n\nif __name__ == &#39;__main__&#39;:\n    case = TestCase()\n    case.test_id()\n```\n\n在修改后的代码中，初始化方法只初始化了一个空的驱动器对象，而在测试方法中，通过判断驱动器对象是否为空来确定是否需要打开浏览器。这样，即使在初始化方法中打开了浏览器，由于在测试方法中判断浏览器对象不为空，因此不会再次打开浏览器","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677054635,"ip_address":"河北","comment_id":362610,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"class TestCase(object):\n    def __init__(self):\n        self.driver = webdriver.Chrome()\n        self.driver.get(&#39;http:&#47;&#47;www.baidu.com&#39;)\n        self.driver.maximize_window()\n        sleep(3)\n    def test_id(self):\n        element = self.driver.find_element(By.ID, &#39;kw&#39;).send_keys(&#39;yuanshen&#39;)\n        sleep(3)\n        self.driver.find_element(By.ID, &#39;su&#39;).click()\n        sleep(10)\n        self.driver.quit()\n\n\nif __name__ == &#39;__main__&#39;:\n    case = TestCase()\n    case.test_id()\n运行后为什么会打开两个百度窗口","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606247,"discussion_content":"在代码中，创建了一个 TestCase 类，该类在初始化方法 `__init__` 中创建了一个 Chrome 驱动器对象，打开了百度网站，并最大化窗口。接着，在 `test_id` 方法中，通过该驱动器对象找到搜索框，输入搜索词并点击搜索按钮，最后等待 10 秒后关闭浏览器。\n\n在主程序中，首先创建了一个 TestCase 的实例，然后调用该实例的 `test_id` 方法。\n\n由于在 `__init__` 方法中已经打开了百度网站并最大化了窗口，因此在调用 `test_id` 方法时，又会打开一个新的百度窗口。因此，程序最终会打开两个百度窗口。\n\n为了解决这个问题，可以将打开网站和最大化窗口的代码从 `__init__` 方法中移动到 `test_id` 方法中，或者在初始化方法中加入判断，如果浏览器已经打开，则不再打开。例如：\n\n```\nclass TestCase(object):\n    def __init__(self):\n        self.driver = None\n    \n    def test_id(self):\n        if not self.driver:\n            self.driver = webdriver.Chrome()\n            self.driver.get(&#39;http://www.baidu.com&#39;)\n            self.driver.maximize_window()\n            sleep(3)\n        element = self.driver.find_element(By.ID, &#39;kw&#39;).send_keys(&#39;yuanshen&#39;)\n        sleep(3)\n        self.driver.find_element(By.ID, &#39;su&#39;).click()\n        sleep(10)\n        self.driver.quit()\n\n\nif __name__ == &#39;__main__&#39;:\n    case = TestCase()\n    case.test_id()\n```\n\n在修改后的代码中，初始化方法只初始化了一个空的驱动器对象，而在测试方法中，通过判断驱动器对象是否为空来确定是否需要打开浏览器。这样，即使在初始化方法中打开了浏览器，由于在测试方法中判断浏览器对象不为空，因此不会再次打开浏览器","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677054635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355148,"user_name":"海东","can_delete":false,"product_type":"c3","uid":3045485,"ip_address":"北京","ucode":"CE7632EDE20F42","user_header":"https://static001.geekbang.org/account/avatar/00/2e/78/6d/48fcbb92.jpg","comment_is_top":false,"comment_ctime":1661138913,"is_pvip":false,"replies":[{"id":134396,"content":"这个根python没有关系是selenium里面的api 查看一下selenium","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677055275,"ip_address":"河北","comment_id":355148,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"python安装跟你一样的版本，为什么没有find-element-by-id 这个方法","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606257,"discussion_content":"这个根python没有关系是selenium里面的api 查看一下selenium","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677055275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2829157,"avatar":"","nickname":"Geek_796019","note":"","ucode":"D8A6D3B4B605B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606469,"discussion_content":"版本问题了，你试试 self.driver.find_element(By.ID, &#39;kw&#39;)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677143108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353048,"user_name":"Wjw_nn","can_delete":false,"product_type":"c3","uid":2528622,"ip_address":"陕西","ucode":"BD6692EA011589","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJibVLTficPrvWKDSvMTbMWP98kboTp4wVj3XC2ct37icYVPicq91cV9bwcvQ6zjEVQng1qvNdNU8cCMA/132","comment_is_top":false,"comment_ctime":1659091337,"is_pvip":false,"replies":[{"id":134399,"content":"你用的啥编辑器 pycharm吗？还是其他的 每个编辑器都不太一样","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677055375,"ip_address":"河北","comment_id":353048,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，为什么我的编辑器不能自动联想呢，没有设置低电量，用的3.10的版本","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606261,"discussion_content":"你用的啥编辑器 pycharm吗？还是其他的 每个编辑器都不太一样","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677055375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349473,"user_name":"婷婷","can_delete":false,"product_type":"c3","uid":1202500,"ip_address":"","ucode":"FFD8D59F5F47E9","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/44/723d44bc.jpg","comment_is_top":false,"comment_ctime":1655984844,"is_pvip":false,"replies":[{"id":134406,"content":"可以把图片校验跳过","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677055637,"ip_address":"河北","comment_id":349473,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师我这边会一直校验图片的要怎么操作","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606268,"discussion_content":"可以把图片校验跳过","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677055637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325413,"user_name":"在路上","can_delete":false,"product_type":"c3","uid":2373817,"ip_address":"","ucode":"61502A18D7FBF0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJEQ91aYaGSu5icPxkyROvznXvKcIOAchfVGNbORYCTY8HBARpN2cqddOXficMExa97rbwb6SZIyziag/132","comment_is_top":false,"comment_ctime":1638949904,"is_pvip":false,"replies":[{"id":119820,"content":"看看是否有语法错误 这种情况一般就是语法错误","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1640946473,"ip_address":"","comment_id":325413,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"from selenium import  webdriver\n\ndriver = webdriver.chrome()\ndriver.maximize_window()\n \n我的Pycharm环境 driver.  输入 m  没有自动提示出 maximize_window()这个方法\n","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543080,"discussion_content":"看看是否有语法错误 这种情况一般就是语法错误","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640946473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299412,"user_name":"Geek_cde08d","can_delete":false,"product_type":"c3","uid":2635971,"ip_address":"","ucode":"C591DEA3A2FAD2","user_header":"","comment_is_top":false,"comment_ctime":1624614598,"is_pvip":false,"replies":[{"id":109676,"content":"这样代码更具有通用性 ","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1626602260,"ip_address":"","comment_id":299412,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，你好！\n听完您第8课的讲解之后，我对最后一个知识点还有一点不太理解的地方。我不太清楚重新定义一个方法get_element(driver, *loc)有什么好处？\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\ndef get_element(driver, *loc):\n    e = driver.find_element(*loc)\n    return e\n\nif __name__ == &#39;__main__&#39;:\n    driver = webdriver.Chrome()\n    driver.get(&#39;http:&#47;&#47;baidu.com&#39;)\n    loc = (By.ID, &#39;kw&#39;)\n    loc2 = (By.ID, &#39;su&#39;)\n    get_element(driver, *loc).send_keys(&#39;selenium&#39;)\n    get_element(driver, *loc2).click()\n\n如果不额外定义一个方法，我在if __name__ == &#39;__main__&#39;:代码里，直接使用driver.find_element(By.ID, &#39;kw&#39;).send_keys(&#39;selenium&#39;)的话，感觉代码会更少些。\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\nif __name__ == &#39;__main__&#39;:\n    driver = webdriver.Chrome()\n    driver.get(&#39;http:&#47;&#47;baidu.com&#39;)\n    driver.find_element(By.ID, &#39;kw&#39;).send_keys(&#39;selenium&#39;)\n    driver.find_element(By.ID, &#39;su&#39;).click()\n\n老师能帮忙解答一下吗？谢谢！","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522435,"discussion_content":"这样代码更具有通用性 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626602260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289877,"user_name":"蓝丶鸢尾","can_delete":false,"product_type":"c3","uid":2551178,"ip_address":"","ucode":"5390C424DE5F1D","user_header":"https://static001.geekbang.org/account/avatar/00/26/ed/8a/5d9e0a13.jpg","comment_is_top":false,"comment_ctime":1619246475,"is_pvip":false,"replies":[{"id":105541,"content":"driver 没有正确实例化 或者不在这个作用域","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1620266429,"ip_address":"","comment_id":289877,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，我元素定位时候报错。不知道是啥错误，能帮我看看嘛\n\nelement = self.driver.find_element_by_id(&#39;kw&#39;)\nAttributeError: &#39;TestCase&#39; object has no attribute &#39;driver&#39;","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519039,"discussion_content":"driver 没有正确实例化 或者不在这个作用域","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620266429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2089218,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/e1/02/b352cde7.jpg","nickname":"星辰","note":"","ucode":"27736BFBA9D325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586208,"discussion_content":"大佬，我也碰到了，你找到原因了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662036013,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284385,"user_name":"曦","can_delete":false,"product_type":"c3","uid":2295081,"ip_address":"","ucode":"C3930647C4D901","user_header":"https://static001.geekbang.org/account/avatar/00/23/05/29/f7e54a89.jpg","comment_is_top":false,"comment_ctime":1616223065,"is_pvip":false,"replies":[{"id":103840,"content":"浏览器版本和驱动版本不一致","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1617102023,"ip_address":"","comment_id":284385,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"Traceback (most recent call last):\n  File &quot;E:&#47;tools&#47;PyCharm&#47;PycharmProjects&#47;FristProjects&#47;demo01.py&quot;, line 35, in &lt;module&gt;\n    case = TestCase()\n  File &quot;E:&#47;tools&#47;PyCharm&#47;PycharmProjects&#47;FristProjects&#47;demo01.py&quot;, line 17, in __init__\n    self.driver = webdriver.Chrome()\n  File &quot;E:\\tools\\py3.7\\lib\\site-packages\\selenium\\webdriver\\chrome\\webdriver.py&quot;, line 81, in __init__\n    desired_capabilities=desired_capabilities)\n  File &quot;E:\\tools\\py3.7\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py&quot;, line 157, in __init__\n    self.start_session(capabilities, browser_profile)\n  File &quot;E:\\tools\\py3.7\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py&quot;, line 252, in start_session\n    response = self.execute(Command.NEW_SESSION, parameters)\n  File &quot;E:\\tools\\py3.7\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py&quot;, line 321, in execute\n    self.error_handler.check_response(response)\n  File &quot;E:\\tools\\py3.7\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py&quot;, line 242, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 87\nCurrent browser version is 89.0.4389.90 with binary path C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\n\n\nProcess finished with exit code 1\n","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517327,"discussion_content":"浏览器版本和驱动版本不一致","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617102023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281748,"user_name":"Mnemosyne","can_delete":false,"product_type":"c3","uid":2449344,"ip_address":"","ucode":"19BCEA59B90259","user_header":"https://static001.geekbang.org/account/avatar/00/25/5f/c0/9c1ec76e.jpg","comment_is_top":false,"comment_ctime":1614868597,"is_pvip":false,"replies":[{"id":102669,"content":"这个是联网问题","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1615474486,"ip_address":"","comment_id":281748,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，使用linktext元素定位之后就反复出现下面这个错误：\nConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516492,"discussion_content":"这个是联网问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615474486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276253,"user_name":"彬(^_^)","can_delete":false,"product_type":"c3","uid":1085687,"ip_address":"","ucode":"2636A5DE688A21","user_header":"https://static001.geekbang.org/account/avatar/00/10/90/f7/7486805a.jpg","comment_is_top":false,"comment_ctime":1611846742,"is_pvip":false,"replies":[{"id":101549,"content":"*loc可以是多个参数","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1613821955,"ip_address":"","comment_id":276253,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"def get_element(driver, *loc):\n    e = driver.find_element(*loc)\n    return e\n\n想问下自己定义一个类， driver.find_element中为什么不用加value就能够执行，value不是必填的参数吗\n\n","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514640,"discussion_content":"*loc可以是多个参数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613821955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239766,"user_name":"嫒琳","can_delete":false,"product_type":"c3","uid":2078925,"ip_address":"","ucode":"276C5598706EED","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/F2EZPfnEtc7g53gsOBbQO5WZptrcMY419XD3vCLCzicQ8OdiaWzaFoqJyztrIrEibfbslaLKU5XzSzcBsAic0tATRQ/132","comment_is_top":false,"comment_ctime":1596636412,"is_pvip":false,"replies":[{"id":88548,"content":"先定位姓名 定位到那一行 得到的webelement可以继续定位得到查看按钮","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1596668800,"ip_address":"","comment_id":239766,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师，我网页是一个表格，有姓名和操作列，怎么根据姓名去把那行的操作列中的查看按钮定位到？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503210,"discussion_content":"先定位姓名 定位到那一行 得到的webelement可以继续定位得到查看按钮","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596668800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239451,"user_name":"曹怂怂","can_delete":false,"product_type":"c3","uid":2098998,"ip_address":"","ucode":"21970CE841240D","user_header":"https://static001.geekbang.org/account/avatar/00/20/07/36/fd3762b6.jpg","comment_is_top":false,"comment_ctime":1596534983,"is_pvip":false,"replies":[{"id":88454,"content":"xpath可以通过相对路径自己写  class 不唯一也可以用 取到列表通过索引获得","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1596537156,"ip_address":"","comment_id":239451,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"div没有id等属性，xpath复制出来超过字符串长度，class不唯一，这个是系统菜单 菜单是数据库填充的数据，登陆系统后怎么取这个元素定位到对应的功能页面呢\n&lt;div rrn=&quot;85061&quot; class=&quot;isLeaf i5k-menu-active&quot;&gt;513 Step Setup&lt;&#47;div&gt;","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503105,"discussion_content":"xpath可以通过相对路径自己写  class 不唯一也可以用 取到列表通过索引获得","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596537156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2098998,"avatar":"https://static001.geekbang.org/account/avatar/00/20/07/36/fd3762b6.jpg","nickname":"曹怂怂","note":"","ucode":"21970CE841240D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296595,"discussion_content":"方法2:获取到list后 怎么知道我要的那个元素的索引号呢； 这个页面会不会系统我加了新菜单，索引就变掉了；方法1……:相对路径不太明白怎么用；","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596597394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239368,"user_name":"年少无为","can_delete":false,"product_type":"c3","uid":2065292,"ip_address":"","ucode":"E4CA782D09A1F5","user_header":"https://static001.geekbang.org/account/avatar/00/1f/83/8c/52090c79.jpg","comment_is_top":false,"comment_ctime":1596513682,"is_pvip":false,"replies":[{"id":88409,"content":"可以的 拼字符串就行","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1596517822,"ip_address":"","comment_id":239368,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"self.driver.find_element_by_xpath(&quot;&#47;&#47;*[@id=&#39;65&#39;]&#47;button[2]&quot;).click()\n老师，请问下这个ID= 65”的keys定义一个元组，然后用ID的keys值用for循环传过去吗","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503082,"discussion_content":"可以的 拼字符串就行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596517822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237033,"user_name":"嘉乙","can_delete":false,"product_type":"c3","uid":2064953,"ip_address":"","ucode":"0C04AE1B5CF6A2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/82/39/f4ea0e3a.jpg","comment_is_top":false,"comment_ctime":1595663421,"is_pvip":false,"replies":[{"id":87623,"content":"1 你的类名 不能是TestCase  2 self.driver","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1595717361,"ip_address":"","comment_id":237033,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"Traceback (most recent call last):\n  File &quot;C:&#47;Users&#47;Administrator&#47;PycharmProjects&#47;dome2&#47;dome02.py&quot;, line 24, in &lt;module&gt;\n    case.test_id()\n  File &quot;C:&#47;Users&#47;Administrator&#47;PycharmProjects&#47;dome2&#47;dome02.py&quot;, line 12, in test_id\n    element = self.driver.find_element_by_id(&#39;kw&#39;)\nAttributeError: &#39;TestCase&#39; object has no attribute &#39;driver&#39;\n对象没有属性","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502294,"discussion_content":"1 你的类名 不能是TestCase  2 self.driver","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595717361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3176436,"avatar":"https://static001.geekbang.org/account/avatar/00/30/77/f4/82ad6ac0.jpg","nickname":"Zzz","note":"","ucode":"4DE0785A15B3E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588245,"discussion_content":"老师我遇到了一样的报错，代码跟视频里写的是一样的还是报错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663608270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236986,"user_name":"Jason","can_delete":false,"product_type":"c3","uid":2078788,"ip_address":"","ucode":"0B46BA3C7D8177","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b8/44/e59e3302.jpg","comment_is_top":false,"comment_ctime":1595642832,"is_pvip":false,"replies":[{"id":87579,"content":"使用autoit 通过坐标定位","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1595648522,"ip_address":"","comment_id":236986,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师好，我工作中遇到一个问题，一个带id的div盒子，页面手动操作是点击的时候，会出现一个下拉框。但是用selenium的时候，能定位到，利用click却无法点击，请问老师这种问题应该怎么解决","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502280,"discussion_content":"使用autoit 通过坐标定位","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595648522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2078788,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/b8/44/e59e3302.jpg","nickname":"Jason","note":"","ucode":"0B46BA3C7D8177","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293830,"discussion_content":"好的，谢谢老师，我去尝试一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595684208,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235719,"user_name":"树洞先生","can_delete":false,"product_type":"c3","uid":1163842,"ip_address":"","ucode":"5C6C3DBE98DAE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/c2/42/17afefdb.jpg","comment_is_top":false,"comment_ctime":1595162275,"is_pvip":false,"replies":[{"id":87200,"content":"不一定的 有时候会使用其他的方法 比如 js 或者 autoit等","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1595299346,"ip_address":"","comment_id":235719,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师，界面上每一个元素都可以唯一定位到吗？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501809,"discussion_content":"不一定的 有时候会使用其他的方法 比如 js 或者 autoit等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595299346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235318,"user_name":"陈喵喵","can_delete":false,"product_type":"c3","uid":1515953,"ip_address":"","ucode":"03217274194AB4","user_header":"https://static001.geekbang.org/account/avatar/00/17/21/b1/59b764b1.jpg","comment_is_top":false,"comment_ctime":1594972186,"is_pvip":false,"replies":[{"id":86941,"content":"element加s","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1594993647,"ip_address":"","comment_id":235318,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"tag方法里取index会报错：\nTraceback (most recent call last):\n  File &quot;&#47;Users&#47;yiychen&#47;PycharmProjects&#47;FirstProject&#47;demo02.py&quot;, line 58, in &lt;module&gt;\n    case.test_tag()\n  File &quot;&#47;Users&#47;yiychen&#47;PycharmProjects&#47;FirstProject&#47;demo02.py&quot;, line 47, in test_tag\n    input = self.driver.find_element_by_tag_name(&#39;input&#39;)[0]\nTypeError: &#39;WebElement&#39; object does not support indexing","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501685,"discussion_content":"element加s","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594993647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2067086,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/8a/8e/afd725a3.jpg","nickname":"Testing","note":"","ucode":"7662C2184B088F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292849,"discussion_content":"虽然有多个tag标签，不确定的话可以这样找到baidu的输入框。\nclass TestCase(object):\n    def __init__(self):\n        self.driver = webdriver.Chrome()\n        self.driver.get(&#34;http://www.baidu.com&#34;)\n        self.driver.maximize_window()\n        time.sleep(1)\n\n    def execute_click_su(self):\n        self.driver.find_element_by_id(&#39;su&#39;).click()\n        time.sleep(3)\n\n    # tag 标签名称定位\n    def test_tag(self):\n        element = self.driver.find_elements_by_tag_name(&#39;input&#39;)\n        for i in range(17):  # 可以通过F12看到tag的数量\n            try:\n                element[i].send_keys(&#39;git&#39;)\n                self.execute_click_su()\n                time.sleep(3)\n            except Exception as e:\n                print(e)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595346752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":375141,"user_name":"Geek_adc87e","can_delete":false,"product_type":"c3","uid":2788064,"ip_address":"北京","ucode":"5C450834139CD2","user_header":"","comment_is_top":false,"comment_ctime":1684978602,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"老师，如果获取元素的值在网格里，但是这个元素所在的行和列是不固定的，有没有好的方法获取","like_count":0},{"had_liked":false,"id":370678,"user_name":"Lina Dong","can_delete":false,"product_type":"c3","uid":2673002,"ip_address":"上海","ucode":"2EDC562E183072","user_header":"https://static001.geekbang.org/account/avatar/00/28/c9/6a/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1679101037,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"有源代码么？","like_count":0},{"had_liked":false,"id":362615,"user_name":"陈欣彤","can_delete":false,"product_type":"c3","uid":1949910,"ip_address":"辽宁","ucode":"5D58BCC53E8467","user_header":"","comment_is_top":false,"comment_ctime":1668679108,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100055601,"comment_content":"def __init__(self):\n        self.driver = webdriver.Chrome()\n为什么会调用两次初始化","like_count":0},{"had_liked":false,"id":356281,"user_name":"星辰","can_delete":false,"product_type":"c3","uid":2089218,"ip_address":"江苏","ucode":"27736BFBA9D325","user_header":"https://static001.geekbang.org/account/avatar/00/1f/e1/02/b352cde7.jpg","comment_is_top":false,"comment_ctime":1662104552,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100055601,"comment_content":"by是如何自动导入的","like_count":0},{"had_liked":false,"id":342972,"user_name":"乐森","can_delete":false,"product_type":"c3","uid":2075042,"ip_address":"","ucode":"D46F6366463CA1","user_header":"https://static001.geekbang.org/account/avatar/00/1f/a9/a2/703f7fa8.jpg","comment_is_top":false,"comment_ctime":1650555253,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100055601,"comment_content":"老师，这节课有个疑问，在其他方法里调用了test.id，这个方法里不是又关闭浏览器吗，为什么其他的方式不需要重新打开浏览器就能点击首页呢","like_count":0},{"had_liked":false,"id":336052,"user_name":"Geek_d2eb62","can_delete":false,"product_type":"c3","uid":2894495,"ip_address":"","ucode":"729022B1D28AD1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/GEsrR5BvcKqcEc77uBngvU8skLBiabw6LtNqY3jwcGtU3A5jERe5Cvx78Dibv0GSBxeBbt0PCMmD6licneMicB0yEA/132","comment_is_top":false,"comment_ctime":1645869091,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100055601,"comment_content":"我怎么记得返回的是一个列表不是集合。","like_count":0}]}