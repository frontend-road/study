{"id":394633,"title":"21 | æ—¥å¿—å¤„ç†ï¼ˆä¸‹ï¼‰ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ä» 0 ç¼–å†™ä¸€ä¸ªæ—¥å¿—åŒ…","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å­”ä»¤é£ã€‚</p><p>ä¸Šä¸€è®²æˆ‘ä»‹ç»äº†å¦‚ä½•è®¾è®¡æ—¥å¿—åŒ…ï¼Œä»Šå¤©æ˜¯å®æˆ˜ç¯èŠ‚ï¼Œæˆ‘ä¼šæ‰‹æŠŠæ‰‹æ•™ä½ ä»0ç¼–å†™ä¸€ä¸ªæ—¥å¿—åŒ…ã€‚</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€äº›ä¼˜ç§€çš„å¼€æºæ—¥å¿—åŒ…ï¼Œä¸åŠ ä¿®æ”¹ç›´æ¥æ‹¿æ¥ä½¿ç”¨ã€‚ä½†æ›´å¤šæ—¶å€™ï¼Œæ˜¯åŸºäºä¸€ä¸ªæˆ–æŸå‡ ä¸ªä¼˜ç§€çš„å¼€æºæ—¥å¿—åŒ…è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚æƒ³è¦å¼€å‘æˆ–è€…äºŒæ¬¡å¼€å‘ä¸€ä¸ªæ—¥å¿—åŒ…ï¼Œå°±è¦æŒæ¡æ—¥å¿—åŒ…çš„å®ç°æ–¹å¼ã€‚é‚£ä¹ˆè¿™ä¸€è®²ä¸­ï¼Œæˆ‘æ¥å¸¦ä½ ä»0åˆ°1ï¼Œå®ç°ä¸€ä¸ªå…·å¤‡åŸºæœ¬åŠŸèƒ½çš„æ—¥å¿—åŒ…ï¼Œè®©ä½ ä»ä¸­ä¸€çª¥æ—¥å¿—åŒ…çš„å®ç°åŸç†å’Œå®ç°æ–¹æ³•ã€‚</p><p>åœ¨å¼€å§‹å®æˆ˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ç›®å‰ä¸šç•Œæœ‰å“ªäº›ä¼˜ç§€çš„å¼€æºæ—¥å¿—åŒ…ã€‚</p><h2>æœ‰å“ªäº›ä¼˜ç§€çš„å¼€æºæ—¥å¿—åŒ…ï¼Ÿ</h2><p>åœ¨Goé¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ä¸€äº›ä¼˜ç§€çš„å¼€æºæ—¥å¿—åŒ…ï¼Œæ¥å®ç°é¡¹ç›®çš„æ—¥å¿—åŒ…ã€‚Goç”Ÿæ€ä¸­æœ‰å¾ˆå¤šä¼˜ç§€çš„å¼€æºæ—¥å¿—åŒ…ï¼Œä¾‹å¦‚æ ‡å‡†åº“logåŒ…ã€glogã€logrusã€zapã€seelogã€zerologã€log15ã€apex/logã€go-loggingç­‰ã€‚å…¶ä¸­ï¼Œç”¨å¾—æ¯”è¾ƒå¤šçš„æ˜¯æ ‡å‡†åº“logåŒ…ã€glogã€logruså’Œzapã€‚</p><p>ä¸ºäº†ä½¿ä½ äº†è§£å¼€æºæ—¥å¿—åŒ…çš„ç°çŠ¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šç®€å•ä»‹ç»ä¸‹è¿™å‡ ä¸ªå¸¸ç”¨çš„æ—¥å¿—åŒ…ã€‚è‡³äºå®ƒä»¬çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œä½ å¯ä»¥å‚è€ƒæˆ‘æ•´ç†çš„ä¸€ç¯‡æ–‡ç« ï¼š<a href=\"https://github.com/marmotedu/geekbang-go/blob/master/%E4%BC%98%E7%A7%80%E5%BC%80%E6%BA%90%E6%97%A5%E5%BF%97%E5%8C%85%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B.md\">ä¼˜ç§€å¼€æºæ—¥å¿—åŒ…ä½¿ç”¨æ•™ç¨‹</a>ã€‚</p><h3>æ ‡å‡†åº“logåŒ…</h3><p>æ ‡å‡†åº“logåŒ…çš„åŠŸèƒ½éå¸¸ç®€å•ï¼Œåªæä¾›äº†Printã€Panicå’ŒFatalä¸‰ç±»å‡½æ•°ç”¨äºæ—¥å¿—è¾“å‡ºã€‚å› ä¸ºæ˜¯æ ‡å‡†åº“è‡ªå¸¦çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æˆ‘ä»¬ä¸‹è½½å®‰è£…ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚</p><!-- [[[read_end]]] --><p>æ ‡å‡†åº“logåŒ…åªæœ‰ä¸åˆ°400è¡Œçš„ä»£ç é‡ï¼Œå¦‚æœä½ æƒ³ç ”ç©¶å¦‚ä½•å®ç°ä¸€ä¸ªæ—¥å¿—åŒ…ï¼Œé˜…è¯»æ ‡å‡†åº“logåŒ…æ˜¯ä¸€ä¸ªä¸é”™çš„å¼€å§‹ã€‚Goçš„æ ‡å‡†åº“å¤§é‡ä½¿ç”¨äº†logåŒ…ï¼Œä¾‹å¦‚<code>net/http</code> ã€ <code>net/rpc</code> ç­‰ã€‚</p><h3>glog</h3><p><a href=\"https://github.com/golang/glog\">glog</a>æ˜¯Googleæ¨å‡ºçš„æ—¥å¿—åŒ…ï¼Œè·Ÿæ ‡å‡†åº“logåŒ…ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ—¥å¿—åŒ…ï¼Œä½¿ç”¨èµ·æ¥ç®€å•æ–¹ä¾¿ã€‚ä½†glogæ¯”æ ‡å‡†åº“logåŒ…æä¾›äº†æ›´å¤šçš„åŠŸèƒ½ï¼Œå®ƒå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p><ul>\n<li>æ”¯æŒ4ç§æ—¥å¿—çº§åˆ«ï¼šInfoã€Warningã€Errorã€Fatalã€‚</li>\n<li>æ”¯æŒå‘½ä»¤è¡Œé€‰é¡¹ï¼Œä¾‹å¦‚<code>-alsologtostderr</code>ã€<code>-log_backtrace_at</code>ã€<code>-log_dir</code>ã€<code>-logtostderr</code>ã€<code>-v</code>ç­‰ï¼Œæ¯ä¸ªå‚æ•°å®ç°æŸç§åŠŸèƒ½ã€‚</li>\n<li>æ”¯æŒæ ¹æ®æ–‡ä»¶å¤§å°åˆ‡å‰²æ—¥å¿—æ–‡ä»¶ã€‚</li>\n<li>æ”¯æŒæ—¥å¿—æŒ‰çº§åˆ«åˆ†ç±»è¾“å‡ºã€‚</li>\n<li>æ”¯æŒV levelã€‚V levelç‰¹æ€§å¯ä»¥ä½¿å¼€å‘è€…è‡ªå®šä¹‰æ—¥å¿—çº§åˆ«ã€‚</li>\n<li>æ”¯æŒvmoduleã€‚vmoduleå¯ä»¥ä½¿å¼€å‘è€…å¯¹ä¸åŒçš„æ–‡ä»¶ä½¿ç”¨ä¸åŒçš„æ—¥å¿—çº§åˆ«ã€‚</li>\n<li>æ”¯æŒtraceLocationã€‚traceLocationå¯ä»¥æ‰“å°å‡ºæŒ‡å®šä½ç½®çš„æ ˆä¿¡æ¯ã€‚</li>\n</ul><p>Kubernetesé¡¹ç›®å°±ä½¿ç”¨äº†åŸºäºglogå°è£…çš„klogï¼Œä½œä¸ºå…¶æ—¥å¿—åº“ã€‚</p><h3>logrus</h3><p><a href=\"https://github.com/sirupsen/logrus\">logrus</a>æ˜¯ç›®å‰GitHubä¸Šstaræ•°é‡æœ€å¤šçš„æ—¥å¿—åŒ…ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯åŠŸèƒ½å¼ºå¤§ã€æ€§èƒ½é«˜æ•ˆã€é«˜åº¦çµæ´»ï¼Œè¿˜æä¾›äº†è‡ªå®šä¹‰æ’ä»¶çš„åŠŸèƒ½ã€‚å¾ˆå¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œä¾‹å¦‚Dockerã€Prometheusç­‰ï¼Œéƒ½ä½¿ç”¨äº†logrusã€‚é™¤äº†å…·æœ‰æ—¥å¿—çš„åŸºæœ¬åŠŸèƒ½å¤–ï¼Œlogrusè¿˜å…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p><ul>\n<li>æ”¯æŒå¸¸ç”¨çš„æ—¥å¿—çº§åˆ«ã€‚logrusæ”¯æŒDebugã€Infoã€Warnã€Errorã€Fatalå’ŒPanicè¿™äº›æ—¥å¿—çº§åˆ«ã€‚</li>\n<li>å¯æ‰©å±•ã€‚logrusçš„Hookæœºåˆ¶å…è®¸ä½¿ç”¨è€…é€šè¿‡Hookçš„æ–¹å¼ï¼Œå°†æ—¥å¿—åˆ†å‘åˆ°ä»»æ„åœ°æ–¹ï¼Œä¾‹å¦‚æœ¬åœ°æ–‡ä»¶ã€æ ‡å‡†è¾“å‡ºã€Elasticsearchã€Logstashã€Kafkaç­‰ã€‚</li>\n<li>æ”¯æŒè‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ã€‚logruså†…ç½®äº†JSONFormatterå’ŒTextFormatterä¸¤ç§æ ¼å¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œlogrusè¿˜å…è®¸ä½¿ç”¨è€…é€šè¿‡å®ç°Formatteræ¥å£ï¼Œæ¥è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ã€‚</li>\n<li>ç»“æ„åŒ–æ—¥å¿—è®°å½•ã€‚logrusçš„Fieldæœºåˆ¶å…è®¸ä½¿ç”¨è€…è‡ªå®šä¹‰æ—¥å¿—å­—æ®µï¼Œè€Œä¸æ˜¯é€šè¿‡å†—é•¿çš„æ¶ˆæ¯æ¥è®°å½•æ—¥å¿—ã€‚</li>\n<li>é¢„è®¾æ—¥å¿—å­—æ®µã€‚logrusçš„Default Fieldsæœºåˆ¶ï¼Œå¯ä»¥ç»™ä¸€éƒ¨åˆ†æˆ–è€…å…¨éƒ¨æ—¥å¿—ç»Ÿä¸€æ·»åŠ å…±åŒçš„æ—¥å¿—å­—æ®µï¼Œä¾‹å¦‚ç»™æŸæ¬¡HTTPè¯·æ±‚çš„æ‰€æœ‰æ—¥å¿—æ·»åŠ X-Request-IDå­—æ®µã€‚</li>\n<li>Fatal handlersã€‚logruså…è®¸æ³¨å†Œä¸€ä¸ªæˆ–å¤šä¸ªhandlerï¼Œå½“äº§ç”ŸFatalçº§åˆ«çš„æ—¥å¿—æ—¶è°ƒç”¨ã€‚å½“æˆ‘ä»¬çš„ç¨‹åºéœ€è¦ä¼˜é›…å…³é—­æ—¶ï¼Œè¿™ä¸ªç‰¹æ€§ä¼šéå¸¸æœ‰ç”¨ã€‚</li>\n</ul><h3>zap</h3><p><a href=\"https://github.com/uber-go/zap\">zap</a>æ˜¯uberå¼€æºçš„æ—¥å¿—åŒ…ï¼Œä»¥é«˜æ€§èƒ½è‘—ç§°ï¼Œå¾ˆå¤šå…¬å¸çš„æ—¥å¿—åŒ…éƒ½æ˜¯åŸºäºzapæ”¹é€ è€Œæ¥ã€‚é™¤äº†å…·æœ‰æ—¥å¿—åŸºæœ¬çš„åŠŸèƒ½ä¹‹å¤–ï¼Œzapè¿˜å…·æœ‰å¾ˆå¤šå¼ºå¤§çš„ç‰¹æ€§ï¼š</p><ul>\n<li>æ”¯æŒå¸¸ç”¨çš„æ—¥å¿—çº§åˆ«ï¼Œä¾‹å¦‚ï¼šDebugã€Infoã€Warnã€Errorã€DPanicã€Panicã€Fatalã€‚</li>\n<li>æ€§èƒ½éå¸¸é«˜ã€‚zapå…·æœ‰éå¸¸é«˜çš„æ€§èƒ½ï¼Œé€‚åˆå¯¹æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„åœºæ™¯ã€‚</li>\n<li>æ”¯æŒé’ˆå¯¹ç‰¹å®šçš„æ—¥å¿—çº§åˆ«ï¼Œè¾“å‡ºè°ƒç”¨å †æ ˆã€‚</li>\n<li>åƒlogrusä¸€æ ·ï¼Œzapä¹Ÿæ”¯æŒç»“æ„åŒ–çš„ç›®å½•æ—¥å¿—ã€é¢„è®¾æ—¥å¿—å­—æ®µï¼Œä¹Ÿå› ä¸ºæ”¯æŒHookè€Œå…·æœ‰å¯æ‰©å±•æ€§ã€‚</li>\n</ul><h3>å¼€æºæ—¥å¿—åŒ…é€‰æ‹©</h3><p>ä¸Šé¢æˆ‘ä»‹ç»äº†å¾ˆå¤šæ—¥å¿—åŒ…ï¼Œæ¯ç§æ—¥å¿—åŒ…ä½¿ç”¨çš„åœºæ™¯ä¸åŒï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œç»“åˆæ—¥å¿—åŒ…çš„ç‰¹æ€§è¿›è¡Œé€‰æ‹©ï¼š</p><ul>\n<li><strong>æ ‡å‡†åº“logåŒ…ï¼š</strong> æ ‡å‡†åº“logåŒ…ä¸æ”¯æŒæ—¥å¿—çº§åˆ«ã€æ—¥å¿—åˆ†å‰²ã€æ—¥å¿—æ ¼å¼ç­‰åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨å¤§å‹é¡¹ç›®ä¸­å¾ˆå°‘ç›´æ¥ä½¿ç”¨ï¼Œé€šå¸¸ç”¨äºä¸€äº›çŸ­å°çš„ç¨‹åºï¼Œæ¯”å¦‚ç”¨äºç”ŸæˆJWT Tokençš„main.goæ–‡ä»¶ä¸­ã€‚æ ‡å‡†åº“æ—¥å¿—åŒ…ä¹Ÿå¾ˆé€‚åˆä¸€äº›ç®€çŸ­çš„ä»£ç ï¼Œç”¨äºå¿«é€Ÿè°ƒè¯•å’ŒéªŒè¯ã€‚</li>\n<li><strong>glogï¼š</strong> glogå®ç°äº†æ—¥å¿—åŒ…çš„åŸºæœ¬åŠŸèƒ½ï¼Œéå¸¸é€‚åˆä¸€äº›å¯¹æ—¥å¿—åŠŸèƒ½è¦æ±‚ä¸å¤šçš„å°å‹é¡¹ç›®ã€‚</li>\n<li><strong>logrusï¼š</strong> logrusåŠŸèƒ½å¼ºå¤§ï¼Œä¸ä»…å®ç°äº†æ—¥å¿—åŒ…çš„åŸºæœ¬åŠŸèƒ½ï¼Œè¿˜æœ‰å¾ˆå¤šé«˜çº§ç‰¹æ€§ï¼Œé€‚åˆä¸€äº›å¤§å‹é¡¹ç›®ï¼Œå°¤å…¶æ˜¯éœ€è¦ç»“æ„åŒ–æ—¥å¿—è®°å½•çš„é¡¹ç›®ã€‚</li>\n<li><strong>zapï¼š</strong> zapæä¾›äº†å¾ˆå¼ºå¤§çš„æ—¥å¿—åŠŸèƒ½ï¼Œæ€§èƒ½é«˜ï¼Œå†…å­˜åˆ†é…æ¬¡æ•°å°‘ï¼Œé€‚åˆå¯¹æ—¥å¿—æ€§èƒ½è¦æ±‚å¾ˆé«˜çš„é¡¹ç›®ã€‚å¦å¤–ï¼ŒzapåŒ…ä¸­çš„å­åŒ…zapcoreï¼Œæä¾›äº†å¾ˆå¤šåº•å±‚çš„æ—¥å¿—æ¥å£ï¼Œé€‚åˆç”¨æ¥åšäºŒæ¬¡å°è£…ã€‚</li>\n</ul><p>ä¸¾ä¸ªæˆ‘è‡ªå·±é€‰æ‹©æ—¥å¿—åŒ…æ¥è¿›è¡ŒäºŒæ¬¡å¼€å‘çš„ä¾‹å­ï¼šæˆ‘åœ¨åšå®¹å™¨äº‘å¹³å°å¼€å‘æ—¶ï¼Œå‘ç°Kubernetesæºç ä¸­å¤§é‡ä½¿ç”¨äº†glogï¼Œè¿™æ—¶å°±éœ€è¦æ—¥å¿—åŒ…èƒ½å¤Ÿå…¼å®¹glogã€‚äºæ˜¯ï¼Œæˆ‘åŸºäºzapå’Œzapcoreå°è£…äº†<a href=\"https://github.com/marmotedu/iam/tree/master/pkg/log\">github.com/marmotedu/iam/pkg/log</a>æ—¥å¿—åŒ…ï¼Œè¿™ä¸ªæ—¥å¿—åŒ…å¯ä»¥å¾ˆå¥½åœ°å…¼å®¹glogã€‚</p><p>åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®é¡¹ç›®éœ€è¦ï¼Œä»ä¸Šé¢å‡ ä¸ªæ—¥å¿—åŒ…ä¸­è¿›è¡Œé€‰æ‹©ï¼Œç›´æ¥ä½¿ç”¨ï¼Œä½†æ›´å¤šæ—¶å€™ï¼Œä½ è¿˜éœ€è¦åŸºäºè¿™äº›åŒ…æ¥è¿›è¡Œå®šåˆ¶å¼€å‘ã€‚ä¸ºäº†ä½¿ä½ æ›´æ·±å…¥åœ°æŒæ¡æ—¥å¿—åŒ…çš„è®¾è®¡å’Œå¼€å‘ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šä»0åˆ°1å¸¦ä½ å¼€å‘ä¸€ä¸ªæ—¥å¿—åŒ…ã€‚</p><h2>ä»0ç¼–å†™ä¸€ä¸ªæ—¥å¿—åŒ…</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šå‘ä½ å±•ç¤ºå¦‚ä½•å¿«é€Ÿç¼–å†™ä¸€ä¸ªå…·å¤‡åŸºæœ¬åŠŸèƒ½çš„æ—¥å¿—åŒ…ï¼Œè®©ä½ é€šè¿‡è¿™ä¸ªç®€çŸ­çš„æ—¥å¿—åŒ…å®ç°æŒæ¡æ—¥å¿—åŒ…çš„æ ¸å¿ƒè®¾è®¡æ€è·¯ã€‚è¯¥æ—¥å¿—åŒ…ä¸»è¦å®ç°ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š</p><ul>\n<li>æ”¯æŒè‡ªå®šä¹‰é…ç½®ã€‚</li>\n<li>æ”¯æŒæ–‡ä»¶åå’Œè¡Œå·ã€‚</li>\n<li>æ”¯æŒæ—¥å¿—çº§åˆ«  Debugã€Infoã€Warnã€Errorã€Panicã€Fatalã€‚</li>\n<li>æ”¯æŒè¾“å‡ºåˆ°æœ¬åœ°æ–‡ä»¶å’Œæ ‡å‡†è¾“å‡ºã€‚</li>\n<li>æ”¯æŒJSONå’ŒTEXTæ ¼å¼çš„æ—¥å¿—è¾“å‡ºï¼Œæ”¯æŒè‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ã€‚</li>\n<li>æ”¯æŒé€‰é¡¹æ¨¡å¼ã€‚</li>\n</ul><p>æ—¥å¿—åŒ…åç§°ä¸º<code>cuslog</code>ï¼Œç¤ºä¾‹é¡¹ç›®å®Œæ•´ä»£ç å­˜æ”¾åœ¨  <a href=\"https://github.com/marmotedu/gopractise-demo/tree/main/log/cuslog\">cuslog</a>ã€‚</p><p>å…·ä½“å®ç°åˆ†ä¸ºä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š</p><ol>\n<li>å®šä¹‰ï¼šå®šä¹‰æ—¥å¿—çº§åˆ«å’Œæ—¥å¿—é€‰é¡¹ã€‚</li>\n<li>åˆ›å»ºï¼šåˆ›å»ºLoggeråŠå„çº§åˆ«æ—¥å¿—æ‰“å°æ–¹æ³•ã€‚</li>\n<li>å†™å…¥ï¼šå°†æ—¥å¿—è¾“å‡ºåˆ°æ”¯æŒçš„è¾“å‡ºä¸­ã€‚</li>\n<li>è‡ªå®šä¹‰ï¼šè‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼ã€‚</li>\n</ol><h3>å®šä¹‰æ—¥å¿—çº§åˆ«å’Œæ—¥å¿—é€‰é¡¹</h3><p>ä¸€ä¸ªåŸºæœ¬çš„æ—¥å¿—åŒ…ï¼Œé¦–å…ˆéœ€è¦å®šä¹‰å¥½æ—¥å¿—çº§åˆ«å’Œæ—¥å¿—é€‰é¡¹ã€‚æœ¬ç¤ºä¾‹å°†å®šä¹‰ä»£ç ä¿å­˜åœ¨<a href=\"https://github.com/marmotedu/gopractise-demo/blob/main/log/cuslog/options.go\">options.go</a>æ–‡ä»¶ä¸­ã€‚</p><p>å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å®šä¹‰æ—¥å¿—çº§åˆ«ï¼š</p><pre><code>type Level uint8\n\nconst (\n    DebugLevel Level = iota\n    InfoLevel\n    WarnLevel\n    ErrorLevel\n    PanicLevel\n    FatalLevel\n)\n\nvar LevelNameMapping = map[Level]string{\n    DebugLevel: &quot;DEBUG&quot;,\n    InfoLevel:  &quot;INFO&quot;,\n    WarnLevel:  &quot;WARN&quot;,\n    ErrorLevel: &quot;ERROR&quot;,\n    PanicLevel: &quot;PANIC&quot;,\n    FatalLevel: &quot;FATAL&quot;,\n}\n</code></pre><p>åœ¨æ—¥å¿—è¾“å‡ºæ—¶ï¼Œè¦é€šè¿‡å¯¹æ¯”å¼€å…³çº§åˆ«å’Œè¾“å‡ºçº§åˆ«çš„å¤§å°ï¼Œæ¥å†³å®šæ˜¯å¦è¾“å‡ºï¼Œæ‰€ä»¥æ—¥å¿—çº§åˆ«Levelè¦å®šä¹‰æˆæ–¹ä¾¿æ¯”è¾ƒçš„æ•°å€¼ç±»å‹ã€‚å‡ ä¹æ‰€æœ‰çš„æ—¥å¿—åŒ…éƒ½æ˜¯ç”¨å¸¸é‡è®¡æ•°å™¨iotaæ¥å®šä¹‰æ—¥å¿—çº§åˆ«ã€‚</p><p>å¦å¤–ï¼Œå› ä¸ºè¦åœ¨æ—¥å¿—è¾“å‡ºä¸­ï¼Œè¾“å‡ºå¯è¯»çš„æ—¥å¿—çº§åˆ«ï¼ˆä¾‹å¦‚è¾“å‡ºINFOè€Œä¸æ˜¯1ï¼‰ï¼Œæ‰€ä»¥éœ€è¦æœ‰Levelåˆ°Level Nameçš„æ˜ å°„LevelNameMappingï¼ŒLevelNameMappingä¼šåœ¨æ ¼å¼åŒ–æ—¶ç”¨åˆ°ã€‚</p><p>æ¥ä¸‹æ¥çœ‹å®šä¹‰æ—¥å¿—é€‰é¡¹ã€‚æ—¥å¿—éœ€è¦æ˜¯å¯é…ç½®çš„ï¼Œæ–¹ä¾¿å¼€å‘è€…æ ¹æ®ä¸åŒçš„ç¯å¢ƒè®¾ç½®ä¸åŒçš„æ—¥å¿—è¡Œä¸ºï¼Œæ¯”è¾ƒå¸¸è§çš„é…ç½®é€‰é¡¹ä¸ºï¼š</p><ul>\n<li>æ—¥å¿—çº§åˆ«ã€‚</li>\n<li>è¾“å‡ºä½ç½®ï¼Œä¾‹å¦‚æ ‡å‡†è¾“å‡ºæˆ–è€…æ–‡ä»¶ã€‚</li>\n<li>è¾“å‡ºæ ¼å¼ï¼Œä¾‹å¦‚JSONæˆ–è€…Textã€‚</li>\n<li>æ˜¯å¦å¼€å¯æ–‡ä»¶åå’Œè¡Œå·ã€‚</li>\n</ul><p>æœ¬ç¤ºä¾‹çš„æ—¥å¿—é€‰é¡¹å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code>type options struct {\n    output        io.Writer\n    level         Level\n    stdLevel      Level\n    formatter     Formatter\n    disableCaller bool\n}\n</code></pre><p>ä¸ºäº†çµæ´»åœ°è®¾ç½®æ—¥å¿—çš„é€‰é¡¹ï¼Œä½ å¯ä»¥é€šè¿‡é€‰é¡¹æ¨¡å¼ï¼Œæ¥å¯¹æ—¥å¿—é€‰é¡¹è¿›è¡Œè®¾ç½®ï¼š</p><pre><code>type Option func(*options)\n\nfunc initOptions(opts ...Option) (o *options) {\n    o = &amp;options{}\n    for _, opt := range opts {\n        opt(o)\n    }\n\n    if o.output == nil {\n        o.output = os.Stderr\n    }\n\n    if o.formatter == nil {\n        o.formatter = &amp;TextFormatter{}\n    }\n\n    return\n}\n\nfunc WithLevel(level Level) Option {\n    return func(o *options) {\n        o.level = level\n    }\n}\n...\nfunc SetOptions(opts ...Option) {\n    std.SetOptions(opts...)\n}\n\nfunc (l *logger) SetOptions(opts ...Option) {\n    l.mu.Lock()\n    defer l.mu.Unlock()\n\n    for _, opt := range opts {\n        opt(l.opt)\n    }\n}\n</code></pre><p>å…·æœ‰é€‰é¡¹æ¨¡å¼çš„æ—¥å¿—åŒ…ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼Œæ¥åŠ¨æ€åœ°ä¿®æ”¹æ—¥å¿—çš„é€‰é¡¹ï¼š</p><pre><code>cuslog.SetOptions(cuslog.WithLevel(cuslog.DebugLevel))\n</code></pre><p>ä½ å¯ä»¥æ ¹æ®éœ€è¦ï¼Œå¯¹æ¯ä¸€ä¸ªæ—¥å¿—é€‰é¡¹åˆ›å»ºè®¾ç½®å‡½æ•° <code>WithXXXX</code>  ã€‚è¿™ä¸ªç¤ºä¾‹æ—¥å¿—åŒ…æ”¯æŒå¦‚ä¸‹é€‰é¡¹è®¾ç½®å‡½æ•°ï¼š</p><ul>\n<li>WithOutputï¼ˆoutput io.Writerï¼‰ï¼šè®¾ç½®è¾“å‡ºä½ç½®ã€‚</li>\n<li>WithLevelï¼ˆlevel Levelï¼‰ï¼šè®¾ç½®è¾“å‡ºçº§åˆ«ã€‚</li>\n<li>WithFormatterï¼ˆformatter Formatterï¼‰ï¼šè®¾ç½®è¾“å‡ºæ ¼å¼ã€‚</li>\n<li>WithDisableCallerï¼ˆcaller boolï¼‰ï¼šè®¾ç½®æ˜¯å¦æ‰“å°æ–‡ä»¶åå’Œè¡Œå·ã€‚</li>\n</ul><h3>åˆ›å»ºLoggeråŠå„çº§åˆ«æ—¥å¿—æ‰“å°æ–¹æ³•</h3><p>ä¸ºäº†æ‰“å°æ—¥å¿—ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ—¥å¿—é…ç½®ï¼Œåˆ›å»ºä¸€ä¸ªLoggerï¼Œç„¶åé€šè¿‡è°ƒç”¨Loggerçš„æ—¥å¿—æ‰“å°æ–¹æ³•ï¼Œå®Œæˆå„çº§åˆ«æ—¥å¿—çš„è¾“å‡ºã€‚æœ¬ç¤ºä¾‹å°†åˆ›å»ºä»£ç ä¿å­˜åœ¨<a href=\"https://github.com/marmotedu/gopractise-demo/blob/main/log/cuslog/logger.go\">logger.go</a>æ–‡ä»¶ä¸­ã€‚</p><p>å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼åˆ›å»ºLoggerï¼š</p><pre><code>var std = New()\n\ntype logger struct {\n    opt       *options\n    mu        sync.Mutex\n    entryPool *sync.Pool\n}\n\nfunc New(opts ...Option) *logger {\n    logger := &amp;logger{opt: initOptions(opts...)}\n    logger.entryPool = &amp;sync.Pool{New: func() interface{} { return entry(logger) }}\n    return logger\n}\n</code></pre><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªLoggerï¼Œå¹¶å®ç°äº†åˆ›å»ºLoggerçš„Newå‡½æ•°ã€‚æ—¥å¿—åŒ…éƒ½ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„å…¨å±€Loggerï¼Œæœ¬ç¤ºä¾‹é€šè¿‡ <code>var std = New()</code> åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€çš„é»˜è®¤Loggerã€‚cuslog.Debugã€cuslog.Infoå’Œcuslog.Warnfç­‰å‡½æ•°ï¼Œåˆ™æ˜¯é€šè¿‡è°ƒç”¨std Loggeræ‰€æä¾›çš„æ–¹æ³•æ¥æ‰“å°æ—¥å¿—çš„ã€‚</p><p>å®šä¹‰äº†ä¸€ä¸ªLoggerä¹‹åï¼Œè¿˜éœ€è¦ç»™è¯¥Loggeræ·»åŠ æœ€æ ¸å¿ƒçš„æ—¥å¿—æ‰“å°æ–¹æ³•ï¼Œè¦æä¾›æ‰€æœ‰æ”¯æŒçº§åˆ«çš„æ—¥å¿—æ‰“å°æ–¹æ³•ã€‚</p><p>å¦‚æœæ—¥å¿—çº§åˆ«æ˜¯Xyzï¼Œåˆ™é€šå¸¸éœ€è¦æä¾›ä¸¤ç±»æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯éæ ¼å¼åŒ–æ–¹æ³•<code>Xyz(args ...interface{})</code>å’Œæ ¼å¼åŒ–æ–¹æ³•<code>Xyzf(format string, args ...interface{})</code>ï¼Œä¾‹å¦‚ï¼š</p><pre><code>func (l *logger) Debug(args ...interface{}) {\n    l.entry().write(DebugLevel, FmtEmptySeparate, args...)\n}\nfunc (l *logger) Debugf(format string, args ...interface{}) {\n    l.entry().write(DebugLevel, format, args...)\n}\n</code></pre><p>æœ¬ç¤ºä¾‹å®ç°äº†å¦‚ä¸‹æ–¹æ³•ï¼šDebugã€Debugfã€Infoã€Infofã€Warnã€Warnfã€Errorã€Errorfã€Panicã€Panicfã€Fatalã€Fatalfã€‚æ›´è¯¦ç»†çš„å®ç°ï¼Œä½ å¯ä»¥å‚è€ƒ <a href=\"https://github.com/marmotedu/gopractise-demo/blob/main/log/cuslog/logger.go\">cuslog/logger.go</a>ã€‚</p><p>è¿™é‡Œè¦æ³¨æ„ï¼ŒPanicã€Panicfè¦è°ƒç”¨panic()å‡½æ•°ï¼ŒFatalã€Fatalfå‡½æ•°è¦è°ƒç”¨ <code>os.Exit(1)</code> å‡½æ•°ã€‚</p><h3>å°†æ—¥å¿—è¾“å‡ºåˆ°æ”¯æŒçš„è¾“å‡ºä¸­</h3><p>è°ƒç”¨æ—¥å¿—æ‰“å°å‡½æ•°ä¹‹åï¼Œè¿˜éœ€è¦å°†è¿™äº›æ—¥å¿—è¾“å‡ºåˆ°æ”¯æŒçš„è¾“å‡ºä¸­ï¼Œæ‰€ä»¥éœ€è¦å®ç°writeå‡½æ•°ï¼Œå®ƒçš„å†™å…¥é€»è¾‘ä¿å­˜åœ¨<a href=\"https://github.com/marmotedu/gopractise-demo/blob/main/log/cuslog/entry.go\">entry.go</a>æ–‡ä»¶ä¸­ã€‚å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p><pre><code>type Entry struct {\n    logger *logger\n    Buffer *bytes.Buffer\n    Map    map[string]interface{}\n    Level  Level\n    Time   time.Time\n    File   string\n    Line   int\n    Func   string\n    Format string\n    Args   []interface{}\n}\n\nfunc (e *Entry) write(level Level, format string, args ...interface{}) {\n    if e.logger.opt.level &gt; level {\n        return\n    }\n    e.Time = time.Now()\n    e.Level = level\n    e.Format = format\n    e.Args = args\n    if !e.logger.opt.disableCaller {\n        if pc, file, line, ok := runtime.Caller(2); !ok {\n            e.File = &quot;???&quot;\n            e.Func = &quot;???&quot;\n        } else {\n            e.File, e.Line, e.Func = file, line, runtime.FuncForPC(pc).Name()\n            e.Func = e.Func[strings.LastIndex(e.Func, &quot;/&quot;)+1:]\n        }\n    }\n    e.format()\n    e.writer()\n    e.release()\n}\n\nfunc (e *Entry) format() {\n    _ = e.logger.opt.formatter.Format(e)\n}\n\nfunc (e *Entry) writer() {\n    e.logger.mu.Lock()\n    _, _ = e.logger.opt.output.Write(e.Buffer.Bytes())\n    e.logger.mu.Unlock()\n}\n\nfunc (e *Entry) release() {\n    e.Args, e.Line, e.File, e.Format, e.Func = nil, 0, &quot;&quot;, &quot;&quot;, &quot;&quot;\n    e.Buffer.Reset()\n    e.logger.entryPool.Put(e)\n}\n</code></pre><p>ä¸Šè¿°ä»£ç ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªEntryç»“æ„ä½“ç±»å‹ï¼Œè¯¥ç±»å‹ç”¨æ¥ä¿å­˜æ‰€æœ‰çš„æ—¥å¿—ä¿¡æ¯ï¼Œå³æ—¥å¿—é…ç½®å’Œæ—¥å¿—å†…å®¹ã€‚å†™å…¥é€»è¾‘éƒ½æ˜¯å›´ç»•Entryç±»å‹çš„å®ä¾‹æ¥å®Œæˆçš„ã€‚</p><p>ç”¨Entryçš„writeæ–¹æ³•æ¥å®Œæˆæ—¥å¿—çš„å†™å…¥ï¼Œåœ¨writeæ–¹æ³•ä¸­ï¼Œä¼šé¦–å…ˆåˆ¤æ–­æ—¥å¿—çš„è¾“å‡ºçº§åˆ«å’Œå¼€å…³çº§åˆ«ï¼Œå¦‚æœè¾“å‡ºçº§åˆ«å°äºå¼€å…³çº§åˆ«ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œä¸åšä»»ä½•è®°å½•ã€‚</p><p>åœ¨writeä¸­ï¼Œè¿˜ä¼šåˆ¤æ–­æ˜¯å¦éœ€è¦è®°å½•æ–‡ä»¶åå’Œè¡Œå·ï¼Œå¦‚æœéœ€è¦åˆ™è°ƒç”¨ <code>runtime.Caller()</code> æ¥è·å–æ–‡ä»¶åå’Œè¡Œå·ï¼Œè°ƒç”¨ <code>runtime.Caller()</code> æ—¶ï¼Œè¦æ³¨æ„ä¼ å…¥æ­£ç¡®çš„æ ˆæ·±åº¦ã€‚</p><p>writeå‡½æ•°ä¸­è°ƒç”¨ <code>e.format</code> æ¥æ ¼å¼åŒ–æ—¥å¿—ï¼Œè°ƒç”¨ <code>e.writer</code> æ¥å†™å…¥æ—¥å¿—ï¼Œåœ¨åˆ›å»ºLoggerä¼ å…¥çš„æ—¥å¿—é…ç½®ä¸­ï¼ŒæŒ‡å®šäº†è¾“å‡ºä½ç½® <code>output io.Writer</code> ï¼Œoutputç±»å‹ä¸º <code>io.Writer</code>  ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code>type Writer interface {\n    Write(p []byte) (n int, err error)\n}\n</code></pre><p>io.Writerå®ç°äº†Writeæ–¹æ³•å¯ä¾›å†™å…¥ï¼Œæ‰€ä»¥åªéœ€è¦è°ƒç”¨<code>e.logger.opt.output.Write(e.Buffer.Bytes())</code>å³å¯å°†æ—¥å¿—å†™å…¥åˆ°æŒ‡å®šçš„ä½ç½®ä¸­ã€‚æœ€åï¼Œä¼šè°ƒç”¨release()æ–¹æ³•æ¥æ¸…ç©ºç¼“å­˜å’Œå¯¹è±¡æ± ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†æ—¥å¿—çš„è®°å½•å’Œå†™å…¥ã€‚</p><h3>è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼</h3><p>cuslogåŒ…æ”¯æŒè‡ªå®šä¹‰è¾“å‡ºæ ¼å¼ï¼Œå¹¶ä¸”å†…ç½®äº†JSONå’ŒTextæ ¼å¼çš„Formatterã€‚Formatteræ¥å£å®šä¹‰ä¸ºï¼š</p><pre><code>type Formatter interface {\n    Format(entry *Entry) error\n}\n</code></pre><p>cuslogå†…ç½®çš„Formatteræœ‰ä¸¤ä¸ªï¼š<a href=\"https://github.com/marmotedu/gopractise-demo/blob/main/log/cuslog/formatter_json.go\">JSON</a>å’Œ<a href=\"https://github.com/marmotedu/gopractise-demo/blob/main/log/cuslog/formatter_text.go\">TEXT</a>ã€‚</p><h3>æµ‹è¯•æ—¥å¿—åŒ…</h3><p>cuslogæ—¥å¿—åŒ…å¼€å‘å®Œæˆä¹‹åï¼Œå¯ä»¥ç¼–å†™æµ‹è¯•ä»£ç ï¼Œè°ƒç”¨cuslogåŒ…æ¥æµ‹è¯•cuslogåŒ…ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>package main\n\nimport (\n    &quot;log&quot;\n    &quot;os&quot;\n\n    &quot;github.com/marmotedu/gopractise-demo/log/cuslog&quot;\n)\n\nfunc main() {\n    cuslog.Info(&quot;std log&quot;)\n    cuslog.SetOptions(cuslog.WithLevel(cuslog.DebugLevel))\n    cuslog.Debug(&quot;change std log to debug level&quot;)\n    cuslog.SetOptions(cuslog.WithFormatter(&amp;cuslog.JsonFormatter{IgnoreBasicFields: false}))\n    cuslog.Debug(&quot;log in json format&quot;)\n    cuslog.Info(&quot;another log in json format&quot;)\n\n    // è¾“å‡ºåˆ°æ–‡ä»¶\n    fd, err := os.OpenFile(&quot;test.log&quot;, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n    if err != nil {\n        log.Fatalln(&quot;create file test.log failed&quot;)\n    }\n    defer fd.Close()\n\n    l := cuslog.New(cuslog.WithLevel(cuslog.InfoLevel),\n        cuslog.WithOutput(fd),\n        cuslog.WithFormatter(&amp;cuslog.JsonFormatter{IgnoreBasicFields: false}),\n    )\n    l.Info(&quot;custom log with json formatter&quot;)\n}\n</code></pre><p>å°†ä¸Šè¿°ä»£ç ä¿å­˜åœ¨main.goæ–‡ä»¶ä¸­ï¼Œè¿è¡Œï¼š</p><pre><code>$ go run example.go\n2020-12-04T10:32:12+08:00 INFO example.go:11 std log\n2020-12-04T10:32:12+08:00 DEBUG example.go:13 change std log to debug level\n{&quot;file&quot;:&quot;/home/colin/workspace/golang/src/github.com/marmotedu/gopractise-demo/log/cuslog/example/example.go:15&quot;,&quot;func&quot;:&quot;main.main&quot;,&quot;message&quot;:&quot;log in json format&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;time&quot;:&quot;2020-12-04T10:32:12+08:00&quot;}\n{&quot;level&quot;:&quot;INFO&quot;,&quot;time&quot;:&quot;2020-12-04T10:32:12+08:00&quot;,&quot;file&quot;:&quot;/home/colin/workspace/golang/src/github.com/marmotedu/gopractise-demo/log/cuslog/example/example.go:16&quot;,&quot;func&quot;:&quot;main.main&quot;,&quot;message&quot;:&quot;another log in json format&quot;}\n</code></pre><p>åˆ°è¿™é‡Œæ—¥å¿—åŒ…å°±å¼€å‘å®Œæˆäº†ï¼Œå®Œæ•´åŒ…è§  <a href=\"https://github.com/marmotedu/gopractise-demo/tree/main/log/cuslog\">log/cuslog</a>ã€‚</p><h2>IAMé¡¹ç›®æ—¥å¿—åŒ…è®¾è®¡</h2><p>è¿™ä¸€è®²çš„æœ€åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹æˆ‘ä»¬çš„IAMé¡¹ç›®ä¸­ï¼Œæ—¥å¿—åŒ…æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚</p><p>å…ˆæ¥çœ‹ä¸€ä¸‹IAMé¡¹ç›®logåŒ…çš„å­˜æ”¾ä½ç½®ï¼š<a href=\"https://github.com/marmotedu/iam/tree/v1.0.0/pkg/log\">pkg/log</a>ã€‚æ”¾åœ¨è¿™ä¸ªä½ç½®ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼šç¬¬ä¸€ä¸ªï¼ŒlogåŒ…å±äºIAMé¡¹ç›®ï¼Œæœ‰å®šåˆ¶å¼€å‘çš„å†…å®¹ï¼›ç¬¬äºŒä¸ªï¼ŒlogåŒ…åŠŸèƒ½å®Œå¤‡ã€æˆç†Ÿï¼Œå¤–éƒ¨é¡¹ç›®ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚</p><p>è¯¥logåŒ…æ˜¯åŸºäº <code>go.uber.org/zap</code> åŒ…å°è£…è€Œæ¥çš„ï¼Œæ ¹æ®éœ€è¦æ·»åŠ äº†æ›´ä¸°å¯Œçš„åŠŸèƒ½ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡logåŒ…çš„<a href=\"https://github.com/marmotedu/iam/blob/master/pkg/log/options.go#L47\">Options</a>ï¼Œæ¥çœ‹ä¸‹logåŒ…æ‰€å®ç°çš„åŠŸèƒ½ï¼š</p><pre><code>type Options struct {\n    OutputPaths       []string `json:&quot;output-paths&quot;       mapstructure:&quot;output-paths&quot;`\n    ErrorOutputPaths  []string `json:&quot;error-output-paths&quot; mapstructure:&quot;error-output-paths&quot;`\n    Level             string   `json:&quot;level&quot;              mapstructure:&quot;level&quot;`\n    Format            string   `json:&quot;format&quot;             mapstructure:&quot;format&quot;`\n    DisableCaller     bool     `json:&quot;disable-caller&quot;     mapstructure:&quot;disable-caller&quot;`\n    DisableStacktrace bool     `json:&quot;disable-stacktrace&quot; mapstructure:&quot;disable-stacktrace&quot;`\n    EnableColor       bool     `json:&quot;enable-color&quot;       mapstructure:&quot;enable-color&quot;`\n    Development       bool     `json:&quot;development&quot;        mapstructure:&quot;development&quot;`\n    Name              string   `json:&quot;name&quot;               mapstructure:&quot;name&quot;`\n}\n</code></pre><p>Optionså„é…ç½®é¡¹å«ä¹‰å¦‚ä¸‹ï¼š</p><ul>\n<li>developmentï¼šæ˜¯å¦æ˜¯å¼€å‘æ¨¡å¼ã€‚å¦‚æœæ˜¯å¼€å‘æ¨¡å¼ï¼Œä¼šå¯¹DPanicLevelè¿›è¡Œå †æ ˆè·Ÿè¸ªã€‚</li>\n<li>nameï¼šLoggerçš„åå­—ã€‚</li>\n<li>disable-callerï¼šæ˜¯å¦å¼€å¯ callerï¼Œå¦‚æœå¼€å¯ä¼šåœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºè°ƒç”¨æ—¥å¿—æ‰€åœ¨çš„æ–‡ä»¶ã€å‡½æ•°å’Œè¡Œå·ã€‚</li>\n<li>disable-stacktraceï¼šæ˜¯å¦åœ¨PanicåŠä»¥ä¸Šçº§åˆ«ç¦æ­¢æ‰“å°å †æ ˆä¿¡æ¯ã€‚</li>\n<li>enable-colorï¼šæ˜¯å¦å¼€å¯é¢œè‰²è¾“å‡ºï¼Œtrueï¼Œæ˜¯ï¼›falseï¼Œå¦ã€‚</li>\n<li>levelï¼šæ—¥å¿—çº§åˆ«ï¼Œä¼˜å…ˆçº§ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼šDebug, Info, Warn, Error, Dpanic, Panic, Fatalã€‚</li>\n<li>formatï¼šæ”¯æŒçš„æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼Œç›®å‰æ”¯æŒConsoleå’ŒJSONä¸¤ç§ã€‚Consoleå…¶å®å°±æ˜¯Textæ ¼å¼ã€‚</li>\n<li>output-pathsï¼šæ”¯æŒè¾“å‡ºåˆ°å¤šä¸ªè¾“å‡ºï¼Œç”¨é€—å·åˆ†å¼€ã€‚æ”¯æŒè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰å’Œæ–‡ä»¶ã€‚</li>\n<li>error-output-pathsï¼šzapå†…éƒ¨(éä¸šåŠ¡)é”™è¯¯æ—¥å¿—è¾“å‡ºè·¯å¾„ï¼Œå¤šä¸ªè¾“å‡ºï¼Œç”¨é€—å·åˆ†å¼€ã€‚</li>\n</ul><p>logåŒ…çš„Optionsç»“æ„ä½“æ”¯æŒä»¥ä¸‹3ä¸ªæ–¹æ³•ï¼š</p><ul>\n<li>Buildæ–¹æ³•ã€‚Buildæ–¹æ³•å¯ä»¥æ ¹æ®Optionsæ„å»ºä¸€ä¸ªå…¨å±€çš„Loggerã€‚</li>\n<li>AddFlagsæ–¹æ³•ã€‚AddFlagsæ–¹æ³•å¯ä»¥å°†Optionsçš„å„ä¸ªå­—æ®µè¿½åŠ åˆ°ä¼ å…¥çš„pflag.FlagSetå˜é‡ä¸­ã€‚</li>\n<li>Stringæ–¹æ³•ã€‚Stringæ–¹æ³•å¯ä»¥å°†Optionsçš„å€¼ä»¥JSONæ ¼å¼å­—ç¬¦ä¸²è¿”å›ã€‚</li>\n</ul><p>logåŒ…å®ç°äº†ä»¥ä¸‹3ç§æ—¥å¿—è®°å½•æ–¹æ³•ï¼š</p><pre><code>log.Info(&quot;This is a info message&quot;, log.Int32(&quot;int_key&quot;, 10))\nlog.Infof(&quot;This is a formatted %s message&quot;, &quot;info&quot;)\nlog.Infow(&quot;Message printed with Infow&quot;, &quot;X-Request-ID&quot;, &quot;fbf54504-64da-4088-9b86-67824a7fb508&quot;)\n</code></pre><p><code>Info</code> ä½¿ç”¨æŒ‡å®šçš„key/valueè®°å½•æ—¥å¿—ã€‚<code>Infof</code> æ ¼å¼åŒ–è®°å½•æ—¥å¿—ã€‚ <code>Infow</code> ä¹Ÿæ˜¯ä½¿ç”¨æŒ‡å®šçš„key/valueè®°å½•æ—¥å¿—ï¼Œè·Ÿ <code>Info</code> çš„åŒºåˆ«æ˜¯ï¼šä½¿ç”¨ <code>Info</code> éœ€è¦æŒ‡å®šå€¼çš„ç±»å‹ï¼Œé€šè¿‡æŒ‡å®šå€¼çš„æ—¥å¿—ç±»å‹ï¼Œæ—¥å¿—åº“åº•å±‚ä¸éœ€è¦è¿›è¡Œåå°„æ“ä½œï¼Œæ‰€ä»¥ä½¿ç”¨ <code>Info</code> è®°å½•æ—¥å¿—æ€§èƒ½æœ€é«˜ã€‚</p><p>logåŒ…æ”¯æŒéå¸¸ä¸°å¯Œçš„ç±»å‹ï¼Œå…·ä½“ä½ å¯ä»¥å‚è€ƒ  <a href=\"https://github.com/marmotedu/iam/blob/master/pkg/log/types.go#L56\">types.go</a>ã€‚</p><p>ä¸Šè¿°æ—¥å¿—è¾“å‡ºä¸ºï¼š</p><pre><code>2021-07-06 14:02:07.070 INFO This is a info message {&quot;int_key&quot;: 10}\n2021-07-06 14:02:07.071 INFO This is a formatted info message\n2021-07-06 14:02:07.071 INFO Message printed with Infow {&quot;X-Request-ID&quot;: &quot;fbf54504-64da-4088-9b86-67824a7fb508&quot;}\n</code></pre><p>logåŒ…ä¸ºæ¯ç§çº§åˆ«çš„æ—¥å¿—éƒ½æä¾›äº†3ç§æ—¥å¿—è®°å½•æ–¹å¼ï¼Œä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾æ—¥å¿—æ ¼å¼ä¸º <code>Xyz</code> ï¼Œåˆ™åˆ†åˆ«æä¾›äº† <code>Xyz(msg string, fields ...Field)</code> ï¼Œ<code>Xyzf(format string, v ...interface{})</code> ï¼Œ<code>Xyzw(msg string, keysAndValues ...interface{})</code> 3ç§æ—¥å¿—è®°å½•æ–¹æ³•ã€‚</p><p>å¦å¤–ï¼ŒlogåŒ…ç›¸è¾ƒäºä¸€èˆ¬çš„æ—¥å¿—åŒ…ï¼Œè¿˜æä¾›äº†ä¼—å¤šè®°å½•æ—¥å¿—çš„æ–¹æ³•ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œ</strong> logåŒ…æ”¯æŒV Levelï¼Œå¯ä»¥é€šè¿‡æ•´å‹æ•°å€¼æ¥çµæ´»æŒ‡å®šæ—¥å¿—çº§åˆ«ï¼Œæ•°å€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šä½ã€‚ä¾‹å¦‚ï¼š</p><pre><code>// V levelä½¿ç”¨\nlog.V(1).Info(&quot;This is a V level message&quot;)\nlog.V(1).Infof(&quot;This is a %s V level message&quot;, &quot;formatted&quot;)\nlog.V(1).Infow(&quot;This is a V level message with fields&quot;, &quot;X-Request-ID&quot;, &quot;7a7b9f24-4cae-4b2a-9464-69088b45b904&quot;)\n</code></pre><p>è¿™é‡Œè¦æ³¨æ„ï¼ŒLog.Våªæ”¯æŒ <code>Info</code> ã€<code>Infof</code> ã€<code>Infow</code>ä¸‰ç§æ—¥å¿—è®°å½•æ–¹æ³•ã€‚</p><p><strong>ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œ</strong> logåŒ…æ”¯æŒWithValueså‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p><pre><code>// WithValuesä½¿ç”¨\nlv := log.WithValues(&quot;X-Request-ID&quot;, &quot;7a7b9f24-4cae-4b2a-9464-69088b45b904&quot;)\nlv.Infow(&quot;Info message printed with [WithValues] logger&quot;)\nlv.Infow(&quot;Debug message printed with [WithValues] logger&quot;)\n</code></pre><p>ä¸Šè¿°æ—¥å¿—è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code>2021-07-06 14:15:28.555 INFO Info message printed with [WithValues] logger {&quot;X-Request-ID&quot;: &quot;7a7b9f24-4cae-4b2a-9464-69088b45b904&quot;}\n2021-07-06 14:15:28.556 INFO Debug message printed with [WithValues] logger {&quot;X-Request-ID&quot;: &quot;7a7b9f24-4cae-4b2a-9464-69088b45b904&quot;}\n</code></pre><p><code>WithValues</code> å¯ä»¥è¿”å›ä¸€ä¸ªæºå¸¦æŒ‡å®škey-valueçš„Loggerï¼Œä¾›åé¢ä½¿ç”¨ã€‚</p><p><strong>ç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼Œ</strong> logåŒ…æä¾› <code>WithContext</code> å’Œ <code>FromContext</code> ç”¨æ¥å°†æŒ‡å®šçš„Loggeræ·»åŠ åˆ°æŸä¸ªContextä¸­ï¼Œä»¥åŠä»æŸä¸ªContextä¸­è·å–Loggerï¼Œä¾‹å¦‚ï¼š</p><pre><code>// Contextä½¿ç”¨\nctx := lv.WithContext(context.Background())\nlc := log.FromContext(ctx)\nlc.Info(&quot;Message printed with [WithContext] logger&quot;)\n</code></pre><p><code>WithContext</code>å’Œ<code>FromContext</code>éå¸¸é€‚åˆç”¨åœ¨ä»¥<code>context.Context</code>ä¼ é€’çš„å‡½æ•°ä¸­ï¼Œä¾‹å¦‚ï¼š</p><pre><code>func main() {\n \n    ...\n \n    // WithValuesä½¿ç”¨\n    lv := log.WithValues(&quot;X-Request-ID&quot;, &quot;7a7b9f24-4cae-4b2a-9464-69088b45b904&quot;)\n     \n    // Contextä½¿ç”¨\n    lv.Infof(&quot;Start to call pirntString&quot;)\n    ctx := lv.WithContext(context.Background())\n    pirntString(ctx, &quot;World&quot;)  \n}\n \nfunc pirntString(ctx context.Context, str string) {\n    lc := log.FromContext(ctx)\n    lc.Infof(&quot;Hello %s&quot;, str)\n}\n</code></pre><p>ä¸Šè¿°ä»£ç è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code>2021-07-06 14:38:02.050 INFO Start to call pirntString {&quot;X-Request-ID&quot;: &quot;7a7b9f24-4cae-4b2a-9464-69088b45b904&quot;}\n2021-07-06 14:38:02.050 INFO Hello World {&quot;X-Request-ID&quot;: &quot;7a7b9f24-4cae-4b2a-9464-69088b45b904&quot;}\n</code></pre><p>å°†Loggeræ·»åŠ åˆ°Contextä¸­ï¼Œå¹¶é€šè¿‡Contextåœ¨ä¸åŒå‡½æ•°é—´ä¼ é€’ï¼Œå¯ä»¥ä½¿key-valueåœ¨ä¸åŒå‡½æ•°é—´ä¼ é€’ã€‚ä¾‹å¦‚ä¸Šè¿°ä»£ç ä¸­ï¼Œ <code>X-Request-ID</code> åœ¨mainå‡½æ•°ã€printStringå‡½æ•°ä¸­çš„æ—¥å¿—è¾“å‡ºä¸­å‡æœ‰è®°å½•ï¼Œä»è€Œå®ç°äº†ä¸€ç§è°ƒç”¨é“¾çš„æ•ˆæœã€‚</p><p><strong>ç¬¬å››ä¸ªæ–¹æ³•ï¼Œ</strong> å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä»Contextä¸­æå–å‡ºæŒ‡å®šçš„key-valueï¼Œä½œä¸ºä¸Šä¸‹æ–‡æ·»åŠ åˆ°æ—¥å¿—è¾“å‡ºä¸­ï¼Œä¾‹å¦‚  <a href=\"https://github.com/marmotedu/iam/blob/v1.0.0/internal/apiserver/api/v1/user/create.go#L20\">internal/apiserver/api/v1/user/create.go</a>æ–‡ä»¶ä¸­çš„æ—¥å¿—è°ƒç”¨ï¼š</p><pre><code>log.L(c).Info(&quot;user create function called.&quot;)\n</code></pre><p>é€šè¿‡è°ƒç”¨ <code>Log.L()</code> å‡½æ•°ï¼Œå®ç°å¦‚ä¸‹ï¼š</p><pre><code>// L method output with specified context value.\nfunc L(ctx context.Context) *zapLogger {\n    return std.L(ctx)\n}\n \nfunc (l *zapLogger) L(ctx context.Context) *zapLogger {\n    lg := l.clone()\n \n    requestID, _ := ctx.Value(KeyRequestID).(string)\n    username, _ := ctx.Value(KeyUsername).(string)\n    lg.zapLogger = lg.zapLogger.With(zap.String(KeyRequestID, requestID), zap.String(KeyUsername, username))\n \n    return lg\n}\n</code></pre><p><code>L()</code> æ–¹æ³•ä¼šä»ä¼ å…¥çš„Contextä¸­æå–å‡º <code>requestID</code> å’Œ <code>username</code> ï¼Œè¿½åŠ åˆ°Loggerä¸­ï¼Œå¹¶è¿”å›Loggerã€‚è¿™æ—¶å€™è°ƒç”¨è¯¥Loggerçš„Infoã€Infofã€Infowç­‰æ–¹æ³•è®°å½•æ—¥å¿—ï¼Œè¾“å‡ºçš„æ—¥å¿—ä¸­å‡åŒ…å« <code>requestID</code> å’Œ <code>username</code> å­—æ®µï¼Œä¾‹å¦‚ï¼š</p><pre><code>2021-07-06 14:46:00.743 INFO    apiserver       secret/create.go:23     create secret function called.  {&quot;requestID&quot;: &quot;73144bed-534d-4f68-8e8d-dc8a8ed48507&quot;, &quot;username&quot;: &quot;admin&quot;}\n</code></pre><p>é€šè¿‡å°†Contextåœ¨å‡½æ•°é—´ä¼ é€’ï¼Œå¾ˆå®¹æ˜“å°±èƒ½å®ç°è°ƒç”¨é“¾æ•ˆæœï¼Œä¾‹å¦‚ï¼š</p><pre><code>// Create add new secret key pairs to the storage.\nfunc (s *SecretHandler) Create(c *gin.Context) {\n    log.L(c).Info(&quot;create secret function called.&quot;)\n     \n    ...\n     \n    secrets, err := s.srv.Secrets().List(c, username, metav1.ListOptions{    \n        Offset: pointer.ToInt64(0),\n        Limit:  pointer.ToInt64(-1),\n    })\n     \n    ...\n     \n     if err := s.srv.Secrets().Create(c, &amp;r, metav1.CreateOptions{}); err != nil {\n        core.WriteResponse(c, err, nil)\n\n        return\n    }\n \n    core.WriteResponse(c, nil, r)\n}\n</code></pre><p>ä¸Šè¿°ä»£ç è¾“å‡ºä¸ºï¼š</p><pre><code>2021-07-06 14:46:00.743 INFO    apiserver       secret/create.go:23     create secret function called.  {&quot;requestID&quot;: &quot;73144bed-534d-4f68-8e8d-dc8a8ed48507&quot;, &quot;username&quot;: &quot;admin&quot;}\n2021-07-06 14:46:00.744 INFO    apiserver       secret/create.go:23     list secret from storage.  {&quot;requestID&quot;: &quot;73144bed-534d-4f68-8e8d-dc8a8ed48507&quot;, &quot;username&quot;: &quot;admin&quot;}\n2021-07-06 14:46:00.745 INFO    apiserver       secret/create.go:23     insert secret to storage.  {&quot;requestID&quot;: &quot;73144bed-534d-4f68-8e8d-dc8a8ed48507&quot;, &quot;username&quot;: &quot;admin&quot;}\n</code></pre><p>è¿™é‡Œè¦æ³¨æ„ï¼Œ <code>log.L</code> å‡½æ•°é»˜è®¤ä¼šä»Contextä¸­å– <code>requestID</code> å’Œ <code>username</code> é”®ï¼Œè¿™è·ŸIAMé¡¹ç›®æœ‰è€¦åˆåº¦ï¼Œä½†è¿™ä¸å½±å“logåŒ…ä¾›ç¬¬ä¸‰æ–¹é¡¹ç›®ä½¿ç”¨ã€‚è¿™ä¹Ÿæ˜¯æˆ‘å»ºè®®ä½ è‡ªå·±å°è£…æ—¥å¿—åŒ…çš„åŸå› ã€‚</p><h2>æ€»ç»“</h2><p>å¼€å‘ä¸€ä¸ªæ—¥å¿—åŒ…ï¼Œæˆ‘ä»¬å¾ˆå¤šæ—¶å€™éœ€è¦åŸºäºä¸€äº›ä¸šç•Œä¼˜ç§€çš„å¼€æºæ—¥å¿—åŒ…è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚å½“å‰å¾ˆå¤šé¡¹ç›®çš„æ—¥å¿—åŒ…éƒ½æ˜¯åŸºäºzapæ—¥å¿—åŒ…æ¥å°è£…çš„ï¼Œå¦‚æœä½ æœ‰å°è£…çš„éœ€è¦ï¼Œæˆ‘å»ºè®®ä½ ä¼˜å…ˆé€‰æ‹©zapæ—¥å¿—åŒ…ã€‚</p><p>è¿™ä¸€è®²ä¸­ï¼Œæˆ‘å…ˆç»™ä½ ä»‹ç»äº†æ ‡å‡†åº“logåŒ…ã€glogã€logruså’Œzapè¿™å››ç§å¸¸ç”¨çš„æ—¥å¿—åŒ…ï¼Œç„¶åå‘ä½ å±•ç°äº†å¼€å‘ä¸€ä¸ªæ—¥å¿—åŒ…çš„å››ä¸ªæ­¥éª¤ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol>\n<li>å®šä¹‰æ—¥å¿—çº§åˆ«å’Œæ—¥å¿—é€‰é¡¹ã€‚</li>\n<li>åˆ›å»ºLoggeråŠå„çº§åˆ«æ—¥å¿—æ‰“å°æ–¹æ³•ã€‚</li>\n<li>å°†æ—¥å¿—è¾“å‡ºåˆ°æ”¯æŒçš„è¾“å‡ºä¸­ã€‚</li>\n<li>è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼ã€‚</li>\n</ol><p>æœ€åï¼Œæˆ‘ä»‹ç»äº†IAMé¡¹ç›®å°è£…çš„logåŒ…çš„è®¾è®¡å’Œä½¿ç”¨æ–¹å¼ã€‚logåŒ…åŸºäº <code>go.uber.org/zap</code>å°è£…ï¼Œå¹¶æä¾›äº†ä»¥ä¸‹å¼ºå¤§ç‰¹æ€§ï¼š</p><ul>\n<li>logåŒ…æ”¯æŒV Levelï¼Œå¯ä»¥çµæ´»çš„é€šè¿‡æ•´å‹æ•°å€¼æ¥æŒ‡å®šæ—¥å¿—çº§åˆ«ã€‚</li>\n<li>logåŒ…æ”¯æŒ <code>WithValues</code> å‡½æ•°ï¼Œ <code>WithValues</code> å¯ä»¥è¿”å›ä¸€ä¸ªæºå¸¦æŒ‡å®škey-valueå¯¹çš„Loggerï¼Œä¾›åé¢ä½¿ç”¨ã€‚</li>\n<li>logåŒ…æä¾› <code>WithContext</code> å’Œ <code>FromContext</code> ç”¨æ¥å°†æŒ‡å®šçš„Loggeræ·»åŠ åˆ°æŸä¸ªContextä¸­å’Œä»æŸä¸ªContextä¸­è·å–Loggerã€‚</li>\n<li>logåŒ…æä¾›äº† <code>Log.L()</code> å‡½æ•°ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä»Contextä¸­æå–å‡ºæŒ‡å®šçš„key-valueå¯¹ï¼Œä½œä¸ºä¸Šä¸‹æ–‡æ·»åŠ åˆ°æ—¥å¿—è¾“å‡ºä¸­ã€‚</li>\n</ul><h2>è¯¾åç»ƒä¹ </h2><ol>\n<li>\n<p>å°è¯•å®ç°ä¸€ä¸ªæ–°çš„Formatterï¼Œå¯ä»¥ä½¿ä¸åŒæ—¥å¿—çº§åˆ«ä»¥ä¸åŒé¢œè‰²è¾“å‡ºï¼ˆä¾‹å¦‚ï¼šErrorçº§åˆ«çš„æ—¥å¿—è¾“å‡ºä¸­ <code>Error</code> å­—ç¬¦ä¸²ç”¨çº¢è‰²å­—ä½“è¾“å‡ºï¼Œ <code>Info</code> å­—ç¬¦ä¸²ç”¨ç™½è‰²å­—ä½“è¾“å‡ºï¼‰ã€‚</p>\n</li>\n<li>\n<p>å°è¯•å°†<a href=\"https://github.com/marmotedu/gopractise-demo/blob/master/log/cuslog/entry.go#L36\">runtime.Caller(2)</a>å‡½æ•°è°ƒç”¨ä¸­çš„ <code>2</code> æ”¹æˆ <code>1</code> ï¼Œçœ‹çœ‹æ—¥å¿—è¾“å‡ºæ˜¯å¦è·Ÿä¿®æ”¹å‰æœ‰å·®å¼‚ï¼Œå¦‚æœæœ‰å·®å¼‚ï¼Œæ€è€ƒå·®å¼‚äº§ç”Ÿçš„åŸå› ã€‚</p>\n</li>\n</ol><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ã€‚</p>","comments":[{"had_liked":false,"id":305522,"user_name":"ppd0705","can_delete":false,"product_type":"c1","uid":1155646,"ip_address":"","ucode":"EB63D4E3FD1E9A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","comment_is_top":false,"comment_ctime":1628008350,"is_pvip":false,"replies":[{"id":"110633","content":"å›ç­”æ»¡åˆ†ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1628165491,"ip_address":"","comment_id":305522,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53167615902","product_id":100079601,"comment_content":"Caller(skip int) 0ä»£è¡¨å½“å‰å±‚ï¼Œ 1ä»£è¡¨ä¸Šä¸€æ¬¡è°ƒç”¨è€…ï¼Œä¸€æ¬¡ç±»æ¨ã€‚ å¯¹äºlogåŒ…ç”±äºå°è£…äº†2å±‚ï¼ˆEntry.write --&gt; Debugï¼‰ï¼Œæ‰€ä»¥Caller(2)èƒ½å¾—åˆ°ç”¨æˆ·å‡½æ•°çš„è°ƒç”¨æ ˆä¿¡æ¯","like_count":11,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524415,"discussion_content":"å›ç­”æ»¡åˆ†ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628165491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349542,"user_name":"ä¸€å¿µä¹‹é—´","can_delete":false,"product_type":"c1","uid":1562957,"ip_address":"","ucode":"25C6317C111F93","user_header":"https://static001.geekbang.org/account/avatar/00/17/d9/4d/def385e9.jpg","comment_is_top":false,"comment_ctime":1656055526,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10245990118","product_id":100079601,"comment_content":"æ²¡å•¥ç”¨ï¼Œæœ€é‡è¦çš„å†™å…¥kafak,logstashåªå­—æœªæï¼Œå‘µå‘µäº†","like_count":2},{"had_liked":false,"id":307234,"user_name":"Geek_399957","can_delete":false,"product_type":"c1","uid":2676396,"ip_address":"","ucode":"A121DE94B6EC6E","user_header":"","comment_is_top":false,"comment_ctime":1628956197,"is_pvip":false,"replies":[{"id":"111388","content":"æ˜¯çš„å“ˆï¼Œå¹¶å‘åœºæ™¯ä¸‹æ²¡æœ‰é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1629242959,"ip_address":"","comment_id":307234,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10218890789","product_id":100079601,"comment_content":"å¦‚æœæˆ‘éœ€è¦æ ¹æ®ä¸åŒçš„åœºæ™¯è¾“å‡ºåˆ°ä¸åŒæ–‡ä»¶ï¼Œæ˜¯å¦æ¯æ¬¡éƒ½éœ€è¦æ–°å»ºä¸€ä¸ª log å‘¢ï¼Œè¿™æ ·åšå¹¶å‘æƒ…å†µä¸‹æ˜¯å¦æœ‰é—®é¢˜å‘¢","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525088,"discussion_content":"æ˜¯çš„å“ˆï¼Œå¹¶å‘åœºæ™¯ä¸‹æ²¡æœ‰é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629242959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304679,"user_name":"å¾æµ·æµª","can_delete":false,"product_type":"c1","uid":1078528,"ip_address":"","ucode":"21801C420D0610","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/00/618b20da.jpg","comment_is_top":false,"comment_ctime":1627547829,"is_pvip":false,"replies":[{"id":"110211","content":"è€å“¥ç†è§£çš„å¾ˆåˆ°ä½ï¼Œ1&#47;2æ˜¯æ–‡ä»¶æ ˆçš„æ·±åº¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627597425,"ip_address":"","comment_id":304679,"utype":1}],"discussion_count":1,"race_medal":1,"score":"10217482421","product_id":100079601,"comment_content":"å°è¯•å°†runtime.Caller(2)å‡½æ•°è°ƒç”¨ä¸­çš„ 2 æ”¹æˆ 1 ï¼Œçœ‹çœ‹æ—¥å¿—è¾“å‡ºæ˜¯å¦è·Ÿä¿®æ”¹å‰æœ‰å·®å¼‚ï¼Œå¦‚æœæœ‰å·®å¼‚ï¼Œæ€è€ƒå·®å¼‚äº§ç”Ÿçš„åŸå› ã€‚<br>------<br>*Entry.write:0 -&gt; cuslog.Info:1 -&gt; main.main:2 -&gt; ...<br>æ‰€ä»¥2æ˜¯æ‰“å°mainå‡½æ•°çš„æ–‡ä»¶å’Œè¡Œå·ï¼Œ1æ‰“å°çš„åˆ™æ˜¯Infoçš„æ–‡ä»¶å’Œè¡Œå·<br>è¿˜æ‹“å±•äº†è§£åˆ°runtime.Caller(n)å¯¹æ—¥å¿—ç»„ä»¶æ€§èƒ½çš„å½±å“åŠå…¶å–èˆ","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524117,"discussion_content":"è€å“¥ç†è§£çš„å¾ˆåˆ°ä½ï¼Œ1/2æ˜¯æ–‡ä»¶æ ˆçš„æ·±åº¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627597425,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302330,"user_name":"Nio","can_delete":false,"product_type":"c1","uid":1529642,"ip_address":"","ucode":"A1B8D3C01FB937","user_header":"https://static001.geekbang.org/account/avatar/00/17/57/2a/c6c95f37.jpg","comment_is_top":false,"comment_ctime":1626167817,"is_pvip":true,"replies":[{"id":"109490","content":"æ€§èƒ½è·Ÿgithub.com&#47;pkg&#47;logæ€§èƒ½æ¥è¿‘ä¸€è‡´ã€‚github.com&#47;pkg&#47;logè¿™ä¸ªåŒ…å¾ˆå¤šç”Ÿäº§ç¯å¢ƒåœ¨ç”¨ï¼Œæ‰€ä»¥iamçš„logåŒ…åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒå®Œå…¨æ²¡é—®é¢˜ã€‚<br><br>ä½ è¦æ„Ÿå…´è¶£ï¼Œå¯ä»¥è·Ÿå…¶å®ƒåŒ…å¯¹æ¯”ä¸‹ï¼Œæ¯”å¦‚ï¼šlogrusï¼Œzapï¼Œglogç­‰ã€‚ä¹Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«å¯¹æ¯”ç»“æœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1626280360,"ip_address":"","comment_id":302330,"utype":1}],"discussion_count":1,"race_medal":4,"score":"10216102409","product_id":100079601,"comment_content":"IAM é¡¹ç›® log åŒ…çš„æ€§èƒ½æ¯”è¾ƒå¤§æ¦‚æ˜¯ä»€ä¹ˆæ ·å­å‘¢","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523263,"discussion_content":"æ€§èƒ½è·Ÿgithub.com/pkg/logæ€§èƒ½æ¥è¿‘ä¸€è‡´ã€‚github.com/pkg/logè¿™ä¸ªåŒ…å¾ˆå¤šç”Ÿäº§ç¯å¢ƒåœ¨ç”¨ï¼Œæ‰€ä»¥iamçš„logåŒ…åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒå®Œå…¨æ²¡é—®é¢˜ã€‚\n\nä½ è¦æ„Ÿå…´è¶£ï¼Œå¯ä»¥è·Ÿå…¶å®ƒåŒ…å¯¹æ¯”ä¸‹ï¼Œæ¯”å¦‚ï¼šlogrusï¼Œzapï¼Œglogç­‰ã€‚ä¹Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«å¯¹æ¯”ç»“æœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626280360,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306888,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1115232,"ip_address":"","ucode":"3BF28670FD9407","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/60/64d166b6.jpg","comment_is_top":false,"comment_ctime":1628764081,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5923731377","product_id":100079601,"comment_content":"è¿™ç¯‡å†™å¾—ä¸é”™ã€‚","like_count":1},{"had_liked":false,"id":306776,"user_name":"Sch0ng","can_delete":false,"product_type":"c1","uid":1145554,"ip_address":"","ucode":"73F6113931B1AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg","comment_is_top":false,"comment_ctime":1628697242,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5923664538","product_id":100079601,"comment_content":"å¯¹logåŒ…æœ‰æ›´å…¨é¢çš„è®¤è¯†ã€‚<br>å¯ä»¥æ ¹æ®é¡¹ç›®éœ€è¦ï¼Œå¯¹å¼€æºzapåŒ…è¿›è¡ŒäºŒæ¬¡å°è£…ã€‚","like_count":1},{"had_liked":false,"id":304038,"user_name":"Alery","can_delete":false,"product_type":"c1","uid":1156557,"ip_address":"","ucode":"08F3F49181E67B","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/cd/3aff5d57.jpg","comment_is_top":false,"comment_ctime":1627202445,"is_pvip":false,"replies":[{"id":"110226","content":"ä½ ä»¬çš„æ—¥å¿—åŒ…å…¼å®¹klogï¼Œè¿™æ ·k8sçš„æ—¥å¿—ï¼Œå°±ä¼šé€šè¿‡ä½ ä»¬çš„æ—¥å¿—åŒ…æ¥æ‰“å°äº†ã€‚æ ¼å¼çš„è¯ï¼Œä½ ä»¬éœ€è¦è‡ªå·±é­”æ”¹é€‚é…","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627598599,"ip_address":"","comment_id":304038,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5922169741","product_id":100079601,"comment_content":"ä½ å¥½ï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œk8sçš„åº“éƒ½æ˜¯ä½¿ç”¨klogï¼Œæˆ‘ä»¬å·¥ç¨‹éœ€è¦å¼•ç”¨k8sçš„åº“ï¼Œä½†æ˜¯æˆ‘ä»¬è‡ªå·±å·¥ç¨‹ä½¿ç”¨çš„ä¸æ˜¯klogï¼Œè¿™ä¼šå¯¼è‡´æ‰“å°å‡ºæ¥çš„æ—¥å¿—åŒ…å«å¤šç§æ ¼å¼(æˆ‘ä»¬è‡ªå·±å·¥ç¨‹çš„æ—¥å¿—å’Œk8såº“æ‰“å°çš„æ—¥å¿—)ã€‚è¯·é—®ä½ ä»¬æœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523909,"discussion_content":"ä½ ä»¬çš„æ—¥å¿—åŒ…å…¼å®¹klogï¼Œè¿™æ ·k8sçš„æ—¥å¿—ï¼Œå°±ä¼šé€šè¿‡ä½ ä»¬çš„æ—¥å¿—åŒ…æ¥æ‰“å°äº†ã€‚æ ¼å¼çš„è¯ï¼Œä½ ä»¬éœ€è¦è‡ªå·±é­”æ”¹é€‚é…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627598599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302183,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1626111946,"is_pvip":false,"replies":[{"id":"109334","content":"log.Int32ç›´æ¥æŒ‡å®šäº†å­—æ®µç±»å‹ï¼Œlogä¸éœ€è¦å†åšåå°„ï¼Œè¿™ç§ç–¾è‹¦æ–¹å¼å¯ä»¥æé«˜æ€§èƒ½ã€‚<br><br><br>V Levelå¯ä»¥å…è®¸æŒ‡å®šä»»æ„ä¼˜å…ˆçº§çš„æ—¥å¿—çº§åˆ«ã€‚ä½ å¯ä»¥å‚è€ƒglogçš„ç”¨æ³•æ¥ç†è§£V levelã€‚<br><br>æœ‰æ—¶å€™æ—¥å¿—åŒ…é¢„å®šä¹‰çš„æ—¥å¿—çº§åˆ«å¯èƒ½ä¸å¤Ÿç”¨ï¼Œè¿™æ—¶å€™å¯ä»¥è¯•è¯•V Level","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1626142813,"ip_address":"","comment_id":302183,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5921079242","product_id":100079601,"comment_content":" log.Int32(&quot;int_key&quot;, 10)è¿˜æœ‰V Levelè¿™ä¸¤å¤„æ²¡æœ‰getåˆ°æ˜¯å¹²å•¥ç”¨çš„","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523211,"discussion_content":"log.Int32ç›´æ¥æŒ‡å®šäº†å­—æ®µç±»å‹ï¼Œlogä¸éœ€è¦å†åšåå°„ï¼Œè¿™ç§ç–¾è‹¦æ–¹å¼å¯ä»¥æé«˜æ€§èƒ½ã€‚\n\n\nV Levelå¯ä»¥å…è®¸æŒ‡å®šä»»æ„ä¼˜å…ˆçº§çš„æ—¥å¿—çº§åˆ«ã€‚ä½ å¯ä»¥å‚è€ƒglogçš„ç”¨æ³•æ¥ç†è§£V levelã€‚\n\næœ‰æ—¶å€™æ—¥å¿—åŒ…é¢„å®šä¹‰çš„æ—¥å¿—çº§åˆ«å¯èƒ½ä¸å¤Ÿç”¨ï¼Œè¿™æ—¶å€™å¯ä»¥è¯•è¯•V Level","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626142813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360039,"user_name":"tinyğŸŒ¾","can_delete":false,"product_type":"c1","uid":1119851,"ip_address":"æ¹–åŒ—","ucode":"7A4DE00381D1F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/6b/af7c7745.jpg","comment_is_top":false,"comment_ctime":1666148306,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1666148306","product_id":100079601,"comment_content":"logè¾“å‡ºæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šæŠ¥å‡ºpanic","like_count":0},{"had_liked":false,"id":349567,"user_name":"å·¥ç¨‹å¸ˆ_Eric","can_delete":false,"product_type":"c1","uid":1272568,"ip_address":"","ucode":"4440A1F187BEDA","user_header":"https://static001.geekbang.org/account/avatar/00/13/6a/f8/5d980054.jpg","comment_is_top":false,"comment_ctime":1656070203,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656070203","product_id":100079601,"comment_content":"wow","like_count":0},{"had_liked":false,"id":348944,"user_name":"czy","can_delete":false,"product_type":"c1","uid":2398831,"ip_address":"","ucode":"660826F2ABA3E4","user_header":"https://static001.geekbang.org/account/avatar/00/24/9a/6f/c4490cf2.jpg","comment_is_top":false,"comment_ctime":1655605380,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655605380","product_id":100079601,"comment_content":"optionsçš„formatterå­—æ®µå¹¶ä¸æ˜¯æŒ‡é’ˆç±»å‹ï¼Œåœ¨èµ‹å€¼çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯&amp;TextFormatter{}, è¿™ä¸ä¼šæŠ¥é”™å—ï¼Ÿæ˜æ˜¾ç±»å‹ä¸åŒ¹é…å‘€ï¼","like_count":0},{"had_liked":false,"id":346018,"user_name":"Geek_6bdb4e","can_delete":false,"product_type":"c1","uid":2720810,"ip_address":"","ucode":"2953D400AA5385","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","comment_is_top":false,"comment_ctime":1652770803,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1652770803","product_id":100079601,"comment_content":"å¦‚ä½•å®ç°åœ¨ä¸åŒç¯å¢ƒä»¥ä¸åŒçš„æ ¼å¼ï¼ˆprod: json, dev: console, local:console+enableColorï¼‰è¾“å‡ºæ—¥å¿—å‘¢","like_count":0},{"had_liked":false,"id":346009,"user_name":"Geek_6bdb4e","can_delete":false,"product_type":"c1","uid":2720810,"ip_address":"","ucode":"2953D400AA5385","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","comment_is_top":false,"comment_ctime":1652764818,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1652764818","product_id":100079601,"comment_content":"å¦‚æœæœåŠ¡æ˜¯éƒ¨ç½²åœ¨dockeré‡Œé¢ï¼Œè¯¥å¦‚ä½•åˆ©ç”¨logrotateè¿™ä¸ªå·¥å…·å®ç°æ—¥å¿—è½®è½¬å‘¢","like_count":0},{"had_liked":false,"id":346001,"user_name":"Geek_6bdb4e","can_delete":false,"product_type":"c1","uid":2720810,"ip_address":"","ucode":"2953D400AA5385","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","comment_is_top":false,"comment_ctime":1652760007,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1652760007","product_id":100079601,"comment_content":"æˆ‘çœ‹äº†ä¸€ä¸‹iamé¡¹ç›®é‡Œé¢çš„logçš„ä½¿ç”¨æ–¹æ³•ï¼Œå‘ç°WIthValuesè¿™ä¸ªæ–¹æ³•ä½¿ç”¨çš„å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œæƒ³é—®ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•åœ¨é¡¹ç›®é‡Œé¢çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä½ çœ‹æˆ‘è¿™ç§ä½¿ç”¨åœºæ™¯çš„æ‰“å¼€æ–¹å¼å¯¹ä¸å¯¹ï¼Œå°±æ˜¯åœ¨internalç›®å½•é‡ŒåŒ…å«apiserverã€authzserverç­‰ç­‰ï¼Œå…¶ä¸‹åˆåˆ†controllerã€serviceã€storeç­‰æ¨¡å—ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥åœ¨æ¯ä¸ªæ¨¡å—éƒ½åˆ©ç”¨lv := log.WithValues(&quot;module&quot;, &quot;apiserver&#47;controller&quot;)åˆ›å»ºç±»ä¼¼çš„ä¸€ä¸ªloggerä¾›æœ¬æ¨¡å—ä½¿ç”¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":341274,"user_name":"å¼ æµ©è½©","can_delete":false,"product_type":"c1","uid":1628040,"ip_address":"","ucode":"6CB5A6F6FA209B","user_header":"https://static001.geekbang.org/account/avatar/00/18/d7/88/6f6b245c.jpg","comment_is_top":false,"comment_ctime":1649493102,"is_pvip":true,"replies":[{"id":"125543","content":"å¯èƒ½éœ€è¦åˆ‡æ¢ä¸€ä¸ªæ”¯æŒerror, infoåˆ†åˆ«å­˜æ”¾çš„æ—¥å¿—åŒ…ï¼Œä¾‹å¦‚ï¼šglog","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1651079310,"ip_address":"","comment_id":341274,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1649493102","product_id":100079601,"comment_content":"è¯·é—®è€å¸ˆä¸šåŠ¡éœ€è¦è®°å½•çš„é”™è¯¯æ—¥å¿—æ€ä¹ˆæ”¾åˆ°errorOutputPathä¸­? æˆ‘çœ‹äº†exampleçš„ç¤ºä¾‹ï¼Œæ— æ³•å®ç°info erroræ—¥å¿—åŒºåˆ†å­˜æ”¾çš„åŠŸèƒ½ã€‚","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568237,"discussion_content":"å¯èƒ½éœ€è¦åˆ‡æ¢ä¸€ä¸ªæ”¯æŒerror, infoåˆ†åˆ«å­˜æ”¾çš„æ—¥å¿—åŒ…ï¼Œä¾‹å¦‚ï¼šglog","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651079311,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329448,"user_name":"çˆ±å­¦ä¹ çš„W","can_delete":false,"product_type":"c1","uid":2641096,"ip_address":"","ucode":"C66BFF0D54E57F","user_header":"https://static001.geekbang.org/account/avatar/00/28/4c/c8/77e4d78b.jpg","comment_is_top":false,"comment_ctime":1641352803,"is_pvip":false,"replies":[{"id":"120959","content":"2ä¸ªæ˜¯ä¸åŒçš„æ¨¡å¼ï¼Œåœºæ™¯ä¸åŒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1642434964,"ip_address":"","comment_id":329448,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641352803","product_id":100079601,"comment_content":"æˆ‘æƒ³çš„æ˜¯ï¼šç”¨é€‰é¡¹æ¨¡å¼ï¼Ÿ ä¸ºä»€ä¹ˆä¸ç”¨è´£ä»»é“¾æ¨¡å¼","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546862,"discussion_content":"2ä¸ªæ˜¯ä¸åŒçš„æ¨¡å¼ï¼Œåœºæ™¯ä¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642434964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327621,"user_name":"Geek_6bf2d9","can_delete":false,"product_type":"c1","uid":2475424,"ip_address":"","ucode":"46E03737E48456","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/c9xpiakQ3OC1AlfCeW03lLj3NuUjoLiaWD8DicQoibBgicM5icM936iaRMEJtjKqQgTGpmJALg6J56LXibjSib8e0UaRIJg/132","comment_is_top":false,"comment_ctime":1640195374,"is_pvip":false,"replies":[{"id":"119709","content":"å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šhttps:&#47;&#47;www.jianshu.com&#47;p&#47;8fbbf6c012b2","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1640825967,"ip_address":"","comment_id":327621,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640195374","product_id":100079601,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½å¤§æ¦‚æŒ‡ä¸€ä¸‹cuslogåŒ…é‡Œçš„loggerç»“æ„ä½“è®¾è®¡ï¼Œä¸ºä»€ä¹ˆè¦åŠ ä¸€ä¸ªsync.Poolå‘¢ï¼Ÿè¿™é‡Œæ˜¯å¤„äºä»€ä¹ˆè€ƒè™‘ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542655,"discussion_content":"å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šhttps://www.jianshu.com/p/8fbbf6c012b2","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640825967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326078,"user_name":"Dppçš„å°è·Ÿç­å„¿","can_delete":false,"product_type":"c1","uid":1566294,"ip_address":"","ucode":"4AF5F9892C575E","user_header":"https://static001.geekbang.org/account/avatar/00/17/e6/56/020f2209.jpg","comment_is_top":false,"comment_ctime":1639366498,"is_pvip":false,"replies":[{"id":"118316","content":"ä¸æ”¯æŒã€‚rotateå»ºè®®é€šè¿‡æ—è·¯æœåŠ¡æ¥å®ç°ã€‚æ¯”å¦‚Linuxè‡ªå¸¦çš„logrotateæœåŠ¡ã€‚<br><br>ä¸å»ºè®®æ—¥å¿—åŒ…é›†æˆå¤ªå¤æ‚çš„åŠŸèƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1639397399,"ip_address":"","comment_id":326078,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1639366498","product_id":100079601,"comment_content":"è€å¸ˆï¼Œè¯¥logåŒ…æ”¯æŒrotateåŠŸèƒ½å—ï¼Ÿå®é™…é¡¹ç›®ä¸­æ˜¯è¿ç»´ä½¿ç”¨è„šæœ¬æ§åˆ¶æ—¥å¿—å¤§å°å‘¢ï¼Œè¿˜æ˜¯æœ€å¥½å¼€å‘é€‰ç”¨çš„logåŒ…å°±ç›´æ¥æ”¯æŒæ‰æ˜¯æœ€ä½³è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538303,"discussion_content":"ä¸æ”¯æŒã€‚rotateå»ºè®®é€šè¿‡æ—è·¯æœåŠ¡æ¥å®ç°ã€‚æ¯”å¦‚Linuxè‡ªå¸¦çš„logrotateæœåŠ¡ã€‚\n\nä¸å»ºè®®æ—¥å¿—åŒ…é›†æˆå¤ªå¤æ‚çš„åŠŸèƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639397399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324598,"user_name":"liaomars","can_delete":false,"product_type":"c1","uid":2104856,"ip_address":"","ucode":"4FCA97EE9FB57D","user_header":"https://static001.geekbang.org/account/avatar/00/20/1e/18/9d1f1439.jpg","comment_is_top":false,"comment_ctime":1638514566,"is_pvip":false,"replies":[{"id":"118349","content":"åŠ è€å¸ˆå¾®ä¿¡ï¼šnightskongï¼Œæ‹‰ä½ å…¥ç¾¤ï¼Œä¸ä¼šçš„è¯ç¾¤é‡Œéšæ—¶é—®ï¼Œç¾¤é‡Œæ²¡åé¦ˆï¼Œå¯ä»¥ç›´æ¥@è€å¸ˆã€‚<br><br>æ…¢æ…¢å•ƒï¼Œæ€»èƒ½å­¦ä¼šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1639400145,"ip_address":"","comment_id":324598,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638514566","product_id":100079601,"comment_content":"å°ç™½è¡¨ç¤ºå®Œå…¨æ²¡çœ‹æ˜ç™½ï¼Œæ‰‹æŠŠæ‰‹ä¹Ÿä¸çŸ¥é“è¿™ä¸ªæ‰‹ä»å“ªé‡Œä¸‹ æ‚è„¸","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538346,"discussion_content":"åŠ è€å¸ˆå¾®ä¿¡ï¼šnightskongï¼Œæ‹‰ä½ å…¥ç¾¤ï¼Œä¸ä¼šçš„è¯ç¾¤é‡Œéšæ—¶é—®ï¼Œç¾¤é‡Œæ²¡åé¦ˆï¼Œå¯ä»¥ç›´æ¥@è€å¸ˆã€‚\n\næ…¢æ…¢å•ƒï¼Œæ€»èƒ½å­¦ä¼šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639400145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319930,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1636011965,"is_pvip":false,"replies":[{"id":"116893","content":"è¿™ä¸ªåœ°æ–¹çš„æ—¥å¿—ï¼Œä¸»è¦æ˜¯debugçš„æ—¶å€™ç”¨çš„ï¼Œæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆã€‚<br>å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è®°å½•æ—¥å¿—ã€‚å¦‚æœåæœŸéœ€è¦æ ¹æ®pathã€statusç­‰æ¥è¿‡æ»¤æ—¥å¿—ï¼Œæ˜¯å¯ä»¥å°†è¿™äº›è®°å½•æˆkey&amp;#47;valueçš„å½¢å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1637079203,"ip_address":"","comment_id":319930,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636011965","product_id":100079601,"comment_content":"å…³äºä¸­é—´ä»¶logger, å½“å¯ç”¨jsonæ¨¡å¼è®°å½•æ—¥å¿—åçš„å¿ƒæ€å¦‚ä¸‹:<br><br>{&quot;level&quot;:&quot;INFO&quot;,&quot;timestamp&quot;:&quot;2021-11-04 15:20:07.638&quot;,&quot;caller&quot;:&quot;middleware&#47;logger.go:129&quot;,&quot;message&quot;:&quot;500 - [10.2.14.14] \\&quot;1.745536ms GET &#47;v1&#47;users&#47;levin\\&quot; &quot;,&quot;x-request-id&quot;:&quot;0103dc05-f652-4b8c-bdcb-b20280da9936&quot;,&quot;username&quot;:&quot;&quot;}<br><br>æˆ‘å‘ç°loggerä¸­é—´ä»¶å°†httpçŠ¶æ€ç ã€è¯·æ±‚methodã€è¯·æ±‚è€—æ—¶ã€è¯·æ±‚pathç­‰éƒ½å¡åœ¨äº†messageå­—æ®µä¸­, è¿™æ ·åæœŸè¿›è¡Œæ—¥å¿—åˆ†ææ—¶, æ˜¯å¦ä¸åˆ©äºæ ¹æ®çŠ¶æ€ç ç­‰ä¿¡æ¯è¿›è¡Œæ—¥å¿—è¿‡æ»¤, è¿™äº›è¯·æ±‚ä¸å“åº”ä¿¡æ¯æ˜¯å¦åº”è¯¥æŒ‰key&#47;valueç‹¬ç«‹ä¹‹çŸ­çš„å½¢å¼è¾“å‡ºå‘¢? å½“ç„¶è¿™æ ·åšä¹Ÿæœ‰ç¼ºç‚¹, å°±æ˜¯ä¸­é—´ä»¶loggeräº§ç”Ÿçš„è®¿é—®æ—¥å¿—çš„å­—æ®µæ•°é‡å°±æ²¡åŠæ³•å’Œå…¶ä»–åœ°æ–¹æ‰“å°çš„æ—¥å¿—å­—æ®µç»Ÿä¸€äº†.  ä¸çŸ¥é“åº”è¯¥å¦‚ä½•æƒè¡¡å‘¢<br>","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530531,"discussion_content":"è¿™ä¸ªåœ°æ–¹çš„æ—¥å¿—ï¼Œä¸»è¦æ˜¯debugçš„æ—¶å€™ç”¨çš„ï¼Œæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆã€‚\nå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è®°å½•æ—¥å¿—ã€‚å¦‚æœåæœŸéœ€è¦æ ¹æ®pathã€statusç­‰æ¥è¿‡æ»¤æ—¥å¿—ï¼Œæ˜¯å¯ä»¥å°†è¿™äº›è®°å½•æˆkey/valueçš„å½¢å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637079203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318727,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1635404450,"is_pvip":false,"replies":[{"id":"116902","content":"github.com&amp;#47;marmotedu&amp;#47;iam&amp;#47;pkg&amp;#47;log è¿™ä¸ªåŒ…æ²¡æœ‰bugã€‚<br><br>ä¹‹æ‰€ä»¥æ‰“å°äº†299æ¡ï¼Œæ˜¯å› ä¸ºé‡Œé¢æœ‰å¾ˆå¤šlogå†…å®¹æ˜¯å®Œå…¨é‡å¤çš„ï¼ŒåŒ…æ‹¬æ—¶é—´æˆ³ï¼Œmsgç­‰ç­‰ï¼Œzapä¼šå¯¹è¿™äº›å®Œå…¨ä¸€æ ·çš„logå»é‡ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ—¶é—´æˆ³ï¼Œæ—¥å¿—å†…å®¹å®Œå…¨ä¸€è‡´æ¦‚ç‡å‡ ä¹ä¸º0.","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1637102514,"ip_address":"","comment_id":318727,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1635404450","product_id":100079601,"comment_content":"å‘ç°iamé¡¹ç›®çš„logåŒ…æœ‰ä¸ªä¸¥é‡çš„bug, æµ‹è¯•å¤§æ‰¹é‡å†™æ—¥å¿—åˆ°æ–‡ä»¶, åªèƒ½æˆåŠŸå†™å…¥ä¸€å°éƒ¨åˆ†, æ¯”å¦‚:<br>        defer log.Flush()<br>\tfor i := 0; i &lt;= 20000; i++ {<br>\t\tlog.Info(&quot;hello world&quot;)<br>\t}<br> åªèƒ½æˆåŠŸå†™å…¥299æ¡æ—¥å¿—, é¢„æœŸåº”è¯¥æ˜¯2ä¸‡æ¡æ—¥å¿—.<br><br>logåŒ…: github.com&#47;marmotedu&#47;iam&#47;pkg&#47;log<br>","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530553,"discussion_content":"github.com/marmotedu/iam/pkg/log è¿™ä¸ªåŒ…æ²¡æœ‰bugã€‚\n\nä¹‹æ‰€ä»¥æ‰“å°äº†299æ¡ï¼Œæ˜¯å› ä¸ºé‡Œé¢æœ‰å¾ˆå¤šlogå†…å®¹æ˜¯å®Œå…¨é‡å¤çš„ï¼ŒåŒ…æ‹¬æ—¶é—´æˆ³ï¼Œmsgç­‰ç­‰ï¼Œzapä¼šå¯¹è¿™äº›å®Œå…¨ä¸€æ ·çš„logå»é‡ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ—¶é—´æˆ³ï¼Œæ—¥å¿—å†…å®¹å®Œå…¨ä¸€è‡´æ¦‚ç‡å‡ ä¹ä¸º0.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637102514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105161,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","nickname":"helloworld","note":"","ucode":"1EECCA0F43E278","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411786,"discussion_content":"è²Œä¼¼ä¹Ÿä¸æ˜¯bugï¼Œæ‰“å°å¾ªç¯å˜é‡å°±å¯ä»¥æ‰“å…¨éƒ¨çš„æ—¥å¿—äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636005471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318382,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1635262885,"is_pvip":false,"replies":[{"id":"115977","content":"å¥½å»ºè®®ï¼Œæˆ‘è®°å½•ä¸‹ï¼Œåé¢ä¼˜åŒ–ä¸‹ã€‚<br><br>ä¹‹å‰åœ¨å¼€å‘çš„æ—¶å€™ï¼Œä¹Ÿæœ‰çº ç»“æ”¾å“ªé‡Œã€‚å½“æ—¶æ”¾åœ¨pkg&#47;logä¸‹ï¼Œèƒ½æä¾›å¤–éƒ¨ç¨‹åºè¿™ä¹ˆç”¨ã€‚ä½†å…¶å®ï¼Œè¿™2ä¸ªåŠŸèƒ½ç›¸å¯¹æ¥è¯´è¿˜æ˜¯åå®šåˆ¶åŒ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å­”ä»¤é£","uid":"1167883","ctime":1636005018,"ip_address":"","comment_id":318382,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635262885","product_id":100079601,"comment_content":"ä¸ªäººæ„Ÿè§‰pkg&#47;logåŒ…çš„Optionsç»“æ„ä½“çš„Addflagsæ–¹æ³•å’Œvalidateæ–¹æ³•æ”¾åˆ°internal&#47;pkg&#47;options&#47;log.goæ–‡ä»¶ä¸­æ›´ä¼˜é›…å’Œä¸€è‡´ä¸€äº›.","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529214,"discussion_content":"å¥½å»ºè®®ï¼Œæˆ‘è®°å½•ä¸‹ï¼Œåé¢ä¼˜åŒ–ä¸‹ã€‚\n\nä¹‹å‰åœ¨å¼€å‘çš„æ—¶å€™ï¼Œä¹Ÿæœ‰çº ç»“æ”¾å“ªé‡Œã€‚å½“æ—¶æ”¾åœ¨pkg/logä¸‹ï¼Œèƒ½æä¾›å¤–éƒ¨ç¨‹åºè¿™ä¹ˆç”¨ã€‚ä½†å…¶å®ï¼Œè¿™2ä¸ªåŠŸèƒ½ç›¸å¯¹æ¥è¯´è¿˜æ˜¯åå®šåˆ¶åŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636005018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316372,"user_name":"æˆäººä»¥ğŸŸï¼Œä¸å¦‚æˆäººä»¥æ¸”","can_delete":false,"product_type":"c1","uid":1193874,"ip_address":"","ucode":"BD53829E924B66","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/92/961ba560.jpg","comment_is_top":false,"comment_ctime":1634289873,"is_pvip":true,"replies":[{"id":"114924","content":"æ­£å¸¸ï¼Œå“ˆå“ˆï¼Œæˆ‘ä¹‹å‰åœ¨å†™çš„æ—¶å€™ä¹Ÿæ˜¯è¿™ç§æ„Ÿè§‰ã€‚åæ¥å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œè‡ªå·±åŠ¨æ‰‹å»è®¾è®¡äº†ä¸€ä¸ªerrorsåŒ…ï¼Œæ‰å˜å¾—ç†Ÿæ‚‰èµ·æ¥ã€‚<br><br>ä½ çœ‹æ˜¯å¦èƒ½æ ¹æ®è‡ªå·±å½“å‰çš„å·¥ä½œéœ€æ±‚ï¼Œè®¾è®¡ä¸€ä¸ªerrorsåŒ…ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å­”ä»¤é£","uid":"1167883","ctime":1634737813,"ip_address":"","comment_id":316372,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1634289873","product_id":100079601,"comment_content":"å­”è€å¸ˆï¼Œçœ‹äº† errors åŒ…çš„ä»£ç ï¼Œä»ç„¶è§‰å¾—æ‰‹ç”Ÿï¼Œæ€ä¹ˆåŠï¼Ÿæ˜¯å†™å°‘äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528372,"discussion_content":"æ­£å¸¸ï¼Œå“ˆå“ˆï¼Œæˆ‘ä¹‹å‰åœ¨å†™çš„æ—¶å€™ä¹Ÿæ˜¯è¿™ç§æ„Ÿè§‰ã€‚åæ¥å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œè‡ªå·±åŠ¨æ‰‹å»è®¾è®¡äº†ä¸€ä¸ªerrorsåŒ…ï¼Œæ‰å˜å¾—ç†Ÿæ‚‰èµ·æ¥ã€‚\n\nä½ çœ‹æ˜¯å¦èƒ½æ ¹æ®è‡ªå·±å½“å‰çš„å·¥ä½œéœ€æ±‚ï¼Œè®¾è®¡ä¸€ä¸ªerrorsåŒ…ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634737813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315758,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1633966009,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633966009","product_id":100079601,"comment_content":"è¿™èŠ‚å¹²è´§æŒºå¤šã€‚<br><br>æºç åªè¯»äº†éƒ¨åˆ†ï¼Œæ„Ÿè§‰å°è£…çš„å¤æ‚åº¦è¿˜æ˜¯å¾ˆé«˜çš„ï¼Œå°¤å…¶æ˜¯ iam é¡¹ç›®çš„è¿™ä¸ª logåŒ…ã€‚","like_count":0}]}