{"id":386970,"title":"12 | API 风格（上）：如何设计RESTful API？","content":"<p>你好，我是孔令飞。从今天开始，我们就要进入实战第二站，开始学习如何设计和开发Go项目开发中的基础功能了。接下来两讲，我们一起来看下如何设计应用的API风格。</p><p>绝大部分的Go后端服务需要编写API接口，对外提供服务。所以在开发之前，我们需要确定一种API风格。API风格也可以理解为API类型，目前业界常用的API风格有三种：REST、RPC和GraphQL。我们需要根据项目需求，并结合API风格的特点，确定使用哪种API风格，这对以后的编码实现、通信方式和通信效率都有很大的影响。</p><p>在Go项目开发中，用得最多的是REST和RPC，我们在IAM实战项目中也使用了REST和RPC来构建示例项目。接下来的两讲，我会详细介绍下REST和RPC这两种风格，如果你对GraphQL感兴趣，<a href=\"https://graphql.cn/\">GraphQL中文官网</a>有很多文档和代码示例，你可以自行学习。</p><p>这一讲，我们先来看下RESTful API风格设计，下一讲再介绍下RPC API风格。</p><h2>RESTful API介绍</h2><p>在回答“RESTful API是什么”之前，我们先来看下REST是什么意思：REST代表的是表现层状态转移（REpresentational State Transfer），由Roy Fielding在他的论文<a href=\"https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm\">《Architectural Styles and the Design of Network-based Software Architectures》</a>里提出。REST本身并没有创造新的技术、组件或服务，它只是一种软件架构风格，是一组架构约束条件和原则，而不是技术框架。</p><!-- [[[read_end]]] --><p><strong>REST有一系列规范，满足这些规范的API均可称为RESTful API</strong>。REST规范把所有内容都视为资源，也就是说网络上一切皆资源。REST架构对资源的操作包括获取、创建、修改和删除，这些操作正好对应HTTP协议提供的GET、POST、PUT和DELETE方法。HTTP动词与 REST风格CRUD的对应关系见下表：</p><p><img src=\"https://static001.geekbang.org/resource/image/40/92/409164157ce4cde3131f0236d660e092.png?wh=1754x582\" alt=\"\"></p><p>REST风格虽然适用于很多传输协议，但在实际开发中，由于REST天生和HTTP协议相辅相成，因此HTTP协议已经成了实现RESTful API事实上的标准。所以，REST具有以下核心特点：</p><ul>\n<li>\n<p>以资源(resource)为中心，所有的东西都抽象成资源，所有的行为都应该是在资源上的CRUD操作。</p>\n<ul>\n<li>资源对应着面向对象范式里的对象，面向对象范式以对象为中心。</li>\n<li>资源使用URI标识，每个资源实例都有一个唯一的URI标识。例如，如果我们有一个用户，用户名是admin，那么它的URI标识就可以是/users/admin。</li>\n</ul>\n</li>\n<li>\n<p>资源是有状态的，使用JSON/XML等在HTTP Body里表征资源的状态。</p>\n</li>\n<li>\n<p>客户端通过四个HTTP动词，对服务器端资源进行操作，实现“表现层状态转化”。</p>\n</li>\n<li>\n<p>无状态，这里的无状态是指每个RESTful API请求都包含了所有足够完成本次操作的信息，服务器端无须保持session。无状态对于服务端的弹性扩容是很重要的。</p>\n</li>\n</ul><p>因为怕你弄混概念，这里强调下REST和RESTful API的区别：<strong>REST是一种规范，而RESTful API则是满足这种规范的API接口。</strong></p><h2>RESTful API设计原则</h2><p>上面我们说了，RESTful API就是满足REST规范的API，由此看来，RESTful API的核心是规范，那么具体有哪些规范呢？</p><p>接下来，我就从URI设计、API版本管理等七个方面，给你详细介绍下RESTful API的设计原则，然后再通过一个示例来帮助你快速启动一个RESTful API服务。希望你学完这一讲之后，对如何设计RESTful API有一个清楚的认知。</p><h3>URI设计</h3><p>资源都是使用URI标识的，我们应该按照一定的规范来设计URI，通过规范化可以使我们的API接口更加易读、易用。以下是URI设计时，应该遵循的一些规范：</p><ul>\n<li>\n<p>资源名使用名词而不是动词，并且用名词复数表示。资源分为Collection和Member两种。</p>\n<ul>\n<li>Collection：一堆资源的集合。例如我们系统里有很多用户（User）,这些用户的集合就是Collection。Collection的URI标识应该是 <code>域名/资源名复数</code>, 例如<code>https:// iam.api.marmotedu.com/users</code>。</li>\n<li>Member：单个特定资源。例如系统中特定名字的用户，就是Collection里的一个Member。Member的URI标识应该是 <code>域名/资源名复数/资源名称</code>, 例如<code>https:// iam.api.marmotedu/users/admin</code>。</li>\n</ul>\n</li>\n<li>\n<p>URI结尾不应包含<code>/</code>。</p>\n</li>\n<li>\n<p>URI中不能出现下划线 <code>_</code>，必须用中杠线 <code>-</code>代替（有些人推荐用 <code>_</code>，有些人推荐用 <code>-</code>，统一使用一种格式即可，我比较推荐用 <code>-</code>）。</p>\n</li>\n<li>\n<p>URI路径用小写，不要用大写。</p>\n</li>\n<li>\n<p>避免层级过深的URI。超过2层的资源嵌套会很乱，建议将其他资源转化为<code>?</code>参数，比如：</p>\n</li>\n</ul><pre><code>/schools/tsinghua/classes/rooma/students/zhang # 不推荐\n/students?school=qinghua&amp;class=rooma # 推荐\n</code></pre><p>这里有个地方需要注意：在实际的API开发中，可能你会发现有些操作不能很好地映射为一个REST资源，这时候，你可以参考下面的做法。</p><ul>\n<li>将一个操作变成资源的一个属性，比如想在系统中暂时禁用某个用户，可以这么设计URI：<code>/users/zhangsan?active=false</code>。</li>\n<li>将操作当作是一个资源的嵌套资源，比如一个GitHub的加星操作：</li>\n</ul><pre><code>PUT /gists/:id/star # github star action\nDELETE /gists/:id/star # github unstar action\n</code></pre><ul>\n<li>如果以上都不能解决问题，有时可以打破这类规范。比如登录操作，登录不属于任何一个资源，URI可以设计为：/login。</li>\n</ul><p>在设计URI时，如果你遇到一些不确定的地方，推荐你参考  <a href=\"https://developer.github.com/v3/\">GitHub标准RESTful API</a>。</p><h3>REST资源操作映射为HTTP方法</h3><p>基本上RESTful API都是使用HTTP协议原生的GET、PUT、POST、DELETE来标识对资源的CRUD操作的，形成的规范如下表所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/d9/2d/d970bcd53d2827b7f2096e639d5fa82d.png?wh=1524x698\" alt=\"\"></p><p>对资源的操作应该满足安全性和幂等性：</p><ul>\n<li>安全性：不会改变资源状态，可以理解为只读的。</li>\n<li>幂等性：执行1次和执行N次，对资源状态改变的效果是等价的。</li>\n</ul><p>使用不同HTTP方法时，资源操作的安全性和幂等性对照见下表：</p><p><img src=\"https://static001.geekbang.org/resource/image/b7/e1/b746421291654e4d2e51509b885c4ee1.png?wh=1434x448\" alt=\"\"></p><p>在使用HTTP方法的时候，有以下两点需要你注意：</p><ul>\n<li>GET返回的结果，要尽量可用于PUT、POST操作中。例如，用GET方法获得了一个user的信息，调用者修改user的邮件，然后将此结果再用PUT方法更新。这要求GET、PUT、POST操作的资源属性是一致的。</li>\n<li>如果对资源进行状态/属性变更，要用PUT方法，POST方法仅用来创建或者批量删除这两种场景。</li>\n</ul><p>在设计API时，经常会有批量删除的需求，需要在请求中携带多个需要删除的资源名，但是HTTP的DELETE方法不能携带多个资源名，这时候可以通过下面三种方式来解决：</p><ul>\n<li>发起多个DELETE请求。</li>\n<li>操作路径中带多个id，id之间用分隔符分隔, 例如：<code>DELETE /users?ids=1,2,3</code>  。</li>\n<li>直接使用POST方式来批量删除，body中传入需要删除的资源列表。</li>\n</ul><p>其中，第二种是我最推荐的方式，因为使用了匹配的DELETE动词，并且不需要发送多次DELETE请求。</p><p>你需要注意的是，这三种方式都有各自的使用场景，你可以根据需要自行选择。如果选择了某一种方式，那么整个项目都需要统一用这种方式。</p><h3>统一的返回格式</h3><p>一般来说，一个系统的RESTful API会向外界开放多个资源的接口，每个接口的返回格式要保持一致。另外，每个接口都会返回成功和失败两种消息，这两种消息的格式也要保持一致。不然，客户端代码要适配不同接口的返回格式，每个返回格式又要适配成功和失败两种消息格式，会大大增加用户的学习和使用成本。</p><p>返回的格式没有强制的标准，你可以根据实际的业务需要返回不同的格式。本专栏 <strong>第19讲</strong> 中会推荐一种返回格式，它也是业界最常用和推荐的返回格式。</p><h3>API 版本管理</h3><p>随着时间的推移、需求的变更，一个API往往满足不了现有的需求，这时候就需要对API进行修改。对API进行修改时，不能影响其他调用系统的正常使用，这就要求API变更做到向下兼容，也就是新老版本共存。</p><p>但在实际场景中，很可能会出现同一个API无法向下兼容的情况。这时候最好的解决办法是从一开始就引入API版本机制，当不能向下兼容时，就引入一个新的版本，老的版本则保留原样。这样既能保证服务的可用性和安全性，同时也能满足新需求。</p><p>API版本有不同的标识方法，在RESTful API开发中，通常将版本标识放在如下3个位置：</p><ul>\n<li>URL中，比如<code>/v1/users</code>。</li>\n<li>HTTP Header中，比如<code>Accept: vnd.example-com.foo+json; version=1.0</code>。</li>\n<li>Form参数中，比如<code>/users?version=v1</code>。</li>\n</ul><p>我们这门课中的版本标识是放在URL中的，比如<code>/v1/users</code>，这样做的好处是很直观，GitHub、Kubernetes、Etcd等很多优秀的API均采用这种方式。</p><p>这里要注意，有些开发人员不建议将版本放在URL中，因为他们觉得不同的版本可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。对于这一点，没有严格的标准，根据项目实际需要选择一种方式即可。</p><h3>API命名</h3><p>API通常的命名方式有三种，分别是驼峰命名法(serverAddress)、蛇形命名法(server_address)和脊柱命名法(server-address)。</p><p>驼峰命名法和蛇形命名法都需要切换输入法，会增加操作的复杂性，也容易出错，所以这里建议用脊柱命名法。GitHub API用的就是脊柱命名法，例如  <a href=\"https://docs.github.com/en/rest/reference/actions#get-allowed-actions-for-an-organization\">selected-actions</a>。</p><h3>统一分页/过滤/排序/搜索功能</h3><p>REST资源的查询接口，通常情况下都需要实现分页、过滤、排序、搜索功能，因为这些功能是每个REST资源都能用到的，所以可以实现为一个公共的API组件。下面来介绍下这些功能。</p><ul>\n<li>分页：在列出一个Collection下所有的Member时，应该提供分页功能，例如<code>/users?offset=0&amp;limit=20</code>（limit，指定返回记录的数量；offset，指定返回记录的开始位置）。引入分页功能可以减少API响应的延时，同时可以避免返回太多条目，导致服务器/客户端响应特别慢，甚至导致服务器/客户端crash的情况。</li>\n<li>过滤：如果用户不需要一个资源的全部状态属性，可以在URI参数里指定返回哪些属性，例如<code>/users?fields=email,username,address</code>。</li>\n<li>排序：用户很多时候会根据创建时间或者其他因素，列出一个Collection中前100个Member，这时可以在URI参数中指明排序参数，例如<code>/users?sort=age,desc</code>。</li>\n<li>搜索：当一个资源的Member太多时，用户可能想通过搜索，快速找到所需要的Member，或着想搜下有没有名字为xxx的某类资源，这时候就需要提供搜索功能。搜索建议按模糊匹配来搜索。</li>\n</ul><h3>域名</h3><p>API的域名设置主要有两种方式：</p><ul>\n<li><code>https://marmotedu.com/api</code>，这种方式适合API将来不会有进一步扩展的情况，比如刚开始marmotedu.com域名下只有一套API系统，未来也只有这一套API系统。</li>\n<li><code>https://iam.api.marmotedu.com</code>，如果marmotedu.com域名下未来会新增另一个系统API，这时候最好的方式是每个系统的API拥有专有的API域名，比如：<code>storage.api.marmotedu.com</code>，<code>network.api.marmotedu.com</code>。腾讯云的域名就是采用这种方式。</li>\n</ul><p>到这里，我们就将REST设计原则中的核心原则讲完了，这里有个需要注意的点：不同公司、不同团队、不同项目可能采取不同的REST设计原则，以上所列的基本上都是大家公认的原则。</p><p>REST设计原则中，还有一些原则因为内容比较多，并且可以独立成模块，所以放在后面来讲。比如  RESTful API安全性、状态返回码和认证等。</p><h2>REST示例</h2><p>上面介绍了一些概念和原则，这里我们通过一个“Hello World”程序，来教你用Go快速启动一个RESTful API服务，示例代码存放在<a href=\"https://github.com/marmotedu/gopractise-demo/blob/main/apistyle/ping/main.go\">gopractise-demo/apistyle/ping/main.go</a>。</p><pre><code>package main\n\nimport (\n\t&quot;log&quot;\n\t&quot;net/http&quot;\n)\n\nfunc main() {\n\thttp.HandleFunc(&quot;/ping&quot;, pong)\n\tlog.Println(&quot;Starting http server ...&quot;)\n\tlog.Fatal(http.ListenAndServe(&quot;:50052&quot;, nil))\n}\n\nfunc pong(w http.ResponseWriter, r *http.Request) {\n\tw.Write([]byte(&quot;pong&quot;))\n}\n</code></pre><p>在上面的代码中，我们通过http.HandleFunc，向HTTP服务注册了一个pong handler，在pong handler中，我们编写了真实的业务代码：返回pong字符串。</p><p>创建完main.go文件后，在当前目录下执行go run main.go启动HTTP服务，在一个新的Linux终端下发送HTTP请求，进行使用curl命令测试：</p><pre><code>$ curl http://127.0.0.1:50052/ping\npong\n</code></pre><h2>总结</h2><p>这一讲，我介绍了两种常用API风格中的一种，RESTful API。REST是一种API规范，而RESTful API则是满足这种规范的API接口，RESTful API的核心是规范。</p><p>在REST规范中，资源通过URI来标识，资源名使用名词而不是动词，并且用名词复数表示，资源都是分为Collection和Member两种。RESTful API中，分别使用POST、DELETE、PUT、GET来表示REST资源的增删改查，HTTP方法、Collection、Member不同组合会产生不同的操作，具体的映射你可以看下 <strong>REST资源操作映射为HTTP方法</strong> 部分的表格。</p><p>为了方便用户使用和理解，每个RESTful API的返回格式、错误和正确消息的返回格式，都应该保持一致。RESTful API需要支持API版本，并且版本应该能够向前兼容，我们可以将版本号放在URL中、HTTP Header中、Form参数中，但这里我建议将版本号放在URL中，例如 <code>/v1/users</code>，这种形式比较直观。</p><p>另外，我们可以通过脊柱命名法来命名API接口名。对于一个REST资源，其查询接口还应该支持分页/过滤/排序/搜索功能，这些功能可以用同一套机制来实现。 API的域名可以采用 <code>https://marmotedu.com/api</code> 和 <code>https://iam.api.marmotedu.com</code> 两种格式。</p><p>最后，在Go中我们可以使用net/http包来快速启动一个RESTful API服务。</p><h2>课后练习</h2><ol>\n<li>使用net/http包，快速实现一个RESTful API服务，并实现/hello接口，该接口会返回“Hello World”字符串。</li>\n<li>思考一下，RESTful API这种API风格是否能够满足你当前的项目需要，如果不满足，原因是什么？</li>\n</ol><p>期待在留言区看到你的思考和答案，也欢迎和我一起探讨关于RESTful API相关的问题，我们下一讲见！</p>","neighbors":{"left":{"article_title":"11 | 设计模式：Go常用设计模式概述","id":386238},"right":{"article_title":"13 | API 风格（下）：RPC API介绍","id":387602}},"comments":[{"had_liked":false,"id":300372,"user_name":"管清麟","can_delete":false,"product_type":"c1","uid":1198013,"ip_address":"","ucode":"7CA1651D0DE257","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/bd/5c34df95.jpg","comment_is_top":false,"comment_ctime":1625129896,"is_pvip":false,"replies":[{"id":"108876","content":"业界No.1 没有之一","user_name":"作者回复","user_name_real":"CK1.0","uid":"1167883","ctime":1625147074,"ip_address":"","comment_id":300372,"utype":1}],"discussion_count":2,"race_medal":0,"score":"169128854440","product_id":100079601,"comment_content":"我觉得老师可以专门开个gin的专栏，看了一下iam源码写的真好。","like_count":40,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522718,"discussion_content":"业界No.1 没有之一","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625147074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1856981,"avatar":"","nickname":"互联网砖瓦匠","note":"","ucode":"7A70CFADCBEEC4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589129,"discussion_content":"自信源于实力。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664437380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300026,"user_name":"h","can_delete":false,"product_type":"c1","uid":2009498,"ip_address":"","ucode":"47893B5F8913B4","user_header":"https://static001.geekbang.org/account/avatar/00/1e/a9/9a/5df6cc22.jpg","comment_is_top":false,"comment_ctime":1624958154,"is_pvip":false,"replies":[{"id":"108967","content":"显示组用户：GET &#47;groups&#47;:gid<br>添加组用户：POST &#47;groups&#47;:gid&#47;users&#47;:uid<br>删除组用户：DELETE &#47;groups&#47;:gid&#47;users?uids=1,2,3<br>&#47;groups&#47;:gid&#47;users&#47;:uid 这个是其实2层资源嵌套。<br><br>这样设计原因是：符合现实世界的分层关系，逻辑更合理<br>","user_name":"作者回复","user_name_real":"CK1.0","uid":"1167883","ctime":1625390603,"ip_address":"","comment_id":300026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23099794634","product_id":100079601,"comment_content":"```避免层级过深的 URI。超过 2 层的资源嵌套会很乱，建议将其他资源转化为?参数，<br>比如：<br>&#47;schools&#47;tsinghua&#47;classes&#47;rooma&#47;students&#47;zhang # 不推荐<br>&#47;students?school=qinghua&amp;class=rooma # 推荐```<br>老师这句话，我想起来了我一个接口，是和用户组相关的。<br>我有一个组的接口，它本身有自己的增删查改等几个标准的接口<br>组表和用户表是个多对多关系，我要写三个接口，分别是：显示组用户，添加组用户，删除组用户。<br>没看这篇文章之前我写成了 get &#47;group&#47;user&#47;:uid  post &#47;group&#47;user&#47;:uid  delete &#47;group&#47;user&#47;:uid 并且还分别添加了groupid参数，看完老师说的层级过深那段话之后觉得我以前弄的确实有问题，思考之后新的想法如下：<br>显示组用户应该用 get &#47;group&#47;:gid?fields=user来显示组详情，这里可以通过你说的过滤功能只要显示用户，组其他字段不显示。<br>添加组用户和删除组用户好像正常情况来讲都是put &#47;group&#47;:gid  就是修改组的那个接口，但是仔细一想，增加用户和删除用户都用 put &#47;group&#47;:gid有点奇怪，而且没办法区分删除还是增加，或者把在后面把现在所有组列出来，比如现在组有用户1,2 增加用户3就是  put &#47;group&#47;:gid?users=1,2,3 ， 假如现在有用户1，2，3，删除3就是 put &#47;group&#47;:gid?users=1,2 <br>其实不止组，很多有外键关系的好像都存在我这个情况，比如作者表和书籍表，作者表和书籍表有自己的增删查改，那如果我要 查看某作者所有书籍，增加作者一本新书，删除作者一本书<br>其实说了这么多 就是想问下老师  显示组用户，添加组用户，删除组用户这三个例子你觉得该怎么设计接口，能指教一下如果是你会怎么设计这三个接口以及原因吗？","like_count":5,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522618,"discussion_content":"显示组用户：GET /groups/:gid\n添加组用户：POST /groups/:gid/users/:uid\n删除组用户：DELETE /groups/:gid/users?uids=1,2,3\n/groups/:gid/users/:uid 这个是其实2层资源嵌套。\n\n这样设计原因是：符合现实世界的分层关系，逻辑更合理\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625390603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298786,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1624326212,"is_pvip":false,"replies":[{"id":"108394","content":"是的，可以将这些动词抽象成一个属性","user_name":"作者回复","user_name_real":"CK1.0","uid":"1167883","ctime":1624356196,"ip_address":"","comment_id":298786,"utype":1}],"discussion_count":5,"race_medal":0,"score":"18804195396","product_id":100079601,"comment_content":"在过去的经验中，RESTful API对于动词性API不能很好的work，比如说修改密码，重置密码等，很难通过URL和HTTP方法表征出来。<br>但是对于Github，豆瓣等资源性API，大量的都是资源获取与删除，就特别适合RESTful。","like_count":4,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522241,"discussion_content":"是的，可以将这些动词抽象成一个属性","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624356196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155646,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","nickname":"ppd0705","note":"","ucode":"EB63D4E3FD1E9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383103,"discussion_content":"感觉设置成属性，后端路由不好弄吧？比如本来有一个API： POST /users/:username, 现在加一个使用户禁用的API: POST /users/:username?active=false, 这两个在路由里面不会区分","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1625905549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1187021,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1c/cd/8d552516.jpg","nickname":"Gojustforfun","note":"","ucode":"7513A40F27344F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380086,"discussion_content":"确实RESTful API对动词性API不友好，请问你们实践中是如何搞的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624336150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1200704,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","nickname":"pedro","note":"","ucode":"F40C839DDFD599","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1187021,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1c/cd/8d552516.jpg","nickname":"Gojustforfun","note":"","ucode":"7513A40F27344F","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":380102,"discussion_content":"直接动词性URL，比如重置密码就 password/reset，RESTful只是指导，并不是硬标准。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1624341567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380086,"ip_address":""},"score":380102,"extra":""},{"author":{"id":1187021,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1c/cd/8d552516.jpg","nickname":"Gojustforfun","note":"","ucode":"7513A40F27344F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1200704,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","nickname":"pedro","note":"","ucode":"F40C839DDFD599","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380307,"discussion_content":"感谢回复","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624433763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380102,"ip_address":""},"score":380307,"extra":""}]}]},{"had_liked":false,"id":298778,"user_name":"cxn","can_delete":false,"product_type":"c1","uid":1246000,"ip_address":"","ucode":"4AD33945DBB237","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/30/7b658349.jpg","comment_is_top":false,"comment_ctime":1624324742,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"14509226630","product_id":100079601,"comment_content":"URI中使用_踩过坑,谷歌业务中URI中不能出现_","like_count":3,"discussions":[{"author":{"id":1975831,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/rSzzqGwHcvhwPejiaPsCY9XBX7ib7zTxJ6cUDORdhGIakX8dTPVsz6ibud5ec1FeWQGTseF2TPRECCjky5JMlHvDg/132","nickname":"Struggle~honor","note":"","ucode":"EBC6DFC6CF0973","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413091,"discussion_content":"不能用_  url还是用-多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636381076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397307,"discussion_content":"能够举例说一下，踩的是什么坑吗？ 同学。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632583887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2640347,"avatar":"https://static001.geekbang.org/account/avatar/00/28/49/db/078c24ec.jpg","nickname":"🌱 机器猫 Go！","note":"","ucode":"6B577864EADDCE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380292,"discussion_content":"redirect_url ? 记得 好像有个规定这样的吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624429283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1246000,"avatar":"https://static001.geekbang.org/account/avatar/00/13/03/30/7b658349.jpg","nickname":"cxn","note":"","ucode":"4AD33945DBB237","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2640347,"avatar":"https://static001.geekbang.org/account/avatar/00/28/49/db/078c24ec.jpg","nickname":"🌱 机器猫 Go！","note":"","ucode":"6B577864EADDCE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388668,"discussion_content":"是滴","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628903735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380292,"ip_address":""},"score":388668,"extra":""}]}]},{"had_liked":false,"id":305189,"user_name":"blackpiglet","can_delete":false,"product_type":"c1","uid":1032928,"ip_address":"","ucode":"58AA8329C91767","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/e0/7188aa0a.jpg","comment_is_top":false,"comment_ctime":1627872049,"is_pvip":false,"replies":[{"id":"110642","content":"大体不差","user_name":"作者回复","user_name_real":"CK1.0","uid":"1167883","ctime":1628165826,"ip_address":"","comment_id":305189,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10217806641","product_id":100079601,"comment_content":"感觉GraphQL API会比较适合接口变动比较频繁的开发环境，这种API设计看起来基本不用考虑版本兼容的问题，不知道在实际的使用场景中，是不是基于这个原因选择GraphQL，放弃RESTFul的。","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524309,"discussion_content":"大体不差","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628165826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298931,"user_name":"","can_delete":false,"product_type":"c1","uid":1916093,"ip_address":"","ucode":"DD2D171393F828","user_header":"https://static001.geekbang.org/account/avatar/00/1d/3c/bd/ea0b59f6.jpg","comment_is_top":false,"comment_ctime":1624379094,"is_pvip":false,"replies":[{"id":"108645","content":"选择GET: &#47;data?order=createdAt,desc。<br><br>前后端分离的时候，尽量设计的通用些。甚至可以不考虑前端。<br><br>前端需要的参数，是接口返回参数的一个子集。","user_name":"作者回复","user_name_real":"CK1.0","uid":"1167883","ctime":1624710222,"ip_address":"","comment_id":298931,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10214313686","product_id":100079601,"comment_content":"像RESTful 中 对某个资源的获取 api 中，针对某个特定资源的获取是尽量精简还是需要详细？<br>如 需求是 获取最近十条的最新数据<br>应该是 GET: &#47;data?order=createdAt,desc <br>还是使用 GET: &#47;last10data <br>像在 前后端分离的埸景下<br>是尽量希望不要暴露太多细节给前端好<br>还是尽量提供更多的参数细节可让前端调用好？","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522281,"discussion_content":"选择GET: /data?order=createdAt,desc。\n\n前后端分离的时候，尽量设计的通用些。甚至可以不考虑前端。\n\n前端需要的参数，是接口返回参数的一个子集。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624710222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2640347,"avatar":"https://static001.geekbang.org/account/avatar/00/28/49/db/078c24ec.jpg","nickname":"🌱 机器猫 Go！","note":"","ucode":"6B577864EADDCE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380291,"discussion_content":"具体看你业务了，要是参数可以被脚本猜到或者构建的，建议后端验证。 比如传员工账号，会返回员工信息。我们这边避免了 req 的参数。但是有些 就需要传一下。具体还是根据业务来。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1624429240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327672,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1640227893,"is_pvip":false,"replies":[{"id":"119712","content":"&#47;video&#47;12345.mp4?enabled=false<br><br>或者：<br><br>&#47;video&#47;:video&#47;disable","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1640826488,"ip_address":"","comment_id":327672,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5935195189","product_id":100079601,"comment_content":"老师，再请教一下, 关于动词性接口  “是的，可以将这些动词抽象成一个属性”<br>这里 抽象为属性是什么意思。<br>比如 有一个视频  &#47;video&#47;12345.mp4 , 现在要提供一个 禁播的操作（非删除），该如何操作。<br>辛苦老师<br>","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542658,"discussion_content":"/video/12345.mp4?enabled=false\n\n或者：\n\n/video/:video/disable","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640826489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306003,"user_name":"Sch0ng","can_delete":false,"product_type":"c1","uid":1145554,"ip_address":"","ucode":"73F6113931B1AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg","comment_is_top":false,"comment_ctime":1628268028,"is_pvip":false,"replies":[{"id":"110904","content":"总结很到位！","user_name":"作者回复","user_name_real":"CK1.0","uid":"1167883","ctime":1628524953,"ip_address":"","comment_id":306003,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5923235324","product_id":100079601,"comment_content":"RESTful API，符合REST风格的API。<br>对比传统API风格的好处：简单、低耦合、轻量、自解释、无状态。","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524591,"discussion_content":"总结很到位！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628524953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304550,"user_name":"先听","can_delete":false,"product_type":"c1","uid":1151409,"ip_address":"","ucode":"82D8DA7A2FEB4B","user_header":"https://static001.geekbang.org/account/avatar/00/11/91/b1/fb117c21.jpg","comment_is_top":false,"comment_ctime":1627476340,"is_pvip":false,"replies":[{"id":"110212","content":"可以深度copy，具体你可以参考下gin的dump中间件是如何实现打印request.Body的：https:&#47;&#47;github.com&#47;tpkeeper&#47;gin-dump<br><br>","user_name":"作者回复","user_name_real":"CK1.0","uid":"1167883","ctime":1627597520,"ip_address":"","comment_id":304550,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5922443636","product_id":100079601,"comment_content":"request.Body只能读取一次。 有没有比较优雅的解决办法呢？ 网上查到的都是读取后再手动set回去","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524080,"discussion_content":"可以深度copy，具体你可以参考下gin的dump中间件是如何实现打印request.Body的：https://github.com/tpkeeper/gin-dump\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627597520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1151409,"avatar":"https://static001.geekbang.org/account/avatar/00/11/91/b1/fb117c21.jpg","nickname":"先听","note":"","ucode":"82D8DA7A2FEB4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388796,"discussion_content":"谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628957483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304079,"user_name":"罗峰","can_delete":false,"product_type":"c1","uid":1218501,"ip_address":"","ucode":"5F3D6AF8F28322","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/c5/84491beb.jpg","comment_is_top":false,"comment_ctime":1627223145,"is_pvip":false,"replies":[{"id":"110138","content":"容器化部署，水平扩容","user_name":"作者回复","user_name_real":"CK1.0","uid":"1167883","ctime":1627381740,"ip_address":"","comment_id":304079,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5922190441","product_id":100079601,"comment_content":"先做个伸手党，iam如何支持流量暴增这种情况，或者说如果提高负载能力","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523925,"discussion_content":"容器化部署，水平扩容","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627381740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2654999,"avatar":"https://static001.geekbang.org/account/avatar/00/28/83/17/df99b53d.jpg","nickname":"随风而过","note":"","ucode":"FFD17BAA3B2312","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390315,"discussion_content":"后台接口服务分发，做负载均衡，接口做相应的限流","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629774470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299293,"user_name":"Nio","can_delete":false,"product_type":"c1","uid":1529642,"ip_address":"","ucode":"A1B8D3C01FB937","user_header":"https://static001.geekbang.org/account/avatar/00/17/57/2a/c6c95f37.jpg","comment_is_top":false,"comment_ctime":1624547141,"is_pvip":true,"replies":[{"id":"108629","content":"可以试试gorm的Joins方法。","user_name":"作者回复","user_name_real":"CK1.0","uid":"1167883","ctime":1624707762,"ip_address":"","comment_id":299293,"utype":1}],"discussion_count":1,"race_medal":4,"score":"5919514437","product_id":100079601,"comment_content":"如果比较复杂一点的查询，比如需要join表的情况，如何做扩展比较好呢？","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522390,"discussion_content":"可以试试gorm的Joins方法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624707762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358185,"user_name":"穿山乙","can_delete":false,"product_type":"c1","uid":2127125,"ip_address":"广东","ucode":"4C3078289D5596","user_header":"https://static001.geekbang.org/account/avatar/00/20/75/15/7b22b6c1.jpg","comment_is_top":false,"comment_ctime":1664011231,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1664011231","product_id":100079601,"comment_content":"感觉平时开发不是特别遵守rest规范，基本上通了就行","like_count":0},{"had_liked":false,"id":346503,"user_name":"Geek_e4ce15","can_delete":false,"product_type":"c1","uid":2997112,"ip_address":"","ucode":"32CD43A7D86FE3","user_header":"","comment_is_top":false,"comment_ctime":1653203914,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653203914","product_id":100079601,"comment_content":"一直没有想明白  初期部署的iam到现在有什么用呢 一直是理论也米有涉及到跟iam有关的 除了目录结构","like_count":0},{"had_liked":false,"id":343026,"user_name":"👻","can_delete":false,"product_type":"c1","uid":1227789,"ip_address":"","ucode":"1648C82AC73C1D","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/0d/e65ca230.jpg","comment_is_top":false,"comment_ctime":1650599747,"is_pvip":false,"replies":[{"id":"125517","content":"其实工作量没有增加多少。但是会给后续的接口维护，调用带来很多易用性的提升","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1651077817,"ip_address":"","comment_id":343026,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1650599747","product_id":100079601,"comment_content":"restful的写法好看是好看  但是说实话实用性不好   徒增工作量","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568208,"discussion_content":"其实工作量没有增加多少。但是会给后续的接口维护，调用带来很多易用性的提升","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651077817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2725689,"avatar":"https://static001.geekbang.org/account/avatar/00/29/97/39/1f5c6350.jpg","nickname":"朱元彬🗿","note":"","ucode":"9CBD43225EE65B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582325,"discussion_content":"现在开发周期已经短到抽点时间设计下RESTful API都没有了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659368606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342497,"user_name":"千锤百炼领悟之极限","can_delete":false,"product_type":"c1","uid":1744257,"ip_address":"","ucode":"224B5CF2101716","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/81/d748b7eb.jpg","comment_is_top":false,"comment_ctime":1650291136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650291136","product_id":100079601,"comment_content":"&#47;** <br> * http restful 接口 &#47;hello 打印Hello World<br> * 运行 go run hello_world.go<br> * 访问 curl http:&#47;&#47;localhost:50052&#47;hello<br>*&#47;<br>package main<br><br>&#47;&#47; 引入代码依赖<br>import (<br>    &quot;log&quot;<br>    &quot;net&#47;http&quot;<br>)<br><br>&#47;&#47; 启动http服务<br>func main(){<br>    http.HandleFunc(&quot;&#47;hello&quot;, hello)<br>    log.Println(&quot;Starting http server ...&quot;)<br>    log.Fatal(http.ListenAndServe(&quot;:50052&quot;, nil))<br>}<br><br>&#47;&#47; 打印Hello World<br>func hello(w http.ResponseWriter, r *http.Request){<br>    w.Write([]byte(&quot;Hello World&quot;))<br>}","like_count":0},{"had_liked":false,"id":342321,"user_name":"何长杰Atom","can_delete":false,"product_type":"c1","uid":1202498,"ip_address":"","ucode":"C36A80F33FF2F7","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/42/9f0c7fe4.jpg","comment_is_top":false,"comment_ctime":1650189183,"is_pvip":false,"replies":[{"id":"125526","content":"幂等性是指前后两次执行的效果是一样的。<br><br>接口幂等性，能提高接口的安全和可重试性。<br><br>非幂等性的接口会带来以下问题：<br>1. 请求失败，再次请求，可能会重复创建资源，这样上一次的资源创建爱你就变成了一个脏数据<br>2. 以为前后2次执行结果不一样，就导致这个接口失败后，不能重试","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1651078310,"ip_address":"","comment_id":342321,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650189183","product_id":100079601,"comment_content":"老师，关于接口的冥等性，一直不太理解其内涵，比如：<br>POST不是冥等的，网上说会N次调用会有N个资源创建，但如果不允许重复也不会创建N个资源。<br>这里说的资源的状态改变效果该怎么理解？<br>还有谈论的冥等的目的是啥？","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568217,"discussion_content":"幂等性是指前后两次执行的效果是一样的。\n\n接口幂等性，能提高接口的安全和可重试性。\n\n非幂等性的接口会带来以下问题：\n1. 请求失败，再次请求，可能会重复创建资源，这样上一次的资源创建爱你就变成了一个脏数据\n2. 以为前后2次执行结果不一样，就导致这个接口失败后，不能重试","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651078310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338543,"user_name":"Geek_6bdb4e","can_delete":false,"product_type":"c1","uid":2720810,"ip_address":"","ucode":"2953D400AA5385","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","comment_is_top":false,"comment_ctime":1647567036,"is_pvip":true,"replies":[{"id":"125563","content":"是的。<br><br>因为DELETE不能传入多个资源，所以如果是批量删除，需要传入多个资源的时候，可以考虑使用POST，将资源列表放在body中。","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1651080416,"ip_address":"","comment_id":338543,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1647567036","product_id":100079601,"comment_content":"想问一下如何理解“直接使用 POST 方式来批量删除，body 中传入需要删除的资源列表”这句话呢，我的理解POST是用来资源注册，也就是增删改查中的增，这个是在body中加入待删除的资源列表，然后内部代码处理这个逻辑吗，也就是其实内部是删除的逻辑？","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568260,"discussion_content":"是的。\n\n因为DELETE不能传入多个资源，所以如果是批量删除，需要传入多个资源的时候，可以考虑使用POST，将资源列表放在body中。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651080417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2184057,"avatar":"https://static001.geekbang.org/account/avatar/00/21/53/79/327ef30e.jpg","nickname":"sugar","note":"","ucode":"491906283FC13B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577204,"discussion_content":"DELETE也是可以使用 body的，只是这样不 restful","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655969906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335294,"user_name":"无为","can_delete":false,"product_type":"c1","uid":1252164,"ip_address":"","ucode":"81D7AF5E1FDD30","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/44/82acaafc.jpg","comment_is_top":false,"comment_ctime":1645443860,"is_pvip":true,"replies":[{"id":"123440","content":"可以这么搞","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1647039076,"ip_address":"","comment_id":335294,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1645443860","product_id":100079601,"comment_content":"老师, 有的时候一个请求不只是单纯某一种资源, 还需要一些关联资源, 这个时候怎么处理比较好?<br><br>返回结果通过参数有针对性的添加更多的信息? ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555700,"discussion_content":"可以这么搞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647039076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335293,"user_name":"无为","can_delete":false,"product_type":"c1","uid":1252164,"ip_address":"","ucode":"81D7AF5E1FDD30","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/44/82acaafc.jpg","comment_is_top":false,"comment_ctime":1645443825,"is_pvip":true,"replies":[{"id":"123439","content":"是的，可以这么搞","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1647039066,"ip_address":"","comment_id":335293,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1645443825","product_id":100079601,"comment_content":"老师, 有的时候一个请求不只是单纯某一种资源, 还需要一些关联资源, 这个时候怎么处理比较好?<br><br>返回结果通过参数有针对性的添加更多的信息? ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555699,"discussion_content":"是的，可以这么搞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647039067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330158,"user_name":"陈晓涛","can_delete":false,"product_type":"c1","uid":1588873,"ip_address":"","ucode":"E80D318348CA47","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/89/ccc2ebd9.jpg","comment_is_top":false,"comment_ctime":1641820918,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641820918","product_id":100079601,"comment_content":"涉及到敏感信息的Get请求，比如查询用户信息，就算敏感信息（例如手机号码已脱敏），在安全测试也是建议改用Post请求，因为请求的唯一标识一般会携带在url上。","like_count":0},{"had_liked":false,"id":329760,"user_name":"兔嘟嘟","can_delete":false,"product_type":"c1","uid":2028811,"ip_address":"","ucode":"5A9042B4C7670C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","comment_is_top":false,"comment_ctime":1641527871,"is_pvip":false,"replies":[{"id":"120956","content":"DELETE 不能携带BODY的","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1642434798,"ip_address":"","comment_id":329760,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1641527871","product_id":100079601,"comment_content":"请问老师为什么说批量删除可以用POST+body传入删除的资源列表，DELETE+body不行吗","like_count":0,"discussions":[{"author":{"id":1856849,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/55/51/c7bffc64.jpg","nickname":"Andrew","note":"","ucode":"B1598E1E447EC6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573444,"discussion_content":"DELETE好像也能传入Request Body","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1653434716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546859,"discussion_content":"DELETE 不能携带BODY的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642434798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2184057,"avatar":"https://static001.geekbang.org/account/avatar/00/21/53/79/327ef30e.jpg","nickname":"sugar","note":"","ucode":"491906283FC13B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":577205,"discussion_content":"DELETE可以携带BODY的，不只delete，get还都可以","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655969986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":546859,"ip_address":""},"score":577205,"extra":""}]}]},{"had_liked":false,"id":327671,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1640227753,"is_pvip":false,"replies":[{"id":"119711","content":"如果动词属于某一个资源的操作，那么可以将这个动词转变成这个资源的一个属性。比如禁用用户，可以这么来搞：&#47;v1&#47;users?enabled=false。这样，就通过设置user REST资源的enabled属性为false，来禁用了用户。<br><br>如果动词不属于一个REST资源，例如登录。那么可以直接新增接口：&#47;login。这种虽然不符合REST的规范，但也是可以接受的。","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1640826430,"ip_address":"","comment_id":327671,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1640227753","product_id":100079601,"comment_content":"老师 再请教一下 关于动词性的接口，  “是的，可以将这些动词抽象成一个属性”","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542657,"discussion_content":"如果动词属于某一个资源的操作，那么可以将这个动词转变成这个资源的一个属性。比如禁用用户，可以这么来搞：/v1/users?enabled=false。这样，就通过设置user REST资源的enabled属性为false，来禁用了用户。\n\n如果动词不属于一个REST资源，例如登录。那么可以直接新增接口：/login。这种虽然不符合REST的规范，但也是可以接受的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640826430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":542662,"discussion_content":"明白了， 感谢老师解答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640826586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":542657,"ip_address":""},"score":542662,"extra":""}]}]},{"had_liked":false,"id":327367,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1640084040,"is_pvip":false,"replies":[{"id":"119716","content":"我感觉腾讯阿里这么搞其实不是最优雅的方式。之所以，这么搞可能一开始就不规范，后面为了向后兼容，就一直保留这种格式。<br><br>但是这个地方影响不大，因为规范的接口便于用户理解，但如果接口一直保持一种规范，并且用户认知度普遍比较高，其实理解成本也是很低的。","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1640827030,"ip_address":"","comment_id":327367,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1640084040","product_id":100079601,"comment_content":"老师，讲的太好了，<br> 想请教一下， 腾讯云和阿里云的 对外API都不是rest的， 基本是一个产品一个域名，后面带一个 action， 不同的action参数有相当于是不同的接口了。 这算是什么风格， 两个行业标杆这么做的好处是什么，","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542669,"discussion_content":"我感觉腾讯阿里这么搞其实不是最优雅的方式。之所以，这么搞可能一开始就不规范，后面为了向后兼容，就一直保留这种格式。\n\n但是这个地方影响不大，因为规范的接口便于用户理解，但如果接口一直保持一种规范，并且用户认知度普遍比较高，其实理解成本也是很低的。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640827030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":542892,"discussion_content":"原来如此， 感谢老师解答","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640876119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":542669,"ip_address":""},"score":542892,"extra":""}]}]},{"had_liked":false,"id":323291,"user_name":"dairongpeng","can_delete":false,"product_type":"c1","uid":1624416,"ip_address":"","ucode":"CDC889B7ECB53E","user_header":"https://static001.geekbang.org/account/avatar/00/18/c9/60/2f7eb4b5.jpg","comment_is_top":false,"comment_ctime":1637821439,"is_pvip":false,"replies":[{"id":"117692","content":"这总情况下有2种办法：<br>1. 限制参数个数<br>2. 如果确实需要很长的参数，可以改成POST","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1638362945,"ip_address":"","comment_id":323291,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637821439","product_id":100079601,"comment_content":"get请求参数太多的话，通过?x=y&amp;a=b...这种就会有问题，拼接的过长会超过url的长度限制。这种情况，即使是资源获取的接口，我也还是设计成post请求","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535175,"discussion_content":"这总情况下有2种办法：\n1. 限制参数个数\n2. 如果确实需要很长的参数，可以改成POST","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638362945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323153,"user_name":"liaomars","can_delete":false,"product_type":"c1","uid":2104856,"ip_address":"","ucode":"4FCA97EE9FB57D","user_header":"https://static001.geekbang.org/account/avatar/00/20/1e/18/9d1f1439.jpg","comment_is_top":false,"comment_ctime":1637744877,"is_pvip":false,"replies":[{"id":"117677","content":"PUT一般用来更新RESTful资源","user_name":"作者回复","user_name_real":"编辑","uid":"1167883","ctime":1638361944,"ip_address":"","comment_id":323153,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637744877","product_id":100079601,"comment_content":"一直没有Get 到 RESTful api风格里的PUT，在实际开发过程中这个被POST代替了。","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"孔令飞","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535156,"discussion_content":"PUT一般用来更新RESTful资源","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638361944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}