{"id":769614,"title":"02｜怎样标注类型？","content":"","comments":[{"had_liked":false,"id":389996,"user_name":"SVIPWLM","can_delete":false,"product_type":"c3","uid":1677201,"ip_address":"广东","ucode":"FE47323386925D","user_header":"https://static001.geekbang.org/account/avatar/00/19/97/91/93a76cce.jpg","comment_is_top":false,"comment_ctime":1714048864,"is_pvip":false,"replies":[{"id":141878,"content":"赞的。满分答案。事实上你还考虑到了一些边界情况的处理，比预期的答案还要好。👍++","user_name":"作者回复","user_name_real":"编辑","uid":1521669,"ctime":1714121673,"ip_address":"河南","comment_id":389996,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100761001,"comment_content":"给MyTest.ts尽量标注全部类型，并通过检查解构结果result是否为真值，避免将undefined分配给{ name: string, age: number }的类型\n\nfunction getInputSomething(): string {\n    return &#39;1341534&#39;;\n}\n\nfunction loadFromDatabase(id: number): { id: number, name: string, age: number } | undefined {\n    if (isNaN(id)) return;\n\n    &#47;&#47; .... load from database\n    return {\n        id,\n        name: &#39;张三&#39;,\n        age: 25\n    };\n}\n\nlet s: string = getInputSomething();\nlet id: number = parseInt(s);\n\nlet result = loadFromDatabase(id);\n\nif (result) {\n    let { name, age } = result;\n    console.log(name, age);\n} else {\n    console.log(&#39;Data not found&#39;);\n}","like_count":1,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":643199,"discussion_content":"赞的。满分答案。事实上你还考虑到了一些边界情况的处理，比预期的答案还要好。👍++","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1714121674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河南","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1159983,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b3/2f/d08a1363.jpg","nickname":"聪少 Jeff","note":"","ucode":"C791ACA9B47679","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653297,"discussion_content":"感谢分享，学习到了，Thanks！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1730623322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":391283,"user_name":"Geek_64953b","can_delete":false,"product_type":"c3","uid":3903552,"ip_address":"北京","ucode":"626BC8250DB9A2","user_header":"","comment_is_top":false,"comment_ctime":1717813344,"is_pvip":false,"replies":[{"id":142297,"content":"会的。在靠后一些的章节里面，会有不少的ts实战内容。但在前期的章节，会偏向类型编程。：）","user_name":"作者回复","user_name_real":"编辑","uid":1521669,"ctime":1717824934,"ip_address":"江苏","comment_id":391283,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100761001,"comment_content":"老师会有ts实战嘛","like_count":0,"discussions":[{"author":{"id":1521669,"avatar":"https://static001.geekbang.org/account/avatar/00/17/38/05/7beecd5d.jpg","nickname":"Aiming","note":"","ucode":"66292B32F9960A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646380,"discussion_content":"会的。在靠后一些的章节里面，会有不少的ts实战内容。但在前期的章节，会偏向类型编程。：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717824934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3903552,"avatar":"","nickname":"Geek_64953b","note":"","ucode":"626BC8250DB9A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":646381,"discussion_content":"好的周老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1717825149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":390169,"user_name":"Neu","can_delete":false,"product_type":"c3","uid":1901854,"ip_address":"北京","ucode":"48F8C312B94999","user_header":"https://static001.geekbang.org/account/avatar/00/1d/05/1e/02245834.jpg","comment_is_top":false,"comment_ctime":1714548029,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":2,"score":2,"product_id":100761001,"comment_content":"自选重点：\n有名字的地方，可以标注类型；有表达式的地方，可以使用类型断言\n原则\n界面（函数签名）上要清晰标注\n能不标注的不要标注，依赖类型推断\n能用const的地方用const\n尽量不使用any","like_count":0}]}