{"id":225554,"title":"结课测试｜这些MySQL知识你都掌握了吗？","content":"<p>你好，我是林晓斌。</p><p>《MySQL实战45讲》这门课程已经全部结束了。我给你准备了一个结课小测试，来帮助你检验自己的学习效果。</p><p>这套测试题共有 20 道题目，包括3道单选题和17道多选题，满分 100 分，系统自动评分。</p><p>还等什么，点击下面按钮开始测试吧！</p><p><a href=\"http://time.geekbang.org/quiz/intro?act_id=109&exam_id=232\"><img src=\"https://static001.geekbang.org/resource/image/28/a4/28d1be62669b4f3cc01c36466bf811a4.png?wh=1142*201\" alt=\"\"></a></p><!-- [[[read_end]]] -->","comments":[{"had_liked":false,"id":232533,"user_name":"ping","can_delete":false,"product_type":"c1","uid":1303688,"ip_address":"","ucode":"B60EF3B90D827E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJR5k5ThxFPZyew0UKNaq89utnIEQia2CiaxMOvacibGnbuZNpSiaaGTlRLWhmegxagELnIXfNveRxLfw/132","comment_is_top":false,"comment_ctime":1594029630,"is_pvip":false,"discussion_count":12,"race_medal":0,"score":"87493375550","product_id":100020801,"comment_content":"40分，发誓再刷一遍，我就是个假的DBA","like_count":21,"discussions":[{"author":{"id":2235026,"avatar":"","nickname":"三年丿","note":"","ucode":"DE80ED3FA6F4E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319215,"discussion_content":"20分路过，以后叫我ABD","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1603964548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1324314,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/1a/9fa38dc9.jpg","nickname":"子瞻","note":"","ucode":"5C26FF10934534","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2235026,"avatar":"","nickname":"三年丿","note":"","ucode":"DE80ED3FA6F4E6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327001,"discussion_content":"哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605713331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":319215,"ip_address":""},"score":327001,"extra":""},{"author":{"id":1110522,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/7x045Wg58RRz5Tl2SDd6tVmII34Yub4KupAAc3mMInBREsRmGzregkqMyTjKcmprgnznGusLGCScTCTvfxJPpg/132","nickname":"Geek_7bfa8b","note":"","ucode":"7ED7F2DE53C39B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2235026,"avatar":"","nickname":"三年丿","note":"","ucode":"DE80ED3FA6F4E6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384941,"discussion_content":"ABD你好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626828262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":319215,"ip_address":""},"score":384941,"extra":""}]},{"author":{"id":1324314,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/1a/9fa38dc9.jpg","nickname":"子瞻","note":"","ucode":"5C26FF10934534","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327002,"discussion_content":"你们都是DBA么，我做后端的看到后面有些感觉好深，顶不住了","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1605713363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809686,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/16/a2fb8136.jpg","nickname":"季某人","note":"","ucode":"1EEF2A58C3BD79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362679,"discussion_content":"15分的路过。。。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1617008067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2786848,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/86/20/1f1221f5.jpg","nickname":"听风","note":"","ucode":"EC2EB012E8DB6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584354,"discussion_content":"还以为50分很差了。 哈哈哈 必须要二刷了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660785681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"浙江"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1324863,"avatar":"https://static001.geekbang.org/account/avatar/00/14/37/3f/a9127a73.jpg","nickname":"KK","note":"","ucode":"FFC31A3FE3A285","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":571369,"discussion_content":"后端开发40分，我以为我是最菜的了。哈哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652186626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2560392,"avatar":"https://static001.geekbang.org/account/avatar/00/27/11/88/ccfa1192.jpg","nickname":"y","note":"","ucode":"BD4C2EE96F5C0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383338,"discussion_content":"假，很假😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626061599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"陌兮","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351145,"discussion_content":"同40分，好多都忘记了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614165602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2313972,"avatar":"","nickname":"IeaTea2333","note":"","ucode":"FA36616083322D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338947,"discussion_content":"同40分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609441585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1698291,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e9/f3/3bbdff7e.jpg","nickname":"雪候鸟","note":"","ucode":"3E7ED6605BC86E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314379,"discussion_content":"我20分，好几题还是蒙的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603154009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1061991,"avatar":"https://static001.geekbang.org/account/avatar/00/10/34/67/06a7f9be.jpg","nickname":"while (1)等;","note":"","ucode":"BAEC7258D65B69","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307617,"discussion_content":"我只得了10分，后面看前面忘，学渣一个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600698209,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295026,"user_name":"TANMIYOO","can_delete":false,"product_type":"c1","uid":1375256,"ip_address":"","ucode":"BC3556131D4D61","user_header":"https://static001.geekbang.org/account/avatar/00/14/fc/18/8e69f7cf.jpg","comment_is_top":false,"comment_ctime":1622188653,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"70341665389","product_id":100020801,"comment_content":"25分~我承认这里面还有赌的成分","like_count":17,"discussions":[{"author":{"id":1481979,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/fb/7fe6df5b.jpg","nickname":"陈卧虫","note":"","ucode":"44BB84712436AB","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589583,"discussion_content":"为了让你心理好受一点，我特意考了15分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665141350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"湖南"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208178,"user_name":"Geek_732d8f","can_delete":false,"product_type":"c1","uid":1697867,"ip_address":"","ucode":"3557FFBCBD683C","user_header":"","comment_is_top":false,"comment_ctime":1587293499,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"53126901051","product_id":100020801,"comment_content":"55分的差生飘过 ，得再刷一遍了","like_count":13,"discussions":[{"author":{"id":2445197,"avatar":"https://static001.geekbang.org/account/avatar/00/25/4f/8d/36311efc.jpg","nickname":"锟斤拷","note":"","ucode":"194F4082A2546A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371800,"discussion_content":"同款分数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619977026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214115,"user_name":"helpme","can_delete":false,"product_type":"c1","uid":1937679,"ip_address":"","ucode":"CDA4BA913B50FE","user_header":"","comment_is_top":false,"comment_ctime":1588661332,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"35948399700","product_id":100020801,"comment_content":"老师有个问题一直没明白，希望能解惑一下<br>假设有这么一个语句select * from t where a=1 and b=2，a=1有100W的数据，但a=1同时b=2只有一条，那么联合索引(a,b)和(b,a)有区别吗？（这里不考虑有a、b单独查询的情况）<br>实际执行起来两者都很快，但从树的查找来看，(a,b)应该比(b,a)多扫描了树上100W的节点吧？我的理解是找到a=1，然后一直往后遍历了所有的a=1的节点，取出其中b=2的节点，不知道是否是这样的？那是否是索引(b,a)更效率呢？<br>","like_count":8,"discussions":[{"author":{"id":1742868,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/JVOiclOoyFvgJHNXRgqB9RDyDueBHEP5lwATC47nFXRJibtK8ibU8phJPiav3BsPCUAssM1X82mnGtEe7bF91p39eA/132","nickname":"Geek_9d8be5","note":"","ucode":"20181C54A2C589","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282525,"discussion_content":"根据索引最左原则，是一起使用，你的那句多扫描100万就把索引分开理解了。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1592009046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2453551,"avatar":"","nickname":"Geek_b14b66","note":"","ucode":"0888A789BE3CAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1742868,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/JVOiclOoyFvgJHNXRgqB9RDyDueBHEP5lwATC47nFXRJibtK8ibU8phJPiav3BsPCUAssM1X82mnGtEe7bF91p39eA/132","nickname":"Geek_9d8be5","note":"","ucode":"20181C54A2C589","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356704,"discussion_content":"不是分开理解吧，而是因为存储的结构决定了扫描的顺序，就算是一起匹配的，也应该是先匹配到第一个的值，在第一个的基础上在匹配第二个的呀!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615648090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282525,"ip_address":""},"score":356704,"extra":""}]},{"author":{"id":1333649,"avatar":"https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg","nickname":"不吃辣👾","note":"","ucode":"B25E0725B5E85F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390586,"discussion_content":"ab会比ba慢，ab的索引树应该是一颗矮胖子，ba的索引树应该是高瘦子。ab接近数组结构，ba才接近一颗树。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629903358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1546379,"avatar":"https://static001.geekbang.org/account/avatar/00/17/98/8b/5ad6e1b5.jpg","nickname":"阵雨","note":"","ucode":"C926F33780D28B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312505,"discussion_content":"联合索引a和b是存储在一块的，不是先扫描a字段，然后在扫描b字段，你说的状态是索引在生成的时候做的事情，他需要确定索引放在那个位置","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602724236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2453551,"avatar":"","nickname":"Geek_b14b66","note":"","ucode":"0888A789BE3CAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1546379,"avatar":"https://static001.geekbang.org/account/avatar/00/17/98/8b/5ad6e1b5.jpg","nickname":"阵雨","note":"","ucode":"C926F33780D28B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356702,"discussion_content":"但是扫描也是按照存储的顺序扫描的呀!肯定是先按第一个匹配，在按后面的匹配呀!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615647956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":312505,"ip_address":""},"score":356702,"extra":""}]},{"author":{"id":1903708,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0c/5c/b03b2cc1.jpg","nickname":"Geek_db6a4b","note":"","ucode":"E5992D1CF088C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291519,"discussion_content":"联合索引是一个索引，两种情况都会扫描这一个索引。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594861378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397351,"avatar":"https://static001.geekbang.org/account/avatar/00/15/52/67/fcba0967.jpg","nickname":"zapup","note":"","ucode":"388D6BB5D7B137","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290308,"discussion_content":"谁在前，主要考虑谁更常用与查询、不重复占比如何","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594403451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207636,"user_name":"如月影","can_delete":false,"product_type":"c1","uid":1327450,"ip_address":"","ucode":"B91E4337EF483C","user_header":"https://static001.geekbang.org/account/avatar/00/14/41/5a/6988ac7a.jpg","comment_is_top":false,"comment_ctime":1587124741,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"27356928517","product_id":100020801,"comment_content":"很疑惑，一个事务执行部分语句后碰到死锁，如果死锁检测选择其作为回滚事务不是回滚整个事务吗","like_count":6,"discussions":[{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591287,"discussion_content":"很多答案都不严谨。。。kill线程的那个问题就是会导致回滚，kill query 才不会","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666435740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2235026,"avatar":"","nickname":"三年丿","note":"","ucode":"DE80ED3FA6F4E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319214,"discussion_content":"貌似不是所有的情况都会回滚全部吧,例如显示开启事务，执行到第三段SQL报错，那只是第三段执行无效而已，没有手动提交、回滚、断开连接的操作，整个事务是不受影响的，还能继续跑第四段，或者提交前面执行成功的语句","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603964509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1234783,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d7/5f/428a79e3.jpg","nickname":"Miles Shuai","note":"","ucode":"F15B504C88C97C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":240311,"discussion_content":"我也是这么认为的。如果是阻塞等待超时，会根据配置判断是否回滚。但是发生死锁时，肯定会回滚的。\n不知道第三题中 D选项 为啥不对？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587351470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342585,"user_name":"孙荣辛.py","can_delete":false,"product_type":"c1","uid":1117738,"ip_address":"","ucode":"70A9DCE005E7C4","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/2a/e6b443f0.jpg","comment_is_top":false,"comment_ctime":1650355703,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23125192183","product_id":100020801,"comment_content":"95分 没白学","like_count":5},{"had_liked":false,"id":208404,"user_name":"Miles Shuai","can_delete":false,"product_type":"c1","uid":1234783,"ip_address":"","ucode":"F15B504C88C97C","user_header":"https://static001.geekbang.org/account/avatar/00/12/d7/5f/428a79e3.jpg","comment_is_top":false,"comment_ctime":1587351521,"is_pvip":false,"replies":[{"id":"77957","content":"题目是问 回滚事务哦😆","user_name":"作者回复","comment_id":208404,"uid":"1264162","ip_address":"","utype":1,"ctime":1587400194,"user_name_real":"林晓斌"}],"discussion_count":2,"race_medal":0,"score":"23062188001","product_id":100020801,"comment_content":"第三题中 D选项 为啥不对？<br>如果是阻塞等待超时，会根据innodb_rollback_on_timeout配置判断是否回滚。<br>但是发生死锁时，肯定会回滚的。","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"林晓斌","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492450,"discussion_content":"题目是问 回滚事务哦😆","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587400194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1730626,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJvm1JYIDcS74s4cEYxA1PXMqjortVXEjUKyGQcPvibNJ4EAuksIa6uoHgr6G1yRqAM2KtP3yicKgTA/132","nickname":"小妖","note":"","ucode":"49C01DBFADF101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554304,"discussion_content":"同一事务中有sql执行出现异常肯定会回滚整个事务的，难道只回滚单一语句吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646308797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325793,"user_name":"小可","can_delete":false,"product_type":"c1","uid":1006735,"ip_address":"","ucode":"8834AF621FA67D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/8f/551b5624.jpg","comment_is_top":false,"comment_ctime":1639131304,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14524033192","product_id":100020801,"comment_content":"一刷30 o(╥﹏╥)o","like_count":3},{"had_liked":false,"id":336166,"user_name":"小妖","can_delete":false,"product_type":"c1","uid":1730626,"ip_address":"","ucode":"49C01DBFADF101","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJvm1JYIDcS74s4cEYxA1PXMqjortVXEjUKyGQcPvibNJ4EAuksIa6uoHgr6G1yRqAM2KtP3yicKgTA/132","comment_is_top":false,"comment_ctime":1645963551,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5940930847","product_id":100020801,"comment_content":"11题求解答，为什么我们在实际使用中，不写order by 都是按照id返回的呢","like_count":1},{"had_liked":false,"id":311323,"user_name":"大明猩","can_delete":false,"product_type":"c1","uid":1494622,"ip_address":"","ucode":"61D330B42AE3C4","user_header":"https://static001.geekbang.org/account/avatar/00/16/ce/5e/b103d538.jpg","comment_is_top":false,"comment_ctime":1631173492,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5926140788","product_id":100020801,"comment_content":"主从、权限那块儿内容没看，连做带蒙50分，确实好多知识点没记住","like_count":1},{"had_liked":false,"id":282659,"user_name":"郝静华","can_delete":false,"product_type":"c1","uid":2147064,"ip_address":"","ucode":"3061949546F84D","user_header":"https://static001.geekbang.org/account/avatar/00/20/c2/f8/fa471c6c.jpg","comment_is_top":false,"comment_ctime":1615354835,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5910322131","product_id":100020801,"comment_content":"我也是40，50分，虽然不是dba,看来还有好多知识点没彻底掌握","like_count":1},{"had_liked":false,"id":207386,"user_name":"孙志强","can_delete":false,"product_type":"c1","uid":1325997,"ip_address":"","ucode":"9C070F1E4EC6FF","user_header":"https://static001.geekbang.org/account/avatar/00/14/3b/ad/31193b83.jpg","comment_is_top":false,"comment_ctime":1587078928,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5882046224","product_id":100020801,"comment_content":"就答了50分","like_count":1},{"had_liked":false,"id":359664,"user_name":"wdg","can_delete":false,"product_type":"c1","uid":1627543,"ip_address":"上海","ucode":"CFA92922785EEE","user_header":"","comment_is_top":false,"comment_ctime":1665736799,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1665736799","product_id":100020801,"comment_content":"1刷20分后端，全网最菜了😭","like_count":0},{"had_liked":false,"id":358065,"user_name":"LWD","can_delete":false,"product_type":"c1","uid":1986739,"ip_address":"广东","ucode":"DDA444DB113C01","user_header":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","comment_is_top":false,"comment_ctime":1663868936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663868936","product_id":100020801,"comment_content":"第一刷 30；第二刷 55 第三刷 90；<br>知识已成体系，神功已练成","like_count":0},{"had_liked":false,"id":358039,"user_name":"董沛霖","can_delete":false,"product_type":"c1","uid":1460229,"ip_address":"广东","ucode":"D223C52555C57F","user_header":"https://static001.geekbang.org/account/avatar/00/16/48/05/2ef4b9fb.jpg","comment_is_top":false,"comment_ctime":1663841070,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663841070","product_id":100020801,"comment_content":"19 题 D 选项，mysql 8.0 不会默认按 group by 字段排序","like_count":0},{"had_liked":false,"id":354979,"user_name":"沉淀的梦想","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"浙江","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1660929260,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660929260","product_id":100020801,"comment_content":"第13题，“将一主两从架构升级到一主 10 从，可能会影响查询效率“ 为什么是正确的？理论上只会影响写入效率，和查询效率无关吧","like_count":0},{"had_liked":false,"id":354978,"user_name":"沉淀的梦想","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"浙江","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1660928676,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660928676","product_id":100020801,"comment_content":"第 11 题， “语句 select … order by rand() 一定内部排序” 为什么是正确的？这个很容易因为数据太多产生外部排序吧","like_count":0},{"had_liked":false,"id":351252,"user_name":"Tcl","can_delete":false,"product_type":"c1","uid":2924004,"ip_address":"","ucode":"D8B67BD2C26FE2","user_header":"https://static001.geekbang.org/account/avatar/00/2c/9d/e4/153652f9.jpg","comment_is_top":false,"comment_ctime":1657638754,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657638754","product_id":100020801,"comment_content":"一刷35 感觉就索引挺熟的，其他不咋地，以后再刷","like_count":0},{"had_liked":false,"id":347435,"user_name":"Geek_a206aa","can_delete":false,"product_type":"c1","uid":2524841,"ip_address":"","ucode":"E489AD4368C85D","user_header":"","comment_is_top":false,"comment_ctime":1654024637,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654024637","product_id":100020801,"comment_content":"一刷40。。。。","like_count":0},{"had_liked":false,"id":347310,"user_name":"花加技术","can_delete":false,"product_type":"c1","uid":1791022,"ip_address":"","ucode":"4C87B58C6BEFA1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q1s3tUoYFJfNq06tg7AsibySjRyJJcEsmwEklprrwHqrxYAovsCTTVIJOulxoOhydmWGmJYhDTlspSUIiaATZvtQ/132","comment_is_top":false,"comment_ctime":1653915918,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653915918","product_id":100020801,"comment_content":"45分，看来还需要再学习一遍。","like_count":0},{"had_liked":false,"id":341353,"user_name":"小八哥","can_delete":false,"product_type":"c1","uid":2062472,"ip_address":"","ucode":"CE08853995218E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqXGKRyFDH2ia15hV4PeRfgibgb1djXGNibmU4LlMUK5hlHkWpqBpwmEXJ0HBZ2nAN0doQiaGROA5GIhg/132","comment_is_top":false,"comment_ctime":1649562702,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649562702","product_id":100020801,"comment_content":"二刷40分，mysql对于开发来说是真的难","like_count":0},{"had_liked":false,"id":339629,"user_name":"唐村仕子","can_delete":false,"product_type":"c1","uid":1887981,"ip_address":"","ucode":"A1FD71018308F8","user_header":"https://static001.geekbang.org/account/avatar/00/1c/ce/ed/809190a1.jpg","comment_is_top":false,"comment_ctime":1648260431,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648260431","product_id":100020801,"comment_content":"多选题较难，会有漏选，","like_count":0},{"had_liked":false,"id":337734,"user_name":"Kino","can_delete":false,"product_type":"c1","uid":2923194,"ip_address":"","ucode":"1E0C5D4CB412EC","user_header":"https://static001.geekbang.org/account/avatar/00/2c/9a/ba/31f97d75.jpg","comment_is_top":false,"comment_ctime":1646997877,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1646997877","product_id":100020801,"comment_content":"想问一下这个适合没有接触过数据库现在想学的人？还是说自己要有基本的了解后再来看这个课程","like_count":0},{"had_liked":false,"id":336161,"user_name":"小妖","can_delete":false,"product_type":"c1","uid":1730626,"ip_address":"","ucode":"49C01DBFADF101","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJvm1JYIDcS74s4cEYxA1PXMqjortVXEjUKyGQcPvibNJ4EAuksIa6uoHgr6G1yRqAM2KtP3yicKgTA/132","comment_is_top":false,"comment_ctime":1645962736,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645962736","product_id":100020801,"comment_content":"第四题，D选项， lock talbe,并执行完成后，表锁应该是释放了，不应该会堵塞查询吧","like_count":0},{"had_liked":false,"id":329512,"user_name":"太空牛仔","can_delete":false,"product_type":"c1","uid":1227366,"ip_address":"","ucode":"0205635C3854AF","user_header":"https://static001.geekbang.org/account/avatar/00/12/ba/66/7d9f45e7.jpg","comment_is_top":false,"comment_ctime":1641381898,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1641381898","product_id":100020801,"comment_content":"40分 不及格 MySQL以后还是要坚持学习下去。<br>坚持学完了这门课程 突然有一种不舍的感觉","like_count":0},{"had_liked":false,"id":324505,"user_name":"陆止于此  海始于斯","can_delete":false,"product_type":"c1","uid":2027034,"ip_address":"","ucode":"8E294505A1FA6D","user_header":"https://static001.geekbang.org/account/avatar/00/1e/ee/1a/1fed8b61.jpg","comment_is_top":false,"comment_ctime":1638460830,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638460830","product_id":100020801,"comment_content":"一刷25分","like_count":0},{"had_liked":false,"id":322781,"user_name":"边界","can_delete":false,"product_type":"c1","uid":2832753,"ip_address":"","ucode":"79F0418180D1E9","user_header":"https://static001.geekbang.org/account/avatar/00/2b/39/71/da2d477e.jpg","comment_is_top":false,"comment_ctime":1637585782,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637585782","product_id":100020801,"comment_content":"看评论区好多四五十分的同学，35分的我表示心里没有那么难受了","like_count":0},{"had_liked":false,"id":322362,"user_name":"南宋x","can_delete":false,"product_type":"c1","uid":1022783,"ip_address":"","ucode":"E5E3DBDC7AE630","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/3f/d324d5a8.jpg","comment_is_top":false,"comment_ctime":1637319263,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637319263","product_id":100020801,"comment_content":"表中一字段数据中有存emoji 。用emoji作为模糊搜索的条件时，会把带emoji的所有数据搜出来","like_count":0},{"had_liked":false,"id":322246,"user_name":"自修","can_delete":false,"product_type":"c1","uid":2414664,"ip_address":"","ucode":"4108EF7191D580","user_header":"https://static001.geekbang.org/account/avatar/00/24/d8/48/bd3e0aaa.jpg","comment_is_top":false,"comment_ctime":1637261602,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637261602","product_id":100020801,"comment_content":"我对第 3 题 “以下哪些场景会导致事务回滚”，D 选项 “事务执行部分语句后，最新执行的语句碰到死锁，并被服务端终止执行” 做了测试，测试结论与题目解析不符，请问老师哪里有问题？<br><br>测试结论为：<br>对于 MySQL 5.7 和 8.0 的 InnoDB 引擎，死锁会回滚事务，等待锁超时和错误的 SQL  语句（SQL 语法错误，语句中的表、字段不存在）不会回滚事务。<br><br>测试记录：https:&#47;&#47;www.yuque.com&#47;docs&#47;share&#47;9dbb38f3-61d6-4f05-9c53-70d8247f5b68","like_count":0},{"had_liked":false,"id":315668,"user_name":"Lakstar","can_delete":false,"product_type":"c1","uid":1829000,"ip_address":"","ucode":"556E2D16BE8345","user_header":"https://static001.geekbang.org/account/avatar/00/1b/e8/88/55e33c9f.jpg","comment_is_top":false,"comment_ctime":1633940413,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633940413","product_id":100020801,"comment_content":"25分。。。。。。看来需要反复学习才行！！！","like_count":0},{"had_liked":false,"id":314944,"user_name":"波","can_delete":false,"product_type":"c1","uid":2718660,"ip_address":"","ucode":"031804DD389F9D","user_header":"https://static001.geekbang.org/account/avatar/00/29/7b/c4/6f781ca3.jpg","comment_is_top":false,"comment_ctime":1633602352,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633602352","product_id":100020801,"comment_content":"30分java后端, 有空再刷一遍,学到很多很多","like_count":0},{"had_liked":false,"id":303697,"user_name":"Java天下第一","can_delete":false,"product_type":"c1","uid":2619095,"ip_address":"","ucode":"FB17173A1DAA5C","user_header":"https://static001.geekbang.org/account/avatar/00/27/f6/d7/8d3e299c.jpg","comment_is_top":false,"comment_ctime":1626936654,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626936654","product_id":100020801,"comment_content":"50分的不及格差生路过","like_count":0},{"had_liked":false,"id":303488,"user_name":"Geek_7bfa8b","can_delete":false,"product_type":"c1","uid":1110522,"ip_address":"","ucode":"7ED7F2DE53C39B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/7x045Wg58RRz5Tl2SDd6tVmII34Yub4KupAAc3mMInBREsRmGzregkqMyTjKcmprgnznGusLGCScTCTvfxJPpg/132","comment_is_top":false,"comment_ctime":1626829105,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626829105","product_id":100020801,"comment_content":"我觉得我要刷10遍","like_count":0},{"had_liked":false,"id":300148,"user_name":"走走～ 停停","can_delete":false,"product_type":"c1","uid":1560646,"ip_address":"","ucode":"083B0027B2DEE9","user_header":"https://static001.geekbang.org/account/avatar/00/17/d0/46/2a4fec72.jpg","comment_is_top":false,"comment_ctime":1625021381,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1625021381","product_id":100020801,"comment_content":"25分，后端程序员，是不是很差劲啊","like_count":0,"discussions":[{"author":{"id":1194853,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3b/65/3a4fc8cf.jpg","nickname":"prepared","note":"","ucode":"00E54A5C7CDCBE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390336,"discussion_content":"25分+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629787633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297394,"user_name":"Edward Lee","can_delete":false,"product_type":"c1","uid":1228518,"ip_address":"","ucode":"156223F1D7E94A","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/e6/7808520d.jpg","comment_is_top":false,"comment_ctime":1623497461,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623497461","product_id":100020801,"comment_content":"35 分！<br>要开始第二次的修行，这次主要是实践。","like_count":0},{"had_liked":false,"id":292235,"user_name":"ub8","can_delete":false,"product_type":"c1","uid":1481811,"ip_address":"","ucode":"0D937C3EAEB781","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","comment_is_top":false,"comment_ctime":1620732138,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620732138","product_id":100020801,"comment_content":"第二遍刷~begin","like_count":0},{"had_liked":false,"id":292198,"user_name":"念你如昔","can_delete":false,"product_type":"c1","uid":1323531,"ip_address":"","ucode":"FCAD88AB57D084","user_header":"https://static001.geekbang.org/account/avatar/00/14/32/0b/981b4e93.jpg","comment_is_top":false,"comment_ctime":1620719191,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1620719191","product_id":100020801,"comment_content":"kill processlist id，不会回滚对应的事务吗？那杀长事务，不就是去innodb_trx表里面找到 processlist id去杀吗","like_count":0,"discussions":[{"author":{"id":2619095,"avatar":"https://static001.geekbang.org/account/avatar/00/27/f6/d7/8d3e299c.jpg","nickname":"Java天下第一","note":"","ucode":"FB17173A1DAA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385188,"discussion_content":"貌似不会立即杀死，它只是下了杀死这个事务的命令。得等到它自己发现要被杀死了，才会挂掉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626936734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290552,"user_name":"阿川Arc","can_delete":false,"product_type":"c1","uid":1978838,"ip_address":"","ucode":"4D990D6E3152A6","user_header":"https://static001.geekbang.org/account/avatar/00/1e/31/d6/4bfaa08c.jpg","comment_is_top":false,"comment_ctime":1619615682,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1619615682","product_id":100020801,"comment_content":"第六题A选项 insert(15,15)为什么会触发行锁呢","like_count":0,"discussions":[{"author":{"id":2619095,"avatar":"https://static001.geekbang.org/account/avatar/00/27/f6/d7/8d3e299c.jpg","nickname":"Java天下第一","note":"","ucode":"FB17173A1DAA5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385189,"discussion_content":"因为有个next-lock锁在，插入会刚好在那个范围里面，而更新的那个语句因为根本没有id=15的列，所以不会触发锁","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626936789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1411040,"avatar":"https://static001.geekbang.org/account/avatar/00/15/87/e0/63e7d43d.jpg","nickname":"星空","note":"","ucode":"636A0A14608EF0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389275,"discussion_content":"间隙锁","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629199054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288465,"user_name":"Sun Fei","can_delete":false,"product_type":"c1","uid":1032631,"ip_address":"","ucode":"092EC0992050BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/b7/57f153f6.jpg","comment_is_top":false,"comment_ctime":1618479297,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618479297","product_id":100020801,"comment_content":"第三遍又开始了。","like_count":0},{"had_liked":false,"id":284073,"user_name":"xingshouzhyan","can_delete":false,"product_type":"c1","uid":2051062,"ip_address":"","ucode":"BFDD6987C12F68","user_header":"","comment_is_top":false,"comment_ctime":1616057290,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1616057290","product_id":100020801,"comment_content":"不知道还会不会回复。感觉存储过程没深入讲。遇到一个问题，完全不知道从哪里入手。请问，事务中调同一个存储过程多次，能这样用吗？这样调用，效率上是否比一个个调用存储过程好？存储过程中事务的提交是什么时候","like_count":0,"discussions":[{"author":{"id":1926222,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/64/4e/83c61c7f.jpg","nickname":"靓仔","note":"","ucode":"077A290A2DCF42","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578683,"discussion_content":"那不还是个大事务? 这样应该不好吧 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656941887,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280354,"user_name":"陌兮","can_delete":false,"product_type":"c1","uid":1415619,"ip_address":"","ucode":"00CE47CAECD5CD","user_header":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","comment_is_top":false,"comment_ctime":1614166006,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1614166006","product_id":100020801,"comment_content":"感谢老师，老师辛苦了","like_count":0,"discussions":[{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"陌兮","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553267,"discussion_content":"一刷40分，二刷40分。大哭","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645797976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":262558,"user_name":"陆美芳","can_delete":false,"product_type":"c1","uid":2084000,"ip_address":"","ucode":"8C3F5FB3A8B3DA","user_header":"https://static001.geekbang.org/account/avatar/00/1f/cc/a0/bd31d495.jpg","comment_is_top":false,"comment_ctime":1605768474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605768474","product_id":100020801,"comment_content":"请教老师一个问题，今天遇到的：一个单机的MySQL实例【MySQL 5.7.26-log】，服务器昨晚11点突然宕机，今天上午10点开启后，MySQL也启动了,但是有报错，就是有个表因为表空间丢失所以被跳过了，然后这个表也打不开了，查看物理文件只看到ibd文件，日志看是因为意外宕机，导致数据不一致？具体怎么解释呀，原理还不是很懂，感觉老师讲过，但自己说不清，日志如下：<br>2020-11-19T10:13:39.660330+08:00 0 [ERROR] InnoDB: Space ID in fsp header is 2533997769, but in the page header it is 2390599045.<br>2020-11-19T10:13:39.660409+08:00 0 [ERROR] InnoDB: Data file ‘.&#47;dzfp_zzs_kpfw_arm&#47;t_user.ibd’ uses page size 2048, but the innodb_page_size start-up parameter is 16384<br>2020-11-19T10:13:39.660447+08:00 0 [ERROR] InnoDB: Operating system error number 2 in a file operation.<br>2020-11-19T10:13:39.660459+08:00 0 [ERROR] InnoDB: The error means the system cannot find the path specified.<br>2020-11-19T10:13:39.660468+08:00 0 [ERROR] InnoDB: If you are installing InnoDB, remember that you must create directories yourself, InnoDB does not create them.<br>2020-11-19T10:13:39.660484+08:00 0 [ERROR] InnoDB: Could not find a valid tablespace file for dzfp_zzs_kpfw_arm&#47;t_user. Please refer to http:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;5.7&#47;en&#47;innodb-troubleshooting-datadict.html for how to resolve the issue.<br>2020-11-19T10:13:39.660509+08:00 0 [Warning] InnoDB: Ignoring tablespace dzfp_zzs_kpfw_arm&#47;t_user because it could not be opened.","like_count":0},{"had_liked":false,"id":233305,"user_name":"往事随风，顺其自然","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1594283233,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1594283233","product_id":100020801,"comment_content":"SELECT psj.id AS job_id,psj.serviceline_code,psj.staff_id, pms.mobile,pms.id,pms.fullname,pms.create_time,pms.gender,<br>         pms.nickname,pms.identity_id_type,pms.identity_id,pms.update_time,GROUP_CONCAT(CONCAT(pr.name,&#39; ( &#39;,psj.role_code) SEPARATOR &#39;,&#39;) AS role_name<br>        ,psj.role_code,pd.name AS dept_name,psj.dept_code,ps.name AS serviceline_name<br>        FROM pm_staff pms<br>        LEFT JOIN pm_staff_job psj ON psj.staff_id = pms.id AND psj.deleted=0 and  pms.deleted=0 and psj.check_status=1<br>        LEFT JOIN pm_role pr ON psj.role_code = pr.code AND psj.serviceline_code = pr.serviceline_code AND pr.deleted=0<br>        LEFT JOIN pm_serviceline ps ON psj.serviceline_code = ps.code AND ps.deleted=0<br>        LEFT JOIN pm_department pd ON psj.dept_code = pd.code AND psj.serviceline_code = pd.serviceline_code AND pd.deleted=0<br>        group by pms.id<br>        order by pms.update_time desc<br><br><br>这个order by不走索引，update_time字段建立了索引，left join的关联字段已经建立了索引，查询还是10s以上，有什么优化思路","like_count":0,"discussions":[{"author":{"id":1938695,"avatar":"","nickname":"Geek_30fab2","note":"","ucode":"833A3FBFC04527","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378774,"discussion_content":"group by pms.id 但是查那么多字段不报错嘛？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623398146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233069,"user_name":"强强","can_delete":false,"product_type":"c1","uid":2048666,"ip_address":"","ucode":"86E0C8A6B5CF55","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/bvIkMsUBo7glPEWJjpBEM7ice9nLySxsCibicZg2Uubuia27KZGXXYibPhMhIT6m1GVCIM1l1ILJnj74kwvOqqRSKjg/132","comment_is_top":false,"comment_ctime":1594209553,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594209553","product_id":100020801,"comment_content":"感谢老师","like_count":0},{"had_liked":false,"id":227354,"user_name":"leichenlei","can_delete":false,"product_type":"c1","uid":1950449,"ip_address":"","ucode":"D63AFE172CB5A7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/c2/f1/0cf79684.jpg","comment_is_top":false,"comment_ctime":1592362101,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592362101","product_id":100020801,"comment_content":"老师，请教两个问题：<br>\t<br>    问题1：<br>        第6讲：server层有两种锁：1，表锁的语法是 lock tables … read&#47;write。2，MDL 不需要显式使用，在访问一个表的时候会被自动加上 。<br>        第19讲：复现 等待MDL锁：lock table t write。<br>        那么，lock table 写法到底是加表锁还是MDL锁呢？<br><br>    问题2：如何复现server层的“表锁”？如何复现innoDB引擎层的“表锁”呢? ","like_count":0},{"had_liked":false,"id":221136,"user_name":"扩散性百万咸面包","can_delete":false,"product_type":"c1","uid":1905171,"ip_address":"","ucode":"6D703D51553B42","user_header":"https://static001.geekbang.org/account/avatar/00/1d/12/13/e103a6e3.jpg","comment_is_top":false,"comment_ctime":1590414852,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1590414852","product_id":100020801,"comment_content":"老师，在这个比较少留言的地方问您一个问题：<br>WAL和普通的硬盘写应该就是顺序I&#47;O和随机I&#47;O的区别吧？因为可以把磁盘上专门某一块特定的地方用来写log file，所以顺序I&#47;O比随机I&#47;O要快？如果以后顺序I&#47;O和随机I&#47;O区别越来越小了，可以不可以在事务fsync的时候直接把更新写到对应的磁盘位置，而不是log file的磁盘位置呢？","like_count":0,"discussions":[{"author":{"id":1340702,"avatar":"https://static001.geekbang.org/account/avatar/00/14/75/1e/356dbf4a.jpg","nickname":"Spike","note":"","ucode":"9CE0EE743A89C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302046,"discussion_content":"在 SSD 硬盘上虽然随机 IO 和顺序 IO 的响应时间区别缩小了，但是依然会受到 IOPS 的限制。此时通过 WAL 利用组提交（多个事务 write 后再 fsync）依然有较大的性能提升。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598771974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1340702,"avatar":"https://static001.geekbang.org/account/avatar/00/14/75/1e/356dbf4a.jpg","nickname":"Spike","note":"","ucode":"9CE0EE743A89C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302045,"discussion_content":"感觉你的问题描述不太清楚。首先：WAL 技术是通过 binlog 和 redo log 保证不丢数据的情况下提升数据写入的性能，提升性能的原因是因为日志是增量写，同一份日志内的内容在磁盘上的位置是相邻的，节省了磁盘的寻道查找时间，也就是顺序 IO。但是 WAL 技术并没有省掉将数据更新写到对应的磁盘位置（随机 IO）这一步。在 fsync 的时候不仅会刷日志文件到磁盘，同时也会刷数据文件。你可以参考https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar_innodb_flush_method","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598771737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212689,"user_name":"杨","can_delete":false,"product_type":"c1","uid":1971269,"ip_address":"","ucode":"7EFEFE285975C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oltLEqTrmHm2aJP99BK6tHu5h7hp4aj08wR5Wt6H31iadFduDAVvjYKmhQ2nvGbLV3lkVdiat2GRasgWXoJeTibUg/132","comment_is_top":false,"comment_ctime":1588175877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588175877","product_id":100020801,"comment_content":"40分不过还是学到了许多   主要主从那块不会  没接触过","like_count":0},{"had_liked":false,"id":211043,"user_name":"张滔","can_delete":false,"product_type":"c1","uid":1322636,"ip_address":"","ucode":"87ABAFF0E861E0","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","comment_is_top":false,"comment_ctime":1587886787,"is_pvip":false,"replies":[{"id":"78501","content":"扫描主键索引就是“全表扫描“","user_name":"作者回复","user_name_real":"林晓斌","uid":"1264162","ctime":1587891972,"ip_address":"","comment_id":211043,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1587886787","product_id":100020801,"comment_content":"林老师，有个问题一直没明白，如果说数据行存储在主键索引的叶子节点，那么为什么还会存在全表扫描？扫描主键索引不就可以了吗？","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"林晓斌","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493178,"discussion_content":"扫描主键索引就是“全表扫描“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587891972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1322636,"avatar":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","nickname":"张滔","note":"","ucode":"87ABAFF0E861E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248784,"discussion_content":"根据我实验的结果，我推测的是，主键索引有两份，一份是二级索引，叶子节点存的是主键id，如果要取数据行需要回表，另外一份是聚集索引，叶子节点保存了数据行。这只是我的推测。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587895482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1322636,"avatar":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","nickname":"张滔","note":"","ucode":"87ABAFF0E861E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":248776,"discussion_content":"t1表只有一个id主键索引，EXPLAIN SELECT id FROM t1执行计划中type为啥显示的index呢？但EXPLAIN SELECT * FROM t1结果中的type是all","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587894767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207451,"user_name":"wkq2786130","can_delete":false,"product_type":"c1","uid":1256821,"ip_address":"","ucode":"0F3A9DF9928C67","user_header":"https://static001.geekbang.org/account/avatar/00/13/2d/75/e7c29de4.jpg","comment_is_top":false,"comment_ctime":1587087862,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587087862","product_id":100020801,"comment_content":"赞","like_count":0}]}