{"id":163961,"title":"12 | 领域建模：如何用事件风暴构建领域模型？","content":"<p>你好，我是欧创新。</p><p>还记得我在 <a href=\"https://time.geekbang.org/column/article/149943\">[第01讲]</a> 中说过，微服务设计为什么要选择DDD吗？其中有一个非常重要的原因，就是采用DDD方法建立的领域模型，可以清晰地划分微服务的逻辑边界和物理边界。可以说，在DDD的实践中，好的领域模型直接关乎微服务的设计水平。因此，我认为DDD的战略设计是比战术设计更为重要的，也正是这个原因，我们的内容会更侧重于战略设计。</p><p>那么我们该采用什么样的方法，才能从错综复杂的业务领域中分析并构建领域模型呢？</p><p>它就是我在前面多次提到的事件风暴。事件风暴是一项团队活动，领域专家与项目团队通过头脑风暴的形式，罗列出领域中所有的领域事件，整合之后形成最终的领域事件集合，然后对每一个事件，标注出导致该事件的命令，再为每一个事件标注出命令发起方的角色。命令可以是用户发起，也可以是第三方系统调用或者定时器触发等，最后对事件进行分类，整理出实体、聚合、聚合根以及限界上下文。而<span class=\"orange\">事件风暴正是DDD战略设计中经常使用的一种方法，它可以快速分析和分解复杂的业务领域，完成领域建模</span>。</p><p>那到底怎么做事件风暴呢？事件风暴需要提前准备些什么？又如何用事件风暴来构建领域模型呢？今天我们就来重点解决这些问题，深入了解事件风暴的全过程。</p><!-- [[[read_end]]] --><h2>事件风暴需要准备些什么？</h2><h3>1. 事件风暴的参与者</h3><p>事件风暴采用工作坊的方式，将项目团队和领域专家聚集在一起，通过可视化、高互动的方式一步一步将领域模型设计出来。领域专家是事件风暴中必不可少的核心参与者。很多公司可能并没有这个角色，那我们该寻找什么样的人来担当领域专家呢？</p><p>领域专家就是对业务或问题域有深刻见解的主题专家，他们非常了解业务和系统是怎么做的，同时也深刻理解为什么要这样设计。如果你的公司里并没有这个角色，那也没关系，你可以从业务人员、需求分析人员、产品经理或者在这个领域有多年经验的开发人员里，按照这个标准去选择合适的人选。</p><p>除了领域专家，事件风暴的其他参与者可以是DDD专家、架构师、产品经理、项目经理、开发人员和测试人员等项目团队成员。</p><p>领域建模是统一团队语言的过程，因此项目团队应尽早地参与到领域建模中，这样才能高效建立起团队的通用语言。到了微服务建设时，领域模型也更容易和系统架构保持一致。</p><h3>2. 事件风暴要准备的材料</h3><p>事件风暴参与者会将自己的想法和意见写在即时贴上，并将贴纸贴在墙上的合适位置，我们戏称这个过程是“刷墙”。所以即时贴和水笔是必备材料，另外，你还可以准备一些胶带或者磁扣，以便贴纸随时能更换位置。</p><p>值得提醒一下的是，在这个过程中，我们要用不同颜色的贴纸区分领域行为。如下图，我们可以用蓝色表示命令，用绿色表示实体，橙色表示领域事件，黄色表示补充信息等。补充信息主要用来说明注意事项，比如外部依赖等。颜色并不固定，这只是我的习惯，团队内统一才是重点。</p><p><img src=\"https://static001.geekbang.org/resource/image/3a/f8/3a80b8e7648440a49b809d945e6439f8.jpg?wh=1680*714\" alt=\"\"></p><h3>3. 事件风暴的场地</h3><p>什么样的场地适合做事件风暴呢？是不是需要跟组织会议一样，准备会议室、投影，还有椅子？这些都不需要！你只需要一堵足够长的墙和足够大的空间就可以了。墙是用来贴纸的，大空间可以让人四处走动，方便合作。撤掉会议桌和椅子的事件风暴，你会发现参与者们的效率更高。</p><p>事件风暴的发明者曾经建议要准备八米长的墙，这样设计就不会受到空间的限制了。当然，这个不是必要条件，看各自的现实条件吧，不要让思维受限就好。</p><h3>4. 事件风暴分析的关注点</h3><p>在领域建模的过程中，我们需要重点关注这类业务的语言和行为。比如某些业务动作或行为（事件）是否会触发下一个业务动作，这个动作（事件）的输入和输出是什么？是谁（实体）发出的什么动作（命令），触发了这个动作（事件）…我们可以从这些暗藏的词汇中，分析出领域模型中的事件、命令和实体等领域对象。</p><h2>如何用事件风暴构建领域模型？</h2><p>领域建模的过程主要包括产品愿景、业务场景分析、领域建模和微服务拆分与设计这几个重要阶段。下面我以用户中台为例，介绍一下如何用事件风暴构建领域模型。</p><h3>1. 产品愿景</h3><p>产品愿景的主要目的是对产品顶层价值的设计，使产品目标用户、核心价值、差异化竞争点等信息达成一致，避免产品偏离方向。</p><p>产品愿景的参与角色：领域专家、业务需求方、产品经理、项目经理和开发经理。</p><p>在建模之前，项目团队要思考这样两点：</p><ul>\n<li>用户中台到底能够做什么？</li>\n<li>它的业务范围、目标用户、核心价值和愿景，与其它同类产品的差异和优势在哪里？</li>\n</ul><p>这个过程也是明确用户中台建设方向和统一团队思想的过程。参与者要对每一个点（下图最左侧列的内容）发表意见，用水笔写在贴纸上，贴在黄色贴纸的位置。这个过程会让参与者充分发表意见，最后会将发散的意见统一为通用语言，建立如下图的产品愿景墙。如果你的团队的产品愿景和目标已经很清晰了，那这个步骤你可以忽略。</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/c4/b85983fa6a8c877e77387fdafe1598c4.jpg?wh=1680*1176\" alt=\"\"></p><h3>2. 业务场景分析</h3><p>场景分析是从用户视角出发的，根据业务流程或用户旅程，采用用例和场景分析，探索领域中的典型场景，找出领域事件、实体和命令等领域对象，支撑领域建模。事件风暴参与者要尽可能地遍历所有业务细节，充分发表意见，不要遗漏业务要点。</p><p>场景分析的参与角色：领域专家、产品经理、需求分析人员、架构师、项目经理、开发经理和测试经理。</p><p>用户中台有这样三个典型的业务场景：</p><ul>\n<li>第一个是系统和岗位设置，设置系统中岗位的菜单权限；</li>\n<li>第二个是用户权限配置，为用户建立账户和密码，设置用户岗位；</li>\n<li>第三个是用户登录系统和权限校验，生成用户登录和操作日志。</li>\n</ul><p>我们可以按照业务流程，一步一步搜寻用户业务流程中的关键领域事件，比如岗位已创建，用户已创建等事件。再找出什么行为会引起这些领域事件，这些行为可能是一个或若干个命令组合在一起产生的，比如创建用户时，第一个命令是从公司HR系统中获取用户信息，第二个命令是根据HR的员工信息在用户中台创建用户，创建完用户后就会产生用户已创建的领域事件。当然这个领域事件可能会触发下一步的操作，比如发布到邮件系统通知用户已创建，但也可能到此就结束了，你需要根据具体情况来分析是否还有下一步的操作。</p><p><span class=\"orange\">场景分析时会产生很多的命令和领域事件。</span>我用蓝色来表示命令，用橙色表示领域事件，用黄色表示补充信息，比如用户信息数据来源于HR系统的说明。</p><p><img src=\"https://static001.geekbang.org/resource/image/e2/e4/e2f91189e25bbaa81307d1fea694aee4.jpg?wh=1960*1354\" alt=\"\"></p><h3>3. 领域建模</h3><p>领域建模时，我们会根据场景分析过程中产生的领域对象，比如命令、事件等之间关系，找出产生命令的实体，分析实体之间的依赖关系组成聚合，为聚合划定限界上下文，建立领域模型以及模型之间的依赖。领域模型利用限界上下文向上可以指导微服务设计，通过聚合向下可以指导聚合根、实体和值对象的设计。</p><p>领域建模的参与角色：领域专家、产品经理、需求分析人员、架构师、项目经理、开发经理和测试经理。</p><p>具体可以分为这样三步。</p><p>第一步：从命令和事件中提取产生这些行为的实体。用绿色贴纸表示实体。通过分析用户中台的命令和事件等行为数据，提取了产生这些行为的用户、账户、认证票据、系统、菜单、岗位和用户日志七个实体。</p><p><img src=\"https://static001.geekbang.org/resource/image/cf/fd/cf35a9437319169784db9e5aab97b1fd.jpg?wh=2040*1094\" alt=\"\"></p><p>第二步：根据聚合根的管理性质从七个实体中找出聚合根，比如，用户管理用户相关实体以及值对象，系统可以管理与系统相关的菜单等实体等，可以找出用户和系统等聚合根。然后根据业务依赖和业务内聚原则，将聚合根以及它关联的实体和值对象组合为聚合，比如系统和菜单实体可以组合为“系统功能”聚合。按照上述方法，用户中台就有了系统功能、岗位、用户信息、用户日志、账户和认证票据六个聚合。</p><p>第三步：划定限界上下文，根据上下文语义将聚合归类。根据用户域的上下文语境，用户基本信息和用户日志信息这两个聚合共同构成用户信息域，分别管理用户基本信息、用户登录和操作日志。认证票据和账户这两个聚合共同构成认证域，分别实现不同方式的登录和认证。系统功能和岗位这两个聚合共同构成权限域，分别实现系统和菜单管理以及系统的岗位配置。根据业务边界，我们可以将用户中台划分为三个限界上下文：用户信息、认证和权限。</p><p><img src=\"https://static001.geekbang.org/resource/image/d0/e1/d0191d4e4c51ff91dc830bf38c0e7ae1.jpg?wh=1322*768\" alt=\"\"></p><p>到这里我们就完成了用户中台领域模型的构建了。那由于领域建模的过程中产生的领域对象实在太多了，我们可以借助表格来记录。</p><p><img src=\"https://static001.geekbang.org/resource/image/04/2c/04893881bfc410fac43ba5462f3be92c.jpg?wh=1252*506\" alt=\"\"></p><h3>4. 微服务拆分与设计</h3><p>我们在基础篇讲过，原则上一个领域模型就可以设计为一个微服务，但由于领域建模时只考虑了业务因素，没有考虑微服务落地时的技术、团队以及运行环境等非业务因素，因此<span class=\"orange\">在微服务拆分与设计时，我们不能简单地将领域模型作为拆分微服务的唯一标准，它只能作为微服务拆分的一个重要依据。</span></p><p>微服务的设计还需要考虑服务的粒度、分层、边界划分、依赖关系和集成关系。除了考虑业务职责单一外，我们还需要考虑将敏态与稳态业务的分离、非功能性需求（如弹性伸缩要求、安全性等要求）、团队组织和沟通效率、软件包大小以及技术异构等非业务因素。</p><p>微服务设计建议参与的角色：领域专家、产品经理、需求分析人员、架构师、项目经理、开发经理和测试经理。</p><p>用户中台微服务设计如果不考虑非业务因素，我们完全可以按照领域模型与微服务一对一的关系来设计，将用户中台设计为：用户、认证和权限三个微服务。但如果用户日志数据量巨大，大到需要采用大数据技术来实现，这时用户信息聚合与用户日志聚合就会有技术异构。虽然在领域建模时，我们将他们放在一个了领域模型内，但如果考虑技术异构，这两个聚合就不适合放到同一个微服务里了。我们可以以聚合作为拆分单位，将用户基本信息管理和用户日志管理拆分为两个技术异构的微服务，分别用不同的技术来实现它们。</p><h2>总结</h2><p>今天我们讲了事件风暴的设计方法以及如何用事件风暴来构建领域模型。事件风暴是一种不同于传统需求分析和系统设计的方法，最好的学习方法就是找几个业务场景多做几次。</p><p>综合我的经验，一般来说一个中型规模的项目，领域建模的时间大概在两周左右，这与我们传统的需求分析和系统设计的时间基本差不多。但是如果在领域建模的过程中，团队成员全员参与，在项目开发之前就建立了共同语言，这对于后续的微服务设计与开发是很有帮助的，时间成本也可以视情况降低。</p><p>其实我也了解到了，很多开发人员在初次学习DDD时，似乎并不太关心领域建模，而只是想学学DDD的战术设计思想，快速上手，开发微服务。我想这是对DDD的一个误解，这已经偏离了DDD的核心设计思想，即先有边界清晰的领域模型，才能设计出清晰的微服务边界，这两个阶段一前一后是刚需，我们不能忽略。</p><h2>思考题</h2><p>请找一个你擅长的业务领域，试着用事件风暴来构建一下领域模型。</p><p>欢迎留言分享，期待你的打卡！</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/33/7b1a917aff0ec923b78a54e81ed90733.jpg?wh=1110*659\" alt=\"unpreview\"></p>","comments":[{"had_liked":false,"id":167351,"user_name":"醇梨子","can_delete":false,"product_type":"c1","uid":1089040,"ip_address":"","ucode":"25D498248A855C","user_header":"https://static001.geekbang.org/account/avatar/00/10/9e/10/3cb10bf7.jpg","comment_is_top":false,"comment_ctime":1577773637,"is_pvip":true,"discussion_count":21,"race_medal":0,"score":"671592671813","product_id":100037301,"comment_content":"我觉得 像这种东西,你理论写的再多,也没什么实践意义,人类天生具备的能力就是模仿,市面上培训DDD的东西那么多,公司那么多,为什么最后还是做不了DDD?  像这种东西,你何不从头就引入 一个业务场景,哪怕不大的,从前到后 拆解出来,比你写这种理论 写一万篇都有用,我说实话,我所有都看完了,除了一些概念,我真的学会领域建模了?","like_count":155,"discussions":[{"author":{"id":1124889,"avatar":"https://static001.geekbang.org/account/avatar/00/11/2a/19/6be7f66f.jpg","nickname":"Coca","note":"","ucode":"44AEF20DB59433","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341133,"discussion_content":"这文章写的太偏理论，实践写的太肤浅","likes_number":15,"is_delete":false,"is_hidden":false,"ctime":1610326083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1909094,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/21/66/85f247e2.jpg","nickname":"谢作作的男人","note":"","ucode":"4F220EA8AEBFB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287404,"discussion_content":"同感。理论也看了不少了，现在想结合自己熟悉的项目尝试一下领域建模，还是不懂从何下手","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1593435339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327938,"discussion_content":"可以自己将现有的项目按照事件风暴、领域建模的思路实践一遍，直接告诉你怎么做的那种叫术，不叫设计思想，高手就是设计思想牛逼，层次都不一样","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1606022088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1731543,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/6b/d7/8872624a.jpg","nickname":"xmeng","note":"","ucode":"C0CA2182BA3B4B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352674,"discussion_content":"很有道理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614817259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327938,"ip_address":""},"score":352674,"extra":""},{"author":{"id":2006370,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM6O7eHEFkNbA2CWSJgtSTib1mo7Ib5ksy83gSwkajjJv48ZmBB2icND6FibuOhNEtrXdIqn5rQV2yZzg/132","nickname":"602089","note":"","ucode":"FC0E36D7E08AB6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561557,"discussion_content":"我感觉你有点魔怔了，不是所有看不懂的东西都叫做高手的设计思想。小学老师上课都知道用举例能让人更好的理解，比如给你一个苹果，再给你一个苹果，你就有了2个苹果。而不是直接上来就让你死记硬背1+1=2。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1649672216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327938,"ip_address":""},"score":561557,"extra":""},{"author":{"id":1627053,"avatar":"","nickname":"Geek_deb7fc","note":"","ucode":"6C4B8542C6BF3E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585654,"discussion_content":"而且这里也不是高手炫技的，来这里的都是想学习并且不会的开发人员偏多，大家几乎都觉得云里雾里，建议还是合理的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661749292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327938,"ip_address":"陕西"},"score":585654,"extra":""}]},{"author":{"id":2419206,"avatar":"","nickname":"Geek_c75a84","note":"","ucode":"5CB77755ED05B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348450,"discussion_content":"我现在觉得看书效果可能更好","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1612578269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1220273,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9e/b1/758f2fe7.jpg","nickname":"香","note":"","ucode":"121D6CECECEEC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335832,"discussion_content":"课程的安排上我个人觉得确实不太合理，不过也并非没有参考意义，对于我个人而言，目前来说帮助还是很大的，因为你总不能想着别人手把手一点一点把所有内容都交给你，别人的路始终是别人的路，在这个过程中自己的思考和体会才是最重要的。那何来自己的思考和体会，看看文章？你肯定要在实践中不断磨炼。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1608347143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2013531,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b9/5b/f31b77a8.jpg","nickname":"jason","note":"","ucode":"F8DBC720F68FC7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276201,"discussion_content":"这只能代表你，每人情况不一样，我觉得挺好的","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1590839118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1107666,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e6/d2/638ca831.jpg","nickname":"z","note":"","ucode":"CDB0BE8562ECB6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268290,"discussion_content":"感觉这一章可以提前点引入的","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1589760327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033342,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c4/7e/35a129da.jpg","nickname":"void *","note":"","ucode":"284EDBF0AD7C0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352197,"discussion_content":"DDD不是一个人完成的，得带领其他人一起完成，比较偏向于实践。自己需要根据理论，多多练习。不是看完了，就学会了","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1614646899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062552,"avatar":"https://static001.geekbang.org/account/avatar/00/10/36/98/cdc6baf1.jpg","nickname":"狂躁程序猿","note":"","ucode":"724D777B5ED13C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343531,"discussion_content":"同意，从一个场景出发带入方法论要更容易讲清楚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1611068523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1108101,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e8/85/609e4bbd.jpg","nickname":"kchen","note":"","ucode":"7E74C19174BA4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":249669,"discussion_content":"ddd本来就是一个方法论，需要训练。你可以那你工作中熟悉的项目，用ddd的思路练习","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1587952300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1124275,"avatar":"https://static001.geekbang.org/account/avatar/00/11/27/b3/d383b61c.jpg","nickname":"yancli","note":"","ucode":"86F0596FAB0176","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383722,"discussion_content":"ddd实践涉及全系统，是一个必须从上向下推动的行为。从下至上很难有结果，所以要想成功必须洗脑上面，可是投入和结果产出呢？很难说服上面，毕竟这个不是也许创新","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626224040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1639184,"avatar":"https://static001.geekbang.org/account/avatar/00/19/03/10/82c56b87.jpg","nickname":"Cooler","note":"","ucode":"3D5192BE887A33","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578925,"discussion_content":"别人只是给你指点迷津，而不是完全手把手教你，所以这个需要自己领悟。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657094849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1366546,"avatar":"https://static001.geekbang.org/account/avatar/00/14/da/12/bdba4a3e.jpg","nickname":"jerry.mei","note":"","ucode":"8CEEA2F450CBC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558715,"discussion_content":"哈哈，DDD的书籍、专栏、演讲看了很多，但是基本没有看到一个具体的实操案例。像工作坊也只是停留在领域风暴这个阶段。一到代码实现这一层面基本就蒙了，不知道怎么落地。自己尝试过单体DDD、CQRS，感觉实操太复杂了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648437196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1067845,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4b/45/771ba7c9.jpg","nickname":"申子戌","note":"","ucode":"2440EB5CE2B5AC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538048,"discussion_content":"p","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639313293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1547270,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9c/06/12bcb26f.jpg","nickname":"Jie","note":"","ucode":"6D4D2AF211458D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536830,"discussion_content":"功利心太重，没有走该走的路","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638878161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2397918,"avatar":"https://static001.geekbang.org/account/avatar/00/24/96/de/79dcd685.jpg","nickname":"Fred","note":"","ucode":"D09153B6DC9B0F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349975,"discussion_content":"最近我试着把现有项目改造，过程中遇到一些问题，回头再看下概念和其他同学的问题，有些已经在老师的回答中找到答案了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613650897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043454,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/eb/fe/fefeb799.jpg","nickname":"sooerr","note":"","ucode":"2DB3E2D35196B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310533,"discussion_content":"我感觉根本原因还是ddd太高级了，不像三层架构每个公司都会用，所以会操作的人太少了。这个专栏从理论层面已经表达的比较具体了。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601895144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1438475,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f3/0b/4560079e.jpg","nickname":"王宇","note":"","ucode":"0E9BC3AD99C8E5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199293,"discussion_content":"搞一个不错的项目代码上落地就差不多了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583580513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150082,"user_name":"Dwan","can_delete":false,"product_type":"c1","uid":1721961,"ip_address":"","ucode":"F9327C8928876F","user_header":"https://static001.geekbang.org/account/avatar/00/1a/46/69/3109407e.jpg","comment_is_top":false,"comment_ctime":1573459456,"is_pvip":true,"replies":[{"id":"57755","content":"是这个意思。DDD领域建模优先，领域建模的时基本不考虑数据模型和数据库实现。在微服务具体落地的时候才考虑数据实体的设计。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573463214,"ip_address":"","comment_id":150082,"utype":1}],"discussion_count":5,"race_medal":0,"score":"186257053184","product_id":100037301,"comment_content":"DDD: 事件风暴--产品愿景--场景分析--领域建模--微服务拆分与设计。<br>传统: 产品需求--需求分析--详细设计--ER模型--UML设计<br>貌似最后都能产生模型图，一个叫领域模型，一个叫ER图，是不是关键就在这里，一个是面向业务领域建模，一个是面向底层数据层设计，也是DDD和传统的分水岭？","like_count":44,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474059,"discussion_content":"是这个意思。DDD领域建模优先，领域建模的时基本不考虑数据模型和数据库实现。在微服务具体落地的时候才考虑数据实体的设计。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573463214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1405947,"avatar":"https://static001.geekbang.org/account/avatar/00/15/73/fb/40164b5d.jpg","nickname":"A$APRocky","note":"","ucode":"D1B5C2F8B1B67C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591372,"discussion_content":"需求分析设计不就是事件风暴的过程吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666545914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1175495,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ef/c7/07bffbf3.jpg","nickname":"小土豆爸爸","note":"","ucode":"E3FED198AB803A","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590412,"discussion_content":"领域建模和数据库建模是两个概念，老师讲解的真好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665724710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2304867,"avatar":"https://static001.geekbang.org/account/avatar/00/23/2b/63/d627d2cf.jpg","nickname":"Jerry","note":"","ucode":"5F7DCD6515393B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352528,"discussion_content":"如何划分子域或者限界上下文，这里提到的是聚合的归类，那么聚合是按照什么归类的呢?是否遵循同一通用语言吗?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614762864,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1481439,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9a/df/58f07489.jpg","nickname":"AlexHuang","note":"","ucode":"C359C1B9D3671A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48230,"discussion_content":"老师前面课程说过，传统建模是面向数据库建模，ddd是面向领域模型建模。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573466776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230556,"user_name":"伊来温","can_delete":false,"product_type":"c1","uid":2044174,"ip_address":"","ucode":"137E3A8258206B","user_header":"https://static001.geekbang.org/account/avatar/00/1f/31/0e/cbcada9b.jpg","comment_is_top":false,"comment_ctime":1593416971,"is_pvip":false,"replies":[{"id":"85212","content":"根据单一职责的设计原则，用户上下文应该只负责用户相关的管理职能。商品的收藏虽然跟用户关联，但应该属于商品上下文，商品上下文内可能会有商品目录聚合和商品收藏聚合等。在设计时，你可以将收藏的商品与用户ID建立关联就可以了，用户ID是值对象。用户登录时，可以根据用户ID查询到匹配的商品收藏清单。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1593496307,"ip_address":"","comment_id":230556,"utype":1}],"discussion_count":4,"race_medal":0,"score":"61722959115","product_id":100037301,"comment_content":"有个问题请教下，商品的收藏功能，应该被划分在用户上下文呢还是商品上下文。感觉语意上两边都是通的","like_count":15,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499935,"discussion_content":"根据单一职责的设计原则，用户上下文应该只负责用户相关的管理职能。商品的收藏虽然跟用户关联，但应该属于商品上下文，商品上下文内可能会有商品目录聚合和商品收藏聚合等。在设计时，你可以将收藏的商品与用户ID建立关联就可以了，用户ID是值对象。用户登录时，可以根据用户ID查询到匹配的商品收藏清单。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593496307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028953,"avatar":"","nickname":"Geek3340","note":"","ucode":"C64D302CD53513","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412433,"discussion_content":"这种语义理解起来好像不太对啊。 商品收藏很明显是用户上下文的概念，商品是用户模型中的值对象。 \n如果按照作者回复的逻辑，订单和商品的上下文语义就会出现偏差，订单一定有商品信息，是用户购买的商品信息，那么是不是可以理解为订单ID和商品建立关联，然后订单ID是值对象？这个很明显是有问题。 \n作者能再详细的解释一下不？","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1636166785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1061721,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELARO7p9N9icET6WGE3gkficKPR9oBWlx29xtHXFObibAkia46Vn6gPysic7lG8P9wj5uYYUAkpSvyuAsQ/132","nickname":"秋日放牛郎","note":"","ucode":"B58E967870287E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2028953,"avatar":"","nickname":"Geek3340","note":"","ucode":"C64D302CD53513","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533516,"discussion_content":"其实你换个思路想一想，如果这个商品下架了，是不是这个收藏要失效，还有一些高级点的收藏夹里，商品降价了，也会显示出来。另外也可以认为收藏夹是一个商品列表，只是当前用户专属的。以上这三个场景是不是感觉商品就作为主体了？所以作者的理解从这些场景来说也是没问题的。所以我觉得这个问题没有绝对意义上的答案，看你的系统怎么设计商品收藏的功能了，如果只是简单的收藏，取消收藏，也许可以理解为用户上下文的概念更直观；但如果需要关注收藏的商品的状态，价格等变化情况，甚至能够通知用户这些变化，那么上下文放在商品是不是更好？","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1637890851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":412433,"ip_address":""},"score":533516,"extra":"{\"user_type\":1}"},{"author":{"id":1142335,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6e/3f/49e5079f.jpg","nickname":"楞伽山人","note":"","ucode":"5859C06DAC790D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1061721,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELARO7p9N9icET6WGE3gkficKPR9oBWlx29xtHXFObibAkia46Vn6gPysic7lG8P9wj5uYYUAkpSvyuAsQ/132","nickname":"秋日放牛郎","note":"","ucode":"B58E967870287E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576587,"discussion_content":"讲的非常对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655688314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533516,"ip_address":""},"score":576587,"extra":""}]}]},{"had_liked":false,"id":229957,"user_name":"suke","can_delete":false,"product_type":"c1","uid":1007753,"ip_address":"","ucode":"C0287C31A4F45B","user_header":"","comment_is_top":false,"comment_ctime":1593226958,"is_pvip":false,"replies":[{"id":"85223","content":"领域建模的过程不光是建立一个领域模型，更关键的是建立团队通用语言的过程。所以需要团队成员尽早参与，后面开发和测试就会容易很多，也不会出现方向偏离。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1593498891,"ip_address":"","comment_id":229957,"utype":1}],"discussion_count":4,"race_medal":0,"score":"40247932622","product_id":100037301,"comment_content":"做微服务拆分为什么还要叫上产品、测试，和项目经理，他们的发言有用么 我就想问","like_count":9,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499714,"discussion_content":"领域建模的过程不光是建立一个领域模型，更关键的是建立团队通用语言的过程。所以需要团队成员尽早参与，后面开发和测试就会容易很多，也不会出现方向偏离。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593498891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2670563,"avatar":"","nickname":"Geek8306","note":"","ucode":"5868C4773D9AD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539439,"discussion_content":"你提出这个问题显然是不相信产品，或者我理解你遇到的产品的水平相当低，不能称之为产品","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639717114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1731543,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/6b/d7/8872624a.jpg","nickname":"xmeng","note":"","ucode":"C0CA2182BA3B4B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352871,"discussion_content":"我也觉得微服务拆分不需要产品、测试，项目经理可能需要…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614873120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1707838,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/AcJM5WNhE062TQAsIE8KTxTsZMTHJHCm4LCfsjBPibZ6iaGRamfZqIRFcLXLVfAQobeCIgA9o5wiaRCKa0dNbic1iag/132","nickname":"paulmin","note":"","ucode":"6AAB20AB369E90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1731543,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/6b/d7/8872624a.jpg","nickname":"xmeng","note":"","ucode":"C0CA2182BA3B4B","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":395692,"discussion_content":"若前期技术架构师已经能获取到足够的信息的话，就不用了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632323222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352871,"ip_address":""},"score":395692,"extra":""}]}]},{"had_liked":false,"id":168906,"user_name":"Harris","can_delete":false,"product_type":"c1","uid":1040254,"ip_address":"","ucode":"3475055D0E860C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/df/7e/005ffd1e.jpg","comment_is_top":false,"comment_ctime":1578213797,"is_pvip":false,"replies":[{"id":"65507","content":"是这样的，其实DDD刚出来的时候并不是为微服务设计的。你可以根据自己得需要，做好领域建模和划分好边界，刚开始并不一定要拆的很细，等真正需要拆分的时候再拆，用DDD设计的系统很容易解耦，很容易拆分出微服务来的。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1578232865,"ip_address":"","comment_id":168906,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35937952165","product_id":100037301,"comment_content":"个人理解领域建模的核心是识别出领域模型并做到“高内聚，低耦合”；最后一步微服务拆分与设计并不一定是一定要微服务，可以是一个模块、一个包等等。","like_count":9,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480367,"discussion_content":"是这样的，其实DDD刚出来的时候并不是为微服务设计的。你可以根据自己得需要，做好领域建模和划分好边界，刚开始并不一定要拆的很细，等真正需要拆分的时候再拆，用DDD设计的系统很容易解耦，很容易拆分出微服务来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578232865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151484,"user_name":"张迪","can_delete":false,"product_type":"c1","uid":1104835,"ip_address":"","ucode":"6A5D44999A0FEA","user_header":"https://static001.geekbang.org/account/avatar/00/10/db/c3/e11adfe8.jpg","comment_is_top":false,"comment_ctime":1573729442,"is_pvip":false,"replies":[{"id":"58260","content":"有什么疑问，咱们可以谈讨哈。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573736389,"ip_address":"","comment_id":151484,"utype":1}],"discussion_count":4,"race_medal":0,"score":"35933467810","product_id":100037301,"comment_content":"看着这个划分的领域，完全不知道怎么落地。","like_count":8,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474492,"discussion_content":"有什么疑问，咱们可以谈讨哈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573736389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327939,"discussion_content":"得多看几遍，之前老师在留言区就说过，这个课程得反反复复看很多遍，理论-实践-理论总结-实践...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606022281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1937889,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqUFIOBnowQQXzVlTXw3ic49FZ8Wq3fD3CzwRh4DnsRqibAosIeXZ6mxaYZ3mOX8LRpYapeKO5iaouKA/132","nickname":"Geek_f66cf1","note":"","ucode":"F2F2F6FF6E76E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570851,"discussion_content":"这玩意儿有啥好反复看的。看这个还不如多看看软件方法，rup，ddd和实现ddd的书，老实说这个课程重点在于迎合微服务和中台，对软件工程和ddd做了不少阉割。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651938823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327939,"ip_address":""},"score":570851,"extra":""},{"author":{"id":1033578,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c5/6a/7f858f1f.jpg","nickname":"白不吃","note":"","ucode":"F019914D8819C2","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":1937889,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqUFIOBnowQQXzVlTXw3ic49FZ8Wq3fD3CzwRh4DnsRqibAosIeXZ6mxaYZ3mOX8LRpYapeKO5iaouKA/132","nickname":"Geek_f66cf1","note":"","ucode":"F2F2F6FF6E76E8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574342,"discussion_content":"目前看来，我同意你的观点，专栏看了一个寂寞，本来标题是实战课，动不动什么战略，战术的词汇，搞不懂想表达什么，讲理论就好好讲理论，布道就好好布道，不一定要用实战当标题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653985848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":570851,"ip_address":""},"score":574342,"extra":""}]}]},{"had_liked":false,"id":252051,"user_name":"myking","can_delete":false,"product_type":"c1","uid":1970962,"ip_address":"","ucode":"D541EC93465891","user_header":"https://static001.geekbang.org/account/avatar/00/1e/13/12/1c9692e7.jpg","comment_is_top":false,"comment_ctime":1602078924,"is_pvip":false,"replies":[{"id":"92200","content":"这个需要根据您的业务场景来具体分析。我试着来分析一下。一般来说在用户权限体系里，会有User、Role等聚合，其中Role作为聚合根，会引用Menu实体，建立role的菜单权限体系。User和Role聚合主要用于管理用户以及角色等基础信息，比如用户的增删改查，删除Role中的菜单权限，删除Role等基本操作。<br>在进行用户权限配置时会有另外一个聚合UserRole，这个聚合的聚合根引用用户值对象和Role值对象，在这个聚合管理用户的角色权限配置，建立User和Role之间的关联。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1602320086,"ip_address":"","comment_id":252051,"utype":1}],"discussion_count":5,"race_medal":0,"score":"31666849996","product_id":100037301,"comment_content":"老师能不能用把ddd带入到rbac的实战设计里面去？我感觉这个和订单比起来设计到的聚合根的选择更复杂的多，比如是不是应该有userRole的聚合根、roleMenu的聚合根。事件有删除menu删除role等等。在这种情况下应该如何处理呢","like_count":7,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506699,"discussion_content":"这个需要根据您的业务场景来具体分析。我试着来分析一下。一般来说在用户权限体系里，会有User、Role等聚合，其中Role作为聚合根，会引用Menu实体，建立role的菜单权限体系。User和Role聚合主要用于管理用户以及角色等基础信息，比如用户的增删改查，删除Role中的菜单权限，删除Role等基本操作。\n在进行用户权限配置时会有另外一个聚合UserRole，这个聚合的聚合根引用用户值对象和Role值对象，在这个聚合管理用户的角色权限配置，建立User和Role之间的关联。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602320086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/3d/1189e48a.jpg","nickname":"微思","note":"","ucode":"853C48AA183A7B","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407158,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634916064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435845,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/c5/8bdb0bba.jpg","nickname":"DarKnight","note":"","ucode":"B04AFD03768827","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329643,"discussion_content":"对于像 UserRole 这种在传统的数据库模型里面的表现形式是一张关系表，在聚合划分的最佳实践中，是不是更倾向于把这种关系独立出来一个聚合呢？因为有时候这种关系表是很多的，这样会不会产生很多聚合？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606441648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1067814,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4b/26/9f5f94f5.jpg","nickname":"Charlie","note":"","ucode":"E4930E17311C60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1435845,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/c5/8bdb0bba.jpg","nickname":"DarKnight","note":"","ucode":"B04AFD03768827","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333154,"discussion_content":"如上：其中Role作为聚合根，会引用Menu实体，建立role的菜单权限体系\n----------------------------------------------------\n我也好奇，菜单和角色也有关系表角色引用菜单，也就是菜单和实体都是聚合根，菜单相当于共享体系。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607443155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":329643,"ip_address":""},"score":333154,"extra":""},{"author":{"id":1731543,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/6b/d7/8872624a.jpg","nickname":"xmeng","note":"","ucode":"C0CA2182BA3B4B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1435845,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/c5/8bdb0bba.jpg","nickname":"DarKnight","note":"","ucode":"B04AFD03768827","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352869,"discussion_content":"如上和Charlie描述的一样，希望得到确切的答复","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614872898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":329643,"ip_address":""},"score":352869,"extra":""}]}]},{"had_liked":false,"id":164775,"user_name":"Tan","can_delete":false,"product_type":"c1","uid":1419514,"ip_address":"","ucode":"7A34FA560715F0","user_header":"https://static001.geekbang.org/account/avatar/00/15/a8/fa/e98afa52.jpg","comment_is_top":false,"comment_ctime":1577089536,"is_pvip":false,"replies":[{"id":"62826","content":"你说的这个场景不是富领域模型，可能找不出聚合根，因此不适合用聚合的方式来做。但是你可以用DDD的分层架构来划分不同的服务，按照外层依赖内层服务的调用关系来开发。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1577106471,"ip_address":"","comment_id":164775,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23051926016","product_id":100037301,"comment_content":"欧老师好，请教个问题：<br>信贷风控系统，客户提交申请信息，根据客户信息查几十个第三方信息（征信报告、欺诈分、企查查...）来获取客户相关信息然后放到规则引擎跑规则，最后算出客户授信金额。感觉这个系统一时半会没发下手划分领域和子域，麻烦老师指点一下，谢谢！","like_count":5,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478890,"discussion_content":"你说的这个场景不是富领域模型，可能找不出聚合根，因此不适合用聚合的方式来做。但是你可以用DDD的分层架构来划分不同的服务，按照外层依赖内层服务的调用关系来开发。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577106471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327941,"discussion_content":"@Tan 消费金融？好熟悉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606022423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1419514,"avatar":"https://static001.geekbang.org/account/avatar/00/15/a8/fa/e98afa52.jpg","nickname":"Tan","note":"","ucode":"7A34FA560715F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98353,"discussion_content":"多谢老师指导。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577156723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150651,"user_name":"marker","can_delete":false,"product_type":"c1","uid":1094478,"ip_address":"","ucode":"DDBF1CD83665C4","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/4e/5f22b09d.jpg","comment_is_top":false,"comment_ctime":1573574691,"is_pvip":true,"replies":[{"id":"57960","content":"这一块研究的还不太深入呢。后面我再研究一下。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573608215,"ip_address":"","comment_id":150651,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23048411171","product_id":100037301,"comment_content":"老师，能给我们说说四色建模或彩色建模？","like_count":5,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474232,"discussion_content":"这一块研究的还不太深入呢。后面我再研究一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573608215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150412,"user_name":"睁眼看世界","can_delete":false,"product_type":"c1","uid":1206388,"ip_address":"","ucode":"F94CF34BC5B2AC","user_header":"https://static001.geekbang.org/account/avatar/00/12/68/74/461b202d.jpg","comment_is_top":false,"comment_ctime":1573530150,"is_pvip":false,"replies":[{"id":"57833","content":"领域建模的目的是为了微服务的设计，领域模型是开始，DDD是一种不同于传统设计的方法 ，先有领域模型，然后才有微服务设计，这样设计的微服务边界很清晰，而不是靠拍脑袋设计微服务。等学完后面全部DDD的内容后，你就知道其中的奥秘了。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573534880,"ip_address":"","comment_id":150412,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18753399334","product_id":100037301,"comment_content":"老师，学习到这里还是云里雾里，感觉学了一大堆概念，有个DDD这个理念。公司一般都是需求驱动，很少会花费大量精力去领域建模。老师，请问你们具体是如何推动DDD落地的？","like_count":4,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474151,"discussion_content":"领域建模的目的是为了微服务的设计，领域模型是开始，DDD是一种不同于传统设计的方法 ，先有领域模型，然后才有微服务设计，这样设计的微服务边界很清晰，而不是靠拍脑袋设计微服务。等学完后面全部DDD的内容后，你就知道其中的奥秘了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573534880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1213325,"avatar":"https://static001.geekbang.org/account/avatar/00/12/83/8d/03cac826.jpg","nickname":"徐李","note":"","ucode":"41550F6CA1E112","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539249,"discussion_content":"我们目前就是靠拍脑袋来决定微服务的拆分和设计，主要是快啊。一两天就搞定。像这种领域建模，边界划分，应该是比较费时间\n\n在大的团队，比如开发业务时，本来就有很大的一个沟通成本，那走这条路很显然是更优的路线。但在小团队，可能靠嗓子吼几声就将一些业务明确了，就不会这么重视DDD的这套复杂的领域建模了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639647745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937889,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqUFIOBnowQQXzVlTXw3ic49FZ8Wq3fD3CzwRh4DnsRqibAosIeXZ6mxaYZ3mOX8LRpYapeKO5iaouKA/132","nickname":"Geek_f66cf1","note":"","ucode":"F2F2F6FF6E76E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570852,"discussion_content":"领域建模几十年前就有了… 那时还没有什么微服务。没有把软件工程理解透，自然对ddd很难理解。\n软件过程分多个阶段，业务建模，需求建模，分析，设计，实现，测试，交付。\n\n分析阶段的输出就是领域模型，做完设计阶段的输入，自如就是领域驱动设计。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651939127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233203,"user_name":"Geek_75d94a","can_delete":false,"product_type":"c1","uid":1680332,"ip_address":"","ucode":"2E7B6075AAB8B0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1LIW93RQ3ZvevCcfgib9Z4NwHsNAbicmGkicZwe9zCBPc9A2IXfLtXGUmzqrsibn1FibZcNIOddOrF9icuww9cYZD5ibA/132","comment_is_top":false,"comment_ctime":1594260139,"is_pvip":false,"replies":[{"id":"86039","content":"事件是独立的，一些操作发生后会产生事件，事件主要用于上下游业务的数据流转和领域模型和微服务解耦，不用挂到某个实体下面。团队的管理在聚合根，聚合根的有些职能会拿出来放到工厂和仓储里面，比如聚合实体的初始化，聚合数据的持久化。解散团队的操作当然在聚合根实体。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1594262115,"ip_address":"","comment_id":233203,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10184194731","product_id":100037301,"comment_content":"学完感觉还是一脸懵逼，很多时候不知道哪些事件应该挂在哪个实体下面。像是一个团队里面，存在队长和队员，只有队长可以解散团队。那么解散团队这个操作，是放在团队实体上，还是队长实体上？","like_count":2,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500941,"discussion_content":"事件是独立的，一些操作发生后会产生事件，事件主要用于上下游业务的数据流转和领域模型和微服务解耦，不用挂到某个实体下面。团队的管理在聚合根，聚合根的有些职能会拿出来放到工厂和仓储里面，比如聚合实体的初始化，聚合数据的持久化。解散团队的操作当然在聚合根实体。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594262115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":326728,"user_name":"徐李","can_delete":false,"product_type":"c1","uid":1213325,"ip_address":"","ucode":"41550F6CA1E112","user_header":"https://static001.geekbang.org/account/avatar/00/12/83/8d/03cac826.jpg","comment_is_top":false,"comment_ctime":1639647323,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5934614619","product_id":100037301,"comment_content":"事件风暴，就是把团队的人都召集起来，大家头脑风暴，各抒己见，然后汇总得出领域模型，限界上下文，实体，值对象，命令等。","like_count":1},{"had_liked":false,"id":309847,"user_name":"jiankang","can_delete":false,"product_type":"c1","uid":2095758,"ip_address":"","ucode":"771806BC2A9A05","user_header":"https://static001.geekbang.org/account/avatar/00/1f/fa/8e/70a70a5a.jpg","comment_is_top":false,"comment_ctime":1630373112,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5925340408","product_id":100037301,"comment_content":"我觉得不少同学还是本着技术思维学习，具体讲是用确定的技术手段去解决确定的业务需求。<br>而DDD是一种思想，或者说是一种解决问题的方法论，<br>在这种方法论的指导下，大概率不会跑偏。","like_count":1},{"had_liked":false,"id":264164,"user_name":"李二木","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1606370103,"is_pvip":true,"replies":[{"id":"96484","content":"有没有觉得事件风暴的过程有点像敏捷开发的模式所提倡的方式。DDD的开发和设计非常适合敏捷开发，而且用DDD拆分出的微服务就可以很好的适合2-pizza团队的敏捷开发模式。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1606897610,"ip_address":"","comment_id":264164,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5901337399","product_id":100037301,"comment_content":"DDD 适合敏捷开发吗？项目初期需求不是那么明确。都是在迭代中完善的。","like_count":1,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510448,"discussion_content":"有没有觉得事件风暴的过程有点像敏捷开发的模式所提倡的方式。DDD的开发和设计非常适合敏捷开发，而且用DDD拆分出的微服务就可以很好的适合2-pizza团队的敏捷开发模式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606897610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229959,"user_name":"suke","can_delete":false,"product_type":"c1","uid":1007753,"ip_address":"","ucode":"C0287C31A4F45B","user_header":"","comment_is_top":false,"comment_ctime":1593227063,"is_pvip":false,"replies":[{"id":"85222","content":"两周的时间基本上领域模型和微服务的所有设计就作完了，剩下的事情只是功能级的开发。通过一起领域建模，大家基本都了解到了所有的设计过程和实现细节，建立了统一语言，磨刀不误砍柴工，后面开发的工作就很容易了，所以效率并不会比传统的开发方式低。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1593498733,"ip_address":"","comment_id":229959,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5888194359","product_id":100037301,"comment_content":"怪不得ddd不好落地，且不说学习ddd付出的成本。一个领域建模要2周？还要叫上这么多人开会讨论 产出结果 可想效率之低","like_count":1,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499715,"discussion_content":"两周的时间基本上领域模型和微服务的所有设计就作完了，剩下的事情只是功能级的开发。通过一起领域建模，大家基本都了解到了所有的设计过程和实现细节，建立了统一语言，磨刀不误砍柴工，后面开发的工作就很容易了，所以效率并不会比传统的开发方式低。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593498733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2043294,"avatar":"","nickname":"0084","note":"","ucode":"EC5085EEEB1E12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302214,"discussion_content":"需要开发负责人，项目经理，产品经理都了解DDD，且愿意尝试用DDD的方法论来实践，没有这样的环境很难落地。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598843779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333094,"avatar":"https://static001.geekbang.org/account/avatar/00/14/57/66/e57bdb18.jpg","nickname":"liliumss","note":"","ucode":"A52AC5042F3115","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287814,"discussion_content":"大环境不支持","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593563901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179191,"user_name":"小谢同学","can_delete":false,"product_type":"c1","uid":1032544,"ip_address":"","ucode":"E809E6BC470631","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/60/fc3689d0.jpg","comment_is_top":false,"comment_ctime":1581933988,"is_pvip":false,"replies":[{"id":"69819","content":"领域模型不会一成不变的，所以项目也会不断迭代。<br>敏捷和DDD结合会是未来的趋势，理解后你可以将它们灵活组合来用。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1582111625,"ip_address":"","comment_id":179191,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5876901284","product_id":100037301,"comment_content":"有几个问题想请教下老师：<br>1. 中台类的项目通常是否也需要不断的迭代优化？<br>2. 假设要做一个2b的中台项目，集合ddd与敏捷开发，是否可以先根据用户旅程来遍历业务细节找出所有领域对象，最终按照ddd战略设计完成mvp产品的领域建模和限界上下文划分，这时候引入用户故事根据每一个边界内的聚合进行发布计划与迭代开发？<br>3. ddd与敏捷的融合，我认为有很多实践可以复用，例如白板、站会、用户旅程、工作坊，而到了战术设计阶段完全可以借用极限编程与精益的思想，比如引入结对编程，避免浪费等等，这样理解是否正确？谢谢","like_count":1,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484135,"discussion_content":"领域模型不会一成不变的，所以项目也会不断迭代。\n敏捷和DDD结合会是未来的趋势，理解后你可以将它们灵活组合来用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582111625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156627,"user_name":"西野","can_delete":false,"product_type":"c1","uid":1172754,"ip_address":"","ucode":"0C7A5E184F843D","user_header":"https://static001.geekbang.org/account/avatar/00/11/e5/12/0ea3ff28.jpg","comment_is_top":false,"comment_ctime":1574926224,"is_pvip":false,"replies":[{"id":"60129","content":"建议你看一下第7节。DDD分层架构：有效降低层与层之间的依赖。里面有详细介绍。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1574931473,"ip_address":"","comment_id":156627,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5869893520","product_id":100037301,"comment_content":"老师请教一下，领域服务和应用服务的区别是什么？？","like_count":1,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476177,"discussion_content":"建议你看一下第7节。DDD分层架构：有效降低层与层之间的依赖。里面有详细介绍。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574931473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150309,"user_name":"miniluo","can_delete":false,"product_type":"c1","uid":1397339,"ip_address":"","ucode":"5735B6DEE7902B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/FheCgo4Ovibo0L1vAGgMdZkzQMm1GUMHMMqQ8aglufXaD2hW9z96DjQicAam723jOCZwXVmiaNiaaq4PLsf4COibZ5A/132","comment_is_top":false,"comment_ctime":1573518156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5868485452","product_id":100037301,"comment_content":"ddd从我做起","like_count":1},{"had_liked":false,"id":150296,"user_name":"北天魔狼","can_delete":false,"product_type":"c1","uid":1188144,"ip_address":"","ucode":"C22623ECEB8DBA","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/30/8ecce1e1.jpg","comment_is_top":false,"comment_ctime":1573514594,"is_pvip":true,"replies":[{"id":"57813","content":"走两次就大概知道怎么去做了。理解了理念以后，就不必受一些条条框框的限制了，路是自己慢慢趟出来的，选择最适合自己的方式。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573520480,"ip_address":"","comment_id":150296,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5868481890","product_id":100037301,"comment_content":"感觉最近要做的聚合交易项目就可以小试一下，老师已经列过类和方法名称，对照上下文和聚合可以照着葫芦画瓢了。现行项目不准备也没必要微服务，但是可以写好代码","like_count":1,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474117,"discussion_content":"走两次就大概知道怎么去做了。理解了理念以后，就不必受一些条条框框的限制了，路是自己慢慢趟出来的，选择最适合自己的方式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573520480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188144,"avatar":"https://static001.geekbang.org/account/avatar/00/12/21/30/8ecce1e1.jpg","nickname":"北天魔狼","note":"","ucode":"C22623ECEB8DBA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48759,"discussion_content":"谢谢老师鼓励，“趟”字我已经划重点，真心说一句：这课超值","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573524020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1108505,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ea/19/14018371.jpg","nickname":"瓜瓜","note":"","ucode":"F90A5135A9BB4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48794,"discussion_content":"坚持使用，慢慢我们就懂了，趟”字确实是重点，既包含了会遇到困难，又包含了继续坚持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573526993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48763,"discussion_content":"谢谢^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573524612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149866,"user_name":"LS","can_delete":false,"product_type":"c1","uid":1220129,"ip_address":"","ucode":"6D4117726F9855","user_header":"https://static001.geekbang.org/account/avatar/00/12/9e/21/857bf128.jpg","comment_is_top":false,"comment_ctime":1573414185,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5868381481","product_id":100037301,"comment_content":"可以开始理论结合实践了 ；）👍","like_count":1},{"had_liked":false,"id":356132,"user_name":"kobepeng","can_delete":false,"product_type":"c1","uid":1016155,"ip_address":"广东","ucode":"59F986491764DD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/81/5b/768e64c8.jpg","comment_is_top":false,"comment_ctime":1662001624,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1662001624","product_id":100037301,"comment_content":"感觉 DDD 本身还是业务主导，必须要跟业务结合起来，这也是为什么老师在课程中通过保险业务来串讲的原因，这是大多数程序不关注或者暂时不需要关注的点，所以学起来觉得虚无缥缈，无法在工作中实践和落地。<br>DDD 更像是一种思维方式，不是看懂了就会了，还需要不断实践才能真正学会，所以也不指望学完了这门课自己就掌握了 DDD，而是在自己在时间过程中遇到问题遇到瓶颈了，来这里看看，或许会有种豁然开朗的感觉...","like_count":0},{"had_liked":false,"id":350167,"user_name":"持续思考持续做的牛牛","can_delete":false,"product_type":"c1","uid":1060882,"ip_address":"","ucode":"3F8C050D0D6A02","user_header":"https://static001.geekbang.org/account/avatar/00/10/30/12/aa2d5cb3.jpg","comment_is_top":false,"comment_ctime":1656637401,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1656637401","product_id":100037301,"comment_content":"一般情况下，大多数人，希望基于现有项目做改造，现有项目里面很多情况下代码都是现成的，如何基于现有项目做出领域识别，这个还是很重要的。本章还是有点书中理论照搬的感觉，希望后面有更多案例学习。","like_count":0},{"had_liked":false,"id":344536,"user_name":"learn more","can_delete":false,"product_type":"c1","uid":1128702,"ip_address":"","ucode":"0EF628B2E0F95E","user_header":"https://static001.geekbang.org/account/avatar/00/11/38/fe/00ddeb81.jpg","comment_is_top":false,"comment_ctime":1651636401,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651636401","product_id":100037301,"comment_content":"构建领域模型的过程和敏捷开发的故事拆分非常接近，尤其使用了看板、便利贴以后，简直就是同一套方法论，不同的语言表达而已。","like_count":0},{"had_liked":false,"id":343996,"user_name":"超级费事儿","can_delete":false,"product_type":"c1","uid":1434114,"ip_address":"","ucode":"FD873FF4ADAA5F","user_header":"https://static001.geekbang.org/account/avatar/00/15/e2/02/488aec70.jpg","comment_is_top":false,"comment_ctime":1651161338,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651161338","product_id":100037301,"comment_content":"请问，命令和事件有啥区别？","like_count":0},{"had_liked":false,"id":341027,"user_name":"大头南瓜","can_delete":false,"product_type":"c1","uid":1004812,"ip_address":"","ucode":"772716A69F6B7A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/0c/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1649300928,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649300928","product_id":100037301,"comment_content":"老师您好，请教个两个问题，1、用户实体触发了用户创建命令产生了用户已创建事件，没有创建用户，为什么会有用户实体。2、一般事件风暴，都会有一个actor的角色，命令是有actor发起的，但是您的分析过程中没有看到actor，命令都是有实体产生的。","like_count":0},{"had_liked":false,"id":335354,"user_name":"天I火","can_delete":false,"product_type":"c1","uid":1095814,"ip_address":"","ucode":"0FE20A327CD46E","user_header":"https://static001.geekbang.org/account/avatar/00/10/b8/86/ea30891b.jpg","comment_is_top":false,"comment_ctime":1645477604,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645477604","product_id":100037301,"comment_content":"想问问老师，在学习过程中，如何证明自己构建的领域模型是正确的？","like_count":0},{"had_liked":false,"id":335238,"user_name":"小八哥","can_delete":false,"product_type":"c1","uid":2062472,"ip_address":"","ucode":"CE08853995218E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqXGKRyFDH2ia15hV4PeRfgibgb1djXGNibmU4LlMUK5hlHkWpqBpwmEXJ0HBZ2nAN0doQiaGROA5GIhg/132","comment_is_top":false,"comment_ctime":1645423691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645423691","product_id":100037301,"comment_content":"这块可以与用例驱动设计的用例模型、领域模型、分析模型等理论比较学习。建模是是对现实世界的影射，是程序员最重要的技能。这块是重点，需要反复学习。","like_count":0},{"had_liked":false,"id":329559,"user_name":"woJA1wCgAAEvLnqyj_FHTt95hWQqMxag","can_delete":false,"product_type":"c1","uid":2880868,"ip_address":"","ucode":"A5B72876D542E6","user_header":"","comment_is_top":false,"comment_ctime":1641428512,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641428512","product_id":100037301,"comment_content":"老师，文章里有两个概念要澄清，事件风暴中的事件与前面章节提到的领域事件是不一样的，事件风暴包含了领域事件。事件风暴与产品愿景、场景分析、领域建模之间的关系没有明确，是包含关系，还是独立的前后步骤？","like_count":0},{"had_liked":false,"id":329186,"user_name":"楞伽山人","can_delete":false,"product_type":"c1","uid":1142335,"ip_address":"","ucode":"5859C06DAC790D","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/3f/49e5079f.jpg","comment_is_top":false,"comment_ctime":1641198996,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641198996","product_id":100037301,"comment_content":"老师 如果按照划分后的结果为用户、认证和权限三个微服务，如果根据实际情况为一个微服务，那么包的结构是什么样子的，是3个包，每一个包放相应的聚合吗","like_count":0},{"had_liked":false,"id":325426,"user_name":"不言","can_delete":false,"product_type":"c1","uid":1647649,"ip_address":"","ucode":"775B6D7DF4A904","user_header":"https://static001.geekbang.org/account/avatar/00/19/24/21/d44d5998.jpg","comment_is_top":false,"comment_ctime":1638955442,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638955442","product_id":100037301,"comment_content":"请问：什么是命令，什么是领域事件，这 2 者要怎么区分","like_count":0},{"had_liked":false,"id":322680,"user_name":"王树贺","can_delete":false,"product_type":"c1","uid":1444509,"ip_address":"","ucode":"A6F0EAABBC9A51","user_header":"https://static001.geekbang.org/account/avatar/00/16/0a/9d/5aaed095.jpg","comment_is_top":false,"comment_ctime":1637548901,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637548901","product_id":100037301,"comment_content":"如果按照一个领域模型对应一个微服务来做的话，各个微服务之间要怎么调用呢？通过微服务内部的应用层进行编排的话，会不会出现网状调用，导致系统耦合性越来越高？如果在各个微服务上在加入一层应用层进行编排的，各个微服务之间不进行调用，会不会加大开发难度？","like_count":0},{"had_liked":false,"id":309336,"user_name":"花生","can_delete":false,"product_type":"c1","uid":1266634,"ip_address":"","ucode":"5397C08BD51DD4","user_header":"https://static001.geekbang.org/account/avatar/00/13/53/ca/44088dd0.jpg","comment_is_top":false,"comment_ctime":1630052428,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630052428","product_id":100037301,"comment_content":"如果在领域里，一个聚合可以被归到多个限界上下文，需要如何划分","like_count":0},{"had_liked":false,"id":305033,"user_name":"Quentin J.","can_delete":false,"product_type":"c1","uid":2693038,"ip_address":"","ucode":"50B980CBE6EBA3","user_header":"https://static001.geekbang.org/account/avatar/00/29/17/ae/f365efb0.jpg","comment_is_top":false,"comment_ctime":1627785310,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627785310","product_id":100037301,"comment_content":"老师，ddd和低代码平台的关系是什么呢？比如一个保险saas公司，想做自己的低代码平台用来快速开发新产品或新需求","like_count":0},{"had_liked":false,"id":304553,"user_name":"keys头","can_delete":false,"product_type":"c1","uid":1444919,"ip_address":"","ucode":"47C3E0648A8434","user_header":"https://static001.geekbang.org/account/avatar/00/16/0c/37/913de94f.jpg","comment_is_top":false,"comment_ctime":1627477023,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627477023","product_id":100037301,"comment_content":"欧老师，业务场景分析图中“创建系统”中的“系统”指的是什么？能具体说说吗？","like_count":0},{"had_liked":false,"id":302079,"user_name":"峰调雨顺","can_delete":false,"product_type":"c1","uid":2641017,"ip_address":"","ucode":"E1D685F7E844F2","user_header":"https://static001.geekbang.org/account/avatar/00/28/4c/79/33acb5de.jpg","comment_is_top":false,"comment_ctime":1626072114,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626072114","product_id":100037301,"comment_content":"请问事件拆分的颗粒度到什么层面，感觉事件下的命令也可以当做事件。还有一个事件下的命令是存在前后依赖的，一个命令执行完再执行下一个命令。这个是可以这样分解的吗？系统的校验控制算是命令吗？","like_count":0},{"had_liked":false,"id":300279,"user_name":"飞翔","can_delete":false,"product_type":"c1","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1625092248,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1625092248","product_id":100037301,"comment_content":"老师 定时任务 这个应该放在哪一层","like_count":0},{"had_liked":false,"id":282236,"user_name":"他们都叫我雷哥","can_delete":false,"product_type":"c1","uid":1683548,"ip_address":"","ucode":"C24F920C28A93D","user_header":"https://static001.geekbang.org/account/avatar/00/19/b0/5c/b85b0748.jpg","comment_is_top":false,"comment_ctime":1615169932,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615169932","product_id":100037301,"comment_content":"不知道现在老师还会不会回复，我现在有个保险行业客户账户体系建设的需求场景，具体如下：<br>1、账户分为权益账户和资金账户，资金账户又分为通用账户和指定账户<br>   1）资金账户主要用作客户充值、提现、使用，过程中要记录账户流水<br>   2）权益账户主要用作客户权益发放、权益核销、权益过期处理<br>   3）权益类型有满减券、红包、实物兑换券等，权益根据权益类型存在叠加使用情况<br><br>请教老师，这块的领域建模能否给点思路建议，谢谢","like_count":0},{"had_liked":false,"id":276967,"user_name":"KorbinSeaman","can_delete":false,"product_type":"c1","uid":1927695,"ip_address":"","ucode":"C212EFF2D92C10","user_header":"https://static001.geekbang.org/account/avatar/00/1d/6a/0f/4388e49d.jpg","comment_is_top":false,"comment_ctime":1612195627,"is_pvip":false,"replies":[{"id":"101038","content":"感谢您的建议。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1612852491,"ip_address":"","comment_id":276967,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612195627","product_id":100037301,"comment_content":"DDD的战略设计在实战中并没有展开讲，从事件风暴道最后设计出领域模型，希望可以详细讲一下战略设计的细节。作为读者，希望可以从实战案例中学习到一些经验性的总结。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514884,"discussion_content":"感谢您的建议。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612852491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276928,"user_name":"are you smoke","can_delete":false,"product_type":"c1","uid":1436864,"ip_address":"","ucode":"551D7598C76661","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo8oqLakeEtgzYuLutmn8F1icEhQmR1ib1Aqic9c9dkvPMEvqHIyMF0UljzfUyY17EOnB5N44SBHke4A/132","comment_is_top":false,"comment_ctime":1612181351,"is_pvip":false,"replies":[{"id":"101039","content":"对于初创产品，一般建议有产品愿景这个步骤，主要是统一思想和目标。而如果产品的定位非常清晰，这一步是可以跳过的。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1612852585,"ip_address":"","comment_id":276928,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612181351","product_id":100037301,"comment_content":"老师，不明白事件风暴为什么需要产品远景，如果只是toB的业务系统，可以不需要吗？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514871,"discussion_content":"对于初创产品，一般建议有产品愿景这个步骤，主要是统一思想和目标。而如果产品的定位非常清晰，这一步是可以跳过的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612852585,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272239,"user_name":"钟hao","can_delete":false,"product_type":"c1","uid":2399617,"ip_address":"","ucode":"3C7399C4DA52E9","user_header":"https://static001.geekbang.org/account/avatar/00/24/9d/81/085ae5fa.jpg","comment_is_top":false,"comment_ctime":1610001404,"is_pvip":false,"replies":[{"id":"99169","content":"很不好意思哈，由于篇幅和事件风暴本身实操性太强，没有把每一步的详细过程列出来，给你带来了困惑。其实事件风暴的过程不是太复杂，可能跟着实操做一遍，就相对能够比较容易的理解。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1610694105,"ip_address":"","comment_id":272239,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1610001404","product_id":100037301,"comment_content":"看的好困，太多的理论知识了，看了两遍才摸清讲的是什么，下面的评论也大多和我一样，实践太少了，而且是画好的图，跟本就不能按照图的逻辑去想，就好像镜花水月一样，抓不住重要的点，说实话文章很多的一些内容我还是去其他博客看了再回来理解作者的意思。不是说别人写的容易理解，而是老师说的太理论性了","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513211,"discussion_content":"很不好意思哈，由于篇幅和事件风暴本身实操性太强，没有把每一步的详细过程列出来，给你带来了困惑。其实事件风暴的过程不是太复杂，可能跟着实操做一遍，就相对能够比较容易的理解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610694105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267399,"user_name":"leesofte","can_delete":false,"product_type":"c1","uid":1014626,"ip_address":"","ucode":"41F327F87C515A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7b/62/80d0d8d2.jpg","comment_is_top":false,"comment_ctime":1607705189,"is_pvip":false,"replies":[{"id":"97835","content":"1、理论上一个实体是可以作为一个聚合的，这样这个实体就是聚合的根实体。<br>2、在DDD聚合设计原则里面有一条：尽量设计小聚合。我感觉您这样设计是没有问题的。理论上我们通过工厂可以一层一层引用场地、方案、设备等这些实体。但是这样设计出来的工厂聚合会非常大，而且引用的层次过深，不利于聚合的维护。而设计小聚合的话，我们可以基于不同的聚合来独立维护它们的生命周期，未来聚合的逻辑也会相对稳定，不会受业务变化而带来太多的影响。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1608794645,"ip_address":"","comment_id":267399,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607705189","product_id":100037301,"comment_content":"第一个问题：一个实体就可以构成一个聚合吗？那它自己就作为聚合根了？一个聚合也可以作为一个领域服务给应用服务提供底层服务吗？<br>第二个问题：智能工厂的场景，一个工厂会有多个场地，每个场地都会有一个场地方案，每个场地方案会包含多台智能设备，每台设备可能会配备一名操作人员也可能不需要配备人员，系统需要做工厂智能管理。里面的实体会包含系统各类状态，操作日志，操作规则，用户，权限，配件等等。我问下里面如何设计聚合比较合理？我自己设计感觉只有设备聚合，用户权限聚合，场地聚合，工厂聚合。然后设备又作为场地的值对象。用户、场地又有作为工厂聚合的值对象，一层套一层。这样的聚合设计对不对？？老师你是怎么设计的呢？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511627,"discussion_content":"1、理论上一个实体是可以作为一个聚合的，这样这个实体就是聚合的根实体。\n2、在DDD聚合设计原则里面有一条：尽量设计小聚合。我感觉您这样设计是没有问题的。理论上我们通过工厂可以一层一层引用场地、方案、设备等这些实体。但是这样设计出来的工厂聚合会非常大，而且引用的层次过深，不利于聚合的维护。而设计小聚合的话，我们可以基于不同的聚合来独立维护它们的生命周期，未来聚合的逻辑也会相对稳定，不会受业务变化而带来太多的影响。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608794645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259749,"user_name":"风","can_delete":false,"product_type":"c1","uid":1077538,"ip_address":"","ucode":"104638BF19B048","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/22/b8c596b6.jpg","comment_is_top":false,"comment_ctime":1604825536,"is_pvip":false,"replies":[{"id":"94416","content":"需要主持人引导，尽可能的按照流程边界或功能边界，按照用户旅程或业务场景来遍历各个不同的业务行为，参与的人自己写贴纸描述不同的业务行为，尽可能全面的找出领域中的事件、命令、实体等。其实这个过程也类似用例分析。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1604890615,"ip_address":"","comment_id":259749,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604825536","product_id":100037301,"comment_content":"事件风暴听着很好，但是不知该如何落地，也就是说把一群人组织在一起如何开展活动，需要让每个人都做些什么，是天马行空地想，还是划定方向，也就是主持人该如何组织一场事件风暴的开展呢？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509014,"discussion_content":"需要主持人引导，尽可能的按照流程边界或功能边界，按照用户旅程或业务场景来遍历各个不同的业务行为，参与的人自己写贴纸描述不同的业务行为，尽可能全面的找出领域中的事件、命令、实体等。其实这个过程也类似用例分析。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604890615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258138,"user_name":"Sun Fei","can_delete":false,"product_type":"c1","uid":1032631,"ip_address":"","ucode":"092EC0992050BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/b7/57f153f6.jpg","comment_is_top":false,"comment_ctime":1604309628,"is_pvip":false,"replies":[{"id":"94084","content":"哈哈，多看看回顾一下前后章节，这些内容都是有关联的。做事件风暴的目的就是识别领域中的对象和服务的过程，然后给他们建立关联和依赖关系，建立高内聚松耦合的聚合。然后划分限界上下文，指导微服务的设计和开发。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1604393024,"ip_address":"","comment_id":258138,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604309628","product_id":100037301,"comment_content":"就记住了事件风暴。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508562,"discussion_content":"哈哈，多看看回顾一下前后章节，这些内容都是有关联的。做事件风暴的目的就是识别领域中的对象和服务的过程，然后给他们建立关联和依赖关系，建立高内聚松耦合的聚合。然后划分限界上下文，指导微服务的设计和开发。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604393024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253279,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1566449,"ip_address":"","ucode":"5C3C24BDB38AC3","user_header":"https://static001.geekbang.org/account/avatar/00/17/e6/f1/f2d448ad.jpg","comment_is_top":false,"comment_ctime":1602672602,"is_pvip":false,"replies":[{"id":"92827","content":"用户旅程分析和场景分析的过程就是在做事件风暴，在这个过程中，团队成员会用贴纸描述旅程中的命令和事件，然后找出产生这些命令或事件的实体，找出实体之间的依赖或约束关系，形成聚合，在聚合内部会有一些业务逻辑规则的约束。然后根据限界上下文来对聚合进行归类，构建领域模型。当然在后面章节微服务的详细设计过程中还会有更详细的设计。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1603097226,"ip_address":"","comment_id":253279,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1602672602","product_id":100037301,"comment_content":"老师，这讲是不是没有体现事件风暴的过程啊。我们比较关系如何通过事件风暴，用可视化的方式进行沟通，并如何对识别的事件、约束、角色、命令等，进行DDD建模，识别实体等。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507032,"discussion_content":"用户旅程分析和场景分析的过程就是在做事件风暴，在这个过程中，团队成员会用贴纸描述旅程中的命令和事件，然后找出产生这些命令或事件的实体，找出实体之间的依赖或约束关系，形成聚合，在聚合内部会有一些业务逻辑规则的约束。然后根据限界上下文来对聚合进行归类，构建领域模型。当然在后面章节微服务的详细设计过程中还会有更详细的设计。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603097226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253258,"user_name":"xiaoacheng","can_delete":false,"product_type":"c1","uid":2223701,"ip_address":"","ucode":"3848B9C8093C92","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/4mialQmmo2p1jlNyyaZGJvV1SfUMAP1XfFHCJDtfknibomU5AKUkBh3Y6uaYVjjlTn7FmrCcaa2HMSiat212T1MyA/132","comment_is_top":false,"comment_ctime":1602664430,"is_pvip":false,"replies":[{"id":"92828","content":"您说的商品可能需要分业务场景考虑。在商品生命周期管理领域，商品可能就是聚合，然后会有商品的颜色，分类等与商品相关的值对象或者实体关联。而在销售领域，商品目录可能就是一个聚合，它的一部分数据来源于商品管理中的数据。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1603097467,"ip_address":"","comment_id":253258,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1602664430","product_id":100037301,"comment_content":"商品目录-》商品分类-》商品   这种怎么定义聚合呢？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507023,"discussion_content":"您说的商品可能需要分业务场景考虑。在商品生命周期管理领域，商品可能就是聚合，然后会有商品的颜色，分类等与商品相关的值对象或者实体关联。而在销售领域，商品目录可能就是一个聚合，它的一部分数据来源于商品管理中的数据。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603097467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252049,"user_name":"myking","can_delete":false,"product_type":"c1","uid":1970962,"ip_address":"","ucode":"D541EC93465891","user_header":"https://static001.geekbang.org/account/avatar/00/1e/13/12/1c9692e7.jpg","comment_is_top":false,"comment_ctime":1602078601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602078601","product_id":100037301,"comment_content":"把ddd直带入到rbac设计里面直接就懵逼了","like_count":0},{"had_liked":false,"id":250462,"user_name":"天信","can_delete":false,"product_type":"c1","uid":1232463,"ip_address":"","ucode":"4961959C9F19E9","user_header":"https://static001.geekbang.org/account/avatar/00/12/ce/4f/6afbb99a.jpg","comment_is_top":false,"comment_ctime":1601090664,"is_pvip":false,"replies":[{"id":"91772","content":"用Vision一笔一笔连出来的。","user_name":"作者回复","user_name_real":"欧创新","uid":"1316268","ctime":1601260934,"ip_address":"","comment_id":250462,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1601090664","product_id":100037301,"comment_content":"子域划分的那个椭圆形图是用什么工具做的","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506210,"discussion_content":"用Vision一笔一笔连出来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601260934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222800,"user_name":"Geek_70b64a","can_delete":false,"product_type":"c1","uid":2019505,"ip_address":"","ucode":"0256C364699CF0","user_header":"","comment_is_top":false,"comment_ctime":1590914513,"is_pvip":false,"replies":[{"id":"82162","content":"比较类似吧。只有能构建出领域模型，很多业务分析的方法都可以用。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1590927959,"ip_address":"","comment_id":222800,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590914513","product_id":100037301,"comment_content":"事件风暴怎么感觉其实就是系统的用例图，只不过这个用例图是由大家一起拼凑的。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496922,"discussion_content":"比较类似吧。只有能构建出领域模型，很多业务分析的方法都可以用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590927959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222318,"user_name":"jun","can_delete":false,"product_type":"c1","uid":1899314,"ip_address":"","ucode":"3A9633CA1FE72E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/LalJD9ruYQI5zVM1GOCe4PjunIbbeeMiacFHC4TAj0DBVeialKt3vRCLs9dxn1vYXvfp8pgcyaeEQkh1nde1JoBQ/132","comment_is_top":false,"comment_ctime":1590746123,"is_pvip":false,"replies":[{"id":"82025","content":"在子域划分时，我们可以按照流程的关键节点或者功能模块（一般是通用域）来划分，在划分完子域后，可以在子域内部开展事件风暴，然后根据事件风暴找出实体、聚合以及限界上下文。一个子域可能会有一到多个限界上下文，一个限界上下文可以建立一个领域模型，根据领域模型来设计微服务内的代码对象。用户、订单、商品可以认为是不同的子域，它可能就是一个限界上下文。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1590758915,"ip_address":"","comment_id":222318,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590746123","product_id":100037301,"comment_content":"哈哈， 电商领域，感觉不知道怎么开始。。。<br>天然就感觉用户、订单、商品分别属于各不同的业务领域，然后再根据它们具体的业务，提炼出服务。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496749,"discussion_content":"在子域划分时，我们可以按照流程的关键节点或者功能模块（一般是通用域）来划分，在划分完子域后，可以在子域内部开展事件风暴，然后根据事件风暴找出实体、聚合以及限界上下文。一个子域可能会有一到多个限界上下文，一个限界上下文可以建立一个领域模型，根据领域模型来设计微服务内的代码对象。用户、订单、商品可以认为是不同的子域，它可能就是一个限界上下文。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590758915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222212,"user_name":"清涧飞鸟","can_delete":false,"product_type":"c1","uid":1706683,"ip_address":"","ucode":"15F3B5FD4D7822","user_header":"https://static001.geekbang.org/account/avatar/00/1a/0a/bb/2f3b6af3.jpg","comment_is_top":false,"comment_ctime":1590717809,"is_pvip":false,"replies":[{"id":"81958","content":"你说的这个业务是贫领域模型，你可能找不到聚合根，大部分的操作是数据处理和查询。本质上是一个数据处理和查询模型吧。在你的系统里面大部分的工作应该是做事件的订阅和处理，领域事件的源头在其它系统里面。你可以采用DDD分层架构的思路来搭建微服务内部架构，但是不太好建立领域模型，所以领域层比较不好处理。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1590742168,"ip_address":"","comment_id":222212,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1590717809","product_id":100037301,"comment_content":"老师您好，昨天对公司现有系统准备进行DDD的重构，尝试进行事件风暴活动，结果第一步就挂了，找不到事件：这个产品是医院的一个数据整合平台，它主要是收集医院各个临床子系统的数据，然后进行简单清洗为一个患者全景展示页面提供数据，同时这个产品收集上来的数据和状态也为其他子系统提供数据服务；<br>我们是以医院全院流程与系统相关的事件为事件，如患者已挂号，就给我们的系统推送了新建的患者信息，患者已作了检查就给我们推送检查数据和状态数据，医生了写了报告就给我们的系统推送报告数据...... 我们用了这些事件，结果找不到命令，或者命令根本对我们的系统没意义（命令是我们系统提供对外的服务），<br><br>现在我的问题如下，请老师帮我看看：<br>在事件风暴中，<br>1）事件必须是本系统内的事件吗？<br>2）事件一定有命令触发吗？<br>3）就我上面的场景而言，我们的系统的事件与命令大致应该如何识别","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496714,"discussion_content":"你说的这个业务是贫领域模型，你可能找不到聚合根，大部分的操作是数据处理和查询。本质上是一个数据处理和查询模型吧。在你的系统里面大部分的工作应该是做事件的订阅和处理，领域事件的源头在其它系统里面。你可以采用DDD分层架构的思路来搭建微服务内部架构，但是不太好建立领域模型，所以领域层比较不好处理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590742168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1987136,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/52/40/e3dbca26.jpg","nickname":"旭日东升","note":"","ucode":"81B3AD64703B5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298447,"discussion_content":"事件是命令的结果。 感觉你这个系统 领域界限很清晰 基本没多少关联。就是不知道 病人挂号后 缴纳费用 会对 病人的信息产生影响吗？ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597301051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1706683,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0a/bb/2f3b6af3.jpg","nickname":"清涧飞鸟","note":"","ucode":"15F3B5FD4D7822","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275652,"discussion_content":"谢谢老师！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590746704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208775,"user_name":"峰","can_delete":false,"product_type":"c1","uid":1390326,"ip_address":"","ucode":"527BB65559F0B0","user_header":"https://static001.geekbang.org/account/avatar/00/15/36/f6/d65b7302.jpg","comment_is_top":false,"comment_ctime":1587436882,"is_pvip":false,"replies":[{"id":"78047","content":"1、是的，表有问题，我让调整一下，应用服务不应该放在聚合内。<br>2、领域服务只能操作自己聚合内的多个实体。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1587441237,"ip_address":"","comment_id":208775,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1587436882","product_id":100037301,"comment_content":"请问老师两个问题 :<br>1.上面那张表是不是示示的有问题，应用服务归到聚合下了？<br>2.领域服务是操作多个实体的？是指在一个聚合内操作多个实体？还是指操作不同聚合下的多个实体？<br>","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492615,"discussion_content":"1、是的，表有问题，我让调整一下，应用服务不应该放在聚合内。\n2、领域服务只能操作自己聚合内的多个实体。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587441237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1390326,"avatar":"https://static001.geekbang.org/account/avatar/00/15/36/f6/d65b7302.jpg","nickname":"峰","note":"","ucode":"527BB65559F0B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":241800,"discussion_content":"我看到多个资料上关于领域服务操作不同聚合，和老师讲的只操作一个聚合有歧义，操作单个聚合用聚合根不行了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587441767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206925,"user_name":"峰","can_delete":false,"product_type":"c1","uid":1390326,"ip_address":"","ucode":"527BB65559F0B0","user_header":"https://static001.geekbang.org/account/avatar/00/15/36/f6/d65b7302.jpg","comment_is_top":false,"comment_ctime":1586957649,"is_pvip":false,"replies":[{"id":"77295","content":"BC实际上就是一种特殊的子域。子域拆分一般到BC就可以了。这是因为当领域太大时，不太好开展事件风暴来构建领域模型，于是我们就将它逐级拆分成小的子域，然后在小的子域内去构建领域模型。一个子域可能会有多个BC，也可能刚好是一个BC。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1586998890,"ip_address":"","comment_id":206925,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1586957649","product_id":100037301,"comment_content":"请问老师，子域和BC是否非得要一对一才合理？如果出现一个子域出现了2个BC是否意味着还要往下再拆分子域？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491953,"discussion_content":"BC实际上就是一种特殊的子域。子域拆分一般到BC就可以了。这是因为当领域太大时，不太好开展事件风暴来构建领域模型，于是我们就将它逐级拆分成小的子域，然后在小的子域内去构建领域模型。一个子域可能会有多个BC，也可能刚好是一个BC。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586998890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1390326,"avatar":"https://static001.geekbang.org/account/avatar/00/15/36/f6/d65b7302.jpg","nickname":"峰","note":"","ucode":"527BB65559F0B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":234805,"discussion_content":"那这样说来一个bc对应一个入囗工程，也可以两个工程对应一个子域？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586999603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196175,"user_name":"Geek_deb968","can_delete":false,"product_type":"c1","uid":1440025,"ip_address":"","ucode":"2305597B009AF3","user_header":"https://static001.geekbang.org/account/avatar/00/15/f9/19/7c3b12ee.jpg","comment_is_top":false,"comment_ctime":1585242650,"is_pvip":true,"replies":[{"id":"74413","content":"人多有人多的分析方法，将团队拢在一起，主要是想在分析过程中建立团队通用语言。如果有熟悉这个领域的专家，其实人少也是可以做的，只不过后面需要花一点时间来做开发和测试指导。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1585275625,"ip_address":"","comment_id":196175,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585242650","product_id":100037301,"comment_content":"这是要一个航空母舰超级天团撑着哈","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489239,"discussion_content":"人多有人多的分析方法，将团队拢在一起，主要是想在分析过程中建立团队通用语言。如果有熟悉这个领域的专家，其实人少也是可以做的，只不过后面需要花一点时间来做开发和测试指导。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585275625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188471,"user_name":"IT_matters","can_delete":false,"product_type":"c1","uid":1074700,"ip_address":"","ucode":"71D7146E245D26","user_header":"https://static001.geekbang.org/account/avatar/00/10/66/0c/370626c4.jpg","comment_is_top":false,"comment_ctime":1584358193,"is_pvip":false,"replies":[{"id":"72717","content":"事件风暴包括所有业务行为和用户旅程分析的。查询或者创建这些行为，都是旅程的一部分。领域事件是在旅程分析过程中需要特别记下来一类操作，它可能会触发下一步的业务动作。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1584362859,"ip_address":"","comment_id":188471,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584358193","product_id":100037301,"comment_content":"事件风暴是从领域事件出发去分析的，那对于基于查询的用户旅程如何分析呢？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487425,"discussion_content":"事件风暴包括所有业务行为和用户旅程分析的。查询或者创建这些行为，都是旅程的一部分。领域事件是在旅程分析过程中需要特别记下来一类操作，它可能会触发下一步的业务动作。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584362859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181548,"user_name":"发飙的蜗牛","can_delete":false,"product_type":"c1","uid":1800868,"ip_address":"","ucode":"B2D96A2D0B6BA4","user_header":"https://static001.geekbang.org/account/avatar/00/1b/7a/a4/79ffe77c.jpg","comment_is_top":false,"comment_ctime":1582557608,"is_pvip":false,"replies":[{"id":"70376","content":"可以的，这个没有限制的。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1582620863,"ip_address":"","comment_id":181548,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582557608","product_id":100037301,"comment_content":"DDD实战课  事件风暴<br><br>事件风暴是DDD领域建模很重要的方法。在这个工作坊中，领域专家、产品经理、测试工程师、开发人员等一起工作，通过头脑风暴，也许场景分析，用户路程分析等按照一定的步骤来完成领域建模，建立统一语言。贴领域事件，贴命令，贴角色，贴外部系统，分离实体值对象，完成聚合，划分限界上下文，上下文映射，根据上下文依赖性，访问频率，非功能性需求，组织结构等划核心域，通用域，公共域，得出领域模型。<br>之后就是通过不断迭代去优化领域模型和微服务设计了！<br>问下老师，在贴命令的时候针对一个领域事件可以贴多个命令对吗？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485028,"discussion_content":"可以的，这个没有限制的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582620863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172157,"user_name":"磊明.许","can_delete":false,"product_type":"c1","uid":1024276,"ip_address":"","ucode":"3E2AA27C28BDDD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/14/df933307.jpg","comment_is_top":false,"comment_ctime":1579097385,"is_pvip":false,"replies":[{"id":"66940","content":"这里的用户你要区分一下。<br>第一个是操作系统后产生命令或领域事件的操作用户，这个是外部用例中的用户，可以认为是系统管理员。<br>第二个是系统中用于记录用户信息和体现用户行为的用户实体，这个用户是领域模型的实体对象。<br>操作用户通过创建用户这个命令产生了用户这个实体对象，在领域模型中创建用户本身也是用户实体的一个行为。<br>系统由操作用户创建的。操作用户会创建系统这个实体对象。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1579242282,"ip_address":"","comment_id":172157,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579097385","product_id":100037301,"comment_content":"第一步：从命令和事件中提取产生这些行为的实体。<br>对于提炼产生行为的实体有点迷惑，难道是「用户创建用户？」「系统创建系统？」<br>如果说是提炼名词还勉强能说通，请老师指点一下。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481644,"discussion_content":"这里的用户你要区分一下。\n第一个是操作系统后产生命令或领域事件的操作用户，这个是外部用例中的用户，可以认为是系统管理员。\n第二个是系统中用于记录用户信息和体现用户行为的用户实体，这个用户是领域模型的实体对象。\n操作用户通过创建用户这个命令产生了用户这个实体对象，在领域模型中创建用户本身也是用户实体的一个行为。\n系统由操作用户创建的。操作用户会创建系统这个实体对象。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579242282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171344,"user_name":"堵车","can_delete":false,"product_type":"c1","uid":1145404,"ip_address":"","ucode":"7BC1E50A4F8D3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/3c/87e015f8.jpg","comment_is_top":false,"comment_ctime":1578905943,"is_pvip":false,"replies":[{"id":"66535","content":"如果从一个前端来的，你可以做成一个对象，然后在用户接口层完成DTO到DO的转换就可以了。当然DTO和DO之间可以是多对多的转换。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1578984121,"ip_address":"","comment_id":171344,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578905943","product_id":100037301,"comment_content":"有这么一个方法，需要接收很多参数。5个订单领域的参数，1个或2个用户领域的参数，还有时间参数。我们接收一个大而全BO还是接收两三个BO？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481306,"discussion_content":"如果从一个前端来的，你可以做成一个对象，然后在用户接口层完成DTO到DO的转换就可以了。当然DTO和DO之间可以是多对多的转换。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578984121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168491,"user_name":"lupguo","can_delete":false,"product_type":"c1","uid":1009098,"ip_address":"","ucode":"1B55A01DF78647","user_header":"https://static001.geekbang.org/account/avatar/00/0f/65/ca/38dcd55a.jpg","comment_is_top":false,"comment_ctime":1578099163,"is_pvip":false,"replies":[{"id":"65508","content":"是这样的。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1578232891,"ip_address":"","comment_id":168491,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578099163","product_id":100037301,"comment_content":"其实传统产品建设流程也会包含前三部（事件风暴、产品愿景、场景分析），这个类似业务需求调研可行性的步骤。只是ddd感觉从宏观更高层次来设计系统，其核心就是找到产品的核心能力以及领域边界，指导确定微服务的服务边界和能力的范围！道与术的差异，技术更多关注的是偏操作和落地，但实际上分析过程就是信息收集、提取、精炼的过程，微服务只是实现方式罢了，信息才是核心（ps又想起吴军的信息与能量了）。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480231,"discussion_content":"是这样的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578232891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166617,"user_name":"silentyears","can_delete":false,"product_type":"c1","uid":1061748,"ip_address":"","ucode":"6E137BFEB874CA","user_header":"https://static001.geekbang.org/account/avatar/00/10/33/74/d9d143fa.jpg","comment_is_top":false,"comment_ctime":1577521294,"is_pvip":true,"replies":[{"id":"64814","content":"这里是分了一下阶段，命令往往会对应服务。领域建模过程通常不知道命令是哪种类型的服务，所以统称命令。微服务设计阶段基本就知道是哪种类型的服务来，所以可以明确出应用服务了。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1577662975,"ip_address":"","comment_id":166617,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1577521294","product_id":100037301,"comment_content":"老师，上述领域对象的表格（最后一个表格）中，为什么创建用户属于命令，而分配岗位属于应用服务呢？谢谢","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479559,"discussion_content":"这里是分了一下阶段，命令往往会对应服务。领域建模过程通常不知道命令是哪种类型的服务，所以统称命令。微服务设计阶段基本就知道是哪种类型的服务来，所以可以明确出应用服务了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577662975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1126396,"avatar":"https://static001.geekbang.org/account/avatar/00/11/2f/fc/246d2976.jpg","nickname":"丁丁","note":"","ucode":"585D7CBACA1B92","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126789,"discussion_content":"按照第4讲提到的领域服务，我理解在一个实体的范围内处理就叫命令，用该领域内的多个实体处理就叫领域服务。需要调用多个领域服务，就要上升到应用层来处理，就叫应用服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578538694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166202,"user_name":"windsor","can_delete":false,"product_type":"c1","uid":1120252,"ip_address":"","ucode":"ACCEDFAC248BC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/17/fc/be4a343b.jpg","comment_is_top":false,"comment_ctime":1577415188,"is_pvip":false,"replies":[{"id":"64854","content":"不同的公司情况可能会不一样。有的时候在HR创建员工时，并不一定会创建系统用户，因为用户是属于系统的。如果需要给这个员工赋予系统权限，这时候就需要从HR获取员工信息来创建用户，所以创建用户这个过程分成了两个阶段：先获取员工信息，然后再创建用户。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1577669396,"ip_address":"","comment_id":166202,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577415188","product_id":100037301,"comment_content":"欧老师，好。文中提到：“这些行为可能是一个或若干个命令组合在一起产生的，比如创建用户时，第一个命令是从公司 HR 系统中获取用户信息，第二个命令是根据 HR 的员工信息在用户中台创建用户，创建完用户后就会产生用户已创建的领域事件。”----实践中我们首先可能会想到创建用户的命令，可能就是HR系统发出的“创建用户”命令，文中的案例感觉更像是最终导致创建用户命令的整个过程都罗列出来，像是业务过程。那么实际操作时，怎么理解、怎么把握呢？  而且单从用户创建的例子来讲，感觉就是一个创建用户的命令就够了。用户数据应该是HR传过来的，如果是这样的流程，是否此处就只要一个hr系统的创建用户命令就够了？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479439,"discussion_content":"不同的公司情况可能会不一样。有的时候在HR创建员工时，并不一定会创建系统用户，因为用户是属于系统的。如果需要给这个员工赋予系统权限，这时候就需要从HR获取员工信息来创建用户，所以创建用户这个过程分成了两个阶段：先获取员工信息，然后再创建用户。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577669396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165070,"user_name":"james.d","can_delete":false,"product_type":"c1","uid":1087225,"ip_address":"","ucode":"CEE241856AF3B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/96/f9/3f976c91.jpg","comment_is_top":false,"comment_ctime":1577155026,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577155026","product_id":100037301,"comment_content":"用例分析 -&gt; 事件风暴 （事件改变了哪些对象的状态、属性）-&gt; 领域建模 -&gt; 根据实体关系构建ER图。<br>ER更能从底层反应出系统的整体架构，领域建模更有利于服务拆分&#47;模块化以及构建出可扩展的系统。","like_count":0},{"had_liked":false,"id":155798,"user_name":"@倾杯","can_delete":false,"product_type":"c1","uid":1128136,"ip_address":"","ucode":"FC718A923D214F","user_header":"https://static001.geekbang.org/account/avatar/00/11/36/c8/961e6267.jpg","comment_is_top":false,"comment_ctime":1574758185,"is_pvip":false,"replies":[{"id":"59894","content":"第十八节很详细了呀。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1574774031,"ip_address":"","comment_id":155798,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1574758185","product_id":100037301,"comment_content":"老师，实战篇的领域建模这一课，看完了，还是缺少实际案例和实操步骤。比如，就用户中心来说，首先这个用户中心是准备包括哪些功能的，即把哪些需求放到在这里来实现，然后怎么样对这些需求进行事件风暴，没有一个具体的实操过程，您只是给了几个建好的图示，我还是没能从这个过程中学会如何进行，最终得到这样一个模型。我看后面的课又没讲到这一块了，其实DDD让人摸不着的原因就是缺少手把手的实操案例，所以希望老师能够对领域建模这一环节进行一个完整的案例讲解。谢谢老师！","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475876,"discussion_content":"第十八节很详细了呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574774031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1128136,"avatar":"https://static001.geekbang.org/account/avatar/00/11/36/c8/961e6267.jpg","nickname":"@倾杯","note":"","ucode":"FC718A923D214F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":62158,"discussion_content":"哦，不好意思，先没看到😁😁","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574819544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154201,"user_name":"张迪","can_delete":false,"product_type":"c1","uid":1104835,"ip_address":"","ucode":"6A5D44999A0FEA","user_header":"https://static001.geekbang.org/account/avatar/00/10/db/c3/e11adfe8.jpg","comment_is_top":false,"comment_ctime":1574390542,"is_pvip":false,"replies":[{"id":"59194","content":"在权限设置的时候，系统会有多个岗位，岗位对应到系统的菜单权限。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1574399911,"ip_address":"","comment_id":154201,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574390542","product_id":100037301,"comment_content":"生成菜单 和 岗位有什么关系？不明白","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475406,"discussion_content":"在权限设置的时候，系统会有多个岗位，岗位对应到系统的菜单权限。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574399911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153922,"user_name":"观弈道人","can_delete":false,"product_type":"c1","uid":1016905,"ip_address":"","ucode":"F3BB619A33C605","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","comment_is_top":false,"comment_ctime":1574330427,"is_pvip":false,"replies":[{"id":"59182","content":"传统的需求分析过程大概是这样的：业务人员提出需求-》完成需求分析和设计-》完成系统设计-》开发。。。<br>需求分析过程中可能也会用到用例分析之类的，但是流程性很明显，主要有需求分析人员完成。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1574391836,"ip_address":"","comment_id":153922,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1574330427","product_id":100037301,"comment_content":"欧老师，想问下，相对于事件风暴的，传统需求分析方法是什么？谢谢。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475323,"discussion_content":"传统的需求分析过程大概是这样的：业务人员提出需求-》完成需求分析和设计-》完成系统设计-》开发。。。\n需求分析过程中可能也会用到用例分析之类的，但是流程性很明显，主要有需求分析人员完成。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574391836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"观弈道人","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55722,"discussion_content":"额，流程性很明显该怎么理解？待过的公司基本上都是产品经理画原型，开需求评审会，大家一起讨论","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574392406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152722,"user_name":"TH","can_delete":false,"product_type":"c1","uid":1053413,"ip_address":"","ucode":"C5EA20546DC09C","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/e5/592d9324.jpg","comment_is_top":false,"comment_ctime":1574069667,"is_pvip":true,"replies":[{"id":"58666","content":"是的。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1574072611,"ip_address":"","comment_id":152722,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574069667","product_id":100037301,"comment_content":"还有一个问题：如果不使用事件驱动架构，那么发布-订阅模式会被简单的函数调用模式所取代，这时候关注重点是否变成了命令而不是事件？由命令转化为各个实体功能或者领域&#47;应用服务。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474914,"discussion_content":"是的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574072611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152719,"user_name":"TH","can_delete":false,"product_type":"c1","uid":1053413,"ip_address":"","ucode":"C5EA20546DC09C","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/e5/592d9324.jpg","comment_is_top":false,"comment_ctime":1574069267,"is_pvip":true,"replies":[{"id":"58662","content":"这样理解就对了。<br>理解核心理念后，灵活运用。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1574071040,"ip_address":"","comment_id":152719,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574069267","product_id":100037301,"comment_content":"之前也一直疑惑于领域建模和技术架构异构的问题，看来结合实际情况，领域模型和微服务也不一定是一对一的关系。有位同学留言说他们按DDD建模但是最终以单体部署，这也是我目前的情况，因为还没有搭建起微服务运行的条件（我们用的是Python，没有很好的框架可以用，而且我们做的是桌面应用）。但是我觉得这不妨碍DDD的落地，至少按DDD的思路对项目进行合理分层、把需求落实到各个领域对象，这对后续的需求变更和架构演进都有好处。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474912,"discussion_content":"这样理解就对了。\n理解核心理念后，灵活运用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574071040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151511,"user_name":"川杰","can_delete":false,"product_type":"c1","uid":1099750,"ip_address":"","ucode":"815211E1D698E6","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/e6/11f21cb4.jpg","comment_is_top":false,"comment_ctime":1573733060,"is_pvip":false,"replies":[{"id":"58259","content":"订阅在应用层，事件的处理属于领域逻辑所以放在领域层。应用服务通过调领域层逻辑来实现。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573736352,"ip_address":"","comment_id":151511,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573733060","product_id":100037301,"comment_content":"您好，有个地方没明白：<br>虽然应用层和领域层都可以进行事件的发布和处理，但为了实现事件的统一管理，我建议你将微服务内所有事件的发布和订阅的处理统一放到应用层，事件相关的核心业务逻辑放在领域层。通过应用层调用领域层服务，来实现完整的事件发布和订阅处理流程。<br>假设场景：<br>事件：密码已重置；<br>订阅着：消息通知服务；<br>业务流程：密码重置事件发生；消息通知服务响应，发送邮件至客户邮箱；<br><br>通过应用层来调用领域服务，来实现完整的事件发布和订阅处理流程。<br>如果以以上场景为例，请问这句话什么意思？是不是说：<br>在应用层完成，通知事件的订阅；然后，应用层调用 通知服务（领域）的API，完成业务流程？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474509,"discussion_content":"订阅在应用层，事件的处理属于领域逻辑所以放在领域层。应用服务通过调领域层逻辑来实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573736352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151482,"user_name":"张迪","can_delete":false,"product_type":"c1","uid":1104835,"ip_address":"","ucode":"6A5D44999A0FEA","user_header":"https://static001.geekbang.org/account/avatar/00/10/db/c3/e11adfe8.jpg","comment_is_top":false,"comment_ctime":1573729388,"is_pvip":false,"replies":[{"id":"58261","content":"在权限域吧。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573736492,"ip_address":"","comment_id":151482,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573729388","product_id":100037301,"comment_content":"用户信息领域为什么有分配岗位？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474490,"discussion_content":"在权限域吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573736492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151376,"user_name":"liuchangit","can_delete":false,"product_type":"c1","uid":1209215,"ip_address":"","ucode":"340AC5EE9522D0","user_header":"https://static001.geekbang.org/account/avatar/00/12/73/7f/5cc5ac12.jpg","comment_is_top":false,"comment_ctime":1573709022,"is_pvip":false,"replies":[{"id":"58227","content":"领域模型只是根据业务属性来建立的初步的模型，它的建立过程主要是偏业务多一些，微服务的拆分还需要具体场景具体分析，需要考虑系统的高性能、安全性、版本发布频率是否一致、团队沟通成本等等。每个企业的情况都不一样，不能一概而论。<br>你的这个分析很好，拆分的时候就是要考虑这些内容。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573714717,"ip_address":"","comment_id":151376,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1573709022","product_id":100037301,"comment_content":"老师，请教个问题：用户中台分为用户信息、权限、认证三个限界上下文，对应开发三个微服务。用户中心一般需要有管理后台供运营人员管理操作，也会给业务系统提供接入的api接口等，那么这三个微服务都各自包含自身的管理后台和api接口吗？一般情况下，管理后台访问很低，占用资源少，也不需要高可用，一般放在内网；API接口访问量大，需要部署多实例，一般会暴露在公网；管理后台和API放在一个微服务内，从资源隔离、可用性和安全性都不合理，如果放在两个微服务，那数据库有几个？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474458,"discussion_content":"领域模型只是根据业务属性来建立的初步的模型，它的建立过程主要是偏业务多一些，微服务的拆分还需要具体场景具体分析，需要考虑系统的高性能、安全性、版本发布频率是否一致、团队沟通成本等等。每个企业的情况都不一样，不能一概而论。\n你的这个分析很好，拆分的时候就是要考虑这些内容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573714717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1209215,"avatar":"https://static001.geekbang.org/account/avatar/00/12/73/7f/5cc5ac12.jpg","nickname":"liuchangit","note":"","ucode":"340AC5EE9522D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":50520,"discussion_content":"每个微服务是否要求有独立的数据库？对于管理后台和前端服务接口，若分成两个微服务，数据库需要分成两个吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573731955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151108,"user_name":"Alan思宇","can_delete":false,"product_type":"c1","uid":1087301,"ip_address":"","ucode":"C22ABF25069DFF","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/45/c00f47b2.jpg","comment_is_top":false,"comment_ctime":1573654246,"is_pvip":false,"replies":[{"id":"58163","content":"支付单和物流单的数据是来源于支付和物流域吧。订单域、逆向域和换货域这三个域里的聚合根只是引用支付和物流域的数据吧，订单和支付和物流的数据都是一对一不?如果是一对一，并且需要整体替换，而且不会针对在订单上对支付和物流数据做大量查询统计，你可以将支付和物流的数据设计为订单聚合根的值对象，如果这几不满足，你将它们设计为订单聚合根的引用实体也行。不需要在订单业务中，再设计支付单域和物流单域。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573654968,"ip_address":"","comment_id":151108,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573654246","product_id":100037301,"comment_content":"老师，请教个问题：<br>比如在订单业务，主要有订单、退款单、换货单、支付单、物流单，这里支付单和物流单并不是实际的支付流水和快递运单，只是订单里面需要维护的支付数据及物流信息数据。<br>我们现在划分出了三个领域，分别是订单域、逆向域、换货域；<br>不过不管是订单、逆向还是换货，其实都需要支付单和物流单，那么这块应该怎么设计呢?再划分出单独的支付单域和物流单域，作为支撑域 去服务上面三个业务域么？<br>","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474366,"discussion_content":"支付单和物流单的数据是来源于支付和物流域吧。订单域、逆向域和换货域这三个域里的聚合根只是引用支付和物流域的数据吧，订单和支付和物流的数据都是一对一不?如果是一对一，并且需要整体替换，而且不会针对在订单上对支付和物流数据做大量查询统计，你可以将支付和物流的数据设计为订单聚合根的值对象，如果这几不满足，你将它们设计为订单聚合根的引用实体也行。不需要在订单业务中，再设计支付单域和物流单域。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573654968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150962,"user_name":"你的美","can_delete":false,"product_type":"c1","uid":1529298,"ip_address":"","ucode":"71B97BDBA3CDC3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iacfiaRC2Vze9eEaVibAFkngm4nmA0DwoibC3kHj6pCOQ87VDa955kK3kavnrDnibmfeIFd4G6Ab2fDkNrbUapL8ibAQ/132","comment_is_top":false,"comment_ctime":1573635383,"is_pvip":false,"replies":[{"id":"58159","content":"不理解你为什么做了微服务还要放在单体里面运行呢？<br>是因为没有容器这些云平台吗？还是为了整体运维和与原来的单体集成方便？<br>其实你可以将它部署为单独的微服务，然后暴露接口给原来的单体应用，中间做一个接口的协议转换就可以了，如果两者业务逻辑上有差异，需要适配的话，你也可以加一层防腐层代码，避免污染领域模型。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573654125,"ip_address":"","comment_id":150962,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1573635383","product_id":100037301,"comment_content":"欧老师好，我们做新项目微服务开发，先把DDD架构整体设计好，然后在根据模块做封装，最后在部署到单体结构里运行，这样的流程可以吗？谢谢老师辛苦","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474327,"discussion_content":"不理解你为什么做了微服务还要放在单体里面运行呢？\n是因为没有容器这些云平台吗？还是为了整体运维和与原来的单体集成方便？\n其实你可以将它部署为单独的微服务，然后暴露接口给原来的单体应用，中间做一个接口的协议转换就可以了，如果两者业务逻辑上有差异，需要适配的话，你也可以加一层防腐层代码，避免污染领域模型。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573654125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1529298,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/iacfiaRC2Vze9eEaVibAFkngm4nmA0DwoibC3kHj6pCOQ87VDa955kK3kavnrDnibmfeIFd4G6Ab2fDkNrbUapL8ibAQ/132","nickname":"你的美","note":"","ucode":"71B97BDBA3CDC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":50282,"discussion_content":"为了整体的运维和前期的费用节流，封装是为了后期好拆分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573699017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150956,"user_name":"锦鲤","can_delete":false,"product_type":"c1","uid":1343717,"ip_address":"","ucode":"B9F1495E39F00A","user_header":"https://static001.geekbang.org/account/avatar/00/14/80/e5/251d89b5.jpg","comment_is_top":false,"comment_ctime":1573634523,"is_pvip":false,"replies":[{"id":"58162","content":"其实两者都是建立企业级的业务架构的策略，自顶向下主要从业务角度出发，而自底向上呢主要从业务和系统现状出发，考虑现有系统情况会更多一些。虽然领域建模时都是在一个小的业务域内，但是最后都还有一个模型查重的过程，以解决模型跨域重复的问题。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573654376,"ip_address":"","comment_id":150956,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573634523","product_id":100037301,"comment_content":"老师，你好，大家理解的DDD都是自底向上进行业务领域建模设计，从企业整体角度来看，可能这个方法只是从微观层面上解决了部分问题，不能从整体宏观层面上解决跨领域级的问题。之前有分享过DDD也可以自上而下的进行领域建模设计。那么这种方式是否解决跨领域级的业务问题？它和企业级业务架构的方法有什么不同吗？","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474324,"discussion_content":"其实两者都是建立企业级的业务架构的策略，自顶向下主要从业务角度出发，而自底向上呢主要从业务和系统现状出发，考虑现有系统情况会更多一些。虽然领域建模时都是在一个小的业务域内，但是最后都还有一个模型查重的过程，以解决模型跨域重复的问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573654376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150648,"user_name":"美美","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1573574151,"is_pvip":false,"replies":[{"id":"57951","content":"在分析的时候，会分析出修改配置项的命令的，这个命令会对配置项实体操作，可能对应到一个应用服务。而这个实体初始化的数据可能来源于数据库配置，或者配置中心，或者文件。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573602834,"ip_address":"","comment_id":150648,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573574151","product_id":100037301,"comment_content":"老师，请教一下。<br>比如门店设置页可以设置功能A开启，功能B关闭，功能C暂停，这种配置类的后台如何进行领域建模，实体怎么分析出来。。","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474231,"discussion_content":"在分析的时候，会分析出修改配置项的命令的，这个命令会对配置项实体操作，可能对应到一个应用服务。而这个实体初始化的数据可能来源于数据库配置，或者配置中心，或者文件。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573602834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150604,"user_name":"Geek_1c00cb","can_delete":false,"product_type":"c1","uid":1424080,"ip_address":"","ucode":"5B98BA2BBAD0DD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKvnkXZiaop0haMiarN6TJTUyRtAK3NUetGBJP6MrZBmaadibWPUW1bKib4U51DyVEQkEicUNukWFTzzbQ/132","comment_is_top":false,"comment_ctime":1573566809,"is_pvip":false,"replies":[{"id":"57939","content":"😄，可能是一个师傅带出来的。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573571393,"ip_address":"","comment_id":150604,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573566809","product_id":100037301,"comment_content":"感觉和四色原型图有异曲同工之妙~","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474215,"discussion_content":"😄，可能是一个师傅带出来的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573571393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150154,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1573470079,"is_pvip":true,"replies":[{"id":"57772","content":"所以要慢慢培养这种DDD的文化。","user_name":"作者回复","user_name_real":"渔","uid":"1316268","ctime":1573472541,"ip_address":"","comment_id":150154,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1573470079","product_id":100037301,"comment_content":"现实是很多时候都没有这个level和场景去应用战略设计，只能拿方法论来结合现在的实际情况来模拟练习，战术设计感觉能上手就用，所以在会受到更多青睐或者有更多具体的细节上的问题~","like_count":0,"discussions":[{"author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474076,"discussion_content":"所以要慢慢培养这种DDD的文化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573472541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1142335,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6e/3f/49e5079f.jpg","nickname":"楞伽山人","note":"","ucode":"5859C06DAC790D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1316268,"avatar":"https://static001.geekbang.org/account/avatar/00/14/15/ac/ba1f2494.jpg","nickname":"欧创新","note":"","ucode":"1F5AF0A327197A","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":543542,"discussion_content":"大家都不懂DDD这个就可能比较难落地了 \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641199732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":474076,"ip_address":""},"score":543542,"extra":""}]}]},{"had_liked":false,"id":149892,"user_name":"密码123456","can_delete":false,"product_type":"c1","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1573430436,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573430436","product_id":100037301,"comment_content":"模板有了，就是文章中的图片。请忽略我上个留言","like_count":0},{"had_liked":false,"id":149890,"user_name":"密码123456","can_delete":false,"product_type":"c1","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1573430239,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573430239","product_id":100037301,"comment_content":"原理很简单，实践却很难。能帮我们整理个具体实践的模板吗？当我们开始不会用的时候，直接套。套的多了就会开始有自己的想法了。","like_count":0}]}