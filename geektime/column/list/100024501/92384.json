{"id":92384,"title":"21 | é™¤äº† Cocoaï¼ŒiOSè¿˜å¯ä»¥ç”¨å“ªäº› GUI æ¡†æ¶å¼€å‘ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æˆ´é“­ã€‚</p><p>åœ¨ä¸“æ çš„ç¬¬2ç¯‡æ–‡ç« â€œ<a href=\"https://time.geekbang.org/column/article/85331\">App å¯åŠ¨é€Ÿåº¦æ€ä¹ˆåšä¼˜åŒ–ä¸ç›‘æ§ï¼Ÿ</a>â€ä¸­ï¼Œæˆ‘å’Œä½ åˆ†äº«äº†å¦‚ä½•å®ç°æ–¹æ³•çº§åˆ«çš„å¯åŠ¨ä¼˜åŒ–ï¼Œä»è€Œå®ç°æ•´ä¸ª App å¯åŠ¨é€Ÿåº¦çš„ä¼˜åŒ–ã€‚</p><p>é€šè¿‡è¿™ç¯‡æ–‡ç« çš„å†…å®¹ä½ ä¼šå‘ç°ï¼ŒæŠŠå¯ä»¥ä¼˜åŒ–æ–¹æ³•çš„å·¥ä½œéƒ½å¤„ç†å®Œä¹‹åï¼Œæ¯”å¦‚ä¸»çº¿ç¨‹ä¸Šçš„å¤§é‡è®¡ç®—ã€IO æ“ä½œã€æ‡’åŠ è½½ï¼ˆä¹Ÿå«ä½œå»¶æ—¶åŠ è½½ï¼Œå³å½“å¯¹è±¡éœ€è¦ç”¨åˆ°çš„æ—¶å€™å†å»åŠ è½½ï¼‰ï¼Œå°±åªå‰©ä¸‹äº†GUIï¼ˆGraphical User Interface å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼‰ ç›¸å…³çš„æ–¹æ³•ã€‚</p><p>åœ¨iOSå¼€å‘æ—¶ï¼Œé»˜è®¤ä½¿ç”¨çš„éƒ½æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ Cocoa Touch æ¡†æ¶ï¼Œæ‰€ä»¥å¦‚æœä½ è¿˜æƒ³è¿›ä¸€æ­¥æé«˜ç•Œé¢å“åº”é€Ÿåº¦ï¼Œèµ¶è¶…å…¶ä»–ä½¿ç”¨ Cocoa Touchæ¡†æ¶çš„ App ç”¨æˆ·ä½“éªŒæ—¶ï¼Œå°±è¦è€ƒè™‘ä½¿ç”¨å…¶ä»–çš„ GUI æ¡†æ¶æ¥ä¼˜åŒ– App ç•Œé¢çš„å“åº”é€Ÿåº¦äº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€èµ·èŠèŠé™¤äº† Cocoa Touch æ¡†æ¶å¤–ï¼Œè¿˜æœ‰å“ªäº› GUI æ¡†æ¶å¯ä»¥ç”¨æ¥åš iOS å¼€å‘ã€‚</p><h2>ç›®å‰æµè¡Œçš„GUIæ¡†æ¶</h2><p>ç°åœ¨æµè¡Œçš„ GUI æ¡†æ¶é™¤äº† Cocoa Touch å¤–ï¼Œè¿˜æœ‰ WebKitã€Flutterã€Textureï¼ˆåŸå AsyncDisplayKitï¼‰ã€Blinkã€Android GUI ç­‰ã€‚å…¶ä¸­ï¼ŒWebKitã€Flutterã€Texture å¯ä»¥ç”¨äº iOS å¼€å‘ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±å’Œä½ è¯´è¯´è¿™ä¸‰æ¬¾GUIæ¡†æ¶ã€‚</p><!-- [[[read_end]]] --><p>WebKit æ¡†æ¶åŒ…å«äº† WebCore å’Œ JavaScriptCoreï¼Œä½¿ç”¨ HTML å’Œ CSS è¿›è¡Œå¸ƒå±€ï¼Œä½¿ç”¨JavaScript ç¼–å†™ç¨‹åºã€‚WebKit è¿˜æä¾›äº† Objective-C åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼Œæ–¹ä¾¿åŸºäº Cocoa API çš„åº”ç”¨ä½¿ç”¨ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„UIWebViewå’ŒWKWebViewæ§ä»¶éƒ½æ˜¯åŸºäºWebKitæ¡†æ¶ã€‚</p><p>å…³äº WebKitæ¡†æ¶ï¼Œæˆ‘ä»¥å‰å†™è¿‡ä¸€ç¯‡åšå®¢â€œ<a href=\"https://ming1016.github.io/2017/10/11/deeply-analyse-webkit/\">æ·±å…¥å‰–æ WebKit</a>â€ï¼Œè¯¦ç»†åˆ†æäº†å®ƒçš„åŸç†ã€‚æ„Ÿå…´è¶£çš„è¯ï¼Œä½ å¯ä»¥å»çœ‹ä¸€ä¸‹ã€‚</p><p>Flutter æ˜¯ Googleå…¬å¸äº2017å¹´æ¨å‡ºçš„ä¸€ä¸ªç§»åŠ¨åº”ç”¨å¼€å‘çš„ GUI æ¡†æ¶ï¼Œä½¿ç”¨ Dart è¯­è¨€ç¼–å†™ç¨‹åºï¼Œä¸€å¥—ä»£ç å¯ä»¥åŒæ—¶è¿è¡Œåœ¨iOSå’ŒAndroidå¹³å°ã€‚å¯¹Flutter çš„ç›¸å…³ä»‹ç»ï¼Œæˆ‘ä¼šåœ¨ä¸“æ åé¢çš„æ–‡ç« â€œReact Nativeã€Flutter ç­‰è·¨ç«¯æ–¹æ¡ˆï¼Œåº”è¯¥æ€ä¹ˆé€‰ï¼Ÿâ€å’Œâ€œiOS åŸç”Ÿã€å¤§å‰ç«¯å’Œ Flutter åˆ†åˆ«æ˜¯æ€ä¹ˆæ¸²æŸ“çš„ï¼Ÿâ€é‡Œï¼Œå’Œä½ è¯¦ç»†è¯´æ˜ã€‚</p><p>Textureæ¡†æ¶çš„åŸºæœ¬å•å…ƒï¼Œæ˜¯åŸºäº UIView æŠ½è±¡çš„èŠ‚ç‚¹ ASDisplayNodeã€‚å’Œ UIView ä¸åŒçš„æ˜¯ ï¼ŒASDisplayNode æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥åœ¨åå°çº¿ç¨‹ä¸Šå¹¶è¡Œå®ä¾‹åŒ–å’Œé…ç½®æ•´ä¸ªå±‚çº§ç»“æ„ã€‚Textureæ¡†æ¶çš„å¼€å‘è¯­è¨€ï¼Œä½¿ç”¨çš„æ˜¯è‹¹æœå…¬å¸è‡ªå®¶çš„ Objective-C å’Œ Swiftã€‚</p><p>WebKitã€Flutterã€Textureè¿™ä¸‰ä¸ª GUI æ¡†æ¶ï¼Œä¸Cocoa Touchçš„å¯¹æ¯”ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/04/7b4ce475bb30b7add7648d54d6b18604.png?wh=1920*1080\" alt=\"\"></p><center><span class=\"reference\">å›¾1 WebKitã€Flutterã€Textureæ¡†æ¶ï¼Œä¸Cocoa Touchçš„å¯¹æ¯”</span></center><p>é€šè¿‡è¿™ä¸ªå¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒTextureæ¡†æ¶å’ŒCocoa Touchæ¡†æ¶ï¼Œåœ¨ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ã€æ¸²æŸ“è¿™ä¸¤ä¸ªæ–¹é¢ï¼Œæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚å…¶å®ï¼Œ<strong>Textureæ¡†æ¶ï¼Œæ­£æ˜¯å»ºç«‹åœ¨Cocoa Touchæ¡†æ¶ä¹‹ä¸Šçš„ã€‚</strong></p><p>æˆ‘ä»¬å†ä»è¿™äº›æ¡†æ¶ä½¿ç”¨çš„å¸ƒå±€æ¥çœ‹ä¸€ä¸‹ï¼Œ<strong>Texture å’Œå…¶ä»– GUI æ¡†æ¶ä¸€æ ·éƒ½æ˜¯ä½¿ç”¨çš„åº”ç”¨æ›´åŠ å¹¿æ³›çš„FlexBoxå¸ƒå±€</strong>ã€‚ä½¿ç”¨FlexBox å¸ƒå±€çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥è®©iOSå¼€å‘è€…ç”¨åˆ°å‰ç«¯å…ˆè¿›çš„W3Cæ ‡å‡†å“åº”å¼å¸ƒå±€ã€‚ç›®å‰ï¼Œ FlexBox å·²ç»æ˜¯å¸ƒå±€çš„è¶‹åŠ¿ï¼Œè¿ iOS æ–°æ¨å‡ºçš„ UIStackView å¸ƒå±€æ–¹å¼ï¼Œä¹Ÿæ˜¯æŒ‰ç…§ FlexBox å¸ƒå±€æ€è·¯æ¥è®¾è®¡çš„ã€‚</p><p>å¦å¤–ï¼Œ<strong>Texture æ˜¯è¿™äº›æ¡†æ¶ä¸­å”¯ä¸€ä½¿ç”¨å¼‚æ­¥èŠ‚ç‚¹è®¡ç®—çš„æ¡†æ¶</strong>ã€‚ä½¿ç”¨å¼‚æ­¥èŠ‚ç‚¹è®¡ç®—ï¼Œå¯ä»¥æé«˜ä¸»çº¿ç¨‹çš„å“åº”é€Ÿåº¦ã€‚æ‰€ä»¥ï¼ŒTextureåœ¨èŠ‚ç‚¹è®¡ç®—ä¸Šçš„æ•ˆç‡è¦æ¯”å…¶ä»–æ¡†æ¶é«˜ã€‚</p><p>åŸºäºä»¥ä¸Šä¸‰ä¸ªæ–¹é¢çš„åŸå› ï¼Œå¦‚æœè¦ä»Cocoa Touchæ¡†æ¶å‰ç§»åˆ°å…¶ä»–çš„GUIæ¡†æ¶ï¼Œä»å­¦ä¹ æˆæœ¬ã€æ”¶ç›Šç­‰è§’åº¦è€ƒè™‘çš„è¯ï¼Œè½¬åˆ°Textureä¼šæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä¼šå’Œä½ é‡ç‚¹åˆ†æä¸€ä¸‹Textureæ¡†æ¶ã€‚å› ä¸ºç°åœ¨çš„GUIæŠ€æœ¯å·²ç»éå¸¸æˆç†Ÿäº†ï¼Œå„ç§GUIæ¡†æ¶çš„åº•å±‚ä¹Ÿå¤§åŒå°å¼‚ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä¼šå…ˆå’Œä½ ä»‹ç»GUIæ¡†æ¶ä¸­çš„é€šç”¨æ€§å†…å®¹ï¼Œç„¶åå†ä¸ä½ è®²è¿°Textureçš„ç‹¬ç‰¹ä¹‹å¤„ã€‚</p><h2>GUI æ¡†æ¶é‡Œéƒ½æœ‰ä»€ä¹ˆï¼Ÿ</h2><p>GUI æ¡†æ¶çš„åŸºæœ¬å•å…ƒæ˜¯æ§ä»¶ï¼Œä½ ç†Ÿæ‚‰çš„æŒ‰é’®ã€å›¾ç‰‡ã€æ–‡æœ¬æ¡†ç­‰ç­‰å°±æ˜¯æ§ä»¶ã€‚</p><p>æ§ä»¶ä¸»è¦è´Ÿè´£ç•Œé¢å…ƒç´ æ•°æ®çš„å­˜å‚¨å’Œæ›´æ–°ï¼Œè¿™äº›åŸå§‹æ•°æ®éƒ½å­˜å‚¨åœ¨æ§ä»¶çš„å±æ€§ä¸Šï¼Œç›´æ¥æ›´æ–°æ§ä»¶çš„å±æ€§å°±èƒ½å¤Ÿå®Œæˆç•Œé¢å…ƒç´ æ›´æ–°æ“ä½œï¼Œæ§ä»¶çš„å±æ€§è®¾ç½®æˆä¸åŒçš„å€¼ä¼šè®©ç•Œé¢å…ƒç´ å‘ˆç°ä¸åŒçš„å¤–è§‚ã€‚</p><p>æ§ä»¶ä¹‹é—´çš„å…³ç³»æ˜¯ç”±æ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰è¿™ç§æŠ½è±¡çš„æ ‘ç»“æ„æ¥è®°å½•çš„ã€‚æ¸²æŸ“æ ‘å…³æ³¨çš„æ˜¯ç•Œé¢çš„å¸ƒå±€ï¼Œæ§ä»¶åœ¨ç•Œé¢ä¸­çš„ä½ç½®å’Œå¤§å°éƒ½æ˜¯ç”±æ¸²æŸ“æ ‘æ¥ç¡®å®šã€‚</p><p>åŸºäºæ¸²æŸ“æ ‘ï¼ŒGUI æ¡†æ¶è¿˜ä¼šåˆ›å»ºä¸€ä¸ªæ¸²æŸ“å±‚æ ‘ï¼ˆRenderLayer Treeï¼‰ï¼Œæ¸²æŸ“å±‚æ ‘ç”±æ¸²æŸ“å±‚å¯¹è±¡ç»„æˆï¼Œæ ¹æ® GUI æ¡†æ¶çš„ä¼˜åŒ–æ¡ä»¶æ¥ç¡®å®šåˆ›å»ºå“ªäº›æ¸²æŸ“å±‚å¯¹è±¡ï¼Œæ¯æ¬¡æ–°åˆ›å»ºä¸€ä¸ªæ¸²æŸ“å±‚å¯¹è±¡å°±ä¼šå»è®¾ç½®å®ƒçš„çˆ¶å¯¹è±¡å’Œå…„å¼Ÿå¯¹è±¡ã€‚æ¸²æŸ“å±‚å¯¹è±¡åˆ›å»ºå®Œæ¯•ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦å°†å„æ¸²æŸ“å±‚å¯¹è±¡é‡Œçš„æ§ä»¶æŒ‰ç…§æ¸²æŸ“æ ‘å¸ƒå±€ç”Ÿæˆ Bitmapï¼Œæœ€å GPU å°±å¯ä»¥æ¸²æŸ“ Bitmap æ¥è®©ä½ çœ‹åˆ°ç•Œé¢äº†ã€‚</p><p>æ§ä»¶ã€æ¸²æŸ“æ ‘ã€æ¸²æŸ“å±‚æ ‘ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f4/74/f424e846b4de4f338350a00fbe749074.png?wh=1920*1080\" alt=\"\"></p><center><span class=\"reference\">å›¾2 æ§ä»¶ã€æ¸²æŸ“æ ‘ã€æ¸²æŸ“å±‚æ ‘ä¹‹é—´çš„å…³ç³»</span></center><p>WebKit å’Œ Flutter éƒ½æ˜¯å¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒä»¬çš„ä»£ç çœ‹åˆ° GUI æ¡†æ¶å…·ä½“æ˜¯æ€ä¹ˆå®ç°æ§ä»¶ã€æ¸²æŸ“æ ‘ã€æ¸²æŸ“å±‚æ ‘å’Œç”Ÿæˆ Bitmap çš„ã€‚</p><p>WebKit åœ¨ GUI æ¡†æ¶å±‚é¢çš„æ•ˆç‡å¹¶ä¸ä½ï¼Œå•å°±æ¸²æŸ“æ¥è¯´ï¼Œå®ƒçš„æ€§èƒ½ä¸€ç‚¹ä¹Ÿä¸å¼±äº Cocoa Touch å’Œ Flutter æ¡†æ¶ã€‚</p><ul>\n<li>ä½¿ç”¨WebKitçš„ç½‘é¡µæ˜¾ç¤ºæ…¢ï¼Œä¸»è¦æ˜¯ç”±äº CSSï¼ˆCascading Style Sheetï¼‰ å’Œ JavaScript èµ„æºåŠ è½½æ–¹å¼å¯¼è‡´çš„ã€‚</li>\n<li>åŒæ—¶ï¼Œè§£ææ—¶ HTMLã€CSSã€JavaScript éœ€è¦å…¼å®¹è€ç‰ˆæœ¬ï¼ŒJavaScript ç±»å‹æ¨æ–­å¤±è´¥ä¼šé‡æ¥ï¼Œåˆ—è¡¨ç¼ºå°‘é‡ç”¨æœºåˆ¶ç­‰åŸå› ï¼Œå¯¼è‡´WebKitæ¡†æ¶çš„æ•´ä½“æ€§èƒ½æ²¡æœ‰å…¶ä»–æ¡†æ¶å¥½ã€‚</li>\n</ul><p>å¼€å§‹çš„æ—¶å€™ï¼ŒFlutter ä¹Ÿæ˜¯åŸºäº Chrome æµè§ˆå™¨å¼•æ“çš„ã€‚åæ¥ï¼Œè°·æ­Œå…¬å¸è€ƒè™‘åˆ°Flutterçš„æ€§èƒ½ï¼Œæ‰€ä»¥å»æ‰äº†HTMLã€CSSã€JavaScript çš„æ”¯æŒï¼Œè€Œæ”¹ç”¨è‡ªå®¶çš„Dart è¯­è¨€ä»¥ç”©æ‰å†å²åŒ…è¢±ã€‚å…³äºè¿™æ–¹é¢çš„ç»†èŠ‚ï¼Œä½ å¯ä»¥æŸ¥çœ‹<a href=\"https://zhuanlan.zhihu.com/p/52666477\">Flutter åˆ›å§‹äºº Eric çš„é‡‡è®¿è§†é¢‘</a>æ¥äº†è§£ ã€‚</p><p>è¿™äº›å¹´æ¥ï¼Œè™½ç„¶ GUI æ¡†æ¶ç™¾å®¶äº‰é¸£ï¼Œä½†å…¶æ¸²æŸ“æŠ€æœ¯å´ä¸€ç›´å¾ˆç¨³å®šã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±å’Œä½ è¯¦ç»†è¯´è¯´ GUI æ¡†æ¶ä¸­çš„æ¸²æŸ“è¿‡ç¨‹ã€‚</p><h2>æ¸²æŸ“æµç¨‹</h2><p>GUI æ¡†æ¶ä¸­çš„æ¸²æŸ“ï¼Œä¸€èˆ¬éƒ½ä¼šç»è¿‡å¸ƒå±€ã€æ¸²æŸ“ã€åˆæˆè¿™ä¸‰ä¸ªé˜¶æ®µã€‚</p><p><strong>å¸ƒå±€é˜¶æ®µè¦å®Œæˆçš„ä¸»è¦å·¥ä½œï¼Œæ˜¯ä¾æ®æ¸²æŸ“æ ‘è®¡ç®—å‡ºæ§ä»¶çš„å¤§å°å’Œä½ç½®ã€‚</strong>WebKit ç”¨ CSS æ¥å¸ƒå±€ï¼ŒCSS ä¼šæä¾› Frame å¸ƒå±€å’Œ FlexBox å¸ƒå±€ï¼›Flutter ä¹Ÿæ”¯æŒ Frame å¸ƒå±€å’Œ FlexBox å¸ƒå±€ï¼›Cocoa Touch æ¡†æ¶æœ¬èº«ä¸æ”¯æŒ FlexBox å¸ƒå±€ï¼Œä½†æ˜¯é€šè¿‡ Facebook çš„ <a href=\"https://yogalayout.com/\">Yoga åº“</a>ä¹Ÿèƒ½å¤Ÿä½¿ç”¨ FlexBox å¸ƒå±€ã€‚</p><p>ç”±äº Frame å¸ƒå±€éœ€è¦ç²¾ç¡®æè¿°æ¯ä¸ªç•Œé¢å…ƒç´ çš„å…·ä½“ä½ç½®å’Œå¤§å°ï¼Œæ— è®ºä»ä»£ç ç¼–å†™ï¼Œè¿˜æ˜¯ä»ä»£ç å¯è¯»æ€§ä¸Šçœ‹ï¼Œæˆæœ¬éƒ½ä¼šé«˜å¾ˆå¤šã€‚æ‰€ä»¥è¯´ï¼ŒFlexBox å¯¹äº iOS å¼€å‘æ¥è¯´æ˜¯å¦å¤–ä¸€ç§å¾ˆå¥½çš„é€‰æ‹©ã€‚</p><p><strong>æ¸²æŸ“é˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼Œæ˜¯åˆ©ç”¨å›¾å½¢å‡½æ•°è®¡ç®—å‡ºç•Œé¢çš„å†…å®¹ã€‚</strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äº 2D å¹³é¢çš„æ¸²æŸ“éƒ½æ˜¯ä½¿ç”¨CPU è®¡ç®—ï¼Œå¯¹3Dç©ºé—´çš„æ¸²æŸ“ä¼šä½¿ç”¨ GPU è®¡ç®—ã€‚</p><p>Cocoa Touch å’Œ Texture æ¡†æ¶ä½¿ç”¨çš„æ˜¯ Core Animationï¼Œ3D ä½¿ç”¨çš„æ˜¯ Metal å¼•æ“ã€‚Flutter ä½¿ç”¨çš„æ˜¯ Skiaï¼Œ3D ä½¿ç”¨çš„æ˜¯ OpenGL(ES)ã€‚</p><p>åœ¨æ¸²æŸ“è¿™æ–¹é¢ï¼Œæˆ‘è§‰å¾— WebKit åšå¾—æ›´å‡ºè‰²ï¼Œè€ƒè™‘åˆ°å¤šå¹³å°æ”¯æŒï¼ŒWebKit å°†æ¸²æŸ“æ¥å£æŠ½è±¡äº†å‡ºæ¥ï¼Œå®ç°å±‚æ ¹æ®å¹³å°è¿›è¡ŒåŒºåˆ†ï¼Œæ¯”å¦‚åœ¨ iOS ä¸Šå°±ç”¨ CoreGraphics æ¥æ¸²æŸ“ï¼Œåœ¨ Android å°±ç”¨ Skia æ¸²æŸ“ã€‚</p><p><strong>åˆæˆé˜¶æ®µçš„ä¸»è¦å·¥ä½œï¼Œæ˜¯åˆå¹¶å›¾å±‚ã€‚</strong>è¿™æ ·åšçš„ç›®çš„ï¼Œä¸»è¦æ˜¯èŠ‚çœæ˜¾ç¤ºå†…å­˜ï¼Œåªæ˜¾ç¤ºä¸€å±éœ€è¦çš„åƒç´ ï¼Œä¹Ÿåªè¿›è¡Œè¿™äº›åƒç´ æ•°æ®çš„è®¡ç®—ã€‚è¿™ä¸ªè¿‡ç¨‹å®Œæˆåï¼Œå†å°†æ‰€å¾—æ•°æ®è¿›è¡Œå…‰æ …åŒ–å¤„ç†ï¼Œæœ€åäº¤ç»™ GPU æ¸²æŸ“æˆä½ å¯ä»¥çœ‹åˆ°çš„ Bitmapã€‚</p><p>å…³äº WebKitã€Cocoa Touchã€Flutteræ¡†æ¶æ¸²æŸ“ç›¸å…³çš„å†…å®¹ï¼Œæˆ‘ä¼šåœ¨åé¢â€œiOS åŸç”Ÿã€å¤§å‰ç«¯å’Œ Flutter åˆ†åˆ«æ˜¯æ€ä¹ˆæ¸²æŸ“çš„ï¼Ÿâ€çš„æ–‡ç« é‡Œå’Œä½ è¯¦ç»†è¯´æ˜ã€‚</p><p>é€šè¿‡ä¸Šé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸»æµ GUI æ¡†æ¶çš„å†…å®¹å’Œæ¸²æŸ“æµç¨‹ï¼ŒåŒºåˆ«å¹¶ä¸æ˜¯å¾ˆå¤§ã€‚</p><p>ä½† Texture å¯¹äºé‚£äº›å¸Œæœ›èƒ½å¤Ÿåœ¨ç”¨æˆ·äº¤äº’ä½“éªŒä¸Šè¿›è¡Œå¤§å¹…æå‡çš„ iOS å¼€å‘è€…æ¥è¯´ï¼Œå¾ˆå°çš„åˆ‡æ¢æˆæœ¬ï¼ŒåŒæ—¶æ€§èƒ½èƒ½å¤§å¹…æå‡çš„æ”¶ç›Šï¼Œå…¶å®æ˜¯å¾ˆæœ‰è¯±æƒ‘åŠ›çš„ã€‚</p><p>é€šè¿‡å¯¹GUIæ¡†æ¶éƒ½åŒ…æ‹¬ä»€ä¹ˆå’Œæ¸²æŸ“æµç¨‹çš„åˆ†æï¼Œå†æ¬¡å°è¯äº†æˆ‘ä»¬çš„è§‚ç‚¹ï¼šTextureæ˜¯ä¸ªå€¼å¾—æ¨èçš„æ¡†æ¶ï¼Œä¸ä»…åœ¨äºå®ƒä¸Cocoa Touchæ¡†æ¶çš„ç›¸ä¼¼ä½¿å¾—å­¦ä¹ æˆæœ¬è¾ƒä½ï¼Œè¿˜å¾—ç›Šäºå®ƒæœ¬èº«åœ¨æ€§èƒ½ä¸Šçš„å…ˆè¿›æ€§ã€‚</p><p>é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥æˆ‘å°±å†è·Ÿä½ è¯´è¯´ Texture æœ€å¤§çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿä»¥åŠå®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</p><h2>Texture é‡Œ Node çš„å¼‚æ­¥ç»˜åˆ¶</h2><p>Texture æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯å¼€å‘äº†çº¿ç¨‹å®‰å…¨çš„ ASDisplayNodeï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿå¾ˆå¥½çš„å’Œ UIView å…±ç”Ÿã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åŸæœ‰ä½¿ç”¨ UIView å¼€å‘çš„ç¨‹åºåŸºç¡€ä¹‹ä¸Šä½¿ç”¨ Textureï¼Œè€Œä¸ç”¨å®Œå…¨é‡æ„æ‰€æœ‰ç•Œé¢ã€‚</p><p>éšç€ CPU å¤šæ ¸æŠ€æœ¯çš„å‘å±•ï¼Œç•Œé¢æ¸²æŸ“è®¡ç®—éƒ½åœ¨ä¸»çº¿ç¨‹å®Œæˆï¼Œå¯¹äºå¤šæ ¸ CPU æ¥è¯´ç¡®å®æ˜¯æœ‰äº›æµªè´¹ã€‚ASDisplayNode æ˜¯ UIView å’Œ CALayer çš„æŠ½è±¡ï¼Œèƒ½å®ç°ä¸åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œè§†å›¾çš„å¸ƒå±€ç»˜åˆ¶å’Œå±‚çº§è®¡ç®—ï¼Œå……åˆ†å‘æŒ¥å¤šæ ¸ CPU çš„ä¼˜åŠ¿ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Texture æœ€æ ¸å¿ƒçš„çº¿ç¨‹å®‰å…¨èŠ‚ç‚¹ <strong>ASDisplayNode æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</strong></p><p>åœ¨Cocoa Touch æ¡†æ¶é‡Œï¼Œå½“ CALayer å†…å®¹æ›´æ–°æ—¶ä¼šå»æ‰¾ CALayer çš„ delegateï¼Œä¹Ÿå°±æ˜¯ displayLayer: æ–¹æ³•ã€‚UIView ä¼šå®ç° displayLayer: è¿™ä¸ª delegate æ–¹æ³•ã€‚UIView é‡Œå®ç° drawRect: è¿™ä¸ª delegate æ–¹æ³•èƒ½å¤Ÿè‡ªå®šä¹‰ CALayerã€‚</p><p>åœ¨ Texture ä¸­ï¼ŒASDisplayNode æ›¿ä»£äº†è¿™ä¸ªdelegateï¼Œè§£è€¦äº† UIView å’Œ CALayerï¼Œå¹¶å°† UIView åŒ…è£…æˆ ASDisplayViewï¼Œå°† CALayer åŒ…è£…æˆ ASDisplayLayer ä¾›å¤–éƒ¨ä½¿ç”¨ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹<strong>ASDisplayNode æ˜¯å¦‚ä½•è¿›è¡Œå¼‚æ­¥ç»˜åˆ¶çš„ï¼Ÿ</strong></p><p>ASDisplayLayer æ˜¯æ•´ä¸ªç»˜åˆ¶çš„èµ·ç‚¹ï¼Œç»˜åˆ¶äº‹ä»¶å…ˆåœ¨ displayBlock è®¾ç½®å¥½ï¼Œç„¶å ASDisplayNode è°ƒç”¨ displayBlock æ¥è¿›è¡Œå¼‚æ­¥ç»˜åˆ¶ã€‚æ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸‰æ­¥ã€‚</p><p><strong>ç¬¬ä¸€æ­¥</strong>ï¼Œå¾—åˆ° displayBlockã€‚è¿™ä¸ª Block é‡Œæœ‰éœ€è¦ç»˜åˆ¶çš„å†…å®¹ï¼Œå¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>asyncdisplaykit_async_transaction_operation_block_t displayBlock = [self _displayBlockWithAsynchronous:asynchronously isCancelledBlock:isCancelledBlock rasterizing:NO];\n</code></pre><p>å…¶ä¸­ï¼ŒdisplayBlock å°±æ˜¯éœ€è¦ç»˜åˆ¶çš„å†…å®¹ã€‚</p><p><strong>ç¬¬äºŒæ­¥</strong>ï¼Œå®šä¹‰ä¸€ä¸ªå›è°ƒ completionBlock ï¼Œç»˜åˆ¶å®Œæˆåæ‰§è¡Œã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>asyncdisplaykit_async_transaction_operation_completion_block_t completionBlock = ^(id&lt;NSObject&gt; value, BOOL canceled){\n  ASDisplayNodeCAssertMainThread();\n  if (!canceled &amp;&amp; !isCancelledBlock()) {\n    // displayBlock æ‰§è¡Œçš„æ˜¯ç»˜å›¾æ“ä½œï¼Œè¿”å›çš„ç±»å‹æ˜¯ UIImage\n    UIImage *image = (UIImage *)value;\n    BOOL stretchable = (NO == UIEdgeInsetsEqualToEdgeInsets(image.capInsets, UIEdgeInsetsZero));\n    if (stretchable) {\n      ASDisplayNodeSetResizableContents(layer, image);\n    } else {\n      layer.contentsScale = self.contentsScale;\n      // è®¾ç½®ä¸º CALayer çš„å¯„å®¿å›¾\n      layer.contents = (id)image.CGImage;\n    }\n    [self didDisplayAsyncLayer:self.asyncLayer];\n    \n    if (rasterizesSubtree) {\n      ASDisplayNodePerformBlockOnEverySubnode(self, NO, ^(ASDisplayNode * _Nonnull node) {\n        [node didDisplayAsyncLayer:node.asyncLayer];\n      });\n    }\n  }\n};\n</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒcompletionBlock é‡Œå°±æ˜¯ç»˜åˆ¶å®Œæˆåéœ€è¦å»æ‰§è¡Œçš„äº‹æƒ…ï¼Œå†…å®¹æ˜¯å®Œæˆ CALayer å¯„å®¿å›¾çš„è®¾ç½®ã€‚ value æ˜¯ displayBlock è¿”å›çš„å€¼ï¼Œç±»å‹æ˜¯ UIImageã€‚displayBlock ç”¨çš„æ˜¯çº¿ç¨‹å®‰å…¨çš„ Core Graphicsï¼Œæ‰€ä»¥ä½ å¯ä»¥å®‰å¿ƒåœ°æŠŠ displayBlock æ”¾åˆ°åå°çº¿ç¨‹å»å¼‚æ­¥æ‰§è¡Œã€‚</p><p><strong>ç¬¬ä¸‰æ­¥</strong>ï¼Œå¦‚æœè®¾ç½®ä¸ºå¼‚æ­¥å±•ç¤ºï¼Œå°±å…ˆå‘ä¸Šæ‰¾åˆ°å±æ€§ asyncdisplaykit_parentTransactionContainer ä¸º YES çš„ CALayerï¼Œè·å– containerLayer çš„ ASAsyncTransactionï¼Œç„¶åå°† displayBlock æ·»åŠ åˆ° ASAsyncTransaction çš„è°ƒåº¦é˜Ÿåˆ—é‡Œï¼Œæ ¹æ® drawingPriority ä¼˜å…ˆçº§æ‰§è¡ŒdisplayBlockã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>if (asynchronously) {\n  // å‘ä¸Šæ‰¾åˆ°å±æ€§ asyncdisplaykit_parentTransactionContainer ä¸º YES çš„ CALayer\n  CALayer *containerLayer = layer.asyncdisplaykit_parentTransactionContainer ? : layer;\n  \n  // è·å– containerLayer çš„ ASAsyncTransaction\n  _ASAsyncTransaction *transaction = containerLayer.asyncdisplaykit_asyncTransaction;\n  \n  // å°† displayBlock æ·»åŠ åˆ° ASAsyncTransaction çš„è°ƒåº¦é˜Ÿåˆ—é‡Œ\n  [transaction addOperationWithBlock:displayBlock priority:self.drawingPriority queue:[_ASDisplayLayer displayQueue] completion:completionBlock];\n} else {\n  // è®¾ç½®ä¸ºä¸æ˜¯å¼‚æ­¥å°±ç›´æ¥è°ƒç”¨ displayBlock è¿›è¡Œç»˜åˆ¶\n  UIImage *contents = (UIImage *)displayBlock();\n  completionBlock(contents, NO);\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒdisplayBlock è¢«æ·»åŠ åˆ° ASAsyncTransaction é‡Œè¿›è¡Œè°ƒåº¦ã€‚è¿™é‡Œï¼ŒASAsyncTransactionQueue æ˜¯ Texture çš„è°ƒåº¦é˜Ÿåˆ—ã€‚</p><p>é€šè¿‡ä¸Šé¢è¿™ä¸‰æ­¥ï¼ŒTextureå°±å®Œæˆäº† ASDisplayNode çš„å¼‚æ­¥ç»˜åˆ¶ã€‚</p><h2>å°ç»“</h2><p>åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ ä»‹ç»äº†ç›®å‰å¯ä»¥ç”¨äºiOSå¼€å‘çš„ä¸»æµGUI æ¡†æ¶æœ‰å“ªäº›ï¼Œè¿™äº›æ¡†æ¶é‡Œéƒ½æœ‰ä»€ä¹ˆï¼Œä»¥åŠå®ƒä»¬çš„æ¸²æŸ“æµç¨‹æ˜¯æ€æ ·çš„ã€‚</p><p>é€šè¿‡ä»Šå¤©çš„ä»‹ç»ï¼Œä½ ä¼šå‘ç°åœ¨é€‰æ‹©GUI æ¡†æ¶æ—¶ï¼Œæ¸²æŸ“æ–¹é¢çš„åŒºåˆ«å¹¶ä¸å¤§ï¼Œè€Œä¸”æ¸²æŸ“æŠ€æœ¯ç›¸å¯¹æ¯”è¾ƒæˆç†Ÿã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¡†æ¶çš„æ˜“ç”¨æ€§ï¼Œä»¥åŠä¸ç°æœ‰å·¥ç¨‹çš„å…¼å®¹ä¸Šåšæ›´å¤šçš„è€ƒè™‘ã€‚</p><p>å¦‚æœä½ æƒ³æé«˜ App çš„ä½¿ç”¨ä½“éªŒï¼Œè®©ç•Œé¢æ“ä½œæ›´æµç•…çš„è¯ï¼Œæˆ‘æ¨èä½ ä½¿ç”¨Textureã€‚Texture æ˜“ç”¨æ€§å’Œå…¼å®¹æ€§éƒ½å¾ˆå¥½ï¼ŒåŒæ—¶ Texture çš„å­¦ä¹ æˆæœ¬ä¸æ”¶ç›Šæ¯”ä¹Ÿæ˜¯æœ€é«˜çš„ã€‚è€Œä¸”ï¼ŒTexture ä»£ç æœ¬èº«çš„è´¨é‡å¾ˆé«˜ï¼Œæœ‰å¾ˆå¤šå€¼å¾—å­¦ä¹ çš„åœ°æ–¹ã€‚</p><h2>è¯¾åä½œä¸š</h2><p>ä»Šå¤©æˆ‘è·Ÿä½ ä»‹ç»äº† ASDisplayNode å¼‚æ­¥ç»˜åˆ¶çš„ä¸‰ä¸ªæ­¥éª¤ï¼Œä½ èƒ½è¯´æ¸…æ¥šASAsyncTransaction æ˜¯å¦‚ä½•è°ƒåº¦ displayBlockçš„å—ï¼Ÿè¯·ä½ æŠŠç­”æ¡ˆç•™è¨€ç•™è¨€ç»™æˆ‘å§ï¼ˆæç¤ºï¼šä½ å¯ä»¥å»ç¿»çœ‹ä¸€ä¸‹Texture çš„æºç ï¼‰ã€‚</p><p>å½“ç„¶äº†ï¼Œæˆ‘è¿˜ä¸ºä½ å‡†å¤‡äº†ä¸€ä¸ªåŠ¨æ‰‹é¢˜ï¼Œæ¥å¸®åŠ©ä½ å·©å›ºä»Šå¤©æ‰€å­¦çš„å†…å®¹ã€‚è¯·ä½ ä½¿ç”¨ Texture æ¥å†™ä¸€ä¸ªåˆ—è¡¨ï¼Œå®Œæˆåä¸Šä¼ åˆ° GitHub ä¸Šå§ã€‚åŒæ—¶ï¼Œè®°å¾—å°†GitHubçš„åœ°å€è´´åˆ°è¯„è®ºåŒºï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","comments":[{"had_liked":false,"id":90033,"user_name":"è´°é›¶å£¹ç–","can_delete":false,"product_type":"c1","uid":1457684,"ip_address":"","ucode":"6AD46BEE2F6E03","user_header":"https://static001.geekbang.org/account/avatar/00/16/3e/14/6883d313.jpg","comment_is_top":false,"comment_ctime":1556374845,"is_pvip":false,"replies":[{"id":"32262","content":"æ²¡é”™","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1556379592,"ip_address":"","comment_id":90033,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18736244029","product_id":100024501,"comment_content":"textureåªæ˜¯ä¸€å±‚å°è£…å§ï¼Œæ¸²æŸ“è¿˜æ˜¯åŸç”Ÿæ²¡å˜","like_count":4,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448363,"discussion_content":"æ²¡é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556379592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97429,"user_name":"dreamCloud","can_delete":false,"product_type":"c1","uid":1457235,"ip_address":"","ucode":"8D5BCB6BD6BF38","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/53/03522e7d.jpg","comment_is_top":false,"comment_ctime":1558668276,"is_pvip":false,"replies":[{"id":"35000","content":"æ²¡æœ‰ç”¨ Texture å‘¢","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1558842613,"ip_address":"","comment_id":97429,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10148602868","product_id":100024501,"comment_content":"æŠ¥å‘Šè€å¸ˆï¼Œ ä½œä¸šåšå¥½äº†ï¼š<br>https:&#47;&#47;github.com&#47;yunyyyun&#47;FastTableTest<br>ä½†æ˜¯æœ‰å†™é—®é¢˜ï¼Œ å†™åœ¨README.mdé‡Œé¢äº†ï¼Œ æ…¢æ…¢è§£å†³ä¸­ï¼Œ åŒæ—¶æ¬¢è¿åŒç­åŒå­¦ä»¬å¸®å¿™çœ‹çœ‹","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451278,"discussion_content":"æ²¡æœ‰ç”¨ Texture å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558842613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96467,"user_name":"Geek_45fc02","can_delete":false,"product_type":"c1","uid":1457447,"ip_address":"","ucode":"FE074A1594AC7E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTOicFdCW2hgUwgfiaR9qSGabPvgLorp1Xcd7uLquXibWmKZxJibMsSeqibEpuHoSwusj2kOr86uLAzng/132","comment_is_top":false,"comment_ctime":1558430237,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10148364829","product_id":100024501,"comment_content":"å¥½å¥‡Appleä¸ºä»€ä¹ˆä¸å€Ÿé‰´ä¸€ä¸‹Textureçš„æ€æƒ³ï¼Œæ—¢ä¸ä¼šå¤§åŠ¨ç›®å‰çš„UIæ¡†æ¶ï¼Œä¹Ÿèƒ½æå¤§æå‡UIçš„æ¸²æŸ“æ€§èƒ½ã€‚","like_count":3,"discussions":[{"author":{"id":1048531,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ff/d3/f249eefe.jpg","nickname":"iHTC","note":"","ucode":"22065449F54F40","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284541,"discussion_content":"å¼‚æ­¥æ¸²æŸ“å¦‚æœä»»åŠ¡é‡ï¼Œå¿…ç„¶ä¼šå¡é¡¿ï¼Œè¿™æ˜¯è‡´å‘½æ€§çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592551592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1768310,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/fb/76/37dccd3d.jpg","nickname":"å¾ç‚œ","note":"","ucode":"701DAD17B7B253","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":81183,"discussion_content":"è‹¹æœæƒ³ç¦»å±æ¸²æŸ“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576230624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90016,"user_name":"è‰¾æ–¯ä¼Šæ–‡à¸„à¸´à¸”à¸–à¸¶à¸‡","can_delete":false,"product_type":"c1","uid":1243733,"ip_address":"","ucode":"52F2B5942EB969","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/55/1bdfbc26.jpg","comment_is_top":false,"comment_ctime":1556367600,"is_pvip":false,"replies":[{"id":"32228","content":"æ²¡æœ‰","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1556370983,"ip_address":"","comment_id":90016,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10146302192","product_id":100024501,"comment_content":"webkitï¼Œrnï¼Œflutterå¯åŠ¨é€Ÿåº¦æ¯”åŸç”Ÿå¿«ä¹ˆï¼Ÿè¿˜æ˜¯éœ€è¦åœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448357,"discussion_content":"æ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556370983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1472865,"avatar":"https://static001.geekbang.org/account/avatar/00/16/79/61/ea517716.jpg","nickname":"è¥¿é—¨æ¡ƒæ¡ƒ","note":"","ucode":"B1038AAA988F8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555439,"discussion_content":"äº²æµ‹ æ¯”åŸç”Ÿæ…¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646903165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133670,"user_name":"æ´‹è‘±å¤´","can_delete":false,"product_type":"c1","uid":1459837,"ip_address":"","ucode":"A8BBC7EF7F4EFF","user_header":"https://static001.geekbang.org/account/avatar/00/16/46/7d/46ae30f5.jpg","comment_is_top":false,"comment_ctime":1568631994,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5863599290","product_id":100024501,"comment_content":"[Github Demo](https:&#47;&#47;github.com&#47;CivelXu&#47;UseAsyncDisplayKit-Practice):éœ€è¦å°†`pod &quot;AsyncDisplayKit&quot;`æ”¹ä¸º`pod &quot;Texture&quot; `<br>è‡ªå·±ä»æ¥æ²¡å†™è¿‡ï¼Œæ‰¾äº†ä¸ªDemoæŒºä¸é”™çš„","like_count":1},{"had_liked":false,"id":97933,"user_name":"dreamCloud","can_delete":false,"product_type":"c1","uid":1457235,"ip_address":"","ucode":"8D5BCB6BD6BF38","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/53/03522e7d.jpg","comment_is_top":false,"comment_ctime":1558844480,"is_pvip":false,"replies":[{"id":"35026","content":"çœ‹åˆ°äº†ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1558852358,"ip_address":"","comment_id":97933,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853811776","product_id":100024501,"comment_content":"reply to ä½œè€…ï¼šViewController1 é‡Œé¢æœ‰ç”¨ ASTableNode å’Œ ASCellNode åš list","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451478,"discussion_content":"çœ‹åˆ°äº†ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558852358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":96801,"user_name":"èµ¶ç´§å­¦èµ·æ¥","can_delete":false,"product_type":"c1","uid":1523664,"ip_address":"","ucode":"965392C1C38638","user_header":"https://static001.geekbang.org/account/avatar/00/17/3f/d0/5bd853ea.jpg","comment_is_top":false,"comment_ctime":1558511075,"is_pvip":false,"replies":[{"id":"35008","content":"RAC çš„æ”¯æŒå¯ä»¥è‡ªå·±æ·»åŠ çš„ã€‚ä½¿ç”¨äº† Texture å°±ä¸è¦ç”¨ Masonry äº†å§ï¼Œéƒ½æ˜¯ç”¨æ¥å¸ƒå±€çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1558845807,"ip_address":"","comment_id":96801,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853478371","product_id":100024501,"comment_content":"TextureåŸç†æŒºå¥½ï¼Œä¸å¥½æ¨å¹¿ä½¿ç”¨å•Š<br>1ã€å¦‚æœç”¨Textureï¼Œè·ŸRACç»“åˆä½¿ç”¨ï¼Œæœ‰äº›æ–¹æ³•ä¸æ”¯æŒå•Šï¼Œæ¯”å¦‚ASButtonNodeä¸æ”¯æŒrac_signalForControlEventsï¼š<br>2ã€å¦‚æœç”¨Textureï¼ŒASButtonNodeä¹Ÿä¸æ”¯æŒMasonryæ–¹æ³•è°ƒç”¨","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451019,"discussion_content":"RAC çš„æ”¯æŒå¯ä»¥è‡ªå·±æ·»åŠ çš„ã€‚ä½¿ç”¨äº† Texture å°±ä¸è¦ç”¨ Masonry äº†å§ï¼Œéƒ½æ˜¯ç”¨æ¥å¸ƒå±€çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558845807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90081,"user_name":"å“ˆ","can_delete":false,"product_type":"c1","uid":1453904,"ip_address":"","ucode":"3F46ADFFBC94CE","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/50/b46a9b6a.jpg","comment_is_top":false,"comment_ctime":1556411968,"is_pvip":false,"replies":[{"id":"32663","content":"FlexBox å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ Yoga","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1556890589,"ip_address":"","comment_id":90081,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5851379264","product_id":100024501,"comment_content":"FlexBoxå¸ƒå±€æ˜¯H5çš„å¸ƒå±€æ–¹å¼å§â€¦å¯æƒœçš„æ˜¯Xcodeå¯¹è¿™ç§å¸ƒå±€æ–¹å¼æ²¡æœ‰è‡ªåŠ¨è¡¥å…¨â€¦","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448383,"discussion_content":"FlexBox å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ Yoga","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556890589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324579,"user_name":"å¤§ç•ªèŒ„","can_delete":false,"product_type":"c1","uid":1079144,"ip_address":"","ucode":"CCBD952531156C","user_header":"","comment_is_top":false,"comment_ctime":1638509522,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638509522","product_id":100024501,"comment_content":"fluter å°±æ˜¯ä¸ªåƒåœ¾ï¼Œå¡çš„è¦æ­»ï¼Œè¡Œèƒ½è¿˜ä¸å¦‚rn","like_count":0},{"had_liked":false,"id":243832,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1157614,"ip_address":"","ucode":"45E31C6A7FF1D8","user_header":"https://static001.geekbang.org/account/avatar/00/11/a9/ee/4da4e66f.jpg","comment_is_top":false,"comment_ctime":1598284869,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598284869","product_id":100024501,"comment_content":"è€å¸ˆï¼Œ containerLayerçš„ASAsyncTransactionæ ¹æ®å±å¹•å‚ç›´ä¿¡å·ï¼Œæ¥è°ƒèµ·displayBlockçš„ï¼ŒdisplayBlockæ˜¯ç±»ä¼¼ä½å›¾bitmapè¢«ç®¡ç†åœ¨containerLayerä¸­ã€‚å¸Œæœ›è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼è°¢è°¢","like_count":0},{"had_liked":false,"id":204700,"user_name":"èµµäº”ä¸€","can_delete":false,"product_type":"c1","uid":1042216,"ip_address":"","ucode":"E30D227ED71847","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/28/52cd020a.jpg","comment_is_top":false,"comment_ctime":1586443715,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586443715","product_id":100024501,"comment_content":"https:&#47;&#47;github.com&#47;zhenglibao&#47;FlexLib   flexbox æˆ‘ä¸€ç›´ç”¨çš„æ˜¯è¿™ä¸ªæ¡†æ¶, åŸºäº Yoga å¼€å‘çš„, æ¸²æŸ“ä¹Ÿå¾ˆå¿«, è€å¸ˆæœ‰äº†è§£è¿‡ä¹ˆ? ","like_count":0},{"had_liked":false,"id":137718,"user_name":"Geek_ae7466","can_delete":false,"product_type":"c1","uid":1484120,"ip_address":"","ucode":"81AD14D0DC822B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTInk6tZfjiaeb4vBzJm2YQsiaxqCOia6yfribuCiagzQRhltvYAHKdtFsvC5CeicYA8iccIrn3BDThUDhRew/132","comment_is_top":false,"comment_ctime":1569829651,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569829651","product_id":100024501,"comment_content":"ä¸ºä»€ä¹ˆè¯´Webkitä¸é€‚ç”¨äºå®‰å“ç³»ç»Ÿå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":122578,"user_name":"dao","can_delete":false,"product_type":"c1","uid":1087879,"ip_address":"","ucode":"4181FB270462CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","comment_is_top":false,"comment_ctime":1565427990,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1565427990","product_id":100024501,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹ï¼Œswift UI å’Œ cocoa touch æœ‰ä»€ä¹ˆä¸åŒå•Šï¼Œå¦å¤–ï¼Œswift UI çš„æ¸²æŸ“å¼•æ“å’Œå¸ƒå±€åˆæ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":106998,"user_name":"äº¡å‘½ä¹‹å¾’","can_delete":false,"product_type":"c1","uid":1096669,"ip_address":"","ucode":"5B0ADD558F9712","user_header":"https://static001.geekbang.org/account/avatar/00/10/bb/dd/5d473145.jpg","comment_is_top":false,"comment_ctime":1561435721,"is_pvip":false,"replies":[{"id":"38773","content":"ä¸æ˜¯æ‰¾å±æ€§ï¼Œæ˜¯æ‰¾ Layerï¼Œå°† block åŠ å…¥å¯¹åº” Layer çš„é˜Ÿåˆ—é‡Œæ‰§è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1561472888,"ip_address":"","comment_id":106998,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561435721","product_id":100024501,"comment_content":"æƒ³è¯·æ•™ä¸‹è€å¸ˆï¼Œç¬¬ä¸‰æ­¥ä¸ºä»€ä¹ˆè¦å‘ä¸Šå¯»æ‰¾å±æ€§","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455318,"discussion_content":"ä¸æ˜¯æ‰¾å±æ€§ï¼Œæ˜¯æ‰¾ Layerï¼Œå°† block åŠ å…¥å¯¹åº” Layer çš„é˜Ÿåˆ—é‡Œæ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561472888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101052,"user_name":"æ™¯å¤©å„¿","can_delete":false,"product_type":"c1","uid":1018983,"ip_address":"","ucode":"1A5EFE9DE2597B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/67/e91fe8d3.jpg","comment_is_top":false,"comment_ctime":1559706425,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559706425","product_id":100024501,"comment_content":"RNä¸å±äºGUIæ¡†æ¶å—ï¼Ÿè¯·é—®å¦‚ä½•çœ‹å¾…RNå’ŒFlutterçš„å‘å±•è¶‹åŠ¿å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":96808,"user_name":"çƒ˜å“„è½°ã€","can_delete":false,"product_type":"c1","uid":1135473,"ip_address":"","ucode":"B57568E8584ED5","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/71/4cf1b380.jpg","comment_is_top":false,"comment_ctime":1558512304,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558512304","product_id":100024501,"comment_content":"Textureçš„ä¼˜åŠ¿åœ¨äºæŠ½è±¡äº†UIVIewå’ŒCALayeråï¼Œå®ç°äº†å­çº¿ç¨‹æ‰§è¡Œè§†å›¾çš„å¸ƒå±€ç»˜åˆ¶å’Œå±‚çº§è®¡ç®—ã€‚","like_count":0}]}