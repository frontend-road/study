{"id":179592,"title":"06 | XSSï¼šå½“ä½ â€œè¢«å‘é€â€äº†ä¸€æ¡å¾®åšæ—¶ï¼Œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä½•ä¸ºèˆŸã€‚</p><p>åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹è®²è§£äº†å®‰å…¨çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œæ›´å¤šåœ°æ˜¯ä»å®è§‚çš„å±‚é¢ä¸Šæ¥è°ˆè®ºå®‰å…¨ã€‚ä½†<strong>å®‰å…¨ä¸æ˜¯ä¸€ä¸ªé å®è§‚æŒ‡å¯¼å°±èƒ½å¤Ÿè½åœ°çš„ä¸œè¥¿</strong>ã€‚å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šç»“åˆçœŸå®æ¡ˆä¾‹ä¸­çš„å„ç§å®‰å…¨é—®é¢˜ï¼Œæ¥ä»‹ç»å…·ä½“çš„å®‰å…¨é˜²æŠ¤æ‰‹æ®µå’Œå·¥å…·ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±å…ˆä»æœ€åŸºç¡€çš„Webå®‰å…¨å¼€å§‹ã€‚</p><p>åœ¨Webå®‰å…¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬æ‰€è°ˆè®ºçš„Webï¼Œæ˜¯æŒ‡æ‰€æœ‰åŸºäºHTTPæˆ–è€…å…¶ä»–è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆRPCç­‰ï¼‰å¼€å‘çš„åº”ç”¨ï¼ŒåŒ…æ‹¬ï¼šç½‘é¡µã€Appã€APIæ¥å£ç­‰ç­‰ã€‚è¿™ç±»åº”ç”¨çš„å…±åŒç‚¹æ˜¯ï¼šé€šè¿‡HTTPç­‰æ–‡æœ¬åè®®ï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢ã€‚å®¢æˆ·ç«¯éœ€è¦å°†æœåŠ¡ç«¯ä¼ å‡ºçš„æ•°æ®å±•ç¤ºæ¸²æŸ“å‡ºæ¥ï¼ŒæœåŠ¡ç«¯éœ€è¦å°†å®¢æˆ·ç«¯ä¼ å…¥çš„æ•°æ®è¿›è¡Œå¯¹åº”çš„å¤„ç†ã€‚è€ŒWebå®‰å…¨æ‰€æ¶‰åŠçš„æ­£æ˜¯è¿™äº›åº”ç”¨ä¸­å­˜åœ¨çš„å„ç±»å®‰å…¨é—®é¢˜ã€‚</p><p>èƒŒæ™¯ä»‹ç»å®Œäº†ï¼Œä¸‹é¢æˆ‘ä»¬è¿›å…¥ä»Šå¤©çš„æ­£é¢˜ã€‚</p><p>åŸºäºå‰é¢å®‰å…¨åŸºç¡€çŸ¥è¯†çš„å­¦ä¹ ï¼Œä½ ç°åœ¨é€šè¿‡äº†é¢è¯•å®˜çš„è€ƒæ ¸ï¼ŒæˆåŠŸè¿›å…¥äº†è¿™å®¶å…¬å¸ã€‚æŸä¸€å¤©ï¼Œå…¬å¸çš„ç½‘é¡µåº”ç”¨ä¸­å‘ç”Ÿäº†ä¸€ä»¶äº‹ã€‚</p><p>æœ‰å¾ˆå¤šç”¨æˆ·å‘é€äº†åŒæ ·ç±»å‹çš„å†…å®¹ï¼Œè€Œä¸”è¿™äº›å†…å®¹éƒ½æ˜¯ä¸€ä¸ªå¸¦æœ‰è¯±æƒ‘æ€§çš„é—®é¢˜å’Œä¸€ä¸ªå¯ä»¥ç‚¹å‡»çš„é“¾æ¥ã€‚è¿™äº›ç”¨æˆ·å…¨éƒ¨åé¦ˆè¯´ï¼Œè¿™ä¸æ˜¯ä»–ä»¬è‡ªå·±å‘çš„ã€‚å‰ç«¯å¼€å‘è¡¨ç¤ºï¼Œç”¨æˆ·å†…å®¹éƒ½æ˜¯åç«¯äº§ç”Ÿçš„ï¼Œä»–ä¸è´Ÿè´£ã€‚åç«¯å¼€å‘è¡¨ç¤ºï¼Œè¿™äº›å†…å®¹éƒ½æ˜¯ç”¨æˆ·è‡ªå·±æäº¤ä¸Šæ¥çš„ï¼Œä»–ä¹Ÿä¸è´Ÿè´£ã€‚æ­£å½“å¤§å®¶è®®è®ºçº·çº·çš„æ—¶å€™ï¼Œä½ ä½œä¸ºå­¦ä¹ è¿‡å®‰å…¨ä¸“æ çš„äººï¼Œæ•é”åœ°å‘ç°äº†é—®é¢˜çš„åŸå› ï¼šè¿™æ˜¯é»‘å®¢å‘èµ·äº†XSSæ”»å‡»ã€‚</p><!-- [[[read_end]]] --><p>è¿™ä¸ªäº‹æƒ…çš„åŸå‹ï¼Œå…¶å®æ˜¯2011å¹´å¾®åšçœŸå®å‡ºç°çš„ä¸€æ¬¡å®‰å…¨äº‹ä»¶ã€‚æ•´ä¸ªäº‹ä»¶çš„æ ¸å¿ƒé—®é¢˜ï¼Œå…¶å®å‡ºåœ¨è¿™ä¸ªå¯ä»¥ç‚¹å‡»çš„é“¾æ¥ä¸Šã€‚åœ¨è¿™ä¸ªäº‹ä»¶ä¸­ï¼Œé»‘å®¢å¹¶ä¸éœ€è¦å…¥ä¾µåˆ°å¾®åšæœåŠ¡å™¨ä¸­ï¼Œåªè¦ç”¨æˆ·ç‚¹å‡»äº†è¿™ä¸ªé“¾æ¥ï¼Œå°±ä¼šâ€œè¢«å‘é€â€è¿™æ ·çš„åšæ–‡ã€‚</p><p>è¿™å°±æ˜¯è‘—åçš„XSSæ”»å‡»æ‰€èƒ½å¤Ÿå®ç°çš„æ•ˆæœã€‚é‚£ä¹ˆï¼ŒXSSæ”»å‡»ç©¶ç«Ÿæ˜¯æ€ä¹ˆäº§ç”Ÿçš„å‘¢ï¼Ÿæˆ‘ä»¬ç©¶ç«Ÿè¯¥å¦‚ä½•é˜²æŠ¤å‘¢ï¼Ÿä»Šå¤©æˆ‘å°±å¸¦ä½ æ¥äº†è§£è¿™ä¸ªç½‘é¡µä¸­æœ€ç»å…¸çš„XSSæ”»å‡»ã€‚</p><h2>XSSæ”»å‡»æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿ</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ï¼ŒXSSæ”»å‡»æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚ä½œä¸ºæœ€æ™®éçš„ç½‘é¡µè¯­è¨€ï¼ŒHTMLéå¸¸çµæ´»ï¼Œä½ å¯ä»¥åœ¨ä»»æ„æ—¶å€™å¯¹HTMLè¿›è¡Œä¿®æ”¹ã€‚ä½†æ˜¯ï¼Œè¿™ç§çµæ´»æ€§ä¹Ÿç»™äº†é»‘å®¢å¯è¶ä¹‹æœºï¼šé€šè¿‡ç»™å®šå¼‚å¸¸çš„è¾“å…¥ï¼Œé»‘å®¢å¯ä»¥åœ¨ä½ çš„æµè§ˆå™¨ä¸­ï¼Œæ’å…¥ä¸€æ®µæ¶æ„çš„JavaScriptè„šæœ¬ï¼Œä»è€Œçªƒå–ä½ çš„éšç§ä¿¡æ¯æˆ–è€…ä»¿å†’ä½ è¿›è¡Œæ“ä½œã€‚è¿™å°±æ˜¯<strong>XSSæ”»å‡»</strong>ï¼ˆCross-Site Scriptingï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰çš„åŸç†ã€‚</p><p>ä½ ç°åœ¨åº”è¯¥å¯¹XSSæœ‰äº†ä¸€ä¸ªå¤§è‡´çš„äº†è§£ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜éœ€è¦äº†è§£ä¸‰ç§XSSæ”»å‡»ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼šåå°„å‹XSSã€åŸºäºDOMçš„XSSä»¥åŠæŒä¹…å‹XSSã€‚ä¸‹é¢æˆ‘ä»¬ä¸€ä¸€æ¥çœ‹ã€‚</p><h3>1.åå°„å‹XSS</h3><p>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªæœç´¢ç½‘é¡µï¼Œå½“ä½ è¾“å…¥ä»»æ„ä¸€ä¸ªå…³é”®è¯ï¼Œå¹¶ç‚¹å‡»â€œæœç´¢â€æŒ‰é’®ä¹‹åï¼Œè¿™ä¸ªç½‘é¡µå°±ä¼šç»™ä½ å±•ç¤ºâ€œä½ æœç´¢çš„ç»“æœå†…å®¹æ˜¯ï¼šXXXâ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a8/63/a80e92776bad0f35e8d7030806165163.jpg?wh=1081*312\" alt=\"\"></p><p>æˆ‘ä»¬ä»¥PHPä¸ºä¾‹ï¼Œè¿™ä¸ªç½‘é¡µçš„æœåŠ¡ç«¯å®ç°é€»è¾‘å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\t&lt;body&gt;\n\t\t&lt;form role=&quot;search&quot; action=&quot;&quot; method=&quot;GET&quot;&gt;\n\t\t\t&lt;input type=&quot;text&quot; name=&quot;search&quot; placeholder=&quot;è¯·è¾“å…¥è¦æœç´¢çš„å†…å®¹&quot;&gt;\n\t        &lt;button type=&quot;submit&quot;&gt;æœç´¢&lt;/button&gt;\n\t    &lt;/form&gt;\n\t\t&lt;?php\n\t\t\tif (isset($_GET['search']) &amp;&amp; !empty($_GET['search'])) {\n\t\t\t\t$search = $_GET['search'];\n\t\t\t\techo &quot;&lt;h3&gt;ä½ æœç´¢çš„ç»“æœå†…å®¹æ˜¯ï¼š&quot; . $search . &quot;&lt;/h3&gt;&quot;;\n\t\t\t}\n\t\t?&gt;\n\t&lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ®µä»£ç çš„é€»è¾‘æ˜¯å°†æœç´¢æ¡†è¾“å…¥çš„å†…å®¹ï¼Œæ‹¼æ¥æˆå­—ç¬¦ä¸²ï¼Œç„¶åå¡«å……åˆ°æœ€ç»ˆçš„HTMLä¸­ã€‚è€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¸­æ²¡æœ‰ä»»ä½•çš„è¿‡æ»¤æªæ–½ï¼Œå¦‚æœé»‘å®¢æƒ³è¦å¯¹è¿™ä¸ªè¿‡ç¨‹å‘èµ·æ”»å‡»ï¼Œä»–ä¼šè¾“å…¥ä¸‹é¢è¿™è¡Œä»£ç ï¼š</p><pre><code>&lt;/h3&gt;&lt;script&gt;alert('xss');&lt;/script&gt;&lt;h3&gt;\n</code></pre><p>é»‘å®¢è¾“å…¥è¿™æ®µå­—ç¬¦åï¼Œç½‘é¡µä¼šå¼¹å‡ºä¸€ä¸ªå‘Šè­¦æ¡†ï¼ˆæˆ‘è‡ªå·±æµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°éƒ¨åˆ†æµè§ˆå™¨ï¼Œå¦‚Safariä¸ä¼šå¼¹å‡ºå‘Šè­¦æ¡†ï¼Œè¿™æ˜¯å› ä¸ºæµè§ˆå™¨è‡ªèº«æä¾›äº†ä¸€å®šçš„XSSä¿æŠ¤åŠŸèƒ½ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f0/69/f0d2d16b482c9bbc5388250f2d34cc69.jpg?wh=1040*500\" alt=\"\"></p><p>é€šè¿‡æŸ¥çœ‹ç½‘é¡µçš„æºç ï¼Œå¯ä»¥å‘ç°ï¼Œè¿™ä¸­é—´å¤šäº†ä¸€æ®µJavaScriptçš„è„šæœ¬ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/29/98/29cff8464c5dd7b88dafb377e0439b98.jpg?wh=1490*720\" alt=\"\"></p><p>è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åå°„å‹XSSæ”»å‡»çš„è¿‡ç¨‹ã€‚å…¶å®å®ƒæ”»å‡»çš„åŸç†å¾ˆç®€å•ã€‚æˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹ï¼Œå³é€šè¿‡å¼€å¤´çš„<code>&lt;/h3&gt;</code>å’Œç»“å°¾çš„<code>&lt;h3&gt;</code>ï¼Œå°†åŸæœ¬çš„<code>&lt;h3&gt;</code>æ ‡ç­¾è¿›è¡Œé—­åˆï¼Œç„¶åä¸­é—´é€šè¿‡<code>&lt;script&gt;</code>æ ‡ç­¾æ’å…¥JavaScriptä»£ç å¹¶æ‰§è¡Œï¼Œå°±å®Œæˆäº†æ•´ä¸ªåå°„å‹XSSçš„æµç¨‹ã€‚</p><p>ä½ å¯ä»¥æ³¨æ„ä¸€ä¸‹æµè§ˆå™¨çš„åœ°å€ï¼š<a href=\"http://localhost/index.php?search=%3C%2Fh3%3E%3Cscript%3Ealert%28%27xss%27%29%3B%3C%2Fscript%3E%3Ch3%3E\">http://localhost/index.php?search=&lt;%2Fh3&gt;&lt;script&gt;alert('xss')%3B&lt;%2Fscript&gt;&lt;h3&gt;</a> ã€‚å®é™…ä¸Šï¼Œä»»ä½•äººåªè¦ç‚¹å‡»äº†è¿™ä¸ªé“¾æ¥ï¼Œå°±ä¼šæ‰§è¡Œä¸€æ®µé»‘å®¢å®šä¹‰çš„JavaScriptè„šæœ¬ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ç»å¸¸è¯´ï¼Œä¸è¦ç‚¹å‡»ä»»ä½•æœªçŸ¥çš„é“¾æ¥ã€‚</p><p>åå°„å‹XSSçš„æ€»ä½“æµç¨‹æˆ‘æ€»ç»“äº†ä¸€ä¸‹ï¼Œä½ å¯ä»¥çœ‹ä¸‹é¢è¿™å¼ å›¾ã€‚é»‘å®¢è¯±å¯¼ä½ ç‚¹å‡»äº†æŸä¸ªé“¾æ¥ï¼Œè¿™ä¸ªé“¾æ¥æä¾›çš„æœåŠ¡ï¼Œå¯èƒ½å°±æ˜¯ä¸Šè¿°çš„æœç´¢åŠŸèƒ½ã€‚ç½‘é¡µåœ¨è§£æåˆ°é“¾æ¥çš„å‚æ•°åï¼Œæ‰§è¡Œæ­£å¸¸çš„æœç´¢é€»è¾‘ï¼Œä½†æ˜¯å› ä¸ºæ¼æ´ï¼Œç½‘é¡µä¸­è¢«å¡«å…¥äº†é»‘å®¢å®šä¹‰çš„è„šæœ¬ã€‚ä½¿å¾—ç”¨æˆ·çš„æµè§ˆå™¨ï¼Œæœ€ç»ˆæ‰§è¡Œçš„æ˜¯é»‘å®¢çš„è„šæœ¬ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/2c/b85f24cbc8243426fb270bcb74be682c.jpeg?wh=1920*1080\" alt=\"\"></p><h3>2.åŸºäºDOMçš„XSS</h3><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåå°„å‹XSSäº§ç”Ÿåœ¨å‰åç«¯ä¸€ä½“çš„ç½‘é¡µåº”ç”¨ä¸­ï¼ŒæœåŠ¡ç«¯é€»è¾‘ä¼šæ”¹å˜æœ€ç»ˆçš„ç½‘é¡µä»£ç ã€‚ä½†æ˜¯ï¼Œç›®å‰æ›´æµè¡Œçš„å…¶å®æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œè¿™æ ·ç½‘é¡µçš„ä»£ç ä¸ä¼šå—æœåŠ¡ç«¯å½±å“ã€‚é‚£ä¹ˆï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å°±å®‰å…¨äº†å‘¢ï¼Ÿ</p><p>æ˜¾ç„¶ä¸æ˜¯çš„ã€‚å°½ç®¡æœåŠ¡ç«¯æ— æ³•æ”¹å˜ç½‘é¡µä»£ç ï¼Œä½†ç½‘é¡µæœ¬èº«çš„JavaScriptä»ç„¶å¯ä»¥æ”¹å˜ã€‚è€Œé»‘å®¢åªè¦åˆ©ç”¨äº†è¿™ä¸€ç‚¹ï¼ŒåŒæ ·èƒ½å¤Ÿåœ¨ç½‘é¡µä¸­æ’å…¥è‡ªå·±çš„è„šæœ¬ã€‚è¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„åŸºäºDOMçš„XSSæ¼æ´ã€‚</p><p>å¯¹äºä¸Šè¿°æœç´¢åŠŸèƒ½ï¼Œé€šè¿‡å‰åç«¯åˆ†ç¦»ï¼Œå®ƒçš„æºç å°±å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š</p><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\t&lt;body&gt;\n\t\t&lt;form role=&quot;search&quot; action=&quot;&quot; method=&quot;GET&quot;&gt;\n\t\t\t&lt;input type=&quot;text&quot; name=&quot;search&quot; placeholder=&quot;è¯·è¾“å…¥è¦æœç´¢çš„å†…å®¹&quot;&gt;\n\t        &lt;button type=&quot;submit&quot;&gt;æœç´¢&lt;/button&gt;\n\t    &lt;/form&gt;\n\t    &lt;script&gt;\n\t    \tvar search = location.search.substring(8);\n\t    \tdocument.write('ä½ æœç´¢çš„ç»“æœå†…å®¹æ˜¯ï¼š' + decodeURIComponent(search));\n\t    &lt;/script&gt;\n\t&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>è¿™æ®µä»£ç èƒ½å¤Ÿå®ç°å’Œä¹‹å‰çš„PHPä»£ç ç›¸åŒçš„é€»è¾‘ï¼šå½“ä½ åœ¨æœç´¢æ¡†ç‚¹å‡»æœç´¢å…³é”®è¯ä¹‹åï¼Œç½‘é¡µä¼šå±•ç¤ºä½ è¾“å…¥çš„å…³é”®è¯ã€‚åªä¸è¿‡ï¼ŒHTMLæ˜¯é€šè¿‡JavaScriptè„šæœ¬ä¿®æ”¹<a href=\"https://baike.baidu.com/item/%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/1033822?fromtitle=DOM&amp;fromid=50288&amp;fr=aladdin\">DOM</a>æ¥å®ç°è¿™ä¸ªåŠŸèƒ½çš„ã€‚</p><p>é‚£ä¹ˆå’Œä¸Šè¿°ä¾‹å­ä¸€æ ·ï¼Œåœ¨åŸºäºDOMçš„XSSä¸­ï¼Œé»‘å®¢ä¹Ÿå¯ä»¥é€šè¿‡æ’å…¥ä¸€æ®µ<code>&lt;script&gt;alert('xss');&lt;/script&gt;</code>æ¥æ‰§è¡ŒæŒ‡å®šçš„JavaScriptè„šæœ¬ã€‚åŸºäºDOMçš„XSSæ€»ä½“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæµç¨‹å…¶å®å’Œåå°„å‹XSSä¸€è‡´ï¼Œåªæ˜¯ä¸éœ€è¦ç»è¿‡æœåŠ¡ç«¯äº†è€Œå·²ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ac/bf/ac0ce9c0f42db7dd48cb155228b7b1bf.jpeg?wh=1920*1080\" alt=\"\"></p><h3>3.æŒä¹…å‹XSS</h3><p>ä½ å¯ä»¥å›æƒ³ä¸€ä¸‹ï¼Œå½“ä½ åœ¨ç½‘é¡µä¸­æœç´¢ä¸€ä¸ªå…³é”®è¯æ—¶ï¼Œå®é™…ä¸Šä¸è¿™ä¸ªå…³é”®è¯ç›¸å…³çš„æ‰€æœ‰æœç´¢ç»“æœéƒ½ä¼šè¢«å±•ç¤ºå‡ºæ¥ã€‚ä¸€æ—¦è¿™äº›æœç´¢ç»“æœä¸­ï¼ŒåŒ…å«é»‘å®¢æä¾›çš„æŸä¸ªæ¶æ„JavaScriptè„šæœ¬ï¼Œé‚£ä¹ˆåªè¦æˆ‘ä»¬æµè§ˆäº†è¿™ä¸ªç½‘é¡µï¼Œå°±æœ‰å¯èƒ½ä¼šæ‰§è¡Œè¿™äº›è„šæœ¬ã€‚è¿™å°±æ˜¯æŒä¹…å‹XSSã€‚å› ä¸ºè¿™äº›æ¶æ„çš„æœç´¢ç»“æœï¼Œä¼šé•¿æœŸä¿å­˜åœ¨æœåŠ¡ç«¯æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥å®ƒåˆå«ä½œå­˜å‚¨å‹XSSã€‚åœ¨åº”ç”¨ä¸­ï¼Œå­˜å‚¨ç”¨æˆ·çš„è¾“å…¥å¹¶å¯¹å®ƒä»¬è¿›è¡Œå±•ç¤ºçš„åœ°æ–¹ï¼Œéƒ½å¯èƒ½å‡ºç°æŒä¹…å‹XSSã€‚æ¯”å¦‚ï¼šæœç´¢ç»“æœã€è¯„è®ºã€åšæ–‡ç­‰ç­‰ã€‚</p><p>æœ‰äº†å‰é¢çš„é“ºå«ï¼ŒæŒä¹…å‹XSSçš„äº§ç”Ÿè¿‡ç¨‹å°±å¾ˆå¥½ç†è§£äº†ï¼Œå…·ä½“æˆ‘å°±ä¸ç»†è¯´äº†ï¼Œæˆ‘è¿˜æ˜¯æŠŠæ€»ä½“æµç¨‹ç”»äº†ä¸€å¼ å›¾ï¼Œä½ å¯ä»¥ä»”ç»†çœ‹çœ‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2e/75/2e8c429f46837b3f46a276e462c93175.jpeg?wh=1920*1080\" alt=\"\"></p><p>ç›¸æ¯”å‰é¢ä¸¤ç§XSSæ”»å‡»æ¥è¯´ï¼ŒæŒä¹…å‹XSSå¾€å¾€å…·å¤‡æ›´å¼ºçš„å±å®³æ€§ã€‚å› ä¸ºå¯¹äºä¸€ä¸ªåå°„å‹æˆ–è€…åŸºäºDOMçš„XSSæ¥è¯´ï¼Œéœ€è¦é»‘å®¢è¯±å¯¼ç”¨æˆ·ç‚¹å‡»æ¶æ„çš„URLï¼Œæ‰èƒ½å¤ŸæˆåŠŸåœ°åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸Šæ‰§è¡ŒJavaScriptè„šæœ¬ã€‚è¿™å¯¹é»‘å®¢åœ¨è¯±å¯¼ç”¨æˆ·æ“ä½œæ–¹é¢çš„èƒ½åŠ›æå‡ºäº†è€ƒéªŒï¼šå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç”¨æˆ·éƒ½æ˜¯å°ç™½ï¼Œä¸€äº›æœ‰ç»éªŒçš„ç”¨æˆ·ä¼šåœ¨ç‚¹å‡»é“¾æ¥å‰è¿›è¡Œä¸€å®šçš„è€ƒè™‘ã€‚</p><p>è€ŒæŒä¹…å‹XSSåˆ™ä¸åŒï¼Œå®ƒæ˜¯å°†æ¶æ„çš„JavaScriptè„šæœ¬å†™å…¥åˆ°äº†æ­£å¸¸çš„æœåŠ¡ç«¯æ•°æ®åº“ä¸­ï¼Œå› æ­¤ï¼Œåªè¦ç”¨æˆ·æ­£å¸¸çš„ä½¿ç”¨ä¸šåŠ¡åŠŸèƒ½ï¼Œå°±ä¼šè¢«æ³¨å…¥JavaScriptè„šæœ¬ã€‚æ‰€ä»¥è¯´ï¼ŒæŒä¹…å‹XSSåœ¨ä¼ æ’­é€Ÿåº¦å’Œä¼ æ’­èŒƒå›´ä¸Šï¼Œä¼šè¿œè¿œè¶…å‡ºå…¶ä»–ç±»å‹çš„XSSã€‚</p><h2>é€šè¿‡XSSæ”»å‡»ï¼Œé»‘å®¢èƒ½åšä»€ä¹ˆï¼Ÿ</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œè¿™3ç§XSSæ”»å‡»ï¼Œéƒ½æ˜¯å› ä¸ºé»‘å®¢åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ‰§è¡Œäº†æ¶æ„çš„JavaScriptè„šæœ¬ã€‚é‚£ä¹ˆæ‰§è¡Œè¿™äº›JavaScriptè„šæœ¬æœ‰ä»€ä¹ˆæ ·çš„å±å®³å‘¢ï¼Ÿæˆ‘æŠŠè¿™äº›å±å®³æ€»ç»“äº†ä¸€ä¸‹ï¼Œå¯ä»¥åˆ†ä¸ºä¸‹é¢å‡ ç§ã€‚</p><h3>1.çªƒå–Cookie</h3><p>ä»ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé»‘å®¢å¯ä»¥çªƒå–ç”¨æˆ·çš„Cookieã€‚å› ä¸ºé»‘å®¢æ³¨å…¥çš„JavaScriptä»£ç æ˜¯è¿è¡Œåœ¨server.comè¿™ä¸ªåŸŸåä¸‹çš„ï¼Œå› æ­¤ï¼Œé»‘å®¢å¯ä»¥åœ¨JavaScriptä¸­é€šè¿‡document.cookieè·å¾—Cookieä¿¡æ¯ã€‚</p><p>å¦å¤–ï¼Œéœ€è¦æˆ‘ä»¬æ³¨æ„çš„æ˜¯ï¼Œå—<a href=\"https://baike.baidu.com/item/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/3927875?fr=aladdin\">SOP</a>ï¼ˆSame Origin Policyï¼ŒåŒæºç­–ç•¥ï¼‰ä¿æŠ¤ï¼Œæˆ‘ä»¬åœ¨server.comä¸­æ˜¯æ— æ³•ç›´æ¥å‘hacker.comå‘é€GETæˆ–è€…POSTè¯·æ±‚çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡window.locationæ¥æ‰§è¡Œè·³è½¬æ“ä½œï¼Œé—´æ¥åœ°å°†Cookieä¿¡æ¯å‘é€å‡ºå»ã€‚é™¤äº†window.locationä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡åŠ è½½JavaScriptæ–‡ä»¶ã€å›¾ç‰‡ç­‰æ–¹å¼ï¼Œå‘attacker.comå‘é€å¸¦æœ‰Cookieçš„GETè¯·æ±‚ã€‚</p><h3>2.æœªæˆæƒæ“ä½œ</h3><p>é™¤äº†çªƒå–æ•æ„Ÿä¿¡æ¯ä»¥å¤–ï¼Œé»‘å®¢è¿˜å¯ä»¥åˆ©ç”¨JavaScriptçš„ç‰¹æ€§ï¼Œç›´æ¥ä»£æ›¿ç”¨æˆ·åœ¨HTMLè¿›è¡Œå„ç±»æ“ä½œã€‚</p><p>åœ¨æ–‡ç« å¼€å¤´ï¼Œæˆ‘ä»¬æåˆ°çš„å¾®åšXSSæ”»å‡»äº‹ä»¶ä¸­ï¼Œé»‘å®¢å°±åˆ©ç”¨JavaScriptè„šæœ¬ï¼Œè®©ç”¨æˆ·å‘é€äº†ä¸€ä¸ªå¾®åšï¼Œå¾®åšä¸­åŒæ—¶è¿˜å¸¦æœ‰åå°„å‹XSSçš„é“¾æ¥ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ¯ä¸ªç‚¹å‡»é“¾æ¥çš„ç”¨æˆ·éƒ½ä¼šé€šè¿‡å¾®åšçš„å½¢å¼ï¼Œè¯±å¯¼æ›´å¤šçš„ç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œä¸€ä¼ åã€åä¼ ç™¾ï¼Œé€ æˆå¤§èŒƒå›´çš„ä¼ æ’­ã€‚</p><h3>3.æŒ‰é”®è®°å½•å’Œé’“é±¼</h3><p>çªƒå–Cookieå’Œæœªæˆæƒæ“ä½œéƒ½æ˜¯æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°çš„å±å®³ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒJavaScriptè¿˜èƒ½åšä»€ä¹ˆå‘¢ï¼Ÿ</p><p>JavaScriptçš„åŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œå®ƒè¿˜èƒ½å¤Ÿè®°å½•ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­çš„å¤§éƒ¨åˆ†æ“ä½œã€‚æ¯”å¦‚ï¼šé¼ æ ‡çš„è½¨è¿¹ã€é”®ç›˜è¾“å…¥çš„ä¿¡æ¯ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ è¾“å…¥çš„è´¦å·åå’Œå¯†ç ï¼Œéƒ½å¯ä»¥è¢«JavaScriptè®°å½•ä¸‹æ¥ï¼Œä»è€Œè¢«é»‘å®¢è·å–åˆ°ã€‚</p><p>å¦å¤–ï¼Œå³ä½¿æŸä¸ªå­˜åœ¨XSSæ¼æ´çš„é¡µé¢ä¸å…·å¤‡ä»»ä½•è¾“å…¥æ¡†ï¼Œé»‘å®¢è¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹DOMï¼Œä¼ªé€ ä¸€ä¸ªç™»å½•æ¡†ï¼Œæ¥è¯±å¯¼ç”¨æˆ·åœ¨æœ¬ä¸éœ€è¦ç™»å½•çš„é¡µé¢ï¼Œå»è¾“å…¥è‡ªå·±çš„ç”¨æˆ·åå’Œå¯†ç ã€‚è¿™ä¹Ÿæ˜¯â€œé’“é±¼â€çš„ä¸€ç§å½¢å¼ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç”¨æˆ·è®¿é—®çš„åŸŸåæ˜¯å®Œå…¨æ­£å¸¸çš„ï¼Œåªæ˜¯é¡µé¢è¢«ç¯¡æ”¹äº†ï¼Œæ‰€ä»¥å…·å¤‡æ›´é«˜çš„è¿·æƒ‘æ€§ã€‚</p><h2>å¦‚ä½•è¿›è¡ŒXSSé˜²æŠ¤ï¼Ÿ</h2><p>è®¤è¯†åˆ°XSSçš„å±å®³ä¹‹åï¼Œä½œä¸ºå¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬æœ€åº”è¯¥æŒæ¡çš„æ˜¯ï¼Œå¦‚ä½•é¿å…åœ¨å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°XSSæ¼æ´ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹ä¸€çœ‹ï¼Œå…·ä½“æœ‰å“ªäº›é˜²æŠ¤æ–¹æ³•ã€‚</p><h3>1.éªŒè¯è¾“å…¥ORéªŒè¯è¾“å‡º</h3><p>é˜²æŠ¤çš„æ ¸å¿ƒåŸåˆ™æ˜¯ï¼š<strong>ä¸€åˆ‡ç”¨æˆ·è¾“å…¥çš†ä¸å¯ä¿¡</strong>ã€‚ä½ çš„ç¬¬ä¸€ååº”ä¸€å®šæ˜¯ï¼Œè¿™å¾ˆå¥½å®ç°å•Šï¼Œå½“æ¥æ”¶åˆ°ç”¨æˆ·çš„è¾“å…¥æ—¶ï¼Œæˆ‘ä»¬å°±è¿›è¡ŒéªŒè¯ï¼Œè¿™ä¸å°±åšåˆ°äº†å—ï¼Ÿå®é™…ä¸Šå¹¶ä¸æ˜¯è¿™ä¹ˆç®€å•çš„ï¼Œæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡æœç´¢è¿™ä¸ªä¾‹å­æ¥çœ‹ã€‚åœ¨ç”¨æˆ·ç‚¹å‡»â€œæœç´¢â€æŒ‰é’®ä¹‹åï¼Œå¦‚æœæˆ‘ä»¬é©¬ä¸Šå¯¹ä»–è¾“å…¥çš„å†…å®¹è¿›è¡ŒéªŒè¯ï¼Œè¿™æ ·å°±ä¼šäº§ç”Ÿä¸¤ä¸ªé—®é¢˜ã€‚</p><p>1.ä½ å°†æ— æ³•ä¿å­˜ç”¨æˆ·çš„åŸå§‹è¾“å…¥ä¿¡æ¯ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“å‡ºç°äº†Bugæˆ–è€…æƒ³è¦å¯¹é»‘å®¢è¡Œä¸ºè¿›è¡Œæº¯æºæ—¶ï¼Œä½ åªèƒ½â€œæ¨æ–­â€ï¼Œè€Œä¸èƒ½å‡†ç¡®åœ°è·å–ç”¨æˆ·çš„åŸå§‹è¾“å…¥ã€‚</p><p>2.ç”¨æˆ·çš„å†…å®¹å¯èƒ½ä¼šè¢«å¤šç§è¯­è¨€è·å–å’Œä½¿ç”¨ï¼Œæå‰ç¼–ç æˆ–è€…å¤„ç†ï¼Œå°†äº§ç”ŸæœªçŸ¥çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œåœ¨æ—§ç‰ˆæœ¬çš„PHPä¸­ï¼Œå°±å­˜åœ¨â€œ<a href=\"https://www.php.net/manual/en/security.magicquotes.php\">magic quotes</a>â€çš„æ¼æ´ï¼Œå› ä¸ºPHPæ— æ³•å¤„ç†æŸäº›ç¼–ç çš„å­—ç¬¦è€Œå¯¼è‡´å´©æºƒã€‚</p><p><strong>å› æ­¤ï¼Œæˆ‘æ›´æ¨èåœ¨éœ€è¦è¾“å‡ºçš„æ—¶å€™å»è¿›è¡ŒéªŒè¯</strong>ï¼Œå³å½“éœ€è¦å±•ç¤ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å†å¯¹å†…å®¹è¿›è¡ŒéªŒè¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿæ ¹æ®ä¸åŒçš„ç¯å¢ƒå»é‡‡å–ä¸åŒçš„ä¿æŠ¤æ–¹æ¡ˆäº†ã€‚</p><p>åœ¨HTMLä¸­ï¼Œå¸¸è§çš„XSSæ³¨å…¥ç‚¹æˆ‘å·²ç»æ€»ç»“å¥½äº†ï¼Œä½ å¯ä»¥çœ‹ä¸‹é¢è¿™ä¸ªè¡¨æ ¼ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/7c/a0/7c1b9b3da33247963c2c1bf38ae184a0.jpeg?wh=1920*1080\" alt=\"\"></p><h3>2.ç¼–ç </h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ç†è§£äº†ï¼Œ<strong>XSSé˜²æŠ¤çš„æ ¸å¿ƒåŸåˆ™å°±æ˜¯éªŒè¯</strong>ï¼Œé‚£å…·ä½“è¯¥æ€ä¹ˆå»åšéªŒè¯å‘¢ï¼Ÿæˆ‘è®¤ä¸ºï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜å…ˆé‡‡ç”¨ç¼–ç çš„æ–¹å¼æ¥å®Œæˆã€‚æ‰€è°“ç¼–ç ï¼Œå°±æ˜¯å°†éƒ¨åˆ†æµè§ˆå™¨è¯†åˆ«çš„å…³é”®è¯è¿›è¡Œè½¬æ¢ï¼ˆæ¯”å¦‚&lt;å’Œ&gt;ï¼‰ï¼Œä»è€Œé¿å…æµè§ˆå™¨äº§ç”Ÿè¯¯è§£ã€‚å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œç¼–ç æ„å‘³ç€ï¼Œä½¿ç”¨JavaScriptæä¾›çš„åŠŸèƒ½å¯¹ç”¨æˆ·å†…å®¹è¿›è¡Œå¤„ç†ã€‚å…·ä½“çš„æ–¹æ³•æˆ‘ä¹Ÿæ€»ç»“äº†ä¸€ä¸‹ï¼Œä½ å¯ä»¥çœ‹è¿™ä¸ªè¡¨æ ¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ca/1e/ca06351dcf763b86bb8bef554763bc1e.jpeg?wh=1920*1080\" alt=\"\"></p><p>å¯¹äºæœ€åä¸€ä¸ªæ³¨å…¥ç‚¹ï¼Œå³åœ¨JavaScriptä¸­è¿›è¡Œæ³¨å…¥ï¼Œç›®å‰è¿˜æ²¡æœ‰å†…ç½®çš„ç¼–ç æ–¹å¼æ¥å¯¹å®ƒæä¾›ä¿æŠ¤ã€‚ä½ å½“ç„¶å¯ä»¥é€šè¿‡è¯¸å¦‚URLç¼–ç ç­‰æ–¹å¼è¿›è¡Œç¼–ç ï¼Œä½†è¿™æœ‰å¯èƒ½å¯¹åº”ç”¨çš„è‡ªèº«é€»è¾‘äº§ç”Ÿå½±å“ã€‚å› æ­¤ï¼ŒJavaScriptä¸­çš„æ³¨å…¥å¹¶ä¸é€‚åˆé€šè¿‡ç¼–ç æ¥è¿›è¡Œä¿æŠ¤ã€‚</p><h3>3.æ£€æµ‹å’Œè¿‡æ»¤</h3><p>ä½†æ˜¯ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œç¼–ç ä¼šå¯¹ç½‘é¡µå®é™…çš„å±•ç°æ•ˆæœäº§ç”Ÿå½±å“ã€‚æ¯”å¦‚ï¼ŒåŸæœ¬ç”¨æˆ·å¯èƒ½æƒ³å±•ç¤ºä¸€ä¸ª1&gt;0ï¼Œå´è¢«ç¼–ç å±•ç¤ºæˆäº†1&amp;gt0ã€‚å°½ç®¡ç½‘ç»œç¯å¢ƒå®‰å…¨äº†ï¼Œå´å¯¹ç”¨æˆ·é€ æˆäº†å›°æ‰°ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡‡å–å“ªäº›æ–¹æ³•è¿›è¡ŒéªŒè¯å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘å°±ä¸ºä½ ä»‹ç»ä¸€ä¸‹æ£€æµ‹å’Œè¿‡æ»¤ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç”¨æˆ·çš„å†…å®¹è¿›è¡Œæ£€æµ‹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨é»‘åå•å’Œç™½åå•çš„è§„åˆ™ã€‚é»‘åå•å¾€å¾€æ˜¯æˆ‘ä»¬æœ€ç›´æ¥æƒ³åˆ°çš„æ–¹æ³•ï¼šæ—¢ç„¶é»‘å®¢è¦æ’å…¥<code>&lt;javascript&gt;</code>æ ‡ç­¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ£€æµ‹ç”¨æˆ·å†…å®¹ä¸­æ˜¯å¦å­˜åœ¨<code>&lt;javascript&gt;</code>æ ‡ç­¾å°±å¥½äº†ã€‚</p><p>ä½†æ˜¯ï¼Œé»‘å®¢çš„æ”»å‡»æ–¹æ³•æ˜¯æ— ç©·æ— å°½çš„ã€‚ä½ æ£€æµ‹äº†<code>&lt;javascript&gt;</code>ï¼Œé»‘å®¢å°±å¯ä»¥æ”¹æˆ<code>&lt;JavaScript&gt;</code>ï¼ˆå› ä¸ºHTMLæ ‡ç­¾å¯¹å¤§å°å†™ä¸æ•æ„Ÿï¼‰ï¼Œç”šè‡³æœ‰äº›æ—¶å€™è¿˜èƒ½å¤Ÿç¼–ç æˆ<code>&amp;#106;avascript</code>ç­‰ç­‰ã€‚å¦å¤–ï¼ŒHTML5çš„å‘å±•é€Ÿåº¦å¾ˆå¿«ï¼Œæ€»æ˜¯æœ‰æ–°çš„æ ‡ç­¾è¢«å¼€å‘å‡ºæ¥ï¼Œè¿™äº›æ–°æ ‡ç­¾ä¸­ä¹Ÿå¯èƒ½åŒ…å«æ–°çš„æ³¨å…¥ç‚¹ã€‚å› æ­¤ï¼Œé»‘åå•çš„æ›´æ–°å’Œç»´æŠ¤è¿‡ç¨‹ï¼Œæ˜¯éœ€è¦æˆ‘ä»¬å’Œé»‘å®¢è¿›è¡Œé•¿æœŸå¯¹æŠ—çš„è¿‡ç¨‹</p><p>æ‰€ä»¥ï¼Œåœ¨æ£€æµ‹ä¸­ï¼Œ<strong>æˆ‘æ›´æ¨èä½¿ç”¨ç™½åå•çš„è§„åˆ™</strong>ã€‚å› ä¸ºç™½åå•çš„è§„åˆ™æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”ååˆ†æœ‰æ•ˆã€‚æ¯”å¦‚ï¼Œåœ¨åªè¾“å…¥ä¸€ä¸ªåˆ†æ•°çš„åœ°æ–¹ï¼Œè§„å®šåªæœ‰æ•´å‹å˜é‡æ˜¯åˆæ³•çš„ã€‚è¿™æ ·ä¸€æ¥ï¼Œä½ å°±èƒ½å¤Ÿæ£€æµ‹å‡º99.99%çš„æ”»å‡»è¡Œä¸ºäº†ã€‚</p><p>è¯´å®Œäº†æ£€æµ‹ï¼Œé‚£å½“å‘ç°æŸä¸ªç”¨æˆ·çš„å†…å®¹å¯èƒ½å­˜åœ¨XSSæ”»å‡»è„šæœ¬æ—¶ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼Œå¤„ç†é€‰é¡¹æœ‰ä¸¤ä¸ªï¼šæ‹’ç»æˆ–è€…è¿‡æ»¤ã€‚æ¯«æ— ç–‘é—®ï¼Œæ‹’ç»æ˜¯æœ€å®‰å…¨çš„é€‰é¡¹ã€‚ä¸€æ—¦ä½ å‘ç°å¯èƒ½çš„XSSæ”»å‡»è„šæœ¬ï¼Œåªè¦ä¸å°†è¿™æ®µç”¨æˆ·å†…å®¹å±•ç°å‡ºæ¥ï¼Œå°±èƒ½é¿å…å¯èƒ½çš„æ”»å‡»è¡Œä¸ºã€‚</p><p>ä½†æ˜¯ï¼Œæ‹’ç»ä¼šé˜»ç¢ç”¨æˆ·çš„ä½¿ç”¨æµç¨‹ï¼Œä»ç”¨æˆ·ä½“éªŒçš„è§’åº¦ä¸Šæ¥è€ƒè™‘çš„è¯ï¼Œè¿‡æ»¤ä¼šæ›´è¢«ç”¨æˆ·æ‰€æ¥å—ã€‚ä¸Šé¢æåˆ°çš„ç¼–ç å°±å±äºä¸€ç§è¿‡æ»¤çš„æ–¹å¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å¯¹æ•æ„Ÿå­—ç¬¦è¿›è¡Œæ›¿æ¢åˆ é™¤ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ›¿æ¢çš„æ—¶å€™ï¼Œä¸€å®šä¸èƒ½é‡‡å–é»‘åå•çš„å½¢å¼ï¼ˆæ¯”å¦‚ï¼šå°†javascriptè¿›è¡Œåˆ é™¤ï¼Œé‚£é»‘å®¢å°±å¯ä»¥é€šè¿‡JavaScriptæ¥ç»•è¿‡ï¼‰ï¼Œè€Œæ˜¯<strong>åº”è¯¥é‡‡å–ç™½åå•çš„å½¢å¼</strong>ï¼ˆæ¯”å¦‚ï¼Œé™¤äº†divä¹‹å¤–çš„æ ‡ç­¾å…¨éƒ¨åˆ é™¤ï¼‰ã€‚</p><p>åŒæ ·åœ°ï¼Œ<strong>è¿‡æ»¤çš„æµç¨‹ä¹Ÿå¿…é¡»å½»åº•</strong>ã€‚æ¯”å¦‚ï¼Œæˆ‘çœ‹åˆ°è¿‡æœ‰äººé‡‡ç”¨ä¸‹é¢è¿™è¡Œå­—ç¬¦ä¸²æ¥è¿‡æ»¤javascriptæ ‡ç­¾ï¼š</p><pre><code>$str=str_replace('&lt;javascript&gt;','',$str);\n</code></pre><p>ä½†é»‘å®¢åªéœ€è¦å°†strçš„å€¼å˜æˆ<code>&lt;java&lt;javascript&gt;script&gt;</code>å°±å¯ä»¥äº†ï¼Œå› ä¸º<code>str_replace('&lt;javascript&gt;','','&lt;java&lt;javascript&gt;script&gt;')</code>çš„ç»“æœå°±æ˜¯<code>&lt;javascript&gt;</code>ã€‚</p><h3>4.CSP</h3><p>é¢å¯¹XSSè¿™æ ·ä¸€ä¸ªå¾ˆæ™®éçš„é—®é¢˜ï¼ŒW3Cæå‡ºäº†CSPï¼ˆContent Security Policyï¼Œå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰æ¥æå‡Webçš„å®‰å…¨æ€§ã€‚æ‰€è°“CSPï¼Œå°±æ˜¯åœ¨æœåŠ¡ç«¯è¿”å›çš„HTTP headeré‡Œé¢æ·»åŠ ä¸€ä¸ªContent-Security-Policyé€‰é¡¹ï¼Œç„¶åå®šä¹‰èµ„æºçš„ç™½åå•åŸŸåã€‚æµè§ˆå™¨å°±ä¼šè¯†åˆ«è¿™ä¸ªå­—æ®µï¼Œå¹¶é™åˆ¶å¯¹éç™½åå•èµ„æºçš„è®¿é—®ã€‚</p><p>é…ç½®æ ·ä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>Content-Security-Policy:default-src â€˜noneâ€™; script-src â€˜selfâ€™; \nconnect-src â€˜selfâ€™; img-src â€˜selfâ€™; style-src â€˜selfâ€™;\n</code></pre><p>é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦é™åˆ¶å¤–åŸŸèµ„æºçš„è®¿é—®å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºXSSé€šå¸¸ä¼šå—åˆ°é•¿åº¦çš„é™åˆ¶ï¼Œå¯¼è‡´é»‘å®¢æ— æ³•æäº¤ä¸€æ®µå®Œæ•´çš„JavaScriptä»£ç ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé»‘å®¢ä¼šé‡‡å–å¼•ç”¨ä¸€ä¸ªå¤–åŸŸJavaScriptèµ„æºçš„æ–¹å¼æ¥è¿›è¡Œæ³¨å…¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé™åˆ¶äº†å¤–åŸŸèµ„æºçš„è®¿é—®ï¼Œä¹Ÿå°±é™åˆ¶äº†é»‘å®¢é€šè¿‡èµ„æºè¯·æ±‚çš„æ–¹å¼ï¼Œç»•è¿‡SOPå‘é€GETè¯·æ±‚ã€‚ç›®å‰ï¼ŒCSPè¿˜æ˜¯å—åˆ°äº†å¤§éƒ¨åˆ†æµè§ˆå™¨æ”¯æŒçš„ï¼Œåªè¦ç”¨æˆ·ä½¿ç”¨çš„æ˜¯æœ€æ–°çš„æµè§ˆå™¨ï¼ŒåŸºæœ¬éƒ½èƒ½å¤Ÿå¾—åˆ°å¾ˆå¥½çš„ä¿æŠ¤ã€‚</p><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œæˆ‘ä»¬è®²äº†XSSçš„æ”»å‡»ç±»å‹ã€ä¼šäº§ç”Ÿçš„å½±å“ï¼Œä»¥åŠå¦‚ä½•å¯¹å®ƒè¿›è¡Œé˜²æŠ¤ã€‚ä¸‹é¢æˆ‘æ¥å¸¦ä½ æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ è¦æŒæ¡çš„é‡ç‚¹å†…å®¹ã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒXSSå°±æ˜¯åˆ©ç”¨Webæ¼æ´ï¼Œåœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ‰§è¡Œé»‘å®¢å®šä¹‰çš„JavaScriptè„šæœ¬ï¼Œè¿™æ ·ä¸€ç§æ”»å‡»æ–¹å¼ã€‚æ ¹æ®æ”»å‡»æ–¹å¼çš„ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºï¼šåå°„å‹XSSã€åŸºäºDOMçš„XSSå’ŒæŒä¹…å‹XSSã€‚é€šè¿‡åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ³¨å…¥è„šæœ¬ï¼Œé»‘å®¢å¯ä»¥é€šè¿‡å„ç§æ–¹å¼ï¼Œé‡‡é›†åˆ°ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šCookieã€æŒ‰é”®è®°å½•ã€å¯†ç ç­‰ã€‚</p><p>é¢„é˜²XSSä¸»è¦é€šè¿‡å¯¹ç”¨æˆ·å†…å®¹çš„éªŒè¯æ¥å®Œæˆã€‚é¦–å…ˆï¼Œæˆ‘æ¨èåœ¨éœ€è¦å±•ç¤ºç”¨æˆ·å†…å®¹çš„æ—¶å€™å»è¿›è¡ŒéªŒè¯ï¼Œè€Œä¸æ˜¯å½“ç”¨æˆ·è¾“å…¥çš„æ—¶å€™å°±å»éªŒè¯ã€‚åœ¨éªŒè¯è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼˜å…ˆé‡‡ç”¨ç¼–ç çš„æ–¹å¼æ¥å®Œæˆã€‚å¦‚æœç¼–ç å½±å“åˆ°äº†ä¸šåŠ¡çš„æ­£å¸¸åŠŸèƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨ç™½åå•çš„æ£€æµ‹å’Œè¿‡æ»¤æ–¹å¼æ¥è¿›è¡ŒéªŒè¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œé…ç½®åˆé€‚çš„CSPè§„åˆ™ï¼Œè¿™ä¹Ÿèƒ½åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šé™ä½XSSäº§ç”Ÿçš„å½±å“ã€‚</p><p>å¦å¤–ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘æŠŠæœ¬èŠ‚è¯¾çš„é‡ç‚¹å†…å®¹æ¢³ç†äº†ä¸€ä¸ªè„‘å›¾ã€‚ä½ å¯ä»¥æ ¹æ®å®ƒæ¥æŸ¥æ¼è¡¥ç¼ºï¼ŒåŠ æ·±å°è±¡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/48/20/48a923998b80ad2f1c2a274704690e20.jpg?wh=1142*891\" alt=\"\"></p><h2>æ€è€ƒé¢˜</h2><p>å¥½äº†ï¼Œé€šè¿‡ä»Šå¤©çš„å­¦ä¹ ï¼Œç›¸ä¿¡ä½ å·²ç»äº†è§£äº†ä»€ä¹ˆæ˜¯XSSæ”»å‡»ã€‚ä½ å¯ä»¥è¯•ç€åˆ†æä¸€ä¸‹ï¼Œæ–‡ç« å¼€å¤´æåˆ°çš„äº‹ä»¶ä¸­ï¼Œé»‘å®¢æ˜¯åˆ©ç”¨å“ªç§ç±»å‹çš„XSSå‘èµ·çš„æ”»å‡»å‘¢ï¼Ÿæˆ‘ä»¬åº”è¯¥æ€ä¹ˆè¿›è¡Œé˜²å¾¡å‘¢ï¼Ÿ</p><p>å¦å¤–ï¼Œåœ¨äº‹ä»¶ä¸­æˆ‘ä¹Ÿæè¿°äº†å¼€å‘â€œç”©é”…â€çš„åœºæ™¯ï¼šå‰ç«¯ä¹Ÿå¥½ã€åç«¯ä¹Ÿå¥½ï¼Œå¼€å‘äººå‘˜éƒ½ä¸è®¤ä¸ºæ˜¯è‡ªå·±çš„é—®é¢˜ã€‚é‚£ä¹ˆï¼Œä½ è®¤ä¸ºå‡ºç°è¿™ç§å®‰å…¨äº‹ä»¶ï¼Œåº”è¯¥ç”±è°æ¥â€œèƒŒé”…â€å‘¢ï¼Ÿæ˜¯å¼€å‘ã€è¿ç»´è¿˜æ˜¯å®‰å…¨è´Ÿè´£äººå‘¢ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„æ€è€ƒå’Œç–‘æƒ‘ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚æˆ‘ä»¬ä¸‹ä¸€è®²å†è§ï¼</p>","neighbors":{"left":{"article_title":"05 | è®¿é—®æ§åˆ¶ï¼šå¦‚ä½•é€‰å–ä¸€ä¸ªåˆé€‚çš„æ•°æ®ä¿æŠ¤æ–¹æ¡ˆï¼Ÿ","id":178528},"right":{"article_title":"07 | SQLæ³¨å…¥ï¼šæ˜æ˜è®¾ç½®äº†å¼ºå¯†ç ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šè¢«åˆ«äººç™»å½•ï¼Ÿ","id":181424}},"comments":[{"had_liked":false,"id":179207,"user_name":"GitHubGanKai","can_delete":false,"product_type":"c1","uid":1477351,"ip_address":"","ucode":"BF6D6F8F3EED31","user_header":"https://static001.geekbang.org/account/avatar/00/16/8a/e7/a6c603cf.jpg","comment_is_top":false,"comment_ctime":1581936149,"is_pvip":false,"replies":[{"id":"69768","content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1582075508,"ip_address":"","comment_id":179207,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44531609109","product_id":100041701,"comment_content":"è€å¸ˆ  ä½¿ç”¨csp å¦‚æœå‰ç«¯ä½¿ç”¨äº†cdn æˆ–è€…é€šè¿‡scriptæ ‡ç­¾åŠ è½½å…¶ä»–çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚æœè¿™äº›åŸŸæ²¡æœ‰åœ¨ç™½åå•ä¸‹ï¼Œå¯¹äºåŠ è½½è¿™äº›ä¸åŒåŸŸçš„èµ„æºæ˜¯ä¸æ˜¯ä¹Ÿä¼šé™åˆ¶å‘¢ ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484143,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582075508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179190,"user_name":"GitHubGanKai","can_delete":false,"product_type":"c1","uid":1477351,"ip_address":"","ucode":"BF6D6F8F3EED31","user_header":"https://static001.geekbang.org/account/avatar/00/16/8a/e7/a6c603cf.jpg","comment_is_top":false,"comment_ctime":1581933935,"is_pvip":false,"replies":[{"id":"69766","content":"è¿™å…¶å®æ˜¯ä¸€ç§å¦¥åå§ã€‚ç½‘é¡µä¸­ç»å¸¸éœ€è¦å¼•ç”¨ä¸€äº›å¤–éƒ¨çš„èµ„æºï¼Œæ¯”å¦‚è¯´å›¾ç‰‡ã€‚å¦‚æœä¸€å¾‹ç¦æ­¢çš„è¯ï¼Œé‚£ç›¸å½“äºæ¯ä¸ªç½‘ç«™éƒ½å¾—è‡ªå·±ç»´æŠ¤ä¸€å¥—å®Œæ•´çš„èµ„æºï¼Œä¼šå¾ˆéº»çƒ¦ã€‚å› æ­¤ï¼Œå¯¹äºé™æ€èµ„æºçš„è®¿é—®ï¼Œæ˜¯ä¸€å¾‹å…è®¸çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1582075420,"ip_address":"","comment_id":179190,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35941672303","product_id":100041701,"comment_content":"è€å¸ˆï¼Œå‰ç«¯è¯·æ±‚ä¸­ï¼Œå‡ºäºå®‰å…¨é—®é¢˜ï¼Œä¸ºä»€ä¹ˆæµè§ˆå™¨ä¼šå¯¹ajax è¯·æ±‚æœ‰è·¨åŸŸå®‰å…¨é™åˆ¶ï¼Œä½†æ˜¯åƒ&lt;script src=&#39;xxx&#39;&gt;&lt;img src=&#39;xxx&#39;&gt;è¿™æ ·çš„æ ‡ç­¾è¯·æ±‚è¿‡æ¥çš„æ•°æ®ï¼Œå´æ²¡æœ‰è·¨åŸŸå®‰å…¨é™åˆ¶å‘¢ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484134,"discussion_content":"è¿™å…¶å®æ˜¯ä¸€ç§å¦¥åå§ã€‚ç½‘é¡µä¸­ç»å¸¸éœ€è¦å¼•ç”¨ä¸€äº›å¤–éƒ¨çš„èµ„æºï¼Œæ¯”å¦‚è¯´å›¾ç‰‡ã€‚å¦‚æœä¸€å¾‹ç¦æ­¢çš„è¯ï¼Œé‚£ç›¸å½“äºæ¯ä¸ªç½‘ç«™éƒ½å¾—è‡ªå·±ç»´æŠ¤ä¸€å¥—å®Œæ•´çš„èµ„æºï¼Œä¼šå¾ˆéº»çƒ¦ã€‚å› æ­¤ï¼Œå¯¹äºé™æ€èµ„æºçš„è®¿é—®ï¼Œæ˜¯ä¸€å¾‹å…è®¸çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582075420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163879,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1576817549,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35936555917","product_id":100041701,"comment_content":"å­¦åˆ°äº†ï¼Œå¾ˆé€å½»ï¼Œ å†™ä»£ç çš„æ—¶å€™å¾—æ³¨æ„å•Šã€‚","like_count":8},{"had_liked":false,"id":234559,"user_name":"1.1","can_delete":false,"product_type":"c1","uid":1685457,"ip_address":"","ucode":"955730BDF9E13B","user_header":"https://static001.geekbang.org/account/avatar/00/19/b7/d1/94a0220b.jpg","comment_is_top":false,"comment_ctime":1594719606,"is_pvip":true,"replies":[{"id":"86938","content":"æ˜¯çš„ã€‚å¦‚æœh5æœ¬èº«ä¸éœ€è¦ä½¿ç”¨cookieçš„è¯ï¼Œéƒ½å»ºè®®è¿™ä¹ˆè®¾ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1594983895,"ip_address":"","comment_id":234559,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31659490678","product_id":100041701,"comment_content":"è€å¸ˆï¼Œåƒ XSS ç›— cookie è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åªè¦åœ¨å•ç‚¹ç™»å½•çš„åº”ç”¨è®¤è¯æˆåŠŸå Set-Cookie æ—¶åŠ ä¸Š HttpOnly å­—æ®µï¼Œé¿å… JS ç”¨ document.cookie è¯»å–(å‰ç«¯ä¸€èˆ¬ä¹Ÿä¸éœ€è¦æ“ä½œ cookieå§)ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¤§ç¨‹åº¦é™ä½ç”¨æˆ·å‡­è¯è¢«ç›—å–çš„å±å®³ï¼Ÿ<br>","like_count":7,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501422,"discussion_content":"æ˜¯çš„ã€‚å¦‚æœh5æœ¬èº«ä¸éœ€è¦ä½¿ç”¨cookieçš„è¯ï¼Œéƒ½å»ºè®®è¿™ä¹ˆè®¾ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594983895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193596,"user_name":"åŠå…½äºº","can_delete":false,"product_type":"c1","uid":1297619,"ip_address":"","ucode":"AEB09E0C0892EA","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/d3/bcb7a3fd.jpg","comment_is_top":false,"comment_ctime":1584931972,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27354735748","product_id":100041701,"comment_content":"å¯¹&lt;java&lt;javascript&gt;script&gt;çš„æ›¿æ¢ï¼Œå¯ä»¥å†™ä¸€ä¸ªå¾ªç¯while(1) { if notFind(...) then break; replace( ... ï¼‰} ï¼Œå¯ä»¥é˜²æ­¢å•æ¬¡æ›¿æ¢ååˆå‡ºç°æ•æ„Ÿè¯","like_count":6,"discussions":[{"author":{"id":1384254,"avatar":"https://static001.geekbang.org/account/avatar/00/15/1f/3e/861b6d4d.jpg","nickname":"è±†æµ†æ²¹æ¡è“èƒ–çº¸","note":"","ucode":"D2C49FC10B7ECE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583695,"discussion_content":"ä½¿ç”¨æ­£åˆ™åŒ¹é…è¿‡æ»¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660295240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169884,"user_name":"è‚–å¤§å¦","can_delete":false,"product_type":"c1","uid":1426644,"ip_address":"","ucode":"2AD2F8684FDCF8","user_header":"https://static001.geekbang.org/account/avatar/00/15/c4/d4/5c8fb1cb.jpg","comment_is_top":false,"comment_ctime":1578468342,"is_pvip":false,"replies":[{"id":"65968","content":"å®è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåœ¨é¡µé¢ä¸­æ¤å…¥äº†é»‘å®¢çš„jsè„šæœ¬ã€‚åŒºåˆ«å°±æ˜¯åœ¨äºä½ç½®ä¸åŒï¼Œå¯¼è‡´ä¼ æ’­çš„æ–¹å¼ä¸ä¸€æ ·ã€‚æ¯”å¦‚åå°„å‹xsséœ€è¦ç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œå­˜å‚¨å‹xssåªéœ€è¦ç”¨æˆ·æ­£å¸¸æµè§ˆé¡µé¢ã€‚æœ€ç»ˆæ¤å…¥äº†jsè„šæœ¬åï¼Œç›´æ¥é€šè¿‡document.cookieå°±å¯ä»¥æ‹¿åˆ°cookieï¼Œç„¶åå‘é€åˆ°é»‘å®¢çš„å¤–éƒ¨æ¥å£ï¼Œå°±å¯ä»¥è·å–åˆ°äº†","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1578491509,"ip_address":"","comment_id":169884,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27348272118","product_id":100041701,"comment_content":"æ‚¨è¿™ä¸ªè®²è§£éœ€è¦ä¸€å®šåŸºç¡€çš„äººæ‰èƒ½çœ‹å—<br>æˆ‘ç ”ç©¶äº†åŠå¤©ï¼Œå„ç§xssæ”»å‡»é™¤äº†å­˜å‚¨ä½ç½®çš„ä¸åŒï¼Œå¹¶æ²¡æœ‰çœ‹åˆ°å®è´¨çš„åŒºåˆ«<br>èƒ½ä¸èƒ½å…·ä½“çš„è®²è®²é»‘å®¢ä»å¼€å§‹æ”»å‡»åˆ°è·å–æœåŠ¡å™¨ç«¯cookieçš„ä¸€æ•´ä¸ªè¿‡ç¨‹ï¼Œæˆ‘å¹¶æ²¡æœ‰çœ‹çš„å¤ªæ‡‚ã€‚ã€‚ã€‚","like_count":6,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480762,"discussion_content":"å®è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåœ¨é¡µé¢ä¸­æ¤å…¥äº†é»‘å®¢çš„jsè„šæœ¬ã€‚åŒºåˆ«å°±æ˜¯åœ¨äºä½ç½®ä¸åŒï¼Œå¯¼è‡´ä¼ æ’­çš„æ–¹å¼ä¸ä¸€æ ·ã€‚æ¯”å¦‚åå°„å‹xsséœ€è¦ç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œå­˜å‚¨å‹xssåªéœ€è¦ç”¨æˆ·æ­£å¸¸æµè§ˆé¡µé¢ã€‚æœ€ç»ˆæ¤å…¥äº†jsè„šæœ¬åï¼Œç›´æ¥é€šè¿‡document.cookieå°±å¯ä»¥æ‹¿åˆ°cookieï¼Œç„¶åå‘é€åˆ°é»‘å®¢çš„å¤–éƒ¨æ¥å£ï¼Œå°±å¯ä»¥è·å–åˆ°äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578491509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1394030,"avatar":"https://static001.geekbang.org/account/avatar/00/15/45/6e/11cf22de.jpg","nickname":"æ™®ç½—ç±³ä¿®æ–¯","note":"","ucode":"DDA7DE4DE371FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":322099,"discussion_content":"è€å¸ˆï¼Œæ‚¨è¿™ä¸ªçªƒå–cookieçš„xssæ”»å‡»å±äºæ°¸ä¹…å­˜å‚¨å‹çš„xssæ”»å‡»å—ï¼Œæœ‰æ²¡æœ‰ä¸€äº›åœ¨nginxé˜²æŠ¤çš„æªæ–½ï¼Ÿç°åœ¨è¿˜æ˜¯æœ‰å¾ˆå¤šå…¬å¸ç”¨è¿™ä¸ªnginxçš„ï¼Œæˆ‘ä»¬å…¬å¸å°±æ˜¯ï¼Œè¿˜é‡åˆ°äº†å„ç§xssæ”»å‡»ï¼Œè„‘é˜”ç–¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604675124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194267,"user_name":"ç¨‹åºå‘˜äºŒå¸ˆå…„","can_delete":false,"product_type":"c1","uid":1205697,"ip_address":"","ucode":"C9E3B5B3358BDF","user_header":"https://static001.geekbang.org/account/avatar/00/12/65/c1/afcd981b.jpg","comment_is_top":false,"comment_ctime":1585044335,"is_pvip":true,"replies":[{"id":"74454","content":"æœ¬è´¨è¿˜æ˜¯åŸºäºxssï¼Œä½¿å¾—æµè§ˆå™¨æ‰§è¡Œé»‘å®¢å®šä¹‰çš„jsã€‚è€Œjsæ˜¯å¯ä»¥å¯¹é¡µé¢å…ƒç´ è¿›è¡Œä»»æ„çš„ä¿®æ”¹çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1585312171,"ip_address":"","comment_id":194267,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18764913519","product_id":100041701,"comment_content":"<br>æœ‰ç‚¹ä¸å¤ªæ˜ç™½ï¼Œé»‘å®¢æ€ä¹ˆä¿®æ”¹ DOM ä¼ªé€ ç™»å½•çª—å£å‘¢ï¼Ÿ è€Œä¸”æ˜¯æ­£å¸¸çš„åŸŸå<br>","like_count":4,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488797,"discussion_content":"æœ¬è´¨è¿˜æ˜¯åŸºäºxssï¼Œä½¿å¾—æµè§ˆå™¨æ‰§è¡Œé»‘å®¢å®šä¹‰çš„jsã€‚è€Œjsæ˜¯å¯ä»¥å¯¹é¡µé¢å…ƒç´ è¿›è¡Œä»»æ„çš„ä¿®æ”¹çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585312171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205697,"avatar":"https://static001.geekbang.org/account/avatar/00/12/65/c1/afcd981b.jpg","nickname":"ç¨‹åºå‘˜äºŒå¸ˆå…„","note":"","ucode":"C9E3B5B3358BDF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215523,"discussion_content":"åŸºäºxss çš„ js è„šæœ¬ï¼Œæ˜ç™½äº†ï¼Œè°¢è°¢è€å¸ˆçš„è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585329890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193698,"user_name":"PyGeek","can_delete":false,"product_type":"c1","uid":1468586,"ip_address":"","ucode":"0B6467C5271BCB","user_header":"https://static001.geekbang.org/account/avatar/00/16/68/aa/6d5f2115.jpg","comment_is_top":false,"comment_ctime":1584950219,"is_pvip":false,"replies":[{"id":"73943","content":"å„æœ‰å„çš„åŒºåˆ«ã€‚CSRFæ›´å¤šçš„å¼ºè°ƒè·¨ç«™çš„æ”»å‡»ï¼Œå³ä»Aç«™ç‚¹ä¼ªé€ ç”¨æˆ·å‘Bç«™ç‚¹å‘èµ·è¯·æ±‚ï¼Œè¿™æ ·æ‰èƒ½å¤§å¤§æ‰©å¤§ä¼ æ’­èŒƒå›´ã€‚è€ŒXSSæ˜¯æœ¬ç«™å†…çš„æ”»å‡»ï¼Œæ‰©æ•£èƒ½åŠ›å¼±å¾ˆå¤šï¼Œä½†é€ æˆçš„å±å®³é€šå¸¸ä¼šè¿œé«˜äºCSRFã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1585031366,"ip_address":"","comment_id":193698,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18764819403","product_id":100041701,"comment_content":"è¯·é—®æ‚¨è§‰å¾—csrfå’Œxssåº”è¯¥æ˜¯ä¸€ç§åŒ…å«å…³ç³»ï¼Œè¿˜æ˜¯å„æœ‰å„çš„åŒºåˆ«ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488627,"discussion_content":"å„æœ‰å„çš„åŒºåˆ«ã€‚CSRFæ›´å¤šçš„å¼ºè°ƒè·¨ç«™çš„æ”»å‡»ï¼Œå³ä»Aç«™ç‚¹ä¼ªé€ ç”¨æˆ·å‘Bç«™ç‚¹å‘èµ·è¯·æ±‚ï¼Œè¿™æ ·æ‰èƒ½å¤§å¤§æ‰©å¤§ä¼ æ’­èŒƒå›´ã€‚è€ŒXSSæ˜¯æœ¬ç«™å†…çš„æ”»å‡»ï¼Œæ‰©æ•£èƒ½åŠ›å¼±å¾ˆå¤šï¼Œä½†é€ æˆçš„å±å®³é€šå¸¸ä¼šè¿œé«˜äºCSRFã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585031366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1468586,"avatar":"https://static001.geekbang.org/account/avatar/00/16/68/aa/6d5f2115.jpg","nickname":"PyGeek","note":"","ucode":"0B6467C5271BCB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213188,"discussion_content":"å¥½æ»´ è°¢è°¢æ‚¨çš„è§£ç­” èµğŸ‘","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585058203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2704431,"avatar":"https://static001.geekbang.org/account/avatar/00/29/44/2f/67d8a9ee.jpg","nickname":"é˜¿ç™½","note":"","ucode":"1AA0E07921A380","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387786,"discussion_content":"çœ‹åˆ°è¿‡ä¸€ä¸ªä¸é”™çš„æ€»ç»“ï¼Œåˆ†äº«ä¸€ä¸‹ï¼šxssæ˜¯å‰ç«¯è¿‡åˆ†ä¿¡ä»»åç«¯ï¼ˆæ²¡æœ‰å……åˆ†éªŒè¯åç«¯çš„è¿”å›ï¼‰ï¼Œcsrfæ˜¯åç«¯è¿‡åˆ†ä¿¡ä»»å‰ç«¯ï¼ˆæ²¡æœ‰å……åˆ†éªŒè¯å‰ç«¯çš„è¾“å…¥ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628413622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196596,"user_name":"å¤§åç‹ç‹¸","can_delete":false,"product_type":"c1","uid":1325678,"ip_address":"","ucode":"5044F89A505C5B","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/6e/e39e90ca.jpg","comment_is_top":false,"comment_ctime":1585295999,"is_pvip":false,"replies":[{"id":"74983","content":"å¯¹äºä»»ä½•è®¤è¯æ–¹å¼éƒ½ä¸€æ ·ï¼Œæ‹¿äº†å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œå°±èƒ½å¤Ÿç›—ç”¨è´¦å·ï¼Œé™¤éè¦æ±‚æ¯æ¬¡æ“ä½œéƒ½è¾“å…¥å¯†ç ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è°ˆè®ºè®¤è¯çš„å‰æéƒ½æ˜¯å®¢æˆ·ç«¯å®‰å…¨çš„æƒ…å†µä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1585575032,"ip_address":"","comment_id":196596,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14470197887","product_id":100041701,"comment_content":"JWT é‚£ä¸ª å²‚ä¸æ˜¯ æœ‰äººæ‹¿äº†å®¢æˆ·ç«¯çš„ä¸œè¥¿ å°±èƒ½å€Ÿç”¨è¢«äººçš„åä¹‰å¹²å•¥äº‹äº†ã€‚","like_count":3,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489338,"discussion_content":"å¯¹äºä»»ä½•è®¤è¯æ–¹å¼éƒ½ä¸€æ ·ï¼Œæ‹¿äº†å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œå°±èƒ½å¤Ÿç›—ç”¨è´¦å·ï¼Œé™¤éè¦æ±‚æ¯æ¬¡æ“ä½œéƒ½è¾“å…¥å¯†ç ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è°ˆè®ºè®¤è¯çš„å‰æéƒ½æ˜¯å®¢æˆ·ç«¯å®‰å…¨çš„æƒ…å†µä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585575032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254252,"avatar":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","nickname":"LIKE","note":"","ucode":"9DAB7F9051648A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270252,"discussion_content":"é™¤cookieså¤–ï¼Œé€šè¿‡æ ¡éªŒè®¿é—®å‰åçš„å®¢æˆ·ç«¯ipæ˜¯å¦ä¸€è‡´ï¼Œä¹Ÿå¯ä»¥å¢å¼ºä¸€å®šçš„å®‰å…¨æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589987004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163834,"user_name":"å°æ™å­","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1576809145,"is_pvip":false,"replies":[{"id":"62521","content":"è´£ä»»è‚¯å®šæ˜¯éƒ½æœ‰çš„ã€‚é—®è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯å¸Œæœ›å¼•å¯¼å¤§å®¶æ€è€ƒä¸‹å®‰å…¨åœ¨å…¬å¸ä¸­çš„å®šä½ï½","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577058238,"ip_address":"","comment_id":163834,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14461711033","product_id":100041701,"comment_content":"æ˜¯è¿™åˆ†æä¸€ä¸‹è¿™æ¬¡æ”»å‡»ï¼Œç”¨æˆ·ç‚¹å‡»äº†é“¾æ¥å°±è‡ªåŠ¨å‘é€å¾®åšäº†ï¼Œé‚£ä¹ˆæ•´ä¸ªé“¾è·¯å°±æ˜¯å‰ç«¯â€”åç«¯â€”å‰ç«¯ï¼Œè€Œè¦è¾¾åˆ°è¿™æ ·çš„ç›®çš„ï¼Œä¸€å®šæ˜¯æœ‰javascriptè„šæœ¬è¢«æ‰§è¡Œäº†ï¼Œä¼ªè£…çš„jsè„šæœ¬è·å–æœ¬åœ°cookieåç›´æ¥è°ƒç”¨åç«¯æ¥å£æ¥å‘é€å¾®åšï¼Œæ­£å¥½ç¬¦åˆåå°„XSSçš„å®šä¹‰ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæ„Ÿè§‰å¼€å‘è¿ç»´å®‰å…¨éƒ½æœ‰è´£ä»»ï¼Œå¼€å‘ä¸ºä»€ä¹ˆæ²¡åšå®‰å…¨å­—ç¬¦æ£€éªŒï¼Œè¿ç»´å®‰å…¨ä¸ºä»€ä¹ˆæ²¡æœ‰å¯¹è¿™ç§çªç„¶çˆ†å‘çš„è½¬å‘ä¿¡æ¯æ²¡æœ‰æ„è¯†åˆ°å®‰å…¨é—®é¢˜","like_count":3,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478547,"discussion_content":"è´£ä»»è‚¯å®šæ˜¯éƒ½æœ‰çš„ã€‚é—®è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯å¸Œæœ›å¼•å¯¼å¤§å®¶æ€è€ƒä¸‹å®‰å…¨åœ¨å…¬å¸ä¸­çš„å®šä½ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577058238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163786,"user_name":"å®ä»”","can_delete":false,"product_type":"c1","uid":1013493,"ip_address":"","ucode":"A0F17DFF99DB21","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg","comment_is_top":false,"comment_ctime":1576803265,"is_pvip":true,"replies":[{"id":"62511","content":"è´£ä»»è‚¯å®šæ˜¯å„æ–¹éƒ½æœ‰çš„ã€‚ä½†é”…ä¹Ÿå¾—æœ‰äººèƒŒã€‚å°¤å…¶æ˜¯å¦‚æœäº‹ä»¶å½±å“å¤§åˆ°æŸä¸ªç¨‹åº¦ï¼Œæ¯”å¦‚æŸå¤±äº†10%çš„ç”¨æˆ·æˆ–è€…å¥½å‡ ç™¾ä¸‡ï¼Œè‚¯å®šæ˜¯éœ€è¦æœ‰äººå—åˆ°æƒ©ç½šçš„ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577028293,"ip_address":"","comment_id":163786,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14461705153","product_id":100041701,"comment_content":"æˆ‘è§‰å¾—ä¸åº”è¯¥å»è®¨è®ºèƒŒé”…è¿™ä¸ªé—®é¢˜ï¼Œé—®é¢˜æ ¸å¿ƒåœ¨äºæ€ä¹ˆè§£å†³ï¼Œä»¥åŠå„ç«¯æ˜ç¡®æœªæ¥çš„é˜²èŒƒæªæ–½ï¼Œä¸‹æ¬¡å†çŠ¯ï¼Œå†æ¥å®šä½é”…çš„é—®é¢˜","like_count":3,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478534,"discussion_content":"è´£ä»»è‚¯å®šæ˜¯å„æ–¹éƒ½æœ‰çš„ã€‚ä½†é”…ä¹Ÿå¾—æœ‰äººèƒŒã€‚å°¤å…¶æ˜¯å¦‚æœäº‹ä»¶å½±å“å¤§åˆ°æŸä¸ªç¨‹åº¦ï¼Œæ¯”å¦‚æŸå¤±äº†10%çš„ç”¨æˆ·æˆ–è€…å¥½å‡ ç™¾ä¸‡ï¼Œè‚¯å®šæ˜¯éœ€è¦æœ‰äººå—åˆ°æƒ©ç½šçš„ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577028293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115057,"avatar":"https://static001.geekbang.org/account/avatar/00/11/03/b1/7c49c67e.jpg","nickname":"ç‰§äº‘å°å¸…","note":"","ucode":"00982EAE287BDA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328514,"discussion_content":"å®‰å…¨èƒŒé”…â€¦ä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆçŸ¥é“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606175902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193906,"user_name":"tardc","can_delete":false,"product_type":"c1","uid":1074057,"ip_address":"","ucode":"71142F0FD5B171","user_header":"https://static001.geekbang.org/account/avatar/00/10/63/89/f7d841c1.jpg","comment_is_top":false,"comment_ctime":1584978894,"is_pvip":false,"replies":[{"id":"73937","content":"å¦‚æœæ˜¯ç”¨æˆ·ç‚¹å‡»äº†é‚£æ¡å¾®åšçš„é“¾æ¥æ‰â€è¢«å‘å¾®åšâ€œã€‚å¦‚æœé“¾æ¥æ˜¯å‘åšæ¥å£ï¼Œé‚£å°±æ˜¯CSRFï¼›å¦‚æœé“¾æ¥æ˜¯å…¶ä»–å¦å¤–ä¸€ä¸ªé¡µé¢ï¼Œé‚£é€šå¸¸æ˜¯åå°„å‹XSSã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1585030994,"ip_address":"","comment_id":193906,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10174913486","product_id":100041701,"comment_content":"å¦‚æœæ˜¯ç”¨æˆ·æµè§ˆäº†é‚£æ¡å¾®åšå°±â€è¢«å‘å¾®åšâ€œåº”è¯¥ç®—æŒä¹…æ€§XSSï¼›å¦‚æœæ˜¯ç”¨æˆ·ç‚¹å‡»äº†é‚£æ¡å¾®åšçš„é“¾æ¥æ‰â€è¢«å‘å¾®åšâ€œåº”è¯¥ç®—CSRFã€‚<br>å‘ç”Ÿè¿™ç§äº‹æƒ…åº”è¯¥å¤§å®¶ä¸€èµ·å¤„ç†æ‰å¥½ï¼Œä¹Ÿæ²¡é”…å¯ç”©ï¼šå¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œæ²¡æœ‰å®‰å…¨çŸ¥è¯†ä¸ç®—æ˜¯ä¸€ä¸ªåˆæ ¼çš„å¼€å‘è€…ï¼›å¯¹äºå®‰å…¨äººå‘˜æ¥è¯´ï¼Œæœªå¯¹å¼€å‘äººå‘˜åšå¥½å®‰å…¨çŸ¥è¯†åŸ¹è®­æˆ–ä¸šåŠ¡å®‰å…¨è´Ÿè´£æ²¡åšè¶³ã€‚å¤§å®¶éƒ½æœ‰è´£ä»»ï¼Œä¸€èµ·å¤„ç†é—®é¢˜æ‰å¯¹ã€‚","like_count":2,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488697,"discussion_content":"å¦‚æœæ˜¯ç”¨æˆ·ç‚¹å‡»äº†é‚£æ¡å¾®åšçš„é“¾æ¥æ‰â€è¢«å‘å¾®åšâ€œã€‚å¦‚æœé“¾æ¥æ˜¯å‘åšæ¥å£ï¼Œé‚£å°±æ˜¯CSRFï¼›å¦‚æœé“¾æ¥æ˜¯å…¶ä»–å¦å¤–ä¸€ä¸ªé¡µé¢ï¼Œé‚£é€šå¸¸æ˜¯åå°„å‹XSSã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585030994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165292,"user_name":"LEON","can_delete":false,"product_type":"c1","uid":1109922,"ip_address":"","ucode":"58F7AF5302FCAD","user_header":"https://static001.geekbang.org/account/avatar/00/10/ef/a2/6ea5bb9e.jpg","comment_is_top":false,"comment_ctime":1577194835,"is_pvip":true,"replies":[{"id":"63023","content":"å­˜å‚¨å‹ç‰¹ç‚¹æ¯”è¾ƒæ˜ç¡®ï¼Œå°±æ˜¯æ”»å‡»è„šæœ¬ä¼šå­˜å‚¨åˆ°æœåŠ¡å™¨çš„æ•°æ®åº“ä¸­ã€‚DOMå’Œåå°„å‹å…¶å®æ¯”è¾ƒç±»ä¼¼ï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯é’ˆå¯¹åç«¯é€»è¾‘ï¼Œä¸€ä¸ªæ˜¯é’ˆå¯¹JSçš„å‰ç«¯é€»è¾‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577230065,"ip_address":"","comment_id":165292,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10167129427","product_id":100041701,"comment_content":"è€å¸ˆè¯·æ•™ä¸‹ï¼Œå­˜å‚¨å‹XSSä¹Ÿèƒ½ä¿®æ”¹DOMè¿›è¡ŒXSSæ”»å‡»å§ï¼Ÿè¿™ç§æ–¹æ³•å’Œä¼ ç»Ÿçš„DOM XSSæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæ„Ÿè°¢","like_count":2,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479109,"discussion_content":"å­˜å‚¨å‹ç‰¹ç‚¹æ¯”è¾ƒæ˜ç¡®ï¼Œå°±æ˜¯æ”»å‡»è„šæœ¬ä¼šå­˜å‚¨åˆ°æœåŠ¡å™¨çš„æ•°æ®åº“ä¸­ã€‚DOMå’Œåå°„å‹å…¶å®æ¯”è¾ƒç±»ä¼¼ï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯é’ˆå¯¹åç«¯é€»è¾‘ï¼Œä¸€ä¸ªæ˜¯é’ˆå¯¹JSçš„å‰ç«¯é€»è¾‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577230065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1109922,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ef/a2/6ea5bb9e.jpg","nickname":"LEON","note":"","ucode":"58F7AF5302FCAD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100404,"discussion_content":"è€å¸ˆæ„Ÿè°¢æ‚¨çš„æ¢å¤ï¼ŒDOMæ˜¯é’ˆå¯¹åç«¯é€»è¾‘æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿèƒ½å…·ä½“ç‚¹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577257406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1685457,"avatar":"https://static001.geekbang.org/account/avatar/00/19/b7/d1/94a0220b.jpg","nickname":"1.1","note":"","ucode":"955730BDF9E13B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1109922,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ef/a2/6ea5bb9e.jpg","nickname":"LEON","note":"","ucode":"58F7AF5302FCAD","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":291143,"discussion_content":"è€å¸ˆè¯´çš„ DOM --> å‰ç«¯ï¼Œåå°„å‹æ˜¯æŒ‡åç«¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594718224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":100404,"ip_address":""},"score":291143,"extra":""}]}]},{"had_liked":false,"id":164059,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1576852202,"is_pvip":false,"replies":[{"id":"62515","content":"ä¹Ÿè®¸æ˜¯ï¼Œä¸è¿‡æœ€ç»ˆçš„å®‰å…¨æ€§ï¼Œè¿˜æ˜¯å¾—çœ‹å…·ä½“çš„åœºæ™¯ã€‚æ¯”å¦‚ï¼Œä¸‡ä¸€æ›¿æ¢äº†è¿‡åï¼Œè¿˜åŠ äº†ä¸ªstripå‘¢ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577028607,"ip_address":"","comment_id":164059,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10166786794","product_id":100041701,"comment_content":"å­—ç¬¦ä¸²æ›¿æ¢çš„é‚£ä¸ªï¼Œå¦‚æœä¸æ˜¯æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯æ›¿æ¢æˆä¸€ä¸ªç©ºæ ¼ï¼Œé‚£æ˜¯ä¸æ˜¯å°±å®‰å…¨äº†å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478628,"discussion_content":"ä¹Ÿè®¸æ˜¯ï¼Œä¸è¿‡æœ€ç»ˆçš„å®‰å…¨æ€§ï¼Œè¿˜æ˜¯å¾—çœ‹å…·ä½“çš„åœºæ™¯ã€‚æ¯”å¦‚ï¼Œä¸‡ä¸€æ›¿æ¢äº†è¿‡åï¼Œè¿˜åŠ äº†ä¸ªstripå‘¢ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577028607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163923,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1576828715,"is_pvip":false,"replies":[{"id":"62510","content":"ä¸ç®—å­˜å‚¨å‹XSSï¼Œå› ä¸ºä¼ æ’­æ˜¯å› ä¸ºå¾®åšçš„å†…å®¹æ˜¯ä¸€ä¸ªåå°„å‹XSSé“¾æ¥ã€‚è€Œè¿™ä¸ªå†…å®¹æœ¬èº«å®é™…ä¸ä¼šæ‰§è¡Œè„šæœ¬ï¼Œéœ€è¦ç”¨æˆ·ç‚¹å‡»æ‰èƒ½å‘èµ·XSSã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577028043,"ip_address":"","comment_id":163923,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10166763307","product_id":100041701,"comment_content":"ä¸è¦ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥ã€‚é‚£ä¹ˆå‰ç«¯è¦å¤„ç†è‡ªç”¨æˆ·çš„è¾“å…¥ä¹ˆï¼Ÿè¦ã€‚åç«¯è¦å¤„ç†ç”¨æˆ·çš„è¾“å…¥ä¹ˆï¼Ÿä¹Ÿè¦ã€‚æ²¡æœ‰æ­£ç¡®å¤„ç†ï¼Œå°±æœ‰è´£ä»»ã€‚<br><br>å¾®åšçš„ä¾‹å­æ˜¯ä¸æ˜¯å­˜å‚¨è¡ŒXSSæ”»å‡»å‘¢ï¼ŸAç”¨æˆ·å‘é€çš„å¾®åšä¸­è¢«åµŒå…¥äº†æ¶æ„è„šæœ¬ï¼Œå¦å¤–ä¸€ä¸ªç”¨æˆ·Bæµè§ˆæ­¤å†…å®¹çš„æ—¶å€™ï¼Œå› ä¸ºå·²ç»ç™»é™†äº†ï¼Œå¯ä»¥ç›´æ¥ç”¨è‡ªå·±çš„èº«ä»½ï¼ˆTokenæˆ–cookesï¼‰ç›´æ¥å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸Š","like_count":2,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478583,"discussion_content":"ä¸ç®—å­˜å‚¨å‹XSSï¼Œå› ä¸ºä¼ æ’­æ˜¯å› ä¸ºå¾®åšçš„å†…å®¹æ˜¯ä¸€ä¸ªåå°„å‹XSSé“¾æ¥ã€‚è€Œè¿™ä¸ªå†…å®¹æœ¬èº«å®é™…ä¸ä¼šæ‰§è¡Œè„šæœ¬ï¼Œéœ€è¦ç”¨æˆ·ç‚¹å‡»æ‰èƒ½å‘èµ·XSSã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577028043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":183738,"user_name":"ã€€ã€€ã€€ã€€ã€€ã€€ã€€é¸Ÿäººî”¡","can_delete":false,"product_type":"c1","uid":1035165,"ip_address":"","ucode":"E504B22F336035","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/9d/2bc85843.jpg","comment_is_top":false,"comment_ctime":1583122794,"is_pvip":false,"replies":[{"id":"71172","content":"ä¹Ÿè®¸å§ï¼Œéšç€CSPè¶Šæ¥è¶Šæ™®éï¼ŒXSSç¡®å®è¶Šæ¥è¶Šéš¾äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1583151070,"ip_address":"","comment_id":183738,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5878090090","product_id":100041701,"comment_content":"ç°åœ¨å¾ˆå¤šæµè§ˆå™¨éƒ½å¼€å§‹å¤§é‡è¿‡æ»¤xss  é‚£ä¹ˆxssä¼šä¸ä¼šæ­»äº¡å‘¢","like_count":1,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485765,"discussion_content":"ä¹Ÿè®¸å§ï¼Œéšç€CSPè¶Šæ¥è¶Šæ™®éï¼ŒXSSç¡®å®è¶Šæ¥è¶Šéš¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583151070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165180,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1577176356,"is_pvip":false,"replies":[{"id":"62938","content":"æ”¶åˆ°ï¼Œæ„Ÿè°¢æ‚¨çš„ç•™è¨€ã€‚æˆ‘ä»¬ä¼šç»Ÿä¸€è¯´æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—¶é—´","uid":"1743279","ctime":1577181492,"ip_address":"","comment_id":165180,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5872143652","product_id":100041701,"comment_content":"  é—®é¢˜ä¸­åº”å½“æ˜¯é€šè¿‡æŒä¹…å‹ XSS&#47;å­˜å‚¨å‹XSSè¿›è¡Œæ”»å‡»ï¼Œè§£å†³æ–¹å¼åº”å½“æ˜¯CSPè¿›è¡Œé˜²å¾¡ã€‚<br>  æŒ‡å‡ºæ–‡ç« ä¸­è€å¸ˆåŒä¸€ä¸ªæ¦‚å¿µç”¨äº†ä¸ä¸€è‡´ä¸åŒåç§°çš„å°é—®é¢˜ï¼Œå¯¹äºè€æ‰‹æ²¡å½±å“ï¼Œå¯èƒ½å¯¹äºæ–°æ‰‹å´ä¼šé€ æˆç†è§£ä¸Šçš„è¯¯åŒºã€‚åœ¨å¼€å§‹éƒ¨åˆ†è€å¸ˆç”¨äº†â€œä¸‰ç§ XSS æ”»å‡»ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼šåå°„å‹ XSSã€åŸºäº DOM çš„ XSS ä»¥åŠæŒä¹…å‹ XSSã€‚â€ï¼Œæ€»ç»“éƒ¨åˆ†å´ç”¨äº†&quot;æ ¹æ®æ”»å‡»æ–¹å¼çš„ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºï¼šåå°„å‹ XSSã€åŸºäº DOM çš„ XSS å’Œå­˜å‚¨å‹ XSSã€‚&quot;ï¼Œåç§°ä¸ä¸€è‡´ã€‚<br>     æ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ï¼šå­¦ä¹ ä¸­è¿˜æ˜¯æ‰«é™¤äº†ä¸å°‘è¯¯åŒºï¼Œæå‡äº†è‡ªå·±å¯¹äºå®‰å…¨æ–¹é¢çš„ç†è§£ï¼›è°¢è°¢ã€‚","like_count":1,"discussions":[{"author":{"id":1743279,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/99/af/e4cc7374.jpg","nickname":"å•Šå‘œ","note":"","ucode":"76E24AB808868D","race_medal":0,"user_type":4,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479061,"discussion_content":"æ”¶åˆ°ï¼Œæ„Ÿè°¢æ‚¨çš„ç•™è¨€ã€‚æˆ‘ä»¬ä¼šç»Ÿä¸€è¯´æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577181492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165121,"user_name":"ZeroIce","can_delete":false,"product_type":"c1","uid":1305369,"ip_address":"","ucode":"30133BA83CE349","user_header":"https://static001.geekbang.org/account/avatar/00/13/eb/19/0d990b03.jpg","comment_is_top":false,"comment_ctime":1577166134,"is_pvip":false,"replies":[{"id":"63251","content":"æˆ‘è®°å¾—jwtæ˜¯éœ€è¦å®¢æˆ·ç«¯è‡ªå·±å¸¦ä¸Šå»çš„ï¼Ÿå¦‚æœä¸æ˜¯æµè§ˆå™¨è‡ªåŠ¨å¸¦ä¸Šå»çš„è¯ï¼Œå°±æ— æ³•å‘èµ·csrfæ”»å‡»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577346113,"ip_address":"","comment_id":165121,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5872133430","product_id":100041701,"comment_content":"ç°åœ¨å¾ˆå¤šè¯·æ±‚ä¼šå¸¦token å¤´éƒ¨å»è¯·æ±‚ï¼ˆjwtï¼‰ï¼Ÿå•å•ç‚¹å‡»ä¸€æ¡é“¾æ¥ï¼Œåº”è¯¥ä¸å¯ä»¥å‘ä¸€æ¡å¾®åšå§","like_count":1,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479035,"discussion_content":"æˆ‘è®°å¾—jwtæ˜¯éœ€è¦å®¢æˆ·ç«¯è‡ªå·±å¸¦ä¸Šå»çš„ï¼Ÿå¦‚æœä¸æ˜¯æµè§ˆå™¨è‡ªåŠ¨å¸¦ä¸Šå»çš„è¯ï¼Œå°±æ— æ³•å‘èµ·csrfæ”»å‡»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577346113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165111,"user_name":"ZeroIce","can_delete":false,"product_type":"c1","uid":1305369,"ip_address":"","ucode":"30133BA83CE349","user_header":"https://static001.geekbang.org/account/avatar/00/13/eb/19/0d990b03.jpg","comment_is_top":false,"comment_ctime":1577163737,"is_pvip":false,"replies":[{"id":"63252","content":"è®©ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥ï¼Œå°±ç›¸å½“äºè®©ç”¨æˆ·è¾“å…¥äº†é»‘å®¢å®šä¹‰çš„å†…å®¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577346267,"ip_address":"","comment_id":165111,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5872131033","product_id":100041701,"comment_content":"è¿˜æœ‰ä¸ªé—®é¢˜ï¼šé»‘å®¢æ€æ ·å»æ§åˆ¶ç”¨æˆ·çš„è¾“å…¥ï¼Ÿ   æ§åˆ¶ä¸äº†çš„è¯ï¼Œå½“ç„¶ä¹Ÿæ³¨å…¥ä¸äº†è„šæœ¬ä»£ç å‘€ã€‚","like_count":1,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479031,"discussion_content":"è®©ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥ï¼Œå°±ç›¸å½“äºè®©ç”¨æˆ·è¾“å…¥äº†é»‘å®¢å®šä¹‰çš„å†…å®¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577346267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165108,"user_name":"ZeroIce","can_delete":false,"product_type":"c1","uid":1305369,"ip_address":"","ucode":"30133BA83CE349","user_header":"https://static001.geekbang.org/account/avatar/00/13/eb/19/0d990b03.jpg","comment_is_top":false,"comment_ctime":1577163475,"is_pvip":false,"replies":[{"id":"63253","content":"è·³è½¬æ˜¯å¯ä»¥çš„ã€‚ä¸ç„¶æ€ä¹ˆä»ç™¾åº¦æœç´¢è·³è½¬åˆ°å…·ä½“çš„é¡µé¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577346312,"ip_address":"","comment_id":165108,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5872130771","product_id":100041701,"comment_content":"ç”±äºsopçš„å½±å“ï¼Œwindow.locationä¸æ˜¯ä¹Ÿä¸å¯ä»¥è·³è½¬ï¼Ÿæ€ä¹ˆè¿™ä¸ªä¹Ÿä¼šå½±å“cookieæ³„æ¼äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479030,"discussion_content":"è·³è½¬æ˜¯å¯ä»¥çš„ã€‚ä¸ç„¶æ€ä¹ˆä»ç™¾åº¦æœç´¢è·³è½¬åˆ°å…·ä½“çš„é¡µé¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577346312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163784,"user_name":"Cy23","can_delete":false,"product_type":"c1","uid":1591293,"ip_address":"","ucode":"8DC561C5151758","user_header":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","comment_is_top":false,"comment_ctime":1576803074,"is_pvip":false,"replies":[{"id":"62284","content":"åŒå­¦ï¼Œæœªç»æˆæƒå‘èµ·æ”»å‡»æœ‰æ³•å¾‹é£é™©ï¼Œå»ºè®®ä¸è¦å†’é™©ï½","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1576804270,"ip_address":"","comment_id":163784,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5871770370","product_id":100041701,"comment_content":"æˆ‘å¥½åƒå­¦åˆ°ç‚¹æ€ä¹ˆæ”»å‡»åˆ«äººï¼Œä½ ä»¬å‘¢","like_count":1,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478533,"discussion_content":"åŒå­¦ï¼Œæœªç»æˆæƒå‘èµ·æ”»å‡»æœ‰æ³•å¾‹é£é™©ï¼Œå»ºè®®ä¸è¦å†’é™©ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576804270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1591293,"avatar":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","nickname":"Cy23","note":"","ucode":"8DC561C5151758","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":91017,"discussion_content":"å¥½çš„ï¼Œæˆ‘è‡ªå·±æ”»å‡»è‡ªå·±çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576805956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163771,"user_name":"å†¯ç‰é¹","can_delete":false,"product_type":"c1","uid":1442088,"ip_address":"","ucode":"BA4B53F072B82F","user_header":"https://static001.geekbang.org/account/avatar/00/16/01/28/134da154.jpg","comment_is_top":false,"comment_ctime":1576801695,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5871768991","product_id":100041701,"comment_content":"å…³äºé—®é¢˜ï¼Œåˆ°åº•åº”è¯¥è°èƒŒé”…ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªç³»ç»Ÿæ¶æ„å±‚é¢çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯å•çº¯çš„å‰åç«¯ï¼Œå¦‚æœä¸€å®šè¦å®šä½åˆ°å‰åç«¯æˆ‘è®¤ä¸ºåº”è¯¥æ˜¯éƒ½æœ‰é—®é¢˜ã€‚","like_count":1},{"had_liked":false,"id":354086,"user_name":"Sudouble","can_delete":false,"product_type":"c1","uid":1365574,"ip_address":"åŒ—äº¬","ucode":"B369B09DAF8D20","user_header":"https://static001.geekbang.org/account/avatar/00/14/d6/46/5eb5261b.jpg","comment_is_top":false,"comment_ctime":1660091696,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1660091696","product_id":100041701,"comment_content":"æŒä¹…å‹XSSï¼Œéœ€è¦åœ¨è¾“å‡ºæ—¶è¿›è¡ŒéªŒè¯å’Œç¼–ç ï¼Œé¿å…é€ æˆå®‰å…¨é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":346818,"user_name":"èŒƒç‰¹è¥¿","can_delete":false,"product_type":"c1","uid":2709222,"ip_address":"","ucode":"4BE8E24F80B736","user_header":"https://static001.geekbang.org/account/avatar/00/29/56/e6/c5c80c3e.jpg","comment_is_top":false,"comment_ctime":1653458025,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653458025","product_id":100041701,"comment_content":"è€å¸ˆæ‚¨å¥½ã€‚ä½ åˆšæ‰æåˆ°ç°åœ¨åŸºæœ¬éƒ½é‡‡ç”¨çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œxssè¶Šæ¥è¶Šå°‘äº†æ˜¯å› ä¸ºä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯åªè¦ä¸æŠŠç”¨æˆ·çš„å½•å…¥ç›´æ¥è¾“å‡ºåˆ°htmlç½‘é¡µä¸Šå°±ä¸å­˜åœ¨xssæ”»å‡»","like_count":0},{"had_liked":false,"id":302332,"user_name":"Roway","can_delete":false,"product_type":"c1","uid":1060967,"ip_address":"","ucode":"65AF589142AB6C","user_header":"https://static001.geekbang.org/account/avatar/00/10/30/67/a1e9aaba.jpg","comment_is_top":false,"comment_ctime":1626168367,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1626168367","product_id":100041701,"comment_content":"å‰ç«¯ä¹Ÿå¥½ã€åç«¯ä¹Ÿå¥½ï¼Œå¼€å‘äººå‘˜éƒ½ä¸è®¤ä¸ºæ˜¯è‡ªå·±çš„é—®é¢˜ã€‚é‚£ä¹ˆï¼Œä½ è®¤ä¸ºå‡ºç°è¿™ç§å®‰å…¨äº‹ä»¶ï¼Œåº”è¯¥ç”±è°æ¥â€œèƒŒé”…â€å‘¢ï¼Ÿæ˜¯å¼€å‘ã€è¿ç»´è¿˜æ˜¯å®‰å…¨è´Ÿè´£äººå‘¢ï¼Ÿ  å®‰å…¨äº‹æƒ…å„ä¸ªç¯èŠ‚éƒ½éœ€è¦è­¦æƒ•èµ·æ¥ï¼Œéœ€è¦ä»å…¬å¸å±‚é¢é«˜åº¦é‡è§†å®‰å…¨è§„èŒƒåˆ¶åº¦ã€‚è¯´ç›´ç™½ç‚¹ï¼Œå‡ºäº†å®‰å…¨äº‹æ•…æŸå¤±ä¹Ÿæ˜¯å¤§å®¶çš„æŸå¤±","like_count":0},{"had_liked":false,"id":272018,"user_name":"LIKE","can_delete":false,"product_type":"c1","uid":1254252,"ip_address":"","ucode":"9DAB7F9051648A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","comment_is_top":false,"comment_ctime":1609912666,"is_pvip":false,"replies":[{"id":"99770","content":"æœ¬è´¨é—®é¢˜æ˜¯å‰ç«¯è§£ææœ‰æ¼æ´ï¼Œæ‰€ä»¥æ”¹å‰ç«¯ä¸ºä¸»ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åŒæ—¶é…åˆæŠŠå­˜å‚¨è¿‡æ»¤åŠ ä¸Šï¼ŒåŒé‡é˜²æŠ¤ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1611283635,"ip_address":"","comment_id":272018,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1609912666","product_id":100041701,"comment_content":"è€å¸ˆå¥½ï¼Œé’ˆå¯¹ç³»ç»Ÿå†…å·²å­˜åœ¨çš„å­˜å‚¨å‹xssæ¼æ´è¦å¦‚ä½•ä¿®å¤ï¼Ÿæ˜¯éœ€è¦å‰ç«¯ä¿®æ”¹é¡µé¢è§£ææ¼æ´ï¼Ÿåç«¯ä¿®æ”¹æ•°æ®å­˜å‚¨é€»è¾‘å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513120,"discussion_content":"æœ¬è´¨é—®é¢˜æ˜¯å‰ç«¯è§£ææœ‰æ¼æ´ï¼Œæ‰€ä»¥æ”¹å‰ç«¯ä¸ºä¸»ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åŒæ—¶é…åˆæŠŠå­˜å‚¨è¿‡æ»¤åŠ ä¸Šï¼ŒåŒé‡é˜²æŠ¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611283635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1254252,"avatar":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","nickname":"LIKE","note":"","ucode":"9DAB7F9051648A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345915,"discussion_content":"å­˜åœ¨æ¼æ´çš„åœ°æ–¹ä¸»è¦æ˜¯å¯Œæ–‡æœ¬ï¼Œå‰ç«¯è¯´æ˜¯å°±å°†å†…å®¹åš HTML æ¸²æŸ“ã€‚æŠŠä»»åŠ¡ç»™åˆ°åç«¯å¤„ç†äº†â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611813746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259298,"user_name":"æ™®ç½—ç±³ä¿®æ–¯","can_delete":false,"product_type":"c1","uid":1394030,"ip_address":"","ucode":"DDA7DE4DE371FC","user_header":"https://static001.geekbang.org/account/avatar/00/15/45/6e/11cf22de.jpg","comment_is_top":false,"comment_ctime":1604675148,"is_pvip":false,"replies":[{"id":"99775","content":"Cspå°±å±äºåœ¨nginxå±‚çš„ä¸€ç§é˜²æŠ¤æ‰‹æ®µäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1611284351,"ip_address":"","comment_id":259298,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1604675148","product_id":100041701,"comment_content":"è€å¸ˆï¼Œæ‚¨è¿™ä¸ªçªƒå–cookieçš„xssæ”»å‡»å±äºæ°¸ä¹…å­˜å‚¨å‹çš„xssæ”»å‡»å—ï¼Œæœ‰æ²¡æœ‰ä¸€äº›åœ¨nginxé˜²æŠ¤çš„æªæ–½ï¼Ÿç°åœ¨è¿˜æ˜¯æœ‰å¾ˆå¤šå…¬å¸ç”¨è¿™ä¸ªnginxçš„ï¼Œæˆ‘ä»¬å…¬å¸å°±æ˜¯ï¼Œè¿˜é‡åˆ°äº†å„ç§xssæ”»å‡»ï¼Œè„‘é˜”ç–¼","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508897,"discussion_content":"Cspå°±å±äºåœ¨nginxå±‚çš„ä¸€ç§é˜²æŠ¤æ‰‹æ®µäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611284351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":256511,"user_name":"JianXu","can_delete":false,"product_type":"c1","uid":1033219,"ip_address":"","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1603641945,"is_pvip":false,"replies":[{"id":"94882","content":"æ²¡æœ‰åŒæºçš„æ¦‚å¿µï¼Œåå°„æ€§xssç›¸å½“äºä¸€æ¬¡å•é“¾æ¥è®¿é—®ï¼Œä¸æ¶‰åŠè·³è½¬","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1605360672,"ip_address":"","comment_id":256511,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603641945","product_id":100041701,"comment_content":"è€å¸ˆï¼Œå¯¹äºåå°„å‹XSS æ”»å‡»ï¼Œæ˜¯ä¸æ˜¯åªèƒ½å»é€šè¿‡è¯±ä½¿å®¢æˆ·ç‚¹å‡»æˆ‘ä»¬å‡†å¤‡çš„é“¾æ¥æ¥å®ç°ï¼Œè€Œä¸”è¯¥é“¾æ¥æ‰€åœ¨çš„domain å¿…é¡»å’ŒåŸæ¥çš„ç³»ç»ŸUX åŒæºï¼Ÿ<br><br>ä¹Ÿå°±æ˜¯è¯´å‡è®¾åŸæ¥æ˜¯http:&#47;&#47;www.abc.com , é‚£ä¹ˆè¯±å¯¼ç”¨æˆ·ç‚¹å‡»çš„é“¾æ¥ä¹Ÿå¿…é¡»æ˜¯ http:&#47;&#47;www.abc.com ?","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508038,"discussion_content":"æ²¡æœ‰åŒæºçš„æ¦‚å¿µï¼Œåå°„æ€§xssç›¸å½“äºä¸€æ¬¡å•é“¾æ¥è®¿é—®ï¼Œä¸æ¶‰åŠè·³è½¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605360672,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235056,"user_name":"LIKE","can_delete":false,"product_type":"c1","uid":1254252,"ip_address":"","ucode":"9DAB7F9051648A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","comment_is_top":false,"comment_ctime":1594880089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594880089","product_id":100041701,"comment_content":"Cooikeç­‰é‡è¦å¤´ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ–°å¢è¿”å›HttpOnlyï¼Œé˜²æ­¢XSSè¯»å–Cookieã€‚","like_count":0},{"had_liked":false,"id":231316,"user_name":"è“é­”ä¸¶","can_delete":false,"product_type":"c1","uid":1219438,"ip_address":"","ucode":"2AE4359E263558","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/6e/edd2da0c.jpg","comment_is_top":false,"comment_ctime":1593651324,"is_pvip":false,"replies":[{"id":"85953","content":"ç»™ç”¨æˆ·å‘ä¸ªé“¾æ¥ï¼Œè¯±å¯¼ç‚¹å‡»å³å¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1594172331,"ip_address":"","comment_id":231316,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593651324","product_id":100041701,"comment_content":"è€å¸ˆï¼Œxssçš„å‰ä¸¤ç§æ”»å‡»æ–¹å¼é»‘å®¢æ˜¯å¦‚ä½•åœ¨ç”¨æˆ·çš„å½“å‰ç½‘é¡µæ¤å…¥å¸¦æœ‰æ¶æ„è„šæœ¬çš„é“¾æ¥çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500255,"discussion_content":"ç»™ç”¨æˆ·å‘ä¸ªé“¾æ¥ï¼Œè¯±å¯¼ç‚¹å‡»å³å¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594172331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223415,"user_name":"Roway","can_delete":false,"product_type":"c1","uid":1060967,"ip_address":"","ucode":"65AF589142AB6C","user_header":"https://static001.geekbang.org/account/avatar/00/10/30/67/a1e9aaba.jpg","comment_is_top":false,"comment_ctime":1591085812,"is_pvip":true,"replies":[{"id":"82496","content":"æ¯”å¦‚ä¸€ä¸ªè¾“å…¥æ¡†åªæ¥æ”¶æ•°å­—ï¼Œé‚£ä½ åœ¨æ¥å—åˆ°è¾“å…¥åç«‹å³æ‰§è¡ŒInterger.parseIntï¼ŒåŸºæœ¬æ‰€æœ‰çš„æ”»å‡»è„šæœ¬éƒ½ä¼šè¢«è¿‡æ»¤æ‰ã€‚å…¶ä»–ç±»ä¼¼çš„è¿˜æœ‰é€‰é¡¹ç±»çš„è¾“å…¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1591260224,"ip_address":"","comment_id":223415,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1591085812","product_id":100041701,"comment_content":"è¯·é—®è€å¸ˆï¼Œç™½åå•çš„è§„åˆ™ä¸å¤ªæ˜ç™½ï¼Œæ•°å­—æ¡†å¥½ç†è§£ï¼Œæ¯”å¦‚ä¸€ä¸ªè¾“å…¥æ¡†æ€ä¹ˆå»ä½¿ç”¨ç™½åå•?","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497124,"discussion_content":"æ¯”å¦‚ä¸€ä¸ªè¾“å…¥æ¡†åªæ¥æ”¶æ•°å­—ï¼Œé‚£ä½ åœ¨æ¥å—åˆ°è¾“å…¥åç«‹å³æ‰§è¡ŒInterger.parseIntï¼ŒåŸºæœ¬æ‰€æœ‰çš„æ”»å‡»è„šæœ¬éƒ½ä¼šè¢«è¿‡æ»¤æ‰ã€‚å…¶ä»–ç±»ä¼¼çš„è¿˜æœ‰é€‰é¡¹ç±»çš„è¾“å…¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591260224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1439241,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f6/09/89ac4fc1.jpg","nickname":"æå¤å½ª","note":"","ucode":"10D6BF57E608AF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359154,"discussion_content":"ä½¿ç”¨æ­£åˆ™æ ¡éªŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616123375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1060967,"avatar":"https://static001.geekbang.org/account/avatar/00/10/30/67/a1e9aaba.jpg","nickname":"Roway","note":"","ucode":"65AF589142AB6C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280735,"discussion_content":"æ•°å­—ç±»çš„å¥½æ§åˆ¶ï¼Œæ–‡æœ¬ç±»çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591607372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219308,"user_name":"LIKE","can_delete":false,"product_type":"c1","uid":1254252,"ip_address":"","ucode":"9DAB7F9051648A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","comment_is_top":false,"comment_ctime":1589987309,"is_pvip":false,"replies":[{"id":"81099","content":"å„ç§ç¼–ç å°±æ˜¯ä¸ºäº†å®ç°è¿™ä¸ªæ•ˆæœï¼šé¿å…è¾“å…¥çš„å…³é”®è¯å’Œè¯­æ³•å…³é”®è¯æ··æ·†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1590060440,"ip_address":"","comment_id":219308,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589987309","product_id":100041701,"comment_content":"é’ˆå¯¹è¾“å…¥æ¡†çš„ï¼Œæœ‰ä»€ä¹ˆæŠ€æœ¯å¯ä»¥ä½¿å¾—ç”¨æˆ·è¾“å…¥ä»€ä¹ˆå°±å±•ç¤ºä»€ä¹ˆå—ï¼Ÿ<br>è¿™æ ·æ˜¯ä¸æ˜¯å°±å¯ä»¥é¿å…ä¸€éƒ¨åˆ†çš„xssæ”»å‡»ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495758,"discussion_content":"å„ç§ç¼–ç å°±æ˜¯ä¸ºäº†å®ç°è¿™ä¸ªæ•ˆæœï¼šé¿å…è¾“å…¥çš„å…³é”®è¯å’Œè¯­æ³•å…³é”®è¯æ··æ·†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590060440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199173,"user_name":"COOK","can_delete":false,"product_type":"c1","uid":1233016,"ip_address":"","ucode":"0F1C0E7CA4F36B","user_header":"https://static001.geekbang.org/account/avatar/00/12/d0/78/a11a999d.jpg","comment_is_top":false,"comment_ctime":1585481406,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585481406","product_id":100041701,"comment_content":"é¢„é˜²xssè¦å¯¹è¾“å…¥å†…å®¹è¿‡æ»¤ï¼Œåœ¨å±•ç°é˜¶æ®µè¿‡æ»¤","like_count":0},{"had_liked":false,"id":198866,"user_name":"ä¸ä¸œ","can_delete":false,"product_type":"c1","uid":1940553,"ip_address":"","ucode":"967FADB9EABFA8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9c/49/e5c18d86.jpg","comment_is_top":false,"comment_ctime":1585470779,"is_pvip":false,"replies":[{"id":"74980","content":"å¾®åšä¿¡æ¯æ³„æ¼çš„æ ¹æœ¬åŸå› åº”è¯¥æ˜¯æŸä¸ªæ¥å£é—´æ¥æ³„æ¼äº†ç”¨æˆ·çš„æ‰‹æœºå·ï¼Œä½†æ˜¯æ²¡æœ‰å®æ–½è¾ƒä¸¥æ ¼çš„è®¤è¯å’Œæˆæƒæªæ–½ã€‚èƒ½å¤Ÿé‡‡å–çš„è¡ŒåŠ¨åŒ…æ‹¬ï¼Œå¯¹æ•æ„Ÿæ¥å£ä½œç›˜ç‚¹ï¼Œå¯¹æ¥å£ä½œå¼ºè®¤è¯ï¼Œå¯¹æ¥å£ä½œé¢‘æ¬¡é™åˆ¶ç­‰ç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1585574732,"ip_address":"","comment_id":198866,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585470779","product_id":100041701,"comment_content":"è€å¸ˆï¼Œå¬è¯´æœ€è¿‘å¾®åšç”¨æˆ·ä¿¡æ¯æ³„éœ²ï¼Œèƒ½ä½œä¸ºä¸ªæ¡ˆä¾‹ç»™è®²è®²æœ‰ä»€ä¹ˆæ•™è®­å’Œç»éªŒï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489757,"discussion_content":"å¾®åšä¿¡æ¯æ³„æ¼çš„æ ¹æœ¬åŸå› åº”è¯¥æ˜¯æŸä¸ªæ¥å£é—´æ¥æ³„æ¼äº†ç”¨æˆ·çš„æ‰‹æœºå·ï¼Œä½†æ˜¯æ²¡æœ‰å®æ–½è¾ƒä¸¥æ ¼çš„è®¤è¯å’Œæˆæƒæªæ–½ã€‚èƒ½å¤Ÿé‡‡å–çš„è¡ŒåŠ¨åŒ…æ‹¬ï¼Œå¯¹æ•æ„Ÿæ¥å£ä½œç›˜ç‚¹ï¼Œå¯¹æ¥å£ä½œå¼ºè®¤è¯ï¼Œå¯¹æ¥å£ä½œé¢‘æ¬¡é™åˆ¶ç­‰ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585574732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188832,"user_name":"å®˜","can_delete":false,"product_type":"c1","uid":1696727,"ip_address":"","ucode":"E3FF6D04B9846B","user_header":"https://static001.geekbang.org/account/avatar/00/19/e3/d7/d7b3505f.jpg","comment_is_top":false,"comment_ctime":1584423405,"is_pvip":false,"replies":[{"id":"72919","content":"é å®‰å…¨æ„è¯†è‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œå“ªæ€•åªæœ‰ä¸‡ä¸€çš„ç–å¿½ï¼Œå¯¹é»‘å®¢æ¥è¯´ï¼Œä¹Ÿæ˜¯æœ‰åˆ©å¯å›¾çš„ã€‚æ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯å¾—ä»åº”ç”¨è‡ªèº«æ¥è¿›è¡Œå¼ºåŒ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1584452419,"ip_address":"","comment_id":188832,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584423405","product_id":100041701,"comment_content":"åå°„å‹XSSï¼Œè¿™ä¸ªè‡ªå·±ä¸­æ‹›è¿‡ï¼Œå½“æ—¶å¤ªå¿™äº†æ²¡æœ‰æ€è€ƒéšæ‰‹ç‚¹å‡»é“¾æ¥è§£é”äº†ä¸¢äº†çš„è‹¹æœæ‰‹æœºçš„éªŒè¯ç ï¼Œè€Œä¹‹å‰è‹¹æœå®¢æœæ‰“æ¥ç”µè¯åå¤æé†’ä¸è¦æ‰“å¼€é™Œç”ŸçŸ­ä¿¡ï¼Œä½†æ˜¯å¿™åˆ°ä¸å¯å¼€äº¤çš„æ—¶å€™å¦‚æœæ­£å·§é»‘å®¢æŠ“ä½æœºä¼šå‘æ¥çŸ­ä¿¡ï¼Œé‚£ä¹ˆç¡®å®å¯èƒ½ä¼šä¸­æ‹›ã€‚åæ¥åæ€äº†å¾ˆä¹…ï¼Œé¦–å…ˆä»ç”¨æˆ·è§’åº¦æ¥è®²å› ä¸ºç”¨æˆ·çš„æƒ…å†µäº”èŠ±å…«é—¨ï¼Œå°±ç®—å¹³å¸¸æœ‰å®‰å…¨æ„è¯†ä¹Ÿä¼šå‡ºç°ç–å¿½çš„æ—¶å€™ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—åªä»ç”¨æˆ·è§’åº¦åŠ å¼ºå®‰å…¨æ„è¯†æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜æ˜¯éœ€è¦ä»æœåŠ¡ç«¯é¢„é˜²ã€‚<br>è‡³äºè¯´å¼€å¤´çš„é—®é¢˜ï¼Œæˆ‘è®¤ä¸ºå®‰å…¨è´Ÿè´£äººé¦–å…ˆæ²¡æœ‰æ„è¯†åˆ°æ¼æ´çš„å­˜åœ¨ï¼Œå¦‚æœå®‰å…¨è´Ÿè´£äººè®¤è¯†åˆ°è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆä»–ä¼šè”ç³»å‰åç«¯å¼€å‘äººå‘˜ï¼Œè®©ä»–ä»¬é‡‡å–å¿…è¦çš„æªæ–½ï¼Œæ¯”å¦‚å¼•å…¥CSPæ¥é˜²æŠ¤XSSï¼Œè¿™æ ·èƒ½å¤Ÿä¸€å®šç¨‹åº¦ä¸Šä»æºå¤´ä¸Šé¿å…XSSæ”»å‡»ã€‚","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487543,"discussion_content":"é å®‰å…¨æ„è¯†è‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œå“ªæ€•åªæœ‰ä¸‡ä¸€çš„ç–å¿½ï¼Œå¯¹é»‘å®¢æ¥è¯´ï¼Œä¹Ÿæ˜¯æœ‰åˆ©å¯å›¾çš„ã€‚æ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯å¾—ä»åº”ç”¨è‡ªèº«æ¥è¿›è¡Œå¼ºåŒ–ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584452419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182786,"user_name":"Geek_2c2d0e_saga","can_delete":false,"product_type":"c1","uid":1888242,"ip_address":"","ucode":"6C977BC2A8779B","user_header":"","comment_is_top":false,"comment_ctime":1582865979,"is_pvip":false,"replies":[{"id":"70750","content":"åŸå› æ¯”è¾ƒå¤šï¼Œå»ºè®®è”ç³»å®¢æœæˆ–è€…å¾®åšå®‰å…¨ä¸­å¿ƒè§£å†³ï½","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1582908487,"ip_address":"","comment_id":182786,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582865979","product_id":100041701,"comment_content":"æˆ‘çš„å¾®åšè´¦å·å°±é‡åˆ°è¿‡è¢«å¤§æ‰¹é‡å‘å¹¿å‘Š","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485450,"discussion_content":"åŸå› æ¯”è¾ƒå¤šï¼Œå»ºè®®è”ç³»å®¢æœæˆ–è€…å¾®åšå®‰å…¨ä¸­å¿ƒè§£å†³ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582908487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170366,"user_name":"ç‹å‡¯","can_delete":false,"product_type":"c1","uid":1306753,"ip_address":"","ucode":"4F91D6F85B45D1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f0/81/8d539cba.jpg","comment_is_top":false,"comment_ctime":1578580520,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1578580520","product_id":100041701,"comment_content":"æ˜¾ç„¶åç«¯èƒŒé”…å‘€","like_count":0,"discussions":[{"author":{"id":1254252,"avatar":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","nickname":"LIKE","note":"","ucode":"9DAB7F9051648A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270259,"discussion_content":"æ²¡æœ‰æµ‹è¯•çš„é”…ä¸æ˜¯å¥½é”…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589987177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167418,"user_name":"å°è€é¼ ","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1577788338,"is_pvip":false,"replies":[{"id":"65083","content":"æœ‰ç”¨ã€‚ä¸è¿‡ESAPIåªæ˜¯æä¾›äº†ç¼–ç ã€éªŒè¯ç­‰æ–¹æ³•ï¼Œè¿˜æ˜¯éœ€è¦ä½ ä¸»åŠ¨çš„å»ä½¿ç”¨è¿™äº›æ–¹æ³•æ‰èƒ½èµ·ä½œç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577930173,"ip_address":"","comment_id":167418,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577788338","product_id":100041701,"comment_content":"åå°„XSSä¹Ÿå¯ä»¥ä¸ç‚¹å‡»è§¦å‘ï¼Œæ¯”å¦‚ï¼š&lt;img src=# onerror=...&gt;ã€‚ESAPIå¯¹é˜²å¾¡XSSä½œç”¨å¤§å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479855,"discussion_content":"æœ‰ç”¨ã€‚ä¸è¿‡ESAPIåªæ˜¯æä¾›äº†ç¼–ç ã€éªŒè¯ç­‰æ–¹æ³•ï¼Œè¿˜æ˜¯éœ€è¦ä½ ä¸»åŠ¨çš„å»ä½¿ç”¨è¿™äº›æ–¹æ³•æ‰èƒ½èµ·ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577930173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167338,"user_name":"å¾‹é£›","can_delete":false,"product_type":"c1","uid":1462608,"ip_address":"","ucode":"65394E437AD2DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/51/50/f5f2a121.jpg","comment_is_top":false,"comment_ctime":1577769649,"is_pvip":false,"replies":[{"id":"64989","content":"1ã€å‚æ•°åŒ–ä¹Ÿæ˜¯ä¸€ç§ç¼–ç å½¢å¼ã€‚å…¶ä»–çš„åƒurlencodeï¼Œä¹Ÿæ˜¯ä¸€ç§ç¼–ç ã€‚<br>2ã€è¿™åº”è¯¥æ˜¯æŸä¸ªAPPåœ¨å‘é€çŸ­ä¿¡å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577800345,"ip_address":"","comment_id":167338,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577769649","product_id":100041701,"comment_content":"é—®é¢˜1ï¼šå“ªç§ç±»å‹çš„XSSæ”»å‡»ï¼Œæ€ä¹ˆé¢„é˜²ï¼Ÿ<br>æ–‡ä¸­æœ‰ä¸€æ®µè¯ï¼šè¿™ä¸ªäº‹æƒ…çš„åŸå‹ï¼Œå…¶å®æ˜¯ 2011 å¹´å¾®åšçœŸå®å‡ºç°çš„ä¸€æ¬¡å®‰å…¨äº‹ä»¶ã€‚æ•´ä¸ªäº‹ä»¶çš„æ ¸å¿ƒé—®é¢˜ï¼Œå…¶å®å‡ºåœ¨è¿™ä¸ªå¯ä»¥ç‚¹å‡»çš„é“¾æ¥ä¸Šã€‚åœ¨è¿™ä¸ªäº‹ä»¶ä¸­ï¼Œé»‘å®¢å¹¶ä¸éœ€è¦å…¥ä¾µåˆ°å¾®åšæœåŠ¡å™¨ä¸­ï¼Œåªè¦ç”¨æˆ·ç‚¹å‡»äº†è¿™ä¸ªé“¾æ¥ï¼Œå°±ä¼šâ€œè¢«å‘é€â€è¿™æ ·çš„åšæ–‡ã€‚<br>æ²¡æœ‰å…¥ä¾µåˆ°æœåŠ¡å™¨ï¼Œå› æ­¤åˆ¤æ–­æ˜¯åå°„å‹XSSæˆ–è€…åŸºäºDOMçš„XSSã€‚<br>é¢„é˜² XSSä¼˜å…ˆé‡‡ç”¨ç¼–ç çš„æ–¹å¼ï¼Œé€šè¿‡å¯¹ç”¨æˆ·å†…å®¹çš„éªŒè¯æ¥å®Œæˆã€‚å¦‚æœç¼–ç å½±å“åˆ°äº†ä¸šåŠ¡çš„æ­£å¸¸åŠŸèƒ½ï¼Œå¯ä»¥é‡‡ç”¨ç™½åå•çš„æ£€æµ‹å’Œè¿‡æ»¤æ–¹å¼æ¥è¿›è¡ŒéªŒè¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œé…ç½®åˆé€‚çš„ CSP è§„åˆ™ã€‚<br>é—®é¢˜2ï¼šå‡ºç°é—®é¢˜ç”±è°èƒŒé”…ï¼Ÿ<br>å¦‚æœæœ‰å®‰å…¨è´Ÿè´£äººï¼Œé¦–å…ˆç”±ä»–èƒŒé”…ã€‚ä»–åº”åœ¨è½¯ä»¶éœ€æ±‚åˆ†æã€è®¾è®¡ã€æµ‹è¯•å„é˜¶æ®µå…³æ³¨å®‰å…¨é—®é¢˜ä»¥åŠè§£å†³è½å®æƒ…å†µã€‚<br>æ²¡æœ‰å®‰å…¨è´Ÿè´£äººï¼Œå¼€å‘äººå‘˜èƒŒé”…ã€‚å¼€å‘äººå‘˜åº”å…·å¤‡åŸºæœ¬çš„å®‰å…¨æ„è¯†ï¼ŒæŒæ¡åŸºæœ¬çš„å®‰å…¨æŠ€æœ¯ã€‚<br>è¿ç»´äººå‘˜ä¹Ÿè¦æ‰¿æ‹…ä¸€å®šçš„è´£ä»»ï¼Œä¸èƒ½å‘ç°é—®é¢˜æå‡ºé—®é¢˜ï¼Œä¹Ÿä¸æ˜¯ä¸€ååˆæ ¼çš„è¿ç»´äººå‘˜ã€‚<br>å½“ç„¶å¦‚æœé»‘å®¢å¤ªå‰å®³ï¼Œå¾ç­‰å·²å°½åŠ›è€Œä¸ºæ—¶ï¼Œåªèƒ½ç”±å…¬å¸èƒŒé”…ã€‚é€šè¿‡äº¤å­¦è´¹ä¹Ÿèƒ½ä¿ƒä½¿æå‡å®‰å…¨é˜²æŠ¤èƒ½åŠ›å˜›ï¼<br>å¦å¤–è¯·æ•™è€å¸ˆï¼š1ã€ç¼–ç æ˜¯ä¸æ˜¯å¸¸è¯´çš„å‚æ•°åŒ–ï¼Ÿå°±æ˜¯å°½é‡å°†ç”¨æˆ·è¾“å…¥å‚æ•°åŒ–ï¼Ÿ2ã€è‹¹æœæ‰‹æœºç»å¸¸æ— ç¼˜æ— æ•…åœ°æç¤ºï¼ŒSIMå¡å‘é€ä¸€æ¡æ–‡æœ¬ä¿¡æ¯ã€‚è¿™ä¸ªæ˜¯è¢«é»‘å®¢æ”»å‡»äº†å—ï¼Ÿå‡ºç°è¿™ç§æƒ…å†µæ—¶ï¼Œè‚¯å®šæ²¡æœ‰ç‚¹å‡»ä»»ä½•é“¾æ¥ã€‚","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479831,"discussion_content":"1ã€å‚æ•°åŒ–ä¹Ÿæ˜¯ä¸€ç§ç¼–ç å½¢å¼ã€‚å…¶ä»–çš„åƒurlencodeï¼Œä¹Ÿæ˜¯ä¸€ç§ç¼–ç ã€‚\n2ã€è¿™åº”è¯¥æ˜¯æŸä¸ªAPPåœ¨å‘é€çŸ­ä¿¡å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577800345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167325,"user_name":"Roy Liang","can_delete":false,"product_type":"c1","uid":1098898,"ip_address":"","ucode":"1DF5FC831A35DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/92/338b5609.jpg","comment_is_top":false,"comment_ctime":1577764816,"is_pvip":false,"replies":[{"id":"65030","content":"ä¹Ÿæœ‰å¯èƒ½æ˜¯æµè§ˆå™¨çš„ä¿æŠ¤ï¼Œæˆ‘åœ¨safariä¸Šæµ‹è¯•ï¼Œä¹Ÿæ˜¯ç›´æ¥æŠŠscriptè„šæœ¬å±•ç¤ºäº†å‡ºæ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577853463,"ip_address":"","comment_id":167325,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577764816","product_id":100041701,"comment_content":"å‰ç«¯ç”¨äº†react + ant designå¼€å‘ï¼Œèƒ½å¤Ÿå‘æ•°æ®åº“æ³¨å…¥äº†ä¸€æ®µè„šæœ¬ï¼š&lt;script&gt;alert(&#39;hello, world!&#39;)&lt;&#47;script&gt;;ã€‚ä¸è¿‡å±•ç¤ºçš„æ—¶å€™ä¹ŸæŠŠä¸Šé¢å…¨éƒ¨è„šæœ¬å†…å®¹å±•ç¤ºå‡ºæ¥äº†ï¼Œè¿™æ˜¯å‰ç«¯å¼€å‘æ¡†æ¶åšäº†é˜²æŠ¤äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479825,"discussion_content":"ä¹Ÿæœ‰å¯èƒ½æ˜¯æµè§ˆå™¨çš„ä¿æŠ¤ï¼Œæˆ‘åœ¨safariä¸Šæµ‹è¯•ï¼Œä¹Ÿæ˜¯ç›´æ¥æŠŠscriptè„šæœ¬å±•ç¤ºäº†å‡ºæ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577853463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165830,"user_name":"sunÃ¶zil","can_delete":false,"product_type":"c1","uid":1447909,"ip_address":"","ucode":"8C57787EF32ECE","user_header":"https://static001.geekbang.org/account/avatar/00/16/17/e5/4939b0c6.jpg","comment_is_top":false,"comment_ctime":1577328808,"is_pvip":false,"replies":[{"id":"63264","content":"å¯ä»¥è®¾ç½®ï¼Œæ˜¯ä¸æ˜¯é»˜è®¤çš„ï¼Œä¸å¤ªç¡®å®šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577352290,"ip_address":"","comment_id":165830,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577328808","product_id":100041701,"comment_content":"Tomcatçš„jsessionidé»˜è®¤æ˜¯HttpOnlyçš„å—ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479286,"discussion_content":"å¯ä»¥è®¾ç½®ï¼Œæ˜¯ä¸æ˜¯é»˜è®¤çš„ï¼Œä¸å¤ªç¡®å®šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577352290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165695,"user_name":"æ—©èµ·ä¸åƒè™«","can_delete":false,"product_type":"c1","uid":1369757,"ip_address":"","ucode":"13CD3B5E1F9435","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/7WkTI1IicbKvsPJng5vQh5qlrf1smbfl2zb7icHZfzcAk1k4lr8w8IDEAdrqq1NHW5XZMPXiaa1h7Jn1LGOWOCkIA/132","comment_is_top":false,"comment_ctime":1577283977,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577283977","product_id":100041701,"comment_content":"è€æ˜¯æç¤ºæœ‰æ•æ„Ÿè¯ï¼Œéƒ½ä¸çŸ¥é“æ˜¯å•¥åŸå› ï¼Œç®€å•è¯´å°±æ˜¯heikeç½‘ç«™å…è®¸è·¨åŸŸï¼Œå°±èƒ½å‘èµ·è¯·æ±‚äº†å‘€","like_count":0},{"had_liked":false,"id":165686,"user_name":"æ—©èµ·ä¸åƒè™«","can_delete":false,"product_type":"c1","uid":1369757,"ip_address":"","ucode":"13CD3B5E1F9435","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/7WkTI1IicbKvsPJng5vQh5qlrf1smbfl2zb7icHZfzcAk1k4lr8w8IDEAdrqq1NHW5XZMPXiaa1h7Jn1LGOWOCkIA/132","comment_is_top":false,"comment_ctime":1577282607,"is_pvip":false,"replies":[{"id":"63166","content":"å“ªé‡Œæœ‰é—®é¢˜ï¼Ÿéº»çƒ¦å…·ä½“è¯´æ˜ä¸€ä¸‹ï¼Œè°¢è°¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577283706,"ip_address":"","comment_id":165686,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577282607","product_id":100041701,"comment_content":"åŒæºç­–ç•¥çš„è¡¨è¿°æœ‰è¯¯å§ï¼Ÿï¼Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479257,"discussion_content":"å“ªé‡Œæœ‰é—®é¢˜ï¼Ÿéº»çƒ¦å…·ä½“è¯´æ˜ä¸€ä¸‹ï¼Œè°¢è°¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577283706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165186,"user_name":"æœä¼Ÿ","can_delete":false,"product_type":"c1","uid":1154580,"ip_address":"","ucode":"C804ACEB176D5E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/8Zs7gEMVq90uejXZMvA409gcln7d9TJgvOW5GQPSfSN0eOTgibhmyKvWltOrtRxdODXGl9zg1eUbAAfliaTicUKqQ/132","comment_is_top":false,"comment_ctime":1577177285,"is_pvip":false,"replies":[{"id":"63025","content":"æ„æ€æ˜¯googleå‘ç°ä½ çš„ç½‘ç«™å†…å«æœ‰æ¶æ„ä¿¡æ¯ï¼Ÿè¿™ç§æƒ…å†µï¼Œå¦‚æœä¸æ˜¯å­˜å‚¨å‹XSSçš„è¯ï¼Œå…¶å®æ›´æ™®éçš„æ˜¯ç½‘é¡µåŠ«æŒã€‚å³é»‘å®¢ç›‘å¬äº†åç«¯çš„ç½‘ç»œæµé‡ï¼Œå¯¹è¿”å›çš„ç½‘é¡µæºç ï¼Œåœ¨ç½‘ç»œå±‚ç›´æ¥è¿›è¡Œäº†ç¯¡æ”¹ã€‚é€šè¿‡httpså¯ä»¥è§£å†³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577230302,"ip_address":"","comment_id":165186,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1577177285","product_id":100041701,"comment_content":"ä¹‹å‰çš„ç½‘ç«™ã€googleæ”¶å½•å‘ç°ç½‘ç«™çš„æœç´¢å•†å“é¡µé¢ã€æœ‰ä¸€äº›å½©ç¥¨æ¶æ„çš„ä¿¡æ¯ã€è¿™ä¸ªä¸€èˆ¬æ˜¯æ€ä¹ˆå®ç°çš„ä»¥åŠæ€ä¹ˆé¢„é˜²ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479063,"discussion_content":"æ„æ€æ˜¯googleå‘ç°ä½ çš„ç½‘ç«™å†…å«æœ‰æ¶æ„ä¿¡æ¯ï¼Ÿè¿™ç§æƒ…å†µï¼Œå¦‚æœä¸æ˜¯å­˜å‚¨å‹XSSçš„è¯ï¼Œå…¶å®æ›´æ™®éçš„æ˜¯ç½‘é¡µåŠ«æŒã€‚å³é»‘å®¢ç›‘å¬äº†åç«¯çš„ç½‘ç»œæµé‡ï¼Œå¯¹è¿”å›çš„ç½‘é¡µæºç ï¼Œåœ¨ç½‘ç»œå±‚ç›´æ¥è¿›è¡Œäº†ç¯¡æ”¹ã€‚é€šè¿‡httpså¯ä»¥è§£å†³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577230302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1154580,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/8Zs7gEMVq90uejXZMvA409gcln7d9TJgvOW5GQPSfSN0eOTgibhmyKvWltOrtRxdODXGl9zg1eUbAAfliaTicUKqQ/132","nickname":"æœä¼Ÿ","note":"","ucode":"C804ACEB176D5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":104702,"discussion_content":"ä¸æ˜¯åŠ«æŒï¼Œæ˜¯æˆ‘é€šè¿‡GoogleæŸ¥çœ‹ç½‘ç«™æ”¶å½•å‘ç°çš„ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577447793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164426,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1576986875,"is_pvip":true,"replies":[{"id":"62506","content":"è¿™ä¸€è®²åªå…³æ³¨xssï¼Œsqlæ³¨å…¥æ˜¯ä¸‹ä¸€è®²çš„å†…å®¹å“ˆï½","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577027471,"ip_address":"","comment_id":164426,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576986875","product_id":100041701,"comment_content":"ä¸èƒ½åªåœ¨è¾“å‡ºæ—¶éªŒè¯ç”¨æˆ·æ•°æ®å§ï¼Ÿæ¯”å¦‚æ”»å‡»è€…æäº¤äº†sqlæ³¨å…¥çš„æ•°æ®ï¼Œä¸å»éªŒè¯ç›´æ¥å­˜æ•°æ®åº“ï¼Œç„¶åå°±æ²¡æœ‰ç„¶åäº†","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478762,"discussion_content":"è¿™ä¸€è®²åªå…³æ³¨xssï¼Œsqlæ³¨å…¥æ˜¯ä¸‹ä¸€è®²çš„å†…å®¹å“ˆï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577027471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163942,"user_name":"makawoyi","can_delete":false,"product_type":"c1","uid":1310391,"ip_address":"","ucode":"702B172D90F210","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTITKv1C7HrokESrlFCVBp3wDTmr1iapBxLm3GMraGe7ww0CN6rInTLKu3bjTUoOsMibSujCb3yUSd6w/132","comment_is_top":false,"comment_ctime":1576832314,"is_pvip":false,"replies":[{"id":"62509","content":"æ˜¯çš„ï¼Œå°±æ˜¯é€šè¿‡å‘å¾®åšçš„å½¢å¼è¿›è¡Œå†æ¬¡ä¼ æ’­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577027947,"ip_address":"","comment_id":163942,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576832314","product_id":100041701,"comment_content":"åå°„å‹XSSï¼Œè€å¸ˆæˆ‘è¿™é‡Œçš„ç–‘é—® æœ€å¼€å§‹æ˜¯å¦‚ä½•è¿›è¡Œä¼ æ’­çš„å‘¢ï¼Ÿç”±é»‘å®¢æœ¬äººç¼–å†™ä¸€æ¡URLè¯±ä½¿ç”¨æˆ·ç‚¹å‡»ï¼Œä¹‹åè·å–åˆ°ç”¨æˆ·çš„Cookieåé€šè¿‡JavaScriptè„šæœ¬å†è‡ªåŠ¨å‘é€ä¸€æ¡å¾®åšè¿›è¡Œä¼ æ’­å—<br><br>å®‰å…¨äº‹ä»¶åº”å½“åŠ å¼ºäººå‘˜å®‰å…¨æ„è¯†ï¼Œä¹‹åæ—¶å°½å¯èƒ½ä½¿ç”¨ä¸Šè¿°æå‡ºçš„å®‰å…¨é˜²æŠ¤æ–¹å¼è¿›è¡Œé˜²æŠ¤","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478589,"discussion_content":"æ˜¯çš„ï¼Œå°±æ˜¯é€šè¿‡å‘å¾®åšçš„å½¢å¼è¿›è¡Œå†æ¬¡ä¼ æ’­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577027947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}