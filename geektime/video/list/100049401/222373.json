{"id":222373,"title":"08 | Istioçš„è‡ªæˆ‘æ•‘èµï¼šä¸ºä»€ä¹ˆIstioå‘ç”Ÿäº†ä¸¤æ¬¡é‡å¤§çš„æ¶æ„å˜æ›´ï¼Ÿ","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-servicemesh\">https://gitee.com/geektime-geekbang/geektime-servicemesh</a></p>","comments":[{"had_liked":false,"id":206457,"user_name":"ç™¾è¡Œå´ä¹¦","can_delete":false,"product_type":"c3","uid":1806261,"ip_address":"","ucode":"3DFCBBEBCA9A4B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/8f/b5/7bc42adc.jpg","comment_is_top":false,"comment_ctime":1586864281,"is_pvip":false,"replies":[{"id":77252,"content":"&quot;åªæœ‰äº†è§£äº†å®ƒçš„è¿‡å»ï¼Œæ‰èƒ½ç†è§£å®ƒçš„æœªæ¥åŠä½¿å‘½ã€‚&quot; ~ è¯´çš„å¾ˆå¥½ï¼ä¹Ÿæ„Ÿè°¢è®¤å¯ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1586954634,"ip_address":"","comment_id":206457,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"åªæœ‰äº†è§£äº†å®ƒçš„è¿‡å»ï¼Œæ‰èƒ½ç†è§£å®ƒçš„æœªæ¥åŠä½¿å‘½ã€‚è¿˜æœ‰è€å¸ˆå¿«ç‚¹æ›´æ–°å•¦ï¼Œåœ¨å¼€å‘çš„é¡¹ç›®å°±æ˜¯åŸºäºistioã€‚ï¼ˆé—æ†¾çš„æ˜¯é¡¹ç›®å¯èƒ½ä¼šè¢«è£æ‰æˆ–å‡å°‘æŠ•å…¥ï¼Œå› ä¸ºå¸‚åœºè¿˜ä¸æˆç†Ÿï¼Œä½†ç›¸ä¿¡æ˜å¹´istioçš„äº§å“è½åœ°å°†ä¼šçˆ†å‘ï¼‰","like_count":4,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491798,"discussion_content":"&amp;quot;åªæœ‰äº†è§£äº†å®ƒçš„è¿‡å»ï¼Œæ‰èƒ½ç†è§£å®ƒçš„æœªæ¥åŠä½¿å‘½ã€‚&amp;quot; ~ è¯´çš„å¾ˆå¥½ï¼ä¹Ÿæ„Ÿè°¢è®¤å¯ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586954634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283504,"user_name":"xcbeyond","can_delete":false,"product_type":"c3","uid":1585810,"ip_address":"","ucode":"96150D447BECF7","user_header":"https://static001.geekbang.org/account/avatar/00/18/32/92/8247f434.jpg","comment_is_top":false,"comment_ctime":1615800630,"is_pvip":false,"replies":[{"id":102861,"content":"æ•´ä¸ªæ§åˆ¶é¢æ•´åˆæˆäº†å•ä½“ï¼Œistiodå°±æ˜¯æš´éœ²å‡ºæ¥çš„è¿›ç¨‹ï¼Œcitedalè¿™äº›åŸæœ¬çš„ç‹¬ç«‹è¿›ç¨‹éƒ½æ•´åˆè¿›å»ä»¥åŠŸèƒ½æ¨¡å—çš„å½¢å¼å­˜åœ¨ã€‚å¯ä»¥çœ‹ä¸€ä¸‹æºç ç»“æ„èƒ½å¤§æ¦‚çŸ¥é“ä¸€äºŒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1615818224,"ip_address":"","comment_id":283504,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"åœ¨æœ€æ–°ç‰ˆæœ¬istioä¸­ï¼Œæ—©å·²å°†Citadelç»„ä»¶åˆå¹¶åˆ°istiodä¸­äº†ï¼Œä½†ä»istiod Podä¸­å»çœ‹ï¼Œåªæœ‰discoveryå®¹å™¨ï¼ˆpilotï¼‰ï¼Œå¹¶æ²¡æœ‰Citadelå®¹å™¨ã€‚ç›®å‰Citadelåªæ˜¯ä½œä¸ºä¸€ä¸ªæ¦‚å¿µå­˜åœ¨ä¹ˆï¼Œå¹¶ä¸å•ç‹¬å­˜åœ¨ï¼Œæˆ–è€…æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæ¯”å¦‚è¿™äº›ç»„ä»¶(Citadelã€Galley) æˆ‘åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œä»å“ªå—èƒ½ç›´è§‚çš„ä½“ç°å‡ºæ¥ç­‰ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517058,"discussion_content":"æ•´ä¸ªæ§åˆ¶é¢æ•´åˆæˆäº†å•ä½“ï¼Œistiodå°±æ˜¯æš´éœ²å‡ºæ¥çš„è¿›ç¨‹ï¼Œcitedalè¿™äº›åŸæœ¬çš„ç‹¬ç«‹è¿›ç¨‹éƒ½æ•´åˆè¿›å»ä»¥åŠŸèƒ½æ¨¡å—çš„å½¢å¼å­˜åœ¨ã€‚å¯ä»¥çœ‹ä¸€ä¸‹æºç ç»“æ„èƒ½å¤§æ¦‚çŸ¥é“ä¸€äºŒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615818224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1585810,"avatar":"https://static001.geekbang.org/account/avatar/00/18/32/92/8247f434.jpg","nickname":"xcbeyond","note":"","ucode":"96150D447BECF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357740,"discussion_content":"æºç å·²ç»çœ‹è¿‡ä¸€éƒ¨åˆ†ï¼Œçš„ç¡®æ˜¯è¿™æ ·çš„ã€‚å¯èƒ½æºäºå†å²ç‰ˆæœ¬åŸå› ï¼Œå¯¹äºistiodçš„ä¸­Pilotã€Citadelã€Galleyè¿™äº›åŠŸèƒ½ï¼Œå†å«åšç»„ä»¶ï¼Œå°±æœ‰äº›ä¸å¤ªåˆé€‚äº†å§ï¼Œå«åšç›¸åº”åŠŸèƒ½æ¨¡å—åº”è¯¥æ›´ç¡®åˆ‡äº›äº†ï¼Œè¿™å¯èƒ½å°±æ˜¯ç‰ˆæœ¬è¿‡åº¦é˜¶æ®µ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615859550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206908,"user_name":"008","can_delete":false,"product_type":"c3","uid":1164003,"ip_address":"","ucode":"E1D9D91E18208A","user_header":"https://static001.geekbang.org/account/avatar/00/11/c2/e3/df7447ff.jpg","comment_is_top":false,"comment_ctime":1586955704,"is_pvip":false,"replies":[{"id":77399,"content":"è°¢è°¢è®¤å¯ğŸ˜‹","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1587025730,"ip_address":"","comment_id":206908,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"ä¸¤å€é€Ÿè¿‡äº†ä¸€éï¼Œéå¸¸æœ‰å…´è¶£ï¼Œè™½ç„¶å¾ˆå¯èƒ½ä¸ä¼šå…·ä½“å®è·µï¼Œä½†ä¸€ç›´è®¤ä¸ºSidecaræ¨¡å¼å¯ä»¥è§£å†³æˆ‘ä»¬è€æ—§ç³»ç»Ÿçš„ä¸€äº›æ§åˆ¶é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿä¸€ç›´åœ¨è¿™æ–¹é¢å‘åŠ›ï¼Œå­¦ä¹ service meshçš„ç†å¿µä¹Ÿå¯ä»¥æœ‰åŠ©äºæˆ‘ä»¬å¯¹ç°æœ‰åŸºç¡€è®¾æ–½å±‚è¿›è¡Œæ›´æ¸…æ™°çš„å®šä¹‰ã€‚","like_count":1,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491946,"discussion_content":"è°¢è°¢è®¤å¯ğŸ˜‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587025730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206048,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c3","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1586779909,"is_pvip":false,"replies":[{"id":77150,"content":"è°¢è°¢è®¤å¯ğŸ˜€","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1586870351,"ip_address":"","comment_id":206048,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"å“ˆå“ˆï¼Œè€å¸ˆçš„æ¯”å–»å¾ˆå½¢è±¡ã€‚\nå‰é¢çš„ç‰ˆæœ¬æ¯”è¾ƒï¼Œæ‹¿F22å’Œä¸‰ä»£æœºå‹æ¯”è¾ƒã€‚\nåé¢çš„mvpï¼Œæ‹¿é¡¿æŒ«å’Œçƒ§æœºæ²¹ä¸¾ä¾‹ï¼Œå¾ˆå½¢è±¡ç”ŸåŠ¨ã€‚","like_count":1,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491651,"discussion_content":"è°¢è°¢è®¤å¯ğŸ˜€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586870351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205804,"user_name":"æœ±æ™”","can_delete":false,"product_type":"c3","uid":1001470,"ip_address":"","ucode":"0B7F0BADE6AAB8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/fe/d0e25d57.jpg","comment_is_top":false,"comment_ctime":1586742023,"is_pvip":false,"replies":[{"id":76942,"content":"æ„Ÿè°¢æœ±è€å¸ˆçš„è®¤å¯ï¼ğŸ˜‹","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1586771176,"ip_address":"","comment_id":205804,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è¯´çš„éå¸¸å¥½","like_count":1,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491587,"discussion_content":"æ„Ÿè°¢æœ±è€å¸ˆçš„è®¤å¯ï¼ğŸ˜‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586771176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236872,"user_name":"Geek_66dcc6","can_delete":false,"product_type":"c3","uid":1317851,"ip_address":"","ucode":"0EC9C087C5008B","user_header":"","comment_is_top":false,"comment_ctime":1595573382,"is_pvip":false,"replies":[{"id":87816,"content":"æŠ¥ä»€ä¹ˆé”™ï¼Ÿè´´ä¸€ä¸‹é…ç½®ã€‚æ’é™¤æ³•å…ˆç”¨æœ€ç®€å•çš„ä¾‹å­è¯•ï¼Œæ…¢æ…¢åŠ ","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1595935363,"ip_address":"","comment_id":236872,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è°¢è°¢è€å¸ˆï¼Œä½†æ˜¯æˆ‘åœ¨éƒ¨ç½²istio1.6 åï¼Œå‘ç°è§£æjwt  å¹¶æ·»åŠ åˆ°http header è¿™ä¸ªrule åŠŸèƒ½å¹¶ä¸èƒ½ç”¨ï¼Œç”¨ç¤ºä¾‹ä¹Ÿæ˜¯ä¸èƒ½ç”¨çš„ï¼Œä¸çŸ¥é“æ‚¨é‚£è¾¹æœ‰é‡åˆ°è¿‡å—ã€‚å› ä¸ºç›®å‰ æ’ä»¶å½¢å¼1.6 æ”¯æŒçš„å¹¶ä¸å¥½ï¼Œæƒ³å…ˆç”¨ä¹‹å‰çš„rule çš„æ–¹å¼è¿‡æ¸¡ä¸€ä¸‹ï¼Œè°¢è°¢æ‚¨çš„æŒ‡å¯¼\n\n-----------------------------------------------------------------\nè€å¸ˆæ‚¨å¥½ï¼Œåœ¨mixer è¿™ä¸ªé—®é¢˜ä¸Šï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œå› ä¸ºistio 1.5 å·²ç»åºŸå¼ƒæ‰è¿™ä¸ªåº”ç”¨ï¼Œåœ¨æ–‡æ¡£https:&#47;&#47;istio.io&#47;latest&#47;docs&#47;tasks&#47;policy-enforcement&#47;control-headers&#47;#request-header-operations ä¸­ï¼Œæˆ‘æœ‰è¯•è¿‡ç”¨æ¨èçš„envoy çš„æ’ä»¶å°è¯•åŠ headerï¼Œä½†æ˜¯ç›®å‰æ’ä»¶é‚£è¾¹åªæ”¯æŒ1.5 ç‰ˆæœ¬ï¼Œè€Œæˆ‘éƒ¨ç½²çš„æ˜¯1.6 ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘æƒ³ç»§ç»­ç”¨è¿æ¥ä¸­adapter çš„æ–¹å¼å¢åŠ rule ï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œå®˜æ–¹è¯´åºŸå¼ƒæ‰ï¼Œæ˜¯ä»¥åä¸ç»§ç»­æ›´æ–°mixerï¼Œä½†æ˜¯ç›®å‰è¿˜å¯ä»¥ä½¿ç”¨ï¼Ÿè¿˜æ˜¯ç›®å‰1.6 çš„ç‰ˆæœ¬å®Œå…¨ä¸æ”¯æŒè¿™ç§éƒ¨ç½²æ–¹å¼äº†å‘¢ï¼Œå› ä¸ºæˆ‘æŸ¥çœ‹kubectl -n istio-system get cm istio -o jsonpath=&quot;{@.data.mesh}&quot; | grep disablePolicyChecks\nç»“æœæ˜¯disablePolicyChecks: falseï¼Œæ‰€ä»¥1.6ç‰ˆæœ¬ç›®å‰è¿˜æ˜¯æ”¯æŒpolicyçš„æ–¹å¼\nä½œè€…å›å¤: æ˜¯çš„ï¼Œè‚¯å®šæœ‰ä¸€å®šçš„å…¼å®¹æœŸï¼Œä¸å¯èƒ½ä¸€ä¸‹å°±åºŸå¼ƒæ‰ï¼Œè¿™ä¼šè®©ä¸€éƒ¨åˆ†ç”¨æˆ·æ²¡æ³•è¿ç§»åˆ°æ–°ç‰ˆæœ¬ã€‚æ®è¯´æ˜¯åˆ°1.7ç‰ˆæœ¬ä¼šå½»åº•åºŸå¼ƒã€‚","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502236,"discussion_content":"æŠ¥ä»€ä¹ˆé”™ï¼Ÿè´´ä¸€ä¸‹é…ç½®ã€‚æ’é™¤æ³•å…ˆç”¨æœ€ç®€å•çš„ä¾‹å­è¯•ï¼Œæ…¢æ…¢åŠ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595935363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1317851,"avatar":"","nickname":"Geek_66dcc6","note":"","ucode":"0EC9C087C5008B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298141,"discussion_content":"é€šè¿‡å†™æ’ä»¶çš„æ–¹å¼å·²ç»å†™å¥½äº†ï¼Œç›®å‰1.6çš„æ–‡æ¡£å¯¹äºruleè¿™ä¸€å—å†™çš„æœ‰é—®é¢˜ï¼Œpolicyçš„å¼€å…³æ–¹å¼ä¸å¯¹ï¼Œå¯¼è‡´policyæ²¡æœ‰çœŸæ­£å¼€å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597202654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236281,"user_name":"Geek_66dcc6","can_delete":false,"product_type":"c3","uid":1317851,"ip_address":"","ucode":"0EC9C087C5008B","user_header":"","comment_is_top":false,"comment_ctime":1595383854,"is_pvip":false,"replies":[{"id":87524,"content":"æ˜¯çš„ï¼Œè‚¯å®šæœ‰ä¸€å®šçš„å…¼å®¹æœŸï¼Œä¸å¯èƒ½ä¸€ä¸‹å°±åºŸå¼ƒæ‰ï¼Œè¿™ä¼šè®©ä¸€éƒ¨åˆ†ç”¨æˆ·æ²¡æ³•è¿ç§»åˆ°æ–°ç‰ˆæœ¬ã€‚æ®è¯´æ˜¯åˆ°1.7ç‰ˆæœ¬ä¼šå½»åº•åºŸå¼ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1595571805,"ip_address":"","comment_id":236281,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåœ¨mixer è¿™ä¸ªé—®é¢˜ä¸Šï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œå› ä¸ºistio 1.5 å·²ç»åºŸå¼ƒæ‰è¿™ä¸ªåº”ç”¨ï¼Œåœ¨æ–‡æ¡£https:&#47;&#47;istio.io&#47;latest&#47;docs&#47;tasks&#47;policy-enforcement&#47;control-headers&#47;#request-header-operations ä¸­ï¼Œæˆ‘æœ‰è¯•è¿‡ç”¨æ¨èçš„envoy çš„æ’ä»¶å°è¯•åŠ headerï¼Œä½†æ˜¯ç›®å‰æ’ä»¶é‚£è¾¹åªæ”¯æŒ1.5 ç‰ˆæœ¬ï¼Œè€Œæˆ‘éƒ¨ç½²çš„æ˜¯1.6 ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘æƒ³ç»§ç»­ç”¨è¿æ¥ä¸­adapter çš„æ–¹å¼å¢åŠ rule ï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œå®˜æ–¹è¯´åºŸå¼ƒæ‰ï¼Œæ˜¯ä»¥åä¸ç»§ç»­æ›´æ–°mixerï¼Œä½†æ˜¯ç›®å‰è¿˜å¯ä»¥ä½¿ç”¨ï¼Ÿè¿˜æ˜¯ç›®å‰1.6 çš„ç‰ˆæœ¬å®Œå…¨ä¸æ”¯æŒè¿™ç§éƒ¨ç½²æ–¹å¼äº†å‘¢ï¼Œå› ä¸ºæˆ‘æŸ¥çœ‹kubectl -n istio-system get cm istio -o jsonpath=&quot;{@.data.mesh}&quot; | grep disablePolicyChecks\nç»“æœæ˜¯disablePolicyChecks: falseï¼Œæ‰€ä»¥1.6ç‰ˆæœ¬ç›®å‰è¿˜æ˜¯æ”¯æŒpolicyçš„æ–¹å¼\n","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502013,"discussion_content":"æ˜¯çš„ï¼Œè‚¯å®šæœ‰ä¸€å®šçš„å…¼å®¹æœŸï¼Œä¸å¯èƒ½ä¸€ä¸‹å°±åºŸå¼ƒæ‰ï¼Œè¿™ä¼šè®©ä¸€éƒ¨åˆ†ç”¨æˆ·æ²¡æ³•è¿ç§»åˆ°æ–°ç‰ˆæœ¬ã€‚æ®è¯´æ˜¯åˆ°1.7ç‰ˆæœ¬ä¼šå½»åº•åºŸå¼ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595571805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207477,"user_name":"szpzs","can_delete":false,"product_type":"c3","uid":1031994,"ip_address":"","ucode":"4F35103E5D9B26","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/3a/bbcbc278.jpg","comment_is_top":false,"comment_ctime":1587090974,"is_pvip":false,"replies":[{"id":77516,"content":"å‚è€ƒæˆ‘åœ¨éƒ¨è½çš„å›ç­”ï¼Œè¿™é‡Œé¢æœ‰å®˜æ–¹çš„è§£é‡Šï¼šhttps:&#47;&#47;horde.geekbang.org&#47;message&#47;detail&#47;UQUvVF3G3wTcu9L8ARUhk9l8vhbaTASyI1XlXDPM9jQ?tab=0\nä½ å¯ä»¥ç†è§£ä¸ºåªè¦æœ‰è¯·æ±‚æµç»sidecarï¼Œè¿™ä¸ªsidecarå°±éœ€è¦å’Œmixerè¿›è¡Œ2æ¬¡é€šä¿¡ã€‚ä¸è¿‡1.5ç‰ˆæœ¬åmixerå·²ç»åºŸå¼ƒäº†ï¼Œå¯ä»¥ä¸å¿…çº ç»“è¿™ä¸ªé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1587110186,"ip_address":"","comment_id":207477,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è¯·é—®é©¬è€å¸ˆï¼Œå…³äºâ€œIstio ä¸­çš„ Mixer éœ€è¦å’Œæ•°æ®å¹³é¢è¿›è¡Œä¸¤æ¬¡é€šè®¯ï¼Œå…·ä½“æ˜¯é‚£ä¸¤æ¬¡é€šè®¯å‘¢ï¼Ÿâ€è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘è¿˜æ˜¯æœ‰äº›ç–‘æƒ‘ã€‚è¿™ä¸¤æ¬¡é€šè®¯æ˜¯åœ¨è¯·æ±‚æ–¹çš„sidecaré‡Œå‘èµ·çš„ï¼Œè¿˜æ˜¯åœ¨æœåŠ¡æ–¹çš„sidecaré‡Œå‘èµ·çš„ï¼Ÿæˆ–è€…è¯´ï¼Œé¢„æ£€æ˜¯åœ¨è¯·æ±‚æ–¹çš„sidecaré‡Œå‘èµ·ï¼Œé¥æµ‹æ˜¯åœ¨æœåŠ¡æ–¹çš„sidecaré‡Œå‘èµ·ï¼Ÿè¯·é©¬è€å¸ˆæŒ‡ç‚¹è¿·æ´¥ã€‚","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492144,"discussion_content":"å‚è€ƒæˆ‘åœ¨éƒ¨è½çš„å›ç­”ï¼Œè¿™é‡Œé¢æœ‰å®˜æ–¹çš„è§£é‡Šï¼šhttps://horde.geekbang.org/message/detail/UQUvVF3G3wTcu9L8ARUhk9l8vhbaTASyI1XlXDPM9jQ?tab=0\nä½ å¯ä»¥ç†è§£ä¸ºåªè¦æœ‰è¯·æ±‚æµç»sidecarï¼Œè¿™ä¸ªsidecarå°±éœ€è¦å’Œmixerè¿›è¡Œ2æ¬¡é€šä¿¡ã€‚ä¸è¿‡1.5ç‰ˆæœ¬åmixerå·²ç»åºŸå¼ƒäº†ï¼Œå¯ä»¥ä¸å¿…çº ç»“è¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587110186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206935,"user_name":"dream","can_delete":false,"product_type":"c3","uid":1117793,"ip_address":"","ucode":"65B33D32FA8BE9","user_header":"https://static001.geekbang.org/account/avatar/00/11/0e/61/ae68f8eb.jpg","comment_is_top":false,"comment_ctime":1586959579,"is_pvip":false,"replies":[{"id":77398,"content":"å‚è€ƒè¿™é‡Œï¼šhttps:&#47;&#47;istio.io&#47;docs&#47;reference&#47;config&#47;policy-and-telemetry&#47;mixer-overview&#47;\nâ€œThe Envoy sidecar logically calls Mixer before each request to perform precondition checks, and after each request to report telemetry. â€ - ä¸¤æ¬¡åˆ†åˆ«æ˜¯é¢„æ£€å’Œé¥æµ‹ã€‚é¢„æ£€çš„æ—¶å€™å¯ä»¥åšé™æµï¼›é¥æµ‹çš„æ—¶å€™æ”¶é›†æŒ‡æ ‡æ•°æ®ï¼Œè¿™ä¹Ÿæ­£å¥½å¯¹åº”mixerçš„ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"é©¬è‹¥é£","uid":1046394,"ctime":1587025642,"ip_address":"","comment_id":206935,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œåœ¨ 1.0 ç‰ˆæœ¬ä¸­æœ‰æåˆ° mixer æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯æ€§èƒ½ï¼Œé™ä½äº†æ€§èƒ½çš„åŸå› ä¹‹ä¸€æ˜¯ : mixer éœ€è¦å’Œæ•°æ®å¹³é¢è¿›è¡Œä¸¤æ¬¡é€šè®¯ï¼Œè¯·é—®è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯ä¸¤æ¬¡é€šè®¯å‘¢ï¼Ÿå…·ä½“æ˜¯é‚£ä¸¤æ¬¡é€šè®¯å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"é©¬è‹¥é£","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491957,"discussion_content":"å‚è€ƒè¿™é‡Œï¼šhttps://istio.io/docs/reference/config/policy-and-telemetry/mixer-overview/\nâ€œThe Envoy sidecar logically calls Mixer before each request to perform precondition checks, and after each request to report telemetry. â€ - ä¸¤æ¬¡åˆ†åˆ«æ˜¯é¢„æ£€å’Œé¥æµ‹ã€‚é¢„æ£€çš„æ—¶å€™å¯ä»¥åšé™æµï¼›é¥æµ‹çš„æ—¶å€™æ”¶é›†æŒ‡æ ‡æ•°æ®ï¼Œè¿™ä¹Ÿæ­£å¥½å¯¹åº”mixerçš„ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587025642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205781,"user_name":"æ€ç»´å†³å®šæœªæ¥","can_delete":false,"product_type":"c3","uid":1412891,"ip_address":"","ucode":"88CC245B3C6E2D","user_header":"","comment_is_top":false,"comment_ctime":1586738689,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"ä¸å¤Ÿçœ‹å•Šï¼Œæ±‚å¿«æ›´","like_count":6},{"had_liked":false,"id":358154,"user_name":"JianXu","can_delete":false,"product_type":"c3","uid":1033219,"ip_address":"ä¸Šæµ·","ucode":"2A61BDBB573BDC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/03/f753fda7.jpg","comment_is_top":false,"comment_ctime":1663978524,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"è€å¸ˆå­¦åœ£ç»ï¼Ÿ","like_count":0},{"had_liked":false,"id":290161,"user_name":"ğŸ’°ğŸ’°ğŸ’°","can_delete":false,"product_type":"c3","uid":2580393,"ip_address":"","ucode":"BAF5D7DBE496FA","user_header":"https://static001.geekbang.org/account/avatar/00/27/5f/a9/18573ff6.jpg","comment_is_top":false,"comment_ctime":1619408604,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"è€å¸ˆèƒ½ä¸èƒ½æä¾›æ•™ç¨‹çš„pdfç‰ˆæœ¬ï¼Œè§†é¢‘æœ‰æ—¶å€™ä¼šä¸å¤ªæ–¹ä¾¿çœ‹","like_count":0},{"had_liked":false,"id":283503,"user_name":"xcbeyond","can_delete":false,"product_type":"c3","uid":1585810,"ip_address":"","ucode":"96150D447BECF7","user_header":"https://static001.geekbang.org/account/avatar/00/18/32/92/8247f434.jpg","comment_is_top":false,"comment_ctime":1615800509,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"æ‚¨å¥½ã€‚æœ‰å‡ ä¸ªé—®é¢˜ å‘æ‚¨è¯·æ•™ä¸€ä¸‹ï¼Œæœ€è¿‘åœ¨æ¥è§¦Istioæ—¶ï¼Œå­˜åœ¨ä¸€äº›å…³äºå„ç»„ä»¶é—´çš„åˆ’åˆ†åŠå…³ç³»ï¼Œæ¯”è¾ƒæ··ä¹±ï¼ˆæœ€è¿‘ç‰ˆæœ¬ 1.9ï¼‰ã€‚","like_count":0},{"had_liked":false,"id":205962,"user_name":"Ckiwis","can_delete":false,"product_type":"c3","uid":1038372,"ip_address":"","ucode":"E59B57FF70650B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/24/499e7c99.jpg","comment_is_top":false,"comment_ctime":1586764392,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100049401,"comment_content":"åŠ æ²¹æ›´","like_count":0}]}