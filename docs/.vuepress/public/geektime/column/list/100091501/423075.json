{"id":423075,"title":"03 | æŒ‡æ—¥å¯å¾…ï¼šä¸€æ­¥ä¸€æ­¥æ­å»ºç§’æ€ç³»ç»Ÿï¼ˆä¸Šï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¿—ä¸œï¼Œæ¬¢è¿å’Œæˆ‘ä¸€èµ·ä»é›¶æ‰“é€ ç§’æ€ç³»ç»Ÿã€‚</p><p>åœ¨ä¸Šä¸€èŠ‚è¯¾ä¸­æˆ‘ä»¬æ­å»ºäº†æœ¬åœ°çš„ä¾èµ–ç¯å¢ƒï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬å°†ä¾æ®å‰ç¯‡ä¸­åšçš„æŠ€æœ¯é€‰å‹ï¼Œç»§ç»­æ­å»ºæˆ‘ä»¬çš„å¼€å‘é¡¹ç›®ï¼Œå¹¶åœ¨æˆ‘ä»¬æ­å»ºå¥½çš„é¡¹ç›®ä¸Šï¼Œ<strong>å¼€å‘ä¸€ä¸ªæœ€ç®€çš„ç§’æ€ç³»ç»Ÿ</strong>ã€‚</p><p>è¿™ä¸ªç³»ç»Ÿæ¨¡æ‹Ÿé€šè¿‡å•†è¯¦é¡µï¼Œè¿›å…¥åˆ°ç»“ç®—é¡µï¼Œå¯ä»¥å±•ç¤ºå•†å“å›¾ç‰‡ã€åç§°ã€ä»·æ ¼ç­‰ï¼›å…¶æ¬¡æ”¯æŒè¾“å…¥åœ°å€ã€é€‰æ‹©æ”¯ä»˜æ–¹å¼ã€ä¿®æ”¹è´­ä¹°æ•°é‡ç­‰æ“ä½œè¡Œä¸ºï¼›ç„¶åæäº¤è®¢å•ï¼›æœ€ååœ¨ä¸‹å•æˆåŠŸåæ¨¡æ‹Ÿè·³è½¬åˆ°æ”¯ä»˜é¡µã€‚</p><p>éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ï¼Œè¿™äº›åŸºæœ¬ä¸Šæ¶µç›–äº†ç§’æ€çš„æ•´ä¸ªæµç¨‹ï¼Œåªä¸è¿‡å¤§å¹³å°çš„ç»“ç®—å…ƒç´ æ›´ä¸°å¯Œï¼Œä¹Ÿæœ‰æ›´å¤šçš„åˆ†æ”¯æ“ä½œï¼Œä½†è¿™äº›éƒ½å¯ä»¥åœ¨æˆ‘ä»¬çš„åŸºç¡€ä¸Šï¼ŒæŒ‰ç…§ä¸“æ ä¸­ä»‹ç»çš„ä¸€äº›åŸåˆ™ï¼Œè¿›è¡Œå¢å‡ã€‚</p><p>æ•´ä¸ªé¡¹ç›®çš„æ­å»ºå’Œç§’æ€ä¸šåŠ¡ç³»ç»Ÿçš„å…·ä½“å®ç°è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†åˆ†æˆä¸¤èŠ‚è¯¾æ¥å®Œæˆã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬ä¸»è¦æ˜¯æ­å»ºé¡¹ç›®ï¼Œé‚£ä¹ˆè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç›´æ¥å¼€å§‹å§ã€‚</p><p></p><h2>èŒèƒ½åˆ’åˆ†</h2><p>æ ¹æ®å‰é¢æˆ‘ä»¬å¯¹ç§’æ€ä¸šåŠ¡åšçš„åˆ†æå¯çŸ¥ï¼Œè¦å®ç°ç§’æ€ä¸šåŠ¡ï¼Œæˆ‘ä»¬æœ€å°‘éœ€è¦3ä¸ªç³»ç»ŸæœåŠ¡ï¼š</p><ul>\n<li>ä¸€ä¸ªæ˜¯NginxæœåŠ¡ï¼Œæˆ‘ä»¬å‘½åä¸ºdemo-nginxï¼›</li>\n<li>å†ä¸€ä¸ªæ˜¯WebæœåŠ¡ï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºdemo-webï¼›</li>\n<li>æœ€åä¸€ä¸ªæ˜¯RPCæœåŠ¡ï¼Œæˆ‘ä»¬å°±å«å®ƒdemo-supportã€‚</li>\n</ul><p>3ä¸ªé¡¹ç›®çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f6/3c/f627a52ea373f6d4cf3a1613fd9cdb3c.jpg?wh=1508x1108\" alt=\"\"></p><p>3ä¸ªé¡¹ç›®çš„ç›®æ ‡èŒèƒ½åˆ’åˆ†è¿™é‡Œæˆ‘ä¹Ÿè¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚</p><p><strong>é¦–å…ˆæ˜¯demo-nginxï¼Œä¸»è¦è´Ÿè´£ï¼š</strong></p><!-- [[[read_end]]] --><ul>\n<li>æµé‡ç­›é€‰ï¼šæ ¹æ®é»‘ç™½åå•ã€ç™»å½•æ€å’Œå‚æ•°æœ‰æ•ˆæ€§ç­‰æ¥ç­›é€‰æµé‡ã€‚</li>\n<li>æµé‡åˆ†å‘ï¼šé€šè¿‡è®¾ç½®çš„è´Ÿè½½å‡è¡¡ç®—æ³•è¿›è¡Œæµé‡åˆ†å‘ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç®—æ³•ï¼Œæ¯”å¦‚æ ¹æ®IPåšhashï¼Œæˆ–è€…æ ¹æ®ç”¨æˆ·IDåšhashç­‰ã€‚</li>\n<li>ç®€å•ä¸šåŠ¡ä»¥åŠæ ¡éªŒï¼šæä¾›æ´»åŠ¨æ•°æ®ã€æ´»åŠ¨æœ‰æ•ˆæ€§æ ¡éªŒã€åº“å­˜æ•°é‡æ ¡éªŒå’Œå…¶ä»–ä¸šåŠ¡ç›¸å…³çš„ç®€å•æ ¡éªŒç­‰ã€‚</li>\n<li>é™æµï¼šæ ¹æ®IPæˆ–è€…è‡ªå®šä¹‰å…³é”®å…¥å‚åšé™æµã€‚</li>\n<li>å¼‚å¸¸æç¤ºé¡µé¢ï¼šä¸»è¦æ˜¯è¿›ç»“ç®—é¡µå¤±è´¥çš„æç¤ºé¡µï¼Œå¯èƒ½æ˜¯è¢«é™æµï¼Œè¢«ä¸šåŠ¡æ ¡éªŒæ‹¦æˆªæˆ–è€…æ˜¯åç«¯æœåŠ¡å¼‚å¸¸ç­‰ã€‚</li>\n</ul><p><strong>å…¶æ¬¡æ˜¯demo-webï¼Œä¸»è¦è´Ÿè´£ï¼š</strong></p><ul>\n<li>æä¾›ç»“ç®—é¡µH5ã€‚</li>\n</ul><p>æä¾›ç»“ç®—é¡µçš„HTMLï¼Œæˆ–è€…æ˜¯é‡å®šå‘åˆ°CDNä¸Šçš„ç»“ç®—é¡µH5åœ°å€ã€‚è¿™é‡Œä½ è‚¯å®šè¦é—®ï¼Œä¸ºä»€ä¹ˆä¸æŠŠè¿™ä¸ªåŠŸèƒ½å‰ç½®åˆ°NginxæœåŠ¡ï¼Œé‚£æ ·ä¸æ˜¯å¯ä»¥æ›´å¿«åœ°è¿”å›å—ï¼Ÿ</p><p>è¿™é‡Œä¸»è¦è€ƒè™‘åˆ°ä¸€ä¸ªä¸Šçº¿ç°åº¦å‘å¸ƒçš„é—®é¢˜ã€‚ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¦‚æœç§’æ€ä¸Šçº¿åï¼Œåœ¨åç»­çš„éœ€æ±‚ç‰ˆæœ¬è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬é¡µé¢æ–°å¢äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½éœ€è¦è°ƒç”¨ä¸€ä¸ªæ–°çš„æ¥å£ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åˆ¶å®šå‘å¸ƒè®¡åˆ’ï¼Œæ¥ç¡®ä¿ä¸Šçº¿çš„å®‰å…¨ä»¥åŠä¸å½±å“çº¿ä¸Šç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥é€‰æ‹©å…¨é‡ä¸Šçº¿ï¼Œä½†è¿™ä¹ˆåšçš„åæœå°±æ˜¯ä¸€æ—¦å‡ºç°æˆ‘ä»¬æµ‹è¯•æœªè¦†ç›–åˆ°çš„ä¸šåŠ¡åœºæ™¯è€Œå¼•å‘äº†çº¿ä¸Šäº‹æ•…ï¼Œé‚£ä¹ˆå°±ä¼šå½±å“åˆ°å…¨éƒ¨çš„ç”¨æˆ·ï¼Œè¿™å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯ä¸å¯æ¥å—çš„ï¼Œæ‰€ä»¥ä¸Šçº¿è¿˜å¾—é‡‡å–ç°åº¦å‘å¸ƒçš„æ–¹å¼ã€‚</p><p><strong>é‚£ä»€ä¹ˆæ˜¯ç°åº¦å‘å¸ƒå‘¢ï¼Ÿ</strong></p><p>å¤§å¤šæ•°åŒå­¦åº”è¯¥æœ‰æ‰€äº†è§£ï¼Œè¿™é‡Œæˆ‘åªç®€å•è®²ä¸€ä¸‹ç°åº¦å‘å¸ƒçš„åšæ³•ä¸ç›®çš„ã€‚ä¸€èˆ¬æˆ‘ä»¬æ–°åŠŸèƒ½ä¸Šçº¿ï¼Œéƒ½ä¸æ˜¯ä¸€ä¸‹å­å…¨é‡ä¸Šçº¿ï¼Œè€Œæ˜¯æœ‰è®¡åˆ’åœ°é€æ­¥ç°åº¦ä¸Šçº¿ï¼Œå³å…ˆä¸Š1å°æˆ–å‡ å°æœåŠ¡çº¿ä¸Šè§‚å¯Ÿï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œé©¬ä¸Šå›æ»šã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¦‚æœçœŸçš„å‡ºç°é—®é¢˜ï¼Œé‚£ä¹ˆå—å½±å“çš„æµé‡ä¹Ÿåªæœ‰ç°åº¦çš„é‚£äº›æœºå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ çº¿ä¸Šæœ‰1000å°æœåŠ¡ï¼Œä½ ä¸Šä¸€å°ç°åº¦ï¼Œé‚£ä¹ˆå—å½±å“çš„æµé‡ä¹Ÿåªæœ‰åƒåˆ†ä¹‹ä¸€ã€‚è¿™ä¸ªåšæ³•æœ€å¤§é™åº¦åœ°é™ä½äº†äº‹æ•…çš„å½±å“é¢ã€‚</p><p>ä½†é‡‡ç”¨ç°åº¦å‘å¸ƒçš„æ–¹å¼åˆä¼šå¸¦æ¥æ–°çš„é—®é¢˜ï¼Œå³ç”¨æˆ·ç‚¹å‡»æŠ¢è´­è¿›å…¥åˆ°äº†æ–°é¡µé¢ï¼Œæ–°é¡µé¢è°ƒç”¨æ–°æ¥å£ï¼Œä½†å¦‚æœè¿™ä¸ªè¯·æ±‚æ‰“åˆ°äº†æ—§çš„æœåŠ¡å™¨ä¸Šï¼Œæ²¡æœ‰æ–°çš„æ¥å£ï¼Œé‚£å²‚ä¸æ˜¯å°±æŠ¥é”™äº†ï¼Ÿ</p><p>è¿™é‡Œä½ ä¸å¦¨ä¸»åŠ¨æ€è€ƒä¸‹ï¼šæ€ä¹ˆç¡®ä¿ç°åº¦ä¸Šçº¿æƒ…å†µä¸‹ï¼Œä½¿åŒä¸€ä¸ªç”¨æˆ·è¿›å…¥åˆ°æ–°é¡µé¢æ‰€å‘å‡ºçš„è¯·æ±‚ä¹Ÿèƒ½å¤Ÿæ‰“åˆ°æ–°çš„æ¥å£æœåŠ¡ä¸Šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cb/13/cbb1666d0c36ab235bbyy7ee8fb09413.jpg?wh=1870x926\" alt=\"\"></p><ul>\n<li>ä¸šåŠ¡èšåˆæ¥å£ï¼šæä¾›ç»“ç®—é¡µH5æ¸²æŸ“é¡µé¢æ‰€éœ€æ•°æ®ï¼Œä»¥åŠæä¾›ç”¨æˆ·è¡Œä¸ºæ“ä½œæ‰€éœ€æ¥å£ï¼Œæ¯”å¦‚ä¸‹å•ç­‰ã€‚</li>\n<li>å…¶ä»–åŠŸèƒ½ï¼šéƒ¨åˆ†å…³é”®æ¥å£çš„é™æµï¼Œä»¥ä¿è¯ä¸‹æ¸¸æ¥å£çš„å®‰å…¨ã€‚</li>\n</ul><p><strong>æœ€åæ˜¯demo-supportï¼Œä¸»è¦è´Ÿè´£ï¼š</strong></p><p>æä¾›åŸºç¡€æœåŠ¡ã€æ•°æ®çš„æ”¯æŒï¼ŒåŒ…æ‹¬æ´»åŠ¨æ•°æ®ã€å•†å“æ•°æ®ã€ç”¨æˆ·ç»´åº¦æ•°æ®ã€æå•ç­‰ï¼Œä¸»è¦æ¨¡æ‹ŸåŸºç¡€æœåŠ¡ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥æ˜¯æŒ‰ä¸šåŠ¡æ¨¡å—åšç»†è‡´åˆ’åˆ†çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c0/1c/c0ac84c48a59c9a8dd25b2d5yy50971c.jpg?wh=1628x590\" alt=\"\"></p><p>è¿™é‡Œæˆ‘ä»¬ä¸ºäº†å¼€å‘æ–¹ä¾¿ï¼Œå°±å…¨éƒ¨é›†æˆåˆ°ä¸€ä¸ªdemo-supportæœåŠ¡é‡Œäº†ã€‚</p><h2>é¡¹ç›®æ­å»º</h2><p></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬ç¡®å®šäº†é¡¹ç›®æœåŠ¡èŒèƒ½èŒƒå›´ï¼Œä¹Ÿåšäº†ç›¸å…³çš„å‘½åï¼Œä¸‹é¢å°±å¯ä»¥åšé¡¹ç›®çš„æ­å»ºäº†ã€‚</p><p>ä½†åœ¨å¼€å§‹ä¹‹å‰æˆ‘è¦ç®€å•è¯´æ˜ä¸‹ï¼šåœ¨åé¢çš„é¡¹ç›®æ­å»ºä»¥åŠåç»­çš„å¼€å‘ä¸­ï¼Œå¯¹æ¶‰åŠåˆ°demo-nginxé¡¹ç›®çš„é…ç½®æˆ–Luaè¯­æ³•ç­‰æˆ‘ä¼šå¤šè®²ä¸€äº›ï¼Œè¿™éƒ¨åˆ†å¯èƒ½å¤§å®¶éƒ½æ¯”è¾ƒé™Œç”Ÿï¼Œè€Œå¯¹äºdemo-webã€demo-supporté¡¹ç›®çš„ä¸€äº›å¸¸ç”¨é…ç½®ï¼Œåˆ™ä¼šç¨åŠ ç²¾ç®€ï¼Œå› ä¸ºå¤§å®¶ä¼šæ¯”è¾ƒç†Ÿæ‚‰ï¼Œç‰¹åˆ«çš„åœ°æ–¹ä¼šå†é‡ç‚¹è¯´æ˜ã€‚</p><p>ä»¥ä¸‹é™¤äº†demo-nginxé¡¹ç›®å¤–ï¼Œä½ åœ¨æ­å»ºé¡¹ç›®æ—¶éƒ½å¯ä»¥é€šè¿‡è‡ªå·±ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆæ¥å®ç°ï¼Œåªéœ€è¦è®©ç›®æ ‡ç³»ç»Ÿè¾¾åˆ°æˆ‘ä»¬æ‰€å¸Œæœ›å®ƒå…·å¤‡çš„èƒ½åŠ›å³å¯ï¼ŒæŠ€æœ¯ä¸é™ã€‚</p><p></p><h3><strong>demo-nginxé¡¹ç›®æ­å»º</strong></h3><p>è¿™ä¸ªé¡¹ç›®ä¸»è¦æ˜¯ç”¨Luaè¯­è¨€å¼€å‘ï¼Œåœ¨ä¸ŠèŠ‚è¯¾ä¸­æˆ‘ä»¬å®‰è£…äº†OpenRestyï¼Œæœ¬åœ°åˆ›å»ºçš„nginx.confæ–‡ä»¶çš„è·¯å¾„åœ¨ ~/Documents/seckillproject/nginx/conf/nginx.confï¼Œè¿™ä¸ªæ˜¯NginxæœåŠ¡é…ç½®çš„æ ¸å¿ƒæ–‡ä»¶ï¼ŒNginxå¯åŠ¨å°±æ˜¯æ ¹æ®è¿™ä¸ªé…ç½®æ¥åšä¸€äº›åˆå§‹åŒ–å·¥ä½œçš„ã€‚</p><p>ä¸€ä¸ªnginx.confæ–‡ä»¶çš„æ­£å¸¸é…ç½®ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/24/b5/2418515a40bba14bcef425a35a5cbab5.jpg?wh=1726x1656\" alt=\"\"></p><p>è¿™é‡Œçš„â€œå…¨å±€æ¨¡å—é…ç½®â€â€œeventsæ¨¡å—é…ç½®â€ï¼Œä»¥åŠHTTPæ¨¡å—é…ç½®ä¸­çš„â€œHTTPå…¨å±€æ¨¡å—é…ç½®â€ï¼Œéƒ½æ˜¯ç›´æ¥é…ç½®åœ¨nginx.confä¸­ï¼Œå±äºæ ¸å¿ƒé…ç½®ã€‚è€Œâ€œserveræ¨¡å—é…ç½®â€ä»¥åŠä¸‹é¢çš„â€œlocationå—â€é…ç½®éƒ½æ˜¯æˆ‘ä»¬å†™ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ï¼Œæ¯”è¾ƒçµæ´»ï¼Œæ‰€ä»¥å†™åˆ°æˆ‘ä»¬çš„demo-nginxé¡¹ç›®ä¸­ï¼Œå¹¶é€šè¿‡Nginxçš„includeå…³é”®å­—å°†å¯¹åº”çš„è·¯å¾„åœ¨nginx.confä¸­çš„â€œHTTPæ¨¡å—é…ç½®â€é‡Œå¼•ç”¨è¿›æ¥ã€‚</p><p>è¿™é‡Œå…ˆç²—ç•¥åœ°ä»‹ç»ä¸€ä¸‹å„ä¸ªæ¨¡å—çš„ä½œç”¨ï¼š</p><ul>\n<li><strong>å…¨å±€æ¨¡å—é…ç½®</strong>ï¼šè¿™é‡Œä¸€èˆ¬é…ç½®Nginxçš„è¿›ç¨‹æ•°ã€æ—¥å¿—ç›®å½•ä¸çº§åˆ«ã€CPUç»‘æ ¸ç­‰ã€‚</li>\n<li><strong>eventsæ¨¡å—é…ç½®</strong>ï¼šä¸»è¦é…ç½®Nginxä½¿ç”¨çš„å·¥ä½œæ¨¡å‹ï¼Œè¿›ç¨‹è¿æ¥æ•°é™åˆ¶ç­‰ï¼›</li>\n<li><strong>HTTPæ¨¡å—é…ç½®</strong>ï¼šè¿™é‡Œå°±æ˜¯å¤„ç†HTTPè¯·æ±‚çš„ç›¸å…³é…ç½®ï¼ŒåŒ…æ‹¬ç›‘æ§çš„åŸŸåã€ç«¯å£ã€URLä»¥åŠä¸šåŠ¡ä»£ç çš„é…ç½®å¼•ç”¨ç­‰ã€‚</li>\n</ul><p></p><p>é‚£ä¹ˆåœ¨äº†è§£äº†é¡¹ç›®çš„åŸºæœ¬ç»“æ„ä¹‹åï¼Œæˆ‘ä»¬å°±å¼€å§‹åŠ¨æ‰‹æ­å»ºå§ã€‚</p><p></p><p><strong>ç¬¬ä¸€æ­¥ï¼š</strong>æˆ‘ä»¬å…ˆåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªdemo-nginxé¡¹ç›®ï¼Œè¿™é‡Œæˆ‘ç”¨çš„å¼€å‘å·¥å…·æ˜¯IDEAï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/55/c4/55eaee8109975755b2dc6453d92d9fc4.png?wh=2594x936\" alt=\"\"></p><p>è¿™é‡Œæˆ‘åˆ›å»ºäº†ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼Œä¾æ¬¡æ˜¯configã€domainã€luaã€‚å…¶ä¸­ï¼Œconfigæ–‡ä»¶å¤¹æ˜¯ç”¨æ¥å­˜æ”¾ä¸€äº›å¸¸ç”¨é…ç½®çš„ï¼Œåƒä¸€äº›å¸¸é‡é…ç½®å’Œè´Ÿè½½å‡è¡¡é…ç½®ç­‰ï¼›domainæ–‡ä»¶å¤¹ä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾â€œHTTPé…ç½®â€ä¸­çš„serveræ¨¡å—é…ç½®æ–‡ä»¶ï¼›luaæ–‡ä»¶å¤¹åˆ™ä¸»è¦ç”¨æ¥å­˜æ”¾ç”¨Luaè¯­è¨€ç¼–å†™çš„ä¸šåŠ¡é€»è¾‘ä»£ç æ–‡ä»¶ã€‚</p><p><strong>ç¬¬äºŒæ­¥ï¼š</strong>åœ¨domainæ–‡ä»¶ä¸‹ï¼Œæ–°å¢domain.comæ–‡ä»¶ï¼Œç”¨æ¥é…ç½®serverå’Œlocationã€‚</p><p><strong>ç¬¬ä¸‰æ­¥ï¼š</strong>ä¿®æ”¹æˆ‘ä»¬çš„nginx.confæ–‡ä»¶ï¼Œå¼•å…¥åˆšåˆšæ–°å»ºçš„domain.comæ–‡ä»¶ä»¥åŠluaæ–‡ä»¶å¤¹ä¸‹å³å°†è¦å†™çš„.luaæ–‡ä»¶ã€‚nginx.confå†…å®¹ä¿®æ”¹å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">worker_processes 1; #å·¥ä½œè¿›ç¨‹æ•°\nerror_log logs/error.log error;#æ—¥å¿—è·¯å¾„ &nbsp;æ—¥å¿—çº§åˆ«\nevents {\n\tworker_connections 256;#å•è¿›ç¨‹æœ€å¤§è¿æ¥æ•°\n}\nhttp {\n\tlua_package_path \"~/Documents/seckillproject/demo-nginx/lua/?.lua;;\";\n\tinclude ~/Documents/seckillproject/demo-nginx/domain/domain.com;\n}\n</code></pre><p>è¿™é‡Œlua_package_path çš„åŠŸèƒ½æ˜¯å¯¼å…¥é¡¹ç›®ä¸­çš„ .luaæ–‡ä»¶ã€‚Include æ˜¯å¯¼å…¥ä¸€äº›serveræ¨¡å—é…ç½®æ–‡ä»¶ï¼Œå°±åƒåœ¨HTMLé‡Œå¼•ç”¨JavaScriptä¸€æ ·ã€‚</p><p><strong>ç¬¬å››æ­¥ï¼š</strong>é…ç½®serverå’Œlocationï¼Œè¿™é‡Œå…ˆåªç®€å•é…ç½®ä¸€ä¸ªç›‘æ§ç«¯å£ï¼Œä»¥åŠä¸€ä¸ªè¯·æ±‚çš„åŒ¹é…URLï¼Œç®€å•è¾“å‡ºâ€œhello&nbsp;worldâ€ï¼Œé…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">server {\n&nbsp; &nbsp; listen 7081;\n&nbsp; &nbsp; location /sayhello {\n&nbsp; &nbsp; &nbsp; &nbsp; default_type text/plain;\n&nbsp; &nbsp; &nbsp; &nbsp; content_by_lua_block {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ngx.say(\"hello world!!!\")\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; }\n}\n</code></pre><p><strong>ç¬¬äº”æ­¥ï¼š</strong>å¯åŠ¨Nginxã€‚è¿˜è®°å¾—Nginxçš„å‘½ä»¤å—ï¼Ÿä¸è®°å¾—å¯ä»¥å›å¤´çœ‹çœ‹æˆ‘ä»¬ä¹‹å‰æ­å»ºOpenRestyæ—¶æ•™çš„ã€‚å¯åŠ¨Nginxä¹‹åï¼Œåœ¨ç»ˆç«¯æˆ–è€…æµè§ˆå™¨è¾“å…¥è¯·æ±‚åœ°å€ï¼Œå°±å¯ä»¥çœ‹åˆ°è¾“å‡ºç»“æœäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/cd/76/cd850cda3dea612bf19c0f605b402076.png?wh=866x245\" alt=\"å›¾ç‰‡\"></p><p>è¿™æ ·æˆ‘ä»¬çš„demo-nginxé¡¹ç›®å°±æ­å»ºå®Œæˆäº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯å¡«å……é…ç½®ä¸ä¸šåŠ¡é€»è¾‘çš„å¼€å‘äº†ã€‚</p><p></p><p>ç°åœ¨è®©æˆ‘ä»¬é©¬ä¸åœè¹„ï¼Œç»§ç»­ä¸‹ä¸€ä¸ªé¡¹ç›®çš„æ­å»ºã€‚</p><p></p><h3><strong>demo-webé¡¹ç›®æ­å»º</strong></h3><p>å› ä¸ºdemo-webé¡¹ç›®æä¾›çš„æ˜¯HTTPæ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„åŸºç¡€æ¡†æ¶ä½¿ç”¨çš„æ˜¯SpringMVCï¼Œæ–°å»ºäº†ä¸€ä¸ªmavené¡¹ç›®ï¼Œå‘½åä¸ºdemo-webï¼Œå¹¶ä¸”æ–°å»ºäº†3ä¸ªå­moduleï¼Œåˆ†åˆ«æ˜¯demo-gatewayï¼Œdemo-commonï¼Œdemo-serviceã€‚</p><p>å…¶ä¸­demo-gatewayä¸»è¦è´Ÿè´£å¯¹å¤–HTTPæ¥å£å®šä¹‰ï¼Œä»¥åŠSpringMVCç›¸å…³æ–‡ä»¶é…ç½®ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯è¦æ‰“åŒ…éƒ¨ç½²çš„moduleï¼›demo-serviceä¸»è¦ç”¨æ¥åšä¸šåŠ¡é€»è¾‘å¤„ç†ï¼›demo-commonç”¨æ¥æ”¾ä¸€äº›å…¬ç”¨æ–¹æ³•æˆ–è€…å·¥å…·ç±»ç­‰ã€‚</p><p>æ•´ä½“é¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ac/71/acdd356c114659c3a8bf2b05e4500b71.png?wh=2139x1500\" alt=\"\"></p><p>ä¹‹åè¿›è¡ŒSpringMVCç›¸å…³é…ç½®ï¼Œé…ç½®å®Œæˆåï¼Œå¯ä»¥è‡ªå·±å†™ä¸ªcontrollerï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦æ­å»ºæˆåŠŸï¼Œè¿™é‡Œå› ä¸ºéƒ½æ˜¯å¤§å®¶æ¯”è¾ƒç†Ÿæ‚‰çš„é¢†åŸŸï¼Œæ‰€ä»¥å°±ä¸åšè¿‡å¤šèµ˜è¿°äº†ã€‚</p><p></p><p>å½“demo-webé¡¹ç›®æ­å»ºå®Œæˆåï¼Œå°±å¯ä»¥å’Œæˆ‘ä»¬ä¹‹å‰æ­å»ºçš„demo-nginxé¡¹ç›®è”åŠ¨ä¸€ä¸‹äº†ï¼Œå³è¯·æ±‚å…ˆåˆ°Nginxï¼Œè¢«å…¶é…ç½®çš„locationæ‹¦æˆªï¼Œç»è¿‡å¤„ç†åå°†å…¶åˆ†å‘ç»™demo-webã€‚æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¯¹demo-nginxåšä¸€äº›ä¿®æ”¹ã€‚</p><p><strong>ç¬¬ä¸€æ­¥ï¼š</strong>åœ¨configæ–‡ä»¶å¤¹ï¼Œæ–°å»ºupstream.confçš„é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥é…ç½®æ‰“åˆ°åç«¯WebæœåŠ¡å™¨çš„IPå’Œç«¯å£å·ã€‚å¦‚æœæ˜¯çº¿ä¸Šï¼Œè¿™é‡Œå¯ä»¥é…ç½®æœåŠ¡å™¨é›†ç¾¤ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">upstream backend {\n\t&nbsp;server 127.0.0.1:8080;\n}\n</code></pre><p>å…¶ä¸­upstreamæ˜¯Nginxå…³é”®å­—ï¼Œbackendæ˜¯è‡ªå®šä¹‰åç§°ã€‚æˆ‘ä»¬äº†è§£çš„Nginxçš„è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œå°±æ˜¯åœ¨è¿™é‡Œé…ç½®çš„ã€‚ä¿®æ”¹åçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/71/e5/71557d5a71295654dbb02b29fca5a2e5.png?wh=2600x972\" alt=\"\"></p><p><strong>ç¬¬äºŒæ­¥ï¼š</strong>ä¿®æ”¹domain.comçš„serveré…ç½®æ–‡ä»¶ï¼Œæ–°å¢proxy_passé…ç½®é¡¹ã€‚æ„åœ¨å°†è¯·æ±‚åˆ†å‘ç»™åç«¯æœåŠ¡å™¨ï¼Œå…¶ä¸­backendå°±æ˜¯æˆ‘ä»¬åœ¨ç¬¬ä¸€æ­¥ä¸­è‡ªå®šä¹‰çš„åå­—ï¼Œå¦‚ä»£ç ç¬¬5è¡Œæ‰€æ ‡ï¼š</p><pre><code class=\"language-plain\">server {\n\tlisten 7081;\n\tlocation /sayhello{\n\t&nbsp;&nbsp;&nbsp;&nbsp;default_type text/plain;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass http://backend;\n\t}\n}\n</code></pre><p><strong>ç¬¬ä¸‰æ­¥ï¼š</strong>åœ¨nginx.confä¸­ï¼Œå°†upstream.confæ–‡ä»¶åŠ è½½è¿›å»ã€‚</p><pre><code class=\"language-plain\">\tworker_processes 1;\n\terror_log logs/error.log error;\n\tevents {\n\t&nbsp;&nbsp;&nbsp;&nbsp;worker_connections 256;\n\t}\n\thttp {\n\t&nbsp;&nbsp;&nbsp;&nbsp;lua_package_path \"~/Documents/seckillproject/demo-nginx/lua/?.lua;;\";\n\t&nbsp;&nbsp;&nbsp;&nbsp;include ~/Documents/seckillproject/demo-nginx/domain/domain.com;\n\t&nbsp;&nbsp;&nbsp;&nbsp;include ~/Documents/seckillproject/demo-nginx/config/upstream.conf;\n    }\n</code></pre><p><strong>ç¬¬å››æ­¥ï¼š</strong>demo-nginxä¿®æ”¹å®Œæˆåï¼Œæˆ‘ä»¬åœ¨demo-webæ–°å»ºä¸€ä¸ªcontrollerï¼Œå¹¶å¯åŠ¨ã€‚è¿™é‡Œå°±è¦é‡ç‚¹è¯´æ˜ä¸€ä¸‹äº†ï¼ŒNginxé…ç½®çš„location&nbsp;URLéœ€è¦å’Œdemo-webä¸­å®šä¹‰çš„controllerä¸‹å¯¹åº”çš„æ–¹æ³•mappingä¿æŒä¸€è‡´ï¼Œä¸ç„¶ä¸¤è€…æ˜¯ä¸²ä¸èµ·æ¥çš„ã€‚</p><p>å‡†å¤‡å®Œæˆåï¼Œæˆ‘ä»¬æ¥å¯åŠ¨ä¸€ä¸‹Nginxï¼Œåœ¨æµè§ˆå™¨è¾“å…¥è¯·æ±‚URLï¼š<a href=\"http://localhost:7081/sayhello\">http://localhost:7081/sayhello</a>ï¼Œä½ å°±ä¼šçœ‹åˆ°é¢„æœŸç»“æœï¼Œè¿™é‡Œå°±ä¸å±•ç¤ºæˆªå›¾äº†ã€‚</p><p></p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„demo-nginxä¸demo-webä¸¤ä¸ªé¡¹ç›®å°±å¯ä»¥ä¸²è”èµ·æ¥å·¥ä½œäº†ã€‚ç°åœ¨å°±åªå‰©ä¸‹ä¸€ä¸ªdemo-supporté¡¹ç›®äº†ï¼Œæˆ‘ä»¬é©¬ä¸Šç€æ‰‹æ­å»ºå®ƒã€‚</p><p></p><h3><strong>demo-supportæ­å»º</strong></h3><p>å¯ä»¥å‚è€ƒåˆšåˆšçš„æ­¥éª¤ä¸é…ç½®ã€‚é¦–å…ˆæ–°å»ºdemo-supporté¡¹ç›®ï¼Œç„¶åæ–°å»º5ä¸ªå­moduleï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/00/b1/008ddda95316ecd1ba38e5ae2342f3b1.png?wh=2133x1498\" alt=\"\"></p><ul>\n<li>demo-support-commonï¼šå­˜æ”¾ä¸€äº›åŸºæœ¬çš„å·¥å…·æ–¹æ³•æˆ–è€…å¸¸é‡ç­‰ã€‚</li>\n<li>demo-support-daoï¼šæŒä¹…å±‚ï¼Œä¸»è¦å­˜æ”¾æ•°æ®åº“ç›¸å…³çš„SQLæ–‡ä»¶ã€å®ä½“ã€æ“ä½œæ–¹æ³•ã€‚</li>\n<li>demo-support-exportï¼šå¯¹å¤–æ¥å£å®šä¹‰å±‚ï¼Œä¸»è¦å®šä¹‰æä¾›çš„RPCæ¥å£æ–¹æ³•ä»¥åŠå®ä½“ç­‰ã€‚</li>\n<li>demo-support-serviceï¼šä¸šåŠ¡é€»è¾‘å±‚ã€‚</li>\n<li>demo-support-launcherï¼šé¡¹ç›®æ–‡ä»¶é…ç½®ã€ç›‘æ§ã€æ‹¦æˆªå™¨ç­‰ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ‰“åŒ…éƒ¨ç½²moduleã€‚</li>\n</ul><p></p><p>è¿™é‡Œä¹ŸåŒæ ·ä¸åšè¿‡å¤šçš„è®²è§£ï¼Œä½ æœ€ç»ˆæ­å»ºèµ·æ¥é¡¹ç›®ï¼Œä½¿å…¶èƒ½å¤Ÿæ“ä½œæ•°æ®åº“ï¼Œå¹¶èƒ½å¤Ÿæä¾›RPCæœåŠ¡å³å¯ã€‚è¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸€ä¸‹ï¼Œå°±æ˜¯åœ¨é›†æˆRPCæ¡†æ¶Dubboæ—¶ï¼Œå› ä¸ºæ˜¯æœ¬åœ°æœåŠ¡é—´è°ƒç”¨ï¼Œæ‰€ä»¥ä¸éœ€è¦æ³¨å†Œä¸­å¿ƒï¼Œåƒä¸‹é¢è¿™æ ·é…ç½®å³å¯ï¼Œçº¿ä¸Šå†æ­£å¸¸é…ç½®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/db/50/db3234a5607018589946f04e9b9dd050.png?wh=2602x1118\" alt=\"\"><br>\n<img src=\"https://static001.geekbang.org/resource/image/31/95/31496dfb4df279ca07459a77098de095.png?wh=2603x1107\" alt=\"\"></p><p></p><h2>å°ç»“</h2><p>åœ¨è¿™èŠ‚è¯¾ä¸­æˆ‘ä»¬ä¸ºäº†å¼€å‘ä¸€ä¸ªæœ€ç®€çš„ç§’æ€ç³»ç»Ÿï¼Œè®¾è®¡äº†3ä¸ªç³»ç»Ÿé¡¹ç›®ï¼šä¸€ä¸ªæ˜¯demo-nginxï¼Œç”¨æ¥åšçœŸæ­£çš„ç½‘å…³å…¥å£ï¼›å¦ä¸€ä¸ªæ˜¯demo-webï¼Œç”¨æ¥åšä¸šåŠ¡çš„èšåˆï¼›æœ€åä¸€ä¸ªæ˜¯web-supportï¼Œç”¨æ¥åšåŸºç¡€æ•°æ®å’ŒæœåŠ¡çš„æ”¯æ’‘ã€‚</p><p>åŒæ—¶æˆ‘ä»¬ç»™æ¯ä¸ªé¡¹ç›®åšäº†æ¯”è¾ƒæ˜ç¡®çš„èŒèƒ½åˆ’åˆ†ï¼Œç„¶åæŒ‰ç…§é¡ºåºä¾æ¬¡æ­å»ºèµ·äº†3ä¸ªé¡¹ç›®ã€‚</p><p>åœ¨è¿™3ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç€é‡ä»‹ç»äº†demo-nginxé¡¹ç›®çš„æ­å»ºï¼Œå…¶ä»–ä¸¤ä¸ªå› ä¸ºæ˜¯å¤§å®¶æ¯”è¾ƒç†Ÿæ‚‰çš„å†…å®¹ï¼Œæ‰€ä»¥å°±æ²¡æœ‰åšå¤ªå¤šç€å¢¨ã€‚</p><p>ç”±äºåœ¨ä¸ŠèŠ‚è¯¾çš„OpenRestyæ­å»ºå’Œè¿™èŠ‚è¯¾çš„demo-nginxæ­å»ºæ•™å­¦é‡Œï¼Œä¸€å…±å‡ºç°äº†å¥½å‡ ä¸ªå’ŒNginxç›¸å…³çš„æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åšä¸ªå½’çº³æ€»ç»“ï¼Œä»¥é˜²ä½ æ··æ·†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/31/ee/31266d58627f134248ceebef3175daee.png?wh=1422x868\" alt=\"å›¾ç‰‡\"></p><p>é€šè¿‡è¡¨æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ¸…æ¥šæ˜äº†åœ°çœ‹åˆ°è¿™äº›æ–‡ä»¶çš„ä½œç”¨ã€‚åŒæ—¶åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„æ‰€æœ‰ä¾èµ–ç¯å¢ƒå’Œé¡¹ç›®éƒ½å·²ç»å‡†å¤‡å°±ç»ªäº†ï¼Œé‚£ä¹ˆä¸‹èŠ‚è¯¾æˆ‘ä»¬å°†æ­£å¼å¼€å§‹ç§’æ€ä¸šåŠ¡ä»£ç çš„ç¼–å†™ï¼Œæ¥å®ç°æˆ‘ä»¬è¯¾ç¨‹å¼€å¤´è®¾å®šçš„å°ç›®æ ‡ã€‚</p><p></p><h2><strong>æ€è€ƒé¢˜</strong></h2><p>è¯¾ç¨‹ä¸­å¸ƒç½®è¿‡çš„ä¸€é“æ€è€ƒé¢˜ï¼šH5åœ¨åšç°åº¦ä¸Šçº¿æ—¶ï¼Œå¦‚ä½•è®©æ–°ç‰ˆæœ¬çš„é¡µé¢è¯·æ±‚å§‹ç»ˆæ‰“åˆ°æ–°çš„ç°åº¦æœºå™¨ï¼Œè€Œè€é¡µé¢çš„è¯·æ±‚å§‹ç»ˆæ‰“åˆ°æ—§ç‰ˆæœ¬çš„æœåŠ¡ä¸Šï¼Œä¸¤è€…ä¸å‡ºç°äº¤å‰å‘¢ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/cb/13/cbb1666d0c36ab235bbyy7ee8fb09413.jpg?wh=1870x926\" alt=\"\"></p><p>ä»¥ä¸Šå°±æ˜¯è¿™èŠ‚è¯¾çš„å…¨éƒ¨å†…å®¹ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå’Œæˆ‘è®¨è®ºé—®é¢˜ï¼Œäº¤æµç»éªŒï¼</p>","neighbors":{"left":{"article_title":"02ï½œè“„åŠ¿å¾…å‘ï¼šç§’æ€ç³»ç»Ÿæ¶æ„è®¾è®¡å’Œç¯å¢ƒå‡†å¤‡","id":422016},"right":{"article_title":"04 | æŒ‡æ—¥å¯å¾…ï¼šä¸€æ­¥ä¸€æ­¥æ­å»ºç§’æ€ç³»ç»Ÿï¼ˆä¸‹ï¼‰","id":423966}},"comments":[{"had_liked":false,"id":314247,"user_name":"åˆ˜å¸…","can_delete":false,"product_type":"c1","uid":1117630,"ip_address":"","ucode":"90FD56C0395B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/0d/be/6acd4b18.jpg","comment_is_top":false,"comment_ctime":1632912623,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"91827225839","product_id":100091501,"comment_content":"H5 åœ¨åšç°åº¦ä¸Šçº¿æ—¶ï¼Œå¦‚ä½•è®©æ–°ç‰ˆæœ¬çš„é¡µé¢è¯·æ±‚å§‹ç»ˆæ‰“åˆ°æ–°çš„ç°åº¦æœºå™¨ï¼Œè€Œè€é¡µé¢çš„è¯·æ±‚å§‹ç»ˆæ‰“åˆ°æ—§ç‰ˆæœ¬çš„æœåŠ¡ä¸Šï¼Œä¸¤è€…ä¸å‡ºç°äº¤å‰å‘¢ï¼Ÿ<br>ç­”ï¼šåœ¨æ¥å£ä¸­å¢åŠ ç‰ˆæœ¬å·versionå­—æ®µï¼Œé€šè¿‡nginx+luaå°†æ–°ç‰ˆæœ¬çš„æ¥å£è¯·æ±‚è·¯ç”±åˆ°æ–°çš„æ¥å£åœ°å€","like_count":22},{"had_liked":false,"id":314330,"user_name":"ææ–Œ@28å¹´å","can_delete":false,"product_type":"c1","uid":1568021,"ip_address":"","ucode":"D53EFBDD7585F9","user_header":"https://static001.geekbang.org/account/avatar/00/17/ed/15/f1c5d6b5.jpg","comment_is_top":false,"comment_ctime":1632971882,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18812841066","product_id":100091501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œçœ‹æ‚¨çš„è¿™ä¸ªè·¯çº¿æˆ‘æƒ³æ˜¯ spring+dubbo å¤–åŠ MySQLã€Redisï¼Œè¿˜æœ‰ä¸€ä¸ªJVMå±‚é¢çš„æ¶æ„è®¾è®¡ã€‚å¯å¦è€ƒè™‘ç”¨spring boot+spring cloudå‘¢ï¼Ÿ<br><br>","like_count":4},{"had_liked":false,"id":347296,"user_name":"å°é©¬çˆ¹","can_delete":false,"product_type":"c1","uid":1570872,"ip_address":"","ucode":"139FCF2C668343","user_header":"https://static001.geekbang.org/account/avatar/00/17/f8/38/41bd3639.jpg","comment_is_top":false,"comment_ctime":1653907175,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653907175","product_id":100091501,"comment_content":"é»˜è®¤nginxä¸æ”¯æŒluaæ¨¡å—å—ï¼Œéœ€è¦ç”¨é›†æˆçš„OpenRestyï¼Ÿ","like_count":0},{"had_liked":false,"id":339666,"user_name":"superquanbin","can_delete":false,"product_type":"c1","uid":1508903,"ip_address":"","ucode":"075B0DD77FB547","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/27/9261ebc4.jpg","comment_is_top":false,"comment_ctime":1648282067,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1648282067","product_id":100091501,"comment_content":"è¯·é—®ä¸‹ä½ ä»¬æ€ä¹ˆå»ºè¡¨çš„ï¼Œæ²¡æœ‰æ‰¾åˆ°sqlæ–‡ä»¶å•Š","like_count":0,"discussions":[{"author":{"id":2313143,"avatar":"","nickname":"try","note":"","ucode":"4381C7291DB8AB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583312,"discussion_content":"å°±å‡ å¼ è¡¨ï¼Œé€šè¿‡xmlåˆ†æã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660028118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é‡åº†"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028953,"avatar":"","nickname":"Geek3340","note":"","ucode":"C64D302CD53513","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579740,"discussion_content":"è¯·é—®ä½ æ‰¾åˆ°sqlæ–‡ä»¶äº†ä¹ˆï¼Ÿæˆ‘ä¹Ÿæ²¡æ‰¾åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657642151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336025,"user_name":"saltedfish","can_delete":false,"product_type":"c1","uid":1946257,"ip_address":"","ucode":"936571E1AC4139","user_header":"https://static001.geekbang.org/account/avatar/00/1d/b2/91/cf0de36e.jpg","comment_is_top":false,"comment_ctime":1645853103,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1645853103","product_id":100091501,"comment_content":"include ~&#47;Documents&#47;seckillproject&#47;demo-nginx&#47;domain&#47;domain.com;<br>nginx å¯åŠ¨çš„æ—¶å€™æŠ¥è¿™è¡Œæœ‰é—®é¢˜ï¼š<br>nginx: [emerg] open() &quot;~&#47;Documents&#47;seckillproject&#47;nginx&#47;conf&#47;~&#47;Documents&#47;seckillproject&#47;demo-nginx&#47;domain&#47;domain.com;;&quot; failed (2: No such file or directory) in ~&#47;Documents&#47;seckillproject&#47;nginx&#47;conf&#47;nginx.conf:8","like_count":0,"discussions":[{"author":{"id":2025816,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/e9/58/7bb2c561.jpg","nickname":"è¯·åŠ¡å¿…ä¼˜ç§€","note":"","ucode":"2B7AE4EF41C972","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554746,"discussion_content":"ä½ å¥½ï¼Œè¯·é—®ä½ è¿è¡Œèµ·æ¥äº†å—  ï¼Œ æˆ‘çš„supportèµ·ä¸æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646579527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1946257,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/b2/91/cf0de36e.jpg","nickname":"saltedfish","note":"","ucode":"936571E1AC4139","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2025816,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/e9/58/7bb2c561.jpg","nickname":"è¯·åŠ¡å¿…ä¼˜ç§€","note":"","ucode":"2B7AE4EF41C972","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":555666,"discussion_content":"å¯ä»¥äº†ï¼Œæ”¹æˆç»å¯¹è·¯å¾„å°±è¡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647010509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":554746,"ip_address":""},"score":555666,"extra":""}]}]},{"had_liked":false,"id":323317,"user_name":"ğŸ‡° ğŸ‡¦ ğŸ‡³ ğŸ‡¬","can_delete":false,"product_type":"c1","uid":2402425,"ip_address":"","ucode":"22DDFFA7A3E269","user_header":"https://static001.geekbang.org/account/avatar/00/24/a8/79/aaa23207.jpg","comment_is_top":false,"comment_ctime":1637830868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637830868","product_id":100091501,"comment_content":"è€å¸ˆï¼Œdemo-nginxè¿™ä¸ªæœåŠ¡çš„åŠŸèƒ½å°±æ˜¯nginxæä¾›çš„åŠŸèƒ½å—ï¼Ÿé‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥é…ç½®nginxå‘¢ï¼Ÿæˆ‘ä¸å¤ªæ˜ç™½ã€‚æµç¨‹æ˜¯nginx-&gt;demo-nginxè¿™æ ·çš„è¿˜æ˜¯ç›´æ¥demo-nginxè¿™æ ·å•Šï¼Ÿ","like_count":0},{"had_liked":false,"id":317998,"user_name":"è´¤è›‹è›‹","can_delete":false,"product_type":"c1","uid":1046118,"ip_address":"","ucode":"0FCBCB15E94770","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/66/991b7e3a.jpg","comment_is_top":false,"comment_ctime":1635105701,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635105701","product_id":100091501,"comment_content":"nginxä¸traceå·¥å…·ç»“åˆï¼Œå¯¹å…¥å£æµé‡è¿›è¡Œæ‰“æ ‡å’Œè·¯ç”±","like_count":0},{"had_liked":false,"id":317752,"user_name":"Aha hello xzy","can_delete":false,"product_type":"c1","uid":1144272,"ip_address":"","ucode":"58A82B95BE45FD","user_header":"https://static001.geekbang.org/account/avatar/00/11/75/d0/7266644c.jpg","comment_is_top":false,"comment_ctime":1634925728,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1634925728","product_id":100091501,"comment_content":"ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰§è¡Œå‰éƒ½è¦exportï¼Œå¯ä»¥é…ç½®åˆ°ç¯å¢ƒå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2753192,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/02/a8/b8900307.jpg","nickname":"äºŒå‘","note":"","ucode":"FDD2BF6350CDC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533223,"discussion_content":"é…ç½®åˆ°ï½/.bash_profileæ–‡ä»¶é‡Œ ï¼Œ å°±ä¸ç”¨æ¯æ¬¡éƒ½æ‰§è¡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637819395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316877,"user_name":"æŸ¯å¯Ÿé‡‘","can_delete":false,"product_type":"c1","uid":1115149,"ip_address":"","ucode":"F722BF8FCD2C47","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","comment_is_top":false,"comment_ctime":1634601398,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634601398","product_id":100091501,"comment_content":"Nginx -p æŒ‡å®šè·¯å¾„ä¹‹åï¼Œé‡Œé¢çš„ include æŒ‡ä»¤è€æ˜¯ç›´æ¥è·Ÿåœ¨ pwd åé¢ï¼ŒæŠ¥æ–‡ä»¶æ‰¾ä¸åˆ°çš„é”™è¯¯ï¼Œä¸çŸ¥é“è€å¸ˆçš„ä¸ºå•¥å¯ä»¥è¿è¡Œã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":314734,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1118559,"ip_address":"","ucode":"0BEC28E0772A39","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/5f/0d24dba2.jpg","comment_is_top":false,"comment_ctime":1633362387,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633362387","product_id":100091501,"comment_content":"æ€è€ƒé¢˜ï¼Œé¡µé¢æœåŠ¡å’Œæ¥å£æœåŠ¡éƒ½æŒ‰æœºå™¨éƒ¨ç½²ï¼Œç°åº¦ä¹ŸæŒ‰ç›¸åŒæœºå™¨é¡ºåºå‘å¸ƒ","like_count":0},{"had_liked":false,"id":314276,"user_name":"nanağŸ‘„","can_delete":false,"product_type":"c1","uid":2448469,"ip_address":"","ucode":"A9A35BAED23215","user_header":"https://static001.geekbang.org/account/avatar/00/25/5c/55/d113d3ea.jpg","comment_is_top":false,"comment_ctime":1632928926,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632928926","product_id":100091501,"comment_content":"é€šè¿‡nginxé…ç½®ç­–ç•¥ï¼Œæ¥æ€è€ƒé¢˜ä¸­çš„åœºæ™¯","like_count":0},{"had_liked":false,"id":314224,"user_name":"æ— è„‘ç†Š","can_delete":false,"product_type":"c1","uid":2707697,"ip_address":"","ucode":"3CC957F4239353","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erXzA6OE2JYiboOjlZlHrFicoKsN154LnwNn4OEAbm0SGaW1IXJrbFswqvmxk8o3xbTvcBWGmLGd7zw/132","comment_is_top":false,"comment_ctime":1632906324,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632906324","product_id":100091501,"comment_content":"æ€è€ƒé¢˜è§£æ³•ï¼š<br>ä»nginxä¸Šé€šè¿‡upstreamè®¾ç½®å¯è¯·æ±‚åˆ°çš„ip:port æ¥åšç°åº¦å‘å¸ƒ<br>","like_count":0},{"had_liked":false,"id":314161,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1632882559,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632882559","product_id":100091501,"comment_content":"ç›´é¢ç—›ç‚¹ã€è“„åŠ¿å¾…å‘ã€æŒ‡æ—¥å¯å¾…â€¦â€¦ï¼Œæ ‡é¢˜è›®å¥½çš„ğŸ˜„","like_count":0}]}