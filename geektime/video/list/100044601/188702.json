{"id":188702,"title":"07 | 用Autofac增强容器能力：引入面向切面编程（AOP）的能力","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/NET-Core\">https://gitee.com/geektime-geekbang/NET-Core</a></p>","comments":[{"had_liked":false,"id":195722,"user_name":"星回","can_delete":false,"product_type":"c3","uid":1809095,"ip_address":"","ucode":"0206D622DB14F4","user_header":"https://static001.geekbang.org/account/avatar/00/1b/9a/c7/dabb2548.jpg","comment_is_top":false,"comment_ctime":1585213979,"is_pvip":false,"replies":[{"id":77159,"content":"感谢建议，近期会更新代码库，可以在代码库中讨论","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1586875729,"ip_address":"","comment_id":195722,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"感觉很多知识点都没讲到，只讲解了一些基本，更少讲到在实际项目中真正的用法，包括有哪些问题。如下面的留言中就涉及了更多的知识点，而课堂中就没讲到，如果不看留言或者根本没留言，就会遗漏很多知识点。","like_count":4,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489153,"discussion_content":"感谢建议，近期会更新代码库，可以在代码库中讨论","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586875729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174875,"user_name":"Quintos","can_delete":false,"product_type":"c3","uid":1313882,"ip_address":"","ucode":"DD1FB190599279","user_header":"https://static001.geekbang.org/account/avatar/00/14/0c/5a/3b01789e.jpg","comment_is_top":false,"comment_ctime":1580444160,"is_pvip":true,"replies":[{"id":68008,"content":"6.0太新了，课程制作的时候还没发布\n后面我会注意讲一下包的版本","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1580557960,"ip_address":"","comment_id":174875,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"Autofac.Extensions.DependencyInjection v6.0.0 下使用Inteceptor会直接抛出异常， 切换成5.0.1 就没问题","like_count":4,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482554,"discussion_content":"6.0太新了，课程制作的时候还没发布\n后面我会注意讲一下包的版本","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580557960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1756311,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cc/97/1e63d2a4.jpg","nickname":"沙漠尽头的狼","note":"","ucode":"A417E2BA797068","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164987,"discussion_content":"能指点下6.0.0版本这个异常怎么解决吗？以后总是会升级的。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1581246443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1313882,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/5a/3b01789e.jpg","nickname":"Quintos","note":"","ucode":"DD1FB190599279","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1756311,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cc/97/1e63d2a4.jpg","nickname":"沙漠尽头的狼","note":"","ucode":"A417E2BA797068","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":187924,"discussion_content":"这个应该是新版本的问题，需要等官方来fix。目前在nuget安装包的时候选择旧版本就没问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582779265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":164987,"ip_address":"","group_id":0},"score":187924,"extra":""},{"author":{"id":1756311,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cc/97/1e63d2a4.jpg","nickname":"沙漠尽头的狼","note":"","ucode":"A417E2BA797068","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1313882,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/5a/3b01789e.jpg","nickname":"Quintos","note":"","ucode":"DD1FB190599279","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":188283,"discussion_content":"嗯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582807457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":187924,"ip_address":"","group_id":0},"score":188283,"extra":""},{"author":{"id":1756311,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cc/97/1e63d2a4.jpg","nickname":"沙漠尽头的狼","note":"","ucode":"A417E2BA797068","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1313882,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/5a/3b01789e.jpg","nickname":"Quintos","note":"","ucode":"DD1FB190599279","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":188284,"discussion_content":"嗯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582807468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":187924,"ip_address":"","group_id":0},"score":188284,"extra":""}]},{"author":{"id":1808612,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/98/e4/4a57fd15.jpg","nickname":"流星","note":"","ucode":"2C64E2DE34A067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":159689,"discussion_content":"是真的，亲测可行","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580724104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212444,"discussion_content":"看一点源码的使用方式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584972642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179616,"user_name":"molingwen","can_delete":false,"product_type":"c3","uid":1201928,"ip_address":"","ucode":"FF27456FE4AD01","user_header":"https://static001.geekbang.org/account/avatar/00/12/57/08/b5e02978.jpg","comment_is_top":false,"comment_ctime":1582039488,"is_pvip":true,"replies":[{"id":70269,"content":"fromservice不支持命名注册，只支持类型注册","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1582519981,"ip_address":"","comment_id":179616,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"视频中的代码 builder.RegisterType&lt;MyServiceV2&gt;().Named&lt;IMyService&gt;(&quot;service2&quot;); 这样注入服务后，为什么在控制器里不能用fromservice的方式获取？ 而只能在configure里 this.AutofacContainer = app.ApplicationServices.GetAutofacRoot();\n\n            var service = this.AutofacContainer.ResolveNamed&lt;IMyService&gt;(&quot;service2&quot;);\n            service.ShowCode();\n去获取？ 这个获取到服务了，怎么能在控制器里调用呢？ 不好意思，我是刚刚学习，还请老师答疑解惑，谢谢！","like_count":3,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484327,"discussion_content":"fromservice不支持命名注册，只支持类型注册","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582519981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172256,"user_name":"chrishon","can_delete":false,"product_type":"c3","uid":1345470,"ip_address":"","ucode":"AABAA720940C53","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIgmWmb9ia7ekrAPk9SCEZbVGrLEFcLpB1wGScplxNibkB6L5vDJdHCJic1QNBYWaDoicRpEqI567zp2Q/132","comment_is_top":false,"comment_ctime":1579141674,"is_pvip":false,"replies":[{"id":66842,"content":"感谢提出建议，后面章节我会注意这个问题","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579169137,"ip_address":"","comment_id":172256,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"提前准备好的代码，能否在操作的时候，简单讲一下。否则注释打开一段代码后，要按暂停才能跟上节奏","like_count":3,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481679,"discussion_content":"感谢提出建议，后面章节我会注意这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579169137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202339,"user_name":"Felix","can_delete":false,"product_type":"c3","uid":1808266,"ip_address":"","ucode":"B494EB5EA6020B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/97/8a/5e927ab0.jpg","comment_is_top":false,"comment_ctime":1585971248,"is_pvip":false,"replies":[{"id":77427,"content":"AOP是个大课题，这节的设计是想表达如何集成引入AOP的能力。\n\n关于AOP，可以在git代码库issue中深入探讨。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1587041557,"ip_address":"","comment_id":202339,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"这节主要讲AOP，但是实际讲的时候却一笔带过。。。","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490561,"discussion_content":"AOP是个大课题，这节的设计是想表达如何集成引入AOP的能力。\n\n关于AOP，可以在git代码库issue中深入探讨。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587041557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202465,"avatar":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","nickname":"布凡","note":"","ucode":"346FCD332F8BFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319893,"discussion_content":"老师，git代码库中都没有开issue","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604163520,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177562,"user_name":"一区","can_delete":false,"product_type":"c3","uid":1793770,"ip_address":"","ucode":"B5142A6276E490","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/a2mRI7BYncHCL6QWfibe7g7MWc70fSsqQibu7o9PcHjicYwo5dSnAoUN75HDDRz4GXWJdpWw59yJsMwFv3t7zSiaJQ/132","comment_is_top":false,"comment_ctime":1581423672,"is_pvip":false,"replies":[{"id":69289,"content":"例如后台Job依赖的服务的生命周期，与API请求的生命周期是不一样的，为其创建一个特定的子容器，由这个子容器来管理。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1581754372,"ip_address":"","comment_id":177562,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"老师，对于子容器的理解不是很深入，何时需要用到子容器呢","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483467,"discussion_content":"例如后台Job依赖的服务的生命周期，与API请求的生命周期是不一样的，为其创建一个特定的子容器，由这个子容器来管理。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581754372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173055,"user_name":"empireMind","can_delete":false,"product_type":"c3","uid":1117405,"ip_address":"","ucode":"F2B4FFFDC009F7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJLt9GVR0GqQia3Ufk71VR73LK4N0eOgu6fn9V25RzNmA6gkvjlNycSskialu6D5dqPNicgFTCaFJGdw/132","comment_is_top":false,"comment_ctime":1579418313,"is_pvip":false,"replies":[{"id":67145,"content":"Autofac下，服务的释放与默认容器行为基本一致的。\n单例模式，则程序退出时释放。\n作用域模式，则每个作用域结束时释放，也就是每个请求结束时。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579445653,"ip_address":"","comment_id":173055,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"请问.net core下AutoFac是怎么去释放服务的？MyService实现了IDisposable接口后，Controller中ShowCode执行后没有输出Dispose方法中的内容","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481943,"discussion_content":"Autofac下，服务的释放与默认容器行为基本一致的。\n单例模式，则程序退出时释放。\n作用域模式，则每个作用域结束时释放，也就是每个请求结束时。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579445653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171775,"user_name":"Grour","can_delete":false,"product_type":"c3","uid":1808649,"ip_address":"","ucode":"E688BDC7F305AB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoHXbWPZuBKJBYiayL1qFLwKZCM76CPEwXcREia71QCiaMJ5Im5Iibt9CvQBPunQ01VVOm9xU4ia0zasYQ/132","comment_is_top":false,"comment_ctime":1579010531,"is_pvip":false,"replies":[{"id":66650,"content":"默认情况下这句不是必须的，如果你明确期望由容器来管理controller时，则需要加这句，例如你期望借助容器的AOP能力，为controller添加自定义拦截器。","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579050269,"ip_address":"","comment_id":171775,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"Controller注入的时候 AddControllersAsServices() 这个方法有必要加吗？","like_count":2,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481501,"discussion_content":"默认情况下这句不是必须的，如果你明确期望由容器来管理controller时，则需要加这句，例如你期望借助容器的AOP能力，为controller添加自定义拦截器。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579050269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174164,"user_name":"高海东","can_delete":false,"product_type":"c3","uid":1808442,"ip_address":"","ucode":"60CEB1723FD13C","user_header":"https://static001.geekbang.org/account/avatar/00/1b/98/3a/41a9d4fd.jpg","comment_is_top":false,"comment_ctime":1580038950,"is_pvip":false,"replies":[{"id":67826,"content":"第三章节会讲","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1580268665,"ip_address":"","comment_id":174164,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"可以讲讲部署到操作系统windows 的k8s环境吗","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482318,"discussion_content":"第三章节会讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580268665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501942,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoTUp6yfxfsVpHPD3picoKbAx9QY2aVQoVibpudNAkFLEkr8Gl5VibQFM1iatxUmTm2syLRFlSFK8TZEQ/132","nickname":"刘允飞","note":"","ucode":"57A6FF5E146C4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560273,"discussion_content":"海东","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649246070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173617,"user_name":"赫山老妖","can_delete":false,"product_type":"c3","uid":1808514,"ip_address":"","ucode":"BEF1B376B01032","user_header":"https://static001.geekbang.org/account/avatar/00/1b/98/82/5877a524.jpg","comment_is_top":false,"comment_ctime":1579616840,"is_pvip":false,"replies":[{"id":67339,"content":"感谢建议","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579687999,"ip_address":"","comment_id":173617,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"要是能结合具体应用示例来讲会比较好，这种完全是讲执行机制的示例，过于枯燥，难以理解记忆。","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482139,"discussion_content":"感谢建议","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579687999,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172904,"user_name":"小喵喵","can_delete":false,"product_type":"c3","uid":1062444,"ip_address":"","ucode":"FDBBB2A59DB8B6","user_header":"https://static001.geekbang.org/account/avatar/00/10/36/2c/8bd4be3a.jpg","comment_is_top":false,"comment_ctime":1579355458,"is_pvip":false,"replies":[{"id":67126,"content":"例如数据库连接对象，一般就是scope的，每个请求范围使用同一个连接对象","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579442180,"ip_address":"","comment_id":172904,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"我就只用过单例，其他能讲讲实际工作的使用场景吗？","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481898,"discussion_content":"例如数据库连接对象，一般就是scope的，每个请求范围使用同一个连接对象","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579442180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171878,"user_name":"峰","can_delete":false,"product_type":"c3","uid":1390326,"ip_address":"","ucode":"527BB65559F0B0","user_header":"https://static001.geekbang.org/account/avatar/00/15/36/f6/d65b7302.jpg","comment_is_top":false,"comment_ctime":1579049083,"is_pvip":false,"replies":[{"id":66724,"content":"ASP.NET Core 提供的中间件能力以及Filter能力其实类似AOP的能力的，除非你的需求框架不满足时，才需要引入第三方的依赖注入框架来支持特定的AOP能力","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579091023,"ip_address":"","comment_id":171878,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"Aop用的自带的吗","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481537,"discussion_content":"ASP.NET Core 提供的中间件能力以及Filter能力其实类似AOP的能力的，除非你的需求框架不满足时，才需要引入第三方的依赖注入框架来支持特定的AOP能力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579091023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220000,"user_name":"Geek_ee4d86","can_delete":false,"product_type":"c3","uid":2013090,"ip_address":"","ucode":"983008639F0C44","user_header":"","comment_is_top":false,"comment_ctime":1590133629,"is_pvip":false,"replies":[{"id":81331,"content":"使用autofac的话，services.add最终实际上还是注册到autofac里了","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1590235402,"ip_address":"","comment_id":220000,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"使用AutoFac注入服务和使用services.add注入服务有什么区别呢？AOP没有讲解一下","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496020,"discussion_content":"使用autofac的话，services.add最终实际上还是注册到autofac里了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590235402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219935,"user_name":"Geek_ee4d86","can_delete":false,"product_type":"c3","uid":2013090,"ip_address":"","ucode":"983008639F0C44","user_header":"","comment_is_top":false,"comment_ctime":1590120677,"is_pvip":false,"replies":[{"id":81332,"content":"可以这么理解","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1590235418,"ip_address":"","comment_id":219935,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"用子容器获取服务是不是就是用构造函数还有FromService获取的方式？？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496001,"discussion_content":"可以这么理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590235418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206453,"user_name":"Sebastian_G","can_delete":false,"product_type":"c3","uid":1935005,"ip_address":"","ucode":"21127B3765AC81","user_header":"","comment_is_top":false,"comment_ctime":1586863486,"is_pvip":false,"replies":[{"id":77419,"content":"MyDIServiceProviderFactory表示自定义依赖注入框架扩展的提供程序工厂对象。\n\n其它开源的第三方依赖注入组件，都是类似的实现方式来实现与ASP.NET Core的集成的","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1587040731,"ip_address":"","comment_id":206453,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"感觉代码合讲的内容关联度太低了，这节demo里的MyDI类是干什么的","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491795,"discussion_content":"MyDIServiceProviderFactory表示自定义依赖注入框架扩展的提供程序工厂对象。\n\n其它开源的第三方依赖注入组件，都是类似的实现方式来实现与ASP.NET Core的集成的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587040731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204004,"user_name":"anboy0829","can_delete":false,"product_type":"c3","uid":1883436,"ip_address":"","ucode":"73753C883E6425","user_header":"","comment_is_top":false,"comment_ctime":1586317625,"is_pvip":false,"replies":[{"id":77425,"content":"感谢指正","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1587041326,"ip_address":"","comment_id":204004,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"在上一個提問(有關屬性註冊，執行拋出異常)，後面看到子容器的程式碼沒有註解掉，\n註解之後，在測試屬性註冊就不會噴錯誤了\n using (var myscope = AutofacContainer.BeginLifetimeScope(&quot;myscope&quot;))\n{\n                var service0 = myscope.Resolve&lt;MyNameService&gt;();\n                using (var scope = myscope.BeginLifetimeScope())\n                {\n                    var service1 = scope.Resolve&lt;MyNameService&gt;();\n                    var service2 = scope.Resolve&lt;MyNameService&gt;();\n                    Console.WriteLine($&quot;service1=service2:{service1 == service2}&quot;);\n                    Console.WriteLine($&quot;service1=service0:{service1 == service0}&quot;);\n                }\n}","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491037,"discussion_content":"感谢指正","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587041326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187734,"user_name":"行走世间的都是妖怪","can_delete":false,"product_type":"c3","uid":1449694,"ip_address":"","ucode":"8ED0806F141FD8","user_header":"https://static001.geekbang.org/account/avatar/00/16/1e/de/6601a005.jpg","comment_is_top":false,"comment_ctime":1584201387,"is_pvip":false,"replies":[{"id":72446,"content":"默认Controller的构造是不使用容器的，只是它构造函数的入参会从尝试容器中获取。\n\n使用AddControllersAsServices方法可以让Controller的构造也让容器来负责，这样才能使属性注入生效","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1584240047,"ip_address":"","comment_id":187734,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"即使添加了public void ConfigureContainer(ContainerBuilder builder)，微软默认public void ConfigureServices(IServiceCollection services)还是会执行。差了些如果要在控制器里面做属性注入还要做services.Replace(ServiceDescriptor.Transient&lt;IControllerActivator, ServiceBasedControllerActivator&gt;());。这个为什么要替换？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487218,"discussion_content":"默认Controller的构造是不使用容器的，只是它构造函数的入参会从尝试容器中获取。\n\n使用AddControllersAsServices方法可以让Controller的构造也让容器来负责，这样才能使属性注入生效","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584240047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182756,"user_name":"Geek_7c4953","can_delete":false,"product_type":"c3","uid":1809168,"ip_address":"","ucode":"359745D4725D4F","user_header":"","comment_is_top":false,"comment_ctime":1582860527,"is_pvip":false,"replies":[{"id":71006,"content":"对于需要属性注入的类型，在ConfigureContainer(ContainerBuilder builder)方法中新注入即可，例如将controller重新注入：\n\nbuilder.RegisterType&lt;YourController&gt;().PropertiesAutowired();","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1583047382,"ip_address":"","comment_id":182756,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"asp.net core内置服务怎么通过autofac改变服务注入形式?比如我想把日志服务作为属性注入要怎么操作呢?","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485437,"discussion_content":"对于需要属性注入的类型，在ConfigureContainer(ContainerBuilder builder)方法中新注入即可，例如将controller重新注入：\n\nbuilder.RegisterType&amp;lt;YourController&amp;gt;().PropertiesAutowired();","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583047382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809168,"avatar":"","nickname":"Geek_7c4953","note":"","ucode":"359745D4725D4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":193134,"discussion_content":"尝试了各种姿势发现根本注入不到属性，最后copy了别人的博客示例才注入进去。\n大致看了下代码，就是用模块（module）去重写了注入逻辑。可以说整个属性注入都是自己实现的了……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583128361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173412,"user_name":"陈正文","can_delete":false,"product_type":"c3","uid":1107451,"ip_address":"","ucode":"D1DF7997BA4105","user_header":"https://static001.geekbang.org/account/avatar/00/10/e5/fb/5b186d20.jpg","comment_is_top":false,"comment_ctime":1579530138,"is_pvip":false,"replies":[{"id":67260,"content":"默认是瞬时的，也就是\nbuilder.RegisterType&lt;Service&gt;().InstancePerDependency();\n\n单例是类似这样：\nSingleInstance()\n\n作用域\nInstancePerLifetimeScope()","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579584532,"ip_address":"","comment_id":173412,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"Autofac默认RegisterType注册的对象是什么生命周期？有transient,scope,singleton的对应注册方法吗？","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482062,"discussion_content":"默认是瞬时的，也就是\nbuilder.RegisterType&amp;lt;Service&amp;gt;().InstancePerDependency();\n\n单例是类似这样：\nSingleInstance()\n\n作用域\nInstancePerLifetimeScope()","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579584532,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1312493,"avatar":"https://static001.geekbang.org/account/avatar/00/14/06/ed/5a167dda.jpg","nickname":"niceshot","note":"","ucode":"2C2BBC07A6E02D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344297,"discussion_content":"我就知道下面肯定有人会问这个。。。。关于autofac的生命周期没提过","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611395880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171724,"user_name":"Mr.Beethoven","can_delete":false,"product_type":"c3","uid":1588862,"ip_address":"","ucode":"199A3814A43DB7","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/7e/c06badd0.jpg","comment_is_top":false,"comment_ctime":1578998079,"is_pvip":false,"replies":[{"id":66648,"content":"感谢支持","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1579049761,"ip_address":"","comment_id":171724,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100044601,"comment_content":"跟着老师这个系列的视频，学了一下，精简的10几20分钟视频课，内容却很丰富，讲的也很好\n点赞~","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481484,"discussion_content":"感谢支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579049761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353755,"user_name":"丁丁历险记","can_delete":false,"product_type":"c3","uid":1661704,"ip_address":"广东","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1659752702,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100044601,"comment_content":".net6 后，引入Castle.Core 来做拦截器。nuget   安装。\n使用时 using Castle.DynamicProxy  \n\nclass Xxx :IInterceptor","like_count":1,"discussions":[{"author":{"id":2310823,"avatar":"https://static001.geekbang.org/account/avatar/00/23/42/a7/155614db.jpg","nickname":"...","note":"","ucode":"C59E93C33D1809","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621207,"discussion_content":"您好,可以麻烦您说一下怎么使用呢,我在startup中好像并不能使用.InterceptedBy(typeof(MyInterceptor)).EnableInterfaceInterceptors(),谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1686911346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257870,"user_name":"布凡","can_delete":false,"product_type":"c3","uid":1202465,"ip_address":"","ucode":"346FCD332F8BFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","comment_is_top":false,"comment_ctime":1604163222,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"Autofac 使用：\nProgram 添加\n.UseServiceProviderFactory(new AutofacServiceProviderFactory()) 注册第三方容器的入口\nStartUp 添加 \n方法 public void ConfigureContainer(ContainerBuilder builder) Autofac 的ConfigureService，\nAutofac会在 ConfigureContainer 中接管 ConfigureServices 中注册的方法\nAutofac 注册的方式：\n默认方式：\nbuilder.RegisterType&lt;MyService&gt;().As&lt;IMyService&gt;();  \nbuilder.RegisterType&lt;MyService&gt;()注册具体的实现，然后再告诉这个实现我们想要标记为哪个服务类型（一般来说就是实现了哪个接口）这个和ConfigureServices注入方式正好相反\n命名注册方式：\nbuilder.RegisterType&lt;MyServiceV2&gt;().Named&lt;IMyService&gt;(&quot;service2&quot;);\n属性注册方式：\nbuilder.RegisterType&lt;MyNameService&gt;();\nbuilder.RegisterType&lt;MyServiceV2&gt;().As&lt;IMyService&gt;().PropertiesAutowired();\n\n&#47;&#47;注入服务使用，从容器里面获取实例\nvar servicenamed = this.AutofacContainer.Resolve&lt;IMyService&gt;();\nvar service = this.AutofacContainer.ResolveNamed&lt;IMyService&gt;(&quot;service2&quot;);\n\nIInterceptor 是 Autofac的面向切面（AOP）最重要的一个接口\n","like_count":1},{"had_liked":false,"id":302155,"user_name":"؞并亲了你一大口؞随风去","can_delete":false,"product_type":"c3","uid":2257640,"ip_address":"","ucode":"38E6F3660783D7","user_header":"https://static001.geekbang.org/account/avatar/00/22/72/e8/da3c644f.jpg","comment_is_top":false,"comment_ctime":1626100258,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"            this.AutofacContainer = app.ApplicationServices.GetAutofacRoot();\n\n            var serviceName = this.AutofacContainer.Resolve&lt;IMyService&gt;();\n            serviceName.ShowCode();\n这个如果想在控制器中使用，该怎么写哇","like_count":0},{"had_liked":false,"id":293357,"user_name":"A_龙枫马树","can_delete":false,"product_type":"c3","uid":2538604,"ip_address":"","ucode":"D943C8649FCCC3","user_header":"https://static001.geekbang.org/account/avatar/00/26/bc/6c/91592de2.jpg","comment_is_top":false,"comment_ctime":1621349560,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"namespace zyfapi.Controllers\n{\n    [Route(&quot;api&#47;[controller]&#47;[action]&quot;)]\n    [ApiController]\n    public class AutofacController : ControllerBase\n    {\n        public IMessage message { get; set; }\n\n        public IActionResult Test()\n        {\n          &#47;&#47;  var message = autofaccontainer.Resolve(typeof(EMailMessage));\n            message.SendMsg(&quot;zyf&quot;);\n            return Content(message.GetHashCode().ToString());\n        }\n    }\n}\n控制器下想用autofac进行属性注入不成功","like_count":0},{"had_liked":false,"id":285395,"user_name":"辣么大","can_delete":false,"product_type":"c3","uid":1396951,"ip_address":"","ucode":"AB308B6DCA0108","user_header":"https://static001.geekbang.org/account/avatar/00/15/50/d7/f82ed283.jpg","comment_is_top":false,"comment_ctime":1616771921,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"学会了.net中的aop 感谢！","like_count":0},{"had_liked":false,"id":282680,"user_name":"吃雪糕的小红","can_delete":false,"product_type":"c3","uid":2456680,"ip_address":"","ucode":"B097C8171AA763","user_header":"https://static001.geekbang.org/account/avatar/00/25/7c/68/82c867ea.jpg","comment_is_top":false,"comment_ctime":1615362745,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"给点代码吧，简单运行一下，讲的太笼统了，不知道具体用在哪儿比较合适。","like_count":0},{"had_liked":false,"id":247600,"user_name":"Eric","can_delete":false,"product_type":"c3","uid":1575571,"ip_address":"","ucode":"7EB511C384BD7B","user_header":"https://static001.geekbang.org/account/avatar/00/18/0a/93/a189ec16.jpg","comment_is_top":false,"comment_ctime":1599753451,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"老师，你只讲了怎么把Service允许属性注入进容器，没有说其他服务该怎么使用啊，我试了很多方式发现属性注入都获取不到对象。\n\npublic void ConfigureContainer(ContainerBuilder builder)\n        {\n            builder.RegisterType&lt;A2&gt;().As&lt;A&gt;().PropertiesAutowired();\n        }\n\npublic class WeatherForecastController : ControllerBase\n    {\n        private A a { get; set; }\n     }\n\n这里面拿到的一直都是null。\n为什么Autofac看起来这么难用，好像跟springboot的autowired没法比啊。\nautofac想要属性注入还要特地声明之类的","like_count":0,"discussions":[{"author":{"id":1312493,"avatar":"https://static001.geekbang.org/account/avatar/00/14/06/ed/5a167dda.jpg","nickname":"niceshot","note":"","ucode":"2C2BBC07A6E02D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344299,"discussion_content":"你需要把WeatherForecastController当做服务一样注册进来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611396946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233191,"user_name":"秋水东行","can_delete":false,"product_type":"c3","uid":1104304,"ip_address":"","ucode":"57F2D2F81144B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/d9/b0/16b8afd9.jpg","comment_is_top":false,"comment_ctime":1594257270,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"老师好，像runtime和ASP. netcore 的源码用VS打开始终会报错，这个怎么解决？（ef的没有）","like_count":0},{"had_liked":false,"id":204000,"user_name":"anboy0829","can_delete":false,"product_type":"c3","uid":1883436,"ip_address":"","ucode":"73753C883E6425","user_header":"","comment_is_top":false,"comment_ctime":1586317192,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100044601,"comment_content":"下載的範例中，測試屬性註冊的程式時執行會拋出異常\nbuilder.RegisterType&lt;MyServiceV2&gt;().As&lt;IMyService&gt;().PropertiesAutowired();\n\nAutofac.Core.DependencyResolutionException: &#39;Unable to resolve the type &#39;DependencyInjectionAutofacDemo.Services.MyNameService&#39; because the lifetime scope it belongs in can&#39;t be located. The following services are exposed by this registration:\n- DependencyInjectionAutofacDemo.Services.MyNameService\n","like_count":0}]}