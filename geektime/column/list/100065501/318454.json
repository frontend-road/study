{"id":318454,"title":"02｜统计基础（下）：深入理解A/B测试中的假设检验","content":"<p>你好，我是博伟。</p><p>在上节课学习A/B测试指标的统计属性时，我用一句话给你简单解释了下假设检验：选取一种合适的检验方法，去验证在A/B测试中我们提出的假设是否正确。</p><p>这句话其实很抽象，所以今天这一讲，我们就具体展开下，看看假设检验是什么，以及如何利用假设检验来做出推断。</p><h2>假设检验(Hypothesis Testing)是什么？</h2><p>假设检验，顾名思义，就是要检验我们提出的假设是不是正确的，在事实上能否成立。</p><p>在统计中，我们很难获取总体数据（Population）。不过，我们可以取得样本数据（Sample），然后根据样本数据的情况产生对总体数据的假设。所以，我们所说的假设检验，其实就是检测通过样本数据产生的假设在总体数据（即事实）上是否成立。</p><p>在A/B测试的语境中，假设一般是指<strong>关于实验组和对照组指标的大小的推断。</strong></p><p>为了更加形象地帮你理解假设检验，这节课我就从一个推荐系统的案例出发，从中抽象出假设检验的基本原理和相关概念，让你在实践中学习理论，同时把理论应用到实践中去。</p><p>新闻App中的推荐系统是重要的组成部分，可以根据用户过往的浏览记录来推荐用户喜欢的内容。最近，工程团队改进了推荐系统的算法，就想通过A/B测试来验证改进的效果。</p><!-- [[[read_end]]] --><p>实验组中使用新算法，对照组中使用旧算法，然后通过点击率来表征算法的效果：推荐效果越好，点击率越高。那么，我们提出的假设就是：实验组（新算法）的点击率比对照组（旧算法）的点击率高。</p><p>你可能会有些疑惑，我们提出的“假设”，和假设检验中的“假设”是相同的吗？</p><p>其实不完全相同。</p><h2>假设检验中的“假设”是什么？</h2><p>为什么这么说呢？因为在假设检验中的“假设”是一对：零假设（Null Hypothesis）和备择假设（Alternative Hypothesis），它们是完全相反的。在A/B测试的语境下，零假设指的是实验组和对照组的指标是相同的，备择假设指的是实验组和对照组的指标是不同的。</p><p>为了更好地理解零假设和备择假设，我们可以回到推荐系统的案例中，把最开始提出的假设转化成假设检验中的零假设和备择假设：</p><ul>\n<li>零假设是，实验组和对照组的点击率是相同的。</li>\n<li>备择假设是，实验组和对照组的点击率是不同的。</li>\n</ul><p>你可能会问，我们最开始提出的假设不是“实验组的点击率比对照组的点击率高”吗？为什么备择假设中仅仅说两组的点击率不同，却没说谁大谁小呢？</p><p>要回答这个问题，我们就得先了解单尾检验（One-tailed Test）和双尾检验（Two-tailed Test）这两个概念。</p><ul>\n<li>单尾检验又叫单边检验（One-sided Test），它不仅在假设中说明了两个比较对象不同，并且还明确了谁大谁小，比如实验组的指标比对照组的指标大。</li>\n<li>双尾检验又叫双边检验（Two-sided Test），指的是仅仅在假设中说明了两个比较对象不同，但是并没有明确谁大谁小。</li>\n</ul><p>回到推荐系统案例中的最初假设，我们已经明确了实验组的点击率比对照组的高，那就应该选用单尾检验。但是，我们的备择假设却变成了两组的点击率不同，这是双尾检验的假设，为什么呢？</p><p>这就是理论和实践的不同之处，也是为什么我们觉得A/B测试的理论好掌握，但实践总出问题的原因。这里，我先告诉你结论，再给你说明为什么。结论是：<strong>在A/B测试的实践中，更推荐使用双尾检验。</strong></p><p>更推荐你使用双尾检验的原因，主要有两个。</p><p>第一个原因是，双尾检验可以让数据自身在决策中发挥更大的作用。</p><p>我们在实践中使用A/B测试，就是希望能够通过数据来驱动决策。我们要尽量减少在使用数据前产生的任何主观想法来干扰数据发挥作用。所以，双尾检验这种不需要我们明确谁大谁小的检验，更能发挥数据的作用。</p><p>第二个原因是，双尾检验可以帮助我们全面考虑变化带来的正、负面结果。</p><p>在实践中，我们期望改变可以使指标朝着好的方向变化，但是万一指标实际的变化与期望的正好相反呢？这就可以体现双尾检验的优势了。双尾检验可以同时照顾到正面和负面的结果，更接近多变的现实情况。但是单尾检验只会适用于其中一种，而且通常是我们期望的正面效果。</p><p>所以正因为我们选择双尾测试，在备择假设中我们才只说了两组不同，并没有说谁大谁小。</p><h2>假设检验中的“检验”都有哪些，该怎么选取？</h2><p>现在，我们知道了假设检验中的“假设”包括零假设和备择假设两种，那么“检验”都包括什么呢？</p><p>其实，检验有很多种，单尾检验和双尾检验，是从“假设”的角度来分类的。除此之外，常见的“检验”还可以根据比较样本的个数进行分类，包括单样本检验（One-Sample Test）、 双样本检验（Two-Sample Test）和配对检验（Paired Test）。那么问题来了，在测试中到底该选择哪种检验方法呢？</p><p>答案是：<strong>在A/B测试中，使用双样本检验</strong>。</p><p>其中的原因其实很简单，我给你解释下它们各自的适用范围，你就知道了。</p><ul>\n<li>当两组样本数据进行比较时，就用双样本检验。比如A/B测试中实验组和对照组的比较。</li>\n<li>当一组样本数据和一个具体数值进行比较时，就用单样本检验。比如，我想比较极客时间用户的日均使用时间有没有达到15分钟，这个时候，我就可以把一组样本数据（抽样所得的极客时间用户的每日使用时间）和一个具体数值（15）来进行比较。</li>\n<li>当比较同一组样本数据发生变化前和发生变化后时，就用配对检验。比如，我现在随机抽取1000个极客时间的用户，给他们“全场专栏一律1折”这个优惠，然后在这1000个人中，我们会比较他们在收到优惠前一个月的日均使用时间，和收到优惠后一个月的日均使用时间。</li>\n</ul><p>看到这里，你可能会问，我还听说过<strong>T检验</strong>（T Test）和<strong>Z检验</strong>（Z Test），那这两个检验在A/B测试中该怎么选择呢？</p><p>选择T检验还是Z检验，主要看样本量的大小和是否知道总体方差（Population Variance）：</p><ul>\n<li>当我们不知道总体方差时，使用T检验。</li>\n<li>当我们已知总体方差，且样本量大于30时，使用Z检验。</li>\n</ul><p>我还给你画了张图，你一看就明白了。</p><p><img src=\"https://static001.geekbang.org/resource/image/a9/04/a96d2d6ddeb4100b4d595d863693yy04.png?wh=6079*3575\" alt=\"\"></p><p>那么这些理论具体到A/B测试实践中，一个经验就是：<strong>均值类指标一般用T检验，概率类指标一般用Z检验（比例检验）。</strong></p><p>为什么会有这样的经验呢？</p><p>因为上节课我讲了，样本量大的情况下均值类指标是正态分布，正态分布的总体方差的计算需要知道总体中各个数据的值，这在现实中几乎做不到，因为我们能获取的只是样本数据。所以总体方差不可知，选用T检验。</p><p>而概率类指标是二项分布，二项分布的总体方差的计算不需要知道总体中各个数据的值，可以通过样本数据求得总体方差。而且现实中A/B测试的样本量一般都远大于30，所以选用Z检验。这里的<strong>比例检验</strong>（Proportion Test)是，专指用于检验概率类指标的Z检验。</p><p>讲了这么多检验，我现在来总结一下：<strong>对于A/B测试来说，要选用双尾、双样本的比例检验（概率类指标）或T检验（均值类指标）。</strong></p><p>再次回到我们的案例中来，由于点击率为概率类指标，所以这里选用双尾、双样本的比例检验。</p><h2>如何利用假设检验做出推断？</h2><p>选取了正确的假设和检验方法，接下来就要检验我们的假设是不是正确了，这在A/B测试中就是分析测试结果这一步啦。</p><h3>A/B测试可能出现的结果</h3><p>假设检验会推断出两种结果：</p><ol>\n<li>\n<p>接受零假设，拒绝备择假设，也就是说实验组和对照组的指标是相同的。</p>\n</li>\n<li>\n<p>接受备择假设，拒绝零假设，也就是说实验组和对照组的指标是不同的。</p>\n</li>\n</ol><p>但是请注意，这两个结果只是假设检验根据样本数据，通过一系列统计计算推断出的结果，并不代表事实情况（总体数据情况）。如果考虑到事实情况的话，结合假设检验的推断结果会有四种可能：</p><p><img src=\"https://static001.geekbang.org/resource/image/a8/f3/a831c6b06fede368102b38c7af6f45f3.png?wh=7759*3836\" alt=\"\"></p><p>可以看出，只有当假设检验推断的情况和事实完全相符时，推断才正确，否则就会出现两类错误。</p><p><strong>第一类错误（Type I Error)</strong>：统计上的定义是拒绝了事实上是正确的零假设。在A/B测试中，零假设是两组的指标是相同的，当假设检验推断出两组指标不同，但事实上两组指标相同时，就是第一类错误。我们把两组指标不同称作阳性（Positive）。所以，第一类错误又叫假阳性（False Positive）。</p><p>发生第一类错误的概率用α表示，也被称为<strong>显著水平</strong>（Significance Level）。“显著”是指错误发生的概率大，统计上把发生率小于5%的事件称为小概率事件，代表这类事件不容易发生。因此显著水平一般也为5%。</p><p><strong>第二类错误（Type II Error)</strong>：统计上的定义是接受了事实上是错误的零假设。在A/B测试中，当假设检验推断出两组指标相同，但事实上两组指标是不同时，就是第二类错误。我们把两组指标相同称作阴性（Negative），所以第二类错误又叫假阴性（False Negative）。发生第二类错误的概率用β表示，统计上一般定义为20%。</p><p>这两种错误的概念读起来可能比较拗口，也不太容易理解，那么我就举一个新冠病毒核酸检测的例子来给你具体解释一下。</p><p>我们在这里的零假设是：被测试者是健康的，没有携带新冠病毒。</p><p>把携带新冠病毒作为阳性，没有携带作为阴性。如果一个健康的人去检测，结果检测结果说此人携带新冠病毒，这就犯了第一类错误，拒绝了事实上正确的零假设，是假阳性。如果一个新冠肺炎患者去检测，结果检测结果说此人没有携带新冠病毒，这就犯了第二类错误，接受了事实上错误的零假设，是假阴性。</p><p>现在我们了解了假设检验推断的可能结果，那么，如何通过假设检验得到测试结果呢？</p><p>实践中常用的有两种方法：P值（P Value）法和置信区间（Confidence Interval）法。</p><h3>P值法</h3><p>在统计上，P值就是当零假设成立时，我们所观测到的样本数据出现的概率。在A/B测试的语境下，P值就是当对照组和实验组指标事实上是相同时，在A/B测试中用样本数据所观测到的“实验组和对照组指标不同”出现的概率。</p><p>如果我们在A/B测试中观测到“实验组和对照组指标不同”的概率（P值）很小，比如小于5%，是个小概率事件，虽然这在零假设成立时不太可能发生，但是确实被我们观测到了，所以肯定是我们的零假设出了问题。那么，这个时候就应该拒绝零假设，接受备择假设，即两组指标是不同的。</p><p>与此相反的是，当我们在A/B测试中观测到“实验组和对照组指标不同”的概率（P值）很大，比如70%，那么在零假设成立时，我们观测到这个事件还是很有可能的。所以这个时候我们接受零假设，拒绝备择假设，即两组指标是相同的。</p><p>在统计中，我们会用P值和显著水平α进行比较，又因为α一般取5%，所以就用P值和5%进行比较，就可以得出假设检验的结果了：</p><ul>\n<li>当P值小于5%时，我们拒绝零假设，接受备择假设，得出两组指标是不同的结论，又叫做结果显著。</li>\n<li>当P值大于5%时，我们接受零假设，拒绝备择假设，得出两组指标是相同的结论，又叫做结果不显著。</li>\n</ul><p>至于P值具体的计算，我推荐你用工具来完成，比如Python或者R：</p><ul>\n<li>比例检验，可以用Python的<a href=\"https://www.statsmodels.org/stable/generated/statsmodels.stats.proportion.proportions_ztest.html\">proportions_ztest</a>函数、R的<a href=\"https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/prop.test\">prop.test</a>函数。</li>\n<li>T检验，可以用Python的<a href=\"https://www.statsmodels.org/stable/generated/statsmodels.stats.weightstats.ttest_ind.html\">ttest_ind</a>函数、R的<a href=\"https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/t.test\">t.test</a>函数。</li>\n</ul><h3>置信区间法</h3><p>置信区间是一个范围，一般前面会跟着一个百分数，最常见的是95%的置信区间。这是什么意思呢？在统计上，对于一个随机变量来说，有95%的概率包含总体平均值（Population mean）的范围，就叫做95%的<strong>置信区间</strong>。</p><p>置信区间的统计定义其实不是特别好懂，其实你可以直接把它理解为<strong>随机变量的波动范围</strong>，95%的置信区间就是包含了整个波动范围的95%的区间。</p><p><strong>A/B测试本质上就是要判断对照组和实验组的指标是否相等，那怎么判断呢？</strong>答案就是计算实验组和对照组指标的差值δ。因为指标是随机变量，所以它们的差值δ也会是随机变量，具有一定的波动性。</p><p>这就意味着，我们就要计算出δ的置信区间，然后看看这个置信区间是否包括0。如果包括0的话，则说明δ有可能为0，意味着两组指标有可能相同；如果不包括0，则说明两组指标不同。</p><p>至于置信区间的具体的计算，我也推荐你使用Python或者R等工具完成：</p><ul>\n<li>比例检验，可以使用Python的<a href=\"https://www.statsmodels.org/stable/generated/statsmodels.stats.proportion.proportion_confint.html\">proportion_confint</a>函数、R的<a href=\"https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/prop.test\">prop.test</a>函数。</li>\n<li>T检验，可以使用Python的<a href=\"https://www.statsmodels.org/stable/generated/statsmodels.stats.weightstats.CompareMeans.tconfint_diff.html#statsmodels.stats.weightstats.CompareMeans.tconfint_diff\">tconfint_diff</a>函数、R的<a href=\"https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/t.test\">t.test</a>函数。</li>\n</ul><p>现在回到推荐系统的案例中，我会分别用P值法和置信区间法来根据A/B测试的结果进行判断。</p><ul>\n<li>实验组（新推荐算法）：样本量为43578，其中有2440个点击，点击率为5.6%。</li>\n<li>对照组（旧推荐算法）：样本量为43524，其中有2089个点击，点击率为4.8%。</li>\n</ul><p>这时候，我用R中的比例检验函数<a href=\"https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/prop.test\">prop.test</a>来计算P值和置信区间。</p><pre><code>prop.test(x = c(2440, 2089), n = c(43578, 43524), alternative = &quot;two.sided&quot;, conf.level = 0.95)\n</code></pre><p>得到了如下结果：</p><p><img src=\"https://static001.geekbang.org/resource/image/75/03/75c56fdd59dee61dea812c26c187aa03.png?wh=404*163\" alt=\"\"></p><p>可以得出P值=$1.167 e^{-7}$， 远远小于5%且接近于0，所以我们拒绝零假设，接受备择假设，并且推断出实验组和对照组指标显著不同。</p><p>同时，我们也可以得出两组指标差值δ的95%置信区间为[0.005,0.011]，不包含0，也可以推断出两组指标显著不同。</p><h2>小结</h2><p>今天这节课，我们针对A/B测试的理论基础—假设检验，学习了假设、检验，以及相关的统计概念。你只要记住以下两个知识点就可以了。</p><p>第一，对于A/B测试来说，要选用双尾、双样本的比例检验（概率类指标）或T检验（均值类指标）。这决定了你在计算分析A/B测试结果时如何选取检验的参数，所以很重要。</p><p>第二，在A/B测试实践中，计算样本量大小、指标波动性和分析测试结果的时候，会用到这些统计概念。</p><ul>\n<li>计算样本量大小时，会用到： 第一类/第二类错误及其概率α和β。</li>\n<li>计算指标波动性时，会用到：方差和置信区间。</li>\n<li>分析A/B测试结果时，会用到：各类检验、置信区间、P值。</li>\n</ul><p>本节课中的关于假设检验的概念和知识点比较琐碎，为了方便你日后理解记忆，我也给你准备了下面的导图：</p><p><img src=\"https://static001.geekbang.org/resource/image/6d/41/6dd0059d264833ce89f7acdc11b25b41.png?wh=2250*2047\" alt=\"\"></p><p>到这里我们的统计篇就告一段落了，现在你应该已经掌握了A/B测试所需的基本统计知识啦。其实，前两节的内容比较偏理论，会不太好理解。不过，理论知识的学习，如果只是填鸭式地讲，效果可能并不好。那该怎么掌握这些理论知识呢？在我这些年做A/B测试的实践中发现，要想真正把理论知识理解透，化为己用，还是需要自己多思考，多实践。等你有了一些实战后，自然就能自己体悟到理论学习的好处了。而且这时候再回过头来看理论，就会非常容易看懂。</p><p>所以，在今天的内容中，如果有哪些地方你还不能理解，那也没关系，不要给自己设置心理障碍，可以先放一放。之后的课程中，我都会运用今天讲到的理论，去解决在A/B测试中遇到的问题。你可以在学习的过程中不断回顾这些理论，或者发挥主观能动性，多查阅一些资料。等你学完整个课程，再回头看这两节理论知识，一定会发现理论原来如此简单。</p><p>那么接下来，我们就进入“基础篇”模块，去详细学习A/B测试的主要流程吧！</p><h2>思考题</h2><p>这节课涉及的统计概念都是虽然经常听到，但是难理解的，你们在学习统计中有没有对这些概念的理解有独特的心得？可以拿出来分享给大家。</p><p>欢迎在留言区写下你的思考和想法，我们可以一起交流讨论。如果你觉得有所收获，欢迎你把课程分享给你的同事或朋友，一起共同进步！</p>","comments":[{"had_liked":false,"id":316841,"user_name":"API接口调用工程师","can_delete":false,"product_type":"c1","uid":2813689,"ip_address":"","ucode":"4F20BF4EAFCBEC","user_header":"https://static001.geekbang.org/account/avatar/00/2a/ee/f9/8216a82c.jpg","comment_is_top":false,"comment_ctime":1634564042,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"53174171594","product_id":100065501,"comment_content":"是这样的 我认为作者应该把因果关系转换过来说。<br>我们在现实生活中已经观测到了A，B两种事物的样本统计值有一定差异，我们可以把这个事件命名为C。<br>但我们不知道他们所属于的总体是否有差异。<br>在这样的情况下，我们可以提出两种假设。<br>H0:总体是没有差别的 H1:总体是有差别的<br>那么p值计算的是 p(C|H0)，即零假设成立时发生事件C的概率大小。现在我们已经知道C是一个已经发生的事件，如果我们计算出来的条件概率p(C|H0)=0.01,是说明这个事件是一件非常小概率的事件，不太可能发生的，我们此时应该拒绝原假设H0这种条件，认为C不是在这种条件下发生的。<br>引用:en.wikipedia.org&#47;wiki&#47;P-value","like_count":12},{"had_liked":false,"id":269710,"user_name":"孙小军","can_delete":false,"product_type":"c1","uid":2350400,"ip_address":"","ucode":"9E7C2623739C20","user_header":"https://static001.geekbang.org/account/avatar/00/23/dd/40/918969f4.jpg","comment_is_top":false,"comment_ctime":1608760477,"is_pvip":false,"replies":[{"id":"97830","content":"你好，因为P值的前提就是零假设成立，所以我把这个前提放在句子中间了，所以我在句子的开头省略了这个前提，没省略的话句子应该是“在零假设成立的前提下，当我们在 A&#47;B 测试中观测到“实验组和对照组指标不同”的概率（P 值）很大，比如 70%，那么在零假设成立时，我们观测到这个事件还是很有可能的。”  <br>这样也就是说零假设成立的前提下还有70%的概率发生，而且我们也确实观测到了它的发生，说明这个前提是合理的，所以接受。","user_name":"作者回复","user_name_real":"Bobby","uid":"2139349","ctime":1608792255,"ip_address":"","comment_id":269710,"utype":1}],"discussion_count":17,"race_medal":0,"score":"53148368029","product_id":100065501,"comment_content":"关于对p值的理解，想请问老师：<br><br>“当我们在 A&#47;B 测试中观测到“实验组和对照组指标不同”的概率（P 值）很大，比如 70%，那么在零假设成立时，我们观测到这个事件还是很有可能的。“ 不太理解这句，零假设成立的意思是实验组和对照组指标相同，但是观测得到两组的指标不同的概率是70%，这时为什么要接受零假设呢？","like_count":12,"discussions":[{"author":{"id":2130042,"avatar":"","nickname":"LeoSeattle","note":"","ucode":"5F8C57C18E9517","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344361,"discussion_content":"我觉得作者在显著性水平和p值这一块不是很清楚. 我换一种说法给你. 在样本量给定的情况下, 犯第一类错误的减少, 必然会引起第二类错误可能性的增加. 因此, 统计上 人为的限定第一类错误的概率, 引入了显著性水平的概念. 目的就是想把第一类错误的概率控制在某一个显著性水平alpha一下.  注意alpha 并不一定是5%. 在不同的显著性水平下, 会得到不同的结果,有可能在10%的显著性水平下,拒绝原假设, 而在5%的显著性水平下就没法拒绝原假设, 这就给决策带来了歧义.  为了解决这个问题, 才引入了p-value. 所以, p值得定义 应该是 利用所有可能的样本观测值, 作出拒绝原假设的最小的显著性水平.   所以这就好理解了, p值实质上就是显著性水平最小的值 :犯第一类错误的概率最小的值.  当给定的 显著性水平5% > p这个最小值的时候, 这是犯第一类错误的概率可以忽略不计, 因此大胆的拒绝原假设.  当给定的显著性水平 5% 小于p的时候, 此时你犯第一类错误的概率很大很大 图上看就是落在了拒绝域外面, 你有极大的把握要犯第一类错误, 即使你拒绝了原假设 也是带有70%的可能性是犯大错误了. 因此, 没有办法拒绝原假设. ","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1611440642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2632395,"avatar":"https://static001.geekbang.org/account/avatar/00/28/2a/cb/85a7bfab.jpg","nickname":"502","note":"","ucode":"0EA9A76CFBCF7F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375619,"discussion_content":"假设检验基于的是小概率事件和反证法。\n小概率事件原理：发生概率小的随机事件在某一次抽样中几乎不可能发生。\n反证法：\n在AB实验中，设d = 实验组指标-对照组指标，则原假设和备择假设可以表示为 H0: d = 0 ； H1: d != 0。\n假如原假设成立，d～N(0,sigma)；我们通过实验获得的样本数据计算出d&#39;，根据原假设成立时d的分布，可以计算出d&#39;这个值出现的概率，也就是P值。\n若 d&#39; 出现的概率小于0.05，d&#39;在原假设成立的情况下是个小概率事件，实验中这个小概率事件却发生了，反证可得原假设不成立，可以拒绝原假设；\n若 d&#39; 出现的概率为0.7，表明d&#39;在原假设成立的情况下出现的概率很大，那就无法拒绝原假设。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1621775720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2474870,"avatar":"","nickname":"Geek_16f552","note":"","ucode":"3E0C6FCF45F10F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2632395,"avatar":"https://static001.geekbang.org/account/avatar/00/28/2a/cb/85a7bfab.jpg","nickname":"502","note":"","ucode":"0EA9A76CFBCF7F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592103,"discussion_content":"我觉得这个给我的理解最好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667113140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375619,"ip_address":"广东"},"score":592103,"extra":""}]},{"author":{"id":1093850,"avatar":"https://static001.geekbang.org/account/avatar/00/10/b0/da/afd19d47.jpg","nickname":"Marrbor","note":"","ucode":"9212FF26878B61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390536,"discussion_content":"可以将p-vaule 与 confidence interval 结合在一起来理解会更加清晰一点。p-value < 5%，拒绝H0假设。是指在H0为真的情况，观察到样本统计量数据的概率。p-value<5% means由随机误差造成的不同是小概率事件，倾向拒绝H0，接受H1。p-value=70% means 虽然两组统计量不同，但大概率是有随机误差造成，这个时候不能推翻H0","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1629881631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512361,"discussion_content":"你好，因为P值的前提就是零假设成立，所以我把这个前提放在句子中间了，所以我在句子的开头省略了这个前提，没省略的话句子应该是“在零假设成立的前提下，当我们在 A/B 测试中观测到“实验组和对照组指标不同”的概率（P 值）很大，比如 70%，那么在零假设成立时，我们观测到这个事件还是很有可能的。”  \n这样也就是说零假设成立的前提下还有70%的概率发生，而且我们也确实观测到了它的发生，说明这个前提是合理的，所以接受。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1608792255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1354133,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a9/95/54d1ee67.jpg","nickname":"Hugo","note":"","ucode":"3632ECCA68C4ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":543591,"discussion_content":"老师你好，我把你的句子修改如下：\n\n在零假设成立的前提下，当我们在 A/B 测试中观测到“实验组和对照组指标不同”的概率（P 值）很大，比如 99.99%，那么在零假设成立时，我们观测到这个事件还是很有可能的。\n\n如果论述成立，表示零假设成立的前提下有99.99%的概率发生“实验组和对照组指标不同”，这与原假设“实验组和对照组指标相同”不就矛盾了吗？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1641216264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":512361,"ip_address":""},"score":543591,"extra":""}]},{"author":{"id":2264679,"avatar":"https://static001.geekbang.org/account/avatar/00/22/8e/67/afb412fb.jpg","nickname":"陈威洋","note":"","ucode":"DCF84B4D3A7354","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558255,"discussion_content":"第二天看完导图的解释，才理解作者的这句话！~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648178690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2738305,"avatar":"","nickname":"Geek_c3546d","note":"","ucode":"AEE8FBCEA40F88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403248,"discussion_content":"第一段：当零假设成立时，实验组和对照组指标不同的概率很小，但还是发生了，有理由怀疑零假设（别人说100颗球里只有1个白的，你抽一次就抽到了。就有理由怀疑他的说法）\n第二段：\n当零假设成立时，实验组和对照组指标不同的概率很大，发生了，有理由相信零假设（别人说100颗球里只有70个白的，你抽一次抽到了。没有理由怀疑这个说法）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634039294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2706355,"avatar":"","nickname":"sally","note":"","ucode":"11AECDA6EF9F5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384807,"discussion_content":"这句我也被绕晕了。。。。&#34;如果我们在 A/B 测试中观测到“实验组和对照组指标不同”的概率（P 值）很小，比如小于 5%，是个小概率事件，虽然这在零假设成立时不太可能发生，但是确实被我们观测到了，所以肯定是我们的零假设出了问题。&#34;是不是0假设和备择假设写反了。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626761357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1352890,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a4/ba/befbdfae.jpg","nickname":"Patrick Pan","note":"","ucode":"90EB76AEC8F852","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340633,"discussion_content":"我也不是很懂老师这段解释。按照您的说法，当我们在 A/B 测试中观测到“实验组和对照组指标不同”的概率（P 值）小于5%，就可以拒绝零假设。那么P值等于70%，那表示观测到更多的实验组和对照组指标不同，那就有更多数据支持可以去拒绝零假设了。不明白了，为什么您还说，可以接受零假设？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610082506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":7,"child_discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1352890,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a4/ba/befbdfae.jpg","nickname":"Patrick Pan","note":"","ucode":"90EB76AEC8F852","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342639,"discussion_content":"你好，1。当我们在 A/B 测试中观测到“实验组和对照组指标不同”的概率（P 值）小于5%，就可以拒绝零假设。这个是适用于任何情况的，没有前提假设。2. 文中这段话是讲P值的定义，这里有前提假设：零假设成立的情况下。在这个前提下，当我们在 A/B 测试中观测到“实验组和对照组指标不同”的概率（P 值）很大，比如 70%，那么说明在零假设成立时，我们观测到这个事件还是很有可能的，而且我们也确实观测到了，所以这里就接受零假设。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610761165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":340633,"ip_address":""},"score":342639,"extra":""},{"author":{"id":1138434,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5f/02/ab8a506c.jpg","nickname":"胜负师","note":"","ucode":"481A3AA5D6922D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":343499,"discussion_content":"最后这句【所以这里就接受零假设】让人迷惑。我的理解是前提我们已经确定：零假设是成立的 ，也就是【两组指标相同】的理论事实。而依然观察到70%两组指标不同，是因为试验中确实发生了这样的现象，此时不是说所以就接受零假设，而是说明试验不显著，但理论上我们还是不得不接受零假设。我讲的不知对不对呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611065499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":342639,"ip_address":""},"score":343499,"extra":""},{"author":{"id":2130042,"avatar":"","nickname":"LeoSeattle","note":"","ucode":"5F8C57C18E9517","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1138434,"avatar":"https://static001.geekbang.org/account/avatar/00/11/5f/02/ab8a506c.jpg","nickname":"胜负师","note":"","ucode":"481A3AA5D6922D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344360,"discussion_content":"我理解的是 实际情况是 原假设H_0是正确的, 但是你现在观测到 备择假设H1的概率高达70%. 说明 你有70%的大可能性出现第一类错误(拒真). 因此你没有办法拒绝原假设.  我觉得作者 在这一点的翻译不是特别好 应该是fail to reject Null Hypothesis 并不是说当前接受原假设的意思. 而是现阶段的证据 不足以让我们否定原假设.  因为我们大概率犯第一类错误, 所以我们被迫接受原假设.","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1611439779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":343499,"ip_address":""},"score":344360,"extra":""}]}]},{"had_liked":false,"id":286925,"user_name":"豆丁儿","can_delete":false,"product_type":"c1","uid":2550832,"ip_address":"","ucode":"E4BDF840C15745","user_header":"https://static001.geekbang.org/account/avatar/00/26/ec/30/15aa2d42.jpg","comment_is_top":false,"comment_ctime":1617684608,"is_pvip":false,"replies":[{"id":"105305","content":"希望助你在AB测试之旅越走越远！","user_name":"作者回复","user_name_real":"Bobby","uid":"2139349","ctime":1619634368,"ip_address":"","comment_id":286925,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10207619200","product_id":100065501,"comment_content":"过来查缺补漏的，老师很专业，讲的很清楚","like_count":2,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518134,"discussion_content":"希望助你在AB测试之旅越走越远！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619634368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285194,"user_name":"Dan","can_delete":false,"product_type":"c1","uid":1064321,"ip_address":"","ucode":"9BA15ACF99ED5C","user_header":"","comment_is_top":false,"comment_ctime":1616662830,"is_pvip":false,"replies":[{"id":"105302","content":"你好！<br>实验组有没有效果是由实验结果来决定的（比较实验组和对照组的评价指标的不同），检验在这里只是告诉你这个‘不同’是不是统计显著的，这个‘不同’可以是正的也可以是负的。<br><br>正如你说的，大多数情况我们是‘希望’实验组结果更好，但是我们并没有100%确定（如果100%确定的话也就不需要实验了嘛），所以还是会有一定概率实验结果和我们预期不符，双尾检验的话会更加保险一些。","user_name":"作者回复","user_name_real":"Bobby","uid":"2139349","ctime":1619633775,"ip_address":"","comment_id":285194,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10206597422","product_id":100065501,"comment_content":"老師您好，双尾检验可以帮助我们全面考虑变化带来的正、负面结果，那如何檢驗是正面還負面結果？一般來說來我們希望實驗組(Ex:新的推薦演算法)的結果比較好，為何AB test不常使用单尾检验?","like_count":2,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517612,"discussion_content":"你好！\n实验组有没有效果是由实验结果来决定的（比较实验组和对照组的评价指标的不同），检验在这里只是告诉你这个‘不同’是不是统计显著的，这个‘不同’可以是正的也可以是负的。\n\n正如你说的，大多数情况我们是‘希望’实验组结果更好，但是我们并没有100%确定（如果100%确定的话也就不需要实验了嘛），所以还是会有一定概率实验结果和我们预期不符，双尾检验的话会更加保险一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619633775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046152,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f6/88/ee32fde9.jpg","nickname":"章光辉","note":"","ucode":"49ACA750CAF19E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380510,"discussion_content":"假设单尾检验告诉我们实验组并没有更好，那你可能就会想知道，是不是变差了？然而，单尾检验并不能告诉你这一点，你为了得到答案不得不再次开展一组实验.....","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624537444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268233,"user_name":"西西","can_delete":false,"product_type":"c1","uid":2351985,"ip_address":"","ucode":"ED0A1234FF75A1","user_header":"https://static001.geekbang.org/account/avatar/00/23/e3/71/a2a46a9b.jpg","comment_is_top":false,"comment_ctime":1608108434,"is_pvip":false,"replies":[{"id":"97439","content":"对的！你说的是A&#47;B&#47;n测试，这里面有不止一个实验组，这是后就要用实验组分别和对照组做假设检验。","user_name":"作者回复","user_name_real":"Bobby","uid":"2139349","ctime":1608174886,"ip_address":"","comment_id":268233,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10198043026","product_id":100065501,"comment_content":"如果不只两个实验可以用t或z检验吗？一个对照组两个实验组，用实验组分别和对照组做假设检验吗？","like_count":2,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511882,"discussion_content":"对的！你说的是A/B/n测试，这里面有不止一个实验组，这是后就要用实验组分别和对照组做假设检验。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608174886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342170,"user_name":"蝈蝈","can_delete":false,"product_type":"c1","uid":2444157,"ip_address":"","ucode":"F09DCCBD5A2C8D","user_header":"https://static001.geekbang.org/account/avatar/00/25/4b/7d/719b839b.jpg","comment_is_top":false,"comment_ctime":1650080343,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5945047639","product_id":100065501,"comment_content":"老师你好，在推荐算法的那个例子中，使用AB测试只能检验两个算法是否相同，如果最终推断结论是两个算法不同，那么如何判断哪个更好呢？直接根据点击率大小进行判断吗？","like_count":1},{"had_liked":false,"id":274007,"user_name":"Geek_63ee39","can_delete":false,"product_type":"c1","uid":2202096,"ip_address":"","ucode":"A41379ADD76480","user_header":"https://static001.geekbang.org/account/avatar/00/21/99/f0/ba3c0208.jpg","comment_is_top":false,"comment_ctime":1610786364,"is_pvip":false,"replies":[{"id":"102091","content":"你好，这里的话点击率p=5&#47;50=0.1, 那么总体方差就等于p*(1-p).","user_name":"作者回复","user_name_real":"Bobby","uid":"2139349","ctime":1614643486,"ip_address":"","comment_id":274007,"utype":1}],"discussion_count":5,"race_medal":0,"score":"5905753660","product_id":100065501,"comment_content":"请问老师，原文中提到：“二项分布的总体方差的计算不需要知道总体中各个数据的值，可以通过样本数据求得总体方差”。比如“对某一内容曝光50次，其点击次数“这个随机变量服从二项分布，做了一次试验，观测到有5个人点击，那么总体方差等于多少，怎么计算？","like_count":1,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513893,"discussion_content":"你好，这里的话点击率p=5/50=0.1, 那么总体方差就等于p*(1-p).","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614643486,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2202096,"avatar":"https://static001.geekbang.org/account/avatar/00/21/99/f0/ba3c0208.jpg","nickname":"Geek_63ee39","note":"","ucode":"A41379ADD76480","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342781,"discussion_content":"不会是50*0.1*0.9吧，感觉这是样本方差，而不是总体方差","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1610808684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2813087,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ec/9f/7fa3bf00.jpg","nickname":"Elaine","note":"","ucode":"BC35964F85B55B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405228,"discussion_content":"样本量大的话，样本方差可以替代总体方差。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634536023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2322613,"avatar":"https://static001.geekbang.org/account/avatar/00/23/70/b5/460ff8bf.jpg","nickname":"龙虾","note":"","ucode":"176AD02ABAA71A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392371,"discussion_content":"这边有同样疑惑，这个应该是样本方差吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630983577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2202096,"avatar":"https://static001.geekbang.org/account/avatar/00/21/99/f0/ba3c0208.jpg","nickname":"Geek_63ee39","note":"","ucode":"A41379ADD76480","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2322613,"avatar":"https://static001.geekbang.org/account/avatar/00/23/70/b5/460ff8bf.jpg","nickname":"龙虾","note":"","ucode":"176AD02ABAA71A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548785,"discussion_content":"我认为文中说的“二项分布的总体方差的计算不需要知道总体中各个数据的值，可以通过样本数据求得总体方差”是不正确的，通过观测到的样本只能计算出样本方差，它是总体方差的相合估计量，但绝不能说样本方差等于总体方差","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643365731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":392371,"ip_address":""},"score":548785,"extra":""}]}]},{"had_liked":false,"id":267621,"user_name":"皓昊","can_delete":false,"product_type":"c1","uid":2288986,"ip_address":"","ucode":"8CCCF3700DAC3E","user_header":"https://static001.geekbang.org/account/avatar/00/22/ed/5a/a7687583.jpg","comment_is_top":false,"comment_ctime":1607848639,"is_pvip":false,"replies":[{"id":"97437","content":"你好，python的这个函数是计算出两个比例的两个置信区间，所以输出有4个数，建议用R的prop.test, 得出的结果是两个比例差值的置信区间。","user_name":"作者回复","user_name_real":"Bobby","uid":"2139349","ctime":1608174453,"ip_address":"","comment_id":267621,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5902815935","product_id":100065501,"comment_content":"老师，采用python 进行置信区间法检验，得到ci_low,ci_upp两个参数，这两个参数都是区间值，如下。这两个参数的区间该怎么理解呢。<br><br>ci_low,ci_upp=proportion_confint(counts,nobs,alpha=0.05,method=&#39;normal&#39;)<br>print(&#39;ci_low:{0},ci_upp:{1}&#39;.format(ci_low,ci_upp))<br>ci_low:[0.053833   0.04707099],ci_upp:[0.05815011 0.05117941]","like_count":1,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511698,"discussion_content":"你好，python的这个函数是计算出两个比例的两个置信区间，所以输出有4个数，建议用R的prop.test, 得出的结果是两个比例差值的置信区间。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608174453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1353212,"avatar":"https://static001.geekbang.org/account/avatar/00/14/a5/fc/0bde70a0.jpg","nickname":"zzz慧敏","note":"","ucode":"B7D206B5747092","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":545820,"discussion_content":"所以用Python怎么做？\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642059253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":511698,"ip_address":""},"score":545820,"extra":""}]}]},{"had_liked":false,"id":267588,"user_name":"Geek_0e2f02","can_delete":false,"product_type":"c1","uid":2367351,"ip_address":"","ucode":"1323FBBC99B6C0","user_header":"","comment_is_top":false,"comment_ctime":1607837619,"is_pvip":false,"replies":[{"id":"97432","content":"你好，实践中可以这么来用，但是这种理解不太对哈，Z检验和T检验的根本区别是总体方差是否已知， 在样本量很大时两种检验得到的结果其实是相似的。","user_name":"作者回复","user_name_real":"Bobby","uid":"2139349","ctime":1608172329,"ip_address":"","comment_id":267588,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5902804915","product_id":100065501,"comment_content":"t检验就是小样本情况下的z检验，能用Z检验的地方都可以用t检验，可以这么理解吗，老师","like_count":1,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511685,"discussion_content":"你好，实践中可以这么来用，但是这种理解不太对哈，Z检验和T检验的根本区别是总体方差是否已知， 在样本量很大时两种检验得到的结果其实是相似的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608172329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267109,"user_name":"Kendal","can_delete":false,"product_type":"c1","uid":1400355,"ip_address":"","ucode":"93E518D5DFFF9A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIFDmC78F2ciaDVn24E36emK6mE43ZsRxeLeGHVM9IqeVn0uQabzO2Kdc9JNTOKBUeghJbOBpww2EA/132","comment_is_top":false,"comment_ctime":1607599284,"is_pvip":false,"replies":[{"id":"96985","content":"嗯嗯在第9节课中会讲到如果控制power（1-beta)的！","user_name":"作者回复","user_name_real":"Bobby","uid":"2139349","ctime":1607654984,"ip_address":"","comment_id":267109,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5902566580","product_id":100065501,"comment_content":"后面会讲如何控制 alpha和beta么？比如不是常见的5%，20%。是通过样本数量来控制么？","like_count":1,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511508,"discussion_content":"嗯嗯在第9节课中会讲到如果控制power（1-beta)的！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607654984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2273862,"avatar":"https://static001.geekbang.org/account/avatar/00/22/b2/46/63e7d355.jpg","nickname":"tao","note":"","ucode":"75C2BA2D182AD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334304,"discussion_content":"我的理解是一般事先人为选定一个参数（如alpha），再得到另一个参数power(1-beta)并由此得出相应的样本量。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607791168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2352031,"avatar":"","nickname":"fh@fb","note":"","ucode":"A1916BDE481589","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333816,"discussion_content":"这两个参数用来做统计推断，不由样本量决定。选定alpha beta可以算出需要的样本量","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607620393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266998,"user_name":"Shehla","can_delete":false,"product_type":"c1","uid":2076709,"ip_address":"","ucode":"92F93EEA65DBEC","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b0/25/8c85512a.jpg","comment_is_top":false,"comment_ctime":1607567072,"is_pvip":false,"replies":[{"id":"96924","content":"博伟老师的声音是不是也很好听^_^","user_name":"编辑回复","user_name_real":"李辰洋","uid":"2189689","ctime":1607567678,"ip_address":"","comment_id":266998,"utype":2}],"discussion_count":1,"race_medal":0,"score":"5902534368","product_id":100065501,"comment_content":"非常好，逻辑清晰，地铁上听着也很方便，感谢","like_count":1,"discussions":[{"author":{"id":2189689,"avatar":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","nickname":"🐑","note":"","ucode":"DE34B3B14287D1","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511475,"discussion_content":"博伟老师的声音是不是也很好听^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607567678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361022,"user_name":"dog_brother","can_delete":false,"product_type":"c1","uid":1619597,"ip_address":"北京","ucode":"9F64D3C6D815FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6OV33jHia3U9LYlZEx2HrpsELeh3KMlqFiaKpSAaaZeBttXRAVvDXUgcufpqJ60bJWGYGNpT7752w/132","comment_is_top":false,"comment_ctime":1667121547,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1667121547","product_id":100065501,"comment_content":"P值和置信区间，都是针对概率类指标的假设检验方法，有没有针对均值类指标的假设检验方法呢？","like_count":0},{"had_liked":false,"id":342325,"user_name":"gjbbjj","can_delete":false,"product_type":"c1","uid":1719540,"ip_address":"","ucode":"E7A715CD283545","user_header":"https://static001.geekbang.org/account/avatar/00/1a/3c/f4/4013984e.jpg","comment_is_top":false,"comment_ctime":1650194680,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1650194680","product_id":100065501,"comment_content":"太难了，看都看不懂，很痛苦","like_count":0,"discussions":[{"author":{"id":1094549,"avatar":"https://static001.geekbang.org/account/avatar/00/10/b3/95/77f5aa52.jpg","nickname":"不管","note":"","ucode":"49C35544E8A6D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583595,"discussion_content":"是的 讲得不通俗易懂","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1660224323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332287,"user_name":"Geek_36d3e5","can_delete":false,"product_type":"c1","uid":2026278,"ip_address":"","ucode":"92C358AD71031B","user_header":"","comment_is_top":false,"comment_ctime":1643160513,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1643160513","product_id":100065501,"comment_content":"而概率类指标是二项分布，二项分布的总体方差的计算不需要知道总体中各个数据的值，可以通过样本数据求得总体方差，这个不是很理解","like_count":0},{"had_liked":false,"id":332181,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1643083129,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1643083129","product_id":100065501,"comment_content":"好难理解P值","like_count":0},{"had_liked":false,"id":332158,"user_name":"loki","can_delete":false,"product_type":"c1","uid":2170863,"ip_address":"","ucode":"3340C88A5A4CD9","user_header":"https://static001.geekbang.org/account/avatar/00/21/1f/ef/8bb3fe48.jpg","comment_is_top":false,"comment_ctime":1643075223,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643075223","product_id":100065501,"comment_content":"您好，例子中的点击也属于二项分布，为啥这里没有像之前的下载例子中那样先按照日聚合再求P值呢？","like_count":0},{"had_liked":false,"id":329526,"user_name":"Geek_94a14b","can_delete":false,"product_type":"c1","uid":2863727,"ip_address":"","ucode":"192ED711C68AFF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep2z61oKAgTsG1T5vPvNVxQ7uwGoux08ia1B7t7ovULttq8YWfSg04g4ichqVVnqiaVeRjicpicsD77xwQ/132","comment_is_top":false,"comment_ctime":1641388556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641388556","product_id":100065501,"comment_content":"我用Python测试案例的数据，得出来P值为0。这是为什么?能不能在正文里加一个Python的P值计算代码","like_count":0},{"had_liked":false,"id":326596,"user_name":"求知鸟","can_delete":false,"product_type":"c1","uid":1309134,"ip_address":"","ucode":"76249BB4897629","user_header":"https://static001.geekbang.org/account/avatar/00/13/f9/ce/4985c6fc.jpg","comment_is_top":false,"comment_ctime":1639575545,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639575545","product_id":100065501,"comment_content":"查阅了书籍，当总体方差已知，无论样本量大小，都服从Z检验。当总体方差未知，样本量大于30，用Z检验，样本量小于30，用t检验(自由度n-1)","like_count":0},{"had_liked":false,"id":326464,"user_name":"无绊","can_delete":false,"product_type":"c1","uid":2866148,"ip_address":"","ucode":"6453F5984374A0","user_header":"https://static001.geekbang.org/account/avatar/00/2b/bb/e4/2594a4bf.jpg","comment_is_top":false,"comment_ctime":1639535389,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639535389","product_id":100065501,"comment_content":"零假设和备择假设的理解可参考https:&#47;&#47;www.jianshu.com&#47;p&#47;65d0d39d03bd","like_count":0},{"had_liked":false,"id":321908,"user_name":"码农Kevin亮","can_delete":false,"product_type":"c1","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1637109077,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637109077","product_id":100065501,"comment_content":"请问老师，实践中有这么一个例子，不知道应该用什么检验比较合适。<br>在量化交易领域，我们需要判决一个交易策略是否已失效，我们有一堆回测交易历史例如回测过去一年的行情，产生了一百笔完整的开平仓交易，于是我们可以算出回测样本的均值与标准差。<br>然后我们会把策略放到实盘中运行观察实盘的交易情况。我们的目标是通过计算实盘交易的统计值与回测统计值进行检验，尽早发现策略的异常情况并及时停止策略运行。<br>所以我的疑问是，怎样通过最少的实盘交易数据来进行检验？最少的检验样本可以是多少笔数据？","like_count":0},{"had_liked":false,"id":320728,"user_name":"风吹","can_delete":false,"product_type":"c1","uid":2840190,"ip_address":"","ucode":"FCECEBC136D2D0","user_header":"https://static001.geekbang.org/account/avatar/00/2b/56/7e/773fd002.jpg","comment_is_top":false,"comment_ctime":1636471926,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636471926","product_id":100065501,"comment_content":"老师您好，关于均值型指标有一个疑问：比如想看一个新界面能不能提高用户的日均使用时长，实验组和对照组分别抽取了10000个用户的一个月使用记录，那么这时候如何能判断10000个用户的日均使用时长是接近正态分布的呢？如果说因为日均是一个月的数据求均值得到的，因此日均数据是接近正态分布，那有一个问题就是，每个用户的日常使用时间的均值肯定是不一样的，那么最后每个用户的日均时长服从的是不同均值的正态分布，那怎么能进行检验呢？","like_count":0},{"had_liked":false,"id":316743,"user_name":"Elaine","can_delete":false,"product_type":"c1","uid":2813087,"ip_address":"","ucode":"BC35964F85B55B","user_header":"https://static001.geekbang.org/account/avatar/00/2a/ec/9f/7fa3bf00.jpg","comment_is_top":false,"comment_ctime":1634535936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634535936","product_id":100065501,"comment_content":"95%置信区间从频率角度来看，如果我们重复抽样100次，有95次置信区间包含μ。在A&#47;B test里，μ等于原假设里的差值0。如果0在95%置信区间里，我们接受原假设。反之，拒绝原假设。","like_count":0},{"had_liked":false,"id":311328,"user_name":"Geek_9dceb7","can_delete":false,"product_type":"c1","uid":2756583,"ip_address":"","ucode":"218DD3E304EA6D","user_header":"","comment_is_top":false,"comment_ctime":1631174298,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631174298","product_id":100065501,"comment_content":"人均播放时长，假设用户有100万，不是都可以算出整体的方差吗，为什么说现实中基本不可能知道方差","like_count":0},{"had_liked":false,"id":306638,"user_name":"不知太平","can_delete":false,"product_type":"c1","uid":1294237,"ip_address":"","ucode":"E97F7F21EAA1ED","user_header":"https://static001.geekbang.org/account/avatar/00/13/bf/9d/ea358c9b.jpg","comment_is_top":false,"comment_ctime":1628653680,"is_pvip":false,"replies":[{"id":"112223","content":"你好，其实工作中还是要对两组的提升有个大概的合理估计，这个可以从相关指标的波动范围，历史上AB测试所达到的提升效果等等这些来判断，因为在估算样本量时也需要知道提升大致是多少来帮助我们决定实验要跑多久。","user_name":"作者回复","user_name_real":"Bobby","uid":"2139349","ctime":1630363224,"ip_address":"","comment_id":306638,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1628653680","product_id":100065501,"comment_content":"老师，你好。我工作中在做AB测试的时候，定的目标是实验组比对照组目标转化率高30%，实际发现30%这个数字是否合理很难确定。是不是说如果用假设检验验证的话，就不用定这个数值，只需要判断两组是否显著不同，如果是，且实验组转化率比对照组高，就可以认为实验组成功了？","like_count":0,"discussions":[{"author":{"id":2139349,"avatar":"https://static001.geekbang.org/account/avatar/00/20/a4/d5/b8670ef1.jpg","nickname":"Bobby","note":"","ucode":"C7879056883FE2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524850,"discussion_content":"你好，其实工作中还是要对两组的提升有个大概的合理估计，这个可以从相关指标的波动范围，历史上AB测试所达到的提升效果等等这些来判断，因为在估算样本量时也需要知道提升大致是多少来帮助我们决定实验要跑多久。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630363224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1093850,"avatar":"https://static001.geekbang.org/account/avatar/00/10/b0/da/afd19d47.jpg","nickname":"Marrbor","note":"","ucode":"9212FF26878B61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390537,"discussion_content":"H1假设是两组统计量不同，在做检验的时候，会将观测到的值代入运算过程，由此算出的p-value和confidence interval 来做决策。回到你的问题，30%这值是需要代入计算的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629882011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}