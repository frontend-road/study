{"id":240678,"title":"37 | 实战演练（七）：集成分布式追踪工具","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-servicemesh\">https://gitee.com/geektime-geekbang/geektime-servicemesh</a></p>","comments":[{"had_liked":false,"id":285791,"user_name":"林树煌","can_delete":false,"product_type":"c3","uid":1960405,"ip_address":"","ucode":"048CB18DA26257","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e9/d5/6c0edfb9.jpg","comment_is_top":false,"comment_ctime":1617014424,"is_pvip":false,"replies":[{"id":104297,"content":"应该是支持的，我没有尝试过，你可以根据官方的步骤测试一下：https:&#47;&#47;skywalking.apache.org&#47;blog&#47;2020-12-03-obs-service-mesh-with-sw-and-als&#47;","user_name":"作者回复","user_name_real":"马若飞","uid":1046394,"ctime":1617870476,"ip_address":"","comment_id":285791,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"老师，你好，我这边试过用istio+skywalking，发现拓扑图能出来，但是链路追踪出不来，是因为两者tracing协议不同吗？","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"马若飞","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517783,"discussion_content":"应该是支持的，我没有尝试过，你可以根据官方的步骤测试一下：https://skywalking.apache.org/blog/2020-12-03-obs-service-mesh-with-sw-and-als/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617870476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1044374,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ef/96/eb1a0bd7.jpg","nickname":"wingtch","note":"","ucode":"C84A52C2B7BF87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401024,"discussion_content":"这个应该跟istio版本有关系。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633526031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224358,"user_name":"🔜","can_delete":false,"product_type":"c3","uid":1224046,"ip_address":"","ucode":"E75A44829D9ED8","user_header":"https://static001.geekbang.org/account/avatar/00/12/ad/6e/f08676bf.jpg","comment_is_top":false,"comment_ctime":1591353562,"is_pvip":false,"replies":[{"id":82779,"content":"不加是因为你部署的all-in-one的jaeger，如果在线上环境可能不是用allinone这种，是需要加agent的。当然，也可以使用daemonset的agent，就不用注入了。具体可以看看jaeger的官方文档","user_name":"作者回复","user_name_real":"马若飞","uid":1046394,"ctime":1591599557,"ip_address":"","comment_id":224358,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"我不加jager agent 也能看到trace，所以到底要不要加呢。","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"马若飞","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497451,"discussion_content":"不加是因为你部署的all-in-one的jaeger，如果在线上环境可能不是用allinone这种，是需要加agent的。当然，也可以使用daemonset的agent，就不用注入了。具体可以看看jaeger的官方文档","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591599557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222434,"user_name":"Charles","can_delete":false,"product_type":"c3","uid":1201560,"ip_address":"","ucode":"C8C8A4F2B6C20F","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/98/a49061ab.jpg","comment_is_top":false,"comment_ctime":1590806215,"is_pvip":false,"replies":[{"id":82053,"content":"是的，istio的追踪对应用不透明，要求应用服务之间要传递b3头，咱们的httpbin服务是没有的，为方便起见用bookinfo演示","user_name":"作者回复","user_name_real":"马若飞","uid":1046394,"ctime":1590837015,"ip_address":"","comment_id":222434,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100049401,"comment_content":"为啥要将jeager-agent注入到agent中, demo环境的创建的应用没有注入？每一个接入分布式追踪的应用都要声明b3的header吗","like_count":0,"discussions":[{"author":{"id":1046394,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f7/7a/55618020.jpg","nickname":"马若飞","note":"","ucode":"3D0327329A10AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496792,"discussion_content":"是的，istio的追踪对应用不透明，要求应用服务之间要传递b3头，咱们的httpbin服务是没有的，为方便起见用bookinfo演示","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590837015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}