{"id":646987,"title":"14ï½œé“¾å¼è°ƒç”¨ï¼Œç”¨LangChainç®€åŒ–å¤šæ­¥æç¤ºè¯­","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ–‡æµ©ã€‚</p><p>OpenAIçš„å¤§è¯­è¨€æ¨¡å‹ï¼Œåªæ˜¯æä¾›äº†ç®€ç®€å•å•çš„Completionå’ŒEmbeddingè¿™æ ·ä¸¤ä¸ªæ ¸å¿ƒæ¥å£ã€‚ä½†æ˜¯ä½ ä¹Ÿçœ‹åˆ°äº†ï¼Œåœ¨è¿‡å»çš„13è®²é‡Œï¼Œé€šè¿‡åˆç†ä½¿ç”¨è¿™ä¸¤ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å®Œæˆäº†å„ç§å„æ ·å¤æ‚çš„ä»»åŠ¡ã€‚</p><ul>\n<li>é€šè¿‡æç¤ºè¯­ï¼ˆPromptï¼‰é‡ŒåŒ…å«å†å²çš„èŠå¤©è®°å½•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè®©AIæ ¹æ®ä¸Šä¸‹æ–‡æ­£ç¡®åœ°å›ç­”é—®é¢˜ã€‚</li>\n<li>é€šè¿‡å°†Embeddingæå‰ç´¢å¼•å¥½å­˜èµ·æ¥ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè®©AIæ ¹æ®å¤–éƒ¨çŸ¥è¯†å›ç­”é—®é¢˜ã€‚</li>\n<li>è€Œé€šè¿‡å¤šè½®å¯¹è¯ï¼Œå°†AIè¿”å›çš„ç­”æ¡ˆæ”¾åœ¨æ–°çš„é—®é¢˜é‡Œï¼Œæˆ‘ä»¬èƒ½å¤Ÿè®©AIå¸®æˆ‘ä»¬ç»™è‡ªå·±çš„ä»£ç æ’°å†™å•å…ƒæµ‹è¯•ã€‚</li>\n</ul><p>è¿™äº›æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå®ç”¨çš„è‡ªç„¶è¯­è¨€ç±»åº”ç”¨é‡Œå¸¸è§çš„æ¨¡å¼ã€‚æˆ‘ä¹‹å‰ä¹Ÿéƒ½é€šè¿‡ä»£ç ä¸ºä½ æ¼”ç¤ºè¿‡å…·ä½“çš„åšæ³•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ¯æ¬¡å†™åº”ç”¨çš„æ—¶å€™ï¼Œéƒ½éœ€è¦è‡ªå·±å†å»OpenAIæä¾›çš„åŸå§‹APIé‡Œåšä¸€éï¼Œé‚£å°±å¤ªéº»çƒ¦äº†ã€‚äºæ˜¯ï¼Œå¼€æºç¤¾åŒºå°±æœ‰äººå°†è¿™äº›å¸¸è§çš„éœ€æ±‚å’Œæ¨¡å¼æŠ½è±¡äº†å‡ºæ¥ï¼Œå¼€å‘äº†ä¸€ä¸ªå«åšLangchainçš„å¼€æºåº“ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨LangChainæ¥å¿«é€Ÿå®ç°ä¹‹å‰æˆ‘ä»¬åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹å®ç°è¿‡çš„åŠŸèƒ½ã€‚ä»¥åŠæˆ‘ä»¬å¦‚ä½•è¿›ä¸€æ­¥åœ°ï¼Œå°†Langchainå’Œæˆ‘ä»¬çš„ä¸šåŠ¡ç³»ç»Ÿæ•´åˆï¼Œå®Œæˆæ›´å¤æ‚ã€æ›´æœ‰å®ç”¨ä»·å€¼çš„åŠŸèƒ½ã€‚</p><h2>ä½¿ç”¨Langchainçš„é“¾å¼è°ƒç”¨</h2><p>å¦‚æœä½ è§‚å¯Ÿå¾—æ¯”è¾ƒä»”ç»†çš„è¯ï¼Œä½ ä¼šå‘ç°åœ¨<a href=\"https://time.geekbang.org/column/article/646363\">ç¬¬ 11 è®²</a>æˆ‘ä»¬ä½¿ç”¨llama-indexçš„æ—¶å€™ï¼Œå°±å·²ç»è£…å¥½LangChainäº†ã€‚llama-indexä¸“æ³¨äºä¸ºå¤§è¯­è¨€æ¨¡å‹çš„åº”ç”¨æ„å»ºç´¢å¼•ï¼Œè™½ç„¶Langchainä¹Ÿæœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†è¿™ä¸€ç‚¹å¹¶ä¸æ˜¯Langchainçš„ä¸»è¦å–ç‚¹ã€‚Langchainçš„ç¬¬ä¸€ä¸ªå–ç‚¹å…¶å®å°±åœ¨å®ƒçš„åå­—é‡Œï¼Œä¹Ÿå°±æ˜¯<strong>é“¾å¼è°ƒç”¨</strong>ã€‚</p><!-- [[[read_end]]] --><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä½¿ç”¨ChatGPTçš„ä¾‹å­ï¼Œä½ å°±èƒ½ç†è§£ä¸ºä»€ä¹ˆä¼šæœ‰é“¾å¼è°ƒç”¨çš„éœ€æ±‚äº†ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒGPT-3çš„åŸºç¡€æ¨¡å‹é‡Œé¢ï¼Œä¸­æ–‡çš„è¯­æ–™å¾ˆå°‘ã€‚ç”¨ä¸­æ–‡é—®å®ƒé—®é¢˜ï¼Œå¾ˆå¤šæ—¶å€™å®ƒå›ç­”å¾—ä¸å¥½ã€‚æ‰€ä»¥æœ‰æ—¶å€™ï¼Œæˆ‘ä¼šè¿‚å›å¤„ç†ä¸€ä¸‹ï¼Œå…ˆæŠŠä¸­æ–‡é—®é¢˜ç»™AIï¼Œè¯·å®ƒç¿»è¯‘æˆè‹±æ–‡ï¼Œç„¶åå†æŠŠè‹±æ–‡é—®é¢˜è´´è¿›å»æé—®ï¼Œå¾—åˆ°ä¸€ä¸ªè‹±æ–‡ç­”æ¡ˆã€‚æœ€åï¼Œå†è¯·AIæŠŠè‹±æ–‡ç­”æ¡ˆç¿»è¯‘å›ä¸­æ–‡ã€‚å¾ˆå¤šæ—¶å€™ï¼Œé—®é¢˜çš„ç­”æ¡ˆä¼šæ›´å‡†ç¡®ä¸€ç‚¹ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„æˆªå›¾é‡Œï¼Œæˆ‘å°±è¯·å®ƒç®€å•ä»‹ç»ä¸€ä¸‹Stable Diffusionçš„åŸç†æ˜¯ä»€ä¹ˆã€‚</p><p><span class=\"reference\">æ³¨ï¼šStable Diffusionæ˜¯ä¸€ä¸ªçƒ­é—¨çš„å¼€æºAIç”»å›¾å·¥å…·ï¼Œåé¢æˆ‘ä»¬åœ¨ä»‹ç»ç”¨AIç”Ÿæˆå›¾ç‰‡çš„æ—¶å€™ä¼šç”¨åˆ°ã€‚</span></p><h3>äººå·¥é“¾å¼è°ƒç”¨</h3><p><img src=\"https://static001.geekbang.org/resource/image/b9/ba/b904189cc5e23c5015aae7f6736f5dba.png?wh=697x796\" alt=\"å›¾ç‰‡\" title=\"å…ˆè®©AIæŠŠä¸­æ–‡é—®é¢˜ç¿»è¯‘æˆè‹±æ–‡ï¼Œå†ç›´æ¥æŠŠè‹±æ–‡é—®é¢˜è´´è¿›å»å¾—åˆ°è‹±æ–‡ç­”æ¡ˆ\"></p><p><img src=\"https://static001.geekbang.org/resource/image/27/44/272869ac3fb95c57674843264eb62c44.png?wh=714x770\" alt=\"å›¾ç‰‡\" title=\"æˆ‘ä»¬å†è¯·å®ƒç¿»è¯‘ä¸€ä¸‹è‹±æ–‡ç­”æ¡ˆ\"></p><p>å¦‚æœç”¨APIæ¥å®ç°è¿™ä¸ªè¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªé“¾å¼è°ƒç”¨çš„è¿‡ç¨‹ã€‚</p><ol>\n<li>æˆ‘ä»¬å…ˆè°ƒç”¨OpenAIï¼ŒæŠŠç¿»è¯‘è¯·æ±‚å’ŒåŸå§‹é—®é¢˜ç»„åˆåœ¨ä¸€èµ·å‘é€ç»™AIï¼Œå®Œæˆé—®é¢˜çš„ä¸­è¯‘è‹±ã€‚</li>\n<li>ç„¶åå†æŠŠæ‹¿åˆ°çš„ç¿»è¯‘å¥½çš„è‹±æ–‡é—®é¢˜å‘é€ç»™OpenAIï¼Œå¾—åˆ°è‹±æ–‡ç­”æ¡ˆã€‚</li>\n<li>æœ€åå†æŠŠè‹±æ–‡ç­”æ¡ˆï¼Œå’Œå¯¹åº”è¦æ±‚AIç¿»è¯‘ç­”æ¡ˆçš„è¯·æ±‚ç»„åˆåœ¨ä¸€èµ·ï¼Œå®Œæˆç­”æ¡ˆçš„è‹±è¯‘ä¸­ã€‚</li>\n</ol><h3>ä½¿ç”¨LLMChainè¿›è¡Œé“¾å¼è°ƒç”¨</h3><p>å¦‚æœæˆ‘ä»¬ç”¨ä»£ç ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼Œä¸€æ­¥æ­¥è¿›è¡Œã€‚</p><pre><code class=\"language-python\">import openai, os\nfrom langchain.prompts import PromptTemplate\nfrom langchain.llms import OpenAI\nfrom langchain.chains import LLMChain\n\nopenai.api_key = os.environ.get(\"OPENAI_API_KEY\")\n\nllm = OpenAI(model_name=\"text-davinci-003\", max_tokens=2048, temperature=0.5)\n\nen_to_zh_prompt = PromptTemplate(\n    template=\"è¯·æŠŠä¸‹é¢è¿™å¥è¯ç¿»è¯‘æˆè‹±æ–‡ï¼š \\n\\n {question}?\", input_variables=[\"question\"]\n)\n\nquestion_prompt = PromptTemplate(\n    template = \"{english_question}\", input_variables=[\"english_question\"]\n)\n\nzh_to_cn_prompt = PromptTemplate(\n    input_variables=[\"english_answer\"],\n    template=\"è¯·æŠŠä¸‹é¢è¿™ä¸€æ®µç¿»è¯‘æˆä¸­æ–‡ï¼š \\n\\n{english_answer}?\",\n)\n\nquestion_translate_chain = LLMChain(llm=llm, prompt=en_to_zh_prompt, output_key=\"english_question\")\nenglish = question_translate_chain.run(question=\"è¯·ä½ ä½œä¸ºä¸€ä¸ªæœºå™¨å­¦ä¹ çš„ä¸“å®¶ï¼Œä»‹ç»ä¸€ä¸‹CNNçš„åŸç†ã€‚\")\nprint(english)\n\nqa_chain = LLMChain(llm=llm, prompt=question_prompt, output_key=\"english_answer\")\nenglish_answer = qa_chain.run(english_question=english)\nprint(english_answer)\n\nanswer_translate_chain = LLMChain(llm=llm, prompt=zh_to_cn_prompt)\nanswer = answer_translate_chain.run(english_answer=english_answer)\nprint(answer)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-plain\">Please explain the principles of CNN as an expert in Machine Learning.\n\nA Convolutional Neural Network (CNN) is a type of deep learning algorithm that is used to analyze visual imagery. It is modeled after the structure of the human visual cortex and is composed of multiple layers of neurons that process and extract features from an image. The main principle behind a CNN is that it uses convolutional layers to detect patterns in an image. Each convolutional layer is comprised of a set of filters that detect specific features in an image. These filters are then used to extract features from the image and create a feature map. The feature map is then passed through a pooling layer which reduces the size of the feature map and helps to identify the most important features in the image. Finally, the feature map is passed through a fully-connected layer which classifies the image and outputs the result.\n\nå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯ä¸€ç§æ·±åº¦å­¦ä¹ ç®—æ³•ï¼Œç”¨äºåˆ†æè§†è§‰å›¾åƒã€‚å®ƒæ¨¡ä»¿äººç±»è§†è§‰çš®å±‚çš„ç»“æ„ï¼Œç”±å¤šå±‚ç¥ç»å…ƒç»„æˆï¼Œå¯ä»¥å¤„ç†å’Œæå–å›¾åƒä¸­çš„ç‰¹å¾ã€‚CNNçš„ä¸»è¦åŸç†æ˜¯ä½¿ç”¨å·ç§¯å±‚æ¥æ£€æµ‹å›¾åƒä¸­çš„æ¨¡å¼ã€‚æ¯ä¸ªå·ç§¯å±‚ç”±ä¸€ç»„æ»¤æ³¢å™¨ç»„æˆï¼Œå¯ä»¥æ£€æµ‹å›¾åƒä¸­çš„ç‰¹å®šç‰¹å¾ã€‚ç„¶åä½¿ç”¨è¿™äº›æ»¤æ³¢å™¨ä»å›¾åƒä¸­æå–ç‰¹å¾ï¼Œå¹¶åˆ›å»ºç‰¹å¾å›¾ã€‚ç„¶åï¼Œå°†ç‰¹å¾å›¾é€šè¿‡æ± åŒ–å±‚ä¼ é€’ï¼Œè¯¥å±‚å¯ä»¥å‡å°ç‰¹å¾å›¾çš„å¤§å°ï¼Œå¹¶æœ‰åŠ©äºè¯†åˆ«å›¾åƒä¸­æœ€é‡è¦çš„ç‰¹å¾ã€‚æœ€åï¼Œå°†ç‰¹å¾å›¾ä¼ é€’ç»™å®Œå…¨è¿æ¥çš„å±‚ï¼Œè¯¥å±‚å°†å¯¹å›¾åƒè¿›è¡Œåˆ†ç±»ï¼Œå¹¶è¾“å‡ºç»“æœã€‚\n</code></pre><p>è¿™é‡Œçš„ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Langchainè¿™ä¸ªåº“ï¼Œä¸è¿‡è¿˜æ²¡æœ‰åŠ¨ç”¨å®ƒçš„é“¾å¼è°ƒç”¨è¿‡ç¨‹ã€‚æˆ‘ä»¬ä¸»è¦ç”¨äº†Langchainçš„ä¸‰ä¸ªåŒ…ã€‚</p><ol>\n<li>LLMï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨å“ªä¸ªå¤§è¯­è¨€æ¨¡å‹ï¼Œæ¥å›ç­”æˆ‘ä»¬æå‡ºçš„é—®é¢˜ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨OpenAIChatï¼Œä¹Ÿå°±æ˜¯æœ€æ–°æ”¾å‡ºæ¥çš„ gpt-3.5-turbo æ¨¡å‹ã€‚</li>\n<li>PromptTemplateï¼Œå’Œæˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/646363\">ç¬¬ 11 è®²</a>é‡Œçœ‹åˆ°çš„llama-indexçš„PromptTemplateæ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚å®ƒå¯ä»¥å®šä¹‰ä¸€ä¸ªæç¤ºè¯­æ¨¡ç‰ˆï¼Œé‡Œé¢èƒ½å¤Ÿå®šä¹‰ä¸€äº›å¯ä»¥åŠ¨æ€æ›¿æ¢çš„å˜é‡ã€‚æ¯”å¦‚ï¼Œä»£ç é‡Œçš„question_promptè¿™ä¸ªæ¨¡ç‰ˆé‡Œï¼Œæˆ‘ä»¬å°±å®šä¹‰äº†ä¸€ä¸ªå«åšquestionçš„å˜é‡ï¼Œå› ä¸ºæˆ‘ä»¬æ¯æ¬¡é—®çš„é—®é¢˜éƒ½ä¼šä¸ä¸€æ ·ã€‚äº‹å®ä¸Šï¼Œllamd-indexé‡Œé¢çš„PromptTemplateå°±æ˜¯å¯¹Langchainçš„PromptTemplateåšäº†ä¸€å±‚ç®€å•çš„å°è£…ã€‚</li>\n<li>ä¸»è§’ LLMChainï¼Œå®ƒçš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªLLMå’Œä¸€ä¸ªPromptTemplateä½œä¸ºå‚æ•°ã€‚æ„é€ å®Œæˆä¹‹åï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨é‡Œé¢çš„runæ–¹æ³•ï¼Œå°†PromptTemplateéœ€è¦çš„å˜é‡ï¼Œç”¨K=&gt;Vå¯¹çš„å½¢å¼ä¼ å…¥è¿›å»ã€‚è¿”å›çš„ç»“æœï¼Œå°±æ˜¯LLMç»™æˆ‘ä»¬çš„ç­”æ¡ˆã€‚</li>\n</ol><p>ä¸è¿‡å¦‚æœçœ‹ä¸Šé¢è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬ä¼¼ä¹åªæ˜¯å¯¹OpenAIçš„APIåšäº†ä¸€å±‚å°è£…è€Œå·²ã€‚æˆ‘ä»¬æ„å»ºäº†3ä¸ªLLMChainï¼Œç„¶åæŒ‰ç…§é¡ºåºè°ƒç”¨ï¼Œæ¯æ¬¡æ‹¿åˆ°ç­”æ¡ˆä¹‹åï¼Œå†ä½œä¸ºè¾“å…¥ï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªLLMè°ƒç”¨ã€‚æ„Ÿè§‰å¥½åƒæ›´éº»çƒ¦äº†ï¼Œæ²¡æœ‰å‡å°‘ä»€ä¹ˆå·¥ä½œé‡å‘€ï¼Ÿ</p><p>åˆ«ç€æ€¥ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰çœŸæ­£ç”¨ä¸ŠLLMChainçš„â€œé“¾å¼è°ƒç”¨â€åŠŸèƒ½ï¼Œè€Œç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œåªéœ€è¦åŠ ä¸Šä¸€è¡Œå°å°çš„ä»£ç ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªå«åšSimpleSequentialChainçš„LLMChainç±»ï¼ŒæŠŠæˆ‘ä»¬è¦æŒ‰ç…§é¡ºåºä¾æ¬¡è°ƒç”¨çš„ä¸‰ä¸ªLLMChainæ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œï¼Œä¼ ç»™è¿™ä¸ªç±»çš„æ„é€ å‡½æ•°ã€‚</p><p>ç„¶åå¯¹äºè¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬è°ƒç”¨runæ–¹æ³•ï¼ŒæŠŠæˆ‘ä»¬ç”¨ä¸­æ–‡é—®çš„é—®é¢˜äº¤ç»™å®ƒã€‚è¿™ä¸ªæ—¶å€™ï¼Œè¿™ä¸ªSimpleSequentialChainï¼Œå°±ä¼šæŒ‰ç…§é¡ºåºå¼€å§‹è°ƒç”¨chainsè¿™ä¸ªæ•°ç»„å‚æ•°é‡Œé¢åŒ…å«çš„å…¶ä»–LLMChainã€‚å¹¶ä¸”ï¼Œæ¯ä¸€æ¬¡è°ƒç”¨çš„ç»“æœï¼Œä¼šå­˜å‚¨åœ¨è¿™ä¸ªChainæ„é€ æ—¶å®šä¹‰çš„output_keyå‚æ•°é‡Œã€‚è€Œä¸‹ä¸€ä¸ªè°ƒç”¨çš„LLMChainï¼Œé‡Œé¢æ¨¡ç‰ˆå†…çš„å˜é‡å¦‚æœæœ‰å’Œä¹‹å‰çš„output_keyåå­—ç›¸åŒçš„ï¼Œå°±ä¼šç”¨output_keyé‡Œå­˜å…¥çš„å†…å®¹æ›¿æ¢æ‰æ¨¡ç‰ˆå†…å˜é‡æ‰€åœ¨çš„å ä½ç¬¦ã€‚</p><p>è¿™æ¬¡ï¼Œæˆ‘ä»¬åªå‘è¿™ä¸ªSimpleSequentialChainè°ƒç”¨ä¸€æ¬¡runæ–¹æ³•ï¼ŒæŠŠä¸€å¼€å§‹çš„é—®é¢˜äº¤ç»™å®ƒå°±å¥½äº†ã€‚åé¢æ ¹æ®ç­”æ¡ˆå»é—®æ–°çš„é—®é¢˜ï¼Œè¿™ä¸ªLLMChainä¼šè‡ªåŠ¨åœ°é“¾å¼æå®šã€‚æˆ‘åœ¨è¿™é‡ŒæŠŠæ—¥å¿—çš„Verboseæ¨¡å¼æ‰“å¼€äº†ï¼Œä½ åœ¨è¾“å‡ºçš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å…¶å®è¿™ä¸ªLLMChainæ˜¯è°ƒç”¨äº†ä¸‰æ¬¡ï¼Œå¹¶ä¸”ä¸­é—´ä¸¤æ¬¡çš„è¿”å›ç»“æœä½ ä¹Ÿå¯ä»¥ä¸€å¹¶çœ‹åˆ°ã€‚</p><pre><code class=\"language-python\">from langchain.chains import SimpleSequentialChain\n\nchinese_qa_chain = SimpleSequentialChain(\n    chains=[question_translate_chain, qa_chain, answer_translate_chain], input_key=\"question\",\n    verbose=True)\nanswer = chinese_qa_chain.run(question=\"è¯·ä½ ä½œä¸ºä¸€ä¸ªæœºå™¨å­¦ä¹ çš„ä¸“å®¶ï¼Œä»‹ç»ä¸€ä¸‹CNNçš„åŸç†ã€‚\")\nprint(answer)\n</code></pre><p>Verboseæ—¥å¿—ä¿¡æ¯ï¼š</p><pre><code class=\"language-plain\">&gt; Entering new SimpleSequentialChain chain...\n\nPlease introduce the principle of CNN as a machine learning expert.\n\nConvolutional Neural Networks (CNNs) are a type of artificial neural network that are commonly used in image recognition and classification tasks. They are inspired by the structure of the human brain and are composed of multiple layers of neurons connected in a specific pattern. The neurons in the first layer of a CNN are connected to the input image, and the neurons in the last layer are connected to the output. The neurons in between the input and output layers are called feature maps and are responsible for extracting features from the input image. CNNs use convolutional layers to detect patterns in the input image and pooling layers to reduce the size of the feature maps. This allows the CNN to learn the most important features in the image and use them to make predictions.\n\nå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯ä¸€ç§å¸¸ç”¨äºå›¾åƒè¯†åˆ«å’Œåˆ†ç±»ä»»åŠ¡çš„äººå·¥ç¥ç»ç½‘ç»œã€‚å®ƒä»¬å—åˆ°äººè„‘ç»“æ„çš„å¯å‘ï¼Œç”±å¤šå±‚ç¥ç»å…ƒä»¥ç‰¹å®šæ¨¡å¼è¿æ¥è€Œæˆã€‚CNNçš„ç¬¬ä¸€å±‚ç¥ç»å…ƒä¸è¾“å…¥å›¾åƒè¿æ¥ï¼Œæœ€åä¸€å±‚ç¥ç»å…ƒä¸è¾“å‡ºè¿æ¥ã€‚è¾“å…¥å’Œè¾“å‡ºå±‚ä¹‹é—´çš„ç¥ç»å…ƒç§°ä¸ºç‰¹å¾æ˜ å°„ï¼Œè´Ÿè´£ä»è¾“å…¥å›¾åƒä¸­æå–ç‰¹å¾ã€‚CNNä½¿ç”¨å·ç§¯å±‚æ£€æµ‹è¾“å…¥å›¾åƒä¸­çš„æ¨¡å¼ï¼Œä½¿ç”¨æ± åŒ–å±‚å‡å°ç‰¹å¾æ˜ å°„çš„å¤§å°ã€‚è¿™ä½¿å¾—CNNèƒ½å¤Ÿå­¦ä¹ å›¾åƒä¸­æœ€é‡è¦çš„ç‰¹å¾ï¼Œå¹¶åˆ©ç”¨å®ƒä»¬è¿›è¡Œé¢„æµ‹ã€‚\n&gt; Finished chain.\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-plain\">å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯ä¸€ç§å¸¸ç”¨äºå›¾åƒè¯†åˆ«å’Œåˆ†ç±»ä»»åŠ¡çš„äººå·¥ç¥ç»ç½‘ç»œã€‚å®ƒä»¬å—åˆ°äººè„‘ç»“æ„çš„å¯å‘ï¼Œç”±å¤šå±‚ç¥ç»å…ƒä»¥ç‰¹å®šæ¨¡å¼è¿æ¥è€Œæˆã€‚CNNçš„ç¬¬ä¸€å±‚ç¥ç»å…ƒä¸è¾“å…¥å›¾åƒè¿æ¥ï¼Œæœ€åä¸€å±‚ç¥ç»å…ƒä¸è¾“å‡ºè¿æ¥ã€‚è¾“å…¥å’Œè¾“å‡ºå±‚ä¹‹é—´çš„ç¥ç»å…ƒç§°ä¸ºç‰¹å¾æ˜ å°„ï¼Œè´Ÿè´£ä»è¾“å…¥å›¾åƒä¸­æå–ç‰¹å¾ã€‚CNNä½¿ç”¨å·ç§¯å±‚æ£€æµ‹è¾“å…¥å›¾åƒä¸­çš„æ¨¡å¼ï¼Œä½¿ç”¨æ± åŒ–å±‚å‡å°ç‰¹å¾æ˜ å°„çš„å¤§å°ã€‚è¿™ä½¿å¾—CNNèƒ½å¤Ÿå­¦ä¹ å›¾åƒä¸­æœ€é‡è¦çš„ç‰¹å¾ï¼Œå¹¶åˆ©ç”¨å®ƒä»¬è¿›è¡Œé¢„æµ‹ã€‚\n</code></pre><p>åœ¨ä½¿ç”¨è¿™æ ·çš„é“¾å¼è°ƒç”¨çš„æ—¶å€™ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå°±æ˜¯ä¸€ä¸ªLLMChainé‡Œï¼Œæ‰€ä½¿ç”¨çš„PromptTemplateé‡Œçš„è¾“å…¥å‚æ•°ï¼Œ<strong>ä¹‹å‰å¿…é¡»åœ¨LLMChainé‡Œï¼Œé€šè¿‡ output_key å®šä¹‰è¿‡ã€‚</strong>ä¸ç„¶ï¼Œè¿™ä¸ªå˜é‡æ²¡æœ‰å€¼ï¼Œç¨‹åºå°±ä¼šæŠ¥é”™ã€‚</p><h3>æ”¯æŒå¤šä¸ªå˜é‡è¾“å…¥çš„é“¾å¼è°ƒç”¨</h3><p>äº‹å®ä¸Šï¼Œå› ä¸ºä½¿ç”¨å˜é‡çš„è¾“å…¥è¾“å‡ºï¼Œæ˜¯ç”¨è¿™äº›å‚æ•°å®šä¹‰çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸æ˜¯åªèƒ½ç”¨å‰ä¸€ä¸ªLLMChainçš„è¾“å‡ºä½œä¸ºåä¸€ä¸ªLLMChainçš„è¾“å…¥ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥è¿ç»­é—®å¤šä¸ªé—®é¢˜ï¼Œç„¶åæŠŠè¿™äº›é—®é¢˜çš„ç­”æ¡ˆï¼Œä½œä¸ºåç»­é—®é¢˜çš„è¾“å…¥æ¥ç»§ç»­å¤„ç†ã€‚ä¸‹é¢æˆ‘å°±ç»™ä½ çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p><pre><code class=\"language-python\">from langchain.chains import SequentialChain\n\nq1_prompt = PromptTemplate(\n    input_variables=[\"year1\"],\n    template=\"{year1}å¹´çš„æ¬§å† è”èµ›çš„å† å†›æ˜¯å“ªæ”¯çƒé˜Ÿï¼Œåªè¯´çƒé˜Ÿåç§°ã€‚\"\n)\nq2_prompt = PromptTemplate(\n    input_variables=[\"year2\"],\n    template=\"{year2}å¹´çš„æ¬§å† è”èµ›çš„å† å†›æ˜¯å“ªæ”¯çƒé˜Ÿï¼Œåªè¯´çƒé˜Ÿåç§°ã€‚\"\n)\nq3_prompt = PromptTemplate(\n    input_variables=[\"team1\", \"team2\"],\n    template=\"{team1}å’Œ{team2}å“ªåªçƒé˜Ÿè·å¾—æ¬§å† çš„æ¬¡æ•°å¤šä¸€äº›ï¼Ÿ\"\n)\nchain1 = LLMChain(llm=llm, prompt=q1_prompt, output_key=\"team1\")\nchain2 = LLMChain(llm=llm, prompt=q2_prompt, output_key=\"team2\")\nchain3 = LLMChain(llm=llm, prompt=q3_prompt)\n\nsequential_chain = SequentialChain(chains=[chain1, chain2, chain3], input_variables=[\"year1\", \"year2\"], verbose=True)\nanswer = sequential_chain.run(year1=2000, year2=2010)\nprint(answer)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-plain\">&gt; Entering new SequentialChain chain...\n&gt; Finished chain.\n\nè¥¿ç­ç‰™çš‡å®¶é©¬å¾·é‡Œé˜Ÿè·å¾—æ¬§å† çš„æ¬¡æ•°æ›´å¤šï¼Œå…±13æ¬¡ï¼Œè€Œæ‹œä»æ…•å°¼é»‘åªæœ‰5æ¬¡ã€‚\n</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªPromptTemplateå’Œå¯¹åº”çš„LLMChainï¼Œå„è‡ªæ¥æ”¶ä¸€ä¸ªå¹´ä»½ä½œä¸ºè¾“å…¥ï¼Œå›ç­”è¿™ä¸¤ä¸ªå¹´ä»½çš„æ¬§å† å† å†›ã€‚ç„¶åå°†ä¸¤ä¸ªé˜Ÿåä½œä¸ºè¾“å…¥ï¼Œæ”¾åˆ°ç¬¬ä¸‰ä¸ªé—®é¢˜é‡Œï¼Œè®©AIå‘Šè¯‰æˆ‘ä»¬è¿™ä¸¤æ”¯çƒé˜Ÿå“ªä¸€æ”¯è·å¾—æ¬§å† çš„æ¬¡æ•°å¤šä¸€äº›ã€‚åªéœ€è¦åœ¨æˆ‘ä»¬çš„SequentialChainé‡Œè¾“å…¥ä¸¤ä¸ªå¹´ä»½ï¼Œå°±èƒ½é€šè¿‡ä¸‰æ¬¡å›ç­”å¾—åˆ°ç­”æ¡ˆã€‚</p><h2>é€šè¿‡Langchainå®ç°è‡ªåŠ¨åŒ–æ’°å†™å•å…ƒæµ‹è¯•</h2><p>çœ‹åˆ°è¿™é‡Œï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æƒ³èµ·æˆ‘ä»¬ä¸Šä¸€è®²åˆšåˆšè®²è¿‡çš„é€šè¿‡å¤šæ­¥æç¤ºè¯­è‡ªåŠ¨ç»™ä»£ç å†™å•å…ƒæµ‹è¯•ã€‚æ²¡é”™ï¼ŒLangchainå¯ä»¥é¡ºåºåœ°é€šè¿‡å¤šä¸ªPromptè°ƒç”¨OpenAIçš„GPTæ¨¡å‹ã€‚è¿™ä¸ªèƒ½åŠ›æ‹¿æ¥å®ç°ä¸Šä¸€è®²çš„è‡ªåŠ¨åŒ–æµ‹è¯•çš„åŠŸèƒ½æ˜¯å†åˆé€‚ä¸è¿‡çš„äº†ã€‚ä¸‹é¢ï¼Œæˆ‘å°±æ‹¿Langchainé‡æ–°å®ç°äº†ä¸€éä¸Šä¸€è®²çš„è¿™ä¸ªåŠŸèƒ½ï¼Œå¹¶ä¸”ç»™å®ƒè¡¥ä¸Šäº†ASTè¯­æ³•è§£æå¤±è´¥ä¹‹åè‡ªåŠ¨é‡è¯•çš„èƒ½åŠ›ã€‚</p><pre><code class=\"language-python\">from langchain.chains import SequentialChain\n\ndef write_unit_test(function_to_test, unit_test_package = \"pytest\"):\n    # è§£é‡Šæºä»£ç çš„æ­¥éª¤\n    explain_code = \"\"\"\"# How to write great unit tests with {unit_test_package}\n\n    In this advanced tutorial for experts, we'll use Python 3.10 and `{unit_test_package}` to write a suite of unit tests to verify the behavior of the following function.\n    ```python\n    {function_to_test}\n    ```\n\n    Before writing any unit tests, let's review what each element of the function is doing exactly and what the author's intentions may have been.\n    - First,\"\"\"\n\n    explain_code_template = PromptTemplate(\n        input_variables=[\"unit_test_package\", \"function_to_test\"],\n        template=explain_code\n    )\n    explain_code_llm = OpenAI(model_name=\"text-davinci-002\", temperature=0.4, max_tokens=1000, \n            top_p=1, stop=[\"\\n\\n\", \"\\n\\t\\n\", \"\\n    \\n\"])\n    explain_code_step = LLMChain(llm=explain_code_llm, prompt=explain_code_template, output_key=\"code_explaination\")\n\n    # åˆ›å»ºæµ‹è¯•è®¡åˆ’ç¤ºä¾‹çš„æ­¥éª¤\n    test_plan = \"\"\"\n        \n    A good unit test suite should aim to:\n    - Test the function's behavior for a wide range of possible inputs\n    - Test edge cases that the author may not have foreseen\n    - Take advantage of the features of `{unit_test_package}` to make the tests easy to write and maintain\n    - Be easy to read and understand, with clean code and descriptive names\n    - Be deterministic, so that the tests always pass or fail in the same way\n\n    `{unit_test_package}` has many convenient features that make it easy to write and maintain unit tests. We'll use them to write unit tests for the function above.\n\n    For this particular function, we'll want our unit tests to handle the following diverse scenarios (and under each scenario, we include a few examples as sub-bullets):\n    -\"\"\"\n    test_plan_template = PromptTemplate(\n        input_variables=[\"unit_test_package\", \"function_to_test\", \"code_explaination\"],\n        template= explain_code + \"{code_explaination}\" + test_plan\n    )\n    test_plan_llm = OpenAI(model_name=\"text-davinci-002\", temperature=0.4, max_tokens=1000, \n            top_p=1, stop=[\"\\n\\n\", \"\\n\\t\\n\", \"\\n    \\n\"])\n    test_plan_step = LLMChain(llm=test_plan_llm, prompt=test_plan_template, output_key=\"test_plan\")\n\n    # æ’°å†™æµ‹è¯•ä»£ç çš„æ­¥éª¤\n    starter_comment = \"Below, each test case is represented by a tuple passed to the @pytest.mark.parametrize decorator\"\n    prompt_to_generate_the_unit_test = \"\"\"\n\nBefore going into the individual tests, let's first look at the complete suite of unit tests as a cohesive whole. We've added helpful comments to explain what each line does.\n```python\nimport {unit_test_package}  # used for our unit tests\n\n{function_to_test}\n\n#{starter_comment}\"\"\"\n\n    unit_test_template = PromptTemplate(\n        input_variables=[\"unit_test_package\", \"function_to_test\", \"code_explaination\", \"test_plan\", \"starter_comment\"],\n        template= explain_code + \"{code_explaination}\" + test_plan + \"{test_plan}\" + prompt_to_generate_the_unit_test\n    )\n    unit_test_llm = OpenAI(model_name=\"text-davinci-002\", temperature=0.4, max_tokens=1000, stop=\"```\")\n    unit_test_step = LLMChain(llm=unit_test_llm, prompt=unit_test_template, output_key=\"unit_test\")\n\n    sequential_chain = SequentialChain(chains=[explain_code_step, test_plan_step, unit_test_step], \n                                    input_variables=[\"unit_test_package\", \"function_to_test\", \"starter_comment\"], verbose=True)\n    answer = sequential_chain.run(unit_test_package=unit_test_package, function_to_test=function_to_test, starter_comment=starter_comment)\n    return f\"\"\"#{starter_comment}\"\"\" + answer\n\ncode = \"\"\"\ndef format_time(seconds):\n    minutes, seconds = divmod(seconds, 60)\n    hours, minutes = divmod(minutes, 60)\n    if hours &gt; 0:\n        return f\"{hours}h{minutes}min{seconds}s\"\n    elif minutes &gt; 0:\n        return f\"{minutes}min{seconds}s\"\n    else:\n        return f\"{seconds}s\"\n\"\"\"\n\nimport ast\n\ndef write_unit_test_automatically(code, retry=3):\n    unit_test_code = write_unit_test(code)\n    all_code = code + unit_test_code\n    tried = 0\n    while tried &lt; retry:\n        try:\n            ast.parse(all_code)\n            return all_code\n        except SyntaxError as e:\n            print(f\"Syntax error in generated code: {e}\")\n            all_code = code + write_unit_test(code)\n            tried += 1\n            \nprint(write_unit_test_automatically(code))\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">\ndef format_time(seconds):\n&nbsp; &nbsp; minutes, seconds = divmod(seconds, 60)\n&nbsp; &nbsp; hours, minutes = divmod(minutes, 60)\n&nbsp; &nbsp; if hours &gt; 0:\n&nbsp; &nbsp; &nbsp; &nbsp; return f\"{hours}h{minutes}min{seconds}s\"\n&nbsp; &nbsp; elif minutes &gt; 0:\n&nbsp; &nbsp; &nbsp; &nbsp; return f\"{minutes}min{seconds}s\"\n&nbsp; &nbsp; else:\n&nbsp; &nbsp; &nbsp; &nbsp; return f\"{seconds}s\"\n#Below, each test case is represented by a tuple passed to the @pytest.mark.parametrize decorator.\n#The first element of the tuple is the name of the test case, and the second element is a list of tuples,\n#where each tuple contains the input values for the format_time() function and the expected output.\n@pytest.mark.parametrize(\"test_case, input_values, expected_output\", [\n&nbsp; &nbsp; # Test cases for when the seconds parameter is an integer\n&nbsp; &nbsp; (\"seconds is positive\", (42,), \"42s\"),\n&nbsp; &nbsp; (\"seconds is negative\", (-42,), \"-42s\"),\n&nbsp; &nbsp; (\"seconds is 0\", (0,), \"0s\"),\n&nbsp; &nbsp; # Test cases for when the seconds parameter is not an integer\n&nbsp; &nbsp; (\"seconds is a float\", (42.0,), \"42.0s\"),\n&nbsp; &nbsp; (\"seconds is a string\", (\"42\",), \"42s\"),\n&nbsp; &nbsp; (\"seconds is None\", (None,), \"None\"),\n&nbsp; &nbsp; # Test cases for when the seconds parameter is an integer, but it is not in the range 0-3600\n&nbsp; &nbsp; (\"seconds is too small\", (-1,), \"-1s\"),\n&nbsp; &nbsp; (\"seconds is too large\", (3601,), \"1h0min1s\"),\n])\ndef test_format_time(test_case, input_values, expected_output):\n&nbsp; &nbsp; # We use the pytest.raises context manager to assert that the function raises a TypeError\n&nbsp; &nbsp; # if the input is not an integer.\n&nbsp; &nbsp; with pytest.raises(TypeError):\n&nbsp; &nbsp; &nbsp; &nbsp; format_time(input_values)\n&nbsp; &nbsp; # We use the pytest.approx context manager to assert that the output is approximately equal\n&nbsp; &nbsp; # to the expected output, within a certain tolerance.\n&nbsp; &nbsp; assert format_time(input_values) == pytest.approx(expected_output)\n\n</code></pre><p>è¿™ä¸ªä»£ç çš„å…·ä½“åŠŸèƒ½ï¼Œå…¶å®å’Œä¸Šä¸€è®²æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªæ˜¯é€šè¿‡Langchainåšäº†å°è£…ï¼Œä½¿å®ƒæ›´åŠ å®¹æ˜“ç»´æŠ¤äº†ã€‚æˆ‘ä»¬æŠŠè§£é‡Šä»£ç ã€ç”Ÿæˆæµ‹è¯•è®¡åˆ’ï¼Œä»¥åŠæœ€ç»ˆç”Ÿæˆæµ‹è¯•ä»£ç ï¼Œå˜æˆäº†ä¸‰ä¸ªLLMChainã€‚æ¯ä¸€æ­¥çš„è¾“å…¥ï¼Œéƒ½æ¥è‡ªä¸Šä¸€æ­¥çš„è¾“å‡ºã€‚è¿™ä¸ªè¾“å…¥æ—¢åŒ…æ‹¬ä¸Šä¸€æ­¥çš„Prompt Templateå’Œè¿™ä¸€æ­¥çš„Prompt Templateçš„ç»„åˆï¼Œä¹ŸåŒ…æ‹¬è¿‡ç¨‹ä¸­çš„ä¸€äº›å˜é‡ï¼Œè¿™äº›å˜é‡æ˜¯ä¸Šä¸€æ­¥æ‰§è¡Œçš„ç»“æœä½œä¸ºè¾“å…¥å˜é‡ä¼ é€’è¿›æ¥çš„ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨SequentialChainæ¥è‡ªåŠ¨åœ°æŒ‰ç…§è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œæ‰§è¡ŒOpenAIçš„APIè°ƒç”¨ã€‚</p><p>è¿™æ•´ä¸ªè¿‡ç¨‹é€šè¿‡write_unit_testè¿™ä¸ªå‡½æ•°ç»™å°è£…èµ·æ¥äº†ã€‚å¯¹äºé‡è¯•ï¼Œæˆ‘ä»¬åˆ™æ˜¯é€šè¿‡ä¸€ä¸ªwhileå¾ªç¯æ¥è°ƒç”¨ write_unit_testã€‚æ‹¿åˆ°çš„ç»“æœå’Œè¾“å…¥çš„ä»£ç æ‹¼è£…åœ¨ä¸€èµ·ï¼Œäº¤ç»™ASTåº“åšè§£æã€‚å¦‚æœè§£æé€šä¸è¿‡ï¼Œåˆ™é‡è¯•æ•´ä¸ªå•å…ƒæµ‹è¯•ç”Ÿæˆçš„è¿‡ç¨‹ï¼Œç›´åˆ°è¾¾åˆ°æˆ‘ä»¬æœ€å¤§çš„é‡è¯•æ¬¡æ•°ä¸ºæ­¢ã€‚</p><p>LangChainçš„è¿™ä¸ªåˆ†å¤šä¸ªæ­¥éª¤è°ƒç”¨OpenAIæ¨¡å‹çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬é€šè¿‡AIå®Œæˆå¤æ‚çš„ä»»åŠ¡ï¼Œå¹¶ä¸”å°†æ•´ä¸ªä»»åŠ¡çš„å®Œæˆè¿‡ç¨‹å®šä¹‰æˆäº†ä¸€ä¸ªå›ºå®šçš„æµç¨‹æ¨¡ç‰ˆã€‚åœ¨ä¸‹ä¸€è®²é‡Œï¼Œæˆ‘ä»¬è¿˜ä¼šè¿›ä¸€æ­¥çœ‹åˆ°ï¼Œé€šè¿‡è¿™æ ·ä¸€ä¸ªé“¾å¼ç»„åˆå¤šä¸ªLLMChainçš„æ–¹æ³•ï¼Œå¦‚ä½•å®Œæˆæ›´å¤æ‚å¹¶ä¸”æ›´å…·æœ‰ç°å®æ„ä¹‰çš„å·¥ä½œã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œç›¸ä¿¡åˆ°è¿™é‡Œï¼Œä½ è„‘å­é‡Œåº”è¯¥æœ‰äº†æ›´å¤šå¯ä»¥åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹çš„å¥½ç‚¹å­ã€‚è¿™ä¸€è®²ï¼Œæˆ‘å¸¦ä½ å­¦ä¼šäº†å¦‚ä½•é€šè¿‡Langchainè¿™ä¸ªå¼€æºåº“ï¼Œå¯¹å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œé“¾å¼è°ƒç”¨ã€‚æƒ³è¦é€šè¿‡å¤§è¯­è¨€æ¨¡å‹ï¼Œå®Œæˆä¸€ä¸ªå¤æ‚çš„ä»»åŠ¡ï¼Œå¾€å¾€éœ€è¦æˆ‘ä»¬å¤šæ¬¡å‘AIæé—®ï¼Œå¹¶ä¸”å‰é¢æé—®çš„ç­”æ¡ˆï¼Œå¯èƒ½æ˜¯åé¢é—®é¢˜è¾“å…¥çš„ä¸€éƒ¨åˆ†ã€‚LangChainé€šè¿‡å°†å¤šä¸ªLLMChainç»„åˆæˆä¸€ä¸ªSequantialChainå¹¶é¡ºåºæ‰§è¡Œï¼Œå¤§å¤§ç®€åŒ–äº†è¿™ç±»ä»»åŠ¡çš„å¼€å‘å·¥ä½œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/36/da/36916e57fc0618e5cb8ce49991e423da.png?wh=1920x1962\" alt=\"å›¾ç‰‡\" title=\"LLMChainå°±æ˜¯ä¸€ä¸ªå¯¹å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œé“¾å¼è°ƒç”¨çš„æ¨¡å¼ï¼Œå‰é¢çš„å˜é‡å’Œè¾“å‡ºéƒ½å¯ä»¥ä½œä¸ºä¸‹ä¸€è½®è°ƒç”¨çš„å˜é‡è¾“å…¥\"></p><p>Langchainè¿˜æœ‰å¾ˆå¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½è°ƒç”¨è¯­è¨€æ¨¡å‹ï¼Œè¿˜èƒ½è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿï¼Œç”šè‡³æˆ‘ä»¬è¿˜èƒ½ç›´æ¥è®©AIåšå†³ç­–ï¼Œå†³å®šè¯¥è®©æˆ‘ä»¬çš„ç³»ç»Ÿåšä»€ä¹ˆã€‚åœ¨åé¢çš„å‡ è®²é‡Œï¼Œæˆ‘ä»¬ä¼šè¦†ç›–è¿™äº›å†…å®¹ï¼Œå¹¶æœ€ç»ˆç»™ä½ ä¸€ä¸ªå®Œæ•´çš„ç”µå•†èŠå¤©æœºå™¨äººã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ã€‚ä½ èƒ½è¯•ç€é€šè¿‡Langchainç»„åˆå¤šä¸ªé—®é¢˜ï¼Œå¹¶ä¸”åˆ©ç”¨å‰é¢é—®é¢˜çš„å›ç­”ç»“æœï¼Œè§¦å‘æ–°çš„é—®é¢˜æ‰¾åˆ°ä½ æƒ³è¦çš„ç­”æ¡ˆå—ï¼Ÿæ¬¢è¿ä½ æŠŠä½ çš„ä¾‹å­æ‹¿å‡ºæ¥åˆ†äº«åœ¨è¯„è®ºåŒºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ä¸€è®²åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²å†è§ã€‚</p><h2>æ¨èé˜…è¯»</h2><p>å’Œä¹‹å‰ä»‹ç»è¿‡çš„llama-indexè¿™ä¸ªé¡¹ç›®ä¸€æ ·ï¼ŒLangchainè¿™ä¸ªé¡¹ç›®ä¹Ÿåœ¨å¿«é€Ÿåœ°å‘å±•å’Œè¿­ä»£è¿‡ç¨‹ä¸­ã€‚æˆ‘æ¨èä½ å»çœ‹ä¸€çœ‹ä»–ä»¬çš„<a href=\"https://langchain.readthedocs.io/en/latest/\">å®˜æ–¹æ–‡æ¡£</a>ï¼Œå¥½çŸ¥é“ä»–ä»¬æä¾›çš„æœ€æ–°åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œè¿™ä¸ªæˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„å‘é‡æ•°æ®åº“å…¬å¸Pineconeï¼Œä¹Ÿåˆ¶ä½œäº†ä¸€ä»½ <a href=\"https://www.pinecone.io/learn/langchain/\">Langchain AI Handbook</a>ï¼Œä½ ä¹Ÿå¯ä»¥å»çœ‹ä¸€çœ‹ã€‚</p>","comments":[{"had_liked":false,"id":372447,"user_name":"æ™ºèƒ½","can_delete":false,"product_type":"c1","uid":1353334,"ip_address":"åŒ—äº¬","ucode":"1804A67D67DB51","user_header":"https://static001.geekbang.org/account/avatar/00/14/a6/76/b2a1065a.jpg","comment_is_top":false,"comment_ctime":1681145625,"is_pvip":false,"replies":[{"id":135957,"content":"é“¾å¼è°ƒç”¨ï¼Œåé¢çš„æ­¥éª¤ä¸æ˜¯ä¸€å®šè¦åŒ…å«æœ€å¼€å¤´çš„Promptçš„ï¼Œæ ¹æ®å®é™…æƒ…å†µä½ å¯ä»¥è°ƒæ•´æ¯ä¸ªæ­¥éª¤å®é™…çš„Promptæ˜¯ä»€ä¹ˆã€‚\n\nç›®å‰å…¶å®Azureå·²ç»æœ‰32K Tokençš„gpt-4-32käº†ï¼Œè™½ç„¶è´µä¸€äº›ã€‚ä½†æ˜¯å¦‚æœæ˜¯æ‹¿æ¥å¹²å†™ä»£ç è¿™ç§é«˜ä»·å€¼ä»»åŠ¡æˆ‘è§‰å¾—è¿˜æ˜¯åˆ’å¾—æ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681182037,"ip_address":"ä¸Šæµ·","comment_id":372447,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è¿™ç§é“¾å¼è°ƒç”¨æ˜¯ä¸æ˜¯å¾ˆå®¹æ˜“è®©é—®é¢˜è¶…è¿‡tokené™åˆ¶ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•æ¥è‡ªåŠ¨è§£å†³è¿™ä¸ªé—®é¢˜","like_count":7,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613198,"discussion_content":"é“¾å¼è°ƒç”¨ï¼Œåé¢çš„æ­¥éª¤ä¸æ˜¯ä¸€å®šè¦åŒ…å«æœ€å¼€å¤´çš„Promptçš„ï¼Œæ ¹æ®å®é™…æƒ…å†µä½ å¯ä»¥è°ƒæ•´æ¯ä¸ªæ­¥éª¤å®é™…çš„Promptæ˜¯ä»€ä¹ˆã€‚\n\nç›®å‰å…¶å®Azureå·²ç»æœ‰32K Tokençš„gpt-4-32käº†ï¼Œè™½ç„¶è´µä¸€äº›ã€‚ä½†æ˜¯å¦‚æœæ˜¯æ‹¿æ¥å¹²å†™ä»£ç è¿™ç§é«˜ä»·å€¼ä»»åŠ¡æˆ‘è§‰å¾—è¿˜æ˜¯åˆ’å¾—æ¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681182037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1164626,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c5/52/63008fc7.jpg","nickname":"xuwei","note":"","ucode":"07268C1743839F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":625006,"discussion_content":"è‡ªå·±ç”¨gpt4tokenï¼Œä¸€å¤©ç”¨äº†20å¤šåˆ€ã€‚æ¯”è¯¾ç¨‹éƒ½è´µäº†ã€‚ğŸ˜‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1691159130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":613198,"ip_address":"ä¸Šæµ·","group_id":0},"score":625006,"extra":""}]},{"author":{"id":1005157,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/65/22a37a8e.jpg","nickname":"Yezhiwei","note":"","ucode":"31E8E33688CBEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613473,"discussion_content":"æ˜¯ä¸æ˜¯å¯ä»¥å¢åŠ ä¸€ä¸‹åˆ¤æ–­ï¼Œå½“æç¤ºæ¨¡æ¿çš„ä¿¡æ¯å¤ªå¤šäº†ï¼Œåˆ©ç”¨è€å¸ˆä¹‹å‰è®²è¿‡çš„ï¼Œæ‰§è¡Œä¸€ä¸‹æ‘˜è¦é€»è¾‘ï¼Œç¼©å°å­—æ•°ï¼Œä¸çŸ¥é“è¿™æ ·å¯ä»¥ä¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681347648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372498,"user_name":"æ„","can_delete":false,"product_type":"c1","uid":1129311,"ip_address":"å¹¿ä¸œ","ucode":"A4B0C03248EA77","user_header":"https://static001.geekbang.org/account/avatar/00/11/3b/5f/a2c78423.jpg","comment_is_top":false,"comment_ctime":1681205817,"is_pvip":false,"replies":[{"id":135981,"content":"ä¸€èˆ¬éƒ½æ˜¯ä¼šæä¾›ä¼ä¸šç‰ˆæ¥è·å¾—æ”¶å…¥ã€‚\n\n1. ä¼ä¸šç‰ˆæœ¬çš„ç‰¹æœ‰åŠŸèƒ½ï¼Œæ¯”å¦‚æ›´å¥½çš„ç®¡ç†é¢æ¿ç•Œé¢ç­‰ç­‰\n2. æä¾›å¼€æºç‰ˆæœ¬ï¼Œä¹Ÿæä¾›äº‘ç«¯ç‰ˆæœ¬ã€‚äº‘ç«¯ç‰ˆæœ¬æ‰˜ç®¡æˆ–è€…æŒ‰ç…§ä½¿ç”¨é‡æ¥æ”¶è´¹\n3. ç»™500å¼ºå¤§ä¼ä¸šåšç§æœ‰åŒ–éƒ¨ç½²ã€æœåŠ¡æ¥æ”¶è´¹\n\nçœ‹ä¸­ä»€ä¹ˆå…·ä½“æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œä½†æ˜¯çš„ç¡®Langchainæ˜¯ç°åœ¨Hackerä»¬ç”¨å¾—æœ€å¤šçš„ä¸€ä¸ªå¼€å‘æ¡†æ¶ï¼Œæœ‰ç”¨æˆ·æœ‰å¼€å‘è€…å°±æœ‰å¯èƒ½æ€§å’Œæœªæ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681287404,"ip_address":"ä¸Šæµ·","comment_id":372498,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è€å¸ˆå¥½ï¼Œçœ‹åˆ°LangChainè·å¾—1000ä¸‡ç¾å…ƒç§å­è½®èèµ„çš„æ–°é—»ã€‚\næƒ³é—®ä¸‹ï¼šåƒLangChainè¿™ç§å¼€æºçš„äº§å“ï¼Œå•†ä¸šæ¨¡å¼æ˜¯æ€ä¹ˆæ ·çš„ï¼ŒæŠ•èµ„æœºæ„æ˜¯çœ‹ä¸­äº†å“ªç‚¹è¿›è¡ŒæŠ•èµ„çš„ã€‚","like_count":4,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613361,"discussion_content":"ä¸€èˆ¬éƒ½æ˜¯ä¼šæä¾›ä¼ä¸šç‰ˆæ¥è·å¾—æ”¶å…¥ã€‚\n\n1. ä¼ä¸šç‰ˆæœ¬çš„ç‰¹æœ‰åŠŸèƒ½ï¼Œæ¯”å¦‚æ›´å¥½çš„ç®¡ç†é¢æ¿ç•Œé¢ç­‰ç­‰\n2. æä¾›å¼€æºç‰ˆæœ¬ï¼Œä¹Ÿæä¾›äº‘ç«¯ç‰ˆæœ¬ã€‚äº‘ç«¯ç‰ˆæœ¬æ‰˜ç®¡æˆ–è€…æŒ‰ç…§ä½¿ç”¨é‡æ¥æ”¶è´¹\n3. ç»™500å¼ºå¤§ä¼ä¸šåšç§æœ‰åŒ–éƒ¨ç½²ã€æœåŠ¡æ¥æ”¶è´¹\n\nçœ‹ä¸­ä»€ä¹ˆå…·ä½“æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œä½†æ˜¯çš„ç¡®Langchainæ˜¯ç°åœ¨Hackerä»¬ç”¨å¾—æœ€å¤šçš„ä¸€ä¸ªå¼€å‘æ¡†æ¶ï¼Œæœ‰ç”¨æˆ·æœ‰å¼€å‘è€…å°±æœ‰å¯èƒ½æ€§å’Œæœªæ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681287404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372449,"user_name":"ä¸€å¶","can_delete":false,"product_type":"c1","uid":3577168,"ip_address":"ç¦å»º","ucode":"21E5455D0814E5","user_header":"https://static001.geekbang.org/account/avatar/00/36/95/50/01199ae9.jpg","comment_is_top":false,"comment_ctime":1681159346,"is_pvip":false,"replies":[{"id":135956,"content":"å›½å†…åº”ç”¨çš„è¯ï¼Œè‡ªå·±éƒ¨ç½²ä¸€ä¸ªpostgres + pgvector æ’ä»¶å§ï¼Œå¤§éƒ¨åˆ†äº‘å¹³å°åº”è¯¥éƒ½æ”¯æŒ postgres","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681181942,"ip_address":"ä¸Šæµ·","comment_id":372449,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è€å¸ˆæˆ‘çš„æƒ³é—®ä¸‹,å›½å†…ä½¿ç”¨Pineconeçš„æ•ˆç‡å¦‚ä½•? ä¼šä¸ä¼šå—åˆ°ç½‘ç»œçš„å½±å“?","like_count":4,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613196,"discussion_content":"å›½å†…åº”ç”¨çš„è¯ï¼Œè‡ªå·±éƒ¨ç½²ä¸€ä¸ªpostgres + pgvector æ’ä»¶å§ï¼Œå¤§éƒ¨åˆ†äº‘å¹³å°åº”è¯¥éƒ½æ”¯æŒ postgres","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1681181942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374239,"user_name":"åšç§¯è–„å‘","can_delete":false,"product_type":"c1","uid":1206674,"ip_address":"å¾·å›½","ucode":"8640C07176C249","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/92/69c2c135.jpg","comment_is_top":false,"comment_ctime":1683768876,"is_pvip":false,"replies":[{"id":136844,"content":"è¿™ä¸ªæ˜¯å¤§è¯­è¨€æ¨¡å‹æœ¬èº«æ½œåœ¨çš„â€œå¹»è§‰â€é—®é¢˜ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€å¼€å§‹çš„é—®é¢˜ä»–å›ç­”é”™äº†ã€‚\n\nè¿™ä¸ªè§£å†³çš„åŠæ³•å°±æ˜¯è¦ç”¨ç±»ä¼¼ Browsing æ’ä»¶çš„æ–¹å¼ï¼Œé€šè¿‡æœç´¢è·¯å¾„æ‹¿åˆ°æ­£ç¡®ç­”æ¡ˆäº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684748686,"ip_address":"ä¸Šæµ·","comment_id":374239,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"æ”¯æŒå¤šä¸ªå˜é‡è¾“å…¥çš„é“¾å¼è°ƒç”¨  è¿™ä¸ªæ¡ˆä¾‹ å¤šè¿è¡Œå‡ æ¬¡ï¼Œæœ€åçš„æ•°æ®ç»“æœï¼Œæ¯æ¬¡éƒ½ä¸ä¸€æ ·\nå…¶ä¸­ä¸€æ¬¡æ˜¯è¿™ä¸ªâ€˜æ³¢å°”å›¾æ›´å¤šï¼Œä»–ä»¬è·å¾—è¿‡4æ¬¡æ¬§å† å† å†›ï¼Œè€Œè¥¿ç­ç‰™çš‡å®¶é©¬å¾·é‡Œåªè·å¾—è¿‡3æ¬¡æ¬§å† å† å†›ã€‚  â€™  è€å¸ˆï¼ŒçŸ¥é“è¿™ä¸ªæ˜¯ä»€ä¹ˆåŸå› å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619022,"discussion_content":"è¿™ä¸ªæ˜¯å¤§è¯­è¨€æ¨¡å‹æœ¬èº«æ½œåœ¨çš„â€œå¹»è§‰â€é—®é¢˜ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€å¼€å§‹çš„é—®é¢˜ä»–å›ç­”é”™äº†ã€‚\n\nè¿™ä¸ªè§£å†³çš„åŠæ³•å°±æ˜¯è¦ç”¨ç±»ä¼¼ Browsing æ’ä»¶çš„æ–¹å¼ï¼Œé€šè¿‡æœç´¢è·¯å¾„æ‹¿åˆ°æ­£ç¡®ç­”æ¡ˆäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684748686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2582553,"avatar":"https://static001.geekbang.org/account/avatar/00/27/68/19/148457ec.jpg","nickname":"å¤§è è","note":"","ucode":"B8B017742055C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":618309,"discussion_content":"æˆ‘ä¹Ÿå‘ç°è¿™ä¸ªé—®é¢˜äº†ï¼Œè§£å†³åŠæ³•å°±æ˜¯æŠŠä¸­æ–‡promptæ¢æˆè‹±æ–‡å°±å¥½äº†ã€‚\n```\n...\nq1_prompt = PromptTemplate(\n    input_variables=[&#34;year1&#34;],\n    template=&#34;Which team was the winner of the Champions League in {year1}, just output the name of the team.&#34;\n)\nq2_prompt = PromptTemplate(\n    input_variables=[&#34;year2&#34;],\n    template=&#34;Which team was the winner of the Champions League in {year2}, just output the name of the team.&#34;\n)\nq3_prompt = PromptTemplate(\n    input_variables=[&#34;team1&#34;, &#34;team2&#34;],\n    template=&#34;Which team has won the Champions League more times, {team1} or {team2}?&#34;\n)\n...\n```\n\nè¾“å‡ºç»“æœ\n-&gt; Real Madrid has won the Champions League more times than Inter Milan, with 13 titles compared to Inter Milan&#39;s 3 titles.\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1684168105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŠ æ‹¿å¤§","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373603,"user_name":"æå®¢é›·","can_delete":false,"product_type":"c1","uid":1041465,"ip_address":"å¹¿ä¸œ","ucode":"0DBAC4CB9C7BCD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e4/39/a06ade33.jpg","comment_is_top":false,"comment_ctime":1682753298,"is_pvip":false,"replies":[{"id":136448,"content":"è¿™ä¸ªä¸æ˜¯autogptï¼Œåªæ˜¯é€šè¿‡langchainè¿›è¡Œé“¾å¼è°ƒç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683082640,"ip_address":"ä¸Šæµ·","comment_id":373603,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"autowgptï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616670,"discussion_content":"è¿™ä¸ªä¸æ˜¯autogptï¼Œåªæ˜¯é€šè¿‡langchainè¿›è¡Œé“¾å¼è°ƒç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683082640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373004,"user_name":"è¶…è¶…è¶…è¶…äºº","can_delete":false,"product_type":"c1","uid":1166883,"ip_address":"ä¸Šæµ·","ucode":"7696CACF0DF35F","user_header":"","comment_is_top":false,"comment_ctime":1681908637,"is_pvip":false,"replies":[{"id":136496,"content":"æ˜¯çš„ï¼Œlangchainä¹Ÿæœ‰å¦‚ä½•å®ç°ä¸€ä¸ªautogptçš„use case\nhttps:&#47;&#47;python.langchain.com&#47;en&#47;latest&#47;use_cases&#47;autonomous_agents&#47;autogpt.html","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683088155,"ip_address":"ä¸Šæµ·","comment_id":373004,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è€å¸ˆä½ å¥½ï¼ŒAutoGPT æœ¬è´¨ä¸Šæ˜¯ä¸æ˜¯ä¹Ÿä½¿ç”¨äº†é“¾å¼è°ƒç”¨å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616733,"discussion_content":"æ˜¯çš„ï¼Œlangchainä¹Ÿæœ‰å¦‚ä½•å®ç°ä¸€ä¸ªautogptçš„use case\nhttps://python.langchain.com/en/latest/use_cases/autonomous_agents/autogpt.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683088155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028238,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f2/ce/791d0f5e.jpg","nickname":"å¼ å¼€å…ƒ","note":"","ucode":"455838B89BF154","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":627391,"discussion_content":"https://python.langchain.com/docs/use_cases/more/agents/autonomous_agents/autogpt","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1694080858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372694,"user_name":"å¼ å¼›","can_delete":false,"product_type":"c1","uid":1681607,"ip_address":"ä¸­å›½å°æ¹¾","ucode":"77E0BC5D0667A8","user_header":"https://static001.geekbang.org/account/avatar/00/19/a8/c7/f57dadb9.jpg","comment_is_top":false,"comment_ctime":1681443355,"is_pvip":false,"replies":[{"id":136123,"content":"æˆ‘åœ¨ç›´æ’­çš„æ—¶å€™ç»™è¿‡ï¼Œä¸­æ–‡ä½ å¯ä»¥ç¿»è¯‘è¿‡æ¥è¯•ä¸€ä¸‹ï¼ŒGPT-4ä¸‹ä¸­è‹±æ–‡çš„æ¨ç†è¿‡ç¨‹å’Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚\n\nquestion=&quot;&quot;&quot;You&#39;ve got to defuse a bomb by placing exactly 5 gallons of water on a sensor. \nThe problem is, you only have a 4 gallon jug and a 3 gallons jug on hand! How can you achieve this task?&quot;&quot;&quot;\n","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681615782,"ip_address":"ä¸Šæµ·","comment_id":372694,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ç”¨ChatGPTå®æµ‹æœ¬è®²ä¸­æåˆ°çš„é—®é¢˜ï¼Œå…ˆç¿»è¯‘è‹±æ–‡æé—®ï¼Œå†ç¿»è¯‘å›æ¥ï¼Œå¥½åƒå¹¶æœªäº§ç”Ÿæ›´å¥½çš„ç»“æœï¼Œè·Ÿç›´æ¥ä¸­æ–‡æé—®çš„ç»“æœå·®ä¸å¤šã€‚æˆ‘è¿˜ä¸“é—¨å¼€äº†æ–°çš„chatçª—å£æ¥é¿å…ä¸Šä¸‹æ–‡å½±å“ã€‚è€å¸ˆèƒ½å¦ä¸¾ä¸ªå…·ä½“çš„é€šè¿‡è¿™ç§æ–¹å¼å¾—åˆ°æ›´å¥½ç»“æœçš„æ¡ˆä¾‹å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613972,"discussion_content":"æˆ‘åœ¨ç›´æ’­çš„æ—¶å€™ç»™è¿‡ï¼Œä¸­æ–‡ä½ å¯ä»¥ç¿»è¯‘è¿‡æ¥è¯•ä¸€ä¸‹ï¼ŒGPT-4ä¸‹ä¸­è‹±æ–‡çš„æ¨ç†è¿‡ç¨‹å’Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚\n\nquestion=&#34;&#34;&#34;You&#39;ve got to defuse a bomb by placing exactly 5 gallons of water on a sensor. \nThe problem is, you only have a 4 gallon jug and a 3 gallons jug on hand! How can you achieve this task?&#34;&#34;&#34;\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681615782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372496,"user_name":"Evan","can_delete":false,"product_type":"c1","uid":1344281,"ip_address":"æ—¥æœ¬","ucode":"B877ABD0CF4661","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/19/0a3fe8c1.jpg","comment_is_top":false,"comment_ctime":1681205533,"is_pvip":false,"replies":[{"id":135970,"content":"è¿™æ˜¯å‰é¢ä¸¤ä¸ªLLMChainçš„ouput_keyå‘€ï¼Œæ˜¯é€šè¿‡å‰é¢ä¸¤ä¸ªLLMçš„è¾“å‡ºç»“æœï¼Œå†è¾“å…¥åˆ°è¿™ä¸ªé‡Œé¢çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681263115,"ip_address":"ä¸Šæµ·","comment_id":372496,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"input_variables=[&quot;team1&quot;, &quot;team2&quot;],  æ˜¯æ€ä¹ˆä¼ å…¥å‚æ•°çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613311,"discussion_content":"è¿™æ˜¯å‰é¢ä¸¤ä¸ªLLMChainçš„ouput_keyå‘€ï¼Œæ˜¯é€šè¿‡å‰é¢ä¸¤ä¸ªLLMçš„è¾“å‡ºç»“æœï¼Œå†è¾“å…¥åˆ°è¿™ä¸ªé‡Œé¢çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681263115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372515,"user_name":"Toni","can_delete":false,"product_type":"c1","uid":3206957,"ip_address":"ç‘å£«","ucode":"E6B2FACCC1E000","user_header":"https://static001.geekbang.org/account/avatar/00/30/ef/2d/757bb0d3.jpg","comment_is_top":false,"comment_ctime":1681223114,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"part 1 (å—é™äº2000å­—ç¬¦ï¼Œå°†ç›¸åº”çš„è¿è¡Œä»£ç æ”¾åœ¨äº†part 2)\n\né¢˜ç›®:\né€šè¿‡ Langchain å®ç°è‡ªåŠ¨åŒ–æ’°å†™ Python çš„ä¸€ä¸ªå‡½æ•°(è¿›è¡Œæ—¶é—´æ ¼å¼åŒ–è¾“å‡º)ï¼Œå¹¶ç»™å‡ºå¯¹è¯¥å‡½æ•°çš„å•å…ƒæµ‹è¯•ï¼ŒåŒ…å«å¯¹å¼‚å¸¸è¾“å…¥çš„æµ‹è¯•ã€‚\n\nç›®çš„: \n1. é€šè¿‡è°ƒç”¨ SequentialChain ä½¿ä¸ ChatOpenAI çš„ç¬¬ä¸€æ¬¡å¯¹è¯çš„ç»“æœæˆä¸ºç¬¬äºŒæ¬¡å¯¹è¯çš„è¾“å…¥ï¼Œå¹¶å°†ä¸€ï¼ŒäºŒæ¬¡å¯¹è¯çš„ç»“æœæ˜¾ç¤ºå‡ºæ¥ï¼Œä»¥å¤‡åç»­è°ƒæ•´æ”¹è¿›ã€‚(æ³¨: åœ¨ ChatOpenAI çš„å¯¹è¯çª—ä¸‹ï¼ŒChatGPT çŸ¥é“ä¸Šä¸€æ¬¡å¯¹è¯çš„å†…å®¹ï¼Œæ— éœ€é‡å¤)ã€‚\n2. ä½¿ç”¨è‡ªç„¶è¯­è¨€æç¼–ç¨‹è¦æ±‚ã€‚\n3. é€šè¿‡è°ƒåˆ¶ PromptTemplate ä¸­çš„å‚æ•° template æ¥å®ç°è¾“å‡ºç»“æœçš„æœ€ä¼˜åŒ–ã€‚è¿™å…¶å®å°±æ˜¯è®¾ç½®åˆé€‚çš„ Promptï¼Œä»¥æœŸæœ€æœ‰æ•ˆåœ°ä½¿ç”¨ ChatGPTã€‚\n\næ–¹æ³•:\nå°è¯•ç€è°ƒç”¨äº† SequentialChainï¼Œä½¿ç”¨ ChatOpenAI çš„ &quot;gpt-3.5-turbo&quot;ï¼Œå‚æ•°è®¾ç½® temperature=1\n\nç»“æœ:\n\n&gt; Entering new SequentialChain chain...\n\n&gt; Finished chain.\ndef time_format(seconds):\n    if seconds &lt; 60:\n        return f&quot;{seconds}s&quot;\n    elif seconds &lt; 3600:\n        minutes = seconds &#47;&#47; 60\n        seconds %= 60\n        return f&quot;{minutes}min{seconds}s&quot;\n    else:\n        hours = seconds &#47;&#47; 3600\n        seconds %= 3600\n        minutes = seconds &#47;&#47; 60\n        seconds %= 60\n        return f&quot;{hours}h{minutes}min{seconds}s&quot;\n\n\n&gt; Entering new SequentialChain chain...\n\n&gt; Finished chain.\nimport pytest\n\ndef test_time_format():\n    assert time_format(1) == &#39;1s&#39;\n    assert time_format(61) == &#39;1min1s&#39;\n    assert time_format(3678) == &#39;1h1min18s&#39;\n    assert time_format(-1) == &#39;Invalid input&#39;\n    assert time_format(&#39;abc&#39;) == &#39;Invalid input&#39;\n    assert time_format(None) == &#39;Invalid input&#39;\n    assert time_format(999999) == &#39;277h46min39s&#39; # Add a test case for a large input\n\nAs an AI language model, I cannot run this code, but I can assure you that the above code functions when used in a Python environment with the necessary dependencies and libraries installed.\n\nç»“è®º:\nè¾“å‡ºåŸºæœ¬æ»¡è¶³äº†è®¾è®¡è¦æ±‚ã€‚ChatGPT3.5 åœ¨ç¼–ç¨‹æ–¹é¢æœ‰æ‰€è¡¨ç°ï¼Œå°¤å…¶æ˜¯è€ƒè™‘åˆ°æœ¬ä¾‹ä¸­ä½¿ç”¨çš„æ¨¡å‹æ˜¯ gpt-3.5-turboã€‚","like_count":2,"discussions":[{"author":{"id":2403622,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ad/26/767527f6.jpg","nickname":"Owen","note":"","ucode":"FDE0D574B8ED5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638575,"discussion_content":"ä½ æ˜¯å˜‰ä¼Ÿå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709706525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3206957,"avatar":"https://static001.geekbang.org/account/avatar/00/30/ef/2d/757bb0d3.jpg","nickname":"Toni","note":"","ucode":"E6B2FACCC1E000","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2403622,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ad/26/767527f6.jpg","nickname":"Owen","note":"","ucode":"FDE0D574B8ED5A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":638606,"discussion_content":"ä¸æ˜¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1709719868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":638575,"ip_address":"ç‘å£«","group_id":0},"score":638606,"extra":""}]}]},{"had_liked":false,"id":372516,"user_name":"Toni","can_delete":false,"product_type":"c1","uid":3206957,"ip_address":"ç‘å£«","ucode":"E6B2FACCC1E000","user_header":"https://static001.geekbang.org/account/avatar/00/30/ef/2d/757bb0d3.jpg","comment_is_top":false,"comment_ctime":1681224394,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"part 2\n\nåœ¨ part 1 ä¸­ä½¿ç”¨çš„ä»£ç å¦‚ä¸‹:\n\nimport openai, os\nfrom langchain.chat_models import ChatOpenAI  #from langchain.llms import OpenAI\nfrom langchain.prompts import PromptTemplate\nfrom langchain.chains import LLMChain\nfrom langchain.chains import SequentialChain\n\nopenai.api_key = os.environ.get(&quot;OPENAI_API_KEY&quot;)\nllm = ChatOpenAI(model_name=&quot;gpt-3.5-turbo&quot;, max_tokens=2048, temperature=1)  #text-davinci-003, 2048, max_tokens: 4096 for gpt-3.5-turbo\n\nQ1_prompt = PromptTemplate(\n    template=&quot;ç”¨Pythonå†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿›è¡Œæ—¶é—´æ ¼å¼åŒ–è¾“å‡ºï¼Œè¦æ±‚ä»…éœ€è¦æ ¼å¼åŒ–åˆ°å°æ—¶(?h?min?s)ã€‚æ¯”å¦‚ï¼š{Q1}&quot;,\n    input_variables=[&quot;Q1&quot;]\n)\nQ2_prompt = PromptTemplate(\n#    template=&quot;è¯·ä¸ºç¨‹åº{A1}ç”¨&#39;pytest&#39; å†™ä¸€ä¸ªå•å…ƒæµ‹è¯•&quot;,\n    template=&quot;&quot;&quot;è¯·ä¸ºç¨‹åº{A1}ç”¨&#39;pytest&#39; å†™ä¸€ä¸ªå•å…ƒæµ‹è¯•, \n    Besides the test that counts negative numbers, include test cases like the input string &quot;abc&quot;, \n    and any other test cases you can think of, \n    å°†æ‰€æœ‰çš„ Test Cases å†™å…¥åŒä¸€ä¸ªæµ‹è¯•ä¸­&quot;&quot;&quot;,\n    input_variables=[&quot;A1&quot;]\n)\n\nchain1 = LLMChain(llm=llm, prompt=Q1_prompt, output_key=&quot;A1&quot;)\nchain2 = LLMChain(llm=llm, prompt=Q2_prompt, output_key=&quot;A2&quot;)\n\nq1=&quot;&quot;&quot;\nè¾“å…¥  è¾“å‡º\n1  1s\n61  1min1s\n&quot;&quot;&quot;\n\nsequential_chain_p1 = SequentialChain(chains=[chain1], input_variables=[&quot;Q1&quot;], verbose=True)\nanswer1 = sequential_chain_p1.run(Q1=q1)\nprint(answer1)\n\nsequential_chain_p2 = SequentialChain(chains=[chain1, chain2], input_variables=[&quot;Q1&quot;], verbose=True)\nanswer2 = sequential_chain_p2.run(Q1=q1)\nprint(answer2)\n\n-----------\n-----------\n\nå¦‚ä½•å°†ä»£ç å°è£…åœ¨ä¸€ä¸ª App ä¸­å‘¢? \næœªæ¥çš„ç¨‹åºè¾…åŠ©è®¾è®¡æ˜¯æ²¿è¿™ä¸ªæ€è·¯èµ°è¿˜æ˜¯å¦è¾Ÿè¹Šå¾„? \nå¦‚æœæœ‰äº†ç”¨æˆ·äº¤äº’ç•Œé¢ï¼Œå¦‚ä½•æ§åˆ¶ç”Ÿæˆçš„ç¨‹åºä¸è‡ªå·±ä¹±è·‘ï¼Œäº¦æˆ– &#39;åœ¨æ­£ç¡®ä½¿ç”¨çš„å¼•å¯¼ä¸‹&#39; è®©è‡ªåŠ¨åˆè‡ªåŠ¨ç”Ÿæˆçš„ç¨‹åºè·‘å‡ºäº† &#39;å¤©é™…&#39;ï¼Œä½¿å¾—è®©äººç™¾æ€ä¸å¾—å…¶è§£çš„äº‹ï¼Œè±ç„¶å¼€æœ—äº†èµ·æ¥ã€‚\n\nè§£äº†ä¸€é¢˜ç•™ä¸‹äº†æ›´å¤šé—®é¢˜ã€‚","like_count":1},{"had_liked":false,"id":388678,"user_name":"HXL","can_delete":false,"product_type":"c1","uid":2631455,"ip_address":"åŒ—äº¬","ucode":"97298EEC95BFCA","user_header":"https://static001.geekbang.org/account/avatar/00/28/27/1f/42059b0f.jpg","comment_is_top":false,"comment_ctime":1710670591,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"é‡åˆ°ç»™ä»£ç é—®é¢˜,ç¿»æ–‡æ¡£ä¹Ÿæ²¡æ‰¾åˆ°æ€ä¹ˆè§£å†³,ä¸çŸ¥é“è¯¥å¦‚ä½•ç»™plan_chain ä¼ é€’å‚æ•°. ç°åœ¨ä¸€ç›´æŠ¥ &quot;Error: Missing value for input unit_test_package&quot;\n\n&quot;&quot;&quot;\nconst modal = new ChatOpenAI({\n    maxTokens: 2048,\n    temperature: 0.5,\n    stop: [&#39;\\n\\n&#39;],\n    topP: 1,\n});\n&#47;&#47;\nconst explain_prompt = new PromptTemplate({\n    &#47;&#47;...\n})\nconst explain_chain = explain_prompt.pipe(modal);\n&#47;&#47;\nconst plan_prompt = new PromptTemplate({\n      template: `\n      &quot;&quot;&quot;\n    A good unit test suite should aim to:\n    - Test the function&#39;s behavior for a wide range of possible inputs\n    - Test edge cases that the author may not have foreseen\n    - Take advantage of the features of &#39;{unit_test_package}&#39; to make the tests easy to write and maintain\n    - Be easy to read and understand, with clean code and descriptive names\n    - Be deterministic, so that the tests always pass or fail in the same way\n\n    &#39;{unit_test_package}&#39; has many convenient features that make it easy to write and maintain unit tests. We&#39;ll use them to write unit tests for the function above.\n\n    For this particular function, we&#39;ll want our unit tests to handle the following diverse scenarios (and under each scenario, we include a few examples as sub-bullets):\n    -&quot;&quot;&quot;\n      `,\n    inputVariables: [&#39;unit_test_package&#39;],\n});\nconst plan_chain = plan_prompt.pipe(modal);\n&#47;&#47;\nconst write_prompt = new PromptTemplate({\n    &#47;&#47;...\n});\nconst write_chain = write_prompt.pipe(modal);\n&#47;&#47;\nasync function main(){\n    &#47;&#47;\n    const test_code = `\n    &#47;&#47;...\n    `;\n    &#47;&#47; FIXME: å¦‚ä½•ç»™ plain_chain ä¼ é€’å‚æ•°ï¼Ÿ\n    const sequence = RunnableSequence.from([explain_chain, plan_chain, write_chain]);\n    const resp = await sequence.invoke({\n        unit_test_package: &#39;jest&#39;,\n        function_to_test: test_code,\n    })\n    console.log(resp);\n};\nmain()\n&quot;&quot;&quot;","like_count":0},{"had_liked":false,"id":387646,"user_name":"Esquel-GET IT - gaofeng","can_delete":false,"product_type":"c1","uid":3780735,"ip_address":"å¹¿ä¸œ","ucode":"AEAD16B2A0967F","user_header":"https://static001.geekbang.org/account/avatar/00/39/b0/7f/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1708322587,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"ä¸Šä¸‹æ–‡è®°å¿†ç­”å¤ï¼Œä¸Šæ–‡æ€»ç»“ï¼Œå°†æ€»ç»“çš„ä¿¡æ¯é™„åŠ åˆ°ä¸‹ä¸€æ¬¡å¯¹è¯ä¸­ï¼Œå¦‚æœæ˜¯å°†ä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡ï¼Œç­”æ¡ˆç”±è‹±æ–‡è½¬æ¢æˆä¸­æ–‡ï¼Œå¯¹äºè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè‹±æ–‡çš„æ€»ç»“å’Œä¸­æ–‡çš„æ€»ç»“æ˜¯å¦ä¸€è‡´ï¼Ÿåº”è¯¥æ˜¯æœ‰å·®å¼‚çš„å§ï¼Ÿå¯¹äºå›å¤çš„å†…å®¹å¦‚ä½•æé«˜ç²¾å‡†åº¦ï¼Ÿ","like_count":0},{"had_liked":false,"id":381237,"user_name":"å°ç†æƒ³ã€‚","can_delete":false,"product_type":"c1","uid":2238528,"ip_address":"åŒ—äº¬","ucode":"EDC35A907570DB","user_header":"https://static001.geekbang.org/account/avatar/00/22/28/40/82d748e6.jpg","comment_is_top":false,"comment_ctime":1694875451,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆæƒ³é—®ä¸€ä¸‹ï¼Œlangchainå¢åŠ äº†PromptTempleteæœ‰ä»€ä¹ˆæ€§èƒ½çš„ä¼˜åŠ¿å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":376127,"user_name":"èŠ±é›¨ç”°","can_delete":false,"product_type":"c1","uid":1928997,"ip_address":"ä¸Šæµ·","ucode":"5847A8443779D1","user_header":"https://static001.geekbang.org/account/avatar/00/1d/6f/25/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1686369225,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"ç†è§£ä¸‹æ–¹ä»£ç ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ï¼Œå†ç”Ÿæˆä¸€éwrite_unit_testï¼ˆcodeï¼‰ã€‚\n\næ˜¯å¦é‡ç”Ÿæˆæ—¶ï¼ŒæŠŠå¼‚å¸¸ä¿¡æ¯ä¹Ÿç»™åˆ°è¯­è¨€æ¨¡å‹ä¼šæœ‰å¸®åŠ©ï¼Ÿ\n\nexcept SyntaxError as e:\n            print(f&quot;Syntax error in generated code: {e}&quot;)\n            all_code = code + write_unit_test(code)\n            tried += 1","like_count":0},{"had_liked":false,"id":375272,"user_name":"éª¨æ±¤é¸¡è›‹é¢","can_delete":false,"product_type":"c1","uid":1050002,"ip_address":"åŒ—äº¬","ucode":"2AC141A523E710","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/92/b609f7e3.jpg","comment_is_top":false,"comment_ctime":1685199904,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆå‰æ–‡è¯´è¿‡ï¼šå¤§è¯­è¨€æ¨¡å‹çš„ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¯æ§æ€§å·®ã€‚é‚£æ‰€è°“çš„åŸºäºå¤§æ¨¡å‹å¼€å‘ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯å…ˆé’ˆå¯¹æ¯ä¸ª&#47;å¤šä¸ªé—®é¢˜æ‰¾åˆ°æ¯”è¾ƒå¥½çš„promptï¼Œä»¥ä¾¿äºåŸºäºè¿™ä¸ªprompt èƒ½å¤Ÿæ¯”è¾ƒå¥½çš„å¾—åˆ°æŸç±»é—®é¢˜çš„å›ç­”ï¼Œç„¶åå†ç”¨LangChainè¿™ç±»å·¥å…·å°†promptä¸²èµ·æ¥ï¼Œå³å¯è¿™å¯¹æŸä¸€ä¸ªåœºæ™¯å¾—åˆ°ç›¸å¯¹ç¡®å®šæ•ˆæœçš„ç»“æœã€‚","like_count":0},{"had_liked":false,"id":375068,"user_name":"é‡‘hb.Ryan å†·ç©ºæ°£é§•åˆ°","can_delete":false,"product_type":"c1","uid":1222233,"ip_address":"ä¸Šæµ·","ucode":"CAD363576696E4","user_header":"https://static001.geekbang.org/account/avatar/00/12/a6/59/1689ea0c.jpg","comment_is_top":false,"comment_ctime":1684857517,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"### å†™ä¸€ä¸ªé¦–æ­Œ ï¼Œæ¨¡ä»¿&lt;muisc_copy&gt;\nè®¾è®¡ä¸€äº›æ­Œåï¼Œæ¨¡ä»¿&lt;muisc_copy&gt; ï¼Œéœ€è¦ç»™æˆ‘ä¸‰ä¸ªæ­Œåï¼Œä¸ç”¨å‘Šè¯‰æˆ‘ä¸ºä»€ä¹ˆ -&gt; &lt; music_titles&gt;\n\nå¦‚æœæƒ³æ¨¡ä»¿&lt;music_copu&gt; ä¸‹é¢å“ªä¸ªæ ‡é¢˜æ›´å¥½\\n&lt;music_titles&gt;\\nï¼Œä¸ç”¨å‘Šè¯‰æˆ‘ä¸ºä»€ä¹ˆï¼Œç›´æ¥å‘Šè¯‰{æ­Œå},ä¸éœ€è¦è¿”å›æ­Œåä¸¤ä¸ªå­—: -&gt; &lt;music_title&gt;\n\nç”¨&lt;music_title&gt;ä¸ºæ­Œåï¼Œæ¨¡ä»¿&lt;music_copy&gt; å¡«å†™æ­Œè¯\n\n &gt; Finished chain.\nä¹å·é£äº‘\n\nVerse 1:\nç™¾å§“ç–²æƒ«ï¼Œæˆ˜ç«æœªæ¯\næ±Ÿæ¹–é™©æ¶ï¼Œè‹±é›„æ— æ•°\né£äº‘é™…ä¼šï¼Œè°åˆèƒ½æ–™\nå‰‘å…‰é£èˆï¼Œè¡€æŸ“é•¿è¡«\n\nChorus:\nä¹å·é£äº‘ï¼Œè°èƒ½æŒæ§\nå‰‘æŒ‡å¤©ä¸‹ï¼Œè°èƒ½ç§°é›„\næ±Ÿå±±æ°¸å›ºï¼Œè°åˆèƒ½å®ˆ\nè‹±é›„è±ªæ°ï¼Œè°æ‰æ˜¯çœŸæ­£çš„ç‹è€…\n\nVerse 2:\nå¿ ä¹‰ä»å‹‡ï¼Œæ˜¯æˆ‘ä»¬çš„ä¿¡ä»°\næ±Ÿå±±å¦‚ç”»ï¼Œæˆ‘ä»¬å®ˆæŠ¤\nè¡€æŸ“é•¿æªï¼Œæ˜¯æˆ‘ä»¬çš„è£å…‰\nå¤©ä¸‹å½’å¿ƒï¼Œæˆ‘ä»¬çš„æ„¿æœ›\n\nChorus:\nä¹å·é£äº‘ï¼Œè°èƒ½æŒæ§\nå‰‘æŒ‡å¤©ä¸‹ï¼Œè°èƒ½ç§°é›„\næ±Ÿå±±æ°¸å›ºï¼Œè°åˆèƒ½å®ˆ\nè‹±é›„è±ªæ°ï¼Œè°æ‰æ˜¯çœŸæ­£çš„ç‹è€…\n\nBridge:\nå²æœˆå¦‚æ¢­ï¼Œè‹±é›„é€å»\nä½†æ±Ÿå±±æ°¸åœ¨ï¼Œæˆ‘ä»¬çš„ä¿¡ä»°\nä¹å·é£äº‘ï¼Œæ°¸è¿œä¸ä¼šæ¶ˆé€\næˆ‘ä»¬å°±æ˜¯é‚£äº›ï¼Œå†å²é•¿æ²³ä¸­çš„ä¼ å¥‡\n\nChorus:\nä¹å·é£äº‘ï¼Œè°èƒ½æŒæ§\nå‰‘æŒ‡å¤©ä¸‹ï¼Œè°èƒ½ç§°é›„\næ±Ÿå±±æ°¸å›ºï¼Œè°åˆèƒ½å®ˆ\nè‹±é›„è±ªæ°ï¼Œè°æ‰æ˜¯çœŸæ­£çš„ç‹è€…\n\nOutro:\nä¹å·é£äº‘ï¼Œæˆ‘ä»¬çš„ä¼ å¥‡\næ°¸è¿œé“­åˆ»åœ¨å†å²é•¿æ²³ä¹‹ä¸­\næˆ‘ä»¬æ˜¯é‚£äº›ï¼Œç‡ƒçƒ§ç”Ÿå‘½çš„è‹±é›„\nä¹å·é£äº‘ï¼Œæˆ‘ä»¬çš„è£å…‰æ°¸ä¸ç£¨ç­\n","like_count":0},{"had_liked":false,"id":373510,"user_name":"Geek_7ef8fe","can_delete":false,"product_type":"c1","uid":3573382,"ip_address":"åŒ—äº¬","ucode":"19278590649E03","user_header":"","comment_is_top":false,"comment_ctime":1682586663,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"åªæœ‰ SimpleSequentialChain, verbose=True ï¼Œå¯ä»¥æ‰“å°ä¸å‡ºè¿‡ç¨‹æ—¥å¿—ã€‚\nSequantialChain, verbose=True ï¼Œä»ç„¶æ‰“å°ä¸å‡ºè¿‡ç¨‹æ—¥å¿—ã€‚æœ‰äººçŸ¥é“ æ€ä¹ˆè§£å†³å˜›ï¼Ÿ","like_count":0},{"had_liked":false,"id":372639,"user_name":"ç‹jojo","can_delete":false,"product_type":"c1","uid":1812840,"ip_address":"åŒ—äº¬","ucode":"1ABE7FA2614F86","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a9/68/ec442a70.jpg","comment_is_top":false,"comment_ctime":1681374215,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è¿™ä¸ªæ€è·¯ç¡®å®å¯ä»¥ï¼Œå†™ç®€å•ä»£ç å¯ä»¥è¿™æ ·æï¼Œå®é™…ä¸­éœ€è¦èƒ½æŠŠä»£ç è¿è¡Œèµ·æ¥ï¼Œå†æŠŠç»“æœåç»™aiã€‚","like_count":0}]}