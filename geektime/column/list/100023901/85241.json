{"id":85241,"title":"06 | ç”¨â€œç­‰å¾…-é€šçŸ¥â€æœºåˆ¶ä¼˜åŒ–å¾ªç¯ç­‰å¾…","content":"<p>ç”±ä¸Šä¸€ç¯‡æ–‡ç« ä½ åº”è¯¥å·²ç»çŸ¥é“ï¼Œåœ¨<strong>ç ´åå ç”¨ä¸”ç­‰å¾…æ¡ä»¶</strong>çš„æ—¶å€™ï¼Œå¦‚æœè½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬ä¸æ»¡è¶³åŒæ—¶åœ¨æ–‡ä»¶æ¶ä¸Šè¿™ä¸ªæ¡ä»¶ï¼Œå°±ç”¨æ­»å¾ªç¯çš„æ–¹å¼æ¥å¾ªç¯ç­‰å¾…ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ\nwhile(!actr.apply(this, target))\n  ï¼›\n</code></pre><p>å¦‚æœapply()æ“ä½œè€—æ—¶éå¸¸çŸ­ï¼Œè€Œä¸”å¹¶å‘å†²çªé‡ä¹Ÿä¸å¤§æ—¶ï¼Œè¿™ä¸ªæ–¹æ¡ˆè¿˜æŒºä¸é”™çš„ï¼Œå› ä¸ºè¿™ç§åœºæ™¯ä¸‹ï¼Œå¾ªç¯ä¸Šå‡ æ¬¡æˆ–è€…å‡ åæ¬¡å°±èƒ½ä¸€æ¬¡æ€§è·å–è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·äº†ã€‚ä½†æ˜¯å¦‚æœapply()æ“ä½œè€—æ—¶é•¿ï¼Œæˆ–è€…å¹¶å‘å†²çªé‡å¤§çš„æ—¶å€™ï¼Œå¾ªç¯ç­‰å¾…è¿™ç§æ–¹æ¡ˆå°±ä¸é€‚ç”¨äº†ï¼Œå› ä¸ºåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå¯èƒ½è¦å¾ªç¯ä¸Šä¸‡æ¬¡æ‰èƒ½è·å–åˆ°é”ï¼Œå¤ªæ¶ˆè€—CPUäº†ã€‚</p><p>å…¶å®åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæœ€å¥½çš„æ–¹æ¡ˆåº”è¯¥æ˜¯ï¼šå¦‚æœçº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ï¼ˆè½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬åŒåœ¨æ–‡ä»¶æ¶ä¸Šï¼‰ä¸æ»¡è¶³ï¼Œåˆ™çº¿ç¨‹é˜»å¡è‡ªå·±ï¼Œè¿›å…¥<strong>ç­‰å¾…</strong>çŠ¶æ€ï¼›å½“çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ï¼ˆè½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬åŒåœ¨æ–‡ä»¶æ¶ä¸Šï¼‰æ»¡è¶³åï¼Œ<strong>é€šçŸ¥</strong>ç­‰å¾…çš„çº¿ç¨‹é‡æ–°æ‰§è¡Œã€‚å…¶ä¸­ï¼Œä½¿ç”¨çº¿ç¨‹é˜»å¡çš„æ–¹å¼å°±èƒ½é¿å…å¾ªç¯ç­‰å¾…æ¶ˆè€—CPUçš„é—®é¢˜ã€‚</p><p>é‚£Javaè¯­è¨€æ˜¯å¦æ”¯æŒè¿™ç§<strong>ç­‰å¾…-é€šçŸ¥æœºåˆ¶</strong>å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¸€å®šæ”¯æŒï¼ˆæ¯•ç«Ÿå æ®æ’è¡Œæ¦œç¬¬ä¸€é‚£ä¹ˆä¹…ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹Javaè¯­è¨€æ˜¯å¦‚ä½•æ”¯æŒ<strong>ç­‰å¾…-é€šçŸ¥æœºåˆ¶</strong>çš„ã€‚</p><h2>å®Œç¾çš„å°±åŒ»æµç¨‹</h2><p>åœ¨ä»‹ç»Javaè¯­è¨€å¦‚ä½•æ”¯æŒç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç°å®ä¸–ç•Œé‡Œé¢çš„å°±åŒ»æµç¨‹ï¼Œå› ä¸ºå®ƒæœ‰ç€å®Œå–„çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ï¼Œæ‰€ä»¥å¯¹æ¯”å°±åŒ»æµç¨‹ï¼Œæˆ‘ä»¬å°±èƒ½æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨å¹¶å‘ç¼–ç¨‹ä¸­çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ã€‚</p><!-- [[[read_end]]] --><p>å°±åŒ»æµç¨‹åŸºæœ¬ä¸Šæ˜¯è¿™æ ·ï¼š</p><ol>\n<li>æ‚£è€…å…ˆå»æŒ‚å·ï¼Œç„¶ååˆ°å°±è¯Šé—¨å£åˆ†è¯Šï¼Œç­‰å¾…å«å·ï¼›</li>\n<li>å½“å«åˆ°è‡ªå·±çš„å·æ—¶ï¼Œæ‚£è€…å°±å¯ä»¥æ‰¾å¤§å¤«å°±è¯Šäº†ï¼›</li>\n<li>å°±è¯Šè¿‡ç¨‹ä¸­ï¼Œå¤§å¤«å¯èƒ½ä¼šè®©æ‚£è€…å»åšæ£€æŸ¥ï¼ŒåŒæ—¶å«ä¸‹ä¸€ä½æ‚£è€…ï¼›</li>\n<li>å½“æ‚£è€…åšå®Œæ£€æŸ¥åï¼Œæ‹¿æ£€æµ‹æŠ¥å‘Šé‡æ–°åˆ†è¯Šï¼Œç­‰å¾…å«å·ï¼›</li>\n<li>å½“å¤§å¤«å†æ¬¡å«åˆ°è‡ªå·±çš„å·æ—¶ï¼Œæ‚£è€…å†å»æ‰¾å¤§å¤«å°±è¯Šã€‚</li>\n</ol><p>æˆ–è®¸ä½ å·²ç»å‘ç°äº†ï¼Œè¿™ä¸ªæœ‰ç€å®Œç¾ç­‰å¾…-é€šçŸ¥æœºåˆ¶çš„å°±åŒ»æµç¨‹ï¼Œä¸ä»…èƒ½å¤Ÿä¿è¯åŒä¸€æ—¶åˆ»å¤§å¤«åªä¸ºä¸€ä¸ªæ‚£è€…æœåŠ¡ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿä¿è¯å¤§å¤«å’Œæ‚£è€…çš„æ•ˆç‡ã€‚ä¸æ­¤åŒæ—¶ä½ å¯èƒ½ä¹Ÿä¼šæœ‰ç–‘é—®ï¼Œâ€œè¿™ä¸ªå°±åŒ»æµç¨‹å¾ˆå¤æ‚å‘€ï¼Œæˆ‘ä»¬å‰é¢æè¿°çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ç›¸è¾ƒè€Œè¨€æ˜¯ä¸æ˜¯å¤ªç®€å•äº†ï¼Ÿâ€é‚£è¿™ä¸ªå¤æ‚åº¦æ˜¯å¦æ˜¯å¿…é¡»çš„å‘¢ï¼Ÿè¿™ä¸ªæ˜¯å¿…é¡»çš„ï¼Œæˆ‘ä»¬ä¸èƒ½å¿½è§†ç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¸­çš„ä¸€äº›ç»†èŠ‚ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥å¯¹æ¯”çœ‹ä¸€ä¸‹å‰é¢éƒ½å¿½è§†äº†å“ªäº›ç»†èŠ‚ã€‚</p><ol>\n<li>æ‚£è€…åˆ°å°±è¯Šé—¨å£åˆ†è¯Šï¼Œç±»ä¼¼äºçº¿ç¨‹è¦å»è·å–äº’æ–¥é”ï¼›å½“æ‚£è€…è¢«å«åˆ°æ—¶ï¼Œç±»ä¼¼çº¿ç¨‹å·²ç»è·å–åˆ°é”äº†ã€‚</li>\n<li>å¤§å¤«è®©æ‚£è€…å»åšæ£€æŸ¥ï¼ˆç¼ºä¹æ£€æµ‹æŠ¥å‘Šä¸èƒ½è¯Šæ–­ç—…å› ï¼‰ï¼Œç±»ä¼¼äºçº¿ç¨‹è¦æ±‚çš„æ¡ä»¶æ²¡æœ‰æ»¡è¶³ã€‚</li>\n<li>æ‚£è€…å»åšæ£€æŸ¥ï¼Œç±»ä¼¼äºçº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼›ç„¶å<strong>å¤§å¤«å«ä¸‹ä¸€ä¸ªæ‚£è€…ï¼Œè¿™ä¸ªæ­¥éª¤æˆ‘ä»¬åœ¨å‰é¢çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¸­å¿½è§†äº†ï¼Œè¿™ä¸ªæ­¥éª¤å¯¹åº”åˆ°ç¨‹åºé‡Œï¼Œæœ¬è´¨æ˜¯çº¿ç¨‹é‡Šæ”¾æŒæœ‰çš„äº’æ–¥é”</strong>ã€‚</li>\n<li>æ‚£è€…åšå®Œæ£€æŸ¥ï¼Œç±»ä¼¼äºçº¿ç¨‹è¦æ±‚çš„æ¡ä»¶å·²ç»æ»¡è¶³ï¼›<strong>æ‚£è€…æ‹¿æ£€æµ‹æŠ¥å‘Šé‡æ–°åˆ†è¯Šï¼Œç±»ä¼¼äºçº¿ç¨‹éœ€è¦é‡æ–°è·å–äº’æ–¥é”ï¼Œè¿™ä¸ªæ­¥éª¤æˆ‘ä»¬åœ¨å‰é¢çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¸­ä¹Ÿå¿½è§†äº†</strong>ã€‚</li>\n</ol><p>æ‰€ä»¥åŠ ä¸Šè¿™äº›è‡³å…³é‡è¦çš„ç»†èŠ‚ï¼Œç»¼åˆä¸€ä¸‹ï¼Œå°±å¯ä»¥å¾—å‡º<strong>ä¸€ä¸ªå®Œæ•´çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶ï¼šçº¿ç¨‹é¦–å…ˆè·å–äº’æ–¥é”ï¼Œå½“çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œé‡Šæ”¾äº’æ–¥é”ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼›å½“è¦æ±‚çš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œé€šçŸ¥ç­‰å¾…çš„çº¿ç¨‹ï¼Œé‡æ–°è·å–äº’æ–¥é”</strong>ã€‚</p><h2>ç”¨synchronizedå®ç°ç­‰å¾…-é€šçŸ¥æœºåˆ¶</h2><p>åœ¨Javaè¯­è¨€é‡Œï¼Œç­‰å¾…-é€šçŸ¥æœºåˆ¶å¯ä»¥æœ‰å¤šç§å®ç°æ–¹å¼ï¼Œæ¯”å¦‚Javaè¯­è¨€å†…ç½®çš„synchronizedé…åˆwait()ã€notify()ã€notifyAll()è¿™ä¸‰ä¸ªæ–¹æ³•å°±èƒ½è½»æ¾å®ç°ã€‚</p><p>å¦‚ä½•ç”¨synchronizedå®ç°äº’æ–¥é”ï¼Œä½ åº”è¯¥å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚åœ¨ä¸‹é¢è¿™ä¸ªå›¾é‡Œï¼Œå·¦è¾¹æœ‰ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼ŒåŒä¸€æ—¶åˆ»ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥synchronizedä¿æŠ¤çš„ä¸´ç•ŒåŒºï¼ˆè¿™ä¸ªä¸´ç•ŒåŒºå¯ä»¥çœ‹ä½œå¤§å¤«çš„è¯Šå®¤ï¼‰ï¼Œå½“æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºåï¼Œå…¶ä»–çº¿ç¨‹å°±åªèƒ½è¿›å…¥å›¾ä¸­å·¦è¾¹çš„ç­‰å¾…é˜Ÿåˆ—é‡Œç­‰å¾…ï¼ˆç›¸å½“äºæ‚£è€…åˆ†è¯Šç­‰å¾…ï¼‰ã€‚<strong>è¿™ä¸ªç­‰å¾…é˜Ÿåˆ—å’Œäº’æ–¥é”æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œæ¯ä¸ªäº’æ–¥é”éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ç­‰å¾…é˜Ÿåˆ—ã€‚</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/c6/d0/c6640129fde927be8882ca90981613d0.png?wh=1142*654\" alt=\"\"></p><center><span class=\"reference\">wait()æ“ä½œå·¥ä½œåŸç†å›¾</span></center><p>åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºåï¼Œç”±äºæŸäº›æ¡ä»¶ä¸æ»¡è¶³ï¼Œéœ€è¦è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒJavaå¯¹è±¡çš„wait()æ–¹æ³•å°±èƒ½å¤Ÿæ»¡è¶³è¿™ç§éœ€æ±‚ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“è°ƒç”¨wait()æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹å°±ä¼šè¢«é˜»å¡ï¼Œå¹¶ä¸”è¿›å…¥åˆ°å³è¾¹çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œ<strong>è¿™ä¸ªç­‰å¾…é˜Ÿåˆ—ä¹Ÿæ˜¯äº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—</strong>ã€‚ çº¿ç¨‹åœ¨è¿›å…¥ç­‰å¾…é˜Ÿåˆ—çš„åŒæ—¶ï¼Œ<strong>ä¼šé‡Šæ”¾æŒæœ‰çš„äº’æ–¥é”</strong>ï¼Œçº¿ç¨‹é‡Šæ”¾é”åï¼Œå…¶ä»–çº¿ç¨‹å°±æœ‰æœºä¼šè·å¾—é”ï¼Œå¹¶è¿›å…¥ä¸´ç•ŒåŒºäº†ã€‚</p><p>é‚£çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œè¯¥æ€ä¹ˆé€šçŸ¥è¿™ä¸ªç­‰å¾…çš„çº¿ç¨‹å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯Javaå¯¹è±¡çš„notify()å’ŒnotifyAll()æ–¹æ³•ã€‚æˆ‘åœ¨ä¸‹é¢è¿™ä¸ªå›¾é‡Œä¸ºä½ å¤§è‡´æè¿°äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œå½“æ¡ä»¶æ»¡è¶³æ—¶è°ƒç”¨notify()ï¼Œä¼šé€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆ<strong>äº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—</strong>ï¼‰ä¸­çš„çº¿ç¨‹ï¼Œå‘Šè¯‰å®ƒ<strong>æ¡ä»¶æ›¾ç»æ»¡è¶³è¿‡</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/8c/1b3e999c300166a84f2e8cc7a4b8f78c.png?wh=1142*720\" alt=\"\"></p><center><span class=\"reference\">notify()æ“ä½œå·¥ä½œåŸç†å›¾</span></center><p>ä¸ºä»€ä¹ˆè¯´æ˜¯æ›¾ç»æ»¡è¶³è¿‡å‘¢ï¼Ÿå› ä¸º<strong>notify()åªèƒ½ä¿è¯åœ¨é€šçŸ¥æ—¶é—´ç‚¹ï¼Œæ¡ä»¶æ˜¯æ»¡è¶³çš„</strong>ã€‚è€Œè¢«é€šçŸ¥çº¿ç¨‹çš„<strong>æ‰§è¡Œæ—¶é—´ç‚¹å’Œé€šçŸ¥çš„æ—¶é—´ç‚¹</strong>åŸºæœ¬ä¸Šä¸ä¼šé‡åˆï¼Œæ‰€ä»¥å½“çº¿ç¨‹æ‰§è¡Œçš„æ—¶å€™ï¼Œå¾ˆå¯èƒ½æ¡ä»¶å·²ç»ä¸æ»¡è¶³äº†ï¼ˆä¿ä¸é½æœ‰å…¶ä»–çº¿ç¨‹æ’é˜Ÿï¼‰ã€‚è¿™ä¸€ç‚¹ä½ éœ€è¦æ ¼å¤–æ³¨æ„ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œè¢«é€šçŸ¥çš„çº¿ç¨‹è¦æƒ³é‡æ–°æ‰§è¡Œï¼Œä»ç„¶éœ€è¦è·å–åˆ°äº’æ–¥é”ï¼ˆå› ä¸ºæ›¾ç»è·å–çš„é”åœ¨è°ƒç”¨wait()æ—¶å·²ç»é‡Šæ”¾äº†ï¼‰ã€‚</p><p>ä¸Šé¢æˆ‘ä»¬ä¸€ç›´å¼ºè°ƒwait()ã€notify()ã€notifyAll()æ–¹æ³•æ“ä½œçš„ç­‰å¾…é˜Ÿåˆ—æ˜¯äº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œæ‰€ä»¥å¦‚æœsynchronizedé”å®šçš„æ˜¯thisï¼Œé‚£ä¹ˆå¯¹åº”çš„ä¸€å®šæ˜¯this.wait()ã€this.notify()ã€this.notifyAll()ï¼›å¦‚æœsynchronizedé”å®šçš„æ˜¯targetï¼Œé‚£ä¹ˆå¯¹åº”çš„ä¸€å®šæ˜¯target.wait()ã€target.notify()ã€target.notifyAll() ã€‚è€Œä¸”wait()ã€notify()ã€notifyAll()è¿™ä¸‰ä¸ªæ–¹æ³•èƒ½å¤Ÿè¢«è°ƒç”¨çš„å‰ææ˜¯å·²ç»è·å–äº†ç›¸åº”çš„äº’æ–¥é”ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå‘ç°wait()ã€notify()ã€notifyAll()éƒ½æ˜¯åœ¨synchronized{}å†…éƒ¨è¢«è°ƒç”¨çš„ã€‚å¦‚æœåœ¨synchronized{}å¤–éƒ¨è°ƒç”¨ï¼Œæˆ–è€…é”å®šçš„thisï¼Œè€Œç”¨target.wait()è°ƒç”¨çš„è¯ï¼ŒJVMä¼šæŠ›å‡ºä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ï¼š<code>java.lang.IllegalMonitorStateException</code>ã€‚</p><h2>å°è¯•ç‰›åˆ€ï¼šä¸€ä¸ªæ›´å¥½åœ°èµ„æºåˆ†é…å™¨</h2><p>ç­‰å¾…-é€šçŸ¥æœºåˆ¶çš„åŸºæœ¬åŸç†ææ¸…æ¥šåï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å®ƒå¦‚ä½•è§£å†³ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·çš„é—®é¢˜å§ã€‚åœ¨è¿™ä¸ªç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»¥ä¸‹å››ä¸ªè¦ç´ ã€‚</p><ol>\n<li>äº’æ–¥é”ï¼šä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬æåˆ°Allocatoréœ€è¦æ˜¯å•ä¾‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨thisä½œä¸ºäº’æ–¥é”ã€‚</li>\n<li>çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ï¼šè½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·éƒ½æ²¡æœ‰è¢«åˆ†é…è¿‡ã€‚</li>\n<li>ä½•æ—¶ç­‰å¾…ï¼šçº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³å°±ç­‰å¾…ã€‚</li>\n<li>ä½•æ—¶é€šçŸ¥ï¼šå½“æœ‰çº¿ç¨‹é‡Šæ”¾è´¦æˆ·æ—¶å°±é€šçŸ¥ã€‚</li>\n</ol><p>å°†ä¸Šé¢å‡ ä¸ªé—®é¢˜è€ƒè™‘æ¸…æ¥šï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆä¸‹é¢çš„ä»£ç ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†ï¼š</p><pre><code>  while(æ¡ä»¶ä¸æ»¡è¶³) {\n    wait();\n  }\n</code></pre><p>åˆ©ç”¨è¿™ç§èŒƒå¼å¯ä»¥è§£å†³ä¸Šé¢æåˆ°çš„<strong>æ¡ä»¶æ›¾ç»æ»¡è¶³è¿‡</strong>è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºå½“wait()è¿”å›æ—¶ï¼Œæœ‰å¯èƒ½æ¡ä»¶å·²ç»å‘ç”Ÿå˜åŒ–äº†ï¼Œæ›¾ç»æ¡ä»¶æ»¡è¶³ï¼Œä½†æ˜¯ç°åœ¨å·²ç»ä¸æ»¡è¶³äº†ï¼Œæ‰€ä»¥è¦é‡æ–°æ£€éªŒæ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚èŒƒå¼ï¼Œæ„å‘³ç€æ˜¯ç»å…¸åšæ³•ï¼Œæ‰€ä»¥æ²¡æœ‰ç‰¹æ®Šç†ç”±ä¸è¦å°è¯•æ¢ä¸ªå†™æ³•ã€‚åé¢åœ¨ä»‹ç»â€œç®¡ç¨‹â€çš„æ—¶å€™ï¼Œæˆ‘ä¼šè¯¦ç»†ä»‹ç»è¿™ä¸ªç»å…¸åšæ³•çš„å‰ä¸–ä»Šç”Ÿã€‚</p><pre><code>class Allocator {\n  private List&lt;Object&gt; als;\n  // ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº\n  synchronized void apply(\n    Object from, Object to){\n    // ç»å…¸å†™æ³•\n    while(als.contains(from) ||\n         als.contains(to)){\n      try{\n        wait();\n      }catch(Exception e){\n      }   \n    } \n    als.add(from);\n    als.add(to);  \n  }\n  // å½’è¿˜èµ„æº\n  synchronized void free(\n    Object from, Object to){\n    als.remove(from);\n    als.remove(to);\n    notifyAll();\n  }\n}\n</code></pre><h2>å°½é‡ä½¿ç”¨notifyAll()</h2><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ç”¨çš„æ˜¯notifyAll()æ¥å®ç°é€šçŸ¥æœºåˆ¶ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨notify()å‘¢ï¼Ÿè¿™äºŒè€…æ˜¯æœ‰åŒºåˆ«çš„ï¼Œ<strong>notify()æ˜¯ä¼šéšæœºåœ°é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œè€ŒnotifyAll()ä¼šé€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çº¿ç¨‹</strong>ã€‚ä»æ„Ÿè§‰ä¸Šæ¥è®²ï¼Œåº”è¯¥æ˜¯notify()æ›´å¥½ä¸€äº›ï¼Œå› ä¸ºå³ä¾¿é€šçŸ¥æ‰€æœ‰çº¿ç¨‹ï¼Œä¹Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè¿›å…¥ä¸´ç•ŒåŒºã€‚ä½†é‚£æ‰€è°“çš„æ„Ÿè§‰å¾€å¾€éƒ½è•´è—ç€é£é™©ï¼Œå®é™…ä¸Šä½¿ç”¨notify()ä¹Ÿå¾ˆæœ‰é£é™©ï¼Œå®ƒçš„é£é™©åœ¨äºå¯èƒ½å¯¼è‡´æŸäº›çº¿ç¨‹æ°¸è¿œä¸ä¼šè¢«é€šçŸ¥åˆ°ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰èµ„æºAã€Bã€Cã€Dï¼Œçº¿ç¨‹1ç”³è¯·åˆ°äº†ABï¼Œçº¿ç¨‹2ç”³è¯·åˆ°äº†CDï¼Œæ­¤æ—¶çº¿ç¨‹3ç”³è¯·ABï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆABåˆ†é…ç»™çº¿ç¨‹1ï¼Œçº¿ç¨‹3è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³ï¼‰ï¼Œçº¿ç¨‹4ç”³è¯·CDä¹Ÿä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚æˆ‘ä»¬å†å‡è®¾ä¹‹åçº¿ç¨‹1å½’è¿˜äº†èµ„æºABï¼Œå¦‚æœä½¿ç”¨notify()æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹4ï¼Œä½†çº¿ç¨‹4ç”³è¯·çš„æ˜¯CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹4è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹3å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ã€‚</p><p>æ‰€ä»¥é™¤éç»è¿‡æ·±æ€ç†Ÿè™‘ï¼Œå¦åˆ™å°½é‡ä½¿ç”¨notifyAll()ã€‚</p><h2>æ€»ç»“</h2><p>ç­‰å¾…-é€šçŸ¥æœºåˆ¶æ˜¯ä¸€ç§éå¸¸æ™®éçš„çº¿ç¨‹é—´åä½œçš„æ–¹å¼ã€‚å·¥ä½œä¸­ç»å¸¸çœ‹åˆ°æœ‰åŒå­¦ä½¿ç”¨è½®è¯¢çš„æ–¹å¼æ¥ç­‰å¾…æŸä¸ªçŠ¶æ€ï¼Œå…¶å®å¾ˆå¤šæƒ…å†µä¸‹éƒ½å¯ä»¥ç”¨ä»Šå¤©æˆ‘ä»¬ä»‹ç»çš„ç­‰å¾…-é€šçŸ¥æœºåˆ¶æ¥ä¼˜åŒ–ã€‚Javaè¯­è¨€å†…ç½®çš„synchronizedé…åˆwait()ã€notify()ã€notifyAll()è¿™ä¸‰ä¸ªæ–¹æ³•å¯ä»¥å¿«é€Ÿå®ç°è¿™ç§æœºåˆ¶ï¼Œä½†æ˜¯å®ƒä»¬çš„ä½¿ç”¨çœ‹ä¸Šå»è¿˜æ˜¯æœ‰ç‚¹å¤æ‚ï¼Œæ‰€ä»¥ä½ éœ€è¦è®¤çœŸç†è§£ç­‰å¾…é˜Ÿåˆ—å’Œwait()ã€notify()ã€notifyAll()çš„å…³ç³»ã€‚æœ€å¥½ç”¨ç°å®ä¸–ç•Œåšä¸ªç±»æ¯”ï¼Œè¿™æ ·æœ‰åŠ©äºä½ çš„ç†è§£ã€‚</p><p>Javaè¯­è¨€çš„è¿™ç§å®ç°ï¼ŒèƒŒåçš„ç†è®ºæ¨¡å‹å…¶å®æ˜¯ç®¡ç¨‹ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œä¸è¿‡ä½ ä¸ç”¨æ‹…å¿ƒï¼Œåé¢ä¼šæœ‰ä¸“é—¨çš„ä¸€ç« æ¥ä»‹ç»ç®¡ç¨‹ã€‚ç°åœ¨ä½ åªéœ€è¦èƒ½å¤Ÿç†Ÿç»ƒä½¿ç”¨å°±å¯ä»¥äº†ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>å¾ˆå¤šé¢è¯•éƒ½ä¼šé—®åˆ°ï¼Œwait()æ–¹æ³•å’Œsleep()æ–¹æ³•éƒ½èƒ½è®©å½“å‰çº¿ç¨‹æŒ‚èµ·ä¸€æ®µæ—¶é—´ï¼Œé‚£å®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿç°åœ¨ä½ ä¹Ÿè¯•ç€å›ç­”ä¸€ä¸‹å§ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":74955,"user_name":"å§œæˆˆ","can_delete":false,"product_type":"c1","uid":1058972,"ip_address":"","ucode":"45C4BE93C8E4CC","user_header":"https://static001.geekbang.org/account/avatar/00/10/28/9c/73e76b19.jpg","comment_is_top":false,"comment_ctime":1552321747,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"1650819763411","product_id":100023901,"comment_content":"waitä¸sleepåŒºåˆ«åœ¨äºï¼š<br>1. waitä¼šé‡Šæ”¾æ‰€æœ‰é”è€Œsleepä¸ä¼šé‡Šæ”¾é”èµ„æº.<br>2. waitåªèƒ½åœ¨åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ä¸­ä½¿ç”¨ï¼Œè€Œsleepä»»ä½•åœ°æ–¹éƒ½å¯ä»¥.<br>3. waitæ— éœ€æ•æ‰å¼‚å¸¸ï¼Œè€Œsleepéœ€è¦.<br><br>ä¸¤è€…ç›¸åŒç‚¹ï¼šéƒ½ä¼šè®©æ¸¡CPUæ‰§è¡Œæ—¶é—´ï¼Œç­‰å¾…å†æ¬¡è°ƒåº¦ï¼","like_count":385,"discussions":[{"author":{"id":1023750,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9f/06/287d77dd.jpg","nickname":"æ‰¿é¦™å¢¨å½±","note":"","ucode":"4D6A4D6E1ED29F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25070,"discussion_content":"waitä¹Ÿéœ€è¦æ•è·å¼‚å¸¸","likes_number":30,"is_delete":false,"is_hidden":false,"ctime":1570411796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/71/4c/2cefec07.jpg","nickname":"é™æ°´æµæ·±","note":"","ucode":"644F05EFBD2E7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5268,"discussion_content":"     * @param      timeout   the maximum time to wait in milliseconds.\n     * @throws  IllegalArgumentException      if the value of timeout is\n     *               negative.\n     * @throws  IllegalMonitorStateException  if the current thread is not\n     *               the owner of the object&#39;s monitor.\n     * @throws  InterruptedException if any thread interrupted the\n     *             current thread before or while the current thread\n     *             was waiting for a notification.  The <i>interrupted\n     *             status</i> of the current thread is cleared when\n     *             this exception is thrown.\n     * @see        java.lang.Object#notify()\n     * @see        java.lang.Object#notifyAll()\n     */\n    public final native void wait(long timeout) throws InterruptedException;","likes_number":17,"is_delete":false,"is_hidden":false,"ctime":1566124899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1070581,"avatar":"https://static001.geekbang.org/account/avatar/00/10/55/f5/8d1588bd.jpg","nickname":"xfun","note":"","ucode":"A9A08E9EA6E13B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219792,"discussion_content":"waitæ˜¯è¢«é”å¯¹è±¡çš„æ–¹æ³•ï¼Œsleepæ˜¯Threadå¯¹è±¡çš„æ–¹æ³•ã€‚æ„Ÿè§‰ä¸¤ä¸ªæ²¡æœ‰å¯æ¯”æ€§ï¼Œå°±ä¸æ˜¯ä¸€ç±»ä¸œè¥¿ã€‚","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1585809253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018706,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/52/6659dc1b.jpg","nickname":"é»‘ç±³","note":"","ucode":"E7DBEA7867862A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391125,"discussion_content":"â€œwaitæ— éœ€æ•æ‰å¼‚å¸¸ï¼Œè€Œsleepéœ€è¦â€è¿™ä¸ªè°¬è®ºæ˜¯å“ªé‡ŒæŠ„æ¥çš„ï¼Ÿæˆ‘ç«Ÿç„¶çœ‹åˆ°å¾ˆå¤šäººè¿™æ ·è¯´ã€‚ã€‚ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1630306642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1222174,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a6/1e/09033d53.jpg","nickname":"æˆ‘ä¸æ‡‚æŠ€æœ¯","note":"","ucode":"BCED5E23C6FA20","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387943,"discussion_content":"waitæˆ‘è®°å¾—ä¹Ÿè¦æ•æ‰å¼‚å¸¸å§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1628504478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810156,"avatar":"","nickname":"poordickey","note":"","ucode":"2A436EC813AF97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335687,"discussion_content":"å¦å¤–ä¸¤ä¸ªçº¿ç¨‹æ¥ä¸‹æ¥è§¦å‘æ‰§è¡Œçš„æ–¹å¼ä¹Ÿä¸åŒï¼Œä¸€ä¸ªæ˜¯notifyé€šçŸ¥ï¼Œä¸€ä¸ªæ˜¯æ—¶é—´åˆ°äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1608273795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75036,"user_name":"crazypokerk","can_delete":false,"product_type":"c1","uid":1158383,"ip_address":"","ucode":"9AAD5D9726E503","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/ef/494f56c3.jpg","comment_is_top":false,"comment_ctime":1552351875,"is_pvip":false,"replies":[{"id":"27480","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552397266,"ip_address":"","comment_id":75036,"utype":1}],"discussion_count":7,"race_medal":0,"score":"1019459601027","product_id":100023901,"comment_content":"wait()æ–¹æ³•ä¸sleep()æ–¹æ³•çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œwait()æ–¹æ³•ä¼šé‡Šæ”¾å¯¹è±¡çš„â€œé”æ ‡å¿—â€ã€‚å½“è°ƒç”¨æŸä¸€å¯¹è±¡çš„wait()æ–¹æ³•åï¼Œä¼šä½¿å½“å‰çº¿ç¨‹æš‚åœæ‰§è¡Œï¼Œå¹¶å°†å½“å‰çº¿ç¨‹æ”¾å…¥å¯¹è±¡ç­‰å¾…æ± ä¸­ï¼Œç›´åˆ°è°ƒç”¨äº†notify()æ–¹æ³•åï¼Œå°†ä»å¯¹è±¡ç­‰å¾…æ± ä¸­ç§»å‡ºä»»æ„ä¸€ä¸ªçº¿ç¨‹å¹¶æ”¾å…¥é”æ ‡å¿—ç­‰å¾…æ± ä¸­ï¼Œåªæœ‰é”æ ‡å¿—ç­‰å¾…æ± ä¸­çš„çº¿ç¨‹å¯ä»¥è·å–é”æ ‡å¿—ï¼Œå®ƒä»¬éšæ—¶å‡†å¤‡äº‰å¤ºé”çš„æ‹¥æœ‰æƒã€‚å½“è°ƒç”¨äº†æŸä¸ªå¯¹è±¡çš„notifyAll()æ–¹æ³•ï¼Œä¼šå°†å¯¹è±¡ç­‰å¾…æ± ä¸­çš„æ‰€æœ‰çº¿ç¨‹éƒ½ç§»åŠ¨åˆ°è¯¥å¯¹è±¡çš„é”æ ‡å¿—ç­‰å¾…æ± ã€‚<br>sleep()æ–¹æ³•éœ€è¦æŒ‡å®šç­‰å¾…çš„æ—¶é—´ï¼Œå®ƒå¯ä»¥è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœ¨æŒ‡å®šçš„æ—¶é—´å†…æš‚åœæ‰§è¡Œï¼Œè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè¯¥æ–¹æ³•æ—¢å¯ä»¥è®©å…¶ä»–åŒä¼˜å…ˆçº§æˆ–è€…é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—åˆ°æ‰§è¡Œçš„æœºä¼šï¼Œä¹Ÿå¯ä»¥è®©ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—åˆ°æ‰§è¡Œæœºä¼šã€‚ä½†æ˜¯sleep()æ–¹æ³•ä¸ä¼šé‡Šæ”¾â€œé”æ ‡å¿—â€ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæœ‰synchronizedåŒæ­¥å—ï¼Œå…¶ä»–çº¿ç¨‹ä»ç„¶ä¸èƒ½è®¿é—®å…±äº«æ•°æ®ã€‚","like_count":237,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442785,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552397266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1649057,"avatar":"https://static001.geekbang.org/account/avatar/00/19/29/a1/41607383.jpg","nickname":"hello","note":"","ucode":"4F42DAA5DB5C38","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375027,"discussion_content":"è¯„è®ºä¸­çš„â€œå¯¹è±¡ç­‰å¾…æ± â€åº”è¯¥å°±æ˜¯æ–‡ä¸­æåˆ°çš„â€œäº’æ–¥é”ç­‰å¾…é˜Ÿåˆ—&#34;ï¼Œé‚£è¯„è®ºä¸­çš„&#34;é”æ ‡å¿—ç­‰å¾…æ± &#34; åœ¨æ–‡ä¸­æ˜¯ä¸æ˜¯æ²¡ä½“ç°å‡ºæ¥å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621438680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1649057,"avatar":"https://static001.geekbang.org/account/avatar/00/19/29/a1/41607383.jpg","nickname":"hello","note":"","ucode":"4F42DAA5DB5C38","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":379545,"discussion_content":"å¯¹è±¡ç­‰å¾…æ± åœ¨å·¦è¾¹ï¼Œé”æ ‡å¿—ç­‰å¾…æ± ï¼ˆè°ƒç”¨è¿‡wait()æ–¹æ³•çš„ï¼‰åœ¨å³è¾¹\nçœ‹è€å¸ˆçš„ç¬¬ä¸€å¼ å›¾ wait()æŒ‡å‘çš„ç®­å¤´åœ¨å³è¾¹\nç¬¬äºŒå¼ å›¾notify()æŒ‡å‘çš„ä¹Ÿæ˜¯å³è¾¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623945933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375027,"ip_address":""},"score":379545,"extra":""}]},{"author":{"id":1322636,"avatar":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","nickname":"å¼ æ»”","note":"","ucode":"87ABAFF0E861E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347257,"discussion_content":"é”æ ‡å¿—ç­‰å¾…æ± å’Œä»æœªè·å¾—è¿‡é”è€Œè¿›å…¥çš„ç­‰å¾…é˜Ÿåˆ—æ˜¯å¦æ˜¯åŒä¸€ä¸ªåœ°æ–¹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612184088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1322636,"avatar":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","nickname":"å¼ æ»”","note":"","ucode":"87ABAFF0E861E0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358471,"discussion_content":"æˆ‘ç†è§£çš„åº”è¯¥æ˜¯å°è¯•è·å–é”ä½†æ˜¯å¤±è´¥äº†çš„çº¿ç¨‹ä¼šè¿›å…¥é”æ ‡å¿—æ± è€Œä¸æ˜¯ä»æœªè·å¾—è¿‡é”çš„çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615987536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":347257,"ip_address":""},"score":358471,"extra":""},{"author":{"id":1107153,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e4/d1/002f9955.jpg","nickname":"å°é©¬å“¥","note":"","ucode":"376833AC2A1589","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1322636,"avatar":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","nickname":"å¼ æ»”","note":"","ucode":"87ABAFF0E861E0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371230,"discussion_content":"ä¸€ä¸ªæ˜¯å°±ç»ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯ç­‰å¾…é˜Ÿåˆ—ï¼Œå¦‚æœnotifyå”¤é†’äº†ï¼Œå°±ä»ç­‰å¾…é˜Ÿåˆ—ç§»å…¥å°±ç»ªé˜Ÿåˆ—","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1619689639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":347257,"ip_address":""},"score":371230,"extra":""}]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292739,"discussion_content":"waitå¯ä»¥è¢«å”¤é†’ï¼›sleepåªèƒ½ç­‰å¾…ï¼Œæˆ–è€…ä¸­æ–­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595320894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74976,"user_name":"Home","can_delete":false,"product_type":"c1","uid":1032373,"ip_address":"","ucode":"AAE2C3E539CA96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c0/b5/bd64c1ac.jpg","comment_is_top":false,"comment_ctime":1552345879,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"735991753495","product_id":100023901,"comment_content":"è¡¥å……ä¸€ä¸‹å§œæˆˆåŒå­¦å›ç­”ï¼›1 sleepæ˜¯Threadçš„æ–¹æ³•ï¼Œè€Œwaitæ˜¯Objectç±»çš„æ–¹æ³•ï¼›2ï¼šsleepæ–¹æ³•è°ƒç”¨çš„æ—¶å€™å¿…é¡»æŒ‡å®šæ—¶é—´","like_count":171},{"had_liked":false,"id":75440,"user_name":"wang","can_delete":false,"product_type":"c1","uid":1161200,"ip_address":"","ucode":"5D569805C6A923","user_header":"https://static001.geekbang.org/account/avatar/00/11/b7/f0/a570f68a.jpg","comment_is_top":false,"comment_ctime":1552398092,"is_pvip":false,"replies":[{"id":"27584","content":"é«˜æ‰‹é«˜æ‰‹ï¼Œè®©æˆ‘å†™ä¹Ÿè¿™ä¸è¿™æ ·å¥½ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552448007,"ip_address":"","comment_id":75440,"utype":1}],"discussion_count":18,"race_medal":0,"score":"521243440908","product_id":100023901,"comment_content":"public class MyLock {<br>&#47;&#47; æµ‹è¯•è½¬è´¦çš„mainæ–¹æ³•<br>public static void main(String[] args) throws InterruptedException {<br>    Account src = new Account(10000);<br>    Account target = new Account(10000);<br>    CountDownLatch countDownLatch = new CountDownLatch(9999);<br>    for (int i = 0; i &lt; 9999; i++) {<br>        new Thread(()-&gt;{<br>            src.transactionToTarget(1,target);<br>        countDownLatch.countDown();<br>        }).start();<br>    }<br>    countDownLatch.await();<br>    System.out.println(&quot;src=&quot;+src.getBanalce() );<br>    System.out.println(&quot;target=&quot;+target.getBanalce() );<br>}<br>static class Account{ &#47;&#47;è´¦æˆ·ç±»<br>    public Account(Integer banalce) {<br>        this.banalce = banalce;<br>    }<br>    private Integer banalce;<br>    public void transactionToTarget(Integer money,Account target){&#47;&#47;è½¬è´¦æ–¹æ³•<br>        Allocator.getInstance().apply(this,target);<br>        this.banalce -= money;<br>        target.setBanalce(target.getBanalce()+money);<br>        Allocator.getInstance().release(this,target);<br>    }<br>    public  Integer getBanalce() {<br>        return banalce;<br>    }<br>    public void setBanalce(Integer banalce) {<br>        this.banalce = banalce;<br>    }<br>}<br>static class Allocator { &#47;&#47;å•ä¾‹é”ç±»<br>    private Allocator(){}<br>    private List&lt;Account&gt; locks = new ArrayList&lt;&gt;();<br>    public  synchronized void apply(Account src,Account tag){<br>        while (locks.contains(src)||locks.contains(tag)) {<br>            try {<br>                this.wait();<br>            } catch (InterruptedException e) {<br>            }<br>        }<br>        locks.add(src);<br>        locks.add(tag);<br>    }<br>    public synchronized void release(Account src,Account tag){<br>        locks.remove(src);<br>        locks.remove(tag);<br>        this.notifyAll();<br>    }<br>    public static  Allocator getInstance(){<br>        return AllocatorSingle.install;<br>    }<br>    static class AllocatorSingle{<br>        public static Allocator install = new Allocator();<br>    }<br>}<br>}","like_count":121,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442895,"discussion_content":"é«˜æ‰‹é«˜æ‰‹ï¼Œè®©æˆ‘å†™ä¹Ÿè¿™ä¸è¿™æ ·å¥½ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552448007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1178008,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f9/98/95b13446.jpg","nickname":"Jimbol","note":"","ucode":"8D9190B3B3E08B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8314,"discussion_content":"å‰å®³å‰å®³ï¼Œæä¸€ç‚¹ä¼˜åŒ–æ„è§ï¼šæŠŠallocator é‡Œçš„List æ¢æˆSet ","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1567914966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1533266,"avatar":"https://static001.geekbang.org/account/avatar/00/17/65/52/07c09c7f.jpg","nickname":"josancpp","note":"","ucode":"0CDC39B3E716A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274973,"discussion_content":"transactionToTargetæœ€å¥½åŠ ä¸Šé”ã€‚\nè™½ç„¶ï¼ŒtransactionToTargetä¸ä¼šå‡ºç°ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œå…±äº«å˜é‡balance\nä½†æ˜¯ï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æ“ä½œbalance  ã€‚ transactionToTarget+setBlance\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1590639818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181486,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/2e/878d3c92.jpg","nickname":"æœ¨æœ¨","note":"","ucode":"E82C58AF2604ED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":266394,"discussion_content":"transactionToTarget ä½¿ç”¨ try-finallyæ¥åŠ é”å’Œè§£é”ä¼šå¥½ä¸€ç‚¹ã€‚ä»¥é˜²ä¸‡ä¸€","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1589508516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023101,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/7d/774e07f9.jpg","nickname":"studyçš„ç¨‹åºå‘˜","note":"","ucode":"E5AE9037D24429","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386841,"discussion_content":"é”ç²’åº¦å¤ªå¤§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627832071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2410092,"avatar":"https://static001.geekbang.org/account/avatar/00/24/c6/6c/a400175a.jpg","nickname":"FARO_Z","note":"","ucode":"B33BCC36C2A74E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1023101,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/7d/774e07f9.jpg","nickname":"studyçš„ç¨‹åºå‘˜","note":"","ucode":"E5AE9037D24429","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540757,"discussion_content":"å•Šè¿™ï¼Œç²’åº¦è¿˜èƒ½æ›´å°å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640151116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":386841,"ip_address":""},"score":540757,"extra":""}]},{"author":{"id":1810156,"avatar":"","nickname":"poordickey","note":"","ucode":"2A436EC813AF97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335689,"discussion_content":"ä¸ºä»€ä¹ˆç”¨é™æ€ç±»ï¼Œé™æ€ç±»çš„é”å¯¹è±¡ä¸æ˜¯classå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608274302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2963287,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/dv9TS6icbzBEz8D6vXLrkSmER4TLRt6z2FKjo8b4XjibKydf7NWcwX4Fzf5XquGs88P25ApMBTWlcmGxibKzHuwtg/132","nickname":"Geek_837deb","note":"","ucode":"7F3462B4BE1DC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1810156,"avatar":"","nickname":"poordickey","note":"","ucode":"2A436EC813AF97","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560497,"discussion_content":"å•åˆ— é™æ€ç±»ï¼Œä¼šåœ¨jvm å®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™åŠ è½½è¿›å»ï¼Œæ¯æ¬¡ä½¿ç”¨çš„å°±æ˜¯åŠ è½½åœ¨å®¹å™¨çš„è¿™ä¸ªï¼Œä¹Ÿå°±æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649346712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":335689,"ip_address":""},"score":560497,"extra":""}]},{"author":{"id":1213878,"avatar":"","nickname":"everyok22","note":"","ucode":"3A3304CCDC5C5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72834,"discussion_content":"transactionToTarget ä¸ç”¨åŠ é”å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575534064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1018552,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/b8/97d30803.jpg","nickname":"å¸ƒæ‹‰æ ¼çš„é±¼","note":"","ucode":"95145A236D6033","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1213878,"avatar":"","nickname":"everyok22","note":"","ucode":"3A3304CCDC5C5C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":82022,"discussion_content":"ç¡®å®ä¸ç”¨","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1576311316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":72834,"ip_address":""},"score":82022,"extra":""},{"author":{"id":1591405,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqqtFTbZcJcKq4icuCF8I3VoLMK3W8sx9askp6vrnY3DLtghI7svXpMIchn44ySY24ic4l8ADWFibLJA/132","nickname":"jack","note":"","ucode":"5EE763FEA7D755","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1018552,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/b8/97d30803.jpg","nickname":"å¸ƒæ‹‰æ ¼çš„é±¼","note":"","ucode":"95145A236D6033","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270762,"discussion_content":"èƒ½è§£é‡Šä¸€ä¸‹ä¸å¤§ä½¬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590049399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":82022,"ip_address":""},"score":270762,"extra":""},{"author":{"id":1277081,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg","nickname":"lakeslove","note":"","ucode":"65E14D29D3C981","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1591405,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqqtFTbZcJcKq4icuCF8I3VoLMK3W8sx9askp6vrnY3DLtghI7svXpMIchn44ySY24ic4l8ADWFibLJA/132","nickname":"jack","note":"","ucode":"5EE763FEA7D755","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318235,"discussion_content":"å¦‚æœåªæ‰§è¡Œè¿™ä¸ªæ–¹æ³•çš„è¯ï¼Œç›¸å½“äºå¼€å§‹ç”¨äº†lockï¼Œç»“å°¾ç”¨äº†unlockï¼Œå¤šä¸ªçº¿ç¨‹æ‰§è¡Œçš„å¯¹è±¡é‡åˆæ—¶ï¼Œåªèƒ½é€ä¸€ç­‰å¾…æ‰§è¡Œã€‚\n\nä½†æ˜¯åé¢è¿˜æœ‰ä¸ªsetæ–¹æ³•ï¼Œåº”è¯¥æŠŠsetæ–¹æ³•æ”¹ä¸ºprivateï¼Œæˆ–è€…æŠŠsetæ–¹æ³•å’ŒtransactionToTargetæ–¹æ³•éƒ½åŠ é”ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1603685422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":270762,"ip_address":""},"score":318235,"extra":""}]},{"author":{"id":1437158,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ed/e6/75a32708.jpg","nickname":"æ—¥æ‹±ä¸€å…µ","note":"","ucode":"D6386E5CD7C061","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5382,"discussion_content":"countdown æœ€å¥½åœ¨finallyé‡Œé¢ï¼Œä»¥é˜²ä¸‡ä¸€ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566216254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1018552,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/b8/97d30803.jpg","nickname":"å¸ƒæ‹‰æ ¼çš„é±¼","note":"","ucode":"95145A236D6033","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1437158,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ed/e6/75a32708.jpg","nickname":"æ—¥æ‹±ä¸€å…µ","note":"","ucode":"D6386E5CD7C061","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":82024,"discussion_content":"`Allocator.getInstance().release(this,target);` ä¹Ÿåº”è¯¥æ”¾åœ¨ finally é‡Œå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576311392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5382,"ip_address":""},"score":82024,"extra":""}]},{"author":{"id":1451515,"avatar":"","nickname":"RookieLi","note":"","ucode":"10DDD196BB50E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2644,"discussion_content":"è¿™æ®µä»£ç æ˜¯æœ‰é—®é¢˜çš„å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563816328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1112183,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f8/77/a6d34ca5.jpg","nickname":"jackie","note":"","ucode":"01A4B7839CFABD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1451515,"avatar":"","nickname":"RookieLi","note":"","ucode":"10DDD196BB50E9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":33189,"discussion_content":"applyæ–¹æ³•é‡Œwhileå¾ªç¯æ¡ä»¶æ˜¯ä¸æ˜¯ç¼ºä¸ªï¼ ï¼Ÿ!locks.contains(src)||!locks.contains(tag)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571106819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2644,"ip_address":""},"score":33189,"extra":""}]},{"author":{"id":1179759,"avatar":"https://static001.geekbang.org/account/avatar/00/12/00/6f/f0c0841d.jpg","nickname":"å°å´åŒå­¦","note":"","ucode":"29F8C0575E32AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2186,"discussion_content":"å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘æŠŠaccount ä¸­ balance æ”¹æˆintåï¼Œå³ä½¿ä¸ä½¿ç”¨allocator ä¹Ÿæ²¡æœ‰å¹¶å‘é—®é¢˜ã€‚ è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ ? éº»çƒ¦è€å¸ˆè§£é‡Šä¸€ä¸‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563345810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1025003,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a3/eb/d26459ae.jpg","nickname":"æ—¶å…‰å‹¿å¿µ","note":"","ucode":"72C8EC5A62C700","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1179759,"avatar":"https://static001.geekbang.org/account/avatar/00/12/00/6f/f0c0841d.jpg","nickname":"å°å´åŒå­¦","note":"","ucode":"29F8C0575E32AD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4130,"discussion_content":"æˆ‘æŠŠç›¸å…³å˜é‡å…¨æ¢æˆintç±»å‹ï¼Œä¸ä½¿ç”¨allocatorï¼Œæ²¡æœ‰ä½ è¯´çš„æƒ…å†µï¼Œæ¯æ¬¡æ‰§è¡Œç»“æœéƒ½ä¸ä¸€æ ·ï¼Œä½ æŠŠæ•°å†™å¤§ç‚¹è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565157339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2186,"ip_address":""},"score":4130,"extra":""}]}]},{"had_liked":false,"id":75935,"user_name":"è™è™â¤ï¸","can_delete":false,"product_type":"c1","uid":1086535,"ip_address":"","ucode":"157F261E80291A","user_header":"https://static001.geekbang.org/account/avatar/00/10/94/47/75875257.jpg","comment_is_top":false,"comment_ctime":1552493820,"is_pvip":false,"replies":[{"id":"27684","content":"ä¸æ˜¯ä¸€ä¸ªé˜Ÿåˆ—<br>åªå”¤é†’å³ä¾§çš„é˜Ÿåˆ—<br>waitä¹‹å<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552524241,"ip_address":"","comment_id":75935,"utype":1}],"discussion_count":18,"race_medal":0,"score":"435344190716","product_id":100023901,"comment_content":"å›°æƒ‘<br>1. å¯¹äºä»æ¥æ²¡æœ‰è·å¾—è¿‡äº’æ–¥é”çš„çº¿ç¨‹ æ‰€åœ¨çš„ç­‰å¾…é˜Ÿåˆ— å’Œ å› ä¸ºwait() é‡Šæ”¾é”è€Œè¿›å…¥äº†ç­‰å¾…é˜Ÿåˆ—ï¼Œæ˜¯å¦æ˜¯åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Ÿä¹Ÿå°±æ˜¯å›¾ä¸­å·¦ä¾§å’Œå³ä¾§çš„æ˜¯å¦ä¸ºåŒä¸€ä¸ªé˜Ÿåˆ—ï¼Ÿ<br>2. notifyAll() ä¼šå‘é€šçŸ¥ç»™ç­‰å¾…é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„çº¿ç¨‹å—ï¼ŸåŒ…æ‹¬é‚£äº›ä»æœªè·å¾—è¿‡äº’æ–¥é”çš„çº¿ç¨‹å—ï¼Ÿ<br>3. å› ä¸ºwait()è¢«é˜»å¡ï¼Œè€Œåˆå› ä¸ºnotify()é‡æ–°è¢«å”¤é†’åï¼Œä»£ç æ˜¯æ¥ç€åœ¨wait()ä¹‹åæ‰§è¡Œï¼Œè¿˜æ˜¯é‡æ–°æ‰§è¡Œ apply æ–¹æ³•ï¼Ÿ","like_count":101,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443096,"discussion_content":"ä¸æ˜¯ä¸€ä¸ªé˜Ÿåˆ—\nåªå”¤é†’å³ä¾§çš„é˜Ÿåˆ—\nwaitä¹‹å\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552524241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1585829,"avatar":"https://static001.geekbang.org/account/avatar/00/18/32/a5/9868cd56.jpg","nickname":"southday","note":"","ucode":"4A8FB63D35F6E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2057,"discussion_content":"å¯ä»¥çœ‹ä¸€ä¸‹ï¼š\n1ï¼‰Java çš„é”æ± ï¼ˆEntry Setï¼‰å’Œç­‰å¾…æ± ï¼ˆWait Setï¼‰ï¼šhttps://www.cnblogs.com/tiancai/p/9371655.html\n\n2ï¼‰Thread Synchronization - Monitorsï¼šhttps://www.artima.com/insidejvm/ed2/threadsynch.html","likes_number":15,"is_delete":false,"is_hidden":false,"ctime":1563212289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1258455,"avatar":"https://static001.geekbang.org/account/avatar/00/13/33/d7/739e2f6d.jpg","nickname":"Utah","note":"","ucode":"AD5EEFE68706A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1585829,"avatar":"https://static001.geekbang.org/account/avatar/00/18/32/a5/9868cd56.jpg","nickname":"southday","note":"","ucode":"4A8FB63D35F6E1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367943,"discussion_content":"å¥½æ–‡ç« ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618499530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2057,"ip_address":""},"score":367943,"extra":""}]},{"author":{"id":1572264,"avatar":"","nickname":"Sundayge","note":"","ucode":"6A125D700CBDAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47081,"discussion_content":"çº¿ç¨‹è·å¾—é”ä¹‹åï¼Œè°ƒç”¨waitæ–¹æ³•ä¹‹åå¤„äºåŒæ­¥é˜Ÿåˆ—ä¸­ï¼Œè¢«å”¤é†’æ—¶æ‰åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­é‡æ–°äº‰æŠ¢é”èµ„æº","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1573268990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1572264,"avatar":"","nickname":"Sundayge","note":"","ucode":"6A125D700CBDAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47083,"discussion_content":"æŠŠå³è¾¹é‚£ä¸ªç­‰å¾…é˜Ÿåˆ—å«åšåŒæ­¥é˜Ÿåˆ—ä¼šå¥½ç†è§£ç‚¹","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1573269085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1596987,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5e/3b/845fb641.jpg","nickname":"jhren","note":"","ucode":"60F7CCEA1E2C88","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306283,"discussion_content":"æ”¶åˆ°NOTIFYåæ˜¯ä¸æ˜¯å³è¾¹çš„æŒªåˆ°å·¦è¾¹ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1600239423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1107305,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e5/69/719ec5d0.jpg","nickname":"Jian","note":"","ucode":"17ED4919F22DEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1596987,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5e/3b/845fb641.jpg","nickname":"jhren","note":"","ucode":"60F7CCEA1E2C88","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383700,"discussion_content":"æ˜¯çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626193358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":306283,"ip_address":""},"score":383700,"extra":""},{"author":{"id":2799796,"avatar":"","nickname":"Geek_887177","note":"","ucode":"110451CF569C80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1596987,"avatar":"https://static001.geekbang.org/account/avatar/00/18/5e/3b/845fb641.jpg","nickname":"jhren","note":"","ucode":"60F7CCEA1E2C88","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560464,"discussion_content":"æ²¡å¿…è¦æŒªï¼Œè¿˜å¢åŠ å¼€é”€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649337954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":306283,"ip_address":""},"score":560464,"extra":""}]},{"author":{"id":2028953,"avatar":"","nickname":"Geek3340","note":"","ucode":"C64D302CD53513","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290008,"discussion_content":"notifyAllä»¥åå³è¾¹ç­‰å¾…çš„é˜Ÿåˆ—æ˜¯é‡æ–°å»ç«äº‰è·å–é”æ˜¯å§ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594300765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1542037,"avatar":"https://static001.geekbang.org/account/avatar/00/17/87/95/cba0a896.jpg","nickname":"å¢","note":"","ucode":"B6A9F41AEE348C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2028953,"avatar":"","nickname":"Geek3340","note":"","ucode":"C64D302CD53513","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292240,"discussion_content":"åº”è¯¥æ˜¯çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595151892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":290008,"ip_address":""},"score":292240,"extra":""},{"author":{"id":1131027,"avatar":"https://static001.geekbang.org/account/avatar/00/11/42/13/860e176a.jpg","nickname":"å¤–å›½è‚‰å¤¹é¦","note":"","ucode":"00BADDCFEA92B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2028953,"avatar":"","nickname":"Geek3340","note":"","ucode":"C64D302CD53513","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337670,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609036086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":290008,"ip_address":""},"score":337670,"extra":""}]},{"author":{"id":1061466,"avatar":"https://static001.geekbang.org/account/avatar/00/10/32/5a/347570e6.jpg","nickname":"æå®¢er","note":"","ucode":"43A30683884E2E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":252297,"discussion_content":"å‡è®¾æˆ‘ä»¬æœ‰èµ„æº Aã€Bã€Cã€Dï¼Œçº¿ç¨‹ 1 ç”³è¯·åˆ°äº† ABï¼Œçº¿ç¨‹ 2 ç”³è¯·åˆ°äº† CDï¼Œæ­¤æ—¶çº¿ç¨‹ 3 ç”³è¯· ABï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆAB åˆ†é…ç»™çº¿ç¨‹ 1ï¼Œçº¿ç¨‹ 3 è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³ï¼‰ï¼Œçº¿ç¨‹ 4 ç”³è¯· CD ä¹Ÿä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚æˆ‘ä»¬å†å‡è®¾ä¹‹åçº¿ç¨‹ 1 å½’è¿˜äº†èµ„æº ABï¼Œå¦‚æœä½¿ç”¨ notify() æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹ 4ï¼Œä½†çº¿ç¨‹ 4 ç”³è¯·çš„æ˜¯ CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹ 3 å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†\nè¿™ä¸ªä¾‹å­ï¼šçº¿ç¨‹1é‡Šæ”¾äº†ABåï¼Œä¸ºä»€ä¹ˆç”³è¯·CDçš„çº¿ç¨‹ä¼šè¢«å”¤é†’ï¼Ÿä¸æ˜¯è¯´åªä¼šå”¤é†’ä¸€ä¸ªèµ„æºä¸­çš„ç­‰å¾…çº¿ç¨‹å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588150712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1178280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fa/a8/d6e7e22b.jpg","nickname":"å“ˆå“ˆå“ˆ","note":"","ucode":"488ACA1405C93A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1061466,"avatar":"https://static001.geekbang.org/account/avatar/00/10/32/5a/347570e6.jpg","nickname":"æå®¢er","note":"","ucode":"43A30683884E2E","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":292040,"discussion_content":"æ„Ÿè§‰ä¸ä¼šå”¤é†’ç­‰å¾…CDçš„çº¿ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595059811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":252297,"ip_address":""},"score":292040,"extra":""},{"author":{"id":2110152,"avatar":"https://static001.geekbang.org/account/avatar/00/20/32/c8/0d14d2ed.jpg","nickname":"ğŸ¡ğŸ¡ğŸ¡","note":"","ucode":"E00595FF677DB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1061466,"avatar":"https://static001.geekbang.org/account/avatar/00/10/32/5a/347570e6.jpg","nickname":"æå®¢er","note":"","ucode":"43A30683884E2E","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":297088,"discussion_content":"notifï¼ˆï¼‰ éšæœºå”¤é†’ä¸€ä¸ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596771030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":252297,"ip_address":""},"score":297088,"extra":""},{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1061466,"avatar":"https://static001.geekbang.org/account/avatar/00/10/32/5a/347570e6.jpg","nickname":"æå®¢er","note":"","ucode":"43A30683884E2E","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":358482,"discussion_content":"çº¿ç¨‹1ã€2ã€3ã€4ç”³è¯·çš„ABã€CDèµ„æºéƒ½æ˜¯åŒä¸€æŠŠé”çš„æƒ…å†µä¸‹å°±æœ‰å¯èƒ½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615988632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":252297,"ip_address":""},"score":358482,"extra":""}]},{"author":{"id":1987202,"avatar":"","nickname":"Geek_783cc7","note":"","ucode":"C43F76B1978FA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405689,"discussion_content":"é—®å‡ºäº†æˆ‘çš„å¿ƒå£°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634622815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1494177,"avatar":"https://static001.geekbang.org/account/avatar/00/16/cc/a1/16d488fc.jpg","nickname":"é˜¿å›½","note":"","ucode":"2801861BB1C115","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346826,"discussion_content":"æ‰“å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612073787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1443117,"avatar":"","nickname":"witluo","note":"","ucode":"3D9608C3DDDD95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301827,"discussion_content":"é—®çš„é—®é¢˜éƒ½æ˜¯å¥½å¤šäººä¼šé‡åˆ°çš„ç–‘æƒ‘ï¼Œè¿™äº›é—®é¢˜æœ‰åŠ©äºå¤§å®¶æ›´å¿«çš„å¸æ”¶ç†è§£ç­‰å¾…æœºåˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598673526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75507,"user_name":"èœ¡ç¬”","can_delete":false,"product_type":"c1","uid":1137414,"ip_address":"","ucode":"D56FE84F952BDD","user_header":"https://static001.geekbang.org/account/avatar/00/11/5b/06/17d03d9b.jpg","comment_is_top":false,"comment_ctime":1552405354,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"263545410410","product_id":100023901,"comment_content":"è€å¸ˆä½ ä¸ç”¨åœ¨æ–‡ç« ä¸­è´´å‡ºæ‰€æœ‰ä»£ç å˜›ï¼Œåªè´´å‡ºæ ¸å¿ƒä»£ç ï¼Œç„¶åæŠŠæ•´ä¸ªä¾‹å­æ”¾åœ¨githubä¸Šï¼Œæ–‡æœ«çš„æ—¶å€™ç»™å‡ºgithubçš„é“¾æ¥ï¼Œæ°´å¹³åŸºç¡€ä¸€èˆ¬çš„å°±å¯ä»¥å»ä¸Šé¢ä¸‹è½½ä¸‹æ¥è·‘ä¸€è·‘è°ƒè¯•åŠ æ·±å°è±¡ç†è§£ï¼Œè¿™æ ·å¯ä»¥ä¸è€å¸ˆğŸ˜‚","like_count":60,"discussions":[{"author":{"id":2059571,"avatar":"","nickname":"Geek_2f3efa","note":"","ucode":"A5F2BB67C94E60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290760,"discussion_content":"ä¸å¥½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594601257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1926057,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/63/a9/abed781e.jpg","nickname":"æç¶­é“","note":"","ucode":"9A16ECAB2522E3","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556749,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—å¹¶ä¸å¥½, æˆ‘å‘ç°ä»¥å‰å­¦ä¸ä¼šå°±æ˜¯å› ç‚ºå¾ˆå¤šè€å¸ˆç”¨å„ç§ sleep æˆ–æ˜¯ä¸€äº›å¥‡æ€ªçš„æ“ä½œæ¥æ¨¡æ‹ŸçœŸå®çš„æ“ä½œ, ä½†æ˜¯æ¨¡ä»¿çš„éå¸¸æ‹™åŠ£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647498968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018706,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/52/6659dc1b.jpg","nickname":"é»‘ç±³","note":"","ucode":"E7DBEA7867862A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391124,"discussion_content":"ä½ è‡ªå·±æä¸ªå·¥ç¨‹ä»å¤´å­¦åˆ°åˆ°å°¾çš„ä»£ç ç‰‡æ®µæ‹¼èµ·æ¥å°±å¥½äº†ï¼Œé”»ç‚¼ä¸‹è‡ªå·±çš„åŠ¨æ‰‹èƒ½åŠ›ï¼Œä¸è¦éƒ½æ˜¯æ‹¿æ¥ä¸»ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630306595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2144474,"avatar":"https://static001.geekbang.org/account/avatar/00/20/b8/da/42284f64.jpg","nickname":"å¼ çŸ¥ä¿¡","note":"","ucode":"7C896BB3214B3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326808,"discussion_content":"æƒ³æ³•å¾ˆä¸é”™ï¼Œä½†æ˜¯å®é™…æ“ä½œå´ä¸å¯è¡Œã€‚å…¶å®å¾ˆå¤šä»£ç åªèƒ½ä»¥ç±»ä¼¼ä¼ªä»£ç æ–¹å¼å‘ˆç°ï¼Œç„¶åé…ä¸Šæ–‡å­—å»è¡¨è¾¾é‚£ä¸ªæ„æ€ï¼Œå®é™…å¦‚æœçœŸè¦è·‘çš„è¯å¤§æ¦‚ç‡æ˜¯ä»€ä¹ˆä¹Ÿçœ‹ä¸å‡ºæ¥çš„ã€‚ä¸ªäººçš„æ–¹æ³•æ˜¯åœ¨çº¸ä¸Šæ‰‹æŠ„ä»£ç ï¼ˆå–œæ¬¢è¿™ä¸ªæ„Ÿè§‰ï¼‰ï¼ŒæŠ„å®Œå°±ç›¸å½“äºè®¤çœŸé˜…è¯»äº†ä¸€éï¼Œç„¶ååœ¨ç»“åˆè€å¸ˆçš„æ–‡å­—ç†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605681286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76601,"user_name":"kaizhi","can_delete":false,"product_type":"c1","uid":1257663,"ip_address":"","ucode":"EBD8CDA27DC521","user_header":"https://static001.geekbang.org/account/avatar/00/13/30/bf/c635b6b1.jpg","comment_is_top":false,"comment_ctime":1552639654,"is_pvip":false,"replies":[{"id":"27939","content":"æ„Ÿè°¢ä½ è¿™ä¹ˆæ‡‚æˆ‘ğŸ˜‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552651619,"ip_address":"","comment_id":76601,"utype":1}],"discussion_count":2,"race_medal":0,"score":"237775840934","product_id":100023901,"comment_content":"æ„Ÿè§‰è€å¸ˆè®²è§£çš„èŠ‚å¥éå¸¸å¥½ï¼Œèƒ½æŠŠå¹¶å‘è®²è§£çš„è¿™ä¹ˆæµ…æ˜¾æ˜“æ‡‚ç»éä¸€æ—¥ä¹‹åŠŸã€‚è€å¸ˆåœ¨ç”¨ä¸€ç§ç”±æµ…å…¥æ·±ï¼Œé€å±‚æ·±å…¥çš„æ–¹æ³•æ¥è®²è§£javaå¹¶å‘çš„è¿™äº›çŸ¥è¯†ç‚¹ï¼Œè€Œä¸æ˜¯ä¸€è‚¡è„‘çš„æŠŠæ‰€æœ‰çš„çŸ¥è¯†ç‚¹éƒ½ç½—åˆ—å‡ºæ¥ï¼Œæœ‰åŠ©äºæˆ‘ä»¬çš„å¸æ”¶ï¼Œä¹Ÿèƒ½å¼•å‘æˆ‘ä»¬çš„è¿›ä¸€æ­¥æ€è€ƒï¼Œè­¬å¦‚è¿™èŠ‚çš„waitæ–¹æ³•ï¼Œå°±æ˜¯åœ¨æ”¹è¿›ä¸Šä¸€èŠ‚çš„whileå¾ªç¯ç­‰å¾…ï¼ˆä¸Šä¸€èŠ‚çš„whileåœ¨è¯„è®ºåŒºå°±å¼•å‘äº†å„è·¯é«˜æ‰‹çš„å¼ºçƒˆä¸æ»¡ï¼Œå“ˆå“ˆï¼‰ï¼Œè¿™æ ·æœ‰åŠ©äºæˆ‘ä»¬ç†è§£å½“å¹´javaçš„å¼€å‘è€…åœ¨è®¾è®¡waitæ–¹æ³•æ—¶çš„å‡ºå‘ç‚¹åœ¨å“ªé‡Œï¼Œå¦å¤–ä¹Ÿè®©æˆ‘ä»¬ç†è§£äº†ä¸ºä»€ä¹ˆwaitï¼Œnotifyï¼ŒnotifyAllè¿™äº›æ–¹æ³•ä¼šä½œä¸ºObjectç±»çš„æ–¹æ³•ã€‚ç”¨ç°å®ç”Ÿæ´»åšç±»æ¯”è¿™ä¸€ç‚¹ä¹Ÿå¾ˆèµï¼Œä¹‹å‰æœ‰è‰ºæœ¯æ¥æºäºç”Ÿæ´»è€Œåˆé«˜äºç”Ÿæ´»ï¼Œç°åœ¨å¯ä»¥è¯´æŠ€æœ¯æ¥æºäºç”Ÿæ´»è€Œåˆé«˜äºç”Ÿæ´»äº†ï¼Œå“ˆå“ˆ~","like_count":55,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443372,"discussion_content":"æ„Ÿè°¢ä½ è¿™ä¹ˆæ‡‚æˆ‘ğŸ˜‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552651619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1414266,"avatar":"https://static001.geekbang.org/account/avatar/00/15/94/7a/4e0cbe9c.jpg","nickname":"é²¨é±¼è¾£å­æ¤’áƒ¦","note":"","ucode":"CBD0777327EA93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356032,"discussion_content":"ä½ ä¸æ˜¯æ‰˜ï¼Ÿ\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615519227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75336,"user_name":"æˆ‘æ˜¯å–æŠ¥å°è¡Œå®¶","can_delete":false,"product_type":"c1","uid":1303013,"ip_address":"","ucode":"43530EA291B66D","user_header":"https://static001.geekbang.org/account/avatar/00/13/e1/e5/815d4271.jpg","comment_is_top":false,"comment_ctime":1552381127,"is_pvip":false,"replies":[{"id":"27476","content":"å…¨é¢ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552396577,"ip_address":"","comment_id":75336,"utype":1}],"discussion_count":1,"race_medal":0,"score":"229185647815","product_id":100023901,"comment_content":"waitå’ŒsleepåŒºåˆ«<br>1ï¼šwaité‡Šæ”¾èµ„æºï¼Œsleepä¸é‡Šæ”¾èµ„æº<br>2ï¼šwaitéœ€è¦è¢«å”¤é†’ï¼Œsleepä¸éœ€è¦<br>3ï¼šwaitéœ€è¦è·å–åˆ°ç›‘è§†å™¨ï¼Œå¦åˆ™æŠ›å¼‚å¸¸ï¼Œsleepä¸éœ€è¦<br>4ï¼šwaitæ˜¯objecté¡¶çº§çˆ¶ç±»çš„æ–¹æ³•ï¼Œsleepåˆ™æ˜¯Threadçš„æ–¹æ³•","like_count":53,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442867,"discussion_content":"å…¨é¢ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552396577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251186,"user_name":"å•å°ç°","can_delete":false,"product_type":"c1","uid":1067354,"ip_address":"","ucode":"59C4523FF1B5DB","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/5a/67b5f0b1.jpg","comment_is_top":false,"comment_ctime":1601392850,"is_pvip":false,"replies":[{"id":"91856","content":"æˆ‘è·Ÿä½ è¯´ï¼Œä½ ç®€ç›´å¤ªæœ‰æ‰äº†ï¼è¿™æ˜¯æˆ‘è§è¿‡çš„æœ€æ¸…æ™°çš„æè¿°ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1601426801,"ip_address":"","comment_id":251186,"utype":1}],"discussion_count":5,"race_medal":0,"score":"151925248210","product_id":100023901,"comment_content":"è€å¸ˆnotifyå’ŒnotifyAllé‚£å—çš„åŒºåˆ«ï¼Œæˆ‘ç›¸ä¿¡æœ‰å¾ˆå¤šäººå’Œæˆ‘ä¸€æ ·æœ‰ç–‘æƒ‘ï¼Œåœ¨ç»è¿‡ç»†æƒ³ä¹‹åæˆ‘ç»ˆäºææ˜ç™½äº†ï¼Œè¿™é‡Œç®€å•ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜è€å¸ˆçš„æ„æ€ï¼šæœ‰ä¸¤ä¸ªé¡¾å®¢è¦ä¹°æ°´æœï¼Œä½†åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªäººè¿›åº—é‡Œä¹°ï¼ˆä¹Ÿå°±æ˜¯åªæœ‰æœ‰æŠ¢åˆ°é”çš„äººæ‰èƒ½è¿›å»ä¹°æ°´æœï¼‰ï¼Œé¡¾å®¢Aæƒ³è¦ä¹°æ©˜å­ï¼Œé¡¾å®¢Bæƒ³è¦ä¹°è‹¹æœï¼Œä½†æ˜¯ç›®å‰åº—é‡Œä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆAå’ŒBéƒ½åœ¨whileå¾ªç¯é‡Œé¢è°ƒwaitæ–¹æ³•è¿›è¡Œé˜»å¡ç­‰å¾…ï¼ˆè¿™æ—¶å€™é”å·²ç»é‡Šæ”¾ï¼‰ï¼Œç„¶ååº—å‘˜Cå»è¿›è´§è¿›äº†è‹¹æœï¼Œç„¶åå¼€å§‹é€šçŸ¥å¤§å®¶å¯ä»¥æ¥ä¹°æ°´æœäº†ï¼ˆä¹Ÿå°±æ˜¯è°ƒç”¨é”çš„notifyæ–¹æ³•ï¼‰ï¼Œè¿™é‡Œnotifyæ–¹æ³•éšæœºå”¤é†’ä¸€ä¸ªé¡¾å®¢ï¼Œå‡è®¾å”¤é†’äº†é¡¾å®¢Bï¼Œé¡¾å®¢Bæ‹¿åˆ°é”ä¹‹åå‘ç°è¦çš„æ©˜å­è¿˜æ˜¯æ²¡æœ‰ï¼ˆå¯¹åº”whileå¾ªç¯çš„æ¡ä»¶è¿˜æ˜¯æ²¡æ»¡è¶³ï¼‰åˆè°ƒäº†waitè¿›è¡Œé˜»å¡ç­‰å¾…ï¼Œç»“æœè¿™æ ·å°±å¯¼è‡´æ˜æ˜æœ‰è‹¹æœï¼Œä½†æ˜¯Aè¿˜æ˜¯ç­‰åœ¨æ­»é‚£ã€‚ä½†å¦‚æœæ˜¯notifyAllæ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆå°±åŒæ—¶é€šçŸ¥Aå’ŒBï¼ˆå”¤é†’Aå’ŒBï¼‰ï¼Œè¿™æ—¶ä¸¤ä¸ªé¡¾å®¢ç«äº‰é”ï¼Œå‡è®¾æ‹¿åˆ°é”çš„è¿˜æ˜¯Bï¼Œä»–å‘ç°æ²¡æœ‰æ©˜å­äºæ˜¯æ¥ç€waité‡Šæ”¾é”ï¼Œè¿™æ—¶å€™Aå°±èƒ½æ‹¿åˆ°Bé‡Šæ”¾çš„é”ï¼Œç„¶åå°±å¯ä»¥ä¹°åˆ°æƒ³è¦çš„è‹¹æœäº†ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°ä¸Šé¢å‘ç”Ÿçš„æ­»ç­‰ç°è±¡ã€‚","like_count":35,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506408,"discussion_content":"æˆ‘è·Ÿä½ è¯´ï¼Œä½ ç®€ç›´å¤ªæœ‰æ‰äº†ï¼è¿™æ˜¯æˆ‘è§è¿‡çš„æœ€æ¸…æ™°çš„æè¿°ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601426801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1358045,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b8/dd/37726c34.jpg","nickname":"å°é©¬å“¥","note":"","ucode":"B2C0FF38F8C9BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367490,"discussion_content":"æ¥¼ä¸»å‰é¢è¯´é”™äº†ï¼Œæ˜¯Aè¦ä¹°è‹¹æœï¼ŒBè¦ä¹°æ©˜å­ï¼›ç»“æœCå¼„æ¥äº†è‹¹æœï¼Œéšæœºnotifyå‘Šè¯‰äº†Bæ¥è´§äº†ï¼ŒBå‘ç°ä¸æ˜¯æ©˜å­åˆé»˜é»˜å›å»ç­‰å¾…äº†ï¼Œå¹¶ä¸”æ²¡å­æ°”æ²¡å‘Šè¯‰Aç°åœ¨åº—é‡Œæ¥çš„è´§æ˜¯è‹¹æœï¼ŒAå•¥ä¹Ÿä¸çŸ¥é“ï¼Œä¹Ÿé»˜é»˜ç­‰ç€ï¼Œäºæ˜¯as time goes by","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618374099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2385496,"avatar":"https://static001.geekbang.org/account/avatar/00/24/66/58/0b81b449.jpg","nickname":"æ‹¾ä¿¡","note":"","ucode":"2D9C7166E51B6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582692,"discussion_content":"notifyAllç›¸å½“äºè®©æ‰€æœ‰çš„çº¿ç¨‹éƒ½å»çœ‹çœ‹è‡ªå·±ç¬¦ä¸ç¬¦åˆæ¡ä»¶ï¼Œå½“ç„¶ï¼Œç¬¦åˆçš„å¯èƒ½æœ‰å¤šä¸ªï¼Œå…ˆæŠ¢åˆ°çš„ä¼˜å…ˆï¼Œnotifyç›¸å½“äºæ¯æ¬¡éƒ½ä»ä¸€å †çº¿ç¨‹é‡ŒæŒ‘ä¸€ä¸ªï¼Œè¢«æŒ‘é€‰çš„é‚£ä¸ªå¯èƒ½æ°¸è¿œéƒ½ä¸æ»¡è¶³æ¡ä»¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659601286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358498,"discussion_content":"ç§€å„¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615989918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256923,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKkeBKshjwVKcpVTs1kGkPibsD5j8odoY6oHrMU1EHqDVjHoLLqzknOd8Q0aWxTDCJjvK1NJIX5Ncg/132","nickname":"Summer","note":"","ucode":"6E51D5574C1EFD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356494,"discussion_content":"ä¼˜ç§€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615611312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76368,"user_name":"aksonic","can_delete":false,"product_type":"c1","uid":1003633,"ip_address":"","ucode":"B6F3348F6714DB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/71/e8229703.jpg","comment_is_top":false,"comment_ctime":1552578979,"is_pvip":false,"replies":[{"id":"27887","content":"ä½ è¿™ä¸ªå»ºè®®æŒºå¥½ï¼Œåœ¨ç®¡ç¨‹é‡Œé¢ï¼Œä¼šé‡æ–°è®²è¿™ä¿©é˜Ÿåˆ—ã€‚ç°åœ¨å°±çŸ¥é“æœ‰ä¿©ç­‰å¾…é˜Ÿåˆ—å°±å¯ä»¥äº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552623888,"ip_address":"","comment_id":76368,"utype":1}],"discussion_count":5,"race_medal":0,"score":"117516695971","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æ˜¨å¤©é—®äº†ä½ é—®é¢˜åï¼Œå¸¦ç€ç–‘é—®åˆå»å­¦ä¹ äº†ä¸‹ï¼Œæ˜¯ä¸æ˜¯æ–‡ç« ä¸­çš„å·¦è¾¹å’Œå³è¾¹çš„ä¸¤ä¸ªé˜Ÿåˆ—åº”è¯¥æ”¹ä¸€æ”¹åå­—ï¼Œä¸åº”è¯¥éƒ½å«ç­‰å¾…é˜Ÿåˆ—ï¼Œè¿™æ ·å¯¹æ–°æ‰‹å¾ˆå®¹æ˜“äº§ç”Ÿè¯¯è§£ã€‚å¦‚æœå·¦è¾¹çš„å«åšåŒæ­¥é˜Ÿåˆ—ï¼Œå³è¾¹çš„å«åšç­‰å¾…é˜Ÿåˆ—å¯èƒ½æ›´å¥½ã€‚å·¦è¾¹çš„é˜Ÿåˆ—æ˜¯ç”¨æ¥äº‰å¤ºé”çš„ï¼Œå³è¾¹çš„é˜Ÿåˆ—æ˜¯ç­‰å¾…é˜Ÿåˆ—ï¼Œæ˜¯å¿…é¡»è¢«notifyçš„ï¼Œå½“è¢«notifyä¹‹åï¼Œå°±ä¼šè¢«æ”¾å…¥å·¦è¾¹çš„é˜Ÿåˆ—å»äº‰å¤ºé”ã€‚è€å¸ˆï¼Œä½ è§‰å¾—å‘¢ï¼Ÿ","like_count":27,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443277,"discussion_content":"ä½ è¿™ä¸ªå»ºè®®æŒºå¥½ï¼Œåœ¨ç®¡ç¨‹é‡Œé¢ï¼Œä¼šé‡æ–°è®²è¿™ä¿©é˜Ÿåˆ—ã€‚ç°åœ¨å°±çŸ¥é“æœ‰ä¿©ç­‰å¾…é˜Ÿåˆ—å°±å¯ä»¥äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552623888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1494177,"avatar":"https://static001.geekbang.org/account/avatar/00/16/cc/a1/16d488fc.jpg","nickname":"é˜¿å›½","note":"","ucode":"2801861BB1C115","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346827,"discussion_content":"æ‰“å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612073922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133545,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJQyCFqdkJB97EXF7VVO1n0nRZUmxfWwDicJMmupDdDia7VnPkLSJicFyEe28eUtZamH9uprtBJ4Ojjw/132","nickname":"qhj","note":"","ucode":"A9A9370BB2EE0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303474,"discussion_content":"å»ºè®®å¤ªæ£’äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599277132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":186953,"discussion_content":"ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582722220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501496,"avatar":"","nickname":"ysl","note":"","ucode":"06398A1F9149EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":22559,"discussion_content":"é¦–å…ˆéå¸¸åŒæ„å¯¹äºå›¾çš„æ¾„æ¸…ï¼Œæˆ‘è§‰å¾—æŒºå¥½ï¼ŒğŸ‘ˆæ˜¯ç­‰å¾…äº’æ–¥é”é˜Ÿåˆ—ï¼ŒğŸ‘‰æ˜¯ç­‰å¾…é€šçŸ¥é˜Ÿåˆ—ï¼›ä¸€ä¸ªç–‘é—®ï¼šå³è¾¹é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹è¢«å”¤é†’åï¼Œæ˜¯ä¸æ˜¯é‡æ–°åŠ å…¥åˆ°å·¦è¾¹çš„åŒæ­¥é˜Ÿåˆ—ä¸­ç­‰å¾…äº’æ–¥é”ï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆè€å¸ˆçš„å›¾ç”»çš„å°±å®¹æ˜“å¼•èµ·è¯¯è§£äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569652024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75417,"user_name":"è€æ¨åŒå¿—","can_delete":false,"product_type":"c1","uid":1246199,"ip_address":"","ucode":"3F334F0CFD3DE6","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/f7/3a493bec.jpg","comment_is_top":false,"comment_ctime":1552394564,"is_pvip":false,"replies":[{"id":"27477","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552396639,"ip_address":"","comment_id":75417,"utype":1}],"discussion_count":1,"race_medal":0,"score":"113221544260","product_id":100023901,"comment_content":"ç‚¹èµ@å§œæˆˆ è¡¥å……ä¸€ä¸‹ï¼šwaitä¸sleepåŒºåˆ«åœ¨äºï¼š<br>1. waitä¼šé‡Šæ”¾æ‰€æœ‰é”è€Œsleepä¸ä¼šé‡Šæ”¾é”èµ„æº.<br>2. waitåªèƒ½åœ¨åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ä¸­ä½¿ç”¨ï¼Œè€Œsleepä»»ä½•åœ°æ–¹éƒ½å¯ä»¥.<br>3. waitæ— éœ€æ•æ‰å¼‚å¸¸ï¼Œè€Œsleepéœ€è¦.ï¼ˆéƒ½æŠ›å‡ºInterruptedException ï¼Œwaitä¹Ÿéœ€è¦æ•è·å¼‚å¸¸ï¼‰<br>4. wait()æ— å‚æ•°éœ€è¦å”¤é†’ï¼Œçº¿ç¨‹çŠ¶æ€WAITINGï¼›wait(1000L);åˆ°æ—¶é—´è‡ªå·±é†’è¿‡æ¥æˆ–è€…åˆ°æ—¶é—´ä¹‹å‰è¢«å…¶ä»–çº¿ç¨‹å”¤é†’ï¼ŒçŠ¶æ€å’Œsleepéƒ½æ˜¯TIME_WAITING<br>ä¸¤è€…ç›¸åŒç‚¹ï¼šéƒ½ä¼šè®©æ¸¡CPUæ‰§è¡Œæ—¶é—´ï¼Œç­‰å¾…å†æ¬¡è°ƒåº¦ï¼","like_count":26,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442885,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552396639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75179,"user_name":"éƒ‘æ™¨Cc","can_delete":false,"product_type":"c1","uid":1324942,"ip_address":"","ucode":"57146E444D6329","user_header":"https://static001.geekbang.org/account/avatar/00/14/37/8e/cf0b4575.jpg","comment_is_top":false,"comment_ctime":1552360616,"is_pvip":false,"replies":[{"id":"27490","content":"éƒ½æ˜¯thisè¿™ä¸€æŠŠé”: synchronized void apply(){}<br>æ‰€ä»¥æ˜¯ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—<br><br>å°±æ˜¯500ä¸ªçº¿ç¨‹ï¼Œä¹Ÿæ˜¯åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œå› ä¸ºé”çš„éƒ½æ˜¯this<br><br>é˜Ÿåˆ—ä¸€å®šæ˜¯å­˜åœ¨çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552400776,"ip_address":"","comment_id":75179,"utype":1}],"discussion_count":8,"race_medal":0,"score":"96041641128","product_id":100023901,"comment_content":"ç‹è€å¸ˆ ABCD é‚£ä¸ªä¾‹å­çœŸæ²¡çœ‹æ‡‚ çº¿ç¨‹1é‡Šæ”¾é”ä¸ºå•¥ä¼šé€šçŸ¥çº¿ç¨‹4ï¼Ÿ1å’Œ3æ‰æ˜¯äº’æ–¥çš„å•Š 2å’Œ4äº’æ–¥ æŒ‰æˆ‘çš„ç†è§£ 3å’Œ4 ä¸åº”è¯¥æ˜¯åœ¨åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—é‡Œå•Š å› ä¸ºä¸æ˜¯é€šä¸€æŠŠé”ï¼ˆå‡†ç¡®æ¥æ—¶ä¸æ˜¯åŒæ ·çš„ä¸¤æŠŠé”ï¼‰<br>å°±ç€è¿™ä¸ªä¾‹å­ æˆ‘è¿˜æœ‰ä¸ªå…³äº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—çš„é—®é¢˜ å‡è®¾è¿˜æ˜¯èµ„æºABCD çº¿ç¨‹5 è·å–AB çº¿ç¨‹6è·å–CD çº¿ç¨‹7è¯•å›¾è·å–AB çº¿ç¨‹8è¯•å›¾è·å–BC çº¿ç¨‹9è¯•å›¾è·å–CD é‚£çº¿ç¨‹ 7ï¼Œ8ï¼Œ9 åˆ°åº•æ˜¯ä¸æ˜¯åœ¨ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—é‡Œé¢ï¼Œ<br>JVMåœ¨å®ç° wait notifyæœºåˆ¶æ˜¯æ—¶å€™åˆ°åº•å­˜ä¸å­˜åœ¨çœŸå®çš„é˜Ÿåˆ—ï¼Ÿ","like_count":22,"discussions":[{"author":{"id":1180998,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/46/c769e2d9.jpg","nickname":"é•é‡‘ç³–è±†","note":"","ucode":"6BA54592FDD9D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2838,"discussion_content":"abcdçš„ä½ç½®æˆ‘ä¹Ÿæœ‰ä¸ªç–‘é—®ï¼Œæ—¢ç„¶æ˜¯éƒ½åœ¨ç­‰å¾…é˜Ÿåˆ—ç­‰å¾…ï¼Œçº¿ç¨‹3ä¸ºä»€ä¹ˆæ°¸è¿œæ²¡æœ‰æœºä¼šäº†å‘¢ã€‚çº¿ç¨‹124ä»»ä¸€ä¸ªé‡Šæ”¾èµ„æºéƒ½æœ‰å¯èƒ½å”¤é†’çº¿ç¨‹3å•Šã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1563963102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2694205,"avatar":"https://static001.geekbang.org/account/avatar/00/29/1c/3d/76465ee4.jpg","nickname":"æ‘˜æ˜Ÿ","note":"","ucode":"55D8CAFC938F91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1180998,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/46/c769e2d9.jpg","nickname":"é•é‡‘ç³–è±†","note":"","ucode":"6BA54592FDD9D4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555861,"discussion_content":"è€å¸ˆæ˜¯å‡è®¾å‘€ ä¸æ’é™¤æç«¯æƒ…å†µ ä¸€ç›´notifyä¸€ä¸ªçº¿ç¨‹çš„è¯ é‚£å°±å¯„äº† æˆ–è€…è¯´ å½“æœ‰10wä¸ªçº¿ç¨‹ ç”¨notifyçš„è¯ é‚£ä½ è§‰å¾—æ¯ä¸ªéƒ½èƒ½å”¤é†’çš„è¯ æ¦‚ç‡æ˜¯è¿œå°äº 1/10w çš„ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647087054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2838,"ip_address":""},"score":555861,"extra":""}]},{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442814,"discussion_content":"éƒ½æ˜¯thisè¿™ä¸€æŠŠé”: synchronized void apply(){}\næ‰€ä»¥æ˜¯ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—\n\nå°±æ˜¯500ä¸ªçº¿ç¨‹ï¼Œä¹Ÿæ˜¯åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œå› ä¸ºé”çš„éƒ½æ˜¯this\n\né˜Ÿåˆ—ä¸€å®šæ˜¯å­˜åœ¨çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1552400776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2054237,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/58/5d/bb5f1ec5.jpg","nickname":"nçš„næ¬¡æ–¹","note":"","ucode":"4053B5444222FC","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369928,"discussion_content":"è€å¸ˆï¼Œé”çš„ä¸æ˜¯ä¸€ä¸ªèµ„æºï¼Œä¸ºå•¥ç”¨åŒä¸€æŠŠé”å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619201130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1507813,"avatar":"","nickname":"æ­¦å¡˜","note":"","ucode":"4F898F7615C39E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4742,"discussion_content":"é”thisé‚£å°±åªç«äº‰this è¿™ä¸€ä¸ªèµ„æºï¼Œå“ªæ¥çš„ABCD","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565697737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1179533,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ff/8d/8601f035.jpg","nickname":"æ·æ·åŒå­¦","note":"","ucode":"529A326B898008","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1507813,"avatar":"","nickname":"æ­¦å¡˜","note":"","ucode":"4F898F7615C39E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85953,"discussion_content":"é”å¯¹è±¡æ˜¯thisï¼Œèµ„æºæ˜¯ABCDå•Š...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576584329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4742,"ip_address":""},"score":85953,"extra":""}]},{"author":{"id":1178869,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fc/f5/2634fbb2.jpg","nickname":"åˆ˜åš","note":"","ucode":"308A705AE6EBFF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3379,"discussion_content":"å¦‚æœé”å¤šä¸ªèµ„æºï¼Œä½¿ç”¨notifyallæ›´ä½³ã€‚\nå¦‚æœåªé”ä¸€ä¸ªèµ„æºï¼Œé‚£ä½¿ç”¨notifyæ›´ä½³ã€‚\næˆ‘æ˜¯è¿™æ ·ç†è§£çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564448431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225224,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","nickname":"å°”å†¬æ©™","note":"","ucode":"0B013A49BC18DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1979,"discussion_content":"è¿™å°±æ˜¯Accountæ˜¯å¿…é¡»æ˜¯å•ä¾‹çš„åŸå› ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563159211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75011,"user_name":"andywang","can_delete":false,"product_type":"c1","uid":1441581,"ip_address":"","ucode":"585092411083A6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKsHXJofxYo78CRv2h9BXic2qnnttQqxNicPYAibx721MuRa3NQeDVpzPJmMG1pGClpEfqHIwDxIeepg/132","comment_is_top":false,"comment_ctime":1552350764,"is_pvip":false,"discussion_count":8,"race_medal":0,"score":"91746663980","product_id":100023901,"comment_content":"åº”è¯¥æ˜¯!als.contains(from) || !als.contains(to)æ‰wait()å§","like_count":21,"discussions":[{"author":{"id":1441569,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ff/21/8815d2e5.jpg","nickname":"äº®å­","note":"","ucode":"DF37D5E0714D02","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385396,"discussion_content":"åªè¦åŒ…å«å°±è¯´æ˜æœ‰çº¿ç¨‹åœ¨æ‰§è¡Œäº†ï¼Œæ‰€ä»¥ä¸ç”¨å–å","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1627026537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136415,"avatar":"https://static001.geekbang.org/account/avatar/00/11/57/1f/23647dcb.jpg","nickname":"ç„±","note":"","ucode":"9EB006496401AC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367657,"discussion_content":"å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œå¦‚æœå½“å‰çº¿ç¨‹æ£€æŸ¥åˆ°å®ä¾‹çš„å±æ€§alså·²ç»åŒ…å«äº†å…¶ä¸­ä¸€ä¸ªèµ„æºï¼Œè¯´æ˜å·²ç»æœ‰å…¶ä»–çº¿ç¨‹æ‹¿åˆ°äº†éƒ¨åˆ†èµ„æºï¼Œå½“å‰çº¿ç¨‹æ‹¿ä¸åˆ°å…¨éƒ¨çš„èµ„æºï¼Œåªèƒ½ç­‰å¾…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618413838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1466840,"avatar":"https://static001.geekbang.org/account/avatar/00/16/61/d8/3bc19bff.jpg","nickname":"æ‹åœ¨é‚£æ—¶","note":"","ucode":"7F026B4B708C7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4231,"discussion_content":"ä½ æƒ³å¦‚æœå…¶ä»–çš„çº¿ç¨‹é‡Œé›†åˆé‡Œå·²ç»æœ‰äº†srcæˆ–è€…targetï¼Œè‚¯å®šè¦ç­‰å¾…å•Šï¼Œæ‰€ä»¥æ˜¯åŒ…å«çš„æ—¶å€™ç­‰å¾…æ²¡æœ‰é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565244143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1613123,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9d/43/bf628743.jpg","nickname":"Cyber","note":"","ucode":"A7842494F57D0C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1466840,"avatar":"https://static001.geekbang.org/account/avatar/00/16/61/d8/3bc19bff.jpg","nickname":"æ‹åœ¨é‚£æ—¶","note":"","ucode":"7F026B4B708C7D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307155,"discussion_content":"while(als.contains(from) || als.contains(to) ï¼‰åœ¨javaä¸­è¿™æ ·å†™ç¡®å®æ˜¯æœ‰é—®é¢˜çš„ï¼Œ || åœ¨javaé‡Œé¢å‰é¢çš„è¡¨è¾¾å¼å€¼ä¸ºtrueï¼Œåé¢çš„ä¸ä¼šåˆ¤æ–­ç›´æ¥è¿”å›trueï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦ç®¡ç†å‘˜æ‹¿åˆ°äº†fromå°±éœ€è¦ç­‰å¾…ï¼›å½“ç®¡ç†å‘˜åŒæ—¶æ‹¿åˆ°fromå’Œtoæ—¶å°±ä¼šæœ‰é—®é¢˜å•Šï¼›å¯ä»¥æ”¹ä¸ºwhile(als.size()  == 1) ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600517820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4231,"ip_address":""},"score":307155,"extra":""},{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1613123,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9d/43/bf628743.jpg","nickname":"Cyber","note":"","ucode":"A7842494F57D0C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358493,"discussion_content":"æ²¡é—®é¢˜ï¼Œalsåªè¦æ‹¿åˆ°fromæˆ–è€…toä»»æ„ä¸€ä¸ªè¯´æ˜å…¶ä»–çº¿ç¨‹åœ¨ä½¿ç”¨ï¼Œå°±éœ€è¦ç­‰å¾…ï¼Œå½“alsæ—¢æ‹¿ä¸åˆ°fromä¹Ÿæ‹¿ä¸åˆ°toçš„æ—¶å€™è¯´æ˜æ²¡æœ‰çº¿ç¨‹åœ¨ä½¿ç”¨fromå’Œtoæ­¤æ—¶æ‰ç®—èµ„æºè·å–æˆåŠŸå¯ä»¥è¿›è¡Œè½¬è´¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615989574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":307155,"ip_address":""},"score":358493,"extra":""},{"author":{"id":1170811,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/7b/c1efb1d9.jpg","nickname":"èƒ¡æ°¸","note":"","ucode":"931DA91D191FEE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1613123,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9d/43/bf628743.jpg","nickname":"Cyber","note":"","ucode":"A7842494F57D0C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371033,"discussion_content":"while(als.size() == 1)è¿™ä¸ªä¸è¡Œçš„ï¼Œæœ‰bugï¼Œsize==2çš„æ—¶å€™å’‹åŠï¼Ÿåº”è¯¥while(als.size() >= 1)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619616979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":307155,"ip_address":""},"score":371033,"extra":""}]},{"author":{"id":1174199,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ea/b7/1a18a39d.jpg","nickname":"5-åˆ˜æ–°æ³¢(Arvin)","note":"","ucode":"DBD135D2587A93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4187,"discussion_content":"&amp;&amp; éƒ½ä¸åŒ…å«æ‰waitå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565201815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1793425,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5d/91/9b6fb4ad.jpg","nickname":"daiwf","note":"","ucode":"2C78451F5488BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1174199,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ea/b7/1a18a39d.jpg","nickname":"5-åˆ˜æ–°æ³¢(Arvin)","note":"","ucode":"DBD135D2587A93","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":112841,"discussion_content":"éƒ½ä¸åŒ…å«å°±è¯æ˜å½“å‰fromå’Œtoéƒ½æ²¡æœ‰è¢«ç®¡ç†å‘˜æ‹¿èµ°ã€‚åè€Œä¸ç”¨waitã€‚å¦‚æœæœ‰ä¸€ä¸ªåŒ…å«å°±è¯æ˜æœ‰å…¶ä»–çº¿ç¨‹æ‹¿èµ°äº†è¿™ä¸ªå¯¹è±¡ã€‚å°±è¦ç­‰å¾…äº†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1577884955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4187,"ip_address":""},"score":112841,"extra":""}]}]},{"had_liked":false,"id":76252,"user_name":"lau","can_delete":false,"product_type":"c1","uid":1174230,"ip_address":"","ucode":"4EC054B801F1E1","user_header":"https://static001.geekbang.org/account/avatar/00/11/ea/d6/1f98594e.jpg","comment_is_top":false,"comment_ctime":1552557529,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"65977066969","product_id":100023901,"comment_content":"çœ‹è¯„è®ºä¹Ÿèƒ½å­¦åˆ°å¾ˆå¤šå¹²è´§","like_count":15},{"had_liked":false,"id":75304,"user_name":"é™ˆå¿—å‡¯","can_delete":false,"product_type":"c1","uid":1099594,"ip_address":"","ucode":"C154E8FE848152","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/4a/1c5627ef.jpg","comment_is_top":false,"comment_ctime":1552376208,"is_pvip":false,"replies":[{"id":"27471","content":"å¯¹äºæ°´å¹³é«˜çš„ï¼Œå®Œæ•´çš„ä»£ç æ²¡å¿…è¦ã€‚å¯¹äºæ°´å¹³ä½çš„ï¼Œå®Œæ•´çš„ä»£ç åªèƒ½å¢åŠ æƒ°æ€§ã€‚æˆ‘å°±å¾ˆè®¨åŒç²˜è´´ä¸€äº›æ— å…³çš„ä»£ç ğŸ˜ƒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552394371,"ip_address":"","comment_id":75304,"utype":1}],"discussion_count":2,"race_medal":0,"score":"57386951056","product_id":100023901,"comment_content":"å¼ºçƒˆå»ºè®®è€å¸ˆæ¯ä¸ªç« èŠ‚é…ä¸Šå®Œæ•´çš„demoï¼ŒåŒ…æ‹¬æ¨¡æ‹Ÿå¤šçº¿ç¨‹å¤šä¸ªå®¢æˆ·æ“ä½œçš„ä»£ç ï¼Œè¿™æ ·çœ‹æ•ˆæœæ‰æ˜¯æœ€ä½³çš„ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿèƒ½æ ¹æ®ä»£ç å®é™…å¥½å¥½è§‚å¯Ÿï¼","like_count":13,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442855,"discussion_content":"å¯¹äºæ°´å¹³é«˜çš„ï¼Œå®Œæ•´çš„ä»£ç æ²¡å¿…è¦ã€‚å¯¹äºæ°´å¹³ä½çš„ï¼Œå®Œæ•´çš„ä»£ç åªèƒ½å¢åŠ æƒ°æ€§ã€‚æˆ‘å°±å¾ˆè®¨åŒç²˜è´´ä¸€äº›æ— å…³çš„ä»£ç ğŸ˜ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552394371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005200,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/90/be01bb8d.jpg","nickname":"Asanz","note":"","ucode":"430AB7ED59EE3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2390,"discussion_content":"è€å¸ˆæ˜¯æ‡’ç™Œæ™šæœŸäº†ğŸ˜‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1563532219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74971,"user_name":"é‚‹é¢çš„æµæµªå‰‘å®¢","can_delete":false,"product_type":"c1","uid":1260881,"ip_address":"","ucode":"32AF6F9070506D","user_header":"https://static001.geekbang.org/account/avatar/00/13/3d/51/9723276c.jpg","comment_is_top":false,"comment_ctime":1552332624,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57386907472","product_id":100023901,"comment_content":"waitä¼šé‡Šæ”¾å½“å‰å æœ‰çš„é”ï¼Œsleepä¸ä¼šé‡Šæ”¾é”","like_count":13},{"had_liked":false,"id":75424,"user_name":"San D Ji","can_delete":false,"product_type":"c1","uid":1441745,"ip_address":"","ucode":"138C9CCC38DC4C","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/d1/238d9da3.jpg","comment_is_top":false,"comment_ctime":1552395971,"is_pvip":false,"replies":[{"id":"27478","content":"æ¯”å¦‚ä½ è¦åšä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œåšä¸ªhttpclientï¼Œåšä¸ªrpcæ¡†æ¶ï¼Œç”¨æ‰¹å¤„ç†å¤„ç†ä¸Šåƒä¸‡æ•°æ®ï¼Œä¸€ä¸ªç®€å•çš„crudçœŸçš„ç”¨ä¸ä¸Š<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552396843,"ip_address":"","comment_id":75424,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53092003523","product_id":100023901,"comment_content":"å­¦ä¹ è¿™å‡ ç« ä»¥åï¼Œæˆ‘ä¸€ç›´æœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒJavawebç«¯åœ¨ä»€ä¹ˆæ ·çš„ä¸šåŠ¡åœºæ™¯ä¸‹éœ€è¦å¤šçº¿ç¨‹çš„æŠ€æœ¯å®ç°ï¼Ÿ<br>ä¸€ç›´ä»¥ä¸ºJavawebç«¯éƒ½æ˜¯æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æœåŠ¡å™¨ç«¯å¼€å¯ä¸€æ¡çº¿ç¨‹ç‹¬ç«‹ä½œä¸šï¼Œå®Œäº†ä¹‹åå°±è¿”å›ä¸€ä¸ªåº”ç­”ã€‚<br>ä¸çŸ¥é“è€å¸ˆèƒ½å¦å›ç­”ä¸€ä¸‹æˆ‘çš„ç–‘é—®ï¼Ÿ","like_count":12,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442886,"discussion_content":"æ¯”å¦‚ä½ è¦åšä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œåšä¸ªhttpclientï¼Œåšä¸ªrpcæ¡†æ¶ï¼Œç”¨æ‰¹å¤„ç†å¤„ç†ä¸Šåƒä¸‡æ•°æ®ï¼Œä¸€ä¸ªç®€å•çš„crudçœŸçš„ç”¨ä¸ä¸Š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552396843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75763,"user_name":"é™ˆå¿—å‡¯","can_delete":false,"product_type":"c1","uid":1099594,"ip_address":"","ucode":"C154E8FE848152","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/4a/1c5627ef.jpg","comment_is_top":false,"comment_ctime":1552465866,"is_pvip":false,"replies":[{"id":"27643","content":"å¦‚æœåªæ˜¯è¿™ä¸ªä¾‹å­å°±ä¸éœ€è¦äº†ï¼Œ<br>é€ä½ ä¿©å­—ï¼ä¼˜ç§€ï¼ï¼ï¼ï¼ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552479958,"ip_address":"","comment_id":75763,"utype":1}],"discussion_count":2,"race_medal":0,"score":"48797106122","product_id":100023901,"comment_content":"public class Allocator {<br>\tprivate final List&lt;Account&gt; als=new LinkedList&lt;Account&gt;();<br>\t&#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº<br>\tpublic synchronized void apply(Account from, Account to) {<br>\t\t&#47;&#47; ç»å…¸å†™æ³•<br>\t\twhile (als.contains(from) || als.contains(to)) {<br>\t\t\ttry {<br>\t\t\t\tSystem.out.println(&quot;ç­‰å¾…ç”¨æˆ· -&gt; &quot;+from.getId()+&quot;_&quot;+to.getId());<br>\t\t\t\twait();<br>\t\t\t} catch (Exception e) {<br>\t\t\t\t&#47;&#47;notify + notifyAll ä¸ä¼šæ¥è¿™é‡Œ<br>\t\t\t\tSystem.out.println(&quot;å¼‚å¸¸ç”¨æˆ· -&gt; &quot;+from.getId()+&quot;_&quot;+to.getId());<br>\t\t\t\te.printStackTrace();<br>\t\t\t}<br>\t\t}<br>\t\tals.add(from);<br>\t\tals.add(to);<br>\t}<br>\t&#47;&#47; å½’è¿˜èµ„æº<br>\tpublic synchronized void free(Account from, Account to) {<br>\t\tSystem.out.println(&quot;å”¤é†’ç”¨æˆ· -&gt; &quot;+from.getId()+&quot;_&quot;+to.getId());<br>\t\tals.remove(from);<br>\t\tals.remove(to);<br>\t\tnotifyAll();<br>\t}<br>}<br><br>public class Account {<br>\t&#47;&#47; actr åº”è¯¥ä¸ºå•ä¾‹<br>\tprivate final Allocator actr;<br>\t&#47;&#47;å”¯ä¸€è´¦å·<br>\tprivate final long id;<br>\t&#47;&#47;ä½™é¢<br>\tprivate int balance;<br>\tpublic Account(Allocator actr,long id,int balance){<br>\t\tthis.actr=actr;<br>\t\tthis.id=id;<br>\t\tthis.balance=balance;<br>\t}<br>\t&#47;&#47; è½¬è´¦<br>\tpublic void transfer(Account target, int amt) {<br>\t\t&#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>\t\tactr.apply(this, target);<br>\t\ttry {<br>\t\t\t&#47;&#47;TODO æœ‰äº†èµ„æºç®¡ç†å™¨ï¼Œè¿™é‡Œçš„synchronizedé”å°±ä¸éœ€è¦äº†å§ï¼Ÿï¼<br>\t\t\t\t\tif (this.balance &gt; amt) {<br>\t\t\t\t\t\tthis.balance -= amt;<br>\t\t\t\t\t\ttarget.balance += amt;<br>\t\t\t\t\t}<br>\t\t\t\t\t&#47;&#47;æ¨¡æ‹Ÿæ•°æ®åº“æ“ä½œæ—¶é—´<br>\t\t\t\t\ttry {<br>\t\t\t\t\t\tThread.sleep(new Random().nextInt(2000));<br>\t\t\t\t\t} catch (InterruptedException e) {<br>\t\t\t\t\t\te.printStackTrace();<br>\t\t\t\t\t}<br>\t\t} finally {<br>\t\t\tactr.free(this, target);<br>\t\t}<br>\t}<br>\t@Override<br>\tpublic int hashCode() {<br>\t\tfinal int prime = 31;<br>\t\tint result = 1;<br>\t\tresult = prime * result + (int) (id ^ (id &gt;&gt;&gt; 32));<br>\t\treturn result;<br>\t}<br>\t&#47;**<br>\t * ç”¨äºåˆ¤æ–­ä¸¤ä¸ªç”¨æˆ·æ˜¯å¦ä¸€è‡´<br>\t *&#47;<br>\t@Override<br>\tpublic boolean equals(Object obj) {<br>\t\tif (this == obj)<br>\t\t\treturn true;<br>\t\tif (obj == null)<br>\t\t\treturn false;<br>\t\tif (getClass() != obj.getClass())<br>\t\t\treturn false;<br>\t\tAccount other = (Account) obj;<br>\t\tif (id != other.id)<br>\t\t\treturn false;<br>\t\treturn true;<br>\t}<br>\tpublic long getId() {<br>\t\treturn id;<br>\t}<br>}<br>è€å¸ˆï¼Œä»¥ä¸Šä»£ç æ˜¯æˆ‘è¡¥çš„ï¼Œæœ‰ä¸ªç–‘é—®ï¼Œä»¥ä¸Šæœ‰äº†Allocatorç®¡ç†å™¨ï¼ˆè§TODOéƒ¨åˆ†ï¼‰ï¼Œtransferæ–¹æ³•çš„thisè·Ÿtargetéƒ½ä¸å†éœ€è¦åŠ synchronizedé”äº†å§ï¼Ÿï¼","like_count":11,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443022,"discussion_content":"å¦‚æœåªæ˜¯è¿™ä¸ªä¾‹å­å°±ä¸éœ€è¦äº†ï¼Œ\né€ä½ ä¿©å­—ï¼ä¼˜ç§€ï¼ï¼ï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552479958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1533266,"avatar":"https://static001.geekbang.org/account/avatar/00/17/65/52/07c09c7f.jpg","nickname":"josancpp","note":"","ucode":"0CDC39B3E716A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":274976,"discussion_content":"å…³é”®çœ‹è¿™ä¸ªbalanceå…±äº«å˜é‡ä¼šä¸ä¼šå˜ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590640250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75366,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1552383645,"is_pvip":false,"replies":[{"id":"27492","content":"ä½ æ˜¯å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552401058,"ip_address":"","comment_id":75366,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44502056605","product_id":100023901,"comment_content":"ç½®é¡¶å›ç­”æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Œwaitä¸€æ ·éœ€è¦æ•è·InterruptedExceptionå¼‚å¸¸å‘€ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442873,"discussion_content":"ä½ æ˜¯å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552401058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75246,"user_name":"^_^","can_delete":false,"product_type":"c1","uid":1088001,"ip_address":"","ucode":"EE5DAC03CFC2EE","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/01/1489f98d.jpg","comment_is_top":false,"comment_ctime":1552369644,"is_pvip":false,"replies":[{"id":"27467","content":"æˆ‘ç¡®è®¤äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯å¯¹çš„<br>åªè¦æœ‰ä¸€ä¸ªï¼Œå°±è¯´æ˜æ›¾ç»è¢«åˆ†é…è¿‡<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552393358,"ip_address":"","comment_id":75246,"utype":1}],"discussion_count":3,"race_medal":0,"score":"40207075308","product_id":100023901,"comment_content":"è€å¸ˆï¼Œwhile(als.contains(from) || als.contains(to)) è¿™å¥å¯¹å—","like_count":9,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442836,"discussion_content":"æˆ‘ç¡®è®¤äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯å¯¹çš„\nåªè¦æœ‰ä¸€ä¸ªï¼Œå°±è¯´æ˜æ›¾ç»è¢«åˆ†é…è¿‡\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552393358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047837,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/1d/76bec892.jpg","nickname":"æ¢…ä¾¯","note":"","ucode":"60445908BDD82C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1398,"discussion_content":"æ ¹æ®å‰æ–‡æåˆ°çš„while(æ¡ä»¶ä¸æ»¡è¶³) { wait(); }\nè¿™æ˜¯ä¸åº”è¯¥æ˜¯è¿™æ ·æ‰å¯¹å—ï¼Ÿwhile(!(als.contains(from) &amp;&amp;als.contains(to))) \næ»¡è¶³çš„æ¡ä»¶æ˜¯åŒæ—¶æœ‰æ‹¥æœ‰fromå’Œtoç„¶åå†å–åï¼Œå¯æ˜¯æˆ‘ç”¨ä»£ç è¿è¡Œäº†ä¸€ä¸‹è¿™æ ·ä¼šæ­»é”å‘€ï¼Œå¯ä»¥è§£ç­”ä¸€ä¸‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562598364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1540162,"avatar":"https://static001.geekbang.org/account/avatar/00/17/80/42/4f2ec593.jpg","nickname":"timetraveler","note":"","ucode":"543CE2E26631CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1047837,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/1d/76bec892.jpg","nickname":"æ¢…ä¾¯","note":"","ucode":"60445908BDD82C","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":3816,"discussion_content":"å»ºè®®ä½ å†å¥½å¥½æƒ³æƒ³ï½ als è¡¨ç¤ºè¢«å ç”¨çš„å¯¹è±¡ï¼Œå¦‚æœalsé‡Œæœ‰from æˆ– toï¼Œè¡¨ç¤ºå¯¹è±¡å·²è¢«åˆ«çš„çº¿ç¨‹å ç”¨ï¼Œå½“å‰çº¿ç¨‹waitï¼Œæ²¡æ¯›ç—…çš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1564840340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":1398,"ip_address":""},"score":3816,"extra":""}]}]},{"had_liked":false,"id":75140,"user_name":"é«˜æº","can_delete":false,"product_type":"c1","uid":1048887,"ip_address":"","ucode":"751B41FD38EF7D","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/37/12e4c9c9.jpg","comment_is_top":false,"comment_ctime":1552357987,"is_pvip":false,"replies":[{"id":"27394","content":"å¤§å®¶æ°´å¹³ä¸ä¸€æ ·ï¼Œæœ‰äº›é«˜æ°´å¹³çš„å¯èƒ½åªæƒ³çœ‹åˆ°æ ¸å¿ƒçš„ä»£ç ï¼Œæˆ‘æ€•è´´å¤šäº†ï¼Œæœ‰äººè¯´æµªè´¹æµé‡ã€‚è‡ªå·±è¡¥ä¸Šå‰©ä½™ä»£ç ä¹Ÿæ˜¯ä¸ªä¸é”™çš„æé«˜æœºä¼šå§ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552362835,"ip_address":"","comment_id":75140,"utype":1}],"discussion_count":2,"race_medal":0,"score":"40207063651","product_id":100023901,"comment_content":"è€å¸ˆæœ€å¥½è®²è§£æ¯ä¸€ç« çš„æ—¶å€™é…åˆå®Œæ•´çš„ä¾‹å­æºä»£ç ï¼Œè¿™æ ·å†åŠ è°ƒè¯•æºä»£ç ï¼Œå°è±¡æ›´æ·±åˆ»äº†","like_count":9,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442805,"discussion_content":"å¤§å®¶æ°´å¹³ä¸ä¸€æ ·ï¼Œæœ‰äº›é«˜æ°´å¹³çš„å¯èƒ½åªæƒ³çœ‹åˆ°æ ¸å¿ƒçš„ä»£ç ï¼Œæˆ‘æ€•è´´å¤šäº†ï¼Œæœ‰äººè¯´æµªè´¹æµé‡ã€‚è‡ªå·±è¡¥ä¸Šå‰©ä½™ä»£ç ä¹Ÿæ˜¯ä¸ªä¸é”™çš„æé«˜æœºä¼šå§ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552362835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2963434,"avatar":"","nickname":"Geek_94fa0e","note":"","ucode":"15BC7D4E130E80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":560388,"discussion_content":"æ€ä¹ˆå¯èƒ½è¿˜æœ‰å¼±æ™ºè§‰å¾—æµªè´¹æµé‡å‘¢?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649309937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79136,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1214463,"ip_address":"","ucode":"BE7C4C4AE0479B","user_header":"https://static001.geekbang.org/account/avatar/00/12/87/ff/d7722f90.jpg","comment_is_top":false,"comment_ctime":1553368013,"is_pvip":false,"replies":[{"id":"28854","content":"ä¸€ä¸ªnotifyå¯¹åº”ä¸€ä¸ªwaitï¼Œæµªè´¹ä¸€ä¸ªwaitï¼Œè‡ªç„¶æœ‰ä¸€ä¸ªæ°¸è¿œå¤±å»æœºä¼š<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553388110,"ip_address":"","comment_id":79136,"utype":1}],"discussion_count":5,"race_medal":0,"score":"35913106381","product_id":100023901,"comment_content":"3æ€ä¹ˆå¯èƒ½æ°¸è¿œé€šçŸ¥ä¸åˆ°å‘¢ï¼Ÿå°±ç®—4é€šçŸ¥åˆ°äº†ä¸æ»¡è¶³æ¡ä»¶ç­‰å¾…ï¼Œ2èµ°å®Œè¿˜æ˜¯ä¼šé€šçŸ¥3æˆ–è€…4ï¼Œå°±ç®—é€šçŸ¥åˆ°4äº†è¿˜æ˜¯ä¼šç‚¹ç”¨notifyæ–¹æ³•","like_count":8,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444368,"discussion_content":"ä¸€ä¸ªnotifyå¯¹åº”ä¸€ä¸ªwaitï¼Œæµªè´¹ä¸€ä¸ªwaitï¼Œè‡ªç„¶æœ‰ä¸€ä¸ªæ°¸è¿œå¤±å»æœºä¼š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553388110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1361746,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","nickname":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","note":"","ucode":"5F97037585F857","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":91438,"discussion_content":"æˆ‘ä¹Ÿæœ‰åŒæ ·çš„ç–‘é—®ï¼Œå³ä½¿æ²¡æœ‰é€šçŸ¥3ï¼Œè€Œæ˜¯é€šçŸ¥4, 4çš„æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œç»§ç»­ç­‰å¾…ï¼Œä½†æ˜¯2æ‰§è¡Œç»“æŸåä¼šè°ƒç”¨notify(),è¿™ä¸ªæ—¶å€™ä¼šéšæœºé€‰æ‹©3 æˆ– 4ï¼Œä½†æ˜¯3 æˆ– 4ç»“æŸåä¹Ÿä¼šè°ƒç”¨notify()ï¼Œæ‰€ä»¥å¦‚æœåªæœ‰çº¿ç¨‹1,2,3,4ï¼Œé‚£ä¹ˆä»–ä»¬4ä¸ªæœ€åéƒ½ä¼šæ‰§è¡Œå®Œçš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576833866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1600585,"avatar":"https://static001.geekbang.org/account/avatar/00/18/6c/49/fdb9e442.jpg","nickname":"æ¢","note":"","ucode":"2F474FE490D424","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563875,"discussion_content":"åŒæ„ä½ çš„è§‚ç‚¹ï¼Œè¿™ä¾‹å­ä¸¾çš„æœ‰é—®é¢˜å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650100674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1415666,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/f2/36e102e6.jpg","nickname":"çˆ†ç±³èŠ±","note":"","ucode":"4F8BC766DBC4CD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544060,"discussion_content":"ç¡®å®ä¾‹å­ä¸¾çš„æœ‰ç‚¹é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641391766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2618910,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/f6YBFBbXurWa9NJr42Z3Hfic223qsEVpAghY0W7DU2cRUicmKvg1QHsjPGRBP90wjV1yAGC8dzerRJcwribB0ibVlQ/132","nickname":"Geek_95323e","note":"","ucode":"92EFD57A73C726","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373891,"discussion_content":"æˆ‘è§‰å¾—ä½ è¯´çš„æ²¡é—®é¢˜ ä½œè€…å¾ˆå¤šé—®é¢˜ä¸‹é¢éƒ½æ˜¯è¿™ç§è¯,å´æ²¡æœ‰æ­£é¢å›åº”è¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620908055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75033,"user_name":"ç‹‚æˆ˜ä¿„æ´›ä¼Š","can_delete":false,"product_type":"c1","uid":1213269,"ip_address":"","ucode":"F6EACA321E6180","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUzv6S9wroydkGP6m3OsQ8QuI4jAibv21tNkm7KVGPffJibj8Y29yIdKl4qkDGd3iaGJCSGVarfxoibQ/132","comment_is_top":false,"comment_ctime":1552351786,"is_pvip":false,"replies":[{"id":"27479","content":"æœ‰ç”¨ï¼Œä¾‹å¦‚åˆ«è®©ç¨‹åºè·‘çš„å¤ªå¿«","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552397024,"ip_address":"","comment_id":75033,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35912090154","product_id":100023901,"comment_content":"Sleepæ˜¯ç¡ä¸€æ®µæ—¶é—´å°±è‡ªå·±èµ·æ¥äº†ï¼Œwaitçš„è¯å¾—ç­‰åˆ°åˆ«äººå«é†’ä»–ã€‚ä¸ªäººæ„Ÿè§‰sleepé™¤äº†å¢åŠ ç¨‹åºè¿è¡Œæ—¶é—´ä»¥å¤–ï¼Œæ²¡åˆ«çš„æ„ä¹‰å‘€","like_count":8,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442784,"discussion_content":"æœ‰ç”¨ï¼Œä¾‹å¦‚åˆ«è®©ç¨‹åºè·‘çš„å¤ªå¿«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552397024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1154281,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9c/e9/5ba8b1a3.jpg","nickname":"éƒ­æ–°é¹","note":"","ucode":"F9D76691B335FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533016,"discussion_content":"ä¾‹å¦‚æ´—æ•°æ®çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šåŠ sleepã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637756295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78595,"user_name":"é˜¿é‡Œå·´å·´éªŠéª…","can_delete":false,"product_type":"c1","uid":1042492,"ip_address":"","ucode":"FDA3C20D9E622A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/3c/e8c80390.jpg","comment_is_top":false,"comment_ctime":1553180777,"is_pvip":false,"replies":[{"id":"28669","content":"code1ï¼›<br>if (æ¡ä»¶ä¸æ»¡è¶³)<br>  wait()<br>code2ï¼›<br><br>å½“è°ƒç”¨wait()æ—¶ï¼Œé˜»å¡ã€‚è¢«å”¤é†’æ—¶ï¼Œå°±ç›´æ¥æ‰§è¡Œcode2äº†ï¼Œæ²¡æœºä¼šé‡æ–°åˆ¤æ–­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553264269,"ip_address":"","comment_id":78595,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31617951849","product_id":100023901,"comment_content":"whileæ–¹å¼ä¸ºå•¥è¯´æ˜¯ç»å…¸èŒƒå¼å‘¢ï¼Ÿæ¢æˆifåˆ¤æ–­ä¸å¯ä»¥ä¹ˆï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444155,"discussion_content":"code1ï¼›\nif (æ¡ä»¶ä¸æ»¡è¶³)\n  wait()\ncode2ï¼›\n\nå½“è°ƒç”¨wait()æ—¶ï¼Œé˜»å¡ã€‚è¢«å”¤é†’æ—¶ï¼Œå°±ç›´æ¥æ‰§è¡Œcode2äº†ï¼Œæ²¡æœºä¼šé‡æ–°åˆ¤æ–­ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1553264269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1198112,"avatar":"https://static001.geekbang.org/account/avatar/00/12/48/20/f1898740.jpg","nickname":"å‡¹å‡¸","note":"","ucode":"D6F0EBDC8F2588","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412031,"discussion_content":"ä¸å¯ä»¥ï¼Œå› ä¸ºè¢«å”¤é†’åè¦å»æ£€æŸ¥æ¡ä»¶åœ¨é‡æ–°å¾—åˆ°é”çš„æ—¶åˆ»æ¡ä»¶æ˜¯å¦è¿˜æˆç«‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636049947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88522,"user_name":"the geek","can_delete":false,"product_type":"c1","uid":1506723,"ip_address":"","ucode":"71DECBC814A539","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLz3icr3mGs5ib8FbSPQZ2ic3ib90mHkd1btQrmGacZjJxfYXrerIdaTxglKyCicFzLcEAb6deC2cWjE5Q/132","comment_is_top":false,"comment_ctime":1555935287,"is_pvip":false,"replies":[{"id":"31763","content":"å‡è®¾ä¸€å¼€å§‹æœ‰10ä¸ªçº¿ç¨‹äº‰æŠ¢ä¸€ä¸ªèµ„æºï¼Œå…¶ä¸­9ä¸ªéƒ½å¤„äºwaitçŠ¶æ€ï¼Œåªæœ‰ä¸€ä¸ªè¿è¡Œï¼Œåªè¦è¿™ä¸ªè¿è¡Œçš„çº¿ç¨‹è¿è¡Œç»“æŸäº†ï¼Œé‚£ä»–ä¼šéšæœºé€šçŸ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œç»“æœè¿™ä¸ªçº¿ç¨‹å‘ç°è‡ªå·±æ¡ä»¶è¿˜ä¸æˆç†Ÿï¼Œäºæ˜¯ç»§ç»­waitã€‚é‚£ä½ è§‰å¾—10è¿™ä¸ªç­‰å¾…çš„è¿˜æœ‰æœºä¼šè¢«å”¤é†’å—ï¼Ÿè‡³äºè¢«å”¤é†’çš„ä¸ºä»€ä¹ˆä¼šç­‰å¾…ï¼Œä½ éœ€è¦è‡ªå·±ç¢ç£¨ä¸€ä¸‹æ–‡ä¸­çš„ä¾‹å­ï¼Œä¸ºä»€ä¹ˆä¾‹å­ä¸­æ˜¯ç­‰å¾…ä¸¤ä¸ªæ¡ä»¶ã€‚<br>è¿™äº›ä¸œè¥¿éƒ½æ˜¯ä¸“å®¶ä»¬æå‡ºæ¥çš„ï¼Œä¸ä¼šé”™çš„ï¼Œå¦‚æœæƒ³ä¸é€šï¼Œå°±æ¢ä¸ªè§’åº¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555946011,"ip_address":"","comment_id":88522,"utype":1}],"discussion_count":5,"race_medal":0,"score":"27325739063","product_id":100023901,"comment_content":"æˆ‘ä¸¾ä¸ªæ›´ç®€å•çš„ä¾‹å­è¯æ˜ï¼Œnotifyä¸ä¸¢å¤±ã€‚å‡è®¾ä¸€å¼€å§‹æœ‰10ä¸ªçº¿ç¨‹äº‰æŠ¢ä¸€ä¸ªèµ„æºï¼Œå…¶ä¸­9ä¸ªéƒ½å¤„äºwaitçŠ¶æ€ï¼Œåªæœ‰ä¸€ä¸ªè¿è¡Œï¼Œåªè¦è¿™ä¸ªè¿è¡Œçš„çº¿ç¨‹è¿è¡Œç»“æŸäº†ï¼Œé‚£ä»–ä¼šéšæœºé€šçŸ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶åå°±ä¼šåƒé“¾å¼ä¸€æ ·çš„æ¥è¿é€šçŸ¥ï¼Œç›´è‡³å…¨éƒ¨è¿è¡Œå®Œæˆã€‚","like_count":6,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447818,"discussion_content":"å‡è®¾ä¸€å¼€å§‹æœ‰10ä¸ªçº¿ç¨‹äº‰æŠ¢ä¸€ä¸ªèµ„æºï¼Œå…¶ä¸­9ä¸ªéƒ½å¤„äºwaitçŠ¶æ€ï¼Œåªæœ‰ä¸€ä¸ªè¿è¡Œï¼Œåªè¦è¿™ä¸ªè¿è¡Œçš„çº¿ç¨‹è¿è¡Œç»“æŸäº†ï¼Œé‚£ä»–ä¼šéšæœºé€šçŸ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œç»“æœè¿™ä¸ªçº¿ç¨‹å‘ç°è‡ªå·±æ¡ä»¶è¿˜ä¸æˆç†Ÿï¼Œäºæ˜¯ç»§ç»­waitã€‚é‚£ä½ è§‰å¾—10è¿™ä¸ªç­‰å¾…çš„è¿˜æœ‰æœºä¼šè¢«å”¤é†’å—ï¼Ÿè‡³äºè¢«å”¤é†’çš„ä¸ºä»€ä¹ˆä¼šç­‰å¾…ï¼Œä½ éœ€è¦è‡ªå·±ç¢ç£¨ä¸€ä¸‹æ–‡ä¸­çš„ä¾‹å­ï¼Œä¸ºä»€ä¹ˆä¾‹å­ä¸­æ˜¯ç­‰å¾…ä¸¤ä¸ªæ¡ä»¶ã€‚\nè¿™äº›ä¸œè¥¿éƒ½æ˜¯ä¸“å®¶ä»¬æå‡ºæ¥çš„ï¼Œä¸ä¼šé”™çš„ï¼Œå¦‚æœæƒ³ä¸é€šï¼Œå°±æ¢ä¸ªè§’åº¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555946011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1475528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","nickname":"maybe","note":"","ucode":"93D160F617E750","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307045,"discussion_content":"public class NotifyTest {\npublic static void main(String[] args) {\n\tfor (var i = 0; i < 100; i++) {\n\t\ttest(i);\n\t}\n}\nprivate final static boolean NOTIFY_ALL = false;\nprivate static void test(int i) {\n\tSystem.out.println(i + &#34;th&#34;);\n\tvar q = new Q<String>();\n\tvar p1 = new Thread(() -> q.enQ(&#34;hello&#34;));\n\tvar p2 = new Thread(() -> q.enQ(&#34;world&#34;));\n\tvar c1 = new Thread(() -> q.deQ());\n\tvar c2 = new Thread(() -> q.deQ());\n\tc1.start();\n\tc2.start();\n\ttry {\n\t\tThread.sleep(100);\n\t} catch (InterruptedException e) {\n\t\te.printStackTrace();\n\t}\n\tp1.start();\n\tp2.start();\n\ttry {\n\t\tp1.join();\n\t\tp2.join();\n\t\tc1.join();\n\t\tc2.join();\n\t} catch (InterruptedException e) {\n\t\te.printStackTrace();\n\t}\n}\nstatic class Q<T> {\n\tprivate volatile List<T> LIST = new ArrayList<T>(1);\n\tpublic synchronized void enQ(T obj) {\n\t\twhile (!LIST.isEmpty()) {\n\t\t\ttry {\n\t\t\t\twait();\n\t\t\t} catch (InterruptedException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\tLIST.add(obj);\n\t\tSystem.out.println(Thread.currentThread().getName() + &#34;enQ success :&#34; + obj);\n\t\tif (NOTIFY_ALL) {\n\t\t\tnotifyAll();\n\t\t} else {\n\t\t\tnotify();\n\t\t}\n\t}\n\tpublic synchronized void deQ() {\n\t\twhile (LIST.isEmpty()) {\n\t\t\ttry {\n\t\t\t\twait();\n\t\t\t} catch (InterruptedException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\tvar obj = LIST.remove(0);\n\t\tSystem.out.println(Thread.currentThread().getName() + &#34;deQ success :&#34; + obj);\n\n\t\tif (NOTIFY_ALL) {\n\t\t\tnotifyAll();\n\t\t} else {\n\t\t\tnotify();\n\t\t}\n\t}\n}\n}\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600481036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1942714,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKfdTR27z4sNOFoYMpQEhzJEblbGqibesKHYWgz9X9xZ3nzOL3EBOzkmWs4CqWMVf2IxXPCMlWx1gQ/132","nickname":"å ƒ","note":"","ucode":"80B75B0347206A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303657,"discussion_content":"æ„Ÿè§‰æˆ‘ä¸æ‡‚çš„åœ°æ–¹åœ¨äºè¿™ä¸ªâ€œç»“æœè¿™ä¸ªçº¿ç¨‹å‘ç°è‡ªå·±æ¡ä»¶è¿˜ä¸æˆç†Ÿ&#34;, æœ‰ä»€ä¹ˆæƒ…å†µä¸‹å¯èƒ½å¯¼è‡´æ¡ä»¶ä¸æˆç†Ÿå‘¢ï¼Ÿä¾‹å­é‡Œé¢çš„AB, CDèµ„æºæœ€ç»ˆéƒ½ä¼šè¢«é‡Šæ”¾ï¼Œçº¿ç¨‹2é‡Šæ”¾CDåå”¤é†’çš„3æˆ–è€…4éƒ½å¯ä»¥ç»§ç»­æ‰§è¡Œï¼ŒAB, CD éƒ½å¯ä»¥ä½¿ç”¨äº†ï¼Œ3å¯ä»¥å”¤é†’4ï¼Œ 4ä¹Ÿæ˜¯å¯ä»¥å”¤é†’3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599324152,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1942714,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKfdTR27z4sNOFoYMpQEhzJEblbGqibesKHYWgz9X9xZ3nzOL3EBOzkmWs4CqWMVf2IxXPCMlWx1gQ/132","nickname":"å ƒ","note":"","ucode":"80B75B0347206A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303653,"discussion_content":"æ„Ÿè§‰è€å¸ˆè§£é‡Šçš„è¿™ä¸ªâ€œæ¡ä»¶è¿˜ä¸æˆç†Ÿâ€åªæœ‰å¯èƒ½æ˜¯å¤–éƒ¨å› ç´ å¯¼è‡´çš„ï¼ˆéœ€è¦èµ„æºEï¼‰ï¼Œæˆ–è€…è¯´æ‰§è¡Œå®Œçš„çº¿ç¨‹æ‰€é‡Šæ”¾çš„èµ„æºå¯¹è¢«å”¤é†’çš„çº¿ç¨‹æ˜¯ä¸å¯ç”¨çš„æˆ–è€…è¢«å”¤é†’å‰è¿™ä¸ªèµ„æºåˆè¢«å…¶ä»–çº¿ç¨‹ï¼ˆéè¿™ä¸ªé”é˜Ÿåˆ—çš„çº¿ç¨‹ï¼‰å ç”¨äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599323922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250907,"avatar":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","nickname":"Monday","note":"","ucode":"77B9BACC783598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278478,"discussion_content":"å”¤é†’çš„çº¿ç¨‹t1ç»§ç»­waitï¼Œè¡¨æ˜t1çš„èµ„æºè¢«å…¶ä»–çš„çº¿ç¨‹ï¼ˆè®¾ä¸ºt2ï¼‰æŠ¢å äº†ã€‚t2æ‰§è¡Œå®Œåï¼Œä¼šé‡Šæ”¾é”ï¼Œå¹¶å†æ¬¡notifyï¼Œè¿™æ—¶t1åˆè¿æ¥äº†æ–°çš„æœºä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591191597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124470,"user_name":"ixonya","can_delete":false,"product_type":"c1","uid":1071883,"ip_address":"","ucode":"1CE0897B39AD18","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epaibTssLXqSXryibVuFoMyicg64o3IqFaobS9J7TibqUpRQ45lVj2nbRQpfLQicW6W81zwYM19X1VIk8A/132","comment_is_top":false,"comment_ctime":1565901761,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18745770945","product_id":100023901,"comment_content":"å‡è®¾æˆ‘ä»¬æœ‰èµ„æº Aã€Bã€Cã€Dï¼Œçº¿ç¨‹ 1 ç”³è¯·åˆ°äº† ABï¼Œçº¿ç¨‹ 2 ç”³è¯·åˆ°äº† CDï¼Œæ­¤æ—¶çº¿ç¨‹ 3 ç”³è¯· ABï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆAB åˆ†é…ç»™çº¿ç¨‹ 1ï¼Œçº¿ç¨‹ 3 è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³ï¼‰ï¼Œçº¿ç¨‹ 4 ç”³è¯· CD ä¹Ÿä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚æˆ‘ä»¬å†å‡è®¾ä¹‹åçº¿ç¨‹ 1 å½’è¿˜äº†èµ„æº ABï¼Œå¦‚æœä½¿ç”¨ notify() æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹ 4ï¼Œä½†çº¿ç¨‹ 4 ç”³è¯·çš„æ˜¯ CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹ 3 å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ã€‚<br><br>----<br><br>è¿™é‡Œè¿˜æ˜¯æœ‰ç‚¹æ²¡å¤ªæ˜ç™½ã€‚çº¿ç¨‹ 1 å’Œ 2 æ‹¥æœ‰èµ„æºæ­£åœ¨è¿è¡Œï¼Œè¿è¡Œå®Œåä¼šé™†ç»­é‡Šæ”¾èµ„æºå¹¶ notifyã€‚å‡è®¾  1  å…ˆå®Œæˆï¼Œå”¤é†’äº† 4ï¼Œ4 ä¸€çœ‹ä¸è¡Œåˆ wait äº†ã€‚ä¹‹å 2 æ‰§è¡Œå®Œæˆé‡Šæ”¾èµ„æºï¼Œæ­¤æ—¶æ‰€æœ‰èµ„æºå‡å¯ç”¨ï¼Œå› æ­¤æ— è®º 2 notify è°ï¼Œè¢«å”¤é†’çš„çº¿ç¨‹æ€»èƒ½è¿è¡Œã€‚ä»¥æ­¤ç±»æ¨ï¼Œè®¾æœ‰  n ä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå‰ n-1 ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œçš„ notify éƒ½æµªè´¹äº†ä¹Ÿæ²¡äº‹ï¼Œå› ä¸ºæœ€åä¸€ä¸ªçº¿ç¨‹ notify æ—¶ä¸€å®šä¼šæ˜¯â€œæ‰€æœ‰èµ„æºå‡å¯ç”¨â€çš„å±€é¢ï¼Œå› æ­¤ä¹Ÿå°±ä¸€å®šèƒ½æˆåŠŸå”¤é†’çº¿ç¨‹ã€‚","like_count":4,"discussions":[{"author":{"id":2576933,"avatar":"https://static001.geekbang.org/account/avatar/00/27/52/25/5498f763.jpg","nickname":"å°ç°ç‹¼ğŸ‡¨ğŸ‡³","note":"","ucode":"71A0EA1FE755CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374052,"discussion_content":"notifyéšæœºå”¤é†’ï¼Œæ‚¨è¯´æ˜¯æœ€åä¸€ä¸ªçº¿ç¨‹notifyæ—¶ä¸€å®šä¼šã€‚ã€‚ã€‚å¹¶å‘æ—¶ï¼Œè¦æ˜¯æœ‰å¾ˆå¤šä¸€ç›´è½¬è´¦è¯·æ±‚æ—¶ï¼Œéšæœºåˆä¸èƒ½ä¿è¯ä¸€å®š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620981762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121097,"user_name":"å¼ å¤©å±¹","can_delete":false,"product_type":"c1","uid":1477612,"ip_address":"","ucode":"8BD6BD6DCF0F4F","user_header":"https://static001.geekbang.org/account/avatar/00/16/8b/ec/dc03f5ad.jpg","comment_is_top":false,"comment_ctime":1565057777,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18744926961","product_id":100023901,"comment_content":"çƒ­è¯„ç¬¬ä¸€çš„@ å§œæˆˆ åŒå­¦æåˆ°çš„ç¬¬ä¸‰ç‚¹ï¼šwaitæ— éœ€æ•è·å¼‚å¸¸è€Œsleepéœ€è¦æ•è·å¼‚å¸¸æˆ‘è§‰å¾—æ˜¯æœ‰è¯¯çš„ã€‚<br>wait() sleep() éƒ½ä¼šè®©çº¿ç¨‹è¿›å…¥ä¸€ç§ä¼‘çœ æˆ–è€…é˜»å¡çš„å¤±å»cpuçš„çŠ¶æ€ã€‚è¿™ä¸ªæ—¶å€™å®ƒä»¬éƒ½å¯ä»¥é€šè¿‡åˆ«çš„çº¿ç¨‹è°ƒç”¨å…¶interrupteæ–¹æ³•è®©ä»–ä»¬çš„çº¿ç¨‹ä»ä¼‘çœ çŠ¶æ€ä¸­ä¸­æ–­ã€‚è€Œç”±äºè¿™æ˜¯ä¸€ä¸ªcheckedExceptionï¼Œä»–ä»¬ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯éœ€è¦æ•è·çš„ï¼Œè¿™æ°æ°æ˜¯ä»–ä»¬çš„å…±åŒç‚¹ä¹‹ä¸€ã€‚","like_count":4,"discussions":[{"author":{"id":1554995,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ba/33/2d83d174.jpg","nickname":"æ—¶å…‰å®ˆæŠ¤è€…-åŸºå…°","note":"","ucode":"F0B0887B1979D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358510,"discussion_content":"æ˜¯ä»–ä»¬é€šçŸ¥åˆ«çš„çº¿ç¨‹å»ä¸­æ–­ä¼‘çœ çŠ¶æ€è¿˜æ˜¯åˆ«çš„çº¿ç¨‹å»ä¸­æ–­ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615990560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82435,"user_name":"éƒ­ç‘å¨Ÿ","can_delete":false,"product_type":"c1","uid":1299117,"ip_address":"","ucode":"BBCFC69965124A","user_header":"https://static001.geekbang.org/account/avatar/00/13/d2/ad/53517f01.jpg","comment_is_top":false,"comment_ctime":1554211310,"is_pvip":false,"replies":[{"id":"29856","content":"å› ä¸ºä¸å¯¹åº”äº†ï¼Œæ‰€ä»¥å°±æ­»ç­‰ä¸‹å»äº†ï¼Œæœ‰å€Ÿæœ‰è¿˜æ‰è¡Œï¼Œè¿˜é”™äº†äººå°±å‡ºé—®é¢˜äº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554215899,"ip_address":"","comment_id":82435,"utype":1}],"discussion_count":5,"race_medal":0,"score":"18734080494","product_id":100023901,"comment_content":"ä¹‹å‰è€å¸ˆç­”å¤é—®é¢˜æ—¶ï¼Œæåˆ°waitå’Œnotifyæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¦‚æœæµªè´¹äº†ä¸€ä¸ªnotifyï¼Œå°±å¿…ç„¶æœ‰ä¸€ä¸ªwaitæ°¸è¿œæ²¡æœºä¼šè¢«å”¤é†’ã€‚è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿ<br>ä¾‹å­é‡Œé¢ å‡è®¾ä¹‹åçº¿ç¨‹ 1 å½’è¿˜äº†èµ„æº ABï¼Œä½¿ç”¨ notify() æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹4 ç”³è¯·çš„æ˜¯ CDï¼Œç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œæ­¤æ—¶ä¼šæ‰§è¡Œwait()å—ï¼Ÿå¦‚æœæ‰§è¡Œäº†ï¼Œwaitå’Œnotifyè¿˜æ˜¯ä¸€ä¸€å¯¹åº”çš„å‘€ã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œï¼Œçº¿ç¨‹4ä¼šæ€ä¹ˆæ‰§è¡Œå‘¢ï¼Ÿæˆ‘çœ‹äº†å‡ æ¬¡æ–‡ç« äº†ï¼Œè¿˜æ˜¯æ²¡æœ‰ç†è§£æ­¤å¤„ï¼Œè¯·è€å¸ˆå¸®å¿™ï¼Œè°¢è°¢ã€‚<br>","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445588,"discussion_content":"å› ä¸ºä¸å¯¹åº”äº†ï¼Œæ‰€ä»¥å°±æ­»ç­‰ä¸‹å»äº†ï¼Œæœ‰å€Ÿæœ‰è¿˜æ‰è¡Œï¼Œè¿˜é”™äº†äººå°±å‡ºé—®é¢˜äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554215899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1198112,"avatar":"https://static001.geekbang.org/account/avatar/00/12/48/20/f1898740.jpg","nickname":"å‡¹å‡¸","note":"","ucode":"D6F0EBDC8F2588","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412032,"discussion_content":"åªä¼šé‡Šæ”¾é”å¹¶ä¸ä¼šè°ƒç”¨notify","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636050161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2308075,"avatar":"","nickname":"Geek_89e362","note":"","ucode":"E596C2CFE1CFAF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326482,"discussion_content":"ä½¿ç”¨notify()æ–¹æ³•å®¹æ˜“äº§ç”Ÿçº¿ç¨‹â€œé¥¥é¥¿â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605605813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1290428,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2uagtiaicloiaKweyY6Sic8b9sJ2ibNaichSyibLCvRqkmnjACjyNCjellmSx6lbb0OBDCeAH8WNoyMomg/132","nickname":"æœ‰æƒ…æœ‰ä¹‰","note":"","ucode":"B200B466A90B07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":229681,"discussion_content":"å¯¹è¿™ä¸ªé—®é¢˜ å¥½å‡ ä¸ªåŒå­¦éƒ½æå‡ºæ¥äº† ä½†æ˜¯è€å¸ˆçš„å¥½å‡ æ¬¡å›ç­”æ„Ÿè§‰è¿˜æ˜¯å¤ªæŠ½è±¡  æ ¹æœ¬æ²¡æœ‰è§£ç­”å¤§å®¶çš„ç–‘æƒ‘å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586682358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250262,"avatar":"https://static001.geekbang.org/account/avatar/00/13/13/d6/0cf21fe8.jpg","nickname":"Skylar","note":"","ucode":"9E8D1697BEE884","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6401,"discussion_content":"åŒæ ·ç–‘æƒ‘ï¼Œæ„Ÿè§‰è¿™ä¸ªä¾‹å­æ€ä¹ˆçœ‹waitå’Œnotifyè°ƒç”¨çš„æ¬¡æ•°éƒ½ä¼šä¸€æ ·é˜¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566885574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76154,"user_name":"é™ˆå","can_delete":false,"product_type":"c1","uid":1082730,"ip_address":"","ucode":"3AF9E8EB39E507","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtS26SJpSF7JLu9pusGsy1Qln0NdQg1eV2YKOJxpX2QXaBuuyXMqZY3fm0rhzKwsqN5aa6CVNOQQ/132","comment_is_top":false,"comment_ctime":1552537916,"is_pvip":false,"replies":[{"id":"27804","content":"åˆ†å¸ƒå¼æƒ…å†µä¸‹ï¼Œè¦ç”¨åˆ†å¸ƒå¼é”ã€‚å¯ä»¥ç”¨zk,redis,dbæ¥å®ç°<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552567367,"ip_address":"","comment_id":76154,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18732407100","product_id":100023901,"comment_content":"è€å¸ˆæ‰©å¼ ä¸€ä¸‹ï¼Œå¦‚æœç¨‹åº éƒ¨ç½²äº†å¥½å‡ ä»½ã€‚ ä¿è¯ä¸äº† Allocator çš„å•ä¾‹æ€§ã€‚<br>è½¬è´¦è¿™ä¸ªæ“ä½œè¯¥æ€ä¹ˆå¤šçº¿ç¨‹å‘¢ï¼Ÿ åªèƒ½ä¾é æ•°æ®åº“äº†å—ï¼Ÿï¼Œ","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443200,"discussion_content":"åˆ†å¸ƒå¼æƒ…å†µä¸‹ï¼Œè¦ç”¨åˆ†å¸ƒå¼é”ã€‚å¯ä»¥ç”¨zk,redis,dbæ¥å®ç°\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552567367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74983,"user_name":"å¼ å­¦ç£Š","can_delete":false,"product_type":"c1","uid":1250029,"ip_address":"","ucode":"F545F384A6F1E1","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eotSSnZic41tGkbflx0ogIg3ia6g2muFY1hCgosL2t3icZm7I8Ax1hcv1jNgr6vrZ53dpBuGhaoc6DKg/132","comment_is_top":false,"comment_ctime":1552347666,"is_pvip":false,"replies":[{"id":"27463","content":"å°±å–œæ¬¢ä½ è¿™æ ·çš„è¯»è€…äº†<br>ğŸ˜ƒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552393064,"ip_address":"","comment_id":74983,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18732216850","product_id":100023901,"comment_content":"éå¸¸æ£’çš„è¯¾ç¨‹ï¼Œé€šä¿—æ˜“æ‡‚ï¼","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442766,"discussion_content":"å°±å–œæ¬¢ä½ è¿™æ ·çš„è¯»è€…äº†\nğŸ˜ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552393064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74954,"user_name":"Pwhxbdk","can_delete":false,"product_type":"c1","uid":1333742,"ip_address":"","ucode":"64634AAF8F2CFD","user_header":"https://static001.geekbang.org/account/avatar/00/14/59/ee/92b7c27c.jpg","comment_is_top":false,"comment_ctime":1552321127,"is_pvip":false,"replies":[{"id":"27347","content":"çœ‹åœºæ™¯ï¼Œå¹¶å‘é‡å¤§çš„æ—¶å€™é•¿æ—¶é—´æ‹¿ä¸åˆ°é”ä¼šæµªè´¹cpuï¼Œå¹¶å‘é‡å°çš„æ—¶å€™æ•ˆç‡é«˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552350458,"ip_address":"","comment_id":74954,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18732190311","product_id":100023901,"comment_content":"è€å¸ˆ é‚£è‡ªæ—‹é”æ˜¯ä¸æ˜¯æ•ˆç‡æ›´é«˜ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442756,"discussion_content":"çœ‹åœºæ™¯ï¼Œå¹¶å‘é‡å¤§çš„æ—¶å€™é•¿æ—¶é—´æ‹¿ä¸åˆ°é”ä¼šæµªè´¹cpuï¼Œå¹¶å‘é‡å°çš„æ—¶å€™æ•ˆç‡é«˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552350458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250593,"user_name":"Chen Eric","can_delete":false,"product_type":"c1","uid":1667150,"ip_address":"","ucode":"1DDF695B96D51F","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/4e/683acfbc.jpg","comment_is_top":false,"comment_ctime":1601165804,"is_pvip":false,"replies":[{"id":"92928","content":"ç›¸å½“æ°å½“ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1603193865,"ip_address":"","comment_id":250593,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14486067692","product_id":100023901,"comment_content":"å¯¹äºè€å¸ˆè¯´çš„Aï¼ŒBï¼ŒC, Dçš„ä¾‹å­ï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼Œä¸çŸ¥é“æ˜¯å¦æ°å½“ï¼š<br>       å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªåŸºäºç”Ÿäº§æ¶ˆè´¹æ¨¡å‹çš„ä¾‹å­ï¼Œç”Ÿäº§è€…éœ€è¦èµ„æºA, Béƒ½åœ¨æ‰èƒ½å®Œæˆäº§å“ABï¼Œæ¶ˆè´¹è€…åˆ™å¿…é¡»åœ¨äº§å“ABç”Ÿæˆæ—¶æ‰èƒ½è¢«æ¶ˆè´¹ã€‚å‡è®¾å¼€å§‹æ—¶äº§å“ABå°šæœªå®Œæˆï¼Œæ­¤æ—¶æ¶ˆè´¹è€…éƒ½è¿›å…¥waité˜Ÿåˆ—ã€‚ç”Ÿäº§è€…å¼€å§‹ç”Ÿäº§ï¼Œå‡è®¾ç”Ÿäº§è€…producer1å·²ç»è·å¾—èµ„æº(ABæˆ–è€…å…¶ä¸­ä¸€ä¸ª)ï¼Œç”Ÿäº§è€…procedure2å°è¯•è·å¾—èµ„æºæ—¶ï¼Œå‘ç°èµ„æºå·²è¢«è·å–ï¼Œå› æ­¤procedure2è¿›å…¥åˆ°waité˜Ÿåˆ—ã€‚producer1ç”Ÿäº§ABå®Œæ¯•ä¹‹åï¼Œä½¿ç”¨notifyæ‰“ç®—å”¤é†’æ¶ˆè´¹è€…çº¿ç¨‹ã€‚ä½†æ˜¯notifyæ˜¯éšæœºå”¤é†’ï¼Œå› æ­¤æ­¤æ—¶å¯èƒ½å°†producer2å”¤é†’ã€‚producer2å”¤é†’ä¹‹åï¼Œå‘ç°äº§å“ABè¿˜æ²¡è¢«æ¶ˆè´¹ï¼Œå› æ­¤æ­¤æ—¶producer2è¿›å…¥waité˜Ÿåˆ—ï¼Œè¿™æ—¶å€™procedure2å’Œæ¶ˆè´¹çº¿ç¨‹å°†æ— æ³•è¢«å”¤é†’ã€‚<br>       å½“æˆ‘ä»¬ä½¿ç”¨notifyAll()æ—¶ï¼Œå®ƒå°†å”¤é†’æ‰€æœ‰çš„waité˜Ÿåˆ—çº¿ç¨‹äº‰å¤ºé”ï¼Œå‡å¦‚çº¿ç¨‹ä¸æ»¡è¶³æ¡ä»¶å†æ¬¡è¿›å…¥waitæ—¶ï¼Œå…¶ä»–å”¤é†’çš„waité˜Ÿåˆ—çš„çº¿ç¨‹ä»æ—§ä¼šå»äº‰å¤ºé”ã€‚","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506238,"discussion_content":"ç›¸å½“æ°å½“ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603193865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82552,"user_name":"åˆ˜é¹","can_delete":false,"product_type":"c1","uid":1230417,"ip_address":"","ucode":"44F3D4DB3F5678","user_header":"https://static001.geekbang.org/account/avatar/00/12/c6/51/e39b5828.jpg","comment_is_top":false,"comment_ctime":1554251259,"is_pvip":false,"replies":[{"id":"29894","content":"1.æ²¡æœ‰å…¬å¹³æ€§ä¿è¯<br>2.åœ¨å“ªé‡Œè·Œå€’åªèƒ½åœ¨å“ªé‡Œçˆ¬èµ·æ¥ï¼Œå•çº¿ç¨‹waitçš„ä¸‹ä¸€æ¡è¯­å¥æ˜¯ä»€ä¹ˆå°±æ‰§è¡Œä»€ä¹ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554293054,"ip_address":"","comment_id":82552,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14439153147","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰å‡ ä¸ªé—®é¢˜ã€‚<br>1,è°ƒç”¨waitçš„çº¿ç¨‹ï¼Œé‡Šæ”¾å¯¹è±¡é”è¿›å…¥å³ä¾§é˜Ÿåˆ—ï¼Œå½“è°ƒç”¨notifyå”¤é†’çš„æ—¶å€™å’Œå·¦ä¾§é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ç«äº‰é”æ˜¯å…¬å¹³çš„å—ï¼Ÿ<br>2ï¼Œwaitçš„çº¿ç¨‹å”¤é†’åæ˜¯ä»waitçš„å‘¢è¡Œä»£ç æ‰§è¡Œå—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445633,"discussion_content":"1.æ²¡æœ‰å…¬å¹³æ€§ä¿è¯\n2.åœ¨å“ªé‡Œè·Œå€’åªèƒ½åœ¨å“ªé‡Œçˆ¬èµ·æ¥ï¼Œå•çº¿ç¨‹waitçš„ä¸‹ä¸€æ¡è¯­å¥æ˜¯ä»€ä¹ˆå°±æ‰§è¡Œä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554293054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379582,"discussion_content":"wait(ï¼‰æ”¾åœ¨syschronizedé‡Œé¢ï¼Œsyschronizedæ˜¯éå…¬å¹³é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623995940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75895,"user_name":"aksonic","can_delete":false,"product_type":"c1","uid":1003633,"ip_address":"","ucode":"B6F3348F6714DB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/71/e8229703.jpg","comment_is_top":false,"comment_ctime":1552488960,"is_pvip":false,"replies":[{"id":"27690","content":"ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå·¦è¾¹ä¸€ä¸ªï¼Œå³è¾¹ä¸€ä¸ªã€‚500çº¿ç¨‹ä¹Ÿæ˜¯è¿™ä¸¤ä¸ªã€‚åé¢è®²ç®¡ç¨‹è¿˜ä¼šç³»ç»Ÿçš„è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552524737,"ip_address":"","comment_id":75895,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14437390848","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå¯¹äºéƒ‘æ™¨Ccçš„é—®é¢˜ï¼Œæˆ‘å’Œä»–æƒ³æ³•ä¸€æ ·ï¼Œæˆ‘ä¹Ÿè§‰å¾—ä¸å¤ªå¯¹ã€‚<br>æ ¹æ®è€å¸ˆçš„å›ç­”æ˜¯thisè¿™ä¸€æŠŠé”: synchronized void apply(){}<br>æ‰€ä»¥æ˜¯ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œå°±æ˜¯500ä¸ªçº¿ç¨‹ï¼Œä¹Ÿæ˜¯åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œå› ä¸ºé”çš„éƒ½æ˜¯thisï¼Œè¿™ä¸ªæˆ‘å¯ä»¥ç†è§£ï¼Œä½†æ˜¯å¦‚æœéƒ½æ˜¯ä¸€æŠŠé”ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰æ–‡ç« ä¸­çš„çº¿ç¨‹ 1 ç”³è¯·åˆ°äº† ABï¼Œçº¿ç¨‹ 2 ç”³è¯·åˆ°äº† CDï¼Ÿçº¿ç¨‹2ä¸æ˜¯åº”è¯¥ä¼šè¢«çº¿ç¨‹1é˜»å¡å—ï¼Ÿçº¿ç¨‹2ç›´æ¥è¿›å…¥thisé”çš„ç­‰å¾…é˜Ÿåˆ—æ‰å¯¹ã€‚ã€‚ã€‚æœ›è€å¸ˆå¯ä»¥è¯¦ç»†åˆ†æä¸‹ï¼Œè¿™é‡Œæ²¡æœ‰çœ‹æ‡‚ã€‚<br>","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443080,"discussion_content":"ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå·¦è¾¹ä¸€ä¸ªï¼Œå³è¾¹ä¸€ä¸ªã€‚500çº¿ç¨‹ä¹Ÿæ˜¯è¿™ä¸¤ä¸ªã€‚åé¢è®²ç®¡ç¨‹è¿˜ä¼šç³»ç»Ÿçš„è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552524737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75578,"user_name":"JStFs","can_delete":false,"product_type":"c1","uid":1241121,"ip_address":"","ucode":"636E85653555DD","user_header":"https://static001.geekbang.org/account/avatar/00/12/f0/21/7168f973.jpg","comment_is_top":false,"comment_ctime":1552437374,"is_pvip":false,"replies":[{"id":"27627","content":"ä½ æŠŠè½¬è´¦çš„æ‰§è¡Œæ—¶é—´æƒ³çš„é•¿ä¸€ç‚¹ï¼Œæ¯”å¦‚ä¸€å¹´ï¼Œå†æƒ³æƒ³<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552476620,"ip_address":"","comment_id":75578,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14437339262","product_id":100023901,"comment_content":"ç‹è€å¸ˆï¼š<br><br>æˆ‘è®°å¾—è´¦æœ¬Allocatoræ˜¯å•ä¾‹å§ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œapplyï¼ˆï¼‰æ–¹æ³•ä¸å­˜åœ¨çº¿ç¨‹1æŠ¢åˆ°Aå’ŒBï¼Œçº¿ç¨‹2åŒæ—¶åˆæŠ¢åˆ°äº†Cå’ŒDå§ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442951,"discussion_content":"ä½ æŠŠè½¬è´¦çš„æ‰§è¡Œæ—¶é—´æƒ³çš„é•¿ä¸€ç‚¹ï¼Œæ¯”å¦‚ä¸€å¹´ï¼Œå†æƒ³æƒ³\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552476620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75519,"user_name":"Smile","can_delete":false,"product_type":"c1","uid":1125189,"ip_address":"","ucode":"0617032294DC43","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/45/e8f64725.jpg","comment_is_top":false,"comment_ctime":1552407052,"is_pvip":false,"replies":[{"id":"27645","content":"å¹¶å‘è‰ºæœ¯ä¾§é‡è®²å®ç°ï¼Œæ­£å¥½äº’è¡¥ã€‚æ„Ÿè°¢ç››èµå•ŠğŸ˜„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552480278,"ip_address":"","comment_id":75519,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14437308940","product_id":100023901,"comment_content":"çœ‹åˆ°è¯„è®ºé‡Œé¢è¯´whileçš„åœ°æ–¹ï¼Œå½“åŒ…å«å…¶ä¸­ä¸€ä¸ªçš„è¯å°±è¡¨æ˜å·²ç»è¢«åˆ†é…è¿‡,å½“å‰çº¿ç¨‹æ— æ³•è·å–ä¸¤ä¸ªèµ„æºï¼Œå°±éœ€è¦ç­‰å¾…å…¶ä»–çº¿ç¨‹é‡Šæ”¾æ‰èµ„æºï¼Œè‡ªå·±æ‰å¯ä»¥è·å–åˆ°ã€‚æœ›è€å¸ˆæŒ‡æ­£ï¼Œç¬¬ä¸€æ¬¡è·Ÿç€çœ‹ä¸‹æ¥ï¼Œç»“åˆå¹¶å‘è‰ºæœ¯ä¸€èµ·çœ‹ï¼Œè€å¸ˆè®²è¯¾å¾ˆæ–°é¢–ï¼Œèµä¸€ä¸ªğŸ‘","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442925,"discussion_content":"å¹¶å‘è‰ºæœ¯ä¾§é‡è®²å®ç°ï¼Œæ­£å¥½äº’è¡¥ã€‚æ„Ÿè°¢ç››èµå•ŠğŸ˜„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552480278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75504,"user_name":"helloWorld","can_delete":false,"product_type":"c1","uid":1137301,"ip_address":"","ucode":"5436F2A13DECC6","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/95/866bccb7.jpg","comment_is_top":false,"comment_ctime":1552405158,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14437307046","product_id":100023901,"comment_content":"çœ‹åˆ°å¾ˆå¤šåŒå­¦è¯´æŠŠä»£ç è´´å‡ºæ¥ï¼Œä½†æ˜¯ä»£ç è´´åœ¨æ–‡ä¸­å ç¯‡å¹…ï¼Œè€Œä¸”ä¸æ˜¯æ¯ä½åŒå­¦éƒ½éœ€è¦ï¼Œå»ºè®®è€å¸ˆè€ƒè™‘ä¸€ä¸‹æœ‰äº›è€å¸ˆçš„åšæ³•ï¼ŒæŠŠDemoæ”¾åœ¨githubä¸Šï¼Œç„¶ååœ¨æ–‡ä¸­ç»™å‡ºé“¾æ¥ï¼Œä¾›éœ€è¦çš„åŒå­¦å­¦ä¹ ","like_count":3},{"had_liked":false,"id":75476,"user_name":"walkingonair","can_delete":false,"product_type":"c1","uid":1444748,"ip_address":"","ucode":"0C8BEE064ABF8B","user_header":"https://static001.geekbang.org/account/avatar/00/16/0b/8c/db1ee0a2.jpg","comment_is_top":false,"comment_ctime":1552402710,"is_pvip":false,"replies":[{"id":"27602","content":"è¿™ä¸ªä¸“æ è¿˜æ˜¯èšç„¦è®©å¤§å®¶ä¼šå†™å¹¶å‘ç¨‹åºï¼Œæ°´å¹³é«˜çš„å¯ä»¥å»çœ‹å¹¶å‘åŒ…é‡Œé”çš„å®ç°ã€‚åé¢ä»‹ç»ç®¡ç¨‹ä¼šæ›´å…¨é¢ä¸€äº›<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552453879,"ip_address":"","comment_id":75476,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14437304598","product_id":100023901,"comment_content":"è¿™ç¯‡å†™çš„æŒºå¥½ï¼ŒæŠŠç­‰å¾…å’Œé€šçŸ¥æ¯”è¾ƒæŠ½è±¡çš„ä¸œè¥¿é€šè¿‡ç°å®æ¡ˆä¾‹é€šä¿—æ˜“æ‡‚åœ°è®²è§£å‡ºæ¥ã€‚ä¸è¿‡ï¼Œè¦æ˜¯èƒ½è®²è®²é™¤äº†åŒæ­¥å…³é”®å­—ä¹‹å¤–çš„å®ç°å°±å¥½äº†ï¼Œç»™æ€è·¯ä¹Ÿè¡ŒğŸ˜Š","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442908,"discussion_content":"è¿™ä¸ªä¸“æ è¿˜æ˜¯èšç„¦è®©å¤§å®¶ä¼šå†™å¹¶å‘ç¨‹åºï¼Œæ°´å¹³é«˜çš„å¯ä»¥å»çœ‹å¹¶å‘åŒ…é‡Œé”çš„å®ç°ã€‚åé¢ä»‹ç»ç®¡ç¨‹ä¼šæ›´å…¨é¢ä¸€äº›\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552453879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115540,"user_name":"æ‹¯æ•‘åœ°çƒå¥½ç´¯","can_delete":false,"product_type":"c1","uid":1339022,"ip_address":"","ucode":"7643439601EF4C","user_header":"https://static001.geekbang.org/account/avatar/00/14/6e/8e/5d309a85.jpg","comment_is_top":false,"comment_ctime":1563614835,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10153549427","product_id":100023901,"comment_content":"---æ€»ç»“---<br>1. æ¯ä¸ªäº’æ–¥é”éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ç­‰å¾…é˜Ÿåˆ—ã€‚<br>2. waitå’Œnotifyå¿…ç„¶å‡ºç°åœ¨sychronizedå—ä¸­ï¼Œå…¶æ“ä½œçš„ç­‰å¾…é˜Ÿåˆ—ä¹Ÿæ˜¯ä¸äº’æ–¥é”æ‰€å¯¹åº”çš„ç­‰å¾…é˜Ÿåˆ—ã€‚<br>3. notifyåªèƒ½ä¿è¯åœ¨é€šçŸ¥æ—¶é—´ç‚¹æ¡ä»¶æ˜¯æ»¡è¶³çš„ï¼Œå³æˆ‘ä»¬éœ€è¦æœ‰waitçš„best practice:while(!condition){wait();}<br>4. å¯¹äºç­‰å¾…-é€šçŸ¥æœºåˆ¶çš„å‡ ä¸ªè¦ç´ ï¼šäº’æ–¥é”ï¼›ä½•æ—¶ç­‰å¾…ï¼›ä½•æ—¶é€šçŸ¥","like_count":2},{"had_liked":false,"id":88521,"user_name":"the geek","can_delete":false,"product_type":"c1","uid":1506723,"ip_address":"","ucode":"71DECBC814A539","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLz3icr3mGs5ib8FbSPQZ2ic3ib90mHkd1btQrmGacZjJxfYXrerIdaTxglKyCicFzLcEAb6deC2cWjE5Q/132","comment_is_top":false,"comment_ctime":1555935027,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10145869619","product_id":100023901,"comment_content":"æˆ‘ä»”ç»†æ€è€ƒäº†ä¸€ä¸‹è€å¸ˆä¸¾å¾—çº¿ç¨‹1\\2\\3\\4äº‰å¤ºA\\B\\C\\Dçš„ä¾‹å­ï¼Œå¦‚æœä½¿ç”¨notifyçš„è¯ï¼Œæ˜¯ä¸ä¼šå‡ºç°çº¿ç¨‹3æ°¸è¿œæ— æ³•å”¤é†’çš„æƒ…å†µçš„ï¼Œå› ä¸ºè¿™é‡Œå…¶å®æ˜¯ä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œnotifyä¸ä¼šä¸¢å¤±çš„ã€‚æˆ‘ä¸¾ä¸ªä¾‹å­<br>1. çº¿ç¨‹1å’Œ2è·å¾—AB\\CDèµ„æºè¿è¡Œï¼Œçº¿ç¨‹3å’Œ4wait<br>2.çº¿ç¨‹1notifyçº¿ç¨‹4ï¼Œç»“æœæ˜¯çº¿ç¨‹2è¿è¡Œï¼Œçº¿ç¨‹3å’Œ4wait<br>3.çº¿ç¨‹2è¿è¡Œå®Œnotifyçº¿ç¨‹3ï¼Œçº¿ç¨‹3è¿è¡Œï¼Œçº¿ç¨‹4wait<br>4.çº¿ç¨‹3è¿è¡Œå®Œnotifyçº¿ç¨‹4ï¼Œçº¿ç¨‹4è¿è¡Œã€‚å…¨éƒ¨è¿è¡Œå®Œæˆ<br>","like_count":2},{"had_liked":false,"id":87761,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1555685040,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10145619632","product_id":100023901,"comment_content":"å“ˆå“ˆå“ˆï¼Œçœ‹äº† @wang çš„è¯„è®ºä»£ç ï¼Œå¥½ç†Ÿæ‚‰çš„æ„Ÿè§‰ã€‚å»å¹´çš„æŸä¸ªé¡¹ç›®ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ countdownlatch æ¥åè°ƒçº¿ç¨‹ä¹‹é—´çš„äº¤äº’ã€‚å½“æ—¶çš„éœ€æ±‚ï¼šå¿…é¡»ç­‰å¾…è¿™ä¸€æ‰¹æ¬¡çš„æ‰€æœ‰çº¿ç¨‹å®Œæˆåï¼Œæ‰èƒ½å¯åŠ¨ä¸‹ä¸€æ‰¹æ¬¡çš„çº¿ç¨‹ã€‚<br>ä¸è¿‡ï¼Œè¿™æ®µä»£ç ï¼Œapply æˆåŠŸåï¼Œè¿˜æ˜¯éœ€è¦ç»™ src å’Œ target ä¸Šé”ï¼ŒåŒæ—¶ Account ç±»çš„ 3 ä¸ªæ–¹æ³•ï¼Œget&#47;set&#47;transaction éƒ½è¦ç”¨ synchronized ä¿®é¥°ï¼Œå¦åˆ™è¿˜æ˜¯å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚<br><br>----------<br><br>@éƒ‘æ™¨Ccç«¥é‹åº”è¯¥æ˜¯å°† Allocator çš„é”ï¼Œå’Œå¯¹è±¡èµ„æºçš„é”æ··æ·†äº†ã€‚è€å¸ˆåœ¨æ–‡ç« æåˆ°äº†ç­‰å¾…-é€šçŸ¥è¦è€ƒè™‘çš„ 4 ä¸ªè¦ç´ ï¼š<br>1. é”è°ï¼ŒAllocator<br>2. è¦ä»€ä¹ˆèµ„æºï¼ŒABCD<br>3. ä»€ä¹ˆæ—¶å€™ç­‰å¾…<br>4. ä»€ä¹ˆæ—¶å€™å”¤é†’<br><br>æ˜¯ç”±èµ„æºåˆ†é…è€… Allocator æ¥ç»Ÿä¸€åˆ†é…èµ„æº A&#47;B&#47;C&#47;Dï¼Œèƒ½ä¸èƒ½ç”³è¯·èµ„æºæˆåŠŸï¼Œé”çš„æ˜¯ Allocatorï¼Œapply æˆåŠŸè¿”å›ï¼Œè¯´æ˜ A&#47;B&#47;C&#47;D èµ„æºéƒ½è¢«å½“å‰çº¿ç¨‹æ‹¿åˆ°äº†ï¼Œåé¢å°±å¯ä»¥æ‹¿ç€è¿™äº›èµ„æºå»è¿›è¡Œä¸šåŠ¡å¤„ç†äº†ã€‚ä¸è¿‡è¿˜æ˜¯è¦è€ƒè™‘èµ„æºå¯¹è±¡ A&#47;B&#47;C&#47;D å…±äº«å˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚<br><br>å¦‚æœ‰ç†è§£æœ‰è¯¯ï¼Œè¿˜æœ›è€å¸ˆæŒ‡æ­£ï¼Œè°¢è°¢ï¼","like_count":2},{"had_liked":false,"id":82031,"user_name":"äº‘é‡Œé›¾èŠ±","can_delete":false,"product_type":"c1","uid":1232383,"ip_address":"","ucode":"98D8E75D1B2B39","user_header":"https://static001.geekbang.org/account/avatar/00/12/cd/ff/b7690816.jpg","comment_is_top":false,"comment_ctime":1554106646,"is_pvip":false,"replies":[{"id":"29707","content":"waitå’Œnotifyæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¦‚æœæµªè´¹äº†ä¸€ä¸ªnotifyï¼Œå°±å¿…ç„¶æœ‰ä¸€ä¸ªwaitæ°¸è¿œæ²¡æœºä¼šè¢«å”¤é†’<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554129149,"ip_address":"","comment_id":82031,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10144041238","product_id":100023901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æƒ³é—®çš„æ˜¯ï¼Œåœ¨å°½é‡ä½¿ç”¨notifyAll()è¿™é‡Œï¼Œä¾‹å­é‡Œé¢çº¿ç¨‹3ï¼Œå¯¹â€œå†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’â€çš„åŸå› æ˜¯å› ä¸ºçº¿ç¨‹å¤ªå¤šå¯¼è‡´ä¸€ç›´éšæœºä¸åˆ°è¯¥çº¿ç¨‹ï¼Œè¿˜æ˜¯å…¶ä»–åŸå› ï¼Œæˆ‘æ²¡æœ‰ææ‡‚ï¼Œè¯·è€å¸ˆæç‚¹ã€‚","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445436,"discussion_content":"waitå’Œnotifyæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¦‚æœæµªè´¹äº†ä¸€ä¸ªnotifyï¼Œå°±å¿…ç„¶æœ‰ä¸€ä¸ªwaitæ°¸è¿œæ²¡æœºä¼šè¢«å”¤é†’\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554129149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78657,"user_name":"WP","can_delete":false,"product_type":"c1","uid":1105956,"ip_address":"","ucode":"4A24C6CAA70220","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/24/4529f2a4.jpg","comment_is_top":false,"comment_ctime":1553212433,"is_pvip":false,"replies":[{"id":"28679","content":"synchronizedå£°æ˜çš„é”å¯¹è±¡ä¸å…¶å†…éƒ¨è°ƒç”¨waitå’Œnotifyå¯¹è±¡å¿…é¡»ä¸€ä¸ªå¯¹è±¡","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553268312,"ip_address":"","comment_id":78657,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10143147025","product_id":100023901,"comment_content":"æ­¤å¤„çš„é”å¯¹è±¡æ˜¯thisï¼Œæˆ‘ä»¬åˆ©ç”¨æ¡ä»¶æ§åˆ¶å‡å®šAå’ŒBåŒæ—¶æ»¡è¶³ä¸å¦å¼•å…¥waitå’Œnotify æœºåˆ¶å®ç°ç­‰å¾…é€šçŸ¥æœºåˆ¶ä»¥æ›¿ä»£å¾ªç¯ç­‰å¾…æœºåˆ¶ï¼Œæ‰€ä»¥é˜Ÿåˆ—è·Ÿé”æœ‰å…³ï¼Œä¸€ä¸ªé”ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸è®ºå¤šå°‘çº¿ç¨‹ï¼Œåªè¦synchronizedå¤„é”éšå¼è¿˜æ˜¯æ˜¾ç¤ºå£°æ˜çš„é”æ˜¯è¿™äº›çº¿ç¨‹éœ€è¦äº‰æŠ¢çš„ï¼Œé‚£ä¹ˆå°±åœ¨åŒä¸€ä¸ªçº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Ÿè¿˜æ˜¯è¯´ä¸waitå’Œnotifyçš„å¯¹è±¡æœ‰å…³ï¼Ÿæ¯”å¦‚this.notify this.waitè¯´æ˜å…¶ç­‰å¾…é˜Ÿåˆ—ä¸thisæœ‰å…³ï¼Œå¦å¤–åœ¨synchronizedå£°æ˜çš„é”å¯¹è±¡ä¸å…¶å†…éƒ¨è°ƒç”¨waitå’Œnotifyå¯¹è±¡æ˜¯å¦å¿…é¡»ä¸€ä¸ªå¯¹è±¡å‘¢","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444182,"discussion_content":"synchronizedå£°æ˜çš„é”å¯¹è±¡ä¸å…¶å†…éƒ¨è°ƒç”¨waitå’Œnotifyå¯¹è±¡å¿…é¡»ä¸€ä¸ªå¯¹è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553268312,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78252,"user_name":"shangyu","can_delete":false,"product_type":"c1","uid":1011389,"ip_address":"","ucode":"13A26E53508D75","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/bd/b83ad32d.jpg","comment_is_top":false,"comment_ctime":1553104967,"is_pvip":true,"replies":[{"id":"28686","content":"ä¿è¯äº’æ–¥æ€§ï¼Œä¸å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ç®¡ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553268939,"ip_address":"","comment_id":78252,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10143039559","product_id":100023901,"comment_content":"è¯·é—®è€å¸ˆ ä¸ºä»€ä¹ˆwaitå’Œnotifyå¿…é¡»è¦åœ¨è·å¾—é”çš„æƒ…å†µä¸‹æ‰èƒ½è°ƒç”¨å‘¢","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444020,"discussion_content":"ä¿è¯äº’æ–¥æ€§ï¼Œä¸å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ç®¡ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553268939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76354,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1552576066,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10142510658","product_id":100023901,"comment_content":"çœ‹å®Œè€å¸ˆçš„æ–‡ç« å†çœ‹è¯„è®ºï¼Œæ„Ÿè§‰å­¦ä¹ åˆ°äº†æ›´å¤šä¸œè¥¿ï¼","like_count":2},{"had_liked":false,"id":75648,"user_name":"æœ¨åˆ»","can_delete":false,"product_type":"c1","uid":1157430,"ip_address":"","ucode":"0A3226FEE3983B","user_header":"https://static001.geekbang.org/account/avatar/00/11/a9/36/972f7abf.jpg","comment_is_top":false,"comment_ctime":1552443905,"is_pvip":false,"replies":[{"id":"27626","content":"å¦‚æœè¿˜ç”¨è¿™ä¹ˆç®€å•çš„ä¾‹å­ï¼Œå¤šlowå•Š<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552476355,"ip_address":"","comment_id":75648,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10142378497","product_id":100023901,"comment_content":"æˆ‘çŒœè€å¸ˆè®²Lockçš„æ—¶å€™ä¼šæŠŠä¾‹å­ä¸­çš„waitå’Œnotifyæ¢æˆConditionçš„awaitå’ŒsignalğŸ˜Š","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442974,"discussion_content":"å¦‚æœè¿˜ç”¨è¿™ä¹ˆç®€å•çš„ä¾‹å­ï¼Œå¤šlowå•Š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552476355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1602505,"avatar":"https://static001.geekbang.org/account/avatar/00/18/73/c9/721c0827.jpg","nickname":"mlx","note":"","ucode":"DFE9604B6639E8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203710,"discussion_content":"ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584069488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75451,"user_name":"è‹ç±","can_delete":false,"product_type":"c1","uid":1396252,"ip_address":"","ucode":"4FA289E084B789","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erYNBIwAj3KdIXaXbeMBUjTMz31zAToHIJSdo7oQk8bfsibwViaLobVQ8miatwBlC5spLS9kVCzHMjUA/132","comment_is_top":false,"comment_ctime":1552399681,"is_pvip":false,"replies":[{"id":"27598","content":"ä¸å¯ä»¥ï¼Œæœ‰å¯èƒ½è¿™ä¸ªçº¿ç¨‹ç‚¹èƒŒï¼Œä¸€ç›´ä¸€ç›´éƒ½æ»¡è¶³ä¸äº†æ¡ä»¶","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552453136,"ip_address":"","comment_id":75451,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142334273","product_id":100023901,"comment_content":"ä½ å¥½è€å¸ˆï¼Œä¸ºä»€ä¹ˆç”¨Whileå‘¢ï¼Œifä¸å°±å¯ä»¥å— ","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442899,"discussion_content":"ä¸å¯ä»¥ï¼Œæœ‰å¯èƒ½è¿™ä¸ªçº¿ç¨‹ç‚¹èƒŒï¼Œä¸€ç›´ä¸€ç›´éƒ½æ»¡è¶³ä¸äº†æ¡ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552453136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75418,"user_name":"è€ç‹","can_delete":false,"product_type":"c1","uid":1236457,"ip_address":"","ucode":"79B81C8F6179CB","user_header":"https://static001.geekbang.org/account/avatar/00/12/dd/e9/c939283c.jpg","comment_is_top":false,"comment_ctime":1552394804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10142329396","product_id":100023901,"comment_content":"ä¸€å¼€å§‹ä¹Ÿæ˜¯è§‰å¾—whileæ¡ä»¶å†™åäº†ï¼Œåæ¥ç†è§£äº†ã€‚Allocator æ˜¯ç®¡ç†å‘˜åˆ†é…è€…ï¼Œè€Œä¸æ˜¯ç”³è¯·è€…","like_count":2},{"had_liked":false,"id":75157,"user_name":"é¾™çŒ«","can_delete":false,"product_type":"c1","uid":1112490,"ip_address":"","ucode":"FD726CC969EF9C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/aa/3e80212e.jpg","comment_is_top":false,"comment_ctime":1552359289,"is_pvip":false,"replies":[{"id":"27396","content":"ç®€å•è®²å°±æ˜¯ï¼Œä¸ºæ¯ä¸€ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ï¼Œç½‘ç»œå¤„ç†æ”¯æŒbioå’Œnioï¼Œservletæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ï¼Œå»ºè®®æ‰¾æœ¬ä¹¦ä¸“é—¨çœ‹çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552363633,"ip_address":"","comment_id":75157,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10142293881","product_id":100023901,"comment_content":"tomcatå¤„ç†è¯·æ±‚æ˜¯å¦‚ä½•å¤„ç†å¹¶å‘é—®é¢˜çš„","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442808,"discussion_content":"ç®€å•è®²å°±æ˜¯ï¼Œä¸ºæ¯ä¸€ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ï¼Œç½‘ç»œå¤„ç†æ”¯æŒbioå’Œnioï¼Œservletæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ï¼Œå»ºè®®æ‰¾æœ¬ä¹¦ä¸“é—¨çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552363633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1228393,"avatar":"https://static001.geekbang.org/account/avatar/00/12/be/69/5404e5a3.jpg","nickname":"momo","note":"","ucode":"3B2CB1EC9BC601","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359999,"discussion_content":"ThreadL:cal å…³è”httpé“¾æ¥å—ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616337816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75023,"user_name":"ç‹æ™º","can_delete":false,"product_type":"c1","uid":1079657,"ip_address":"","ucode":"0335277F255F7A","user_header":"https://static001.geekbang.org/account/avatar/00/10/79/69/5960a2af.jpg","comment_is_top":false,"comment_ctime":1552351343,"is_pvip":false,"replies":[{"id":"27474","content":"è¿™ä¸ªä¸€å®šæ˜¯åˆ«äººå®¶çš„å¤§å­¦<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552396331,"ip_address":"","comment_id":75023,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10142285935","product_id":100023901,"comment_content":"waitä¼šä¸»åŠ¨é‡Šæ”¾é”,sleepä¸ä¼š;<br><br>wait()ä¸­æŒ‡å®šæ¯«ç§’å€¼,æ—¶é—´åˆ°äº†éœ€è¦ä½¿ç”¨notify()&#47;notifyAll()å”¤é†’; sleep()ä¸­æŒ‡å®šæ¯«ç§’å€¼æ˜¯ç¡çœ ä¸€å®šæ—¶é—´è‡ªåŠ¨å”¤é†’.<br><br>å¤§å­¦æ“ä½œç³»ç»Ÿå­¦çš„,ä¸çŸ¥é“è®°å¾—å¯¹ä¸å¯¹!!!<br>","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442780,"discussion_content":"è¿™ä¸ªä¸€å®šæ˜¯åˆ«äººå®¶çš„å¤§å­¦\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552396331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188176,"avatar":"https://static001.geekbang.org/account/avatar/00/12/21/50/265671fd.jpg","nickname":"LGY001","note":"","ucode":"29CA0F9501D3EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":31276,"discussion_content":"æ“ä½œç³»ç»Ÿè€å¸ˆè¯´è¿™ä¸ªé”…æˆ‘ä¸èƒŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570892825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217992,"user_name":"witluo","can_delete":false,"product_type":"c1","uid":1443117,"ip_address":"","ucode":"3D9608C3DDDD95","user_header":"","comment_is_top":false,"comment_ctime":1589688443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5884655739","product_id":100023901,"comment_content":"è®²çš„é€šä¿—æ˜“æ‡‚ï¼Œç²¾å½©","like_count":1},{"had_liked":false,"id":205604,"user_name":"æœ‰æƒ…æœ‰ä¹‰","can_delete":false,"product_type":"c1","uid":1290428,"ip_address":"","ucode":"B200B466A90B07","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2uagtiaicloiaKweyY6Sic8b9sJ2ibNaichSyibLCvRqkmnjACjyNCjellmSx6lbb0OBDCeAH8WNoyMomg/132","comment_is_top":false,"comment_ctime":1586682615,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5881649911","product_id":100023901,"comment_content":"<br><br><br><br><br>è€å¸ˆå¥½ å¯¹äº@è¯·å«æˆ‘ç´«çš®ä¹¦çš„é—®é¢˜<br> â€œå‡è®¾æˆ‘ä»¬æœ‰èµ„æº Aã€Bã€Cã€Dï¼Œçº¿ç¨‹ 1 ç”³è¯·åˆ°äº† ABï¼Œçº¿ç¨‹ 2 ç”³è¯·åˆ°äº† CDï¼Œæ­¤æ—¶çº¿ç¨‹ 3 ç”³è¯· ABï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆAB åˆ†é…ç»™çº¿ç¨‹ 1ï¼Œçº¿ç¨‹ 3 è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³ï¼‰ï¼Œçº¿ç¨‹ 4 ç”³è¯· CD ä¹Ÿä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚æˆ‘ä»¬å†å‡è®¾ä¹‹åçº¿ç¨‹ 1 å½’è¿˜äº†èµ„æº ABï¼Œå¦‚æœä½¿ç”¨ notify() æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹ 4ï¼Œä½†çº¿ç¨‹ 4 ç”³è¯·çš„æ˜¯ CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹ 3 å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ã€‚â€ è€å¸ˆï¼Œè¿™é‡Œçº¿ç¨‹3æ˜¯ä¸æ˜¯åº”è¯¥è¿˜æœ‰æœºä¼šå”¤é†’ï¼Œæ¯”å¦‚çº¿ç¨‹2åœ¨notifyçš„æ—¶å€™å”¤é†’äº†çº¿ç¨‹3ï¼Œæˆ‘ç†è§£è¿™æ ·æ˜¯å¯ä»¥çš„ï¼Œè¯·æŒ‡æ­£<br>ä½œè€…å›å¤: æœ‰æœºä¼šï¼Œé‚£æ ·çº¿ç¨‹4å°±æ²¡æœºä¼šäº†ã€‚ä¸€ä¸ªèåœä¸€ä¸ªå‘ï¼Œæœ‰ä¸ªå‘è¢«æµªè´¹äº†ï¼Œæ€»æœ‰ä¸€ä¸ªèåœæ‰¾ä¸åˆ°å‘ã€‚<br>è€å¸ˆæ‚¨çš„å›ç­” è¿˜æ˜¯æ„Ÿè§‰å¤ªæŠ½è±¡äº†å•Š  æˆ‘è¿˜æ˜¯ä¸å¤ªèƒ½ç†è§£å•Š  å¦‚æœæ˜¯å”¤é†’äº†çº¿ç¨‹3  è¿™æ—¶å€™çº¿ç¨‹1å’Œ2éƒ½æ‰§è¡Œäº†  ç­‰çº¿ç¨‹3æ‰§è¡Œç»“æŸé‡Šæ”¾æ—¶å€™ ä¸ä¹Ÿä¼šè°ƒç”¨notifyå— è¿™æ—¶å€™ åªå‰©ä¸‹çº¿ç¨‹4äº† é‚£å°±ä¸€å®šä¼šå”¤é†’çº¿ç¨‹4äº†å•Š  æ€ä¹ˆæ‚¨å°±è¯´çº¿ç¨‹4å°±æ²¡æœºä¼šäº†å‘¢?????? è¿˜æœ›è€å¸ˆèƒ½å…·ä½“çš„è§£ç­”ä¸‹å•Š","like_count":1,"discussions":[{"author":{"id":1475528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","nickname":"maybe","note":"","ucode":"93D160F617E750","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307049,"discussion_content":"    /**\n     * è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ notify ä¼šå‡ºç°æœ‰çº¿ç¨‹æ°¸è¿œå”¤é†’ä¸äº†çš„æƒ…å†µã€‚\n     * 1. åˆå§‹çŠ¶æ€ï¼š4ä¸ªçº¿ç¨‹å¯ä»¥æŠ¢é” \n     *          é”æ± ï¼šconsumer-1 consumer-2 provider-1 provider-2\n     *          ç­‰å¾…æ± ï¼šempty\n     * \n     * 2. consumer-1 å’Œ consumer-2 å…ˆæŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸ºç©ºï¼Œéƒ½waitäº†ï¼Œè¿›å…¥ç­‰å¾…æ±  \n     *          é”æ± ï¼šprovider-1 provider-2\n     *          ç­‰å¾…æ± ï¼šconsumer-1 consumer-2\n     *          \n     * 3. provider-1 æŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸ºç©ºï¼ŒaddæˆåŠŸï¼Œæ‰§è¡Œnotifyé€šçŸ¥ç­‰å¾…æ± ä¸­ä¸€ä¸ªçº¿ç¨‹è¿›å…¥é”æ± ï¼Œå‡è®¾consumer-1é†’äº†\n     *          é”æ± ï¼šprovider-2 consumer-1\n     *          ç­‰å¾…æ± ï¼šconsumer-2\n     * \n     * 4. provider-2 æŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸æ˜¯ç©ºï¼ˆæ»¡äº†ï¼‰ï¼Œprovider-2éœ€è¦waitï¼Œè¿›å…¥ç­‰å¾…æ±  \n     *          é”æ± ï¼šconsumer-1\n     *          ç­‰å¾…æ± ï¼šconsumer-2 provider-2\n     *       \n     * 5. consumer-1 å¿…ç„¶æŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸æ˜¯ç©ºï¼ŒremoveæˆåŠŸï¼Œæ‰§è¡Œnotifyé€šçŸ¥ç­‰å¾…æ± ä¸­ä¸€ä¸ªçº¿ç¨‹è¿›å…¥é”æ± ï¼Œå‡è®¾consumer-2é†’äº†\n     *          é”æ± ï¼šconsumer-2\n     *          ç­‰å¾…æ± ï¼šprovider-2\n     *          \n     * 6. consumer-2 å¿…ç„¶æŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸ºç©ºï¼Œconsumer-2éœ€è¦wait\n     *          é”æ± ï¼šempty\n     *          ç­‰å¾…æ± ï¼šconsumer-2 provider-2\n     *          \n     * ç„¶åé”æ± ä¸ºemptyäº†ï¼Œæ²¡æœ‰çº¿ç¨‹èƒ½å¤Ÿå¾—åˆ°é”ï¼Œconsumer-2 provider-2 ä¸€ç›´ç¡åˆ°æ­»\n     */","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600481352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1475528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","nickname":"maybe","note":"","ucode":"93D160F617E750","race_medal":4,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307048,"discussion_content":"    /**\n     * è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ notify ä¼šå‡ºç°æœ‰çº¿ç¨‹æ°¸è¿œå”¤é†’ä¸äº†çš„æƒ…å†µã€‚\n     * 1. åˆå§‹çŠ¶æ€ï¼š4ä¸ªçº¿ç¨‹å¯ä»¥æŠ¢é” \n     *          é”æ± ï¼šconsumer-1 consumer-2 provider-1 provider-2\n     *          ç­‰å¾…æ± ï¼šempty\n     * \n     * 2. consumer-1 å’Œ consumer-2 å…ˆæŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸ºç©ºï¼Œéƒ½waitäº†ï¼Œè¿›å…¥ç­‰å¾…æ±  \n     *          é”æ± ï¼šprovider-1 provider-2\n     *          ç­‰å¾…æ± ï¼šconsumer-1 consumer-2\n     *          \n     * 3. provider-1 æŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸ºç©ºï¼ŒaddæˆåŠŸï¼Œæ‰§è¡Œnotifyé€šçŸ¥ç­‰å¾…æ± ä¸­ä¸€ä¸ªçº¿ç¨‹è¿›å…¥é”æ± ï¼Œå‡è®¾consumer-1é†’äº†\n     *          é”æ± ï¼šprovider-2 consumer-1\n     *          ç­‰å¾…æ± ï¼šconsumer-2\n     * \n     * 4. provider-2 æŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸æ˜¯ç©ºï¼ˆæ»¡äº†ï¼‰ï¼Œprovider-2éœ€è¦waitï¼Œè¿›å…¥ç­‰å¾…æ±  \n     *          é”æ± ï¼šconsumer-1\n     *          ç­‰å¾…æ± ï¼šconsumer-2 provider-2\n     *       \n     * 5. consumer-1 å¿…ç„¶æŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸æ˜¯ç©ºï¼ŒremoveæˆåŠŸï¼Œæ‰§è¡Œnotifyé€šçŸ¥ç­‰å¾…æ± ä¸­ä¸€ä¸ªçº¿ç¨‹è¿›å…¥é”æ± ï¼Œå‡è®¾consumer-2é†’äº†\n     *          é”æ± ï¼šconsumer-2\n     *          ç­‰å¾…æ± ï¼šprovider-2\n     *          \n     * 6. consumer-2 å¿…ç„¶æŠ¢åˆ°é”ï¼Œæ­¤æ—¶queueä¸ºç©ºï¼Œconsumer-2éœ€è¦wait\n     *          é”æ± ï¼šempty\n     *          ç­‰å¾…æ± ï¼šconsumer-2 provider-2\n     *          \n     * ç„¶åé”æ± ä¸ºemptyäº†ï¼Œæ²¡æœ‰çº¿ç¨‹èƒ½å¤Ÿå¾—åˆ°é”ï¼Œconsumer-2 provider-2 ä¸€ç›´ç¡åˆ°æ­»\n     */","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600481344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2618910,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/f6YBFBbXurWa9NJr42Z3Hfic223qsEVpAghY0W7DU2cRUicmKvg1QHsjPGRBP90wjV1yAGC8dzerRJcwribB0ibVlQ/132","nickname":"Geek_95323e","note":"","ucode":"92EFD57A73C726","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1475528,"avatar":"https://static001.geekbang.org/account/avatar/00/16/83/c8/5ce842f6.jpg","nickname":"maybe","note":"","ucode":"93D160F617E750","race_medal":4,"user_type":1,"is_pvip":false},"discussion":{"id":373893,"discussion_content":"å¯æ˜¯å¯¹äºæ–‡ä¸­çš„è¿™ç§æƒ…å†µå‘¢?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620908631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":307048,"ip_address":""},"score":373893,"extra":""}]}]},{"had_liked":false,"id":160645,"user_name":"Monday","can_delete":false,"product_type":"c1","uid":1250907,"ip_address":"","ucode":"77B9BACC783598","user_header":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","comment_is_top":false,"comment_ctime":1575992857,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5870960153","product_id":100023901,"comment_content":"å‰å®³äº†ï¼Œä¼˜åŒ–ç‰ˆçš„å¾ªç¯get","like_count":1},{"had_liked":false,"id":139689,"user_name":"skyline","can_delete":false,"product_type":"c1","uid":1002938,"ip_address":"","ucode":"4E73F9049751F6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/ba/83e6dcbf.jpg","comment_is_top":false,"comment_ctime":1570706329,"is_pvip":false,"replies":[{"id":"54021","content":"ä½ åˆè´¡çŒ®äº†ä¸€ç‚¹åŠ›é‡ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570765911,"ip_address":"","comment_id":139689,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5865673625","product_id":100023901,"comment_content":"çœ‹è¯„è®ºæ¯”çœ‹æ­£æ–‡èŠ±æ—¶é—´ç³»åˆ—ğŸ¤”","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470060,"discussion_content":"ä½ åˆè´¡çŒ®äº†ä¸€ç‚¹åŠ›é‡ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570765911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133949,"user_name":"æœˆåŠå…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1440914,"ip_address":"","ucode":"0379FF659C36EA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTICgD2F3MDn1U6UHquN5kqNN05l3emRkZgOqJ6lib7dlg1Loia5mDbV8qbBVYXOo2oZicYuuhdSEC6Tg/132","comment_is_top":false,"comment_ctime":1568704309,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5863671605","product_id":100023901,"comment_content":"1.waitæ˜¯Objectç±»ä¸­çš„æ–¹æ³• sleepæ˜¯Threadç±»ä¸­çš„æ–¹æ³•<br>2.waitä¼šé‡Šæ”¾é” sleepä¸ä¼šé‡Šæ”¾é”<br>3.sleepéœ€è¦æŒ‡å®šæ—¶é—´","like_count":1},{"had_liked":false,"id":131084,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1567641866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5862609162","product_id":100023901,"comment_content":"æœ‰ä¸ªå°ç–‘æƒ‘ï¼Œè°ƒç”¨waitåçº¿ç¨‹Aè¿›å…¥å³ä¾§çš„é˜Ÿåˆ—ï¼Œå½“å…¶ä»–ç°ç¨‹è°ƒç”¨notifyåè¿›è¡Œå”¤é†’ï¼Œè¿™é‡Œçš„å”¤é†’æ˜¯å°†è¿™ä¸ªçº¿ç¨‹Aç§»åŠ¨åˆ°å·¦ä¾§é˜Ÿåˆ—è¿˜æ˜¯è¯´å¹¶ä¸ç§»åŠ¨ï¼Œåªæ˜¯ç»™è¿™ä¸ªçº¿ç¨‹Aä»…ä»…æ‰“ä¸ªæ ‡ç¤ºï¼Œæ ‡ç¤ºå®ƒå¯ä»¥å»ç«äº‰é”èµ„æºäº†ï¼Ÿ","like_count":1},{"had_liked":false,"id":125215,"user_name":"é™æ°´æµæ·±","can_delete":false,"product_type":"c1","uid":1339724,"ip_address":"","ucode":"644F05EFBD2E7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/71/4c/2cefec07.jpg","comment_is_top":false,"comment_ctime":1566121042,"is_pvip":false,"replies":[{"id":"50597","content":"æ„Ÿè°¢æ”¯æŒğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1568085281,"ip_address":"","comment_id":125215,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5861088338","product_id":100023901,"comment_content":"çœ‹è¿‡äº†é‚£ä¹ˆå¤šJavaå¹¶å‘ç¼–ç¨‹çš„æ–‡ç« ï¼Œè€å¸ˆçš„ä¸“æ æ˜¯æœ€è®©æˆ‘æœ‰å…´è¶£å­¦ä¹ çš„ã€‚è°¢è°¢ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463481,"discussion_content":"æ„Ÿè°¢æ”¯æŒğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568085281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113846,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1563172690,"is_pvip":false,"replies":[{"id":"41575","content":"ä¹Ÿå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¸è¿‡è¿™é‡Œçš„èµ„æºä¸é™äºæ˜¯è¿™äº›","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1563234620,"ip_address":"","comment_id":113846,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858139986","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä½ è¯´çš„ABCDæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºé™¤äº†è½¬è´¦è¿˜æœ‰å…¶ä»–æ“ä½œï¼Œå­˜æ¬¾å–æ¬¾ç­‰","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458407,"discussion_content":"ä¹Ÿå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¸è¿‡è¿™é‡Œçš„èµ„æºä¸é™äºæ˜¯è¿™äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563234620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108031,"user_name":"é©¬å“²å¯Œ","can_delete":false,"product_type":"c1","uid":1107917,"ip_address":"","ucode":"D6BDDFE3CC07ED","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/cd/08088f14.jpg","comment_is_top":false,"comment_ctime":1561649775,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5856617071","product_id":100023901,"comment_content":"æˆ‘çœŸçš„æ˜¯ä¸€ç›´çœ‹ä¸æ˜ç™½ä¸ºä»€ä¹ˆwhileçš„æ¡ä»¶æ˜¯ï¼ˆals.contains(from) || als.contains(to))ï¼Œè¿™æ ·å¦‚æœalsé‡ŒåŒæ—¶åŒ…å«fromå’Œtoçš„è¯å²‚ä¸æ˜¯ä¹Ÿè¦ç­‰å¾…ï¼Ÿå“ªä½åŒå­¦èƒ½å›ç­”ä¸€ä¸‹ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1481384,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9a/a8/ed0ea046.jpg","nickname":"èŒèŒå“’çš„é¸¡è›‹é¥¼.","note":"","ucode":"5E0E3F55F326A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6287,"discussion_content":"å› ä¸ºalsé‡Œé¢å­˜å‚¨çš„æ˜¯å·²ç»ç”³è¯·æ‰çš„é”ï¼æ‰€ä»¥ä½†å‡¡fromå’Œtoæ— è®ºå“ªä¸€ä¸ªåŒ…å«åœ¨å†…ï¼Œè¯´æ˜è¦ç”³è¯·çš„ä¸¤ä¸ªèµ„æºå°±ä¸æ»¡è¶³ä¸€æ¬¡æ€§ç”³è¯·æ¡ä»¶ã€‚ä¸çŸ¥é“è¿™æ ·è§£é‡Šç†è§£äº†å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566823238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1007182,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5e/4e/85502e98.jpg","nickname":"balance","note":"","ucode":"324D909BBE69DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12668,"discussion_content":"alsä¸­æœ‰è¯´æ˜è¢«åˆ«äººæ‹¿èµ°äº†ï¼Œæœ‰ä¸€ä¸ªæ‹¿èµ°äº†ä½ å°±å¾—ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568559938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1449812,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erxAjBHiaJUyZqk8JWz1RHAY196YYlZj5HGGUric3pXYIOotzgRViauYxbz49Qt3TToFYW4YiapOIvQFg/132","nickname":"cpp","note":"","ucode":"85B13736CA43BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10361,"discussion_content":"ä¸»è¦æ˜¯å› ä¸ºé”å¯¹è±¡æ˜¯å•ä¾‹ï¼Œæ— è®ºå“ªä¸ªçº¿ç¨‹è¿›æ¥éƒ½éœ€è¦å»æ‹¿è¿™ä¸ªlistä¸­çš„èµ„æºï¼Œåªä¸è¿‡ä»£ç ä¸­æ²¡å†™å•ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568287200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106270,"user_name":"æ–æ³¢é‚£å¥‘","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1561244823,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5856212119","product_id":100023901,"comment_content":"waitæ–¹æ³•ä¼šé‡Šæ”¾å½“å‰çš„é”ï¼Œå°±åƒæ–‡ç« ä¸­æåˆ°çš„ ä½†æ˜¯sleepä¸ä¼šé‡Šæ”¾å½“å‰çš„é” ä½†æ˜¯éœ€è¦try catchæ¥æŠ“ä½æ‰“æ–­å¼‚å¸¸","like_count":1,"discussions":[{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379591,"discussion_content":"wait() éœ€è¦è¢«try catchåŒ…å›´ï¼Œä»¥ä¾¿å‘ç”Ÿå¼‚å¸¸ä¸­æ–­ä¹Ÿå¯ä»¥ä½¿waitç­‰å¾…çš„çº¿ç¨‹å”¤é†’ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624002756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89775,"user_name":"åŠ‰å°å¼º","can_delete":false,"product_type":"c1","uid":1178474,"ip_address":"","ucode":"07FC2F0CDED869","user_header":"https://static001.geekbang.org/account/avatar/00/11/fb/6a/be4956a3.jpg","comment_is_top":false,"comment_ctime":1556261804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5851229100","product_id":100023901,"comment_content":" &#47;&#47; ç»å…¸å†™æ³•<br>    while(als.contains(from) ||<br>         als.contains(to)){<br>      try{<br>        wait();<br>      }catch(Exception e){<br>      }   <br>    }<br><br>ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ å¦‚æœåŒæ—¶æ»¡è¶³fromå’Œto ä¹Ÿè¿›è¡Œç­‰å¾…ä¹ˆï¼Ÿ","like_count":1},{"had_liked":false,"id":87235,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1555551660,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5850518956","product_id":100023901,"comment_content":"è¿™å°±æ˜¯ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼å§","like_count":1},{"had_liked":false,"id":86029,"user_name":"ä¹å‡¡","can_delete":false,"product_type":"c1","uid":1239260,"ip_address":"","ucode":"918C9997EB6537","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/dc/32e78f02.jpg","comment_is_top":false,"comment_ctime":1555303493,"is_pvip":false,"replies":[{"id":"31151","content":"ä¸€ä¸ªèåœä¸€ä¸ªå‘ï¼Œæµªè´¹äº†ä¸€ä¸ªå‘ï¼Œæ€»ä¼šæœ‰ä¸€ä¸ªèåœæ‰¾ä¸åˆ°ä½ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555412994,"ip_address":"","comment_id":86029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850270789","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå¯¹äºnotify()å”¤é†’çº¿ç¨‹æ¯”è¾ƒçš„ä¾‹å­ï¼Œçº¿ç¨‹1é‡Šæ”¾ABåï¼Œ é€šçŸ¥äº†çº¿ç¨‹4ï¼Œæ­¤æ—¶çš„æƒ…å†µæ˜¯ï¼Œçº¿ç¨‹1é‡Šæ”¾æ‰äº†ABèµ„æºï¼Œçº¿ç¨‹2æŒæœ‰CDèµ„æºï¼Œçº¿ç¨‹3ç”³è¯·ABè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œçº¿ç¨‹4ç”³è¯·CDå¤„äºè¿›å…¥é˜Ÿåˆ—ï¼Œæœ€åç»“æœæ‚¨è¯´çº¿ç¨‹3å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ï¼Œå¯ä»¥å¦‚æœçº¿ç¨‹2é‡Šæ”¾äº†CDèµ„æºï¼Œä½†æ˜¯é€šçŸ¥çš„æ˜¯çº¿ç¨‹3ï¼Œæ­¤æ—¶èµ„æºABæ˜¯åœ¨ä¹‹å‰å°±è¢«çº¿ç¨‹1é‡Šæ”¾çš„ï¼Œé‚£ä¹ˆçº¿ç¨‹3è¢«é€šçŸ¥äº†ï¼Œè€Œä¸”èµ„æºABå­˜åœ¨ï¼Œä¸æ˜¯åº”è¯¥è¢«å”¤é†’å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446881,"discussion_content":"ä¸€ä¸ªèåœä¸€ä¸ªå‘ï¼Œæµªè´¹äº†ä¸€ä¸ªå‘ï¼Œæ€»ä¼šæœ‰ä¸€ä¸ªèåœæ‰¾ä¸åˆ°ä½ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555412994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85071,"user_name":"è‚–é‚¦çš„å­¦å¾’","can_delete":false,"product_type":"c1","uid":1159128,"ip_address":"","ucode":"1DB95CD3E10F33","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/d8/0f85fc8f.jpg","comment_is_top":false,"comment_ctime":1554971004,"is_pvip":false,"replies":[{"id":"30506","content":"æµªè´¹æ€»æ¯”é”™è¯¯å¼ºå¤šäº†ï¼Œæ²¡æœ‰æ­£ç¡®æ€§ï¼Œå…¶ä»–çš„éƒ½æ²¡æ„ä¹‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554984147,"ip_address":"","comment_id":85071,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5849938300","product_id":100023901,"comment_content":"è¯„è®ºé‡Œé¢è€å¸ˆè¯´notifyallå’Œwaitæ˜¯æˆå¯¹<br>å¦‚æœæœ‰å¥½å¤šæŒæœ‰1ï¼Œ2æˆ–æ˜¯2ï¼Œ4çš„é”é‡Šæ”¾æ‰ä¹‹åï¼Œè¢«ç”³è¯·2ï¼Œ3çš„çº¿ç¨‹æŠ¢åˆ°äº†ï¼Œä½†æ˜¯ä»–ä»¬æ¡ä»¶ä¸æ»¡è¶³ï¼Œ<br>é€šçŸ¥æœºä¼šè¢«æµªè´¹äº† ï¼Œåé¢ä¸æ˜¯æœ‰å¥½å¤šwaitæ²¡æ³•è·å¾—é€šçŸ¥å—","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446546,"discussion_content":"æµªè´¹æ€»æ¯”é”™è¯¯å¼ºå¤šäº†ï¼Œæ²¡æœ‰æ­£ç¡®æ€§ï¼Œå…¶ä»–çš„éƒ½æ²¡æ„ä¹‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554984147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82720,"user_name":"Vincent","can_delete":false,"product_type":"c1","uid":1135159,"ip_address":"","ucode":"CD8B84A57A6A0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/37/13b4c8aa.jpg","comment_is_top":false,"comment_ctime":1554284615,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5849251911","product_id":100023901,"comment_content":"é‡ç‚¹åŒºåˆ†ä¸‹é‚£ä¸ªæ–¹æ³•æ˜¯Objectç±»æä¾›çš„ï¼Œé‚£ä¸ªæ–¹æ³•æ˜¯Threadæä¾›çš„ã€‚","like_count":1},{"had_liked":false,"id":77143,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1552869958,"is_pvip":false,"replies":[{"id":"28131","content":"åŒ…å«è¯´æ˜æ›¾ç»è¢«åˆ†é…è¿‡<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552881239,"ip_address":"","comment_id":77143,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847837254","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆwhileçš„åˆ¤æ–­æ¡ä»¶æ˜¯è¿™æ ·çš„, while(als.contains(from) || als.contains(to)) , ä¸åº”è¯¥æ˜¯ä¸åŒ…å«å—?<br>","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443602,"discussion_content":"åŒ…å«è¯´æ˜æ›¾ç»è¢«åˆ†é…è¿‡\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552881239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77142,"user_name":"JGOS","can_delete":false,"product_type":"c1","uid":1237592,"ip_address":"","ucode":"46A905A169408F","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/58/2468a5e9.jpg","comment_is_top":false,"comment_ctime":1552869921,"is_pvip":false,"replies":[{"id":"28125","content":"å¯ä»¥æœ‰ï¼ŒæŒ‰ç…§è¥ä¸šå…åˆ†å•Š<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552880040,"ip_address":"","comment_id":77142,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847837217","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªè´¦æœ¬ç®¡ç†å‘˜çš„é”ç²’åº¦å¥½åƒæœ‰ç‚¹ç²—ï¼Œæ‰€æœ‰çš„è´¦æœ¬éƒ½ç”±è¿™ä¸€ä¸ªäººæ¥ç®¡ï¼Œåº”è¯¥æœ‰æ›´ç»†ç²’åº¦çš„å®ç°æ–¹å¼å§","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443601,"discussion_content":"å¯ä»¥æœ‰ï¼ŒæŒ‰ç…§è¥ä¸šå…åˆ†å•Š\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552880040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76490,"user_name":"å—åŒ—å°‘å¿","can_delete":false,"product_type":"c1","uid":1018958,"ip_address":"","ucode":"DFCC59F2BBD8CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/4e/b81969fa.jpg","comment_is_top":false,"comment_ctime":1552618966,"is_pvip":false,"replies":[{"id":"27934","content":"æ²¡é—®é¢˜ï¼Œåªè¦æœ‰ä¸€ä¸ªå­˜åœ¨ï¼Œå°±è¯´æ˜æ›¾ç»è¢«åˆ†é…è¿‡<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552650961,"ip_address":"","comment_id":76490,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847586262","product_id":100023901,"comment_content":"while(als.contains(from) || als.contains(to))è¿™ä¸ªåˆ¤æ–­æ¡ä»¶æ˜¯ä¸æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443327,"discussion_content":"æ²¡é—®é¢˜ï¼Œåªè¦æœ‰ä¸€ä¸ªå­˜åœ¨ï¼Œå°±è¯´æ˜æ›¾ç»è¢«åˆ†é…è¿‡\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552650961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75882,"user_name":"aksonic","can_delete":false,"product_type":"c1","uid":1003633,"ip_address":"","ucode":"B6F3348F6714DB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/71/e8229703.jpg","comment_is_top":false,"comment_ctime":1552487415,"is_pvip":false,"replies":[{"id":"27731","content":"1.æ˜¯<br>2.ä¸æ˜¯ï¼Œä¼šè¿›å…¥å›¾é‡Œå³è¾¹çš„é˜Ÿåˆ—<br>3.æœ‰é€šçŸ¥æœºåˆ¶ï¼Œä½†ä¸æ˜¯notify<br>åé¢è®²ç®¡ç¨‹ä¼šå†è¯¦ç»†è®²<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552536416,"ip_address":"","comment_id":75882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847454711","product_id":100023901,"comment_content":"è€å¸ˆè¯·é—®ï¼Œå¦‚æœæœ‰çº¿ç¨‹Aï¼Œçº¿ç¨‹Bï¼Œçº¿ç¨‹Cï¼ŒåŒæ—¶æƒ³è¿›å…¥synchronizedï¼ˆthisï¼‰ä»£ç å—<br>1. å¦‚æœåªæœ‰çº¿ç¨‹Cè¿›å…¥äº†ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bæ˜¯ä¸æ˜¯éƒ½è¿›å…¥äº†thisé”çš„ç­‰å¾…é˜Ÿåˆ—ï¼Ÿ<br>2. å¦‚æœçº¿ç¨‹Cè¿›å…¥åï¼Œåˆè°ƒç”¨äº†wait();ï¼Œ åˆ™æ˜¯ä¸æ˜¯çº¿ç¨‹Cä¸ä½†é‡Šæ”¾äº†é”ï¼Œä¹Ÿè¿›å…¥äº†thisé”çš„ç­‰å¾…é˜Ÿåˆ—ï¼Ÿ<br>3.  å¦‚æœçº¿ç¨‹Cè¿›å…¥åï¼Œåˆè°ƒç”¨äº†wait(); åˆ™æ˜¯ä¸æ˜¯æœ‰ä¸€ä¸ªéšå«æ“ä½œæ˜¯notifyäº†çº¿ç¨‹Bæˆ–è€…çº¿ç¨‹Cï¼Œå¦åˆ™ä»–ä»¬ä¸¤ä¸ªå¦‚ä½•ä»ç­‰å¾…é˜Ÿåˆ—ä¸­å‡ºæ¥ï¼Œé‡æ–°äº‰å¤ºé”å‘¢ï¼Ÿ<br>å¯¹äºè¿™ä¸ªå®Œæ•´çš„æµç¨‹å¸Œæœ›è€å¸ˆå¯ä»¥å¸®å¿™è§£ç­”ï¼Œè°¢è°¢","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443073,"discussion_content":"1.æ˜¯\n2.ä¸æ˜¯ï¼Œä¼šè¿›å…¥å›¾é‡Œå³è¾¹çš„é˜Ÿåˆ—\n3.æœ‰é€šçŸ¥æœºåˆ¶ï¼Œä½†ä¸æ˜¯notify\nåé¢è®²ç®¡ç¨‹ä¼šå†è¯¦ç»†è®²\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552536416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75701,"user_name":"æˆ‘åŠä½ å–„è‰¯","can_delete":false,"product_type":"c1","uid":1447802,"ip_address":"","ucode":"99ACEDE16B19D3","user_header":"https://static001.geekbang.org/account/avatar/00/16/17/7a/ab9bb6df.jpg","comment_is_top":false,"comment_ctime":1552452684,"is_pvip":false,"replies":[{"id":"27646","content":"ä»–ä»¬éƒ½éœ€è¦é‡æ–°ç«äº‰é”ï¼Œæ‰€ä»¥éœ€è¦æ¯æ¬¡éƒ½notifyallï¼Œè¦ä¸ç„¶å°±æœ‰çº¿ç¨‹å¯èƒ½æ°¸è¿œé†’ä¸äº†äº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552480546,"ip_address":"","comment_id":75701,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847419980","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå‡è®¾æˆ‘ä»¬æœ‰èµ„æº Aã€Bã€Cã€Dï¼Œçº¿ç¨‹ 1 ç”³è¯·åˆ°äº† ABï¼Œçº¿ç¨‹2ç”³è¯·CDçš„è¿™ä¸ªä¾‹å­ï¼Œçº¿ç¨‹3ï¼Œ4åˆ†åˆ«è¯·æ±‚é”å®šABï¼ŒCDä»è€Œç­‰å¾…çš„è¯ã€‚çº¿ç¨‹1å½’è¿˜äº†ABï¼Œé‚£ä¹ˆä½¿ç”¨notifyæ¥é€šçŸ¥ç­‰å¾…ä¸­çº¿ç¨‹çš„è¯ï¼Œæ˜¯éšæœºé€šçŸ¥3ï¼Œ4ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œæœ‰å¯èƒ½3æ°¸è¿œé€šçŸ¥ä¸åˆ°å¯¹å§ï¼Ÿé‚£ä¹ˆnotifyAllæ¥é€šçŸ¥çš„è¯ï¼Œæˆ‘ç†è§£çš„æ˜¯åŒæ—¶é€šçŸ¥ç­‰å¾…ä¸­çš„3ï¼Œ4å—ï¼Ÿç„¶å3ï¼Œ4å†å»ç«äº‰ä»–ä»¬éœ€è¦çš„é”èµ„æºï¼Œæ˜¯ç­‰å¾…é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çº¿ç¨‹3ï¼Œ4éƒ½ä¼šè¢«å”¤é†’ï¼Œä»–ä»¬éƒ½ä¼šå»äº‰å–ä»–ä»¬éœ€è¦çš„é”èµ„æºå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442987,"discussion_content":"ä»–ä»¬éƒ½éœ€è¦é‡æ–°ç«äº‰é”ï¼Œæ‰€ä»¥éœ€è¦æ¯æ¬¡éƒ½notifyallï¼Œè¦ä¸ç„¶å°±æœ‰çº¿ç¨‹å¯èƒ½æ°¸è¿œé†’ä¸äº†äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552480546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75190,"user_name":"WolvesLeader","can_delete":false,"product_type":"c1","uid":1103839,"ip_address":"","ucode":"33610E19CA2E96","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/df/fc0a6709.jpg","comment_is_top":false,"comment_ctime":1552361598,"is_pvip":false,"replies":[{"id":"27469","content":"cpuæ‰§è¡Œæƒæ€ä¹ˆç†è§£ï¼Ÿ<br>å»æ“ä½œç³»ç»Ÿé‡ŒæŸ¥çœ‹çº¿ç¨‹çŠ¶æ€å°±å¯ä»¥äº†ï¼Œçº¿ç¨‹éƒ½é˜»å¡äº†ï¼Œæ²¡æ³•éªŒè¯ï¼Œä¹Ÿå¯ä»¥çœ‹çº¿ç¨‹çš„cpuä½¿ç”¨ç‡<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552393853,"ip_address":"","comment_id":75190,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847328894","product_id":100023901,"comment_content":"ç½‘ä¸Šä¸€èˆ¬è¯´2æ–¹é¢åŒºåˆ« <br>1.é”çš„é‡Šæ”¾è¿˜æ˜¯ä¸é‡Šæ”¾<br>2.cpuæ‰§è¡Œæƒï¼Œæˆ‘çš„å›°æƒ‘æ˜¯ä¸€ç›´æ²¡åŠæ³•éªŒè¯å¯¹cpuæ‰§è¡Œæƒçš„å½±å“ï¼Œä¸ºäº†è¿™ä¸ªé—®é¢˜ä¹Ÿçœ‹è¿‡jvmçš„æºç ï¼Œæ²¡çœ‹å‡ºå•¥é“é“æ¥ï¼Œè€å¸ˆæœ‰å•¥demoæˆ–è€…å…¶ä»–çš„æ–¹å¼èƒ½çœ‹å‡º2æ–¹æ³•å¯¹æ‰§è¡Œæƒçš„å½±å“å—ï¼Ÿè°¢è°¢è°¢è°¢","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442817,"discussion_content":"cpuæ‰§è¡Œæƒæ€ä¹ˆç†è§£ï¼Ÿ\nå»æ“ä½œç³»ç»Ÿé‡ŒæŸ¥çœ‹çº¿ç¨‹çŠ¶æ€å°±å¯ä»¥äº†ï¼Œçº¿ç¨‹éƒ½é˜»å¡äº†ï¼Œæ²¡æ³•éªŒè¯ï¼Œä¹Ÿå¯ä»¥çœ‹çº¿ç¨‹çš„cpuä½¿ç”¨ç‡\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552393853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75105,"user_name":"___","can_delete":false,"product_type":"c1","uid":1229519,"ip_address":"","ucode":"B0BA5A1413798C","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/cf/573a0fdc.jpg","comment_is_top":false,"comment_ctime":1552355610,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5847322906","product_id":100023901,"comment_content":"waitä¼šé‡Šæ”¾é”èµ„æºï¼Œsleepä¸ä¼šé‡Šæ”¾<br>waitå¯ä»¥é€šè¿‡notifyï¼ŒnotifyAllæ¥é€šçŸ¥å”¤é†’","like_count":1},{"had_liked":false,"id":75095,"user_name":"Lrwin","can_delete":false,"product_type":"c1","uid":1180503,"ip_address":"","ucode":"5E394E36419C56","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/57/31595f22.jpg","comment_is_top":false,"comment_ctime":1552355119,"is_pvip":false,"replies":[{"id":"27460","content":"1.ä¸èƒ½<br>2.æ˜¯<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552392463,"ip_address":"","comment_id":75095,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847322415","product_id":100023901,"comment_content":"æœ‰ä¸¤ä¸ªé˜Ÿåˆ—:ç­‰å¾…è·å–é”çš„é˜Ÿåˆ—(ç®€ç§°Aé˜Ÿåˆ—)å’Œè°ƒç”¨wait æ–¹æ³•çš„é˜Ÿåˆ—(ç®€ç§°Bé˜Ÿåˆ—)<br><br>é—®é¢˜1.è°ƒç”¨notify åï¼Œä¸€å®šæ˜¯Bé˜Ÿåˆ—çš„çº¿ç¨‹å¯ä»¥è·å–é”å—ï¼Ÿ<br>é—®é¢˜2:åœ¨synchronized ä»£ç å—ä¸­ï¼Œå¦‚æœnotify åè¾¹è¿˜æœ‰ä»£ç ï¼Œæ˜¯æ‰§è¡Œåé¢æ‰€æœ‰çš„ä»£ç æ‰é‡Šæ”¾é”å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442797,"discussion_content":"1.ä¸èƒ½\n2.æ˜¯\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552392463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74999,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1552349651,"is_pvip":false,"replies":[{"id":"27453","content":"javaé‡Œçœ‹ä¸åˆ°<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552389960,"ip_address":"","comment_id":74999,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847316947","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæ€ä¹ˆæŸ¥çœ‹synchronized(A.class)é˜»å¡åè¿›å…¥çš„ç­‰å¾…é˜Ÿåˆ—ï¼Ÿ  å°±æ˜¯ï¼Œç­‰å¾…é˜Ÿåˆ—ï¼Œå¯¹åº”çš„ç°å®ä»£ç ï¼Œåœ¨å“ªé‡Œèƒ½çœ‹åˆ°å•Šï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442772,"discussion_content":"javaé‡Œçœ‹ä¸åˆ°\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552389960,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74998,"user_name":"æ¸”å¤«","can_delete":false,"product_type":"c1","uid":1019289,"ip_address":"","ucode":"6BF08FD8923E45","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/99/f886543d.jpg","comment_is_top":false,"comment_ctime":1552349492,"is_pvip":false,"replies":[{"id":"27455","content":"æ¯”è¾ƒå…¨é¢çš„è¯´æ³•æ˜¯æœ‰ä¸‰ä¸ªæ¡ä»¶ï¼Œåé¢ä»‹ç»ç®¡ç¨‹çš„æ—¶å€™ä¼šè¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚ä¸è¿‡ä½ è¯´çš„è¿™ä¸ªæœ€å…³é”®ï¼ğŸ‘<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552390116,"ip_address":"","comment_id":74998,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847316788","product_id":100023901,"comment_content":"å¦‚æœæ‰€æœ‰çº¿ç¨‹çš„ç­‰å¾…æ¡ä»¶éƒ½æ˜¯ä¸€æ ·çš„è¯ï¼Œå°±å¯ä»¥ä½¿ç”¨ notify æ¥è¿›è¡Œé€šçŸ¥ï¼Œå¯¹å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442771,"discussion_content":"æ¯”è¾ƒå…¨é¢çš„è¯´æ³•æ˜¯æœ‰ä¸‰ä¸ªæ¡ä»¶ï¼Œåé¢ä»‹ç»ç®¡ç¨‹çš„æ—¶å€™ä¼šè¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚ä¸è¿‡ä½ è¯´çš„è¿™ä¸ªæœ€å…³é”®ï¼ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552390116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74979,"user_name":"å³°","can_delete":false,"product_type":"c1","uid":1056019,"ip_address":"","ucode":"C53CB64E8E7D19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/13/31ea1b0b.jpg","comment_is_top":false,"comment_ctime":1552347204,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5847314500","product_id":100023901,"comment_content":"waitä¼šé‡Šæ”¾å½“å‰è°ƒç”¨å¯¹è±¡çš„é”ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€è°ƒç”¨ä¹‹å‰çš„æŒæœ‰è¿™æŠŠé”,å¦ç€ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br>waitæ˜¯objectæ–¹æ³•ï¼Œsleepæ˜¯Threadçš„é™æ€æ–¹æ³•ã€‚","like_count":1},{"had_liked":false,"id":359101,"user_name":"è‡ªåœ¨é£","can_delete":false,"product_type":"c1","uid":1167825,"ip_address":"åŒ—äº¬","ucode":"A2712148DA06E0","user_header":"https://static001.geekbang.org/account/avatar/00/11/d1/d1/62f74aa7.jpg","comment_is_top":false,"comment_ctime":1665237941,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665237941","product_id":100023901,"comment_content":"è€å¸ˆ ä½ å¥½ï¼Œæœ‰ä¸ªé—®é¢˜æ²¡æƒ³æ˜ç™½ï¼Œè¯·æ‚¨æŒ‡æ•™ä¸‹å“ˆï¼š<br><br>å¦‚æœã€ç­‰å¾…æ¡ä»¶ã€‘å¹¶éä¸€ä¸ªè€Œæ˜¯å¤šä¸ªçš„æ—¶å€™ï¼Œæ­¤æ—¶å°±ç®—ä½¿ç”¨notifyAll()ä¹Ÿæœ‰å¯èƒ½å¯¼è‡´ã€æŸäº›æœ¬è¯¥è¢«å”¤é†’çš„çº¿ç¨‹å¾—ä¸åˆ°å”¤é†’ã€‘çš„æœºä¼šå§ï¼Ÿ","like_count":0},{"had_liked":false,"id":359094,"user_name":"è‡ªåœ¨é£","can_delete":false,"product_type":"c1","uid":1167825,"ip_address":"åŒ—äº¬","ucode":"A2712148DA06E0","user_header":"https://static001.geekbang.org/account/avatar/00/11/d1/d1/62f74aa7.jpg","comment_is_top":false,"comment_ctime":1665230517,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665230517","product_id":100023901,"comment_content":"è€å¸ˆ æ‚¨å¥½ï¼Œè¯·é—®ä¸‹ å›¾ä¸­ç”»çš„é‚£ä¸¤ä¸ªç­‰å¾…é˜Ÿåˆ—æ€ä¹ˆç†è§£ï¼Ÿä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":357017,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1476245,"ip_address":"é‡åº†","ucode":"2668A965FA79F2","user_header":"https://static001.geekbang.org/account/avatar/00/16/86/95/b9d960d9.jpg","comment_is_top":false,"comment_ctime":1662863942,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662863942","product_id":100023901,"comment_content":"waitä¼šä¸»åŠ¨é‡Šæ”¾é”ï¼Œsleepä¸ä¼šé‡Šæ”¾é”<br>ç”¨å››ä¸ªçº¿ç¨‹æ‰§è¡Œè½¬è´¦ä¸šåŠ¡ï¼Œåœ¨getæ–¹æ³•é‡Œåˆ†åˆ«ä½¿ç”¨sleepå’Œwaitå¹¶åœ¨åé¢è·Ÿä¸Šä¸€æ¡æ‰“å°è¯­å¥ï¼Œè§‚å¯Ÿå¾—åˆ°ã€‚åœ¨æˆ‘å½“å‰çº¿ç¨‹åé¢è¿›å…¥getæ–¹æ³•çš„çº¿ç¨‹åœ¨æˆ‘æ‰§è¡Œå®Œsleepä¹‹åä¸ä¼šæ‰“å°ä»»ä½•è¾“å‡ºè¯­å¥ï¼Œä½†æ˜¯å½“æˆ‘æ‰§è¡Œå®Œwaitæ–¹æ³•åæ‰“å°è¯­å¥è¯­å¥å°±æ‰§è¡Œäº†<br>public synchronized void get(Object from, Object to) {<br>        while (list.contains(from) || list.contains(to)) {<br>            try {<br>                Thread.sleep(1000);<br>                System.out.println(&quot;æˆ‘æ˜¯seleepï¼Œæˆ‘ä¸é‡Šæ”¾é”&quot;);<br>                wait();<br>                System.out.println(&quot;hello,æˆ‘æŠŠé”é‡Šæ”¾äº†&quot;);<br>            } catch (InterruptedException e) {<br>                throw new RuntimeException(e);<br>            }<br>        }<br>        list.add(from);<br>        list.add(to);<br>    }","like_count":0},{"had_liked":false,"id":354210,"user_name":"Geek_e009ee","can_delete":false,"product_type":"c1","uid":3014916,"ip_address":"ç¦å»º","ucode":"EB5DB9A8D6DBA2","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqKiaa7OE3FelFiaUmFCiaMUTn1kG3UrR3ZuzTOl5bSGDTjThn3ujFQgcbeZBPump30Jfzb4EEZeUhaQ/132","comment_is_top":false,"comment_ctime":1660188709,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660188709","product_id":100023901,"comment_content":"waitä¸sleepçš„åŒºåˆ«åœ¨äº<br>1.waitåœ¨çº¿ç¨‹æŒ‚èµ·çš„æ—¶å€™ï¼Œä¼šé‡Šæ”¾é”èµ„æºã€‚è€Œsleepä¸ä¼š<br>2.waitå¦‚æœæ²¡æœ‰è®¾ç½®å‚æ•°çš„è¯ï¼Œéœ€è¦notifyæ‰èƒ½è¢«å”¤é†’ï¼Œè€Œsleepä¸éœ€è¦<br>3.waitåªèƒ½åœ¨åŒæ­¥ä»£ç å—ä¸­æ‰èƒ½è¿è¡Œï¼Œè€Œsleepå…¨å±€éƒ½å¯ä»¥è¿è¡Œ<br>4.sleepéœ€è¦æ•è·å¼‚å¸¸ï¼Œè€Œwaitä¸éœ€è¦","like_count":0},{"had_liked":false,"id":352664,"user_name":"é«˜ç‰å","can_delete":false,"product_type":"c1","uid":2950398,"ip_address":"","ucode":"6E6C221C8ABF63","user_header":"","comment_is_top":false,"comment_ctime":1658845968,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658845968","product_id":100023901,"comment_content":"synchronized (obj) { obj.wait()} æ€ä¹ˆç†è§£åŸå­æ€§ï¼Ÿ","like_count":0},{"had_liked":false,"id":345742,"user_name":"å­¦ä¹ å­¦ä¸ªå±","can_delete":false,"product_type":"c1","uid":1049017,"ip_address":"","ucode":"DF2D61E6FB2FCE","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/b9/73435279.jpg","comment_is_top":false,"comment_ctime":1652541376,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652541376","product_id":100023901,"comment_content":"wait() ï¼š é‡Šæ”¾èµ„æºï¼Œä¸ä¼šå ç”¨cpuèµ„æºï¼Œä¸€å®šéœ€è¦ä¸€ä¸ªLockå¯¹è±¡è°ƒç”¨<br> sleep() ï¼š ä¸ä¼šé‡Šæ”¾ï¼Œä¼šå ç”¨cpuèµ„æºï¼Œéœ€è¦æ•è·å¼‚å¸¸ï¼Œä¸éœ€è¦lockå¯¹è±¡è°ƒç”¨ã€‚æ˜¯å±äºçº¿ç¨‹å¯¹è±¡ã€‚","like_count":0},{"had_liked":false,"id":343735,"user_name":"å®‹è®¡æ´‹","can_delete":false,"product_type":"c1","uid":2076251,"ip_address":"","ucode":"9A34E8F71C6CBD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ae/5b/4bd42286.jpg","comment_is_top":false,"comment_ctime":1651029393,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651029393","product_id":100023901,"comment_content":"æˆ‘æ„Ÿè§‰è€å¸ˆå¸¦ç€é—®é¢˜å»è§£é‡Šä¸ºä»€ä¹ˆç”¨synchronized, wait, notify,notifyAllï¼Œä¸€ä¸‹å°±æ˜ç™½è¿™ä¸‰ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼Œä¹‹å‰éƒ½æ˜¯æ­»è®°ç¡¬èƒŒé‚£äº›çº¿ç¨‹çš„çŠ¶æ€ï¼Œç”¨å“ªä¸ªæ–¹æ³•ä»ä»€ä¹ˆçŠ¶æ€åˆ°ä»€ä¹ˆçŠ¶æ€ï¼Œå®Œå…¨ä¸ç†è§£","like_count":0},{"had_liked":false,"id":335903,"user_name":"æ­£å®—è€èœé¸Ÿ","can_delete":false,"product_type":"c1","uid":1926177,"ip_address":"","ucode":"F54623D3A2DC5C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/64/21/9e743711.jpg","comment_is_top":false,"comment_ctime":1645763410,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645763410","product_id":100023901,"comment_content":"ç®€ç›´ä¸è¦å¤ªå¼ºäº†ï¼Œç¯ç¯ç›¸æ‰£ï¼ŒæŠŠæ¯ä¸€ä¸ªæ™¦æ¶©éš¾æ‡‚çš„åŸç†éƒ½ç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­å…·ä½“åŒ–è¡¨ç¤ºå‡ºæ¥ï¼Œæƒ³ä¸æ‡‚éƒ½éš¾å•Šã€‚","like_count":0},{"had_liked":false,"id":335441,"user_name":"é™ˆæŸæŸ","can_delete":false,"product_type":"c1","uid":1670520,"ip_address":"","ucode":"1153BAF44936FB","user_header":"https://static001.geekbang.org/account/avatar/00/19/7d/78/c638dc56.jpg","comment_is_top":false,"comment_ctime":1645519639,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645519639","product_id":100023901,"comment_content":" &#47;&#47; è½¬è´¦<br>    void transfer(Account target, int amt)  {<br>        allocator.apply(this, target);<br>        if (this.balance &gt; amt) {<br>            this.balance -= amt;<br>            target.balance += amt;<br>        }<br>        allocator.free(this,target);<br><br><br>    }<br><br>    public static void main(String[] args) throws InterruptedException {<br>        Account a1 = new Account(1);<br>        Account a2 = new Account(2);<br><br>        Thread th1 = new Thread(() -&gt; {<br>            try {<br>                a1.transfer(a2, 99);<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            }<br><br>        });<br><br>        Thread th2 = new Thread(() -&gt; {<br>            try {<br>                a2.transfer(a1, 1);<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            }<br>        });<br><br>        th1.start();<br>        th2.start();<br><br>        th1.join();<br>        th2.join();<br><br>        System.out.println(&quot;a1 =&quot; + a1.balance);<br>        System.out.println(&quot;a2 =&quot; + a2.balance);<br>}","like_count":0},{"had_liked":false,"id":335165,"user_name":"æ«æ—è¡€èˆ","can_delete":false,"product_type":"c1","uid":2809867,"ip_address":"","ucode":"EE7F6DA78D21EA","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e0/0b/6f667b2c.jpg","comment_is_top":false,"comment_ctime":1645368639,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645368639","product_id":100023901,"comment_content":"1ã€wait()æ´¾ç”Ÿè‡ªç±»Object()ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰è¯¥æ–¹æ³•ï¼›sleep()æ˜¯Threadç±»ï¼Œå¹¶ä¸”æ ‡æ³¨ä¸ºstatic + nativeã€‚<br>2ã€wait()æ–¹æ³•ä¼šé‡Šæ”¾é”ï¼Œå½“å‰çº¿ç¨‹ç”±runningçŠ¶æ€è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå¹¶è¿›å…¥é˜»å¡é˜Ÿåˆ—ï¼›è€Œsleep()ä¸ä¼šé‡Šæ”¾é”ï¼Œå½“sleepçš„æ—¶é—´åˆ°äº†åï¼Œåç»­æ“ä½œç»§ç»­ã€‚<br>3ã€wait()æ–¹æ³•éœ€è¦å’Œnotify()&#47;notifyAll()é…åˆä½¿ç”¨ï¼Œè¢«å”¤é†’åï¼Œçº¿ç¨‹ç”±é˜»å¡é˜Ÿåˆ—è¿›å…¥åŒæ­¥é˜Ÿåˆ—ï¼Œç­‰å¾…æŒæœ‰é”ï¼›sleep()åˆ°ç‚¹å°±å¯ä»¥ç»§ç»­ï¼Œæ— éœ€é…åˆã€‚","like_count":0},{"had_liked":false,"id":331674,"user_name":"Geek_039a5c","can_delete":false,"product_type":"c1","uid":1651848,"ip_address":"","ucode":"08F4FA864D4B65","user_header":"","comment_is_top":false,"comment_ctime":1642698225,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642698225","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ã€‚ æˆ‘æƒ³é—®ä¸ªé—®é¢˜ã€‚  Allocator è¿™ä¸ªç±»æ˜¯ä¸æ˜¯è¦æ˜¯å•ä¾‹æ¨¡å¼æ‰è¡Œï¼Ÿ è¿™é‡Œé”çš„æ˜¯thisã€‚ å¦‚æœæ˜¯æœ‰å¤šä¸ªAllocatorå®ä¾‹çš„è¯ï¼Œæ¯ä¸ªäººéƒ½ç»´æŠ¤ä¸€ä¸ªalsã€‚è¿™æ · å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨å§ï¼Ÿ<br>&#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº<br>  synchronized void apply(<br>    Object from, Object to){<br>    &#47;&#47; ç»å…¸å†™æ³•<br>    while(als.contains(from) ||<br>         als.contains(to)){<br>      try{<br>        wait();<br>      }catch(Exception e){<br>      }   <br>    } <br>    als.add(from);<br>    als.add(to);  <br>  }","like_count":0},{"had_liked":false,"id":327946,"user_name":"æå°çº¢","can_delete":false,"product_type":"c1","uid":1132163,"ip_address":"","ucode":"7776F5B29B8423","user_header":"https://static001.geekbang.org/account/avatar/00/11/46/83/76f6ec67.jpg","comment_is_top":false,"comment_ctime":1640414255,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640414255","product_id":100023901,"comment_content":"å¦‚æœé”çš„æ˜¯classï¼Œé‚£ä¹ˆæ€ä¹ˆåŠç”¨waitå’Œnotify","like_count":0},{"had_liked":false,"id":319329,"user_name":"Geek_7a9e2c","can_delete":false,"product_type":"c1","uid":1265132,"ip_address":"","ucode":"00DC77B9C85EE3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er78PmxPDq4a3vNuvvX10fiaBC4FZ7XXuOX1nMjhCIqiaHWfpjfd5CDoVVB0GRGveChNmkSmuy7smxQ/132","comment_is_top":false,"comment_ctime":1635747810,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635747810","product_id":100023901,"comment_content":"sleepåªæ˜¯å•çº¯çš„è®©æ¸¡æ—¶é—´ç‰‡ï¼Œä¸ä¼šé‡Šæ”¾é”èµ„æºï¼›waitåŒæ—¶ä¼šé‡Šæ”¾é”èµ„æº","like_count":0},{"had_liked":false,"id":316357,"user_name":"Donkey","can_delete":false,"product_type":"c1","uid":2753834,"ip_address":"","ucode":"3DB4DFF6D99035","user_header":"https://static001.geekbang.org/account/avatar/00/2a/05/2a/cfbcb0b2.jpg","comment_is_top":false,"comment_ctime":1634285805,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634285805","product_id":100023901,"comment_content":"çœ‹ä¸å¤ªæ˜ç™½çš„å¯ä»¥çœ‹çœ‹çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ","like_count":0},{"had_liked":false,"id":315005,"user_name":"å®˜å®å„¿","can_delete":false,"product_type":"c1","uid":2110827,"ip_address":"","ucode":"03B4312475A984","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI5eicXFWltiaF9ibsEh2nNC80OYoHibhhE0X1hPHZ5KuAtY4Yxp5dQ4LsciaDxUHFBPlJM7kgQwkspzsQ/132","comment_is_top":false,"comment_ctime":1633655311,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633655311","product_id":100023901,"comment_content":"sleepçº¿ç¨‹æ˜¯ä¸æ˜¯ä¸ä¼šè¢«notify notifyAllå”¤é†’ï¼Œå®ƒåªæ˜¯åˆ°ç‚¹äº†è‡ªåŠ¨å”¤é†’ï¼Œwaitæ˜¯é™¤énotify å¦åˆ™ä¸€ç›´é˜»å¡","like_count":0},{"had_liked":false,"id":314117,"user_name":"èœæ³¢","can_delete":false,"product_type":"c1","uid":2032894,"ip_address":"","ucode":"DA7DED66709FA2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/04/fe/60db4684.jpg","comment_is_top":false,"comment_ctime":1632846545,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632846545","product_id":100023901,"comment_content":"å¦‚æœä½¿ç”¨ notify() æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹ 4ï¼Œä½†çº¿ç¨‹ 4 ç”³è¯·çš„æ˜¯ CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹ 3 å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ã€‚<br>======<br>è€å¸ˆï¼Œå½’è¿˜ABçš„çº¿ç¨‹nofity()æ˜¯å”¤èµ·äº†4ï¼Œè¿™è¯´æ˜ABä¸Šçš„notify()æ˜¯ä¸èƒ½å®šå‘å”¤èµ·æŒæœ‰è¯¥é”èµ„æºçš„3çš„<br>æˆ‘æƒ³é—®ä¸‹ï¼Œ1.javaä¸ºä»€ä¹ˆä¸å°†ç­‰å¾…èµ„æºå’Œç­‰å¾…é˜Ÿåˆ—1:1å¯¹åº”å‘¢ï¼Ÿæ¯”å¦‚å°†1ï¼Œ3æ”¾å…¥1ä¸ªABçš„ç­‰å¾…é˜Ÿåˆ—ï¼Œ2ï¼Œ4æ”¾å…¥CDçš„ç­‰å¾…é˜Ÿåˆ—ã€‚å½“ABæœ‰å½’è¿˜æ—¶ï¼Œåªéœ€è¦æ£€æŸ¥ABçš„çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œè¿™æ ·åšæ•ˆç‡åº”è¯¥æ›´é«˜<br>2.å¦‚æœå½’è¿˜ABçš„çº¿ç¨‹nofity()æ˜¯å”¤èµ·äº†4ï¼Œé‚£3ä¹Ÿå¯èƒ½ä¼šè¢«å…¶ä»–çš„å½’è¿˜å”¤èµ·å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":307731,"user_name":"Geek_067762","can_delete":false,"product_type":"c1","uid":2311005,"ip_address":"","ucode":"B3C3CFD1C05283","user_header":"","comment_is_top":false,"comment_ctime":1629216723,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629216723","product_id":100023901,"comment_content":"public class MyLock {<br><br>    public static void main(String[] args) throws InterruptedException {<br>        Acount acount = new Acount(10000);<br>        Acount acount2 = new Acount(10000);<br>        CountDownLatch countDownLatch = new CountDownLatch(9999);<br>        for (int i = 0; i &lt; 9999; i++) {<br>            new Thread(() -&gt; {<br>                acount.transformTo(1, acount2);<br>                countDownLatch.countDown();<br>            }).start();<br>        }<br>        countDownLatch.await();<br>        System.out.println(acount.money);<br>        System.out.println(acount2.money);<br><br>    }<br><br><br>    static class Acount {<br>        private int money;<br><br>        public Acount(int money) {<br>            this.money = money;<br>        }<br><br>        public void transformTo(int money, Acount to) {<br>            this.money -= money;<br>            to.transFromIn(money);<br>        }<br><br>        public void transFromIn(int money) {<br>            this.money += money;<br>        }<br>    }<br>}<br><br>æˆ‘è¿˜æ²¡åŠ é”ï¼Œæˆ‘çš„æ‰§è¡Œæ‰“å°ç»“æœä¸ºä»€ä¹ˆæ€»æ˜¯   1ï¼Œ19999   ä¸èƒ½æµ®ç°å‡ºçº¿ç¨‹ä¸å®‰å…¨","like_count":0},{"had_liked":false,"id":301226,"user_name":"å°ä¹™å“¥","can_delete":false,"product_type":"c1","uid":1063308,"ip_address":"","ucode":"C77E79BEA0C325","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","comment_is_top":false,"comment_ctime":1625581469,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625581469","product_id":100023901,"comment_content":"æœ‰ä¸ªä½“ä¼šï¼Œæ¯èŠ‚è®²å¾—å†…å®¹ä¸€å®šè¦å†™ä¸€ä¸‹ä»£ç ï¼Œç²¾åéƒ½åœ¨ç»†èŠ‚å½“ä¸­ã€‚ç„¶åä¸€ç‚¹ä¸€ç‚¹å»æ€è€ƒå…¶ä¸­çš„å†…å®¹ï¼Œå†åŠ ä¸Šè€å¸ˆçš„è®²è§£ï¼Œç†è§£ä¼šæ·±ä¸€ç‚¹ã€‚ç¬¬ä¸€æ¬¡çœ‹åªæ˜¯çœ‹çœ‹å†…å®¹ï¼Œå›å¤´å‘ç°éƒ½å¿˜äº†ï¼Œå°±æ˜¯è¿™ä¸ªåŸå› ","like_count":0},{"had_liked":false,"id":298867,"user_name":"Xä¸­å€ª","can_delete":false,"product_type":"c1","uid":1418862,"ip_address":"","ucode":"F28FAFF2FEDD1A","user_header":"https://static001.geekbang.org/account/avatar/00/15/a6/6e/21907ff9.jpg","comment_is_top":false,"comment_ctime":1624350430,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624350430","product_id":100023901,"comment_content":"notifyå’Œnotifyallçš„åŒºåˆ«<br><br>notify  æ˜¯é€šçŸ¥å½“å‰é”å®šæ¡ä»¶å˜é‡ã€‚è¿›è¡ŒæŠ¢å cpuèµ„æºã€‚å¦‚æœæ²¡æœ‰å°±ç»ªç­‰å¾…é˜Ÿåˆ—ä¸ºç©ºçš„æƒ…å†µã€å°±ä¸ä½œä¸ºã€‚<br><br>notifyall æ˜¯é€šçŸ¥æ‰€æœ‰çš„çº¿ç¨‹è¿›è¡ŒæŠ¢å cpuèµ„æºã€‚<br><br>notifyï¼šå¥½æ¯”Javaç»„é•¿ ï¼Œæˆ‘ç°åœ¨å‘å‡ºé€šçŸ¥ ï¼Œä½ ä»¬æœ‰å•¥é—®é¢˜ éœ€è¦æ¥æ‰¾æˆ‘è§£å†³ ï¼ˆä»…ä»…æ˜¯Javaç›¸å…³çš„ï¼Œæœ‰é—®é¢˜çš„Javaç¨‹åºå‘˜æ‰¾ç»„é•¿è§£å†³é—®é¢˜ ï¼Œæ²¡æœ‰é—®é¢˜ å°±å¹²å…¶ä»–äº‹æƒ…ï¼‰<br><br>notifyallï¼šå¥½æ¯”cto ï¼Œæˆ‘ç°åœ¨æœ‰ç©ºé—²äº† ï¼Œä½ ä»¬æœ‰ä»€ä¹ˆé—®é¢˜éœ€è¦æ¥æ‰¾æˆ‘è§£å†³ï¼ˆå‰ç«¯ã€åç«¯ã€è¿ç»´ ã€äº§å“ ç­‰éƒ½æ¥æŠ¢å è¿™ä¸ª å‘ä½ï¼‰<br>â€œå‰ææ¡ä»¶å°±æ˜¯ è¿™äº›ç­‰å¾…æ¡ä»¶å˜é‡çš„çº¿ç¨‹å¿…é¡»åœ¨å°±ç»ªé˜Ÿåˆ—é‡Œé¢â€<br><br>ç°å®å¼€å‘å·¥ç¨‹ä¸­ï¼šå¯ä»¥è¯´å¾ˆéš¾å»æŠŠæ§é”å®šçš„èµ„æº ï¼Œåˆ°åº•è¯¥ç”¨å“ªä¸€ä¸ªé€šçŸ¥ã€‚ ","like_count":0},{"had_liked":false,"id":291302,"user_name":"ç¬¬å››å•å…ƒ","can_delete":false,"product_type":"c1","uid":1747184,"ip_address":"","ucode":"3ED9D553E1DE17","user_header":"https://static001.geekbang.org/account/avatar/00/1a/a8/f0/529f15e9.jpg","comment_is_top":false,"comment_ctime":1620195922,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620195922","product_id":100023901,"comment_content":"waitå’Œsleepçš„åŒºåˆ«ï¼š<br>1.å¦‚æœåœ¨syncå—ä¸­è°ƒç”¨ï¼Œsleepä¸ä¼šé‡Šæ”¾é”ï¼Œwaitä¼šé‡Šæ”¾é”<br>2.sleepæ˜¯Threadç±»çš„æ–¹æ³•ï¼Œå®ƒåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è°ƒç”¨ã€‚waitæ˜¯Objectçš„æ–¹æ³•ï¼Œåªæœ‰åœ¨è·å–åˆ°syncé”æ—¶æ‰èƒ½è°ƒç”¨è¢«é”å¯¹è±¡çš„waitæ–¹æ³•ã€‚<br>3.sleepæ–¹æ³•åˆ°è¾¾æŒ‡å®šæ—¶é—´åè½¬å…¥runableçŠ¶æ€ï¼Œå¯ç»§ç»­æ‰§è¡Œã€‚waitå¯ä»¥è¢«notifyã€notifyAllå”¤é†’ï¼Œæˆ–åˆ°è¾¾æŒ‡å®šæ—¶é—´åå”¤é†’ã€‚ä½†å”¤é†’åè¿˜è¦ç»§ç»­ç”³è¯·é”ï¼Œç”³è¯·æˆåŠŸåæ‰èƒ½ç»§ç»­åœ¨waitè°ƒç”¨çš„ä¸‹ä¸€å¥æ‰§è¡Œã€‚<br>4.è°ƒç”¨sleepåçº¿ç¨‹è¿›å…¥blockedçŠ¶æ€ï¼Œè°ƒç”¨waitåè¿›å…¥waitingçŠ¶æ€ã€‚","like_count":0},{"had_liked":false,"id":289729,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1619156929,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619156929","product_id":100023901,"comment_content":"#### wait()å’Œsleep()çš„åŒºåˆ«<br><br>- wait()çš„çˆ¶ç±»æ˜¯Objectï¼›sleep()çš„çˆ¶ç±»æ˜¯Thread<br>- wait()ä¼šé‡Šæ”¾é”ï¼›sleep()ä¸ä¼šé‡Šæ”¾é”<br>- wait()éœ€è¦notify()å»å”¤é†’ï¼›sleep()ä¸éœ€è¦å”¤é†’ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´å°±è‡ªåŠ¨å”¤é†’<br>- wait()éœ€è¦åœ¨synchronized{}å†…éƒ¨ä½¿ç”¨ï¼›sleep()ä¸éœ€è¦","like_count":0},{"had_liked":false,"id":288827,"user_name":"å¼ æ»”","can_delete":false,"product_type":"c1","uid":1322636,"ip_address":"","ucode":"87ABAFF0E861E0","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","comment_is_top":false,"comment_ctime":1618718267,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618718267","product_id":100023901,"comment_content":"ä»æˆ‘çš„æµ‹è¯•æ˜¾ç¤ºï¼Œsynchronizedçš„å…¥å£ç­‰å¾…é˜Ÿåˆ—æ˜¯ä¸€ä¸ªLIFOçš„é˜Ÿåˆ—ã€‚","like_count":0},{"had_liked":false,"id":287415,"user_name":"RoccoLee","can_delete":false,"product_type":"c1","uid":2508667,"ip_address":"","ucode":"C55AD67FF8C2D7","user_header":"https://static001.geekbang.org/account/avatar/00/26/47/7b/c5ec018c.jpg","comment_is_top":false,"comment_ctime":1617937210,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1617937210","product_id":100023901,"comment_content":"è¯¾åæ€è€ƒï¼šsleepæ–¹æ³•é˜»å¡çº¿ç¨‹ï¼Œä¸é‡Šæ”¾é”ï¼›waitæ–¹æ³•é˜»å¡çº¿ç¨‹ï¼Œä¼šé‡Šæ”¾é”","like_count":0},{"had_liked":false,"id":277828,"user_name":"å±±æµ·","can_delete":false,"product_type":"c1","uid":1702117,"ip_address":"","ucode":"77FA9967E58FA3","user_header":"https://static001.geekbang.org/account/avatar/00/19/f8/e5/119d5c15.jpg","comment_is_top":false,"comment_ctime":1612609382,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1612609382","product_id":100023901,"comment_content":"å‡è®¾æˆ‘ä»¬æœ‰èµ„æº Aã€Bã€Cã€Dï¼Œçº¿ç¨‹ 1 ç”³è¯·åˆ°äº† ABï¼Œçº¿ç¨‹ 2 ç”³è¯·åˆ°äº† CDï¼Œæ­¤æ—¶çº¿ç¨‹ 3 ç”³è¯· ABï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆAB åˆ†é…ç»™çº¿ç¨‹ 1ï¼Œçº¿ç¨‹ 3 è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³ï¼‰ï¼Œçº¿ç¨‹ 4 ç”³è¯· CD ä¹Ÿä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚æˆ‘ä»¬å†å‡è®¾ä¹‹åçº¿ç¨‹ 1 å½’è¿˜äº†èµ„æº ABï¼Œå¦‚æœä½¿ç”¨ notify() æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹ 4ï¼Œä½†çº¿ç¨‹ 4 ç”³è¯·çš„æ˜¯ CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹ 3 å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†<br>-----------<br>è€å¸ˆï¼Œæˆ‘å¯¹è¿™æ®µè¯é€‚ç”¨notify()é£é™©é—®é¢˜ç†è§£ä¸æ˜¯å¾ˆé€å½»ï¼Œè™½ç„¶çº¿ç¨‹ABæ‰§è¡Œå®Œæ¯•ä¹‹åï¼ŒåŒå¿—å¯¹æ˜¯çº¿ç¨‹4ï¼Œä½†æ˜¯ä¸€æ—¦çº¿ç¨‹2æ‰§è¡Œç»“æŸåï¼Œåœ¨è¿›è¡Œnotifyåï¼Œ ä¹Ÿå¾ˆæœ‰å¯èƒ½å†æ¬¡é€šçŸ¥åˆ°çº¿ç¨‹3ï¼Œæ‰€ä»¥è¿™é‡Œåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜å¯¹ï¼Œä¸çŸ¥é“æˆ‘å¯¹ç†è§£å¯¹ä¸å¯¹","like_count":0},{"had_liked":false,"id":276943,"user_name":"å¼ æ»”","can_delete":false,"product_type":"c1","uid":1322636,"ip_address":"","ucode":"87ABAFF0E861E0","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","comment_is_top":false,"comment_ctime":1612186518,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612186518","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆnotifyAllä¹‹ååªæœ‰ä¸€ä¸ªçº¿ç¨‹è¢«æ‰§è¡Œäº†ï¼Ÿ     <br>        Object a = new Object();<br>        Object b = new Object();<br>        Object c = new Object();<br><br>        Allocator allocator = new Allocator();<br><br>        Thread t1 = new Thread(new Runnable() {<br>            @Override<br>            public void run() {<br>                allocator.apply(a,b);<br>                try {<br>                    Thread.sleep(30000);<br>                } catch (InterruptedException e) {<br>                    e.printStackTrace();<br>                }<br><br>                allocator.free(a,b);<br>            }<br>        });<br>        t1.start();<br><br>        Thread.sleep(1000);<br><br>        Thread t2 = new Thread(new Runnable() {<br>            @Override<br>            public void run() {<br>                allocator.apply(a,b);<br>                System.out.println(Thread.currentThread().getName());<br>            }<br>        });<br>        t2.start();<br><br>        Thread.sleep(1000);<br><br>        Thread t3 = new Thread(new Runnable() {<br>            @Override<br>            public void run() {<br>                allocator.apply(a,b);<br>                System.out.println(Thread.currentThread().getName());<br>            }<br>        });<br>        t3.start();","like_count":0},{"had_liked":false,"id":276934,"user_name":"å¼ æ»”","can_delete":false,"product_type":"c1","uid":1322636,"ip_address":"","ucode":"87ABAFF0E861E0","user_header":"https://static001.geekbang.org/account/avatar/00/14/2e/8c/b261e15a.jpg","comment_is_top":false,"comment_ctime":1612183510,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612183510","product_id":100023901,"comment_content":"ä¸¤ä¸ªé—®é¢˜ï¼š<br>1ã€è¢«notifyAllæˆ–notifyä¹‹åçš„çº¿ç¨‹æ˜¯ä¼šè¿›å…¥å·¦ä¾§ç­‰å¾…é˜Ÿåˆ—ä¸­å—ï¼Ÿ<br>2ã€è¢«notifyAllä¹‹åçš„è¿™äº›çº¿ç¨‹çš„æ‰§è¡Œæ˜¯æœ‰é¡ºåºçš„è¿˜æ˜¯éšæœºçš„ï¼Ÿå·¦ä¾§ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹è·å–äº’æ–¥é”æ˜¯éšæœºçš„è¿˜æ˜¯æœ‰é¡ºåºçš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":264134,"user_name":"@Dimples","can_delete":false,"product_type":"c1","uid":1520936,"ip_address":"","ucode":"91951FBFEB9B64","user_header":"https://static001.geekbang.org/account/avatar/00/17/35/28/c729d3ae.jpg","comment_is_top":false,"comment_ctime":1606359905,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606359905","product_id":100023901,"comment_content":"æ—¢ç„¶æ˜¯ç”¨äº†ç­‰å¾…é˜Ÿåˆ—ï¼Œé‚£synchronizedä¸å°±æˆäº†å…¬å¹³é”äº†å—ï¼Œæ¯æ¬¡éƒ½åœ¨é˜Ÿå¤´æ‹¿çº¿ç¨‹","like_count":0},{"had_liked":false,"id":261136,"user_name":"Geek_c75d82","can_delete":false,"product_type":"c1","uid":2286012,"ip_address":"","ucode":"81202A016FC5D2","user_header":"","comment_is_top":false,"comment_ctime":1605227052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605227052","product_id":100023901,"comment_content":"waitå¯ä»¥è¢«å”¤é†’ï¼Œsleepåªèƒ½ä¸€ç›´ç­‰","like_count":0},{"had_liked":false,"id":259974,"user_name":"xzy","can_delete":false,"product_type":"c1","uid":1002095,"ip_address":"","ucode":"1A44368083A19E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/6f/e36b3908.jpg","comment_is_top":false,"comment_ctime":1604901809,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604901809","product_id":100023901,"comment_content":"waitå’Œsleepçš„åŒºåˆ«<br>- wait éœ€è¦å†™åœ¨sychronizedä»£ç å—å†…ï¼Œsleepä¸éœ€è¦<br>- wait ä¼šé‡Šæ”¾é”ï¼Œsleepä¸ä¼š<br>- wait éœ€è¦å…¶ä»–çº¿ç¨‹è°ƒç”¨notifyæ–¹æ³•å”¤é†’","like_count":0},{"had_liked":false,"id":256588,"user_name":"lakeslove","can_delete":false,"product_type":"c1","uid":1277081,"ip_address":"","ucode":"65E14D29D3C981","user_header":"https://static001.geekbang.org/account/avatar/00/13/7c/99/4dac6ce6.jpg","comment_is_top":false,"comment_ctime":1603684622,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1603684622","product_id":100023901,"comment_content":"ä½¿ç”¨notifyæ—¶ï¼Œæ–‡ä¸­è¯´ï¼ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹ 3 å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ã€‚<br>ä½†æ˜¯å¦‚æœæ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯å…ˆæ‰§è¡Œapply()ï¼Œå†æ‰§è¡Œfree(),é‚£ä¹ˆæ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥èƒ½è¢«å”¤é†’å•Šï¼Œ<br>æ˜¯æˆ‘çš„æ¨ç†å“ªé‡Œå‡ºé—®é¢˜äº†å—ï¼Ÿ<br>æ¨ç†å¦‚ä¸‹ï¼š<br><br>ç­‰çº¿ç¨‹2æ‰§è¡Œå®Œäº†applyï¼Œé‡Šæ”¾äº†CDçš„é”ï¼Œ<br>å¦‚æœçº¿ç¨‹2è¿˜æ²¡æ‰§è¡Œfreeæ—¶ï¼Œçº¿ç¨‹4å¼€å§‹æ‰§è¡Œapplyï¼Œé‚£ä¹ˆçº¿ç¨‹4æ‰§è¡Œåˆ°waitç»§ç»­ç­‰å¾…ï¼Œæ­¤æ—¶çº¿ç¨‹2æ‰§è¡Œäº†freeï¼Œå¯èƒ½é€šçŸ¥çº¿ç¨‹3ï¼Œä¹Ÿå¯èƒ½é€šçŸ¥çº¿ç¨‹4ï¼Œåæ­£å°±æ˜¯çº¿ç¨‹3å’Œ4ï¼Œæ€»æœ‰ä¸€ä¸ªæ²¡è¢«é€šçŸ¥åˆ°ï¼Œä½†æ˜¯è¢«é€šçŸ¥çš„æ€»ä¼šæ‰§è¡Œfreeï¼Œè¿›è€Œé€šçŸ¥å‰©ä¸‹çš„é‚£ä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šæ‰§è¡Œï¼Œæ²¡é—®é¢˜ã€‚<br>å¦‚æœçº¿ç¨‹2å·²ç»æ‰§è¡Œäº†freeï¼Œçº¿ç¨‹4å¼€å§‹æ‰§è¡Œapplyï¼Œé‚£ä¹ˆçº¿ç¨‹4æ‰§è¡Œapplyåˆ°waitä¸ä¼šç­‰å¾…ï¼Œçº¿ç¨‹4æ‰§è¡Œå®Œapplyåç»§ç»­æ‰§è¡Œfreeï¼Œæ­¤æ—¶ä¼šé€šçŸ¥å”¯ä¸€å‰©ä¸‹çš„çº¿ç¨‹3ï¼Œï¼Œæ‰€ä»¥æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šæ‰§è¡Œï¼Œä¹Ÿæ²¡é—®é¢˜ã€‚<br><br>æ‰€ä»¥é—®é¢˜åˆ°åº•åœ¨å“ªï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2618910,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/f6YBFBbXurWa9NJr42Z3Hfic223qsEVpAghY0W7DU2cRUicmKvg1QHsjPGRBP90wjV1yAGC8dzerRJcwribB0ibVlQ/132","nickname":"Geek_95323e","note":"","ucode":"92EFD57A73C726","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373894,"discussion_content":"æ²¡é—®é¢˜,åˆ«æƒ³äº† ä¾‹å­æœ‰é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620908769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":255952,"user_name":"bidinggong","can_delete":false,"product_type":"c1","uid":1898806,"ip_address":"","ucode":"789A1FBA8408F3","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f9/36/f44b633e.jpg","comment_is_top":false,"comment_ctime":1603465354,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1603465354","product_id":100023901,"comment_content":"çº¿ç¨‹åä½œæ–¹å¼åœ¨å¾ˆå¤šæƒ…å†µä¸‹éƒ½å¯ä»¥ç”¨ç­‰å¾… - é€šçŸ¥æœºåˆ¶æ¥ä¼˜åŒ–ã€‚Java è¯­è¨€å†…ç½®çš„ synchronized é…åˆ wait()ã€notify()ã€notifyAll() è¿™ä¸‰ä¸ªæ–¹æ³•å¯ä»¥å¿«é€Ÿå®ç°è¿™ç§æœºåˆ¶","like_count":0},{"had_liked":false,"id":245576,"user_name":"ç½—æ¨±ç½‚","can_delete":false,"product_type":"c1","uid":2045997,"ip_address":"","ucode":"9072E79E625ED1","user_header":"https://static001.geekbang.org/account/avatar/00/1f/38/2d/f3c6493e.jpg","comment_is_top":false,"comment_ctime":1598988959,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598988959","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹aqsçš„æ ¸å¿ƒæ˜¯ä¸æ˜¯å°±æ˜¯stateï¼Œ åŒæ­¥é˜Ÿåˆ—ï¼Œç­‰å¾…é˜Ÿåˆ—ä¸‰ä¸ªï¼Ÿç„¶åçº¿ç¨‹ä¸»è¦åœ¨åŒæ­¥å¯¹äº†å’Œç­‰å¾…é˜Ÿåˆ—ä¸­æ¥å›åˆ‡æ¢ï¼Ÿæˆ‘åœ¨å…¶ä»–ç½‘ç«™ä¸ŠæŸ¥äº†å¾ˆå¤šç›¸å…³èµ„æ–™ã€‚æœ‰äº›éƒ½æ˜¯é˜Ÿåˆ—ä¸¤ä¸‰å¥è¯å°±æ”¹åå­—äº†ã€‚ã€‚ã€‚è¿˜æœ‰è¯´ é˜»å¡é˜Ÿåˆ—ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ç­‰å¾…é˜Ÿåˆ—ï¼Ÿ","like_count":0},{"had_liked":false,"id":242673,"user_name":"fightingD","can_delete":false,"product_type":"c1","uid":1443637,"ip_address":"","ucode":"AD2876CED5D5AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKwViav94kcF50CxA0Jw7icicxociaVzut97iacy3b2ciacFqXuFWdiakVq304YcI8pt4HT5A1Yvp8EkYCpw/132","comment_is_top":false,"comment_ctime":1597807489,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597807489","product_id":100023901,"comment_content":"wait()ä¼šé‡Šæ”¾è·å–çš„é”ï¼Œsleep()å¹¶ä¸ä¼šé‡Šæ”¾é”","like_count":0},{"had_liked":false,"id":242291,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1597661302,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1597661302","product_id":100023901,"comment_content":"ä¸ªäººæ„Ÿè§‰ï¼šè¿™3å¯èƒ½ä¼šè¢«å”¤é†’ï¼Œ ä½†æ˜¯æ¡ä»¶æ˜¯ä¸ç¬¦åˆçš„ï¼Œ æ‰€ä»¥æ˜¯æœ‰æœºä¼šå”¤é†’ï¼Œè€Œæ²¡æœºä¼šæ‰§è¡Œäº†ã€‚<br><br><br><br>å‡è®¾æˆ‘ä»¬æœ‰èµ„æº Aã€Bã€Cã€Dï¼Œçº¿ç¨‹ 1 ç”³è¯·åˆ°äº† ABï¼Œçº¿ç¨‹ 2 ç”³è¯·åˆ°äº† CDï¼Œæ­¤æ—¶çº¿ç¨‹ 3 ç”³è¯· ABï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆAB åˆ†é…ç»™çº¿ç¨‹ 1ï¼Œçº¿ç¨‹ 3 è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³ï¼‰ï¼Œçº¿ç¨‹ 4 ç”³è¯· CD ä¹Ÿä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚æˆ‘ä»¬å†å‡è®¾ä¹‹åçº¿ç¨‹ 1 å½’è¿˜äº†èµ„æº ABï¼Œå¦‚æœä½¿ç”¨ notify() æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹ 4ï¼Œä½†çº¿ç¨‹ 4 ç”³è¯·çš„æ˜¯ CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹ 3 å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ã€‚<br><br><br>","like_count":0},{"had_liked":false,"id":241917,"user_name":"prepared","can_delete":false,"product_type":"c1","uid":1194853,"ip_address":"","ucode":"00E54A5C7CDCBE","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/65/3a4fc8cf.jpg","comment_is_top":false,"comment_ctime":1597500076,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597500076","product_id":100023901,"comment_content":"waitéœ€è¦é€šçŸ¥ï¼Œæ‰ä¼šé‡æ–°å¯åŠ¨ï¼›<br>sleepæ˜¯ç¡çœ ä¸€æ®µæ—¶é—´ï¼Œè‡ªåŠ¨é‡æ–°å¯åŠ¨","like_count":0},{"had_liked":false,"id":222094,"user_name":"å¤å¤œ","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1590676063,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590676063","product_id":100023901,"comment_content":"é‚£çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œè¯¥æ€ä¹ˆé€šçŸ¥è¿™ä¸ªç­‰å¾…çš„çº¿ç¨‹å‘¢ï¼Ÿ<br>è¿™é‡Œçš„çº¿ç¨‹è¦æ±‚å†™é”™äº†å§ï¼Œåº”è¯¥æ˜¯ä¸´ç•ŒåŒºè¦æ±‚å§","like_count":0},{"had_liked":false,"id":216860,"user_name":"UniqueDirt","can_delete":false,"product_type":"c1","uid":2001375,"ip_address":"","ucode":"1E5555EE495733","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkDobVTaXD0oWouJBHQQSvnicJnzfZ7cSKmZeV20svZ7uWKGkibnL8xXiaOPRPYP7IibVIWPaCBDhjMw/132","comment_is_top":false,"comment_ctime":1589355991,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589355991","product_id":100023901,"comment_content":"notifyAll()å”¤é†’çš„é¡ºåºåº”è¯¥æ˜¯ä»åè‡³å‰çš„ï¼Œ ä¾‹å¦‚çº¿ç¨‹T1 åœ¨1è¿™ä¸ªæ—¶é—´ç‚¹wait, T2åœ¨2è¿™ä¸ªæ—¶é—´ç‚¹waitï¼ŒT3åœ¨3è¿™ä¸ªæ—¶é—´ç‚¹waitï¼Œæ—¶é—´1 æ—©äº æ—¶é—´2 æ—©äºæ—¶é—´3ï¼›é‚£ä¹ˆè°ƒç”¨notifyä¹‹åå”¤é†’çš„é¡ºåºåº”è¯¥æ˜¯T3&gt;T2&gt;T1;å› ä¸ºwhileçš„å­˜åœ¨ï¼Œæ­¤æ¬¡å„çº¿ç¨‹waitçš„æ—¶é—´ç‚¹é¡ºåºï¼ˆé™¤çœŸæ­£å”¤é†’çš„çº¿ç¨‹ä¹‹å¤–ï¼‰å‘ç”Ÿäº†è°ƒæ¢ï¼Œä»è€Œä¿è¯äº†æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯æœ‰æœºä¼šçœŸæ­£å”¤é†’çš„ï¼Œä¸”åœ¨æ—¶é—´ä¸Šæ›´ä¸ºåˆç†ï¼Œé¿å…äº†notifyéšæœºå”¤é†’çš„ä¸å…¬å¹³æœºåˆ¶","like_count":0},{"had_liked":false,"id":213880,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1008071,"ip_address":"","ucode":"9FE5F43055D3AB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/c7/b64ac05e.jpg","comment_is_top":false,"comment_ctime":1588583250,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588583250","product_id":100023901,"comment_content":"wait() æ“ä½œå·¥ä½œåŸç†å›¾ é‡Œçš„ å·¦è¾¹é˜Ÿåˆ—  å’Œå³è¾¹é˜Ÿåˆ—æ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—ä¹ˆ? è¿˜æ˜¯2ä¸ªä¸åŒçš„é˜Ÿåˆ—<br>1:å¦‚æœæ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—ä¸ºä»€ä¹ˆè¦åˆ†å·¦è¾¹å³è¾¹?<br>2:å¦‚æœæ˜¯2ä¸ªé˜Ÿåˆ—,ä¸Šé¢å†™äº† è¿™ä¸ªç­‰å¾…é˜Ÿåˆ—å’Œäº’æ–¥é”æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œæ¯ä¸ªäº’æ–¥é”éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ç­‰å¾…é˜Ÿåˆ—<br>è€Œè¿™é‡Œç”¨çš„æ˜¯åŒä¸€ä¸ªäº’æ–¥é” this,æ±‚è§£ç­”","like_count":0},{"had_liked":false,"id":209684,"user_name":"è§å—å±±","can_delete":false,"product_type":"c1","uid":1118111,"ip_address":"","ucode":"6A8BB82B7573CA","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/9f/f4b06bd5.jpg","comment_is_top":false,"comment_ctime":1587600893,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587600893","product_id":100023901,"comment_content":"ä¸¤è€…çš„ä½œç”¨ä¸ä¸€æ ·ï¼Œwaitæ˜¯éœ€è¦ä¸´ç•Œèµ„æºï¼Œé¿å…æ­»é”ä¼šé‡Šæ”¾é”ã€‚è€Œsleepä½œç”¨æ˜¯é˜»å¡è‡ªèº«çº¿ç¨‹ï¼Œå¹¶ä¸æ˜¯ç¼ºå°‘ä¸´ç•Œèµ„æºï¼Œè€Œæ˜¯è®©å‡ºcpuè®©å…¶ä»–éåŒä¸€æŠŠé”çš„çº¿ç¨‹æœ‰æœºä¼šæ‰§è¡Œã€‚","like_count":0},{"had_liked":false,"id":209257,"user_name":"bin.chen","can_delete":false,"product_type":"c1","uid":1135604,"ip_address":"","ucode":"5BA49358AB8A1A","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/f4/e277325d.jpg","comment_is_top":false,"comment_ctime":1587525308,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587525308","product_id":100023901,"comment_content":"waitå’Œsleepä»æœ¬è´¨åŒºåˆ«æ¥è¯´:ç­‰å¾…çš„æ—¶å€™æ˜¯å¦å¯ä»¥è®©åˆ«äººä½¿ç”¨å…±äº«èµ„æºçš„é—®é¢˜<br>è½¬è´¦é—®é¢˜ä»ä¸ŠèŠ‚çš„whileå¾ªåˆ°ç­‰å¾…é€šçŸ¥æœºåˆ¶è½¬æ¢åªæ˜¯ä¼˜åŒ–äº†åœ¨è½¬è´¦è¿‡ç¨‹ä¸­å…¶ä»–çº¿ç¨‹æ²¡æœ‰å¿…è¦å†å»ä¸€ç›´å°è¯•è·å–é”æ“ä½œèµ„æºï¼Œä»è€ŒèŠ‚çœäº†ä¸€ç›´å°è¯•è·å–é”å¸¦æ¥çš„è¿‡æ¸¡cpuæ¶ˆè€—å’Œæ€§èƒ½","like_count":0},{"had_liked":false,"id":206010,"user_name":"Eric W.Liu","can_delete":false,"product_type":"c1","uid":1960096,"ip_address":"","ucode":"8B394A3C1448BA","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e8/a0/14de6984.jpg","comment_is_top":false,"comment_ctime":1586772852,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586772852","product_id":100023901,"comment_content":"waitæ–¹æ³•ä¼šå®å»monitorçš„æ‰€æœ‰æƒï¼Œè€Œsleepä¸ä¼šå¤±å»monitorçš„æ‰€æœ‰æƒ","like_count":0},{"had_liked":false,"id":205606,"user_name":"ä½ å­˜åœ¨ï½æˆ‘è„‘æµ·é‡Œ","can_delete":false,"product_type":"c1","uid":1786377,"ip_address":"","ucode":"3E06D047764062","user_header":"https://static001.geekbang.org/account/avatar/00/1b/42/09/8cfa5a76.jpg","comment_is_top":false,"comment_ctime":1586683079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586683079","product_id":100023901,"comment_content":"waitã€sleepåŒºåˆ«ï¼š<br>1.waité‡Šæ”¾é”ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç»§ç»­äº‰å¤ºé”ï¼›sleepä¸é‡Šæ”¾é”ï¼Œåªæ˜¯ä¼‘çœ ä¸€æ®µæ—¶é—´ï¼Œå…¶ä»–çº¿ç¨‹ä»ç„¶åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­<br>2.synchronizeå’Œwaitã€notify&#47;notifyAllç›¸å½“äºç”¨äºå®ç°ç­‰å¾…ã€é€šçŸ¥æœºåˆ¶å›ºå®šçš„é»„é‡‘æ­æ¡£ã€‚æ•ˆæœåŒlock.newConditionï¼Œä¸è¿‡conditionå¯ä»¥å®ç°ç‰¹å®šèµ„æºé€šçŸ¥ï¼Œæ¯”å…¶æ›´åŠ å¼ºå¤§ã€‚<br>3.waitã€notify&#47;notifyAllæ–¹æ³•æ—¶Objectä¸­çš„æ–¹æ³•ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨ï¼ˆåœ¨synchronizeä¿®é¥°ä»£ç æ®µä¸­ï¼‰ï¼Œsleepæ˜¯Threadç±»çš„æ–¹æ³•ï¼Œç”¨äºæŒ‡å®šçº¿ç¨‹ä¼‘çœ ä¸€æ®µæ—¶é—´ï¼ˆç¡ä¸€ä¼šï¼‰ã€‚","like_count":0},{"had_liked":false,"id":205578,"user_name":"M","can_delete":false,"product_type":"c1","uid":1810576,"ip_address":"","ucode":"06F26E1D62E9C9","user_header":"https://wx.qlogo.cn/mmopen/vi_32/eLNeJNaEkwGSK7xvtamMibVLMy2MpbIqX3iaEhT7JtSnTRMRTwZ2j4HX7WAapiashbiaBDVriaXKSP0Oeic6ZAEVEXag/132","comment_is_top":false,"comment_ctime":1586677592,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586677592","product_id":100023901,"comment_content":"wait() ï¼šé”ç­‰å¾…ï¼Œä¼šé‡Šæ”¾é”ï¼Œé‡Šæ”¾èµ„æºï¼Œå…¶ä»–çº¿ç¨‹å¯é‡æ–°è·å–é”<br>sleep()ï¼šé”ç­‰å¾…ï¼Œä¸ä¼šé‡Šæ”¾é”ï¼Œå ç”¨èµ„æºï¼Œå…¶ä»–çº¿ç¨‹ç»§ç»­ç­‰å¾…","like_count":0},{"had_liked":false,"id":203800,"user_name":"Josey","can_delete":false,"product_type":"c1","uid":1813086,"ip_address":"","ucode":"BA461C259CC64B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/aa/5e/9be28107.jpg","comment_is_top":false,"comment_ctime":1586268279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586268279","product_id":100023901,"comment_content":"è€å¸ˆä½ ä¸Šé¢çš„ä¾‹å­ï¼Œè°ƒç”¨notifyAll()æ–¹æ³•çº¿ç¨‹3ä¸€å®šå¯ä»¥è·å–åˆ°é”å—ï¼Ÿæ˜¯æ‰€æœ‰ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹3å’Œ4è·å–åˆ°é”çš„æœºåˆ¶ç›¸ç­‰ï¼Œè¿˜æ˜¯åªæœ‰éœ€è¦ABæ¡ä»¶çš„çº¿ç¨‹3ä¼šè·å–åˆ°é”ï¼Ÿ","like_count":0},{"had_liked":false,"id":201598,"user_name":"xfun","can_delete":false,"product_type":"c1","uid":1070581,"ip_address":"","ucode":"A9A08E9EA6E13B","user_header":"https://static001.geekbang.org/account/avatar/00/10/55/f5/8d1588bd.jpg","comment_is_top":false,"comment_ctime":1585810046,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585810046","product_id":100023901,"comment_content":"ç¬¬ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—çš„çŠ¶æ€æ˜¯â€œåŒæ­¥é˜»å¡â€ï¼Œç¬¬äºŒä¸ªç­‰å¾…é˜Ÿåˆ—çŠ¶æ€æ˜¯â€œç­‰å¾…é˜»å¡â€ã€‚ä¸´ç•ŒåŒºè°ƒç”¨wait()åï¼Œçº¿ç¨‹è¿›å…¥ç­‰å¾…é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°notify() å’Œ notifyAll()è¢«è°ƒç”¨åï¼Œçº¿ç¨‹è¿›å…¥â€œåŒæ­¥é˜»å¡â€çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œnotify() å’Œ notifyAll()åçº¿ç¨‹æ˜¯å°±ç»ªçŠ¶æ€çš„ï¼Œè·Ÿå…¶ä»–çº¿ç¨‹ä¸€æ ·ï¼Œéœ€è¦å†æ¬¡æŠ¢å å¯¹è±¡é”ï¼Œæ‰èƒ½è¿›å…¥ä¸´ç•ŒåŒºã€‚","like_count":0},{"had_liked":false,"id":198826,"user_name":"Geek_c22199","can_delete":false,"product_type":"c1","uid":1441876,"ip_address":"","ucode":"1CE5B65513E360","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI2vn8hyjICTCletGs0omz28lhriaZKX2XX9icYzAEon2IEoRnlXqyOia2bEPP0j7T6xexTnr77JJic8w/132","comment_is_top":false,"comment_ctime":1585469785,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585469785","product_id":100023901,"comment_content":"æ„Ÿè§‰æœ‰ç‚¹ä¸å®Œç¾ï¼Œä¸å¦‚æŒ‰ä¸€å®šé¡ºåºåŠ é”","like_count":0},{"had_liked":false,"id":192587,"user_name":"Zain Zhu","can_delete":false,"product_type":"c1","uid":1125986,"ip_address":"","ucode":"5402E6FF76333A","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/62/ea49480e.jpg","comment_is_top":false,"comment_ctime":1584862182,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584862182","product_id":100023901,"comment_content":"è€å¸ˆç”¨ç°å®ä¸–ç•Œçš„é—®é¢˜åšç±»æ¯”è¿™ç‚¹å¾ˆé€‚åˆæˆ‘è¿™æ ·çš„ä½æ™ºå•†ç†è§£","like_count":0},{"had_liked":false,"id":191311,"user_name":"zhangchao","can_delete":false,"product_type":"c1","uid":1508339,"ip_address":"","ucode":"E665D153A85DE0","user_header":"https://static001.geekbang.org/account/avatar/00/17/03/f3/0bd094ad.jpg","comment_is_top":false,"comment_ctime":1584762352,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584762352","product_id":100023901,"comment_content":"è€å¸ˆè®²çš„å¤ªå¥½äº†","like_count":0},{"had_liked":false,"id":189639,"user_name":"Mr.wang","can_delete":false,"product_type":"c1","uid":1224805,"ip_address":"","ucode":"86F341A5316BBC","user_header":"https://static001.geekbang.org/account/avatar/00/12/b0/65/90387745.jpg","comment_is_top":false,"comment_ctime":1584537320,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1584537320","product_id":100023901,"comment_content":"waitæ˜¯objectçš„ç­‰å¾…æ–¹æ³•ï¼Œè€Œsleepæ˜¯çº¿ç¨‹çš„ç­‰å¾…æ–¹æ³•ï¼Œä¸¤ä¸ªæ–¹æ³•çš„å«ä¹‰ç›¸åŒï¼Œä½†æ˜¯ä½¿ç”¨æ–¹å¼å´å¤§å¤§ä¸åŒã€‚<br>sleepåªæ˜¯ä¼‘çœ çº¿ç¨‹ï¼Œä¸ä¼šé‡Šæ”¾çº¿ç¨‹ï¼Œä¼šè®©çº¿ç¨‹åœç•™åœ¨åŸåœ°ç­‰å€™ï¼Œè€Œwaitåˆ™ä¼šé‡Šæ”¾çº¿ç¨‹ï¼Œè®©ä»»åŠ¡è¿›å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ï¼Œç­‰åˆ°å…¶ä»–çš„çº¿ç¨‹å»å”¤é†’å®ƒã€‚","like_count":0},{"had_liked":false,"id":187302,"user_name":"é˜®å°‘","can_delete":false,"product_type":"c1","uid":1740204,"ip_address":"","ucode":"2F007C96CB60F9","user_header":"https://static001.geekbang.org/account/avatar/00/1a/8d/ac/8a428bd8.jpg","comment_is_top":false,"comment_ctime":1584079692,"is_pvip":false,"replies":[{"id":"72699","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1584356663,"ip_address":"","comment_id":187302,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584079692","product_id":100023901,"comment_content":"è¡¥å……ä¸€ç‚¹ï¼Œwaitæ–¹æ³•å¯ä»¥é‡Šæ”¾é”ï¼Œè€ŒnotifyAllæˆ–notify æ–¹æ³•æ˜¯ä¸é‡Šæ”¾é”çš„ã€‚æ‰€ä»¥æ‰§è¡Œé€šçŸ¥æ–¹æ³•æ—¶ï¼Œå¦‚æœå½“å‰åŒæ­¥ä»£ç å—æ²¡æœ‰èµ°å®Œçš„è¯ï¼Œwaitåé¢çš„æ–¹æ³•æ˜¯ç»§ç»­ç­‰å¾…çš„","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487067,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584356663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":187247,"user_name":"mlx","can_delete":false,"product_type":"c1","uid":1602505,"ip_address":"","ucode":"DFE9604B6639E8","user_header":"https://static001.geekbang.org/account/avatar/00/18/73/c9/721c0827.jpg","comment_is_top":false,"comment_ctime":1584069214,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1584069214","product_id":100023901,"comment_content":"ç”±äºä¸ªäººåœ¨å®é™…å·¥ä½œä¸­å¯¹äºå¹¶å‘ç¼–ç¨‹çš„å®é™…ç»éªŒå°‘ï¼Œè€Œå¯¹äºå¹¶å‘ç¼–ç¨‹çš„å­¦ä¹ ä¸ç†è§£åˆä¸æ˜¯å¤ªå¥½ã€‚çœ‹äº†è¿™ä¸ªä¸“é¢˜åæ„Ÿè§‰è€æ˜¯è®²çš„çœŸçš„æ˜¯å¥½ï¼Œé€šä¿—æ˜“æ‡‚ï¼ï¼ï¼","like_count":0},{"had_liked":false,"id":186254,"user_name":"å‰å®³äº†æˆ‘çš„å›½","can_delete":false,"product_type":"c1","uid":1052191,"ip_address":"","ucode":"CD0A54A1B998AA","user_header":"https://static001.geekbang.org/account/avatar/00/10/0e/1f/d0472177.jpg","comment_is_top":false,"comment_ctime":1583808757,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583808757","product_id":100023901,"comment_content":"è°ƒç”¨sleep()ä¼šè®©å½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´åç»§ç»­æ‰§è¡Œï¼Œå¦‚æœå æœ‰é”ä¸ä¼šé‡Šæ”¾ã€‚è°ƒç”¨wait()ä¼šç«‹åˆ»é‡Šæ”¾é”ï¼Œä»€ä¹ˆæ—¶å€™é†’ä¸ç¡®å®šï¼Œè¦ç­‰notify()é€šçŸ¥","like_count":0},{"had_liked":false,"id":185737,"user_name":"Daiver","can_delete":false,"product_type":"c1","uid":1466447,"ip_address":"","ucode":"9B1A03AFBC79BC","user_header":"https://static001.geekbang.org/account/avatar/00/16/60/4f/db0e62b3.jpg","comment_is_top":false,"comment_ctime":1583673086,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583673086","product_id":100023901,"comment_content":"waitä¼šé‡Šæ”¾é”ï¼Œsleepä¸ä¼šã€‚","like_count":0},{"had_liked":false,"id":179819,"user_name":"Geek_bb89c3","can_delete":false,"product_type":"c1","uid":1331828,"ip_address":"","ucode":"0F97B5B0F2DDD6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IZKGetBZDuMEa2VwwtesTELvLORIyV749ItgfAqNPv30n4zEv71wuGNr1aNVIVltG0icvH53DHDuqPuzNpiauWAg/132","comment_is_top":false,"comment_ctime":1582104521,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582104521","product_id":100023901,"comment_content":"while(als.contains(from) || als.contains(to))<br>{<br>      try{<br>          wait(); <br>            }catch(Exception e){ }<br> }<br>è¿™æ®µä»£ç æœ‰ä¸€äº›å¥‡æ€ªçš„åœ°æ–¹æ˜¯ã€‚å¦‚æœalsä¸­åŒ…å«ä»»ä½•ä¸€ä¸ªèµ„æºã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç­‰å¾…ã€‚<br>è¿™é‡Œå’Œå¦‚æœæ·»åŠ ä¸æˆç«‹ï¼Œå°±ç­‰å¾…ã€‚å‘½åè¿™é‡Œæ˜¯æˆç«‹çš„ä¸ºä»€ä¹ˆè¿˜éœ€è¦ç­‰å¾…å‘¢ï¼Ÿ<br>è¿™é‡Œéœ€è¦ç«™åœ¨å¤šçº¿ç¨‹çš„è§’åº¦æ¥æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚alsä¸­çš„å¯¹è±¡æ˜¯å…¶ä»–çš„çº¿ç¨‹åœ¨ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ã€‚<br>å¦‚æœå½“å‰çº¿ç¨‹æƒ³è¦è·å–åˆ°ä¸¤ä¸ªé”çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¯å½“å‰çº¿ç¨‹å°†è¿™ä¸¤ä¸ªå¯¹è±¡æ·»åŠ è¿›å»çš„æ‰è¡Œã€‚<br>åŒæ—¶ä¹Ÿè¯´æ˜ï¼Œè¿™å„ä¸ªå¯¹è±¡æ­£åœ¨è¢«å…¶ä»–çš„å¯¹è±¡ä½¿ç”¨å½“ä¸­ã€‚","like_count":0},{"had_liked":false,"id":179807,"user_name":"Geek_bb89c3","can_delete":false,"product_type":"c1","uid":1331828,"ip_address":"","ucode":"0F97B5B0F2DDD6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IZKGetBZDuMEa2VwwtesTELvLORIyV749ItgfAqNPv30n4zEv71wuGNr1aNVIVltG0icvH53DHDuqPuzNpiauWAg/132","comment_is_top":false,"comment_ctime":1582102825,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582102825","product_id":100023901,"comment_content":"Thread.sleep()è¡¨ç¤ºå½“å‰çº¿ç¨‹é˜»å¡ä¸€æ®µæ—¶é—´ã€‚ç„¶åé‡æ–°ç­‰å¾…è°ƒåº¦ã€‚è¿™ä¸ªå½“ä¸­æ˜¯ä¼šæŒæœ‰é”çš„ã€‚<br>object.waitï¼ˆï¼‰æ–¹æ³•è¡¨ç¤ºåœ¨ä¸´ç•ŒåŒºä»£ç ä¸æ»¡è¶³æ¡ä»¶ã€‚é‡Šæ”¾é”ï¼Œç„¶åæ·»åŠ åˆ°objectçš„waité˜Ÿåˆ—ä¸­ã€‚ç„¶åç­‰å¾…object.notifyæ–¹æ³•å”¤é†’è¿™ä¸ªé˜Ÿåˆ—é‡æ–°å»äº‰é”ã€‚","like_count":0},{"had_liked":false,"id":170105,"user_name":"ä¸‡äº‹å±‹","can_delete":false,"product_type":"c1","uid":1105854,"ip_address":"","ucode":"57C08B85373B0D","user_header":"https://static001.geekbang.org/account/avatar/00/10/df/be/c6f8953f.jpg","comment_is_top":false,"comment_ctime":1578532354,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578532354","product_id":100023901,"comment_content":"è€å¸ˆï¼Œçœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œä»–è¯´notifyallä¸ä¼šå”¤é†’å…¨éƒ¨<br>https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;zAYN95p0YvGhhlcW4xCqhw","like_count":0},{"had_liked":false,"id":169716,"user_name":"jason","can_delete":false,"product_type":"c1","uid":1167872,"ip_address":"","ucode":"3329F08BAF307E","user_header":"https://static001.geekbang.org/account/avatar/00/11/d2/00/9a247b1e.jpg","comment_is_top":false,"comment_ctime":1578410800,"is_pvip":false,"replies":[{"id":"67026","content":"æ€»ç»“çš„å¾ˆåˆ°ä½ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1579316213,"ip_address":"","comment_id":169716,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578410800","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­è¯´åˆ°äº†ä½¿ç”¨notify()çš„é£é™©ã€‚æˆ‘è§‰å¾—è¿™ä¸ªé£é™©çš„åŸå› åœ¨äºï¼Œå¤„äºåŒä¸€ç­‰å¾…é˜Ÿåˆ—çš„æ‰€æœ‰çº¿ç¨‹ï¼Œå®ƒä»¬è¿›å…¥ç­‰å¾…é˜Ÿåˆ—æ—¶çš„æ¡ä»¶æ˜¯ä¸åŒçš„ã€‚<br><br>å¦‚æœæ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å› ä¸ºä¸æ»¡è¶³åŒä¸€ä¸ªæ¡ä»¶è€Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨notify()ï¼Œå•ç‹¬é€šçŸ¥ä¸€ä¸ªçº¿ç¨‹ã€‚ä½¿ç”¨notify()çš„å¥½å¤„æ˜¯ï¼Œä½¿å°½é‡å°‘çš„çº¿ç¨‹è¢«è°ƒåº¦åˆ°åŒæ­¥é˜Ÿåˆ—ï¼Œè¿™æ ·å°±å‡å°‘äº†é”ç«äº‰ï¼Œå‡å°‘äº†åŒæ­¥é˜Ÿåˆ—çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480688,"discussion_content":"æ€»ç»“çš„å¾ˆåˆ°ä½ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579316213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158515,"user_name":"TTY","can_delete":false,"product_type":"c1","uid":1206935,"ip_address":"","ucode":"D097636D322215","user_header":"https://static001.geekbang.org/account/avatar/00/12/6a/97/9422bf31.jpg","comment_is_top":false,"comment_ctime":1575391336,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575391336","product_id":100023901,"comment_content":"è¿™é‡Œè¯´ä¸€ä¸‹å…³äºwhile(als.contains(from) || als.contains(to))æˆ‘çš„ç†è§£ï¼Œæˆ‘ä¹Ÿæ˜¯çœ‹äº†å¥½ä¹…ï¼Œç¿»äº†å¥½å¤šéè¯„è®ºæ‰çœ‹æ‡‚ã€‚<br><br>é¦–å…ˆæœ‰ä¸¤ç‚¹å¤§å®¶éœ€è¦æ˜ç™½ï¼š<br>1. Allocatorå¯¹è±¡actråªæœ‰ä¸€ä¸ªï¼Œå› ä¸ºæ˜¯å•ä¾‹ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œçš„æ˜¯åŒä¸€ä¸ªactrã€‚<br>2. actræ˜¯èµ„æºåˆ†é…è€…ï¼Œè€Œä¸æ˜¯èµ„æºè¯·æ±‚è€…ã€‚<br><br>å‡å¦‚æœ‰ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨actr.apply(this, target)ã€‚<br>1. å¦‚æœapply()æˆå‘˜å‡½æ•°è¿”å›çš„è¯ï¼Œè¯´æ˜actrå¯¹è±¡å°†fromå’Œthiséƒ½æ·»åŠ è¿›äº†alsä¸­ã€‚ä¸‹ä¸€æ­¥å°†æ˜¯å¯¹thiså’ŒtargetåŠ é”ï¼Œè¿›è¡Œä¸šåŠ¡å¤„ç†ï¼Œæœ€åè°ƒç”¨actr.free(this, target)ï¼›<br>2. å¦‚æœapply()æˆå‘˜å‡½æ•°é˜»å¡çš„è¯ï¼Œè¯´æ˜alsä¸­åŒ…å«fromæˆ–è€…thisæˆ–è€…ä¸¤è€…ï¼Œå³whileæ¡ä»¶æˆç«‹ã€‚è¿™è¯´æ˜ä»€ä¹ˆï¼Ÿè¯´æ˜æ­¤æ—¶å·²ç»æœ‰å¦å¤–ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†actr.apply(this, target)ä¸”è¿”å›äº†ï¼Œä½†è¿˜æœªè°ƒç”¨actr.free(this, target)å°†thiså’Œtargetä»alsä¸­ç§»é™¤ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªçº¿ç¨‹éœ€è¦é˜»å¡ç­‰å¾…ï¼Œå› ä¸ºæ­¤æ—¶alsä¸­çš„thisæˆ–è€…targetå¹¶ä¸æ˜¯ç¬¬ä¸€ä¸ªçº¿ç¨‹æ·»åŠ è¿›alsä¸­çš„ã€‚<br><br>è¿™é‡Œè¯´ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œä»…ä¾›åŠ æ·±ç†è§£ï¼Œæ¯•ç«Ÿåº”è¯¥æ²¡äººä¼šè¿™ä¹ˆå†™ï¼š<br>å¦‚æœä¸€ä¸ªçº¿ç¨‹è¿ç»­ä¸¤æ¬¡è°ƒç”¨actr.apply(this, target)ï¼Œåœ¨ä¸¤æ¬¡è°ƒç”¨actr.apply(this, target)è¯­å¥ä¹‹é—´æ²¡æœ‰è°ƒç”¨actr.free(this, target)ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹å°†æ°¸ä¹…é˜»å¡ï¼Œåœ¨è¿™ä¹‹åï¼Œå…¶ä»–è°ƒç”¨äº†actr.apply(this, target)çš„æ‰€æœ‰çº¿ç¨‹ä¹Ÿå°†æ°¸ä¹…é˜»å¡ã€‚è¿˜æ˜¯è¦æ³¨æ„è¿™é‡Œactræ˜¯å•ä¾‹ï¼Œåªæœ‰ä¸€ä¸ªï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«è¿™ä¸€ä¸ªactrå¯¹è±¡ã€‚<br><br>å¦‚æœæœ‰è®²çš„ä¸å¯¹çš„åœ°æ–¹ï¼Œéº»çƒ¦æŒ‡æ­£ã€‚","like_count":0},{"had_liked":false,"id":152376,"user_name":"ã€‚","can_delete":false,"product_type":"c1","uid":1337641,"ip_address":"","ucode":"2012A6830EAEE0","user_header":"https://static001.geekbang.org/account/avatar/00/14/69/29/dfe2988e.jpg","comment_is_top":false,"comment_ctime":1573985983,"is_pvip":false,"replies":[{"id":"67117","content":"ä¸€æ—¦æœ‰æƒåˆ©æ‰§è¡Œï¼Œå°±ä¸€å®šæŒæœ‰å½“å‰é”","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1579438354,"ip_address":"","comment_id":152376,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1573985983","product_id":100023901,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜<br>é€šè¿‡notifyAllå”¤é†’çš„å³ä¾§ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæ˜¯ç»§ç»­åœ¨wait()æ–¹æ³•åæ‰§è¡Œçš„ï¼Œé‚£ä»–æ˜¯å¦æŒæœ‰å½“å‰é”å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474795,"discussion_content":"ä¸€æ—¦æœ‰æƒåˆ©æ‰§è¡Œï¼Œå°±ä¸€å®šæŒæœ‰å½“å‰é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579438354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149993,"user_name":"æœ•çˆ±å¾å¦ƒ","can_delete":false,"product_type":"c1","uid":1733692,"ip_address":"","ucode":"B10EB69934F9E2","user_header":"https://static001.geekbang.org/account/avatar/00/1a/74/3c/da79d2a1.jpg","comment_is_top":false,"comment_ctime":1573442559,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573442559","product_id":100023901,"comment_content":"waitä¸sleepçš„åŒºåˆ«ï¼š<br>1. waitæ–¹æ³•æ˜¯Objectç±»ä¸­çš„æ–¹æ³•ï¼Œè€Œsleepæ˜¯Threadç±»é‡Œçš„æ–¹æ³•<br>2. waitæ–¹æ³•ä¼šä¸»åŠ¨é‡Šæ”¾é”èµ„æºï¼Œè€Œsleepæ–¹æ³•åˆ™æ˜¯è®©çº¿ç¨‹ç¡çœ ï¼Œä½†ä¸ä¼šé‡Šæ”¾é”èµ„æº<br>3. waitæ–¹æ³•å¯ä»¥æŒ‡å®šä»€ä¹ˆæ—¶å€™é‡Šæ”¾èµ„æºï¼Œè€Œsleepä¸èƒ½æŒ‡å®šï¼Œåªèƒ½é»˜é»˜ç­‰å¾…<br>4. waitæ–¹æ³•å¿…é¡»åœ¨è·å–é”èµ„æºåæ‰èƒ½ä½¿ç”¨ï¼Œè€Œsleepåˆ™ä¸éœ€è¦","like_count":0},{"had_liked":false,"id":149542,"user_name":"Sundayge","can_delete":false,"product_type":"c1","uid":1572264,"ip_address":"","ucode":"6A125D700CBDAB","user_header":"","comment_is_top":false,"comment_ctime":1573269620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573269620","product_id":100023901,"comment_content":"æˆ‘è§‰å¾—çº¿ç¨‹çš„é˜»å¡å’Œç­‰å¾…çŠ¶æ€æè¿°çš„ä¸å¤ªæ¸…æ™°ï¼Œå½“10ä¸ªçº¿ç¨‹äº‰æŠ¢åŒä¸€æŠŠé”çš„æ—¶å€™ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°é”ï¼Œé‚£ä¹ˆå…¶ä»–çš„9ä¸ªçº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ã€‚<br>å½“åŒæ­¥ä»£ç å—ä¸­è°ƒç”¨äº†waitæ–¹æ³•çš„æ—¶å€™ï¼Œçº¿ç¨‹ä¼šæ”¾åˆ°åŒæ­¥é˜Ÿåˆ—ä¸­(ä¹Ÿå°±æ˜¯æ–‡ç« ä¸­è¯´çš„å³è¾¹çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯åŒºåˆ†ä¸‹å¥½ï¼Œä¸ç„¶å…¨å«ç­‰å¾…é˜Ÿåˆ—å¤§å®¶éƒ½æ™•äº†)ï¼Œæ­¤æ—¶çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€(è¿™ä¸ªçŠ¶æ€å«ç­‰å¾…æˆ‘è§‰å¾—æ›´å¥½ï¼Œå› ä¸ºæ­¤æ—¶çš„çº¿ç¨‹è¿è·å–é”çš„æƒåˆ©éƒ½æ²¡æœ‰)ï¼Œå½“çº¿ç¨‹è¢«å”¤é†’æ—¶åˆ™å†æ¬¡å–äº‰æŠ¢é”ã€‚","like_count":0},{"had_liked":false,"id":147538,"user_name":"è€ƒä¼‘","can_delete":false,"product_type":"c1","uid":1053955,"ip_address":"","ucode":"968DFC00D6D0CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","comment_is_top":false,"comment_ctime":1572868818,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572868818","product_id":100023901,"comment_content":"æ•²é»‘æ¿ï¼<br>Javaå¹¶å‘ç¼–ç¨‹ä¸­çš„wait()ã€notify()ã€notifyAll()ä¸‰ä¸ªæ–¹æ³•æ‰§è¡Œä¸»ä½“éƒ½æ˜¯è¢«é”å®šçš„å¯¹è±¡ï¼åƒä¸‡ä¸è¦ææ··äº†ï¼","like_count":0},{"had_liked":false,"id":146030,"user_name":"Garwen","can_delete":false,"product_type":"c1","uid":1045062,"ip_address":"","ucode":"C76346E1734AB8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f2/46/09c457eb.jpg","comment_is_top":false,"comment_ctime":1572422014,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1572422014","product_id":100023901,"comment_content":"è€å¸ˆï¼Œåœ¨allocatorè¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“æˆ‘ä»¬è°ƒç”¨äº†notifyallä¹‹åï¼Œåº”è¯¥æ˜¯å”¤é†’äº†å›¾ä¸­å³ä¾§çš„ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œç„¶åä»sychronizedä¸­é€€å‡ºï¼Œé‡Šæ”¾äº†é”ï¼Œé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€ï¼Œå›¾ä¸­å³ä¾§çš„ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹å…¶å®æ˜¯æ¯”å·¦ä¾§ä»æœªè·å–è¿‡é”çš„çº¿ç¨‹åœ¨æ—¶é—´ä¸Šä¼šæå‰è·å–åˆ°é”æ‰§è¡Œå‘¢ã€‚","like_count":0},{"had_liked":false,"id":144928,"user_name":"è¯·å«æˆ‘ç´«çš®ä¹¦","can_delete":false,"product_type":"c1","uid":1203288,"ip_address":"","ucode":"29F98AB3A5D98E","user_header":"https://static001.geekbang.org/account/avatar/00/12/5c/58/590d0a43.jpg","comment_is_top":false,"comment_ctime":1572097713,"is_pvip":false,"replies":[{"id":"56147","content":"æœ‰æœºä¼šï¼Œé‚£æ ·çº¿ç¨‹4å°±æ²¡æœºä¼šäº†ã€‚ä¸€ä¸ªèåœä¸€ä¸ªå‘ï¼Œæœ‰ä¸ªå‘è¢«æµªè´¹äº†ï¼Œæ€»æœ‰ä¸€ä¸ªèåœæ‰¾ä¸åˆ°å‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1572310211,"ip_address":"","comment_id":144928,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572097713","product_id":100023901,"comment_content":"â€œå‡è®¾æˆ‘ä»¬æœ‰èµ„æº Aã€Bã€Cã€Dï¼Œçº¿ç¨‹ 1 ç”³è¯·åˆ°äº† ABï¼Œçº¿ç¨‹ 2 ç”³è¯·åˆ°äº† CDï¼Œæ­¤æ—¶çº¿ç¨‹ 3 ç”³è¯· ABï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆAB åˆ†é…ç»™çº¿ç¨‹ 1ï¼Œçº¿ç¨‹ 3 è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³ï¼‰ï¼Œçº¿ç¨‹ 4 ç”³è¯· CD ä¹Ÿä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚æˆ‘ä»¬å†å‡è®¾ä¹‹åçº¿ç¨‹ 1 å½’è¿˜äº†èµ„æº ABï¼Œå¦‚æœä½¿ç”¨ notify() æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹ 4ï¼Œä½†çº¿ç¨‹ 4 ç”³è¯·çš„æ˜¯ CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹ 3 å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ã€‚â€ è€å¸ˆï¼Œè¿™é‡Œçº¿ç¨‹3æ˜¯ä¸æ˜¯åº”è¯¥è¿˜æœ‰æœºä¼šå”¤é†’ï¼Œæ¯”å¦‚çº¿ç¨‹2åœ¨notifyçš„æ—¶å€™å”¤é†’äº†çº¿ç¨‹3ï¼Œæˆ‘ç†è§£è¿™æ ·æ˜¯å¯ä»¥çš„ï¼Œè¯·æŒ‡æ­£","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472169,"discussion_content":"æœ‰æœºä¼šï¼Œé‚£æ ·çº¿ç¨‹4å°±æ²¡æœºä¼šäº†ã€‚ä¸€ä¸ªèåœä¸€ä¸ªå‘ï¼Œæœ‰ä¸ªå‘è¢«æµªè´¹äº†ï¼Œæ€»æœ‰ä¸€ä¸ªèåœæ‰¾ä¸åˆ°å‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572310211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144912,"user_name":"è€€æ˜","can_delete":false,"product_type":"c1","uid":1446437,"ip_address":"","ucode":"99D03E4547EB70","user_header":"https://static001.geekbang.org/account/avatar/00/16/12/25/f9cdf7e9.jpg","comment_is_top":false,"comment_ctime":1572090941,"is_pvip":false,"replies":[{"id":"55882","content":"ä»‹ç»ç®¡ç¨‹çš„æ—¶å€™ï¼Œä¼šè®²åˆ°è¿™ä¸ªé—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1572098156,"ip_address":"","comment_id":144912,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1572090941","product_id":100023901,"comment_content":"&#47;&#47; å½’è¿˜èµ„æº  synchronized void free(    Object from, Object to){      notifyAll();  ...... }<br>è€å¸ˆ è¯·é—®æ‰§è¡Œäº†notifyAll()åä¼šç«‹åˆ»é€šçŸ¥å…¶å®ƒé˜»å¡çš„çº¿ç¨‹å—ï¼Œå‡å¦‚notifyAll();åé¢è¿˜æœ‰æ‰§è¡Œçš„ä»£ç æ€ä¹ˆåŠï¼Œè¿™æ—¶å€™è¿˜æœªé‡Šæ”¾é”","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472162,"discussion_content":"ä»‹ç»ç®¡ç¨‹çš„æ—¶å€™ï¼Œä¼šè®²åˆ°è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572098156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144177,"user_name":"æ— è¨€çš„çº¦å®š","can_delete":false,"product_type":"c1","uid":1128953,"ip_address":"","ucode":"5E8046EB6B7956","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/f9/acfb9a48.jpg","comment_is_top":false,"comment_ctime":1571876109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571876109","product_id":100023901,"comment_content":"ABCDé‚£ä¸ªä¾‹å­ä¸­ï¼Œçº¿ç¨‹3å’Œçº¿ç¨‹4æ˜¯åœ¨å›¾ä¸­å·¦ä¾§çš„ç­‰å¾…é˜Ÿåˆ—è¿˜æ˜¯å³ä¾§çš„ç­‰å¾…é˜Ÿåˆ—å‘¢ï¼Ÿè¿™ä¸¤ä¸ªç­‰å¾…é˜Ÿåˆ—æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","like_count":0},{"had_liked":false,"id":142234,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1571317321,"is_pvip":false,"replies":[{"id":"54906","content":"æ²¡æœ‰ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1571360515,"ip_address":"","comment_id":142234,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1571317321","product_id":100023901,"comment_content":"æ„Ÿè§‰è€å¸ˆçš„æ–‡ç« æ˜¯ä¸æ˜¯æ”¹è¿‡ï¼Œè·Ÿç¬¬ä¸€æ¬¡çœ‹æ„Ÿè§‰æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œæ„Ÿè§‰è¡¥å……äº†äº›å†…å®¹ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471039,"discussion_content":"æ²¡æœ‰ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571360515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141775,"user_name":"è¿™å¾—ä»æˆ‘æ¡åˆ°ä¸€ä¸ªé¼ æ ‡å«å¼€å§‹è¯´èµ·","can_delete":false,"product_type":"c1","uid":1272321,"ip_address":"","ucode":"2FF4347B4E7A9B","user_header":"https://static001.geekbang.org/account/avatar/00/13/6a/01/d9cb531d.jpg","comment_is_top":false,"comment_ctime":1571223136,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1571223136","product_id":100023901,"comment_content":"ä¸ºä»€ä¹ˆwaitå’Œnotifyæ˜¯Objectçš„æ–¹æ³•è€Œä¸æ˜¯Threadçš„æ–¹æ³•","like_count":0},{"had_liked":false,"id":141681,"user_name":"Geek_be4cec","can_delete":false,"product_type":"c1","uid":1581294,"ip_address":"","ucode":"C87642D655EAC3","user_header":"","comment_is_top":false,"comment_ctime":1571210404,"is_pvip":false,"replies":[{"id":"54746","content":"ä¸€ç›´å¾ªç¯","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1571227354,"ip_address":"","comment_id":141681,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571210404","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¾‹å­ä¸­çš„ä¸‹å¥ä»£ç <br>while(als.contains(from)||als. als.contains(to)){<br>      wait();<br>}<br>whileæ¡ä»¶æ»¡è¶³æ—¶ï¼Œä¼šä¸ä¼šä¸€ç›´å¾ªç¯æ‰§è¡Œwaitï¼Œè¿˜æ˜¯æ‰§è¡Œä¸€æ¬¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470843,"discussion_content":"ä¸€ç›´å¾ªç¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571227354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140366,"user_name":"LGY001","can_delete":false,"product_type":"c1","uid":1188176,"ip_address":"","ucode":"29CA0F9501D3EC","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/50/265671fd.jpg","comment_is_top":false,"comment_ctime":1570893579,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570893579","product_id":100023901,"comment_content":"å¯¹äºèµ„æºåˆ†é…é—®é¢˜æˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼š<br>çº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œæ“ä½œæ—¶ï¼Œé¦–å…ˆéœ€è¦è·å–ä¸€ä¸ªé”å¯¹è±¡lockï¼Œè·å–é”å¯¹è±¡ä¹‹åæ‰èƒ½å¤Ÿè¿›è¡Œç›¸å…³çš„æ‰§è¡Œé€»è¾‘ï¼Œçº¿ç¨‹1è·å–åˆ°äº†é”å¯¹è±¡ï¼Œä½†æ˜¯æ‰§è¡Œç›¸å…³ä»»åŠ¡çš„é€»è¾‘éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œè€Œè¿™æ—¶ä¸æ»¡è¶³ï¼Œä¼šå¯¼è‡´è¯¥çº¿ç¨‹æ‰§è¡Œlock.wait()æ–¹æ³•ï¼ˆå³åŠ å…¥åˆ°æ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—ä¹‹ä¸­ï¼‰ï¼ŒåŒæ—¶é‡Šæ”¾é”å¯¹è±¡lock,çº¿ç¨‹2ç´§æ¥ç€è·å–é”å¯¹è±¡ï¼Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¹‹ä¸­ï¼ŒåŒæ ·å‘ç°ä¸æ»¡è¶³ç›¸å…³æ¡ä»¶ï¼Œæ‰§è¡Œlock.wait()æ–¹æ³•ï¼ˆåŠ å…¥åˆ°æ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—ä¹‹ä¸­ï¼Œæ­¤æ—¶æ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—é˜Ÿåˆ—ä¸­æœ‰ä¸¤ä¸ªé˜»å¡çš„é˜Ÿåˆ—ï¼‰ï¼Œçº¿ç¨‹3è·å–é”å¯¹è±¡ï¼Œæ‰§è¡Œäº†ç›¸å…³æ“ä½œï¼Œå¯èƒ½ä½¿æ¡ä»¶å˜é‡æ»¡è¶³ï¼Œä»è€Œæ‰§è¡Œnotify()æ–¹æ³•ï¼Œnotify()æ–¹æ³•ä¼šéšæœºå”¤é†’æ¡ä»¶å˜é‡ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯èƒ½æ­£å¥½å”¤é†’çš„ä¸æ˜¯å·²ç»æ»¡è¶³æ¡ä»¶çš„çº¿ç¨‹1è€Œæ˜¯çº¿ç¨‹2ï¼Œè€Œçº¿ç¨‹2åœ¨æ‰§è¡Œæ—¶ï¼Œå‘ç°ä»ç„¶ä¸æ»¡è¶³é‡æ–°åŠ å…¥æ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—ã€‚è¿™å°±ä¼šå¯¼è‡´çº¿ç¨‹1é¥¿æ­»ï¼Œæ— æ³•è¢«å”¤é†’çš„æƒ…å†µå‡ºç°ã€‚","like_count":0},{"had_liked":false,"id":140365,"user_name":"LGY001","can_delete":false,"product_type":"c1","uid":1188176,"ip_address":"","ucode":"29CA0F9501D3EC","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/50/265671fd.jpg","comment_is_top":false,"comment_ctime":1570892372,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570892372","product_id":100023901,"comment_content":"waitå’Œsleepæ–¹æ³•æ¯”è¾ƒï¼š<br>ç›¸åŒç‚¹ï¼š<br>- çº¿ç¨‹æ‰§è¡Œwaitæ–¹æ³•å’Œsleepæ–¹æ³•éƒ½ä¼šé˜»å¡å½“å‰çº¿ç¨‹<br>- çº¿ç¨‹æ‰§è¡Œwaitæ–¹æ³•å’Œsleepé˜»å¡çš„è¿‡ç¨‹ä¹‹ä¸­éƒ½èƒ½æ„Ÿå—åˆ°ä¸­æ–­ä¿¡å·ï¼Œä¼šæŠ›å‡ºInterruptedException.<br>ä¸åŒç‚¹ï¼š<br>- wait&#47;notifyã€notifyAllæ–¹æ³•å¿…é¡»åœ¨synchronizedå…³é”®å­—ä¿®é¥°çš„åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥ä»£ç å—ä¸­æ‰§è¡Œï¼Œè€Œsleepæ–¹æ³•ä¸éœ€è¦ï¼Œï¼ˆè¿™æ˜¯å› ä¸ºwaitç³»åˆ—æ–¹æ³•æ˜¯çº¿ç¨‹é—´åŒæ­¥æœºåˆ¶çš„ä¿è¯ï¼Œéœ€è¦ä¸€å®šçš„é¡ºåºæ€§ï¼Œè‹¥æ˜¯æ²¡æœ‰synchronizedä¿®é¥°ï¼Œå¯èƒ½ä¼šå‘ç”Ÿçº¿ç¨‹åœ¨æ‰§è¡Œwaitæ–¹æ³•ä¹‹å‰å‘ç”Ÿäº†åˆ‡æ¢ï¼Œå¯¼è‡´notifyæ–¹æ³•å…ˆäºwaitæ–¹æ³•æ‰§è¡Œï¼Œä»è€Œå¯¼è‡´åŸæ¥çš„çº¿ç¨‹é™·å…¥æ­»é”æˆ–è€…ä¸èƒ½å”¤é†’çš„æƒ…å†µã€‚é™¤æ­¤ä¹‹å¤–ï¼Œwaitç³»åˆ—æ–¹æ³•æ“ä½œçš„å¯¹è±¡é¡»æ˜¯synchronizedé”å¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ›å‡ºIllegalMonitorStateExceptionï¼‰<br>- waitæ–¹æ³•ä¼šé‡Šæ”¾é”å¯¹è±¡ï¼Œè¯¥çº¿ç¨‹å¯èƒ½åœ¨ä¸€æ®µæ—¶å€™åè¢«å”¤é†’ï¼Œä¹Ÿå¯èƒ½è¢«é¥¿æ­»ï¼›è€Œsleepæ–¹æ³•å¹¶ä¸ä¼šé‡Šæ”¾é”å¯¹è±¡ï¼Œåœ¨ä¸€å®šçš„æ—¶é—´ï¼ˆç¡®å®šçš„ï¼‰åè¯¥çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œã€‚<br>- waitæ–¹æ³•å±äºObjectç±»çš„æ–¹æ³•ï¼Œè€Œsleepæ–¹æ³•å±äºThreadç±»çš„æ–¹æ³•ã€‚waitç³»åˆ—æ–¹æ³•æ“ä½œçš„å¯¹è±¡æ˜¯é”å¯¹è±¡ï¼Œè€Œä¸€ä¸ªçº¿ç¨‹ä¹‹ä¸­å¯èƒ½æœ‰å¤šä¸ªé”å¯¹è±¡<br>","like_count":0},{"had_liked":false,"id":137885,"user_name":"245864982","can_delete":false,"product_type":"c1","uid":1238485,"ip_address":"","ucode":"AC47075A95B759","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/d5/680402fd.jpg","comment_is_top":false,"comment_ctime":1569904732,"is_pvip":false,"replies":[{"id":"53013","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1569928446,"ip_address":"","comment_id":137885,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569904732","product_id":100023901,"comment_content":"sleepä¸ä¼šé‡Šæ”¾é”èµ„æºï¼Œåªæ˜¯è®©å‡ºcpuã€‚waitä¼šé‡Šæ”¾é”èµ„æºã€‚<br>sleepåˆ°äº†è®¾ç½®çš„æ—¶é—´ä¹‹åè‡ªåŠ¨å”¤é†’ã€‚waitéœ€è¦notifyå”¤é†’ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469294,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569928446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135154,"user_name":"åŸæ¸¸é›ªäºº","can_delete":false,"product_type":"c1","uid":1063805,"ip_address":"","ucode":"C432C9577B420C","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/7d/6376926b.jpg","comment_is_top":false,"comment_ctime":1569046136,"is_pvip":false,"replies":[{"id":"53725","content":"ç»§ç»­æ‰§è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570624506,"ip_address":"","comment_id":135154,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569046136","product_id":100023901,"comment_content":"æ’é˜Ÿç­‰å¾…æ¡ä»¶å˜é‡æ»¡è¶³åï¼Œçº¿ç¨‹æ¢å¤æ‰§è¡Œæ˜¯ç»§ç»­waitæ–¹æ³•å¾€ä¸‹æ‰§è¡Œï¼Œè¿˜æ˜¯é‡æ–°èµ°ä¸€éwhileåˆ¤æ–­ï¼Ÿ<br>ä¹Ÿå°±æ˜¯æ‰“å°é‡æ–°åˆ¤æ–­ï¼Œè¿˜æ˜¯ç»§ç»­æ‰§è¡Œï¼Ÿ<br>\t\twhile (true){<br>\t\t\tSystem.out.println(&quot;é‡æ–°åˆ¤æ–­&quot;);<br>\t\t\ttry{<br>\t\t\t\twait();<br>\t\t\t\tSystem.out.println(&quot;ç»§ç»­æ‰§è¡Œ&quot;);<br>\t\t\t}catch(Exception e){<br>\t\t\t}<br>\t\t}","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468070,"discussion_content":"ç»§ç»­æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570624506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133121,"user_name":"ç å†œKevinäº®","can_delete":false,"product_type":"c1","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1568366778,"is_pvip":false,"replies":[{"id":"51018","content":"ç«äº‰ä¸æ¿€çƒˆç”¨è‡ªæ—‹ï¼Œåä¹‹å¯¹æ€§èƒ½å½±å“å¾ˆå¤§ï¼Œæ‰€ä»¥ä¸èƒ½æ— é™è‡ªæ—‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1568439488,"ip_address":"","comment_id":133121,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568366778","product_id":100023901,"comment_content":"è¯·é—®è€å¸ˆï¼Œåœ¨æ— é”å®ç°æ—¶ä¸ä¹Ÿå¸¸å¸¸ç”¨åˆ°æ­»å¾ªç¯è‡ªæ—‹ç­‰å¾…ä¹ˆï¼Ÿè€å¸ˆè¿™é‡Œè¯´çš„ç­‰å¾…-é€šçŸ¥ä¼˜åŒ–åœºæ™¯åœ¨æ— é”ç®—æ³•ä¸­å¥½åƒä¹Ÿä¸å¸¸è§å“¦","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467259,"discussion_content":"ç«äº‰ä¸æ¿€çƒˆç”¨è‡ªæ—‹ï¼Œåä¹‹å¯¹æ€§èƒ½å½±å“å¾ˆå¤§ï¼Œæ‰€ä»¥ä¸èƒ½æ— é™è‡ªæ—‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568439488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123793,"user_name":"liian2019","can_delete":false,"product_type":"c1","uid":1503741,"ip_address":"","ucode":"22F639944F0EA0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epvjpicXzEv02d9ztRzIWIicbejyFTTtRA5K6oYmdicq9HQgGfRn3DLytTHQ6CHspb0TibqFkMibhBXj2g/132","comment_is_top":false,"comment_ctime":1565762607,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1565762607","product_id":100023901,"comment_content":"ç”¨whileçš„è¯ ä¸è¿˜æ˜¯æ­»å¾ªç¯å˜› åªä¸è¿‡è¿˜äº†ä¸€ä¸ªåœ°æ–¹ [æ‚è„¸]","like_count":0},{"had_liked":false,"id":122761,"user_name":"å‡Œå°˜","can_delete":false,"product_type":"c1","uid":1487541,"ip_address":"","ucode":"972B8CEF3C9C20","user_header":"https://static001.geekbang.org/account/avatar/00/16/b2/b5/b1b42785.jpg","comment_is_top":false,"comment_ctime":1565514809,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565514809","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜å°±æ˜¯ä½ é‚£ä¸ªä¸€æŠŠé”é”å¤šä¸ªèµ„æºçš„ä¾‹å­ï¼ˆä¸‹é¢æœ‰äººæé—®è¿‡ï¼Œä½†æˆ‘è¿˜æ˜¯æ²¡æœ‰ç†è§£ï¼‰ï¼Œä½ è¯´ç”¨notifyå¯èƒ½çº¿ç¨‹ä¸èƒ½è¢«å”¤é†’ï¼Œè¿™ä¸ªåœºæ™¯æˆ‘æƒ³ä¸å‡ºæ¥ã€‚èƒ½é™„ä¸Šä¸ªä»£ç å—ï¼Œä¼ªä»£ç å°±è¡ŒğŸ˜","like_count":0},{"had_liked":false,"id":118820,"user_name":"åˆ˜åš","can_delete":false,"product_type":"c1","uid":1178869,"ip_address":"","ucode":"308A705AE6EBFF","user_header":"https://static001.geekbang.org/account/avatar/00/11/fc/f5/2634fbb2.jpg","comment_is_top":false,"comment_ctime":1564449818,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564449818","product_id":100023901,"comment_content":"ç‹è€å¸ˆï¼Œé‚£ä¸ªABCDçš„ä¾‹å­ï¼Œæ˜¯å› ä¸ºé”äº†å¤šä¸ªèµ„æºï¼Œæ‰€ä»¥è¦ä½¿ç”¨notifyallã€‚<br>å¦‚æœåªé”äº†ä¸€ä¸ªèµ„æºï¼Œé‚£ä½¿ç”¨notifyæ˜¯ä¸æ˜¯æ›´å¥½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":114904,"user_name":"æœ±åŸ¹æƒ","can_delete":false,"product_type":"c1","uid":1022348,"ip_address":"","ucode":"0586FB9B37132D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/8c/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1563429869,"is_pvip":true,"replies":[{"id":"53907","content":"ä¸€æ¬¡æ€§è®²å¾ˆå¤šä¸å®¹æ˜“è®©äººæ¶ˆåŒ–","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570710350,"ip_address":"","comment_id":114904,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563429869","product_id":100023901,"comment_content":"notify() æ“ä½œå·¥ä½œåŸç†å›¾<br>synchronize ï¼ˆï¼‰ {<br>    if (æ¡ä»¶æ»¡è¶³) {<br><br>    }<br>}<br><br>è¿™ä¸ª if æ˜¯ä¸æ˜¯åº”è¯¥æ”¹ä¸º while","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458877,"discussion_content":"ä¸€æ¬¡æ€§è®²å¾ˆå¤šä¸å®¹æ˜“è®©äººæ¶ˆåŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570710350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114767,"user_name":"æœ±åŸ¹æƒ","can_delete":false,"product_type":"c1","uid":1022348,"ip_address":"","ucode":"0586FB9B37132D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/8c/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1563381154,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1563381154","product_id":100023901,"comment_content":"å›°æƒ‘: å¯¹äº ä¸€ä¸ª synchronized æ–¹æ³•ï¼ŒA çº¿ç¨‹å¯ä»¥æŠ¢åˆ°é”æ‰§è¡Œï¼Œ B çº¿ç¨‹æ²¡æœ‰æŠ¢åˆ°é”è¢«é˜»å¡ ï¼Œ å½“ A æ‰§è¡Œå®Œæˆä¹‹åï¼Œ å¦‚ä½• å”¤é†’ B çº¿ç¨‹æ‰§è¡Œ ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":113629,"user_name":"èµµå°æ´›","can_delete":false,"product_type":"c1","uid":1592232,"ip_address":"","ucode":"A326C12B1A1ABA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/a8/14b8a860.jpg","comment_is_top":false,"comment_ctime":1563098395,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563098395","product_id":100023901,"comment_content":"å½“æœ‰çš„ çº¿ç¨‹ ä¸æ»¡è¶³è·å–é”çš„ æ¡ä»¶æ—¶è¢«wait  é˜»å¡äº†è¿™ä¸ª é˜»å¡çš„é˜Ÿåˆ— æ˜¯ jvm åœ¨ç®¡ç†å—ï¼Ÿ<br><br>è¿˜æœ‰ å°±æ˜¯  ä¹‹å‰çš„å†™æ³• while æ­»å¾ªç¯ ä¸€ç›´çš„å»åˆ¤æ–­ æ¡ä»¶ æ˜¯å¦æ»¡è¶³ã€‚å¤šçº¿ç¨‹æƒ…å†µä¸‹å¯¼è‡´å¾ˆå¤šçº¿ç¨‹æ— åºçš„å»ç«äº‰èµ„æºã€‚ç­‰å¾…å”¤é†’æœºåˆ¶ å°±ä½¿å¾— çº¿ç¨‹ç«äº‰èµ„æºç›¸å¯¹å˜çš„æœ‰åºã€‚","like_count":0},{"had_liked":false,"id":113597,"user_name":"xiyuesmiling","can_delete":false,"product_type":"c1","uid":1221692,"ip_address":"","ucode":"2E5AD30B1470D5","user_header":"https://static001.geekbang.org/account/avatar/00/12/a4/3c/121e7f9f.jpg","comment_is_top":false,"comment_ctime":1563090874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563090874","product_id":100023901,"comment_content":"ä½†æ˜¯notify å’Œ notifyAllçš„ ä¸åº”è¯¥æ˜¯æ¯ä¸ªèµ„æºå¯¹åº”çš„é”é‡Œç­‰å¾…çš„çº¿ç¨‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":113583,"user_name":"èµµå°æ´›","can_delete":false,"product_type":"c1","uid":1592232,"ip_address":"","ucode":"A326C12B1A1ABA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/a8/14b8a860.jpg","comment_is_top":false,"comment_ctime":1563087343,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563087343","product_id":100023901,"comment_content":"waitæ–¹æ³•éœ€è¦ å”¤é†’.<br><br>sleepæ–¹æ³•æ˜¯é˜»å¡çº¿ç¨‹ ","like_count":0},{"had_liked":false,"id":112172,"user_name":"ä»¥æ¢¦ä¸ºé©¬","can_delete":false,"product_type":"c1","uid":1225455,"ip_address":"","ucode":"9995FC3FD620C6","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/ef/d969bf72.jpg","comment_is_top":false,"comment_ctime":1562677856,"is_pvip":false,"replies":[{"id":"40810","content":"åé¢ç®¡ç¨‹é‚£ç« ä¼šè¯¦ç»†ä»‹ç»","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1562712147,"ip_address":"","comment_id":112172,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562677856","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜éœ€è¦è¯·æ•™ï¼š notifyæ“ä½œå›¾ä¸­æœ‰ä¸¤ä¸ªé˜Ÿåˆ— ä¸€ä¸ªæ˜¯è·å–é”æ—¶çº¿ç¨‹ç­‰å¾…çš„é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯çº¿ç¨‹è¢«å”¤é†’æ‰€åœ¨çš„é˜Ÿåˆ—ï¼Œé‚£å¦‚ä½•ç†è§£æ–‡ä¸­æåˆ°çš„â€è¿™ä¸ªç­‰å¾…é˜Ÿåˆ—å’Œäº’æ–¥é”æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œæ¯ä¸ªäº’æ–¥é”éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ç­‰å¾…é˜Ÿåˆ—","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457608,"discussion_content":"åé¢ç®¡ç¨‹é‚£ç« ä¼šè¯¦ç»†ä»‹ç»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562712147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110069,"user_name":"å…š","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1562165856,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562165856","product_id":100023901,"comment_content":"wait  èƒ½è¢« notify å”¤é†’ sleep åªèƒ½é æ—¶é—´å”¤é†’äº†","like_count":0},{"had_liked":false,"id":108339,"user_name":"å…«ç™¾","can_delete":false,"product_type":"c1","uid":1253530,"ip_address":"","ucode":"79F1F79ADF5A00","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/9a/3b1c65fd.jpg","comment_is_top":false,"comment_ctime":1561722596,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561722596","product_id":100023901,"comment_content":"åœ¨waitè® å‰åŠ ä¸ªnotifyæ–¹æ³•åœ¨ç­‰å¾…çš„çº¿ç¨‹å¤šçš„åœºæ™¯ä¸‹æ˜¯ä¸æ˜¯æ¯”notifyAllå¥½ç‚¹ï¼Ÿ","like_count":0},{"had_liked":false,"id":108110,"user_name":"Xiao","can_delete":false,"product_type":"c1","uid":1179212,"ip_address":"","ucode":"71FFCCEEDE09E1","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/4c/46eb517a.jpg","comment_is_top":false,"comment_ctime":1561683302,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1561683302","product_id":100023901,"comment_content":"å¯ä»¥çœ‹ä¸‹JVMæºç ï¼Œmonitorenterå’Œmonitorexitè¿˜æœ‰waitå’Œnotifä»¥åŠnotifyallé‚£éƒ¨åˆ†çš„æºç è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ï¼","like_count":0},{"had_liked":false,"id":106362,"user_name":"æŸ æª¬C","can_delete":false,"product_type":"c1","uid":1181505,"ip_address":"","ucode":"BC0EE704D952A4","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/41/2d477385.jpg","comment_is_top":false,"comment_ctime":1561279832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561279832","product_id":100023901,"comment_content":"waitä¼šé‡Šæ”¾äº’æ–¥é”ï¼Œsleepä¸ä¼šé‡Šæ”¾é”","like_count":0},{"had_liked":false,"id":104694,"user_name":"2102","can_delete":false,"product_type":"c1","uid":1070298,"ip_address":"","ucode":"A67068F2A3157E","user_header":"https://static001.geekbang.org/account/avatar/00/10/54/da/e2e5ddf7.jpg","comment_is_top":false,"comment_ctime":1560819073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560819073","product_id":100023901,"comment_content":"é˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡ºçš„ï¼ŒåŒæ­¥å—ä¸­notifyä¸ºä½•ä¸æ˜¯é€šçŸ¥åœ¨ç­‰å¾…é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Ÿå½“éšæœºé€šçŸ¥åˆ°é˜Ÿåˆ—ä¸­çš„ç¬¬5ä¸ªçº¿ç¨‹ï¼Œæ˜¯å¦å‰4ä¸ªéƒ½ä¼šå‡ºé˜Ÿåˆ—ï¼Ÿ","like_count":0},{"had_liked":false,"id":103740,"user_name":"mark","can_delete":false,"product_type":"c1","uid":1566124,"ip_address":"","ucode":"59EE6EED0F06DD","user_header":"https://static001.geekbang.org/account/avatar/00/17/e5/ac/6c87d5ee.jpg","comment_is_top":false,"comment_ctime":1560500948,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560500948","product_id":100023901,"comment_content":"waitä¹‹åä¸ä¸€å®šè¢«å”¤é†’,sleepä¹‹åè¿˜ä¼šç»§ç»­æ‰§è¡Œã€‚","like_count":0},{"had_liked":false,"id":103674,"user_name":"ç‹è—æ˜","can_delete":false,"product_type":"c1","uid":1546333,"ip_address":"","ucode":"374D68B8D3FAFC","user_header":"https://static001.geekbang.org/account/avatar/00/17/98/5d/8e91b338.jpg","comment_is_top":false,"comment_ctime":1560486365,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560486365","product_id":100023901,"comment_content":"å¾ˆå¤šéƒ½è¯´waitä¸ç”¨æ•è·å¼‚å¸¸ï¼Œä½†æ˜¯æˆ‘çœ‹waitå’Œsleepä¸€æ ·ä¹ŸæŠ›å‡ºä¸­æ–­å¼‚å¸¸å‘€ï¼Ÿ","like_count":0},{"had_liked":false,"id":103046,"user_name":"ç‹’ç‹’","can_delete":false,"product_type":"c1","uid":1242295,"ip_address":"","ucode":"10A320ECEBF074","user_header":"https://static001.geekbang.org/account/avatar/00/12/f4/b7/5c775af5.jpg","comment_is_top":false,"comment_ctime":1560355160,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560355160","product_id":100023901,"comment_content":"æ–‡ç« å¼€å¤´è¯´apply()å‡½æ•°è€—æ—¶è¾ƒçŸ­ï¼Œå¹¶å‘é‡ä½æ—¶ï¼Œä»¥æ­»å¾ªç¯çš„æ–¹å¼ç­‰å¾…æ‰€å¸¦æ¥çš„æ¶ˆè€—è¿˜èƒ½æ¥å—ï¼Œå½“apply()è€—æ—¶è¾ƒé•¿ï¼Œæˆ–è€…è¯´å¹¶å‘é‡æ¯”è¾ƒå¤§çš„æ—¶å€™,å¯èƒ½å¾ªç¯ä¸Šåƒä¸‡æ¬¡æ‰èƒ½è·å–åˆ°é”ï¼Œè¿™é‡Œapply()è€—æ—¶è¾ƒé•¿è¿™ç§åœºæ™¯ç†è§£çš„ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå½“apply()è€—æ—¶è¾ƒé•¿æ—¶å¾ªç¯æ¬¡æ•°ä¸æ˜¯ä¼šç›¸å¯¹å°‘ä¸€äº›å—ï¼Œä¸¾ä¸ªç‰¹åˆ«çš„ä¾‹å­ï¼Œå¦‚æœå¾ªç¯ä¸­æ˜¯sleep()ï¼Œä¸ºä»€ä¹ˆè¦åè€Œè¦å¾ªç¯ä¸Šåƒä¸‡æ¬¡æ‰èƒ½è·å–åˆ°é”å‘¢ï¼Œå¸Œæœ›è€å¸ˆæˆ–è€…çƒ­å¿ƒåŒå­¦å¸®åŠ©è§£ç­”ä¸€ä¸‹","like_count":0},{"had_liked":false,"id":101136,"user_name":"é­æ–Œæ–Œ","can_delete":false,"product_type":"c1","uid":1142239,"ip_address":"","ucode":"E443EB0504CA37","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/df/dd536ff5.jpg","comment_is_top":false,"comment_ctime":1559724643,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559724643","product_id":100023901,"comment_content":"å¤§å®¶æ˜¯æ¥å¤ä¹ å¹¶å‘ç¼–ç¨‹çš„å—ï¼Ÿæ„Ÿè§‰éƒ½å¾ˆå‰å®³å•Šã€‚","like_count":0},{"had_liked":false,"id":100777,"user_name":"æˆ‘æ˜¯æ™ºéšœ","can_delete":false,"product_type":"c1","uid":1016594,"ip_address":"","ucode":"ED9D959423E024","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/12/4ba82798.jpg","comment_is_top":false,"comment_ctime":1559636999,"is_pvip":false,"replies":[{"id":"36790","content":"å‚æ•°å¯ä»¥ä¸åŒ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1560129177,"ip_address":"","comment_id":100777,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559636999","product_id":100023901,"comment_content":"ABCD é‚£ä¸ªæ˜¯æ€ä¹ˆå›äº‹ï¼Œåœ¨åŒä¸€ä¸ªæ–¹æ³• apply() é‡Œé¢ï¼Œä¸åŒçš„çº¿ç¨‹æ€ä¹ˆè¿˜ç”³è¯·ä¸åŒçš„èµ„æºå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452674,"discussion_content":"å‚æ•°å¯ä»¥ä¸åŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560129177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98069,"user_name":"ç‹å¤§å¼€","can_delete":false,"product_type":"c1","uid":1302824,"ip_address":"","ucode":"CF82EE8F2F9977","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKU20MSfzNgQt4TjEYTUI2IkLj3wBjFP6FeCicXluM1qf0kXCHgbXH6NeIouFXYzjNlzUxGbcO5kaQ/132","comment_is_top":false,"comment_ctime":1558888935,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558888935","product_id":100023901,"comment_content":"èµ·10000ä¸ªçº¿ç¨‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":97247,"user_name":"Nick","can_delete":false,"product_type":"c1","uid":1507000,"ip_address":"","ucode":"192C47B2CF1426","user_header":"https://static001.geekbang.org/account/avatar/00/16/fe/b8/24a6e0cb.jpg","comment_is_top":false,"comment_ctime":1558619620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558619620","product_id":100023901,"comment_content":"@wang ä½ çš„ç¨‹åºç»“æœæ²¡é—®é¢˜å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":94934,"user_name":"é˜¿è¾‰","can_delete":false,"product_type":"c1","uid":1266788,"ip_address":"","ucode":"A7EF42A10E2599","user_header":"https://static001.geekbang.org/account/avatar/00/13/54/64/8f3d000a.jpg","comment_is_top":false,"comment_ctime":1557925819,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557925819","product_id":100023901,"comment_content":"wang çš„é‚£ä¸ªä¾‹å­é‡Œé¢åº”è¯¥æ˜¯notify è€Œä¸æ˜¯notifyAll","like_count":0},{"had_liked":false,"id":94450,"user_name":"å€šæ¢¦æµ","can_delete":false,"product_type":"c1","uid":1435045,"ip_address":"","ucode":"7CB442D629534B","user_header":"https://static001.geekbang.org/account/avatar/00/15/e5/a5/fae40ac3.jpg","comment_is_top":false,"comment_ctime":1557815349,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557815349","product_id":100023901,"comment_content":"è¯·é—®è€å¸ˆï¼Œç°åœ¨çš„è¿™ä¸ªapplyæ–¹æ³•å¥½åƒè¿˜æ˜¯åªèƒ½ä¸²è¡ŒåŒ–åœ°è¯·æ±‚è½¬å‡ºè½¬å…¥è´¦å·å•Šã€‚ä½¿ç”¨å•ä¾‹å°±æ˜¯ä¸ºäº†ä¿è¯â€œä¸­å¿ƒåŒ–çš„è´¦æœ¬ç®¡ç†ä¸­å¿ƒâ€åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥è¿™æ—¶å€™ä¸ç®¡æ˜¯é”thisï¼Œè¿˜æ˜¯é”classå¯¹è±¡ï¼Œæ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ã€‚é‚£æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥æ”¹è¿›ï¼Œä½¿å¾—èƒ½å¹¶è¡Œè¯·æ±‚è´¦å·å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":89101,"user_name":"ç‚ç‚","can_delete":false,"product_type":"c1","uid":1143280,"ip_address":"","ucode":"D7F93624E014FC","user_header":"https://static001.geekbang.org/account/avatar/00/11/71/f0/be872719.jpg","comment_is_top":false,"comment_ctime":1556076884,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556076884","product_id":100023901,"comment_content":"è€å¸ˆè®²å¾—å¾ˆæ£’ï¼","like_count":0},{"had_liked":false,"id":88872,"user_name":"è€ƒä¼‘","can_delete":false,"product_type":"c1","uid":1053955,"ip_address":"","ucode":"968DFC00D6D0CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","comment_is_top":false,"comment_ctime":1556017931,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556017931","product_id":100023901,"comment_content":"çº¿ç¨‹ä»é˜»å¡é˜Ÿåˆ—ä¸­è¢«å”¤é†’ï¼Œæ˜¯ä»å¤´å¼€å§‹é‡æ–°æ‰§è¡Œå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":88523,"user_name":"the geek","can_delete":false,"product_type":"c1","uid":1506723,"ip_address":"","ucode":"71DECBC814A539","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLz3icr3mGs5ib8FbSPQZ2ic3ib90mHkd1btQrmGacZjJxfYXrerIdaTxglKyCicFzLcEAb6deC2cWjE5Q/132","comment_is_top":false,"comment_ctime":1555935523,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555935523","product_id":100023901,"comment_content":"å†æ¢ä¸ªè§’åº¦ï¼Œå‡è®¾ç”¨notify()ï¼Œå‡ºç°äº†é€šçŸ¥ä¸¢å¤±ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„æƒ…å†µä¸€å®šæ˜¯ï¼Œå€’æ•°ç¬¬äºŒä¸ªçº¿ç¨‹è¿è¡Œç»“æŸäº†ï¼Œå¹¶ä¸”æ²¡æœ‰é€šçŸ¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­çš„å”¯ä¸€çš„çº¿ç¨‹ï¼Œæˆ‘æƒ³çŸ¥é“ï¼Œnotify()æ–¹æ³•ä¼šå‡ºç°æœ€åä¸€ä¸ªçº¿ç¨‹æ— æ³•é€šçŸ¥çš„æƒ…å†µå—ï¼Ÿå¦‚æœä¸ä¼šï¼Œé‚£æœ€åä¸€ä¸ªçº¿ç¨‹ä¹Ÿä¸€å®šä¼šæ‰§è¡Œå®Œæ¯•ã€‚","like_count":0},{"had_liked":false,"id":88169,"user_name":"å½»å¤´æ’¤å°¾","can_delete":false,"product_type":"c1","uid":1421174,"ip_address":"","ucode":"7B120836359858","user_header":"https://static001.geekbang.org/account/avatar/00/15/af/76/feaffdea.jpg","comment_is_top":false,"comment_ctime":1555866040,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555866040","product_id":100023901,"comment_content":"æ¡ˆä¾‹ä¸­ æœ‰ä¸¤ç±»é” ç¬¬ä¸€ç±» å°±æ˜¯Allocatorå®ä¾‹(è´¦æœ¬ç®¡ç†è€…) ,ä¿è¯èƒ½åŒæ—¶æä¾›è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·æ—¶é€šçŸ¥æ‰€æœ‰è½¬å¸çš„ä¸šåŠ¡çª—å£æ¥å–è´¦æœ¬(è‡³äºæ˜¯ä¸æ˜¯ä¸šåŠ¡çª—å£éœ€è¦çš„è´¦æˆ·å°±ä¸ç®¡äº†--å¯¹åº”çš„å”¤é†’æœºä¼šæµªè´¹)å¹¶ä¸”å½“ä¸šåŠ¡çª—å£æ¥å–è´¦æœ¬æ—¶å‘ç°éœ€è¦çš„è´¦æœ¬å…¶ä¸­ä»»æ„ä¸€æœ¬æ­£åœ¨è¢«å…¶ä»–ä¸šåŠ¡çª—å£å ç”¨æ—¶è®©è¯¥ä¸šåŠ¡çª—å£å›å»ç­‰é€šçŸ¥(wait()),è¿™é‡Œçš„é›†åˆåˆ™æ˜¯è®°å½•ç€è¢«æ‹¿èµ°çš„è´¦æˆ·è´¦æœ¬,ç”¨æ¥è®°å½•å“ªäº›è´¦æœ¬æ˜¯å€Ÿå‡ºçŠ¶æ€.<br>å¦ä¸€ç±»é”å°±æ˜¯è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·å¯¹åº”çš„å®ä¾‹äº†,è¿™ä¸ªæ˜¯ä¸ºäº†ä¿è¯åœ¨è¿›è¡Œè½¬è´¦è¿‡ç¨‹ä¸­,é¿å…æŸ¥è¯¢æ“ä½œæŸ¥è¯¢åˆ°é”™è¯¯ç»“æœ(ç±»ä¼¼æ•°æ®åº“ä¸­çš„è„è¯»).<br>è‡³äºæœ‰çš„åŒå­¦è¯´çš„,Allocatoræ˜¯å•ä¾‹çš„ä¸å¯èƒ½å‡ºç° çº¿ç¨‹1æŒæœ‰AB,çº¿ç¨‹2æŒæœ‰CDçš„æƒ…å†µ,æ­£æ˜¯ç”±äºAllocatoræ˜¯å•ä¾‹çš„,æ‰€ä»¥æ‰éœ€è¦è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«,å•ä¾‹ä¿è¯çš„æ˜¯æ‰€æœ‰çº¿ç¨‹ç«äº‰çš„æ˜¯åŒä¸€ä»½èµ„æº,ä½†æ˜¯Allocatorå®ä¾‹æ‰€å¯¹è±¡é”çš„å´æ˜¯è¿™ä»½èµ„æºä¸­çš„å…¶ä¸­ä¸¤ä¸ª,å…¶ä»–çº¿ç¨‹è·å–å…¶ä»–çº¿ç¨‹å¹¶ä¸å†²çª,å› ä¸ºåªè¦æ‰§è¡Œå®Œapply()æˆ–è€…free()å•ä¾‹æ‰€å¯¹è±¡éƒ½ä¼šé‡Šæ”¾,å…¶ä»–çº¿ç¨‹(ä¸šåŠ¡çª—å£)å¯ä»¥æœ‰æœºä¼šæ‹¿åˆ°é›†åˆé‡Œæ²¡æœ‰çš„(è¿˜æ²¡å€Ÿå‡º)å…¶ä»–èµ„æº(è´¦æˆ·è´¦æœ¬);<br>ä¸ªäººç†è§£,å¸Œæœ›èƒ½æœ‰ç‚¹å¸®åŠ©,å¦‚æœ‰é”™è¯¯,çƒ¦è¯·æŒ‡æ­£.","like_count":0},{"had_liked":false,"id":88144,"user_name":"xuery","can_delete":false,"product_type":"c1","uid":1027584,"ip_address":"","ucode":"F461B61BE06131","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ae/00/025f37e7.jpg","comment_is_top":false,"comment_ctime":1555858247,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1555858247","product_id":100023901,"comment_content":"æ–‡ä¸­å·²ç»è¯´äº†ï¼Œwaitçš„æ—¶å€™ï¼Œçº¿ç¨‹ä¼šé‡Šæ”¾é”ï¼Œå¯¹äºèŒƒå¼while(æ¡ä»¶ä¸æ»¡è¶³æ—¶){wait();}, æŸä¸ªçº¿ç¨‹æ¡ä»¶ä¸æ»¡è¶³æ—¶æ‰§è¡Œwait()å¹¶é‡Šæ”¾é”ï¼Œåªèƒ½ç­‰å¾…å…¶ä»–çº¿ç¨‹notify&#47;notifyAllå”¤é†’ï¼Œå”¤é†’ä¹‹åè¦é‡æ–°è·å¾—é”ä¸”æ¡ä»¶æ»¡è¶³æ—¶æ‰ä¼šå¾€ä¸‹æ‰§è¡Œã€‚<br>sleepåˆ™åªæ˜¯ä¼‘çœ ä¸€æ®µæ—¶é—´ï¼Œä¸é‡Šæ”¾é”","like_count":0},{"had_liked":false,"id":88034,"user_name":"è¦ƒé’°æ ‹","can_delete":false,"product_type":"c1","uid":1251835,"ip_address":"","ucode":"19080C463658EF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oiboHpgukqib2ASXeU0H7W1ibgRMqyrNE5KaWicicPEDy0ia8YdoneZAtvW0EFIiaqZJp2OS4dnweOgXaJ5EjJicicEqic5A/132","comment_is_top":false,"comment_ctime":1555821055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555821055","product_id":100023901,"comment_content":"wait()é‡Šæ”¾CPU,é‡Šæ”¾é”ï¼›sleepåªé‡Šæ”¾CPUï¼Œä¸é‡Šæ”¾é”","like_count":0},{"had_liked":false,"id":84366,"user_name":"Mr.Panda","can_delete":false,"product_type":"c1","uid":1238864,"ip_address":"","ucode":"655A3013B5E849","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/50/d476ed6c.jpg","comment_is_top":false,"comment_ctime":1554855393,"is_pvip":false,"replies":[{"id":"30456","content":"å¯ä»¥çœ‹å’Œ08ç®¡ç¨‹é‚£ä¸€ç¯‡ç»“åˆç€çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1554904125,"ip_address":"","comment_id":84366,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554855393","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘åˆšæçš„é—®é¢˜æ˜¯ä¸æ˜¯è¿™æ ·è§£ç­”å°±å¯¹äº†ï¼š<br>ç­”ï¼šä¸¤ä¸ªç­‰å¾…é˜Ÿåˆ—æ˜¯ä¸åŒçš„ï¼Œè¿™é‡Œæ¶‰åŠä¸¤ä¸ªç­‰å¾…é˜Ÿåˆ—æ¦‚å¿µã€‚<br>#é”å¯¹è±¡çš„é”æ ‡å¿—ç­‰å¾…é˜Ÿåˆ—<br>è¿›å…¥çš„çº¿ç¨‹ï¼š1.æ‰§è¡Œäº’æ–¥é”å¯¼è‡´é˜»å¡çš„çº¿ç¨‹ï¼Œ 2.è¢«notify,notifyAllå”¤é†’çš„çº¿ç¨‹<br>å”¤é†’æ¡ä»¶ï¼šé”å¯¹è±¡æ ‡å¿—å·²æ¸…é™¤ï¼Œå³è¯¥é”å¯¹è±¡æœªè¢«å…¶ä»–çº¿ç¨‹åŠ é”(æˆ–å…¶ä»–çº¿ç¨‹ä¸´ç•ŒåŒºæ‰§è¡Œå®Œæ¯•è‡ªåŠ¨é‡Šæ”¾é”)<br>å”¤é†’åæ‰§è¡Œç‰¹å¾ï¼šç«äº‰ç»™é”å¯¹è±¡åŠ é”æ ‡å¿—ï¼ŒæœªåŠ é”æˆåŠŸçš„çº¿ç¨‹å†æ¬¡å›åˆ°è¯¥ç­‰å¾…é˜Ÿåˆ—<br>#é”å¯¹è±¡ç­‰å¾…é˜Ÿåˆ—<br>è¿›å…¥çš„çº¿ç¨‹ï¼š ä¸´ç•ŒåŒºä¸­ä¸»åŠ¨æ‰§è¡Œé”å¯¹è±¡çš„wait()æ–¹æ³•çš„çº¿ç¨‹<br>å”¤é†’æ¡ä»¶ï¼šå…¶ä»–çº¿ç¨‹æ‰§è¡Œäº†é”å¯¹è±¡çš„notify,notifyAllæ–¹æ³•<br>å”¤é†’åæ‰§è¡Œç‰¹å¾ï¼šè¢«å”¤é†’çš„çº¿ç¨‹ä¼šè¿›å…¥é”å¯¹è±¡çš„é”æ ‡å¿—ç­‰å¾…é˜Ÿåˆ—","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446334,"discussion_content":"å¯ä»¥çœ‹å’Œ08ç®¡ç¨‹é‚£ä¸€ç¯‡ç»“åˆç€çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554904125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84349,"user_name":"Mr.Panda","can_delete":false,"product_type":"c1","uid":1238864,"ip_address":"","ucode":"655A3013B5E849","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/50/d476ed6c.jpg","comment_is_top":false,"comment_ctime":1554853689,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554853689","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·æŒ‡å¯¼å‡ ä¸ªé—®é¢˜ï¼š<br>1. ä¸¤ä¸ªç­‰å¾…é˜Ÿåˆ—æœ‰åŒºåˆ«å—ï¼Ÿ<br>1.1ä¸Šæ–‡æåˆ°çš„å·¦è¾¹ç­‰å¾…é˜Ÿåˆ—ç”±äºäº’æ–¥é”synchronizedå¯¼è‡´çº¿ç¨‹é˜»å¡æ‰€èšé›†çš„æ¦‚å¿µï¼Œéœ€è¦ä¸´ç•ŒåŒºæ‰§è¡Œå®Œæ¯•ï¼Œè‡ªåŠ¨é‡Šæ”¾é”ï¼Œè¯¥é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æ‰ä¼šå…¨éƒ¨å”¤é†’å»ç«äº‰ç»™é”å¯¹è±¡åŠ é”ã€‚<br>1.2 ä¸Šæ–‡æåˆ°çš„å³è¾¹ç­‰å¾…é˜Ÿåˆ—æ˜¯ç”±äºè·å–é”çš„æ‰§è¡Œçº¿ç¨‹ï¼Œæ¡ä»¶ä¸æ»¡è¶³æ—¶ä¸»åŠ¨è°ƒç”¨waité‡Šæ”¾äº’æ–¥é”ä¸”è‡ªèº«è¿›å…¥é˜»å¡æ‰€èšé›†çš„æ¦‚å¿µï¼Œéœ€è¦è°ƒç”¨å¯¹åº”é”å¯¹è±¡çš„notify,notifyAllæ‰ä¼šå”¤é†’è¯¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹å»ç«äº‰é”ã€‚<br>ä¹Ÿå°±æ˜¯è¯´è‹¥æ²¡è°ƒç”¨notify,notifyAll é‚£ä¹ˆè¿™ä¸ªé˜»å¡é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æ°¸è¿œä¸ä¼šè¢«å”¤é†’ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":82072,"user_name":"è™çˆ·","can_delete":false,"product_type":"c1","uid":1024907,"ip_address":"","ucode":"42E8339F183055","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a3/8b/e7389cf5.jpg","comment_is_top":false,"comment_ctime":1554113946,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1554113946","product_id":100023901,"comment_content":"waitæ˜¯è¿›å…¥ä¸´ç•ŒåŒºç­‰å¾…ï¼Œä¹Ÿå°±æ˜¯this object&#39;s monitor.<br>sleepæ˜¯çº¿ç¨‹çš„æ–¹æ³•ï¼Œå®ƒçš„åŠŸèƒ½ï¼Œç­‰ä¸€ä¼šï¼Œsleepæ–¹æ³•ä¸ä¼šå¯¼è‡´è‡ªå·±ï¼ˆthreadï¼‰ä¸¢æ‰äº’æ–¥é”çš„æ‹¥æœ‰æƒã€‚","like_count":0},{"had_liked":false,"id":80638,"user_name":"timgise","can_delete":false,"product_type":"c1","uid":1083979,"ip_address":"","ucode":"0F4567495A471F","user_header":"https://static001.geekbang.org/account/avatar/00/10/8a/4b/9863a07b.jpg","comment_is_top":false,"comment_ctime":1553691986,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553691986","product_id":100023901,"comment_content":"&#47;&#47;sleep<br>synchronized(LOCK) {<br>    TimeUnit.SECONDS.sleep(3); &#47;&#47;LOCKæŒæœ‰é”<br>}<br>&#47;&#47;wait<br>synchronized(LOCK){<br>    LOCK.wait(); &#47;&#47;LOCKå·²ä¸æŒæœ‰é”<br>}<br><br><br>","like_count":0},{"had_liked":false,"id":79313,"user_name":"è‹èŒ«å¤§åœ°","can_delete":false,"product_type":"c1","uid":1010515,"ip_address":"","ucode":"7EA9DF22931ABB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/53/a102d6a5.jpg","comment_is_top":false,"comment_ctime":1553433739,"is_pvip":false,"replies":[{"id":"28925","content":"æ²¡æƒåˆ©äº‰å–ï¼Œå®Œå…¨è¢«åŠ¨çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1553436089,"ip_address":"","comment_id":79313,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553433739","product_id":100023901,"comment_content":"è®°ä½ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ä¸”å³è¾¹çš„é˜Ÿåˆ—åœ¨è¢«å”¤é†’åä¼šç§»åˆ°å·¦è¾¹çš„é˜Ÿåˆ—ï¼Œåœ¨è®²ç®¡ç¨‹çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿè¦æŠŠè¿™ä¸ªå…·ä½“çš„å¼„æ‡‚ã€‚ä¸è¿‡ï¼Œåœ¨notifyallçš„æ—¶å€™ï¼Œçº¿ç¨‹æ˜¯å¦‚ä½•äº‰å–è‡ªå·±è¢«å”¤é†’çš„å‘¢ï¼Œè¿™é‡Œé¢æœ‰æ²¡æœ‰ä»€ä¹ˆæœºåˆ¶","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444446,"discussion_content":"æ²¡æƒåˆ©äº‰å–ï¼Œå®Œå…¨è¢«åŠ¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553436089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78321,"user_name":"antz","can_delete":false,"product_type":"c1","uid":1005589,"ip_address":"","ucode":"BDFDED6D7F0BD2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/15/56f4e62a.jpg","comment_is_top":false,"comment_ctime":1553130427,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553130427","product_id":100023901,"comment_content":"@éƒ‘æ™¨Ccï¼šé’ˆå¯¹ä½ çš„ç–‘æƒ‘ï¼Œæˆ‘è§‰å¾—å¯ä»¥å‚è€ƒä¸‹æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸ªmonitorobjectæ¥ç†è§£ï¼Œå®ƒé‡Œé¢æœ‰waitseté˜Ÿåˆ—ï¼Œæ‰§è¡Œwaitåï¼Œçº¿ç¨‹å°±ä¼šæ”¾è¿›å»ï¼Œnotifyåï¼Œä¼šå»é‡æ–°äº‰æŠ¢é”ï¼ŒæŠ¢åˆ°é”åmonitorobjectå¯¹è±¡é‡Œæœ‰currentthreadå­—æ®µå­˜å‚¨å½“å‰çº¿ç¨‹idï¼Œç„¶åè¿˜è¦æ˜ç™½ä¸€ä¸ªäº‹ï¼Œçº¿ç¨‹äº’æ–¥åº”è¯¥æ˜¯å¯¹åŒä¸€ä¸ªé”å®šèµ„æºäº‰æŠ¢ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯åŒä¸€ä¸ªmonitorobject","like_count":0},{"had_liked":false,"id":77836,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1553006394,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1553006394","product_id":100023901,"comment_content":"æ˜¯ä¸æ˜¯å¯ä»¥ä»ç›¸åŒå’Œä¸åŒç‚¹æ¥çŒœæµ‹ä¸€ä¸‹è®¾è®¡ç›®æ ‡ï¼Ÿsleepåªæ˜¯è®©å½“å‰çº¿ç¨‹è®©å‡ºå½“å‰CPUèµ„æºï¼Œå¹¶ä¸”æŒ‡å®šæ—¶é—´å†…ä¸å‚ä¸CPUèµ„æºçš„æŠ¢å¤ºï¼Œé›¨éœ²å‡æ²¾ï¼Œè®©å…¶ä»–çº¿ç¨‹ä¹Ÿæœ‰æœºä¼šå¾—åˆ°æ‰§è¡Œã€‚è€Œwaitæ˜¯ç­‰å¾…-é€šçŸ¥æœºåˆ¶ä¸­çš„ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„ç¯èŠ‚ï¼Œåªæ˜¯waitçš„ä¸€ä¸ªåŠŸèƒ½è¡¨ç°æ˜¯å½“å‰çº¿ç¨‹è®©å‡ºCPUï¼Œæ‰€ä»¥æ¥ä¸€ç›´æ‹¿æ¥å’Œsleepåšå¯¹æ¯”ã€‚","like_count":0},{"had_liked":false,"id":77584,"user_name":"ä½ åªæ˜¯çœ‹èµ·æ¥å¾ˆåŠªåŠ›","can_delete":false,"product_type":"c1","uid":1449173,"ip_address":"","ucode":"F9340A560D347C","user_header":"https://static001.geekbang.org/account/avatar/00/16/1c/d5/248a9c38.jpg","comment_is_top":false,"comment_ctime":1552965601,"is_pvip":false,"replies":[{"id":"28335","content":"æ²¡é—®é¢˜<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552969575,"ip_address":"","comment_id":77584,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552965601","product_id":100023901,"comment_content":"çº¿ç¨‹æ‰§è¡Œwait()æ–¹æ³•åï¼Œä¼šé‡Šæ”¾å…¶å æœ‰çš„æ‰€æœ‰èµ„æºï¼Œè€Œä¸”ä¸ä¼šè‡ªåŠ¨å”¤é†’ï¼Œå¿…é¡»é€šè¿‡notify()æˆ–notifyAll()æ–¹æ³•æ‰èƒ½è¢«å”¤é†’å†æ¬¡è¿›å…¥å°±ç»ªé˜Ÿåˆ—ã€‚<br>æ‰§è¡Œsleep()æ–¹æ³•ï¼Œä¼šä½¿çº¿ç¨‹è®©å‡ºcpuçš„æ‰§è¡Œæƒï¼Œç»™å…¶å®ƒçº¿ç¨‹æ‰§è¡Œçš„æœºä¼šï¼Œä¸ç®¡å…¶å®ƒçº¿ç¨‹çš„ä¼˜å…ˆçº§é«˜ä½ï¼Œä½†ä¸é‡Šæ”¾é”ã€‚<br>è€å¸ˆï¼Œé‚£ä¹ˆä¸¤ä¸ªçº¿ç¨‹è®¿é—®ä¸€ç»„å…±äº«èµ„æºçš„æ—¶å€™ï¼Œåœ¨åŒæ­¥ä»£ç å—é‡Œæ‰§è¡Œsleep()æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºä½ åªæ˜¯è®©å‡ºäº†cpuï¼Œæ²¡æœ‰é‡Šæ”¾é”ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è¿˜æ˜¯ä¸èƒ½æ‰§è¡Œï¼Œè¿™ä¹ˆç†è§£æœ‰é—®é¢˜å—?","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443787,"discussion_content":"æ²¡é—®é¢˜\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552969575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76790,"user_name":"å†è§ï¼Œå­™æ‚Ÿç©º","can_delete":false,"product_type":"c1","uid":1116757,"ip_address":"","ucode":"955C94D694D929","user_header":"https://static001.geekbang.org/account/avatar/00/11/0a/55/a1c8954d.jpg","comment_is_top":false,"comment_ctime":1552708558,"is_pvip":false,"replies":[{"id":"28024","content":"å·²ç»æœ‰åŒå­¦åœ¨è¯„è®ºåŒºç»™äº†ï¼Œä½ å¯ä»¥å‚è€ƒä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552729772,"ip_address":"","comment_id":76790,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552708558","product_id":100023901,"comment_content":"å¼ºçƒˆè¦æ±‚è€å¸ˆç»™ä¸ªgithubé“¾æ¥ï¼Œèƒ½æœ‰å®Œæ•´çš„ä»£ç å‚è€ƒï¼Œæƒ³æœ¬åœ°è‡ªå·±è¿è¡Œä¸€ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443447,"discussion_content":"å·²ç»æœ‰åŒå­¦åœ¨è¯„è®ºåŒºç»™äº†ï¼Œä½ å¯ä»¥å‚è€ƒä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552729772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76698,"user_name":"æ®‹é£","can_delete":false,"product_type":"c1","uid":1182951,"ip_address":"","ucode":"E563FB9516CB9A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/e7/863f5eef.jpg","comment_is_top":false,"comment_ctime":1552683720,"is_pvip":false,"replies":[{"id":"27980","content":"è¿™ä¸ªåœ¨ç®¡ç¨‹é‚£ä¸€ç« è¯¦ç»†ä»‹ç»<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552702424,"ip_address":"","comment_id":76698,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552683720","product_id":100023901,"comment_content":"å·¦è¾¹çš„æ˜¯enter~setå³è¾¹çš„æ‰æ˜¯wait~setï¼Œenter~setç®¡ç†çš„æ˜¯ç­‰å¾…å½“å‰å¯¹è±¡é”èµ„æºçš„çº¿ç¨‹ï¼Œè€Œwait~setç®¡ç†çš„æ˜¯è°ƒç”¨äº†waitæ–¹æ³•çš„çº¿ç¨‹","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443412,"discussion_content":"è¿™ä¸ªåœ¨ç®¡ç¨‹é‚£ä¸€ç« è¯¦ç»†ä»‹ç»\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552702424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76365,"user_name":"é“","can_delete":false,"product_type":"c1","uid":1324160,"ip_address":"","ucode":"851A0AD751D317","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/80/30e9ae41.jpg","comment_is_top":false,"comment_ctime":1552578663,"is_pvip":false,"replies":[{"id":"27886","content":"å¯èƒ½è¿™ä¸ªå‡ ç‡ä¸è¡Œï¼Œå¿…é¡»æ˜¯ä¸€å®šèƒ½å”¤é†’ã€‚è¦ä¸3å°±æ­»åœ¨é‚£é‡Œäº†<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552623758,"ip_address":"","comment_id":76365,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552578663","product_id":100023901,"comment_content":"notifyæœ‰é£é™©ï¼Œnotifyallå°±èƒ½ä¿è¯æ²¡æœ‰é£é™©å—ã€‚ç»“æœæ˜¯éƒ½å”¤é†’äº†ä¸€ä¸ªçº¿ç¨‹ã€‚è¯¥ä¾‹å­ä¸­å¦‚æœç”¨notifyallä¹Ÿæœ‰å¯èƒ½å”¤é†’çº¿ç¨‹4<br><br>æ—¢ç„¶é”çš„æ˜¯thisï¼Œçº¿ç¨‹2æ˜¯æŒæœ‰cdèµ„æºçš„ï¼Œé‚£ä¹ˆçº¿ç¨‹2é‡Šæ”¾èµ„æºæ—¶è°ƒnotifyæ˜¯å¯èƒ½å”¤é†’çº¿ç¨‹3çš„ã€‚<br>é™äºæ°´å¹³ï¼Œæ„Ÿè§‰è¿™ä¸€æ®µæ²¡æ˜ç™½","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443275,"discussion_content":"å¯èƒ½è¿™ä¸ªå‡ ç‡ä¸è¡Œï¼Œå¿…é¡»æ˜¯ä¸€å®šèƒ½å”¤é†’ã€‚è¦ä¸3å°±æ­»åœ¨é‚£é‡Œäº†\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552623758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75950,"user_name":"æçš®çš®çš®çš®çš®","can_delete":false,"product_type":"c1","uid":1200281,"ip_address":"","ucode":"3BF1DEE4A12359","user_header":"https://static001.geekbang.org/account/avatar/00/12/50/99/44378317.jpg","comment_is_top":false,"comment_ctime":1552496609,"is_pvip":false,"replies":[{"id":"27680","content":"æ˜¯è¿™æ ·<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552523858,"ip_address":"","comment_id":75950,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552496609","product_id":100023901,"comment_content":"é‚£å°±æ˜¯è¯´notifyå’ŒnotifyAllä¸ä¼šé˜»å¡å’¯ï¼Œå°±æ˜¯é€šçŸ¥å®Œå…¶ä»–çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚æ˜¯è¿™æ ·æ²¡é”™å§ğŸ˜„","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443100,"discussion_content":"æ˜¯è¿™æ ·\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552523858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75644,"user_name":"Aiome","can_delete":false,"product_type":"c1","uid":1306394,"ip_address":"","ucode":"5D3A810C0FF56B","user_header":"","comment_is_top":false,"comment_ctime":1552443044,"is_pvip":false,"replies":[{"id":"27640","content":"notifyä¹‹åï¼Œä»båˆ°aï¼Œä»€ä¹ˆæ—¶å€™å”¤é†’ï¼Œè¦çœ‹syncé”ä»€ä¹ˆæ—¶å€™é‡Šæ”¾<br>è¿™ä¸ªwhileå’Œä¸Šä¸€ç« æ²¡å…³ç³»<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552479639,"ip_address":"","comment_id":75644,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552443044","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæœ‰ç‚¹é—®é¢˜æœ›è§£ç­”<br>1.wait notify notifyall  éƒ½æ˜¯å¯¹sync é”çš„ç­‰å¾…é˜Ÿåˆ—æ“ä½œè¿™ä¸ªå¯¹æ¥å«Aï¼Œwaitæ“ä½œä¼šæŠŠçº¿ç¨‹æ”¾åˆ°waitç­‰å¾…é˜Ÿåˆ—Bã€‚<br>é‚£ä¹ˆå½“Bé˜Ÿåˆ—çš„çº¿ç¨‹ä»€ä¹ˆæ—¶å€™ä¼šè¢«å”¤é†’å‘¢ï¼Ÿå½“Bé˜Ÿåˆ—çš„çº¿ç¨‹æ•°è¢«å”¤é†’é‡æ–°è·å–syncé”å¤±è´¥äº†ï¼Œé‚£è¿™ä¸ªçº¿ç¨‹å›åˆ°Aé˜Ÿåˆ—è¿˜æ˜¯Bé˜Ÿåˆ—å‘¢ï¼Ÿ<br><br>2.è¿™ç§ç­‰å¾…é€šçŸ¥çš„æ¨¡å¼ï¼Œæ˜¯ä¸æ˜¯ä¸ºäº†è§£å†³ä¸Šä¸€ç« whileå¾ªç¯èµ„æºçš„æƒ…å†µï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å¼åªæ˜¯æŠŠwhileæ–¹åˆ°äº†ç®¡ç†å‘˜çš„ä»£ç é‡Œï¼Œæ˜¯æˆ‘å¯¹whileï¼ˆï¼‰ï½›waitï¼ˆï¼‰ï½è¿™ä¸ªå†™æ³•æœ‰è¯¯è§£å—ï¼Ÿ<br><br>æ°´å¹³ä½ï¼Œå¸Œæœ›è€å¸ˆèƒ½ç»™è§£ç­”ï¼Œè°¢è°¢ğŸ™","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442972,"discussion_content":"notifyä¹‹åï¼Œä»båˆ°aï¼Œä»€ä¹ˆæ—¶å€™å”¤é†’ï¼Œè¦çœ‹syncé”ä»€ä¹ˆæ—¶å€™é‡Šæ”¾\nè¿™ä¸ªwhileå’Œä¸Šä¸€ç« æ²¡å…³ç³»\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552479639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75461,"user_name":"ç‹¬ç«‹è‡ªä¸»","can_delete":false,"product_type":"c1","uid":1371039,"ip_address":"","ucode":"11213FDC994385","user_header":"https://static001.geekbang.org/account/avatar/00/14/eb/9f/125ed81c.jpg","comment_is_top":false,"comment_ctime":1552400867,"is_pvip":false,"replies":[{"id":"27629","content":"è¿˜æ˜¯æ²¡çœ‹æ˜ç™½ğŸ˜‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552478216,"ip_address":"","comment_id":75461,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1552400867","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®ä¸´ç•ŒåŒºèµ„æºæ—¶ï¼Œæ‹¿åˆ°èµ„æºAå´é‚£ä¸åˆ°èµ„æºBï¼Œå¯èƒ½èµ„æºBåœ¨ä¸´ç•ŒåŒºæ ¹æœ¬ä¸å­˜åœ¨ï¼Œè¿™å°±åœ¨è°ƒç”¨waitï¼ˆï¼‰æ–¹æ³•çš„æ—¶å€™ï¼Œæ”¾å¼ƒäº’æ–¥é”ï¼ŒæŠŠçº¿ç¨‹æ”¾åˆ°é˜»å¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åå½“æŸä¸ªçº¿ç¨‹è°ƒç”¨notifyï¼ˆï¼‰æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªçº¿ç¨‹å§‹ç»ˆéƒ½ä¼šåœ¨é˜»å¡é˜Ÿåˆ—ä¸­ã€‚è¿™ç§æƒ…å†µè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442901,"discussion_content":"è¿˜æ˜¯æ²¡çœ‹æ˜ç™½ğŸ˜‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552478216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1309759,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fc/3f/7e95156a.jpg","nickname":"å•Šå‹‡","note":"","ucode":"CB403DD04F920A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267,"discussion_content":"ä¿®æ”¹æˆnotifyAll()æ–¹æ³•ä¸å°±å¯ä»¥äº†å—ï¼Ÿå› ä¸ºnotify()åªä¼šéšæœºé€šçŸ¥ä¸€ä¸ªï¼Œä½ çš„è¿™ä¸ªçº¿ç¨‹æœ‰å¯èƒ½é€šçŸ¥ä¸åˆ°ï¼Œå› ä¸ºæ˜¯éšæœºé€šçŸ¥çš„å…¶ä¸­ä¸€ä¸ªã€‚ä¿®æ”¹æˆnotifyAll()æ–¹æ³•ï¼Œå°±ä¼šæŠŠé˜»å¡é˜Ÿåˆ—é‡Œé¢æ‰€æœ‰é˜»å¡çš„çº¿ç¨‹ç§»åˆ°ç«äº‰é”çš„é˜Ÿåˆ—é‡Œå»ã€‚ä¸ªäººç†è§£ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561373824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1361746,"avatar":"https://static001.geekbang.org/account/avatar/00/14/c7/52/c5adf218.jpg","nickname":"å–œæ¬¢åœ°çƒçš„é˜¿åŸ¹åŒå­¦","note":"","ucode":"5F97037585F857","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1309759,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fc/3f/7e95156a.jpg","nickname":"å•Šå‹‡","note":"","ucode":"CB403DD04F920A","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":91480,"discussion_content":"ä¿®æ”¹æˆnotifyAll()æ–¹æ³•ï¼Œå°±ä¼šæŠŠé˜»å¡é˜Ÿåˆ—é‡Œé¢æ‰€æœ‰é˜»å¡çš„çº¿ç¨‹ç§»åˆ°ç«äº‰é”çš„é˜Ÿåˆ—é‡Œå»ã€‚ è¿™å¥è¯é†é†çŒé¡¶ï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576835888,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":267,"ip_address":""},"score":91480,"extra":""}]}]},{"had_liked":false,"id":75455,"user_name":"ç‹¬ç«‹è‡ªä¸»","can_delete":false,"product_type":"c1","uid":1371039,"ip_address":"","ucode":"11213FDC994385","user_header":"https://static001.geekbang.org/account/avatar/00/14/eb/9f/125ed81c.jpg","comment_is_top":false,"comment_ctime":1552400195,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552400195","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®ä¸´ç•ŒåŒºçš„æ—¶å€™ï¼ŒæŸ¥è¯¢èµ„æºçš„æ—¶å€™ï¼Œåªæ‹¿åˆ°è½¬å‡ºè´¦å·å´æ‹¿ä¸åˆ°è½¬å…¥è´¦å·ï¼ˆèµ„æºï¼‰ã€‚ç„¶åè¿™ä¸ªçº¿ç¨‹ä¸€ç›´åœ¨é˜»å¡é˜Ÿåˆ—ã€‚è¿™ç§æƒ…å†µè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":75432,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1552397058,"is_pvip":false,"replies":[{"id":"27596","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552452972,"ip_address":"","comment_id":75432,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552397058","product_id":100023901,"comment_content":"ç­‰å¾…é˜Ÿåˆ— ä»£ç é‡Œçœ‹ä¸åˆ° é‚£å°±æ˜¯åœ¨JVMé‡Œé¢äº†å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442889,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552452972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75327,"user_name":"æ","can_delete":false,"product_type":"c1","uid":1119312,"ip_address":"","ucode":"5C0FAA211F2E26","user_header":"https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg","comment_is_top":false,"comment_ctime":1552379296,"is_pvip":true,"replies":[{"id":"27452","content":"åªè¦æœ‰ä¸€ä¸ªåŒ…å«ï¼Œå°±æ˜¯æ›¾ç»è¢«åˆ†é…è¿‡ï¼Œä¹Ÿå°±æ˜¯æ¡ä»¶ä¸æ»¡è¶³<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552389885,"ip_address":"","comment_id":75327,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552379296","product_id":100023901,"comment_content":"ä»£ç é‡Œï¼Œä¸¤ä¸ªåŒ…å«æ˜¯ä¸æ˜¯å†™åäº†ï¼Ÿï¼Ÿæ¡ä»¶ä¸æ»¡è¶³æ‰ç­‰å¾…ï¼Œé‚£åº”è¯¥æ˜¯ä¸åŒ…å«å§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442864,"discussion_content":"åªè¦æœ‰ä¸€ä¸ªåŒ…å«ï¼Œå°±æ˜¯æ›¾ç»è¢«åˆ†é…è¿‡ï¼Œä¹Ÿå°±æ˜¯æ¡ä»¶ä¸æ»¡è¶³\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552389885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75275,"user_name":"ä½•æ–¹å¦–å­½","can_delete":false,"product_type":"c1","uid":1445608,"ip_address":"","ucode":"98B74EE791206B","user_header":"https://static001.geekbang.org/account/avatar/00/16/0e/e8/5d2c3e08.jpg","comment_is_top":false,"comment_ctime":1552372206,"is_pvip":false,"replies":[{"id":"27470","content":"åº”è¯¥æ˜¯å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552393906,"ip_address":"","comment_id":75275,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552372206","product_id":100023901,"comment_content":"ä¾‹å­é‡Œçš„wait()ä¸Šè¾¹çš„æ¡ä»¶ä¸å¯¹å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442844,"discussion_content":"åº”è¯¥æ˜¯å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552393906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75259,"user_name":"å¢¨åæ¬¡","can_delete":false,"product_type":"c1","uid":1330267,"ip_address":"","ucode":"926EDC57291C09","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/5b/5499d6e6.jpg","comment_is_top":false,"comment_ctime":1552371262,"is_pvip":false,"replies":[{"id":"27475","content":"ç»å¸¸è¢«å¤§å®¶å¿½è§†çš„æ˜¯ï¼Œé”ä¼šä¸ä¼šé‡Šæ”¾ã€‚åŸæ¥å¤§å®¶éƒ½è¿™ä¹ˆå¿½æ‚ ç”¨æˆ·ğŸ˜‚<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552396497,"ip_address":"","comment_id":75259,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552371262","product_id":100023901,"comment_content":"wait()æ˜¯ç­‰å¾…ï¼Œsleep()æ˜¯ä¼‘çœ ï¼Œç­‰å¾…åœ¨ä¸ç¡®å®šçš„æŸä¸ªæ—¶é—´ç‚¹å®Œæˆï¼Œä¼‘çœ å¿…é¡»åœ¨è®¾å®šå¥½çš„æ—¶é—´ç‚¹å®Œæˆã€‚wait()è·Ÿè€å¸ˆè®²çš„å°±åŒ»æµç¨‹ç›¸ä¼¼ï¼Œsleep()åˆ™è·Ÿæˆ‘ä»¬ç›¸ä¼¼ï¼Œè¦å®šé—¹é’Ÿï¼Œæ¯å¤©æ—©ä¸Šå‡†æ—¶8ç‚¹èµ·åºŠä¸Šç­ã€‚å®ƒä»¬çš„åº”ç”¨åœºæ™¯ä¹Ÿä¸ä¸€æ ·ï¼Œwait()ç”¨æ¥è§£å†³ç­‰å¾…æ‰§è¡Œä»»åŠ¡ï¼Œæé«˜æ•ˆç‡ï¼›sleep()ç”¨æ¥è§£å†³å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡ï¼Œwait()é€‚ç”¨äºè€å¸ˆæ‰€è®²çš„å¹¶å‘ç¼–ç¨‹ï¼Œè€Œsleep()åœ¨UIç¼–ç¨‹ä¸­æ¯”è¾ƒå¸¸ç”¨ï¼Œç”¨æ¥å¿½æ‚ ç”¨æˆ·ï¼Œæ¯”å¦‚ï¼šæ‰«æä¸€ä¸ªç›˜é‡Œé¢æ‰€æœ‰æ–‡ä»¶çš„è¿›åº¦æ¡(1%,2%...90%,100%)æˆ–â€œè¯·ç¨å...â€ä¹‹ç±»çš„æç¤ºã€‚","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442840,"discussion_content":"ç»å¸¸è¢«å¤§å®¶å¿½è§†çš„æ˜¯ï¼Œé”ä¼šä¸ä¼šé‡Šæ”¾ã€‚åŸæ¥å¤§å®¶éƒ½è¿™ä¹ˆå¿½æ‚ ç”¨æˆ·ğŸ˜‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552396497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75220,"user_name":"æçš®çš®çš®çš®çš®","can_delete":false,"product_type":"c1","uid":1200281,"ip_address":"","ucode":"3BF1DEE4A12359","user_header":"https://static001.geekbang.org/account/avatar/00/12/50/99/44378317.jpg","comment_is_top":false,"comment_ctime":1552366389,"is_pvip":false,"replies":[{"id":"27465","content":"ä¸ä¼šï¼ŒåŒæ­¥ä»£ç å—æ‰§è¡Œå®Œæ‰ä¼šé‡Šæ”¾<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552393161,"ip_address":"","comment_id":75220,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552366389","product_id":100023901,"comment_content":"notifyå’ŒnotifyAllæ˜¯åœ¨åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥ä»£ç å—ä¸­è¢«è°ƒç”¨çš„ï¼Œé‚£ä¹ˆè°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•åº”è¯¥ä¼šé‡Šæ”¾é”å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442826,"discussion_content":"ä¸ä¼šï¼ŒåŒæ­¥ä»£ç å—æ‰§è¡Œå®Œæ‰ä¼šé‡Šæ”¾\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552393161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75214,"user_name":"0bug","can_delete":false,"product_type":"c1","uid":1050335,"ip_address":"","ucode":"CADCC882F31784","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/df/60126ff3.jpg","comment_is_top":false,"comment_ctime":1552365452,"is_pvip":false,"replies":[{"id":"27459","content":"ä¸æ˜¯å…ˆè¿›å…ˆå‡ºï¼Œæ•°æ®ç»“æ„å•¥æ ·çš„æˆ‘ä¹Ÿæ²¡æ·±ç©¶è¿‡<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552390662,"ip_address":"","comment_id":75214,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552365452","product_id":100023901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼Œæ–‡ç« ä¸­è¯´çš„ï¼Œè°ƒç”¨wait()åï¼Œçº¿ç¨‹ä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œè¿™ä¸ªç­‰å¾…é˜Ÿåˆ—çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿåº”è¯¥ä¸æ˜¯æ ‡å‡†çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—å§ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442824,"discussion_content":"ä¸æ˜¯å…ˆè¿›å…ˆå‡ºï¼Œæ•°æ®ç»“æ„å•¥æ ·çš„æˆ‘ä¹Ÿæ²¡æ·±ç©¶è¿‡\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552390662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75086,"user_name":"æå¹¿","can_delete":false,"product_type":"c1","uid":1336612,"ip_address":"","ucode":"AEBFC69D7B8026","user_header":"https://static001.geekbang.org/account/avatar/00/14/65/24/b975a485.jpg","comment_is_top":false,"comment_ctime":1552354742,"is_pvip":false,"replies":[{"id":"27458","content":"å¤šä¸ªwaitå…±äº«ä¸€ä¸ªï¼Œsynché”æ˜¯å¦å¤–ä¸€ä¸ªã€‚è¿™ä¸ªä¼šåœ¨ç®¡ç¨‹é‡Œé¢é‡æ–°è®²<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552390399,"ip_address":"","comment_id":75086,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552354742","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè¯·é—®synchronizedå’Œé‡Œé¢çš„waitå…±ç”¨åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—å—ï¼Œä¸€ä¸ªsynchronizedé‡Œæœ‰å¤šä¸ªwaitä»–ä»¬ä¹Ÿå…±ç”¨åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442795,"discussion_content":"å¤šä¸ªwaitå…±äº«ä¸€ä¸ªï¼Œsynché”æ˜¯å¦å¤–ä¸€ä¸ªã€‚è¿™ä¸ªä¼šåœ¨ç®¡ç¨‹é‡Œé¢é‡æ–°è®²\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552390399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75084,"user_name":"yang","can_delete":false,"product_type":"c1","uid":1226705,"ip_address":"","ucode":"9FE1D02DF0F103","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJupkAwlMPemsyBhOT2BWJPnyicAqQhH731C7uV5fXjz9DicxO0eySia1JLqeMXAkQlFZZ41uXsw1I7g/132","comment_is_top":false,"comment_ctime":1552354734,"is_pvip":false,"replies":[{"id":"27457","content":"ä»–ä»¬é”çš„éƒ½æ˜¯thisè¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ç­‰å¾…é˜Ÿåˆ—æ˜¯ä¸€ä¸ª<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552390273,"ip_address":"","comment_id":75084,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552354734","product_id":100023901,"comment_content":"çº¿ç¨‹3å’Œ4åœ¨åŒä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Ÿä»–ä»¬ç”³è¯·çš„èµ„æºéƒ½ä¸ä¸€æ ·ï¼Œåº”è¯¥ä¹Ÿä¸æ˜¯ä¸€ä¸ªé”å§","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442794,"discussion_content":"ä»–ä»¬é”çš„éƒ½æ˜¯thisè¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ç­‰å¾…é˜Ÿåˆ—æ˜¯ä¸€ä¸ª\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552390273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75048,"user_name":"0bug","can_delete":false,"product_type":"c1","uid":1050335,"ip_address":"","ucode":"CADCC882F31784","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/df/60126ff3.jpg","comment_is_top":false,"comment_ctime":1552352343,"is_pvip":false,"replies":[{"id":"27393","content":"å¯ä»¥å»æ‰äº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552362593,"ip_address":"","comment_id":75048,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552352343","product_id":100023901,"comment_content":"&#47;&#47; ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ<br>while(!actr.apply(this, target))<br>  ï¼›<br>è¿™æ®µä»£ç çš„whileå¯ä»¥å»æ‰äº†å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442788,"discussion_content":"å¯ä»¥å»æ‰äº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552362593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75043,"user_name":"å¼ å…ˆç”Ÿä¸¶","can_delete":false,"product_type":"c1","uid":1138723,"ip_address":"","ucode":"D8AE94C76318D7","user_header":"https://static001.geekbang.org/account/avatar/00/11/60/23/efd87e29.jpg","comment_is_top":false,"comment_ctime":1552352120,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552352120","product_id":100023901,"comment_content":"1ã€waité‡Šæ”¾æŒæœ‰çš„é”ï¼Œsleepä¸ä¼š<br>2ã€sleepè®¾ç½®æŒ‚èµ·æ—¶é—´ï¼Œwaitå¦‚æœä¸è°ƒç”¨notifyæˆ–è€…notifyallï¼Œä¸€ç›´æŒ‚èµ·<br>3ã€waitæ˜¯Objectæ–¹æ³•ï¼Œsleepæ˜¯Threadæ–¹æ³•","like_count":0},{"had_liked":false,"id":75040,"user_name":"å“²æ°‘","can_delete":false,"product_type":"c1","uid":1031059,"ip_address":"","ucode":"CADC8EAB0B641A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKfkFogCZmVEmm2qRQR6j48TIzicEd4daaRcU4YgibORiaBSYaEPnW8Ke4KibpsU0MsaISZ6UAM1uTbmA/132","comment_is_top":false,"comment_ctime":1552351939,"is_pvip":false,"replies":[{"id":"27461","content":"è²Œä¼¼æ²¡å¬è¯´æœ‰åˆ†å¸ƒå¼çš„ç®¡ç¨‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552392821,"ip_address":"","comment_id":75040,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552351939","product_id":100023901,"comment_content":"åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¯¹åº”waitå’Œnotifyæœ‰å“ªäº›æ–¹å¼å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442786,"discussion_content":"è²Œä¼¼æ²¡å¬è¯´æœ‰åˆ†å¸ƒå¼çš„ç®¡ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552392821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75019,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1552351237,"is_pvip":false,"replies":[{"id":"27454","content":"åªè¦åŒ…å«ä¸€ä¸ªå°±è¯´æ˜è¢«åˆ†é…è¿‡","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1552390009,"ip_address":"","comment_id":75019,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552351237","product_id":100023901,"comment_content":"while æ¡ä»¶ä¸­ä¸æ˜¯ä¸æ“ä½œï¼Ÿæ€ä¹ˆæ˜¯æˆ–è¿ç®—","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442779,"discussion_content":"åªè¦åŒ…å«ä¸€ä¸ªå°±è¯´æ˜è¢«åˆ†é…è¿‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552390009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74985,"user_name":"ä¹æºªæºª520","can_delete":false,"product_type":"c1","uid":1168975,"ip_address":"","ucode":"99FBCEC0083E06","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/4f/008f9d6a.jpg","comment_is_top":false,"comment_ctime":1552348096,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552348096","product_id":100023901,"comment_content":"waitè®©çº¿ç¨‹æŒ‚èµ·çš„æ—¶å€™ï¼Œä¼šé‡Šæ”¾è‡ªå·±æŒæœ‰çš„é”èµ„æºï¼Œè€Œsleepè¿˜ä¼šç»§ç»­æŒæœ‰é”èµ„æºã€‚","like_count":0}]}