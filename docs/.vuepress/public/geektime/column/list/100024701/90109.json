{"id":90109,"title":"08 | 内核初始化：生意做大了就得成立公司","content":"<p>上一节，你获得了一本《企业经营宝典》，完成了一件大事，切换到了老板角色，从实模式切换到了保护模式。有了更强的寻址能力，接下来，我们就要按照宝典里面的指引，开始经营企业了。</p><p>内核的启动从入口函数start_kernel()开始。在init/main.c文件中，start_kernel相当于内核的main函数。打开这个函数，你会发现，里面是各种各样初始化函数XXXX_init。</p><p><img src=\"https://static001.geekbang.org/resource/image/cd/01/cdfc33db2fe1e07b6acf8faa3959cb01.jpeg?wh=2639*1742\" alt=\"\"></p><h2>初始化公司职能部门</h2><p>于是，公司要开始建立各种职能部门了。</p><p>首先是<strong>项目管理部门</strong>。咱们将来肯定要接各种各样的项目，因此，项目管理体系和项目管理流程首先要建立起来。之前讲的创建项目都是复制老项目，现在咱们需要有第一个全新的项目。这个项目需要你这个老板来打个样。</p><p>在操作系统里面，先要有个创始进程，有一行指令set_task_stack_end_magic(&amp;init_task)。这里面有一个参数init_task，它的定义是struct task_struct init_task = INIT_TASK(init_task)。它是系统创建的第一个进程，我们称为<strong>0号进程</strong>。这是唯一一个没有通过fork或者kernel_thread产生的进程，是进程列表的第一个。</p><!-- [[[read_end]]] --><p>所谓进程列表（Process List），就是咱们前面说的项目管理工具，里面列着我们所有接的项目。</p><p>第二个要初始化的就是<strong>办事大厅</strong>。有了办事大厅，我们就可以响应客户的需求。</p><p>这里面对应的函数是trap_init()，里面设置了很多<strong>中断门</strong>（Interrupt Gate），用于处理各种中断。其中有一个set_system_intr_gate(IA32_SYSCALL_VECTOR, entry_INT80_32)，这是系统调用的中断门。系统调用也是通过发送中断的方式进行的。当然，64位的有另外的系统调用方法，这一点我们放到后面的系统调用章节详细谈。</p><p>接下来要初始化的是咱们的<strong>会议室管理系统</strong>。对应的，mm_init()就是用来初始化内存管理模块。</p><p>项目需要项目管理进行调度，需要执行一定的调度策略。sched_init()就是用于初始化调度模块。</p><p>vfs_caches_init()会用来初始化基于内存的文件系统rootfs。在这个函数里面，会调用mnt_init()-&gt;init_rootfs()。这里面有一行代码，register_filesystem(&amp;rootfs_fs_type)。在VFS虚拟文件系统里面注册了一种类型，我们定义为struct file_system_type rootfs_fs_type。</p><p>文件系统是我们的项目资料库，为了兼容各种各样的文件系统，我们需要将文件的相关数据结构和操作抽象出来，形成一个抽象层对上提供统一的接口，这个抽象层就是VFS（Virtual File System），虚拟文件系统。</p><p>这里的rootfs还有其他用处，下面我们会用到。</p><p><img src=\"https://static001.geekbang.org/resource/image/d8/f5/d85b24af560f288847ea9f3e8776adf5.jpeg?wh=2609*1523\" alt=\"\"></p><p>最后，start_kernel()调用的是rest_init()，用来做其他方面的初始化，这里面做了好多的工作。</p><h2>初始化1号进程</h2><p>rest_init的第一大工作是，用kernel_thread(kernel_init, NULL, CLONE_FS)创建第二个进程，这个是<strong>1号进程</strong>。</p><p>1号进程对于操作系统来讲，有“划时代”的意义。因为它将运行一个用户进程，这意味着这个公司把一个老板独立完成的制度，变成了可以交付他人完成的制度。这个1号进程就相当于老板带了一个大徒弟，有了第一个，就有第二个，后面大徒弟开枝散叶，带了很多徒弟，形成一棵进程树。</p><p>一旦有了用户进程，公司的运行模式就要发生一定的变化。因为原来你是老板，没有雇佣其他人，所有东西都是你的，无论多么关键的资源，第一，不会有人给你抢，第二，不会有人恶意破坏、恶意使用。</p><p>但是现在有了其他人，你就要开始做一定的区分，哪些是核心资源，哪些是非核心资源；办公区也要分开，有普通的项目人员都能访问的项目工作区，还有职业核心人员能够访问的核心保密区。</p><p>好在x86提供了分层的权限机制，把区域分成了四个Ring，越往里权限越高，越往外权限越低。</p><p><img src=\"https://static001.geekbang.org/resource/image/2b/42/2b53b470673cde8f9d8e2573f7d07242.jpg?wh=2059*1202\" alt=\"\"></p><p>操作系统很好地利用了这个机制，将能够访问关键资源的代码放在Ring0，我们称为<strong>内核态</strong>（Kernel Mode）；将普通的程序代码放在Ring3，我们称为<strong>用户态</strong>（User Mode）。</p><p>你别忘了，现在咱们的系统已经处于保护模式了，保护模式除了可访问空间大一些，还有另一个重要功能，就是“保护”，也就是说，当处于用户态的代码想要执行更高权限的指令，这种行为是被禁止的，要防止他们为所欲为。</p><p>如果用户态的代码想要访问核心资源，怎么办呢？咱们不是有提供系统调用的办事大厅吗？这里是统一的入口，用户态代码在这里请求就是了。办事大厅后面就是内核态，用户态代码不用管后面发生了什么，做完了返回结果就可以了。</p><p>当一个用户态的程序运行到一半，要访问一个核心资源，例如访问网卡发一个网络包，就需要暂停当前的运行，调用系统调用，接下来就轮到内核中的代码运行了。</p><p>首先，内核将从系统调用传过来的包，在网卡上排队，轮到的时候就发送。发送完了，系统调用就结束了，返回用户态，让暂停运行的程序接着运行。</p><p>这个暂停怎么实现呢？其实就是把程序运行到一半的情况保存下来。例如，我们知道，内存是用来保存程序运行时候的中间结果的，现在要暂时停下来，这些中间结果不能丢，因为再次运行的时候，还要基于这些中间结果接着来。另外就是，当前运行到代码的哪一行了，当前的栈在哪里，这些都是在寄存器里面的。</p><p>所以，暂停的那一刻，要把当时CPU的寄存器的值全部暂存到一个地方，这个地方可以放在进程管理系统很容易获取的地方。在后面讨论进程管理数据结构的时候，我们还会详细讲。当系统调用完毕，返回的时候，再从这个地方将寄存器的值恢复回去，就能接着运行了。</p><p><img src=\"https://static001.geekbang.org/resource/image/71/e6/71b04097edb2d47f01ab5585fd2ea4e6.jpeg?wh=4711*3424\" alt=\"\"></p><p>这个过程就是这样的：用户态-系统调用-保存寄存器-内核态执行系统调用-恢复寄存器-返回用户态，然后接着运行。</p><p><img src=\"https://static001.geekbang.org/resource/image/d2/14/d2fce8af88dd278670395ce1ca6d4d14.jpg?wh=2232*851\" alt=\"\"></p><h3>从内核态到用户态</h3><p>我们再回到1号进程启动的过程。当前执行kernel_thread这个函数的时候，我们还在内核态，现在我们就来跨越这道屏障，到用户态去运行一个程序。这该怎么办呢？很少听说“先内核态再用户态”的。</p><p>kernel_thread的参数是一个函数kernel_init，也就是这个进程会运行这个函数。在kernel_init里面，会调用kernel_init_freeable()，里面有这样的代码：</p><pre><code>if (!ramdisk_execute_command)\n\t\tramdisk_execute_command = &quot;/init&quot;;\n</code></pre><p>先不管ramdisk是啥，我们回到kernel_init里面。这里面有这样的代码块：</p><pre><code>\tif (ramdisk_execute_command) {\n\t\tret = run_init_process(ramdisk_execute_command);\n......\n\t}\n......\n\tif (!try_to_run_init_process(&quot;/sbin/init&quot;) ||\n\t    !try_to_run_init_process(&quot;/etc/init&quot;) ||\n\t    !try_to_run_init_process(&quot;/bin/init&quot;) ||\n\t    !try_to_run_init_process(&quot;/bin/sh&quot;))\n\t\treturn 0;\n\n</code></pre><p>这就说明，1号进程运行的是一个文件。如果我们打开run_init_process函数，会发现它调用的是do_execve。</p><p>这个名字是不是看起来很熟悉？前面讲系统调用的时候，execve是一个系统调用，它的作用是运行一个执行文件。加一个do_的往往是内核系统调用的实现。没错，这就是一个系统调用，它会尝试运行ramdisk的“/init”，或者普通文件系统上的“/sbin/init”“/etc/init”“/bin/init”“/bin/sh”。不同版本的Linux会选择不同的文件启动，但是只要有一个起来了就可以。</p><pre><code>static int run_init_process(const char *init_filename)\n{\n\targv_init[0] = init_filename;\n\treturn do_execve(getname_kernel(init_filename),\n\t\t(const char __user *const __user *)argv_init,\n\t\t(const char __user *const __user *)envp_init);\n}\n</code></pre><p>如何利用执行init文件的机会，从内核态回到用户态呢？</p><p>我们从系统调用的过程可以得到启发，“用户态-系统调用-保存寄存器-内核态执行系统调用-恢复寄存器-返回用户态”，然后接着运行。而咱们刚才运行init，是调用do_execve，正是上面的过程的后半部分，从内核态执行系统调用开始。</p><p>do_execve-&gt;do_execveat_common-&gt;exec_binprm-&gt;search_binary_handler，这里面会调用这段内容：</p><pre><code>int search_binary_handler(struct linux_binprm *bprm)\n{\n  ......\n  struct linux_binfmt *fmt;\n  ......\n  retval = fmt-&gt;load_binary(bprm);\n  ......\n}\n\n</code></pre><p>也就是说，我要运行一个程序，需要加载这个二进制文件，这就是我们常说的<strong>项目执行计划书</strong>。它是有一定格式的。Linux下一个常用的格式是<strong>ELF</strong>（Executable and Linkable Format，可执行与可链接格式）。于是我们就有了下面这个定义：</p><pre><code>static struct linux_binfmt elf_format = {\n.module\t= THIS_MODULE,\n.load_binary\t= load_elf_binary,\n.load_shlib\t= load_elf_library,\n.core_dump\t= elf_core_dump,\n.min_coredump\t= ELF_EXEC_PAGESIZE,\n};\n\n</code></pre><p>这其实就是先调用load_elf_binary，最后调用start_thread。</p><pre><code>void\nstart_thread(struct pt_regs *regs, unsigned long new_ip, unsigned long new_sp)\n{\nset_user_gs(regs, 0);\nregs-&gt;fs\t= 0;\nregs-&gt;ds\t= __USER_DS;\nregs-&gt;es\t= __USER_DS;\nregs-&gt;ss\t= __USER_DS;\nregs-&gt;cs\t= __USER_CS;\nregs-&gt;ip\t= new_ip;\nregs-&gt;sp\t= new_sp;\nregs-&gt;flags\t= X86_EFLAGS_IF;\nforce_iret();\n}\nEXPORT_SYMBOL_GPL(start_thread);\n</code></pre><p>看到这里，你是不是有点感觉了？struct pt_regs，看名字里的register，就是寄存器啊！这个结构就是在系统调用的时候，内核中保存用户态运行上下文的，里面将用户态的代码段CS设置为__USER_CS，将用户态的数据段DS设置为__USER_DS，以及指令指针寄存器IP、栈指针寄存器SP。这里相当于补上了原来系统调用里，保存寄存器的一个步骤。</p><p>最后的iret是干什么的呢？它是用于从系统调用中返回。这个时候会恢复寄存器。从哪里恢复呢？按说是从进入系统调用的时候，保存的寄存器里面拿出。好在上面的函数补上了寄存器。CS和指令指针寄存器IP恢复了，指向用户态下一个要执行的语句。DS和函数栈指针SP也被恢复了，指向用户态函数栈的栈顶。所以，下一条指令，就从用户态开始运行了。</p><h3>ramdisk的作用</h3><p>init终于从内核到用户态了。一开始到用户态的是ramdisk的init，后来会启动真正根文件系统上的init，成为所有用户态进程的祖先。</p><p>为什么会有ramdisk这个东西呢？还记得上一节咱们内核启动的时候，配置过这个参数：</p><pre><code>initrd16 /boot/initramfs-3.10.0-862.el7.x86_64.img\n</code></pre><p>就是这个东西，这是一个基于内存的文件系统。为啥会有这个呢？</p><p>是因为刚才那个init程序是在文件系统上的，文件系统一定是在一个存储设备上的，例如硬盘。Linux访问存储设备，要有驱动才能访问。如果存储系统数目很有限，那驱动可以直接放到内核里面，反正前面我们加载过内核到内存里了，现在可以直接对存储系统进行访问。</p><p>但是存储系统越来越多了，如果所有市面上的存储系统的驱动都默认放进内核，内核就太大了。这该怎么办呢？</p><p>我们只好先弄一个基于内存的文件系统。内存访问是不需要驱动的，这个就是ramdisk。这个时候，ramdisk是根文件系统。</p><p>然后，我们开始运行ramdisk上的/init。等它运行完了就已经在用户态了。/init这个程序会先根据存储系统的类型加载驱动，有了驱动就可以设置真正的根文件系统了。有了真正的根文件系统，ramdisk上的/init会启动文件系统上的init。</p><p>接下来就是各种系统的初始化。启动系统的服务，启动控制台，用户就可以登录进来了。</p><p>先别忙着高兴，rest_init的第一个大事情才完成。我们仅仅形成了用户态所有进程的祖先。</p><h2>创建2号进程</h2><p>用户态的所有进程都有大师兄了，那内核态的进程有没有一个人统一管起来呢？有的，rest_init第二大事情就是第三个进程，就是2号进程。</p><p>kernel_thread(kthreadd, NULL, CLONE_FS | CLONE_FILES)又一次使用kernel_thread函数创建进程。这里需要指出一点，函数名thread可以翻译成“线程”，这也是操作系统很重要的一个概念。它和进程有什么区别呢？为什么这里创建的是进程，函数名却是线程呢？</p><p>从用户态来看，创建进程其实就是立项，也就是启动一个项目。这个项目包含很多资源，例如会议室、资料库等。这些东西都属于这个项目，但是这个项目需要人去执行。有多个人并行执行不同的部分，这就叫<strong>多线程</strong>（Multithreading）。如果只有一个人，那它就是这个项目的主线程。</p><p>但是从内核态来看，无论是进程，还是线程，我们都可以统称为任务（Task），都使用相同的数据结构，平放在同一个链表中。这些在进程的那一章节，我会更加详细地讲。</p><p>这里的函数kthreadd，负责所有内核态的线程的调度和管理，是内核态所有线程运行的祖先。</p><p>这下好了，用户态和内核态都有人管了，可以开始接项目了。</p><h2>总结时刻</h2><p>这一节，我们讲了内核的初始化过程，主要做了以下几件事情：</p><ul>\n<li>\n<p>各个职能部门的创建；</p>\n</li>\n<li>\n<p>用户态祖先进程的创建；</p>\n</li>\n<li>\n<p>内核态祖先进程的创建。</p>\n</li>\n</ul><p>咱们还是用一个图来总结一下这个过程。</p><p><img src=\"https://static001.geekbang.org/resource/image/75/cd/758c283cf7633465d24ab3ef778328cd.jpeg?wh=2639*2063\" alt=\"\"></p><h2>课堂练习</h2><p>这一节，我们看到内核创建了一些进程，这些进程都是放在一个列表中的，请你研读内核代码，看看这个列表是如何实现的。</p><p>欢迎留言和我分享你的疑惑和见解，也欢迎你收藏本节内容，反复研读。你也可以把今天的内容分享给你的朋友，和他一起学习、进步。</p><p></p>","neighbors":{"left":{"article_title":"07 | 从BIOS到bootloader：创业伊始，有活儿老板自己上","id":89739},"right":{"article_title":"09 | 系统调用：公司成立好了就要开始接项目","id":90394}},"comments":[{"had_liked":false,"id":86581,"user_name":"Virtue","can_delete":false,"product_type":"c1","uid":1441187,"ip_address":"","ucode":"67B2D1AD06D714","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKbwJ55niaS6Df8BjvKK2ug2jFibCYhicz1lx7GDYOGs9MMgbHJmWoH1DXZAR5TKsESyUz1zsaw4Flew/132","comment_is_top":true,"comment_ctime":1555403146,"is_pvip":false,"replies":[{"id":"49636","content":"对的对的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567694989,"ip_address":"","comment_id":86581,"utype":1}],"discussion_count":4,"race_medal":0,"score":"9.2233723304679997e+18","product_id":100024701,"comment_content":"感觉大家不用太纠结于代码细节了，知道内河初始化都干了啥就行了吧。。","like_count":69,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447081,"discussion_content":"对的对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567694989,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1656719,"avatar":"https://static001.geekbang.org/account/avatar/00/19/47/8f/85f73373.jpg","nickname":"ADC不能C","note":"","ucode":"BD64C5DBC24AF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":14725,"discussion_content":"主要找不到位置咋搞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568778508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1926508,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/65/6c/be97a3ae.jpg","nickname":"Geek_bb2310","note":"","ucode":"022885B257DEB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1656719,"avatar":"https://static001.geekbang.org/account/avatar/00/19/47/8f/85f73373.jpg","nickname":"ADC不能C","note":"","ucode":"BD64C5DBC24AF6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":232387,"discussion_content":"你是指？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586868072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":14725,"ip_address":""},"score":232387,"extra":""},{"author":{"id":1186807,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1b/f7/45e8b64a.jpg","nickname":"Fire","note":"","ucode":"4A2C50B77EDB2C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1656719,"avatar":"https://static001.geekbang.org/account/avatar/00/19/47/8f/85f73373.jpg","nickname":"ADC不能C","note":"","ucode":"BD64C5DBC24AF6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338401,"discussion_content":"vscode自动跳转。手动滑稽","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609255938,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":14725,"ip_address":""},"score":338401,"extra":""}]}]},{"had_liked":false,"id":85463,"user_name":"why","can_delete":false,"product_type":"c1","uid":1012937,"ip_address":"","ucode":"C9E796E53F6F5E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/c9/d3439ca4.jpg","comment_is_top":false,"comment_ctime":1555065453,"is_pvip":false,"discussion_count":8,"race_medal":0,"score":"847663622765","product_id":100024701,"comment_content":"- 内核初始化, 运行 `start_kernel()` 函数(位于 init&#47;main.c), 初始化做三件事<br>    - 创建样板进程, 及各个模块初始化<br>    - 创建管理&#47;创建用户态进程的进程<br>    - 创建管理&#47;创建内核态进程的进程<br>---<br>- 创建样板进程,及各个模块初始化<br>    - 创建第一个进程, 0号进程. `set_task_stack_end_magic(&amp;init_task)` and `struct task_struct init_task = INIT_TASK(init_task)`<br>    - 初始化中断, `trap_init()`. 系统调用也是通过发送中断进行, 由 `set_system_intr_gate()` 完成.<br>    - 初始化内存管理模块, `mm_init()`<br>    - 初始化进程调度模块, `sched_init()`<br>    - 初始化基于内存的文件系统 rootfs, `vfs_caches_init()`<br>        - VFS(虚拟文件系统)将各种文件系统抽象成统一接口<br>    - 调用 `rest_init()` 完成其他初始化工作<br>---<br>- 创建管理&#47;创建用户态进程的进程, 1号进程<br>    - `rest_init()` 通过 `kernel_thread(kernel_init,...)` 创建 1号进程(工作在用户态).<br>    - 权限管理<br>        - x86 提供 4个 Ring 分层权限<br>        - 操作系统利用: Ring0-内核态(访问核心资源); Ring3-用户态(普通程序)<br>    - 用户态调用系统调用: 用户态-系统调用-保存寄存器-内核态执行系统调用-恢复寄存器-返回用户态<br>    - 新进程执行 kernel_init 函数, 先运行 ramdisk 的 &#47;init 程序(位于内存中)<br>        - 首先加载 ELF 文件<br>        - 设置用于保存用户态寄存器的结构体<br>        - 返回进入用户态<br>        - &#47;init 加载存储设备的驱动<br>     - kernel_init 函数启动存储设备文件系统上的 init<br>---<br>- 创建管理&#47;创建内核态进程的进程, 2号进程<br>    - `rest_init()` 通过 `kernel_thread(kthreadd,...)` 创建 2号进程(工作在内核态).<br>    - `kthreadd` 负责所有内核态线程的调度和管理","like_count":198,"discussions":[{"author":{"id":1846328,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/2c/38/e4114500.jpg","nickname":"白泽","note":"","ucode":"0EBC6836154279","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323714,"discussion_content":"课代表牛批","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1604986198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2710343,"avatar":"https://static001.geekbang.org/account/avatar/00/29/5b/47/791d0f5e.jpg","nickname":"贝贝1112","note":"","ucode":"82EB3D0DF4903D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586987,"discussion_content":"why，能和我搞基吗\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662644313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1216484,"avatar":"https://static001.geekbang.org/account/avatar/00/12/8f/e4/7e1eff62.jpg","nickname":"排骨","note":"","ucode":"471D3A9D72AA63","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543276,"discussion_content":"有一种 作者按照这个思路写细节，但是越写越散 的感觉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641043110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785821,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3f/dd/f918566d.jpg","nickname":"夏目","note":"","ucode":"038B4FDFE8A306","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333966,"discussion_content":"化繁为简，功力深厚理解透彻呀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607680884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292444,"discussion_content":"why是谁啊，好厉害，每篇下面都发学习笔记","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595227994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2460458,"avatar":"","nickname":"Geek_037032","note":"","ucode":"848C6E65CC9B9C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553861,"discussion_content":"学习委员兼课代表","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646120405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":292444,"ip_address":""},"score":553861,"extra":""}]},{"author":{"id":2035956,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ecruTrMgzvqIs5iaWVibZw4Rxic42ZXGTflvOFHiaZEkf32Su01gDCWT8tdIcEoybg0ibAYU2Q8f9bleL7Q37fKguxQ/132","nickname":"做一个积极的跳蚤","note":"","ucode":"BBE367BBCB6C28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285646,"discussion_content":"确实厉害，大家都能总结，但是没几个像why这样总结得很干练","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592903466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1266698,"avatar":"https://static001.geekbang.org/account/avatar/00/13/54/0a/9a002ad5.jpg","nickname":"Adam Lau","note":"","ucode":"7E542D6E789500","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244082,"discussion_content":"why是谁，好厉害，每篇下面都发学习笔记","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587567886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85449,"user_name":"时间是最真的答案","can_delete":false,"product_type":"c1","uid":1183601,"ip_address":"","ucode":"B90F3EF769F865","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/71/9273e8a4.jpg","comment_is_top":false,"comment_ctime":1555061680,"is_pvip":false,"replies":[{"id":"49702","content":"学点c<br>","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698080,"ip_address":"","comment_id":85449,"utype":1}],"discussion_count":7,"race_medal":0,"score":"276432968624","product_id":100024701,"comment_content":"我做Java的，看的云里雾里，好慌啊","like_count":65,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446672,"discussion_content":"学点c\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1731543,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/6b/d7/8872624a.jpg","nickname":"xmeng","note":"","ucode":"C0CA2182BA3B4B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386177,"discussion_content":"我也是，硬着头皮看","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627456146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1811277,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a3/4d/59390ba9.jpg","nickname":"排骨","note":"","ucode":"A413CF46211E1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581172,"discussion_content":"硬着头皮看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658570029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484729,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a7/b9/a08e9ab9.jpg","nickname":"小菜变大鸟","note":"","ucode":"A41998D3CC44E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348662,"discussion_content":"同Java，学操作系统了解底层是强化自己的能力，加油干~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612670823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2309990,"avatar":"","nickname":"Geek_93217e","note":"","ucode":"DC70FDB8AD83EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327575,"discussion_content":"正常的，java开发更加偏向于业务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605865212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261634,"avatar":"https://static001.geekbang.org/account/avatar/00/13/40/42/d5c23178.jpg","nickname":"jackhance","note":"","ucode":"934B0D20CCD06C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300446,"discussion_content":"我也是 哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598106600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1623626,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c6/4a/3bd896fc.jpg","nickname":"Heiky","note":"","ucode":"03AA79E1BC4AE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298125,"discussion_content":"我也是java，看起来很方，看不太懂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597198490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85253,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1555028632,"is_pvip":false,"replies":[{"id":"49723","content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698584,"ip_address":"","comment_id":85253,"utype":1}],"discussion_count":4,"race_medal":0,"score":"194828556952","product_id":100024701,"comment_content":"打卡day9<br>0生1，1生众生，2是内核态的办公室主任～","like_count":45,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446608,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1482915,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","nickname":"业余爱好者","note":"","ucode":"A890935A982988","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":183821,"discussion_content":"无生一，生二，生万物","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582521382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1483620,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a3/64/4c3d01ec.jpg","nickname":"dlxm455","note":"","ucode":"FFFDF51CDC5D34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":172797,"discussion_content":"2生众神","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581786530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238245,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e4/e5/82132920.jpg","nickname":"亦知码蚁","note":"","ucode":"400344A6E1207F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":157335,"discussion_content":"这个说法巧妙","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580470217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85240,"user_name":"rocedu","can_delete":false,"product_type":"c1","uid":1013097,"ip_address":"","ucode":"E46E29CBBB94A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/69/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1555026705,"is_pvip":true,"replies":[{"id":"49725","content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698610,"ip_address":"","comment_id":85240,"utype":1}],"discussion_count":1,"race_medal":0,"score":"147583914769","product_id":100024701,"comment_content":"推荐一本入门书配套本课程学习，《庖丁解牛Linux内核分析》（ https:&#47;&#47;j.youzan.com&#47;BA2Fr9）","like_count":35,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446603,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100787,"user_name":"Arthur.Li","can_delete":false,"product_type":"c1","uid":1005824,"ip_address":"","ucode":"EC2436A5136C13","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/00/6d14972a.jpg","comment_is_top":false,"comment_ctime":1559638979,"is_pvip":false,"replies":[{"id":"37046","content":"0号不运行","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1560255628,"ip_address":"","comment_id":100787,"utype":1}],"discussion_count":5,"race_medal":0,"score":"143293559747","product_id":100024701,"comment_content":"0号进程不属于内核态吗？属于的话为啥2号才是内核态祖先","like_count":34,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452678,"discussion_content":"0号不运行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560255628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292440,"discussion_content":"好问题","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1595226967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2401422,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","nickname":"geek","note":"","ucode":"FF0845140D72A9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362668,"discussion_content":"0号进程不运行的话，它都干了啥呢？它如果干了啥，那就运行了啊。如果啥都没干，那不就有没有0号进程都无所谓了？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617004657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2401422,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","nickname":"geek","note":"","ucode":"FF0845140D72A9","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":389247,"discussion_content":"看代码的话，0号是用来跑start_kernel，跑完就没了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629191568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":362668,"ip_address":""},"score":389247,"extra":""},{"author":{"id":1035612,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cd/5c/e09eac13.jpg","nickname":"刘強","note":"","ucode":"B2E41BB894A727","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2028811,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","nickname":"兔嘟嘟","note":"","ucode":"5A9042B4C7670C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589225,"discussion_content":"这个确定吗？看代码太费劲了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664533111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":389247,"ip_address":"上海"},"score":589225,"extra":""}]}]},{"had_liked":false,"id":85236,"user_name":"rocedu","can_delete":false,"product_type":"c1","uid":1013097,"ip_address":"","ucode":"E46E29CBBB94A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/69/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1555026012,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"130404044892","product_id":100024701,"comment_content":"学习Linux内核，我建议看看myKernel(https:&#47;&#47;github.com&#47;mengning&#47;mykernel)","like_count":30},{"had_liked":false,"id":85675,"user_name":"William","can_delete":false,"product_type":"c1","uid":1241365,"ip_address":"","ucode":"4499F99B180102","user_header":"https://static001.geekbang.org/account/avatar/00/12/f1/15/8fcf8038.jpg","comment_is_top":false,"comment_ctime":1555170852,"is_pvip":true,"discussion_count":4,"race_medal":2,"score":"126109222436","product_id":100024701,"comment_content":"0号进程，唯一一个没有通过fork或kernel_thread产生的进程，是进程列表的第一个。<br>1号进程是用户态祖先进程。<br>2号进程是内核态所有线程运行的祖先。","like_count":30,"discussions":[{"author":{"id":1591346,"avatar":"https://static001.geekbang.org/account/avatar/00/18/48/32/b7d55867.jpg","nickname":"像我这样的人","note":"","ucode":"EB9F37C8D7136E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569668,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651506415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2417738,"avatar":"https://static001.geekbang.org/account/avatar/00/24/e4/4a/49a3ce23.jpg","nickname":"小酒窝先生","note":"","ucode":"B147EB695E3CF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390006,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629595444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1180877,"avatar":"https://static001.geekbang.org/account/avatar/00/12/04/cd/3f73dead.jpg","nickname":"黑曼巴ye","note":"","ucode":"3ACFD4B79E46A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297562,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596969206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1198503,"avatar":"https://static001.geekbang.org/account/avatar/00/12/49/a7/3342b38b.jpg","nickname":"hmreal","note":"","ucode":"60346B13BC78F3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":240744,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587386032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85848,"user_name":"孜孜","can_delete":false,"product_type":"c1","uid":1018203,"ip_address":"","ucode":"7EF4FB644357CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/5b/d8f78c1e.jpg","comment_is_top":false,"comment_ctime":1555256458,"is_pvip":true,"replies":[{"id":"49682","content":"赞，加油","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567697168,"ip_address":"","comment_id":85848,"utype":1}],"discussion_count":1,"race_medal":0,"score":"108929438858","product_id":100024701,"comment_content":"逐渐一篇文章要读很多遍，花很多时间。坚持，多看一点，多花点时间，总比啥都不干强。","like_count":25,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446836,"discussion_content":"赞，加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567697168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181221,"user_name":"业余爱好者","can_delete":false,"product_type":"c1","uid":1482915,"ip_address":"","ucode":"A890935A982988","user_header":"https://static001.geekbang.org/account/avatar/00/16/a0/a3/8da99bb0.jpg","comment_is_top":false,"comment_ctime":1582521104,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"104661736208","product_id":100024701,"comment_content":"问：ps aux 为什么看不到0号？<br>答：0号是启动过程，完成自己的使命就可以退隐了。","like_count":25},{"had_liked":false,"id":148454,"user_name":"黑色毛衣","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1573009814,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"104652224918","product_id":100024701,"comment_content":"来来来，自己解决，丰衣足食<br><br><br>进程0<br><br>内核是一个大的程序，可以控制硬件，也可以创建、运行、终止、控制所有的进程。当内核被加载到内存后，首先就会有完成内核初始化的函数start_kernel()从无到有的创建一个内核线程swap，并设置其PID为0，即进程0；它也叫闲逛进程；<br><br>进程0执行的是cpu_idle()函数，该函数仅有一条hlt汇编指令，就是在系统闲置时用来降低电力的使用和减少热的产生。同时进程0的PCB叫做init_task，在很多链表中起了表头的作用。<br><br>当就绪队列中再没有其他进程时，闲逛进程就会被调度程序选中，以此来省电，减少热量的产生。<br><br>也就是说当 Process List 里面有其他进程，那么 0 进程就不会运行了","like_count":25,"discussions":[{"author":{"id":1525046,"avatar":"https://static001.geekbang.org/account/avatar/00/17/45/36/51fada4b.jpg","nickname":"周游","note":"","ucode":"75F340179C5207","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581498,"discussion_content":"最后两句话，无就绪进程，0号进程会被选中，选中不就是执行吗，所以无其他进程时，应该会执行的是0号进程吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658817811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85276,"user_name":"安排","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1555030262,"is_pvip":false,"replies":[{"id":"49720","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698549,"ip_address":"","comment_id":85276,"utype":1}],"discussion_count":1,"race_medal":0,"score":"100339278070","product_id":100024701,"comment_content":"ramdisk里面是不是也要提前放上存储设备的驱动，然后ramdisk里面的init起来之后，加载对应存储设备的驱动，为了适应各种存储设备，ramdisk里面需要放上市面上各种存储设备的驱动吗？如果是这样的话，那跟把这些驱动放到内核里有什么区别呢？反正也没有节省空间。 <br><br>我的理解是这样的，ramdisk中只放要运行的电脑上的存储设备驱动，内核中不放存储设备驱动，这样的话如果每次存储设备不同，我们只需要做一个对应的ramdisk，每次更换存储设备只需要做ramdisk，而内核只需要编译一次就行了，这样效率会提高？如果驱动放到内核一起编译，每次换存储设备都要重新编译内核，效率低。编译内核比做一个新的ramdisk效率低。<br><br>不知道以上理解对不对，还请老师指点一二。","like_count":24,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446616,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85824,"user_name":"焰火","can_delete":false,"product_type":"c1","uid":1244606,"ip_address":"","ucode":"D3353B386DE3B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/fd/be/079c78c7.jpg","comment_is_top":false,"comment_ctime":1555248342,"is_pvip":true,"replies":[{"id":"49686","content":"进程切换更复杂了。后面会讲。内核不要当成一个进程看，要不容易晕","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567697362,"ip_address":"","comment_id":85824,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48799888598","product_id":100024701,"comment_content":"超哥您好：<br>用户态 --&gt; 内核态 --&gt; 用户态  这点感觉很像进程间的切换啊<br>如果把 内核态 也当作 一个进程来看，这个一个内核态进程 是 服务于 多个用户进程的嘛？ <br>多个用户进程对某一个硬件资源进行系统调用 应该也是有  阻塞排队等待的吧 ~~  ","like_count":11,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446825,"discussion_content":"进程切换更复杂了。后面会讲。内核不要当成一个进程看，要不容易晕","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567697362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86805,"user_name":"sunsweet","can_delete":false,"product_type":"c1","uid":1027879,"ip_address":"","ucode":"787F9E1EC6A67E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/27/76489618.jpg","comment_is_top":false,"comment_ctime":1555463259,"is_pvip":false,"replies":[{"id":"31274","content":"链表头","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1555493746,"ip_address":"","comment_id":86805,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44505136219","product_id":100024701,"comment_content":"0号进程能详细说说嘛，它是干啥用的","like_count":10,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447182,"discussion_content":"链表头","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555493746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85306,"user_name":"登高","can_delete":false,"product_type":"c1","uid":1068600,"ip_address":"","ucode":"CD40046238BA18","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/38/3faa8377.jpg","comment_is_top":false,"comment_ctime":1555032548,"is_pvip":true,"replies":[{"id":"49717","content":"那就看，哈哈","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698436,"ip_address":"","comment_id":85306,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44504705508","product_id":100024701,"comment_content":"不去看源码似乎跟不动了","like_count":11,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446623,"discussion_content":"那就看，哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698436,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":158188,"user_name":"拯救地球好累","can_delete":false,"product_type":"c1","uid":1339022,"ip_address":"","ucode":"7643439601EF4C","user_header":"https://static001.geekbang.org/account/avatar/00/14/6e/8e/5d309a85.jpg","comment_is_top":false,"comment_ctime":1575344502,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"40230050166","product_id":100024701,"comment_content":"初始化过程：<br>start_kernel-&gt;init_task-&gt;trap_init-&gt;mm_init-&gt;sched_init-&gt;rest_init（创建1号进程和2号进程）<br><br>内核态到用户态的恢复过程：<br>(rest_init-&gt;kernel_init)-&gt;run_in_process-&gt;do_execve-&gt;do_execveat_common-&gt;exec_binprm-&gt;search_binary_handler-&gt;load_elf_binary &amp; start_thread（start_thread中设置好用户态的寄存器）-&gt;<br>radomdisk的init-&gt;实际文件系统的init<br><br>用户态执行系统调用：<br>执行系统调用时，先将用户态的寄存器等信息保存到内存中的某个地方（todo），再执行内核态逻辑，再从这个地方将寄存器的值恢复回去并继续执行。<br>![d2fce8af88dd278670395ce1ca6d4d14.jpeg](evernotecid:&#47;&#47;FAB02A2C-7D54-454F-9713-7D18B96D3568&#47;appyinxiangcom&#47;10319726&#47;ENNote&#47;p401?hash=d2fce8af88dd278670395ce1ca6d4d14)<br><br>note:加一个do_的函数往往是内核系统调用的实现<br><br>请问下老师，阅读大型项目的C语言源代码，像Linux，除了用vim及其拓展工具或者网站，有没有其他合适的IDE或工具推荐呢？","like_count":9,"discussions":[{"author":{"id":1959822,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e7/8e/318cfde0.jpg","nickname":"Spoon","note":"","ucode":"2FF9193AD482C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340528,"discussion_content":"vscode完全可以","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610027777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339820,"avatar":"https://static001.geekbang.org/account/avatar/00/14/71/ac/8295e3e7.jpg","nickname":"书忆江南","note":"","ucode":"90776A7CE06D66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":155567,"discussion_content":"关于CLion，我在这个博客里提到了：https://blog.csdn.net/qq_33588730/article/details/81061724","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1580264437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2170263,"avatar":"https://static001.geekbang.org/account/avatar/00/21/1d/97/9a8b2d0c.jpg","nickname":"🙃","note":"","ucode":"6E41B3D10A33CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305718,"discussion_content":"source insight","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600068024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339820,"avatar":"https://static001.geekbang.org/account/avatar/00/14/71/ac/8295e3e7.jpg","nickname":"书忆江南","note":"","ucode":"90776A7CE06D66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":155564,"discussion_content":"CLion，我用它看过ndnSIM的源码（C++的），强烈推荐，和大名鼎鼎的Intellij IDEA是同一家出的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580264345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1755674,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ca/1a/53229822.jpg","nickname":"exec","note":"","ucode":"31AA6E7BF7B13A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":145969,"discussion_content":"source insight\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579591212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143302,"user_name":"zhong","can_delete":false,"product_type":"c1","uid":1476156,"ip_address":"","ucode":"97565D69EBD556","user_header":"","comment_is_top":false,"comment_ctime":1571664874,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"35931403242","product_id":100024701,"comment_content":"“Linux 访问存储设备，要有驱动才能访问”，这句有点疑惑，mbr以及ramdisk加载前的一堆img都是存在硬盘上的，它们在没“驱动”之前是如何被加载的？所以我觉得这个“驱动”是针于文件系统的，而不是硬盘的。不知道理解的对不对？","like_count":8,"discussions":[{"author":{"id":1738119,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/85/87/727142bc.jpg","nickname":"MacBao","note":"","ucode":"8CF51C3688C8F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375415,"discussion_content":"grub里有块设备驱动","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1621636535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2636690,"avatar":"https://static001.geekbang.org/account/avatar/00/28/3b/92/d018ecbb.jpg","nickname":"yf","note":"","ucode":"4D81F5FD54C7FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542532,"discussion_content":"前面属于grub吧，后面是进入linux内核","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640776271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95021,"user_name":"栋能","can_delete":false,"product_type":"c1","uid":1006849,"ip_address":"","ucode":"8BD9C939D3E8E1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5d/01/9cd84003.jpg","comment_is_top":false,"comment_ctime":1557940973,"is_pvip":false,"replies":[{"id":"34099","content":"是任务，任务也有pid，内核里面不区分进程和线程","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1558067916,"ip_address":"","comment_id":95021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31622712045","product_id":100024701,"comment_content":"我有个小小的疑问：kernel_thread创建的是进程么？例如：ps命令查看，发现kthreadd有pid，且在command的内容是[kthreadd]，[]包裹说明这是个内核线程。既然这样，大家都称呼kthreadd是一个进程，我就有点困惑了","like_count":7,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450302,"discussion_content":"是任务，任务也有pid，内核里面不区分进程和线程","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558067916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88022,"user_name":"chengzise","can_delete":false,"product_type":"c1","uid":1006070,"ip_address":"","ucode":"1C27D216359894","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/f6/ed66d1c1.jpg","comment_is_top":false,"comment_ctime":1555816023,"is_pvip":false,"replies":[{"id":"49574","content":"start_kernel不属于任何进程，是内核代码","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567689167,"ip_address":"","comment_id":88022,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27325619799","product_id":100024701,"comment_content":"老师好，在执行start_kernel时候还是单任务环境，创建好0，1，2号进程后，start_kernel所在的函数栈属于0号进程吗？start_kernel执行结束，会退出到哪里？之前学习RTOS的时候，主任务相当于0号进程，然后由0进程创建其他进程，创建结束0号进程后进入死循环，监控系统。不知道Linux中start_kernel执行完是怎么处理的，请老师解答，谢谢","like_count":6,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447684,"discussion_content":"start_kernel不属于任何进程，是内核代码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567689167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85807,"user_name":"星光","can_delete":false,"product_type":"c1","uid":1272719,"ip_address":"","ucode":"A62AB938CA622A","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/8f/eba34b86.jpg","comment_is_top":false,"comment_ctime":1555242030,"is_pvip":false,"replies":[{"id":"49687","content":"的确神奇","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567697374,"ip_address":"","comment_id":85807,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27325045806","product_id":100024701,"comment_content":"深入内核，才发觉操作系统原来这么神奇！","like_count":6,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446818,"discussion_content":"的确神奇","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567697374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193749,"user_name":"honnkyou","can_delete":false,"product_type":"c1","uid":1026608,"ip_address":"","ucode":"FD5EC4120EE803","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/30/acc91f01.jpg","comment_is_top":false,"comment_ctime":1584957584,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"23059794064","product_id":100024701,"comment_content":"老师怎么理解ring0~ring4呢，是代码在内存中的位置不同吗？x86应该指的是cpu，代码加载到cpu缓存的位置不同吗？","like_count":5,"discussions":[{"author":{"id":1066409,"avatar":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","nickname":"Lorry","note":"","ucode":"BD4754D0F1D786","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383312,"discussion_content":"可以理解为内存的位置，访问程序/数据本质就是访问内存；ring的概念为内存的不同位置设置了不同的权限；作为应用只能访问自己有权限访问的内存空间","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626056705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1266698,"avatar":"https://static001.geekbang.org/account/avatar/00/13/54/0a/9a002ad5.jpg","nickname":"Adam Lau","note":"","ucode":"7E542D6E789500","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244118,"discussion_content":"好问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587568642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85764,"user_name":"朱成亮","can_delete":false,"product_type":"c1","uid":1008920,"ip_address":"","ucode":"669B049357B3FA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJqWuvuicHD7RVlEDJamWNmwVdkjeH4pLxPXoicwqbnpOibI1MFFz9SIVJmQeKSZQRP9np1NUV3wpmnA/132","comment_is_top":false,"comment_ctime":1555226674,"is_pvip":true,"replies":[{"id":"49690","content":"是的是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567697468,"ip_address":"","comment_id":85764,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23030063154","product_id":100024701,"comment_content":"对着源码把找文中提到的函数找到，瞄一眼长啥样。现在也只能大概看下有哪些，具体的也看不懂，不过随着瞄的越来越多，应该就越来越懂了吧。","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446798,"discussion_content":"是的是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567697468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85351,"user_name":"刘強","can_delete":false,"product_type":"c1","uid":1035612,"ip_address":"","ucode":"B2E41BB894A727","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/5c/e09eac13.jpg","comment_is_top":false,"comment_ctime":1555041334,"is_pvip":false,"replies":[{"id":"49712","content":"线程运行的都是函数。2号线程就运行内核的代码就可以了，还要啥文件。<br><br>调度要内核代码主动发起才运行，内核想运行谁就运行谁","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698330,"ip_address":"","comment_id":85351,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23029877814","product_id":100024701,"comment_content":"问题1:<br>     这里的函数 kthreadd，负责所有内核态的线程的调度和管理，是内核态所有线程运行的祖先。 <br>     这句话是正文中的一句话。我的疑问是所有线程的祖先不也是一个线程吗？为什么说是函数？难道这个函数就是2号线程的程序镜像？<br>    kernel_thread函数的第一个参数是一个函数指针，这个传进来的函数干啥用的，什么时候执行？创建1号线程的时候，我们加载了文件系统中的init程序文件，2号线程的程序文件在哪里？<br><br>问题2：<br>    引导程序将控制权交给内核后，内核开始执行，这时候还没有什么进程，代码的执行是线性的，也就是没有任何调度，但是创建进程1,2,3后，调度就开始了，那怎么再回到内核的初始化代码中去，也就是start_kenel函数中区，因为我看到创建进程后还有工作需要初始化，但这段代码貌似不在任何进程中。还是初始化彻底完成后，调度程序才开始运行？<br><br>   水平有限，写的比较乱，提的问题比较弱智😄","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446641,"discussion_content":"线程运行的都是函数。2号线程就运行内核的代码就可以了，还要啥文件。\n\n调度要内核代码主动发起才运行，内核想运行谁就运行谁","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1517457,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKkzrezV2dOBAgickt9DLzabz3dNFYyDEVXENMQ5ibrWhFbFqXIOia3ZaR21pozvB7UfoxJx4Ar688sA/132","nickname":"开心","note":"","ucode":"C8E08E8724C7CE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377609,"discussion_content":"一种是cpu时间切片，主动触发内核调度程序；一种是一号线程执行系统调用，触发内核调度程序","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622726204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1517457,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKkzrezV2dOBAgickt9DLzabz3dNFYyDEVXENMQ5ibrWhFbFqXIOia3ZaR21pozvB7UfoxJx4Ar688sA/132","nickname":"开心","note":"","ucode":"C8E08E8724C7CE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377607,"discussion_content":"初始化一号进程，都已经从内核态回到用户态了，cpu只管指令指针寄存器是什么，就拿什么去执行。这个时候cpu的控制权已经在一号线程了，怎么回到继续初始化二号线程呢？\n老师没回答清楚呀。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622725915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170122,"user_name":"马以","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1578534602,"is_pvip":false,"replies":[{"id":"66286","content":"https:&#47;&#47;elixir.bootlin.com&#47;linux&#47;latest&#47;source<br><br>sourceinsight","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1578824572,"ip_address":"","comment_id":170122,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18758403786","product_id":100024701,"comment_content":"有什么工具可以打开内核源码，在能直接跳转方法的","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480848,"discussion_content":"https://elixir.bootlin.com/linux/latest/source\n\nsourceinsight","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578824572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111175,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f4/87/644c0c5d.jpg","nickname":"俊伟","note":"","ucode":"7905B4F25637F4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343832,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611192900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2035956,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ecruTrMgzvqIs5iaWVibZw4Rxic42ZXGTflvOFHiaZEkf32Su01gDCWT8tdIcEoybg0ibAYU2Q8f9bleL7Q37fKguxQ/132","nickname":"做一个积极的跳蚤","note":"","ucode":"BBE367BBCB6C28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285641,"discussion_content":"编码用vs，看代码用si","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592902620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87105,"user_name":"邢世宝","can_delete":false,"product_type":"c1","uid":1113854,"ip_address":"","ucode":"7A58863FC89052","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/fe/12638c5b.jpg","comment_is_top":false,"comment_ctime":1555512676,"is_pvip":true,"replies":[{"id":"31355","content":"是x86提供机制，内核来保证","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1555549062,"ip_address":"","comment_id":87105,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18735381860","product_id":100024701,"comment_content":"x86的权限控制，怎么保证application是跑在r3，内核是跑在r0的？","like_count":4,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447312,"discussion_content":"是x86提供机制，内核来保证","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555549062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260331,"user_name":"白泽","can_delete":false,"product_type":"c1","uid":1846328,"ip_address":"","ucode":"0EBC6836154279","user_header":"https://static001.geekbang.org/account/avatar/00/1c/2c/38/e4114500.jpg","comment_is_top":false,"comment_ctime":1604986408,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14489888296","product_id":100024701,"comment_content":"看起来云里雾里 请问是全部章节先过一遍 再去仔细理解每一篇效率好 还是从第一篇开始每篇夯实之后再看下一篇收益高","like_count":3},{"had_liked":false,"id":207450,"user_name":"雷刚","can_delete":false,"product_type":"c1","uid":1655725,"ip_address":"","ucode":"115FE2BE1AAB61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/pTD8nS0SsORKiaRD3wB0NK9Bpd0wFnPWtYLPfBRBhvZ68iaJErMlM2NNSeEibwQfY7GReILSIYZXfT9o8iaicibcyw3g/132","comment_is_top":false,"comment_ctime":1587087773,"is_pvip":false,"replies":[{"id":"83916","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1592458482,"ip_address":"","comment_id":207450,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14471989661","product_id":100024701,"comment_content":"对于你我这种搞 java 的，对 c 基本上是小白，看源码连函数位置都找不到，强烈建议：使用 source insight4.0 打开 Linux 源码，然后重点来了，使用 project -&gt; synchronize files -&gt; force all files to be... 工具同步一下（找了好久才找到，说出来都是泪啊），基本上就可以到处跳转啦。<br>这样基本上都可以找到函数位置了，爽歪歪的，不过源码我也只是验证一下文中的内容，陷太深了也完蛋。","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492132,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592458482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2303222,"avatar":"","nickname":"Geek_f7bc9b","note":"","ucode":"83EBA43585B2B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328093,"discussion_content":"VS CODE更好用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606053369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1655725,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/pTD8nS0SsORKiaRD3wB0NK9Bpd0wFnPWtYLPfBRBhvZ68iaJErMlM2NNSeEibwQfY7GReILSIYZXfT9o8iaicibcyw3g/132","nickname":"雷刚","note":"","ucode":"115FE2BE1AAB61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":236937,"discussion_content":"source insight 还有个好处，除了根据文件名查找外，还支持根据符号查找，如果结构体名称、方法名称、变量名称，这样基本上老师文章中用到的方法基本上都能找到。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587130352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205790,"user_name":"huffmanT","can_delete":false,"product_type":"c1","uid":1149322,"ip_address":"","ucode":"00D6E3F1A76ACA","user_header":"https://static001.geekbang.org/account/avatar/00/11/89/8a/cb99255c.jpg","comment_is_top":false,"comment_ctime":1586739729,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14471641617","product_id":100024701,"comment_content":"搞懂了操作系统，你就能开公司","like_count":4},{"had_liked":false,"id":198205,"user_name":"hshayq","can_delete":false,"product_type":"c1","uid":1237880,"ip_address":"","ucode":"F5435E14BCCD25","user_header":"https://static001.geekbang.org/account/avatar/00/12/e3/78/3321053c.jpg","comment_is_top":false,"comment_ctime":1585414400,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14470316288","product_id":100024701,"comment_content":"大概懂了一点，整个过程还是很模糊。看来得全部学完，有个整体印象之后，再回头梳理一遍","like_count":3},{"had_liked":false,"id":119695,"user_name":"记事本","can_delete":false,"product_type":"c1","uid":1362659,"ip_address":"","ucode":"76F2CAFA309437","user_header":"https://static001.geekbang.org/account/avatar/00/14/ca/e3/447aff89.jpg","comment_is_top":false,"comment_ctime":1564656117,"is_pvip":true,"replies":[{"id":"46376","content":"赞，加油","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566297692,"ip_address":"","comment_id":119695,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14449558005","product_id":100024701,"comment_content":"学了后面的课程再回过来复习 又感觉多理解了那也一些。","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461022,"discussion_content":"赞，加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566297692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114075,"user_name":"ilovealt","can_delete":false,"product_type":"c1","uid":1113180,"ip_address":"","ucode":"35CB4FD836135B","user_header":"https://static001.geekbang.org/account/avatar/00/10/fc/5c/a3d42cdb.jpg","comment_is_top":false,"comment_ctime":1563236258,"is_pvip":false,"replies":[{"id":"46620","content":"初始化的时候嘛，这个时候不会有真的客户进程要运行，所以都行。代码是紧挨着的。","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566367800,"ip_address":"","comment_id":114075,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14448138146","product_id":100024701,"comment_content":"刘老师您好，我想问 为什么先创建用户态进程管理再创建内核进程管理，为什么不是反过来的呢？","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458504,"discussion_content":"初始化的时候嘛，这个时候不会有真的客户进程要运行，所以都行。代码是紧挨着的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566367800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98168,"user_name":"garlic","can_delete":false,"product_type":"c1","uid":1019579,"ip_address":"","ucode":"FEB147EDB5774E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/bb/c039dc11.jpg","comment_is_top":false,"comment_ctime":1558924028,"is_pvip":true,"replies":[{"id":"35388","content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1559100735,"ip_address":"","comment_id":98168,"utype":1}],"discussion_count":1,"race_medal":1,"score":"14443825916","product_id":100024701,"comment_content":"list_head存放维护双向链表的指针， 进程结构中task_struct中存放一个类型list_head 的指针task， 在创建进程时将进程放入进程列表2.6.17 版本 使用宏  SET_LINKS， 之后使用list_add_tail_rcu， RCU后续还要在学习一下","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451589,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559100735,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95357,"user_name":"哈","can_delete":false,"product_type":"c1","uid":1130578,"ip_address":"","ucode":"36733D24917941","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/52/7266ee09.jpg","comment_is_top":false,"comment_ctime":1558028003,"is_pvip":false,"replies":[{"id":"34093","content":"加油，考个四百多分","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1558067635,"ip_address":"","comment_id":95357,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14442929891","product_id":100024701,"comment_content":"在考研正好要考操作系统，结合参考书和老师文章的讲解感觉完全串起来了！！！！越学越有劲","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450422,"discussion_content":"加油，考个四百多分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558067635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":88087,"user_name":"Dispy","can_delete":false,"product_type":"c1","uid":1483495,"ip_address":"","ucode":"1BF7870B32AB15","user_header":"","comment_is_top":false,"comment_ctime":1555842341,"is_pvip":false,"replies":[{"id":"32059","content":"紧挨着的两条命令调用，执行的时候，也不是同步的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1556198080,"ip_address":"","comment_id":88087,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14440744229","product_id":100024701,"comment_content":"为什么先初始化用户态进程的祖先，而不是内核态进程的祖先","like_count":3,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447720,"discussion_content":"紧挨着的两条命令调用，执行的时候，也不是同步的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556198080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103456,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d6/60/f21b2164.jpg","nickname":"jacy","note":"","ucode":"0022A8759DDCE6","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1966,"discussion_content":"我也纠结这个问题，老师能说得更详细点么。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563154262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86818,"user_name":"天王","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1555463783,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14440365671","product_id":100024701,"comment_content":"linux内核初始化，首先要初始化职能部门，init&#47;main.c文件的start_kernel函数，相当于main函数，里面有INIT_TASK(项目管理初始化，创建0号进程，0号进程是唯一一个不是通过fork产生的进程，相当于一个模板，在进程列表是第一个，第二个是初始化办公大厅，trap_init函数，中断初始化函数，他是系统调用的中断门。初始化会议室管理系统，mm_init初始化内存管理模块，sched_init进行项目调度，vfs_caches_init初始化基于内存的管理系统rootfs，register_filesystem，在VFS虚拟文件系统定义了一种类型，文件系统是资料库，抽象出数据结构和操作，形成抽象层，就是虚拟文件系统，rest_init用来对对其他的进行初始化，rest_init的一大作用初始化1号进程，1号进程是第一个用户进程是非用户进程的祖先，1号进程启动的过程，kernal_thread函数有kernal_init函数，里面kernal_init_freeable函数，1号进程运行的是一些文件，run_init_process函数，里面调用的do_execve，execve运行一个执行文件，do是系统内核的调用，一般会运行ramdisk&#47;init，sbin&#47;init，bin&#47;init，etc&#47;init和bib&#47;sh，内核态执行系统调用，首先会执行项目执行计划书，即一个ELF格式的文件，然后start_thread，struct regs寄存器，系统调用的时候保存用户上下文，里面将代码段的CS设置为_USER_CS，将用户态的数据段的CS设置为_USER_DS，iret函数用于恢复寄存器，从保存的寄存器里拿出，CS和指令指针寄存器Ip恢复了，指向下一个要执行的语句，DS和函数栈指针SP也恢复了，指向函数栈的栈顶。ramdisk的作用，ramdisk是一个基于内存的文件系统，linux访问存储设备需要驱动，如果市面上所有的系统都放进内核里面，会很大，所以有了ramdisk根文件系统，ramdisk的&#47;init会启动文件系统的init，接下来是系统其他的初始化，2号进程是内核进程的大师兄，kthreadd负责所有内核态线程的调度和管理，用户态有多线程的概念，可以并行执行，内核态线程和进程数据结构一样，统称为Task，","like_count":3},{"had_liked":false,"id":257201,"user_name":"Yukon","can_delete":false,"product_type":"c1","uid":1390954,"ip_address":"","ucode":"16997781EB991E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Dic7mk7ia4Ln0bfFuMianpzg80ogAzPOelb1EUtXKWBVO0qwLc0jdq9K6gkfDlGI0mjX0KZTBm9jw7zMRuicsick2Lg/132","comment_is_top":false,"comment_ctime":1603879223,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10193813815","product_id":100024701,"comment_content":"我有个疑问：<br>当用户态的进程， 进程A， 发生系统调用的时候， 是切换到已经存在的内核态的进程（ 比如文中的2号进程，kthreadd ）来做事情呢？ 还是直接进程A“切换”成了内核态（硬换寄存器中的内容）， 然后做事情， 跟2号进程没有关系？","like_count":2},{"had_liked":false,"id":161490,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1576217797,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10166152389","product_id":100024701,"comment_content":"0生1,2. 1生所有用户进程，2生所有内核进程。感觉内核进程比较重要，为啥后出生呀，多谢？","like_count":2,"discussions":[{"author":{"id":1266698,"avatar":"https://static001.geekbang.org/account/avatar/00/13/54/0a/9a002ad5.jpg","nickname":"Adam Lau","note":"","ucode":"7E542D6E789500","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244124,"discussion_content":"翻看上面的留言，老师已经回答过了，答案是一样的，不重要","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587568747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155254,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1574671843,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10164606435","product_id":100024701,"comment_content":"这部分应该就是linux启动时，满屏字母干的活了吧","like_count":2},{"had_liked":false,"id":148452,"user_name":"黑色毛衣","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1573009312,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10162943904","product_id":100024701,"comment_content":"为什么 Linux 的 0 好进程不运行？","like_count":2},{"had_liked":false,"id":146210,"user_name":"扁担","can_delete":false,"product_type":"c1","uid":1266540,"ip_address":"","ucode":"95B78342FD1893","user_header":"https://static001.geekbang.org/account/avatar/00/13/53/6c/46c4efb0.jpg","comment_is_top":false,"comment_ctime":1572459209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10162393801","product_id":100024701,"comment_content":"一口吃不成胖子，慢慢来了😂","like_count":2},{"had_liked":false,"id":127719,"user_name":"牛牛","can_delete":false,"product_type":"c1","uid":1194626,"ip_address":"","ucode":"CFCE68B4F92209","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/82/1ff83a38.jpg","comment_is_top":false,"comment_ctime":1566784218,"is_pvip":false,"replies":[{"id":"48775","content":"相信自己可以的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567495650,"ip_address":"","comment_id":127719,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10156718810","product_id":100024701,"comment_content":"我写php的，看的云里雾里，慌的一批。5年了，留下没有技术的泪水。","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464619,"discussion_content":"相信自己可以的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567495650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91780,"user_name":"Tianz","can_delete":false,"product_type":"c1","uid":1248212,"ip_address":"","ucode":"4B6542604B8B6F","user_header":"https://static001.geekbang.org/account/avatar/00/13/0b/d4/39763233.jpg","comment_is_top":false,"comment_ctime":1557106888,"is_pvip":false,"replies":[{"id":"32849","content":"这是个好建议","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1557154434,"ip_address":"","comment_id":91780,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10147041480","product_id":100024701,"comment_content":"Hi， 超哥， 如果能在你用公司职能部门来形象比喻内核子系统的后面括号指明对应的子系统，如：项目管理部（进程管理子系统），感觉能给对内核有点经验的人减少一些脑切换的开支和对新人有明确的记忆。","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449027,"discussion_content":"这是个好建议","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1557154434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86260,"user_name":"TaoLR","can_delete":false,"product_type":"c1","uid":1004102,"ip_address":"","ucode":"1BAE96AA8E6229","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/46/3d4f32f7.jpg","comment_is_top":false,"comment_ctime":1555332582,"is_pvip":false,"replies":[{"id":"49653","content":"后面会讲虚拟化","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567695845,"ip_address":"","comment_id":86260,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10145267174","product_id":100024701,"comment_content":"听说还有个 “Ring -1” 层，虚拟化实现方案里提到的...","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446943,"discussion_content":"后面会讲虚拟化","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567695845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85551,"user_name":"","can_delete":false,"product_type":"c1","uid":1187469,"ip_address":"","ucode":"B4A70F7D96BECF","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/8d/4239f463.jpg","comment_is_top":false,"comment_ctime":1555123528,"is_pvip":false,"replies":[{"id":"49700","content":"赞","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567697946,"ip_address":"","comment_id":85551,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10145058120","product_id":100024701,"comment_content":"关于内核启动流程，大家可以参考下https:&#47;&#47;blog.csdn.net&#47;mahang123456&#47;article&#47;details&#47;88722948博客","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446709,"discussion_content":"赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567697946,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85545,"user_name":"haiker","can_delete":false,"product_type":"c1","uid":1131183,"ip_address":"","ucode":"4C4C799CACCF79","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/af/8c37ca95.jpg","comment_is_top":false,"comment_ctime":1555121988,"is_pvip":false,"replies":[{"id":"49701","content":"不重要","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567697962,"ip_address":"","comment_id":85545,"utype":1}],"discussion_count":1,"race_medal":1,"score":"10145056580","product_id":100024701,"comment_content":"内核初始化的时候为啥先创建用户态祖先进程，后创建内核态的祖先进程，这个顺序重要吗？还是谁先创建都一样？","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446706,"discussion_content":"不重要","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567697962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85258,"user_name":"吴小智","can_delete":false,"product_type":"c1","uid":1310798,"ip_address":"","ucode":"C7C9F58B5C9F7B","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","comment_is_top":false,"comment_ctime":1555028888,"is_pvip":false,"replies":[{"id":"49721","content":"鼓励看代码，但是别纠结","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698563,"ip_address":"","comment_id":85258,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10144963480","product_id":100024701,"comment_content":"需要自己去看源码，才能理解了。老师画的图是真的好","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446609,"discussion_content":"鼓励看代码，但是别纠结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272311,"user_name":"Spoon","can_delete":false,"product_type":"c1","uid":1959822,"ip_address":"","ucode":"2FF9193AD482C2","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e7/8e/318cfde0.jpg","comment_is_top":false,"comment_ctime":1610027690,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5904994986","product_id":100024701,"comment_content":"可以用vscode看源码，追源码的过程，各种宏定义+struct看的比较酸爽","like_count":1},{"had_liked":false,"id":210751,"user_name":"coderkeep","can_delete":false,"product_type":"c1","uid":1129178,"ip_address":"","ucode":"29EE99F8F19F2E","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/da/7f9cbbd1.jpg","comment_is_top":false,"comment_ctime":1587820040,"is_pvip":false,"replies":[{"id":"83786","content":"是内核态，这个图除了三，其他都在内核态","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1592359625,"ip_address":"","comment_id":210751,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5882787336","product_id":100024701,"comment_content":"请问老师：<br>设备驱动不是应该运行在内核态么，为什么文章中关于分层的 Ring 图，设备驱动在内核态外。","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493102,"discussion_content":"是内核态，这个图除了三，其他都在内核态","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592359625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203787,"user_name":"山雨淋淋","can_delete":false,"product_type":"c1","uid":1515297,"ip_address":"","ucode":"0D4538C616A130","user_header":"https://static001.geekbang.org/account/avatar/00/17/1f/21/da776587.jpg","comment_is_top":false,"comment_ctime":1586266635,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5881233931","product_id":100024701,"comment_content":"不明白，0号进程启动前，程序是怎么运行的，此时不依赖进程、文件系统这些概念么？","like_count":1},{"had_liked":false,"id":166292,"user_name":"李小四","can_delete":false,"product_type":"c1","uid":1112747,"ip_address":"","ucode":"2A766BE16B276B","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/ab/0d39e745.jpg","comment_is_top":false,"comment_ctime":1577433746,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5872401042","product_id":100024701,"comment_content":"Linux_08:<br>源码看的云里雾里，只明白了Linux使用双向循环链表来管理进程，链表的节点存储的是进程描述符。<br><br>看了几遍今天的内容，最终决定不去深究代码的细节，先知道整体的流程可能是更重要的事情，慢慢来。","like_count":1},{"had_liked":false,"id":148430,"user_name":"黑色毛衣","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1573006332,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5867973628","product_id":100024701,"comment_content":"吊炸天啊，","like_count":1},{"had_liked":false,"id":91920,"user_name":"嘉木","can_delete":false,"product_type":"c1","uid":1317999,"ip_address":"","ucode":"AF4877693782C0","user_header":"https://static001.geekbang.org/account/avatar/00/14/1c/6f/3ea2a599.jpg","comment_is_top":false,"comment_ctime":1557134604,"is_pvip":false,"replies":[{"id":"49471","content":"copy_process里面有list_add_tail_rcu(&amp;p-&gt;tasks, &amp;init_task.tasks);","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567674570,"ip_address":"","comment_id":91920,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852101900","product_id":100024701,"comment_content":"kernel&#47;fock.c :<br> kernel_thread -&gt; _do_fork -&gt; copy_process -&gt; dup_task_struct生成一个task_struct*，然后各种初始化赋值拷贝（files、fs、signal、signhand、mm、io、threadlst）<br><br>没找到在哪加入task列表的","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449081,"discussion_content":"copy_process里面有list_add_tail_rcu(&amp;amp;p-&amp;gt;tasks, &amp;amp;init_task.tasks);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567674570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91883,"user_name":"嘉木","can_delete":false,"product_type":"c1","uid":1317999,"ip_address":"","ucode":"AF4877693782C0","user_header":"https://static001.geekbang.org/account/avatar/00/14/1c/6f/3ea2a599.jpg","comment_is_top":false,"comment_ctime":1557126684,"is_pvip":false,"replies":[{"id":"49472","content":"如果想了解的特别细，可以看intel的文档，不过很长","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567674603,"ip_address":"","comment_id":91883,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852093980","product_id":100024701,"comment_content":"想了解x86的分层权限机制。。。","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449069,"discussion_content":"如果想了解的特别细，可以看intel的文档，不过很长","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567674603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91839,"user_name":"Infinite_gao","can_delete":false,"product_type":"c1","uid":1235607,"ip_address":"","ucode":"9FBFEDED8790A8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLsexaVCEecIhpPsOqHJkZFEnyTfOZ1Ot3lmSMfyIVkR5SerJibatj6mIHackokoIO4ELiaObhQ60rw/132","comment_is_top":false,"comment_ctime":1557118126,"is_pvip":false,"replies":[{"id":"49474","content":"0号进程是链表头","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567674638,"ip_address":"","comment_id":91839,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852085422","product_id":100024701,"comment_content":"0号进程是1号和2号进程的父进程吗？还是它们是同一个级别的，0号只作为创建1号和2号进程时的模版？","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449053,"discussion_content":"0号进程是链表头","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567674638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90043,"user_name":"Spring","can_delete":false,"product_type":"c1","uid":1222211,"ip_address":"","ucode":"8175463FB4705B","user_header":"https://static001.geekbang.org/account/avatar/00/12/a6/43/cb6ab349.jpg","comment_is_top":false,"comment_ctime":1556377719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5851345015","product_id":100024701,"comment_content":"内核初始化过程：<br>1. 初始化进程列表，创建0号进程<br>2. 初始化中断，设置中断门<br>3. 初始化内存管理模块<br>4. 初始化调度器<br>5. 初始化VFS（虚拟文件系统）<br>6. 初始化1号进程（用户态进程祖先），在内核态中准备好寄存器后恢复用户态<br>7. 初始化2号进程（内核态进程祖先）","like_count":1},{"had_liked":false,"id":89361,"user_name":"烈日融雪","can_delete":false,"product_type":"c1","uid":1131925,"ip_address":"","ucode":"E462E30FB0AFC0","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/95/968fd89f.jpg","comment_is_top":false,"comment_ctime":1556158802,"is_pvip":false,"replies":[{"id":"32019","content":"5版本的太新了，当时研究的时候，还没这个版本，4.13","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1556194305,"ip_address":"","comment_id":89361,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5851126098","product_id":100024701,"comment_content":"请问作者讲的这什么版本的内核？感觉我下载的linux-5.0.9的好多对不上","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448103,"discussion_content":"5版本的太新了，当时研究的时候，还没这个版本，4.13","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556194305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86239,"user_name":"羽","can_delete":false,"product_type":"c1","uid":1258724,"ip_address":"","ucode":"27574A5685D557","user_header":"https://static001.geekbang.org/account/avatar/00/13/34/e4/1ebe1c7e.jpg","comment_is_top":false,"comment_ctime":1555330091,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5850297387","product_id":100024701,"comment_content":"这篇看了好几遍，对着源码看了两遍，觉得还是不够熟悉，需要再对着源码分析几遍，才能更深刻!<br>有个问题，就是找到search_binary_handle()函数的时候，文章里的路径有点问题。","like_count":1},{"had_liked":false,"id":86100,"user_name":"随风","can_delete":false,"product_type":"c1","uid":1476862,"ip_address":"","ucode":"037CE3554D8AB9","user_header":"https://static001.geekbang.org/account/avatar/00/16/88/fe/c18a85fe.jpg","comment_is_top":false,"comment_ctime":1555310726,"is_pvip":false,"replies":[{"id":"49669","content":"所以不必要纠结代码，重点理解过程。如果我标记了代码，很快就都过期了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567696452,"ip_address":"","comment_id":86100,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850278022","product_id":100024701,"comment_content":"我看main.c里没有vfs_caches_init只有vfs_caches_init_early啊，而且vfs_caches_init_early的调用在trap_init前面呢。","like_count":1,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446891,"discussion_content":"所以不必要纠结代码，重点理解过程。如果我标记了代码，很快就都过期了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567696452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85325,"user_name":"🗿顾晓峰🈹🈳🈴🈷🎏","can_delete":false,"product_type":"c1","uid":1109785,"ip_address":"","ucode":"F3447F81832780","user_header":"https://static001.geekbang.org/account/avatar/00/10/ef/19/ba159b8c.jpg","comment_is_top":false,"comment_ctime":1555037253,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5850004549","product_id":100024701,"comment_content":"这一节的信息量有点大，看来要再回过头来结合前几个章节和小伙伴提供的辅助资料，一起来温故而知新了，谢谢老师的讲解。","like_count":1},{"had_liked":false,"id":348336,"user_name":"Geek_93970d","can_delete":false,"product_type":"c1","uid":1452167,"ip_address":"","ucode":"52AC308BEC7737","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYRSYg6icjibzGa7efcMrCsGec2UwibjTd57icqDz0zzkEEOM2pXVju60dibzcnQKPfRkN9g/132","comment_is_top":false,"comment_ctime":1655004130,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655004130","product_id":100024701,"comment_content":"0 号进程没啥作用啊？1 号进程 和 2 号进程都在 start_kernel 里调用 rest_init 初始化的，跟 0 号进程没瓜葛？","like_count":0},{"had_liked":false,"id":339057,"user_name":"柳十三","can_delete":false,"product_type":"c1","uid":1385852,"ip_address":"","ucode":"FE50C9778914C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/tKvmZ3Vs4t6RZ3X7cAliaW47Zatxhn1aV5PcCYT9NZ9k9WWqRrEBGHicGtRWvsG6yQqHnaWw6cGNSbicNLjZebcHA/132","comment_is_top":false,"comment_ctime":1647874779,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647874779","product_id":100024701,"comment_content":"老师,2号进程从内核态来看，线程和进程都是任务，所以2号进程是内核态线程的祖先，也是内核态进程的祖先？","like_count":0},{"had_liked":false,"id":333759,"user_name":"Hunter_Dark","can_delete":false,"product_type":"c1","uid":1342279,"ip_address":"","ucode":"3A07CCBC250B69","user_header":"https://static001.geekbang.org/account/avatar/00/14/7b/47/96dad3ff.jpg","comment_is_top":false,"comment_ctime":1644501036,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1644501036","product_id":100024701,"comment_content":"docker的内部的进程号似乎都是1开始。比如运行的是java，那么ps -ef 的1 就是java进程？这里有点懵逼","like_count":0},{"had_liked":false,"id":325056,"user_name":"Geek_ad1659","can_delete":false,"product_type":"c1","uid":2769183,"ip_address":"","ucode":"00E216AC341A8A","user_header":"","comment_is_top":false,"comment_ctime":1638790283,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638790283","product_id":100024701,"comment_content":"深入内核发现操作系统的逻辑既平淡又神奇，我们普通人都理解的道理，但即使技术过硬也很难抽象出这么有层次结构和逻辑的代码。世间平等，术业专攻，向大师致敬，也向老师致敬。","like_count":0},{"had_liked":false,"id":320195,"user_name":"hhhh","can_delete":false,"product_type":"c1","uid":1256101,"ip_address":"","ucode":"9E87017424B382","user_header":"https://static001.geekbang.org/account/avatar/00/13/2a/a5/625c0a2e.jpg","comment_is_top":false,"comment_ctime":1636115381,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636115381","product_id":100024701,"comment_content":"ring0-3 是通过什么区分的呢，内存地址吗？","like_count":0},{"had_liked":false,"id":311493,"user_name":"Allan","can_delete":false,"product_type":"c1","uid":1310388,"ip_address":"","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1631256525,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631256525","product_id":100024701,"comment_content":"听都听不懂还看啥内核代码，哈哈","like_count":0},{"had_liked":false,"id":302868,"user_name":"Fan","can_delete":false,"product_type":"c1","uid":1115232,"ip_address":"","ucode":"3BF28670FD9407","user_header":"https://static001.geekbang.org/account/avatar/00/11/04/60/64d166b6.jpg","comment_is_top":false,"comment_ctime":1626418081,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626418081","product_id":100024701,"comment_content":"这一节看不懂，做个标记。","like_count":0},{"had_liked":false,"id":302052,"user_name":"Lorry","can_delete":false,"product_type":"c1","uid":1066409,"ip_address":"","ucode":"BD4754D0F1D786","user_header":"https://static001.geekbang.org/account/avatar/00/10/45/a9/3d48d6a2.jpg","comment_is_top":false,"comment_ctime":1626056092,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626056092","product_id":100024701,"comment_content":"是不是可以理解在内核里面，只有线程和任务两个视角，线程是用于执行任的。","like_count":0},{"had_liked":false,"id":293324,"user_name":"烤鹅看看p","can_delete":false,"product_type":"c1","uid":1956938,"ip_address":"","ucode":"A3300F3722CAF3","user_header":"https://static001.geekbang.org/account/avatar/00/1d/dc/4a/ad4d630b.jpg","comment_is_top":false,"comment_ctime":1621335620,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1621335620","product_id":100024701,"comment_content":"看不下去了，什么办事大厅 资料库 简单抽象的东西说的乱七八糟，文件系统不就完了吗 我还得想想资料库是什么东西能干什么","like_count":0},{"had_liked":false,"id":292054,"user_name":"林林","can_delete":false,"product_type":"c1","uid":1613227,"ip_address":"","ucode":"7B6318B971E430","user_header":"https://static001.geekbang.org/account/avatar/00/18/9d/ab/6589d91a.jpg","comment_is_top":false,"comment_ctime":1620657290,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620657290","product_id":100024701,"comment_content":"我在kernel_init_freeable的函数定义中，看到第一句是wait_for_completion(&amp;kthreadd_done);  所以是要等待2号进程就绪才能创建1号进程吗？","like_count":0},{"had_liked":false,"id":289207,"user_name":"王骞","can_delete":false,"product_type":"c1","uid":1407983,"ip_address":"","ucode":"E5A88F3BA2634E","user_header":"https://static001.geekbang.org/account/avatar/00/15/7b/ef/ae5458c7.jpg","comment_is_top":false,"comment_ctime":1618916963,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618916963","product_id":100024701,"comment_content":"感觉把什么办事大厅、会议室管理、项目管理之类的去掉还能好理解一些","like_count":0},{"had_liked":false,"id":287576,"user_name":"Tenz","can_delete":false,"product_type":"c1","uid":1116410,"ip_address":"","ucode":"D5D5DC0A8C9D13","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/fa/91c66193.jpg","comment_is_top":false,"comment_ctime":1618036854,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1618036854","product_id":100024701,"comment_content":"请问源码里怎么区分和限制哪些是ring0可接触，哪些是ring1可接触的？还是说这是CPU指令上有限制？","like_count":0,"discussions":[{"author":{"id":1116410,"avatar":"https://static001.geekbang.org/account/avatar/00/11/08/fa/91c66193.jpg","nickname":"Tenz","note":"","ucode":"D5D5DC0A8C9D13","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":367394,"discussion_content":"回头看了下微机原理和汇编，CPU是分特权指令，特权指令和非特权指令的，特权指令包括io访问内存访问等，只有在ring0才能调用，而x86里是通过int 80将cpu切成ring0的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618331296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283389,"user_name":"gk","can_delete":false,"product_type":"c1","uid":1251970,"ip_address":"","ucode":"0E1E81FEED2E86","user_header":"https://static001.geekbang.org/account/avatar/00/13/1a/82/f039ae08.jpg","comment_is_top":false,"comment_ctime":1615738504,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615738504","product_id":100024701,"comment_content":"大哥，我以为你讲的是熟悉linux系统，随便教教shell写写脚本，也就是应用linux。结果你更偏重于从源码角度理解linux，这超出我的预期阿，难度一下就高了，不过我决定跟着课程学下去，因为目标和质量在这呢，价值不会出错。","like_count":0},{"had_liked":false,"id":281751,"user_name":"我想喝咖啡","can_delete":false,"product_type":"c1","uid":2378283,"ip_address":"","ucode":"A7BE05894DC88E","user_header":"https://static001.geekbang.org/account/avatar/00/24/4a/2b/fb8663d9.jpg","comment_is_top":false,"comment_ctime":1614869272,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614869272","product_id":100024701,"comment_content":"问下老师这个内核代码版本是多少的","like_count":0},{"had_liked":false,"id":281438,"user_name":"八戒","can_delete":false,"product_type":"c1","uid":1576512,"ip_address":"","ucode":"3F262A99492A65","user_header":"https://static001.geekbang.org/account/avatar/00/18/0e/40/49a71ed8.jpg","comment_is_top":false,"comment_ctime":1614750943,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614750943","product_id":100024701,"comment_content":"老师会记得这么多细节吗？<br>这么多细节，备课时要看书看代码才行？","like_count":0},{"had_liked":false,"id":266480,"user_name":"文若","can_delete":false,"product_type":"c1","uid":1017387,"ip_address":"","ucode":"3D3045975ED2DB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/86/2b/f82a7d5a.jpg","comment_is_top":false,"comment_ctime":1607350750,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607350750","product_id":100024701,"comment_content":"硬核知识很多。别趣谈就好了，每次听例子很别扭。","like_count":0},{"had_liked":false,"id":255037,"user_name":"K菌无惨","can_delete":false,"product_type":"c1","uid":2194764,"ip_address":"","ucode":"97A532D588FD49","user_header":"","comment_is_top":false,"comment_ctime":1603255740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603255740","product_id":100024701,"comment_content":"所以说用户态进程进入内核态时,会通过2号进程创建一个任务线程来执行系统调用吗???? 不是很懂=. =???","like_count":0},{"had_liked":false,"id":254071,"user_name":"戴宇","can_delete":false,"product_type":"c1","uid":1185158,"ip_address":"","ucode":"66A56B2D742903","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/86/cd97bf7e.jpg","comment_is_top":false,"comment_ctime":1603036249,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603036249","product_id":100024701,"comment_content":"先刷第一遍，不纠结代码层面，查代码作为佐证。和弄清楚核心概念","like_count":0},{"had_liked":false,"id":244169,"user_name":"朱雯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1598416727,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1598416727","product_id":100024701,"comment_content":"我感觉有点味道了。好好玩，不过感觉内核真是汪洋大海啊。","like_count":0},{"had_liked":false,"id":231320,"user_name":"@许还真","can_delete":false,"product_type":"c1","uid":1099324,"ip_address":"","ucode":"6D754D5AE44CEC","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/3c/8ab9deb0.jpg","comment_is_top":false,"comment_ctime":1593651786,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593651786","product_id":100024701,"comment_content":"一天看不懂那就多看几天总会懂得","like_count":0},{"had_liked":false,"id":229822,"user_name":"爱学习不害怕","can_delete":false,"product_type":"c1","uid":1245504,"ip_address":"","ucode":"BE325C02E4C92F","user_header":"https://static001.geekbang.org/account/avatar/00/13/01/40/a203a3b9.jpg","comment_is_top":false,"comment_ctime":1593156966,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593156966","product_id":100024701,"comment_content":"老师刚给留言提问就悟到了，原来__USER_CS等就是在初始化用户态的寄存器！","like_count":0},{"had_liked":false,"id":229821,"user_name":"爱学习不害怕","can_delete":false,"product_type":"c1","uid":1245504,"ip_address":"","ucode":"BE325C02E4C92F","user_header":"https://static001.geekbang.org/account/avatar/00/13/01/40/a203a3b9.jpg","comment_is_top":false,"comment_ctime":1593156779,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593156779","product_id":100024701,"comment_content":"老师好，请问在初始化内核，利用执行init文件回到用户态时，初始的寄存器如cs,ds,ip,sp等是不是有个初始值，来让系统去到用户态的一个固定的位置？要不然我觉得从启动计算机到现在一直是在内核态里的，就无从说起“保存用户态运行上下文”。","like_count":0},{"had_liked":false,"id":228743,"user_name":"做一个积极的跳蚤","can_delete":false,"product_type":"c1","uid":2035956,"ip_address":"","ucode":"BBE367BBCB6C28","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ecruTrMgzvqIs5iaWVibZw4Rxic42ZXGTflvOFHiaZEkf32Su01gDCWT8tdIcEoybg0ibAYU2Q8f9bleL7Q37fKguxQ/132","comment_is_top":false,"comment_ctime":1592797293,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592797293","product_id":100024701,"comment_content":"刘老师总结的很好，具体细节还是需要自己去摸索研究，现在开始每篇文章至少仔细阅读三遍。最后希望刘老师对于课后的练习给点简易版本的答案。","like_count":0},{"had_liked":false,"id":228285,"user_name":"坤","can_delete":false,"product_type":"c1","uid":1010922,"ip_address":"","ucode":"74E6838226A405","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/ea/ce9854a5.jpg","comment_is_top":false,"comment_ctime":1592633211,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592633211","product_id":100024701,"comment_content":"刘老师您好，rest_ini（）中两次调用了kernel_thread()，请问都是跟Init 0有关系吗？","like_count":0},{"had_liked":false,"id":227908,"user_name":"李圣悦","can_delete":false,"product_type":"c1","uid":1638427,"ip_address":"","ucode":"C1786C98824E50","user_header":"https://static001.geekbang.org/account/avatar/00/19/00/1b/eee13196.jpg","comment_is_top":false,"comment_ctime":1592525936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592525936","product_id":100024701,"comment_content":"老师，早上好！请教一个问题：1号进程启动后已经切换到用户态了，那怎么切换回内核态启动2号进程？","like_count":0},{"had_liked":false,"id":225764,"user_name":"羽","can_delete":false,"product_type":"c1","uid":1316367,"ip_address":"","ucode":"7E329FECE728E4","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/0f/ebdcc4b7.jpg","comment_is_top":false,"comment_ctime":1591849144,"is_pvip":false,"replies":[{"id":"83467","content":"第一次去用户态的时候要初始化这些","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1592186169,"ip_address":"","comment_id":225764,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591849144","product_id":100024701,"comment_content":"超哥 提一个疑问啊  对于1号进程他本来时内核以开始运行的 也就是说没有用户态的寄存器状态保存  因为没有用户态进行系统调用  那么这个用户态的寄存器状态是怎么来的呢  默认的？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497981,"discussion_content":"第一次去用户态的时候要初始化这些","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592186169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218100,"user_name":"max","can_delete":false,"product_type":"c1","uid":1773471,"ip_address":"","ucode":"91DDE86511DCDC","user_header":"https://static001.geekbang.org/account/avatar/00/1b/0f/9f/caae319d.jpg","comment_is_top":false,"comment_ctime":1589714668,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589714668","product_id":100024701,"comment_content":"赞一下","like_count":0},{"had_liked":false,"id":214232,"user_name":"Canva","can_delete":false,"product_type":"c1","uid":1461560,"ip_address":"","ucode":"F29E71D9553763","user_header":"https://static001.geekbang.org/account/avatar/00/16/4d/38/74aedf50.jpg","comment_is_top":false,"comment_ctime":1588681345,"is_pvip":false,"replies":[{"id":"83479","content":"也没啥问题","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1592186828,"ip_address":"","comment_id":214232,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588681345","product_id":100024701,"comment_content":"为什么先初始化用户态进程祖先，再初始化核心态进程祖先？反过来有什么问题？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493991,"discussion_content":"也没啥问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592186828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190286,"user_name":"迟强","can_delete":false,"product_type":"c1","uid":1809239,"ip_address":"","ucode":"423405DD9E420E","user_header":"https://static001.geekbang.org/account/avatar/00/1b/9b/57/9b58b541.jpg","comment_is_top":false,"comment_ctime":1584626861,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1584626861","product_id":100024701,"comment_content":"源代码研读走起。","like_count":0},{"had_liked":false,"id":176556,"user_name":"起而行","can_delete":false,"product_type":"c1","uid":1131399,"ip_address":"","ucode":"4F116B0B740776","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/87/7604d7a4.jpg","comment_is_top":false,"comment_ctime":1581086051,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1581086051","product_id":100024701,"comment_content":"day8，办事大厅初始化，内核和用户态的祖先进程，其中用代码展现保存现场，赋值寄存器的操作很精彩。用代码结合理论讲解真的很棒，虽然不用完全读懂并写出代码，但是用代码来展示，感觉更接地气","like_count":0},{"had_liked":false,"id":172001,"user_name":"LQ","can_delete":false,"product_type":"c1","uid":1022778,"ip_address":"","ucode":"612791EAD2B206","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/3a/4d7d94ca.jpg","comment_is_top":false,"comment_ctime":1579068874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579068874","product_id":100024701,"comment_content":"大家阅读linux源码是4.x的版本呢？","like_count":0},{"had_liked":false,"id":171143,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1578873849,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578873849","product_id":100024701,"comment_content":"内核态和用户态的划分，把指令分为两类，也就是不需要系统资源（CPU和内存两种资源除外，个人以为CPU资源本身就分了ring，所以已经分成两类，内存资源由内存管理模块处理，需要内核映射虚拟地址到物理地址，但是缓存会大大加速这个寻址过程）的命令，例如操作变量，需要系统资源的的命令，例如操作文件。这种划分解决了核心资源使用的一系列问题，例如竞争，权限等，由此也带来了不可避免的成本，两种状态的切换需要拷贝状态以备将来回调，两种状态切换本身也增加了编程的难度。","like_count":0},{"had_liked":false,"id":170214,"user_name":"_stuView","can_delete":false,"product_type":"c1","uid":1244561,"ip_address":"","ucode":"C2D4AAB08515F1","user_header":"https://static001.geekbang.org/account/avatar/00/12/fd/91/65ff3154.jpg","comment_is_top":false,"comment_ctime":1578551573,"is_pvip":false,"replies":[{"id":"66284","content":"全局搜索一下","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1578824107,"ip_address":"","comment_id":170214,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578551573","product_id":100024701,"comment_content":"start_thread函数在哪里，我只看到了load_elf_binary函数啊","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480884,"discussion_content":"全局搜索一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578824107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161864,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1576384375,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576384375","product_id":100024701,"comment_content":"请问刘老师0 号进程最开始创建，是不是初始化中断，内存，调度器和VFS对0号进程有所依赖，多谢？","like_count":0},{"had_liked":false,"id":154411,"user_name":"连边","can_delete":false,"product_type":"c1","uid":1391748,"ip_address":"","ucode":"54B5DA38449728","user_header":"https://static001.geekbang.org/account/avatar/00/15/3c/84/608f679b.jpg","comment_is_top":false,"comment_ctime":1574424526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574424526","product_id":100024701,"comment_content":"感觉看了这篇，要把源码看起来，不然啃不动。","like_count":0},{"had_liked":false,"id":119933,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1053390,"ip_address":"","ucode":"ABB3F1A63E102A","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/ce/a8c8b5e8.jpg","comment_is_top":false,"comment_ctime":1564733261,"is_pvip":false,"replies":[{"id":"46373","content":"是的，进程就是项目","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1566297592,"ip_address":"","comment_id":119933,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564733261","product_id":100024701,"comment_content":"所谓进程列表（Procese List），就是咱们前面说的项... 应该是Process吧？<br>","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461137,"discussion_content":"是的，进程就是项目","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566297592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100835,"user_name":"djfhchdh","can_delete":false,"product_type":"c1","uid":1484184,"ip_address":"","ucode":"E71D75328CE398","user_header":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","comment_is_top":false,"comment_ctime":1559650395,"is_pvip":false,"replies":[{"id":"37045","content":"是的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1560255590,"ip_address":"","comment_id":100835,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559650395","product_id":100024701,"comment_content":"思考题，进程列表是通过双向循环链表实现的","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452698,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560255590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89533,"user_name":"抛物线","can_delete":false,"product_type":"c1","uid":1246493,"ip_address":"","ucode":"46BD27D7BA8CE3","user_header":"https://static001.geekbang.org/account/avatar/00/13/05/1d/018804ad.jpg","comment_is_top":false,"comment_ctime":1556199224,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556199224","product_id":100024701,"comment_content":"我觉得最后一个图可以和Linux系统的各个模块对应起来，不然看起来有点费劲，基础差点的根本看不到各个职能对应","like_count":0},{"had_liked":false,"id":87330,"user_name":"布凡","can_delete":false,"product_type":"c1","uid":1202465,"ip_address":"","ucode":"346FCD332F8BFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/59/21/d2efde18.jpg","comment_is_top":false,"comment_ctime":1555569920,"is_pvip":false,"replies":[{"id":"31409","content":"4.13","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1555586636,"ip_address":"","comment_id":87330,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1555569920","product_id":100024701,"comment_content":"老师，您好，请问下文章要怎样对应源码来看呢？为什么我下载源码后看到的结构和文章中讲的不一致呢？如果是我下载版本不对，老师讲解的版本又是哪一个呢？请指教","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447402,"discussion_content":"4.13","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555586636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111175,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f4/87/644c0c5d.jpg","nickname":"俊伟","note":"","ucode":"7905B4F25637F4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343834,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611192931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86824,"user_name":"fangxuan","can_delete":false,"product_type":"c1","uid":1073369,"ip_address":"","ucode":"3870F2BF5679A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/d9/829ac53b.jpg","comment_is_top":false,"comment_ctime":1555464335,"is_pvip":false,"replies":[{"id":"31272","content":"后期加载就不会放到内核镜像里面了","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1555493678,"ip_address":"","comment_id":86824,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1555464335","product_id":100024701,"comment_content":"加载不同文件系统的驱动这件事本来是要放在内核里的，但这会导致内核很大，所以放到ramdisk的&#47;init里去做，但ramdisk是基于内存的，应该是系统启动后才会有，所以&#47;init程序应该还是从内核里来的，那这和内核直接加载文件系统驱动，到底有什么不同呢？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447196,"discussion_content":"后期加载就不会放到内核镜像里面了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555493678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86582,"user_name":"Virtue","can_delete":false,"product_type":"c1","uid":1441187,"ip_address":"","ucode":"67B2D1AD06D714","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKbwJ55niaS6Df8BjvKK2ug2jFibCYhicz1lx7GDYOGs9MMgbHJmWoH1DXZAR5TKsESyUz1zsaw4Flew/132","comment_is_top":false,"comment_ctime":1555403257,"is_pvip":false,"replies":[{"id":"49635","content":"链表头部","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567694981,"ip_address":"","comment_id":86582,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555403257","product_id":100024701,"comment_content":"有个疑问：0号进程的作用是啥呢？除了通过调用kernel_thread() 生成1号进程。生成了之后会承担什么任务？","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447082,"discussion_content":"链表头部","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567694981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86136,"user_name":"随风","can_delete":false,"product_type":"c1","uid":1476862,"ip_address":"","ucode":"037CE3554D8AB9","user_header":"https://static001.geekbang.org/account/avatar/00/16/88/fe/c18a85fe.jpg","comment_is_top":false,"comment_ctime":1555313291,"is_pvip":false,"replies":[{"id":"49667","content":"在内核里面都是task","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567696399,"ip_address":"","comment_id":86136,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555313291","product_id":100024701,"comment_content":"为什么这里创建的是进程，函数名却是线程呢？没有给出答案啊！","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446893,"discussion_content":"在内核里面都是task","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567696399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85840,"user_name":"tux","can_delete":false,"product_type":"c1","uid":1477811,"ip_address":"","ucode":"BB7202009FC885","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/b3/a74a7125.jpg","comment_is_top":false,"comment_ctime":1555254221,"is_pvip":false,"replies":[{"id":"49684","content":"厉害，加油","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567697192,"ip_address":"","comment_id":85840,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555254221","product_id":100024701,"comment_content":"周末，将原先所记内容，再次增删改查","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446832,"discussion_content":"厉害，加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567697192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85716,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1555211576,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1555211576","product_id":100024701,"comment_content":"pstree 这个工具是显示的用户态的进程<br>内核态的进度(也就是任务列表) 可以利用什么工具看到呢？？","like_count":0},{"had_liked":false,"id":85664,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1555167050,"is_pvip":false,"replies":[{"id":"49695","content":"创建不一定马上执行，紧接着创建，前后差别不大。ps能看到的，进程那一节会讲","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567697858,"ip_address":"","comment_id":85664,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555167050","product_id":100024701,"comment_content":"想请教两个问题：<br><br>1、为什么0号进程，会先启用用户态管理1号进程sbin&#47;init，再启用内核态管理2号进程kthreadd呢？感觉先启用内核态管理进程kthreadd，好像会更合理一些。<br><br>2、pstree看到的进程树都是从1号进程开始的，有工具可以看到2号进程开始的进程树吗？<br><br>感谢：）","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446758,"discussion_content":"创建不一定马上执行，紧接着创建，前后差别不大。ps能看到的，进程那一节会讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567697858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85637,"user_name":"change","can_delete":false,"product_type":"c1","uid":1455068,"ip_address":"","ucode":"616071E26C861A","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/dc/5197a6b2.jpg","comment_is_top":false,"comment_ctime":1555151719,"is_pvip":false,"replies":[{"id":"49697","content":"赞，加油","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567697896,"ip_address":"","comment_id":85637,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555151719","product_id":100024701,"comment_content":"刷第二遍才感觉通了一些","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446745,"discussion_content":"赞，加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567697896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85601,"user_name":"tiankonghewo","can_delete":false,"product_type":"c1","uid":1476427,"ip_address":"","ucode":"7A55A9C17DD9DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/4b/16ea3997.jpg","comment_is_top":false,"comment_ctime":1555138476,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555138476","product_id":100024701,"comment_content":"打卡,有进步","like_count":0},{"had_liked":false,"id":85567,"user_name":"Frank_51","can_delete":false,"product_type":"c1","uid":1135841,"ip_address":"","ucode":"3976DEC3EF25B5","user_header":"https://static001.geekbang.org/account/avatar/00/11/54/e1/bdbe3e29.jpg","comment_is_top":false,"comment_ctime":1555126359,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555126359","product_id":100024701,"comment_content":"牛逼，逐步学习，逐步理解","like_count":0},{"had_liked":false,"id":85501,"user_name":"cugphoenix","can_delete":false,"product_type":"c1","uid":1474356,"ip_address":"","ucode":"80101AF04C00D3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3F4IdQuDZrhN8ThibP85eCiaSWTYpTrcC6QB9EoAkw3IIj6otMibb1CgrS1uzITAnJmGLXQ2tgIkAQ/132","comment_is_top":false,"comment_ctime":1555080058,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555080058","product_id":100024701,"comment_content":"有个疑问想问下: ramdisk上面的 &#47;init 的内容最终还是从硬盘读取的吗？是把硬盘的某一块区域划出来，专门用于 vfs 吗？","like_count":0},{"had_liked":false,"id":85418,"user_name":"测试账号勿删","can_delete":false,"product_type":"c1","uid":1106532,"ip_address":"","ucode":"1645D775C95094","user_header":"https://static001.geekbang.org/account/avatar/00/10/e2/64/b5f4fa28.jpg","comment_is_top":false,"comment_ctime":1555056331,"is_pvip":false,"replies":[{"id":"49703","content":"c语言还是简单的","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698094,"ip_address":"","comment_id":85418,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555056331","product_id":100024701,"comment_content":"这一节开始有点跟不动了，必须看c的源码才能继续后面的章节吗？C语言也已经忘了。","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446665,"discussion_content":"c语言还是简单的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85417,"user_name":"fenghuo","can_delete":false,"product_type":"c1","uid":1107514,"ip_address":"","ucode":"88A9F5BE0BBAA5","user_header":"https://static001.geekbang.org/account/avatar/00/10/e6/3a/5e8be862.jpg","comment_is_top":false,"comment_ctime":1555056070,"is_pvip":true,"replies":[{"id":"49704","content":"赞，加油","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698102,"ip_address":"","comment_id":85417,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555056070","product_id":100024701,"comment_content":"又看了2遍，似乎懂了","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446664,"discussion_content":"赞，加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85396,"user_name":"Timo","can_delete":false,"product_type":"c1","uid":1223829,"ip_address":"","ucode":"6A7FEB30B09797","user_header":"https://static001.geekbang.org/account/avatar/00/12/ac/95/9b3e3859.jpg","comment_is_top":false,"comment_ctime":1555052479,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555052479","product_id":100024701,"comment_content":"有点开始晕晕的，还是得配套看些其他知识哈","like_count":0},{"had_liked":false,"id":85345,"user_name":"胡桥","can_delete":false,"product_type":"c1","uid":1055874,"ip_address":"","ucode":"673C3207614010","user_header":"https://static001.geekbang.org/account/avatar/00/10/1c/82/74ab79df.jpg","comment_is_top":false,"comment_ctime":1555041019,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555041019","product_id":100024701,"comment_content":"不知其然更不知其所以然~","like_count":0},{"had_liked":false,"id":85340,"user_name":"孙同学爱吉他","can_delete":false,"product_type":"c1","uid":1188095,"ip_address":"","ucode":"04B26F9623D039","user_header":"https://static001.geekbang.org/account/avatar/00/12/20/ff/4fdd8b44.jpg","comment_is_top":false,"comment_ctime":1555040588,"is_pvip":false,"replies":[{"id":"49714","content":"ELF文件，参考进程那一章","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698370,"ip_address":"","comment_id":85340,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555040588","product_id":100024701,"comment_content":"老师，我想问创建用户进程会先加载进程可执行文件的那部分，那几个段，","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446636,"discussion_content":"ELF文件，参考进程那一章","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85305,"user_name":"nimil","can_delete":false,"product_type":"c1","uid":1197925,"ip_address":"","ucode":"19933068972746","user_header":"https://static001.geekbang.org/account/avatar/00/12/47/65/cce8eb34.jpg","comment_is_top":false,"comment_ctime":1555032524,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555032524","product_id":100024701,"comment_content":"娓娓道来","like_count":0},{"had_liked":false,"id":85232,"user_name":"MJ","can_delete":false,"product_type":"c1","uid":1237145,"ip_address":"","ucode":"FCEC0C21444D2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","comment_is_top":false,"comment_ctime":1555025045,"is_pvip":false,"replies":[{"id":"49726","content":"加油","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698622,"ip_address":"","comment_id":85232,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555025045","product_id":100024701,"comment_content":"底子差，这节有点懵","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446600,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85210,"user_name":"Léon","can_delete":false,"product_type":"c1","uid":1082397,"ip_address":"","ucode":"201060885623F8","user_header":"https://static001.geekbang.org/account/avatar/00/10/84/1d/f8702ed0.jpg","comment_is_top":false,"comment_ctime":1555002490,"is_pvip":false,"replies":[{"id":"49728","content":"十二点更新","user_name":"作者回复","user_name_real":"刘超@网易云","uid":"1001590","ctime":1567698674,"ip_address":"","comment_id":85210,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555002490","product_id":100024701,"comment_content":"凌晨一点打开一看发现居然更新了","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"刘超","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446594,"discussion_content":"十二点更新","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567698674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}