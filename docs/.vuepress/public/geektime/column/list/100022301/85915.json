{"id":85915,"title":"加餐 | 你真的了解重构吗？","content":"<p>今天（3月15日），Martin Fowler 《重构》第二版的中文版正式发布。前不久，人邮的杨海灵老师找到我，让我帮忙给这本书写推荐语，我毫不犹豫地就答应了，有机会为经典之作写推荐语，实属个人荣幸。</p><p>不过，我随即想到，在专栏里，我只是在谈 TDD 的时候提到了重构，并没有把它作为一个专门的话题来讲，于是，我决定给我的专栏读者加餐，专门谈谈重构，毕竟重构是几乎每个程序员都会用到的词汇。但你真的了解重构吗？</p><h2>每个程序员都要做的事</h2><p>作为程序员，我们都希望自己的代码是完美的。但没有代码是完美的，因为只要你的代码还有生命力，一定会有新的需求进来，而新的需求常常是你在编写这段代码之初始料未及的。</p><p>很多人直觉的选择是，顺着既有的代码结构继续写下去，这里添一个 if，那里加一个标记位，长此以往，代码便随时间腐坏了。</p><p>如果用一个物理学术语描述这种现象，那就是“熵增”，这也就是大名鼎鼎的热力学第二定律。如果没有外部干预，系统会朝着越来越混乱的方向发展。对抗熵增的一个办法就是引入负熵，让系统变得更加有序。而在代码中引入负熵的过程就是“重构”。</p><p>调整代码这件事是程序员都会有的习惯，但把这件事做到比较系统，上升为“重构”这个值得推广的实践是从一个小圈子开始的，这个小圈子的核心就是我们在专栏里前面提到过的两位大师级程序员：Ward Cunningham 和 Kent Beck。</p><!-- [[[read_end]]] --><p>而真正让这个概念走出小圈子，来到大众面前的，则是 Martin Fowler 在1999年写下那本软件行业的名著《重构：改善既有代码的设计》（Refactoring: Improving the Design of Existing Code）。</p><p>Martin Fowler 的本事就在于他极强的阐述能力，很多名词经过他的定义就会成为行业的流行语（Buzzword），重构就是其中之一。</p><p>重构这个说法可比“调整代码”听上去高级多了。时至今日，很多人都会把重构这个词挂在嘴边：“这个系统太乱了，需要重构一下。”</p><p><strong>但遗憾的是，很多程序员对重构的理解是错的。</strong></p><h2>重构是一种微操作</h2><p>你理解的重构是什么呢？就以前面那句话为例：这个系统太乱了，需要重构一下。如果我们接着问，你打算怎么重构呢？一些人就会告诉你，他们打算另立门户，重新实现这套系统。对不起，<strong>你打算做的事叫重写（rewrite），而不是重构（refactoring）。</strong></p><p>《重构》是一本畅销书，但以我的了解，很少有人真正读完它，因为 Martin Fowler 是按照两本书（Duplex Book）来写的，这是他常用写书的风格，前半部分是内容讲解，后半部分是手册。</p><p>让这本书真正声名鹊起的就是前半部分，这部分写出了重构这件事的意义，而后半部分的重构手册很少有人会看完。很多人以为看了前半部分就懂了重构，所以，在他们看来，重构就是调整代码。调整代码的方法我有很多啊，重写也是其中之一。</p><p>如果真的花时间去看这本书的后半部分，你多半会觉得很无聊，因为每个重构手法都是非常细微的，比如，变量改名，提取方法等等。尤其是在今天，这些手法已经成了 IDE 中的菜单。估计这也是很多人就此把书放下，觉得重构不过如此的原因。</p><p>所以，行业里流传着各种关于重构的误解，多半是没有理解这些重构手法的含义。</p><p><strong>重构，本质上就是一个“微操作”的实践。</strong>如果你不能理解“微操作”的含义，自然是无法理解重构的真正含义，也就不能理解为什么说“大开大合”的重写并不在重构的范畴之内。</p><p>我在《<a href=\"http://time.geekbang.org/column/article/78507\">大师级程序员的工作秘笈</a>》这篇文章中曾经给你介绍过“微操作”，每一步都很小，小到甚至在很多人眼里它都是微不足道的。</p><p>重构，也属于微操作的行列，与我们介绍的任务分解结合起来，你就能很好地理解那些重构手法的含义了：<strong>你需要把做的代码调整分解成若干可以单独进行的“重构”小动作，然后，一步一步完成它。</strong></p><p>比如，服务类中有一个通用的方法，它并不适合在这个有业务含义的类里面，所以，我们打算把它挪到一个通用的类里面。你会怎么做呢？</p><p>大刀阔斧的做法一定是创建一个新的通用类，然后把这个方法复制过去，修复各种编译错误。而重构的手法就会把它做一个分解：</p><ul>\n<li>添加一个新的通用类，用以放置这个方法；</li>\n<li>在业务类中，添加一个字段，其类型是新添加的通用类；</li>\n<li>搬移实例方法，将这个方法移动到新的类里面。</li>\n</ul><p>得益于现在的 IDE 能力的增强，最后一步，按下快捷键，它就可以帮我们完成搬移和修改各处调用的工作。</p><p><strong>在这个分解出来的步骤里，每一步都可以很快完成，而且，每做完一步都是可以停下来的，这才是微操作真正的含义。</strong>这是大刀阔斧做法做不到的，你修改编译错误的时候，你不知道自己需要修改多少地方，什么时候是一个头。</p><p>当然，这是一个很简单的例子，大刀阔斧的改过去也无伤大雅。但事实上，很多稍有规模的修改，如果不能以重构的方式进行，常常很快就不知道自己改到哪了，这也是很多所谓“重写”项目面临的最大风险，一旦开始，不能停止。</p><p>你现在理解了，重构不仅仅是一堆重构手法，更重要的是，<strong>你需要有的是“把调整代码的动作分解成一个个重构小动作”的能力。</strong></p><h2>重构地图</h2><p>下面我准备给你提供一张关于重构的知识地图，帮你了解它与周边诸多知识之间的关系，辅助你更好地理解重构。</p><p>学习重构，先要知道重构的定义。关于这点，Martin Fowler 给出了两个定义，一个名词和一个动词。</p><blockquote>\n<p>重构（名词）：对软件内部结构的一种调整，目的是在不改变软件可观察行为的前提下，提高其可理解性，降低其修改成本。</p>\n</blockquote><blockquote>\n<p>重构（动词）：使用一系列重构手法，在不改变软件可观察行为的前提下，调整其结构。</p>\n</blockquote><p>之所以要了解重构的定义，因为重构的知识地图就是围绕着这个定义展开的。</p><p>首先，我们要对软件的内部结构进行调整，第一个要回答的问题是，我们为什么要调整。Martin Fowler 对于这个问题的回答是：代码的坏味道。</p><p>代码的坏味道，在我看来，是这本书给行业最重要的启发。很多人常常是无法嗅到代码坏味道的，因此，他们会任由代码腐坏，那种随便添加 if 或标记的做法就是嗅不出坏味道的表现。</p><p>我经常给人推荐《重构》这本书，但我也常常会补上一句，如果你实在没有时间，就去看它的第三章《代码的坏味道》。</p><p>顺便说一下，对比两版的《重构》，你会发现它们在坏味道的定义上有所差异，在新版的《重构》中，可变数据（Mutable Data）、循环语句（Loops）都定义成了坏味道，如果你不曾关注近些年的编程发展趋势，这样的定义着实会让人为之震惊。但只要了解了函数式编程的趋势，就不难理解它们的由来了。</p><p>换句话说，<strong>函数式编程已然成为时代的主流</strong>。如果你还不了解，赶紧去了解。</p><p>我们接着回到重构的定义上，重构是要不改变软件的可观察行为。我们怎么知道是不是改变了可观察行为，最常见的方式就是测试。</p><p>关于测试，我在“任务分解”模块已经讲了很多，你现在已经可以更好地理解重构、TDD 这些概念是怎样相互配合一起的了吧！</p><p>再来，重构是要提高可理解性，那重构到什么程度算是一个头呢？当年重构讨论最火热的时候，有人给出了一个答案：<a href=\"http://book.douban.com/subject/1917706/\">重构成模式</a>（Refactoring to Patterns）。当然，这也是一本书的名字，有兴趣的话，可以找来读一读。</p><p>我个人有个猜想，如果这个讨论可以延续到2008年，等到 Robert Martin 的《Clean Code》出版，也许有人会提“重构成 Clean Code”也未可知。所以，无论是设计模式，亦或是 Clean Code，都是推荐你去学习的。</p><p>至此，我把重构的周边知识整理了一番，让你在学习重构时，可以做到不仅仅是只见树木，也可看见森林。当然，重构的具体知识，还是去看 Martin Fowler  的书吧！</p><h2>总结时刻</h2><p>总结一下今天的内容。今天我介绍了一个大家耳熟能详的概念：重构。不过，这实在是一个让人误解太多的概念，大家经常认为调整代码就是在做重构。</p><p>重构，本质上就是一堆微操作。重构这个实践的核心，就是将调整代码的动作分解成一个一个的小动作，如果不能理解这一点，你就很难理解重构本身的价值。</p><p>不过，对于我们专栏的读者而言，因为大家已经学过了“任务分解”模块，理解起这个概念，难度应该降低了很多。</p><p>既然重构的核心也是分解，它就需要大量的锤炼。就像之前提到任务分解原则一样，我在重构上也下了很大的功夫做了专门的练习，才能让自己一小步一小步地去做。但一个有追求的软件工匠不就应该这样锤炼自己的基本功吗？</p><p>如果今天的内容你只记住一件事，那请记住：<strong>锤炼你的重构技能。</strong></p><p>最后，我想请你分享一下，你对重构的理解。欢迎在留言区写下你的想法。</p><p>感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给你的朋友。</p><p></p>","neighbors":{"left":{"article_title":"划重点 | 一次关于“沟通反馈”主题内容的复盘","id":85625},"right":{"article_title":"29 | “懒惰”应该是所有程序员的骄傲","id":86210}},"comments":[{"had_liked":false,"id":76531,"user_name":"非鱼","can_delete":false,"product_type":"c1","uid":1257472,"ip_address":"","ucode":"05E94902079501","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/gUrsZ7qVBOOdjbicqr5raIjT3MGV1LtmzNR2puebKMpsOSeRbVKSFppKUM5Zk8Fg5ic9SzQZ6yEuVAWJ2gVnica6w/132","comment_is_top":false,"comment_ctime":1552628844,"is_pvip":false,"replies":[{"id":28023,"content":"有几本可以了解一下，《计算机程序的解释与构造》（Structure and Interpretation of Computer Programs，SICP），还有《Haskell 趣学指南》（Learn You a Haskell for Great Good!），《函数式编程思维》（Functional Thinking）。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552729681,"ip_address":"","comment_id":76531,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"函数式编程有什么推荐书籍吗？","like_count":38},{"had_liked":false,"id":82590,"user_name":"旭东(Frank)","can_delete":false,"product_type":"c1","uid":1024486,"ip_address":"","ucode":"176FA629800062","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","comment_is_top":false,"comment_ctime":1554255087,"is_pvip":false,"replies":[{"id":29889,"content":"这个比喻…有点道理","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1554270568,"ip_address":"","comment_id":82590,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"重构是“改革”，重写是“改朝”","like_count":28,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443342,"discussion_content":"有几本可以了解一下，《计算机程序的解释与构造》（Structure and Interpretation of Computer Programs，SICP），还有《Haskell 趣学指南》（Learn You a Haskell for Great Good!），《函数式编程思维》（Functional Thinking）。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1552729681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77089,"user_name":"行与修","can_delete":false,"product_type":"c1","uid":1241842,"ip_address":"","ucode":"11F21B663EF6D3","user_header":"https://static001.geekbang.org/account/avatar/00/12/f2/f2/2a9a6e9a.jpg","comment_is_top":false,"comment_ctime":1552831655,"is_pvip":false,"replies":[{"id":28105,"content":"观察和解释都很到位。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552863901,"ip_address":"","comment_id":77089,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"重构不仅是愿景（名词），也不仅是行为（动词），还应该成为程序员必备的习惯和工作方式。但要成为习惯，甚至是深入骨髓的那种，是需要有积极意识和大量联系的。\n有程序员会说，先把功能实现了，后面我再去重构，但后来的情况往往是不重构，或是债务过多重构代价太大，原因也大多是之前课程中提到的诸如任务分解不到位，微操作缺失，缺乏合理有效的单元测试等等，所以程序员的自我修养也是要体系化的，所谓功到自然成。与诸君共勉之！","like_count":15,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443575,"discussion_content":"观察和解释都很到位。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552863901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152407,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1573992796,"is_pvip":false,"replies":[{"id":71414,"content":"心疼你","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1583386531,"ip_address":"","comment_id":152407,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"讲个段子，身为公司首架（自己封的）  我和其他开发人员的最根基差别就在于重构。","like_count":14,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474809,"discussion_content":"心疼你","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583386531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79291,"user_name":"zapup","can_delete":false,"product_type":"c1","uid":1397351,"ip_address":"","ucode":"388D6BB5D7B137","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/67/fcba0967.jpg","comment_is_top":false,"comment_ctime":1553425240,"is_pvip":false,"replies":[{"id":28955,"content":"重构，从理解重构开始。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1553475587,"ip_address":"","comment_id":79291,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"维护别人的“旧代码”，可以从重构开始。","like_count":12,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444434,"discussion_content":"重构，从理解重构开始。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553475587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152400,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1573991988,"is_pvip":false,"replies":[{"id":73947,"content":"共勉","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1585031630,"ip_address":"","comment_id":152400,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"分享里面一句对我影响很大的话，  将意图与实现分离。","like_count":9,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474807,"discussion_content":"共勉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585031630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129274,"user_name":"码农Kevin亮","can_delete":false,"product_type":"c1","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1567076280,"is_pvip":false,"replies":[{"id":48137,"content":"恭喜你认清了一个概念","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1567122442,"ip_address":"","comment_id":129274,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"一直以为重构是要重新调整结构。学习了任务分解的概念才知道原来我一直在重写","like_count":8,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465376,"discussion_content":"恭喜你认清了一个概念","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567122442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261868,"user_name":"下个目标45k","can_delete":false,"product_type":"c1","uid":1066508,"ip_address":"","ucode":"193BA8C3AA9A61","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","comment_is_top":false,"comment_ctime":1605542868,"is_pvip":false,"replies":[{"id":95896,"content":"目的是代码更具可维护性，能够长期发展。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1606520701,"ip_address":"","comment_id":261868,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"重构是手段，单元测试是后盾，消除代码坏味道则是目的","like_count":6,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509649,"discussion_content":"目的是代码更具可维护性，能够长期发展。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606520701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1357749,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTISkR0XDibLuwwl6PibTpQmDrnV7feN1YibqvrnpCE8fVk5cPPuUUxqvW4IZicrmTKXueTW6LpSNrxt4w/132","nickname":"一片羽毛","note":"","ucode":"C6B6AA0294219E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555143,"discussion_content":"目标达到了吗？兄弟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646783666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215417,"user_name":"Victor","can_delete":false,"product_type":"c1","uid":1867796,"ip_address":"","ucode":"0AA9F68348A4D1","user_header":"https://static001.geekbang.org/account/avatar/00/1c/80/14/0bcc4dd3.jpg","comment_is_top":false,"comment_ctime":1588988402,"is_pvip":false,"replies":[{"id":81783,"content":"你说得非常对，添加新功能都是重构的时机。今天不重构，明天就重构不动了。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1590621552,"ip_address":"","comment_id":215417,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"重构应该是一个可持续发展的过程，阶段性的就要复盘改善代码，还有每次添加新功能的时候都是重构的合适时机；否则长期不做发展下去就会很难重构，因为害怕破坏原有的逻辑，重构的风险也会增加。","like_count":5,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494425,"discussion_content":"你说得非常对，添加新功能都是重构的时机。今天不重构，明天就重构不动了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590621552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108410,"user_name":"小钟","can_delete":false,"product_type":"c1","uid":1242438,"ip_address":"","ucode":"1ADA62DBC5E22C","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/46/f45d23a2.jpg","comment_is_top":false,"comment_ctime":1561754492,"is_pvip":false,"replies":[{"id":98196,"content":"你有收获，我很欣慰。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1609221165,"ip_address":"","comment_id":108410,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"买了十来个专栏从来没有写过留言，读到这里很认同之前看过的几个留言，郑老师的这个专栏是看过对我帮助最大的一个，可以用高级来形容，将软件工程，agile,，精益创业的一些概念结合的很好，谢谢老师。","like_count":5,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455959,"discussion_content":"你有收获，我很欣慰。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609221165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76531,"user_name":"非鱼","can_delete":false,"product_type":"c1","uid":1257472,"ip_address":"","ucode":"05E94902079501","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/gUrsZ7qVBOOdjbicqr5raIjT3MGV1LtmzNR2puebKMpsOSeRbVKSFppKUM5Zk8Fg5ic9SzQZ6yEuVAWJ2gVnica6w/132","comment_is_top":false,"comment_ctime":1552628844,"is_pvip":false,"replies":[{"id":28023,"content":"有几本可以了解一下，《计算机程序的解释与构造》（Structure and Interpretation of Computer Programs，SICP），还有《Haskell 趣学指南》（Learn You a Haskell for Great Good!），《函数式编程思维》（Functional Thinking）。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552729681,"ip_address":"","comment_id":76531,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"函数式编程有什么推荐书籍吗？","like_count":38,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443342,"discussion_content":"有几本可以了解一下，《计算机程序的解释与构造》（Structure and Interpretation of Computer Programs，SICP），还有《Haskell 趣学指南》（Learn You a Haskell for Great Good!），《函数式编程思维》（Functional Thinking）。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1552729681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82590,"user_name":"旭东(Frank)","can_delete":false,"product_type":"c1","uid":1024486,"ip_address":"","ucode":"176FA629800062","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","comment_is_top":false,"comment_ctime":1554255087,"is_pvip":false,"replies":[{"id":29889,"content":"这个比喻…有点道理","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1554270568,"ip_address":"","comment_id":82590,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"重构是“改革”，重写是“改朝”","like_count":28,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445652,"discussion_content":"这个比喻…有点道理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554270568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77089,"user_name":"行与修","can_delete":false,"product_type":"c1","uid":1241842,"ip_address":"","ucode":"11F21B663EF6D3","user_header":"https://static001.geekbang.org/account/avatar/00/12/f2/f2/2a9a6e9a.jpg","comment_is_top":false,"comment_ctime":1552831655,"is_pvip":false,"replies":[{"id":28105,"content":"观察和解释都很到位。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552863901,"ip_address":"","comment_id":77089,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"重构不仅是愿景（名词），也不仅是行为（动词），还应该成为程序员必备的习惯和工作方式。但要成为习惯，甚至是深入骨髓的那种，是需要有积极意识和大量联系的。\n有程序员会说，先把功能实现了，后面我再去重构，但后来的情况往往是不重构，或是债务过多重构代价太大，原因也大多是之前课程中提到的诸如任务分解不到位，微操作缺失，缺乏合理有效的单元测试等等，所以程序员的自我修养也是要体系化的，所谓功到自然成。与诸君共勉之！","like_count":15,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445652,"discussion_content":"这个比喻…有点道理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554270568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152407,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1573992796,"is_pvip":false,"replies":[{"id":71414,"content":"心疼你","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1583386531,"ip_address":"","comment_id":152407,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"讲个段子，身为公司首架（自己封的）  我和其他开发人员的最根基差别就在于重构。","like_count":14,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443575,"discussion_content":"观察和解释都很到位。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552863901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79291,"user_name":"zapup","can_delete":false,"product_type":"c1","uid":1397351,"ip_address":"","ucode":"388D6BB5D7B137","user_header":"https://static001.geekbang.org/account/avatar/00/15/52/67/fcba0967.jpg","comment_is_top":false,"comment_ctime":1553425240,"is_pvip":false,"replies":[{"id":28955,"content":"重构，从理解重构开始。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1553475587,"ip_address":"","comment_id":79291,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"维护别人的“旧代码”，可以从重构开始。","like_count":12,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474809,"discussion_content":"心疼你","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583386531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152400,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1573991988,"is_pvip":false,"replies":[{"id":73947,"content":"共勉","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1585031630,"ip_address":"","comment_id":152400,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"分享里面一句对我影响很大的话，  将意图与实现分离。","like_count":9,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444434,"discussion_content":"重构，从理解重构开始。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553475587,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129274,"user_name":"码农Kevin亮","can_delete":false,"product_type":"c1","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1567076280,"is_pvip":false,"replies":[{"id":48137,"content":"恭喜你认清了一个概念","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1567122442,"ip_address":"","comment_id":129274,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"一直以为重构是要重新调整结构。学习了任务分解的概念才知道原来我一直在重写","like_count":8,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474807,"discussion_content":"共勉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585031630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261868,"user_name":"下个目标45k","can_delete":false,"product_type":"c1","uid":1066508,"ip_address":"","ucode":"193BA8C3AA9A61","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","comment_is_top":false,"comment_ctime":1605542868,"is_pvip":false,"replies":[{"id":95896,"content":"目的是代码更具可维护性，能够长期发展。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1606520701,"ip_address":"","comment_id":261868,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"重构是手段，单元测试是后盾，消除代码坏味道则是目的","like_count":6,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465376,"discussion_content":"恭喜你认清了一个概念","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567122442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215417,"user_name":"Victor","can_delete":false,"product_type":"c1","uid":1867796,"ip_address":"","ucode":"0AA9F68348A4D1","user_header":"https://static001.geekbang.org/account/avatar/00/1c/80/14/0bcc4dd3.jpg","comment_is_top":false,"comment_ctime":1588988402,"is_pvip":false,"replies":[{"id":81783,"content":"你说得非常对，添加新功能都是重构的时机。今天不重构，明天就重构不动了。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1590621552,"ip_address":"","comment_id":215417,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"重构应该是一个可持续发展的过程，阶段性的就要复盘改善代码，还有每次添加新功能的时候都是重构的合适时机；否则长期不做发展下去就会很难重构，因为害怕破坏原有的逻辑，重构的风险也会增加。","like_count":5,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509649,"discussion_content":"目的是代码更具可维护性，能够长期发展。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606520701,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1357749,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTISkR0XDibLuwwl6PibTpQmDrnV7feN1YibqvrnpCE8fVk5cPPuUUxqvW4IZicrmTKXueTW6LpSNrxt4w/132","nickname":"一片羽毛","note":"","ucode":"C6B6AA0294219E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555143,"discussion_content":"目标达到了吗？兄弟","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646783666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108410,"user_name":"小钟","can_delete":false,"product_type":"c1","uid":1242438,"ip_address":"","ucode":"1ADA62DBC5E22C","user_header":"https://static001.geekbang.org/account/avatar/00/12/f5/46/f45d23a2.jpg","comment_is_top":false,"comment_ctime":1561754492,"is_pvip":false,"replies":[{"id":98196,"content":"你有收获，我很欣慰。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1609221165,"ip_address":"","comment_id":108410,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100022301,"comment_content":"买了十来个专栏从来没有写过留言，读到这里很认同之前看过的几个留言，郑老师的这个专栏是看过对我帮助最大的一个，可以用高级来形容，将软件工程，agile,，精益创业的一些概念结合的很好，谢谢老师。","like_count":5,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494425,"discussion_content":"你说得非常对，添加新功能都是重构的时机。今天不重构，明天就重构不动了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590621552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170042,"user_name":"张亚运","can_delete":false,"product_type":"c1","uid":1721718,"ip_address":"","ucode":"2D0C667E0D7B07","user_header":"https://static001.geekbang.org/account/avatar/00/1a/45/76/2b1354f6.jpg","comment_is_top":false,"comment_ctime":1578496913,"is_pvip":false,"replies":[{"id":70220,"content":"点对了","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1582461979,"ip_address":"","comment_id":170042,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"添加一个新功能，先重构，再加新的业务功能。","like_count":4},{"had_liked":false,"id":76395,"user_name":"西西弗与卡夫卡","can_delete":false,"product_type":"c1","uid":1001710,"ip_address":"","ucode":"B4C27B8335B76A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/ee/96a7d638.jpg","comment_is_top":false,"comment_ctime":1552583031,"is_pvip":true,"replies":[{"id":27847,"content":"是的，典型的标题党式理解问题。:)","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552607514,"ip_address":"","comment_id":76395,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"不少人把重构望文生义或者扩大到成重新构造、重新构建甚至推倒重来了吧","like_count":4,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480819,"discussion_content":"点对了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582461979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180231,"user_name":"javaadu","can_delete":false,"product_type":"c1","uid":1000519,"ip_address":"","ucode":"8C0B140F1C8992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg","comment_is_top":false,"comment_ctime":1582214224,"is_pvip":true,"replies":[{"id":70014,"content":"我和老马可是前同事，认真理解过重构的 :)","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1582258614,"ip_address":"","comment_id":180231,"utype":1}],"discussion_count":1,"race_medal":1,"score":3,"product_id":100022301,"comment_content":"在《设计模式之美》的专栏里，王争老师将重构阐述为微观操作和宏观操作，分别对应着《重构》和《重构模式》2本书。不过我本身更倾向于郑老师的说法，重构主要还是微观操作，大的重构基本都是以重写为结局。","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443289,"discussion_content":"是的，典型的标题党式理解问题。:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552607514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76837,"user_name":"我行我素","can_delete":false,"product_type":"c1","uid":1224678,"ip_address":"","ucode":"4C69542FAB0671","user_header":"https://static001.geekbang.org/account/avatar/00/12/af/e6/9c77acff.jpg","comment_is_top":false,"comment_ctime":1552723452,"is_pvip":false,"replies":[{"id":28018,"content":"如果你看到了差异，我的目的就达到了。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552729204,"ip_address":"","comment_id":76837,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"在之前的理解中一直认为重构就是将看着别扭或者影响性能和可能出现问题的代码进行调优，","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484575,"discussion_content":"我和老马可是前同事，认真理解过重构的 :)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582258614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76831,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1552722008,"is_pvip":false,"replies":[{"id":28021,"content":"你没有在这个类里面添加新类的实例。\n\npublic class T1Dao {\n    private NewCommon target;\n    ...\n\n    public void printName(String name) {\n        System.out.println(&quot;Dao层的name&quot;);\n    }\n}","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552729322,"ip_address":"","comment_id":76831,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"我用idea建立了一个spring写了一个简单的MVC，按您的方法搞了半天终于搞定了。\n但有一个问题，代码如下\npackage com.hualinux;\n\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic class T1Dao {\n\n    public void printName(String name){\n        System.out.println(&quot;Dao层的name&quot;);\n    }\n}\n我光标放在方法行，按F6，会弹出如下提示：\nAll candidate variables have types that are not in project.Would you like to make method &#39;printName&#39; static and then move\n非要静态化才行，要不不给操作~~","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443461,"discussion_content":"你没有在这个类里面添加新类的实例。\n\npublic class T1Dao {\n    private NewCommon target;\n    ...\n\n    public void printName(String name) {\n        System.out.println(&amp;quot;Dao层的name&amp;quot;);\n    }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552729322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76641,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1552653728,"is_pvip":false,"replies":[{"id":27952,"content":"最后一步叫“搬移”，就是把服务类的方法删除，在通用类里增加。用 IDE 的“重构”动作完成，它会替你搞定所有问题。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552655480,"ip_address":"","comment_id":76641,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"老师，我有点疑惑：\n文中 重构的手法就会把它做一个分解：\n●添加一个新的通用类，用以放置这个方法；\n●在业务类中，添加一个字段，其类型是新添加的通用类；\n●搬移实例方法，将这个方法移动到新的类里面。\n\n最后服务类中有一个通用的方法是不是要在服务类中删除或注解掉？\n如果删除或注解那不是一样引起大批量操作？那跟重写不是差不多了？\n如果没删除那不是有2处可以引用相同的方法？不是产生冗余了吗？","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443387,"discussion_content":"最后一步叫“搬移”，就是把服务类的方法删除，在通用类里增加。用 IDE 的“重构”动作完成，它会替你搞定所有问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552655480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76416,"user_name":"Time","can_delete":false,"product_type":"c1","uid":1231583,"ip_address":"","ucode":"AB4BD43807C148","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/df/f327ac76.jpg","comment_is_top":false,"comment_ctime":1552608876,"is_pvip":false,"replies":[{"id":27858,"content":"确实，他的理解是错的。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552611656,"ip_address":"","comment_id":76416,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"上次去面试，我说我们公司用的项目是ssm的，技术比较老，然后面试官问我没有想过重构嘛？使用新的框架。请问他这个&#39;重构&#39;的意思 其实是 &#39;重写&#39; 了吧？","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443387,"discussion_content":"最后一步叫“搬移”，就是把服务类的方法删除，在通用类里增加。用 IDE 的“重构”动作完成，它会替你搞定所有问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552655480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258308,"user_name":"arronK","can_delete":false,"product_type":"c1","uid":1192961,"ip_address":"","ucode":"58DC6FBF2CF0C1","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/01/30ca98e6.jpg","comment_is_top":false,"comment_ctime":1604379579,"is_pvip":false,"replies":[{"id":96896,"content":"大多数情况，你不想再维护老代码时，你就找借口重写了。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1607507491,"ip_address":"","comment_id":258308,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"所以，有哪些情况是我们需要重写的呢？","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443296,"discussion_content":"确实，他的理解是错的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552611656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298188,"discussion_content":"他这个就是重写了，换新的架构","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597215898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246916,"user_name":"Laughing","can_delete":false,"product_type":"c1","uid":1002134,"ip_address":"","ucode":"F68F1E000CA800","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/96/99466a06.jpg","comment_is_top":false,"comment_ctime":1599530635,"is_pvip":false,"replies":[{"id":100130,"content":"步子太大，容易扯着，慢慢来。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1611728572,"ip_address":"","comment_id":246916,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"如果以“以终为始”的视角来看，重构的最终目的就是拥有一个可读性高，可维护性好的工程。然后重构这个动作就是将达到这个目标的过程进行分解，这是我理解意义上的重构，代码只是我们要操作的最小元素。很多事也一样，例如团队工作流的管理等等，在某种意义上也可以进行“重构”。","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508615,"discussion_content":"大多数情况，你不想再维护老代码时，你就找借口重写了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607507491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214762,"user_name":"liu_liu","can_delete":false,"product_type":"c1","uid":1019138,"ip_address":"","ucode":"24283806A07759","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/02/6a16058a.jpg","comment_is_top":false,"comment_ctime":1588814921,"is_pvip":false,"replies":[{"id":79586,"content":"没有测试的重构很可怕。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1588858482,"ip_address":"","comment_id":214762,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"改善代码，需要持续重构。很多人都怕改坏东西，任由其混乱发展，结果一滩烂泥。","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505258,"discussion_content":"步子太大，容易扯着，慢慢来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611728572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170042,"user_name":"张亚运","can_delete":false,"product_type":"c1","uid":1721718,"ip_address":"","ucode":"2D0C667E0D7B07","user_header":"https://static001.geekbang.org/account/avatar/00/1a/45/76/2b1354f6.jpg","comment_is_top":false,"comment_ctime":1578496913,"is_pvip":false,"replies":[{"id":70220,"content":"点对了","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1582461979,"ip_address":"","comment_id":170042,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"添加一个新功能，先重构，再加新的业务功能。","like_count":4,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480819,"discussion_content":"点对了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582461979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76395,"user_name":"西西弗与卡夫卡","can_delete":false,"product_type":"c1","uid":1001710,"ip_address":"","ucode":"B4C27B8335B76A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/ee/96a7d638.jpg","comment_is_top":false,"comment_ctime":1552583031,"is_pvip":true,"replies":[{"id":27847,"content":"是的，典型的标题党式理解问题。:)","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552607514,"ip_address":"","comment_id":76395,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"不少人把重构望文生义或者扩大到成重新构造、重新构建甚至推倒重来了吧","like_count":4,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443289,"discussion_content":"是的，典型的标题党式理解问题。:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552607514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180231,"user_name":"javaadu","can_delete":false,"product_type":"c1","uid":1000519,"ip_address":"","ucode":"8C0B140F1C8992","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/47/3ddb94d0.jpg","comment_is_top":false,"comment_ctime":1582214224,"is_pvip":true,"replies":[{"id":70014,"content":"我和老马可是前同事，认真理解过重构的 :)","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1582258614,"ip_address":"","comment_id":180231,"utype":1}],"discussion_count":1,"race_medal":1,"score":3,"product_id":100022301,"comment_content":"在《设计模式之美》的专栏里，王争老师将重构阐述为微观操作和宏观操作，分别对应着《重构》和《重构模式》2本书。不过我本身更倾向于郑老师的说法，重构主要还是微观操作，大的重构基本都是以重写为结局。","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484575,"discussion_content":"我和老马可是前同事，认真理解过重构的 :)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582258614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76837,"user_name":"我行我素","can_delete":false,"product_type":"c1","uid":1224678,"ip_address":"","ucode":"4C69542FAB0671","user_header":"https://static001.geekbang.org/account/avatar/00/12/af/e6/9c77acff.jpg","comment_is_top":false,"comment_ctime":1552723452,"is_pvip":false,"replies":[{"id":28018,"content":"如果你看到了差异，我的目的就达到了。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552729204,"ip_address":"","comment_id":76837,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"在之前的理解中一直认为重构就是将看着别扭或者影响性能和可能出现问题的代码进行调优，","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443463,"discussion_content":"如果你看到了差异，我的目的就达到了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552729204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76831,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1552722008,"is_pvip":false,"replies":[{"id":28021,"content":"你没有在这个类里面添加新类的实例。\n\npublic class T1Dao {\n    private NewCommon target;\n    ...\n\n    public void printName(String name) {\n        System.out.println(&quot;Dao层的name&quot;);\n    }\n}","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552729322,"ip_address":"","comment_id":76831,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"我用idea建立了一个spring写了一个简单的MVC，按您的方法搞了半天终于搞定了。\n但有一个问题，代码如下\npackage com.hualinux;\n\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic class T1Dao {\n\n    public void printName(String name){\n        System.out.println(&quot;Dao层的name&quot;);\n    }\n}\n我光标放在方法行，按F6，会弹出如下提示：\nAll candidate variables have types that are not in project.Would you like to make method &#39;printName&#39; static and then move\n非要静态化才行，要不不给操作~~","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443463,"discussion_content":"如果你看到了差异，我的目的就达到了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552729204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76641,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1552653728,"is_pvip":false,"replies":[{"id":27952,"content":"最后一步叫“搬移”，就是把服务类的方法删除，在通用类里增加。用 IDE 的“重构”动作完成，它会替你搞定所有问题。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552655480,"ip_address":"","comment_id":76641,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"老师，我有点疑惑：\n文中 重构的手法就会把它做一个分解：\n●添加一个新的通用类，用以放置这个方法；\n●在业务类中，添加一个字段，其类型是新添加的通用类；\n●搬移实例方法，将这个方法移动到新的类里面。\n\n最后服务类中有一个通用的方法是不是要在服务类中删除或注解掉？\n如果删除或注解那不是一样引起大批量操作？那跟重写不是差不多了？\n如果没删除那不是有2处可以引用相同的方法？不是产生冗余了吗？","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443461,"discussion_content":"你没有在这个类里面添加新类的实例。\n\npublic class T1Dao {\n    private NewCommon target;\n    ...\n\n    public void printName(String name) {\n        System.out.println(&amp;quot;Dao层的name&amp;quot;);\n    }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552729322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76416,"user_name":"Time","can_delete":false,"product_type":"c1","uid":1231583,"ip_address":"","ucode":"AB4BD43807C148","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/df/f327ac76.jpg","comment_is_top":false,"comment_ctime":1552608876,"is_pvip":false,"replies":[{"id":27858,"content":"确实，他的理解是错的。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552611656,"ip_address":"","comment_id":76416,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"上次去面试，我说我们公司用的项目是ssm的，技术比较老，然后面试官问我没有想过重构嘛？使用新的框架。请问他这个&#39;重构&#39;的意思 其实是 &#39;重写&#39; 了吧？","like_count":3,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443296,"discussion_content":"确实，他的理解是错的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552611656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298188,"discussion_content":"他这个就是重写了，换新的架构","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597215898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":258308,"user_name":"arronK","can_delete":false,"product_type":"c1","uid":1192961,"ip_address":"","ucode":"58DC6FBF2CF0C1","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/01/30ca98e6.jpg","comment_is_top":false,"comment_ctime":1604379579,"is_pvip":false,"replies":[{"id":96896,"content":"大多数情况，你不想再维护老代码时，你就找借口重写了。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1607507491,"ip_address":"","comment_id":258308,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"所以，有哪些情况是我们需要重写的呢？","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508615,"discussion_content":"大多数情况，你不想再维护老代码时，你就找借口重写了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607507491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246916,"user_name":"Laughing","can_delete":false,"product_type":"c1","uid":1002134,"ip_address":"","ucode":"F68F1E000CA800","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/96/99466a06.jpg","comment_is_top":false,"comment_ctime":1599530635,"is_pvip":false,"replies":[{"id":100130,"content":"步子太大，容易扯着，慢慢来。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1611728572,"ip_address":"","comment_id":246916,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"如果以“以终为始”的视角来看，重构的最终目的就是拥有一个可读性高，可维护性好的工程。然后重构这个动作就是将达到这个目标的过程进行分解，这是我理解意义上的重构，代码只是我们要操作的最小元素。很多事也一样，例如团队工作流的管理等等，在某种意义上也可以进行“重构”。","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505258,"discussion_content":"步子太大，容易扯着，慢慢来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611728572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214762,"user_name":"liu_liu","can_delete":false,"product_type":"c1","uid":1019138,"ip_address":"","ucode":"24283806A07759","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/02/6a16058a.jpg","comment_is_top":false,"comment_ctime":1588814921,"is_pvip":false,"replies":[{"id":79586,"content":"没有测试的重构很可怕。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1588858482,"ip_address":"","comment_id":214762,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100022301,"comment_content":"改善代码，需要持续重构。很多人都怕改坏东西，任由其混乱发展，结果一滩烂泥。","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494196,"discussion_content":"没有测试的重构很可怕。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588858482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76459,"user_name":"UnivTime","can_delete":false,"product_type":"c1","uid":1008033,"ip_address":"","ucode":"FD8E9F4A53E82A","user_header":"","comment_is_top":false,"comment_ctime":1552613624,"is_pvip":false,"replies":[{"id":27870,"content":"标题党之所以有市场，就是太多人不看内容了。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552616441,"ip_address":"","comment_id":76459,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"题外话：一个容易产生歧义的词本身可能就不是一个好词？或者说没翻译好？","like_count":2},{"had_liked":false,"id":259504,"user_name":"青鸟飞鱼","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1604737775,"is_pvip":false,"replies":[{"id":96895,"content":"当然进步了，进步才能看到问题。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1607507382,"ip_address":"","comment_id":259504,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"老师你好，不知道隔段时间去看自己的代码，觉得不好，是不是一种进步呢？","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443316,"discussion_content":"标题党之所以有市场，就是太多人不看内容了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552616441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250477,"user_name":"陈天柱","can_delete":false,"product_type":"c1","uid":1696225,"ip_address":"","ucode":"917BFDC845760D","user_header":"https://static001.geekbang.org/account/avatar/00/19/e1/e1/441df85d.jpg","comment_is_top":false,"comment_ctime":1601094342,"is_pvip":false,"replies":[{"id":91797,"content":"值得一读","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1601287625,"ip_address":"","comment_id":250477,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"确实像作者提到的，只看了重构前面几章的内容，导致错误的理解了重构。作者给出重构的名词定义和动词定义对我醍醐灌顶，可能很多人和我一样，只了解了重构的名词定义，却没有了解重构的动词定义，是时候重新拿起重构这本书读一读了……","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508947,"discussion_content":"当然进步了，进步才能看到问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607507382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197045,"user_name":"阿星爱美酒","can_delete":false,"product_type":"c1","uid":1525497,"ip_address":"","ucode":"2215BE8E81B18E","user_header":"https://static001.geekbang.org/account/avatar/00/17/46/f9/c9f8c63e.jpg","comment_is_top":false,"comment_ctime":1585352663,"is_pvip":false,"replies":[{"id":74670,"content":"初心的前提是知道什么是重构。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1585435654,"ip_address":"","comment_id":197045,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"现在身边大多数项目的所谓重构应该是重写吧。就像生活常识里面无法反驳的悖论。初心是重构，一不小心就变成了重写。","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489441,"discussion_content":"初心的前提是知道什么是重构。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585435654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87417,"user_name":"J.M.Liu","can_delete":false,"product_type":"c1","uid":1200037,"ip_address":"","ucode":"B2CB84B8E923A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg","comment_is_top":false,"comment_ctime":1555589130,"is_pvip":false,"replies":[{"id":100175,"content":"你的理解可能把重构想复杂了，第一，你要知道坏味道是什么，第二，知道有哪些重构手法，然后，就是识别一个坏味道，施展一种重构手法。\n\n在《代码之丑》中，有各种坏味道的具体代码形式，也有《重构》译者熊节对于重构的解说，可以去看一下。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1611732366,"ip_address":"","comment_id":87417,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"时隔三天，总感觉自己没有理解这一章的内容，尤其是文中举的把一个通用方法挪到一个通用类的例子到底是在说明什么。今天走在路上的时候突然好像“顿悟”了，于是又回来把文章看了一遍，总结如下：\n    1.重构是专业的。重构不是简单的把一堆代码挪到另一个位置，然后再去调整它，使得它能够编译通过和顺利运行。重构应该是一个具体的可以描述和追踪的任务，是由一个一个具体的、有逻辑关系的步骤组成的，不是一锅粥。\n    2.重构是微操作。既然是任务，那么就可以做任务分解，把重构分解成一个个很小的微操作，这些微操作做完任何一个都是可以停下来的。这样，重构就变成了可计划、可追踪的任务线，还可以方便地用项目管理工具管理起来。\n不知道“顿悟”得对不对，望老师指点。","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447436,"discussion_content":"你的理解可能把重构想复杂了，第一，你要知道坏味道是什么，第二，知道有哪些重构手法，然后，就是识别一个坏味道，施展一种重构手法。\n\n在《代码之丑》中，有各种坏味道的具体代码形式，也有《重构》译者熊节对于重构的解说，可以去看一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611732366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79781,"user_name":"旭东(Frank)","can_delete":false,"product_type":"c1","uid":1024486,"ip_address":"","ucode":"176FA629800062","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","comment_is_top":false,"comment_ctime":1553558059,"is_pvip":false,"replies":[{"id":29085,"content":"重写和重构是两个套路，重写基本上需要重新设计，重构一方面可以在日常工作中应用，一方面可以用以发现代码中的结构。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1553561448,"ip_address":"","comment_id":79781,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"重构到重写也是个量变到质变的过程。个人理解。但重写不一定是从重构做到的","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444622,"discussion_content":"重写和重构是两个套路，重写基本上需要重新设计，重构一方面可以在日常工作中应用，一方面可以用以发现代码中的结构。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553561448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78027,"user_name":"Matrix","can_delete":false,"product_type":"c1","uid":1359946,"ip_address":"","ucode":"EE156EDC184A33","user_header":"https://static001.geekbang.org/account/avatar/00/14/c0/4a/0f6611a5.jpg","comment_is_top":false,"comment_ctime":1553057405,"is_pvip":false,"replies":[{"id":28470,"content":"重写不是问题，别说重构就好。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1553060588,"ip_address":"","comment_id":78027,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"最近就在重写一个系统，因为我觉得重构已经救不了它了。。","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443940,"discussion_content":"重写不是问题，别说重构就好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553060588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76456,"user_name":"Charles","can_delete":false,"product_type":"c1","uid":1027892,"ip_address":"","ucode":"F0605C817C36D1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/34/c7081824.jpg","comment_is_top":false,"comment_ctime":1552613436,"is_pvip":false,"replies":[{"id":27871,"content":"赶紧去看第二版。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552616469,"ip_address":"","comment_id":76456,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"最近正好在看这本书 如果光看名字 还真是很容易理解错","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443313,"discussion_content":"赶紧去看第二版。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552616469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259570,"user_name":"azurepwq","can_delete":false,"product_type":"c1","uid":2086825,"ip_address":"","ucode":"10A7BCC37E935D","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d7/a9/f341b89c.jpg","comment_is_top":false,"comment_ctime":1604757952,"is_pvip":true,"replies":[{"id":100109,"content":"加油！","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1611719265,"ip_address":"","comment_id":259570,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"Martine Fowler两本重构的书我都看过，但正如老师所说，主要看的是前几章。后面的实操手册部分，本来想着一边写代码一边参考的。结果这书不久就被我束之高阁了。分析了下原因，可能是自己做事还是太紧张兮兮了吧。想做的事想学的东西有很多很多，做了计划，也实施了行动，但很容易被工作和生活轻易击垮，一紧张就会乱了套，一乱套了，要看的书也没有看，更不要说好好沉下心来学习了。谢谢老师，我会继续总结，而且把两本重构再好好看看。","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443313,"discussion_content":"赶紧去看第二版。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552616469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80544,"user_name":"enjoylearning","can_delete":false,"product_type":"c1","uid":1000237,"ip_address":"","ucode":"DCAF8538DEA277","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/2d/af86d73f.jpg","comment_is_top":false,"comment_ctime":1553678517,"is_pvip":false,"replies":[{"id":100163,"content":"最终都是为了更好的可维护性。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1611730011,"ip_address":"","comment_id":80544,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"我所理解的重构是在原有代码的基础上，无论是让代码clean,还是重构成模式，在有代码测试覆盖率保证的前提下，让其变得humanread和易维护。","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508962,"discussion_content":"加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611719265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76459,"user_name":"UnivTime","can_delete":false,"product_type":"c1","uid":1008033,"ip_address":"","ucode":"FD8E9F4A53E82A","user_header":"","comment_is_top":false,"comment_ctime":1552613624,"is_pvip":false,"replies":[{"id":27870,"content":"标题党之所以有市场，就是太多人不看内容了。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552616441,"ip_address":"","comment_id":76459,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"题外话：一个容易产生歧义的词本身可能就不是一个好词？或者说没翻译好？","like_count":2,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443316,"discussion_content":"标题党之所以有市场，就是太多人不看内容了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552616441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259504,"user_name":"青鸟飞鱼","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1604737775,"is_pvip":false,"replies":[{"id":96895,"content":"当然进步了，进步才能看到问题。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1607507382,"ip_address":"","comment_id":259504,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"老师你好，不知道隔段时间去看自己的代码，觉得不好，是不是一种进步呢？","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508947,"discussion_content":"当然进步了，进步才能看到问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607507382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250477,"user_name":"陈天柱","can_delete":false,"product_type":"c1","uid":1696225,"ip_address":"","ucode":"917BFDC845760D","user_header":"https://static001.geekbang.org/account/avatar/00/19/e1/e1/441df85d.jpg","comment_is_top":false,"comment_ctime":1601094342,"is_pvip":false,"replies":[{"id":91797,"content":"值得一读","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1601287625,"ip_address":"","comment_id":250477,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"确实像作者提到的，只看了重构前面几章的内容，导致错误的理解了重构。作者给出重构的名词定义和动词定义对我醍醐灌顶，可能很多人和我一样，只了解了重构的名词定义，却没有了解重构的动词定义，是时候重新拿起重构这本书读一读了……","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506214,"discussion_content":"值得一读","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601287625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197045,"user_name":"阿星爱美酒","can_delete":false,"product_type":"c1","uid":1525497,"ip_address":"","ucode":"2215BE8E81B18E","user_header":"https://static001.geekbang.org/account/avatar/00/17/46/f9/c9f8c63e.jpg","comment_is_top":false,"comment_ctime":1585352663,"is_pvip":false,"replies":[{"id":74670,"content":"初心的前提是知道什么是重构。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1585435654,"ip_address":"","comment_id":197045,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"现在身边大多数项目的所谓重构应该是重写吧。就像生活常识里面无法反驳的悖论。初心是重构，一不小心就变成了重写。","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506214,"discussion_content":"值得一读","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601287625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87417,"user_name":"J.M.Liu","can_delete":false,"product_type":"c1","uid":1200037,"ip_address":"","ucode":"B2CB84B8E923A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg","comment_is_top":false,"comment_ctime":1555589130,"is_pvip":false,"replies":[{"id":100175,"content":"你的理解可能把重构想复杂了，第一，你要知道坏味道是什么，第二，知道有哪些重构手法，然后，就是识别一个坏味道，施展一种重构手法。\n\n在《代码之丑》中，有各种坏味道的具体代码形式，也有《重构》译者熊节对于重构的解说，可以去看一下。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1611732366,"ip_address":"","comment_id":87417,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"时隔三天，总感觉自己没有理解这一章的内容，尤其是文中举的把一个通用方法挪到一个通用类的例子到底是在说明什么。今天走在路上的时候突然好像“顿悟”了，于是又回来把文章看了一遍，总结如下：\n    1.重构是专业的。重构不是简单的把一堆代码挪到另一个位置，然后再去调整它，使得它能够编译通过和顺利运行。重构应该是一个具体的可以描述和追踪的任务，是由一个一个具体的、有逻辑关系的步骤组成的，不是一锅粥。\n    2.重构是微操作。既然是任务，那么就可以做任务分解，把重构分解成一个个很小的微操作，这些微操作做完任何一个都是可以停下来的。这样，重构就变成了可计划、可追踪的任务线，还可以方便地用项目管理工具管理起来。\n不知道“顿悟”得对不对，望老师指点。","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489441,"discussion_content":"初心的前提是知道什么是重构。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585435654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79781,"user_name":"旭东(Frank)","can_delete":false,"product_type":"c1","uid":1024486,"ip_address":"","ucode":"176FA629800062","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/e6/50da1b2d.jpg","comment_is_top":false,"comment_ctime":1553558059,"is_pvip":false,"replies":[{"id":29085,"content":"重写和重构是两个套路，重写基本上需要重新设计，重构一方面可以在日常工作中应用，一方面可以用以发现代码中的结构。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1553561448,"ip_address":"","comment_id":79781,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"重构到重写也是个量变到质变的过程。个人理解。但重写不一定是从重构做到的","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447436,"discussion_content":"你的理解可能把重构想复杂了，第一，你要知道坏味道是什么，第二，知道有哪些重构手法，然后，就是识别一个坏味道，施展一种重构手法。\n\n在《代码之丑》中，有各种坏味道的具体代码形式，也有《重构》译者熊节对于重构的解说，可以去看一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611732366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78027,"user_name":"Matrix","can_delete":false,"product_type":"c1","uid":1359946,"ip_address":"","ucode":"EE156EDC184A33","user_header":"https://static001.geekbang.org/account/avatar/00/14/c0/4a/0f6611a5.jpg","comment_is_top":false,"comment_ctime":1553057405,"is_pvip":false,"replies":[{"id":28470,"content":"重写不是问题，别说重构就好。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1553060588,"ip_address":"","comment_id":78027,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"最近就在重写一个系统，因为我觉得重构已经救不了它了。。","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444622,"discussion_content":"重写和重构是两个套路，重写基本上需要重新设计，重构一方面可以在日常工作中应用，一方面可以用以发现代码中的结构。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553561448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76456,"user_name":"Charles","can_delete":false,"product_type":"c1","uid":1027892,"ip_address":"","ucode":"F0605C817C36D1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/af/34/c7081824.jpg","comment_is_top":false,"comment_ctime":1552613436,"is_pvip":false,"replies":[{"id":27871,"content":"赶紧去看第二版。","user_name":"作者回复","user_name_real":"dreamhead","uid":1258861,"ctime":1552616469,"ip_address":"","comment_id":76456,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"最近正好在看这本书 如果光看名字 还真是很容易理解错","like_count":1,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443940,"discussion_content":"重写不是问题，别说重构就好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553060588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259570,"user_name":"azurepwq","can_delete":false,"product_type":"c1","uid":2086825,"ip_address":"","ucode":"10A7BCC37E935D","user_header":"https://static001.geekbang.org/account/avatar/00/1f/d7/a9/f341b89c.jpg","comment_is_top":false,"comment_ctime":1604757952,"is_pvip":true,"replies":[{"id":100109,"content":"加油！","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1611719265,"ip_address":"","comment_id":259570,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"Martine Fowler两本重构的书我都看过，但正如老师所说，主要看的是前几章。后面的实操手册部分，本来想着一边写代码一边参考的。结果这书不久就被我束之高阁了。分析了下原因，可能是自己做事还是太紧张兮兮了吧。想做的事想学的东西有很多很多，做了计划，也实施了行动，但很容易被工作和生活轻易击垮，一紧张就会乱了套，一乱套了，要看的书也没有看，更不要说好好沉下心来学习了。谢谢老师，我会继续总结，而且把两本重构再好好看看。","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508962,"discussion_content":"加油！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611719265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80544,"user_name":"enjoylearning","can_delete":false,"product_type":"c1","uid":1000237,"ip_address":"","ucode":"DCAF8538DEA277","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/2d/af86d73f.jpg","comment_is_top":false,"comment_ctime":1553678517,"is_pvip":false,"replies":[{"id":100163,"content":"最终都是为了更好的可维护性。","user_name":"作者回复","user_name_real":"郑晔","uid":1258861,"ctime":1611730011,"ip_address":"","comment_id":80544,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100022301,"comment_content":"我所理解的重构是在原有代码的基础上，无论是让代码clean,还是重构成模式，在有代码测试覆盖率保证的前提下，让其变得humanread和易维护。","like_count":0,"discussions":[{"author":{"id":1258861,"avatar":"https://static001.geekbang.org/account/avatar/00/13/35/6d/07a42f81.jpg","nickname":"郑晔","note":"","ucode":"1EBD5AA5D4FC89","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444898,"discussion_content":"最终都是为了更好的可维护性。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611730011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385026,"user_name":"至简李云","can_delete":false,"product_type":"c1","uid":1267721,"ip_address":"浙江","ucode":"8AFB5805B72ED0","user_header":"https://static001.geekbang.org/account/avatar/00/13/58/09/e4f65502.jpg","comment_is_top":false,"comment_ctime":1701946911,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"变更代码时，是否以单元测试做保障，是区别重构与重写的最关键一点。有单元测试做保障就是重构，否则都不是真正意义的重构。","like_count":1},{"had_liked":false,"id":367817,"user_name":"遥远的救世主","can_delete":false,"product_type":"c1","uid":1181334,"ip_address":"浙江","ucode":"4CC436479CAA21","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/96/4273bb09.jpg","comment_is_top":false,"comment_ctime":1675652288,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"不学习不知道啊，原来自己一直把重写也误解为重构，《重构》这本书确实需要去好好完整的读一遍","like_count":1},{"had_liked":false,"id":323219,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1637766147,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"原来重构也是微操，又见到了中间层发挥的作用：添加一个新的通用类","like_count":1},{"had_liked":false,"id":91003,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1556781327,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"知道什么是代码坏味道，分步骤消灭坏味道","like_count":1},{"had_liked":false,"id":393013,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"浙江","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1722489549,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":5,"product_id":100022301,"comment_content":"学习打卡","like_count":0},{"had_liked":false,"id":377989,"user_name":"小田","can_delete":false,"product_type":"c1","uid":1073342,"ip_address":"上海","ucode":"59CA02059F71E4","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/be/68ce2fd0.jpg","comment_is_top":false,"comment_ctime":1689641925,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"why：优化代码性能、提高可扩展性、去除坏味道\nwhat：不改变代码行为（输入、输出）的前提下，优化代码结构。\nhow：小步前进、测试&#47;diff验证正确性、参考编码最佳实践","like_count":0},{"had_liked":false,"id":376081,"user_name":"6点无痛早起学习的和尚","can_delete":false,"product_type":"c1","uid":1703256,"ip_address":"北京","ucode":"33A8A1CDA103F9","user_header":"https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg","comment_is_top":false,"comment_ctime":1686268954,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"抓虫，书名是《重构与模式》，文中《重构成模式》","like_count":0},{"had_liked":false,"id":368423,"user_name":"LYF","can_delete":false,"product_type":"c1","uid":2359415,"ip_address":"北京","ucode":"7FCB3123AC2B0D","user_header":"https://static001.geekbang.org/account/avatar/00/24/00/77/2a4cffb9.jpg","comment_is_top":false,"comment_ctime":1676336184,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"果然我对重构的理解是错误的，之前理解和接触到的重构，更倾向于的是重写，而且是大刀阔斧的重写，自己以及听说过的项目，确实遇到了老师说过的常常定义不了边界，不知道改到哪儿了，而且项目还一再延期。\n看了老师关于重构的解释，再加上之前的以终为始和任务分解模块的知识，对重构有了新的认识，现在就开始实践起来！~","like_count":0},{"had_liked":false,"id":346085,"user_name":"蓝色海洋","can_delete":false,"product_type":"c1","uid":1947974,"ip_address":"","ucode":"C1BF85D9E5C881","user_header":"https://static001.geekbang.org/account/avatar/00/1d/b9/46/604b3dcf.jpg","comment_is_top":false,"comment_ctime":1652833395,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"老师对微操作的定义是什么呢？每一步都可以停下来是指可以提交到仓库么？跟单元测试的关系如何？","like_count":0},{"had_liked":false,"id":343363,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1650799398,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":5,"product_id":100022301,"comment_content":"重构也要细粒度，微操作。","like_count":0},{"had_liked":false,"id":385026,"user_name":"至简李云","can_delete":false,"product_type":"c1","uid":1267721,"ip_address":"浙江","ucode":"8AFB5805B72ED0","user_header":"https://static001.geekbang.org/account/avatar/00/13/58/09/e4f65502.jpg","comment_is_top":false,"comment_ctime":1701946911,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"变更代码时，是否以单元测试做保障，是区别重构与重写的最关键一点。有单元测试做保障就是重构，否则都不是真正意义的重构。","like_count":1},{"had_liked":false,"id":367817,"user_name":"遥远的救世主","can_delete":false,"product_type":"c1","uid":1181334,"ip_address":"浙江","ucode":"4CC436479CAA21","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/96/4273bb09.jpg","comment_is_top":false,"comment_ctime":1675652288,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"不学习不知道啊，原来自己一直把重写也误解为重构，《重构》这本书确实需要去好好完整的读一遍","like_count":1},{"had_liked":false,"id":323219,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1637766147,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"原来重构也是微操，又见到了中间层发挥的作用：添加一个新的通用类","like_count":1},{"had_liked":false,"id":91003,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1556781327,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"知道什么是代码坏味道，分步骤消灭坏味道","like_count":1},{"had_liked":false,"id":393013,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"浙江","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1722489549,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":5,"product_id":100022301,"comment_content":"学习打卡","like_count":0},{"had_liked":false,"id":377989,"user_name":"小田","can_delete":false,"product_type":"c1","uid":1073342,"ip_address":"上海","ucode":"59CA02059F71E4","user_header":"https://static001.geekbang.org/account/avatar/00/10/60/be/68ce2fd0.jpg","comment_is_top":false,"comment_ctime":1689641925,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"why：优化代码性能、提高可扩展性、去除坏味道\nwhat：不改变代码行为（输入、输出）的前提下，优化代码结构。\nhow：小步前进、测试&#47;diff验证正确性、参考编码最佳实践","like_count":0},{"had_liked":false,"id":376081,"user_name":"6点无痛早起学习的和尚","can_delete":false,"product_type":"c1","uid":1703256,"ip_address":"北京","ucode":"33A8A1CDA103F9","user_header":"https://static001.geekbang.org/account/avatar/00/19/fd/58/1af629c7.jpg","comment_is_top":false,"comment_ctime":1686268954,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"抓虫，书名是《重构与模式》，文中《重构成模式》","like_count":0},{"had_liked":false,"id":368423,"user_name":"LYF","can_delete":false,"product_type":"c1","uid":2359415,"ip_address":"北京","ucode":"7FCB3123AC2B0D","user_header":"https://static001.geekbang.org/account/avatar/00/24/00/77/2a4cffb9.jpg","comment_is_top":false,"comment_ctime":1676336184,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"果然我对重构的理解是错误的，之前理解和接触到的重构，更倾向于的是重写，而且是大刀阔斧的重写，自己以及听说过的项目，确实遇到了老师说过的常常定义不了边界，不知道改到哪儿了，而且项目还一再延期。\n看了老师关于重构的解释，再加上之前的以终为始和任务分解模块的知识，对重构有了新的认识，现在就开始实践起来！~","like_count":0},{"had_liked":false,"id":346085,"user_name":"蓝色海洋","can_delete":false,"product_type":"c1","uid":1947974,"ip_address":"","ucode":"C1BF85D9E5C881","user_header":"https://static001.geekbang.org/account/avatar/00/1d/b9/46/604b3dcf.jpg","comment_is_top":false,"comment_ctime":1652833395,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100022301,"comment_content":"老师对微操作的定义是什么呢？每一步都可以停下来是指可以提交到仓库么？跟单元测试的关系如何？","like_count":0},{"had_liked":false,"id":343363,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1650799398,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":5,"product_id":100022301,"comment_content":"重构也要细粒度，微操作。","like_count":0},{"had_liked":false,"id":152401,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1573992125,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100022301,"comment_content":"步子一定要小。","like_count":0},{"had_liked":false,"id":76962,"user_name":"Haile","can_delete":false,"product_type":"c1","uid":1120652,"ip_address":"","ucode":"4381DA7B0C3C00","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/nvWeOicPyIbAVkQnt4omOibm0EuIoCCzNyWRMP9iczaPjKicIdCE1lJ85ToxwXWAn3hUeibSKC9YYCzBe2PiakrY5vNQ/132","comment_is_top":false,"comment_ctime":1552786948,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100022301,"comment_content":"计算机程序构造与解释是神书哇……","like_count":0},{"had_liked":false,"id":76606,"user_name":"努力努力","can_delete":false,"product_type":"c1","uid":1014856,"ip_address":"","ucode":"376FD9364EC85B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/48/49854324.jpg","comment_is_top":false,"comment_ctime":1552641091,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100022301,"comment_content":"重构真的挺重要的，毕业时候去了一家公司代码写的很乱，清一色的复制复制，但是要改还不被允许，那时候真的有苦难言","like_count":0},{"had_liked":false,"id":152401,"user_name":"丁丁历险记","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1573992125,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100022301,"comment_content":"步子一定要小。","like_count":0},{"had_liked":false,"id":76962,"user_name":"Haile","can_delete":false,"product_type":"c1","uid":1120652,"ip_address":"","ucode":"4381DA7B0C3C00","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/nvWeOicPyIbAVkQnt4omOibm0EuIoCCzNyWRMP9iczaPjKicIdCE1lJ85ToxwXWAn3hUeibSKC9YYCzBe2PiakrY5vNQ/132","comment_is_top":false,"comment_ctime":1552786948,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100022301,"comment_content":"计算机程序构造与解释是神书哇……","like_count":0},{"had_liked":false,"id":76606,"user_name":"努力努力","can_delete":false,"product_type":"c1","uid":1014856,"ip_address":"","ucode":"376FD9364EC85B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/48/49854324.jpg","comment_is_top":false,"comment_ctime":1552641091,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":6,"product_id":100022301,"comment_content":"重构真的挺重要的，毕业时候去了一家公司代码写的很乱，清一色的复制复制，但是要改还不被允许，那时候真的有苦难言","like_count":0}]}