{"id":84633,"title":"CSS选择器：伪元素是怎么回事儿？","content":"<p>你好，我是winter。</p><p>在上一篇文章中，我已经给你介绍了一些简单选择器，这一节课我会继续给你介绍选择器的几个机制：选择器的组合、选择器的优先级和伪元素。</p><h2>选择器的组合</h2><p>在CSS规则中，选择器部分是一个选择器列表。</p><p>选择器列表是用逗号分隔的复杂选择器序列；复杂选择器则是用空格、大于号、波浪线等符号连接的复合选择器；复合选择器则是连写的简单选择器组合。</p><p>根据选择器列表的语法，选择器的连接方式可以理解为像四则运算一样有优先级。</p><ul>\n<li>\n<p>第一优先级</p>\n<ul>\n<li>无连接符号</li>\n</ul>\n</li>\n<li>\n<p>第二优先级</p>\n<ul>\n<li>“空格”</li>\n<li>“~”</li>\n<li>“+”</li>\n<li>“&gt;”</li>\n<li>“||”</li>\n</ul>\n</li>\n<li>\n<p>第三优先级</p>\n<ul>\n<li>“,”</li>\n</ul>\n</li>\n</ul><p>例如以下选择器：</p><pre><code>.c,.a&gt;.b.d {\n    /*......*/\n}\n</code></pre><p>我们应该理解为这样的结构。</p><ul>\n<li>.c,.a&gt;.b.d\n<ul>\n<li>.c</li>\n<li>.a&gt;.b.d\n<ul>\n<li>.a</li>\n<li>.b.d\n<ul>\n<li>.b</li>\n<li>.d</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul><p>复合选择器表示简单选择器中“且”的关系，例如，例子中的“ .b.d ”，表示选中的元素必须同时具有b和d两个class。</p><p>复杂选择器是针对节点关系的选择，它规定了五种连接符号。</p><ul>\n<li><strong>“空格”</strong>：后代，表示选中所有符合条件的后代节点， 例如“ .a .b ”表示选中所有具有class为a的后代节点中class为b的节点。</li>\n<li><strong>“&gt;”</strong> ：子代，表示选中符合条件的子节点，例如“ .a&gt;.b ”表示：选中所有“具有class为a的子节点中，class为b的节点”。</li>\n<li><strong>“~” </strong>: 后继，表示选中所有符合条件的后继节点，后继节点即跟当前节点具有同一个父元素，并出现在它之后的节点，例如“ .a~.b ”表示选中所有具有class为a的后继中，class为b的节点。</li>\n<li><strong>“+”</strong>：直接后继，表示选中符合条件的直接后继节点，直接后继节点即nextSlibling。例如 “.a+.b ”表示选中所有具有class为a的下一个class为b的节点。</li>\n<li><strong>“||”</strong>：列选择器，表示选中对应列中符合条件的单元格。</li>\n</ul><!-- [[[read_end]]] --><p>我们在实际使用时，比较常用的连接方式是“空格”和“&gt;”。</p><p>工程实践中一般会采用设置合理的class的方式，来避免过于复杂的选择器结构，这样更有利于维护和性能。</p><p>空格和子代选择器通常用于组件化场景，当组件是独立开发时，很难完全避免class重名的情况，如果为组件的最外层容器元素设置一个特别的class名，生成CSS规则时，则全部使用后代或者子代选择器，这样可以有效避免CSS规则的命名污染问题。</p><p>逗号表示“或”的关系，实际上，可以把它理解为“两条内容一样的CSS规则”的一种简写。如我们开头的例子，可以理解成与下面的代码等效：</p><pre><code>.c {\n    /*......*/\n}\n.a&gt;.b.d {\n    /*......*/\n}\n</code></pre><p>到这里，我们就讲完了如何用简单选择器组合成复合选择器和复杂选择器，形成选择器列表，这能够帮助我们应对各种复杂的需求。</p><p>CSS选择器是基于规则生效的，同一个元素命中多条规则是非常常见的事情。不同规则指定同一个属性为不同值时，就需要一个机制来解决冲突。这个机制，就是接下来我们要讲的选择器优先级。</p><h2>选择器的优先级</h2><p>CSS标准用一个三元组 (a, b, c) 来构成一个复杂选择器的优先级。</p><ul>\n<li>id选择器的数目记为a；</li>\n<li>伪类选择器和class选择器的数目记为b；</li>\n<li>伪元素选择器和标签选择器数目记为c；</li>\n<li>“*” 不影响优先级。</li>\n</ul><p>CSS标准建议用一个足够大的进制，获取“ a-b-c ”来表示选择器优先级。</p><p>即：</p><pre><code>specificity = base * base * a + base * b + c\n\n</code></pre><p>其中，base是一个“足够大”的正整数。关于base，历史中有些趣闻，早年IE6采用256进制，于是就产生“256个class优先级等于一个id”这样的奇葩问题，后来扩大到65536，基本避免了类似的问题。</p><p>现代浏览器多采用了更大的数量，我们正常编写的CSS规则数量不太可能达到数万，因此我们可以认为这样的base就足够大了。</p><p>行内属性的优先级永远高于CSS规则，浏览器提供了一个“口子”，就是在选择器前加上“!import”。</p><p>这个用法非常危险，因为它相当于一个新的优先级，而且此优先级会高于行内属性。</p><p>同一优先级的选择器遵循“后面的覆盖前面的”原则，我们可以看一个例子：</p><pre><code class=\"language-HTML\">&lt;div id=\"my\" class=\"x y\"&gt;text&lt;div&gt;\n</code></pre><pre><code class=\"language-CSS\">.x {\n    background-color:lightblue;\n}\n.y {\n    background-color:lightgreen;\n}\n</code></pre><p>调换“.x”和“.y”我们可以得到不同的显示效果。选择器的优先级是针对单条规则的，多条规则的选择器同时命中元素，优先级不会发生叠加。</p><pre><code class=\"language-HTML\">&lt;div id=\"my\" class=\"x y z\"&gt;text&lt;div&gt;\n</code></pre><pre><code class=\"language-CSS\">.x {\n    background-color:lightblue;\n}\n.z {\n    background-color:lightblue;\n}\n.y {\n    background-color:lightgreen;\n}\n</code></pre><p>在这个例子中，“.x ”和“.z ”都指定了背景色为浅蓝色，但是因为“.y ”规则在最后，所以最终显示结果为浅绿色。另外一个需要注意的是，选择器的优先级是针对复杂选择器的优先级，选择器列表不会合并计算优先级。</p><p>我们看一个例子：</p><pre><code>&lt;div id=&quot;my&quot; class=&quot;x y z&quot;&gt;text&lt;div&gt;\n</code></pre><pre><code>.x, .z {\n    background-color:lightblue;\n}\n.y {\n    background-color:lightgreen;\n}\n</code></pre><p>这里选择器列表“ .x, .z”命中了div，但是它的两项分别计算优先级，所以最终优先级仍跟“ .y” 规则相同。</p><p>以上就是选择器优先级的相关规则了，虽然我们这里介绍了详细的计算方式，但是我认为选择器的使用上，如果产生复杂的优先级计算，代码的可读性一定是有问题的。</p><p>所以实践中，建议你“根据 id 选单个元素”“class和class的组合选成组元素”“tag选择器确定页面风格”这样的简单原则来使用选择器，不要搞出过于复杂的选择器。</p><h2>伪元素</h2><p>在上一课，我们有意忽略了一种重要的简单选择器：伪元素。</p><p>我之所以没有把它放在简单选择器中，是因为伪元素本身不单单是一种选择规则，它还是一种机制。</p><p>所以本节课，我就来讲一讲伪元素机制。伪元素的语法跟伪类相似，但是实际产生的效果却是把不存在的元素硬选出来。</p><p>目前兼容性达到可用的伪元素有以下几种。</p><ul>\n<li>::first-line</li>\n<li>::first-letter</li>\n<li>::before</li>\n<li>::after</li>\n</ul><p>下面我们就来分别讲讲它们。</p><p><strong>::first-line 和 ::first-letter 是比较类似的伪元素</strong>，其中一个表示元素的第一行，一个表示元素的第一个字母。</p><p>我们可以看一个示例：</p><pre><code>&lt;p&gt;This is a somewhat long HTML\nparagraph that will be broken into several\nlines. The first line will be identified\nby a fictional tag sequence. The other lines\nwill be treated as ordinary lines in the\nparagraph.&lt;/p&gt;\n</code></pre><pre><code>p::first-line { \n    text-transform: uppercase \n}\n</code></pre><p>这一段代码把段落的第一行字母变为大写。注意这里的第一行指的是排版后显示的第一行，跟HTML代码中的换行无关。</p><p>::first-letter 则指第一个字母。首字母变大并向左浮动是一个非常常见的排版方式。</p><pre><code>&lt;p&gt;This is a somewhat long HTML\nparagraph that will be broken into several\nlines. The first line will be identified\nby a fictional tag sequence. The other lines\nwill be treated as ordinary lines in the\nparagraph.&lt;/p&gt;\n</code></pre><pre><code>p::first-letter { \n    text-transform: uppercase;\n    font-size:2em;\n    float:left; \n}\n</code></pre><p>虽然听上去很简单，但是实际上，我们遇到的HTML结构要更为复杂，一旦元素中不是纯文本，规则就变得复杂了。</p><p>CSS标准规定了first-line必须出现在最内层的块级元素之内。因此，我们考虑以下代码。</p><pre><code class=\"language-HTML\">&lt;div&gt;\n  &lt;p id=a&gt;First paragraph&lt;/p&gt;\n  &lt;p&gt;Second paragraph&lt;/p&gt;\n&lt;/div&gt;\n</code></pre><pre><code class=\"language-CSS\">div&gt;p#a {\n    color:green;\n}\n\ndiv::first-line { \n    color:blue; \n}\n</code></pre><p>这段代码最终结果第一行是蓝色，因为p是块级元素，所以伪元素出现在块级元素之内，所以内层的color覆盖了外层的color属性。</p><p>如果我们把p换成span，结果就是相反的。</p><pre><code>&lt;div&gt;\n  &lt;span id=a&gt;First paragraph&lt;/span&gt;&lt;br/&gt;\n  &lt;span&gt;Second paragraph&lt;/span&gt;\n&lt;/div&gt;\n</code></pre><pre><code>div&gt;span#a {\n    color:green;\n}\n\ndiv::first-line { \n    color:blue; \n}\n</code></pre><p>这段代码的最终结果是绿色，这说明伪元素在span之外。</p><p>::first-letter的行为又有所不同，它的位置在所有标签之内，我们把前面的代码换成::first-letter。</p><pre><code>&lt;div&gt;\n  &lt;span id=a&gt;First paragraph&lt;/span&gt;&lt;br/&gt;\n  &lt;span&gt;Second paragraph&lt;/span&gt;\n&lt;/div&gt;\n</code></pre><pre><code>div&gt;span#a {\n    color:green;\n}\n\ndiv::first-letter { \n    color:blue; \n}\n</code></pre><p>执行这段代码，我们可以看到，首字母变成了蓝色，这说明伪元素出现在span之内。</p><p>CSS标准只要求 ::first-line 和 ::first-letter 实现有限的几个CSS属性，都是文本相关，这些属性是下面这些。</p><p><img src=\"https://static001.geekbang.org/resource/image/6e/48/6e050ee9f7a0b1657388271cceb0c548.png?wh=1187*526\" alt=\"\"></p><p><strong>接下来我们说说 ::before 和 ::after 伪元素。</strong></p><p>这两个伪元素跟前面两个不同的是，它不是把已有的内容套上一个元素，而是真正的无中生有，造出一个元素。</p><p>::before 表示在元素内容之前插入一个虚拟的元素，::after 则表示在元素内容之后插入。</p><p>这两个伪元素所在的CSS规则必须指定content属性才会生效，我们看下例子：</p><pre><code>&lt;p class=&quot;special&quot;&gt;I'm real element&lt;/p&gt;\n</code></pre><pre><code>p.special::before {\n    display: block;\n    content: &quot;pseudo! &quot;;\n}\n</code></pre><p>这里要注意一点，::before 和 ::after 还支持content为counter，如：</p><pre><code>&lt;p class=&quot;special&quot;&gt;I'm real element&lt;/p&gt;\np.special::before {\n    display: block;\n    content: counter(chapno, upper-roman) &quot;. &quot;;\n}\n</code></pre><p>这对于实现一些列表样式是非常有用的。</p><p>::before 和 ::after 中支持所有的CSS属性。实际开发中，这两个伪元素非常有用，有了这两个伪元素，一些修饰性元素，可以使用纯粹的CSS代码添加进去，这能够很好地保持HTML代码中的语义，既完成了显示效果，又不会让DOM中出现很多无语义的空元素。</p><h2>结语</h2><p>这一课，我们讲了CSS选择器的三种机制：选择器的组合、选择器优先级、以及伪元素。</p><p>在选择器组合这一部分，我们讲到了，选择器的连接方式像四则运算一样有优先级。</p><p>第一优先级是无连接符号；第二优先级是：“空格”“~”“+”“&gt;”“||”；第三优先级是“,”。</p><p>然后我们又介绍了选择器优先级的计算方式。</p><p>最后我们介绍了伪元素，我们逐次讲解了：</p><ul>\n<li>::first-line</li>\n<li>::first-letter</li>\n<li>::before</li>\n<li>::after</li>\n</ul><p>四种伪元素。伪元素的语法跟伪类相似，但是实际产生的效果是把不存在的元素硬选出来。这一点就与伪类不太一样了。</p><p>结合上一节课我们讲的简单选择器，对它们灵活运用，就能够满足大部分CSS的使用场景的需求了。</p><p>最后，留给你一个问题，你所在的团队，如何规定CSS选择器的编写规范？你觉得它好吗？</p><h1>猜你喜欢</h1><p><a href=\"https://time.geekbang.org/course/intro/163?utm_term=zeusMTA7L&amp;utm_source=app&amp;utm_medium=chongxueqianduan&amp;utm_campaign=163-presell\"><img src=\"https://static001.geekbang.org/resource/image/1a/08/1a49758821bdbdf6f0a8a1dc5bf39f08.jpg?wh=1032*330\" alt=\"unpreview\"></a></p>","comments":[{"had_liked":false,"id":73795,"user_name":"Scorpio","can_delete":false,"product_type":"c1","uid":1374652,"ip_address":"","ucode":"2DF4DEC831D4C0","user_header":"https://static001.geekbang.org/account/avatar/00/14/f9/bc/cbc0207b.jpg","comment_is_top":false,"comment_ctime":1552003772,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"456818537148","product_id":100023201,"comment_content":"我们团队没有规范。。。","like_count":107},{"had_liked":false,"id":77204,"user_name":"Levix","can_delete":false,"product_type":"c1","uid":1272749,"ip_address":"","ucode":"A82CE7EF74B311","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/ad/cf2e924e.jpg","comment_is_top":false,"comment_ctime":1552884847,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"143286805615","product_id":100023201,"comment_content":"行内属性的优先级永远高于 CSS 规则，浏览器提供了一个“口子”，就是在选择器前加上“!import”。应该是 important 吧","like_count":34},{"had_liked":false,"id":73482,"user_name":"阿成","can_delete":false,"product_type":"c1","uid":1390032,"ip_address":"","ucode":"CEC3CD65FB9333","user_header":"https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg","comment_is_top":false,"comment_ctime":1551916140,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57386490988","product_id":100023201,"comment_content":"有两个问题想请教一下winter老师：<br>1. 您对styled-component类似的方案怎么看<br>2. 您对使用属性选择器代替class怎么看","like_count":13},{"had_liked":false,"id":73467,"user_name":"CC","can_delete":false,"product_type":"c1","uid":1021014,"ip_address":"","ucode":"2B732860C4231B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/94/56/4b8395f6.jpg","comment_is_top":false,"comment_ctime":1551897218,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"48796537474","product_id":100023201,"comment_content":"如果是注重复用的开发，一般采用组件化的形式，给组件一套命名空间；<br><br>如果是页面较少的网页开发，不太在意复用和扩展，一般采用 BEM 的规则。<br><br>”根据 id 选单个元素，class 和 class 的组合选择成组元素，tag 选择器确定页面风格。“ 从这个原则中收获很大。<br>","like_count":12},{"had_liked":false,"id":107653,"user_name":"德育处主任","can_delete":false,"product_type":"c1","uid":1466870,"ip_address":"","ucode":"0DE674AF5D4B79","user_header":"https://static001.geekbang.org/account/avatar/00/16/61/f6/32856383.jpg","comment_is_top":false,"comment_ctime":1561593645,"is_pvip":false,"replies":[{"id":"58933","content":"前一句我觉得值得商榷，后一句没什么问题。","user_name":"作者回复","user_name_real":"winter","uid":"1268524","ctime":1574221733,"ip_address":"","comment_id":107653,"utype":1}],"discussion_count":3,"race_medal":0,"score":"35921332013","product_id":100023201,"comment_content":"在《css重构》这本书里面建议一般情况下class用来给css提供选择入口，id则为js提供选择入口。尽量不要用js直接修改元素样式，而是通过js修改元素的class从而修改样式。这样能很好的划分样式与逻辑","like_count":8,"discussions":[{"author":{"id":1268524,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2c/12bfd3cd.jpg","nickname":"winter","note":"","ucode":"2B068EDEAFEB56","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455606,"discussion_content":"前一句我觉得值得商榷，后一句没什么问题。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574221733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1710685,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/1a/5d/3c8004c6.jpg","nickname":"*","note":"","ucode":"DB5BA86B4D7E5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556800,"discussion_content":"有时候并不想选一组的元素，为什么不能用id呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647518285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253128,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/08/14642f9e.jpg","nickname":"相望于江湖","note":"","ucode":"9CCB6F89F92C89","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305467,"discussion_content":"第一句觉得有问题，css的脚本化呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599938003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95173,"user_name":"bradleyzhou","can_delete":false,"product_type":"c1","uid":1028318,"ip_address":"","ucode":"8DC89079F03A96","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b0/de/0e75d3c2.jpg","comment_is_top":false,"comment_ctime":1557978118,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"31622749190","product_id":100023201,"comment_content":"MDN 上有一个图解优先级的材料 https:&#47;&#47;specifishity.com&#47;","like_count":7,"discussions":[{"author":{"id":1293186,"avatar":"https://static001.geekbang.org/account/avatar/00/13/bb/82/5a32de87.jpg","nickname":"泷沁心","note":"","ucode":"E811D9F1A17689","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544531,"discussion_content":"非常有意思的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641549571,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82693,"user_name":"靠人品去赢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1554277765,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31619048837","product_id":100023201,"comment_content":"我放一个伪类和伪元素的链接吧，这两者属于见过但是没注意更没区分过，估计有人会需要https:&#47;&#47;developer.mozilla.org&#47;zh-CN&#47;docs&#47;Learn&#47;CSS&#47;Introduction_to_CSS&#47;Pseudo-classes_and_pseudo-elements","like_count":8},{"had_liked":false,"id":159094,"user_name":"巨龙的力量啊","can_delete":false,"product_type":"c1","uid":1684858,"ip_address":"","ucode":"8FC6978929E48F","user_header":"https://static001.geekbang.org/account/avatar/00/19/b5/7a/a126c48f.jpg","comment_is_top":false,"comment_ctime":1575536814,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23050373294","product_id":100023201,"comment_content":"遇事不决就!important🤪","like_count":5,"discussions":[{"author":{"id":2820671,"avatar":"","nickname":"require","note":"","ucode":"3AA3DCE0CD73E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534373,"discussion_content":"然后突然有一天要你改个样式，结果发现改不动，去掉!important后很多地方都变了；那就难受了😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638174925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79325,"user_name":"Ranjay","can_delete":false,"product_type":"c1","uid":1134279,"ip_address":"","ucode":"E7EE5F2A2D2E59","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/c7/cb93c786.jpg","comment_is_top":false,"comment_ctime":1553435692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18733304876","product_id":100023201,"comment_content":"BEM规范实际上就已经是很好的实践","like_count":4},{"had_liked":false,"id":75889,"user_name":"阿歡。","can_delete":false,"product_type":"c1","uid":1336630,"ip_address":"","ucode":"ED18E988338CC0","user_header":"https://static001.geekbang.org/account/avatar/00/14/65/36/4b0f6629.jpg","comment_is_top":false,"comment_ctime":1552488438,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18732357622","product_id":100023201,"comment_content":"老师您好,下面例子中 把&lt;br&gt;去掉，会变成First paragraph为绿色，Second paragraph为蓝色，这是为何？<br>&lt;div&gt;<br>            &lt;span id=&quot;a&quot;&gt;First paragraph&lt;&#47;span&gt;&lt;br&gt;<br>            &lt;span&gt;Second paragraph&lt;&#47;span&gt;<br> &lt;&#47;div&gt;<br><br>           div&gt;span#a {<br>                color:green;<br>            }<br>            div::first-line { <br>                color:blue; <br>            }","like_count":4,"discussions":[{"author":{"id":1123627,"avatar":"https://static001.geekbang.org/account/avatar/00/11/25/2b/7f6aabc2.jpg","nickname":"wendraw","note":"","ucode":"EA404D7CFCAB44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5246,"discussion_content":"first-line 会选择块元素，span 不是块元素，所以就会往上找到父元素 div ，并将 color 改成 blue，所以 span 都会是蓝色的。然后第一个「div>span#a」规则将 span 的文字改为 green。最后就呈现出 First paragraph为绿色，Second paragraph 为蓝色。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1566113563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1162472,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bc/e8/43109d54.jpg","nickname":"Peter","note":"","ucode":"69F0CB9B0A85AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285943,"discussion_content":"解释的原因有些偏差，具体可以看下https://www.petershi.net/archives/3305","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592993012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219069,"user_name":"薛定鄂的猫","can_delete":false,"product_type":"c1","uid":1727459,"ip_address":"","ucode":"16261E77E29111","user_header":"https://static001.geekbang.org/account/avatar/00/1a/5b/e3/d2fa4899.jpg","comment_is_top":false,"comment_ctime":1589939138,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14474841026","product_id":100023201,"comment_content":"后代和子代这两个词真的不好，完全就是一个词","like_count":3,"discussions":[{"author":{"id":1438516,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f3/34/54340c1d.jpg","nickname":"陈剑","note":"","ucode":"78C5436E7627AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299320,"discussion_content":"后代包括子代，孙子，重孙子等等，子代就是儿子","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1597657607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180698,"user_name":"不二","can_delete":false,"product_type":"c1","uid":1253124,"ip_address":"","ucode":"B018B32EDB44E5","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/04/1cddf65b.jpg","comment_is_top":false,"comment_ctime":1582366946,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14467268834","product_id":100023201,"comment_content":"first-line和first-letter那部分的代码，刚在浏览器端试了一下，div内部不管是span还是p，都是可以生效的，我理解这两个属性都是作用于 块元素， 所以如果将外面的div改成span可能就没有效果了，这块实际得到的效果为什么和老师将的不太一样？","like_count":3,"discussions":[{"author":{"id":1003475,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/4f/d3/897fc6df.jpg","nickname":"Geeker1992","note":"","ucode":"459F3CEB0491A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233657,"discussion_content":"试了一下，真是这样。有知道的同学可以解答下嘛\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586937367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151082,"user_name":"o.O君程","can_delete":false,"product_type":"c1","uid":1002575,"ip_address":"","ucode":"8AE7F23875068F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/4f/858a8a70.jpg","comment_is_top":false,"comment_ctime":1573651406,"is_pvip":true,"replies":[{"id":"58887","content":"那个东西简直不知所云，Block和Element在CSS和DOM语境有特定意义，它这个重新定义非常容易造成混淆。","user_name":"作者回复","user_name_real":"winter","uid":"1268524","ctime":1574218631,"ip_address":"","comment_id":151082,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14458553294","product_id":100023201,"comment_content":"BEM","like_count":3,"discussions":[{"author":{"id":1268524,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/2c/12bfd3cd.jpg","nickname":"winter","note":"","ucode":"2B068EDEAFEB56","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474359,"discussion_content":"那个东西简直不知所云，Block和Element在CSS和DOM语境有特定意义，它这个重新定义非常容易造成混淆。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574218631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1561210,"avatar":"https://static001.geekbang.org/account/avatar/00/17/d2/7a/ec43bd74.jpg","nickname":"Carry","note":"","ucode":"02329B098D1A21","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284434,"discussion_content":"bem是很不错的工程化实践，与我们学习css基础并不冲突","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592531669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229432,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":1162472,"ip_address":"","ucode":"69F0CB9B0A85AD","user_header":"https://static001.geekbang.org/account/avatar/00/11/bc/e8/43109d54.jpg","comment_is_top":false,"comment_ctime":1592992975,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10182927567","product_id":100023201,"comment_content":"后半段关于::first-line对非块元素不生效的理解和标准有些偏差，不太好理解其远离。<br>花时间重新研究了下。把p标签换成span之后为什么变成绿色的原因知识因为样式覆盖，和只作用于块状元素没有对应关系，具体可参考原始标准文档：https:&#47;&#47;drafts.csswg.org&#47;selectors-3&#47;#first-line<br><br>简单总结下就是伪元素其实是有虚拟结构的，样式也是基于这个虚拟结构进行应用的。然后对于一个div来说，内部元素是一个大的行内元素还是1或n个block-like元素，会导致两种“dom结构”，也就是包括内容的节点位置不一样，这会导致样式的优先级变掉，样式自然是不一样的。<br><br>对细节感兴趣的可以看下https:&#47;&#47;www.petershi.net&#47;archives&#47;3305","like_count":2},{"had_liked":false,"id":78736,"user_name":"qqq","can_delete":false,"product_type":"c1","uid":1006786,"ip_address":"","ucode":"91B0ACF8CBE7BD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/c2/8ffd2ad0.jpg","comment_is_top":false,"comment_ctime":1553225897,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10143160489","product_id":100023201,"comment_content":"提醒下：伪元素那部分说的是子元素 color 覆盖父元素 color，而非 CSS 规则覆盖","like_count":2},{"had_liked":false,"id":180704,"user_name":"²⁰¹9😋","can_delete":false,"product_type":"c1","uid":1377500,"ip_address":"","ucode":"396802C6B63689","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/dc/cae4e6c5.jpg","comment_is_top":false,"comment_ctime":1582368076,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5877335372","product_id":100023201,"comment_content":"用的是csslint","like_count":1},{"had_liked":false,"id":73464,"user_name":"per","can_delete":false,"product_type":"c1","uid":1393744,"ip_address":"","ucode":"D5E22C75DE1379","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ43ULj7ID91wpahz9hrlU7v0yqBE2ItzxiaBibZYPtgMTT0FskvEAvdI3YXfjTMoDhGxSgmTNahmFw/132","comment_is_top":false,"comment_ctime":1551892479,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5846859775","product_id":100023201,"comment_content":"img、br等不能包含子元素的标签不能创建::before和::after。但一个例外是hr，不知道为什么。或许是我的理解有问题？","like_count":1},{"had_liked":false,"id":340421,"user_name":"锐锐爱南球","can_delete":false,"product_type":"c1","uid":1158621,"ip_address":"","ucode":"7AA4CA355B9D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/ad/dd/970e7b4a.jpg","comment_is_top":false,"comment_ctime":1648807045,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648807045","product_id":100023201,"comment_content":"团队制定了sass的编码规范，但是在代码review的时候，reviewer比较少看sass代码，都是让提交代码的人截个图看下，主要精力放在js上。","like_count":0},{"had_liked":false,"id":338480,"user_name":"*","can_delete":false,"product_type":"c1","uid":1710685,"ip_address":"","ucode":"DB5BA86B4D7E5C","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1a/5d/3c8004c6.jpg","comment_is_top":false,"comment_ctime":1647518188,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647518188","product_id":100023201,"comment_content":"我们团队就是用BEM规范","like_count":0},{"had_liked":false,"id":237742,"user_name":"A祥瑞A","can_delete":false,"product_type":"c1","uid":2080875,"ip_address":"","ucode":"C30F61A4E99349","user_header":"https://static001.geekbang.org/account/avatar/00/1f/c0/6b/92a69e77.jpg","comment_is_top":false,"comment_ctime":1595939649,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595939649","product_id":100023201,"comment_content":"我选择器都是随便用的.........","like_count":0},{"had_liked":false,"id":210333,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1587722632,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587722632","product_id":100023201,"comment_content":"伪元素是通过css往html文本中添加的一些元素。 因为这些元素原本不存在所以称为伪元素，伪元素也能改变html 文本的样式。","like_count":0},{"had_liked":false,"id":207802,"user_name":"后脑勺","can_delete":false,"product_type":"c1","uid":1946181,"ip_address":"","ucode":"50704EC5545C4C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/b2/45/b49a92f5.jpg","comment_is_top":false,"comment_ctime":1587182699,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587182699","product_id":100023201,"comment_content":"我自己用的是 BEM 规则","like_count":0},{"had_liked":false,"id":93106,"user_name":"旅途。👣👣","can_delete":false,"product_type":"c1","uid":1393209,"ip_address":"","ucode":"553DE32F7901CD","user_header":"https://static001.geekbang.org/account/avatar/00/15/42/39/aa8cd514.jpg","comment_is_top":false,"comment_ctime":1557399069,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557399069","product_id":100023201,"comment_content":"评论亦精彩","like_count":0},{"had_liked":false,"id":87068,"user_name":"空山鸟语","can_delete":false,"product_type":"c1","uid":1375838,"ip_address":"","ucode":"BA9993D7A4DC80","user_header":"https://static001.geekbang.org/account/avatar/00/14/fe/5e/9b723d19.jpg","comment_is_top":false,"comment_ctime":1555506954,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1555506954","product_id":100023201,"comment_content":"选择器的优先级那块，是不是还缺 属性选择器？<br> 比如  input[type=text] 等","like_count":0,"discussions":[{"author":{"id":1693521,"avatar":"","nickname":"saj","note":"","ucode":"33C75F13DC9163","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":30894,"discussion_content":"https://www.runoob.com/w3cnote/css-style-priority.html 看一下这个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570868166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}