{"id":72642,"title":"06 | å¡é¡¿ä¼˜åŒ–ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•ç›‘æ§åº”ç”¨å¡é¡¿ï¼Ÿ","content":"<p>â€œæˆ‘åœ¨ç§’æ€iPhone XSçš„æ”¯ä»˜é¡µé¢å¡äº†3ç§’ï¼Œæœ€åæ²¡æŠ¢åˆ°â€ï¼Œç”¨æˆ·å˜¶å£°åŠ›ç«­åœ°åé¦ˆäº†ä¸€ä¸ªå¡é¡¿é—®é¢˜ã€‚</p><p>â€œè«æ…Œè«æ…Œâ€ï¼Œç­‰æˆ‘æ‰“å¼€Android Studioï¼Œ ç”¨ä¸Šä¸€è®²å­¦åˆ°çš„å‡ ä¸ªå·¥å…·åˆ†æä¸€ä¸‹å°±çŸ¥é“åŸå› äº†ã€‚</p><p>â€œå’¦ï¼Œåœ¨æˆ‘è¿™é‡Œæ•´ä¸ªæ”¯ä»˜è¿‡ç¨‹ä¸æ»‘èˆ¬æµç•…â€ã€‚è¿™ä¸ªç»å†è®©æˆ‘æ˜ç™½ï¼Œå¡é¡¿è·Ÿå´©æºƒä¸€æ ·éœ€è¦â€œç°åœºä¿¡æ¯â€ã€‚å› ä¸ºå¡é¡¿çš„äº§ç”Ÿä¹Ÿæ˜¯ä¾èµ–å¾ˆå¤šå› ç´ ï¼Œæ¯”å¦‚ç”¨æˆ·çš„ç³»ç»Ÿç‰ˆæœ¬ã€CPUè´Ÿè½½ã€ç½‘ç»œç¯å¢ƒã€åº”ç”¨æ•°æ®ç­‰ã€‚</p><p>è„±ç¦»è¿™ä¸ªç°åœºï¼Œæˆ‘ä»¬æœ¬åœ°éš¾ä»¥å¤ç°ï¼Œä¹Ÿå°±å¾ˆéš¾å»è§£å†³é—®é¢˜ã€‚ä½†æ˜¯å¡é¡¿åˆéå¸¸å½±å“ç”¨æˆ·ä½“éªŒçš„ï¼Œç‰¹åˆ«æ˜¯å‘ç”Ÿåœ¨å¯åŠ¨ã€èŠå¤©ã€æ”¯ä»˜è¿™äº›å…³é”®åœºæ™¯ï¼Œé‚£æˆ‘ä»¬åº”è¯¥å¦‚ä½•å»ç›‘æ§çº¿ä¸Šçš„å¡é¡¿é—®é¢˜ï¼Œå¹¶ä¸”ä¿ç•™è¶³å¤Ÿå¤šçš„ç°åœºä¿¡æ¯ååŠ©æˆ‘ä»¬æ’æŸ¥è§£å†³é—®é¢˜å‘¢ï¼Ÿ</p><h2>å¡é¡¿ç›‘æ§</h2><p>å‰é¢æˆ‘è®²è¿‡ç›‘æ§ANRçš„æ–¹æ³•ï¼Œä¸è¿‡ä¹Ÿæåˆ°ä¸¤ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ˜¯é«˜ç‰ˆæœ¬çš„ç³»ç»Ÿæ²¡æœ‰æƒé™è¯»å–ç³»ç»Ÿçš„ANRæ—¥å¿—ï¼›å¦ä¸€ä¸ªæ˜¯ANRå¤ªä¾èµ–ç³»ç»Ÿå®ç°ï¼Œæˆ‘ä»¬æ— æ³•çµæ´»æ§åˆ¶å‚æ•°ï¼Œä¾‹å¦‚æˆ‘è§‰å¾—ä¸»çº¿ç¨‹å¡é¡¿3ç§’ç”¨æˆ·å·²ç»ä¸å¤ªèƒ½å¿å—ï¼Œè€Œé»˜è®¤å‚æ•°åªèƒ½ç›‘æ§è‡³å°‘5ç§’ä»¥ä¸Šçš„å¡é¡¿ã€‚</p><p>æ‰€ä»¥ç°å®æƒ…å†µå°±è¦æ±‚æˆ‘ä»¬éœ€è¦é‡‡ç”¨å…¶ä»–çš„æ–¹å¼æ¥ç›‘æ§æ˜¯å¦å‡ºç°å¡é¡¿é—®é¢˜ï¼Œå¹¶ä¸”é’ˆå¯¹ç‰¹å®šåœºæ™¯è¿˜è¦ç›‘æ§å…¶ä»–ç‰¹å®šçš„æŒ‡æ ‡ã€‚</p><p><strong>1. æ¶ˆæ¯é˜Ÿåˆ—</strong></p><p>æˆ‘è®¾è®¡çš„ç¬¬ä¸€å¥—ç›‘æ§å¡é¡¿çš„æ–¹æ¡ˆæ˜¯<strong>åŸºäºæ¶ˆæ¯é˜Ÿåˆ—å®ç°</strong>ï¼Œé€šè¿‡æ›¿æ¢Looperçš„Printerå®ç°ã€‚åœ¨2013å¹´çš„æ—¶å€™ï¼Œæˆ‘å†™è¿‡ä¸€ä¸ªåä¸ºWxPerformanceToolçš„æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œå…¶ä¸­è€—æ—¶ç›‘æ§å°±ä½¿ç”¨äº†è¿™ä¸ªæ–¹æ³•ã€‚åé¢è¿™ä¸ªå·¥å…·åœ¨è…¾è®¯å…¬å…±ç»„ä»¶åšäº†å†…éƒ¨å¼€æºï¼Œè¿˜è·å¾—äº†2013å¹´çš„å¹´åº¦åä½³ç»„ä»¶ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/10/b3/10a39c4253447b3e9d0a5045795d47b3.png?wh=543*103\" alt=\"\"></p><p>è¿˜æ²¡åº†ç¥å®Œï¼Œå¾ˆå¿«å°±æœ‰åŒäº‹è·Ÿæˆ‘åæ§½ä¸€ä¸ªé—®é¢˜ï¼šçº¿ä¸Šå¼€å¯äº†è¿™ä¸ªç›‘æ§æ¨¡å—ï¼Œå¿«é€Ÿæ»‘åŠ¨æ—¶å¹³å‡å¸§ç‡èµ·ç é™ä½5å¸§ã€‚æˆ‘é€šè¿‡Traceviewä¸€çœ‹ï¼Œå‘ç°æ˜¯å› ä¸ºä¸Šé¢å›¾ä¸­æ‰€ç¤ºçš„å¤§é‡å­—ç¬¦ä¸²æ‹¼æ¥å¯¼è‡´æ€§èƒ½æŸè€—ä¸¥é‡ã€‚</p><p>åæ¥å¾ˆå¿«åˆæƒ³åˆ°äº†å¦å¤–ä¸€ä¸ªæ–¹æ¡ˆï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªç›‘æ§çº¿ç¨‹ï¼Œæ¯éš”1ç§’å‘ä¸»çº¿ç¨‹æ¶ˆæ¯é˜Ÿåˆ—çš„å¤´éƒ¨æ’å…¥ä¸€æ¡ç©ºæ¶ˆæ¯ã€‚å‡è®¾1ç§’åè¿™ä¸ªæ¶ˆæ¯å¹¶æ²¡æœ‰è¢«ä¸»çº¿ç¨‹æ¶ˆè´¹æ‰ï¼Œè¯´æ˜é˜»å¡æ¶ˆæ¯è¿è¡Œçš„æ—¶é—´åœ¨0ï½1ç§’ä¹‹é—´ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç›‘æ§3ç§’å¡é¡¿ï¼Œé‚£åœ¨ç¬¬4æ¬¡è½®è¯¢ä¸­å¤´éƒ¨æ¶ˆæ¯ä¾ç„¶æ²¡æœ‰è¢«æ¶ˆè´¹çš„è¯ï¼Œå°±å¯ä»¥ç¡®å®šä¸»çº¿ç¨‹å‡ºç°äº†ä¸€æ¬¡3ç§’ä»¥ä¸Šçš„å¡é¡¿ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b0/56/b06d5aa439e8bb75885a338df9a25f56.png?wh=1042*348\" alt=\"\"></p><p>è¿™ä¸ªæ–¹æ¡ˆä¹Ÿå­˜åœ¨ä¸€å®šçš„è¯¯å·®ï¼Œé‚£å°±æ˜¯å‘é€ç©ºæ¶ˆæ¯çš„é—´éš”æ—¶é—´ã€‚ä½†è¿™ä¸ªé—´éš”æ—¶é—´ä¹Ÿä¸èƒ½å¤ªå°ï¼Œå› ä¸ºç›‘æ§çº¿ç¨‹å’Œä¸»çº¿ç¨‹å¤„ç†ç©ºæ¶ˆæ¯éƒ½ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½æŸè€—ï¼Œä½†åŸºæœ¬å½±å“ä¸å¤§ã€‚</p><p><strong>2. æ’æ¡©</strong></p><p>ä¸è¿‡åœ¨ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´ä¹‹åï¼Œæˆ‘æ„Ÿè§‰è¿˜æ˜¯æœ‰é‚£ä¹ˆä¸€ç‚¹ä¸çˆ½ã€‚åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„å¡é¡¿ç›‘æ§å¹¶ä¸å‡†ç¡®ï¼Œæ­£åœ¨è¿è¡Œçš„å‡½æ•°æœ‰å¯èƒ½å¹¶ä¸æ˜¯çœŸæ­£è€—æ—¶çš„å‡½æ•°ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æˆ‘ç”»å¼ å›¾è§£é‡Šèµ·æ¥å°±æ¸…æ¥šäº†ã€‚æˆ‘ä»¬å‡è®¾ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯é‡Œé¢é¡ºåºæ‰§è¡Œäº†Aã€Bã€Cä¸‰ä¸ªå‡½æ•°ï¼Œå½“æ•´ä¸ªæ¶ˆæ¯æ‰§è¡Œè¶…è¿‡3ç§’æ—¶ï¼Œå› ä¸ºå‡½æ•°Aå’ŒBå·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œæˆ‘ä»¬åªèƒ½å¾—åˆ°çš„æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°Cçš„å †æ ˆï¼Œäº‹å®ä¸Šå®ƒå¯èƒ½å¹¶ä¸è€—æ—¶ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/bf/8ee841e21f4a40f2835fe846be143dbf.png?wh=1276*266\" alt=\"\"></p><p><strong>ä¸è¿‡å¯¹äºçº¿ä¸Šå¤§æ•°æ®æ¥è¯´ï¼Œå› ä¸ºå‡½æ•°Aå’ŒBç›¸å¯¹æ¯”è¾ƒè€—æ—¶ï¼Œæ‰€ä»¥æŠ“å–åˆ°å®ƒä»¬çš„æ¦‚ç‡ä¼šæ›´å¤§ä¸€äº›ï¼Œé€šè¿‡åå°èšåˆåæ•è·åˆ°å‡½æ•°Aå’ŒBçš„å¡é¡¿æ—¥å¿—ä¼šæ›´å¤šä¸€äº›ã€‚</strong></p><p>è¿™ä¹Ÿæ˜¯æˆ‘ä»¬çº¿ä¸Šç›®å‰ä¾ç„¶ä½¿ç”¨åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æ–¹æ³•ï¼Œä½†æ˜¯è‚¯å®šå¸Œæœ›å¯ä»¥åšåˆ°è·ŸTraceviewä¸€æ ·ï¼Œå¯ä»¥æ‹¿åˆ°æ•´ä¸ªå¡é¡¿è¿‡ç¨‹æ‰€æœ‰è¿è¡Œå‡½æ•°çš„è€—æ—¶ï¼Œå°±åƒä¸‹é¢å›¾ä¸­çš„ç»“æœï¼Œå¯ä»¥æ˜ç¡®çŸ¥é“å…¶å®å‡½æ•°Aå’ŒBæ‰æ˜¯é€ æˆå¡é¡¿çš„ä¸»è¦åŸå› ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0c/b5/0c6d97f12e0a5342626b11d683c227b5.png?wh=1224*286\" alt=\"\"></p><p>æ—¢ç„¶è¿™æ ·ï¼Œé‚£æˆ‘ä»¬èƒ½å¦ç›´æ¥åˆ©ç”¨Android Runtimeå‡½æ•°è°ƒç”¨çš„å›è°ƒäº‹ä»¶ï¼Œåšä¸€ä¸ªè‡ªå®šä¹‰çš„Traceview++å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯éœ€è¦ä½¿ç”¨Inline HookæŠ€æœ¯ã€‚æˆ‘ä»¬å¯ä»¥å®ç°ç±»ä¼¼Nanoscopeå…ˆå†™å†…å­˜çš„æ–¹æ¡ˆï¼Œä½†è€ƒè™‘åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œè¿™å¥—æ–¹æ¡ˆå¹¶æ²¡æœ‰ç”¨åˆ°çº¿ä¸Šã€‚</p><p>å¯¹äºå¤§ä½“é‡çš„åº”ç”¨ï¼Œç¨³å®šæ€§æ˜¯ç¬¬ä¸€è€ƒè™‘å› ç´ ã€‚é‚£å¦‚æœåœ¨ç¼–è¯‘è¿‡ç¨‹æ’æ¡©ï¼Œå…¼å®¹æ€§é—®é¢˜è‚¯å®šæ˜¯OKçš„ã€‚ä¸Šä¸€è®²è®²åˆ°systraceå¯ä»¥é€šè¿‡æ’æ¡©è‡ªåŠ¨ç”ŸæˆTrace Tagï¼Œæˆ‘ä»¬ä¸€æ ·ä¹Ÿå¯ä»¥åœ¨å‡½æ•°å…¥å£å’Œå‡ºå£åŠ å…¥è€—æ—¶ç›‘æ§çš„ä»£ç ï¼Œä½†æ˜¯éœ€è¦è€ƒè™‘çš„ç»†èŠ‚æœ‰å¾ˆå¤šã€‚</p><ul>\n<li>\n<p><strong>é¿å…æ–¹æ³•æ•°æš´å¢</strong>ã€‚åœ¨å‡½æ•°çš„å…¥å£å’Œå‡ºå£åº”è¯¥æ’å…¥ç›¸åŒçš„å‡½æ•°ï¼Œåœ¨ç¼–è¯‘æ—¶æå‰ç»™ä»£ç ä¸­æ¯ä¸ªæ–¹æ³•åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„IDä½œä¸ºå‚æ•°ã€‚</p>\n</li>\n<li>\n<p><strong>è¿‡æ»¤ç®€å•çš„å‡½æ•°</strong>ã€‚è¿‡æ»¤ä¸€äº›ç±»ä¼¼ç›´æ¥returnã€i++è¿™æ ·çš„ç®€å•å‡½æ•°ï¼Œå¹¶ä¸”æ”¯æŒé»‘åå•é…ç½®ã€‚å¯¹ä¸€äº›è°ƒç”¨éå¸¸é¢‘ç¹çš„å‡½æ•°ï¼Œéœ€è¦æ·»åŠ åˆ°é»‘åå•ä¸­æ¥é™ä½æ•´ä¸ªæ–¹æ¡ˆå¯¹æ€§èƒ½çš„æŸè€—ã€‚</p>\n</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/55/aa/5554d062dd45d6d927a08be4a39926aa.png?wh=1920*871\" alt=\"\"></p><p>åŸºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œçº¿ä¸Šåªä¼šç›‘æ§ä¸»çº¿ç¨‹çš„è€—æ—¶ã€‚å¾®ä¿¡çš„Matrixä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªæ–¹æ¡ˆï¼Œå› ä¸ºåšäº†å¤§é‡çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æœ€ç»ˆå®‰è£…åŒ…ä½“ç§¯åªå¢å¤§1ï½2%ï¼Œå¹³å‡å¸§ç‡ä¸‹é™ä¹Ÿåœ¨2å¸§ä»¥å†…ã€‚è™½ç„¶æ’æ¡©æ–¹æ¡ˆå¯¹æ€§èƒ½çš„å½±å“æ€»ä½“è¿˜å¯ä»¥æ¥å—ï¼Œä½†åªä¼šåœ¨ç°åº¦åŒ…ä½¿ç”¨ã€‚</p><p>æ’æ¡©æ–¹æ¡ˆçœ‹èµ·æ¥ç¾å¥½ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„çŸ­æ¿ï¼Œé‚£å°±æ˜¯åªèƒ½ç›‘æ§åº”ç”¨å†…è‡ªèº«çš„å‡½æ•°è€—æ—¶ï¼Œæ— æ³•ç›‘æ§ç³»ç»Ÿçš„å‡½æ•°è°ƒç”¨ï¼Œæ•´ä¸ªå †æ ˆçœ‹èµ·æ¥å¥½åƒâ€œç¼ºå¤±äº†â€ä¸€éƒ¨åˆ†ã€‚</p><p><strong>3. Profilo</strong></p><p>2018å¹´3æœˆï¼ŒFacebookå¼€æºäº†ä¸€ä¸ªå«<a href=\"http://github.com/facebookincubator/profilo\">Profilo</a>çš„åº“ï¼Œå®ƒæ”¶é›†äº†å„å¤§æ–¹æ¡ˆçš„ä¼˜ç‚¹ï¼Œä»¤æˆ‘çœ¼å‰ä¸€äº®ã€‚å…·ä½“æ¥è¯´æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p><strong>ç¬¬ä¸€ï¼Œé›†æˆatraceåŠŸèƒ½</strong>ã€‚ftraceæ‰€æœ‰æ€§èƒ½åŸ‹ç‚¹æ•°æ®éƒ½ä¼šé€šè¿‡trace_markeræ–‡ä»¶å†™å…¥å†…æ ¸ç¼“å†²åŒºï¼ŒProfiloé€šè¿‡PLT  Hookæ‹¦æˆªäº†å†™å…¥æ“ä½œï¼Œé€‰æ‹©éƒ¨åˆ†å…³å¿ƒçš„äº‹ä»¶åšåˆ†æã€‚è¿™æ ·æ‰€æœ‰systraceçš„æ¢é’ˆæˆ‘ä»¬éƒ½å¯ä»¥æ‹¿åˆ°ï¼Œä¾‹å¦‚å››å¤§ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€é”ç­‰å¾…æ—¶é—´ã€ç±»æ ¡éªŒã€GCæ—¶é—´ç­‰ã€‚</p><p><strong>ä¸è¿‡å¤§éƒ¨åˆ†çš„atraceäº‹ä»¶éƒ½æ¯”è¾ƒç¬¼ç»Ÿï¼Œä»äº‹ä»¶â€œB|pid|activityStartâ€ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“å…·ä½“æ˜¯å“ªä¸ªActivityçš„åˆ›å»º</strong>ã€‚åŒæ ·æˆ‘ä»¬å¯ä»¥ç»Ÿè®¡GCç›¸å…³äº‹ä»¶çš„è€—æ—¶ï¼Œä½†æ˜¯ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆå‘ç”Ÿäº†è¿™æ¬¡GCã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7f/fc/7f4abeb31fbc50546b0481435e7a7bfc.jpg?wh=736*124\" alt=\"\"></p><p><strong>ç¬¬äºŒï¼Œå¿«é€Ÿè·å–Javaå †æ ˆ</strong>ã€‚<strong>å¾ˆå¤šåŒå­¦æœ‰ä¸€ä¸ªè¯¯åŒºï¼Œè§‰å¾—åœ¨æŸä¸ªçº¿ç¨‹ä¸æ–­åœ°è·å–ä¸»çº¿ç¨‹å †æ ˆæ˜¯ä¸è€—æ—¶çš„ã€‚ä½†æ˜¯äº‹å®ä¸Šè·å–å †æ ˆçš„ä»£ä»·æ˜¯å·¨å¤§çš„ï¼Œå®ƒè¦æš‚åœä¸»çº¿ç¨‹çš„è¿è¡Œ</strong>ã€‚</p><p>Profiloçš„å®ç°éå¸¸ç²¾å¦™ï¼Œå®ƒå®ç°ç±»ä¼¼Nativeå´©æºƒæ•æ‰çš„æ–¹å¼å¿«é€Ÿè·å–Javaå †æ ˆï¼Œé€šè¿‡é—´éš”å‘é€SIGPROFä¿¡å·ï¼Œæ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/2f/b7/2f00261346ba4c85c9ae522766cf05b7.jpg?wh=2480*2196\" alt=\"\"></p><p>Signal Handleræ•è·åˆ°ä¿¡å·åï¼Œæ‹¿å–åˆ°å½“å‰æ­£åœ¨æ‰§è¡Œçš„Threadï¼Œé€šè¿‡Threadå¯¹è±¡å¯ä»¥è·å–å½“å‰çº¿ç¨‹çš„ManagedStackï¼ŒManagedStackæ˜¯ä¸€ä¸ªå•é“¾è¡¨ï¼Œå®ƒä¿å­˜äº†å½“å‰çš„ShadowFrameæˆ–è€…QuickFrameæ ˆæŒ‡é’ˆï¼Œå…ˆä¾æ¬¡éå†ManagedStacké“¾è¡¨ï¼Œç„¶åéå†å…¶å†…éƒ¨çš„ShadowFrameæˆ–è€…QuickFrameè¿˜åŸä¸€ä¸ªå¯è¯»çš„è°ƒç”¨æ ˆï¼Œä»è€Œunwindå‡ºå½“å‰çš„Javaå †æ ˆã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å®ç°çº¿ç¨‹ä¸€è¾¹ç»§ç»­è·‘æ­¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¸®å®ƒåšæ£€æŸ¥ï¼Œè€Œä¸”è€—æ—¶åŸºæœ¬å¿½ç•¥ä¸è®¡ã€‚ä»£ç å¯ä»¥å‚ç…§ï¼š<a href=\"http://github.com/facebookincubator/profilo/blob/master/cpp/profiler/unwindc/android_712/arm/unwinder.h\">Profilo::unwind</a>å’Œ<a href=\"http://androidxref.com/7.1.1_r6/xref/art/runtime/stack.cc#772\">StackVisitor::WalkStack</a>ã€‚</p><p>ä¸ç”¨æ’æ¡©ã€æ€§èƒ½åŸºæœ¬æ²¡æœ‰å½±å“ã€æ•æ‰ä¿¡æ¯è¿˜å…¨ï¼Œé‚£Profiloä¸å°±æ˜¯å®Œç¾çš„åŒ–èº«å—ï¼Ÿå½“ç„¶ç”±äºå®ƒåˆ©ç”¨äº†å¤§é‡çš„é»‘ç§‘æŠ€ï¼Œå…¼å®¹æ€§æ˜¯éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚å®ƒå†…éƒ¨å®ç°æœ‰å¤§é‡å‡½æ•°çš„Hookï¼Œunwindä¹Ÿéœ€è¦å¼ºä¾èµ–Android Runtimeå®ç°ã€‚Facebookå·²ç»å°†ProfiloæŠ•å…¥åˆ°çº¿ä¸Šä½¿ç”¨ï¼Œä½†ç”±äºç›®å‰Profiloå¿«é€Ÿè·å–å †æ ˆåŠŸèƒ½ä¾ç„¶ä¸æ”¯æŒAndroid 8.0å’ŒAndroid  9.0ï¼Œé‰´äºç¨³å®šæ€§é—®é¢˜ï¼Œå»ºè®®é‡‡å–æŠ½æ ·éƒ¨åˆ†ç”¨æˆ·çš„æ–¹å¼æ¥å¼€å¯è¯¥åŠŸèƒ½ã€‚</p><p><strong>å…ˆå°ç»“ä¸€ä¸‹ï¼Œä¸ç®¡æˆ‘ä»¬ä½¿ç”¨å“ªç§å¡é¡¿ç›‘æ§æ–¹æ³•ï¼Œæœ€åæˆ‘ä»¬éƒ½å¯ä»¥å¾—åˆ°å¡é¡¿æ—¶çš„å †æ ˆå’Œå½“æ—¶CPUè¿è¡Œçš„ä¸€äº›ä¿¡æ¯ã€‚å¤§éƒ¨åˆ†çš„å¡é¡¿é—®é¢˜éƒ½æ¯”è¾ƒå¥½å®šä½ï¼Œä¾‹å¦‚ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªè€—æ—¶ä»»åŠ¡ã€è¯»ä¸€ä¸ªéå¸¸å¤§çš„æ–‡ä»¶æˆ–è€…æ˜¯æ‰§è¡Œç½‘ç»œè¯·æ±‚ç­‰ã€‚</strong></p><h2>å…¶ä»–ç›‘æ§</h2><p>é™¤äº†ä¸»çº¿ç¨‹çš„è€—æ—¶è¿‡é•¿ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰å“ªäº›å¡é¡¿é—®é¢˜éœ€è¦å…³æ³¨å‘¢ï¼Ÿ</p><p>Android Vitalsæ˜¯Google Playå®˜æ–¹çš„æ€§èƒ½ç›‘æ§æœåŠ¡ï¼Œæ¶‰åŠå¡é¡¿ç›¸å…³çš„ç›‘æ§æœ‰ANRã€å¯åŠ¨ã€å¸§ç‡ä¸‰ä¸ªã€‚å°¤å…¶æ˜¯ANRç›‘æ§ï¼Œæˆ‘ä»¬åº”è¯¥ç»å¸¸çš„æ¥çœ‹çœ‹ï¼Œä¸»è¦æ˜¯Googleè‡ªå·±æ˜¯æœ‰æƒé™å¯ä»¥å‡†ç¡®ç›‘æ§å’Œä¸ŠæŠ¥ANRã€‚</p><p>å¯¹äºå¯åŠ¨å’Œå¸§ç‡ï¼ŒAndroid Vitalsåªæ˜¯ä¸ŠæŠ¥äº†åº”ç”¨çš„åŒºé—´åˆ†å¸ƒï¼Œä½†æ˜¯ä¸èƒ½å½’çº³å‡ºé—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬åšæ€§èƒ½ä¼˜åŒ–æ—¶æ¯”è¾ƒè¿·æƒ‘çš„ä¸€ç‚¹ï¼Œå³ä½¿å‘ç°æ•´ä½“çš„å¸§ç‡æ¯”è¿‡å»é™ä½äº†5å¸§ï¼Œä¹Ÿå¹¶ä¸çŸ¥é“æ˜¯å“ªé‡Œé€ æˆçš„ï¼Œè¿˜æ˜¯è¦èŠ±å¾ˆå¤§çš„åŠ›æ°”å»åšäºŒæ¬¡æ’æŸ¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/fc/fa/fc93805b240cccbcb8474968a2bfb9fa.png?wh=1908*494\" alt=\"\"></p><p>èƒ½ä¸èƒ½åšåˆ°è·Ÿå´©æºƒã€å¡é¡¿ä¸€æ ·ï¼Œç›´æ¥ç»™æˆ‘ä¸€ä¸ªå †æ ˆï¼Œå‘Šè¯‰æˆ‘å°±æ˜¯å› ä¸ºè¿™é‡Œå†™çš„ä¸å¥½å¯¼è‡´å¸§ç‡ä¸‹é™äº†5å¸§ã€‚é€€ä¸€æ­¥è¯´ï¼Œå¦‚æœåšä¸åˆ°ç›´æ¥å‘Šè¯‰æˆ‘å †æ ˆï¼Œèƒ½ä¸èƒ½å‘Šè¯‰æˆ‘æ˜¯å› ä¸ºèŠå¤©è¿™ä¸ªé¡µé¢å¯¼è‡´çš„å¸§ç‡ä¸‹é™ï¼Œè®©æˆ‘ç¼©å°äºŒæ¬¡æ’æŸ¥çš„èŒƒå›´ã€‚</p><p><strong>1. å¸§ç‡</strong></p><p>ä¸šç•Œéƒ½ä½¿ç”¨Choreographeræ¥ç›‘æ§åº”ç”¨çš„å¸§ç‡ã€‚è·Ÿå¡é¡¿ä¸åŒçš„æ˜¯ï¼Œéœ€è¦æ’é™¤æ‰é¡µé¢æ²¡æœ‰æ“ä½œçš„æƒ…å†µï¼Œæˆ‘ä»¬åº”è¯¥åªåœ¨<strong>ç•Œé¢å­˜åœ¨ç»˜åˆ¶</strong>çš„æ—¶å€™æ‰åšç»Ÿè®¡ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•ç›‘å¬ç•Œé¢æ˜¯å¦å­˜åœ¨ç»˜åˆ¶è¡Œä¸ºå‘¢ï¼Ÿå¯ä»¥é€šè¿‡addOnDrawListenerå®ç°ã€‚</p><pre><code>getWindow().getDecorView().getViewTreeObserver().addOnDrawListener\n</code></pre><p>æˆ‘ä»¬ç»å¸¸ç”¨å¹³å‡å¸§ç‡æ¥è¡¡é‡ç•Œé¢æµç•…åº¦ï¼Œä½†äº‹å®ä¸Šç”µå½±çš„å¸§ç‡æ‰24å¸§ï¼Œç”¨æˆ·å¯¹äºåº”ç”¨çš„å¹³å‡å¸§ç‡æ˜¯40å¸§è¿˜æ˜¯50å¸§å¹¶ä¸ä¸€å®šå¯ä»¥æ„Ÿå—å‡ºæ¥ã€‚å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæ„Ÿè§‰æœ€æ˜æ˜¾çš„æ˜¯è¿ç»­ä¸¢å¸§æƒ…å†µï¼ŒAndroid Vitalså°†è¿ç»­ä¸¢å¸§è¶…è¿‡700æ¯«ç§’å®šä¹‰ä¸ºå†»å¸§ï¼Œä¹Ÿå°±æ˜¯è¿ç»­ä¸¢å¸§42å¸§ä»¥ä¸Šã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç»Ÿè®¡æ›´æœ‰ä»·å€¼çš„å†»å¸§ç‡ã€‚<strong>å†»å¸§ç‡å°±æ˜¯è®¡ç®—å‘ç”Ÿå†»å¸§æ—¶é—´åœ¨æ‰€æœ‰æ—¶é—´çš„å æ¯”</strong>ã€‚å‡ºç°ä¸¢å¸§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è·å–å½“å‰çš„é¡µé¢ä¿¡æ¯ã€Viewä¿¡æ¯å’Œæ“ä½œè·¯å¾„ä¸ŠæŠ¥åå°ï¼Œé™ä½äºŒæ¬¡æ’æŸ¥çš„éš¾åº¦ã€‚</p><p>æ­£å¦‚ä¸‹å›¾ä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŒ‰ç…§Activityã€Fragmentæˆ–è€…æŸä¸ªæ“ä½œå®šä¹‰åœºæ™¯ï¼Œé€šè¿‡ç»†åŒ–ä¸åŒåœºæ™¯çš„å¹³å‡å¸§ç‡å’Œå†»å¸§ç‡ï¼Œè¿›ä¸€æ­¥ç»†åŒ–é—®é¢˜æ’æŸ¥çš„èŒƒå›´ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/73/ba/73b185f989a20e868886d10c864c43ba.png?wh=990*660\" alt=\"\"></p><p><strong>2. ç”Ÿå‘½å‘¨æœŸç›‘æ§</strong></p><p>Activityã€Serviceã€Receiverç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„è€—æ—¶å’Œè°ƒç”¨æ¬¡æ•°ä¹Ÿæ˜¯æˆ‘ä»¬é‡ç‚¹å…³æ³¨çš„æ€§èƒ½é—®é¢˜ã€‚ä¾‹å¦‚Activityçš„onCreate()ä¸åº”è¯¥è¶…è¿‡1ç§’ï¼Œä¸ç„¶ä¼šå½±å“ç”¨æˆ·çœ‹åˆ°é¡µé¢çš„æ—¶é—´ã€‚Serviceå’ŒReceiverè™½ç„¶æ˜¯åå°ç»„ä»¶ï¼Œä¸è¿‡å®ƒä»¬ç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯å ç”¨ä¸»çº¿ç¨‹çš„ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„é—®é¢˜ã€‚</p><p>å¯¹äºç»„ä»¶ç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬åº”è¯¥é‡‡ç”¨æ›´ä¸¥æ ¼åœ°ç›‘æ§ï¼Œå¯ä»¥å…¨é‡ä¸ŠæŠ¥ã€‚åœ¨åå°æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å„ä¸ªç»„ä»¶å„ä¸ªç”Ÿå‘½å‘¨æœŸçš„å¯åŠ¨æ—¶é—´å’Œå¯åŠ¨æ¬¡æ•°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d4/67/d4e8abcb054793168dff716c7956ae67.png?wh=1270*302\" alt=\"\"></p><p>æœ‰ä¸€æ¬¡æˆ‘ä»¬å‘ç°æœ‰ä¸¤ä¸ªServiceçš„å¯åŠ¨æ¬¡æ•°æ˜¯å…¶ä»–çš„10å€ï¼Œç»è¿‡æ’æŸ¥å‘ç°æ˜¯å› ä¸ºé¢‘ç¹çš„äº’ç›¸æ‹‰èµ·å¯¼è‡´ã€‚Receiverä¹Ÿæ˜¯è¿™æ ·ï¼Œè€Œä¸”å®ƒä»¬éƒ½éœ€è¦ç»è¿‡System Serverã€‚æ›¾ç»æœ‰ä¸€ä¸ªæ—¥å¿—ä¸ŠæŠ¥æ¨¡å—é€šè¿‡Broadcastæ¥åšè·¨è¿›ç¨‹é€šä¿¡ï¼Œæ¯ç§’å‘é€å‡ åƒæ¬¡è¯·æ±‚ï¼Œå¯¼è‡´ç³»ç»ŸSystem Serverå¡æ­»ã€‚æ‰€ä»¥è¯´æ¯ä¸ªç»„ä»¶å„ä¸ªç”Ÿå‘½å‘¨æœŸçš„è°ƒç”¨æ¬¡æ•°ä¹Ÿæ˜¯éå¸¸æœ‰å‚è€ƒä»·å€¼çš„æŒ‡æ ‡ã€‚</p><p>é™¤äº†å››å¤§ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç›‘æ§å„ä¸ªè¿›ç¨‹ç”Ÿå‘½å‘¨æœŸçš„å¯åŠ¨æ¬¡æ•°å’Œè€—æ—¶ã€‚é€šè¿‡ä¸‹é¢çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæŸäº›è¿›ç¨‹æ˜¯å¦é¢‘ç¹åœ°æ‹‰èµ·ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/53/0c/534e422d44eb4b08ebdac2181b87f70c.png?wh=1272*286\" alt=\"\"></p><p>å¯¹äºç”Ÿå‘½å‘¨æœŸçš„ç›‘æ§å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ’ä»¶åŒ–æŠ€æœ¯Hookçš„æ–¹å¼ã€‚ä½†æ˜¯Android Pä¹‹åï¼Œæˆ‘è¿˜æ˜¯ä¸å¤ªæ¨èä½ ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚æˆ‘æ›´æ¨èä½¿ç”¨ç¼–è¯‘æ—¶æ’æ¡©çš„æ–¹å¼ï¼Œ<strong>åé¢æˆ‘ä¼šè®²åˆ°Aspectã€ASMå’ŒReDexä¸‰ç§æ’æ¡©æŠ€æœ¯çš„å®ç°ï¼Œæ•¬è¯·æœŸå¾…ã€‚</strong></p><p><strong>3. çº¿ç¨‹ç›‘æ§</strong></p><p>Javaçº¿ç¨‹ç®¡ç†æ˜¯å¾ˆå¤šåº”ç”¨éå¸¸å¤´ç—›çš„äº‹æƒ…ï¼Œåº”ç”¨å¯åŠ¨è¿‡ç¨‹å°±å·²ç»åˆ›å»ºäº†å‡ åä¸Šç™¾ä¸ªçº¿ç¨‹ã€‚è€Œä¸”å¤§éƒ¨åˆ†çš„çº¿ç¨‹éƒ½æ²¡æœ‰ç»è¿‡çº¿ç¨‹æ± ç®¡ç†ï¼Œéƒ½åœ¨è‡ªç”±è‡ªåœ¨åœ°ç‹‚å¥”ç€ã€‚</p><p>å¦å¤–ä¸€æ–¹é¢æŸäº›çº¿ç¨‹ä¼˜å…ˆçº§æˆ–è€…æ´»è·ƒåº¦æ¯”è¾ƒé«˜ï¼Œå ç”¨äº†è¿‡å¤šçš„CPUã€‚è¿™ä¼šé™ä½ä¸»çº¿ç¨‹UIå“åº”èƒ½åŠ›ï¼Œæˆ‘ä»¬éœ€è¦ç‰¹åˆ«é’ˆå¯¹è¿™äº›çº¿ç¨‹åšé‡ç‚¹çš„ä¼˜åŒ–ã€‚</p><p>å¯¹äºJavaçº¿ç¨‹ï¼Œæ€»çš„æ¥è¯´æˆ‘ä¼šç›‘æ§ä»¥ä¸‹ä¸¤ç‚¹ã€‚</p><ul>\n<li>\n<p>çº¿ç¨‹æ•°é‡ã€‚éœ€è¦ç›‘æ§çº¿ç¨‹æ•°é‡çš„å¤šå°‘ï¼Œä»¥åŠåˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ã€‚ä¾‹å¦‚æœ‰æ²¡æœ‰ä½¿ç”¨æˆ‘ä»¬ç‰¹æœ‰çš„çº¿ç¨‹æ± ï¼Œè¿™å—å¯ä»¥é€šè¿‡got hookçº¿ç¨‹çš„nativeCreate()å‡½æ•°ã€‚ä¸»è¦ç”¨äºè¿›è¡Œçº¿ç¨‹æ”¶æ•›ï¼Œä¹Ÿå°±æ˜¯å‡å°‘çº¿ç¨‹æ•°é‡ã€‚</p>\n</li>\n<li>\n<p>çº¿ç¨‹æ—¶é—´ã€‚ç›‘æ§çº¿ç¨‹çš„ç”¨æˆ·æ—¶é—´utimeã€ç³»ç»Ÿæ—¶é—´stimeå’Œä¼˜å…ˆçº§ã€‚ä¸»è¦æ˜¯çœ‹å“ªäº›çº¿ç¨‹utime+stimeæ—¶é—´æ¯”è¾ƒå¤šï¼Œå ç”¨äº†è¿‡å¤šçš„CPUã€‚<strong>æ­£å¦‚ä¸Šä¸€æœŸâ€œæ¯è¯¾ä¸€ç»ƒâ€æ‰€æåˆ°çš„ï¼Œå¯èƒ½æœ‰ä¸€äº›çº¿ç¨‹å› ä¸ºç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­å¯¼è‡´å¾ˆéš¾å‘ç°ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç»“åˆçº¿ç¨‹åˆ›å»ºç›‘æ§ã€‚</strong></p>\n</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/52/53/52a236b3d3af37869a4eaf087b4ddf53.png?wh=1286*270\" alt=\"\"></p><p><strong>çœ‹åˆ°è¿™é‡Œå¯èƒ½æœ‰åŒå­¦ä¼šæ¯”è¾ƒå›°æƒ‘ï¼Œå¡é¡¿ä¼˜åŒ–çš„ä¸»é¢˜å°±æ˜¯ç›‘æ§å—ï¼Ÿå¯¼è‡´å¡é¡¿çš„åŸå› ä¼šæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å‡½æ•°éå¸¸è€—æ—¶ã€I/Oéå¸¸æ…¢ã€çº¿ç¨‹é—´çš„ç«äº‰æˆ–è€…é”ç­‰ã€‚å…¶å®å¾ˆå¤šæ—¶å€™å¡é¡¿é—®é¢˜å¹¶ä¸éš¾è§£å†³ï¼Œç›¸è¾ƒè§£å†³æ¥è¯´ï¼Œæ›´å›°éš¾çš„æ˜¯å¦‚ä½•å¿«é€Ÿå‘ç°è¿™äº›å¡é¡¿ç‚¹ï¼Œä»¥åŠé€šè¿‡æ›´å¤šçš„è¾…åŠ©ä¿¡æ¯æ‰¾åˆ°çœŸæ­£çš„å¡é¡¿åŸå› ã€‚</strong></p><p>å°±è·Ÿåœ¨æœ¬åœ°ä½¿ç”¨å„ç§å¡é¡¿åˆ†æå·¥å…·ä¸€æ ·ï¼Œå¡é¡¿ä¼˜åŒ–çš„éš¾ç‚¹åœ¨äºå¦‚ä½•æŠŠå®ƒä»¬ç§»æ¤åˆ°çº¿ä¸Šï¼Œä»¥æœ€å°‘çš„æ€§èƒ½ä»£ä»·è·å¾—æ›´åŠ ä¸°å¯Œçš„å¡é¡¿ä¿¡æ¯ã€‚å½“ç„¶æŸäº›å¡é¡¿é—®é¢˜å¯èƒ½æ˜¯I/Oã€å­˜å‚¨æˆ–è€…ç½‘ç»œå¼•å‘çš„ï¼Œåé¢ä¼šè¿˜æœ‰ä¸“é—¨çš„å†…å®¹æ¥è®²è¿™äº›é—®é¢˜çš„ä¼˜åŒ–æ–¹æ³•ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†å¡é¡¿ç›‘æ§çš„å‡ ç§æ–¹æ³•ã€‚éšç€æŠ€æœ¯çš„æ·±å…¥ï¼Œæˆ‘ä»¬å‘ç°äº†æ—§æ–¹æ¡ˆçš„ä¸€äº›ç¼ºç‚¹ï¼Œé€šè¿‡ä¸æ–­åœ°è¿­ä»£å’Œæ¼”è¿›ï¼Œå¯»æ‰¾æ›´å¥½çš„æ–¹æ¡ˆã€‚</p><p>Facebookçš„Profiloå®ç°äº†å¿«é€Ÿè·å–Javaå †æ ˆï¼Œå…¶å®å®ƒå‚è€ƒçš„æ˜¯JVMçš„AsyncGetCallTraceæ€è·¯ï¼Œç„¶åé€‚é…Android Runtimeçš„å®ç°ã€‚systraceä½¿ç”¨çš„æ˜¯Linuxçš„ftraceï¼ŒSimpleperfå‚è€ƒäº†Linuxçš„perfå·¥å…·ã€‚è¿˜æ˜¯ç†Ÿæ‚‰çš„é…æ–¹ï¼Œè¿˜æ˜¯ç†Ÿæ‚‰çš„å‘³é“ï¼Œæˆ‘ä»¬å¾ˆå¤šåˆ›æ–°æ€§çš„ä¸œè¥¿ï¼Œå…¶å®è¿˜æ˜¯åŸºäºJavaå’ŒLinuxåå¹´å‰çš„äº§ç‰©ã€‚</p><p>è¿˜æ˜¯å›åˆ°æˆ‘åœ¨ä¸“æ å¼€ç¯‡è¯è¯´è¿‡çš„ï¼Œåˆ‡è®°ä¸è¦æµ®èºï¼Œå¤šäº†è§£å’Œå­¦ä¹ ä¸€äº›åº•å±‚çš„æŠ€æœ¯ï¼Œå¯¹æˆ‘ä»¬çš„æˆé•¿ä¼šæœ‰å¾ˆå¤§å¸®åŠ©ã€‚<strong>æ—¥å¸¸å¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿä¸èƒ½åªæ»¡è¶³äºå®Œæˆéœ€æ±‚å°±å¯ä»¥äº†ï¼Œåœ¨å®ç°ä¸Šåº”è¯¥å­¦ä¼šå¤šå»æ€è€ƒå†…å­˜ã€å¡é¡¿è¿™äº›å½±å“æ€§èƒ½çš„ç‚¹ï¼Œæˆ‘ä»¬æ¯”åˆ«äººå¤šæƒ³ä¸€äº›ã€å¤šåšä¸€äº›ï¼Œè‡ªå·±çš„è¿›æ­¥è‡ªç„¶ä¹Ÿä¼šæ›´å¿«ä¸€äº›ã€‚</strong></p><h2>è¯¾åä½œä¸š</h2><p>çœ‹å®Œæˆ‘åˆ†äº«çš„å¡é¡¿ä¼˜åŒ–çš„æ–¹æ³•åï¼Œç›¸ä¿¡ä½ ä¹Ÿè‚¯å®šè¿˜æœ‰å¾ˆå¤šå¥½çš„æ€è·¯å’Œæ–¹æ³•ï¼Œ<span class=\"orange\">ä»Šå¤©çš„è¯¾åä½œä¸šæ˜¯åˆ†äº«ä¸€ä¸‹ä½ çš„å¡é¡¿ä¼˜åŒ–çš„â€œå¿…æ€æŠ€â€ï¼Œåœ¨ç•™è¨€åŒºåˆ†äº«ä¸€ä¸‹ä»Šå¤©å­¦ä¹ ã€ç»ƒä¹ çš„æ”¶è·ä¸å¿ƒå¾—</span>ã€‚</p><h2>è¯¾åç»ƒä¹ </h2><p>æˆ‘åœ¨ä¸Šä¸€æœŸä¸­æåˆ°è¿‡Linuxçš„ftraceæœºåˆ¶ï¼Œè€Œsystraceæ­£æ˜¯åˆ©ç”¨è¿™ä¸ªç³»ç»Ÿæœºåˆ¶å®ç°çš„ã€‚è€ŒProfiloæ›´æ˜¯é€šè¿‡ä¸€äº›é»‘ç§‘æŠ€ï¼Œå®ç°äº†ä¸€ä¸ªå¯ä»¥ç”¨äºçº¿ä¸Šçš„â€œsystraceâ€ã€‚é‚£å®ƒç©¶ç«Ÿæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p><p>é€šè¿‡ä»Šå¤©è¿™ä¸ª<a href=\"http://github.com/AndroidAdvanceWithGeektime/Chapter06\">Sample</a>ï¼Œä½ å¯ä»¥å­¦ä¹ åˆ°å®ƒçš„å®ç°æ€è·¯ã€‚å½“ä½ å¯¹è¿™äº›åº•å±‚æœºåˆ¶è¶³å¤Ÿç†Ÿæ‚‰çš„æ—¶å€™ï¼Œå¯èƒ½å°±ä¸å±€é™åœ¨æœ¬åœ°ä½¿ç”¨ï¼Œè€Œæ˜¯å¯ä»¥å°†å®ƒä»¬æ¬åˆ°çº¿ä¸Šäº†ã€‚</p><p>å½“ç„¶ï¼Œä¸ºäº†èƒ½æ›´å¥½åœ°ç†è§£è¿™ä¸ªSampleï¼Œå¯èƒ½ä½ è¿˜éœ€è¦è¡¥å……ä¸€äº›ftraceå’Œatraceç›¸å…³çš„èƒŒæ™¯çŸ¥è¯†ã€‚ä½ ä¼šå‘ç°è¿™äº›çš„ç¡®éƒ½æ˜¯Linuxåå¹´å‰çš„ä¸€äº›çŸ¥è¯†ï¼Œä½†æ—¶è‡³ä»Šæ—¥å®ƒä»¬ä¾ç„¶éå¸¸æœ‰ç”¨ã€‚</p><p>1.<a href=\"http://www.ibm.com/developerworks/cn/linux/l-cn-ftrace/index.html\">ftrace ç®€ä»‹</a>ã€<a href=\"http://www.ibm.com/developerworks/cn/linux/l-cn-ftrace1/index.html\">ftraceä½¿ç”¨ï¼ˆä¸Šï¼‰</a>ã€<a href=\"http://www.ibm.com/developerworks/cn/linux/l-cn-ftrace2/index.html\">fraceä½¿ç”¨ï¼ˆä¸‹ï¼‰</a>ã€‚</p><p>2.<a href=\"http://source.android.com/devices/tech/debug/ftrace\">atraceä»‹ç»</a>ã€<a href=\"http://android.googlesource.com/platform/frameworks/native/+/master/cmds/atrace/atrace.cpp\">atraceå®ç°</a>ã€‚</p><p>æ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™å¥½å‹ï¼Œé‚€è¯·ä»–ä¸€èµ·å­¦ä¹ ã€‚æœ€ååˆ«å¿˜äº†åœ¨è¯„è®ºåŒºæäº¤ä»Šå¤©çš„ä½œä¸šï¼Œæˆ‘ä¹Ÿä¸ºè®¤çœŸå®Œæˆä½œä¸šçš„åŒå­¦å‡†å¤‡äº†ä¸°åšçš„â€œå­¦ä¹ åŠ æ²¹ç¤¼åŒ…â€ï¼ŒæœŸå¾…ä¸ä½ ä¸€èµ·åˆ‡ç£‹è¿›æ­¥å“¦ã€‚</p><p></p>","neighbors":{"left":{"article_title":"05 | å¡é¡¿ä¼˜åŒ–ï¼ˆä¸Šï¼‰ï¼šä½ è¦æŒæ¡çš„å¡é¡¿åˆ†ææ–¹æ³•","id":71982},"right":{"article_title":"06è¡¥å……ç¯‡ | å¡é¡¿ä¼˜åŒ–ï¼šå¡é¡¿ç°åœºä¸å¡é¡¿åˆ†æ","id":73277}},"comments":[{"had_liked":false,"id":49472,"user_name":"Seven","can_delete":false,"product_type":"c1","uid":1328562,"ip_address":"","ucode":"C1C68316449B57","user_header":"https://static001.geekbang.org/account/avatar/00/14/45/b2/ee0cfc12.jpg","comment_is_top":false,"comment_ctime":1544693785,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"207703123993","product_id":100021101,"comment_content":"æ˜æ˜æ˜¯Androidå¼€å‘è¯¾ï¼Œä½†æ˜¯ç»æ–‡è€å¸ˆåœ¨å¾ˆå¤šæ–‡ç« ä¸­éƒ½ä¼šæåˆ°Linuxï¼ŒJVMç›¸å…³çš„çŸ¥è¯†ï¼Œæ·±å…¥ä¼˜åŒ–å°±æ˜¯æ·±å…¥åº•å±‚å•Šï¼Œç›®å‰çš„èƒ½åŠ›ä¸è¶³ä»¥æ¶ˆåŒ–è¿™ç¯‡æ–‡ç« ï¼ŒåŒæ—¶å¸Œæœ›ç»æ–‡è€å¸ˆå’Œé¹é£è€å¸ˆæ¨èç›¸å…³ä¹¦ç±","like_count":49},{"had_liked":false,"id":49497,"user_name":"Georgeå´é€¸äº‘","can_delete":false,"product_type":"c1","uid":1125994,"ip_address":"","ucode":"E0F6B1EC151DE2","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/6a/02eb9956.jpg","comment_is_top":false,"comment_ctime":1544698511,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"74559142543","product_id":100021101,"comment_content":"å·²ç»æ‰é˜Ÿäº†ï¼Œåº•å±‚åŸºç¡€å¤ªå·®äº†ğŸ˜­","like_count":17},{"had_liked":false,"id":49530,"user_name":"catkin","can_delete":false,"product_type":"c1","uid":1127815,"ip_address":"","ucode":"2E7ECACBC30CEC","user_header":"https://static001.geekbang.org/account/avatar/00/11/35/87/b2a1e5cc.jpg","comment_is_top":false,"comment_ctime":1544706519,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"57379281367","product_id":100021101,"comment_content":"å¼ è€å¸ˆï¼Œçœ‹å®Œè¿™ç¯‡æ–‡ç« æˆ‘å·²ç»å¼€å§‹æ€€ç–‘äººç”Ÿäº†ï¼ŒæŒæ¡è¿™ä¹ˆå¤šçŸ¥è¯†æ‚¨æ˜¯æ€ä¹ˆåŠåˆ°çš„ï¼Œè€Œä¸”å¯¹é‚£äº›é»‘ç§‘æŠ€äº†å¦‚æŒ‡æŒï¼Œè¿˜èƒ½ä¸¾ä¸€åä¸‰ï¼Œæ„Ÿè§‰å°±è·Ÿç©ä¸€æ ·ï¼èƒ½ä¸èƒ½èµæ•™ä¸€ä¸‹æ€ä¹ˆåšåˆ°çš„ï¼Ÿ","like_count":14,"discussions":[{"author":{"id":2266589,"avatar":"https://static001.geekbang.org/account/avatar/00/22/95/dd/c653f556.jpg","nickname":"superman","note":"","ucode":"79E816ACBD0665","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340195,"discussion_content":"æ„Ÿè§‰è‡ªå·±æ˜¯ä¸ªå¼±æ™º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609925294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1331142,"avatar":"https://static001.geekbang.org/account/avatar/00/14/4f/c6/47d3a239.jpg","nickname":"æ°ç½—éº¦","note":"","ucode":"37EB10E7FA6B01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311709,"discussion_content":"æˆ‘ä¹Ÿæ€€ç–‘äººç”Ÿäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602470193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2036014,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/11/2e/31226547.jpg","nickname":"è‹±é“","note":"","ucode":"6689CCC58E01DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295836,"discussion_content":"æˆ‘ä¹Ÿæ€€ç–‘äººç”Ÿäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596359944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1329103,"avatar":"","nickname":"å”¯å¨å¥‹æ–—","note":"","ucode":"B6BC3B145D1593","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126997,"discussion_content":"æˆ‘ä¹Ÿæ€€ç–‘äººç”Ÿäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578557894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1329241,"avatar":"https://static001.geekbang.org/account/avatar/00/14/48/59/ad47636a.jpg","nickname":"Itisnice","note":"","ucode":"6899379D238C08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4227,"discussion_content":"æˆ‘ä¹Ÿæ€€ç–‘äººç”Ÿäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565242497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177139,"user_name":"Jerryé“¶é“¶","can_delete":false,"product_type":"c1","uid":1008404,"ip_address":"","ucode":"80DA1172A2360A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg","comment_is_top":false,"comment_ctime":1581300719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"53120908271","product_id":100021101,"comment_content":"ç ”ç©¶åŠå¤©ï¼Œç«Ÿç„¶å¿˜è®°äº†çœ‹Matrixåº“ä¸­çš„çš„wikiã€‚åœ¨å…¶ä¸­å‘ç°äº†ä¸€ç¯‡å…³äºå¡é¡¿æ£€æµ‹çš„æ–‡ç« ï¼Œè´¨é‡æŒºé«˜ï¼Œæ›¾å‘å¸ƒäºWeMobileDevå…¬ä¼—å·ä¸­ï¼Œæ–‡ç« åœ°å€ï¼šhttps:&#47;&#47;github.com&#47;Tencent&#47;matrix&#47;wiki&#47;Matrix-Android-TraceCanaryã€‚<br>","like_count":12},{"had_liked":false,"id":49980,"user_name":"å¸Œå¤·","can_delete":false,"product_type":"c1","uid":1028673,"ip_address":"","ucode":"2E3E86AC7A19EC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/41/d9dcc7ef.jpg","comment_is_top":false,"comment_ctime":1544806136,"is_pvip":false,"replies":[{"id":"17997","content":"å…¶å®ä¸æ˜¯ï¼Œè¿™ä¸ªä¸“æ æˆ‘æ›´å…³æ³¨çš„æ˜¯äººçš„æˆé•¿ï¼Œè€Œä¸æ˜¯å…·ä½“åº”ç”¨åˆ°å“ªé‡Œã€‚<br><br>å½“ç„¶å¯ä»¥æŠŠçŸ¥è¯†è½¬åŒ–åº”ç”¨åˆ°å·¥ä½œä¸­æ•ˆæœä¼šæ›´åŠ å¥½","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1544836669,"ip_address":"","comment_id":49980,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35904544504","product_id":100021101,"comment_content":"å¦‚æœç»™å®Œå…¨æ²¡æœ‰å¡é¡¿çš„APPæ‰“åˆ†100çš„è¯ï¼Œå¯¹äºå¤§å‚çš„APPæœ¬æ¥å°±æœ‰90åˆ†ï¼Œè¿½æ±‚çš„æ˜¯å¦‚ä½•å°†åˆ†æ•°æåˆ°95ï¼Œ98ï¼Œ99ï¼Œç”šè‡³100ï¼Œé‚µæ–‡è€å¸ˆæ‰€è®²ä¸»è¦ä¹Ÿæ˜¯é’ˆå¯¹è¿™å—ï¼›ä½†å¯¹äºå¾ˆå¤šæƒ³æˆ‘è¿™æ ·çš„å°å…¬å¸å¼€å‘è€…æ¥è¯´ï¼Œå—äººåŠ›ç‰©åŠ›æ—¶é—´æ‰€é™ï¼Œæƒ³åšåˆ°çš„å…¶å®æ˜¯å…ˆè¾¾åˆ°90åˆ†ï¼Œè€Œè¿™å—ä¸“æ æ¶‰åŠçš„æœ‰é™ï¼Œå¯¹äºè·Ÿæˆ‘ç±»ä¼¼çš„å—ä¼—ä¸å¤Ÿå‹å¥½ã€‚","like_count":8,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432822,"discussion_content":"å…¶å®ä¸æ˜¯ï¼Œè¿™ä¸ªä¸“æ æˆ‘æ›´å…³æ³¨çš„æ˜¯äººçš„æˆé•¿ï¼Œè€Œä¸æ˜¯å…·ä½“åº”ç”¨åˆ°å“ªé‡Œã€‚\n\nå½“ç„¶å¯ä»¥æŠŠçŸ¥è¯†è½¬åŒ–åº”ç”¨åˆ°å·¥ä½œä¸­æ•ˆæœä¼šæ›´åŠ å¥½","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1544836669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014289,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7a/11/abb7bfe3.jpg","nickname":"äº®å‡º","note":"","ucode":"A7673283D03656","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302306,"discussion_content":"æˆ‘ä¹Ÿæ˜¯å°å…¬å¸çš„ï¼Œè§‰å¾—å¾ˆå¥½å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598876279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98914,"user_name":"é»„åº­æ´—å‡¡æµŠ","can_delete":false,"product_type":"c1","uid":1239157,"ip_address":"","ucode":"75835DB58EAF18","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/5gNyWibZIFE8OAr5IIdBiccNIhEcdhfxYVib87IxD6fwBibdWxfEu95kicavZpkIfwctgataw0aHcqHCz7oehaaCOGQ/132","comment_is_top":false,"comment_ctime":1559115888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27328919664","product_id":100021101,"comment_content":"å°±å¼€ç¯‡å‰ä¸¤ç« çœ‹æ‡‚äº†  ä¹‹åçœ‹åˆ°ç°åœ¨ä¸€è„¸æ‡µé€¼  æˆ‘è¿˜æ˜¯æ—©ç‚¹è½¬è¡Œå§","like_count":7},{"had_liked":false,"id":72812,"user_name":"é›ªäºº","can_delete":false,"product_type":"c1","uid":1257781,"ip_address":"","ucode":"55B39082C5D1F0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ABjAPveWxOuBs3ibbCaBicX7OSibic3prycYG9vOicGHMEv8Vws5o3epykBSFHkbysnaKeMqQaJufINNUncGhmAEomg/132","comment_is_top":false,"comment_ctime":1551743006,"is_pvip":false,"replies":[{"id":"28203","content":"çœ‹æºç è¿˜æ˜¯éœ€è¦å¸¦ç€ç›®çš„å»çœ‹ï¼Œä¾‹å¦‚æ¸²æŸ“ç›¸å…³ï¼Œç±»åŠ è½½æµç¨‹ï¼Œä¸è¦æ¼«æ— ç›®çš„çš„å»çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1552917664,"ip_address":"","comment_id":72812,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27321546782","product_id":100021101,"comment_content":"è€å¸ˆï¼Œçœ‹äº†æ‚¨è¿™äº›å†…å®¹ï¼Œå¯¹æˆ‘çš„ç¬¬ä¸€æ„Ÿè§‰æ˜¯è¦å¯¹æºç å¾ˆç†Ÿæ‚‰ï¼Œé‚£æ‚¨å¯¹å­¦ä¹ æºç æœ‰ä»€ä¹ˆå»ºè®®å—ï¼Œï¼ˆçœ‹çš„æ™šäº†ï¼Œä¸çŸ¥é“ç°åœ¨è¯„è®ºè¿˜ä¼šä¸ä¼šå›ï¼‰","like_count":6,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441765,"discussion_content":"çœ‹æºç è¿˜æ˜¯éœ€è¦å¸¦ç€ç›®çš„å»çœ‹ï¼Œä¾‹å¦‚æ¸²æŸ“ç›¸å…³ï¼Œç±»åŠ è½½æµç¨‹ï¼Œä¸è¦æ¼«æ— ç›®çš„çš„å»çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552917664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49698,"user_name":"ä¸œæ–¹","can_delete":false,"product_type":"c1","uid":1329945,"ip_address":"","ucode":"50FDAA2D95170C","user_header":"https://static001.geekbang.org/account/avatar/00/14/4b/19/6f037647.jpg","comment_is_top":false,"comment_ctime":1544753342,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18724622526","product_id":100021101,"comment_content":"ç»™å¤§å®¶æ¨èä¸€ä¸ªæ–¹æ³•ï¼Œè§£æTraceviewç”Ÿæˆçš„traceæ–‡ä»¶ï¼Œå³å¯çŸ¥é“è¿™ä¸ªé˜¶æ®µæ‰€æœ‰è¿è¡Œçš„å‡½æ•°ï¼Œåºåˆ—åŒ–ä¸€ä¸‹ï¼Œå°±èƒ½ç”Ÿæˆéœ€è¦æ’æ¡©çš„ç™½åå•åˆ—è¡¨ã€‚","like_count":4},{"had_liked":false,"id":49518,"user_name":"x-ray","can_delete":false,"product_type":"c1","uid":1331247,"ip_address":"","ucode":"75E3E3CEB38F03","user_header":"https://static001.geekbang.org/account/avatar/00/14/50/2f/afd9c67c.jpg","comment_is_top":false,"comment_ctime":1544704109,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18724573293","product_id":100021101,"comment_content":"ä½œè€…æ‚¨å¥½ï¼Œæˆ‘ä»¬åº”ç”¨çš„å¾ˆå¤šç”¨æˆ·ï¼Œandroidç³»ç»Ÿéƒ½æ˜¯4.4ç‰ˆæœ¬çš„ï¼Œå› ä¸ºåˆ†åŒ…dexä¼˜åŒ–çš„åŸå› ,å¯¼è‡´ç¬¬ä¸€æ¬¡å®‰è£…æˆ–è€…ç‰ˆæœ¬å‡çº§æ—¶å¯åŠ¨çš„æ—¶é—´éå¸¸çš„é•¿ï¼Œæƒ³é—®é—®æ‚¨æœ‰ä»€ä¹ˆå¥½çš„ä¼˜åŒ–æªæ–½ï¼Œè°¢è°¢","like_count":4,"discussions":[{"author":{"id":1466345,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5f/e9/41b6b116.jpg","nickname":"Geek_258277","note":"","ucode":"0B74F5CA3E37E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":83975,"discussion_content":"æˆ‘ä»¬éœ€è¦äº†ç›¸åŒçš„é—®é¢˜ï¼Œå¯ä»¥åŠ ä¸ªQQèŠèŠå—ï¼Ÿ991961792","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576477241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1328354,"avatar":"https://static001.geekbang.org/account/avatar/00/14/44/e2/763526e9.jpg","nickname":"ç¨‹æ™“æ“˜","note":"","ucode":"96986D5AE2B96C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":73987,"discussion_content":"è¿™ä¸ªå°å“¥å“¥ï¼Œæˆ‘æ˜¯ä¸æ˜¯è®¤è¯†å‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575620449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87352,"user_name":"å°æ´","can_delete":false,"product_type":"c1","uid":1333038,"ip_address":"","ucode":"DA1A072D299C28","user_header":"https://static001.geekbang.org/account/avatar/00/14/57/2e/0c85eecd.jpg","comment_is_top":false,"comment_ctime":1555574678,"is_pvip":false,"replies":[{"id":"61989","content":"åˆæœŸçš„æ—¶å€™æˆ‘ä»¬ä¸å»ºè®®ä¸€ä¸‹å­é“ºçš„å¤ªå¼€ï¼Œä¸€æ­¥ä¸€æ­¥æ¥å¹¶ä¸”è¦çœŸæ­£çš„å‘ç°ç°å®çš„é—®é¢˜ã€‚<br><br>å¯ä»¥å…ˆä»å¡é¡¿å’ŒANRçš„æ•è·å…ˆå¼€å§‹åšï¼Œå¯¹å¡é¡¿å †æ ˆåšèšåˆæ’åºã€‚å¯åŠ¨çš„è¯ä¸€èˆ¬åªæ˜¯ä¸€ä¸ªç»Ÿè®¡æŒ‡æ ‡ï¼Œæˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå¯åŠ¨æ‹†æˆå¤šä¸ªæ­¥éª¤ä½œä¸ºç›‘æ§","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1576674071,"ip_address":"","comment_id":87352,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14440476566","product_id":100021101,"comment_content":"è¯·é—®ä¸‹ï¼Œç›®å‰æœ‰ä¸ªéœ€æ±‚æ˜¯å¯¹å¡é¡¿å’Œå¯åŠ¨è€—æ—¶åšæ€§èƒ½æŒ‡æ ‡çº¿ä¸Šé¢„è­¦ï¼Œå¯¹äº activityã€fragmentçš„ç”Ÿå‘½å‘¨æœŸå¯åŠ¨è€—æ—¶çš„ç›‘æ§æ•°æ®ï¼Œè¿˜æœ‰ä¸»çº¿ç¨‹å¡é¡¿å †æ ˆçš„æ•°æ®ï¼Œåº”è¯¥æŒ‰ä»€ä¹ˆçš„ç»´åº¦å»ç»Ÿè®¡æ¯”è¾ƒåˆç†å‘¢","like_count":3,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447412,"discussion_content":"åˆæœŸçš„æ—¶å€™æˆ‘ä»¬ä¸å»ºè®®ä¸€ä¸‹å­é“ºçš„å¤ªå¼€ï¼Œä¸€æ­¥ä¸€æ­¥æ¥å¹¶ä¸”è¦çœŸæ­£çš„å‘ç°ç°å®çš„é—®é¢˜ã€‚\n\nå¯ä»¥å…ˆä»å¡é¡¿å’ŒANRçš„æ•è·å…ˆå¼€å§‹åšï¼Œå¯¹å¡é¡¿å †æ ˆåšèšåˆæ’åºã€‚å¯åŠ¨çš„è¯ä¸€èˆ¬åªæ˜¯ä¸€ä¸ªç»Ÿè®¡æŒ‡æ ‡ï¼Œæˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå¯åŠ¨æ‹†æˆå¤šä¸ªæ­¥éª¤ä½œä¸ºç›‘æ§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576674071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176456,"user_name":"Jerryé“¶é“¶","can_delete":false,"product_type":"c1","uid":1008404,"ip_address":"","ucode":"80DA1172A2360A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg","comment_is_top":false,"comment_ctime":1581063554,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10170998146","product_id":100021101,"comment_content":"è€å¸ˆå¥½ï¼<br>æ–‡ä¸­æåˆ°ï¼Œå¡é¡¿ç›‘æ§ä¸‰å¤§ç±»æ–¹æ³•ï¼š<br>1ã€åŸºäºAndroidç³»ç»Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—æœºåˆ¶<br>     a)  é€šè¿‡æ›¿æ¢ Looper çš„ Printer å®ç°<br>     b)  é€šè¿‡ä¸€ä¸ªç›‘æ§çº¿ç¨‹ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆä¾‹å¦‚ï¼š 1 ç§’ï¼‰å‘ä¸»çº¿ç¨‹æ¶ˆæ¯é˜Ÿåˆ—çš„å¤´éƒ¨æ’å…¥ä¸€æ¡ç©ºæ¶ˆæ¯ï¼Œç„¶åç›‘æµ‹ç©ºæ¶ˆæ¯æ˜¯å¦è¢«æ¶ˆè´¹<br><br>2ã€æ’æ¡©<br><br>3ã€Facebook å¼€æºåº“Profiloçš„æ–¹æ¡ˆ<br><br><br>æ–‡ä¸­æœ‰è¿™ä¹ˆä¸€æ®µè¯ï¼šâ€œåŸºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œçº¿ä¸Šåªä¼šç›‘æ§ä¸»çº¿ç¨‹çš„è€—æ—¶ã€‚å¾®ä¿¡çš„ Matrix ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªæ–¹æ¡ˆï¼Œå› ä¸ºåšäº†å¤§é‡çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æœ€ç»ˆå®‰è£…åŒ…ä½“ç§¯åªå¢å¤§ 1ï½2%ï¼Œå¹³å‡å¸§ç‡ä¸‹é™ä¹Ÿåœ¨ 2 å¸§ä»¥å†…ã€‚è™½ç„¶æ’æ¡©æ–¹æ¡ˆå¯¹æ€§èƒ½çš„å½±å“æ€»ä½“è¿˜å¯ä»¥æ¥å—ï¼Œä½†åªä¼šåœ¨ç°åº¦åŒ…ä½¿ç”¨ã€‚â€œ<br><br>è¿™æ®µè¯çš„æ„æ€ï¼Œå¾®ä¿¡ç”¨çš„æ˜¯ç¬¬ä¸€ç§æ–¹æ¡ˆä¸­bæ–¹æ¡ˆå—ï¼Ÿ<br><br>å¸Œæœ›è€å¸ˆè§£ç­”ï¼<br><br>","like_count":2,"discussions":[{"author":{"id":1162010,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bb/1a/abdba1a4.jpg","nickname":"å®è´ä¹‹å®¶","note":"","ucode":"65E3A102B42BE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342843,"discussion_content":"æ’æ¡©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610847474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89193,"user_name":"eyeandroid","can_delete":false,"product_type":"c1","uid":1136395,"ip_address":"","ucode":"F6BC4961628A87","user_header":"https://static001.geekbang.org/account/avatar/00/11/57/0b/8b2465d6.jpg","comment_is_top":false,"comment_ctime":1556102348,"is_pvip":false,"replies":[{"id":"61997","content":"å…¶å®ä¿¡æ¯éƒ½æ˜¯ä¸€æ ·çš„ï¼Œhookçš„ä½œç”¨æ˜¯å¯ä»¥ç”¨åˆ°çº¿ä¸Šã€‚ä½†æ˜¯ä¸€èˆ¬ä¼šè¿‡æ»¤æ‰ä¸€äº›ä¿¡æ¯ï¼Œåªä¸ŠæŠ¥æœ€æ„Ÿå…´è¶£çš„éƒ¨åˆ†","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1576674795,"ip_address":"","comment_id":89193,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10146036940","product_id":100021101,"comment_content":"è¯·æ•™ä¸‹è€å¸ˆï¼ŒhookæŠ“åˆ°çš„systraceé‡Œé¢æœ‰å…¶å®ƒè¿›ç¨‹çš„ä¿¡æ¯å—ï¼Œè·Ÿpython systrace.pyæŠ“åˆ°çš„å†…å®¹æœ‰ä»€ä¹ˆå·®åˆ«","like_count":2,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448048,"discussion_content":"å…¶å®ä¿¡æ¯éƒ½æ˜¯ä¸€æ ·çš„ï¼Œhookçš„ä½œç”¨æ˜¯å¯ä»¥ç”¨åˆ°çº¿ä¸Šã€‚ä½†æ˜¯ä¸€èˆ¬ä¼šè¿‡æ»¤æ‰ä¸€äº›ä¿¡æ¯ï¼Œåªä¸ŠæŠ¥æœ€æ„Ÿå…´è¶£çš„éƒ¨åˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576674795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70271,"user_name":"æ–‘é©¬çº¿","can_delete":false,"product_type":"c1","uid":1184113,"ip_address":"","ucode":"CEF0E141F2645C","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/71/da8a6544.jpg","comment_is_top":false,"comment_ctime":1551062053,"is_pvip":false,"replies":[{"id":"25087","content":"æ¯ä¸€å¸§çš„æ—¶é—´æ˜¯16.6msï¼Œçœ‹ä½ ä»¬çš„å¿è€ç¨‹åº¦ã€‚ä¸è¿‡å‰æœŸå¯ä»¥æŠŠè¿™ä¸ªæ—¶é—´æ”¾å¤§ä¸€äº›ï¼Œä¾‹å¦‚ä¸¤ç§’ï¼Œä¸‰ç§’ã€‚å› ä¸ºå¦‚æœé—´éš”å¤ªå°ï¼Œå‰æœŸä¼šæœ‰éå¸¸å¤šæŠ¥å‡ºæ¥ï¼Œè¿˜æ˜¯å…ˆè§£å†³æ¯”è¾ƒä¸¥é‡çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1551069788,"ip_address":"","comment_id":70271,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10140996645","product_id":100021101,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ€å­¦ä¹ äº†ä½ çš„ä¸“æ ï¼Œå‡†å¤‡ä¼˜åŒ–ä¸€ä¸‹é¡¹ç›®ï¼Œç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹å¼€æºå·¥å…·æ£€æµ‹äº†ä¸€ä¸‹ï¼Œå‘ç°é¡¹ç›®æœ‰å¤§é‡çš„â€œä¸»çº¿ç¨‹é˜»å¡è¶…è¿‡70msâ€ï¼Œè¯·é—®ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå¤šä¹…æ‰ç®—è€—æ—¶ï¼Œè¯¥å¦‚ä½•å®šä¹‰ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440535,"discussion_content":"æ¯ä¸€å¸§çš„æ—¶é—´æ˜¯16.6msï¼Œçœ‹ä½ ä»¬çš„å¿è€ç¨‹åº¦ã€‚ä¸è¿‡å‰æœŸå¯ä»¥æŠŠè¿™ä¸ªæ—¶é—´æ”¾å¤§ä¸€äº›ï¼Œä¾‹å¦‚ä¸¤ç§’ï¼Œä¸‰ç§’ã€‚å› ä¸ºå¦‚æœé—´éš”å¤ªå°ï¼Œå‰æœŸä¼šæœ‰éå¸¸å¤šæŠ¥å‡ºæ¥ï¼Œè¿˜æ˜¯å…ˆè§£å†³æ¯”è¾ƒä¸¥é‡çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551069788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49539,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1544709405,"is_pvip":false,"replies":[{"id":"17818","content":"nanoscope æ˜¯ uber å¼€å‘çš„ä¸€å¥— Low overhead trace å·¥å…· https:&#47;&#47;github.com&#47;uber&#47;nanoscope","user_name":"ä½œè€…å›å¤","user_name_real":"å­™é¹é£","uid":"1171070","ctime":1544719237,"ip_address":"","comment_id":49539,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10134643997","product_id":100021101,"comment_content":"Nanoscope æ˜¯ä»€ä¹ˆ æ–¹ä¾¿è€å¸ˆè¯´ä¸‹å—","like_count":2,"discussions":[{"author":{"id":1171070,"avatar":"https://static001.geekbang.org/account/avatar/00/11/de/7e/5c2b1efe.jpg","nickname":"å­™é¹é£","note":"","ucode":"18ADF5C2B78938","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432654,"discussion_content":"nanoscope æ˜¯ uber å¼€å‘çš„ä¸€å¥— Low overhead trace å·¥å…· https://github.com/uber/nanoscope","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544719237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273107,"user_name":"è®¸å…†","can_delete":false,"product_type":"c1","uid":1886159,"ip_address":"","ucode":"2DD8E516C817BD","user_header":"https://static001.geekbang.org/account/avatar/00/1c/c7/cf/35eb42d6.jpg","comment_is_top":false,"comment_ctime":1610441812,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5905409108","product_id":100021101,"comment_content":"é‚µæ–‡è€å¸ˆçŸ¥è¯†é¢çš„å¹¿åº¦å’Œæ·±åº¦çœŸæ˜¯ä»¤äººçª’æ¯â€¦â€¦","like_count":2},{"had_liked":false,"id":176917,"user_name":"Jerryé“¶é“¶","can_delete":false,"product_type":"c1","uid":1008404,"ip_address":"","ucode":"80DA1172A2360A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg","comment_is_top":false,"comment_ctime":1581223053,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5876190349","product_id":100021101,"comment_content":"çœ‹åˆ°Matrixåº“ï¼ŒTracerCanaryæ¨¡å—ä¸­ï¼Œè¿™æ ·ä¸€æ®µæ ¸å¿ƒä»£ç ï¼š<br>class LooperPrinter implements Printer {<br>        public Printer origin;<br>        boolean isHasChecked = false;<br>        boolean isValid = false;<br><br>        LooperPrinter(Printer printer) {<br>            this.origin = printer;<br>        }<br><br>        @Override<br>        public void println(String x) {<br>            if (null != origin) {<br>                origin.println(x);<br>                if (origin == this) {<br>                    throw new RuntimeException(TAG + &quot; origin == this&quot;);<br>                }<br>            }<br><br>            if (!isHasChecked) {<br>                isValid = x.charAt(0) == &#39;&gt;&#39; || x.charAt(0) == &#39;&lt;&#39;;<br>                isHasChecked = true;<br>                if (!isValid) {<br>                    MatrixLog.e(TAG, &quot;[println] Printer is inValid! x:%s&quot;, x);<br>                }<br>            }<br><br>            if (isValid) {<br>                dispatch(x.charAt(0) == &#39;&gt;&#39;, x);<br>            }<br><br>        }<br>    }","like_count":1},{"had_liked":false,"id":95741,"user_name":"VK","can_delete":false,"product_type":"c1","uid":1437676,"ip_address":"","ucode":"02371E6A28AF2C","user_header":"https://static001.geekbang.org/account/avatar/00/15/ef/ec/c2a13f01.jpg","comment_is_top":false,"comment_ctime":1558159611,"is_pvip":false,"replies":[{"id":"62016","content":"ä¸€èˆ¬éƒ½æ˜¯å…¨å±€ç›‘æ§çš„å§ï¼Œç±»ä¼¼ANRä¸€æ ·","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1576676645,"ip_address":"","comment_id":95741,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5853126907","product_id":100021101,"comment_content":"ç»æ–‡è€å¸ˆï¼Œæƒ³é—®ä¸‹å¡é¡¿ä¿¡æ¯ç›‘æ§ä¸ŠæŠ¥ï¼Œæœ‰ä»€ä¹ˆç­–ç•¥åˆ¤æ–­å—ï¼Œå“ªäº›æ–¹æ³•å‡½æ•°éœ€è¦ç›‘æ§ï¼Œå“ªäº›ä¸éœ€è¦ç›‘æ§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450581,"discussion_content":"ä¸€èˆ¬éƒ½æ˜¯å…¨å±€ç›‘æ§çš„å§ï¼Œç±»ä¼¼ANRä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576676645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58765,"user_name":"å†¬","can_delete":false,"product_type":"c1","uid":1331575,"ip_address":"","ucode":"8CECE26E1E89A8","user_header":"https://static001.geekbang.org/account/avatar/00/14/51/77/b7f397ea.jpg","comment_is_top":false,"comment_ctime":1547189813,"is_pvip":false,"replies":[{"id":"22047","content":"æˆ‘ä»¬ä¼šæŠŠç›‘æ§æ¶ˆæ¯æ’å…¥åˆ°messageçš„å¤´éƒ¨ï¼Œå½“ç„¶ä¹Ÿæ˜¯æœ‰å¯èƒ½ä¼šå‡ºç°è¯¯æŠ¥ï¼Œä½†æ˜¯ä»å¤§æ•°æ®æ¥è¯´é—®é¢˜ä¸å¤§","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1548042037,"ip_address":"","comment_id":58765,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842157109","product_id":100021101,"comment_content":"æœ‰ä¸ªé—®é¢˜è¯·æ•™  ç”¨empty message å»æ£€æŸ¥å¡é¡¿ ï¼Œæ¯”å¦‚1s æ²¡æ¶ˆè´¹ ï¼Œå°±èƒ½è¯´message å¡é¡¿1s å— ï¼Ÿ  å¦‚æœç©ºæ¶ˆæ¯å‰è¾¹æœ‰å‡ ä¸ªæ¶ˆæ¯  æ¯”å¦‚3ä¸ª ï¼Œç°åœ¨æ­£åœ¨æ‰§è¡Œç¬¬ä¸‰ä¸ª æˆ‘è§‰å¾—ä¹Ÿæ­£å¸¸å•Š ä¸èƒ½è¯´æ˜å¡é¡¿å•Š","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436203,"discussion_content":"æˆ‘ä»¬ä¼šæŠŠç›‘æ§æ¶ˆæ¯æ’å…¥åˆ°messageçš„å¤´éƒ¨ï¼Œå½“ç„¶ä¹Ÿæ˜¯æœ‰å¯èƒ½ä¼šå‡ºç°è¯¯æŠ¥ï¼Œä½†æ˜¯ä»å¤§æ•°æ®æ¥è¯´é—®é¢˜ä¸å¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548042037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49377,"user_name":"Kenny","can_delete":false,"product_type":"c1","uid":1234061,"ip_address":"","ucode":"E57D67DCE27967","user_header":"https://static001.geekbang.org/account/avatar/00/12/d4/8d/a3fd8957.jpg","comment_is_top":false,"comment_ctime":1544674483,"is_pvip":false,"replies":[{"id":"17927","content":"äº‹ä»¶æ˜¯æœ€è¿‘åŒ¹é…<br><br>çº¿ç¨‹hooké‚£ä¸ªå¾ˆç®€å•çš„ï¼Œæˆ‘ä¸‹æ¬¡æ”¾åˆ°sampleé‡Œé¢","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1544768823,"ip_address":"","comment_id":49377,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5839641779","product_id":100021101,"comment_content":"å¼ è€å¸ˆï¼Œåˆšè¯•äº†ä½ ç»™çš„Sampleï¼Œplthookå®ç°çš„è‡ªå®šä¹‰ftraceï¼ŒBä¸Eäº‹ä»¶æ—¥å¿—ä¸æˆå¯¹ï¼Ÿè¿™ä¸ªæ€ä¹ˆçœ‹æ¯ä¸€ä¸ªäº‹ä»¶çš„è€—æ—¶ï¼Ÿæ¯ä¸ªBæ‰¾æœ€è¿‘çš„Eä½œä¸ºæˆªæ­¢ç®—æ—¶é—´å—ï¼Ÿè¿˜æ˜¯æŒ‰ç…§ä¸€ä¸ªBå¯¹åº”ä¸€ä¸ªEå»ç®—ï¼Ÿè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯è¯¾ç¨‹æåˆ°é€šè¿‡hook thread_createå»ç›‘æ§çº¿ç¨‹ï¼Œè¿™ä¸ªæ˜¯æŒ‡ç›‘æ§åº”ç”¨çš„çº¿ç¨‹å—ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œé‚£ç³»ç»Ÿçš„çº¿ç¨‹æ¯”å¦‚binderï¼Œjitç­‰å¦‚ä½•å»ç›‘æ§ï¼Ÿè¯è¯´è¿™ä¸ªå¼ è€å¸ˆèƒ½æŠŠhook çº¿ç¨‹åˆ›å»ºçš„å®ç°ä¹Ÿæ”¾Sample?","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432598,"discussion_content":"äº‹ä»¶æ˜¯æœ€è¿‘åŒ¹é…\n\nçº¿ç¨‹hooké‚£ä¸ªå¾ˆç®€å•çš„ï¼Œæˆ‘ä¸‹æ¬¡æ”¾åˆ°sampleé‡Œé¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544768823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340637,"user_name":"é»„ä¿ŠèŒ","can_delete":false,"product_type":"c1","uid":2139507,"ip_address":"","ucode":"F18CA2E9D8A42B","user_header":"https://static001.geekbang.org/account/avatar/00/20/a5/73/e5f38f0b.jpg","comment_is_top":false,"comment_ctime":1648983398,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648983398","product_id":100021101,"comment_content":"å¤ªå‰å®³äº†ï¼Œæ„Ÿè°¢å¤§ä½¬ï¼Œä¸æ„§æ˜¯åšæ€§èƒ½ä¼˜åŒ–çš„ã€‚ç­‰ä¿ºä¸šåŠ¡åšå®Œï¼ŒæŠŠè¿™äº›æŠ„ä¸€æŠ„åšåˆ†äº«","like_count":0},{"had_liked":false,"id":339440,"user_name":"VI jolie","can_delete":false,"product_type":"c1","uid":1742621,"ip_address":"","ucode":"1CBC214FFEB546","user_header":"https://static001.geekbang.org/account/avatar/00/1a/97/1d/4bac8dbf.jpg","comment_is_top":false,"comment_ctime":1648104725,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648104725","product_id":100021101,"comment_content":"é—®ä¸‹demoé‡Œé¢ç”¨çš„æ˜¯å“ªä¸ªhookæ¡†æ¶","like_count":0},{"had_liked":false,"id":305584,"user_name":"cupcake","can_delete":false,"product_type":"c1","uid":1335259,"ip_address":"","ucode":"8B4070FFB181C4","user_header":"https://static001.geekbang.org/account/avatar/00/14/5f/db/bd0f7d6b.jpg","comment_is_top":false,"comment_ctime":1628060510,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628060510","product_id":100021101,"comment_content":"asmæ’æ¡©ï¼Œæ€ä¹ˆåšåˆ°è¿‡æ»¤ç®€å•æ–¹æ³•çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":254803,"user_name":"è‘£æ±Ÿé¹","can_delete":false,"product_type":"c1","uid":1187535,"ip_address":"","ucode":"3960E0489A51B4","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/cf/b7f04f87.jpg","comment_is_top":false,"comment_ctime":1603188995,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603188995","product_id":100021101,"comment_content":"æƒ³é—®ä¸€ä¸‹ï¼Œâ€œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬çº¿ä¸Šç›®å‰ä¾ç„¶ä½¿ç”¨åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æ–¹æ³•â€ï¼Œæ˜¯åŸºäºsetMessageLoggingæ–¹æ¡ˆè¿˜æ˜¯åŸºäºç›‘æ§çº¿ç¨‹çš„æ–¹æ¡ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":236577,"user_name":"Shelly","can_delete":false,"product_type":"c1","uid":1961134,"ip_address":"","ucode":"AB82CBB85C64C0","user_header":"https://static001.geekbang.org/account/avatar/00/1d/ec/ae/b4a4ddf4.jpg","comment_is_top":false,"comment_ctime":1595470844,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595470844","product_id":100021101,"comment_content":"åšäº†å‡ å¹´frameworkå¼€å‘ï¼Œæ¶‰åŠåˆ°çš„å¡é¡¿é—®é¢˜å‡ ä¹éƒ½æ˜¯ç³»ç»Ÿç›‘æ§åˆ°çš„å¡é¡¿ï¼Œæœ‰ANRæ—¥å¿—ï¼Œç³»ç»Ÿç›‘æ§ä¸åˆ°ï¼Œæ²¡æœ‰ANRæ—¥å¿—çš„ï¼Œå°±æ— ä»ä¸‹æ‰‹äº†ã€‚<br>è¿™èŠ‚è¯¾ä¹‹å‰ä»æ¥æ²¡æƒ³è¿‡è‡ªå·±å†™ä¸€ä¸ªå¡é¡¿ç›‘æ§å·¥å…·ï¼Œæœç„¶è¿˜æ˜¯è¦å¤šå¬å¤šçœ‹å•Šï¼Œåé¢è¯•è¯•è‡ªå·±å®ç°ã€‚","like_count":1},{"had_liked":false,"id":178377,"user_name":"lbj","can_delete":false,"product_type":"c1","uid":1697899,"ip_address":"","ucode":"C4D6DFAAE164A7","user_header":"https://static001.geekbang.org/account/avatar/00/19/e8/6b/ce264eb0.jpg","comment_is_top":false,"comment_ctime":1581673006,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1581673006","product_id":100021101,"comment_content":"å¤§ä½¬å’¨è¯¢ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥hookAMSä¸­çš„addErrorToDropBoxæ‹¿åˆ°anræ—¥å¿—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223831,"discussion_content":"...ä½ æƒ³ è¿è¡Œæ—¶ hook serverè¿›ç¨‹çš„ä»£ç ï¼Ÿ\nhookåªèƒ½åšåˆ°hookè‡ªèº«è¿›ç¨‹å§ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586257794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178371,"user_name":"ç«¥","can_delete":false,"product_type":"c1","uid":1121270,"ip_address":"","ucode":"CC7B5847FEFC0B","user_header":"https://static001.geekbang.org/account/avatar/00/11/1b/f6/fd6832f2.jpg","comment_is_top":false,"comment_ctime":1581671468,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1581671468","product_id":100021101,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œä»£ç é‡Œçš„ä½¿ç”¨çš„System.loadLibrary(&quot;tracehook&quot;) ï¼Œæˆ‘çœ‹é¡¹ç›®é‡Œæ²¡æœ‰ç”Ÿæˆçš„å¯¹åº”çš„.soæ–‡ä»¶å•Šã€‚","like_count":0,"discussions":[{"author":{"id":1930925,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI4amTIT1RywF0KeCJ88e841spATyx75ntv29UzZ3eB98Yv1fPI1IbZeic3jScp8z4X8GgRBV95ib2g/132","nickname":"Geek_08dbb4","note":"","ucode":"13B424806AB4D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388127,"discussion_content":"ä½ ç¼–è¯‘å°±æœ‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628603609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176621,"user_name":"Jerryé“¶é“¶","can_delete":false,"product_type":"c1","uid":1008404,"ip_address":"","ucode":"80DA1172A2360A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg","comment_is_top":false,"comment_ctime":1581121476,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1581121476","product_id":100021101,"comment_content":"è€å¸ˆï¼Œæˆ‘çŸ¥é“ï¼Œç›‘æ§å¡é¡¿è¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯ï¼šåˆ©ç”¨Choreographer.FrameCallbackç›‘æ§å¡é¡¿ï¼Œè€Œä¸”è¿˜èƒ½è®¡ç®—fpsã€‚è¿™ç§æ–¹æ³•ï¼Œè¦æ±‚Android 4.1(api 16ä»¥åŠä»¥ä¸Šï¼‰ï¼Œæ˜¯å› ä¸ºå¯¹äºç³»ç»Ÿç‰ˆæœ¬æœ‰è¦æ±‚ï¼Œæ‰ä¸æ¨èè¿™ç§æ–¹æ³•å—ï¼Ÿ<br><br>","like_count":0,"discussions":[{"author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223835,"discussion_content":"Choreographer éœ€è¦ç­‰å¾…ç³»ç»Ÿçš„vsyncä¿¡å·çš„ï¼Œä¸»è¦æ˜¯ç»˜åˆ¶ç›¸å…³ï¼Œå’Œå¡é¡¿å•¥å…³ç³»ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586257917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1008404,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg","nickname":"Jerryé“¶é“¶","note":"","ucode":"80DA1172A2360A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":224653,"discussion_content":"å¯ä»¥ç ”ç©¶ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586321863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":223835,"ip_address":""},"score":224653,"extra":""},{"author":{"id":1543588,"avatar":"","nickname":"Geek_1d0e04","note":"","ucode":"7E68360BA1605B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321033,"discussion_content":"å¯ä»¥è®¡ç®—ä¸¤æ¬¡å›è°ƒçš„æ—¶é—´æ¥çœ‹æ˜¯å¦æœ‰ä¸¢å¸§ç°è±¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604535917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":223835,"ip_address":""},"score":321033,"extra":""}]}]},{"had_liked":false,"id":135400,"user_name":"è–¯æ¡","can_delete":false,"product_type":"c1","uid":1334064,"ip_address":"","ucode":"08E591FC62563A","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/30/83104f0f.jpg","comment_is_top":false,"comment_ctime":1569146360,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569146360","product_id":100021101,"comment_content":"å¡é¡¿ç›‘æ§ï¼š1.å¸§ç‡    2.Activity,Fragment è¿™äº›ç±»çš„onCreateç­‰ç›¸å…³çš„å¯åŠ¨å®Œæˆç»“æŸæ—¶é—´  3.çº¿ç¨‹æ•°ç›®ã€‚<br>å¡é¡¿ä¼˜åŒ– çº¿ç¨‹æ•°ç›®é‡åˆ°è¿‡ï¼šä¸€ä¸ªé¡¹ç›®ä¸­å¯åŠ¨äº†å‡ ç™¾ä¸ªçº¿ç¨‹ï¼Œå¤§å¤šæ•°ç¡çœ ã€‚å°‘æ•°è¿è¡Œçš„thread å¯ä»¥é€šè¿‡profileæ‰¾å‡ºæ¥ã€‚ç”¨çº¿ç¨‹æ± ä»£æ›¿ä¼ ç»Ÿçš„çº¿ç¨‹è¿è¡Œã€‚ã€‚ä»Šå¤©ä¸»è¦æ˜¯å­¦ä¹ åˆ°äº† ï¼Œå¸§ç‡ï¼Œæ²¡æƒ³åˆ°å¤§å‚è¿˜å¯ä»¥è¿™æ ·ç©ã€‚ã€‚ã€‚éš¾æ€ªæˆ‘å¼€å‘çš„app æ€»æ˜¯æ²¡å¾—å¾®ä¿¡æµç•…ï¼Œå¹³æ»‘ï¼ŒåŸæ¥é—®é¢˜åœ¨è¿™ï¼Œå“ˆå“ˆå“ˆå“ˆ","like_count":0},{"had_liked":false,"id":129733,"user_name":"ä¸€ç‰‡ç¾½æ¯›","can_delete":false,"product_type":"c1","uid":1357749,"ip_address":"","ucode":"C6B6AA0294219E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTISkR0XDibLuwwl6PibTpQmDrnV7feN1YibqvrnpCE8fVk5cPPuUUxqvW4IZicrmTKXueTW6LpSNrxt4w/132","comment_is_top":false,"comment_ctime":1567233515,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567233515","product_id":100021101,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œgithubçš„é‚£ä¸ªæ—¥å¿—åº”è¯¥æ€ä¹ˆåˆ†æ","like_count":0},{"had_liked":false,"id":123246,"user_name":"é»‘è‰²æ¯›è¡£","can_delete":false,"product_type":"c1","uid":1135912,"ip_address":"","ucode":"FF7E235F91BA5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/55/28/31b0cf2f.jpg","comment_is_top":false,"comment_ctime":1565652659,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565652659","product_id":100021101,"comment_content":"æ•´ä¸ªè¯¾ç¨‹æˆ‘å­¦ä¹ çš„æ„Ÿå—æ˜¯åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œä¼˜åŒ–å’Œç›‘æ§ï¼Œä¸¤ä¸ªå†…å®¹æ˜¯ç©¿æ’åœ¨ä¸€èµ·çš„ï¼Œéœ€è¦è‡ªå·±æŠŠå®ƒä»¬æ‰¾å‡ºæ¥å½’ç±»ã€‚<br>è€Œä¸”è®¾è®¡çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼ŒLinux è™šæ‹Ÿæœºï¼Œè¿è¡Œæ—¶â€¦â€¦ç´¯è§‰ä¸çˆ±ï¼Œæˆ‘æƒ³å»ç§èœâ€¦â€¦","like_count":0},{"had_liked":false,"id":116105,"user_name":"EchoSomeTH","can_delete":false,"product_type":"c1","uid":1602634,"ip_address":"","ucode":"E73F13BF09695F","user_header":"https://static001.geekbang.org/account/avatar/00/18/74/4a/2dd9d62a.jpg","comment_is_top":false,"comment_ctime":1563786466,"is_pvip":false,"replies":[{"id":"62057","content":"objdumpå‘½ä»¤åœ¨ndké‡Œé¢","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1576680336,"ip_address":"","comment_id":116105,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563786466","product_id":100021101,"comment_content":"adb shell objdump &#47;system&#47;lib&#47;libutils.so æç¤ºobjdump not foundï¼Œå’‹å¯¼å‡ºæ¥ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459386,"discussion_content":"objdumpå‘½ä»¤åœ¨ndké‡Œé¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576680336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91021,"user_name":"YIğŸ","can_delete":false,"product_type":"c1","uid":1004429,"ip_address":"","ucode":"EC473E92A07373","user_header":"https://static001.geekbang.org/account/avatar/00/0f/53/8d/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1556800070,"is_pvip":false,"replies":[{"id":"62005","content":"Facebookçš„é¡¹ç›®æ–‡æ¡£è¿˜æ˜¯ç›¸å¯¹å°‘ä¸€äº›ï¼Œæˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯çœ‹ç€æºç æ¥æ…¢æ…¢è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1576675667,"ip_address":"","comment_id":91021,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556800070","product_id":100021101,"comment_content":"profiloæ˜¯æ€ä¹ˆç”¨èµ·æ¥çš„?åˆ›å»ºprofiloæ—¶å€™éƒ½è¦æŠ¥é”™","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448767,"discussion_content":"Facebookçš„é¡¹ç›®æ–‡æ¡£è¿˜æ˜¯ç›¸å¯¹å°‘ä¸€äº›ï¼Œæˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯çœ‹ç€æºç æ¥æ…¢æ…¢è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576675667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76778,"user_name":"æœ”é‡è¥¿éª‘","can_delete":false,"product_type":"c1","uid":1183901,"ip_address":"","ucode":"476DBE245E0BE3","user_header":"https://static001.geekbang.org/account/avatar/00/12/10/9d/c87edce1.jpg","comment_is_top":false,"comment_ctime":1552707313,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552707313","product_id":100021101,"comment_content":"ç‰›é€¼ï¼","like_count":0},{"had_liked":false,"id":63889,"user_name":"é‡‘å¤§åœ£","can_delete":false,"product_type":"c1","uid":1281346,"ip_address":"","ucode":"C02A784CDA4CC8","user_header":"https://static001.geekbang.org/account/avatar/00/13/8d/42/bee65f33.jpg","comment_is_top":false,"comment_ctime":1548578269,"is_pvip":false,"replies":[{"id":"23110","content":"åé¢ä¼šæœ‰ä¸“é—¨çš„ä¸€ä¸ªä¸“é¢˜æ¥è®²","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1549102706,"ip_address":"","comment_id":63889,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548578269","product_id":100021101,"comment_content":"å¼ è€å¸ˆï¼Œæ–‡ç« é‡Œé¢æåˆ°çš„inline hookæŠ€æœ¯å¯ä»¥å¤šä»‹ç»ä¸€ç‚¹å—ï¼Ÿè·Ÿå‰é¢æ–‡ç« æåˆ°çš„PLT hookæ˜¯ä¸€æ ·çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437750,"discussion_content":"åé¢ä¼šæœ‰ä¸“é—¨çš„ä¸€ä¸ªä¸“é¢˜æ¥è®²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549102706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":53785,"user_name":"Juinn","can_delete":false,"product_type":"c1","uid":1334226,"ip_address":"","ucode":"257796850A6CD9","user_header":"https://static001.geekbang.org/account/avatar/00/14/5b/d2/34a8c79c.jpg","comment_is_top":false,"comment_ctime":1545724653,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545724653","product_id":100021101,"comment_content":"è¿™èŠ‚è¯¾ï¼Œè®²çš„å°±æ˜¯çœŸæ­£æŠ€æœ¯å®æˆ˜äº†ï¼Œæœæ–­æ–­å±‚ï¼Œå“ˆå“ˆ","like_count":0},{"had_liked":false,"id":53426,"user_name":"CHY","can_delete":false,"product_type":"c1","uid":1234426,"ip_address":"","ucode":"C307A86133B19D","user_header":"https://static001.geekbang.org/account/avatar/00/12/d5/fa/b1cb4626.jpg","comment_is_top":false,"comment_ctime":1545641880,"is_pvip":false,"replies":[{"id":"19344","content":"å¯ä»¥çœ‹çœ‹å‰é¢è¯´åˆ°é‚£ä¸ªfacebook  device-of-yearçš„å¼€æºåº“","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1545645196,"ip_address":"","comment_id":53426,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545641880","product_id":100021101,"comment_content":"é€šè¿‡ proc&#47;cpuinfo å¥½åƒæ‹¿ä¸åˆ° cpu æ ¸æ•°ï¼Œåªèƒ½è·å–åˆ°æ‰“å¼€äº†çš„ cpu æ ¸å¿ƒä¿¡æ¯ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434135,"discussion_content":"å¯ä»¥çœ‹çœ‹å‰é¢è¯´åˆ°é‚£ä¸ªfacebook  device-of-yearçš„å¼€æºåº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545645196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52454,"user_name":"æ›¾ç»ç˜¦è¿‡","can_delete":false,"product_type":"c1","uid":1240106,"ip_address":"","ucode":"57C32575A1C1FD","user_header":"https://static001.geekbang.org/account/avatar/00/12/ec/2a/b11d5ad8.jpg","comment_is_top":false,"comment_ctime":1545385232,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545385232","product_id":100021101,"comment_content":"åŸºæœ¬çœ‹ä¸å¤ªæ‡‚ï¼Œå‡†å¤‡å¥½å¥½æ³¡æ³¡simple å’Œ è¡¥å……ä¸€äº›åº•å±‚çŸ¥è¯†","like_count":0},{"had_liked":false,"id":52178,"user_name":"Sgx","can_delete":false,"product_type":"c1","uid":1328729,"ip_address":"","ucode":"6672D939E174FE","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/59/7c14e780.jpg","comment_is_top":false,"comment_ctime":1545327580,"is_pvip":false,"replies":[{"id":"18982","content":"å°±æ˜¯ç±»ä¼¼çƒ­ä¿®å¤ï¼Œä¿æ´»ï¼Œä»¥åŠå„ç§åå°„è°ƒç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1545356748,"ip_address":"","comment_id":52178,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1545327580","product_id":100021101,"comment_content":"ç»æ–‡å“¥ä½ å¥½ï¼Œè¯·é—®æ¯æ¬¡è¯¾ç¨‹ä¸­æ‰€è¯´çš„é»‘ç§‘æŠ€æ˜¯å•¥æ„æ€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433770,"discussion_content":"å°±æ˜¯ç±»ä¼¼çƒ­ä¿®å¤ï¼Œä¿æ´»ï¼Œä»¥åŠå„ç§åå°„è°ƒç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545356748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50968,"user_name":"å®‹ä¸–é€š","can_delete":false,"product_type":"c1","uid":1245468,"ip_address":"","ucode":"C7AA3F0E6930F3","user_header":"https://static001.geekbang.org/account/avatar/00/13/01/1c/d638d46e.jpg","comment_is_top":false,"comment_ctime":1545094270,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545094270","product_id":100021101,"comment_content":"å¤§å¤§ï¼Œèƒ½è®²ä¸€ä¸‹æ ¹æ®ç«ç„°å›¾çš„å…·ä½“æ¡ˆä¾‹å—ï¼Œæˆ‘ä»¬è¿™äº›å…¥é—¨çº§çœ‹çš„å¾ˆè‰°éš¾å•Š","like_count":0},{"had_liked":false,"id":50682,"user_name":"qh","can_delete":false,"product_type":"c1","uid":1137959,"ip_address":"","ucode":"0C0A3C32B061CE","user_header":"https://static001.geekbang.org/account/avatar/00/11/5d/27/a8fb15bf.jpg","comment_is_top":false,"comment_ctime":1545029303,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545029303","product_id":100021101,"comment_content":"æˆ‘å®æœºvivo nex Android 8.1ä¸Šé¢è¿è¡Œchapter 5çš„ä½œä¸šã€‚è°ƒç”¨systeminfoçš„readprocfileæ–¹æ³•ä¼šæŠ¥æƒé™è¢«æ‹’ç»çš„å¼‚å¸¸ï¼Œä½†æ˜¯åœ¨å…¬å¸rootçš„æ‰‹æœºä¸Šå°±ä¸ä¼šã€‚","like_count":0},{"had_liked":false,"id":50057,"user_name":"è¿›å‡»çš„é±¼å„¿","can_delete":false,"product_type":"c1","uid":1334770,"ip_address":"","ucode":"9B6CF26A8BCA8F","user_header":"https://static001.geekbang.org/account/avatar/00/14/5d/f2/785169e9.jpg","comment_is_top":false,"comment_ctime":1544853444,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544853444","product_id":100021101,"comment_content":"æˆ‘ä¹Ÿæ‰é˜Ÿäº†ï¼Œåœ¨å°å…¬å¸ä¸€ç›´æ²¡æœ‰ç•™æ„æ€§èƒ½ä¼˜åŒ–è¿™ä¸€å—ï¼Œä¸€ç›´æ˜¯ä¸€ä¸ªç›²ç‚¹ï¼Œå¯èƒ½éœ€è¦è¡¥è¡¥æ€§èƒ½ä¼˜åŒ–ç›¸å…³çš„ä¸€äº›åŸºç¡€äº†","like_count":0},{"had_liked":false,"id":49688,"user_name":"æå®¢å­¦å­","can_delete":false,"product_type":"c1","uid":1149510,"ip_address":"","ucode":"40051597564EB7","user_header":"https://static001.geekbang.org/account/avatar/00/11/8a/46/71747b18.jpg","comment_is_top":false,"comment_ctime":1544752692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544752692","product_id":100021101,"comment_content":"ç»æ–‡è€å¸ˆï¼Œæƒ³è¯·æ•™ä¸‹ç›‘æ§åˆ°çš„æ•°æ®çš„å­˜å‚¨å’Œä¸Šä¼ æ–¹æ¡ˆï¼Œè¿˜æœ‰æ€ä¹ˆé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œè¿‡å¤šç›‘æ§æ•°æ®ä¸Šä¼ åˆæ˜¯å¦å¯¹ç”¨æˆ·ä¸å¤ªå‹å¥½","like_count":0},{"had_liked":false,"id":49382,"user_name":"é›¨æ— å°½æ—¶","can_delete":false,"product_type":"c1","uid":1298995,"ip_address":"","ucode":"2BF137791408A7","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLUPzlts4GoyqvmvW8qXicQNBnFlNQGElSmC4DMBAVhu62uOf649xEKaWLYBsd6qDV3090wG7wGn6Q/132","comment_is_top":false,"comment_ctime":1544676581,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544676581","product_id":100021101,"comment_content":"ä½ å¥½ï¼Œç›®å‰é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œä¸»å·¥ç¨‹ä¸­å¼•å…¥äº†å¾ˆå¤šåº“ï¼Œæ¯ä¸ªåº“éƒ½ä½¿ç”¨äº†è‡ªå·±åˆ›å»ºçš„OkhttpClient, éƒ½æœ‰è‡ªå·±çš„Connectionpool,å¯¼è‡´å¾ˆå¤šçº¿ç¨‹æ— æ³•æœ‰æ•ˆç›‘æ§ï¼Œçº¿ç¨‹æ•°è¿‡å¤šå¼•èµ·OOMï¼Œè¿™ç§æƒ…å†µèƒ½é€šè¿‡ä¸€äº›æ–¹æ³•ç›‘æ§çº¿ç¨‹ç”±å“ªé‡Œåˆ›å»ºçš„ä¸ã€‚<br><br>ç›®å‰çœ‹åˆ°Connectpool ä¸­æœ‰thread factory,æ¥å‘½åthread,å¯å¦é€šè¿‡hookè¯¥å¯¹è±¡åŒºåˆ†çº¿ç¨‹åˆ›å»ºæ–¹ã€‚","like_count":0},{"had_liked":false,"id":49336,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1544667962,"is_pvip":false,"replies":[{"id":"17744","content":"è‡ªå·±åº”ç”¨è¿˜æ˜¯ç³»ç»Ÿçš„ï¼Ÿ<br><br>è‡ªå·±åº”ç”¨å¯ä»¥é€šè¿‡&#47;proc&#47;pid&#47; å‡ ä¸ªlinuxæ–‡ä»¶éƒ½å¯ä»¥æ‹¿åˆ°ï¼Œå‰é¢å´©æºƒä¸­ä¹Ÿæœ‰è¯´","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1544671610,"ip_address":"","comment_id":49336,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544667962","product_id":100021101,"comment_content":"æœ‰ä»€ä¹ˆæ–¹æ¡ˆå¯ä»¥ç»Ÿè®¡ç³»ç»Ÿçº¿ç¨‹æ•°å‘¢","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432580,"discussion_content":"è‡ªå·±åº”ç”¨è¿˜æ˜¯ç³»ç»Ÿçš„ï¼Ÿ\n\nè‡ªå·±åº”ç”¨å¯ä»¥é€šè¿‡/proc/pid/ å‡ ä¸ªlinuxæ–‡ä»¶éƒ½å¯ä»¥æ‹¿åˆ°ï¼Œå‰é¢å´©æºƒä¸­ä¹Ÿæœ‰è¯´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544671610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":49313,"user_name":".y","can_delete":false,"product_type":"c1","uid":1340096,"ip_address":"","ucode":"DD2893C0BD5C4B","user_header":"https://static001.geekbang.org/account/avatar/00/14/72/c0/11cf22de.jpg","comment_is_top":false,"comment_ctime":1544664106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544664106","product_id":100021101,"comment_content":"å¼ å“¥ï¼Œæ—©ï¼é—®ä¸€å“ˆï¼Œæ®æˆ‘äº†è§£ï¼Œå¾®ä¿¡æ—©æœŸç‰ˆæœ¬åŸºæœ¬æ¯ä¸ªæ–¹æ³•éƒ½åŠ äº†trace tagï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯ä¸ºäº†å®ç°traceview ++ ï¼Ÿä¸ºä»€ä¹ˆåæœŸåˆä¸ç”¨äº†ï¼Ÿ","like_count":0}]}