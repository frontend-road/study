{"id":647827,"title":"15ï½œæ·±å…¥ä½¿ç”¨LLMChainï¼Œç»™AIè¿ä¸ŠGoogleå’Œè®¡ç®—å™¨","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ–‡æµ©ã€‚</p><p>ä¸Šä¸€è®²é‡Œï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†æ€ä¹ˆé€šè¿‡LangChainè¿™ä¸ªPythonåŒ…ï¼Œé“¾å¼åœ°è°ƒç”¨OpenAIçš„APIã€‚é€šè¿‡é“¾å¼è°ƒç”¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªéœ€è¦è¯¢é—®AIå¤šè½®æ‰èƒ½è§£å†³çš„é—®é¢˜å°è£…èµ·æ¥ï¼ŒæŠŠä¸€ä¸ªé€šè¿‡è‡ªç„¶è¯­è¨€å¤šè½®è°ƒç”¨æ‰èƒ½è§£å†³çš„é—®é¢˜ï¼Œå˜æˆäº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚</p><p>ä¸è¿‡ï¼ŒLangChainèƒ½å¤Ÿå¸®åˆ°æˆ‘ä»¬çš„è¿œä¸æ­¢è¿™ä¸€ç‚¹ã€‚å‰ä¸€é˜µï¼ŒChatGPTå‘å¸ƒäº† <a href=\"https://openai.com/blog/chatgpt-plugins\">Plugins</a> è¿™ä¸ªæ’ä»¶æœºåˆ¶ã€‚é€šè¿‡Pluginsï¼ŒChatGPTå¯ä»¥æµè§ˆæ•´ä¸ªäº’è”ç½‘ï¼Œè¿˜å¯ä»¥æ¥ä¸ŠWolframè¿™æ ·çš„ç§‘å­¦è®¡ç®—å·¥å…·ï¼Œèƒ½å¤Ÿå®ç°å¾ˆå¤šåŸå…ˆå…‰é å¤§è¯­è¨€æ¨¡å‹è§£å†³ä¸å¥½çš„é—®é¢˜ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªåŠŸèƒ½ç›®å‰è¿˜æ˜¯å¤„äºwait listçš„çŠ¶æ€ï¼Œæˆ‘ä¹Ÿè¿˜æ²¡æœ‰æ‹¿åˆ°æƒé™ã€‚</p><p>ä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬é€šè¿‡LangChainä¹Ÿèƒ½å®ç°è¿™äº›ç±»ä¼¼çš„åŠŸèƒ½ã€‚ä»Šå¤©è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°±ç»§ç»­æ·±å…¥æŒ–æ˜ä¸€ä¸‹Langchainï¼Œçœ‹çœ‹å®ƒæ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜ã€‚</p><h2>è§£å†³AIæ•°ç†èƒ½åŠ›çš„éš¾é¢˜</h2><p>å¾ˆå¤šäººå‘ç°ï¼Œè™½ç„¶ChatGPTå›ç­”å„ç§é—®é¢˜çš„æ—¶å€™éƒ½åƒæ¨¡åƒæ ·çš„ï¼Œä½†æ˜¯ä¸€åˆ°è®¡ç®—ä¸‰ä½æ•°ä¹˜æ³•çš„æ—¶å€™å°±éœ²é¦…å„¿äº†ã€‚æ„Ÿè§‰å®ƒåªæ˜¯å¿«é€Ÿä¼°è®¡äº†ä¸€ä¸ªæ•°å­—ï¼Œè€Œä¸æ˜¯çœŸçš„å‡†ç¡®è®¡ç®—äº†ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬è®©OpenAIå¸®æˆ‘ä»¬è®¡ç®—ä¸€ä¸‹ 352 x 493 ç­‰äºå¤šå°‘ï¼Œä½ ä¼šå‘ç°ï¼Œå®ƒç®—å¾—å¤§å·®ä¸å·®ï¼Œä½†è¿˜æ˜¯ç®—é”™äº†ã€‚è¿™å°±å¾ˆå°´å°¬ï¼Œå¦‚æœæˆ‘ä»¬çœŸçš„æƒ³è¦è®©å®ƒæ¥æ‹…ä»»ä¸€ä¸ªå°å­¦æ•°å­¦çš„åŠ©æ•™ï¼Œæ€»æ˜¯ç»™å‡ºé”™è¯¯çš„ç­”æ¡ˆä¹Ÿä¸æ˜¯ä¸ªäº‹å„¿ã€‚</p><!-- [[[read_end]]] --><pre><code class=\"language-python\">import openai, os\n\nopenai.api_key = os.environ.get(\"OPENAI_API_KEY\")\n\nfrom langchain.prompts import PromptTemplate\nfrom langchain.llms import OpenAI\nfrom langchain.chains import LLMChain\n\nllm = OpenAI(model_name=\"text-davinci-003\", max_tokens=2048, temperature=0.5)\nmultiply_prompt = PromptTemplate(template=\"è¯·è®¡ç®—ä¸€ä¸‹{question}æ˜¯å¤šå°‘?\", input_variables=[\"question\"])\nmath_chain = LLMChain(llm=llm, prompt=multiply_prompt, output_key=\"answer\")\nanswer = math_chain.run({\"question\": \"352ä¹˜ä»¥493\"})\nprint(\"OpenAI API è¯´ç­”æ¡ˆæ˜¯:\", answer)\n\npython_answer = 352 * 493\nprint(\"Python è¯´ç­”æ¡ˆæ˜¯:\", python_answer)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-plain\">OpenAI API è¯´ç­”æ¡ˆæ˜¯: \n352 x 493 = 174,336\nPython è¯´ç­”æ¡ˆæ˜¯: 173536\n</code></pre><p><span class=\"reference\">æ³¨ï¼šå¯ä»¥çœ‹åˆ°ï¼ŒOpenAIç»™å‡ºçš„ç»“æœï¼Œç­”æ¡ˆæ˜¯é”™è¯¯çš„ã€‚</span></p><p>ä¸è¿‡ï¼Œæœ‰äººå¾ˆèªæ˜ï¼Œè¯´è™½ç„¶ChatGPTç›´æ¥ç®—è¿™äº›æ•°å­¦é¢˜ä¸è¡Œï¼Œä½†æ˜¯å®ƒä¸æ˜¯ä¼šå†™ä»£ç å—ï¼Ÿæˆ‘ä»¬ç›´æ¥è®©å®ƒå¸®æˆ‘ä»¬å†™ä¸€æ®µåˆ©ç”¨Pythonè®¡ç®—è¿™ä¸ªæ•°å­¦å¼å­çš„ä»£ç ä¸å°±å¥½äº†å—ï¼Ÿçš„ç¡®ï¼Œå¦‚æœä½ è®©å®ƒå†™ä¸€æ®µPythonä»£ç ï¼Œç»™å‡ºçš„ä»£ç æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p><pre><code class=\"language-python\">multiply_by_python_prompt = PromptTemplate(template=\"è¯·å†™ä¸€æ®µPythonä»£ç ï¼Œè®¡ç®—{question}?\", input_variables=[\"question\"])\nmath_chain = LLMChain(llm=llm, prompt=multiply_by_python_prompt, output_key=\"answer\")\nanswer = math_chain.run({\"question\": \"352ä¹˜ä»¥493\"})\nprint(answer)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">print(352 * 493)\n</code></pre><p>ä¸è¿‡ï¼Œæˆ‘ä»¬ä¸æƒ³å†æŠŠè¿™æ®µä»£ç ï¼Œå¤åˆ¶ç²˜è´´åˆ°Pythonçš„è§£é‡Šå™¨æˆ–è€…Notebooké‡Œé¢ï¼Œå†å»æ‰‹å·¥æ‰§è¡Œä¸€éã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åé¢å†è°ƒç”¨ä¸€ä¸ªPythonè§£é‡Šå™¨ï¼Œè®©æ•´ä¸ªè¿‡ç¨‹è‡ªåŠ¨å®Œæˆï¼Œå¯¹åº”çš„ä»£ç æˆ‘ä¹Ÿæ”¾åœ¨äº†ä¸‹é¢ã€‚</p><pre><code class=\"language-python\">multiply_by_python_prompt = PromptTemplate(template=\"è¯·å†™ä¸€æ®µPythonä»£ç ï¼Œè®¡ç®—{question}?\", input_variables=[\"question\"])\nmath_chain = LLMChain(llm=llm, prompt=multiply_by_python_prompt, output_key=\"answer\")\nanswer_code = math_chain.run({\"question\": \"352ä¹˜ä»¥493\"})\n\nfrom langchain.utilities import PythonREPL\npython_repl = PythonREPL()\nresult = python_repl.run(answer_code)\nprint(result)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">173536\n</code></pre><p><span class=\"reference\">æ³¨ï¼šç”Ÿæˆçš„Pythonè„šæœ¬æ˜¯æ­£ç¡®çš„ï¼Œå†é€šè¿‡è°ƒç”¨Pythonè§£é‡Šå™¨å°±èƒ½å¾—åˆ°æ­£ç¡®çš„è®¡ç®—ç»“æœã€‚</span></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒLangChainé‡Œé¢å†…ç½®äº†ä¸€ä¸ªutilitiesçš„åŒ…ï¼Œé‡Œé¢åŒ…å«äº†PythonREPLè¿™ä¸ªç±»ï¼Œå¯ä»¥å®ç°å¯¹Pythonè§£é‡Šå™¨çš„è°ƒç”¨ã€‚å¦‚æœä½ å»ç¿»çœ‹ä¸€ä¸‹å¯¹åº”ä»£ç çš„æºç çš„è¯ï¼Œå®ƒå…¶å®å°±æ˜¯ç®€å•åœ°è°ƒç”¨äº†ä¸€ä¸‹ç³»ç»Ÿè‡ªå¸¦çš„execæ–¹æ³•ï¼Œæ¥æ‰§è¡ŒPythonä»£ç ã€‚utilitiesé‡Œé¢è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ç±»ï¼Œèƒ½å¤Ÿå®ç°å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚å¯ä»¥ç›´æ¥è¿è¡ŒBashè„šæœ¬ï¼Œè°ƒç”¨Google Searchçš„APIç­‰ç­‰ã€‚ä½ å¯ä»¥å»LangChainçš„<a href=\"https://python.langchain.com/en/latest/modules/agents/tools.html\">æ–‡æ¡£</a>ï¼Œçœ‹çœ‹å®ƒå†…ç½®çš„è¿™äº›å·¥å…·ç±»æœ‰å“ªäº›ã€‚</p><p>å¦‚æœä½ ä»”ç»†æƒ³ä¸€ä¸‹ï¼Œä½ ä¼šå‘ç°è¿™å…¶å®ä¹Ÿæ˜¯ä¸€ç§é“¾å¼è°ƒç”¨ã€‚åªä¸è¿‡ï¼Œè°ƒç”¨é“¾é‡Œé¢çš„ç¬¬äºŒæ­¥ï¼Œä¸æ˜¯å»è®¿é—®OpenAIçš„APIè€Œå·²ã€‚æ‰€ä»¥ï¼Œå¯¹äºè¿™äº›å·¥å…·èƒ½åŠ›ï¼ŒLangChainä¹ŸæŠŠå®ƒä»¬å°è£…æˆäº†LLMChainçš„å½¢å¼ã€‚æ¯”å¦‚åˆšæ‰çš„æ•°å­¦è®¡ç®—é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªå…ˆç”ŸæˆPythonè„šæœ¬ï¼Œå†è°ƒç”¨Pythonè§£é‡Šå™¨çš„è¿‡ç¨‹ï¼ŒLangChainå°±æŠŠè¿™ä¸ªè¿‡ç¨‹å°è£…æˆäº†ä¸€ä¸ªå«åš LLMMathChainçš„LLMChainã€‚ä¸éœ€è¦è‡ªå·±å»ç”Ÿæˆä»£ç ï¼Œå†è°ƒç”¨PythonREPLï¼Œåªè¦ç›´æ¥è°ƒç”¨LLMMathChainï¼Œå®ƒå°±ä¼šåœ¨èƒŒåæŠŠè¿™ä¸€åˆ‡éƒ½ç»™åšå¥½ï¼Œå¯¹åº”çš„ä»£ç æˆ‘ä¹Ÿæ”¾åœ¨ä¸‹é¢ã€‚</p><pre><code class=\"language-python\">from langchain import LLMMathChain\n\nllm_math = LLMMathChain(llm=llm, verbose=True)\nresult = llm_math.run(\"è¯·è®¡ç®—ä¸€ä¸‹352ä¹˜ä»¥493æ˜¯å¤šå°‘?\")\nprint(result)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">&gt; Entering new LLMMathChain chain...\nè¯·è®¡ç®—ä¸€ä¸‹352ä¹˜ä»¥493æ˜¯å¤šå°‘?\n\nprint(352 * 493)\n\nAnswer: 173536\n&gt; Finished chain.\nAnswer: 173536\n</code></pre><p>LangChainä¹ŸæŠŠå‰é¢è®²è¿‡çš„utilitiesåŒ…é‡Œé¢çš„å¾ˆå¤šåŠŸèƒ½ï¼Œéƒ½å°è£…æˆäº†Utility Chainsã€‚æ¯”å¦‚ï¼ŒSQLDatabaseChainå¯ä»¥ç›´æ¥æ ¹æ®ä½ çš„æ•°æ®åº“ç”ŸæˆSQLï¼Œç„¶åè·å–æ•°æ®ï¼ŒLLMRequestsChainå¯ä»¥é€šè¿‡APIè°ƒç”¨å¤–éƒ¨ç³»ç»Ÿï¼Œè·å¾—æƒ³è¦çš„ç­”æ¡ˆã€‚ä½ å¯ä»¥ç›´æ¥åœ¨LangChainå…³äºUtility Chainsçš„<a href=\"https://python.langchain.com/en/latest/modules/agents/tools.html\">æ–‡æ¡£</a>é‡Œé¢ï¼Œæ‰¾åˆ°æœ‰å“ªäº›å·¥å…·å¯ä»¥ç”¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/aa/7a/aa939d818820b0797280d431cc87037a.png?wh=1920x1452\" alt=\"å›¾ç‰‡\" title=\"LLMathChainé€šè¿‡OpenAIç”ŸæˆPythonä»£ç ï¼Œå†é€šè¿‡REPLæ‰§è¡ŒPythonä»£ç ï¼Œå®Œæˆæ•°å­¦è®¡ç®—\"></p><h2>é€šè¿‡RequestsChainè·å–å®æ—¶å¤–éƒ¨ä¿¡æ¯</h2><p>è¿™é‡Œæˆ‘ä»¬æ¥é‡ç‚¹è®²ä¸€è®²å¦‚ä½•é€šè¿‡APIæ¥è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿï¼Œè·å¾—æƒ³è¦çš„ç­”æ¡ˆã€‚ä¹‹å‰åœ¨ä»‹ç»llama-indexçš„æ—¶å€™ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»è¿‡ä¸€ç§ä¸ºAIå¼•å…¥å¤–éƒ¨çŸ¥è¯†çš„æ–¹æ³•äº†ï¼Œé‚£å°±æ˜¯è®¡ç®—è¿™äº›å¤–éƒ¨çŸ¥è¯†çš„Embeddingï¼Œç„¶åä½œä¸ºç´¢å¼•å…ˆä¿å­˜ä¸‹æ¥ã€‚ä½†æ˜¯ï¼Œè¿™åªé€‚ç”¨äºå¤„ç†é‚£äº›é¢„å…ˆå‡†å¤‡å¥½ä¼šè¢«é—®åˆ°çš„çŸ¥è¯†ï¼Œæ¯”å¦‚ä¸€æœ¬ä¹¦ã€ä¸€ç¯‡è®ºæ–‡ã€‚è¿™äº›ä¸œè¥¿ï¼Œå†…å®¹å¤šä½†æ˜¯å›ºå®šï¼Œä¹Ÿä¸å­˜åœ¨æ—¶æ•ˆæ€§é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æå‰ç´¢å¼•å¥½ï¼Œè€Œä¸”ç”¨æˆ·é—®çš„é—®é¢˜å¾€å¾€ä¹Ÿæœ‰å¾ˆå¼ºçš„ç›¸ä¼¼æ€§ã€‚</p><p>ä½†æ˜¯ï¼Œå¯¹äºæ—¶æ•ˆæ€§å¼ºçš„é—®é¢˜ï¼Œè¿™ä¸ªæ–¹æ³•ä¸å¤ªé€‚ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½æ²¡æœ‰å¿…è¦ä¸åœåœ°æ›´æ–°ç´¢å¼•ã€‚æ¯”å¦‚ï¼Œä½ æƒ³è¦çŸ¥é“å®æ—¶çš„å¤©æ°”æƒ…å†µï¼Œæˆ‘ä»¬ä¸å¤ªå¯èƒ½æŠŠå…¨çƒæ‰€æœ‰åŸå¸‚æœ€æ–°çš„å¤©æ°”ä¿¡æ¯æ¯éš”å‡ åˆ†é’Ÿéƒ½ç´¢å¼•ä¸€éã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨LLMRequestsChainï¼Œé€šè¿‡ä¸€ä¸ªHTTPè¯·æ±‚æ¥å¾—åˆ°é—®é¢˜çš„ç­”æ¡ˆã€‚æœ€ç®€å•ç²—æš´çš„ä¸€ä¸ªåŠæ³•ï¼Œå°±æ˜¯ç›´æ¥é€šè¿‡ä¸€ä¸ªHTTPè¯·æ±‚æ¥é—®ä¸€ä¸‹Googleã€‚</p><pre><code class=\"language-python\">from langchain.chains import LLMRequestsChain\n\ntemplate = \"\"\"åœ¨ &gt;&gt;&gt; å’Œ &lt;&lt;&lt; ç›´æ¥æ˜¯æ¥è‡ªGoogleçš„åŸå§‹æœç´¢ç»“æœ.\nè¯·æŠŠå¯¹äºé—®é¢˜ '{query}' çš„ç­”æ¡ˆä»é‡Œé¢æå–å‡ºæ¥ï¼Œå¦‚æœé‡Œé¢æ²¡æœ‰ç›¸å…³ä¿¡æ¯çš„è¯å°±è¯´ \"æ‰¾ä¸åˆ°\"\nè¯·ä½¿ç”¨å¦‚ä¸‹æ ¼å¼ï¼š\nExtracted:&lt;answer or \"æ‰¾ä¸åˆ°\"&gt;\n&gt;&gt;&gt; {requests_result} &lt;&lt;&lt;\nExtracted:\"\"\"\n\nPROMPT = PromptTemplate(\n    input_variables=[\"query\", \"requests_result\"],\n    template=template,\n)\nrequests_chain = LLMRequestsChain(llm_chain = LLMChain(llm=OpenAI(temperature=0), prompt=PROMPT))\nquestion = \"ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ\"\ninputs = {\n    \"query\": question,\n    \"url\": \"https://www.google.com/search?q=\" + question.replace(\" \", \"+\")\n}\nresult=requests_chain(inputs)\nprint(result)\nprint(result['output'])\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-plain\">{'query': 'ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ', 'url': 'https://www.google.com/search?q=ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ', 'output': 'å°é›¨; 10â„ƒï½15â„ƒ; ä¸œåŒ—é£ é£åŠ›4-5çº§'}\nå°é›¨; 10â„ƒï½15â„ƒ; ä¸œåŒ—é£ é£åŠ›4-5çº§\n</code></pre><p>æˆ‘ä»¬æ¥çœ‹çœ‹è¿™æ®µä»£ç ï¼ŒåŸºäºLLMRequestsChainï¼Œæˆ‘ä»¬ç”¨åˆ°äº†ä¹‹å‰ä½¿ç”¨è¿‡çš„å¥½å‡ ä¸ªæŠ€å·§ã€‚</p><ol>\n<li>é¦–å…ˆï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ç®€å•ç²—æš´åœ°æœç´¢Googleã€‚ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ä¸€ä¸ªæœ‰ä»·å€¼çš„å¤©æ°”ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç½‘é¡µã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡ChatGPTæŠŠç½‘é¡µæœç´¢ç»“æœé‡Œé¢çš„ç­”æ¡ˆç»™æ‰¾å‡ºæ¥ã€‚æ‰€ä»¥æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªPromptTemplateï¼Œé€šè¿‡ä¸€æ®µæç¤ºè¯­ï¼Œè®©OpenAIä¸ºæˆ‘ä»¬åœ¨æœç´¢ç»“æœé‡Œé¢ï¼Œæ‰¾å‡ºé—®é¢˜çš„ç­”æ¡ˆï¼Œè€Œä¸æ˜¯å»æ‹¿åŸå§‹çš„HTMLé¡µé¢ã€‚</li>\n<li>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨äº†LLMRequestsChainï¼Œå¹¶ä¸”æŠŠåˆšæ‰PromptTemplateæ„é€ çš„ä¸€ä¸ªæ™®é€šçš„LLMChainï¼Œä½œä¸ºæ„é€ å‡½æ•°çš„ä¸€ä¸ªå‚æ•°ï¼Œä¼ ç»™LLMRequestsChainï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨æœç´¢ä¹‹åå¤„ç†æœç´¢ç»“æœã€‚</li>\n<li>å¯¹åº”çš„æœç´¢è¯ï¼Œé€šè¿‡queryè¿™ä¸ªå‚æ•°ä¼ å…¥ï¼Œå¯¹åº”çš„åŸå§‹æœç´¢ç»“æœï¼Œåˆ™ä¼šé»˜è®¤æ”¾åˆ°requests_resultsé‡Œã€‚è€Œé€šè¿‡æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„PromptTemplateæŠ½å–å‡ºæ¥çš„æœ€ç»ˆç­”æ¡ˆï¼Œåˆ™ä¼šæ”¾åˆ°outputè¿™ä¸ªè¾“å‡ºå‚æ•°é‡Œé¢ã€‚</li>\n</ol><p>æˆ‘ä»¬è¿è¡Œä¸€ä¸‹ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬é€šè¿‡ç®€å•æœç´¢GoogleåŠ ä¸Šé€šè¿‡OpenAIæå–æœç´¢ç»“æœé‡Œé¢çš„ç­”æ¡ˆï¼Œå°±å¾—åˆ°äº†æœ€æ–°çš„å¤©æ°”ä¿¡æ¯ã€‚</p><h2>é€šè¿‡TransformationChainè½¬æ¢æ•°æ®æ ¼å¼</h2><p>æœ‰äº†å®æ—¶çš„å¤–éƒ¨æ•°æ®ï¼Œæˆ‘ä»¬å°±åˆæœ‰å¾ˆå¤šåšåº”ç”¨çš„åˆ›æ„äº†ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ°”æ¸©æ¥æ¨èå¤§å®¶ç©¿ä»€ä¹ˆè¡£æœã€‚æˆ‘ä»¬å¯ä»¥è¦æ±‚å¦‚æœæœ€ä½æ¸©åº¦ä½äº0åº¦ï¼Œå°±è¦æ¨èç”¨æˆ·å»ç©¿ç¾½ç»’æœã€‚æˆ–è€…ï¼Œæ ¹æ®æ˜¯å¦ä¸‹é›¨æ¥å†³å®šè¦ä¸è¦æé†’ç”¨æˆ·å‡ºé—¨å¸¦ä¼ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨ç°åœ¨çš„è¿”å›ç»“æœé‡Œï¼Œå¤©æ°”ä¿¡æ¯ï¼ˆå¤©æ°”ã€æ¸©åº¦ã€é£åŠ›ï¼‰åªæ˜¯ä¸€æ®µæ–‡æœ¬ï¼Œè€Œä¸æ˜¯å¯ä»¥ç›´æ¥è·å–çš„JSONæ ¼å¼ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨LLMChainé‡Œé¢å†é“¾å¼åœ°è°ƒç”¨ä¸€æ¬¡OpenAIçš„æ¥å£ï¼ŒæŠŠè¿™æ®µæ–‡æœ¬è½¬æ¢æˆJSONæ ¼å¼ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšçš„è¯ï¼Œä¸€æ¥è¿˜è¦æ¶ˆè€—æ›´å¤šçš„Tokenã€èŠ±æ›´å¤šçš„é’±ï¼ŒäºŒæ¥è¿™ä¹Ÿä¼šè¿›ä¸€æ­¥å¢åŠ ç¨‹åºéœ€è¦è¿è¡Œçš„æ—¶é—´ï¼Œæ¯•ç«Ÿä¸€æ¬¡å¾€è¿”çš„ç½‘ç»œè¯·æ±‚ä¹Ÿæ˜¯å¾ˆæ…¢çš„ã€‚è¿™é‡Œçš„æ–‡æœ¬æ ¼å¼å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡ç®€å•çš„å­—ç¬¦ä¸²å¤„ç†å®Œæˆè§£æã€‚</p><pre><code class=\"language-python\">import re\ndef parse_weather_info(weather_info: str) -&gt; dict:\n    # å°†å¤©æ°”ä¿¡æ¯æ‹†åˆ†æˆä¸åŒéƒ¨åˆ†\n    parts = weather_info.split('; ')\n\n    # è§£æå¤©æ°”\n    weather = parts[0].strip()\n\n    # è§£ææ¸©åº¦èŒƒå›´ï¼Œå¹¶æå–æœ€å°å’Œæœ€å¤§æ¸©åº¦\n    temperature_range = parts[1].strip().replace('â„ƒ', '').split('ï½')\n    temperature_min = int(temperature_range[0])\n    temperature_max = int(temperature_range[1])\n\n    # è§£æé£å‘å’Œé£åŠ›\n    wind_parts = parts[2].split(' ')\n    wind_direction = wind_parts[0].strip()\n    wind_force = wind_parts[1].strip()\n\n    # è¿”å›è§£æåçš„å¤©æ°”ä¿¡æ¯å­—å…¸\n    weather_dict = {\n        'weather': weather,\n        'temperature_min': temperature_min,\n        'temperature_max': temperature_max,\n        'wind_direction': wind_direction,\n        'wind_force': wind_force\n    }\n\n    return weather_dict\n\n# ç¤ºä¾‹\nweather_info = \"å°é›¨; 10â„ƒï½15â„ƒ; ä¸œåŒ—é£ é£åŠ›4-5çº§\"\nweather_dict = parse_weather_info(weather_info)\nprint(weather_dict)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">{'weather': 'å°é›¨', 'temperature': {'min': 10, 'max': 15}, 'wind': {'direction': 'ä¸œåŒ—é£', 'level': 'é£åŠ›4-5çº§'}}\n</code></pre><p><span class=\"reference\">æ³¨ï¼šä¸Šé¢è¿™æ®µä»£ç ï¼Œå…¶å®æ˜¯æˆ‘è®©GPT-4å†™çš„ã€‚</span></p><p>æˆ‘ä»¬åœ¨è¿™é‡Œå®ç°äº†ä¸€ä¸ª <strong>parse_weather_info</strong> å‡½æ•°ï¼Œå¯ä»¥æŠŠå‰é¢LLMRequestsChainçš„è¾“å‡ºç»“æœï¼Œè§£ææˆä¸€ä¸ªdictã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½æ›´è¿›ä¸€æ­¥ï¼ŒæŠŠè¿™ä¸ªè§£æçš„é€»è¾‘ï¼Œä¹Ÿä¼ åˆ°LLMChainçš„é“¾å¼è°ƒç”¨çš„æœ€åå‘¢ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥çš„ã€‚å¯¹äºè¿™æ ·çš„è¦æ±‚ï¼ŒLangchainé‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ªä¸“é—¨çš„è§£å†³æ–¹æ¡ˆï¼Œå«åšTransformChainï¼Œä¹Ÿå°±æ˜¯åšæ ¼å¼è½¬æ¢ã€‚</p><pre><code class=\"language-python\">from langchain.chains import TransformChain, SequentialChain\n\ndef transform_func(inputs: dict) -&gt; dict:\n    text = inputs[\"output\"]\n    return {\"weather_info\" : parse_weather_info(text)}\n\ntransformation_chain = TransformChain(input_variables=[\"output\"], \n                                      output_variables=[\"weather_info\"], transform=transform_func)\n\nfinal_chain = SequentialChain(chains=[requests_chain, transformation_chain], \n                              input_variables=[\"query\", \"url\"], output_variables=[\"weather_info\"])\nfinal_result = final_chain.run(inputs)\nprint(final_result)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-python\">{'weather': 'å°é›¨', 'temperature': {'min': 10, 'max': 15}, 'wind': {'direction': 'ä¸œåŒ—é£', 'level': 'é£åŠ›4-5çº§'}}\n</code></pre><p><span class=\"reference\">æ³¨ï¼šåœ¨requests_chainåé¢è·Ÿä¸Šä¸€ä¸ªtransformation_chainï¼Œæˆ‘ä»¬å°±èƒ½æŠŠç»“æœè§£ææˆdictï¼Œä¾›åé¢å…¶ä»–ä¸šåŠ¡ä½¿ç”¨ç»“æ„åŒ–çš„æ•°æ®ã€‚</span></p><ol>\n<li>æˆ‘ä»¬åœ¨è¿™é‡Œï¼Œå…ˆå®šä¹‰äº†ä¸€ä¸ªtransform_funcï¼Œå¯¹å‰é¢çš„parse_weather_infoå‡½æ•°åšäº†ä¸€ä¸‹ç®€å•çš„å°è£…ã€‚å®ƒçš„è¾“å…¥ï¼Œæ˜¯æ•´ä¸ªLLMChainé‡Œï¼Œæ‰§è¡Œåˆ°TransformChainä¹‹å‰çš„æ•´ä¸ªè¾“å‡ºç»“æœçš„dictã€‚æˆ‘ä»¬å‰é¢çœ‹åˆ°æ•´ä¸ªLLMRequestsChainé‡Œé¢çš„å¤©æ°”ä¿¡æ¯çš„æ–‡æœ¬å†…å®¹ï¼Œæ˜¯é€šè¿‡outputè¿™ä¸ªkeyæ‹¿åˆ°çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¹Ÿæ˜¯å…ˆé€šè¿‡å®ƒæ¥æ‹¿åˆ°å¤©æ°”ä¿¡æ¯çš„æ–‡æœ¬å†…å®¹ï¼Œå†è°ƒç”¨ parse_weather_info è§£æï¼Œå¹¶ä¸”æŠŠç»“æœè¾“å‡ºåˆ° weather_info è¿™ä¸ªå­—æ®µé‡Œã€‚</li>\n<li>ç„¶åï¼Œæˆ‘ä»¬å°±å®šä¹‰äº†ä¸€ä¸ªTransformChainï¼Œé‡Œé¢çš„è¾“å…¥å‚æ•°å°±æ˜¯ outputï¼Œè¾“å‡ºå‚æ•°å°±æ˜¯ weather_infoã€‚</li>\n<li>æœ€åï¼Œæˆ‘ä»¬é€šè¿‡ä¸Šä¸€è®²ç”¨è¿‡çš„ SequentialChainï¼Œå°†å‰é¢çš„LLMRequestsChainå’Œè¿™é‡Œçš„TransformChainä¸²è”åˆ°ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªæ–°çš„å«åš final_chain çš„LLMChainã€‚</li>\n</ol><p>åœ¨è¿™ä¸‰æ­¥å®Œæˆä¹‹åï¼Œæœªæ¥æˆ‘ä»¬æƒ³è¦è·å¾—å¤©æ°”ä¿¡æ¯ï¼Œå¹¶ä¸”æ‹¿åˆ°ä¸€ä¸ªdictå½¢å¼çš„è¾“å‡ºï¼Œåªè¦è°ƒç”¨ final_chainçš„runæ–¹æ³•ï¼Œè¾“å…¥æˆ‘ä»¬å…³äºå¤©æ°”çš„æœç´¢æ–‡æœ¬å°±å¥½äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e2/45/e29294012c309f3f808693cea5216445.png?wh=1920x2181\" alt=\"å›¾ç‰‡\" title=\"é€šè¿‡ä¸‰ä¸ªæ­¥éª¤ï¼Œæ‹¿åˆ°æœ€åç»“æ„åŒ–çš„å¤©æ°”ä¿¡æ¯\"></p><p>æœ€åï¼Œæˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹final_chainéƒ½åšäº†å“ªäº›äº‹ã€‚</p><ol>\n<li>é€šè¿‡ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œæ ¹æ®æœç´¢è¯æ‹¿åˆ°Googleçš„æœç´¢ç»“æœé¡µã€‚</li>\n<li>æŠŠæˆ‘ä»¬å®šä¹‰çš„Promptæäº¤ç»™OpenAIï¼Œç„¶åæŠŠæˆ‘ä»¬æœç´¢çš„é—®é¢˜å’Œç»“æœé¡µéƒ½å‘ç»™äº†OpenAIï¼Œè®©å®ƒä»é‡Œé¢æå–å‡ºæœç´¢ç»“æœé¡µé‡Œé¢çš„å¤©æ°”ä¿¡æ¯ã€‚</li>\n<li>æœ€åæˆ‘ä»¬é€šè¿‡ transform_func è§£ææ‹¿åˆ°çš„å¤©æ°”ä¿¡æ¯çš„æ–‡æœ¬ï¼Œè¢«è½¬æ¢æˆä¸€ä¸ªdictã€‚è¿™æ ·ï¼Œåé¢çš„ç¨‹åºå°±å¥½å¤„ç†äº†ã€‚</li>\n</ol><h2>é€šè¿‡VectorDBQAæ¥å®ç°å…ˆæœç´¢å†å›å¤çš„èƒ½åŠ›</h2><p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨çš„LLMChainï¼Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„llama-indexçš„ä½¿ç”¨åœºæ™¯ï¼Œä¹Ÿå°±æ˜¯é’ˆå¯¹è‡ªå·±çš„èµ„æ–™åº“è¿›è¡Œé—®ç­”ã€‚æˆ‘ä»¬é¢„å…ˆæŠŠèµ„æ–™åº“ç´¢å¼•å¥½ï¼Œç„¶åæ¯æ¬¡ç”¨æˆ·æ¥é—®é—®é¢˜çš„æ—¶å€™ï¼Œéƒ½æ˜¯å…ˆåˆ°è¿™ä¸ªèµ„æ–™åº“é‡Œæœç´¢ï¼Œå†æŠŠé—®é¢˜å’Œç­”æ¡ˆä¸€å¹¶äº¤ç»™AIï¼Œè®©å®ƒå»ç»„ç»‡è¯­è¨€å›ç­”ã€‚</p><pre><code class=\"language-plain\">from langchain.embeddings.openai import OpenAIEmbeddings\nfrom langchain.vectorstores import FAISS\nfrom langchain.text_splitter import SpacyTextSplitter\nfrom langchain import OpenAI, VectorDBQA\nfrom langchain.document_loaders import TextLoader\n\nllm = OpenAI(temperature=0)\nloader = TextLoader('./data/ecommerce_faq.txt')\ndocuments = loader.load()\ntext_splitter = SpacyTextSplitter(chunk_size=256, pipeline=\"zh_core_web_sm\")\ntexts = text_splitter.split_documents(documents)\n\nembeddings = OpenAIEmbeddings()\ndocsearch = FAISS.from_documents(texts, embeddings)\n\nfaq_chain = VectorDBQA.from_chain_type(llm=llm, vectorstore=docsearch, verbose=True)\n</code></pre><p><span class=\"reference\">æ³¨ï¼šä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåŸºäº FAISS è¿›è¡Œå‘é‡å­˜å‚¨çš„ docsearchçš„ç´¢å¼•ï¼Œä»¥åŠåŸºäºè¿™ä¸ªç´¢å¼•çš„VectorDBQAè¿™ä¸ªLLMChainã€‚</span></p><p>å…ˆæ¥çœ‹ç¬¬ä¸€æ®µä»£ç ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªTextLoaderæŠŠæ–‡ä»¶åŠ è½½è¿›æ¥ï¼Œè¿˜é€šè¿‡SpacyTextSplitterç»™æ–‡æœ¬åˆ†æ®µï¼Œç¡®ä¿æ¯ä¸ªåˆ†å‡ºæ¥çš„Documentéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¥å­ã€‚å› ä¸ºæˆ‘ä»¬è¿™é‡Œçš„æ–‡æ¡£æ˜¯ç”µå•†FAQçš„å†…å®¹ï¼Œéƒ½æ¯”è¾ƒçŸ­å°ç²¾æ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾ç½®çš„chunk_sizeåªæœ‰256ã€‚ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰äº†ä½¿ç”¨OpenAIEmbeddingsæ¥ç»™æ–‡æ¡£åˆ›å»ºEmbeddingï¼Œé€šè¿‡FAISSæŠŠå®ƒå­˜å‚¨æˆä¸€ä¸ªVectorStoreã€‚æœ€åï¼Œæˆ‘ä»¬é€šè¿‡VectorDBQAçš„from_chain_type å®šä¹‰äº†ä¸€ä¸ªLLMã€‚å¯¹åº”çš„FAQå†…å®¹ï¼Œæˆ‘æ˜¯è¯·ChatGPTä¸ºæˆ‘ç¼–é€ ä¹‹åæ”¾åœ¨äº†ecommerce_faq.txtè¿™ä¸ªæ–‡ä»¶é‡Œã€‚</p><p>é—®é¢˜ï¼š</p><pre><code class=\"language-plain\">question = \"è¯·é—®ä½ ä»¬çš„è´§ï¼Œèƒ½é€åˆ°ä¸‰äºšå—ï¼Ÿå¤§æ¦‚éœ€è¦å‡ å¤©ï¼Ÿ\"\nresult = faq_chain.run(question)\nprint(result)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-plain\">&gt; Entering new VectorDBQA chain...\n&gt; Finished chain.\n æˆ‘ä»¬æ”¯æŒå…¨å›½å¤§éƒ¨åˆ†çœä»½çš„é…é€ï¼ŒåŒ…æ‹¬ä¸‰äºšã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¤§éƒ¨åˆ†åŸå¸‚çš„è®¢å•åœ¨2-3ä¸ªå·¥ä½œæ—¥å†…é€è¾¾ï¼Œåè¿œåœ°åŒºå¯èƒ½éœ€è¦5-7ä¸ªå·¥ä½œæ—¥ã€‚å…·ä½“é€è´§æ—¶é—´å¯èƒ½å› è®¢å•å•†å“ã€é…é€åœ°å€å’Œç‰©æµå…¬å¸è€Œå¼‚ã€‚\n</code></pre><p>é—®é¢˜ï¼š</p><pre><code class=\"language-plain\">question = \"è¯·é—®ä½ ä»¬çš„é€€è´§æ”¿ç­–æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ\" \nresult = faq_chain.run(question)\nprint(result)\n</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code class=\"language-plain\">&gt; Entering new VectorDBQA chain...\n&gt; Finished chain.\nè‡ªæ”¶åˆ°å•†å“ä¹‹æ—¥èµ·7å¤©å†…ï¼Œå¦‚äº§å“æœªä½¿ç”¨ã€åŒ…è£…å®Œå¥½ï¼Œæ‚¨å¯ä»¥ç”³è¯·é€€è´§ã€‚æŸäº›ç‰¹æ®Šå•†å“å¯èƒ½ä¸æ”¯æŒé€€è´§ï¼Œè¯·åœ¨è´­ä¹°å‰æŸ¥çœ‹å•†å“è¯¦æƒ…é¡µé¢çš„é€€è´§æ”¿ç­–ã€‚\n</code></pre><p>æˆ‘å‘å®ƒæäº†ä¸¤ä¸ªä¸åŒç±»å‹çš„é—®é¢˜ï¼Œfaq_chainéƒ½èƒ½å¤Ÿæ­£ç¡®åœ°å›ç­”å‡ºæ¥ã€‚ä½ å¯ä»¥å»çœ‹çœ‹dataç›®å½•ä¸‹é¢çš„ecommerce_faq.txtæ–‡ä»¶ï¼Œçœ‹çœ‹å®ƒçš„å›ç­”æ˜¯ä¸æ˜¯å’Œæ–‡æ¡£å†™çš„å†…å®¹ä¸€è‡´ã€‚åœ¨VectorDBQAè¿™ä¸ªLLMChainèƒŒåï¼Œå…¶å®ä¹Ÿæ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„é“¾å¼è°ƒç”¨ï¼Œæ¥å®Œæˆæœç´¢VectorStoreï¼Œå†å‘AIå‘èµ·Completionè¯·æ±‚è¿™æ ·ä¸¤ä¸ªæ­¥éª¤çš„ã€‚</p><p>å¯ä»¥çœ‹åˆ°LLMChainæ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„æ­¦å™¨ï¼Œå®ƒå¯ä»¥æŠŠè§£å†³ä¸€ä¸ªé—®é¢˜éœ€è¦çš„å¤šä¸ªæ­¥éª¤ä¸²è”åˆ°ä¸€èµ·ã€‚è¿™ä¸ªæ­¥éª¤å¯ä»¥æ˜¯è°ƒç”¨æˆ‘ä»¬çš„è¯­è¨€æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨APIï¼Œæˆ–è€…åœ¨å†…éƒ¨æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªPythonå‡½æ•°ã€‚è¿™å¤§å¤§å¢å¼ºäº†æˆ‘ä»¬åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹çš„èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯èƒ½å¤Ÿå¼¥è¡¥å®ƒçš„å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼Œæ¯”å¦‚ç¼ºå°‘æœ‰æ—¶æ•ˆçš„ä¿¡æ¯ï¼Œé€šè¿‡HTTPè°ƒç”¨æ¯”è¾ƒæ…¢ç­‰ç­‰ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œè¿™ä¸€è®²åˆ°è¿™é‡Œä¹Ÿå°±ç»“æŸäº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒLangchainçš„é“¾å¼è°ƒç”¨å¹¶ä¸å±€é™äºä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹çš„æ¥å£ã€‚è¿™ä¸€è®²é‡Œï¼Œæˆ‘ä»¬å°±çœ‹åˆ°å››ç§å¸¸è§çš„å°†å¤§è¯­è¨€æ¨¡å‹çš„æ¥å£å’Œå…¶ä»–èƒ½åŠ›ç»“åˆåœ¨ä¸€èµ·çš„é“¾å¼è°ƒç”¨ã€‚</p><ol>\n<li>LLMMathChainèƒ½å¤Ÿé€šè¿‡Pythonè§£é‡Šå™¨å˜æˆä¸€ä¸ªè®¡ç®—å™¨ï¼Œè®©AIèƒ½å¤Ÿå‡†ç¡®åœ°è¿›è¡Œæ•°å­¦è¿ç®—ã€‚</li>\n<li>é€šè¿‡RequestsChainï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨å¤–éƒ¨APIï¼Œç„¶åå†è®©AIä»è¿”å›çš„ç»“æœé‡Œæå–æˆ‘ä»¬å…³å¿ƒçš„å†…å®¹ã€‚</li>\n<li>TransformChainèƒ½å¤Ÿè®©æˆ‘ä»¬æ ¹æ®è‡ªå·±çš„è¦æ±‚å¯¹æ•°æ®è¿›è¡Œå¤„ç†å’Œè½¬åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠAIè¿”å›çš„è‡ªç„¶è¯­è¨€çš„ç»“æœè¿›ä¸€æ­¥è½¬æ¢æˆç»“æ„åŒ–çš„æ•°æ®ï¼Œæ–¹ä¾¿å…¶ä»–ç¨‹åºå»å¤„ç†ã€‚</li>\n<li>VectorDBQAèƒ½å¤Ÿå®Œæˆå’Œllama-indexç›¸ä¼¼çš„äº‹æƒ…ï¼Œåªè¦é¢„å…ˆåšå¥½å†…éƒ¨æ•°æ®èµ„æ–™çš„Embeddingå’Œç´¢å¼•ï¼Œé€šè¿‡å¯¹LLMChainè¿›è¡Œä¸€æ¬¡è°ƒç”¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è·å–å›ç­”çš„ç»“æœã€‚</li>\n</ol><p>è¿™äº›èƒ½åŠ›å¤§å¤§å¢å¼ºäº†AIçš„å®ç”¨æ€§ï¼Œè§£å†³äº†å‡ ä¸ªä¹‹å‰å¤§è¯­è¨€æ¨¡å‹å¤„ç†å¾—ä¸å¥½çš„é—®é¢˜ï¼ŒåŒ…æ‹¬æ•°å­¦è®¡ç®—èƒ½åŠ›ã€å®æ—¶æ•°æ®èƒ½åŠ›ã€å’Œç°æœ‰ç¨‹åºç»“åˆçš„èƒ½åŠ›ï¼Œä»¥åŠæœç´¢å±äºè‡ªå·±çš„èµ„æ–™åº“çš„èƒ½åŠ›ã€‚ä½ å®Œå…¨å¯ä»¥å®šä¹‰è‡ªå·±éœ€è¦çš„LLMChainï¼Œé€šè¿‡ç¨‹åºæ¥å®Œæˆå„ç§ä»»åŠ¡ï¼Œç„¶ååˆç†åœ°ç»„åˆä¸åŒç±»å‹çš„LLMChainå¯¹è±¡ï¼Œæ¥å®ç°è¿ChatGPTéƒ½åšä¸åˆ°çš„äº‹æƒ…ã€‚è€ŒChatGPT Pluginsçš„å®ç°æœºåˆ¶ï¼Œå…¶å®ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ã€‚æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼ŒLangchainé‡Œæœ‰SQLDatabaseChainå¯ä»¥ç›´æ¥è®©æˆ‘ä»¬å†™éœ€æ±‚è®¿é—®æ•°æ®åº“ã€‚åœ¨å®˜æ–¹æ–‡æ¡£é‡Œä¹Ÿç»™å‡ºäº†å¯¹åº”çš„<a href=\"https://langchain.readthedocs.io/en/latest/modules/chains/examples/sqlite.html\">ä¾‹å­</a>ï¼Œä½ å¯ä»¥å»è¯•ä¸€è¯•ä½“éªŒä¸€ä¸‹ï¼Œæƒ³ä¸€æƒ³å®ƒæ˜¯é€šè¿‡ä»€ä¹ˆæ ·çš„æç¤ºè¯­ä¿¡æ¯ï¼Œæ¥è®©AIå†™å‡ºå¯ä»¥ç›´æ¥æ‰§è¡Œçš„SQLçš„ï¼Ÿ</p><p>æ¬¢è¿ä½ æŠŠä½ ä½“éªŒä¹‹åçš„æ„Ÿå—ä»¥åŠæ€è€ƒåçš„ç»“æœåˆ†äº«åœ¨è¯„è®ºåŒºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ä¸€è®²åˆ†äº«ç»™æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²å†è§ï¼</p><h2>æ¨èè¯•ç”¨</h2><p>æˆ‘ä»¬ç›®å‰å¯¹äºLangchainçš„è®²è§£ï¼Œéƒ½æ˜¯é€šè¿‡Pythonç¼–ç¨‹çš„æ–¹å¼æ¥å®ç°çœŸå®ä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚çš„ã€‚æœ‰äººç›´æ¥ä¸ºLangchainåšäº†ä¸€ä¸ªå¯ä»¥æ‹–æ‹½çš„å›¾å½¢ç•Œé¢å«åš <a href=\"https://github.com/logspace-ai/langflow\">LangFlow</a>ã€‚ä½ å¯ä»¥è¯•ç€ä¸‹è½½ä½“éªŒä¸€ä¸‹ï¼Œçœ‹çœ‹å›¾å½¢ç•Œé¢æ˜¯ä¸æ˜¯å¯ä»¥è¿›ä¸€æ­¥æå‡ä½ çš„æ•ˆç‡ã€‚</p>","neighbors":{"left":{"article_title":"14ï½œé“¾å¼è°ƒç”¨ï¼Œç”¨LangChainç®€åŒ–å¤šæ­¥æç¤ºè¯­","id":646987},"right":{"article_title":"16ï½œLangchainé‡Œçš„â€œè®°å¿†åŠ›â€ï¼Œè®©AIåªè®°ä½æœ‰ç”¨çš„äº‹å„¿","id":648167}},"comments":[{"had_liked":false,"id":372530,"user_name":"å›ä¸º","can_delete":false,"product_type":"c1","uid":1201843,"ip_address":"åŒ—äº¬","ucode":"A1125F0CA4E75D","user_header":"https://static001.geekbang.org/account/avatar/00/12/56/b3/29c814af.jpg","comment_is_top":false,"comment_ctime":1681261632,"is_pvip":false,"replies":[{"id":135976,"content":"ç”³è¯·å¼€é€šæµ·å¤–çš„Azure OpenAIï¼Œé¢åº¦å’Œæ€§èƒ½éƒ½æ›´æœ‰ä¿éšœ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681286930,"ip_address":"ä¸Šæµ·","comment_id":372530,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œchainå’Œpipeçš„åŸç†è¿˜æ˜¯æ¯”è¾ƒåƒï¼Œå­¦å®Œè¿™è®²æ‰“å¼€äº†æˆ‘å¯¹ChatGPTå¯åº”ç”¨ç©ºé—´ã€‚å®é™…åº”ç”¨ä¸­æœ€å¤§çš„é—®é¢˜è¿˜æ˜¯api çš„å“åº”é€Ÿåº¦å’Œæ¥å£é™æµã€‚\nè¯·é—®è€å¸ˆæœ‰æ²¡æœ‰æ›´å¥½çš„è§£å†³åŠæ³•ï¼Ÿç›®å‰æˆ‘çŸ¥é“çš„æ˜¯å¤šä¸ªè´¦å·è´Ÿè½½å‡è¡¡å’Œè°ƒç”¨å®¹é”™é‡è¯•ã€‚","like_count":8,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613356,"discussion_content":"ç”³è¯·å¼€é€šæµ·å¤–çš„Azure OpenAIï¼Œé¢åº¦å’Œæ€§èƒ½éƒ½æ›´æœ‰ä¿éšœ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1681286930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1660533,"avatar":"https://static001.geekbang.org/account/avatar/00/19/56/75/28a29e7c.jpg","nickname":"å®‰è²å°”å¾·","note":"","ucode":"A7B310463C15F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":618475,"discussion_content":"è€å¸ˆï¼Œè¿™ä¸ªæ€ä¹ˆç”³è¯·å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684280408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":613356,"ip_address":"åŒ—äº¬","group_id":0},"score":618475,"extra":""}]}]},{"had_liked":false,"id":372537,"user_name":"hhh","can_delete":false,"product_type":"c1","uid":1063398,"ip_address":"æµ™æ±Ÿ","ucode":"711DCDC58209BB","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/e6/1effba61.jpg","comment_is_top":false,"comment_ctime":1681266487,"is_pvip":false,"replies":[{"id":135980,"content":"Javaç›®å‰è¿˜æ²¡æœ‰çœ‹åˆ°ï¼Œä¸è¿‡ç°åœ¨GPT-4å¾ˆå¤šäººç”¨æ¥åšä¸åŒè¯­è¨€ä¹‹é—´çš„ä»£ç ç¿»è¯‘ï¼Œä½ å¯ä»¥è¯•ç€å†™ä¸€ä¸ªJavaç‰ˆæœ¬çš„Langchainã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681287134,"ip_address":"ä¸Šæµ·","comment_id":372537,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"æµ©å“¥ï¼Œæ–‡ç¨¿ä¸­ä»£ç ã€ç±»åº“éƒ½æ˜¯pythonè„šæ­¥çš„ï¼Œæœ‰javaç›¸å…³çš„ç”Ÿæ€æ¨è¿›å—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613360,"discussion_content":"Javaç›®å‰è¿˜æ²¡æœ‰çœ‹åˆ°ï¼Œä¸è¿‡ç°åœ¨GPT-4å¾ˆå¤šäººç”¨æ¥åšä¸åŒè¯­è¨€ä¹‹é—´çš„ä»£ç ç¿»è¯‘ï¼Œä½ å¯ä»¥è¯•ç€å†™ä¸€ä¸ªJavaç‰ˆæœ¬çš„Langchainã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681287134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372656,"user_name":"é‡‘î„","can_delete":false,"product_type":"c1","uid":1559128,"ip_address":"æ¹–å—","ucode":"48D0B5CB8E5F9E","user_header":"https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg","comment_is_top":false,"comment_ctime":1681403902,"is_pvip":false,"replies":[{"id":136129,"content":"ç»§ç»­å¾€ä¸‹å…ˆçœ‹åˆ°17è®²ä¹‹åçœ‹çœ‹ä½ æœ‰æ²¡æœ‰è§£å†³é—®é¢˜çš„æ€è·¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681616210,"ip_address":"ä¸Šæµ·","comment_id":372656,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"æ€ä¹ˆè®©æ¨¡æ¿æ›´é€šç”¨å‘¢ï¼Ÿæ¯”å¦‚é‚£ä¸ªç®—æœ¯é—®é¢˜ï¼Œå¦‚ä½•åˆ¤æ–­æ˜¯ä¸ªè®¡ç®—é—®é¢˜ï¼Œæ„Ÿè§‰æ¨¡æ¿åªèƒ½è§£å†³è°ƒç”¨é—®é¢˜.","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613981,"discussion_content":"ç»§ç»­å¾€ä¸‹å…ˆçœ‹åˆ°17è®²ä¹‹åçœ‹çœ‹ä½ æœ‰æ²¡æœ‰è§£å†³é—®é¢˜çš„æ€è·¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681616210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1559128,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg","nickname":"é‡‘î„","note":"","ucode":"48D0B5CB8E5F9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":614010,"discussion_content":"è§£å†³äº†ï¼Œè®©æ¨¡å‹å–é€‰æ‹©ï¼Œç°åœ¨æ˜¯ä¸æ˜¯å¯ä»¥ç”¨autogptå’Œagentgpt?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681630001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":613981,"ip_address":"æ¹–å—","group_id":0},"score":614010,"extra":""}]}]},{"had_liked":false,"id":372650,"user_name":"Yezhiwei","can_delete":false,"product_type":"c1","uid":1005157,"ip_address":"åŒ—äº¬","ucode":"31E8E33688CBEC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/65/22a37a8e.jpg","comment_is_top":false,"comment_ctime":1681394277,"is_pvip":false,"replies":[{"id":136117,"content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681614592,"ip_address":"ä¸Šæµ·","comment_id":372650,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ä¹‹å‰è‡ªå·±è¯•è¿‡ LangFlow éå¸¸ç®€å•ï¼ŒæŠŠæ­¥éª¤è®°å½•ä¸‹æ¥äº†ï¼Œéš¾é“åœ¨ç½‘ç»œï¼Œå¦‚æœç½‘ç»œç¨³å®šï¼Œå¾ˆå¿«çœ‹åˆ°æ•ˆæœ \nhttps:&#47;&#47;mp.weixin.qq.com&#47;s&#47;jjNkkoUu-q8Yb1J6_u6WGg","like_count":2,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613965,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681614592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372588,"user_name":"è‡ªç„¶å·çš„Neil","can_delete":false,"product_type":"c1","uid":3579742,"ip_address":"æµ™æ±Ÿ","ucode":"44ECCBE5B7F6CA","user_header":"https://static001.geekbang.org/account/avatar/00/36/9f/5e/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1681306266,"is_pvip":false,"replies":[{"id":136124,"content":"HTTPåè®®çš„URLé‡Œé¢ä¸æ”¯æŒç©ºæ ¼\nGoogleçš„URLå«ä¹‰é‡Œé¢ï¼Œç©ºæ ¼é»˜è®¤ä¼šæ›¿æ¢æˆ+\nä½ è¯•ç€ç”¨Googleæœç´¢ä¸€ä¸‹çœ‹ä¸€ä¸‹æµè§ˆå™¨çš„åœ°å€æ å°±çŸ¥é“äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681615869,"ip_address":"ä¸Šæµ·","comment_id":372588,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"&quot;url&quot;: &quot;https:&#47;&#47;www.google.com&#47;search?q=&quot; + question.replace(&quot; &quot;, &quot;+&quot;)\nè¿™ä¸€æ®µä»£ç ä¸ºä»€ä¹ˆéœ€è¦åŠ ä¸Š+ question.replace(&quot; &quot;, &quot;+&quot;)\næˆ‘çœ‹äº†langchainçš„æ‰‹å†Œä¹Ÿæ˜¯è¿™ä¹ˆå†™çš„ï¼Œ\nå¦‚æœè¾“å…¥æ˜¯&#39;query&#39;: &#39;What are the Three (3) biggest countries, and their respective sizes?&#39;,\nè¾“å‡ºä¼šå˜æˆ&#39;url&#39;: &#39;https:&#47;&#47;www.google.com&#47;search?q=What+are+the+Three+(3)+biggest+countries,+and+their+respective+sizes?&#39;\nä¸å¤ªç†è§£è¿™æ ·åšçš„æ„ä¹‰æ˜¯å•¥","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613974,"discussion_content":"HTTPåè®®çš„URLé‡Œé¢ä¸æ”¯æŒç©ºæ ¼\nGoogleçš„URLå«ä¹‰é‡Œé¢ï¼Œç©ºæ ¼é»˜è®¤ä¼šæ›¿æ¢æˆ+\nä½ è¯•ç€ç”¨Googleæœç´¢ä¸€ä¸‹çœ‹ä¸€ä¸‹æµè§ˆå™¨çš„åœ°å€æ å°±çŸ¥é“äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681615869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014963,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/b3/40e8fa1d.jpg","nickname":"é£çš„å¹æ¯","note":"","ucode":"5982CA332D46E0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613476,"discussion_content":"ä½ å¯ä»¥å­¦ä¹ ä¸€ä¸‹google æœç´¢é«˜çº§ç”¨æ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681349151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3579742,"avatar":"https://static001.geekbang.org/account/avatar/00/36/9f/5e/791d0f5e.jpg","nickname":"è‡ªç„¶å·çš„Neil","note":"","ucode":"44ECCBE5B7F6CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1014963,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/b3/40e8fa1d.jpg","nickname":"é£çš„å¹æ¯","note":"","ucode":"5982CA332D46E0","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":613553,"discussion_content":"æ„Ÿè°¢è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681390028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":613476,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":613553,"extra":""}]}]},{"had_liked":false,"id":372522,"user_name":"é‡‘î„","can_delete":false,"product_type":"c1","uid":1559128,"ip_address":"æ¹–å—","ucode":"48D0B5CB8E5F9E","user_header":"https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg","comment_is_top":false,"comment_ctime":1681253880,"is_pvip":false,"replies":[{"id":135975,"content":"ç¬¬12è®²æˆ‘ä»¬ä»‹ç»è¿‡åœ¨llama-indexé‡Œï¼Œæ€ä¹ˆå°è£…ä¸€ä¸ªè‡ªå·±çš„CustomLLMã€‚Langchainä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼çš„çš„æ–¹å¼æ¥è§£å†³å‘€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681286904,"ip_address":"ä¸Šæµ·","comment_id":372522,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"è¿™ä¸ªç¡®å®ä¸é”™ï¼Œæˆ‘ä¸€ç›´åœ¨æ€è€ƒå¦‚ä½•è®©chatgptä¼˜é›…çš„å®Œæˆæœ€åä¸€æ­¥ï¼Œlangchainè¿™ä¸ªå·¥å…·èƒ½å¾ˆå¤§ç¨‹åº¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸ªå·¥å…·æ”¯æŒæ¸…åçš„é‚£ä¸ªå¼€æºå¤§æ¨¡å‹å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613355,"discussion_content":"ç¬¬12è®²æˆ‘ä»¬ä»‹ç»è¿‡åœ¨llama-indexé‡Œï¼Œæ€ä¹ˆå°è£…ä¸€ä¸ªè‡ªå·±çš„CustomLLMã€‚Langchainä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼çš„çš„æ–¹å¼æ¥è§£å†³å‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681286904,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374241,"user_name":"åšç§¯è–„å‘","can_delete":false,"product_type":"c1","uid":1206674,"ip_address":"å¾·å›½","ucode":"8640C07176C249","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/92/69c2c135.jpg","comment_is_top":false,"comment_ctime":1683769978,"is_pvip":false,"replies":[{"id":136845,"content":"æˆ‘ä¹‹å‰ä¼šé‡åˆ°åœ¨Colabä¸Šè¿è¡Œä¸æˆåŠŸï¼ŒåŸå› æ˜¯ Google æœç´¢çš„åçˆ¬ç­–ç•¥åº”è¯¥æ˜¯æ²¡æœ‰ç»™åˆ°æ­£å¸¸çš„ç½‘é¡µè¿”å›å†…å®¹\n\nä½ å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œæ˜¯å¦ç½‘ç»œèƒ½å¤Ÿè®¿é—®Googleæœç´¢ï¼Œä»¥åŠæ˜¯å¦ç”¨äº†ä¸€äº›æ•°æ®ä¸­å¿ƒçš„æœºå™¨è¢«Googleçš„åçˆ¬è™«å±è”½äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684748760,"ip_address":"ä¸Šæµ·","comment_id":374241,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"from langchain.chains import LLMRequestsChain\n\ntemplate = &quot;&quot;&quot;åœ¨ &gt;&gt;&gt; å’Œ &lt;&lt;&lt; ç›´æ¥æ˜¯æ¥è‡ªGoogleçš„åŸå§‹æœç´¢ç»“æœ.\nè¯·æŠŠå¯¹äºé—®é¢˜ &#39;{query}&#39; çš„ç­”æ¡ˆä»é‡Œé¢æå–å‡ºæ¥ï¼Œå¦‚æœé‡Œé¢æ²¡æœ‰ç›¸å…³ä¿¡æ¯çš„è¯å°±è¯´ &quot;æ‰¾ä¸åˆ°&quot;\nè¯·ä½¿ç”¨å¦‚ä¸‹æ ¼å¼ï¼š\nExtracted:&lt;answer or &quot;æ‰¾ä¸åˆ°&quot;&gt;\n&gt;&gt;&gt; {requests_result} &lt;&lt;&lt;\nExtracted:&quot;&quot;&quot;\n\nPROMPT = PromptTemplate(\n    input_variables=[&quot;query&quot;, &quot;requests_result&quot;],\n    template=template,\n)\nrequests_chain = LLMRequestsChain(llm_chain = LLMChain(llm=OpenAI(temperature=0), prompt=PROMPT),verbose=True)\nquestion = &quot;ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ&quot;\ninputs = {\n    &quot;query&quot;: question,\n    &quot;url&quot;: &quot;https:&#47;&#47;www.google.com&#47;search?q=&quot; + question.replace(&quot; &quot;, &quot;+&quot;)\n}\nresult=requests_chain(inputs)\nprint(result)\nprint(result[&#39;output&#39;])\n\nè€å¸ˆï¼Œæˆ‘æµ‹è¯•è¿™æ®µä»£ç ï¼Œè¿”å›å€¼æ˜¯æ‰¾ä¸åˆ° ï¼Œæ˜¯ä»€ä¹ˆåŸå› å“ˆ\n","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619023,"discussion_content":"æˆ‘ä¹‹å‰ä¼šé‡åˆ°åœ¨Colabä¸Šè¿è¡Œä¸æˆåŠŸï¼ŒåŸå› æ˜¯ Google æœç´¢çš„åçˆ¬ç­–ç•¥åº”è¯¥æ˜¯æ²¡æœ‰ç»™åˆ°æ­£å¸¸çš„ç½‘é¡µè¿”å›å†…å®¹\n\nä½ å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œæ˜¯å¦ç½‘ç»œèƒ½å¤Ÿè®¿é—®Googleæœç´¢ï¼Œä»¥åŠæ˜¯å¦ç”¨äº†ä¸€äº›æ•°æ®ä¸­å¿ƒçš„æœºå™¨è¢«Googleçš„åçˆ¬è™«å±è”½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684748760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373953,"user_name":"Geek_9691fb","can_delete":false,"product_type":"c1","uid":3579209,"ip_address":"æµ™æ±Ÿ","ucode":"2115F28E767B52","user_header":"","comment_is_top":false,"comment_ctime":1683376522,"is_pvip":false,"replies":[{"id":136839,"content":"https:&#47;&#47;github.com&#47;xuwenhao&#47;geektime-ai-course çš„ dataç›®å½•ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1684746687,"ip_address":"ä¸Šæµ·","comment_id":373953,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ecommerce_faq.txt åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":619013,"discussion_content":"https://github.com/xuwenhao/geektime-ai-course çš„ dataç›®å½•ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684746687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373495,"user_name":"æ²ç‘Lynn","can_delete":false,"product_type":"c1","uid":2419069,"ip_address":"é‡åº†","ucode":"07CE753F1A4DBC","user_header":"","comment_is_top":false,"comment_ctime":1682576263,"is_pvip":false,"replies":[{"id":136459,"content":"å¦‚æœåœ¨Colabå‘èµ·ï¼Œä¼¼ä¹å¾ˆå®¹æ˜“è¢«æ‹¦æˆªï¼Œå¦‚æœæ˜¯æœ¬åœ°å‘èµ·ï¼Œå¥½åƒæ²¡æœ‰é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683083011,"ip_address":"ä¸Šæµ·","comment_id":373495,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"ç”¨LLMRequestsChainæƒ³è°·æ­Œæé—®ï¼Œæ€»æ˜¯å›ç­”æ‰¾ä¸åˆ°ï¼›ç„¶åç”¨requestsç›´æ¥å†™äº†ä¸ªç¨‹åºè°ƒgoogle é¡µé¢ï¼Œå‘ç°å¯èƒ½è¢«æ‹¦æˆªã€‚ç„¶åé—®é¢˜äº†GPTï¼Œå¾—åˆ°å›ç­”\nâ€œè¿™æ®µä»£ç ä½¿ç”¨ requests æ¨¡å—å‘ Google æœç´¢å‘å‡º GET è¯·æ±‚æ¥è·å–æŒ‡å®šé—®é¢˜çš„æœç´¢ç»“æœé¡µé¢çš„ HTML ä»£ç ã€‚ç„¶åä½¿ç”¨ print() å‡½æ•°å°† HTML ä»£ç æ‰“å°å‡ºæ¥ã€‚\nä½†æ˜¯ä½¿ç”¨è¯¥æ–¹æ³•è·å– Google æœç´¢ç»“æœå¯èƒ½ä¼šè¢« Google è¯†åˆ«ä¸ºæœºå™¨è¡Œä¸ºï¼Œå¹¶è¢«é˜»æ‹¦ã€‚å»ºè®®ä½¿ç”¨ Google æä¾›çš„ API æ¥è·å–æœç´¢ç»“æœã€‚â€ è®°å½•ä¸€ä¸‹ï¼Œçœ‹çœ‹å¤§å®¶æ˜¯ä¸æ˜¯æœ‰åŒæ ·çš„é—®é¢˜å§ã€‚","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616683,"discussion_content":"å¦‚æœåœ¨Colabå‘èµ·ï¼Œä¼¼ä¹å¾ˆå®¹æ˜“è¢«æ‹¦æˆªï¼Œå¦‚æœæ˜¯æœ¬åœ°å‘èµ·ï¼Œå¥½åƒæ²¡æœ‰é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683083011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023093,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/75/525e53b1.jpg","nickname":"Hobby","note":"","ucode":"8954830380D44F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":621304,"discussion_content":"è²Œä¼¼æœ‰äº›æ¢¯å­ä¹Ÿä¼šè¢«æ‹¦æˆªï¼Œè¦æ±‚å›¾å½¢è¯†åˆ«åŒºåˆ†æ˜¯å¦æ˜¯äººç±»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1687096298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373449,"user_name":"æ—­","can_delete":false,"product_type":"c1","uid":1002420,"ip_address":"åŒ—äº¬","ucode":"6AF6518D4F7D0A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4b/b4/4768f34b.jpg","comment_is_top":false,"comment_ctime":1682514662,"is_pvip":false,"replies":[{"id":136461,"content":"å¯ä»¥åŠ å…¥ä¸€äº›å®¹é”™çš„æ­¥éª¤ï¼Œç±»ä¼¼äº13&#47;14è®²ç”Ÿæˆunit testçš„æ—¶å€™ï¼Œå»æ£€æŸ¥ç”Ÿæˆçš„æ¡ç›®æ•°ï¼Œæˆ–è€…ç¼–è¯‘ä»£ç çœ‹æ˜¯å¦èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1683083121,"ip_address":"ä¸Šæµ·","comment_id":373449,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100541001,"comment_content":"å¦‚æœæ˜¯æä¾›æœåŠ¡çš„è¯ï¼Œé“¾å¼è®¡ç®—ä¸­é—´æ­¥éª¤çš„å®¹é”™æ€§æœ‰æ²¡æœ‰å¥½åŠæ³•ä¿è¯ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616685,"discussion_content":"å¯ä»¥åŠ å…¥ä¸€äº›å®¹é”™çš„æ­¥éª¤ï¼Œç±»ä¼¼äº13/14è®²ç”Ÿæˆunit testçš„æ—¶å€™ï¼Œå»æ£€æŸ¥ç”Ÿæˆçš„æ¡ç›®æ•°ï¼Œæˆ–è€…ç¼–è¯‘ä»£ç çœ‹æ˜¯å¦èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683083121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372851,"user_name":"æ…•æ«","can_delete":false,"product_type":"c1","uid":2223368,"ip_address":"è´µå·","ucode":"1A40F70D105662","user_header":"https://static001.geekbang.org/account/avatar/00/21/ed/08/fe7910e2.jpg","comment_is_top":false,"comment_ctime":1681722099,"is_pvip":false,"replies":[{"id":136257,"content":"ä½ ä½¿ç”¨RequestsChainçš„æ—¶å€™å·²ç»æŒ‡æ˜äº†å¤–éƒ¨çš„URLï¼Œä¸€å®šä¼šè°ƒç”¨å¤–éƒ¨APIå‘€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681794293,"ip_address":"ä¸Šæµ·","comment_id":372851,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"RequestsChainæ€ä¹ˆåˆ¤æ–­æ˜¯é—®é¢˜æ˜¯å¦éœ€è¦è°ƒç”¨å¤–éƒ¨apiï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":614459,"discussion_content":"ä½ ä½¿ç”¨RequestsChainçš„æ—¶å€™å·²ç»æŒ‡æ˜äº†å¤–éƒ¨çš„URLï¼Œä¸€å®šä¼šè°ƒç”¨å¤–éƒ¨APIå‘€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681794293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372773,"user_name":"å‡æœ›","can_delete":false,"product_type":"c1","uid":1015500,"ip_address":"å¹¿ä¸œ","ucode":"EF26509C586C09","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7e/cc/da91bd47.jpg","comment_is_top":false,"comment_ctime":1681609725,"is_pvip":false,"replies":[{"id":136095,"content":"æœ‰å½±å“ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¼šæœ‰å®‰å…¨éšæ‚£ï¼Œä¸è¿‡ç›¸ä¿¡ç¤¾åŒºå¾ˆå¿«ä¼šä¿®æ­£è¿™ä¸ªé—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681613433,"ip_address":"ä¸Šæµ·","comment_id":372773,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"RAyH4c\nå¾®åš\nç»™å¼€å‘å’Œä½¿ç”¨LLMåº”ç”¨çš„å„ä½æä¸ªé†’ï¼Œå„è·¯èŠå¤©\næœºå™¨äººå’ŒChatXXxåº”ç”¨éƒ½ä½¿ç”¨çš„LangChainåº“ï¼Œ\nå¯¹è¾“å…¥çš„æç¤ºè¯åŒ…äº†ä¸€å±‚execå’Œevalå‡½æ•°ï¼Œå¯¼è‡´\næ‰€æœ‰æç¤ºè¯éƒ½èƒ½è¿œç¨‹æ‰§è¡Œä»»æ„pythonä»£ç ...\n\nè€å¸ˆå¥½ï¼Œçœ‹å¾®åšæœ‰äººè¯´è¿™ä¸ªé—®é¢˜ï¼Œè¯·é—®å½±å“å¤§å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613936,"discussion_content":"æœ‰å½±å“ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¼šæœ‰å®‰å…¨éšæ‚£ï¼Œä¸è¿‡ç›¸ä¿¡ç¤¾åŒºå¾ˆå¿«ä¼šä¿®æ­£è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681613433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1015500,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/cc/da91bd47.jpg","nickname":"å‡æœ›","note":"","ucode":"EF26509C586C09","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":613998,"discussion_content":"è°¢è°¢è€å¸ˆè§£æƒ‘ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681620873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":613936,"ip_address":"å¹¿ä¸œ","group_id":0},"score":613998,"extra":""}]},{"author":{"id":3705704,"avatar":"https://static001.geekbang.org/account/avatar/00/38/8b/68/7b985768.jpg","nickname":"softnuggets","note":"","ucode":"6E294390F7ACC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":628136,"discussion_content":"è¿™ä¸ªæ˜¯ä»€ä¹ˆé—®é¢˜å‘€ èƒ½è§£é‡Šä¸‹å— ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695003437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¾å›½","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1221705,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a4/49/1c8598d1.jpg","nickname":"å†›èˆ°","note":"","ucode":"C7E97415F5196A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":615265,"discussion_content":"æœ€å¥½æ•´ä¸ªæ²™ç›’åœ¨é‡Œé¢è¿è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682151142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372611,"user_name":"æ¦•","can_delete":false,"product_type":"c1","uid":1053178,"ip_address":"å¹¿ä¸œ","ucode":"4611A40E21ECEB","user_header":"https://static001.geekbang.org/account/avatar/00/10/11/fa/e0dcc1bf.jpg","comment_is_top":false,"comment_ctime":1681350448,"is_pvip":false,"replies":[{"id":136122,"content":"å¯ä»¥çœ‹çœ‹åœ¨ä¸€äº›å¼€æºæ¨¡å‹ä¸Šè°ƒä¼˜ï¼Œæˆ‘ä»¬å‰é¢ä¹Ÿä»‹ç»è¿‡æ¯”å¦‚ChatGLMæˆ–è€…ç”¨ç°åœ¨ç™¾åº¦é˜¿é‡Œå¼€æ”¾å‡ºæ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681615633,"ip_address":"ä¸Šæµ·","comment_id":372611,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆå¥½ï¼Œé€šè¿‡langchainç­‰æ­¦å™¨åº“ç¡®å®ç»™äº†æˆ‘ä»¬ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å¾ˆå¤§çš„æƒ³è±¡ç©ºé—´ï¼Œä½†å‰æå¾—æœ‰å¤§è¯­è¨€æ¨¡å‹æ”¯æŒã€‚å¯¹äºåœ°åŒºé™åˆ¶è®¿é—®çš„é—®é¢˜ï¼Œé‚£å¯¹äºå›½å†…çš„ä¸ªäººæˆ–ä¼ä¸šè¦çœŸæ­£è½åœ°è¿™äº›èƒ½åŠ›ï¼Œç›®å‰æ˜¯é€šè¿‡å“ªäº›æ–¹å¼æ¥åšå‘¢ï¼Ÿè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613971,"discussion_content":"å¯ä»¥çœ‹çœ‹åœ¨ä¸€äº›å¼€æºæ¨¡å‹ä¸Šè°ƒä¼˜ï¼Œæˆ‘ä»¬å‰é¢ä¹Ÿä»‹ç»è¿‡æ¯”å¦‚ChatGLMæˆ–è€…ç”¨ç°åœ¨ç™¾åº¦é˜¿é‡Œå¼€æ”¾å‡ºæ¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681615633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1053178,"avatar":"https://static001.geekbang.org/account/avatar/00/10/11/fa/e0dcc1bf.jpg","nickname":"æ¦•","note":"","ucode":"4611A40E21ECEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":614009,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681629991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":613971,"ip_address":"å¹¿ä¸œ","group_id":0},"score":614009,"extra":""}]}]},{"had_liked":false,"id":372540,"user_name":"ä¸€å¶","can_delete":false,"product_type":"c1","uid":3577168,"ip_address":"ç¦å»º","ucode":"21E5455D0814E5","user_header":"https://static001.geekbang.org/account/avatar/00/36/95/50/01199ae9.jpg","comment_is_top":false,"comment_ctime":1681267297,"is_pvip":false,"replies":[{"id":135978,"content":"å¯ä»¥å•Šï¼ŒLangchainæ”¯æŒå¾ˆå¤šä¸åŒç±»å‹çš„VectorStoreï¼Œå¯ä»¥å»çœ‹æ–‡æ¡£\nhttps:&#47;&#47;python.langchain.com&#47;en&#47;latest&#47;modules&#47;indexes&#47;vectorstores.html\n\nè¿™é‡Œä½¿ç”¨FAISSåªæ˜¯æ¼”ç¤ºçš„æ—¶å€™ç¯å¢ƒè¦æ±‚æ¯”è¾ƒä½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681287045,"ip_address":"ä¸Šæµ·","comment_id":372540,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆè¿™æ®µä»£ç é‡Œé¢:\n\n\nfrom langchain.embeddings.openai import OpenAIEmbeddings\nfrom langchain.vectorstores import FAISS\nfrom langchain.text_splitter import SpacyTextSplitter\nfrom langchain import OpenAI, VectorDBQA\nfrom langchain.document_loaders import TextLoader\n\nllm = OpenAI(temperature=0)\nloader = TextLoader(&#39;.&#47;data&#47;ecommerce_faq.txt&#39;)\ndocuments = loader.load()\ntext_splitter = SpacyTextSplitter(chunk_size=256, pipeline=&quot;zh_core_web_sm&quot;)\ntexts = text_splitter.split_documents(documents)\n\nembeddings = OpenAIEmbeddings()\ndocsearch = FAISS.from_documents(texts, embeddings)\n\nfaq_chain = VectorDBQA.from_chain_type(llm=llm, vectorstore=docsearch, verbose=True)\n\nå¯ä»¥æŠŠç´¢å¼•ç»™ä¿å­˜åˆ°æ•°æ®åº“å—? ä»¥åå†ç»§ç»­ä½¿ç”¨?","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613358,"discussion_content":"å¯ä»¥å•Šï¼ŒLangchainæ”¯æŒå¾ˆå¤šä¸åŒç±»å‹çš„VectorStoreï¼Œå¯ä»¥å»çœ‹æ–‡æ¡£\nhttps://python.langchain.com/en/latest/modules/indexes/vectorstores.html\n\nè¿™é‡Œä½¿ç”¨FAISSåªæ˜¯æ¼”ç¤ºçš„æ—¶å€™ç¯å¢ƒè¦æ±‚æ¯”è¾ƒä½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681287045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372536,"user_name":"ä¸€å¶","can_delete":false,"product_type":"c1","uid":3577168,"ip_address":"ç¦å»º","ucode":"21E5455D0814E5","user_header":"https://static001.geekbang.org/account/avatar/00/36/95/50/01199ae9.jpg","comment_is_top":false,"comment_ctime":1681266316,"is_pvip":false,"replies":[{"id":135977,"content":"RequestsChainå¯ä»¥è®¿é—®Googleï¼Œ17è®²é‡Œä»‹ç»çš„Agentè¿˜å¯ä»¥è®©AIè‡ªåŠ¨é€‰æ‹©ç”¨ä»€ä¹ˆå·¥å…·ï¼Œç»§ç»­å¾€ä¸‹çœ‹å§","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1053568,"ctime":1681286975,"ip_address":"ä¸Šæµ·","comment_id":372536,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è€å¸ˆ,æˆ‘æœ‰ä¸ªé—®é¢˜å¯ä»¥è§£ç­”ä¸€ä¸‹å—?æˆ‘ä»¬ç›®å‰å¼€å‘çš„ä¸€æ¬¾app,å°±æœ‰å®¢æˆ·é—®åˆ°ç±»ä¼¼çš„é—®é¢˜,æ¯”å¦‚ä»Šå¤©çš„æ—¶é—´,Chatgptå°±æ²¡åŠæ³•å®Œæ•´çš„å›ç­”,æˆ‘çœ‹åˆ°ä¸Šé¢çš„ç¼–è¯‘Pythonçš„æ–¹å¼ä¼¼ä¹å¯è¡Œ,ä½†æ˜¯ä¼¼ä¹ç”¨æˆ·çš„é—®é¢˜åƒå¥‡ç™¾æ€ª,æ¯”å¦‚æœ‰çš„åˆä¼šé—®åˆ°æ•°å­¦...è€Œæœ‰çš„llmç›´æ¥å°±èƒ½è§£å†³,åœ¨è¿™ç§æƒ…å†µä¸‹,æˆ‘è¦æ€ä¹ˆå®ç°ä¼šæ›´å¥½?","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613357,"discussion_content":"RequestsChainå¯ä»¥è®¿é—®Googleï¼Œ17è®²é‡Œä»‹ç»çš„Agentè¿˜å¯ä»¥è®©AIè‡ªåŠ¨é€‰æ‹©ç”¨ä»€ä¹ˆå·¥å…·ï¼Œç»§ç»­å¾€ä¸‹çœ‹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681286976,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":3577168,"avatar":"https://static001.geekbang.org/account/avatar/00/36/95/50/01199ae9.jpg","nickname":"ä¸€å¶","note":"","ucode":"21E5455D0814E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":614992,"discussion_content":"è€å¸ˆï¼Œç”¨äº†ä»£ç†çš„æ–¹å¼ï¼Œä½†æ˜¯æ„Ÿè§‰æ€»æ˜¯æ§åˆ¶ä¸å¥½ï¼Œæˆ‘æƒ³åªæœ‰è®©ä»–ä¸çŸ¥é“ç­”æ¡ˆçš„æ—¶å€™æ‰å»æœç´¢ï¼Œä½†æ˜¯å®ƒä¼¼ä¹æ¯æ¬¡é‡åˆ°é—®é¢˜å°±ä¼šç›´æ¥æœç´¢â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681993516,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":613357,"ip_address":"ç¦å»º","group_id":0},"score":614992,"extra":""}]}]},{"had_liked":false,"id":372549,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"ä¸Šæµ·","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1681273364,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"ChatGPTè¢«ä½œä¸ºä¸€ç§èƒ½åŠ›å»ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯X+AIæ¨¡å¼ï¼Œç¡®å®æœ‰ä¸å°çš„æƒ³è±¡ç©ºé—´ã€‚\nä½†åè¿‡æ¥ï¼Œå¦‚æœ‰ä¸€ä¸ªå¤§æ¨¡å‹ï¼Œèƒ½å¿«é€Ÿæ•´åˆå„ç§å¤–éƒ¨èƒ½åŠ›ï¼Œä»X+AIï¼Œå˜æˆAI+Xã€Yã€Zï¼Œå¾ˆå¯èƒ½ä¼šæˆä¸ºä¸‹ä¸€ä»£äº’è”ç½‘çš„å…¥å£ï¼Œå¹¶ä»å„ç§ç»´åº¦ç»™äººç±»å¸¦æ¥å…¨æ–°ä½“éªŒï¼ŒæœŸå¾…è¿™ä¸ªæ—¶ä»£èƒ½å°½å¿«åˆ°æ¥ã€‚","like_count":5},{"had_liked":false,"id":377740,"user_name":"æœˆç‹¼è‘±è‘±","can_delete":false,"product_type":"c1","uid":1101360,"ip_address":"ç¾å›½","ucode":"506D751D956F87","user_header":"https://static001.geekbang.org/account/avatar/00/10/ce/30/eb380376.jpg","comment_is_top":false,"comment_ctime":1689135954,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"è·‘ä»£ç çš„æ—¶å€™å‘ç°UserWarning: `VectorDBQA` is deprecated - please use `from langchain.chains import RetrievalQA`\n\nä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š\n\nfrom langchain.chains import RetrievalQA\n\nqa = RetrievalQA.from_chain_type(llm=OpenAI(temperature=0), chain_type=&quot;stuff&quot;, retriever=docsearch.as_retriever())\nquestion = &quot;è¯·é—®ä½ ä»¬çš„è´§ï¼Œèƒ½é€åˆ°ä¸‰äºšå—ï¼Ÿå¤§æ¦‚éœ€è¦å‡ å¤©ï¼Ÿ&quot;\nresult = qa.run(question)\n\nprint(result)\n\nå‚è€ƒæ–‡æ¡£ï¼šhttps:&#47;&#47;www.langchain.com.cn&#47;modules&#47;chains&#47;index_examples&#47;vector_db_qa","like_count":2},{"had_liked":false,"id":376880,"user_name":"ç¡•æœé˜³å…‰","can_delete":false,"product_type":"c1","uid":1064133,"ip_address":"ç¾å›½","ucode":"C59841EB675535","user_header":"https://static001.geekbang.org/account/avatar/00/10/3c/c5/92017a7b.jpg","comment_is_top":false,"comment_ctime":1687625427,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"btw VectorDBQA å·²ç»è¢«deprecated and replaced by RetrivalQA\nhttps:&#47;&#47;python.langchain.com&#47;docs&#47;modules&#47;chains&#47;popular&#47;vector_db_qa","like_count":2},{"had_liked":false,"id":372533,"user_name":"Evan","can_delete":false,"product_type":"c1","uid":1344281,"ip_address":"ä¸Šæµ·","ucode":"B877ABD0CF4661","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/19/0a3fe8c1.jpg","comment_is_top":false,"comment_ctime":1681263292,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"RequestsChain éå¸¸æœ‰æ•ˆçš„ï¼Œèƒ½è°ƒç”¨å¤–éƒ¨æ¥å£çš„","like_count":1},{"had_liked":false,"id":386329,"user_name":"è’¸å‘æ°ä½œ","can_delete":false,"product_type":"c1","uid":1802993,"ip_address":"ä¸Šæµ·","ucode":"1D0AD0DB75E0F8","user_header":"https://static001.geekbang.org/account/avatar/00/1b/82/f1/6f8bf660.jpg","comment_is_top":false,"comment_ctime":1704595305,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100541001,"comment_content":"æ„Ÿè§‰åˆ°äº†AIç¡®å®åœ¨è“¬å‹ƒå‘å±•ï¼Œä¸€å¤§å †ç±»åº“ï¼Œç›®å‰è¿˜åœ¨è“„åŠ¿å¾…å‘","like_count":0},{"had_liked":false,"id":379363,"user_name":"Penguin Shi","can_delete":false,"product_type":"c1","uid":3646806,"ip_address":"å¹¿ä¸œ","ucode":"477A24D7ECE09A","user_header":"https://static001.geekbang.org/account/avatar/00/37/a5/56/b3cf71a9.jpg","comment_is_top":false,"comment_ctime":1691816370,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"&quot;é€šè¿‡ VectorDBQA æ¥å®ç°å…ˆæœç´¢å†å›å¤çš„èƒ½åŠ›&quot;åé¢çš„ç¬¬ä¸€æ®µä»£ç ï¼Œç”±äºlangchain RetrievalQAæ¨¡å—ä½¿ç”¨å˜åŒ–ï¼Œè°ƒè¯•å¾ˆä¹…ï¼Œæ‰å¯è¿è¡Œã€‚å¯è¿è¡Œçš„ä»£ç å¦‚ä¸‹ï¼Œä¾›å‚è€ƒï¼š\nfrom langchain.llms import OpenAI\nfrom langchain import FAISS\nfrom langchain.embeddings import OpenAIEmbeddings\nfrom langchain.text_splitter import SpacyTextSplitter\n\nfrom langchain.chains import RetrievalQA\nfrom langchain.document_loaders import TextLoader\nfrom langchain.vectorstores.base import VectorStoreRetriever\n\n\nllm = OpenAI(temperature=0)\nloader = TextLoader(&#39;.&#47;data&#47;ecommerce_faq.txt&#39;)\ndocuments = loader.load()\ntext_splitter = SpacyTextSplitter(chunk_size=256, pipeline=&quot;zh_core_web_sm&quot;)\ntexts = text_splitter.split_documents(documents)\n\nembeddings = OpenAIEmbeddings()\n\ndocsearch = FAISS.from_documents(texts, embeddings)\nretriever = VectorStoreRetriever(vectorstore=docsearch)\nfaq_chain = RetrievalQA.from_llm(llm=llm, retriever=retriever, verbose=True)","like_count":0},{"had_liked":false,"id":375072,"user_name":"zgxx","can_delete":false,"product_type":"c1","uid":1046259,"ip_address":"æµ™æ±Ÿ","ucode":"B6DA1BA1B3708A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/f3/69fdc9c8.jpg","comment_is_top":false,"comment_ctime":1684862747,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100541001,"comment_content":"final_result = final_chain.run(inputs)\n\ninputsæ˜¯å“ªé‡Œæ¥çš„","like_count":0}]}