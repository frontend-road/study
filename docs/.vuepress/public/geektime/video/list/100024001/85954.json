{"id":85954,"title":"20 | panicå’Œrecover","content":"<h1>è¯¾ä»¶åŠæºä»£ç åœ°å€</h1><p><a href=\"https://gitee.com/geektime-geekbang/go_learning\">https://gitee.com/geektime-geekbang/go_learning</a></p><h2>ä¹¦ç›®æ¨è</h2><p><a href=\"time://mall?url=https%3A%2F%2Fh5.youzan.com%2Fv2%2Fgoods%2F1ycmk3uob0ryw\">ã€Šè®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Šã€‹</a></p>","comments":[{"had_liked":false,"id":158892,"user_name":"ç‹å…ˆæ£®","can_delete":false,"product_type":"c3","uid":1022267,"ip_address":"","ucode":"1AF1A395107479","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/3b/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1575471516,"is_pvip":false,"replies":[{"id":61475,"content":"func TestPanicVxExit(t *testing.T) {\n\n\tdefer func() {\n\t\tif err := recover(); err != nil {\n\t\t\tfmt.Println(&quot;recovered from &quot;, err)\n\t\t}\n\t}()\n\tfmt.Println(&quot;Start&quot;)\n\tpanic(errors.New(&quot;Something wrong!&quot;))\n}\n\n&#47;&#47;output:\nStart\nrecovered from  Something wrong!\n\nä»è¾“å‡ºä½ å¯ä»¥çœ‹å‡ºdeferå¤„ç†äº†panicä¸­æŠ›å‡ºçš„error","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1576159576,"ip_address":"","comment_id":158892,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"è€å¸ˆçš„è§†é¢‘ä¸­ ç¬¬ä¸€ä¸ªä¾‹å­è²Œä¼¼deferçš„æ‰§è¡Œç»“æœçœ‹ã€‚æ˜¯åœ¨panicä¹‹å‰ï¼Œè´¹è§£ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476884,"discussion_content":"func TestPanicVxExit(t *testing.T) {\n\n\tdefer func() {\n\t\tif err := recover(); err != nil {\n\t\t\tfmt.Println(&amp;quot;recovered from &amp;quot;, err)\n\t\t}\n\t}()\n\tfmt.Println(&amp;quot;Start&amp;quot;)\n\tpanic(errors.New(&amp;quot;Something wrong!&amp;quot;))\n}\n\n//output:\nStart\nrecovered from  Something wrong!\n\nä»è¾“å‡ºä½ å¯ä»¥çœ‹å‡ºdeferå¤„ç†äº†panicä¸­æŠ›å‡ºçš„error","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576159576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2890901,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/1c/95/3d8920c9.jpg","nickname":"abcdabcd999","note":"","ucode":"E1D9902737F544","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600321,"discussion_content":"è‚¯å®šæ˜¯åœ¨ panic ä¹‹åå•Šï¼Œä½  defer å‡½æ•°çš„è¾“å‡ºéƒ½æ‹¿åˆ°Something wrong äº†ï¼Œä½ è¯´æ˜¯è°å…ˆæ‰§è¡Œçš„ï¼Œç»äº†è¿™é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674207438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1350159,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9a/0f/da7ed75a.jpg","nickname":"èŠ’æœå°‘ä¾ ","note":"","ucode":"98D0BBB52BB80F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403662,"discussion_content":"å•çº¯ä»è¾“å‡ºæ¥çœ‹ï¼Œä¼¼ä¹ç¡®å®æ˜¯å…ˆdeferå†panicäº†ã€‚ä½†é€šè¿‡è€å¸ˆè¿™ä¸ªç­”æ¡ˆå¯ä»¥çœ‹åˆ°ï¼Œåœ¨deferå‡½æ•°é‡Œï¼Œå·²ç»èƒ½æ•è·åˆ°panicçš„erroräº†ï¼Œè¯´æ˜æ˜¯å…ˆpanicçš„ã€‚åªæ˜¯è¾“å‡ºé¡ºåºé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634127844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280842,"user_name":"ç”³","can_delete":false,"product_type":"c3","uid":2033634,"ip_address":"","ucode":"CE7BFCF552B4F1","user_header":"https://static001.geekbang.org/account/avatar/00/1f/07/e2/32c9a634.jpg","comment_is_top":false,"comment_ctime":1614418032,"is_pvip":false,"replies":[{"id":102102,"content":"ğŸ˜Š","user_name":"ä½œè€…å›å¤","user_name_real":"è”¡è¶…","uid":1008262,"ctime":1614647534,"ip_address":"","comment_id":280842,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"panicèƒ½å¤Ÿæ”¹å˜ç¨‹åºçš„æ§åˆ¶æµï¼Œè°ƒç”¨ panic åä¼šç«‹åˆ»åœæ­¢æ‰§è¡Œå½“å‰å‡½æ•°çš„å‰©ä½™ä»£ç ï¼Œå¹¶åœ¨å½“å‰ Goroutine ä¸­é€’å½’æ‰§è¡Œè°ƒç”¨æ–¹çš„deferï¼›\nrecoverå¯ä»¥ä¸­æ­¢ panic é€ æˆçš„ç¨‹åºå´©æºƒã€‚å®ƒæ˜¯ä¸€ä¸ªåªèƒ½åœ¨ defer ä¸­å‘æŒ¥ä½œç”¨çš„å‡½æ•°ï¼Œåœ¨å…¶ä»–ä½œç”¨åŸŸä¸­è°ƒç”¨ä¸ä¼šå‘æŒ¥ä½œç”¨ã€‚","like_count":4,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516225,"discussion_content":"ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614647534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82838,"user_name":"è¡Œå†›ä¼™å¤«","can_delete":false,"product_type":"c3","uid":1198350,"ip_address":"","ucode":"DC1792FDBC8D38","user_header":"https://static001.geekbang.org/account/avatar/00/12/49/0e/6121d428.jpg","comment_is_top":false,"comment_ctime":1554338299,"is_pvip":false,"replies":[{"id":29962,"content":"ä½ æ˜¯ä»€ä¹ˆæ“ä½œç³»ç»Ÿï¼Ÿè¯•è¯•echo $?","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1554364449,"ip_address":"","comment_id":82838,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"è€å¸ˆï¼Œä¸ºå•¥æˆ‘os.Exit(-1)ï¼Œåœ¨è¾“å‡ºçš„åœ°æ–¹æ²¡æœ‰çœ‹åˆ°exit status 255","like_count":4,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445746,"discussion_content":"ä½ æ˜¯ä»€ä¹ˆæ“ä½œç³»ç»Ÿï¼Ÿè¯•è¯•echo $?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554364449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1356077,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b1/2d/661132f3.jpg","nickname":"ä½šå","note":"","ucode":"A4E35B21AC3C31","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":102612,"discussion_content":"mac os mojave 10.14.6æ²¡æœ‰è¿™è¡Œï¼Œecho $?ç»“æœæ˜¯0","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577356865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435172,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e6/24/30806a88.jpg","nickname":"right-chen","note":"","ucode":"E0E940E80E7A2D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582687,"discussion_content":"mac os ï¼ŒåŒæ ·è¿™æ ·çš„æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659597026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1077127,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6f/87/669263b4.jpg","nickname":"é™ˆé‡‘é‘«","note":"","ucode":"609A24832CA80C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397867,"discussion_content":"Ubuntuç³»ç»Ÿæ˜¯ï¼šexit status 255","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632686707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1899341,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/fb/4d/c5ac9df5.jpg","nickname":"Vicky~å©µå¨Ÿ","note":"","ucode":"E10E28773B60F9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216256,"discussion_content":"æˆ‘çš„ä¹Ÿæ˜¯æ²¡çœ‹åˆ°ä»»ä½•ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585410930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1442588,"avatar":"https://static001.geekbang.org/account/avatar/00/16/03/1c/c9fe6738.jpg","nickname":"Kvicii.Y","note":"","ucode":"446BFA633569EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":172460,"discussion_content":"ä¿ºä¹Ÿä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581778457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135688,"user_name":"iMARS","can_delete":false,"product_type":"c3","uid":1113733,"ip_address":"","ucode":"10C5C31908AA09","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/85/9ab352a7.jpg","comment_is_top":false,"comment_ctime":1569241648,"is_pvip":false,"replies":[{"id":52938,"content":"goä¸æ˜¯é‡‡ç”¨å¼‚å¸¸æœºåˆ¶çš„ï¼Œè€Œæ˜¯é‡‡ç”¨é”™è¯¯æœºåˆ¶\nfun m3() error{\n    ...\n    return errors.New(&quot;failed to run m3&quot;)\n}\n\nfunc m2() error{\n     err:=m3()\n     if err!=nil{\n         return err\n     }\n     ...\n}\n\nè€Œpanicå’Œrecoveryä¹Ÿå¹¶ä¸æ˜¯å¦‚å…¶ä»–è¯­è¨€çš„exceptioné‚£æ ·ä½¿ç”¨çš„ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1569836093,"ip_address":"","comment_id":135688,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"å¦‚ä½•è¿”å›è°ƒç”¨æ ˆçš„å†…éƒ¨å¼‚å¸¸ï¼Ÿä¾‹å¦‚ï¼Œm1 call m2ï¼Œm2åˆcalläº†m3ï¼Œç»“æœm3å¼•å‘äº†å¼‚å¸¸ï¼Œå¯¼è‡´m2å¤±è´¥ï¼Œå¦‚ä½•åŒ…è£¹m3çš„å¼‚å¸¸è¾“å‡ºï¼Ÿæœ‰æ²¡æœ‰å¥½çš„patternæˆ–å»ºè®®ï¼Ÿè°¢è°¢","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468304,"discussion_content":"goä¸æ˜¯é‡‡ç”¨å¼‚å¸¸æœºåˆ¶çš„ï¼Œè€Œæ˜¯é‡‡ç”¨é”™è¯¯æœºåˆ¶\nfun m3() error{\n    ...\n    return errors.New(&amp;quot;failed to run m3&amp;quot;)\n}\n\nfunc m2() error{\n     err:=m3()\n     if err!=nil{\n         return err\n     }\n     ...\n}\n\nè€Œpanicå’Œrecoveryä¹Ÿå¹¶ä¸æ˜¯å¦‚å…¶ä»–è¯­è¨€çš„exceptioné‚£æ ·ä½¿ç”¨çš„ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569836093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1352152,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELcM4karUTtLlszX1FPaYKcbsfsthZiahTpYlnFgQIS3PcJStvKTCE9OqbJfgxxzfrg1t0CpuspHCQ/132","nickname":"will","note":"","ucode":"57980692086041","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":42593,"discussion_content":"go1.13æ–°çš„é”™è¯¯å¤„ç†wrapæ–¹å¼ï¼Œç°åœ¨èƒ½æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572705600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113611,"user_name":"å”¯ä¸€","can_delete":false,"product_type":"c3","uid":1475143,"ip_address":"","ucode":"6858AB45082E85","user_header":"https://static001.geekbang.org/account/avatar/00/16/82/47/f4430522.jpg","comment_is_top":false,"comment_ctime":1563094245,"is_pvip":false,"replies":[{"id":41827,"content":"recoverä¸€èˆ¬é€‚ç”¨äºåº”ç”¨ç¨‹åºå…¨å±€çš„æœªå¤„ç†é”™è¯¯è€Œä¸æ˜¯æŸä¸ªå‡½æ•°ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1563353539,"ip_address":"","comment_id":113611,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"è€å¸ˆï¼Œè¯·é—®ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°å‘ç”Ÿäº†ä¸å¯é¢„çŸ¥çš„è¿è¡Œæ—¶é”™è¯¯ï¼Œæˆ‘ä»¬æ€ä¹ˆè®©è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰çš„å€¼ï¼Œæˆ‘åœ¨deferçš„å‡½æ•°é‡Œè°ƒç”¨äº†recoveråï¼Œå‘ç°å‡½æ•°è¿”å›çš„æ˜¯è¿”å›æ•°æ®ç±»å‹çš„é›¶å€¼ï¼Œä½†æœ‰æ²¡æœ‰åŠæ³•è‡ªå®šä¹‰è¿™ä¸ªè¿è¡Œæ—¶é”™è¯¯çš„è¿”å›å€¼ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458308,"discussion_content":"recoverä¸€èˆ¬é€‚ç”¨äºåº”ç”¨ç¨‹åºå…¨å±€çš„æœªå¤„ç†é”™è¯¯è€Œä¸æ˜¯æŸä¸ªå‡½æ•°ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563353539,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":389121,"user_name":"ç‹å¹¿å¤§","can_delete":false,"product_type":"c3","uid":1645005,"ip_address":"æµ™æ±Ÿ","ucode":"4FC4732B13CFB6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJgdor14prMkNrYCn0bxKF4tVB86DO5peVBxpOsicMHhNPF8COlcWfoKdpJsRibfKQ7l7Ou8zSeJzrA/132","comment_is_top":false,"comment_ctime":1711616827,"is_pvip":false,"replies":[{"id":141636,"content":"panic é€€å‡ºå‰ä¼šæ‰§â¾ defer æŒ‡å®šçš„å†…å®¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1008262,"ctime":1712110624,"ip_address":"åŒ—äº¬","comment_id":389121,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"func TestPanicVxExit(t *testing.T) {\n\n\tdefer func() {\n\n\t\tfmt.Println(&quot;testing...........&quot;)\n\t\t&#47;&#47;if err := recover(); err != nil {\n\t\t&#47;&#47;\tfmt.Println(&quot;recovered from&quot;, err)\n\t\t&#47;&#47;}\n\t}()\n\tfmt.Println(&quot;Start&quot;)\n\tpanic(errors.New(&quot;Something wrong&quot;))\n\tfmt.Println(&quot;End&quot;)\n\n}\n\næ‰§è¡Œç»“æœ\n=== RUN   TestPanicVxExit\nStart\ntesting...........\n--- FAIL: TestPanicVxExit (0.00s)\npanic: Something wrong [recovered]\n\tpanic: Something wrong\n\nä»æ‰§è¡Œç»“æœçœ‹è²Œä¼¼æ˜¯defer å…ˆäºpanic æ‰§è¡Œçš„","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":641037,"discussion_content":"panic é€€å‡ºå‰ä¼šæ‰§â¾ defer æŒ‡å®šçš„å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1712110624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332858,"user_name":"slssdhs","can_delete":false,"product_type":"c3","uid":1138058,"ip_address":"","ucode":"6644520A415C69","user_header":"https://static001.geekbang.org/account/avatar/00/11/5d/8a/894479c1.jpg","comment_is_top":false,"comment_ctime":1643743855,"is_pvip":false,"replies":[{"id":127021,"content":"è¿”å›çš„æ˜¯panicçš„é”™è¯¯ä¿¡æ¯ï¼Œåœ¨è°ƒç”¨panicæ—¶å¯ä»¥ä¼ å…¥é”™è¯¯ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼španic(â€œsomething is wrongâ€)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1008262,"ctime":1655601747,"ip_address":"","comment_id":332858,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"æ‚¨å¥½ è¯·é—®ä¸€ä¸‹ä¸ºä»€ä¹ˆä»panicæ¢å¤çš„ä»£ç æ˜¯é‚£ä¹ˆå†™çš„ï¼Ÿæ›´å…·ä½“æ¥è¯´æ˜¯ if err := recover(); err != nil è¿™é‡Œ. æ­¤å¤„errè¢«èµ‹å€¼äº†ä¸€ä¸ªå‡½æ•°ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯èƒ½æ¥æ”¶åˆ°é”™è¯¯ä¿¡æ¯å‘¢ï¼Ÿè¿˜æ˜¯è¯´æˆ‘ç†è§£é”™äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576492,"discussion_content":"è¿”å›çš„æ˜¯panicçš„é”™è¯¯ä¿¡æ¯ï¼Œåœ¨è°ƒç”¨panicæ—¶å¯ä»¥ä¼ å…¥é”™è¯¯ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼španic(â€œsomething is wrongâ€)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655601747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286742,"user_name":"escray","can_delete":false,"product_type":"c3","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1617544671,"is_pvip":true,"replies":[{"id":104463,"content":"ä½¿ç”¨ä»£mainçš„goç¨‹åºï¼Œè®©åç¼–è¯‘ã€‚æ‰§è¡Œç¼–è¯‘åçš„äºŒè¿›åˆ¶ã€‚åœ¨é€šè¿‡echo $?","user_name":"ä½œè€…å›å¤","user_name_real":"è”¡è¶…","uid":1008262,"ctime":1618104880,"ip_address":"","comment_id":286742,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"æ¢å¤æœºåˆ¶å¸¸å¸¸è¢«é”™è¯¯ä½¿ç”¨ï¼Œåªæ˜¯ç®€å•çš„æ‰“å°çš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ–è€…æ˜¯åå™¬äº†å¼‚å¸¸ã€‚\n\nåœ¨ Go è¯­è¨€é‡Œé¢ï¼Œä¸€èˆ¬è¯´æ˜¯é”™è¯¯å¤„ç†ï¼Œè€Œä¸æ˜¯å¼‚å¸¸å¤„ç†ã€‚\n\næˆ‘çš„ os.Exit(-1) ä¹Ÿæ²¡æœ‰è¾“å‡ºé”™è¯¯ä»£ç  255ï¼Œecho $? çš„ç»“æœæ˜¯ï¼š0\n\nmacOS Big Sur 11.2.3\n\nfunc TestPanicVsExit(t *testing.T) {\n\tdefer func() {\n\t\tfmt.Println(&quot;Finally&quot;)\n\t}()\n\tdefer func() {\n\t\tif err := recover(); err != nil {\n\t\t\tfmt.Println(&quot;recovered from &quot;, err)\n\t\t}\n\t}()\n\tfmt.Println(&quot;Start&quot;)\n\tpanic(errors.New(&quot;something wrong!&quot;))\n\t&#47;&#47; os.Exit(-1)\n\t&#47;&#47; fmt.Println(&quot;End&quot;)\n}","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518078,"discussion_content":"ä½¿ç”¨ä»£mainçš„goç¨‹åºï¼Œè®©åç¼–è¯‘ã€‚æ‰§è¡Œç¼–è¯‘åçš„äºŒè¿›åˆ¶ã€‚åœ¨é€šè¿‡echo $?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618104880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2890901,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/1c/95/3d8920c9.jpg","nickname":"abcdabcd999","note":"","ucode":"E1D9902737F544","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600322,"discussion_content":"n æ¬¡è¸©å‘å‘Šè¯‰æˆ‘ ä¸è¦ä½¿ç”¨ macos ä½œä¸ºä½ çš„å¼€å‘ç³»ç»Ÿï¼Œå®ƒåªæ˜¯ç”¨æ¥å†™æ–‡æ¡£çš„ï¼Œå¼€å‘ç¯å¢ƒè¿˜æ˜¯è¦ç”¨ ubuntu","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674207830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":146928,"user_name":"will","can_delete":false,"product_type":"c3","uid":1352152,"ip_address":"","ucode":"57980692086041","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELcM4karUTtLlszX1FPaYKcbsfsthZiahTpYlnFgQIS3PcJStvKTCE9OqbJfgxxzfrg1t0CpuspHCQ/132","comment_is_top":false,"comment_ctime":1572705255,"is_pvip":false,"replies":[{"id":56771,"content":"deferå®šä¹‰çš„èŒƒå›´å¯¹å—ï¼Ÿç²˜è´´ä¸€ä¸‹ä½ çš„ä»£ç å§","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1572744991,"ip_address":"","comment_id":146928,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"è€å¸ˆï¼Œè¯·é—®ï¼Œæˆ‘çš„deferå‡½æ•°é‡Œé¢å†è°ƒç”¨ä¸€ä¸ªå‡½æ•°ä½¿ç”¨äº†recoverï¼Œä¸ºä»€ä¹ˆcatchä¸äº†panicï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473060,"discussion_content":"deferå®šä¹‰çš„èŒƒå›´å¯¹å—ï¼Ÿç²˜è´´ä¸€ä¸‹ä½ çš„ä»£ç å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572744991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341550,"user_name":"ç†Šå‡ºæ²¡","can_delete":false,"product_type":"c3","uid":1145377,"ip_address":"","ucode":"6E39230CC87808","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/21/a33cc944.jpg","comment_is_top":false,"comment_ctime":1649687593,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"Windowsç³»ç»Ÿ os.Exit(-1)æ‰“å°çš„æ˜¯4294967295","like_count":0},{"had_liked":false,"id":287968,"user_name":"ç‹å®é‡‘","can_delete":false,"product_type":"c3","uid":1965760,"ip_address":"","ucode":"D80B4B2CC1C43F","user_header":"https://static001.geekbang.org/account/avatar/00/1d/fe/c0/9c0b3847.jpg","comment_is_top":false,"comment_ctime":1618235967,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"let it  crashæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1622022,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJia6zEsh2u119zJicmq7wApvnricZEKiawaZicice1cOzujWdFicFwPtavlHiaVpCNgCpxBtdl7ynd3y0wkQ/132","nickname":"james_xu","note":"","ucode":"12E50291F5BA89","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391851,"discussion_content":"å°±æ˜¯ä¸æ•è·å¼‚å¸¸ï¼Œè®©å¼‚å¸¸æŠ›å‡ºï¼Œè¿›ç¨‹é€€å‡º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630657978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251063,"user_name":"Geek_427d0c","can_delete":false,"product_type":"c3","uid":1876823,"ip_address":"","ucode":"D7A04138C4B8CB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/X4ib36ADEvj76XaKD4OUY9k15KqWCAVCwibPicBxz6BBUfDrVolpYInn8zFOw3JBPtVw3L4Lkibaf2eLPemwGKzAXA/132","comment_is_top":false,"comment_ctime":1601348742,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"å“ˆå“ˆå“ˆå“ˆï¼Œâ€œæˆ‘ä»¬å…ˆä¸å»è¯´è¿™æ˜¯ä¸æ˜¯ä¸€ä¸ªå¥½çš„ä¹ æƒ¯â€ï¼Œæ±‚ç”Ÿæ¬²éå¸¸å¼ºäº†ã€‚","like_count":0}]}