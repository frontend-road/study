{"id":2723,"title":"34 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼ˆ5ï¼‰- ä¿®é¥°å™¨æ¨¡å¼","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆçš“ï¼Œç½‘åå·¦è€³æœµè€—å­ã€‚</p>\n<p>åœ¨ä¸Šä¸€è®²ä¸­ï¼Œæˆ‘ä»¬é¢†ç•¥äº†å‡½æ•°å¼ç¼–ç¨‹çš„è¶£å‘³å’Œé­…åŠ›ï¼Œä¸»è¦è®²äº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¸»è¦æŠ€æœ¯ã€‚è¿˜è®°å¾—æœ‰å“ªäº›å—ï¼Ÿé€’å½’ã€Mapã€Reduceã€Filterç­‰ï¼Œå¹¶åˆ©ç”¨Pythonçš„Decoratorå’ŒGeneratoråŠŸèƒ½ï¼Œå°†å¤šä¸ªå‡½æ•°ç»„åˆæˆäº†ç®¡é“ã€‚</p>\n<p>æ­¤æ—¶ï¼Œä½ å¿ƒä¸­å¯èƒ½ä¼šæœ‰ä¸ªç–‘é—®ï¼Œè¿™ä¸ªdecoratoråˆæ˜¯æ€æ ·å·¥ä½œçš„å‘¢ï¼Ÿè¿™å°±æ˜¯æœ¬æ–‡ä¸­è¦è®²è¿°çš„å†…å®¹ï¼Œâ€œDecoratoræ¨¡å¼â€ï¼Œåˆå«â€œä¿®é¥°å™¨æ¨¡å¼â€ï¼Œæˆ–æ˜¯â€œè£…é¥°å™¨æ¨¡å¼â€ã€‚</p>\n<h1>Pythonçš„Decorator</h1>\n<p>Pythonçš„Decoratoråœ¨ä½¿ç”¨ä¸Šå’ŒJavaçš„Annotationï¼ˆä»¥åŠC#çš„Attributeï¼‰å¾ˆç›¸ä¼¼ï¼Œå°±æ˜¯åœ¨æ–¹æ³•åå‰é¢åŠ ä¸€ä¸ª@XXXæ³¨è§£æ¥ä¸ºè¿™ä¸ªæ–¹æ³•è£…é¥°ä¸€äº›ä¸œè¥¿ã€‚ä½†æ˜¯ï¼ŒJava/C#çš„Annotationä¹Ÿå¾ˆè®©äººæœ›è€Œå´æ­¥ï¼Œå¤ªè¿‡äºå¤æ‚äº†ã€‚ä½ è¦ç©å®ƒï¼Œéœ€è¦å…ˆäº†è§£ä¸€å †Annotationçš„ç±»åº“æ–‡æ¡£ï¼Œæ„Ÿè§‰å‡ ä¹å°±æ˜¯åœ¨å­¦å¦å¤–ä¸€é—¨è¯­è¨€ã€‚</p>\n<p>è€ŒPythonä½¿ç”¨äº†ä¸€ç§ç›¸å¯¹äºDecorator Patternå’ŒAnnotationæ¥è¯´éå¸¸ä¼˜é›…çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•ä¸éœ€è¦ä½ å»æŒæ¡ä»€ä¹ˆå¤æ‚çš„OOæ¨¡å‹æˆ–æ˜¯Annotationçš„å„ç§ç±»åº“è§„å®šï¼Œå®Œå…¨å°±æ˜¯è¯­è¨€å±‚é¢çš„ç©æ³•ï¼šä¸€ç§å‡½æ•°å¼ç¼–ç¨‹çš„æŠ€å·§ã€‚</p>\n<p>è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªæ¨¡å¼äº†ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæŒºå¥½ç©å„¿çš„ä¸œè¥¿ï¼Œè¿™ä¸ªæ¨¡å¼åŠ¨ç”¨äº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªæŠ€æœ¯â€”â€”ç”¨ä¸€ä¸ªå‡½æ•°æ¥æ„é€ å¦ä¸€ä¸ªå‡½æ•°ã€‚</p>\n<!-- [[[read_end]]] -->\n<p>å¥½äº†ï¼Œæˆ‘ä»¬å…ˆæ¥ç‚¹æ„Ÿæ€§è®¤è¯†ï¼Œçœ‹ä¸€ä¸ªPythonä¿®é¥°å™¨çš„Hello Worldä»£ç ã€‚</p>\n<pre><code>def hello(fn):\n    def wrapper():\n        print &quot;hello, %s&quot; % fn.__name__\n        fn()\n        print &quot;goodbye, %s&quot; % fn.__name__\n    return wrapper\n \n@hello\ndef Hao():\n    print &quot;i am Hao Chen&quot;\n \nHao()\n</code></pre>\n<p>ä»£ç çš„æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>\n<pre><code>$ python hello.py\nhello, Hao\ni am Hao Chen\ngoodbye, Hao\n</code></pre>\n<p>ä½ å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„ä¸œè¥¿ï¼š</p>\n<ol>\n<li>\n<p>å‡½æ•° <code>Hao</code> å‰é¢æœ‰ä¸ª@helloçš„â€œæ³¨è§£â€ï¼Œ<code>hello</code> å°±æ˜¯æˆ‘ä»¬å‰é¢å®šä¹‰çš„å‡½æ•° <code>hello</code>ï¼›</p>\n</li>\n<li>\n<p>åœ¨ <code>hello</code> å‡½æ•°ä¸­ï¼Œå…¶éœ€è¦ä¸€ä¸ª <code>fn</code> çš„å‚æ•°ï¼ˆè¿™å°±æ˜¯ç”¨æ¥åšå›è°ƒçš„å‡½æ•°ï¼‰ï¼›</p>\n</li>\n<li>\n<p>helloå‡½æ•°ä¸­è¿”å›äº†ä¸€ä¸ªinnerå‡½æ•° <code>wrapper</code>ï¼Œè¿™ä¸ª <code>wrapper</code>å‡½æ•°å›è°ƒäº†ä¼ è¿›æ¥çš„ <code>fn</code>ï¼Œå¹¶åœ¨å›è°ƒå‰ååŠ äº†ä¸¤æ¡è¯­å¥ã€‚</p>\n</li>\n</ol>\n<p>å¯¹äºPythonçš„è¿™ä¸ª@æ³¨è§£è¯­æ³•ç³–ï¼ˆSyntactic sugarï¼‰æ¥è¯´ï¼Œå½“ä½ åœ¨ç”¨æŸä¸ª@decoratoræ¥ä¿®é¥°æŸä¸ªå‡½æ•° <code>func</code> æ—¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>\n<pre><code>@decorator\ndef func():\n    pass\n</code></pre>\n<p>å…¶è§£é‡Šå™¨ä¼šè§£é‡Šæˆä¸‹é¢è¿™æ ·çš„è¯­å¥ï¼š</p>\n<pre><code>func = decorator(func)\n</code></pre>\n<p>å˜¿ï¼è¿™ä¸å°±æ˜¯æŠŠä¸€ä¸ªå‡½æ•°å½“å‚æ•°ä¼ åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œç„¶åå†å›è°ƒå—ï¼Ÿæ˜¯çš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œé‚£é‡Œè¿˜æœ‰ä¸€ä¸ªèµ‹å€¼è¯­å¥ï¼ŒæŠŠdecoratorè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼èµ‹å€¼å›äº†åŸæ¥çš„ <code>func</code>ã€‚</p>\n<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªå¸¦å‚æ•°çš„ç©æ³•ï¼š</p>\n<pre><code>def makeHtmlTag(tag, *args, **kwds):\n    def real_decorator(fn):\n        css_class = &quot; class='{0}'&quot;.format(kwds[&quot;css_class&quot;]) \\\n                                     if &quot;css_class&quot; in kwds else &quot;&quot;\n        def wrapped(*args, **kwds):\n            return &quot;&lt;&quot;+tag+css_class+&quot;&gt;&quot; + fn(*args, **kwds) + &quot;&lt;/&quot;+tag+&quot;&gt;&quot;\n        return wrapped\n    return real_decorator\n \n@makeHtmlTag(tag=&quot;b&quot;, css_class=&quot;bold_css&quot;)\n@makeHtmlTag(tag=&quot;i&quot;, css_class=&quot;italic_css&quot;)\ndef hello():\n    return &quot;hello world&quot;\n \nprint hello()\n \n# è¾“å‡ºï¼š\n# &lt;b class='bold_css'&gt;&lt;i class='italic_css'&gt;hello world&lt;/i&gt;&lt;/b&gt;\n</code></pre>\n<p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š<code>makeHtmlTag</code>æœ‰ä¸¤ä¸ªå‚æ•°ã€‚æ‰€ä»¥ï¼Œä¸ºäº†è®© <code>hello = makeHtmlTag(arg1, arg2)(hello)</code> æˆåŠŸï¼Œ <code>makeHtmlTag</code> å¿…éœ€è¿”å›ä¸€ä¸ªdecoratorï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ <code>makeHtmlTag</code> ä¸­åŠ å…¥äº† <code>real_decorator()</code>ï¼‰ã€‚</p>\n<p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥åˆ°decoratorçš„é€»è¾‘ä¸­å»äº†â€”â€”decoratorå¾—è¿”å›ä¸€ä¸ªwrapperï¼Œwrapperé‡Œå›è°ƒ <code>hello</code>ã€‚çœ‹ä¼¼é‚£ä¸ª <code>makeHtmlTag()</code> å†™å¾—å±‚å±‚å å ï¼Œä½†æ˜¯ï¼Œå·²ç»äº†è§£äº†æœ¬è´¨çš„æˆ‘ä»¬è§‰å¾—å†™å¾—å¾ˆè‡ªç„¶ã€‚</p>\n<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªä¸ºå…¶å®ƒå‡½æ•°åŠ ç¼“å­˜çš„ç¤ºä¾‹ï¼š</p>\n<pre><code>from functools import wraps\ndef memoization(fn):\n    cache = {}\n    miss = object()\n \n    @wraps(fn)\n    def wrapper(*args):\n        result = cache.get(args, miss)\n        if result is miss:\n            result = fn(*args)\n            cache[args] = result\n        return result\n \n    return wrapper\n \n@memoization\ndef fib(n):\n    if n &lt; 2:\n        return n\n    return fib(n - 1) + fib(n - 2)\n</code></pre>\n<p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ˜¯ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€’å½’ç®—æ³•ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œè¿™ä¸ªé€’å½’æ˜¯ç›¸å½“æ²¡æœ‰æ•ˆç‡çš„ï¼Œå› ä¸ºä¼šé‡å¤è°ƒç”¨ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬è¦è®¡ç®—fib(5)ï¼Œäºæ˜¯å…¶åˆ†è§£æˆ <code>fib(4) + fib(3)</code>ï¼Œè€Œ <code>fib(4)</code> åˆ†è§£æˆ <code>fib(3) + fib(2)</code>ï¼Œ<code>fib(3)</code> åˆåˆ†è§£æˆ<code>fib(2) + fib(1)</code>â€¦â€¦ä½ å¯ä»¥çœ‹åˆ°ï¼ŒåŸºæœ¬ä¸Šæ¥è¯´ï¼Œ<code>fib(3)</code>ã€<code>fib(2)</code>ã€<code>fib(1)</code>åœ¨æ•´ä¸ªé€’å½’è¿‡ç¨‹ä¸­è¢«è°ƒç”¨äº†è‡³å°‘ä¸¤æ¬¡ã€‚</p>\n<p>è€Œæˆ‘ä»¬ç”¨decoratorï¼Œåœ¨è°ƒç”¨å‡½æ•°å‰æŸ¥è¯¢ä¸€ä¸‹ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰æ‰è°ƒç”¨ï¼Œæœ‰äº†å°±ä»ç¼“å­˜ä¸­è¿”å›å€¼ã€‚ä¸€ä¸‹å­ï¼Œè¿™ä¸ªé€’å½’ä»äºŒå‰æ ‘å¼çš„é€’å½’æˆäº†çº¿æ€§çš„é€’å½’ã€‚<code>wraps</code> çš„ä½œç”¨æ˜¯ä¿è¯ <code>fib</code> çš„å‡½æ•°åä¸è¢« <code>wrapper</code> æ‰€å–ä»£ã€‚</p>\n<p>é™¤æ­¤ä¹‹å¤–ï¼ŒPythonè¿˜æ”¯æŒç±»æ–¹å¼çš„decoratorã€‚</p>\n<pre><code>class myDecorator(object):\n    def __init__(self, fn):\n        print &quot;inside myDecorator.__init__()&quot;\n        self.fn = fn\n \n    def __call__(self):\n        self.fn()\n        print &quot;inside myDecorator.__call__()&quot;\n \n@myDecorator\ndef aFunction():\n    print &quot;inside aFunction()&quot;\n \nprint &quot;Finished decorating aFunction()&quot;\n \naFunction()\n \n# è¾“å‡ºï¼š\n# inside myDecorator.__init__()\n# Finished decorating aFunction()\n# inside aFunction()\n# inside myDecorator.__call__()\n</code></pre>\n<p>ä¸Šé¢è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†ï¼Œç”¨ç±»çš„æ–¹å¼å£°æ˜ä¸€ä¸ªdecoratorã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªç±»ä¸­æœ‰ä¸¤ä¸ªæˆå‘˜ï¼š</p>\n<ol>\n<li>ä¸€ä¸ªæ˜¯<code>__init__()</code>ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨æˆ‘ä»¬ç»™æŸä¸ªå‡½æ•°decorateæ—¶è¢«è°ƒç”¨ï¼Œæ‰€ä»¥ï¼Œéœ€è¦æœ‰ä¸€ä¸ª <code>fn</code> çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¢«decorateçš„å‡½æ•°ã€‚</li>\n<li>ä¸€ä¸ªæ˜¯<code>__call__()</code>ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨æˆ‘ä»¬è°ƒç”¨è¢«decorateçš„å‡½æ•°æ—¶è¢«è°ƒç”¨çš„ã€‚</li>\n</ol>\n<p>ä»ä¸Šé¢çš„è¾“å‡ºä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œé¡ºåºï¼Œè¿™çœ‹ä¸Šå»è¦æ¯”â€œå‡½æ•°å¼â€çš„æ–¹å¼æ›´æ˜“è¯»ä¸€äº›ã€‚</p>\n<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®é™…ç‚¹çš„ä¾‹å­ï¼Œä¸‹é¢è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†é€šè¿‡URLçš„è·¯ç”±æ¥è°ƒç”¨ç›¸å…³æ³¨å†Œçš„å‡½æ•°ç¤ºä¾‹ï¼š</p>\n<pre><code>class MyApp():\n    def __init__(self):\n        self.func_map = {}\n \n    def register(self, name):\n        def func_wrapper(func):\n            self.func_map[name] = func\n            return func\n        return func_wrapper\n \n    def call_method(self, name=None):\n        func = self.func_map.get(name, None)\n        if func is None:\n            raise Exception(&quot;No function registered against - &quot; + str(name))\n        return func()\n \napp = MyApp()\n \n@app.register('/')\ndef main_page_func():\n    return &quot;This is the main page.&quot;\n \n@app.register('/next_page')\ndef next_page_func():\n    return &quot;This is the next page.&quot;\n \nprint app.call_method('/')\nprint app.call_method('/next_page')\n</code></pre>\n<p>æ³¨æ„ï¼šä¸Šé¢è¿™ä¸ªç¤ºä¾‹ä¸­decoratorç±»ä¸æ˜¯çœŸæ­£çš„decoratorï¼Œå…¶ä¸­ä¹Ÿæ²¡æœ‰<code>__call__()</code>ï¼Œå¹¶ä¸”ï¼Œwrapperè¿”å›äº†åŸå‡½æ•°ã€‚æ‰€ä»¥ï¼ŒåŸå‡½æ•°æ²¡æœ‰å‘ç”Ÿä»»ä½•å˜åŒ–ã€‚</p>\n<h1>Goè¯­è¨€çš„Decorator</h1>\n<p>Pythonæœ‰è¯­æ³•ç³–ï¼Œæ‰€ä»¥å†™å‡ºæ¥çš„ä»£ç æ¯”è¾ƒé…·ã€‚ä½†æ˜¯å¯¹äºæ²¡æœ‰ä¿®é¥°å™¨è¯­æ³•ç³–è¿™ç±»è¯­è¨€ï¼Œå†™å‡ºæ¥çš„ä»£ç ä¼šæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Goè¯­è¨€çš„ä»£ç ã€‚</p>\n<p>è¿˜æ˜¯ä»ä¸€ä¸ªHello Worldå¼€å§‹ã€‚</p>\n<pre><code>package main\n\nimport &quot;fmt&quot;\n\nfunc decorator(f func(s string)) func(s string) {\n    return func(s string) {\n        fmt.Println(&quot;Started&quot;)\n        f(s)\n        fmt.Println(&quot;Done&quot;)\n    }\n}\n\nfunc Hello(s string) {\n    fmt.Println(s)\n}\n\nfunc main() {\n    decorator(Hello)(&quot;Hello, World!&quot;)\n}\n</code></pre>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åŠ¨ç”¨äº†ä¸€ä¸ªé«˜é˜¶å‡½æ•° <code>decorator()</code>ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå…ˆæŠŠ <code>Hello()</code> å‡½æ•°ä¼ è¿›å»ï¼Œç„¶åå…¶è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°ä¸­é™¤äº†è¿è¡Œäº†è‡ªå·±çš„ä»£ç ï¼Œä¹Ÿè°ƒç”¨äº†è¢«ä¼ å…¥çš„ <code>Hello()</code> å‡½æ•°ã€‚</p>\n<p>è¿™ä¸ªç©æ³•å’ŒPythonçš„å¼‚æ›²åŒå·¥ï¼Œåªä¸è¿‡ï¼ŒGoå¹¶ä¸æ”¯æŒåƒPythoné‚£æ ·çš„@decoratorè¯­æ³•ç³–ã€‚æ‰€ä»¥ï¼Œåœ¨è°ƒç”¨ä¸Šæœ‰äº›éš¾çœ‹ã€‚å½“ç„¶ï¼Œå¦‚æœè¦æƒ³è®©ä»£ç å®¹æ˜“è¯»ä¸€äº›ï¼Œä½ å¯ä»¥è¿™æ ·ï¼š</p>\n<pre><code>hello := decorator(Hello)\nhello(&quot;Hello&quot;)\n</code></pre>\n<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªä¸ºå‡½æ•°logæ¶ˆè€—æ—¶é—´çš„ä¾‹å­ï¼š</p>\n<pre><code>type SumFunc func(int64, int64) int64\n\nfunc getFunctionName(i interface{}) string {\n    return runtime.FuncForPC(reflect.ValueOf(i).Pointer()).Name()\n}\n\nfunc timedSumFunc(f SumFunc) SumFunc {\n    return func(start, end int64) int64 {\n        defer func(t time.Time) {\n            fmt.Printf(&quot;--- Time Elapsed (%s): %v ---\\n&quot;, \n                getFunctionName(f), time.Since(t))\n        }(time.Now())\n        return f(start, end)\n    }\n}\n\nfunc Sum1(start, end int64) int64 {\n    var sum int64\n    sum = 0\n    if start &gt; end {\n        start, end = end, start\n    }\n    for i := start; i &lt;= end; i++ {\n        sum += i\n    }\n    return sum\n}\n\nfunc Sum2(start, end int64) int64 {\n    if start &gt; end {\n        start, end = end, start\n    }\n    return (end - start + 1) * (end + start) / 2\n}\n\nfunc main() {\n\n    sum1 := timedSumFunc(Sum1)\n    sum2 := timedSumFunc(Sum2)\n\n    fmt.Printf(&quot;%d, %d\\n&quot;, sum1(-10000, 10000000), sum2(-10000, 10000000))\n}\n</code></pre>\n<p>å…³äºä¸Šé¢çš„ä»£ç ï¼š</p>\n<ul>\n<li>\n<p>æœ‰ä¸¤ä¸ª Sum å‡½æ•°ï¼Œ<code>Sum1()</code> å‡½æ•°å°±æ˜¯ç®€å•åœ°åšä¸ªå¾ªç¯ï¼Œ<code>Sum2()</code> å‡½æ•°åŠ¨ç”¨äº†æ•°æ®å…¬å¼ã€‚ï¼ˆæ³¨æ„ï¼š<code>start</code> å’Œ <code>end</code> æœ‰å¯èƒ½æœ‰è´Ÿæ•°çš„æƒ…å†µã€‚ï¼‰</p>\n</li>\n<li>\n<p>ä»£ç ä¸­ä½¿ç”¨äº†Goè¯­è¨€çš„åå°„æœºåˆ¶æ¥è·å–å‡½æ•°åã€‚</p>\n</li>\n<li>\n<p>ä¿®é¥°å™¨å‡½æ•°æ˜¯ <code>timedSumFunc()</code>ã€‚</p>\n</li>\n</ul>\n<p>å†æ¥çœ‹ä¸€ä¸ª HTTP è·¯ç”±çš„ä¾‹å­ï¼š</p>\n<pre><code>func WithServerHeader(h http.HandlerFunc) http.HandlerFunc {\n    return func(w http.ResponseWriter, r *http.Request) {\n        log.Println(&quot;---&gt;WithServerHeader()&quot;)\n        w.Header().Set(&quot;Server&quot;, &quot;HelloServer v0.0.1&quot;)\n        h(w, r)\n    }\n}\n \nfunc WithAuthCookie(h http.HandlerFunc) http.HandlerFunc {\n    return func(w http.ResponseWriter, r *http.Request) {\n        log.Println(&quot;---&gt;WithAuthCookie()&quot;)\n        cookie := &amp;http.Cookie{Name: &quot;Auth&quot;, Value: &quot;Pass&quot;, Path: &quot;/&quot;}\n        http.SetCookie(w, cookie)\n        h(w, r)\n    }\n}\n \nfunc WithBasicAuth(h http.HandlerFunc) http.HandlerFunc {\n    return func(w http.ResponseWriter, r *http.Request) {\n        log.Println(&quot;---&gt;WithBasicAuth()&quot;)\n        cookie, err := r.Cookie(&quot;Auth&quot;)\n        if err != nil || cookie.Value != &quot;Pass&quot; {\n            w.WriteHeader(http.StatusForbidden)\n            return\n        }\n        h(w, r)\n    }\n}\n \nfunc WithDebugLog(h http.HandlerFunc) http.HandlerFunc {\n    return func(w http.ResponseWriter, r *http.Request) {\n        log.Println(&quot;---&gt;WithDebugLog&quot;)\n        r.ParseForm()\n        log.Println(r.Form)\n        log.Println(&quot;path&quot;, r.URL.Path)\n        log.Println(&quot;scheme&quot;, r.URL.Scheme)\n        log.Println(r.Form[&quot;url_long&quot;])\n        for k, v := range r.Form {\n            log.Println(&quot;key:&quot;, k)\n            log.Println(&quot;val:&quot;, strings.Join(v, &quot;&quot;))\n        }\n        h(w, r)\n    }\n}\nfunc hello(w http.ResponseWriter, r *http.Request) {\n    log.Printf(&quot;Received Request %s from %s\\n&quot;, r.URL.Path, r.RemoteAddr)\n    fmt.Fprintf(w, &quot;Hello, World! &quot;+r.URL.Path)\n}\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å†™äº†å¤šä¸ªå‡½æ•°ã€‚æœ‰å†™HTTPå“åº”å¤´çš„ï¼Œæœ‰å†™è®¤è¯Cookieçš„ï¼Œæœ‰æ£€æŸ¥è®¤è¯Cookieçš„ï¼Œæœ‰æ‰“æ—¥å¿—çš„â€¦â€¦åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå…¶åµŒå¥—èµ·æ¥ä½¿ç”¨ï¼Œåœ¨ä¿®é¥°è¿‡çš„å‡½æ•°ä¸Šç»§ç»­ä¿®é¥°ï¼Œè¿™æ ·å°±å¯ä»¥æ‹¼è£…å‡ºæ›´å¤æ‚çš„åŠŸèƒ½ã€‚</p>\n<pre><code>func main() {\n    http.HandleFunc(&quot;/v1/hello&quot;, WithServerHeader(WithAuthCookie(hello)))\n    http.HandleFunc(&quot;/v2/hello&quot;, WithServerHeader(WithBasicAuth(hello)))\n    http.HandleFunc(&quot;/v3/hello&quot;, WithServerHeader(WithBasicAuth(WithDebugLog(hello))))\n    err := http.ListenAndServe(&quot;:8080&quot;, nil)\n    if err != nil {\n        log.Fatal(&quot;ListenAndServe: &quot;, err)\n    }\n}\n</code></pre>\n<p>å½“ç„¶ï¼Œå¦‚æœä¸€å±‚å¥—ä¸€å±‚ä¸å¥½çœ‹çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨pipelineçš„ç©æ³•ï¼Œéœ€è¦å…ˆå†™ä¸€ä¸ªå·¥å…·å‡½æ•°â€”â€”ç”¨æ¥éå†å¹¶è°ƒç”¨å„ä¸ªdecoratorï¼š</p>\n<pre><code>type HttpHandlerDecorator func(http.HandlerFunc) http.HandlerFunc\n \nfunc Handler(h http.HandlerFunc, decors ...HttpHandlerDecorator) http.HandlerFunc {\n    for i := range decors {\n        d := decors[len(decors)-1-i] // iterate in reverse\n        h = d(h)\n    }\n    return h\n}\n</code></pre>\n<p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨äº†ã€‚</p>\n<pre><code>http.HandleFunc(&quot;/v4/hello&quot;, Handler(hello,\n                WithServerHeader, WithBasicAuth, WithDebugLog))\n</code></pre>\n<p>è¿™æ ·çš„ä»£ç æ˜¯ä¸æ˜¯æ›´æ˜“è¯»äº†ä¸€äº›ï¼Ÿpipelineçš„åŠŸèƒ½ä¹Ÿå°±å‡ºæ¥äº†ã€‚</p>\n<p>ä¸è¿‡ï¼Œå¯¹äºGoçš„ä¿®é¥°å™¨æ¨¡å¼ï¼Œè¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜â€”â€”å¥½åƒæ— æ³•åšåˆ°æ³›å‹ï¼Œå°±åƒä¸Šé¢é‚£ä¸ªè®¡ç®—æ—¶é—´çš„å‡½æ•°ä¸€æ ·ï¼Œå®ƒçš„ä»£ç è€¦åˆäº†éœ€è¦è¢«ä¿®é¥°çš„å‡½æ•°çš„æ¥å£ç±»å‹ï¼Œæ— æ³•åšåˆ°éå¸¸é€šç”¨ã€‚å¦‚æœè¿™ä¸ªäº‹è§£å†³ä¸äº†ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªä¿®é¥°å™¨æ¨¡å¼è¿˜æ˜¯æœ‰ç‚¹ä¸å¥½ç”¨çš„ã€‚</p>\n<p>å› ä¸ºGoè¯­è¨€ä¸åƒPythonå’ŒJavaï¼ŒPythonæ˜¯åŠ¨æ€è¯­è¨€ï¼Œè€ŒJavaæœ‰è¯­è¨€è™šæ‹Ÿæœºï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥å¹²è®¸å¤šæ¯”è¾ƒå˜æ€çš„äº‹å„¿ï¼Œç„¶è€ŒGoè¯­è¨€æ˜¯ä¸€ä¸ªé™æ€çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€å…¶ç±»å‹éœ€è¦åœ¨ç¼–è¯‘æ—¶å°±è¦æå®šï¼Œå¦åˆ™æ— æ³•ç¼–è¯‘ã€‚ä¸è¿‡ï¼ŒGoè¯­è¨€æ”¯æŒçš„æœ€å¤§çš„æ³›å‹æ˜¯interface{}ï¼Œè¿˜æœ‰æ¯”è¾ƒç®€å•çš„Reflectionæœºåˆ¶ï¼Œåœ¨ä¸Šé¢åšåšæ–‡ç« ï¼Œåº”è¯¥è¿˜æ˜¯å¯ä»¥æå®šçš„ã€‚</p>\n<p>åºŸè¯ä¸è¯´ï¼Œä¸‹é¢æ˜¯æˆ‘ç”¨Reflectionæœºåˆ¶å†™çš„ä¸€ä¸ªæ¯”è¾ƒé€šç”¨çš„ä¿®é¥°å™¨ï¼ˆä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œæˆ‘åˆ é™¤äº†å‡ºé”™åˆ¤æ–­ä»£ç ï¼‰ã€‚</p>\n<pre><code>func Decorator(decoPtr, fn interface{}) (err error) {\n    var decoratedFunc, targetFunc reflect.Value\n \n    decoratedFunc = reflect.ValueOf(decoPtr).Elem()\n    targetFunc = reflect.ValueOf(fn)\n \n    v := reflect.MakeFunc(targetFunc.Type(),\n        func(in []reflect.Value) (out []reflect.Value) {\n            fmt.Println(&quot;before&quot;)\n            out = targetFunc.Call(in)\n            fmt.Println(&quot;after&quot;)\n            return\n        })\n \n    decoratedFunc.Set(v)\n    return\n}\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç åŠ¨ç”¨äº† <code>reflect.MakeFunc()</code> å‡½æ•°åˆ¶ä½œå‡ºäº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå…¶ä¸­çš„ <code>targetFunc.Call(in)</code> è°ƒç”¨äº†è¢«ä¿®é¥°çš„å‡½æ•°ã€‚å…³äºGoè¯­è¨€çš„åå°„æœºåˆ¶ï¼Œæ¨èå®˜æ–¹æ–‡ç« â€”â€”ã€Š<a href=\"https://blog.golang.org/laws-of-reflection\">The Laws of Reflection</a>ã€‹ï¼Œåœ¨è¿™é‡Œæˆ‘ä¸å¤šè¯´äº†ã€‚</p>\n<p>ä¸Šé¢è¿™ä¸ª <code>Decorator()</code> éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼š</p>\n<ul>\n<li>ç¬¬ä¸€ä¸ªæ˜¯å‡ºå‚ <code>decoPtr</code> ï¼Œå°±æ˜¯å®Œæˆä¿®é¥°åçš„å‡½æ•°ã€‚</li>\n<li>ç¬¬äºŒä¸ªæ˜¯å…¥å‚ <code>fn</code> ï¼Œå°±æ˜¯éœ€è¦ä¿®é¥°çš„å‡½æ•°ã€‚</li>\n</ul>\n<p>è¿™æ ·å†™æ˜¯ä¸æ˜¯æœ‰äº›äºŒï¼Ÿçš„ç¡®æ˜¯çš„ã€‚ä¸è¿‡ï¼Œè¿™æ˜¯æˆ‘ä¸ªäººåœ¨Goè¯­è¨€é‡Œæ‰€èƒ½å†™å‡ºæ¥çš„æœ€å¥½çš„ä»£ç äº†ã€‚å¦‚æœä½ çŸ¥é“æ›´ä¼˜é›…çš„å†™æ³•ï¼Œè¯·ä½ ä¸€å®šå‘Šè¯‰æˆ‘ï¼</p>\n<p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä½¿ç”¨æ•ˆæœã€‚é¦–å…ˆï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªéœ€è¦ä¿®é¥°çš„å‡½æ•°ï¼š</p>\n<pre><code>func foo(a, b, c int) int {\n    fmt.Printf(&quot;%d, %d, %d \\n&quot;, a, b, c)\n    return a + b + c\n}\n \nfunc bar(a, b string) string {\n    fmt.Printf(&quot;%s, %s \\n&quot;, a, b)\n    return a + b\n}\n</code></pre>\n<p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>\n<pre><code>type MyFoo func(int, int, int) int\nvar myfoo MyFoo\nDecorator(&amp;myfoo, foo)\nmyfoo(1, 2, 3)\n</code></pre>\n<p>ä½ ä¼šå‘ç°ï¼Œä½¿ç”¨ <code>Decorator()</code> æ—¶ï¼Œè¿˜éœ€è¦å…ˆå£°æ˜ä¸€ä¸ªå‡½æ•°ç­¾åï¼Œæ„Ÿè§‰å¥½å‚»å•Šã€‚ä¸€ç‚¹éƒ½ä¸æ³›å‹ï¼Œä¸æ˜¯å—ï¼Ÿè°å«è¿™æ˜¯æœ‰ç±»å‹çš„é™æ€ç¼–è¯‘çš„è¯­è¨€å‘¢ï¼Ÿ</p>\n<p>å—¯ã€‚å¦‚æœä½ ä¸æƒ³å£°æ˜å‡½æ•°ç­¾åï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥è¿™æ ·ï¼š</p>\n<pre><code>mybar := bar\nDecorator(&amp;mybar, bar)\nmybar(&quot;hello,&quot;, &quot;world!&quot;)\n</code></pre>\n<p>å¥½å§ï¼Œçœ‹ä¸Šå»ä¸æ˜¯é‚£ä¹ˆå¾—æ¼‚äº®ï¼Œä½†æ˜¯it does workã€‚çœ‹æ ·å­Goè¯­è¨€ç›®å‰æœ¬èº«çš„ç‰¹æ€§æ— æ³•åšæˆåƒJavaæˆ–Pythoné‚£æ ·ï¼Œå¯¹æ­¤ï¼Œæˆ‘ä»¬åªèƒ½å¤šæ±‚Goè¯­è¨€å¤šæ”¾ç³–äº†ï¼</p>\n<h1>å°ç»“</h1>\n<p>å¥½äº†ï¼Œè®²äº†é‚£ä¹ˆå¤šçš„ä¾‹å­ï¼Œçœ‹äº†é‚£ä¹ˆå¤šçš„ä»£ç ï¼Œæˆ‘ä¼°è®¡ä½ å¯èƒ½æœ‰ç‚¹æ™•ï¼Œè®©æˆ‘ä»¬æ¥åšä¸ªå°ç»“å§ã€‚</p>\n<p>é€šè¿‡ä¸Šé¢Pythonå’ŒGoä¿®é¥°å™¨çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ‰€è°“çš„ä¿®é¥°å™¨æ¨¡å¼å…¶å®æ˜¯åœ¨åšä¸‹é¢çš„å‡ ä»¶äº‹ã€‚</p>\n<ul>\n<li>\n<p>è¡¨é¢ä¸Šçœ‹ï¼Œä¿®é¥°å™¨æ¨¡å¼å°±æ˜¯æ‰©å±•ç°æœ‰çš„ä¸€ä¸ªå‡½æ•°çš„åŠŸèƒ½ï¼Œè®©å®ƒå¯ä»¥å¹²ä¸€äº›å…¶ä»–çš„äº‹ï¼Œæˆ–æ˜¯åœ¨ç°æœ‰çš„å‡½æ•°åŠŸèƒ½ä¸Šå†é™„åŠ ä¸Šä¸€äº›åˆ«çš„åŠŸèƒ½ã€‚</p>\n</li>\n<li>\n<p>é™¤äº†æˆ‘ä»¬å¯ä»¥æ„Ÿå—åˆ°<strong>å‡½æ•°å¼ç¼–ç¨‹</strong>ä¸‹çš„ä»£ç æ‰©å±•èƒ½åŠ›ï¼Œæˆ‘ä»¬è¿˜èƒ½æ„Ÿå—åˆ°å‡½æ•°çš„äº’ç›¸å’Œéšæ„æ‹¼è£…å¸¦æ¥çš„å¥½å¤„ã€‚</p>\n</li>\n<li>\n<p>ä½†æ˜¯æ·±å…¥çœ‹ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼ŒDecoratorè¿™ä¸ªå‡½æ•°å…¶å®æ˜¯å¯ä»¥ä¿®é¥°å‡ ä¹æ‰€æœ‰çš„å‡½æ•°çš„ã€‚äºæ˜¯ï¼Œè¿™ç§å¯ä»¥é€šç”¨äºå…¶å®ƒå‡½æ•°çš„ç¼–ç¨‹æ–¹å¼ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å°†ä¸€äº›éä¸šåŠ¡åŠŸèƒ½çš„ã€å±äºæ§åˆ¶ç±»å‹çš„ä»£ç ç»™æŠ½è±¡å‡ºæ¥ï¼ˆæ‰€è°“çš„æ§åˆ¶ç±»å‹çš„ä»£ç å°±æ˜¯åƒfor-loopï¼Œæˆ–æ˜¯æ‰“æ—¥å¿—ï¼Œæˆ–æ˜¯å‡½æ•°è·¯ç”±ï¼Œæˆ–æ˜¯æ±‚å‡½æ•°è¿è¡Œæ—¶é—´ä¹‹ç±»çš„éä¸šåŠ¡åŠŸèƒ½æ€§çš„ä»£ç ï¼‰ã€‚</p>\n</li>\n</ul>\n<p>ä»¥ä¸‹æ˜¯ã€Šç¼–ç¨‹èŒƒå¼æ¸¸è®°ã€‹ç³»åˆ—æ–‡ç« çš„ç›®å½•ï¼Œæ–¹ä¾¿ä½ äº†è§£è¿™ä¸€ç³»åˆ—å†…å®¹çš„å…¨è²Œã€‚</p>\n<ul>\n<li><a href=\"https://time.geekbang.org/column/article/301\">01 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šèµ·æº</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/303\">02 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šæ³›å‹ç¼–ç¨‹</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2017\">03 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šç±»å‹ç³»ç»Ÿå’Œæ³›å‹çš„æœ¬è´¨</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2711\">04 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šå‡½æ•°å¼ç¼–ç¨‹</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2723\">05 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šä¿®é¥°å™¨æ¨¡å¼</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2729\">06 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2741\">07 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šåŸºäºåŸå‹çš„ç¼–ç¨‹èŒƒå¼</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2748\">08 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šGo è¯­è¨€çš„å§”æ‰˜æ¨¡å¼</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2751\">09 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šç¼–ç¨‹çš„æœ¬è´¨</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2752\">10 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šé€»è¾‘ç¼–ç¨‹èŒƒå¼</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/2754\">11 | ç¼–ç¨‹èŒƒå¼æ¸¸è®°ï¼šç¨‹åºä¸–ç•Œé‡Œçš„ç¼–ç¨‹èŒƒå¼</a></li>\n</ul>\n","comments":[{"had_liked":false,"id":2518,"user_name":"æ¥Š_å®µå¤œ","can_delete":false,"product_type":"c1","uid":1019302,"ip_address":"","ucode":"7BA0CADC5F23BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/a6/22c37c91.jpg","comment_is_top":false,"comment_ctime":1517553795,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"173316245635","product_id":100002201,"comment_content":"è¶Šçœ‹è¶Šè§‰å¾—è£…é¥°å™¨æ¨¡å¼æ˜¯å±äºAOPæ€æƒ³çš„ä¸€ç§å®ç°ğŸ¤”ã€‚","like_count":40,"discussions":[{"author":{"id":1763208,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e7/88/c8b4ad9c.jpg","nickname":"æ²¡æœ‰æ˜µç§°","note":"","ucode":"565783BDD01CE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276038,"discussion_content":"è®¾è®¡æ¨¡å¼ä¸­åˆ†æˆäº†è£…é¥°å™¨å’Œä»£ç†ä¸¤ç§æ¨¡å¼","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1590805185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1123103,"avatar":"https://static001.geekbang.org/account/avatar/00/11/23/1f/6452b2e8.jpg","nickname":"åˆ˜æ¸…æ–Œ","note":"","ucode":"775B053AF87B53","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":246878,"discussion_content":"ç”¨é€”å’ŒAOPä¸€æ ·ï¼Œéƒ½æ˜¯ç”¨åœ¨éä¸šåŠ¡çš„åœºæ™¯","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1587783762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181650,"avatar":"https://static001.geekbang.org/account/avatar/00/12/07/d2/0d7ee298.jpg","nickname":"æƒ˜ é—»","note":"","ucode":"C5909F034BF072","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375693,"discussion_content":"Aopå°±æ˜¯è£…é¥°è€…æ¨¡å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621818815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2002555,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/8e/7b/701c741f.jpg","nickname":"éš¾å¾—è‡ªç„¶èŒ","note":"","ucode":"73C86B48236104","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301811,"discussion_content":"æ€æƒ³æ˜¯ä¸€è‡´çš„å®ç°ä¸åŒå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598668543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1598564,"avatar":"https://static001.geekbang.org/account/avatar/00/18/64/64/865c1eb4.jpg","nickname":"åŠ³ç è¯†é€”","note":"","ucode":"7AEF4D9407F097","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298604,"discussion_content":"è¿™å°±æ˜¯ä¸€ç§åŠ¨æ€ç»‡å…¥ï¼Œæ˜¯ä¸€ç§åŠ¨æ€ä»£ç†çš„å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597340395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105548,"user_name":"é™ˆå","can_delete":false,"product_type":"c1","uid":1082730,"ip_address":"","ucode":"3AF9E8EB39E507","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtS26SJpSF7JLu9pusGsy1Qln0NdQg1eV2YKOJxpX2QXaBuuyXMqZY3fm0rhzKwsqN5aa6CVNOQQ/132","comment_is_top":false,"comment_ctime":1561026860,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"87460372780","product_id":100002201,"comment_content":"...æ„Ÿè§‰è¿˜æ˜¯è½¬è¡Œç®—äº†....ï¼Œ","like_count":20,"discussions":[{"author":{"id":2110272,"avatar":"https://static001.geekbang.org/account/avatar/00/20/33/40/69c65edc.jpg","nickname":"ITCamel","note":"","ucode":"FB260BF4A9DD46","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394598,"discussion_content":"å“ˆå“ˆï¼Œæœ‰äº›ä¸œè¥¿å†™èµ·ä¸šåŠ¡ä»£ç æ¥ä¸æ·±ç©¶æ˜¯ç¡®å®ç”¨ä¸åˆ°çš„ï¼Œä¸è¿‡çœŸå»çœ‹æ¡†æ¶ä»£ç äº†ï¼Œå°±ä¼šå‘ç°åˆ°å¤„éƒ½æ˜¯è¿™ä¸œè¥¿ã€‚æµ©å“¥æ˜¯æ¯”è¾ƒç‰›çš„ï¼Œæ‰€ä»¥å„ä¸ªè¯­è¨€çš„ç‰¹æ€§éƒ½èƒ½æŠŠæ¡ä½æœ¬è´¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631952465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":3156,"user_name":"minghu6","can_delete":false,"product_type":"c1","uid":1050269,"ip_address":"","ucode":"F44058E21B14C9","user_header":"","comment_is_top":false,"comment_ctime":1518591393,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"53058198945","product_id":100002201,"comment_content":"å…¶å®Javaè£…é¥°å™¨å’ŒPythonè£…é¥°å™¨è¿˜æ˜¯å·®åˆ«æŒºå¤§çš„ï¼ŒPythonè£…é¥°å™¨æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼ŒJavaçš„åˆ™çœŸçš„æ˜¯&quot;æ³¨è§£&quot;ï¼Œåªæ˜¯èµ·åˆ°ä¸€ä¸ªæ‰“æ ‡ç­¾çš„ä½œç”¨ï¼Œè¿˜è¦å¦å¤–çš„ç±»æ¥æ£€æŸ¥ç‰¹å®šæ ‡ç­¾è¿›è¡Œç‰¹å®šå¤„ç†ã€‚","like_count":13,"discussions":[{"author":{"id":1598564,"avatar":"https://static001.geekbang.org/account/avatar/00/18/64/64/865c1eb4.jpg","nickname":"åŠ³ç è¯†é€”","note":"","ucode":"7AEF4D9407F097","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298606,"discussion_content":"Javaä¸­çš„æ³¨è§£å¯ä»¥ç†è§£ä¸ºæ•°æ®æ¥å£ï¼Œå› ä¸ºJava ä¸­ä¼ ç»Ÿçš„æ¥å£åªé’ˆå¯¹è¡Œä¸ºï¼Œè€Œä¸é’ˆå¯¹å±æ€§ï¼ŒåŒæ—¶Javaä¸­çš„æ³¨è§£ä¹Ÿæ˜¯ä¸€ç§å…ƒç¼–ç¨‹çš„å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597340481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":2347,"user_name":"éº»èŠ±å¿«è·‘","can_delete":false,"product_type":"c1","uid":1042579,"ip_address":"","ucode":"835D2234751AF6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e8/93/bc8166d2.jpg","comment_is_top":false,"comment_ctime":1516847317,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"44466520277","product_id":100002201,"comment_content":"è€—å­å”ï¼Œæˆ‘çœ‹ä½ åšå®¢å’Œæ–‡ç« å¾ˆä¹…äº†ï¼Œä»coolshellå°±å¼€å§‹äº†ï¼Œç°åœ¨ä¹Ÿå¿«30äº†ï¼Œä½†æ˜¯è¶Šæ¥è¶Šç„¦è™‘ï¼Œä»–ä»¬éƒ½è¯´æ˜¯30å²ç¨‹åºå‘˜çš„æ™®éæƒ…å†µï¼Œå¸Œæœ›è€—å­å”èƒ½ä»¥è¿‡æ¥äººçš„èº«ä»½å†™ä¸‹è¿™æ–¹é¢çš„æ–‡ç« ï¼Œä¸ºæˆ‘ä»¬æŒ‡ç‚¹ä¸‹è¿·è·¯","like_count":10,"discussions":[{"author":{"id":1085152,"avatar":"https://static001.geekbang.org/account/avatar/00/10/8e/e0/847348b1.jpg","nickname":"çˆ±å­¦ä¹ çš„å¤§å”","note":"","ucode":"91F9ABF1EC98D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319844,"discussion_content":"æˆ‘35äº†éƒ½ä¸æ€•ï¼Œä½ æ€•å•¥ã€‚ã€‚ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1604139361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1000417,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/43/e1/b7be5560.jpg","nickname":"sam","note":"","ucode":"8D48F4B9045947","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1085152,"avatar":"https://static001.geekbang.org/account/avatar/00/10/8e/e0/847348b1.jpg","nickname":"çˆ±å­¦ä¹ çš„å¤§å”","note":"","ucode":"91F9ABF1EC98D0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361383,"discussion_content":"å­¦ä¹ ä¸æ–­ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616657005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":319844,"ip_address":""},"score":361383,"extra":""}]}]},{"had_liked":false,"id":2339,"user_name":"æµ©å­","can_delete":false,"product_type":"c1","uid":1027495,"ip_address":"","ucode":"91473789B31BA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ad/a7/14246c67.jpg","comment_is_top":false,"comment_ctime":1516844619,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"31581615691","product_id":100002201,"comment_content":"è€—å­å“¥ï¼Œæ–‡ç« å†™çš„å¾ˆæœ‰æ„æ€ã€‚æœ€è¿‘ä¹Ÿåœ¨ç›¸ç»§å­¦ä¹ Goè¯­è¨€ã€‚ <br>ä¸è¿‡æˆ‘å¾ˆçº ç»“ï¼Œæˆ‘æ˜¯ä¸€å.netçš„æŠ€æœ¯ä¸»ç®¡ï¼Œæœ€è¿‘æƒ³å¼€æ‹“å…¶ä»–è¯­è¨€çš„æ–¹å‘ã€‚å¯æ˜¯å´ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹ï¼Œæ¯”è¾ƒæ„Ÿå…´è¶£çš„æœ‰Goï¼ŒJavaï¼ŒPythonã€‚å¯æ˜¯æ—¶é—´æ€»æ˜¯æœ‰é™çš„ã€‚ ä¸çŸ¥é“ä»å“ªé¢æ–¹é¢è¿›è¡Œæ·±å…¥ç ”ç©¶ã€‚","like_count":7,"discussions":[{"author":{"id":1085152,"avatar":"https://static001.geekbang.org/account/avatar/00/10/8e/e0/847348b1.jpg","nickname":"çˆ±å­¦ä¹ çš„å¤§å”","note":"","ucode":"91F9ABF1EC98D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319845,"discussion_content":"æˆ‘ä¹Ÿæ˜¯æ.netçš„ï¼Œä¸šä½™æ—¶é—´éƒ½å­¦ç‚¹å‰ç«¯ã€‚å“ˆå“ˆå“ˆ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1604139493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1660330,"avatar":"https://static001.geekbang.org/account/avatar/00/19/55/aa/c79c292c.jpg","nickname":"Erebus","note":"","ucode":"81CC93A6D7A4BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363277,"discussion_content":"æ·±å…¥æµ…å‡ºgolang rust","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617160630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50036,"user_name":"å°‘ç›","can_delete":false,"product_type":"c1","uid":1305743,"ip_address":"","ucode":"BCC7E264B75702","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/8f/8299495a.jpg","comment_is_top":false,"comment_ctime":1544846128,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27314649904","product_id":100002201,"comment_content":"åŸºæœ¬æ²¡çœ‹æ‡‚ï¼Œåé¢çš„æ€»ç»“åŸºæœ¬çŸ¥é“è£…é¥°å™¨æ˜¯å¹²å˜›çš„","like_count":6},{"had_liked":false,"id":316956,"user_name":"seedjyh","can_delete":false,"product_type":"c1","uid":2309641,"ip_address":"","ucode":"D590E526A9A1D7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er4IPqj4H3jQHq4C1lgKh6ZroK3CVmGLiadic7S1rxbuy09JM9x8Aib6VkozPkO4lrUTHAhicX1z9Cg2w/132","comment_is_top":false,"comment_ctime":1634627921,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18814497105","product_id":100002201,"comment_content":"ç†è§£pythonçš„å‡½æ•°å‹è£…é¥°å™¨ï¼Œå…³é”®å°±æ˜¯åˆ†æ¸…3ä¸ªå‡½æ•°ã€‚<br>- è¢«è£…é¥°çš„å‡½æ•° raw_fn<br>- è£…é¥°åçš„å‡½æ•° new_fn<br>- æ‰§è¡Œè£…é¥°çš„å‡½æ•° decoractor_fn<br>å…¶ä¸­ï¼Œraw_fn å’Œ new_fn çš„å‡½æ•°ç­¾åï¼ˆå‚æ•°å’Œè¿”å›å€¼ï¼‰æ˜¯ç›¸åŒçš„ï¼Œå°±æ˜¯ä¸€è¿ä¸²@ä¹‹åçœŸæ­£æ‰‹å†™defçš„é‚£ä¸ªå‡½æ•°ã€‚<br>decoractor_fn çš„å‚æ•°æ˜¯ raw_fnï¼Œåœ¨å†…éƒ¨å®šä¹‰new_fnå¹¶è¿”å›ä¹‹ã€‚<br><br>è‡³äºå¸¦å‚æ•°çš„è£…é¥°å™¨ï¼Œå…¶å®å°±æ˜¯äº§ç”Ÿè£…é¥°å™¨çš„å·¥å‚ï¼Œæœ¬èº«å¹¶ä¸æ˜¯è£…é¥°å™¨ã€‚<br>decoractor_factoryçš„å‚æ•°å¯ä»¥éšä¾¿å†™ï¼Œå…¶å†…éƒ¨å®šä¹‰ä¸€ä¸ªdecoractor_fnå¹¶è¿”å›ã€‚<br><br>ç±»æ¨¡å¼çš„è£…é¥°å™¨æœ‰ç‚¹åƒC++çš„ä»¿å‡½æ•°ã€‚<br><br>Golangçš„è£…é¥°å™¨ï¼Œåœ¨æ¡†æ¶echoçš„middlewareè¿™é‡Œä½“ç°å¾—æ·‹æ¼“å°½è‡´ã€‚","like_count":5},{"had_liked":false,"id":105714,"user_name":"edisonhuang","can_delete":false,"product_type":"c1","uid":1530167,"ip_address":"","ucode":"BB2F639A779F96","user_header":"https://static001.geekbang.org/account/avatar/00/17/59/37/bd2de0a4.jpg","comment_is_top":false,"comment_ctime":1561078148,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14445980036","product_id":100002201,"comment_content":"é€šè¿‡è£…é¥°å™¨ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“çš„ç»™ä»£ç æ·»åŠ ä¸€äº›åŠŸèƒ½ï¼Œé™„åŠ æ‰§è¡Œä¸€äº›æ“ä½œã€‚ç„¶åæ·±å…¥ä¹‹åå‘ç°è£…é¥°å™¨å¯ä»¥ä¿®é¥°ä»»ä½•å‡½æ•°ï¼ŒåŠ ä¸åŒå‡½æ•°éšæ„ç»„åˆå’Œæ‹¼è£…å¾€å¾€ä¼šå¸¦æ¥ä¸€äº›ç¥å¥‡çš„æ•ˆæœï¼Œæ°å¦‚linuxçš„ç¼–ç å“²å­¦ï¼Œä¸€ä¸ªå·¥å…·åªåšä¸€ä»¶äº‹å¹¶æŠŠè¿™ä»¶äº‹åšåˆ°æè‡´ã€‚<br>é€šè¿‡è£…é¥°å™¨çš„å°è£…ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¾ˆå¤šä¸šåŠ¡é€»è¾‘ï¼Œé‡å¤ä»£ç ç»™æ¶ˆé™¤ï¼Œä»è€Œä¼˜åŒ–ä»£ç ","like_count":3},{"had_liked":false,"id":25529,"user_name":"æ’","can_delete":false,"product_type":"c1","uid":1105216,"ip_address":"","ucode":"5B0BD0F12AE23E","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/40/b2183a47.jpg","comment_is_top":false,"comment_ctime":1537353868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14422255756","product_id":100002201,"comment_content":"goè¯­è¨€çš„ç¬¬ä¸€ä¸ªä¾‹å­è®©æˆ‘è”æƒ³åˆ°javaçš„é™æ€ä»£ç†ï¼Œåé¢åå°„çš„ä¾‹å­è®©æˆ‘è”æƒ³åˆ°javaçš„åŠ¨æ€ä»£ç†","like_count":3},{"had_liked":false,"id":98196,"user_name":"æ‹‰æ¬§","can_delete":false,"product_type":"c1","uid":1206605,"ip_address":"","ucode":"40996A8093A95F","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/4d/81c44f45.jpg","comment_is_top":false,"comment_ctime":1558928791,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10148863383","product_id":100002201,"comment_content":"è¿™ä¸€ç« çš„å†…å®¹çœŸå¸¦åŠ²","like_count":2},{"had_liked":false,"id":39776,"user_name":"æ¨æ™ºæ™“ âœŸ","can_delete":false,"product_type":"c1","uid":1024263,"ip_address":"","ucode":"E3B56F4A38F63D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/07/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1542354699,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10132289291","product_id":100002201,"comment_content":"å“ï¼ŒGoè¯­è¨€çš„è¯­æ³•çœŸæ˜¯çœ‹ç€åˆ«æ‰­ï¼Œè™½ç„¶çŸ¥é“Goå¼ºåŠ²","like_count":2,"discussions":[{"author":{"id":1319157,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/f5/6cdbfa90.jpg","nickname":"åˆ˜åŒ¿å","note":"","ucode":"CB4C1DC8C1BB31","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332399,"discussion_content":"ä¸¤å¹´è¿‡å»äº†ï¼Œè¯­æ³•ä¸Šè¿˜æ˜¯æ²¡æœ‰å¤ªå¤šæ”¹å–„â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607180063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1350286,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9a/8e/69856382.jpg","nickname":"è“èˆµæ‰‹","note":"","ucode":"4F6DA4D8CB13E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1319157,"avatar":"https://static001.geekbang.org/account/avatar/00/14/20/f5/6cdbfa90.jpg","nickname":"åˆ˜åŒ¿å","note":"","ucode":"CB4C1DC8C1BB31","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":565888,"discussion_content":"ä¸€å¹´åŠè¿‡å»äº†ï¼Œæ³›å‹å‡ºæ¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650552893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":332399,"ip_address":""},"score":565888,"extra":""}]}]},{"had_liked":false,"id":17306,"user_name":"äº®å‡º","can_delete":false,"product_type":"c1","uid":1014289,"ip_address":"","ucode":"A7673283D03656","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/11/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1532564137,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10122498729","product_id":100002201,"comment_content":"ç¼–ç¨‹çš„ä¾‹å­ï¼Œæœ‰githubä¹ˆ","like_count":2},{"had_liked":false,"id":6463,"user_name":"ç§‹å¤©","can_delete":false,"product_type":"c1","uid":1057056,"ip_address":"","ucode":"A7E1D953EF7E17","user_header":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","comment_is_top":false,"comment_ctime":1524748116,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10114682708","product_id":100002201,"comment_content":"pythonå’ŒgoåŸºæœ¬è¯­æ³•è¦çœ‹çœ‹ä¸Šé¢æœ‰çš„å‡½æ•°ä¾‹å­ï¼Œæ²¡çœ‹æ‡‚ã€‚","like_count":2},{"had_liked":false,"id":288249,"user_name":"é äººå“å»èµ¢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1618380597,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5913347893","product_id":100002201,"comment_content":"ç¬¬ä¸€ä¸ªpythonè£…é¥°å™¨ä»£ç ï¼Œpython 3.Xç‰ˆæœ¬ï¼Œå†™æ³•æœ‰ç‚¹ä¸åŒå¯èƒ½ï¼Œå¯ä»¥è¯•è¯•æˆ‘çš„ï¼Œçœ‹çœ‹å¯ä¸å¯ä»¥ç›´æ¥è¿è¡Œï¼š<br><br>def hello(fn):<br>    def wrapper():<br>        print(&quot;hello, %s&quot; % fn.__name__)<br>        fn()<br>        print(&quot;goodbye, %s&quot; % fn.__name__)<br><br>    return wrapper<br><br><br>@hello<br>def Hao():<br>    print(&quot;i am Hao Chen&quot;)<br><br><br>Hao()","like_count":1,"discussions":[{"author":{"id":1583747,"avatar":"https://static001.geekbang.org/account/avatar/00/18/2a/83/23a56f7b.jpg","nickname":"é£å¤§è‹","note":"","ucode":"6444B5B5FCF333","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585816,"discussion_content":"ä¸»è¦å°±æ˜¯ py2 å’Œ py3 åœ¨ pirnt å‡½æ•°ä¸Šçš„ä½¿ç”¨å·®åˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661841956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233717,"user_name":"Marvichov","can_delete":false,"product_type":"c1","uid":1111835,"ip_address":"","ucode":"7482099415C41C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/1b/db7a0edc.jpg","comment_is_top":false,"comment_ctime":1594406790,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5889374086","product_id":100002201,"comment_content":"æ„Ÿè§‰æœ¬è´¨è¿˜æ˜¯å‡½æ•°å¼ç¼–ç¨‹é‡Œé¢çš„closure...å‡½æ•°å¼é‡Œé¢éƒ½æ˜¯immutableçš„ï¼Œæ‰€ä»¥closureæ˜¯å¾ˆå®‰å…¨çš„...ä½†æ˜¯pythonå’Œgoè¿™ç±»çš„è¯­è¨€æ˜¯æœ‰çŠ¶æ€çš„ï¼Œdebug closureçš„æ—¶å€™å°±å¾ˆç—›è‹¦...æ¯”å¦‚ä½ ä¼ äº†ä¸€ä¸ªpython dictæˆ–è€…goçš„pointer...wrapped functionå¾ˆå¯èƒ½å°±ä¼šäº§ç”Ÿè®©äººå¤´ç—›çš„side effect...å¤§å®¶ç”¨çš„æ—¶å€™åˆå–œæ¬¢æ»¥ç”¨...æ€»ä½“æ„Ÿè§‰ï¼Œæ„Ÿè§‰decoratorå°±æ˜¯åŠ¨æ€è¯­è¨€çš„generics...","like_count":1},{"had_liked":false,"id":212872,"user_name":"Edward Lee","can_delete":false,"product_type":"c1","uid":1228518,"ip_address":"","ucode":"156223F1D7E94A","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/e6/7808520d.jpg","comment_is_top":false,"comment_ctime":1588230018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5883197314","product_id":100002201,"comment_content":"å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ Decorator ç”¨æ³•ï¼Œæˆ‘åœ¨å¾ˆå¤šç¨‹åºä»£ç æˆ–è„šæœ¬ä¸­çœ‹åˆ°è¿‡ï¼ŒåŸæ¥è¿™ç§å†™æ³•æœ‰ä¸ªåå­—å« Decoratorï¼Œåƒ Pipeline ä¸€æ ·è¿æ¥æ‰€æœ‰çš„å‡½æ•°ã€‚æœ‰ä¸€ç§è´¯é€šå·²æœ‰ç¼–ç¨‹è®¤çŸ¥çš„æ„Ÿè§‰ï¼Œå°±åƒé›¶ç¢çš„çŸ¥è¯†è¢«ä¸²è”åœ¨ä¸€èµ·ã€‚","like_count":1},{"had_liked":false,"id":288269,"user_name":"é äººå“å»èµ¢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1618387915,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618387915","product_id":100002201,"comment_content":"è£…é¥°æ¨¡å¼çªç„¶è®²å‡ ä¸ªè¯­è¨€çš„å®ç°ä¸²åœ¨ä¸€èµ·å¯¹æ¯”ï¼Œæ„Ÿè§‰æ˜ç™½äº†ç‚¹ï¼Œä¹‹å‰åªå…³æ³¨ç»†èŠ‚æ²¡æœ‰è€ƒè™‘åˆ°åé¢çš„è®¾è®¡æ¨¡å¼ã€‚","like_count":0},{"had_liked":false,"id":257817,"user_name":"çˆ±å­¦ä¹ çš„å¤§å”","can_delete":false,"product_type":"c1","uid":1085152,"ip_address":"","ucode":"91F9ABF1EC98D0","user_header":"https://static001.geekbang.org/account/avatar/00/10/8e/e0/847348b1.jpg","comment_is_top":false,"comment_ctime":1604139753,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604139753","product_id":100002201,"comment_content":"æ„Ÿè§‰æœ‰ç‚¹åƒ.net é‡Œè¾¹çš„é¢å‘åˆ‡é¢(AOP),ç»™æµç¨‹ä¸ŠèŠ‚å¤–ç”Ÿæï¼Œåšç‚¹åˆ«çš„äº‹æƒ…ã€‚","like_count":0},{"had_liked":false,"id":256600,"user_name":"å°æ–‡åŒå­¦","can_delete":false,"product_type":"c1","uid":1001893,"ip_address":"","ucode":"48F2AEB989C12A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","comment_is_top":false,"comment_ctime":1603689762,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603689762","product_id":100002201,"comment_content":"å…³äº Go çš„ä¿®é¥°å™¨ååŠéƒ¨åˆ†(æ­£æ–‡æœ€åå››åˆ†ä¹‹ä¸€)ï¼Œæˆ‘è¿˜æ²¡å®Œå…¨çœ‹æ‡‚ï¼Œå¯èƒ½æ˜¯å› ä¸ºç¼ºå°‘ Go çš„è¯­è¨€åŸºç¡€ã€‚ä½† Python æ¯”è¾ƒç†Ÿæ‚‰ï¼Œä¿®é¥°å™¨éƒ¨åˆ†ä¹Ÿèƒ½å¤Ÿæ˜ç™½ã€‚<br><br>è‡ªå·±åŒäº‹ä½¿ç”¨ Python çš„ä¿®é¥°å™¨ï¼ŒæˆåŠŸåšäº†ä¸€äº› åŠ¨æ€åŠ è½½å‡½æ•° çš„åŠŸèƒ½ï¼Œå¯è°“æ˜¯è®©åæœŸæˆ‘ä»¬çš„æŸä¸ªç¯èŠ‚çš„å·¥ä½œæ•ˆç‡æé«˜äº†æ•°å€ã€‚ä»åå¤šåˆ†é’Ÿçš„æ“ä½œï¼Œæ”¹å†™ä¸º10sçš„å·¥ä½œã€‚","like_count":0},{"had_liked":false,"id":246271,"user_name":"ä½ ä¸ºå•¥é‚£ä¹ˆç‰›","can_delete":false,"product_type":"c1","uid":1503506,"ip_address":"","ucode":"1ABC604A54A8F6","user_header":"https://static001.geekbang.org/account/avatar/00/16/f1/12/7dac30d6.jpg","comment_is_top":false,"comment_ctime":1599235489,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599235489","product_id":100002201,"comment_content":"ä»æ¥æ²¡å­¦è¿‡pythonï¼Œé€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å­¦ä¼šäº†ã€‚è€Œä¸”ï¼Œå…¨éƒ¨çœ‹æ‡‚äº†ã€‚","like_count":0},{"had_liked":false,"id":244674,"user_name":"é™å¿ƒ","can_delete":false,"product_type":"c1","uid":1335457,"ip_address":"","ucode":"EB264FA6519FDA","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/a1/8f003697.jpg","comment_is_top":false,"comment_ctime":1598609447,"is_pvip":true,"discussion_count":0,"race_medal":5,"score":"1598609447","product_id":100002201,"comment_content":"Goè¯­è¨€çš„Decroratorå¤ªé€ ä½œäº†ï¼Œä¸å…¶è¿™æ ·ï¼Œè¿˜ä¸å¦‚ï¼Œç›´æ¥å£°æ˜ä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹åŸæœ‰å‡½æ•°åŒ…è£…ä¸€ä¸‹é‚£ä¹ˆç›´æ¥æ˜äº†ã€‚","like_count":0},{"had_liked":false,"id":223397,"user_name":"è‚–è‡§","can_delete":false,"product_type":"c1","uid":1047733,"ip_address":"","ucode":"4FAC9FF54DD6A0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/b5/ac717737.jpg","comment_is_top":false,"comment_ctime":1591081060,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591081060","product_id":100002201,"comment_content":"æˆ‘å’‹æ„Ÿè§‰Pythonçš„Decoratorçœ‹ç€å¾ˆåƒä»£ç†æ¨¡å¼ä½ å‘¢","like_count":0},{"had_liked":false,"id":211796,"user_name":"BeginYan","can_delete":false,"product_type":"c1","uid":1082843,"ip_address":"","ucode":"BB06C4712E6383","user_header":"https://static001.geekbang.org/account/avatar/00/10/85/db/f978ddcd.jpg","comment_is_top":false,"comment_ctime":1588007696,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588007696","product_id":100002201,"comment_content":"æœ€å–œæ¬¢çš„pythonä¸­çš„è£…é¥°å™¨","like_count":0},{"had_liked":false,"id":169430,"user_name":"slark","can_delete":false,"product_type":"c1","uid":1143574,"ip_address":"","ucode":"7E8DE962AA23A7","user_header":"https://static001.geekbang.org/account/avatar/00/11/73/16/595b0342.jpg","comment_is_top":false,"comment_ctime":1578355986,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578355986","product_id":100002201,"comment_content":"ä¿®é¥°å™¨æ¨¡å¼ï¼Œç”¨æ¥åšä»€ä¹ˆï¼Œç²—çœ‹äº†å‡ ä¸ªä¾‹å­åªè®°å¾—æ˜¯å¯ä»¥åœ¨å‡½æ•°å‰åè‡ªåŠ¨è°ƒç”¨ã€‚ä½†ç¡®å®å°±åƒjavaæ³¨è§£ä¸€èˆ¬ï¼Œå®ƒç”¨æ³¨å…¥çš„æ–¹å¼å®ç°äº†å‡½æ•°åŠŸèƒ½çš„æ·»åŠ ï¼Œåœ¨æ—¥å¿—ï¼Œç¼“å­˜ç­‰åœºæ™¯æŠŠåŠŸèƒ½æ€§ï¼Œé€šç”¨æ€§èƒ½åŠ›æŠ½è±¡å‡ºæ¥ã€‚è€ŒæŠ½è±¡ï¼Œä¹Ÿå°±æ˜¯èŒƒå‹çš„æ„ä¹‰ä¹‹ä¸€ã€‚<br>é™„ä½œè€…çš„è¯´æ˜ï¼š<br>ä½†æ˜¯æ·±å…¥çœ‹ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼ŒDecorator è¿™ä¸ªå‡½æ•°å…¶å®æ˜¯å¯ä»¥ä¿®é¥°å‡ ä¹æ‰€æœ‰çš„å‡½æ•°çš„ã€‚äºæ˜¯ï¼Œè¿™ç§å¯ä»¥é€šç”¨äºå…¶å®ƒå‡½æ•°çš„ç¼–ç¨‹æ–¹å¼ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å°†ä¸€äº›éä¸šåŠ¡åŠŸèƒ½çš„ã€å±äºæ§åˆ¶ç±»å‹çš„ä»£ç ç»™æŠ½è±¡å‡ºæ¥ï¼ˆæ‰€è°“çš„æ§åˆ¶ç±»å‹çš„ä»£ç å°±æ˜¯åƒ for-loopï¼Œæˆ–æ˜¯æ‰“æ—¥å¿—ï¼Œæˆ–æ˜¯å‡½æ•°è·¯ç”±ï¼Œæˆ–æ˜¯æ±‚å‡½æ•°è¿è¡Œæ—¶é—´ä¹‹ç±»çš„éä¸šåŠ¡åŠŸèƒ½æ€§çš„ä»£ç ï¼‰ã€‚","like_count":0},{"had_liked":false,"id":135951,"user_name":"ç£‰ç›˜","can_delete":false,"product_type":"c1","uid":1055624,"ip_address":"","ucode":"1C245991F30A73","user_header":"https://static001.geekbang.org/account/avatar/00/10/1b/88/ac69f57a.jpg","comment_is_top":false,"comment_ctime":1569313725,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1569313725","product_id":100002201,"comment_content":"å¯ä»¥ç”¨â€œè§¦ç±»æ—é€šâ€è¿™è¯æ¥å½¢å®¹ï¼Œé¢å‘å¯¹è±¡æœ‰ä¿®é¥°å™¨æ¨¡å¼ï¼Œpythonå’Œgoæœ‰ä¿®é¥°å™¨è¯­æ³•ï¼ŒJavaæœ‰æ³¨é‡Šè§£ã€‚äº†è¿™äº›æ¦‚å¿µå¯ä»¥æ›´å¥½åœ°ç†è§£è¯­è¨€ã€‚å°±åƒæ€»ç»“é‡Œè¯´çš„ï¼Œä»–ä»¬éƒ½å®ç°äº†ç›¸åŒçš„å‡ ç‚¹åŠŸèƒ½ã€‚","like_count":0},{"had_liked":false,"id":133132,"user_name":"nil","can_delete":false,"product_type":"c1","uid":1507193,"ip_address":"","ucode":"0F5D298C1CBB74","user_header":"https://static001.geekbang.org/account/avatar/00/16/ff/79/3b38c9e1.jpg","comment_is_top":false,"comment_ctime":1568374920,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568374920","product_id":100002201,"comment_content":"å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œä½¿å¾—è£…é¥°è€…æ¨¡å¼å˜å¾—æƒ³å½“ç²¾ç®€ï¼Œä½¿ç”¨oopå®ç°è£…é¥°è€…æ¨¡å¼å°±æ²¡æœ‰fpè¿™ä¹ˆbeautifuläº†ï¼Œpythonçš„æ³¨è§£è¯­æ³•ç³–çœ‹èµ·æ¥æƒ³å½“ä¼˜é›…","like_count":0},{"had_liked":false,"id":121108,"user_name":"Geek_0be289","can_delete":false,"product_type":"c1","uid":1589753,"ip_address":"","ucode":"E11A6530B31512","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq9mcgmFDsACbcmMBKK6IoNMgg8ZFsriaXzEsu4iam3kf9Yk7z0lPNwyG5rRulGwbmAjdaHVxmm6bFQ/132","comment_is_top":false,"comment_ctime":1565059796,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565059796","product_id":100002201,"comment_content":"å¯æƒœçš„æ˜¯å¦‚æœé«˜é¢‘ä½¿ç”¨åå°„ï¼Œæ€§èƒ½ä¼šæŸè€—å¾ˆå‰å®³","like_count":0}]}