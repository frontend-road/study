{"id":510518,"title":"23ï½œDI Containerï¼ˆ11ï¼‰ï¼šå¦‚ä½•å¯¹ContainerTestè¿›è¡Œæ–‡æ¡£åŒ–æ”¹é€ ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ˜Šã€‚ä»Šå¤©æˆ‘ä»¬ç»§ç»­ä½¿ç”¨TDDçš„æ–¹å¼å®ç°æ³¨å…¥ä¾èµ–å®¹å™¨ã€‚</p><h2>å›é¡¾æµ‹è¯•ä»£ç ä¸ä»»åŠ¡åˆ—è¡¨</h2><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬ä¸“æ³¨äºæµ‹è¯•ä»£ç çš„é‡æ„ï¼Œç›®å‰æˆ‘ä»¬çš„æµ‹è¯•æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>InjectTestï¼š\n\npackage geektime.tdd.di;\n\nimport jakarta.inject.Inject;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\nimport java.util.Optional;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.ArgumentMatchers.eq;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\npublic class InjectionTest {\n    private Dependency dependency = mock(Dependency.class);\n    private Context context = mock(Context.class);\n    \n    @BeforeEach\n    public void setup() {\n        when(context.get(eq(Dependency.class))).thenReturn(Optional.of(dependency));\n    }\n    \n    @Nested\n    public class ConstructorInjection {\n    \n        @Nested\n        class Injection {\n        \n            static class DefaultConstructor {\n            }\n            \n            @Test\n            public void should_call_default_constructor_if_no_inject_constructor() {\n                DefaultConstructor instance = new ConstructorInjectionProvider&lt;&gt;(DefaultConstructor.class).get(context);\n                assertNotNull(instance);\n            }\n            \n            static class InjectConstructor {\n                Dependency dependency;\n                @Inject\n                public InjectConstructor(Dependency dependency) {\n                    this.dependency = dependency;\n                }\n            }\n            \n            @Test\n            public void should_inject_dependency_via_inject_constructor() {\n                InjectConstructor instance = new ConstructorInjectionProvider&lt;&gt;(InjectConstructor.class).get(context);\n                assertSame(dependency, instance.dependency);\n            }\n            \n            @Test\n            public void should_include_dependency_from_inject_constructor() {\n                ConstructorInjectionProvider&lt;InjectConstructor&gt; provider = new ConstructorInjectionProvider&lt;&gt;(InjectConstructor.class);\n                assertArrayEquals(new Class&lt;?&gt;[]{Dependency.class}, provider.getDependencies().toArray(Class&lt;?&gt;[]::new));\n            }\n        }\n        \n        @Nested\n        class IllegalInjectConstructors {\n            abstract class AbstractComponent implements Component {\n                @Inject\n                public AbstractComponent() {\n                }\n            }\n            @Test\n            public void should_throw_exception_if_component_is_abstract() {\n                assertThrows(IllegalComponentException.class, () -&gt; new ConstructorInjectionProvider&lt;&gt;(AbstractComponent.class));\n            }\n            @Test\n            public void should_throw_exception_if_component_is_interface() {\n                assertThrows(IllegalComponentException.class, () -&gt; new ConstructorInjectionProvider&lt;&gt;(Component.class));\n            }\n            static class MultiInjectConstructors {\n                @Inject\n                public MultiInjectConstructors(AnotherDependency dependency) {\n                }\n                @Inject\n                public MultiInjectConstructors(Dependency dependency) {\n                }\n            }\n            @Test\n            public void should_throw_exception_if_multi_inject_constructors_provided() {\n                assertThrows(IllegalComponentException.class, () -&gt; new ConstructorInjectionProvider&lt;&gt;(MultiInjectConstructors.class));\n            }\n            static class NoInjectNorDefaultConstructor {\n                public NoInjectNorDefaultConstructor(Dependency dependency) {\n                }\n            }\n            @Test\n            public void should_throw_exception_if_no_inject_nor_default_constructor_provided() {\n                assertThrows(IllegalComponentException.class, () -&gt; new ConstructorInjectionProvider&lt;&gt;(NoInjectNorDefaultConstructor.class));\n            }\n        }\n    }\n    @Nested\n    public class FieldInjection {\n        @Nested\n        class Injection {\n            static class ComponentWithFieldInjection {\n                @Inject\n                Dependency dependency;\n            }\n            static class SubclassWithFieldInjection extends ComponentWithFieldInjection {\n            }\n            @Test\n            public void should_inject_dependency_via_field() {\n                ComponentWithFieldInjection component = new ConstructorInjectionProvider&lt;&gt;(ComponentWithFieldInjection.class).get(context);\n                assertSame(dependency, component.dependency);\n            }\n            @Test\n            public void should_inject_dependency_via_superclass_inject_field() {\n                SubclassWithFieldInjection component = new ConstructorInjectionProvider&lt;&gt;(SubclassWithFieldInjection.class).get(context);\n                assertSame(dependency, component.dependency);\n            }\n            @Test\n            public void should_include_dependency_from_field_dependency() {\n                ConstructorInjectionProvider&lt;ComponentWithFieldInjection&gt; provider = new ConstructorInjectionProvider&lt;&gt;(ComponentWithFieldInjection.class);\n                assertArrayEquals(new Class&lt;?&gt;[]{Dependency.class}, provider.getDependencies().toArray(Class&lt;?&gt;[]::new));\n            }\n        }\n\n        @Nested\n        class IllegalInjectFields {\n            static class FinalInjectField {\n                @Inject\n                final Dependency dependency = null;\n            }\n            @Test\n            public void should_throw_exception_if_inject_field_is_final() {\n                assertThrows(IllegalComponentException.class, () -&gt; new ConstructorInjectionProvider&lt;&gt;(FinalInjectField.class));\n            }\n        }\n    }\n    @Nested\n    public class MethodInjection {\n        @Nested\n        class Injection {\n            static class InjectMethodWithNoDependency {\n                boolean called = false;\n                @Inject\n                void install() {\n                    this.called = true;\n                }\n            }\n            @Test\n            public void should_call_inject_method_even_if_no_dependency_declared() {\n                InjectMethodWithNoDependency component = new ConstructorInjectionProvider&lt;&gt;(InjectMethodWithNoDependency.class).get(context);\n                assertTrue(component.called);\n            }\n            static class InjectMethodWithDependency {\n                Dependency dependency;\n                @Inject\n                void install(Dependency dependency) {\n                    this.dependency = dependency;\n                }\n            }\n            @Test\n            public void should_inject_dependency_via_inject_method() {\n                InjectMethodWithDependency component = new ConstructorInjectionProvider&lt;&gt;(InjectMethodWithDependency.class).get(context);\n                assertSame(dependency, component.dependency);\n            }\n            static class SuperClassWithInjectMethod {\n                int superCalled = 0;\n                @Inject\n                void install() {\n                    superCalled++;\n                }\n            }\n            static class SubclassWithInjectMethod extends SuperClassWithInjectMethod {\n                int subCalled = 0;\n                @Inject\n                void installAnother() {\n                    subCalled = superCalled + 1;\n                }\n            }\n            @Test\n            public void should_inject_dependencies_via_inject_method_from_superclass() {\n                SubclassWithInjectMethod component = new ConstructorInjectionProvider&lt;&gt;(SubclassWithInjectMethod.class).get(context);\n                assertEquals(1, component.superCalled);\n                assertEquals(2, component.subCalled);\n            }\n            static class SubclassOverrideSuperClassWithInject extends SuperClassWithInjectMethod {\n                @Inject\n                void install() {\n                    super.install();\n                }\n            }\n            @Test\n            public void should_only_call_once_if_subclass_override_inject_method_with_inject() {\n                SubclassOverrideSuperClassWithInject component = new ConstructorInjectionProvider&lt;&gt;(SubclassOverrideSuperClassWithInject.class).get(context);\n                assertEquals(1, component.superCalled);\n            }\n            static class SubclassOverrideSuperClassWithNoInject extends SuperClassWithInjectMethod {\n                void install() {\n                    super.install();\n                }\n            }\n            @Test\n            public void should_not_call_inject_method_if_override_with_no_inject() {\n                SubclassOverrideSuperClassWithNoInject component = new ConstructorInjectionProvider&lt;&gt;(SubclassOverrideSuperClassWithNoInject.class).get(context);\n                assertEquals(0, component.superCalled);\n            }\n            @Test\n            public void should_include_dependencies_from_inject_method() {\n                ConstructorInjectionProvider&lt;InjectMethodWithDependency&gt; provider = new ConstructorInjectionProvider&lt;&gt;(InjectMethodWithDependency.class);\n                assertArrayEquals(new Class&lt;?&gt;[]{Dependency.class}, provider.getDependencies().toArray(Class&lt;?&gt;[]::new));\n            }\n        }\n        @Nested\n        class IllegalInjectMethods {\n            static class InjectMethodWithTypeParameter {\n                @Inject\n                &lt;T&gt; void install() {\n                }\n            }\n            @Test\n            public void should_throw_exception_if_inject_method_has_type_parameter() {\n                assertThrows(IllegalComponentException.class, () -&gt; new ConstructorInjectionProvider&lt;&gt;(InjectMethodWithTypeParameter.class));\n            }\n        }\n    }\n}\n</code></pre><p>å¾…é‡æ„çš„ContainerTestæ˜¯è¿™æ ·çš„ï¼š</p><pre><code>package geektime.tdd.di;\nimport jakarta.inject.Inject;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.internal.util.collections.Sets;\nimport java.util.*;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.ArgumentMatchers.eq;\npublic class ContainerTest {\n    ContextConfig config;\n    @BeforeEach\n    public void setup() {\n        config = new ContextConfig();\n    }\n    @Nested\n    public class ComponentConstruction {\n        @Test\n        public void should_bind_type_to_a_specific_instance() {\n            Component instance = new Component() {\n            };\n            config.bind(Component.class, instance);\n            Context context = config.getContext();\n            assertSame(instance, context.get(Component.class).get());\n        }\n\n        @Test\n        public void should_return_empty_if_component_not_defined() {\n            Optional&lt;Component&gt; component = config.getContext().get(Component.class);\n            assertTrue(component.isEmpty());\n        }\n        @Nested\n        public class DependencyCheck {\n            @Test\n            public void should_throw_exception_if_dependency_not_found() {\n                config.bind(Component.class, ComponentWithInjectConstructor.class);\n                DependencyNotFoundException exception = assertThrows(DependencyNotFoundException.class, () -&gt; config.getContext());\n                assertEquals(Dependency.class, exception.getDependency());\n                assertEquals(Component.class, exception.getComponent());\n            }\n            @Test\n            public void should_throw_exception_if_cyclic_dependencies_found() {\n                config.bind(Component.class, ComponentWithInjectConstructor.class);\n                config.bind(Dependency.class, DependencyDependedOnComponent.class);\n                CyclicDependenciesFoundException exception = assertThrows(CyclicDependenciesFoundException.class, () -&gt; config.getContext());\n                Set&lt;Class&lt;?&gt;&gt; classes = Sets.newSet(exception.getComponents());\n                assertEquals(2, classes.size());\n                assertTrue(classes.contains(Component.class));\n                assertTrue(classes.contains(Dependency.class));\n            }\n            @Test\n            public void should_throw_exception_if_transitive_cyclic_dependencies_found() {\n                config.bind(Component.class, ComponentWithInjectConstructor.class);\n                config.bind(Dependency.class, DependencyDependedOnAnotherDependency.class);\n                config.bind(AnotherDependency.class, AnotherDependencyDependedOnComponent.class);\n                CyclicDependenciesFoundException exception = assertThrows(CyclicDependenciesFoundException.class, () -&gt; config.getContext());\n                List&lt;Class&lt;?&gt;&gt; components = Arrays.asList(exception.getComponents());\n                assertEquals(3, components.size());\n                assertTrue(components.contains(Component.class));\n                assertTrue(components.contains(Dependency.class));\n                assertTrue(components.contains(AnotherDependency.class));\n            }\n        }\n    }\n    @Nested\n    public class DependenciesSelection {\n    }\n    @Nested\n    public class LifecycleManagement {\n    }\n}\ninterface Component {\n}\ninterface Dependency {\n}\ninterface AnotherDependency {\n}\nclass ComponentWithInjectConstructor implements Component {\n    private Dependency dependency;\n    @Inject\n    public ComponentWithInjectConstructor(Dependency dependency) {\n        this.dependency = dependency;\n    }\n    public Dependency getDependency() {\n        return dependency;\n    }\n}\nclass DependencyDependedOnComponent implements Dependency {\n    private Component component;\n    @Inject\n    public DependencyDependedOnComponent(Component component) {\n        this.component = component;\n    }\n}\nclass AnotherDependencyDependedOnComponent implements AnotherDependency {\n    private Component component;\n    @Inject\n    public AnotherDependencyDependedOnComponent(Component component) {\n        this.component = component;\n    }\n}\nclass DependencyDependedOnAnotherDependency implements Dependency {\n    private AnotherDependency anotherDependency;\n    @Inject\n    public DependencyDependedOnAnotherDependency(AnotherDependency anotherDependency) {\n        this.anotherDependency = anotherDependency;\n    }\n}\n</code></pre><p>ä»»åŠ¡åˆ—è¡¨æ²¡æœ‰æ”¹å˜ï¼Œç›®å‰çš„çŠ¶æ€ä¸ºï¼š</p><ul>\n<li>\n<p><s>æ— éœ€æ„é€ çš„ç»„ä»¶â€”â€”ç»„ä»¶å®ä¾‹</s></p>\n</li>\n<li>\n<p><s>å¦‚æœæ³¨å†Œçš„ç»„ä»¶ä¸å¯å®ä¾‹åŒ–ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</s></p>\n<ul>\n<li><s>æŠ½è±¡ç±»</s></li>\n<li><s>æ¥å£</s></li>\n</ul>\n</li>\n<li>\n<p><s>æ„é€ å‡½æ•°æ³¨å…¥</s></p>\n<ul>\n<li><s>æ— ä¾èµ–çš„ç»„ä»¶åº”è¯¥é€šè¿‡é»˜è®¤æ„é€ å‡½æ•°ç”Ÿæˆç»„ä»¶å®ä¾‹</s></li>\n<li><s>æœ‰ä¾èµ–çš„ç»„ä»¶ï¼Œé€šè¿‡Injectæ ‡æ³¨çš„æ„é€ å‡½æ•°ç”Ÿæˆç»„ä»¶å®ä¾‹</s></li>\n<li><s>å¦‚æœæ‰€ä¾èµ–çš„ç»„ä»¶ä¹Ÿå­˜åœ¨ä¾èµ–ï¼Œé‚£ä¹ˆéœ€è¦å¯¹æ‰€ä¾èµ–çš„ç»„ä»¶ä¹Ÿå®Œæˆä¾èµ–æ³¨å…¥</s></li>\n<li><s>å¦‚æœç»„ä»¶æœ‰å¤šäºä¸€ä¸ªInjectæ ‡æ³¨çš„æ„é€ å‡½æ•°ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</s></li>\n<li><s>å¦‚æœç»„ä»¶æ²¡æœ‰Injectæ ‡æ³¨çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°ï¼ˆæ–°å¢ä»»åŠ¡ï¼‰</s></li>\n<li><s>å¦‚æœç»„ä»¶éœ€è¦çš„ä¾èµ–ä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</s></li>\n<li><s>å¦‚æœç»„ä»¶é—´å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</s></li>\n</ul>\n</li>\n<li>\n<p><s>å­—æ®µæ³¨å…¥</s></p>\n<ul>\n<li><s>é€šè¿‡Injectæ ‡æ³¨å°†å­—æ®µå£°æ˜ä¸ºä¾èµ–ç»„ä»¶</s></li>\n<li><s>å¦‚æœå­—æ®µä¸ºfinalåˆ™æŠ›å‡ºå¼‚å¸¸</s></li>\n<li><s>ä¾èµ–ä¸­åº”åŒ…å«Inject Fieldå£°æ˜çš„ä¾èµ–</s></li>\n</ul>\n</li>\n<li>\n<p><s>æ–¹æ³•æ³¨å…¥</s></p>\n<ul>\n<li><s>é€šè¿‡Injectæ ‡æ³¨çš„æ–¹æ³•ï¼Œå…¶å‚æ•°ä¸ºä¾èµ–ç»„ä»¶</s></li>\n<li><s>é€šè¿‡Injectæ ‡æ³¨çš„æ— å‚æ•°æ–¹æ³•ï¼Œä¼šè¢«è°ƒç”¨</s></li>\n<li><s>æŒ‰ç…§å­ç±»ä¸­çš„è§„åˆ™ï¼Œè¦†ç›–çˆ¶ç±»ä¸­çš„Injectæ–¹æ³•</s></li>\n<li><s>å¦‚æœæ–¹æ³•å®šä¹‰ç±»å‹å‚æ•°ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</s></li>\n<li><s>ä¾èµ–ä¸­åº”åŒ…å«Inject Methodå£°æ˜çš„ä¾èµ–</s></li>\n</ul>\n</li>\n<li>\n<p>å¯¹Providerç±»å‹çš„ä¾èµ–</p>\n<ul>\n<li>æ³¨å…¥æ„é€ å‡½æ•°ä¸­å¯ä»¥å£°æ˜å¯¹äºProviderçš„ä¾èµ–</li>\n<li>æ³¨å…¥å­—æ®µä¸­å¯ä»¥å£°æ˜å¯¹äºProviderçš„ä¾èµ–</li>\n<li>æ³¨å…¥æ–¹æ³•ä¸­å¯å£°æ˜å¯¹äºProviderçš„ä¾èµ–</li>\n</ul>\n</li>\n<li>\n<p>è‡ªå®šä¹‰Qualifierçš„ä¾èµ–</p>\n<ul>\n<li>æ³¨å†Œç»„ä»¶æ—¶ï¼Œå¯é¢å¤–æŒ‡å®šQualifier</li>\n<li>æ³¨å†Œç»„ä»¶æ—¶ï¼Œå¯ä»ç±»å¯¹è±¡ä¸Šæå–Qualifier</li>\n<li>å¯»æ‰¾ä¾èµ–æ—¶ï¼Œéœ€åŒæ—¶æ»¡è¶³ç±»å‹ä¸è‡ªå®šä¹‰Qualifieræ ‡æ³¨</li>\n<li>æ”¯æŒé»˜è®¤Qualifierâ€”â€”Named</li>\n</ul>\n</li>\n<li>\n<p>Singletonç”Ÿå‘½å‘¨æœŸ</p>\n<ul>\n<li>æ³¨å†Œç»„ä»¶æ—¶ï¼Œå¯é¢å¤–æŒ‡å®šæ˜¯å¦ä¸ºSingleton</li>\n<li>æ³¨å†Œç»„ä»¶æ—¶ï¼Œå¯ä»ç±»å¯¹è±¡ä¸Šæå–Singletonæ ‡æ³¨</li>\n<li>å¯¹äºåŒ…å«Singletonæ ‡æ³¨çš„ç»„ä»¶ï¼Œåœ¨å®¹å™¨èŒƒå›´å†…æä¾›å”¯ä¸€å®ä¾‹</li>\n<li>å®¹å™¨ç»„ä»¶é»˜è®¤ä¸æ˜¯Singleç”Ÿå‘½å‘¨æœŸ</li>\n</ul>\n</li>\n</ul><!-- [[[read_end]]] --><p>è‡ªå®šä¹‰Scopeæ ‡æ³¨</p><ul>\n<li>å¯å‘å®¹å™¨æ³¨å†Œè‡ªå®šä¹‰Scopeæ ‡æ³¨çš„å›è°ƒ</li>\n</ul><h2>è§†é¢‘æ¼”ç¤º</h2><p>è®©æˆ‘ä»¬è¿›å…¥ä»Šå¤©çš„éƒ¨åˆ†ï¼š</p><p><video poster=\"https://media001.geekbang.org/5c01325e8a964ca3bb44b896d147dee9/snapshots/8a7a5092faae4c7c8791da3ff9c4908c-00005.jpg\" preload=\"none\" controls=\"\"><source src=\"https://media001.geekbang.org/customerTrans/7e27d07d27d407ebcc195a0e78395f55/8d825ef-18083a30e2c-0000-0000-01d-dbacd.mp4\" type=\"video/mp4\"><source src=\" https://media001.geekbang.org/c1ec0fd2ef6b41f99f36446c3edcdb08/04c221d777a24fffbb1b2de74526e10d-b340b9ad07e23f8ee86935e8b0e0fff2-sd.m3u8\" type=\"application/x-mpegURL\"></video></p><h2>æ€è€ƒé¢˜</h2><p>å‰©ä½™ä»»åŠ¡åœ¨ç°æœ‰ä»£ç ç»“æ„ä¸‹ï¼Œè¦å¦‚ä½•å®ç°ï¼Ÿ</p><p>æ¬¢è¿æŠŠä½ çš„æƒ³æ³•åˆ†äº«åœ¨ç•™è¨€åŒºï¼Œä¹Ÿæ¬¢è¿æŠŠä½ çš„é¡¹ç›®ä»£ç çš„é“¾æ¥åˆ†äº«å‡ºæ¥ã€‚ç›¸ä¿¡ç»è¿‡ä½ çš„æ€è€ƒä¸å®æ“ï¼Œå­¦ä¹ æ•ˆæœä¼šæ›´å¥½ï¼</p>","comments":[{"had_liked":false,"id":344429,"user_name":"äººé—´å››æœˆå¤©","can_delete":false,"product_type":"c1","uid":1048314,"ip_address":"","ucode":"11BE219C23EEBC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/fa/2a046821.jpg","comment_is_top":false,"comment_ctime":1651548290,"is_pvip":false,"replies":[{"id":125720,"content":"é‡æ„èƒ½åŠ›è¶Šå¼º è®¾è®¡è¶Šå¯ä»¥åç½®","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2537798,"ctime":1651553163,"ip_address":"","comment_id":344429,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100109401,"comment_content":"éå¸¸æ„Ÿè°¢ï¼Œè®²è§£è®©å·¥ç¨‹å¸ˆå¯ä»¥å†™å‡ºé«˜è´¨é‡çš„ä»£ç ï¼Œæµ‹è¯•é©±åŠ¨ï¼Œæµ‹è¯•é©±åŠ¨è®¾è®¡ï¼Œè®©ä¸­å›½å·¥ç¨‹å¸ˆæ‘†è„±curdï¼Œå®¹å™¨çš„ä¾‹å­å¾ˆå¥½ï¼Œéœ€æ±‚æ˜ç¡®ï¼Œéœ€æ±‚æœ‰å¤æ‚æ€§ï¼Œæµ‹è¯•å¦‚ä½•é©±åŠ¨åŠŸèƒ½å®ç°ï¼Œä¿è¯ä»£ç çš„æ­£ç¡®æ€§ï¼Œè®¾è®¡çš„åˆç†æ€§ã€‚æœ‰ä¸ªé—®é¢˜ï¼Œå…ˆå®ç°åŸå‹åŠŸèƒ½ï¼Œæˆ‘è®¤ä¸ºæ²¡é—®é¢˜ï¼Œå¯æ˜¯å¯¹äºå¤æ‚éœ€æ±‚ï¼Œæ˜¯ä¸æ˜¯è¦æ¨¡å—åŒ–è®¾è®¡ä¸€ä¸‹ï¼ŒæŠŠèŒè´£éå¸¸æ˜ç¡®çš„ç±»å’Œæ–¹æ³•å…ˆè®¾è®¡å¥½ï¼Œç„¶åå†ç»“åˆç»å…¸å’Œä¼¦æ•¦ä¸¤ç§å­¦æ´¾ï¼Œæ›´é«˜æ•ˆï¼Ÿå¦‚ä½•ç”¨è€å¸ˆçš„æ–¹æ³•ï¼Œéƒ½æ˜¯å‘ç°ç±»çš„èŒè´£ä¸å•ä¸€äº†ï¼Œç„¶åå†é‡æ„ï¼Œä¸ºä»€ä¹ˆä¸èƒ½å¼€å§‹å°±æƒ³åˆ°ï¼Œè®¾è®¡å¥½ï¼Ÿä¾‹å¦‚springå®¹å™¨ï¼Œæ³¨å†Œå’Œæ„å»ºç»„ä»¶ï¼Œæœ¬èº«å°±æ˜¯å¾ˆå¤æ‚çš„ï¼Œä¸ºä»€ä¹ˆæœ€æ—©å°±æŠŠæ„å»ºå’Œä½¿ç”¨åˆ†ç¦»ï¼Ÿ\n\n","like_count":7,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569779,"discussion_content":"é‡æ„èƒ½åŠ›è¶Šå¼º è®¾è®¡è¶Šå¯ä»¥åç½®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651553163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1048314,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fe/fa/2a046821.jpg","nickname":"äººé—´å››æœˆå¤©","note":"","ucode":"11BE219C23EEBC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":569791,"discussion_content":"å—¯ï¼Œé«˜æ•ˆé‡æ„ï¼Œç¡®å®ä¹Ÿä¸æµªè´¹æ—¶é—´ï¼Œè¿˜èƒ½é¿å…è¿‡åº¦è®¾è®¡ã€‚\néœ€è¦å¤šå®è·µå¤šç»ƒï¼Œå…»æˆä¹ æƒ¯å°±å¥½äº†ï¼Œä¹Ÿç¬¦åˆè®¾è®¡æ˜¯æ¼”åŒ–è€Œæ¥çš„å®è·µç»éªŒã€‚\n\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651556250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":569779,"ip_address":"","group_id":0},"score":569791,"extra":""}]}]},{"had_liked":false,"id":344513,"user_name":"å¼ é“æ—","can_delete":false,"product_type":"c1","uid":1108258,"ip_address":"","ucode":"4AB8BC6CDAC0A3","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/22/7606c6ba.jpg","comment_is_top":false,"comment_ctime":1651600503,"is_pvip":false,"replies":[{"id":126715,"content":"niceï¼","user_name":"ç¼–è¾‘å›å¤","user_name_real":"ç¼–è¾‘","uid":2189689,"ctime":1654182450,"ip_address":"","comment_id":344513,"utype":2}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100109401,"comment_content":"23æ•²å¥½çš„ä»£ç \nhttps:&#47;&#47;github.com&#47;vfbiby&#47;tdd-di-container\n","like_count":1,"discussions":[{"author":{"id":2189689,"avatar":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","nickname":"ğŸ‘","note":"","ucode":"DE34B3B14287D1","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574626,"discussion_content":"niceï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654182450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1025718,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a6/b6/27412d76.jpg","nickname":"sc","note":"","ucode":"46D659C89BA8C4","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647777,"discussion_content":"æ„Ÿè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720599793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1108258,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e9/22/7606c6ba.jpg","nickname":"å¼ é“æ—","note":"","ucode":"4AB8BC6CDAC0A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570460,"discussion_content":"https://github.com/vfbiby/tdd-di-container/tree/master é‡æ–°æŠŠè¿™äº›æµ‹è¯•ç»„ç»‡äº†ä¸€ä¸‹ï¼Œæ”¾åœ¨è¿™ä¸ªåˆ†æ”¯ä¸‹é¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651767754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344531,"user_name":"keep_curiosity","can_delete":false,"product_type":"c1","uid":1246273,"ip_address":"","ucode":"794DC1D3FB9214","user_header":"https://static001.geekbang.org/account/avatar/00/13/04/41/082e2706.jpg","comment_is_top":false,"comment_ctime":1651634773,"is_pvip":false,"replies":[{"id":125764,"content":"åªå¯¹public","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":2537798,"ctime":1651643756,"ip_address":"","comment_id":344531,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100109401,"comment_content":"Class.getMethods() æ–¹æ³•å¥½åƒé»˜è®¤å°±åŒ…å«äº†å­ç±»è¦†ç›–çˆ¶ç±»æ–¹æ³•çš„é€»è¾‘ï¼Œå¯ä»¥çœæ‰è‡ªå·±è¿‡æ»¤çš„é€»è¾‘ã€‚æµ‹è¯•ä¹Ÿéƒ½æ²¡é—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":2537798,"avatar":"https://static001.geekbang.org/account/avatar/00/26/b9/46/758ecf4a.jpg","nickname":"å¾å…«å‰","note":"","ucode":"DA6D1EB08A7396","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570038,"discussion_content":"åªå¯¹public","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651643756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344583,"user_name":"tddå­¦å¾’","can_delete":false,"product_type":"c1","uid":1724083,"ip_address":"","ucode":"CC9C3EAD1B29B4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUCiacuh59wMbq1icuB8U1T7Vpic8FjKFdanvdt9bzClBmYqFUXmtKmh2Zibn9Dic6A8pjdoBiaia1LCrnA/132","comment_is_top":false,"comment_ctime":1651655938,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100109401,"comment_content":"ContainerTest æ–‡æ¡£åŒ–ä¹‹å62ä¸ªæµ‹è¯•èƒ½å¯¹å¾—ä¸Š\nComponentåº”è¯¥è¦åŠ ä¸‹é¢ä¸€ç‚¹ä¿®æ”¹\ninterface Component {\n    default Dependency dependency() {\n        return null;\n    }\n}","like_count":1,"discussions":[{"author":{"id":1108258,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e9/22/7606c6ba.jpg","nickname":"å¼ é“æ—","note":"","ucode":"4AB8BC6CDAC0A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570459,"discussion_content":"è¿™ä¸ªå¥½ï¼Œå°±æ˜¯å¡åœ¨è¿™é‡Œè¿‡ä¸å»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651767473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347182,"user_name":"äººé—´å››æœˆå¤©","can_delete":false,"product_type":"c1","uid":1048314,"ip_address":"","ucode":"11BE219C23EEBC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/fa/2a046821.jpg","comment_is_top":false,"comment_ctime":1653797915,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100109401,"comment_content":"å†…éƒ¨ç±»ä¸èƒ½æœ‰é™æ€çš„å£°æ˜ï¼Œè€å¸ˆä¸ºä»€ä¹ˆä¸æŠ¥é”™ï¼Œtypebindingæœ¬èº«æ˜¯å†…éƒ¨ç±»ï¼Œä»–çš„æˆå‘˜æœ‰é™æ€çš„å†…éƒ¨ç±»","like_count":0,"discussions":[{"author":{"id":1048314,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fe/fa/2a046821.jpg","nickname":"äººé—´å››æœˆå¤©","note":"","ucode":"11BE219C23EEBC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574149,"discussion_content":"æˆå‘˜ä¹Ÿæœ‰é™æ€æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆä¸æŠ¥é”™ï¼Œå¸Œæœ›è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653873166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344652,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1651711762,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100109401,"comment_content":"æ”¶è·ï¼š\nç»è¿‡æ¢³ç†ä¹‹åå¾—åˆ°å¯æ‰§è¡Œçš„æµ‹è¯•æ–‡æ¡£\né€šè¿‡æŠ½å–æ–¹æ³•èµ·åˆ°æ³¨é‡Šçš„ä½œç”¨","like_count":0}]}