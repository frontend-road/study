{"id":131720,"title":"53 | è®¾è®¡å¤§å‹DMPç³»ç»Ÿï¼ˆä¸‹ï¼‰ï¼šSSDæ‹¯æ•‘äº†æ‰€æœ‰çš„DBA","content":"<p>ä¸Šä¸€è®²é‡Œï¼Œæ ¹æ®DMPç³»ç»Ÿçš„å„ä¸ªåº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬ä»æŠ½è±¡çš„åŸç†å±‚é¢ï¼Œé€‰æ‹©äº†AeroSpikeä½œä¸ºKVæ•°æ®åº“ï¼ŒKafkaä½œä¸ºæ•°æ®ç®¡é“ï¼ŒHadoop/Hiveæ¥ä½œä¸ºæ•°æ®ä»“åº“ã€‚</p><p>ä¸è¿‡å‘¢ï¼Œè‚¯å®šæœ‰ä¸ä¿¡é‚ªçš„å·¥ç¨‹å¸ˆä¼šé—®ï¼Œä¸ºä»€ä¹ˆMongoDBï¼Œç”šè‡³æ˜¯MySQLè¿™æ ·çš„æ–‡æ¡£æ•°æ®åº“æˆ–è€…ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ä¸é€‚ç”¨å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½é€šè¿‡ä¼˜åŒ–SQLã€æ·»åŠ ç¼“å­˜è¿™æ ·çš„è°ƒä¼˜æ‰‹æ®µï¼Œè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>ä»Šå¤©DMPçš„ä¸‹åŠåœºï¼Œæˆ‘ä»¬å°±ä»æ•°æ®åº“å®ç°çš„åŸç†ï¼Œä¸€èµ·æ¥çœ‹ä¸€çœ‹ï¼Œè¿™èƒŒåçš„åŸå› ã€‚å¦‚æœä½ èƒ½å¼„æ˜ç™½ä»Šå¤©çš„è¿™äº›æ›´æ·±å…¥ã€æ›´ç»†èŠ‚çš„åŸç†ï¼Œå¯¹äºä»€ä¹ˆåœºæ™¯ä½¿ç”¨ä»€ä¹ˆæ•°æ®åº“ï¼Œå°±ä¼šæ›´åŠ èƒ¸æœ‰æˆç«¹ï¼Œè€Œä¸æ˜¯åªæœ‰è·‘äº†å¤§é‡çš„æ€§èƒ½æµ‹è¯•æ‰çŸ¥é“ã€‚ä¸‹æ¬¡åšæ•°æ®åº“é€‰å‹çš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥â€œä»¥ç†æœäººâ€äº†ã€‚</p><h2>å…³ç³»å‹æ•°æ®åº“ï¼šä¸å¾—ä¸åšçš„éšæœºè¯»å†™</h2><p>æˆ‘ä»¬å…ˆæ¥æƒ³ä¸€æƒ³ï¼Œå¦‚æœç°åœ¨è®©ä½ è‡ªå·±å†™ä¸€ä¸ªæœ€ç®€å•çš„å…³ç³»å‹æ•°æ®åº“ï¼Œä½ çš„æ•°æ®è¦æ€ä¹ˆå­˜æ”¾åœ¨ç¡¬ç›˜ä¸Šï¼Ÿ</p><p>æœ€ç®€å•æœ€ç›´è§‚çš„æƒ³æ³•æ˜¯ï¼Œç”¨ä¸€ä¸ªCSVæ–‡ä»¶æ ¼å¼ã€‚ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ•°æ®è¡¨ã€‚æ–‡ä»¶é‡Œé¢çš„æ¯ä¸€è¡Œå°±æ˜¯è¿™ä¸ªè¡¨é‡Œé¢çš„ä¸€æ¡è®°å½•ã€‚å¦‚æœè¦ä¿®æ”¹æ•°æ®åº“é‡Œé¢çš„æŸä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦å…ˆæ‰¾åˆ°è¿™ä¸€è¡Œï¼Œç„¶åç›´æ¥å»ä¿®æ”¹è¿™ä¸€è¡Œçš„æ•°æ®ã€‚è¯»å–æ•°æ®ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><p>è¦æ‰¾åˆ°è¿™æ ·æ•°æ®ï¼Œæœ€ç¬¨çš„åŠæ³•è‡ªç„¶æ˜¯ä¸€è¡Œä¸€è¡Œè¯»ï¼Œä¹Ÿå°±æ˜¯éå†æ•´ä¸ªCSVæ–‡ä»¶ã€‚ä¸è¿‡è¿™æ ·çš„è¯ï¼Œç›¸å½“äºéšä¾¿è¯»å–ä»»ä½•ä¸€æ¡æ•°æ®éƒ½è¦æ‰«æå…¨è¡¨ï¼Œå¤ªæµªè´¹ç¡¬ç›˜çš„ååé‡äº†ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è¯•è¯•ç»™è¿™ä¸ªCSVæ–‡ä»¶åŠ ä¸€ä¸ªç´¢å¼•ã€‚æ¯”å¦‚ï¼Œç»™æ•°æ®çš„è¡Œå·åŠ ä¸€ä¸ªç´¢å¼•ã€‚å¦‚æœä½ å­¦è¿‡æ•°æ®åº“åŸç†æˆ–è€…ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œé‚£ä½ åº”è¯¥çŸ¥é“ï¼Œé€šè¿‡B+æ ‘å¤šåŠæ˜¯å¯ä»¥æ¥å»ºç«‹è¿™æ ·ä¸€ä¸ªç´¢å¼•çš„ã€‚</p><!-- [[[read_end]]] --><p>ç´¢å¼•é‡Œé¢æ²¡æœ‰ä¸€æ•´è¡Œçš„æ•°æ®ï¼Œåªæœ‰ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œè¿™ä¸ªæ˜ å°„å…³ç³»å¯ä»¥è®©è¡Œå·ç›´æ¥ä»ç¡¬ç›˜çš„æŸä¸ªä½ç½®å»è¯»ã€‚æ‰€ä»¥ï¼Œç´¢å¼•æ¯”èµ·æ•°æ®å°å¾ˆå¤šã€‚æˆ‘ä»¬å¯ä»¥æŠŠç´¢å¼•åŠ è½½åˆ°å†…å­˜é‡Œé¢ã€‚å³ä½¿ä¸åœ¨å†…å­˜é‡Œé¢ï¼Œè¦æ‰¾æ•°æ®çš„æ—¶å€™å¿«é€Ÿéå†ä¸€ä¸‹æ•´ä¸ªç´¢å¼•ï¼Œä¹Ÿä¸éœ€è¦è¯»å¤ªå¤šçš„æ•°æ®ã€‚</p><p>åŠ äº†ç´¢å¼•ä¹‹åï¼Œæˆ‘ä»¬è¦è¯»å–ç‰¹å®šçš„æ•°æ®ï¼Œå°±ä¸ç”¨å»æ‰«ææ•´ä¸ªæ•°æ®è¡¨æ–‡ä»¶äº†ã€‚ç›´æ¥ä»ç‰¹å®šçš„ç¡¬ç›˜ä½ç½®ï¼Œå°±å¯ä»¥è¯»åˆ°æƒ³è¦çš„è¡Œã€‚ç´¢å¼•ä¸ä»…å¯ä»¥ç´¢å¼•è¡Œå·ï¼Œè¿˜å¯ä»¥ç´¢å¼•æŸä¸ªå­—æ®µã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¾ˆå¤šä¸ªä¸åŒçš„ç‹¬ç«‹çš„ç´¢å¼•ã€‚å†™SQLçš„æ—¶å€™ï¼Œwhereå­å¥åé¢çš„æŸ¥è¯¢æ¡ä»¶å¯ä»¥ç”¨åˆ°è¿™äº›ç´¢å¼•ã€‚</p><p>ä¸è¿‡ï¼Œè¿™æ ·çš„è¯ï¼Œå†™å…¥æ•°æ®çš„æ—¶å€™å°±ä¼šéº»çƒ¦ä¸€äº›ã€‚æˆ‘ä»¬ä¸ä»…è¦åœ¨æ•°æ®è¡¨é‡Œé¢å†™å…¥æ•°æ®ï¼Œå¯¹äºæ‰€æœ‰çš„ç´¢å¼•ä¹Ÿéƒ½éœ€è¦è¿›è¡Œæ›´æ–°ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå†™å…¥ä¸€æ¡æ•°æ®å°±è¦è§¦å‘å¥½å‡ ä¸ªéšæœºå†™å…¥çš„æ›´æ–°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f3/3c/f3c01bc2de99dbb83ad17cef1fb38a3c.jpeg?wh=2629*2026\" alt=\"\"></p><p>åœ¨è¿™æ ·ä¸€ä¸ªæ•°æ®æ¨¡å‹ä¸‹ï¼ŒæŸ¥è¯¢æ“ä½œå¾ˆçµæ´»ã€‚æ— è®ºæ˜¯æ ¹æ®å“ªä¸ªå­—æ®µæŸ¥è¯¢ï¼Œåªè¦æœ‰ç´¢å¼•ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¸€æ¬¡éšæœºè¯»ï¼Œå¾ˆå¿«åœ°è¯»åˆ°å¯¹åº”çš„æ•°æ®ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªçµæ´»æ€§ä¹Ÿå¸¦æ¥äº†ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯æ— è®ºå¹²ç‚¹ä»€ä¹ˆï¼Œéƒ½æœ‰å¤§é‡çš„éšæœºè¯»å†™è¯·æ±‚ã€‚è€Œéšæœºè¯»å†™è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚æœ€ç»ˆæ˜¯è¦è½åˆ°ç¡¬ç›˜ä¸Šï¼Œç‰¹åˆ«æ˜¯HDDç¡¬ç›˜çš„è¯ï¼Œæˆ‘ä»¬å°±å¾ˆéš¾åšåˆ°é«˜å¹¶å‘äº†ã€‚æ¯•ç«ŸHDDç¡¬ç›˜åªæœ‰100å·¦å³çš„QPSã€‚</p><p>è€Œè¿™ä¸ªéšæ—¶æ·»åŠ ç´¢å¼•ï¼Œå¯ä»¥æ ¹æ®ä»»æ„å­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™æ ·è¡¨ç°å‡ºçš„çµæ´»æ€§ï¼Œåˆæ˜¯æˆ‘ä»¬çš„DMPç³»ç»Ÿé‡Œé¢ä¸å¤ªéœ€è¦çš„ã€‚DMPçš„KVæ•°æ®åº“ä¸»è¦çš„åº”ç”¨åœºæ™¯ï¼Œæ˜¯æ ¹æ®ä¸»é”®çš„éšæœºæŸ¥è¯¢ï¼Œä¸éœ€è¦æ ¹æ®å…¶ä»–å­—æ®µè¿›è¡Œç­›é€‰æŸ¥è¯¢ã€‚æ•°æ®ç®¡é“çš„éœ€æ±‚ï¼Œåˆ™åªéœ€è¦ä¸æ–­è¿½åŠ å†™å…¥å’Œé¡ºåºè¯»å–å°±å¥½äº†ã€‚å³ä½¿è¿›è¡Œæ•°æ®åˆ†æçš„æ•°æ®ä»“åº“ï¼Œé€šå¸¸ä¹Ÿä¸æ˜¯æ ¹æ®å­—æ®µè¿›è¡Œæ•°æ®ç­›é€‰ï¼Œè€Œæ˜¯å…¨é‡æ‰«ææ•°æ®è¿›è¡Œåˆ†ææ±‡æ€»ã€‚</p><p>åé¢çš„ä¸¤ä¸ªåœºæ™¯è¿˜å¥½è¯´ï¼Œå¤§ä¸äº†æˆ‘ä»¬è®©ç¨‹åºå»æ‰«æå…¨è¡¨æˆ–è€…è¿½åŠ å†™å…¥ã€‚ä½†æ˜¯ï¼Œåœ¨KVæ•°æ®åº“è¿™ä¸ªéœ€æ±‚ä¸Šï¼Œåˆšæ‰è¿™ä¸ªæœ€ç®€å•çš„å…³ç³»å‹æ•°æ®åº“çš„è®¾è®¡ï¼Œå°±ä¼šé¢ä¸´å¤§é‡çš„éšæœºå†™å…¥å’Œéšæœºè¯»å–çš„æŒ‘æˆ˜ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨å®é™…çš„å¤§å‹ç³»ç»Ÿä¸­ï¼Œå¤§å®¶éƒ½ä¼šä½¿ç”¨ä¸“é—¨çš„åˆ†å¸ƒå¼KVæ•°æ®åº“ï¼Œæ¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚é‚£ä¹ˆä¸‹é¢ï¼Œæˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹ä¸€çœ‹ï¼ŒFacebookå¼€æºçš„Cassandraçš„æ•°æ®å­˜å‚¨å’Œè¯»å†™æ˜¯æ€ä¹ˆåšçš„ï¼Œè¿™äº›è®¾è®¡æ˜¯æ€ä¹ˆè§£å†³é«˜å¹¶å‘çš„éšæœºè¯»å†™é—®é¢˜çš„ã€‚</p><h2>Cassandraï¼šé¡ºåºå†™å’Œéšæœºè¯»</h2><h3>Cassandraçš„æ•°æ®æ¨¡å‹</h3><p>ä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼çš„KVæ•°æ®åº“ï¼ŒCassandraçš„é”®ä¸€èˆ¬è¢«ç§°ä¸ºRow Keyã€‚å…¶å®å°±æ˜¯ä¸€ä¸ª16åˆ°36ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²ã€‚æ¯ä¸€ä¸ªRow Keyå¯¹åº”çš„å€¼å…¶å®æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œé‡Œé¢å¯ä»¥ç”¨é”®å€¼å¯¹ï¼Œå†å­˜å…¥å¾ˆå¤šä½ éœ€è¦çš„æ•°æ®ã€‚</p><p>Cassandraæœ¬èº«ä¸åƒå…³ç³»å‹æ•°æ®åº“é‚£æ ·ï¼Œæœ‰ä¸¥æ ¼çš„Schemaï¼Œåœ¨æ•°æ®åº“åˆ›å»ºçš„ä¸€å¼€å§‹å°±å®šä¹‰å¥½äº†æœ‰å“ªäº›åˆ—ï¼ˆColumnï¼‰ã€‚ä½†æ˜¯ï¼Œå®ƒè®¾è®¡äº†ä¸€ä¸ªå«ä½œåˆ—æ—ï¼ˆColumn Familyï¼‰çš„æ¦‚å¿µï¼Œæˆ‘ä»¬éœ€è¦æŠŠç»å¸¸æ”¾åœ¨ä¸€èµ·ä½¿ç”¨çš„å­—æ®µï¼Œæ”¾åœ¨åŒä¸€ä¸ªåˆ—æ—é‡Œé¢ã€‚æ¯”å¦‚ï¼ŒDMPé‡Œé¢çš„äººå£å±æ€§ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“æˆæ˜¯ä¸€ä¸ªåˆ—æ—ã€‚ç”¨æˆ·çš„å…´è¶£ä¿¡æ¯ï¼Œå¯ä»¥æ˜¯å¦å¤–ä¸€ä¸ªåˆ—æ—ã€‚è¿™æ ·ï¼Œæ—¢ä¿æŒäº†ä¸éœ€è¦ä¸¥æ ¼çš„Schemaè¿™æ ·çš„çµæ´»æ€§ï¼Œä¹Ÿä¿ç•™äº†å¯ä»¥æŠŠå¸¸å¸¸ä¸€èµ·ä½¿ç”¨çš„æ•°æ®å­˜æ”¾åœ¨ä¸€èµ·çš„ç©ºé—´å±€éƒ¨æ€§ã€‚</p><p>å¾€Cassandraçš„é‡Œé¢è¯»å†™æ•°æ®ï¼Œå…¶å®ç‰¹åˆ«ç®€å•ï¼Œå°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªå·¨å¤§çš„åˆ†å¸ƒå¼çš„å“ˆå¸Œè¡¨é‡Œé¢å†™æ•°æ®ã€‚æˆ‘ä»¬æŒ‡å®šä¸€ä¸ªRow Keyï¼Œç„¶åæ’å…¥æˆ–è€…æ›´æ–°è¿™ä¸ªRow Keyçš„æ•°æ®å°±å¥½äº†ã€‚</p><h3>Cassandraçš„å†™æ“ä½œ</h3><p><img src=\"https://static001.geekbang.org/resource/image/02/58/02d58b12403f7907975e00549a008c58.jpeg?wh=2629*1486\" alt=\"\"></p><center><span class=\"reference\">Cassandraåªæœ‰é¡ºåºå†™å…¥ï¼Œæ²¡æœ‰éšæœºå†™å…¥</span></center><p>Cassandraè§£å†³éšæœºå†™å…¥æ•°æ®çš„è§£å†³æ–¹æ¡ˆï¼Œç®€å•æ¥è¯´ï¼Œå°±å«ä½œâ€œä¸éšæœºå†™ï¼Œåªé¡ºåºå†™â€ã€‚å¯¹äºCassandraæ•°æ®åº“çš„å†™æ“ä½œï¼Œé€šå¸¸åŒ…å«ä¸¤ä¸ªåŠ¨ä½œã€‚ç¬¬ä¸€ä¸ªæ˜¯å¾€ç£ç›˜ä¸Šå†™å…¥ä¸€æ¡æäº¤æ—¥å¿—ï¼ˆCommit Logï¼‰ã€‚å¦ä¸€ä¸ªæ“ä½œï¼Œåˆ™æ˜¯ç›´æ¥åœ¨å†…å­˜çš„æ•°æ®ç»“æ„ä¸Šå»æ›´æ–°æ•°æ®ã€‚åé¢è¿™ä¸ªå¾€å†…å­˜çš„æ•°æ®ç»“æ„é‡Œé¢çš„æ•°æ®æ›´æ–°ï¼Œåªæœ‰åœ¨æäº¤æ—¥å¿—å†™æˆåŠŸä¹‹åæ‰ä¼šè¿›è¡Œã€‚æ¯å°æœºå™¨ä¸Šï¼Œéƒ½æœ‰ä¸€ä¸ªå¯é çš„ç¡¬ç›˜å¯ä»¥è®©æˆ‘ä»¬å»å†™å…¥æäº¤æ—¥å¿—ã€‚å†™å…¥æäº¤æ—¥å¿—éƒ½æ˜¯é¡ºåºå†™ï¼ˆSequential Writeï¼‰ï¼Œè€Œä¸æ˜¯éšæœºå†™ï¼ˆRandom Writeï¼‰ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬æœ€å¤§åŒ–äº†å†™å…¥çš„ååé‡ã€‚</p><p>å¦‚æœä½ ä¸æ˜ç™½è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Œå¯ä»¥å›åˆ°<a href=\"https://time.geekbang.org/column/article/118191\">ç¬¬47è®²</a>ï¼Œçœ‹çœ‹ç¡¬ç›˜çš„æ€§èƒ½è¯„æµ‹ã€‚æ— è®ºæ˜¯HDDç¡¬ç›˜è¿˜æ˜¯SSDç¡¬ç›˜ï¼Œé¡ºåºå†™å…¥éƒ½æ¯”éšæœºå†™å…¥è¦å¿«å¾—å¤šã€‚</p><p>å†…å­˜çš„ç©ºé—´æ¯”è¾ƒæœ‰é™ï¼Œä¸€æ—¦å†…å­˜é‡Œé¢çš„æ•°æ®é‡æˆ–è€…æ¡ç›®è¶…è¿‡ä¸€å®šçš„é™é¢ï¼ŒCassandraå°±ä¼šæŠŠå†…å­˜é‡Œé¢çš„æ•°æ®ç»“æ„dumpåˆ°ç¡¬ç›˜ä¸Šã€‚è¿™ä¸ªDumpçš„æ“ä½œï¼Œä¹Ÿæ˜¯é¡ºåºå†™è€Œä¸æ˜¯éšæœºå†™ï¼Œæ‰€ä»¥æ€§èƒ½ä¹Ÿä¸ä¼šæ˜¯ä¸€ä¸ªé—®é¢˜ã€‚é™¤äº†Dumpçš„æ•°æ®ç»“æ„æ–‡ä»¶ï¼ŒCassandraè¿˜ä¼šæ ¹æ®row keyæ¥ç”Ÿæˆä¸€ä¸ªç´¢å¼•æ–‡ä»¶ï¼Œæ–¹ä¾¿åç»­åŸºäºç´¢å¼•æ¥è¿›è¡Œå¿«é€ŸæŸ¥è¯¢ã€‚</p><p>éšç€ç¡¬ç›˜ä¸Šçš„Dumpå‡ºæ¥çš„æ–‡ä»¶è¶Šæ¥è¶Šå¤šï¼ŒCassandraä¼šåœ¨åå°è¿›è¡Œæ–‡ä»¶çš„å¯¹æ¯”åˆå¹¶ã€‚åœ¨å¾ˆå¤šåˆ«çš„KVæ•°æ®åº“ç³»ç»Ÿé‡Œé¢ï¼Œä¹Ÿæœ‰ç±»ä¼¼è¿™ç§çš„åˆå¹¶åŠ¨ä½œï¼Œæ¯”å¦‚AeroSpikeæˆ–è€…Googleçš„BigTableã€‚è¿™äº›æ“ä½œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸ºCompactionã€‚åˆå¹¶åŠ¨ä½œåŒæ ·æ˜¯é¡ºåºè¯»å–å¤šä¸ªæ–‡ä»¶ï¼Œåœ¨å†…å­˜é‡Œé¢åˆå¹¶å®Œæˆï¼Œå†Dumpå‡ºæ¥ä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚æ•´ä¸ªæ“ä½œè¿‡ç¨‹ä¸­ï¼Œåœ¨ç¡¬ç›˜å±‚é¢ä»ç„¶æ˜¯é¡ºåºè¯»å†™ã€‚</p><h3>Cassandraçš„è¯»æ“ä½œ</h3><p><img src=\"https://static001.geekbang.org/resource/image/68/b0/68855c2861f07417bbc2eb64672d36b0.jpeg?wh=2629*1516\" alt=\"\"></p><center><span class=\"reference\">Cassandraçš„è¯»è¯·æ±‚ï¼Œä¼šé€šè¿‡ç¼“å­˜ã€BloomFilterè¿›è¡Œä¸¤é“è¿‡æ»¤ï¼Œå°½å¯èƒ½é¿å…æ•°æ®è¯·æ±‚å‘½ä¸­ç¡¬ç›˜</span></center><p>å½“æˆ‘ä»¬è¦ä»Cassandraè¯»æ•°æ®çš„æ—¶å€™ï¼Œä¼šä»å†…å­˜é‡Œé¢æ‰¾æ•°æ®ï¼Œå†ä»ç¡¬ç›˜è¯»æ•°æ®ï¼Œç„¶åæŠŠä¸¤éƒ¨åˆ†çš„æ•°æ®åˆå¹¶æˆæœ€ç»ˆç»“æœã€‚è¿™äº›ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ï¼Œåœ¨å†…å­˜é‡Œé¢ä¼šæœ‰å¯¹åº”çš„Cacheï¼Œåªæœ‰åœ¨Cacheé‡Œé¢æ‰¾ä¸åˆ°ï¼Œæˆ‘ä»¬æ‰ä¼šå»è¯·æ±‚ç¡¬ç›˜é‡Œé¢çš„æ•°æ®ã€‚</p><p>å¦‚æœä¸å¾—ä¸è®¿é—®ç¡¬ç›˜ï¼Œå› ä¸ºç¡¬ç›˜é‡Œé¢å¯èƒ½Dumpäº†å¾ˆå¤šä¸ªä¸åŒæ—¶é—´ç‚¹çš„å†…å­˜æ•°æ®çš„å¿«ç…§ã€‚æ‰€ä»¥ï¼Œæ‰¾æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯æŒ‰ç…§æ—¶é—´ä»æ–°çš„å¾€æ—§çš„é‡Œé¢æ‰¾ã€‚</p><p>è¿™ä¹Ÿå°±å¸¦æ¥å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯èƒ½è¦æŸ¥è¯¢å¾ˆå¤šä¸ªDumpæ–‡ä»¶ï¼Œæ‰èƒ½æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ã€‚æ‰€ä»¥ï¼ŒCassandraåœ¨è¿™ä¸€ç‚¹ä¸Šåˆåšäº†ä¸€ä¸ªä¼˜åŒ–ã€‚é‚£å°±æ˜¯ï¼Œå®ƒä¼šä¸ºæ¯ä¸€ä¸ªDumpçš„æ–‡ä»¶é‡Œé¢æ‰€æœ‰Row Keyç”Ÿæˆä¸€ä¸ªBloomFilterï¼Œç„¶åæŠŠè¿™ä¸ªBloomFilteræ”¾åœ¨å†…å­˜é‡Œé¢ã€‚è¿™æ ·ï¼Œå¦‚æœæƒ³è¦æŸ¥è¯¢çš„Row Keyåœ¨æ•°æ®æ–‡ä»¶é‡Œé¢ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ99%ä»¥ä¸Šçš„æƒ…å†µä¸‹ï¼Œå®ƒä¼šè¢«BloomFilterè¿‡æ»¤æ‰ï¼Œè€Œä¸éœ€è¦è®¿é—®ç¡¬ç›˜ã€‚</p><p>è¿™æ ·ï¼Œåªæœ‰å½“æ•°æ®åœ¨å†…å­˜é‡Œé¢æ²¡æœ‰ï¼Œå¹¶ä¸”åœ¨ç¡¬ç›˜çš„æŸä¸ªç‰¹å®šæ–‡ä»¶ä¸Šçš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘ä¸€æ¬¡å¯¹äºç¡¬ç›˜çš„è¯»è¯·æ±‚ã€‚</p><h2>SSDï¼šDBAä»¬çš„å¤§æ•‘æ˜Ÿ</h2><p>Cassandraæ˜¯Facebookåœ¨2008å¹´å¼€æºçš„ã€‚é‚£ä¸ªæ—¶å€™ï¼ŒSSDç¡¬ç›˜è¿˜æ²¡æœ‰é‚£ä¹ˆæ™®åŠã€‚å¯ä»¥çœ‹åˆ°ï¼Œå®ƒçš„è¯»å†™è®¾è®¡å……åˆ†è€ƒè™‘äº†ç¡¬ä»¶æœ¬èº«çš„ç‰¹æ€§ã€‚åœ¨å†™å…¥æ•°æ®è¿›è¡ŒæŒä¹…åŒ–ä¸Šï¼ŒCassandraæ²¡æœ‰ä»»ä½•çš„éšæœºå†™è¯·æ±‚ï¼Œæ— è®ºæ˜¯Commit Logè¿˜æ˜¯Dumpï¼Œå…¨éƒ¨éƒ½æ˜¯é¡ºåºå†™ã€‚</p><p>åœ¨æ•°æ®è¯»çš„è¯·æ±‚ä¸Šï¼Œæœ€æ–°å†™å…¥çš„æ•°æ®éƒ½ä¼šæ›´æ–°åˆ°å†…å­˜ã€‚å¦‚æœè¦è¯»å–è¿™äº›æ•°æ®ï¼Œä¼šä¼˜å…ˆä»å†…å­˜è¯»åˆ°ã€‚è¿™ç›¸å½“äºæ˜¯ä¸€ä¸ªä½¿ç”¨äº†LRUçš„ç¼“å­˜æœºåˆ¶ã€‚åªæœ‰åœ¨ä¸‡èˆ¬æ— å¥ˆçš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šæœ‰å¯¹äºç¡¬ç›˜çš„éšæœºè¯»è¯·æ±‚ã€‚å³ä½¿åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼ŒCassandraä¹Ÿåœ¨æ–‡ä»¶ä¹‹å‰åŠ äº†ä¸€å±‚BloomFilterï¼ŒæŠŠæœ¬æ¥å› ä¸ºDumpæ–‡ä»¶å¸¦æ¥çš„éœ€è¦å¤šæ¬¡è¯»ç¡¬ç›˜çš„é—®é¢˜ï¼Œç®€åŒ–æˆå¤šæ¬¡å†…å­˜è¯»å’Œä¸€æ¬¡ç¡¬ç›˜è¯»ã€‚</p><p>è¿™äº›è®¾è®¡ï¼Œä½¿å¾—Cassandraå³ä½¿æ˜¯åœ¨HDDç¡¬ç›˜ä¸Šï¼Œä¹Ÿèƒ½æœ‰ä¸é”™çš„è®¿é—®æ€§èƒ½ã€‚å› ä¸ºæ‰€æœ‰çš„å†™å…¥éƒ½æ˜¯é¡ºåºå†™æˆ–è€…å†™å…¥åˆ°å†…å­˜ï¼Œæ‰€ä»¥ï¼Œå†™å…¥å¯ä»¥åšåˆ°é«˜å¹¶å‘ã€‚HDDç¡¬ç›˜çš„ååç‡è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œæ¯ç§’å¯ä»¥å†™å…¥100MBä»¥ä¸Šçš„æ•°æ®ï¼Œå¦‚æœä¸€æ¡æ•°æ®åªæœ‰1KBï¼Œé‚£ä¹ˆ10ä¸‡çš„WPSï¼ˆWrites per secondsï¼‰ä¹Ÿæ˜¯èƒ½å¤Ÿåšåˆ°çš„ã€‚è¿™è¶³å¤Ÿæ”¯æ’‘æˆ‘ä»¬DMPæœŸæœ›çš„å†™å…¥å‹åŠ›äº†ã€‚</p><p>è€Œå¯¹äºæ•°æ®çš„è¯»ï¼Œå°±æœ‰ä¸€äº›æŒ‘æˆ˜äº†ã€‚å¦‚æœæ•°æ®è¯»è¯·æ±‚æœ‰å¾ˆå¼ºçš„å±€éƒ¨æ€§ï¼Œé‚£æˆ‘ä»¬çš„å†…å­˜å°±èƒ½æå®šDMPéœ€è¦çš„è®¿é—®é‡ã€‚</p><p>ä½†æ˜¯ï¼Œé—®é¢˜å°±å‡ºåœ¨è¿™ä¸ªå±€éƒ¨æ€§ä¸Šã€‚DMPçš„æ•°æ®è®¿é—®åˆ†å¸ƒï¼Œå…¶å®æ˜¯ç¼ºå°‘å±€éƒ¨æ€§çš„ã€‚ä½ ä»”ç»†æƒ³ä¸€æƒ³DMPçš„åº”ç”¨åœºæ™¯å°±æ˜ç™½äº†ã€‚DMPé‡Œé¢çš„Row Keyéƒ½æ˜¯ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚æ™®é€šç”¨æˆ·çš„ä¸Šç½‘æ—¶é•¿æ€ä¹ˆä¼šæœ‰å±€éƒ¨æ€§å‘¢ï¼Ÿæ¯ä¸ªäººä¸Šç½‘çš„æ—¶é—´å’Œè®¿é—®ç½‘é¡µçš„æ¬¡æ•°å°±é‚£ä¹ˆå¤šã€‚ä¸Šç½‘å¤šçš„äººï¼Œä¸€å¤©æœ€å¤šä¹Ÿå°±24å°æ—¶ã€‚å¤§éƒ¨åˆ†ç”¨æˆ·ä¸€å¤©ä¹Ÿè¦ä¸Šç½‘2ï½3å°æ—¶ã€‚æˆ‘ä»¬æ²¡åŠæ³•è¯´ï¼ŒæŠŠè¿™äº›ç”¨æˆ·çš„æ•°æ®æ”¾åœ¨å†…å­˜é‡Œé¢ï¼Œé‚£äº›ç”¨æˆ·ä¸æ”¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/cf/ca/cf55146f8cf79029af6d1f86f3de86ca.jpeg?wh=2086*376\" alt=\"\"></p><center><span class=\"reference\">DMPç³»ç»Ÿï¼Œåªæœ‰æ ¹æ®å›½å®¶å’Œæ—¶åŒºä¸åŒæœ‰æ¯”è¾ƒæ˜æ˜¾çš„å±€éƒ¨æ€§ï¼Œæ˜¯å±€éƒ¨æ€§ä¸å¼ºçš„ç³»ç»Ÿ</span></center><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä¸å¯èƒ½æœ‰ä¸€å®šçš„æ—¶é—´å±€éƒ¨æ€§å‘¢ï¼Ÿå¦‚æœæ˜¯Facebooké‚£æ ·çš„å…¨çƒç¤¾äº¤ç½‘ç»œï¼Œé‚£å¯èƒ½è¿˜æœ‰ä¸€å®šçš„æ—¶é—´å±€éƒ¨æ€§ã€‚æ¯•ç«Ÿä¸åŒå›½å®¶çš„äººçš„æ—¶åŒºä¸ä¸€æ ·ã€‚æˆ‘ä»¬å¯ä»¥è¯´ï¼Œåœ¨å°åº¦äººæ°‘çš„ç™½å¤©ï¼ŒæŠŠå°åº¦äººæ°‘çš„æ•°æ®åŠ è½½åˆ°å†…å­˜é‡Œé¢ï¼Œç¾å›½äººæ°‘çš„æ•°æ®å°±æ”¾åœ¨ç¡¬ç›˜ä¸Šã€‚åˆ°äº†å°åº¦äººæ°‘çš„æ™šä¸Šï¼Œå†æŠŠç¾å›½äººæ°‘çš„æ•°æ®æ¢åˆ°å†…å­˜é‡Œé¢æ¥ã€‚</p><p>å¦‚æœä½ çš„ä¸»è¦ä¸šåŠ¡æ˜¯åœ¨å›½å†…ï¼Œé‚£è¿™ä¸ªæ—¶é—´å±€éƒ¨æ€§å°±æ²¡æœ‰äº†ã€‚å¤§å®¶çš„ä¸Šç½‘é«˜å³°æ—¶æ®µï¼Œéƒ½æ˜¯åœ¨æ—©ä¸Šä¸Šç­è·¯ä¸Šã€ä¸­åˆä¼‘æ¯çš„æ—¶å€™ä»¥åŠæ™šä¸Šä¸‹ç­ä¹‹åçš„æ—¶é—´ï¼Œæ²¡æœ‰ä»€ä¹ˆåŒºåˆ†åº¦ã€‚</p><p>é¢ä¸´è¿™ä¸ªæƒ…å†µï¼Œå¦‚æœä½ ä»¬çš„CEOæˆ–è€…CTOé—®ä½ ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡ä¼˜åŒ–ç¨‹åºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿå¦‚æœä½ æ²¡æœ‰ä»”ç»†ä»æ•°æ®åˆ†å¸ƒå’ŒåŸç†çš„å±‚é¢æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œè€Œç›´æ¥ä¸€å£ç­”åº”ä¸‹æ¥ï¼Œé‚£ä½ å¯èƒ½ä¹‹åè¦å¤´ç–¼äº†ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜å¾ˆæœ‰å¯èƒ½æ˜¯æä¸å®šçš„ã€‚</p><p>å› ä¸ºç¼ºå°‘äº†æ—¶é—´å±€éƒ¨æ€§ï¼Œæˆ‘ä»¬å†…å­˜çš„ç¼“å­˜èƒ½å¤Ÿèµ·åˆ°çš„ä½œç”¨å°±å¾ˆå°äº†ï¼Œå¤§éƒ¨åˆ†è¯·æ±‚æœ€ç»ˆè¿˜æ˜¯è¦è½åˆ°HDDç¡¬ç›˜çš„éšæœºè¯»ä¸Šã€‚ä½†æ˜¯ï¼ŒHDDç¡¬ç›˜çš„éšæœºè¯»çš„æ€§èƒ½å¤ªå·®äº†ï¼Œæˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/116104\">ç¬¬45è®²</a>çœ‹è¿‡ï¼Œä¹Ÿå°±æ˜¯100QPSå·¦å³ã€‚è€Œå¦‚æœå…¨éƒ½æ”¾å†…å­˜ï¼Œé‚£å°±å¤ªè´µäº†ï¼Œæˆæœ¬åœ¨HDDç¡¬ç›˜100å€ä»¥ä¸Šã€‚</p><p>ä¸è¿‡ï¼Œå¹¸è¿çš„æ˜¯ï¼Œä»2010å¹´å¼€å§‹ï¼ŒSSDç¡¬ç›˜çš„å¤§è§„æ¨¡å•†ç”¨å¸®åŠ©æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å®ƒçš„ä»·æ ¼åœ¨HDDç¡¬ç›˜çš„10å€ï¼Œä½†æ˜¯éšæœºè¯»çš„è®¿é—®èƒ½åŠ›åœ¨HDDç¡¬ç›˜çš„ç™¾å€ä»¥ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨ä¸Šäº†SSDç¡¬ç›˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨1/10çš„æˆæœ¬è·å¾—å’Œå†…å­˜åŒæ ·çš„QPSã€‚åŒæ ·çš„ä»·æ ¼çš„SSDç¡¬ç›˜ï¼Œå®¹é‡åˆ™æ˜¯å†…å­˜çš„å‡ åå€ï¼Œä¹Ÿèƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œç”¨è¾ƒä½çš„æˆæœ¬å­˜ä¸‹æ•´ä¸ªäº’è”ç½‘ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>ä¸å¤¸å¼ åœ°è¯´ï¼Œè¿‡å»åå¹´çš„â€œå¤§æ•°æ®â€â€œé«˜å¹¶å‘â€â€œåƒäººåƒé¢â€ï¼Œæœ‰ä¸€åŠçš„åŠŸåŠ³åº”è¯¥å½’åœ¨è®©SSDå®¹é‡ä¸æ–­ä¸Šå‡ã€ä»·æ ¼ä¸æ–­ä¸‹é™çš„ç¡¬ç›˜äº§ä¸šä¸Šã€‚</p><p>å›åˆ°æˆ‘ä»¬çœ‹åˆ°çš„Cassandraçš„è¯»å†™è®¾è®¡ï¼Œä½ ä¼šå‘ç°ï¼ŒCassandraçš„å†™å…¥æœºåˆ¶å®Œç¾åŒ¹é…äº†æˆ‘ä»¬åœ¨ç¬¬46å’Œ47è®²æ‰€è¯´çš„SSDç¡¬ç›˜çš„ä¼˜ç¼ºç‚¹ã€‚</p><p>åœ¨æ•°æ®å†™å…¥å±‚é¢ï¼ŒCassandraçš„æ•°æ®å†™å…¥éƒ½æ˜¯Commit Logçš„é¡ºåºå†™å…¥ï¼Œä¹Ÿå°±æ˜¯ä¸æ–­åœ°åœ¨ç¡¬ç›˜ä¸Šå¾€åè¿½åŠ å†…å®¹ï¼Œè€Œä¸æ˜¯å»ä¿®æ”¹ç°æœ‰çš„æ–‡ä»¶å†…å®¹ã€‚ä¸€æ—¦å†…å­˜é‡Œé¢çš„æ•°æ®è¶…è¿‡ä¸€å®šçš„é˜ˆå€¼ï¼ŒCassandraåˆä¼šå®Œæ•´åœ°Dumpä¸€ä¸ªæ–°æ–‡ä»¶åˆ°æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚è¿™åŒæ ·æ˜¯ä¸€ä¸ªè¿½åŠ å†™å…¥ã€‚</p><p>æ•°æ®çš„å¯¹æ¯”å’Œç´§å‡‘åŒ–ï¼ˆCompactionï¼‰ï¼ŒåŒæ ·æ˜¯è¯»å–ç°æœ‰çš„å¤šä¸ªæ–‡ä»¶ï¼Œç„¶åå†™ä¸€ä¸ªæ–°çš„æ–‡ä»¶å‡ºæ¥ã€‚å†™å…¥æ“ä½œåªè¿½åŠ ä¸ä¿®æ”¹çš„ç‰¹æ€§ï¼Œæ­£å¥½å¤©ç„¶åœ°ç¬¦åˆSSDç¡¬ç›˜åªèƒ½æŒ‰å—è¿›è¡Œæ“¦é™¤å†™å…¥çš„æ“ä½œã€‚åœ¨è¿™æ ·çš„å†™å…¥æ¨¡å¼ä¸‹ï¼ŒCassandraç”¨åˆ°çš„SSDç¡¬ç›˜ï¼Œä¸éœ€è¦é¢‘ç¹åœ°è¿›è¡Œåå°çš„Compactionï¼Œèƒ½å¤Ÿæœ€å¤§åŒ–SSDç¡¬ç›˜çš„ä½¿ç”¨å¯¿å‘½ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼ŒCassandraåœ¨SSDç¡¬ç›˜æ™®åŠä¹‹åï¼Œèƒ½å¤Ÿè·å¾—è¿›ä¸€æ­¥å¿«é€Ÿå‘å±•ã€‚</p><h2>æ€»ç»“å»¶ä¼¸</h2><p>å¥½äº†ï¼Œå…³äºDMPå’Œå­˜å‚¨å™¨çš„å†…å®¹ï¼Œè®²åˆ°è¿™é‡Œå°±å·®ä¸å¤šäº†ã€‚å¸Œæœ›ä»Šå¤©çš„è¿™ä¸€è®²ï¼Œèƒ½å¤Ÿè®©ä½ ä»Cassandraçš„æ•°æ®åº“å®ç°çš„ç»†èŠ‚å±‚é¢ï¼Œå½»åº•ç†è§£æ€ä¹ˆè¿ç”¨å¥½å­˜å‚¨å™¨çš„æ€§èƒ½ç‰¹æ€§å’ŒåŸç†ã€‚</p><p>ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ï¼Œæˆ‘ä»¬æŠŠä¸€æ¡æ¡æ•°æ®å­˜æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ï¼ŒåŒæ—¶å†æŠŠç´¢å¼•å­˜æ”¾åœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹ã€‚è¿™æ ·çš„å­˜å‚¨æ–¹å¼ï¼Œå…¶å®å¾ˆæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œå•æ¬¡çš„éšæœºè¯»å’Œéšæœºå†™ï¼Œæ•°æ®çš„å­˜å‚¨ä¹Ÿå¯ä»¥å¾ˆç´§å‡‘ã€‚ä½†æ˜¯é—®é¢˜ä¹Ÿåœ¨äºæ­¤ï¼Œå¤§éƒ¨åˆ†çš„SQLè¯·æ±‚ï¼Œéƒ½ä¼šå¸¦æ¥å¤§é‡çš„éšæœºè¯»å†™çš„è¯·æ±‚ã€‚è¿™ä½¿å¾—ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ï¼Œå…¶å®å¹¶ä¸é€‚åˆç”¨åœ¨çœŸçš„é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ã€‚</p><p>æˆ‘ä»¬çš„DMPéœ€è¦çš„è®¿é—®åœºæ™¯ï¼Œå…¶å®æ²¡æœ‰å¤æ‚çš„ç´¢å¼•éœ€æ±‚ï¼Œä½†æ˜¯ä¼šæœ‰æ¯”è¾ƒé«˜çš„å¹¶å‘æ€§ã€‚æˆ‘å¸¦ä½ ä¸€çœ‹äº†Facebookå¼€æºçš„Cassandraè¿™ä¸ªåˆ†å¸ƒå¼KVæ•°æ®åº“çš„è¯»å†™è®¾è®¡ã€‚é€šè¿‡åœ¨è¿½åŠ å†™å…¥Commit Logå’Œæ›´æ–°å†…å­˜ï¼ŒCassandraé¿å¼€äº†éšæœºå†™çš„é—®é¢˜ã€‚å†…å­˜æ•°æ®çš„Dumpå’Œåå°çš„å¯¹æ¯”åˆå¹¶ï¼ŒåŒæ ·ä¹Ÿéƒ½é¿å¼€äº†éšæœºå†™çš„é—®é¢˜ï¼Œä½¿å¾—Cassandraçš„å¹¶å‘å†™å…¥æ€§èƒ½æé«˜ã€‚</p><p>åœ¨æ•°æ®è¯»å–å±‚é¢ï¼Œé€šè¿‡å†…å­˜ç¼“å­˜å’ŒBloomFilterï¼ŒCassandraå·²ç»å°½å¯èƒ½åœ°å‡å°‘äº†éœ€è¦éšæœºè¯»å–ç¡¬ç›˜é‡Œé¢æ•°æ®çš„æƒ…å†µã€‚ä¸è¿‡æŒ‘æˆ˜åœ¨äºï¼ŒDMPç³»ç»Ÿçš„å±€éƒ¨æ€§ä¸å¼ºï¼Œä½¿å¾—æˆ‘ä»¬æœ€ç»ˆçš„éšæœºè¯»çš„è¯·æ±‚è¿˜æ˜¯è¦åˆ°ç¡¬ç›˜ä¸Šã€‚å¹¸è¿çš„æ˜¯ï¼ŒSSDç¡¬ç›˜åœ¨æ•°æ®æµ·é‡å¢é•¿çš„é‚£å‡ å¹´é‡Œä»·æ ¼ä¸æ–­ä¸‹é™ï¼Œä½¿å¾—æˆ‘ä»¬æœ€ç»ˆé€šè¿‡SSDç¡¬ç›˜è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><p>è€ŒSSDç¡¬ç›˜æœ¬èº«çš„æ“¦é™¤åæ‰èƒ½å†™å…¥çš„æœºåˆ¶ï¼Œæ­£å¥½éå¸¸é€‚åˆCassandraçš„æ•°æ®è¯»å†™æ¨¡å¼ï¼Œæœ€ç»ˆä½¿å¾—Cassandraåœ¨SSDç¡¬ç›˜æ™®åŠä¹‹åå¾—åˆ°äº†æ›´å¤§çš„å‘å±•ã€‚</p><h2>æ¨èé˜…è¯»</h2><p>ä»Šå¤©çš„æ¨èé˜…è¯»ï¼Œæ˜¯ä¸€ç¯‡ç›¸å…³çš„è®ºæ–‡ã€‚æˆ‘æ¨èä½ å»è¯»ä¸€è¯»<a href=\"https://www.cs.cornell.edu/projects/ladis2009/papers/lakshman-ladis2009.pdf\">Cassandra - A Decentralized Structured Storage System</a>ã€‚è¯»å®Œè¿™ç¯‡è®ºæ–‡ï¼Œä¸€æ–¹é¢ä½ ä¼šå¯¹åˆ†å¸ƒå¼KVæ•°æ®åº“çš„è®¾è®¡åŸåˆ™æœ‰æ‰€äº†è§£ï¼Œäº†è§£æ€ä¹ˆå»åšå¥½æ•°æ®åˆ†ç‰‡ã€æ•…éšœè½¬ç§»ã€æ•°æ®å¤åˆ¶è¿™äº›æœºåˆ¶ï¼›å¦ä¸€æ–¹é¢ï¼Œä½ å¯ä»¥çœ‹åˆ°åŸºäºå†…å­˜å’Œç¡¬ç›˜çš„ä¸åŒå­˜å‚¨è®¾å¤‡çš„ç‰¹æ€§ï¼ŒCassandraæ˜¯æ€ä¹ˆæœ‰é’ˆå¯¹æ€§åœ°è®¾è®¡æ•°æ®è¯»å†™å’ŒæŒä¹…åŒ–çš„æ–¹å¼çš„ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>é™¤äº†MySQLè¿™æ ·çš„å…³ç³»å‹æ•°æ®åº“ï¼Œè¿˜æœ‰Cassandraè¿™æ ·çš„åˆ†å¸ƒå¼KVæ•°æ®åº“ã€‚å®é™…ä¸Šï¼Œåœ¨æµ·é‡æ•°æ®åˆ†æçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜æœ‰ä¸€ç§å¸¸è§çš„æ•°æ®åº“ï¼Œå«ä½œåˆ—å¼å­˜å‚¨çš„OLAPçš„æ•°æ®åº“ï¼Œæ¯”å¦‚<a href=\"https://clickhouse.yandex/\">Clickhouse</a>ã€‚ä½ å¯ä»¥ç ”ç©¶ä¸€ä¸‹ï¼ŒClickhouseè¿™æ ·çš„æ•°æ®åº“é‡Œé¢çš„æ•°æ®æ˜¯æ€ä¹ˆå­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„ã€‚</p><p>æ¬¢è¿æŠŠä½ ç ”ç©¶çš„ç»“æœå†™åœ¨ç•™è¨€åŒºï¼Œå’Œå¤§å®¶ä¸€èµ·åˆ†äº«ã€äº¤æµã€‚å¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå’Œä»–ä¸€èµ·è®¨è®ºã€å­¦ä¹ ã€‚</p>","comments":[{"had_liked":false,"id":130830,"user_name":"xindoo","can_delete":false,"product_type":"c1","uid":1101718,"ip_address":"","ucode":"AEAF3208E644BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/96/251c0cee.jpg","comment_is_top":false,"comment_ctime":1567557889,"is_pvip":true,"replies":[{"id":"51043","content":"å“ˆå“ˆï¼Œå…¶å®åœ¨10-15å¹´è¿™æ®µæ—¶é—´ï¼Œè¿™æ ·çš„æ€§èƒ½æå‡å’Œè§£å†³æ–¹æ¡ˆæ˜¯å¸¸æ€","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568446458,"ip_address":"","comment_id":130830,"utype":1}],"discussion_count":3,"race_medal":0,"score":"160481347841","product_id":100026001,"comment_content":"æˆ‘æƒ³èµ·æ¥ä¸€ä¸ªæ®µå­ï¼ŒæŸå¤§å‚å¯¹å¤–å®£ç§°æŠŠmysqlçš„æ€§èƒ½æå‡äº†åå‡ å€ï¼Œå…¶å®æ˜¯æ”¹ç”¨äº†SSDã€‚","like_count":38,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466145,"discussion_content":"å“ˆå“ˆï¼Œå…¶å®åœ¨10-15å¹´è¿™æ®µæ—¶é—´ï¼Œè¿™æ ·çš„æ€§èƒ½æå‡å’Œè§£å†³æ–¹æ¡ˆæ˜¯å¸¸æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568446458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1325297,"avatar":"https://static001.geekbang.org/account/avatar/00/14/38/f1/996a070d.jpg","nickname":"LW","note":"","ucode":"89820332658E98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312548,"discussion_content":"ç ¸é’±ä¹Ÿæ˜¯æ€§èƒ½æå‡çš„é‡è¦æ‰‹æ®µå•Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602731858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1612275,"avatar":"https://static001.geekbang.org/account/avatar/00/18/99/f3/ca2c0dc6.jpg","nickname":"æˆ‘å¥½è¯»","note":"","ucode":"34C4858F446BEF","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297914,"discussion_content":"ç¡¬ä»¶çš„æå‡ä¹Ÿå«æå‡ï¼Œç‹­éš˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597110469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130874,"user_name":"å…è´¹çš„äºº","can_delete":false,"product_type":"c1","uid":1032106,"ip_address":"","ucode":"2B12D8ED63C564","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bf/aa/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1567563032,"is_pvip":false,"replies":[{"id":"51161","content":"åªè¿½åŠ ä¸ä¿®æ”¹ï¼Œä¸€èˆ¬æ“ä½œç³»ç»Ÿå’Œæ–‡ä»¶ç³»ç»Ÿä¼šä¸ºä½ å¤„ç†å¥½é¡ºåºå†™çš„é—®é¢˜çš„ã€‚<br><br>ä¿®æ”¹ç‰¹å®šæ–‡ä»¶ä¸­é—´çš„å†…å®¹ï¼Œé‚£è‡ªç„¶å°±æ˜¯éšæœºå†™å•¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568548355,"ip_address":"","comment_id":130874,"utype":1}],"discussion_count":2,"race_medal":0,"score":"134711549208","product_id":100026001,"comment_content":"ç”¨æˆ·æ€ç¨‹åº æ€ä¹ˆæ§åˆ¶é¡ºåºå†™è¿˜æ˜¯éšæœºå†™ï¼Ÿ","like_count":32,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466170,"discussion_content":"åªè¿½åŠ ä¸ä¿®æ”¹ï¼Œä¸€èˆ¬æ“ä½œç³»ç»Ÿå’Œæ–‡ä»¶ç³»ç»Ÿä¼šä¸ºä½ å¤„ç†å¥½é¡ºåºå†™çš„é—®é¢˜çš„ã€‚\n\nä¿®æ”¹ç‰¹å®šæ–‡ä»¶ä¸­é—´çš„å†…å®¹ï¼Œé‚£è‡ªç„¶å°±æ˜¯éšæœºå†™å•¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568548355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1793962,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5f/aa/63e641c1.jpg","nickname":"H","note":"","ucode":"04D7D030245E27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336573,"discussion_content":"èƒ½ä¸èƒ½è®²è®²ï¼Œä»€ä¹ˆæ˜¯éšæœºå†™ï¼Œä»€ä¹ˆæ˜¯é¡ºåºå†™ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608627269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239366,"user_name":"å­¦è€Œä¸æ€åˆ™æƒ˜","can_delete":false,"product_type":"c1","uid":1668117,"ip_address":"","ucode":"8ED2B08AA5A755","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJLgibqHsl97Oq3nvnEVz7V3kaGKLmia0Ja8c4yXO7QeLKiakganRJomNGgYToW4RnFs60zibDTHicjE5w/132","comment_is_top":false,"comment_ctime":1596512218,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44546185178","product_id":100026001,"comment_content":"ä¹‹å‰ä¸€ç›´æ²¡æœ‰ç ”ç©¶è¿‡Cassandraï¼Œçœ‹äº†è¿™ç¯‡æ–‡ç« æ‰çŸ¥é“ï¼ŒåŸæ¥å’Œhbaseç­‰ç³»åˆ—çš„æ—¥å¿—å‹nosqlåŸºæœ¬ä¸€è‡´ï¼ŒåŒæ ·çš„lmsæ ‘çš„éšæœºè¯»å–æ•ˆç‡ä½ï¼ŒåŒæ ·çš„å†…ç½®å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå†…ç½®çš„æŸ¥è¯¢ç¼“å­˜ï¼Œè¿˜æœ‰åŒæ ·çš„compactï¼Œç”šè‡³å¤§æ–‡ä»¶æ‹†åˆ†ï¼ŒGoogleçš„BigTableè¿˜çœŸæ˜¯å½±å“æ·±è¿œå•Š","like_count":11},{"had_liked":false,"id":130942,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1567581460,"is_pvip":false,"replies":[{"id":"51056","content":"æ¬¢è¿å¤šè´¨ç–‘ï¼Œæˆ‘å†™çš„å†…å®¹å…¶å®ä¹Ÿè¿˜æ˜¯æœ‰ä¸å°‘é”™æ¼çš„ã€‚<br><br>å—¯ï¼Œå…¶å®æˆ‘ç”¨CSVæ¥ä¸¾ä¾‹å­æ˜¯å¸Œæœ›ç®€åŒ–æè¿°é—®é¢˜ã€‚MySQLè¿™æ ·å¾—æ•°æ®åº“ï¼Œåº•å±‚çš„å­˜å‚¨è‡ªç„¶ä¸æ˜¯ä¸€ä¸ªCSVè¿™æ ·çš„æ ¼å¼ã€‚<br><br><br>ä¸è¿‡ä½œä¸ºä¸€é—¨å…¥é—¨çš„è¯¾ç¨‹ï¼Œç›´æ¥å†å»è®²MySQLé‡Œé¢çš„å­˜å‚¨æ ¼å¼ï¼Œæ— è®ºæ˜¯ç¯‡å¹…è¿˜æ˜¯éš¾åº¦å¯èƒ½å¯¹å¤§éƒ¨åˆ†åŒå­¦éƒ½å¤§äº†ä¸€äº›ã€‚<br><br>ä¹Ÿè®¸ç”¨æ›´ç®€å•çš„æ•°æ®åº“ï¼Œæ¯”å¦‚SQLiteçš„åº•å±‚B+æ ‘çš„å­˜å‚¨æ ¼å¼å¯èƒ½æ›´åˆé€‚ä¸€äº›ã€‚<br><br>è¯¾ç¨‹å†…å®¹åˆ°ä»Šå¤©å·²ç»å†™å®Œäº†ï¼Œæ¥ä¸‹æ¥ä¼šæŠŠå†™æ–‡ç« çš„æ—¶é—´å›å¤æ‰å¤§å®¶æ‰€æœ‰çš„é—®é¢˜ï¼Œåšä¸€äº›å†…å®¹çš„è®¢æ­£ï¼Œä»¥åŠæ ¹æ®åé¦ˆå†å‘å‡ ç¯‡FAQå’ŒåŠ é¤ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568450318,"ip_address":"","comment_id":130942,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27337385236","product_id":100026001,"comment_content":"      æå‡ºä¸€ç‚¹è´¨ç–‘å¸Œæœ›è€å¸ˆä¸è¦ä»‹æ„å•Šï¼Œæ¯•ç«Ÿå­¦ä¹ çš„è¿‡ç¨‹ä»¥åŠå’Œè€å¸ˆäº¤äº’è¿˜æ˜¯æ¯”è¾ƒæ„‰å¿«ï¼šè€å¸ˆç”¨CSVæ ¼å¼å»è¯´MYSQLå¥½åƒä¸å¤ªåˆé€‚å§ï¼Œmysqlå…¶å®å¾ˆå°‘ä¼šå¯¼å‡ºæˆCSVæ ¼å¼-oracleçš„ç‰¹æ€§ï¼Œè‡³å°‘5.5å’Œ5.6éƒ½ä¼šå¯¼æˆsqlæ ¼å¼ï¼Œsql serveréƒ½å¾ˆå°‘ä¼šç”¨è¿™ç§æ ¼å¼å»å¯¼æˆCSVæ–‡ä»¶-å¯¼å…¥ä¸å¤ªæ–¹ä¾¿ï¼ŒOracleå€’æ˜¯è¿™ç§å½¢å¼æœ€æ–¹ä¾¿ä¸”é€Ÿåº¦æ–¹é¢æœ€ç¨³å®šã€‚<br>       è€å¸ˆè¯´é©¬ä¸Šå°±è¦å®Œè¯¾äº†ï¼šè¿™é—¨è¯¾è¿˜æœ‰å¤šä¹…å•Šï¼ŸçœŸæ­£æ²‰æµ¸å­¦ä¹ ä¸­å‘ç°è¯¾ç¨‹ç»“æŸçš„éƒ½è¶…å¿«ï¼Œä¸¤é—¨è¯¾ç»“åˆç€å­¦ä¹ -å‘ç°æ—¶å…‰å¦‚æ¢­ï¼Œå‰å¤©åˆ˜è€å¸ˆçš„è¯¾åˆšæ”¶å°¾ï¼Œè€å¸ˆçš„è¯¾å°±è¦ç»“æŸäº†ï¼›çœŸå¿«ã€‚","like_count":7,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466206,"discussion_content":"æ¬¢è¿å¤šè´¨ç–‘ï¼Œæˆ‘å†™çš„å†…å®¹å…¶å®ä¹Ÿè¿˜æ˜¯æœ‰ä¸å°‘é”™æ¼çš„ã€‚\n\nå—¯ï¼Œå…¶å®æˆ‘ç”¨CSVæ¥ä¸¾ä¾‹å­æ˜¯å¸Œæœ›ç®€åŒ–æè¿°é—®é¢˜ã€‚MySQLè¿™æ ·å¾—æ•°æ®åº“ï¼Œåº•å±‚çš„å­˜å‚¨è‡ªç„¶ä¸æ˜¯ä¸€ä¸ªCSVè¿™æ ·çš„æ ¼å¼ã€‚\n\n\nä¸è¿‡ä½œä¸ºä¸€é—¨å…¥é—¨çš„è¯¾ç¨‹ï¼Œç›´æ¥å†å»è®²MySQLé‡Œé¢çš„å­˜å‚¨æ ¼å¼ï¼Œæ— è®ºæ˜¯ç¯‡å¹…è¿˜æ˜¯éš¾åº¦å¯èƒ½å¯¹å¤§éƒ¨åˆ†åŒå­¦éƒ½å¤§äº†ä¸€äº›ã€‚\n\nä¹Ÿè®¸ç”¨æ›´ç®€å•çš„æ•°æ®åº“ï¼Œæ¯”å¦‚SQLiteçš„åº•å±‚B+æ ‘çš„å­˜å‚¨æ ¼å¼å¯èƒ½æ›´åˆé€‚ä¸€äº›ã€‚\n\nè¯¾ç¨‹å†…å®¹åˆ°ä»Šå¤©å·²ç»å†™å®Œäº†ï¼Œæ¥ä¸‹æ¥ä¼šæŠŠå†™æ–‡ç« çš„æ—¶é—´å›å¤æ‰å¤§å®¶æ‰€æœ‰çš„é—®é¢˜ï¼Œåšä¸€äº›å†…å®¹çš„è®¢æ­£ï¼Œä»¥åŠæ ¹æ®åé¦ˆå†å‘å‡ ç¯‡FAQå’ŒåŠ é¤ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568450318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1032106,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bf/aa/abb7bfe3.jpg","nickname":"å…è´¹çš„äºº","note":"","ucode":"2B12D8ED63C564","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7726,"discussion_content":"è¯´csvæ˜¯ä¸ºäº†è¯´æ˜å…³ç³»å‹æ•°æ®åº“çš„ç‰¹ç‚¹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567653404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130786,"user_name":"å®‰æ’","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1567552094,"is_pvip":false,"replies":[{"id":"51135","content":"å¯ä»¥è¿™æ ·åšä¹Ÿå¯ä»¥ä¸è¿™æ ·åšã€‚ä¸€èˆ¬æ¥è¯´å¤§éƒ¨åˆ†éƒ½ä¸ä¼šç›´æ¥å­˜æ”¾ç‰©ç†åœ°å€ã€‚ä»ç„¶æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿæ¥ç®¡ç†çš„ã€‚<br><br>B+æ ‘åºåˆ—åŒ–åœ°å­˜æ”¾åœ¨æ–‡ä»¶é‡Œé¢ï¼Œååºåˆ—åŒ–åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯B+æ ‘ç”Ÿæˆçš„è¿‡ç¨‹å•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568539265,"ip_address":"","comment_id":130786,"utype":1}],"discussion_count":6,"race_medal":0,"score":"27337355870","product_id":100026001,"comment_content":"b+ æ ‘ç´¢å¼•ä¸­ä¼šå­˜å‚¨æ¯è¡Œæ•°æ®åœ¨ç¡¬ç›˜ä¸­çš„ç‰©ç†åœ°å€å—ï¼Ÿè¿™ä¸ªç‰©ç†åœ°å€æ˜¯ä¸æ˜¯ç”±å¥½å‡ éƒ¨åˆ†ç»„æˆï¼Œæ¯”å¦‚æŸ±é¢ï¼Œç£é“ï¼Œæ‰‡åŒºçš„ç»„åˆã€‚<br>é‚£B+ æ ‘ç´¢å¼•æœ¬èº«åˆæ˜¯æ€ä¹ˆå­˜æ”¾çš„å‘¢ï¼Ÿb+æ ‘è¦å­˜åˆ°ç¡¬ç›˜ä¸Šçš„è¯éœ€è¦åšç‰¹æ®Šçš„åºåˆ—åŒ–å—ï¼Ÿæ€ä¹ˆæ‰èƒ½ä¿è¯ä»ç¡¬ç›˜è¯»å…¥ç´¢å¼•æ•°æ®åå¿«é€Ÿçš„åœ¨å†…å­˜ç”Ÿæˆä¸€æ£µB+æ ‘å‘¢ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466125,"discussion_content":"å¯ä»¥è¿™æ ·åšä¹Ÿå¯ä»¥ä¸è¿™æ ·åšã€‚ä¸€èˆ¬æ¥è¯´å¤§éƒ¨åˆ†éƒ½ä¸ä¼šç›´æ¥å­˜æ”¾ç‰©ç†åœ°å€ã€‚ä»ç„¶æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿæ¥ç®¡ç†çš„ã€‚\n\nB+æ ‘åºåˆ—åŒ–åœ°å­˜æ”¾åœ¨æ–‡ä»¶é‡Œé¢ï¼Œååºåˆ—åŒ–åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯B+æ ‘ç”Ÿæˆçš„è¿‡ç¨‹å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568539265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1441830,"avatar":"https://static001.geekbang.org/account/avatar/00/16/00/26/a80010f0.jpg","nickname":"JL","note":"","ucode":"07BD8069AE2CBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257195,"discussion_content":"&#34;ä¸»é”®ç´¢å¼•å¯¹åº”çš„é‚£é¢—\næ£µb+æ ‘ç›´æ¥å­˜å‚¨äº†æ•´è¡Œæ•°æ®(ä¸æ˜¯æ•°æ®çš„åœ°å€å‡å°‘ä¸€æ¬¡å¯»å€)ã€‚æ™®é€šç´¢å¼•å­˜çš„æ˜¯ä¸»é”®(é€šè¿‡æ™®é€šç´¢å¼•æŸ¥è¯¢éœ€è¦å¤šéå†ä¸€æ£µä¸»é”®ç´¢å¼•)ã€‚&#34;\nåº”è¯¥å°±æ˜¯clustered index å’Œ non-clustered index","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1588526625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1900944,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDdkdC6WfWDzEVBDuFGic2fohmqyY5Iowias8Hrg90mLDksQxuVYoOP2ribrdu4TQhfb2WPxBymjJHw/132","nickname":"201201091","note":"","ucode":"611DE64AE00F8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349284,"discussion_content":"btreeé‡Œæ”¾çš„æ˜¯<key, (blocknum,offset)>è¿™æ ·çš„æ•°æ®ï¼Œæ˜¯é€»è¾‘åœ°å€ï¼Œå¯ä»¥æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šçš„ã€‚ä¸ç”¨é‡å»ºï¼Œç›´æ¥ä»ç£ç›˜è¯»å–ä¸Šæ¥å°±è¡Œäº†ï¼Œæ¥ä¸‹æ¥æ˜¯ç”¨çš„æ–‡ä»¶ç³»ç»Ÿçš„æ¥å£æ¥è®¿é—®ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613038261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1276613,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/gmP4Yh00MZPwNvr4UQdLeXaX3TVyZEEp195S3vD3Sfl1xz5jBr1474Mt6w5OPr0KsrnQObfLRy5PkKNFjSBiasA/132","nickname":"å¤§å¤´çˆ¸çˆ¸","note":"","ucode":"131E25DB04D222","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217168,"discussion_content":"è®¡ç®—æœºä¸å¯èƒ½çŸ¥é“å…¶ç¡¬ç›˜çš„ç‰©ç†åœ°å€(æŸ±é¢ï¼Œç£é“ï¼Œæ‰‡åŒºç­‰)ï¼Œåªå¯èƒ½çŸ¥é“é€»è¾‘åœ°å€ã€‚ç¡¬ç›˜ä¼šæŠŠé€»è¾‘åœ°å€è½¬æ¢æˆç‰©ç†åœ°å€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585523555,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1210699,"avatar":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","nickname":"-W.LI-","note":"","ucode":"3556786538664F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7542,"discussion_content":"ä¿è¯ç¡¬ç›˜è¯»å…¥ç´¢å¼•æ•°æ®åå¿«é€Ÿç”Ÿæˆä¸€æ£µB+æ ‘ï¼Œæœ‰å¯¹åº”çš„B+æ ‘ç”Ÿæˆï¼Œæ ‘åˆ†è£‚ï¼Œæ ‘åˆå¹¶ç®—æ³•ã€‚å°±å’Œå †å¯ä»¥ç”¨æ•°ç»„è¡¨ç¤ºä¸€æ ·ã€‚æˆ‘çŒœæœ‰ç‰¹å®šçš„ä¼˜åŒ–åçš„æ•°æ®ç»“æ„ã€‚ä½ çŸ¥é“è¦æ˜¯æ‰¾åˆ°ç­”æ¡ˆäº†å›å¤æˆ‘ä¸‹è°¢è°¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567561244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1210699,"avatar":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","nickname":"-W.LI-","note":"","ucode":"3556786538664F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7540,"discussion_content":"b+æ ‘ç´¢å¼•å­˜å‚¨æ•°æ®çš„ç»“æ„å’Œå­˜å‚¨å¼•æ“å’Œï¼Œæ˜¯å¦ä¸»é”®ç´¢å¼•æœ‰å…³ã€‚innoDBä¸‹ï¼Œä¸»é”®ç´¢å¼•å¯¹åº”çš„é‚£é¢—\næ£µb+æ ‘ç›´æ¥å­˜å‚¨äº†æ•´è¡Œæ•°æ®(ä¸æ˜¯æ•°æ®çš„åœ°å€å‡å°‘ä¸€æ¬¡å¯»å€)ã€‚æ™®é€šç´¢å¼•å­˜çš„æ˜¯ä¸»é”®(é€šè¿‡æ™®é€šç´¢å¼•æŸ¥è¯¢éœ€è¦å¤šéå†ä¸€æ£µä¸»é”®ç´¢å¼•)ã€‚ç¡¬ç›˜åœ¨ç‰©ç†ä¸Šå®ç°ä¸Šå°±æ˜¯æŸ±é¢ï¼Œç£é“ï¼Œæ‰‡åŒºã€‚æ“ä½œç³»ç»Ÿæ‰ä½¿ç”¨æ—¶ä¹Ÿè®¸æ˜¯é‡‡ç”¨é€»è¾‘æ¦‚å¿µçš„ï¼Œå…·ä½“ä¸çŸ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567560919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131844,"user_name":"æ˜“å„¿æ˜“","can_delete":false,"product_type":"c1","uid":1242864,"ip_address":"","ucode":"B15D1031CA841E","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqLcWH3mSPmhjrs1aGL4b3TqI7xDqWWibM4nYFrRlp0z7FNSWaJz0mqovrgIA7ibmrPt8zRScSfRaqQ/132","comment_is_top":false,"comment_ctime":1567934020,"is_pvip":false,"replies":[{"id":"51049","content":"ğŸ‘åŠ æ²¹","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568449508,"ip_address":"","comment_id":131844,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14452835908","product_id":100026001,"comment_content":"é€è¿‡ç°è±¡çœ‹æœ¬è´¨ï¼Œè·Ÿç€è€å¸ˆçš„è®²è§£ä¸€å±‚å±‚å‰¥ç¦»åŸç†ï¼ŒçŸ¥å…¶ç„¶ï¼Œå¹¶çŸ¥æ‰€ä»¥ç„¶~å¸Œæœ›ä»¥åè‡ªå·±ä¹Ÿèƒ½æ·±åº¦åˆ†ææŠ€æœ¯åŸç†è¿›è¡ŒæŠ€æœ¯é€‰å‹ï¼Œè€Œä¸æ˜¯ç›²ä»å¤§æµä»¥åŠè¯•è¯•çœ‹ä¸è¡Œå°±æ¢â€¦â€¦","like_count":4,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466641,"discussion_content":"ğŸ‘åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568449508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169220,"user_name":"å±±é—´ç«¹","can_delete":false,"product_type":"c1","uid":1696212,"ip_address":"","ucode":"FA7F16EF01D659","user_header":"https://static001.geekbang.org/account/avatar/00/19/e1/d4/1b5ac51e.jpg","comment_is_top":false,"comment_ctime":1578296014,"is_pvip":false,"replies":[{"id":"68091","content":"å±±é—´ç«¹åŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼ŒCassandraæœ€æ–°ç‰ˆæœ¬çš„ä»£ç æˆ‘æ²¡æœ‰é‚£ä¹ˆç†Ÿæ‚‰ã€‚ä¸è¿‡æ—©æœŸç‰ˆæœ¬çš„Cassandraç”¨è¿‡å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœæˆ‘æ²¡æœ‰è®°é”™çš„è¯ï¼ŒåŸºæœ¬çš„é€»è¾‘æ˜¯è¿™æ ·çš„ã€‚<br><br>1. é€šè¿‡Write Ahead Logçš„æ–¹å¼å…ˆæŠŠæ“ä½œå†™å…¥åˆ°æ—¥å¿—<br>2. å†å†™å…¥æ•°æ®åˆ°å†…å­˜é‡Œé¢<br>3. å†…å­˜å®šæœŸä¼šDumpåˆ°ç£ç›˜ä¸Š<br>4. åå°æœ‰è¿›ç¨‹åšCompactæ¥å‡å°‘Dumpçš„æ•°æ®å’Œæ—¥å¿—<br><br>åœ¨åšCompactionçš„è¿‡ç¨‹ä¸­ï¼Œé¡ºåºå†™çš„æ€§èƒ½å’Œåœ¨çº¿è®¿é—®çš„æ€§èƒ½éƒ½ä¼šå—ä¸€å®šå½±å“ã€‚ä¸è¿‡ä¸»è¦æ˜¯ç£ç›˜IOï¼Œè€Œä¸æ˜¯ç¢ç‰‡é—®é¢˜ã€‚å¯ä»¥è®¤ä¸ºCompactionå…¶å®å°±æ˜¯ä¸åœåšç¢ç‰‡æ•´ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1580632873,"ip_address":"","comment_id":169220,"utype":1}],"discussion_count":4,"race_medal":0,"score":"10168230606","product_id":100026001,"comment_content":"æˆ‘æƒ³é—®ä¸€ä¸‹ï¼ŒCassandraåœ¨hddä¸Šåˆ é™¤é‡å†™æ˜¯ä¸ªæ€ä¹ˆæ ·çš„æœºåˆ¶å‘¢ï¼Ÿä¼šä¸ä¼šå‡ºç°ç¢ç‰‡ï¼Œç„¶åç›´æ¥å½±å“åˆ°é¡ºåºå¤§å—å†™ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480464,"discussion_content":"å±±é—´ç«¹åŒå­¦ï¼Œ\n\nä½ å¥½ï¼ŒCassandraæœ€æ–°ç‰ˆæœ¬çš„ä»£ç æˆ‘æ²¡æœ‰é‚£ä¹ˆç†Ÿæ‚‰ã€‚ä¸è¿‡æ—©æœŸç‰ˆæœ¬çš„Cassandraç”¨è¿‡å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœæˆ‘æ²¡æœ‰è®°é”™çš„è¯ï¼ŒåŸºæœ¬çš„é€»è¾‘æ˜¯è¿™æ ·çš„ã€‚\n\n1. é€šè¿‡Write Ahead Logçš„æ–¹å¼å…ˆæŠŠæ“ä½œå†™å…¥åˆ°æ—¥å¿—\n2. å†å†™å…¥æ•°æ®åˆ°å†…å­˜é‡Œé¢\n3. å†…å­˜å®šæœŸä¼šDumpåˆ°ç£ç›˜ä¸Š\n4. åå°æœ‰è¿›ç¨‹åšCompactæ¥å‡å°‘Dumpçš„æ•°æ®å’Œæ—¥å¿—\n\nåœ¨åšCompactionçš„è¿‡ç¨‹ä¸­ï¼Œé¡ºåºå†™çš„æ€§èƒ½å’Œåœ¨çº¿è®¿é—®çš„æ€§èƒ½éƒ½ä¼šå—ä¸€å®šå½±å“ã€‚ä¸è¿‡ä¸»è¦æ˜¯ç£ç›˜IOï¼Œè€Œä¸æ˜¯ç¢ç‰‡é—®é¢˜ã€‚å¯ä»¥è®¤ä¸ºCompactionå…¶å®å°±æ˜¯ä¸åœåšç¢ç‰‡æ•´ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580632873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1252585,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1c/e9/48cc8f57.jpg","nickname":"å°æ¢…å­","note":"","ucode":"B9797DE06232D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576079,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ï¼Œ\n1. Casanndraæœ¬èº«æœ‰ç®—æ³•ï¼Œå»æŠŠé‡å¤çš„æ•°æ®å»é‡ã€‚\n2. Cansandraæœ¬èº«ä¸‹hdd dumpæ•°æ®æ—¶ï¼Œæ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿã€‚æ–‡ä»¶ç³»ç»Ÿåœ¨ç®¡ç†è‡ªå·±çš„ç©ºé—´ï¼ˆè¿™é‡Œæ˜¯é€»è¾‘ç©ºé—´ï¼‰ä¼šè‡ªå·±ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„ç¢ç‰‡ã€‚è®°å¾—windowsçš„æ–‡ä»¶ç³»ç»Ÿï¼Œç»å¸¸è‡ªå·±è¦åšç¢ç‰‡æ¸…é›¶ã€‚\n3.æ–‡ä»¶ç³»ç»Ÿè´Ÿè´£æŠŠCansandraè¦dumpçš„æ•°æ®å†™åˆ°HDDä¸Šã€‚HDDæœ¬èº«æœ‰ä¸ªè‡ªå·±ç®¡ç†ç¨‹åºï¼ˆä¸€èˆ¬è¿™æ˜¯HDDçš„firmwareï¼‰ã€‚HDDè‡ªå·±ä¼šç®¡ç†è„†ç‰‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655272580,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243901,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fa/fd/ec24cba7.jpg","nickname":"fcbçš„é±¼","note":"","ucode":"88667EBF09CEC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164417,"discussion_content":"åˆ é™¤é‡å†™å®é™…ä¸Šæ²¡æœ‰ä»ç£ç›˜ä¸Šåˆ é™¤ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰å†…å­˜ç¢ç‰‡ä¸€è¯´ã€‚å› ä¸ºå¯¹rowkkeyåšäº†hashï¼Œåªéœ€è¦è®©åŸrowkeyæŒ‡å‘æ–°çš„å­˜å‚¨åœ°å€å°±å¯ä»¥äº†ï¼ŒåŸæ•°æ®ç›¸å½“äºæ²¡æœ‰å¼•ç”¨å°±ç”¨ä¸åˆ°äº†ï¼Œä¸ç”¨å»åšåˆ é™¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581174018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1122034,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1e/f2/453d5f88.jpg","nickname":"seker","note":"","ucode":"9B705F91355873","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1243901,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fa/fd/ec24cba7.jpg","nickname":"fcbçš„é±¼","note":"","ucode":"88667EBF09CEC0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298239,"discussion_content":"å¯¹äºHDDæ¥è¯´ï¼Œé‚£å°±æ˜¯åŸæ•°æ®æ²¡æœ‰åšç‰©ç†åˆ é™¤ï¼Œè€Œæ˜¯é€šè¿‡è¦†å†™æ¥â€œå¤„ç†æ‰â€è¿™äº›åŸæ•°æ®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597225430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":164417,"ip_address":""},"score":298239,"extra":""}]}]},{"had_liked":false,"id":249371,"user_name":"Ki","can_delete":false,"product_type":"c1","uid":1470477,"ip_address":"","ucode":"5B675CC101FFC0","user_header":"https://static001.geekbang.org/account/avatar/00/16/70/0d/f4c7a01f.jpg","comment_is_top":false,"comment_ctime":1600612900,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600612900","product_id":100026001,"comment_content":"è¯·é—®ä¸‹ã€æ€ä¹ˆå¿«é€Ÿæ‰¾åˆ°ä¸€ä¸ªè½¯ä»¶å¯¹åº”çš„è®ºæ–‡å‘¢ã€æ¯”å¦‚æˆ‘æƒ³æ‰¾kafkaçš„è®ºæ–‡ã€æˆ–è€…æ˜¯æ‰¾flinkçš„è®ºæ–‡ã€è¯¥æ€ä¹ˆæ‰¾å‘¢","like_count":1},{"had_liked":false,"id":222803,"user_name":"ğŸ„½ğŸ„¸ğŸ…‡ğŸ…„ğŸ…‚","can_delete":false,"product_type":"c1","uid":1000060,"ip_address":"","ucode":"853763C229A5AA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","comment_is_top":false,"comment_ctime":1590915267,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590915267","product_id":100026001,"comment_content":"1ã€BloomFilterè¿‡æ»¤æ‰ä¸å­˜åœ¨çš„æ•°æ®çš„è¯»å–åï¼Œåœ¨è¯»å­˜åœ¨çš„æ•°æ®çš„æ—¶å€™ï¼Œè¿˜æ˜¯è¦å»ç¡¬ç›˜è¯»ï¼Œâ€œæŒ‰ç…§ä»æ–°åˆ°æ—§çš„è¯»å–æ–¹å¼â€ï¼Œåº”è¯¥å¦‚ä½•ç†è§£â€œä»æ–°åˆ°æ—§è¯»å–â€å‘¢ï¼Ÿâ€œä»æ–°åˆ°æ—§è¯»â€ï¼Œæ˜¯è¯»ä¸€æ¬¡è¿˜æ˜¯è¯»å¤šæ¬¡ï¼Ÿ<br>2ã€åœ¨è¿›è¡Œåˆå¹¶compactionçš„æ—¶å€™ï¼Œæ€ä¹ˆçŸ¥é“åˆå¹¶åçš„æ•°æ®åœ°å€ï¼Ÿæ˜¯ç”¨åƒå‰é¢è®²å†…å­˜çš„æ—¶å€™ï¼Œè®²åˆ°çš„é¡µæ˜ å°„å—ï¼Ÿè¿˜æ˜¯è¯´ï¼Œåˆå¹¶compactionæ‰§è¡Œçš„å°±æ˜¯ç±»ä¼¼MySQLçš„updateæ“ä½œï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œè¿˜æ˜¯ä¼šæœ‰insertåï¼Œæ•°æ®åœ°å€å˜åŠ¨çš„é—®é¢˜åœ¨ï¼›","like_count":0},{"had_liked":false,"id":218710,"user_name":"brian","can_delete":false,"product_type":"c1","uid":1117039,"ip_address":"","ucode":"438D60BB6413C3","user_header":"https://static001.geekbang.org/account/avatar/00/11/0b/6f/68cd0614.jpg","comment_is_top":false,"comment_ctime":1589857825,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589857825","product_id":100026001,"comment_content":"è€å¸ˆï¼Œä¸Šä¸€è®²è®¾è®¡DMP kvæ•°æ®åº“æ˜¯é€‰æ‹© AeroSpike <br>è¿™ä¸€è®²ç”¨Cassandraï¼Œä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1122034,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1e/f2/453d5f88.jpg","nickname":"seker","note":"","ucode":"9B705F91355873","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298245,"discussion_content":"ç»“åˆç¬¬47è®²å’Œ53è®²çš„å†…å®¹æ¥çœ‹ï¼ŒCassandraæ˜¯æ”¯æŒHDDå’ŒSSDçš„ï¼Œè€ŒAerospikeä»…æ”¯æŒSSD","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1597226833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217310,"user_name":"hshayq","can_delete":false,"product_type":"c1","uid":1237880,"ip_address":"","ucode":"F5435E14BCCD25","user_header":"https://static001.geekbang.org/account/avatar/00/12/e3/78/3321053c.jpg","comment_is_top":false,"comment_ctime":1589463361,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589463361","product_id":100026001,"comment_content":"ä»Šå¤©åˆšçœ‹ ddia ä¸­è¯´æ˜ Cassandra çš„å­˜å‚¨åŸç†ï¼Œæ²¡æƒ³åˆ°è¿™é‡Œä¹Ÿçœ‹åˆ°äº†(oï¾Ÿvï¾Ÿ)ãƒ","like_count":0},{"had_liked":false,"id":207104,"user_name":"ç‹å¤ç¥¥","can_delete":false,"product_type":"c1","uid":1003327,"ip_address":"","ucode":"FB988B9F381A33","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4f/3f/6f62f982.jpg","comment_is_top":false,"comment_ctime":1587007048,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1587007048","product_id":100026001,"comment_content":"&gt; SSD ç¡¬ç›˜æœ¬èº«çš„æ“¦é™¤åæ‰èƒ½å†™å…¥çš„æœºåˆ¶ï¼Œæ­£å¥½éå¸¸é€‚åˆ Cassandra çš„æ•°æ®è¯»å†™æ¨¡å¼<br><br>å„ä½ï¼Œæœ‰è°å¸®å¿™è§£é‡Šä¸‹ï¼Œæˆ‘æ€ä¹ˆgetä¸åˆ°è¿™ä¸€ç‚¹å‘€?","like_count":0,"discussions":[{"author":{"id":1441830,"avatar":"https://static001.geekbang.org/account/avatar/00/16/00/26/a80010f0.jpg","nickname":"JL","note":"","ucode":"07BD8069AE2CBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257196,"discussion_content":"å› ä¸ºå†™æ˜¯è¿½åŠ å†™ï¼Œæ‰€ä»¥å°±æ˜¯ä¸æ“¦é™¤ï¼Œæ–°çš„å¾€åé¢å†™å°±è¡Œäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588526772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199954,"user_name":"å¤§å¤´çˆ¸çˆ¸","can_delete":false,"product_type":"c1","uid":1276613,"ip_address":"","ucode":"131E25DB04D222","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/gmP4Yh00MZPwNvr4UQdLeXaX3TVyZEEp195S3vD3Sfl1xz5jBr1474Mt6w5OPr0KsrnQObfLRy5PkKNFjSBiasA/132","comment_is_top":false,"comment_ctime":1585519264,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585519264","product_id":100026001,"comment_content":"Cassandraå’ŒBigTableæ˜¯ä»€ä¹ˆåŒºåˆ«å•Šï¼Ÿçœ‹äº†ä¸€ä¸‹åŸºæœ¬åŸç†å¥½åƒæ˜¯ä¸€æ ·çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1122034,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1e/f2/453d5f88.jpg","nickname":"seker","note":"","ucode":"9B705F91355873","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298248,"discussion_content":"Cassandraä¸ä»…å¸æ”¶äº†Dynamoè®ºæ–‡ä¸­ï¼šå¦‚ä½•åšåˆ†å¸ƒå¼ã€å¦‚ä½•åšå‰¯æœ¬å¤åˆ¶ã€æ•…éšœå®¹é”™ç­‰æ–¹é¢æˆåŠŸçš„ç»éªŒã€‚åˆå¸å–äº†Google BigTableä¸­LSMå•æœºå¼•æ“å±‚é¢ç²¾åã€‚å¸ˆå‡ºåé—¨ ^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597227020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191527,"user_name":"Anthony","can_delete":false,"product_type":"c1","uid":1309908,"ip_address":"","ucode":"9E0C98A9123365","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/d4/743d3f02.jpg","comment_is_top":false,"comment_ctime":1584779254,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584779254","product_id":100026001,"comment_content":"Cassandraçš„åˆ—æ—è®©æˆ‘æƒ³åˆ°äº†esçš„å­˜å‚¨æ–¹å¼ï¼Œå»ºä¸€ä¸ªä¸ªindexæ¥åŒºåˆ†ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæ–¹ä¾¿æŸ¥è¯¢å’Œå­˜å‚¨","like_count":0},{"had_liked":false,"id":176818,"user_name":"fcbçš„é±¼","can_delete":false,"product_type":"c1","uid":1243901,"ip_address":"","ucode":"88667EBF09CEC0","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/fd/ec24cba7.jpg","comment_is_top":false,"comment_ctime":1581173756,"is_pvip":false,"replies":[{"id":"68630","content":"fcbçš„é±¼åŒå­¦ï¼Œ<br><br>ä½ å¥½<br><br>1. å¯¹åº”æ¯”ä¾‹è¦çœ‹å®é™…çš„æ•°æ®è®¿é—®åˆ†å¸ƒï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªå›ºå®šç­”æ¡ˆï¼Œå…¶å®å¯ä»¥å›å¤´é‡æ–°çœ‹çœ‹è®²å­˜å‚¨åˆ†å±‚é‡Œé¢çš„æ¡ˆä¾‹ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„å®é™…åº”ç”¨åœºæ™¯æ¥ä¼°ç®—ã€‚<br>å†…å­˜å ç”¨ä¹Ÿæ˜¯è¦çœ‹ä½ çš„ç¡¬ä»¶é…ç½®ï¼Œä½ åªé…1Gå†…å­˜å½“ç„¶ç”¨ä¸äº†2Gå¯¹ä¸å¯¹<br><br>2. æˆ‘ä¸æ˜¯MySQLçš„ä¸“å®¶ï¼Œæ²¡æœ‰ä»”ç»†ç ”è¯»è¿‡MySQLçš„ä»£ç ã€‚ä¸è¿‡MySQLè‚¯å®šä¹Ÿä¼šç”¨ç±»ä¼¼BloomFilteræœºåˆ¶ï¼Œä»¥åŠå¿…ç„¶ä¼šæœ‰ç¼“å­˜ï¼Œæ¥å‡å°‘å¯¹äºç£ç›˜çš„è®¿é—®ã€‚ä»¥æå‡æ•´ä¸ªæ•°æ®åº“åœ¨å®é™…åº”ç”¨ä¸­çš„è¡¨ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1581218674,"ip_address":"","comment_id":176818,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581173756","product_id":100026001,"comment_content":"ä½ å¥½ï¼Œé—®ä¸‹<br>1.Cassandr æ•°æ®åº“åœ¨æ•°æ®è¯»å–å±‚é¢ï¼Œé€šè¿‡å†…å­˜ç¼“å­˜+ BloomFilte+ç¡¬ç›˜çš„æœºåˆ¶æ¥ä¿è¯éšæœºè¯»çš„é—®é¢˜ã€‚æƒ³é—®ä¸‹è¿™ä¸ªéšæœºè¯»çš„è¿‡ç¨‹ä¸­ï¼Œè¯·æ±‚åªæŸ¥è¯¢å†…å­˜çš„æ•°æ®å å¤šå¤§æ¯”ä¾‹å‘¢ï¼Ÿåœ¨Cassandræ•°æ®åº“çš„æ¶æ„é‡Œè¾¹ï¼Œè¿™ä¸ªå†…å­˜å ç”¨ç‡æ˜¯å¤šå°‘(æ¯”å¦‚æ˜¯ä¸æ˜¯ç¡¬ç›˜æ˜¯10G,å†…å­˜æ˜¯1G).è¿™ç§æ¶æ„ã€‚<br>2.å¦‚æœmysqlåœ¨ä¸è€ƒè™‘éšæœºå†™çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨è¿™ç§å†…å­˜+ç¡¬ç›˜çš„æ–¹æ¡ˆæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483222,"discussion_content":"fcbçš„é±¼åŒå­¦ï¼Œ\n\nä½ å¥½\n\n1. å¯¹åº”æ¯”ä¾‹è¦çœ‹å®é™…çš„æ•°æ®è®¿é—®åˆ†å¸ƒï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªå›ºå®šç­”æ¡ˆï¼Œå…¶å®å¯ä»¥å›å¤´é‡æ–°çœ‹çœ‹è®²å­˜å‚¨åˆ†å±‚é‡Œé¢çš„æ¡ˆä¾‹ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„å®é™…åº”ç”¨åœºæ™¯æ¥ä¼°ç®—ã€‚\nå†…å­˜å ç”¨ä¹Ÿæ˜¯è¦çœ‹ä½ çš„ç¡¬ä»¶é…ç½®ï¼Œä½ åªé…1Gå†…å­˜å½“ç„¶ç”¨ä¸äº†2Gå¯¹ä¸å¯¹\n\n2. æˆ‘ä¸æ˜¯MySQLçš„ä¸“å®¶ï¼Œæ²¡æœ‰ä»”ç»†ç ”è¯»è¿‡MySQLçš„ä»£ç ã€‚ä¸è¿‡MySQLè‚¯å®šä¹Ÿä¼šç”¨ç±»ä¼¼BloomFilteræœºåˆ¶ï¼Œä»¥åŠå¿…ç„¶ä¼šæœ‰ç¼“å­˜ï¼Œæ¥å‡å°‘å¯¹äºç£ç›˜çš„è®¿é—®ã€‚ä»¥æå‡æ•´ä¸ªæ•°æ®åº“åœ¨å®é™…åº”ç”¨ä¸­çš„è¡¨ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581218674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144414,"user_name":"éšå¿ƒè€Œè‡³","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1571916523,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571916523","product_id":100026001,"comment_content":"åªæœ‰æ˜ç™½1+1ï¼Œæ‰å¯ä»¥æ¨åˆ°å…¬å¼ï¼Œè¯»è¿™ç¯‡æ–‡ç« æœ‰ç§é…£ç•…æ·‹æ¼“çš„æ„Ÿè§‰ï¼Œèµèµèµ","like_count":0},{"had_liked":false,"id":142491,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1571379424,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571379424","product_id":100026001,"comment_content":"cassendra (é€šè¿‡ä¼˜åŒ–éšæœºè¯»å–) å’Œssd  ç¡¬ç›˜å¯ä»¥æ›´å¥½çš„æ”¯æŒå¹¶å‘ã€‚","like_count":0},{"had_liked":false,"id":133418,"user_name":"æ´»çš„æ½‡æ´’","can_delete":false,"product_type":"c1","uid":1238830,"ip_address":"","ucode":"666C30CA894754","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/2e/1522a7d6.jpg","comment_is_top":false,"comment_ctime":1568557316,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568557316","product_id":100026001,"comment_content":"åšæŒåˆ°æœ€åã€ä½ ä¼šæ”¶è·ä¸ä¸€æ ·çš„è‡ªå·±ã€åŠ æ²¹<br><br>day53 ç¬”è®°ï¼šhttps:&#47;&#47;www.cnblogs.com&#47;luoahong&#47;p&#47;11514616.html","like_count":1},{"had_liked":false,"id":131114,"user_name":"æš´é£é›ª","can_delete":false,"product_type":"c1","uid":1283139,"ip_address":"","ucode":"BF1523D69866FF","user_header":"https://static001.geekbang.org/account/avatar/00/13/94/43/46a7d0a8.jpg","comment_is_top":false,"comment_ctime":1567645826,"is_pvip":false,"replies":[{"id":"51128","content":"è°¢è°¢","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568538153,"ip_address":"","comment_id":131114,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567645826","product_id":100026001,"comment_content":"ä¸­é€”ä¸€åº¦è½åäº†20å¤šèŠ‚è¯¾ï¼Œç„¶åæ¯å¤©éƒ½çœ‹ä¸€ä¸¤ç¯‡å†åº¦è¿½ä¸Šäº†è¿›åº¦ï¼Œè¯¾ç¨‹è¶Šåé¢è¶Šç²¾å½©","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466291,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568538153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131101,"user_name":"å´å®‡æ™¨","can_delete":false,"product_type":"c1","uid":1199968,"ip_address":"","ucode":"F8F45B7067DF6D","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/60/049a20e9.jpg","comment_is_top":false,"comment_ctime":1567644166,"is_pvip":false,"replies":[{"id":"51048","content":"èƒ½æ›´å…·ä½“ä¸€ç‚¹ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1568449498,"ip_address":"","comment_id":131101,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567644166","product_id":100026001,"comment_content":"åˆ—å¼å­˜å‚¨æ˜¯æŒ‰åŒä¸€åˆ—æ•°æ®cun","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466285,"discussion_content":"èƒ½æ›´å…·ä½“ä¸€ç‚¹ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568449498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}