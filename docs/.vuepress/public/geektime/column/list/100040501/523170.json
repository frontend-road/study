{"id":523170,"title":"38 | æŠ˜å è¡¨è¾¾å¼ï¼šé«˜æ•ˆçš„ç¼–è¯‘æœŸå±•å¼€","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>å½“æˆ‘åœ¨å†™<a href=\"https://time.geekbang.org/column/article/185899\">ç¬¬ 18 è®²</a>â€œåº”ç”¨å¯å˜æ¨¡æ¿å’Œ tuple çš„ç¼–è¯‘æœŸæŠ€å·§â€æ—¶ï¼Œæœ‰æœ‹å‹å°±å»ºè®®å¯ä»¥è®¨è®ºä¸€ä¸‹æŠ˜å è¡¨è¾¾å¼ <span class=\"orange\">[1]</span>ã€‚ä¸è¿‡ï¼Œåœ¨é‚£æ—¶å€™æˆ‘å¯¹æŠ˜å è¡¨è¾¾å¼å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…åº”ç”¨ç»éªŒï¼Œè§‰å¾—å®ƒç”¨å¤„ä¸å¤§ï¼Œäºæ˜¯å°±ç•¥è¿‡äº†ã€‚å¹¸å¥½æˆ‘åªæ˜¯æ²¡æœ‰å†™ï¼Œè€Œæ²¡æœ‰ä¹±åŠ è¯„è®ºï¼Œå¦åˆ™å°±å›¾æ¬§å›¾æ£®ç ´ï¼ˆtoo old, too simpleï¼‰äº†ã€‚å¾ˆå¤šåŠŸèƒ½ï¼Œåªæœ‰åœ¨ä½ çœŸæ­£éœ€è¦åˆ°å®ƒã€åˆæŒæ¡å¦‚ä½•ä½¿ç”¨çš„æ—¶å€™ï¼Œä½ æ‰ä¼šè§‰å¾—çœŸæ­£æœ‰ç”¨ã€‚å¾ˆå¤š C++ é‡Œçœ‹ä¼¼ç”¨å¤„ä¸å¤§çš„ç‰¹æ€§ï¼Œéƒ½æ˜¯è¿™ç§æƒ…å†µï¼ˆå½“ç„¶ä¹Ÿä¸æ˜¯æ‰€æœ‰ï¼Œå¦åˆ™å°±ä¸ä¼šæœ‰å¯¹ç‰¹æ€§çš„åºŸå¼ƒå’Œåˆ é™¤äº†ï¼‰ã€‚</p><p>è·Ÿä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡å…·ä½“çš„ä¾‹å­æ¥çœ‹ä¸€ä¸‹æŠ˜å è¡¨è¾¾å¼çš„ä½œç”¨å’Œè¡¨è¾¾èƒ½åŠ›ã€‚</p><h2>åŸºæœ¬ç”¨æ³•</h2><h3>ä¸€å…ƒæŠ˜å </h3><p>åœ¨<a href=\"https://time.geekbang.org/column/article/185899\">ç¬¬ 18 è®²</a>æˆ‘ä¸¾è¿‡è¿™æ ·ä¸€ä¸ªç¼–è¯‘æœŸé€’å½’çš„ä¾‹å­ï¼š</p><pre><code class=\"language-cpp\">template &lt;typename T&gt;\nconstexpr auto sum(T x)\n{\n  return x;\n}\n\ntemplate &lt;typename T1, typename T2,\n          typename... Targ&gt;\nconstexpr auto sum(T1 x, T2 y,\n                   Targ... args)\n{\n  return sum(x + y, args...);\n}\n</code></pre><p>è€Œä½¿ç”¨æŠ˜å è¡¨è¾¾å¼çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»£ç ç®€åŒ–æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><pre><code class=\"language-cpp\">template &lt;typename... Args&gt;\nconstexpr auto sum(Args... args)\n{\n  return (... + args);\n}\n</code></pre><!-- [[[read_end]]] --><p>ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ”¹è¿›æœ‰å¤šå¤§äº†å§ï¼Ÿ</p><p>è™½ç„¶çŒœè¿™ä¸ªä»£ç æ˜¯ä»€ä¹ˆæ„æ€ä¸éš¾ï¼Œä½†è¦ç²¾ç¡®ç†è§£è¿™æ ·çš„ä»£ç çš„è¯­ä¹‰ï¼Œä»¥åŠè‡ªå·±å†™å‡ºæ­£ç¡®çš„æŠ˜å è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦è®²ä¸€ç‚¹ç‚¹è¯­æ³•ã€‚</p><p>é¦–å…ˆï¼ŒæŠ˜å è¡¨è¾¾å¼åº”ç”¨åœ¨å¯å˜æ¨¡æ¿çš„æƒ…å†µä¸‹ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ <code>typename... Args</code> è¿™æ ·çš„æ¨¡æ¿å‚æ•°ï¼ŒåŠ <code>Args... args</code>ã€<code>const Args&amp;... args</code>ã€<code>Args&amp;&amp;... args</code> ä¹‹ç±»çš„å‡½æ•°å‚æ•°åŒ… <span class=\"orange\">[2]</span>ã€‚</p><p>å…¶æ¬¡ï¼Œæˆ‘ä»¬åœ¨æŠ˜å è¡¨è¾¾å¼é‡Œä½¿ç”¨å‚æ•°åŒ…æœ‰ä¸€ç§ç‰¹æ®Šçš„å½¢å¼ã€‚æˆ‘ä»¬ä¸€å®šä¼šç”¨åˆ°åœ†æ‹¬å·ï¼ˆæ¼æ‹¬å·æ˜¯åˆå­¦æ—¶çš„å¸¸è§é”™è¯¯ï¼‰ã€å‚æ•°åŒ…åç§°ã€è¿ç®—ç¬¦å’Œ <code>...</code>ã€‚ä¸Šé¢çš„ä»£ç ç”¨çš„æ˜¯â€œä¸€å…ƒå·¦æŠ˜å â€ï¼Œå½¢å¼æ˜¯â€œ<code>(... è¿ç®—ç¬¦ å‚æ•°åŒ…åç§°)</code>â€ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æŠ˜å è¡¨è¾¾å¼æ˜¯å¦‚ä½•å±•å¼€çš„ã€‚å¦‚æœå‚æ•°åŒ…åªæœ‰ä¸€é¡¹ï¼ˆ<code>args0</code>ï¼‰ï¼Œé‚£ç»“æœå°±æ˜¯è¿™ä¸ªå‚æ•°è‡ªèº«ï¼ˆ<code>args0</code>ï¼‰ï¼›å¦‚æœå‚æ•°åŒ…æœ‰ä¸¤é¡¹ï¼ˆ<code>args0, args1</code>ï¼‰ï¼Œé‚£ç»“æœå°±æ˜¯è¿™ä¸¤é¡¹ç”¨è¿ç®—ç¬¦æ‹¼æ¥èµ·æ¥ï¼ˆ<code>args0 + args1</code>ï¼‰ï¼›å¦‚æœå‚æ•°åŒ…æœ‰ä¸‰é¡¹ï¼ˆ<code>args0, args1, args2</code>ï¼‰ï¼Œé‚£ç»“æœå°±æ˜¯è¿™ä¸‰é¡¹ç”¨è¿ç®—ç¬¦æ‹¼æ¥èµ·æ¥ï¼ˆ<code>args0 + args1 + args2</code>ï¼‰ï¼›ä»¥æ­¤ç±»æ¨ã€‚</p><p>å¦‚æœä½ åˆæ­¥ç†è§£äº†ï¼Œé‚£æˆ‘å¾—å£°æ˜ä¸€ä¸‹ï¼Œæˆ‘ä¸Šé¢åšäº†ç®€åŒ–ã€‚å¯¹äºè¶…è¿‡ä¸¤é¡¹çš„æŠ˜å è¡¨è¾¾å¼å±•å¼€ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å…³æ³¨ä¸€ä¸‹è¿ç®—ç¬¦çš„ç»“åˆé—®é¢˜ï¼Œå³æˆ‘ä»¬éœ€è¦çš„æ˜¯ <code>(args0 + args1) + args2</code>ï¼Œè¿˜æ˜¯ <code>args0 + (args1 + args2)</code>ã€‚æ˜¾è€Œæ˜“è§ï¼Œå¯¹äºåŠ æ³•ï¼Œä»¥åŠå…¶ä»–æ»¡è¶³ç»“åˆå¾‹çš„è¿ç®—ç¬¦ï¼Œè¿™ä¸¤è€…çš„åŒºåˆ«å¹¶ä¸é‡è¦ã€‚ä½†æ˜¯ï¼Œå³ä½¿å¯¹äºåŠ æ³•ï¼Œå®é™…ä¸Šè¿™ä¸¤ç§é¡ºåºéƒ½ä¸æ˜¯å®Œå…¨æ²¡æœ‰åŒºåˆ«çš„ï¼ˆå¦‚æµ®ç‚¹æ•°ï¼‰ï¼Œè€Œå¯¹äºå‡æ³•ã€é™¤æ³•ä¹‹ç±»çš„è¿ç®—ï¼Œé‚£å°±æ›´ä¸ç”¨è¯´äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸€å…ƒå·¦æŠ˜å å’Œä¸€å…ƒå³æŠ˜å ä¸¤ç§ä¸åŒçš„æ–¹å¼ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”äº <code>(args0 + args1) + args2</code> å’Œ <code>args0 + (args1 + args2)</code>ã€‚å†™æŠ˜å è¡¨è¾¾å¼æ—¶çš„åŒºåˆ«æ˜¯ï¼Œä¸€å…ƒå·¦æŠ˜å çš„ <code>...</code> åœ¨å·¦è¾¹ï¼Œè€Œä¸€å…ƒå³æŠ˜å çš„ <code>...</code> åœ¨å³è¾¹ï¼š<code>(... + args)</code> å’Œ <code>(args + ...)</code>ã€‚</p><p>ä¸‹é¢ç”¨ç¬¦å·æè¿°ä¸€ä¸‹ã€‚ä»¤ $E$ ä»£è¡¨å‚æ•°åŒ…ï¼Œ$N$ ä»£è¡¨å‚æ•°åŒ…é‡Œçš„å‚æ•°æ•°é‡ï¼Œåˆ™ï¼š</p><ul>\n<li>ä¸€å…ƒå·¦æŠ˜å æ˜¯ $(\\ldots\\ \\mathrm{op}\\ E)$ï¼Œå±•å¼€åæˆä¸º $(((E_1\\ \\mathrm{op}\\ E_2) \\ \\mathrm{op}\\ \\ldots)\\ \\mathrm{op}\\ E_N)$</li>\n<li>ä¸€å…ƒå³æŠ˜å æ˜¯ $(E \\ \\mathrm{op}\\ \\ldots)$ï¼Œå±•å¼€åæˆä¸º$(E_1\\ \\mathrm{op}\\ (\\ldots\\ \\mathrm{op}\\ (E_{N-1}\\ \\mathrm{op}\\ E_N)))$</li>\n</ul><h3>ä¸å’Œæˆ–çš„æŠ˜å </h3><p>åœ¨å¤§éƒ¨åˆ†æŠ˜å è¡¨è¾¾å¼çš„å±•å¼€è¿‡ç¨‹ä¸­ï¼Œå‚æ•°åŒ…ä¸ºç©ºæ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ä¸è¿‡ï¼Œä¸ºäº†æ–¹ä¾¿å®é™…ä½¿ç”¨çš„åœºæ™¯ï¼ŒC++ å¯¹äºä½¿ç”¨ <code>&amp;&amp;</code> å’Œ <code>||</code> çš„æŠ˜å è¡¨è¾¾å¼æœ‰ç‰¹æ®Šå¤„ç†ï¼Œå…è®¸å‚æ•°åŒ…ä¸ºç©ºã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>&amp;&amp;</code> å¾—åˆ° <code>true</code>ï¼Œ<code>||</code> å¾—åˆ° <code>false</code>â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸å½“äºæŠ˜å è¡¨è¾¾å¼é»˜è®¤å¡«å……äº†ä¸€é¡¹ä¸å½±å“æ­£å¸¸è¿ç®—ç»“æœçš„æ•°æ®ï¼š<code>true &amp;&amp; args0 &amp;&amp; ...</code> å’Œ <code>false || args0 || ...</code>ã€‚</p><p>C++ é‡Œçš„â€œä¸â€å’Œâ€œæˆ–â€æœ‰çŸ­è·¯æ±‚å€¼è¡Œä¸º <span class=\"orange\">[3]</span>ã€‚å½“ä½ å†™ä¸‹ <code>a &amp;&amp; b</code> æ—¶ï¼Œå¦‚æœ <code>a</code> ç®—å‡ºçš„ç»“æœæ˜¯ <code>false</code>ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šå¯¹ <code>b</code> è¿›è¡Œæ±‚å€¼ï¼Œå› ä¸ºæ±‚å€¼æ²¡æœ‰æ„ä¹‰ï¼Œä¸ä¼šå½±å“ç»“æœã€‚è¿™æ˜¯ä¸€ä¸ªæ˜ç¡®å®šä¹‰äº†çš„è¡Œä¸ºã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœ <code>a || b</code> é‡Œ <code>a</code> çš„ç»“æœæ˜¯ <code>true</code>ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šå¯¹ <code>b</code> è¿›è¡Œæ±‚å€¼ã€‚</p><p>å¦‚æœæˆ‘ä»¬çœ‹ <code>a &amp;&amp; b &amp;&amp; c</code> è¿™æ ·çš„è¡¨è¾¾å¼çš„è¯ï¼Œæˆ‘ä»¬ä¼šå‘ç°æƒ…å†µä¹Ÿå®Œå…¨ä¸€æ ·ã€‚æŒ‰ç…§è¿ç®—ç¬¦çš„ç»“åˆè§„åˆ™ï¼Œä¸Šé¢çš„è¡¨è¾¾å¼ç­‰åŒäº <code>(a &amp;&amp; b) &amp;&amp; c</code>ï¼›å¦‚æœ <code>a</code> ç»“æœä¸º <code>false</code>ï¼Œæ— éœ€å¯¹ <code>b</code> æ±‚å€¼å°±å¾—åˆ° <code>a &amp;&amp; b</code> ä¸º <code>false</code>ï¼Œæ‰€ä»¥ <code>c</code> ä¹Ÿæ— éœ€æ±‚å€¼å³å¾—åˆ°æœ€ç»ˆç»“æœ <code>false</code>ã€‚å¦‚æœ <code>a</code> ä¸º <code>true</code>ï¼Œç¼–è¯‘å™¨æ‰ä¼šå¯¹ <code>b</code> æ±‚å€¼ï¼Œå¹¶åœ¨ç»“æœä¸º <code>true</code> æ—¶æ‰å¯¹ <code>c</code> æ±‚å€¼â€¦â€¦</p><p>å†è¿›ä¸€æ­¥ï¼Œå¯¹äº <code>a &amp;&amp; (b &amp;&amp; c)</code> è¿›è¡Œåˆ†æï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæ±‚å€¼çš„é¡ºåºå’Œç»“æœä»å°†å®Œå…¨ç›¸åŒï¼š</p><ul>\n<li>è‹¥ <code>a</code> æ±‚å€¼ä¸º <code>false</code>ï¼Œåˆ™ <code>b &amp;&amp; c</code> ä¸æ±‚å€¼ï¼Œç»“æœä¸º <code>false</code></li>\n<li>è‹¥ <code>a</code> æ±‚å€¼ä¸º <code>true</code>ï¼Œç„¶å <code>b</code> æ±‚å€¼ä¸º <code>false</code>ï¼Œåˆ™ <code>c</code> ä¸æ±‚å€¼ï¼Œç»“æœä¸º <code>false</code></li>\n<li>è‹¥ <code>a</code> æ±‚å€¼ä¸º <code>true</code>ï¼Œç„¶å <code>b</code> æ±‚å€¼ä¸º <code>true</code>ï¼Œåˆ™ç»“æœä¸º <code>c</code> æ±‚å€¼çš„ç»“æœ</li>\n</ul><p>è¿™æ ·çš„åˆ†æå¯¹äº <code>||</code> ä¹ŸåŒæ ·é€‚ç”¨ã€‚å› æ­¤ï¼Œä¸€å…ƒå·¦æŠ˜å å’Œå³æŠ˜å çš„ç­‰ä»·æ€§ä¸ä»…å¯¹äºæ™®é€šæ»¡è¶³ç»“åˆå¾‹çš„è¿ç®—ç¬¦æ˜¯æˆç«‹çš„ï¼Œè€Œä¸”å¯¹äºæœ‰çŸ­è·¯è§„åˆ™çš„è¿ç®—ç¬¦ä¹ŸåŒæ ·æ˜¯æˆç«‹çš„ã€‚</p><h3>é€—å·çš„æŠ˜å </h3><p>å¾ˆå¤šäººå¯èƒ½æ²¡æ³¨æ„åˆ°ï¼Œé€—å·â€œ<code>,</code>â€ä¹Ÿæ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ <span class=\"orange\">[4]</span>ï¼Œè¡¨è¾¾å¼ <code>a, b</code> çš„æ„æ€æ˜¯ï¼ˆå½“ç„¶ï¼Œä¸æ˜¯åœ¨èƒ½è¢«å½“ä½œå‡½æ•°å‚æ•°çš„åœ°æ–¹ï¼›å¦‚æœå¯èƒ½è¢«ç¼–è¯‘å™¨è¯¯è§£ï¼Œå¤šåŠ ä¸€é‡æ‹¬å·å°±è¡Œï¼‰ï¼Œå¯¹ <code>a</code> å’Œ <code>b</code> ä¾æ¬¡è¿›è¡Œæ±‚å€¼ï¼Œè¿”å›åä¸€ä¸ªè¡¨è¾¾å¼ <code>b</code> çš„ç»“æœã€‚åœ¨ä½¿ç”¨é€—å·çš„æŠ˜å è¡¨è¾¾å¼é‡Œï¼Œå‚æ•°åŒ…ä¹Ÿå…è®¸ä¸ºç©ºï¼Œæ­¤æ—¶è¡¨è¾¾å¼çš„ç»“æœç›¸å½“äº <code>void()</code>ï¼Œå³æ²¡æœ‰æ•°å€¼ã€‚</p><p>æˆ‘ä»¬åé¢ä¼šå±•ç¤ºé€—å·æŠ˜å è¡¨è¾¾å¼çš„ç”¨æ³•ã€‚</p><h3>äºŒå…ƒæŠ˜å </h3><p>åœ¨å‚æ•°åŒ…é‡Œæä¾›äº†è¿ç®—æ‰€éœ€çš„æ‰€æœ‰å‚æ•°æ—¶ï¼Œä¸€å…ƒæŠ˜å è¡¨è¾¾å¼å°±å¾ˆå¥½äº†ã€‚ä½†è¿˜æœ‰å¾ˆå¤§çš„ä¸€ç±»å±•å¼€åœºæ™¯ï¼Œæˆ‘ä»¬æ²¡æ³•ç”¨ä¸€å…ƒæŠ˜å è¡¨è¾¾å¼ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°é‡Œæä¾›æŸä¸ªå‚æ•°ã€‚ä¸€ç§å…¸å‹çš„æƒ…å†µå°±æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸€å †å‚æ•°è¾“å‡ºåˆ°æŸä¸ªæµé‡Œï¼š</p><pre><code class=\"language-cpp\">cout &lt;&lt; args0 &lt;&lt; args1 &lt;&lt; ... &lt;&lt; argsN;\n</code></pre><p>è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æ‰€è°“çš„â€œäºŒå…ƒå·¦æŠ˜å â€äº†ã€‚å¦‚æœå¾…è¾“å‡ºçš„å‚æ•°ç»„æˆäº†æˆ‘ä»¬çš„å‚æ•°åŒ… <code>args</code>ï¼Œæˆ‘ä»¬ç”¨ä¸‹é¢çš„ä»£ç å°±èƒ½è¾“å‡ºï¼š</p><pre><code class=\"language-cpp\">(cout &lt;&lt; ... &lt;&lt; args);\n</code></pre><p>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬æœ‰â€œäºŒå…ƒå³æŠ˜å â€ï¼Œé“ç†ç›¸åŒï¼Œæˆ‘å°±ä¸å±•å¼€äº†ã€‚</p><p>äºŒå…ƒæŠ˜å ç›¸å½“äºæä¾›äº†ä¸€ä¸ªâ€œåˆå€¼â€ï¼Œæ‰€ä»¥å‚æ•°åŒ…å…è®¸ä¸ºç©ºã€‚å¯¹äºç©ºå‚æ•°åŒ…ï¼Œ<code>(... + args)</code> æ˜¯ä¸åˆæ³•ä»£ç ï¼Œè€Œ <code>(0 + ... + args)</code> å°±æ˜¯åˆæ³•çš„äº†ã€‚</p><p>ä¸‹é¢ç”¨ç¬¦å·æè¿°ä¸€ä¸‹ã€‚ä»¤ $E$ ä»£è¡¨å‚æ•°åŒ…ï¼Œ$N$ ä»£è¡¨å‚æ•°åŒ…é‡Œçš„å‚æ•°æ•°é‡ï¼Œ$I$ ä»£è¡¨â€œåˆå€¼å‚æ•°â€ï¼Œåˆ™ï¼š</p><ul>\n<li>äºŒå…ƒå·¦æŠ˜å æ˜¯ $(I\\ \\mathrm{op}\\ \\ldots\\ \\mathrm{op}\\ E)$ï¼Œå±•å¼€åæˆä¸º $((((I\\ \\mathrm{op}\\ E_1)\\ \\mathrm{op}\\ E_2) \\ \\mathrm{op}\\ \\ldots)\\ \\mathrm{op}\\ E_N)$</li>\n<li>äºŒå…ƒå³æŠ˜å æ˜¯ $(E \\ \\mathrm{op}\\ \\ldots\\ \\mathrm{op}\\ I)$ï¼Œå±•å¼€åæˆä¸º$(E_1\\ \\mathrm{op}\\ (\\ldots\\ \\mathrm{op}\\ (E_{N-1}\\ \\mathrm{op}\\ (E_N\\ \\mathrm{op}\\ I))))$</li>\n</ul><h2>æŠ˜å è¡¨è¾¾å¼çš„åº”ç”¨åœºæ™¯</h2><p>åœ¨å¯¹æŠ˜å è¡¨è¾¾å¼æœ‰äº†ä¸€äº›åˆæ­¥çš„äº†è§£ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®é™…åº”ç”¨æŠ˜å è¡¨è¾¾å¼çš„ä¸€äº›åœºæ™¯ã€‚</p><h3>ç©ºæŒ‡é’ˆæ£€æŸ¥</h3><p>ä½œä¸ºä¸€ç§ç¼–è¯‘æœŸå±•å¼€çš„åŠŸèƒ½ï¼ŒæŠ˜å è¡¨è¾¾å¼èƒ½å¤Ÿè¾¾åˆ°è·Ÿæ‰‹å†™å±•å¼€å®Œå…¨ç›¸åŒçš„æ•ˆæœï¼Œä½†è¡¨è¾¾ä¸Šè¦ç²¾ç‚¼å¾—å¤šã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰ä»£ç éœ€è¦æ£€æŸ¥ç»™å®šçš„æŒ‡é’ˆï¼ˆæœ‰å¯èƒ½æœ‰æ™ºèƒ½æŒ‡é’ˆï¼‰æ˜¯å¦æœ‰ä¸ºç©ºçš„æƒ…å†µï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™ï¼š</p><pre><code class=\"language-cpp\">if (ptr1 == nullptr ||\n    ptr2 == nullptr ||\n    â€¦\n    ptrN == nullptr) {\n  // è®°å½•æ—¥å¿—ï¼Œå‡ºé”™è¿”å›ï¼Œç­‰ç­‰\n}\n</code></pre><p>è¿™å½“ç„¶ä¸ç®—ç³Ÿç³•ï¼Œä½†ä¸‹é¢è¿™æ ·çš„å†™æ³•æ˜¯ä¸æ˜¯å¥½ä¸Šä¸€ç‚¹ç‚¹ï¼Ÿ</p><pre><code class=\"language-cpp\">if (is_any_null(ptr1, ptr2, â€¦, ptrN)) {\n  // è®°å½•æ—¥å¿—ï¼Œå‡ºé”™è¿”å›ï¼Œç­‰ç­‰\n}\n</code></pre><p>è€Œ <code>is_any_null</code> çš„å®ç°éå¸¸ç®€å•ï¼š</p><pre><code class=\"language-cpp\">template &lt;typename... Args&gt;\nconstexpr bool\nis_any_null(const Args&amp;... args)\n{\n  return (... || (args == nullptr));\n}\n</code></pre><h3>è¿”å›å€¼æ£€æŸ¥</h3><p>æ¯”ä¸Šé¢è¿™ç§æ›´å¤æ‚ä¸€ç‚¹çš„ï¼Œæ˜¯è°ƒç”¨å¤šä¸ªå‡½æ•°ï¼Œæ£€æŸ¥è¿”å›å€¼ï¼Œå¹¶åœ¨è¿”å›å€¼è¡¨ç¤ºä¸æˆåŠŸæ—¶ç»ˆæ­¢ä»£ç æ‰§è¡Œã€‚ç¤ºæ„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-cpp\">error_t result{};\nresult = check1(â€¦);\nif (result != error_t::ok) {\n  return result;\n}\nresult = check2(â€¦);\nif (result != error_t::ok) {\n  return result;\n}\nresult = check3(â€¦);\nif (result != error_t::ok) {\n  return result;\n}\nresult = check4(â€¦);\nif (result != error_t::ok) {\n  return result;\n}\nreturn error_t::ok;\n</code></pre><p>åˆ©ç”¨æŠ˜å è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·ç®€åŒ–ä»£ç ï¼š</p><pre><code class=\"language-cpp\">return checked_exec(\n  error_t::ok,\n  [&amp;] { return check1(â€¦); },\n  [&amp;] { return check2(â€¦); },\n  [&amp;] { return check3(â€¦); },\n  [&amp;] { return check4(â€¦); });\n</code></pre><p>å½“ç„¶ï¼Œæˆ‘ä»¬éœ€è¦æä¾› <code>checked_exec</code> çš„å®šä¹‰ï¼š</p><pre><code class=\"language-cpp\">template &lt;typename R,\n          typename... Fn&gt;\nR checked_exec(const R&amp; expected,\n               Fn&amp;&amp;... fn)\n{\n  R result = expected;\n  (void)(((result = forward&lt;Fn&gt;(\n             fn)()) == expected) &amp;&amp;\n         ...);\n  return result;\n}\n</code></pre><p>åœ¨å‚æ•°å±•å¼€å’Œå†…è”åï¼Œæˆ‘ä»¬ä¸Šé¢å¯¹ <code>checked_exec</code> çš„è°ƒç”¨å°±å¤§è‡´ç›¸å½“äºä¸‹é¢çš„ä»£ç ï¼š</p><pre><code class=\"language-cpp\">error_t result = error_t::ok;\n(void)(((result = check1(â€¦)) == error_t::ok) &amp;&amp;\n       (((result = check2(â€¦)) == error_t::ok) &amp;&amp;\n        (((result = check3(â€¦)) == error_t::ok) &amp;&amp;\n         ((result = check4(â€¦)) == error_t::ok))));\nreturn result;\n</code></pre><p>è¿™é‡Œæˆ‘ä¸¥æ ¼æŒ‰ä¸€å…ƒå³æŠ˜å çš„å½¢å¼è¿›è¡Œäº†å±•å¼€ï¼Œä½†å°±å¦‚ä¸Šé¢è®¨è®ºè¿‡çš„ï¼Œè¿™é‡Œå·¦æŠ˜å å’Œå³æŠ˜å æ˜¯ç­‰ä»·çš„ã€‚æ­¤æ—¶ï¼Œå»æ‰ä¸€äº›æ‹¬å·ï¼Œä»£ç ä¼šæ›´åŠ æ¸…æ™°ï¼š</p><pre><code class=\"language-cpp\">(void)((result = check1(â€¦)) == error_t::ok &amp;&amp;\n       (result = check2(â€¦)) == error_t::ok &amp;&amp;\n       (result = check3(â€¦)) == error_t::ok &amp;&amp;\n       (result = check4(â€¦)) == error_t::ok);\n</code></pre><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ï¼Œåˆ©ç”¨æŠ˜å è¡¨è¾¾å¼å’ŒçŸ­è·¯è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å®ç° <code>checked_exec</code> æˆ–ç±»ä¼¼çš„å‡½æ•°ï¼Œæ¥ç®€åŒ–ä¸€äº›é‡å¤çš„æ£€æŸ¥ï¼Œè®©ä»£ç æ›´åŠ æ¸…æ™°ï¼Œå¹¶é¿å…ä½çº§é”™è¯¯ã€‚</p><h3>ç¼–è¯‘æœŸéå†</h3><p>åˆ©ç”¨é€—å·æŠ˜å è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€äº›ç¼–è¯‘æœŸçš„éå†æ“ä½œã€‚æœ€åŸºæœ¬çš„ï¼Œå½“ç„¶å°±æ˜¯ç›´æ¥éå†æ‰€æœ‰çš„å‚æ•°äº†ã€‚åˆ©ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ¥å®ç°å¸¦åˆ†éš”ç¬¦çš„æ‰“å°æ“ä½œï¼š</p><pre><code class=\"language-cpp\">template &lt;typename T,\n          typename First,\n          typename... Rest&gt;\nvoid print_with_separator(\n  const T&amp; sep,\n  const First&amp; first,\n  const Rest&amp;... rest)\n{\n  cout &lt;&lt; first;\n  ((cout &lt;&lt; sep &lt;&lt; rest), ...);\n  cout &lt;&lt; endl;\n}\n</code></pre><p>è¿™ä¸ªä»£ç å¾ˆç®€å•ï¼Œå¯ä»¥å†…è”ï¼Œå› æ­¤æˆ‘ä¹Ÿæ²¡æœ‰å¿…è¦åƒ<a href=\"https://time.geekbang.org/column/article/517514\">ç¬¬ 37 è®²</a>é‡Œæè¿°çš„é‚£æ ·è¿›ä¸€æ­¥è¿›è¡Œä¼ å‚ä¼˜åŒ–äº†ã€‚è¿™é‡Œçš„ç¼–è¯‘æœŸå±•å¼€å°±åˆ©ç”¨äº†é€—å·æŠ˜å è¡¨è¾¾å¼ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬ä»¥ <code>print_with_separator(\", \", \"one\", \"two\", \"three\")</code> æ¥è°ƒç”¨æ—¶ï¼Œå‡½æ•°ä½“å±•å¼€æˆå¤§è‡´è¿™ä¸ªæ ·å­ï¼ˆå»æ‰äº†ä¸å¿…è¦çš„æ‹¬å·ï¼‰ï¼š</p><pre><code class=\"language-cpp\">cout &lt;&lt; \"one\";\n((cout &lt;&lt; \", \" &lt;&lt; \"two\"),\n (cout &lt;&lt; \", \" &lt;&lt; \"three\"));\ncout &lt;&lt; endl;\n</code></pre><p>é€—å·å‰çš„é‚£ä¸ªè¡¨è¾¾å¼å°±æˆäº†æˆ‘ä»¬å¸Œæœ›åœ¨å‚æ•°åŒ… <code>args</code> ä¸Šåå¤æ‰§è¡Œçš„å†…å®¹ã€‚</p><p>ä½¿ç”¨ç±»ä¼¼çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°ä¸€ä¸ª <code>tuple</code>ã€‚è¿™æ—¶ï¼Œä»£ç å°±ç¨å¾®å¤æ‚ä¸€äº›äº†ï¼šæˆ‘ä»¬éœ€è¦æ ¹æ®éœ€è¦éå†çš„é¡¹æ•°é¢„å…ˆç”Ÿæˆç¼–è¯‘æœŸçš„æ•´æ•°åºåˆ—ï¼Œä¹Ÿå°±æ˜¯<a href=\"https://time.geekbang.org/column/article/185899\">ç¬¬ 18 è®²</a>è®¨è®ºè¿‡çš„ <code>make_index_sequence</code>ï¼Œç„¶ååˆ©ç”¨æŠ˜å è¡¨è¾¾å¼æ¥é€é¡¹éå†ã€‚</p><p>ä¸è¿‡å‘¢ï¼Œæˆ‘ä»¬è¿™æ¬¡ä¼šä½¿ç”¨æ ‡å‡†åº“é‡Œçš„ä¸€ä¸ªå¯¹ <code>make_index_sequence</code> çš„å°å°å°è£… <span class=\"orange\">[5]</span>ï¼š</p><pre><code class=\"language-cpp\">template &lt;class... T&gt;\nusing index_sequence_for =\n  make_index_sequence&lt;sizeof...(T)&gt;;\n</code></pre><p>è¿™ä¸ªç±»æ¨¡æ¿ä¼šæ ¹æ®æ¨¡æ¿å‚æ•°çš„é¡¹æ•°æ¥ç”Ÿæˆä¸€ä¸ªåˆé€‚çš„åºåˆ—ã€‚æ¯”å¦‚ï¼Œå¦‚æœä¼ ç»™ <code>index_sequence_for</code> çš„æ¨¡æ¿å‚æ•°æœ‰ä¸‰é¡¹çš„è¯ï¼Œé‚£ç»“æœç±»å‹å°±ä¼šæ˜¯ <code>index_sequence&lt;0, 1, 2&gt;</code>ã€‚</p><p>ç„¶åï¼Œ<code>print_tuple</code> å°±å¯ä»¥è¿™æ ·å®ç°ï¼š</p><pre><code class=\"language-cpp\">template &lt;typename Tup,\n          size_t... Is&gt;\nvoid output_tuple_members(\n  ostream&amp; os,\n  const Tup&amp; tup,\n  index_sequence&lt;Is...&gt;)\n{\n  ((os &lt;&lt; (Is != 0 ? \", \" : \"\")\n       &lt;&lt; get&lt;Is&gt;(tup)),\n   ...);\n}\n\ntemplate &lt;typename... Args&gt;\nvoid print_tuple(const tuple&lt;Args...&gt;&amp; args)\n{\n  cout &lt;&lt; '(';\n  output_tuple_members(\n    cout, args,\n    index_sequence_for&lt;Args...&gt;{});\n  cout &lt;&lt; ')';\n}\n</code></pre><p>å¯¹äºä¸€ä¸ªä¸‰é¡¹çš„ <code>tuple</code>ï¼Œæœ€åå±•å¼€å‡ºæ¥çš„ä»£ç å°±å·®ä¸å¤šæ˜¯è¿™ä¸ªæ ·å­ï¼š</p><pre><code class=\"language-cpp\">cout &lt;&lt; '(';\n((cout &lt;&lt; (0 != 0 ? \", \" : \"\")\n       &lt;&lt; get&lt;0&gt;(args)),\n (cout &lt;&lt; (1 != 0 ? \", \" : \"\")\n       &lt;&lt; get&lt;1&gt;(args)),\n (cout &lt;&lt; (2 != 0 ? \", \" : \"\")\n       &lt;&lt; get&lt;2&gt;(args)));\ncout &lt;&lt; ')';\n</code></pre><p>æ˜¾ç„¶ï¼Œå®ƒç¡®å®èƒ½å¤Ÿå®Œæˆæˆ‘ä»¬éœ€è¦çš„æ‰“å°ä»»åŠ¡ã€‚å¦‚æœæˆ‘ä»¬ä¼ å®ƒä¸€ä¸ª <code>make_tuple(1, \"two\", 3.14159)</code>ï¼Œæ‰“å°ç»“æœå°±ä¼šæ˜¯ï¼š</p><blockquote>\n<p><code>(1, two, 3.14159)</code></p>\n</blockquote><h2>å†…å®¹å°ç»“</h2><p>æœ¬è®²æˆ‘è®¨è®ºäº† C++17 æä¾›çš„æŠ˜å è¡¨è¾¾å¼ï¼Œå¹¶é€šè¿‡æä¾›å…·ä½“çš„ä¾‹å­ï¼Œå‘ä½ å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨è¿™ä¸€ç‰¹æ€§æ¥è¿›è¡Œç¼–è¯‘æœŸå±•å¼€ï¼Œä»è€Œç®€åŒ–é‡å¤çš„ä»£ç ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>å°è¯•ä¸€ä¸‹ä¸ç”¨æŠ˜å è¡¨è¾¾å¼å»å®ç° <code>checked_exec</code>ï¼ˆæˆ–å…¶ä»–ä½¿ç”¨äº†æŠ˜å è¡¨è¾¾å¼çš„å‡½æ•°æ¨¡æ¿ï¼‰ï¼Œä½“ä¼šä¸€ä¸‹æŠ˜å è¡¨è¾¾å¼å¸¦æ¥çš„ç®€åŒ–ã€‚</p><p>æœŸå¾…ä½ çš„åŠ¨æ‰‹å®è·µï¼Œæœ‰ä»»ä½•ç–‘é—®æˆ‘ä»¬ç•™è¨€åŒºè§ï¼</p><h2><span class=\"reference\">å‚è€ƒèµ„æ–™</span></h2><p><span class=\"reference\">[1] cppreference.com, â€œfold expressionâ€. <a href=\"https://en.cppreference.com/w/cpp/language/fold\">https://en.cppreference.com/w/cpp/language/fold</a></span></p><p><span class=\"reference\">[1a] cppreference.com, â€œæŠ˜å è¡¨è¾¾å¼â€. <a href=\"https://zh.cppreference.com/w/cpp/language/fold\">https://zh.cppreference.com/w/cpp/language/fold</a></span></p><p><span class=\"reference\">[2] cppreference.com, â€œParameter packâ€. <a href=\"https://en.cppreference.com/w/cpp/language/parameter_pack\">https://en.cppreference.com/w/cpp/language/parameter_pack</a></span></p><p><span class=\"reference\">[2a] cppreference.com, â€œå½¢å‚åŒ…â€. <a href=\"https://zh.cppreference.com/w/cpp/language/parameter_pack\">https://zh.cppreference.com/w/cpp/language/parameter_pack</a></span></p><p><span class=\"reference\">[3] cppreference.com, â€œLogical operatorsâ€. <a href=\"https://en.cppreference.com/w/cpp/language/operator_logical\">https://en.cppreference.com/w/cpp/language/operator_logical</a></span></p><p><span class=\"reference\">[3a] cppreference.com, â€œé€»è¾‘è¿ç®—ç¬¦â€. <a href=\"https://zh.cppreference.com/w/cpp/language/operator_logical\">https://zh.cppreference.com/w/cpp/language/operator_logical</a></span></p><p><span class=\"reference\">[4] cppreference.com, â€œOther operatorsâ€. <a href=\"https://en.cppreference.com/w/cpp/language/operator_other\">https://en.cppreference.com/w/cpp/language/operator_other</a></span></p><p><span class=\"reference\">[4a] cppreference.com, â€œå…¶ä»–è¿ç®—ç¬¦â€. <a href=\"https://zh.cppreference.com/w/cpp/language/operator_other\">https://zh.cppreference.com/w/cpp/language/operator_other</a></span></p><p><span class=\"reference\">[5] cppreference.com, â€œstd::integer_sequenceâ€. <a href=\"https://en.cppreference.com/w/cpp/utility/integer_sequence\">https://en.cppreference.com/w/cpp/utility/integer_sequence</a></span></p><p><span class=\"reference\">[5a] cppreference.com, â€œstd::integer_sequenceâ€. <a href=\"https://zh.cppreference.com/w/cpp/utility/integer_sequence\">https://zh.cppreference.com/w/cpp/utility/integer_sequence</a></span></p>","comments":[{"had_liked":false,"id":348414,"user_name":"å­™æ–°","can_delete":false,"product_type":"c1","uid":2875594,"ip_address":"","ucode":"A80038A479B943","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e0/ca/adfaa551.jpg","comment_is_top":false,"comment_ctime":1655089859,"is_pvip":true,"replies":[{"id":126946,"content":"è¯¾ç¨‹é‡Œæˆ‘ä¹Ÿå±•ç¤ºäº†ä¸å°‘ä»£ç äº†ã€‚è¿˜æ˜¯çœ‹çœ‹å¦‚ä½•åœ¨é¡¹ç›®é‡ŒçœŸæ­£ç”¨èµ·æ¥å§ã€‚ç”¨èµ·æ¥æ‰ä¼šæœ‰æ„Ÿè§‰ã€‚\n\næ ‡å‡†åº“æœ¬èº«å°±æ˜¯ä¸€ä¸ªä¸é”™çš„å‚è€ƒã€‚æˆ‘è§‰å¾— Clang çš„æ ‡å‡†åº“ libc++ å¯è¯»æ€§æœ€å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1655130680,"ip_address":"","comment_id":348414,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æœ€è¿‘åˆ·äº†ä¸¤ä¸‰éçš„è¯¾ï¼Œä¹Ÿé€æ¸äº†è§£äº†ä¸€äº›è¯­æ³•ç»†èŠ‚ã€‚ä½†æ˜¯å› ä¸ºç°æœ‰çš„é¡¹ç›®åŸºæœ¬æ²¡æœ‰æ¨¡æ¿ç¼–ç¨‹çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥æ¯”è¾ƒå›°æƒ‘ã€‚å°±æ˜¯å¥½çš„æ¨¡æ¿ç¼–ç¨‹ä»£ç ç»“æ„è®¾è®¡æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæœ‰ä»€ä¹ˆä¼˜ç§€å¼€æºé¡¹ç›®æ¨èçš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575834,"discussion_content":"è¯¾ç¨‹é‡Œæˆ‘ä¹Ÿå±•ç¤ºäº†ä¸å°‘ä»£ç äº†ã€‚è¿˜æ˜¯çœ‹çœ‹å¦‚ä½•åœ¨é¡¹ç›®é‡ŒçœŸæ­£ç”¨èµ·æ¥å§ã€‚ç”¨èµ·æ¥æ‰ä¼šæœ‰æ„Ÿè§‰ã€‚\n\næ ‡å‡†åº“æœ¬èº«å°±æ˜¯ä¸€ä¸ªä¸é”™çš„å‚è€ƒã€‚æˆ‘è§‰å¾— Clang çš„æ ‡å‡†åº“ libc++ å¯è¯»æ€§æœ€å¥½ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655130680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2875594,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/e0/ca/adfaa551.jpg","nickname":"å­™æ–°","note":"","ucode":"A80038A479B943","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":575947,"discussion_content":"æ„Ÿè°¢è€å¸ˆï¼Œé‚£å°±åŠ¨æ‰‹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655203737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":575834,"ip_address":"","group_id":0},"score":575947,"extra":""}]}]},{"had_liked":false,"id":390253,"user_name":"Vä¸‡èƒ½çš„å°é»‘V","can_delete":false,"product_type":"c1","uid":2436694,"ip_address":"åŒ—äº¬","ucode":"262051F1B7847A","user_header":"https://static001.geekbang.org/account/avatar/00/25/2e/56/6f38de90.jpg","comment_is_top":false,"comment_ctime":1714906213,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¿™ä¸¤ä¸ªæ£€æŸ¥å‚æ•°ä¸ºnullå’Œè¿”å›å€¼çš„ä¾‹å­å¤ªå¥½äº†ï¼Œæˆ‘é‡æ–°ä¸­å¾ˆå¤šç”¨è€æ–¹æ³•â€œshiå±±â€ä»£ç æˆ‘çœ‹ç€éƒ½å¤´ç–¼ï¼Œå¤šçœ‹çœ‹è¿™ä¸¤ä¸ªä¾‹å­ç†è§£é€äº†ï¼Œä¸‹æ¬¡æˆ‘ä¹Ÿè¿™ä¹ˆå†™ğŸ˜","like_count":0},{"had_liked":false,"id":347741,"user_name":"Milittle","can_delete":false,"product_type":"c1","uid":1045455,"ip_address":"","ucode":"80E566639A8ABB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f3/cf/851dab01.jpg","comment_is_top":false,"comment_ctime":1654388406,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"èµä¸€ä¸ª","like_count":0},{"had_liked":false,"id":348414,"user_name":"å­™æ–°","can_delete":false,"product_type":"c1","uid":2875594,"ip_address":"","ucode":"A80038A479B943","user_header":"https://static001.geekbang.org/account/avatar/00/2b/e0/ca/adfaa551.jpg","comment_is_top":false,"comment_ctime":1655089859,"is_pvip":true,"replies":[{"id":126946,"content":"è¯¾ç¨‹é‡Œæˆ‘ä¹Ÿå±•ç¤ºäº†ä¸å°‘ä»£ç äº†ã€‚è¿˜æ˜¯çœ‹çœ‹å¦‚ä½•åœ¨é¡¹ç›®é‡ŒçœŸæ­£ç”¨èµ·æ¥å§ã€‚ç”¨èµ·æ¥æ‰ä¼šæœ‰æ„Ÿè§‰ã€‚\n\næ ‡å‡†åº“æœ¬èº«å°±æ˜¯ä¸€ä¸ªä¸é”™çš„å‚è€ƒã€‚æˆ‘è§‰å¾— Clang çš„æ ‡å‡†åº“ libc++ å¯è¯»æ€§æœ€å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1655130680,"ip_address":"","comment_id":348414,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æœ€è¿‘åˆ·äº†ä¸¤ä¸‰éçš„è¯¾ï¼Œä¹Ÿé€æ¸äº†è§£äº†ä¸€äº›è¯­æ³•ç»†èŠ‚ã€‚ä½†æ˜¯å› ä¸ºç°æœ‰çš„é¡¹ç›®åŸºæœ¬æ²¡æœ‰æ¨¡æ¿ç¼–ç¨‹çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥æ¯”è¾ƒå›°æƒ‘ã€‚å°±æ˜¯å¥½çš„æ¨¡æ¿ç¼–ç¨‹ä»£ç ç»“æ„è®¾è®¡æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæœ‰ä»€ä¹ˆä¼˜ç§€å¼€æºé¡¹ç›®æ¨èçš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575834,"discussion_content":"è¯¾ç¨‹é‡Œæˆ‘ä¹Ÿå±•ç¤ºäº†ä¸å°‘ä»£ç äº†ã€‚è¿˜æ˜¯çœ‹çœ‹å¦‚ä½•åœ¨é¡¹ç›®é‡ŒçœŸæ­£ç”¨èµ·æ¥å§ã€‚ç”¨èµ·æ¥æ‰ä¼šæœ‰æ„Ÿè§‰ã€‚\n\næ ‡å‡†åº“æœ¬èº«å°±æ˜¯ä¸€ä¸ªä¸é”™çš„å‚è€ƒã€‚æˆ‘è§‰å¾— Clang çš„æ ‡å‡†åº“ libc++ å¯è¯»æ€§æœ€å¥½ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1655130680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2875594,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/e0/ca/adfaa551.jpg","nickname":"å­™æ–°","note":"","ucode":"A80038A479B943","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":575947,"discussion_content":"æ„Ÿè°¢è€å¸ˆï¼Œé‚£å°±åŠ¨æ‰‹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655203737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":575834,"ip_address":"","group_id":0},"score":575947,"extra":""}]}]},{"had_liked":false,"id":390253,"user_name":"Vä¸‡èƒ½çš„å°é»‘V","can_delete":false,"product_type":"c1","uid":2436694,"ip_address":"åŒ—äº¬","ucode":"262051F1B7847A","user_header":"https://static001.geekbang.org/account/avatar/00/25/2e/56/6f38de90.jpg","comment_is_top":false,"comment_ctime":1714906213,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¿™ä¸¤ä¸ªæ£€æŸ¥å‚æ•°ä¸ºnullå’Œè¿”å›å€¼çš„ä¾‹å­å¤ªå¥½äº†ï¼Œæˆ‘é‡æ–°ä¸­å¾ˆå¤šç”¨è€æ–¹æ³•â€œshiå±±â€ä»£ç æˆ‘çœ‹ç€éƒ½å¤´ç–¼ï¼Œå¤šçœ‹çœ‹è¿™ä¸¤ä¸ªä¾‹å­ç†è§£é€äº†ï¼Œä¸‹æ¬¡æˆ‘ä¹Ÿè¿™ä¹ˆå†™ğŸ˜","like_count":0},{"had_liked":false,"id":347741,"user_name":"Milittle","can_delete":false,"product_type":"c1","uid":1045455,"ip_address":"","ucode":"80E566639A8ABB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f3/cf/851dab01.jpg","comment_is_top":false,"comment_ctime":1654388406,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"èµä¸€ä¸ª","like_count":0}]}