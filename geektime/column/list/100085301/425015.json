{"id":425015,"title":"åŠ é¤ï½œæœŸä¸­æµ‹è¯•ï¼šå‚è€ƒå®ç°è®²è§£","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆå¤©ã€‚</p><p>ä¸Šä¸€è®²ç»™ä½ å¸ƒç½®äº†ä¸€ä»½ç®€å•çš„æœŸä¸­è€ƒè¯•ä¹ é¢˜ï¼Œä¸çŸ¥é“ä½ å®Œæˆçš„æ€ä¹ˆæ ·ã€‚ä»Šå¤©æˆ‘ä»¬æ¥ç®€å•è®²ä¸€è®²å®ç°ï¼Œä¾›ä½ å‚è€ƒã€‚</p><p>æ”¯æŒ grep å¹¶ä¸æ˜¯ä¸€ä»¶å¤æ‚çš„äº‹æƒ…ï¼Œç›¸ä¿¡ä½ åœ¨ä½¿ç”¨äº† clapã€globã€rayon å’Œ regex åï¼Œéƒ½èƒ½å†™å‡ºç±»ä¼¼çš„ä»£ç ï¼ˆä¼ªä»£ç ï¼‰ï¼š</p><pre><code class=\"language-rust\">/// Yet another simplified grep built with Rust.\n#[derive(Clap, Debug)]\n#[clap(version = \"1.0\", author = \"Tyr Chen &lt;tyr@chen.com&gt;\")]\n#[clap(setting = AppSettings::ColoredHelp)]\npub struct GrepConfig {\n    /// regex pattern to match against file contents\n    pattern: String,\n    /// Glob of file pattern\n    glob: String,\n}\n\nimpl GrepConfig {\n    pub fn matches(&amp;self) -&gt; Result&lt;()&gt; {\n        let regex = Regex::new(&amp;self.pattern)?;\n        let files: Vec&lt;_&gt; = glob::glob(&amp;self.glob)?.collect();\n        files.into_par_iter().for_each(|v| {\n            if let Ok(filename) = v {\n                if let Ok(file) = File::open(&amp;filename) {\n                    let reader = BufReader::new(file);\n                    |-\tfor (lineno, line) in reader.lines().enumerate() {\n                    |       if let Ok(line) = line {\n                    |           if let Some(_) = pattern.find(&amp;line) {\n                    |               println!(\"{}: {}\", lineno + 1, &amp;line);\n                    |           }\n                    |       }\n                    |-  }\n                }\n            }\n        });\n        Ok(())\n    }\n}\n</code></pre><!-- [[[read_end]]] --><p>è¿™ä¸ªä»£ç æ’°å†™çš„æ„Ÿè§‰å’Œ Python å·®ä¸å¤šï¼Œé™¤äº†é˜…è¯»å‡ ä¸ªä¾èµ–èŠ±äº›æ—¶é—´å¤–ï¼Œå‡ ä¹æ²¡æœ‰éš¾åº¦ã€‚</p><p>ä¸è¿‡ï¼Œè¿™ä¸ªä»£ç ä¸å…·å¤‡å¯æµ‹è¯•æ€§ï¼Œä¼šç»™ä»¥åçš„ç»´æŠ¤å’Œæ‰©å±•å¸¦æ¥éº»çƒ¦ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä¼˜åŒ–ï¼Œä½¿è¿™æ®µä»£ç æ›´åŠ å®¹æ˜“æµ‹è¯•ã€‚</p><h2>å¦‚ä½•å†™å‡ºå¥½å®ç°</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å‰¥ç¦»ä¸»è¦é€»è¾‘ã€‚</p><p>ä¸»è¦é€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿè‡ªç„¶æ˜¯å¯¹äºå•ä¸ªæ–‡ä»¶çš„ grepï¼Œä¹Ÿå°±æ˜¯ä»£ç ä¸­æ ‡è®°çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥å°†å®ƒæŠ½ç¦»æˆä¸€ä¸ªå‡½æ•°ï¼š</p><pre><code class=\"language-rust\">fn process(reader: BufReader&lt;File&gt;)\n</code></pre><p>å½“ç„¶ï¼Œä»æ¥å£çš„è§’åº¦æ¥è¯´ï¼Œè¿™ä¸ª process å‡½æ•°å®šä¹‰å¾—å¤ªæ­»ï¼Œå¦‚æœä¸æ˜¯ä» File ä¸­å–æ•°æ®ï¼Œæ”¹å¤©éœ€æ±‚å˜äº†ï¼Œä¹Ÿéœ€è¦æ”¯æŒä» stdio ä¸­å–æ•°æ®å‘¢ï¼Ÿå°±éœ€è¦æ”¹åŠ¨è¿™ä¸ªæ¥å£äº†ã€‚</p><p>æ‰€ä»¥å¯ä»¥<strong>ä½¿ç”¨æ³›å‹</strong>ï¼š</p><pre><code class=\"language-rust\">fn process&lt;R: Read&gt;(reader: BufReader&lt;R&gt;)\n</code></pre><p>æ³›å‹å‚æ•° R åªéœ€è¦æ»¡è¶³ std::io::Read trait å°±å¯ä»¥ã€‚</p><p>è¿™ä¸ªæ¥å£è™½ç„¶æŠ½å–å‡ºæ¥äº†ï¼Œä½†å®ƒä¾æ—§ä¸å¯æµ‹ï¼Œå› ä¸ºå®ƒå†…éƒ¨ç›´æ¥ println!ï¼ŒæŠŠæ‰¾åˆ°çš„æ•°æ®ç›´æ¥æ‰“å°å‡ºæ¥äº†ã€‚æˆ‘ä»¬å½“ç„¶å¯ä»¥æŠŠè¦æ‰“å°çš„è¡Œæ”¾å…¥ä¸€ä¸ª Vec&lt;String&gt; è¿”å›ï¼Œè¿™æ ·å°±å¯ä»¥æµ‹è¯•äº†ã€‚</p><p>ä¸è¿‡ï¼Œè¿™æ˜¯ä¸ºäº†æµ‹è¯•è€Œæµ‹è¯•ï¼Œ<strong>æ›´å¥½çš„æ–¹å¼æ˜¯æŠŠè¾“å‡ºçš„å¯¹è±¡ä» Stdout æŠ½è±¡æˆ Write</strong>ã€‚ç°åœ¨ process çš„æ¥å£å˜ä¸ºï¼š</p><pre><code class=\"language-rust\">fn process&lt;R: Read, W: Write&gt;(reader: BufReader&lt;R&gt;, writer: &amp;mut Writer)\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ç°äº† Read trait çš„ &amp;[u8] ä½œä¸ºè¾“å…¥ï¼Œä»¥åŠä½¿ç”¨å®ç°äº† Write trait çš„ Vec&lt;u8&gt;ä½œä¸ºè¾“å‡ºï¼Œè¿›è¡Œæµ‹è¯•äº†ã€‚è€Œåœ¨ rgrep çš„å®ç°æ—¶ï¼Œæˆ‘ä»¬ç”¨ File ä½œä¸ºè¾“å…¥ï¼ŒStdout ä½œä¸ºè¾“å‡ºã€‚è¿™æ ·æ—¢æ»¡è¶³äº†éœ€æ±‚ï¼Œè®©æ ¸å¿ƒé€»è¾‘å¯æµ‹ï¼Œè¿˜è®©æ¥å£è¶³å¤Ÿçµæ´»ï¼Œå¯ä»¥é€‚é…ä»»ä½•å®ç°äº† Read çš„è¾“å…¥ä»¥åŠå®ç°äº† Write çš„è¾“å‡ºã€‚</p><p>å¥½ï¼Œæœ‰äº†è¿™ä¸ªæ€è·¯ï¼Œæ¥çœ‹çœ‹æˆ‘æ˜¯æ€ä¹ˆå†™è¿™ä¸ª rgrep çš„ï¼Œä¾›ä½ å‚è€ƒã€‚</p><p>é¦–å…ˆ <code>cargo new rgrep</code> åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ã€‚åœ¨ Cargo.toml ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p><pre><code class=\"language-rust\">[dependencies]\nanyhow = \"1\"\nclap = \"3.0.0-beta.4\" # æˆ‘ä»¬éœ€è¦ä½¿ç”¨æœ€æ–°çš„ 3.0.0-beta.4 æˆ–è€…æ›´é«˜ç‰ˆæœ¬\ncolored = \"2\"\nglob = \"0.3\"\nitertools = \"0.10\"\nrayon = \"1\"\nregex = \"1\"\nthiserror = \"1\"\n</code></pre><p>å¯¹äºå¤„ç†å‘½ä»¤è¡Œçš„ clapï¼Œæˆ‘ä»¬éœ€è¦ 3.0 çš„ç‰ˆæœ¬ã€‚ä¸è¦åœ¨æ„ VS Code æ’ä»¶æç¤ºä½ æœ€æ–°ç‰ˆæœ¬æ˜¯ 2.33ï¼Œé‚£æ˜¯å› ä¸º beta ä¸ç®—æ­£å¼ç‰ˆæœ¬ã€‚</p><p>ç„¶ååˆ›å»º src/lib.rs å’Œ src/error.rsï¼Œåœ¨ <a href=\"http://error.rs\">error.rs</a> ä¸­æ·»åŠ ä¸€äº›é”™è¯¯å®šä¹‰ï¼š</p><pre><code class=\"language-rust\">use thiserror::Error;\n\n#[derive(Error, Debug)]\npub enum GrepError {\n    #[error(\"Glob pattern error\")]\n    GlobPatternError(#[from] glob::PatternError),\n    #[error(\"Regex pattern error\")]\n    RegexPatternError(#[from] regex::Error),\n    #[error(\"I/O error\")]\n    IoError(#[from] std::io::Error),\n}\n</code></pre><p>å®ƒä»¬éƒ½æ˜¯éœ€è¦è¿›è¡Œè½¬æ¢çš„é”™è¯¯ã€‚thiserror èƒ½å¤Ÿé€šè¿‡å®å¸®æˆ‘ä»¬å®Œæˆé”™è¯¯ç±»å‹çš„è½¬æ¢ã€‚</p><p>åœ¨ src/lib.rs ä¸­ï¼Œæ·»å…¥å¦‚ä¸‹ä»£ç ï¼š</p><pre><code class=\"language-rust\">use clap::{AppSettings, Clap};\nuse colored::*;\nuse itertools::Itertools;\nuse rayon::iter::{IntoParallelIterator, ParallelIterator};\nuse regex::Regex;\nuse std::{\n    fs::File,\n    io::{self, BufRead, BufReader, Read, Stdout, Write},\n    ops::Range,\n    path::Path,\n};\n\nmod error;\npub use error::GrepError;\n\n/// å®šä¹‰ç±»å‹ï¼Œè¿™æ ·ï¼Œåœ¨ä½¿ç”¨æ—¶å¯ä»¥ç®€åŒ–å¤æ‚ç±»å‹çš„ä¹¦å†™\npub type StrategyFn&lt;W, R&gt; = fn(&amp;Path, BufReader&lt;R&gt;, &amp;Regex, &amp;mut W) -&gt; Result&lt;(), GrepError&gt;;\n\n/// ç®€åŒ–ç‰ˆæœ¬çš„ grepï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼å’Œæ–‡ä»¶é€šé…ç¬¦\n#[derive(Clap, Debug)]\n#[clap(version = \"1.0\", author = \"Tyr Chen &lt;tyr@chen.com&gt;\")]\n#[clap(setting = AppSettings::ColoredHelp)]\npub struct GrepConfig {\n    /// ç”¨äºæŸ¥æ‰¾çš„æ­£åˆ™è¡¨è¾¾å¼\n    pattern: String,\n    /// æ–‡ä»¶é€šé…ç¬¦\n    glob: String,\n}\n\nimpl GrepConfig {\n    /// ä½¿ç”¨ç¼ºçœç­–ç•¥æ¥æŸ¥æ‰¾åŒ¹é…\n    pub fn match_with_default_strategy(&amp;self) -&gt; Result&lt;(), GrepError&gt; {\n        self.match_with(default_strategy)\n    }\n\n    /// ä½¿ç”¨æŸä¸ªç­–ç•¥å‡½æ•°æ¥æŸ¥æ‰¾åŒ¹é…\n    pub fn match_with(&amp;self, strategy: StrategyFn&lt;Stdout, File&gt;) -&gt; Result&lt;(), GrepError&gt; {\n        let regex = Regex::new(&amp;self.pattern)?;\n        // ç”Ÿæˆæ‰€æœ‰ç¬¦åˆé€šé…ç¬¦çš„æ–‡ä»¶åˆ—è¡¨\n        let files: Vec&lt;_&gt; = glob::glob(&amp;self.glob)?.collect();\n        // å¹¶è¡Œå¤„ç†æ‰€æœ‰æ–‡ä»¶\n        files.into_par_iter().for_each(|v| {\n            if let Ok(filename) = v {\n                if let Ok(file) = File::open(&amp;filename) {\n                    let reader = BufReader::new(file);\n                    let mut stdout = io::stdout();\n\n                    if let Err(e) = strategy(filename.as_path(), reader, &amp;regex, &amp;mut stdout) {\n                        println!(\"Internal error: {:?}\", e);\n                    }\n                }\n            }\n        });\n        Ok(())\n    }\n}\n\n/// ç¼ºçœç­–ç•¥ï¼Œä»å¤´åˆ°å°¾ä¸²è¡ŒæŸ¥æ‰¾ï¼Œæœ€åè¾“å‡ºåˆ° writer\npub fn default_strategy&lt;W: Write, R: Read&gt;(\n    path: &amp;Path,\n    reader: BufReader&lt;R&gt;,\n    pattern: &amp;Regex,\n    writer: &amp;mut W,\n) -&gt; Result&lt;(), GrepError&gt; {\n    let matches: String = reader\n        .lines()\n        .enumerate()\n        .map(|(lineno, line)| {\n            line.ok()\n                .map(|line| {\n                    pattern\n                        .find(&amp;line)\n                        .map(|m| format_line(&amp;line, lineno + 1, m.range()))\n                })\n                .flatten()\n        })\n        .filter_map(|v| v.ok_or(()).ok())\n        .join(\"\\n\");\n\n    if !matches.is_empty() {\n        writer.write(path.display().to_string().green().as_bytes())?;\n        writer.write(b\"\\n\")?;\n        writer.write(matches.as_bytes())?;\n        writer.write(b\"\\n\")?;\n    }\n\n    Ok(())\n}\n\n/// æ ¼å¼åŒ–è¾“å‡ºåŒ¹é…çš„è¡Œï¼ŒåŒ…å«è¡Œå·ã€åˆ—å·å’Œå¸¦æœ‰é«˜äº®çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹\npub fn format_line(line: &amp;str, lineno: usize, range: Range&lt;usize&gt;) -&gt; String {\n    let Range { start, end } = range;\n    let prefix = &amp;line[..start];\n    format!(\n        \"{0: &gt;6}:{1: &lt;3} {2}{3}{4}\",\n        lineno.to_string().blue(),\n        // æ‰¾åˆ°åŒ¹é…é¡¹çš„èµ·å§‹ä½ç½®ï¼Œæ³¨æ„å¯¹æ±‰å­—ç­‰é ascii å­—ç¬¦ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ prefix.len()\n        // è¿™æ˜¯ä¸€ä¸ª O(n) çš„æ“ä½œï¼Œä¼šæ‹–ç´¯æ•ˆç‡ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†æ¼”ç¤ºçš„æ•ˆæœ\n        (prefix.chars().count() + 1).to_string().cyan(),\n        prefix,\n        &amp;line[start..end].red(),\n        &amp;line[end..]\n    )\n}\n</code></pre><p>å’Œåˆšæ‰çš„æ€è·¯ç¨æœ‰ä¸åŒçš„æ˜¯ï¼Œprocess å‡½æ•°å« default_strategy()ã€‚å¦å¤–æˆ‘ä»¬<strong>ä¸º GrepConfig æä¾›äº†ä¸¤ä¸ªæ–¹æ³•</strong>ï¼Œä¸€ä¸ªæ˜¯ match_with_default_strategy()ï¼Œå¦ä¸€ä¸ªæ˜¯ match_with()ï¼Œè°ƒç”¨è€…å¯ä»¥è‡ªå·±ä¼ å…¥ä¸€ä¸ªå‡½æ•°æˆ–è€…é—­åŒ…ï¼Œå¯¹ç»™å®šçš„ BufReader è¿›è¡Œå¤„ç†ã€‚è¿™æ˜¯ä¸€ç§å¸¸ç”¨çš„è§£è€¦çš„å¤„ç†æ–¹æ³•ã€‚</p><p>åœ¨ src/lib.rs é‡Œï¼Œç»§ç»­æ’°å†™å•å…ƒæµ‹è¯•ï¼š</p><pre><code class=\"language-rust\">#[cfg(test)]\nmod tests {\n\n    use super::*;\n\n    #[test]\n    fn format_line_should_work() {\n        let result = format_line(\"Hello, Tyr~\", 1000, 7..10);\n        let expected = format!(\n            \"{0: &gt;6}:{1: &lt;3} Hello, {2}~\",\n            \"1000\".blue(),\n            \"7\".cyan(),\n            \"Tyr\".red()\n        );\n        assert_eq!(result, expected);\n    }\n\n    #[test]\n    fn default_strategy_should_work() {\n        let path = Path::new(\"src/main.rs\");\n        let input = b\"hello world!\\nhey Tyr!\";\n        let reader = BufReader::new(&amp;input[..]);\n        let pattern = Regex::new(r\"he\\\\w+\").unwrap();\n        let mut writer = Vec::new();\n        default_strategy(path, reader, &amp;pattern, &amp;mut writer).unwrap();\n        let result = String::from_utf8(writer).unwrap();\n        let expected = [\n            String::from(\"src/main.rs\"),\n            format_line(\"hello world!\", 1, 0..5),\n            format_line(\"hey Tyr!\\n\", 2, 0..3),\n        ];\n\n        assert_eq!(result, expected.join(\"\\n\"));\n    }\n}\n</code></pre><p>ä½ å¯ä»¥é‡ç‚¹å…³æ³¨æµ‹è¯•æ˜¯å¦‚ä½•ä½¿ç”¨ default_strategy() å‡½æ•°ï¼Œè€Œ match_with() æ–¹æ³•åˆæ˜¯å¦‚ä½•ä½¿ç”¨å®ƒçš„ã€‚è¿è¡Œ <code>cargo test</code>ï¼Œä¸¤ä¸ªæµ‹è¯•éƒ½èƒ½é€šè¿‡ã€‚</p><p>æœ€åï¼Œåœ¨ src/main.rs ä¸­æ·»åŠ å‘½ä»¤è¡Œå¤„ç†é€»è¾‘ï¼š</p><pre><code class=\"language-rust\">use anyhow::Result;\nuse clap::Clap;\nuse rgrep::*;\n\nfn main() -&gt; Result&lt;()&gt; {\n    let config: GrepConfig = GrepConfig::parse();\n    config.match_with_default_strategy()?;\n\n    Ok(())\n}\n</code></pre><p>åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œï¼š<code>cargo run --quiet -- \"Re[^\\\\s]+\" \"src/*.rs\"</code> ï¼Œä¼šå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹è¾“å‡ºã€‚æ³¨æ„ï¼Œæ–‡ä»¶è¾“å‡ºçš„é¡ºåºå¯èƒ½ä¸å®Œå…¨ä¸€æ ·ï¼Œå› ä¸º rayon æ˜¯å¤šä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œçš„ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/79/aa/79c56964b55dede4ce0ec7c5c4cfe9aa.png?wh=1920x797\" alt=\"å›¾ç‰‡\"></p><h2>å°ç»“</h2><p>rgrep æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œä»…ä»…å†™äº†ä¸Šç™¾è¡Œä»£ç ï¼Œå°±å®Œæˆäº†ä¸€ä¸ªæ€§èƒ½ç›¸å½“ä¸é”™çš„ç®€åŒ–ç‰ˆ grepã€‚åœ¨ä¸åšå¤æ‚çš„æ¥å£è®¾è®¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨ç”Ÿå‘½å‘¨æœŸï¼Œä¸ç”¨æ³›å‹ï¼Œç”šè‡³ä¸ç”¨å¤ªå…³å¿ƒæ‰€æœ‰æƒï¼Œå°±å¯ä»¥å†™å‡ºéå¸¸ç±»ä¼¼è„šæœ¬è¯­è¨€çš„ä»£ç ã€‚</p><p>ä»è¿™ä¸ªæ„ä¹‰ä¸Šè®²ï¼Œ<strong>Rust ç”¨æ¥åšä¸€æ¬¡æ€§çš„ã€å³ç”¨å³æŠ›å‹çš„ä»£ç ï¼Œæˆ–è€…è¯´ï¼Œå†™ä¸ªå¿«é€ŸåŸå‹ï¼Œä¹Ÿæœ‰ç”¨æ­¦ä¹‹åœ°</strong>ï¼›å½“æˆ‘ä»¬éœ€è¦æ›´å¥½çš„ä»£ç è´¨é‡ã€æ›´é«˜çš„æŠ½è±¡åº¦ã€æ›´çµæ´»çš„è®¾è®¡æ—¶ï¼ŒRust æä¾›äº†è¶³å¤Ÿå¤šçš„å·¥å…·ï¼Œè®©æˆ‘ä»¬å°†åŸå‹è¿›åŒ–æˆæ›´æˆç†Ÿçš„ä»£ç ã€‚</p><p>ç›¸ä¿¡åœ¨åš rgrep çš„è¿‡ç¨‹ä¸­ï¼Œä½ èƒ½æ„Ÿå—åˆ°ç”¨ Rust å¼€å‘è½¯ä»¶çš„æ„‰æ‚¦ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬å°±ä¸å¸ƒç½®æ€è€ƒé¢˜äº†ï¼Œä½ å¯ä»¥å¤šå¤šä½“ä¼šKV serverå’Œrgrepå·¥å…·çš„å®ç°ã€‚æ­å–œä½ å®Œæˆäº†RuståŸºç¡€ç¯‡çš„å­¦ä¹ ï¼Œè¿›åº¦æ¡è¿‡åŠï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è¿›é˜¶ç¯‡è§ã€‚</p><p>æ¬¢è¿ä½ åˆ†äº«ç»™èº«è¾¹çš„æœ‹å‹ï¼Œé‚€ä»–ä¸€èµ·è®¨è®ºã€‚</p><h3>å»¶ä¼¸é˜…è¯»</h3><p>åœ¨ YouTube ä¸Šï¼Œæœ‰ä¸€ä¸ªæ–°é²œå‡ºç‚‰çš„è§†é¢‘ï¼š<a href=\"https://www.youtube.com/watch?v=rDoqT-a6UFg\">Visualizing memory layout of Rustâ€™s data types</a>ï¼Œç”¨ 40 åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ€»ç»“äº†æˆ‘ä»¬å‰é¢åŸºç¡€ç¯‡äºŒåè®²é‡Œæåˆ°çš„ä¸»è¦æ•°æ®ç»“æ„çš„å†…å­˜å¸ƒå±€ã€‚æˆ‘ä¸ªäººéå¸¸å–œæ¬¢è¿™ä¸ªè§†é¢‘ï¼Œå› ä¸ºå®ƒå’Œæˆ‘ä¸€ç›´å€¡å¯¼çš„â€œå˜æ¸…æ•°æ®æ˜¯å¦‚ä½•åœ¨å †å’Œæ ˆä¸Šå­˜å‚¨â€çš„æ€è·¯ä¸è°‹è€Œåˆï¼Œåœ¨è¿™é‡Œä¹Ÿæ¨èç»™ä½ ã€‚å¦‚æœä½ æƒ³å¿«é€Ÿå¤ä¹ ä¸€ä¸‹ï¼ŒæŸ¥æ¼è¡¥ç¼ºï¼Œé‚£ä¹ˆéå¸¸å»ºè®®ä½ èŠ±ä¸Šä¸€ä¸ªå°æ—¶æ—¶é—´ä»”ç»†çœ‹ä¸€ä¸‹è¿™ä¸ªè§†é¢‘ã€‚</p>","comments":[{"had_liked":false,"id":354348,"user_name":"æ²ˆç•…","can_delete":false,"product_type":"c1","uid":1077953,"ip_address":"æ±Ÿè‹","ucode":"7404E41356B36B","user_header":"https://static001.geekbang.org/account/avatar/00/10/72/c1/59509397.jpg","comment_is_top":false,"comment_ctime":1660294194,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1660294194","product_id":100085301,"comment_content":"è¿™ä¸ªé¢˜å®Œå…¨ä¸ä¼šåšï¼Œè¿˜å¾—å­¦å„ç§åº“å•Š","like_count":0},{"had_liked":false,"id":343960,"user_name":"Simon","can_delete":false,"product_type":"c1","uid":1068163,"ip_address":"","ucode":"107606167D23E8","user_header":"https://static001.geekbang.org/account/avatar/00/10/4c/83/7788fc66.jpg","comment_is_top":false,"comment_ctime":1651143684,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1651143684","product_id":100085301,"comment_content":"è€å¸ˆ, æ–‡ä»¶è·¯å¾„çš„é¢œè‰²ä¸èƒ½æ­£å¸¸æ˜¾ç¤º<br>æˆ‘ä¿®å¤äº†ä¸€ä¸‹, è§PR<br>https:&#47;&#47;github.com&#47;tyrchen&#47;geektime-rust&#47;pull&#47;10","like_count":1},{"had_liked":false,"id":339657,"user_name":"woJA1wCgAA14JCXna23FAiisVJJCYYyA","can_delete":false,"product_type":"c1","uid":2944795,"ip_address":"","ucode":"74B9B105FBD4AA","user_header":"","comment_is_top":false,"comment_ctime":1648279110,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648279110","product_id":100085301,"comment_content":"`stdout` è¾“å‡ºè¿™é‡Œä¼šä¸ä¼šæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™ `io` ï¼Œå¯¼è‡´ `path` å’Œ `matches` äº¤é”™è¾“å‡ºçš„æƒ…å†µå‘€","like_count":0},{"had_liked":false,"id":323612,"user_name":"Bitstream","can_delete":false,"product_type":"c1","uid":1434089,"ip_address":"","ucode":"51FB631A70B52C","user_header":"https://static001.geekbang.org/account/avatar/00/15/e1/e9/29b62c57.jpg","comment_is_top":false,"comment_ctime":1638020944,"is_pvip":false,"replies":[{"id":"118881","content":"æœ‰æ—¶å€™ä¼šå¡ä½ï¼Œéœ€è¦ç­‰ä¸€ä¸‹ï¼Œæˆ–è€…æŠŠ cargo ç›¸å…³çš„è¿›ç¨‹æ€ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","comment_id":323612,"uid":"1079375","ip_address":"","utype":1,"ctime":1639849961,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1638020944","product_id":100085301,"comment_content":"è€å¸ˆæœ‰æ²¡æœ‰é‡åˆ°rust-analyzerä¸‹ï¼Œ`use thiserror::`æ— æ³•æç¤ºè¡¥å…¨çš„æƒ…å†µï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539842,"discussion_content":"æœ‰æ—¶å€™ä¼šå¡ä½ï¼Œéœ€è¦ç­‰ä¸€ä¸‹ï¼Œæˆ–è€…æŠŠ cargo ç›¸å…³çš„è¿›ç¨‹æ€ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639849961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322357,"user_name":"dva","can_delete":false,"product_type":"c1","uid":2101988,"ip_address":"","ucode":"EE27DAFCBF198D","user_header":"https://static001.geekbang.org/account/avatar/00/20/12/e4/57ade29a.jpg","comment_is_top":false,"comment_ctime":1637314678,"is_pvip":false,"replies":[{"id":"118907","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":322357,"uid":"1079375","ip_address":"","utype":1,"ctime":1639852014,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1637314678","product_id":100085301,"comment_content":"è¿™å‡ ç¯‡æ–‡ç« çœ‹ä¸‹æ¥ï¼Œç»“æ„è®¾è®¡ç›¸å…³çŸ¥è¯†ä¹Ÿæ”¶è·è‰¯å¤šï¼Œæ„Ÿè°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539868,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639852014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320564,"user_name":"è€å®äººHoney","can_delete":false,"product_type":"c1","uid":1080653,"ip_address":"","ucode":"EA4AB5C0C33090","user_header":"https://static001.geekbang.org/account/avatar/00/10/7d/4d/d98865b2.jpg","comment_is_top":false,"comment_ctime":1636381058,"is_pvip":true,"replies":[{"id":"116305","content":"github ä¸Šé¢çš„ä»£ç å·²ç»æ”¹äº†","user_name":"ä½œè€…å›å¤","comment_id":320564,"uid":"1079375","ip_address":"","utype":1,"ctime":1636478710,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"1636381058","product_id":100085301,"comment_content":"https:&#47;&#47;github.com&#47;clap-rs&#47;clap&#47;issues&#47;2917<br>clap v3.0.0-beta.4 break changeäº†ï¼Œè¦è°ƒæ•´ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530050,"discussion_content":"github ä¸Šé¢çš„ä»£ç å·²ç»æ”¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636478710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319359,"user_name":"linuxfish","can_delete":false,"product_type":"c1","uid":1078927,"ip_address":"","ucode":"557F21A1CC7EAD","user_header":"","comment_is_top":false,"comment_ctime":1635758419,"is_pvip":false,"replies":[{"id":"116384","content":"ä½ çš„ terminal  æ˜¯å¦æ”¯æŒ ansi colorï¼Ÿä½ éœ€è¦ä½¿ç”¨æ”¯æŒé¢œè‰²çš„ terminal","user_name":"ä½œè€…å›å¤","comment_id":319359,"uid":"1079375","ip_address":"","utype":1,"ctime":1636556314,"user_name_real":"Tyr"}],"discussion_count":2,"race_medal":0,"score":"1635758419","product_id":100085301,"comment_content":"writer.write(path.display().to_string().green().as_bytes())?;<br><br>è¿™ä¸€è¡Œçš„è®¾ç½®é¢œè‰²è²Œä¼¼æ²¡æœ‰èµ·ä½œç”¨ï¼Œæ¢äº†å…¶å®ƒé¢œè‰²ä¹Ÿæ˜¯æ²¡æ•ˆæœ","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529608,"discussion_content":"ä½ çš„ terminal  æ˜¯å¦æ”¯æŒ ansi colorï¼Ÿä½ éœ€è¦ä½¿ç”¨æ”¯æŒé¢œè‰²çš„ terminal","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636556314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1078927,"avatar":"","nickname":"linuxfish","note":"","ucode":"557F21A1CC7EAD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":531284,"discussion_content":"æˆ‘ç”¨çš„æ˜¯ Mac ä¸Šçš„ iterm2ï¼Œåº”è¯¥ä¸æ˜¯ terminalçš„é—®é¢˜ï¼Œå› ä¸ºåªæœ‰è¿™ä¸ªåœ°æ–¹è®¾ç½®çš„é¢œè‰²ä¸èµ·ä½œç”¨ï¼Œå…¶å®ƒåœ°æ–¹çš„é¢œè‰²æ˜¯æœ‰çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637282442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":529608,"ip_address":""},"score":531284,"extra":"{\"user_type\":1}"}]}]},{"had_liked":false,"id":318733,"user_name":"é‡å±±é—¨","can_delete":false,"product_type":"c1","uid":1019276,"ip_address":"","ucode":"4430AF308209A0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/8c/8e3d356c.jpg","comment_is_top":false,"comment_ctime":1635406911,"is_pvip":false,"replies":[{"id":"116408","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":318733,"uid":"1079375","ip_address":"","utype":1,"ctime":1636558030,"user_name_real":"Tyr"}],"discussion_count":1,"race_medal":0,"score":"1635406911","product_id":100085301,"comment_content":"çœ‹å®Œäº†é™„å¸¦çš„è§†é¢‘ï¼Œå¯¹æ•°æ®ç±»å‹çš„å†…å­˜ç»“æ„æœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†ã€‚æ„Ÿè°¢ï¼","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529361,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636558030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316497,"user_name":"è®°äº‹æœ¬","can_delete":false,"product_type":"c1","uid":1401568,"ip_address":"","ucode":"FA942636EE0CC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","comment_is_top":false,"comment_ctime":1634356045,"is_pvip":false,"replies":[{"id":"114689","content":"å‘ƒï¼Œåˆæ˜¯ç¨¿ä»¶ç²˜è´´çš„é—®é¢˜ï¼Œè‡ªåŠ¨å¤šåŠ äº†ä¸€ä¸ªè½¬ä¹‰çš„ &quot;\\&quot;ã€‚æˆ‘è®©ç¼–è¾‘å¸®å¿™æ›´æ–°ã€‚<br><br>ä½ ä¹Ÿå¯ä»¥çœ‹ github ä¸Šçš„å®Œæˆä»£ç ï¼šhttps:&#47;&#47;github.com&#47;tyrchen&#47;geektime-rust&#47;blob&#47;master&#47;mid_term_rgrep&#47;src&#47;lib.rsã€‚è¿™ä¸ªä»£ç æ˜¯ç»è¿‡æµ‹è¯•å’Œ cargo check&#47;clippy çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":316497,"uid":"1079375","ip_address":"","utype":1,"ctime":1634540209,"user_name_real":"Tyr"}],"discussion_count":3,"race_medal":0,"score":"1634356045","product_id":100085301,"comment_content":"è€å¸ˆ,å¿…é¡»æ”¹æˆè¿™æ ·æ‰å¯ä»¥æ¢è¡Œç”Ÿæ•ˆå•Š         writer.write(b&quot;\\n&quot;)?;<br>","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528394,"discussion_content":"å‘ƒï¼Œåˆæ˜¯ç¨¿ä»¶ç²˜è´´çš„é—®é¢˜ï¼Œè‡ªåŠ¨å¤šåŠ äº†ä¸€ä¸ªè½¬ä¹‰çš„ &amp;quot;\\&amp;quot;ã€‚æˆ‘è®©ç¼–è¾‘å¸®å¿™æ›´æ–°ã€‚\n\nä½ ä¹Ÿå¯ä»¥çœ‹ github ä¸Šçš„å®Œæˆä»£ç ï¼šhttps://github.com/tyrchen/geektime-rust/blob/master/mid_term_rgrep/src/lib.rsã€‚è¿™ä¸ªä»£ç æ˜¯ç»è¿‡æµ‹è¯•å’Œ cargo check/clippy çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634540209,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1281585,"avatar":"https://static001.geekbang.org/account/avatar/00/13/8e/31/28972804.jpg","nickname":"é˜¿æµ·","note":"","ucode":"2589431F840C42","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405054,"discussion_content":"win10 è¯•äº†ç¡®å®æ˜¯è¿™æ ·å­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634484876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1401568,"avatar":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","nickname":"è®°äº‹æœ¬","note":"","ucode":"FA942636EE0CC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1281585,"avatar":"https://static001.geekbang.org/account/avatar/00/13/8e/31/28972804.jpg","nickname":"é˜¿æµ·","note":"","ucode":"2589431F840C42","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":405203,"discussion_content":"æˆ‘ Ubuntuç³»ç»Ÿä¸‹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634528685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":405054,"ip_address":""},"score":405203,"extra":""}]}]},{"had_liked":false,"id":316341,"user_name":"è®°äº‹æœ¬","can_delete":false,"product_type":"c1","uid":1401568,"ip_address":"","ucode":"FA942636EE0CC8","user_header":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","comment_is_top":false,"comment_ctime":1634279101,"is_pvip":false,"replies":[{"id":"114723","content":"å°±æ˜¯ std::ioã€‚<br><br>ä¸€èˆ¬ use std::io å°±å¯ä»¥äº†ï¼Œä½†å¦‚æœæƒ³åŒæ—¶å¼•å…¥è‡ªå·±ä»¥åŠè‡ªå·±åº•ä¸‹çš„ç»“æ„ï¼Œå¯ä»¥ç”¨ selfï¼Œæ¯”å¦‚ï¼š use std::io::{self, Read};","user_name":"ä½œè€…å›å¤","comment_id":316341,"uid":"1079375","ip_address":"","utype":1,"ctime":1634571267,"user_name_real":"Tyr"}],"discussion_count":7,"race_medal":0,"score":"1634279101","product_id":100085301,"comment_content":"use std::io::self  selfåœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ä»€ä¹ˆå•Š","like_count":0,"discussions":[{"author":{"id":1079375,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/4f/e74f870c.jpg","nickname":"Tyr","note":"","ucode":"EAAFC8063202E0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528360,"discussion_content":"å°±æ˜¯ std::ioã€‚\n\nä¸€èˆ¬ use std::io å°±å¯ä»¥äº†ï¼Œä½†å¦‚æœæƒ³åŒæ—¶å¼•å…¥è‡ªå·±ä»¥åŠè‡ªå·±åº•ä¸‹çš„ç»“æ„ï¼Œå¯ä»¥ç”¨ selfï¼Œæ¯”å¦‚ï¼š use std::io::{self, Read};","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634571267,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2186992,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5e/f0/62d8cf9e.jpg","nickname":"D. D","note":"","ucode":"C416E5602C8814","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404352,"discussion_content":"std::io","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634292073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1401568,"avatar":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","nickname":"è®°äº‹æœ¬","note":"","ucode":"FA942636EE0CC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2186992,"avatar":"https://static001.geekbang.org/account/avatar/00/21/5e/f0/62d8cf9e.jpg","nickname":"D. D","note":"","ucode":"C416E5602C8814","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":404646,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634372035,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":404352,"ip_address":""},"score":404646,"extra":""}]},{"author":{"id":2738765,"avatar":"https://static001.geekbang.org/account/avatar/00/29/ca/4d/e531599a.jpg","nickname":"å¤§èŠ‹å¤´î‚","note":"","ucode":"CD7F0AAE97C69F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404598,"discussion_content":"use std::io::self ç­‰ä»·äº use std::io;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634355533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1401568,"avatar":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","nickname":"è®°äº‹æœ¬","note":"","ucode":"FA942636EE0CC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2738765,"avatar":"https://static001.geekbang.org/account/avatar/00/29/ca/4d/e531599a.jpg","nickname":"å¤§èŠ‹å¤´î‚","note":"","ucode":"CD7F0AAE97C69F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404645,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634372027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":404598,"ip_address":""},"score":404645,"extra":""}]},{"author":{"id":1023085,"avatar":"","nickname":"å®‰è¿ª","note":"","ucode":"BC23EA989E0A4C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404334,"discussion_content":"ioæ¨¡å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634289959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1401568,"avatar":"https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg","nickname":"è®°äº‹æœ¬","note":"","ucode":"FA942636EE0CC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1023085,"avatar":"","nickname":"å®‰è¿ª","note":"","ucode":"BC23EA989E0A4C","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":404647,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634372042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":404334,"ip_address":""},"score":404647,"extra":""}]}]}]}