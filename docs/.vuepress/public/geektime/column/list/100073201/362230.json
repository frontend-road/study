{"id":362230,"title":"15 | å­˜å‚¨è¿‡ç¨‹ï¼šå¦‚ä½•æé«˜ç¨‹åºçš„æ€§èƒ½å’Œå®‰å…¨æ€§ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™“å³°ã€‚ä»Šå¤©å‘¢ï¼Œæˆ‘ä»¬æ¥èŠä¸€èŠMySQLçš„å­˜å‚¨è¿‡ç¨‹ã€‚</p><p>åœ¨æˆ‘ä»¬çš„è¶…å¸‚é¡¹ç›®ä¸­ï¼Œæ¯å¤©è¥ä¸šç»“æŸåï¼Œè¶…å¸‚ç»è¥è€…éƒ½è¦è®¡ç®—å½“æ—¥çš„é”€é‡ï¼Œæ ¸ç®—æˆæœ¬å’Œæ¯›åˆ©ç­‰è¥ä¸šæ•°æ®ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€æ¯å¤©éƒ½è¦åšé‡å¤çš„æ•°æ®ç»Ÿè®¡å·¥ä½œã€‚å…¶å®ï¼Œè¿™ç§æ•°æ®é‡å¤§ï¼Œè€Œä¸”è®¡ç®—è¿‡ç¨‹å¤æ‚çš„åœºæ™¯ï¼Œå°±éå¸¸é€‚åˆä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ã€‚</p><p>ç®€å•æ¥è¯´å‘¢ï¼Œå­˜å‚¨è¿‡ç¨‹å°±æ˜¯æŠŠä¸€ç³»åˆ—SQLè¯­å¥é¢„å…ˆå­˜å‚¨åœ¨MySQLæœåŠ¡å™¨ä¸Šï¼Œéœ€è¦æ‰§è¡Œçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯åªéœ€è¦å‘æœåŠ¡å™¨ç«¯å‘å‡ºè°ƒç”¨å­˜å‚¨è¿‡ç¨‹çš„å‘½ä»¤ï¼ŒæœåŠ¡å™¨ç«¯å°±å¯ä»¥æŠŠé¢„å…ˆå­˜å‚¨å¥½çš„è¿™ä¸€ç³»åˆ—SQLè¯­å¥å…¨éƒ¨æ‰§è¡Œã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œä¸ä»…æ‰§è¡Œæ•ˆç‡éå¸¸é«˜ï¼Œè€Œä¸”å®¢æˆ·ç«¯ä¸éœ€è¦æŠŠæ‰€æœ‰çš„SQLè¯­å¥é€šè¿‡ç½‘ç»œå‘ç»™æœåŠ¡å™¨ï¼Œå‡å°‘äº†SQLè¯­å¥æš´éœ²åœ¨ç½‘ä¸Šçš„é£é™©ï¼Œä¹Ÿæé«˜äº†æ•°æ®æŸ¥è¯¢çš„å®‰å…¨æ€§ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘å°±å€ŸåŠ©çœŸå®çš„è¶…å¸‚é¡¹ç›®ï¼Œç»™ä½ ä»‹ç»ä¸€ä¸‹å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œå¸®åŠ©ä½ æå‡æŸ¥è¯¢çš„æ•ˆç‡ï¼Œå¹¶ä¸”è®©ä½ å¼€å‘çš„åº”ç”¨æ›´åŠ ç®€æ´å®‰å…¨ã€‚</p><h2>å¦‚ä½•åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼Ÿ</h2><p>åœ¨åˆ›å»ºå­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å…³é”®å­—CREATE PROCEDUREã€‚å…·ä½“çš„è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š</p><pre><code>CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹å ï¼ˆ[ IN | OUT | INOUT] å‚æ•°åç§° ç±»å‹ï¼‰ç¨‹åºä½“\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¥è¶…å¸‚çš„æ—¥ç»“è®¡ç®—ä¸ºä¾‹ï¼Œç»™ä½ è®²ä¸€è®²æ€ä¹ˆåˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€‚å½“ç„¶ï¼Œä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ï¼Œæˆ‘å¯¹è®¡ç®—çš„è¿‡ç¨‹è¿›è¡Œäº†ç®€åŒ–ã€‚</p><p>å‡è®¾åœ¨æ—¥ç»“è®¡ç®—ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡æ¯å¤©çš„å•å“é”€å”®ï¼ŒåŒ…æ‹¬é”€å”®æ•°é‡ã€é”€å”®é‡‘é¢ã€æˆæœ¬ã€æ¯›åˆ©ã€æ¯›åˆ©ç‡ç­‰ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜è¦æŠŠè®¡ç®—å‡ºæ¥çš„ç»“æœå­˜å…¥å•å“ç»Ÿè®¡è¡¨ä¸­ã€‚</p><!-- [[[read_end]]] --><p>è¿™ä¸ªè®¡ç®—éœ€è¦ç”¨åˆ°å‡ ä¸ªæ•°æ®è¡¨ï¼Œæˆ‘åˆ†åˆ«æ¥å±•ç¤ºä¸‹è¿™äº›è¡¨çš„åŸºæœ¬ä¿¡æ¯ã€‚</p><p>é”€å”®å•æ˜ç»†è¡¨ï¼ˆdemo.transactiondetailsï¼‰ä¸­åŒ…æ‹¬äº†æ¯ç¬”é”€å”®ä¸­çš„å•†å“ç¼–å·ã€é”€å”®æ•°é‡ã€é”€å”®ä»·æ ¼å’Œé”€å”®é‡‘é¢ã€‚</p><pre><code>mysql&gt; SELECT *\n-&gt; FROM demo.transactiondetails;\n+---------------+------------+----------+------------+------------+\n| transactionid | itemnumber | quantity | salesprice | salesvalue |\n+---------------+------------+----------+------------+------------+\n| 1 | 1 | 1.000 | 89.00 | 89.00 |\n| 1 | 2 | 2.000 | 5.00 | 10.00 |\n| 2 | 1 | 2.000 | 89.00 | 178.00 |\n| 3 | 2 | 10.000 | 5.00 | 50.00 |\n| 3 | 3 | 3.000 | 15.00 | 45.00 |\n+---------------+------------+----------+------------+------------+\n5 rows in set (0.00 sec)\n</code></pre><p>é”€å”®å•å¤´è¡¨ï¼ˆdemo.transactionheadï¼‰ä¸­åŒ…æ‹¬æµæ°´å•å·ã€æ”¶æ¬¾æœºç¼–å·ã€ä¼šå‘˜ç¼–å·ã€æ“ä½œå‘˜ç¼–å·ã€äº¤æ˜“æ—¶é—´ã€‚</p><pre><code>mysql&gt; SELECT *\n-&gt; FROM demo.transactionhead;\n+---------------+------------------+-----------+----------+------------+---------------------+\n| transactionid | transactionno | cashierid | memberid | operatorid | transdate |\n+---------------+------------------+-----------+----------+------------+---------------------+\n| 1 | 0120201201000001 | 1 | 1 | 1 | 2020-12-01 00:00:00 |\n| 2 | 0120201201000002 | 1 | NULL | 1 | 2020-12-01 00:00:00 |\n| 3 | 0120201202000001 | 1 | NULL | 1 | 2020-12-02 00:00:00 |\n+---------------+------------------+-----------+----------+------------+---------------------+\n3 rows in set (0.00 sec)\n</code></pre><p>å•†å“ä¿¡æ¯è¡¨ï¼ˆdemo.goodsmasterï¼‰ä¸­åŒ…æ‹¬å•†å“ç¼–å·ã€å•†å“æ¡ç ã€å•†å“åç§°ã€è§„æ ¼ã€å•ä½ã€å”®ä»·å’Œå¹³å‡è¿›ä»·ã€‚</p><pre><code>mysql&gt; SELECT *\n-&gt; FROM demo.goodsmaster;\n+------------+---------+-----------+---------------+------+------------+----------------+\n| itemnumber | barcode | goodsname | specification | unit | salesprice | avgimportprice |\n+------------+---------+-----------+---------------+------+------------+----------------+\n| 1 | 0001 | ä¹¦ | NULL | æœ¬ | 89.00 | 33.50 |\n| 2 | 0002 | ç¬” | NULL | æ”¯ | 5.00 | 3.50 |\n| 3 | 0003 | èƒ¶æ°´ | NULL | ç“¶ | 15.00 | 11.00 |\n+------------+---------+-----------+---------------+------+------------+----------------+\n3 rows in set (0.00 sec)\n</code></pre><p>å­˜å‚¨è¿‡ç¨‹ä¼šç”¨åˆšåˆšçš„ä¸‰ä¸ªè¡¨ä¸­çš„æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œå¹¶ä¸”æŠŠè®¡ç®—çš„ç»“æœå­˜å‚¨åˆ°ä¸‹é¢çš„è¿™ä¸ªå•å“ç»Ÿè®¡è¡¨ä¸­ã€‚</p><pre><code>mysql&gt; DESCRIBE demo.dailystatistics;\n+-------------+---------------+------+-----+---------+----------------+\n| Field | Type | Null | Key | Default | Extra |\n+-------------+---------------+------+-----+---------+----------------+\n| id | int | NO | PRI | NULL | auto_increment |\n| itemnumber | int | YES | MUL | NULL | |\n| quantity | decimal(10,3) | YES | | NULL | |\n| actualvalue | decimal(10,2) | YES | | NULL | |\n| cost | decimal(10,2) | YES | | NULL | |\n| profit | decimal(10,2) | YES | | NULL | |\n| profitratio | decimal(10,4) | YES | | NULL | |\n| salesdate | datetime | YES | MUL | NULL | |\n+-------------+---------------+------+-----+---------+----------------+\n8 rows in set (0.01 sec)\n</code></pre><p>æˆ‘ä»¬ç°åœ¨å°±æ¥åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œå®Œæˆå•å“é”€å”®ç»Ÿè®¡çš„è®¡ç®—ã€‚æˆ‘æ¥è®²ä¸€è®²å…·ä½“çš„æ€è·¯ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬æŠŠSQLè¯­å¥çš„åˆ†éš”ç¬¦æ”¹ä¸ºâ€œ//â€ã€‚å› ä¸ºå­˜å‚¨è¿‡ç¨‹ä¸­åŒ…å«å¾ˆå¤šSQLè¯­å¥ï¼Œå¦‚æœä¸ä¿®æ”¹åˆ†éš”ç¬¦çš„è¯ï¼ŒMySQLä¼šåœ¨è¯»åˆ°ç¬¬ä¸€ä¸ªSQLè¯­å¥çš„åˆ†éš”ç¬¦â€œ;â€çš„æ—¶å€™ï¼Œè®¤ä¸ºè¯­å¥ç»“æŸå¹¶ä¸”æ‰§è¡Œï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é”™è¯¯ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼ŒæŠŠè¦å¤„ç†çš„æ—¥æœŸä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼ˆå…³äºå‚æ•°ï¼Œä¸‹é¢æˆ‘ä¼šå…·ä½“è®²è¿°ï¼‰ã€‚åŒæ—¶ï¼Œç”¨BEGINå’ŒENDå…³é”®å­—æŠŠå­˜å‚¨è¿‡ç¨‹ä¸­çš„SQLè¯­å¥åŒ…è£¹èµ·æ¥ï¼Œå½¢æˆå­˜å‚¨è¿‡ç¨‹çš„ç¨‹åºä½“ã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨ç¨‹åºä½“ä¸­ï¼Œå…ˆå®šä¹‰2ä¸ªæ•°æ®ç±»å‹ä¸ºDATETIMEçš„å˜é‡ï¼Œç”¨æ¥è®°å½•è¦è®¡ç®—æ•°æ®çš„èµ·å§‹æ—¶é—´å’Œæˆªæ­¢æ—¶é—´ã€‚</p><p>ç¬¬å››æ­¥ï¼Œåˆ é™¤ä¿å­˜ç»“æœæ•°æ®çš„å•å“ç»Ÿè®¡è¡¨ä¸­ç›¸åŒæ—¶é—´æ®µçš„æ•°æ®ï¼Œç›®çš„æ˜¯é˜²æ­¢æ•°æ®é‡å¤ã€‚</p><p>ç¬¬äº”æ­¥ï¼Œè®¡ç®—èµ·å§‹æ—¶é—´å’Œæˆªæ­¢æ—¶é—´å†…å•å“çš„é”€å”®æ•°é‡åˆè®¡ã€é”€å”®é‡‘é¢åˆè®¡ã€æˆæœ¬åˆè®¡ã€æ¯›åˆ©å’Œæ¯›åˆ©ç‡ï¼Œå¹¶ä¸”æŠŠç»“æœå­˜å‚¨åˆ°å•å“ç»Ÿè®¡è¡¨ä¸­ã€‚</p><p>è¿™äº”ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¥å®ç°ã€‚</p><pre><code>mysql&gt; DELIMITER // -- è®¾ç½®åˆ†å‰²ç¬¦ä¸º//\n-&gt; CREATE PROCEDURE demo.dailyoperation(transdate TEXT)\n-&gt; BEGIN -- å¼€å§‹ç¨‹åºä½“\n-&gt; DECLARE startdate,enddate DATETIME; -- å®šä¹‰å˜é‡\n-&gt; SET startdate = date_format(transdate,'%Y-%m-%d'); -- ç»™èµ·å§‹æ—¶é—´èµ‹å€¼\n-&gt; SET enddate = date_add(startdate,INTERVAL 1 DAY); -- æˆªæ­¢æ—¶é—´èµ‹å€¼ä¸º1å¤©ä»¥å\n-&gt; -- åˆ é™¤åŸæœ‰æ•°æ®\n-&gt; DELETE FROM demo.dailystatistics\n-&gt; WHERE\n-&gt; salesdate = startdate;\n-&gt; -- æ’å…¥æ–°è®¡ç®—çš„æ•°æ®\n-&gt; INSERT into dailystatistics\n-&gt; (\n-&gt; salesdate,\n-&gt; itemnumber,\n-&gt; quantity,\n-&gt; actualvalue,\n-&gt; cost,\n-&gt; profit,\n-&gt; profitratio\n-&gt; )\n-&gt; SELECT\n-&gt; LEFT(b.transdate,10),\n-&gt; a.itemnumber,\n-&gt; SUM(a.quantity), -- æ•°é‡æ€»è®¡\n-&gt; SUM(a.salesvalue), -- é‡‘é¢æ€»è®¡\n-&gt; SUM(a.quantity*c.avgimportprice), -- è®¡ç®—æˆæœ¬\n-&gt; SUM(a.salesvalue-a.quantity*c.avgimportprice), -- è®¡ç®—æ¯›åˆ©\n-&gt; CASE sum(a.salesvalue) WHEN 0 THEN 0\n-&gt; ELSE round(sum(a.salesvalue-a.quantity*c.avgimportprice)/sum(a.salesvalue),4) END -- è®¡ç®—æ¯›åˆ©ç‡\n-&gt; FROM\n-&gt; demo.transactiondetails AS a\n-&gt; JOIN\n-&gt; demo.transactionhead AS b\n-&gt; ON (a.transactionid = b.transactionid)\n-&gt; JOIN\n-&gt; demo.goodsmaster c\n-&gt; ON (a.itemnumber=c.itemnumber)\n-&gt; WHERE\n-&gt; b.transdate&gt;startdate AND b.transdate&lt;enddate\n-&gt; GROUP BY\n-&gt; LEFT(b.transdate,10),a.itemnumber\n-&gt; ORDER BY\n-&gt; LEFT(b.transdate,10),a.itemnumber;\n-&gt; END\n-&gt; // -- è¯­å¥ç»“æŸï¼Œæ‰§è¡Œè¯­å¥\nQuery OK, 0 rows affected (0.01 sec)\n-&gt; DELIMITER ; -- æ¢å¤åˆ†éš”ç¬¦ä¸ºï¼›\n</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬çš„å­˜å‚¨è¿‡ç¨‹å°±åˆ›å»ºæˆåŠŸäº†ã€‚</p><p>åœ¨è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†å­˜å‚¨è¿‡ç¨‹çš„å‚æ•°å®šä¹‰å’Œç¨‹åºä½“ï¼Œè¿™äº›å…·ä½“æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬æ¥å­¦ä¹ ä¸‹ã€‚</p><h3>å­˜å‚¨è¿‡ç¨‹çš„å‚æ•°å®šä¹‰</h3><p>å­˜å‚¨è¿‡ç¨‹å¯ä»¥æœ‰å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰å‚æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå½“æˆ‘ä»¬é€šè¿‡å®¢æˆ·ç«¯æˆ–è€…åº”ç”¨ç¨‹åºè°ƒç”¨å­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™ï¼Œå¦‚æœéœ€è¦ä¸å­˜å‚¨è¿‡ç¨‹è¿›è¡Œæ•°æ®äº¤äº’ï¼Œæ¯”å¦‚ï¼Œå­˜å‚¨è¿‡ç¨‹éœ€è¦æ ¹æ®è¾“å…¥çš„æ•°å€¼ä¸ºåŸºç¡€è¿›è¡ŒæŸç§æ•°æ®å¤„ç†å’Œè®¡ç®—ï¼Œæˆ–è€…éœ€è¦æŠŠæŸä¸ªè®¡ç®—ç»“æœè¿”å›ç»™è°ƒç”¨å®ƒçš„å®¢æˆ·ç«¯æˆ–è€…åº”ç”¨ç¨‹åºï¼Œå°±éœ€è¦è®¾ç½®å‚æ•°ã€‚å¦åˆ™ï¼Œå°±ä¸ç”¨è®¾ç½®å‚æ•°ã€‚</p><p>å‚æ•°æœ‰3ç§ï¼Œåˆ†åˆ«æ˜¯INã€OUTå’ŒINOUTã€‚</p><ul>\n<li>INè¡¨ç¤ºè¾“å…¥çš„å‚æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹åªæ˜¯è¯»å–è¿™ä¸ªå‚æ•°çš„å€¼ã€‚å¦‚æœæ²¡æœ‰å®šä¹‰å‚æ•°ç§ç±»ï¼Œé»˜è®¤å°±æ˜¯INï¼Œè¡¨ç¤ºè¾“å…¥å‚æ•°ã€‚</li>\n<li>OUTè¡¨ç¤ºè¾“å‡ºçš„å‚æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒæŠŠæŸä¸ªè®¡ç®—ç»“æœå€¼èµ‹ç»™è¿™ä¸ªå‚æ•°ï¼Œæ‰§è¡Œå®Œæˆä¹‹åï¼Œè°ƒç”¨è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹çš„å®¢æˆ·ç«¯æˆ–è€…åº”ç”¨ç¨‹åºå°±å¯ä»¥è¯»å–è¿™ä¸ªå‚æ•°è¿”å›çš„å€¼äº†ã€‚</li>\n<li>INOUTè¡¨ç¤ºè¿™ä¸ªå‚æ•°æ—¢å¯ä»¥ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œåˆå¯ä»¥ä½œä¸ºè¾“å‡ºå‚æ•°ä½¿ç”¨ã€‚</li>\n</ul><p><strong>é™¤äº†å®šä¹‰å‚æ•°ç§ç±»ï¼Œè¿˜è¦å¯¹å‚æ•°çš„æ•°æ®ç±»å‹è¿›è¡Œå®šä¹‰</strong>ã€‚åœ¨è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªå‚æ•°transdate çš„æ•°æ®ç±»å‹æ˜¯TEXTã€‚è¿™ä¸ªå‚æ•°çš„ç”¨å¤„æ˜¯å‘Šè¯‰å­˜å‚¨è¿‡ç¨‹ï¼Œæˆ‘è¦å¤„ç†çš„æ˜¯å“ªä¸€å¤©çš„æ•°æ®ã€‚æˆ‘æ²¡æœ‰æŒ‡å®šå‚æ•°ç§ç±»æ˜¯INã€OUTæˆ–è€…INOUTï¼Œè¿™æ˜¯å› ä¸ºåœ¨MySQLä¸­ï¼Œ<strong>å¦‚æœä¸æŒ‡å®šå‚æ•°çš„ç§ç±»ï¼Œé»˜è®¤å°±æ˜¯INï¼Œè¡¨ç¤ºè¾“å…¥å‚æ•°</strong>ã€‚</p><p>çŸ¥é“äº†å‚æ•°ï¼Œä¸‹é¢æˆ‘å…·ä½“è®²è§£ä¸€ä¸‹è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹çš„ç¨‹åºä½“ã€‚å­˜å‚¨è¿‡ç¨‹çš„å…·ä½“æ“ä½œæ­¥éª¤éƒ½åŒ…å«åœ¨ç¨‹åºä½“é‡Œé¢ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ç¨‹åºä½“ä¸­SQLæ“ä½œçš„å†…å®¹ï¼Œå°±å¯ä»¥çŸ¥é“å­˜å‚¨è¿‡ç¨‹åˆ°åº•åœ¨åšä»€ä¹ˆã€‚</p><h3>å­˜å‚¨è¿‡ç¨‹çš„ç¨‹åºä½“</h3><p>ç¨‹åºä½“ä¸­åŒ…å«çš„æ˜¯å­˜å‚¨è¿‡ç¨‹éœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼Œä¸€èˆ¬é€šè¿‡å…³é”®å­—BEGINè¡¨ç¤ºSQLè¯­å¥çš„å¼€å§‹ï¼Œé€šè¿‡ENDè¡¨ç¤ºSQLè¯­å¥çš„ç»“æŸã€‚</p><p>åœ¨ç¨‹åºä½“çš„å¼€å§‹éƒ¨åˆ†ï¼Œæˆ‘å®šä¹‰äº†2ä¸ªå˜é‡ï¼Œåˆ†åˆ«æ˜¯startdateå’Œenddateã€‚å®ƒä»¬éƒ½æ˜¯DATETIMEç±»å‹ï¼Œä½œç”¨æ˜¯æ ¹æ®è¾“å…¥å‚æ•°transdateï¼Œè®¡ç®—å‡ºéœ€è¦ç­›é€‰çš„æ•°æ®çš„æ—¶é—´åŒºé—´ã€‚</p><p>åé¢çš„ä»£ç åˆ†3æ­¥å®Œæˆèµ·å§‹æ—¶é—´å’Œæˆªæ­¢æ—¶é—´çš„è®¡ç®—ï¼Œå¹¶ä¸”åˆ†åˆ«èµ‹å€¼ç»™å˜é‡startdateå’Œenddateã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œä½¿ç”¨DATE_FROMATï¼ˆï¼‰å‡½æ•°ï¼ŒæŠŠè¾“å…¥çš„å‚æ•°ï¼ŒæŒ‰ç…§YYYYå¹´MMæœˆDDæ—¥çš„æ ¼å¼è½¬æ¢æˆäº†æ—¥æœŸæ—¶é—´ç±»å‹æ•°æ®ï¼Œæ¯”å¦‚è¾“å…¥å‚æ•°æ˜¯â€œ2020-12-01â€ï¼Œé‚£ä¹ˆï¼Œè½¬æ¢æˆçš„æ—¥æœŸæ—¶é—´å€¼æ˜¯â€œ2020-12-01 00:00:00â€ï¼Œè¡¨ç¤º2020å¹´12æœˆ01æ—¥00ç‚¹00åˆ†00ç§’ã€‚</p><p>ç¬¬äºŒæ­¥ï¼ŒæŠŠç¬¬ä¸€æ­¥ä¸­è®¡ç®—å‡ºçš„å€¼ï¼Œä½œä¸ºèµ·å§‹æ—¶é—´èµ‹å€¼ç»™å˜é‡startdateã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼ŒæŠŠç¬¬ä¸€æ­¥ä¸­è®¡ç®—å‡ºçš„å€¼ï¼Œé€šè¿‡DATE_ADDï¼ˆï¼‰å‡½æ•°ï¼Œè®¡ç®—å‡º1å¤©ä»¥åçš„æ—¶é—´èµ‹å€¼ç»™å˜é‡enddateã€‚</p><p>è¿™æ ·ï¼Œæˆ‘å°±è·å¾—äº†éœ€è¦è®¡ç®—çš„é”€å”®æ—¶æ®µã€‚è®¡ç®—å‡ºäº†èµ·å§‹æ—¶é—´å’Œæˆªæ­¢æ—¶é—´ä¹‹åï¼Œæˆ‘ä»¬å…ˆåˆ é™¤éœ€è¦è®¡ç®—æ—¥æœŸçš„å•å“ç»Ÿè®¡æ•°æ®ï¼Œä»¥é˜²æ­¢æ•°æ®é‡å¤ã€‚æ¥ç€ï¼Œæˆ‘ä»¬é‡æ–°è®¡ç®—å•å“çš„é”€å”®ç»Ÿè®¡ï¼Œå¹¶ä¸”æŠŠè®¡ç®—çš„ç»“æœæ’å…¥åˆ°å•å“ç»Ÿè®¡è¡¨ã€‚</p><p>åœ¨è®¡ç®—å•å“é”€å”®ç»Ÿè®¡çš„æ—¶å€™ï¼Œä¹Ÿåˆ†ä¸º3æ­¥ï¼š</p><ol>\n<li>æŒ‰ç…§â€œæˆæœ¬=é”€å”®æ•°é‡Ã—å¹³å‡ä»·æ ¼â€çš„æ–¹å¼è®¡ç®—æˆæœ¬ï¼›</li>\n<li>æŒ‰ç…§â€œæ¯›åˆ©=é”€å”®é‡‘é¢ - æˆæœ¬â€çš„æ–¹å¼è®¡ç®—æ¯›åˆ©ï¼›</li>\n<li>æŒ‰ç…§â€œæ¯›åˆ©ç‡ = æ¯›åˆ© Ã·é”€å”®é‡‘é¢â€çš„æ–¹å¼è®¡ç®—æ¯›åˆ©ç‡ã€‚</li>\n</ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨CASEå‡½æ•°æ¥è§£å†³é”€å”®é‡‘é¢ä¸º0æ—¶è®¡ç®—æ¯›åˆ©çš„é—®é¢˜ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢è®¡ç®—å‡ºç°è¢«0é™¤è€ŒæŠ¥é”™çš„æƒ…å†µã€‚ä¸è¦ä»¥ä¸ºé”€å”®é‡‘é¢å°±ä¸€å®šå¤§äº0ï¼Œåœ¨å®é™…é¡¹ç›®è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°å› ä¸ºä¼˜æƒ è€Œå¯¼è‡´å®é™…é”€å”®é‡‘é¢ä¸º0çš„æƒ…å†µã€‚æˆ‘å»ºè®®ä½ åœ¨å®é™…å·¥ä½œä¸­ï¼ŒæŠŠè¿™äº›æç«¯æƒ…å†µéƒ½è€ƒè™‘åœ¨å†…ï¼Œæå‰è¿›è¡Œé˜²èŒƒï¼Œè¿™æ ·ä½ çš„ä»£ç æ‰èƒ½ç¨³å®šå¯é ã€‚</p><p>å­˜å‚¨è¿‡ç¨‹é€šè¿‡å¼€å§‹æ—¶å®šä¹‰çš„åˆ†éš”ç¬¦â€œ//â€ç»“æŸï¼ŒMySQLæ‰§è¡Œè¿™æ®µSQLè¯­å¥ï¼Œå°±åˆ›å»ºå‡ºäº†ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼šdemo.dailyoperation.æœ€åï¼Œä½ ä¸è¦å¿˜äº†æŠŠåˆ†éš”ç¬¦æ”¹å›åˆ°â€œï¼›â€ã€‚</p><p>åˆ›å»ºå®Œä¹‹åï¼Œæ€ä¹ˆçŸ¥é“æˆ‘ä»¬åˆ›å»ºçš„å­˜å‚¨è¿‡ç¨‹æ˜¯å¦æˆåŠŸäº†å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»‹ç»ä¸€ä¸‹æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹çš„æ–¹æ³•ã€‚</p><h2>å¦‚ä½•æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹ï¼Ÿ</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡SHOW CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹åç§°ï¼Œæ¥æŸ¥çœ‹åˆšåˆšåˆ›å»ºçš„å­˜å‚¨è¿‡ç¨‹ï¼š</p><pre><code>mysql&gt; SHOW CREATE PROCEDURE demo.dailyoperation \\G\n*************************** 1. row ***************************\nProcedure: dailyoperation      -- å­˜å‚¨è¿‡ç¨‹å\nsql_mode: STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION\nCreate Procedure: CREATE DEFINER=`root`@`localhost` PROCEDURE `dailyoperation`(transdate TEXT)   -- å­˜å‚¨è¿‡ç¨‹å\nBEGIN                              -- å¼€å§‹ç¨‹åºä½“\nDECLARE startdate,enddate DATETIME;\nSET startdate = date_format(transdate,'%Y-%m-%d');\nSET enddate = date_add(startdate,INTERVAL 1 DAY);\nDELETE FROM demo.dailystatistics   -- åˆ é™¤é‡å¤\nWHERE\nsalesdate = startdate;\nINSERT into dailystatistics        -- å°†è®¡ç®—ç»“æœæ’å…¥æ¯æ—¥ç»Ÿè®¡è¡¨\n(\nsalesdate,\nitemnumber,\nquantity,\nactualvalue,\ncost,\nprofit,\nprofitratio\n)\nSELECT\nLEFT(b.transdate,10),\na.itemnumber,\nSUM(a.quantity),\nSUM(a.salesvalue),\nSUM(a.quantity*c.avgimportprice),\nSUM(a.salesvalue-a.quantity*c.avgimportprice),\nCASE sum(a.salesvalue) WHEN 0 THEN 0\nELSE round(sum(a.salesvalue-a.quantity*c.avgimportprice)/sum(a.salesvalue),4) END\nFROM\ndemo.transactiondetails AS a\nJOIN\ndemo.transactionhead AS b\nON (a.transactionid = b.transactionid)\nJOIN\ndemo.goodsmaster c\nON (a.itemnumber=c.itemnumber)\nWHERE\nb.transdate&gt;startdate AND b.transdate&lt;enddate\nGROUP BY\nLEFT(b.transdate,10),a.itemnumber\nORDER BY\nLEFT(b.transdate,10),a.itemnumber;\nEND                               -- ç»“æŸç¨‹åºä½“\ncharacter_set_client: gbk         -- é‡‡ç”¨çš„å­—ç¬¦é›†gbk\ncollation_connection: gbk_chinese_ci  -- è¿æ¥æ ¡å¯¹é‡‡ç”¨çš„å­—ç¬¦é›†\nDatabase Collation: utf8mb4_0900_ai_ci -- æ•°æ®æ ¡å¯¹å­—ç¬¦é›†\n1 row in set (0.00 sec)\n</code></pre><h2>å¦‚ä½•è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼Ÿ</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥å°è¯•è°ƒç”¨ä¸€ä¸‹è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œå¹¶ä¸”ç»™å®ƒä¼ é€’ä¸€ä¸ªå‚æ•°â€œ2020-12-01â€ï¼Œä¹Ÿå°±æ˜¯è®¡ç®—2020å¹´12æœˆ01æ—¥çš„å•å“ç»Ÿè®¡æ•°æ®ï¼š</p><pre><code>mysql&gt; CALL demo.dailyoperation('2020-12-01');\nQuery OK, 2 rows affected (0.03 sec)\n</code></pre><p>å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œç»“æœæç¤ºâ€œQuery OKâ€ï¼Œè¡¨ç¤ºæ‰§è¡ŒæˆåŠŸäº†ã€‚â€œ2 rows affectedâ€è¡¨ç¤ºæ‰§è¡Œçš„ç»“æœå½±å“äº†2æ¡æ•°æ®è®°å½•ã€‚</p><p>æˆ‘ä»¬ç”¨SELECTè¯­å¥æ¥æŸ¥çœ‹ä¸€ä¸‹å•å“ç»Ÿè®¡è¡¨ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æŠŠå•å“ç»Ÿè®¡çš„ç»“æœå­˜å…¥å•å“ç»Ÿè®¡è¡¨ä¸­ã€‚</p><pre><code>mysql&gt; SELECT *                     -- æŸ¥è¯¢å•å“ç»Ÿè®¡è¡¨ä¸­çš„æ•°æ®\n-&gt; FROM demo.dailystatistics;\n+----+------------+----------+-------------+--------+--------+-------------+---------------------+\n| id | itemnumber | quantity | actualvalue | cost | profit | profitratio | salesdate |\n+----+------------+----------+-------------+--------+--------+-------------+---------------------+\n| 13 | 1 | 3.000 | 267.00 | 100.50 | 166.50 | 0.6236 | 2020-12-01 00:00:00 |         -- ç¼–å·æ˜¯1çš„å•†å“ï¼Œå•å“ç»Ÿè®¡ç»“æœ\n| 14 | 2 | 2.000 | 10.00 | 7.00 | 3.00 | 0.3000 | 2020-12-01 00:00:00 |                  -- ç¼–å·æ˜¯2çš„å•†å“ï¼Œå•å“ç»Ÿè®¡çš„ç»“æœ\n+----+------------+----------+-------------+--------+--------+-------------+---------------------+\n2 rows in set (0.00 sec)\n</code></pre><p>çœ‹åˆ°äº†å—ï¼Ÿæˆ‘ä»¬å·²ç»èƒ½å¤Ÿåœ¨å•å“ç»Ÿè®¡è¡¨ä¸­ï¼ŒæŸ¥è¯¢åˆ°2020å¹´12æœˆ01æ—¥çš„å•å“ç»Ÿè®¡ç»“æœäº†ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬çš„å­˜å‚¨è¿‡ç¨‹è¢«æ‰§è¡Œäº†ï¼Œå®ƒè®¡ç®—å‡ºäº†æˆ‘ä»¬éœ€è¦çš„å•å“ç»Ÿè®¡ç»“æœï¼Œå¹¶ä¸”æŠŠç»Ÿè®¡ç»“æœå­˜å…¥äº†å•å“ç»Ÿè®¡è¡¨ä¸­ã€‚</p><h2>å¦‚ä½•ä¿®æ”¹å’Œåˆ é™¤å­˜å‚¨è¿‡ç¨‹ï¼Ÿ</h2><p>å¦‚æœä½ éœ€è¦ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹çš„å†…å®¹ï¼Œæˆ‘å»ºè®®ä½ åœ¨Workbenchä¸­æ“ä½œã€‚è¿™æ˜¯å› ä¸ºä½ å¯ä»¥åœ¨é‡Œé¢ç›´æ¥ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹ï¼Œè€Œå¦‚æœç”¨SQLå‘½ä»¤æ¥ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹ï¼Œå°±å¿…é¡»åˆ é™¤å­˜å‚¨è¿‡ç¨‹å†é‡æ–°åˆ›å»ºï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨Workbenchä¸­ä¿®æ”¹æ¯”è¾ƒç®€å•ã€‚</p><p>å…·ä½“çš„åšæ³•æ˜¯ï¼šåœ¨å·¦è¾¹çš„å¯¼èˆªæ ï¼Œæ‰¾åˆ°æ•°æ®åº“demoï¼Œå±•å¼€ä¹‹åï¼Œæ‰¾åˆ°å­˜å‚¨è¿‡ç¨‹stored procedureï¼Œç„¶åæ‰¾åˆ°æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„dailyoperationï¼Œç‚¹å‡»å³è¾¹çš„è®¾è®¡æŒ‰é’®ï¼Œå°±å¯ä»¥åœ¨å³è¾¹çš„å·¥ä½œåŒºè¿›è¡Œä¿®æ”¹äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/98/bb/98058c5a4b4f2517ef83d22895dd96bb.png?wh=1273*633\" alt=\"\"></p><p>ä¿®æ”¹å®Œæˆä¹‹åï¼Œç‚¹å‡»å·¥ä½œåŒºå³ä¸‹æ–¹çš„æŒ‰é’®â€œApplyâ€ï¼Œä¿å­˜ä¿®æ”¹ã€‚</p><p>åœ¨MySQLä¸­ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸åƒæ™®é€šçš„ç¼–ç¨‹è¯­è¨€ï¼ˆæ¯”å¦‚VC++ã€Javaç­‰ï¼‰é‚£æ ·æœ‰ä¸“é—¨çš„é›†æˆå¼€å‘ç¯å¢ƒã€‚å› æ­¤ï¼Œä½ å¯ä»¥é€šè¿‡SELECTè¯­å¥ï¼ŒæŠŠç¨‹åºæ‰§è¡Œçš„ä¸­é—´ç»“æœæŸ¥è¯¢å‡ºæ¥ï¼Œæ¥è°ƒè¯•ä¸€ä¸ªSQLè¯­å¥çš„æ­£ç¡®æ€§ã€‚è°ƒè¯•æˆåŠŸä¹‹åï¼ŒæŠŠSELECTè¯­å¥åç§»åˆ°ä¸‹ä¸€ä¸ªSQLè¯­å¥ä¹‹åï¼Œå†è°ƒè¯•ä¸‹ä¸€ä¸ªSQLè¯­å¥ã€‚è¿™æ ·é€æ­¥æ¨è¿›ï¼Œå°±å¯ä»¥å®Œæˆå¯¹å­˜å‚¨è¿‡ç¨‹ä¸­æ‰€æœ‰æ“ä½œçš„è°ƒè¯•äº†ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠå­˜å‚¨è¿‡ç¨‹ä¸­çš„SQLè¯­å¥å¤åˆ¶å‡ºæ¥ï¼Œé€æ®µå•ç‹¬è°ƒè¯•ã€‚</p><p>åˆ é™¤å­˜å‚¨è¿‡ç¨‹å¾ˆç®€å•ï¼Œä½ çŸ¥é“å…·ä½“çš„è¯­æ³•å°±è¡Œäº†ï¼š</p><pre><code>DROP PROCEDURE å­˜å‚¨è¿‡ç¨‹åç§°;\n</code></pre><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†åˆ›å»ºã€æŸ¥çœ‹ã€ä¿®æ”¹å’Œåˆ é™¤å­˜å‚¨è¿‡ç¨‹çš„å…·ä½“æ–¹æ³•ã€‚</p><p>å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç‚¹å°±æ˜¯æ‰§è¡Œæ•ˆç‡é«˜ï¼Œè€Œä¸”æ›´åŠ å®‰å…¨ï¼Œä¸è¿‡ï¼Œå®ƒä¹Ÿæœ‰ç€è‡ªèº«çš„ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯å¼€å‘å’Œè°ƒè¯•çš„æˆæœ¬æ¯”è¾ƒé«˜ï¼Œè€Œä¸”ä¸å¤ªå®¹æ˜“ç»´æŠ¤ã€‚</p><p>åœ¨å­˜å‚¨è¿‡ç¨‹å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œè™½ç„¶ä¹Ÿæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·å¯ä»¥å¯¹å­˜å‚¨è¿‡ç¨‹è¿›è¡Œè°ƒè¯•ï¼Œä½†è¦æ”¶è´¹ã€‚æˆ‘å»ºè®®ä½ é€šè¿‡SELECTè¯­å¥è¾“å‡ºå˜é‡å€¼çš„åŠæ³•è¿›è¡Œè°ƒè¯•ï¼Œè™½ç„¶æœ‰ç‚¹éº»çƒ¦ï¼Œä½†æ˜¯æˆæœ¬ä½ï¼Œè€Œä¸”ç®€å•å¯é ã€‚å¦‚æœä½ çš„å­˜å‚¨è¿‡ç¨‹éœ€è¦éšäº§å“ä¸€èµ·åˆ†å‘ï¼Œå¯ä»¥è€ƒè™‘æŠŠè„šæœ¬æ”¾åœ¨å®‰è£…ç¨‹åºä¸­ï¼Œåœ¨äº§å“å®‰è£…çš„è¿‡ç¨‹ä¸­åˆ›å»ºéœ€è¦çš„å­˜å‚¨è¿‡ç¨‹ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¯·å†™ä¸€ä¸ªç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼Œè¦æ±‚æ˜¯å®šä¹‰2ä¸ªå‚æ•°ï¼Œä¸€ä¸ªè¾“å…¥å‚æ•°aï¼Œæ•°æ®ç±»å‹æ˜¯INTï¼›å¦ä¸€ä¸ªè¾“å‡ºå‚æ•°æ˜¯bï¼Œç±»å‹æ˜¯INTã€‚ç¨‹åºä½“å®Œæˆçš„æ“ä½œæ˜¯ï¼šb = a + 1ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµè®¨è®ºã€‚å¦‚æœä½ è§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ä½ æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–åŒäº‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","comments":[{"had_liked":false,"id":293150,"user_name":"æœ±æ™“å³°","can_delete":false,"product_type":"c1","uid":2356905,"ip_address":"","ucode":"D2F84F44329C29","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","comment_is_top":true,"comment_ctime":1621244148,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"9.2233720384759992e+18","product_id":100073201,"comment_content":"ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ™“å³°ï¼Œä¸‹é¢æˆ‘å°±æ¥å…¬å¸ƒä¸€ä¸‹ä¸ŠèŠ‚è¯¾æ€è€ƒé¢˜çš„ç­”æ¡ˆï¼š<br><br>ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†è§†å›¾ã€‚ä¸‹é¢æ˜¯æ€è€ƒé¢˜çš„ç­”æ¡ˆï¼š<br><br>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºé—¨ç¥¨ä¿¡æ¯è¡¨ï¼ˆdemo.ticketsï¼‰å’Œç±»åˆ«ä¿¡æ¯è¡¨ï¼ˆdemo.ticketkindï¼‰<br><br>CREATE TABLE demo.tickets (<br>    id INT PRIMARY KEY AUTO_INCREMENT,<br>    tname TEXT,<br>    typeid INT,<br>    balance INT<br>);<br><br>CREATE TABLE demo.ticketkind (<br>    typeid INT PRIMARY KEY AUTO_INCREMENT,<br>    opentime TIME,<br>    closetime TIME<br>);<br><br>ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºè§†å›¾ï¼š<br><br>CREATE VIEW demo.vTickets AS<br>    SELECT <br>        a.tname, a.balance<br>    FROM<br>        demo.tickets AS a<br>            JOIN<br>        demo.ticketkind AS b ON (a.typeid = b.typeid)<br>    WHERE<br>        NOW() &gt; b.opentime<br>            AND NOW() &lt; b.closetime;<br><br>","like_count":1,"discussions":[{"author":{"id":1134381,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/2d/7b5ed6c2.jpg","nickname":"ç« æ˜Ÿ","note":"","ucode":"6A4BC852BE7025","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379838,"discussion_content":"å¼€é—¨å‰ 30 åˆ†é’Ÿå¼€å§‹å”®ç¥¨ï¼Œç»“æŸå‰ 30 åˆ†é’Ÿåœæ­¢å”®ç¥¨.NOW() > b.opentime\nAND NOW() < b.closetime  è¿™ä¸ªæ¡ä»¶æ²¡æœ‰ä½“ç°è¿™ä¸ªï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1624182041,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1701572,"avatar":"https://static001.geekbang.org/account/avatar/00/19/f6/c4/e14686d4.jpg","nickname":"shk1230","note":"","ucode":"9E39279C23FF8F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555952,"discussion_content":"where NOW() &gt;date_add(b.opentime,INTERVAL -0.5 hour)----opentime 30åˆ†é’Ÿå‰å¯å”®ç¥¨ï¼Œåé¢çš„andæ¡ä»¶è¯­å¥æ”¹æˆb.closetimeï¼Œä¸”å˜æˆäº†å°äºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647138776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287995,"user_name":"undefined","can_delete":false,"product_type":"c1","uid":1100750,"ip_address":"","ucode":"768098DBDBE333","user_header":"https://static001.geekbang.org/account/avatar/00/10/cb/ce/d9e00eb5.jpg","comment_is_top":false,"comment_ctime":1618247043,"is_pvip":false,"replies":[{"id":"106403","content":"è¿˜æ˜¯è¦æ ¹æ®å®é™…çš„åº”ç”¨åœºæ™¯æ¥å†³å®šæ˜¯å¦ä½¿ç”¨","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621504636,"ip_address":"","comment_id":287995,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27388050819","product_id":100073201,"comment_content":"#ä¸è´Ÿè´£ä»»çš„è¯„è®º#<br><br>äº’è”ç½‘å…¬å¸å¤§éƒ½ä¸çˆ±ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œåœ¨é˜¿é‡Œå·´å·´å‘å¸ƒçš„Javaå¼€å‘æ‰‹å†Œä¸­ï¼Œæ˜ç¡®ç¦æ­¢äº†å­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨ã€‚<br><br>&quot;ã€å¼ºåˆ¶ã€‘ç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œå­˜å‚¨è¿‡ç¨‹éš¾ä»¥è°ƒè¯•å’Œæ‰©å±•ï¼Œæ›´æ²¡æœ‰ç§»æ¤æ€§ã€‚&quot;<br><br>ä¸»è¦åŸå› å¤§è‡´ä¸ºï¼šä¸æ˜“æµ‹è¯•ï¼Œéš¾ä»¥è°ƒè¯•ï¼Œç‰ˆæœ¬æ§åˆ¶å›°éš¾â€¦â€¦<br><br>ä¸è¿‡å¯¹äºå•†ç”¨æ•°æ®åº“å’Œéƒ¨åˆ†ä¼ ç»Ÿè½¯ä»¶ä¸šåŠ¡ï¼Œè¿˜æ˜¯å€¼å¾—ä½¿ç”¨çš„ã€‚","like_count":7,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518482,"discussion_content":"è¿˜æ˜¯è¦æ ¹æ®å®é™…çš„åº”ç”¨åœºæ™¯æ¥å†³å®šæ˜¯å¦ä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621504636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289034,"user_name":"floating","can_delete":false,"product_type":"c1","uid":1834974,"ip_address":"","ucode":"6E701A24805A00","user_header":"https://static001.geekbang.org/account/avatar/00/1b/ff/de/075d2c8e.jpg","comment_is_top":false,"comment_ctime":1618824088,"is_pvip":false,"replies":[{"id":"106446","content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621560639,"ip_address":"","comment_id":289034,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10208758680","product_id":100073201,"comment_content":"è¯¾åæ€è€ƒé¢˜ï¼š<br><br>mysql&gt; drop procedure if exists demo.proc_adder<br>    -&gt; ;<br>Query OK, 0 rows affected, 1 warning (0.00 sec)<br><br>mysql&gt; delimiter &#47;&#47;<br>mysql&gt; create procedure demo.proc_adder(in a int, out b int)<br>    -&gt; begin<br>    -&gt; set b = a + 1;<br>    -&gt; end<br>    -&gt; &#47;&#47;<br>Query OK, 0 rows affected (0.01 sec)<br><br>mysql&gt; delimiter ;<br>mysql&gt; set @a = 5;<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; call demo.proc_adder(@a, @b);<br>Query OK, 0 rows affected (0.00 sec)<br><br>mysql&gt; select @b as sum;<br>+------+<br>| sum  |<br>+------+<br>|    6 |<br>+------+<br>1 row in set (0.00 sec)","like_count":2,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518799,"discussion_content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621560639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1701572,"avatar":"https://static001.geekbang.org/account/avatar/00/19/f6/c4/e14686d4.jpg","nickname":"shk1230","note":"","ucode":"9E39279C23FF8F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555958,"discussion_content":"--å®šä¹‰å­˜å‚¨è¿‡ç¨‹\nCREATE PROCEDURE demo.digitaloperation(in a int,out b int)\nBEGIN\nset b = a + 1;\nEND\n--è°ƒç”¨\ncall demo.digitaloperation(5,@b);\n--ç»“æœå±•ç¤º\nselect @b as b;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647141563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288351,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1618417725,"is_pvip":false,"replies":[{"id":"106406","content":"æ„Ÿè°¢æŒ‡æ­£ï¼Œè¿™ä¸ªåœ°æ–¹ç¡®å®åº”è¯¥æ˜¯TEXTç±»å‹ï¼Œå·²ç»æ”¹è¿‡äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621505139,"ip_address":"","comment_id":288351,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10208352317","product_id":100073201,"comment_content":"ä¸€ä¸ªç•ªèŒ„é’Ÿï¼Œè¡¥ä¸Šè¿™ä¸€è®²çš„å†…å®¹ã€‚æœ€è¿‘å®åœ¨å¤ªå¿™äº†ã€‚<br><br>å¦å¤–ï¼Œéœ€è¦æŒ‡å‡ºè¿™é‡Œè€å¸ˆçš„å­˜å‚¨è¿‡ç¨‹ä»£ç ä¸­çš„å‚æ•°ç±»å‹æ˜¯TEXTï¼Œè€Œä¸æ˜¯æ–‡ä¸­æ‰€è¯´çš„DATETIMEç±»å‹ã€‚<br><br>åƒè§†å›¾ã€å­˜å‚¨è¿‡ç¨‹ã€æ¸¸æ ‡......è¿™äº›æ¦‚å¿µä»ä¼´éšMySQLå¾ˆä¹…äº†ï¼Œè™½ç„¶å®é™…å¼€å‘ä¸­å¾ˆå°‘ç”¨åˆ°ã€‚ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¿…é¡»äº†è§£ï¼Œå»ºç«‹èµ·è‡ªå·±å®Œæ•´çš„çŸ¥è¯†ä½“ç³»ã€‚","like_count":3,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518598,"discussion_content":"æ„Ÿè°¢æŒ‡æ­£ï¼Œè¿™ä¸ªåœ°æ–¹ç¡®å®åº”è¯¥æ˜¯TEXTç±»å‹ï¼Œå·²ç»æ”¹è¿‡äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621505139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288192,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1618358863,"is_pvip":false,"replies":[{"id":"106404","content":"å¥½çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621504666,"ip_address":"","comment_id":288192,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5913326159","product_id":100073201,"comment_content":"<br>æœ¬èŠ‚è¯¾éœ€è¦æŒæ¡å…³äºå­˜å‚¨è¿‡ç¨‹çš„<br>åˆ›å»º&#47;æŸ¥çœ‹&#47;è°ƒç”¨&#47;ä¿®æ”¹&#47;åˆ é™¤&#47;è°ƒè¯•<br>å…¶ä¸­è°ƒè¯•éœ€è¦é‡ç‚¹å…³æ³¨<br>","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518542,"discussion_content":"å¥½çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621504666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343942,"user_name":"Geek_3254e0","can_delete":false,"product_type":"c1","uid":2858071,"ip_address":"","ucode":"5491370FDA2CAF","user_header":"","comment_is_top":false,"comment_ctime":1651132983,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651132983","product_id":100073201,"comment_content":"CREATE TABLE IF NOT EXISTS aplus1(<br>a VARCHAR(5),<br>b VARCHAR(5)<br>)ENGINE=INNODB DEFAULT CHARSET=utf8<br><br>INSERT INTO aplus1 VALUES (1,NULL),(2,5),(4,8),(0,3)<br><br>SELECT * FROM aplus1;<br><br>TRUNCATE TABLE aplus1;<br><br>TRUNCATE TABLE bplus;<br><br><br>CREATE TABLE IF NOT EXISTS bplus(<br>a VARCHAR(5),<br>b VARCHAR(5)<br>)ENGINE=INNODB DEFAULT CHARSET=utf8<br><br><br>CREATE PROCEDURE plus8()<br>BEGIN<br>INSERT INTO bplus<br>(<br>a,<br>b<br>)<br>SELECT<br>c.a,<br>SUM(c.a+1)<br>FROM aplus1 c<br>GROUP BY c.a;<br>END<br><br>CALL plus8();<br>SELECT * from bplus;","like_count":0},{"had_liked":false,"id":302187,"user_name":"Jun","can_delete":false,"product_type":"c1","uid":1608959,"ip_address":"","ucode":"48B7D8DDAE9CB6","user_header":"https://static001.geekbang.org/account/avatar/00/18/8c/ff/9edc274f.jpg","comment_is_top":false,"comment_ctime":1626130880,"is_pvip":false,"replies":[{"id":"110392","content":"ä¸»è¦æ˜¯å› ä¸ºTEXTç±»å‹æ¯”è¾ƒæ–¹ä¾¿è°ƒè¯•å’Œè°ƒç”¨ï¼Œ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1627873953,"ip_address":"","comment_id":302187,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1626130880","product_id":100073201,"comment_content":"è€å¸ˆèƒ½å¦è§£é‡Šä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆè¾“å…¥å‚æ•°trandateçš„ç±»å‹ç”¨textè€Œä¸æ˜¯date?","like_count":1,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523214,"discussion_content":"ä¸»è¦æ˜¯å› ä¸ºTEXTç±»å‹æ¯”è¾ƒæ–¹ä¾¿è°ƒè¯•å’Œè°ƒç”¨ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627873953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1448564,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1a/74/8f7f8786.jpg","nickname":"GLADIATOR","note":"","ucode":"6FE14E0BCD6240","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":392358,"discussion_content":"TEXTç±»å‹è¦æ…ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630980584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296365,"user_name":"è¿½å¿†ä¼¼æ°´å¹´å","can_delete":false,"product_type":"c1","uid":1160192,"ip_address":"","ucode":"C1D7C0DD7E7411","user_header":"https://static001.geekbang.org/account/avatar/00/11/b4/00/661fb98d.jpg","comment_is_top":false,"comment_ctime":1622941755,"is_pvip":true,"replies":[{"id":"109146","content":"éå¸¸æ„Ÿè°¢ä½ çš„è®¤çœŸé˜…è¯»ã€‚<br>1. è¿™ä¸ªåœ°æ–¹ç”¨â€œ=â€æ¥åŒ…å«00:00:00æ—¶åˆ»ï¼Œæ˜¯æ›´åŠ ä¸¥è°¨çš„ï¼Œæ–‡ç¨¿çš„ä¾‹å­ä¸­ï¼Œç”±äºå®¢æˆ·ä¸å­˜åœ¨00:00:00æ—¶åˆ»è¥ä¸šçš„æƒ…å†µï¼Œæ‰€ä»¥æ²¡æœ‰æŠŠè¿™ä¸ªæ—¶åˆ»åŒ…å«è¿›å»<br>2. ç¡®å®æ˜¯è®¡ç®—æ¯›åˆ©ç‡æ—¶æ‰ä¼šå‡ºç°è¢«é›¶é™¤çš„é—®é¢˜ï¼Œæˆ‘å·²ç»è¯·åå°çº æ­£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1625717022,"ip_address":"","comment_id":296365,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622941755","product_id":100073201,"comment_content":"åœ¨å¯¹æ—¶é—´è¿›è¡Œåˆ¤æ–­é‚£é‡Œï¼Œâ€œb.transdate&gt;startdate AND b.transdate&lt;enddateâ€ è¿™æ¡è¯­å¥æ¼æ‰äº†å½“å¤© 00:00:00 è¿™ä¸ªæ—¶åˆ»çš„è®°å½•ï¼Œæ˜¯ä¸æ˜¯æ”¹å†™æˆ â€œb.transdate&gt;=startdate AND b.transdate&lt;enddateâ€ æ›´åˆé€‚ä¸€äº›ï¼Ÿ<br><br>å¦å¤–â€œè¿™é‡Œæˆ‘ä½¿ç”¨ CASE å‡½æ•°æ¥è§£å†³é”€å”®é‡‘é¢ä¸º 0 æ—¶è®¡ç®—æ¯›åˆ©çš„é—®é¢˜â€ï¼Œè¿™é‡Œåº”è¯¥æ˜¯è§£å†³é”€å”®é‡‘é¢ä¸º 0 æ—¶ï¼Œè®¡ç®—æ¯›åˆ©ç‡çš„é—®é¢˜å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521413,"discussion_content":"éå¸¸æ„Ÿè°¢ä½ çš„è®¤çœŸé˜…è¯»ã€‚\n1. è¿™ä¸ªåœ°æ–¹ç”¨â€œ=â€æ¥åŒ…å«00:00:00æ—¶åˆ»ï¼Œæ˜¯æ›´åŠ ä¸¥è°¨çš„ï¼Œæ–‡ç¨¿çš„ä¾‹å­ä¸­ï¼Œç”±äºå®¢æˆ·ä¸å­˜åœ¨00:00:00æ—¶åˆ»è¥ä¸šçš„æƒ…å†µï¼Œæ‰€ä»¥æ²¡æœ‰æŠŠè¿™ä¸ªæ—¶åˆ»åŒ…å«è¿›å»\n2. ç¡®å®æ˜¯è®¡ç®—æ¯›åˆ©ç‡æ—¶æ‰ä¼šå‡ºç°è¢«é›¶é™¤çš„é—®é¢˜ï¼Œæˆ‘å·²ç»è¯·åå°çº æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625717022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292360,"user_name":"èœé¸ŸğŸ¤è¦å…ˆé£","can_delete":false,"product_type":"c1","uid":1202379,"ip_address":"","ucode":"56668DB891F7BC","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/cb/daf94c0e.jpg","comment_is_top":false,"comment_ctime":1620792386,"is_pvip":false,"replies":[{"id":"106537","content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621567182,"ip_address":"","comment_id":292360,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1620792386","product_id":100073201,"comment_content":"delimiter &#47;&#47;<br>create procedure aAddB (in a int,out b int)<br>begin<br>set b = a+1;<br>end <br>&#47;&#47;<br>delimiter ;<br><br>set @b = 0;<br>call aAddB(1,@b);<br>begin","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519796,"discussion_content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621567182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289246,"user_name":"Sinvi","can_delete":false,"product_type":"c1","uid":1064018,"ip_address":"","ucode":"2A90976980CA3C","user_header":"https://static001.geekbang.org/account/avatar/00/10/3c/52/5951ffb4.jpg","comment_is_top":false,"comment_ctime":1618931796,"is_pvip":false,"replies":[{"id":"106452","content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æœ±æ™“å³°","uid":"2356905","ctime":1621560795,"ip_address":"","comment_id":289246,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618931796","product_id":100073201,"comment_content":"DELIMITER &#47;&#47;<br>CREATE PROCEDURE sum_two_num(a INT, INOUT b INT)<br>BEGIN<br>    select a + 1 into b;<br>END &#47;&#47;<br>DELIMITER ;<br><br>call sum_two_num(10, @b);<br>select @b;","like_count":0,"discussions":[{"author":{"id":2356905,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLZKoB7sooIiaCHqcdNGI97WI3ZJLJph4mibIiat1qRvrBmkicZTEYvyT5iax1vlLFFgk2xgUibmnWvkicWA/132","nickname":"æœ±æ™“å³°","note":"","ucode":"D2F84F44329C29","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518861,"discussion_content":"è¯·å‚è€ƒæ€è€ƒé¢˜ç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621560795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}