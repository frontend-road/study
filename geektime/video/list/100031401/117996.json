{"id":117996,"title":"56 | 集中异常监控和Sentry","content":"<ul>\n<li>\n<p>代码：<a href=\"https://gitee.com/geektime-geekbang/staffjoy\">https://gitee.com/geektime-geekbang/staffjoy</a></p>\n</li>\n<li>\n<p>课件：<a href=\"https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ\">https://pan.baidu.com/s/1Q7eP3yZ1Vm8J2nhle5RzTQ</a> 提取码: 1aeh</p>\n</li>\n</ul>","comments":[{"had_liked":false,"id":251179,"user_name":"何小事儿","can_delete":false,"product_type":"c3","uid":1015752,"ip_address":"","ucode":"1EA5F37230B032","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/c8/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1601390239,"is_pvip":false,"replies":[{"id":91885,"content":"和人一样，工具也有专长专攻，ELK是通用数据存储和查询服务，专长是基于关键字的海量搜索，同时通过搭配一些插件以后，它也可以做一些异常日志监控之类的工作，但这个不是ELK的专长。\n\nSenty是专门用来干异常日志监控的，它的核心就是围绕异常日志来建模和设计的，它有很多的异常日志监控特性，包括智能错误分析，归类汇总，自动分配告警到相关团队等等，这些虽然理论上ELK也能实现，但是实现成本比较高。\n\n建议详细阅读sentry.io的官方文档，然后实际本地安装尝试一下。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1601477442,"ip_address":"","comment_id":251179,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"ELK 划分了日志级别后查询也很方便啊，kibana的watcher的告警配置也有webhook也不错。所以问题是什么情况才会用sentry呢？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506406,"discussion_content":"和人一样，工具也有专长专攻，ELK是通用数据存储和查询服务，专长是基于关键字的海量搜索，同时通过搭配一些插件以后，它也可以做一些异常日志监控之类的工作，但这个不是ELK的专长。\n\nSenty是专门用来干异常日志监控的，它的核心就是围绕异常日志来建模和设计的，它有很多的异常日志监控特性，包括智能错误分析，归类汇总，自动分配告警到相关团队等等，这些虽然理论上ELK也能实现，但是实现成本比较高。\n\n建议详细阅读sentry.io的官方文档，然后实际本地安装尝试一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601477442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015752,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7f/c8/abb7bfe3.jpg","nickname":"何小事儿","note":"","ucode":"1EA5F37230B032","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312217,"discussion_content":"目前后端已有稳定的ELK ，您所说的成本也投入过了。可否在前端也用它搭建？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602631232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221465,"user_name":"阿斯蒂芬","can_delete":false,"product_type":"c3","uid":1024164,"ip_address":"","ucode":"61D5E3BDA4EBC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg","comment_is_top":false,"comment_ctime":1590503650,"is_pvip":false,"replies":[{"id":81764,"content":"Sentry是一个很不错的错误监控平台，深入研究可以学到不少技术和设计思想。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1590593628,"ip_address":"","comment_id":221465,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"想起N年前做了一套“日志监控系统”，定时扫描日志，对日志内容进行分析，聚合，根据频次，重要程度等做邮件之类的告警，其实细节还不少，想不到现在都有这么智能化的系统了，是该好好利用，感谢老师分享","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496461,"discussion_content":"Sentry是一个很不错的错误监控平台，深入研究可以学到不少技术和设计思想。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590593628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126222,"user_name":"John","can_delete":false,"product_type":"c3","uid":1020861,"ip_address":"","ucode":"E4ADF8488953FB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/93/bd/f3977ebb.jpg","comment_is_top":false,"comment_ctime":1566351286,"is_pvip":false,"replies":[{"id":46765,"content":"Sentry是异常监控(error tracking)和告警平台，和普通日志比起来，异常日志相对少。Sentry可以独立部署，内部有各种优化(缓存&#47;异步&#47;限流&#47;分组等)，保证高性能处理异常日志。\n\n如果要做普通日志采集或者分析的话，ELK是不错选择，ELK可以分布式部署，根据你的容量可以按需扩容。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566389339,"ip_address":"","comment_id":126222,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"波波 這個logging 怎麼能保證performance呢 尤其如果需要實時進行數據分析的話 比如每秒transaction特別大 我又需要用elk進行實時數據分析 謝謝","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463890,"discussion_content":"Sentry是异常监控(error tracking)和告警平台，和普通日志比起来，异常日志相对少。Sentry可以独立部署，内部有各种优化(缓存/异步/限流/分组等)，保证高性能处理异常日志。\n\n如果要做普通日志采集或者分析的话，ELK是不错选择，ELK可以分布式部署，根据你的容量可以按需扩容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566389339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1104850,"avatar":"https://static001.geekbang.org/account/avatar/00/10/db/d2/e29f8834.jpg","nickname":"lidashuang","note":"","ucode":"560ABE8032760E","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288988,"discussion_content":"不要当日志系统用啊，这个是处理报警的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593952089,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191146,"user_name":"钱","can_delete":false,"product_type":"c3","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1584749523,"is_pvip":false,"replies":[{"id":73433,"content":"sentry一个好东东，推荐使用。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1584792551,"ip_address":"","comment_id":191146,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"统一异常监控平台——sentry\n","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488123,"discussion_content":"sentry一个好东东，推荐使用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584792551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351632,"user_name":"穿针土豆丝","can_delete":false,"product_type":"c3","uid":1275424,"ip_address":"","ucode":"5DA3BDDE5162E4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/aiaO77mTsCalcia49ElevPn988pgwcL3rD5ic1DTD6E8rbAwfmguiaPsibHicsYGQID7VbmD21GUAV9bbuNMfDhDGGyg/132","comment_is_top":false,"comment_ctime":1658028559,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"没想到还有这种好东西，我们目前的方式是将异常日志，通过运维落到kafka里面，然后异步的去消费，然后邮件通知。在线查看就通过kibana🤣","like_count":0}]}