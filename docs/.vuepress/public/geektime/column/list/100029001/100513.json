{"id":100513,"title":"09 | HTTP报文是什么样子的？","content":"<p>在上一讲里，我们在本机的最小化环境了做了两个HTTP协议的实验，使用Wireshark抓包，弄清楚了HTTP协议基本工作流程，也就是“请求-应答”“一发一收”的模式。</p><p>可以看到，HTTP的工作模式是非常简单的，由于TCP/IP协议负责底层的具体传输工作，HTTP协议基本上不用在这方面操心太多。单从这一点上来看，所谓的“超文本传输协议”其实并不怎么管“传输”的事情，有点“名不副实”。</p><p>那么HTTP协议的核心部分是什么呢？</p><p>答案就是它传输的报文内容。</p><p>HTTP协议在规范文档里详细定义了报文的格式，规定了组成部分，解析规则，还有处理策略，所以可以在TCP/IP层之上实现更灵活丰富的功能，例如连接控制，缓存管理、数据编码、内容协商等等。</p><h2>报文结构</h2><p>你也许对TCP/UDP的报文格式有所了解，拿TCP报文来举例，它在实际要传输的数据之前附加了一个20字节的头部数据，存储TCP协议必须的额外信息，例如发送方的端口号、接收方的端口号、包序号、标志位等等。</p><p>有了这个附加的TCP头，数据包才能够正确传输，到了目的地后把头部去掉，就可以拿到真正的数据。</p><p><img src=\"https://static001.geekbang.org/resource/image/17/95/174bb72bad50127ac84427a72327f095.png?wh=3000*1681\" alt=\"\"></p><p>HTTP协议也是与TCP/UDP类似，同样也需要在实际传输的数据前附加一些头数据，不过与TCP/UDP不同的是，它是一个“<strong>纯文本</strong>”的协议，所以头数据都是ASCII码的文本，可以很容易地用肉眼阅读，不用借助程序解析也能够看懂。</p><!-- [[[read_end]]] --><p>HTTP协议的请求报文和响应报文的结构基本相同，由三大部分组成：</p><ol>\n<li>起始行（start line）：描述请求或响应的基本信息；</li>\n<li>头部字段集合（header）：使用key-value形式更详细地说明报文；</li>\n<li>消息正文（entity）：实际传输的数据，它不一定是纯文本，可以是图片、视频等二进制数据。</li>\n</ol><p>这其中前两部分起始行和头部字段经常又合称为“<strong>请求头</strong>”或“<strong>响应头</strong>”，消息正文又称为“<strong>实体</strong>”，但与“<strong>header</strong>”对应，很多时候就直接称为“<strong>body</strong>”。</p><p>HTTP协议规定报文必须有header，但可以没有body，而且在header之后必须要有一个“空行”，也就是“CRLF”，十六进制的“0D0A”。</p><p>所以，一个完整的HTTP报文就像是下图的这个样子，注意在header和body之间有一个“空行”。</p><p><img src=\"https://static001.geekbang.org/resource/image/62/3c/62e061618977565c22c2cf09930e1d3c.png?wh=3000*1681\" alt=\"\"></p><p>说到这里，我不由得想起了一部老动画片《大头儿子和小头爸爸》，你看，HTTP的报文结构像不像里面的“大头儿子”？</p><p>报文里的header就是“大头儿子”的“大头”，空行就是他的“脖子”，而后面的body部分就是他的身体了。</p><p>看一下我们之前用Wireshark抓的包吧。</p><p><img src=\"https://static001.geekbang.org/resource/image/b1/df/b191c8760c8ad33acd9bb005b251a2df.png?wh=3000*1681\" alt=\"unpreview\"></p><p>在这个浏览器发出的请求报文里，第一行“GET / HTTP/1.1”就是请求行，而后面的“Host”“Connection”等等都属于header，报文的最后是一个空白行结束，没有body。</p><p>在很多时候，特别是浏览器发送GET请求的时候都是这样，HTTP报文经常是只有header而没body，相当于只发了一个超级“大头”过来，你可以想象的出来：每时每刻网络上都会有数不清的“大头儿子”在跑来跑去。</p><p>不过这个“大头”也不能太大，虽然HTTP协议对header的大小没有做限制，但各个Web服务器都不允许过大的请求头，因为头部太大可能会占用大量的服务器资源，影响运行效率。</p><h2>请求行</h2><p>了解了HTTP报文的基本结构后，我们来看看请求报文里的起始行也就是<strong>请求行</strong>（request line），它简要地描述了<strong>客户端想要如何操作服务器端的资源</strong>。</p><p>请求行由三部分构成：</p><ol>\n<li>请求方法：是一个动词，如GET/POST，表示对资源的操作；</li>\n<li>请求目标：通常是一个URI，标记了请求方法要操作的资源；</li>\n<li>版本号：表示报文使用的HTTP协议版本。</li>\n</ol><p>这三个部分通常使用空格（space）来分隔，最后要用CRLF换行表示结束。</p><p><img src=\"https://static001.geekbang.org/resource/image/36/b9/36108959084392065f36dff3e12967b9.png?wh=3000*463\" alt=\"\"></p><p>还是用Wireshark抓包的数据来举例：</p><pre><code>GET / HTTP/1.1\n</code></pre><p>在这个请求行里，“GET”是请求方法，“/”是请求目标，“HTTP/1.1”是版本号，把这三部分连起来，意思就是“服务器你好，我想获取网站根目录下的默认文件，我用的协议版本号是1.1，请不要用1.0或者2.0回复我。”</p><p>别看请求行就一行，貌似很简单，其实这里面的“讲究”是非常多的，尤其是前面的请求方法和请求目标，组合起来变化多端，后面我还会详细介绍。</p><h2>状态行</h2><p>看完了请求行，我们再看响应报文里的起始行，在这里它不叫“响应行”，而是叫“<strong>状态行</strong>”（status line），意思是<strong>服务器响应的状态</strong>。</p><p>比起请求行来说，状态行要简单一些，同样也是由三部分构成：</p><ol>\n<li>版本号：表示报文使用的HTTP协议版本；</li>\n<li>状态码：一个三位数，用代码的形式表示处理的结果，比如200是成功，500是服务器错误；</li>\n<li>原因：作为数字状态码补充，是更详细的解释文字，帮助人理解原因。</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/a1/00/a1477b903cd4d5a69686683c0dbc3300.png?wh=3000*471\" alt=\"\"></p><p>看一下上一讲里Wireshark抓包里的响应报文，状态行是：</p><pre><code>HTTP/1.1 200 OK\n</code></pre><p>意思就是：“浏览器你好，我已经处理完了你的请求，这个报文使用的协议版本号是1.1，状态码是200，一切OK。”</p><p>而另一个“GET /favicon.ico HTTP/1.1”的响应报文状态行是：</p><pre><code>HTTP/1.1 404 Not Found\n</code></pre><p>翻译成人话就是：“抱歉啊浏览器，刚才你的请求收到了，但我没找到你要的资源，错误代码是404，接下来的事情你就看着办吧。”</p><h2>头部字段</h2><p>请求行或状态行再加上头部字段集合就构成了HTTP报文里完整的请求头或响应头，我画了两个示意图，你可以看一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/1f/ea/1fe4c1121c50abcf571cebd677a8bdea.png?wh=3000*1314\" alt=\"\"></p><p><img src=\"https://static001.geekbang.org/resource/image/cb/75/cb0d1d2c56400fe9c9988ee32842b175.png?wh=3000*1344\" alt=\"\"></p><p>请求头和响应头的结构是基本一样的，唯一的区别是起始行，所以我把请求头和响应头里的字段放在一起介绍。</p><p>头部字段是key-value的形式，key和value之间用“:”分隔，最后用CRLF换行表示字段结束。比如在“Host: 127.0.0.1”这一行里key就是“Host”，value就是“127.0.0.1”。</p><p>HTTP头字段非常灵活，不仅可以使用标准里的Host、Connection等已有头，也可以任意添加自定义头，这就给HTTP协议带来了无限的扩展可能。</p><p>不过使用头字段需要注意下面几点：</p><ol>\n<li>字段名不区分大小写，例如“Host”也可以写成“host”，但首字母大写的可读性更好；</li>\n<li>字段名里不允许出现空格，可以使用连字符“-”，但不能使用下划线“_”。例如，“test-name”是合法的字段名，而“test name”“test_name”是不正确的字段名；</li>\n<li>字段名后面必须紧接着“:”，不能有空格，而“:”后的字段值前可以有多个空格；</li>\n<li>字段的顺序是没有意义的，可以任意排列不影响语义；</li>\n<li>字段原则上不能重复，除非这个字段本身的语义允许，例如Set-Cookie。</li>\n</ol><p>我在实验环境里用Lua编写了一个小服务程序，URI是“/09-1”，效果是输出所有的请求头。</p><p>你可以在实验环境里用Telnet连接OpenResty服务器试一下，手动发送HTTP请求头，试验各种正确和错误的情况。</p><p>先启动OpenResty服务器，然后用组合键“Win+R”运行telnet，输入命令“open www.chrono.com 80”，就连上了Web服务器。</p><p><img src=\"https://static001.geekbang.org/resource/image/34/7b/34fb2b5899bdb87a3899dd133c0c457b.png?wh=3000*1233\" alt=\"\"></p><p>连接上之后按组合键“CTRL+]”，然后按回车键，就进入了编辑模式。在这个界面里，你可以直接用鼠标右键粘贴文本，敲两下回车后就会发送数据，也就是模拟了一次HTTP请求。</p><p>下面是两个最简单的HTTP请求，第一个在“:”后有多个空格，第二个在“:”前有空格。</p><pre><code>GET /09-1 HTTP/1.1\nHost:   www.chrono.com\n\n\nGET /09-1 HTTP/1.1\nHost : www.chrono.com\n</code></pre><p>第一个可以正确获取服务器的响应报文，而第二个得到的会是一个“400 Bad Request”，表示请求报文格式有误，服务器无法正确处理：</p><pre><code>HTTP/1.1 400 Bad Request\nServer: openresty/1.15.8.1\nConnection: close\n</code></pre><h2>常用头字段</h2><p>HTTP协议规定了非常多的头部字段，实现各种各样的功能，但基本上可以分为四大类：</p><ol>\n<li>通用字段：在请求头和响应头里都可以出现；</li>\n<li>请求字段：仅能出现在请求头里，进一步说明请求信息或者额外的附加条件；</li>\n<li>响应字段：仅能出现在响应头里，补充说明响应报文的信息；</li>\n<li>实体字段：它实际上属于通用字段，但专门描述body的额外信息。</li>\n</ol><p>对HTTP报文的解析和处理实际上主要就是对头字段的处理，理解了头字段也就理解了HTTP报文。</p><p>后续的课程中我将会以应用领域为切入点介绍连接管理、缓存控制等头字段，今天先讲几个最基本的头，看完了它们你就应该能够读懂大多数HTTP报文了。</p><p>首先要说的是<strong>Host</strong>字段，它属于请求字段，只能出现在请求头里，它同时也是唯一一个HTTP/1.1规范里要求<strong>必须出现</strong>的字段，也就是说，如果请求头里没有Host，那这就是一个错误的报文。</p><p>Host字段告诉服务器这个请求应该由哪个主机来处理，当一台计算机上托管了多个虚拟主机的时候，服务器端就需要用Host字段来选择，有点像是一个简单的“路由重定向”。</p><p>例如我们的试验环境，在127.0.0.1上有三个虚拟主机：“www.chrono.com”“www.metroid.net”和“origin.io”。那么当使用域名的方式访问时，就必须要用Host字段来区分这三个IP相同但域名不同的网站，否则服务器就会找不到合适的虚拟主机，无法处理。</p><p><strong>User-Agent</strong>是请求字段，只出现在请求头里。它使用一个字符串来描述发起HTTP请求的客户端，服务器可以依据它来返回最合适此浏览器显示的页面。</p><p>但由于历史的原因，User-Agent非常混乱，每个浏览器都自称是“Mozilla”“Chrome”“Safari”，企图使用这个字段来互相“伪装”，导致User-Agent变得越来越长，最终变得毫无意义。</p><p>不过有的比较“诚实”的爬虫会在User-Agent里用“spider”标明自己是爬虫，所以可以利用这个字段实现简单的反爬虫策略。</p><p><strong>Date</strong>字段是一个通用字段，但通常出现在响应头里，表示HTTP报文创建的时间，客户端可以使用这个时间再搭配其他字段决定缓存策略。</p><p><strong>Server</strong>字段是响应字段，只能出现在响应头里。它告诉客户端当前正在提供Web服务的软件名称和版本号，例如在我们的实验环境里它就是“Server: openresty/1.15.8.1”，即使用的是OpenResty 1.15.8.1。</p><p>Server字段也不是必须要出现的，因为这会把服务器的一部分信息暴露给外界，如果这个版本恰好存在bug，那么黑客就有可能利用bug攻陷服务器。所以，有的网站响应头里要么没有这个字段，要么就给出一个完全无关的描述信息。</p><p>比如GitHub，它的Server字段里就看不出是使用了Apache还是Nginx，只是显示为“GitHub.com”。</p><p><img src=\"https://static001.geekbang.org/resource/image/f1/1c/f1970aaecad58fb18938e262ea7f311c.png?wh=3000*1681\" alt=\"\"></p><p>实体字段里要说的一个是<strong>Content-Length</strong>，它表示报文里body的长度，也就是请求头或响应头空行后面数据的长度。服务器看到这个字段，就知道了后续有多少数据，可以直接接收。如果没有这个字段，那么body就是不定长的，需要使用chunked方式分段传输。</p><h2>小结</h2><p>今天我们学习了HTTP的报文结构，下面做一个简单小结。</p><ol>\n<li><span class=\"orange\">HTTP报文结构就像是“大头儿子”，由“起始行+头部+空行+实体”组成，简单地说就是“header+body”；</span></li>\n<li><span class=\"orange\">HTTP报文可以没有body，但必须要有header，而且header后也必须要有空行，形象地说就是“大头”必须要带着“脖子”；</span></li>\n<li><span class=\"orange\">请求头由“请求行+头部字段”构成，响应头由“状态行+头部字段”构成；</span></li>\n<li><span class=\"orange\">请求行有三部分：请求方法，请求目标和版本号；</span></li>\n<li><span class=\"orange\">状态行也有三部分：版本号，状态码和原因字符串；</span></li>\n<li><span class=\"orange\">头部字段是key-value的形式，用“:”分隔，不区分大小写，顺序任意，除了规定的标准头，也可以任意添加自定义字段，实现功能扩展；</span></li>\n<li><span class=\"orange\">HTTP/1.1里唯一要求必须提供的头字段是Host，它必须出现在请求头里，标记虚拟主机名。</span></li>\n</ol><h2>课下作业</h2><ol>\n<li>如果拼HTTP报文的时候，在头字段后多加了一个CRLF，导致出现了一个空行，会发生什么？</li>\n<li>讲头字段时说“:”后的空格可以有多个，那为什么绝大多数情况下都只使用一个空格呢？</li>\n</ol><p>欢迎你把自己的答案写在留言区，与我和其他同学一起讨论。如果你觉得有所收获，也欢迎把文章分享给你的朋友。</p><p><img src=\"https://static001.geekbang.org/resource/image/1a/26/1aa9cb1a1d637e10340451d81e87fc26.png?wh=1769*3010\" alt=\"unpreview\"></p><p></p>","neighbors":{"left":{"article_title":"08 | 键入网址再按下回车，后面究竟发生了什么？","id":100502},"right":{"article_title":"10 | 应该如何理解请求方法？","id":101518}},"comments":[{"had_liked":false,"id":104320,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1560732511,"is_pvip":true,"replies":[{"id":"37780","content":"回答的很好。","user_name":"作者回复","comment_id":104320,"uid":"1181974","ip_address":"","utype":1,"ctime":1560736276,"user_name_real":"chrono"}],"discussion_count":4,"race_medal":1,"score":"589971252063","product_id":100029001,"comment_content":"1:如果拼 HTTP 报文的时候，在头字段后多加了一个 CRLF，导致出现了一个空行，会发生什么？<br>在header 下面第一个空行以后都会被当作body 体<br><br>2:讲头字段时说“:”后的空格可以有多个，那为什么绝大多数情况下都只使用一个空格呢？<br>头部多一个空格就会多一个传输的字节，去掉无用的信息，保证传输的头部字节数尽量小","like_count":138,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454223,"discussion_content":"回答的很好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560736276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202089,"avatar":"https://static001.geekbang.org/account/avatar/00/12/57/a9/9abbe7a4.jpg","nickname":"神三元","note":"","ucode":"0FB2E7C0683599","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":133630,"discussion_content":"是真的牛批","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1578977411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1511778,"avatar":"https://static001.geekbang.org/account/avatar/00/17/11/62/737836a4.jpg","nickname":"梧桐树下","note":"","ucode":"EF87F14198B1AA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1202089,"avatar":"https://static001.geekbang.org/account/avatar/00/12/57/a9/9abbe7a4.jpg","nickname":"神三元","note":"","ucode":"0FB2E7C0683599","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311895,"discussion_content":"看你介绍来的，没想到碰到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602514354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":133630,"ip_address":""},"score":311895,"extra":""}]},{"author":{"id":1439398,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f6/a6/6cb8e81b.jpg","nickname":"罗小黑","note":"","ucode":"FC1663DB477A28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282576,"discussion_content":"请收下来自学渣的膜拜","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1592018963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104463,"user_name":"壹笙☞漂泊","can_delete":false,"product_type":"c1","uid":1092577,"ip_address":"","ucode":"3A0B8EC881665C","user_header":"https://static001.geekbang.org/account/avatar/00/10/ab/e1/f6b921fa.jpg","comment_is_top":false,"comment_ctime":1560758922,"is_pvip":false,"replies":[{"id":"37859","content":"总结的非常好，赞！","user_name":"作者回复","comment_id":104463,"uid":"1181974","ip_address":"","utype":1,"ctime":1560819934,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"186244352650","product_id":100029001,"comment_content":"答题：<br>1、头字段后多了一个CRLF，会被当做body处理<br>2、节省资源<br>总结：<br>HTTP协议的请求报文和相应报文的结构基本相同：<br>    1、起始行（start line）：描述请求或响应的基本信息<br>    2、头部字段集合（header）：使用key-value形式更详细的说明报文<br>    3、消息正文（entity）：实际传输的数据，它不一定是纯文本，可以是图片、视频等二进制数据<br><br>HTTP协议必须有header，可以没有body。而且header之后必须要有一个空行，也就是  “CRLF”，十六进制的“0D0A”<br><br>请求行（请求报文里的起始行）：<br>    描述了客户端想要如何操作服务器端的资源<br>起始行由三部分构成：<br>    1、请求方法：标识对资源的操作：GET&#47;POST&#47;PUT<br>    2、请求目标：通常是一个URI，标记了请求方法要操作的资源<br>    3、版本号：标识报文使用的HTTP协议版本<br>以上三部分，通常使用空格分隔，最后用CRLF换行<br><br>状态行：（响应报文里的起始行）：<br>    服务器响应的状态<br>状态行也是由三部分构成：<br>    1、版本号：标识报文使用的HTTP协议版本<br>    2、状态码：三位数，用代码形式标识处理的结果，比如200是成功，500是服务器错误<br>    3、原因：作为数字状态码补充，是更详细的解释文字，帮助人理解原因<br>以上三部分，通常也使用空格分隔，最后用CRLF换行<br><br>头部字段：<br>请求行或状态行再加上头部字段集合就构成了HTTP报文里完整的请求头或响应头。<br><br>头部字段是key-value的形式，用“:”分隔，最后用CRLF换行标识字段结束<br><br>头字段，不仅可以使用标准的Host等已有开头，也可以任意添加自定义头<br><br>注意：<br>    1.字段名不区分大小写，例如“Host&quot;也可以写成“host”,但首字母大写的可读性更好;<br>    2.字段名里不允许出现空格，可以使用连字符“一”，但不能使用下划线“”。例    如，“test-name”是合法的字段名，而“test name&quot;&quot;test_ name&#39; 是不正确的字段名;<br>    3.字段名后面必须紧接着“:”，不能有空格，而“:” 后的字段值前可以有多个空格;<br>    4.字段的顺序是没有意义的，可以任意排列不影响语义; <br>    5.字段原则上不能重复，除非这个字段本身的语义允许，例如Set-Cookie。<br><br>常用头字段<br><br>基本分为四类：<br>    1.通用字段:在请求头和响应头里都可以出现;<br>    2.请求字段:仅能出现在请求头里，进一步说明请求信息或者额外的附加条件;<br>    3.响应字段:仅能出现在响应头里，补充说明响应报文的信息;<br>    4.实体字段:它实际上属于通用字段，但专门描述body的额外信息。<br><br>Host：请求字段，只能出现在请求头。是必须出现的字段<br>User-Agent：是请求字段，只能出现在请求头里。<br>Date：是通用字段，通常出现在响应头，标识HTTP报文创建的时间，客户端可以使用这个时间再搭配其他字段决定缓存策略<br>Server字段是响应字段，只能出现在响应头里。告诉客户端当前正在提供Web服务的软件名称和版本号。<br>Content-Length：标识报文里body的长度。","like_count":44,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454278,"discussion_content":"总结的非常好，赞！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560819934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105004,"user_name":"xing.org1^","can_delete":false,"product_type":"c1","uid":1374066,"ip_address":"","ucode":"C68AEA172B1623","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/72/2d35f80c.jpg","comment_is_top":false,"comment_ctime":1560904747,"is_pvip":false,"replies":[{"id":"38050","content":"因为服务器必须分配内存存储请求头，然后才能处理，如果头很大，比如说16k，那么几万个请求就会占用非常多的内存。<br><br>Nginx里限制头不超过4k，就是为了节约内存资源。","user_name":"作者回复","comment_id":105004,"uid":"1181974","ip_address":"","utype":1,"ctime":1560907794,"user_name_real":"chrono"}],"discussion_count":5,"race_medal":1,"score":"96050185259","product_id":100029001,"comment_content":"老师，请问为什么请求头太大会占用服务器资源呢？","like_count":23,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454522,"discussion_content":"因为服务器必须分配内存存储请求头，然后才能处理，如果头很大，比如说16k，那么几万个请求就会占用非常多的内存。\n\nNginx里限制头不超过4k，就是为了节约内存资源。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560907794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2032840,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/04/c8/3c7af100.jpg","nickname":"Javatar","note":"","ucode":"E216645CDF632C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301126,"discussion_content":"去看一些web server的源码就知道了，比如tomcat，在解析HTTP报文时，到了读header阶段时，会一直不断读下去，直到读到一个空行，才认为是读header结束。所以在这个过程中，所有已读到的header，都一直存在内存里的。直到读完所有的http请求，才会交给你的业务代码处理。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1598414095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1374066,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f7/72/2d35f80c.jpg","nickname":"xing.org1^","note":"","ucode":"C68AEA172B1623","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":2032840,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/04/c8/3c7af100.jpg","nickname":"Javatar","note":"","ucode":"E216645CDF632C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301283,"discussion_content":"好，谢谢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1598458260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":301126,"ip_address":""},"score":301283,"extra":""}]},{"author":{"id":1736539,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIu4ztKdZzH49MIDLrgvsHgEVlEB61wYfceRoNTDtibUyrf7siaOibTqIj01TzVVqAlAjlfgia3bC2VnQ/132","nickname":"remember","note":"","ucode":"70A7A22CC6636A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288904,"discussion_content":"老师，你上边的贴士提到nginx里头限制是8k，这里怎么是4k呢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593928332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1736539,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIu4ztKdZzH49MIDLrgvsHgEVlEB61wYfceRoNTDtibUyrf7siaOibTqIj01TzVVqAlAjlfgia3bC2VnQ/132","nickname":"remember","note":"","ucode":"70A7A22CC6636A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290780,"discussion_content":"抱歉，凭记忆写的，失误了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594604403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288904,"ip_address":""},"score":290780,"extra":""}]}]},{"had_liked":false,"id":277453,"user_name":"Mèow","can_delete":false,"product_type":"c1","uid":2305734,"ip_address":"","ucode":"E5103990D01395","user_header":"https://static001.geekbang.org/account/avatar/00/23/2e/c6/1ebf8edd.jpg","comment_is_top":false,"comment_ctime":1612420076,"is_pvip":false,"replies":[{"id":"100687","content":"Host是必须要有的字段，你贴的这几个实际上是http&#47;2的字段（前面有冒号，全小写），而:authority就相当于http&#47;1里的host。","user_name":"作者回复","comment_id":277453,"uid":"1181974","ip_address":"","utype":1,"ctime":1612487190,"user_name_real":"罗剑锋"}],"discussion_count":1,"race_medal":0,"score":"87511765996","product_id":100029001,"comment_content":"请问Host虽然是规定必须的，但是不加的话也没问题吗？我看掘金的主页就没有host，而是用的几个私有字段<br>:authority: juejin.cn<br>:method: GET<br>:path: &#47;<br>:scheme: https","like_count":21,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515058,"discussion_content":"Host是必须要有的字段，你贴的这几个实际上是http/2的字段（前面有冒号，全小写），而:authority就相当于http/1里的host。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1612487190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105686,"user_name":"隰有荷","can_delete":false,"product_type":"c1","uid":1357944,"ip_address":"","ucode":"2BE9A32AB28963","user_header":"https://static001.geekbang.org/account/avatar/00/14/b8/78/2828195b.jpg","comment_is_top":false,"comment_ctime":1561075774,"is_pvip":false,"replies":[{"id":"38303","content":"学业有先后，术业有专攻，一起努力。","user_name":"作者回复","comment_id":105686,"uid":"1181974","ip_address":"","utype":1,"ctime":1561109180,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"48805716030","product_id":100029001,"comment_content":"为啥老师懂的这么多！唉，何时能学成你的一半水平，我也就满意了😂","like_count":12,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454777,"discussion_content":"学业有先后，术业有专攻，一起努力。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561109180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105129,"user_name":"10","can_delete":false,"product_type":"c1","uid":1562816,"ip_address":"","ucode":"90FFD6313AEEE7","user_header":"https://static001.geekbang.org/account/avatar/00/17/d8/c0/8d07d9b7.jpg","comment_is_top":false,"comment_ctime":1560925887,"is_pvip":false,"replies":[{"id":"38094","content":"不需要等待，在显示“正在连接”的时候按按Ctrl+]键，然后回车。<br><br>“正在连接”的意思是已经连上了。<br><br>可以再搜索一下Windows上Telnet的用法。","user_name":"作者回复","comment_id":105129,"uid":"1181974","ip_address":"","utype":1,"ctime":1560930427,"user_name_real":"chrono"}],"discussion_count":4,"race_medal":0,"score":"44510598847","product_id":100029001,"comment_content":"我也遇到了前面2个同学提到的遗失对主机的连接的问题，但老师您的回答貌似没解决问题，我再确认一下，在浏览器可以顺利访问www.chrono.com的情况下：<br><br>1. Win+R打开Telnet后，输入 “open www.chrono.com 80”，点击回车，然后界面显示“正在连接open www.chrono.com 80”<br>2. 上一步漫长的等待后，界面显示“按任意键继续”<br>3. 我按了空格，界面上新增一行“遗失对主机的连接”<br><br>另外老师您说的“按Ctrl+]键，然后回车”我在上面1步和第3步都试过 每次都显示“无效指令”<br><br>请问我是哪一步出的问题呢","like_count":10,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454569,"discussion_content":"不需要等待，在显示“正在连接”的时候按按Ctrl+]键，然后回车。\n\n“正在连接”的意思是已经连上了。\n\n可以再搜索一下Windows上Telnet的用法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560930427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1363634,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ce/b2/1f914527.jpg","nickname":"海盗船长","note":"","ucode":"ECB28BA21A4113","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262572,"discussion_content":"windows上使用telnet 本文实验：\n先启动 OpenResty 服务器，然后用组合键“Win+R”运行 telnet，输入命令“open www.chrono.com 80”，此时显示 正在连接www.chrono.com ...  直接按Ctrl+],接着按enter，输入请求内容，按两次enter","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1589114173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"乘风破浪","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341006,"discussion_content":"在我的电脑上也是这样的，原因不明，貌似不能在telnet内部用open开网站\n不过我一般直接在cmd下输入，telnet www.chrono.com 80\n按ctrl+],再按回车，此时出现空屏等待输入\n输入指令即可\n\nGET / HTTP/1.1\nHost:127.0.0.1\n\nHTTP/1.1 200 OK\nServer: openresty/1.19.3.1\nDate: Sun, 10 Jan 2021 06:44:19 GMT\nContent-Type: text/html\nContent-Length: 401\nLast-Modified: Sun, 10 Jan 2021 04:09:35 GMT\nConnection: keep-alive\nETag: &#34;5ffa7dff-191&#34;\nAccept-Ranges: bytes\n\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to HTTP Study Page!</title> <style> body {\n        width: 40em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n</style>\n<link rel=&#34;shortcut icon&#34; href=&#34;shirt.ico&#34; type=&#34;image/x-icon&#34; />\n</head>\n<body>\n\n<h1>Welcome to HTTP Study Page!</h1>\n\n<p>Now you are flying on OpenResty.</p>\n\n</body>\n</html>\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610261079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1792420,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo62pttzxBohm02HCWdNyfa8ZslBt7579t4M2LySyv1PkorIGyx9Q7iaWEHOrS1S93By4kBTjeLkyA/132","nickname":"乐萌TD","note":"","ucode":"AAD1355E371620","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363417,"discussion_content":"输入请求内容过程时可以使用shift+enter换行，输入第二行参数","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617191789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104531,"user_name":"qzmone","can_delete":false,"product_type":"c1","uid":1081681,"ip_address":"","ucode":"E10DC194F04B74","user_header":"https://static001.geekbang.org/account/avatar/00/10/81/51/4999f121.jpg","comment_is_top":false,"comment_ctime":1560773088,"is_pvip":false,"replies":[{"id":"37853","content":"host字段是给Web服务器（Apache，Nginx）用的。<br><br>解析出ip后，请求到达Nginx，因为上面运行了很多的虚拟主机，比如a.com&#47;b.com&#47;c.com，那么应该进那个呢？<br><br>这个时候就要用到host字段了。如果host=b.com，那么Nginx就会使用b.com的配置提供服务。<br><br>你最后的问题其实是反了，浏览器解析域名得到ip地址，它不知道域名对应的是不是虚拟主机，也可能是真实主机。","user_name":"作者回复","comment_id":104531,"uid":"1181974","ip_address":"","utype":1,"ctime":1560819616,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"35920511456","product_id":100029001,"comment_content":"我也不是很理解这个host字段，比如一个网站的域名解析后的IP是负载均衡的IP，负载均衡后面对应的是web主机集群，那么这个host是什么，浏览器怎么知道虚拟主机的真实IP呢","like_count":8,"discussions":[{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"乘风破浪","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347261,"discussion_content":"虚拟主机的场景，IP->域名是1->n的关系，所以最后一个问题，所有虚拟主机的IP是一个IP，是客户端DNS解析的结果。IP定位到主机，Host+URI定位到某个虚拟主机的资源","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1612184472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454310,"discussion_content":"host字段是给Web服务器（Apache，Nginx）用的。\n\n解析出ip后，请求到达Nginx，因为上面运行了很多的虚拟主机，比如a.com/b.com/c.com，那么应该进那个呢？\n\n这个时候就要用到host字段了。如果host=b.com，那么Nginx就会使用b.com的配置提供服务。\n\n你最后的问题其实是反了，浏览器解析域名得到ip地址，它不知道域名对应的是不是虚拟主机，也可能是真实主机。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1560819616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143771,"user_name":"文華","can_delete":false,"product_type":"c1","uid":1653679,"ip_address":"","ucode":"F5E58D16E36B23","user_header":"https://static001.geekbang.org/account/avatar/00/19/3b/af/2e3618a8.jpg","comment_is_top":false,"comment_ctime":1571790494,"is_pvip":false,"replies":[{"id":"55489","content":"欢迎同学们互相交流学习经验。","user_name":"作者回复","comment_id":143771,"uid":"1181974","ip_address":"","utype":1,"ctime":1571792513,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"31636561566","product_id":100029001,"comment_content":"使用Telnet遇到问题的同学请注意，“Escape Character is &#39;Ctrl+]&#39;&quot;这提示的意思是已经连接到了服务器，按Ctrl+]就结束连接退出了，所以看到提示时直接将HTTP请求内容贴上去，再按回车加入空行，就能得到响应了。","like_count":7,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471678,"discussion_content":"欢迎同学们互相交流学习经验。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571792513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104844,"user_name":"业余草","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1560853023,"is_pvip":false,"replies":[{"id":"38038","content":"网络攻击的范围太大，我不是专门做这个的，不能讲的很深入。<br><br>简单来说，就是在host头里面加入精心设计的代码，诱骗服务器执行。","user_name":"作者回复","comment_id":104844,"uid":"1181974","ip_address":"","utype":1,"ctime":1560906300,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"27330656799","product_id":100029001,"comment_content":"老师讲到了 Host，可以顺便讲一下 Host 攻击吗？","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454449,"discussion_content":"网络攻击的范围太大，我不是专门做这个的，不能讲的很深入。\n\n简单来说，就是在host头里面加入精心设计的代码，诱骗服务器执行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560906300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104608,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1560783794,"is_pvip":false,"replies":[{"id":"37848","content":"理解万岁。","user_name":"作者回复","comment_id":104608,"uid":"1181974","ip_address":"","utype":1,"ctime":1560819273,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"27330587570","product_id":100029001,"comment_content":"支持老师原声。赞一个","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454341,"discussion_content":"理解万岁。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560819273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137990,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1569969400,"is_pvip":false,"replies":[{"id":"53483","content":"host头字段是用来定位“虚拟主机”的。比如说一台物理服务器上托管了a.com、b.org、c.net三个网站，用ip+port就不知道该访问哪个网站。<br><br>有了host， web server就可以知道选择对应网站的数据提供服务，再用uri去查找资源。","user_name":"作者回复","comment_id":137990,"uid":"1181974","ip_address":"","utype":1,"ctime":1570497205,"user_name_real":"chrono"}],"discussion_count":6,"race_medal":1,"score":"23044805880","product_id":100029001,"comment_content":"老师，不是通过ip+port+资源路径确定的吗，咋又通过header中的host来找呢，不懂。","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469337,"discussion_content":"host头字段是用来定位“虚拟主机”的。比如说一台物理服务器上托管了a.com、b.org、c.net三个网站，用ip+port就不知道该访问哪个网站。\n\n有了host， web server就可以知道选择对应网站的数据提供服务，再用uri去查找资源。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570497205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1229495,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKMkEV4Jb087pkAOvUSJtibkblLan9hbcc59aK4TKrXS4KiasVZRQHvnP2eG0xkd4P3WzXfy3zfSyEg/132","nickname":"yhq","note":"","ucode":"4BFFB351A6A37E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39962,"discussion_content":"如果物理服务器上托管了 www.chrono.com、www.metroid.net、origin.io 三个网站\n\n我在本地 hosts 中配置了 域名和ip地址的映射 127.0.0.1   activate.navicat.com\n那么发送 HTTP 请求头的 Host 为 activate.navicat.com\n\n结果正常返回了和 www.chrono.com 对应的页面, 是服务器做了什么处理吗?","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572028817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1808206,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJoOia8n2xdlIAZkJJZ9hflv3rMENqGGuxYRSsYE8bIpXiaQfAbfH7qVmiaJAyVEiaEj6sP9BRlIWWqRA/132","nickname":"hzs","note":"","ucode":"6844D91F80286E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384180,"discussion_content":"我懂了，host的值是ip+端口号，如果是80端口，可以不带","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626416898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1808206,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJoOia8n2xdlIAZkJJZ9hflv3rMENqGGuxYRSsYE8bIpXiaQfAbfH7qVmiaJAyVEiaEj6sP9BRlIWWqRA/132","nickname":"hzs","note":"","ucode":"6844D91F80286E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384177,"discussion_content":"Host字段的值不是规定是ip吗？既然是ip，那么怎么知道我要访问哪个网站呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626416297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2010313,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJH3dribPS9AibkGhjN0giaWAa45SD8lCxkStyQrJibl7CPJRDNicvicwM224tHd3gLq2wvWbMAQ70IF6IA/132","nickname":"X青年","note":"","ucode":"E6EB3CCA7DB1C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373754,"discussion_content":"同问老师，就算是一台物理服务器三个网站域名，但是这三个域名可以分别使用不同的端口来服务？不就可以不需要host的了吗？\n2021-05-13","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620866521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2913864,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MYShyjtRtib2GIQiaK4hV3ZP9pQ1qiaS74DA4K4YHY4SIiaFDfsCKgiaMWwm9zFsSn3bt5pawp5Kdn5MWgiaw5909nug/132","nickname":"Geek_aa1c31","note":"","ucode":"1AC14C053638AF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2010313,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJH3dribPS9AibkGhjN0giaWAa45SD8lCxkStyQrJibl7CPJRDNicvicwM224tHd3gLq2wvWbMAQ70IF6IA/132","nickname":"X青年","note":"","ucode":"E6EB3CCA7DB1C8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579528,"discussion_content":"普通用户访问的时候通常情况下是不需要关心端口号的， 一般都是默认的80或着443。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657520578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373754,"ip_address":""},"score":579528,"extra":""}]}]},{"had_liked":false,"id":309987,"user_name":"面罩","can_delete":false,"product_type":"c1","uid":2198755,"ip_address":"","ucode":"E85F2550D7C6D6","user_header":"https://static001.geekbang.org/account/avatar/00/21/8c/e3/b9e926f9.jpg","comment_is_top":false,"comment_ctime":1630425752,"is_pvip":false,"replies":[{"id":"112338","content":"great","user_name":"作者回复","comment_id":309987,"uid":"1181974","ip_address":"","utype":1,"ctime":1630472921,"user_name_real":"罗剑锋"}],"discussion_count":4,"race_medal":0,"score":"18810294936","product_id":100029001,"comment_content":"说一下老师所说的 telnet 怎么用：<br>1. win + r，输入 telnet，确定后就打开了<br>2. 在界面中输入 open www.chrono.com 80，并回车<br>3. 接下来会显示 “正在连接 www.chrono.com....”，就已经表示连接上了<br>4. 接下来先 ctrl + ]，然后再 enter，即可进入黑乎乎的编辑页面<br>5. 在编辑页面输入老师给的请求信息（我是手敲的，我复制过去貌似直接发请求了，应该是复制的格式不对，导致失败了）<br>6. 输入请求信息后，连续点击两次 enter，即可发送请求","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526086,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630472921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1273044,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6c/d4/85ef1463.jpg","nickname":"路漫漫","note":"","ucode":"F70F1DC612DE9D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413304,"discussion_content":"终于可以了，必须手敲，不能复制，给你点个赞上去，让更多的人看到  ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636441597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1459294,"avatar":"https://static001.geekbang.org/account/avatar/00/16/44/5e/a882dc64.jpg","nickname":"北国风光","note":"","ucode":"5BAFF7B5D023A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574300,"discussion_content":"成功的手巧没有问题，Host :两者有空格的话，会直接报400报错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653962025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3014444,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM74658w9PQeTM4TcM14BzfpJnVLrsciaS26ibRwRbCE09ydI6UlZhFrJh7iaVLp2xxhBppVDKLyRRg9Q/132","nickname":"Geek_21a73c","note":"","ucode":"104A4AD89DA6BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574017,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653796009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104296,"user_name":"高翔Gilbert","can_delete":false,"product_type":"c1","uid":1031155,"ip_address":"","ucode":"BC791D780D7359","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/f3/7fcc98e6.jpg","comment_is_top":false,"comment_ctime":1560729772,"is_pvip":false,"replies":[{"id":"37768","content":"sorry了，本人非播音科班，听着难受就看文字吧。","user_name":"作者回复","comment_id":104296,"uid":"1181974","ip_address":"","utype":1,"ctime":1560733967,"user_name_real":"chrono"}],"discussion_count":2,"race_medal":0,"score":"18740598956","product_id":100029001,"comment_content":"为什么不找人读呢？听起来好吃力","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454212,"discussion_content":"sorry了，本人非播音科班，听着难受就看文字吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560733967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022453,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/f5/a2f2241e.jpg","nickname":"SilentMacUser","note":"","ucode":"8D51E643A83037","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311537,"discussion_content":"可以复制到其他应用让机器AI读也可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602389080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106169,"user_name":"小桶","can_delete":false,"product_type":"c1","uid":1184185,"ip_address":"","ucode":"7967FF96CDE753","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/b9/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1561193525,"is_pvip":false,"replies":[{"id":"38429","content":"其他有问题的同学也可以试试。","user_name":"作者回复","comment_id":106169,"uid":"1181974","ip_address":"","utype":1,"ctime":1561259755,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"14446095413","product_id":100029001,"comment_content":"对window一直显示正在连接的问题，我的解决方案是直接使用telnet www.chrono.com 80，而不是使用open www.chrono.com 80","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454985,"discussion_content":"其他有问题的同学也可以试试。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561259755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105042,"user_name":"火车日记","can_delete":false,"product_type":"c1","uid":1480419,"ip_address":"","ucode":"62C57DFA6CDF74","user_header":"https://static001.geekbang.org/account/avatar/00/16/96/e3/dd40ec58.jpg","comment_is_top":false,"comment_ctime":1560908266,"is_pvip":false,"replies":[{"id":"38080","content":"后面的进阶篇再讲。","user_name":"作者回复","comment_id":105042,"uid":"1181974","ip_address":"","utype":1,"ctime":1560917634,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"14445810154","product_id":100029001,"comment_content":"老师有个点是不是漏讲了，头部字段content_type，和body的数据格式","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454534,"discussion_content":"后面的进阶篇再讲。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560917634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104626,"user_name":"苏超","can_delete":false,"product_type":"c1","uid":1025718,"ip_address":"","ucode":"46D659C89BA8C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/b6/27412d76.jpg","comment_is_top":false,"comment_ctime":1560788920,"is_pvip":false,"replies":[{"id":"37862","content":"按照rfc标准，空格可以是零个或多个，但一个空格已经成了约定俗成的习惯。见rfc7230 3.2.3。","user_name":"作者回复","comment_id":104626,"uid":"1181974","ip_address":"","utype":1,"ctime":1560820175,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":3,"score":"14445690808","product_id":100029001,"comment_content":"2. 讲头字段时说“:”后的空格可以有多个，那为什么绝大多数情况下都只使用一个空格呢？<br>请问老师，空格可以一个都不加吧，telnet测试也可以正确返回，为什么还要使用一个空格","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454346,"discussion_content":"按照rfc标准，空格可以是零个或多个，但一个空格已经成了约定俗成的习惯。见rfc7230 3.2.3。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560820175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104308,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1560731301,"is_pvip":true,"replies":[{"id":"37781","content":"是的，RFC有规定，但现实中也有部分不遵守。","user_name":"作者回复","comment_id":104308,"uid":"1181974","ip_address":"","utype":1,"ctime":1560736317,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":1,"score":"14445633189","product_id":100029001,"comment_content":"文中说 http 的头部不能使用下划线，感觉是有问题的，就拿 nginx 来说吧，虽然nginx 默认是忽略下划线的头部的，但是可以设置 underscores_in_headers on;  来获取下划线的头部<br><br>对于常用的 web application 服务器，下划线的头部好像是可以直接获取到的，不用配置什么<br><br>老师你说的不能使用下划线是  RFC规范吗？","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454216,"discussion_content":"是的，RFC有规定，但现实中也有部分不遵守。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560736317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280668,"user_name":"Vera","can_delete":false,"product_type":"c1","uid":2451243,"ip_address":"","ucode":"AA20544249F098","user_header":"https://static001.geekbang.org/account/avatar/00/25/67/2b/3a53ca86.jpg","comment_is_top":false,"comment_ctime":1614310741,"is_pvip":false,"replies":[{"id":"101892","content":"动手实践精神值得大力表扬。<br><br>1.如果在请求行后有多个空行（CRLF），就不符合HTTP报文格式了，所以就会失败。<br><br>2.头字段里可以有多个空格，但content-length表示的是body大小，应该不会改变，变的应该是整个报文长度。","user_name":"作者回复","comment_id":280668,"uid":"1181974","ip_address":"","utype":1,"ctime":1614314459,"user_name_real":"罗剑锋"}],"discussion_count":1,"race_medal":0,"score":"10204245333","product_id":100029001,"comment_content":"1.新手实操之后理解了下，多了个CRLF相当于在请求行输入后直接退出连接，最终发送请求失败。<br>2.测试过多的空格发送后，发现会导致content-length增加。增加冗余的数据大小，所以不建议多写空格","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516173,"discussion_content":"动手实践精神值得大力表扬。\n\n1.如果在请求行后有多个空行（CRLF），就不符合HTTP报文格式了，所以就会失败。\n\n2.头字段里可以有多个空格，但content-length表示的是body大小，应该不会改变，变的应该是整个报文长度。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614314459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234033,"user_name":"Geek_63bb29","can_delete":false,"product_type":"c1","uid":2017041,"ip_address":"","ucode":"65C27FA7531722","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/5kv7IqibneNnMLqtWZQR5f1et8lJmoxiaU43Ttzz3zqW7QzBqMkib8GCtImKsms7PPbWmTB51xRnZQAnRPfA1wVaw/132","comment_is_top":false,"comment_ctime":1594558718,"is_pvip":false,"replies":[{"id":"86371","content":"<br>1.说http是纯文本，当然是只看http，不看下层的tcp、ip了。对比一下，tcp&#47;ip的报文头用的是字节、位，而http用的是明文字符，所以就是纯文本。<br><br>2.http&#47;1纯文本的好处是方便易读，对人类友好，而http&#47;2正相反，易于机器解析。<br><br>可以再看后面的课程加深理解。","user_name":"作者回复","comment_id":234033,"uid":"1181974","ip_address":"","utype":1,"ctime":1594601445,"user_name_real":"罗剑锋"}],"discussion_count":1,"race_medal":0,"score":"10184493310","product_id":100029001,"comment_content":"老师，如何理解“纯文本协议”啊，http报文不是都要加上tcp、ip、mac头，然后二进制流发出去吗？http是纯文本协议，http2是二进制协议，仅看这个特性的话，他两的不同是不是在于，应用层接受到二进制数据以后，http需要将其转换成字符，然后才能确定报文类型，但是http2不要转换前就能确定报文类型，可以这样理解吗？烦请老师指点呀~","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501247,"discussion_content":"\n1.说http是纯文本，当然是只看http，不看下层的tcp、ip了。对比一下，tcp/ip的报文头用的是字节、位，而http用的是明文字符，所以就是纯文本。\n\n2.http/1纯文本的好处是方便易读，对人类友好，而http/2正相反，易于机器解析。\n\n可以再看后面的课程加深理解。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594601445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193785,"user_name":"Gasnerd","can_delete":false,"product_type":"c1","uid":1440263,"ip_address":"","ucode":"3630276571AF66","user_header":"https://static001.geekbang.org/account/avatar/00/15/fa/07/1d50f530.jpg","comment_is_top":false,"comment_ctime":1584963374,"is_pvip":false,"replies":[{"id":"73858","content":"真是很抱歉，当初我考虑用Windows主要是为了大家用起来方便，没想到还有这么多的麻烦事。<br><br>关于操作的问题，确实是表述的不太清楚，没做过客服，有些说法就容易引起误解，再次说声抱歉。","user_name":"作者回复","comment_id":193785,"uid":"1181974","ip_address":"","utype":1,"ctime":1585011525,"user_name_real":"chrono"}],"discussion_count":1,"race_medal":0,"score":"10174897966","product_id":100029001,"comment_content":"hosts的实验终于成了，问题有2：host太容易失效了，用vpn的、代理的都容易干扰hosts，360安全卫士貌似也影响。二是其中表述“右键粘贴文本”这句话容易误导把界面的粘贴功能带过来的剪贴板内容都粘过来，而俩个一起粘贴是有问题的。且表现会很诡异。几个问题交织到一起的时候，就更糟了。多种可能组合，让你简直觉得鬼打墙，而telnet本身在windows的cmd下还有诡异的现象，光标位置乱跳。一个小小的实操，废了我2小时时间。极客时间编辑该反省下自己了。","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488656,"discussion_content":"真是很抱歉，当初我考虑用Windows主要是为了大家用起来方便，没想到还有这么多的麻烦事。\n\n关于操作的问题，确实是表述的不太清楚，没做过客服，有些说法就容易引起误解，再次说声抱歉。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585011525,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107225,"user_name":"右耳朵猫咪","can_delete":false,"product_type":"c1","uid":1014984,"ip_address":"","ucode":"3AB186CC780FBB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/c8/8627f5c1.jpg","comment_is_top":false,"comment_ctime":1561505526,"is_pvip":true,"replies":[{"id":"38801","content":"如果你说的是http认证，应该放在WWW-Authenticate字段里。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561511361,"ip_address":"","comment_id":107225,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10151440118","product_id":100029001,"comment_content":"请问token是不是放在请求头里？","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455428,"discussion_content":"如果你说的是http认证，应该放在WWW-Authenticate字段里。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561511361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1009850,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/68/ba/c0cf8bf3.jpg","nickname":"天天向上卡索","note":"","ucode":"E3724C3B39BD3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":586551,"discussion_content":"应该是 Authorization 请求头吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662336756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":455428,"ip_address":"上海"},"score":586551,"extra":""}]}]},{"had_liked":false,"id":105811,"user_name":"李彬","can_delete":false,"product_type":"c1","uid":1564184,"ip_address":"","ucode":"7536C1DB114CBC","user_header":"https://static001.geekbang.org/account/avatar/00/17/de/18/b2635f3c.jpg","comment_is_top":false,"comment_ctime":1561086515,"is_pvip":false,"replies":[{"id":"38330","content":"我在自己的环境又确认了一下：<br><br>输入&quot; open www.chrono.com 80&quot;，显示“正在连接”，这个时候按“ctrl+]”然后回车。<br><br>进入编辑页面，鼠标右键粘贴请求头，再按回车，服务器就会返回响应报文。<br><br>如果还是不能再现课程里的过程，可以去网上搜一下Windows上Telnet的用法，看有没有解决办法。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561125565,"ip_address":"","comment_id":105811,"utype":1}],"discussion_count":4,"race_medal":0,"score":"10151021107","product_id":100029001,"comment_content":"老师，这个telnet每次编辑模式输入<br>GET &#47;09-1 HTTP&#47;1.1 Host: www.chrono.com或GET &#47; HTTP&#47;1.1 Host: www.chrono.com，按回车都没有发起请求，按一次回车会提示“无效指令”，按两次回车就进入一个完全空白的页面，只能ctrl+z终止，会提示“遗失对主机的连接”，并且报&quot;HTTP&#47;1.1 400 Bad Request(text&#47;html)&quot;，结果现在wireshark只能捕获&quot; open www.chrono.com 80&quot;这个连接动作的tcp三次握手,然后就自动断开连接了","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454820,"discussion_content":"我在自己的环境又确认了一下：\n\n输入&amp;quot; open www.chrono.com 80&amp;quot;，显示“正在连接”，这个时候按“ctrl+]”然后回车。\n\n进入编辑页面，鼠标右键粘贴请求头，再按回车，服务器就会返回响应报文。\n\n如果还是不能再现课程里的过程，可以去网上搜一下Windows上Telnet的用法，看有没有解决办法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561125565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1235562,"avatar":"https://static001.geekbang.org/account/avatar/00/12/da/6a/6b96edbd.jpg","nickname":"学不动了","note":"","ucode":"6855C982ECC3A8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374545,"discussion_content":"网上搜的和童鞋们描述的我都试过了，都无法正常发送报文，用curl替代了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621240930,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440263,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fa/07/1d50f530.jpg","nickname":"Gasnerd","note":"","ucode":"3630276571AF66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212335,"discussion_content":"这里问题太多了，每个人的描述都有歧义和想当然的部分。太诡异了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584961668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1079206,"avatar":"https://static001.geekbang.org/account/avatar/00/10/77/a6/cbdd5056.jpg","nickname":"木子的昼夜","note":"","ucode":"7F025051769E43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1219,"discussion_content":"我也不行 请问解决了嘛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562408921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297743,"user_name":"includestdio.h","can_delete":false,"product_type":"c1","uid":2314854,"ip_address":"","ucode":"5027BACE9319CD","user_header":"https://static001.geekbang.org/account/avatar/00/23/52/66/3e4d4846.jpg","comment_is_top":false,"comment_ctime":1623757482,"is_pvip":true,"replies":[{"id":"108130","content":"good","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1623806374,"ip_address":"","comment_id":297743,"utype":1}],"discussion_count":2,"race_medal":4,"score":"5918724778","product_id":100029001,"comment_content":"1.第一个CRLF后均为body<br>2.节省资源","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521926,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623806374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1687980,"avatar":"https://static001.geekbang.org/account/avatar/00/19/c1/ac/1845668a.jpg","nickname":"梁利锋","note":"","ucode":"417DD2BBAAD813","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586335,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662110284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282370,"user_name":"Geek_Maggie","can_delete":false,"product_type":"c1","uid":1609708,"ip_address":"","ucode":"3B74088B2C7B93","user_header":"https://static001.geekbang.org/account/avatar/00/18/8f/ec/c30b45d4.jpg","comment_is_top":false,"comment_ctime":1615208115,"is_pvip":false,"replies":[{"id":"102542","content":"good","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615246640,"ip_address":"","comment_id":282370,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5910175411","product_id":100029001,"comment_content":"如果拼 HTTP 报文的时候，在头字段后多加了一个 CRLF，导致出现了一个空行，会发生什么？<br>第一个空行以后都会被当作body来处理<br><br>讲头字段时说“:”后的空格可以有多个，那为什么绝大多数情况下都只使用一个空格呢？<br>多个空格就会多传输字节，去掉无用的信息，保证传输的头部字节数尽量小。","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516719,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615246640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204044,"user_name":"勇敢黄瓜","can_delete":false,"product_type":"c1","uid":1150783,"ip_address":"","ucode":"3B6005B4A2CAB8","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/3f/684f858e.jpg","comment_is_top":false,"comment_ctime":1586324087,"is_pvip":false,"replies":[{"id":"76277","content":"回答的很好。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1586325490,"ip_address":"","comment_id":204044,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5881291383","product_id":100029001,"comment_content":"1. 如果拼 HTTP 报文的时候，在头字段后多加了一个 CRLF，导致出现了一个空行，会发生什么？<br>这样会导致server解析报文时，到空行出判断为头部字段已结束，将此空行后面的部分解析为body；如果此空行在Host头前，那么报文会解析错误；如果空行在Host头后，那么报文可以解析，但服务端处理会异常；<br><br><br>2. 讲头字段时说“:”后的空格可以有多个，那为什么绝大多数情况下都只使用一个空格呢？<br>数据的传输总是为了在更短的时间传输更多的数据，使用多个空格造成网络资源浪费，所以只使用一个空格。","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491054,"discussion_content":"回答的很好。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586325490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130270,"user_name":"winner_0715","can_delete":false,"product_type":"c1","uid":1012843,"ip_address":"","ucode":"A033A30539181F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/6b/a98162a1.jpg","comment_is_top":false,"comment_ctime":1567415810,"is_pvip":true,"replies":[{"id":"48672","content":"空行就是两个连续的CRLF，第二个CRLF就是空行了。<br><br>文章里是简略的说法，不是非常准确，大家能达成共识就可以了。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1567472511,"ip_address":"","comment_id":130270,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862383106","product_id":100029001,"comment_content":"空行和CRLF不是同一个东西吧","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465883,"discussion_content":"空行就是两个连续的CRLF，第二个CRLF就是空行了。\n\n文章里是简略的说法，不是非常准确，大家能达成共识就可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567472511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108537,"user_name":"レイン小雨","can_delete":false,"product_type":"c1","uid":1219933,"ip_address":"","ucode":"45BED977EFE852","user_header":"https://static001.geekbang.org/account/avatar/00/12/9d/5d/3fdead91.jpg","comment_is_top":false,"comment_ctime":1561796238,"is_pvip":false,"replies":[{"id":"39416","content":"可能我比较孤陋寡闻，没见过Fetch请求，这个应该是自定义的请求方法吧，标准的就8个。<br><br>只要客户端和服务器双方约定好，用什么方法名都可以，只要能理解就行。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561943447,"ip_address":"","comment_id":108537,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5856763534","product_id":100029001,"comment_content":"老师我请教您一个问题，就是最近做了个ReactNative的项目，里面的网络请求使用的是新一代的浏览器Fetch请求，导致我们在开发的过程中无法在Chrome的开发者工具中查看网络请求，因为它不是一个XHR，我就很迷惑Fetch是处在什么位置，它是特殊的http吗？","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456031,"discussion_content":"可能我比较孤陋寡闻，没见过Fetch请求，这个应该是自定义的请求方法吧，标准的就8个。\n\n只要客户端和服务器双方约定好，用什么方法名都可以，只要能理解就行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561943447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066805,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/35/23458b15.jpg","nickname":"德古拉","note":"","ucode":"F6105053E89FC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288628,"discussion_content":"fetch 是相对于 XHR 来说，新的 HTTP 请求封装方式，本质和 XHR 一样，还是发送 HTTP 请求","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593829321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105111,"user_name":"名曰蓝兮","can_delete":false,"product_type":"c1","uid":1461809,"ip_address":"","ucode":"90E1873682991F","user_header":"https://static001.geekbang.org/account/avatar/00/16/4e/31/3a7e74c1.jpg","comment_is_top":false,"comment_ctime":1560920138,"is_pvip":false,"replies":[{"id":"38084","content":"Linux上的Telnet和Windows的操作不一样，不用那么麻烦，可以直接粘贴数据发送。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560923419,"ip_address":"","comment_id":105111,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855887434","product_id":100029001,"comment_content":"在centos 7系统中，telnet连接主机后，按快捷键ctrl+]进入编辑模式，然后执行模拟请求会报错：?Invalid command，不进入编辑模式就可以正常进行实验了～记录一下","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454562,"discussion_content":"Linux上的Telnet和Windows的操作不一样，不用那么麻烦，可以直接粘贴数据发送。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560923419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104737,"user_name":"Amark","can_delete":false,"product_type":"c1","uid":1121326,"ip_address":"","ucode":"E5F48633654002","user_header":"https://static001.geekbang.org/account/avatar/00/11/1c/2e/93812642.jpg","comment_is_top":false,"comment_ctime":1560824512,"is_pvip":false,"replies":[{"id":"37892","content":"抓包是在整个tcp协议栈，从最底层的mac，所以上面传输的所有数据都能够抓到。<br><br>只要你点开始捕获，之后的http请求响应就都会被抓到，是整个过程。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560828421,"ip_address":"","comment_id":104737,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855791808","product_id":100029001,"comment_content":"请问老师，抓包过程是http请求过程的什么位置拦截的数据包?","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454397,"discussion_content":"抓包是在整个tcp协议栈，从最底层的mac，所以上面传输的所有数据都能够抓到。\n\n只要你点开始捕获，之后的http请求响应就都会被抓到，是整个过程。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560828421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104604,"user_name":"Alex","can_delete":false,"product_type":"c1","uid":1079331,"ip_address":"","ucode":"93F2D5B7DAF97F","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/23/42233378.jpg","comment_is_top":false,"comment_ctime":1560783249,"is_pvip":false,"replies":[{"id":"37850","content":"如果用浏览器连接没问题，那就是正确的。<br><br>Telnet需要先按ctrl+]，然后回车，进入编辑界面。<br><br>另外，别忘了改hosts。<br><br>有问题随时提。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560819353,"ip_address":"","comment_id":104604,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855750545","product_id":100029001,"comment_content":"老师您好，我初次接触openresty，我在open www.chrono.com这一步操作的时候一直连不上，命令行一直显示&quot;正在连接www.chrono.com&quot;,然后过一会就提示&quot;遗失对主机的连接&quot;","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454339,"discussion_content":"如果用浏览器连接没问题，那就是正确的。\n\nTelnet需要先按ctrl+]，然后回车，进入编辑界面。\n\n另外，别忘了改hosts。\n\n有问题随时提。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560819353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104381,"user_name":"　　　　　　　鸟人","can_delete":false,"product_type":"c1","uid":1035165,"ip_address":"","ucode":"E504B22F336035","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/9d/2bc85843.jpg","comment_is_top":false,"comment_ctime":1560741337,"is_pvip":false,"replies":[{"id":"37800","content":"√","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560747130,"ip_address":"","comment_id":104381,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5855708633","product_id":100029001,"comment_content":"1:如果拼 HTTP 报文的时候，在头字段后多加了一个 CRLF，导致出现了一个空行，会发生什么？<br>有可能导致crlf注入","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454249,"discussion_content":"√","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560747130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359847,"user_name":"怪兽","can_delete":false,"product_type":"c1","uid":1324007,"ip_address":"北京","ucode":"3342C55CB83B08","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/e7/145be2f9.jpg","comment_is_top":false,"comment_ctime":1665975763,"is_pvip":false,"replies":[{"id":"130901","content":"404报文也是有内容的，是一个简单的html，报告错误信息，可以在wireshark里看到。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1665991914,"ip_address":"北京","comment_id":359847,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1665975763","product_id":100029001,"comment_content":"老师，有个疑惑，GET &#47;favicon.ico HTTP&#47;1.1”的响应报文的状态码是404，但我看到抓包里的Content-Length: 564\\r\\n，564的长度都有些啥？有什么含义吗？<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590670,"discussion_content":"404报文也是有内容的，是一个简单的html，报告错误信息，可以在wireshark里看到。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665991914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357122,"user_name":"@","can_delete":false,"product_type":"c1","uid":2662715,"ip_address":"北京","ucode":"DDB934E4C76389","user_header":"https://static001.geekbang.org/account/avatar/00/28/a1/3b/b08088bb.jpg","comment_is_top":false,"comment_ctime":1662975626,"is_pvip":false,"replies":[{"id":"129983","content":"great","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1663031171,"ip_address":"北京","comment_id":357122,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1662975626","product_id":100029001,"comment_content":"1，GET-&gt;SELECT;POST-&gt;INSERT;PUT-&gt;UPDATE;DELETE-&gt;DELETE<br>请求头分为请求行和头部字段，请求头又分为请求方法，请求目标，版本号，头部字段就是k-v结构。<br>请求行放 请求方法 请求资源 http版本号 GET参数直接放在头部字段里，其他的放body。<br>2，可以，因为浏览器并没有最终的确认权","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587391,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663031171,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347178,"user_name":"Geek_21a73c","can_delete":false,"product_type":"c1","uid":3014444,"ip_address":"","ucode":"104A4AD89DA6BC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM74658w9PQeTM4TcM14BzfpJnVLrsciaS26ibRwRbCE09ydI6UlZhFrJh7iaVLp2xxhBppVDKLyRRg9Q/132","comment_is_top":false,"comment_ctime":1653794637,"is_pvip":false,"replies":[{"id":"126689","content":"按照http&#47;1.1标准是必须要有的，但有的服务器可能会放松检查，毕竟http是纯文本，格式比较松散。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1654086081,"ip_address":"","comment_id":347178,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653794637","product_id":100029001,"comment_content":"我用python爬虫时，headers中没加host也能成功爬取数据呢，host是一定要加吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574495,"discussion_content":"按照http/1.1标准是必须要有的，但有的服务器可能会放松检查，毕竟http是纯文本，格式比较松散。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654086081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347177,"user_name":"Geek_21a73c","can_delete":false,"product_type":"c1","uid":3014444,"ip_address":"","ucode":"104A4AD89DA6BC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM74658w9PQeTM4TcM14BzfpJnVLrsciaS26ibRwRbCE09ydI6UlZhFrJh7iaVLp2xxhBppVDKLyRRg9Q/132","comment_is_top":false,"comment_ctime":1653794489,"is_pvip":false,"replies":[{"id":"126688","content":"先看hosts是否正确，域名应该是本地环境，如果不行就换虚拟机或者docker。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1654086038,"ip_address":"","comment_id":347177,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653794489","product_id":100029001,"comment_content":"我按照步骤输入命令“open www.chrono.com 80”，但连不上了 Web 服务器。这要怎么办呢","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574494,"discussion_content":"先看hosts是否正确，域名应该是本地环境，如果不行就换虚拟机或者docker。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654086038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346459,"user_name":"Geek_0e3b40","can_delete":false,"product_type":"c1","uid":1908431,"ip_address":"","ucode":"8C5468129A684E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7JkdLdZXNYZeopVSxeI8ml4MptQMCWI7oIHaJpfYuYjlV9Efic7x19lWickckLQzmTuFlgCVmVicZ9A/132","comment_is_top":false,"comment_ctime":1653149171,"is_pvip":false,"replies":[{"id":"126383","content":"great","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1653192100,"ip_address":"","comment_id":346459,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1653149171","product_id":100029001,"comment_content":"关于打开telnet的步骤总结：<br>1. win+R，输入cmd<br>2. 输入telnet www.chrono.com 80<br>3. 到这一步应该在一个全黑的界面，输入ctrl+]<br>4. 回车<br>5. 到这里又到全黑的界面，但这里可以输入http报文了","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573074,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653192101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331856,"user_name":"篂篂点点","can_delete":false,"product_type":"c1","uid":2644570,"ip_address":"","ucode":"475010AFAFA285","user_header":"https://static001.geekbang.org/account/avatar/00/28/5a/5a/29c8c4d6.jpg","comment_is_top":false,"comment_ctime":1642836147,"is_pvip":false,"replies":[{"id":"121352","content":"great","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1643068411,"ip_address":"","comment_id":331856,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1642836147","product_id":100029001,"comment_content":"小结<br>\t1.报文结构，请求报文和响应报文结构基本相同：三大部分<br>\t  1.1起始行：请求（请求行）或响应（状态行）的基本信息。<br>\t    1.1.1请求行结构：请求方法+“空格”+请求目标+“空格”+版本号<br>\t\t如: GET &#47;src HTTP&#47;1.1<br>\t\t     译：服务器你好，我想获取&#47;src目录下的文件，使用的协议版本号为1.1。<br>\t    1.1.2状态行结构：版本号+“空格”+状态码+“空格”+原因<br>\t\t如：HTTP&#47;1.1 200 OK<br>\t\t     译：浏览器你好，我已经处理完了你的请求，使用协议版本1.1，状态码200，一切ok<br>\t  1.2头部字段集合：使用key-value形式更详细的说明报文。<br>\t    1.2.1结构：key:value形式，不区分大小写、顺序任意、除了规定的标准头、可任意添加自定义字段，实现功能扩展。<br>\t    1.2.2必要字段：请求头中必须有host，用于标记虚拟主机名。<br>\t\t  解决的问题：当同一个ip:127.0.0.1上有三个虚拟主机A、B、C时，需要host字段区分这三个ip相同但域名不同的网站。否则找不到合适的虚拟主机无法处理。<br>\t  1.3消息正文：实际传输的数据，纯文本或超文本。<br>\t2.其他称呼<br>\t\t请求头 || 响应头（header）：1.1+1.2（header）：1.1 + 1.2<br>\t\t消息正文（实体）（body）：1.3<br>\t3.http协议规定，必须有header（且header后必须有个空行，空行后被认为是body），可以没有body。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548161,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643068411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330595,"user_name":"ZwY","can_delete":false,"product_type":"c1","uid":2844029,"ip_address":"","ucode":"FD21CC47B498EF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/8rwIOvZ5wsIGxIGqGWmKLHFgkBDq60NiafeEYpPxUoW8O7ic0BQ83vDRaqHSs4o1koYXo29kSTT1ySIGaVcyoWTQ/132","comment_is_top":false,"comment_ctime":1642063171,"is_pvip":false,"replies":[{"id":"120590","content":"host字段在http&#47;1.1标准里要求必须有，否则就是报文错误，建议再仔细检查一下，是否哪里漏看了。","user_name":"作者回复","user_name_real":"编辑","uid":"1181974","ctime":1642120074,"ip_address":"","comment_id":330595,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1642063171","product_id":100029001,"comment_content":"想询问老师和各位大佬一个问题，老师的这篇文章说请求头中的Host字段是必要的，但我观察Google.com的请求头似乎没有Host这一字段，这是为什么呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545975,"discussion_content":"host字段在http/1.1标准里要求必须有，否则就是报文错误，建议再仔细检查一下，是否哪里漏看了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642120074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320338,"user_name":"路漫漫","can_delete":false,"product_type":"c1","uid":1273044,"ip_address":"","ucode":"F70F1DC612DE9D","user_header":"https://static001.geekbang.org/account/avatar/00/13/6c/d4/85ef1463.jpg","comment_is_top":false,"comment_ctime":1636265173,"is_pvip":false,"replies":[{"id":"116140","content":"很好读吧，wire - shark。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1636275599,"ip_address":"","comment_id":320338,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1636265173","product_id":100029001,"comment_content":"Wireshark 改怎么读呀","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529963,"discussion_content":"很好读吧，wire - shark。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636275599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306349,"user_name":"第二少","can_delete":false,"product_type":"c1","uid":1004264,"ip_address":"","ucode":"4A09D1E7589F67","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/e8/92a2e66d.jpg","comment_is_top":false,"comment_ctime":1628506704,"is_pvip":true,"replies":[{"id":"110921","content":"说的很好！","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1628556876,"ip_address":"","comment_id":306349,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1628506704","product_id":100029001,"comment_content":"问题1：如果空行出现在所有头字段之后，那空行之后的内容会被认为是body；如果是在两个头字段之间多了一个空格，会导致 400 BAD REQUEST!  注：在macos上，用本课程介绍的实验环境测试，使用nc命令发请求<br><br>→ cat &lt;&lt; EOF | nc localhost 80                                                                                      <br>pipe heredoc&gt; GET &#47;09-1 HTTP&#47;1.1<br>pipe heredoc&gt;<br>pipe heredoc&gt; Host: www.chrono.com<br>pipe heredoc&gt;<br>pipe heredoc&gt; EOF<br><br>HTTP&#47;1.1 400 Bad Request<br>Server: openresty&#47;1.19.3.2<br>Date: Mon, 09 Aug 2021 10:25:48 GMT<br>Content-Type: text&#47;html<br>Content-Length: 163<br>Connection: close<br><br>问题2：多个空格并无实际意义，反而增加了header的数据量，应尽量避免这种无意义的数据量增加","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524727,"discussion_content":"说的很好！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628556876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004264,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/e8/92a2e66d.jpg","nickname":"第二少","note":"","ucode":"4A09D1E7589F67","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388056,"discussion_content":"纠正一下，“两个头字段之间多了一个空格”应为“两个头字段之间多了一个空行”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628570554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":303409,"user_name":"juan","can_delete":false,"product_type":"c1","uid":2461934,"ip_address":"","ucode":"8DCF9945009E3E","user_header":"https://static001.geekbang.org/account/avatar/00/25/90/ee/5159784f.jpg","comment_is_top":false,"comment_ctime":1626773090,"is_pvip":false,"replies":[{"id":"109840","content":"当然可以带下划线了，比如这个：https:&#47;&#47;hub.docker.com&#47;_&#47;nginx","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1626829106,"ip_address":"","comment_id":303409,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626773090","product_id":100029001,"comment_content":"老师，请问访问路径中的path可以带下划线吗？发现我们这边路径中带下划线的用例跑的时候就会卡住，但自动运行的报告中也能通过，不知道是不是下划线的原因。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523665,"discussion_content":"当然可以带下划线了，比如这个：https://hub.docker.com/_/nginx","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626829106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302988,"user_name":"兔嘟嘟","can_delete":false,"product_type":"c1","uid":2028811,"ip_address":"","ucode":"5A9042B4C7670C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/0b/73628618.jpg","comment_is_top":false,"comment_ctime":1626495667,"is_pvip":false,"replies":[{"id":"109654","content":"建议用docker，不但能够学http，还能学容器化。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1626529021,"ip_address":"","comment_id":302988,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1626495667","product_id":100029001,"comment_content":"浪费了一个小时的生命......win10下的telnet就是用不了。后面直接vscode装一个REST client，创建http文件输入http报文，也能实现本节课的功能","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523505,"discussion_content":"建议用docker，不但能够学http，还能学容器化。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626529021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297191,"user_name":"juan","can_delete":false,"product_type":"c1","uid":2461934,"ip_address":"","ucode":"8DCF9945009E3E","user_header":"https://static001.geekbang.org/account/avatar/00/25/90/ee/5159784f.jpg","comment_is_top":false,"comment_ctime":1623371815,"is_pvip":false,"replies":[{"id":"107940","content":"<br>1.get当然可以有body了，只是现在很少有这么用的。<br><br>2.现在发送大量数据一般都用post+body，我估计可能是早期后端服务程序不太会处理get+body导致的，已经成为了一种约定俗成，不能说完全合理，但也没办法。<br><br>3.请求头一般4k-8k吧，在nginx用的默认值是4*8k。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1623381237,"ip_address":"","comment_id":297191,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1623371815","product_id":100029001,"comment_content":"get类型的请求可以有body吗？如果请求参数的内容过多，防止请求头过长，是不是可以把get改为post，把过长的请求参数放到body里面啊？我们这面的开发是这么处理的，不知道是否合理，盼老师解答。另外请求头一般多长算超长呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521756,"discussion_content":"\n1.get当然可以有body了，只是现在很少有这么用的。\n\n2.现在发送大量数据一般都用post+body，我估计可能是早期后端服务程序不太会处理get+body导致的，已经成为了一种约定俗成，不能说完全合理，但也没办法。\n\n3.请求头一般4k-8k吧，在nginx用的默认值是4*8k。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623381237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297159,"user_name":"忙了你个狗","can_delete":false,"product_type":"c1","uid":2628906,"ip_address":"","ucode":"DB46648E82495C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Lop0uAwiawHbqgRFYqIZv2YbFMJSeDePB0fia3j6joQQ3sddhvgpic6ibXLkva572O6dWS3QzicOibJGjr4QjrNXEgwg/132","comment_is_top":false,"comment_ctime":1623333366,"is_pvip":false,"replies":[{"id":"107933","content":"看信息，应该是连接上了实验环境的openresty，只是发送的数据不对，试着在ctrl+]回车之后，粘贴课程里的http请求数据，例如GET xxx http&#47;1.1。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1623373439,"ip_address":"","comment_id":297159,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1623333366","product_id":100029001,"comment_content":"我不行了，整了一个晚上，都没能把实验的内容复现。现在的情况是这样，输入open www.chrono.com 80之后，就显示正在连接www.chrono.com...，然后我按ctrl+]，再回车，进入一个没有内容的界面，然后我按一个任意键(这里按的是a)，就显示：<br>aHTTP&#47;1.1 400 Bad Request<br>Server: openresty&#47;1.19.3.2<br>Date: Thu, 10 Jun 2021 13:55:08 GMT<br>Content-Type: text&#47;html<br>Content-Length: 163<br>Connection: close<br><br>&lt;html&gt;<br>&lt;head&gt;&lt;title&gt;400 Bad Request&lt;&#47;title&gt;&lt;&#47;head&gt;<br>&lt;body&gt;<br>&lt;center&gt;&lt;h1&gt;400 Bad Request&lt;&#47;h1&gt;&lt;&#47;center&gt;<br>&lt;hr&gt;&lt;center&gt;openresty&#47;1.19.3.2&lt;&#47;center&gt;<br>&lt;&#47;body&gt;<br>&lt;&#47;html&gt;<br><br><br>遗失对主机的连接。<br><br>按任意键继续...<br>然后按任意键就退出了，有大哥知道解决方案吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521739,"discussion_content":"看信息，应该是连接上了实验环境的openresty，只是发送的数据不对，试着在ctrl+]回车之后，粘贴课程里的http请求数据，例如GET xxx http/1.1。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623373439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2655964,"avatar":"https://static001.geekbang.org/account/avatar/00/28/86/dc/be1b17d8.jpg","nickname":"Geek_648c53","note":"","ucode":"51F87D92B3BD05","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577307,"discussion_content":"我也是报这个问题，输入什么都是一样，输入一个字符就抛错误","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656035629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294953,"user_name":"hao","can_delete":false,"product_type":"c1","uid":2368078,"ip_address":"","ucode":"371A47DD4510E7","user_header":"https://static001.geekbang.org/account/avatar/00/24/22/4e/2e081d9c.jpg","comment_is_top":false,"comment_ctime":1622165275,"is_pvip":false,"replies":[{"id":"107069","content":"RFC有规定，必须要有空格，可以自己改字段试试看。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1622169184,"ip_address":"","comment_id":294953,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622165275","product_id":100029001,"comment_content":"想问以下思考2中，头字段&quot;:&quot;后的空格为何绝大数情况下都会使用一个空格，如果是为了去掉无用信息，保证传输的头部字节数尽量小，那么完全可以不加上这一个空格 - 头字段又没有规定一定要有空格","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520894,"discussion_content":"RFC有规定，必须要有空格，可以自己改字段试试看。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622169184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":294536,"user_name":"BoyiKia","can_delete":false,"product_type":"c1","uid":1983680,"ip_address":"","ucode":"D37541B4451D6B","user_header":"https://static001.geekbang.org/account/avatar/00/1e/44/c0/cd2cd082.jpg","comment_is_top":false,"comment_ctime":1621992083,"is_pvip":false,"replies":[{"id":"106901","content":"对，它们都是同一个ip地址，但又是域名不同的主机，所以才叫“虚拟主机”，需要web server基于host字段做区分。<br><br>比如用NGINX当web server，当请求通过ip地址到达NGINX之后，它就会提取host字段，再找到对应的server块提供服务，实现了一个ip地址上多个虚拟主机的服务。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1622018437,"ip_address":"","comment_id":294536,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1621992083","product_id":100029001,"comment_content":"例如我们的试验环境，在 127.0.0.1 上有三个虚拟主机：“www.chrono.com”“www.metroid.net”和“origin.io”。那么当使用域名的方式访问时....<br><br><br>老师  请问下:每个域名对应确定IP。在当前条件下，我访问  例子中的三个不同域名，最终 报文  都只能到达  127.0.0.1  &#39;这台主机上。  如何  理解  可以对应到达不同的虚拟主机呢?这几个虚拟主机 不是共用一个网卡吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520702,"discussion_content":"对，它们都是同一个ip地址，但又是域名不同的主机，所以才叫“虚拟主机”，需要web server基于host字段做区分。\n\n比如用NGINX当web server，当请求通过ip地址到达NGINX之后，它就会提取host字段，再找到对应的server块提供服务，实现了一个ip地址上多个虚拟主机的服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622018437,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1808206,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJoOia8n2xdlIAZkJJZ9hflv3rMENqGGuxYRSsYE8bIpXiaQfAbfH7qVmiaJAyVEiaEj6sP9BRlIWWqRA/132","nickname":"hzs","note":"","ucode":"6844D91F80286E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384179,"discussion_content":"比如用NGINX当web server，当请求通过ip地址到达NGINX之后，它就会提取host字段，再找到对应的server块提供服务，实现了一个ip地址上多个虚拟主机的服务。\n\n\nhost字段究竟是ip还是域名呢？如果是ip的话，nginx等服务器提取host字段也确定不了就是请求哪台虚拟主机吧\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626416595,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1983680,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/44/c0/cd2cd082.jpg","nickname":"BoyiKia","note":"","ucode":"D37541B4451D6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376235,"discussion_content":"懂了  多谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622031466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293139,"user_name":"学不动了","can_delete":false,"product_type":"c1","uid":1235562,"ip_address":"","ucode":"6855C982ECC3A8","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/6a/6b96edbd.jpg","comment_is_top":false,"comment_ctime":1621240772,"is_pvip":true,"replies":[{"id":"106124","content":"没有影响，不管是telnet还是curl都是客户端，只不过用telnet能够比较方便地看到发送的原始报文，curl会加上一些自定义的头字段。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1621254377,"ip_address":"","comment_id":293139,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1621240772","product_id":100029001,"comment_content":"试了好几次，也搜不到类似的情况，一直卡在了telnet无法进入编辑模式，最后换成curl发报文了～想问问老师，用curl发报文是否有影响？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520091,"discussion_content":"没有影响，不管是telnet还是curl都是客户端，只不过用telnet能够比较方便地看到发送的原始报文，curl会加上一些自定义的头字段。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621254377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291282,"user_name":"Unknown element","can_delete":false,"product_type":"c1","uid":2028277,"ip_address":"","ucode":"34A129800D0238","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","comment_is_top":false,"comment_ctime":1620180730,"is_pvip":false,"replies":[{"id":"105525","content":"可能是超时被主动断开了吧，重新登录连接一下应该就可以了。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1620259318,"ip_address":"","comment_id":291282,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1620180730","product_id":100029001,"comment_content":"telnet链接服务器的时候提示“遗失对主机的连接”怎么解决？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519427,"discussion_content":"可能是超时被主动断开了吧，重新登录连接一下应该就可以了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620259318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289564,"user_name":"水煮我尘浮","can_delete":false,"product_type":"c1","uid":1463726,"ip_address":"","ucode":"970C2708746DE3","user_header":"https://static001.geekbang.org/account/avatar/00/16/55/ae/009ad70c.jpg","comment_is_top":false,"comment_ctime":1619083023,"is_pvip":false,"replies":[{"id":"105079","content":"<br>1.空格允许多个。<br><br>2.CRLF是协议规定，必须是这样，否则就是格式错误。<br><br>这些问题都可以用Telnet做个试验，印象会更深刻。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1619140062,"ip_address":"","comment_id":289564,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619083023","product_id":100029001,"comment_content":"老师，第一个问题：请问请求行中的‘Method’和‘URI’以及‘Version’之间的空格，是只能是一个，还是也可以是多个空格？查了相应的RFC文件，并没有明确说可以有几个空格。<br>第二个问题：请问请求行结尾一定要加上CRLF吗？如果CR、LF或者LFCR这种可行吗？同理如果是代理的话，第一行结尾一定要加上CRLF吗？如果CR、LF或者LFCR这种可行吗？<br>求解答，谢谢老师<br><br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518951,"discussion_content":"\n1.空格允许多个。\n\n2.CRLF是协议规定，必须是这样，否则就是格式错误。\n\n这些问题都可以用Telnet做个试验，印象会更深刻。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619140062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287629,"user_name":"born","can_delete":false,"product_type":"c1","uid":1164840,"ip_address":"","ucode":"3F097B2EE52478","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLzJr3dmr96ULaeQQJrslQcSZfH8fwPug8q42Y69q0daYarUbx1b0U1iadjcTtOmUicDnlx968SLLkw/132","comment_is_top":false,"comment_ctime":1618057607,"is_pvip":false,"replies":[{"id":"104451","content":"可以试试docker环境，看后面的答疑篇，它的环境比较简单存粹，没有太多干扰，适合做实验。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1618062577,"ip_address":"","comment_id":287629,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618057607","product_id":100029001,"comment_content":"我host文件里面已经加了映射但打开网页始终打不开，只有localhost可用。还有Telnet是真难用，即使连上了输入也总是出问题，只输入一部分就直接跳转bad request了。。。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518372,"discussion_content":"可以试试docker环境，看后面的答疑篇，它的环境比较简单存粹，没有太多干扰，适合做实验。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618062577,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287394,"user_name":"Leolee","can_delete":false,"product_type":"c1","uid":1928428,"ip_address":"","ucode":"2EC31B0AE5B03D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/8SdpYbicwXVXt0fIN7L0f2TSGIScQIhWXT7vTze9GHBsjTvDyyQW9KEPsKBpRNs4anV61oF59BZqHf586b3o4ibw/132","comment_is_top":false,"comment_ctime":1617930481,"is_pvip":false,"replies":[{"id":"104391","content":"总结的非常完整，awsome。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1617945986,"ip_address":"","comment_id":287394,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617930481","product_id":100029001,"comment_content":"作业：<br>1.header后紧跟的第一个空行后的内容都视为body，包括空行；<br>2.通常都打一个空格是为了节省资源，减少不必要的浪费。<br>HTTP报文小结：<br>1.HTTP报文结构简单来说就是：header +body，就像“大头儿子”，由“起始行+头部+空行+实体”组成，可以无body，必须有header、neck（空行）；<br><br><br>2.  头部（头部又叫请求头、响应头）构成<br>·请求头由“请求行+头部字段”构成，响应头由“状态行＋头部字段”构成；<br>·请求行有三部分：请求方法+请求目标＋版本号<br>·响应行有三部分：版本号＋状态码＋原因字符串<br><br><br>完整的请求头和响应头：<br><br>3.头部字段：<br>·头部字段以key-value形式写成，它非常灵活，除了使用标准的Host，connection等已有头，也可以任意添加自定义头，这就给HTTP协议带来了无限的扩展可能；<br>·头部字段注意事项：<br>    1.字段名不区分大小写，但推荐首字母大写；<br>    2.字段名不允许出现空格、下划线，可以使用连字符“-”;<br>    3.字段名后面接“：”，：前不能有空格，：后可以有多个空格；<br>    4.字段的顺序是么样意义的，可以任意排列不影响语义；<br>    5.字段原则上不能重复，除非这个字段本身的语义允许，例如Set-cookie。<br>HTTP四类大常用头字段：<br>1.通用字段：在请求头和响应头里都可以出现；<br>2.请求字段：仅能出现在请求头里，进一步说明请求信息或者额外的附加条件；<br>3.响应字段：仅能出现在响应头里，补充说明响应报文的信息；<br>4.实体字段：它实际上属于通用字段，但专门描述body的额外信息。<br>划重点！！！对HTTP报文的解析和处理实际上主要就是怼头字段的处理，理解了头字段也就理解了HTTP报文。<br><br>4.常用头的作用，理解这些就能看懂大多数的报文了：<br>·HTTP&#47;1.1里唯一要求必须要提供的头字段是Host，它必须出现在请求头里，标记虚拟主机名，否则当存在多个虚拟主机名时，就会找不到合适的虚拟主机，无法处理。<br>·User-Agent是请求字段，只出现在请求头里。它使用一个字符串来描述发起HTTP请求的客户端，服务器可以一句它来返回最合适此浏览器显示的页面。但由于历史原因，它非常混乱，每个浏览器都自称是&quot;Mozilla&quot;、&quot;Chrome&quot;、&quot;Safari&quot;,企图使用这个字段来互相“伪装”,导致它变得越来越长，最终变得毫无意义。<br>不过有的比较“诚实”的爬虫会在这个字段用“spider”表明自己是爬虫，所以可以利用这个字段实现简单的反爬虫策略。<br>·Date字段是一个通用字段，但通常出现在响应头里，表示HTTP报文创建的时间，客户端可以使用这个时间再搭配其他字段决定缓存策略。<br>·Server字段是响应字段，只能出现在响应头里。它告诉客户端当前正在提供Web服务的软件名称和版本号。<br>Server字段也不是必须要出现的，因为这会把服务器的一部分信息暴露给外界，如果这个版本恰好存在bug，那么黑客就有可能利用bug攻陷服务器。所以，有的响应头里要么没有这个字段，要么就给出一个完全无关的描述信息。<br>·Content-Length表示报文里body的长度，也就是请求头或响应头空行后面数据的长度。服务器看到这个字段，就知道了后续有多少数据，可以直接接收。如果没有这个字段，那么body就是不定长的，需要使用chunked方式分段传输。<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518288,"discussion_content":"总结的非常完整，awsome。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617945986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287171,"user_name":"飞翔的葱油饼","can_delete":false,"product_type":"c1","uid":1402668,"ip_address":"","ucode":"42865E09C7F899","user_header":"https://static001.geekbang.org/account/avatar/00/15/67/2c/ee3c2d36.jpg","comment_is_top":false,"comment_ctime":1617802762,"is_pvip":false,"replies":[{"id":"104284","content":"非常好的经验分享。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1617843967,"ip_address":"","comment_id":287171,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1617802762","product_id":100029001,"comment_content":"通过telnet运行open www.chrono.com 80，一直显示正在连接。但是从wireshark的抓包情况来看，已经通过了tcp的3次握手。此时可以直接Ctrl +]进入telnet，随后运行st命令能够查看到当时连接状态是&quot;已连接到www.chrono.com&quot;。此时再敲回车，即可进入编辑模式。输入HTTP请求报文后，连续敲2次回车即可发送。参考该门课程另一位同学的csdn博客 https:&#47;&#47;blog.csdn.net&#47;a66666_&#47;article&#47;details&#47;104002883","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518214,"discussion_content":"非常好的经验分享。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617843967,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282699,"user_name":"刘杰","can_delete":false,"product_type":"c1","uid":2460800,"ip_address":"","ucode":"5B3A55700D6063","user_header":"https://static001.geekbang.org/account/avatar/00/25/8c/80/7310baac.jpg","comment_is_top":false,"comment_ctime":1615367941,"is_pvip":false,"replies":[{"id":"102628","content":"对。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1615422241,"ip_address":"","comment_id":282699,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1615367941","product_id":100029001,"comment_content":"1、头字段后加一个CRLF，后面的部分会当做body传给服务器<br>2、用多个空格，会增加传输数据","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516815,"discussion_content":"对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615422241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280380,"user_name":"Geek_b0153c","can_delete":false,"product_type":"c1","uid":2281797,"ip_address":"","ucode":"99B4D5516340E7","user_header":"","comment_is_top":false,"comment_ctime":1614173768,"is_pvip":false,"replies":[{"id":"101790","content":"nice. ","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1614207032,"ip_address":"","comment_id":280380,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1614173768","product_id":100029001,"comment_content":"Telnet连接成功后，按两下回车进入黑屏界面，此时再输入代码，按两下回车发送代码","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516077,"discussion_content":"nice. ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614207032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279703,"user_name":"陈启航","can_delete":false,"product_type":"c1","uid":2177436,"ip_address":"","ucode":"89246B9BFD3269","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLC4IhKmJDYdWhQms3dmZqJ5YMDGTlPa1o52DnKSErYjsqfc6iaRJrBDZpx0RqQx7eZAED797kiaV6aw/132","comment_is_top":false,"comment_ctime":1613914788,"is_pvip":true,"replies":[{"id":"101603","content":"nginx可以配置指令，允许字段里使用下划线，当然这个应该是不推荐的，只是为了某些特殊情况。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1613961341,"ip_address":"","comment_id":279703,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1613914788","product_id":100029001,"comment_content":"不能有下划线 以前踩过坑 会莫名其妙被nginx吃参数","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515844,"discussion_content":"nginx可以配置指令，允许字段里使用下划线，当然这个应该是不推荐的，只是为了某些特殊情况。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613961341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277426,"user_name":"Mèow","can_delete":false,"product_type":"c1","uid":2305734,"ip_address":"","ucode":"E5103990D01395","user_header":"https://static001.geekbang.org/account/avatar/00/23/2e/c6/1ebf8edd.jpg","comment_is_top":false,"comment_ctime":1612409453,"is_pvip":false,"replies":[{"id":"100688","content":"厉害，vs code还可以这么用。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1612487211,"ip_address":"","comment_id":277426,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1612409453","product_id":100029001,"comment_content":"前端同学vscode都有吧，装一个REST Client插件，就可以新建一个.http文件发送请求了","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515049,"discussion_content":"厉害，vs code还可以这么用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612487211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272771,"user_name":"乘风破浪","can_delete":false,"product_type":"c1","uid":2406841,"ip_address":"","ucode":"937AF15F3FEBDC","user_header":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","comment_is_top":false,"comment_ctime":1610271447,"is_pvip":false,"replies":[{"id":"98897","content":"这个不应该吧，是不是看错了。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1610332098,"ip_address":"","comment_id":272771,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1610271447","product_id":100029001,"comment_content":"对wireshark抓包大小不是很理解，按说它的大小应该是整个包的大小，就09-1而言，Context-length:923,而它显示的报文大小是50，不知何意？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513379,"discussion_content":"这个不应该吧，是不是看错了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610332098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"乘风破浪","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347276,"discussion_content":"明白为什么字节大小不一致了，和HTTP协议的设置有关，Reassemable http header/body...，缺省打开，则只显示这个HTTP包中的第一个tcp包。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612185828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"乘风破浪","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341164,"discussion_content":"没有看错，可能是wireshark的bug吧,我用的是3.4.0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610334905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272185,"user_name":"牛","can_delete":false,"product_type":"c1","uid":2382521,"ip_address":"","ucode":"12C46025BBA2D3","user_header":"","comment_is_top":false,"comment_ctime":1609984031,"is_pvip":false,"replies":[{"id":"98691","content":"嗯，Telnet的工作方式在各个操作系统里不太一致，还好差异不是太大，Windows里有点麻烦。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1609988128,"ip_address":"","comment_id":272185,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1609984031","product_id":100029001,"comment_content":"telnet小白留言：<br>MacOS系统使用telnet发送Get请求时有个坑，在执行oepn www.chrono.com 80命令，连接上了服务器之后，已经直接进入了编辑模式，无需使用提示的快捷键切换模式了。<br><br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513193,"discussion_content":"嗯，Telnet的工作方式在各个操作系统里不太一致，还好差异不是太大，Windows里有点麻烦。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609988128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":254109,"user_name":"李皮皮皮皮皮","can_delete":false,"product_type":"c1","uid":1200281,"ip_address":"","ucode":"3BF1DEE4A12359","user_header":"https://static001.geekbang.org/account/avatar/00/12/50/99/44378317.jpg","comment_is_top":false,"comment_ctime":1603067559,"is_pvip":false,"replies":[{"id":"92788","content":"笑，希望能够帮到你。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1603070838,"ip_address":"","comment_id":254109,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1603067559","product_id":100029001,"comment_content":"大头儿子的比喻太赞了，这下一辈子都忘不了了","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507285,"discussion_content":"笑，希望能够帮到你。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603070838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246985,"user_name":" 尿布","can_delete":false,"product_type":"c1","uid":1476323,"ip_address":"","ucode":"D1C8BDA7540962","user_header":"https://static001.geekbang.org/account/avatar/00/16/86/e3/a31f6869.jpg","comment_is_top":false,"comment_ctime":1599550426,"is_pvip":false,"replies":[{"id":"90748","content":"nice。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1599612910,"ip_address":"","comment_id":246985,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599550426","product_id":100029001,"comment_content":"在Nginx里面，默认的请求头大小不能超过8K，但可以用指令“large_client_header_buffers”修改","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505281,"discussion_content":"nice。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599612910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245864,"user_name":"xing.org1^","can_delete":false,"product_type":"c1","uid":1374066,"ip_address":"","ucode":"C68AEA172B1623","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/72/2d35f80c.jpg","comment_is_top":false,"comment_ctime":1599097487,"is_pvip":false,"replies":[{"id":"90418","content":"因为请求和响应可以使用不同版本的协议，比如请求用1.0，响应用1.1。<br><br>但这个版本号的确用途不大，只能说是当初设计时欠考虑吧。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1599124660,"ip_address":"","comment_id":245864,"utype":1}],"discussion_count":2,"race_medal":1,"score":"1599097487","product_id":100029001,"comment_content":"老师请问下，请求行里已经表明了http版本号，服务器按理说按要求响应就行了，为啥状态行里还再次返回一个http版本号呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504996,"discussion_content":"因为请求和响应可以使用不同版本的协议，比如请求用1.0，响应用1.1。\n\n但这个版本号的确用途不大，只能说是当初设计时欠考虑吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599124660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1374066,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f7/72/2d35f80c.jpg","nickname":"xing.org1^","note":"","ucode":"C68AEA172B1623","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303154,"discussion_content":"好，谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599157574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229833,"user_name":"酱油党","can_delete":false,"product_type":"c1","uid":1262907,"ip_address":"","ucode":"B342FD4878DEAD","user_header":"https://static001.geekbang.org/account/avatar/00/13/45/3b/c938ff45.jpg","comment_is_top":false,"comment_ctime":1593158791,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593158791","product_id":100029001,"comment_content":"_ 应该是nginx默认不转发的内容，实际上应该可以带，之前试过配置","like_count":0},{"had_liked":false,"id":226176,"user_name":"潇潇雨歇","can_delete":false,"product_type":"c1","uid":1251429,"ip_address":"","ucode":"4BD52BF0F0A084","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","comment_is_top":false,"comment_ctime":1591971734,"is_pvip":false,"replies":[{"id":"83332","content":"good。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592023570,"ip_address":"","comment_id":226176,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591971734","product_id":100029001,"comment_content":"2、节省资源，空行也算字节的","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498134,"discussion_content":"good。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592023570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226175,"user_name":"潇潇雨歇","can_delete":false,"product_type":"c1","uid":1251429,"ip_address":"","ucode":"4BD52BF0F0A084","user_header":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","comment_is_top":false,"comment_ctime":1591971697,"is_pvip":false,"replies":[{"id":"83333","content":"good","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1592023578,"ip_address":"","comment_id":226175,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1591971697","product_id":100029001,"comment_content":"1、空行后的都被当作实体，也就是body<br>2、第一是格式问题，太多空格首先不直观，不规范，比较乱；2、遵守一个空格的写法比较好处理，看着也清晰","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498133,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592023578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251429,"avatar":"https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg","nickname":"潇潇雨歇","note":"","ucode":"4BD52BF0F0A084","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282592,"discussion_content":"没早点买这专栏，哈哈😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592023623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225082,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1591631720,"is_pvip":true,"replies":[{"id":"82877","content":"这样就会导致header和body的内容错乱了，header缺字段，而body多了不该有的内容。<br><br>当然这个对于http协议来说是看不到的，格式上正确，但内容错误。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1591668169,"ip_address":"","comment_id":225082,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1591631720","product_id":100029001,"comment_content":"头字段后多了一个CRLF，会被当做body处理。 <br>请问下老师，多出的这个CRLF被当成了body来处理，除了增加了content-length，对请求或者响应还会有什么其他影响吗","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497721,"discussion_content":"这样就会导致header和body的内容错乱了，header缺字段，而body多了不该有的内容。\n\n当然这个对于http协议来说是看不到的，格式上正确，但内容错误。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591668169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225072,"user_name":"Maske","can_delete":false,"product_type":"c1","uid":1696847,"ip_address":"","ucode":"A19BB41A47E852","user_header":"https://static001.geekbang.org/account/avatar/00/19/e4/4f/df6d810d.jpg","comment_is_top":false,"comment_ctime":1591629504,"is_pvip":true,"replies":[{"id":"82879","content":"<br>1.不对，建议看看其他同学的回答。<br><br>2.对。","user_name":"作者回复","user_name_real":"罗剑锋","uid":"1181974","ctime":1591668361,"ip_address":"","comment_id":225072,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1591629504","product_id":100029001,"comment_content":"1.无影响；<br>2.由于http请求中的内容是纯文本，多余的空格会增加Content-length，增加无谓的字节数 ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497719,"discussion_content":"\n1.不对，建议看看其他同学的回答。\n\n2.对。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591668361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2406841,"avatar":"https://static001.geekbang.org/account/avatar/00/24/b9/b9/9e4d7aa4.jpg","nickname":"乘风破浪","note":"","ucode":"937AF15F3FEBDC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347299,"discussion_content":"2不对，content-length统计的是body的长度和http header是否增加字节没有关系。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612190051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218448,"user_name":"do it","can_delete":false,"product_type":"c1","uid":1309911,"ip_address":"","ucode":"E0753912E8F2AF","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/d7/b102034a.jpg","comment_is_top":false,"comment_ctime":1589803720,"is_pvip":false,"replies":[{"id":"80786","content":"good","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1589845099,"ip_address":"","comment_id":218448,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589803720","product_id":100029001,"comment_content":"问题<br>1、如果拼 HTTP 报文的时候，在头字段后多加了一个 CRLF，导致出现了一个空行，会发生什么？<br>     会导致空行后的数据都为body的内容<br>2、讲头字段时说“:”后的空格可以有多个，那为什么绝大多数情况下都只使用一个空格呢？<br>     节省传输容量","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495461,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589845099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218430,"user_name":"我母鸡啊！","can_delete":false,"product_type":"c1","uid":1633705,"ip_address":"","ucode":"7BFB14BC99E978","user_header":"https://static001.geekbang.org/account/avatar/00/18/ed/a9/662318ab.jpg","comment_is_top":false,"comment_ctime":1589801175,"is_pvip":false,"replies":[{"id":"80787","content":"nice","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1589845109,"ip_address":"","comment_id":218430,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589801175","product_id":100029001,"comment_content":"1.第一个空格后的东西 都会被当成body<br>2.多一个空格就会多传输一个字节，需要节省网络的开支","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495456,"discussion_content":"nice","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589845109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208926,"user_name":"电光火石","can_delete":false,"product_type":"c1","uid":1013160,"ip_address":"","ucode":"3AD33BB4AA940F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg","comment_is_top":false,"comment_ctime":1587465595,"is_pvip":false,"replies":[{"id":"78118","content":"会影响，Content-Length会是压缩后的大小。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1587516533,"ip_address":"","comment_id":208926,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587465595","product_id":100029001,"comment_content":"启用gzip会影响Content-Length的大小吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492674,"discussion_content":"会影响，Content-Length会是压缩后的大小。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587516533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":200690,"user_name":"神烦恼","can_delete":false,"product_type":"c1","uid":1919322,"ip_address":"","ucode":"2E7BE09DE5E95A","user_header":"","comment_is_top":false,"comment_ctime":1585638517,"is_pvip":false,"replies":[{"id":"75097","content":"你理解的对。<br><br>其实请求头这个名字的含义比较宽泛，有时候指请求行+头字段，有时候又不含请求行，只要你自己理解就好，不必特别计较。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585640626,"ip_address":"","comment_id":200690,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585638517","product_id":100029001,"comment_content":"老师 您好 我有个疑问想确认下<br>头部字段标题下面画的两个示意图，当中标明的请求头是没有包含请求行的（响应头也是没有包含状态行)<br>而之前一直说明请求头是请求行+头字段；所以我理解其实图中标示请求头的应该是头字段（key-value的形式展示）<br>不知道我理解的对吗","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490103,"discussion_content":"你理解的对。\n\n其实请求头这个名字的含义比较宽泛，有时候指请求行+头字段，有时候又不含请求行，只要你自己理解就好，不必特别计较。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585640626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196285,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1585269792,"is_pvip":false,"replies":[{"id":"74405","content":"awesome。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585271991,"ip_address":"","comment_id":196285,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585269792","product_id":100029001,"comment_content":"1：如果拼 HTTP 报文的时候，在头字段后多加了一个 CRLF，导致出现了一个空行，会发生什么？<br>按照规定头和体的区分标志是一个CRLF，如果出现多个，除第一个外，全部认为属于体的一部分。所以，这里的第二个CRLF就算作体的开始。<br><br>2：讲头字段时说“:”后的空格可以有多个，那为什么绝大多数情况下都只使用一个空格呢？<br>用一个就够了那就应该使用一个，毕竟对于性能的追求在各个方面人类都是不拾余力的，多传一个字符就会多费一分力，最好少传为妙，不过一个都没有又不符合规定，那还是保留传一个吧！<br><br>HTTP报文是什么？是一个大头儿子，有头和体加脖子也就是一个回车换行组成。头是非常重要的，里面放置了许多的控制信息，体就代表她真正长什么样子，不过怎么解释体有头来决定。如果是狗头，即使长着人身也是狗，之上是半狗半人。如果是人头，那一定是人，之上是半人半XXX。总之一句话，头很关键。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489259,"discussion_content":"awesome。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585271991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194525,"user_name":"哎哟不错哦","can_delete":false,"product_type":"c1","uid":1525764,"ip_address":"","ucode":"57B62E79F7BE0B","user_header":"https://static001.geekbang.org/account/avatar/00/17/48/04/890427dd.jpg","comment_is_top":false,"comment_ctime":1585065141,"is_pvip":false,"replies":[{"id":"74077","content":"host就是uri里的authority，你用ip当然就是ip了，可以做实验试一下。<br><br>因为没有域名，服务器会使用一个默认的域名来提供服务，可参考http:&#47;&#47;nginx.org&#47;en&#47;docs&#47;http&#47;ngx_http_core_module.html#listen","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585098310,"ip_address":"","comment_id":194525,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1585065141","product_id":100029001,"comment_content":"上面的例子，同一ip下有不同域名，那我们对不用域名进行访问的时候，请求头的host会是什么up","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488836,"discussion_content":"host就是uri里的authority，你用ip当然就是ip了，可以做实验试一下。\n\n因为没有域名，服务器会使用一个默认的域名来提供服务，可参考http://nginx.org/en/docs/http/ngx_http_core_module.html#listen","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585098310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193775,"user_name":"Gasnerd","can_delete":false,"product_type":"c1","uid":1440263,"ip_address":"","ucode":"3630276571AF66","user_header":"https://static001.geekbang.org/account/avatar/00/15/fa/07/1d50f530.jpg","comment_is_top":false,"comment_ctime":1584961472,"is_pvip":false,"replies":[{"id":"73859","content":"如果还不行可以考虑在linux下做实验，可能会比Windows好一点，见答疑篇。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585011551,"ip_address":"","comment_id":193775,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584961472","product_id":100029001,"comment_content":"telnet处的例子无论如何都做不成，能有更严谨的表述吗？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488654,"discussion_content":"如果还不行可以考虑在linux下做实验，可能会比Windows好一点，见答疑篇。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585011551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440263,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fa/07/1d50f530.jpg","nickname":"Gasnerd","note":"","ucode":"3630276571AF66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212732,"discussion_content":"好的，十分感谢。我已经新开虚拟机了。正在试验。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585011646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":193768,"user_name":"Gasnerd","can_delete":false,"product_type":"c1","uid":1440263,"ip_address":"","ucode":"3630276571AF66","user_header":"https://static001.geekbang.org/account/avatar/00/15/fa/07/1d50f530.jpg","comment_is_top":false,"comment_ctime":1584959693,"is_pvip":false,"replies":[{"id":"73861","content":"这些操作都是做过实验验证的，肯定没问题，就是具体实施起来可能会不太容易做，如果觉得不好操作可以改用Linux下的telnet，可能比Windows要好一些。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1585011645,"ip_address":"","comment_id":193768,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584959693","product_id":100029001,"comment_content":"&quot;常用头字段&quot;前的操作实验，步骤没问题吗？精确吗？总操作不成？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488649,"discussion_content":"这些操作都是做过实验验证的，肯定没问题，就是具体实施起来可能会不太容易做，如果觉得不好操作可以改用Linux下的telnet，可能比Windows要好一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585011645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1440263,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fa/07/1d50f530.jpg","nickname":"Gasnerd","note":"","ucode":"3630276571AF66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212735,"discussion_content":"好的。已经开始在linux下操作了。谢谢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585011691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180189,"user_name":"Long","can_delete":false,"product_type":"c1","uid":1580358,"ip_address":"","ucode":"D85B99FD0C4B76","user_header":"https://wx.qlogo.cn/mmopen/vi_32/ZMALpD4bKCVdsx8ymCC5Oo0oxibxIFGQzT6fP2B8MEgLGLktQRX4ictobkbcNBDTQibjoQNKBmWCKomNibWqHZ5kpg/132","comment_is_top":false,"comment_ctime":1582207523,"is_pvip":false,"replies":[{"id":"69986","content":"可以把这个字段删除，不传递给客户端，或者给它一个不敏感的信息，比如简单地显示为“XXX Server”.","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1582238927,"ip_address":"","comment_id":180189,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582207523","product_id":100029001,"comment_content":"请问,Server 字段也不是必须要出现的，因为这会把服务器的一部分信息暴露给外界.那该怎么隐藏这个信息呢?","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484559,"discussion_content":"可以把这个字段删除，不传递给客户端，或者给它一个不敏感的信息，比如简单地显示为“XXX Server”.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582238927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178999,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1581868949,"is_pvip":false,"replies":[{"id":"69488","content":"粘包应该是tcp层的问题，在http看来报文就是完整的，content-length就是body的长度，如果长度不足那就是传输错误。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1581910329,"ip_address":"","comment_id":178999,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581868949","product_id":100029001,"comment_content":"http协议的content-length字段解决了粘包半包问题吧","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484057,"discussion_content":"粘包应该是tcp层的问题，在http看来报文就是完整的，content-length就是body的长度，如果长度不足那就是传输错误。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581910329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174279,"user_name":"deepz","can_delete":false,"product_type":"c1","uid":1570088,"ip_address":"","ucode":"4BD23A44CDB384","user_header":"https://static001.geekbang.org/account/avatar/00/17/f5/28/898a6947.jpg","comment_is_top":false,"comment_ctime":1580117974,"is_pvip":true,"replies":[{"id":"67814","content":"thanks.","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1580266264,"ip_address":"","comment_id":174279,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1580117974","product_id":100029001,"comment_content":"感觉老师讲的很好啊，受教了~ ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482356,"discussion_content":"thanks.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580266264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172614,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1579236300,"is_pvip":false,"replies":[{"id":"66934","content":"host这个字段的名字可能会给人以误解，它其实就是uri里的域名。所谓的“虚拟主机”就是在一台物理主机上托管了多个域名，所以叫“虚拟主机”，到达物理主机后由web server自己决定如何查找。<br><br>也可能是这个原因，在http&#47;2里，host字段就改成了“authority”，含义更明确了一些。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1579239467,"ip_address":"","comment_id":172614,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1579236300","product_id":100029001,"comment_content":"host这个问题:<br>比如我要使用程序访问www.baidu.com，我的http请求头中host要填写什么值呢？我怎么知道baidu的物理主机上有哪些虚拟主机？然后选一个来填在程序中呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481792,"discussion_content":"host这个字段的名字可能会给人以误解，它其实就是uri里的域名。所谓的“虚拟主机”就是在一台物理主机上托管了多个域名，所以叫“虚拟主机”，到达物理主机后由web server自己决定如何查找。\n\n也可能是这个原因，在http/2里，host字段就改成了“authority”，含义更明确了一些。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579239467,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":161947,"discussion_content":"端口只是定位到了web服务器，而web服务器上回有多个域名提供服务，也就是虚拟主机，所以要用host来做再次区分。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580949481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":162034,"discussion_content":"明白了多谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580954442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":161947,"ip_address":""},"score":162034,"extra":""}]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138431,"discussion_content":"端口不是可以直接唯一定位到物理机的应用服务吗？为什么还需要host来区分物理机上的不同虚拟主机呢？难道说虚拟主机跟应用服务不一回事？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579242337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167116,"user_name":"SeaYang","can_delete":false,"product_type":"c1","uid":1393840,"ip_address":"","ucode":"F44622A44CE8B9","user_header":"https://static001.geekbang.org/account/avatar/00/15/44/b0/c196c056.jpg","comment_is_top":false,"comment_ctime":1577694131,"is_pvip":false,"replies":[{"id":"64947","content":"带”:“的头是http&#47;2的”伪头字段“，相当于http&#47;1里的host，可参考飞翔篇。<br><br>","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1577755423,"ip_address":"","comment_id":167116,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577694131","product_id":100029001,"comment_content":"发现有些请求的请求头没有Host头，但有:authority头，内容是域名，那Host头还是必须的吗？还是说有些请求被nginx之类的修改过了","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479750,"discussion_content":"带”:“的头是http/2的”伪头字段“，相当于http/1里的host，可参考飞翔篇。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577755423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164266,"user_name":"Wr","can_delete":false,"product_type":"c1","uid":1713790,"ip_address":"","ucode":"738B316AA2AD66","user_header":"https://static001.geekbang.org/account/avatar/00/1a/26/7e/823c083e.jpg","comment_is_top":false,"comment_ctime":1576919679,"is_pvip":false,"replies":[{"id":"62540","content":"基本正确，可参考其他同学的回答。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1577062492,"ip_address":"","comment_id":164266,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576919679","product_id":100029001,"comment_content":"1. 当作body<br>2. 会影响报文的length，通常用一个即可","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478698,"discussion_content":"基本正确，可参考其他同学的回答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577062492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157388,"user_name":"keep it simple","can_delete":false,"product_type":"c1","uid":1574739,"ip_address":"","ucode":"72B8DC00247C9E","user_header":"https://static001.geekbang.org/account/avatar/00/18/07/53/05aa9573.jpg","comment_is_top":false,"comment_ctime":1575128711,"is_pvip":false,"replies":[{"id":"60449","content":"user-agent这个字段非常混乱，浏览器都声称自己是XXX并且兼容YYY，服务器处理起来也很麻烦，具体的策略跟实现有关，不能一概而论。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1575248589,"ip_address":"","comment_id":157388,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575128711","product_id":100029001,"comment_content":"做了个实验，用fiddler抓手机浏览器的包，分别用默认设置、设置为电脑版发起，观察user-agent。现象如下<br>默认设置，访问时返回了手机版页面：<br>Mozilla&#47;5.0 (Linux; Android 6.0.1; SM919 Build&#47;MXB48T) AppleWebKit&#47;537.36 (KHTML, like Gecko) Chrome&#47;62.0.3202.84 Mobile Safari&#47;537.36<br><br>切换到电脑版，返回了电脑版页面：<br>Mozilla&#47;5.0 (X11; Linux x86_64) AppleWebKit&#47;537.36 (KHTML, like Gecko) Chrome&#47;62.0.3202.84 Safari&#47;537.36<br>也就是说服务器只看user-agent中的第一段？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476415,"discussion_content":"user-agent这个字段非常混乱，浏览器都声称自己是XXX并且兼容YYY，服务器处理起来也很麻烦，具体的策略跟实现有关，不能一概而论。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575248589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157380,"user_name":"keep it simple","can_delete":false,"product_type":"c1","uid":1574739,"ip_address":"","ucode":"72B8DC00247C9E","user_header":"https://static001.geekbang.org/account/avatar/00/18/07/53/05aa9573.jpg","comment_is_top":false,"comment_ctime":1575126033,"is_pvip":false,"replies":[{"id":"60454","content":"<br>1.一方新增字段，另一方不认识可以忽略，也可以返回400，处理策略完全在于接收方，与客户端还是服务器无关。<br><br>2.User-Agent虽然很混乱，但每个浏览器的标识值还是固定的，只是处理起来很麻烦，不能直接按照字面意思来简单处理。<br><br>3.是的，date主要用来缓存管理，所以两边的时间要保持一致。<br><br>4.http的头字段都可以任意改写，没有校验，所以cdn或者任何中间链路的节点都可以变动http报文。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1575249192,"ip_address":"","comment_id":157380,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575126033","product_id":100029001,"comment_content":"1.\tHTTP允许增加头部字段，应该是要Client、Server两端约定好对吧？如果client随意增加一个server端不认识的字段，应该会报400错误。而server端增加一个client不认识的字段，则不会有问题。这个想法正确吗？<br>2.\t既然现在User-Agent这么混乱，那么服务器就只能返回统一的页面，不管客户端类型了吗？有没有别的办法呢？<br>实验：使用fiddler抓手机的包，使用浏览器普通版和电脑版，看看user-agent什么不同？<br>3.\tdate这个值是由服务端操作系统的时区、时间决定的吗？对于普通浏览器而言，这个值有意义吗？如果客户端是CDN边缘节点，如果收到的时间是错误的，是否缓存就会出问题？（例如CDN节点时间是3点，服务端返回的date是1点，缓存时间1小时）<br>4.\tServer字段是会被覆盖的吗？例如源站返回的报文，经CDN返回给浏览器，则浏览器看到的是CDN的server字段。<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476412,"discussion_content":"\n1.一方新增字段，另一方不认识可以忽略，也可以返回400，处理策略完全在于接收方，与客户端还是服务器无关。\n\n2.User-Agent虽然很混乱，但每个浏览器的标识值还是固定的，只是处理起来很麻烦，不能直接按照字面意思来简单处理。\n\n3.是的，date主要用来缓存管理，所以两边的时间要保持一致。\n\n4.http的头字段都可以任意改写，没有校验，所以cdn或者任何中间链路的节点都可以变动http报文。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575249192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155194,"user_name":"nora","can_delete":false,"product_type":"c1","uid":1206539,"ip_address":"","ucode":"3A3EABF27D0261","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/0b/780b0aac.jpg","comment_is_top":false,"comment_ctime":1574659493,"is_pvip":false,"replies":[{"id":"59543","content":"thanks。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1574663640,"ip_address":"","comment_id":155194,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574659493","product_id":100029001,"comment_content":"Host 字段告诉服务器这个请求应该由哪个主机来处理，当一台计算机上托管了多个虚拟主机的时候，服务器端就需要用 Host 字段来选择，有点像是一个简单的“路由重定向”。<br>例如我们的试验环境，在 127.0.0.1 上有三个虚拟主机：“www.chrono.com”“www.metroid.net”和“origin.io”。那么当使用域名的方式访问时，就必须要用 Host 字段来区分这三个 IP 相同但域名不同的网站，否则服务器就会找不到合适的虚拟主机，无法处理。<br><br>很清晰的解释了host字段的作用，棒","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475684,"discussion_content":"thanks。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574663640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140208,"user_name":"且听风吟","can_delete":false,"product_type":"c1","uid":1671848,"ip_address":"","ucode":"B1C491128C7A01","user_header":"https://static001.geekbang.org/account/avatar/00/19/82/a8/aa4c2572.jpg","comment_is_top":false,"comment_ctime":1570849800,"is_pvip":false,"replies":[{"id":"54214","content":"<br>1.Content-Length指的是body的长度，transfer-encoding是报文发送时的编码格式，这两个是毫不相干的属性。<br>transfer-encoding通常都是chunked，表示body是分块传输的，长度在发送的一开始不能确定，所以Content-Length是没有意义的。<br><br><br>2.Content-Encoding是body的编码格式，同样也与Content-Length是无关的，可以有gzip、br等多种压缩方式。<br><br>3.可以再参考第15、16讲，里面详细介绍了这些字段的含义。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1570860763,"ip_address":"","comment_id":140208,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570849800","product_id":100029001,"comment_content":"问题一：老师，Content-Length 和 transfer-encoding: chunked 这两种报文传输方式的本质区别是什么呢？（什么分块分段编码的）<br>当前只知道 transfer-encoding 优先级高于 Content-Length，如果有了 transfer-encoding 浏览器就会忽略 Content-Length。<br>问题二，查阅的部分资料说，使用了 gzip 压缩传输的话，由于压缩前后大小一般不一样，而不能使用 Content-Length，可依旧会在一些请求里面看到 Content-Encoding: gzip 和 Content-Length: 44896，这样的情况 HTTP 是怎么工作的呢？两个字段都用还是只用 gzip 呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470300,"discussion_content":"\n1.Content-Length指的是body的长度，transfer-encoding是报文发送时的编码格式，这两个是毫不相干的属性。\ntransfer-encoding通常都是chunked，表示body是分块传输的，长度在发送的一开始不能确定，所以Content-Length是没有意义的。\n\n\n2.Content-Encoding是body的编码格式，同样也与Content-Length是无关的，可以有gzip、br等多种压缩方式。\n\n3.可以再参考第15、16讲，里面详细介绍了这些字段的含义。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570860763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135082,"user_name":"philips","can_delete":false,"product_type":"c1","uid":1017020,"ip_address":"","ucode":"8C4D1017E4929E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJaVTsR3DUnXlOzXn4aRVpMNCZm2ag3DajlQogIF0MUjhKHia1tSZrGsVcmMRpCMPzFibrPoxibicpdQg/132","comment_is_top":false,"comment_ctime":1569002983,"is_pvip":false,"replies":[{"id":"51845","content":"如果是chunked编码，那就按chunked格式处理。<br><br>如果也不是chunked，那就是一个格式不正确的报文，服务器可以选择继续接收，直到缓冲区满，也可以丢弃报文。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1569025198,"ip_address":"","comment_id":135082,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569002983","product_id":100029001,"comment_content":"老师，有一个问题想请教一下，如果Header里面没有content-length，服务器如何判断一个HTTP请求发送是否完毕了呢？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468038,"discussion_content":"如果是chunked编码，那就按chunked格式处理。\n\n如果也不是chunked，那就是一个格式不正确的报文，服务器可以选择继续接收，直到缓冲区满，也可以丢弃报文。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569025198,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125092,"user_name":"安排","can_delete":false,"product_type":"c1","uid":1260026,"ip_address":"","ucode":"F78CFA9624CAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","comment_is_top":false,"comment_ctime":1566060836,"is_pvip":false,"replies":[{"id":"46172","content":"很多编程语言都有http服务器框架，例如Tomcat。<br><br>因为http是纯文本格式的，所以完全可以自己拼成富豪协议的报文。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1566260523,"ip_address":"","comment_id":125092,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566060836","product_id":100029001,"comment_content":"老师，服务端代码组http报文时都用什么框架。我知道curl这个框架可以提供组http报文api。那服务端一般用什么框架？还是说不用框架直接程序里自己组包？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463431,"discussion_content":"很多编程语言都有http服务器框架，例如Tomcat。\n\n因为http是纯文本格式的，所以完全可以自己拼成富豪协议的报文。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566260523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122594,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1565430985,"is_pvip":false,"replies":[{"id":"45077","content":"那应该是内网里也有域名解析服务，把这些域名再解析成内网的ip地址，转发的时候要用这个域名来做区分。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1565571877,"ip_address":"","comment_id":122594,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565430985","product_id":100029001,"comment_content":"看了评论中关于Host头的用意，突然想到了一些经历：<br>当一个域名abc.com解析得到的IP地址，可能是nginx暴露的服务IP，这个时候，请求会转发到nginx中，但是通常nginx内部会配置很多的转发服务，它不知道这个请求该转到那个服务；之前请教过运维同事，他们分配了很多内部域名给我们不同业务开发人员，并叫我们一定在请求的header中把Host头带上分配的那个内部域名（如 a.snet），说是用来区分我们后端不同业务tomat的服务主机。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462323,"discussion_content":"那应该是内网里也有域名解析服务，把这些域名再解析成内网的ip地址，转发的时候要用这个域名来做区分。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565571877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122591,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1565430326,"is_pvip":false,"replies":[{"id":"45076","content":"<br>1.是的。多了一个空行会导致请求头解析错误，可能会导致报文也解析失败。<br><br>2.“：”后的空格是rfc标准要求必须有的，但多个空格就是冗余，浪费带宽，所以就只用一个空格。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1565571767,"ip_address":"","comment_id":122591,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565430326","product_id":100029001,"comment_content":"一直在思考Http的核心，今天终于讲到了：就是一些事先定义好的一段特定规则、特定格式要求的文本。<br>关于老师的问题：<br>1. 如果拼 HTTP 报文的时候，在头字段后多加了一个 CRLF： 按照Http规范，多出来那个CRLF后的所有内容都会成为body部分，另外我有个顾虑，如果此header不是最后一个header，而且content-lenght在此header的后面，则服务端可能无法解析到body内容。<br>2. 头字段中的“:”后的空格为什么绝大多数情况下只有1个：我的思考是空格少，代表可以减少传输的流量；但也不能没有，因为用1个空格将后面的value和&quot;:&quot;分开，从可读性上面说会提供很多。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462322,"discussion_content":"\n1.是的。多了一个空行会导致请求头解析错误，可能会导致报文也解析失败。\n\n2.“：”后的空格是rfc标准要求必须有的，但多个空格就是冗余，浪费带宽，所以就只用一个空格。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565571767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120618,"user_name":"siloen","can_delete":false,"product_type":"c1","uid":1058734,"ip_address":"","ucode":"526A861A4552FF","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/ae/d17c0de8.jpg","comment_is_top":false,"comment_ctime":1564961787,"is_pvip":false,"replies":[{"id":"44237","content":"可以仔细看一下课程里的操作步骤，还有其他同学的答复，不用手敲，在编辑界面右键粘贴后按回车就可以了。<br>","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1564962951,"ip_address":"","comment_id":120618,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564961787","product_id":100029001,"comment_content":"Telnet里面发请求怎么发都是bad request..  是把文中的GET &#47;09-1... 打到笔记本上复制的  这种方法有问题吗…","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461405,"discussion_content":"可以仔细看一下课程里的操作步骤，还有其他同学的答复，不用手敲，在编辑界面右键粘贴后按回车就可以了。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564962951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111158,"user_name":"前端西瓜哥","can_delete":false,"product_type":"c1","uid":1248576,"ip_address":"","ucode":"150130C34CD1C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","comment_is_top":false,"comment_ctime":1562494733,"is_pvip":false,"replies":[{"id":"40538","content":"空格是rfc的规定，所以为了省空间就只用一个空格，不用空格就是格式错误。<br><br>服务器解析的时候会去掉空格。<br><br>这个也是http文本格式的劣势，有冗余，有歧义，所以后来的http&#47;2就改成了二进制格式，就不会有这样的疑问了。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562549242,"ip_address":"","comment_id":111158,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562494733","product_id":100029001,"comment_content":"关于第2题，其实我不是很理解 “绝大多数情况下都只使用一个空格” 这个说法，冒号后面不给空格不是更节省空间吗？<br>另外我用 telnet 测试了下，如果给的是自定义的头字段，那在 &quot;:&quot; 前是可以有空格的，这是为什么？如果可以的话，那服务端拿到的是 “test” 还是 &quot;test   &quot;？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457255,"discussion_content":"空格是rfc的规定，所以为了省空间就只用一个空格，不用空格就是格式错误。\n\n服务器解析的时候会去掉空格。\n\n这个也是http文本格式的劣势，有冗余，有歧义，所以后来的http/2就改成了二进制格式，就不会有这样的疑问了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562549242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110010,"user_name":"明月","can_delete":false,"product_type":"c1","uid":1476588,"ip_address":"","ucode":"D3C649B954A519","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJayib1ZcRfOaoLsdsWZokiaO5tLAdC4uNAicQJRIVXrz9fIchib7QwXibnRrsJaoh5TUlia7faUf36g8Bw/132","comment_is_top":false,"comment_ctime":1562150459,"is_pvip":false,"replies":[{"id":"39920","content":"这个是标准里规定的，必须用CRLF，实际上CRLF也是国际回车换行的标准，UNIX里的LF其实是历史原因造成的。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1562203411,"ip_address":"","comment_id":110010,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562150459","product_id":100029001,"comment_content":"单LF不可以吗","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456681,"discussion_content":"这个是标准里规定的，必须用CRLF，实际上CRLF也是国际回车换行的标准，UNIX里的LF其实是历史原因造成的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562203411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106665,"user_name":"九级浪","can_delete":false,"product_type":"c1","uid":1380502,"ip_address":"","ucode":"5F04745EB45633","user_header":"https://static001.geekbang.org/account/avatar/00/15/10/96/6c08dbdb.jpg","comment_is_top":false,"comment_ctime":1561368967,"is_pvip":false,"replies":[{"id":"38688","content":"http:&#47;&#47;www.chrono.com&#47;09-1<br>","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561430285,"ip_address":"","comment_id":106665,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561368967","product_id":100029001,"comment_content":"09-1是一个项目吗？如果是url是什么，","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455168,"discussion_content":"http://www.chrono.com/09-1\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561430285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105673,"user_name":"隰有荷","can_delete":false,"product_type":"c1","uid":1357944,"ip_address":"","ucode":"2BE9A32AB28963","user_header":"https://static001.geekbang.org/account/avatar/00/14/b8/78/2828195b.jpg","comment_is_top":false,"comment_ctime":1561073467,"is_pvip":false,"replies":[{"id":"38304","content":"可能我说的有点歧义了，实际上是后面加一个CRLF，是个回车换行，不是空行，抱歉。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1561109224,"ip_address":"","comment_id":105673,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561073467","product_id":100029001,"comment_content":"按照“大头儿子”的例子来看，请求行和请求头之间是没有空行的，而后面说到请求行的时候，请求行的版本号后面要加一个空行，所以对于整个报文来说，到底存在几个必须的空行？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454767,"discussion_content":"可能我说的有点歧义了，实际上是后面加一个CRLF，是个回车换行，不是空行，抱歉。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561109224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104546,"user_name":"Geek_d4dee7","can_delete":false,"product_type":"c1","uid":1241569,"ip_address":"","ucode":"636908D6F43C6D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLw9fVyja3eQLGQenLf5EqVaxGQoibo7rq8A7IRjlXED9FhicKukcn0ibCCtiaBqpEib4ZEIWfFOkiaGMSQ/132","comment_is_top":false,"comment_ctime":1560775041,"is_pvip":false,"replies":[{"id":"37852","content":"在进阶篇都会讲，别着急，慢慢来。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560819458,"ip_address":"","comment_id":104546,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560775041","product_id":100029001,"comment_content":"ETag  以下的相应头都不知道意思了 下节课有解释么","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454318,"discussion_content":"在进阶篇都会讲，别着急，慢慢来。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560819458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104513,"user_name":"衬衫的价格是19美元","can_delete":false,"product_type":"c1","uid":1397631,"ip_address":"","ucode":"655F925451F772","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVUskibDnhMt5MCIJ8227HWkeg2wEEyewps8GuWhWaY5fy7Ya56bu2ktMlxdla3K29Wqia9efCkWaQ/132","comment_is_top":false,"comment_ctime":1560770295,"is_pvip":false,"replies":[{"id":"37855","content":"是个纯文本的字符串，你看wireshark抓包，很明显。<br>头结束用的是crlf，就是回车换行。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560819811,"ip_address":"","comment_id":104513,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560770295","product_id":100029001,"comment_content":"所以http请求头是什么数据类型呢？是一个大的数组吗？每个字段都是数组的元素，如果出现空格来就认为头结束了","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454303,"discussion_content":"是个纯文本的字符串，你看wireshark抓包，很明显。\n头结束用的是crlf，就是回车换行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560819811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104404,"user_name":"bywuu","can_delete":false,"product_type":"c1","uid":1078675,"ip_address":"","ucode":"2EDDB7E70CABB9","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/93/8135f895.jpg","comment_is_top":false,"comment_ctime":1560745211,"is_pvip":false,"replies":[{"id":"37802","content":"这我倒没想到，同学们真是发散思维啊。<br>","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560748492,"ip_address":"","comment_id":104404,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560745211","product_id":100029001,"comment_content":"如果http请求报文可以比喻成大头儿子，而对于多数带实体内容的响应报文则是小头爸爸，那么。。。中间人攻击是不是隔壁老王呢？？？","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454261,"discussion_content":"这我倒没想到，同学们真是发散思维啊。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560748492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104403,"user_name":"bywuu","can_delete":false,"product_type":"c1","uid":1078675,"ip_address":"","ucode":"2EDDB7E70CABB9","user_header":"https://static001.geekbang.org/account/avatar/00/10/75/93/8135f895.jpg","comment_is_top":false,"comment_ctime":1560745108,"is_pvip":false,"replies":[{"id":"37803","content":"第二个回答很对。<br><br>第一个就不对了，因为多了一个空行，就变更了报文的结构，两个空行，那么下面的就都认为是body了。<br><br>可参考其他同学的回答。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560748568,"ip_address":"","comment_id":104403,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560745108","product_id":100029001,"comment_content":"问题一：没什么实际影响，就是报文多了一个空行呗<br>问题二：为了减少头部的大小，因为不允许太大的头部文件出现，节省空间，爱护环境，从我做起","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454260,"discussion_content":"第二个回答很对。\n\n第一个就不对了，因为多了一个空行，就变更了报文的结构，两个空行，那么下面的就都认为是body了。\n\n可参考其他同学的回答。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560748568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104359,"user_name":"古夜","can_delete":false,"product_type":"c1","uid":1341612,"ip_address":"","ucode":"0A82D3CFCEDF07","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/ac/e5e6e7f3.jpg","comment_is_top":false,"comment_ctime":1560736415,"is_pvip":false,"replies":[{"id":"37791","content":"第一个可参考其他同学的回答，需要再仔细理解一下http的报文格式。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560737827,"ip_address":"","comment_id":104359,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560736415","product_id":100029001,"comment_content":"1.报错或者自动去一行<br>2.空格也是有占数据长度的","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454242,"discussion_content":"第一个可参考其他同学的回答，需要再仔细理解一下http的报文格式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560737827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104355,"user_name":"佳佳大魔王","can_delete":false,"product_type":"c1","uid":1235320,"ip_address":"","ucode":"D5214903D85A0F","user_header":"https://static001.geekbang.org/account/avatar/00/12/d9/78/8a328299.jpg","comment_is_top":false,"comment_ctime":1560736163,"is_pvip":false,"replies":[{"id":"37792","content":"连接后需要ctrl+]，然后回车，进入编辑界面，手写HTTP请求，不然长时间无数据就会断开连接。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560738066,"ip_address":"","comment_id":104355,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560736163","product_id":100029001,"comment_content":"老师，telnet一直连接不上，总是显示遗失对主机的连接（之前我的端口冲突，我把80改成了90，把443该为了444，在浏览器时加冒号和90可以连接，这里使用 open www. chrono. com 90出现的问题）","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454239,"discussion_content":"连接后需要ctrl+]，然后回车，进入编辑界面，手写HTTP请求，不然长时间无数据就会断开连接。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560738066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104350,"user_name":"石维康","can_delete":false,"product_type":"c1","uid":1067564,"ip_address":"","ucode":"E39ED8416B2C01","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/2c/f8451d77.jpg","comment_is_top":false,"comment_ctime":1560735110,"is_pvip":false,"replies":[{"id":"37783","content":"第一个，因为多了个换行，那么就相当于报文头结束了，那么后面的就都是body了。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560736407,"ip_address":"","comment_id":104350,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560735110","product_id":100029001,"comment_content":"试着回答一下本节留的思考题<br>1.如果拼 HTTP 报文的时候，在头字段后多加了一个 CRLF,导致出现了一个空行，会发生什么？<br>一个换行就是CRLF,那么会导致收到的body少两个字节吧<br><br>2.讲头字段时说“:”后的空格可以有多个，那为什么绝大多数情况下都只使用一个空格呢？<br>方便人类阅读，并且为了节省网络传输带宽<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454237,"discussion_content":"第一个，因为多了个换行，那么就相当于报文头结束了，那么后面的就都是body了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560736407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104333,"user_name":"无名","can_delete":false,"product_type":"c1","uid":1110113,"ip_address":"","ucode":"2D2E877CF97138","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/61/68462a07.jpg","comment_is_top":false,"comment_ctime":1560733580,"is_pvip":false,"replies":[{"id":"37784","content":"query参数不支持数组，都是key=value的形式。<br><br>Tomcat没用过，所以不好回答。但一个key对应多个value的形式是可以的，服务器可以把它理解成数组的形式。<br><br>","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560736535,"ip_address":"","comment_id":104333,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560733580","product_id":100029001,"comment_content":"rfc有规定GET 请求参数的具体要求吗？开发时碰到个问题，就是GET请求的参数为数组。<br>客户端传递的格式是：?arr%5B%5D=value0&amp;arr%5B%5D=value1&amp;arr%5B%5D=value2。<br>服务端的web服务器为tomcat，报不符合RFC规范。<br>后来看了源码发现tomcat支持的格式为：<br>1、?arr=value0&amp;arr=value1&amp;arr=value2<br>2、?arr%5B0%5D=value0&amp;arr%5B1%5D=value1&amp;arr%5B2%5D=value2<br><br>但我查RFC文档时确没有找到关于GET参数传递数组的规定。","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454231,"discussion_content":"query参数不支持数组，都是key=value的形式。\n\nTomcat没用过，所以不好回答。但一个key对应多个value的形式是可以的，服务器可以把它理解成数组的形式。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560736535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104292,"user_name":"lucy","can_delete":false,"product_type":"c1","uid":1557900,"ip_address":"","ucode":"C5DCED6D8E9C6F","user_header":"https://static001.geekbang.org/account/avatar/00/17/c5/8c/90efb90d.jpg","comment_is_top":false,"comment_ctime":1560729337,"is_pvip":false,"replies":[{"id":"37769","content":"网站的小图标，显示在标签页上用的，非http标准。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560733996,"ip_address":"","comment_id":104292,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560729337","product_id":100029001,"comment_content":"在抓网页时，经常会遇到favicon.ico,请问这是什么东西","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454211,"discussion_content":"网站的小图标，显示在标签页上用的，非http标准。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560733996,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104288,"user_name":"lucy","can_delete":false,"product_type":"c1","uid":1557900,"ip_address":"","ucode":"C5DCED6D8E9C6F","user_header":"https://static001.geekbang.org/account/avatar/00/17/c5/8c/90efb90d.jpg","comment_is_top":false,"comment_ctime":1560729079,"is_pvip":false,"replies":[{"id":"37771","content":"这个说法不错。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560734049,"ip_address":"","comment_id":104288,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560729079","product_id":100029001,"comment_content":"我觉得http请求报文可以比喻成大头儿子，而对于多数带实体内容的响应报文则是小头爸爸","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454208,"discussion_content":"这个说法不错。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560734049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104286,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1560728176,"is_pvip":false,"replies":[{"id":"37772","content":"host字段是域名，虚拟主机对应的是“真实主机”。<br><br>很久以前都是一个ip对应一个主机，就是“真实主机”，但这样太浪费资源，所以就出现了一个ip上有多台主机，这个就是“虚拟主机”。<br><br>你看http报文，uri里是没有域名的，只有path，所以http&#47;1.1要求必须有host字段，这样服务器就可以在一个ip上区分多个虚拟主机。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560734181,"ip_address":"","comment_id":104286,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560728176","product_id":100029001,"comment_content":"请问一下老师HOST头部的value是虚拟主机, 虚拟主机的意思具体是什么? 在请求行中有URL不是就可以看到主机地址或者域名了吗, 为什么HTTP1.1规定HOST头部是必须的呢?","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454206,"discussion_content":"host字段是域名，虚拟主机对应的是“真实主机”。\n\n很久以前都是一个ip对应一个主机，就是“真实主机”，但这样太浪费资源，所以就出现了一个ip上有多台主机，这个就是“虚拟主机”。\n\n你看http报文，uri里是没有域名的，只有path，所以http/1.1要求必须有host字段，这样服务器就可以在一个ip上区分多个虚拟主机。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560734181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":104275,"user_name":"大小兵","can_delete":false,"product_type":"c1","uid":1209885,"ip_address":"","ucode":"1227870F26D322","user_header":"https://static001.geekbang.org/account/avatar/00/12/76/1d/b4262bdc.jpg","comment_is_top":false,"comment_ctime":1560704790,"is_pvip":false,"replies":[{"id":"37793","content":"1对，2是为了节约传输的数据量，说是“约定俗成”也可以。","user_name":"作者回复","user_name_real":"chrono","uid":"1181974","ctime":1560740896,"ip_address":"","comment_id":104275,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1560704790","product_id":100029001,"comment_content":"1: 应该被当做是实体的内容<br>2: 应该是一种约定俗成的规范","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"罗剑锋","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454198,"discussion_content":"1对，2是为了节约传输的数据量，说是“约定俗成”也可以。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560740896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}