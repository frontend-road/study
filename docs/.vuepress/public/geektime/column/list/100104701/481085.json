{"id":481085,"title":"04ï½œæ³¨å†Œå‘ç°ï¼š AP ç³»ç»Ÿå’Œ CP ç³»ç»Ÿå“ªä¸ªæ›´åˆé€‚ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆç°éºŸã€‚</p><p>åœ¨å‰é¢çš„â€œæ¦‚è¿°ç¯‡â€é‡Œï¼Œæˆ‘ä»¬ä»‹ç»äº†åˆ†å¸ƒå¼æŠ€æœ¯çš„æ¥é¾™å»è„‰ï¼Œä»¥åŠåœ¨æ„å»ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé¢ä¸´çš„ç›¸å…³æŒ‘æˆ˜ã€‚ä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬å°†ä¸€èµ·è¿›å…¥åˆ°â€œåˆ†å¸ƒå¼æŠ€æœ¯ç¯‡â€çš„å­¦ä¹ å½“ä¸­ã€‚</p><p>åœ¨è¿™ä¸ªä¸“æ é‡Œï¼Œæˆ‘ä»¬ä¼šèšç„¦æ—¥å¸¸å·¥ä½œä¸­æ¥è§¦æœ€é¢‘ç¹çš„åˆ†å¸ƒå¼åœ¨çº¿ä¸šåŠ¡æŠ€æœ¯ã€‚å­¦å®Œè¿™éƒ¨åˆ†å†…å®¹ï¼Œç›¸ä¿¡ä½ ä¼šå¯¹åˆ†å¸ƒå¼è®¡ç®—æŠ€æœ¯å¿ƒä¸­æœ‰æ•°ï¼ŒåŒæ—¶ä¸ä¼šè¿·å¤±äºå®ç°çš„ç»†èŠ‚ä¸­ã€‚</p><p>å½“ç„¶ï¼Œåˆ†å¸ƒå¼è®¡ç®—æ˜¯ä¸ªéå¸¸å¤§çš„æŠ€æœ¯ä½“ç³»ï¼ŒåŒ…æ‹¬ MapReduce ä¹‹ç±»çš„åˆ†å¸ƒå¼æ‰¹å¤„ç†æŠ€æœ¯ï¼ŒFlink ä¹‹ç±»çš„åˆ†å¸ƒå¼æµè®¡ç®—æŠ€æœ¯å’Œ Istio ä¹‹ç±»çš„åˆ†å¸ƒå¼åœ¨çº¿ä¸šåŠ¡æŠ€æœ¯ã€‚ä½†æ˜¯ä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œæˆ‘ä»¬æŒæ¡äº†åˆ†å¸ƒå¼è®¡ç®—æŠ€æœ¯ä¸­ç¨³å®šä¸å˜çš„çŸ¥è¯†ã€åŸç†å’Œè§£å†³é—®é¢˜çš„æ€è·¯ï¼Œå†ç ”ç©¶è¿™äº›æŠ€æœ¯çš„æ—¶å€™ä¹Ÿä¼šä¸€é€šç™¾é€šã€‚</p><p>å¦‚æœç›´æ¥è®¨è®ºæŠ€æœ¯çŸ¥è¯†å’ŒåŸç†ï¼Œå¯èƒ½ä¼šè®©ä½ è§‰å¾—éå¸¸æ¯ç‡¥å’ŒæŠ½è±¡ã€‚é€šè¿‡å…·ä½“çš„åœºæ™¯æ¡ˆä¾‹æ¥è®¨è®ºæŠ€æœ¯æ˜¯éå¸¸å¥½çš„æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ç»™ä½ è™šæ„äº†åé¢è¿™ä¸ªåœºæ™¯ã€‚</p><p>å‡è®¾ä½ æ˜¯æå®¢æ—¶é—´çš„ä¸€ä¸ªç ”å‘å·¥ç¨‹å¸ˆï¼Œè´Ÿè´£æå®¢æ—¶é—´ App çš„åç«¯å¼€å‘å·¥ä½œã€‚ç›®å‰æå®¢æ—¶é—´é‡‡ç”¨çš„æ˜¯å•ä½“æ¶æ„ï¼ŒæœåŠ¡ç«¯æ‰€æœ‰çš„åŠŸèƒ½ã€æ¨¡å—éƒ½è€¦åˆåœ¨ä¸€ä¸ªæœåŠ¡é‡Œã€‚ç”±äºç°åœ¨ç”¨æˆ·æ•°æ®å’Œæµé‡éƒ½åœ¨å¿«é€Ÿå¢é•¿ï¼Œç»å¸¸ä¼šå› ä¸ºä¸€æ¬¡å°çš„å‘å¸ƒï¼Œå¯¼è‡´å…¨ç«™éƒ½ä¸å¯ç”¨ï¼Œæ‰€ä»¥åœ¨ç™½å¤©çš„æ—¶å€™ï¼Œä½ éƒ½ä¸æ•¢å‘å¸ƒæœåŠ¡ã€‚</p><p>ç­‰åˆ°æ—¶é—´ä¸€é•¿ï¼Œå‡Œæ™¨æµé‡ä½å³°æ—¶çš„è¿ç»´æ…¢æ…¢å˜æˆå¸¸æ€ï¼Œä½ ç»å¸¸æ”¶åˆ°æœºå™¨ CPUã€å†…å­˜çš„æŠ¥è­¦ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡éƒ½å¾ˆéš¾çŸ¥é“æ˜¯ä»€ä¹ˆä¸šåŠ¡åŠŸèƒ½å¯¼è‡´çš„ï¼Œåªèƒ½ç›´æ¥å‡çº§æœºå™¨é…ç½®ã€‚æ…¢æ…¢çš„ï¼Œä½ å‘ç°å·¥ä½œä¸­çš„é—®é¢˜å’ŒæŒ‘æˆ˜è¶Šæ¥è¶Šå¤šï¼Œä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆå¤„ç†ã€‚</p><!-- [[[read_end]]] --><p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿåœ¨é¢ä¸´è¿™æ ·çš„å›°å¢ƒå‘¢ï¼Ÿæˆ‘è¦å‘Šè¯‰ä½ çš„æ˜¯åˆ«æ‹…å¿ƒï¼Œåœ¨æ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šé€šè¿‡åˆ†å¸ƒå¼æŠ€æœ¯æ¥ä¸€ä¸€è§£å†³è¿™äº›é—®é¢˜ã€‚</p><h2>ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡æ³¨å†Œå‘ç°</h2><p>å…¶å®æå®¢æ—¶é—´æœåŠ¡å™¨é‡‡ç”¨çš„å•ä½“æ¶æ„ï¼Œåœ¨ä¸šåŠ¡æ—©æœŸçš„å¿«é€Ÿè¿­ä»£ä¸­ï¼Œå‘æŒ¥äº†éå¸¸é‡è¦çš„ä½œç”¨ã€‚ä½†éšç€ç”¨æˆ·æ•°é‡å’Œæµé‡çš„å¿«é€Ÿä¸Šæ¶¨ï¼Œè¿™ä¸ªå•ä½“æ¶æ„å°±é‡åˆ°äº†æˆæœ¬ã€æ•ˆç‡å’Œç¨³å®šæ€§çš„é—®é¢˜ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/a0/f6/a0b1c8075f96a4844e6b028514eff7f6.jpg?wh=2284x1148\" alt=\"\"></p><h3>å•ä½“æœåŠ¡é¢ä¸´çš„é—®é¢˜</h3><p>é¦–å…ˆæ˜¯æˆæœ¬æ–¹é¢ã€‚æˆ‘ä»¬åœ¨åšæ‰€æœ‰çš„äº‹æƒ…æ—¶éƒ½ä¼šè€ƒè™‘æŠ•å…¥äº§å‡ºæ¯”ï¼ˆROIï¼‰ï¼Œæ‰€ä»¥æˆæœ¬æ˜¯æˆ‘ä»¬å¿…é¡»è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜ã€‚å¯¹äºå•ä½“æœåŠ¡åœ¨æœåŠ¡å™¨ç¡¬ä»¶æ–¹é¢çš„æˆæœ¬ï¼Œæˆ‘ä»¬éœ€è¦ç‰¹åˆ«æ³¨æ„å¼‚æ„å·¥ä½œè´Ÿè½½å’Œä¸åŒä¿éšœçº§åˆ«è¿™ä¸¤ä¸ªæ–¹é¢çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹å¼‚æ„å·¥ä½œè´Ÿè½½æ–¹é¢çš„é—®é¢˜ã€‚å•ä½“æœåŠ¡ä¼šåŒ…å«å¤šç§å¤šæ ·çš„åŠŸèƒ½æ¨¡å—ï¼Œæœ‰ä¸€äº›æ˜¯ IO å¯†é›†å‹çš„æ¨¡å—ï¼Œæ¯”å¦‚ä¸»è¦å¯¹æ•°æ®åº“è¿›è¡Œ CRUD çš„åŠŸèƒ½æ¨¡å—ï¼›å¦ä¸€äº›åˆ™æ˜¯è®¡ç®—å¯†é›†å‹çš„æ¨¡å—ï¼Œæ¯”å¦‚å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘è½¬ç ç›¸å…³çš„åŠŸèƒ½æ¨¡å—ã€‚å¦‚æœèƒ½å°† IO å¯†é›†å‹å’Œ CPU å¯†é›†å‹çš„æ¨¡å—æ‹†åˆ†æˆä¸åŒçš„æœåŠ¡ï¼Œåˆ†å¼€éƒ¨ç½²åˆ°æ›´åˆé€‚çš„ç¡¬ä»¶ä¸Šï¼Œå°†å¯ä»¥èŠ‚çœå¤§é‡çš„æœºå™¨æˆæœ¬ã€‚æ¯”å¦‚ IO å¯†é›†å‹çš„æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥éƒ¨ç½²åœ¨ CPU æ€§èƒ½ç›¸å¯¹è¾ƒä½çš„æœºå™¨ä¸Šã€‚</p><p>å¦ä¸€ä¸ªé—®é¢˜æ˜¯ä¸åŒçš„ä¿éšœçº§åˆ«ã€‚ä¸åŒä¸šåŠ¡ç­‰çº§çš„ä¿éšœçº§åˆ«ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼šå¯¹äºè´¦å·æ¨¡å—ç­‰æ ¸å¿ƒæ¨¡å—ï¼Œå¿…é¡»ç¡®ä¿èµ„æºå……è¶³ï¼›ä½†æ˜¯å¯¹äºéæ ¸å¿ƒæ¨¡å—ï¼Œä¿éšœçš„èµ„æºå¯ä»¥ç›¸å¯¹å°‘ä¸€äº›ã€‚è€Œå¯¹äºä¸€ä¸ªå•ä½“æœåŠ¡æ¥è¯´ï¼Œæ˜¯æ²¡æœ‰åŠæ³•å¯¹ä¸åŒçš„æ¨¡å—å®æ–½ä¸åŒçš„ä¿éšœçº§åˆ«çš„ã€‚</p><p>å…¶æ¬¡ï¼Œç ”å‘æ•ˆç‡æ˜¯æˆ‘ä»¬èƒ½å¤Ÿé«˜æ•ˆã€èˆ’å¿ƒå·¥ä½œçš„åŸºæœ¬ä¿éšœï¼Œæ‰€ä»¥å¿…é¡»è¦æ³¨æ„å•ä½“æœåŠ¡æ¨¡å¼å¯¼è‡´çš„ä¸²è¡Œçš„ç¼–è¯‘ã€æµ‹è¯•å’Œå‘å¸ƒï¼Œä»¥åŠç ”å‘å›¢é˜Ÿåªèƒ½é€‰æ‹©å•ä¸€çš„ç ”å‘è¯­è¨€å’Œç”Ÿæ€ï¼ˆä¸€èˆ¬åœ¨è¿›ç¨‹å†…è·¨è¯­è¨€éƒ½ä¼šæœ‰é™åˆ¶ï¼‰è¿™ä¸¤ä¸ªé™åˆ¶ã€‚</p><p>ä¸²è¡Œçš„ç¼–è¯‘ã€æµ‹è¯•å’Œå‘å¸ƒå¾ˆå¥½ç†è§£ï¼šå¤šä¸ªç ”å‘å›¢é˜Ÿä¼šåŒæ—¶å¼€å‘ä¸åŒçš„åŠŸèƒ½ï¼Œç”±äºæ˜¯å•ä½“æœåŠ¡ï¼Œè¿™äº›åŠŸèƒ½åªèƒ½ä¸€èµ·ç¼–è¯‘ã€æµ‹è¯•å’Œå‘å¸ƒï¼Œéå¸¸æµªè´¹æ—¶é—´ã€‚å¦‚æœè¿˜è¦è¿›è¡Œç°åº¦å‘å¸ƒï¼Œé‚£ä¹ˆæ•ˆç‡å°†ä¼šæ›´ä½ã€‚</p><p>å¦å¤–è¿˜æœ‰å•ä¸€çš„è¯­è¨€å’Œç”Ÿæ€é™åˆ¶ã€‚è¦çŸ¥é“ï¼Œä¸åŒçš„ä¸šåŠ¡éœ€æ±‚å¯èƒ½ä¼šå¯¹åº”ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å’Œç”Ÿæ€ã€‚å¦‚æœæ˜¯å•ä½“æœåŠ¡ï¼Œåˆ™å¾ˆéš¾æŒ‰ä¸šåŠ¡éœ€æ±‚æ¥é€‰æ‹©ç¼–ç¨‹è¯­è¨€å’Œç›¸å…³çš„ç”Ÿæ€ï¼Œè¿™ä¼šå¤§å¤§å½±å“ç ”å‘æ•ˆç‡ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹å•ä½“æœåŠ¡å¼•å‘çš„ç¨³å®šæ€§é—®é¢˜ã€‚</p><p>ä¸€æ¥å±€éƒ¨é£é™©ä¼šæ”¾å¤§åˆ°å…¨å±€ï¼Œå› ä¸ºæ•´ä¸ªå•ä½“æœåŠ¡ä¼šåŒ…æ‹¬éå¸¸å¤šçš„åŠŸèƒ½ï¼Œä¸€ä¸ªå±€éƒ¨éæ ¸å¿ƒåŠŸèƒ½çš„å´©æºƒã€æ­»é”ç­‰å„ç§å¼‚å¸¸æƒ…å†µï¼Œéƒ½ä¼šå½±å“æ‰€æœ‰çš„ä¸šåŠ¡ã€‚è¿™æ ·çš„é£é™©éå¸¸å¤§ï¼Œè€Œä¸”æˆ‘ä»¬æ²¡æœ‰åŠæ³•å°†æ•…éšœéš”ç¦»å¼€ã€‚</p><p>äºŒæ¥ä¸šåŠ¡è¿­ä»£å‘¨æœŸå·®å¼‚å¤§ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¶Šåº•å±‚æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œéœ€æ±‚å°±è¶Šç¨³å®šï¼Œå› ä¸ºå®ƒçš„è¿­ä»£å‘¨æœŸä¼šæ¯”è¾ƒé•¿ï¼Œæ¯”å¦‚ 4 å‘¨è¿­ä»£ä¸€æ¬¡ï¼›è€Œè¶Šä¸Šå±‚çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œéœ€æ±‚å˜æ›´å°±è¶Šé¢‘ç¹ï¼Œå› ä¸ºå®ƒçš„è¿­ä»£å‘¨æœŸä¼šæ¯”è¾ƒçŸ­ï¼Œæ¯”å¦‚ 1 å‘¨è¿­ä»£ä¸€æ¬¡ã€‚ç”±äºå•ä½“æœåŠ¡ä¸èƒ½åˆ†å¼€å‘å¸ƒï¼Œæ‰€ä»¥åœ¨ä¸šåŠ¡åŠŸèƒ½è¿­ä»£çš„æ—¶å€™ï¼Œåº•å±‚æ ¸å¿ƒåŠŸèƒ½ä¹Ÿå¿…é¡»é¢‘ç¹åœ°å‘å¸ƒï¼Œè¿™å¯¹äºç¨³å®šæ€§æ¥è¯´æ˜¯ä¸€ä¸ªè€ƒéªŒã€‚</p><p>ç»è¿‡ä»”ç»†åˆ†æï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸Šé¢ä¸‰ä¸ªæ–¹é¢çš„æœ¬è´¨é—®é¢˜ï¼Œéƒ½æ˜¯å› ä¸ºæˆ‘ä»¬çš„ä¸šåŠ¡æ˜¯ä¸€ä¸ªå•ä½“åº”ç”¨ï¼Œä¸èƒ½æŒ‰èµ„æºç±»å‹è¿›è¡Œåˆ†åˆ«æ‰©å®¹ï¼Œä¸èƒ½æŒ‰åŠŸèƒ½æˆ–è€…æœåŠ¡è¿›è¡Œå°èŒƒå›´çš„éƒ¨ç½²ï¼Œä¹Ÿä¸èƒ½æŒ‰ä¸šåŠ¡çš„éœ€æ±‚æ¥é€‰æ‹©æ›´é€‚åˆçš„ç ”å‘è¯­è¨€å’Œç”Ÿæ€ç­‰ï¼Œ<strong>æ‰€ä»¥æˆ‘ä»¬å†³å®šæŒ‰èµ„æºå’Œä¸šåŠ¡ç­‰ç»´åº¦å¯¹å•ä½“æœåŠ¡è¿›è¡Œæ‹†åˆ†</strong>ã€‚</p><h3>æœåŠ¡æ³¨å†Œå‘ç°çš„ä¸šåŠ¡åœºæ™¯</h3><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼šä¹‹å‰æ‰€æœ‰çš„åŠŸèƒ½éƒ½åœ¨ä¸€ä¸ªæœåŠ¡é‡Œé¢ï¼Œä¸åŒæ¨¡å—å’ŒåŠŸèƒ½ä¹‹é—´ç›´æ¥é€šè¿‡æœ¬åœ°å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œæ‹†åˆ†ä¸ºå¤šä¸ªæœåŠ¡åï¼Œæ€ä¹ˆè°ƒç”¨å…¶ä»–æœåŠ¡çš„å‡½æ•°å‘¢ï¼Ÿ</p><p>ä½ è‚¯å®šèƒ½å¾ˆå¿«æƒ³åˆ°ï¼Œé€šè¿‡ REST API æˆ–è€… RPC æ¥è¿›è¡Œè·¨æœåŠ¡çš„è°ƒç”¨ã€‚çš„ç¡®ï¼Œè¿™æ˜¯ä¸ªéå¸¸å¥½çš„åŠæ³•ï¼Œä½†æ˜¯é€šè¿‡ REST API æˆ–è€… RPC éƒ½éœ€è¦çŸ¥é“è¢«è°ƒç”¨æœåŠ¡çš„ IP å’Œ Portã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼š<strong>å¦‚æœæœåŠ¡ A éœ€è¦è°ƒç”¨æœåŠ¡ Bï¼Œé‚£ä¹ˆæœåŠ¡ A æ€ä¹ˆè·å–è¢«è°ƒç”¨æœåŠ¡ B çš„ IP å’Œ Port å‘¢</strong>ï¼Ÿè¿™ä¸ªå…¶å®å°±æ˜¯æœåŠ¡æ³¨å†Œå‘ç°çš„ä¸šåŠ¡åœºæ™¯ã€‚</p><h2>æœåŠ¡æ³¨å†Œå‘ç°çš„å…³é”®é—®é¢˜æ˜¯ä»€ä¹ˆ</h2><p>æˆ‘ä»¬å…ˆä¸€èµ·æ¥è®¨è®ºä¸€ä¸‹å¯ä»¥å°è¯•å“ªäº›å¯è¡Œçš„æ–¹å¼ã€‚</p><p>é¦–å…ˆï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹å¼æ˜¯é…ç½® IP å’Œ Port åˆ—è¡¨ï¼Œå³ç›´æ¥åœ¨æœåŠ¡ A çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æœåŠ¡ B çš„ IP å’Œ Portï¼Œå¦‚æœæœåŠ¡ B æœ‰å¤šä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆå°±é…ç½®ä¸€ä¸ªåˆ—è¡¨ã€‚</p><p>è¿™æ ·çš„ç¡®è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæœåŠ¡ Cã€Dã€E ç­‰éå¸¸å¤šçš„æœåŠ¡ï¼Œéƒ½éœ€è¦è°ƒç”¨æœåŠ¡ Bï¼Œé‚£ä¹ˆè¿™äº›æœåŠ¡éƒ½éœ€è¦ç»´æŠ¤æœåŠ¡ B çš„ IP å’Œ Port åˆ—è¡¨ã€‚æ¯ä¸€æ¬¡å½“æœåŠ¡ B å¢åŠ ã€åˆ é™¤ä¸€ä¸ªå®ä¾‹ï¼Œæˆ–è€…ä¸€ä¸ªå®ä¾‹çš„ IP å’Œ Port å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰è°ƒç”¨æœåŠ¡ B çš„æœåŠ¡éƒ½éœ€è¦æ›´æ–°é…ç½®ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç¹æ‚å¹¶ä¸”å®¹æ˜“å‡ºé”™çš„å·¥ä½œï¼Œé‚£ä¹ˆæ€ä¹ˆé¿å…è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œ<strong>æˆ‘ä»¬å¯ä»¥å°†é…ç½® IP å’Œ Port åˆ—è¡¨çš„æ–¹å¼ä¿®æ”¹ä¸ºé…ç½®åŸŸåå’Œ Port</strong>ï¼Œå³åœ¨æœåŠ¡ A çš„é…ç½®æ–‡ä»¶ä¸­ä¸å†é…ç½®æœåŠ¡ B çš„ IP å’Œ Port åˆ—è¡¨ï¼Œè€Œæ˜¯é…ç½®æœåŠ¡ B çš„åŸŸåå’Œ Portã€‚è¿™æ ·å¯ä»¥é€šè¿‡åŸŸåè§£æè·å¾—æ‰€æœ‰æœåŠ¡ B çš„ IP åˆ—è¡¨ï¼Œè®©æ‰€æœ‰çš„æœåŠ¡ B éƒ½ç›‘å¬åŒä¸€ä¸ª Portã€‚</p><p>å½“æœåŠ¡ B çš„å®ä¾‹æœ‰å˜æ›´ï¼Œä¸è®ºæœ‰å¤šå°‘ä¸ªæœåŠ¡è°ƒç”¨æœåŠ¡ Bï¼Œåªéœ€è¦ä¿®æ”¹æœåŠ¡ B çš„åŸŸåè§£æå°±è¡Œäº†ï¼Œè¿™æ ·å°±è§£å†³äº†é…ç½®åˆ†æ•£åˆ°å„ä¸ªè°ƒç”¨æœåŠ¡ï¼Œå¯¼è‡´é…ç½®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚</p><p>ä½†æ˜¯å¦‚æœæœåŠ¡ B çš„æŸä¸ªå®ä¾‹å‡ºç°äº†å´©æºƒã€ç½‘ç»œä¸é€šç­‰æƒ…å†µæ—¶ï¼ŒæœåŠ¡ A åœ¨å¯¹æœåŠ¡ B çš„åŸŸååš DNS è§£ææ—¶ï¼Œä¼šå› ä¸ºæˆ‘ä»¬ä¸èƒ½å®æ—¶æ„ŸçŸ¥æœåŠ¡å®ä¾‹çš„çŠ¶æ€å˜æ›´ï¼Œä¾ç„¶è·å¾—è¯¥å®ä¾‹çš„ IPï¼Œä»è€Œå¯¼è‡´è®¿é—®é”™è¯¯ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªç§Ÿæˆ¿ä¸­ä»‹çš„ä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ã€‚å‡è®¾æ¯ä¸€ä¸ªè¦ç§Ÿ A å°åŒºæˆ¿å­çš„äººï¼Œéƒ½éœ€è¦äº²è‡ªå» A å°åŒºè·å¾—ç§Ÿæˆ¿çš„ä¿¡æ¯ï¼ŒåŒæ ·ï¼Œå¦‚æœè¿˜æƒ³ç§Ÿ B å°åŒºçš„æˆ¿å­ï¼Œä¹Ÿéœ€è¦äº²è‡ªå» B å°åŒºè·å¾—ç§Ÿæˆ¿çš„ä¿¡æ¯ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚è€Œæ›´éº»çƒ¦çš„æ˜¯ï¼Œä¸€ä¸ªå°åŒºçš„ç§Ÿæˆ¿ä¿¡æ¯æœ‰å˜åŒ–äº†ï¼Œä¹‹å‰è·å¾—ä¿¡æ¯çš„äººéƒ½ä¸ä¼šç«‹åˆ»çŸ¥é“ï¼Œéå¸¸å½±å“æˆ‘ä»¬çš„ç§Ÿæˆ¿æ•ˆç‡å’ŒæˆåŠŸç‡ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œç§Ÿæˆ¿ä¸­ä»‹å‡ºç°äº†ï¼Œä»–æ¯å¤©å»å„ä¸ªå°åŒºæ”¶é›†ç§Ÿæˆ¿ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦ç§Ÿæˆ¿çš„æ—¶å€™ï¼Œç›´æ¥è”ç³»ä¸­ä»‹å°±å¯ä»¥è·å¾—ç›¸å…³å°åŒºçš„ç§Ÿæˆ¿ä¿¡æ¯ï¼Œå¹¶ä¸”ï¼Œä¸­ä»‹ä¼šè®°å½•è°å…³å¿ƒå“ªä¸€ä¸ªå°åŒºçš„ç§Ÿæˆ¿ä¿¡æ¯ã€‚å¦‚æœä¸€ä¸ªå°åŒºçš„ç§Ÿæˆ¿ä¿¡æ¯æœ‰å˜åŒ–ï¼Œä¸­ä»‹ä¼šä¸»åŠ¨é€šçŸ¥ç»™å…³å¿ƒè¿™ä¸ªå°åŒºçš„äººï¼Œè¿™æ ·å°±è®©ç§Ÿæˆ¿è¿™ä»¶äº‹æƒ…å˜å¾—éå¸¸é«˜æ•ˆäº†ã€‚è¿™é‡Œçš„ç§Ÿæˆ¿ä¸­ä»‹ï¼Œå…¶å®å°±æ˜¯æ‰¿æ‹…ç§Ÿæˆ¿ä¿¡æ¯çš„æ³¨å†Œå’Œå‘ç°çš„åŠŸèƒ½ã€‚</p><p>æ‰€ä»¥ï¼Œç»è¿‡å‰é¢çš„è®¨è®ºï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºæœåŠ¡æ³¨å†Œå‘ç°éœ€è¦è§£å†³çš„ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š</p><ul>\n<li><strong>ç»Ÿä¸€çš„ä¸­ä»‹å­˜å‚¨</strong>ï¼šè°ƒç”¨æ–¹åœ¨å”¯ä¸€çš„åœ°æ–¹è·å¾—è¢«è°ƒç”¨æœåŠ¡çš„æ‰€æœ‰å®ä¾‹çš„ä¿¡æ¯ã€‚</li>\n<li><strong>çŠ¶æ€æ›´æ–°ä¸é€šçŸ¥</strong>ï¼šæœåŠ¡å®ä¾‹çš„ä¿¡æ¯èƒ½å¤ŸåŠæ—¶æ›´æ–°å¹¶ä¸”é€šçŸ¥åˆ°æœåŠ¡è°ƒç”¨æ–¹ã€‚</li>\n</ul><h2>æ€ä¹ˆå®ç°æœåŠ¡æ³¨å†Œå‘ç°</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·æ¥è®¨è®ºâ€œç»Ÿä¸€çš„ä¸­ä»‹å­˜å‚¨â€å’Œâ€œçŠ¶æ€æ›´æ–°ä¸é€šçŸ¥â€è¿™ä¸¤ä¸ªå…³é”®é—®é¢˜çš„è§£å†³åŠæ³•ã€‚</p><h3>å¦‚ä½•é€‰æ‹©é€‚åˆçš„ä¸­ä»‹å­˜å‚¨</h3><p>â€œä¸­ä»‹å­˜å‚¨â€è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®æ˜¯æˆ‘ä»¬åœ¨è§£å†³æœåŠ¡æ³¨å†Œå‘ç°çš„æ—¶å€™ï¼Œå¼•å…¥çš„ä¸€ä¸ªä¸­é—´å±‚ã€‚â€œ<strong>è®¡ç®—æœºç§‘å­¦é¢†åŸŸçš„ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªé—´æ¥çš„ä¸­é—´å±‚æ¥è§£å†³</strong>â€ï¼Œè¿™ä¸€ç»å…¸è®ºæ–­åˆä¸€æ¬¡è¢«éªŒè¯äº†ã€‚</p><p>æˆ‘ä»¬éœ€è¦æ‰¾ä¸€ä¸ªå¤–éƒ¨å­˜å‚¨æ¥åšè§£å†³é—®é¢˜çš„ä¸­é—´å±‚ï¼Œä½†æ˜¯åŸºäºæœåŠ¡æ³¨å†Œå‘ç°çš„åœºæ™¯ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªå­˜å‚¨éœ€è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ul>\n<li><strong>å¯ç”¨æ€§è¦æ±‚éå¸¸é«˜</strong>ï¼šå› ä¸ºæœåŠ¡æ³¨å†Œå‘ç°æ˜¯æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºçŸ³ï¼Œå¦‚æœå®ƒå‡ºç°é—®é¢˜ï¼Œæ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå°†ä¸å¯ç”¨ã€‚</li>\n<li><strong>æ€§èƒ½è¦æ±‚ä¸­ç­‰</strong>ï¼šåªè¦è®¾è®¡å¾—å½“ï¼Œæ•´ä½“çš„æ€§èƒ½è¦æ±‚è¿˜æ˜¯å¯æ§çš„ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯æ€§èƒ½è¦æ±‚ä¼šéšåˆ†å¸ƒå¼ç³»ç»Ÿçš„å®ä¾‹æ•°é‡å˜å¤šè€Œæé«˜ã€‚</li>\n<li><strong>æ•°æ®å®¹é‡è¦æ±‚ä½</strong>ï¼šå› ä¸ºä¸»è¦æ˜¯å­˜å‚¨å®ä¾‹çš„ IP å’Œ Port ç­‰å…ƒæ•°æ®ï¼Œå•ä¸ªå®ä¾‹å­˜å‚¨çš„æ•°æ®é‡éå¸¸å°ã€‚</li>\n<li><strong>API å‹å¥½ç¨‹åº¦</strong>ï¼šæ˜¯å¦èƒ½å¾ˆå¥½æ”¯æŒæœåŠ¡æ³¨å†Œå‘ç°åœºæ™¯çš„â€œå‘å¸ƒ/è®¢é˜…â€æ¨¡å¼ï¼Œå°†è¢«è°ƒç”¨æœåŠ¡å®ä¾‹çš„ IP å’Œ Port ä¿¡æ¯åŒæ­¥ç»™è°ƒç”¨æ–¹ã€‚</li>\n</ul><p>åŸºäºä¸Šé¢å¯¹æ‰€éœ€æ±‚å­˜å‚¨ç³»ç»Ÿç‰¹ç‚¹çš„åˆ†æï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å¯¹å¸¸è§çš„å­˜å‚¨ç³»ç»Ÿåšä¸€ä¸ªç³»ç»Ÿæ€§çš„æ¯”è¾ƒï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/20/67/2036d98ca1f84aba1a2ca2b2bb962867.jpg?wh=2284x1382\" alt=\"\"><br>\né€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›å­˜å‚¨ç³»ç»Ÿå‡ ä¹éƒ½èƒ½ç”¨æ¥ä½œä¸ºæœåŠ¡å‘ç°çš„ä¸­ä»‹å­˜å‚¨ç³»ç»Ÿï¼Œä½†æ˜¯åŸºäºæ•´ä½“è€ƒè™‘ï¼ŒMySQL å’Œ Redis åœ¨é«˜å¯ç”¨æ€§å’Œ API å‹å¥½ç¨‹åº¦ä¸Šä¸æ»¡è¶³è¦æ±‚ï¼Œ<strong>æ‰€ä»¥æ›´åˆé€‚çš„å­˜å‚¨ç³»ç»Ÿä¸º etcdã€ZooKeeper å’ŒEureka</strong>ã€‚å¦‚æœä½ å¸Œæœ›åœ¨ç³»ç»Ÿå‡ºç°ç½‘ç»œåˆ†åŒºçš„æ—¶å€™ï¼Œè°ƒç”¨æ–¹ä¸€å®šä¸èƒ½è·å–è¿‡æœŸçš„è¢«è°ƒç”¨æœåŠ¡å®ä¾‹ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±é€‰æ‹© etcd å’Œ ZooKeeperï¼Œä½†æ˜¯åœ¨è¢«åˆ†åŒºçš„éƒ¨åˆ†ç½‘ç»œä¸­ï¼Œå¯èƒ½å‡ºç°å› ä¸ºä¸èƒ½è·å–è¢«è°ƒç”¨æœåŠ¡å®ä¾‹ä¿¡æ¯ï¼Œè€Œå¯¼è‡´è¯·æ±‚å¤±è´¥çš„æƒ…å†µã€‚</p><p>å¦‚æœä½ è®¤ä¸ºè·å–è¿‡æœŸçš„å®ä¾‹ä¿¡æ¯ï¼Œå¯èƒ½æ¯”å®Œå…¨ä¸èƒ½è·å–è¢«è°ƒç”¨æœåŠ¡çš„å®ä¾‹ä¿¡æ¯è¦å¥½ï¼Œé‚£ä¹ˆå°±é€‰æ‹© Eurekaã€‚æ¯•ç«Ÿå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä¿¡æ¯å¹¶æ²¡æœ‰è¿‡æœŸï¼Œå› ä¸ºè¢«è°ƒç”¨æœåŠ¡çš„å®ä¾‹é…ç½®è¿˜æ²¡æœ‰å‘ç”Ÿå˜æ›´ï¼Œå¹¶ä¸”å°±ç®—è·å¾—çš„ä¿¡æ¯è¿‡æœŸäº†ï¼Œä¹Ÿåªæ˜¯å¯¼è‡´ä¸€æ¬¡è¯·æ±‚å¤±è´¥ã€‚</p><h3>æ€ä¹ˆåšæœåŠ¡çŠ¶æ€çš„æ›´æ–°ä¸é€šçŸ¥</h3><p>å¯¹äºâ€œçŠ¶æ€æ›´æ–°ä¸é€šçŸ¥â€è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†è§£ä¸ºä¸¤ä¸ªé—®é¢˜è§£å†³ï¼š<br>\n<img src=\"https://static001.geekbang.org/resource/image/aa/f9/aaee5f37247ea33a77159803f6dd94f9.jpg?wh=2284x906\" alt=\"\"><br>\né¦–å…ˆæ˜¯æœåŠ¡çš„çŠ¶æ€æ›´æ–°ï¼Œå³<strong>æœåŠ¡æ³¨å†Œ</strong>ï¼šå¦‚ä¸Šå›¾ä¸­çš„ 1ï¼ŒæœåŠ¡çš„æ¯ä¸€ä¸ªå®ä¾‹æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œæ¯”å¦‚ 30 ç§’ï¼Œä¸»åŠ¨å‘ä¸­ä»‹å­˜å‚¨ä¸ŠæŠ¥ä¸€æ¬¡è‡ªå·±çš„ IP å’Œ Port ä¿¡æ¯ï¼ŒåŒæ—¶å‘Šè¯‰ä¸­ä»‹å­˜å‚¨è¿™ä¸€ä¿¡æ¯çš„æœ‰æ•ˆæœŸï¼Œæ¯”å¦‚ 90 ç§’ã€‚è¿™æ ·å¦‚æœå®ä¾‹ä¸€ç›´å­˜æ´»ï¼Œé‚£ä¹ˆæ¯éš” 30 ç§’ï¼Œå®ƒéƒ½ä¼šå°†è‡ªå·±çš„çŠ¶æ€ä¿¡æ¯æ›´æ–°åˆ°ä¸­ä»‹å­˜å‚¨ã€‚å¦‚æœå®ä¾‹å´©æºƒæˆ–è€…è¢« Kill äº†ï¼Œé‚£ä¹ˆ 90 ç§’åï¼Œä¸­ä»‹å­˜å‚¨å°±ä¼šè‡ªåŠ¨å°†è¯¥å®ä¾‹çš„ä¿¡æ¯æ¸…é™¤ï¼Œé¿å…äº†å®ä¾‹ä¿¡æ¯çš„ä¸ä¸€è‡´ã€‚æ‰€ä»¥è¿™é‡Œçš„æ•°æ®åŒæ­¥æ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„ã€‚</p><p>ç„¶åæ˜¯æœåŠ¡çš„çŠ¶æ€é€šçŸ¥ï¼Œå³<strong>æœåŠ¡å‘ç°</strong>ï¼šå¦‚ä¸Šå›¾ä¸­çš„ 2ï¼ŒæœåŠ¡çš„è°ƒç”¨æ–¹é€šè¿‡ä¸­ä»‹å­˜å‚¨ç›‘å¬è¢«è°ƒç”¨æœåŠ¡çš„çŠ¶æ€å˜æ›´ä¿¡æ¯ã€‚è¿™é‡Œå¯ä»¥é‡‡ç”¨â€œå‘å¸ƒ/è®¢é˜…â€æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨è½®è¯¢æ¨¡å¼ï¼Œæ¯”å¦‚æ¯30ç§’å»ä¸­ä»‹å­˜å‚¨è·å–ä¸€æ¬¡ã€‚æ‰€ä»¥è¿™é‡Œçš„æ•°æ®åŒæ­¥ä¹Ÿæ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„ã€‚</p><h3>é€‰æ‹© AP è¿˜æ˜¯ CP</h3><p>æ ¹æ®ä¸Šé¢çš„è®¨è®ºï¼Œä»æœåŠ¡æ³¨å†Œå‘ç°çš„åœºæ™¯æ¥è¯´ï¼Œ<strong>æˆ‘è®¤ä¸ºEureka ä¹‹ç±»çš„ AP ç³»ç»Ÿæ›´ç¬¦åˆè¦æ±‚</strong>ã€‚å› ä¸ºæœåŠ¡å‘ç°æ˜¯æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºçŸ³ï¼Œæ‰€ä»¥å¯ç”¨æ€§æ˜¯æœ€å…³é”®çš„è®¾è®¡ç›®æ ‡ã€‚å¹¶ä¸”ä¸Šé¢ä»‹ç»çš„æœåŠ¡ï¼Œåœ¨åŒæ­¥è‡ªå·±çš„çŠ¶æ€åˆ°ä¸­ä»‹å­˜å‚¨ï¼Œä»¥åŠè°ƒç”¨æ–¹é€šè¿‡ä¸­ä»‹å­˜å‚¨åŒºè·å¾—æœåŠ¡çš„çŠ¶æ€ï¼Œè¿™ä¸¤ä¸ªè¿‡ç¨‹ä¸­çš„æ•°æ®åŒæ­¥éƒ½æ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„ã€‚æ—¢ç„¶æœåŠ¡æ³¨å†Œå‘ç°ç³»ç»Ÿæ•´ä½“æ˜¯ä¸€ä¸ª AP ç³»ç»Ÿï¼Œé‚£ä¹ˆå°†ä¸­ä»‹å­˜å‚¨è®¾è®¡ä¸º CP ç³»ç»Ÿï¼Œå»æ”¾å¼ƒéƒ¨åˆ†çš„å¯ç”¨æ€§æ˜¯ä¸å€¼å¾—çš„ã€‚</p><p>åˆ°è¿™é‡Œï¼ŒæœåŠ¡æ³¨å†Œå‘ç°çš„åŸºæœ¬åŸç†å°±ä»‹ç»å®Œäº†ã€‚å½“æˆ‘ä»¬å»ç ”ç©¶å„ç§å„æ ·æœåŠ¡å‘ç°çš„å®ç°æ–¹å¼æ—¶ï¼Œå°±ä¼šå‘ç°å…¶å®å®ƒä»¬éƒ½æ˜¯åœ¨è§£å†³â€œå¦‚ä½•é€‰æ‹©é€‚åˆçš„ä¸­ä»‹å­˜å‚¨â€å’Œâ€œæ€ä¹ˆåšæœåŠ¡çŠ¶æ€çš„æ›´æ–°ä¸é€šçŸ¥â€çš„é—®é¢˜ã€‚å½“ç„¶ç”±äºæœåŠ¡å‘ç°æ˜¯éå¸¸åŸºç¡€å’Œé‡è¦çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å…¶ä¸­çš„å„ç§å®ç°éƒ½æ˜¯åœ¨é«˜æ€§èƒ½ã€é«˜å¯ç”¨æ€§çš„åŸºç¡€ä¸Šè§£å†³ä¸Šé¢çš„ä¸¤ä¸ªé—®é¢˜ï¼Œåšç€å„è‡ªçš„ä¼˜åŒ–ä¸æƒè¡¡ã€‚</p><h2>æ€»ç»“</h2><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¸€èµ·å®Œæ•´åœ°è®¨è®ºäº†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªéå¸¸å…³é”®çš„ç»„ä»¶â€œæœåŠ¡æ³¨å†Œå‘ç°â€ã€‚æˆ‘ä»¬ä¸€èµ·æ¥æ€»ç»“ä¸€ä¸‹è¿™èŠ‚è¯¾çš„ä¸»è¦å†…å®¹ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/ed/eb/ed1ec5b5352a8e1b6e0518526cdee8eb.jpg?wh=2284x1475\" alt=\"\"><br>\né¦–å…ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºäº†ä¸ºä»€ä¹ˆä¼šå¯¹å•ä½“æœåŠ¡è¿›è¡Œæ‹†åˆ†ï¼Œä¸»è¦æœ‰æˆæœ¬ã€æ•ˆç‡å’Œç¨³å®šæ€§ä¸‰ä¸ªç»´åº¦çš„åŸå› ã€‚</p><p>ç„¶åï¼Œåœ¨å°†å•ä½“æœåŠ¡æ‹†åˆ†åï¼Œä¹‹å‰å¾ˆæ–¹ä¾¿çš„æœ¬åœ°å‡½æ•°è°ƒç”¨å˜æˆäº†è·¨å®ä¾‹æˆ–è€…è·¨æœºå™¨çš„è¿œç¨‹è°ƒç”¨ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè°ƒç”¨æ–¹éœ€è¦çŸ¥é“è¢«è°ƒç”¨æ–¹çš„ IP å’Œ Port ç­‰ä¿¡æ¯ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬å‘ç° IP å’Œ Port ä¿¡æ¯åˆ—è¡¨æ‰‹åŠ¨é…ç½®å­˜åœ¨é…ç½®åˆ†æ•£ï¼Œæ— æ³•ç»Ÿä¸€ç®¡ç†çš„é—®é¢˜ï¼Œåœ¨è°ƒç”¨æ–¹å˜å¤šä¹‹åï¼Œå°†ä¼šå˜å¾—æ— æ³•ç»´æŠ¤ã€‚åŸŸå å’Œ Port ä¿¡æ¯çš„æ‰‹åŠ¨é…ç½®éœ€è¦è§£å†³äº†é…ç½®ç»Ÿä¸€ç®¡ç†çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå®ä¾‹å‡ºç°çªå‘çš„å¼‚å¸¸æƒ…å†µï¼Œå°†æ— æ³•é€šçŸ¥åˆ°è°ƒç”¨æ–¹ï¼Œå¯¼è‡´æ•…éšœã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬è®¨è®ºäº†é€šè¿‡ä¸­ä»‹å­˜å‚¨åšæœåŠ¡å‘ç°çš„æ–¹å¼ï¼Œå…¶ä¸­æœ€å…³é”®çš„æ˜¯å¯¹äºä¸­ä»‹å­˜å‚¨çš„é€‰æ‹©é—®é¢˜ã€‚<strong>è€Œä¸”åœ¨æœåŠ¡å‘ç°çš„åœºæ™¯é‡Œé¢ï¼Œé«˜å¯ç”¨æ€§æ˜¯æœ€<strong><strong>åº”è¯¥</strong></strong>å»è€ƒè™‘çš„è®¾è®¡æŒ‡æ ‡ï¼Œæ‰€ä»¥é€‰æ‹© AP ç³»ç»Ÿåšä¸­ä»‹å­˜å‚¨æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©</strong>ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å¦‚æœå°†æ•´ä¸ªäº’è”ç½‘çœ‹æˆæ˜¯ä¸€ä¸ªéå¸¸åºå¤§çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„æœåŠ¡æ³¨å†Œå‘ç°ç³»ç»Ÿæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿå®ƒæ˜¯ä¸€ä¸ª AP ç³»ç»Ÿè¿˜æ˜¯ä¸€ä¸ª CP ç³»ç»Ÿï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå‘è¡¨ä½ çš„çœ‹æ³•ã€‚å¦‚æœè¿™èŠ‚è¯¾å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¹Ÿæ¨èä½ åˆ†äº«ç»™æ›´å¤šçš„åŒäº‹ã€æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"æ˜¥èŠ‚åŠ é¤ï½œæŠ€æœ¯å€ºå¦‚æˆ¿è´·ï¼Œæ˜¯å¦å€Ÿè´·æ€æ ·å–èˆï¼Ÿ","id":483748},"right":{"article_title":"05ï½œè´Ÿè½½å‡è¡¡ï¼šä»çŠ¶æ€çš„è§’åº¦é‡æ–°æ€è€ƒè´Ÿè½½å‡è¡¡","id":483663}},"comments":[{"had_liked":false,"id":332684,"user_name":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","can_delete":false,"product_type":"c1","uid":1807943,"ip_address":"","ucode":"8C64517DA556FE","user_header":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","comment_is_top":false,"comment_ctime":1643472735,"is_pvip":true,"replies":[{"id":"121573","content":"Redis é«˜å¯ç”¨æ˜¯æ»¡è¶³è¦æ±‚çš„ï¼Œåªä¸è¿‡ Redis çš„é«˜å¯ç”¨éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è¿ç»´ï¼Œæ¯”å¦‚é€šè¿‡å“¨å…µæœºåˆ¶åœ¨æ£€å¯Ÿå’Œå‰”é™¤å‡ºç°æ•…éšœçš„èŠ‚ç‚¹ç­‰ï¼Œè€Œ etcdã€ZooKeeper å’Œ Eureka å®ƒä»¬çš„é«˜å¯ç”¨æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ï¼Œæ‰€ä»¥è¯¾ç¨‹ä¸­è¯´ Redis é«˜å¯ç”¨çš„è¿ç»´æˆæœ¬é«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1047808","ctime":1643502090,"ip_address":"","comment_id":332684,"utype":1}],"discussion_count":3,"race_medal":0,"score":"48888112991","product_id":100104701,"comment_content":"è€å¸ˆï¼ŒredisåšæœåŠ¡æ³¨å†Œå‘ç°ï¼Œä»é«˜å¯ç”¨è§’åº¦æ¥çœ‹å…¶å®æŒºåˆé€‚çš„ï¼Œä¸»ä»æ¶æ„è¶³å¤Ÿå­˜å‚¨ipã€portç­‰ä¿¡æ¯ã€‚","like_count":12,"discussions":[{"author":{"id":2900973,"avatar":"","nickname":"Geek_064e72","note":"","ucode":"D627BACE46C37C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556544,"discussion_content":"redisé«˜å¯ç”¨ä¸èƒ½ä½¿ç”¨äº‘æœåŠ¡å•†æä¾›çš„äº§å“å—ï¼Ÿè¿™æ ·å°±åŸºæœ¬ä¸ç”¨æˆ‘ä»¬åšè¿ç»´ï¼Œä¹Ÿä¸ç”¨è‡ªå·±éƒ¨ç½²å“¨å…µèŠ‚ç‚¹äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1647412954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548994,"discussion_content":"Redis é«˜å¯ç”¨æ˜¯æ»¡è¶³è¦æ±‚çš„ï¼Œåªä¸è¿‡ Redis çš„é«˜å¯ç”¨éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è¿ç»´ï¼Œæ¯”å¦‚é€šè¿‡å“¨å…µæœºåˆ¶åœ¨æ£€å¯Ÿå’Œå‰”é™¤å‡ºç°æ•…éšœçš„èŠ‚ç‚¹ç­‰ï¼Œè€Œ etcdã€ZooKeeper å’Œ Eureka å®ƒä»¬çš„é«˜å¯ç”¨æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ï¼Œæ‰€ä»¥è¯¾ç¨‹ä¸­è¯´ Redis é«˜å¯ç”¨çš„è¿ç»´æˆæœ¬é«˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1643502090,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2055464,"avatar":"","nickname":"æ¯›å“¥","note":"","ucode":"35EB4D51DB2C9B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553531,"discussion_content":"1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645952512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332574,"user_name":"åŠªåŠ›åŠªåŠ›å†åŠªåŠ›","can_delete":false,"product_type":"c1","uid":1182967,"ip_address":"","ucode":"F71E16290CB58C","user_header":"https://static001.geekbang.org/account/avatar/00/12/0c/f7/d6547adb.jpg","comment_is_top":false,"comment_ctime":1643350791,"is_pvip":true,"replies":[{"id":"121533","content":"æ•´ä½“æ€è·¯éå¸¸æ­£ç¡®ï¼Œæœ‰ä¸¤ä¸ªç»†èŠ‚é—®é¢˜ï¼š<br><br>1ã€æœåŠ¡çš„è°ƒç”¨æµç¨‹ï¼Œè·å¾—ipåï¼Œé€šè¿‡ipè·¯ç”±çš„è¿‡ç¨‹ï¼Œä¸€èˆ¬æ˜¯ å±€åŸŸç½‘ -&gt; NAT -&gt; å…¬ç½‘ã€‚<br><br>2ã€â€œDNS åŸŸååˆ°ip æ˜ å°„ä¿®æ”¹æ˜¯CP ï¼ˆå¿…é¡»æˆåŠŸï¼‰â€ï¼ŒDNSåŸŸååˆ°ipæ˜¯APçš„ï¼ŒC å¼ºè°ƒçš„æ˜¯ä¿®æ”¹å¤šèŠ‚ç‚¹çš„æ•°æ®æ˜¯åŸå­å’Œç¬æ—¶çš„ï¼Œå’Œå•èŠ‚ç‚¹çš„ä¸€æ ·ï¼Œä¸€è‡´æ€§çš„è®¨è®ºåœ¨åé¢ã€Œä¸€è‡´æ€§ä¸å…±è¯†ã€ä¸­ä¼šè®¨è®ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1047808","ctime":1643436173,"ip_address":"","comment_id":332574,"utype":1}],"discussion_count":1,"race_medal":0,"score":"36003089159","product_id":100104701,"comment_content":"æ€è€ƒé¢˜ï¼š<br>äº’è”ç½‘ä¸­ ä¸€ä¸ªæœåŠ¡çš„è°ƒç”¨æµç¨‹<br>1. å®¢æˆ·ç«¯ è®¿é—®åŸŸå -ã€‹ DNS ï¼ˆè·å–å¯¹åº”çš„ipï¼‰-ã€‰ å±€åŸŸç½‘å†…éƒ¨è·¯ç”±å™¨ ï¼ˆå†è·å–ä¸‹ä¸€ä¸ªå±€åŸŸç½‘çš„ipï¼‰ -ã€‹ ä¸€ç›´åˆ°æœåŠ¡ç«¯ -ã€‰ è¿”å›<br><br>å½“ç„¶äº†ä¸­é—´è¿˜å°‘äº† æ¶ˆæ¯æ€ä¹ˆç»„æˆ åŸŸåçš„è§£æè¿‡ç¨‹ ç­‰ç­‰ ä½†æ˜¯ä¸æ˜¯é‡ç‚¹<br>è¿™ä¸ªæµç¨‹ä¸­ å…¶å®DNS å°±å±äºåŸŸå-ipçš„æ³¨å†Œä¸­å¿ƒ<br>çŒœæƒ³ï¼š<br>1. DNS åŸŸååˆ°ip æ˜ å°„ä¿®æ”¹æ˜¯CP ï¼ˆå¿…é¡»æˆåŠŸï¼‰<br>2  å„åœ°DNS è‡ªèº«åˆ·æ–°æ˜¯ å®šæ—¶æ›´æ–° ï¼ˆå¼‚æ­¥ï¼‰<br><br>éœ€è¦ä¹‹åå®è·µï¼š<br>1. ä¸€ä¸ªä¿¡æ¯åœ¨å¤šå®ä¾‹ä¸ŠåŒæ—¶ç”Ÿæ•ˆ ï¼Œè¦é€šè¿‡é…ç½®ä¿¡æ¯æ¥å®ç°ï¼Œé…ç½®ä¿¡æ¯ä¸ºä»€ä¹ˆèƒ½å®ç°è¿™ä¸ªåŠŸèƒ½ å’Œ åŒºåˆ«ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548888,"discussion_content":"æ•´ä½“æ€è·¯éå¸¸æ­£ç¡®ï¼Œæœ‰ä¸¤ä¸ªç»†èŠ‚é—®é¢˜ï¼š\n\n1ã€æœåŠ¡çš„è°ƒç”¨æµç¨‹ï¼Œè·å¾—ipåï¼Œé€šè¿‡ipè·¯ç”±çš„è¿‡ç¨‹ï¼Œä¸€èˆ¬æ˜¯ å±€åŸŸç½‘ -> NAT -> å…¬ç½‘ã€‚\n\n2ã€â€œDNS åŸŸååˆ°ip æ˜ å°„ä¿®æ”¹æ˜¯CP ï¼ˆå¿…é¡»æˆåŠŸï¼‰â€ï¼ŒDNSåŸŸååˆ°ipæ˜¯APçš„ï¼ŒC å¼ºè°ƒçš„æ˜¯ä¿®æ”¹å¤šèŠ‚ç‚¹çš„æ•°æ®æ˜¯åŸå­å’Œç¬æ—¶çš„ï¼Œå’Œå•èŠ‚ç‚¹çš„ä¸€æ ·ï¼Œä¸€è‡´æ€§çš„è®¨è®ºåœ¨åé¢ã€Œä¸€è‡´æ€§ä¸å…±è¯†ã€ä¸­ä¼šè®¨è®ºã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1643436173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333810,"user_name":"Ricky Gu","can_delete":false,"product_type":"c1","uid":1671708,"ip_address":"","ucode":"89C4BF94ADADD8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKu71e4qLenzmVZPQe2ZJzt30rKFuBSdfib0UzhAKTicpj74cCRZL4nFGdeMBlfdibiciciby2v9bz6HNkg/132","comment_is_top":false,"comment_ctime":1644546379,"is_pvip":false,"replies":[{"id":"121948","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1047808","ctime":1644577788,"ip_address":"","comment_id":333810,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23119382859","product_id":100104701,"comment_content":"äº’è”ç½‘ç³»ç»Ÿé€šè¿‡DNS å®ç°æœåŠ¡æ³¨å†Œå’Œå‘ç°ã€‚æ‰€ä»¥ä¸­ä»‹å­˜å‚¨æ˜¯DNSã€‚DNS å­˜åœ¨ç¼“å­˜ï¼Œä¿®æ”¹DNS ä¹‹åä¼šæœ‰ç”Ÿæ•ˆæ—¶é—´ï¼Œæ‰€ä»¥DNS æ˜¯æœ€ç»ˆä¸€è‡´æ€§è€Œä¸æ˜¯å¼ºä¸€è‡´æ€§ç³»ç»Ÿã€‚åŒæ—¶DNSçš„å¯ç”¨æ€§å‡ ä¹æ˜¯100%çš„ã€‚æ‰€ä»¥æˆ‘è§‰å¾—DNSæ˜¯AP ç³»ç»Ÿã€‚","like_count":6,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550526,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644577788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332539,"user_name":"blentle","can_delete":false,"product_type":"c1","uid":1064679,"ip_address":"","ucode":"AC092609A4942A","user_header":"https://static001.geekbang.org/account/avatar/00/10/3e/e7/261711a5.jpg","comment_is_top":false,"comment_ctime":1643331845,"is_pvip":false,"replies":[{"id":"121490","content":"é¦–å…ˆï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†å¹³æ»‘å‡çº§ï¼ŒæœåŠ¡å‘å¸ƒéƒ½æ˜¯æ»šåŠ¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€ä¸ªæœåŠ¡çš„å¤šä¸ªå®ä¾‹çš„å‘å¸ƒä¸æ˜¯ä¸€ä¸ªåŸå­å’Œç¬é—´æ“ä½œï¼Œæ‰€ä»¥æ­£å¸¸æƒ…å†µä¸‹ä¹Ÿä¼šå­˜åœ¨æ–°è€ç‰ˆæœ¬å…±å­˜çš„æƒ…å†µã€‚<br>å…¶æ¬¡ï¼Œå®¢æˆ·ç«¯æ˜¯é€šè¿‡ç½‘ç»œå»æœåŠ¡æ³¨å†Œå‘ç°ä¸­å¿ƒè·å–æœåŠ¡çš„åˆ—è¡¨æ˜¯é€šè¿‡ç½‘ç»œçš„ï¼Œå¯èƒ½æœ‰çš„å®¢æˆ·ç«¯ A 10 ms å°±è·å¾—åˆ°æœ€æ–°çš„åˆ—è¡¨äº†ï¼Œå®¢æˆ·ç«¯ B ç”±äºç½‘ç»œä¸¢åŒ…ï¼Œç»è¿‡é‡è¯• 30 s åæ‰è·å¾—åˆ—è¡¨ï¼Œè¿™é‡Œå°±å¯¼è‡´å°±ç®—æœåŠ¡æ³¨å†Œå‘ç°ä¸­å¿ƒå†…éƒ¨æ˜¯CPçš„ï¼Œä½†æ˜¯ä»å®¢æˆ·ç«¯è·å–æœåŠ¡åˆ—è¡¨çš„è§’åº¦æ¥çœ‹ï¼Œä¾ç„¶æ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„ã€‚<br>æœ€åï¼Œå…³äºä½ è¿™ä¸ªåœºæ™¯ï¼Œå¦‚æœéœ€è¦ä¸€ä¸ªä¿¡æ¯åœ¨å¤šå®ä¾‹ä¸ŠåŒæ—¶ç”Ÿæ•ˆï¼Œæ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯é€šè¿‡é…ç½®ä¿¡æ¯æ¥å®ç°ï¼Œåœ¨åé¢çš„è¯¾ç¨‹ã€Œé…ç½®ä¸­å¿ƒã€ä¸­æœ‰è¯¦ç»†çš„è®¨è®ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1047808","ctime":1643346835,"ip_address":"","comment_id":332539,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18823201029","product_id":100104701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘é—®.å¦‚æœé€‰æ‹©apä½œä¸ºæœåŠ¡å‘ç°ä¸­å¿ƒï¼Œç½‘ç»œå‘ç”Ÿåˆ†åŒºæ—¶.è¯»åˆ°è¿‡æ—¶çš„æ•°æ®ï¼Œå¦‚æœåˆšå¥½é‚£ä¸ªæœåŠ¡æ›´æ–°åå› ä¸ºç½‘ç»œåˆ†åŒºæ²¡æœ‰æ¥å¾—åŠæ›´æ–°ï¼Œæ¯”å¦‚å¹¿å‘Šç«ä»·å‡ºä»·æœåŠ¡çš„ä»·æ ¼å˜æ›´ï¼Œå²‚ä¸æ˜¯æ¯”cpæœåŠ¡å‘ç°äº§ç”Ÿæ›´å¤§çš„ç¾éš¾.è¿™æ—¶å€™å¯ä»¥å®¹å¿è°ƒç”¨å¤±è´¥ä¸ä¼šæŸå¤±å¹¿å‘Šä¸»çš„åˆ©ç›Š.","like_count":5,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548732,"discussion_content":"é¦–å…ˆï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†å¹³æ»‘å‡çº§ï¼ŒæœåŠ¡å‘å¸ƒéƒ½æ˜¯æ»šåŠ¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€ä¸ªæœåŠ¡çš„å¤šä¸ªå®ä¾‹çš„å‘å¸ƒä¸æ˜¯ä¸€ä¸ªåŸå­å’Œç¬é—´æ“ä½œï¼Œæ‰€ä»¥æ­£å¸¸æƒ…å†µä¸‹ä¹Ÿä¼šå­˜åœ¨æ–°è€ç‰ˆæœ¬å…±å­˜çš„æƒ…å†µã€‚\nå…¶æ¬¡ï¼Œå®¢æˆ·ç«¯æ˜¯é€šè¿‡ç½‘ç»œå»æœåŠ¡æ³¨å†Œå‘ç°ä¸­å¿ƒè·å–æœåŠ¡çš„åˆ—è¡¨æ˜¯é€šè¿‡ç½‘ç»œçš„ï¼Œå¯èƒ½æœ‰çš„å®¢æˆ·ç«¯ A 10 ms å°±è·å¾—åˆ°æœ€æ–°çš„åˆ—è¡¨äº†ï¼Œå®¢æˆ·ç«¯ B ç”±äºç½‘ç»œä¸¢åŒ…ï¼Œç»è¿‡é‡è¯• 30 s åæ‰è·å¾—åˆ—è¡¨ï¼Œè¿™é‡Œå°±å¯¼è‡´å°±ç®—æœåŠ¡æ³¨å†Œå‘ç°ä¸­å¿ƒå†…éƒ¨æ˜¯CPçš„ï¼Œä½†æ˜¯ä»å®¢æˆ·ç«¯è·å–æœåŠ¡åˆ—è¡¨çš„è§’åº¦æ¥çœ‹ï¼Œä¾ç„¶æ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„ã€‚\næœ€åï¼Œå…³äºä½ è¿™ä¸ªåœºæ™¯ï¼Œå¦‚æœéœ€è¦ä¸€ä¸ªä¿¡æ¯åœ¨å¤šå®ä¾‹ä¸ŠåŒæ—¶ç”Ÿæ•ˆï¼Œæ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯é€šè¿‡é…ç½®ä¿¡æ¯æ¥å®ç°ï¼Œåœ¨åé¢çš„è¯¾ç¨‹ã€Œé…ç½®ä¸­å¿ƒã€ä¸­æœ‰è¯¦ç»†çš„è®¨è®ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643346835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333649,"avatar":"https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg","nickname":"ä¸åƒè¾£ğŸ‘¾","note":"","ucode":"B25E0725B5E85F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559397,"discussion_content":"é‚£ä¹ˆè¿™é‡Œå°±éœ€è¦ä¸€ä¸ªcpçš„æœåŠ¡å‘ç°å–½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648736244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332562,"user_name":"GACÂ·DU","can_delete":false,"product_type":"c1","uid":1385403,"ip_address":"","ucode":"7847FBE1C13740","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/bb/a1a61f7c.jpg","comment_is_top":false,"comment_ctime":1643342388,"is_pvip":true,"replies":[{"id":"121491","content":"å¦‚ä½•ä¼˜é›…çš„æ‘˜æ‰ä¸€ä¸ªå‘ç”Ÿæ•…éšœçš„æœåŠ¡ï¼Œè®©æ³¨å†Œä¸­å¿ƒå¤„ç†è¿˜æ˜¯è®©ä¸Šæ¸¸æœåŠ¡è°ƒç”¨æ—¶å‘ç°æ•…éšœé€šæŠ¥æ³¨å†Œä¸­å¿ƒï¼Ÿ<br>å®ä¾‹åœ¨æ³¨å†Œå‘ç°ä¸­å¿ƒä¸Šçš„æ³¨å†Œä¿¡æ¯æ˜¯æœ‰æ—¶æ•ˆæ€§çš„ï¼Œå¦‚æœä¸€ä¸ªæœåŠ¡çš„å®ä¾‹å‘ç”Ÿæ•…éšœï¼Œè¿™ä¸ªå®ä¾‹å°±ä¸ä¼šå†æ¬¡å’Œæ³¨å†Œå‘ç°ä¸­å¿ƒå‘é€å¿ƒè·³æˆ–è€…æ³¨å†Œäº†ï¼Œè¿™ä¸ªå®ä¾‹çš„æ³¨å†Œä¿¡æ¯å°±ä¼šå› ä¸ºè¿‡æœŸè€Œè¢«åˆ é™¤äº†<br><br>å¦‚æœè¿™ä¸ªæœåŠ¡æœ‰åä¸ªæ¥å£ï¼Œåªæœ‰å…¶ä¸­çš„ä¸€ä¸ªæ¥å£å‡ºäº†æ•…éšœï¼Œèƒ½åšåˆ°æ¥å£çº§åˆ«çš„éš”ç¦»å—ï¼Ÿ<br>æ³¨å†Œå‘ç°ä¸­å¿ƒæ˜¯å…³æ³¨å®ä¾‹å±‚é¢çš„ï¼Œå¯¹äºæ¥å£å±‚é¢ä¸åº”è¯¥ç”±æ³¨å†Œå‘ç°æ¥å¤„ç†ï¼Œä¸è¿‡ç†”æ–­æœºåˆ¶å¯ä»¥è¿›è¡Œéš”ç¦»ï¼Œåœ¨åé¢çš„è¯¾ç¨‹ä¸­ä¼šè®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚<br><br>äº‘åŸç”Ÿæ˜¯å¤§è¶‹åŠ¿ï¼Œåˆ©ç”¨Serviceæ¥è¿›è¡ŒæœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡çš„æ–¹å‘æ˜¯æ­£ç¡®çš„ã€‚<br><br>å…³äºâ€œæ¯”å¦‚ä¸€ä¸ªé‡åŒ–äº¤æ˜“ç³»ç»ŸCPåº”è¯¥æ¯”APæ›´åˆé€‚ã€‚â€çš„é—®é¢˜ï¼Œåœ¨å‰é¢çš„é—®é¢˜ä¸­å›å¤äº†ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ã€‚<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1047808","ctime":1643347777,"ip_address":"","comment_id":332562,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14528244276","product_id":100104701,"comment_content":"è€å¸ˆï¼Œå¦‚ä½•ä¼˜é›…çš„æ‘˜æ‰ä¸€ä¸ªå‘ç”Ÿæ•…éšœçš„æœåŠ¡ï¼Œè®©æ³¨å†Œä¸­å¿ƒå¤„ç†è¿˜æ˜¯è®©ä¸Šæ¸¸æœåŠ¡è°ƒç”¨æ—¶å‘ç°æ•…éšœé€šæŠ¥æ³¨å†Œä¸­å¿ƒï¼Ÿå¦‚æœè¿™ä¸ªæœåŠ¡æœ‰åä¸ªæ¥å£ï¼Œåªæœ‰å…¶ä¸­çš„ä¸€ä¸ªæ¥å£å‡ºäº†æ•…éšœï¼Œèƒ½åšåˆ°æ¥å£çº§åˆ«çš„éš”ç¦»å—ï¼Ÿ<br><br>ä¹‹å‰åœ¨ä¼ ç»Ÿçš„ç‰©ç†æœºéƒ¨ç½²æœåŠ¡æ—¶åˆ©ç”¨Etcdæ¥åšæœåŠ¡çš„æ³¨å†Œä¸å‘ç°ï¼Œåæ¥æ‰€æœ‰çš„æœåŠ¡éƒ½è¿ç§»åˆ°äº‘åŸç”Ÿä¸‹éƒ¨ç½²åˆ©ç”¨Serviceæ¥è¿›è¡ŒæœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡å¾ˆæ–¹ä¾¿ï¼Œè€å¸ˆæˆ‘è¿™ä¸ªè·Ÿè¿›çš„æ–¹å‘æ­£ç¡®å—ï¼Ÿ<br><br>æœåŠ¡æ³¨å†Œä¸å‘ç°æœ¬è´¨æ˜¯å®ç°æœåŠ¡çš„è´Ÿè½½å‡è¡¡ï¼Œæœ€ç»ˆçš„ç›®çš„è¿˜æ˜¯è®©æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå®ç°é«˜å¯é ï¼Œæ˜¯APç³»ç»Ÿè¿˜æ˜¯CPç³»ç»Ÿï¼Œè¦çœ‹æœ€ç»ˆçš„æœåŠ¡ç”¨æˆ·çš„å¿å—åº¦ã€‚æ¯”å¦‚ä¸€ä¸ªé‡åŒ–äº¤æ˜“ç³»ç»ŸCPåº”è¯¥æ¯”APæ›´åˆé€‚ã€‚","like_count":4,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548733,"discussion_content":"å¦‚ä½•ä¼˜é›…çš„æ‘˜æ‰ä¸€ä¸ªå‘ç”Ÿæ•…éšœçš„æœåŠ¡ï¼Œè®©æ³¨å†Œä¸­å¿ƒå¤„ç†è¿˜æ˜¯è®©ä¸Šæ¸¸æœåŠ¡è°ƒç”¨æ—¶å‘ç°æ•…éšœé€šæŠ¥æ³¨å†Œä¸­å¿ƒï¼Ÿ\nå®ä¾‹åœ¨æ³¨å†Œå‘ç°ä¸­å¿ƒä¸Šçš„æ³¨å†Œä¿¡æ¯æ˜¯æœ‰æ—¶æ•ˆæ€§çš„ï¼Œå¦‚æœä¸€ä¸ªæœåŠ¡çš„å®ä¾‹å‘ç”Ÿæ•…éšœï¼Œè¿™ä¸ªå®ä¾‹å°±ä¸ä¼šå†æ¬¡å’Œæ³¨å†Œå‘ç°ä¸­å¿ƒå‘é€å¿ƒè·³æˆ–è€…æ³¨å†Œäº†ï¼Œè¿™ä¸ªå®ä¾‹çš„æ³¨å†Œä¿¡æ¯å°±ä¼šå› ä¸ºè¿‡æœŸè€Œè¢«åˆ é™¤äº†\n\nå¦‚æœè¿™ä¸ªæœåŠ¡æœ‰åä¸ªæ¥å£ï¼Œåªæœ‰å…¶ä¸­çš„ä¸€ä¸ªæ¥å£å‡ºäº†æ•…éšœï¼Œèƒ½åšåˆ°æ¥å£çº§åˆ«çš„éš”ç¦»å—ï¼Ÿ\næ³¨å†Œå‘ç°ä¸­å¿ƒæ˜¯å…³æ³¨å®ä¾‹å±‚é¢çš„ï¼Œå¯¹äºæ¥å£å±‚é¢ä¸åº”è¯¥ç”±æ³¨å†Œå‘ç°æ¥å¤„ç†ï¼Œä¸è¿‡ç†”æ–­æœºåˆ¶å¯ä»¥è¿›è¡Œéš”ç¦»ï¼Œåœ¨åé¢çš„è¯¾ç¨‹ä¸­ä¼šè®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚\n\näº‘åŸç”Ÿæ˜¯å¤§è¶‹åŠ¿ï¼Œåˆ©ç”¨Serviceæ¥è¿›è¡ŒæœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡çš„æ–¹å‘æ˜¯æ­£ç¡®çš„ã€‚\n\nå…³äºâ€œæ¯”å¦‚ä¸€ä¸ªé‡åŒ–äº¤æ˜“ç³»ç»ŸCPåº”è¯¥æ¯”APæ›´åˆé€‚ã€‚â€çš„é—®é¢˜ï¼Œåœ¨å‰é¢çš„é—®é¢˜ä¸­å›å¤äº†ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643347777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337462,"user_name":"Pikachu","can_delete":false,"product_type":"c1","uid":1069306,"ip_address":"","ucode":"56BEBB9E9BF0B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/50/fa/48e2acbd.jpg","comment_is_top":false,"comment_ctime":1646836207,"is_pvip":true,"replies":[{"id":"123338","content":"æ˜¯çš„ï¼Œä¸éœ€è¦äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1047808","ctime":1646890611,"ip_address":"","comment_id":337462,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5941803503","product_id":100104701,"comment_content":"ä¸€ç›´æœ‰ä¸ªé—®é¢˜æƒ³è¯·è€å¸ˆå¸®å¿™è§£æƒ‘ï¼Œä½¿ç”¨kubernetesçš„éƒ¨ç½²çš„åº”ç”¨ï¼ŒæœåŠ¡é—´çš„è®¿é—®å¯ä»¥é€šè¿‡k8sçš„service nameè¿›è¡Œè®¿é—®ï¼ŒåŸç†å°±ç±»ä¼¼äºè€å¸ˆä¸Šé¢æåˆ°çš„ï¼Œåœ¨K8sé›†ç¾¤çš„DNSå®ç°è§£æï¼Œå¹¶ä¸”é›†ç¾¤è¿˜å¯ä»¥æ ¹æ®æœåŠ¡çš„å¯ç”¨çŠ¶æ€è¿›è¡ŒèŠ‚ç‚¹åŠ å…¥å’Œæ‘˜é™¤ã€‚é‚£ä¹ˆè¿™ç§æƒ…å†µï¼Œæˆ‘ç†è§£é™¤äº†éœ€è¦è®¿é—®æŒ‡å®šçš„èŠ‚ç‚¹æƒ…å†µä»¥å¤–ï¼Œå…¶ä»–å°±å·²ç»æ»¡è¶³æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„æœºåˆ¶äº†ï¼Œæ˜¯ä¸æ˜¯å°±ä¸éœ€è¦å•ç‹¬çš„æœåŠ¡å‘ç°ä¸­é—´ä»¶äº†ï¼Ÿä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹","like_count":1,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555390,"discussion_content":"æ˜¯çš„ï¼Œä¸éœ€è¦äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646890611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352315,"user_name":"janey","can_delete":false,"product_type":"c1","uid":1227067,"ip_address":"","ucode":"0BD4BDB4EB2E94","user_header":"https://static001.geekbang.org/account/avatar/00/12/b9/3b/7224f3b8.jpg","comment_is_top":false,"comment_ctime":1658548387,"is_pvip":false,"replies":[{"id":"128269","content":"1ã€ä»ç¨³å®šæ€§è§’åº¦ï¼Œå¯ä»¥é¿å…ç›¸äº’å½±å“<br>2ã€ä»æˆæœ¬è§’åº¦ï¼Œæ¯”å¦‚Aæ¨¡å—éœ€è¦ssdç£ç›˜200Gï¼ŒBæ¨¡å—åªéœ€è¦æ™®é€šç£ç›˜200Gï¼Œå¦‚æœä¸€å°æœºå™¨å°±éœ€è¦400Gçš„ssdç£ç›˜(å½“ç„¶å¯ä»¥ä¸€å°æœºå™¨æŒ‚ä¸¤å—ç›˜ï¼Œssdå’Œæœºæ¢°ç›˜å„200gï¼Œä½†æ˜¯å¯¹äºè¿ç»´éƒ¨ç½²çš„æˆæœ¬å¾ˆå¤§)","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1047808","ctime":1658855346,"ip_address":"","comment_id":352315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1658548387","product_id":100104701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè§£é‡Šè´´åˆåœºæ™¯éå¸¸æ–¹ä¾¿ç†è§£ï¼Œæ„Ÿè§‰éå¸¸èµã€‚ä¸šåŠ¡ç»éªŒä¸æ˜¯å¾ˆå¤šï¼Œåœ¨å­¦ä¹ æœ¬ç« çš„æ—¶å€™ï¼Œå•ä½“æœåŠ¡å±€é™åœ¨å¼‚æ„è´Ÿè½½ä¸Šçš„è§£é‡Šä¸æ˜¯ç‰¹åˆ«ç†è§£ï¼Œå¸Œæœ›èƒ½å¾—åˆ°ç­”ç–‘ï¼šå¦‚æœè¯´æœåŠ¡é‡Œæœ‰æ¨¡å—Aæ˜¯IOå¯†é›†å‹ï¼Œæ¨¡å—Bæ˜¯CPUå¯†é›†å‹ï¼Œé‚£ä¹ˆå•ä½“éƒ¨ç½²çš„æ—¶å€™è‚¯å®šè¦åŒæ—¶å…¼é¡¾IOå’ŒCPUï¼›å‡è®¾æˆ‘ä»¬æŠŠè¿™2ä¸ªæ¨¡å—æ‹†å¼€äº†ï¼Œæ¨¡å—Aå¯ä»¥éƒ¨ç½²åˆ°ä¸€å°IOå¥½çš„æœºå™¨ä¸Šï¼Œæ¨¡å—Béƒ¨ç½²åˆ°ä¸€å°CPUå¥½çš„æœºå™¨ä¸Šï¼›ç°åœ¨éœ€è¦2å°æœºå™¨èµ„æºï¼Œå¹¶ä¸”2å°æœºå™¨CPUå’ŒIOèµ„æºåŠ å’Œä¸èƒ½é™ï¼Œä»èµ„æºä¸Šçœ‹çš„è¯ï¼Œæ”¶ç›Šåœ¨å“ªé‡Œå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581587,"discussion_content":"1ã€ä»ç¨³å®šæ€§è§’åº¦ï¼Œå¯ä»¥é¿å…ç›¸äº’å½±å“\n2ã€ä»æˆæœ¬è§’åº¦ï¼Œæ¯”å¦‚Aæ¨¡å—éœ€è¦ssdç£ç›˜200Gï¼ŒBæ¨¡å—åªéœ€è¦æ™®é€šç£ç›˜200Gï¼Œå¦‚æœä¸€å°æœºå™¨å°±éœ€è¦400Gçš„ssdç£ç›˜(å½“ç„¶å¯ä»¥ä¸€å°æœºå™¨æŒ‚ä¸¤å—ç›˜ï¼Œssdå’Œæœºæ¢°ç›˜å„200gï¼Œä½†æ˜¯å¯¹äºè¿ç»´éƒ¨ç½²çš„æˆæœ¬å¾ˆå¤§)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658855346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341702,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1649775920,"is_pvip":false,"replies":[{"id":"124836","content":"å¯¹äº mysql å’Œ redisï¼Œå¦‚æœä¸è¦æ±‚é«˜å¯ç”¨ï¼Œæ˜¯å¯ä»¥å®ç°å¼ºä¸€è‡´æ€§çš„ï¼Œæ¯”å¦‚åŒæ­¥å¤åˆ¶ï¼Œæ¯”å¦‚ä¸»ä¸å¯ä»¥åˆ‡æ¢ç­‰æ“ä½œã€‚<br><br>é«˜å¯ç”¨é—®é¢˜å’Œä¸€è‡´æ€§é—®é¢˜å¾ˆå¤šæ—¶å€™æ˜¯å¯ä»¥ç›¸äº’è½¬æ¢çš„ï¼ŒCAPğŸ˜€","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1047808","ctime":1649777929,"ip_address":"","comment_id":341702,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1649775920","product_id":100104701,"comment_content":"ä¸ªäººæ„Ÿè§‰mysqlå’Œredisä¸é€‚åˆåšæ³¨å†Œå‘ç°ä¸­å¿ƒçš„æœ€é‡è¦åŸå› ä¸æ˜¯é«˜å¯ç”¨ï¼Œè€Œæ˜¯ä¸€è‡´æ€§ã€‚Eurekaèƒ½æ»¡è¶³æœ€ç»ˆä¸€è‡´æ€§ã€‚mysqlå’Œredisæ»¡è¶³ä¸äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562170,"discussion_content":"å¯¹äº mysql å’Œ redisï¼Œå¦‚æœä¸è¦æ±‚é«˜å¯ç”¨ï¼Œæ˜¯å¯ä»¥å®ç°å¼ºä¸€è‡´æ€§çš„ï¼Œæ¯”å¦‚åŒæ­¥å¤åˆ¶ï¼Œæ¯”å¦‚ä¸»ä¸å¯ä»¥åˆ‡æ¢ç­‰æ“ä½œã€‚\n\né«˜å¯ç”¨é—®é¢˜å’Œä¸€è‡´æ€§é—®é¢˜å¾ˆå¤šæ—¶å€™æ˜¯å¯ä»¥ç›¸äº’è½¬æ¢çš„ï¼ŒCAPğŸ˜€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649777929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1046714,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","nickname":"çº¦ä¹¦äºš","note":"","ucode":"81EA27ADD9EC1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":562244,"discussion_content":"å—¯ï¼Œè¿™é—®é¢˜æˆ‘åˆæƒ³äº†æƒ³ï¼Œåº”è¯¥è¿™æ ·è¡¨è¾¾ï¼šå¦‚æœæŠŠmysqlå’Œrediså•æœºçœ‹åšä¸€ç§Cï¼Œé‚£ä¹ˆå®ƒä»æ ¹æœ¬ä¸Šå°±èˆå¼ƒäº†Aï¼Œä½†zk etcdèƒ½æ»¡è¶³ä¸€å®šç¨‹åº¦çš„Aã€‚å¦‚æœmysqlå’ŒredisåŸºäºé«˜å¯ç”¨æ­å»ºï¼Œæ¯”èµ·eurekaï¼Œåˆç¼ºå°‘å¯¹æœ€ç»ˆä¸€è‡´æ€§çš„èµ·ç ä¿éšœã€‚\nç›¸å½“äºä¸¤å¤´ä¸å  :)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649807005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":562170,"ip_address":""},"score":562244,"extra":""}]}]},{"had_liked":false,"id":340320,"user_name":"ä¸åƒè¾£ğŸ‘¾","can_delete":false,"product_type":"c1","uid":1333649,"ip_address":"","ucode":"B25E0725B5E85F","user_header":"https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg","comment_is_top":false,"comment_ctime":1648738335,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648738335","product_id":100104701,"comment_content":"è€å¸ˆæˆ‘è§‰å¾— <br>1ã€åº•å±‚æœåŠ¡éƒ¨ç½²èŠ‚ç‚¹ä¸‡å¹´ä¸å˜ï¼Œè¿­ä»£å‘¨æœŸéå¸¸é•¿ã€‚<br>2ã€ç½‘ç»œç»“æ„å¹¶ä¸ä¸å¤æ‚ã€‚<br>çš„åœºæ™¯æ˜¯å¦ä¹Ÿåº”è¯¥çº³å…¥æœåŠ¡æ³¨å†Œä½œä¸ºæ€è€ƒé¢˜ã€‚","like_count":0},{"had_liked":false,"id":340315,"user_name":"ä¸åƒè¾£ğŸ‘¾","can_delete":false,"product_type":"c1","uid":1333649,"ip_address":"","ucode":"B25E0725B5E85F","user_header":"https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg","comment_is_top":false,"comment_ctime":1648737652,"is_pvip":true,"replies":[{"id":"124451","content":"æœåŠ¡å‘ç°æ˜¯æœåŠ¡æ²»ç†çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åœ¨å¾®æœåŠ¡æœåŠ¡å¤ªå¤šçš„æƒ…å†µä¸‹è‡ªåŠ¨åŒ–è¿ç»´æœåŠ¡çš„ï¼Œå¦‚æœä»ä¸æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è¿ç»´æˆæœ¬ä½ï¼Œé‚£ä¹Ÿä¸ç”¨æœåŠ¡å‘ç°ä¹Ÿå¯ä»¥ã€‚<br><br>ä¸è¿‡æ­£å¸¸æƒ…å†µæ¥è¯´ï¼ŒæœåŠ¡å‘ç°å°±æ˜¯éå¸¸æ–¹ä¾¿é›†æˆçš„ï¼Œé›†æˆä¸€ä¸ª SDKå°±è¡Œï¼ŒæœåŠ¡ç½‘æ ¼åˆ™æ›´ç®€å•ï¼Œæ–°çš„æœåŠ¡åº”è¯¥ä½¿ç”¨ã€‚<br><br>ç‰ˆæœ¬å˜æ›´çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡æ³¨å†Œå‘ç°å‘ç°æ–°ç‰ˆæœ¬çš„æœåŠ¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1047808","ctime":1648776822,"ip_address":"","comment_id":340315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1648737652","product_id":100104701,"comment_content":"è€å¸ˆ å‡å¦‚æˆ‘ä¸€ä¸ªåº•å±‚æœåŠ¡éƒ¨ç½²èŠ‚ç‚¹ä¸‡å¹´ä¸å˜ï¼Œè¿­ä»£å‘¨æœŸéå¸¸é•¿ã€‚è¿™è¿˜é€‚åˆåšæœåŠ¡æ³¨å†Œå‘ç°å—ï¼Ÿæ˜¯å¦ä¸ºæ ¸å¿ƒæœåŠ¡ï¼Œæ˜¯å¦éœ€è¦å¹³æ»‘å‡çº§çš„åœºæ™¯æ‰éœ€è¦æ³¨å†Œå‘ç°ï¼Ÿæ³¨å†Œå‘ç°ä¸ç‰ˆæœ¬å˜æ›´æœ‰å•¥åŒºåˆ«å’Œè”ç³»ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559440,"discussion_content":"æœåŠ¡å‘ç°æ˜¯æœåŠ¡æ²»ç†çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åœ¨å¾®æœåŠ¡æœåŠ¡å¤ªå¤šçš„æƒ…å†µä¸‹è‡ªåŠ¨åŒ–è¿ç»´æœåŠ¡çš„ï¼Œå¦‚æœä»ä¸æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è¿ç»´æˆæœ¬ä½ï¼Œé‚£ä¹Ÿä¸ç”¨æœåŠ¡å‘ç°ä¹Ÿå¯ä»¥ã€‚\n\nä¸è¿‡æ­£å¸¸æƒ…å†µæ¥è¯´ï¼ŒæœåŠ¡å‘ç°å°±æ˜¯éå¸¸æ–¹ä¾¿é›†æˆçš„ï¼Œé›†æˆä¸€ä¸ª SDKå°±è¡Œï¼ŒæœåŠ¡ç½‘æ ¼åˆ™æ›´ç®€å•ï¼Œæ–°çš„æœåŠ¡åº”è¯¥ä½¿ç”¨ã€‚\n\nç‰ˆæœ¬å˜æ›´çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡æ³¨å†Œå‘ç°å‘ç°æ–°ç‰ˆæœ¬çš„æœåŠ¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648776822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340312,"user_name":"ä¸åƒè¾£ğŸ‘¾","can_delete":false,"product_type":"c1","uid":1333649,"ip_address":"","ucode":"B25E0725B5E85F","user_header":"https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg","comment_is_top":false,"comment_ctime":1648736391,"is_pvip":true,"replies":[{"id":"124454","content":"åé¢çš„è¯¾ç¨‹ï¼Œâ€œå¤åˆ¶â€å’Œâ€œä¸€è‡´æ€§ä¸å…±è¯†â€åºåˆ—æœ‰è¯¦ç»†ä»‹ç»","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1047808","ctime":1648777109,"ip_address":"","comment_id":340312,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1648736391","product_id":100104701,"comment_content":"è€å¸ˆä½ æ€ä¹ˆçŸ¥é“eureka zookeeper etcd redisçš„é«˜å¯ç”¨å­˜åœ¨çš„é—®é¢˜ï¼Œå“ªé‡Œå¯ä»¥å­¦ä¹ è¿™éƒ¨åˆ†çŸ¥è¯†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559443,"discussion_content":"åé¢çš„è¯¾ç¨‹ï¼Œâ€œå¤åˆ¶â€å’Œâ€œä¸€è‡´æ€§ä¸å…±è¯†â€åºåˆ—æœ‰è¯¦ç»†ä»‹ç»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648777109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340310,"user_name":"ä¸åƒè¾£ğŸ‘¾","can_delete":false,"product_type":"c1","uid":1333649,"ip_address":"","ucode":"B25E0725B5E85F","user_header":"https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg","comment_is_top":false,"comment_ctime":1648735505,"is_pvip":true,"replies":[{"id":"124453","content":"å¦‚æœç½‘ç»œåˆ†åŒºçš„æ—¶å€™ï¼Œæ•°æ®è¿‡æœŸæ˜¯å¯¹å¯¹ä¾§çš„æ•°æ®è€Œè¨€ï¼Œåˆ†åŒºä¸¤ä¾§å„è‡ªçš„æ•°æ®æ˜¯æ–°çš„ï¼Œä¸ä¼šæœ‰é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1047808","ctime":1648777011,"ip_address":"","comment_id":340310,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1648735505","product_id":100104701,"comment_content":"å½“å‡ºç°ç½‘ç»œåˆ†åŒºæ—¶ï¼ŒEurekaè¯»åˆ°è¿‡æœŸçš„æ•°æ®(æœåŠ¡éƒ½æ¬è¿äº†)ï¼Œä¸è¿˜æ˜¯ç”¨ä¸äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1047808,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fd/00/f5d19a8b.jpg","nickname":"ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ","note":"","ucode":"C7FAC706B18376","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":559442,"discussion_content":"å¦‚æœç½‘ç»œåˆ†åŒºçš„æ—¶å€™ï¼Œæ•°æ®è¿‡æœŸæ˜¯å¯¹å¯¹ä¾§çš„æ•°æ®è€Œè¨€ï¼Œåˆ†åŒºä¸¤ä¾§å„è‡ªçš„æ•°æ®æ˜¯æ–°çš„ï¼Œä¸ä¼šæœ‰é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648777011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}