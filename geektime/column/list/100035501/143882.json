{"id":143882,"title":"11 | å‰‘èµ°åé”‹ï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å››ç«ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬è¦æ¥è§¦ä¸€ä¸ªå’Œ MVC å¯†åˆ‡ç›¸å…³çš„ï¼Œèƒ½å¸¦æ¥æ€ç»´æ¨¡å¼æ”¹å˜çš„ç¼–ç¨‹èŒƒå‹â€”â€”é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼ŒAspect Oriented Programmingï¼‰ã€‚</p><h2>â€œç»™æˆ‘ä¸€æŠŠé”¤å­ï¼Œæ»¡ä¸–ç•Œéƒ½æ˜¯é’‰å­â€</h2><p>æˆ‘è®°å¾—æ›¾ç»æœ‰è¿™æ ·ä¸€ä¸ªç›¸å½“æµè¡Œçš„è§‚ç‚¹ï¼Œæ˜¯è¯´ï¼Œç¼–ç¨‹è¯­è¨€åªéœ€è¦å­¦ä¹ ä¸€é—¨å°±å¤Ÿäº†ï¼Œå­¦é‚£ä¹ˆå¤šä¹Ÿæ²¡æœ‰ç”¨ï¼Œå› ä¸ºæŠ€æœ¯æ˜¯ä¸€é€šç™¾é€šçš„ï¼Œåˆ«çš„ç¼–ç¨‹è¯­è¨€å¯ä»¥è¯´æ˜¯å¤§åŒå°å¼‚ã€‚æˆ‘ç›¸ä¿¡è‡³ä»ŠæŠ±æœ‰è¿™ç§è§‚ç‚¹çš„ç¨‹åºå‘˜ä¹Ÿä¸åœ¨å°‘æ•°ã€‚</p><p>å¯æƒœï¼Œäº‹å®è¿œæ²¡æœ‰é‚£ä¹ˆç¾å¥½ã€‚è¿™ä¸ªè§‚ç‚¹ä¸»è¦æœ‰ä¸¤å¤„å€¼å¾—å•†æ¦·ï¼š</p><ul>\n<li>å…¶ä¸€ï¼Œä¸åŒçš„æŠ€æœ¯ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šç¡®å®æ˜¯ç›¸é€šçš„ï¼Œå¯æ˜¯ï¼ŒæŠ€æœ¯ä¹‹é—´çš„å…³è”æ€§ï¼Œè¿œä¸æ˜¯â€œä¸€é€šç™¾é€šâ€è¿™å››ä¸ªç®€ç®€å•å•çš„å­—èƒ½å¤Ÿè§£é‡Šçš„ã€‚å¦„æƒ³ä»…ä»…å‡­å€Ÿç²¾é€šä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå°±èƒ½å¤Ÿè‡ªåŠ¨æ‰“é€šå…¶å®ƒæ‰€æœ‰ç¼–ç¨‹è¯­è¨€çš„ä»»ç£äºŒè„‰ï¼Œè¿™æ˜¯ä¸ç°å®çš„ã€‚</li>\n<li>å…¶äºŒï¼Œé€šå¸¸æ¥è¯´ï¼Œè¯´ç¼–ç¨‹è¯­è¨€å¤§åŒå°å¼‚å…¶å®æ˜¯å¾ˆä¸å®¢è§‚çš„ã€‚ç¼–ç¨‹è¯­è¨€ç»è¿‡äº†é•¿æ—¶é—´çš„å‘å±•æ¼”åŒ–ï¼Œå¦‚ä»Šå·²ç»å‘å±•å‡ºéå¸¸å¤šçš„ç±»å‹ï¼Œç”¨ä½œç¼–ç¨‹è¯­è¨€åˆ†ç±»æ ‡å‡†ä¹‹ä¸€çš„ç¼–ç¨‹èŒƒå‹ä¹Ÿå¯è°“æ˜¯ç™¾èŠ±é½æ”¾ã€‚</li>\n</ul><p>å› æ­¤æˆ‘ä»¬è¦å­¦ä¹ å¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œç‰¹åˆ«æ˜¯é‚£äº›èƒ½å¸¦æ¥æ–°çš„æ€ç»´æ¨¡å¼çš„ç¼–ç¨‹è¯­è¨€ã€‚ç°åœ¨ï¼ŒæŠŠè¿™ä¸ªè§‚ç‚¹æ³›åŒ–åˆ°æ™®éçš„è½¯ä»¶æŠ€æœ¯ä¸Šï¼Œä¹Ÿä¸€æ ·é€‚ç”¨ã€‚æˆ‘ä»¬éƒ½çŸ¥é“è¦â€œä¸€åˆ‡ä»å®é™…å‡ºå‘â€ï¼Œéƒ½çŸ¥é“è¦â€œå…·ä½“é—®é¢˜å…·ä½“åˆ†æâ€ï¼Œå¯æ˜¯ï¼Œ<strong>åœ¨çœ¼ç•Œè¿˜ä¸å¤Ÿå¼€é˜”çš„æ—¶å€™ï¼Œç‰¹åˆ«æ˜¯èŒä¸šç”Ÿæ¶¯çš„æ—©æœŸï¼Œç¨‹åºå‘˜åœ¨æ­¦å™¨åº“é‡Œçš„æ­¦å™¨è¿˜éå¸¸æœ‰é™çš„æ—¶å€™ï¼Œä¾ç„¶æ— æ³•é¿å…â€œç»™æˆ‘ä¸€æŠŠé”¤å­ï¼Œæ»¡ä¸–ç•Œéƒ½æ˜¯é’‰å­â€ï¼Œåœ¨æŠ€æœ¯é€‰æ‹©çš„æ—¶å€™çœ¼å…‰ç›¸å¯¹å±€é™ã€‚</strong></p><!-- [[[read_end]]] --><p>æ‰€ä»¥æˆ‘ä»¬è¦å­¦ä¹ å…¨æ ˆæŠ€æœ¯ï¼Œå°¤å…¶æ˜¯è¦å­¦ä¹ è¿™äº›ä¸ä¸€æ ·ï¼Œä½†ä¸€å®šå±‚é¢ä¸Šå’Œå·²æŒæ¡çŸ¥è¯†ç›¸é€šçš„å…¸å‹æŠ€æœ¯ã€‚ä»Šå¤©æˆ‘ä»¬è¦å­¦ä¹ çš„è¿™é¡¹åœ¨ MVC æ¡†æ¶ä¸­å¹¿æ³›ä½¿ç”¨çš„æŠ€æœ¯ï¼Œæ˜¯å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸€ç±»å±‚é¢çš„ç¼–ç¨‹èŒƒå‹ï¼Œå«åšé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚</p><p>äº’è”ç½‘æœ‰è®¸å¤šåŠŸèƒ½ï¼Œå¦‚æœä½¿ç”¨ä¼ ç»Ÿçš„åŸºäºå•ä¸ªè¯·æ±‚å¤„ç†æµç¨‹çš„æ–¹å¼æ¥ç¼–ç ï¼Œä»£ç å°±ä¼šéå¸¸ç¹çï¼Œè€Œä½¿ç”¨ AOP çš„æ–¹å¼ï¼Œä»£ç å¯ä»¥å¾—åˆ°å¾ˆå¤§ç¨‹åº¦ä¸Šçš„ç®€åŒ–ã€‚å¸Œæœ›é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ï¼Œä½ çš„æ­¦å™¨åº“é‡Œï¼Œèƒ½å¤Ÿå¤šä¸€æŠŠé‡å‹æœºæªã€‚</p><h2>AOP çš„æ¦‚å¿µ</h2><p><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹æ˜¯ä¸€ç§é€šè¿‡æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆCross-cutting Concernsï¼‰åˆ†ç¦»æ¥å¢å¼ºä»£ç æ¨¡å—æ€§çš„æ–¹æ³•ï¼Œå®ƒèƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹ä¸šåŠ¡ä¸»ä½“ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯¹å®ƒæ·»åŠ é¢å¤–çš„è¡Œä¸ºã€‚</strong></p><p>ä¸å¥½ç†è§£å—ï¼Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬æ¥å¯¹å®ƒåšè¿›ä¸€æ­¥çš„è¯´æ˜ã€‚</p><p>é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼ŒAOP çš„ç›®æ ‡æ˜¯å¢å¼ºä»£ç æ¨¡å—æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬è´¨ä¸Šå®ƒæ˜¯ä¸€ç§â€œè§£è€¦â€çš„æ–¹æ³•ï¼Œåœ¨è¿™æ–¹é¢å®ƒå’Œæˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„åˆ†å±‚ç­‰æ–¹æ³•æ˜¯ç±»ä¼¼çš„ï¼Œå¯æ˜¯ï¼Œå®ƒåˆ†ç¦»ä»£ç çš„è§’åº¦ä¸æˆ‘ä»¬ä¼ ç»Ÿã€è‡ªç„¶çš„æ¨¡å—è®¾è®¡æ€è·¯æˆªç„¶ä¸åŒã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼Œå¯¹äºå›¾ä¹¦é¦†ç³»ç»Ÿæ¥è¯´ï¼Œæœ‰è®¸å¤šä¸šåŠ¡æµç¨‹ï¼Œå…¶ä¸­å€Ÿä¹¦å’Œè¿˜ä¹¦æ˜¯æœ€å…¸å‹çš„ä¸¤æ¡ã€‚å¯¹äºè¿™äº›ä¸šåŠ¡æµç¨‹æ¥è¯´ï¼Œä»å›¾ä¹¦ç³»ç»Ÿæ¥æ”¶åˆ°è¯·æ±‚å¼€å§‹ï¼Œéœ€è¦å®Œæˆè‹¥å¹²ä¸ªæ­¥éª¤ï¼Œä½†è¿™äº›æ­¥éª¤éƒ½æœ‰ä¸€äº›â€œå…±æ€§â€ï¼Œæ¯”å¦‚é‰´æƒï¼Œæ¯”å¦‚äº‹åŠ¡æ§åˆ¶ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f1/2c/f17118dd2cb4f0132c76fd152a3c062c.png?wh=1950*420\" alt=\"\"></p><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬æŒ‰ç…§è‡ªç„¶çš„æ€è€ƒæ–¹å¼ï¼Œæˆ‘ä»¬ä¼šæŠŠä»£ç æŒ‰ç…§æµç¨‹åˆ†è§£æˆä¸€ä¸ªä¸€ä¸ªçš„æ­¥éª¤ï¼Œåœ¨æ¯ä¸ªæ­¥éª¤å®Œæˆçš„å‰åæ·»åŠ è¿™äº›â€œå…±æ€§â€é€»è¾‘ã€‚å¯æ˜¯è¿™æ ·ï¼Œè¿™äº›é€»è¾‘å°±ä¼šæ•£è½åœ¨ä»£ç å„å¤„äº†ï¼Œå³ä¾¿æˆ‘ä»¬æŠŠå®ƒä»¬æŒ‰ç…§é‡å¤ä»£ç æŠ½å–çš„åŸåˆ™ï¼ŒæŠ½å‡ºæ¥æ”¾åˆ°å•ç‹¬çš„æ–¹æ³•ä¸­ï¼Œè¿™æ ·çš„æ–¹æ³•çš„â€œè°ƒç”¨â€è¿˜æ˜¯æ•£è½åœ¨å„å¤„ï¼Œæ— è®ºæ˜¯å¯¹è½¯ä»¶å·¥ç¨‹ä¸Šçš„å¯ç»´æŠ¤æ€§ï¼Œè¿˜æ˜¯ä»£ç é˜…è¯»æ—¶å¯¹äºä¸šåŠ¡æµç¨‹çš„ä¸“æ³¨åº¦ï¼Œéƒ½æ˜¯ä¸åˆ©çš„ã€‚</p><p>è—‰ç”± AOP åˆ™å¯ä»¥æœ‰æ•ˆåœ°è§£å†³è¿™äº›é—®é¢˜ï¼Œå¯¹äºå›¾ä¸­æ¨ªå‘çš„ä¸šåŠ¡æµç¨‹ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä¿æŒå®ƒä»¬ç‹¬ç«‹ä¸å˜ï¼Œè€ŒæŠŠé‰´æƒã€äº‹åŠ¡è¿™æ ·çš„å…¬å…±åŠŸèƒ½ï¼Œå½»åº•æ‹¿å‡ºå»ï¼Œæ”¾åˆ°å•ç‹¬çš„åœ°æ–¹ï¼Œè¿™æ ·æ•´ä¸ªä¸šåŠ¡æµç¨‹å°±å˜å¾—çº¯ç²¹å’Œå¹²å‡€ï¼Œæ²¡æœ‰ä»»ä½•ä»£ç æ®‹ç•™çš„ç—•è¿¹ï¼Œå°±å¥½åƒæ­¦æ—é«˜æ‰‹å½»åº•éšå½¢äº†ä¸€èˆ¬ï¼Œä½†æ˜¯ï¼ŒåŠŸèƒ½å´æ²¡æœ‰ä»»ä½•ä¸¢å¤±ã€‚å°±å¥½æ¯”é¢æ¡ä¸€èˆ¬é¡ºä¸‹æ¥çš„ä¸šåŠ¡æµç¨‹ï¼Œæ°´å¹³åœ°åˆ‡äº†å‡ åˆ€ï¼Œæ¯ä¸€åˆ€ï¼Œéƒ½æ˜¯ä¸€ä¸ª AOP çš„åŠŸèƒ½å®ç°ã€‚</p><p>æˆ‘ä»¬å¯èƒ½åœ¨ Java çš„ä¸–ç•Œä¸­è°ˆè®º AOP æ¯”è¾ƒå¤šï¼Œä½†è¯·æ³¨æ„ï¼Œå®ƒå¹¶ä¸æ˜¯ Java èŒƒç•´çš„æ¦‚å¿µï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•æ¡†æ¶ï¼Œä¹Ÿå’Œç¼–ç¨‹è¯­è¨€æœ¬èº«æ— å…³ã€‚</p><h2>Spring ä¸­çš„åº”ç”¨</h2><p><a href=\"https://spring.io/\">Spring</a> ä½œä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œæä¾›äº†å¯¹äº AOP åŠŸèƒ½ä¸Šå®Œæ•´çš„æ”¯æŒï¼Œä¸‹é¢è®©æˆ‘ä»¬é€šè¿‡ä¾‹å­æ¥å­¦ä¹ ã€‚è¿˜è®°å¾—æˆ‘ä»¬åœ¨ <a href=\"https://time.geekbang.org/column/article/141679\">[ç¬¬08 è®²]</a> ä¸­ä¸¾ä¾‹ä»‹ç»çš„å°†å›¾ä¹¦å€Ÿå‡ºçš„æ–¹æ³•å—ï¼Ÿ</p><pre><code>public class BookService {\n    public Book lendOut(String bookId, String userId, Date date) { ... (0) }\n}\n</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬è¦ç»™å¾ˆå¤šçš„ä¸šåŠ¡æ–¹æ³•ä»¥ AOP çš„æ–¹å¼æ·»åŠ åŠŸèƒ½ï¼Œè€Œ lendOut å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚å®šä¹‰ä¸€ä¸ª TransactionAspect ç±»ï¼š</p><pre><code>public class TransactionAspect {\n    public void doBefore(JoinPoint jp) { ... (1) }\n    public void doAfter(JoinPoint jp) { ... (2) }\n    public void doThrowing(JoinPoint jp, Throwable ex) { ... (3) }\n    public void doAround(ProceedingJoinPoint pjp) throws Throwable {\n        ... (4)\n        pjp.proceed();\n        ... (5)\n    }\n}\n</code></pre><p>ä½ çœ‹ï¼Œæˆ‘ç»™æ¯ä¸€å¤„å¯ä»¥å®ç°çš„ä»£ç éƒ½ç”¨æ•°å­—åšäº†æ ‡è®°ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨ doBefore æ–¹æ³•ä¸­æ·»åŠ äº‹åŠ¡å¼€å§‹é€»è¾‘ï¼ŒdoAfter æ–¹æ³•ä¸­æ·»åŠ äº‹åŠ¡ç»“æŸçš„æäº¤é€»è¾‘ï¼ŒdoThrowing æ–¹æ³•ä¸­æ·»åŠ äº‹åŠ¡å¤±è´¥çš„å›æ»šé€»è¾‘ï¼Œè€Œåœ¨ doAround æ–¹æ³•ä¸­ä¸šåŠ¡æ‰§è¡Œå‰åæ·»åŠ æ—¥å¿—æ‰“å°é€»è¾‘ï¼Œå…¶ä¸­çš„ pjp.proceed() æ–¹æ³•è¡¨ç¤ºå¯¹åŸæ–¹æ³•çš„è°ƒç”¨ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸€äº› XML é…ç½®ï¼Œç›®çš„å°±æ˜¯æŠŠåŸæ–¹æ³•å’Œ AOP çš„åˆ‡é¢åŠŸèƒ½è¿æ¥èµ·æ¥ã€‚é…ç½®ç‰‡æ®µå¦‚ä¸‹ï¼š</p><pre><code>&lt;bean id=&quot;bookService&quot; class=&quot;xxx.BookService&quot;&gt;&lt;/bean&gt;\n&lt;bean id=&quot;transactionAspect&quot; class=&quot;xxx.TransactionAspect&quot;&gt;&lt;/bean&gt;\n\n&lt;aop:config&gt;\n  &lt;aop:pointcut expression=&quot;execution(* xxx.BookService.*(..))&quot; id=&quot;transactionPointcut&quot;/&gt;\n  &lt;aop:aspect ref=&quot;transactionAspect&quot;&gt;\n    &lt;aop:before method=&quot;doBefore&quot; pointcut-ref=&quot;transactionPointcut&quot;/&gt;\n    &lt;aop:after-returning method=&quot;doAfter&quot; pointcut-ref=&quot;transactionPointcut&quot;/&gt;\n    &lt;aop:after-throwing method=&quot;doThrowing&quot; pointcut-ref=&quot;transactionPointcut&quot; throwing=&quot;ex&quot;/&gt;\n    &lt;aop:around method=&quot;doAround&quot; pointcut-ref=&quot;transactionPointcut&quot;/&gt;\n  &lt;/aop:aspect&gt;\n&lt;/aop:config&gt;\n</code></pre><p>åœ¨è¿™æ®µé…ç½®ä¸­ï¼Œå‰ä¸¤è¡Œåˆ†åˆ«æ˜¯å¯¹ BookService å’Œ TransactionAspect è¿™ä¸¤ä¸ª Bean çš„å£°æ˜ï¼Œæ¥ä¸‹æ¥åœ¨ aop:config ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† pointcut çš„åˆ‡é¢åŒ¹é…è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºè¦æ•è· BookService çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶åœ¨ aop:aspect æ ‡ç­¾å†…å®šä¹‰äº†æˆ‘ä»¬å¸Œæœ›å®æ–½çš„ AOP åŠŸèƒ½ã€‚</p><p>åœ¨å®é™…æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸æŠ›å‡ºï¼Œä¸Šè¿°è¿™äº›é€»è¾‘çš„æ‰§è¡Œé¡ºåºå°†æ˜¯ï¼š</p><pre><code>(1) â†’ (4) â†’ (0) â†’ (5) â†’ (2)\n</code></pre><h2>å®ç°åŸç†</h2><p>è®²äº† AOP æ€æ ·é…ç½®ï¼Œæ€ä¹ˆè¡¨ç°ï¼Œç°åœ¨æˆ‘è¦æ¥è®²è®²å®ƒçš„å®ç°åŸç†äº†ã€‚é€šè¿‡è¿™éƒ¨åˆ†å†…å®¹ï¼Œå¸Œæœ›ä½ å¯ä»¥ææ¸…æ¥šï¼Œä¸ºä»€ä¹ˆä¸éœ€è¦å¯¹ä»£ç åšä»»ä½•æ”¹åŠ¨ï¼Œå°±å¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘çš„æµæ°´ä¸­åˆ‡ä¸€åˆ€ï¼Œæ’å…¥æˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„å…¶å®ƒé€»è¾‘å‘¢ï¼Ÿ</p><p>å¯¹äºå¸¸è§çš„å®ç°ï¼Œæˆ‘ä»¬æ ¹æ®å…¶ä½œç”¨çš„ä¸åŒæ—¶é—´é˜¶æ®µè¿›è¡Œåˆ†ç±»ï¼Œæœ‰è¿™æ ·ä¸¤ç§ï¼š</p><p><strong>ç¼–è¯‘æœŸé—´çš„é™æ€ç»‡å…¥ï¼Œåˆç§°ä¸ºç¼–è¯‘æ—¶å¢å¼ºã€‚</strong>ç»‡å…¥ï¼ˆWeavingï¼‰ï¼ŒæŒ‡çš„æ˜¯å°†åˆ‡é¢ä»£ç å’Œæºä¸šåŠ¡ä»£ç é“¾æ¥èµ·æ¥çš„è¿‡ç¨‹ã€‚<a href=\"https://www.eclipse.org/aspectj/\">AspectJ</a> å°±æ˜¯è¿™æ ·ä¸€ä¸ªé¢å‘åˆ‡é¢çš„ Java è¯­è¨€æ‰©å±•ï¼Œç§°å‘¼å…¶ä¸ºè¯­è¨€çš„â€œæ‰©å±•â€ï¼Œå°±æ˜¯å› ä¸ºå®ƒæ‰©å±•äº† Java è¯­è¨€çš„è¯­æ³•ï¼Œéœ€è¦ç‰¹å®šçš„ç¼–è¯‘å™¨æ¥æŠŠ AspectJ çš„ä»£ç ç¼–è¯‘æˆ JVM å¯è¯†åˆ«çš„ class æ–‡ä»¶ã€‚</p><p><strong>è¿è¡ŒæœŸé—´çš„åŠ¨æ€ä»£ç†ï¼Œåˆç§°ä¸ºè¿è¡Œæ—¶å¢å¼ºã€‚</strong>è¿™ç§æ–¹å¼æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œä¾é é¢„å…ˆåˆ›å»ºæˆ–è¿è¡Œæ—¶åˆ›å»ºçš„ä»£ç†ç±»æ¥å®Œæˆåˆ‡é¢åŠŸèƒ½çš„ã€‚æ¯”å¦‚ JDK åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼Œæˆ– <a href=\"https://github.com/cglib/cglib/wiki\">CGLib</a> åŸºäºç±»çš„ä»£ç†å¯¹è±¡ç”ŸæˆæŠ€æœ¯å°±å±äºè¿™ä¸€ç§ã€‚</p><p>Spring AOP é»˜è®¤æ”¯æŒçš„æ˜¯åè€…â€”â€”è¿è¡ŒæœŸé—´çš„åŠ¨æ€ä»£ç†ã€‚è‡³äºå…·ä½“å®ç°ï¼Œé€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ JDK çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼›ä½†æ˜¯å¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°æ¥å£ï¼Œæˆ‘ä»¬åªèƒ½é€€è€Œæ±‚å…¶æ¬¡ï¼Œä½¿ç”¨ CGLibã€‚</p><p>åŠ¨æ€ä»£ç†çš„æ–¹å¼ç”±äºåœ¨è¿è¡Œæ—¶å®Œæˆä»£ç†ç±»æˆ–ä»£ç†å¯¹è±¡çš„åˆ›å»ºï¼Œéœ€è¦ç”¨åˆ° Java çš„æ‹¦æˆªã€åå°„å’Œå­—èŠ‚ç ç”Ÿæˆç­‰æŠ€æœ¯ï¼Œå› æ­¤è¿è¡Œæ—¶çš„æ€§èƒ½è¡¨ç°å¾€å¾€æ²¡æœ‰é™æ€ç»‡å…¥å¥½ï¼ŒåŠŸèƒ½ä¹Ÿæœ‰è¾ƒå¤šé™åˆ¶ï¼Œä½†æ˜¯ç”±äºä½¿ç”¨èµ·æ¥ç®€ä¾¿ï¼ˆä¸éœ€è¦è¯­è¨€æ‰©å±•ï¼Œä¸éœ€è¦ç‰¹æ®Šçš„ç¼–è¯‘å™¨ç­‰ï¼‰ï¼Œå®ƒçš„å®é™…åº”ç”¨æ›´ä¸ºå¹¿æ³›ã€‚</p><h2>æ§åˆ¶åè½¬ IoC</h2><p>é€šè¿‡ AOP æˆ‘ä»¬çŸ¥é“ï¼ŒæŸäº›é—®é¢˜å¦‚æœæˆ‘ä»¬æ¢ä¸ªè§’åº¦æ¥è§£å†³ï¼Œä¼šå¾ˆå¤§ç¨‹åº¦åœ°ç®€åŒ–ä»£ç ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥äº†è§£åœ¨ Spring ä¸­å¦ä¸€ä¸ªç»å¸¸å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ä¸€èµ·å‡ºç°çš„æ¦‚å¿µâ€”â€”æ§åˆ¶åè½¬ã€‚æ§åˆ¶åè½¬æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œä¹Ÿæ˜¯é€šè¿‡â€œæ¢ä¸ªè§’åº¦â€æ¥è§£å†³é—®é¢˜çš„ã€‚</p><p>æ§åˆ¶åè½¬ï¼ŒIoCï¼Œå³ Inversion of Controlï¼Œè¨€ä¸‹ä¹‹æ„ï¼ŒæŒ‡çš„æ˜¯æŠŠåŸæœ‰çš„æ§åˆ¶æ–¹å‘æ‰è½¬è¿‡æ¥äº†ã€‚åœ¨æˆ‘ä»¬å¸¸è§„çš„ç¨‹åºæµç¨‹ä¸­ï¼Œå¯¹è±¡æ˜¯ç”±ä¸»ç¨‹åºæµç¨‹åˆ›å»ºçš„ï¼Œä¾‹å¦‚ï¼Œåœ¨ä¸šåŠ¡æµç¨‹ä¸­ä½¿ç”¨ new å…³é”®å­—æ¥åˆ›å»ºä¾èµ–å¯¹è±¡ã€‚</p><p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ Spring æ¡†æ¶çš„æ—¶å€™ï¼Œ<strong>Spring æŠŠå¯¹è±¡åˆ›å»ºçš„å·¥ä½œæ¥ç®¡è¿‡æ¥ï¼Œå®ƒä½œä¸ºå¯¹è±¡å®¹å™¨ï¼Œæ¥è´Ÿè´£å¯¹è±¡çš„æŸ¥æ‰¾ã€åŒ¹é…ã€åˆ›å»ºã€è£…é…ï¼Œä¾èµ–ç®¡ç†ï¼Œç­‰ç­‰ã€‚è€Œä¸»ç¨‹åºæµç¨‹ï¼Œåˆ™ä¸ç”¨å…³å¿ƒå¯¹è±¡æ˜¯æ€ä¹ˆæ¥çš„ï¼Œåªéœ€è¦ä½¿ç”¨å¯¹è±¡å°±å¯ä»¥äº†ã€‚</strong>æˆ‘ä»¬è¿˜æ˜¯æ‹¿ BookService ä¸¾ä¾‹å­ï¼š</p><pre><code>public class BookService {\n    @Autowired\n    private BookDao bookDao;\n    @Autowired\n    private LoanDao loanDao;\n    public Book lendOut(String bookId, String userId, Date date) {\n        bookDao.update( ... );\n        loanDao.insert( ... );\n    }\n}\n</code></pre><p>æ¯”å¦‚ BookService çš„å€Ÿå‡ºæ–¹æ³•ï¼Œå‡å¦‚å®ƒçš„å®ç°ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ï¼š</p><ul>\n<li>è°ƒç”¨æ•°æ®è®¿é—®å¯¹è±¡ bookDao çš„æ–¹æ³•æ¥æ›´æ–°è¢«å€Ÿä¹¦çš„çŠ¶æ€ï¼›</li>\n<li>è°ƒç”¨å€Ÿé˜…è¡Œä¸ºçš„è®¿é—®å¯¹è±¡ loanDao æ¥å¢åŠ ä¸€æ¡å€Ÿé˜…è®°å½•ã€‚</li>\n</ul><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ @Autowired æ³¨è§£ï¼Œè®©å®¹å™¨å°†å®é™…çš„æ•°æ®è®¿é—®å¯¹è±¡æ³¨å…¥è¿›æ¥ï¼Œä¸»ç¨‹åºæµç¨‹ä¸ç”¨å…³å¿ƒâ€œä¸‹ä¸€å±‚â€çš„æ•°æ®è®¿é—®å¯¹è±¡åˆ°åº•æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Œæ€ä¹ˆåˆå§‹åŒ–çš„ï¼Œç”šè‡³æ˜¯æ€ä¹ˆæ³¨å…¥è¿›æ¥çš„ï¼Œè€Œæ˜¯ç›´æ¥ç”¨å°±å¯ä»¥äº†ï¼Œå› ä¸ºè¿™äº›å¯¹è±¡éƒ½å·²ç»è¢« Spring ç®¡ç†èµ·æ¥äº†ã€‚</p><p>å¦‚æœè¿™äº›æ³¨å…¥çš„å¯¹è±¡ä¹‹é—´è¿˜å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œåˆå§‹åŒ–å®ƒä»¬çš„é¡ºåºå°±è‡³å…³é‡è¦äº†ï¼Œå¯æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒService å±‚ä¾ç„¶ä¸ç”¨å…³å¿ƒï¼Œå› ä¸º Spring å·²ç»æ ¹æ®ä»£ç æˆ–é…ç½®ä¸­å£°æ˜çš„ä¾èµ–å…³ç³»è‡ªåŠ¨ç¡®å®šäº†ã€‚æ€»ä¹‹ï¼ŒService å±‚çš„ä¸šåŠ¡ä»£ç ï¼Œåªç®¡è°ƒç”¨å…¶ä¸‹çš„æ•°æ®è®¿é—®å±‚çš„æ–¹æ³•å°±å¥½äº†ã€‚</p><p>è¯»åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šå›æƒ³èµ·å‰æ–‡ AOP çš„å†…å®¹ï¼Œå’Œ IoC ä¼¼ä¹æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šéƒ½æ˜¯<strong>ä¸ºäº†å°½å¯èƒ½ä¿è¯ä¸»æµç¨‹çš„çº¯ç²¹å’Œç®€æ´</strong>ï¼Œè€Œå°†è¿™äº›ä¸å½±å“ä¸»æµç¨‹çš„é€»è¾‘æ‹¿å‡ºå»ï¼Œåªä¸è¿‡è¿™ä¸¤ç§æŠ€æœ¯ï¼Œâ€œæ‹¿å‡ºå»â€çš„æ˜¯ä¸åŒçš„é€»è¾‘ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå„å±‚ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶æ²¡æœ‰å› ä¸º IoC è€Œå‘ç”Ÿä»»ä½•çš„æ”¹å˜ã€‚</p><p><strong>IoC åœ¨å®ç°ä¸ŠåŒ…å«ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§å«åšä¾èµ–æŸ¥æ‰¾ï¼ˆDLï¼ŒDependency Lookupï¼‰ï¼Œå¦ä¸€ç§å«åšä¾èµ–æ³¨å…¥ï¼ˆDIï¼ŒDependency Injectionï¼‰ã€‚</strong>äºŒè€…ç¼ºä¸€ä¸å¯ï¼ŒSpring å®¹å™¨åšåˆ°äº†ä¸¤è€…ï¼Œå°±å¦‚åŒä¸Šé¢çš„ä¾‹å­ï¼Œå®¹å™¨éœ€è¦å…ˆæŸ¥æ‰¾åˆ° bookDao å’Œ loanDao æ‰€å¯¹åº”çš„å¯¹è±¡ï¼Œå†æŠŠå®ƒä»¬æ³¨å…¥è¿›æ¥ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¹³æ—¶å¬åˆ°çš„æ›´å¤šæ˜¯ç¬¬äºŒç§ã€‚</p><p>æœ‰äº†ä¸€ä¸ªå¤§è‡´çš„æ„Ÿå—ï¼Œé‚£ä¹ˆ IoC åˆ°åº•èƒ½å¸¦æ¥ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæˆ‘è§‰å¾—ä¸»è¦æœ‰è¿™æ ·ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul>\n<li><strong>èµ„æºç»Ÿä¸€é…ç½®ç®¡ç†ã€‚</strong>è¿™ä¸ªæ–¹é¢å¾ˆå¥½ï¼Œä½†å¹¶ä¸æ˜¯ IoC æœ€å¤§çš„ä¼˜åŠ¿ï¼Œå› ä¸ºï¼Œå¦‚æœä½ ä¸æŠŠèµ„æºäº¤ç»™å®¹å™¨ç®¡ç†ï¼Œè€Œæ˜¯è‡ªå·±å»ºç«‹ä¸€ä¸ªèµ„æºç®¡ç†ç±»æ¥ç®¡ç†æŸé¡¹èµ„æºï¼Œä¸€æ ·å¯ä»¥å¾—åˆ°â€œç»Ÿä¸€ç®¡ç†â€çš„æ‰€æœ‰ä¼˜åŠ¿ã€‚</li>\n<li><strong>ä¸šåŠ¡ä»£ç ä¸å†åŒ…å«ä¾èµ–èµ„æºçš„è®¿é—®é€»è¾‘ï¼Œå› æ­¤èµ„æºè®¿é—®å’Œä¸šåŠ¡æµç¨‹çš„ä»£ç è§£è€¦å¼€äº†ã€‚</strong>æˆ‘è§‰å¾—è¿™é‡Œçš„â€œè§£è€¦â€æ‰æ˜¯ IoC æœ€æ ¸å¿ƒçš„ä¼˜åŠ¿ï¼Œå®ƒè®©å„å±‚ä¹‹é—´çš„ä¾èµ–å…³ç³»å˜å¾—æ¾æ•£ã€‚å°±å¦‚åŒä¸Šé¢çš„ä»£ç ä¾‹å­ä¸€æ ·ï¼Œå¦‚æœå“ªä¸€å¤©æˆ‘æƒ³æŠŠå®ƒä¾èµ–çš„ bookDao å’Œ loanDao æ›¿æ¢æ‰ï¼ˆæ¯”å¦‚ï¼Œæˆ‘æƒ³ä¸º Service å±‚åšæµ‹è¯•ï¼‰ï¼ŒService ä¸€è¡Œä»£ç éƒ½ä¸ç”¨æ”¹ï¼Œå®ƒå‹æ ¹éƒ½ä¸éœ€è¦çŸ¥é“ã€‚</li>\n</ul><h2>æ€»ç»“æ€è€ƒ</h2><p>ä»Šå¤©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä»å­¦ä¹ æ¦‚å¿µï¼Œç†Ÿæ‚‰é…ç½®ï¼Œåˆ°äº†è§£å®ç°åŸç†ï¼Œå¸Œæœ›ä½ å¯¹äº AOP å·²ç»æœ‰äº†ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†ï¼Œåœ¨æœªæ¥è®¾è®¡å’Œå¼€å‘ç³»ç»Ÿçš„æ—¶å€™ï¼Œæ— è®ºæŠ€æœ¯æ€æ ·æ¼”è¿›ï¼Œæ¡†æ¶æ€ä¹ˆå˜åŒ–ï¼Œå§‹ç»ˆçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒï¼Œå¹¶èƒ½å¤ŸæŠŠå®ƒä»ä½ çš„æ­¦å™¨åº“ä¸­æ‹¿å‡ºæ¥ä½¿ç”¨ã€‚</p><p>ç°åœ¨æˆ‘æ¥æä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºå§ï¼š</p><ul>\n<li>ä½ è¿‡å»çš„é¡¹ç›®ä¸­æœ‰æ²¡æœ‰åº”ç”¨ AOP çš„ä¾‹å­ï¼Œèƒ½è¯´è¯´å—ï¼Ÿ</li>\n<li>æˆ‘ä»‹ç»äº† AOP çš„ä¼˜ç‚¹ï¼Œä½†å´æ²¡æœ‰æåˆ°å®ƒçš„ç¼ºç‚¹ï¼Œä½†å…¶å®ä»»ä½•æŠ€æœ¯éƒ½æ˜¯æœ‰ä¸¤é¢æ€§çš„ï¼Œä½ è§‰å¾— AOP çš„ç¼ºç‚¹éƒ½æœ‰å“ªäº›å‘¢ï¼Ÿ</li>\n</ul><h2>é€‰ä¿®è¯¾å ‚ï¼šå®è·µ AOP çš„è¿è¡Œæ—¶åŠ¨æ€ä»£ç†</h2><p>æˆ‘ä»¬å­¦ä¹ äº† AOP çš„å®ç°åŸç†ï¼ŒçŸ¥é“å…¶ä¸­ä¸€ç§åŠæ³•æ˜¯é€šè¿‡ JDK çš„åŠ¨æ€ä»£ç†æŠ€æœ¯æ¥å®ç°çš„ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°±æ¥å†™ä¸€ç‚¹ä»£ç ï¼Œç”¨å®ƒå®ç°ä¸€ä¸ªå°ä¾‹å­ã€‚</p><p>é¦–å…ˆï¼Œè¯·ä½ å‡†å¤‡å¥½ä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬ä¼šåœ¨å…¶ä¸­åˆ›å»ºä¸€ç³»åˆ—æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ Eclipse æ¥ç®¡ç†é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶å¤¹ï¼Œè¿™éƒ½æ²¡æœ‰å…³ç³»ã€‚</p><p>ç°åœ¨å»ºç«‹ BookService.javaï¼Œè¿™æ¬¡æˆ‘ä»¬æŠŠ BookService å®šä¹‰ä¸ºä¸€ä¸ªæ¥å£ï¼ŒåŒ…å« lendOut æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿåˆ›å»ºå®ƒçš„å®ç° BookServiceImplï¼š</p><pre><code>import java.text.MessageFormat;\nimport java.util.Date;\n\ninterface BookService {\n    void lendOut(String bookId, String userId, Date date);\n}\n\nclass BookServiceImpl implements BookService {\n    @Override\n    public void lendOut(String bookId, String userId, Date date) {\n        System.out.println(MessageFormat.format(&quot;{0}: The book {1} is lent to {2}.&quot;, date, bookId, userId));\n    }\n}\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ª ServiceInvocationHandler.javaï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä»£ç†å¯¹è±¡åœ¨å¯¹åŸå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å‰åï¼Œæ·»åŠ çš„é¢å¤–é€»è¾‘ï¼š</p><pre><code>import java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Method;\n\nclass ServiceInvocationHandler implements InvocationHandler {\n    private Object target;\n \n    public ServiceInvocationHandler(Object target) {\n        this.target = target;\n    }\n \n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        System.out.println(&quot;Before...&quot;);\n        Object result = method.invoke(this.target, args);\n        System.out.println(&quot;After...&quot;);\n        return result;\n    }\n}\n</code></pre><p>æ¥ç€ï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ª Client.java ç±»ï¼Œä½œä¸ºç¨‹åºçš„èµ·ç‚¹ï¼Œé€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼æ¥è°ƒç”¨æºä»£ç ä¸­çš„ lendOut æ–¹æ³•ï¼š</p><pre><code>import java.lang.reflect.Proxy;\nimport java.util.Date;\n\npublic class Client {\n    public static void main(String[] args) throws Exception {\n        BookService bookService = (BookService) Proxy.newProxyInstance(\n                BookService.class.getClassLoader(),\n                new Class[]{ BookService.class },\n                new ServiceInvocationHandler(new BookServiceImpl())\n            );\n        bookService.lendOut(&quot;123&quot;, &quot;456&quot;, new Date());\n    }\n}\n</code></pre><p>ä½ çœ‹ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå¹¶èµ‹ç»™ bookServiceï¼Œè¿™ä¸ªä»£ç†å¯¹è±¡å®é™…æ˜¯ä¼šè°ƒç”¨ BookServiceImpl çš„ï¼Œä½†è°ƒç”¨çš„å‰åæ‰“å°äº†é¢å¤–çš„æ—¥å¿—ã€‚å¹¶ä¸”ï¼Œè¿™ä¸ªä»£ç†å¯¹è±¡ä¹Ÿå®ç°è‡ª BookService æ¥å£ï¼Œå› æ­¤ï¼Œå¯¹äº BookService çš„ä½¿ç”¨è€…æ¥è¯´ï¼Œå®ƒå®é™…å¹¶ä¸çŸ¥é“è°ƒç”¨åˆ°çš„æ˜¯ BookServiceImpl è¿˜æ˜¯å®ƒçš„ä»£ç†å¯¹è±¡ã€‚è¯·çœ‹å›¾ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c3/9e/c39ca70be876a106e90e73d6946d849e.png?wh=1462*821\" alt=\"\"></p><p>å¥½ï¼Œç°åœ¨æˆ‘ä»¬æŠŠè¿™äº›ä»£ç ç¼–è¯‘ä¸€ä¸‹ï¼š</p><pre><code>javac BookService.java ServiceInvocationHandler.java Client.java\n</code></pre><p>ä½ åº”è¯¥èƒ½çœ‹åˆ°å®ƒä»¬çš„ class æ–‡ä»¶åˆ†åˆ«ç”Ÿæˆäº†ã€‚</p><p>æœ€åï¼Œæ‰§è¡Œ Client çš„ main æ–¹æ³•ï¼Œå°±èƒ½çœ‹åˆ°ç›¸åº”çš„æ‰§è¡Œç»“æœï¼Œå®ƒæ˜¾ç¤º lendBook æ–¹æ³•å‰åçš„ AOP çš„é€»è¾‘è¢«å®é™…æ‰§è¡Œäº†ï¼š</p><pre><code>java Client\nBefore...\n8/10/19 11:42 AM: The book 123 is lent to 456.\nAfter...\n</code></pre><h2>æ‰©å±•é˜…è¯»</h2><ul>\n<li>Spring å®˜æ–¹æ–‡æ¡£ä¸­<a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop\">å…³äº AOP çš„æ•™ç¨‹</a>ï¼Œå¦‚æœä½ å¸Œæœ›çœ‹åˆ°ä¸­æ–‡ç‰ˆï¼Œé‚£ä¹ˆäº’è”ç½‘ä¸Šæœ‰ä¸å°‘å¯¹äºè¿™éƒ¨åˆ†çš„ç¿»è¯‘ï¼Œåªä¸è¿‡å¯¹åº”çš„ Spring ç‰ˆæœ¬ä¸åŒï¼Œå†…å®¹å¤§è‡´æ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚<a href=\"https://blog.csdn.net/wengcheng_k/article/details/79952358\">è¿™ä¸€ç¯‡</a>ã€‚</li>\n<li><a href=\"https://www.baeldung.com/spring-aop-vs-aspectj\">Comparing Spring AOP and AspectJ</a>ï¼Œè¿™æ˜¯ä¸€ç¯‡å…³äºé™æ€ç»‡å…¥å’ŒåŠ¨æ€ä»£ç†è¿™ä¸¤ç§ AOP æ–¹å¼æ¯”è¾ƒçš„æ–‡ç« ã€‚</li>\n<li>å¯¹äº AspectJï¼Œå¦‚æœæƒ³ä¸€ç¥å…¶æ‰©å±•çš„è¯­æ³•è¯­ä¹‰ï¼Œç»´åŸºç™¾ç§‘çš„<a href=\"https://en.wikipedia.org/wiki/AspectJ\">è¯æ¡</a>å°±è¶³çŸ£ï¼›å¦‚æœæƒ³äº†è§£æŸäº›ç»†èŠ‚ï¼Œè¯·å‚é˜…<a href=\"https://www.eclipse.org/aspectj/doc/released/adk15notebook/index.html\">å®˜æ–¹æ–‡æ¡£</a>ã€‚</li>\n</ul><p></p>","comments":[{"had_liked":false,"id":139897,"user_name":"ä¸è®°å¹´","can_delete":false,"product_type":"c1","uid":1045945,"ip_address":"","ucode":"287E40C68356DC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/b9/888fe350.jpg","comment_is_top":false,"comment_ctime":1570762194,"is_pvip":false,"replies":[{"id":"54203","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1570848881,"ip_address":"","comment_id":139897,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27340565970","product_id":100035501,"comment_content":"è¦è¯´AOPçš„ç¼ºç‚¹çš„è¯ï¼Œä»£ç ä¼šå˜å¾—ä¸ç›´è§‚ï¼Œéœ€è¦è„‘è¡¥è¿è¡Œè¿‡ç¨‹ã€‚ä¸æ˜“è°ƒè¯•ï¼Œå› ä¸ºä»£ç å˜å¾—ä¸ç›´è§‚ï¼Œæ–­ç‚¹æœ‰æ—¶éƒ½ä¸çŸ¥é“æ‰“åœ¨å“ªé‡Œã€‚å¦‚æœå¤šå±‚åµŒå¥—çš„è¯ï¼Œä¸Šé¢çš„é—®é¢˜ä¼šåŠ å€~","like_count":7,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470165,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570848881,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202576,"user_name":"KevinÂ·ç¨‹","can_delete":false,"product_type":"c1","uid":1843468,"ip_address":"","ucode":"00C3A6A55B103D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/4KNQJyG0Uex2q6bkhL54O92EDU2ymvEKXSqfibHnP7WT5ZRia7EWfnXl9SwSttU2hxSEvjpLck1ByRdotViciafDxg/132","comment_is_top":false,"comment_ctime":1586009877,"is_pvip":false,"replies":[{"id":"75733","content":"éƒ½æœ‰ï¼Œå¯¹è±¡çš„è£…è½½æœ‰å‡ ç§æ–¹å¼ï¼Œæ˜¯ä¸æ˜¯â€œæå‰â€è£…è½½è¿˜å–å†³äºlazyloadçš„é…ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1586047446,"ip_address":"","comment_id":202576,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5880977173","product_id":100035501,"comment_content":"è¿œç¦»ä»£ç å¼€å‘å·¥ä½œ10æ¥å¹´å¹´äº†ï¼Œåˆ©ç”¨ä»¥å‰çš„ç§¯ç´¯ï¼Œè¿™èŠ‚è¯¾å¬äº†ä¸¤éï¼Œæ€»ç®—å¯¹mvcå’Œaopã€iocæœ‰æ‰€æ„Ÿè§‰äº†ï¼Œè€å¸ˆçš„è®²è§£å’Œåˆ†æå¾ˆåˆ°ä½ï¼Œå¾ˆæ¸…æ™°ï¼Œè®©æˆ‘è¿™æ ·çš„ä¹Ÿèƒ½ææ˜ç™½ã€‚ä½†æ˜¯ç»†ç»†æƒ³æ¥ï¼Œæ‰€è°“ä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œæœ‰æ ¹åŸºæ‰èƒ½äº†è§£ä¸Šå±‚çš„ä¸œè¥¿ã€‚å¯¹äºspringçš„iocï¼Œå®æ–½DIåº”è¯¥æ˜¯æå‰å®Œæˆåº•å±‚èµ„æºå¯¹è±¡çš„åˆå§‹åŒ–å·¥ä½œï¼ŒèŠ‚çœè¿è¡Œæ—¶è°ƒç”¨çš„æ—¶é—´å¼€é”€ï¼Œç®€åŒ–ä¸»ä»£ç é€»è¾‘ã€‚è¿™ä¹Ÿéœ€è¦ä¸°åšçš„å†…å­˜èµ„æºçš„æ”¯æ’‘å§ã€‚å¦å¤–springä¼šæŠŠæ‰€æœ‰å¯¹è±¡æå‰è£…è½½åˆ°å†…å­˜ä¸­å—ï¼Œè¿˜æ˜¯åŸºäºä¸€å®šç­–ç•¥è¿›è¡Œéƒ¨åˆ†å¯¹è±¡è£…è½½å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490621,"discussion_content":"éƒ½æœ‰ï¼Œå¯¹è±¡çš„è£…è½½æœ‰å‡ ç§æ–¹å¼ï¼Œæ˜¯ä¸æ˜¯â€œæå‰â€è£…è½½è¿˜å–å†³äºlazyloadçš„é…ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586047446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291026,"user_name":"è€æ²ˆ","can_delete":false,"product_type":"c1","uid":1373409,"ip_address":"","ucode":"FA5EFDDB07F09A","user_header":"https://static001.geekbang.org/account/avatar/00/14/f4/e1/b0e75ecf.jpg","comment_is_top":false,"comment_ctime":1619948059,"is_pvip":false,"replies":[{"id":"105467","content":"ä»AOPçš„è§’åº¦æ¥ç†è§£ç¡®å®æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æœ€æ—©æ˜¯å¦å‚è€ƒäº†å®ƒçš„è®¾è®¡æˆ‘å°±ä¸æ¸…æ¥šäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1620058331,"ip_address":"","comment_id":291026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1619948059","product_id":100035501,"comment_content":"å‰ç«¯éƒ¨åˆ†çš„  ç”Ÿå‘½å‘¨æœŸã€‚è·¯ç”±é’©å­ç­‰æ˜¯å¦å‚è€ƒäº†aopçš„è®¾è®¡å‘¢ã€‚ ","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519345,"discussion_content":"ä»AOPçš„è§’åº¦æ¥ç†è§£ç¡®å®æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æœ€æ—©æ˜¯å¦å‚è€ƒäº†å®ƒçš„è®¾è®¡æˆ‘å°±ä¸æ¸…æ¥šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620058331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284319,"user_name":"Demon.Lee","can_delete":false,"product_type":"c1","uid":1052859,"ip_address":"","ucode":"7F0E5493A8E345","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/bb/f1061601.jpg","comment_is_top":false,"comment_ctime":1616165678,"is_pvip":false,"replies":[{"id":"104601","content":"æˆ‘çš„ç†è§£æ˜¯ï¼Œè¿™å’Œè¿™ä¸¤è€…çš„å®ç°æœºåˆ¶æœ‰å…³ã€‚åŠ¨æ€ä»£ç†å®ƒçš„å®ç°æœ¬è´¨ä¸Šå°±æ˜¯åå°„ï¼Œå­—èŠ‚ç æ˜¯ä¸å˜çš„ï¼Œå› æ­¤è¿™ä¸ªé™åˆ¶æ˜¯è·‘åœ¨JVMä¸Šçš„Javaè¯­è¨€æœ¬èº«çš„é™åˆ¶ï¼›è€Œé™æ€ç»‡å…¥åˆ™å¯ä»¥åœ¨ç¼–è¯‘æœŸä»‹å…¥ï¼Œç›´æ¥æ”¹å˜å­—èŠ‚ç çš„ç”Ÿæˆï¼Œä¸€èˆ¬æ¥è¯´åè€…è¦å¼ºå¾—å¤šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1618327188,"ip_address":"","comment_id":284319,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1616165678","product_id":100035501,"comment_content":"â€œå› ä¸ºSpringåŸºäºåŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥Springåªæ”¯æŒæ–¹æ³•è¿æ¥ç‚¹ã€‚è¿™ä¸ä¸€äº›å…¶ä»–çš„AOPæ¡†æ¶æ˜¯ä¸åŒçš„ï¼Œä¾‹å¦‚AspectJå’ŒJBossï¼Œé™¤äº†æ–¹æ³•åˆ‡ç‚¹ï¼Œå®ƒä»¬è¿˜æä¾›äº†å­—æ®µå’Œæ„é€ å™¨æ¥å…¥ç‚¹ã€‚Springç¼ºå°‘å¯¹å­—æ®µè¿æ¥ç‚¹çš„æ”¯æŒï¼Œæ— æ³•è®©æˆ‘ä»¬åˆ›å»ºç»†ç²’åº¦çš„é€šçŸ¥ï¼Œä¾‹å¦‚æ‹¦æˆªå¯¹è±¡å­—æ®µçš„ä¿®æ”¹ã€‚è€Œä¸”å®ƒä¸æ”¯æŒæ„é€ å™¨è¿æ¥ç‚¹ï¼Œæˆ‘ä»¬å°±æ— æ³•åœ¨beanåˆ›å»ºæ—¶åº”ç”¨é€šçŸ¥ã€‚â€<br>æ‘˜å½•è‡ªã€ŠSpring å®æˆ˜ã€‹ç¬¬4ç‰ˆï¼Œæƒ³è¯·é—®è€å¸ˆï¼Œä¸ºå•¥åŸºäºåŠ¨æ€ä»£ç†å°±åªèƒ½æ”¯æŒæ–¹æ³•è¿æ¥ç‚¹ï¼Œè€Œå…¶ä»–çš„ï¼ˆå¦‚AspectJï¼‰åˆ™å¯ä»¥æ”¯æŒæ„é€ å™¨å’Œå­—æ®µæ¥å…¥ç‚¹ï¼Œä¸æ˜¯ç‰¹åˆ«ç†è§£ï¼Œè°¢è°¢ã€‚","like_count":1,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517307,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ï¼Œè¿™å’Œè¿™ä¸¤è€…çš„å®ç°æœºåˆ¶æœ‰å…³ã€‚åŠ¨æ€ä»£ç†å®ƒçš„å®ç°æœ¬è´¨ä¸Šå°±æ˜¯åå°„ï¼Œå­—èŠ‚ç æ˜¯ä¸å˜çš„ï¼Œå› æ­¤è¿™ä¸ªé™åˆ¶æ˜¯è·‘åœ¨JVMä¸Šçš„Javaè¯­è¨€æœ¬èº«çš„é™åˆ¶ï¼›è€Œé™æ€ç»‡å…¥åˆ™å¯ä»¥åœ¨ç¼–è¯‘æœŸä»‹å…¥ï¼Œç›´æ¥æ”¹å˜å­—èŠ‚ç çš„ç”Ÿæˆï¼Œä¸€èˆ¬æ¥è¯´åè€…è¦å¼ºå¾—å¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618327188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":172020,"user_name":"szWest","can_delete":false,"product_type":"c1","uid":1159772,"ip_address":"","ucode":"9EB291C94EBB4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/b2/5c/239825e4.jpg","comment_is_top":false,"comment_ctime":1579072599,"is_pvip":false,"replies":[{"id":"66766","content":"æ˜¯è¿è¡Œæ—¶","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1579131227,"ip_address":"","comment_id":172020,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579072599","product_id":100035501,"comment_content":"CGLIBä¸åº”è¯¥æ˜¯ç¼–è¯‘æ—¶å¢å¼ºå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481587,"discussion_content":"æ˜¯è¿è¡Œæ—¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579131227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154841,"user_name":"å°å¯å­ã€‚(â‰¥3â‰¤)","can_delete":false,"product_type":"c1","uid":1206545,"ip_address":"","ucode":"6D978BDCBB2862","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/11/831cec7d.jpg","comment_is_top":false,"comment_ctime":1574577837,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574577837","product_id":100035501,"comment_content":"å†™è¿‡å®‰å“å¼€å‘ã€‚ã€‚åœ¨springçš„æ—¶å€™é‡åˆ°aopä»£ç†é—®é¢˜ã€‚ã€‚ç¬¬ä¸€æ¬¡å¬åˆ°è¿™ä¸ªæ¦‚å¿µã€‚ã€‚ å½“æ—¶è¿˜ä¸çŸ¥é“æˆ‘ç”¨äº†åŠå¹´çš„å®‰å“å¼€å‘é‡Œé¢å¾ˆå¤šåŠŸèƒ½å®ç°å…¶å®å°±æ˜¯aopã€‚ ä¸€æŸ¥æ‰çŸ¥é“æ˜¯ä»€ä¹ˆã€‚","like_count":0},{"had_liked":false,"id":139637,"user_name":"anginiit","can_delete":false,"product_type":"c1","uid":1105763,"ip_address":"","ucode":"C3FA0CFEADB3BC","user_header":"https://static001.geekbang.org/account/avatar/00/10/df/63/b7296340.jpg","comment_is_top":false,"comment_ctime":1570695771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570695771","product_id":100035501,"comment_content":"ä»Šå¹´çš„é¡¹ç›®éƒ½æ˜¯springbootæ¶æ„çš„ï¼Œç›´æ¥ä½¿ç”¨aopçš„å°±æ˜¯å†™è¿‡ä¸€ä¸ªç”¨æˆ·æ“ä½œæ—¥å¿—è®°å½•ï¼Œå°±æ˜¯é€šè¿‡åˆ‡é¢æ¥æ‹¦æˆªç”¨æˆ·è¯·æ±‚ç„¶åæŠŠç”¨æˆ·ä¿¡æ¯è®°å½•ä¸‹æ¥çš„ï¼Œæ²¡æœ‰ç‰¹åˆ«æ·±çš„ä½¿ç”¨è¿‡å‘¢ã€‚ä¸è¿‡åŸç†å·²ç»æ˜ç™½äº†ã€‚","like_count":0},{"had_liked":false,"id":139457,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1570652730,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570652730","product_id":100035501,"comment_content":"1. ä¹‹å‰æ²¡æ€ä¹ˆäº†è§£è¿‡ AOPï¼Œåˆ°æ—¶ DI è¿™ä¸ªæ¦‚å¿µå€’æ˜¯ä¸€ç›´å¬åˆ°ï¼Œä½†ä¹Ÿå°±æ˜¯çŸ¥é“ä¸ªæ¦‚å¿µï¼Œä»Šå¤©ç®—æ˜¯å¼„æ¸…æ¥š AOPã€IoCã€DI è¿™å‡ ä¸ªä¸œè¥¿çš„åŸºæœ¬æ¦‚å¿µäº†<br><br>2. ä»æˆ‘ä¸ªäººè§’åº¦æ¥çœ‹ï¼ŒAOP ç¡®å®éšè—äº†èµ„æºå±‚çš„ä¸€äº›å®ç°ï¼Œç¨‹åºå‘˜åªéœ€è¦å…³æ³¨ä¸šåŠ¡å±‚çš„ä»£ç ï¼Œä¸éœ€è¦ç‰¹åˆ«è€ƒè™‘èµ„æºè®¿é—®çš„é€»è¾‘ï¼Œä½†æ˜¯å¦‚æœèµ„æºå±‚çš„å®ç°å‡ºç°äº†é—®é¢˜ï¼Œåœ¨ AOP çš„æ¶æ„ä¸‹ï¼Œä¼šå¢åŠ ä¸€å®šçš„ debug éš¾åº¦ï¼Œå› ä¸ºåœ¨è¿™ç§æ¶æ„ä¸‹ï¼Œèµ„æºå±‚çš„é€»è¾‘å¯ä»¥è¯´æ˜¯ä¸é€æ˜çš„ï¼›å¦å¤–å°±æ˜¯ AOP å…¶å®å’Œä¸€èˆ¬çš„è®¾è®¡æ€æƒ³æœ‰ç‚¹ä¸å¤ªä¸€æ ·ï¼Œä½¿ç”¨å’Œé€‚åº”ä¸Šä¼šæœ‰ä¸€å®šçš„é—¨æ§›å§ï¼›æ€§èƒ½æ–¹é¢çš„è¯ï¼ŒåŠ¨æ€ AOP å®ç°ä¼šå½±å“ä»£ç çš„å®é™…è¿è¡Œæ•ˆç‡ï¼Œé™æ€ AOP å®ç°åˆç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªéœ€è¦æƒè¡¡çš„åœ°æ–¹","like_count":0},{"had_liked":false,"id":139134,"user_name":"Dream.","can_delete":false,"product_type":"c1","uid":1187286,"ip_address":"","ucode":"49B94CE5BA0D21","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/d6/76fe5259.jpg","comment_is_top":false,"comment_ctime":1570552129,"is_pvip":false,"replies":[{"id":"53660","content":"è¿™é‡Œä»‹ç»çš„æ˜¯é…ç½®åˆ‡é¢é€»è¾‘ä»¥åçš„å®é™…æ‰§è¡Œè¿‡ç¨‹ï¼Œ(0) å°±æ˜¯åŸå§‹ä»£ç ï¼Œåœ¨ä½ çœ‹åˆ°çš„(1) - (5) çš„ä»£ç å—çš„ä¸Šæ–¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1570591874,"ip_address":"","comment_id":139134,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570552129","product_id":100035501,"comment_content":"æ²¡æ¥è§¦è¿‡Springï¼Œå¾ˆå¤šåœ°æ–¹éƒ½æ²¡çœ‹æ‡‚å†è¯´ä»€ä¹ˆ<br><br>æ¯”å¦‚xmlé…ç½®åæ‰§è¡Œé¡ºåºä¸º(1) â†’ (4) â†’ (0) â†’ (5) â†’ (2)<br><br>æ²¡çœ‹åˆ°ï¼ˆ0ï¼‰åœ¨å“ªé‡Œï¼Œè¿™ä¸ªé¡ºåºæ˜¯æ€ä¹ˆæ¥çš„çœ‹äº†å¥½å‡ éä¹Ÿæ²¡çœ‹æ‡‚","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469807,"discussion_content":"è¿™é‡Œä»‹ç»çš„æ˜¯é…ç½®åˆ‡é¢é€»è¾‘ä»¥åçš„å®é™…æ‰§è¡Œè¿‡ç¨‹ï¼Œ(0) å°±æ˜¯åŸå§‹ä»£ç ï¼Œåœ¨ä½ çœ‹åˆ°çš„(1) - (5) çš„ä»£ç å—çš„ä¸Šæ–¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570591874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138511,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1583321,"ip_address":"","ucode":"29692959077496","user_header":"https://static001.geekbang.org/account/avatar/00/18/28/d9/78dfd983.jpg","comment_is_top":false,"comment_ctime":1570285837,"is_pvip":false,"replies":[{"id":"53330","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å››ç«","uid":"1580075","ctime":1570415941,"ip_address":"","comment_id":138511,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570285837","product_id":100035501,"comment_content":"iOSé‡Œç”¨çš„runtimeçš„ä¸€äº›æ–¹æ³•ä¹Ÿæ˜¯aopäº†","like_count":0,"discussions":[{"author":{"id":1580075,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/2b/2069abe6.jpg","nickname":"å››ç«","note":"","ucode":"E4BED7DCAADD99","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469550,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570415941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}