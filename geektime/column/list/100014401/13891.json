{"id":13891,"title":"02 | 从单体应用走向服务化","content":"<p>专栏上一期，我给你讲述了什么是微服务，以及微服务架构的由来。简单回顾一下，微服务就是将庞杂臃肿的单体应用拆分成细粒度的服务，独立部署，并交给各个中小团队来负责开发、测试、上线和运维整个生命周期。</p>\n<p><strong>那么到底什么时候应该拆分单体应用？拆分单体应用有哪些标准可依呢？</strong></p>\n<p>为了解答这两个问题，今天我将通过具体案例来阐述，希望你能够学会<span class=\"orange\">单体应用拆分成微服务的正确姿势</span>。</p>\n<h2>什么时候进行服务化拆分？</h2>\n<p>从我所经历过的多个项目来看，项目第一阶段的主要目标是快速开发和验证想法，证明产品思路是否可行。这个阶段功能设计一般不会太复杂，开发采取快速迭代的方式，架构也不适合过度设计。所以将所有功能打包部署在一起，集中地进行开发、测试和运维，对于项目起步阶段，是最高效也是最节省成本的方式。当可行性验证通过，功能进一步迭代，就可以加入越来越多的新特性。</p>\n<p>比如做一个社交App，初期为了快速上线，验证可行性，可以只开发首页信息流、评论等基本功能。产品上线后，经过一段时间的运营，用户开始逐步增多，可行性验证通过，下一阶段就需要进一步增加更多的新特性来吸引更多的目标用户，比如再给这个社交App添加个人主页显示、消息通知等功能。</p>\n<p>一般情况下，这个时候就需要大规模地扩张开发人员，以支撑多个功能的开发。如果这个时候继续采用单体应用架构，多个功能模块混杂在一起开发、测试和部署的话，就会导致不同功能之间相互影响，一次打包部署需要所有的功能都测试OK才能上线。</p><!-- [[[read_end]]] -->\n<p>不仅如此，多个功能模块混部在一起，对线上服务的稳定性也是个巨大的挑战。比如A开发的一个功能由于代码编写考虑不够全面，上线后产生了内存泄漏，运行一段时间后进程异常退出，那么部署在这个服务池中的所有功能都不可访问。一个经典的案例就是，曾经有一个视频App，因为短时间内某个付费视频访问量巨大，超过了服务器的承载能力，造成了这个视频无法访问。不幸的是，这个网站付费视频和免费视频的服务部署在一起，也波及了免费视频，几乎全站崩溃。</p>\n<p>根据我的实际项目经验，一旦单体应用同时进行开发的人员超过10人，就会遇到上面的问题，这个时候就该考虑进行服务化拆分了。</p>\n<h2>服务化拆分的两种姿势</h2>\n<p>那么服务化拆分具体该如何实施呢？一个最有效的手段就是将不同的功能模块服务化，独立部署和运维。以前面提到的社交App为例，你可以认为首页信息流是一个服务，评论是一个服务，消息通知是一个服务，个人主页也是一个服务。</p>\n<p>这种服务化拆分方式是<strong>纵向拆分</strong>，是从业务维度进行拆分。标准是按照业务的关联程度来决定，关联比较密切的业务适合拆分为一个微服务，而功能相对比较独立的业务适合单独拆分为一个微服务。</p>\n<p>还有一种服务化拆分方式是<strong>横向拆分</strong>，是从公共且独立功能维度拆分。标准是按照是否有公共的被多个其他服务调用，且依赖的资源独立不与其他业务耦合。</p>\n<p>继续以前面提到的社交App举例，无论是首页信息流、评论、消息箱还是个人主页，都需要显示用户的昵称。假如用户的昵称功能有产品需求的变更，你需要上线几乎所有的服务，这个成本就有点高了。显而易见，如果我把用户的昵称功能单独部署成一个独立的服务，那么有什么变更我只需要上线这个服务即可，其他服务不受影响，开发和上线成本就大大降低了。</p>\n<h2>服务化拆分的前置条件</h2>\n<p>一般情况下，业务系统引入新技术就必然会带来架构的复杂度提升，在具体决策前，你先要认识到新架构会带来哪些新的问题，这些问题你和你的团队是否能够解决？如何解决？是自己投入人力建设，还是采用业界开源方案？</p>\n<p>下面几个问题，是从单体应用迁移到微服务架构时必将面临也必须解决的。</p>\n<ul>\n<li>\n<p><strong>服务如何定义</strong>。对于单体应用来说，不同功能模块之前相互交互时，通常是以类库的方式来提供各个模块的功能。对于微服务来说，每个服务都运行在各自的进程之中，应该以何种形式向外界传达自己的信息呢？答案就是接口，无论采用哪种通讯协议，是HTTP还是RPC，服务之间的调用都通过接口描述来约定，约定内容包括接口名、接口参数以及接口返回值。</p>\n</li>\n<li>\n<p><strong>服务如何发布和订阅</strong>。单体应用由于部署在同一个WAR包里，接口之间的调用属于进程内的调用。而拆分为微服务独立部署后，服务提供者该如何对外暴露自己的地址，服务调用者该如何查询所需要调用的服务的地址呢？这个时候你就需要一个类似登记处的地方，能够记录每个服务提供者的地址以供服务调用者查询，在微服务架构里，这个地方就是注册中心。</p>\n</li>\n<li>\n<p><strong>服务如何监控</strong>。通常对于一个服务，我们最关心的是QPS（调用量）、AvgTime（平均耗时）以及P999（99.9%的请求性能在多少毫秒以内）这些指标。这时候你就需要一种通用的监控方案，能够覆盖业务埋点、数据收集、数据处理，最后到数据展示的全链路功能。</p>\n</li>\n<li>\n<p><strong>服务如何治理</strong>。可以想象，拆分为微服务架构后，服务的数量变多了，依赖关系也变复杂了。比如一个服务的性能有问题时，依赖的服务都势必会受到影响。可以设定一个调用性能阈值，如果一段时间内一直超过这个值，那么依赖服务的调用可以直接返回，这就是熔断，也是服务治理最常用的手段之一。</p>\n</li>\n<li>\n<p><strong>故障如何定位</strong>。在单体应用拆分为微服务之后，一次用户调用可能依赖多个服务，每个服务又部署在不同的节点上，如果用户调用出现问题，你需要有一种解决方案能够将一次用户请求进行标记，并在多个依赖的服务系统中继续传递，以便串联所有路径，从而进行故障定位。</p>\n</li>\n</ul>\n<p>针对上述问题，你必须有可行的解决方案之后，才能进一步进行服务化拆分。专栏后面的文章，我会给你逐一讲解相应的解决方案。</p>\n<h2>总结</h2>\n<p>无论是纵向拆分还是横向拆分，都是将单体应用庞杂的功能进行拆分，抽离成单独的服务部署。</p>\n<p>但并不是说功能拆分的越细越好，过度的拆分反而会让服务数量膨胀变得难以管理，因此找到符合自己业务现状和团队人员技术水平的拆分粒度才是可取的。我建议的标准是按照每个开发人员负责不超过3个大的服务为标准，毕竟每个人的精力是有限的，所以在拆分微服务时，可以按照开发人员的总人数来决定。</p>\n<h2>思考题</h2>\n<p>想想你现在的业务场景，如果是单体应用的话，是否需要进行服务化拆分？如果需要的话，你觉得纵向拆分还是横向拆分合适？具体可以拆分到什么粒度？</p>\n<p>欢迎你在留言区写下自己的思考，与我一起讨论。</p>\n<p></p>\n","comments":[{"had_liked":false,"id":21818,"user_name":"oddrock","can_delete":false,"product_type":"c1","uid":1037506,"ip_address":"","ucode":"55BADA192250B0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d4/c2/910d231e.jpg","comment_is_top":false,"comment_ctime":1535362579,"is_pvip":true,"replies":[{"id":"7887","content":"总结的很好，看得出来属于业务经验很丰富的。😁","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535459720,"ip_address":"","comment_id":21818,"utype":1}],"discussion_count":4,"race_medal":0,"score":"808989214227","product_id":100014401,"comment_content":"我现在对拆分的考量：<br>一是业务维度聚类，业务和数据关系密切的应该放在一起。<br>二是功能维度聚类，公共功能聚合为一个服务。<br>三是人员聚类，这是个实际中的考量，如果某几个业务就是这几个人比较熟，那么最好放在一起，未来开发部署都好办。<br>四是性能聚类，性能要求高的并发大的和性能要求低的并发小的，要分开为不同的服务，这样部署和运行都独立，好维护。<br>还请老师指教","like_count":189,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422882,"discussion_content":"总结的很好，看得出来属于业务经验很丰富的。😁","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535459720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1811495,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a4/27/15e75982.jpg","nickname":"小袁","note":"","ucode":"3F5D8721F577D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304187,"discussion_content":"关于第三点我不同意，应该人适应业务，而不是反过来。","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1599491265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981574,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3c/86/f964868c.jpg","nickname":"Guanjm","note":"","ucode":"E472FA918DF9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401832,"discussion_content":"补充的特别好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633745691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1093541,"avatar":"https://static001.geekbang.org/account/avatar/00/10/af/a5/afa1d7d7.jpg","nickname":"hasWhere","note":"","ucode":"2C2B2988107489","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":145714,"discussion_content":"正在考虑实时微服务时，如何拆分，很有用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579576524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21542,"user_name":"唐伯虎点蚊香","can_delete":false,"product_type":"c1","uid":1117381,"ip_address":"","ucode":"E71FACDC1F0C69","user_header":"https://static001.geekbang.org/account/avatar/00/11/0c/c5/2f59fe5d.jpg","comment_is_top":false,"comment_ctime":1535161112,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"310772806424","product_id":100014401,"comment_content":"纵向拆分和横向拆分感觉还是不太理解","like_count":72,"discussions":[{"author":{"id":1035064,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/38/4c9cfdf4.jpg","nickname":"谢小路","note":"","ucode":"C9FE2EB10DC105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311654,"discussion_content":"我觉得还是不要纠结于作者的用词，现在好多作者都会「创造新词」，实际上都是虚的，就从业务角度和功能角度来理解就好了。业务角度，我们可以把大的业务根据资源拆分成小的业务，每个小的业务成一个服务；另外可以根据功能性，比如服务之间的依赖关系进行拆分，公共的功能提取出一个服务之类的。","likes_number":16,"is_delete":false,"is_hidden":false,"ctime":1602433130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21679,"user_name":"技术修行者","can_delete":false,"product_type":"c1","uid":1013147,"ip_address":"","ucode":"28CA41A1214D6B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/9b/611e74ab.jpg","comment_is_top":false,"comment_ctime":1535246165,"is_pvip":true,"replies":[{"id":"7888","content":"对，实际业务中这两种拆分方式一般是相互结合使用的，如果业务比较多分散，适合做纵向拆分。如果多个业务之间有公共模块耦合，适合把公共模块拆分出来，适合做横向拆分。","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535459906,"ip_address":"","comment_id":21679,"utype":1}],"discussion_count":2,"race_medal":5,"score":"190513807189","product_id":100014401,"comment_content":"关于服务拆分策略，我理解在实际工作中应该是横向和纵向相结合的方式:<br>1. 首先收集整理公用的模块，将其进行服务化处理，这是横向拆分。<br>2. 其次根据不同业务之间的耦合程度，将相对独立的服务拆分到不同的服务中，这属于纵向拆分。<br><br>最后的微服务列表中，既有被其他微服务使用的公共服务，也有彼此独立运行的业务服务。<br>","like_count":44,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422801,"discussion_content":"对，实际业务中这两种拆分方式一般是相互结合使用的，如果业务比较多分散，适合做纵向拆分。如果多个业务之间有公共模块耦合，适合把公共模块拆分出来，适合做横向拆分。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535459906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1751706,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ba/9a/6a2a3482.jpg","nickname":"仙人球biubiubiu","note":"","ucode":"924B01B3393ABB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70807,"discussion_content":"又看到你了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575381081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21626,"user_name":"snakorse","can_delete":false,"product_type":"c1","uid":1064887,"ip_address":"","ucode":"0AD727E1F16993","user_header":"https://static001.geekbang.org/account/avatar/00/10/3f/b7/0d8b5431.jpg","comment_is_top":false,"comment_ctime":1535200412,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"126089251996","product_id":100014401,"comment_content":"还有必须要解决的一个问题是 拆分后带来的跨服务事务的一致性问题","like_count":29,"discussions":[{"author":{"id":1276206,"avatar":"https://static001.geekbang.org/account/avatar/00/13/79/2e/bc3f9080.jpg","nickname":"123","note":"","ucode":"4D5D6ED9E02CA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":203672,"discussion_content":"如果是简单的跨微服务间调用，Tcc模式就可以了，如果是异步或长时间执行的调用事务，用SAGA模式。AT模式有性能瓶颈，不建议用。框架推荐用Seata。","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1584064388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21617,"user_name":"jogin","can_delete":false,"product_type":"c1","uid":1030952,"ip_address":"","ucode":"3D1D4CC09043A5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/28/914b5664.jpg","comment_is_top":false,"comment_ctime":1535196852,"is_pvip":false,"replies":[{"id":"7768","content":"对，微服务只能解决单体膨胀后的痛，但也会带来架构复杂性，要权衡利弊","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535341852,"ip_address":"","comment_id":21617,"utype":1}],"discussion_count":4,"race_medal":0,"score":"117499313844","product_id":100014401,"comment_content":"看评论感觉好多人不需要微服务。<br>1.业务复杂度问题单体应用没能梳理清楚，微服务也搞不懂定。<br>2.人手太少，微服务只会增加系统复杂度，运维成本，大家不要看到把原先的函数调用改成接口调用，没真正了解服务拆分后带来的系统复杂度。<br>3.系统设计问题，代码写的乱，开发流程问题，不是微服务能解决的。","like_count":27,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422767,"discussion_content":"对，微服务只能解决单体膨胀后的痛，但也会带来架构复杂性，要权衡利弊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535341852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981574,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3c/86/f964868c.jpg","nickname":"Guanjm","note":"","ucode":"E472FA918DF9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401902,"discussion_content":"等你把业务梳理清楚，系统设计好，代码写好，有一定的技术储备后，你可能顺其自然的转到微服务了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633760912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981574,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3c/86/f964868c.jpg","nickname":"Guanjm","note":"","ucode":"E472FA918DF9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401833,"discussion_content":"单体都写不好的团队，改微服务也费劲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633745808,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348545,"discussion_content":"因为小公司一般搞不起来。然后社会上大多数人都是小公司的，所以你觉得好多人不需要微服务。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612620227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21551,"user_name":"明天更美好","can_delete":false,"product_type":"c1","uid":1180696,"ip_address":"","ucode":"F036B8718938BE","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/18/4b02510f.jpg","comment_is_top":false,"comment_ctime":1535165158,"is_pvip":false,"replies":[{"id":"7775","content":"4个人搞微服务，有没有基础架构人员？没有就算了吧……","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535342063,"ip_address":"","comment_id":21551,"utype":1}],"discussion_count":5,"race_medal":0,"score":"100319412966","product_id":100014401,"comment_content":"我们是单体应用，一共22个接口，但是有一个接口并发巨大，二期势必拆分微服务架构。我觉得按照功能进行垂直拆分比较合适，我们之前有17个开发人员，现在裁员就剩下4个。希望胡老师给个建议","like_count":23,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422733,"discussion_content":"4个人搞微服务，有没有基础架构人员？没有就算了吧……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535342063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1017863,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/07/7804f4cc.jpg","nickname":"逗逼师父","note":"","ucode":"ECC2D82F83CBE6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408212,"discussion_content":"从入门到劝退","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635209537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981574,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3c/86/f964868c.jpg","nickname":"Guanjm","note":"","ucode":"E472FA918DF9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401836,"discussion_content":"我认为微服务没必要完全根据人员多少来限定，根据人员能力，有能力就可以搞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633745982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1552345,"avatar":"https://static001.geekbang.org/account/avatar/00/17/af/d9/b1fc248c.jpg","nickname":"黄平","note":"","ucode":"3AEFF39CCAC5C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258218,"discussion_content":"是否可以针对这种大并发量的借口进行拆分？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588666942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2140772,"avatar":"https://static001.geekbang.org/account/avatar/00/20/aa/64/bb0431ad.jpg","nickname":"努力吧，少年","note":"","ucode":"F544ECF147CBD1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1552345,"avatar":"https://static001.geekbang.org/account/avatar/00/17/af/d9/b1fc248c.jpg","nickname":"黄平","note":"","ucode":"3AEFF39CCAC5C3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378138,"discussion_content":"可以，不一定是微服务","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623065327,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":258218,"ip_address":""},"score":378138,"extra":""}]}]},{"had_liked":false,"id":21974,"user_name":"Geek_8d2caa","can_delete":false,"product_type":"c1","uid":1211097,"ip_address":"","ucode":"C1E9231FBFDADC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eorLLvkzT1Nh6zErTsib3MxOCUMz06nibphicvTteeoguqGGVY2XJHC8NfluOia9Hib7ccOMbWI8cgWoxQ/132","comment_is_top":false,"comment_ctime":1535423207,"is_pvip":false,"replies":[{"id":"7878","content":"可以适当做服务合并","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535457852,"ip_address":"","comment_id":21974,"utype":1}],"discussion_count":3,"race_medal":0,"score":"57369998055","product_id":100014401,"comment_content":"开始是10多人的团队，对业务进行了拆分，上线后，人员陆续离职，现在是6个人背着将近30个微服务，开发一个功能点，基本上所有人都得上，就演变成天天开会还解决不了问题，效率奇低……所以，有没有微服务退回到单体的做法？","like_count":13,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422947,"discussion_content":"可以适当做服务合并","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535457852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1517933,"avatar":"https://static001.geekbang.org/account/avatar/00/17/29/6d/8fdbf30d.jpg","nickname":"jwillim","note":"","ucode":"6B69DCF219B2F8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574974,"discussion_content":"适当合并微服务，增大服务颗粒度，反而能一定程度提升开发效率，降低复杂度。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654505073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981574,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/3c/86/f964868c.jpg","nickname":"Guanjm","note":"","ucode":"E472FA918DF9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401839,"discussion_content":"微服务设计不合理，根据业务拆分，人员分配和业务发展不匹配，天天开会了怎么解决问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633746236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21526,"user_name":"常玉棋","can_delete":false,"product_type":"c1","uid":1142696,"ip_address":"","ucode":"8F7C4B7413C796","user_header":"https://static001.geekbang.org/account/avatar/00/11/6f/a8/c1625c9b.jpg","comment_is_top":false,"comment_ctime":1535155220,"is_pvip":false,"replies":[{"id":"7890","content":"是这样的","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535460095,"ip_address":"","comment_id":21526,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53074762772","product_id":100014401,"comment_content":"我觉得目前单体能搞定的话就不要为了拆分而拆分，因为拆分后涉及到的问题有可能会让现有人员手忙脚乱，最好等做好了技术和人员准备再拆分。","like_count":12,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422723,"discussion_content":"是这样的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535460095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21665,"user_name":"🤕 ～ 😮","can_delete":false,"product_type":"c1","uid":1116769,"ip_address":"","ucode":"81618E6F5A81D0","user_header":"https://static001.geekbang.org/account/avatar/00/11/0a/61/1d79376b.jpg","comment_is_top":false,"comment_ctime":1535230239,"is_pvip":false,"replies":[{"id":"7765","content":"对，视具体项目而定","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535341783,"ip_address":"","comment_id":21665,"utype":1}],"discussion_count":2,"race_medal":0,"score":"48779870495","product_id":100014401,"comment_content":"横向拆分:把一些不会和其他主业务有依赖的功能拆分出来，最典型的就是common。<br>纵向拆分:按照业务来拆分，比如用户访问一个商城，从访问到下单成功会调用很多服务，我们可以把用户登录做一个服务，商城首页以及商品信息做一个服务，购物车模块是一个服务，支付模块又是另一个服务，这样整个商城都是微服务架构，不管哪个单独的服务出现问题，都不会影响别的服务，方便于技术人员最快定位问题，解决问题。<br>准确来说，一个项目里边是横向和纵向都有的，并不冲突，微服务带给我们的好处有很多，但具体能不能使用微服务还要根据具体的项目和团队来决定。<br>(以上拆分仅供举例参考，具体拆分视项目而定)","like_count":12,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422794,"discussion_content":"对，视具体项目而定","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535341783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1402254,"avatar":"https://static001.geekbang.org/account/avatar/00/15/65/8e/d0c3bed3.jpg","nickname":"kg200704","note":"","ucode":"C58729CE07CCA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566973,"discussion_content":"清晰！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650808273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21533,"user_name":"科大大👏🏻","can_delete":false,"product_type":"c1","uid":1075392,"ip_address":"","ucode":"F993F7D8FCFA2B","user_header":"https://static001.geekbang.org/account/avatar/00/10/68/c0/178a5b16.jpg","comment_is_top":false,"comment_ctime":1535158459,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44484831419","product_id":100014401,"comment_content":"当公司技术人员不足时就没必要考虑微服务了，好好做好单体架构，但是做的同时也要考虑未来有可能过渡到微服务，所以如果明确了以后会变成微服务的话单体架构有没有什么设计标准呢？","like_count":10},{"had_liked":false,"id":95323,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1558019440,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35917757808","product_id":100014401,"comment_content":"阅后感<br>哈哈，如果只看评论会有一种此文只讲服务拆分的最佳实践的错觉。当然了，这是老师想要我们一起讨论的主题，所以，大家都是围绕这个来的。<br><br>1：如何拆分服务，感觉确实是个核心问题，老师提到一纵一横以及视情况而定的指导性原则。我觉得操作性差，但也只能如此了，这个确实没有一定之规。<br><br>我认为，能不拆就不拆，如果要拆一定以始为终，想好咋维护，拆完之后才是开始，正如文中所言，解决了开发、部署、维护的耦合性问题，但是也引入了系统构建、运维、问题定位的复杂性问题。<br><br>拆？为啥拆？拆后能否解决不拆时的痛点？如果能，那代价是啥？能否承受？是否利大于弊？这些问题都思考了，也许拆不拆心中也已有了答案。<br><br>本节像个大纲，胡老师列出了微服务化的必迈之坎。<br>是否微服务化？<br>如何拆分服务？<br>服务咋治理？<br>服务咋监控？<br>服务咋订阅和发布？<br>服务问题咋定位？<br>服务化解决的痛点及引进的问题？<br><br>总体上是弊大于利的，否则我们也都不用谢啦！大一些公司，复杂一些的业务还是很需要这么玩的。毕竟分而治之的思路是人解决各种问题的第一和兜底方案。<br><br>期待后文吧！","like_count":8},{"had_liked":false,"id":22012,"user_name":"lovedebug","can_delete":false,"product_type":"c1","uid":1004115,"ip_address":"","ucode":"292FB1FD078AE8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/53/a9918d0b.jpg","comment_is_top":false,"comment_ctime":1535438420,"is_pvip":false,"replies":[{"id":"7877","content":"是的","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535457804,"ip_address":"","comment_id":22012,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31600209492","product_id":100014401,"comment_content":"微服务对运维和运维架构要求很高，没有运维就搞微服务就是给自己埋坑。","like_count":7,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422961,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535457804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2140772,"avatar":"https://static001.geekbang.org/account/avatar/00/20/aa/64/bb0431ad.jpg","nickname":"努力吧，少年","note":"","ucode":"F544ECF147CBD1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378139,"discussion_content":"现在谈纯运维已经不行了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623065781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22009,"user_name":"丢","can_delete":false,"product_type":"c1","uid":1193884,"ip_address":"","ucode":"5DD0257588FC4F","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/9c/4c56ff47.jpg","comment_is_top":false,"comment_ctime":1535437112,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31600208184","product_id":100014401,"comment_content":"实际项目通常是横向和纵向拆分相结合，公共的服务单独拆分出来，然后上层业务按功能模块拆分","like_count":7},{"had_liked":false,"id":21602,"user_name":"eason2017","can_delete":false,"product_type":"c1","uid":1009422,"ip_address":"","ucode":"E070BA624FA490","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","comment_is_top":false,"comment_ctime":1535189934,"is_pvip":false,"replies":[{"id":"7769","content":"对","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535341877,"ip_address":"","comment_id":21602,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31599961006","product_id":100014401,"comment_content":"前期，可以稍微粗粒度一些。先进行纵向拆分，把基础功能（用户系统）独立部署以维护。其它业务功能关联不紧密的可以独立部署，可以看这些业务在公司发展方向的重要性<br>后面，可以看清哪些功能是其他业务系统一定要调用的，同时，自身系统内也有其他繁杂的功能，那么可以进行横向切分，把被频繁调用的服务抽象并独立部署。","like_count":7,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422761,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535341877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21697,"user_name":"少帅","can_delete":false,"product_type":"c1","uid":1045791,"ip_address":"","ucode":"EF88F62C236594","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/1f/577265ea.jpg","comment_is_top":false,"comment_ctime":1535255591,"is_pvip":false,"replies":[{"id":"7763","content":"嗯，搞不定微服务的技术栈就不要往这个坑里跳","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535341747,"ip_address":"","comment_id":21697,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27305059367","product_id":100014401,"comment_content":"是否需要拆分要看目前公司项目的具体的情况，如果现有架构无法满足当前业务发展速度，比如构建一次要半天，上一次线经常搞通宵，牵一发而动全身，那么这个时候可以考虑一下微服务，拆微服务势必会提高运维、问题追踪、分布式事务等复杂度，所以微服务整个技术栈都要考虑进去","like_count":6,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422813,"discussion_content":"嗯，搞不定微服务的技术栈就不要往这个坑里跳","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535341747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21560,"user_name":"Ivan","can_delete":false,"product_type":"c1","uid":1107171,"ip_address":"","ucode":"1D914D64D3D6C2","user_header":"https://static001.geekbang.org/account/avatar/00/10/e4/e3/b56b31f5.jpg","comment_is_top":false,"comment_ctime":1535168075,"is_pvip":false,"replies":[{"id":"7783","content":"维度不一样，三个火枪手是从开发角度，我讲的是负责维护角度","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535342266,"ip_address":"","comment_id":21560,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27304971851","product_id":100014401,"comment_content":"之前在其他专栏用的是“三个火枪手”原则，即:三个人开发一个微服务。而这里的建议是一个人负责不超过三个微服务。这里不是很理解。帮忙解答一下，谢谢","like_count":6,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422739,"discussion_content":"维度不一样，三个火枪手是从开发角度，我讲的是负责维护角度","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535342266,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21776,"user_name":"70","can_delete":false,"product_type":"c1","uid":1081899,"ip_address":"","ucode":"A5884B2BDDAB70","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/2b/cf93c499.jpg","comment_is_top":false,"comment_ctime":1535331565,"is_pvip":false,"replies":[{"id":"7760","content":"核心与非核心隔离很有必要","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535341629,"ip_address":"","comment_id":21776,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23010168045","product_id":100014401,"comment_content":"团队也就10人左右，因为公司之前再做服务化，所以我们团队从最开始就服务拆分，从大的业务上查分，每个微服务也就1-2个人。最大的聚合服务也就4-5个人开发，为了保证核心业务不受其他业务影响，经过半年左右，慢慢的把其他业务进行划分，最后聚合服务中差不多也就只有核心业务了，最开始因为人手不够，又有一个请求大的业务访问，我们直接采用增加机器部署2份，流量区分访问，保证之前业务不被新上业务影响，确保稳定性","like_count":5,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422857,"discussion_content":"核心与非核心隔离很有必要","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535341629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21553,"user_name":"softtwilight","can_delete":false,"product_type":"c1","uid":1181079,"ip_address":"","ucode":"A09B0D22667488","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/97/b83ebf66.jpg","comment_is_top":false,"comment_ctime":1535165855,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23010002335","product_id":100014401,"comment_content":"横向拆分我的理解是就像aop，把共用但又跟其他部分不太相关的抽离出来，而纵向拆分是把高没聚的拆分出来","like_count":5},{"had_liked":false,"id":21758,"user_name":"🐢先生","can_delete":false,"product_type":"c1","uid":1046281,"ip_address":"","ucode":"D1135D99F8BB76","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/09/3e6a0c26.jpg","comment_is_top":false,"comment_ctime":1535327761,"is_pvip":false,"replies":[{"id":"7786","content":"是的","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535342293,"ip_address":"","comment_id":21758,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18715196945","product_id":100014401,"comment_content":"我们不要为了微服务而做微服务，做了服务拆分，我们会投入更大。个人觉得，做了服务拆分后，带来的最大的挑战应该是分布式事务，这个原因也导致了我们微服务的难落地。另外的话，大部分的初创公司不适合，需要结合公司自身的人员储备和业务情况等来综合考虑。","like_count":4,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422847,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535342293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21613,"user_name":"jogin","can_delete":false,"product_type":"c1","uid":1030952,"ip_address":"","ucode":"3D1D4CC09043A5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/28/914b5664.jpg","comment_is_top":false,"comment_ctime":1535196115,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18715065299","product_id":100014401,"comment_content":"没有推行微服务之前，单体应用的业务逻辑拆分，整体系统设计做得好，会给后期服务化改造铺平道路。","like_count":4},{"had_liked":false,"id":21612,"user_name":"jogin","can_delete":false,"product_type":"c1","uid":1030952,"ip_address":"","ucode":"3D1D4CC09043A5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bb/28/914b5664.jpg","comment_is_top":false,"comment_ctime":1535195926,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18715065110","product_id":100014401,"comment_content":"什么时候推行微服务，不同技术栈有区别，之前最多的一次4，50个php技术维护一个单体应用，整个系统结构，业务模块之间划分比较清晰，不同小组负责不同模块，开发上采用多版本并行开发，每个版本7，8个技术。这时候整个团队开发效率上没有太大问题，架构组把控非常好。","like_count":4},{"had_liked":false,"id":21534,"user_name":"Santo","can_delete":false,"product_type":"c1","uid":1137177,"ip_address":"","ucode":"D922BAD08571B1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er1iaMWWwbibUvPiaYXMPKUQDDgynPwU7n4fkRtuekqhYiaKUibgqEBzmygWmWjIhiaiblbAjrUSTkTOhgtw/132","comment_is_top":false,"comment_ctime":1535159221,"is_pvip":false,"replies":[{"id":"7889","content":"拆分是一方面，是否用微服务改造，还要看能否掌握spring cloud相关的一系列组件，这方面的人才也需要。","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535460078,"ip_address":"","comment_id":21534,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18715028405","product_id":100014401,"comment_content":"我们现在也是单体应用，目前人员差不多只有我一个可以进行重构。我现在的思路是这样的，所有新开发的服务采用httpclient的形式调用用户的部分接口，这样的话慢慢的一块一块的抽离，然后想在做完第一个服务之后采用springcloud+httpclient，大概10几个微服务，老师这样合理不？","like_count":4,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422725,"discussion_content":"拆分是一方面，是否用微服务改造，还要看能否掌握spring cloud相关的一系列组件，这方面的人才也需要。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535460078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21883,"user_name":"dingwood","can_delete":false,"product_type":"c1","uid":1153828,"ip_address":"","ucode":"460EB0C6E8C611","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/24/1e4883c6.jpg","comment_is_top":false,"comment_ctime":1535384480,"is_pvip":false,"replies":[{"id":"7886","content":"我们用的motan，接口描述在xml配置里，接口定义在jar包里，没有文档，文档不好维护。","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535459667,"ip_address":"","comment_id":21883,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14420286368","product_id":100014401,"comment_content":"请教下老师，关于服务间接口调用，您在微博的时候会定义规范吗？比如每个服务的接口文档。接口字段含义啊。元数据标准啊。数据字典标准啊。。是整个微服务一个公共的标准还是每个微服务团队自己定义自己的?盼复，谢谢！","like_count":3,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422906,"discussion_content":"我们用的motan，接口描述在xml配置里，接口定义在jar包里，没有文档，文档不好维护。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535459667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21756,"user_name":"fish","can_delete":false,"product_type":"c1","uid":1194551,"ip_address":"","ucode":"ABA0945C8B9615","user_header":"https://static001.geekbang.org/account/avatar/00/12/3a/37/06440c7f.jpg","comment_is_top":false,"comment_ctime":1535326094,"is_pvip":false,"replies":[{"id":"7761","content":"嗯","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535341645,"ip_address":"","comment_id":21756,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14420227982","product_id":100014401,"comment_content":"关键<br>1.是微服务技术选型，<br>2.服务化的界限划分，<br>3.服务之间的分布式事务一致性","like_count":3,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422845,"discussion_content":"嗯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535341645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21644,"user_name":"🇨🇳光🇨🇳","can_delete":false,"product_type":"c1","uid":1210233,"ip_address":"","ucode":"7F1EF83CC915C8","user_header":"https://static001.geekbang.org/account/avatar/00/12/77/79/a0a7c6a6.jpg","comment_is_top":false,"comment_ctime":1535207317,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14420109205","product_id":100014401,"comment_content":"目前根据业务  拆分出来了两个 独立服务 接口走rpc 调用  还在测试环境验证中！","like_count":3},{"had_liked":false,"id":21584,"user_name":"云中漫步","can_delete":false,"product_type":"c1","uid":1172978,"ip_address":"","ucode":"7E3BE72888E307","user_header":"https://static001.geekbang.org/account/avatar/00/11/e5/f2/262a7364.jpg","comment_is_top":false,"comment_ctime":1535175196,"is_pvip":false,"replies":[{"id":"7771","content":"银行对事务一致性要求非常高，所以这方面的技术也要求高，建议在掌握这些技术后再考虑，专栏后面会讲","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535341948,"ip_address":"","comment_id":21584,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14420077084","product_id":100014401,"comment_content":"老师，微服务应用在银行核心系统，您怎么看？有一些互联网银行已经应用微服务在核心系统，但传统银行的核心系统业务更为复杂，需要业务建模解耦，强事务一致性，很多银行都在研究，但真正落地的几乎没有。","like_count":3,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422754,"discussion_content":"银行对事务一致性要求非常高，所以这方面的技术也要求高，建议在掌握这些技术后再考虑，专栏后面会讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535341948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21555,"user_name":"天天向上卡索","can_delete":false,"product_type":"c1","uid":1009850,"ip_address":"","ucode":"E3724C3B39BD3F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/68/ba/c0cf8bf3.jpg","comment_is_top":false,"comment_ctime":1535167660,"is_pvip":false,"replies":[{"id":"7774","content":"对，一系列基础设施保障","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535342023,"ip_address":"","comment_id":21555,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14420069548","product_id":100014401,"comment_content":"不要为了微服务而微服务，微服务需要业务达到一定的量级，也需要运维能跟得上","like_count":4,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422735,"discussion_content":"对，一系列基础设施保障","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535342023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":131076,"user_name":"蓝心","can_delete":false,"product_type":"c1","uid":1306758,"ip_address":"","ucode":"D6F9B74E167B56","user_header":"https://static001.geekbang.org/account/avatar/00/13/f0/86/f9d1f990.jpg","comment_is_top":false,"comment_ctime":1567635801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10157570393","product_id":100014401,"comment_content":"请问从单体应用拆分成多个微服务后，服务之间的认证，权限调用，或单点登录方面如何实现，比如我们的一个通过shiro实现的后端系统，拆分成多个后，要在每个服务上面分别去集成shiro吗？这方面不太理解，希望老师解答，谢谢","like_count":2},{"had_liked":false,"id":22612,"user_name":"yankerzhu","can_delete":false,"product_type":"c1","uid":1011046,"ip_address":"","ucode":"48CAC0167300E1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6d/66/b33dabda.jpg","comment_is_top":false,"comment_ctime":1535853643,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10125788235","product_id":100014401,"comment_content":"纵向拆分类似于接口，横向拆分类似于抽象类","like_count":2},{"had_liked":false,"id":21927,"user_name":"medivh","can_delete":false,"product_type":"c1","uid":1181956,"ip_address":"","ucode":"732271F44FBD1B","user_header":"https://static001.geekbang.org/account/avatar/00/12/09/04/1c262959.jpg","comment_is_top":false,"comment_ctime":1535415996,"is_pvip":false,"replies":[{"id":"7881","content":"后面专栏有一节讲","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535457956,"ip_address":"","comment_id":21927,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10125350588","product_id":100014401,"comment_content":"微服务拆分后，就会带来分布式事务的问题，这个有没有合适的解决方案","like_count":2,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422924,"discussion_content":"后面专栏有一节讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535457956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21779,"user_name":"michael","can_delete":false,"product_type":"c1","uid":1005835,"ip_address":"","ucode":"69738B5801F0FD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/0b/fb876077.jpg","comment_is_top":false,"comment_ctime":1535332101,"is_pvip":false,"replies":[{"id":"7776","content":"为啥","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535342144,"ip_address":"","comment_id":21779,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10125266693","product_id":100014401,"comment_content":"10个人时拆分指的是后端开发人数吧？我们现在3个后端已经在拆分了……","like_count":2,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422859,"discussion_content":"为啥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535342144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21599,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1535186811,"is_pvip":false,"replies":[{"id":"7780","content":"这个就多了……最主要是工程经验","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535342212,"ip_address":"","comment_id":21599,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10125121403","product_id":100014401,"comment_content":"大神，能不能简单说一下从0学习java到微服务，需要哪些知识点和书推荐吗？好让刚刚学习java的人有条学习线路图，谢谢……","like_count":2,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422758,"discussion_content":"这个就多了……最主要是工程经验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535342212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21597,"user_name":"小胖狗","can_delete":false,"product_type":"c1","uid":1107423,"ip_address":"","ucode":"2C0CF3ED8E784A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e5/df/0c8e3fdc.jpg","comment_is_top":false,"comment_ctime":1535186239,"is_pvip":false,"replies":[{"id":"7770","content":"可以看看留言里大家的拆分经验","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535341893,"ip_address":"","comment_id":21597,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10125120831","product_id":100014401,"comment_content":"还是不太清楚横向拆分和纵向拆分的区别在哪里？","like_count":2,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422757,"discussion_content":"可以看看留言里大家的拆分经验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535341893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":35434,"user_name":"龙潜潜","can_delete":false,"product_type":"c1","uid":1214468,"ip_address":"","ucode":"482D366C617AFD","user_header":"","comment_is_top":false,"comment_ctime":1540562902,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5835530198","product_id":100014401,"comment_content":"请教一个问题，关于服务单元拆分，比如设置用户服务处理用户信息相关功能。但同时运营后台也会涉及部分用户信息维护操作，这种情况是让运营后台直接访问已有用户服务呢，还是针对管理后台的用户操作设置另一个微服务？","like_count":1},{"had_liked":false,"id":33593,"user_name":"空知","can_delete":false,"product_type":"c1","uid":1013283,"ip_address":"","ucode":"C448E98238DD36","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/23/31e5e984.jpg","comment_is_top":false,"comment_ctime":1539829839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5834797135","product_id":100014401,"comment_content":"横向 纵向拆分<br>e.g 房产业务系统 分为 商品房、存量房、租赁等,这几个业务之间应该是横向的 但是都需要用户体系,那用户对于上述几个业务系统而言是在他们之前的一个先决条件 所以用户体系 跟 业务系统是纵向关系<br>Σ(⊙▽⊙&quot;a!!! <br>所以按照功能区分是横向分??? 另一个 公共模块是纵向???(º言º)<br>","like_count":1},{"had_liked":false,"id":30850,"user_name":"崔华明","can_delete":false,"product_type":"c1","uid":1133215,"ip_address":"","ucode":"DD4173683C8BF7","user_header":"https://static001.geekbang.org/account/avatar/00/11/4a/9f/4883cca1.jpg","comment_is_top":false,"comment_ctime":1539010665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5833977961","product_id":100014401,"comment_content":"七个人将近花了一年时间把一个单体应用里的大模块拆了，前期拆分是按照功能模块来拆的，运行一段时间后发现某些模块的个别功能有时候要把CPU跑死，然后又把这种耗资源的服务拆出来。横跨多个服务的功能也单独拆出来。目前还算稳定，看到有评论说分布式事务的。我理解如果要玩微服务，或者分布式的，绝对的事务就别想了，尽量用消息来保证数据一致性吧。老师指点一下","like_count":1},{"had_liked":false,"id":24137,"user_name":"bert","can_delete":false,"product_type":"c1","uid":1021803,"ip_address":"","ucode":"2F89303AE5FB77","user_header":"https://static001.geekbang.org/account/avatar/00/0f/97/6b/c74c4a8e.jpg","comment_is_top":false,"comment_ctime":1536819868,"is_pvip":false,"replies":[{"id":"8873","content":"慢慢拆","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1536850392,"ip_address":"","comment_id":24137,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5831787164","product_id":100014401,"comment_content":"我们公司有N个业务系统，彼此之间都有交互，已经跑了很多年了。团队的技术水平也有限，感觉适合纵向拆分，按业务模块进行拆分，感觉这样好操作一些。一开始粒度不能过细，等有时间和精力了，再做更细粒度的拆分。","like_count":1,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423855,"discussion_content":"慢慢拆","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536850392,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22068,"user_name":"慧根","can_delete":false,"product_type":"c1","uid":1216827,"ip_address":"","ucode":"3754DC56A36BA2","user_header":"https://static001.geekbang.org/account/avatar/00/12/91/3b/68f76da8.jpg","comment_is_top":false,"comment_ctime":1535469779,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5830437075","product_id":100014401,"comment_content":"胡讲师你好，对于单体引用，其实在业务部署上也可以部署成集群化的模式，请求可以根据接口不同路由到不同的机子上去。固定的机子提供固定的接口服务。这种可以在一定程度上解决单体应用混合部署带来的服务相互干扰的问题。另外单体应用可以通过代码的模块化划分来减少冲突率。上面的处理方式都可以缓和你说的单体应用存在的问题。另外你说的进行服务化拆分之后可以减少团队部署发布的效率，意思是拆分成服务化后所属的服务模块都独立一个git版本来管理吗？","like_count":1},{"had_liked":false,"id":22055,"user_name":"大卫","can_delete":false,"product_type":"c1","uid":1019127,"ip_address":"","ucode":"D861709E483793","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/f7/a4de6f64.jpg","comment_is_top":false,"comment_ctime":1535463839,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5830431135","product_id":100014401,"comment_content":"也可以按服务的可靠性活可扩展性来拆分。<br>比如把单体应用的稳定接口和经常变更的接口需求拆分开；或将核心接口和非核心接口做拆分？","like_count":1},{"had_liked":false,"id":21995,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1535430446,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5830397742","product_id":100014401,"comment_content":"个人理解从业务角度的横向拆分结合通用功能的纵向拆分结合，以业务拆分为主，通用功能下沉，作为基础服务。一切以业务为主，脱离业务的设计都是扯淡。","like_count":1},{"had_liked":false,"id":21949,"user_name":"michael","can_delete":false,"product_type":"c1","uid":1005835,"ip_address":"","ucode":"69738B5801F0FD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/59/0b/fb876077.jpg","comment_is_top":false,"comment_ctime":1535418740,"is_pvip":false,"replies":[{"id":"7880","content":"真没必要，哈哈","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535457898,"ip_address":"","comment_id":21949,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5830386036","product_id":100014401,"comment_content":"不确定为什么在只有三个后端开发的时候就拆分微服务，业务复杂度个人觉得没有太高，也许领导觉得拆分是早晚的事情，或者想践行下新技术😂，没办法，就当是学习新技术啦，有坑就慢慢踩～","like_count":1,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422936,"discussion_content":"真没必要，哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535457898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21748,"user_name":"cc","can_delete":false,"product_type":"c1","uid":1013850,"ip_address":"","ucode":"AF5196A960F63F","user_header":"","comment_is_top":false,"comment_ctime":1535298193,"is_pvip":false,"replies":[{"id":"7885","content":"不到一定极端，不需要拆分","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535458199,"ip_address":"","comment_id":21748,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5830265489","product_id":100014401,"comment_content":"我们是做产品的，最终还是转化成项目的，项目还是会做定制开发。如果拆分了微服务，会加大维护成本。且版本管理困难。","like_count":1,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422841,"discussion_content":"不到一定极端，不需要拆分","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535458199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":21530,"user_name":"Stalary","can_delete":false,"product_type":"c1","uid":1101749,"ip_address":"","ucode":"F69AFF7C958D31","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/b5/d1ec6a7d.jpg","comment_is_top":false,"comment_ctime":1535157531,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5830124827","product_id":100014401,"comment_content":"想问一下，拆分后，我要调用同一个基础服务拿数据，那是不是调用方还要复制一份数据结构呢？还是直接操作json","like_count":1},{"had_liked":false,"id":21525,"user_name":"南山南的忧伤","can_delete":false,"product_type":"c1","uid":1018143,"ip_address":"","ucode":"E4448208C2569F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/89/1f/a2f8c3af.jpg","comment_is_top":false,"comment_ctime":1535154904,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5830122200","product_id":100014401,"comment_content":"阿忠伯，在设计架构时，是优先考虑当前所有的业务量，还是要满足以后潜在的业务量呢","like_count":1},{"had_liked":false,"id":355434,"user_name":"killeroppo","can_delete":false,"product_type":"c1","uid":1815768,"ip_address":"广东","ucode":"C167BA07268273","user_header":"https://static001.geekbang.org/account/avatar/00/1b/b4/d8/67a31275.jpg","comment_is_top":false,"comment_ctime":1661389442,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1661389442","product_id":100014401,"comment_content":"拿pdm系统来说  基础服务  变更  工作流  bom  part  认证 用户 工艺  产品<br>1 基础服务被多个依赖  可以拆出来 属于横向拆分 提取公共模块<br>2 认证和用户  关系密切  放一起 业务密集<br>3 bom part为常用且高性能要求 要与其它隔离<br>   ","like_count":0},{"had_liked":false,"id":343507,"user_name":"keep_it_real","can_delete":false,"product_type":"c1","uid":2055554,"ip_address":"","ucode":"F5057CAF752FF3","user_header":"https://static001.geekbang.org/account/avatar/00/1f/5d/82/81b2ba91.jpg","comment_is_top":false,"comment_ctime":1650882895,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650882895","product_id":100014401,"comment_content":"公司有时候有些功能重复的业务模块，这个时候就可以把它做成公共模块去维护，这就是横向拆分。而纵向拆分得看业务，小项目没必要分的那么细，大项目根据业务拆分，可以不同团队开发，相互联系只需要暴露接口。","like_count":0},{"had_liked":false,"id":323192,"user_name":"去冰不要糖","can_delete":false,"product_type":"c1","uid":2351354,"ip_address":"","ucode":"EF84E66D42E00A","user_header":"","comment_is_top":false,"comment_ctime":1637758163,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637758163","product_id":100014401,"comment_content":"服务拆分策略，就目前我们系统来看，使用纵向和横向相结合的模式可能更符合实际应用，利于业务发展:<br>1. 公共模块部分，将其进行服务化处理，主要包括客户信息维护，这是横向拆分。<br>2. 业务模块部分，根据不同业务之间的耦合程度，将相对独立的服务拆分到不同的服务中，这属于纵向拆分。<br><br>最后的微服务列表中，既有被其他微服务使用的公共服务，也有彼此独立运行的业务服务。","like_count":0},{"had_liked":false,"id":309224,"user_name":"Sch0ng","can_delete":false,"product_type":"c1","uid":1145554,"ip_address":"","ucode":"73F6113931B1AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg","comment_is_top":false,"comment_ctime":1629989444,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629989444","product_id":100014401,"comment_content":"什么时候拆，怎么拆，拆的时候要考虑哪些方面，拆开以后会带来哪些新的问题？<br>10人；横向纵向；3个服务&#47;人；服务之间通信、服务注册中心、限流熔断、监控、日志、链路追踪、CI&#47;CD。","like_count":0},{"had_liked":false,"id":308500,"user_name":"Geek_783504","can_delete":false,"product_type":"c1","uid":2743789,"ip_address":"","ucode":"549D3F0549743C","user_header":"https://static001.geekbang.org/account/avatar/00/29/dd/ed/f6c5432b.jpg","comment_is_top":false,"comment_ctime":1629647492,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1629647492","product_id":100014401,"comment_content":"纵向拆分从业务角度进行，拆分成多个子系统，横向拆分侧重于对业务的深入拆分，进行服务重组，注重公共的且被多个系统调用的业务类似于一条流水线，并且依赖的资源与其他的系统不耦合","like_count":0},{"had_liked":false,"id":297728,"user_name":"菠萝吹雪—Code","can_delete":false,"product_type":"c1","uid":1650378,"ip_address":"","ucode":"A5B2FC661EE17D","user_header":"https://static001.geekbang.org/account/avatar/00/19/2e/ca/469f7266.jpg","comment_is_top":false,"comment_ctime":1623748535,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1623748535","product_id":100014401,"comment_content":"service mesh  关于服务的拆分就是很好案例","like_count":0},{"had_liked":false,"id":290908,"user_name":"黑猫小探长","can_delete":false,"product_type":"c1","uid":1808173,"ip_address":"","ucode":"3AA839E4242DC7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLlwVGxV3f1TicvkZFHQ3tCoj1DEMGLicuIoqu4zRddPF3bUDt1Il3vNia0iclVFYnwKMufhl9bXU3yDw/132","comment_is_top":false,"comment_ctime":1619852305,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1619852305","product_id":100014401,"comment_content":"并不是说功能拆分的越细越好，过度的拆分反而会让服务数量膨胀变得难以管理，因此找到符合自己业务现状和团队人员技术水平的拆分粒度才是可取的。我建议的标准是按照每个开发人员负责不超过 3 个大的服务为标准，毕竟每个人的精力是有限的，所以在拆分微服务时，可以按照开发人员的总人数来决定。思考题","like_count":0},{"had_liked":false,"id":253514,"user_name":"Alex","can_delete":false,"product_type":"c1","uid":1134539,"ip_address":"","ucode":"11C598D0723D08","user_header":"https://static001.geekbang.org/account/avatar/00/11/4f/cb/ede92cd5.jpg","comment_is_top":false,"comment_ctime":1602758287,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602758287","product_id":100014401,"comment_content":"微服务中拆分的维度的考量分两点<br>1.按照功能划分，按耦合层度划分<br>2.对于是业务瓶颈的服务进行拆分","like_count":0},{"had_liked":false,"id":220884,"user_name":"蓝猫","can_delete":false,"product_type":"c1","uid":1128676,"ip_address":"","ucode":"A2E11FF854013C","user_header":"https://static001.geekbang.org/account/avatar/00/11/38/e4/17ffa30b.jpg","comment_is_top":false,"comment_ctime":1590333664,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590333664","product_id":100014401,"comment_content":"纵向拆分是将系统拆分成几个独立的服务，服务之间彼此独立，一般是按照业务来进行拆分，将彼此独立的业务拆分成不同的服务；而纵向拆分是从系统中拆分出公共独立的服务，供其他服务调用，一般是将多个业务的公共步骤拆分成独立的服务，供多个业务调用。<br>自动化办公系统业务模块多，但是业务都相对简单，如果要拆分，适合纵向拆分，将不同的业务模块拆分成不同的服务。","like_count":0},{"had_liked":false,"id":189325,"user_name":"Huaxin","can_delete":false,"product_type":"c1","uid":1162668,"ip_address":"","ucode":"6E5E4599341918","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/ac/c2415dda.jpg","comment_is_top":false,"comment_ctime":1584500436,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584500436","product_id":100014401,"comment_content":"个人感觉，任何项目都应该是先单体，等业务量和代码量上来了再拆微服务。因为单体能更快的上线，而微服务前期投入会比较大。但现在客户一般上来就想要微服务，所以我们一般先拆成两三服务，并在客户不太关注的基础架构方面做减配，基本就是为了微服务而微服务吧。","like_count":1},{"had_liked":false,"id":171885,"user_name":"秋晨","can_delete":false,"product_type":"c1","uid":1247845,"ip_address":"","ucode":"5F2002818159D6","user_header":"https://static001.geekbang.org/account/avatar/00/13/0a/65/9cd6d109.jpg","comment_is_top":false,"comment_ctime":1579050181,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1579050181","product_id":100014401,"comment_content":"看到举例说明的部署问题，突然还是感慨，PHP大法好","like_count":0,"discussions":[{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381897,"discussion_content":"以后会是go 的天下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625282382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348546,"discussion_content":"以后会是go 的天下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612620535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115049,"user_name":"王","can_delete":false,"product_type":"c1","uid":1084336,"ip_address":"","ucode":"44A968CB371704","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/b0/38aadfa0.jpg","comment_is_top":false,"comment_ctime":1563461242,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563461242","product_id":100014401,"comment_content":"微服务只是后端接口开发，那对应前端页面的开发怎么组队，也同样3人一组吗？","like_count":0},{"had_liked":false,"id":98064,"user_name":"nia_young","can_delete":false,"product_type":"c1","uid":1017853,"ip_address":"","ucode":"AF8DD7F4D86997","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/fd/28843c10.jpg","comment_is_top":false,"comment_ctime":1558886281,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558886281","product_id":100014401,"comment_content":"请问纵向和横向是否可以结合起来用，对于公共的部分用横向，其余用纵向根据业务关联关系拆分","like_count":0},{"had_liked":false,"id":91031,"user_name":"六维","can_delete":false,"product_type":"c1","uid":1022887,"ip_address":"","ucode":"EB1C15AC06A8DF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/a7/440aff07.jpg","comment_is_top":false,"comment_ctime":1556808623,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556808623","product_id":100014401,"comment_content":"业务服务器前段时间出现了瓶颈， 有其他组人员建议引入微服务架构，领导也表示赞同。问题是人员只有3个人，引入微服务也有相应的成本。出现的瓶颈是可以先用其他方式优化处理，不一定要引入微服务来处理。但可以先采用横行拆分，把公共的功能拆分出去。后面再根据实际业务发展和人手情况再决定是否引入微服务。","like_count":0},{"had_liked":false,"id":90974,"user_name":"学习","can_delete":false,"product_type":"c1","uid":1451763,"ip_address":"","ucode":"5DEEDEEF65322E","user_header":"https://static001.geekbang.org/account/avatar/00/16/26/f3/5c6f125b.jpg","comment_is_top":false,"comment_ctime":1556764580,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556764580","product_id":100014401,"comment_content":"微服务化5大要点：接口定义，发布订阅，埋点监控，容错治理，定位追踪。","like_count":0},{"had_liked":false,"id":89800,"user_name":"zhihai.tu","can_delete":false,"product_type":"c1","uid":1045888,"ip_address":"","ucode":"61371EA3EF6988","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f5/80/baddf03b.jpg","comment_is_top":false,"comment_ctime":1556268216,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1556268216","product_id":100014401,"comment_content":"我们之前是一个war包，里面包括了前台页面展现以及数据查询访问（oracle）功能。后续进行了拆分成了两个项目，一个项目只实现前台页面，另一个项目实现相关数据的获取（从oracle查询）。两个项目之间通过http来进行访问。并分给两个团队负责，分别部署和上线。","like_count":0},{"had_liked":false,"id":80614,"user_name":"Ellison","can_delete":false,"product_type":"c1","uid":1207457,"ip_address":"","ucode":"A2FB94D4F6A332","user_header":"https://static001.geekbang.org/account/avatar/00/12/6c/a1/80d83f0a.jpg","comment_is_top":false,"comment_ctime":1553688777,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553688777","product_id":100014401,"comment_content":"这个时候是不是就需要api网关了，他可以做数据聚合，链路监控","like_count":0},{"had_liked":false,"id":73879,"user_name":"t7ink","can_delete":false,"product_type":"c1","uid":1057762,"ip_address":"","ucode":"7D822FAE8E34FA","user_header":"https://static001.geekbang.org/account/avatar/00/10/23/e2/06575acb.jpg","comment_is_top":false,"comment_ctime":1552023461,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552023461","product_id":100014401,"comment_content":"我觉得纵向和横向拆分应该是并存的，比如文章中所说的例子，如果相关联的业务做成一个微服务的话，比如昵称，这个昵称可能在所有的服务中都会用到，以我的想法“昵称服务”一定会独立出来，而有一些服务比如AB是成对出现的，但是A，B又不会被单独调用，这个两个就一定会合并到一起，不知道我这个想法是否正确？","like_count":0},{"had_liked":false,"id":71834,"user_name":"天客","can_delete":false,"product_type":"c1","uid":1210859,"ip_address":"","ucode":"F3C5B92A947148","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/eb/1fb3ad2a.jpg","comment_is_top":false,"comment_ctime":1551447709,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551447709","product_id":100014401,"comment_content":"对于是否应用微服务，按照团队人数的做法不是很认可，以前有个项目，是按照osgi 的方式进行开发，开发团队规模在近百人左右，但并不是很影响开发效率，由于单个物理机器资源有限，支撑的算力和并发有限，所以改用了osgi + rpc 的方式。微服务是否可以应用，需要综合多方面的因素，系统过于庞大时，单体应用性能无法提升时，团队异地协作，都可以考虑采用微服务架构","like_count":0},{"had_liked":false,"id":69230,"user_name":"王恩俊","can_delete":false,"product_type":"c1","uid":1200691,"ip_address":"","ucode":"6DC662DC128FB2","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/33/283dab06.jpg","comment_is_top":false,"comment_ctime":1550680392,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550680392","product_id":100014401,"comment_content":"我也不理解横向和纵向拆分。理解成业务维度和功能维度拆分，就比较容易接受","like_count":0},{"had_liked":false,"id":42947,"user_name":"∮黑洞の视界","can_delete":false,"product_type":"c1","uid":1159392,"ip_address":"","ucode":"F4DC9965D3CB78","user_header":"https://static001.geekbang.org/account/avatar/00/11/b0/e0/adb0fca6.jpg","comment_is_top":false,"comment_ctime":1543117012,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543117012","product_id":100014401,"comment_content":"老师，请教一个问题，我们公司各个对客业务系统在被外部实际调用之前有个网关层。<br>前端-&gt;网关层-&gt;后台系统 这是属于横向拆分么。","like_count":1},{"had_liked":false,"id":36145,"user_name":"The Dawn","can_delete":false,"product_type":"c1","uid":1262595,"ip_address":"","ucode":"FB52F74177EF91","user_header":"https://static001.geekbang.org/account/avatar/00/13/44/03/329a8428.jpg","comment_is_top":false,"comment_ctime":1540954569,"is_pvip":false,"replies":[{"id":"12854","content":"这个跟微服务没有什么关系吧，我理解是给手机app提供接口就可以了吧","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1540955939,"ip_address":"","comment_id":36145,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1540954569","product_id":100014401,"comment_content":"作者大神你好，我们项目目前有6个人，项目经验在3-5年，都没有微服务架构的经验。需求是这样的，我们有一套内网的管理系统，但是现在客户希望我们把原有的一部分功能移植到手机app上，这样就需要分开部署，想到了微服务，但是团队的情况不知道是否能应付您说的问题，希望您能解答。","like_count":0,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427760,"discussion_content":"这个跟微服务没有什么关系吧，我理解是给手机app提供接口就可以了吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540955939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":35436,"user_name":"龙潜潜","can_delete":false,"product_type":"c1","uid":1214468,"ip_address":"","ucode":"482D366C617AFD","user_header":"","comment_is_top":false,"comment_ctime":1540563515,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1540563515","product_id":100014401,"comment_content":"关于微服务划分的问题，针对同一业务域，比如user或feed，既存在来自app端的请求，又有来自管理后台的请求。这种情况是设置一个微服务模块，还是区分前后端设置两个？","like_count":0},{"had_liked":false,"id":30841,"user_name":"王君","can_delete":false,"product_type":"c1","uid":1258328,"ip_address":"","ucode":"FBF8AD8E05BBFB","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/58/23abd629.jpg","comment_is_top":false,"comment_ctime":1539008176,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539008176","product_id":100014401,"comment_content":"老师对服务间实务一直性有没有什么建议或方案","like_count":0},{"had_liked":false,"id":30536,"user_name":"Mr.Lee","can_delete":false,"product_type":"c1","uid":1240758,"ip_address":"","ucode":"F732D98D262703","user_header":"https://static001.geekbang.org/account/avatar/00/12/ee/b6/f99db3e7.jpg","comment_is_top":false,"comment_ctime":1538913771,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538913771","product_id":100014401,"comment_content":"笔记:微服务就是将一个庞杂臃肿的单体应用拆分成细粒度的服务,独立部署运营,并且交由小的团队开发,测试,上限以及后期的维护整个生命周期<br>一个项目在开始时的功能相对比较简单, 此时可以做一个单体应用,但是随着业务的不断扩大,其需求也会不断增加,更多的功能就会耦合,如果项目的开发超过10人以上就要考虑拆分成微服务.<br>微服务在拆分时分为横向拆分和纵向拆分.<br>所谓的纵向拆分就是从业务层面来讲,按照业务的关联程度,比较密切的业务拆分成一个服务,而相对独立的功能拆分成一个服务<br>横向拆分就是从公共的独立的角度来讲,是否是公共的且被其他的服务调用,并且依赖其他的资源独立业务不耦合.<br>拆分成微服务也会面临一些问题:服务与服务之间如何交互(接口)?服务又如何发布订阅(注册中心)?如何监控?如何治理?如何定位?<br><br>","like_count":0},{"had_liked":false,"id":29160,"user_name":"城","can_delete":false,"product_type":"c1","uid":1116497,"ip_address":"","ucode":"B86F9EFEBF9EBD","user_header":"","comment_is_top":false,"comment_ctime":1538276247,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538276247","product_id":100014401,"comment_content":"我们现在做得是一个APP，然后APP调用一个中间服务，这个中间服务依据不同功能调用后端不同服务，后端服务我们做的都是依据业务来做的小服务。现在我们想的是把这个中间服务拆分掉，不然每次发服务都得动到这个中间服务，而且也不好维护。我不知道目前这样算不算后端服务微服务化了？","like_count":0},{"had_liked":false,"id":27323,"user_name":"dw靖","can_delete":false,"product_type":"c1","uid":1185977,"ip_address":"","ucode":"F6C60B1E3777FC","user_header":"https://static001.geekbang.org/account/avatar/00/12/18/b9/de606b05.jpg","comment_is_top":false,"comment_ctime":1537871397,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537871397","product_id":100014401,"comment_content":"横向拆分描述的不是太详细哦！","like_count":0},{"had_liked":false,"id":23303,"user_name":"双子座","can_delete":false,"product_type":"c1","uid":1158398,"ip_address":"","ucode":"C46A28AB10EA5E","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/fe/e6978d91.jpg","comment_is_top":false,"comment_ctime":1536281224,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536281224","product_id":100014401,"comment_content":"看了评论关于微服务横向、纵向切分的讨论，不明觉厉，赞！","like_count":0},{"had_liked":false,"id":22932,"user_name":"🐍","can_delete":false,"product_type":"c1","uid":1213611,"ip_address":"","ucode":"42B11C20DD3CB0","user_header":"https://static001.geekbang.org/account/avatar/00/12/84/ab/1842a785.jpg","comment_is_top":false,"comment_ctime":1536048323,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1536048323","product_id":100014401,"comment_content":"我怎么感觉微服务是用来做优化的呢，需要微服务的项目，都是还能继续优化的。","like_count":0},{"had_liked":false,"id":22634,"user_name":"金hb.Ryan 冷空氣駕到","can_delete":false,"product_type":"c1","uid":1222233,"ip_address":"","ucode":"CAD363576696E4","user_header":"https://static001.geekbang.org/account/avatar/00/12/a6/59/1689ea0c.jpg","comment_is_top":false,"comment_ctime":1535873020,"is_pvip":false,"replies":[{"id":"8189","content":"是，微服务拆分的前置条件要想清楚","user_name":"作者回复","user_name_real":"古月中心相心","uid":"1010144","ctime":1535946206,"ip_address":"","comment_id":22634,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1535873020","product_id":100014401,"comment_content":"拆分要谨慎，不然容易走火入魔（来个业务就拆分，然后配套devops跟不上","like_count":0,"discussions":[{"author":{"id":1010144,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/69/e0/ff8ee2e2.jpg","nickname":"胡忠想","note":"","ucode":"0792605FC265B4","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423199,"discussion_content":"是，微服务拆分的前置条件要想清楚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535946206,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22567,"user_name":"GeekAmI","can_delete":false,"product_type":"c1","uid":1005030,"ip_address":"","ucode":"232C0B6DFB9F56","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/e6/87197b10.jpg","comment_is_top":false,"comment_ctime":1535793732,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535793732","product_id":100014401,"comment_content":"两个疑问：<br>1. 我们后台开发就2个人，但我们的业务已经很复杂，如果不进行服务拆分，不利于接口间隔离；<br>2. 老师提到的这个把昵称抽象为一个公共模块，是不是太细了点","like_count":0},{"had_liked":false,"id":22348,"user_name":"smile7up","can_delete":false,"product_type":"c1","uid":1193743,"ip_address":"","ucode":"C0EEB0A78EE48E","user_header":"https://static001.geekbang.org/account/avatar/00/12/37/0f/ea69cc8e.jpg","comment_is_top":false,"comment_ctime":1535621362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535621362","product_id":100014401,"comment_content":"老师，您好，有个问题想问您，之前我们是六个单体项目负责政府的不同的领域，现在我们想将所有的单体项目做成统一的一个微服务，用户其实是共享的，但是每个单体服务用的是个自的用户系统，项目之间有接口调用，人员配置没问题，请问是否推荐做成微服务？","like_count":0},{"had_liked":false,"id":22300,"user_name":"Caliven","can_delete":false,"product_type":"c1","uid":1003139,"ip_address":"","ucode":"8C5DACDF30EF03","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/83/88151c5f.jpg","comment_is_top":false,"comment_ctime":1535593697,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1535593697","product_id":100014401,"comment_content":"后端就那么几个人，本来想拆分的，调研了大半年了，但是考虑到公司业务还没那么复杂，还是缓缓。","like_count":0},{"had_liked":false,"id":22290,"user_name":"子浩","can_delete":false,"product_type":"c1","uid":1221351,"ip_address":"","ucode":"FE11F3F50D5B72","user_header":"https://static001.geekbang.org/account/avatar/00/12/a2/e7/8ad0a10a.jpg","comment_is_top":false,"comment_ctime":1535592620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535592620","product_id":100014401,"comment_content":"我们是传统软件商，做项目的，目前项目多，系统结构也比较复杂，十个站点，业务也比较复杂，现在的问题是研发人员对业务不熟悉，跟着项目跑，有什么活就干什么活。但是项目中大部分功能又是通用的，请问这种情况下，适合引入微服务吗？","like_count":0},{"had_liked":false,"id":22213,"user_name":"大猫","can_delete":false,"product_type":"c1","uid":1107741,"ip_address":"","ucode":"75EB89096D7F12","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/1d/c0de1c85.jpg","comment_is_top":false,"comment_ctime":1535556417,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535556417","product_id":100014401,"comment_content":"老师您好，请问下微服务必须要帮系统服务化吗（注册发现）","like_count":0},{"had_liked":false,"id":22038,"user_name":"whichlee","can_delete":false,"product_type":"c1","uid":1002198,"ip_address":"","ucode":"003DD69FD090AC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/d6/7d87a19e.jpg","comment_is_top":false,"comment_ctime":1535458322,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535458322","product_id":100014401,"comment_content":"我们做的一个2b产品要求部署的便利性，这成为了微服务化比较大的顾忌，其次我们团队人手也比较有限，总体来说难以在我的团队里实施微服务化。","like_count":0},{"had_liked":false,"id":21973,"user_name":"大猫","can_delete":false,"product_type":"c1","uid":1107741,"ip_address":"","ucode":"75EB89096D7F12","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/1d/c0de1c85.jpg","comment_is_top":false,"comment_ctime":1535423134,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535423134","product_id":100014401,"comment_content":"请问下，微服务拆分之后，是不是rpc这层也要拆出来，还是放在一起","like_count":0},{"had_liked":false,"id":21827,"user_name":"明天更美好","can_delete":false,"product_type":"c1","uid":1180696,"ip_address":"","ucode":"F036B8718938BE","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/18/4b02510f.jpg","comment_is_top":false,"comment_ctime":1535364888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535364888","product_id":100014401,"comment_content":"我就是基础的架构人员，我能力一般","like_count":0},{"had_liked":false,"id":21593,"user_name":"探索无止境","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1535183965,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535183965","product_id":100014401,"comment_content":"一般是两种方式结合，按业务功能进行拆分，再抽取一些通用性的作为独立服务，方便复用","like_count":0},{"had_liked":false,"id":21567,"user_name":"盘木","can_delete":false,"product_type":"c1","uid":1044248,"ip_address":"","ucode":"6ADBFFF670DBFF","user_header":"","comment_is_top":false,"comment_ctime":1535169345,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535169345","product_id":100014401,"comment_content":"考虑现在公司的项目，这两种拆分方式都要用到，公用性强的拆分出来，然后在根据业务拆分。不知道这样拆分对不对？","like_count":0},{"had_liked":false,"id":21545,"user_name":"小咖","can_delete":false,"product_type":"c1","uid":1194844,"ip_address":"","ucode":"A94AED513C240A","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/5c/f77a77ef.jpg","comment_is_top":false,"comment_ctime":1535162475,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535162475","product_id":100014401,"comment_content":"十个人吗，但是四个人搞的微服务","like_count":0},{"had_liked":false,"id":21531,"user_name":"猿工匠","can_delete":false,"product_type":"c1","uid":1112986,"ip_address":"","ucode":"82FA8DE6C28936","user_header":"https://static001.geekbang.org/account/avatar/00/10/fb/9a/72f7b184.jpg","comment_is_top":false,"comment_ctime":1535157597,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1535157597","product_id":100014401,"comment_content":"胡老师，早😁","like_count":0}]}