{"id":118721,"title":"07 | What? è¿˜æœ‰æœ¬åœ°å¥—æ¥å­—ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç››å»¶æ•ï¼Œè¿™é‡Œæ˜¯ç½‘ç»œç¼–ç¨‹å®æˆ˜ç¬¬7è®²ï¼Œæ¬¢è¿å›æ¥ã€‚</p><p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²äº†UDPã€‚å¾ˆå¤šåŒå­¦éƒ½çŸ¥é“TCPå’ŒUDPï¼Œä½†æ˜¯å¯¹æœ¬åœ°å¥—æ¥å­—å´ä¸ç”šäº†è§£ã€‚</p><p>å®é™…ä¸Šï¼Œæœ¬åœ°å¥—æ¥å­—æ˜¯IPCï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§å®ç°æ–¹å¼ã€‚é™¤äº†æœ¬åœ°å¥—æ¥å­—ä»¥å¤–ï¼Œå…¶å®ƒæŠ€æœ¯ï¼Œè¯¸å¦‚ç®¡é“ã€å…±äº«æ¶ˆæ¯é˜Ÿåˆ—ç­‰ä¹Ÿæ˜¯è¿›ç¨‹é—´é€šä¿¡çš„å¸¸ç”¨æ–¹æ³•ï¼Œä½†å› ä¸ºæœ¬åœ°å¥—æ¥å­—å¼€å‘ä¾¿æ·ï¼Œæ¥å—åº¦é«˜ï¼Œæ‰€ä»¥æ™®éé€‚ç”¨äºåœ¨åŒä¸€å°ä¸»æœºä¸Šè¿›ç¨‹é—´é€šä¿¡çš„å„ç§åœºæ™¯ã€‚</p><p>é‚£ä¹ˆä»Šå¤©æˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸‹æœ¬åœ°å¥—æ¥å­—æ–¹é¢çš„çŸ¥è¯†ï¼Œå¹¶ä¸”åˆ©ç”¨æœ¬åœ°å¥—æ¥å­—å®Œæˆå¯é å­—èŠ‚æµå’Œæ•°æ®æŠ¥ä¸¤ç§åè®®ã€‚</p><h2>ä»ä¾‹å­å¼€å§‹</h2><p>ç°åœ¨æœ€ç«çš„äº‘è®¡ç®—æŠ€æœ¯æ˜¯ä»€ä¹ˆï¼Ÿæ— ç–‘æ˜¯Kuberneteså’ŒDockerã€‚åœ¨Kuberneteså’ŒDockerçš„æŠ€æœ¯ä½“ç³»ä¸­ï¼Œæœ‰å¾ˆå¤šä¼˜ç§€çš„è®¾è®¡ï¼Œæ¯”å¦‚Kubernetesçš„CRIï¼ˆContainer Runtime Interfaceï¼‰ï¼Œå…¶æ€æƒ³æ˜¯å°†Kubernetesçš„ä¸»è¦é€»è¾‘å’ŒContainer Runtimeçš„å®ç°è§£è€¦ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡netstatå‘½ä»¤æŸ¥çœ‹Linuxç³»ç»Ÿå†…çš„æœ¬åœ°å¥—æ¥å­—çŠ¶å†µï¼Œä¸‹é¢è¿™å¼ å›¾åˆ—å‡ºäº†è·¯å¾„ä¸º/var/run/dockershim.socketçš„streamç±»å‹çš„æœ¬åœ°å¥—æ¥å­—ï¼Œå¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å¼€å¯è¿™ä¸ªå¥—æ¥å­—çš„è¿›ç¨‹ä¸ºkubeletã€‚kubeletæ˜¯Kubernetesçš„ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶è´Ÿè´£å°†æ§åˆ¶å™¨å’Œè°ƒåº¦å™¨çš„å‘½ä»¤è½¬åŒ–ä¸ºå•æœºä¸Šçš„å®¹å™¨å®ä¾‹ã€‚ä¸ºäº†å®ç°å’Œå®¹å™¨è¿è¡Œæ—¶çš„è§£è€¦ï¼Œkubeletè®¾è®¡äº†åŸºäºæœ¬åœ°å¥—æ¥å­—çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨GRPCè°ƒç”¨ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/c7/6b/c75a8467a84f30e523917f28f2f4266b.jpg?wh=2998*1346\" alt=\"\"><br>\nçœ¼å°–çš„åŒå­¦å¯èƒ½å‘ç°åˆ—è¡¨é‡Œè¿˜æœ‰docker-containerd.sockç­‰å…¶ä»–æœ¬åœ°å¥—æ¥å­—ï¼Œæ˜¯çš„ï¼ŒDockerå…¶å®ä¹Ÿæ˜¯å¤§é‡ä½¿ç”¨äº†æœ¬åœ°å¥—æ¥å­—æŠ€æœ¯æ¥æ„å»ºçš„ã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨/var/runç›®å½•ä¸‹å°†ä¼šçœ‹åˆ°dockerä½¿ç”¨çš„æœ¬åœ°å¥—æ¥å­—æè¿°ç¬¦:</p><p><img src=\"https://static001.geekbang.org/resource/image/a0/4d/a0e6f8ca0f9c5727f554323a26a9c14d.jpg?wh=1843*394\" alt=\"\"></p><h2>æœ¬åœ°å¥—æ¥å­—æ¦‚è¿°</h2><p>æœ¬åœ°å¥—æ¥å­—ä¸€èˆ¬ä¹Ÿå«åšUNIXåŸŸå¥—æ¥å­—ï¼Œæœ€æ–°çš„è§„èŒƒå·²ç»æ”¹å«æœ¬åœ°å¥—æ¥å­—ã€‚åœ¨å‰é¢çš„TCP/UDPä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨127.0.0.1å®Œæˆå®¢æˆ·ç«¯è¿›ç¨‹å’ŒæœåŠ¡å™¨ç«¯è¿›ç¨‹åŒæ—¶åœ¨æœ¬æœºä¸Šçš„é€šä¿¡ï¼Œé‚£ä¹ˆï¼Œè¿™é‡Œçš„æœ¬åœ°å¥—æ¥å­—åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æœ¬åœ°å¥—æ¥å­—æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å¥—æ¥å­—ï¼Œå’ŒTCP/UDPå¥—æ¥å­—ä¸åŒã€‚TCP/UDPå³ä½¿åœ¨æœ¬åœ°åœ°å€é€šä¿¡ï¼Œä¹Ÿè¦èµ°ç³»ç»Ÿç½‘ç»œåè®®æ ˆï¼Œè€Œæœ¬åœ°å¥—æ¥å­—ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šè¯´æä¾›äº†ä¸€ç§å•ä¸»æœºè·¨è¿›ç¨‹é—´è°ƒç”¨çš„æ‰‹æ®µï¼Œå‡å°‘äº†åè®®æ ˆå®ç°çš„å¤æ‚åº¦ï¼Œæ•ˆç‡æ¯”TCP/UDPå¥—æ¥å­—éƒ½è¦é«˜è®¸å¤šã€‚ç±»ä¼¼çš„IPCæœºåˆ¶è¿˜æœ‰UNIXç®¡é“ã€å…±äº«å†…å­˜å’ŒRPCè°ƒç”¨ç­‰ã€‚</p><p>æ¯”å¦‚X  Windowå®ç°ï¼Œå¦‚æœå‘ç°æ˜¯æœ¬åœ°è¿æ¥ï¼Œå°±ä¼šèµ°æœ¬åœ°å¥—æ¥å­—ï¼Œå·¥ä½œæ•ˆç‡éå¸¸é«˜ã€‚</p><p>ç°åœ¨ä½ å¯ä»¥å›å¿†ä¸€ä¸‹ï¼Œåœ¨å‰é¢ä»‹ç»å¥—æ¥å­—åœ°å€æ—¶ï¼Œæˆ‘ä»¬è®²åˆ°äº†æœ¬åœ°åœ°å€ï¼Œè¿™ä¸ªæœ¬åœ°åœ°å€å°±æ˜¯æœ¬åœ°å¥—æ¥å­—ä¸“å±çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ed/58/ed49b0f1b658e82cb07a6e1e81f36b58.png?wh=3979*3770\" alt=\"\"></p><h2>æœ¬åœ°å­—èŠ‚æµå¥—æ¥å­—</h2><p>æˆ‘ä»¬å…ˆä»å­—èŠ‚æµæœ¬åœ°å¥—æ¥å­—å¼€å§‹ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªå­—èŠ‚æµç±»å‹çš„æœ¬åœ°å¥—æ¥å­—æœåŠ¡å™¨ç«¯ä¾‹å­ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒæœåŠ¡å™¨ç¨‹åºæ‰“å¼€æœ¬åœ°å¥—æ¥å­—åï¼Œæ¥æ”¶å®¢æˆ·ç«¯å‘é€æ¥çš„å­—èŠ‚æµï¼Œå¹¶å¾€å®¢æˆ·ç«¯å›é€äº†æ–°çš„å­—èŠ‚æµã€‚</p><pre><code>#include  &quot;lib/common.h&quot;\n\nint main(int argc, char **argv) {\n    if (argc != 2) {\n        error(1, 0, &quot;usage: unixstreamserver &lt;local_path&gt;&quot;);\n    }\n\n    int listenfd, connfd;\n    socklen_t clilen;\n    struct sockaddr_un cliaddr, servaddr;\n\n    listenfd = socket(AF_LOCAL, SOCK_STREAM, 0);\n    if (listenfd &lt; 0) {\n        error(1, errno, &quot;socket create failed&quot;);\n    }\n\n    char *local_path = argv[1];\n    unlink(local_path);\n    bzero(&amp;servaddr, sizeof(servaddr));\n    servaddr.sun_family = AF_LOCAL;\n    strcpy(servaddr.sun_path, local_path);\n\n    if (bind(listenfd, (struct sockaddr *) &amp;servaddr, sizeof(servaddr)) &lt; 0) {\n        error(1, errno, &quot;bind failed&quot;);\n    }\n\n    if (listen(listenfd, LISTENQ) &lt; 0) {\n        error(1, errno, &quot;listen failed&quot;);\n    }\n\n    clilen = sizeof(cliaddr);\n    if ((connfd = accept(listenfd, (struct sockaddr *) &amp;cliaddr, &amp;clilen)) &lt; 0) {\n        if (errno == EINTR)\n            error(1, errno, &quot;accept failed&quot;);        /* back to for() */\n        else\n            error(1, errno, &quot;accept failed&quot;);\n    }\n\n    char buf[BUFFER_SIZE];\n\n    while (1) {\n        bzero(buf, sizeof(buf));\n        if (read(connfd, buf, BUFFER_SIZE) == 0) {\n            printf(&quot;client quit&quot;);\n            break;\n        }\n        printf(&quot;Receive: %s&quot;, buf);\n\n        char send_line[MAXLINE];\n        sprintf(send_line, &quot;Hi, %s&quot;, buf);\n\n        int nbytes = sizeof(send_line);\n\n        if (write(connfd, send_line, nbytes) != nbytes)\n            error(1, errno, &quot;write error&quot;);\n    }\n\n    close(listenfd);\n    close(connfd);\n\n    exit(0);\n\n}\n</code></pre><p>æˆ‘å¯¹è¿™ä¸ªç¨‹åºåšä¸€ä¸ªè¯¦ç»†çš„è§£é‡Šï¼š</p><ul>\n<li>ç¬¬12ï½15è¡Œéå¸¸å…³é”®ï¼Œ<strong>è¿™é‡Œåˆ›å»ºçš„å¥—æ¥å­—ç±»å‹ï¼Œæ³¨æ„æ˜¯AF_LOCALï¼Œå¹¶ä¸”ä½¿ç”¨å­—èŠ‚æµæ ¼å¼</strong>ã€‚ä½ ç°åœ¨å¯ä»¥å›å¿†ä¸€ä¸‹ï¼ŒTCPçš„ç±»å‹æ˜¯AF_INETå’Œå­—èŠ‚æµç±»å‹ï¼›UDPçš„ç±»å‹æ˜¯AF_INETå’Œæ•°æ®æŠ¥ç±»å‹ã€‚åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æåˆ°AF_UNIXä¹Ÿæ˜¯å¯ä»¥çš„ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è®¤ä¸ºå’ŒAF_LOCALæ˜¯ç­‰ä»·çš„ã€‚</li>\n<li>ç¬¬17ï½21è¡Œåˆ›å»ºäº†ä¸€ä¸ªæœ¬åœ°åœ°å€ï¼Œè¿™é‡Œçš„æœ¬åœ°åœ°å€å’ŒIPv4ã€IPv6åœ°å€å¯ä»¥å¯¹åº”ï¼Œæ•°æ®ç±»å‹ä¸ºsockaddr_unï¼Œè¿™ä¸ªæ•°æ®ç±»å‹ä¸­çš„sun_familyéœ€è¦å¡«å†™ä¸ºAF_LOCALï¼Œæœ€ä¸ºå…³é”®çš„æ˜¯éœ€è¦å¯¹sun_pathè®¾ç½®ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚æˆ‘ä»¬è¿™é‡Œè¿˜åšäº†ä¸€ä¸ªunlinkæ“ä½œï¼Œä»¥ä¾¿æŠŠå­˜åœ¨çš„æ–‡ä»¶åˆ é™¤æ‰ï¼Œè¿™æ ·å¯ä»¥ä¿æŒå¹‚ç­‰æ€§ã€‚</li>\n<li>ç¬¬23ï½29è¡Œï¼Œåˆ†åˆ«æ‰§è¡Œbindå’Œlistenæ“ä½œï¼Œè¿™æ ·å°±ç›‘å¬åœ¨ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶è·¯å¾„æ ‡è¯†çš„å¥—æ¥å­—ä¸Šï¼Œè¿™å’Œæ™®é€šçš„TCPæœåŠ¡ç«¯ç¨‹åºæ²¡ä»€ä¹ˆåŒºåˆ«ã€‚</li>\n<li>ç¬¬41ï½56è¡Œï¼Œä½¿ç”¨readå’Œwriteå‡½æ•°ä»å¥—æ¥å­—ä¸­æŒ‰ç…§å­—èŠ‚æµçš„æ–¹å¼è¯»å–å’Œå‘é€æ•°æ®ã€‚</li>\n</ul><p>æˆ‘åœ¨è¿™é‡Œç€é‡å¼ºè°ƒä¸€ä¸‹æœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚å…³äºæœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œéœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œå®ƒå¿…é¡»æ˜¯â€œç»å¯¹è·¯å¾„â€ï¼Œè¿™æ ·çš„è¯ï¼Œç¼–å†™å¥½çš„ç¨‹åºå¯ä»¥åœ¨ä»»ä½•ç›®å½•é‡Œè¢«å¯åŠ¨å’Œç®¡ç†ã€‚å¦‚æœæ˜¯â€œç›¸å¯¹è·¯å¾„â€ï¼Œä¸ºäº†ä¿æŒåŒæ ·çš„ç›®çš„ï¼Œè¿™ä¸ªç¨‹åºçš„å¯åŠ¨è·¯å¾„å°±å¿…é¡»å›ºå®šï¼Œè¿™æ ·ä¸€æ¥ï¼Œå¯¹ç¨‹åºçš„ç®¡ç†åè€Œæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„è´Ÿæ‹…ã€‚</p><p>å¦å¤–è¿˜è¦æ˜ç¡®ä¸€ç‚¹ï¼Œè¿™ä¸ªæœ¬åœ°æ–‡ä»¶ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªâ€œæ–‡ä»¶â€ï¼Œä¸èƒ½æ˜¯ä¸€ä¸ªâ€œç›®å½•â€ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåé¢bindæ“ä½œæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ã€‚</p><p>è¿˜æœ‰ä¸€ç‚¹éœ€è¦ç‰¢è®°ï¼Œåœ¨Linuxä¸‹ï¼Œä»»ä½•æ–‡ä»¶æ“ä½œéƒ½æœ‰æƒé™çš„æ¦‚å¿µï¼Œåº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ä¹Ÿæœ‰åº”ç”¨å±ä¸»ã€‚å¦‚æœå½“å‰å¯åŠ¨ç¨‹åºçš„ç”¨æˆ·æƒé™ä¸èƒ½åˆ›å»ºæ–‡ä»¶ï¼Œä½ çŒœçŒœä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿè¿™é‡Œæˆ‘å…ˆå–ä¸ªå…³å­ï¼Œä¸€ä¼šæ¼”ç¤ºçš„æ—¶å€™ä½ å°±ä¼šçœ‹åˆ°ç»“æœã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å†çœ‹ä¸€ä¸‹å®¢æˆ·ç«¯ç¨‹åºã€‚</p><pre><code>#include &quot;lib/common.h&quot;\n\nint main(int argc, char **argv) {\n    if (argc != 2) {\n        error(1, 0, &quot;usage: unixstreamclient &lt;local_path&gt;&quot;);\n    }\n\n    int sockfd;\n    struct sockaddr_un servaddr;\n\n    sockfd = socket(AF_LOCAL, SOCK_STREAM, 0);\n    if (sockfd &lt; 0) {\n        error(1, errno, &quot;create socket failed&quot;);\n    }\n\n    bzero(&amp;servaddr, sizeof(servaddr));\n    servaddr.sun_family = AF_LOCAL;\n    strcpy(servaddr.sun_path, argv[1]);\n\n    if (connect(sockfd, (struct sockaddr *) &amp;servaddr, sizeof(servaddr)) &lt; 0) {\n        error(1, errno, &quot;connect failed&quot;);\n    }\n\n    char send_line[MAXLINE];\n    bzero(send_line, MAXLINE);\n    char recv_line[MAXLINE];\n\n    while (fgets(send_line, MAXLINE, stdin) != NULL) {\n\n        int nbytes = sizeof(send_line);\n        if (write(sockfd, send_line, nbytes) != nbytes)\n            error(1, errno, &quot;write error&quot;);\n\n        if (read(sockfd, recv_line, MAXLINE) == 0)\n            error(1, errno, &quot;server terminated prematurely&quot;);\n\n        fputs(recv_line, stdout);\n    }\n\n    exit(0);\n}\n</code></pre><p>ä¸‹é¢æˆ‘å¸¦å¤§å®¶ç†è§£ä¸€ä¸‹è¿™ä¸ªå®¢æˆ·ç«¯ç¨‹åºã€‚</p><ul>\n<li>11ï½14è¡Œåˆ›å»ºäº†ä¸€ä¸ªæœ¬åœ°å¥—æ¥å­—ï¼Œå’Œå‰é¢æœåŠ¡å™¨ç«¯ç¨‹åºä¸€æ ·ï¼Œç”¨çš„ä¹Ÿæ˜¯å­—èŠ‚æµç±»å‹SOCK_STREAMã€‚</li>\n<li>16ï½18è¡Œåˆå§‹åŒ–ç›®æ ‡æœåŠ¡å™¨ç«¯çš„åœ°å€ã€‚æˆ‘ä»¬çŸ¥é“åœ¨TCPç¼–ç¨‹ä¸­ï¼Œä½¿ç”¨çš„æ˜¯æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£ä½œä¸ºç›®æ ‡ï¼Œåœ¨æœ¬åœ°å¥—æ¥å­—ä¸­åˆ™ä½¿ç”¨æ–‡ä»¶è·¯å¾„ä½œä¸ºç›®æ ‡æ ‡è¯†ï¼Œsun_pathè¿™ä¸ªå­—æ®µæ ‡è¯†çš„æ˜¯ç›®æ ‡æ–‡ä»¶è·¯å¾„ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦å¯¹sun_pathè¿›è¡Œåˆå§‹åŒ–ã€‚</li>\n<li>20è¡Œå’ŒTCPå®¢æˆ·ç«¯ä¸€æ ·ï¼Œå‘èµ·å¯¹ç›®æ ‡å¥—æ¥å­—çš„connectè°ƒç”¨ï¼Œä¸è¿‡ç”±äºæ˜¯æœ¬åœ°å¥—æ¥å­—ï¼Œå¹¶ä¸ä¼šæœ‰ä¸‰æ¬¡æ¡æ‰‹ã€‚</li>\n<li>28ï½38è¡Œä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–å­—ç¬¦ä¸²ï¼Œå‘æœåŠ¡å™¨ç«¯å‘é€ï¼Œä¹‹åå°†æœåŠ¡å™¨ç«¯ä¼ è¾“è¿‡æ¥çš„å­—ç¬¦æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºä¸Šã€‚</li>\n</ul><p>æ€»ä½“ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°å­—èŠ‚æµå¥—æ¥å­—å’ŒTCPæœåŠ¡å™¨ç«¯ã€å®¢æˆ·ç«¯ç¼–ç¨‹æœ€å¤§çš„å·®å¼‚å°±æ˜¯å¥—æ¥å­—ç±»å‹çš„ä¸åŒã€‚æœ¬åœ°å­—èŠ‚æµå¥—æ¥å­—è¯†åˆ«æœåŠ¡å™¨ä¸å†é€šè¿‡IPåœ°å€å’Œç«¯å£ï¼Œè€Œæ˜¯é€šè¿‡æœ¬åœ°æ–‡ä»¶ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¿è¡Œè¿™ä¸ªç¨‹åºæ¥åŠ æ·±å¯¹æ­¤çš„ç†è§£ã€‚</p><h3>åªå¯åŠ¨å®¢æˆ·ç«¯</h3><p>ç¬¬ä¸€ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬åªå¯åŠ¨å®¢æˆ·ç«¯ç¨‹åºï¼š</p><pre><code>$ ./unixstreamclient /tmp/unixstream.sock\nconnect failed: No such file or directory (2)\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œç”±äºæ²¡æœ‰å¯åŠ¨æœåŠ¡å™¨ç«¯ï¼Œæ²¡æœ‰ä¸€ä¸ªæœ¬åœ°å¥—æ¥å­—åœ¨/tmp/unixstream.sockè¿™ä¸ªæ–‡ä»¶ä¸Šç›‘å¬ï¼Œå®¢æˆ·ç«¯ç›´æ¥æŠ¥é”™ï¼Œæç¤ºæˆ‘ä»¬æ²¡æœ‰æ–‡ä»¶å­˜åœ¨ã€‚</p><h3>æœåŠ¡å™¨ç«¯ç›‘å¬åœ¨æ— æƒé™çš„æ–‡ä»¶è·¯å¾„ä¸Š</h3><p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨å‰é¢å–çš„å…³å­å—ï¼Ÿåœ¨Linuxä¸‹ï¼Œæ‰§è¡Œä»»ä½•åº”ç”¨ç¨‹åºéƒ½æœ‰åº”ç”¨å±ä¸»çš„æ¦‚å¿µã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è®©æœåŠ¡å™¨ç«¯ç¨‹åºçš„åº”ç”¨å±ä¸»æ²¡æœ‰/var/lib/ç›®å½•çš„æƒé™ï¼Œç„¶åè¯•ç€å¯åŠ¨ä¸€ä¸‹è¿™ä¸ªæœåŠ¡å™¨ç¨‹åº ï¼š</p><pre><code>$ ./unixstreamserver /var/lib/unixstream.sock\nbind failed: Permission denied (13)\n</code></pre><p>è¿™ä¸ªç»“æœå‘Šè¯‰æˆ‘ä»¬å¯åŠ¨æœåŠ¡å™¨ç«¯ç¨‹åºçš„ç”¨æˆ·ï¼Œå¿…é¡»å¯¹æœ¬åœ°ç›‘å¬è·¯å¾„æœ‰æƒé™ã€‚è¿™ä¸ªç»“æœå’Œä½ æœŸæœ›çš„ä¸€è‡´å—ï¼Ÿ</p><p>è¯•ä¸€ä¸‹rootç”¨æˆ·å¯åŠ¨è¯¥ç¨‹åºï¼š</p><pre><code>sudo ./unixstreamserver /var/lib/unixstream.sock\n(é˜»å¡è¿è¡Œä¸­)\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒæœåŠ¡å™¨ç«¯ç¨‹åºæ­£å¸¸è¿è¡Œäº†ã€‚</p><p>æ‰“å¼€å¦å¤–ä¸€ä¸ªshellï¼Œæˆ‘ä»¬çœ‹åˆ°/var/libä¸‹åˆ›å»ºäº†ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ï¼Œå¤§å°ä¸º0ï¼Œè€Œä¸”æ–‡ä»¶çš„æœ€åç»“å°¾æœ‰ä¸€ä¸ªï¼ˆ=ï¼‰å·ã€‚å…¶å®è¿™å°±æ˜¯bindçš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºå‡ºæ¥çš„æ–‡ä»¶ã€‚</p><pre><code>$ ls -al /var/lib/unixstream.sock\nrwxr-xr-x 1 root root 0 Jul 15 12:41 /var/lib/unixstream.sock=\n</code></pre><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨netstatå‘½ä»¤æŸ¥çœ‹UNIXåŸŸå¥—æ¥å­—ï¼Œå°±ä¼šå‘ç°unixstreamserverè¿™ä¸ªè¿›ç¨‹ï¼Œç›‘å¬åœ¨/var/lib/unixstream.sockè¿™ä¸ªæ–‡ä»¶è·¯å¾„ä¸Šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/58/b1/58d259d15b7012645d168a9c5d9f3fb1.jpg?wh=2369*334\" alt=\"\"><br>\nçœ‹çœ‹ï¼Œå¾ˆç®€å•å§ï¼Œæˆ‘ä»¬å†™çš„ç¨‹åºå’Œé¼é¼å¤§åçš„Kubernetesè¿è¡Œåœ¨åŒä¸€æœºå™¨ä¸Šï¼ŒåŸç†å’Œè¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚</p><h3>æœåŠ¡å™¨-å®¢æˆ·ç«¯åº”ç­”</h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬è®©æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½æ­£å¸¸å¯åŠ¨ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ä¾æ¬¡å‘é€å­—ç¬¦ï¼š</p><pre><code>$./unixstreamserver /tmp/unixstream.sock\nReceive: g1\nReceive: g2\nReceive: g3\nclient quit\n</code></pre><pre><code>$./unixstreamclient /tmp/unixstream.sock\ng1\nHi, g1\ng2\nHi, g2\ng3\nHi, g3\n^C\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨ç«¯é™†ç»­æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„å­—èŠ‚ï¼ŒåŒæ—¶ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ”¶åˆ°äº†æœåŠ¡å™¨ç«¯çš„åº”ç­”ï¼›æœ€åï¼Œå½“æˆ‘ä»¬ä½¿ç”¨Ctrl+Cï¼Œè®©å®¢æˆ·ç«¯ç¨‹åºé€€å‡ºæ—¶ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿæ­£å¸¸é€€å‡ºã€‚</p><h2>æœ¬åœ°æ•°æ®æŠ¥å¥—æ¥å­—</h2><p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹åœ¨æœ¬åœ°å¥—æ¥å­—ä¸Šä½¿ç”¨æ•°æ®æŠ¥çš„æœåŠ¡å™¨ç«¯ä¾‹å­ï¼š</p><pre><code>#include  &quot;lib/common.h&quot;\n\nint main(int argc, char **argv) {\n    if (argc != 2) {\n        error(1, 0, &quot;usage: unixdataserver &lt;local_path&gt;&quot;);\n    }\n\n    int socket_fd;\n    socket_fd = socket(AF_LOCAL, SOCK_DGRAM, 0);\n    if (socket_fd &lt; 0) {\n        error(1, errno, &quot;socket create failed&quot;);\n    }\n\n    struct sockaddr_un servaddr;\n    char *local_path = argv[1];\n    unlink(local_path);\n    bzero(&amp;servaddr, sizeof(servaddr));\n    servaddr.sun_family = AF_LOCAL;\n    strcpy(servaddr.sun_path, local_path);\n\n    if (bind(socket_fd, (struct sockaddr *) &amp;servaddr, sizeof(servaddr)) &lt; 0) {\n        error(1, errno, &quot;bind failed&quot;);\n    }\n\n    char buf[BUFFER_SIZE];\n    struct sockaddr_un client_addr;\n    socklen_t client_len = sizeof(client_addr);\n    while (1) {\n        bzero(buf, sizeof(buf));\n        if (recvfrom(socket_fd, buf, BUFFER_SIZE, 0, (struct sockadd *) &amp;client_addr, &amp;client_len) == 0) {\n            printf(&quot;client quit&quot;);\n            break;\n        }\n        printf(&quot;Receive: %s \\n&quot;, buf);\n\n        char send_line[MAXLINE];\n        bzero(send_line, MAXLINE);\n        sprintf(send_line, &quot;Hi, %s&quot;, buf);\n\n        size_t nbytes = strlen(send_line);\n        printf(&quot;now sending: %s \\n&quot;, send_line);\n\n        if (sendto(socket_fd, send_line, nbytes, 0, (struct sockadd *) &amp;client_addr, client_len) != nbytes)\n            error(1, errno, &quot;sendto error&quot;);\n    }\n\n    close(socket_fd);\n\n    exit(0);\n}\n</code></pre><p>æœ¬åœ°æ•°æ®æŠ¥å¥—æ¥å­—å’Œå‰é¢çš„å­—èŠ‚æµæœ¬åœ°å¥—æ¥å­—æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒï¼š</p><ul>\n<li>ç¬¬9è¡Œåˆ›å»ºçš„æœ¬åœ°å¥—æ¥å­—ï¼Œ<strong>è¿™é‡Œåˆ›å»ºçš„å¥—æ¥å­—ç±»å‹ï¼Œæ³¨æ„æ˜¯AF_LOCAL</strong>ï¼Œåè®®ç±»å‹ä¸ºSOCK_DGRAMã€‚</li>\n<li>21ï½23è¡Œbindåˆ°æœ¬åœ°åœ°å€ä¹‹åï¼Œæ²¡æœ‰å†è°ƒç”¨listenå’Œacceptï¼Œå›å¿†ä¸€ä¸‹ï¼Œè¿™å…¶å®å’ŒUDPçš„æ€§è´¨ä¸€æ ·ã€‚</li>\n<li>28ï½45è¡Œä½¿ç”¨recvfromå’Œsendtoæ¥è¿›è¡Œæ•°æ®æŠ¥çš„æ”¶å‘ï¼Œä¸å†æ˜¯readå’Œsendï¼Œè¿™å…¶å®ä¹Ÿå’ŒUDPç½‘ç»œç¨‹åºä¸€è‡´ã€‚</li>\n</ul><p>ç„¶åæˆ‘ä»¬å†çœ‹ä¸€ä¸‹å®¢æˆ·ç«¯çš„ä¾‹å­ï¼š</p><pre><code>#include &quot;lib/common.h&quot;\n\nint main(int argc, char **argv) {\n    if (argc != 2) {\n        error(1, 0, &quot;usage: unixdataclient &lt;local_path&gt;&quot;);\n    }\n\n    int sockfd;\n    struct sockaddr_un client_addr, server_addr;\n\n    sockfd = socket(AF_LOCAL, SOCK_DGRAM, 0);\n    if (sockfd &lt; 0) {\n        error(1, errno, &quot;create socket failed&quot;);\n    }\n\n    bzero(&amp;client_addr, sizeof(client_addr));        /* bind an address for us */\n    client_addr.sun_family = AF_LOCAL;\n    strcpy(client_addr.sun_path, tmpnam(NULL));\n\n    if (bind(sockfd, (struct sockaddr *) &amp;client_addr, sizeof(client_addr)) &lt; 0) {\n        error(1, errno, &quot;bind failed&quot;);\n    }\n\n    bzero(&amp;server_addr, sizeof(server_addr));\n    server_addr.sun_family = AF_LOCAL;\n    strcpy(server_addr.sun_path, argv[1]);\n\n    char send_line[MAXLINE];\n    bzero(send_line, MAXLINE);\n    char recv_line[MAXLINE];\n\n    while (fgets(send_line, MAXLINE, stdin) != NULL) {\n        int i = strlen(send_line);\n        if (send_line[i - 1] == '\\n') {\n            send_line[i - 1] = 0;\n        }\n        size_t nbytes = strlen(send_line);\n        printf(&quot;now sending %s \\n&quot;, send_line);\n\n        if (sendto(sockfd, send_line, nbytes, 0, (struct sockaddr *) &amp;server_addr, sizeof(server_addr)) != nbytes)\n            error(1, errno, &quot;sendto error&quot;);\n\n        int n = recvfrom(sockfd, recv_line, MAXLINE, 0, NULL, NULL);\n        recv_line[n] = 0;\n\n        fputs(recv_line, stdout);\n        fputs(&quot;\\n&quot;, stdout);\n    }\n\n    exit(0);\n}\n</code></pre><p>è¿™ä¸ªç¨‹åºå’ŒUDPç½‘ç»œç¼–ç¨‹çš„ä¾‹å­åŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“ä½œæ˜¯ç”¨æœ¬åœ°æ–‡ä»¶æ›¿æ¢äº†IPåœ°å€å’Œç«¯å£çš„UDPç¨‹åºï¼Œä¸è¿‡ï¼Œè¿™é‡Œè¿˜æ˜¯æœ‰ä¸€ä¸ªéå¸¸å¤§çš„ä¸åŒçš„ã€‚</p><p>è¿™ä¸ªä¸åŒç‚¹å°±åœ¨16ï½22è¡Œã€‚ä½ å¯ä»¥çœ‹åˆ°16ï½22è¡Œå°†æœ¬åœ°å¥—æ¥å­—bindåˆ°æœ¬åœ°ä¸€ä¸ªè·¯å¾„ä¸Šï¼Œç„¶è€ŒUDPå®¢æˆ·ç«¯ç¨‹åºæ˜¯ä¸éœ€è¦è¿™ä¹ˆåšçš„ã€‚æœ¬åœ°æ•°æ®æŠ¥å¥—æ¥å­—è¿™ä¹ˆåšçš„åŸå› æ˜¯ï¼Œå®ƒéœ€è¦æŒ‡å®šä¸€ä¸ªæœ¬åœ°è·¯å¾„ï¼Œä»¥ä¾¿åœ¨æœåŠ¡å™¨ç«¯å›åŒ…æ—¶ï¼Œå¯ä»¥æ­£ç¡®åœ°æ‰¾åˆ°åœ°å€ï¼›è€Œåœ¨UDPå®¢æˆ·ç«¯ç¨‹åºé‡Œï¼Œæ•°æ®æ˜¯å¯ä»¥é€šè¿‡UDPåŒ…çš„æœ¬åœ°åœ°å€å’Œç«¯å£æ¥åŒ¹é…çš„ã€‚</p><p>ä¸‹é¢è¿™æ®µä»£ç å°±å±•ç¤ºäº†æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯é€šè¿‡æ•°æ®æŠ¥åº”ç­”çš„åœºæ™¯ï¼š</p><pre><code> ./unixdataserver /tmp/unixdata.sock\nReceive: g1\nnow sending: Hi, g1\nReceive: g2\nnow sending: Hi, g2\nReceive: g3\nnow sending: Hi, g3\n</code></pre><pre><code>$ ./unixdataclient /tmp/unixdata.sock\ng1\nnow sending g1\nHi, g1\ng2\nnow sending g2\nHi, g2\ng3\nnow sending g3\nHi, g3\n^C\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨ç«¯é™†ç»­æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®æŠ¥ï¼ŒåŒæ—¶ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ”¶åˆ°äº†æœåŠ¡å™¨ç«¯çš„åº”ç­”ã€‚</p><h2>æ€»ç»“</h2><p>æˆ‘åœ¨å¼€å¤´å·²ç»è¯´è¿‡ï¼Œæœ¬åœ°å¥—æ¥å­—ä½œä¸ºå¸¸ç”¨çš„è¿›ç¨‹é—´é€šä¿¡æŠ€æœ¯ï¼Œè¢«ç”¨äºå„ç§é€‚ç”¨äºåœ¨åŒä¸€å°ä¸»æœºä¸Šè¿›ç¨‹é—´é€šä¿¡çš„åœºæ™¯ã€‚å…³äºæœ¬åœ°å¥—æ¥å­—ï¼Œæˆ‘ä»¬éœ€è¦ç‰¢è®°ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul>\n<li>æœ¬åœ°å¥—æ¥å­—çš„ç¼–ç¨‹æ¥å£å’ŒIPv4ã€IPv6å¥—æ¥å­—ç¼–ç¨‹æ¥å£æ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥æ”¯æŒå­—èŠ‚æµå’Œæ•°æ®æŠ¥ä¸¤ç§åè®®ã€‚</li>\n<li>æœ¬åœ°å¥—æ¥å­—çš„å®ç°æ•ˆç‡å¤§å¤§é«˜äºIPv4å’ŒIPv6çš„å­—èŠ‚æµã€æ•°æ®æŠ¥å¥—æ¥å­—å®ç°ã€‚</li>\n</ul><h2>æ€è€ƒé¢˜</h2><p>è®²å®Œæœ¬åœ°å¥—æ¥å­—ä¹‹åï¼Œæˆ‘ç»™ä½ ç•™å‡ é“æ€è€ƒé¢˜ã€‚</p><ol>\n<li>åœ¨æœ¬åœ°å¥—æ¥å­—å­—èŠ‚æµç±»å‹çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®©æœåŠ¡å™¨ç«¯ä»¥rootè´¦å·å¯åŠ¨ï¼Œç›‘å¬åœ¨/var/lib/unixstream.sockè¿™ä¸ªæ–‡ä»¶ä¸Šã€‚å¦‚æœæˆ‘ä»¬è®©å®¢æˆ·ç«¯ä»¥æ™®é€šç”¨æˆ·æƒé™å¯åŠ¨ï¼Œå®¢æˆ·ç«¯å¯ä»¥è¿æ¥ä¸Š/var/lib/unixstream.sockå—ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</li>\n<li>æˆ‘ä»¬çœ‹åˆ°å®¢æˆ·ç«¯è¢«æ€æ­»åï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿæ­£å¸¸é€€å‡ºäº†ã€‚çœ‹ä¸‹é€€å‡ºåæ‰“å°çš„æ—¥å¿—ï¼Œä½ ä¸å¦¨åˆ¤æ–­ä¸€ä¸‹å¼•èµ·æœåŠ¡å™¨ç«¯æ­£å¸¸é€€å‡ºçš„é€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡è¿™æ ·ä¸€ä¸ªå¥‡æ€ªçš„åœºæ™¯ï¼šå¦‚æœè‡ªå·±ä¸å°å¿ƒå†™é”™äº†ä»£ç ï¼Œæœ¬åœ°å¥—æ¥å­—æœåŠ¡å™¨ç«¯æ˜¯SOCK_DGRAMï¼Œå®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯SOCK_STREAMï¼Œè·¯å¾„å’Œå…¶ä»–éƒ½æ˜¯æ­£ç¡®çš„ï¼Œä½ è§‰å¾—ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„æ€è€ƒï¼Œæˆ‘ä¼šå’Œä½ ä¸€èµ·äº¤æµè¿™äº›é—®é¢˜ã€‚å¦‚æœè¿™ç¯‡æ–‡ç« å¸®ä½ å¼„æ‡‚äº†æœ¬åœ°å¥—æ¥å­—ï¼Œä¸å¦¨æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸€èµ·äº¤æµä¸€ä¸‹å®ƒå§ï¼</p>","comments":[{"had_liked":false,"id":147066,"user_name":"supermouse","can_delete":false,"product_type":"c1","uid":1321860,"ip_address":"","ucode":"88072D5F881827","user_header":"https://static001.geekbang.org/account/avatar/00/14/2b/84/07f0c0d6.jpg","comment_is_top":false,"comment_ctime":1572784586,"is_pvip":false,"replies":[{"id":"57472","content":"çœ‹æ ·å­ä½ éƒ½å°è¯•äº†ï¼Œå®è·µå‡ºçœŸçŸ¥ï¼Œèµ","user_name":"ä½œè€…å›å¤","comment_id":147066,"uid":"1618647","ip_address":"","utype":1,"ctime":1573281288,"user_name_real":"froghui"}],"discussion_count":5,"race_medal":0,"score":"349465135562","product_id":100032701,"comment_content":"é—®é¢˜ä¸€ï¼šè¿æ¥ä¸ä¸Šã€‚é”™è¯¯æç¤ºæ˜¯â€œPermission deniedâ€<br><br>é—®é¢˜äºŒï¼šåœ¨æœåŠ¡ç«¯çš„ä»£ç ä¸­ï¼Œå¯¹æ”¶åˆ°çš„å®¢æˆ·ç«¯å‘é€çš„æ•°æ®é•¿åº¦åšäº†åˆ¤æ–­ï¼Œå¦‚æœé•¿åº¦ä¸º0ï¼Œåˆ™ä¸»åŠ¨å…³é—­æœåŠ¡ç«¯ç¨‹åºã€‚è¿™æ˜¯æ€æ­»å®¢æˆ·ç«¯åå¼•å‘æœåŠ¡ç«¯å…³é—­çš„åŸå› ã€‚è¿™ä¹Ÿè¯´æ˜å®¢æˆ·ç«¯åœ¨è¢«å¼ºè¡Œç»ˆæ­¢çš„æ—¶å€™ï¼Œä¼šæœ€åå‘æœåŠ¡ç«¯å‘é€ä¸€æ¡ç©ºæ¶ˆæ¯ï¼Œå‘ŠçŸ¥æœåŠ¡å™¨è‡ªå·±è¿™è¾¹çš„ç¨‹åºå…³é—­äº†ã€‚<br><br>é—®é¢˜ä¸‰ï¼šå®¢æˆ·ç«¯åœ¨è¿æ¥æ—¶ä¼šæŠ¥é”™ï¼Œé”™è¯¯æç¤ºæ˜¯â€œProtocol wrong type for socket (91)â€","like_count":81,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473125,"discussion_content":"çœ‹æ ·å­ä½ éƒ½å°è¯•äº†ï¼Œå®è·µå‡ºçœŸçŸ¥ï¼Œèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573281288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027840,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","nickname":"skye","note":"","ucode":"C55C9F52C78A00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":101238,"discussion_content":"å®¢æˆ·ç«¯ä¸ä¼šå‘é€ç©ºæ¶ˆæ¯å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577285732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1130666,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/aa/49bbb007.jpg","nickname":"Ğ½Ã¡Ğ¿ã®ã‚›","note":"","ucode":"834FA877EFBAF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1027840,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","nickname":"skye","note":"","ucode":"C55C9F52C78A00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299529,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—æ²¡æœ‰ç©ºæ¶ˆæ¯ï¼Œå°±æ˜¯æ¥æ”¶ä¸åˆ°æ•°æ®é•¿åº¦å°±ä¸º0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597722952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":101238,"ip_address":""},"score":299529,"extra":""}]},{"author":{"id":1605506,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/M1ia9VKiaibL7pLhSvUvLGvkgr6x3SbYNnk4u5zhtgY0cmmhTiad2Is3YraBN7OlLvkoia2iav4hsY8Asjb9R2rGZ3tg/132","nickname":"Geek_e0ff03","note":"","ucode":"477AE2D92BD358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":71751,"discussion_content":"æœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¦‚æœåœ¨killçš„æ—¶å€™ä½¿ç”¨-9ï¼Œç»“æœä¼šæ€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575455955,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2239839,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/u1Zr9yTrTibSWicFFophCK9KvSkt5ETLfxoL4eejFoPOZJTYorjibK3y0s4odHmUphHwcrHtDfYiag4bId4Cr6zfuw/132","nickname":"solk","note":"","ucode":"7246DBAED4ABB5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1605506,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/M1ia9VKiaibL7pLhSvUvLGvkgr6x3SbYNnk4u5zhtgY0cmmhTiad2Is3YraBN7OlLvkoia2iav4hsY8Asjb9R2rGZ3tg/132","nickname":"Geek_e0ff03","note":"","ucode":"477AE2D92BD358","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587774,"discussion_content":"çœ‹ä½ killçš„æ˜¯è°ï¼Œå¦‚æœkillå®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯åŒæ ·ä¼šæ”¶åˆ°finæ¶ˆæ¯ï¼Œè¿™ä¸ªæ˜¯å†…æ ¸å±‚å‘çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663290008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":71751,"ip_address":"ä¸Šæµ·"},"score":587774,"extra":""}]}]},{"had_liked":false,"id":142165,"user_name":"GeekAmI","can_delete":false,"product_type":"c1","uid":1005030,"ip_address":"","ucode":"232C0B6DFB9F56","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/e6/87197b10.jpg","comment_is_top":false,"comment_ctime":1571302760,"is_pvip":false,"replies":[{"id":"55118","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":142165,"uid":"1618647","ip_address":"","utype":1,"ctime":1571456956,"user_name_real":"froghui"}],"discussion_count":2,"race_medal":0,"score":"87470648680","product_id":100032701,"comment_content":"é—®é¢˜1ï¼š<br>$ sudo .&#47;unixstreamserver &#47;var&#47;lib&#47;unixstream.sock<br><br>$ .&#47;unixstreamclient &#47;var&#47;lib&#47;unixstream.sock<br>connect failed: Permission denied (13)<br><br>é—®é¢˜2ï¼š<br>client: Ctrl + C -&gt; exit(0) -&gt; å‘é€FINåŒ…ï¼›<br>server:æ»¡è¶³æ¡ä»¶read(connfd, buf, BUFFER_SIZE) == 0ï¼Œç»“æŸã€‚<br><br>é—®é¢˜3ï¼š<br>$ .&#47;unixdataserver &#47;tmp&#47;unixdata.sock<br><br>$ .&#47;unixstreamclient &#47;tmp&#47;unixdata.sock<br>connect failed: Protocol wrong type for socket (41)","like_count":20,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471014,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571456956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512599,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/88nXicqmkJWm3IXVfPfGQSk8SKIBVKjuC4qhzaCkf5Ud88uvKgS4Vf5AzCJ1uaFO0gpPnxdh4CowfhpxV1kSbXw/132","nickname":"lixin","note":"","ucode":"94D99DAFB6C929","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584384,"discussion_content":"è¿˜æ˜¯è¦èµ°åè®®æ ˆå‘¢ã€‚è¿˜æ˜¯è¦æ”¶åˆ°finåŒ…å•¥çš„å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660797644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229829,"user_name":"è¡¬è¡«çš„ä»·æ ¼æ˜¯19ç¾å…ƒ","can_delete":false,"product_type":"c1","uid":1397631,"ip_address":"","ucode":"655F925451F772","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVUskibDnhMt5MCIJ8227HWkeg2wEEyewps8GuWhWaY5fy7Ya56bu2ktMlxdla3K29Wqia9efCkWaQ/132","comment_is_top":false,"comment_ctime":1593158393,"is_pvip":false,"replies":[{"id":"84808","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":229829,"uid":"1618647","ip_address":"","utype":1,"ctime":1593174111,"user_name_real":"froghui"}],"discussion_count":1,"race_medal":0,"score":"70312635129","product_id":100032701,"comment_content":"ä¸ºä»€ä¹ˆAF_LOCAL+DGRAMçš„æ—¶å€™,å®¢æˆ·ç«¯éœ€è¦bindä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ï¼Ÿ<br>å› ä¸ºæœåŠ¡å™¨æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®æƒ³è¦ç»™å®¢æˆ·ç«¯å›å¤çš„æ—¶å€™ï¼Œéœ€è¦çŸ¥é“å‘ç»™è°ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨éƒ½æœ‰åŠæ³•ï¼š<br>1.å½“ä½¿ç”¨STREAMæ—¶ï¼Œä¸ç®¡æ˜¯AF_INETè¿˜æ˜¯AF_LOCAL, éƒ½æœ‰è¿æ¥çš„æ¦‚å¿µï¼Œæ‰€ä»¥æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨åŸæ¥çš„è¿æ¥<br>2.å½“ä½¿ç”¨AF_INETæ—¶ï¼Œä¸ç®¡æ˜¯DGRAMè¿˜æ˜¯STREAM, éƒ½èƒ½çŸ¥é“å¯¹æ–¹çš„ip+port, ä¹Ÿèƒ½ç¡®å®šä¸€ä¸ªå”¯ä¸€çš„è¿›ç¨‹<br>åªæœ‰AF_LOCAL+DGRAMçš„æ—¶å€™ï¼Œæ²¡æœ‰è¿æ¥ï¼Œä¹Ÿæ²¡æœ‰ip_+port,   åªèƒ½æ˜¾å¼çš„æŒ‡å®šä¸€ä¸ªæ ‡å¿—å‘Šè¯‰æœåŠ¡ç«¯<br>","like_count":16,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499660,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593174111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124875,"user_name":"Sylar.","can_delete":false,"product_type":"c1","uid":1007623,"ip_address":"","ucode":"CAE26E4C31C967","user_header":"https://static001.geekbang.org/account/avatar/00/0f/60/07/c2738be7.jpg","comment_is_top":false,"comment_ctime":1566006701,"is_pvip":false,"replies":[{"id":"45915","content":"ç­”ç–‘ç¯‡ç»Ÿä¸€å›å¤","user_name":"ä½œè€…å›å¤","comment_id":124875,"uid":"1618647","ip_address":"","utype":1,"ctime":1566128569,"user_name_real":"froghui"}],"discussion_count":1,"race_medal":0,"score":"27335810477","product_id":100032701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ–¹ä¾¿æŠŠå…¨éƒ¨ä»£ç æ”¾gitå—ï¼Œå› ä¸ºç¤ºä¾‹ç¼ºå°‘ä¾èµ–","like_count":6,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463344,"discussion_content":"ç­”ç–‘ç¯‡ç»Ÿä¸€å›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566128569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124588,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1565925320,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27335729096","product_id":100032701,"comment_content":"1.æ²¡æœ‰æƒé™ï¼ŒæŠ¥permission denyé”™è¯¯ã€‚<br>2.ä»£ç ä¸­æœ‰å†™ï¼š<br>if (read(connfd, buf, BUFFER_SIZE) == 0) {<br>            printf(&quot;client quit&quot;);<br>            break;<br>        }<br>3.å®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯ SOCK_STREAMã€‚çŒœæµ‹ä¼šå› ä¸ºä½¿ç”¨åè®®ä¸åŒï¼Œä¼šè¿æ¥ä¸ä¸Šï¼ŒæŠ¥é”™ã€‚","like_count":6,"discussions":[{"author":{"id":1593363,"avatar":"https://static001.geekbang.org/account/avatar/00/18/50/13/104d9501.jpg","nickname":"å¦ä¸€åŠæ£‰èŠ±ç³–","note":"","ucode":"C11266794FBA5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6150,"discussion_content":"ç¬¬ä¸‰ä¸ªï¼Œæœ¬åœ°å¥—æ¥å­—æ²¡æœ‰åè®®æ ˆå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566727423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129316,"user_name":"15652790052","can_delete":false,"product_type":"c1","uid":1274615,"ip_address":"","ucode":"8A15D673C16A8F","user_header":"","comment_is_top":false,"comment_ctime":1567086317,"is_pvip":false,"replies":[{"id":"48192","content":"1.æ²¡ä»€ä¹ˆå†…å®¹ï¼Œåªæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¦è¿å“ªä¸ªsockï¼›<br>2.æ²¡æœ‰ä»”ç»†ç ”è¯»è¿‡kernelçš„ä»£ç ï¼Œä¸è¿‡æˆ‘çŒœæ˜¯å¤§é‡å¤ç”¨äº†TCP&#47;IPå±‚çš„å…¬å…±å®ç°ï¼›<br>3.å› ä¸ºæ–‡ä»¶å·²ç»å‘Šè¯‰æˆ‘ä»¬è¿æ¥çš„ç›®æ ‡äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦ç«¯å£ã€‚","user_name":"ä½œè€…å›å¤","comment_id":129316,"uid":"1618647","ip_address":"","utype":1,"ctime":1567130680,"user_name_real":"froghui"}],"discussion_count":1,"race_medal":0,"score":"23041922797","product_id":100032701,"comment_content":"1.sockæ–‡ä»¶å…·ä½“å†…å®¹ä»€ä¹ˆå‘¢ï¼Œä¸ºä»€ä¹ˆéœ€è¦sockæ–‡ä»¶ï¼Ÿ<br>2.æœ¬åœ°å¥—æ¥å­—åº•å±‚æ—¶æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ<br>3.ä¸ºä»€ä¹ˆæ²¡æœ‰äº†ç«¯å£çš„æ¦‚å¿µï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465395,"discussion_content":"1.æ²¡ä»€ä¹ˆå†…å®¹ï¼Œåªæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¦è¿å“ªä¸ªsockï¼›\n2.æ²¡æœ‰ä»”ç»†ç ”è¯»è¿‡kernelçš„ä»£ç ï¼Œä¸è¿‡æˆ‘çŒœæ˜¯å¤§é‡å¤ç”¨äº†TCP/IPå±‚çš„å…¬å…±å®ç°ï¼›\n3.å› ä¸ºæ–‡ä»¶å·²ç»å‘Šè¯‰æˆ‘ä»¬è¿æ¥çš„ç›®æ ‡äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦ç«¯å£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567130680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125010,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1566043531,"is_pvip":true,"replies":[{"id":"45912","content":"æˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼Œæœ¬åœ°å¥—æ¥å­—æœ¬è´¨è¿˜æ˜¯è¿›ç¨‹é—´é€šä¿¡ï¼Œåªæ˜¯å€ŸåŠ©äº†å¥—æ¥å­—çš„ç¼–ç¨‹è¯­ä¹‰ï¼Œæ¯”å¦‚streamå’Œdatagramï¼Œæœ€ä¸‹é¢è‚¯å®šä¸èµ°IPåè®®çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":125010,"uid":"1618647","ip_address":"","utype":1,"ctime":1566128513,"user_name_real":"froghui"}],"discussion_count":5,"race_medal":0,"score":"18745912715","product_id":100032701,"comment_content":"æ–‡ç« ä¸­è¯´ TCP å’Œ UDP çš„scoket é€šè®¯ æ˜¯èµ°ç½‘ç»œåè®®çš„ï¼Œæœ¬åœ°socket é€šè®¯å‡å°‘äº†ç½‘ç»œåè®®çš„å®ç°ï¼Œæ˜¯è¯´æ˜æœ¬åœ°scoketé€šè®¯ä¸€ç‚¹éƒ½ä¸èµ°ç½‘ç»œåè®®å—ï¼Ÿ è¿˜æ˜¯ä¼šèµ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†ç½‘ç»œåè®®ï¼Ÿ <br><br>å¦‚æœæœ¬åœ° socket é€šè®¯ä¸èµ°ç½‘ç»œåè®®ï¼Œé‚£é€šè®¯çš„æ ‡å‡†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ åªæ˜¯å¯¹ socket æ–‡ä»¶çš„è¯»å†™æ“ä½œå—ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463399,"discussion_content":"æˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼Œæœ¬åœ°å¥—æ¥å­—æœ¬è´¨è¿˜æ˜¯è¿›ç¨‹é—´é€šä¿¡ï¼Œåªæ˜¯å€ŸåŠ©äº†å¥—æ¥å­—çš„ç¼–ç¨‹è¯­ä¹‰ï¼Œæ¯”å¦‚streamå’Œdatagramï¼Œæœ€ä¸‹é¢è‚¯å®šä¸èµ°IPåè®®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566128513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":573248,"discussion_content":"æ²¡æœ‰è¯´æ¸…æ¥š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653294538,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":463399,"ip_address":""},"score":573248,"extra":""}]},{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573318,"discussion_content":"åˆ°åº•èµ°æ²¡èµ°ä¼ è¾“å±‚ï¼Œæ¯”å¦‚TCPå’ŒUDPï¼Ÿå¸Œæœ›è€å¸ˆç»™ä¸€ä¸ªç­”æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653355404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027840,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","nickname":"skye","note":"","ucode":"C55C9F52C78A00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":101263,"discussion_content":"ä¸èµ°IPå±‚ï¼Œåº”è¯¥èµ°äº†TCPå±‚å§ï¼Œä¸ç„¶æ€ä¹ˆå®ç°TCPå’ŒUDPå‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577285915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1027840,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/af/00/9b49f42b.jpg","nickname":"skye","note":"","ucode":"C55C9F52C78A00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":101331,"discussion_content":"å¯¹çš„ï¼ŒTCPä¸‹å±‚ä¸ä¸€å®šæ˜¯TPå±‚ï¼Œä½¿ç”¨TCPæˆ–è€…UDPçš„è§„èŒƒï¼ŒæŠ¥æ–‡æ ¼å¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577286647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":101263,"ip_address":""},"score":101331,"extra":""}]}]},{"had_liked":false,"id":124770,"user_name":"yusuf","can_delete":false,"product_type":"c1","uid":1170784,"ip_address":"","ucode":"9F32149B2ADDA0","user_header":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","comment_is_top":false,"comment_ctime":1565968703,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14450870591","product_id":100032701,"comment_content":"1ã€ä¸èƒ½è¿æ¥ï¼Œéœ€è¦æƒé™æ‰èƒ½å¯¹sockæ–‡ä»¶è¿›è¡Œè¯»å†™<br>2ã€ä»£ç 30ï½33è¡Œï¼ŒæœåŠ¡å™¨è¯»åˆ°çš„æ•°æ®é•¿åº¦ä¸º0æ—¶ä¼šé€€å‡ºã€‚<br>3ã€è®¤ä¸ºä¼šå‡ºç°å¦‚ä¸‹ç°è±¡ï¼š<br>å¦‚æœæœåŠ¡å™¨å†™é”™äº†ï¼ŒæœåŠ¡å™¨ä¼šè¾“å‡ºlisten failedï¼Œå®¢æˆ·ç«¯ä¼šè¾“å‡ºconnect failedï¼›<br>å¦‚æœå®¢æˆ·ç«¯å†™é”™äº†ï¼ŒæœåŠ¡å™¨ä¼šè¾“å‡ºclient quitï¼Œå®¢æˆ·ç«¯ä¼šè¾“å‡ºsendto errorã€‚<br>","like_count":3,"discussions":[{"author":{"id":1170784,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","nickname":"yusuf","note":"","ucode":"9F32149B2ADDA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5211,"discussion_content":"å®é™…æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n1ã€å®¢æˆ·ç«¯ä¼šè¾“å‡ºï¼šconnect failed: Permission denied\n3ã€æœåŠ¡ç«¯å†™é”™æ—¶ï¼ŒæœåŠ¡å™¨è¾“å‡ºï¼šlisten failed: Operation not supportedï¼Œå®¢æˆ·ç«¯è¾“å‡ºï¼šconnect failed: Connection refused\nå®¢æˆ·ç«¯å†™é”™æ—¶ï¼ŒæœåŠ¡å™¨æ— è¾“å‡ºï¼Œä¸é€€å‡ºï¼Œå®¢æˆ·ç«¯åœ¨å‘é€â€œg1â€æ—¶è¾“å‡ºsendto error: Operation not supported\n\n","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1566054274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1111870,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK2Az5uTh9ZGVA7yQCj1BXtXuicPRkvJicA97AoN9xX3bnPcUYglTMXJeZeoVbPQeJA7ICvQhR3KQ0w/132","nickname":"æ—¥ä¸è½å¸å›½","note":"","ucode":"6A11ABBD8AC438","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1170784,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","nickname":"yusuf","note":"","ucode":"9F32149B2ADDA0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25103,"discussion_content":"å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570420057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5211,"ip_address":""},"score":25103,"extra":""}]}]},{"had_liked":false,"id":124502,"user_name":"åˆ˜ä¸¹","can_delete":false,"product_type":"c1","uid":1081922,"ip_address":"","ucode":"66594D1C957E15","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/42/8b04d489.jpg","comment_is_top":false,"comment_ctime":1565913638,"is_pvip":false,"replies":[{"id":"45924","content":"æœ¬åœ°å¥—æ¥å­—datagramå°±å¯ä»¥","user_name":"ä½œè€…å›å¤","comment_id":124502,"uid":"1618647","ip_address":"","utype":1,"ctime":1566129064,"user_name_real":"froghui"}],"discussion_count":2,"race_medal":0,"score":"14450815526","product_id":100032701,"comment_content":"è¯·é—®è€å¸ˆæœ¬åœ°å¥—æ¥å­—æ˜¯å¦æ”¯æŒä¸€å¯¹å¤šã€å¤šå¯¹å¤šé€šä¿¡ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463204,"discussion_content":"æœ¬åœ°å¥—æ¥å­—datagramå°±å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566129064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1149592,"avatar":"https://static001.geekbang.org/account/avatar/00/11/8a/98/2be9d17b.jpg","nickname":"ç ´æ™“^_^","note":"","ucode":"3224920095AC9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5235,"discussion_content":"æ”¯æŒä¸€å¯¹å¤šï¼Œå°±å’ŒTCPçš„socketæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡åœ¨æœ¬æœºé€šä¿¡ç½¢äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566102611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129641,"user_name":"J.M.Liu","can_delete":false,"product_type":"c1","uid":1200037,"ip_address":"","ucode":"B2CB84B8E923A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/a5/71358d7b.jpg","comment_is_top":false,"comment_ctime":1567179301,"is_pvip":false,"replies":[{"id":"50797","content":"è¿™ä¸ªå€¼æ˜¯ä¸ºäº†å›åŒ…çš„éœ€è¦ï¼Œå¸¸è§„æƒ…å†µæ˜¯ä¸éœ€è¦çš„ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹è¿˜æ˜¯æœ‰ç‚¹ä½œç”¨çš„ï¼Œæ¯”å¦‚è®©å®¢æˆ·ç«¯å¿«é€Ÿå‡ºé”™ã€‚","user_name":"ä½œè€…å›å¤","comment_id":129641,"uid":"1618647","ip_address":"","utype":1,"ctime":1568191096,"user_name_real":"froghui"}],"discussion_count":1,"race_medal":0,"score":"10157113893","product_id":100032701,"comment_content":"datagram clientä¸­ï¼Œä¸ºä»€ä¹ˆè¿˜è¦bindä¸€ä¸ªæœ¬åœ°åœ°å€å‘€ï¼Ÿæ²¡æœ‰çœ‹å‡ºè¿™ä¸ªè¿™ä¸ªæœ¬åœ°åœ°å€æœ‰ä»€ä¹ˆç”¨å‘€ã€‚éš¾é“å®ƒæ˜¯ç”¨æ¥ä½œä¸ºæ¥å—æ•°æ®çš„ç¼“å†²åŒºçš„å—ï¼Ÿå¥½åƒæ²¡æœ‰å®ƒä¹Ÿå¹¶ä¸å½±å“æ•°æ®æ”¶å‘ï¼Œæ¢å¥è¯è¯´ï¼Œclient_addr.sun_pathå¡«ä»€ä¹ˆå¥½åƒéƒ½æ— æ‰€è°“å•Šã€‚","like_count":2,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465580,"discussion_content":"è¿™ä¸ªå€¼æ˜¯ä¸ºäº†å›åŒ…çš„éœ€è¦ï¼Œå¸¸è§„æƒ…å†µæ˜¯ä¸éœ€è¦çš„ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹è¿˜æ˜¯æœ‰ç‚¹ä½œç”¨çš„ï¼Œæ¯”å¦‚è®©å®¢æˆ·ç«¯å¿«é€Ÿå‡ºé”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568191096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276479,"user_name":"èš‚èšå“ˆå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1084222,"ip_address":"","ucode":"981244D51231A7","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/3e/3a50d491.jpg","comment_is_top":false,"comment_ctime":1611968037,"is_pvip":false,"replies":[{"id":"100429","content":"ä½ çš„æ˜µç§°å¥½æ±—~","user_name":"ä½œè€…å›å¤","comment_id":276479,"uid":"1618647","ip_address":"","utype":1,"ctime":1612101874,"user_name_real":"froghui"}],"discussion_count":1,"race_medal":0,"score":"5906935333","product_id":100032701,"comment_content":"ç­”æ¡ˆï¼š<br>é—®é¢˜1: å®¢æˆ·ç«¯æŠ¥é”™ï¼š &quot;connect failed: Permission denied&quot;<br>é—®é¢˜2:  ä¸‹é¢è¿™æ®µä»£ç ä¸­ == 0 çš„ä»£ç è¡¨ç¤ºçš„å°±æ˜¯å®¢æˆ·ç«¯æ¨å‡ºï¼Œè¿™æ—¶å€™æœåŠ¡ç«¯æ‰“å° &quot;client quit&quot;, ç„¶åæ¨å‡º read å¾ªç¯ï¼Œå…³é—­æœåŠ¡ç«¯ç¨‹åºã€‚<br><br>`if (read(connfd, buf, BUFFER_SIZE) == 0) {<br>      printf(&quot;client quit&quot;);<br>      break;<br>    }`<br><br>é—®é¢˜ä¸‰ï¼š å®¢æˆ·ç«¯æŠ¥é”™ &quot;connect failed: Protocol wrong type for socket&quot;","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":514718,"discussion_content":"ä½ çš„æ˜µç§°å¥½æ±—~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612101874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243822,"user_name":"é‡å°æ¥¼ä¸åƒç´ ","can_delete":false,"product_type":"c1","uid":1782129,"ip_address":"","ucode":"424180E1FDD702","user_header":"https://static001.geekbang.org/account/avatar/00/1b/31/71/a7b9a2d4.jpg","comment_is_top":false,"comment_ctime":1598282258,"is_pvip":false,"replies":[{"id":"90121","content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä¸€å¯¹ä¸€ä½ å¯ä»¥ç†è§£æˆä¸¤ä¸ªIPåœ°å€ï¼Œä¸€ä¸ªå¯¹å¦ä¸€ä¸ªå‘é€æ•°æ®ï¼›è€Œä¸€å¯¹å¤šï¼Œä½ å¯ä»¥ç†è§£æˆä¸€ä¸ªIPåœ°å€å¯¹å¾ˆå¤šå…¶ä»–IPåœ°å€å‘é€æ•°æ®ã€‚<br><br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘ç†è§£UDPæ˜¯æ²¡æœ‰å‘é€å’Œæ¥æ”¶ç¼“å†²åŒºçš„ï¼Œæ•°æ®è¢«ç›´æ¥ä¼ é€’åˆ°æ•°æ®é“¾è·¯å±‚ä¸­å‘é€å‡ºå»ã€‚","user_name":"ä½œè€…å›å¤","comment_id":243822,"uid":"1618647","ip_address":"","utype":1,"ctime":1598795807,"user_name_real":"froghui"}],"discussion_count":2,"race_medal":0,"score":"5893249554","product_id":100032701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘åœ¨è®¨è®ºåŒºçœ‹åˆ°â€œä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šé€šä¿¡â€è¿™æ ·çš„æ¦‚å¿µï¼Œæœ‰ç‚¹ä¸æ˜ç™½ã€‚è¯·é—®ä¸€å¯¹å¤šæŒ‡çš„æ˜¯å»ºç«‹ä¸€ä¸ªå¥—æ¥å­—å¯ä»¥å…è®¸å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥çš„æ„æ€å—ï¼Ÿ  å¦‚æœæ˜¯çš„è¯ï¼Œæœ¬åœ°å¥—æ¥å­—çš„ SOCK_STREAM æ–¹å¼ä¹Ÿèƒ½ä¸€å¯¹å¤šå‘€ï¼Œè€å¸ˆä¸ºä»€ä¹ˆåªæåˆ° SOCK_DGRAM å¯ä»¥ï¼Ÿ<br>é—®é¢˜äºŒï¼š<br>TCP\\UDP\\æœ¬åœ°å¥—æ¥å­— æ˜¯å¦éƒ½æœ‰å‘é€ç¼“å†²åŒºã€æ¥æ”¶ç¼“å†²åŒºï¼ŒTCPçš„å‘é€&#47;æ¥æ”¶ç¼“å†²åŒºå¾ˆå¥½ç†è§£ï¼Œå…¶ä½™ä¸¤ä¸ªæˆ‘æ²¡æœ‰æŸ¥æ‰¾åˆ°è¯´å¾—æ¯”è¾ƒé€å½»çš„èµ„æ–™","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504403,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä¸€å¯¹ä¸€ä½ å¯ä»¥ç†è§£æˆä¸¤ä¸ªIPåœ°å€ï¼Œä¸€ä¸ªå¯¹å¦ä¸€ä¸ªå‘é€æ•°æ®ï¼›è€Œä¸€å¯¹å¤šï¼Œä½ å¯ä»¥ç†è§£æˆä¸€ä¸ªIPåœ°å€å¯¹å¾ˆå¤šå…¶ä»–IPåœ°å€å‘é€æ•°æ®ã€‚\n\nç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘ç†è§£UDPæ˜¯æ²¡æœ‰å‘é€å’Œæ¥æ”¶ç¼“å†²åŒºçš„ï¼Œæ•°æ®è¢«ç›´æ¥ä¼ é€’åˆ°æ•°æ®é“¾è·¯å±‚ä¸­å‘é€å‡ºå»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598795807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":573319,"discussion_content":"è€å¸ˆæ˜¯è¯´æœ¬åœ°datagram æˆ–è€…AF_INET datagraméƒ½æ²¡æœ‰å‘é€/æ¥æ”¶ç¼“å†²åŒºçš„æ¦‚å¿µï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653355632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":504403,"ip_address":""},"score":573319,"extra":""}]}]},{"had_liked":false,"id":229369,"user_name":"å¤é›¨","can_delete":false,"product_type":"c1","uid":1050808,"ip_address":"","ucode":"D009156B20B89E","user_header":"https://static001.geekbang.org/account/avatar/00/10/08/b8/6a296e32.jpg","comment_is_top":false,"comment_ctime":1592977654,"is_pvip":false,"replies":[{"id":"84804","content":"å¥½é—®é¢˜ã€‚æˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼Œåœ¨æœ¬åœ°å¥—æ¥å­—æƒ…å†µä¸‹ï¼Œæ‰€è°“SOCK_STREAMå’ŒSOCK_DGRAMæ˜¯æŒ‡ç¼–ç¨‹æ–¹å¼å’Œéæœ¬åœ°å¥—æ¥å­—ä¸‹çš„TCPã€UDPä¸€è‡´ã€‚","user_name":"ä½œè€…å›å¤","comment_id":229369,"uid":"1618647","ip_address":"","utype":1,"ctime":1593173769,"user_name_real":"froghui"}],"discussion_count":2,"race_medal":0,"score":"5887944950","product_id":100032701,"comment_content":"æ—¢ç„¶æ˜¯æœ¬åœ°å¥—æ¥å­—ä¸èµ°ç½‘è·¯åè®®ï¼Œ é‚£æœ¬åœ°å¥—æ¥å­—çš„TCP å’Œ UDP åˆæœ‰ä»€ä¹ˆå»åˆ«ï¼Œ UDPåœ¨ç¼“å­˜é‡Œä¹Ÿä¸ä¼šä¸¢åŒ…ä¹±åºã€‚","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499457,"discussion_content":"å¥½é—®é¢˜ã€‚æˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼Œåœ¨æœ¬åœ°å¥—æ¥å­—æƒ…å†µä¸‹ï¼Œæ‰€è°“SOCK_STREAMå’ŒSOCK_DGRAMæ˜¯æŒ‡ç¼–ç¨‹æ–¹å¼å’Œéæœ¬åœ°å¥—æ¥å­—ä¸‹çš„TCPã€UDPä¸€è‡´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593173769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1662117,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7zuDYFIutbSPc4eEtcMhdNBTI1FRR7q0xrGh2X1QdiaNxvAV31HcRUsjPWLaaWftqgwTnVoiaica8Nw/132","nickname":"èƒœè¾‰ï¼ˆå¤§Vï¼‰","note":"","ucode":"3C13BFCD82D4EC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407371,"discussion_content":"æœ¬åœ°å¥—æ¥å­—çš„æµæ¨¡å¼åº”è¯¥ä¹Ÿæœ‰ç¼“å†²åŒºå§ æŒ‰è¯­ä¹‰å¯¹ç­‰æ¥ç†è§£åº”è¯¥æ˜¯è¿™æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634993317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226131,"user_name":"éƒ‘ç¥–ç…Œ","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1591957002,"is_pvip":false,"replies":[{"id":"84278","content":"ä½ æŠŠæ–‡ä»¶ç†è§£æˆç«¯å£å°±å¯ä»¥äº†ï¼Œå¤šä¸ªå®¢æˆ·ç«¯ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡è¿™ä¸ªæ–‡ä»¶å’Œä¸€ä¸ªæœåŠ¡å™¨ç«¯è¿›è¡Œé€šä¿¡çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":226131,"uid":"1618647","ip_address":"","utype":1,"ctime":1592744010,"user_name_real":"froghui"}],"discussion_count":1,"race_medal":0,"score":"5886924298","product_id":100032701,"comment_content":"è¿™è¾¹ä¸¾ä¾‹çš„æœ¬åœ°å¥—æ¥å­—æ˜¯ä¸€ä¸ªæœåŠ¡å™¨å¯¹åº”ç€ä¸€ä¸ªå®¢æˆ·ç«¯ã€‚ é‚£æƒ³é—®ä¸€ä¸‹èƒ½ä¸èƒ½ä¸€ä¸ªæœåŠ¡å™¨å¯¹åº”ç€å¤šä¸ªå®¢æˆ·ç«¯ã€‚å¦‚æœå¯¹åº”çš„å¤šä¸ªå®¢æˆ·ç«¯ï¼Œä»–ä»¬è¿˜æ˜¯é€šè¿‡ä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥è¿›è¡Œé€šä¿¡ï¼Ÿ è¿˜æ˜¯è¦è®¾ç½®è¯´ä¸€å¯¹å…³ç³»è¦é€šè¿‡ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œé€šä¿¡ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498116,"discussion_content":"ä½ æŠŠæ–‡ä»¶ç†è§£æˆç«¯å£å°±å¯ä»¥äº†ï¼Œå¤šä¸ªå®¢æˆ·ç«¯ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡è¿™ä¸ªæ–‡ä»¶å’Œä¸€ä¸ªæœåŠ¡å™¨ç«¯è¿›è¡Œé€šä¿¡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592744010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156506,"user_name":"HunterYuan","can_delete":false,"product_type":"c1","uid":1015256,"ip_address":"","ucode":"F8900C33D29AA7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/d8/d7c77764.jpg","comment_is_top":false,"comment_ctime":1574903852,"is_pvip":false,"replies":[{"id":"60374","content":"å¤´åƒå¥½èµã€‚","user_name":"ä½œè€…å›å¤","comment_id":156506,"uid":"1618647","ip_address":"","utype":1,"ctime":1575185830,"user_name_real":"froghui"}],"discussion_count":1,"race_medal":0,"score":"5869871148","product_id":100032701,"comment_content":"å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œç¬¬äº”è®²å·²è¿›è¡Œäº†å……åˆ†è¯´æ˜ï¼šread å‡½æ•°è¦æ±‚æ“ä½œç³»ç»Ÿå†…æ ¸ä»å¥—æ¥å­—æè¿°å­— socketfdè¯»å–æœ€å¤šå¤šå°‘ä¸ªå­—èŠ‚ï¼ˆsizeï¼‰ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ° buffer ä¸­ã€‚è¿”å›å€¼å‘Šè¯‰æˆ‘ä»¬å®é™…è¯»å–çš„å­—èŠ‚æ•°ç›®ï¼Œä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œå¦‚æœè¿”å›å€¼ä¸º 0ï¼Œè¡¨ç¤º EOFï¼ˆend-of-fileï¼‰ï¼Œè¿™åœ¨ç½‘ç»œä¸­è¡¨ç¤ºå¯¹ç«¯å‘é€äº† FIN åŒ…ï¼Œè¦å¤„ç†æ–­è¿çš„æƒ…å†µã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰æµæ–¹å¼ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼š<br>client: Ctrl + C -&gt; exit(0) -&gt; å‘é€FINåŒ…ï¼›<br>server:æ»¡è¶³æ¡ä»¶read(connfd, buf, BUFFER_SIZE) == 0ï¼Œç»“æŸã€‚","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476134,"discussion_content":"å¤´åƒå¥½èµã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575185830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135291,"user_name":"Kepler","can_delete":false,"product_type":"c1","uid":1214303,"ip_address":"","ucode":"0C9CA3DB8B3CF0","user_header":"https://static001.geekbang.org/account/avatar/00/12/87/5f/6bf8b74a.jpg","comment_is_top":false,"comment_ctime":1569119022,"is_pvip":true,"replies":[{"id":"52189","content":"https:&#47;&#47;github.com&#47;froghui&#47;yolanda&#47;blob&#47;master&#47;lib&#47;common.h","user_name":"ä½œè€…å›å¤","comment_id":135291,"uid":"1618647","ip_address":"","utype":1,"ctime":1569406284,"user_name_real":"froghui"}],"discussion_count":1,"race_medal":0,"score":"5864086318","product_id":100032701,"comment_content":"lib&#47;common.h çš„ç»å¯¹è·¯å¾„æ˜¯å•¥ï¼Œæœ‰è¿™ä¸ªæ–‡ä»¶å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468128,"discussion_content":"https://github.com/froghui/yolanda/blob/master/lib/common.h","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569406284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127891,"user_name":"knull","can_delete":false,"product_type":"c1","uid":1043484,"ip_address":"","ucode":"3BFECF3D29F40C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","comment_is_top":false,"comment_ctime":1566805266,"is_pvip":false,"replies":[{"id":"47936","content":"1.åŠ ä¸€ä¸ªSIGPIPEä¿¡å·å¤„ç†<br>2.è¯»åˆ°EOFå°±ä¸è¦writeäº†","user_name":"ä½œè€…å›å¤","comment_id":127891,"uid":"1618647","ip_address":"","utype":1,"ctime":1567005650,"user_name_real":"froghui"}],"discussion_count":2,"race_medal":0,"score":"5861772562","product_id":100032701,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘ç»ƒä¹ å†™äº†ä¸€ä¸ªechoserverï¼ˆç”¨AF_UNIXï¼‰,å®¢æˆ·ç«¯ä¸»åŠ¨æ–­é“¾ã€‚<br>å‘ç°åœ¨å®¢æˆ·ç«¯closeçš„æ—¶å€™ï¼Œechoserverä¼šè¯»å–åˆ°æ•°æ®ï¼Œå¹¶ä¸”æœ€åä¸€æ¬¡writeã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™è¿æ¥å·²ç»æ–­äº†ï¼Œä¼šæŠ¥é”™broken pipeã€‚ç¨‹åºç›´æ¥æŒ‚æ‰äº†ã€‚ã€‚ã€‚<br>è¿™ç§æƒ…å†µè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464696,"discussion_content":"1.åŠ ä¸€ä¸ªSIGPIPEä¿¡å·å¤„ç†\n2.è¯»åˆ°EOFå°±ä¸è¦writeäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567005650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","nickname":"knull","note":"","ucode":"3BFECF3D29F40C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6354,"discussion_content":"æˆ‘ç°åœ¨çŸ¥é“ï¼Œç”¨ä¿¡å·é‡æ¥å¤„ç†ã€‚\næˆ‘æƒ³é—®ï¼Œæ˜¯ä¸æ˜¯åªæœ‰è¿™æ ·ä¸€ç§æ–¹æ¡ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566868012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125082,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1566057148,"is_pvip":false,"replies":[{"id":"45942","content":"ä½ å¯ä»¥åœ¨linuxç³»ç»Ÿé‡Œæ‰§è¡Œmanå‘½ä»¤ï¼Œä¾‹å¦‚man socket:<br><br>SOCKET(2)                                                              Linux Programmer&#39;s Manual                                                             SOCKET(2)<br><br>NAME<br>       socket - create an endpoint for communication<br><br>SYNOPSIS<br>       #include &lt;sys&#47;types.h&gt;          &#47;* See NOTES *&#47;<br>       #include &lt;sys&#47;socket.h&gt;<br><br>       int socket(int domain, int type, int protocol);","user_name":"ä½œè€…å›å¤","comment_id":125082,"uid":"1618647","ip_address":"","utype":1,"ctime":1566130084,"user_name_real":"froghui"}],"discussion_count":2,"race_medal":0,"score":"5861024444","product_id":100032701,"comment_content":"è¯·é—®ä¸€ä¸‹å¦‚ä½•èƒ½æ–¹ä¾¿åœ°çŸ¥é“ä¸€ä¸ªlinuxç³»ç»Ÿæä¾›çš„å‡½æ•°æˆ–è€…å˜é‡çš„å¤´æ–‡ä»¶æ˜¯å“ªä¸ªå‘¢ï¼Ÿç»å¸¸ä¸çŸ¥é“æ–‡ä¸­çš„ä»£ç çš„å‡½æ•°æˆ–è€…å˜é‡çš„å¤´æ–‡ä»¶åœ¨å“ªé‡Œ","like_count":1,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463427,"discussion_content":"ä½ å¯ä»¥åœ¨linuxç³»ç»Ÿé‡Œæ‰§è¡Œmanå‘½ä»¤ï¼Œä¾‹å¦‚man socket:\n\nSOCKET(2)                                                              Linux Programmer&amp;#39;s Manual                                                             SOCKET(2)\n\nNAME\n       socket - create an endpoint for communication\n\nSYNOPSIS\n       #include &amp;lt;sys/types.h&amp;gt;          /* See NOTES */\n       #include &amp;lt;sys/socket.h&amp;gt;\n\n       int socket(int domain, int type, int protocol);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566130084,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1149592,"avatar":"https://static001.geekbang.org/account/avatar/00/11/8a/98/2be9d17b.jpg","nickname":"ç ´æ™“^_^","note":"","ucode":"3224920095AC9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5234,"discussion_content":"manå‘½ä»¤   man  +  å‡½æ•°å","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566102443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354806,"user_name":"lixin","can_delete":false,"product_type":"c1","uid":1512599,"ip_address":"å¹¿ä¸œ","ucode":"94D99DAFB6C929","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/88nXicqmkJWm3IXVfPfGQSk8SKIBVKjuC4qhzaCkf5Ud88uvKgS4Vf5AzCJ1uaFO0gpPnxdh4CowfhpxV1kSbXw/132","comment_is_top":false,"comment_ctime":1660797738,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660797738","product_id":100032701,"comment_content":"å¯ä¸å¯ä»¥å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ä¸€ä¸ªæœåŠ¡ç«¯ã€‚é‚£ä¸€ä¸ªå®¢æˆ·ç«¯é€€å‡ºä¼šå¼•èµ·æœåŠ¡ç«¯çš„é€€å‡ºä¹ˆ","like_count":0},{"had_liked":false,"id":335714,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1645662468,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645662468","product_id":100032701,"comment_content":"æœ¬åœ°å¥—æ¥å­—ä¸€èˆ¬ä¹Ÿå«åš UNIX åŸŸå¥—æ¥å­—ï¼Œæœ¬åœ°å¥—æ¥å­—æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å¥—æ¥å­—ï¼Œå’Œ TCP&#47;UDP å¥—æ¥å­—ä¸åŒã€‚TCP&#47;UDP å³ä½¿åœ¨æœ¬åœ°åœ°å€é€šä¿¡ï¼Œä¹Ÿè¦èµ°ç³»ç»Ÿç½‘ç»œåè®®æ ˆï¼Œè€Œæœ¬åœ°å¥—æ¥å­—ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šè¯´æä¾›äº†ä¸€ç§å•ä¸»æœºè·¨è¿›ç¨‹é—´è°ƒç”¨çš„æ‰‹æ®µï¼Œå‡å°‘äº†åè®®æ ˆå®ç°çš„å¤æ‚åº¦ï¼Œæ•ˆç‡æ¯” TCP&#47;UDP å¥—æ¥å­—éƒ½è¦é«˜è®¸å¤šï¼ˆå¯ä»¥ç†è§£ä¸ºè¯»æœ¬åœ°æ–‡ä»¶ï¼‰","like_count":0},{"had_liked":false,"id":335149,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/619e3e48.jpg","comment_is_top":false,"comment_ctime":1645361129,"is_pvip":true,"replies":[{"id":"122810","content":"ä½ æ˜¯å“ªæ®µç¨‹åºï¼Ÿæ˜¯ä¸æ˜¯è¿›ç¨‹è‡ªåŠ¨é€€å‡ºäº†ã€‚æ‰€ä»¥ä¸éœ€è¦exitã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1645883241,"ip_address":"","comment_id":335149,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1645361129","product_id":100032701,"comment_content":"é—®é¢˜äºŒåŠæ—¶æˆ‘æ³¨é‡Šæ‰exit(0)ä»£ç ï¼Œæ·»åŠ ä»£ç å¿½ç•¥äº†SIGPIPEä¿¡å·ï¼Œä¸ºä»€ä¹ˆserverç«¯ç¨‹åºè¿˜æ˜¯ä¼šè‡ªåŠ¨é€€å‡ºï¼Ÿ<br>æœ‰æ²¡æœ‰æœ‹å‹é‡åˆ°è¿‡ï¼Ÿæˆ‘å°è¯•ä½¿ç”¨sendåŠ å‚æ•°MSG_NOSIGNALå¯ä»¥è§£å†³æœåŠ¡ç«¯è‡ªåŠ¨é€€å‡ºçš„é—®é¢˜ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆä¿¡å·SIGPIPEå¿½ç•¥å¤±è´¥çš„é—®é¢˜æš‚æ—¶æ²¡æœ‰ç­”æ¡ˆï¼Œå¸Œæœ›çŸ¥é“çš„æœ‹å‹å¯ä»¥è¯„è®ºä¸‹ã€‚<br>é—®é¢˜è®°å½•åœ¨https:&#47;&#47;52coder.net&#47;post&#47;net-program-sigpipe","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553426,"discussion_content":"ä½ æ˜¯å“ªæ®µç¨‹åºï¼Ÿæ˜¯ä¸æ˜¯è¿›ç¨‹è‡ªåŠ¨é€€å‡ºäº†ã€‚æ‰€ä»¥ä¸éœ€è¦exitã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645883241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335132,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/619e3e48.jpg","comment_is_top":false,"comment_ctime":1645349808,"is_pvip":true,"replies":[{"id":"122809","content":"è¿›ç¨‹è‡ªåŠ¨é€€å‡ºå§ã€‚æ‰€ä»¥ä¸éœ€è¦exitã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1618647","ctime":1645883157,"ip_address":"","comment_id":335132,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1645349808","product_id":100032701,"comment_content":"é—®é¢˜äºŒåŠæ—¶æˆ‘æ³¨é‡Šæ‰exit(0)ä»£ç ï¼Œå¿½ç•¥äº†SIGPIPEä¿¡å·ï¼Œä¸ºä»€ä¹ˆserverç«¯ç¨‹åºè¿˜æ˜¯ä¼šè‡ªåŠ¨é€€å‡ºï¼Ÿæœ‰æ²¡æœ‰æœ‹å‹é‡åˆ°è¿‡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553424,"discussion_content":"è¿›ç¨‹è‡ªåŠ¨é€€å‡ºå§ã€‚æ‰€ä»¥ä¸éœ€è¦exitã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645883157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266855,"user_name":"Geek_d83bfc","can_delete":false,"product_type":"c1","uid":2325184,"ip_address":"","ucode":"BB70B0F162AA3B","user_header":"","comment_is_top":false,"comment_ctime":1607506805,"is_pvip":false,"replies":[{"id":"98878","content":"è¿˜å¥½å•Šï¼Œè¿™ä¸ªå€¼åœ¨ç°ä»£Linuxå·²ç»å¯ä»¥è®¾ç½®åˆ°å¾ˆå¤§äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1610286142,"ip_address":"","comment_id":266855,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1607506805","product_id":100032701,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼ŒæŸ¥çœ‹è¿›ç¨‹å’Œæ‰“å¼€çš„å¥æŸ„ï¼Œæˆ‘ä»¬è¿›ç¨‹æ˜¾ç¤ºå¥æŸ„1043448ï¼Œæœ‰ç‚¹é«˜ï¼Œè€å¸ˆè¿™ä¸ªæ€ä¹ˆæ’æŸ¥","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511413,"discussion_content":"è¿˜å¥½å•Šï¼Œè¿™ä¸ªå€¼åœ¨ç°ä»£Linuxå·²ç»å¯ä»¥è®¾ç½®åˆ°å¾ˆå¤§äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610286142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247860,"user_name":"Steiner","can_delete":false,"product_type":"c1","uid":1622329,"ip_address":"","ucode":"232C1C75207A1E","user_header":"https://static001.geekbang.org/account/avatar/00/18/c1/39/11904266.jpg","comment_is_top":false,"comment_ctime":1599896228,"is_pvip":false,"replies":[{"id":"92048","content":"æ˜¯çš„å“¦ï¼Œä¸ä¿¡ä½ å¯ä»¥è¯•è¯•è¿è¡Œä¸€ä¸‹ã€‚åªä¸è¿‡ï¼Œåˆ›å»ºçš„æ–‡ä»¶éå¸¸ç‰¹æ®Šï¼Œæ˜¯ä¸èƒ½æ‰“å¼€è¯»å†™çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1601869880,"ip_address":"","comment_id":247860,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599896228","product_id":100032701,"comment_content":"å°†æœ¬åœ°å¥—æ¥å­—çš„æ–‡ä»¶unlinkåæ²¡æœ‰ä»»ä½•æ“ä½œï¼Œéš¾é“åœ¨bindæœ¬åœ°å¥—æ¥å­—åˆ°æ–‡ä»¶çš„è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨åˆ›å»ºæ–‡ä»¶å—","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505514,"discussion_content":"æ˜¯çš„å“¦ï¼Œä¸ä¿¡ä½ å¯ä»¥è¯•è¯•è¿è¡Œä¸€ä¸‹ã€‚åªä¸è¿‡ï¼Œåˆ›å»ºçš„æ–‡ä»¶éå¸¸ç‰¹æ®Šï¼Œæ˜¯ä¸èƒ½æ‰“å¼€è¯»å†™çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601869880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244957,"user_name":"spark","can_delete":false,"product_type":"c1","uid":1264022,"ip_address":"","ucode":"D84C36D957ECCF","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/96/7523cdb6.jpg","comment_is_top":false,"comment_ctime":1598762943,"is_pvip":false,"replies":[{"id":"90126","content":"back to foræ˜¯æ— æ•ˆçš„æ³¨é‡Šã€‚æˆ‘ä¼šåˆ æ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1598796300,"ip_address":"","comment_id":244957,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598762943","product_id":100032701,"comment_content":"stream_server:<br>clilen = sizeof(cliaddr); <br>if ((connfd = accept(listenfd, (struct sockaddr *) &amp;cliaddr, &amp;clilen)) &lt; 0) { <br>if (errno == EINTR) error(1, errno, &quot;accept failed&quot;); &#47;* back to for() *&#47; <br>else error(1, errno, &quot;accept failed&quot;); }<br>è¿™æ®µç¨‹åºæœ‰é—®é¢˜å§? ä¸æ˜ç™½æ€ä¹ˆback to for()?<br>è°¢è°¢","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504750,"discussion_content":"back to foræ˜¯æ— æ•ˆçš„æ³¨é‡Šã€‚æˆ‘ä¼šåˆ æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598796300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229762,"user_name":"Geek_d6f50f","can_delete":false,"product_type":"c1","uid":1793213,"ip_address":"","ucode":"4AA490453CF4FB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/wwM75BhyU43UYOJ6fZCZgY6pfNPGHHRlooPLQEtDGUNic4aLRHWmBRTpIiblBAFheUVm9Sw8HWAChcFsnVM2sd5Q/132","comment_is_top":false,"comment_ctime":1593139766,"is_pvip":true,"replies":[{"id":"84807","content":"è¿™æ˜¯å› ä¸ºå…±ç”¨çš„æ—¶å€™ï¼Œåº”ç”¨ç¨‹åºçš„ç¼“å†²è¢«å¤šæ¬¡å†™å…¥ï¼Œæ•°æ®å†²æ‰äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1593174087,"ip_address":"","comment_id":229762,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593139766","product_id":100032701,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆUDPæœ¬åœ°å¥—æ¥å­—ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œæ¥æ”¶æ•°æ®å’Œå‘é€æ•°æ®å…±ç”¨ä¸€å—ç¼“å†²åŒºï¼Œå…ˆæ¥æ”¶ï¼Œå†æŠŠæ¥æ”¶ç¼“å†²åŒºçš„æ•°æ®sendtoåˆ°å®¢æˆ·ç«¯ï¼Œè¿™æ—¶å€™å‘é€é”™è¯¯ï¼Œä½†æ˜¯å¦‚æœæ¥æ”¶å’Œå‘é€å„è‡ªçš„ç¼“å†²åŒºï¼Œå°±ä¸ä¼šå‡ºé”™ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499630,"discussion_content":"è¿™æ˜¯å› ä¸ºå…±ç”¨çš„æ—¶å€™ï¼Œåº”ç”¨ç¨‹åºçš„ç¼“å†²è¢«å¤šæ¬¡å†™å…¥ï¼Œæ•°æ®å†²æ‰äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593174087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228378,"user_name":"Geek_63bb29","can_delete":false,"product_type":"c1","uid":2017041,"ip_address":"","ucode":"65C27FA7531722","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/5kv7IqibneNnMLqtWZQR5f1et8lJmoxiaU43Ttzz3zqW7QzBqMkib8GCtImKsms7PPbWmTB51xRnZQAnRPfA1wVaw/132","comment_is_top":false,"comment_ctime":1592652108,"is_pvip":false,"replies":[{"id":"84286","content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1592744819,"ip_address":"","comment_id":228378,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592652108","product_id":100032701,"comment_content":"è€å¸ˆã€‚çœ‹äº†ç¬¬å…«éƒ¨åˆ†Dockeré‚£é‡Œï¼Œå¥½åƒæœ‰äº›æ˜ç™½äº†ã€‚TCPæ˜¯ç›‘å¬ç«¯å£ï¼Œè¿™é‡Œçš„è¯ï¼ŒæœåŠ¡å™¨æ˜¯ç›‘å¬æœ¬åœ°æ–‡ä»¶ï¼Œæ˜¯è¿™æ ·å§ã€ä¹‹å‰æäº†ä¸€æ¡é—®é¢˜ã€‘","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499015,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592744819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228371,"user_name":"Geek_63bb29","can_delete":false,"product_type":"c1","uid":2017041,"ip_address":"","ucode":"65C27FA7531722","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/5kv7IqibneNnMLqtWZQR5f1et8lJmoxiaU43Ttzz3zqW7QzBqMkib8GCtImKsms7PPbWmTB51xRnZQAnRPfA1wVaw/132","comment_is_top":false,"comment_ctime":1592650336,"is_pvip":false,"replies":[{"id":"84285","content":"ä½ æŠŠè¿™ä¸ªæ–‡ä»¶ç†è§£æˆåŒæ–¹çš„ä¸€ç§&quot;äº¤æµé€šé“&quot;å¥½äº†ï¼Œç±»ä¼¼ç«¯å£å’Œåœ°å€çš„ä½œç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1592744805,"ip_address":"","comment_id":228371,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592650336","product_id":100032701,"comment_content":"è€å¸ˆï¼Œå¯¹äºæœ¬åœ°å¥—æ¥å­—ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼šé€šè¿‡æœ¬åœ°å¥—æ¥å­—çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œå¯¹å„è¿›ç¨‹ç®¡ç†çš„å†…å­˜è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œä½†æ˜¯æ²¡èƒ½ç†è§£ &#47;var&#47;lib&#47;unixstream.sockè¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼Œå› ä¸ºæˆ‘ç”¨TCPã€UDPäº¤æ¢ä¿¡æ¯çš„æ€è·¯ï¼Œè§‰ç€ä¿¡æ¯æµæ²¡æœ‰ç»è¿‡ è¿™ä¸ªæ–‡ä»¶å‘€ï¼Œè¿˜è¯·æŒ‡ç‚¹ä¸€ä¸‹ï¼Œè°¢è°¢è€å¸ˆã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499012,"discussion_content":"ä½ æŠŠè¿™ä¸ªæ–‡ä»¶ç†è§£æˆåŒæ–¹çš„ä¸€ç§&amp;quot;äº¤æµé€šé“&amp;quot;å¥½äº†ï¼Œç±»ä¼¼ç«¯å£å’Œåœ°å€çš„ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592744805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228260,"user_name":"Ray","can_delete":false,"product_type":"c1","uid":1253774,"ip_address":"","ucode":"A7059C7D505AA0","user_header":"","comment_is_top":false,"comment_ctime":1592625227,"is_pvip":false,"replies":[{"id":"84284","content":"å†…æ ¸ä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬åšè¿™ä»¶äº‹æƒ…ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1592744725,"ip_address":"","comment_id":228260,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592625227","product_id":100032701,"comment_content":"ä½ å¯ä»¥çœ‹åˆ° 16ï½22 è¡Œå°†æœ¬åœ°æ•°æ®æŠ¥å¥—æ¥å­— bind åˆ°æœ¬åœ°ä¸€ä¸ªè·¯å¾„ä¸Šï¼Œç„¶è€Œ UDP å®¢æˆ·ç«¯ç¨‹åºæ˜¯ä¸éœ€è¦è¿™ä¹ˆåšçš„ã€‚æœ¬åœ°æ•°æ®æŠ¥å¥—æ¥å­—è¿™ä¹ˆåšçš„åŸå› æ˜¯ï¼Œå®ƒéœ€è¦æŒ‡å®šä¸€ä¸ªæœ¬åœ°è·¯å¾„ï¼Œä»¥ä¾¿åœ¨æœåŠ¡å™¨ç«¯å›åŒ…æ—¶ï¼Œå¯ä»¥æ­£ç¡®åœ°æ‰¾åˆ°åœ°å€ï¼›<br>----------------------------<br>å…³äºä¸Šæ–‡ä¸­çš„å†…å®¹ï¼Œæƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œä¸ºä»€ä¹ˆTCPçš„æœ¬åœ°å®¢æˆ·ç«¯ä¸éœ€è¦bindåˆ°ä¸€ä¸ªåœ°å€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498974,"discussion_content":"å†…æ ¸ä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬åšè¿™ä»¶äº‹æƒ…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592744725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226775,"user_name":"éƒ‘ç¥–ç…Œ","can_delete":false,"product_type":"c1","uid":1469608,"ip_address":"","ucode":"49A0D2E3279826","user_header":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","comment_is_top":false,"comment_ctime":1592201593,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592201593","product_id":100032701,"comment_content":"1. è¿æ¥ä¸ä¸Šï¼Œå› ä¸ºå®¢æˆ·ç«¯è¿˜æ²¡æœ‰èµ‹äºˆæƒé™ã€‚ <br>2. å› ä¸ºæœåŠ¡å™¨åšäº†åˆ¤æ–­ å½“read()==0çš„æ—¶å€™ ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯é€€å‡ºçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¹Ÿé€€å‡ºäº†ã€‚<br>    åŸå› å°±æ˜¯æœåŠ¡å™¨åœ¨ä»£ç é€»è¾‘å±‚åšäº†ä¸€ä¸ªé€€å‡ºçš„åˆ¤æ–­ã€‚<br>3.å®¢æˆ·ç«¯åœ¨è¿æ¥æ—¶ä¼šæŠ¥é”™ï¼Œé”™è¯¯æç¤ºæ˜¯â€œProtocol wrong type for socket (91)","like_count":0},{"had_liked":false,"id":222826,"user_name":"youngitachi","can_delete":false,"product_type":"c1","uid":1214582,"ip_address":"","ucode":"88717CA8B8ED64","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/76/c69b7fe5.jpg","comment_is_top":false,"comment_ctime":1590922756,"is_pvip":true,"replies":[{"id":"82182","content":"ä¸¤ä¸ªå‡½æ•°çš„ç›®çš„ä¸åŒï¼Œsizeofè·å–çš„æ˜¯æ•°æ®ç±»å‹çš„å¤§å°ï¼Œæ¯”å¦‚intç±»å‹æ˜¯å¤šå°‘å­—èŠ‚ï¼Œstrlenæ˜¯è·å–å­—ç¬¦ä¸²çœŸæ­£çš„å¤§å°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1590932755,"ip_address":"","comment_id":222826,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590922756","product_id":100032701,"comment_content":"ä¸çŸ¥é“ä¸ºå•¥writeå‡½æ•°ä½¿ç”¨çš„nbytesï¼Œæˆ‘è¿™é‡Œä½¿ç”¨sizeofè·å–çš„è¯å¤šäº¤äº’å‡ æ¬¡æ•°æ®æ˜¾ç¤ºå°±ä¼šæœ‰é—®é¢˜ã€‚<br>æ”¹æˆstrlenå‡½æ•°æœ‰å°±å¥½äº†","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496930,"discussion_content":"ä¸¤ä¸ªå‡½æ•°çš„ç›®çš„ä¸åŒï¼Œsizeofè·å–çš„æ˜¯æ•°æ®ç±»å‹çš„å¤§å°ï¼Œæ¯”å¦‚intç±»å‹æ˜¯å¤šå°‘å­—èŠ‚ï¼Œstrlenæ˜¯è·å–å­—ç¬¦ä¸²çœŸæ­£çš„å¤§å°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590932755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219727,"user_name":"å¦¥å","can_delete":false,"product_type":"c1","uid":1249656,"ip_address":"","ucode":"7201DFE9C12669","user_header":"https://static001.geekbang.org/account/avatar/00/13/11/78/4f0cd172.jpg","comment_is_top":false,"comment_ctime":1590070782,"is_pvip":false,"replies":[{"id":"82159","content":"æ˜¯çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1590926367,"ip_address":"","comment_id":219727,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1590070782","product_id":100032701,"comment_content":"æœ¬æœºé€šè¿‡ 127.0.0.1åœ°å€é€šä¿¡æ—¶ï¼Œèµ°ç½‘ç»œåè®®æ ˆçš„å…¨éƒ¨æµç¨‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495924,"discussion_content":"æ˜¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590926367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1307067,"avatar":"","nickname":"super-ck","note":"","ucode":"02F036E53E1130","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":276177,"discussion_content":"å¦‚æœæ˜¯AF_LOCALï¼Œä¸èµ°ï¼Œå¦‚æœæ˜¯AF_INETå’ŒAF_INET6åˆ™èµ°","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1590834316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":214897,"user_name":"é¥­","can_delete":false,"product_type":"c1","uid":1610573,"ip_address":"","ucode":"B3F1702D4DE604","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132","comment_is_top":false,"comment_ctime":1588844354,"is_pvip":false,"replies":[{"id":"79836","content":"ä¸æ˜¯å§ï¼Œæˆ‘æ²¡ç ”ç©¶è¿‡windowsçš„æœ¬åœ°å¥—æ¥å­—ï¼Œæœ‰åŒå­¦çŸ¥é“ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1589099809,"ip_address":"","comment_id":214897,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1588844354","product_id":100032701,"comment_content":"windowä¸‹ï¼Œæ²¡æœ‰æœ¬åœ°å¥—æ¥å­—æšä¸¾ï¼Œæ˜¯ä¸æ˜¯ä¼šè‡ªåŠ¨æ ¹æ®IPåˆ¤æ–­æœ¬åœ°åœ°å€çš„è¯ï¼Œå°±èµ°æœ¬åœ°å¥—æ¥å­—","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494236,"discussion_content":"ä¸æ˜¯å§ï¼Œæˆ‘æ²¡ç ”ç©¶è¿‡windowsçš„æœ¬åœ°å¥—æ¥å­—ï¼Œæœ‰åŒå­¦çŸ¥é“ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589099809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202479,"user_name":"ray","can_delete":false,"product_type":"c1","uid":1717235,"ip_address":"","ucode":"10962C711CBC11","user_header":"","comment_is_top":false,"comment_ctime":1585994407,"is_pvip":false,"replies":[{"id":"75765","content":"æˆ‘æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„ï¼Œæœ¬åœ°ä¼ è¾“åˆ†ä¸ºstreamå’Œdataä¸¤ç§ç±»å‹ï¼Œæ˜¯ä¸ºäº†å’Œtcp&#47;udpçš„ç¼–ç¨‹èŒƒå¼ä¿æŒä¸€è‡´ï¼Œç¡®å®æœ¬åœ°ä¼ è¾“çš„dataç±»å‹çš„åº”ç”¨åœºæ™¯æ¯”è¾ƒå°‘ï¼Œå¦‚æœæœ‰åŒå­¦è¯»åˆ°è¿™æ¡ï¼Œä¹Ÿå¯ä»¥æ¢è®¨ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1586075336,"ip_address":"","comment_id":202479,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1585994407","product_id":100032701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œ<br>è¯·é—®ä»€ä¹ˆæ—¶æœºåº”è¯¥ä½¿ç”¨sock_streamï¼Œsock_dataå‘¢ï¼Ÿ<br>ä¼šæœ‰è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºï¼Œæœ¬åœ°ä¼ è¾“æ²¡æœ‰å¯é æ€§é—®é¢˜éœ€è¦è§£å†³ï¼Œä¸¤è€…é€Ÿåº¦éƒ½å¾ˆå¿«ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œæœ¬åœ°ä¼ è¾“åˆä¼šä»€ä¹ˆè¦åˆ†sock_streamï¼Œsock_dataå‘¢ï¼Ÿ<br><br>è°¢è°¢è€å¸ˆçš„è§£ç­”^^","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490596,"discussion_content":"æˆ‘æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„ï¼Œæœ¬åœ°ä¼ è¾“åˆ†ä¸ºstreamå’Œdataä¸¤ç§ç±»å‹ï¼Œæ˜¯ä¸ºäº†å’Œtcp/udpçš„ç¼–ç¨‹èŒƒå¼ä¿æŒä¸€è‡´ï¼Œç¡®å®æœ¬åœ°ä¼ è¾“çš„dataç±»å‹çš„åº”ç”¨åœºæ™¯æ¯”è¾ƒå°‘ï¼Œå¦‚æœæœ‰åŒå­¦è¯»åˆ°è¿™æ¡ï¼Œä¹Ÿå¯ä»¥æ¢è®¨ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586075336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1304195,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtlEYuHnR8VdRkNPcmkIqTM9DKahpcpicDdBvcmBWMIAAhBrd0QNWvl09slqrzB5TibryVcIfPmb7Q/132","nickname":"raisecomer","note":"","ucode":"32EA488E46471F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369169,"discussion_content":"åˆ†ä¸ºstreamå’Œdataä¸¤ç§ç±»å‹ï¼Œæœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¦‚æœserverå’Œclientå°†æ¥åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œåªè¦æŠŠåè®®æ—ç±»å‹å’Œç»‘å®šæœ¬åœ°æ–‡ä»¶çš„åœ°æ–¹æ¢æˆAF_INETå’ŒIP+PORTå°±è¡Œäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618966720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1662117,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7zuDYFIutbSPc4eEtcMhdNBTI1FRR7q0xrGh2X1QdiaNxvAV31HcRUsjPWLaaWftqgwTnVoiaica8Nw/132","nickname":"èƒœè¾‰ï¼ˆå¤§Vï¼‰","note":"","ucode":"3C13BFCD82D4EC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1304195,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtlEYuHnR8VdRkNPcmkIqTM9DKahpcpicDdBvcmBWMIAAhBrd0QNWvl09slqrzB5TibryVcIfPmb7Q/132","nickname":"raisecomer","note":"","ucode":"32EA488E46471F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407372,"discussion_content":"è¿™ä¸ªè¯´æ³•æœ‰é“ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634993474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":369169,"ip_address":""},"score":407372,"extra":""}]}]},{"had_liked":false,"id":200826,"user_name":"GalaxyCreater","can_delete":false,"product_type":"c1","uid":1508329,"ip_address":"","ucode":"C79E8A088D57CF","user_header":"https://static001.geekbang.org/account/avatar/00/17/03/e9/6358059c.jpg","comment_is_top":false,"comment_ctime":1585657148,"is_pvip":false,"replies":[{"id":"75773","content":"å¾ˆå¤§çš„ä¸åŒæ˜¯æœ¬åœ°å¥—æ¥å­—æä¾›çš„æ˜¯ä¸€ç§æœ¬æœºçš„è¿›ç¨‹é—´é€šä¿¡æ”¾å•Šæ˜¯ï¼Œè€Œç›´æ¥è¯»å†™æœ¬åœ°æ–‡ä»¶æ˜¾ç„¶ä¸æ˜¯ï¼›ç®¡é“ä¹Ÿæ˜¯å¯ä»¥ç”¨æ¥æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼Œå’Œæœ¬åœ°å¥—æ¥å­—ç›¸æ¯”ï¼Œç®¡é“çš„è¯­ä¹‰ç±»ä¼¼æ¶ˆæ¯é€šé“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1586076094,"ip_address":"","comment_id":200826,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1585657148","product_id":100032701,"comment_content":"ä½¿ç”¨æœ¬åœ°å¥—æ¥å­—å’Œç›´æ¥è¯»å†™æœ¬åœ°æ–‡ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼›è®°å¾—ç®¡é“ä¹Ÿä¼šåˆ›å»ºæ–‡ä»¶çš„ï¼Œä»–ä»¬æœ‰ä»€ä¹ˆä¸ä¸€æ ·çš„","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490143,"discussion_content":"å¾ˆå¤§çš„ä¸åŒæ˜¯æœ¬åœ°å¥—æ¥å­—æä¾›çš„æ˜¯ä¸€ç§æœ¬æœºçš„è¿›ç¨‹é—´é€šä¿¡æ”¾å•Šæ˜¯ï¼Œè€Œç›´æ¥è¯»å†™æœ¬åœ°æ–‡ä»¶æ˜¾ç„¶ä¸æ˜¯ï¼›ç®¡é“ä¹Ÿæ˜¯å¯ä»¥ç”¨æ¥æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼Œå’Œæœ¬åœ°å¥—æ¥å­—ç›¸æ¯”ï¼Œç®¡é“çš„è¯­ä¹‰ç±»ä¼¼æ¶ˆæ¯é€šé“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586076094,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1304195,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtlEYuHnR8VdRkNPcmkIqTM9DKahpcpicDdBvcmBWMIAAhBrd0QNWvl09slqrzB5TibryVcIfPmb7Q/132","nickname":"raisecomer","note":"","ucode":"32EA488E46471F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369167,"discussion_content":"æˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼Œè¿›ç¨‹ä¹‹é—´ç›´æ¥è¯»å†™æœ¬åœ°æ–‡ä»¶æ¥é€šä¿¡ï¼Œç›¸å½“äºæŠŠæœ¬åœ°æ–‡ä»¶ä½œä¸ºå…±äº«èµ„æºï¼Œè¿›ç¨‹ä¹‹é—´é€šè¿‡è®¿é—®å…±äº«èµ„æºæ¥é€šä¿¡ï¼Œéœ€è¦ç¨‹åºåŠ é”æ¥ä¿æŠ¤ä¿è¯å®‰å…¨ï¼Œè€Œä½¿ç”¨æœ¬åœ°socketï¼Œè¿›ç¨‹ä¹‹é—´ç›¸å½“äºä½¿ç”¨æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼æ¥è¿›è¡Œé€šä¿¡ï¼Œå®‰å…¨æ˜¯ç”±å†…æ ¸æ¥ä¿è¯çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618966309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192493,"user_name":"Geek_wannaBgeek","can_delete":false,"product_type":"c1","uid":1643435,"ip_address":"","ucode":"6F42F4181981C3","user_header":"https://static001.geekbang.org/account/avatar/00/19/13/ab/d73e25de.jpg","comment_is_top":false,"comment_ctime":1584855102,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584855102","product_id":100032701,"comment_content":"æ‰“å¡æ‰“å¡","like_count":0},{"had_liked":false,"id":186143,"user_name":"InfoQ_0ef441e6756e","can_delete":false,"product_type":"c1","uid":1438521,"ip_address":"","ucode":"F1E750A5472FE2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLTPmSgD6QSgicqsbzibiau9xWSYgdsvYlnVWBg91ibHQBYg39MT4O3AV5CHlJlVUvw9Ks9TZEmRvicfTw/132","comment_is_top":false,"comment_ctime":1583765808,"is_pvip":false,"replies":[{"id":"72374","content":"æœ¬åœ°å¥—æ¥å­—çš„æ•°æ®æŠ¥é€šä¿¡ï¼Œå®¢æˆ·ç«¯bindçš„ç›®çš„æ˜¯ä¸ºäº†è®©æœåŠ¡å™¨ç«¯å›åŒ…æ—¶ï¼Œå¯ä»¥æ­£ç¡®åœ°æ‰¾åˆ°å®¢æˆ·ç«¯åœ°å€ï¼Œè¿™æ˜¯ä¸¤ç«¯é€šä¿¡çš„éœ€è¦ï¼Œå› ä¸ºæœ¬åœ°å¥—æ¥å­—æ²¡æœ‰è¿æ¥çš„æ¦‚å¿µï¼Œéœ€è¦æŒ‡å®šè·¯å¾„æ ‡è¯†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1584173746,"ip_address":"","comment_id":186143,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1583765808","product_id":100032701,"comment_content":"è€å¸ˆã€‚udpå®¢æˆ·ç«¯bind è¿˜æ˜¯æ²¡ç†è§£ï¼ŒserveråšæŒºçš„å“ªä¸ªæ–‡ä»¶ï¼Œå›å¤çš„æ—¶å€™å‘ç»™é‚£ä¸ªæ–‡ä»¶ä¸å°±è¡Œäº†ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486643,"discussion_content":"æœ¬åœ°å¥—æ¥å­—çš„æ•°æ®æŠ¥é€šä¿¡ï¼Œå®¢æˆ·ç«¯bindçš„ç›®çš„æ˜¯ä¸ºäº†è®©æœåŠ¡å™¨ç«¯å›åŒ…æ—¶ï¼Œå¯ä»¥æ­£ç¡®åœ°æ‰¾åˆ°å®¢æˆ·ç«¯åœ°å€ï¼Œè¿™æ˜¯ä¸¤ç«¯é€šä¿¡çš„éœ€è¦ï¼Œå› ä¸ºæœ¬åœ°å¥—æ¥å­—æ²¡æœ‰è¿æ¥çš„æ¦‚å¿µï¼Œéœ€è¦æŒ‡å®šè·¯å¾„æ ‡è¯†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584173746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397631,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVUskibDnhMt5MCIJ8227HWkeg2wEEyewps8GuWhWaY5fy7Ya56bu2ktMlxdla3K29Wqia9efCkWaQ/132","nickname":"è¡¬è¡«çš„ä»·æ ¼æ˜¯19ç¾å…ƒ","note":"","ucode":"655F925451F772","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286424,"discussion_content":"ä¸ºä»€ä¹ˆAF_LOCAL+DGRAMçš„æ—¶å€™,å®¢æˆ·ç«¯éœ€è¦bindä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ï¼Ÿ\nå› ä¸ºæœåŠ¡å™¨æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®æƒ³è¦ç»™å®¢æˆ·ç«¯å›å¤çš„æ—¶å€™ï¼Œéœ€è¦çŸ¥é“å‘ç»™è°ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨éƒ½æœ‰åŠæ³•ï¼š\n1.å½“ä½¿ç”¨STREAMæ—¶ï¼Œä¸ç®¡æ˜¯AF_INETè¿˜æ˜¯AF_LOCAL, éƒ½æœ‰è¿æ¥çš„æ¦‚å¿µï¼Œæ‰€ä»¥æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨åŸæ¥çš„è¿æ¥\n2.å½“ä½¿ç”¨AF_INETæ—¶ï¼Œä¸ç®¡æ˜¯DGRAMè¿˜æ˜¯STREAM, éƒ½èƒ½çŸ¥é“å¯¹æ–¹çš„ip+port, ä¹Ÿèƒ½ç¡®å®šä¸€ä¸ªå”¯ä¸€çš„è¿›ç¨‹ï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯ä»£ç ä¸éœ€è¦æ˜¾ç¤ºçš„bindï¼Œåè®®æ ˆå·²ç»å¸®æˆ‘ä»¬åšäº†ã€‚\nåªæœ‰AF_LOCAL+DGRAMçš„æ—¶å€™ï¼Œæ²¡æœ‰è¿æ¥ï¼Œä¹Ÿæ²¡æœ‰ip+port, åªèƒ½æ˜¾å¼çš„æŒ‡å®šä¸€ä¸ªæ ‡å¿—å‘Šè¯‰æœåŠ¡ç«¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593170737,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179829,"user_name":"treasure","can_delete":false,"product_type":"c1","uid":1798993,"ip_address":"","ucode":"3D6948A2201B2F","user_header":"https://static001.geekbang.org/account/avatar/00/1b/73/51/aaedc2a6.jpg","comment_is_top":false,"comment_ctime":1582105912,"is_pvip":false,"replies":[{"id":"71043","content":"å®Œå…¨å¯ä»¥ã€‚unixstreamclientå°±æ²¡æœ‰bindã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1583053544,"ip_address":"","comment_id":179829,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582105912","product_id":100032701,"comment_content":"æˆ‘çœ‹ä»£ç ä¸ºä»€ä¹ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½bindè¿™ä¸ªå‡½æ•°ï¼Œå®¢æˆ·ç«¯ä¸åŠ bindå¯ä»¥å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484417,"discussion_content":"å®Œå…¨å¯ä»¥ã€‚unixstreamclientå°±æ²¡æœ‰bindã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583053544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154090,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1574380705,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574380705","product_id":100032701,"comment_content":"æœ¬åœ°å¥—æ¥å­—æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å¥—æ¥å­—ï¼Œå’Œ TCP&#47;UDP å¥—æ¥å­—ä¸åŒã€‚TCP&#47;UDP å³ä½¿åœ¨æœ¬åœ°åœ°å€é€šä¿¡ï¼Œä¹Ÿè¦èµ°ç³»ç»Ÿç½‘ç»œåè®®æ ˆï¼Œè€Œæœ¬åœ°å¥—æ¥å­—ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šè¯´æä¾›äº†ä¸€ç§å•ä¸»æœºè·¨è¿›ç¨‹é—´è°ƒç”¨çš„æ‰‹æ®µï¼Œå‡å°‘äº†åè®®æ ˆå®ç°çš„å¤æ‚åº¦ï¼Œæ•ˆç‡æ¯” TCP&#47;UDP å¥—æ¥å­—éƒ½è¦é«˜è®¸å¤šã€‚ç±»ä¼¼çš„ IPC æœºåˆ¶è¿˜æœ‰ UNIX ç®¡é“ã€å…±äº«å†…å­˜å’Œ RPC è°ƒç”¨ç­‰ã€‚<br>è¿™é‡Œçš„æè¿°ï¼Œâ€œå‡å°‘äº†åè®®æ ˆå®ç°çš„å¤æ‚åº¦â€ï¼Œæ²¡ç†è§£æœ¬åœ°å¥—æ¥å­—ï¼Œå…·ä½“è¿˜èµ°ä¸èµ°ç½‘ç»œçš„åè®®æ ˆï¼Ÿå¦‚æœèµ°åº”è¯¥ä»ç„¶å±äºç½‘ç»œé€šä¿¡çš„èŒƒç•´ï¼Œå¦‚æœä¸èµ°ï¼Œä»–å…·ä½“æ€ä¹ˆå®ç°çš„ï¼Œå’Œå…±äº«å†…å­˜æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Ÿ<br>è¿™é‡Œç¡®å®åˆ·æ–°äº†è®¤çŸ¥ï¼Œä¹‹å‰è®¤ä¸ºè¿›ç¨‹é—´é€šä¿¡ï¼Œå¿…é¡»è¦èµ°ç½‘ç»œåè®®çš„ï¼Œå“ªæ€•æ˜¯å•æœºä¸Šçš„ä¸¤ä¸ªè¿›ç¨‹ä¹Ÿæ˜¯è¿™æ ·ã€‚å…¶å®åªè¦ä»–ä»¬èƒ½äº¤æµä¿¡æ¯ï¼Œèµ°ä¸èµ°ç½‘ç»œæ²¡ä»€ä¹ˆå¿…ç„¶è”ç³»ï¼Œå…±äº«å†…å­˜è¿™ä¸ªå°±å®¹æ˜“ç†è§£å’Œå®ç°ï¼Œä¸è¿‡è¿˜æ˜¯éœ€è¦çº¦å®šåŒæ–¹äº¤æµçš„æ–¹å¼ï¼Œå¦åˆ™ä¿¡æ¯èƒ½è·å–ä½†ä¸ç†è§£ä¹Ÿä¸æˆã€‚","like_count":0},{"had_liked":false,"id":139068,"user_name":"Geek_d4f974","can_delete":false,"product_type":"c1","uid":1591783,"ip_address":"","ucode":"F91D0CD09CB13E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/NTSD503ibERiba4wcsoiaezDrjLMOVVlAlliagHc6ic3icWFfuzaFWaHwuULQDo22mPiabicImFTB7ial82OuBD96bl4RTQ/132","comment_is_top":false,"comment_ctime":1570539741,"is_pvip":false,"replies":[{"id":"54316","content":"ä¸ä¼šå•Šï¼Œä¼šä¸ä¼šæ˜¯æƒé™çš„é—®é¢˜ï¼Ÿä½ æ˜¯rootè´¦å·ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1570972322,"ip_address":"","comment_id":139068,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570539741","product_id":100032701,"comment_content":"è¿è¡Œserveråï¼Œåœ¨netstat -lxä¸­å¯ä»¥æŸ¥çœ‹åˆ°ï¼Œä½†æ˜¯åœ¨&#47;tmpæ–‡ä»¶å¤¹ä¸­æ²¡æœ‰ç”Ÿæˆunixstream.sockæ–‡ä»¶","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469775,"discussion_content":"ä¸ä¼šå•Šï¼Œä¼šä¸ä¼šæ˜¯æƒé™çš„é—®é¢˜ï¼Ÿä½ æ˜¯rootè´¦å·ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570972322,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136008,"user_name":"æ›¹ç»åš","can_delete":false,"product_type":"c1","uid":1238980,"ip_address":"","ucode":"782C1AE8F03EB3","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/c4/28b58d33.jpg","comment_is_top":false,"comment_ctime":1569327558,"is_pvip":false,"replies":[{"id":"52215","content":"æ²¡æœ‰è¿™ä¹ˆè¯´ï¼Œç›®å½•-æ–‡ä»¶è¿™ä¸ªå’Œå¹¶å‘æœ‰å…³ç³»ä¹ˆï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1569408570,"ip_address":"","comment_id":136008,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569327558","product_id":100032701,"comment_content":"&quot;å¦å¤–è¿˜è¦æ˜ç¡®ä¸€ç‚¹ï¼Œè¿™ä¸ªæœ¬åœ°æ–‡ä»¶ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªâ€œæ–‡ä»¶â€ï¼Œä¸èƒ½æ˜¯ä¸€ä¸ª&quot;ç›®å½•&quot;ï¼›&quot;<br>è¿™ä¹ˆè¯´æœ¬åœ°å¥—æ¥å­—æ˜¯ä¸æ˜¯ä¸é€‚åˆå®ç°å¤šå¹¶å‘çš„æœåŠ¡å™¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468418,"discussion_content":"æ²¡æœ‰è¿™ä¹ˆè¯´ï¼Œç›®å½•-æ–‡ä»¶è¿™ä¸ªå’Œå¹¶å‘æœ‰å…³ç³»ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569408570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133102,"user_name":"å²¸è¶…","can_delete":false,"product_type":"c1","uid":1590607,"ip_address":"","ucode":"F645DCF36D5C9F","user_header":"https://static001.geekbang.org/account/avatar/00/18/45/4f/3b24dccc.jpg","comment_is_top":false,"comment_ctime":1568360106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568360106","product_id":100032701,"comment_content":"1:æ™®é€šç”¨æˆ·åº”è¯¥æ˜¯æ²¡æœ‰ &#47;var&#47;lib&#47;unixstream.sock è¿™ä¸ªæ–‡ä»¶çš„è¯»å†™æƒé™çš„ï¼Œrootåˆ›å»ºä¸€èˆ¬ä¼šæ˜¯700çš„å½¢å¼ã€‚å¯ä»¥æ‰‹åŠ¨chmodæ·»åŠ æƒé™ï¼Œä½¿å¾—æ™®é€šç”¨æˆ·ä¹Ÿå¯ä»¥è®¿é—®è¯¥æœ¬åœ°å¥—æ¥å­—ã€‚<br>2:è¿™ä¸ªé—®é¢˜åœ¨ æµå¼å¥—æ¥å­—å’Œæ•°æ®æŠ¥ä¸¤ç§æƒ…å†µåº”è¯¥æ˜¯ä¸åŒçš„å§ã€‚æµå¼å¥—æ¥å­—ä¸­åº”è¯¥æ˜¯å¤ç”¨äº†socket closeçš„è¯­ä¹‰ï¼Œè¿›ç¨‹é€€å‡ºä¼šå…³é—­fdï¼Œè€Œå¯¹ç«¯çš„readåœ¨tcpè¿æ¥æ—¶ï¼Œæ”¶åˆ°finåˆ†èŠ‚ä¼šè¿”å›0ï¼Œè¿™é‡Œåœ¨æœ¬åœ°å¥—æ¥å­—ä¸Šåº”è¯¥æ˜¯æ¨¡æ‹Ÿäº†å¯¹ç«¯closeæ—¶çš„è¿™ç§æ•ˆæœã€‚ä½†æ˜¯æ•°æ®æŠ¥å¥—æ¥å­—æ˜¯ä¸å­˜åœ¨è¿™ç§æƒ…å†µä¸‹è¿”å›0çš„å®ç°çš„ï¼Œæ•…è€Œè¿™æ®µä»£ç å…¶å®ä¸ä¼šç”Ÿæ•ˆï¼Œå®é™…æ•ˆæœå±•ç¤ºä¸­ä¹Ÿæ²¡æœ‰é€€å‡º<br>3:é—®é¢˜ä¸‰è‚¯å®šä¼šæŠ¥é”™ï¼Œè™½ä¸ä¼šä¸‰æ¬¡æ¡æ‰‹ï¼Œä½†å†…æ ¸è‚¯å®šæ— æ³•æŠŠè¿™ä¸¤ç§å¥—æ¥å­—åœ¨åº•å±‚è¿æ¥èµ·æ¥ï¼Œä½†å…·ä½“é”™è¯¯æœªçŸ¥ã€‚","like_count":0},{"had_liked":false,"id":131498,"user_name":"Geek_Wison","can_delete":false,"product_type":"c1","uid":1504371,"ip_address":"","ucode":"2CD880F07FDD57","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er4HlmmWfWicNmo3x3HKaOwz3ibcicDFlV5xILbILKGFCXbnaLf2fZRARfBdVBC5NhIPmXxaxA0T9Jhg/132","comment_is_top":false,"comment_ctime":1567769035,"is_pvip":false,"replies":[{"id":"50791","content":"Cè¯­è¨€å¯ä»¥æ¥æ”¶è¿™æ ·ä¸å¸¦èŠ±æ‹¬å·çš„ç®€å•å†™æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1568190275,"ip_address":"","comment_id":131498,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1567769035","product_id":100032701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¿™ç¯‡æ–‡ç« çš„ç¬¬ä¸€æ®µä»£ç çš„ç¬¬33ï½36è¡Œçš„if elseæ˜¯ä¸æ˜¯å†™å¾—ä¸å¤ªå¯¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466486,"discussion_content":"Cè¯­è¨€å¯ä»¥æ¥æ”¶è¿™æ ·ä¸å¸¦èŠ±æ‹¬å·çš„ç®€å•å†™æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568190275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1504371,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er4HlmmWfWicNmo3x3HKaOwz3ibcicDFlV5xILbILKGFCXbnaLf2fZRARfBdVBC5NhIPmXxaxA0T9Jhg/132","nickname":"Geek_Wison","note":"","ucode":"2CD880F07FDD57","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":22586,"discussion_content":"ä¸æ˜¯è¿™ä¸ªæ„æ€å“¦ï¼Œæˆ‘è¯´çš„æ˜¯æ³¨é‡Šä¸å¯¹ã€‚ \n/* back to for() */\né‚£é‡Œå¹¶æ²¡æœ‰forç»“æ„å‘€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569656681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128301,"user_name":"knull","can_delete":false,"product_type":"c1","uid":1043484,"ip_address":"","ucode":"3BFECF3D29F40C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","comment_is_top":false,"comment_ctime":1566869642,"is_pvip":false,"replies":[{"id":"47923","content":"æˆ‘ç†è§£æ˜¯ç¼–ç¨‹æ¨¡å‹çš„å·®åˆ«","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567005136,"ip_address":"","comment_id":128301,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1566869642","product_id":100032701,"comment_content":"è€å¸ˆï¼Œèƒ½ä¸èƒ½è¯´è¯´ä¸¤ç§unixå¥—æ¥å­—çš„ä½¿ç”¨åœºæ™¯ï¼Ÿtcpå’Œudpæœ‰æ˜æ˜¾çš„ç‰¹å¾å·®å¼‚ã€‚ä½†æ˜¯ï¼Œunixçš„å¥½åƒå·®åˆ«ä¸æ˜¯ç‰¹åˆ«æ˜æ˜¾ã€‚æˆ‘æƒ³è±¡ä¸­ï¼Œæœ¬åœ°çš„è¯ï¼Œä¸¢åŒ…å¯èƒ½åŸºæœ¬æ²¡æœ‰å§ï¼Ÿä»…ä»…æ˜¯ä¸ºäº†ä¸tcpã€udpå¯¹åº”ï¼Œè¿˜æ˜¯æœ‰ç‰¹åˆ«çš„æ„ä¹‰ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464885,"discussion_content":"æˆ‘ç†è§£æ˜¯ç¼–ç¨‹æ¨¡å‹çš„å·®åˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567005136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1043484,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg","nickname":"knull","note":"","ucode":"3BFECF3D29F40C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6693,"discussion_content":"OKï¼Œå¤šè°¢è€å¸ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567054447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125862,"user_name":"fee","can_delete":false,"product_type":"c1","uid":1523581,"ip_address":"","ucode":"BECB8D2518C56E","user_header":"https://static001.geekbang.org/account/avatar/00/17/3f/7d/6fb0d4e9.jpg","comment_is_top":false,"comment_ctime":1566266126,"is_pvip":false,"replies":[{"id":"48230","content":"å¯ä»¥çš„ï¼Œé€šè¿‡æŒ‡é’ˆä½ç½®æ¥è®¡ç®—offsetï¼Œå†è¡¥ä¸Šåè®®æœ¬èº«çš„å¤§å°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567133661,"ip_address":"","comment_id":125862,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566266126","product_id":100032701,"comment_content":"è®¡ç®—åœ°å€é•¿åº¦ len = offsetï¼ˆstruct sockaddr_unï¼Œ sun_familyï¼‰ + strlenï¼ˆ.sun_familyï¼‰å…¬å¸ä»£ç ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463723,"discussion_content":"å¯ä»¥çš„ï¼Œé€šè¿‡æŒ‡é’ˆä½ç½®æ¥è®¡ç®—offsetï¼Œå†è¡¥ä¸Šåè®®æœ¬èº«çš„å¤§å°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567133661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125640,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1566219467,"is_pvip":false,"replies":[{"id":"47900","content":"å› ä¸ºæˆ‘ä¸æƒ³æŠŠå­—ç¬¦ä¸²åé¢çš„\\0éƒ½å‘é€å‡ºå»ï¼Œåªæƒ³å‘é€æœ‰æ•ˆå­—ç¬¦ã€‚åé¢é‚£ä¸ªå…¶å®ä¹Ÿå¯ä»¥æ‹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567003551,"ip_address":"","comment_id":125640,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1566219467","product_id":100032701,"comment_content":"è¿˜æœ‰ä¸ªé—®é¢˜ä¸€ç›´ä¸æ˜ç™½ ä¸ºä»€ä¹ˆåœ¨å‘é€æ•°æ®çš„æ—¶å€™ç”¨çš„strlen(send_line)è€Œä¸æ˜¯sizeof( send_line ), æ–‡ä¸­ä»£ç çš„sockaddr å†™æˆäº†sockadd","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463640,"discussion_content":"å› ä¸ºæˆ‘ä¸æƒ³æŠŠå­—ç¬¦ä¸²åé¢çš„\\0éƒ½å‘é€å‡ºå»ï¼Œåªæƒ³å‘é€æœ‰æ•ˆå­—ç¬¦ã€‚åé¢é‚£ä¸ªå…¶å®ä¹Ÿå¯ä»¥æ‹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567003551,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170784,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","nickname":"yusuf","note":"","ucode":"9F32149B2ADDA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5568,"discussion_content":"strlençš„ç»“æœæ˜¯å®é™…çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œè€Œsizeofçš„ç»“æœæ˜¯MAXLINE","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566356115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125638,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1566219057,"is_pvip":false,"replies":[{"id":"47899","content":"ä½ æ˜¯ä¸æ˜¯æ”¹æˆäº†streamç±»å‹çš„ï¼ŸæŠ¥é”™è²Œä¼¼æ˜¯è¯´æœªè¿æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1567003492,"ip_address":"","comment_id":125638,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566219057","product_id":100032701,"comment_content":" #include&quot;..&#47;my_head.h&quot; <br> #define LISTENQ 10 <br> #define BUFFSIZE 1024 <br> int <br> main( int argc, char* argv[] ) { <br>     if ( argc != 2 ) { <br>         error( 1, 0, &quot;useage unixstreamserver &lt;local path&gt;&quot; ); <br>     } <br> 15     socklen_t clilen; <br> 16     struct sockaddr_un cliaddr; <br> 17     struct sockaddr_un serveraddr; <br> 18     int sockfd = socket( AF_LOCAL, SOCK_DGRAM, 0 ); <br> 19     if ( sockfd &lt; 0 ) { <br> 20         error( 1, errno, &quot;socket create failed&quot; ); <br> 21     } <br> 22  <br> 23     char* local_path = argv[1]; <br> 24     unlink( local_path ); <br> 25     bzero( &amp;serveraddr, sizeof( serveraddr ) ); <br> 26     serveraddr.sun_family = AF_LOCAL;   strcpy( serveraddr.sun_path,local_path ); <br> 27     if ( bind( sockfd, ( struct sockaddr*  ) &amp;serveraddr, sizeof( serveraddr ) ) &lt; 0 ) { <br> 28         error( 1, errno, &quot;bind failed&quot; );<br> 29     } <br> 30 &#47;*<br> 31     if ( listen( listenfd, LISTENQ ) &lt; 0 ) {<br> 32         error( 1, errno, &quot;listen failed&quot; );<br> 33     }<br> 34 *&#47;<br> 35 <br> 36     clilen = sizeof( cliaddr );<br> 42     char buf[BUFFSIZE];<br> 43     while( 1 ) {<br> 44         bzero( buf, sizeof( buf ) );<br> 45         if ( recvfrom( sockfd, buf, BUFFSIZE, 0, ( struct sockaddr*  ) &amp;cliaddr, &amp;clilen ) == 0 ) {<br> 46             printf( &quot;client quit&quot; );<br> 47             break;<br> 48         }<br> 49         printf( &quot;Recevie: %s&quot;, buf );<br> 50         char send_line[MAXLINE];<br> 51         sprintf( send_line, &quot;Hi, %s&quot;, buf );<br> 52         int nbytes = sizeof( send_line );<br> 53         if ( sendto( sockfd, send_line, nbytes, 0,  ( struct sockaddr* ) &amp;cliaddr, clilen ) != nbytes ) {<br> 54             error( 1, errno, &quot;write error&quot; );<br> 55         }<br> 56     }<br> 57 <br> 58     exit( 0 );<br> 59 } <br>æˆ‘è¿™ä¸ªä»£ç æœ¬åœ°æ•°æ®æŠ¥å¥—æ¥å­— æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°æ•°æ®è¿‡åå‘é€æ—¶å°±æŠ¥é”™å¦‚ä¸‹<br>ubuntu@VM-0-17-ubuntu:~&#47;network&#47;local_socket$ .&#47;dgrams .&#47;dgram.sock <br>Recevie: 1<br>.&#47;dgrams: write error: Transport endpoint is not connected å°±ä¸çŸ¥é“æ€ä¹ˆè§£å†³äº†                       ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463639,"discussion_content":"ä½ æ˜¯ä¸æ˜¯æ”¹æˆäº†streamç±»å‹çš„ï¼ŸæŠ¥é”™è²Œä¼¼æ˜¯è¯´æœªè¿æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567003492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125161,"user_name":"ç ´æ™“^_^","can_delete":false,"product_type":"c1","uid":1149592,"ip_address":"","ucode":"3224920095AC9E","user_header":"https://static001.geekbang.org/account/avatar/00/11/8a/98/2be9d17b.jpg","comment_is_top":false,"comment_ctime":1566102875,"is_pvip":false,"replies":[{"id":"45907","content":"å·²ç»æŠŠä»£ç pushåˆ°githubï¼Œç­”ç–‘ç¯‡ç»Ÿä¸€å›å¤","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566124155,"ip_address":"","comment_id":125161,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566102875","product_id":100032701,"comment_content":"é‚£äº›æ‹¼å‘½è¦è€å¸ˆè´´ä»£ç å¸¦gitä¸Šçš„æœ‰ç‚¹æ‡’å•Šï¼Œè¿™æœ¬æ¥å°±æ˜¯ä¸€é—¨æ³¨é‡å®è·µçš„è¯¾ç¨‹ï¼Œç¼–ç¨‹ä¸å®è·µä½ èƒ½æœ‰æ”¶è·ï¼Ÿä¸å¦¨è‡ªå·±æ•²ä¸€ä¸‹æ”¶è·æ›´æ·±å‘¢ï¼Ÿå„ä½å…„å¼Ÿã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463458,"discussion_content":"å·²ç»æŠŠä»£ç pushåˆ°githubï¼Œç­”ç–‘ç¯‡ç»Ÿä¸€å›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566124155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125072,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1566054440,"is_pvip":false,"replies":[{"id":"45960","content":"æˆ‘è¯•äº†ä¸‹ï¼Œä¸åŠ  -a çœ‹ä¸åˆ° &quot;LISTENING&quot;çŠ¶æ€ï¼Œç³»ç»Ÿä¸º4.4.0-159-generic","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566130776,"ip_address":"","comment_id":125072,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566054440","product_id":100032701,"comment_content":"netstat -p -A unix<br><br>ä¸ºä»€ä¹ˆnetstatå‘½ä»¤ä¸åŠ -aå°±çœ‹åˆ°æˆ‘å¼€å¯çš„é‚£ä¸ªæœ¬åœ°å¥—æ¥å­—å‘¢ï¼Œæ–‡æ¡£ä¸Šè¯´-açš„ä½œç”¨æŸ¥çœ‹æ‰€æœ‰å·²ç»å¤„äºLISTENINGçŠ¶æ€çš„å¥—æ¥å­—ï¼Œä½†æ˜¯ç”¨netstat -a -p -A unixæŸ¥çœ‹ï¼Œè¿™ä¸ªå¥—æ¥å­—æ˜æ˜å·²ç»å¤„äºLISTENINGçŠ¶æ€äº†å•Š","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463422,"discussion_content":"æˆ‘è¯•äº†ä¸‹ï¼Œä¸åŠ  -a çœ‹ä¸åˆ° &amp;quot;LISTENING&amp;quot;çŠ¶æ€ï¼Œç³»ç»Ÿä¸º4.4.0-159-generic","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566130776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124962,"user_name":"Z12","can_delete":false,"product_type":"c1","uid":1118159,"ip_address":"","ucode":"59F5E62F67FFDC","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/cf/bfa0dc80.jpg","comment_is_top":false,"comment_ctime":1566028940,"is_pvip":false,"replies":[{"id":"45913","content":"ç­”ç–‘ç¯‡ç»Ÿä¸€å›å¤","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566128531,"ip_address":"","comment_id":124962,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566028940","product_id":100032701,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œè¿™é—¨è¯¾ç¨‹æ¯”è¾ƒé‡è§†å®æˆ˜ï¼Œæ–‡ç« çš„ä»£ç ä¹Ÿæ¯”è¾ƒå¤šï¼Œå¦‚æœèƒ½æŠŠä»£ç æ”¾ä¸Šgithubï¼Œæ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹å’Œè°ƒè¯•ï¼Œé‚£å°±å¤ªå¥½äº†","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463381,"discussion_content":"ç­”ç–‘ç¯‡ç»Ÿä¸€å›å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566128531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124940,"user_name":"åˆ˜æ˜","can_delete":false,"product_type":"c1","uid":1109382,"ip_address":"","ucode":"5871C54AAE1A81","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/86/5855aaa4.jpg","comment_is_top":false,"comment_ctime":1566024002,"is_pvip":false,"replies":[{"id":"45914","content":"TCPå­—èŠ‚æµæœ‰åºå¯é ï¼›UDPæ²¡æœ‰æœ‰åºå¯é ","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566128558,"ip_address":"","comment_id":124940,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566024002","product_id":100032701,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼šTCPå¯é ï¼ŒUDPä¸å¯é ï¼Œæœ¬åœ°å¥—æ¥å­—çš„å­—èŠ‚æµå½¢å¼å’Œæ•°æ®æŠ¥å½¢å¼çš„å¯é æ€§åˆ†åˆ«æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463368,"discussion_content":"TCPå­—èŠ‚æµæœ‰åºå¯é ï¼›UDPæ²¡æœ‰æœ‰åºå¯é ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566128558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124813,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1565999303,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565999303","product_id":100032701,"comment_content":"é—®é¢˜ä¸€ï¼š<br>ä¸ªäººæ„Ÿè§‰å®¢æˆ·ç«¯æ²¡æœ‰æƒé™ä¹Ÿå¯ä»¥è¿æ¥ï¼Œè¿™ä¸ªsockæ–‡ä»¶æ˜¯æœåŠ¡ç«¯åˆ›å»ºçš„ï¼Œå®¢æˆ·ç«¯ä»…ä»…æ˜¯å‘è¿™ä¸ªå¥—æ¥å­—å‘é€ã€æ¥å—æ•°æ®è€Œå·²ï¼›ç±»æ¨åˆ°tcpçš„å¥—æ¥å­—ï¼ŒæœåŠ¡ç«¯åªè¦ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œé˜²ç«å¢™æ”¾å¼€ç«¯å£ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å¯¹å®¢æˆ·ç«¯æ— é™åˆ¶çš„ï¼ˆæ‰€ä»¥å®¢æˆ·ç«¯éƒ½å¯ä»¥è¿æ¥ï¼‰ã€‚<br>é—®é¢˜äºŒï¼š<br>è¿™ä¸ªæœåŠ¡ç«¯éšç€å®¢æˆ·ç«¯çš„é€€å‡ºè€Œé€€å‡ºï¼Œåº”è¯¥æ˜¯æœåŠ¡ç«¯çš„ä»£ç æ‰€è‡´ï¼Œä»£ç ä¸­readæ–¹æ³•æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¼šé˜»å¡ï¼Œå®¢æˆ·ç«¯å‘å®Œæ¶ˆæ¯è¿™ä¸ªå°±ä¼šè§£é™¤é˜»å¡ï¼Œä½†æ˜¯å®¢æˆ·ç«¯é€€å‡ºï¼Œè¿™ä¸ªreadæ–¹æ³•è¯»ä¸åˆ°æ•°æ®ï¼Œè¿›å…¥breakè¯­å¥ï¼Œmainæ–¹æ³•ç»“æŸã€‚<br>é—®é¢˜ä¸‰ï¼š<br>æœåŠ¡ç«¯ä»¥æ•°æ®åŒ…æ¥å—ï¼Œå®¢æˆ·ç«¯ç”¨å­—èŠ‚æµå‘é€ï¼ˆæœ‰ç‚¹å¥½ç©ï¼‰ï¼›ç”±äºæœ¬åœ°å¥—æ¥å­—çš„å­—èŠ‚æµæ²¡æœ‰ä¸‰æ¬¡æ¡æ‰‹ï¼Œæˆ‘æƒ³å®¢æˆ·ç«¯è¿˜æ˜¯å¯ä»¥æŠŠæ•°æ®å‘ç»™æœåŠ¡ç«¯çš„ï¼Œè‡³äºæœåŠ¡ç«¯çš„æ¥æ”¶æƒ…å†µ......å®åœ¨ç¼–ä¸ä¸‹å»äº†ï¼Œè¯·è€å¸ˆæŒ‡æ•™ï¼","like_count":0},{"had_liked":false,"id":124753,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1565962250,"is_pvip":false,"replies":[{"id":"45917","content":"æˆ‘ä¼šåœ¨ç­”ç–‘ç¯‡ç»Ÿä¸€è¯¦ç»†å›å¤ã€‚<br><br>å…ˆåœ¨è¿™é‡ŒæŠ›ç –å¼•ç‰ï¼š<br>ç¬¬ä¸€ï¼Œè¿˜æ˜¯æ€¥éœ€è¦çœ‹ä¸‹Cè¯­è¨€çš„åŸºç¡€åŸç†ï¼Œå¦‚æ•°ç»„ã€æŒ‡é’ˆã€ç»“æ„ä½“ç­‰ï¼›<br><br>ç¬¬äºŒï¼ŒUNIXç½‘ç»œç¼–ç¨‹å’ŒTCP&#47;IPåè®®è¯¦è§£å¯ä»¥çœ‹çœ‹<br><br>ç¬¬ä¸‰ï¼Œè·Ÿæˆ‘ä¸€èµ·æ•²ä»£ç :)","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566128730,"ip_address":"","comment_id":124753,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1565962250","product_id":100032701,"comment_content":"è€å¸ˆ æˆ‘å†å•°å—¦ä¸€æ¡ç•™è¨€:<br><br>æˆ‘åªè€ƒè¿‡c++äºŒçº§ æ“ä½œç³»ç»Ÿ è®¡ç»„ ç½‘ç»œéƒ½æ²¡çœ‹è¿‡<br><br>æˆ‘å¾ˆæƒ³é¡ºç€è€å¸ˆè¿™ä¸ªä¸“æ  è·Ÿä¸ŠèŠ‚å¥ çœ‹ä¹¦å†™ä»£ç  æˆ‘ä¸æƒ³ä¹°äº†è¿™ä¸ªä¸“æ åè½ä¸‹è¶Ÿ <br><br>è€å¸ˆå¯ä»¥å‘ŠçŸ¥ä¸€ä¸‹ è¿™ä¸ªæ˜¯éœ€è¦cçš„ç¯å¢ƒè¿˜æ˜¯c++çš„ç¯å¢ƒå—ï¼Ÿ <br>å¦å¤–ï¼Œè€å¸ˆå¯ä»¥å‘ŠçŸ¥ä¸€ä¸‹ï¼Œéœ€è¦çœ‹çš„ä¹¦å—ï¼Ÿ  èƒ½å…·ä½“åˆ°ä¹¦åä½œè€…æœ€å¥½ã€‚ ç°å®ä¸€ç‚¹ï¼Œä¹Ÿä¸è¦å¤ªå¤šï¼Œä¸€åˆ°ä¸¤æœ¬å°±è¡Œã€‚<br>æˆ‘åŸºç¡€å®åœ¨ä½“å¤ªå·®äº†ï¼Œå¾ˆæƒ³é€šè¿‡è¿™ç§æ–¹å¼æ¥è¡¥æ•‘ã€‚æ±‚è€å¸ˆå›ç­”ã€‚<br>ps: å¾ˆå¯èƒ½å¾—åˆ°æ‚¨çš„å›å¤åï¼Œä¼šæˆªå±ç„¶ååˆ æ‰è¿™æ¡ç•™è¨€ï¼Œå› ä¸ºè§‰å¾—è‡ªå·±å¤ªå·®åŠ²äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463307,"discussion_content":"æˆ‘ä¼šåœ¨ç­”ç–‘ç¯‡ç»Ÿä¸€è¯¦ç»†å›å¤ã€‚\n\nå…ˆåœ¨è¿™é‡ŒæŠ›ç –å¼•ç‰ï¼š\nç¬¬ä¸€ï¼Œè¿˜æ˜¯æ€¥éœ€è¦çœ‹ä¸‹Cè¯­è¨€çš„åŸºç¡€åŸç†ï¼Œå¦‚æ•°ç»„ã€æŒ‡é’ˆã€ç»“æ„ä½“ç­‰ï¼›\n\nç¬¬äºŒï¼ŒUNIXç½‘ç»œç¼–ç¨‹å’ŒTCP/IPåè®®è¯¦è§£å¯ä»¥çœ‹çœ‹\n\nç¬¬ä¸‰ï¼Œè·Ÿæˆ‘ä¸€èµ·æ•²ä»£ç :)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566128730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170784,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","nickname":"yusuf","note":"","ucode":"9F32149B2ADDA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5125,"discussion_content":"linuxä¸‹ç”¨gccç¼–è¯‘å°±å¤Ÿäº†ã€‚ä½†æ–‡ä¸­çš„ä»£ç å¹¶ä¸èƒ½ç›´æ¥ç¼–è¯‘é€šè¿‡ï¼Œå¯èƒ½éœ€è¦æ·»åŠ ä¸€äº›å¤´æ–‡ä»¶ï¼Œè¿˜å¯èƒ½éœ€è¦ä¿®å¤ä¸€äº›æ‹¼å†™é”™è¯¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565966103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1074310,"avatar":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","nickname":"å¤šè¥„ä¸¸","note":"","ucode":"1AA1497C5A293C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1170784,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","nickname":"yusuf","note":"","ucode":"9F32149B2ADDA0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5127,"discussion_content":"å—¯å—¯ è°¢è°¢ä½  æˆ‘è£…ä¸€ä¸‹gcc","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565966542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5125,"ip_address":""},"score":5127,"extra":""}]}]},{"had_liked":false,"id":124748,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1565960374,"is_pvip":false,"replies":[{"id":"45918","content":"æ˜¯çš„ï¼Œæ–‡ä»¶æè¿°ç¬¦","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566128743,"ip_address":"","comment_id":124748,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1565960374","product_id":100032701,"comment_content":"if ((connfd = accept(listenfd, (struct sockaddr *) &amp;cliaddr, &amp;clilen)) &lt; 0) <br><br>sockfd = socket(AF_LOCAL, SOCK_STREAM, 0);<br><br>è€å¸ˆ è¿™é‡Œçš„listenfd sockfd éƒ½æ˜¯intç±»å‹çš„ è¿™ä¸ªä»£è¡¨å•¥å•Š æ˜¯javaé‡Œé¢çš„fileDescriptorå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463305,"discussion_content":"æ˜¯çš„ï¼Œæ–‡ä»¶æè¿°ç¬¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566128743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170784,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/60/eae432c6.jpg","nickname":"yusuf","note":"","ucode":"9F32149B2ADDA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5129,"discussion_content":"åœ¨socketå‡½æ•°çš„æ³¨é‡Šé‡Œæœ‰è¯¦ç»†è¯´æ˜ï¼š\n/* Create a new socket of type TYPE in domain DOMAIN, using\n   protocol PROTOCOL.  If PROTOCOL is zero, one is chosen automatically.\n   Returns a file descriptor for the new socket, or -1 for errors.  */\nextern int socket (int __domain, int __type, int __protocol) __THROW;","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1565970769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124746,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1565959658,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565959658","product_id":100032701,"comment_content":"(ps: è€å¸ˆè®²çš„æ˜¯çœŸçš„å¥½ å¯¹æ¯”åˆ†æéƒ½æœ‰)","like_count":0},{"had_liked":false,"id":124745,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1565959605,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565959605","product_id":100032701,"comment_content":"1. æ–‡ä»¶æ˜¯æœåŠ¡ç«¯æœåŠ¡å™¨ä¸Šçš„ æœåŠ¡ç«¯æœ¬åœ°ç›‘å¬çš„ æœåŠ¡ç«¯éœ€è¦æƒé™ å®¢æˆ·ç«¯åº”è¯¥ä¸éœ€è¦å§ æ‰€ä»¥åº”è¯¥å¯ä»¥è¿æ¥æˆåŠŸå§<br><br>2. çœ‹ä»£ç æ˜¯readè¿”å›å€¼æ˜¯0çš„æ—¶å€™é€€å‡ºçš„<br><br>3. ä¸€ä¸ªæ˜¯socket_stream ä¸€ä¸ªæ˜¯datagram ä¸¤ä¸ªæ ¼å¼ä¸ä¸€æ · åº”è¯¥ä¼šæŠ¥é”™å§","like_count":0},{"had_liked":false,"id":124701,"user_name":"Sweety","can_delete":false,"product_type":"c1","uid":1228667,"ip_address":"","ucode":"DC90C959AE147F","user_header":"https://static001.geekbang.org/account/avatar/00/12/bf/7b/e9592637.jpg","comment_is_top":false,"comment_ctime":1565947577,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565947577","product_id":100032701,"comment_content":"1.æ— æ³•è¿æ¥,æ²¡æœ‰æƒé™.<br>3.æ— æ³•è¿æ¥,åè®®ä¸ä¸€æ ·","like_count":0},{"had_liked":false,"id":124613,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1565927590,"is_pvip":false,"replies":[{"id":"45921","content":"èµ·åˆ°å®šä½çš„ä½œç”¨ï¼Œä¸€å®šéœ€è¦çš„","user_name":"ä½œè€…å›å¤","user_name_real":"froghui","uid":"1618647","ctime":1566128853,"ip_address":"","comment_id":124613,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1565927590","product_id":100032701,"comment_content":"è¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼Œè¿™ä¸ªæœ¬åœ°å¥—æ¥å­—æŒ‚é çš„.sockæ–‡ä»¶ï¼Œå¥½åƒåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åœ¨å‘é€æ•°æ®çš„æ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶å¹¶æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼ˆä¸ç®¡æ˜¯æ–‡ä»¶å¤§å°ã€æ–‡ä»¶ä¿®æ”¹æ—¥æœŸï¼‰ï¼Œé‚£è¿™ä¸ª.sockç©ºæ–‡ä»¶ç©¶ç«Ÿåœ¨é€šä¿¡æœŸé—´èµ·åˆ°ä»€ä¹ˆä½œç”¨ï¼Œæ˜¯ä¸æ˜¯linuxå¿…é¡»è¦æ±‚æœ‰è¿™æ ·çš„ä¸€ä¸ªç©ºæ–‡ä»¶çš„å­˜åœ¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1618647,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b2/d7/df4086cf.jpg","nickname":"froghui","note":"","ucode":"843028B4E07F41","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463251,"discussion_content":"èµ·åˆ°å®šä½çš„ä½œç”¨ï¼Œä¸€å®šéœ€è¦çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566128853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397631,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVUskibDnhMt5MCIJ8227HWkeg2wEEyewps8GuWhWaY5fy7Ya56bu2ktMlxdla3K29Wqia9efCkWaQ/132","nickname":"è¡¬è¡«çš„ä»·æ ¼æ˜¯19ç¾å…ƒ","note":"","ucode":"655F925451F772","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":23857,"discussion_content":"è¿™ä¸ª.sock æ˜¯ä¸æ˜¯ç±»ä¼¼tcp/udp é€šä¿¡æ—¶ç”¨åˆ°çš„ip+port,æ¥ç¡®å®šè¿™ä¸ªè¿æ¥çš„å”¯ä¸€æ€§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569926444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1149592,"avatar":"https://static001.geekbang.org/account/avatar/00/11/8a/98/2be9d17b.jpg","nickname":"ç ´æ™“^_^","note":"","ucode":"3224920095AC9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5380,"discussion_content":"å¯ä»¥å»çœ‹çœ‹Unixç¯å¢ƒç¼–ç¨‹ä¸­çš„UnixåŸŸå¥—æ¥å­—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566214396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124556,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1565920228,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565920228","product_id":100032701,"comment_content":"1ã€POSIXè¦æ±‚è°ƒç”¨connecté“¾æ¥ä¸€ä¸ªUnixåŸŸå¥—æ¥å­—æ¶‰åŠçš„æƒé™æµ‹è¯•ç­‰åŒäºè°ƒç”¨openä»¥åªå†™æ–¹å¼è®¿é—®ç›¸åº”çš„è·¯å¾„åã€‚æ‰€ä»¥å¦‚æœå®¢æˆ·ç«¯å¯¹è·¯å¾„åæ²¡æœ‰æƒé™ï¼Œé“¾æ¥ä¼šå¤±è´¥ã€‚<br><br>2ã€connectçš„å‡ºé”™æ¡ä»¶åŒ…æ‹¬ï¼š<br>       è¯¥è·¯å¾„åå·²ç»å­˜åœ¨å´ä¸æ˜¯ä¸€ä¸ªå¥—æ¥å­—ã€‚<br>       è¯¥è·¯å¾„åå·²ç»å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªå¥—æ¥å­—ï¼Œä¸è¿‡æ²¡æœ‰ä¸ä¹‹å…³è”çš„æ‰“å¼€çš„æè¿°ç¬¦ã€‚<br>       è¯¥è·¯å¾„åå·²ç»å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªå¥—æ¥å­—ï¼Œä¸è¿‡ç±»å‹ä¸ç¬¦ã€‚<br>   æ‰€ä»¥æ•°æ®æŠ¥æœ¬åœ°å¥—æ¥å­—è¿æ¥ä¸åˆ°å­—èŠ‚æµå¥—æ¥å­—ï¼Œåä¹‹äº¦ç„¶ã€‚","like_count":0},{"had_liked":false,"id":124540,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1565918209,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565918209","product_id":100032701,"comment_content":"æœ‰2ä¸ªç–‘é—®ï¼Œè¯·è€å¸ˆæŒ‡æ•™ã€‚ï¼ˆè€å¸ˆæäº¤çš„é—®é¢˜ï¼Œæˆ‘ä¸‹æ¥æ€è€ƒä¸€ä¸‹å†å›ç­”ï¼‰<br>1. å­—èŠ‚æµæœ¬åœ°å¥—æ¥å­—æ²¡æœ‰å»ºç«‹è¿æ¥ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§éè¿æ¥ã€å­—èŠ‚æµçš„é€šä¿¡ï¼Œæ˜¯å¦æœ‰ç±»ä¼¼TCPçš„æ’é”™ã€é‡ä¼ ç­‰ç‰¹æ€§å‘¢ï¼Ÿ<br>2. å…³äºæœ¬åœ°å¥—æ¥å­—å¤§è‡´ä½¿ç”¨çš„åœºæ™¯ï¼Œæ–‡ç« ä¸­ç”¨Kubernetesä¸¾ä¾‹è¯´æ˜ï¼Œæˆ‘æƒ³æ˜¯ä¸æ˜¯æœ‰çš„è½¯ä»¶å¯åŠ¨çš„æ—¶å€™ä¼šå¼€å¯å¤šä¸ªè¿›ç¨‹ï¼Œ<br>æ¯ä¸ªè¿›ç¨‹å¯èƒ½æ˜¯å±äºæ­¤è½¯ä»¶çš„ä¸åŒæ¨¡å—ï¼ˆä¸ºäº†è§£è€¦ï¼‰ï¼Œä½†æ˜¯è¿™äº›æ¨¡å—ä¹‹é—´ä¹Ÿå­˜åœ¨å½¼æ­¤äº¤æ¢ä¿¡æ¯çš„æƒ…å†µï¼Œ<br>å¯èƒ½å°±éœ€è¦æœ¬ç« çš„æœ¬åœ°å¥—æ¥å­—æ¥åšï¼ˆä¹Ÿå¯ä»¥ç”¨æ‰€è°“IPCçš„å…¶ä»–æ–¹å¼ï¼Œå¦‚å…±äº«å†…å­˜ï¼‰ã€‚<br>è¯·é—®æˆ‘çš„ç†è§£æ˜¯å¦æ­£ç¡®ï¼Œå¦å¤–è¯·è€å¸ˆå†ä¸¾å‡ ä¸ªç°å®ä¸­é‚£äº›è½¯ä»¶ä½¿ç”¨æœ¬åœ°å¥—æ¥å­—çš„åœºæ™¯æ¥å¸®åŠ©æ¶ˆåŒ–ä¸€ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":124518,"user_name":"åˆ˜ä¸¹","can_delete":false,"product_type":"c1","uid":1081922,"ip_address":"","ucode":"66594D1C957E15","user_header":"https://static001.geekbang.org/account/avatar/00/10/82/42/8b04d489.jpg","comment_is_top":false,"comment_ctime":1565916025,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565916025","product_id":100032701,"comment_content":"æœ¬åœ°å¥—æ¥å­—å¯ä»¥ä½¿ç”¨æŠ½è±¡è·¯å¾„ï¼Œèƒ½å¦ä»‹ç»æ¯”è¾ƒä¸€ä¸‹?","like_count":0},{"had_liked":false,"id":124497,"user_name":"(ï¿£_ï¿£ )","can_delete":false,"product_type":"c1","uid":1133366,"ip_address":"","ucode":"8B6E2EF240D4AD","user_header":"https://static001.geekbang.org/account/avatar/00/11/4b/36/ed40fb3a.jpg","comment_is_top":false,"comment_ctime":1565913012,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565913012","product_id":100032701,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œåº”è¯¥æ˜¯ä¸å¯ä»¥æ­£å¸¸é€šä¿¡çš„ã€‚çœ‹äº†ä¸‹é‚£ä¸ªæ–‡ä»¶å…¶ä»–ç”¨æˆ·æƒé™æ²¡æœ‰å†™æƒé™ï¼Œä¾èµ–æ–‡ä»¶é€šä¿¡åº”è¯¥æ˜¯ä¼šå¯¹æ–‡ä»¶è¯»å†™","like_count":0}]}