{"id":400213,"title":"27 | æƒé™æ¨¡å‹ï¼š5å¤§æƒé™æ¨¡å‹æ˜¯å¦‚ä½•è¿›è¡Œèµ„æºæˆæƒçš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å­”ä»¤é£ã€‚åœ¨å¼€å§‹è®²è§£å¦‚ä½•å¼€å‘æœåŠ¡ä¹‹å‰ï¼Œæˆ‘å…ˆæ¥ä»‹ç»ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„èƒŒæ™¯çŸ¥è¯†ï¼šæƒé™æ¨¡å‹ã€‚</p><p>åœ¨ä½ çš„ç ”å‘ç”Ÿæ¶¯ä¸­ï¼Œåº”è¯¥ä¼šé‡åˆ°è¿™æ ·ä¸€ç§ææ€–çš„æ“ä½œï¼šå¼ ä¸‰å› ä¸ºè¯¯æ“ä½œåˆ é™¤äº†æå››çš„èµ„æºã€‚ä½ åœ¨åˆ·æ–°é—»æ—¶ï¼Œä¹Ÿå¯èƒ½ä¼šåˆ·åˆ°è¿™ä¹ˆä¸€ä¸ªçˆ†æ¬¾æ–°é—»ï¼šæŸæŸç¨‹åºå‘˜åˆ åº“è·‘è·¯ã€‚æ“ä½œä¹‹æ‰€ä»¥ææ€–ï¼Œæ–°é—»ä¹‹æ‰€ä»¥çˆ†æ¬¾ï¼Œæ˜¯å› ä¸ºè¿™äº›è¡Œä¸ºå¾€å¾€ä¼šå¸¦æ¥å¾ˆå¤§çš„æŸå¤±ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•é¿å…è¿™äº›é£é™©å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯å¯¹èµ„æºåšå¥½æƒé™ç®¡æ§ï¼Œè¿™ä¹Ÿæ˜¯é¡¹ç›®å¼€å‘ä¸­ç»•ä¸å¼€çš„è¯é¢˜ã€‚è…¾è®¯äº‘ä¼šå¼ºåˆ¶è¦æ±‚æ‰€æœ‰çš„äº‘äº§å“éƒ½å¯¹æ¥ <a href=\"https://cloud.tencent.com/document/product/598/10583\">è®¿é—®ç®¡ç†ï¼ˆCAMï¼‰</a> æœåŠ¡ï¼ˆé˜¿é‡Œäº‘ä¹Ÿæœ‰è¿™ç§è¦æ±‚ï¼‰ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆåšï¼Œæ˜¯å› ä¸ºä¿è¯èµ„æºçš„å®‰å…¨æ˜¯ä¸€ä»¶éå¸¸éå¸¸é‡è¦çš„äº‹æƒ…ã€‚</p><p>å¯ä»¥è¯´ï¼Œä¿è¯åº”ç”¨çš„èµ„æºå®‰å…¨ï¼Œå·²ç»æˆä¸ºä¸€ä¸ªåº”ç”¨çš„å¿…å¤‡èƒ½åŠ›ã€‚ä½œä¸ºå¼€å‘äººå‘˜ï¼Œä½ ä¹Ÿä¸€å®šè¦çŸ¥é“å¦‚ä½•ä¿éšœåº”ç”¨çš„èµ„æºå®‰å…¨ã€‚é‚£ä¹ˆå¦‚ä½•æ‰èƒ½ä¿éšœèµ„æºçš„å®‰å…¨å‘¢ï¼Ÿæˆ‘è®¤ä¸ºä½ è‡³å°‘éœ€è¦æŒæ¡ä¸‹é¢è¿™ä¸¤ç‚¹ï¼š</p><ul>\n<li><strong>æƒé™æ¨¡å‹ï¼š</strong>ä½ éœ€è¦äº†è§£ä¸šç•Œæˆç†Ÿçš„æƒé™æ¨¡å‹ï¼Œä»¥åŠè¿™äº›æ¨¡å‹çš„é€‚ç”¨åœºæ™¯ã€‚åªæœ‰å…·å¤‡è¶³å¤Ÿå®½å¹¿çš„çŸ¥è¯†é¢å’Œè§†é‡ï¼Œæˆ‘ä»¬æ‰èƒ½é¿å…é—­é—¨é€ è½¦ï¼Œè®¾è®¡å‡ºä¼˜ç§€çš„èµ„æºæˆæƒæ–¹æ¡ˆã€‚</li>\n<li><strong>ç¼–ç å®ç°ï¼š</strong>é€‰æ‹©æˆ–è®¾è®¡å‡ºäº†ä¼˜ç§€çš„èµ„æºæˆæƒæ–¹æ¡ˆåï¼Œä½ å°±è¦ç¼–å†™ä»£ç å®ç°è¯¥æ–¹æ¡ˆã€‚è¿™é—¨è¯¾çš„ IAM åº”ç”¨ï¼Œå°±æ˜¯ä¸€ä¸ªèµ„æºæˆæƒæ–¹æ¡ˆçš„è½åœ°é¡¹ç›®ã€‚ä½ å¯ä»¥é€šè¿‡å¯¹ IAM åº”ç”¨çš„å­¦ä¹ ï¼Œæ¥æŒæ¡å¦‚ä½•å®ç°ä¸€ä¸ªèµ„æºæˆæƒç³»ç»Ÿã€‚</li>\n</ul><!-- [[[read_end]]] --><p>æ— è®ºæ˜¯ç¬¬ä¸€ç‚¹è¿˜æ˜¯ç¬¬äºŒç‚¹ï¼Œéƒ½éœ€è¦ä½ æŒæ¡åŸºæœ¬çš„æƒé™æ¨¡å‹çŸ¥è¯†ã€‚é‚£ä¹ˆè¿™ä¸€è®²ï¼Œæˆ‘å°±æ¥ä»‹ç»ä¸‹ä¸šç•Œä¼˜ç§€çš„æƒé™æ¨¡å‹ï¼Œä»¥åŠè¿™äº›æ¨¡å‹çš„é€‚ç”¨åœºæ™¯ï¼Œä»¥ä½¿ä½ ä»Šåè®¾è®¡å‡ºæ›´å¥½çš„èµ„æºæˆæƒç³»ç»Ÿã€‚</p><h2>æƒé™ç›¸å…³æœ¯è¯­ä»‹ç»</h2><p>åœ¨ä»‹ç»ä¸šç•Œå¸¸è§çš„æƒé™æ¨¡å‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹åœ¨æƒé™æ¨¡å‹ä¸­å‡ºç°çš„æœ¯è¯­ã€‚æˆ‘æŠŠå¸¸è§çš„æœ¯è¯­æ€»ç»“åœ¨äº†ä¸‹é¢çš„è¡¨æ ¼é‡Œï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6a/1d/6aa623500bb76b3d40a5c4c6d15be91d.jpg?wh=2248x1623\" alt=\"\"></p><p>ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ï¼Œè¿™ä¸€è®²æˆ‘åˆ†åˆ«ç”¨<strong>ç”¨æˆ·</strong>ã€<strong>æ“ä½œ</strong>å’Œ<strong>èµ„æº</strong>æ¥æ›¿ä»£ Subjectã€Action å’Œ Objectã€‚</p><h2>æƒé™æ¨¡å‹ä»‹ç»</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±è¯¦ç»†ä»‹ç»ä¸‹ä¸€äº›å¸¸è§çš„æƒé™æ¨¡å‹ï¼Œè®©ä½ ä»Šååœ¨è®¾è®¡æƒé™ç³»ç»Ÿæ—¶ï¼Œèƒ½å¤Ÿæ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æƒé™æ¨¡å‹ã€‚</p><p>ä¸åŒçš„æƒé™æ¨¡å‹å…·æœ‰ä¸åŒçš„ç‰¹ç‚¹ï¼Œå¯ä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚å¸¸è§çš„æƒé™æ¨¡å‹æœ‰ä¸‹é¢è¿™ 5 ç§ï¼š</p><ul>\n<li>æƒé™æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼ŒAccess Control Listï¼‰ã€‚</li>\n<li>è‡ªä¸»è®¿é—®æ§åˆ¶ï¼ˆDACï¼ŒDiscretionary Access Controlï¼‰ã€‚</li>\n<li>å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆMACï¼ŒMandatory Access Controlï¼‰ã€‚</li>\n<li>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼ŒRole-Based Access Controlï¼‰ã€‚</li>\n<li>åŸºäºå±æ€§çš„æƒé™éªŒè¯ï¼ˆABACï¼ŒAttribute-Based Access Controlï¼‰ã€‚</li>\n</ul><p>è¿™é‡Œå…ˆç®€å•ä»‹ç»ä¸‹è¿™ 5 ç§æƒé™æ¨¡å‹ã€‚<strong>ACL</strong> æ˜¯ä¸€ç§ç®€å•çš„æƒé™æ¨¡å‹ï¼›<strong>DAC</strong> åŸºäº ACLï¼Œå°†æƒé™ä¸‹æ”¾ç»™å…·æœ‰æ­¤æƒé™çš„ä¸»é¢˜ï¼›ä½† DAC å› ä¸ºæƒé™ä¸‹æ”¾ï¼Œå¯¼è‡´å®ƒå¯¹æƒé™çš„æ§åˆ¶è¿‡äºåˆ†æ•£ï¼Œä¸ºäº†å¼¥è¡¥ DAC çš„è¿™ä¸ªç¼ºé™·ï¼Œè¯ç”Ÿäº† <strong>MAC</strong> æƒé™æ¨¡å‹ã€‚</p><p>DAC å’Œ MAC éƒ½æ˜¯åŸºäº ACL çš„æƒé™æ¨¡å‹ã€‚ACL åŠå…¶è¡ç”Ÿçš„æƒé™æ¨¡å‹å¯ä»¥ç®—æ˜¯æ—§æ—¶ä»£çš„æƒé™æ¨¡å‹ï¼Œçµæ´»æ€§å’ŒåŠŸèƒ½æ€§éƒ½æ»¡è¶³ä¸äº†ç°ä»£åº”ç”¨çš„æƒé™éœ€æ±‚ï¼Œæ‰€ä»¥è¯ç”Ÿäº† <strong>RBACã€‚</strong>RBAC ä¹Ÿæ˜¯è¿„ä»Šä¸ºæ­¢æœ€ä¸ºæ™®åŠçš„æƒé™æ¨¡å‹ã€‚</p><p>ä½†æ˜¯ï¼Œéšç€ç»„ç»‡å’Œåº”ç”¨è§„æ¨¡çš„å¢é•¿ï¼Œæ‰€éœ€çš„è§’è‰²æ•°é‡è¶Šæ¥è¶Šå¤šï¼Œå˜å¾—éš¾ä»¥ç®¡ç†ï¼Œè¿›è€Œå¯¼è‡´è§’è‰²çˆ†ç‚¸å’ŒèŒè´£åˆ†ç¦»ï¼ˆSoDï¼‰å¤±è´¥ã€‚æœ€åï¼Œå¼•å…¥äº†ä¸€ç§æ–°çš„ã€æ›´åŠ¨æ€çš„è®¿é—®æ§åˆ¶å½¢å¼ï¼Œç§°ä¸ºåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯ ABACã€‚ABAC è¢«ä¸€äº›äººçœ‹ä½œæ˜¯æƒé™ç³»ç»Ÿè®¾è®¡çš„æœªæ¥ã€‚è…¾è®¯äº‘çš„ CAMã€AWS çš„ IAMã€é˜¿é‡Œäº‘çš„ RAM éƒ½æ˜¯ ABAC ç±»å‹çš„æƒé™è®¿é—®æœåŠ¡ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šè¯¦ç»†ä»‹ç»è¿™äº›æƒé™æ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µã€‚</p><h3>ç®€å•çš„æƒé™æ¨¡å‹ï¼šæƒé™æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰</h3><p>ACLï¼ˆAccess Control Listï¼Œæƒé™æ§åˆ¶åˆ—è¡¨ï¼‰ï¼Œç”¨æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å¯ä»¥å¯¹èµ„æºåšç‰¹å®šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œå…è®¸ Colin åˆ›å»ºæ–‡ç« çš„ ACL ç­–ç•¥ä¸ºï¼š</p><pre><code>Subject: Colin\nAction: Create\nObject: Article\n</code></pre><p>åœ¨ ACL æƒé™æ¨¡å‹ä¸‹ï¼Œæƒé™ç®¡ç†æ˜¯å›´ç»•èµ„æº Object æ¥è®¾å®šçš„ï¼ŒACL æƒé™æ¨¡å‹ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ä¸€ç§æ¨¡å‹ã€‚</p><h3>åŸºäº ACL ä¸‹æ”¾æƒé™çš„æƒé™æ¨¡å‹ï¼šè‡ªä¸»è®¿é—®æ§åˆ¶ï¼ˆDACï¼‰</h3><p>DAC (Discretionary Access Controlï¼Œè‡ªä¸»è®¿é—®æ§åˆ¶)ï¼Œæ˜¯ ACL çš„æ‰©å±•æ¨¡å‹ï¼Œçµæ´»æ€§æ›´å¼ºã€‚ä½¿ç”¨è¿™ç§æ¨¡å‹ï¼Œä¸ä»…å¯ä»¥åˆ¤æ–­ Subject æ˜¯å¦å¯ä»¥å¯¹ Object åš Action æ“ä½œï¼ŒåŒæ—¶ä¹Ÿèƒ½è®© Subject å°† Objectã€Action çš„ç›¸åŒæƒé™æˆæƒç»™å…¶ä»–çš„ Subjectã€‚ä¾‹å¦‚ï¼ŒColin å¯ä»¥åˆ›å»ºæ–‡ç« ï¼š</p><pre><code>Subject: Colin\nAction: Create\nObject: Article\n</code></pre><p>å› ä¸º Colin å…·æœ‰åˆ›å»ºæ–‡ç« çš„æƒé™ï¼Œæ‰€ä»¥ Colin ä¹Ÿå¯ä»¥æˆäºˆ James åˆ›å»ºæ–‡ç« çš„æƒé™ï¼š</p><pre><code>Subject: James\nAction: Create\nObject: Article\n</code></pre><p>ç»å…¸çš„ ACL æ¨¡å‹æƒé™é›†ä¸­åœ¨åŒä¸€ä¸ª Subject ä¸Šï¼Œç¼ºä¹çµæ´»æ€§ï¼Œä¸ºäº†åŠ å¼ºçµæ´»æ€§ï¼Œåœ¨ ACL çš„åŸºç¡€ä¸Šï¼ŒDAC æ¨¡å‹å°†æƒé™ä¸‹æ”¾ï¼Œå…è®¸æ‹¥æœ‰æƒé™çš„ Subject è‡ªä¸»åœ°å°†æƒé™æˆäºˆå…¶ä»– Subjectã€‚</p><h3>åŸºäº ACL ä¸”å®‰å…¨æ€§æ›´é«˜çš„æƒé™æ¨¡å‹ï¼šå¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰</h3><p>MAC (Mandatory Access Controlï¼Œå¼ºåˆ¶è®¿é—®æ§åˆ¶)ï¼Œæ˜¯ ACL çš„æ‰©å±•æ¨¡å‹ï¼Œå®‰å…¨æ€§æ›´é«˜ã€‚MAC æƒé™æ¨¡å‹ä¸‹ï¼ŒSubject å’Œ Object åŒæ—¶å…·æœ‰å®‰å…¨å±æ€§ã€‚åœ¨åšæˆæƒæ—¶ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä¸¤ç‚¹æ‰èƒ½æˆæƒé€šè¿‡ï¼š</p><ul>\n<li>Subject å¯ä»¥å¯¹ Object åš Action æ“ä½œã€‚</li>\n<li>Object å¯ä»¥è¢« Subject åš Action æ“ä½œã€‚</li>\n</ul><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è®¾å®šäº†â€œColin å’Œ James å¯ä»¥åˆ›å»ºæ–‡ç« â€è¿™ä¸ª MAC ç­–ç•¥ï¼š</p><pre><code>Subject: Colin\nAction: Create\nObject: Article\n\nSubject: James\nAction: Create\nObject: Article\n</code></pre><p>æˆ‘ä»¬è¿˜æœ‰å¦å¤–ä¸€ä¸ª MAC ç­–ç•¥â€œæ–‡ç« å¯ä»¥è¢« Colin åˆ›å»ºâ€ï¼š</p><pre><code>Subject: Article\nAction: Create\nObject: Colin\n</code></pre><p>åœ¨ä¸Šè¿°ç­–ç•¥ä¸­ï¼ŒColin å¯ä»¥åˆ›å»ºæ–‡ç« ï¼Œä½†æ˜¯ James ä¸èƒ½åˆ›å»ºæ–‡ç« ï¼Œå› ä¸ºç¬¬äºŒæ¡è¦æ±‚æ²¡æœ‰æ»¡è¶³ã€‚</p><p>è¿™é‡Œä½ éœ€è¦æ³¨æ„ï¼Œåœ¨ ACL åŠå…¶æ‰©å±•æ¨¡å‹ä¸­ï¼ŒSubject å¯ä»¥æ˜¯ç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»„æˆ–ç¾¤ç»„ã€‚</p><p>ACLã€DAC å’Œ MAC æ˜¯æ—§æ—¶ä»£çš„æƒé™æ§åˆ¶æ¨¡å‹ï¼Œæ— æ³•æ»¡è¶³ç°ä»£åº”ç”¨å¯¹æƒé™æ§åˆ¶çš„éœ€æ±‚ï¼Œäºæ˜¯è¯ç”Ÿäº†æ–°æ—¶ä»£çš„æƒé™æ¨¡å‹ï¼šRBAC å’Œ ABACã€‚</p><h3>æœ€æ™®åŠçš„æƒé™æ¨¡å‹ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰</h3><p>RBAC (Role-Based Access Controlï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶)ï¼Œå¼•å…¥äº† Roleï¼ˆè§’è‰²ï¼‰çš„æ¦‚å¿µï¼Œå¹¶ä¸”å°†æƒé™ä¸è§’è‰²è¿›è¡Œå…³è”ã€‚ç”¨æˆ·é€šè¿‡æ‰®æ¼”æŸç§è§’è‰²ï¼Œå…·æœ‰è¯¥è§’è‰²çš„æ‰€æœ‰æƒé™ã€‚å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c5/cf/c5ab6b1a77069caac2c5de709dff32cf.jpg?wh=2248x902\" alt=\"\"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œæ¯ä¸ªç”¨æˆ·å…³è”ä¸€ä¸ªæˆ–å¤šä¸ªè§’è‰²ï¼Œæ¯ä¸ªè§’è‰²å…³è”ä¸€ä¸ªæˆ–å¤šä¸ªæƒé™ï¼Œæ¯ä¸ªæƒé™åˆåŒ…å«äº†ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œï¼Œæ“ä½œåŒ…å«äº†å¯¹èµ„æºçš„æ“ä½œé›†åˆã€‚é€šè¿‡ç”¨æˆ·å’Œæƒé™è§£è€¦ï¼Œå¯ä»¥å®ç°éå¸¸çµæ´»çš„æƒé™ç®¡ç†ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæƒé™åœºæ™¯ï¼š</p><p>ç¬¬ä¸€ï¼Œå¯ä»¥é€šè¿‡è§’è‰²æ‰¹é‡ç»™ä¸€ä¸ªç”¨æˆ·æˆæƒã€‚ä¾‹å¦‚ï¼Œå…¬å¸æ–°æ¥äº†ä¸€ä½åŒäº‹ï¼Œéœ€è¦æˆæƒè™šæ‹Ÿæœºçš„ç”Ÿäº§ã€é”€æ¯ã€é‡å¯å’Œç™»å½•æƒé™ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›æƒé™æŠ½è±¡æˆä¸€ä¸ªè¿ç»´è§’è‰²ã€‚å¦‚æœå†æœ‰æ–°åŒäº‹æ¥ï¼Œå°±å¯ä»¥é€šè¿‡æˆæƒè¿ç»´è§’è‰²ï¼Œç›´æ¥æ‰¹é‡æˆæƒè¿™äº›æƒé™ï¼Œä¸ç”¨ä¸€ä¸ªä¸ªåœ°ç»™ç”¨æˆ·æˆæƒè¿™äº›æƒé™ã€‚</p><p>ç¬¬äºŒï¼Œå¯ä»¥æ‰¹é‡ä¿®æ”¹ç”¨æˆ·çš„æƒé™ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šç”¨æˆ·ï¼ŒåŒå±äºè¿ç»´è§’è‰²ï¼Œè¿™æ—¶å€™å¯¹è¿ç»´è§’è‰²çš„ä»»ä½•æƒé™å˜æ›´ï¼Œå°±ç›¸å½“äºå¯¹è¿ç»´è§’è‰²å…³è”çš„æ‰€æœ‰ç”¨æˆ·çš„æƒé™å˜æ›´ï¼Œä¸ç”¨ä¸€ä¸ªä¸ªå»ä¿®æ”¹è¿™äº›ç”¨æˆ·çš„æƒé™ã€‚</p><p>RBAC åˆåˆ†ä¸º RBAC0ã€RBAC1ã€RBAC2ã€RBAC3ã€‚RBAC0 æ˜¯ RBAC çš„æ ¸å¿ƒæ€æƒ³ï¼ŒRBAC1 æ˜¯åŸºäº RBAC çš„è§’è‰²åˆ†å±‚æ¨¡å‹ï¼ŒRBAC2 å¢åŠ äº† RBAC çš„çº¦æŸæ¨¡å‹ã€‚è€Œ RBAC3ï¼Œå…¶å®ç›¸å½“äº RBAC1 + RBAC2ã€‚</p><p>ä¸‹é¢æˆ‘æ¥è¯¦ç»†ä»‹ç»ä¸‹è¿™å››ç§ RBACã€‚</p><p>RBAC0ï¼šåŸºç¡€æ¨¡å‹ï¼ŒåªåŒ…å«æ ¸å¿ƒçš„å››è¦ç´ ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·ï¼ˆUserï¼‰ã€è§’è‰²ï¼ˆRoleï¼‰ã€æƒé™ï¼ˆPermissionï¼šObjects-Operationsï¼‰ã€ä¼šè¯ï¼ˆSessionï¼‰ã€‚ç”¨æˆ·å’Œè§’è‰²å¯ä»¥æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œæƒé™å’Œè§’è‰²ä¹Ÿæ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚</p><p>RBAC1ï¼šåŒ…æ‹¬äº† RBAC0ï¼Œå¹¶ä¸”æ·»åŠ äº†è§’è‰²ç»§æ‰¿ã€‚è§’è‰²ç»§æ‰¿ï¼Œå³è§’è‰²å¯ä»¥ç»§æ‰¿è‡ªå…¶ä»–è§’è‰²ï¼Œåœ¨æ‹¥æœ‰å…¶ä»–è§’è‰²æƒé™çš„åŒæ—¶ï¼Œè¿˜å¯ä»¥å…³è”é¢å¤–çš„æƒé™ã€‚</p><p>RBAC2ï¼šåŒ…æ‹¬ RBAC0ï¼Œå¹¶ä¸”æ·»åŠ äº†çº¦æŸã€‚å…·æœ‰ä»¥ä¸‹æ ¸å¿ƒç‰¹æ€§ï¼š</p><ul>\n<li><strong>äº’æ–¥çº¦æŸï¼š</strong>åŒ…æ‹¬äº’æ–¥ç”¨æˆ·ã€äº’æ–¥è§’è‰²ã€äº’æ–¥æƒé™ã€‚åŒä¸€ä¸ªç”¨æˆ·ä¸èƒ½æ‹¥æœ‰ç›¸äº’æ’æ–¥çš„è§’è‰²ï¼Œä¸¤ä¸ªäº’æ–¥è§’è‰²ä¸èƒ½åˆ†é…ä¸€æ ·çš„æƒé™é›†ï¼Œäº’æ–¥çš„æƒé™ä¸èƒ½åˆ†é…ç»™åŒä¸€ä¸ªè§’è‰²ï¼Œåœ¨ Session ä¸­ï¼ŒåŒä¸€ä¸ªè§’è‰²ä¸èƒ½æ‹¥æœ‰äº’æ–¥æƒé™ã€‚</li>\n<li><strong>åŸºæ•°çº¦æŸï¼š</strong>ä¸€ä¸ªè§’è‰²è¢«åˆ†é…çš„ç”¨æˆ·æ•°é‡å—é™ï¼Œå®ƒæŒ‡çš„æ˜¯æœ‰å¤šå°‘ç”¨æˆ·èƒ½æ‹¥æœ‰è¿™ä¸ªè§’è‰²ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè§’è‰²æ˜¯ä¸“é—¨ä¸ºå…¬å¸ CEO åˆ›å»ºçš„ï¼Œé‚£è¿™ä¸ªè§’è‰²çš„æ•°é‡å°±æ˜¯æœ‰é™çš„ã€‚</li>\n<li><strong>å…ˆå†³æ¡ä»¶è§’è‰²ï¼š</strong>æŒ‡è¦æƒ³è·å¾—è¾ƒé«˜çš„æƒé™ï¼Œè¦é¦–å…ˆæ‹¥æœ‰ä½ä¸€çº§çš„æƒé™ã€‚ä¾‹å¦‚ï¼Œå…ˆæœ‰å‰¯æ€»ç»ç†æƒé™ï¼Œæ‰èƒ½æœ‰æ€»ç»ç†æƒé™ã€‚</li>\n<li><strong>é™æ€èŒè´£åˆ†ç¦»</strong>(Static Separation of Duty)ï¼šç”¨æˆ·æ— æ³•åŒæ—¶è¢«èµ‹äºˆæœ‰å†²çªçš„è§’è‰²ã€‚</li>\n<li><strong>åŠ¨æ€èŒè´£åˆ†ç¦»</strong>(Dynamic Separation of Duty)ï¼šç”¨æˆ·ä¼šè¯ä¸­ï¼Œæ— æ³•åŒæ—¶æ¿€æ´»æœ‰å†²çªçš„è§’è‰²ã€‚</li>\n</ul><p>RBAC3ï¼šå…¨åŠŸèƒ½çš„ RBACï¼Œåˆå¹¶äº† RBAC0ã€RBAC1ã€RBAC2ã€‚</p><p>æ­¤å¤–ï¼ŒRBAC ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ¨¡æ‹Ÿå‡º DAC å’Œ MAC çš„æ•ˆæœã€‚</p><p>è¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼Œæ¥ååŠ©ä½ ç†è§£ RBACã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ write article å’Œ manage article çš„æƒé™ï¼š</p><pre><code>Permission:\n    - Name: write_article\n        - Effect: &quot;allow&quot;\n        - Action: [&quot;Create&quot;, &quot;Update&quot;, &quot;Read&quot;]\n        - Object: [&quot;Article&quot;]\n    - Name: manage_article\n        - Effect: &quot;allow&quot;\n        - Action: [&quot;Delete&quot;, &quot;Read&quot;]\n        - Object: [&quot;Article&quot;]\n</code></pre><p>åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ Writerã€Managerå’Œ CEO 3ä¸ªè§’è‰²ï¼ŒWriter å…·æœ‰ write_article æƒé™ï¼ŒManager å…·æœ‰ manage_article æƒé™ï¼ŒCEO å…·æœ‰æ‰€æœ‰æƒé™ï¼š</p><pre><code>Role:\n    - Name: Writer\n      Permissions:\n        - write_article\n    - Name: Manager\n      Permissions:\n        - manage_article\n    - Name: CEO\n      Permissions:\n        - write_article\n        - manage_article\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹ Colin ç”¨æˆ·æˆäºˆ Writer è§’è‰²ï¼š</p><pre><code>Subject: Colin\nRoles:\n    - Writer\n</code></pre><p>é‚£ä¹ˆç°åœ¨ Colin å°±å…·æœ‰ Writer è§’è‰²çš„æ‰€æœ‰æƒé™ write_articleï¼Œwrite_article æƒé™å¯ä»¥åˆ›å»ºæ–‡ç« ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå†å¯¹ James ç”¨æˆ·æˆäºˆ Writer å’Œ Manager è§’è‰²ï¼š</p><pre><code>Subject: James\nRoles:\n    - Writer\n    - Manager\n</code></pre><p>é‚£ä¹ˆç°åœ¨ James å°±å…·æœ‰ Writer è§’è‰²å’Œ Manager è§’è‰²çš„æ‰€æœ‰æƒé™ï¼šwrite_articleã€manage_articleï¼Œè¿™äº›æƒé™å…è®¸ James åˆ›å»ºå’Œåˆ é™¤æ–‡ç« ã€‚</p><h3>æœ€å¼ºå¤§çš„æƒé™æ¨¡å‹ï¼šåŸºäºå±æ€§çš„æƒé™éªŒè¯ï¼ˆABACï¼‰</h3><p>ABAC (Attribute-Based Access Controlï¼ŒåŸºäºå±æ€§çš„æƒé™éªŒè¯ï¼‰ï¼Œè§„å®šäº†å“ªäº›å±æ€§çš„ç”¨æˆ·å¯ä»¥å¯¹å“ªäº›å±æ€§çš„èµ„æºåœ¨å“ªäº›é™åˆ¶æ¡ä»¶ä¸‹è¿›è¡Œå“ªäº›æ“ä½œã€‚è·Ÿ RBAC ç›¸æ¯”ï¼ŒABAC å¯¹æƒé™çš„æ§åˆ¶ç²’åº¦æ›´ç»†ï¼Œä¸»è¦è§„å®šäº†ä¸‹é¢è¿™å››ç±»å±æ€§ï¼š</p><ul>\n<li>ç”¨æˆ·å±æ€§ï¼Œä¾‹å¦‚æ€§åˆ«ã€å¹´é¾„ã€å·¥ä½œç­‰ã€‚</li>\n<li>èµ„æºå±æ€§ï¼Œä¾‹å¦‚åˆ›å»ºæ—¶é—´ã€æ‰€å±ä½ç½®ç­‰ã€‚</li>\n<li>æ“ä½œå±æ€§ï¼Œä¾‹å¦‚åˆ›å»ºã€ä¿®æ”¹ç­‰ã€‚</li>\n<li>ç¯å¢ƒå±æ€§ï¼Œä¾‹å¦‚æ¥æº IPã€å½“å‰æ—¶é—´ç­‰ã€‚</li>\n</ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ª ABAC ç­–ç•¥ï¼š</p><pre><code>Subject:\n    Name: Colin\n    Department: Product\n    Role: Writer\nAction:\n    - create\n    - update\nResource:\n    Type: Article\n    Tag:\n        - technology\n        - software\n    Mode:\n        - draft\nContextual:\n    IP: 10.0.0.10\n</code></pre><p>ä¸Šé¢æƒé™ç­–ç•¥æè¿°çš„æ„æ€æ˜¯ï¼Œäº§å“éƒ¨é—¨çš„ Colin ä½œä¸ºä¸€ä¸ª Writer è§’è‰²ï¼Œå¯ä»¥é€šè¿‡æ¥æº IP æ˜¯ 10.0.0.10 çš„å®¢æˆ·ç«¯ï¼Œåˆ›å»ºå’Œæ›´æ–°å¸¦æœ‰ technology å’Œ software æ ‡ç­¾çš„è‰ç¨¿æ–‡ç« ã€‚</p><p>è¿™é‡Œæç¤ºä¸€ç‚¹ï¼šABAC æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸º PBACï¼ˆPolicy-Based Access Controlï¼‰æˆ– CBACï¼ˆClaims-Based Access Controlï¼‰ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘é€šè¿‡ç°å®ä¸­çš„ ABAC æˆæƒç­–ç•¥ï¼Œå¸®ä½ ç†è§£ ABAC æƒé™æ¨¡å‹ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè…¾è®¯äº‘çš„ CAM ç­–ç•¥ï¼Œä¹Ÿæ˜¯ä¸€ç§ ABAC æˆæƒæ¨¡å¼ï¼š</p><pre><code>{\n  &quot;version&quot;: &quot;2.0&quot;,\n  &quot;statement&quot;: [\n    {\n      &quot;effect&quot;: &quot;allow&quot;,\n      &quot;action&quot;: [\n        &quot;cos:List*&quot;,\n        &quot;cos:Get*&quot;,\n        &quot;cos:Head*&quot;,\n        &quot;cos:OptionsObject&quot;\n      ],\n      &quot;resource&quot;: &quot;qcs::cos:ap-shanghai:uid/1250000000:Bucket1-1250000000/dir1/*&quot;,\n      &quot;condition&quot;: {\n        &quot;ip_equal&quot;: {\n          &quot;qcs:ip&quot;: [\n            &quot;10.217.182.3/24&quot;,\n            &quot;111.21.33.72/24&quot;\n          ]\n        }\n      }\n    }\n  ]\n}\n</code></pre><p>ä¸Šé¢çš„æˆæƒç­–ç•¥è¡¨ç¤ºï¼šç”¨æˆ·å¿…é¡»åœ¨ 10.217.182.3/24 æˆ–è€… 111.21.33.72/24 ç½‘æ®µæ‰èƒ½è°ƒç”¨äº‘ APIï¼ˆcos:List*ã€cos:Get*ã€cos:Head*ã€cos:OptionsObjectï¼‰ï¼Œå¯¹ 1250000000 ç”¨æˆ·ä¸‹çš„ dir1 ç›®å½•ä¸‹çš„æ–‡ä»¶è¿›è¡Œè¯»å–æ“ä½œã€‚</p><p>è¿™é‡Œï¼ŒABAC è§„å®šçš„å››ç±»å±æ€§åˆ†åˆ«æ˜¯ï¼š</p><ul>\n<li>ç”¨æˆ·å±æ€§ï¼šç”¨æˆ·ä¸º 1250000000ã€‚</li>\n<li>èµ„æºå±æ€§ï¼šdir1 ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</li>\n<li>æ“ä½œå±æ€§ï¼šè¯»å–ï¼ˆcos:List*ã€cos:Get*ã€cos:Head*ã€cos:OptionsObject éƒ½æ˜¯è¯»å– APIï¼‰ã€‚</li>\n<li>ç¯å¢ƒå±æ€§ï¼š10.217.182.3/24 æˆ–è€… 111.21.33.72/24 ç½‘æ®µã€‚</li>\n</ul><h2>ç›¸å…³å¼€æºé¡¹ç›®</h2><p>ä¸Šé¢æˆ‘ä»‹ç»äº†æƒé™æ¨¡å‹çš„ç›¸å…³çŸ¥è¯†ï¼Œä½†æ˜¯ç°åœ¨å¦‚æœè®©ä½ çœŸæ­£å»å®ç°ä¸€ä¸ªæƒé™ç³»ç»Ÿï¼Œä½ å¯èƒ½è¿˜æ˜¯ä¸çŸ¥ä»ä½•å…¥æ‰‹ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘åˆ—å‡ºäº†ä¸€äº› GitHub ä¸Šæ¯”è¾ƒä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œä½ å¯ä»¥å­¦ä¹ è¿™äº›é¡¹ç›®æ˜¯å¦‚ä½•è½åœ°ä¸€ä¸ªæƒé™æ¨¡å‹çš„ï¼Œä¹Ÿå¯ä»¥åŸºäºè¿™äº›é¡¹ç›®è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œå¼€å‘ä¸€ä¸ªæ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒé™ç³»ç»Ÿã€‚</p><h3>Casbin</h3><p><a href=\"https://github.com/casbin/casbin\">Casbin</a> æ˜¯ä¸€ä¸ªç”¨ Go è¯­è¨€ç¼–å†™çš„è®¿é—®æ§åˆ¶æ¡†æ¶ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒ ACLã€RBACã€ABAC ç­‰è®¿é—®æ¨¡å‹ï¼Œå¾ˆå¤šä¼˜ç§€çš„æƒé™ç®¡ç†ç³»ç»Ÿéƒ½æ˜¯åŸºäº Casbin æ¥æ„å»ºçš„ã€‚Casbin çš„æ ¸å¿ƒåŠŸèƒ½éƒ½æ˜¯å›´ç»•ç€è®¿é—®æ§åˆ¶æ¥æ„å»ºçš„ï¼Œä¸è´Ÿè´£èº«ä»½è®¤è¯ã€‚å¦‚æœä»¥åè€æ¿è®©ä½ å®ç°ä¸€ä¸ªæƒé™ç®¡ç†ç³»ç»Ÿï¼ŒCasbin æ˜¯ä¸€å®šè¦å¥½å¥½ç ”ç©¶çš„å¼€æºé¡¹ç›®ã€‚</p><h3>keto</h3><p><a href=\"https://github.com/ory/keto\">keto</a> æ˜¯ä¸€ä¸ªäº‘åŸç”Ÿæƒé™æ§åˆ¶æœåŠ¡ï¼Œé€šè¿‡æä¾› REST API è¿›è¡Œæˆæƒï¼Œæ”¯æŒ RBACã€ABACã€ACLã€AWS IAM ç­–ç•¥ã€Kubernetes Roles ç­‰æƒé™æ¨¡å‹ï¼Œå¯ä»¥è§£å†³ä¸‹é¢è¿™äº›é—®é¢˜ï¼š</p><ul>\n<li>æ˜¯å¦å…è®¸æŸäº›ç”¨æˆ·ä¿®æ”¹æ­¤åšå®¢æ–‡ç« ï¼Ÿ</li>\n<li>æ˜¯å¦å…è®¸æŸä¸ªæœåŠ¡æ‰“å°è¯¥æ–‡æ¡£ï¼Ÿ</li>\n<li>æ˜¯å¦å…è®¸ ACME ç»„ç»‡çš„æˆå‘˜ä¿®æ”¹å…¶ç§Ÿæˆ·ä¸­çš„æ•°æ®ï¼Ÿ</li>\n<li>æ˜¯å¦å…è®¸åœ¨æ˜ŸæœŸä¸€çš„ä¸‹åˆ 4 ç‚¹åˆ°ä¸‹åˆ 5 ç‚¹ï¼Œä» IP 10.0.0.2 å‘å‡ºçš„è¯·æ±‚æ‰§è¡ŒæŸä¸ª Jobï¼Ÿ</li>\n</ul><h3>go-admin</h3><p><a href=\"https://github.com/go-admin-team/go-admin\">go-admin</a> æ˜¯ä¸€ä¸ªåŸºäº Gin + Vue + Element UI çš„å‰åç«¯åˆ†ç¦»æƒé™ç®¡ç†ç³»ç»Ÿè„šæ‰‹æ¶ï¼Œå®ƒçš„è®¿é—®æ§åˆ¶æ¨¡å‹é‡‡ç”¨äº† Casbin çš„ RBAC è®¿é—®æ§åˆ¶æ¨¡å‹ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼ŒåŒ…å«äº†å¦‚ä¸‹åŠŸèƒ½ï¼š</p><ul>\n<li>åŸºç¡€ç”¨æˆ·ç®¡ç†åŠŸèƒ½ï¼›</li>\n<li>JWT é‰´æƒï¼›</li>\n<li>ä»£ç ç”Ÿæˆå™¨ï¼›</li>\n<li>RBAC æƒé™æ§åˆ¶ï¼›</li>\n<li>è¡¨å•æ„å»ºï¼›</li>\n<li>â€¦â€¦</li>\n</ul><p>è¯¥é¡¹ç›®è¿˜æ”¯æŒ RESTful API è®¾è®¡è§„èŒƒã€Swagger æ–‡æ¡£ã€GORM åº“ç­‰ã€‚go-admin ä¸ä»…æ˜¯ä¸€ä¸ªä¼˜ç§€çš„æƒé™ç®¡ç†ç³»ç»Ÿï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¼˜ç§€çš„ã€åŠŸèƒ½é½å…¨çš„ Go å¼€æºé¡¹ç›®ã€‚ä½ åœ¨åšé¡¹ç›®å¼€å‘æ—¶ï¼Œä¹Ÿå¯ä»¥å‚è€ƒè¯¥é¡¹ç›®çš„æ„å»ºæ€è·¯ã€‚go-admin ç®¡ç†ç³»ç»Ÿè‡ªå¸¦å‰ç«¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/21/98/21c8307e034fc6e082833d1c9fd0f498.png?wh=2535x827\" alt=\"\"></p><h3>LyricTian/gin-admin</h3><p><a href=\"https://github.com/LyricTian/gin-admin\">gin-admin</a> ç±»ä¼¼äº go-adminï¼Œæ˜¯ä¸€ä¸ªåŸºäº Gin+Gorm+Casbin+Wire å®ç°çš„æƒé™ç®¡ç†è„šæ‰‹æ¶ï¼Œå¹¶è‡ªå¸¦å‰ç«¯ï¼Œåœ¨åšæƒé™ç®¡ç†ç³»ç»Ÿè°ƒç ”æ—¶ï¼Œä¹Ÿéå¸¸å€¼å¾—å‚è€ƒã€‚</p><p>gin-admin å¤§é‡é‡‡ç”¨äº† Go åç«¯å¼€å‘å¸¸ç”¨çš„æŠ€æœ¯ï¼Œæ¯”å¦‚ Ginã€GORMã€JWT è®¤è¯ã€RESTful APIã€Logrus æ—¥å¿—åŒ…ã€Swagger æ–‡æ¡£ç­‰ã€‚å› æ­¤ï¼Œä½ åœ¨åš Go åç«¯æœåŠ¡å¼€å‘æ—¶ï¼Œä¹Ÿå¯ä»¥å­¦ä¹ è¯¥é¡¹ç›®çš„æ„å»ºæ–¹æ³•ã€‚</p><h3>gin-vue-admin</h3><p><a href=\"https://github.com/flipped-aurora/gin-vue-admin\">gin-vue-admin</a> æ˜¯ä¸€ä¸ªåŸºäº Gin å’Œ Vue å¼€å‘çš„å…¨æ ˆå‰åç«¯åˆ†ç¦»çš„åå°ç®¡ç†ç³»ç»Ÿï¼Œé›†æˆäº† JWT é‰´æƒã€åŠ¨æ€è·¯ç”±ã€åŠ¨æ€èœå•ã€Casbin é‰´æƒã€è¡¨å•ç”Ÿæˆå™¨ã€ä»£ç ç”Ÿæˆå™¨ç­‰åŠŸèƒ½ã€‚gin-vue-admin é›†æˆäº† RBAC æƒé™ç®¡ç†æ¨¡å‹ï¼Œç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/f3/a391723e154f862d5c7bf796edcf5bf3.png?wh=2527x627\" alt=\"\"></p><h3>é€‰æ‹©å»ºè®®</h3><p>ä»‹ç»äº†é‚£ä¹ˆå¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œæœ€åæˆ‘æƒ³ç»™ä½ ä¸€äº›é€‰æ‹©å»ºè®®ã€‚å¦‚æœä½ æƒ³ç ”ç©¶ ACLã€RBACã€ABAC ç­‰æƒé™æ¨¡å‹å¦‚ä½•è½åœ°ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ å­¦ä¹  <a href=\"https://github.com/casbin/casbin\">Casbin</a> é¡¹ç›®ï¼ŒCasbin ç›®å‰æœ‰è¿‘ä¸‡çš„ GitHub star æ•°ï¼Œå¤„äºæ´»è·ƒçš„å¼€å‘çŠ¶æ€ã€‚æœ‰å¾ˆå¤šé¡¹ç›®åœ¨ä½¿ç”¨ Casbinï¼Œä¾‹å¦‚ <a href=\"https://github.com/go-admin-team/go-admin\">go-admin</a>ã€ <a href=\"https://github.com/LyricTian/gin-admin\">gin-admin</a> ã€ <a href=\"https://github.com/flipped-aurora/gin-vue-admin\">gin-vue-admin</a> ç­‰ã€‚</p><p><a href=\"https://github.com/ory/keto\">keto</a> ç±»ä¼¼äº Casbinï¼Œä¸»è¦é€šè¿‡ Go åŒ…çš„æ–¹å¼ï¼Œå¯¹å¤–æä¾›æˆæƒèƒ½åŠ›ã€‚keto ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„æƒé™ç±»é¡¹ç›®ï¼Œå½“ä½ ç ”ç©¶å®Œ Casbin åï¼Œå¦‚æœè¿˜æƒ³å†ç ”ç©¶ä¸‹å…¶ä»–æˆæƒç±»é¡¹ç›®ï¼Œå»ºè®®ä½ è¯»ä¸‹ keto çš„æºç ã€‚</p><p>go-adminã€gin-vue-adminã€gin-admin è¿™ 3 ä¸ªéƒ½æ˜¯åŸºäº Casbin çš„ Go é¡¹ç›®ã€‚å…¶ä¸­ï¼Œgin-vue-admin æ˜¯åå°ç®¡ç†ç³»ç»Ÿæ¡†æ¶ï¼Œé‡Œé¢åŒ…å«äº† RBAC æƒé™ç®¡ç†æ¨¡å—ï¼›go-admin å’Œ gin-admin éƒ½æ˜¯ RBAC æƒé™ç®¡ç†è„šæ‰‹æ¶ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³æ‰¾ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ RBAC æˆæƒç³»ç»Ÿï¼ˆè‡ªå¸¦å‰åç«¯ï¼‰ï¼Œå»ºè®®ä½ ä¼˜å…ˆç ”ç©¶ä¸‹ go-adminï¼Œå¦‚æœè¿˜æœ‰ç²¾åŠ›ï¼Œå¯ä»¥å†ç ”ç©¶ä¸‹ gin-adminã€gin-vue-adminã€‚</p><h2>æ€»ç»“</h2><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»‹ç»äº† 5 ç§å¸¸è§çš„æƒé™æ¨¡å‹ã€‚å…¶ä¸­ï¼ŒACL æœ€ç®€å•ï¼ŒABAC æœ€å¤æ‚ï¼Œä½†æ˜¯åŠŸèƒ½æœ€å¼ºå¤§ï¼Œä¹Ÿæœ€çµæ´»ã€‚RBAC åˆ™ä»‹äºäºŒè€…ä¹‹é—´ã€‚å¯¹äºä¸€äº›äº‘è®¡ç®—å‚å•†æ¥è¯´ï¼Œå› ä¸ºå®ƒä»¬é¢ä¸´çš„æˆæƒåœºæ™¯å¤æ‚å¤šæ ·ï¼Œéœ€è¦ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æˆæƒæ¨¡å‹ï¼Œæ‰€ä»¥è…¾è®¯äº‘ã€é˜¿é‡Œäº‘å’Œ AWS ç­‰äº‘å‚å•†æ™®éé‡‡ç”¨äº† ABAC æ¨¡å‹ã€‚</p><p>å¦‚æœä½ çš„èµ„æºæˆæƒéœ€æ±‚ä¸å¤æ‚ï¼Œå¯ä»¥è€ƒè™‘ RBACï¼›å¦‚æœä½ éœ€è¦ä¸€ä¸ªèƒ½æ»¡è¶³å¤æ‚åœºæ™¯çš„èµ„æºæˆæƒç³»ç»Ÿï¼Œå»ºè®®é€‰æ‹© ABACï¼ŒABAC çš„è®¾è®¡æ€è·¯å¯ä»¥å‚è€ƒä¸‹è…¾è®¯äº‘çš„ CAMã€é˜¿é‡Œäº‘çš„ RAM å’Œ AWS çš„ IAMã€‚</p><p>å¦å¤–ï¼Œå¦‚æœä½ æƒ³æ·±å…¥äº†è§£æƒé™æ¨¡å‹å¦‚ä½•å…·ä½“è½åœ°ï¼Œå»ºè®®ä½ é˜…è¯» <a href=\"https://github.com/casbin/casbin\">Casbin</a> æºç ã€‚</p><h2>è¯¾åç»ƒä¹ </h2><ol>\n<li>æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœå…¬å¸éœ€è¦ä½ å®ç°ä¸€ä¸ªæˆæƒä¸­å°ç³»ç»Ÿï¼Œåº”è¯¥é€‰ç”¨å“ªç§æƒé™æ¨¡å‹æ¥æ„å»ºï¼Œæ¥æ»¡è¶³ä¸åŒä¸šåŠ¡çš„ä¸åŒéœ€æ±‚ï¼Ÿ</li>\n<li>æ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•å°†æˆæƒæµç¨‹é›†æˆè¿›ç»Ÿä¸€æ¥å…¥å±‚ï¼Œä¾‹å¦‚ API ç½‘å…³ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ã€‚</p>","neighbors":{"left":{"article_title":"26 | IAMé¡¹ç›®æ˜¯å¦‚ä½•è®¾è®¡å’Œå®ç°è®¿é—®è®¤è¯åŠŸèƒ½çš„ï¼Ÿ","id":399307},"right":{"article_title":"28 | æ§åˆ¶æµï¼ˆä¸Šï¼‰ï¼šé€šè¿‡iam-apiserverè®¾è®¡ï¼Œçœ‹WebæœåŠ¡çš„æ„å»º","id":401190}},"comments":[{"had_liked":false,"id":304294,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1627319716,"is_pvip":false,"replies":[{"id":"110220","content":"è€å“¥å›ç­”ç»™100åˆ†","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627597831,"ip_address":"","comment_id":304294,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14512221604","product_id":100079601,"comment_content":"æ€è€ƒé¢˜1:ABACï¼›2:å†™ä¸€ä¸ªç½‘å…³æ’ä»¶ï¼Œå½“è®¿é—®è®¤è¯é€šè¿‡åï¼Œè‡ªåŠ¨è°ƒç”¨ç±»ä¼¼æœ¬iamé¡¹ç›®çš„åç«¯åº”ç”¨ä½œèµ„æºé‰´æƒã€‚","like_count":3,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524005,"discussion_content":"è€å“¥å›ç­”ç»™100åˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627597831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2631964,"avatar":"https://static001.geekbang.org/account/avatar/00/28/29/1c/cf469aec.jpg","nickname":"æŸ¯å°æ˜Ÿ","note":"","ucode":"6B111A48B754E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386550,"discussion_content":"ä¸ªäººè§‰å¾—APIç½‘å…³åªè´Ÿè´£è®¤è¯ï¼Œé‰´æƒç”±èµ„æºæ–¹å‘èµ·è°ƒç”¨IAMï¼ŒIAMè¿›è¡Œé‰´æƒçš„åˆ¤æ–­ï¼Ÿå“ˆå“ˆè¿™æ ·è¡Œä¸ã€‚è€ƒè™‘åˆ°åœ¨å¾ˆå¤šä¸šåŠ¡åœºæ™¯APIå¯èƒ½å¹¶ä¸ç›´æ¥å’ŒIAMçš„æƒé™ç­‰ä»·ï¼Œéœ€è¦èµ„æºæ–¹è¿›è¡Œè½¬ä¹‰å¤„ç†ã€‚åªæœ‰èµ„æºæ–¹çŸ¥é“éœ€è¦æ‹¿ä»€ä¹ˆæ•°æ®å»IAMè¿›è¡Œæ ¡éªŒæƒé™ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627632699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324311,"user_name":"Geek_175bc2","can_delete":false,"product_type":"c1","uid":2131639,"ip_address":"","ucode":"D8D6F17C8D6B1D","user_header":"","comment_is_top":false,"comment_ctime":1638367044,"is_pvip":false,"replies":[{"id":"118464","content":"åŠ æˆ‘å¾®ä¿¡èŠnightskongã€‚ä¸€è¨€ä¸¤è¯­è¯´ä¸æ¸…","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1639454129,"ip_address":"","comment_id":324311,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10228301636","product_id":100079601,"comment_content":"è€å¸ˆæƒ³é—®ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡æ˜¯é’ˆå¯¹ä¸€ä¸ªæ¥å£ï¼Œä¸åŒçš„è§’è‰²è¦è·å–ä¸åŒçš„æŸ¥è¯¢ç»“æœ,ä¾‹å¦‚:ç®¡ç†å‘˜å¯ä»¥çœ‹åˆ°æ‰€æœ‰åˆ—è¡¨æ•°æ®ï¼ŒåŒºåŸŸä¸»ç®¡èƒ½çœ‹åˆ°å¯¹åº”åŒºåŸŸçš„æ•°æ®ç­‰ï¼Œé¡¹ç›®ä¸­å…¨æ˜¯ç±»ä¼¼çš„ä¸šåŠ¡åœºæ™¯ï¼Œéœ€è¦ç”¨æ€ä¹ˆçš„æƒé™æ¨¡å‹è®¾è®¡å‘¢","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538603,"discussion_content":"åŠ æˆ‘å¾®ä¿¡èŠnightskongã€‚ä¸€è¨€ä¸¤è¯­è¯´ä¸æ¸…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639454129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1604645,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7c/25/70134099.jpg","nickname":"è®¸å‡¯","note":"","ucode":"4F11AD41CB0244","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556362,"discussion_content":"è¿™ä¸ªæ€ä¹ˆç©çš„ï¼Ÿè€å“¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647328813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314394,"user_name":"wei ä¸¶","can_delete":false,"product_type":"c1","uid":1234929,"ip_address":"","ucode":"331DE893F75B95","user_header":"https://static001.geekbang.org/account/avatar/00/12/d7/f1/ce10759d.jpg","comment_is_top":false,"comment_ctime":1632995578,"is_pvip":false,"replies":[{"id":"114081","content":"666666","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1633664922,"ip_address":"","comment_id":314394,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10222930170","product_id":100079601,"comment_content":"1. ABAC  2. åœ¨ç½‘å…³é€šè¿‡RPCæˆ–è€…restful apiè°ƒç”¨æˆæƒç³»ç»Ÿè¿›è¡Œé‰´æƒ","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527669,"discussion_content":"666666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633664922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304821,"user_name":"è‡­è‡­","can_delete":false,"product_type":"c1","uid":1225053,"ip_address":"","ucode":"5EDA1D1C524E5C","user_header":"https://wx.qlogo.cn/mmopen/vi_32/ZPx5SlIHaNjKotyoGHrhg0u4cZqmdr033CZtUzb4MY70HzWABYYIEibBLUGAxnfJmMjflHibXB0UgAxHjEL8aOoQ/132","comment_is_top":false,"comment_ctime":1627629302,"is_pvip":false,"replies":[{"id":"110268","content":"åˆ¤æ–­äººå‘˜æ˜¯å¦å¯ä»¥ä¿®æ”¹è‡ªå·±çš„æ–‡ç« ï¼Œè¿™ä¸ªå±äºèµ„æºå®ˆæŠ¤å…¨ç³»ç»Ÿå¹²çš„äº‹æƒ…ï¼Œä¸ºå•¥è¿˜éœ€è¦è‡ªå·±å†™ä¸šåŠ¡é€»è¾‘åˆ¤æ–­å½“å‰ä¿®æ”¹çš„æ–‡ç« æ˜¯å¦è‡ªå·±å‘å¸ƒçš„æ–‡ç« å‘¢ï¼Ÿ<br><br>å¦å¤–ï¼Œå¦‚æœè¦å…è®¸åˆ«äººä¿®æ”¹è‡ªå·±çš„æ–‡ç« ï¼Œåº•å±‚å°±ä¸åº”è¯¥åŠ è¿™å±‚åˆ¤æ–­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1627685893,"ip_address":"","comment_id":304821,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10217563894","product_id":100079601,"comment_content":"è€å¸ˆï¼Œ è¯·é—®ä¸‹ï¼Œæ¯”å¦‚æƒ³è¦å®ç°ä¸€ä¸ªæ–‡ç« ç¼–è¾‘&quot;EDIT&quot;æƒé™ï¼Œ å¹¶ä¸”åªèƒ½ç¼–è¾‘è‡ªå·±å‘å¸ƒçš„æ–‡ç« ï¼Œç»“åˆ Casbin çš„ RBACæ¨¡å‹ï¼Œå®ç°çš„æ€è·¯æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ  æˆ‘çš„æƒ³æ³•æ˜¯åšä¸€ä¸ª &quot;EDIT_SELF_ARTICLE&quot;æƒé™ï¼Œ æ‹¥æœ‰è¿™ä¸ªæƒé™çš„äººå‘˜å°±å¯ä»¥ä¿®æ”¹è‡ªå·±çš„æ–‡ç« ï¼Œ ä½†è¿™æ ·å®ç° å°±ç›¸å½“äº åˆ¤æ–­äººå‘˜æ‹¥æœ‰ç¼–è¾‘æƒé™ä¹‹åï¼Œ è¿˜éœ€è¦è‡ªå·±å†™ä¸šåŠ¡é€»è¾‘åˆ¤æ–­å½“å‰è¦ä¿®æ”¹çš„æ–‡ç« æ˜¯å¦æ˜¯è‡ªå·±å‘å¸ƒçš„æ–‡ç«  ï¼Ÿ ","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524173,"discussion_content":"åˆ¤æ–­äººå‘˜æ˜¯å¦å¯ä»¥ä¿®æ”¹è‡ªå·±çš„æ–‡ç« ï¼Œè¿™ä¸ªå±äºèµ„æºå®ˆæŠ¤å…¨ç³»ç»Ÿå¹²çš„äº‹æƒ…ï¼Œä¸ºå•¥è¿˜éœ€è¦è‡ªå·±å†™ä¸šåŠ¡é€»è¾‘åˆ¤æ–­å½“å‰ä¿®æ”¹çš„æ–‡ç« æ˜¯å¦è‡ªå·±å‘å¸ƒçš„æ–‡ç« å‘¢ï¼Ÿ\n\nå¦å¤–ï¼Œå¦‚æœè¦å…è®¸åˆ«äººä¿®æ”¹è‡ªå·±çš„æ–‡ç« ï¼Œåº•å±‚å°±ä¸åº”è¯¥åŠ è¿™å±‚åˆ¤æ–­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627685893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1244241,"avatar":"https://static001.geekbang.org/account/avatar/00/12/fc/51/c6cc68df.jpg","nickname":"Yuan","note":"","ucode":"500A084ACC45D4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":586761,"discussion_content":"ä¸å¤ªèƒ½ç†è§£è¿™ä¸ªã€Œèµ„æºå®ˆæŠ¤å…¨ç³»ç»Ÿã€æŒ‡ä»£ä»€ä¹ˆï¼Œæ˜¯IAMå—ï¼Œå¦‚æœæ˜¯IAMçš„è¯ï¼ŒIAMæ€ä¹ˆçŸ¥é“ç”¨æˆ·è¦è®¿é—®çš„æ–‡ç« æ˜¯å±äºè¿™ä¸ªç”¨æˆ·å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662478910,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":524173,"ip_address":"ä¸Šæµ·"},"score":586761,"extra":""}]}]},{"had_liked":false,"id":323596,"user_name":"yandongxiao","can_delete":false,"product_type":"c1","uid":1017700,"ip_address":"","ucode":"D397F4DB0109C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/64/3882d90d.jpg","comment_is_top":false,"comment_ctime":1638011039,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5932978335","product_id":100079601,"comment_content":"æ€»ç»“ï¼š<br>1. äº”ç§æƒé™æ¨¡å‹ï¼šACLã€DACã€MACã€RBACã€ABACã€‚<br>2. å‰ä¸‰ä¸ªæ˜¯é¢å‘èµ„æºçš„æƒé™ç®¡ç†ç³»ç»Ÿï¼›RBACæ˜¯é¢å‘è§’è‰²çš„æƒé™ç®¡ç†ç³»ç»Ÿï¼›ABACæ˜¯é¢å‘å±æ€§çš„æƒé™ç®¡ç†ç³»ç»Ÿã€‚å¯¹äºä¸€èˆ¬çš„é¡¹ç›®æ¥è¯´ï¼Œä½¿ç”¨RBACå³å¯ã€‚<br>3. å¼€æºçš„æˆæƒé¡¹ç›®æœ‰ï¼Œcasbin, keto, go-admin, gin-adminã€‚å…¶ä¸­ go-admin å’Œ gin-admin éƒ½æ˜¯RBACæƒé™ç®¡ç†è„šæ‰‹æ¶","like_count":1},{"had_liked":false,"id":307228,"user_name":"Sch0ng","can_delete":false,"product_type":"c1","uid":1145554,"ip_address":"","ucode":"73F6113931B1AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg","comment_is_top":false,"comment_ctime":1628951206,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5923918502","product_id":100079601,"comment_content":"æƒé™ç®¡æ§æ˜¯ä»»ä½•é¡¹ç›®ä»»ä½•å…¬å¸éƒ½ç¦»ä¸å¼€çš„åŸºçŸ³æœåŠ¡ã€‚<br>äº”ç§å¸¸è§çš„æƒé™æ¨¡å‹ï¼šACLã€DACã€MACã€RBACã€ABACã€‚<br>è½åœ°çš„æ—¶å€™å¯ä»¥å‚è€ƒåŸºäºCasbinå¼€æºæƒé™æ§åˆ¶æ¡†æ¶çš„å¼€æºé¡¹ç›®go-adminã€‚","like_count":1},{"had_liked":false,"id":352794,"user_name":"AKAä¸‰çš®","can_delete":false,"product_type":"c1","uid":1102656,"ip_address":"","ucode":"D3BC5C60025E9D","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/40/0067d6db.jpg","comment_is_top":false,"comment_ctime":1658929969,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658929969","product_id":100079601,"comment_content":"æˆ‘å¼ºçƒˆä¸åŒæ„åœ¨ç½‘å…³å¤„å®ç°æƒé™çš„ç®¡ç†ï¼šç†ç”±ï¼Œé€šå¸¸ç½‘å…³æ˜¯æ— çŠ¶æ€çš„ã€‚è¦å®ç°ä¸€å¥—å®Œæ•´çš„æƒé™ç®¡ç†ï¼Œå¯¹äºç½‘å…³æ¥è¯´å¤ªé‡äº†ï¼›åŒæ—¶ï¼Œå¾ˆå¤šå¼€æºçš„ç½‘å…³ä¼šæŠŠæˆæƒçš„åŠ¨ä½œå§”æ‰˜ç»™ç¬¬ä¸‰æ–¹ï¼Œå¦‚æƒé™å¹³å°ï¼Œä½†æ˜¯è¿™ç§ï¼Œåœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œå¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½è¦å¤šä¸€è·³çš„è¯ï¼Œ ç½‘å…³çš„æ•ˆç‡å¦‚ä½•å»ä¿è¯ï¼Ÿç›®å‰æœ‰ä¸€äº›æ–¹æ¡ˆï¼Œå»ºè®®æ˜¯é‡‡ç”¨sidecarçš„æ–¹å¼ï¼ˆå¦‚OPAï¼‰ï¼Œä½†æ˜¯å…³äºå¤§é‡æƒé™æ•°æ®çš„å­˜å‚¨ä¸åŒæ­¥æ–¹æ¡ˆï¼Œå´å¾ˆå°‘","like_count":1},{"had_liked":false,"id":348337,"user_name":"sqnv_geek","can_delete":false,"product_type":"c1","uid":2179895,"ip_address":"","ucode":"B23265E1862E4F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/a4nwicfbEpwqfm8En9iapFqGoOpVg0p0N4ZjIFAdWQMiaxT0JT9OpYrM5ud1OliaLAUhhiaHDjY8mxmNfSbgBNAAGTQ/132","comment_is_top":false,"comment_ctime":1655004292,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655004292","product_id":100079601,"comment_content":"gcp çš„ iam æ˜¯ä»€ä¹ˆæ¨¡å‹ï¼Ÿ æ„Ÿè§‰ä¸å¤ªåƒABAC","like_count":0},{"had_liked":false,"id":345937,"user_name":"Geek_d8f539","can_delete":false,"product_type":"c1","uid":2962952,"ip_address":"","ucode":"F97C93BD30E389","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/br4oaHmuybvhY8KV74KUmcO4XqOK6ufnWA82VgQibmM8j2iaebMPpxfm4K9pJ7FFtypjCxUSXp40Dza3pVyBMTFQ/132","comment_is_top":false,"comment_ctime":1652705254,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652705254","product_id":100079601,"comment_content":"æˆ‘çœ‹authzserverçš„è®¿é—®æ§åˆ¶æ˜¯ç”¨çš„ ory&#47;ladonï¼Œå¥½åƒæ–‡ä¸­æ²¡æåˆ°","like_count":0},{"had_liked":false,"id":343292,"user_name":"æˆ‘æ˜¯å°å¦–æ€ªğŸ‡¨ğŸ‡³","can_delete":false,"product_type":"c1","uid":1758660,"ip_address":"","ucode":"A5381FA2D2C713","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d5/c4/62b2cd5a.jpg","comment_is_top":false,"comment_ctime":1650768534,"is_pvip":false,"replies":[{"id":"125516","content":"è¿™é‡Œåˆ—çš„æ˜¯ä¸€äº›å¸¸è§çš„æƒé™æ¨¡å‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1651077756,"ip_address":"","comment_id":343292,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1650768534","product_id":100079601,"comment_content":"ä¸ºå•¥æ²¡æœ‰Red Hatçš„keycloakï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568207,"discussion_content":"è¿™é‡Œåˆ—çš„æ˜¯ä¸€äº›å¸¸è§çš„æƒé™æ¨¡å‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651077756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329989,"user_name":"Geek_b9d307","can_delete":false,"product_type":"c1","uid":2877471,"ip_address":"","ucode":"A4E9CDEE716969","user_header":"","comment_is_top":false,"comment_ctime":1641716120,"is_pvip":false,"replies":[{"id":"120949","content":"ä½ å¯ä»¥è°ƒç ”ä¸‹ï¼Œopen policy agentä¸ç†Ÿæ‚‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1167883","ctime":1642434356,"ip_address":"","comment_id":329989,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1641716120","product_id":100079601,"comment_content":"æƒ³äº†è§£ä¸€ä¸‹è®¿é—®æ§åˆ¶æ¡†æ¶ casbin å’Œ open policy agentï¼Œè¿™ä¸¤æ¬¾äº§å“æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿä¸¤è€…åˆ†åˆ«é€‚ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546852,"discussion_content":"ä½ å¯ä»¥è°ƒç ”ä¸‹ï¼Œopen policy agentä¸ç†Ÿæ‚‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642434356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}