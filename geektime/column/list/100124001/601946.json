{"id":601946,"title":"14ï½œè°‹å®šè€ŒåŠ¨ï¼šçˆ¬è™«é¡¹ç›®éœ€æ±‚åˆ†æä¸æ¶æ„è®¾è®¡","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ‘å»ºå‹‹ã€‚</p><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹çˆ¬è™«ç³»ç»Ÿçš„åŠŸèƒ½ä¸æ¶æ„ã€‚</p><p>ä¸ºäº†æ›´å¥½åœ°å®Œæˆçˆ¬è™«é¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦è¿›å…¥çœŸå®çš„åœºæ™¯ä¸­ï¼Œäº†è§£é¡¹ç›®çš„ä»·å€¼ã€ç”¨æˆ·çš„éœ€æ±‚ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½å¤Ÿæ˜ç™½é¡¹ç›®åº”è¯¥å…·å¤‡å“ªäº›åŠŸèƒ½ï¼Œæ˜ç™½ä¸ºäº†æ”¯æ’‘è¿™äº›ç”¨æˆ·éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡å‡ºæ€æ ·çš„ç³»ç»Ÿæ¶æ„ã€‚æ‰€ä»¥è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±ä»éœ€æ±‚åˆ†æå‡ºå‘ï¼Œåæ¨çˆ¬è™«ç³»ç»Ÿçš„åŠŸèƒ½å’Œæ¶æ„ã€‚</p><h2>éœ€æ±‚è°ƒç ”ä¸åˆ†æ</h2><p>æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/595433\">ç¬¬å…­è®²</a>ï¼Œå·²ç»è®¨è®ºäº†çˆ¬è™«çš„è®¸å¤šå•†ä¸šä»·å€¼ã€‚åœ¨è¿™ä¸ªä¿¡æ¯å¿«é€ŸæµåŠ¨çš„æ—¶ä»£ï¼Œå…ˆäººä¸€æ­¥æŒæ¡å‡†ç¡®çš„ä¿¡æ¯èƒ½è·å¾—æƒŠäººçš„å›æŠ¥ã€‚</p><p>å‡è®¾æˆ‘ä»¬é€šè¿‡è°ƒç ”å‘ç°äº†ä¸€ä¸ªå•†ä¸šæœºä¼šï¼Œå³é€šè¿‡çˆ¬è™«èšåˆå„ä¸ªä¸»æµåª’ä½“çš„å¤´æ¡æ–°é—»ï¼Œç›®çš„æ˜¯å¿«é€Ÿè·å–ç”¨æˆ·å…³å¿ƒçš„çˆ†ç‚¸æ€§æ–°é—»ï¼Œå¸®åŠ©ç”¨æˆ·å¿«äººä¸€æ­¥åœ¨èµ„æœ¬å¸‚åœºä¸Šåšå‡ºååº”ã€‚å€ŸåŠ©æœºå™¨å­¦ä¹ ç­‰æ‰‹æ®µæ„ŸçŸ¥åˆ°æŸä¸€ç±»è¯æ¡å’Œäº‹ä»¶ä¼ æ’­çš„é€Ÿåº¦ï¼Œç²¾å‡†æŠŠæ¡å®ƒä»¬å¯èƒ½æ€åŠ¨èˆ†è®ºçš„æ—¶é—´èŠ‚ç‚¹ï¼Œå¸®åŠ©ç”¨æˆ·åšä¸€åªèµ„æœ¬å¸‚åœºä¸Šçš„â€œæ˜¥æ±Ÿé¸­â€ï¼Œæå‰ååº”ã€‚</p><p>ä»¥æ­¤ä¸ºåŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥å°†éœ€æ±‚åˆ†ä¸ºä¸‰ä¸ªç»´åº¦ï¼Œå³ä¸šåŠ¡éœ€æ±‚ã€ç”¨æˆ·éœ€æ±‚å’ŒåŠŸèƒ½éœ€æ±‚ã€‚</p><ul>\n<li>å¯¹äºä¸šåŠ¡éœ€æ±‚æ¥è¯´ï¼Œå…³æ³¨ç‚¹åº”è¯¥åœ¨ä¸šåŠ¡æ–¹å¸Œæœ›åšä»€ä¹ˆã€‚è¿™é‡Œæˆ‘ä»¬å¸Œæœ›æ„å»ºä¸€ä¸ªä»¥çˆ¬è™«å¼•æ“ä¸ºåŸºç¡€çš„æ¨é€ç³»ç»Ÿï¼Œä¸ºèµ„æœ¬å¸‚åœºä¸Šçš„ç”¨æˆ·æä¾›å¿«é€Ÿçš„çƒ­ç‚¹äº‹ä»¶å’Œäº‹ä»¶é¢„è­¦ã€‚</li>\n<li>å¯¹äºç”¨æˆ·éœ€æ±‚æ¥è¯´ï¼Œæˆ‘ä»¬è¦å…³æ³¨ç”¨æˆ·å¯¹ç³»ç»Ÿçš„æœŸå¾…ã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·å¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿäº†è§£è‡ªå·±æ„Ÿå…´è¶£çš„æœ€æ–°æ–°é—»ï¼Œå¹¶æœ‰å‡†ç¡®çš„äº‹ä»¶é¢„è­¦æœºåˆ¶ï¼Œå¸®åŠ©è‡ªå·±å¿«é€Ÿå†³ç­–ã€‚</li>\n</ul><!-- [[[read_end]]] --><p>è¿›ä¸€æ­¥åˆ†æä¸šåŠ¡éœ€æ±‚å’Œç”¨æˆ·éœ€æ±‚ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç†å‡ºç³»ç»Ÿéœ€è¦å…·å¤‡çš„æµç¨‹å’Œå…³é”®ç¯èŠ‚ï¼š</p><ul>\n<li>ç”¨æˆ·å¡«å†™æˆ–é€‰æ‹©è‡ªå·±æ„Ÿå…´è¶£çš„è¯é¢˜ã€æ„Ÿå…´è¶£çš„ç½‘ç«™è¿˜æœ‰æ¶ˆæ¯æ¥å—é¢‘ç‡ï¼›</li>\n<li>ç”¨æˆ·æ¥æ”¶æœ€æ–°çƒ­ç‚¹äº‹ä»¶çš„æ¨é€ï¼›</li>\n<li>ç”¨æˆ·é€šè¿‡ç‚¹å‡»è·å–ä¸è¯¥äº‹ä»¶å…³è”çš„äº‹ä»¶ï¼Œå¹¶å¾—åˆ°ç›¸å…³çš„äº‹ä»¶é¢„æµ‹ã€é¢„è­¦ï¼Œç”šè‡³å¯èƒ½åœ¨ç½‘ç«™ä¸­è¿›è¡Œå¿«é€Ÿçš„äº¤æ˜“ï¼›</li>\n<li>ç”¨æˆ·å¯ä»¥æŸ¥çœ‹å†å²è®°å½•ï¼Œå¯è§†åŒ–å‘ˆç°æŸä¸€ä¸ªäº‹ä»¶çš„æ¥é¾™å»è„‰ï¼Œå¹¶è¿›è¡Œå¤ç›˜ã€‚</li>\n</ul><p>è¦å®ç°è¿™æ•´ä¸ªäº§å“ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸€ä¸ªå…³é”®çš„æµç¨‹ä¸ç¯èŠ‚æä¾›è¯¦ç»†çš„åŠŸèƒ½å’Œäº¤äº’ï¼Œå®Œæˆå®ƒçš„åŠŸèƒ½éœ€æ±‚ï¼Œå½¢æˆä¸€ä»½äº§å“éœ€æ±‚æ–‡æ¡£ã€‚</p><p>äº§å“éœ€æ±‚å†³å®šäº†æˆ‘ä»¬ç³»ç»Ÿçš„å…·ä½“è®¾è®¡ï¼Œè¿™ä¸­é—´åŒ…æ‹¬å‰ç«¯çš„é¡µé¢è®¾è®¡ï¼Œç”¨æˆ·äº¤äº’è®¾è®¡ï¼Œåç«¯çš„çˆ¬è™«å¼•æ“è®¾è®¡ã€æ•°æ®åˆ†æè®¾è®¡ã€æ•°æ®æ¨é€è®¾è®¡ç­‰ã€‚æˆ‘ä»¬è¿™èŠ‚è¯¾é‡ç‚¹å…³æ³¨æ”¯æ’‘è¿™ä¸€äº§å“æœ€å…³é”®çš„çˆ¬è™«å¼•æ“çš„å¼€å‘å’Œè®¾è®¡ï¼Œçˆ¬è™«å¼•æ“çš„å·¥ä½œå°±æ˜¯çˆ¬å–æŒ‡å®šæ•°æ®ï¼Œå¹¶å®Œæˆæ•°æ®çš„æ”¶é›†ã€æ¸…æ´—å’Œå­˜å‚¨ã€‚</p><p>é‚£ä¹ˆäº§å“çš„éœ€æ±‚å¦‚ä½•æŒ‡å¯¼æˆ‘ä»¬å®Œæˆå¯¹çˆ¬è™«å¼•æ“çš„è®¾è®¡å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å°†çˆ¬è™«å¼•æ“çš„è®¾è®¡åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<strong>ä¸€éƒ¨åˆ†æ˜¯å¼•æ“éœ€è¦å…·å¤‡çš„åŠŸèƒ½æ€§æ¨¡å—ï¼Œå®ƒæ˜¯ä»äº§å“éœ€æ±‚æ‹†è§£è€Œæ¥çš„ï¼›å¦ä¸€éƒ¨åˆ†æ˜¯éåŠŸèƒ½æ€§æ¨¡å—ï¼ˆä¾‹å¦‚å¯¹äº§å“å¯ç”¨æ€§ã€å¯æ‰©å±•æ€§çš„è¦æ±‚ï¼‰ï¼ŒéåŠŸèƒ½æ€§æ¨¡å—é€šå¸¸æ˜¯éšå«åœ¨éœ€æ±‚ä¸­çš„ã€‚</strong></p><h2>åŠŸèƒ½æ€§æ¨¡å—çš„è®¾è®¡</h2><p>é¦–å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹åŠŸèƒ½æ€§çš„è®¾è®¡ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬è¦å…ˆè€ƒè™‘ä¸€ä¸‹æ•°æ®çš„è¾“å…¥ã€‚çˆ¬è™«å¼•æ“çš„ä»»åŠ¡æ¥è‡ªäºå“ªé‡Œå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸ºä¸¤ç§æ¥æºï¼Œç¬¬ä¸€ç§æ˜¯æˆ‘ä»¬æå‰è§„åˆ’å¥½çš„æ–°é—»ç½‘ç«™ä¸è®ºå›ï¼Œè¿™è¢«ç§°ä¸ºç§å­ç½‘ç«™ã€‚å¦ä¸€ç§æ˜¯ç”¨æˆ·é€šè¿‡ç•Œé¢å’ŒAPIæ¥å£åŠ¨æ€å¢åŠ æˆ–ä¿®æ”¹çš„ä»»åŠ¡ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªåŠŸèƒ½æ¨¡å—è´Ÿè´£ä»»åŠ¡çš„é…ç½®ä¸ç®¡ç†ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥è¯»å–é…ç½®æ–‡ä»¶ä¸­é¢„å…ˆæŒ‡å®šçš„ä»»åŠ¡åˆ—è¡¨ï¼Œå¹¶èƒ½å¤Ÿå­˜å‚¨åé¢ç”¨æˆ·åŠ¨æ€æ–°å¢çš„ä»»åŠ¡ã€‚åŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦æœ‰æ¥å£å¯ä»¥çµæ´»åœ°å¯¹ä»»åŠ¡è¿›è¡Œå¢åˆ æŸ¥æ”¹ï¼Œäº†è§£ä»»åŠ¡å½“å‰çš„çŠ¶æ€ã€‚</p><p>æ¯ä¸ªä»»åŠ¡ä¸­é™¤äº†åŒ…å«ä»»åŠ¡è¦çˆ¬å–çš„URLï¼Œè¿˜åŒ…å«äº†ä»»åŠ¡ç›¸å…³è§„åˆ™çš„æè¿°ã€‚ä¾‹å¦‚éœ€è¦æŠ“å–é¡µé¢ä¸­çš„å“ªä¸€äº›ä¿¡æ¯ã€å“ªä¸€äº›ç½‘å€éœ€è¦è¿›è¡Œçˆ¬å–ã€é¡µé¢çˆ¬å–çš„æ·±åº¦ã€ä»¥åŠè¯·æ±‚è¶…æ—¶æ—¶é—´ç­‰ã€‚ä»»åŠ¡ç›¸å…³çš„è§„åˆ™å¯èƒ½æ¯”è¾ƒå¤æ‚å¹¶ä¸”æœ‰å…³è”ï¼Œä¾‹å¦‚Aç½‘ç«™çˆ¬å–åˆ°Bç½‘ç«™ï¼ŒBç½‘ç«™çˆ¬å–åˆ°Cç½‘ç«™ï¼Œæ¯ä¸€ä¸ªç½‘ç«™éƒ½éœ€è¦æœ‰å¯¹åº”çš„å¤„ç†è§„åˆ™ã€‚å› æ­¤æˆ‘ä»¬ç”¨ä¸€ä¸ªè§„åˆ™å¼•æ“æ¨¡å—å¤„ç†è§„åˆ™ã€‚</p><p>æœ‰äº†ä»»åŠ¡ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åˆç†åœ°å®‰æ’ä»»åŠ¡çš„æ‰§è¡Œï¼Œæˆ‘å°†è¿™ä¸ªæ¨¡å—ç§°ä¸ºè°ƒåº¦å¼•æ“ï¼Œè°ƒåº¦å¼•æ“ä¼šå°†ä»»åŠ¡å‡è¡¡åœ°åˆ†å‘åˆ°å¯¹åº”çš„é‡‡é›†æ¨¡å—ä¸­ï¼Œåˆ†åˆ«è¿›è¡Œå¤„ç†ã€‚åŒæ—¶è°ƒåº¦å¼•æ“è¿˜éœ€è¦æ¥æ”¶æ–°çš„ä»»åŠ¡å¹¶å­˜å‚¨åˆ°é˜Ÿåˆ—ä¸­ã€‚</p><p>é‡‡é›†å¼•æ“è·å–åˆ°ä»»åŠ¡ä¸è§„åˆ™åä¼šè¿›è¡Œç›¸åº”çš„é‡‡é›†å·¥ä½œï¼Œè§£æå‡ºç›¸å…³çš„é¡µé¢ä¿¡æ¯ã€‚ä¸åŒçš„é¡µé¢å¯èƒ½éœ€è¦ä¸åŒçš„è®¿é—®æ–¹å¼ï¼Œä¾‹å¦‚æœ‰äº›é¡µé¢å¯ä»¥ç›´æ¥è®¿é—®ã€æœ‰äº›éœ€è¦æ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®ï¼Œæœ‰äº›é¡µé¢éœ€è¦æå‰ç™»å½•æ‰èƒ½å¤Ÿè®¿é—®ï¼Œè¿™éƒ½æ˜¯é€šè¿‡é€‰æ‹©ä¸åŒçš„é‡‡é›†å¼•æ“å®Œæˆçš„ã€‚æ­¤å¤–ï¼Œé‡‡é›†å¼•æ“è¿˜ä¼šæŒ‰ç…§æ·±åº¦ä¼˜å…ˆæœç´¢æˆ–è€…å¹¿åº¦ä¼˜å…ˆæœç´¢ç­‰ç®—æ³•å¾ªç¯çˆ¬å–é¡µé¢ï¼Œå¹¶å°†ä»»åŠ¡å›æµç»™è°ƒåº¦å¼•æ“å¤„ç†ã€‚</p><p>åœ¨é‡‡é›†å¼•æ“çš„åŸºç¡€ä¸Šï¼Œè¿˜ä¼šæœ‰ä¸€äº›è¾…åŠ©çš„ä»»åŠ¡ç®¡ç†æ¨¡å—ã€‚è¿™äº›æ¨¡å—åŒ…æ‹¬ï¼Œé™åˆ¶å™¨ã€ä»£ç†å™¨ã€å»é‡å™¨ã€éšæœºUAã€ä»»åŠ¡ä¼˜å…ˆçº§é˜Ÿåˆ—ã€å¤±è´¥å¤„ç†å™¨ã€‚å…¶ä¸­ï¼Œé™åˆ¶å™¨è´Ÿè´£æ§åˆ¶ä»»åŠ¡çš„é‡‡å–é¢‘ç‡ï¼›ä»£ç†å™¨ç”¨äºéšè—æºIPï¼Œçªç ´æœåŠ¡å™¨çš„åçˆ¬æœºåˆ¶ï¼›å»é‡å™¨ç”¨äºé¿å…é‡å¤ä»»åŠ¡ï¼›éšæœºUAç”¨äºç”Ÿæˆéšæœºçš„User-Agentï¼›ä»»åŠ¡ä¼˜å…ˆçº§é˜Ÿåˆ—ç”¨äºä¸ºä»»åŠ¡åˆ†çº§ï¼Œé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡å…ˆæ‰§è¡Œï¼›å¤±è´¥å¤„ç†å™¨å¯ä»¥å¤„ç†é‡‡å–å¤±è´¥åçš„é‡è¯•é—®é¢˜ã€‚</p><p>é‡‡é›†å¥½æ•°æ®ä¹‹åï¼Œæ¥ä¸‹æ¥å°±è¿›å…¥åˆ°æ•°æ®çš„æ¸…æ´—å’Œå­˜å‚¨é˜¶æ®µäº†ã€‚æ”¶é›†åˆ°çš„æ•°æ®ç±»å‹å„å¼‚ï¼Œä¹Ÿå¯èƒ½æœ‰æ— æ•ˆæˆ–ä¸ç¬¦åˆè§„èŒƒçš„æ•°æ®ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬ç»Ÿä¸€è¿›è¡Œæ•°æ®æ¸…æ´—å¹¶å®Œæˆæ•°æ®çš„å­˜å‚¨å·¥ä½œã€‚åŒæ—¶ï¼Œä¸ºäº†æé«˜ç¨‹åºçš„æ€§èƒ½ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªç¼“å­˜é˜Ÿåˆ—ï¼Œä»¥ä¾¿åœ¨æ”¶é›†åˆ°ä¸€æ‰¹æ•°æ®åæ‰¹é‡å°†æ•°æ®å†™å…¥æ•°æ®åº“ä¸­ã€‚åœ¨æ•°æ®å­˜å‚¨æ–¹é¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå«åšå­˜å‚¨å¼•æ“çš„åŠŸèƒ½æ¨¡å—ï¼Œå¸®åŠ©æˆ‘ä»¬å°†æ•°æ®å­˜å‚¨åˆ°ä¸åŒç±»å‹çš„æ•°æ®åº“æˆ–æ–‡ä»¶å½“ä¸­ã€‚Workerå¤„ç†çš„æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5d/ec/5d0ab87c34ab45fa63ccede5d36f83ec.jpg?wh=1920x1414\" alt=\"å›¾ç‰‡\"></p><p>ä¸»è¦çš„åŠŸèƒ½æ€§è®¾è®¡å°±æ˜¯è¿™äº›ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†è€ƒè™‘ä¸€ä¸‹éåŠŸèƒ½æ€§éœ€æ±‚è¡ç”Ÿå‡ºæ¥çš„éåŠŸèƒ½æ€§è®¾è®¡ã€‚</p><h2>éåŠŸèƒ½æ€§æ¨¡å—çš„è®¾è®¡</h2><p>éåŠŸèƒ½æ€§çš„è®¾è®¡é¦–å…ˆè¦è€ƒè™‘çš„æ˜¯å¯æ‰©å±•æ€§ã€‚æˆ‘ä»¬å¸Œæœ›æœåŠ¡èƒ½å¤Ÿéšç€ä»»åŠ¡æ•°é‡çš„å¢åŠ è€Œæ‰©å±•ï¼Œå¸Œæœ›å®ƒèƒ½å¤Ÿå¿«é€Ÿå¢åŠ Workerç¨‹åºçš„æ•°é‡ï¼Œå¸®åŠ©æˆ‘ä»¬åº”å¯¹æ›´å¤šçš„çˆ¬è™«ä»»åŠ¡ã€‚è¿™è¦æ±‚WorkeræœåŠ¡æ˜¯æ— çŠ¶æ€çš„ï¼Œä»»åŠ¡å¯ä»¥åœ¨ä»»ä½•Workerä¸­è¿è¡Œï¼Œå¹¶ä¸”å…·æœ‰ç›¸åŒçš„è¡Œä¸ºã€‚</p><p>ä¸è¿‡è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬çš„çˆ¬è™«ä»»åŠ¡å’Œå…¶ä»–ä¸€äº›å¿«é€Ÿè¿”å›çš„HTTPè¯·æ±‚æœ‰å¾ˆå¤§ä¸åŒï¼Œæˆ‘ä»¬çš„ä»»åŠ¡å°†ä¼šåœ¨Workerä¸­é•¿æ—¶é—´å­˜åœ¨ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°è®¸å¤šæ–°çš„é—®é¢˜ï¼š</p><ul>\n<li>å½“æˆ‘ä»¬å¢åŠ ä¸€ä¸ªæ–°çš„Workerï¼Œè¯¥æ€ä¹ˆä¿è¯ä»»åŠ¡å¯ä»¥é‡æ–°åˆ†é…ï¼Œæˆ–è€…ç¡®ä¿æ–°çš„ä»»åŠ¡ä¸€å®šèƒ½åˆ†é…åˆ°æ–°çš„Workerå‘¢ï¼Ÿ</li>\n<li>æ¯ä¸€ä¸ªä»»åŠ¡çš„è´Ÿè½½æ˜¯ä¸åŒçš„ï¼Œä¾‹å¦‚ä¸€äº›ä»»åŠ¡ä¼šæ¯”å¦ä¸€äº›ä»»åŠ¡æ¶ˆè€—æ›´å¤šçš„CPUä¸å†…å­˜ã€‚é‚£ä¹ˆæˆ‘ä»¬è¦å¦‚ä½•åˆç†åˆ†é…ä»»åŠ¡ï¼Œæ‰èƒ½è®©æ¯ä¸€ä¸ªWorkerè´Ÿè½½å‡è¡¡å‘¢ï¼Ÿ</li>\n</ul><p>æ˜¾ç„¶ï¼Œå•ç‹¬çš„Workeræ— æ³•å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦æœ‰å¦å¤–çš„MasteræœåŠ¡ä½œä¸ºä»»åŠ¡çš„è°ƒåº¦å™¨ã€‚è¿™å°±æ„æˆäº†<strong>Master-Workeræ¶æ„æ¨¡å¼</strong>ã€‚</p><p>é™¤äº†æ‰©å±•æ€§ï¼Œæˆ‘ä»¬è¿˜è¦è€ƒè™‘æœåŠ¡çš„å¯ç”¨æ€§ã€‚æˆ‘ä»¬å‡è®¾äº§å“å¯¹äºæœåŠ¡çš„å¯ç”¨æ€§æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚ï¼Œå¦‚æœå°‘æ•°æœåŠ¡å´©æºƒï¼Œä¸åº”è¯¥å½±å“åˆ°æœåŠ¡çš„è¿è¡Œã€‚è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦è€ƒè™‘åˆ†å¸ƒå¼ç³»ç»Ÿçš„å®¹é”™é—®é¢˜ã€‚ç”±äºç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸¤ç§ç±»å‹çš„æœåŠ¡ï¼Œä¸€ä¸ªæ˜¯Masterï¼Œä¸€ä¸ªæ˜¯Workerã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å•ç‹¬è€ƒè™‘å®ƒä»¬çš„å®¹é”™æ€§ã€‚</p><ul>\n<li>å½“Workerå´©æºƒåï¼Œè¿è¡Œåœ¨å…¶ä¸­çš„ä»»åŠ¡å°†æ— æ³•è¿è¡Œã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›Masterèƒ½å¤Ÿç›‘æ§åˆ°Workerçš„æ•°æ®å˜åŒ–ï¼Œå¹¶ä¸”Masterèƒ½å¤Ÿé€šè¿‡ä»»åŠ¡çš„é‡æ–°åˆ†é…å°†å´©æºƒèŠ‚ç‚¹çš„ä»»åŠ¡åˆ†æ•£åˆ°å…¶ä»–Workerä¸­ã€‚å½“Workeré‡æ–°æ¢å¤åä¹Ÿæœ‰ç±»ä¼¼çš„è¿‡ç¨‹ã€‚ä¸è¿‡ç”±äºWorkeræ— çŠ¶æ€ï¼Œä¸ç”¨è€ƒè™‘Workerå´©æºƒä¹‹åæ•°æ®çš„ä¸ä¸€è‡´é—®é¢˜ã€‚</li>\n<li>å¯¹äºMasterèŠ‚ç‚¹ï¼Œå®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯å®Œæˆè°ƒåº¦å·¥ä½œï¼Œæœ¬èº«ä¸éœ€è¦å®ç°å¤šé«˜çš„å¹¶å‘é‡ï¼Œä»»åŠ¡çš„è°ƒåº¦å’Œåˆ†é…åœ¨ä¸€ä¸ªç¨‹åºä¸­å°±èƒ½æå®šã€‚ä½†æ˜¯ä¸ºäº†è§£å†³æ•…éšœå®¹é”™é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æœ‰å¤šä¸ªMasteréšæ—¶å¾…å‘½ï¼Œè¿™ä¼šéœ€è¦å¯¹å¤šä¸ªMasterè¿›è¡Œé€‰ä¸»ï¼Œå®¢æˆ·ç«¯åªèƒ½ä¸Masterçš„LeaderèŠ‚ç‚¹è¿›è¡Œäº¤äº’ï¼Œå¹¶ä¸”åªæœ‰Masterçš„LeaderèŠ‚ç‚¹èƒ½å¤Ÿè°ƒåº¦ä»»åŠ¡åˆ°Workerã€‚</li>\n</ul><p>å¥½åœ¨ï¼Œæˆ‘ä»¬åœ¨å®è·µä¸­å¹¶ä¸éœ€è¦è‡ªå·±å»å®ç°åˆ†å¸ƒå¼ç®—æ³•ã€‚ç»†æ•°ä¸€ä¸‹ï¼Œ<strong>æˆ‘ä»¬éœ€è¦ç›‘å¬WorkerèŠ‚ç‚¹ï¼Œå®ŒæˆæœåŠ¡å‘ç°ã€ä»»åŠ¡çš„åŠ¨æ€åˆ†é…ã€è¿˜æœ‰MasterèŠ‚ç‚¹çš„é€‰ä¸»å·¥ä½œ</strong>ï¼Œè¿™å‡ ç‚¹éƒ½æ˜¯åˆ†å¸ƒå¼åè°ƒæœåŠ¡å¯ä»¥åšåˆ°çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä¸ªæ–°çš„ç»„ä»¶etcdï¼Œå¸®åŠ©æˆ‘ä»¬å®Œæˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„åè°ƒå·¥ä½œã€‚</p><p>åŸºäºä¸Šé¢å¯¹åŠŸèƒ½æ€§éœ€æ±‚ä¸éåŠŸèƒ½æ€§éœ€æ±‚çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥åˆ—å‡ºç³»ç»Ÿéœ€è¦å…·å¤‡çš„æ ¸å¿ƒåŠŸèƒ½ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/aa/fc/aa5eff4891f13bd9387882882ae4a5fc.jpg?wh=1920x628\" alt=\"å›¾ç‰‡\"></p><h2>æ¶æ„è®¾è®¡</h2><p>æ¥ä¸‹æ¥ï¼Œå°±è¦è¿›è¡Œæ¶æ„è®¾è®¡äº†ã€‚ç³»ç»Ÿå®Œæ•´çš„ç³»ç»Ÿæ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/34/1d/34bb4694656be44e26956c453a62581d.jpg?wh=1920x1575\" alt=\"å›¾ç‰‡\"></p><p>è§£é‡Šä¸€ä¸‹ã€‚åœ¨è¿™é‡Œï¼ŒMasteræ€»è§ˆå…¨å±€ï¼Œä¸ºç”¨æˆ·æ“ä½œæä¾›æ¥å£ï¼Œå¹¶ä½œä¸ºä»»åŠ¡çš„è°ƒåº¦å™¨å®Œæˆå¦‚ä¸‹å·¥ä½œï¼š</p><ul>\n<li>æä¾›ä»»åŠ¡å¢åˆ æŸ¥æ”¹çš„APIï¼›</li>\n<li>å®ç°ä»»åŠ¡çš„è°ƒåº¦ï¼›</li>\n<li>åŠ¨æ€è·å–å’Œç›‘å¬WorkerèŠ‚ç‚¹çš„å˜åŒ–ï¼Œå®ç°ä»»åŠ¡åŠ¨æ€çš„è´Ÿè½½å‡è¡¡ï¼›</li>\n<li>å€ŸåŠ©etcdå®ç°é€‰ä¸»ï¼Œå®Œæˆå¯ç”¨æ€§çš„ä¿è¯ï¼›</li>\n<li>Masteré›†ç¾¤ä¸­åªä¼šæœ‰ä¸€ä¸ªLeaderï¼Œå…¶ä»–Masteræ¥æ”¶åˆ°çš„è¯·æ±‚ä¼šè½¬å‘åˆ°Leaderä¸­å¤„ç†ã€‚</li>\n</ul><p>etcdé›†ç¾¤è´Ÿè´£å®ç°Masterä¸Workerçš„åˆ†å¸ƒå¼åè°ƒå·¥ä½œï¼š</p><ul>\n<li>ä¸ºWorkerä¸Masterå®ç°æ³¨å†Œä¸­å¿ƒçš„åŠŸèƒ½ï¼›</li>\n<li>å®ç°äº‹ä»¶çš„ç›‘å¬å’Œé€šçŸ¥æœºåˆ¶ï¼›</li>\n<li>å­˜å‚¨æ¯ä¸ªWorkeréœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡ç”±Masterå®Œæˆåˆ†é…ï¼›</li>\n<li>æä¾›Masteré€‰ä¸»èƒ½åŠ›ã€‚</li>\n</ul><p>Workerè´Ÿè´£ç›‘å¬ä»»åŠ¡çš„å˜åŒ–ï¼Œå®Œæˆå…·ä½“ä»»åŠ¡çš„é‡‡é›†å·¥ä½œï¼š</p><ul>\n<li>åŠ¨æ€ç›‘å¬Masterä¸ºå…¶åˆ†é…çš„ä»»åŠ¡ï¼›</li>\n<li>æ³¨å†ŒæœåŠ¡åˆ°etcdä¸­ï¼›</li>\n<li>å®Œæˆæµ·é‡å¹¶å‘ä»»åŠ¡çš„çˆ¬å–ã€è§£æã€æ¸…æ´—ã€å­˜å‚¨å·¥ä½œã€‚</li>\n</ul><p>åˆ°è¿™é‡Œï¼Œä¸€ä¸ªçˆ¬è™«é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½ä¸åˆ†å¸ƒå¼æ¶æ„å°±ä»‹ç»å®Œæ¯•äº†ã€‚è¿™ä¸ªæ¶æ„ä»å¤§çš„æ–¹å‘ä¸Šåˆ’åˆ†äº†æ¨¡å—å’ŒåŠŸèƒ½ï¼Œä¿è¯äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å®¹é”™æ€§ä¸æ‰©å±•æ€§ã€‚å¦‚æœä»¥é—®é¢˜ä¸ºå¯¼å‘ï¼Œæˆ‘ä»¬ä¼šå‘ç°è¿™äº›æµç¨‹ã€ç»„ä»¶éƒ½æ˜¯ä¸ºäº†åº”å¯¹å…·ä½“é—®é¢˜è€Œå‡ºç°çš„ã€‚ä¸è¿‡ï¼Œè¿˜æœ‰ä¸€äº›æ¯”è¾ƒç»†èŠ‚çš„è®¾è®¡æˆ‘ä»¬è¿™èŠ‚è¯¾å¹¶æ²¡æœ‰æåˆ°ï¼Œä¾‹å¦‚ä½¿ç”¨ä½•ç§æ¡†æ¶ä¸åè®®ï¼Œä½¿ç”¨å“ªä¸€ç§é«˜å¹¶å‘æ¨¡å‹ï¼Œç¨‹åºçš„æ‰©å±•æ€§è®¾è®¡ï¼Œè¿™äº›é—®é¢˜æˆ‘ä»¬éƒ½å°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­ä¸€ä¸€è§£å†³ã€‚</p><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œè¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ä¸€ä¸ªçœŸå®éœ€æ±‚çš„ä¸€æ­¥æ­¥å‰–æï¼Œæ¢³ç†å‡ºäº†æˆ‘ä»¬çš„çˆ¬è™«ç³»ç»Ÿéœ€è¦å…·å¤‡çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½è¦†ç›–äº†åŠŸèƒ½æ€§çš„éœ€æ±‚ä¸éåŠŸèƒ½æ€§çš„éœ€æ±‚ï¼Œè¿™äº›éœ€æ±‚ä¹Ÿå†³å®šäº†æˆ‘ä»¬å¦‚ä½•è®¾è®¡ç³»ç»Ÿæ¶æ„ã€‚æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬å®ç°äº†Master-Workeræ¶æ„ï¼Œå¹¶å€ŸåŠ©åˆ†å¸ƒå¼åè°ƒæœåŠ¡etcdå®Œæˆäº†é€‰ä¸»ã€æœåŠ¡æ³¨å†Œã€èŠ‚ç‚¹ç›‘å¬ã€ä»»åŠ¡å­˜å‚¨ç­‰åŠŸèƒ½ã€‚Master-Workerå†…éƒ¨çš„æ¶æ„å…¶å®ä»ç„¶æœ‰å¾ˆå¤šå€¼å¾—æ€è€ƒå’Œè®¾è®¡çš„åœ°æ–¹ï¼Œåœ¨æ¥ä¸‹æ¥çš„å¼€å‘ç¯‡æˆ‘ä»¬è¿˜ä¼šè¿›ä¸€æ­¥è®¨è®ºã€‚</p><h2>è¯¾åé¢˜</h2><p>å­¦å®Œè¿™èŠ‚è¯¾ï¼Œæˆ‘ä¹Ÿç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜å§ã€‚</p><p>å¯¹Goè¿™ç§é™æ€ç¼–è¯‘çš„è¯­è¨€ï¼Œä½ çŸ¥é“æ€ä¹ˆåœ¨ä¸é‡æ–°ç¼–è¯‘å’Œè¿è¡Œç¨‹åºçš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€æ·»åŠ ä¸€ä¸ªæ–°çš„çˆ¬è™«ä»»åŠ¡å’Œæ–°çš„çˆ¬è™«è§„åˆ™å—ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","comments":[{"had_liked":false,"id":362037,"user_name":"é£é“ƒ","can_delete":false,"product_type":"c1","uid":2633228,"ip_address":"åŒ—äº¬","ucode":"999A26CC937C78","user_header":"https://static001.geekbang.org/account/avatar/00/28/2e/0c/b6180a5f.jpg","comment_is_top":false,"comment_ctime":1668081686,"is_pvip":false,"replies":[{"id":131697,"content":"ä¸‹å‘¨å¼€å§‹è¿›å…¥å®æˆ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1668129369,"ip_address":"åŒ—äº¬","comment_id":362037,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"å’±ä»¬å®æˆ˜è¯¾ç¨‹å¤§æ¦‚ä»€ä¹ˆæ—¶å€™å¼€å§‹äº†\n","like_count":3,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593354,"discussion_content":"ä¸‹å‘¨å¼€å§‹è¿›å…¥å®æˆ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668129369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362036,"user_name":"é£é“ƒ","can_delete":false,"product_type":"c1","uid":2633228,"ip_address":"åŒ—äº¬","ucode":"999A26CC937C78","user_header":"https://static001.geekbang.org/account/avatar/00/28/2e/0c/b6180a5f.jpg","comment_is_top":false,"comment_ctime":1668081667,"is_pvip":false,"replies":[{"id":131698,"content":"ä¸‹å‘¨å¼€å§‹è¿›å…¥å®æˆ˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1668129401,"ip_address":"åŒ—äº¬","comment_id":362036,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"å’±ä»¬ä»€ä¹ˆæ—¶å€™å¯ä»¥å¼€å§‹äº†\n","like_count":3,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593355,"discussion_content":"ä¸‹å‘¨å¼€å§‹è¿›å…¥å®æˆ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668129401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":362007,"user_name":"shuff1e","can_delete":false,"product_type":"c1","uid":1756280,"ip_address":"åŒ—äº¬","ucode":"85601271951B5A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep075ibtmxMf3eOYlBJ96CE9TEelLUwePaLqp8M75gWHEcM3za0voylA0oe9y3NiaboPB891rypRt7w/132","comment_is_top":false,"comment_ctime":1668064231,"is_pvip":false,"replies":[{"id":131701,"content":"15è®²åè¿›å…¥å®æˆ˜ï¼Œåˆ°æ—¶éƒ½ä¼šæœ‰ç›¸å¯¹åº”çš„é¡¹ç›®ä»£ç ç»™åˆ°ï¼Œä¿æŒä¸€äº›è€å¿ƒå“¦","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1668129670,"ip_address":"åŒ—äº¬","comment_id":362007,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"æœ‰ä»£ç å—ï¼Ÿä¸Šä¸‹githubçš„é“¾æ¥ã€‚talk is cheap, show me the code","like_count":2,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593359,"discussion_content":"15è®²åè¿›å…¥å®æˆ˜ï¼Œåˆ°æ—¶éƒ½ä¼šæœ‰ç›¸å¯¹åº”çš„é¡¹ç›®ä»£ç ç»™åˆ°ï¼Œä¿æŒä¸€äº›è€å¿ƒå“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668129670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364826,"user_name":"7oty","can_delete":false,"product_type":"c1","uid":1434864,"ip_address":"å¹¿ä¸œ","ucode":"6E00D586B7FF75","user_header":"","comment_is_top":false,"comment_ctime":1671547407,"is_pvip":false,"replies":[{"id":134128,"content":"https:&#47;&#47;github.com&#47;dreamerjackson&#47;crawler","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1676213973,"ip_address":"åŒ—äº¬","comment_id":364826,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"æä¾›å®æˆ˜çš„æºä»£ç å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":603448,"discussion_content":"https://github.com/dreamerjackson/crawler","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1676213973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361979,"user_name":"é€—é€¼ç« é±¼","can_delete":false,"product_type":"c1","uid":1197314,"ip_address":"åŒ—äº¬","ucode":"5E8A5E1CC375B7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJfTnE46bP9zFU0MJicYZmKYTPhm97YjgSEmNVKr3ic1BY3CL8ibPUFCBVTqyoHQPpBcbe9GRKEN1CyA/132","comment_is_top":false,"comment_ctime":1668043259,"is_pvip":false,"replies":[{"id":131704,"content":"è¿™æ˜¯ä¸€ç§æ–¹å¼ï¼Œä½†è¿™éœ€è¦æˆ‘ä»¬çš„ç¨‹åºæå‰æå‰å†™å¥½äº†è§£æä»»åŠ¡çš„ä»£ç ï¼Œè¿™å°±æ˜¯é™æ€çš„ã€‚  è¿˜æœ‰åŠ¨æ€çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ä¾é è™šæ‹Ÿæœºå®ç°ï¼Œæˆ‘ä»¬åé¢ä¼šå®æˆ˜ä¸¤ç§æ–¹å¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1668130042,"ip_address":"åŒ—äº¬","comment_id":361979,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"å¯¹ Go è¿™ç§é™æ€ç¼–è¯‘çš„è¯­è¨€ï¼Œä½ çŸ¥é“æ€ä¹ˆåœ¨ä¸é‡æ–°ç¼–è¯‘å’Œè¿è¡Œç¨‹åºçš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€æ·»åŠ ä¸€ä¸ªæ–°çš„çˆ¬è™«ä»»åŠ¡å’Œæ–°çš„çˆ¬è™«è§„åˆ™ã€‚\næ˜¯æŠŠä»»åŠ¡å†™è¿›æ•°æ®åº“é‡Œè¯»å–å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593362,"discussion_content":"è¿™æ˜¯ä¸€ç§æ–¹å¼ï¼Œä½†è¿™éœ€è¦æˆ‘ä»¬çš„ç¨‹åºæå‰æå‰å†™å¥½äº†è§£æä»»åŠ¡çš„ä»£ç ï¼Œè¿™å°±æ˜¯é™æ€çš„ã€‚  è¿˜æœ‰åŠ¨æ€çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ä¾é è™šæ‹Ÿæœºå®ç°ï¼Œæˆ‘ä»¬åé¢ä¼šå®æˆ˜ä¸¤ç§æ–¹å¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668130042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363147,"user_name":"ç¿¡ç¿ è™","can_delete":false,"product_type":"c1","uid":1448015,"ip_address":"åŒ—äº¬","ucode":"2572E93C4C57A5","user_header":"https://static001.geekbang.org/account/avatar/00/16/18/4f/9e4d5591.jpg","comment_is_top":false,"comment_ctime":1669289141,"is_pvip":false,"replies":[{"id":132255,"content":"æˆ‘ä»¬å…¶å®åªç”¨å­˜å‚¨æŸä¸€ä¸ªä»»åŠ¡çš„urlå°±å¥½äº†ï¼Œä¸ç”¨æ¯ä¸€ä¸ªä¸­é—´é‡‡é›†çš„urléƒ½å­˜èµ·æ¥ã€‚ åªå­˜å‚¨ä»»åŠ¡çš„urlçš„è¯ï¼Œå­˜åœ¨etcdæ˜¯okçš„ã€‚å› ä¸ºæˆ‘ä»¬æœ¬èº«å€ŸåŠ©äº†etcdåœ¨æˆ‘ä»¬æ¶æ„ä¸­åšäº†ä»»åŠ¡çš„è°ƒåº¦ã€‚å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æœ‰å…¶ä»–é¢å¤–çš„éœ€æ±‚ï¼Œä¾‹å¦‚é¢‘ç¹æŸ¥æ‰¾ã€ä¿®æ”¹ï¼Œåˆ†æã€‚éœ€è¦é¢å¤–å­˜åœ¨å…¶ä»–æ•°æ®åº“ä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1670266005,"ip_address":"åŒ—äº¬","comment_id":363147,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"è¯·æ•™ä¸€ä¸‹é‡‡é›†è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿå¤§é‡çš„å¾…é‡‡é›†urlï¼Œå¯èƒ½æ˜¯å‡ åƒä¸‡ï¼Œä¸Šäº¿ã€‚é—®ï¼šæˆ‘çœ‹æ¶æ„é‡Œæ²¡æœ‰ç”¨æ¶ˆæ¯é˜Ÿåˆ—åšç¼“å†²ï¼Œè¿™äº›urlæ˜¯æ”¾åˆ°ETCDå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595664,"discussion_content":"æˆ‘ä»¬å…¶å®åªç”¨å­˜å‚¨æŸä¸€ä¸ªä»»åŠ¡çš„urlå°±å¥½äº†ï¼Œä¸ç”¨æ¯ä¸€ä¸ªä¸­é—´é‡‡é›†çš„urléƒ½å­˜èµ·æ¥ã€‚ åªå­˜å‚¨ä»»åŠ¡çš„urlçš„è¯ï¼Œå­˜åœ¨etcdæ˜¯okçš„ã€‚å› ä¸ºæˆ‘ä»¬æœ¬èº«å€ŸåŠ©äº†etcdåœ¨æˆ‘ä»¬æ¶æ„ä¸­åšäº†ä»»åŠ¡çš„è°ƒåº¦ã€‚å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æœ‰å…¶ä»–é¢å¤–çš„éœ€æ±‚ï¼Œä¾‹å¦‚é¢‘ç¹æŸ¥æ‰¾ã€ä¿®æ”¹ï¼Œåˆ†æã€‚éœ€è¦é¢å¤–å­˜åœ¨å…¶ä»–æ•°æ®åº“ä¸­ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670266005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1448015,"avatar":"https://static001.geekbang.org/account/avatar/00/16/18/4f/9e4d5591.jpg","nickname":"ç¿¡ç¿ è™","note":"","ucode":"2572E93C4C57A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595672,"discussion_content":"å¾…é‡‡é›†çš„urlä¸å­˜åˆ°æŸä¸ªå­˜å‚¨ï¼ˆä¾‹å¦‚ETCDï¼‰ï¼Œåªåœ¨è‡ªå·±æœ¬æœºçš„è¯ï¼š\n1ã€å®ƒæ€ä¹ˆè®©masterè°ƒåº¦å’Œåˆ†é…ï¼Ÿ\n2ã€å®ƒæ€ä¹ˆç¡®ä¿å¾…é‡‡é›†çš„urlä¸ä¼šå› ä¸ºèŠ‚ç‚¹ä¸‹çº¿è€Œä¸¢å¤±ï¼Ÿ\n3ã€å¦‚æœæ”¾åœ¨etcdçš„è¯ï¼Œé‚£çœ‹çœ‹åé¢è¯¾ç¨‹æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670277752,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361993,"user_name":"ä¼šé£çš„å¤§è±¡","can_delete":false,"product_type":"c1","uid":1520299,"ip_address":"ä¸Šæµ·","ucode":"080A36D971E6CF","user_header":"https://static001.geekbang.org/account/avatar/00/17/32/ab/272af78e.jpg","comment_is_top":false,"comment_ctime":1668049967,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"å°†çˆ¬è™«ä»»åŠ¡å’Œè§„åˆ™ç»´æŠ¤åˆ°etcdé…ç½®ä¸­å¿ƒï¼Œè¿›è¡Œé…ç½®çƒ­åŠ è½½","like_count":6},{"had_liked":false,"id":361976,"user_name":"æ‹¾æ‡æ‹¾æ‡","can_delete":false,"product_type":"c1","uid":1051873,"ip_address":"æµ™æ±Ÿ","ucode":"D775F374C2A1D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/e1/f663213e.jpg","comment_is_top":false,"comment_ctime":1668040950,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":1,"score":2,"product_id":100124001,"comment_content":"é…ç½®ä¸­å¿ƒæˆ–è€…ç›‘å¬é…ç½®æ–‡ä»¶","like_count":2},{"had_liked":false,"id":362111,"user_name":"è€çŒ«","can_delete":false,"product_type":"c1","uid":1008270,"ip_address":"æ±Ÿè‹","ucode":"7F23297709749A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/8e/985cbc25.jpg","comment_is_top":false,"comment_ctime":1668158673,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"1. ä»»åŠ¡ï¼Œé€šè¿‡ç”¨æˆ·ç•Œé¢æ·»åŠ åˆ°æ•°æ®åº“é‡Œï¼Œç„¶åä»»åŠ¡è°ƒåº¦å™¨è¯»å–ä»»åŠ¡è¿›è¡Œå°±å¥½äº†ã€‚\n2. è§„åˆ™ï¼Œä¸¤ç§æ€è·¯ï¼Œå¦‚æœå¯ä»¥å°†è§„åˆ™å†™æˆé…ç½®æ–‡ä»¶ï¼Œå¦‚yaml,jsonä¹‹ç±»çš„ï¼Œé‚£ç›´æ¥åŠ¨æ€æ·»åŠ è¿™ä¸ªè§„åˆ™ã€‚ä½†å¦‚æœè¿™ä¸ªè§„åˆ™æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥è€ƒè™‘ä¸ºè§„åˆ™å•ç‹¬èµ·ä¸€ä¸ªæœåŠ¡ï¼Œå°†æœåŠ¡é…ç½®åˆ°ä»»åŠ¡è°ƒåº¦å™¨é‡Œ","like_count":1},{"had_liked":false,"id":361971,"user_name":"Realm","can_delete":false,"product_type":"c1","uid":1081299,"ip_address":"æµ™æ±Ÿ","ucode":"30CBEBE619D1A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg","comment_is_top":false,"comment_ctime":1668038445,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"çŒœæµ‹ä¸€ä¸‹ï¼šç”¨åç¨‹è®¢é˜…etcdä¸­çš„&#47;jobsã€&#47;rulesï¼Œ\nåœ¨etcdä¸­å¢åŠ ä»»åŠ¡å’Œçˆ¬è™«è§„åˆ™æ—¶ï¼Œä¼šé€šçŸ¥è®¢é˜…è€…ï¼Œè¾¾åˆ°åŠ¨æ€é…ç½®çš„æ•ˆæœ.","like_count":1},{"had_liked":false,"id":372506,"user_name":"çˆ±ç¼–ç¨‹çš„è¿ç»´","can_delete":false,"product_type":"c1","uid":2535502,"ip_address":"å¹¿ä¸œ","ucode":"696DBA399CCFA3","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/4faqHgQSawd4VzAtSv0IWDddm9NucYWibRpxejWPH5RUO310qv8pAFmc0rh0Qu6QiahlTutGZpia8VaqP2w6icybiag/132","comment_is_top":false,"comment_ctime":1681213139,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100124001,"comment_content":"è€å¸ˆæœ‰ç¾¤å—ï¼Ÿ\næˆ‘ç›®å‰åœ¨è´Ÿè´£åšä¸€ä¸ªæ‹¨æµ‹ç³»ç»Ÿï¼ŒåŠŸèƒ½è·Ÿè¿™ä¸ªå¾ˆåƒï¼Œç»†èŠ‚æ–¹é¢å¯èƒ½éœ€è¦è°ƒæ•´ï¼Œåˆ°æ—¶å€™æœ‰é—®é¢˜å¯ä»¥è·Ÿå¤§å®¶ä¸€èµ·è®¨è®º ","like_count":0},{"had_liked":false,"id":370396,"user_name":"Levi","can_delete":false,"product_type":"c1","uid":2997018,"ip_address":"æ±Ÿè‹","ucode":"ED51541B534456","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELFU3Q4jNo4GWeuW6Qib7ibY4QtJ62uFumhtQ8sRSeO2971nQrydCgHz5c5xLSKjicibGIASL9QMy8koA/132","comment_is_top":false,"comment_ctime":1678783563,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100124001,"comment_content":"æ„Ÿè§‰å’Œborgç³»ç»Ÿè®¾è®¡å¾ˆç›¸ä¼¼å•Š","like_count":0},{"had_liked":false,"id":364214,"user_name":"kernelscript","can_delete":false,"product_type":"c1","uid":3241075,"ip_address":"å®‰å¾½","ucode":"4ECC8FCC6070C5","user_header":"","comment_is_top":false,"comment_ctime":1670664218,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100124001,"comment_content":"è€å¸ˆè¿™ä¸ªä¸“æ è®¾è®¡çœŸçš„çš„éå¸¸å¥½, å±‚å±‚é€’è¿›, ç¯ç¯ç›¸æ‰£, å¦‚æœå‰é¢æ²¡æœ‰å‰é¢çš„é“ºå«, ç›´æ¥çœ‹åé¢çš„å†…å®¹, ä¼šå‘ç°ååˆ†çš„è¿·æƒ‘","like_count":0},{"had_liked":false,"id":363595,"user_name":"ã€‚ã€‚ã€‚ä¸çŸ¥é“èµ·å•¥åå­—","can_delete":false,"product_type":"c1","uid":2529189,"ip_address":"æ¹–åŒ—","ucode":"7FEE8524BFF2DD","user_header":"https://static001.geekbang.org/account/avatar/00/26/97/a5/e52d10bb.jpg","comment_is_top":false,"comment_ctime":1669862022,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100124001,"comment_content":"ç»ˆäºè¦è¿›å…¥å®æˆ˜äº†ï¼ŒåŠ æ²¹ï¼å¥¥åŠ›ç»™ï¼","like_count":0}]}