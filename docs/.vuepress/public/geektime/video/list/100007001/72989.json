{"id":72989,"title":"153 | OAuth2令牌刷新实验(lab08)","content":"","comments":[{"had_liked":false,"id":298597,"user_name":"Trapped","can_delete":false,"product_type":"c3","uid":2299922,"ip_address":"","ucode":"CA3745D6D9FBF0","user_header":"https://static001.geekbang.org/account/avatar/00/23/18/12/b419c29c.jpg","comment_is_top":false,"comment_ctime":1624218863,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"杨老师您好，我有两个问题\n1. 我发代码中authenticate access token的部分，不会延长access token的expires_at，而是延长对应refresh token的expires_at。这是否意味着access_token的expires_at是immutable的，当一个access_token过期，只能通过尚未过期的refresh_token来获取新的access_token。详见：https:&#47;&#47;github.com&#47;spring2go&#47;gravitee&#47;blob&#47;master&#47;oauth&#47;authenticate.go#L36-L47\n\n2.在refresh token的handler里面，代码是使用“login”的方式来得到新的access token。\n既然您已经在下面一行验证了refresh token的validity, 为什么不直接生成access token呢？为什么还要通过调用login来产生token呢？\nhttps:&#47;&#47;github.com&#47;spring2go&#47;gravitee&#47;blob&#47;master&#47;oauth&#47;grant_type_refresh_token.go#L12 ","like_count":0}]}