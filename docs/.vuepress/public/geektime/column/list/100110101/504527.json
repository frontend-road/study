{"id":504527,"title":"06ï½œPressableï¼šå¦‚ä½•å®ç°ä¸€ä¸ªä½“éªŒå¥½çš„ç‚¹æŒ‰ç»„ä»¶ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å®ä¼Ÿã€‚</p><p>ç‚¹æŒ‰ç»„ä»¶çš„è®¾è®¡ä¸æˆ‘ä»¬çš„ç”¨æˆ·ä½“éªŒæ¯æ¯ç›¸å…³ã€‚æœ‰äººä¼šå› ä¸ºæœºæ¢°é”®ç›˜çš„æ•²å‡»æ„Ÿå¥½ï¼Œä¸ä¹°ç™¾æ¥å—çš„è–„è†œé”®ç›˜ï¼Œè€ŒèŠ±ä¸Šè´µåå€çš„ä»·æ ¼å»ä¹° HHKBã€Filcoï¼Œä¹Ÿæœ‰äººä¼šå› ä¸ºæŸä¸ªåº”ç”¨çš„ç‚¹æŒ‰ä½“éªŒä¸å¥½ï¼Œè€Œè½¬æŠ•ç«å“åº”ç”¨ã€‚</p><p>å¦‚æœä½ ä»”ç»†è§‚å¯Ÿè¿‡ä¸–ç•Œä¸Šé‚£äº›æµè¡Œçš„ã€å£ç¢‘å¾ˆå¥½ Appï¼Œæ¯”å¦‚å¾®ä¿¡ï¼Œä½ ä¼šçœ‹åˆ°å®ƒä»¬åœ¨ç‚¹æŒ‰ç»„ä»¶çš„ä½“éªŒçš„ç»†èŠ‚ä¸Šéƒ½åšå¾—ç‰¹åˆ«å¥½ã€‚</p><p>æ¯”å¦‚ï¼Œå¾®ä¿¡çš„ç‚¹æŒ‰ç»„ä»¶éƒ½æ˜¯æœ‰äº¤äº’åé¦ˆçš„ï¼Œæ— è®ºæ˜¯èƒŒæ™¯é¢œè‰²çš„åŠ æ·±ï¼Œè¿˜æ˜¯é‚£äº›èˆ’æœçš„éœ‡åŠ¨ï¼Œåˆæˆ–è€…æ˜¯åŠ¨ç”»ã€‚åˆæ¯”å¦‚ï¼Œå¾®ä¿¡é¡¶éƒ¨å³ä¸Šè§’çš„åŠ å·æŒ‰é’®æ˜¯å¾ˆå®¹æ˜“ç‚¹å‡»çš„ï¼Œå®ƒçš„ç‚¹å‡»åŒºåŸŸæ˜¯æ¯”æ˜¾ç¤ºå›¾æ ‡å¤§ä¸Šé‚£ä¹ˆä¸€ä¸¢ä¸¢ï¼Œè€Œä¸”ç‚¹åˆ°åï¼Œå³ä½¿æŠŠæ‰‹æŒ‡æŒªå¼€å›¾æ ‡çš„ä½ç½®å†æ¾å¼€ä¹Ÿæ˜¯èƒ½è§¦å‘ç‚¹å‡»çš„ã€‚</p><p>æ‰€æœ‰çš„è¿™äº›è®¾è®¡éƒ½æ˜¯â€œæ‡‚â€ç”¨æˆ·çš„ã€‚æ‹…å¿ƒä½ å› ä¸ºç½‘ç»œå¡ã€æœºå™¨å¡ä¸çŸ¥é“æœ‰æ²¡æœ‰è‡ªå·±ç‚¹ä¸­ï¼Œåœ¨ä½ ç‚¹å®Œåç»™ä½ è§†è§‰æˆ–è§¦è§‰ä¸Šçš„åé¦ˆï¼›æ‹…å¿ƒä½ èµ°è·¯çš„æ—¶å€™æƒ³ç‚¹ç‚¹ä¸åˆ°ï¼ŒæŠŠäº‹ä»¶çš„â€œå¯è§¦å‘åŒºåŸŸâ€ã€â€œå¯ä¿ç•™åŒºåŸŸ â€è®¾ç½®å¾—æ¯”è§†è§‰ä¸Šçš„â€œå¯è§åŒºåŸŸâ€å¤§ä¸Šé‚£ä¹ˆä¸€äº›ã€‚</p><p>ä½œä¸ºç›´æ¥å’Œç”¨æˆ·æ‰“äº¤é“çš„å·¥ç¨‹å¸ˆï¼Œ<strong>æˆ‘ä»¬ä¹Ÿå¾—â€œæ‡‚â€ç”¨æˆ·ï¼Œ</strong>ä¹Ÿå¾—å»ä¼˜åŒ–æˆ‘ä»¬è´Ÿè´£çš„ Appã€é¡µé¢çš„ä½“éªŒï¼Œ<strong>è¿˜å¾—åœ¨æŠ€æœ¯ä¸Šææ‡‚ç‚¹æŒ‰ç»„ä»¶ä½¿ç”¨æ–¹æ³•å’ŒèƒŒåçš„åŸç†ï¼ŒæŠŠè¿™ç§æœ€å¸¸ç”¨çš„äººæœºäº¤äº’ä½“éªŒç»™åšåˆ°åŠæ ¼ï¼Œåšåˆ°ä¼˜ç§€ã€‚</strong></p><p>æ‰€ä»¥ï¼Œä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä¼šä»¥ä¸‰ä¸ªé—®é¢˜ä¸ºè„‰ç»œè¿›è¡Œè®²è§£ï¼š</p><!-- [[[read_end]]] --><ul>\n<li>ç‚¹æŒ‰ç»„ä»¶æ˜¯è¦ç®€å•æ˜“ç”¨è¿˜æ˜¯è¦åŠŸèƒ½ä¸°å¯Œï¼Œå¦‚ä½•å–èˆï¼Ÿ</li>\n<li>ç‚¹æŒ‰ç»„ä»¶æ˜¯å¦‚ä½•çŸ¥é“å®ƒæ˜¯è¢«ç‚¹å‡»äº†ï¼Œè¿˜æ˜¯è¢«é•¿æŒ‰äº†ï¼Ÿ</li>\n<li>ç‚¹æŒ‰ç»„ä»¶ä¸ºä»€ä¹ˆè¿˜è¦æ”¯æŒç”¨æˆ·ä¸­é€”å–æ¶ˆç‚¹å‡»ï¼Ÿ</li>\n</ul><p>é€šè¿‡è¿™ä¸‰ä¸ªé—®é¢˜ï¼Œä½ ä¸ä»…èƒ½æ˜ç™½å¦‚ä½•åœ¨ React Native ä¸­å®ç°ä¸€ä¸ªä½“éªŒå¥½çš„ç‚¹æŒ‰ç»„ä»¶ï¼ŒåŒæ—¶ä¹Ÿèƒ½å€ŸåŠ©å®ƒèƒŒåçš„è®¾è®¡åŸç†ï¼Œæ›´â€œæ‡‚â€ç”¨æˆ·ï¼Œæå‡äº§å“çš„ç”¨æˆ·ä½“éªŒã€‚</p><h2>è¦ç®€å•æ˜“ç”¨è¿˜æ˜¯åŠŸèƒ½ä¸°å¯Œï¼Ÿ</h2><p>é¦–å…ˆï¼Œç‚¹æŒ‰ç»„ä»¶æ˜¯è®¾è®¡ç»™ä½ æˆ‘è¿™æ ·çš„å¼€å‘è€…æ¥ä½¿ç”¨çš„ï¼Œå®ƒåŠŸèƒ½è¶Šç®€å•å¼€å‘è€…ç”¨èµ·æ¥å°±è¶Šç®€å•ï¼Œå®ƒåŠŸèƒ½è¶Šå¤æ‚å°±èƒ½æ»¡è¶³æ›´å¤šçš„éœ€æ±‚åœºæ™¯ã€‚é‚£æ˜¯è®©å¼€å‘è€…ç®€å•æ˜“ç”¨å¥½ï¼Œè¿˜æ˜¯ç”¨ä¸°å¯Œçš„åŠŸèƒ½å»æ»¡è¶³ç”¨æˆ·ï¼Œæœ‰æ²¡æœ‰ä¸¤å…¨å…¶ç¾ä¹‹è®¡ï¼Ÿ</p><p>å®é™…ä¸Šï¼ŒReact Native çš„ç‚¹æŒ‰ç»„ä»¶ç»å†äº†ä¸‰ä¸ªç‰ˆæœ¬çš„è¿­ä»£ï¼Œæ‰æ‰¾åˆ°äº†ä¸¤å…¨å…¶ç¾çš„ç­”æ¡ˆã€‚ç­‰ä½ äº†è§£äº†è¿™ä¸ªä¸‰ä¸ªç‰ˆæœ¬çš„è¿­ä»£æ€è·¯åï¼Œä½ å°±èƒ½å¾ˆå¥½æ˜ç™½ä¼˜ç§€é€šç”¨ç»„ä»¶åº”è¯¥å¦‚ä½•è®¾è®¡ï¼Œæ‰èƒ½åŒæ—¶åœ¨ç”¨æˆ·ä½“éªŒ UX å’Œå¼€å‘è€…ä½“éªŒ DX ä¸Šæ‰¾åˆ°å¹³è¡¡ã€‚</p><p>æˆ‘å…ˆç»™ä½ ä»ç¬¬ä¸€ä»£ç‚¹æŒ‰ç»„ä»¶å¼€å§‹è®²èµ·ã€‚</p><h3>ç¬¬ä¸€ä»£ Touchable ç»„ä»¶</h3><p>ç¬¬ä¸€ä»£ç‚¹æŒ‰ç»„ä»¶æƒ³è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼Œ<strong>æè¿‡å¤šç§åé¦ˆé£æ ¼</strong>ã€‚</p><p>ä¸€ä¸ªä½“éªŒå¥½çš„ç‚¹æŒ‰ç»„ä»¶ï¼Œéœ€è¦åœ¨ç”¨æˆ·ç‚¹æŒ‰åè¿›è¡Œå®æ—¶åœ°åé¦ˆï¼Œé€šè¿‡è§†è§‰å˜åŒ–ç­‰å½¢å¼ï¼Œå‘Šè¯‰ç”¨æˆ·ç‚¹åˆ°äº†ä»€ä¹ˆï¼Œç°åœ¨çš„ç‚¹å‡»çŠ¶æ€åˆæ˜¯ä»€ä¹ˆã€‚</p><p>ä½†ä¸åŒçš„åŸç”Ÿå¹³å°ï¼Œæœ‰ä¸åŒçš„é£æ ¼ï¼Œåé¦ˆæ ·å¼ä¹Ÿä¸åŒã€‚Android æŒ‰é’®ç‚¹å‡»åä¼šæœ‰æ¶Ÿæ¼ªï¼ŒiOS æŒ‰é’®ç‚¹å‡»åä¼šé™ä½é€æ˜åº¦æˆ–è€…åŠ æ·±èƒŒæ™¯è‰²ã€‚React Native æ˜¯è·¨å¹³å°çš„ï¼Œé‚£å®ƒåº”è¯¥å¦‚ä½•æ”¯æŒå¤šç§å¹³å°çš„å¤šç§åé¦ˆé£æ ¼å‘¢ï¼Ÿ</p><p>ç¬¬ä¸€ä»£ Touchable ç‚¹æŒ‰ç»„ä»¶çš„è®¾è®¡æ€è·¯æ˜¯ï¼Œæä¾›å¤šç§åŸç”Ÿå¹³å°çš„åé¦ˆé£æ ¼ç»™å¼€å‘è€…è‡ªå·±é€‰æ‹©ã€‚æ¡†æ¶æä¾›äº† 1 ä¸ªåŸºç±»å’Œ 4 ä¸ªæ‰©å±•ç±»ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š</p><ul>\n<li>TouchableWithoutFeedbackï¼šç”¨äºå“åº”ç”¨æˆ·çš„ç‚¹æŒ‰æ“ä½œï¼Œä½†ä¸ç»™å‡ºä»»ä½•ç‚¹æŒ‰åé¦ˆæ•ˆæœã€‚åé¦ˆæ•ˆæœç”± 4 ä¸ªæ‰©å±•ç±»å®ç°ï¼›</li>\n<li>TouchableNativeFeedbackï¼šç»™å‡ºå½“å‰åŸç”Ÿå¹³å°çš„ç‚¹æŒ‰åé¦ˆæ•ˆæœï¼Œåœ¨ Android ä¸­æ˜¯æ¶Ÿæ¼ªï¼ˆrippleï¼‰æ•ˆæœï¼Œå°±æ˜¯ä»ç‚¹å‡»å¤„æ•£å¼€æ°´æ³¢çº¹çš„æ•ˆæœï¼›</li>\n<li>TouchableOpacityï¼šçŸ­æš‚åœ°æ”¹å˜ç»„ä»¶çš„é€æ˜åº¦ï¼›</li>\n<li>TouchableHighlightï¼šçŸ­æš‚åœ°åŠ æ·±ç»„ä»¶çš„èƒŒæ™¯è‰²ï¼›</li>\n<li>TouchableBounceï¼šæœ‰ bounce å›å¼¹åŠ¨ç”»çš„å“åº”æ•ˆæœã€‚</li>\n</ul><p>Touchable ç‚¹æŒ‰ç»„ä»¶æä¾›äº† 5 ä¸ªç±»ï¼Œé€‰æ‹©èµ·æ¥ä¹Ÿå¾ˆéº»çƒ¦ã€‚æœ‰ç»éªŒçš„å¼€å‘è€…å¯èƒ½çŸ¥é“å¦‚ä½•è¿›è¡Œé€‰æ‹©ï¼Œä½†æ–°æ‰‹å´è¦èŠ±ä¸Šå¾ˆé•¿æ—¶é—´ï¼Œå»äº†è§£ä¸åŒç»„ä»¶ä¹‹é—´çš„åŒºåˆ«ã€‚æ‰€ä»¥è¯´ï¼ŒTouchable ç‚¹æŒ‰ç»„ä»¶åœ¨æä¾›å¤šæ ·æ€§çš„åŠŸèƒ½æ”¯æŒçš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†é¢å¤–çš„å­¦ä¹ æˆæœ¬ã€‚</p><p>ä¸ºäº†é™ä½å­¦ä¹ æˆæœ¬ï¼ŒReact Native å›¢é˜Ÿåˆå¼€å‘äº†ç¬¬äºŒä»£ç‚¹æŒ‰ç»„ä»¶ï¼ŒButtonã€‚</p><h3>ç¬¬äºŒä»£ Button ç»„ä»¶</h3><p>ç¬¬äºŒä»£ Button ç»„ä»¶çš„å®è´¨æ˜¯<strong>å¯¹ Touchable ç»„ä»¶çš„å°è£…ã€‚</strong>åœ¨ Android ä¸Šæ˜¯ TouchableNativeFeedback ç»„ä»¶ï¼Œåœ¨ iOS ä¸Šæ˜¯ TouchableOpacity ç»„ä»¶ã€‚</p><p>Button ç»„ä»¶çš„è®¾è®¡æ€æƒ³å°±æ˜¯ï¼Œåˆ«è®©å¼€å‘è€…çº ç»“é€‰å•¥ç»„ä»¶äº†ï¼Œæ¡†æ¶å·²ç»é€‰å¥½äº†ï¼Œç‚¹æŒ‰åé¦ˆçš„æ ·å¼å°±å’ŒåŸç”Ÿå¹³å°çš„è‡ªèº«é£æ ¼ä¿æŒç»Ÿä¸€å°±å¥½äº†ã€‚</p><p>ä½†æˆ‘çš„ç»éªŒå‘Šè¯‰æˆ‘ï¼Œè¦è®©å¤§å¤šæ•°å¼€å‘è€…éƒ½é€‰æ‹©åŒä¸€ä¸ªé»˜è®¤çš„ UI æ ·å¼çœŸæ˜¯å¤ªéš¾äº†ï¼Œèåœç™½èœå„æœ‰æ‰€çˆ±ã€‚å¦å¤–ï¼Œç”¨æˆ·çš„å®¡ç¾ä¹Ÿåœ¨æ…¢æ…¢åœ°å˜åŒ–ï¼Œæ¶Ÿæ¼ªé£æ ¼ä¹Ÿå¥½ï¼Œé™ä½é€æ˜é£æ ¼ä¹Ÿå¥½ï¼ŒèƒŒæ™¯é«˜äº®é£æ ¼ä¹Ÿå¥½ï¼Œæˆ–è®¸å‡ å¹´åå°±ä¸ä¼šå†æµè¡Œäº†ã€‚ç”šè‡³è¿ Button è¿™ä¸ªæ¦‚å¿µæœ¬èº«ï¼Œéƒ½åœ¨æ…¢æ…¢åœ°å˜åŒ–ï¼Œç°åœ¨çš„ App ä¸­å‡ ä¹åªè¦æ˜¯ä¸ªå›¾ç‰‡æˆ–è€…æ–‡å­—éƒ½èƒ½ç‚¹æŒ‰ï¼Œä¸å†å±€é™äºåªæœ‰å››å››æ–¹æ–¹çš„è‰²å—æ‰èƒ½ç‚¹æŒ‰äº†ã€‚</p><p>Button ç»„ä»¶è™½ç„¶é™ä½äº†å¼€å‘è€…é€‰æ‹©æˆæœ¬ï¼Œä½†æ˜¯æƒ³åœ¨ UI é£æ ¼ä¸Šè®©å¤§å®¶é€‰æ‹©éƒ½åŸç”Ÿå¹³å°è‡ªèº«çš„é£æ ¼ï¼Œè¿™å¤ªéš¾äº†ã€‚å› æ­¤ï¼ŒReact Native å›¢é˜Ÿåˆå¼€å‘äº†ç¬¬ä¸‰ä»£ç‚¹æŒ‰ç»„ä»¶ Pressableã€‚</p><h3>ç¬¬ä¸‰ä»£ Pressable ç»„ä»¶</h3><p>ç¬¬ä¸‰ä»£ Pressable ç‚¹æŒ‰ç»„ä»¶ï¼Œä¸å†æ˜¯ Touchable ç»„ä»¶çš„å°è£…ï¼Œè€Œæ˜¯<strong>ä¸€ä¸ªå…¨æ–°é‡æ„çš„ç‚¹æŒ‰ç»„ä»¶ï¼Œ</strong>å®ƒçš„åé¦ˆæ•ˆæœå¯ç”±å¼€å‘è€…è‡ªè¡Œé…ç½®ã€‚</p><p>ä½†æ˜¯ï¼Œç‚¹æŒ‰ç»„ä»¶é€šå¸¸æ˜¯æœ‰ç‚¹å‡»å’Œæœªç‚¹å‡»ä¸¤ç§çŠ¶æ€çš„ï¼Œè¿™ä¸¤ç§çŠ¶æ€å¯¹åº”ç€ä¸¤ç§ç‚¹æŒ‰æ ·å¼ï¼Œä¸€ç§æ ·å¼æ˜¯æœªç‚¹å‡»æ—¶çš„åŸºç¡€æ ·å¼ï¼Œä¸€ç§æ˜¯ç‚¹æŒ‰åçš„åé¦ˆæ ·å¼ã€‚è¿™ä¸¤ç§æ ·å¼æ€ä¹ˆå†™ï¼Ÿåˆè¯¥æ€ä¹ˆåˆ‡æ¢ï¼Ÿ</p><p>Pressable ç»„ä»¶çš„ API è®¾è®¡å¾—å¾ˆæ˜¯å·§å¦™ï¼Œæ‰©å±•èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚Pressable çš„æ ·å¼ style å±æ€§åŒæ—¶æ”¯æŒå›ºå®šæ ·å¼ï¼Œå’Œå‡½æ•°è¿”å›çš„â€œåŠ¨æ€æ ·å¼â€ï¼š</p><pre><code class=\"language-typescript\">type PressableStyle = ViewStyle | (({ pressed: boolean }) =&gt; ViewStyle)\n</code></pre><p>å…¶ä¸€ï¼Œå›ºå®šæ ·å¼ï¼Œä¹Ÿå°±æ˜¯<code>type PressableStyle = ViewStyle</code> çš„æ„æ€æ˜¯ï¼ŒPressable ç»„ä»¶çš„æ”¯æŒæ ·å¼ç±»å‹å’Œ View ç»„ä»¶çš„æ”¯æŒæ ·å¼ç±»å‹æ˜¯ä¸€æ ·çš„ï¼Œå…·ä½“ <code>ViewStyle</code> éƒ½åŒ…æ‹¬é‚£äº›â€œé€šç”¨â€æ ·å¼å’Œâ€œç§æœ‰â€æ ·å¼ï¼Œæˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/501650\">ã€ŠStyleã€‹</a>ä¸­å·²ç»å­¦è¿‡äº†ï¼Œç›¸ä¿¡ä½ èƒ½å¾ˆå¿«å›æƒ³èµ·æ¥ã€‚</p><p>å…¶äºŒï¼ŒåŠ¨æ€æ ·å¼ï¼Œä¹Ÿå°±æ˜¯<code>type PressableStyle = (({ pressed: boolean }) =&gt; ViewStyle)</code> çš„æ„æ€æ˜¯ï¼Œåœ¨ç”¨æˆ·æ²¡æœ‰ç‚¹å‡»æ—¶ pressed å€¼ä¸º falseï¼Œåœ¨ç”¨æˆ·ç‚¹å‡»æ—¶ pressed å€¼ä¸º trueï¼Œä½ å¯ä»¥æ ¹æ®ä¸¤ç§ç‚¹æŒ‰çŠ¶æ€ï¼Œä¸ºæŒ‰é’®å®šåˆ¶ä¸åŒçš„æ ·å¼ã€‚</p><p>å…·ä½“æ€ä¹ˆå®ç°å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹å›ºå®šæ ·å¼ã€‚å›ºå®šæ ·å¼ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŒ‰é’®ç»„ä»¶çš„æ ·å¼æ˜¯â€œå›ºå®šâ€çš„ï¼Œæ¯”å¦‚ä½ å¯ä»¥çœ‹ä¸‹è¿™æ®µä»£ç ï¼š</p><pre><code class=\"language-plain\">// å›ºå®šçš„åŸºç¡€æ ·å¼\nconst baseStyle = { width: 50, height: 50, backgroundColor: 'red'}\n\n&lt;Pressable\n  onPress={handlePress}\n  style={baseStyle} &gt;\n  &lt;Text&gt;æŒ‰é’®&lt;/Text&gt;\n&lt;/Pressable&gt;\n</code></pre><p>è¿™æ®µç¤ºä¾‹ä»£ç å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„å›ºå®šæ ·å¼æŒ‰é’®çš„ä»£ç ç‰‡æ®µã€‚æˆ‘ä»¬åœ¨ Pressable å…ƒç´ ä¸­åµŒå¥—äº†ä¸€ä¸ªæ–‡å­—æ˜¯â€œæŒ‰é’®â€çš„ Text å…ƒç´ ï¼Œå¹¶ç»™ Pressable å…ƒç´ æ·»åŠ äº†ä¸€ä¸ªå›ºå®šçš„åŸºç¡€æ ·å¼ï¼Œå®½é«˜å„ä½ 50 åƒç´ ï¼Œä¸”èƒŒæ™¯é¢œè‰²ä¸ºçº¢è‰²ã€‚</p><p>é‚£å¦‚æœæˆ‘ä»¬éœ€è¦å®ç°åŠ¨æ€æ ·å¼ï¼Œåº”è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿæ¯”å¦‚ï¼Œä½ æƒ³åœ¨æ‰€æœ‰å¹³å°éƒ½å®ç°é™ä½é€æ˜åº¦çš„ç‚¹å‡»åé¦ˆï¼Œé‚£ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªåŸºç¡€æ ·å¼ baseStyleï¼Œç„¶åé€šè¿‡ç‚¹æŒ‰çŠ¶æ€ pressed ï¼Œç®¡ç†é€æ˜åº¦ opacity çš„åˆ‡æ¢ã€‚å…·ä½“çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">// å›ºå®šçš„åŸºç¡€æ ·å¼\nconst baseStyle = { width: 50, height: 50, backgroundColor: 'red'}\n\n&lt;Pressable\n  onPress={handlePress}\n  style={({ pressed }) =&gt; [ /* åŠ¨æ€æ ·å¼ */\n    baseStyle,\n    { opacity: pressed ? 0.5 : 1} \n  ]} &gt;\n  &lt;Text&gt;æŒ‰é’®&lt;/Text&gt;\n&lt;/Pressable&gt;\n</code></pre><p>è¿™æ®µç¤ºä¾‹ä»£ç ç”¨çš„å°±æ˜¯ Pressable çš„åŠ¨æ€æ ·å¼ã€‚é¦–æ¬¡æ¸²æŸ“æ—¶ï¼ŒReact Native ä¼šå…ˆè°ƒç”¨ä¸€æ¬¡ Pressable çš„ style å±æ€§çš„å›è°ƒå‡½æ•°ï¼Œè¿™æ—¶ç‚¹æŒ‰çŠ¶æ€ pressed æ˜¯ falseï¼Œé€æ˜åº¦ä¸º 1ã€‚åœ¨ä½ è§¦ç¢°åˆ°â€œæŒ‰é’®â€æ—¶ï¼Œå°±ä¼šè§¦å‘ç‚¹å‡»äº‹ä»¶ onPressï¼Œä¸æ­¤åŒæ—¶ï¼ŒReact Native ä¼šå†è°ƒç”¨ä¸€æ¬¡ style å±æ€§çš„å›è°ƒå‡½æ•°ï¼Œæ­¤æ—¶ç‚¹æŒ‰çŠ¶æ€ pressed æ˜¯ trueï¼Œé€æ˜åº¦ä¸º 0.5ã€‚åœ¨ä½ æ¾å¼€â€œæŒ‰é’®â€åï¼Œé€æ˜åº¦ä¼šé‡æ–°å˜ä¸º 1ã€‚</p><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨åŠ¨æ€æ ·å¼æ¥å®ç°é™ä½é€æ˜åº¦çš„ç‚¹å‡»åé¦ˆæ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚é™¤äº†æ”¹å˜é€æ˜åº¦ï¼Œä½ è¿˜å¯ä»¥é€‰æ‹©æ”¹å˜èƒŒæ™¯è‰²ï¼Œæ”¹å˜æŒ‰é’®çš„å®½é«˜ï¼Œç”šè‡³è¿˜å¯ä»¥æŠŠâ€œæŒ‰é’®â€çš„æ–‡å­—æ”¹äº†ã€‚ä½ çœ‹ï¼ŒåŠ¨æ€æ ·å¼æ˜¯ä¸æ˜¯éå¸¸çµæ´»ï¼Ÿ</p><p>é™¤äº†è¿™ä¸¤ç‚¹ï¼Œä½ å¯èƒ½è¿˜ä¼šé—®ï¼Œå¦‚æœæˆ‘æƒ³å®ç° Android å¹³å°ç‰¹æœ‰çš„æ¶Ÿæ¼ªæ•ˆæœï¼ŒPressable ç»„ä»¶ä¹Ÿèƒ½å®ç°å—ï¼Ÿå¯ä»¥ï¼Œä½ å¯ä»¥ä½¿ç”¨android_rippleå’Œandroid_disableSound å±æ€§è¿›è¡Œé…ç½®ã€‚</p><ul>\n<li>android_rippleï¼šç”¨äºé…ç½® Android ç‰¹æœ‰çš„æ¶Ÿæ¼ªæ•ˆæœ <a href=\"https://reactnative.dev/docs/next/pressable#rippleconfig\">RippleConfig</a> ï¼›</li>\n<li>android_disableSoundï¼šç¦ç”¨ Android ç³»ç»Ÿçš„ç‚¹å‡»éŸ³æ•ˆï¼Œé»˜è®¤ false ä¸ç¦ç”¨ã€‚</li>\n</ul><p>å…¶å®ï¼Œç›®å‰è¿™ä¸‰ä»£ç‚¹æŒ‰ç»„ä»¶æ˜¯åŒæ—¶å­˜åœ¨äº React Native çš„å®˜æ–¹ç»„ä»¶åº“ä¸­çš„ï¼Œé‚£å¼€å‘æ—¶æˆ‘ä»¬è¯¥æ€ä¹ˆé€‰å‘¢ï¼Ÿæˆ‘è®¤ä¸ºï¼š</p><ul>\n<li>ç¬¬ä¸€ä»£ç‚¹æŒ‰ç»„ä»¶ Touchableï¼ŒåŠŸèƒ½ä¸°å¯Œä½†å­¦ä¹ æˆæœ¬å¤ªé«˜ï¼›</li>\n<li>ç¬¬äºŒä»£ç‚¹æŒ‰ç»„ä»¶ Buttonï¼Œç®€å•æ˜“ç”¨ä½†å¸¦äº†é»˜è®¤æ ·å¼å’Œåé¦ˆæ•ˆæœï¼Œé€šç”¨æ€§å¤ªå·®ï¼›</li>\n<li>ç¬¬ä¸‰ä»£ç‚¹æŒ‰ç»„ä»¶ Pressableï¼ŒåŒæ—¶æ»¡è¶³äº†ç®€å•æ˜“ç”¨å’Œå¤æ‚æ•ˆæœå¯æ‰©å±•çš„ç‰¹æ€§ã€‚</li>\n</ul><p>å› æ­¤ï¼Œåœ¨å®ç°è‡ªå®šä¹‰çš„ä¸šåŠ¡æŒ‰é’®ç»„ä»¶æ—¶ï¼Œæˆ‘æ›´åŠ æ¨èä½ ä½¿ç”¨ç¬¬ä¸‰ä»£ç‚¹æŒ‰ç»„ä»¶ Pressableã€‚è€Œä¸”ï¼ŒPressable ç»„ä»¶çš„åŠ¨æ€ style çš„è®¾è®¡æ€è·¯ï¼Œä¹Ÿæ˜¯éå¸¸å€¼å¾—æˆ‘ä»¬å­¦ä¹ çš„ã€‚</p><h2>å¦‚ä½•çŸ¥é“æ˜¯ç‚¹å‡»ï¼Œè¿˜æ˜¯é•¿æŒ‰ï¼Ÿ</h2><p>æˆ‘ä»¬å†æ¥çœ‹ç¬¬äºŒä¸ªé—®é¢˜ï¼šç‚¹æŒ‰ç»„ä»¶ Pressable æ˜¯å¦‚ä½•çŸ¥é“å®ƒæ˜¯è¢«ç‚¹å‡»äº†ï¼Œè¿˜æ˜¯è¢«é•¿æŒ‰äº†ï¼Ÿ</p><p>æ•´ä¸ªç‚¹æŒ‰äº‹ä»¶çš„å“åº”è¿‡ç¨‹æ˜¯ç¡¬ä»¶å’Œè½¯ä»¶ç›¸äº’é…åˆçš„è¿‡ç¨‹ã€‚ Pressable ç»„ä»¶å“åº”çš„æ•´ä½“æµç¨‹ï¼Œæ˜¯ä»è§¦æ‘¸å±è¯†åˆ«ç‰©ç†æ‰‹åŠ¿å¼€å§‹ï¼Œåˆ°ç³»ç»Ÿå’Œæ¡†æ¶ Native éƒ¨åˆ†æŠŠç‰©ç†æ‰‹åŠ¿è½¬æ¢ä¸º JavaScript æ‰‹åŠ¿äº‹ä»¶ï¼Œå†åˆ°æ¡†æ¶ JavaScript éƒ¨åˆ†ç¡®å®šå“åº”æ‰‹åŠ¿çš„ç»„ä»¶ï¼Œæœ€ååˆ° Pressable ç»„ä»¶ç¡®å®šæ˜¯ç‚¹å‡»è¿˜æ˜¯é•¿æŒ‰ã€‚</p><p>ä½ çœ‹ï¼Œä¸€ä¸ª App è¦è¯†åˆ«æ˜¯ç‚¹å‡»è¿˜æ˜¯é•¿æŒ‰ï¼Œå¹¶æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“å§ï¼Ÿåº†å¹¸çš„æ˜¯ï¼Œè¿™äº›å¤æ‚çš„è¯†åˆ«å·¥ä½œéƒ½ç”±æ‰‹æœºç¡¬ä»¶ã€æ“ä½œç³»ç»Ÿã€React Native æ¡†æ¶å¸®æˆ‘ä»¬å®ç°äº†ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œå¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬åªéœ€è¦çŸ¥é“æ€ä¹ˆä½¿ç”¨å’Œäº†è§£åŸºæœ¬åŸç†å°±å¯ä»¥äº†ã€‚ä»Šå¤©æˆ‘ä»¬æŠŠç„¦ç‚¹æ”¾åœ¨æœ€åä¸€æ­¥ï¼ŒPressable ç»„ä»¶æ˜¯æ€ä¹ˆç¡®å®šç”¨æˆ·æ˜¯ç‚¹å‡»è¿˜æ˜¯é•¿æŒ‰çš„ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¼€å§‹å“åº”äº‹ä»¶å’Œç»“æŸå“åº”äº‹ä»¶æ˜¯ä¸¤ä¸ªæœ€åŸºç¡€çš„æ‰‹åŠ¿äº‹ä»¶ï¼Œåœ¨ Androidã€iOS æˆ–è€… Web ä¸­éƒ½æœ‰ç±»ä¼¼çš„äº‹ä»¶ã€‚åœ¨ React Native ä¸­å®ƒä»¬æ˜¯ï¼š</p><ul>\n<li>onResponderGrantï¼šå¼€å§‹å“åº”äº‹ä»¶ï¼Œç”¨æˆ·æ‰‹æŒ‡æ¥è§¦å±å¹•ï¼Œä¸”è¯¥æ‰‹åŠ¿è¢«å½“å‰ç»„ä»¶é”å®šåè§¦å‘ï¼›</li>\n<li>onResponderReleaseï¼šç»“æŸå“åº”äº‹ä»¶ï¼Œç”¨æˆ·æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶è§¦å‘ã€‚</li>\n</ul><p>åŸºäºå¼€å§‹å“åº”äº‹ä»¶ onResponderGrant å’Œç»“æŸå“åº”äº‹ä»¶ onResponderReleaseï¼ŒPressable ç»„ä»¶å¯ä»¥å¾ˆå®¹æ˜“åœ°å°è£…å‡ºå¼€å§‹ç‚¹æŒ‰äº‹ä»¶ onPressIn å’Œç»“æŸç‚¹æŒ‰äº‹ä»¶ onPressOutã€‚</p><p>ä½ å¯ä»¥åœ¨ Pressable ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ onPressIn æ¥å“åº”å¼€å§‹ç‚¹æŒ‰äº‹ä»¶ï¼Œä½¿ç”¨ onPressOut æ¥å“åº”ç»“æŸç‚¹æŒ‰äº‹ä»¶ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-plain\">&lt;Pressable \n  onPressIn={handlePressIn}\n  onPressOut={handlePressOut}\n  &gt;\n  &lt;Text&gt;æŒ‰é’®&lt;/Text&gt;\n&lt;/Pressable&gt;\n</code></pre><p>å½“ä½ è§¦ç¢°åˆ°â€œæŒ‰é’®â€å¼€å§‹ç‚¹æŒ‰æ—¶ï¼ŒReact Native æ¡†æ¶å°±ä¼šå¸®ä½ è°ƒç”¨ handlePressIn å¤„ç†å‡½æ•°ï¼Œå½“ä½ æ‰‹æŒ‡ç¦»å¼€â€œæŒ‰é’®â€ç»“æŸç‚¹æŒ‰æ—¶ï¼Œå°±ä¼šè°ƒç”¨ handlePressOut å¤„ç†å‡½æ•°ã€‚</p><p>åŸºäºå¼€å§‹ç‚¹æŒ‰äº‹ä»¶ onPressIn å’Œç»“æŸç‚¹æŒ‰äº‹ä»¶ onPressOutï¼Œæˆ‘ä»¬è‡ªå·±æ˜¯å¦å¯ä»¥å°è£…å‡ºâ€œè‡ªå®šä¹‰â€çš„ç‚¹å‡»äº‹ä»¶ onPress å’Œé•¿æŒ‰äº‹ä»¶ onLongPresså‘¢ï¼Ÿä½ å¯ä»¥çŸ­æš‚çš„æŒ‰ä¸€ä¸‹æš‚åœé”®ï¼Œæ€è€ƒä¸€ä¸‹å¦‚æœè¦è¦ä½ æ¥å®ç°ä½ ä¼šæ€ä¹ˆåšï¼Œç„¶åå†å»çœ‹ React Native æ¡†æ¶æä¾›çš„ç­”æ¡ˆã€‚</p><p>è¿™ä¸ªæ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼Œä½ åªéœ€è¦åˆ¤æ–­ onPressIn äº‹ä»¶å’Œ onPressOut äº‹ä»¶ä¹‹é—´è§¦å‘é—´éš”è€—æ—¶å°±å¯ä»¥äº†ï¼š</p><ul>\n<li>å¦‚æœé—´éš”è€—æ—¶ &lt; 500ms å±äºç‚¹å‡»ã€‚ç”¨æˆ·çš„ç‚¹æŒ‰åŠ¨ä½œä¼šå…ˆè§¦å‘ onPressInï¼Œå†è§¦å‘ onPressOutï¼Œåœ¨ onPressOut äº‹ä»¶ä¸­å¯ä»¥è§¦å‘æˆ‘ä»¬ â€œè‡ªå®šä¹‰çš„â€ç‚¹å‡»äº‹ä»¶ onPressï¼›</li>\n<li>å¦‚æœé—´éš”è€—æ—¶ &gt;= 500ms å±äºé•¿æŒ‰ã€‚ç”¨æˆ·çš„ç‚¹æŒ‰åŠ¨ä½œä¼šå…ˆè§¦å‘ onPressInï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥åŸ‹ä¸‹ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¹¶åœ¨ç¬¬ 500ms æ—¶é€šè¿‡å®šæ—¶å™¨è§¦å‘æˆ‘ä»¬ â€œè‡ªå®šä¹‰çš„â€ onLongPressï¼Œæœ€ååœ¨ç”¨æˆ·æ¾æ‰‹çš„æ—¶å€™è§¦å‘ onPressOutã€‚</li>\n</ul><p>å®é™…ä¸Šï¼ŒReact Native æ¡†æ¶å°±æ˜¯è¿™ä¹ˆè®¾è®¡çš„ã€‚</p><p>åœ¨ä½ åŒæ—¶ç›‘å¬äº† onPress å’Œ onLongPress ä¸¤ä¸ªäº‹ä»¶æ—¶ï¼Œå¦‚æœç‚¹æŒ‰è€—æ—¶å°äº 500msï¼Œåœ¨ä½ æ¾æ‰‹æ—¶è§¦å‘çš„æ˜¯ç‚¹å‡»äº‹ä»¶ onPressï¼›å¦‚æœç‚¹æŒ‰è€—æ—¶å¤§äº 500msï¼Œå¤§è‡´ä¼šåœ¨ç¬¬ 500ms å…ˆè§¦å‘é•¿æŒ‰äº‹ä»¶ onLongPressï¼Œé‚£è¿™æ—¶å³ä½¿ä½ å†æ¾æ‰‹ä¹Ÿä¸ä¼šè§¦å‘ onPress äº‹ä»¶äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ç‚¹å‡»äº‹ä»¶ onPress å’Œé•¿æŒ‰äº‹ä»¶ onLongPress æ˜¯äº’æ–¥çš„ï¼Œè§¦å‘äº†ä¸€ä¸ªå°±ä¸ä¼šå†è§¦å‘å¦ä¸€ä¸ªäº†</strong>ã€‚</p><p>å…³äº Pressable ç»„ä»¶çš„ 4 ä¸ªå“åº”äº‹ä»¶ï¼ŒonPressInã€onPressOut ã€onPress å’Œ onLongPressçš„è§¦å‘æ–¹å¼ï¼Œæˆ‘æ”¾äº†ä¸€å¼ å®˜æ–¹æä¾›çš„ç¤ºæ„å›¾ï¼Œç›¸ä¿¡ä½ çœ‹åä¼šæœ‰æ›´æ·±çš„ç†è§£ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5b/69/5b058a1a8ac8f14ff3b8f6b726a28669.png?wh=1920x1272\" alt=\"å›¾ç‰‡\"></p><h2>ä¸ºä»€ä¹ˆæ”¯æŒä¸­é€”å–æ¶ˆï¼Ÿ</h2><p>ç°åœ¨ï¼Œä½ å¯¹ Pressable ç»„ä»¶çš„ç‚¹æŒ‰äº‹ä»¶çš„å·¥ä½œåŸç†å·²ç»æœ‰æ‰€äº†è§£äº†ã€‚è®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¼€å¤´æå‡ºçš„ä¸‰ä¸ªé—®é¢˜ï¼Œåªå‰©æœ€åä¸€ä¸ªï¼šç‚¹æŒ‰ç»„ä»¶ä¸ºä»€ä¹ˆè¿˜è¦æ”¯æŒç”¨æˆ·ä¸­é€”å–æ¶ˆç‚¹å‡»ï¼Ÿ</p><p>è¦è®²æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥åˆ°äº‹ä»¶åŒºåŸŸæ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯ç‚¹æŒ‰æ“ä½œæ‰‹åŠ¿çš„å¯ç”¨èŒƒå›´çš„æ¦‚å¿µä¸‹è¿›è¡Œè®²è§£ã€‚</p><p>ç‚¹æŒ‰æ“ä½œæ‰‹åŠ¿çš„å¯ç”¨èŒƒå›´åŒ…æ‹¬ç›’æ¨¡å‹åŒºåŸŸã€å¯è§¦å‘åŒºåŸŸ HitRect å’Œå¯ä¿ç•™åŒºåŸŸ PressRect ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€ä¸ªä¸ªè®²è§£ã€‚</p><h3>ç›’æ¨¡å‹åŒºåŸŸ</h3><p>è¿˜è®°å¾—å—ï¼Ÿåœ¨æˆ‘ä»¬ä»‹ç»<a href=\"https://time.geekbang.org/column/article/501650\">ã€ŠStyleã€‹</a>çš„å¸ƒå±€å±æ€§æ—¶ï¼Œæˆ‘ä»¬æœ‰æåˆ°è¿‡å®½åº¦ widthã€é«˜åº¦ heightï¼Œè¿™ä¸¤ä¸ªå±æ€§å°±å†³å®šäº†ç›’æ¨¡å‹ï¼ˆBox Modalï¼‰ä¸­çš„å†…å®¹ content å¤§å°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç›’æ¨¡å‹ä¸­è¿˜æœ‰å†…è¾¹è· paddingã€è¾¹æ¡† borderã€å¤–è¾¹è· marginã€‚</p><p>è¿™äº›å†…å®¹ã€è¾¹æ¡†ã€è¾¹è·ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®ï¼ŒReact Native ä¸­çš„ç›’æ¨¡å‹æ¦‚å¿µæ¥è‡ªäº Web é¢†åŸŸçš„ W3C è§„èŒƒï¼Œæˆ‘æŠŠè§„èŒƒä¸­çš„ç›’æ¨¡å‹ç¤ºæ„å›¾æ”¾åœ¨äº†ä¸‹é¢ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c2/7e/c2a39b421c9f21bfd34ff0def3494f7e.jpg?wh=455x340\" alt=\"\"></p><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œæœ€é‡Œé¢çš„æ˜¯å†…å®¹ Contentï¼Œç„¶åå†æ˜¯ Padding å’Œ Borderï¼Œæœ€å¤–é¢çš„æ‰æ˜¯ Marginã€‚è¯·ä½ æ³¨æ„äº†ï¼ŒContentã€Paddingã€Border é»˜è®¤æ˜¯ä¸é€æ˜åº¦çš„ï¼Œä½† Margin æ˜¯å¤©ç”Ÿé€æ˜çš„ï¼Œå¹¶ä¸”ä¸å¯ä»¥è®¾ç½®é€æ˜åº¦ã€è®¾ç½®é¢œè‰²ã€‚</p><p>ä½ çŒœï¼Œç‚¹æŒ‰äº‹ä»¶çš„é»˜è®¤è§¦å‘åŒºåŸŸæ˜¯ç›’æ¨¡å‹ä¸­çš„å“ªå‡ éƒ¨åˆ†ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼Œç›’æ¨¡å‹ä¸­çš„é»˜è®¤ä¸é€æ˜çš„éƒ¨åˆ†ã€‚è¿™äº›ç”¨æˆ·çœ‹å¾—è§çš„éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ contentã€padding å’Œ border éƒ¨åˆ†ã€‚å¯ä»¥çœ‹å¾—è§æ‰å¯ä»¥ç‚¹å‡»ï¼Œè¿™æ ·çš„è®¾è®¡æ˜¯éå¸¸åˆç†çš„ã€‚</p><p>æˆ‘ç»™ä½ è´´å‡ºäº†ç‚¹æŒ‰äº‹ä»¶çš„é»˜è®¤è§¦å‘åŒºåŸŸçš„æµ‹è¯•ä»£ç ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±ç‚¹ä¸€ç‚¹ã€è¯•ä¸€è¯•ï¼Œä½“ä¼šä¸€ä¸‹ï¼š</p><pre><code class=\"language-plain\">&lt;Pressable style={{\n    margin: 10,\n    borderWidth: 10,\n    borderColor: 'red',\n    padding: 10,\n    width: 100,\n    height: 100,\n    backgroundColor: 'orange',\n  }}&gt;\n  &lt;Text&gt;ç‚¹æˆ‘&lt;/Text&gt;\n&lt;/Pressable&gt;\n</code></pre><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç‰¹æ„ç»™äº† 100 åƒç´ çš„å®½é«˜ï¼Œè¿™æ˜¯å¾ˆå®¹æ˜“ç‚¹ä¸­çš„ï¼Œä½†åœ¨æ—¥å¸¸æˆ‘ä»¬ä½¿ç”¨ App æ—¶ï¼Œå¹¶ä¸ä¼šæœ‰è¿™ä¹ˆå¤§æŒ‰é’®ã€‚ä½ ä¹Ÿè®¸é‡åˆ°è¿‡ç±»ä¼¼çš„æƒ…æ™¯ï¼Œå•æ‰‹æŠŠæŒæ‰‹æœºçš„æ—¶å€™å·¦ä¸Šè§’çš„è¿”å›é”®è€ç‚¹ä¸ä¸­ï¼Œå‹¾é€‰ç”¨æˆ·åŒæ„äº‹é¡¹çš„æ—¶å€™è€å‹¾ä¸ä¸­ï¼Œç­‰ç­‰ã€‚äººçš„æ‰‹æŒ‡å¹¶ä¸æ˜¯ä»€ä¹ˆç²¾å¯†ä»ªå™¨ï¼Œä¸èƒ½ä¿è¯ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½æ­£ç¡®åœ°ç‚¹æŒ‰åˆ°æŒ‡å®šåŒºåŸŸã€‚é‚£è¿™ç§æƒ…å†µè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹å®½é«˜ã€è¾¹æ¡†ã€å†…è¾¹è·çš„å€¼ï¼Œé€šè¿‡æ‰©å¤§ç›’æ¨¡å‹çš„èŒƒå›´ï¼Œæé«˜ç‚¹ä¸­çš„æˆåŠŸç‡ã€‚ä½†æ˜¯ï¼Œä¿®æ”¹ç›’æ¨¡å‹æˆæœ¬è¾ƒé«˜ï¼Œå®ƒå¯èƒ½ä¼šå¯¼è‡´åŸæœ‰ UI å¸ƒå±€å‘ç”Ÿå˜åŒ–ã€‚</p><p><strong>æ›´å¥½çš„æ–¹æ¡ˆæ˜¯ï¼Œä¸ä¿®æ”¹å½±å“å¸ƒå±€çš„ç›’æ¨¡å‹ï¼Œç›´æ¥ä¿®æ”¹å¯è§¦å‘åŒºåŸŸçš„èŒƒå›´ï¼Œæé«˜ç‚¹ä¸­çš„æˆåŠŸç‡ã€‚</strong></p><h3>å¯è§¦å‘åŒºåŸŸ HitRect</h3><p>Pressable ç»„ä»¶æœ‰ä¸€ä¸ªå¯è§¦å‘åŒºåŸŸ HitRectï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¯è§¦å‘åŒºåŸŸ HitRect å°±æ˜¯ç›’æ¨¡å‹ä¸­çš„ä¸é€æ˜çš„å¯è§åŒºåŸŸã€‚ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ hitSlop çš„å€¼ï¼Œç›´æ¥æ‰©å¤§å¯è§¦å‘åŒºåŸŸã€‚</p><p>HitSlop ç±»å‹çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre><code class=\"language-typescript\">type Rect = {\n    top?: number;\n    bottom?: number;\n    left?: number;\n    right?: number;\n}\n\ntype HitSlop = Rect | number\n</code></pre><p>HitSlop æ¥æ”¶ä¸¤ç§ç±»å‹çš„å‚æ•°ï¼Œä¸€ç§æ˜¯ number ç±»å‹ï¼Œä»¥åŸæœ‰ç›’æ¨¡å‹ä¸­çš„ border ä¸ºè¾¹ç•Œï¼Œå°†å¯è§¦å‘åŒºåŸŸå‘å¤–æ‰©å¤§ä¸€æ®µè·ç¦»ã€‚å¦ä¸€ç§æ˜¯ Rect ç±»å‹ï¼Œä½ å¯ä»¥æ›´åŠ ç²¾å‡†åœ°å®šä¹‰ï¼Œè¦æ‰©å¤§çš„ä¸Šä¸‹å·¦å³çš„è·ç¦»ã€‚</p><p>åœ¨è€ç‚¹ä¸ä¸­ã€è€å‹¾ä¸ä¸­çš„åœºæ™¯ä¸­ï¼Œä½ å¯ä»¥åœ¨ä¸æ”¹å˜å¸ƒå±€çš„å‰æä¸‹ï¼Œè®¾ç½® Pressable ç»„ä»¶çš„å¯è§¦å‘åŒºåŸŸ HitSlopï¼Œè®©å¯ç‚¹å‡»åŒºåŸŸå¤šä¸ª 10 åƒç´ ã€20 åƒç´ ï¼Œè®©ç”¨æˆ·çš„æ›´å®¹æ˜“ç‚¹ä¸­ã€‚</p><h3>å¯ä¿ç•™åŒºåŸŸ PressRect</h3><p>å‰é¢æˆ‘è®²åˆ°ï¼Œç”¨æˆ·çš„æ‰‹åŠ¿å¯èƒ½ä¼šæœ‰ä¸€å®šè¯¯å·®ã€‚ä¸ä»…å¦‚æ­¤ï¼Œç”¨æˆ·çš„è¡Œä¸ºæœ¬èº«å°±å¾ˆå¤æ‚ï¼Œç”¨æˆ·çš„æ„æ„¿ä¹Ÿå¯èƒ½ä¼šåœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å‘ç”Ÿæ”¹å˜çš„ã€‚å…¶å®ï¼Œè¿™é‡Œä¹Ÿæ˜¯åœ¨å›ç­”å¼€å¤´æˆ‘ä»¬æå‡ºçš„æœ€åä¸€ä¸ªé—®é¢˜ï¼Œç”¨æˆ·è¡Œä¸ºçš„å¤æ‚æ€§ï¼Œå°±å¯¼è‡´äº†æˆ‘ä»¬åœ¨è®¾è®¡ç‚¹æŒ‰ç»„ä»¶éœ€è¦æœ‰æ›´å¤šçš„æ€è€ƒã€‚</p><p>æ¯”å¦‚ï¼Œç”¨æˆ·å·²ç»ç‚¹åˆ°è´­ä¹°æŒ‰é’®äº†ï¼Œçªç„¶çŠ¹è±«ï¼Œåˆä¸æƒ³ä¹°äº†ï¼Œäºæ˜¯å°†æ‰‹æŒ‡ä»æŒ‰é’®åŒºåŸŸç§»å¼€äº†ã€‚è¿™æ—¶ä½ å¾—è®©ç”¨æˆ·èƒ½å¤Ÿåæ‚”ï¼Œèƒ½å¤Ÿå–æ¶ˆå³å°†è§¦å‘çš„ç‚¹å‡»æ“ä½œã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å°±è¦å¼•å…¥ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šå¯ä¿ç•™åŒºåŸŸ PressRectã€‚ç‚¹æŒ‰äº‹ä»¶å¯ä¿ç•™åŒºåŸŸçš„åç§»é‡ï¼ˆPress Retention Offsetï¼‰é»˜è®¤æ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤æƒ…å†µä¸‹å¯è§åŒºåŸŸå°±æ˜¯å¯ä¿ç•™åŒºåŸŸã€‚ä½ å¯ä»¥é€šè¿‡è®¾ç½® pressRetentionOffset å±æ€§ï¼Œæ¥æ‰©å¤§å¯ä¿ç•™åŒºåŸŸ PressRectã€‚pressRetentionOffset å±æ€§çš„ç±»å‹å¦‚ä¸‹ï¼š</p><pre><code class=\"language-typescript\">type PressRetentionOffset  = Rect | number\n</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒpressRetentionOffset å’Œ HitSlop ä¸€æ ·ï¼Œæ¥æ”¶ä¸¤ç§ç±»å‹çš„å‚æ•°ï¼Œä¸€ç§æ˜¯ number ç±»å‹ï¼Œå¦ä¸€ç§æ˜¯ Rect ç±»å‹ã€‚Rectç±»å‹è®¾ç½®åï¼Œä¼šä»¥åŸæœ‰å¯è§¦å‘åŒºåŸŸä¸ºåŸºå‡†ï¼Œå°†å¯ä¿ç•™åŒºåŸŸå‘å¤–æ‰©å¤§ä¸€æ®µè·ç¦»ã€‚</p><p>åœ¨ä½ åæ‚”ç‚¹ä¸‹è´­ä¹°æŒ‰é’®çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥æŠŠå·²ç»æŒ‰ä¸‹çš„æ‰‹æŒ‡ä»å¯ä¿ç•™åŒºåŸŸæŒªå¼€ï¼Œç„¶åå†æ¾æ‰‹ï¼Œè¿™å°±ä¸ä¼šå†ç»§ç»­è§¦å‘ç‚¹å‡»äº‹ä»¶äº†ã€‚</p><p>å½“ç„¶ï¼Œè¿˜æœ‰æ›´å¤æ‚çš„æƒ…å†µï¼Œä½ å·²ç»ç‚¹åˆ°è´­ä¹°æŒ‰é’®äº†ï¼Œçªç„¶çŠ¹è±«ï¼Œå¼€å§‹è¿›è¡Œå¿ƒç†åšå¼ˆï¼Œæƒ³ç‚¹åˆä¸æƒ³ç‚¹ã€‚æ‰‹æŒ‡ä»æŒ‰é’®ä¸ŠæŒªå¼€äº†ï¼ŒåˆæŒªäº†è¿›å»ï¼Œç„¶ååˆæŒªå¼€äº†ï¼Œå¦‚æ­¤åå¤ã€‚è¿™æ—¶è¿˜è¦ä¸è¦è§¦å‘ç‚¹å‡»äº‹ä»¶å‘¢ï¼Ÿè¦ä¸è¦è§¦å‘ï¼Œå…¶å®æ˜¯æ ¹æ®ä½ æ‰‹æŒ‡æ¾å¼€çš„ä½ç½®æ¥åˆ¤æ–­çš„ï¼Œå¦‚æœä½ æ¾æ‰‹çš„ä½ç½®åœ¨å¯ä¿ç•™åŒºåŸŸå†…é‚£å°±è¦è§¦å‘ï¼Œå¦‚æœä¸æ˜¯é‚£å°±ä¸è§¦å‘ã€‚</p><p>æˆ‘å°†ç›’æ¨¡å‹åŒºåŸŸçš„å¯è§åŒºåŸŸã€å¯è§¦å‘åŒºåŸŸ HitRect å’Œå¯ä¿ç•™åŒºåŸŸ PressRect çš„å…³ç³»ç”»äº†ä¸€å¼ å›¾ï¼Œä½ ä¹Ÿå¯ä»¥æ‰“å¼€æ–‡ç¨¿çœ‹çœ‹ï¼ŒåŠ æ·±ä¸€ä¸‹ç†è§£ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a9/27/a916a2b7ba515895ce76097b04c73727.png?wh=1920x1102\" alt=\"å›¾ç‰‡\"></p><h2>è¯¾ç¨‹å°ç»“</h2><p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬è¿™ä¸€è®²çš„å…¨éƒ¨å†…å®¹ï¼Œç°åœ¨æˆ‘æ¥ç»™ä½ æ€»ç»“ä¸€ä¸‹ä»Šå¤©è¿™ä¸€è®²çš„è¦ç‚¹ã€‚å¦‚ä½•å®ç°ä¸€ä¸ªä½“éªŒå¥½çš„ç‚¹æŒ‰ç»„ä»¶å‘¢ï¼Ÿæˆ‘å»ºè®®ä½ è®°ä½ä¸‹é¢è¿™ä¸‰ç‚¹ï¼š</p><p>é¦–å…ˆï¼Œä¸€ä¸ªå¥½çš„ç‚¹æŒ‰ç»„ä»¶åº”è¯¥è®©å…ˆè®©å¼€å‘è€…ç”¨æ¥å¾ˆæ–¹ä¾¿ã€‚React Native çš„ç‚¹æŒ‰ç»„ä»¶ç»å†äº†ä¸‰æ¬¡è¿­ä»£ï¼Œæ¯æ¬¡è¿­ä»£éƒ½åœ¨å¼€å‘è€…ä½“éªŒï¼ˆDXï¼‰ä¸Šæœ‰æ‰€è¿›æ­¥ï¼Œæˆ‘æ›´æ¨èä½ ä½¿ç”¨ç¬¬ä¸‰ä»£ç‚¹æŒ‰ç»„ä»¶ Pressableã€‚</p><p>å…¶æ¬¡ï¼Œä¸€ä¸ªå¥½çš„ç‚¹æŒ‰ç»„ä»¶åº”è¯¥è¦æ»¡è¶³å„ç§ç”¨æˆ·ã€å„ç§åœºæ™¯çš„å¯æ‰©å±•æ€§ã€‚Pressable ç»„ä»¶æ”¯æŒå››ç§åŸºç¡€ç‚¹æŒ‰äº‹ä»¶ï¼ŒonPressInã€onPressOutã€onPressã€onLongPressã€‚å…¶ä¸­ï¼Œç‚¹å‡»äº‹ä»¶ onPress å’Œé•¿æŒ‰äº‹ä»¶ onLongPress æ˜¯äº’æ–¥çš„ï¼Œè§¦å‘äº†ä¸€ä¸ªå°±ä¸ä¼šå†è§¦å‘å¦ä¸€ä¸ªäº†ã€‚</p><p>æœ€åï¼Œä¸€ä¸ªä¼˜ç§€çš„å·¥ç¨‹å¸ˆåº”è¯¥è¦â€œæ‡‚â€ç”¨æˆ·ï¼Œè¦æŠŠè‡ªå·±è´Ÿè´£çš„ Appã€é¡µé¢çš„ç”¨æˆ·ä½“éªŒï¼ˆUXï¼‰æä¸Šå»ã€‚ä»»ä½•çš„ç‰©ç†æŒ‰é’®éƒ½æ˜¯æœ‰ç‚¹å‡»åé¦ˆçš„ï¼Œæˆ‘ä»¬çš„è™šæ‹ŸæŒ‰é’®ä¹Ÿå¾—æœ‰ï¼Œè¿™æ˜¯æœ€åŸºæœ¬ä½“éªŒè¦æ±‚ã€‚ç„¶åï¼Œè¦è®©ç”¨æˆ·æƒ³ç‚¹èƒ½ç‚¹å¾—åˆ°ï¼Œè¦ç†è§£ç›’æ¨¡å‹åŒºåŸŸã€å¯è§¦å‘åŒºåŸŸ HitRectã€å¯ä¿ç•™åŒºåŸŸ PressRect çš„åŒºåˆ«ï¼Œå¹¶ä¸”è¿›è¡Œåˆç†è®¾ç½®ã€‚</p><h2>è¡¥å……ææ–™</h2><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong></p><ul>\n<li>TouchableHighlightï¼š<a href=\"https://reactnative.dev/docs/next/touchablehighlight\">https://reactnative.dev/docs/next/touchablehighlight</a></li>\n<li>Buttonï¼š<a href=\"https://reactnative.dev/docs/next/button\">https://reactnative.dev/docs/next/button</a></li>\n<li>Pressableï¼š<a href=\"https://reactnative.dev/docs/next/pressable\">https://reactnative.dev/docs/next/pressable</a></li>\n</ul><p><strong>æºç é˜…è¯»ï¼š</strong></p><ul>\n<li>è¦è¯»æ‡‚ç‚¹æŒ‰ç»„ä»¶ Pressable çš„æ ¸å¿ƒè®¾è®¡åŸç†ï¼Œé¦–å…ˆè¦è¯»æ‡‚ Pressable è®¾è®¡è€…çš„è®¾è®¡æ€æƒ³ï¼Œ<a href=\"https://github.com/facebook/react-native/blob/8bd3edec88148d0ab1f225d2119435681fbbba33/Libraries/Pressability/Pressability.js#L322-L366\">å®ƒæ”¾åœ¨äº† Pressability.js  æ–‡ä»¶ä¸­ã€‚</a></li>\n<li>ç‚¹æŒ‰ç»„ä»¶ Pressable çš„ 4 ç§åŸºç¡€å“åº”äº‹ä»¶æ˜¯åŸºäº<a href=\"https://github.com/facebook/react-native/blob/8bd3edec88148d0ab1f225d2119435681fbbba33/Libraries/Pressability/Pressability.js#L444-L544\">æ‰‹åŠ¿ç³»ç»Ÿ</a>å®ç°çš„ï¼Œå…¶ä¸­ <a href=\"https://github.com/facebook/react-native/blob/8bd3edec88148d0ab1f225d2119435681fbbba33/Libraries/Pressability/Pressability.js#L692-L702\">onPress å’Œ onLongPress æ˜¯äº’æ–¥çš„ã€‚</a></li>\n</ul><h2>ä½œä¸š</h2><ol>\n<li>è¯·ä½ æ¨¡ä»¿å®ç°ä¸€ä¸‹å¾®ä¿¡é¡¶éƒ¨å³ä¸Šè§’çš„åŠ å·æŒ‰é’®ã€‚</li>\n<li>åœ¨è¾ƒè€ç‰ˆæœ¬çš„æ‰‹æœºæµè§ˆå™¨ä¸­ï¼Œç‚¹å‡»äº‹ä»¶å­˜åœ¨ 350ms å»¶è¿Ÿï¼›åœ¨å¾®ä¿¡èŠå¤©æ¡†ä¸­ï¼Œç‚¹å‡»å¯¹æ–¹çš„å¾®ä¿¡å¤´åƒæ¯”ç‚¹å‡»å³ä¸Šè§’ä¸‰ä¸ªç‚¹çš„æ›´å¤šæŒ‰é’®ï¼Œæ‰“å¼€é¡µé¢çš„é€Ÿåº¦æ…¢ä¸€äº›ï¼›åŒå‡»äº‹ä»¶æ˜¯å¸¸è§çš„ç‚¹æŒ‰äº‹ä»¶ä¹‹ä¸€ï¼ŒPressable ç»„ä»¶å´æ²¡æœ‰æä¾›ï¼›è¿™ä¸‰ä¸ªç°è±¡æ¶‰åŠåˆ°äº† Webã€Androidã€iOS å’Œ React Native è¿™å››ä¸ªæŠ€æœ¯é¢†åŸŸï¼Œä½†è¿™ä¸‰ä¸ªç°è±¡å…¶å®éƒ½æŒ‡å‘åŒä¸€ä¸ªç­”æ¡ˆã€‚æ¬¢è¿ä½ æŠŠä½ çš„ç­”æ¡ˆåˆ†äº«ç»™å¤§å®¶ã€‚</li>\n</ol><p>æˆ‘æ˜¯è’‹å®ä¼Ÿï¼Œå’±ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","neighbors":{"left":{"article_title":"05ï½œImageï¼šé€‰æ‹©é€‚åˆä½ çš„å›¾ç‰‡åŠ è½½æ–¹å¼","id":503636},"right":{"article_title":"07ï½œTextInputï¼šå¦‚ä½•å®ç°ä¸€ä¸ªä½“éªŒå¥½çš„è¾“å…¥æ¡†ï¼Ÿ","id":505780}},"comments":[{"had_liked":false,"id":341997,"user_name":"dao","can_delete":false,"product_type":"c1","uid":1087879,"ip_address":"","ucode":"4181FB270462CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/87/5066026c.jpg","comment_is_top":false,"comment_ctime":1649945702,"is_pvip":false,"replies":[{"id":125007,"content":"ä½ æ˜¯å¯¹çš„ã€‚\n\næœ¬æ–‡æŠŠ opacity ç¿»è¯‘æˆäº†é€æ˜åº¦ï¼Œä½†æˆ‘æŸ¥é˜…èµ„æ–™å’Œæ€è€ƒç¡®è®¤åè®¤ä¸º opacity æ›´å‡†ç¡®çš„ç¿»è¯‘ç¡®å®æ˜¯ä¸é€æ˜åº¦ã€‚\n\nå›½å†…èµ„æ–™å¾ˆå¤šèµ„æ–™éƒ½æŠŠ opacity ç¿»è¯‘æˆäº†é€æ˜åº¦ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ›´è´´åˆä¸­æ–‡æ€ç»´ä¸€äº›ä¸ç”¨ç»•ä¸€ä¸‹ï¼Œæˆ‘ä¹Ÿè¢«è¯¯å¯¼äº†ã€‚\n\nå‚è€ƒ MDN æ–‡æ¡£ï¼š https:&#47;&#47;developer.mozilla.org&#47;zh-CN&#47;docs&#47;Web&#47;CSS&#47;opacity","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1088541,"ctime":1649994683,"ip_address":"","comment_id":341997,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"é€æ˜åº¦ä¼šé‡æ–°å˜ä¸º 1 ï¼Ÿåº”è¯¥æ˜¯ä¸é€æ˜åº¦å˜ä¸º 1 å§ã€‚","like_count":5,"discussions":[{"author":{"id":1088541,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/1d/f0f10198.jpg","nickname":"è’‹å®ä¼Ÿ","note":"","ucode":"02226CABD5ECE7","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563437,"discussion_content":"ä½ æ˜¯å¯¹çš„ã€‚\n\næœ¬æ–‡æŠŠ opacity ç¿»è¯‘æˆäº†é€æ˜åº¦ï¼Œä½†æˆ‘æŸ¥é˜…èµ„æ–™å’Œæ€è€ƒç¡®è®¤åè®¤ä¸º opacity æ›´å‡†ç¡®çš„ç¿»è¯‘ç¡®å®æ˜¯ä¸é€æ˜åº¦ã€‚\n\nå›½å†…èµ„æ–™å¾ˆå¤šèµ„æ–™éƒ½æŠŠ opacity ç¿»è¯‘æˆäº†é€æ˜åº¦ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ›´è´´åˆä¸­æ–‡æ€ç»´ä¸€äº›ä¸ç”¨ç»•ä¸€ä¸‹ï¼Œæˆ‘ä¹Ÿè¢«è¯¯å¯¼äº†ã€‚\n\nå‚è€ƒ MDN æ–‡æ¡£ï¼š https://developer.mozilla.org/zh-CN/docs/Web/CSS/opacity","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649994683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342627,"user_name":"python4","can_delete":false,"product_type":"c1","uid":1023327,"ip_address":"","ucode":"BFEE720743B53E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9d/5f/06671a0d.jpg","comment_is_top":false,"comment_ctime":1650368842,"is_pvip":false,"replies":[{"id":125206,"content":"å®˜ç½‘çš„æ˜¯æ–‡æ¡£ç”¨æ¥æŸ¥çš„ï¼Œå¯¹åˆå­¦è€…å…¥é—¨ç¡®å®ä¸å‹å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1088541,"ctime":1650425226,"ip_address":"","comment_id":342627,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"æˆ‘æŒ‰å®˜ç½‘çš„é¡ºåºçœ‹çš„, æ‰€ä»¥ç”¨äº†TouchbleåšæŒ‰é’®. çœ‹åˆ°è¿™é‡Œæ‰çŸ¥é“æŒ‰é’®çš„æœ€ä½³å®è·µ, å®˜ç½‘é¡ºåºæœ‰ç‚¹å‘å•Š","like_count":4,"discussions":[{"author":{"id":1088541,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/1d/f0f10198.jpg","nickname":"è’‹å®ä¼Ÿ","note":"","ucode":"02226CABD5ECE7","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565277,"discussion_content":"å®˜ç½‘çš„æ˜¯æ–‡æ¡£ç”¨æ¥æŸ¥çš„ï¼Œå¯¹åˆå­¦è€…å…¥é—¨ç¡®å®ä¸å‹å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650425227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345727,"user_name":"å°å¤©å„¿","can_delete":false,"product_type":"c1","uid":2322128,"ip_address":"","ucode":"F29533891584E3","user_header":"https://static001.geekbang.org/account/avatar/00/23/6e/d0/6875ea5a.jpg","comment_is_top":false,"comment_ctime":1652527673,"is_pvip":false,"replies":[{"id":126314,"content":"ç»™è®¤çœŸæ€è€ƒçš„åŒå­¦ç‚¹èµğŸ‘\n\næ­£ç¡®ç­”æ¡ˆåœ¨ 16 è®²ä¸­æœ‰è§£é‡Šï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1088541,"ctime":1652886277,"ip_address":"","comment_id":345727,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"ä½œä¸šäºŒï¼šä¸ªäººæ„Ÿè§‰æ˜¯å› ä¸ºæ‰‹æŒ‡ä¸é¼ æ ‡çš„å·®å¼‚ï¼Œæ‰‹æŒ‡ç‚¹å‡»çš„èŒƒå›´æ›´å¤§ï¼Œä¸ä¼¼é¼ æ ‡é‚£ä¹ˆç²¾å‡†ï¼Œæ‰€ä»¥å°±è¦æ·»åŠ é˜²è¯¯è§¦çš„å¤„ç†é€»è¾‘ï¼ˆä¸èƒ½åœ¨ç¬¬ä¸€æ—¶é—´è¿›è¡Œå¤„ç†ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·å–æ¶ˆï¼‰ï¼Œè€ŒåŒå‡»æ‰‹åŠ¿ï¼Œåœ¨ç§»åŠ¨ç«¯å¹¶ä¸å¸¸ç”¨ï¼ˆæˆ‘çŒœå¯èƒ½æ˜¯å› ä¸ºä¸¤æ¬¡ç‚¹æŒ‰çš„ä½ç½®å¤§æ¦‚ç‡ä¼šæœ‰åç§»ï¼Œæé«˜äº†æ“ä½œæˆæœ¬ï¼‰","like_count":1,"discussions":[{"author":{"id":1088541,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/1d/f0f10198.jpg","nickname":"è’‹å®ä¼Ÿ","note":"","ucode":"02226CABD5ECE7","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572665,"discussion_content":"ç»™è®¤çœŸæ€è€ƒçš„åŒå­¦ç‚¹èµğŸ‘\n\næ­£ç¡®ç­”æ¡ˆåœ¨ 16 è®²ä¸­æœ‰è§£é‡Šï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652886278,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351605,"user_name":"æµ©æ˜å•¦","can_delete":false,"product_type":"c1","uid":1377422,"ip_address":"","ucode":"120ED8FC45B992","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/8e/e75ecc5e.jpg","comment_is_top":false,"comment_ctime":1657984650,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"æƒ³é—®ä¸€ä¸‹ï¼Œios é‡ŒæŒ‰é’®ç»„ä»¶ç‚¹æŒ‰å‡ºç°è½»å¾®éœ‡åŠ¨çš„æ•ˆæœ","like_count":1},{"had_liked":false,"id":350530,"user_name":"å¤§ç¥åšå£«","can_delete":false,"product_type":"c1","uid":1195144,"ip_address":"","ucode":"8C4318095949F0","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg","comment_is_top":false,"comment_ctime":1656990267,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"å¯ä¿ç•™åŒºåŸŸ é»˜è®¤ä¸ å¯è§¦å‘åŒºåŸŸä¸€æ ·å¤§å§ï¼Ÿ","like_count":1},{"had_liked":false,"id":348919,"user_name":"æ¶‚æµ·ç”Ÿ","can_delete":false,"product_type":"c1","uid":1015911,"ip_address":"","ucode":"E3DA62CF9A7745","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/67/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1655546766,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"èƒ½ä¸èƒ½å¤šæä¾›äº› demo å’Œé¡¹ç›®ï¼Œå¯ä»¥å¤šå­¦ä¹ ä»£ç è§„èŒƒå’Œç”¨æ³•","like_count":1},{"had_liked":false,"id":394441,"user_name":"ç¨€é¥­","can_delete":false,"product_type":"c1","uid":1193462,"ip_address":"ä¸Šæµ·","ucode":"0EA94C6E98BD73","user_header":"https://static001.geekbang.org/account/avatar/00/12/35/f6/fc3881e7.jpg","comment_is_top":false,"comment_ctime":1726813232,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"åŠ¨æ€æ ·å¼æ€ä¹ˆæ”¹å˜æŒ‰é’®çš„æ–‡å­—å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":3970482,"avatar":"https://static001.geekbang.org/account/avatar/00/3c/95/b2/1343c547.jpg","nickname":"21","note":"","ucode":"76C15D582EC25B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652202,"discussion_content":"æœ¬è´¨è¿˜æ˜¯é€šè¿‡å›è°ƒå‡½æ•°çš„ ç‚¹å‡»çŠ¶æ€å»åšåˆ¤æ–­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1728486396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385508,"user_name":"demoker","can_delete":false,"product_type":"c1","uid":1455563,"ip_address":"åŒ—äº¬","ucode":"5F56248AC90592","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJsnP3W12jSoGYBoAbjMW7kKqWsD1Imnic4TX9nOR0kvkTq5ap4n0aNfuicXibKDJib0zl0PEvhcBHe3g/132","comment_is_top":false,"comment_ctime":1702826615,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"è€å¸ˆ å¯ä¸å¯ä»¥å•ç‹¬å‡ºä¸€èŠ‚åˆ†äº«ä¸€ä¸‹å‰ç«¯å¼€å‘è€…ææ•ˆçš„ç”¨æ³•ï¼Œä½œä¸ºä¸€ä¸ªåŸç”Ÿå¼€å‘è€…æ¥è¯´ï¼Œå¸Œæœ›å­¦äº†è¯¾ç¨‹ä¹‹åå¯ä»¥å°‘èµ°å¼¯è·¯ã€‚","like_count":0},{"had_liked":false,"id":381665,"user_name":"Geek_ca7af8","can_delete":false,"product_type":"c1","uid":3045059,"ip_address":"ä¸Šæµ·","ucode":"1478A8F19A5A72","user_header":"","comment_is_top":false,"comment_ctime":1695627884,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"1.Pressableç»„ä»¶å¯ä»¥é€šè¿‡styleæ ·å¼çš„pressedå‚æ•°æ¥åŒºåˆ†è®¾ç½®ç‚¹å‡»çš„æ ·å¼å’Œéç‚¹å‡»çš„æ ·å¼\n2.Pressableçš„æ‰©å¤§ç‚¹å‡»åŒºåŸŸï¼Œå¯ä»¥é€šè¿‡å…¶HitSlopå±æ€§æ¥å®ç°\n3.Pressableçš„å…è®¸ç”¨æˆ·ç‚¹å‡»buttonåå¹¶ä¸”åŠæ—¶å–æ¶ˆbuttonçš„ç‚¹å‡»(å…è®¸ç”¨æˆ·åæ‚”)ï¼Œå¯ä»¥é€šè¿‡PressRetentionOffsetå±æ€§æ¥è®¾ç½®ï¼Œå½“æ‰‹æŒ‡æœ€åtouchå±å¹•çš„ç‚¹ä¸åœ¨PressRectä¹‹é—´çš„è¯ï¼Œå°±ä¸ä¼šè§¦å‘ç‚¹å‡»æ“ä½œã€‚","like_count":0},{"had_liked":false,"id":362872,"user_name":"WclyğŸ‘º","can_delete":false,"product_type":"c1","uid":2865756,"ip_address":"å¹¿ä¸œ","ucode":"2031893B4EA160","user_header":"https://static001.geekbang.org/account/avatar/00/2b/ba/5c/ca8f01b4.jpg","comment_is_top":false,"comment_ctime":1669001291,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100110101,"comment_content":"å¦‚æœä»TouchableWithoutFeedbackç›´æ¥æ›¿æ¢æˆPressableç»„ä»¶ï¼Œè¦æ³¨æ„æ ·å¼ä¸Šçš„å·®å¼‚","like_count":0},{"had_liked":false,"id":346739,"user_name":"å¤§ç¥åšå£«","can_delete":false,"product_type":"c1","uid":1195144,"ip_address":"","ucode":"8C4318095949F0","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg","comment_is_top":false,"comment_ctime":1653389941,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100110101,"comment_content":"Pressable\né»˜è®¤å¸¦åŠ¨ç”»å—","like_count":0},{"had_liked":false,"id":346738,"user_name":"å¤§ç¥åšå£«","can_delete":false,"product_type":"c1","uid":1195144,"ip_address":"","ucode":"8C4318095949F0","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg","comment_is_top":false,"comment_ctime":1653389834,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100110101,"comment_content":"ç”šè‡³è¿˜å¯ä»¥æŠŠâ€œæŒ‰é’®â€çš„æ–‡å­—æ”¹äº†\n\nè¿™æ˜¯æ€ä¹ˆæ”¹å‘¢","like_count":0,"discussions":[{"author":{"id":1013281,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/76/21/abb7bfe3.jpg","nickname":"Damon","note":"","ucode":"E07522227DE1E4","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586431,"discussion_content":"      &lt;Pressable\n        onPress={() =&gt; {}}\n        style={({pressed}) =&gt; [baseStyle, {opacity: pressed ? 0.5 : 1}]}&gt;\n        {({pressed}) =&gt; &lt;Text&gt;{pressed ? &#39;æŒ‰ä½&#39; : &#39;æŒ‰é’®&#39;}&lt;/Text&gt;}\n      &lt;/Pressable&gt;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662206528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":346223,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1126325,"ip_address":"","ucode":"2B15AF3F1CA9A4","user_header":"https://static001.geekbang.org/account/avatar/00/11/2f/b5/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1652928102,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100110101,"comment_content":"é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ç‚¹å‡»åŒºåŸŸå°±æ˜¯å¯ä¿ç•™åŒºåŸŸï¼Œå› ä¸ºéƒ½æ˜¯å¯è§åŒºåŸŸï¼Œoffest =0,é‚£å¯ç‚¹å‡»åŒºåŸŸå¯ä»¥ç†è§£æˆæ˜¯å¯ä¿ç•™åŒºåŸŸçš„å­é›†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2865756,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/ba/5c/ca8f01b4.jpg","nickname":"WclyğŸ‘º","note":"","ucode":"2031893B4EA160","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594341,"discussion_content":"è¦è¯•è¯•èƒ½ä¸èƒ½è®¾ç½®æˆè´Ÿæ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669001387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}