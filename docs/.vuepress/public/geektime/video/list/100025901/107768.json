{"id":107768,"title":"79 | 常用组件化Protocol-Class方案","content":"<p><strong>PDF 课件和源代码下载地址：</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/geektime-ios-course\">https://gitee.com/geektime-geekbang/geektime-ios-course</a></p>","comments":[{"had_liked":false,"id":218060,"user_name":"siberiawolf","can_delete":false,"product_type":"c3","uid":1984456,"ip_address":"","ucode":"86078BCBFDBE71","user_header":"","comment_is_top":false,"comment_ctime":1589705682,"is_pvip":false,"replies":[{"id":81237,"content":"看错误是detailViewControllerWithUrl2方法没有实现。可以在Demo工程中看下最终的代码哈https:&#47;&#47;github.com&#47;dequan1331&#47;geektime-ios-course","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1590152168,"ip_address":"","comment_id":218060,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"跟着视频做到这里，发现进行不下去了啊~\n\n2020-05-17 16:53:38.966262+0800 SampleApp[5477:291618] -[GTDetailViewController detailViewControllerWithUrl2:]: unrecognized selector sent to instance 0x7f91e340abb0\n2020-05-17 16:53:38.975179+0800 SampleApp[5477:291618] *** Terminating app due to uncaught exception &#39;NSInvalidArgumentException&#39;, reason: &#39;-[GTDetailViewController detailViewControllerWithUrl2:]: unrecognized selector sent to instance 0x7f91e340abb0&#39;\n\n","like_count":2,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495338,"discussion_content":"看错误是detailViewControllerWithUrl2方法没有实现。可以在Demo工程中看下最终的代码哈https://github.com/dequan1331/geektime-ios-course","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590152168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1801362,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7c/92/0d300901.jpg","nickname":"stgone","note":"","ucode":"EFC4A54CF73FF4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287450,"discussion_content":"感谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593441870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202414,"user_name":"土豆小小","can_delete":false,"product_type":"c3","uid":1457246,"ip_address":"","ucode":"5621EEDE50EA48","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLVZRHorm7z67yJxOCpYWJESPfhia00RDg4oicvPuyCwTKln2BFRMiahOKz9z22RnnEmickA64bHdB7pA/132","comment_is_top":false,"comment_ctime":1585985472,"is_pvip":false,"replies":[{"id":77446,"content":"是的，在前几节课中讲解target-action方式时就实现过一个相同名字的方法，所以这里使用protocol时就直接用了，该在课程中强调一下防止迷惑的，感谢👍","user_name":"作者回复","user_name_real":"zzz","uid":1041455,"ctime":1587047586,"ip_address":"","comment_id":202414,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"没看到老师在DetailWebViewController实现Protocol，需要加上吧\n-(UIViewController *)detailControllerWithUrl:(NSString *)detailUrl{\n    return [self initWithUrlString:detailUrl];\n}","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490576,"discussion_content":"是的，在前几节课中讲解target-action方式时就实现过一个相同名字的方法，所以这里使用protocol时就直接用了，该在课程中强调一下防止迷惑的，感谢👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587047586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121254,"user_name":"Now","can_delete":false,"product_type":"c3","uid":1233768,"ip_address":"","ucode":"5C3490395CBD40","user_header":"https://static001.geekbang.org/account/avatar/00/12/d3/68/6832247f.jpg","comment_is_top":false,"comment_ctime":1565088237,"is_pvip":false,"replies":[{"id":44575,"content":"首先对于TargetAction和ProtocolClass两种方式来说，传入的参数类型是没有任何限制的，TargetAction如果采用NSInvocation的方式对参数的个数也是没有限制的。那么对于对象类型的传递，其实唯一有困难的就是非扩展的的UrlScheme方式，因为传统的UrlScheme是不能带有对象的，只能使用字符串作为参数，但是目前常用的UrlScheme方式都支持参数的传入，一般是传入一个字典，在注册scheme的时候也会注册一些处理参数和业务逻辑的Processor，当然这种方式和UrlScheme在常规领域的设计语义略有不同。所以整体上来说，通过一些扩展，在视频中实现的三种类型的组件化方式都可以支持对象类型的传递，具体可以看下代码的实现。","user_name":"作者回复","user_name_real":"dequanzhu","uid":1041455,"ctime":1565095722,"ip_address":"","comment_id":121254,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"假如我给下个页面传参数是个model而不是字符串 ，这时候用路由怎么处理呢","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461706,"discussion_content":"首先对于TargetAction和ProtocolClass两种方式来说，传入的参数类型是没有任何限制的，TargetAction如果采用NSInvocation的方式对参数的个数也是没有限制的。那么对于对象类型的传递，其实唯一有困难的就是非扩展的的UrlScheme方式，因为传统的UrlScheme是不能带有对象的，只能使用字符串作为参数，但是目前常用的UrlScheme方式都支持参数的传入，一般是传入一个字典，在注册scheme的时候也会注册一些处理参数和业务逻辑的Processor，当然这种方式和UrlScheme在常规领域的设计语义略有不同。所以整体上来说，通过一些扩展，在视频中实现的三种类型的组件化方式都可以支持对象类型的传递，具体可以看下代码的实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565095722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121155,"user_name":"澜奏","can_delete":false,"product_type":"c3","uid":1156383,"ip_address":"","ucode":"8682168E18B068","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/OokHAy1fSOhBwwbbzud7seB5MEk4JezcGCS4Tzia7iaLOibCKgrj6PCN2b17bVAb224ygdLgjWVMnZsH18ibNoSTVA/132","comment_is_top":false,"comment_ctime":1565067500,"is_pvip":false,"replies":[{"id":44524,"content":"课程的定位是较为基础的，不会涉及到优化方面的内容。对哪方面感兴趣的话可以留言具体的问题，我们一起交流下～","user_name":"作者回复","user_name_real":"dequanzhu","uid":1041455,"ctime":1565070020,"ip_address":"","comment_id":121155,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师希望以后更新的内容，多一些像这三堂组件课一样的热门技术，同样也期待下更新，编译优化，缩包啊，性能优化等方面的课程","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461654,"discussion_content":"课程的定位是较为基础的，不会涉及到优化方面的内容。对哪方面感兴趣的话可以留言具体的问题，我们一起交流下～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565070020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115861,"user_name":"To be is to do","can_delete":false,"product_type":"c3","uid":1152942,"ip_address":"","ucode":"F4AA8FC9DDF04E","user_header":"https://static001.geekbang.org/account/avatar/00/11/97/ae/08eb3aad.jpg","comment_is_top":false,"comment_ctime":1563759370,"is_pvip":false,"replies":[{"id":42445,"content":"有哪些需求呢？ 我们可以在评论中简单的交流讨论下 哈哈","user_name":"作者回复","user_name_real":"dequanzhu","uid":1041455,"ctime":1563797830,"ip_address":"","comment_id":115861,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"听着键盘声音，有点像HHKB，顺便问一下哈，老师能不能弄一iOS进阶视频专栏啊？","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459318,"discussion_content":"有哪些需求呢？ 我们可以在评论中简单的交流讨论下 哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563797830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115259,"user_name":"起风了001","can_delete":false,"product_type":"c3","uid":1529929,"ip_address":"","ucode":"8DCDBA40B8CC9F","user_header":"","comment_is_top":false,"comment_ctime":1563519810,"is_pvip":false,"replies":[{"id":44498,"content":"一共106节！","user_name":"作者回复","user_name_real":"dequanzhu","uid":1041455,"ctime":1565059292,"ip_address":"","comment_id":115259,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师在给大家免费补课了, 本来是61课时现在到了79了还没完  : )","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459032,"discussion_content":"一共106节！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565059292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114336,"user_name":"VictorWu","can_delete":false,"product_type":"c3","uid":1505907,"ip_address":"","ucode":"94AA2A957CFA85","user_header":"https://static001.geekbang.org/account/avatar/00/16/fa/73/3b9cbc69.jpg","comment_is_top":false,"comment_ctime":1563276718,"is_pvip":false,"replies":[{"id":41733,"content":"还有的","user_name":"作者回复","user_name_real":"dequanzhu","uid":1041455,"ctime":1563290667,"ip_address":"","comment_id":114336,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"老师，这是最后一节课？ 还是说还有更新呀","like_count":0,"discussions":[{"author":{"id":1041455,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132","nickname":"Geek_e7jq8k","note":"","ucode":"352964E5D793DA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458613,"discussion_content":"还有的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563290667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218075,"user_name":"siberiawolf","can_delete":false,"product_type":"c3","uid":1984456,"ip_address":"","ucode":"86078BCBFDBE71","user_header":"","comment_is_top":false,"comment_ctime":1589708042,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100025901,"comment_content":"@土豆小小 的代码不对。应该在GTDetailViewController.m 中添加如下代码：\n\n- (__kindof UIViewController *)detailViewControllerWithUrl:(NSString *)detailUrl{\n    return [[[self class] alloc] initWithUrlString:detailUrl];\n}","like_count":3,"discussions":[{"author":{"id":1924811,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/5e/cb/ad85b408.jpg","nickname":"黃喻榆","note":"","ucode":"644312AE93C490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581239,"discussion_content":"感謝！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658657501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}