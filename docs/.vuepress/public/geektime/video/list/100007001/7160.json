{"id":7160,"title":"18 |【实验】Android 无线应用接入授权服务器","content":"无","comments":[{"had_liked":false,"id":24212,"user_name":"艿艿","can_delete":false,"product_type":"c3","uid":1044546,"ip_address":"","ucode":"8F727AB7A7F6B2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f0/42/7728d4f5.jpg","comment_is_top":false,"comment_ctime":1536846133,"is_pvip":false,"replies":[{"id":9647,"content":"谢谢支持🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1537681703,"ip_address":"","comment_id":24212,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"竟然没有留言。\n这一讲不错","like_count":3,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423883,"discussion_content":"谢谢支持🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537681703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196007,"user_name":"stg609","can_delete":false,"product_type":"c3","uid":1073025,"ip_address":"","ucode":"FB70A75A891BB8","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/81/1c614f4a.jpg","comment_is_top":false,"comment_ctime":1585230011,"is_pvip":false,"replies":[{"id":74969,"content":"设置多久过期是根据你的业务场景来决定，例如安全比较敏感的应用(例如金融应用)，过期时间建议设短；安全不敏感的应用，过期时间可适当设长。\n\n微信&#47;支付宝如果你长期不登录，也是会过期的。另外支付宝之类在你正式执行支付交易时，仍然需要输入交易密码的，相当于有额外的安全保障。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585571758,"ip_address":"","comment_id":196007,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"移动端 token 一般设置多久过期？过期后是否通过refresh token去刷新？ 像微信，支付宝这种app为啥一直不会过期？","like_count":2,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489200,"discussion_content":"设置多久过期是根据你的业务场景来决定，例如安全比较敏感的应用(例如金融应用)，过期时间建议设短；安全不敏感的应用，过期时间可适当设长。\n\n微信/支付宝如果你长期不登录，也是会过期的。另外支付宝之类在你正式执行支付交易时，仍然需要输入交易密码的，相当于有额外的安全保障。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585571758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":236294,"user_name":"王昊天","can_delete":false,"product_type":"c3","uid":1323388,"ip_address":"","ucode":"82E71DDC455B3C","user_header":"https://static001.geekbang.org/account/avatar/00/14/31/7c/eb9550fc.jpg","comment_is_top":false,"comment_ctime":1595386436,"is_pvip":false,"replies":[{"id":87609,"content":"这个是两个应用，应该分别在oauth2系统中注册两个应用，然后每个应用单独登录获取各自的token。\n\n但是oauth2的登陆页面可以集中一个，只要其中一个应用通过浏览器和集中登录页面进行了登录，oauth2服务器端可以记住登录的web session，如果后面第二个应用也通过同一个浏览器登录的话，只要session还在，那么就可以直接登录成功，后台就可以获取token，相当于单点登录。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1595690854,"ip_address":"","comment_id":236294,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师您好，请教一个题外的问题，不同域名下的前端应用(假设调用的同一后端API)，如何实现单点登录呢，比如前端工程A的localStorage里以及存储的token，前端工程B如何使用这个token？当一个前端工程发现token过期后如何通知其他前端工程呢？","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502018,"discussion_content":"这个是两个应用，应该分别在oauth2系统中注册两个应用，然后每个应用单独登录获取各自的token。\n\n但是oauth2的登陆页面可以集中一个，只要其中一个应用通过浏览器和集中登录页面进行了登录，oauth2服务器端可以记住登录的web session，如果后面第二个应用也通过同一个浏览器登录的话，只要session还在，那么就可以直接登录成功，后台就可以获取token，相当于单点登录。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595690854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126003,"user_name":"小桶","can_delete":false,"product_type":"c3","uid":1184185,"ip_address":"","ucode":"7967FF96CDE753","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/b9/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1566291768,"is_pvip":false,"replies":[{"id":46729,"content":"嗯，spring security oauth2是一个框架，内部已经实现了一些oauth处理逻辑，也规范了一些数据库表名和字段，这样可以简化应用集成。当然，你也可以不用它已经实现部分，而是完全自己定制。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566387202,"ip_address":"","comment_id":126003,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"数据库表名和字段名是固定的吗？如果是固定的，那么为什么固定呢","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463782,"discussion_content":"嗯，spring security oauth2是一个框架，内部已经实现了一些oauth处理逻辑，也规范了一些数据库表名和字段，这样可以简化应用集成。当然，你也可以不用它已经实现部分，而是完全自己定制。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566387202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43531,"user_name":"lester","can_delete":false,"product_type":"c3","uid":1025747,"ip_address":"","ucode":"79BD59B50C97BA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/d3/856316dd.jpg","comment_is_top":false,"comment_ctime":1543237016,"is_pvip":false,"replies":[{"id":15808,"content":"这个估计和你本地环境或Android&#47;gradle安装有关，建议重新安装再试。参考资料可加我微信（bulldog2015）交流。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1543407615,"ip_address":"","comment_id":43531,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，您好，Android Studio中导入AuthCodeApp出了点问题，gradle编译失败， 这部分老师是否可以提供一些额外的参考资料","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430417,"discussion_content":"这个估计和你本地环境或Android/gradle安装有关，建议重新安装再试。参考资料可加我微信（bulldog2015）交流。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543407615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28982,"user_name":"赵津","can_delete":false,"product_type":"c3","uid":1121425,"ip_address":"","ucode":"B9FCE2609DC2E4","user_header":"https://static001.geekbang.org/account/avatar/00/11/1c/91/6eed5044.jpg","comment_is_top":false,"comment_ctime":1538213365,"is_pvip":false,"replies":[{"id":10664,"content":"谢谢更正提醒🌹","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1538477533,"ip_address":"","comment_id":28982,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"android客户端启动的第一个界面`Button::userinfo_button`是MainActivity的界面定义的，希望更正一下。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425454,"discussion_content":"谢谢更正提醒🌹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538477533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28980,"user_name":"赵津","can_delete":false,"product_type":"c3","uid":1121425,"ip_address":"","ucode":"B9FCE2609DC2E4","user_header":"https://static001.geekbang.org/account/avatar/00/11/1c/91/6eed5044.jpg","comment_is_top":false,"comment_ctime":1538213220,"is_pvip":false,"replies":[{"id":10665,"content":"第三方应用先要在授权服务器上注册，注册时需提供一些注册信息，比如clientid&#47;clientsecret&#47;scope&#47;redirecturl等，应用向授权服务器申请授权时，授权服务器根据之前注册信息进行校验，或做相应动作，比如跳转等","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1538477863,"ip_address":"","comment_id":28980,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"针对授权服务器存储第三方应用配置信息（clientid等）的讲解能不能，详细解释一下呢？老师","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425453,"discussion_content":"第三方应用先要在授权服务器上注册，注册时需提供一些注册信息，比如clientid/clientsecret/scope/redirecturl等，应用向授权服务器申请授权时，授权服务器根据之前注册信息进行校验，或做相应动作，比如跳转等","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538477863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}