{"id":98660,"title":"04 | å¦‚ä½•ç®¡ç†ç¬¬ä¸‰æ–¹åŒ…ï¼Ÿä»åŒ…ç®¡ç†å·¥å…·luarockså’Œopmè¯´èµ·","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ¸©é“­ã€‚</p><p>åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å¤§æ¦‚äº†è§£äº†ä¸‹ OpenResty å®˜æ–¹çš„ä¸€äº›é¡¹ç›®ã€‚ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ OpenResty ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œæ˜¾ç„¶ï¼ŒOpenResty å®‰è£…åŒ…è‡ªå¸¦çš„è¿™äº›åº“æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ¯”å¦‚æ²¡æœ‰ lua-resty åº“æ¥å‘èµ·HTTPè¯·æ±‚ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•å’Œ Kafka äº¤äº’ã€‚</p><p>é‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæœ¬èŠ‚æˆ‘ä»¬å°±æ¥ä¸€èµ·äº†è§£ä¸‹ï¼Œåº”è¯¥ä»ä»€ä¹ˆæ¸ é“æ¥æ‰¾åˆ°è¿™äº›ç¬¬ä¸‰æ–¹åº“ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘å†æ¬¡å¼ºè°ƒä¸‹ï¼ŒOpenResty å¹¶ä¸æ˜¯ NGINX çš„ forkï¼Œä¹Ÿä¸æ˜¯åœ¨ NGINX çš„åŸºç¡€ä¸ŠåŠ äº†ä¸€äº›å¸¸ç”¨åº“é‡æ–°æ‰“åŒ…ï¼Œè€Œ<strong>åªæ˜¯æŠŠ NGINX å½“ä½œåº•å±‚çš„ç½‘ç»œåº“æ¥ä½¿ç”¨</strong>ã€‚</p><p>å½“ä½ ä½¿ç”¨ NGINX çš„æ—¶å€™ï¼Œæ˜¯ä¸ä¼šæƒ³ç€å¦‚ä½•å‘èµ·è‡ªå®šä¹‰çš„HTTPè¯·æ±‚ï¼Œä»¥åŠå¦‚ä½•ä¸ Kafka äº¤äº’çš„ã€‚è€Œåœ¨ OpenResty çš„ä¸–ç•Œä¸­ï¼Œç”±äº cosocket çš„å­˜åœ¨ï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾åœ°å†™å‡º lua-resty-http å’Œ lua-resty-kafka ï¼Œæ¥å¤„ç†è¿™ç±»éœ€æ±‚ï¼Œå°±åƒä½ ç”¨ Pythonã€PHP è¿™ç±»çš„å¼€å‘è¯­è¨€ä¸€æ ·ã€‚</p><p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå»ºè®®å‘Šè¯‰ä½ ï¼šä½ ä¸åº”è¯¥ä½¿ç”¨ä»»ä½• Lua ä¸–ç•Œçš„åº“æ¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè€Œæ˜¯åº”è¯¥ä½¿ç”¨ cosocket çš„ lua-resty-* åº“ã€‚<strong>Lua ä¸–ç•Œçš„åº“å¾ˆå¯èƒ½ä¼šå¸¦æ¥é˜»å¡</strong>ï¼Œè®©åŸæœ¬é«˜æ€§èƒ½çš„æœåŠ¡ï¼Œç›´æ¥ä¸‹é™å‡ ä¸ªæ•°é‡çº§ã€‚è¿™æ˜¯ OpenResty åˆå­¦è€…çš„å¸¸è§é”™è¯¯ï¼Œè€Œä¸”å¹¶ä¸å®¹æ˜“è§‰å¯Ÿåˆ°ã€‚</p><!-- [[[read_end]]] --><p>é‚£æˆ‘ä»¬æ€ä¹ˆæ‰¾åˆ°è¿™äº›éé˜»å¡çš„ lua-resty-* åº“å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘æ¥ä¸ºä½ ä»‹ç»ä¸‹é¢å‡ ç§é€”å¾„ã€‚</p><h2><strong>OPM</strong></h2><p><a href=\"https://opm.openresty.org/\">OPM</a>ï¼ˆOpenResty Package Managerï¼‰æ˜¯ OpenResty è‡ªå¸¦çš„åŒ…ç®¡ç†å™¨ï¼Œåœ¨ä½ å®‰è£…å¥½ OpenResty ä¹‹åï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥è¯•ç€å»æ‰¾æ‰¾å‘é€ http è¯·æ±‚çš„åº“ <code>$ opm search http</code></p><p>ç¬¬ä¸€æ¬¡æŸ¥è¯¢å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œéœ€è¦å‡ ç§’é’Ÿçš„æ—¶é—´ã€‚opm.openresty.org ä¼šä» PostgreSQL æ•°æ®åº“ä¸­åšä¸€æ¬¡æŸ¥è¯¢ï¼Œå¹¶æŠŠç»“æœç¼“å­˜ä¸€æ®µæ—¶é—´ã€‚search å…·ä½“çš„è¿”å›ç»“æœæ¯”è¾ƒé•¿ï¼Œæˆ‘ä»¬è¿™é‡Œåªçœ‹ä¸‹ç¬¬ä¸€æ¡è¿”å›å€¼ï¼š</p><pre><code>openresty/lua-resty-upload    \t\t\tStreaming reader and parser for HTTP file uploading based on ngx_lua cosocket\n</code></pre><p>å‘ƒï¼Œçœ‹åˆ°è¿™ä¸ªç»“æœï¼Œä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼šè¿™ä¸ª lua-resty-upload åŒ…å’Œå‘é€ http æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p><p>åŸæ¥ï¼ŒOPMåšæœç´¢çš„æ—¶å€™ï¼Œæ˜¯ç”¨åé¢çš„å…³é”®å­—åŒæ—¶æœç´¢äº†åŒ…çš„åå­—å’ŒåŒ…çš„ç®€ä»‹ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸Šé¢çš„æœç´¢ä¼šæŒç»­å‡ ç§’ï¼Œå› ä¸ºå®ƒåœ¨ PostgreSQL é‡Œé¢åšäº†å­—ç¬¦ä¸²çš„å…¨æ–‡æœç´¢ã€‚</p><p>ä¸è¿‡ï¼Œä¸ç®¡æ€ä¹ˆè¯´ï¼Œè¿™ä¸ªè¿”å›å¹¶ä¸å‹å¥½ã€‚è®©æˆ‘ä»¬ä¿®æ”¹ä¸‹å…³é”®å­—ï¼Œé‡æ–°æœç´¢ä¸‹ï¼š</p><pre><code>$ opm search lua-resty-http\nledgetech/lua-resty-http                          Lua HTTP client cosocket driver for OpenResty/ngx_lua\npintsized/lua-resty-http                          Lua HTTP client cosocket driver for OpenResty/ngx_lua\nagentzh/lua-resty-http                            Lua HTTP client cosocket driver for OpenResty/ngx_lua\n</code></pre><p>å…¶å®ï¼Œåœ¨ OpenResty ä¸–ç•Œä¸­ï¼Œå¦‚æœä½ ä½¿ç”¨ cosocket å®ç°äº†ä¸€ä¸ªåŒ…ï¼Œé‚£ä¹ˆå°±è¦ä½¿ç”¨ lua-resty- è¿™ä¸ªå‰ç¼€ï¼Œç®—æ˜¯ä¸€ä¸ªä¸æˆæ–‡çš„è§„å®šã€‚</p><p>å›è¿‡å¤´æ¥çœ‹åˆšåˆšçš„æœç´¢ç»“æœï¼ŒOPM ä½¿ç”¨äº†è´¡çŒ®è€…çš„ GitHub ä»“åº“åœ°å€ä½œä¸ºåŒ…åï¼Œå³ GitHub ID / repo nameã€‚ä¸Šé¢è¿”å›äº†ä¸‰ä¸ª lua-resty-http ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬åº”è¯¥é€‰æ‹©å“ªä¸€ä¸ªå‘¢ï¼Ÿ</p><p>çœ¼å°–çš„ä½ ï¼Œå¯èƒ½å·²ç»å‘ç°äº† agentzh è¿™ä¸ª IDï¼Œæ²¡é”™ï¼Œè¿™å°±æ˜¯ OpenResty ä½œè€…æ˜¥å“¥æœ¬äººã€‚åœ¨é€‰æ‹©è¿™ä¸ªåŒ…ä¹‹å‰ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ƒçš„ star æ•°å’Œæœ€åæ›´æ–°æ—¶é—´ï¼šåªæœ‰åå‡ ä¸ª starï¼Œæœ€åä¸€æ¬¡æ›´æ–°æ˜¯åœ¨ 2016 å¹´ã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™æ˜¯ä¸ªè¢«æ”¾å¼ƒçš„å‘ã€‚æ›´æ·±å…¥åœ°çœ‹ä¸‹ï¼Œpintsized/lua-resty-http å’Œ ledgetech/lua-resty-http å…¶å®æŒ‡å‘äº†åŒä¸€ä¸ªä»“åº“ã€‚æ‰€ä»¥ï¼Œä¸ç®¡ä½ é€‰å“ªä¸ªéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>åŒæ—¶ <a href=\"https://opm.openresty.org/\">OPM çš„ç½‘ç«™</a> ä¹Ÿç›¸å¯¹ç®€å•ï¼Œæ²¡æœ‰æä¾›åŒ…çš„ä¸‹è½½æ¬¡æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿™ä¸ªåŒ…çš„ä¾èµ–å…³ç³»ã€‚ä½ éœ€è¦èŠ±è´¹æ›´å¤šçš„æ—¶é—´ï¼Œæ¥ç”„åˆ«å‡ºåˆ°åº•ä½¿ç”¨å“ªäº› lua-resty åº“æ‰æ˜¯æ­£ç¡®çš„é€‰æ‹©ï¼Œè€Œè¿™äº›æœ¬åº”è¯¥æ˜¯ç»´æŠ¤è€…çš„äº‹æƒ…ã€‚</p><h2><strong>LUAROCKS</strong></h2><p><a href=\"https://luarocks.org\">LuaRocks</a> æ˜¯ OpenResty ä¸–ç•Œçš„å¦ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œè¯ç”Ÿåœ¨ OPM ä¹‹å‰ã€‚ä¸åŒäº OPM é‡ŒåªåŒ…å« OpenResty ç›¸å…³çš„åŒ…ï¼ŒLuaRocks é‡Œé¢è¿˜åŒ…å« Lua ä¸–ç•Œçš„åº“ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒLuaRocks é‡Œé¢çš„ LuaSQL-MySQLï¼Œå°±æ˜¯ Lua ä¸–ç•Œä¸­è¿æ¥ MySQL çš„åŒ…ï¼Œå¹¶ä¸èƒ½ç”¨åœ¨ OpenResty ä¸­ã€‚</p><p>è¿˜æ˜¯ä»¥HTTPåº“ä¸ºä¾‹ï¼Œæˆ‘ä»¬å°è¯•ç”¨ LuaRocks æ¥è¯•ä¸€è¯•æŸ¥æ‰¾ï¼š</p><pre><code>$ luarocks search http\n</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œä¹Ÿæ˜¯è¿”å›äº†ä¸€å¤§å †åŒ…ã€‚</p><p>æˆ‘ä»¬ä¸å¦¨å†æ¢ä¸ªå…³é”®å­—ï¼š</p><pre><code>$ luarocks search lua-resty-http\n</code></pre><p>è¿™æ¬¡åªè¿”å›äº†ä¸€ä¸ªåŒ…ã€‚æˆ‘ä»¬å¯ä»¥åˆ° LuaRocks çš„ç½‘ç«™ä¸Šï¼Œå»çœ‹çœ‹<a href=\"https://luarocks.org/modules/pintsized/lua-resty-http\">è¿™ä¸ªåŒ…çš„è¯¦ç»†ä¿¡æ¯</a>ï¼Œä¸‹é¢æ˜¯ç½‘ç«™é¡µé¢çš„æˆªå›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ba/95/ba5cbaae9a7a9ab1fbd05099dc7e9695.jpg?wh=1170*838\" alt=\"\"></p><p>è¿™é‡Œé¢åŒ…å«äº†ä½œè€…ã€Licenseã€GitHub åœ°å€ã€ä¸‹è½½æ¬¡æ•°ã€åŠŸèƒ½ç®€ä»‹ã€å†å²ç‰ˆæœ¬ã€ä¾èµ–ç­‰ã€‚å’Œ OPM ä¸åŒçš„æ˜¯ï¼ŒLuaRocks å¹¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨ GitHub çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè€Œæ˜¯éœ€è¦å¼€å‘è€…å•ç‹¬åœ¨ LuaRocks ä¸Šè¿›è¡Œæ³¨å†Œã€‚</p><p>å…¶å®ï¼Œå¼€æºçš„ API ç½‘å…³é¡¹ç›® Kongï¼Œå°±æ˜¯ä½¿ç”¨ LuaRocks æ¥è¿›è¡ŒåŒ…çš„ç®¡ç†ï¼Œå¹¶ä¸”è¿˜æŠŠ LuaRocks çš„ä½œè€…æ”¶å½’éº¾ä¸‹ã€‚æˆ‘ä»¬æ¥ç€å°±æ¥ç®€å•çœ‹ä¸‹ï¼ŒKong çš„åŒ…ç®¡ç†é…ç½®æ˜¯æ€ä¹ˆå†™çš„ã€‚</p><p>ç›®å‰ Kong çš„æœ€æ–°ç‰ˆæœ¬æ˜¯ 1.1.1ï¼Œ ä½ å¯ä»¥åœ¨ <a href=\"https://github.com/Kong/kong\">https://github.com/Kong/kong</a> çš„é¡¹ç›®ä¸‹æ‰¾åˆ°æœ€æ–°çš„ .rockspec åç¼€çš„æ–‡ä»¶ã€‚</p><pre><code>package = &quot;kong&quot;\nversion = &quot;1.1.1-0&quot;\nsupported_platforms = {&quot;linux&quot;, &quot;macosx&quot;}\nsource = {\n  url = &quot;git://github.com/Kong/kong&quot;,\n  tag = &quot;1.1.1&quot;\n}\ndescription = {\n  summary = &quot;Kong is a scalable and customizable API Management Layer built on top of Nginx.&quot;,\n  homepage = &quot;https://konghq.com&quot;,\n  license = &quot;Apache 2.0&quot;\n}\ndependencies = {\n  &quot;inspect == 3.1.1&quot;,\n  &quot;luasec == 0.7&quot;,\n  &quot;luasocket == 3.0-rc1&quot;,\n  &quot;penlight == 1.5.4&quot;,\n  &quot;lua-resty-http == 0.13&quot;,\n  &quot;lua-resty-jit-uuid == 0.0.7&quot;,\n  &quot;multipart == 0.5.5&quot;,\n  &quot;version == 1.0.1&quot;,\n  &quot;kong-lapis == 1.6.0.1&quot;,\n  &quot;lua-cassandra == 1.3.4&quot;,\n  &quot;pgmoon == 1.9.0&quot;,\n  &quot;luatz == 0.3&quot;,\n  &quot;http == 0.3&quot;,\n  &quot;lua_system_constants == 0.1.3&quot;,\n  &quot;lyaml == 6.2.3&quot;,\n  &quot;lua-resty-iputils == 0.3.0&quot;,\n  &quot;luaossl == 20181207&quot;,\n  &quot;luasyslog == 1.0.0&quot;,\n  &quot;lua_pack == 1.0.5&quot;,\n  &quot;lua-resty-dns-client == 3.0.2&quot;,\n  &quot;lua-resty-worker-events == 0.3.3&quot;,\n  &quot;lua-resty-mediador == 0.1.2&quot;,\n  &quot;lua-resty-healthcheck == 0.6.0&quot;,\n  &quot;lua-resty-cookie == 0.1.0&quot;,\n  &quot;lua-resty-mlcache == 2.3.0&quot;,\n......\n</code></pre><p>é€šè¿‡æ–‡ä»¶ä½ å¯ä»¥çœ‹åˆ°ï¼Œä¾èµ–é¡¹é‡Œé¢æºæ‚äº† lua-resty åº“å’Œçº¯ Lua ä¸–ç•Œçš„åº“ï¼Œä½¿ç”¨ OPM åªèƒ½éƒ¨åˆ†å®‰è£…è¿™äº›ä¾èµ–é¡¹ã€‚å†™å¥½é…ç½®åï¼Œä½¿ç”¨ luarocks çš„ upload å‘½ä»¤æŠŠè¿™ä¸ªé…ç½®ä¸Šä¼ ï¼Œç”¨æˆ·å°±å¯ä»¥ç”¨ LuaRocks æ¥ä¸‹è½½å¹¶å®‰è£… Kong äº†ã€‚</p><p>å¦å¤–ï¼Œåœ¨ OpenResty ä¸­ï¼Œé™¤äº† Lua ä»£ç å¤–ï¼Œæˆ‘ä»¬è¿˜ç»å¸¸ä¼šè°ƒç”¨ C ä»£ç ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç¼–è¯‘æ‰èƒ½ä½¿ç”¨ã€‚LuaRocks æ˜¯æ”¯æŒè¿™ä¹ˆåšçš„ï¼Œä½ å¯ä»¥åœ¨ rockspec æ–‡ä»¶ä¸­ï¼ŒæŒ‡å®š C æºç çš„è·¯å¾„å’Œåç§°ï¼Œè¿™æ ·LuaRocks å°±ä¼šå¸®ä½ æœ¬åœ°ç¼–è¯‘ã€‚è€Œ OPM æš‚æ—¶è¿˜ä¸æ”¯æŒè¿™ç§ç‰¹æ€§ã€‚</p><p>ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒOPM å’Œ LuaRocks éƒ½ä¸æ”¯æŒç§æœ‰åŒ…ã€‚</p><h2><strong>AWESOME-RESTY</strong></h2><p>è®²äº†è¿™ä¹ˆå¤šåŒ…ç®¡ç†çš„å†…å®¹ï¼Œå…¶å®å‘¢ï¼Œå³ä½¿æœ‰äº† OPM å’Œ LuaRocksï¼Œå¯¹äº OpenResty çš„ lua-resty åŒ…ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç®¡ä¸­çª¥è±¹çš„çŠ¶æ€ã€‚åˆ°åº•æœ‰æ²¡æœ‰åœ°æ–¹å¯ä»¥è®©æˆ‘ä»¬ä¸€è§ˆå…¨è²Œå‘¢ï¼Ÿ</p><p>å½“ç„¶æ˜¯æœ‰çš„ï¼Œ<a href=\"https://github.com/bungle/awesome-resty\">awesome-resty</a> è¿™ä¸ªé¡¹ç›®ï¼Œå°±ç»´æŠ¤äº†å‡ ä¹æ‰€æœ‰ OpenResty å¯ç”¨çš„åŒ…ï¼Œå¹¶ä¸”éƒ½åˆ†é—¨åˆ«ç±»åœ°æ•´ç†å¥½äº†ã€‚å½“ä½ ä¸ç¡®å®šæ˜¯å¦å­˜åœ¨é€‚åˆçš„ç¬¬ä¸‰æ–¹åŒ…æ—¶ï¼Œæ¥è¿™é‡Œâ€œæŒ‰å›¾ç´¢éª¥â€ï¼Œå¯ä»¥è¯´æ˜¯æœ€å¥½çš„åŠæ³•ã€‚</p><p>è¿˜æ˜¯ä»¥HTTPåº“ä¸ºä¾‹ï¼Œ åœ¨awesome-resty ä¸­ï¼Œå®ƒè‡ªç„¶æ˜¯å±äº <a href=\"https://github.com/bungle/awesome-resty#networking\">networking</a> åˆ†ç±»ï¼š</p><pre><code>lua-resty-http by @pintsized â€” Lua HTTP client cosocket driver for OpenResty / ngx_lua\nlua-resty-http by @liseen â€” Lua http client driver for the ngx_lua based on the cosocket API\nlua-resty-http by @DorianGray â€” Lua HTTP client driver for ngx_lua based on the cosocket API\nlua-resty-http-simple â€” Simple Lua HTTP client driver for ngx_lua\nlua-resty-httpipe â€” Lua HTTP client cosocket driver for OpenResty / ngx_lua\nlua-resty-httpclient â€” Nonblocking Lua HTTP Client library for aLiLua &amp; ngx_lua\nlua-httpcli-resty â€” Lua HTTP client module for OpenResty\nlua-resty-requests â€” Yet Another HTTP Library for OpenResty\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™é‡Œæœ‰ 8 ä¸ª lua-resty-http çš„ç¬¬ä¸‰æ–¹åº“ã€‚å¯¹æ¯”ä¸€ä¸‹å‰é¢çš„ç»“æœï¼Œæˆ‘ä»¬ä½¿ç”¨ OPM åªæ‰¾åˆ° 2 ä¸ªï¼Œè€ŒLuaRocks é‡Œé¢æ›´æ˜¯åªæœ‰ 1 ä¸ªã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æ˜¯é€‰æ‹©å›°éš¾ç—‡ï¼Œè¯·ç›´æ¥ä½¿ç”¨ç¬¬ä¸€ä¸ªï¼Œå®ƒå’Œ LuaRocks ä¸­çš„æ˜¯åŒä¸€ä¸ªã€‚</p><p>è€Œå¯¹äºæ„¿æ„å°è¯•çš„å·¥ç¨‹å¸ˆï¼Œæˆ‘æ›´æ¨èä½ ç”¨æœ€åä¸€ä¸ªåº“ï¼š <a href=\"https://github.com/tokers/lua-resty-requests\">lua-resty-requests</a>ï¼Œå®ƒæ˜¯äººç±»æ›´å‹å¥½çš„ HTTPè®¿é—®åº“ï¼Œæ¥å£é£æ ¼ä¸ Python ä¸­å¤§åé¼é¼çš„ <a href=\"http://docs.python-requests.org/en/master/\">Requests</a> ä¸€è‡´ã€‚å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·æ˜¯ä¸€ä¸ª Python çˆ±å¥½è€…ï¼Œä¸€å®šä¼šå–œæ¬¢ä¸Š lua-resty-requestsã€‚è¿™ä¸ªåº“çš„ä½œè€…æ˜¯ OpenResty ç¤¾åŒºä¸­æ´»è·ƒçš„ tokersï¼Œå› æ­¤ä½ å¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚</p><p>å¿…é¡»è¦æ‰¿è®¤ï¼ŒOpenResty ç°æœ‰çš„ç¬¬ä¸‰æ–¹åº“å¹¶ä¸å®Œå–„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ åœ¨ awesome-resty ä¸­æ²¡æœ‰æ‰¾åˆ°ä½ éœ€è¦çš„åº“ï¼Œé‚£å°±éœ€è¦ä½ è‡ªå·±æ¥å®ç°ï¼Œæ¯”å¦‚ OpenResty ä¸€ç›´æ²¡æœ‰è®¿é—® Oracle  æˆ–è€… SQLServer çš„ lua-rsety åº“ã€‚</p><h2>å†™åœ¨æœ€å</h2><p>ä¸€ä¸ªå¼€æºé¡¹ç›®æƒ³è¦å¥åº·åœ°å‘å±•å£®å¤§ï¼Œä¸ä»…éœ€è¦æœ‰ç¡¬æ ¸çš„æŠ€æœ¯ã€å®Œå–„çš„æ–‡æ¡£å’Œå®Œæ•´çš„æµ‹è¯•ï¼Œè¿˜éœ€è¦å¸¦åŠ¨æ›´å¤šçš„å¼€å‘è€…å’Œå…¬å¸ä¸€èµ·åŠ å…¥è¿›æ¥ï¼Œå½¢æˆä¸€ä¸ªç”Ÿæ€ã€‚æ­£å¦‚ Apache åŸºé‡‘ä¼šçš„åè¨€ï¼šç¤¾åŒºèƒœäºä»£ç ã€‚</p><p>è¿˜æ˜¯é‚£å¥è¯ï¼Œæƒ³æŠŠ OpenResty ä»£ç å†™å¥½ï¼Œä¸€ç‚¹å„¿ä¹Ÿä¸ç®€å•ã€‚OpenResty è¿˜æ²¡æœ‰ç³»ç»Ÿçš„å­¦ä¹ èµ„æ–™ï¼Œä¹Ÿæ²¡æœ‰å®˜æ–¹çš„ä»£ç æŒ‡å—ï¼Œå¾ˆå¤šçš„ä¼˜åŒ–ç‚¹çš„ç¡®å·²ç»å†™åœ¨äº†å¼€æºé¡¹ç›®ä¸­ï¼Œä½†å¤§å¤šæ•°å¼€å‘è€…å´æ˜¯çŸ¥å…¶ç„¶è€Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚è¿™ä¹Ÿæ˜¯æˆ‘è¿™ä¸ªä¸“æ çš„ç›®çš„æ‰€åœ¨ï¼Œå¸Œæœ›ä½ å­¦ä¹ å®Œä¹‹åï¼Œå¯ä»¥å†™å‡ºæ›´é«˜æ•ˆçš„ OpenResty ä»£ç ï¼Œä¹Ÿå¯ä»¥æ›´å®¹æ˜“åœ°å‚ä¸åˆ° OpenResty ç›¸å…³çš„å¼€æºé¡¹ç›®ä¸­æ¥ã€‚</p><p>ä½ æ˜¯å¦‚ä½•çœ‹å¾… OpenResty ç”Ÿæ€çš„å‘¢ï¼Ÿæ¬¢è¿ç•™è¨€æˆ‘ä»¬ä¸€èµ·èŠèŠï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« è½¬å‘ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ï¼Œä¸€èµ·åœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p></p>","neighbors":{"left":{"article_title":"03 | æªå‡ºéšè—åœ¨èƒŒåçš„é‚£äº›å­é¡¹ç›®","id":98416},"right":{"article_title":"05 | [è§†é¢‘]opmé¡¹ç›®å¯¼è¯»","id":98987}},"comments":[{"had_liked":false,"id":101378,"user_name":"ä¸šä½™è‰","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1559792260,"is_pvip":false,"replies":[{"id":"36550","content":"å› ä¸º Oracle å’Œ SQLServer æ˜¯é—­æºçš„å•†ä¸šäº§å“","user_name":"ä½œè€…å›å¤","comment_id":101378,"uid":"1017955","ip_address":"","utype":1,"ctime":1559805275,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":2,"race_medal":0,"score":"27329596036","product_id":100028301,"comment_content":"OpenResty ä¸€ç›´æ²¡æœ‰è®¿é—® Oracle æˆ–è€… SQLServer çš„ lua-rsety åº“ã€‚è¿™æ˜¯æœ‰ä»€ä¹ˆåŸå› å—ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452935,"discussion_content":"å› ä¸º Oracle å’Œ SQLServer æ˜¯é—­æºçš„å•†ä¸šäº§å“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559805275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1158275,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ac/83/2f143a22.jpg","nickname":"é›ªç²®","note":"","ucode":"363A83AC7CE8B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293272,"discussion_content":"è€å¸ˆï¼Œè¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ä»£ç†æ˜¯å¦æœ€æ–¹ä¾¿çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595496509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100301,"user_name":"guoew","can_delete":false,"product_type":"c1","uid":1299148,"ip_address":"","ucode":"12EA3A8523921A","user_header":"https://static001.geekbang.org/account/avatar/00/13/d2/cc/d54b7e5b.jpg","comment_is_top":false,"comment_ctime":1559524813,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27329328589","product_id":100028301,"comment_content":"ä»¥å‰éƒ½æ˜¯æŠŠopenrestyå½“åšnginx+luaï¼Œä½¿ç”¨å®ç°ä¸€äº›æœ€ç®€å•çš„åŠŸèƒ½ï¼Œéƒ½ä¸çŸ¥é“è¿™äº›åŒ…ç®¡ç†å™¨ï¼Œæ„Ÿè°¢è€å¸ˆ","like_count":6},{"had_liked":false,"id":100240,"user_name":"å’–å•¡çŒ«","can_delete":false,"product_type":"c1","uid":1085089,"ip_address":"","ucode":"64F4CB55DD11B5","user_header":"https://static001.geekbang.org/account/avatar/00/10/8e/a1/c05ab3b3.jpg","comment_is_top":false,"comment_ctime":1559493932,"is_pvip":false,"replies":[{"id":"36154","content":"luarocks å’Œ OpenResty å¹¶æ²¡æœ‰é…åˆå’Œè”åŠ¨ï¼Œéœ€è¦ä½ å•ç‹¬åœ¨ lua_package_path ä¸­å¢åŠ  luarocks å®‰è£…çš„è·¯å¾„æ‰è¡Œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œluarocks ä¼šæŠŠåº“å®‰è£…åˆ° lua5.1 æˆ–è€… lua5.3 çš„ç›®å½•ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":100240,"uid":"1017955","ip_address":"","utype":1,"ctime":1559552385,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"18739363116","product_id":100028301,"comment_content":"luarockså®‰è£…äº†åŒ…åï¼Œåœ¨nginx.confåº”è¯¥æ€ä¹ˆè®¾ç½®lua_package_pathå‘¢ï¼Œæœ‰æ—¶å€™è®¾ç½®äº†é»˜è®¤æœç´¢è·¯å¾„ï¼Œä¹Ÿæ˜¯ä¸ç”Ÿæ•ˆï¼Œå°è¯•å°†åŒ…æ‹·è´åˆ°lualibçš„ç›®å½•ä¸‹æ‰èƒ½æ‰¾åˆ°","like_count":4,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452469,"discussion_content":"luarocks å’Œ OpenResty å¹¶æ²¡æœ‰é…åˆå’Œè”åŠ¨ï¼Œéœ€è¦ä½ å•ç‹¬åœ¨ lua_package_path ä¸­å¢åŠ  luarocks å®‰è£…çš„è·¯å¾„æ‰è¡Œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œluarocks ä¼šæŠŠåº“å®‰è£…åˆ° lua5.1 æˆ–è€… lua5.3 çš„ç›®å½•ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559552385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167306,"user_name":"qinsi","can_delete":false,"product_type":"c1","uid":1667175,"ip_address":"","ucode":"090D9C4068FF12","user_header":"https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg","comment_is_top":false,"comment_ctime":1577760407,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14462662295","product_id":100028301,"comment_content":"Use of LuaRocks with OpenResty is strongly discouraged since OpenResty provides its own package manager, OPM. (https:&#47;&#47;openresty.org&#47;en&#47;using-luarocks.html) ä¸€è„¸æ‡µé€¼","like_count":3},{"had_liked":false,"id":100889,"user_name":"baiyutang","can_delete":false,"product_type":"c1","uid":1032236,"ip_address":"","ucode":"FD2436978BB447","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c0/2c/87cc08ce.jpg","comment_is_top":false,"comment_ctime":1559664472,"is_pvip":false,"replies":[{"id":"36595","content":"æ˜¯çš„ï¼ŒOpenResty ä½¿ç”¨å¹¿ï¼Œä½†ä¸çƒ­é—¨ã€‚ç”¨ OpenResty å¼€å‘ä¸šåŠ¡æ˜¯æ²¡é—®é¢˜çš„ï¼ŒæŠŠå®ƒä»…ä»…å½“åš nginx çš„æ›¿ä»£å°±æœ‰äº›å¤§æå°ç”¨äº†","user_name":"ä½œè€…å›å¤","comment_id":100889,"uid":"1017955","ip_address":"","utype":1,"ctime":1559863799,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"10149599064","product_id":100028301,"comment_content":"æ„Ÿè§‰OpenRestyæ¯”è¾ƒåå‘äºè¿ç»´å¼€å‘çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºä¸šåŠ¡å¼€å‘æ¯”è¾ƒå°‘å…³ç³»æœåŠ¡å™¨éƒ¨ç½²æˆ–è€…æ€§èƒ½ï¼Œæ€§èƒ½çš„è¯å¯èƒ½å¤§å‚ä¼šé‡åˆ°æ›´å¤šé—®é¢˜æˆ–è€…éœ€è¦å®šåˆ¶åŒ–çš„é—®é¢˜ã€‚<br>1 å¾ˆå¤šå°å‚å¤šä»…é™äºè¿ç”¨ä½œä¸ºä¸€ä¸ªwebæœåŠ¡å™¨ã€‚<br>2 ç¨‹åºå‘˜åœˆå­ä¸­ä¸šåŠ¡å¼€å‘è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒå¤šçš„ï¼Ÿ<br>æ‰€ä»¥ï¼Œè™½ç„¶ä¸œè¥¿æ˜¯å¥½ä¸œè¥¿ï¼Œä½†æ˜¯ä¸æ˜¯æ¯ä¸ªå‚ æˆ–è€…æ¯ä¸ªäººéƒ½èƒ½ç©çš„èµ·æ¥çš„ã€‚ä¸èƒ½åƒVuejsæˆ–è€…Golangè¿™äº›ä¸šåŠ¡å¼€å‘æŠ€æœ¯ç›´æ¥åšæ¯”è¾ƒã€‚å½“ç„¶ï¼Œæˆ‘ä»ç„¶è§‰å¾—OpenRestyæ˜¯å€¼å¾—æŠ•å…¥çš„ï¼Œä»èŒä¸šè§„åˆ’æˆ–è€…ä¸ªäººå¯¹è½¯ä»¶çš„ç†è§£ã€‚æˆ‘éƒ½çœ‹å¥½å­¦ä¹ å¥½OR.","like_count":2,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452720,"discussion_content":"æ˜¯çš„ï¼ŒOpenResty ä½¿ç”¨å¹¿ï¼Œä½†ä¸çƒ­é—¨ã€‚ç”¨ OpenResty å¼€å‘ä¸šåŠ¡æ˜¯æ²¡é—®é¢˜çš„ï¼ŒæŠŠå®ƒä»…ä»…å½“åš nginx çš„æ›¿ä»£å°±æœ‰äº›å¤§æå°ç”¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559863799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100273,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1559520666,"is_pvip":true,"replies":[{"id":"36157","content":"opm ç¡®å®ä¸å¤Ÿå®Œå–„ï¼Œè¿˜è¦å¤šå¤šåŠ æ²¹æ‰è¡Œ","user_name":"ä½œè€…å›å¤","comment_id":100273,"uid":"1017955","ip_address":"","utype":1,"ctime":1559552627,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"10149455258","product_id":100028301,"comment_content":"opm ä¸Šçš„ç¬¬ä¸‰æ–¹åº“ï¼Œè¿˜æ˜¯å¾ˆå°‘çš„ï¼ŒåŠŸèƒ½è¿˜æœ‰å¾…å®Œå–„","like_count":2,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452480,"discussion_content":"opm ç¡®å®ä¸å¤Ÿå®Œå–„ï¼Œè¿˜è¦å¤šå¤šåŠ æ²¹æ‰è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559552627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100318,"user_name":"TomShine","can_delete":false,"product_type":"c1","uid":1003894,"ip_address":"","ucode":"81B7B6628BCE31","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/76/bebe6133.jpg","comment_is_top":false,"comment_ctime":1559527872,"is_pvip":false,"replies":[{"id":"36159","content":"ä¼—äººæ‹¾æŸ´ç«ç„°é«˜","user_name":"ä½œè€…å›å¤","comment_id":100318,"uid":"1017955","ip_address":"","utype":1,"ctime":1559552682,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"5854495168","product_id":100028301,"comment_content":"OpenRestry çš„ç”Ÿæ€çœ‹ç€ç¡®å®ä¸å¥½ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€èµ·åŠªåŠ›","like_count":1,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452497,"discussion_content":"ä¼—äººæ‹¾æŸ´ç«ç„°é«˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559552682,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100283,"user_name":"Panda","can_delete":false,"product_type":"c1","uid":1095740,"ip_address":"","ucode":"911A200C7B18BE","user_header":"https://static001.geekbang.org/account/avatar/00/10/b8/3c/1a294619.jpg","comment_is_top":false,"comment_ctime":1559522083,"is_pvip":false,"replies":[{"id":"36158","content":"luarocks ç›¸å¯¹å¥½ç”¨ä¸€äº›","user_name":"ä½œè€…å›å¤","comment_id":100283,"uid":"1017955","ip_address":"","utype":1,"ctime":1559552658,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":3,"race_medal":0,"score":"5854489379","product_id":100028301,"comment_content":"åŒ…ç®¡ç†å·¥å…· æœ€å¥½ç”¨çš„åº”è¯¥æ˜¯ composer å’Œ npm    åŒ…ç®¡ç†å·¥å…·å¯ä»¥è®©æˆ‘ä»¬ç«™åœ¨å‰äººçš„è‚©è†€ä¸Šæ›´å¿«çš„å¼€å‘å‡ºåº”ç”¨","like_count":1,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452485,"discussion_content":"luarocks ç›¸å¯¹å¥½ç”¨ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559552658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009422,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/0e/c77ad9b1.jpg","nickname":"eason2017","note":"","ucode":"E070BA624FA490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290865,"discussion_content":"npmåœ¨å›½å†…é™é€Ÿå¾ˆæ˜¯ä¸å¥½ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594629489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310788,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/44/d5cf762b.jpg","nickname":"æ®µå…ˆæ£®","note":"","ucode":"90251BB8BF8DDB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12855,"discussion_content":"npmé‚£æ¶å¿ƒçš„ä¾èµ–æ–‡ä»¶å¤¹ä½ æ€ä¹ˆä¼šæœ‰ä¸€ç§å¥½çš„æ„Ÿè§‰çš„ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568602952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100270,"user_name":"manatee","can_delete":false,"product_type":"c1","uid":1041112,"ip_address":"","ucode":"708D90E7A265BD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e2/d8/f0562ede.jpg","comment_is_top":false,"comment_ctime":1559520380,"is_pvip":false,"replies":[{"id":"36156","content":"cosocket åé¢ä¼šä¸“é—¨è®²ï¼Œä½ å¯ä»¥ç®€å•çš„è®¤ä¸ºå®ƒæ˜¯ OpenResty ç‰¹æœ‰çš„ï¼Œç”¨æ¥è®¿é—®ç½‘ç»œçš„åç¨‹æŠ€æœ¯","user_name":"ä½œè€…å›å¤","comment_id":100270,"uid":"1017955","ip_address":"","utype":1,"ctime":1559552606,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"5854487676","product_id":100028301,"comment_content":"æ‰“å¡ï¼Œä»opmä¸­å¯ä»¥å®‰è£…oprestyç›¸å…³çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œä»luarockså¯ä»¥å®‰è£…luaç›¸å…³çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚æƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œæ–‡ä¸­è®²çš„cosocketå…·ä½“æ˜¯æŒ‡ä»€ä¹ˆå‘¢","like_count":1,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452479,"discussion_content":"cosocket åé¢ä¼šä¸“é—¨è®²ï¼Œä½ å¯ä»¥ç®€å•çš„è®¤ä¸ºå®ƒæ˜¯ OpenResty ç‰¹æœ‰çš„ï¼Œç”¨æ¥è®¿é—®ç½‘ç»œçš„åç¨‹æŠ€æœ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559552606,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353821,"user_name":"é«˜ç‡•å†›","can_delete":false,"product_type":"c1","uid":1910657,"ip_address":"æ±Ÿè‹","ucode":"AF31DDD0EE08BF","user_header":"https://static001.geekbang.org/account/avatar/00/1d/27/81/27c9d811.jpg","comment_is_top":false,"comment_ctime":1659840556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659840556","product_id":100028301,"comment_content":"æˆ‘çœ‹äº†è¿™ä¹ˆå¤šï¼Œæ€»ç»“å‡ºä¸€ä¸ªé“ç†ï¼Œä»»ä½•ä¸€ä¸ªé¡¹ç›®èƒ½ä¸èƒ½æˆåŠŸï¼Œå°±çœ‹è¿™ä¸ªé¡¹ç›®æ˜¯ä¸æ˜¯åœ¨æŒç»­ç»´æŠ¤ï¼Œåªè¦æœ‰ç»´æŠ¤ï¼Œæœ‰è¿­ä»£ï¼Œé¡¹ç›®å°±ä¸ä¼šæ­»ï¼Œå°±ä¼šå˜å¾—æ›´å¥½ã€‚","like_count":0},{"had_liked":false,"id":304160,"user_name":"å¹³é£é€ é›¨","can_delete":false,"product_type":"c1","uid":1014349,"ip_address":"","ucode":"F9EE4704F31E22","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/4d/b0228a1a.jpg","comment_is_top":false,"comment_ctime":1627280467,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1627280467","product_id":100028301,"comment_content":"æ€»ç»“èµ·æ¥ï¼Œå¯¹äºä½¿ç”¨æ–¹è¦ä¸»åŠ¨ç”„åˆ«ä¸‰æ–¹åŒ…çš„è‰¯è ï¼Œç”„åˆ«çš„è¿‡ç¨‹æœ‰ä¸€äº›æ½œåœ¨çš„è§„åˆ™ã€‚<br>æ¯”å¦‚ï¼Œlua-resty-*ä½œä¸ºå‰ç¼€çš„å’Œé«˜æ€§èƒ½ç›¸å…³ï¼Œè¦é‡ç‚¹å…³æ³¨ã€‚<br>é…åˆOPM&#47;LuaRocksä»¥åŠawesome-restyå¯¹ä¸‰æ–¹åº“åšè¿›ä¸€æ­¥çš„èƒŒæ™¯è°ƒæŸ¥ï¼Œæœ€åè¿˜æ˜¯éœ€è¦å…³æ³¨ä»£ç æœ¬èº«ï¼Œå…³æ³¨æµ‹è¯•ç”¨ä¾‹ï¼Œè¿›è¡Œä¸‰æ–¹åº“é€‰æ‹©çš„æŠŠæ§ã€‚","like_count":0},{"had_liked":false,"id":264187,"user_name":"èœ¥èœ´1214","can_delete":false,"product_type":"c1","uid":1673879,"ip_address":"","ucode":"1CD2B3A41F3D01","user_header":"https://static001.geekbang.org/account/avatar/00/19/8a/97/7ab3a22c.jpg","comment_is_top":false,"comment_ctime":1606376036,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1606376036","product_id":100028301,"comment_content":"è€å¸ˆï¼Œæ±‚åŠ©å•Šã€‚æˆ‘macç”µè„‘ï¼Œå®‰è£…å®Œopenrestyåï¼Œé€šè¿‡opmå®‰è£…äº†lua-resty-requestsåï¼ŒæŒ‰ç…§å®˜ç½‘demoï¼Œè¿è¡Œresty -e &#39;print(require &quot;resty.requests&quot;.get(&quot;https:&#47;&#47;github.com&quot;, { stream = false}).content)&#39;ã€‚ä½†æ˜¯ç›´æ¥æŠ¥é”™ã€‚...nresty&#47;1.19.3.1_1&#47;site&#47;lualib&#47;resty&#47;requests&#47;adapter.lua:4: module &#39;resty.socket&#39; not foundã€‚ç½‘ä¸Šä¹Ÿæ²¡ç›¸å…³çš„èµ„æ–™ï¼Œè¿™ä¸ªæ˜¯å°‘å®‰è£…äº†ä¸œè¥¿å§","like_count":0,"discussions":[{"author":{"id":1099012,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c5/04/a5e9de13.jpg","nickname":"éšä¾¿","note":"","ucode":"7FB5AD24BF6821","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399724,"discussion_content":"download https://github.com/thibaultcha/lua-resty-socket ,then just copy lib/resty/*.lua to openresty/lualib/resty ,","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633040889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180730,"user_name":"è´ºé’§å¨","can_delete":false,"product_type":"c1","uid":1218353,"ip_address":"","ucode":"3E1FC908C28E29","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/31/76485177.jpg","comment_is_top":false,"comment_ctime":1582375690,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1582375690","product_id":100028301,"comment_content":"ä¸€ç›´ä»¥ä¸º Kong è¯» ç©º","like_count":0,"discussions":[{"author":{"id":2394287,"avatar":"https://static001.geekbang.org/account/avatar/00/24/88/af/bea4327e.jpg","nickname":"nobia","note":"","ucode":"1D3D0F808765EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338167,"discussion_content":"?? éš¾é“ä¸æ˜¯å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609206462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120222,"user_name":"ZeroIce","can_delete":false,"product_type":"c1","uid":1305369,"ip_address":"","ucode":"30133BA83CE349","user_header":"https://static001.geekbang.org/account/avatar/00/13/eb/19/0d990b03.jpg","comment_is_top":false,"comment_ctime":1564809301,"is_pvip":false,"replies":[{"id":"46065","content":"OpenResty ç°åœ¨å¹¶æ²¡æœ‰æ¯”è¾ƒåˆé€‚çš„ä¹¦æ¨èï¼Œæœ‰çš„ä¹Ÿæ˜¯ä¸­æ–‡çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":120222,"uid":"1017955","ip_address":"","utype":1,"ctime":1566197442,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"1564809301","product_id":100028301,"comment_content":"è€å¸ˆï¼Œæœ‰ä»€ä¹ˆä¹¦ç±æ¨èçš„ï¼Ÿè‹±æ–‡ä¹¦ç±ä¹Ÿè¡Œ<br>","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461246,"discussion_content":"OpenResty ç°åœ¨å¹¶æ²¡æœ‰æ¯”è¾ƒåˆé€‚çš„ä¹¦æ¨èï¼Œæœ‰çš„ä¹Ÿæ˜¯ä¸­æ–‡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566197442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":113714,"user_name":"è“è‰²æµ·æ´‹","can_delete":false,"product_type":"c1","uid":1122512,"ip_address":"","ucode":"74F0C097750F96","user_header":"https://static001.geekbang.org/account/avatar/00/11/20/d0/ad12060d.jpg","comment_is_top":false,"comment_ctime":1563145996,"is_pvip":false,"replies":[{"id":"41588","content":"ç°åœ¨ OpenResty å’Œ Nginx ä¸€æ ·ï¼Œåªæ”¯æŒ grpc çš„è½¬å‘ï¼Œå¹¶æ²¡æœ‰å®ç°åè®®çš„è½¬æ¢ï¼Œä¹Ÿä¸æ”¯æŒ grpc çš„å®¢æˆ·ç«¯ã€‚è¿™ç®—æ˜¯ OpenResty çš„ä¸€ä¸ªè½¯è‚‹ã€‚æˆ‘ä»¬å›¢é˜Ÿæœ‰è®¡åˆ’å¯¹è¿™æ–¹é¢åšåŠ å¼ºã€‚","user_name":"ä½œè€…å›å¤","comment_id":113714,"uid":"1017955","ip_address":"","utype":1,"ctime":1563238625,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"1563145996","product_id":100028301,"comment_content":"è¯·é—®è€å¸ˆï¼Œopenrestyæ”¯æŒgrpcé€šä¿¡å—ï¼Ÿæœ‰æ²¡æœ‰ç›¸å…³çš„ç»„ä»¶å¯ä»¥å°†grpcè½¬æ¢ä¸ºæ™®é€šçš„httpè¯·æ±‚","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458355,"discussion_content":"ç°åœ¨ OpenResty å’Œ Nginx ä¸€æ ·ï¼Œåªæ”¯æŒ grpc çš„è½¬å‘ï¼Œå¹¶æ²¡æœ‰å®ç°åè®®çš„è½¬æ¢ï¼Œä¹Ÿä¸æ”¯æŒ grpc çš„å®¢æˆ·ç«¯ã€‚è¿™ç®—æ˜¯ OpenResty çš„ä¸€ä¸ªè½¯è‚‹ã€‚æˆ‘ä»¬å›¢é˜Ÿæœ‰è®¡åˆ’å¯¹è¿™æ–¹é¢åšåŠ å¼ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563238625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106971,"user_name":"æœ‹æœ‹","can_delete":false,"product_type":"c1","uid":1133890,"ip_address":"","ucode":"3070498E7282C5","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/42/8fd7c2e2.jpg","comment_is_top":false,"comment_ctime":1561430134,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561430134","product_id":100028301,"comment_content":"æˆ‘çš„&#47;usr&#47;local&#47;openresty&#47;bin&#47; ä¸‹åªæœ‰è¿™ä¿© æˆ‘æ˜¯centos7 çš„ç¯å¢ƒ çœ‹æ¥æˆ‘å¾—é‡æ–°å®‰è£…ä¸€ä¸‹å•¦<br>openresty  resty","like_count":0},{"had_liked":false,"id":104269,"user_name":"NEVER SETTLE","can_delete":false,"product_type":"c1","uid":1101894,"ip_address":"","ucode":"9C86BDAFDBF768","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/46/1a9229b3.jpg","comment_is_top":false,"comment_ctime":1560702744,"is_pvip":false,"replies":[{"id":"37916","content":"sudo yum install openresty-opm éœ€è¦å•ç‹¬å®‰è£…ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","comment_id":104269,"uid":"1017955","ip_address":"","utype":1,"ctime":1560840466,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"1560702744","product_id":100028301,"comment_content":"yum install openresty å®‰è£…å¥½openrestyä¹‹åï¼Œä¸ºä»€ä¹ˆæ‰¾ä¸åˆ°opm","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454196,"discussion_content":"sudo yum install openresty-opm éœ€è¦å•ç‹¬å®‰è£…ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560840466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103833,"user_name":"å°é£å“¥ â€è¶…ç´šæœƒå“¡","can_delete":false,"product_type":"c1","uid":1110049,"ip_address":"","ucode":"417F9563B3005B","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/21/104b9565.jpg","comment_is_top":false,"comment_ctime":1560524598,"is_pvip":false,"replies":[{"id":"37591","content":"luarocks éœ€è¦å•ç‹¬å®‰è£…ï¼Œä½ å¯ä»¥ç”¨ç³»ç»Ÿçš„åŒ…ç®¡ç†å·¥å…·å®‰è£…ï¼Œæ¯”å¦‚ brew install luarocks","user_name":"ä½œè€…å›å¤","comment_id":103833,"uid":"1017955","ip_address":"","utype":1,"ctime":1560567317,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"1560524598","product_id":100028301,"comment_content":"ä¸ºä»€ä¹ˆ æˆ‘è¿™é‡Œä¼šæç¤ºä½¿ç”¨luarocks å‘½ä»¤è¯´ä¸å­˜åœ¨ï¼Ÿ éœ€è¦é…ç½®ä»€ä¹ˆæ‰å¯ä»¥ï¼Ÿ<br>localhost:geektime yuesf$ luarocks search http<br>-bash: luarocks: command not found<br>localhost:geektime yuesf$ ","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454015,"discussion_content":"luarocks éœ€è¦å•ç‹¬å®‰è£…ï¼Œä½ å¯ä»¥ç”¨ç³»ç»Ÿçš„åŒ…ç®¡ç†å·¥å…·å®‰è£…ï¼Œæ¯”å¦‚ brew install luarocks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560567317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":102110,"user_name":"è‹±é›„","can_delete":false,"product_type":"c1","uid":1546612,"ip_address":"","ucode":"D1033C83C6CDE9","user_header":"https://static001.geekbang.org/account/avatar/00/17/99/74/0203bf17.jpg","comment_is_top":false,"comment_ctime":1560138566,"is_pvip":false,"replies":[{"id":"37360","content":"luarocks","user_name":"ä½œè€…å›å¤","comment_id":102110,"uid":"1017955","ip_address":"","utype":1,"ctime":1560410766,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":1,"race_medal":0,"score":"1560138566","product_id":100028301,"comment_content":"èœé¸Ÿæ¨èç”¨å“ªä¸ªç®¡ç†å·¥å…·å‘¢","like_count":1,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":453264,"discussion_content":"luarocks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560410766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":100243,"user_name":"ç‹æ–Œ","can_delete":false,"product_type":"c1","uid":1160774,"ip_address":"","ucode":"B08B97FFC0362D","user_header":"https://static001.geekbang.org/account/avatar/00/11/b6/46/b17cbaff.jpg","comment_is_top":false,"comment_ctime":1559495440,"is_pvip":true,"replies":[{"id":"36155","content":"æ˜¯çš„ï¼Œå®‰è£…åŒ…å°±ä¸å®¹æ˜“","user_name":"ä½œè€…å›å¤","comment_id":100243,"uid":"1017955","ip_address":"","utype":1,"ctime":1559552404,"user_name_real":"æ¸©é“­@OpenResty"}],"discussion_count":2,"race_medal":0,"score":"1559495440","product_id":100028301,"comment_content":"çš„ç¡®éœ€è¦æ¸©è€å¸ˆè¿™æ ·çš„è¯¾ç¨‹ï¼Œluaè™½ç„¶å…¥é—¨ç®€å•ï¼Œä½†æ˜¯openrestyçš„æ­£ç¡®æ‰“å¼€æ–¹å¼ä¸æ˜¯å¾ˆå¥½æ‰¾ğŸ˜¢","like_count":0,"discussions":[{"author":{"id":1017955,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/63/88cf886d.jpg","nickname":"æ¸©é“­@APISIX","note":"","ucode":"343567571DA16A","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452471,"discussion_content":"æ˜¯çš„ï¼Œå®‰è£…åŒ…å°±ä¸å®¹æ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559552404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251835,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oiboHpgukqib2ASXeU0H7W1ibgRMqyrNE5KaWicicPEDy0ia8YdoneZAtvW0EFIiaqZJp2OS4dnweOgXaJ5EjJicicEqic5A/132","nickname":"è¦ƒé’°æ ‹","note":"","ucode":"19080C463658EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307915,"discussion_content":"awesome-resty æ€ä¹ˆå®‰è£…å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600786482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}