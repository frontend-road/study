{"id":605414,"title":"02｜Webpack编译搭建：如何用Webpack初构建Vue 3项目？","content":"<p>你好，我是杨文坚。</p><p>看到这个题目，你是不是觉得有点疑惑？明明Vue.js 3官方标配的编译工具是Vite，为什么我不先讲Vue.js 3结合Vite进行项目编译，而是先教你用Webpack编译Vue.js 3项目呢？</p><p>这是因为，我们这个课程是要做一个“企业级项目的实战”，而在企业技术开发中，第一要素就是保证功能的稳定性和可用性。在这一点上，Webpack比Vite有更大优势。它发布于2013年，拥有较好的技术生态，基本上，你用Webpack项目打包构建遇到任何问题，都能在网上找到相关场景的直接解决方案或者间接解决思路。而Vite比较年轻，在2020年才发布正式版，在技术生态的沉淀上并没有Webpack那么丰富。</p><p>所以，这一讲中，我们还是先来讲讲怎么用Webpack来编译Vue.js 3项目。开始之前，我们先来看看除了Webpack生态更稳定的因素外，Webpack和Vite究竟还有什么区别，让你对这两个工具有更深入的了解。</p><h2>Webpack和Vite有什么区别？</h2><p>我在研究技术的时候经常在想，脱离技术的定位来对比技术好坏都是耍流氓。因为每一种流行的技术之所以被人接纳，肯定是有其诞生的定位和开发者的使用定位。所以我们要对比Webpack和Vite，最重要是<strong>对比这两种技术工具的定位</strong>。</p><!-- [[[read_end]]] --><p>Webpack和Vite的定位是不一样的，这个连Vite的作者尤雨溪老师都曾经在知乎上回应过。Vite定位是Web“开发工具链”，其内置了一些打包构建工具，让开发者开箱即用，例如预设了Web开发模式直接使用ESM能力，开发过程中可以通过浏览器的ESM能力按需加载当前开发页面的相关资源。</p><p>然而，Webpack定位是构建“打包工具”，面向的是前端代码的编译打包过程。Webpack能力很单一，就是提供一个打包构建的能力，如果有特定的构建需要，必须让开发者来选择合适的Loader和Plugin进行组合配置，达到最终的想要的打包效果。比如 Webpack没有内置开发服务，需要引入 webpack-dev-server 才能有开发服务的能力，这个对比Vite就不一样，VIte就直接内置了一个开发服务。</p><p>那么，两者的技术能力或者功能有什么异同点呢？</p><p>其实这两个工具能提供的技术能力有很大的重叠度或者相似度，基本就是对前端代码进行打包构建处理。区别是Vite内置了很多工具，可以减少很多配置工作量；而Webpack只是简单的打包工具架子，需要开发者一开始准备很多配置处理，不像Vite那样能开箱即用，需要花些功夫进行选择Webpack的Loader和Plugin进行配置。</p><p>不过，在对于企业级项目开发中，技术的稳定性当然是大于一切的，你会发现花上半天时间配置一下打包工具，可以减少后续遇到问题的烦恼。</p><p>那么，既然Webpack不能像Vite那样子开箱即用的话，我们现在就来学习一下，用Webpack搭建Vue.js 3项目需要有什么步骤。</p><h2>如何用Webpack搭建Vue.js 3项目?</h2><p>用Webpack来搭建Vue.js 3项目，我们可以将最初始的项目搭建分成这几个步骤：</p><ol>\n<li>项目目录和源码准备；</li>\n<li>安装依赖；</li>\n<li>配置Webpack的Vue.js 3编译配置；</li>\n<li>执行Vue.js 3编译。</li>\n</ol><p><strong>第一步就是要先准备好项目目录</strong>，如下所示：</p><pre><code class=\"language-shell\">.\n├── dist/*\n├── package.json\n├── src\n│&nbsp; &nbsp;├── app.vue\n│&nbsp; &nbsp;└── index.js\n└── webpack.config.js\n</code></pre><p>我给你从上到下介绍一下这个项目目录的结构：</p><ul>\n<li>dist， 是一个文件夹，为Vue.js 3代码的编译结果目录，最后的编译结果都是前端静态资源文件，例如JavaScript、CSS和HTML等文件；</li>\n<li>package.json，是一个JSON文件，为Node.js项目的声明文件，声明了模块依赖、脚本定义和版本名称等内容；</li>\n<li>src，是一个文件夹，为Vue.js3项目的源码目录，主要开发的代码内容都放在这个文件夹里；</li>\n<li>webpack.config.js，是一个JavaScript文件，是本次Vue.js 3项目核心内容，主要是Webpack配置代码。</li>\n</ul><p>我们就在src的文件夹里新增两个Vue.js 3的源码内容，为后续编译做准备。这里是 src/app.vue 的源码内容：</p><pre><code class=\"language-xml\">&lt;template&gt;\n  &lt;div class=\"demo\"&gt;\n    &lt;div class=\"text\"&gt;Count: {{state.count}}&lt;/div&gt;\n    &lt;button class=\"btn\" @click=\"onClick\"&gt;Add&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\n  import { reactive } from 'vue';\n  const state = reactive({\n    count: 0\n  });\n  const onClick = () =&gt; {\n    state.count ++;\n  }\n&lt;/script&gt;\n\n&lt;style&gt;\n.demo {\n  width: 200px;\n  padding: 10px;\n  box-shadow: 0px 0px 9px #00000066;\n  text-align: center;\n}\n.demo .text {\n  font-size: 28px;\n  font-weight: bolder;\n  color: #666666;\n}\n.demo .btn {\n  font-size: 20px;\n  padding: 0 10px;\n  height: 32px;\n  min-width: 80px;\n  cursor: pointer;\n} \n&lt;/style&gt;\n\n</code></pre><p>以下是 src/index.js 项目的入口文件源码：</p><pre><code class=\"language-javascript\">import { createApp } from 'vue';\nimport App from './app.vue';\n\nconst app = createApp(App);\napp.mount('#app');\n</code></pre><p>当你完成了步骤一的项目目录的结构设计和源码准备后，就可以进行<strong>第二步，安装依赖的npm模块了，也就是安装项目所需要的npm模块</strong>。</p><p>这里的npm模块分成两种，一种是源码所在的npm模块，另外一种是开发过程中所需要的npm模块。两种npm模块的安装方式都一样，区别就是安装命令要带上不同参数。</p><p>以下是安装源码依赖的npm模块：</p><pre><code class=\"language-shell\">npm i --save vue\n</code></pre><p>这里源码代码依赖是 Vue.js 的官方源码库，这时候会自动增加依赖声明到 package.json文件的dependencies字段里。</p><pre><code class=\"language-json\">{\n  \"dependencies\": {\n    \"vue\": \"^3.2.37\"\n  }\n}\n</code></pre><p>以下是安装项目开发过程中依赖的npm模块：</p><pre><code class=\"language-shell\">npm i --save-dev css-loader mini-css-extract-plugin vue-loader webpack webpack-cli\n</code></pre><p>这里是Webpack编译Vue.js 3代码所需要的开发依赖，这时候也会自动新增依赖声明到 package.json文件的devDependencies字段里，跟源码的依赖区分开来。</p><pre><code class=\"language-json\">{\n  \"devDependencies\": {\n    \"css-loader\": \"^6.7.1\",\n    \"mini-css-extract-plugin\": \"^2.6.1\",\n    \"vue-loader\": \"^17.0.0\",\n    \"webpack\": \"^5.74.0\",\n    \"webpack-cli\": \"^4.10.0\"\n  }\n}\n</code></pre><p><strong>当你完成了步骤二的项目依赖安装后，接下来就是这节课配置的关键内容，步骤三的Webpack配置。</strong>在此，我先将完整的Webpack配置内容贴出来，后面再跟你详细讲解每个配置项的作用，你先看看完整的代码：</p><pre><code class=\"language-javascript\">const path = require('path');\nconst { VueLoaderPlugin } = require('vue-loader/dist/index')\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\n\nmodule.exports = {\n  mode: 'production',\n  entry: {\n    'index' : path.join(__dirname, 'src/index.js'),\n  },\n  output: {\n    path: path.join(__dirname, 'dist'),\n    filename: '[name].js',\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.vue$/,\n        use: [\n          'vue-loader'\n        ]\n      },\n      {  \n        test: /\\.(css|less)$/,\n        use: [\n          MiniCssExtractPlugin.loader,\n          'css-loader',\n        ]\n      },\n    ]\n  },\n  plugins: [\n    new VueLoaderPlugin(), \n    new MiniCssExtractPlugin({\n      filename: '[name].css'\n    })\n  ],\n  externals: {\n    'vue': 'window.Vue'\n  }\n}\n</code></pre><p>我们从上到下一步步分析。</p><p>首先看mode，这是声明了Webpack的打包模式是生产的编译模式。这里一般有两种选项，生产（production）和开发（development）模式，这两种模式是企业或者开源项目约定俗成的必备模式。</p><p>第二个entry，是声明了Webpack要执行打包构建编译时候从哪个文件开始编译的“入口文件”。而接下来的output，是声明Webpack编译的出口文件，也就是编译结果要放在哪个目录下的哪个文件里，这里我就对应地配置出口目录配置在 dist文件夹里。</p><p>再接着是module，这是Webpack打包构建的核心所在，你可以根据自己项目的打包需要，选择对应的打包加载器（Loader）来处理指定的打包文件。这里我们选择了vue-loader和css-loader 就是为了解决项目里Vue.js3源码和Vue.js3源码里的CSS代码的打包编译处理。</p><p>然后是plugins，这个是Webpack的插件配置，主要是贯穿Webpack的整个打包的生命周期。这里就需要Vue的加载插件（VueLoaderPlugin）来辅助你在编译Vue.js 3代码时候做相关的编译处理。同时，我们这里也用了CSS的分离插件（MiniCssExtractPlugin），主要是在Webpack打包的生命周期过程中将Vue.js 3源码里的CSS代码分离出单独的CSS文件。</p><p>最后是externals，这个是声明在Webpack打包编译过程中，有哪些源码依赖的npm模块需要“排除打包”处理，也就是不做打包整合处理。我们这里就是将Vue.js 3的运行源码进行“排除打包”处理，让代码最终代码依赖的Vue.js 3运行时，从window.Vue全局变量获取。这么做的好处就是通过减少打包的内容来缩短打包时间。</p><p><strong>完成以上的三个步骤，接下来就进入最终步骤了，也就是编译脚本配置。</strong>这里我们需要在package.json 里配置好执行脚本，如下所示：</p><pre><code class=\"language-json\">{\n  \"scripts\": {\n    \"build\": \"webpack -c ./webpack.config.js\"\n  }\n}\n</code></pre><p>这个编译脚本可以让你在当前目录的命令行工具里，直接执行 npm run build 就可以触发编译操作。执行编译脚本命令后结果如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/bb/22/bb44c19fddd5e69aaa758a66190e5922.png?wh=1896x1288\" alt=\"图片\"></p><p>执行完代码后，会在当前项目的 dist 目录文件夹里，生成最终的Vue.js 3编译结果代码 index.js 和 index.css 文件。其中index.js文件就是核心的Vue.js3源码文件的编译结果，结果如下：</p><pre><code class=\"language-javascript\">(()=&gt;{\"use strict\";const e=window.Vue,t={class:\"demo\"},n={class:\"text\"},c={__name:\"app\",setup(c){const o=(0,e.reactive)({count:0}),a=()=&gt;{o.count++};return(c,s)=&gt;((0,e.openBlock)(),(0,e.createElementBlock)(\"div\",t,[(0,e.createElementVNode)(\"div\",n,\"Count: \"+(0,e.toDisplayString)(o.count),1),(0,e.createElementVNode)(\"button\",{class:\"btn\",onClick:a},\"Add\")]))}};(0,e.createApp)(c).mount(\"#app\")})();\n</code></pre><p>你可以从上述代码中看到，由于我把vue模块给external出来成为window.Vue，让编译后的代码变得更加精简。后续代码运行的时候，我们只要在页面加入 Vue.js 3的全局变量脚本，就可以把 node_modules/vue/dist/vue.runtion.global.js 这个文件复制出来引用了。</p><p>好了，到这个点，我们终于实现了最基础的Webpack编译Vue.js 3项目。不过，上述的内容只是开始。不知道你有没有发现，上述配置过程只是处理了代码编译，但是实际做项目我们需要一边写代码一边实时编译源码调试，还要实时显示效果，这不仅仅只做一次性的编译操作，而是要分成多种编译模式。</p><p>通常我们做企业级前端项目时候，最基本的编译模式有开发模式和生产模式，接下来我们就来讲解一下Webpack开发模式和生产模式的配置。</p><h2>Webpack开发模式和生产模式</h2><p>在讲解如何配置Webpack开发模式和生产模式之前，我们要先了解一个概念，Node.js进程的环境变量概念。</p><p>Node.js在执行命令脚本时候，如果带上参数 NODE_ENV=production，完整的脚本命令是 NODE_ENV=production webpack -c ./webpack.config.js 。那么 webpack.config.js 文件在执行的时候，可以在 &nbsp;process.env 拿到环境变量 NODE_ENV，也就是可以拿到 process.env.NODE_ENV = production。</p><p>这个环境变量有什么作用呢？它可以让我们设置不同环境变量来执行同一份配置Webpack.config.js 配置文件，触发不同的编译模式。</p><p>到这里，你应该知道为什么我一开始要讲解Node.js进程的环境变量这个概念了吧？我们就是要利用进程环境变量，在webpack.config.js配置文件里，根据不同环境变量值判断和处理不同模式的编译。</p><p>现在我们就可以开始进入Webpack的开发模式和生产模式的讲解了。</p><h3>开发模式处理</h3><p>开发模式和生产模式是基于不同进程环境变量做区分的，所以他们的执行命令脚本就不一样。这里我们就可以基于上述的package.json做一下执行脚本的更改，如下所示：</p><pre><code class=\"language-json\">{\n  \"scripts\": {\n    \"dev\": \"NODE_ENV=development webpack serve -c ./webpack.config.js\",\n    \"build\": \"NODE_ENV=production webpack -c ./webpack.config.js\"\n  }\n}\n</code></pre><p>你有没有发现，这里的开发模式（dev），是不是多了个 serve 的子命令？这个就是我们要讲的在开发模式下，需要一个开发服务来让编译的代码能在浏览器中访问。这个时候，我们就需要安装Webpack开发服务的依赖模块 webpack-dev-server ：</p><pre><code class=\"language-shell\">npm i --save-dev webpack-dev-server\n</code></pre><p>你安装后，要在Webpack配置文件添加对应的服务配置：</p><pre><code class=\"language-javascript\">{\n  // 其它 Webpack配置代码\n  devServer: {\n    static: {\n      directory: path.join(__dirname),\n    },\n    compress: true,\n    port: 6001,\n    hot: false,\n    compress: false,\n  }\n  // 其它 Webpack配置代码\n}\n</code></pre><p>在开发模式下，我们还要断点到源码指定位置的内容，这里就需要新增一个配置内容，也就是sourceMap的配置，配置代码如下所示：</p><pre><code class=\"language-javascript\">{\n  // 其它 Webpack配置代码\n  devtool: 'inline-cheap-module-source-map', \n  // 其它 Webpack配置代码\n}\n</code></pre><p>这里的devtool还有其它的选项，详情你可以参考下<a href=\"https://webpack.js.org/configuration/devtool/#devtool\">官方文档</a>。</p><p>另外，开发过程中还需要HTML页面来承载运行编译后的JavaScript和CSS代码。这里你需要在项目的根目录下新创建一个HTML文件 index.html，用于访问处理，同时还需要让 webpack-dev-server知道它应该访问哪个HTML文件的配置处理。为此，你需要先配置好服务的访问页面。</p><p>配置服务的访问页面，首先你要安装 html-webpack-plugin 插件来处理HTML页面：</p><pre><code class=\"language-xml\">npm i --save-dev html-webpack-plugin\n</code></pre><p>再配置 html-webpack-plugin 到 webpack.confg.js 文件中：</p><pre><code class=\"language-javascript\">{\n  // 其它 Webpack配置代码\n  plugins: [\n    new HtmlWebpackPlugin({\n      title: 'Hello Vue',\n      filename: 'index.html',\n      template:'./index.html',\n      minify: false,\n      inject: false,\n      templateParameters: {\n        publicPath: path.join(__dirname),\n        js: [\n          './node_modules/vue/dist/vue.runtime.global.js',\n          './index.js'\n        ],\n        css: [\n          './index.css'\n        ],\n      },\n    })\n  ]\n  // 其它 Webpack配置代码\n}\n</code></pre><p>然后再配置HTML模板文件：</p><pre><code class=\"language-xml\">&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"&lt;%= htmlWebpackPlugin.options.templateParameters.css[0] %&gt;\" /&gt;\n    &lt;script src=\"&lt;%= htmlWebpackPlugin.options.templateParameters.js[0] %&gt;\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"app\"&gt;&lt;/div&gt;\n  &lt;/body&gt;\n  &lt;script src=\"&lt;%= htmlWebpackPlugin.options.templateParameters.js[1] %&gt;\"&gt;&lt;/script&gt;\n&lt;/html&gt;\n</code></pre><p>至此，你就可以愉快地使用开发模式进行Vue.js 3的项目开发了，执行以下命令：</p><pre><code class=\"language-shell\">npm run dev\n</code></pre><p>再访问命令行所提示的访问链接，你就可以在浏览器预览到实际代码渲染结果了。</p><h3>生产模式处理</h3><p>好了，处理完开发模式后，我们接下来还要处理生产模式。</p><p>生产模式最重要的是<strong>代码编译完后要进行压缩处理，减少体积</strong>。这里我们就需要压缩JavaScript和CSS的结果代码，你可以选择安装Webpack生态里的压缩代码插件，具体有压缩JavaScript代码的插件TerserPlugin和压缩CSS代码的插件 CssMinimizerPlugin，这几个插件是Webpack官方文档的推荐插件，可以执行如下安装命令：</p><pre><code class=\"language-shell\">npm i --save-dev css-minimizer-webpack-plugin terser-webpack-plugin \n</code></pre><p>然后再进行webpack.config.js 文件的配置：</p><pre><code class=\"language-javascript\">{\n  // 其它 Webpack配置代码\n  optimization: {\n    minimizer: [\n      new TerserPlugin({}),\n      new CssMinimizerPlugin({}),\n    ],\n  },\n  // 其它 Webpack配置代码\n}\n</code></pre><p>如果这个时候，你还想把HTML模板在生产模式中都打印出来，可以这么配置处理：</p><pre><code class=\"language-javascript\">{\n  // 其它 Webpack配置代码\n  plugins: [\n    new HtmlWebpackPlugin({\n      title: 'Hello Vue',\n      filename: 'index.html',\n      template:'./index.html',\n      minify: false,\n      inject: false,\n      templateParameters: {\n        publicPath: path.join(__dirname),\n        js: [\n          'https://unpkg.com/vue@3.2.37/dist/vue.runtime.global.js',\n          './index.js'\n        ],\n        css: [\n          './index.css'\n        ],\n      },\n    })\n  ]\n  // 其它 Webpack配置代码\n}\n</code></pre><p>注意了，这里的 <a href=\"https://unpkg.com/vue@3.2.37/dist/vue.runtime.global.js\">https://unpkg.com/vue@3.2.37/dist/vue.runtime.global.js</a> 只是临时模拟CDN的Vue.js 3运行时文件，实际企业级项目要换成公司内部的CDN资源。</p><p>好了，我这里就已经把Webpack编译Vue.js3项目的生产模式和开发模式都配置好了。不知道你有没有发现，两种模式有很多配置是重叠的，这个时候就需要用到我们刚刚提到的Node.js进程环境变量来做区分判断处理，同时可以加上一个 webpack-merge 来辅助处理配置的合并。</p><p>最终配置结果如下所示：</p><pre><code class=\"language-javascript\">const path = require('path');\nconst webpackMerge = require('webpack-merge').default;\nconst { VueLoaderPlugin } = require('vue-loader/dist/index')\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nconst CssMinimizerPlugin = require(\"css-minimizer-webpack-plugin\");\nconst TerserPlugin = require(\"terser-webpack-plugin\");\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\nconst baseConfig = {\n  mode: process.env.NODE_ENV,\n  entry: {\n    'index' : path.join(__dirname, 'src/index.js'),\n  },\n  output: {\n    path: path.join(__dirname, 'dist'),\n    filename: '[name].js',\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.vue$/,\n        use: [\n          'vue-loader'\n        ]\n      },\n      {  \n        test: /\\.(css|less)$/,\n        use: [\n          MiniCssExtractPlugin.loader,\n          'css-loader',\n        ]\n      },\n      { \n        test: /\\.(png|svg|jpg|jpeg|gif)$/i,\n        type: 'asset/resource',\n      }\n    ]\n  },\n  plugins: [\n    new VueLoaderPlugin(), \n    new MiniCssExtractPlugin({\n      filename: '[name].css'\n    }),  \n  ],\n  externals: {\n    'vue': 'window.Vue'\n  }\n}\n\nif (process.env.NODE_ENV === 'development') {\n  config = webpackMerge(baseConfig, {\n    devtool: 'inline-cheap-module-source-map', \n    devServer: {\n      static: {\n        directory: path.join(__dirname),\n      },\n      port: 6001,\n      hot: false,\n      compress: false,\n    },\n    plugins: [\n      new HtmlWebpackPlugin({\n        title: 'Hello Vue',\n        filename: 'index.html',\n        template:'./index.html',\n        minify: false,\n        inject: false,\n        templateParameters: {\n          publicPath: path.join(__dirname),\n          js: [\n            './node_modules/vue/dist/vue.runtime.global.js',\n            './index.js'\n          ],\n          css: [\n            './index.css'\n          ],\n        },\n      })\n    ]\n  })\n} else {\n  config = webpackMerge(baseConfig, {\n    optimization: {\n      minimizer: [\n        new TerserPlugin({}),\n        new CssMinimizerPlugin({}),\n      ],\n    },\n    plugins: [\n      new HtmlWebpackPlugin({\n        title: 'Hello Vue',\n        filename: 'index.html',\n        template:'./index.html',\n        minify: false,\n        inject: false,\n        templateParameters: {\n          publicPath: path.join(__dirname),\n          js: [\n            'https://unpkg.com/vue@3.2.37/dist/vue.runtime.global.js',\n            './index.js'\n          ],\n          css: [\n            './index.css'\n          ],\n        },\n      })\n    ]\n  })\n}\n\nmodule.exports = config;\n</code></pre><p>上述的配置内容就是本次Vue.js 3项目配置Webpack编译的核心代码，涵盖了开发模式和生产模式。现在你应该已经比较清晰地了解到一个完整的Vue.js 3项目的Webpack配置流程了，接下来就愉快地进行Vue.js 3代码的开发吧！</p><h2>总结</h2><p>这节课我们讲了这么多关于Webpack的Vue.js 3项目编译配置的知识，核心展示了企业级项目是怎么做编译配置的。</p><p>用Webpack搭建Vue.js 3项目，主要包括配置项目目录、根据要求安装依赖（Plugin和Loader）、开发模式和生产模式的设置这几个步骤，其中你要特别注意开发模式和生产模式的配置复用和配置隔离。</p><p>我们前面也说了，我们选择Webpack，是为了面向企业级项目的学习目标考虑。目前我所接触到的大厂，主流的构建配置还是Webpack，除了生态丰富的原因外，还有一点是企业中很多历史项目都是用Webpack进行构建的，形成了一个比较稳定的代码传承。但是，你也不能因为这样就忽略了Vite这个Vue.js 3官方的“亲儿子”技术工具。</p><p>你需要的是举一反三，用Webpack生产和开发模式配置，类比学习Vite相关的技术知识点，因为同类型的技术基本都是相同的。例如，本节课提到生产和开发模式，就不是Webpack独有的概念，是大部分构建工具都有的概念，Vite也有相关概念。不仅仅是这节课，我希望你后续技术学习都要学会举一反三，互相比对。</p><h2>思考题</h2><p>Webpack从诞生到现在这么久，核心也迭代了很多大版本，那不同版本在打包构建上有什么差异吗？</p><p>期待你的分享。如果今天的课程让你有所收获，欢迎你把文章分享给有需要的朋友，我们下节课再见！</p><h3><a href=\"https://github.com/FE-star/vue3-course/tree/main/chapter/02\">完整的代码在这里</a></h3>","neighbors":{"left":{"article_title":"01｜编译和非编译模式：离开Vue工具，你还知道怎么用Vue 3吗？","id":605412},"right":{"article_title":"03｜从Rollup到Vite：如何用Vite构建你的Vue 3项目？","id":607039}},"comments":[{"had_liked":false,"id":363962,"user_name":"Geek_b640fe","can_delete":false,"product_type":"c1","uid":3227939,"ip_address":"中国香港","ucode":"382E72C91230CA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Pk7HVX99cBlSOicLoa8KN81xqHa4YzRQsu5PAGTlOJgvChtl7T6BE6gTOhiaVJIcNVxIsRO1libPjdkZ6Sq8Qlp1g/132","comment_is_top":false,"comment_ctime":1670396892,"is_pvip":false,"replies":[{"id":132483,"content":"点赞","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1671036279,"ip_address":"中国香港","comment_id":363962,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311101,"comment_content":"‘NODE_ENV’ 不是内部或外部命令，也不是可运行的程序或批处理文件\nwindows 环境必须安装 cross-env 模块，并在启动命令前安装\nnpm i -D cross-env\n\n    &quot;scripts&quot;: {\n        &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack serve -c .&#47;webpack.config.js&quot;,\n        &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack -c .&#47;webpack.config.js&quot;\n    },","like_count":9,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596506,"discussion_content":"点赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671036279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"中国香港","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363618,"user_name":"ZR-rd","can_delete":false,"product_type":"c1","uid":2076199,"ip_address":"江苏","ucode":"427E69255F30D8","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ae/27/74828c37.jpg","comment_is_top":false,"comment_ctime":1669881922,"is_pvip":false,"replies":[{"id":132154,"content":"通过external和cdn来导入库可以利用缓存，显著减少页面需要加载的内容","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1669920719,"ip_address":"江苏","comment_id":363618,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311101,"comment_content":"老师，大厂一般都是使用 CDN 来导入 Vue 等第三方库的吗？为什么不是直接打包到 bundle 中呢？这样有什么优缺点呢？","like_count":4,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595309,"discussion_content":"通过external和cdn来导入库可以利用缓存，显著减少页面需要加载的内容","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669920720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363018,"user_name":"风太大太大","can_delete":false,"product_type":"c1","uid":1368376,"ip_address":"江苏","ucode":"E0221487898D62","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/dCfVz7wIUT4fM7zQO3gIwXo3BGodP5FJuCdMxobZ5dXpzBeTXiaB3icoFqj22EbIGCu1xxd1FLo9xic0a2pGnunibg/132","comment_is_top":false,"comment_ctime":1669166952,"is_pvip":false,"replies":[{"id":132141,"content":"点赞","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1669877623,"ip_address":"江苏","comment_id":363018,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311101,"comment_content":"Webpack 3 4 5每个版本差异还挺大的，plugin变更，语法变更，对缓存的使用程度，打包构建加速那个版本的方案都不同，版本越高越方便","like_count":4,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595244,"discussion_content":"点赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669877623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363823,"user_name":"丫头","can_delete":false,"product_type":"c1","uid":1153387,"ip_address":"广东","ucode":"435D2E19E291C8","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/6b/77bb8501.jpg","comment_is_top":false,"comment_ctime":1670228041,"is_pvip":false,"replies":[{"id":135006,"content":"您好，你的这个文件思路也是常见的方案，能清晰地隔离出不同环境的编译脚本。","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1678626332,"ip_address":"浙江","comment_id":363823,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100311101,"comment_content":"webpack.default.js\nwebpack.dev.js\nwebpack.prod.js\n不同环境独立文件，会不会更清晰些","like_count":2,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608739,"discussion_content":"您好，你的这个文件思路也是常见的方案，能清晰地隔离出不同环境的编译脚本。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678626332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596503,"discussion_content":"可以的，一般差异比较大的时候的确会分文件","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671036032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"中国香港","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1149143,"avatar":"https://static001.geekbang.org/account/avatar/00/11/88/d7/43cf7b60.jpg","nickname":"Cc°°","note":"","ucode":"6C88E8D2C4622D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":596136,"discussion_content":"很像springboot多环境配置文件😋","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670683115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366497,"user_name":"健牌哥.","can_delete":false,"product_type":"c1","uid":1374132,"ip_address":"广东","ucode":"671B0247FFF223","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/b4/d7a89271.jpg","comment_is_top":false,"comment_ctime":1673856694,"is_pvip":false,"replies":[{"id":134970,"content":"您好，static.directory 指的是devServer的静态资源服务，不会自动编译node_modules里的vue代码。入口的index.html文件尽量不要放在静态文件里中使用。","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1678611607,"ip_address":"浙江","comment_id":366497,"utype":1}],"discussion_count":1,"race_medal":1,"score":2,"product_id":100311101,"comment_content":"dev配置的devServer把static.directory修改成 path.join(__dirname, &#39;public&#39;)，本地node_modules的vue运行时文件就加载不成功了，index.html已放在public文件夹里。请问下这个怎么解决呢？","like_count":0,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608687,"discussion_content":"您好，static.directory 指的是devServer的静态资源服务，不会自动编译node_modules里的vue代码。入口的index.html文件尽量不要放在静态文件里中使用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678611607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364918,"user_name":"定宇","can_delete":false,"product_type":"c1","uid":1354764,"ip_address":"中国台湾","ucode":"4553609D96BD10","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1ornnGqSaTxRdbxhUHibeygI3PLtDXAH5GRhRJ286Sbtz7YyGFUHobN2EgiaLhtWn2dLReBRBU1n577DWqrsaBBw/132","comment_is_top":false,"comment_ctime":1671697171,"is_pvip":false,"replies":[{"id":134982,"content":"您好，HtmlWebpackPlugin 会根据hash值变化的，具体可以参考官方文章 https:&#47;&#47;webpack.js.org&#47;plugins&#47;html-webpack-plugin&#47;","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1678614124,"ip_address":"浙江","comment_id":364918,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311101,"comment_content":"想問一下，如果在webpack輸出檔案有加hash值的話\nex:\n```\noutput: {\n      path: path.join(__dirname, &#39;..&#47;dist&#39;),\n      publicPath: &#39;&#47;&#39;,\n      filename: &#39;[name].[hash].js&#39;,\n}\n```\n\n在HtmlWebpackPlugin那邊要怎麼設置呢？","like_count":0,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608699,"discussion_content":"您好，HtmlWebpackPlugin 会根据hash值变化的，具体可以参考官方文章 https://webpack.js.org/plugins/html-webpack-plugin/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678614124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":364794,"user_name":"我只想要简单的小幸福👣","can_delete":false,"product_type":"c1","uid":1392576,"ip_address":"天津","ucode":"A40F550CB7DBBD","user_header":"https://static001.geekbang.org/account/avatar/00/15/3f/c0/34453755.jpg","comment_is_top":false,"comment_ctime":1671506237,"is_pvip":false,"replies":[{"id":134989,"content":"您好，源码是放在GitHub仓库里的，是能打开的，可能你遇到网络问题。","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1678623885,"ip_address":"浙江","comment_id":364794,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100311101,"comment_content":"完整代码地址打不开，能换一个别的地址吗","like_count":0,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608717,"discussion_content":"您好，源码是放在GitHub仓库里的，是能打开的，可能你遇到网络问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678623885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363789,"user_name":"阿阳","can_delete":false,"product_type":"c1","uid":1165817,"ip_address":"江苏","ucode":"20A35FB86B1C5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c9/f9/39492855.jpg","comment_is_top":false,"comment_ctime":1670166877,"is_pvip":false,"replies":[{"id":135008,"content":"您好，首先css-loader和less-loader的功能不一样。\n\nless-loader是将less代码转成css代码，最后将css代码交给css-loader。\n\ncss-loader是将css代码进行解析处理，例如解析里面嗯@import依赖等等，最后编译成字符，和输出整体的css内容。","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1678626465,"ip_address":"浙江","comment_id":363789,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100311101,"comment_content":"在 test: &#47;\\.(css|less)$&#47;中，less文件也能直接用css-loader进行处理嘛？不是需要用less-loader进行处理么？","like_count":0,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608741,"discussion_content":"您好，首先css-loader和less-loader的功能不一样。\n\nless-loader是将less代码转成css代码，最后将css代码交给css-loader。\n\ncss-loader是将css代码进行解析处理，例如解析里面嗯@import依赖等等，最后编译成字符，和输出整体的css内容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678626465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1657965,"avatar":"https://static001.geekbang.org/account/avatar/00/19/4c/6d/d7af1a94.jpg","nickname":"Jumping^O^Andrew","note":"","ucode":"DC693D7413FDC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647696,"discussion_content":"那请问cssloader为啥正则要匹配less?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720454717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363776,"user_name":"阿阳","can_delete":false,"product_type":"c1","uid":1165817,"ip_address":"江苏","ucode":"20A35FB86B1C5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c9/f9/39492855.jpg","comment_is_top":false,"comment_ctime":1670160046,"is_pvip":false,"replies":[{"id":135009,"content":"您好，你提到的Windows环境的NODE_ENV配置，是需要用到cross-env这个模块来辅助处理的。由于我是用MacOS系统，能直接配置NODE_ENV，所以没用到cross-env。","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1678626569,"ip_address":"浙江","comment_id":363776,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100311101,"comment_content":"windows环境下，设置环境变量NODE_ENV需要用到cross-env这个包吧？","like_count":0,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608742,"discussion_content":"您好，你提到的Windows环境的NODE_ENV配置，是需要用到cross-env这个模块来辅助处理的。由于我是用MacOS系统，能直接配置NODE_ENV，所以没用到cross-env。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678626569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595521,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670178077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363730,"user_name":"莫比斯","can_delete":false,"product_type":"c1","uid":1039549,"ip_address":"北京","ucode":"FC467871C8CA7D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dc/bd/ea9c16b8.jpg","comment_is_top":false,"comment_ctime":1670071265,"is_pvip":false,"replies":[{"id":135010,"content":"您好，谢谢提醒，这个是代码小遗漏，的确需要 let 或 var 来声明，要不然容易造成“变量提升”","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1678626591,"ip_address":"浙江","comment_id":363730,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100311101,"comment_content":"还有老师，我想补充一点点，在line 50 if语句前，可以申明config，let config；","like_count":0,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":608743,"discussion_content":"您好，谢谢提醒，这个是代码小遗漏，的确需要 let 或 var 来声明，要不然容易造成“变量提升”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678626591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"浙江","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1039549,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/dc/bd/ea9c16b8.jpg","nickname":"莫比斯","note":"","ucode":"FC467871C8CA7D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":619329,"discussion_content":"老师好谦虚，谢谢你的教授和分享❤️","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1684990164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":608743,"ip_address":"北京","group_id":0},"score":619329,"extra":""}]},{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595523,"discussion_content":"good，看来这个配置我还要改一下，感谢🙏提醒","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1670178369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363390,"user_name":"不是牛仔但很忙ᥬ🙂᭄","can_delete":false,"product_type":"c1","uid":3227910,"ip_address":"北京","ucode":"CAB992CAE6E434","user_header":"https://static001.geekbang.org/account/avatar/00/31/41/06/58a4cb03.jpg","comment_is_top":false,"comment_ctime":1669619259,"is_pvip":false,"replies":[{"id":132117,"content":"极客的专栏都是音频+文字喔～","user_name":"编辑回复","user_name_real":"编辑","uid":2547771,"ctime":1669725434,"ip_address":"北京","comment_id":363390,"utype":2}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311101,"comment_content":"这个课是纯音频课？没有视频？","like_count":0,"discussions":[{"author":{"id":2547771,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e0/3b/8ec916b2.jpg","nickname":"多少","note":"","ucode":"0A6EF7AA6E4BB7","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595096,"discussion_content":"极客的专栏都是音频+文字喔～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669725434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363013,"user_name":"joker","can_delete":false,"product_type":"c1","uid":1501088,"ip_address":"江苏","ucode":"4305206A1FE5EC","user_header":"https://static001.geekbang.org/account/avatar/00/16/e7/a0/9a962a74.jpg","comment_is_top":false,"comment_ctime":1669156178,"is_pvip":false,"replies":[{"id":132139,"content":"会的","user_name":"作者回复","user_name_real":"编辑","uid":3217031,"ctime":1669877440,"ip_address":"江苏","comment_id":363013,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100311101,"comment_content":"Vite以后会讲吗","like_count":0,"discussions":[{"author":{"id":3217031,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TZnA0PlXExlp9byxOxCeOG6ia0ykwfpxqAq2vslTzL1z5ibTBsgf1nYx0bUXgrOTnSOnmdXQZZibYx9tRSPHFjibPQ/132","nickname":"文坚老师","note":"","ucode":"4E0C838B2A3725","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":595242,"discussion_content":"会的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669877440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":363213,"user_name":"WGH丶","can_delete":false,"product_type":"c1","uid":1922568,"ip_address":"广东","ucode":"02E43256770C62","user_header":"https://static001.geekbang.org/account/avatar/00/1d/56/08/bd75f114.jpg","comment_is_top":false,"comment_ctime":1669366390,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100311101,"comment_content":"推荐资料：《webpack实战：入门、进阶与调优》。","like_count":7},{"had_liked":false,"id":393793,"user_name":"ifelse","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"浙江","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1724908760,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":3,"score":3,"product_id":100311101,"comment_content":"学习打卡","like_count":0},{"had_liked":false,"id":387282,"user_name":"文件","can_delete":false,"product_type":"c1","uid":2706183,"ip_address":"中国香港","ucode":"4190650D91CA5D","user_header":"https://static001.geekbang.org/account/avatar/00/29/4b/07/33bc5bbd.jpg","comment_is_top":false,"comment_ctime":1706845869,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100311101,"comment_content":"这里的全局变量window.Vue是什么，求解答。","like_count":0,"discussions":[{"author":{"id":1657965,"avatar":"https://static001.geekbang.org/account/avatar/00/19/4c/6d/d7af1a94.jpg","nickname":"Jumping^O^Andrew","note":"","ucode":"DC693D7413FDC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":647690,"discussion_content":"应该是cdn引入vuejs后，vue挂到了window上","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1720447440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":377117,"user_name":"null","can_delete":false,"product_type":"c1","uid":1023997,"ip_address":"辽宁","ucode":"27AB87F1DEB3FF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/fd/bb79fa8d.jpg","comment_is_top":false,"comment_ctime":1687941525,"is_pvip":true,"replies":null,"discussion_count":1,"race_medal":0,"score":3,"product_id":100311101,"comment_content":"老师好，我按文档中的配置自己写了一遍，根据git上完整代码补全了 webpack.config 的配置，启动后报错：&quot;Cannot read properties of undefined (reading &#39;createApp&#39;)&quot;，打开network看到 vue.global.js也加载成功了，不知道是什么原因","like_count":0,"discussions":[{"author":{"id":3253409,"avatar":"https://static001.geekbang.org/account/avatar/00/31/a4/a1/6efba58f.jpg","nickname":"袋鱼🐟不重","note":"","ucode":"63225BFC7B599B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":624144,"discussion_content":"检查一下webpack 配置，window.Vue","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1690254510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":369308,"user_name":"不曾相识","can_delete":false,"product_type":"c1","uid":1607957,"ip_address":"湖北","ucode":"0BEDA6BDCA5F56","user_header":"https://static001.geekbang.org/account/avatar/00/18/89/15/381ce65f.jpg","comment_is_top":false,"comment_ctime":1677383783,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100311101,"comment_content":"如果是webpack5, 可以 这样配置 --env NODE_ENV=production \n用:  const config = (env) =&gt; {\n  return 配置对象\n}","like_count":0}]}