{"id":89306,"title":"57 | å¥—è·¯ç¯‡ï¼šLinux æ€§èƒ½å·¥å…·é€ŸæŸ¥","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·æ¢³ç†äº†å¸¸è§çš„æ€§èƒ½ä¼˜åŒ–æ€è·¯ï¼Œå…ˆç®€å•å›é¡¾ä¸€ä¸‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä»ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºä¸¤ä¸ªè§’åº¦ï¼Œæ¥è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚</p><ul>\n<li>\n<p>ä»ç³»ç»Ÿçš„è§’åº¦æ¥è¯´ï¼Œä¸»è¦æ˜¯å¯¹ CPUã€å†…å­˜ã€ç½‘ç»œã€ç£ç›˜ I/O ä»¥åŠå†…æ ¸è½¯ä»¶èµ„æºç­‰è¿›è¡Œä¼˜åŒ–ã€‚</p>\n</li>\n<li>\n<p>è€Œä»åº”ç”¨ç¨‹åºçš„è§’åº¦æ¥è¯´ï¼Œä¸»è¦æ˜¯ç®€åŒ–ä»£ç ã€é™ä½ CPU ä½¿ç”¨ã€å‡å°‘ç½‘ç»œè¯·æ±‚å’Œç£ç›˜ I/Oï¼Œå¹¶å€ŸåŠ©ç¼“å­˜ã€å¼‚æ­¥å¤„ç†ã€å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹ç­‰ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„ååèƒ½åŠ›ã€‚</p>\n</li>\n</ul><p>æ€§èƒ½ä¼˜åŒ–æœ€å¥½é€æ­¥å®Œå–„ï¼ŒåŠ¨æ€è¿›è¡Œã€‚ä¸è¦è¿½æ±‚ä¸€æ­¥åˆ°ä½ï¼Œè€Œè¦é¦–å…ˆä¿è¯èƒ½æ»¡è¶³å½“å‰çš„æ€§èƒ½è¦æ±‚ã€‚æ€§èƒ½ä¼˜åŒ–é€šå¸¸æ„å‘³ç€å¤æ‚åº¦çš„æå‡ï¼Œä¹Ÿæ„å‘³ç€å¯ç»´æŠ¤æ€§çš„é™ä½ã€‚</p><p>å¦‚æœä½ å‘ç°å•æœºçš„æ€§èƒ½è°ƒä¼˜å¸¦æ¥è¿‡é«˜å¤æ‚åº¦ï¼Œä¸€å®šä¸è¦æ²‰è¿·äºå•æœºçš„æé™æ€§èƒ½ï¼Œè€Œè¦ä»è½¯ä»¶æ¶æ„çš„è§’åº¦ï¼Œä»¥æ°´å¹³æ‰©å±•çš„æ–¹æ³•æ¥æå‡æ€§èƒ½ã€‚</p><p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ€§èƒ½åˆ†æå’Œä¼˜åŒ–æ—¶ï¼Œå€ŸåŠ©åˆé€‚çš„æ€§èƒ½å·¥å…·ï¼Œå¯ä»¥è®©æ•´ä¸ªè¿‡ç¨‹äº‹åŠåŠŸå€ã€‚ä½ è¿˜è®°å¾—æœ‰å“ªäº›å¸¸ç”¨çš„æ€§èƒ½å·¥å…·å—ï¼Ÿä»Šå¤©ï¼Œæˆ‘å°±å¸¦ä½ ä¸€èµ·æ¢³ç†ä¸€ä¸‹å¸¸ç”¨çš„æ€§èƒ½å·¥å…·ï¼Œä»¥ä¾¿ä½ åœ¨éœ€è¦æ—¶ï¼Œå¯ä»¥è¿…é€Ÿæ‰¾åˆ°è‡ªå·±æƒ³è¦çš„ã€‚</p><h2>æ€§èƒ½å·¥å…·é€ŸæŸ¥</h2><p>åœ¨æ¢³ç†æ€§èƒ½å·¥å…·ä¹‹å‰ï¼Œé¦–å…ˆç»™ä½ æä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ï¼Œåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰éœ€è¦å»æŸ¥æ‰¾ã€æŒ‘é€‰æ€§èƒ½å·¥å…·å‘¢ï¼Ÿä½ å¯ä»¥å…ˆè‡ªå·±æƒ³ä¸€ä¸‹ï¼Œå†ç»§ç»­ä¸‹é¢çš„å†…å®¹ã€‚</p><p>å…¶å®åœ¨æˆ‘çœ‹æ¥ï¼Œåªæœ‰å½“ä½ æƒ³äº†è§£æŸä¸ªæ€§èƒ½æŒ‡æ ‡ï¼Œå´ä¸çŸ¥é“è¯¥æ€ä¹ˆåŠçš„æ—¶å€™ï¼Œæ‰ä¼šæƒ³åˆ°ï¼Œâ€œè¦æ˜¯æœ‰ä¸€ä¸ªæ€§èƒ½å·¥å…·é€ŸæŸ¥è¡¨å°±å¥½äº†â€è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœå·²çŸ¥ä¸€ä¸ªæ€§èƒ½å·¥å…·å¯ç”¨ï¼Œæˆ‘ä»¬æ›´å¤šä¼šå»æŸ¥çœ‹è¿™ä¸ªå·¥å…·çš„æ‰‹å†Œï¼Œæ‰¾å‡ºå®ƒçš„åŠŸèƒ½ã€ç”¨æ³•ä»¥åŠæ³¨æ„äº‹é¡¹ã€‚</p><!-- [[[read_end]]] --><p>å…³äºå·¥å…·æ‰‹å†Œçš„æŸ¥çœ‹ï¼Œman åº”è¯¥æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„æ–¹æ³•ï¼Œæˆ‘åœ¨ä¸“æ ä¸­å¤šæ¬¡ä»‹ç»è¿‡ã€‚å®é™…ä¸Šï¼Œé™¤äº† man ä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªæŸ¥è¯¢å‘½ä»¤æ‰‹å†Œçš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ infoã€‚</p><p>info å¯ä»¥ç†è§£ä¸º man çš„è¯¦ç»†ç‰ˆæœ¬ï¼Œæä¾›äº†è¯¸å¦‚èŠ‚ç‚¹è·³è½¬ç­‰æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚ç›¸å¯¹æ¥è¯´ï¼Œman çš„è¾“å‡ºæ¯”è¾ƒç®€æ´ï¼Œè€Œ info çš„è¾“å‡ºæ›´è¯¦ç»†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ man æ¥æŸ¥è¯¢å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œåªæœ‰åœ¨man çš„è¾“å‡ºä¸å¤ªå¥½ç†è§£æ—¶ï¼Œæ‰ä¼šå†å»å‚è€ƒ info æ–‡æ¡£ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘è¯´è¿‡äº†ï¼Œè¦æŸ¥è¯¢æ‰‹å†Œï¼Œå‰æä¸€å®šæ˜¯å·²çŸ¥å“ªä¸ªå·¥å…·å¯ç”¨ã€‚å¦‚æœä½ è¿˜ä¸çŸ¥é“è¦ç”¨å“ªä¸ªå·¥å…·ï¼Œå°±è¦æ ¹æ®æƒ³äº†è§£çš„æŒ‡æ ‡ï¼Œå»æŸ¥æ‰¾æœ‰å“ªäº›å·¥å…·å¯ç”¨ã€‚è¿™å…¶ä¸­ï¼š</p><ul>\n<li>\n<p>æœ‰äº›å·¥å…·ä¸éœ€è¦é¢å¤–å®‰è£…ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚å†…æ ¸çš„ /proc æ–‡ä»¶ç³»ç»Ÿï¼›</p>\n</li>\n<li>\n<p>è€Œæœ‰äº›å·¥å…·ï¼Œåˆ™éœ€è¦å®‰è£…é¢å¤–çš„è½¯ä»¶åŒ…ï¼Œæ¯”å¦‚ sarã€pidstatã€iostat ç­‰ã€‚</p>\n</li>\n</ul><p><strong>æ‰€ä»¥ï¼Œåœ¨é€‰æ‹©æ€§èƒ½å·¥å…·æ—¶ï¼Œé™¤äº†è¦è€ƒè™‘æ€§èƒ½æŒ‡æ ‡è¿™ä¸ªç›®çš„å¤–ï¼Œè¿˜è¦ç»“åˆå¾…åˆ†æçš„ç¯å¢ƒæ¥ç»¼åˆè€ƒè™‘</strong>ã€‚æ¯”å¦‚ï¼Œå®é™…ç¯å¢ƒæ˜¯å¦å…è®¸å®‰è£…è½¯ä»¶åŒ…ï¼Œæ˜¯å¦éœ€è¦æ–°çš„å†…æ ¸ç‰ˆæœ¬ç­‰ã€‚</p><p>æ˜ç™½äº†å·¥å…·é€‰æ‹©çš„åŸºæœ¬åŸåˆ™åï¼Œæˆ‘ä»¬æ¥çœ‹ Linux çš„æ€§èƒ½å·¥å…·ã€‚é¦–å…ˆè¿˜æ˜¯è¦æ¨èä¸‹é¢è¿™å¼ å›¾ï¼Œä¹Ÿå°±æ˜¯Brendan Gregg æ•´ç†çš„æ€§èƒ½å·¥å…·è°±å›¾ã€‚æˆ‘åœ¨ä¸“æ ä¸­å¤šæ¬¡æåˆ°è¿‡ï¼Œä½ è‚¯å®šä¹Ÿå·²ç»å‚è€ƒè¿‡ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/b0/01/b07ca95ef8a3d2c89b0996a042d33901.png?wh=3000*2100\" alt=\"\"><br>\nï¼ˆå›¾ç‰‡æ¥è‡ª <a href=\"http://www.brendangregg.com/linuxperf.html\">brendangregg.com</a>ï¼‰</p><p>è¿™å¼ å›¾ä» Linux å†…æ ¸çš„å„ä¸ªå­ç³»ç»Ÿå‡ºå‘ï¼Œæ±‡æ€»äº†å¯¹å„ä¸ªå­ç³»ç»Ÿè¿›è¡Œæ€§èƒ½åˆ†ææ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©çš„å·¥å…·ã€‚ä¸è¿‡ï¼Œè™½ç„¶è¿™ä¸ªå›¾æ˜¯æ€§èƒ½åˆ†ææœ€å¥½çš„å‚è€ƒèµ„æ–™ä¹‹ä¸€ï¼Œå®ƒå…¶å®è¿˜ä¸å¤Ÿå…·ä½“ã€‚</p><p>æ¯”å¦‚ï¼Œå½“ä½ éœ€è¦æŸ¥çœ‹æŸä¸ªæ€§èƒ½æŒ‡æ ‡æ—¶ï¼Œè¿™å¼ å›¾é‡Œå¯¹åº”çš„å­ç³»ç»Ÿéƒ¨åˆ†ï¼Œå¯èƒ½æœ‰å¤šä¸ªæ€§èƒ½å·¥å…·å¯ä¾›é€‰æ‹©ã€‚ä½†å®é™…ä¸Šï¼Œå¹¶éæ‰€æœ‰è¿™äº›å·¥å…·éƒ½é€‚ç”¨ï¼Œå…·ä½“è¦ç”¨å“ªä¸ªï¼Œè¿˜éœ€è¦ä½ å»æŸ¥æ‰¾æ¯ä¸ªå·¥å…·çš„æ‰‹å†Œï¼Œå¯¹æ¯”åˆ†æåšå‡ºé€‰æ‹©ã€‚</p><p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•æ¥ç†è§£è¿™äº›å·¥å…·å‘¢ï¼Ÿ<strong>æˆ‘çš„å»ºè®®ï¼Œè¿˜æ˜¯ä»æ€§èƒ½æŒ‡æ ‡å‡ºå‘ï¼Œæ ¹æ®æ€§èƒ½æŒ‡æ ‡çš„ä¸åŒï¼Œå°†æ€§èƒ½å·¥å…·åˆ’åˆ†ä¸ºä¸åŒç±»å‹</strong>ã€‚æ¯”å¦‚ï¼Œæœ€å¸¸è§çš„å°±æ˜¯å¯ä»¥æ ¹æ® CPUã€å†…å­˜ã€ç£ç›˜ I/O ä»¥åŠç½‘ç»œçš„å„ç±»æ€§èƒ½æŒ‡æ ‡ï¼Œå°†è¿™äº›å·¥å…·è¿›è¡Œåˆ†ç±»ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä» CPUã€å†…å­˜ã€ç£ç›˜ I/O ä»¥åŠç½‘ç»œç­‰å‡ ä¸ªè§’åº¦ï¼Œæ¢³ç†è¿™äº›å¸¸è§çš„ Linux æ€§èƒ½å·¥å…·ï¼Œç‰¹åˆ«æ˜¯ä»æ€§èƒ½æŒ‡æ ‡çš„è§’åº¦å‡ºå‘ï¼Œç†æ¸…æ¥šåˆ°åº•æœ‰å“ªäº›å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥ç›‘æµ‹ç‰¹å®šçš„æ€§èƒ½æŒ‡æ ‡ã€‚è¿™äº›å·¥å…·ï¼Œå®é™…ä¸Šè´¯ç©¿åœ¨æˆ‘ä»¬ä¸“æ å„æ¨¡å—çš„å„ä¸ªæ¡ˆä¾‹ä¸­ã€‚ä¸ºäº†æ–¹ä¾¿ä½ æŸ¥çœ‹ï¼Œæˆ‘å°†å®ƒä»¬éƒ½æ•´ç†æˆäº†è¡¨æ ¼ï¼Œå¹¶å¢åŠ äº†æ¯ä¸ªå·¥å…·çš„ä½¿ç”¨åœºæ™¯ã€‚</p><h2>CPUæ€§èƒ½å·¥å…·</h2><p>é¦–å…ˆï¼Œä» CPU çš„è§’åº¦æ¥è¯´ï¼Œä¸»è¦çš„æ€§èƒ½æŒ‡æ ‡å°±æ˜¯ CPU çš„ä½¿ç”¨ç‡ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ä»¥åŠ CPU Cache çš„å‘½ä¸­ç‡ç­‰ã€‚ä¸‹é¢è¿™å¼ å›¾å°±åˆ—å‡ºäº†å¸¸è§çš„ CPU æ€§èƒ½æŒ‡æ ‡ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/9a/69/9a211905538faffb5b3221ee01776a69.png?wh=1241*1212\" alt=\"\"><br>\nä»è¿™äº›æŒ‡æ ‡å‡ºå‘ï¼Œå†æŠŠ CPU ä½¿ç”¨ç‡ï¼Œåˆ’åˆ†ä¸ºç³»ç»Ÿå’Œè¿›ç¨‹ä¸¤ä¸ªç»´åº¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ï¼Œä¸‹é¢è¿™ä¸ª CPU æ€§èƒ½å·¥å…·é€ŸæŸ¥è¡¨ã€‚æ³¨æ„ï¼Œå› ä¸ºæ¯ç§æ€§èƒ½æŒ‡æ ‡éƒ½å¯èƒ½å¯¹åº”å¤šç§å·¥å…·ï¼Œæˆ‘åœ¨æ¯ä¸ªæŒ‡æ ‡çš„è¯´æ˜ä¸­ï¼Œéƒ½å¸®ä½ æ€»ç»“äº†è¿™äº›å·¥å…·çš„ç‰¹ç‚¹å’Œæ³¨æ„äº‹é¡¹ã€‚è¿™äº›ä¹Ÿæ˜¯ä½ éœ€è¦ç‰¹åˆ«å…³æ³¨çš„åœ°æ–¹ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/28/b0/28cb85011289f83804c51c1fb275dab0.png?wh=1707*2563\" alt=\"\"></p><h2>å†…å­˜æ€§èƒ½å·¥å…·</h2><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹å†…å­˜æ–¹é¢ã€‚ä»å†…å­˜çš„è§’åº¦æ¥è¯´ï¼Œä¸»è¦çš„æ€§èƒ½æŒ‡æ ‡ï¼Œå°±æ˜¯ç³»ç»Ÿå†…å­˜çš„åˆ†é…å’Œä½¿ç”¨ã€è¿›ç¨‹å†…å­˜çš„åˆ†é…å’Œä½¿ç”¨ä»¥åŠ SWAP çš„ç”¨é‡ã€‚ä¸‹é¢è¿™å¼ å›¾åˆ—å‡ºäº†å¸¸è§çš„å†…å­˜æ€§èƒ½æŒ‡æ ‡ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/ee/c0/ee36f73b9213063b3bcdaed2245944c0.png?wh=1581*1760\" alt=\"\"><br>\nä»è¿™äº›æŒ‡æ ‡å‡ºå‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°å¦‚ä¸‹è¡¨æ‰€ç¤ºçš„å†…å­˜æ€§èƒ½å·¥å…·é€ŸæŸ¥è¡¨ã€‚åŒ CPU æ€§èƒ½å·¥å…·ä¸€æ ·ï¼Œè¿™å„¿æˆ‘ä¹Ÿå¸®ä½ æ¢³ç†äº†ï¼Œå¸¸è§å·¥å…·çš„ç‰¹ç‚¹å’Œæ³¨æ„äº‹é¡¹ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/79/f8/79ad5caf0a2c105b7e9ce77877d493f8.png?wh=1653*2198\" alt=\"\"><br>\næ³¨ï¼šæœ€åä¸€è¡Œpcstatçš„æºç é“¾æ¥ä¸º <a href=\"https://github.com/tobert/pcstat\">https://github.com/tobert/pcstat</a></p><h2>ç£ç›˜I/Oæ€§èƒ½å·¥å…·</h2><p>æ¥ä¸‹æ¥ï¼Œä»æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜ I/O çš„è§’åº¦æ¥è¯´ï¼Œä¸»è¦æ€§èƒ½æŒ‡æ ‡ï¼Œå°±æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„ä½¿ç”¨ã€ç¼“å­˜å’Œç¼“å†²åŒºçš„ä½¿ç”¨ï¼Œä»¥åŠç£ç›˜ I/O çš„ä½¿ç”¨ç‡ã€ååé‡å’Œå»¶è¿Ÿç­‰ã€‚ä¸‹é¢è¿™å¼ å›¾åˆ—å‡ºäº†å¸¸è§çš„ I/O æ€§èƒ½æŒ‡æ ‡ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/72/3b/723431a944034b51a9ef13a8a1d4d03b.png?wh=2631*808\" alt=\"\"><br>\nä»è¿™äº›æŒ‡æ ‡å‡ºå‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ï¼Œä¸‹é¢è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜ I/O æ€§èƒ½å·¥å…·é€ŸæŸ¥è¡¨ã€‚åŒ CPUå’Œå†…å­˜æ€§èƒ½å·¥å…·ä¸€æ ·ï¼Œæˆ‘ä¹Ÿæ¢³ç†å‡ºäº†è¿™äº›å·¥å…·çš„ç‰¹ç‚¹å’Œæ³¨æ„äº‹é¡¹ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/c2/a3/c232dcb4185f7b7ba95c126889cf6fa3.png?wh=1714*2424\" alt=\"\"></p><h2>ç½‘ç»œæ€§èƒ½å·¥å…·</h2><p>æœ€åï¼Œä»ç½‘ç»œçš„è§’åº¦æ¥è¯´ï¼Œä¸»è¦æ€§èƒ½æŒ‡æ ‡å°±æ˜¯ååé‡ã€å“åº”æ—¶é—´ã€è¿æ¥æ•°ã€ä¸¢åŒ…æ•°ç­‰ã€‚æ ¹æ® TCP/IP ç½‘ç»œåè®®æ ˆçš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›æ€§èƒ½æŒ‡æ ‡ï¼Œè¿›ä¸€æ­¥ç»†åŒ–ä¸ºæ¯å±‚åè®®çš„å…·ä½“æŒ‡æ ‡ã€‚è¿™é‡Œæˆ‘åŒæ ·ç”¨ä¸€å¼ å›¾ï¼Œåˆ†åˆ«ä»é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ï¼Œåˆ—å‡ºäº†å„å±‚çš„ä¸»è¦æŒ‡æ ‡ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/37/a4/37d04c213acfa650bd7467e3000356a4.png?wh=1983*1104\" alt=\"\"><br>\nä»è¿™äº›æŒ‡æ ‡å‡ºå‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸‹é¢çš„ç½‘ç»œæ€§èƒ½å·¥å…·é€ŸæŸ¥è¡¨ã€‚åŒæ ·çš„ï¼Œæˆ‘ä¹Ÿå¸®ä½ æ¢³ç†äº†å„ç§å·¥å…·çš„ç‰¹ç‚¹å’Œæ³¨æ„äº‹é¡¹ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/5d/5d/5dde213baffd7811ab73c82883b2a75d.png?wh=1709*2462\" alt=\"\"></p><h2>åŸºå‡†æµ‹è¯•å·¥å…·</h2><p>é™¤äº†æ€§èƒ½åˆ†æå¤–ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹ç³»ç»Ÿæ€§èƒ½è¿›è¡ŒåŸºå‡†æµ‹è¯•ã€‚æ¯”å¦‚ï¼Œ</p><ul>\n<li>\n<p>åœ¨æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜ I/O æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ fio å·¥å…·ï¼Œæµ‹è¯•äº†ç£ç›˜ I/O çš„æ€§èƒ½ã€‚</p>\n</li>\n<li>\n<p>åœ¨ç½‘ç»œæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ iperfã€pktgen ç­‰ï¼Œæµ‹è¯•äº†ç½‘ç»œçš„æ€§èƒ½ã€‚</p>\n</li>\n<li>\n<p>è€Œåœ¨å¾ˆå¤šåŸºäº Nginx çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ™ä½¿ç”¨ abã€wrk ç­‰ï¼Œæµ‹è¯• Nginx åº”ç”¨çš„æ€§èƒ½ã€‚</p>\n</li>\n</ul><p>é™¤äº†ä¸“æ é‡Œä»‹ç»è¿‡çš„è¿™äº›å·¥å…·å¤–ï¼Œå¯¹äº Linux çš„å„ä¸ªå­ç³»ç»Ÿæ¥è¯´ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„åŸºå‡†æµ‹è¯•å·¥å…·å¯èƒ½ä¼šç”¨åˆ°ã€‚ä¸‹é¢è¿™å¼ å›¾ï¼Œæ˜¯ Brendan Gregg æ•´ç†çš„ Linux åŸºå‡†æµ‹è¯•å·¥å…·å›¾è°±ï¼Œä½ å¯ä»¥ä¿å­˜ä¸‹æ¥ï¼Œåœ¨éœ€è¦æ—¶å‚è€ƒã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/f0/e9/f094f489049602e1058e02edc708e6e9.png?wh=1500*1050\" alt=\"\"><br>\nï¼ˆå›¾ç‰‡æ¥è‡ª <a href=\"http://www.brendangregg.com/linuxperf.html\">brendangregg.com</a>ï¼‰</p><h2>å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢³ç†äº†å¸¸è§çš„æ€§èƒ½å·¥å…·ï¼Œå¹¶ä» CPUã€å†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿå’Œç£ç›˜ I/Oã€ç½‘ç»œä»¥åŠåŸºå‡†æµ‹è¯•ç­‰ä¸åŒçš„è§’åº¦ï¼Œæ±‡æ€»äº†å„ç±»æ€§èƒ½æŒ‡æ ‡æ‰€å¯¹åº”çš„æ€§èƒ½å·¥å…·é€ŸæŸ¥è¡¨ã€‚</p><p>å½“åˆ†ææ€§èƒ½é—®é¢˜æ—¶ï¼Œå¤§çš„æ¥è¯´ï¼Œä¸»è¦æœ‰è¿™ä¹ˆä¸¤ä¸ªæ­¥éª¤ï¼š</p><ul>\n<li>\n<p>ç¬¬ä¸€æ­¥ï¼Œä»æ€§èƒ½ç“¶é¢ˆå‡ºå‘ï¼Œæ ¹æ®ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„è¿è¡ŒåŸç†ï¼Œç¡®è®¤å¾…åˆ†æçš„æ€§èƒ½æŒ‡æ ‡ã€‚</p>\n</li>\n<li>\n<p>ç¬¬äºŒæ­¥ï¼Œæ ¹æ®è¿™äº›å›¾è¡¨ï¼Œé€‰å‡ºæœ€åˆé€‚çš„æ€§èƒ½å·¥å…·ï¼Œç„¶åäº†è§£å¹¶ä½¿ç”¨å·¥å…·ï¼Œä»è€Œæ›´å¿«è§‚æµ‹åˆ°éœ€è¦çš„æ€§èƒ½æ•°æ®ã€‚</p>\n</li>\n</ul><p>è™½ç„¶ Linux çš„æ€§èƒ½æŒ‡æ ‡å’Œæ€§èƒ½å·¥å…·éƒ½æ¯”è¾ƒå¤šï¼Œä½†ç†Ÿæ‚‰äº†å„æŒ‡æ ‡å«ä¹‰åï¼Œä½ è‡ªç„¶å°±ä¼šå‘ç°è¿™äº›å·¥å…·åŒæ€§èƒ½æŒ‡æ ‡é—´çš„å…³è”ã€‚é¡ºç€è¿™ä¸ªæ€è·¯å¾€ä¸‹èµ°ï¼ŒæŒæ¡è¿™äº›å·¥å…·çš„é€‰ç”¨å…¶å®å¹¶ä¸éš¾ã€‚</p><p>å½“ç„¶ï¼Œæ­£å¦‚å’±ä»¬ä¸“æ ä¸€ç›´å¼ºè°ƒçš„ï¼Œä¸è¦æŠŠæ€§èƒ½å·¥å…·å½“æˆæ€§èƒ½åˆ†æå’Œä¼˜åŒ–çš„å…¨éƒ¨ã€‚</p><ul>\n<li>\n<p>ä¸€æ–¹é¢ï¼Œæ€§èƒ½åˆ†æå’Œä¼˜åŒ–çš„æ ¸å¿ƒï¼Œæ˜¯å¯¹ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºè¿è¡ŒåŸç†çš„æŒæ¡ï¼Œè€Œæ€§èƒ½å·¥å…·åªæ˜¯è¾…åŠ©ä½ æ›´å¿«å®Œæˆè¿™ä¸ªè¿‡ç¨‹çš„å¸®æ‰‹ã€‚</p>\n</li>\n<li>\n<p>å¦ä¸€æ–¹é¢ï¼Œå®Œå–„çš„ç›‘æ§ç³»ç»Ÿï¼Œå¯ä»¥æä¾›ç»å¤§éƒ¨åˆ†æ€§èƒ½åˆ†ææ‰€éœ€çš„åŸºå‡†æ•°æ®ã€‚ä»è¿™äº›æ•°æ®ä¸­ï¼Œä½ å¾ˆå¯èƒ½å°±èƒ½å¤§è‡´å®šä½å‡ºæ€§èƒ½ç“¶é¢ˆï¼Œä¹Ÿå°±ä¸ç”¨å†å»æ‰‹åŠ¨æ‰§è¡Œå„ç±»å·¥å…·äº†ã€‚</p>\n</li>\n</ul><h2>æ€è€ƒ</h2><p>æœ€åï¼Œæˆ‘æƒ³é‚€è¯·ä½ ä¸€èµ·æ¥èŠèŠï¼Œä½ éƒ½ä½¿ç”¨è¿‡å“ªäº›æ€§èƒ½å·¥å…·ã€‚ä½ é€šå¸¸æ˜¯æ€ä¹ˆé€‰æ‹©æ€§èƒ½å·¥å…·çš„ï¼Ÿåˆæ˜¯å¦‚ä½•æƒ³åˆ°è¦ç”¨è¿™äº›æ€§èƒ½å·¥å…·ï¼Œæ¥æ’æŸ¥å’Œåˆ†ææ€§èƒ½é—®é¢˜çš„ï¼Ÿä½ å¯ä»¥ç»“åˆæˆ‘çš„è®²è¿°ï¼Œæ€»ç»“è‡ªå·±çš„æ€è·¯ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p></p>","comments":[{"had_liked":false,"id":243174,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1597981732,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"48842621988","product_id":100020901,"comment_content":"æ€è€ƒï¼š<br>â­é—®é¢˜ï¼ŒåŠæ³•ï¼Œå·¥å…·çš„å…³ç³»â€”â€”é—®é¢˜æ˜¯äººä¸€ç”Ÿä¸­å”¯ä¸€çš„äº‹ã€‚è§£å†³é—®é¢˜çš„åŠæ³•æœ‰å¾ˆå¤šï¼ŒåŠæ³•ä½¿ç”¨åˆ°çš„å·¥å…·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¸ä¹Ÿæœ‰å¾ˆå¤šã€‚<br><br>â­è½¬åŒ–â€”â€”æ ¸å¿ƒæŠ€æœ¯ï¼Œæ˜¯ä¸€ç§é‡è¦çš„å·¥å…·ï¼Œè¡Œä¹‹æœ‰æ•ˆçš„å·¥å…·ï¼Œå°‘äº†è¿™ä¸ªæ ¸å¿ƒå·¥å…·å°±åšä¸æˆäº‹æƒ…ï¼Œæ­¤æ—¶çš„å·¥å…·å°±è½¬åŒ–ä¸ºåŠæ³•ã€‚<br><br>â­æŠ€æœ¯ï¼Œæ˜¯ä¸€ç§å·¥å…·ï¼Œä¸è¦è¯¯ä»¥ä¸ºæ˜¯åŠæ³•ã€‚åªæœ‰å½“é™¤æ­¤æŠ€æœ¯å°±æ— æ³•è§£å†³é—®é¢˜çš„æ—¶å€™ï¼ŒæŠ€æœ¯å·¥å…·æ‰æ˜¯åŠæ³•æœ¬èº«ï¼Œæ¯”å¦‚ai,å¤§æ•°æ®åªæ˜¯è§£å†³é—®é¢˜çš„åŠæ³•ï¼Œtensorflow,sparkç­‰æ˜¯è§£å†³é—®é¢˜çš„å·¥å…·ã€‚<br><br>â­å·¥å…·ï¼Œä¼¼ä¹ä¸å¯èƒ½å”¯ä¸€ã€‚å½“è§£å†³é—®é¢˜çš„åŠæ³•å‡ºç°åï¼Œå·¥å…·ä¹Ÿè¶‹å‘å¤šå…ƒåŒ–ã€‚æ‰€ä»¥ï¼Œä¼¼ä¹åŠæ³•æ¯”å·¥å…·é‡è¦çš„å¤šã€‚<br><br>â­åŠæ³•ï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•ï¼Œè§£å†³é—®é¢˜çš„æ€è·¯ï¼Œæ­¥éª¤ã€‚éœ€è¦ç†è§£é—®é¢˜çš„ç»“æ„ã€ç»†èŠ‚ï¼Œè¿›è€Œé‡‡å–æªæ–½ã€‚å…µæ¥å°†æŒ¡ï¼Œæ°´æ¥åœŸæ©ã€‚æ‰€ä»¥ï¼Œå…³é”®å°±æ˜¯çŸ¥é“å…µå°†å…³ç³»ï¼Œæ°´åœŸå…³ç³»ï¼Œç†è§£é—®é¢˜ï¼Œå‰–æé—®é¢˜æ˜¯æ ¹æœ¬ã€‚<br><br>â­é—®é¢˜ï¼Œæ˜¯ç¨‹åºbugï¼Ÿè¿è¥é—®é¢˜ï¼Ÿç®¡ç†é—®é¢˜ï¼Ÿä¸€ä¸ªé—®é¢˜çš„å‡ºç°å¯èƒ½ç”±å¤šæ–¹å› ç´ ã€‚<br><br>é‚£ä¹ˆä½œä¸ºæŠ€æœ¯äººå‘˜ï¼Œèƒ½æ‹¿æŠ€æœ¯è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿè§£å†³é—®é¢˜ï¼Œæ‰èƒ½æ”¶è´§åˆ©ç›Šã€‚æ¯”å¦‚æœä¹æ™šäº”å†™bugï¼Œå¤œä»¥ç»§æ—¥æç§æ´»ã€‚è§£å†³çš„é—®é¢˜éƒ½ä¸æ˜¯ç—›ç‚¹ï¼Œæˆ–è€…å¹¶ä¸æ˜¯å¤ªç—›ã€‚<br><br>â­ç—›ç‚¹ï¼Œæœ‰å¤šç—›ï¼Œå°±æœ‰å¤šå¤§ä»·å€¼ï¼Œå°±å¯ä»¥å¸¦æ¥å¤šå¤§æ”¶ç›Šã€‚è¦ä½“ç°è‡ªæˆ‘ä»·å€¼ï¼Œå°±å¾—è§£å†³ç—›ç‚¹ã€‚è°è§£å†³äº†ç—›ç‚¹ï¼Œè°å°±æ˜¯æœ‰ä»·å€¼çš„äººã€‚ä½†ç—›ç‚¹æœ¬èº«ä¸æŠ€æœ¯æ— å…³ã€‚<br>ä¸€å¥è¯ï¼šæŠ“ä½ç—›ç‚¹(æ–¹å‘)ï¼Œå‰–æåŸç†(æ–¹æ³•)ï¼Œç”¨å¥½å·¥å…·(åˆ©å‰‘)ã€‚<br>-----æ‹¿ç€â€™åˆ©å‰‘â€˜ç”¨æ­£ç¡®çš„â€™æ–¹æ³•â€˜æŒ¥å‘æ­£ç¡®çš„â€™æ–¹å‘â€˜--------------------","like_count":12},{"had_liked":false,"id":83605,"user_name":"Linuxer","can_delete":false,"product_type":"c1","uid":1153978,"ip_address":"","ucode":"272D9D8089C3D6","user_header":"https://static001.geekbang.org/account/avatar/00/11/9b/ba/333b59e5.jpg","comment_is_top":false,"comment_ctime":1554684202,"is_pvip":false,"replies":[{"id":"30379","content":"å—¯ è¿™ç¡®å®æ˜¯ç»éªŒå¼çš„ï¼Œæ²¡æœ‰ç»å¯¹çš„æŒ‡æ ‡ï¼Œä¸åŒåº”ç”¨ä¸åŒåœºæ™¯éƒ½ä¸å¤ªä¸€æ ·ã€‚ä¸è¿‡USEæ³•çš„è¿™äº›æŒ‡æ ‡éƒ½æ¯”è¾ƒç›´è§‚ï¼Œå¯ä»¥ä¼˜å…ˆæŸ¥çœ‹","user_name":"ä½œè€…å›å¤","comment_id":83605,"uid":"1001282","ip_address":"","utype":1,"ctime":1554815683,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":3,"race_medal":0,"score":"35914422570","product_id":100020901,"comment_content":"æœ‰ä¸€ä¸ªé—®é¢˜è¯·æ•™ï¼Œå¾ˆå¤šæ—¶å€™å·¥å…·æœ‰äº†ï¼Œä½†æ˜¯å¯¹äºæŒ‡æ ‡æ˜¯å¦åœ¨åˆç†èŒƒå›´å¥½åƒæ²¡æœ‰æ˜ç¡®çš„æ ‡å‡†ï¼Œéƒ½æ˜¯ç»éªŒå¼çš„","like_count":8,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446091,"discussion_content":"å—¯ è¿™ç¡®å®æ˜¯ç»éªŒå¼çš„ï¼Œæ²¡æœ‰ç»å¯¹çš„æŒ‡æ ‡ï¼Œä¸åŒåº”ç”¨ä¸åŒåœºæ™¯éƒ½ä¸å¤ªä¸€æ ·ã€‚ä¸è¿‡USEæ³•çš„è¿™äº›æŒ‡æ ‡éƒ½æ¯”è¾ƒç›´è§‚ï¼Œå¯ä»¥ä¼˜å…ˆæŸ¥çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554815683,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1916685,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg","nickname":"æ€€æ£æ¢¦æƒ³çš„å­¦æ¸£","note":"","ucode":"2349B9F4F6FDE3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225187,"discussion_content":"è§†é¢‘æœåŠ¡å•†ç›¸å…³åœºæ™¯ï¼Œå¯¹äºå­˜å‚¨çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨60%è¿™ä¸ªæ ‡å‡†ï¼Œè¿›è¡Œé¢„è­¦ï¼Œ70%å¼€å§‹æ´½è°ˆæ‰©å®¹ï¼Œ80%çš„æ—¶å€™å¼€å§‹æ’æŸ¥æ˜¯å¦æœ‰å¯ä»¥ä¼˜åŒ–çš„ã€‚90%çš„æ—¶å€™è¦ä¹ˆç´§æ€¥æ‰©å®¹ï¼Œè¦ä¹ˆç”³è¯·æ¸…é™¤ä¸€éƒ¨åˆ†ã€‚æˆ‘ä¹‹å‰åˆä½œè¿‡å‡ ä¸ªåšå­˜å‚¨çš„å‚å®¶ï¼ŒåŸºæœ¬éƒ½æ˜¯è¿™æ ·çš„ææ³•ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586351945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1852596,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKFJrITQiaArYFhOMJ1leaJFickkPz9tf5fV77UaicTW6SeQHt9mrricUD8zT6ByLibIhEERupMNtq76Rg/132","nickname":"å²‘æ–‡ä½³","note":"","ucode":"A083C2B5DEA6B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332987,"discussion_content":"å¼€å§‹å­¦ä¹ ï¼ŒåŠ æ²¹ğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607409798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86069,"user_name":"å¤§åç‹ç‹¸","can_delete":false,"product_type":"c1","uid":1325678,"ip_address":"","ucode":"5044F89A505C5B","user_header":"https://static001.geekbang.org/account/avatar/00/14/3a/6e/e39e90ca.jpg","comment_is_top":false,"comment_ctime":1555307671,"is_pvip":false,"replies":[{"id":"30931","content":"ğŸ‘ è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","comment_id":86069,"uid":"1001282","ip_address":"","utype":1,"ctime":1555336150,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"18735176855","product_id":100020901,"comment_content":"æˆ‘çœ‹åˆ°nethogsçš„æ—¶å€™å»å°è¯•ç†è§£ä¸€ä¸‹ï¼Œç»“æœv0.8.0 ä¼šæœ‰å¦‚ä¸‹é”™è¯¯ï¼šcreating socket failed while establishing local IP - are you root?<br>å³ä½¿æ˜¯rootç”¨æˆ·å»æ‰§è¡Œã€‚çœ‹ç½‘ä¸Šè¯´v0.8.1 è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æ‰€ä»¥å°±ä¸‹è½½äº†8.5ç‰ˆæœ¬ã€‚<br><br>wget -c https:&#47;&#47;github.com&#47;raboof&#47;nethogs&#47;archive&#47;v0.8.5.tar.gz<br>tar xf v0.8.5.tar.gz <br>cd .&#47;nethogs-0.8.5&#47;<br><br>sudo apt-get install libncurses5-dev libpcap-dev<br>make &amp;&amp; sudo make install ","like_count":4,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446884,"discussion_content":"ğŸ‘ è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555336150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83647,"user_name":"hola","can_delete":false,"product_type":"c1","uid":1068559,"ip_address":"","ucode":"1872B1B3FCEAFC","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/0f/c43745e7.jpg","comment_is_top":false,"comment_ctime":1554689845,"is_pvip":false,"replies":[{"id":"30378","content":"dtraceåœ¨linuxä¸Šæ— æ³•ä½¿ç”¨ï¼Œå…¶å®æˆ‘ä¹Ÿä¸ç†Ÿã€‚å®˜æ–¹ç½‘ç«™ä¸Šæœ‰ä¸ªå¾ˆè¯¦ç»†çš„æ–‡æ¡£ï¼Œå¯ä»¥å»çœ‹çœ‹","user_name":"ä½œè€…å›å¤","comment_id":83647,"uid":"1001282","ip_address":"","utype":1,"ctime":1554815521,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"18734559029","product_id":100020901,"comment_content":"å¯ä»¥åšä¸€æœŸdtraceçš„è®²è§£å—ï¼Ÿæ„Ÿè§‰è¿™ä¸ªå·¥å…·å¾ˆå‰å®³ï¼Œä½†æ˜¯æŒºå¤æ‚çš„","like_count":4,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446113,"discussion_content":"dtraceåœ¨linuxä¸Šæ— æ³•ä½¿ç”¨ï¼Œå…¶å®æˆ‘ä¹Ÿä¸ç†Ÿã€‚å®˜æ–¹ç½‘ç«™ä¸Šæœ‰ä¸ªå¾ˆè¯¦ç»†çš„æ–‡æ¡£ï¼Œå¯ä»¥å»çœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554815521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":225306,"user_name":"jorin@zou","can_delete":false,"product_type":"c1","uid":1564869,"ip_address":"","ucode":"A8CEF7CCF33570","user_header":"https://static001.geekbang.org/account/avatar/00/17/e0/c5/c324a7de.jpg","comment_is_top":false,"comment_ctime":1591711595,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10181646187","product_id":100020901,"comment_content":"æ˜¯æˆ‘å­¦çš„å¤ªå¿«äº†å—ï¼Œæ€ä¹ˆè¶Šå­¦åˆ°åé¢ï¼Œè¯„è®ºè¶Šå°‘äº†ï¼Œå¾—æ”¾æ…¢è„šæ­¥","like_count":2,"discussions":[{"author":{"id":1009527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/77/c1310aad.jpg","nickname":"å‰‘è¡£æ¸…é£","note":"","ucode":"470CD81F6612F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348602,"discussion_content":"ä¹°äº†å°±æ˜¯å­¦äº†ï¼Œå‚è€ƒé‡‘å­—å¡”æ¨¡å‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612664799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1959822,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/e7/8e/318cfde0.jpg","nickname":"Spoon","note":"","ucode":"2FF9193AD482C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339925,"discussion_content":"éƒ½æ˜¯å­¦å®Œå‰å‡ ç« å°±æ”¾å¼ƒäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609842498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234955,"user_name":"Roy","can_delete":false,"product_type":"c1","uid":1930723,"ip_address":"","ucode":"909B8B605C317A","user_header":"https://static001.geekbang.org/account/avatar/00/1d/75/e3/ef489d57.jpg","comment_is_top":false,"comment_ctime":1594858361,"is_pvip":false,"replies":[{"id":"87359","content":"è¿™ä¸ªä¸äº†è§£ğŸ˜“ ä¸è¿‡å¦‚æœé’ˆå¯¹å…·ä½“æ€§èƒ½æŒ‡æ ‡ï¼Œéƒ½æœ‰å¾ˆå¤šç›¸å…³çš„æ€§èƒ½è¯„æµ‹å·¥å…·ï¼Œæˆ‘ä»¬ä¸“æ é‡Œé¢ä¹Ÿæåˆ°ä¸å°‘","user_name":"ä½œè€…å›å¤","comment_id":234955,"uid":"1001282","ip_address":"","utype":1,"ctime":1595427446,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5889825657","product_id":100020901,"comment_content":"Linuxä»€ä¹ˆæ—¶å€™æœ‰è·‘åˆ†è½¯ä»¶?è±¡å®‰å…”å…”","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501557,"discussion_content":"è¿™ä¸ªä¸äº†è§£ğŸ˜“ ä¸è¿‡å¦‚æœé’ˆå¯¹å…·ä½“æ€§èƒ½æŒ‡æ ‡ï¼Œéƒ½æœ‰å¾ˆå¤šç›¸å…³çš„æ€§èƒ½è¯„æµ‹å·¥å…·ï¼Œæˆ‘ä»¬ä¸“æ é‡Œé¢ä¹Ÿæåˆ°ä¸å°‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595427446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":83591,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1554681782,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5849649078","product_id":100020901,"comment_content":"æ‰“å¡day61<br>è¿™å·¥å…·ï¼Œè¿˜æ˜¯è¦ç»å¸¸ç”¨ï¼Œæ„Ÿè§‰ç”¨å„ä¸ªæ¨¡å—çš„å¥—è·¯ç¯‡ï¼Œæ¥çš„æ›´å¿«ç‚¹ï½","like_count":1},{"had_liked":false,"id":294525,"user_name":"Jiyong","can_delete":false,"product_type":"c1","uid":1207360,"ip_address":"","ucode":"9390071044B1E1","user_header":"https://static001.geekbang.org/account/avatar/00/12/6c/40/f5ea25b1.jpg","comment_is_top":false,"comment_ctime":1621990823,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621990823","product_id":100020901,"comment_content":"è¯·æ•™è€å¸ˆï¼Œæœ‰å“ªäº›é™åˆ¶cpu å†…å­˜ç­‰èµ„æºä½¿ç”¨ç‡çš„å·¥å…·ã€‚è°¢è°¢å•Š","like_count":0},{"had_liked":false,"id":254635,"user_name":"Akon","can_delete":false,"product_type":"c1","uid":1889038,"ip_address":"","ucode":"F0DA31C4BB4947","user_header":"https://static001.geekbang.org/account/avatar/00/1c/d3/0e/ef771277.jpg","comment_is_top":false,"comment_ctime":1603160821,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603160821","product_id":100020901,"comment_content":"å¤§ä½¬ï¼Œæœ‰æ²¡æœ‰å—è®¾å¤‡ç¨³å®šæ€§æµ‹è¯•çš„ä¾‹å­ï¼ˆæ¯”å¦‚iozoneã€fioè¿™æ ·çš„å·¥å…·ï¼Œä»¥åŠåˆ¶ä½œæˆ–çœ¼å›¾çš„æ–¹æ³•ï¼‰","like_count":0},{"had_liked":false,"id":235799,"user_name":"youbuxiaoer","can_delete":false,"product_type":"c1","uid":1314891,"ip_address":"","ucode":"A92C9C7CC450FF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLRwYJzyB6pdic3GeQvb5FSmMAOXepWERNT1nJsIY7M0adpbrACsdia56DCDxWhWicXHahSiaaIUpgZxg/132","comment_is_top":false,"comment_ctime":1595206296,"is_pvip":false,"replies":[{"id":"87259","content":"è¯·å‚è€ƒæˆ‘ä»¬ä¸“æ ç¬¬19ç¯‡","user_name":"ä½œè€…å›å¤","comment_id":235799,"uid":"1001282","ip_address":"","utype":1,"ctime":1595343403,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"1595206296","product_id":100020901,"comment_content":"è€å¸ˆï¼Œå·¥ä½œä¸­é‡åˆ°å†…å­˜å ç”¨è¾ƒé«˜ï¼Œé€šè¿‡meminfoç¡®è®¤æ˜¯åŒ¿åé¡µå ç”¨è¾ƒå¤šå†…å­˜ï¼Œè¯·é—®åŒ¿åé¡µå†…å­˜æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿå¦‚ä½•é‡Šæ”¾ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501836,"discussion_content":"è¯·å‚è€ƒæˆ‘ä»¬ä¸“æ ç¬¬19ç¯‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595343403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1314891,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLRwYJzyB6pdic3GeQvb5FSmMAOXepWERNT1nJsIY7M0adpbrACsdia56DCDxWhWicXHahSiaaIUpgZxg/132","nickname":"youbuxiaoer","note":"","ucode":"A92C9C7CC450FF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293540,"discussion_content":"å·²ç»ç¦ç”¨swapäº†ï¼Œè¿™ç§æƒ…å†µä¸‹åŒ¿åå†…å­˜å¦‚ä½•é‡Šæ”¾ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595571673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":142368,"user_name":"æŸæ£®æ£®","can_delete":false,"product_type":"c1","uid":1285420,"ip_address":"","ucode":"F370AD99BA71B9","user_header":"https://static001.geekbang.org/account/avatar/00/13/9d/2c/6248ffbd.jpg","comment_is_top":false,"comment_ctime":1571360662,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1571360662","product_id":100020901,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜,æˆ‘åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨find  &#47;query&#47;tmp  -type f  -min +1  -exec rm -rf {} \\;<br>ç”¨æ¥åˆ é™¤æ–‡ä»¶å‘ç°è¿™ä¸ªè„šæœ¬å ç”¨çš„èµ„æºç‰¹åˆ«å¤šï¼ŒCPUå¯ä»¥å ç”¨åˆ°20-30%,ä½†ç³»ç»Ÿä¸æ–­åœ°æœ‰äº¤æ˜“ä¸Šæ¥ï¼Œå¯¼è‡´äº†æ€§èƒ½çš„ä¸‹é™ã€‚ç³»ç»Ÿ&#47;query&#47;tmpä¸­ä¸»è¦æ˜¯å°æ–‡ä»¶ï¼Œè¯·æ•™ä¸‹æœ‰æ²¡æœ‰å¥½åŠæ³•å¯ä»¥è¿›è¡Œæ›´é«˜æ•ˆï¼Œæ›´å¿«é€Ÿåœ°åˆ é™¤ï¼Ÿå¦å¤–ï¼Œfindå·¥ä½œçš„åŸç†æ˜¯ä»€ä¹ˆ","like_count":0,"discussions":[{"author":{"id":2967576,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/48/18/e524f344.jpg","nickname":"Soyoger","note":"","ucode":"D4D7BD0ABC4491","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585532,"discussion_content":"è¿™ä¸ªé—®é¢˜å°±å¦‚åŒæ•°æ®åº“å…¨è¡¨æ‰«æä¸€æ ·ï¼Œæ—¢ç„¶æ˜¯æŒ‰åˆ†é’Ÿï¼Œä¸å¦¨åœ¨å¢åŠ ä¸€ä¸ªå­ç›®å½•ï¼ŒæŒ‰ç…§æ—¶é—´åˆ†åŒºï¼Œ/query/tmp/2022-06-09 12/ï¼Œè¿™æ ·æ¯æ¬¡åˆ é™¤ä¸Šä¸€åˆ†é’Ÿçš„æ–‡ä»¶å¤¹å³å¯ï¼Œå‡å°‘findæ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661664541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2021302,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d7/b6/534c036e.jpg","nickname":"å¯ä»¥å‘Šè¯‰æˆ‘ä½ åå­—å˜›","note":"","ucode":"AAAA58E95F54D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281061,"discussion_content":"è¿˜æœ‰ page cache","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591666983,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2021302,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/d7/b6/534c036e.jpg","nickname":"å¯ä»¥å‘Šè¯‰æˆ‘ä½ åå­—å˜›","note":"","ucode":"AAAA58E95F54D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281059,"discussion_content":"è¿™ä¸ªè€å¸ˆæœ‰è®²è¿‡,åœ¨IOç¯‡, å’Œslabæœ‰å…³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591666965,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92192,"user_name":"é™³å…ˆæ£®","can_delete":false,"product_type":"c1","uid":1229006,"ip_address":"","ucode":"0F7AC617E3FE90","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/ce/fc41ad5e.jpg","comment_is_top":false,"comment_ctime":1557198319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557198319","product_id":100020901,"comment_content":"åŸç†å¤§è‡´æ¸…æ¥šï¼Œä½†æ˜¯å·¥å…·ä¸æ˜¯å¤ªç†Ÿæ‚‰Â·Â·Â·è¿˜æ˜¯å¾—å¤šç»ƒï¼Œæ¦‚å¿µæ€§çš„ä¸œè¥¿å½“æ—¶è®°ä½äº†åé¢åˆå®¹æ˜“å¿˜ï¼ŒçŸ¥è¯†è¿˜æ˜¯è¦æ¸©æ•…è€ŒçŸ¥æ–°Â·Â·Â·è¿˜æ˜¯è¦å¤šçœ‹å‡ éï¼Œå¤šæ•²å‡ éæ‰è®°å¾—ä½ã€‚æ…¢æ…¢çš„å¹²è´§","like_count":0},{"had_liked":false,"id":83697,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1554705390,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554705390","product_id":100020901,"comment_content":"[D57æ‰“å¡]<br>å¯¹æ€§èƒ½åˆ†æçš„åŸç†,æ¯”ä¹‹å‰äº†è§£çš„å¤šå¤šäº†.<br>å·¥å…·è¿˜æ˜¯è¦ç»å¸¸ç”¨æ‰è¡Œ,ä¸ç”¨å°±å®¹æ˜“å¿˜è®°. æœ‰æ—¶ç”¨manè¿˜å¯ä»¥æƒ³èµ·ä¸€ç‚¹ç‚¹æ¥.<br><br>ä»Šå¤©åˆæŠŠè¿™äº›æŒ‡æ ‡å’Œå·¥å…·åˆæ¸©ä¹ äº†ä¸€é,ä»¥åä¹Ÿè¦å¸¸æ‹¿å‡ºæ¥æ¸©ä¹ æ‰è¡Œ.<br>æ¯•ç«Ÿç›®å‰çš„ä¸»è¦å·¥ä½œè¿˜ä¸æ˜¯æ€§èƒ½åˆ†æè¿™ä¸€å—.","like_count":1}]}