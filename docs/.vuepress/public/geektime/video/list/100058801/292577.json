{"id":292577,"title":"32 | SideOutput旁路输出","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-Flink\">https://gitee.com/geektime-geekbang/geektime-Flink</a></p>","comments":[{"had_liked":false,"id":254169,"user_name":"yang","can_delete":false,"product_type":"c3","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1603076131,"is_pvip":false,"replies":[{"id":93249,"content":"正解","user_name":"作者回复","user_name_real":"张利兵","uid":1119779,"ctime":1603527870,"ip_address":"","comment_id":254169,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"split 是作用在dataStream上，偏上层一些， 所有tag应用的是同一个outputSelector 所以 在这个selector产生的流的类型是相同的\n\noutputTag 作用在processFunction中，应该偏底层一些， 过滤的时候可以定义不同的tag， 所以就会产生不同类型的流\n\n相比于split侧输出流的优势在于可以输出多股不同类型的流吧","like_count":9,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507305,"discussion_content":"正解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603527870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1174199,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ea/b7/1a18a39d.jpg","nickname":"5-刘新波(Arvin)","note":"","ucode":"DBD135D2587A93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579608,"discussion_content":"应用在process function, API也更加统一","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657557513,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251696,"user_name":"泊浮目","can_delete":false,"product_type":"c3","uid":1067981,"ip_address":"","ucode":"182A7CC2F6BDAB","user_header":"https://static001.geekbang.org/account/avatar/00/10/4b/cd/185e5378.jpg","comment_is_top":false,"comment_ctime":1601801200,"is_pvip":false,"replies":[{"id":92267,"content":"可以这么理解","user_name":"作者回复","user_name_real":"张利兵","uid":1119779,"ctime":1602406521,"ip_address":"","comment_id":251696,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"从课程上的已知内容来讲，SplitOutput直接作用在ProcessFunction上则可以让任何一层的API使用到它，而不是仅仅对StreamAPI。这也是它的优势之一 ——不和StreamAPI绑定；另外一个优势则是可以输出和输入类型不同的数据。","like_count":2,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506586,"discussion_content":"可以这么理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602406521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251488,"user_name":"Pyer","can_delete":false,"product_type":"c3","uid":1159237,"ip_address":"","ucode":"8287EFD2268211","user_header":"https://static001.geekbang.org/account/avatar/00/11/b0/45/f0a63850.jpg","comment_is_top":false,"comment_ctime":1601611718,"is_pvip":false,"replies":[{"id":92269,"content":"正确","user_name":"作者回复","user_name_real":"张利兵","uid":1119779,"ctime":1602406624,"ip_address":"","comment_id":251488,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"split的话不能输出任意类型的数据，但是sideoutput可以.\n放在process function里面做，是为了可以更灵活，拿到流数据的更多信息。\n这么理解不知道对不对","like_count":0,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506517,"discussion_content":"正确","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602406624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281495,"user_name":"Allan","can_delete":false,"product_type":"c3","uid":1310388,"ip_address":"","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1614765053,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"我觉得Sideoutput更加灵活，不拘于类型的限制，可以根据需要创建多个output。","like_count":2},{"had_liked":false,"id":267649,"user_name":"°晓栎ゞ","can_delete":false,"product_type":"c3","uid":1592187,"ip_address":"","ucode":"A91159879AB4E9","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/7b/093e85b5.jpg","comment_is_top":false,"comment_ctime":1607855240,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"了解了split和sideoutput的区别  但没搞懂streamsplit一个源和一个源被不同的filter过滤有什么区别呢","like_count":1},{"had_liked":false,"id":294891,"user_name":"bbbi","can_delete":false,"product_type":"c3","uid":1682175,"ip_address":"","ucode":"9A539AEF791428","user_header":"https://static001.geekbang.org/account/avatar/00/19/aa/ff/e2c331e0.jpg","comment_is_top":false,"comment_ctime":1622124199,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"老师你好！ 我的sideOutPutTag 定义在main 函数中，但是我的 process 定义在新的类中，怎么把这个tag传入到新的 process 中呢，通过参数可以么？","like_count":0,"discussions":[{"author":{"id":1897276,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLibvuCpjiayibpiaaiaUWoTbqyFib7qEbXNoNHhFRTiaoZU5IXnGhXBPEkOLWic9BsL26L2JicFxn1XOEJJkg/132","nickname":"mmmm","note":"","ucode":"D0F4D6E559F97C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533242,"discussion_content":"通过构造函数传进去","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637823309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212081,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/b1/c9700e98.jpg","nickname":"林","note":"","ucode":"1D016CF7C8CA1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377184,"discussion_content":"我的经验是可以的。也可以把这个定义提取出来放到一个公共类。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622540664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288255,"user_name":"一十六夜","can_delete":false,"product_type":"c3","uid":1606581,"ip_address":"","ucode":"41D4A6695B2A7B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJIIibocUHNRgafeNUvibW0YI2v1qDaiaZCVQ37FcrMs0ettIDD0snhsy4Ac2ADnLmjM7KGNeznj2hrg/132","comment_is_top":false,"comment_ctime":1618381908,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"老师，OutputTag的泛型只能是String么，我用JSONObject的话，会报错：com.alibaba.fastjson.JSONObject cannot be cast to java.lang.String.......This can occur when multiple OutputTags with different types but identical names are being used\n我想问下，这种应该怎么写呢","like_count":0,"discussions":[{"author":{"id":1212081,"avatar":"https://static001.geekbang.org/account/avatar/00/12/7e/b1/c9700e98.jpg","nickname":"林","note":"","ucode":"1D016CF7C8CA1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377185,"discussion_content":"看报错是OutputTag的ID重复了，你看看定义的new OutputTag<JSONObject>(&#34;这里是ID&#34;) {}是否重复了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622541017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269219,"user_name":"Phantom01","can_delete":false,"product_type":"c3","uid":1140424,"ip_address":"","ucode":"9FA50D3B0A06DB","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/c8/f598a816.jpg","comment_is_top":false,"comment_ctime":1608559888,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"如果要同时做数据转换和切分 side output 会比 split 少一个 operator，写法上会紧凑一些。效率上可能看实现上具体怎么调度吧。\n\n然后比较好奇的是，在实现上如果切分成多个流来处理，是会把上游的处理结果读多遍吗？ 比如 transfer + filter * N 的方式来生成下游的 N 个流。","like_count":0}]}