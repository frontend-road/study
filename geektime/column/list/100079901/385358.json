{"id":385358,"title":"10ï½œå‡½æ•°ç»„ä»¶è®¾è®¡æ¨¡å¼ï¼šå¦‚ä½•åº”å¯¹å¤æ‚æ¡ä»¶æ¸²æŸ“åœºæ™¯ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹æ²›ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠå‡½æ•°ç»„ä»¶ä¸­çš„è®¾è®¡æ¨¡å¼ã€‚</p><p>æ‰€è°“è®¾è®¡æ¨¡å¼ï¼Œå°±æ˜¯<strong>é’ˆå¯¹ç‰¹å®šåœºæ™¯ï¼Œæä¾›ä¸€ç§å…¬è®¤çš„æœ€ä½³å®è·µ</strong>ã€‚åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»æåˆ°äº†ä¸å°‘æ¨¡å¼ï¼Œæ¯”å¦‚ä¿è¯çŠ¶æ€çš„å”¯ä¸€æ•°æ®æºï¼Œè¯­ä¹‰åŒ–çš„æ‹†åˆ†å¤æ‚ç»„ä»¶ï¼Œç­‰ç­‰ã€‚ç†Ÿç»ƒæŒæ¡è¿™äº›æ¨¡å¼ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ ç®€æ´ç›´è§‚ã€‚</p><p>é‚£ä¹ˆä»Šå¤©è¿™èŠ‚è¯¾æˆ‘ä¼šä»‹ç»å¦å¤–ä¸¤ä¸ªæ¨¡å¼ï¼š</p><ol>\n<li>ä¸€ä¸ªå’Œ Hooks ç›¸å…³ï¼Œç”¨äºè§£å†³ Hooks æ— æ³•åœ¨æ¡ä»¶è¯­å¥ä¸­æ‰§è¡Œå¸¦æ¥çš„ä¸€äº›éš¾é¢˜ï¼›</li>\n<li>å¦ä¸€ä¸ªåˆ™æ˜¯ç»å…¸çš„ render props æ¨¡å¼ï¼Œç”¨äºå®ç° UI é€»è¾‘çš„é‡ç”¨ã€‚</li>\n</ol><h2>å®¹å™¨æ¨¡å¼ï¼šå®ç°æŒ‰æ¡ä»¶æ‰§è¡Œ Hooks</h2><p>ç¬¬2è®²æˆ‘ä»¬ä»‹ç»äº† Hooks çš„ä¸€ä¸ªé‡è¦è§„åˆ™ï¼Œå³ï¼š<strong>Hooks å¿…é¡»åœ¨é¡¶å±‚ä½œç”¨åŸŸè°ƒç”¨</strong>ï¼Œè€Œä¸èƒ½æ”¾åœ¨æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰è¯­å¥ä¸­ï¼ŒåŒæ—¶ä¹Ÿä¸èƒ½åœ¨å¯èƒ½çš„ return è¯­å¥ä¹‹åæ‰§è¡Œã€‚æ¢å¥è¯è¯´ï¼ŒHooks å¿…é¡»æŒ‰é¡ºåºè¢«æ‰§è¡Œåˆ°ã€‚</p><p>è¿™ä¸ªè§„åˆ™å­˜åœ¨çš„åŸå› å°±åœ¨äºï¼Œ<strong>React éœ€è¦åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ç»´æŠ¤æ‰€ç”¨åˆ°çš„ Hooks çš„çŠ¶æ€</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ Hooksï¼Œè¿™å› è€Œä¼šç»™æˆ‘ä»¬å®ç°ä¸šåŠ¡é€»è¾‘å¸¦æ¥ä¸€å®šçš„å±€é™ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå¯¹äºä¸€ä¸ªå¯¹è¯æ¡†ç»„ä»¶ï¼Œé€šè¿‡ visible å±æ€§æ¥æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºã€‚é‚£ä¹ˆåœ¨ visible ä¸º false çš„æ—¶å€™ï¼Œå…¶å®ä¸åº”è¯¥æ‰§è¡Œä»»ä½•å¯¹è¯æ¡†å†…éƒ¨çš„é€»è¾‘ï¼Œå› ä¸ºè¿˜æ²¡å±•ç¤ºåœ¨ UI ä¸Šã€‚</p><p>éœ€è¦æ³¨æ„ï¼Œåªæœ‰åœ¨ visible ä¸ºtrue çš„æ—¶å€™æ‰åº”è¯¥å»æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå±•ç°æ•°æ®ã€‚é‚£ä¹ˆæˆ‘ä»¬æœŸæœ›çš„ä»£ç å¯èƒ½æ˜¯ä¸‹é¢çš„æ–¹å¼ï¼š</p><!-- [[[read_end]]] --><pre><code>import { Modal } from &quot;antd&quot;;\nimport useUser from &quot;../09/useUser&quot;;\n\nfunction UserInfoModal({ visible, userId, ...rest }) {\n  // å½“ visible ä¸º false æ—¶ï¼Œä¸æ¸²æŸ“ä»»ä½•å†…å®¹\n  if (!visible) return null;\n  // è¿™ä¸€è¡Œ Hook åœ¨å¯èƒ½çš„ return ä¹‹åï¼Œä¼šæŠ¥é”™ï¼\n  const { data, loading, error } = useUser(userId);\n\n  return (\n    &lt;Modal visible={visible} {...rest}&gt;\n      {/* å¯¹è¯æ¡†çš„å†…å®¹ */}\n    &lt;/Modal&gt;\n  );\n};\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æœŸæœ›åœ¨å¯¹è¯æ¡†éšè—æ—¶é€šè¿‡è¿”å› null ä¸å»æ¸²æŸ“ä»»ä½•å†…å®¹ï¼Œè¿™ä¸ªé€»è¾‘çœ‹ä¸Šå»éå¸¸è‡ªç„¶ç›´è§‚ã€‚</p><p>ä½†æ˜¯å‘¢ï¼Œå®ƒå´é€šä¸è¿‡ç¼–è¯‘ï¼Œå› ä¸ºåœ¨ return è¯­å¥ä¹‹åä½¿ç”¨äº† useUser è¿™ä¸ª Hookã€‚æ‰€ä»¥åœ¨ä½ çš„ç¼–è¾‘å™¨é…ç½®äº† React Hooks çš„ ESLint æ’ä»¶ä¹‹åï¼Œä¼šç»™å‡ºä¸‹é¢çš„é”™è¯¯æç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/49/fb/497d0d88e18a8a75237e7c22c2b9b3fb.png?wh=1328x562\" alt=\"\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå› ä¸º Hooks ä½¿ç”¨è§„åˆ™çš„å­˜åœ¨ï¼Œä½¿å¾—æœ‰æ—¶æŸäº›é€»è¾‘æ— æ³•ç›´è§‚åœ°å®ç°ã€‚æ¢å¥è¯è¯´ï¼ŒHooks åœ¨å¸¦æ¥ä¼—å¤šå¥½å¤„çš„åŒæ—¶ï¼Œä¹Ÿæˆ–å¤šæˆ–å°‘å¸¦æ¥äº†ä¸€äº›å±€é™ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªé—´æ¥çš„æ¨¡å¼æ¥å®ç°è¿™æ ·çš„é€»è¾‘ï¼Œå¯ä»¥ç§°ä¹‹ä¸º<strong>å®¹å™¨æ¨¡å¼</strong>ã€‚</p><p>å…·ä½“åšæ³•å°±æ˜¯<strong>æŠŠæ¡ä»¶åˆ¤æ–­çš„ç»“æœæ”¾åˆ°ä¸¤ä¸ªç»„ä»¶ä¹‹ä¸­ï¼Œç¡®ä¿çœŸæ­£ render UI çš„ç»„ä»¶æ”¶åˆ°çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯æœ‰å€¼çš„</strong>ã€‚</p><p>é’ˆå¯¹åˆšæ‰æˆ‘ä»¬è®²çš„ä¾‹å­ï¼Œå°±å¯ä»¥åœ¨ UserInfoModal å¤–å±‚åŠ ä¸€ä¸ªå®¹å™¨ï¼Œè¿™æ ·å°±èƒ½å®ç°æ¡ä»¶æ¸²æŸ“äº†ã€‚å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// å®šä¹‰ä¸€ä¸ªå®¹å™¨ç»„ä»¶ç”¨äºå°è£…çœŸæ­£çš„ UserInfoModal\nexport default function UserInfoModalWrapper({\n  visible,\n  ...rest, // ä½¿ç”¨ rest è·å–é™¤äº† visible ä¹‹å¤–çš„å±æ€§\n}) {\n  // å¦‚æœå¯¹è¯æ¡†ä¸æ˜¾ç¤ºï¼Œåˆ™ä¸ render ä»»ä½•å†…å®¹\n  if (!visible) return null; \n  // å¦åˆ™çœŸæ­£æ‰§è¡Œå¯¹è¯æ¡†çš„ç»„ä»¶é€»è¾‘\n  return &lt;UserInfoModal visible {...rest} /&gt;;\n}\n\n</code></pre><p>è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±é—´æ¥å®ç°äº†æŒ‰æ¡ä»¶å»æ‰§è¡Œ Hooks çš„é€»è¾‘ã€‚</p><p>åœ¨å®é™…çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼Œå¯èƒ½åˆ¤æ–­æ¡ä»¶ä¸æ­¢ visible ä¸€ä¸ªå±æ€§ï¼Œè€Œä¼šæ˜¯ä¸€äº›å±æ€§çš„ç»„åˆï¼Œæ¥å…·ä½“å†³å®š render ä»€ä¹ˆå†…å®¹ã€‚è™½ç„¶è¿™æ ·çš„åšæ³•ä¸å¤Ÿç›´è§‚ï¼Œä½†å…¶å®ä¹Ÿèƒ½å¸¦æ¥ä¸€äº›å¥½å¤„ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä½ ä¼šå°‘å†™ä¸€äº›æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œå¹¶ä¸”ç¡®ä¿æ¯ä¸ªç»„ä»¶å°½é‡çŸ­å°ï¼Œè¿™æ ·åè€Œæ›´åŠ æ˜“è¯»å’Œç»´æŠ¤ã€‚</p><p>åœ¨å®¹å™¨æ¨¡å¼ä¸­æˆ‘ä»¬å…¶å®ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæ¡ä»¶çš„éš”ç¦»å¯¹è±¡æ˜¯å¤šä¸ªå­ç»„ä»¶ï¼Œè¿™å°±æ„å‘³ç€å®ƒé€šå¸¸ç”¨äºä¸€äº›æ¯”è¾ƒå¤§å—é€»è¾‘çš„éš”ç¦»ã€‚æ‰€ä»¥å¯¹äºä¸€äº›æ¯”è¾ƒç»†èŠ‚çš„æ§åˆ¶ï¼Œå…¶å®è¿˜æœ‰ä¸€ç§åšæ³•ï¼Œå°±æ˜¯<strong>æŠŠåˆ¤æ–­æ¡ä»¶æ”¾åˆ° Hooks ä¸­å»</strong>ã€‚</p><p>æ¯”å¦‚ä¸ŠèŠ‚è¯¾çš„ä¾‹å­ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå‘é€è¯·æ±‚ï¼Œè·å¾—æ–‡ç« ä¿¡æ¯ï¼Œä»è€ŒçŸ¥é“ä½œè€…çš„ ID æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·æ‰èƒ½ç”¨ useUser è¿™ä¸ª Hook å»è·å–ç”¨æˆ·æ•°æ®ã€‚</p><p>é‚£ä¹ˆç›´è§‚çš„å†™æ³•æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p><pre><code>const ArticleView = ({ id }) =&gt; {\n  const { data: article, loading } = useArticle(id);\n  let user = null;\n  if (article?.userId) user = useUser(article?.userId).data;\n  // ç»„ä»¶å…¶å®ƒé€»è¾‘\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬éœ€è¦çš„ article è¿™ä¸ªå¯¹è±¡è·å–åˆ°ä¹‹åï¼Œæ‰èƒ½å»ç”¨ useUser è¿™ä¸ª Hook å†å»è·å–ç”¨æˆ·ä¿¡æ¯ã€‚é‚£ä¹ˆåŒæ ·çš„ï¼Œæ—¢ç„¶ Hook ä¸èƒ½æ”¾åˆ°æ¡ä»¶è¯­å¥ä¸­ï¼Œé‚£æˆ‘ä»¬åº”è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ</p><p>äº‹å®ä¸Šï¼Œä¸Šä¸€è®²çš„ä¾‹å­å·²ç»ç»™å‡ºäº†ç­”æ¡ˆï¼Œé‚£å°±æ˜¯æŠŠæ¡ä»¶è¯­å¥è‡ªåŒ…å«åœ¨ Hook ä¹‹ä¸­ã€‚è¿™æ ·å½“æ²¡æœ‰ä¼ é€’ userId ç»™ useUser è¿™ä¸ª Hook çš„æ—¶å€™ï¼Œå‰¯ä½œç”¨é‡Œå®é™…ä¸Šä»€ä¹ˆä¹Ÿä¸åšï¼Œæ¯”å¦‚ï¼š</p><pre><code>function useUser(id) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() =&gt; {\n    // å½“ id ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›ï¼Œä¸å‘é€è¯·æ±‚\n    if (!id) return\n    // è·å–ç”¨æˆ·ä¿¡æ¯çš„é€»è¾‘\n  });\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ useEffect ä¸­æˆ‘ä»¬ä¼šåˆ¤æ–­ ID æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå°±ä¸å‘é€è¯·æ±‚ã€‚è¿™æ ·çš„è¯ï¼Œè¿™ä¸ª Hook å°±å¯ä»¥åœ¨ç»„ä»¶ä¸­æ— æ¡ä»¶ä½¿ç”¨äº†ã€‚</p><p>æ€»ä½“æ¥è¯´ï¼Œé€šè¿‡è¿™æ ·ä¸€ä¸ªå®¹å™¨æ¨¡å¼ï¼Œæˆ‘ä»¬æŠŠåŸæ¥éœ€è¦æ¡ä»¶è¿è¡Œçš„ Hooks æ‹†åˆ†æˆå­ç»„ä»¶ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå®¹å™¨ç»„ä»¶æ¥è¿›è¡Œå®é™…çš„æ¡ä»¶åˆ¤æ–­ï¼Œä»è€Œæ¸²æŸ“ä¸åŒçš„ç»„ä»¶ï¼Œå®ç°æŒ‰æ¡ä»¶æ¸²æŸ“çš„ç›®çš„ã€‚è¿™åœ¨ä¸€äº›å¤æ‚çš„åœºæ™¯ä¹‹ä¸‹ï¼Œä¹Ÿèƒ½è¾¾åˆ°æ‹†åˆ†å¤æ‚åº¦ï¼Œè®©æ¯ä¸ªç»„ä»¶æ›´åŠ ç²¾ç®€çš„ç›®çš„ã€‚</p><h2>ä½¿ç”¨ render props æ¨¡å¼é‡ç”¨ UI é€»è¾‘</h2><p>å¯¹äº React å¼€å‘è€Œè¨€ï¼Œå¦‚æœè¦æŒ‘é€‰ä¸€ä¸ªæœ€é‡è¦çš„è®¾è®¡æ¨¡å¼ï¼Œé‚£ä¸€å®šæ˜¯ render propsã€‚å› ä¸ºå®ƒè§£å†³äº† UI é€»è¾‘çš„é‡ç”¨é—®é¢˜ï¼Œä¸ä»…é€‚ç”¨äº Class ç»„ä»¶ï¼Œåœ¨å‡½æ•°ç»„ä»¶çš„åœºæ™¯ä¸‹ä¹Ÿä¸å¯æˆ–ç¼ºã€‚</p><p>é‰´äºå¤§å®¶æ—¥å¸¸äº¤æµéƒ½ä¹ æƒ¯ç”¨è¿™ä¸ªè‹±æ–‡çš„åå­—ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä¹Ÿå°±ä¸ç¿»è¯‘æˆä¸­æ–‡äº†ã€‚é¡¾åæ€ä¹‰ï¼Œrender props å°±æ˜¯<strong>æŠŠä¸€ä¸ª render å‡½æ•°ä½œä¸ºå±æ€§ä¼ é€’ç»™æŸä¸ªç»„ä»¶ï¼Œç”±è¿™ä¸ªç»„ä»¶å»æ‰§è¡Œè¿™ä¸ªå‡½æ•°ä»è€Œ render å®é™…çš„å†…å®¹</strong>ã€‚</p><p>åœ¨ Class ç»„ä»¶æ—¶æœŸï¼Œrender props å’Œ HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰ä¸¤ç§æ¨¡å¼å¯ä»¥è¯´æ˜¯è¿›è¡Œé€»è¾‘é‡ç”¨çš„ä¸¤æŠŠåˆ©å™¨ï¼Œä½†æ˜¯å®é™…ä¸Šï¼ŒHOC çš„æ‰€æœ‰åœºæ™¯å‡ ä¹éƒ½å¯ä»¥ç”¨ render props æ¥å®ç°ã€‚å¯ä»¥è¯´ï¼Œ<strong>Hooksæ˜¯é€»è¾‘é‡ç”¨çš„ç¬¬ä¸€é€‰æ‹©</strong>ã€‚</p><p>ä¸è¿‡åœ¨å¦‚ä»Šçš„å‡½æ•°ç»„ä»¶æƒ…å†µä¸‹ï¼Œ<strong>Hooks</strong> æœ‰ä¸€ä¸ªå±€é™ï¼Œé‚£å°±æ˜¯<strong>åªèƒ½ç”¨ä½œæ•°æ®é€»è¾‘çš„é‡ç”¨</strong>ï¼Œè€Œä¸€æ—¦æ¶‰åŠ UI è¡¨ç°é€»è¾‘çš„é‡ç”¨ï¼Œå°±æœ‰äº›åŠ›ä¸ä»å¿ƒäº†ï¼Œè€Œè¿™æ­£æ˜¯ render props æ“…é•¿çš„åœ°æ–¹ã€‚æ‰€ä»¥ï¼Œ<strong>å³ä½¿æœ‰äº† Hooksï¼Œæˆ‘ä»¬ä¹Ÿè¦æŒæ¡ render props è¿™ä¸ªè®¾è®¡æ¨¡å¼çš„ç”¨æ³•</strong>ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ render props è¿™ä¸ªæ¨¡å¼ï¼Œæˆ‘å…ˆç»™ä½ ä¸¾ä¸€ä¸ªæ•°æ®é€»è¾‘é‡ç”¨çš„ç®€å•ä¾‹å­ã€‚è¿™ä¸ªä¾‹å­ä»ç„¶æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„è®¡æ•°å™¨ã€‚æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼ŒåŠ ä¸€å’Œå‡ä¸€ï¼Œå¹¶å°†å½“å‰å€¼æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šã€‚æ‰§è¡Œçš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/97/6a/97802efb8901c352a2666a41e1d85a6a.png?wh=206x98\" alt=\"\"></p><p>å¦‚æœä¸è€ƒè™‘ UI çš„å±•ç°ï¼Œè¿™é‡Œè¦æŠ½è±¡çš„ä¸šåŠ¡é€»è¾‘å°±æ˜¯è®¡æ•°é€»è¾‘ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ol>\n<li>count: å½“å‰è®¡æ•°å€¼ï¼›</li>\n<li>increase: è®©æ•°å€¼åŠ  1 çš„æ–¹æ³•ï¼›</li>\n<li>decrease: è®©æ•°å€¼å‡ 1 çš„æ–¹æ³•ã€‚</li>\n</ol><p>å¦‚æœç”¨ render props æ¨¡å¼æŠŠè¿™éƒ¨åˆ†é€»è¾‘å°è£…èµ·æ¥ï¼Œé‚£å°±å¯ä»¥åœ¨ä¸åŒçš„ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œç”±ä½¿ç”¨çš„ç»„ä»¶è‡ªè¡Œå†³å®š UI å¦‚ä½•å±•ç°ã€‚ä¸‹é¢çš„ä»£ç å°±æ˜¯è¿™ä¸ªè®¡æ•°å™¨çš„ render props çš„å®ç°ï¼š</p><pre><code>import { useState, useCallback } from &quot;react&quot;;\n\nfunction CounterRenderProps({ children }) {\n  const [count, setCount] = useState(0);\n  const increment = useCallback(() =&gt; {\n    setCount(count + 1);\n  }, [count]);\n  const decrement = useCallback(() =&gt; {\n    setCount(count - 1);\n  }, [count]);\n\n  return children({ count, increment, decrement });\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è¦æŠŠè®¡æ•°é€»è¾‘å°è£…åˆ°ä¸€ä¸ªè‡ªå·±ä¸ render ä»»ä½• UI çš„ç»„ä»¶ä¸­ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥ç”¨å¦‚ä¸‹çš„ä»£ç ï¼š</p><pre><code>function CounterRenderPropsExample() {\n  return (\n    &lt;CounterRenderProps&gt;\n      {({ count, increment, decrement }) =&gt; {\n        return (\n          &lt;div&gt;\n            &lt;button onClick={decrement}&gt;-&lt;/button&gt;\n            &lt;span&gt;{count}&lt;/span&gt;\n            &lt;button onClick={increment}&gt;+&lt;/button&gt;\n          &lt;/div&gt;\n        );\n      }}\n    &lt;/CounterRenderProps&gt;\n  );\n}\n</code></pre><p>è¿™é‡Œåˆ©ç”¨äº† children è¿™ä¸ªç‰¹æ®Šå±æ€§ã€‚ä¹Ÿå°±æ˜¯ç»„ä»¶å¼€å§‹ tag å’Œç»“æŸtag ä¹‹é—´çš„å†…å®¹ï¼Œå…¶å®æ˜¯ä¼šä½œä¸º children å±æ€§ä¼ é€’ç»™ç»„ä»¶ã€‚é‚£ä¹ˆåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ˜¯ç›´æ¥ä¼ é€’äº†ä¸€ä¸ªå‡½æ•°è¿‡å»ï¼Œç”±å®ç°è®¡æ•°é€»è¾‘çš„ç»„ä»¶å»è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶æŠŠç›¸å…³çš„ä¸‰ä¸ªå‚æ•°countï¼Œincrease å’Œ decrease ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬<strong>å®Œå…¨ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒçš„å±æ€§åå­—</strong>ï¼Œè€Œä¸æ˜¯ childrenã€‚æˆ‘ä»¬åªéœ€è¦<strong>æŠŠè¿™ä¸ª render å‡½æ•°ä½œä¸ºå±æ€§ä¼ é€’ç»™ç»„ä»¶</strong>å°±å¯ä»¥äº†ï¼Œè¿™ä¹Ÿæ­£æ˜¯ render props è¿™ä¸ªåå­—çš„ç”±æ¥ã€‚</p><p>è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†çº¯æ•°æ®é€»è¾‘çš„é‡ç”¨ï¼Œä¹Ÿå°±æ˜¯é‡ç”¨çš„ä¸šåŠ¡é€»è¾‘è‡ªå·±ä¸äº§ç”Ÿä»»ä½• UIã€‚é‚£ä¹ˆåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå…¶å®ç”¨ Hooks æ˜¯æ›´æ–¹ä¾¿çš„ï¼Œåœ¨<a href=\"http://https://time.geekbang.org/column/article/381423\">ç¬¬6è®²</a>ä¸­ï¼Œæˆ‘å…¶å®å·²ç»ç»™è¿‡è¿™ä¹ˆè®¡æ•°å™¨çš„ Hooks å®ç°çš„ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import { useState, useCallback }from 'react';\n \nfunction useCounter() {\n  // å®šä¹‰ count è¿™ä¸ª state ç”¨äºä¿å­˜å½“å‰æ•°å€¼\n  const [count, setCount] = useState(0);\n  // å®ç°åŠ  1 çš„æ“ä½œ\n  const increment = useCallback(() =&gt; setCount(count + 1), [count]);\n  // å®ç°å‡ 1 çš„æ“ä½œ\n  const decrement = useCallback(() =&gt; setCount(count - 1), [count]);\n  \n  // å°†ä¸šåŠ¡é€»è¾‘çš„æ“ä½œ export å‡ºå»ä¾›è°ƒç”¨è€…ä½¿ç”¨\n  return { count, increment, decrement };\n}\n</code></pre><p>å¾ˆæ˜¾ç„¶ï¼Œä½¿ç”¨ Hooks çš„æ–¹å¼æ˜¯æ›´ç®€æ´çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ç»å¸¸è¯´ Hooks èƒ½å¤Ÿæ›¿ä»£ render props è¿™ä¸ªè®¾è®¡æ¨¡å¼ã€‚ä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHooks ä»…èƒ½æ›¿ä»£çº¯æ•°æ®é€»è¾‘çš„ render propsã€‚å¦‚æœæœ‰ UI å±•ç¤ºçš„é€»è¾‘éœ€è¦é‡ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜æ˜¯å¿…é¡»å€ŸåŠ©äº render props çš„é€»è¾‘ï¼Œè¿™å°±æ˜¯æˆ‘ä¸€å†å¼ºè°ƒå¿…é¡»<strong>è¦æŒæ¡ render props è¿™ç§è®¾è®¡æ¨¡å¼</strong>çš„åŸå› ã€‚</p><p>ä¸ºäº†è§£é‡Šè¿™ä¸ªç”¨æ³•ï¼Œæˆ‘ç»™ä½ ä¸¾ä¸€ä¸ªä¾‹å­ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾ç¤ºä¸€ä¸ªåˆ—è¡¨ï¼Œå¦‚æœè¶…è¿‡ä¸€å®šæ•°é‡ï¼Œåˆ™æŠŠå¤šä½™çš„éƒ¨åˆ†æŠ˜å èµ·æ¥ï¼Œé€šè¿‡ä¸€ä¸ªå¼¹å‡ºæ¡†å»æ˜¾ç¤ºã€‚ä¸‹é¢è¿™å¼ å›¾å¯ä»¥æ¯”è¾ƒç›´è§‚åœ°å±•ç¤ºè¿™ä¸ªéœ€æ±‚çš„å®é™…è¿è¡Œæ•ˆæœï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/00/3b/0042d03a6c11cfee5e642ee1c984723b.png?wh=1104x860\" alt=\"\"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå±•ç¤ºäº†ä¸¤ä¸ªåˆ—è¡¨ã€‚ä¸€ä¸ªåªæ˜¾ç¤ºç”¨æˆ·åï¼Œè¿™åœ¨ä¸€äº›ç¤¾äº¤è½¯ä»¶çš„ç•Œé¢ä¸Šå¾ˆå¸¸è§ï¼Œåªæ˜¾ç¤ºå‡ ä¸ªç‚¹èµçš„ç”¨æˆ·ï¼Œå¤šä½™çš„ç”¨ä¸€ä¸ªæ•°å­—æ¥è¡¨ç¤ºï¼Œé¼ æ ‡ç§»ä¸Šå»åˆ™è·³è½¬æˆ–è€…æ˜¾ç¤ºå®Œæ•´åˆ—è¡¨ã€‚</p><p>å¦å¤–ä¸€ä¸ªæ˜¯è¡¨æ ¼ï¼Œä½†æ˜¯ä¹Ÿåªæ˜¾ç¤ºå‰é¢5ä¸ªï¼Œå¤šä½™çš„æŠ˜å åˆ° â€œæ›´å¤š...â€ é‡Œé¢ã€‚æ¯”å¦‚è¯´ï¼Œå¯¹äºç¬¬ä¸€ä¸ªï¼Œé¼ æ ‡ç§»ä¸Šå»åçš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/a5/1d/a54b8216426a5523c4e047509a7b8e1d.png?wh=962x240\" alt=\"\"></p><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚å¯¹äºè¿™ä¸€ç±»åœºæ™¯ï¼Œ<strong>åŠŸèƒ½ç›¸åŒçš„éƒ¨åˆ†</strong>æ˜¯ï¼šæ•°æ®è¶…è¿‡ä¸€å®šæ•°é‡æ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ª â€œæ›´å¤š...â€çš„æ–‡å­—ï¼›é¼ æ ‡ç§»ä¸Šå»åˆ™å¼¹å‡ºä¸€ä¸ªæ¡†ï¼Œç”¨äºæ˜¾ç¤ºå…¶å®ƒçš„æ•°æ®ã€‚</p><p><strong>åŠŸèƒ½ä¸åŒçš„éƒ¨åˆ†</strong>æ˜¯ï¼šæ¯ä¸€ä¸ªåˆ—è¡¨é¡¹å¦‚ä½•æ¸²æŸ“ï¼Œæ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™å†³å®šçš„ã€‚</p><p>å› æ­¤ï¼Œå¯¹äºè¿™ä¸€ç±»å…·æœ‰ UI é€»è¾‘é‡ç”¨éœ€æ±‚çš„åœºæ™¯ï¼Œæˆ‘ä»¬å°±æ— æ³•é€šè¿‡ Hooks å®ç°ï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡ render props è¿™ä¸ªè®¾è®¡æ¨¡å¼ã€‚</p><p>ä¸‹é¢è¿™æ®µä»£ç å±•ç¤ºäº†å¦‚ä½•å®ç°è¿™ä¸ªåŒ…å«äº† render props çš„ ListWithMore ç»„ä»¶ï¼š</p><pre><code>import { Popover } from &quot;antd&quot;;\n\nfunction ListWithMore({ renderItem, data = [], max }) {\n  const elements = data.map((item, index) =&gt; renderItem(item, index, data));\n  const show = elements.slice(0, max);\n  const hide = elements.slice(max);\n  return (\n    &lt;span className=&quot;exp-10-list-with-more&quot;&gt;\n      {show}\n      {hide.length &gt; 0 &amp;&amp; (\n        &lt;Popover content={&lt;div style={{ maxWidth: 500 }}&gt;{hide}&lt;/div&gt;}&gt;\n          &lt;span className=&quot;more-items-wrapper&quot;&gt;\n            and{&quot; &quot;}\n            &lt;span className=&quot;more-items-trigger&quot;&gt; {hide.length} more...&lt;/span&gt;\n          &lt;/span&gt;\n        &lt;/Popover&gt;\n      )}\n    &lt;/span&gt;\n  );\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªç»„ä»¶æ¥æ”¶äº†ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol>\n<li>renderItemï¼šç”¨äºæ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œç”±çˆ¶ç»„ä»¶å†³å®šå¦‚ä½•æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨é¡¹ï¼›</li>\n<li>dataï¼šéœ€è¦æ¸²æŸ“çš„æ•°æ®ï¼›</li>\n<li>maxï¼šæœ€å¤šæ˜¾ç¤ºå‡ æ¡æ•°æ®ã€‚</li>\n</ol><p>è¿™æ ·ï¼Œä»»ä½•æœ‰ç±»ä¼¼éœ€æ±‚çš„åœºæ™¯å°±éƒ½å¯ä»¥ç”¨è¿™ä¸ªç»„ä»¶å»å®ç°äº†ã€‚ä¸‹é¢è¿™æ®µä»£ç å±•ç¤ºäº†ä¸Šé¢ç¤ºæ„å›¾ä¸­ä¸¤ä¸ªåœºæ™¯çš„å®ç°ä»£ç ï¼Œä½ å¯ä»¥ä½“ä¼šä¸€ä¸‹ï¼š</p><pre><code>// è¿™é‡Œç”¨ä¸€ä¸ªç¤ºä¾‹æ•°æ®\nimport data from './data';\n\nfunction ListWithMoreExample () =&gt; {\n  return (\n    &lt;div className=&quot;exp-10-list-with-more&quot;&gt;\n      &lt;h1&gt;User Names&lt;/h1&gt;\n      &lt;div className=&quot;user-names&quot;&gt;\n        Liked by:{&quot; &quot;}\n        &lt;ListWithMore\n          renderItem={(user) =&gt; {\n            return &lt;span className=&quot;user-name&quot;&gt;{user.name}&lt;/span&gt;;\n          }}\n          data={data}\n          max={3}\n        /&gt;\n      &lt;/div&gt;\n      &lt;br /&gt;\n      &lt;br /&gt;\n      &lt;h1&gt;User List&lt;/h1&gt;\n      &lt;div className=&quot;user-list&quot;&gt;\n        &lt;div className=&quot;user-list-row user-list-row-head&quot;&gt;\n          &lt;span className=&quot;user-name-cell&quot;&gt;Name&lt;/span&gt;\n          &lt;span&gt;City&lt;/span&gt;\n          &lt;span&gt;Job Title&lt;/span&gt;\n        &lt;/div&gt;\n        &lt;ListWithMore\n          renderItem={(user) =&gt; {\n            return (\n              &lt;div className=&quot;user-list-row&quot;&gt;\n                &lt;span className=&quot;user-name-cell&quot;&gt;{user.name}&lt;/span&gt;\n                &lt;span&gt;{user.city}&lt;/span&gt;\n                &lt;span&gt;{user.job}&lt;/span&gt;\n              &lt;/div&gt;\n            );\n          }}\n          data={data}\n          max={5}\n        /&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n};\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œä»£ç é‡Œä½¿ç”¨äº†ä¸¤ä¸ª ListWithMore ç»„ä»¶ï¼Œé€šè¿‡ renderItem è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªä¸»å†³å®šè¯¥å¦‚ä½•æ¸²æŸ“æ¯ä¸€ä¸ªåˆ—è¡¨é¡¹ï¼Œä»è€ŒæŠŠä¸€éƒ¨åˆ† UI é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œå½¢æˆä¸€ä¸ªå¯å¤ç”¨çš„é€»è¾‘ï¼Œä»¥ç®€åŒ–ä¸åŒåœºæ™¯çš„ä½¿ç”¨ã€‚</p><h2>å°ç»“</h2><p>åœ¨ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸¤ä¸ªè®¾è®¡æ¨¡å¼ã€‚</p><p>ä¸€ä¸ªæ˜¯å®¹å™¨æ¨¡å¼ï¼Œå¯ä»¥å®ç°ç±»ä¼¼äºæŒ‰æ¡ä»¶æ‰§è¡Œ Hooks çš„åŠŸèƒ½ã€‚è™½ç„¶è¿™æ˜¯ä¸€ä¸ªé—´æ¥çš„æ–¹å¼ï¼Œä½†æ˜¯èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°åšç»„ä»¶é€»è¾‘çš„åˆ†ç¦»ã€‚</p><p>ç¬¬äºŒä¸ªåˆ™æ˜¯ç»å…¸çš„ render props æ¨¡å¼ï¼Œè™½ç„¶å®ƒå’Œ Hooks æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä½†å®ƒå¯ä»¥ä½œä¸º Hooks çš„ä¸€ä¸ªè¡¥å……ã€‚åœ¨æˆ‘ä»¬éœ€è¦é‡ç”¨æŸäº› UI é€»è¾‘çš„æ—¶å€™ï¼Œæä¾›ä¸€ä¸ªå®ç°æ–¹æ¡ˆã€‚</p><p>è¯¾ç¨‹ä¸­çš„ä»£ç ï¼Œä»¥åŠåœ¨çº¿è¿è¡Œæ•ˆæœçš„é“¾æ¥åœ¨è¿™é‡Œï¼š <a href=\"https://codesandbox.io/s/react-hooks-course-20vzg\">https://codesandbox.io/s/react-hooks-course-20vzg</a> ã€‚ä½ å¯ä»¥ fork åè‡ªå·±åŠ¨æ‰‹å°è¯•ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æ€è€ƒä¸€ä¸‹ä½ åšè¿‡çš„é¡¹ç›®ï¼Œä½ èƒ½æƒ³åˆ°å“ªäº› render props æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯å‘¢ï¼Ÿæ¬¢è¿äº¤æµåˆ†äº«ã€‚</p>","comments":[{"had_liked":false,"id":298175,"user_name":"Free fall","can_delete":false,"product_type":"c1","uid":2637054,"ip_address":"","ucode":"8DBF73CD0F423F","user_header":"","comment_is_top":false,"comment_ctime":1623934815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27393738591","product_id":100079901,"comment_content":"åšè¿‡ä¸€ä¸ªæ–‡ä»¶é¢„è§ˆçš„åŠŸèƒ½ï¼Œæ ¹æ®é€‰ä¸­çš„æ–‡ä»¶ç±»å‹ï¼Œç”¨å¯¹åº”çš„æ’ä»¶é¢„è§ˆ","like_count":6},{"had_liked":false,"id":304412,"user_name":"æ—æ–Œ","can_delete":false,"product_type":"c1","uid":1038425,"ip_address":"","ucode":"EA44A69E8C9457","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d8/59/2fc5886b.jpg","comment_is_top":false,"comment_ctime":1627393775,"is_pvip":false,"replies":[{"id":"110289","content":"æ–‡ä¸­æåˆ°ï¼Œå¯èƒ½æ˜¯å±æ€§ç»„åˆä¸åªvisibleï¼Œæ ¹æ®ä¸åŒçš„çŠ¶æ€æ¥å†³å®šæ˜¯å¦è¦ render çœŸæ­£çš„ç»„ä»¶ï¼Œè¿™éƒ¨åˆ†é€»è¾‘å±äº Modal ç»„ä»¶ï¼Œä¸åº”è¯¥ç”±è°ƒç”¨è€…å»å®ç°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Nate","uid":"1018676","ctime":1627699335,"ip_address":"","comment_id":304412,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18807262959","product_id":100079901,"comment_content":"ç¬¬ä¸€ä¸ªdemoä¸æƒ³å±•ç¤ºçš„è¯ï¼Œç›´æ¥åœ¨çˆ¶çº§ visible &amp;&amp; &lt;UserInfoModal &#47;&gt; ä¸å°±å¥½äº†å—ï¼Ÿ ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦å¤šä¸€å±‚åµŒå¥—ï½","like_count":4,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524035,"discussion_content":"æ–‡ä¸­æåˆ°ï¼Œå¯èƒ½æ˜¯å±æ€§ç»„åˆä¸åªvisibleï¼Œæ ¹æ®ä¸åŒçš„çŠ¶æ€æ¥å†³å®šæ˜¯å¦è¦ render çœŸæ­£çš„ç»„ä»¶ï¼Œè¿™éƒ¨åˆ†é€»è¾‘å±äº Modal ç»„ä»¶ï¼Œä¸åº”è¯¥ç”±è°ƒç”¨è€…å»å®ç°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627699335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298224,"user_name":"ä½•ç”¨","can_delete":false,"product_type":"c1","uid":1377393,"ip_address":"","ucode":"B0C6E8176AE6FD","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/71/0b949a4c.jpg","comment_is_top":false,"comment_ctime":1623975037,"is_pvip":false,"replies":[{"id":"108259","content":"å¾ˆå¥½çš„é—®é¢˜ã€‚å¦‚æœè€ƒè™‘åŠ¨ç”»çš„åœºæ™¯ï¼Œé‚£ä¹ˆ visible ä» false -&gt; true æ˜¯ä¼šé»˜è®¤ä¿ç•™åŠ¨ç”»ï¼›å¦‚æœæ˜¯ true -&gt; falseï¼Œé‚£å–å†³äºä»€ä¹ˆæ—¶å€™è®¾ç½® visibleã€‚æ¯”å¦‚å¯¹äº antd çš„ Modalï¼Œå¯ä»¥åœ¨ afterClose äº‹ä»¶é‡Œå†å»è®¾ç½® visible ä¸º falseï¼Œä¹Ÿå°±æ˜¯åŠ¨ç”»ç»“æŸåæ‰æ˜¯çœŸæ­£çš„ visible=falseï¼Œé‚£å°±ä¼šä¿ç•™åŠ¨ç”»äº†ã€‚æ‰€ä»¥è¿™å±äºå…·ä½“å¦‚ä½•å°è£…çš„å®ç°ç»†èŠ‚ï¼Œå…·ä½“æƒ…å†µå…·ä½“è€ƒè™‘ï¼Œæ€»ä½“çš„æ¨¡å¼æ˜¯ä¸å˜çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Nate","uid":"1018676","ctime":1624012442,"ip_address":"","comment_id":298224,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18803844221","product_id":100079901,"comment_content":"UserInfoModalWrapper è€ƒè™‘ Modal åŠ¨ç”»äº†å—ï¼Ÿè¿™ç§æ”¹å†™ä¸æ˜¯ç­‰ä»·çš„ï¼Œä¼šæ•£å¤±åŠ¨ç”»æ•ˆæœ","like_count":5,"discussions":[{"author":{"id":1018676,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8b/34/61035278.jpg","nickname":"Nate","note":"","ucode":"844B4C20BB3D6E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522062,"discussion_content":"å¾ˆå¥½çš„é—®é¢˜ã€‚å¦‚æœè€ƒè™‘åŠ¨ç”»çš„åœºæ™¯ï¼Œé‚£ä¹ˆ visible ä» false -&amp;gt; true æ˜¯ä¼šé»˜è®¤ä¿ç•™åŠ¨ç”»ï¼›å¦‚æœæ˜¯ true -&amp;gt; falseï¼Œé‚£å–å†³äºä»€ä¹ˆæ—¶å€™è®¾ç½® visibleã€‚æ¯”å¦‚å¯¹äº antd çš„ Modalï¼Œå¯ä»¥åœ¨ afterClose äº‹ä»¶é‡Œå†å»è®¾ç½® visible ä¸º falseï¼Œä¹Ÿå°±æ˜¯åŠ¨ç”»ç»“æŸåæ‰æ˜¯çœŸæ­£çš„ visible=falseï¼Œé‚£å°±ä¼šä¿ç•™åŠ¨ç”»äº†ã€‚æ‰€ä»¥è¿™å±äºå…·ä½“å¦‚ä½•å°è£…çš„å®ç°ç»†èŠ‚ï¼Œå…·ä½“æƒ…å†µå…·ä½“è€ƒè™‘ï¼Œæ€»ä½“çš„æ¨¡å¼æ˜¯ä¸å˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624012442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1377393,"avatar":"https://static001.geekbang.org/account/avatar/00/15/04/71/0b949a4c.jpg","nickname":"ä½•ç”¨","note":"","ucode":"B0C6E8176AE6FD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379659,"discussion_content":"!visible è¿”å› null è¿™è¡Œä»£ç å°±æŠŠåŠ¨ç”»ç»™æ‰¼æ€äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624060537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300854,"user_name":"é˜¿ç¦¹ã€‚","can_delete":false,"product_type":"c1","uid":1385384,"ip_address":"","ucode":"BA6FE447701A6B","user_header":"https://static001.geekbang.org/account/avatar/00/15/23/a8/d0fb2944.jpg","comment_is_top":false,"comment_ctime":1625405720,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14510307608","product_id":100079901,"comment_content":"antdä¸­è¡¨å•ç»„ä»¶ä¹Ÿæ˜¯æœ‰ç”¨åˆ°render propsæ¨¡å¼ã€‚ç¡®å®åœ¨æœ‰äº›åœ°æ–¹å¾ˆçµæ´»ã€‚","like_count":3},{"had_liked":false,"id":298287,"user_name":"çŸ¥é±¼","can_delete":false,"product_type":"c1","uid":1449739,"ip_address":"","ucode":"1FF49E9094738F","user_header":"https://static001.geekbang.org/account/avatar/00/16/1f/0b/c618eca6.jpg","comment_is_top":false,"comment_ctime":1624000279,"is_pvip":false,"replies":[{"id":"108240","content":"æ²¡æœ‰å•¦ï¼ŒçŸ¥é±¼åŒå­¦ï½è¿™æ¬¡ç‹æ²›è€å¸ˆå¸¦æ¥çš„æ˜¯ä¸“æ ï¼Œä¸»è¦æ˜¯æ–‡å­—â•éŸ³é¢‘çš„å½¢å¼å“¦ï½å¯¹äºReact Hooksçš„å­¦ä¹ æ¥è¯´å®Œå…¨å¤Ÿç”¨äº†ï¼Œè€å¸ˆä¹Ÿè®²å¾—å¾ˆæ¸…æ™°ã€‚","user_name":"ç¼–è¾‘å›å¤","user_name_real":"æè¾°æ´‹","uid":"2189689","ctime":1624004822,"ip_address":"","comment_id":298287,"utype":2}],"discussion_count":1,"race_medal":0,"score":"14508902167","product_id":100079901,"comment_content":"åæœŸä¼šæœ‰è§†é¢‘å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":2189689,"avatar":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","nickname":"ğŸ‘","note":"","ucode":"DE34B3B14287D1","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522084,"discussion_content":"æ²¡æœ‰å•¦ï¼ŒçŸ¥é±¼åŒå­¦ï½è¿™æ¬¡ç‹æ²›è€å¸ˆå¸¦æ¥çš„æ˜¯ä¸“æ ï¼Œä¸»è¦æ˜¯æ–‡å­—â•éŸ³é¢‘çš„å½¢å¼å“¦ï½å¯¹äºReact Hooksçš„å­¦ä¹ æ¥è¯´å®Œå…¨å¤Ÿç”¨äº†ï¼Œè€å¸ˆä¹Ÿè®²å¾—å¾ˆæ¸…æ™°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624004822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335501,"user_name":"ChenQinf","can_delete":false,"product_type":"c1","uid":1609535,"ip_address":"","ucode":"E2D6841DFB1569","user_header":"https://static001.geekbang.org/account/avatar/00/18/8f/3f/b1d28312.jpg","comment_is_top":false,"comment_ctime":1645541503,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5940508799","product_id":100079901,"comment_content":"render propsä½œç”¨å¯ä»¥ç†è§£æˆvueä¸­çš„slotå—","like_count":1,"discussions":[{"author":{"id":1509271,"avatar":"https://static001.geekbang.org/account/avatar/00/17/07/97/980d36e2.jpg","nickname":"Tio Kang","note":"","ucode":"841190098F8F90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576330,"discussion_content":"render props çš„ä½œç”¨åº”è¯¥æ˜¯æ›´å¤šç†è§£ä¸º vue ä¸­çš„ is å±æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655437255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327230,"user_name":"Osmond","can_delete":false,"product_type":"c1","uid":2836830,"ip_address":"","ucode":"7D04C6D7B0DDCB","user_header":"https://static001.geekbang.org/account/avatar/00/2b/49/5e/f430ff83.jpg","comment_is_top":false,"comment_ctime":1639992210,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5934959506","product_id":100079901,"comment_content":"æ„Ÿè§‰å¾ˆå¤šUIç»„ä»¶æ¯”å¦‚è¯´antd çš„ç»„ä»¶ï¼Œå°±å¾ˆåƒæ˜¯ç”¨äº†render propså®ç°äº†ç»„ä»¶çš„é‡ç”¨å§","like_count":1},{"had_liked":false,"id":354939,"user_name":"Jun Ma","can_delete":false,"product_type":"c1","uid":1374957,"ip_address":"å››å·","ucode":"0C5E2AB51E6A83","user_header":"https://static001.geekbang.org/account/avatar/00/14/fa/ed/0742b854.jpg","comment_is_top":false,"comment_ctime":1660896275,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660896275","product_id":100079901,"comment_content":"CountRenderPropsæœ‰ç‚¹ç»•ã€‚æˆ‘è¯´ä¸‹æˆ‘çš„ç†è§£ï¼š<br><br>1ã€è¿™ä¸ªrender propsçš„children å®é™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ è€Œä¸æ˜¯UIç»„ä»¶ã€‚ <br>æ¯ä¸€ä¸ªç»„ä»¶éƒ½æ‹¥æœ‰props, è€Œprops.children å°±æŒ‡ä»£äº† å¼€å§‹tagå’Œç»“æŸtag çš„å†…å®¹ï¼Œ propsé‡Œé¢å…¶å®è¿˜åŒ…å«äº†æ ‡ç­¾è‡ªå·±çš„ä¸€äº›éœ€è¦ä¼ é€’çš„å±æ€§ã€‚<br><br>2ã€åœ¨CountRenderProps é‡Œé¢ï¼Œé€šè¿‡childrenè¿™ä¸ªå½¢å‚ï¼Œæ‰§è¡Œäº†è¿™ä¸ªå‡½æ•°ã€‚  è€Œä¸”ï¼Œæ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼ é€’ç»™äº†childrenä¸‰ä¸ªå‚æ•°ï¼Œcount,increase,decreaseã€‚<br>å‡½æ•°çš„å…·ä½“å½¢å¼ï¼Œåˆ™æ˜¯ç”±å¤–éƒ¨çš„çˆ¶ç»„ä»¶ä½¿ç”¨æ—¶å»å®šä¹‰ï¼Œè€Œä¸”åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°è¿™ä¸‰ä¸ªå‚æ•°ï¼Œæœ‰ç‚¹ç±»ä¼¼äºå›è°ƒå‡½æ•°ã€‚","like_count":0},{"had_liked":false,"id":299992,"user_name":"cty","can_delete":false,"product_type":"c1","uid":1392853,"ip_address":"","ucode":"47A492728F56A8","user_header":"https://static001.geekbang.org/account/avatar/00/15/40/d5/5f91aee3.jpg","comment_is_top":false,"comment_ctime":1624949646,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1624949646","product_id":100079901,"comment_content":"è€å¸ˆæƒ³é—®ä¸€ä¸‹HOCå­˜åœ¨çš„æ„ä¹‰åœ¨å“ªé‡Œå‘¢ï¼Ÿæ„Ÿè§‰èƒ½å¤Ÿç”¨HOCçš„åœºæ™¯éƒ½å¯ä»¥ç”¨render propsæ¥æ›¿ä»£ï¼Œä»é€»è¾‘è§’åº¦è®²ï¼Œrender propsçš„é€»è¾‘æ›´æ¸…æ™°ï¼ŒHOCçš„ä½¿ç”¨é€»è¾‘åˆ™æ›´åŠ å†—ä½™ã€‚å®åœ¨æƒ³ä¸å‡ºæ¥æœ‰ä»€ä¹ˆæ˜¯ä¸€å®šéœ€è¦ä½¿ç”¨HOCçš„åœºæ™¯ï¼Œè¿˜æœ›è€å¸ˆè§£æƒ‘ã€‚","like_count":0,"discussions":[{"author":{"id":2003923,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/93/d3/97497cbe.jpg","nickname":"OriX","note":"","ucode":"EEC1CF06115CD6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387664,"discussion_content":"æˆ‘è¿™è¾¹äº†è§£åˆ°çš„å‘å±•å²å°±æ˜¯ mixin---hoc---render props---customer hook æ‰€ä»¥å¯ä»¥äº’ç›¸æ›¿ä»£ä¹Ÿæ˜¯æ­£å¸¸çš„ åä¸€ç§æ¨¡å¼å¾€å¾€æ¯”ä¸Šä¸€ç§æ›´ä¼˜é€‰  render propsçš„ç¼ºç‚¹å°±æ˜¯æ¯”è¾ƒéš¾ä»¥é˜…è¯»","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1628330738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1378201,"avatar":"https://static001.geekbang.org/account/avatar/00/15/07/99/2c12c56c.jpg","nickname":"æµ©ç„¶","note":"","ucode":"FC771E92869796","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558863,"discussion_content":"å¦‚æœä½ åŠ¨ä¸äº†åŸæ¥çš„ç»„ä»¶å¯ä»¥é€‰HOC","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648513810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299053,"user_name":"H","can_delete":false,"product_type":"c1","uid":2036145,"ip_address":"","ucode":"99558A1CF3DF4F","user_header":"https://static001.geekbang.org/account/avatar/00/1f/11/b1/4379e143.jpg","comment_is_top":false,"comment_ctime":1624440113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624440113","product_id":100079901,"comment_content":"å­¦ä¹ è€å¸ˆçš„æ–‡ç« å¥½çˆ½ï¼Œå¥½æœŸå¾…è¿™é—¨è¯¾ä¹‹åè¿˜ä¼šæœ‰å…¶å®ƒè¯¾ç¨‹","like_count":0},{"had_liked":false,"id":298220,"user_name":"Geek_71adef","can_delete":false,"product_type":"c1","uid":2643315,"ip_address":"","ucode":"E3CC6F6FBB1468","user_header":"","comment_is_top":false,"comment_ctime":1623966880,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623966880","product_id":100079901,"comment_content":"å¯¹äºæ–°åŠ &#47;ä¿®æ”¹è¡¨å•(è¡¨å•å­—æ®µè¾ƒå¤š)ï¼Œè¿™ç§æ˜¯ä¸æ˜¯ä¸é€‚åˆç”¨render props ï¼Œè€Œç»„ä»¶ç›´æ¥å¼•å…¥ï¼Œä¼ é€’å‚æ•°è¿™æ ·æ›´å¥½ï¼Œè¿™æ ·çš„ç†è§£å¯¹ä¹ˆ","like_count":0},{"had_liked":false,"id":298184,"user_name":"ä¸ä½ .","can_delete":false,"product_type":"c1","uid":2167786,"ip_address":"","ucode":"68734A44F1B086","user_header":"https://static001.geekbang.org/account/avatar/00/21/13/ea/e95bc408.jpg","comment_is_top":false,"comment_ctime":1623939800,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1623939800","product_id":100079901,"comment_content":"å­¦reactçš„æ—¶å€™ç›´æ¥å­¦è¿‡hooksï¼Œ å¯¹äºè¿™ä¸ªrender propså¥½åƒè¿˜æ˜¯ä¸ç†è§£","like_count":0,"discussions":[{"author":{"id":1448473,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1a/19/5e4ca139.jpg","nickname":"å’šé—¨","note":"","ucode":"DD4E8734370BBF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400735,"discussion_content":"å…¶å®å°±ä¼ äº†ä¸€ä¸ªfunction ç±»å‹çš„å±æ€§ç»™å­ç»„ä»¶è°ƒç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633402521,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}