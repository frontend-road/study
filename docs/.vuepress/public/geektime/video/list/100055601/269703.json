{"id":269703,"title":"30 | 实现工具类：设计获得验证码、随机字符串生成、cookie操作工具类","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Selenium\">https://gitee.com/geektime-geekbang/Selenium</a></p>","comments":[{"had_liked":false,"id":240684,"user_name":"Geek_jf52tq","can_delete":false,"product_type":"c3","uid":1350004,"ip_address":"","ucode":"69702DFB599C49","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/V5Q9iapkWRXblWVn7fpnA5l9nAKF023UPDnS7bib8Ylrt91epNicdeJFic0fDH8W4ickO4cdylNN50kYn9pWSDCgHEg/132","comment_is_top":false,"comment_ctime":1597033485,"is_pvip":false,"replies":[{"id":88850,"content":"嗯 也可以","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1597047101,"ip_address":"","comment_id":240684,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"百度的通用文字识别也不错，50000次&#47;天免费 + 超出按量计费","like_count":1,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503525,"discussion_content":"嗯 也可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597047101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1173140,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e6/94/ba217a11.jpg","nickname":"涓涓","note":"","ucode":"16C6C308BA2816","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384152,"discussion_content":"我也是，用的百度高精度的，识别不准，弃用","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626405300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1184635,"avatar":"https://static001.geekbang.org/account/avatar/00/12/13/7b/22ac5a92.jpg","nickname":"蒸蒸","note":"","ucode":"7130908D56060C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324404,"discussion_content":"百度那个识别率太低了。我用了10张图，没一张识别出来的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1605099598,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341519,"user_name":"别摸我的人鱼线","can_delete":false,"product_type":"c3","uid":2917285,"ip_address":"","ucode":"A6A4F007DE0934","user_header":"https://static001.geekbang.org/account/avatar/00/2c/83/a5/cbe5f028.jpg","comment_is_top":false,"comment_ctime":1649671269,"is_pvip":false,"replies":[{"id":134417,"content":"需要付费购买的","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1677056310,"ip_address":"河北","comment_id":341519,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"获取图片验证码的调用次数用完了怎么办呢？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606279,"discussion_content":"需要付费购买的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1677056310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"河北","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339291,"user_name":"Noah","can_delete":false,"product_type":"c3","uid":1911527,"ip_address":"","ucode":"38EE84851AC29B","user_header":"https://static001.geekbang.org/account/avatar/00/1d/2a/e7/61bbc92e.jpg","comment_is_top":false,"comment_ctime":1648024478,"is_pvip":false,"replies":[{"id":125470,"content":"这个不需要","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1651034400,"ip_address":"","comment_id":339291,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"cookie操作工具类呢？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567962,"discussion_content":"这个不需要","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651034400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":330247,"user_name":"陈廷倩","can_delete":false,"product_type":"c3","uid":1858858,"ip_address":"","ucode":"2F412AC34763A6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIM05VW3moIQJDrY3v2qAnoDeia4nBtcwtxovrFRbhJwbfhNYWNa44mnmpibbm8514ggp5WNfX7NMibg/132","comment_is_top":false,"comment_ctime":1641882101,"is_pvip":false,"replies":[{"id":125456,"content":"看后面视频 我讲了","user_name":"作者回复","user_name_real":"编辑","uid":1654315,"ctime":1651032324,"ip_address":"","comment_id":330247,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，jpress有个 我同意的框勾选不上，应该怎么处理\ndiv class=&quot;form-group py-3&quot;\n div class=&quot;custom-control custom-checkbox&quot;\n   input type=&quot;checkbox&quot; class=&quot;custom-control-input&quot; id=&quot;agree&quot;\n   label  class=&quot;custom-control-label&quot;\n\n","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567941,"discussion_content":"看后面视频 我讲了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651032324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308018,"user_name":"Clarayunyun","can_delete":false,"product_type":"c3","uid":2003185,"ip_address":"","ucode":"5FFE701785048F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKlvIQkDsCH3l1l4OPytsCYfQq0Y7yfsCSmouRjYQyRa1gH4Sy7ING94NJnicpkLiajiaCmt7icwUNUA/132","comment_is_top":false,"comment_ctime":1629359014,"is_pvip":false,"replies":[{"id":111833,"content":"可能是分辨率的问题，我后面有讲，你看一下util.py源码：\n    left = ce.location[&#39;x&#39;]\n    top = ce.location[&#39;y&#39;]\n    right = ce.size[&#39;width&#39;] + left\n    height = ce.size[&#39;height&#39;] + top\n\n    dpr = driver.execute_script(&#39;return window.devicePixelRatio&#39;)\n\n    print(dpr)\n    im = Image.open(picture_name1)\n    img = im.crop((left*dpr, top*dpr, right*dpr, height*dpr))","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1629874120,"ip_address":"","comment_id":308018,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"showapi_res_body里提示&#39;remark&#39;: &#39;图片太小，请调整&#39;","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525371,"discussion_content":"可能是分辨率的问题，我后面有讲，你看一下util.py源码：\n    left = ce.location[&amp;#39;x&amp;#39;]\n    top = ce.location[&amp;#39;y&amp;#39;]\n    right = ce.size[&amp;#39;width&amp;#39;] + left\n    height = ce.size[&amp;#39;height&amp;#39;] + top\n\n    dpr = driver.execute_script(&amp;#39;return window.devicePixelRatio&amp;#39;)\n\n    print(dpr)\n    im = Image.open(picture_name1)\n    img = im.crop((left*dpr, top*dpr, right*dpr, height*dpr))","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629874120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307011,"user_name":"酋长","can_delete":false,"product_type":"c3","uid":1786541,"ip_address":"","ucode":"55A9CC5FE238E6","user_header":"https://static001.geekbang.org/account/avatar/00/1b/42/ad/d545d81f.jpg","comment_is_top":false,"comment_ctime":1628825109,"is_pvip":false,"replies":[{"id":111832,"content":"保证main.py在包的最外层，看看你的项目是这样的吗？","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1629873768,"ip_address":"","comment_id":307011,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，工具类导入，在main里面导入from util import util，执行提示我，无法导入名称util，是怎么回事丫","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525020,"discussion_content":"保证main.py在包的最外层，看看你的项目是这样的吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629873768,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304344,"user_name":"草Y莓","can_delete":false,"product_type":"c3","uid":2710533,"ip_address":"","ucode":"D7961D193B082C","user_header":"https://static001.geekbang.org/account/avatar/00/29/5c/05/8997bd91.jpg","comment_is_top":false,"comment_ctime":1627361600,"is_pvip":false,"replies":[{"id":111099,"content":"是的","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1628692773,"ip_address":"","comment_id":304344,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"只能在线用吗？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524020,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628692773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":259303,"user_name":"Geek_6an1lu","can_delete":false,"product_type":"c3","uid":1451569,"ip_address":"","ucode":"AE9181139EE496","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLibY89Hyenq3FyLQobGTLK0mRmmyZcIcjUYfcWS5uZ32T5Ficc3GzuL7L9At7p0La1oep2pJN9A1jw/132","comment_is_top":false,"comment_ctime":1604675547,"is_pvip":false,"replies":[{"id":94746,"content":"是的 用js window.devicePixelRadio获得","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1605165653,"ip_address":"","comment_id":259303,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"为啥我截图扣验证码，坐标不对呢，每次扣的图不是验证码，是其他的坐标跟验证码一样大的图，这跟电脑屏幕尺寸有关系？","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508899,"discussion_content":"是的 用js window.devicePixelRadio获得","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605165653,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2272672,"avatar":"https://static001.geekbang.org/account/avatar/00/22/ad/a0/8b596e6a.jpg","nickname":"猫的鱼妖精","note":"","ucode":"998D02B43279D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340373,"discussion_content":"调一下屏幕分辨率","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609989753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242494,"user_name":"樊樊🐷","can_delete":false,"product_type":"c3","uid":1621692,"ip_address":"","ucode":"A57B95FA2C7BCE","user_header":"https://static001.geekbang.org/account/avatar/00/18/be/bc/510d4205.jpg","comment_is_top":false,"comment_ctime":1597741971,"is_pvip":false,"replies":[{"id":89560,"content":"看看代码怎么写的 切图后其实第一张图片也就没用了","user_name":"作者回复","user_name_real":"郭宏志","uid":1654315,"ctime":1597894529,"ip_address":"","comment_id":242494,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100055601,"comment_content":"老师，我通过切割图片之后screenshots中picture_name1被删除了只有picture_name2存在","like_count":0,"discussions":[{"author":{"id":1654315,"avatar":"https://static001.geekbang.org/account/avatar/00/19/3e/2b/93fb1b73.jpg","nickname":"郭宏志","note":"","ucode":"952E0F3E2AA0F8","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504020,"discussion_content":"看看代码怎么写的 切图后其实第一张图片也就没用了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597894529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1716156,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/2f/bc/71e5dbbc.jpg","nickname":"测试菜鸟","note":"","ucode":"610650BDE3548C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361730,"discussion_content":"你是不是命名重复了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616740876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}