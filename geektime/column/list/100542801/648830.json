{"id":648830,"title":"04｜MongoDB：如何安装和使用MongoDB数据库？","content":"<p>你好，我是黄鸿波。</p><p>上节课，我们主要了解了数据库的来源和形式，但凡是数据都离不开存储。说到数据库，我们最常用到的就是MongoDB和Redis。</p><p>推荐系统中的原始数据一般分成两大类，用户数据和内容数据。这两类数据服务于推荐算法，最终我们会得到用户特征与画像。对于用户画像这类的信息，最好使用字段可变的文档型数据库，比较常见的就是MongoDB数据库。</p><p>这节课我们就来详细地介绍一下MongoDB数据库。看看它是什么、有什么特点、应该如何安装。</p><h2>什么是MongoDB数据库？</h2><p>MongoDB是一个开源的基于分布式文件存储的数据库（C++语言编写），最初是为Web应用提供可扩展的高性能数据存储解决方案。MongoDB最大的优点是可扩展性强、高效的查询方式和非常出色的安全性。</p><p><img src=\"https://static001.geekbang.org/resource/image/ec/52/ec37cf94b227833379c7152f71ce2d52.png?wh=2000x600\" alt=\"\"></p><h3>MongoDB数据库的特性</h3><p>由于MongoDB开源且分布式，因此，它在可扩展性方面一直是所有NoSQL数据库中的佼佼者。MongoDB数据库可以通过分片数据来提高整个数据库的吞吐量，并且由于它以文档结构来存储数据，所以在编写和使用查询语句时非常容易。</p><p>我们这里所说的文档结构，是一种类似于JSON类型的BSON文档。在实际使用过程中，我们可以把它当作JSON的形式使用，因为这二者从使用和长相上来看基本没有区别，而我们在日常开发中也比较喜欢使用JSON对象作为传输格式，因此，MongoDB数据库与程序的对接就变得容易多了。</p><!-- [[[read_end]]] --><p>此外，BSON数据类型还使得安全性变得非常高。因为MongoDB在进行查询时使用的是BSON对象，不是像SQL一样可解析的字符串，这可以大幅度降低由SQL注入带来的风险。</p><h3>MongoDB数据库的基本概念</h3><p>像MySQL或者Oracle数据库等关系型数据库一样，MongoDB也有一套完整的基本模型和概念，并且它在某些方面也与关系型数据库类似。我们可以对比一下这两类数据库，以此更好地了解MongoDB数据库。</p><p>首先在关系型数据库中比较常见的几个概念：数据库、数据库表、行（也叫记录）、列（也叫字段），在MongoDB数据库中也有几个类似的概念，我们一一来看看。</p><p><strong>Database</strong>：数据库，这个概念和关系型数据库中的概念相同，它装载着所有的数据内容。</p><p><strong>Collection</strong>：集合，可以将其理解为关系型数据库中的表。在关系型数据库中，我们将所有的数据按字段顺序逐行存到数据表中。在MongoDB中也是类似，我们可以将我们需要的数据以文档（Document）为单位存储在集合中。但与关系型数据库不同的是，MongoDB数据库不需要事先定义好列的名字，而是可以随时变化。也就是说，你可以在一个Collection中存储完全不一样的Document，只要这个Document符合BSON的格式要求即可。</p><p><strong>Document</strong>：文档，可以将其理解为关系型数据库中的行。与关系型数据库不同的是，Document是由多个字段组成的，这个字段我们可以理解为JSON中的Key，而值则可以理解为JSON中的Value，因此，我们可以先粗略地理解为，Document就是一个JSON字符串。</p><p><strong>Field</strong>：字段，可以将其理解为关系型数据库中的列。与关系型数据库不同的是，Field可以支持更多的数据类型，甚至还可以像JSON中嵌套JSON一样，在Document中嵌套Document等，因此，它的Field类型更加灵活。</p><p>这些是MongoDB数据库最主要的概念，我们也对应地讲解了它们和关系型数据库的差异，MongoDB数据库的概念并不止这些，其他的我们遇到再做讲解。</p><h2>如何安装和使用MongoDB数据库？</h2><p>在对MongoDB数据库有了一个初步的了解之后，接下来我们来看看如何安装和使用MongoDB数据库。</p><h3>MongoDB数据库的安装</h3><p><strong>第一步，</strong>进入MongoDB的官网。</p><p><img src=\"https://static001.geekbang.org/resource/image/4e/04/4e34e04aba09d964bbf75334yy46f904.png?wh=3814x1782\" alt=\"\"></p><p><strong>第二步，</strong>我们在最上面的菜单栏依次找到Product→Community Edition→Community Server。</p><p><img src=\"https://static001.geekbang.org/resource/image/a1/d4/a1829768f2ea2aa1acc5ecceb9c2dfd4.png?wh=2032x1227\" alt=\"\"></p><p><strong>第三步，</strong>在弹出的页面中，选择自己需要的版本、平台和包。这里我使用的是4.0.28版本，平台使用Windows平台，用msi安装包的形式进行安装，点击download按钮开始下载。</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/a4/f2e606a4c7fc0de9a199328702b52aa4.png?wh=2164x1770\" alt=\"\"></p><p><strong>第四步，</strong>下载完成后，双击我们下载的安装包进行安装，然后可以看到下面这个界面。</p><p><img src=\"https://static001.geekbang.org/resource/image/98/a5/986c894089f6ffb18784ca87844cc5a5.png?wh=764x597\" alt=\"\"></p><p><strong>第五步，</strong>在这个界面下，一路Next到选择安装方式界面，在这个界面中，上面是完全安装（Complete），下面是自定义安装（Custom），我建议使用自定义安装，因为这个时候你可以清楚地了解你都安装了什么，并且安装到了哪个目录。</p><p><img src=\"https://static001.geekbang.org/resource/image/b0/45/b077bedf58eb1eaf88c47c07858e8145.png?wh=771x596\" alt=\"\"></p><p><strong>第六步，</strong>接下来会让你选择要安装的程序以及安装的位置。一般来讲，安装的程序我们默认就可以了，安装的位置我建议选择一个非C盘的磁盘，最好空间大一点，这里我把它安装到了I盘。在更改目录时，我也建议你只更改目录前面的盘符，不更改后面安装位置的具体目录，因为使用原目录结构在进行环境变量等信息配置的时候，更加方便。</p><p><img src=\"https://static001.geekbang.org/resource/image/60/a6/60498c5cyyd1058028f81ef5c04eaaa6.png?wh=766x596\" alt=\"\"></p><p><strong>第七步，</strong>点击Next，这个时候安装程序让我们选择服务的配置，这里直接默认就好。然后我们一路Next到最后，安装完成之后会弹出完成界面。</p><p><img src=\"https://static001.geekbang.org/resource/image/67/52/6700a2bbf0aa6fefe9763c11e999e052.png?wh=768x595\" alt=\"\"></p><p>与此同时还会弹出一个Compass的窗口，这个我们暂时用不上。</p><p><img src=\"https://static001.geekbang.org/resource/image/6b/fe/6b190c48039fdb79f7b9d2efcc6c1ffe.png?wh=2126x1240\" alt=\"\"></p><p>不过，完成上面这些步骤之后，我们只能说完成了全流程的50%，这时候我们的MongoDB数据库还是不可用的。接下来我们要配置环境变量、配置相关目录并启动数据库。</p><p>首先，我们要把MongoDB相关的命令配置到环境变量中，方便我们后面的开发和操作。</p><p>具体做法是，先找到我们刚刚安装MongoDB的目录，比如我的目录是：I:\\Program Files\\MongoDB\\Server\\4.0。然后我们把它加入到系统的环境变量中，我们需要在系统的环境变量中新建一个Key为MONGO_HOME，如下图所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/d7/1a/d70f3dd2d0eaeaa091fd0a54c114061a.png?wh=1029x264\" alt=\"\"></p><p>接下来，我们在Path中新建一个变量 <code>%MONGO_HOME%\\bin</code>，这里包含了运行MongoDB的相关命令。</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/46/b8979c2a9b6701b808e0268c92729a46.png?wh=823x793\" alt=\"\"></p><p>点击确定，然后点击环境变量窗口的确定，此时，我们就可以在命令行中使用MongoDB的相关命令了。例如，我们可以在命令行中输入mongo，这时如果弹出下图这样的信息，就说明环境变量配置好了。</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/09/4bf81b460bbe2a0185bd15689616ea09.png?wh=1470x766\" alt=\"\"></p><p>到这里，实际上我们的MongoDB数据库就已经安装成功，也可以正常使用了。接下来，我们要把MongoDB添加成为一个系统服务，这样每次启动的时候，就不需要重新运行命令了。</p><p>首先，我们要在MongoDB的安装目录的data文件夹下创建两个目录，分别是db目录和log目录，如图所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/f7/2a/f7dbde34c2d2f5f08531c4936yy52c2a.png?wh=1684x880\" alt=\"\"></p><p>然后在log目录下，创建一个名为mongodb.log的文件。</p><p>接下来，在MongoDB的主目录下（我这里的主目录是I:\\Program Files\\MongoDB\\Server\\4.0）创建一个mongod.cfg文件，用记事本编辑文件，在文件中输入下面内容。</p><pre><code>systemLog:\n    destination: file\n    path: I:\\Program Files\\MongoDB\\Server\\4.0\\data\\log\\mongod.log\nstorage:\n\tdbPath: I:\\Program Files\\MongoDB\\Server\\4.0\\data\\db\n</code></pre><p>接着，以管理员身份打开cmd命令，如下图所示。</p><p><img src=\"https://static001.geekbang.org/resource/image/84/31/842aef1d31c9492d1f8c375dd249c231.png?wh=1125x747\" alt=\"\"></p><p>然后输入如下命令。</p><pre><code>mongod --config&quot;I:\\Program Files\\MongoDB\\Server\\4.0\\mongod.cfg&quot;--install\n</code></pre><p>接下来输入下面这个命令。</p><pre><code>net start MongoDB\n</code></pre><p>如果出现下面的截图，说明服务已经启动了。</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/e7/b606aa0ceccff3f14bfea1932087e4e7.png?wh=1374x321\" alt=\"\"></p><p>我们在计算机上点击右键选择管理，然后在服务和应用程序中找到服务，并在服务选项中找到MongoDB Server。</p><p><img src=\"https://static001.geekbang.org/resource/image/fd/54/fd6ca335f0146656bde5702188768154.png?wh=1187x821\" alt=\"\"></p><p>此时，我们的MongoDB数据库已经完全安装完成了。我们可以通过cmd控制台输入mongo命令，如果得到下面这个截图，说明安装成功了。</p><p><img src=\"https://static001.geekbang.org/resource/image/fc/ed/fc0675bd8c36c231d6c643438ac168ed.png?wh=1440x748\" alt=\"\"></p><h3>MongoDB数据库的简单使用</h3><p>接下来，我们写一个简单的demo来测试一下我们的数据库，需要完成下面几个操作。</p><ol>\n<li>创建一个数据库DB。</li>\n<li>创建一个Collection。</li>\n<li>在Collection中插入一条数据。</li>\n<li>使用查询语句将这条数据查询出来。</li>\n</ol><p>在MongoDB中，创建数据库的命令是  <code>use + 数据库名</code>，这个时候，MongoDB会查询系统中是否有这个数据库，如果有，则直接使用，如果没有就会自动创建。为了验证我们的想法，我们先使用DB命令来查询一下目前使用的是哪个数据库。</p><pre><code>db\n</code></pre><p>得到下图。</p><p><img src=\"https://static001.geekbang.org/resource/image/d2/e8/d269d727bf18b7ab2e39a099e61332e8.png?wh=669x52\" alt=\"\"></p><p>通过这张图我们可以看到，目前我们的MongoDB系统中只有一个test数据库。接下来，我们使用下面的命令创建一个  <code>recommendation_demo</code>  数据库。</p><pre><code>use recommendation_demo\n</code></pre><p>然后再使用DB命令进行查询，得到结果如图。</p><p><img src=\"https://static001.geekbang.org/resource/image/e3/54/e3208314fe01a4bc07939435f1e72b54.png?wh=823x100\" alt=\"\"></p><p>我们可以随意往里面插入一条数据，比如我们插入一条Key为“name”，值为“welcome to recommendation system class”的数据，然后我们再使用find命令来查询数据是否存在。</p><pre><code>db.recommendation_demo.insert({&quot;name&quot;:&quot;welcome to recommendation system class&quot;})\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/1b/e5/1b08ce29550e2bb2f03eae6b0ed21de5.png?wh=712x99\" alt=\"\"></p><p>如果能够看到上面的信息，说明我们的MongoDB数据库已经能够正常运行，并且你已经往里面插入了一条真实的数据。</p><p>到这里你可能还有一个疑问，我们这里只创建了DB并插入了数据，但是并没有特意创建Collection呀。实际上，在MongoDB中，如果没有指定创建Collection的话，就会默认创建一个与数据库同名的Collection，我们可以通过show tables命令来验证下。</p><p><img src=\"https://static001.geekbang.org/resource/image/54/d4/54df29d8f7969461fc339e850118dbd4.png?wh=303x36\" alt=\"\"></p><p>到现在为止，我们MongoDB的安装和最基本的使用已经学习完成了。在后面的课程中，我们会利用MongoDB数据库来完成我们推荐系统中的部分数据存储工作。</p><h2>总结</h2><p>学完这节课，希望你记住下面这些知识点。</p><ol>\n<li>MongoDB是一个开源的基于分布式文件存储的数据库，它是使用C++语言编写的。</li>\n<li>MongoDB最突出的优势是可扩展性强，同时它还具有高效的查询方式和很高的安全性。</li>\n<li>MongoDB数据库在很多方面与结构化数据库有异曲同工之处，数据库、集合、文档、字段等概念都与关系型数据库有所对应，我们应该了解他们的区别和联系。</li>\n<li>MongoDB数据库的安装方法，以及安装之后如何把它变成一个Windows自带的服务。</li>\n<li>使用  MongoDB  数据库创建一个 Collection  并插入数据。</li>\n</ol><h2>课后题</h2><p>学完这节课，给你留两道课后题。</p><ol>\n<li>请你动手在自己的电脑上搭建一套MongoDB数据库的开发环境。</li>\n<li>请你尝试自学API的形式，创建一个数据库和集合，并在库中随意插入一条数据。</li>\n</ol><p>欢迎你把代码上传到GitHub并在评论区留下你的代码链接，我会选择有代表性的代码进行点评。我们下节课见！</p>","comments":[{"had_liked":false,"id":372834,"user_name":"👂🏻阿难👂🏻","can_delete":false,"product_type":"c1","uid":1337723,"ip_address":"上海","ucode":"488AC68867BECD","user_header":"https://static001.geekbang.org/account/avatar/00/14/69/7b/62c46d44.jpg","comment_is_top":false,"comment_ctime":1681700804,"is_pvip":false,"replies":[{"id":136404,"content":"答：同学你好，首先，感谢你的建议。之所以把安装和demo讲一下是为了照顾不同内容的群体，因为有些学员的基础相对比较薄弱，所以更希望一步步带着走。至于你说的当前模块与其他模块的交互问题，在后面的课程中我们有章节也会着重去讲。\n第二个和第三个问题，后面我会尽量注意一下，给大家多拓展一些实际工作中为什么这么选。\n\n最后，再次感谢你的建议。","user_name":"作者回复","user_name_real":"编辑","uid":1982950,"ctime":1682606773,"ip_address":"广东","comment_id":372834,"utype":1}],"discussion_count":6,"race_medal":0,"score":2,"product_id":100542801,"comment_content":"能不能提个建议，比如这节课，讲了一个工具的安装和一个使用demo，这个内容个人感觉很单薄，其实网上搜索一下就有很多教程，作为学员其实希望了解更多的是：1当前用户在推荐系统中都会和其他模块如何交互，它在推荐架构中的作用是什么？\n2为什么选用了mgdb而不是其他的db？有哪些考虑？ \n3 实际推荐系统中，和当前技术有关的技术“坑”有哪些？老师啥如何解决的。\n能围绕以上问题做教学对于学习者来说才有真正的价值。 谢谢","like_count":11,"discussions":[{"author":{"id":1982950,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/41/e6/beb42103.jpg","nickname":"黄鸿波","note":"","ucode":"5EB4E6946A363C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616151,"discussion_content":"答：同学你好，首先，感谢你的建议。之所以把安装和demo讲一下是为了照顾不同内容的群体，因为有些学员的基础相对比较薄弱，所以更希望一步步带着走。至于你说的当前模块与其他模块的交互问题，在后面的课程中我们有章节也会着重去讲。\n第二个和第三个问题，后面我会尽量注意一下，给大家多拓展一些实际工作中为什么这么选。\n\n最后，再次感谢你的建议。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682606773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1385403,"avatar":"https://static001.geekbang.org/account/avatar/00/15/23/bb/a1a61f7c.jpg","nickname":"GAC·DU","note":"","ucode":"7847FBE1C13740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":614213,"discussion_content":"同感","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1681725106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1041465,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/e4/39/a06ade33.jpg","nickname":"极客雷","note":"","ucode":"0DBAC4CB9C7BCD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629109,"discussion_content":"赞同，这篇太水了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696672415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2820504,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/09/98/397c2c81.jpg","nickname":"贾维斯Echo","note":"","ucode":"BB8C507E46A9E5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617357,"discussion_content":"这个问题问的很好,我也想知道,为啥要选MongoDB,这个安装会用ChatGPT的话一下子就搞定了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683527232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"上海","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1156437,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a5/55/ca27c4b9.jpg","nickname":"huyu6789","note":"","ucode":"586B085D92F472","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617070,"discussion_content":"个人并不反对这里放详细的安装步骤的，毕竟众口难调，既然定位“手把手”，我觉得这个详细的安装教程也挺好的，毕竟有时候通过搜索引擎找一篇靠谱的全面的安装也是要稍微花费点时间的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683292387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3599123,"avatar":"https://static001.geekbang.org/account/avatar/00/36/eb/13/6be4b480.jpg","nickname":"感谢你的存在","note":"","ucode":"3F9AFEED4C4F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":614657,"discussion_content":"同感","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681860747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373030,"user_name":"云中君","can_delete":false,"product_type":"c1","uid":1448032,"ip_address":"北京","ucode":"52FECFBFECBA40","user_header":"https://static001.geekbang.org/account/avatar/00/16/18/60/ecdb8ff9.jpg","comment_is_top":false,"comment_ctime":1681954053,"is_pvip":false,"replies":[{"id":136405,"content":"同学你好，谢谢你的建议，后续安装部分我尽量简化一下。","user_name":"作者回复","user_name_real":"编辑","uid":1982950,"ctime":1682606951,"ip_address":"广东","comment_id":373030,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100542801,"comment_content":"mongo安装与使用，放一个链接就可以…建议以后的安装与使用不用重点讲，多讲点推荐核心点","like_count":3,"discussions":[{"author":{"id":1982950,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/41/e6/beb42103.jpg","nickname":"黄鸿波","note":"","ucode":"5EB4E6946A363C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616155,"discussion_content":"同学你好，谢谢你的建议，后续安装部分我尽量简化一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682606951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":373783,"user_name":"地铁林黛玉","can_delete":false,"product_type":"c1","uid":1241183,"ip_address":"北京","ucode":"3D35D965E54649","user_header":"https://static001.geekbang.org/account/avatar/00/12/f0/5f/25942dfb.jpg","comment_is_top":false,"comment_ctime":1683168327,"is_pvip":false,"replies":[{"id":136680,"content":"有的时候很多人并不了解docker的使用，所以针对于基础弱的同学，还是讲了一下。","user_name":"作者回复","user_name_real":"编辑","uid":1982950,"ctime":1683878743,"ip_address":"广东","comment_id":373783,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100542801,"comment_content":"我感觉这节可以直接略过，docker直接一键安装即可。","like_count":2,"discussions":[{"author":{"id":1982950,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/41/e6/beb42103.jpg","nickname":"黄鸿波","note":"","ucode":"5EB4E6946A363C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617800,"discussion_content":"有的时候很多人并不了解docker的使用，所以针对于基础弱的同学，还是讲了一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683878743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":374035,"user_name":"贾维斯Echo","can_delete":false,"product_type":"c1","uid":2820504,"ip_address":"上海","ucode":"BB8C507E46A9E5","user_header":"https://static001.geekbang.org/account/avatar/00/2b/09/98/397c2c81.jpg","comment_is_top":false,"comment_ctime":1683527049,"is_pvip":true,"replies":[{"id":136684,"content":"同学，你好。\n画像系统需要存储大量且不同类型的数据，如用户信息、行为数据、设备信息等等，因此需要一个灵活、可扩展、高性能的数据库来支持其数据存储和处理。\nMongoDB数据库，属于NOSQL中的文档型数据库，优点就是数据结构要求不严格，表结构可变，这符合画像的需求。\n而其他的NoSQL并不一样，比如图数据库利用图结构相关算法进行最短路径寻址，N度关系查找等；key-value的话，主要用于处理大量数据的高访问负载，内容缓存，也用于一些日志系统等等。","user_name":"作者回复","user_name_real":"编辑","uid":1982950,"ctime":1683879827,"ip_address":"广东","comment_id":374035,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100542801,"comment_content":"我想知道为什么选用MongoDB? 而不是其他NoSQL数据库","like_count":0,"discussions":[{"author":{"id":1982950,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/41/e6/beb42103.jpg","nickname":"黄鸿波","note":"","ucode":"5EB4E6946A363C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":617808,"discussion_content":"同学，你好。\n画像系统需要存储大量且不同类型的数据，如用户信息、行为数据、设备信息等等，因此需要一个灵活、可扩展、高性能的数据库来支持其数据存储和处理。\nMongoDB数据库，属于NOSQL中的文档型数据库，优点就是数据结构要求不严格，表结构可变，这符合画像的需求。\n而其他的NoSQL并不一样，比如图数据库利用图结构相关算法进行最短路径寻址，N度关系查找等；key-value的话，主要用于处理大量数据的高访问负载，内容缓存，也用于一些日志系统等等。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1683879827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2189310,"avatar":"https://static001.geekbang.org/account/avatar/00/21/67/fe/5d17661a.jpg","nickname":"悟尘","note":"","ucode":"4E7E854340D3A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1982950,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/41/e6/beb42103.jpg","nickname":"黄鸿波","note":"","ucode":"5EB4E6946A363C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":633520,"discussion_content":"ES我也觉得挺好的，在推荐系统不能代替MongoDB使用吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1702278687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":617808,"ip_address":"北京","group_id":0},"score":633520,"extra":""}]},{"author":{"id":1697124,"avatar":"https://static001.geekbang.org/account/avatar/00/19/e5/64/ac338f9c.jpg","nickname":"温泉","note":"","ucode":"DC0FD712BB9A66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":645030,"discussion_content":"我也想说es来着，集团因为用es比较多，要求全面下线mongo不再维护","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1715720131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":372879,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"北京","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1681740925,"is_pvip":false,"replies":[{"id":136410,"content":"同学你好，回答你的几个问题：\n1、“在 Document 中嵌套 Document 等，因此，它的 Field 类型更加灵活”，这句话是没有错的，我想表达的是，在这里一个Document也可以作为一个Field，可以理解为json里面包着一层json；\n2、在 MongoDB 中，没有一个中心节点，所有节点都是对等的。MongoDB 集群中的每个节点都可以执行相同的任务，并且都能够处理客户端请求。也正是由于无中心节点的架构，MongoDB 能够实现高可用性和可扩展性。\n3、这里的拓展是指可以在分布式的部署中任意增加节点。","user_name":"作者回复","user_name_real":"编辑","uid":1982950,"ctime":1682608365,"ip_address":"广东","comment_id":372879,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100542801,"comment_content":"老师这节课真的很详细，一步一步，每一步都很详细，对于基础薄弱的同学尤其有用，必须赞一个！\n另外，请教几个问题：\nQ1：讲“Field”部分时，有一句话“在 Document 中嵌套 Document 等，因此，它的 Field 类型更加灵活”。应该是Field嵌套，不是Document嵌套吧，也许是笔误。\nQ2：MongoDB是分布式，多个节点会有一个中心节点吗？\nQ3：MongoDB的可扩展性，体现在哪里？是体现在“列”可以任意扩展吗？还是体现在分布式应用时可以任意增加节点？","like_count":0,"discussions":[{"author":{"id":1982950,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/41/e6/beb42103.jpg","nickname":"黄鸿波","note":"","ucode":"5EB4E6946A363C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616169,"discussion_content":"同学你好，回答你的几个问题：\n1、“在 Document 中嵌套 Document 等，因此，它的 Field 类型更加灵活”，这句话是没有错的，我想表达的是，在这里一个Document也可以作为一个Field，可以理解为json里面包着一层json；\n2、在 MongoDB 中，没有一个中心节点，所有节点都是对等的。MongoDB 集群中的每个节点都可以执行相同的任务，并且都能够处理客户端请求。也正是由于无中心节点的架构，MongoDB 能够实现高可用性和可扩展性。\n3、这里的拓展是指可以在分布式的部署中任意增加节点。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1682608365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":385193,"user_name":"悟尘","can_delete":false,"product_type":"c1","uid":2189310,"ip_address":"北京","ucode":"4E7E854340D3A4","user_header":"https://static001.geekbang.org/account/avatar/00/21/67/fe/5d17661a.jpg","comment_is_top":false,"comment_ctime":1702278811,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100542801,"comment_content":"为什么选用了MongoDB而不是其他的db如ES？有哪些考虑？ 能否列一个表格做一个对比？做对比后感觉整篇文章就更好了。","like_count":0},{"had_liked":false,"id":373784,"user_name":"地铁林黛玉","can_delete":false,"product_type":"c1","uid":1241183,"ip_address":"北京","ucode":"3D35D965E54649","user_header":"https://static001.geekbang.org/account/avatar/00/12/f0/5f/25942dfb.jpg","comment_is_top":false,"comment_ctime":1683168400,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100542801,"comment_content":"这是我的docker安装mongo的命令；\ndocker run -v &#47;Users&#47;apple&#47;data&#47;mongo&#47;data:&#47;data&#47;db -v &#47;Users&#47;apple&#47;data&#47;mongo&#47;backup:&#47;data&#47;backup -v &#47;Users&#47;apple&#47;data&#47;mongo&#47;conf:&#47;data&#47;configdb --name mongod -p 27017:27017 -d mongo --auth\n创建用户：\ndb.createUser({user: &#39;admin&#39;, pwd: &#39;123456&#39;, roles: [ {role: &#39;userAdminAnyDa&#39;} ]}) db.createUser({user: &#39;admin&#39;, pwd: &#39;123456&#39;, roles: [ {role: &#39;userAdminAnyDat&#39;} ]})db.createUser({user: &#39;admin&#39;, pwd: &#39;123456&#39;, roles: [ {role: &#39;userAdminAnyData&#39;} ]}db.createUser({user: &#39;admin&#39;, pwd: &#39;123456&#39;, roles: [ {role: &#39;userAdminAnyDat&#39;} ]})db.createUser({user: &#39;admin&#39;, pwd: &#39;123456&#39;, roles: [ {role: &#39;userAdminAnyDa&#39;} ]}) &#39;} ]})\n+++++++\ndb.createUser({ user:&#39;admin&#39;,pwd:&#39;123456&#39;,roles:[ { role:&#39;userAdminAnyDatabase&#39;, db: &#39;admin&#39;},&quot;readWriteAnyDatabase&quot;]});\n+++++++\ndb.auth(&#39;admin&#39;, &#39;123456&#39;)","like_count":0}]}