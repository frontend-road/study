{"id":807070,"title":"04ï½œåŠ¨æ‰‹å®æˆ˜ï¼šUI å®ç°å’Œå›½äº§å…è´¹å¤§æ¨¡å‹æ¥å…¥","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¶ä¼Ÿæ°‘ã€‚</p><p>å‰é¢å‡ èŠ‚è¯¾ï¼Œæˆ‘ä»¬å·²ç»å¯¹RAGçš„åŸºç¡€æ¦‚å¿µæœ‰äº†ä¸€å®šçš„äº†è§£ã€‚ä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬å°±æ¥åŠ¨æ‰‹å®æˆ˜ï¼Œä½¿ç”¨RAGæ¥æ”¹é€ ä¼ ç»Ÿçš„MISç³»ç»Ÿã€‚</p><p>å­¦å®Œè¿™èŠ‚è¯¾ï¼ŒåŒå­¦ä»¬å°†æŒæ¡æ‰€æœ‰RAGåº”ç”¨æ‰€å¿…éœ€çš„åŸºç¡€â€”â€”æ¥å…¥å¤§æ¨¡å‹ã€‚æˆ‘ä»¬å…ˆä»UIå’Œæ¥å…¥å¤§æ¨¡å‹å¼€å§‹ã€‚</p><h2>UIä»£ç </h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥å®ç°UIä»£ç ã€‚</p><p>æˆ‘ä»¬åœ¨ç¬¬ 1 èŠ‚è¯¾é‡Œæè¿‡ï¼Œä½¿ç”¨RAGæ”¹é€ ä¼ ç»ŸMISç³»ç»Ÿï¼Œæœ€ç»ˆç•Œé¢åº”è¯¥æ˜¯åé¢å›¾é‡Œè¿™æ ·ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/c6/50/c6f3038fd896c52d69edda6e34d5f150.jpg?wh=2020x740\" alt=\"\"></p><p>ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä¼šæŠŠè¿™ä¸ªUIæ”¾åœ¨é¦–é¡µï¼Œè®©ç”¨æˆ·ä¸€æ‰“å¼€åº”ç”¨ï¼Œå°±èƒ½çœ‹åˆ°æˆ‘ä»¬è¿™ä¸ªUIã€‚</p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œæˆ‘ä»¬æŠŠä¼ ç»ŸMISç³»ç»Ÿçš„æ‰€æœ‰æŸ¥è¯¢ã€æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤é¡µé¢éƒ½æ•´åˆæˆä¸Šå›¾è¿™ä¹ˆä¸€ä¸ªé¡µé¢ã€‚æ‰€ä»¥RAGåº”ç”¨UIéƒ¨åˆ†ç›¸å¯¹å…¶ä»–è½¯ä»¶åº”ç”¨ç®€å•å¾ˆå¤šï¼Œä»£ç ä¹Ÿå°‘å¾ˆå¤šã€‚</p><p>UIä¸»è¦åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š</p><ol>\n<li>å¯¹è¯è®°å½•</li>\n<li>å‘é—®</li>\n<li>å¼€å§‹æ–°çš„å¯¹è¯ã€‚</li>\n</ol><p>æˆ‘ä»¬å…ˆä»å¯¹è¯è®°å½•éƒ¨åˆ†å¼€å§‹ã€‚</p><h3>å¯¹è¯è®°å½•éƒ¨åˆ†</h3><p>å¯¹è¯è®°å½•éƒ¨åˆ†æ˜¯æŒ‡ä¸‹å›¾ä¸­çš„çº¢æ¡†æ ‡å‡ºçš„éƒ¨åˆ†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/5a/b6854302264725f15ddfd42dd914db5a.jpg?wh=2020x750\" alt=\"\"></p><p>æˆ‘ä»¬æ‰“å¼€åœ¨ç¬¬ 1 èŠ‚è¯¾ä½¿ç”¨RAGæ”¹é€ ä¼ ç»ŸMISç³»ç»Ÿæˆæœå±•ç¤ºã€åˆ‡å…¥ç‚¹ä¸‹è½½çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯æ‰“å¼€<strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å‰\\templates\\home\\index.html</strong>æ–‡ä»¶ã€‚</p><p>ç„¶ååœ¨ <strong>{% block main_content%}</strong> å’Œ <strong>{% endblock %}</strong> ä¸­é—´æ’å…¥å¯¹è¯è®°å½•éƒ¨åˆ†çš„ä»£ç ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/05/70/05d283171d0a8dbf86d5b61df374ea70.jpg?wh=2020x1040\" alt=\"\"></p><pre><code class=\"language-html\">&lt;div class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\"&gt;\n    &lt;h3 class=\"h3\"&gt;é¦–é¡µ&lt;/h3&gt;\n&lt;/div&gt;\n\n&lt;div class=\"col-sm-10\"&gt;\n{% for current_obj in object_list %}\n    \n    &lt;div&gt;\n    {% if current_obj.role == \"user\" %}\n        ä½ ï¼š{{current_obj.content}}\n    {% else %}\n        AIï¼š{{current_obj.å¤„ç†åcontent}}\n    {% endif %}\n    &lt;/div&gt;\n    \n{% endfor %}\n&lt;/div&gt;\n</code></pre><!-- [[[read_end]]] --><p>æˆ‘æ¥å¸¦ä½ æ¢³ç†ä¸€ä¸‹è¿™æ®µä»£ç çš„é‡ç‚¹å†…å®¹ã€‚ç¬¬6è¡Œä»£ç æ˜¯éå†å¯¹è¯è®°å½•é‡Œé¢çš„æ¯ä¸€æ¡ã€‚</p><p>ç„¶åç¬¬9è¡Œä»£ç åˆ¤æ–­å½“å‰è¿™æ¡å¯¹è¯è®°å½•çš„è§’è‰²æ˜¯å¦ä¸ºç”¨æˆ·ï¼ˆuserï¼‰ã€‚å¦‚æœæ˜¯ï¼Œåˆ™ä»¥â€œä½ â€è¿™ä¸ªç§°è°“å¼€å¤´ã€‚æœ‰äº›UIè¿½æ±‚ç¾è§‚åº¦çš„è¯ï¼Œè¿˜ä¼šæŠŠè¿™ä¸€è¡Œé å³æ˜¾ç¤ºã€‚</p><p>ç„¶åç¬¬11è¡Œä»£ç æ˜¯æŒ‡å¦‚æœå½“å‰è¿™æ¡å¯¹è¯è®°å½•çš„è§’è‰²ä¸æ˜¯ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯AIçš„è¯ã€‚åˆ™ä»¥ â€œAIâ€ è¿™ä¸ªç§°è°“å¼€å¤´ã€‚åŒæ ·ï¼Œä¸ºäº†ç¾è§‚ï¼Œæœ‰äº›UIä¼šæŠŠè¿™ä¸€è¡Œé å·¦æ˜¾ç¤ºã€‚</p><p>é‚£ä¹ˆç¬¬6è¡Œä»£ç çš„object_listä»ä½•è€Œæ¥ï¼Ÿä»æ•°æ®åº“é‡Œé¢æŸ¥è¯¢å¾—å‡ºã€‚å¯¹åº”çš„æ˜¯åé¢è¿™æ®µåå°ä»£ç ã€‚æˆ‘ä»¬æ‰“å¼€æ–‡ä»¶<strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å‰\\home\\views.py</strong> æ‰¾åˆ°å¦‚ä¸‹ä½ç½®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7c/9d/7c2c8cebb8e247076d93d5e1bce3ac9d.jpg?wh=2020x1541\" alt=\"\"></p><p>ä¹‹åï¼Œæˆ‘ä»¬åœ¨ <strong>def index(request):</strong> å’Œ <strong>return render(request, â€œhome/index.htmlâ€)</strong> ä¹‹é—´æ’å…¥ä»¥ä¸‹ä»£ç ã€‚</p><pre><code class=\"language-python\">conversation_list = å¯¹è¯è®°å½•.objects.filter(å·²ç»“æŸ=False).order_by('created_time')\nreturn render(request, \"home/index.html\",{\"object_list\":conversation_list})\n</code></pre><p>ç¬¬1è¡Œä»£ç æ˜¯ä»æ•°æ®åº“çš„å¯¹è¯è®°å½•è¡¨é‡Œé¢è·å–å·²ç»“æŸå­—æ®µä¸ºFalseçš„è®°å½•ï¼Œå¹¶ä¸”æŒ‰æ—¶é—´é¡ºåºè¿”å›ã€‚ç„¶åé€šè¿‡ç¬¬2è¡Œä»£ç å°†è¿™äº›è®°å½•ä¼ é€’ç»™é¡µé¢ã€‚</p><p>å› ä¸ºè¦å¯¼å…¥å¯¹è¯è®°å½•è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨<strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å‰\\home\\views.pyæ–‡ä»¶</strong>çš„é¡¶éƒ¨åŠ å…¥åé¢è¿™æ®µä»£ç ã€‚å®ƒçš„ä½œç”¨æ˜¯å¯¼å…¥æ•°æ®åº“æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¬¬7è¡Œâ€œé”€å”®å…¥è´¦è®°å½•â€éƒ¨åˆ†åŠ å…¥å¯¹è¯è®°å½•ã€‚</p><pre><code class=\"language-python\">from .models import é”€å”®å…¥è´¦è®°å½•\n</code></pre><p>åŠ å…¥ä¹‹åæ•ˆæœå¦‚ä¸‹ã€‚</p><pre><code class=\"language-python\">from .models import å¯¹è¯è®°å½•, é”€å”®å…¥è´¦è®°å½•\n</code></pre><p>ç„¶åæˆ‘ä»¬æ‰“å¼€<strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å‰\\home\\models.py</strong> æ–‡ä»¶ã€‚åœ¨å°¾éƒ¨æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚</p><pre><code class=\"language-python\">class å¯¹è¯è®°å½•(models.Model):\n&nbsp; &nbsp; id = models.IntegerField(\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;primary_key = True,\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;editable = False)\n\n&nbsp; &nbsp; role = models.TextField()\n&nbsp; &nbsp; content = models.TextField(null=True)\n&nbsp; &nbsp; å¤„ç†åcontent = models.TextField(null=True)\n&nbsp; &nbsp; æäº¤ç»™å¤§æ¨¡å‹çš„playload = models.TextField(null=True)\n&nbsp; &nbsp; ä¸å¸¦å…¥å¤§æ¨¡å‹å¯¹è¯ä¸­ = models.BooleanField(default=False)\n&nbsp; &nbsp; å·²ç»“æŸ = models.BooleanField(default=False)\n\n&nbsp; &nbsp; created_time = models.DateTimeField(auto_now_add=True)\n&nbsp; &nbsp; lastmodified_time = models.DateTimeField(auto_now=True)\n</code></pre><p>ç¬¬ä¸€ä¸ªå­—æ®µï¼ˆç¬¬2è¡Œåˆ°ç¬¬4è¡Œä»£ç ï¼‰æ˜¯è®°å½•çš„idï¼Œæ•°æ®ç±»å‹ä¸ºæ•´å‹ï¼Œç”±æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆã€‚</p><p>ç¬¬äºŒã€ä¸‰ä¸ªå­—æ®µï¼ˆå¯¹åº”ç¬¬6ã€7è¡Œä»£ç ï¼‰ï¼Œåˆ†åˆ«è¡¨ç¤ºå¯¹è¯æ¨¡å¼çš„è§’è‰²å’Œå†…å®¹ï¼Œè¿™ä¸ªæˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/806130\">ç¬¬2èŠ‚è¯¾</a>çš„åŸºç¡€æ¦‚å¿µé‡Œè®²è¿‡ã€‚</p><p>ç¬¬å››ä¸ªå­—æ®µï¼ˆç¬¬8è¡Œä»£ç ï¼‰ä»£è¡¨å¤„ç†åçš„å†…å®¹ï¼Œæˆ‘ä»¬åé¢çš„è¯¾ç¨‹é‡Œå†å±•å¼€ã€‚</p><p>ç¬¬äº”ä¸ªå­—æ®µï¼ˆç¬¬9è¡Œä»£ç ï¼‰å¯¹åº”è¿™èŠ‚è¯¾åé¢å¯¹è¯æ¨¡å¼ä»£ç ä¸­çš„playloadï¼Œæ„æ€æ˜¯åœ¨è¯·æ±‚ä¸­å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®ã€‚</p><p>ç¬¬å…­ä¸ªå­—æ®µï¼ˆç¬¬10è¡Œä»£ç ï¼‰ï¼Œç”¨äºæ ‡è®°è¿™æ¡å¯¹è¯è®°å½•æ˜¯å¦è¦å¸¦å…¥å¤§æ¨¡å‹å¯¹è¯ä¸­ï¼ŒåŒæ ·ä¼šåœ¨åç»­è¯¾ç¨‹é‡Œå±•å¼€ã€‚</p><p>ç¬¬ä¸ƒä¸ªå­—æ®µï¼ˆç¬¬11è¡Œä»£ç ï¼‰ç”¨äºæ ‡è®°è¿™æ¡å¯¹è¯è®°å½•æ˜¯å¦å·²ç»ç»“æŸã€‚å½“æˆ‘ä»¬ç‚¹å‡»å¼€å§‹æ–°çš„å¯¹è¯æŒ‰é’®ä¹‹åï¼Œä¼šå°†å‰é¢æ‰€æœ‰å¯¹è¯è®°å½•çš„è¿™ä¸ªå­—æ®µå€¼è®¾ç½®ä¸ºTrueï¼Œä»¥è¡¨ç¤ºå¯¹è¯å·²ç»ç»“æŸã€‚</p><p>ç¬¬å…«ã€ç¬¬ä¹ä¸ªå­—æ®µï¼ˆç¬¬13ã€14è¡Œä»£ç ï¼‰éƒ½å’Œæ—¶é—´æœ‰å…³ï¼Œå‰è€…æ˜¯å¯¹è¯è®°å½•å‘ç”Ÿçš„æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®ƒæ’åºæ˜¾ç¤ºå¯¹è¯è®°å½•ï¼Œåè€…æ˜¯å¯¹è¯è®°å½•æ›´æ–°çš„æ—¶é—´ã€‚è¿™ä¸¤ä¸ªå­—æ®µå…·ä½“çš„å€¼éƒ½ç”±ç³»ç»Ÿè‡ªåŠ¨æ’å…¥çš„ï¼Œä¸éœ€è¦æˆ‘ä»¬æ“å¿ƒã€‚</p><h3>å‘é—®éƒ¨åˆ†</h3><p>å‘é—®éƒ¨åˆ†æ˜¯æŒ‡ä¸‹å›¾ä¸­çš„çº¢è‰²éƒ¨åˆ†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/60/96/6079bb50afd51a419354b7f0487d3996.jpg?wh=2020x766\" alt=\"\"></p><p>æˆ‘ä»¬åœ¨åˆšæ‰<strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å‰\\templates\\home\\index.html</strong> æ–‡ä»¶å¯¹è¯éƒ¨åˆ†<strong>æœ€åçš„ä¸€ä¸ªdivä¹‹å‰</strong>ï¼ŒåŠ å…¥å‘é—®éƒ¨åˆ†çš„ä»£ç ã€‚</p><pre><code class=\"language-python\">&lt;form method=\"POST\"&gt;\n&nbsp; {% csrf_token %}\n&nbsp; &lt;div class=\"form-group row\"&gt;\n&nbsp; &nbsp; &lt;label for=\"inputEmail3\" class=\"col-sm-2 col-form-label\"&gt;è¾“å…¥ä½ çš„é—®é¢˜&lt;/label&gt;\n&nbsp; &nbsp; &lt;div class=\"col-sm-6\"&gt;\n&nbsp; &nbsp; &nbsp; &lt;input type=\"input\" class=\"form-control\" name=\"question\"&gt;\n&nbsp; &nbsp; &lt;/div&gt;\n&nbsp; &nbsp; &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;æäº¤&lt;/button&gt; &amp;nbsp;\n&nbsp; &lt;/div&gt;\n&lt;/form&gt;\n</code></pre><p>è¿™æ®µä»£ç çš„ç¬¬1ã€6ã€8è¡Œéœ€è¦ä½ ç‰¹åˆ«ç•™æ„ï¼Œè¿™ä¸‰è¡Œæ„æˆäº†å‘é—®éƒ¨åˆ†çš„æ ¸å¿ƒã€‚</p><p>é¦–å…ˆç¬¬1è¡Œæ˜¯ä¸€ä¸ªHTMLè¡¨å•ã€‚è¿™ä¸ªè¡¨å•ä»¥POSTçš„å½¢å¼æäº¤ã€‚ç„¶åç¬¬6è¡Œæ˜¯ä¸€ä¸ªè¾“å…¥æ¡†ã€‚è€Œç¬¬8è¡Œæ˜¯ä¸€ä¸ªHTMLæäº¤æŒ‰é’®ã€‚</p><p>å…¶ä»–ä»£ç ç”¨äºä¸°å¯Œè¡¨å•å’Œæ”¹å–„äº¤äº’å‹å¥½æ€§ã€‚æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥æ·»åŠ æ ¡éªŒè¾“å…¥æ¡†æ˜¯å¦éç©ºçš„ä»£ç ï¼Œä¹Ÿå¯ä»¥æ·»åŠ é€šè¿‡ajaxæäº¤è¡¨å•å¹¶æ˜¾ç¤ºç­‰å¾…è¿›åº¦æ¡çš„ä»£ç ã€‚</p><p>å½“ç‚¹å‡»â€œæäº¤â€æŒ‰é’®ä¹‹åï¼Œå°†ä¼šè°ƒç”¨åå°çš„è¿™æ®µä»£ç ã€‚æˆ‘ä»¬å›åˆ°æ–‡ä»¶<strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å‰\\home\\views.pyåœ¨def index(request):</strong> å’Œ <strong>conversation_list</strong> ä¸­é—´æ·»åŠ ç¬¬2è¡Œåˆ°ç¬¬14è¡Œä»£ç ã€‚</p><pre><code class=\"language-python\">def index(request):\n&nbsp; &nbsp; if request.method == 'POST':\n&nbsp; &nbsp; &nbsp; &nbsp; ç”¨æˆ·è¾“å…¥ = request.POST['question']\n\n&nbsp; &nbsp; &nbsp; &nbsp; æŸ¥è¯¢å‚æ•° = è·å–ç»“æ„åŒ–æ•°æ®æŸ¥è¯¢å‚æ•°(ç”¨æˆ·è¾“å…¥)\n&nbsp; &nbsp; &nbsp; &nbsp; æŸ¥è¯¢ç»“æœ = None\n&nbsp; &nbsp; &nbsp; &nbsp; if æŸ¥è¯¢å‚æ•° is not None:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; æŸ¥è¯¢ç»“æœ = æŸ¥è¯¢(æŸ¥è¯¢å‚æ•°)\n\n&nbsp; &nbsp; &nbsp; &nbsp; if æŸ¥è¯¢ç»“æœ is None:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ä»æ•°æ®åº“æŸ¥ä¸åˆ°ç›¸å…³æ•°æ®æ—¶çš„æ“ä½œ()\n&nbsp; &nbsp; &nbsp; &nbsp; else:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; æ ¹æ®æŸ¥è¯¢ç»“æœå›ç­”ç”¨æˆ·è¾“å…¥(æŸ¥è¯¢ç»“æœ,ç”¨æˆ·è¾“å…¥)\n\n&nbsp; &nbsp; conversation_list = å¯¹è¯è®°å½•.objects.filter(å·²ç»“æŸ=False).order_by('created_time')\n&nbsp; &nbsp; return render(request, \"home/index.html\",{\"object_list\":conversation_list})\n</code></pre><p>è¿™æ®µä»£ç ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹ä¸»è¦çš„è¿è¡Œé€»è¾‘ã€‚é¦–å…ˆç¬¬2è¡Œä»£ç ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ˜¯è¡¨å•æäº¤ã€‚å¦‚æœæ˜¯ï¼Œåˆ™é€šè¿‡ç¬¬3è¡Œä»£ç è·å–ç”¨æˆ·çš„è¾“å…¥ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·çš„å‘é—®ã€‚</p><p>ç¬¬5è¡Œä»£ç è·å–æŸ¥è¯¢å‚æ•°ï¼Œç¬¬8è¡Œä»£ç åˆ™ä¼šæ ¹æ®æŸ¥è¯¢å‚æ•°å»æ•°æ®åº“æŸ¥è¯¢æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å‰é¢æ‰€è¯´çš„çŸ¥è¯†ã€‚</p><p>å¦‚æœèƒ½å¤ŸæŸ¥è¯¢åˆ°æ•°æ®ï¼Œæˆ‘ä»¬å°†è°ƒç”¨ç¬¬13è¡Œä»£ç æ ¹æ®æŸ¥è¯¢ç»“æœå›ç­”ç”¨æˆ·è¾“å…¥ã€‚å…·ä½“ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/71/8c/71d201ffce509121484ff79d0f828e8c.jpg?wh=2010x771\" alt=\"\"></p><p>å¦‚æœæ²¡æœ‰æŸ¥è¯¢åˆ°ç›¸å…³æ•°æ®ï¼Œåˆ™è°ƒç”¨ç¬¬11è¡Œä»£ç ã€‚å…·ä½“ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/75/60/75f0e73d94b8a614d6386e4e07545d60.jpg?wh=2020x780\" alt=\"\"></p><p>æ³¨æ„ï¼Œå…¶ä¸­<strong>è·å–ç»“æ„åŒ–æ•°æ®æŸ¥è¯¢å‚æ•°</strong>ã€<strong>ä»æ•°æ®åº“æŸ¥ä¸åˆ°ç›¸å…³æ•°æ®æ—¶çš„æ“ä½œ</strong>ã€<strong>æ ¹æ®æŸ¥è¯¢ç»“æœå›ç­”ç”¨æˆ·è¾“å…¥</strong>è¿™å‡ ä¸ªå‡½æ•°ç›®å‰è¿˜æ²¡æœ‰æ·»åŠ ï¼Œæˆ‘ä»¬ä¼šåœ¨åç»­ç« èŠ‚ä¸­æ·»åŠ ã€‚</p><h3>å¼€å§‹æ–°çš„å¯¹è¯éƒ¨åˆ†</h3><p>å¼€å§‹æ–°çš„å¯¹è¯éƒ¨åˆ†æ˜¯æŒ‡ä¸‹å›¾ä¸­çš„çº¢è‰²éƒ¨åˆ†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f8/91/f8cb8afe40c6ea23a72efda0522b0991.jpg?wh=2010x762\" alt=\"\"></p><p>æˆ‘ä»¬åœ¨å‘é—®éƒ¨åˆ†ä»£ç åé¢ï¼Œç»§ç»­æ·»åŠ ä»£ç ï¼Œå¼€å§‹æ–°çš„å¯¹è¯éƒ¨åˆ†ã€‚</p><pre><code class=\"language-python\">&lt;a href=\"/newtalk\" class=\"btn btn-warning\"&gt;å¼€å§‹æ–°çš„å¯¹è¯&lt;/a&gt;\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ˜¯ä¸€ä¸ªé“¾æ¥ï¼Œç‚¹å‡»è¿™ä¸ªé“¾æ¥å°†ä¼šè°ƒç”¨ä»¥ä¸‹åå°ä»£ç ã€‚æˆ‘ä»¬å›åˆ°æ–‡ä»¶<strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å‰\\home\\views.pyåœ¨def index(request):</strong> å‰é¢æ·»åŠ å®ƒã€‚</p><pre><code class=\"language-python\">def newtalk(request):\n&nbsp; &nbsp; æœªç»“æŸçš„å¯¹è¯ = å¯¹è¯è®°å½•.objects.filter(å·²ç»“æŸ=False)\n&nbsp; &nbsp; for current in æœªç»“æŸçš„å¯¹è¯:\n&nbsp; &nbsp; &nbsp; &nbsp; current.å·²ç»“æŸ = True\n&nbsp; &nbsp; å¯¹è¯è®°å½•.objects.bulk_update(æœªç»“æŸçš„å¯¹è¯, ['å·²ç»“æŸ'])\n&nbsp; &nbsp; return redirect(reverse('home:index'))\n</code></pre><p>ç¬¬2è¡Œä»£ç ä¼šä»æ•°æ®åº“é‡Œé¢æ£€ç´¢å‡ºæœªç»“æŸçš„å¯¹è¯è®°å½•ã€‚ç„¶åç¬¬3è¡Œä»£ç éå†è¿™äº›å¯¹è¯è®°å½•ã€‚ç¬¬4è¡Œä»£ç å°†å¯¹è¯è®°å½•çš„å·²ç»“æŸå­—æ®µçš„å€¼è®¾ç½®ä¸ºTrueï¼Œä¹Ÿå°±æ˜¯è¯´æ ‡è®°ä¸ºç»“æŸã€‚ç¬¬5è¡Œä»£ç ç”¨äºå°†æ›´æ”¹å†…å®¹æ‰¹é‡ä¿å­˜è¿›æ•°æ®åº“ã€‚</p><p>ä¸€åˆ‡å·¥ä½œå®Œæˆåï¼Œé€šè¿‡ç¬¬6è¡Œä»£ç å³å¯è·³è½¬å›é¦–é¡µã€‚è¿™æ—¶å€™æˆ‘ä»¬ä¼šçœ‹åˆ°é¡µé¢ä¸Šæ²¡æœ‰äº†å¯¹è¯è®°å½•ã€‚</p><p>æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‰“å¼€<strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å\\home\\urls.py</strong> æ–‡ä»¶ï¼ŒæŠŠnewtalkæ³¨å†Œè¿›å»ã€‚</p><pre><code class=\"language-python\">from django.urls import path\n\nfrom . import views\n\napp_name = \"home\"\nurlpatterns = [\n&nbsp; &nbsp; path(\"\", views.index, name=\"index\"),\n&nbsp; &nbsp; path(\"salescheck\", views.salescheck, name=\"salescheck\"),\n&nbsp; &nbsp; path(\"addsalescheck\", views.addsalescheck, name=\"addsalescheck\"),\n&nbsp; &nbsp; path(\"newtalk\", views.newtalk, name=\"newtalk\"),\n]\n</code></pre><p>å…¶ä¸­ç¬¬10è¡Œå°±æ˜¯æˆ‘ä»¬æ³¨å†Œnewtalkçš„ä»£ç ã€‚è¯·æ³¨æ„è¿™ä¸ªåœ°æ–¹ä¸åŒçš„MISç³»ç»Ÿä¸ä¸€æ ·ï¼Œè€Œä¸”ä¸RAGæ— å…³ï¼ŒåŒå­¦ä»¬å¯ä»¥ä¸ç”¨å…³æ³¨å®ƒã€‚</p><p>UIéƒ¨åˆ†å°±è®²åˆ°è¿™é‡Œäº†ï¼Œå®Œæ•´HTMLæœ€ç»ˆä»£ç è¯·å‚è§<a href=\"https://github.com/weiminye/time-geekbang-org-rag/blob/main/%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B1/%E6%94%B9%E9%80%A0%E5%90%8E/templates/home/index.html\">è¿™é‡Œ</a>ï¼Œå¯¹åº”çš„åå°ä»£ç è¯·å‚è§<a href=\"https://github.com/weiminye/time-geekbang-org-rag/blob/main/%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B1/%E6%94%B9%E9%80%A0%E5%90%8E/home/views.py\">è¿™é‡Œ</a>ã€‚ä½ å¯èƒ½ä¼šå‘ç°ï¼Œæœ€ç»ˆä»£ç å’Œä¸Šè¿°ä»£ç æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œä¼šå¤šäº†ä¸€äº›ä»£ç ï¼Œå¤šå‡ºæ¥çš„è¿™éƒ¨åˆ†ä»£ç æˆ‘ä»¬ä¼šåœ¨åç»­ç« èŠ‚ä¸­æåˆ°ã€‚</p><h2>ç”³è¯·å¤§æ¨¡å‹</h2><p>ç„¶åæˆ‘ä»¬éœ€è¦æ¥å…¥å¤§æ¨¡å‹ã€‚å› ä¸ºæœ€è‘—åçš„OpenAIå¤§æ¨¡å‹ç”³è¯·æ¯”è¾ƒéº»çƒ¦ï¼Œä¸åˆ©äºåŒå­¦ä»¬å…¥é—¨ã€‚æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ç™¾åº¦ERNIE-Lite-8Kå¤§æ¨¡å‹ã€‚</p><p>é€‰æ‹©è¿™ä¸ªæ¨¡å‹ä¸»è¦è€ƒè™‘äº†è¿™ä¸‰ç‚¹ã€‚</p><ol>\n<li>å®Œå…¨å…è´¹ï¼ŒåŒå­¦ä»¬å¯ä»¥éšä¾¿ç©ã€‚</li>\n<li>æ€§èƒ½å·²ç»è¶³å¤Ÿå…¥é—¨ç”¨äº†ã€‚</li>\n<li>è°ƒç”¨æ ¼å¼å…¼å®¹OpenAIå’Œå¾ˆå¤šå¤§æ¨¡å‹ï¼Œæ‰€ä»¥åªæˆ‘ä»¬éœ€è¦æ”¹æå°‘é‡ä»£ç å°±å¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–å¤§æ¨¡å‹ã€‚</li>\n</ol><p>åŒå­¦ä»¬å¯ä»¥ç›´æ¥å» <a href=\"https://qianfan.cloud.baidu.com/\">https://qianfan.cloud.baidu.com/</a>  ç”³è¯·ç™¾åº¦ERNIE-Lite-8Kå¤§æ¨¡å‹ã€‚å› ä¸ºç™¾åº¦çš„æ–‡æ¡£å¾ˆå®Œå–„ï¼Œå®¢æœä¹Ÿå¾ˆç»™åŠ›ï¼ŒæŒ‰ç…§ä¸Šé¢çš„é“¾æ¥å¾ˆå®¹æ˜“å°±å¯ä»¥å®Œæˆç”³è¯·ã€‚</p><p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç™¾åº¦æ›´æ–°å¾ˆå¿«ï¼Œä»¥ä¸Šé“¾æ¥å¯èƒ½ä¼šå¤±æ•ˆï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å‘ç™¾åº¦å®¢æœå’¨è¯¢ã€‚</p><h2>è°ƒç”¨å¤§æ¨¡å‹</h2><p>ç”³è¯·ä»¥åï¼Œå°±åˆ°äº†è°ƒç”¨å¤§æ¨¡å‹çš„ç¯èŠ‚ã€‚æˆ‘ä»¬éœ€è¦å…ˆè·å–access tokenï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ã€‚æˆ‘ä»¬åœ¨ <strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å‰\\home</strong>ç›®å½•ä¸‹æ–°å¢ <strong>rag.py</strong> æ–‡ä»¶ï¼Œç„¶åæ·»åŠ ä»¥ä¸‹ä»£ç ã€‚</p><pre><code class=\"language-python\">import json\nimport requests\n\ndef get_access_token():\n  ernie_client_id = xxxx # æ›¿æ¢ä¸ºä½ çš„client_id\n  ernie_client_secret = xxxx # æ›¿æ¢ä¸ºä½ çš„client_secret\n  url = f\"https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&amp;client_id={ernie_client_id}&amp;client_secret={ernie_client_secret}\"\n  \n  playload= json.dumps(\"\")\n  headers = {\n  &nbsp; &nbsp; 'Content-Type': 'application/json',\n  &nbsp; &nbsp; 'Accept': 'application/json'\n  }\n  response = requests.request(\"POST\", url, headers=headers, data=playload)\n  return response.json().get(\"access_token\")\n</code></pre><p>ä½ éœ€è¦æŠŠä¸Šé¢ä»£ç ä¸­çš„ernie_client_idå’Œernie_client_secretæ›¿æ¢ä¸ºä½ è‡ªå·±çš„ernie_client_idå’Œernie_client_secretã€‚ä½ å¯ä»¥åœ¨<a href=\"https://console.bce.baidu.com/qianfan/ais/console/applicationConsole/application\">è¿™é‡Œ</a>æ‰¾åˆ°å®ƒä»¬ã€‚</p><p>å…¶ä¸­ ernie_client_idä¸ºä¸‹å›¾ä¸­çš„API Keyï¼Œernie_client_secretä¸ºä¸‹å›¾ä¸­çš„Secret Keyã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/94/65/941107789853a03e71286a1a82defb65.jpg?wh=2020x1146\" alt=\"\"></p><p>è·å–å®Œaccess tokenä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨å¤§æ¨¡å‹è¿›è¡Œé—®ç­”ï¼Œä¹Ÿå°±æ˜¯è¿›å…¥ç¬¬2èŠ‚è¯¾æ‰€è®²çš„å¯¹è¯æ¨¡å¼äº†ã€‚æˆ‘ä»¬ç»§ç»­åœ¨<strong>å®æˆ˜æ¡ˆä¾‹1\\æ”¹é€ å‰\\home\\rag.py</strong> æ–‡ä»¶çš„å°¾éƒ¨æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚</p><pre><code class=\"language-python\">def å¯¹è¯æ¨¡å¼(messages):\n&nbsp; url = \"https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-lite-8k?access_token=\" + get_access_token()\n&nbsp;&nbsp;\n&nbsp; json_obj = {\n&nbsp; &nbsp; &nbsp; \"messages\": messages,\n&nbsp; }\n\n&nbsp; playload= json.dumps(json_obj)\n&nbsp; headers = {\n&nbsp; &nbsp; &nbsp; 'Content-Type': 'application/json'\n&nbsp; }\n&nbsp;&nbsp;\n  response = requests.request(\"POST\", url, headers=headers, data=playload)\n&nbsp; json_result = json.loads(response.text)\n&nbsp; return json_result[\"result\"]\n</code></pre><p>è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯ç™¾åº¦å¤§æ¨¡å‹æ‰€ç‰¹æœ‰çš„ï¼Œä¸åŒå¤§æ¨¡å‹çš„ä»£ç ä¸ä¸€æ ·ï¼Œæ¢ä¸€ä¸ªå¤§æ¨¡å‹å¯èƒ½å°±è¦æ”¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸é“ºå¼€æè¿°äº†ã€‚æˆ‘ä»¬åªéœ€è¦çŸ¥é“ï¼Œå¯¹è¯æ¨¡å¼å‡½æ•°ç”¨äºæ¥æ”¶æˆ‘ä»¬åœ¨ç¬¬2èŠ‚è®²è¿‡çš„messageså‚æ•°ã€‚</p><p>ä»¥ä¸Šä¸¤ä¸ªå‡½æ•°çš„æœ€ç»ˆä»£ç å¯ä»¥åœ¨<a href=\"https://github.com/weiminye/time-geekbang-org-rag/blob/main/%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B1/%E6%94%B9%E9%80%A0%E5%90%8E/home/rag.py\">è¿™é‡Œ</a>çœ‹åˆ°ã€‚</p><p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½ä¼šå‘ç°ï¼Œè¿™é‡Œå’Œåç»­ç« èŠ‚çš„ä»£ç å¾ˆå¤šå˜é‡å’Œå‡½æ•°éƒ½ç”¨äº†ä¸­æ–‡ã€‚è¿™ä¹ˆåšåªæ˜¯ä¸ºäº†è®©ä½ æ›´å®¹æ˜“ç†è§£ï¼Œå­¦ä¹ èµ·æ¥æ›´è½»æ¾ã€‚åœ¨å®é™…å·¥ä½œä¸­å»ºè®®è¿˜æ˜¯é‡‡ç”¨è‹±æ–‡ï¼Œä»¥é¿å…å‡ºç°å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©è¿™ä¸€è®²åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæœ€åæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ã€‚è¿™ä¸€è®²æˆ‘ä»¬å­¦ä¼šäº†ä¸¤ä»¶äº‹æƒ…ã€‚</p><p>ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯ä»‹ç»UIéƒ¨åˆ†ã€‚UIéƒ¨åˆ†åŒ…æ‹¬ï¼šå¯¹è¯è®°å½•ã€å‘é—®ã€å¼€å§‹æ–°çš„å¯¹è¯ã€‚ç¬¬äºŒä»¶äº‹æƒ…æ˜¯å¦‚ä½•ç”³è¯·å’Œè°ƒç”¨å¤§æ¨¡å‹ã€‚è¿™æ˜¯æ‰€æœ‰RAGåº”ç”¨éƒ½è¦åšçš„ç¬¬ä¸€æ­¥ã€‚è™½ç„¶ä»£ç çœ‹èµ·æ¥å¹¶ä¸å¤æ‚ï¼Œä½†å¦‚æœä½ ä»æœªæ¥è§¦ï¼Œè¯¾åè¿˜æ˜¯éœ€è¦èŠ±ä¸€äº›ç²¾åŠ›ä»”ç»†ç ”è¯»å’ŒåŠ¨æ‰‹ç»ƒä¹ çš„ï¼Œè¿™æ ·å­¦ä¹ æ•ˆæœä¼šæ›´å¥½ã€‚</p><p>ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†å®ç°å¦‚ä½•æ ¹æ®ç”¨æˆ·å‘é—®æŸ¥è¯¢æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ·»åŠ å‰é¢å‘é—®éƒ¨åˆ†æåˆ°çš„<strong>è·å–ç»“æ„åŒ–æ•°æ®æŸ¥è¯¢å‚æ•°</strong>ä»£ç ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å‰é¢â€œè°ƒç”¨å¤§æ¨¡å‹â€ä¸€èŠ‚ä¸­çš„ernie_client_idå’Œernie_client_secretæ˜¯ååˆ†é‡è¦çš„ï¼Œå¦‚æœæ³„éœ²å‡ºå»ä¼šå¸¦æ¥å¾ˆå¤§çš„éº»çƒ¦ï¼Œç”šè‡³å¸¦æ¥é‡‘é’±æŸå¤±ã€‚</p><p>æ‰€ä»¥åœ¨å®é™…å·¥ä½œä¸­è¿™ä¸¤ä¸ªå‚æ•°çš„å…·ä½“å€¼ä¸åº”è¯¥ç›´æ¥å†™åœ¨ä»£ç é‡Œé¢ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµäº’åŠ¨ï¼Œå¦‚æœè¿™èŠ‚è¯¾å¯¹ä½ æœ‰å¯å‘ï¼Œä¹Ÿæ¨èåˆ†äº«ç»™èº«è¾¹æ›´å¤šæœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"03ï½œè¿”å›ç»“æ„åŒ–æ•°æ®ï¼šæ„å»ºRAGåº”ç”¨çš„æ ¸å¿ƒå¯†ç ä¹‹äºŒ","id":806979},"right":{"article_title":"05ï½œåŠ¨æ‰‹å®æˆ˜ï¼šæ ¹æ®ç”¨æˆ·å‘é—®æŸ¥è¯¢æ•°æ®","id":807859}},"comments":[{"had_liked":false,"id":394287,"user_name":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","can_delete":false,"product_type":"c1","uid":1337319,"ip_address":"å¹¿ä¸œ","ucode":"63DED1EB2CF6AE","user_header":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","comment_is_top":true,"comment_ctime":1726359412,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"ä¸ºä»€ä¹ˆä¸é€‰æ‹©OpenAIï¼Ÿ\n\né¦–å…ˆï¼Œæˆ‘æ˜¯ä¸€åè´Ÿè´£AIåº”ç”¨è½åœ°çš„å·¥ç¨‹å¸ˆï¼Œä¸æ˜¯ç§‘å­¦å®¶ã€‚å½“é¡¹ç›®å‡ºç°é—®é¢˜ï¼ŒåŠå¤œå«é†’æ˜¯å·¥ç¨‹å¸ˆï¼Œè€Œä¸æ˜¯ç§‘å­¦å®¶ã€‚ç§‘å­¦å®¶åªè€ƒè™‘æ€§èƒ½ï¼Œå·¥ç¨‹å¸ˆè€ƒè™‘çš„æ˜¯å¦‚ä½•ä¸è¢«åŠå¤œå«é†’ï¼Œå³ä½¿åŠå¤œè¢«å«é†’ï¼Œèƒ½å¦å¿«é€Ÿè§£å†³é—®é¢˜ã€‚ä»¥OpenAIçš„å®¢æœèƒ½åŠ›ï¼Œåšä¸åˆ°è¿™ç‚¹ã€‚è¿™ç‚¹å›½å†…å¤§å‚åšå¾—ååˆ†å¥½ã€‚\n\nå…¶æ¬¡ï¼Œå¦‚æœåšå‚ç›´åº”ç”¨ï¼Œä¸éœ€è¦å»åˆ°OpenAIé‚£ä¹ˆå¼ºçš„æ€§èƒ½ã€‚è¿™æ–¹é¢å‚…ç››è€å¸ˆè®²å¾—ååˆ†åˆ°ä½ï¼Œå¤§å®¶å¯ä»¥å…³æ³¨å‚…ç››è€å¸ˆçš„è§†é¢‘å·ã€‚å¦å¤–å¦‚æœå¤§å®¶éœ€è¦é€‰æœ¬åœ°çš„å¤§æ¨¡å‹ï¼Œæˆ‘æ¨èå‚…ç››è€å¸ˆçš„Orion-14B LLMï¼Œå› ä¸ºæˆ‘åœ¨é‡åˆ°é—®é¢˜çš„æ—¶å€™ç¡®å®èƒ½ä»é…å¥—çš„å¾®ä¿¡ç¾¤å¾—åˆ°æŠ€æœ¯æ”¯æŒã€‚åŒæ—¶å‚…ç››è€å¸ˆåšä¸ºä¸Šå¸‚å…¬å¸çš„CEOï¼Œéƒ½èƒ½ååˆ†å¿«çš„å›ç­”æˆ‘ã€‚åœ¨å®¢æˆ·æ”¯æŒæ–¹é¢ï¼ŒOpenAIè·ç¦»å›½å†…å‚å•†å®åœ¨æ˜¯å·®å¾—å¤ªè¿œã€‚","like_count":2},{"had_liked":false,"id":394217,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"åŒ—äº¬","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1726130873,"is_pvip":false,"replies":[{"id":143113,"content":"å›ç­”å¾—å¾ˆå¯¹ï¼ç»™ä½ ç‚¹èµğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1337319,"ctime":1726235031,"ip_address":"å¹¿ä¸œ","comment_id":394217,"utype":1}],"discussion_count":1,"race_medal":2,"score":2,"product_id":100817901,"comment_content":"ç¬¬4è®²æ‰“å¡~\næ€è€ƒé¢˜ï¼šè¯¸å¦‚api_keyã€tokenè¿™ç±»æ•æ„Ÿæ•°æ®ï¼Œå¯ä»¥è€ƒè™‘å†™å…¥ç¯å¢ƒå˜é‡ä¸­ï¼Œæˆ–è€…æ”¾åˆ°å†…ç½‘çš„åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒä¸­ã€‚","like_count":2,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651119,"discussion_content":"å›ç­”å¾—å¾ˆå¯¹ï¼ç»™ä½ ç‚¹èµğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726235031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394100,"user_name":"grok","can_delete":false,"product_type":"c1","uid":1341502,"ip_address":"ç¾å›½","ucode":"4744AB3FA28FE2","user_header":"https://static001.geekbang.org/account/avatar/00/14/78/3e/f60ea472.jpg","comment_is_top":false,"comment_ctime":1725832045,"is_pvip":false,"replies":[{"id":143110,"content":"è¿™ä¸ªé—®é¢˜é—®å¾—å¾ˆå¥½ï¼\n\né¦–å…ˆï¼Œæœ€å¼ºæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œé€‰æœ€é€‚åˆè‡ªå·±çš„æ‰æœ‰æ„ä¹‰ã€‚å¯ä»¥ä½¿ç”¨ç¬¬20èŠ‚è¯¾çš„RAGè¯„ä¼°æŒ‡æ ‡åº“é€‰æ‹©é€‚åˆè‡ªå·±çš„å¤§æ¨¡å‹ã€‚\n\nå…¶æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨OpenAIæ‰è¿‡å¾ˆå¤šå‘ï¼Œå½“ç„¶ç”¨å›½äº§å¤§æ¨¡å‹ä¹Ÿæ‰è¿‡å¾ˆå¤šå‘ã€‚ä½†æ˜¯å›½äº§å¤§æ¨¡å‹çš„å®¢æœç»™åŠ›å•Šï¼Œä¼šå¸®æˆ‘ä»¬è§£å†³é—®é¢˜ã€‚OpenAIçš„å®¢æœç­‰äºæ²¡æœ‰ã€‚æ‰€ä»¥é™¤äº†è€ƒè™‘è´¨é‡ä¹‹å¤–ï¼Œå®¢æœï¼ˆä¹Ÿå°±æ˜¯å¸®åŠ©å®¢æˆ·è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›å’Œæ€åº¦ï¼‰ä¹Ÿæ˜¯å¾ˆé‡è¦çš„å‚è€ƒå› ç´ ã€‚ æ¯•ç«Ÿæˆ‘ä»¬ä¸æ˜¯å‚åŠ ç«èµ›çš„ï¼Œæˆ‘ä»¬æ˜¯æè½åœ°çš„ã€‚\n\næœ€åæ¨èä¸€ä¸ªå¾ˆå®ç”¨çš„æ–¹æ³•ï¼Œä½ å¯ä»¥æŠŠå„å¤§æ¨¡å‹éƒ½ç”³è¯·ä¸€éï¼Œç„¶åé‡åˆ°é—®é¢˜å°±æ‰¾å®¢æœï¼Œå“ªå®¶å›å¤å¾—æœ€å¿«æœ€å¥½ï¼Œå“ªå®¶å°±å¯¹ä½ å®é™…å·¥ä½œè¶Šæœ‰å¸®åŠ©ã€‚æ¯•ç«Ÿæ¦œå•æ˜¯å¯ä»¥åˆ·å’Œä½œå¼Šçš„ã€‚\n","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1337319,"ctime":1726234776,"ip_address":"å¹¿ä¸œ","comment_id":394100,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"è¯·æ•™å„ä½å¤§ä½¬ï¼šå¯¹äºä¸­æ–‡é—®ç­”ï¼Œåˆ°åº•å“ªå®¶LLMæœ€å¼ºï¼Ÿæˆ‘åªçŸ¥é“å»lmsys leaderboard, æœ‰ä¸ªä¸‹æ‹‰åˆ—è¡¨å¯é€‰Chinese Prompts, çœ‹æ’å.   å…¶ä»–æœ‰æ›´å¥½çš„æ¦œå•å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651116,"discussion_content":"è¿™ä¸ªé—®é¢˜é—®å¾—å¾ˆå¥½ï¼\n\né¦–å…ˆï¼Œæœ€å¼ºæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œé€‰æœ€é€‚åˆè‡ªå·±çš„æ‰æœ‰æ„ä¹‰ã€‚å¯ä»¥ä½¿ç”¨ç¬¬20èŠ‚è¯¾çš„RAGè¯„ä¼°æŒ‡æ ‡åº“é€‰æ‹©é€‚åˆè‡ªå·±çš„å¤§æ¨¡å‹ã€‚\n\nå…¶æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨OpenAIæ‰è¿‡å¾ˆå¤šå‘ï¼Œå½“ç„¶ç”¨å›½äº§å¤§æ¨¡å‹ä¹Ÿæ‰è¿‡å¾ˆå¤šå‘ã€‚ä½†æ˜¯å›½äº§å¤§æ¨¡å‹çš„å®¢æœç»™åŠ›å•Šï¼Œä¼šå¸®æˆ‘ä»¬è§£å†³é—®é¢˜ã€‚OpenAIçš„å®¢æœç­‰äºæ²¡æœ‰ã€‚æ‰€ä»¥é™¤äº†è€ƒè™‘è´¨é‡ä¹‹å¤–ï¼Œå®¢æœï¼ˆä¹Ÿå°±æ˜¯å¸®åŠ©å®¢æˆ·è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›å’Œæ€åº¦ï¼‰ä¹Ÿæ˜¯å¾ˆé‡è¦çš„å‚è€ƒå› ç´ ã€‚ æ¯•ç«Ÿæˆ‘ä»¬ä¸æ˜¯å‚åŠ ç«èµ›çš„ï¼Œæˆ‘ä»¬æ˜¯æè½åœ°çš„ã€‚\n\næœ€åæ¨èä¸€ä¸ªå¾ˆå®ç”¨çš„æ–¹æ³•ï¼Œä½ å¯ä»¥æŠŠå„å¤§æ¨¡å‹éƒ½ç”³è¯·ä¸€éï¼Œç„¶åé‡åˆ°é—®é¢˜å°±æ‰¾å®¢æœï¼Œå“ªå®¶å›å¤å¾—æœ€å¿«æœ€å¥½ï¼Œå“ªå®¶å°±å¯¹ä½ å®é™…å·¥ä½œè¶Šæœ‰å¸®åŠ©ã€‚æ¯•ç«Ÿæ¦œå•æ˜¯å¯ä»¥åˆ·å’Œä½œå¼Šçš„ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726234776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3959183,"avatar":"https://static001.geekbang.org/account/avatar/00/3c/69/8f/64979f89.jpg","nickname":"å¤§æ¢¦è°å…ˆè§‰","note":"","ucode":"C9C18D62339668","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650927,"discussion_content":"superCLUEï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1725882811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395453,"user_name":"Geek_fbf3a3","can_delete":false,"product_type":"c1","uid":4033130,"ip_address":"å››å·","ucode":"98ED0656762DE7","user_header":"","comment_is_top":false,"comment_ctime":1730862071,"is_pvip":false,"replies":[{"id":143600,"content":"æ­£ç¡®ï¼å¾ˆèµï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1337319,"ctime":1731378822,"ip_address":"æ±Ÿè‹","comment_id":395453,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"è¯¾åä½œä¸šï¼šç¯å¢ƒå˜é‡","like_count":0,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653644,"discussion_content":"æ­£ç¡®ï¼å¾ˆèµï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731378822,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394677,"user_name":"overland","can_delete":false,"product_type":"c1","uid":1208835,"ip_address":"å®‰å¾½","ucode":"609A463519E5F0","user_header":"https://static001.geekbang.org/account/avatar/00/12/72/03/da1fcc81.jpg","comment_is_top":false,"comment_ctime":1727571540,"is_pvip":false,"replies":[{"id":143613,"content":"è¿™ä¸ªç™¾åº¦æ¨¡å‹æ˜¯å…è´¹çš„ï¼Œè€Œä¸”è²Œä¼¼å…è´¹çš„æ¨¡å‹è¶Šæ¥è¶Šå¤šäº†ã€‚https:&#47;&#47;cloud.baidu.com&#47;doc&#47;WENXINWORKSHOP&#47;s&#47;wlwg8f1i3\n\nç§æœ‰åŒ–æ¨¡å‹è¿™å—æš‚æ— è®²è§£å†…å®¹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1337319,"ctime":1731379764,"ip_address":"æ±Ÿè‹","comment_id":394677,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªç™¾åº¦æ¨¡å‹æ˜¯éœ€è¦æ”¶è´¹å§ï¼Œæ˜¯è°ƒç”¨å…¬ç½‘çš„å§ï¼Ÿæƒ³è¯·æ•™ä¸‹ï¼Œåƒæˆ‘ä»¬åšé¡¹ç›®äº§å“å¾ˆå¤šæ˜¯å¿…é¡»ç§æœ‰åŒ–çš„ï¼Œç§æœ‰åŒ–æ¨¡å‹æ€ä¹ˆä½¿ç”¨è¿™å—æœ‰è®²è§£å†…å®¹å—ï¼Ÿè°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":653659,"discussion_content":"è¿™ä¸ªç™¾åº¦æ¨¡å‹æ˜¯å…è´¹çš„ï¼Œè€Œä¸”è²Œä¼¼å…è´¹çš„æ¨¡å‹è¶Šæ¥è¶Šå¤šäº†ã€‚https://cloud.baidu.com/doc/WENXINWORKSHOP/s/wlwg8f1i3\n\nç§æœ‰åŒ–æ¨¡å‹è¿™å—æš‚æ— è®²è§£å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731379764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1157533,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a9/9d/bdfd9e58.jpg","nickname":"æ— å¤„ä¸åœ¨","note":"","ucode":"BB535BC6F448F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652967,"discussion_content":"è¿™å—å¯ä»¥ä½¿ç”¨Ollama+ç§æœ‰åŒ–éƒ¨ç½²qwen2.5æˆ–è€…ç€llama3.3","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1729945160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394263,"user_name":"Wynnja Woo","can_delete":false,"product_type":"c1","uid":1245466,"ip_address":"ç¾å›½","ucode":"7772E909F83D35","user_header":"https://static001.geekbang.org/account/avatar/00/13/01/1a/ab103c8b.jpg","comment_is_top":false,"comment_ctime":1726279866,"is_pvip":true,"replies":[{"id":143127,"content":"ä¸‹ä¸€èŠ‚è¯¾ï¼ˆç¬¬5èŠ‚ï¼‰æœ‰ä¸“é—¨è®²è¿™ä¸ªé—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1337319,"ctime":1726360833,"ip_address":"å¹¿ä¸œ","comment_id":394263,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"å¯¹äºä»¥ä¸‹ä»£ç ï¼Œè¯·é—®ä¸ºä»€ä¹ˆè·å–ç»“æ„åŒ–æ•°æ®éœ€è¦ç”¨åˆ°ä¹‹å‰ç”¨æˆ·çš„è¾“å…¥ï¼Ÿ\ndef è·å–ç»“æ„åŒ–æ•°æ®æŸ¥è¯¢å‚æ•°(ç”¨æˆ·è¾“å…¥):\n  ä¹‹å‰çš„ç”¨æˆ·è¾“å…¥ = è·å–ä¹‹å‰çš„ç”¨æˆ·è¾“å…¥()\n  é‡è¯•æ€»æ¬¡æ•° = 2\n  å½“å‰é‡è¯•æ¬¡æ•° = 0\n  while å½“å‰é‡è¯•æ¬¡æ•° &lt;= é‡è¯•æ€»æ¬¡æ•°:\n    try:\n      ç»“æ„åŒ–æ•°æ® = å¯¹è¯æ¨¡å¼(æ„é€ è§£æç”¨æˆ·è¾“å…¥å¹¶è¿”å›ç»“æ„åŒ–æ•°æ®ç”¨çš„messages(ä¹‹å‰çš„ç”¨æˆ·è¾“å…¥,ç”¨æˆ·è¾“å…¥),ç”¨æˆ·è¾“å…¥,åŸæ–‡ä¸å¸¦å…¥å¤§æ¨¡å‹å¯¹è¯ä¸­=False,ç»“æœä¸å¸¦å…¥å¤§æ¨¡å‹å¯¹è¯ä¸­=True)\n      æŸ¥è¯¢å‚æ•° = json.loads(ç»“æ„åŒ–æ•°æ®)\n      return æŸ¥è¯¢å‚æ•°\n    except:\n      å½“å‰é‡è¯•æ¬¡æ•° += 1\n  \n  return None","like_count":0,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651168,"discussion_content":"ä¸‹ä¸€èŠ‚è¯¾ï¼ˆç¬¬5èŠ‚ï¼‰æœ‰ä¸“é—¨è®²è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726360833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394243,"user_name":"Wynnja Woo","can_delete":false,"product_type":"c1","uid":1245466,"ip_address":"ç¾å›½","ucode":"7772E909F83D35","user_header":"https://static001.geekbang.org/account/avatar/00/13/01/1a/ab103c8b.jpg","comment_is_top":false,"comment_ctime":1726212275,"is_pvip":true,"replies":[{"id":143126,"content":"è¯·é—®Anacondaå‘½ä»¤è¡Œç»™å‡ºçš„å‡ºé”™ä¿¡æ¯æ˜¯ï¼Ÿæœ‰æ²¡æœ‰è®¾ç½®API keyæˆ–è€…å»ºç«‹ç¯å¢ƒå˜é‡ï¼ˆå°±æ˜¯å¦ä¸€ä½åŒå­¦å¼ ç”³å‚²ç•™è¨€æ‰€è¯´çš„é‚£æ ·ï¼‰ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1337319,"ctime":1726360784,"ip_address":"å¹¿ä¸œ","comment_id":394243,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100817901,"comment_content":"ä»£ç è¿è¡Œåä¸¤ä¸ªé—®é¢˜ï¼š1.æŸ¥è¯¢ç»“æœAIï¼šæŠ±æ­‰ï¼Œæ•°æ®åº“é‡Œé¢æ²¡æœ‰ä½ éœ€è¦çš„ä¿¡æ¯ã€‚2.é”€å”®ç®¡ç† &#47; é”€å”®å¯¹è´¦ &#47; æ·»åŠ å…¥è´¦è®°å½• ç›´å´©æºƒ","like_count":0,"discussions":[{"author":{"id":1337319,"avatar":"https://static001.geekbang.org/account/avatar/00/14/67/e7/0d92745d.jpg","nickname":"Billyç«ç‚ç„±ç‡š(ä¸ç¾çš„é£)","note":"","ucode":"63DED1EB2CF6AE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":651167,"discussion_content":"è¯·é—®Anacondaå‘½ä»¤è¡Œç»™å‡ºçš„å‡ºé”™ä¿¡æ¯æ˜¯ï¼Ÿæœ‰æ²¡æœ‰è®¾ç½®API keyæˆ–è€…å»ºç«‹ç¯å¢ƒå˜é‡ï¼ˆå°±æ˜¯å¦ä¸€ä½åŒå­¦å¼ ç”³å‚²ç•™è¨€æ‰€è¯´çš„é‚£æ ·ï¼‰ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1726360784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":395709,"user_name":"éæ´²é»‘çŒ´å­","can_delete":false,"product_type":"c1","uid":2639724,"ip_address":"ç¾å›½","ucode":"F5FEAC07D562E0","user_header":"https://static001.geekbang.org/account/avatar/00/28/47/6c/78184d19.jpg","comment_is_top":false,"comment_ctime":1731822029,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":1,"score":2,"product_id":100817901,"comment_content":"æ²¡ç”¨è¿‡ Django, ä¸€å¼€å§‹æ²¡å®æ“å‡ºæ¥, å…¶å®è¿˜æœ‰ä¸€æ­¥: ä¿®æ”¹ä»£ç ä¹‹å, ç”³è¯·å¤§æ¨¡å‹ä¹‹å‰è¿˜è¦åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä¸€æ¬¡ `python manage.py makemigrations` å‘½ä»¤å†åˆ·æ–°é¡µé¢, æ‰èƒ½çœ‹åˆ°é¡µé¢å˜åŒ–\n","like_count":0}]}