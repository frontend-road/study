{"id":39712,"title":"10 | Kubernetes一键部署利器：kubeadm","content":"<p>你好，我是张磊。今天我和你分享的主题是：Kubernetes一键部署利器之kubeadm。</p><p>通过前面几篇文章的内容，我其实阐述了这样一个思想：<strong>要真正发挥容器技术的实力，你就不能仅仅局限于对Linux容器本身的钻研和使用。</strong></p><p>这些知识更适合作为你的技术储备，以便在需要的时候可以帮你更快地定位问题，并解决问题。</p><p>而更深入地学习容器技术的关键在于，<strong>如何使用这些技术来“容器化”你的应用。</strong></p><p>比如，我们的应用既可能是Java Web和MySQL这样的组合，也可能是Cassandra这样的分布式系统。而要使用容器把后者运行起来，你单单通过Docker把一个Cassandra镜像跑起来是没用的。</p><p>要把Cassandra应用容器化的关键，在于如何处理好这些Cassandra容器之间的编排关系。比如，哪些Cassandra容器是主，哪些是从？主从容器如何区分？它们之间又如何进行自动发现和通信？Cassandra容器的持久化数据又如何保持，等等。</p><p>这也是为什么我们要反复强调Kubernetes项目的主要原因：这个项目体现出来的容器化“表达能力”，具有独有的先进性和完备性。这就使得它不仅能运行Java Web与MySQL这样的常规组合，还能够处理Cassandra容器集群等复杂编排问题。所以，对这种编排能力的剖析、解读和最佳实践，将是本专栏最重要的一部分内容。</p><!-- [[[read_end]]] --><p>不过，万事开头难。</p><p>作为一个典型的分布式项目，Kubernetes的部署一直以来都是挡在初学者前面的一只“拦路虎”。尤其是在Kubernetes项目发布初期，它的部署完全要依靠一堆由社区维护的脚本。</p><p>其实，Kubernetes作为一个Golang项目，已经免去了很多类似于Python项目要安装语言级别依赖的麻烦。但是，除了将各个组件编译成二进制文件外，用户还要负责为这些二进制文件编写对应的配置文件、配置自启动脚本，以及为kube-apiserver配置授权文件等等诸多运维工作。</p><p>目前，各大云厂商最常用的部署的方法，是使用SaltStack、Ansible等运维工具自动化地执行这些步骤。</p><p>但即使这样，这个部署过程依然非常繁琐。因为，SaltStack这类专业运维工具本身的学习成本，就可能比Kubernetes项目还要高。</p><p><strong>难道Kubernetes项目就没有简单的部署方法了吗？</strong></p><p>这个问题，在Kubernetes社区里一直没有得到足够重视。直到2017年，在志愿者的推动下，社区才终于发起了一个独立的部署工具，名叫：<a href=\"https://github.com/kubernetes/kubeadm\">kubeadm</a>。</p><p>这个项目的目的，就是要让用户能够通过这样两条指令完成一个Kubernetes集群的部署：</p><pre><code># 创建一个Master节点\n$ kubeadm init\n\n# 将一个Node节点加入到当前集群中\n$ kubeadm join &lt;Master节点的IP和端口&gt;\n</code></pre><p>是不是非常方便呢？</p><p>不过，你可能也会有所顾虑：<strong>Kubernetes的功能那么多，这样一键部署出来的集群，能用于生产环境吗？</strong></p><p>为了回答这个问题，在今天这篇文章，我就先和你介绍一下kubeadm的工作原理吧。</p><h2>kubeadm的工作原理</h2><p>在上一篇文章《从容器到容器云：谈谈Kubernetes的本质》中，我已经详细介绍了Kubernetes的架构和它的组件。在部署时，它的每一个组件都是一个需要被执行的、单独的二进制文件。所以不难想象，SaltStack这样的运维工具或者由社区维护的脚本的功能，就是要把这些二进制文件传输到指定的机器当中，然后编写控制脚本来启停这些组件。</p><p>不过，在理解了容器技术之后，你可能已经萌生出了这样一个想法，<strong>为什么不用容器部署Kubernetes呢？</strong></p><p>这样，我只要给每个Kubernetes组件做一个容器镜像，然后在每台宿主机上用docker run指令启动这些组件容器，部署不就完成了吗？</p><p>事实上，在Kubernetes早期的部署脚本里，确实有一个脚本就是用Docker部署Kubernetes项目的，这个脚本相比于SaltStack等的部署方式，也的确简单了不少。</p><p>但是，<strong>这样做会带来一个很麻烦的问题，即：如何容器化kubelet。</strong></p><p>我在上一篇文章中，已经提到kubelet是Kubernetes项目用来操作Docker等容器运行时的核心组件。可是，除了跟容器运行时打交道外，kubelet在配置容器网络、管理容器数据卷时，都需要直接操作宿主机。</p><p>而如果现在kubelet本身就运行在一个容器里，那么直接操作宿主机就会变得很麻烦。对于网络配置来说还好，kubelet容器可以通过不开启Network Namespace（即Docker的host network模式）的方式，直接共享宿主机的网络栈。可是，要让kubelet隔着容器的Mount Namespace和文件系统，操作宿主机的文件系统，就有点儿困难了。</p><p>比如，如果用户想要使用NFS做容器的持久化数据卷，那么kubelet就需要在容器进行绑定挂载前，在宿主机的指定目录上，先挂载NFS的远程目录。</p><p>可是，这时候问题来了。由于现在kubelet是运行在容器里的，这就意味着它要做的这个“mount -F nfs”命令，被隔离在了一个单独的Mount Namespace中。即，kubelet做的挂载操作，不能被“传播”到宿主机上。</p><p>对于这个问题，有人说，可以使用setns()系统调用，在宿主机的Mount Namespace中执行这些挂载操作；也有人说，应该让Docker支持一个–mnt=host的参数。</p><p>但是，到目前为止，在容器里运行kubelet，依然没有很好的解决办法，我也不推荐你用容器去部署Kubernetes项目。</p><p>正因为如此，kubeadm选择了一种妥协方案：</p><blockquote>\n<p>把kubelet直接运行在宿主机上，然后使用容器部署其他的Kubernetes组件。</p>\n</blockquote><p>所以，你使用kubeadm的第一步，是在机器上手动安装kubeadm、kubelet和kubectl这三个二进制文件。当然，kubeadm的作者已经为各个发行版的Linux准备好了安装包，所以你只需要执行：</p><pre><code>$ apt-get install kubeadm\n</code></pre><p>就可以了。</p><p>接下来，你就可以使用“kubeadm init”部署Master节点了。</p><h2>kubeadm init的工作流程</h2><p>当你执行kubeadm init指令后，<strong>kubeadm首先要做的，是一系列的检查工作，以确定这台机器可以用来部署Kubernetes</strong>。这一步检查，我们称为“Preflight Checks”，它可以为你省掉很多后续的麻烦。</p><p>其实，Preflight Checks包括了很多方面，比如：</p><ul>\n<li>Linux内核的版本必须是否是3.10以上？</li>\n<li>Linux Cgroups模块是否可用？</li>\n<li>机器的hostname是否标准？在Kubernetes项目里，机器的名字以及一切存储在Etcd中的API对象，都必须使用标准的DNS命名（RFC 1123）。</li>\n<li>用户安装的kubeadm和kubelet的版本是否匹配？</li>\n<li>机器上是不是已经安装了Kubernetes的二进制文件？</li>\n<li>Kubernetes的工作端口10250/10251/10252端口是不是已经被占用？</li>\n<li>ip、mount等Linux指令是否存在？</li>\n<li>Docker是否已经安装？</li>\n<li>……</li>\n</ul><p><strong>在通过了Preflight Checks之后，kubeadm要为你做的，是生成Kubernetes对外提供服务所需的各种证书和对应的目录。</strong></p><p>Kubernetes对外提供服务时，除非专门开启“不安全模式”，否则都要通过HTTPS才能访问kube-apiserver。这就需要为Kubernetes集群配置好证书文件。</p><p>kubeadm为Kubernetes项目生成的证书文件都放在Master节点的/etc/kubernetes/pki目录下。在这个目录下，最主要的证书文件是ca.crt和对应的私钥ca.key。</p><p>此外，用户使用kubectl获取容器日志等streaming操作时，需要通过kube-apiserver向kubelet发起请求，这个连接也必须是安全的。kubeadm为这一步生成的是apiserver-kubelet-client.crt文件，对应的私钥是apiserver-kubelet-client.key。</p><p>除此之外，Kubernetes集群中还有Aggregate APIServer等特性，也需要用到专门的证书，这里我就不再一一列举了。需要指出的是，你可以选择不让kubeadm为你生成这些证书，而是拷贝现有的证书到如下证书的目录里：</p><pre><code>/etc/kubernetes/pki/ca.{crt,key}\n</code></pre><p>这时，kubeadm就会跳过证书生成的步骤，把它完全交给用户处理。</p><p><strong>证书生成后，kubeadm接下来会为其他组件生成访问kube-apiserver所需的配置文件</strong>。这些文件的路径是：/etc/kubernetes/xxx.conf：</p><pre><code>ls /etc/kubernetes/\nadmin.conf  controller-manager.conf  kubelet.conf  scheduler.conf\n</code></pre><p>这些文件里面记录的是，当前这个Master节点的服务器地址、监听端口、证书目录等信息。这样，对应的客户端（比如scheduler，kubelet等），可以直接加载相应的文件，使用里面的信息与kube-apiserver建立安全连接。</p><p><strong>接下来，kubeadm会为Master组件生成Pod配置文件</strong>。我已经在上一篇文章中和你介绍过Kubernetes有三个Master组件kube-apiserver、kube-controller-manager、kube-scheduler，而它们都会被使用Pod的方式部署起来。</p><p>你可能会有些疑问：这时，Kubernetes集群尚不存在，难道kubeadm会直接执行docker run来启动这些容器吗？</p><p>当然不是。</p><p>在Kubernetes中，有一种特殊的容器启动方法叫做“Static Pod”。它允许你把要部署的Pod的YAML文件放在一个指定的目录里。这样，当这台机器上的kubelet启动时，它会自动检查这个目录，加载所有的Pod YAML文件，然后在这台机器上启动它们。</p><p>从这一点也可以看出，kubelet在Kubernetes项目中的地位非常高，在设计上它就是一个完全独立的组件，而其他Master组件，则更像是辅助性的系统容器。</p><p>在kubeadm中，Master组件的YAML文件会被生成在/etc/kubernetes/manifests路径下。比如，kube-apiserver.yaml：</p><pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  annotations:\n    scheduler.alpha.kubernetes.io/critical-pod: &quot;&quot;\n  creationTimestamp: null\n  labels:\n    component: kube-apiserver\n    tier: control-plane\n  name: kube-apiserver\n  namespace: kube-system\nspec:\n  containers:\n  - command:\n    - kube-apiserver\n    - --authorization-mode=Node,RBAC\n    - --runtime-config=api/all=true\n    - --advertise-address=10.168.0.2\n    ...\n    - --tls-cert-file=/etc/kubernetes/pki/apiserver.crt\n    - --tls-private-key-file=/etc/kubernetes/pki/apiserver.key\n    image: k8s.gcr.io/kube-apiserver-amd64:v1.11.1\n    imagePullPolicy: IfNotPresent\n    livenessProbe:\n      ...\n    name: kube-apiserver\n    resources:\n      requests:\n        cpu: 250m\n    volumeMounts:\n    - mountPath: /usr/share/ca-certificates\n      name: usr-share-ca-certificates\n      readOnly: true\n    ...\n  hostNetwork: true\n  priorityClassName: system-cluster-critical\n  volumes:\n  - hostPath:\n      path: /etc/ca-certificates\n      type: DirectoryOrCreate\n    name: etc-ca-certificates\n  ...\n</code></pre><p>关于一个Pod的YAML文件怎么写、里面的字段如何解读，我会在后续专门的文章中为你详细分析。在这里，你只需要关注这样几个信息：</p><ol>\n<li>\n<p>这个Pod里只定义了一个容器，它使用的镜像是：<code>k8s.gcr.io/kube-apiserver-amd64:v1.11.1</code> 。这个镜像是Kubernetes官方维护的一个组件镜像。</p>\n</li>\n<li>\n<p>这个容器的启动命令（commands）是kube-apiserver --authorization-mode=Node,RBAC …，这样一句非常长的命令。其实，它就是容器里kube-apiserver这个二进制文件再加上指定的配置参数而已。</p>\n</li>\n<li>\n<p>如果你要修改一个已有集群的kube-apiserver的配置，需要修改这个YAML文件。</p>\n</li>\n<li>\n<p>这些组件的参数也可以在部署时指定，我很快就会讲到。</p>\n</li>\n</ol><p>在这一步完成后，kubeadm还会再生成一个Etcd的Pod YAML文件，用来通过同样的Static Pod的方式启动Etcd。所以，最后Master组件的Pod YAML文件如下所示：</p><pre><code>$ ls /etc/kubernetes/manifests/\netcd.yaml  kube-apiserver.yaml  kube-controller-manager.yaml  kube-scheduler.yaml\n</code></pre><p>而一旦这些YAML文件出现在被kubelet监视的/etc/kubernetes/manifests目录下，kubelet就会自动创建这些YAML文件中定义的Pod，即Master组件的容器。</p><p>Master容器启动后，kubeadm会通过检查localhost:6443/healthz这个Master组件的健康检查URL，等待Master组件完全运行起来。</p><p><strong>然后，kubeadm就会为集群生成一个bootstrap token</strong>。在后面，只要持有这个token，任何一个安装了kubelet和kubadm的节点，都可以通过kubeadm join加入到这个集群当中。</p><p>这个token的值和使用方法，会在kubeadm init结束后被打印出来。</p><p><strong>在token生成之后，kubeadm会将ca.crt等Master节点的重要信息，通过ConfigMap的方式保存在Etcd当中，供后续部署Node节点使用</strong>。这个ConfigMap的名字是cluster-info。</p><p><strong>kubeadm init的最后一步，就是安装默认插件</strong>。Kubernetes默认kube-proxy和DNS这两个插件是必须安装的。它们分别用来提供整个集群的服务发现和DNS功能。其实，这两个插件也只是两个容器镜像而已，所以kubeadm只要用Kubernetes客户端创建两个Pod就可以了。</p><h2>kubeadm join的工作流程</h2><p>这个流程其实非常简单，kubeadm init生成bootstrap token之后，你就可以在任意一台安装了kubelet和kubeadm的机器上执行kubeadm join了。</p><p>可是，为什么执行kubeadm join需要这样一个token呢？</p><p>因为，任何一台机器想要成为Kubernetes集群中的一个节点，就必须在集群的kube-apiserver上注册。可是，要想跟apiserver打交道，这台机器就必须要获取到相应的证书文件（CA文件）。可是，为了能够一键安装，我们就不能让用户去Master节点上手动拷贝这些文件。</p><p>所以，kubeadm至少需要发起一次“不安全模式”的访问到kube-apiserver，从而拿到保存在ConfigMap中的cluster-info（它保存了APIServer的授权信息）。而bootstrap token，扮演的就是这个过程中的安全验证的角色。</p><p>只要有了cluster-info里的kube-apiserver的地址、端口、证书，kubelet就可以以“安全模式”连接到apiserver上，这样一个新的节点就部署完成了。</p><p>接下来，你只要在其他节点上重复这个指令就可以了。</p><h2>配置kubeadm的部署参数</h2><p>我在前面讲了kubeadm部署Kubernetes集群最关键的两个步骤，kubeadm init和kubeadm join。相信你一定会有这样的疑问：kubeadm确实简单易用，可是我又该如何定制我的集群组件参数呢？</p><p>比如，我要指定kube-apiserver的启动参数，该怎么办？</p><p>在这里，我强烈推荐你在使用kubeadm init部署Master节点时，使用下面这条指令：</p><pre><code>$ kubeadm init --config kubeadm.yaml\n</code></pre><p>这时，你就可以给kubeadm提供一个YAML文件（比如，kubeadm.yaml），它的内容如下所示（我仅列举了主要部分）：</p><pre><code>apiVersion: kubeadm.k8s.io/v1alpha2\nkind: MasterConfiguration\nkubernetesVersion: v1.11.0\napi:\n  advertiseAddress: 192.168.0.102\n  bindPort: 6443\n  ...\netcd:\n  local:\n    dataDir: /var/lib/etcd\n    image: &quot;&quot;\nimageRepository: k8s.gcr.io\nkubeProxy:\n  config:\n    bindAddress: 0.0.0.0\n    ...\nkubeletConfiguration:\n  baseConfig:\n    address: 0.0.0.0\n    ...\nnetworking:\n  dnsDomain: cluster.local\n  podSubnet: &quot;&quot;\n  serviceSubnet: 10.96.0.0/12\nnodeRegistration:\n  criSocket: /var/run/dockershim.sock\n  ...\n</code></pre><p>通过制定这样一个部署参数配置文件，你就可以很方便地在这个文件里填写各种自定义的部署参数了。比如，我现在要指定kube-apiserver的参数，那么我只要在这个文件里加上这样一段信息：</p><pre><code>...\napiServerExtraArgs:\n  advertise-address: 192.168.0.103\n  anonymous-auth: false\n  enable-admission-plugins: AlwaysPullImages,DefaultStorageClass\n  audit-log-path: /home/johndoe/audit.log\n</code></pre><p>然后，kubeadm就会使用上面这些信息替换/etc/kubernetes/manifests/kube-apiserver.yaml里的command字段里的参数了。</p><p>而这个YAML文件提供的可配置项远不止这些。比如，你还可以修改kubelet和kube-proxy的配置，修改Kubernetes使用的基础镜像的URL（默认的<code>k8s.gcr.io/xxx</code>镜像URL在国内访问是有困难的），指定自己的证书文件，指定特殊的容器运行时等等。这些配置项，就留给你在后续实践中探索了。</p><h2>总结</h2><p>在今天的这次分享中，我重点介绍了kubeadm这个部署工具的工作原理和使用方法。紧接着，我会在下一篇文章中，使用它一步步地部署一个完整的Kubernetes集群。</p><p>从今天的分享中，你可以看到，kubeadm的设计非常简洁。并且，它在实现每一步部署功能时，都在最大程度地重用Kubernetes已有的功能，这也就使得我们在使用kubeadm部署Kubernetes项目时，非常有“原生”的感觉，一点都不会感到突兀。</p><p>而kubeadm的源代码，直接就在kubernetes/cmd/kubeadm目录下，是Kubernetes项目的一部分。其中，app/phases文件夹下的代码，对应的就是我在这篇文章中详细介绍的每一个具体步骤。</p><p>看到这里，你可能会猜想，kubeadm的作者一定是Google公司的某个“大神”吧。</p><p>实际上，kubeadm几乎完全是一位高中生的作品。他叫Lucas Käldström，芬兰人，今年只有18岁。kubeadm，是他17岁时用业余时间完成的一个社区项目。</p><p>所以说，开源社区的魅力也在于此：一个成功的开源项目，总能够吸引到全世界最厉害的贡献者参与其中。尽管参与者的总体水平参差不齐，而且频繁的开源活动又显得杂乱无章难以管控，但一个有足够热度的社区最终的收敛方向，却一定是代码越来越完善、Bug越来越少、功能越来越强大。</p><p>最后，我再来回答一下我在今天这次分享开始提到的问题：kubeadm能够用于生产环境吗？</p><p>到目前为止（2018年9月），这个问题的答案是：不能。</p><p>因为kubeadm目前最欠缺的是，一键部署一个高可用的Kubernetes集群，即：Etcd、Master组件都应该是多节点集群，而不是现在这样的单点。这，当然也正是kubeadm接下来发展的主要方向。</p><p>另一方面，Lucas也正在积极地把kubeadm phases开放给用户，即：用户可以更加自由地定制kubeadm的每一个部署步骤。这些举措，都可以让这个项目更加完善，我对它的发展走向也充满了信心。</p><p>当然，如果你有部署规模化生产环境的需求，我推荐使用<a href=\"https://github.com/kubernetes/kops\">kops</a>或者SaltStack这样更复杂的部署工具。但，在本专栏接下来的讲解中，我都会以kubeadm为依据进行讲述。</p><ul>\n<li>一方面，作为Kubernetes项目的原生部署工具，kubeadm对Kubernetes项目特性的使用和集成，确实要比其他项目“技高一筹”，非常值得我们学习和借鉴；</li>\n<li>另一方面，kubeadm的部署方法，不会涉及到太多的运维工作，也不需要我们额外学习复杂的部署工具。而它部署的Kubernetes集群，跟一个完全使用二进制文件搭建起来的集群几乎没有任何区别。</li>\n</ul><p>因此，使用kubeadm去部署一个Kubernetes集群，对于你理解Kubernetes组件的工作方式和架构，最好不过了。</p><h2>思考题</h2><ol>\n<li>\n<p>在Linux上为一个类似kube-apiserver的Web Server制作证书，你知道可以用哪些工具实现吗？</p>\n</li>\n<li>\n<p>回忆一下我在前面文章中分享的Kubernetes架构，你能够说出Kubernetes各个功能组件之间（包含Etcd），都有哪些建立连接或者调用的方式吗？（比如：HTTP/HTTPS，远程调用等等）</p>\n</li>\n</ol><p>感谢你的收听，欢迎你给我留言，也欢迎分享给更多的朋友一起阅读。</p>","neighbors":{"left":{"article_title":"09 | 从容器到容器云：谈谈Kubernetes的本质","id":23132},"right":{"article_title":"11 | 从0到1：搭建一个完整的Kubernetes集群","id":39724}},"comments":[{"had_liked":false,"id":24322,"user_name":"Antergone","can_delete":false,"product_type":"c1","uid":1071956,"ip_address":"","ucode":"E9B63C09A51C62","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/54/0c06dbde.jpg","comment_is_top":false,"comment_ctime":1536900300,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1161178070220","product_id":100015201,"comment_content":"有一个ansible playbook可以推荐给大家。<br>https:&#47;&#47;github.com&#47;gjmzj&#47;kubeasz<br>初学者可以跟着一步步看原理，后期还可以自己定制化。主要是容易产生兴趣。","like_count":271,"discussions":[{"author":{"id":1101602,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/22/5a483755.jpg","nickname":"小蛋壳","note":"","ucode":"8344163BF7722E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408373,"discussion_content":"本机部署k8s主从集群(kubeadm) https://www.jianshu.com/p/c18eb68942e2","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1635237453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1916685,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg","nickname":"怀揣梦想的学渣","note":"","ucode":"2349B9F4F6FDE3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564298,"discussion_content":"这个确实好用，速度快，也不会部署中断","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650207435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24512,"user_name":"MiracleWong","can_delete":false,"product_type":"c1","uid":1012816,"ip_address":"","ucode":"05233774710AFE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/50/59d429c9.jpg","comment_is_top":false,"comment_ctime":1537098388,"is_pvip":true,"discussion_count":6,"race_medal":3,"score":"628602323604","product_id":100015201,"comment_content":"我也补充一个可用于部署生产级别的Kubernetes的开源项目：https:&#47;&#47;github.com&#47;kubernetes-incubator&#47;kubespray   我们公司正在使用。","like_count":147,"discussions":[{"author":{"id":2302300,"avatar":"https://static001.geekbang.org/account/avatar/00/23/21/5c/e25e10e1.jpg","nickname":"Slooop","note":"","ucode":"17ABEE8D2A477F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545926,"discussion_content":"大家可以使用国内开源项目安装 k8s 集群，简单快捷，支持高可用以及周边应用，还有dashboard！\nhttps://github.com/KubeOperator/KubeOperator","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1642084774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1199969,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4f/61/00083e41.jpg","nickname":"小白","note":"","ucode":"7ACE14C0C4AE61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320261,"discussion_content":"建议放弃，bug太多了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604303874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1012816,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/50/59d429c9.jpg","nickname":"MiracleWong","note":"","ucode":"05233774710AFE","race_medal":3,"user_type":1,"is_pvip":true},"reply_author":{"id":1199969,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4f/61/00083e41.jpg","nickname":"小白","note":"","ucode":"7ACE14C0C4AE61","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":326236,"discussion_content":"现在已经换成ranche了","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1605568900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320261,"ip_address":""},"score":326236,"extra":""},{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"团","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1012816,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/74/50/59d429c9.jpg","nickname":"MiracleWong","note":"","ucode":"05233774710AFE","race_medal":3,"user_type":1,"is_pvip":true},"discussion":{"id":408451,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635250100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":326236,"ip_address":""},"score":408451,"extra":""}]},{"author":{"id":2030670,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLrbCic7BckSd3xrawFH5KW0yYtI1uSsIEPFh0FIHxvHv9u6XBKgZCqH13qPbZDHTdqgevXLdGQlEw/132","nickname":"Geek_2a4536","note":"","ucode":"640A0D228B275C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296149,"discussion_content":"马克","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596461490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255975,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2a/27/ab1d2c79.jpg","nickname":"洋","note":"","ucode":"9583C8DD6D8B4E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268849,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589840508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26634,"user_name":"maojing","can_delete":false,"product_type":"c1","uid":1137125,"ip_address":"","ucode":"CCB86B1CCB7F1C","user_header":"https://static001.geekbang.org/account/avatar/00/11/59/e5/17bb59ef.jpg","comment_is_top":false,"comment_ctime":1537706001,"is_pvip":false,"replies":[{"id":"9702","content":"Windows server简单易用，界面友好，一直都它的受众和细分市场，但你还是会毫不犹豫的选择Linux server。为什么呢？<br><br>基础设施这件事情，一旦做出选择，整个公司就载进去了。<br><br>这种场合下，为了政治正确强调“只有最合适的”，在我看来，是不负责任的。","user_name":"作者回复","comment_id":26634,"uid":"1218095","ip_address":"","utype":1,"ctime":1537754536,"user_name_real":"Geek_6ef93d"}],"discussion_count":5,"race_medal":0,"score":"340840122385","product_id":100015201,"comment_content":"楼主在这里有点鄙视swarm了，swarm在一定程度上可以解决很多问题。没有最好的，只有最合适的","like_count":80,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424693,"discussion_content":"Windows server简单易用，界面友好，一直都它的受众和细分市场，但你还是会毫不犹豫的选择Linux server。为什么呢？\n\n基础设施这件事情，一旦做出选择，整个公司就载进去了。\n\n这种场合下，为了政治正确强调“只有最合适的”，在我看来，是不负责任的。","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1537754536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018611,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8a/f3/fc992148.jpg","nickname":"kitsdk","note":"","ucode":"A3570300D8A48C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584058,"discussion_content":"哪里都有杠精","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660607324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"河北"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2421848,"avatar":"https://static001.geekbang.org/account/avatar/00/24/f4/58/383cd3a0.jpg","nickname":"洛书","note":"","ucode":"4F1C41E4679879","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413487,"discussion_content":"这是一个思辨问题，在k8s出现成熟之前有很多公司基于“负责任”的态度选择swarm, k8s成熟之后显得不那么“负责任”了，但是k8s之后会不会有更新更炫的产品让k8s这个技术方案显得不那么负责任呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636483289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2854009,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/cicYxblT6QtXv5AaM4zialYoneL2ibTPU2ZbAdvuGkG7cN2Dx3Gf7vL5iby107kfOtb75fd4dwI5dtYOGcUK6kynicg/132","nickname":"Geek_2c32b2","note":"","ucode":"1B5EC1A6638B78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2421848,"avatar":"https://static001.geekbang.org/account/avatar/00/24/f4/58/383cd3a0.jpg","nickname":"洛书","note":"","ucode":"4F1C41E4679879","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537669,"discussion_content":"应该做出当下最负责任的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639133861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":413487,"ip_address":""},"score":537669,"extra":""},{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2421848,"avatar":"https://static001.geekbang.org/account/avatar/00/24/f4/58/383cd3a0.jpg","nickname":"洛书","note":"","ucode":"4F1C41E4679879","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543937,"discussion_content":"K8S的理念至少能用20年。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641358978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":413487,"ip_address":""},"score":543937,"extra":""}]}]},{"had_liked":false,"id":26230,"user_name":"张应罗","can_delete":false,"product_type":"c1","uid":1133600,"ip_address":"","ucode":"12C4B630F1B265","user_header":"https://static001.geekbang.org/account/avatar/00/11/4c/20/ce900ac6.jpg","comment_is_top":false,"comment_ctime":1537523668,"is_pvip":false,"replies":[{"id":"9573","content":"没错。kubeadm拉取镜像的url是可配置的。","user_name":"作者回复","comment_id":26230,"uid":"1218095","ip_address":"","utype":1,"ctime":1537545536,"user_name_real":"Geek_6ef93d"}],"discussion_count":4,"race_medal":0,"score":"319365103572","product_id":100015201,"comment_content":"其实国内同学们用kubeadm安装集群最大的拦路虎在于有几个镜像没法下载，我建议大家先手动把镜像pull 下来，从阿里的镜像源上，然后tag成安装所需的镜像名称，这样你发现安装过程会异常顺利","like_count":75,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424577,"discussion_content":"没错。kubeadm拉取镜像的url是可配置的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537545536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2441264,"avatar":"https://static001.geekbang.org/account/avatar/00/25/40/30/8ded28c6.jpg","nickname":"宁格林","note":"","ucode":"2A35C0D901117F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351034,"discussion_content":"kubeadm init --image-repository=registry.aliyuncs.com/google_containers","likes_number":27,"is_delete":false,"is_hidden":false,"ctime":1614129506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2441264,"avatar":"https://static001.geekbang.org/account/avatar/00/25/40/30/8ded28c6.jpg","nickname":"宁格林","note":"","ucode":"2A35C0D901117F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351035,"discussion_content":"直接这样即可，不需要改名字","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614129527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1904912,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/11/10/8cf49b06.jpg","nickname":"SevAn°","note":"","ucode":"A3CBA865CBA34E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2441264,"avatar":"https://static001.geekbang.org/account/avatar/00/25/40/30/8ded28c6.jpg","nickname":"宁格林","note":"","ucode":"2A35C0D901117F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564854,"discussion_content":"今天kubeadm init 刚好就是卡在这 谢谢老哥 亲测可用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650341616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351035,"ip_address":""},"score":564854,"extra":""}]}]},{"had_liked":false,"id":36713,"user_name":"zz@zz","can_delete":false,"product_type":"c1","uid":1108783,"ip_address":"","ucode":"87B2AD97471FBC","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/2f/63004f1a.jpg","comment_is_top":false,"comment_ctime":1541255382,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"272124195030","product_id":100015201,"comment_content":"kbueadm init 遇到问题的同学，可以从报错日志中获得需要的 镜像列表<br><br>- No internet connection is available so the kubelet cannot pull or find the following control plane images:<br>                                - k8s.gcr.io&#47;kube-apiserver-amd64:v1.11.4<br>                                - k8s.gcr.io&#47;kube-controller-manager-amd64:v1.11.4<br>                                - k8s.gcr.io&#47;kube-scheduler-amd64:v1.11.4<br>                                - k8s.gcr.io&#47;etcd-amd64:3.2.18<br>                                - You can check or miligate this in beforehand with &quot;kubeadm config images pull&quot; to make sure the images<br><br>或者使用如下命令<br>kubeadm config images list<br><br>然后使用下边的脚本拉镜像并tag成指定Google的镜像<br><br>images=(<br>    k8s.gcr.io&#47;kube-apiserver-amd64:v1.11.4<br>    k8s.gcr.io&#47;kube-controller-manager-amd64:v1.11.4<br>    k8s.gcr.io&#47;kube-scheduler-amd64:v1.11.4<br>    k8s.gcr.io&#47;kube-proxy-amd64:v1.11.4<br>    k8s.gcr.io&#47;pause:3.1<br>    k8s.gcr.io&#47;etcd-amd64:3.2.18<br>    k8s.gcr.io&#47;coredns:1.1.3<br>)<br><br>for imageName in ${images[@]} ; do<br>    docker pull registry.cn-hangzhou.aliyuncs.com&#47;google_containers&#47;$imageName<br>    docker tag registry.cn-hangzhou.aliyuncs.com&#47;google_containers&#47;$imageName k8s.gcr.io&#47;$imageName<br>done<br><br>","like_count":63,"discussions":[{"author":{"id":1200676,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/24/bd63c4de.jpg","nickname":"Eason Tai","note":"","ucode":"4707577CC9C9E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288498,"discussion_content":"貌似有些问题。images 列表应该要把前缀去掉吧？\n\nimages=(\n    kube-apiserver-amd64:v1.11.4\n    kube-controller-manager-amd64:v1.11.4\n    kube-scheduler-amd64:v1.11.4\n    kube-proxy-amd64:v1.11.4\n    pause:3.1\n    etcd-amd64:3.2.18\n    coredns:1.1.3\n)\n\nfor imageName in ${images[@]} ; do\n    docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/$imageName\n    docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/$imageName k8s.gcr.io/$imageName\ndone\n\n","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1593762943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25712,"user_name":"blackpiglet","can_delete":false,"product_type":"c1","uid":1032928,"ip_address":"","ucode":"58AA8329C91767","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/e0/7188aa0a.jpg","comment_is_top":false,"comment_ctime":1537419841,"is_pvip":false,"replies":[{"id":"9404","content":"看来是搞过证书啊","user_name":"作者回复","comment_id":25712,"uid":"1218095","ip_address":"","utype":1,"ctime":1537459004,"user_name_real":"Geek_6ef93d"}],"discussion_count":4,"race_medal":0,"score":"259235457601","product_id":100015201,"comment_content":"1. Linux 下生成证书，主流的选择应该是 OpenSSL，还可以使用 GnuGPG，或者 keybase。<br>2. Kubernetes 组件之间的交互方式：HTTP&#47;HTTPS、gRPC、DNS、系统调用等。","like_count":61,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424399,"discussion_content":"看来是搞过证书啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537459004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1305633,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ec/21/b0fe1bfd.jpg","nickname":"Adam","note":"","ucode":"338BA720880E4F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24951,"discussion_content":"cfssl","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1570343227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"团","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408453,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635250230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384506,"discussion_content":"java还有个keytool","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626619611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24455,"user_name":"yandd","can_delete":false,"product_type":"c1","uid":1079881,"ip_address":"","ucode":"2A36E8DA948555","user_header":"https://static001.geekbang.org/account/avatar/00/10/7a/49/8e6fe04d.jpg","comment_is_top":false,"comment_ctime":1537020270,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"211990417774","product_id":100015201,"comment_content":"推荐个k8s实验平台 https:&#47;&#47;console.magicsandbox.com，可能需要fan qiang才能访问","like_count":49,"discussions":[{"author":{"id":1644983,"avatar":"","nickname":"weiwei.mo","note":"","ucode":"DA130336171AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8388,"discussion_content":"fanqiang也打不开","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1567992616,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1428489,"avatar":"https://static001.geekbang.org/account/avatar/00/15/cc/09/39ce758a.jpg","nickname":"乖，摸摸头","note":"","ucode":"246C51262E7823","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408392,"discussion_content":"The webpage at https://console.magicsandbox.com/ might be temporarily down or it may have moved permanently to a new web address.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635239638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150965,"user_name":"靠人品去赢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1573635684,"is_pvip":false,"discussion_count":11,"race_medal":0,"score":"194847164004","product_id":100015201,"comment_content":"阿里云 + CentoS 安装kubeadm亲测有效（实际就是调整为阿里的镜像）<br>（1）yum install -y ebtables socat（安装依赖，知道是什么依赖的，为什么要依赖的大佬补充一下）<br>（2）# 配置源<br>cat &lt;&lt;EOF &gt; &#47;etc&#47;yum.repos.d&#47;kubernetes.repo<br>[kubernetes]<br>name=Kubernetes<br>baseurl=https:&#47;&#47;mirrors.aliyun.com&#47;kubernetes&#47;yum&#47;repos&#47;kubernetes-el7-x86_64<br>enabled=1<br>gpgcheck=1<br>repo_gpgcheck=1<br>gpgkey=https:&#47;&#47;mirrors.aliyun.com&#47;kubernetes&#47;yum&#47;doc&#47;yum-key.gpg https:&#47;&#47;mirrors.aliyun.com&#47;kubernetes&#47;yum&#47;doc&#47;rpm-package-key.gpg<br>EOF<br>（cat修改文件，实际上重要的是修改镜像源）<br>（3）yum install -y kubelet kubeadm kubectl（这个centos不用apt-get其实算是个常识了，一味按照文中来是不行的，毕竟人家也说了Ubuntu）<br>","like_count":45,"discussions":[{"author":{"id":1995841,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/74/41/1a2c0309.jpg","nickname":"一根草🌱","note":"","ucode":"95E26830486252","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582528,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659493705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2789963,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/92/4b/1262f052.jpg","nickname":"许飞","note":"","ucode":"2579B1A828D8BC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577956,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656429964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1234489,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d6/39/6b45878d.jpg","nickname":"意无尽","note":"","ucode":"DA179626C46B81","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":564863,"discussion_content":"强👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650343028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1516167,"avatar":"https://static001.geekbang.org/account/avatar/00/17/22/87/e7bd2acf.jpg","nickname":"DZZ","note":"","ucode":"C8E4C4B089BCE2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540664,"discussion_content":"在阿里云 kubeadm Init 失败，报错信息是:failed to run Kubelet: misconfiguration: kubelet cgroup driver: \\&#34;cgroupfs\\&#34; is different from docker cgroup driver: \\&#34;systemd\\&#34;。  参考官网和网上去修改都没有成功。有大神能帮指导一下吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640131370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2550917,"avatar":"https://static001.geekbang.org/account/avatar/00/26/ec/85/cdc48cfd.jpg","nickname":"隐形人","note":"","ucode":"26F2D913CE6B25","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1516167,"avatar":"https://static001.geekbang.org/account/avatar/00/17/22/87/e7bd2acf.jpg","nickname":"DZZ","note":"","ucode":"C8E4C4B089BCE2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":548394,"discussion_content":"你的docker的配置里面制订了systemd这个驱动了，native.cgroupdriver=systemd，这样init会有问题的，docker这里可以先用cgroupfs，init之后在更改，注意这里docker和kubelet使用的驱动要一致的","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1643179242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":540664,"ip_address":""},"score":548394,"extra":""}]},{"author":{"id":1525420,"avatar":"https://static001.geekbang.org/account/avatar/00/17/46/ac/9c324436.jpg","nickname":"抖腿冠军","note":"","ucode":"66162C20658284","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":537983,"discussion_content":"插眼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639290411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1428489,"avatar":"https://static001.geekbang.org/account/avatar/00/15/cc/09/39ce758a.jpg","nickname":"乖，摸摸头","note":"","ucode":"246C51262E7823","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408393,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635239695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243370,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f8/ea/98738420.jpg","nickname":"Jaswine","note":"","ucode":"EE39D9629204DB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":396403,"discussion_content":"mark\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632421753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1717785,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/CccT5NgKlZRlTL8f4BsIDqfJ8tRkHPyaR3SXnfgU7acxo2OO7vGzNWjfQBuFnbPPzVYH8Lh49f1jyicuuRSndcA/132","nickname":"Md3zed","note":"","ucode":"83EAD89468ED7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379393,"discussion_content":"我也mark一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623863008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2205986,"avatar":"https://static001.geekbang.org/account/avatar/00/21/a9/22/1c16950e.jpg","nickname":"林志国","note":"","ucode":"911DD43D625048","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358909,"discussion_content":"我是觉得作者是需要搭建这样一个平台去学习kubernetes，而不是直接在生产搭建。生产搭建kubernetes推荐二进制方式安装","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616074008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2030670,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLrbCic7BckSd3xrawFH5KW0yYtI1uSsIEPFh0FIHxvHv9u6XBKgZCqH13qPbZDHTdqgevXLdGQlEw/132","nickname":"Geek_2a4536","note":"","ucode":"640A0D228B275C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296151,"discussion_content":"马克","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596461714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26563,"user_name":"一叶","can_delete":false,"product_type":"c1","uid":1115608,"ip_address":"","ucode":"EB018BDA606A33","user_header":"https://static001.geekbang.org/account/avatar/00/11/05/d8/cd269378.jpg","comment_is_top":false,"comment_ctime":1537672738,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"186221266466","product_id":100015201,"comment_content":"我们的生产环境是二进制安装的，把安装步骤写成脚本就会方便很多，分享一个二进制安装脚本：<br>https:&#47;&#47;github.com&#47;SongCF&#47;kubesh<br>","like_count":43,"discussions":[{"author":{"id":1995841,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/74/41/1a2c0309.jpg","nickname":"一根草🌱","note":"","ucode":"95E26830486252","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582529,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659493719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"四川"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"团","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408455,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635250304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1643296,"avatar":"https://static001.geekbang.org/account/avatar/00/19/13/20/2d22b331.jpg","nickname":"H.Z","note":"","ucode":"728417BD5B4DA8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382666,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625664823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2549048,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e5/38/6c0b44fa.jpg","nickname":"Joy","note":"","ucode":"B0DE141B21703F","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374286,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621100858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27834,"user_name":"alex","can_delete":false,"product_type":"c1","uid":1012579,"ip_address":"","ucode":"2DB95B3815F728","user_header":"https://static001.geekbang.org/account/avatar/00/0f/73/63/f008057a.jpg","comment_is_top":false,"comment_ctime":1537952423,"is_pvip":false,"replies":[{"id":"10128","content":"你好，楼道门开一下。","user_name":"作者回复","comment_id":27834,"uid":"1218095","ip_address":"","utype":1,"ctime":1538018572,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"169041676967","product_id":100015201,"comment_content":"对墙经验丰富的人来了，可以用下面这个镜像<br>https:&#47;&#47;github.com&#47;anjia0532&#47;gcr.io_mirror","like_count":39,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425052,"discussion_content":"你好，楼道门开一下。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1538018572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24265,"user_name":"包治结巴","can_delete":false,"product_type":"c1","uid":1219786,"ip_address":"","ucode":"50978D98813D16","user_header":"","comment_is_top":false,"comment_ctime":1536886785,"is_pvip":false,"replies":[{"id":"8877","content":"我不建议直接使用二进制文件部署。而建议你花时间了解一下kubeadm的高可用部署，它现在已经初具雏形了。宝贵的时间应该用在刀刃上。","user_name":"作者回复","comment_id":24265,"uid":"1218095","ip_address":"","utype":1,"ctime":1536888823,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"160450676737","product_id":100015201,"comment_content":"张老师，后面能讲讲怎么用二进制部署kubernetes吗？毕竟kubeadm不适用于生产环境，用二进制部署还是挺复杂的，恳请老师不吝讲解一下吧。","like_count":38,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423904,"discussion_content":"我不建议直接使用二进制文件部署。而建议你花时间了解一下kubeadm的高可用部署，它现在已经初具雏形了。宝贵的时间应该用在刀刃上。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1536888823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201520,"user_name":"Rootrl","can_delete":false,"product_type":"c1","uid":1035390,"ip_address":"","ucode":"50FE3BBA92D417","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cc/7e/0d050964.jpg","comment_is_top":false,"comment_ctime":1585798630,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"139024752102","product_id":100015201,"comment_content":"Kubeadm已经生产可用了：https:&#47;&#47;kubernetes.io&#47;blog&#47;2018&#47;12&#47;04&#47;production-ready-kubernetes-cluster-creation-with-kubeadm&#47;","like_count":33,"discussions":[{"author":{"id":2578078,"avatar":"https://static001.geekbang.org/account/avatar/00/27/56/9e/fe7ec0ff.jpg","nickname":"神经蛙","note":"","ucode":"73084BE4C1BDFE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378817,"discussion_content":"这个说的是kubeadm stable版的发布，并不是老师讲的高可用的k8s集群","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623413803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24393,"user_name":"宝仔","can_delete":false,"product_type":"c1","uid":1013493,"ip_address":"","ucode":"A0F17DFF99DB21","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/f5/e3f5bd8d.jpg","comment_is_top":false,"comment_ctime":1536973577,"is_pvip":true,"replies":[{"id":"8974","content":"HA的etcd也是可以用kubeadm部署的，当然，external etcd有助于你自己做运维。你可以直接改证书生成的步骤，但我当然推荐你执行upgrade，这个操作是必须的。","user_name":"作者回复","comment_id":24393,"uid":"1218095","ip_address":"","utype":1,"ctime":1537088543,"user_name_real":"Geek_6ef93d"}],"discussion_count":4,"race_medal":0,"score":"96026254089","product_id":100015201,"comment_content":"etcd可以先部署，然后初始化的时候通过kubeadm.yaml指定已经部署好的etcd。高可用可以通过部署三个master节点来解决！现在有个问题，通过kubeadm部署生成的apiserver证书默认有效期是一年，官方是认为需要通过kubeadm upgrade 每年升级一次kubernetes，升级的时候也会更新证书，请问老师这个有解决方法吗？","like_count":22,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423966,"discussion_content":"HA的etcd也是可以用kubeadm部署的，当然，external etcd有助于你自己做运维。你可以直接改证书生成的步骤，但我当然推荐你执行upgrade，这个操作是必须的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537088543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1011174,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6d/e6/57bfae83.jpg","nickname":"Cybertrunk","note":"","ucode":"D557A710E1835F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":217295,"discussion_content":"生产环境不能联网，岂不是就完蛋了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585539509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1529822,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/GkMk4gBlfZfhDE2btGKnGxCDsOVgkahKVRpYHU2C7uUQTHIWicPOPVQQPMDltZvo2iafsWjjxdR1IoqiaKuOSunYw/132","nickname":"Geek_267887","note":"","ucode":"58A40D03329385","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1011174,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6d/e6/57bfae83.jpg","nickname":"Cybertrunk","note":"","ucode":"D557A710E1835F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384481,"discussion_content":"哈哈哈哈，手动更新？\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626610077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":217295,"ip_address":""},"score":384481,"extra":""}]},{"author":{"id":1101602,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/22/5a483755.jpg","nickname":"小蛋壳","note":"","ucode":"8344163BF7722E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408374,"discussion_content":"可以通过源码修改证书时间","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635237545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24245,"user_name":"eden","can_delete":false,"product_type":"c1","uid":1220656,"ip_address":"","ucode":"8A5620A5C4BDB8","user_header":"https://static001.geekbang.org/account/avatar/00/12/a0/30/5a7247eb.jpg","comment_is_top":false,"comment_ctime":1536881646,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"83141260270","product_id":100015201,"comment_content":"有个开源项目kubespray，支持k8s高可用部署，利用ansible来实现，这个项目部署的集群可以用于生产吧","like_count":19},{"had_liked":false,"id":24421,"user_name":"志远","can_delete":false,"product_type":"c1","uid":1222322,"ip_address":"","ucode":"CA1106B4EBCED7","user_header":"https://static001.geekbang.org/account/avatar/00/12/a6/b2/89aae33a.jpg","comment_is_top":false,"comment_ctime":1536990845,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"74551434877","product_id":100015201,"comment_content":"kubernetes 原来是一个芬兰的高中生写的，不禁让我想起祖师爷 linus 也是芬兰人，哎~","like_count":18,"discussions":[{"author":{"id":1629367,"avatar":"https://static001.geekbang.org/account/avatar/00/18/dc/b7/0b70e237.jpg","nickname":"向思铭","note":"","ucode":"EECE60E6F7D9C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287641,"discussion_content":"kubeadm几乎是他写的，眼睛是个好东西，不知道你们平时怎么写代码的。","likes_number":23,"is_delete":false,"is_hidden":false,"ctime":1593501914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1269727,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq6dppX1EPFeNOiaYOEClwPrO71zlLoprY0YffxSIk7773sjo4CE5juo0ppIzgfJ7Y5eUbwYl1SkNg/132","nickname":"xujunwei","note":"","ucode":"E129638FD1481F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1629367,"avatar":"https://static001.geekbang.org/account/avatar/00/18/dc/b7/0b70e237.jpg","nickname":"向思铭","note":"","ucode":"EECE60E6F7D9C6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547588,"discussion_content":"笑死","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642757284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":287641,"ip_address":""},"score":547588,"extra":""}]},{"author":{"id":1021421,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUSUdGJFtQolpA8mANMZnjXB18ibmx5JRhI0byF4jb29qNghKoEk9EDJNIIiayJDCnqZLSutX3pXnQ/132","nickname":"DI-陈赜（ze）","note":"","ucode":"2EDABDDB80F2C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4606,"discussion_content":"黑夜的时间越长，程序员的创造力越强。。。","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1565590502,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":34938,"user_name":"forever","can_delete":false,"product_type":"c1","uid":1065978,"ip_address":"","ucode":"1C8968D4EC9A95","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/fa/b4324501.jpg","comment_is_top":false,"comment_ctime":1540362997,"is_pvip":false,"replies":[{"id":"12537","content":"前者是本地玩玩用的","user_name":"作者回复","comment_id":34938,"uid":"1218095","ip_address":"","utype":1,"ctime":1540439964,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"70259839733","product_id":100015201,"comment_content":"老师 minikuke和kubeadm有什么区别吗","like_count":16,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427392,"discussion_content":"前者是本地玩玩用的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540439964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24248,"user_name":"eden","can_delete":false,"product_type":"c1","uid":1220656,"ip_address":"","ucode":"8A5620A5C4BDB8","user_header":"https://static001.geekbang.org/account/avatar/00/12/a0/30/5a7247eb.jpg","comment_is_top":false,"comment_ctime":1536882150,"is_pvip":false,"replies":[{"id":"8878","content":"当然是openstack门槛更高。90%用户要的是paas。","user_name":"作者回复","comment_id":24248,"uid":"1218095","ip_address":"","utype":1,"ctime":1536888919,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"65961391590","product_id":100015201,"comment_content":"一周更新三章，有点迫不及待了。不过讲得确实不错，期待后面更精彩的内容。想请教一个问题，你怎么看待openstack和k8s的关系，哪个技术门槛更高，为什么现在公司更倾向于用k8s来实现自己的云，而openstack有被k8s取代的趋势。","like_count":15,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423894,"discussion_content":"当然是openstack门槛更高。90%用户要的是paas。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536888919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67557,"user_name":"TONNY","can_delete":false,"product_type":"c1","uid":1013506,"ip_address":"","ucode":"E62D883A12D937","user_header":"https://static001.geekbang.org/account/avatar/00/0f/77/02/5b501b89.jpg","comment_is_top":false,"comment_ctime":1550196646,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"61679738790","product_id":100015201,"comment_content":"解决拉取google镜像问题，有两种方式推荐<br>1. 拉取hub.docker上gcrxio同步的k8s镜像到本地修改repository为k8s.gcr.io后，使用kubeadmin顺利安装<br>2. 使用阿里的容器镜像服务，拉取hub.docker上gcrxio同步的k8s镜像推送到你的镜像库中。安装时，kubeadm init with a configuration file，在configuration file中修改相关的镜像地址为阿里容器服务的镜像地址","like_count":14,"discussions":[{"author":{"id":1140876,"avatar":"https://static001.geekbang.org/account/avatar/00/11/68/8c/b1f277a5.jpg","nickname":"闪闪电电","note":"","ucode":"FA5520FA98F739","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549276,"discussion_content":"kubeadm init --image-repository registry.aliyuncs.com/google_containers --ignore-preflight-errors=Swap","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643805066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168294,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d3/a6/5c314cf7.jpg","nickname":"haiyi737","note":"","ucode":"0504B2B6594479","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295186,"discussion_content":"第一种方式请问怎么修改？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596112291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2054990,"avatar":"","nickname":"海柔儿稀罕","note":"","ucode":"CBEEBEA2CAE8A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289383,"discussion_content":"不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594086026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":42816,"user_name":"rOMEo罗密欧","can_delete":false,"product_type":"c1","uid":1074365,"ip_address":"","ucode":"9C7BF6E1274D26","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/bd/cbcdc4a6.jpg","comment_is_top":false,"comment_ctime":1543050550,"is_pvip":false,"replies":[{"id":"15425","content":"minikube","user_name":"作者回复","comment_id":42816,"uid":"1218095","ip_address":"","utype":1,"ctime":1543192659,"user_name_real":"Geek_6ef93d"}],"discussion_count":3,"race_medal":0,"score":"57377625398","product_id":100015201,"comment_content":"请问一下在MacBook上安装部署k8s要怎么做？","like_count":13,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430206,"discussion_content":"minikube","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543192659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1083504,"avatar":"https://static001.geekbang.org/account/avatar/00/10/88/70/32534e2d.jpg","nickname":"David Mo","note":"","ucode":"66C30A3CD7EDA6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230838,"discussion_content":"也可以装虚拟机啊，我之前使用docker,现在都删了只就一个kubectl,社区有大把的例子。我也前几天弄了一个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586776340,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1397271,"avatar":"https://static001.geekbang.org/account/avatar/00/15/52/17/083d67fb.jpg","nickname":"helloworld","note":"","ucode":"B62BEA525A64A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":141534,"discussion_content":"docker for mac ?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579429717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24241,"user_name":"pytimer","can_delete":false,"product_type":"c1","uid":1014666,"ip_address":"","ucode":"A0038F6CB1F9AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ercmNryEicqDS73icpUu7W0BnZ7ZIia6jR7kdVMIzH0q1d7L8EKAYWeTJcribibGcHnJzpsjRFxAe26egQ/132","comment_is_top":false,"comment_ctime":1536879740,"is_pvip":false,"replies":[{"id":"8907","content":"赞。而是这些工具的共同点就是，难用，不够傻瓜……","user_name":"作者回复","comment_id":24241,"uid":"1218095","ip_address":"","utype":1,"ctime":1536904511,"user_name_real":"Geek_6ef93d"}],"discussion_count":1,"race_medal":0,"score":"57371454588","product_id":100015201,"comment_content":"制作证书的工具: cfssl openssl easyrsa","like_count":13,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423892,"discussion_content":"赞。而是这些工具的共同点就是，难用，不够傻瓜……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536904511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24306,"user_name":"gogo","can_delete":false,"product_type":"c1","uid":1003104,"ip_address":"","ucode":"E8F0F3B000020A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","comment_is_top":false,"comment_ctime":1536895191,"is_pvip":false,"replies":[{"id":"8896","content":"放公网上给别人用的，放私网里给自己用的。提供容器服务的。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536899095,"ip_address":"","comment_id":24306,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48781535447","product_id":100015201,"comment_content":"老师，您好，我现在对公有云、私有云、容器云之间的区别和联系不太清楚，网上查了些资料还上没搞清楚，能帮忙简单描述下吗","like_count":11,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423927,"discussion_content":"放公网上给别人用的，放私网里给自己用的。提供容器服务的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536899095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":39944,"user_name":"愤怒的大鸟","can_delete":false,"product_type":"c1","uid":1312522,"ip_address":"","ucode":"31CC4608390F7A","user_header":"https://static001.geekbang.org/account/avatar/00/14/07/0a/7b80c171.jpg","comment_is_top":false,"comment_ctime":1542416760,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"44492089720","product_id":100015201,"comment_content":"生产用kubeadm安装的，一年后证书过期了，服务会受影响吗？有点怕","like_count":10,"discussions":[{"author":{"id":1259323,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg","nickname":"陈斯佳","note":"","ucode":"C236F874FC767A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550504,"discussion_content":"原本已经运行的容器不受影响，只是你没办法访问、操作集群了。我公司之前就出过这样的问题，花了我六个多小时来搞更新……得出的教训是：用自带的证书更新命令更新（kubeadm alpha certs renew all），千万不要手动生成证书更新！","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1644571844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1227624,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bb/68/8120c2ad.jpg","nickname":"张念申","note":"","ucode":"3B7A0D21089DBB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225614,"discussion_content":"已经运行在集群内部的服务不会受到影响可以正常访问，但是不能进行创建删除pod svc等等一系列的操作。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586376968,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2999800,"avatar":"","nickname":"Geek_32ee0b","note":"","ucode":"FD81E8F4DA184F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572712,"discussion_content":"证书到期后，所有节点将会变为not ready状态，必须更新证书有效期","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652926966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284957,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9b/5d/51ce0111.jpg","nickname":"故地重游","note":"","ucode":"4232938A5B9B43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2203,"discussion_content":"绝对有，要更新证书有效期","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563352056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26531,"user_name":"北卡","can_delete":false,"product_type":"c1","uid":1218128,"ip_address":"","ucode":"2D947A61689FC6","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg","comment_is_top":false,"comment_ctime":1537635745,"is_pvip":false,"replies":[{"id":"9624","content":"需要注意高可用部署还没有GA，有很多问题亟待解决。证书在升级的时候会更新的。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537672202,"ip_address":"","comment_id":26531,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44487308705","product_id":100015201,"comment_content":"kubeadm可以搭建高可用集群，实际上我们现在的生产环境就是使用kubeadm搭建的。<br>只是kubeadm搭建高可用集群如果完全按照官方文档来，它生成的的证书只有一年期限。所以需要自己提前做好证书。","like_count":10,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424660,"discussion_content":"需要注意高可用部署还没有GA，有很多问题亟待解决。证书在升级的时候会更新的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537672202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54022,"user_name":"秋风扫落叶","can_delete":false,"product_type":"c1","uid":1358233,"ip_address":"","ucode":"7E71F42B50800B","user_header":"https://static001.geekbang.org/account/avatar/00/14/b9/99/ef60d90f.jpg","comment_is_top":false,"comment_ctime":1545787106,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40200492770","product_id":100015201,"comment_content":"镜像下载问题，可以自己写好dockerfile push到github，然后将docker hub和github关联起来，在dockerhub上面构建镜像。完美避过墙的问题。","like_count":9},{"had_liked":false,"id":24333,"user_name":"darling","can_delete":false,"product_type":"c1","uid":1181258,"ip_address":"","ucode":"78BA685D7B71A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/4a/e8519ff4.jpg","comment_is_top":false,"comment_ctime":1536905456,"is_pvip":false,"replies":[{"id":"8911","content":"Java只有大学交作业的时候用过……","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536916026,"ip_address":"","comment_id":24333,"utype":1}],"discussion_count":1,"race_medal":0,"score":"40191611120","product_id":100015201,"comment_content":"fabric8 不是Java API 操作K8s吗？ 大神不知道？？？？","like_count":9,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423940,"discussion_content":"Java只有大学交作业的时候用过……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536916026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24232,"user_name":"咕噜男爵-Tony","can_delete":false,"product_type":"c1","uid":1219258,"ip_address":"","ucode":"8C841851AC767F","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/ba/f5eb2a66.jpg","comment_is_top":false,"comment_ctime":1536855704,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35896594072","product_id":100015201,"comment_content":"第一时间阅读更新，有种追剧的感觉！！！","like_count":8,"discussions":[{"author":{"id":1167659,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d1/2b/f77b55c8.jpg","nickname":"水瓶座（姚嵩）","note":"","ucode":"2E0C22E1605EE3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337970,"discussion_content":"其实我也是当追剧看的，此处有个表情～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609139306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25069,"user_name":"周娄子","can_delete":false,"product_type":"c1","uid":1228039,"ip_address":"","ucode":"18A1E6926C095A","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/07/bf8c31fb.jpg","comment_is_top":false,"comment_ctime":1537241200,"is_pvip":false,"replies":[{"id":"9140","content":"越原始的办法肯定越好，kubeadm是个折衷","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537248253,"ip_address":"","comment_id":25069,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27307044976","product_id":100015201,"comment_content":"kubeadm这个项目非常棒，简化kubernetes的安装，在我做整个运维流程的时候借鉴了很多他的做法。但是从运维角度来看，我们是从Creating a Custom Cluster from Scratch这个文档开始的，虽然比较麻烦，但是收益很大。","like_count":6,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424176,"discussion_content":"越原始的办法肯定越好，kubeadm是个折衷","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537248253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24243,"user_name":"pytimer","can_delete":false,"product_type":"c1","uid":1014666,"ip_address":"","ucode":"A0038F6CB1F9AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ercmNryEicqDS73icpUu7W0BnZ7ZIia6jR7kdVMIzH0q1d7L8EKAYWeTJcribibGcHnJzpsjRFxAe26egQ/132","comment_is_top":false,"comment_ctime":1536880089,"is_pvip":false,"replies":[{"id":"8879","content":"是的，kubeadm的高可用部署应该很快就能发布了。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536888950,"ip_address":"","comment_id":24243,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27306683865","product_id":100015201,"comment_content":"Kubernetes文档上现在有关于使用kubeadm部署高可用集群的说明，是不是说明可以使用kubeadm结合saltstack、ansible进行生产上的部署？","like_count":6,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423893,"discussion_content":"是的，kubeadm的高可用部署应该很快就能发布了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536888950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24231,"user_name":"咕噜男爵-Tony","can_delete":false,"product_type":"c1","uid":1219258,"ip_address":"","ucode":"8C841851AC767F","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/ba/f5eb2a66.jpg","comment_is_top":false,"comment_ctime":1536855641,"is_pvip":false,"replies":[{"id":"8890","content":"不推荐给初学者非原生的管理工具，得不偿失。而且往往替你接管太多的东西。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536893677,"ip_address":"","comment_id":24231,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27306659417","product_id":100015201,"comment_content":"专门讲了kubeadm，个人觉着rancher rke更合适用来搭建测试环境","like_count":6,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423890,"discussion_content":"不推荐给初学者非原生的管理工具，得不偿失。而且往往替你接管太多的东西。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536893677,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101558,"user_name":"李宇","can_delete":false,"product_type":"c1","uid":1562984,"ip_address":"","ucode":"D7F13779A160C1","user_header":"https://static001.geekbang.org/account/avatar/00/17/d9/68/a0587ff5.jpg","comment_is_top":false,"comment_ctime":1559870956,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23034707436","product_id":100015201,"comment_content":"看完文章后，有种两个命令就可以部署一个k8s集群的错觉。然后就在上面坑了10多个小时~（用的虚拟机）","like_count":6},{"had_liked":false,"id":39161,"user_name":"韩大","can_delete":false,"product_type":"c1","uid":1198440,"ip_address":"","ucode":"998B64DD552C8D","user_header":"https://static001.geekbang.org/account/avatar/00/12/49/68/a05fb728.jpg","comment_is_top":false,"comment_ctime":1542201135,"is_pvip":false,"replies":[{"id":"13979","content":"docker kubernetes 这些都是打通开发与运维的工具","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1542205008,"ip_address":"","comment_id":39161,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23017037615","product_id":100015201,"comment_content":"张老师我有个疑问，对于docker和k8s，感觉运维学更容易，也更合适，对于我们开发人员来说，还有那么大的必要去深入学习吗？docker对于开发意味着什么？望老师解惑！","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428947,"discussion_content":"docker kubernetes 这些都是打通开发与运维的工具","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542205008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24473,"user_name":"Jeff.W","can_delete":false,"product_type":"c1","uid":1140420,"ip_address":"","ucode":"2043F83FB7B39C","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/c4/038f9325.jpg","comment_is_top":false,"comment_ctime":1537061760,"is_pvip":false,"replies":[{"id":"8963","content":"rancher现在就是kubernetes 啊，而docker swarm就不必尝试了，人家docker公司自己都放弃了","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537086641,"ip_address":"","comment_id":24473,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23011898240","product_id":100015201,"comment_content":"试用Rancher搭建过一个环境，感觉过程和kubeadm有些类似，主节点初始化生成token，其它节点通过token来进行join，而且是图形化。对于部署、运维能力都有限的中小企业来说，是否可以考虑这些非原生的部署方案？甚至是否可以考虑docker swarm呢？麻烦给个建议。","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423998,"discussion_content":"rancher现在就是kubernetes 啊，而docker swarm就不必尝试了，人家docker公司自己都放弃了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537086641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24401,"user_name":"余小坝","can_delete":false,"product_type":"c1","uid":1210388,"ip_address":"","ucode":"7C1ECFB5B0E00D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2CaTGljhcSJpSuc5UMrEwaBLjdnZic5vpseFicr1EnwpYzgzkzamkWQCUaZjWRt12kUVEkEBaoWiaIBiaA9YxCsaAA/132","comment_is_top":false,"comment_ctime":1536976453,"is_pvip":false,"replies":[{"id":"8968","content":"能互通就行，但你要注意各个组件监听的网卡是哪个","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537086889,"ip_address":"","comment_id":24401,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23011812933","product_id":100015201,"comment_content":"请问老师，如果现在我的master节点的网段是172.18.196...，可以把一个网段为192.168.199..的节点加入都kubernetes集群中吗？","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423970,"discussion_content":"能互通就行，但你要注意各个组件监听的网卡是哪个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537086889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":41091,"user_name":"Peroni","can_delete":false,"product_type":"c1","uid":1281220,"ip_address":"","ucode":"195C10E470783F","user_header":"","comment_is_top":false,"comment_ctime":1542724611,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"18722593795","product_id":100015201,"comment_content":"$ apt-get install kubeadm<br><br>这个命令在 centos 7 上运行不了，只能参考kebernetes 上的文档去安装 kubeam","like_count":4,"discussions":[{"author":{"id":1459912,"avatar":"https://static001.geekbang.org/account/avatar/00/16/46/c8/f26b7f5b.jpg","nickname":"诚主","note":"","ucode":"864BAE77F2F7E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2620,"discussion_content":"CentOS用的是 yum install ","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1563788565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310496,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ff/20/2cfeae85.jpg","nickname":"星星V5","note":"","ucode":"8E070EBB9CFA1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389314,"discussion_content":"emm，不同的linux包管理是不同的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629212972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2054990,"avatar":"","nickname":"海柔儿稀罕","note":"","ucode":"CBEEBEA2CAE8A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289386,"discussion_content":"不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594086762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26571,"user_name":"北卡","can_delete":false,"product_type":"c1","uid":1218128,"ip_address":"","ucode":"2D947A61689FC6","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg","comment_is_top":false,"comment_ctime":1537677621,"is_pvip":false,"replies":[{"id":"9696","content":"生产可用","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537752134,"ip_address":"","comment_id":26571,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18717546805","product_id":100015201,"comment_content":"不能直接回复作者的回复吗?<br>“kubeadm 高可用部署还没有GA”<br>GA是什么意思?","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424673,"discussion_content":"生产可用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537752134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97148,"user_name":"runzhliu","can_delete":false,"product_type":"c1","uid":1442431,"ip_address":"","ucode":"CD51D9465D7A05","user_header":"https://static001.geekbang.org/account/avatar/00/16/02/7f/ddf56ac5.jpg","comment_is_top":false,"comment_ctime":1558597117,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14443499005","product_id":100015201,"comment_content":"Mac 用户可以使用 Docker Desktop 来本地部署","like_count":3},{"had_liked":false,"id":68064,"user_name":"小猪","can_delete":false,"product_type":"c1","uid":1201662,"ip_address":"","ucode":"EAD6A4876CEF3B","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/fe/ab541300.jpg","comment_is_top":false,"comment_ctime":1550401812,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14435303700","product_id":100015201,"comment_content":"老师，我们业务把mysql数据库用于大量数据高并发的写和读取，如果通过k8s部署mysql容器的方式形成分布式服务，可以承担这种高并发大数据量吗？","like_count":3},{"had_liked":false,"id":58466,"user_name":"Leon📷","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1547086963,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14431988851","product_id":100015201,"comment_content":"老师，我这边要针对openshift进行源码二次开发，有没有简单快速部署开发环境的工具或者套路，最近满头大汗搞了半天不明觉厉","like_count":3},{"had_liked":false,"id":43260,"user_name":"豆沙包","can_delete":false,"product_type":"c1","uid":1262727,"ip_address":"","ucode":"D4F2908B4A1FE2","user_header":"","comment_is_top":false,"comment_ctime":1543201370,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14428103258","product_id":100015201,"comment_content":"大神你好，kubeadm搭建的k8s集群的各个组件的证书都是1年有效期的，请教这个有效期有什么方式能修改吗？线上环境不太可能每年upgrade一次。","like_count":3},{"had_liked":false,"id":26812,"user_name":"胖梁","can_delete":false,"product_type":"c1","uid":1218619,"ip_address":"","ucode":"5A9344FBD80C79","user_header":"https://static001.geekbang.org/account/avatar/00/12/98/3b/5232b832.jpg","comment_is_top":false,"comment_ctime":1537756844,"is_pvip":false,"replies":[{"id":"9722","content":"swamr是docker三件套的一员，已经被放弃。swarmtkit就是docker swarm mode的实现方法。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537760200,"ip_address":"","comment_id":26812,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14422658732","product_id":100015201,"comment_content":"docker swarm, swarmkit, swarm mode, 三者傻傻分不清楚","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424734,"discussion_content":"swamr是docker三件套的一员，已经被放弃。swarmtkit就是docker swarm mode的实现方法。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537760200,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":25351,"user_name":"胖梁","can_delete":false,"product_type":"c1","uid":1218619,"ip_address":"","ucode":"5A9344FBD80C79","user_header":"https://static001.geekbang.org/account/avatar/00/12/98/3b/5232b832.jpg","comment_is_top":false,"comment_ctime":1537318381,"is_pvip":false,"replies":[{"id":"9707","content":"swarmkit这状态跟swarm没啥区别……负责人离职都已经一年多了","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537754833,"ip_address":"","comment_id":25351,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14422220269","product_id":100015201,"comment_content":"放弃的是docker swarm,  swarm mode还在持续，而且最新版也吸收了不少k8s的理念","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424268,"discussion_content":"swarmkit这状态跟swarm没啥区别……负责人离职都已经一年多了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537754833,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24463,"user_name":"Twilight26","can_delete":false,"product_type":"c1","uid":1030104,"ip_address":"","ucode":"941C3C7E49AC1C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b7/d8/85090f41.jpg","comment_is_top":false,"comment_ctime":1537032715,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14421934603","product_id":100015201,"comment_content":"最近一直在努力学习k8s，通过自己提前的学习加上老师现在的课程，感觉自己理解的越来越深刻了，很期能够快速更新后面的课程内容！","like_count":3},{"had_liked":false,"id":24371,"user_name":"陈宇清","can_delete":false,"product_type":"c1","uid":1223193,"ip_address":"","ucode":"75EA8E69534865","user_header":"https://static001.geekbang.org/account/avatar/00/12/aa/19/fc2354bf.jpg","comment_is_top":false,"comment_ctime":1536932022,"is_pvip":false,"replies":[{"id":"8971","content":"那就得用kubeadm的高可用部署了，这个刚发布没多久","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537087097,"ip_address":"","comment_id":24371,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14421833910","product_id":100015201,"comment_content":"join默认会变成worker节点。如何通过kubeadm添加多个master节点的HA模式呢？","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423957,"discussion_content":"那就得用kubeadm的高可用部署了，这个刚发布没多久","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537087097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24278,"user_name":"gogo","can_delete":false,"product_type":"c1","uid":1003104,"ip_address":"","ucode":"E8F0F3B000020A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","comment_is_top":false,"comment_ctime":1536889485,"is_pvip":false,"replies":[{"id":"8885","content":"这个特性还没有完全release ，也就是GA","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536890391,"ip_address":"","comment_id":24278,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14421791373","product_id":100015201,"comment_content":"kubeadm不是也支持高可用集群搭建的吗","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423911,"discussion_content":"这个特性还没有完全release ，也就是GA","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536890391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":333684,"user_name":"圆滚滚","can_delete":false,"product_type":"c1","uid":1351012,"ip_address":"","ucode":"E4D81822A87D50","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/64/272dc1b7.jpg","comment_is_top":false,"comment_ctime":1644473871,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10234408463","product_id":100015201,"comment_content":"如何判断是否搭建成功，是看某个进程是否存在么？比如Etcd的进程？还是其他什么方式","like_count":2,"discussions":[{"author":{"id":1259323,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg","nickname":"陈斯佳","note":"","ucode":"C236F874FC767A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550506,"discussion_content":"先检查node是否都ready了（kubctl get node），然后看看有没有没成功的pod（kubectl get pods -A｜grep -v -i -e running -e complete），最后跑一个pod看看成不成（kubectl run test —image=nginx）。如果都可以，应该就没问题了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1644572285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308775,"user_name":"文敦复","can_delete":false,"product_type":"c1","uid":1195258,"ip_address":"","ucode":"B8F4A6BD5D7805","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/fa/e2990931.jpg","comment_is_top":false,"comment_ctime":1629794115,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10219728707","product_id":100015201,"comment_content":"2021年08月24日 阿里的 https:&#47;&#47;github.com&#47;fanux&#47;sealos 可以一键部署用于生产环境的集群。","like_count":2,"discussions":[{"author":{"id":2621412,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ff/e4/927547a9.jpg","nickname":"无名无姓","note":"","ucode":"487BD5AA2CD305","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544252,"discussion_content":"好用的么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641449102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37209,"user_name":"叶剑飞","can_delete":false,"product_type":"c1","uid":1075396,"ip_address":"","ucode":"106C21C3132445","user_header":"https://static001.geekbang.org/account/avatar/00/10/68/c4/bc1c2b05.jpg","comment_is_top":false,"comment_ctime":1541486541,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"10131421133","product_id":100015201,"comment_content":"郁闷啊，怎么都装不起来。images已经通过翻墙安装好了，所有的镜像如下：<br><br>k8s.gcr.io&#47;kube-proxy-amd64                            v1.11.4             5071d096cfcd        11 days ago         98.2 MB<br><br>k8s.gcr.io&#47;kube-apiserver-amd64                        v1.11.4             de6de495c1f4        11 days ago         187 MB<br>k8s.gcr.io&#47;kube-controller-manager-amd64               v1.11.4             dc1d57df5ac0        11 days ago         155 MB<br>k8s.gcr.io&#47;kube-scheduler-amd64                        v1.11.4             569cb58b9c03        11 days ago         56.8 MB<br>k8s.gcr.io&#47;coredns                                     1.1.3               b3b94275d97c        5 months ago        45.6 MB <br>k8s.gcr.io&#47;pause                                       3.1                 9f429ad964c1        5 months ago        747 kB<br>k8s.gcr.io&#47;etcd-amd64                                  3.1.12              52920ad46f5b        8 months ago        193 MB<br>k8s.gcr.io&#47;pause-amd64                                 3.1                 da86e6ba6ca1        10 months ago       742 kB<br>k8s.gcr.io&#47;etcd-amd64                                  3.2.18              72bd8a257d7a        2 years ago         30.4 MB<br><br><br>然后执行命令kubeadm init --config kubeadm.yaml 就卡在这句话，怎么都下不去，郁闷死了<br>this might take a minute or longer if the control plane images have to be pulled","like_count":2,"discussions":[{"author":{"id":2774038,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/54/16/4972443e.jpg","nickname":"Northes","note":"","ucode":"6BD7451E2254E4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538224,"discussion_content":"可以通过 kubeadm config images list 看看你当前版本所需要的镜像跟你下好的是否一样，你应该是直接拿上面的同学发的脚本过来用吧？是不是多了个【-amd64】，还有版本也不一致？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1639373022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1251835,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oiboHpgukqib2ASXeU0H7W1ibgRMqyrNE5KaWicicPEDy0ia8YdoneZAtvW0EFIiaqZJp2OS4dnweOgXaJ5EjJicicEqic5A/132","nickname":"覃钰栋","note":"","ucode":"19080C463658EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412893,"discussion_content":"我也是，绝望","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636304504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168294,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d3/a6/5c314cf7.jpg","nickname":"haiyi737","note":"","ucode":"0504B2B6594479","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295187,"discussion_content":"我的也是卡死在这里","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596112449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26572,"user_name":"北卡","can_delete":false,"product_type":"c1","uid":1218128,"ip_address":"","ucode":"2D947A61689FC6","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg","comment_is_top":false,"comment_ctime":1537677795,"is_pvip":false,"replies":[{"id":"9662","content":"对的，不过大功能已经确定了，不必担心，流程不会有太多变化","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537688379,"ip_address":"","comment_id":26572,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10127612387","product_id":100015201,"comment_content":"额，指正式版没有发布吗？","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424674,"discussion_content":"对的，不过大功能已经确定了，不必担心，流程不会有太多变化","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537688379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24376,"user_name":"dragon","can_delete":false,"product_type":"c1","uid":1228546,"ip_address":"","ucode":"200523711D0938","user_header":"https://static001.geekbang.org/account/avatar/00/12/bf/02/7705d4ba.jpg","comment_is_top":false,"comment_ctime":1536933210,"is_pvip":false,"replies":[{"id":"8970","content":"专门的证书, kubeadm会为你生成，自己手动做也可以","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1537086956,"ip_address":"","comment_id":24376,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10126867802","product_id":100015201,"comment_content":"Kubernetes 集群中的Aggregate APIServer 等特性，也需要用到专门的证书吗？还是直接拷贝kube-apiserver带证书就可以？通用吗。 证书这块有点不太懂","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423959,"discussion_content":"专门的证书, kubeadm会为你生成，自己手动做也可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537086956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24298,"user_name":"darling","can_delete":false,"product_type":"c1","uid":1181258,"ip_address":"","ucode":"78BA685D7B71A6","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/4a/e8519ff4.jpg","comment_is_top":false,"comment_ctime":1536893214,"is_pvip":false,"replies":[{"id":"8906","content":"我都不知道这个是啥……","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536904451,"ip_address":"","comment_id":24298,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10126827806","product_id":100015201,"comment_content":"什么时候讲到fabric8啊？ 最近准备升级fabric8 4.xx 不知道有没有坑","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423924,"discussion_content":"我都不知道这个是啥……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536904451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24295,"user_name":"huan","can_delete":false,"product_type":"c1","uid":1012286,"ip_address":"","ucode":"46CB95F6E4E5FF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/3e/534db55d.jpg","comment_is_top":false,"comment_ctime":1536892277,"is_pvip":false,"replies":[{"id":"8897","content":"GFW的问题可能读者比我的经验更丰富……","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536899141,"ip_address":"","comment_id":24295,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10126826869","product_id":100015201,"comment_content":"这篇实践起来困难很多了，主要是碰到各种墙，我是在阿里云中，在digitalocean 就顺畅很多","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423922,"discussion_content":"GFW的问题可能读者比我的经验更丰富……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536899141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335811,"user_name":"Geek_145846","can_delete":false,"product_type":"c1","uid":2530478,"ip_address":"","ucode":"1DA77D13A8F19E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoAlkIjytYG8MqOtDf7n7pF3rXJnoMNL9ebRXluPvGh2e2A9TxyMoQxPyYQ1dInAFIeltwo8zuvhg/132","comment_is_top":false,"comment_ctime":1645697935,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5940665231","product_id":100015201,"comment_content":"现在有一个免费的在线环境,大家可以试试看。<br><br> Play with Kubernetes","like_count":1},{"had_liked":false,"id":308999,"user_name":"Tr","can_delete":false,"product_type":"c1","uid":2011065,"ip_address":"","ucode":"CB52D918C0586E","user_header":"https://static001.geekbang.org/account/avatar/00/1e/af/b9/cf22a1fd.jpg","comment_is_top":false,"comment_ctime":1629885263,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"5924852559","product_id":100015201,"comment_content":"一般都用 OpenSSL 吧，比如 我可以自己 给 api server 签发证书,也就是自签证书，大概流程就是<br>1&gt; 创建CA 机构<br>2&gt;申请证书<br>3&gt;签发证书<br>当然，这只是适用于内部环境哇🤩","like_count":1},{"had_liked":false,"id":293098,"user_name":"null","can_delete":false,"product_type":"c1","uid":1274609,"ip_address":"","ucode":"F07FCCF6552F1C","user_header":"https://static001.geekbang.org/account/avatar/00/13/72/f1/3d7460bb.jpg","comment_is_top":false,"comment_ctime":1621215337,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5916182633","product_id":100015201,"comment_content":"现在是21年5月份了，想问一下kubesphere3.1怎么样呢？能用于生产环境么？目前我是使用kubesphere3.1部署的，感觉还挺方便的","like_count":1,"discussions":[{"author":{"id":2621412,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ff/e4/927547a9.jpg","nickname":"无名无姓","note":"","ucode":"487BD5AA2CD305","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544253,"discussion_content":"同问，这个目前有人在使用么\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641449131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027343,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ad/0f/cac1535a.jpg","nickname":"大水牛","note":"","ucode":"9CF2B21BA75C0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411501,"discussion_content":"同关注这个开源，还有 https://github.com/fanux/sealos 这个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635942076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286358,"user_name":"蘑菇熊","can_delete":false,"product_type":"c1","uid":1597985,"ip_address":"","ucode":"786ED0DDD9E7B4","user_header":"https://static001.geekbang.org/account/avatar/00/18/62/21/03ab94eb.jpg","comment_is_top":false,"comment_ctime":1617267192,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5912234488","product_id":100015201,"comment_content":"老师，文章中提到“最后，我再来回答一下我在今天这次分享开始提到的问题：kubeadm 能够用于生产环境吗？到目前为止（2018 年 9 月），这个问题的答案是：不能。”<br>那现在2021年4月，kubeadm 已经可以用于生产环境了吧？","like_count":1},{"had_liked":false,"id":245475,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1598953761,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5893921057","product_id":100015201,"comment_content":"1.对于第一个,常见的是OpenSSL<br>直接openssl rsd&#47;genrsa 进行生成<br>2.肯定有的是HTTP和HTTPS,是否还有内存类型的调用呢?","like_count":1},{"had_liked":false,"id":236892,"user_name":"patience","can_delete":false,"product_type":"c1","uid":1316840,"ip_address":"","ucode":"D7BDBFBA979D9E","user_header":"https://static001.geekbang.org/account/avatar/00/14/17/e8/f74f4a59.jpg","comment_is_top":false,"comment_ctime":1595579214,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5890546510","product_id":100015201,"comment_content":"推荐一个 ansible-playbook 的高可用部署方案  https:&#47;&#47;github.com&#47;liyongjian5179&#47;k8s-ansible","like_count":1},{"had_liked":false,"id":159586,"user_name":"荣万鹏","can_delete":false,"product_type":"c1","uid":1647046,"ip_address":"","ucode":"465322EE853DDA","user_header":"https://static001.geekbang.org/account/avatar/00/19/21/c6/572163b5.jpg","comment_is_top":false,"comment_ctime":1575695717,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5870663013","product_id":100015201,"comment_content":"现在部署高可用的k8s集群是直接二进制安装还是使用kubespray，又或者kubeadm已经升级到能支持高可用了呢？哪种方式最好？网上的说法太多了，不知道哪个是对的<br>","like_count":1},{"had_liked":false,"id":48424,"user_name":"MING","can_delete":false,"product_type":"c1","uid":1341736,"ip_address":"","ucode":"AEE029B57C1B07","user_header":"https://static001.geekbang.org/account/avatar/00/14/79/28/6d8490a2.jpg","comment_is_top":false,"comment_ctime":1544441687,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5839408983","product_id":100015201,"comment_content":"kubeadm+ansible实现了一套自动化高可用组件集群方案","like_count":1},{"had_liked":false,"id":36356,"user_name":"J","can_delete":false,"product_type":"c1","uid":1204234,"ip_address":"","ucode":"4E568123CF5A3D","user_header":"https://static001.geekbang.org/account/avatar/00/12/60/0a/f971c088.jpg","comment_is_top":false,"comment_ctime":1541053689,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"5836020985","product_id":100015201,"comment_content":"老师，ubuntn下载kubeadm的时候报错说 E: 无法定位软件包 kubeadm，这个是需要翻墙才能下载吗？我的源已经切换到了阿里云<br>","like_count":1,"discussions":[{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"安排","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":108540,"discussion_content":"源配置的不对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577631780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1060967,"avatar":"https://static001.geekbang.org/account/avatar/00/10/30/67/a1e9aaba.jpg","nickname":"Roway","note":"","ucode":"65AF589142AB6C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1638,"discussion_content":"难道是很easy的问题，不值得作者回复吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562751374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":35030,"user_name":"MatOP","can_delete":false,"product_type":"c1","uid":1218661,"ip_address":"","ucode":"95CA3B76D5D9F1","user_header":"https://static001.geekbang.org/account/avatar/00/12/98/65/9d4c66e8.jpg","comment_is_top":false,"comment_ctime":1540385219,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5835352515","product_id":100015201,"comment_content":"kubeadm按照官网搭建高可用init的时候报错，提示<br>Oct 24 20:32:26 master1 kubelet[26550]: E1024 20:32:26.869242   26550 kubelet.go:2236] node &quot;master1&quot; not found       我查了网络都是通的，主机名也有。有木有人知道原因","like_count":1,"discussions":[{"author":{"id":1048261,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","nickname":"正是那朵玫瑰","note":"","ucode":"73D630B654573F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574531,"discussion_content":"我也是一样的问题，你解决了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654130442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":34308,"user_name":"流金岁月","can_delete":false,"product_type":"c1","uid":1226623,"ip_address":"","ucode":"3AAECDEEB34513","user_header":"https://static001.geekbang.org/account/avatar/00/12/b7/7f/5b5fe5f2.jpg","comment_is_top":false,"comment_ctime":1540098467,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5835065763","product_id":100015201,"comment_content":"张老师，下载镜像改了标签后，为什么还是会到k8s.gcr.io上去拉镜像？镜像本地已经下载好了呀","like_count":1,"discussions":[{"author":{"id":2863979,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/FvADgWRdOA1U1KciauXHLiaEn74B007ObTKwAJZIroEiauacJlKb3xhrMPvUyJ7moZ40YqKG4pd2jHejMsIQ83QSQ/132","nickname":"努力做好技术","note":"","ucode":"F4F32F235CF0A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541282,"discussion_content":"建立自己的本地仓库","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640317307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1168294,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d3/a6/5c314cf7.jpg","nickname":"haiyi737","note":"","ucode":"0504B2B6594479","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295188,"discussion_content":"我也遇到了这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596112568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":31960,"user_name":"女生打","can_delete":false,"product_type":"c1","uid":1057399,"ip_address":"","ucode":"AB3692D94B4B10","user_header":"https://static001.geekbang.org/account/avatar/00/10/22/77/7431e82e.jpg","comment_is_top":false,"comment_ctime":1539342937,"is_pvip":false,"replies":[{"id":"11566","content":"不建议把kubelet放容器里","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539357153,"ip_address":"","comment_id":31960,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5834310233","product_id":100015201,"comment_content":"個人目前使用 Rancher 2 來部署 K8s<br>但是 Rancher 的 kubelet 是容器化的<br>跟 kubeadm 不一樣<br>請問這兩個的效能跟侷限性 有比較過嗎？","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426583,"discussion_content":"不建议把kubelet放容器里","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539357153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28917,"user_name":"asdf100","can_delete":false,"product_type":"c1","uid":1043738,"ip_address":"","ucode":"39D8D71453E575","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg","comment_is_top":false,"comment_ctime":1538194492,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5833161788","product_id":100015201,"comment_content":"admin.conf 这个证书配置文件 是不是etcd 连接api server 时使用？","like_count":1},{"had_liked":false,"id":24308,"user_name":"lpf190","can_delete":false,"product_type":"c1","uid":1079354,"ip_address":"","ucode":"D4229573093497","user_header":"","comment_is_top":false,"comment_ctime":1536895816,"is_pvip":false,"replies":[{"id":"8894","content":"商业产品一般有商业支持，问题不大","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1536898779,"ip_address":"","comment_id":24308,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5831863112","product_id":100015201,"comment_content":"又更深的熟悉了部署过程，如果用rancher2.0来部署k8s，用于生产应该没什么问题吧？","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423929,"discussion_content":"商业产品一般有商业支持，问题不大","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1536898779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355827,"user_name":"Geek_042e8a","can_delete":false,"product_type":"c1","uid":1944028,"ip_address":"广东","ucode":"22B648001EC2C1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIyNIia6IFvSwtvZLa9jMFuvTGCuyRTFiavshEmaLe0PBFZHdw8OnxibFe50HgXs1JCqFQymPUXqrJIA/132","comment_is_top":false,"comment_ctime":1661771032,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1661771032","product_id":100015201,"comment_content":"[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory &quot;&#47;etc&#47;kubernetes&#47;manifests&quot;. This can take up to 4m0s<br>[kubelet-check] Initial timeout of 40s passed.<br><br>Unfortunately, an error has occurred:<br>        timed out waiting for the condition<br><br>This error is likely caused by:<br>        - The kubelet is not running<br>        - The kubelet is unhealthy due to a misconfiguration of the node in some way (required cgroups disabled)<br><br>If you are on a systemd-powered system, you can try to troubleshoot the error with the following commands:<br>        - &#39;systemctl status kubelet&#39;<br>        - &#39;journalctl -xeu kubelet&#39;<br><br>Additionally, a control plane component may have crashed or exited when started by the container runtime.<br>To troubleshoot, list all containers using your preferred container runtimes CLI.<br>Here is one example how you may list all running Kubernetes containers by using crictl:<br>        - &#39;crictl --runtime-endpoint unix:&#47;&#47;&#47;var&#47;run&#47;containerd&#47;containerd.sock ps -a | grep kube | grep -v pause&#39;<br>        Once you have found the failing container, you can inspect its logs with:<br>        - &#39;crictl --runtime-endpoint unix:&#47;&#47;&#47;var&#47;run&#47;containerd&#47;containerd.sock logs CONTAINERID&#39;<br>error execution phase wait-control-plane: couldn&#39;t initialize a Kubernetes cluster<br>To see the stack trace of this error execute with --v=5 or higher<br><br>这个问题有遇到过吗？","like_count":1,"discussions":[{"author":{"id":1109270,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ed/16/969f504b.jpg","nickname":"奔跑的面包","note":"","ucode":"EE63FF6FC27F81","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588322,"discussion_content":"坑太多了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663665130,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"荷兰"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1058972,"avatar":"https://static001.geekbang.org/account/avatar/00/10/28/9c/73e76b19.jpg","nickname":"姜戈","note":"","ucode":"45C4BE93C8E4CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587673,"discussion_content":"同遇到，看来最新版本还是有很有坑呀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663214364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"江苏"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352458,"user_name":"草人","can_delete":false,"product_type":"c1","uid":2029713,"ip_address":"","ucode":"EE5E62C1C2FF57","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1seriaYgAJVtrdicUGGibo2FK3mbRSJwaV2IIiaEmUSdXeOhDLyoNQKs3ftlF3I4OVib7OcFrXREicl6w/132","comment_is_top":false,"comment_ctime":1658707943,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658707943","product_id":100015201,"comment_content":"我之前用kk部署算是啥","like_count":0},{"had_liked":false,"id":348680,"user_name":"Geek_4acba3","can_delete":false,"product_type":"c1","uid":2723551,"ip_address":"","ucode":"016F1C56E95FAE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/uUwMSbicsSdrzWpnCBJKMgOpA6MzgztaqNr4w9kiciaH7wFlcsjd97cYhduMXyYicdV9r0vTTmqPReTYr6ia2S15meA/132","comment_is_top":false,"comment_ctime":1655299457,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655299457","product_id":100015201,"comment_content":"Master节点挂了整个集群不就崩了？","like_count":0},{"had_liked":false,"id":348401,"user_name":"党","can_delete":false,"product_type":"c1","uid":1071974,"ip_address":"","ucode":"EE531DB3EA124D","user_header":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","comment_is_top":false,"comment_ctime":1655079807,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655079807","product_id":100015201,"comment_content":"要跟着文章来做测试需要 需要准备多大内存和cpu才能搞 win系统一定不可以么","like_count":0},{"had_liked":false,"id":347724,"user_name":"Juha","can_delete":false,"product_type":"c1","uid":1347609,"ip_address":"","ucode":"5B9301CC960D84","user_header":"https://static001.geekbang.org/account/avatar/00/14/90/19/b3403815.jpg","comment_is_top":false,"comment_ctime":1654352100,"is_pvip":true,"discussion_count":1,"race_medal":1,"score":"1654352100","product_id":100015201,"comment_content":"2022年，跟着这个文章完全搞不定😭","like_count":1,"discussions":[{"author":{"id":1071974,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5b/66/ad35bc68.jpg","nickname":"党","note":"","ucode":"EE531DB3EA124D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575419,"discussion_content":"是的 里边有些东西过时的有点大了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654821354,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334669,"user_name":"Geek_0395fe","can_delete":false,"product_type":"c1","uid":2278890,"ip_address":"","ucode":"064BE5B9B0177E","user_header":"","comment_is_top":false,"comment_ctime":1645067258,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645067258","product_id":100015201,"comment_content":"运行kubeadm init报这个错误[ERROR SystemVerification]: could not unmarshal the JSON output of &#39;docker info&#39;，不去安装docker而是手动创建一个echo &#39;#!&#47;bin&#47;sh&#39; &gt; &#47;sbin&#47;docker &amp;&amp; chmod 0100 &#47;sbin&#47;docker后再去运行kubeadm init报error execution phase preflight: [preflight] Some fatal errors occurred:<br>        [ERROR SystemVerification]: could not unmarshal the JSON output of &#39;docker info&#39;:<br><br>: unexpected end of JSON input有大神遇到过吗","like_count":0},{"had_liked":false,"id":332357,"user_name":"NulI","can_delete":false,"product_type":"c1","uid":1491276,"ip_address":"","ucode":"BF8C3B18FE2D2A","user_header":"https://static001.geekbang.org/account/avatar/00/16/c1/4c/e72d3360.jpg","comment_is_top":false,"comment_ctime":1643185680,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643185680","product_id":100015201,"comment_content":"我用​Kube-Install也可以一键离线安装多K8S集群，支持命令行和Web定时安装https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;s8IHs_EI0amDKtPaopPQBQ","like_count":0},{"had_liked":false,"id":325374,"user_name":"freesocean","can_delete":false,"product_type":"c1","uid":1529210,"ip_address":"","ucode":"CAD4C80CF569D3","user_header":"https://static001.geekbang.org/account/avatar/00/17/55/7a/d44df1d6.jpg","comment_is_top":false,"comment_ctime":1638934195,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638934195","product_id":100015201,"comment_content":"之前用过certbot 生成证书，这里不知道是否可以用","like_count":0},{"had_liked":false,"id":321070,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1636644552,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636644552","product_id":100015201,"comment_content":"Linux openssl吗","like_count":0},{"had_liked":false,"id":321014,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1636619693,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636619693","product_id":100015201,"comment_content":"Kubernetes 的功能那么多，这样一键部署出来的集群，能用于生产环境吗？ <br>是个好问题   K8S这么复杂   看起来好像这2个命令不能当此重任。","like_count":0},{"had_liked":false,"id":314386,"user_name":"心似南风","can_delete":false,"product_type":"c1","uid":2028306,"ip_address":"","ucode":"6707ADB0708AF0","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f3/12/f983d240.jpg","comment_is_top":false,"comment_ctime":1632993771,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1632993771","product_id":100015201,"comment_content":"现在kubeadm可以用于生产环境了吧","like_count":0},{"had_liked":false,"id":311530,"user_name":"刘超","can_delete":false,"product_type":"c1","uid":2649310,"ip_address":"","ucode":"78B617AADA9035","user_header":"https://static001.geekbang.org/account/avatar/00/28/6c/de/1934abe6.jpg","comment_is_top":false,"comment_ctime":1631269644,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631269644","product_id":100015201,"comment_content":"kubelet也可以容器化啊","like_count":0},{"had_liked":false,"id":296196,"user_name":"Geek_4cbdaf","can_delete":false,"product_type":"c1","uid":2628827,"ip_address":"","ucode":"50C13AD8958F59","user_header":"","comment_is_top":false,"comment_ctime":1622800156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622800156","product_id":100015201,"comment_content":"Master 容器启动后，kubeadm 会通过检查 localhost:6443&#47;healthz 这个 Master 组件的健康检查 URL，等待 Master 组件完全运行起来。   这句话不通顺","like_count":0},{"had_liked":false,"id":293903,"user_name":"薯包@","can_delete":false,"product_type":"c1","uid":2621883,"ip_address":"","ucode":"4559872B4F1561","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/a5FMF6AyAoibw9rOPicoibXZ4wHQgxGKygvRJDic3vt6rkCHTLoAwHkTN0zRkwiaSwiaHHPicczTHpGptqpsYaZwByf3A/132","comment_is_top":false,"comment_ctime":1621595838,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1621595838","product_id":100015201,"comment_content":"2021年发问，现在kubeadm可以用于生产环境了吗","like_count":0,"discussions":[{"author":{"id":1983157,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIh7iatqAeGsJuDNxsDlmCQx64ktJl7ATAkBtDO6iczIqsLFPXkF6GPGJpMBCxbl4DJ5obHwAK0bSAQ/132","nickname":"朱东辉","note":"","ucode":"D9EA5C37A1B386","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377561,"discussion_content":"可以了，已经推荐用kubeadm了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622710284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":291528,"user_name":"Geek_07048f","can_delete":false,"product_type":"c1","uid":2522382,"ip_address":"","ucode":"C5C88E5B43813F","user_header":"","comment_is_top":false,"comment_ctime":1620349364,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1620349364","product_id":100015201,"comment_content":"遇到一个场景 部署完成后 第二天集群master的ip地址改了 请教一下怎么恢复呢","like_count":0,"discussions":[{"author":{"id":1529822,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/GkMk4gBlfZfhDE2btGKnGxCDsOVgkahKVRpYHU2C7uUQTHIWicPOPVQQPMDltZvo2iafsWjjxdR1IoqiaKuOSunYw/132","nickname":"Geek_267887","note":"","ucode":"58A40D03329385","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384484,"discussion_content":"为啥还会这样？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626610515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288070,"user_name":"Geek_a754be","can_delete":false,"product_type":"c1","uid":2437733,"ip_address":"","ucode":"A18C3752E2C1C8","user_header":"","comment_is_top":false,"comment_ctime":1618288569,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1618288569","product_id":100015201,"comment_content":"麻烦大神帮看下<br>kubeadm config images pull --image-repository=registry.aliyuncs.com&#47;google_containers --v=5 --kubernetes-version=v1.20.5<br>I0413 12:31:32.036207   29007 initconfiguration.go:115] detected and using CRI socket: &#47;var&#47;run&#47;dockershim.sock<br>I0413 12:31:32.036518   29007 interface.go:431] Looking for default routes with IPv4 addresses<br>I0413 12:31:32.036531   29007 interface.go:436] Default route transits interface &quot;eth0&quot;<br>I0413 12:31:32.036700   29007 interface.go:208] Interface eth0 is up<br>I0413 12:31:32.036778   29007 interface.go:256] Interface &quot;eth0&quot; has 1 addresses :[10.249.64.46&#47;22].<br>I0413 12:31:32.036800   29007 interface.go:223] Checking addr  10.249.64.46&#47;22.<br>I0413 12:31:32.036813   29007 interface.go:230] IP found 10.249.64.46<br>I0413 12:31:32.036826   29007 interface.go:262] Found valid IPv4 address 10.249.64.46 for interface &quot;eth0&quot;.<br>I0413 12:31:32.036836   29007 interface.go:442] Found active IP 10.249.64.46 <br>[config&#47;images] Pulled registry.aliyuncs.com&#47;google_containers&#47;kube-apiserver:v1.20.5<br>[config&#47;images] Pulled registry.aliyuncs.com&#47;google_containers&#47;kube-controller-manager:v1.20.5<br>[config&#47;images] Pulled registry.aliyuncs.com&#47;google_containers&#47;kube-scheduler:v1.20.5<br>[config&#47;images] Pulled registry.aliyuncs.com&#47;google_containers&#47;kube-proxy:v1.20.5<br>[config&#47;images] Pulled registry.aliyuncs.com&#47;google_containers&#47;pause:3.4.1<br>[config&#47;images] Pulled registry.aliyuncs.com&#47;google_containers&#47;etcd:3.4.13-0<br>exit status 1<br>output: Error response from daemon: manifest for registry.aliyuncs.com&#47;google_containers&#47;coredns&#47;coredns:v1.8.0 not found: manifest unknown: manifest unknown","like_count":0,"discussions":[{"author":{"id":1251835,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oiboHpgukqib2ASXeU0H7W1ibgRMqyrNE5KaWicicPEDy0ia8YdoneZAtvW0EFIiaqZJp2OS4dnweOgXaJ5EjJicicEqic5A/132","nickname":"覃钰栋","note":"","ucode":"19080C463658EF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412895,"discussion_content":"我也遇到这样问题，请问解决了吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636304715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286301,"user_name":"文化弥母","can_delete":false,"product_type":"c1","uid":1001226,"ip_address":"","ucode":"7C4ED6B1DFCADF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/0a/5d0285a0.jpg","comment_is_top":false,"comment_ctime":1617245536,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617245536","product_id":100015201,"comment_content":"我感觉学到这里要停下来消化一下了。再翻翻之前听过一些基础课，看看书。相信自己一定可以看懂，看透。","like_count":0},{"had_liked":false,"id":284838,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1274787,"ip_address":"","ucode":"C233DF1D224EC1","user_header":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","comment_is_top":false,"comment_ctime":1616492785,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1616492785","product_id":100015201,"comment_content":"我们现在是用helm部署k8s集群的，之前是kubespray进行部署的","like_count":0,"discussions":[{"author":{"id":2621412,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ff/e4/927547a9.jpg","nickname":"无名无姓","note":"","ucode":"487BD5AA2CD305","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544255,"discussion_content":"那个比较好用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641449233,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281143,"user_name":"鹤无双","can_delete":false,"product_type":"c1","uid":2117362,"ip_address":"","ucode":"785B47B34FFBDC","user_header":"https://static001.geekbang.org/account/avatar/00/20/4e/f2/a3314a28.jpg","comment_is_top":false,"comment_ctime":1614593736,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1614593736","product_id":100015201,"comment_content":"其实所谓的高可用可以通过 keeplived 在多个需要部署 master 的节点上搭建 VIP ，然后再 kubeadm init 的时候将 ip 指定为 keeplived 的vip 即可","like_count":0},{"had_liked":false,"id":277964,"user_name":"欢乐","can_delete":false,"product_type":"c1","uid":2404137,"ip_address":"","ucode":"6AFA6C4DE5B11E","user_header":"https://static001.geekbang.org/account/avatar/00/24/af/29/9b7d1667.jpg","comment_is_top":false,"comment_ctime":1612684078,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1612684078","product_id":100015201,"comment_content":"2021年了,里面的一些知识点还适用吗？","like_count":0,"discussions":[{"author":{"id":1325256,"avatar":"https://static001.geekbang.org/account/avatar/00/14/38/c8/972a5024.jpg","nickname":"凉凉","note":"","ucode":"FCCF976E41EF71","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383019,"discussion_content":"我也想问这个问题，刚开始接触 k8s ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625824892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271974,"user_name":"谭耀峰","can_delete":false,"product_type":"c1","uid":2383395,"ip_address":"","ucode":"CF30022CE11C98","user_header":"https://static001.geekbang.org/account/avatar/00/24/5e/23/d34723b4.jpg","comment_is_top":false,"comment_ctime":1609900660,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1609900660","product_id":100015201,"comment_content":"kubeadm init 生成 bootstrap token 之后，被保存在哪里，是如何保证不被非法访问的？","like_count":0},{"had_liked":false,"id":255668,"user_name":"张小益","can_delete":false,"product_type":"c1","uid":1347798,"ip_address":"","ucode":"702BC860386C61","user_header":"https://static001.geekbang.org/account/avatar/00/14/90/d6/f806b648.jpg","comment_is_top":false,"comment_ctime":1603410269,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603410269","product_id":100015201,"comment_content":"高可用集群还没实践过，因为我不是运维。不过继承环境使用kubeadm成功搭建了集群","like_count":0},{"had_liked":false,"id":236828,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1595558709,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595558709","product_id":100015201,"comment_content":"这个高中生好厉害！","like_count":0},{"had_liked":false,"id":206921,"user_name":"liwei","can_delete":false,"product_type":"c1","uid":1275164,"ip_address":"","ucode":"FE2CBCB6C95926","user_header":"https://static001.geekbang.org/account/avatar/00/13/75/1c/4699bc47.jpg","comment_is_top":false,"comment_ctime":1586957362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586957362","product_id":100015201,"comment_content":"failed to pull image k8s.gcr.io&#47;kube-apiserver:v1.18.1: output: Error response from daemon: Get https:&#47;&#47;k8s.gcr.io&#47;v2&#47;: net&#47;http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)，我换成从国内的去啦，都没有:v1.18.1 这个是怎么回事儿了？还请老师帮忙看下","like_count":0},{"had_liked":false,"id":204556,"user_name":"Cybertrunk","can_delete":false,"product_type":"c1","uid":1011174,"ip_address":"","ucode":"D557A710E1835F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6d/e6/57bfae83.jpg","comment_is_top":false,"comment_ctime":1586421227,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586421227","product_id":100015201,"comment_content":"kubespray也是麻烦，单机做实验的，virtualbox+vagrant可以很便利的拉起一个k8s cluster","like_count":0},{"had_liked":false,"id":200856,"user_name":"Sean","can_delete":false,"product_type":"c1","uid":1118697,"ip_address":"","ucode":"D24A03CD491F23","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/e9/acd1654c.jpg","comment_is_top":false,"comment_ctime":1585662786,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585662786","product_id":100015201,"comment_content":"coredns和kube-router状态不是running，后者直接crashloop，还不知道什原因，看官方文档，里面好多引用链接，文档太多了。","like_count":0},{"had_liked":false,"id":200304,"user_name":"ch_ort","can_delete":false,"product_type":"c1","uid":1580926,"ip_address":"","ucode":"B79746E687F29E","user_header":"","comment_is_top":false,"comment_ctime":1585570783,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585570783","product_id":100015201,"comment_content":"kubelet部署在容器中，为了宿主机感知到挂在的文件系统，容器是否可以使用 MS_SHARE的方式使用 mount namespace来解决？","like_count":0},{"had_liked":false,"id":197185,"user_name":"Andy","can_delete":false,"product_type":"c1","uid":1119133,"ip_address":"","ucode":"4BCA899B8E4E85","user_header":"https://static001.geekbang.org/account/avatar/00/11/13/9d/0ff43179.jpg","comment_is_top":false,"comment_ctime":1585362217,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585362217","product_id":100015201,"comment_content":"openssl可以生成证书，我在网上搜别人的例子做的。感觉按步聚做，完全不明白各部参数真实含义，学习成本有点高，还不是经常用的技术(用一次基本好长时间不会用到)。","like_count":0},{"had_liked":false,"id":186466,"user_name":"叶昊","can_delete":false,"product_type":"c1","uid":1118376,"ip_address":"","ucode":"8A5453942F931F","user_header":"https://static001.geekbang.org/account/avatar/00/11/10/a8/a7aedb90.jpg","comment_is_top":false,"comment_ctime":1583848537,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583848537","product_id":100015201,"comment_content":"今天刚用kubeadm在公司内网部署了三个master和三个worker的keepalived高可用集群。遇到了好几个问题，不过幸好都搞定了。正如作者说的，kubeadm部署很方便，日后上生产环境还是要调研下其他的部署工具，要深入学习还有很多，听作者一席话已经对k8s的组件有了更多的了解，感谢作者。","like_count":0},{"had_liked":false,"id":119770,"user_name":"陈小白( ´･ᴗ･` )","can_delete":false,"product_type":"c1","uid":1334864,"ip_address":"","ucode":"A92C85374A711B","user_header":"https://static001.geekbang.org/account/avatar/00/14/5e/50/d2cdb05c.jpg","comment_is_top":false,"comment_ctime":1564676953,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1564676953","product_id":100015201,"comment_content":"老师好，有个非常没弄明白的问题，kubeadm.yaml这个文件在哪里生成得啊？","like_count":0,"discussions":[{"author":{"id":1644983,"avatar":"","nickname":"weiwei.mo","note":"","ucode":"DA130336171AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8389,"discussion_content":"自己建个","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567992849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117426,"user_name":"Jee","can_delete":false,"product_type":"c1","uid":1198458,"ip_address":"","ucode":"B80BBF2D2EB116","user_header":"https://static001.geekbang.org/account/avatar/00/12/49/7a/b567de82.jpg","comment_is_top":false,"comment_ctime":1564045345,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1564045345","product_id":100015201,"comment_content":"老师想咨询个问题 linux如何安装 kubeadm等 apt-get无法执行 yum也安装不了","like_count":0,"discussions":[{"author":{"id":1261556,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/f4/915198a7.jpg","nickname":"郑鹏云","note":"","ucode":"A7439EA655CE46","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5217,"discussion_content":"centos的话你要先安装k8s的yum源：\ncat > /etc/yum.repo.d/kubernetes.repo <<EOF\n[kubernetes]\nname=Kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566056732,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2054990,"avatar":"","nickname":"海柔儿稀罕","note":"","ucode":"CBEEBEA2CAE8A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289381,"discussion_content":"不错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594085715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112505,"user_name":"Roway","can_delete":false,"product_type":"c1","uid":1060967,"ip_address":"","ucode":"65AF589142AB6C","user_header":"https://static001.geekbang.org/account/avatar/00/10/30/67/a1e9aaba.jpg","comment_is_top":false,"comment_ctime":1562748205,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1562748205","product_id":100015201,"comment_content":"Ubuntu 16.04.6 LTS      apt-get install kubeadm       E: Unable to locate package kubeadm","like_count":0},{"had_liked":false,"id":112503,"user_name":"Roway","can_delete":false,"product_type":"c1","uid":1060967,"ip_address":"","ucode":"65AF589142AB6C","user_header":"https://static001.geekbang.org/account/avatar/00/10/30/67/a1e9aaba.jpg","comment_is_top":false,"comment_ctime":1562748170,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1562748170","product_id":100015201,"comment_content":"Ubuntu 16.04.6 LTS","like_count":0},{"had_liked":false,"id":112502,"user_name":"Roway","can_delete":false,"product_type":"c1","uid":1060967,"ip_address":"","ucode":"65AF589142AB6C","user_header":"https://static001.geekbang.org/account/avatar/00/10/30/67/a1e9aaba.jpg","comment_is_top":false,"comment_ctime":1562748142,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1562748142","product_id":100015201,"comment_content":"Unable to locate package kubeadm","like_count":0},{"had_liked":false,"id":103193,"user_name":"GLADIATOR","can_delete":false,"product_type":"c1","uid":1448564,"ip_address":"","ucode":"6FE14E0BCD6240","user_header":"https://static001.geekbang.org/account/avatar/00/16/1a/74/8f7f8786.jpg","comment_is_top":false,"comment_ctime":1560394689,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560394689","product_id":100015201,"comment_content":"老师您好：以下是我在init时报的警告和错误，请问这几个警告和错误分别是什么原理？比如swap一定要关闭才能用kubeadm吗，虽然我一一解决了，比如关掉swap，但是这种解决方式在生产上部署的时候安全可靠吗？<br>kubeadm init<br>I0613 10:44:46.947319   14190 version.go:96] could not fetch a Kubernetes version from the internet: unable to get URL &quot;https:&#47;&#47;dl.k8s.io&#47;release&#47;stable-1.txt&quot;: Get https:&#47;&#47;dl.k8s.io&#47;release&#47;stable-1.txt: net&#47;http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)<br>I0613 10:44:46.947425   14190 version.go:97] falling back to the local client version: v1.14.3<br>[init] Using Kubernetes version: v1.14.3<br>[preflight] Running pre-flight checks<br>\t[WARNING IsDockerSystemdCheck]: detected &quot;cgroupfs&quot; as the Docker cgroup driver. The recommended driver is &quot;systemd&quot;. Please follow the guide at https:&#47;&#47;kubernetes.io&#47;docs&#47;setup&#47;cri&#47;<br>\t[WARNING Service-Kubelet]: kubelet service is not enabled, please run &#39;systemctl enable kubelet.service&#39;<br>error execution phase preflight: [preflight] Some fatal errors occurred:<br>\t[ERROR FileContent--proc-sys-net-bridge-bridge-nf-call-iptables]: &#47;proc&#47;sys&#47;net&#47;bridge&#47;bridge-nf-call-iptables contents are not set to 1<br>\t[ERROR Swap]: running with swap on is not supported. Please disable swap<br>[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`<br><br>","like_count":0},{"had_liked":false,"id":93762,"user_name":"黄马","can_delete":false,"product_type":"c1","uid":1019506,"ip_address":"","ucode":"93E391B4678EC2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8e/72/63c94eee.jpg","comment_is_top":false,"comment_ctime":1557583512,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1557583512","product_id":100015201,"comment_content":"kubelet 对于部署k8s的特殊性；<br>k8s三个组件<br>kubeadm 创建访问配置，创建访问证书<br>","like_count":0},{"had_liked":false,"id":84752,"user_name":"lunar","can_delete":false,"product_type":"c1","uid":1197007,"ip_address":"","ucode":"4FC1E388AD98C6","user_header":"https://static001.geekbang.org/account/avatar/00/12/43/cf/118c4ef5.jpg","comment_is_top":false,"comment_ctime":1554902560,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554902560","product_id":100015201,"comment_content":"kubeadm init执行发生问题，如下所示：<br>W0410 21:11:36.650009    6162 version.go:102] could not obtain client version; using remote version: v1.14.1<br>[init] Using Kubernetes version: v1.14.1<br>[preflight] Running pre-flight checks<br>    [WARNING Firewalld]: no supported init system detected, skipping checking for services<br>    [WARNING HTTPProxy]: Connection to &quot;https:&#47;&#47;192.168.199.107&quot; uses proxy &quot;socks5:&#47;&#47;127.0.0.1:1080&quot;. If that is not intended, adjust your proxy settings<br>    [WARNING HTTPProxyCIDR]: connection to &quot;10.96.0.0&#47;12&quot; uses proxy &quot;socks5:&#47;&#47;127.0.0.1:1080&quot;. This may lead to malfunctional cluster setup. Make sure that Pod and Services IP ranges specified correctly as exceptions in proxy configuration<br>    [WARNING Service-Docker]: no supported init system detected, skipping checking for services<br>[preflight] The system verification failed. Printing the output from the verification:<br>KERNEL_VERSION: 17.7.0<br>DOCKER_VERSION: 18.09.2<br>    [WARNING SystemVerification]: this Docker version is not on the list of validated versions: 18.09.2. Latest validated version: 18.06<br>    [WARNING Service-Kubelet]: no supported init system detected, skipping checking for services<br>error execution phase preflight: [preflight] Some fatal errors occurred:<br>    [ERROR SystemVerification]: [unsupported kernel release: 17.7.0, failed to parse kernel config: unable to load kernel module: &quot;configs&quot;, output: &quot;&quot;, err: exec: &quot;modprobe&quot;: executable file not found in $PATH]<br>    [ERROR KubeletVersion]: couldn&#39;t get kubelet version: Unable to parse output from Kubelet: &quot;Kubernetes v0.0.0-master+$Format:%h$&quot;<br>[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`<br>不知道该怎么解决，环境macOs 10.13.6, docker安装的是官网包，环境如下所示：<br>Server: Docker Engine - Community<br> Engine:<br>  Version: 18.09.2<br>  API version:1.39 (minimum version 1.12)<br>  Go version: go1.10.6<br>  Git commit: 6247962<br>  Built:      Sun Feb 10 04:13:06 2019<br>  OS&#47;Arch:      linux&#47;amd64<br>  Experimental: true<br>求老师指教！","like_count":0},{"had_liked":false,"id":76783,"user_name":"饭粒","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1552707869,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552707869","product_id":100015201,"comment_content":"之前在Win10下折腾过minikube，使用体验不爽就又用Linux虚机折腾了一次二进制安装，确实繁琐。这次跟上kubeadm。","like_count":0},{"had_liked":false,"id":51199,"user_name":"峰哥","can_delete":false,"product_type":"c1","uid":1301870,"ip_address":"","ucode":"CB0652D3EF49A1","user_header":"https://static001.geekbang.org/account/avatar/00/13/dd/6e/f3cfebc5.jpg","comment_is_top":false,"comment_ctime":1545132801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545132801","product_id":100015201,"comment_content":"看到有用KOPS安装K8S集群的，这个和kubeadm或者ansible 安装，装完有啥区别？","like_count":0},{"had_liked":false,"id":44756,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1305633,"ip_address":"","ucode":"338BA720880E4F","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/21/b0fe1bfd.jpg","comment_is_top":false,"comment_ctime":1543486934,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543486934","product_id":100015201,"comment_content":"老师，我现在生产环境中也是用kubeadm来搭建的高可用，多个master节点，然后每个master节点都通过kubeadm init --config config.yaml 的方式进行通过初始化。多个节点部署了lvs+keepalived的方式，虚拟出VIP。 config.yaml配置里面指定了advertiseAddress和controlPlaneEndpoint的IP都为vip。这种方式是否可取。","like_count":0},{"had_liked":false,"id":41237,"user_name":"李岩","can_delete":false,"product_type":"c1","uid":1095970,"ip_address":"","ucode":"8FB7799F085EFA","user_header":"https://static001.geekbang.org/account/avatar/00/10/b9/22/e2e77627.jpg","comment_is_top":false,"comment_ctime":1542761809,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542761809","product_id":100015201,"comment_content":"老师 在on-prem环境搭建单master节点的集群 推荐用什么工具 还是kubeadm吗？","like_count":0},{"had_liked":false,"id":40118,"user_name":"Johnson","can_delete":false,"product_type":"c1","uid":1060473,"ip_address":"","ucode":"FF29D9659284FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/2e/79/05261bd7.jpg","comment_is_top":false,"comment_ctime":1542508534,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542508534","product_id":100015201,"comment_content":"个人觉得Cassandra 容器这个例子举得不太好, Cassandra 是属于master-less的分布式数据库, 所有的node都可以读写，并不是主从架构。","like_count":0},{"had_liked":false,"id":39162,"user_name":"韩大","can_delete":false,"product_type":"c1","uid":1198440,"ip_address":"","ucode":"998B64DD552C8D","user_header":"https://static001.geekbang.org/account/avatar/00/12/49/68/a05fb728.jpg","comment_is_top":false,"comment_ctime":1542201213,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542201213","product_id":100015201,"comment_content":"而且我看招聘网站上都是在招docker运维工程师，很少招聘Java的要求精通docker和k8s!","like_count":0},{"had_liked":false,"id":32320,"user_name":"帅","can_delete":false,"product_type":"c1","uid":1207367,"ip_address":"","ucode":"DB792F56C26429","user_header":"https://static001.geekbang.org/account/avatar/00/12/6c/47/57b6c4e8.jpg","comment_is_top":false,"comment_ctime":1539529377,"is_pvip":false,"replies":[{"id":"11812","content":"nfs是需要挂载在宿主机上才能用的。","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539571289,"ip_address":"","comment_id":32320,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1539529377","product_id":100015201,"comment_content":"老师你好，不太明白为什么&quot;kubelet 就需要在容器进行绑定挂载前，在宿主机的指定目录上，先挂载 NFS 的远程目录。&quot;这句话。我的理解是，只要做为nfs的client node跟nfs server 网络通不就行了，为啥一定要考虑能不能在宿主机上&quot;传播&quot;呢？期待老师的回复，非常感谢！","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426726,"discussion_content":"nfs是需要挂载在宿主机上才能用的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539571289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":31973,"user_name":"shaobo","can_delete":false,"product_type":"c1","uid":1087931,"ip_address":"","ucode":"E47B99769A9EAF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/bb/90d97247.jpg","comment_is_top":false,"comment_ctime":1539346269,"is_pvip":false,"replies":[{"id":"11567","content":"那得问阿里云去咯","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539357172,"ip_address":"","comment_id":31973,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1539346269","product_id":100015201,"comment_content":"请问下，在阿里云上部署高可用的k8s推荐什么方案？如果是单节点部署，最多可管理多少node","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426588,"discussion_content":"那得问阿里云去咯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539357172,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":31877,"user_name":"runner","can_delete":false,"product_type":"c1","uid":1200107,"ip_address":"","ucode":"6037BEDDF7AA48","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/eb/b5bb4227.jpg","comment_is_top":false,"comment_ctime":1539318032,"is_pvip":false,"replies":[{"id":"11540","content":"重新创建一下weave试试？","user_name":"作者回复","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539330483,"ip_address":"","comment_id":31877,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1539318032","product_id":100015201,"comment_content":"按照步骤搭建的服务，容器间可以互相访问，在节点curl容器，或服务都提示没有到主机的路由。<br>而且 coredns 服务 日志 &quot;Liveness probe failed: Get http:&#47;&#47;10.32.0.8:8080&#47;health: net&#47;http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)&quot;<br>这是什么原因啊？","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"张磊 Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426546,"discussion_content":"重新创建一下weave试试？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539330483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27870,"user_name":"Joe Black","can_delete":false,"product_type":"c1","uid":1052528,"ip_address":"","ucode":"21FE222A286445","user_header":"https://static001.geekbang.org/account/avatar/00/10/0f/70/c8680841.jpg","comment_is_top":false,"comment_ctime":1537958606,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537958606","product_id":100015201,"comment_content":"终于知道apiServerExtraArgs到底在哪里加了，想改生成的服务的端口范围，之前一直没找到...","like_count":0},{"had_liked":false,"id":26646,"user_name":"via","can_delete":false,"product_type":"c1","uid":1017696,"ip_address":"","ucode":"5A7E873D8D8FBE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/60/fe8a31ea.jpg","comment_is_top":false,"comment_ctime":1537711640,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537711640","product_id":100015201,"comment_content":"您好，在安装过程出现这种问题，要怎么处理？谢谢。<br>[kubelet-check] The HTTP call equal to &#39;curl -sSL http:&#47;&#47;localhost:10248&#47;healthz&#39; failed with error: Get http:&#47;&#47;localhost:10248&#47;healthz: dial tcp [::1]:10248: connect: connection refused.","like_count":0},{"had_liked":false,"id":24709,"user_name":"江宇霆","can_delete":false,"product_type":"c1","uid":1232848,"ip_address":"","ucode":"D38A92CFD4D611","user_header":"https://static001.geekbang.org/account/avatar/00/12/cf/d0/15d7c285.jpg","comment_is_top":false,"comment_ctime":1537188020,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537188020","product_id":100015201,"comment_content":"等更新好像以前等小说","like_count":0}]}