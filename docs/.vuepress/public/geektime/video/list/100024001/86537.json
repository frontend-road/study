{"id":86537,"title":"24 | å…±äº«å†…å­˜å¹¶å‘æœºåˆ¶","content":"<h1>è¯¾ä»¶åŠæºä»£ç åœ°å€</h1><p><a href=\"https://gitee.com/geektime-geekbang/go_learning\">https://gitee.com/geektime-geekbang/go_learning</a></p><h2>ä¹¦ç›®æ¨è</h2><p><a href=\"time://mall?url=https%3A%2F%2Fh5.youzan.com%2Fv2%2Fgoods%2F1ycmk3uob0ryw\">ã€Šè®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Šã€‹</a></p>","comments":[{"had_liked":false,"id":80677,"user_name":"Chris","can_delete":false,"product_type":"c3","uid":1024842,"ip_address":"","ucode":"47E030165390BE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a3/4a/2006a4dc.jpg","comment_is_top":false,"comment_ctime":1553697336,"is_pvip":false,"replies":[{"id":29404,"content":"å¥½é—®é¢˜ã€‚ä½ å®Œå…¨å¯ä»¥å†™ä¸ªç¨‹åºåŠ¨æ‰‹è¯•è¯•ã€‚ç„¶åï¼Œè®°å¾—æŠŠç»“æœåˆ†äº«ç»™å¤§å®¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1553750634,"ip_address":"","comment_id":80677,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"è€å¸ˆï¼Œå‡å¦‚mut.Lock()ä¹‹å‰æœ‰ä¸€æ®µä»£ç ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰æ‰§è¡Œåˆ°è¿™é‡Œå°±å‡ºé”™äº†ï¼Œé‚£ä¹ˆdeferé‡Œé¢çš„Unlockå°±ä¼šå…ˆæ‰§è¡Œï¼Œè¿™æ ·æ˜¯ä¸æ˜¯ä¼šå‡ºé”™ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444941,"discussion_content":"å¥½é—®é¢˜ã€‚ä½ å®Œå…¨å¯ä»¥å†™ä¸ªç¨‹åºåŠ¨æ‰‹è¯•è¯•ã€‚ç„¶åï¼Œè®°å¾—æŠŠç»“æœåˆ†äº«ç»™å¤§å®¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553750634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1233073,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d0/b1/87853049.jpg","nickname":"éƒ‘æ–‡ç¥¥","note":"","ucode":"730452A9B3376A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2473,"discussion_content":"æ¢æˆfmt.Printfå°±èƒ½æ‰“å°å‡ºæ¥ï¼Œé‚£testingåŒ…ä¸­çš„Logå’Œfmtä¸­çš„æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ç”¨t.Logå°±ä¸ä¼šæ‰“å°æ—¥å¿—ï¼Œfmt.Printfå°±èƒ½æ‰“å°å‡ºæ¥ï¼Ÿæˆ‘åœ¨go testä¸­åŠ äº†-vé€‰é¡¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563687074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1233073,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d0/b1/87853049.jpg","nickname":"éƒ‘æ–‡ç¥¥","note":"","ucode":"730452A9B3376A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2472,"discussion_content":"è€å¸ˆï¼Œæˆ‘åœ¨goroutineä¸­Lockå‰åŠ äº†ä¸ªpanicï¼Œå‘ç°ç¨‹åºå¹¶æ²¡æœ‰èµ°åˆ°deferé‡Œé¢ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563685283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2198970,"avatar":"","nickname":"Geek_1acb32","note":"","ucode":"73290D0435996F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1233073,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d0/b1/87853049.jpg","nickname":"éƒ‘æ–‡ç¥¥","note":"","ucode":"730452A9B3376A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337785,"discussion_content":"æˆ‘è®¤ä¸ºæ˜¯å› ä¸ºdeferè¯­å¥åœ¨panicä¹‹åï¼Œå½“panicæ—¶ï¼Œå…¶åé¢çš„è¯­å¥å°±è¿è¡Œä¸åˆ°äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609076863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2472,"ip_address":"","group_id":0},"score":337785,"extra":""}]}]},{"had_liked":false,"id":156824,"user_name":"ç å†œKevinäº®","can_delete":false,"product_type":"c3","uid":1116630,"ip_address":"","ucode":"D34562461CA0A1","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/d6/5f366427.jpg","comment_is_top":false,"comment_ctime":1574985823,"is_pvip":false,"replies":[{"id":60361,"content":"1.åœ¨è®¾è®¡å‡½æ•°çš„æ—¶å€™å°±æƒ³æ¸…æ¥šæ”¶å°¾å·¥ä½œï¼Œé‡Šæ”¾èµ„æº\n2.ä¾¿äºæ’é”™æ—¶ï¼Œå¿«é€Ÿç¡®å®šæ²¡æœ‰èµ„æº&#47;é”ç­‰é‡Šæ”¾é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1575168600,"ip_address":"","comment_id":156824,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"ä¸ºä»€ä¹ˆè€å¸ˆå–œæ¬¢æŠŠdeferå‡½æ•°å†™åœ¨æœ€å‰é¢ï¼Œçœ‹èµ·æ¥é€»è¾‘æ€ªæ€ªçš„","like_count":4,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476243,"discussion_content":"1.åœ¨è®¾è®¡å‡½æ•°çš„æ—¶å€™å°±æƒ³æ¸…æ¥šæ”¶å°¾å·¥ä½œï¼Œé‡Šæ”¾èµ„æº\n2.ä¾¿äºæ’é”™æ—¶ï¼Œå¿«é€Ÿç¡®å®šæ²¡æœ‰èµ„æº/é”ç­‰é‡Šæ”¾é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575168600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77781,"user_name":"Gary","can_delete":false,"product_type":"c3","uid":1218372,"ip_address":"","ucode":"12265D6A578113","user_header":"https://static001.geekbang.org/account/avatar/00/12/97/44/3929e620.jpg","comment_is_top":false,"comment_ctime":1552997730,"is_pvip":false,"replies":[{"id":28414,"content":"è¿™ä¸ªçœ‹ä½ çš„åº”ç”¨åœºæ™¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1553006109,"ip_address":"","comment_id":77781,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"wg.done()æ˜¯ä¸æ˜¯æ”¾åˆ°deferå‡½æ•°é‡Œæ›´å¥½ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443850,"discussion_content":"è¿™ä¸ªçœ‹ä½ çš„åº”ç”¨åœºæ™¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553006109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77764,"user_name":"å¿ƒå‘æ— é™","can_delete":false,"product_type":"c3","uid":1447843,"ip_address":"","ucode":"D4F5444FEFDB49","user_header":"https://static001.geekbang.org/account/avatar/00/16/17/a3/9f5430fa.jpg","comment_is_top":false,"comment_ctime":1552995655,"is_pvip":false,"replies":[{"id":28417,"content":"åˆšæ‰å·²ç»è”ç³»è¿‡å¹³å°äº†ï¼Œæ˜å¤©å¹³å°å›è¡¥ä¸Šè¿™ä¸€æœŸ","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1553006671,"ip_address":"","comment_id":77764,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"çº¿ç¨‹æœºåˆ¶ï¼Ÿæ²¡æœ‰è¿™è¯¾å•Šï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443842,"discussion_content":"åˆšæ‰å·²ç»è”ç³»è¿‡å¹³å°äº†ï¼Œæ˜å¤©å¹³å°å›è¡¥ä¸Šè¿™ä¸€æœŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553006671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120470,"user_name":"hj","can_delete":false,"product_type":"c3","uid":1264287,"ip_address":"","ucode":"6ED34286AC30FA","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/9f/b92a9139.jpg","comment_is_top":false,"comment_ctime":1564909219,"is_pvip":false,"replies":[{"id":44721,"content":"å…¶å®share memoryçš„é”ï¼Œæ›´åº”è¯¥çœ‹æˆæ˜¯å…±äº«å†…å®¹ä¸Šçš„é”ï¼Œæ¯ä¸ªè®¿é—®è€…ï¼ˆåç¨‹&#47;çº¿ç¨‹ï¼‰åœ¨è®¿é—®å…±äº«å†…å®¹å‰è¦å…ˆè·å–è¿™ä¸ªé”ï¼ˆlockï¼‰ï¼Œå¦‚æœæ— æ³•é”ä½å°±è¦ç­‰å¾…é‡Šæ”¾ï¼Œæ‰€ä»¥æ‰ä¼šåœ¨æ¯ä¸ªåç¨‹é‡Œè¦å…ˆé”ä½å†é‡Šæ”¾ã€‚å¹¶ä¸æ˜¯è¯´é‡Šæ”¾åˆ«äºº&#47;è‡ªå·±çš„é”","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1565190741,"ip_address":"","comment_id":120470,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"...\nfor i := 0; i &lt; 5000; i++ {\n  &#47;&#47; åŠ é”ï¼Œæ”¾åœ¨åç¨‹çš„å¤–é¢\n  mutex.Lock()\n  go func() {\n    defer func() {\n\tmutex.Unlock()\n    }()\n    ......\n  }\n}\n...\n\nè¿™æ ·ä¹Ÿèƒ½æˆåŠŸæ‰§è¡Œï¼Œç»“æœæ˜¯4999ã€‚å¥‡æ€ªçš„ç‚¹æ˜¯ï¼šåœ¨å¤–é¢lockçš„ï¼Œåœ¨åç¨‹å†…éƒ¨å¯ä»¥unlockï¼Œä¹Ÿå°±æ˜¯è¯´åç¨‹å¯ä»¥unlockåˆ«äººçš„é”ï¼Ÿï¼Ÿï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461348,"discussion_content":"å…¶å®share memoryçš„é”ï¼Œæ›´åº”è¯¥çœ‹æˆæ˜¯å…±äº«å†…å®¹ä¸Šçš„é”ï¼Œæ¯ä¸ªè®¿é—®è€…ï¼ˆåç¨‹/çº¿ç¨‹ï¼‰åœ¨è®¿é—®å…±äº«å†…å®¹å‰è¦å…ˆè·å–è¿™ä¸ªé”ï¼ˆlockï¼‰ï¼Œå¦‚æœæ— æ³•é”ä½å°±è¦ç­‰å¾…é‡Šæ”¾ï¼Œæ‰€ä»¥æ‰ä¼šåœ¨æ¯ä¸ªåç¨‹é‡Œè¦å…ˆé”ä½å†é‡Šæ”¾ã€‚å¹¶ä¸æ˜¯è¯´é‡Šæ”¾åˆ«äºº/è‡ªå·±çš„é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565190741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79962,"user_name":"ã€ŒZYã€","can_delete":false,"product_type":"c3","uid":1208912,"ip_address":"","ucode":"576332E29CC400","user_header":"https://static001.geekbang.org/account/avatar/00/12/72/50/68304a30.jpg","comment_is_top":false,"comment_ctime":1553584603,"is_pvip":false,"replies":[{"id":29193,"content":"è¿™ä¸ªè¦æ ¹æ®ä½ çš„éœ€æ±‚æ¥çœ‹ï¼Œç”¨chanæ¯”è¾ƒå®¹æ˜“åšæˆå¼‚æ­¥çš„ï¼Œå…±äº«å†…å­˜å‘¢æ¯”è¾ƒå®¹æ˜“åšåŒæ­¥çš„è°ƒç”¨ã€‚å½“ç„¶ï¼Œå…¶å®ä¸¤è€…éƒ½å¯ä»¥æ„å»ºåŒæ­¥æˆ–å¼‚æ­¥çš„å¤„ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1553605589,"ip_address":"","comment_id":79962,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"è”¡è€å¸ˆæ‚¨å¥½\nå¤šä¸ªåç¨‹å¹¶å‘çš„å»ä¿®æ”¹ä¸€ä¸ªå˜é‡  éœ€è¦ç”¨é”æˆ–è€…channel\nç”šè‡³ä»¥ä¸‹ä»£ç   å»appendä¸€ä¸ªåˆ‡ç‰‡ æˆ–è€… ç»™mapèµ‹å€¼ éƒ½ä¸è¡Œ\nä¼šå‡ºç° concurrent map writes\n\n\tfor i := 0; i &lt; 100; i++ {\n\t\tgo func(i int) {\n\t\t\tslice = append(slice, 1)\n\t\t\tonlinemap[i] = i\n\n\t\t}(i)\n\t}\né‚£ä¹ˆæˆ‘çš„é—®é¢˜æ¥äº†ï¼š\næ˜¯ä¸æ˜¯ æ„å‘³ç€ç”¨GOå†™æœåŠ¡å™¨çš„æ—¶å€™  å‡ ä¹æ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦åŠ é”æˆ–è€…é€šè¿‡channelæ¥æ“ä½œäº†ï¼Ÿ\næ¯”å¦‚æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªTCPåè®®çš„æœåŠ¡å™¨ï¼Œn, err := conn.Read(buffer)\nè¯»å–è¿‡æ¥çš„buffer ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œå…ˆæ”¾è¿›channelå†è¯´æ˜¯å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444704,"discussion_content":"è¿™ä¸ªè¦æ ¹æ®ä½ çš„éœ€æ±‚æ¥çœ‹ï¼Œç”¨chanæ¯”è¾ƒå®¹æ˜“åšæˆå¼‚æ­¥çš„ï¼Œå…±äº«å†…å­˜å‘¢æ¯”è¾ƒå®¹æ˜“åšåŒæ­¥çš„è°ƒç”¨ã€‚å½“ç„¶ï¼Œå…¶å®ä¸¤è€…éƒ½å¯ä»¥æ„å»ºåŒæ­¥æˆ–å¼‚æ­¥çš„å¤„ç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553605589,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1953243,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epsRcQM1w3rNhv9iaYxz7tDGtFQ6tKCbrjnic2uEAZFyd3TK8Sb24DUic2f845VtP0GnVnfRspwiaH5ug/132","nickname":"Geek_8607a4","note":"","ucode":"493EA87394BDD4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225226,"discussion_content":"å˜é‡ä¸è¢«å¤šä¸ªåç¨‹åŒæ—¶è¯»å†™ï¼Œæ˜¯ä¸ä¼šå‡ºç°å®‰å…¨é—®é¢˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586352758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386755,"user_name":"Geek_c9206f","can_delete":false,"product_type":"c3","uid":3789456,"ip_address":"ä¸Šæµ·","ucode":"C9BC6595682EAE","user_header":"","comment_is_top":false,"comment_ctime":1705481480,"is_pvip":false,"replies":[{"id":141105,"content":"å¯ä»¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1008262,"ctime":1706495062,"ip_address":"åŒ—äº¬","comment_id":386755,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"wg.Done() æ˜¯ä¸æ˜¯å¯ä»¥æ”¾åœ¨deferé‡Œé¢","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":636575,"discussion_content":"å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1706495063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260471,"user_name":"æåœ£æ‚¦","can_delete":false,"product_type":"c3","uid":1638427,"ip_address":"","ucode":"C1786C98824E50","user_header":"https://static001.geekbang.org/account/avatar/00/19/00/1b/eee13196.jpg","comment_is_top":false,"comment_ctime":1605017549,"is_pvip":false,"replies":[{"id":97498,"content":"è¯·æä¾›ä¸€äº›é”™è¯¯ä¿¡æ¯","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1608340121,"ip_address":"","comment_id":260471,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œä¸ºå•¥å®åŠ›ç¨‹åºè¿è¡Œçš„æ—¶å€™å¶å°”ä¼šæŠ¥é”™ï¼Ÿä¸»ç¨‹åºé€€å‡ºï¼Œåç¨‹ä¼šå‡ºé”™ï¼Ÿ\npackage gorutine_test\n\nimport (\n\t&quot;testing&quot;\n)\n\nfunc TestGroutine(t *testing.T) {\n\tfor i := 0; i &lt; 10; i++ {\n\t\tgo func(i int) {\n\t\t\tt.Log(i)\n\t\t}(i)\n\t}\n\n    &#47;&#47; ime.Sleep(time.Millisecond * 50)\n}\n","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509204,"discussion_content":"è¯·æä¾›ä¸€äº›é”™è¯¯ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608340121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1020525,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","nickname":"escray","note":"","ucode":"1F4204930E47C4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365722,"discussion_content":"æˆ‘è¿™é‡Œå¯ä»¥è¿è¡Œï¼Œæ˜¯ä¸æ˜¯ package å†™é”™äº†ï¼Ÿgorutine_test ?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617871259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245666,"user_name":"Geek_9a021c","can_delete":false,"product_type":"c3","uid":1988279,"ip_address":"","ucode":"DB41B43AEAD3F8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI6zpHWIiaWSoY6b99O8QKG1IWhmOEXL8QnMenD3ErtIOUtkXVOd1mRBnvCQ4YoCqaDKDuIVd1Xe7Q/132","comment_is_top":false,"comment_ctime":1599019348,"is_pvip":false,"replies":[{"id":90445,"content":"çœ‹ä½ é”çš„èŒƒå›´å’Œç²’åº¦ï¼Œè®©èƒ½å¹¶è¡Œçš„å°½é‡å¹¶è¡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1599182746,"ip_address":"","comment_id":245666,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"è¿™ä¸ªåç¨‹å®‰å…¨çš„å¾ªç¯è·Ÿä¸ç”¨åç¨‹çš„æ‰§è¡Œæ•ˆç‡ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Œæ„Ÿè§‰è¿™é‡ŒåŠ äº†lockå°±å˜æˆé¡ºåºæ‰§è¡Œå°±ä¸æ˜¯å¹¶å‘äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504950,"discussion_content":"çœ‹ä½ é”çš„èŒƒå›´å’Œç²’åº¦ï¼Œè®©èƒ½å¹¶è¡Œçš„å°½é‡å¹¶è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599182746,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234062,"user_name":"Aprelude","can_delete":false,"product_type":"c3","uid":1658796,"ip_address":"","ucode":"840D3F7A35AEEF","user_header":"https://static001.geekbang.org/account/avatar/00/19/4f/ac/80439ba7.jpg","comment_is_top":false,"comment_ctime":1594569041,"is_pvip":false,"replies":[{"id":87661,"content":"å¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1595767002,"ip_address":"","comment_id":234062,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"go func() {\n\t\t\t&#47;&#47;åœ¨deferé‡Œé¢è¿›è¡Œé‡Šæ”¾é”\n\t\t\tmut.Lock()\n\t\t\tdefer func() {\n\t\t\t\tmut.Unlock()\n\t\t\t}()\n\t\t\tcounter++\n\t\t}()\nè¿™ç§å†™æ³•å¯ä»¥å—","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501261,"discussion_content":"å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595767002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228091,"user_name":"é»„ä¸‰å¯","can_delete":false,"product_type":"c3","uid":1132988,"ip_address":"","ucode":"DDD0ED0C1E419F","user_header":"https://static001.geekbang.org/account/avatar/00/11/49/bc/c324a7de.jpg","comment_is_top":false,"comment_ctime":1592552775,"is_pvip":false,"replies":[{"id":84176,"content":"å®Œå…¨å¯ä»¥å•Šï¼Œä½ å¯ä»¥å¯åŠ¨ä¸åŒåç¨‹ï¼Œè¿™äº›åç¨‹ä¸ºä¸åŒçš„å‡½æ•°å®ç°","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1592638562,"ip_address":"","comment_id":228091,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"è¯·é—®ä¸‹ï¼Œå‡å¦‚æˆ‘æƒ³è¦åƒjavaä¸€æ ·ï¼Œä¸åŒçš„åç¨‹è¿è¡Œä¸åŒçš„é€»è¾‘ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498918,"discussion_content":"å®Œå…¨å¯ä»¥å•Šï¼Œä½ å¯ä»¥å¯åŠ¨ä¸åŒåç¨‹ï¼Œè¿™äº›åç¨‹ä¸ºä¸åŒçš„å‡½æ•°å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592638562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202958,"user_name":"Crazy","can_delete":false,"product_type":"c3","uid":1201383,"ip_address":"","ucode":"B509FCB4498015","user_header":"https://static001.geekbang.org/account/avatar/00/12/54/e7/b756c98f.jpg","comment_is_top":false,"comment_ctime":1586093284,"is_pvip":false,"replies":[{"id":75897,"content":"éœ€è¦çš„ã€‚å¯¹å¯ä»¥ç”¨è¯»å†™é”","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1586138832,"ip_address":"","comment_id":202958,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œåªæœ‰ä¸€ä¸ªåç¨‹å†™ï¼Œå¤šä¸ªåç¨‹è¯»ï¼Œè¿™ç§æƒ…å†µä¸‹éœ€ä¸éœ€è¦åŠ é”ï¼Ÿè¯»å†™é”ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490717,"discussion_content":"éœ€è¦çš„ã€‚å¯¹å¯ä»¥ç”¨è¯»å†™é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586138832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136103,"user_name":"é¢å‘åŠ è–ªå­¦ä¹ ","can_delete":false,"product_type":"c3","uid":1108117,"ip_address":"","ucode":"5164A1DF058AC5","user_header":"https://static001.geekbang.org/account/avatar/00/10/e8/95/13b88119.jpg","comment_is_top":false,"comment_ctime":1569365493,"is_pvip":false,"replies":[{"id":52479,"content":"æ²¡é”™ã€‚å¯¹åº”çš„ã€‚ä¸æ˜¯ä¸€æ¥åˆ°å°±è§£é™¤wait","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1569543308,"ip_address":"","comment_id":136103,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"è¯·æ•™è€å¸ˆï¼Œwaitgroupæ˜¯æ¯æ¬¡add(1)ï¼Œdone(),å¯¹åº”çš„å—?ä¸æ˜¯ä¸€æ¥åˆ°doneç¨‹åºå°±è·³åˆ°waitåæ‰§è¡Œå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468461,"discussion_content":"æ²¡é”™ã€‚å¯¹åº”çš„ã€‚ä¸æ˜¯ä¸€æ¥åˆ°å°±è§£é™¤wait","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569543308,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1890825,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/da/09/5fc3b526.jpg","nickname":"éƒ­æ³½é‘«ğŸ¤","note":"","ucode":"40B9981EEC524F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652041,"discussion_content":"// Done decrements the [WaitGroup] counter by one.\nfunc (wg *WaitGroup) Done() {\n\twg.Add(-1)\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1728101180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":89586,"user_name":"å—¯å“¼","can_delete":false,"product_type":"c3","uid":1196748,"ip_address":"","ucode":"AA6464F7BA9A1A","user_header":"https://static001.geekbang.org/account/avatar/00/12/42/cc/505a9c3d.jpg","comment_is_top":false,"comment_ctime":1556227703,"is_pvip":false,"replies":[{"id":32186,"content":"å› ä¸ºè¯»åˆ°è„æ•°æ®ï¼ˆå³åˆ«çš„åç¨‹å·²ç»æ›´æ–°äº†ï¼Œä½†æ˜¯å½“å‰åç¨‹ä¸çŸ¥é“ï¼‰æ‰€ä»¥ï¼Œè¦†ç›–äº†åˆ«äººçš„æ›´æ–°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1556282886,"ip_address":"","comment_id":89586,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·é—®ä¸€ä¸‹ä¸€å¼€å§‹çº¿ç¨‹ä¸å®‰å…¨çš„æ—¶å€™ä¸ºä»€ä¹ˆcountä¼šæ¯”5000å°‘å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448183,"discussion_content":"å› ä¸ºè¯»åˆ°è„æ•°æ®ï¼ˆå³åˆ«çš„åç¨‹å·²ç»æ›´æ–°äº†ï¼Œä½†æ˜¯å½“å‰åç¨‹ä¸çŸ¥é“ï¼‰æ‰€ä»¥ï¼Œè¦†ç›–äº†åˆ«äººçš„æ›´æ–°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556282886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022267,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/3b/791d0f5e.jpg","nickname":"ç‹å…ˆæ£®","note":"","ucode":"1AF1A395107479","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72635,"discussion_content":"æˆ‘ä¹Ÿæ²¡ææ‡‚è¿™å— è¿˜å¾—å»çœ‹ä¹¦æˆ–googleï¼Œæ„Ÿè§‰è¿™å—å…±äº«å†…å­˜ä¸ºä»€ä¹ˆå°‘äº5000ä¸€ç¬”å¸¦è¿‡äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575510110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1953243,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epsRcQM1w3rNhv9iaYxz7tDGtFQ6tKCbrjnic2uEAZFyd3TK8Sb24DUic2f845VtP0GnVnfRspwiaH5ug/132","nickname":"Geek_8607a4","note":"","ucode":"493EA87394BDD4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1022267,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/3b/791d0f5e.jpg","nickname":"ç‹å…ˆæ£®","note":"","ucode":"1AF1A395107479","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225240,"discussion_content":"å¯ä»¥ç†è§£counter++æ˜¯ä¸¤æ­¥æ“ä½œï¼Œè¿™ä¸¤æ­¥æ“ä½œå¹¶ä¸æ˜¯åŸå­æ“ä½œã€‚aåç¨‹å’Œbåç¨‹åŒæ—¶æ‹¿åˆ°counterçš„å‰¯æœ¬å€¼ï¼Œå‡è®¾å€¼æ˜¯5ï¼Œå„è‡ªéƒ½åœ¨5ä¸ŠåŠ 1ï¼Œç„¶åæ¥ä¸‹æ¥å†™å›å»6ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586353118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":72635,"ip_address":"","group_id":0},"score":225240,"extra":""}]}]},{"had_liked":false,"id":78420,"user_name":"é¢æœå¤§æµ·æ˜¥æš–èŠ±å¼€","can_delete":false,"product_type":"c3","uid":1118924,"ip_address":"","ucode":"F9F9F53D05304B","user_header":"https://static001.geekbang.org/account/avatar/00/11/12/cc/6a08cf26.jpg","comment_is_top":false,"comment_ctime":1553143770,"is_pvip":false,"replies":[{"id":28592,"content":"å¾ˆå¥½çš„æ€è€ƒã€‚ä½†åªå¯èƒ½æ˜¯æœ€åä¸€ä¸ªï¼Œå› ä¸ºè¦æƒ³æ‰§è¡Œåˆ°wg.Doneï¼ˆï¼‰å°±å¿…é¡»å¾—åˆ°é”ï¼ŒåŒæ—¶ï¼Œåªæœ‰ä¸€ä¸ªæºç¨‹ä¼šè·å¾—é”ï¼Œå¿…é¡»ç­‰å…¶ä»–æºç¨‹Unlockï¼Œè€Œunlockåˆåœ¨æœ€åä¸€æ­¥ã€‚æ‰€ä»¥ï¼Œcounterçš„ç»“æœä¹Ÿä¸ä¼šé”™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1553180366,"ip_address":"","comment_id":78420,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"è¯´é”™äº†ã€‚æ˜¯æœ‰å¯èƒ½ nä¸ª (n&gt;0 &amp;&amp; n&lt;=5000) æºç¨‹æ²¡æœ‰æ­£å¸¸æ‰§è¡Œå®Œï¼Œä¸»çº¿ç¨‹å°±é€€å‡ºäº†ï¼Œçœ‹deferé‡Œçš„é€»è¾‘å§ã€‚","like_count":0,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"è”¡è¶…","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444088,"discussion_content":"å¾ˆå¥½çš„æ€è€ƒã€‚ä½†åªå¯èƒ½æ˜¯æœ€åä¸€ä¸ªï¼Œå› ä¸ºè¦æƒ³æ‰§è¡Œåˆ°wg.Doneï¼ˆï¼‰å°±å¿…é¡»å¾—åˆ°é”ï¼ŒåŒæ—¶ï¼Œåªæœ‰ä¸€ä¸ªæºç¨‹ä¼šè·å¾—é”ï¼Œå¿…é¡»ç­‰å…¶ä»–æºç¨‹Unlockï¼Œè€Œunlockåˆåœ¨æœ€åä¸€æ­¥ã€‚æ‰€ä»¥ï¼Œcounterçš„ç»“æœä¹Ÿä¸ä¼šé”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553180366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101222,"user_name":"Eden","can_delete":false,"product_type":"c3","uid":1197733,"ip_address":"","ucode":"BE0AD731E5EF5E","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/a5/51449de6.jpg","comment_is_top":false,"comment_ctime":1559744603,"is_pvip":false,"replies":null,"discussion_count":4,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"åˆå­¦è¯­è¨€ï¼Œç”¨ä¸­æ–‡è§£é‡Šäº†ä¸€ä¸‹ï¼Œä¾¿äºç†è§£\n```go\nfunc TestCounter(t *testing.T) {\n\tcounter := 0\n\tfor i := 0; i &lt; 5000; i++ { &#47;&#47; å¾ªç¯å‡º 5000 ä¸ªåç¨‹ç¨‹åº\n\t\tgo func() { &#47;&#47;æ‰§è¡Œè¿™ä¸ªåç¨‹åŒ¿åå‡½æ•°ç»™ counter è‡ªå¢\n\t\t\tcounter++\n\t\t}()\n\t}\n\t&#47;&#47; æ‰§è¡Œå®Œæˆåå¾—åˆ°çš„ç»“æœå¹¶ä¸æ˜¯ 5000ï¼Œè¿™æ˜¯å› ä¸ºè¿™ 5000 ä¸ªå¹¶å‘åç¨‹éƒ½åœ¨æŠ¢ç”¨ counter,\n\t&#47;&#47; è¿™æ ·çš„è¯ï¼Œæ•´ä¸ªç¨‹åºæ˜¯ä¸å®‰å…¨çš„,æˆ‘ä»¬éœ€è¦å¯¹ counter çš„å…±äº«å†…å­˜åšé”çš„ä¿æŠ¤\n\ttime.Sleep(1 * time.Second)\n\tt.Logf(&quot;counter = %d&quot;, counter)\n}\n\nfunc TestCounterThreadSafe(t *testing.T) {\n\tvar mut sync.Mutex &#47;&#47; âš ï¸  1. å¢åŠ ä¸€ä¸ªäº’æ–¥é”\n\tcounter := 0\n\tfor i := 0; i &lt; 5000; i++ {\n\t\tgo func() {\n\t\t\tdefer func() { &#47;&#47; âš ï¸  3. ä½¿ç”¨ defer ç”¨äºé‡Šæ”¾èµ„æºï¼Œæ­¤å¤„ç”¨äºè§£é™¤é”\n\t\t\t\tmut.Unlock()\n\t\t\t}()\n\t\t\tmut.Lock() &#47;&#47; âš ï¸  2. counter è‡ªå¢å‰åŠ é”\n\t\t\tcounter++\n\t\t}()\n\t}\n\ttime.Sleep(1 * time.Second)\n\t&#47;&#47; åŠ è¿™ä¸ªå»¶æ—¶æ˜¯æ‹…å¿ƒç¨‹åºä¸€ä¸‹å°±è·‘å®Œäº†ï¼Œç”šè‡³åç¨‹è¿˜æ²¡æœ‰è·‘å®Œï¼Œ\n\t&#47;&#47; ç»™ä¸€ä¸ªå®šæ—¶è‚¯å®šä¸æ˜¯ä¸‡å…¨ä¹‹ç­–ï¼Œä½†æ˜¯ä½¿ç”¨ waitGroup å°±å¥½åŠå•¦\n\tt.Logf(&quot;counter = %d&quot;, counter)\n}\n\nfunc TestCounterThreadSafeWaitGroup(t *testing.T) {\n\tvar mut sync.Mutex\n\tvar wg sync.WaitGroup &#47;&#47; 1.å£°æ˜ä¸€ä¸ªç­‰å¾…ç»„\n\tcounter := 0\n\tfor i := 0; i &lt; 5000; i++ {\n\t\twg.Add(1) &#47;&#47; 3.æ¯å¯åŠ¨ä¸€ä¸ªåç¨‹éƒ½æ–°å¢åŠ ä¸€ä¸ªç­‰å¾…\n\t\tgo func() {\n\t\t\tdefer func() {\n\t\t\t\tmut.Unlock()\n\t\t\t}()\n\t\t\tmut.Lock()\n\t\t\tcounter++\n\t\t\twg.Done() &#47;&#47; 4.è¿™ä¸ªç­‰å¾…å®Œæˆäº†\n\t\t}()\n\t}\n\twg.Wait()\n\t&#47;&#47; 2.è¿™é‡Œç­‰å¾…ä¸Šé¢æ‰€æœ‰çš„ç­‰å¾…å®Œæˆåé©¬ä¸Šèµ°ä¸‹é¢çš„ç¨‹åº\n\t&#47;&#47; è¿™æ ·å°±å¯ä»¥å‡†ç¡®çš„ç­‰å¾…åç¨‹æ‰§è¡Œäº†\n\tt.Logf(&quot;counter = %d&quot;, counter)\n}\n\n```","like_count":24,"discussions":[{"author":{"id":2853200,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/89/50/aee9fdab.jpg","nickname":"å°æ°","note":"","ucode":"BBDF8E9F348F65","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544818,"discussion_content":"å¾ˆæ£’ï¼Œæˆ‘ä¹Ÿæ˜¯è¿™æ ·çš„å­¦ä¹ ï¼Œç„¶åä¸Šä¼ åˆ°gtihubã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641723192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1359127,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqlqI5gE1MuPtKj6TgRBdoRnK2rKK3pGyVjkMia2431JVSgr0O4ScrqLoLe0T3mH8s6G04qtdk6zNg/132","nickname":"InfoQ_339e6b2a10f3","note":"","ucode":"B374F4812603FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351885,"discussion_content":"æˆ‘å°±è¯´æˆ‘ä¸ºå•¥ç»“æœæ€»ä¸å¯¹ï¼ŒåŸæ¥æ˜¯æ²¡ä¼‘çœ å¯¼è‡´æºç¨‹è¿˜æ²¡è·‘èµ·æ¥ç¨‹åºå°±ç»“æŸäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614513138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1573551,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI2huicolVwLfbbVsfhmLdGyTV2I6QMHdGm67ZdRkXTfmPJQd4Yibjge4dlrxOfAibeqLN48b1RVRdGw/132","nickname":"æ–°é¾™","note":"","ucode":"B9202437EBC198","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319851,"discussion_content":"çœŸæ£’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604143823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1105161,"avatar":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","nickname":"helloworld","note":"","ucode":"1EECCA0F43E278","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47313,"discussion_content":"å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573311341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81289,"user_name":"Vincent","can_delete":false,"product_type":"c3","uid":1437404,"ip_address":"","ucode":"EC72C58FE32369","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/dc/67838c05.jpg","comment_is_top":false,"comment_ctime":1553849673,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"å®éªŒäº†ä¸‹LinåŒå­¦çš„é—®é¢˜ï¼šè§£é”è¿˜æ²¡æœ‰é”çš„muï¼Œè¿è¡ŒæŠ¥é”™ï¼\nfunc TestCounterThreadSafe(t *testing.T){\n\tvar mu sync.Mutex\n\tcounter :=0\n\tfor i:=0; i&lt;5000;i++{\n\t\tgo func(){\n\t\t\tdefer func(){\n\t\t\t\tmu.Unlock()\n\t\t\t}()\n\t\t\tpanic(&quot;SomeThing Wrong!&quot;)\n\t\t\tmu.Lock()\n\t\t\tcounter++\n\t\t}()\n\t}\n\t&#47;&#47;time.Sleep(time.Microsecond*1)\n\tt.Logf(&quot;Counter=%v&quot;,counter)\n}\n\nè¿è¡Œå‡ºé”™ï¼š\n=== RUN   TestCounterThreadSafe\nfatal error: sync: unlock of unlocked mutex","like_count":7,"discussions":[{"author":{"id":1576577,"avatar":"https://static001.geekbang.org/account/avatar/00/18/0e/81/15c29b59.jpg","nickname":"æˆ–è·ƒåœ¨æ¸Š","note":"","ucode":"FE1260C842B1F9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2935,"discussion_content":"å› ä¸ºä½ åœ¨åŠ é”ä¹‹å‰panicäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1564042795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1494158,"avatar":"https://static001.geekbang.org/account/avatar/00/16/cc/8e/eb8e4669.jpg","nickname":"Enigma","note":"","ucode":"533A791F3176CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4097,"discussion_content":"æ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯\nmu.Lock()\ndefer mu.Unlock()","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1565109998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2890901,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/1c/95/3d8920c9.jpg","nickname":"abcdabcd999","note":"","ucode":"E1D9902737F544","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1494158,"avatar":"https://static001.geekbang.org/account/avatar/00/16/cc/8e/eb8e4669.jpg","nickname":"Enigma","note":"","ucode":"533A791F3176CA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600430,"discussion_content":"æ­£è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674354640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4097,"ip_address":"å±±è¥¿","group_id":0},"score":600430,"extra":""}]}]},{"had_liked":false,"id":82152,"user_name":"NIXUS","can_delete":false,"product_type":"c3","uid":1000060,"ip_address":"","ucode":"853763C229A5AA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/7c/8ef14715.jpg","comment_is_top":false,"comment_ctime":1554131577,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"è€å¸ˆ, defer åçš„ä»£ç :\ndefer mut.Unlock()  å’Œ  defer func() { mut.Unlock() }()\næœ‰ä»€ä¹ˆåŒºåˆ«å—?","like_count":5,"discussions":[{"author":{"id":2890901,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/1c/95/3d8920c9.jpg","nickname":"abcdabcd999","note":"","ucode":"E1D9902737F544","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600431,"discussion_content":"æˆ‘è§è¿‡çš„éƒ½è¿™ä¹ˆå†™ defer mut.Unlock() è€Œä¸”å¾ˆå°‘ç”¨ mutex å¤§å®¶éƒ½ç”¨ rwlock","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674354668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2853200,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/89/50/aee9fdab.jpg","nickname":"å°æ°","note":"","ucode":"BBDF8E9F348F65","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544819,"discussion_content":"ä½ å¯ä»¥å°è¯•è¿è¡Œä¸€ä¸‹ï¼Œæˆ‘è¿è¡Œæ˜¯æ²¡æœ‰åŒºåˆ«çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641723329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1433247,"avatar":"https://static001.geekbang.org/account/avatar/00/15/de/9f/b6c59a75.jpg","nickname":"dustï¼","note":"","ucode":"7ADCCC7985B381","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":178726,"discussion_content":"æ²¡æœ‰åŒºåˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582192805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282030,"user_name":"ç”³","can_delete":false,"product_type":"c3","uid":2033634,"ip_address":"","ucode":"CE7BFCF552B4F1","user_header":"https://static001.geekbang.org/account/avatar/00/1f/07/e2/32c9a634.jpg","comment_is_top":false,"comment_ctime":1615022245,"is_pvip":false,"replies":null,"discussion_count":4,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"```\nfor i := 0; i &lt; 5000; i++ {\n\tcounter++\n}\n```\nè¿™æ ·ä¹Ÿèƒ½å¾—åˆ°5000ï¼Œè¿™é‡Œç”¨åç¨‹çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦ç”¨go func() {counter++}}()\n","like_count":3,"discussions":[{"author":{"id":2890901,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/1c/95/3d8920c9.jpg","nickname":"abcdabcd999","note":"","ucode":"E1D9902737F544","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600427,"discussion_content":"ä½ è¿™æ˜¯å•çº¿ç¨‹ï¼Œè·Ÿ goroutine æœ‰ä»€ä¹ˆå…³ç³» è¿™èŠ‚è¯¾åœ¨ demo goroutine è¯¶ ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674353670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2101081,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI5a9ianL7JOjmEKTEw075rKDeBD0YqD5cBlgY6nbdPiaskIVqa1HHYm7pibeVnoPqibEWr6a3rqc0xdA/132","nickname":"ä½•æ—¶ä¸æ¼‚æ³Š","note":"","ucode":"4C47064E5B6C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581500,"discussion_content":"æˆ‘ç†è§£åº”è¯¥å°±æ˜¯ç”¨è¿™ä¸ªå½“ä¸ªä¾‹å­å§ï¼Œå¦‚æœçœŸçš„æ˜¯æ•°å¢åŠ åº”è¯¥æ²¡å¿…è¦å¼€åç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658818214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2403351,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ac/17/430ddd05.jpg","nickname":"ğŸŸ","note":"","ucode":"F61C3F67E4A2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542488,"discussion_content":"ä½ è¿™ç›¸å½“äºæ˜¯ä¸€ä¸ªçº¿ç¨‹ç»™ä¸€ä¸ªå†…å­˜åŠ äº†5000æ¬¡ å½“ç„¶æ²¡é—®é¢˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640766409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046041,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f6/19/8c4f63f2.jpg","nickname":"æ¢é‘«è¾‰","note":"","ucode":"3A57C936D6F4C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369726,"discussion_content":"å¤šè¯•å‡ æ¬¡ï¼Œæˆ–è€…æŠŠ5000æ”¹çš„æ›´å¤§ä¸€ç‚¹è¯•è¯•ï¼Ÿ\næˆ‘ç¬¬ä¸€æ¬¡ä¹Ÿæ˜¯è¿™æ ·ï¼Œåæ¥å†™å®Œç¬¬äºŒä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå†å»æ‰§è¡Œç¬¬ä¸€ä¸ªæ—¶å€™ï¼Œå‘ç°ä¸åˆ°5000äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619142670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211022,"user_name":"å…‰","can_delete":false,"product_type":"c3","uid":1447871,"ip_address":"","ucode":"A52F6E3F18EA4B","user_header":"https://static001.geekbang.org/account/avatar/00/16/17/bf/f35bdd6e.jpg","comment_is_top":false,"comment_ctime":1587882510,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":3,"product_id":100024001,"comment_content":"var mu sync.Mutex\nè¿™ä¸ªmuä¸éœ€è¦åˆå§‹åŒ–å°±å¯ä»¥ç›´æ¥ç”¨å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":2890901,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/1c/95/3d8920c9.jpg","nickname":"abcdabcd999","note":"","ucode":"E1D9902737F544","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600426,"discussion_content":"ä¸ºåˆå§‹åŒ–å°±æ˜¯ 0 åˆå§‹åŒ–ä¹Ÿæ²¡é—®é¢˜ var rwlock *sync.RWMutex = new(sync.RWMutex) æˆ–è€… var rwlock sync.RWMutex = sync.RWMutex{} æŒ‰ç…§ä½ æƒ³çš„åˆå§‹åŒ– éšä¾¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674353632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2403351,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ac/17/430ddd05.jpg","nickname":"ğŸŸ","note":"","ucode":"F61C3F67E4A2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542490,"discussion_content":"https://blog.csdn.net/qq_42956653/article/details/121346340ã€‚å…³äºMutexçš„æ•°æ®ç»“æ„ é‚£å—å„¿ è§£ç­”äº†ä½ è¿™ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640766772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1445907,"avatar":"https://static001.geekbang.org/account/avatar/00/16/10/13/a5194058.jpg","nickname":"é™ˆç£Š","note":"","ucode":"F69485EA1DCC7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535869,"discussion_content":"è¿™é‡Œæˆ‘ä¹Ÿæ²¡ææ‡‚ï¼Œä¹‹å‰æ²¡æè¿‡è¿™ç§å†™æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638585687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221572,"user_name":"æ±","can_delete":false,"product_type":"c3","uid":1657218,"ip_address":"","ucode":"B59125E442234D","user_header":"https://static001.geekbang.org/account/avatar/00/19/49/82/e34f9ce9.jpg","comment_is_top":false,"comment_ctime":1590543205,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"å¦‚æœä¸ç”¨time.Sleep()ï¼Œä¹Ÿä¼šå¯¼è‡´è®¡æ•°ä¸è¶³","like_count":2,"discussions":[{"author":{"id":2890901,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/1c/95/3d8920c9.jpg","nickname":"abcdabcd999","note":"","ucode":"E1D9902737F544","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600428,"discussion_content":"é‚£ä¸æ˜¯ time.Sleep å¯¼è‡´çš„ æ ¹æºæ²¡æ‰¾å¯¹ å…„å¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674353716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348231,"user_name":"é’æ¢…ç…®é©¬","can_delete":false,"product_type":"c3","uid":1033108,"ip_address":"","ucode":"3CD7A2BA87E7D5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c3/94/3b039dd8.jpg","comment_is_top":false,"comment_ctime":1654853199,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"ç¨å¾®åŒ…è£…äº†ä¸‹\n\ntype NewCounter struct {\n\tsync.WaitGroup\n\tsync.Mutex\n\tValue uint32\n}\n\nfunc TestCalCounter(t *testing.T) {\n\tvar count NewCounter\n\n\tfor index := 0; index &lt; 10000; index++ {\n\t\tcount.Add(1)\n\t\tgo func() {\n\t\t\tdefer count.Unlock()\n\t\t\tcount.Lock()\n\t\t\tcount.Value++\n\t\t\tcount.Done()\n\t\t}()\n\t}\n\tcount.Wait()\n\tt.Logf(&quot;cal value result is : %d&quot;, count.Value)\n}","like_count":0},{"had_liked":false,"id":324416,"user_name":"Geek__38012c6589d3","can_delete":false,"product_type":"c3","uid":1454933,"ip_address":"","ucode":"85A08CF5E70C73","user_header":"","comment_is_top":false,"comment_ctime":1638424737,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"è¿™èŠ‚è®²çš„çœŸå¥½","like_count":0},{"had_liked":false,"id":319368,"user_name":"å˜šå•µå˜šæœ±","can_delete":false,"product_type":"c3","uid":1233039,"ip_address":"","ucode":"3CC39C5E22DC61","user_header":"https://static001.geekbang.org/account/avatar/00/12/d0/8f/eda69272.jpg","comment_is_top":false,"comment_ctime":1635761338,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"wg.add æˆ‘è§‰å¾—åº”è¯¥æ”¾åˆ°éå†çš„å¤–é¢,æœ‰å¯èƒ½åŠ äº† 4000 ä¸ª wait äº† 4000 ä¸ª,ç„¶åæ­£å¸¸ç»“æŸ","like_count":0},{"had_liked":false,"id":312874,"user_name":"ç™½èœé¦…å¤§åŒ…å­","can_delete":false,"product_type":"c3","uid":2284455,"ip_address":"","ucode":"68400A5EDC4756","user_header":"https://static001.geekbang.org/account/avatar/00/22/db/a7/52f13f0a.jpg","comment_is_top":false,"comment_ctime":1632074924,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"æ€ä¹ˆä¸€ç›´è¯´javaï¼Ÿä½ è®²goè¯´javaå¹²ä»€ä¹ˆï¼Ÿæ¥å­¦goçš„å¥½å—ï¼Ÿåˆ«é‚£ä¹ˆå¤šåºŸè¯","like_count":0},{"had_liked":false,"id":305746,"user_name":"å™¼é‡Œå•ªå•¦å•ªå•¦å™¼é‡Œå™¼é‡Œå•ªå•¦","can_delete":false,"product_type":"c3","uid":1109143,"ip_address":"","ucode":"2A4B86D38F7E11","user_header":"https://static001.geekbang.org/account/avatar/00/10/ec/97/58e7bc9a.jpg","comment_is_top":false,"comment_ctime":1628149136,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"è€å¸ˆæˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼ŒwaitGroupä¹Ÿå¯ä»¥å½“äº’æ–¥é”ç”¨\nfunc TestCounterWaitGroup(t *testing.T) {\n\tvar wg sync.WaitGroup\n\tcounter := 0\n\tfor i := 0; i &lt; 5000; i++ {\n\t\twg.Add(1) &#47;&#47; æ¯å¯åŠ¨ä¸€ä¸ªåç¨‹å¢åŠ ä¸€ä¸ªç­‰å¾…\n\t\tgo func() {\n\t\t\tcounter++\n\t\t\twg.Done()\n\t\t}()\n\t\twg.Wait()\n\t}\n\tt.Logf(&quot;counter = %d&quot;, counter)\n}","like_count":0,"discussions":[{"author":{"id":2403351,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ac/17/430ddd05.jpg","nickname":"ğŸŸ","note":"","ucode":"F61C3F67E4A2E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542498,"discussion_content":"å“‡ ç¡®å®å¯ä»¥ï¼Œè¿™ä¸ªå’Œ äº’æ–¥é” æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿ è¿™ä¹ˆç”¨ä¼šä¸ä¼šæœ‰å•¥é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640768496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289681,"user_name":"æ¢é‘«è¾‰","can_delete":false,"product_type":"c3","uid":1046041,"ip_address":"","ucode":"3A57C936D6F4C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/19/8c4f63f2.jpg","comment_is_top":false,"comment_ctime":1619142226,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"ä¸‹é¢è¿™æ®µä»£ç ï¼Œæ²¡æœ‰åŠ é”ã€‚åœ¨æˆ‘çš„ç¯å¢ƒä¸‹ï¼Œç›´æ¥è¾“å‡ºçš„å°±æ˜¯5000.\né»˜è®¤éƒ½çº¿ç¨‹å®‰å…¨äº†ï¼Ÿ\n\nç¯å¢ƒå¦‚ä¸‹ï¼š\nGoï¼šgo version go1.16.3 linux&#47;amd64\nOSï¼šCentOS Linux release 7.8.2003 (Core)\n\n\n```\npackage share_mem\n\nimport (\n\t&quot;testing&quot;\n\t&quot;time&quot;\n)\n\nfunc TestSharemem(t *testing.T) {\n\tcounter := 0\n\tfor i := 0; i &lt; 5000; i++ {\n\t\tgo func() {\n\t\t\tcounter++\n\t\t}()\n\t}\n\ttime.Sleep(time.Second * 1)\n\tt.Logf(&quot;counter = %d&quot;, counter)\n}\n\n```","like_count":0,"discussions":[{"author":{"id":1435172,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e6/24/30806a88.jpg","nickname":"right-chen","note":"","ucode":"E0E940E80E7A2D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582807,"discussion_content":"å†å¤šæµ‹è¯•å‡ éï¼Œæˆ‘è¯•äº†ä½ çš„ä»£ç ï¼Œæ‰§è¡Œåè¾“å‡ºï¼šcounter = 4870","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659683562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287299,"user_name":"escray","can_delete":false,"product_type":"c3","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1617871911,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"è§†é¢‘ä¸­çš„ä»£ç å’Œè¯¾ä»¶ä¸Šçš„ä¸å¤ªä¸€æ ·\n\n```\n&#47;&#47; è§†é¢‘\nfor i := 0; i &lt; 5000; i++ {\n    wg.Add(1)\n    go func() {\n        defer func ()  {\n            mut.Unlock()\n        }()\n        mut.Lock()\n        counter++\n        wg.Done()\n    }()\n}\nwg.Wait()\n\n&#47;&#47; è¯¾ä»¶\nfor i := 0; i &lt; 5000; i++ {\n    wg.Add(1)\n    go func() {\n        defer func ()  {\n            mut.Unlock()\n            wg.Done()\n        }()\n        mut.Lock()\n        counter++        \n    }()\n}\nwg.Wait()\n```\n\nä¸»è¦çš„å·®åˆ«å®åœ¨ wg.Done() çš„ä½ç½®ï¼Œç®€å•æµ‹è¯•äº†ä¸€ä¸‹ï¼Œä¸¤ç§æ–¹æ³•çš„è¾“å‡ºç»“æœéƒ½æ˜¯å¯¹çš„ã€‚\n\næŒ‰ç…§è€å¸ˆåœ¨ç•™è¨€ä¸­çš„å›å¤ï¼Œwg.Done() å’Œ wg.Add(1) åº”è¯¥æ˜¯å¯¹åº”çš„ï¼Œé‚£ä¹ˆè§†é¢‘ä¸­çš„å†™æ³•åº”è¯¥æ›´ç¬¦åˆæœ¬æ„ã€‚\n\nè€å¸ˆåœ¨è§†é¢‘æœ€åçš„è¡¥å……è¯´æ˜ï¼š\n\nWaitGroup ç›¸å½“äº Java ä¸­çš„ Join\n\nMutex å’Œ RW lock éƒ½æ˜¯å…±äº«å†…å­˜æœºåˆ¶ï¼Œå°½é‡ä½¿ç”¨ RW lock \n\n- ä¸¤ä¸ªè¯»é”ä¸æ˜¯äº’æ–¥é”ï¼Œå…±äº«å†…å­˜\n- ä¸¤ä¸ªå†™é”æ˜¯äº’æ–¥é”","like_count":0},{"had_liked":false,"id":251656,"user_name":"åˆ˜ç¨¹","can_delete":false,"product_type":"c3","uid":1061398,"ip_address":"","ucode":"04E72146C6E68D","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/16/ea9c3cb2.jpg","comment_is_top":false,"comment_ctime":1601775916,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"wg.Done() åº”è¯¥ä¹Ÿæ”¾åœ¨defer é‡Œæ¯”è¾ƒå¥½","like_count":0},{"had_liked":false,"id":245552,"user_name":"ç¨‹é¾™","can_delete":false,"product_type":"c3","uid":1131918,"ip_address":"","ucode":"645516BFF8A96F","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/8e/83bac3bb.jpg","comment_is_top":false,"comment_ctime":1598974937,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100024001,"comment_content":"å…¶å®ç¬¬ä¸‰ä¸ªç”¨wait group å¯ä»¥ä¸ç”¨åŠ é”, è®©å…¶ä»–çš„åç¨‹ å»è¿›è¡Œç­‰å¾… ä¸Šä¸€ä¸ªåç¨‹ç»“æŸå°±å¥½\n```\nfunc TestCounterSafe3(t *testing.T) {\n\tvar counter int\n\tvar wg sync.WaitGroup\n\tfor i := 1; i &lt;= 5000; i++ {\n\t\t&#47;&#47;1. é¦–å…ˆ å¼€å¯ä¸€ä¸ªç­‰å¾…ç»„ ç»™ç­‰å¾…ç»„ +1\n\t\twg.Add(1)\n\t\tgo func() {\n\t\t\tcounter++\n\t\t\t&#47;&#47; æ ‡å¿—ä½è¿›è¡Œ -1\n\t\t\twg.Done()\n\t\t}()\n\t\twg.Wait()\n\t}\n\t&#47;&#47;output: 5000\n\tt.Log(counter)\n}\n```","like_count":0},{"had_liked":false,"id":211025,"user_name":"å…‰","can_delete":false,"product_type":"c3","uid":1447871,"ip_address":"","ucode":"A52F6E3F18EA4B","user_header":"https://static001.geekbang.org/account/avatar/00/16/17/bf/f35bdd6e.jpg","comment_is_top":false,"comment_ctime":1587883019,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"wg.Done() æ˜¯å¦å†™åœ¨defer funcé‡Œé¢æ›´å¥½å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1020525,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","nickname":"escray","note":"","ucode":"1F4204930E47C4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365718,"discussion_content":"wg.Done() æ”¾åœ¨ defer func é‡Œé¢ä¹Ÿèƒ½è¾“å‡ºä¸­ç¡®çš„ç»“æœã€‚\n\næŒ‰ç…§è€å¸ˆåœ¨ç•™è¨€ä¸­çš„å›å¤ï¼Œwg.Done() å’Œ wg.Add(1) åº”è¯¥æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œé‚£ä¹ˆè§†é¢‘ä¸­çš„å†™æ³•åº”è¯¥æ›´ç¬¦åˆæœ¬æ„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617870982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1248307,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/33/c5026169.jpg","nickname":"hiyang","note":"","ucode":"E521EE72C0F247","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268755,"discussion_content":"æœ‰åŒæ ·çš„ç–‘é—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589815899,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90425,"user_name":"éƒ‘æ–‡ç¥¥","can_delete":false,"product_type":"c3","uid":1233073,"ip_address":"","ucode":"730452A9B3376A","user_header":"https://static001.geekbang.org/account/avatar/00/12/d0/b1/87853049.jpg","comment_is_top":false,"comment_ctime":1556516790,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"func TestCounterThreadSafe(t *testing.T){\n    var mu sync.Mutex\n    counter :=0\n    for i:=0; i&lt;5000;i++{\n        go func(){\n            mu.Lock()\n            defer func(){\n                mu.Unlock()\n            }()\n            counter++\n        }()\n    }\n    &#47;&#47;time.Sleep(time.Microsecond*1)\n    t.Logf(&quot;Counter=%v&quot;,counter)\n}\næ‰€ä»¥ç¨‹åºæœ€å¥½æ˜¯è¿™ä¹ˆå†™è§„èŒƒäº›ï¼Œdeferæ”¾åœ¨lockå","like_count":0,"discussions":[{"author":{"id":1953243,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epsRcQM1w3rNhv9iaYxz7tDGtFQ6tKCbrjnic2uEAZFyd3TK8Sb24DUic2f845VtP0GnVnfRspwiaH5ug/132","nickname":"Geek_8607a4","note":"","ucode":"493EA87394BDD4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":225232,"discussion_content":"å¹¶æ²¡æœ‰ä»»ä½•åŒºåˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586352836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78416,"user_name":"é¢æœå¤§æµ·æ˜¥æš–èŠ±å¼€","can_delete":false,"product_type":"c3","uid":1118924,"ip_address":"","ucode":"F9F9F53D05304B","user_header":"https://static001.geekbang.org/account/avatar/00/11/12/cc/6a08cf26.jpg","comment_is_top":false,"comment_ctime":1553143115,"is_pvip":false,"replies":null,"discussion_count":3,"race_medal":0,"score":5,"product_id":100024001,"comment_content":"è€å¸ˆï¼Œå¦‚æœå°†wg.Done()æŒ‰æ‚¨çš„å†™æ³•ï¼Œç¬¬5000ä¸ªæ‰§è¡Œmut.Unlock()çš„æºç¨‹ï¼Œæœ‰å¯èƒ½åœ¨ä¸»çº¿ç¨‹é€€å‡ºæ—¶è¿˜æ²¡æœ‰æ‰§è¡Œå®Œã€‚è¿™é‡Œdeferé€»è¾‘æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæ˜¯è€—æ—¶çš„æ˜¯ä¸æ˜¯å¯ä»¥æŒªè¿‡æ¥ã€‚è¯·è€å¸ˆç™¾å¿™ä¹‹ä¸­æ‰¹è¯„æŒ‡æ­£ã€‚\n\tgo func() {\n\t\t\tdefer func() {\n\t\t\t\tmut.Unlock()\n                               wg.Done() &#47;&#47; ç§»åˆ°è¿™é‡Œ\n\t\t\t}()\n\t\t\tmut.Lock()\n\t\t\tcounter++\n\t\t\twg.Done()\n\t\t}()","like_count":0,"discussions":[{"author":{"id":2890901,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/1c/95/3d8920c9.jpg","nickname":"abcdabcd999","note":"","ucode":"E1D9902737F544","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600433,"discussion_content":"è¿™æ²¡å•¥ä¼˜é›…ä¸ä¼˜é›…çš„ï¼Œä½ ä¸»çº¿ç¨‹éƒ½é€€å‡ºäº†ï¼Œè¿™äº› goroutine èµ„æºéƒ½è¢«æ¸…ç†äº†ï¼Œä½ å†™å“ªé‡Œä¸éƒ½ä¸€æ ·æ²¡ä»€ä¹ˆç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674355897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1433247,"avatar":"https://static001.geekbang.org/account/avatar/00/15/de/9f/b6c59a75.jpg","nickname":"dustï¼","note":"","ucode":"7ADCCC7985B381","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":178774,"discussion_content":"è¿™æ ·å†™æ›´å¥½ï¼Œè€å¸ˆå†™çš„ä¹Ÿæ²¡é—®é¢˜ã€‚\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582195982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1071739,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5a/7b/8d1a1e1d.jpg","nickname":"å¤§è„¸çŒ«","note":"","ucode":"A4AECC1C80C8F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2922,"discussion_content":"æˆ‘å°±æ˜¯è¿™æ ·å®ç°çš„ï¼Œæš‚æ—¶æ²¡å‘ç°é—®é¢˜ï¼Œæˆ‘è§‰å¾—è¿™ä¹ˆåšæ›´ä¼˜é›…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564039721,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}