{"id":623274,"title":"01ï½œModulesï¼ˆä¸Šï¼‰ï¼šC++æ¨¡å—åŒ–é—®é¢˜çš„å‰ä¸–ä»Šç”Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¢èª‰å£°ã€‚</p><p>ä»Šå¤©æ˜¯ç¬¬ä¸€è®²ï¼Œæˆ‘ä»¬ä¼šä»C++20ä¸­çš„æ ¸å¿ƒç‰¹æ€§å˜æ›´â€”â€”Modulesæ¨¡å—å¼€å§‹ï¼Œäº†è§£ç°ä»£C++çš„ç¼–ç¨‹èŒƒå¼ã€ç¼–ç¨‹æ€æƒ³åŠç°å®é—®é¢˜è§£å†³æ–¹æ³•ä¸Šçš„é©æ–°ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ— è®ºæ˜¯ç¼–å†™Cè¿˜æ˜¯C++ç¨‹åºï¼Œæ€»å°‘ä¸äº†ä½¿ç”¨includeå¤´æ–‡ä»¶æœºåˆ¶ï¼Œè¿™æ˜¯C/C++ç¼–ç¨‹ä¸­ç»„ç»‡ä»£ç çš„æœ€åŸºæœ¬æ–¹å¼ï¼Œç”¨æ³•ç®€å•ã€ç›´æ¥ï¼Œè€Œä¸”ç¬¦åˆç›´è§‰ã€‚ä½†å¾ˆå¤šäººä¸çŸ¥é“çš„æ˜¯ï¼Œå…¶å®includeå¤´æ–‡ä»¶æœºåˆ¶ä¸ä»…æœ‰å‘ï¼Œåœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­è¿˜ä¼šå‡ºç°ä¸€äº›éš¾ä»¥è§£å†³çš„ä¸¤éš¾é—®é¢˜ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä»è¿™ä¸ªâ€œç®€å•â€æœºåˆ¶å¼€å§‹æ¢è®¨ä»£ç ç»„ç»‡æ–¹å¼çš„é—¨é“ï¼Œçœ‹çœ‹é‡Œé¢ç©¶ç«Ÿå­˜åœ¨å“ªäº›é—®é¢˜ï¼Œè¯­è¨€è®¾è®¡è€…å’Œå¹¿å¤§è¯­è¨€ä½¿ç”¨è€…åˆæ˜¯å¦‚ä½•åº”å¯¹çš„ï¼Œå¯¹è¿™äº›é—®é¢˜çš„æ€è€ƒï¼Œå°†ä¸²è”èµ·æˆ‘ä»¬å…³äºC++ä»£ç ç»„ç»‡æ–¹æ¡ˆçš„æ‰€æœ‰çŸ¥è¯†ç‚¹ï¼Œä¹Ÿç»ˆå°†å¼•å‡ºæˆ‘ä»¬çš„ä¸»è§’â€”â€”Modulesï¼ˆè¯¾ç¨‹é…å¥—ä»£ç ç‚¹å‡»<a href=\"https://github.com/samblg/cpp20-plus-indepth\">è¿™é‡Œ</a>è·å–ï¼‰ã€‚</p><p>é¦–å…ˆæ¥çœ‹çœ‹æ•´ä¸ªæ•…äº‹çš„èƒŒæ™¯ï¼Œincludeå¤´æ–‡ä»¶æœºåˆ¶ï¼Œå®ƒçš„å‡ºç°æ˜¯ä¸ºäº†ä»€ä¹ˆï¼Ÿ</p><h2>ä¸‡ç‰©å§‹äºinclude</h2><p>ä½œä¸ºCè¯­è¨€çš„è¶…é›†ï¼ŒC++è¯­è¨€ä»è®¾è®¡ä¹‹åˆå°±æ²¿è¢­äº†Cè¯­è¨€çš„includeå¤´æ–‡ä»¶æœºåˆ¶ï¼Œå³é€šè¿‡åŒ…å«å¤´æ–‡ä»¶çš„æ–¹å¼æ¥å¼•ç”¨å…¶ä»–ç¬¦å·ï¼ŒåŒ…æ‹¬ç±»å‹å®šä¹‰ã€æ¥å£å£°æ˜è¿™æ ·çš„ä»£ç ï¼Œèµ·åˆ°åˆ†ç¦»ç¬¦å·å®šä¹‰ä¸å…·ä½“å®ç°çš„ä½œç”¨ã€‚</p><p>æ—©æœŸï¼Œèƒ½æ”¾åœ¨å¤´æ–‡ä»¶ä¸­çš„ç¬¦å·æ¯”è¾ƒæœ‰é™ï¼Œå¤´æ–‡ä»¶è®¾è®¡æ˜¯è¶³ä»¥æ”¯æ’‘ç³»ç»Ÿè®¾è®¡çš„ã€‚ä½†æ˜¯ä¸ºäº†æé«˜è¿è¡Œæ—¶æ€§èƒ½ï¼Œå¼€å‘è€…ä¹Ÿä¼šè€ƒè™‘å°†å®ç°ç›´æ¥æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚</p><!-- [[[read_end]]] --><p>ä¸€å¼€å§‹è¿™çœ‹èµ·æ¥ä¼¼ä¹æ²¡ä»€ä¹ˆï¼Œä½†éšç€è½¯ä»¶æŠ€æœ¯çš„å‘å±•ï¼ŒC++ä»C++98è¿‡æ¸¡åˆ°ç°ä»£C++ä¹‹åï¼Œè¶Šæ¥è¶Šå¤šçš„ç‰¹æ€§å¯ä»¥è¢«å®šä¹‰æˆ–å£°æ˜åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œå¤´æ–‡ä»¶å¯¹ç°ä»£è½¯ä»¶å¼€å‘çš„æ”¯æŒå°±æ˜¾å¾—æ‰è¥Ÿè§è‚˜äº†ã€‚</p><p>é¦–å…ˆï¼Œç”±äºæ¨¡æ¿å…ƒç¼–ç¨‹çš„ç‰¹æ€§ï¼Œæ¨¡æ¿ç±»ã€æ¨¡æ¿å‡½æ•°åŠå…¶å®ç°ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å…¨éƒ¨å®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰ç¼–è¯‘æ—¶ï¼ˆcompile-timeï¼‰å¸¸é‡è¡¨è¾¾ï¼ˆconstexprï¼‰çš„å˜é‡å’Œå‡½æ•°ï¼ˆconstexprå‡½æ•°ä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶è°ƒç”¨ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/5c/23/5c4552816bc53cdd81cef5bbc4521a23.jpg?wh=2279x1196\" alt=\"\"></p><p>å¦å¤–ï¼Œç±»å‹æ¨å¯¼autoã€inlineå‡½æ•°ä¸å˜é‡ã€å®ä¹Ÿå¯ä»¥è¢«å®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­ã€‚</p><p>è¿™æ ·çœ‹æ¥ï¼Œå¤´æ–‡ä»¶åŒ…ç½—ä¸‡è±¡å®è‡³åå½’ï¼Œä½†ä¼´éšè€Œæ¥çš„æ˜¯ä¸€ç³»åˆ—é—®é¢˜ã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯<strong>æ¨¡ç³Šçš„æ¨¡å—åˆ’åˆ†</strong>ã€‚</p><p>ä¼ ç»Ÿçš„includeå¤´æ–‡ä»¶æœºåˆ¶å¹¶æ²¡æœ‰æä¾›æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†èƒ½åŠ›ï¼Œå¦‚æœè¦åœ¨ä¸€ä»½ä»£ç ä¸­ä½¿ç”¨æ¥è‡ªä¸åŒç›®å½•çš„ç›¸åŒç¬¦å·å®šä¹‰ï¼Œç¼–è¯‘å™¨ï¼Œåœ¨é“¾æ¥é˜¶æ®µæ²¡æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥åŒºåˆ†è¿™äº›ç›¸åŒç¬¦å·å®šä¹‰çš„å¼ºå¼±å…³ç³»ï¼Œä¼šå‡ºç°ç¬¦å·è¦†ç›–æˆ–è€…é“¾æ¥é”™è¯¯çš„é—®é¢˜ã€‚</p><p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯<strong>ä¾èµ–ç¬¦å·å¯¼å…¥é¡ºåº</strong>ã€‚</p><p>ä¸€ä¸ªå¤´æ–‡ä»¶å¯èƒ½ä¼šå› ä¸ºå¯¼å…¥ç¬¦å·é¡ºåºçš„ä¸åŒï¼Œå½±å“åˆ°ä»£ç ä¸­åŒ…å«çš„å¦ä¸€ä¸ªè¯­ä¹‰ï¼Œå¦‚å®å®šä¹‰å°±æœ‰å¯èƒ½ä¼šå½±å“åˆ°å¯¼å…¥ç¬¦å·çš„é¡ºåºã€‚å› æ­¤ï¼Œåœ¨å¤§è§„æ¨¡C++é¡¹ç›®ä¸­ï¼Œæœ‰æ—¶å€™å¯¼å…¥å¤´æ–‡ä»¶çš„é¡ºåºéƒ½æ˜¯æœ‰è®²ç©¶çš„ï¼Œæˆ‘ä»¬å¾€å¾€ä¸èƒ½æ§åˆ¶æ‰€æœ‰çš„ä»£ç ç¼–å†™å·¥ä½œï¼Œè€Œæ¥è‡ªä¸åŒå¼€å‘å›¢é˜Ÿçš„å¤´æ–‡ä»¶å¯èƒ½ä¼šäº’ç›¸å½±å“ï¼Œå¯¼è‡´å¤´æ–‡ä»¶éš¾ä»¥ç»„åˆã€‚</p><p>ç¬¬ä¸‰ä¸ªé—®é¢˜æ˜¯<strong>ç¼–è¯‘æ•ˆç‡ä½ä¸‹</strong>ã€‚</p><p>C++è¯­è¨€ç”±æ ¸å¿ƒè¯­è¨€ç‰¹æ€§ä¸åº“æ„æˆï¼Œé‚£äº›å¯ä»¥å®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­çš„ç‰¹æ€§ï¼ˆå¦‚ç±»å‹æ¨å¯¼autoã€æ¨¡æ¿å‡½æ•°å’Œæ¨¡æ¿ç±»ç­‰ï¼‰ä¼šå¯¹ç¼–è¯‘é€Ÿåº¦é€ æˆå½±å“ï¼Œè€Œå¯¼å…¥ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„STLåº“å¤´æ–‡ä»¶ï¼Œå¦‚sstreamï¼Œåœ¨ç¼–è¯‘æœŸå±•å¼€åä¼šè¾¾åˆ°æ•°ä¸‡è¡Œä»£ç ã€‚includeå¤´æ–‡ä»¶ä¼šè®©è¿™äº›è®¡ç®—ã€è§£æåœ¨ç¼–è¯‘é˜¶æ®µåå¤å‘ç”Ÿï¼Œè¿›ä¸€æ­¥æ‹–æ…¢ç”šè‡³æ‹–å®ç¼–è¯‘æ•ˆç‡ã€‚</p><p>ç¬¬å››ä¸ªé—®é¢˜æ˜¯<strong>å‘½åç©ºé—´æ±¡æŸ“</strong>ã€‚</p><p>åˆå­¦C++çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šä¸ºäº†æ–¹ä¾¿å¤§é‡ä½¿ç”¨using namespaceæ¥ç®€åŒ–åç»­ä»£ç çš„ç¼–å†™å·¥ä½œï¼Œå¦‚æœåœ¨è¿™äº›åº“ä¸­å«æœ‰ä¸ç¨‹åºä¸­å®šä¹‰çš„å…¨å±€å®ä½“åŒåçš„å®ä½“ï¼Œæˆ–è€…ä¸åŒåº“ä¹‹é—´æœ‰åŒåçš„å®ä½“ï¼Œåœ¨ç¼–è¯‘æ—¶ä¼šå‡ºç°åå­—å†²çªã€‚å¦‚æœåœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨äº†using namespaceï¼Œç”šè‡³ä¼šå¯¼è‡´æ‰€æœ‰ç›´æ¥æˆ–é—´æ¥åŒ…å«äº†è¯¥å¤´æ–‡ä»¶çš„ä»£ç éƒ½å—åˆ°å½±å“ï¼Œäº§ç”Ÿä¸å¯é¢„è®¡çš„åæœã€‚</p><p>æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³C++å¤´æ–‡ä»¶ä¸­çš„ç¬¦å·éš”ç¦»é—®é¢˜ï¼Œç®€å•çš„ç†è§£includeå¤´æ–‡ä»¶æ˜¯è¿œä¸å¤Ÿçš„ï¼Œé—®é¢˜å®åœ¨ä¸å°‘ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹åœ¨ä¼ ç»ŸC++ç¼–ç¨‹ä¸­æ˜¯å¦‚ä½•è§£å†³æ¨¡å—åŒ–é—®é¢˜çš„ï¼Œè¿›è€Œå¼•å‡ºC++ Modulesã€‚</p><h2>ä¼ ç»ŸC++æ¨¡å—åŒ–è§£å†³æ–¹æ¡ˆ</h2><p>äº‹å®ä¸Šï¼Œåœ¨C++20ä»¥å‰ï¼Œå³ä¾¿æ˜¯ç°ä»£C++ï¼ˆC++11ï½C++17ï¼‰ä¹Ÿæ²¡æœ‰åœ¨æ¨¡å—åŒ–æ–¹é¢æœ‰ä»€ä¹ˆå®è´¨æ€§çš„çªç ´ï¼Œä¸€ç›´æ²¡æœ‰ç»Ÿä¸€çš„æŠ½è±¡æ¨¡å—æ¦‚å¿µã€‚</p><p>ä½†å¼€å‘è€…åœ¨è¿™ä¹ˆå¤šå¹´çš„å®è·µä¸­ç¡®æ€»ç»“å‡ºäº†ä¸€å¥—è¾ƒä¸ºè¡Œä¹‹æœ‰æ•ˆçš„ç»éªŒï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¡¨ç¤ºâ€œæ¨¡å—â€ï¼Œä»¥è¾¾åˆ°ä¸¤å¤§ç›®çš„ã€‚</p><p>ä¸€ä¸ªç›®çš„æ˜¯åˆ’åˆ†ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œå°†å¤§è§„æ¨¡çš„ä»£ç åˆ’åˆ†ä¸ºå°è§„æ¨¡çš„ä»£ç ï¼Œé€šè¿‡å±‚å±‚åˆ’åˆ†å’Œæ¨¡å—ç»„ç»‡ï¼Œè®©æ¯ä¸ªæ¨¡å—ä»£ç è¶³å¤Ÿå†…èšï¼Œä¸“æ³¨è‡ªèº«ä¸šåŠ¡ï¼Œæœ€ç»ˆæå‡ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p><p>ç¬¬äºŒä¸ªç›®çš„æ˜¯æå‡ä»£ç çš„å¤ç”¨æ€§ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæŠ½ç¦»å‡ºå¾ˆå¤šåŠŸèƒ½æ¨¡å—ï¼Œä¾›å…¶ä»–æ¨¡å—è°ƒç”¨ï¼ŒC++çš„æ ‡å‡†åº“æ­£æ˜¯è¿™ç§â€œæ¨¡å—â€çš„ä»£è¡¨ï¼Œæœ€ç»ˆå¯ä»¥å‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œæå‡ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚<br>\n&nbsp;<br>\næ—¢ç„¶C++æ²¡æœ‰æä¾›æ ‡å‡†çš„æ¨¡å—ç‰¹æ€§ï¼Œé‚£ä¹ˆä¼ ç»Ÿé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å“ªäº›åŸºç¡€è®¾æ–½æ¥æ¨¡æ‹Ÿæ¨¡å—å‘¢ï¼Ÿ</p><p>ç»“åˆå®è·µç»éªŒï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å‡ ä¸ªå¸¸ç”¨ç‰¹æ€§ï¼ŒåŒ…æ‹¬åº”å¯¹æ¨¡å—åˆ’åˆ†ä¸ç¬¦å·å¤ç”¨çš„ç¼–è¯‘é“¾æ¥ã€å¤´æ–‡ä»¶ï¼Œåº”å¯¹ç¬¦å·éš”ç¦»çš„å‘½åç©ºé—´ã€‚</p><h3>åˆ†åˆ«ç¼–è¯‘/é“¾æ¥/å¤´æ–‡ä»¶</h3><p>åˆšæ‰æåˆ°æ¨¡å—åŒ–çš„ä¸¤ä¸ªç›®çš„ï¼Œä¸šåŠ¡é€»è¾‘åˆ’åˆ†ã€ä»£ç å¤ç”¨ã€‚ä¸ºäº†å®ç°è¿™ä¸¤ä¸ªç›®çš„ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šåˆ©ç”¨ä»Cå¼€å§‹å°±æ”¯æŒçš„ç¼–è¯‘-é“¾æ¥ä¸¤é˜¶æ®µçš„æ„å»ºè¿‡ç¨‹ã€‚</p><p>C++ç¼–è¯‘è¿‡ç¨‹ä¸­æœ€åŸºç¡€çš„æ¦‚å¿µå°±æ˜¯â€œç¼–è¯‘å•å…ƒâ€ï¼Œæ‰€ä»¥æ¯ä¸ªå®ç°æ–‡ä»¶ï¼ˆé€šå¸¸ä»¥.cppç»“å°¾ï¼‰éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ç¼–è¯‘å•å…ƒã€‚æˆ‘ä»¬ä¼šå…ˆåœ¨â€œç¼–è¯‘â€è¿™ä¸ªé˜¶æ®µå¯¹æ¯ä¸ªç¼–è¯‘å•å…ƒè¿›è¡Œç‹¬ç«‹ç¼–è¯‘ï¼Œç”Ÿæˆç‹¬ç«‹çš„ç›®æ ‡æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯å°†C++ä»£ç è½¬æ¢æˆäºŒè¿›åˆ¶æœºå™¨ç ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªç›®æ ‡æ–‡ä»¶ä¸­çš„å‡½æ•°åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šç”Ÿæˆä¸€ä¸ªâ€œç¬¦å·â€ï¼Œè€Œæ¯ä¸ªç¬¦å·åŒ…å«ä¸€ä¸ªåç§°å’Œå‡½æ•°ä»£ç çš„é¦–åœ°å€ã€‚</p><p>å‡è®¾æˆ‘ä»¬æƒ³åœ¨ç¼–è¯‘å•å…ƒAï¼ˆç®€ç§°Aï¼‰ä¸­å¼•ç”¨ç¼–è¯‘å•å…ƒBï¼ˆç®€ç§°Bï¼‰ä¸­çš„å‡½æ•°ï¼Œåªéœ€è¦ç¡®ä¿å¼•ç”¨çš„å‡½æ•°åŒåå³å¯ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/ec/24/ecd68450b0d933c3d48e31967f362e24.jpg?wh=2900x1109\" alt=\"\"></p><p>åœ¨Açš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¼•ç”¨çš„å‡½æ•°ä¸å­˜åœ¨ï¼Œå°±ä¼šæŠŠå‡½æ•°çš„è°ƒç”¨ä½ç½®ç©ºå‡ºæ¥ï¼Œç­‰åˆ°é“¾æ¥çš„æ—¶å€™ï¼Œé“¾æ¥å™¨ä¼šä»å…¶ä»–çš„ç¼–è¯‘å•å…ƒï¼Œæ¯”å¦‚Bä¸­ï¼Œæœç´¢ç¼–è¯‘æ—¶ç©ºå‡ºä½ç½®çš„å‡½æ•°ç¬¦å·ã€‚å¦‚æœèƒ½æ‰¾åˆ°ï¼Œå°±å°†ç¬¦å·åœ°å€å¡«å…¥ç©ºå‡ºæ¥çš„éƒ¨åˆ†ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±ä¼šæŠ¥å‡ºé“¾æ¥é”™è¯¯ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹å…·ä½“æ˜¯æ€ä¹ˆè¿ä½œçš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸¾ä¸ªå…·ä½“ä¾‹å­æ¥çœ‹çœ‹ï¼Œåœ¨Bä¸­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°addï¼ŒAä¸­å¼•ç”¨è¿™ä¸ªå‡½æ•°addã€‚</p><p>a.cppä»£ç æ˜¯è¿™æ ·çš„ã€‚</p><pre><code class=\"language-c++\">#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\nextern int32_t add(int32_t a, int32_t b);\nint main() {\n&nbsp; int32_t sum = add(1, 2);\n&nbsp; std::cout &lt;&lt; \"sum: \" &lt;&lt; sum &lt;&lt; std::endl;\n&nbsp; return 0;\n}\n</code></pre><p>b.cppä»£ç æ˜¯è¿™æ ·çš„ã€‚</p><pre><code class=\"language-c++\">#include &lt;cstdint&gt;\nint32_t add(int32_t a, int32_t b) {\n&nbsp; return a + b;\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒAä¸­å…¶å®ä¹Ÿâ€œå£°æ˜â€äº†ä¸€ä¸ªå‡½æ•°addï¼Œåªä¸è¿‡å£°æ˜çš„æ—¶å€™åŠ äº†ä¸€ä¸ªexternä¿®é¥°ç¬¦ï¼Œå¹¶æ²¡æœ‰å‡½æ•°å®šä¹‰ã€‚</p><p>è¿™æ˜¯å› ä¸ºåœ¨ç¼–è¯‘Açš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“Bçš„å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è¿™ç§æ–¹å¼â€œå‘ŠçŸ¥â€ç¼–è¯‘å™¨å…¶å®æœ‰è¿™ä¸ªå‡½æ•°addï¼Œåªæ˜¯åœ¨å…¶ä»–çš„ç¼–è¯‘å•å…ƒä¸­ï¼Œå‡†å¤‡ç­‰åˆ°é“¾æ¥æ—¶å†ä½¿ç”¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œè™½ç„¶ç¼–è¯‘å™¨æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå‡½æ•°çš„å®šä¹‰ï¼Œä½†æ˜¯ä¼šæš‚æ—¶â€œæ”¾è¿‡â€å®ƒï¼Œåœ¨ç”Ÿæˆçš„å‡½æ•°è°ƒç”¨æœºå™¨ç ä¸­ä¼šå°†è¿™ä¸ªç¬¦å·çš„åœ°å€ç©ºå‡ºæ¥ï¼Œç­‰åˆ°é“¾æ¥çš„æ—¶å€™å†æ¥å¡«å……ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨gccç¼–è¯‘è¿™ä¸¤ä¸ªæºä»£ç æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°b.oä¸­ä¼šç”Ÿæˆä¸€ä¸ªåä¸ºaddçš„ç¬¦å·ï¼Œè¿™ä¸ªç¬¦å·å°±æ˜¯å‡†å¤‡åœ¨é“¾æ¥è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ã€‚</p><p>å¥½ï¼Œç¼–è¯‘å®Œæˆï¼Œæˆ‘ä»¬ç»§ç»­æ‰§è¡Œé“¾æ¥åŠ¨ä½œã€‚</p><p>æ­¤æ—¶ï¼Œé“¾æ¥å™¨é¦–å…ˆå°†ç¼–è¯‘ç”Ÿæˆçš„Aå’ŒBçš„ç›®æ ‡æ–‡ä»¶ï¼ˆa.oå’Œb.oï¼‰ç»„è£…åœ¨ä¸€èµ·ï¼Œç„¶åå¼€å§‹â€œå¡«å‘â€â€”â€”å¡«è¡¥åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç©ºå‡ºæ¥çš„ç¬¦å·è°ƒç”¨çš„ç¬¦å·åœ°å€ã€‚ç¼–è¯‘å™¨ä¼šä»b.oçš„ä»£ç ä¸­å¯»æ‰¾ç¬¦å·addï¼Œæ‰¾åˆ°ä½¿ç”¨è¿™ä¸ªç¬¦å·çš„åœ°å€ï¼Œå»å¡«è¡¥a.oåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç©ºå‡ºæ¥çš„è°ƒç”¨ç¬¦å·çš„åœ°å€ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/34/92/34ee0370b86c67120d3d02b4e80c3e92.jpg?wh=2900x1708\" alt=\"\"></p><p>é“¾æ¥å®Œæˆåï¼Œæ‰€æœ‰äºŒè¿›åˆ¶ä»£ç ä¸­é¢„ç•™çš„åœ°å€å…¨éƒ¨éƒ½è¦è¢«ä¿®è¡¥ï¼Œå¦‚æœæ‰€æœ‰ç¼–è¯‘å•å…ƒä¸­éƒ½æ‰¾ä¸åˆ°è¿™ä¸ªç¬¦å·ï¼Œå°±ä¼šåœ¨é“¾æ¥é˜¶æ®µæŠ¥é”™ã€‚æœ€åï¼Œé“¾æ¥ç”Ÿæˆçš„äºŒè¿›åˆ¶ä»£ç ä¸å…è®¸å‡ºç°ç©ºç¼ºçš„è°ƒç”¨åœ°å€ã€‚</p><p>Hmmï¼Œè¿™ç§æ¨¡å¼ä¼¼ä¹å¯ä»¥è§£å†³ä¸šåŠ¡é€»è¾‘åˆ’åˆ†é—®é¢˜ï¼Œä½†æœ‰ä¸€ä¸ªé—®é¢˜â€”â€”ç°åœ¨ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ–°çš„ç¼–è¯‘å•å…ƒCï¼ŒCä¹Ÿå¸Œæœ›ä½¿ç”¨Bä¸­å®šä¹‰çš„å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨Cä¸­é‡å†™ä¸€éaddå‡½æ•°çš„å£°æ˜å—ï¼Ÿ</p><p>çš„ç¡®éœ€è¦å¦‚æ­¤ï¼Œå› ä¸ºç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“å…¶ä»–ç¼–è¯‘å•å…ƒçš„å®šä¹‰ã€‚</p><p>ä¸è¿‡ï¼Œè¿™ä¼šè®©æˆ‘ä»¬å¼•ç”¨å…¶ä»–ç¼–è¯‘å•å…ƒçš„å‡½æ•°å˜å¾—éå¸¸éº»çƒ¦ï¼Œè€Œä¸”æ›´å¤§çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœåœ¨å¼•ç”¨ç¬¦å·çš„ç¼–è¯‘å•å…ƒä¸­å†™é”™äº†å£°æ˜ï¼Œåªè¦ç¬¦å·ä¸€æ ·ï¼Œé“¾æ¥çš„æ—¶å€™ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±è¦ç”¨å¤´æ–‡ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªå¤´æ–‡ä»¶b.hã€‚</p><pre><code class=\"language-c++\">#ifndef _MODULE_B_H\n#define _MODULE_B_H\n#include &lt;cstdint&gt;\nextern int32_t add(int32_t a, int32_t b);\n#endif //_MODULE_B_H\n</code></pre><p>æ¥ç€ä¿®æ”¹a.cppå’Œb.cppï¼ˆå…¶ä¸­b.cppæš‚æ— å˜åŒ–ï¼‰ï¼Œä¿®æ”¹åä»£ç æ˜¯è¿™æ ·ã€‚</p><pre><code class=\"language-c++\">#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include \"b.h\"\nint main() {\n&nbsp; int32_t sum = add(1, 2);\n&nbsp; std::cout &lt;&lt; \"sum: \" &lt;&lt; sum &lt;&lt; std::endl;\n&nbsp; return 0;\n}\n</code></pre><p>æ¥ç€ç¼–è¯‘å¹¶é“¾æ¥å†™å¥½çš„ä»£ç ï¼Œå‘½ä»¤æ˜¯è¿™æ ·ã€‚</p><pre><code class=\"language-c++\">g++ -o add a.cpp b.cpp -std=c++11\n</code></pre><p>ä»¥åBä¸­å¢åŠ äº†æ–°çš„å‡½æ•°ï¼Œåªéœ€åœ¨b.hä¸­è¡¥å……ç›¸åº”çš„å£°æ˜å³å¯ã€‚</p><p>è¿™æ ·åœ¨æ¯ä¸ªå¼•ç”¨Bçš„ç¼–è¯‘å•å…ƒï¼Œéƒ½ä¸ç”¨é‡å¤å£°æ˜è¿™ä¸ªå‡½æ•°äº†ï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿéœ€è¦çŸ¥é“è¿™å…¶å®æ˜¯é€šè¿‡â€œåŒ…å«â€å¤´æ–‡ä»¶ä»£ç è¿™ç§éå¸¸â€œä½çº§â€çš„æŠ€æœ¯æ–¹å¼å®ç°çš„ã€‚è€Œä¸”è¿™ç§æ–¹å¼å¯èƒ½è¿˜ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œä¸¤ä¸ªç¼–è¯‘å•å…ƒçš„ç¬¦å·å¯èƒ½ä¼šé‡å¤ï¼ä¹Ÿå°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°çš„â€œå‘½åç©ºé—´æ±¡æŸ“â€ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬åœ¨a.cppä¸­ä¹Ÿå®šä¹‰ä¸€ä¸ªaddå‡½æ•°ï¼Œç„¶åè¿›è¡Œç¼–è¯‘ã€é“¾æ¥ã€‚</p><pre><code class=\"language-c++\">#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include \"b.h\"\n\nint32_t add(int32_t a, int32_t b) {\n&nbsp; return a + b;\n}\n\nint main() {\n&nbsp; int32_t sum = add(1, 2);\n&nbsp; std::cout &lt;&lt; \"sum: \" &lt;&lt; sum &lt;&lt; std::endl;\n\n&nbsp; return 0;\n}&nbsp;\n</code></pre><p>ç¼–è¯‘è¿‡ç¨‹éå¸¸é¡ºåˆ©ã€‚ä½†æ˜¯ï¼Œåœ¨é“¾æ¥æ—¶ï¼Œå“¦ï¼Ÿå‡ºé”™äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a9/3c/a9f033994ab9ea722e60634b3a37873c.jpg?wh=1920x167\" alt=\"å›¾ç‰‡\"></p><p>è¿™æ˜¯å› ä¸ºa.oä¸­å¼•ç”¨äº†addè¿™ä¸ªç¬¦å·ï¼Œä½†æ˜¯b.oå’Œa.oä¸­éƒ½åŒ…å«è¿™ä¸ªç¬¦å·ï¼Œå°±å¯¼è‡´äº†å†²çªï¼Œå› ä¸ºé“¾æ¥å™¨ä¸çŸ¥é“a.oä¸­æƒ³è¦ä½¿ç”¨çš„addåˆ°åº•æ˜¯b.oä¸­çš„è¿˜æ˜¯a.oä¸­çš„ã€‚</p><p>è¿™å°±æ˜¯æ‰€è°“çš„ç¬¦å·éš”ç¦»é—®é¢˜ã€‚é‚£ä¹ˆä¸€èˆ¬åº”è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p><p>åœ¨Cå’Œæ—©æœŸçš„C++ä¸­æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆéå¸¸ç®€å•ç²—æš´ï¼Œé‚£å°±æ˜¯æ·»åŠ å‰ç¼€ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨b.cppä¸­åœ¨æ‰€æœ‰å®šä¹‰çš„å‡½æ•°ä¹‹å‰éƒ½æ·»åŠ å‰ç¼€module_b_ï¼Œåœ¨a.cppä¸­æ‰€æœ‰å®šä¹‰çš„å‡½æ•°ä¹‹å‰éƒ½æ·»åŠ å‰ç¼€module_a_ã€‚å¦‚æœæˆ‘ä»¬åœ¨a.cppä¸­å¸Œæœ›å¼•ç”¨çš„æ˜¯b.cppä¸­çš„addï¼Œé‚£ä¹ˆå°±è°ƒç”¨module_b_addï¼Œå¦åˆ™è°ƒç”¨module_a_addï¼Œè¿™å°±éå¸¸ç®€å•åœ°è§£å†³äº†é—®é¢˜ã€‚</p><p>ä½†è¿™ç§æ–¹å¼ç»§ç»­å¸¦æ¥äº†ä¸¤ä¸ªé—®é¢˜ã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä»£ç å†—é•¿ï¼Œå°¤å…¶æ˜¯åœ¨b.cppä¸­å®šä¹‰çš„æ—¶å€™ï¼Œæ‰€æœ‰å‡½æ•°éƒ½éœ€è¦æ·»åŠ å‰ç¼€module_b_ï¼Œä¼šè®©æ‰€æœ‰çš„å‡½æ•°å®šä¹‰éå¸¸å¤æ‚ã€‚</p><p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœå‰ç¼€ä¹Ÿé‡å¤æ€ä¹ˆåŠï¼Ÿæ¯•ç«Ÿä¸¤ä¸ªç¼–è¯‘å•å…ƒçš„ç¼–å†™è€…æ˜¯ä¸çŸ¥é“å¯¹æ–¹ä½¿ç”¨ä»€ä¹ˆå‰ç¼€çš„ï¼Œåœ¨æŠ€æœ¯ä¸Šæ— æ³•é¿å…ï¼Œåªèƒ½é€šè¿‡ä¸åŒç¼–è¯‘å•å…ƒçš„ç¼–å†™è€…æå‰çº¦å®šå¥½åŒæ–¹çš„å‰ç¼€æ¥è§£å†³ã€‚çœŸæ˜¯ä¸€ä¸ªé—®é¢˜æ¥ç€ä¸€ä¸ªé—®é¢˜â€¦â€¦</p><p>ä¸è¿‡ï¼Œåœ¨C++ä¸­ç¬¦å·éš”ç¦»é—®é¢˜ï¼Œä¹Ÿå¯ä»¥é€šè¿‡éšè—ä¸€ä¸ªç¼–è¯‘å•å…ƒä¸­çš„ç§æœ‰ç¬¦å·æ¥è§£å†³ï¼Œä¹Ÿå°±æ˜¯ä¸è®©å…¶ä»–ç¼–è¯‘å•å…ƒâ€œçœ‹åˆ°â€è¿™äº›ç¬¦å·ã€‚</p><p>è¿™ä¹Ÿèƒ½å¤§é‡å‡å°‘ç¼–è¯‘å•å…ƒä¹‹é—´çš„ç¬¦å·å†²çªé—®é¢˜ï¼Œæ¯•ç«Ÿå¯èƒ½å‡ºç°ï¼Œä¸¤ä¸ªç¼–è¯‘å•å…ƒå®šä¹‰äº†åŒåï¼Œä½†åªæƒ³åœ¨ç¼–è¯‘å•å…ƒå†…éƒ¨ä½¿ç”¨å‡½æ•°çš„æƒ…å†µï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³ç»™è¿™äº›å‡½æ•°åŠ ä¸Šå†—é•¿çš„å‰ç¼€ã€‚é‚£è¿™ä¸ªæ—¶å€™ï¼Œåªéœ€è¦ä½¿ç”¨staticä¿®é¥°ç¬¦ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨Aå’ŒBä¸­éƒ½å®šä¹‰staticå‡½æ•°to_intï¼Œç„¶åå†ç¼–è¯‘é“¾æ¥ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°ç¬¦å·å†²çªçš„é—®é¢˜ã€‚</p><h3>å‘½åç©ºé—´</h3><p>è™½ç„¶åœ¨ä¸åŒç¼–è¯‘å•å…ƒä¸­ï¼Œç›¸åŒçš„ç¬¦å·ä¼šå¼•å‘é“¾æ¥é”™è¯¯ï¼Œä¸è¿‡åœ¨ä¸åŒçš„ä»£ç ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬æ˜¯å®Œå…¨å¯ä»¥å®šä¹‰ç›¸åŒç¬¦å·çš„ï¼Œè¿™å…¶ä¸­å¯ä»¥åŒ…å«ç¬¦å·å¸¸é‡ã€å˜é‡ã€å‡½æ•°ã€ç»“æ„ä½“ã€ç±»ã€æ¨¡æ¿å’Œå¯¹è±¡ç­‰ç­‰ã€‚</p><p>ä½†æ˜¯ï¼Œç›¸åŒçš„ç¬¦å·å¹¶ä¸æ„å‘³ç€å®ƒä»¬æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼Œè€Œä¸”éšç€C++å·¥ç¨‹è¶Šæ¥è¶Šå¤§ï¼Œå¯¼å…¥çš„åº“å˜å¤šï¼Œè¿™ç§å‘½åå†²çªçš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸åŒç¼–è¯‘å•å…ƒã€ä¸åŒä»£ç ç»„ä»¶ã€namespaceä¹‹é—´çš„å…³ç³»å’Œå±‚æ¬¡ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/34/df/346c29f1386059ec7b4cbfa184f572df.jpg?wh=3605x2091\" alt=\"\"></p><p>ä¸ºäº†é¿å…åœ¨C++ç¼–ç¨‹è¿‡ç¨‹ä¸­é¿å…å‘½åå†²çªï¼ŒC++æ ‡å‡†æä¾›äº†å…³é”®å­—å‘½åç©ºé—´ï¼ˆnamespaceï¼‰çš„æ”¯æŒï¼Œå¯ä»¥æ›´å¥½åœ°æ§åˆ¶ç¬¦å·ä½œç”¨åŸŸã€‚ä½†é€šè¿‡namespaceè¿›è¡Œç¬¦å·éš”ç¦»ï¼Œä»ç„¶å­˜åœ¨å±€é™æ€§ã€‚</p><p>namespaceå¯ä»¥é€šè¿‡å‘½åç©ºé—´é¿å…ç¬¦å·åç§°å†²çªï¼Œä½†æœ¬èº«å¹¶ä¸ç®¡ç†ç¬¦å·çš„å¯è§æ€§é—®é¢˜ï¼Œä¸åŒnamespaceä¹‹é—´çš„ç¬¦å·å¯è§æ€§å–å†³äºç¼–è¯‘å•å…ƒçš„ç¬¦å·å¯è§æ€§ï¼Œè¿™è®©ç¬¦å·çš„ç®¡ç†å˜å¾—éå¸¸å¤æ‚ã€‚å¦å¤–ä¸åŒç¼–è¯‘å™¨äº§ç”Ÿçš„namespaceçš„ç¬¦å·ä¿®é¥°æ–¹å¼ä¸åŒï¼ˆæ¯•ç«Ÿè¿™ä¸æ˜¯C++æ ‡å‡†å®šä¹‰çš„å†…å®¹ï¼‰ï¼Œä¹Ÿå°±æ˜¯ABIå±‚é¢ä¸åŒï¼Œä¼šå¯¼è‡´è·¨ç¼–è¯‘å™¨çš„ç¬¦å·å¼•ç”¨å‡ºç°å¾ˆå¤§çš„é—®é¢˜ã€‚</p><h2>æ€»ç»“</h2><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œä»Šå¤©çš„æ€è€ƒå…¶å®æ˜¯å›´ç»•ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜å±•å¼€çš„ï¼šä¸ºäº†éšè—ä»£ç å®ç°ç»†èŠ‚ï¼Œæˆ‘ä»¬å¾€å¾€è¦ä½¿ç”¨å“ªäº›ç¼–ç¨‹èŒƒå¼æˆ–æŠ€å·§ï¼Ÿ</p><p><strong>æ–¹æ³•ä¸€ï¼šé€šè¿‡includeå¤´æ–‡ä»¶æ¥ç»Ÿä¸€å£°æ˜ç¬¦å·</strong></p><p>è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ç®€å•ç²—æš´ï¼Œç®€æ´æ˜äº†ï¼Œä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†åŒä¸€ç»„ä»¶å†…ç›¸åŒç¬¦å·å®šä¹‰å†²çªçš„é—®é¢˜ã€‚ä½†è¿™ç§æ–¹æ³•ä¹Ÿæœ‰ç¡¬ä¼¤ï¼Œå®ƒåˆ©ç”¨äº†å¤´æ–‡ä»¶ä»£ç è¿™ç§éå¸¸â€œä½çº§â€çš„æŠ€æœ¯æ–¹å¼å®ç°ï¼Œè€Œä¸”ä»æ— æ³•é¿å…ä¸¤ä¸ªç¼–è¯‘å•å…ƒçš„é‡å¤ç¬¦å·çš„é—®é¢˜ã€‚</p><p><strong>æ–¹æ³•äºŒï¼šæ·»åŠ å‰ç¼€æ¥é¿å…ç¬¦å·å†²çª</strong></p><p>è¿™ç§æ–¹æ³•ç®€å•æ˜äº†ï¼Œå¯æ“ä½œæ€§å¼ºï¼ŒåŸºæœ¬å¯ä»¥è§£å†³ç¬¦å·å†²çªé—®é¢˜ã€‚ä½†æ˜¯ä¼šå¤§å¹…é™ä½ä»£ç å¯è¯»æ€§ï¼Œè¿˜ä¼šè®©ç¬¦å·å£°æ˜å˜å¾—æ›´é•¿ï¼Œè€Œä¸”å½“å‰ç¼€ä¹Ÿé‡å¤äº†ï¼Œæˆ‘ä»¬çœŸçš„å¾ˆéš¾è§£å†³é—®é¢˜ï¼Œéš¾é“å…¨å±€æ›¿æ¢å‰ç¼€ï¼Ÿå› æ­¤è¿™ç§æ–¹å¼ä»ç„¶ä¸èƒ½è§£å†³ç¬¦å·é‡å¤å’Œå¯è§æ€§çš„é—®é¢˜ã€‚</p><p><strong>æ–¹æ³•ä¸‰ï¼šé€šè¿‡namespaceé¿å…ç¬¦å·å†²çª</strong></p><p>*namespaceå¯ä»¥é€šè¿‡å‘½åç©ºé—´é¿å…ç¬¦å·åç§°å†²çªã€‚ä½†æ˜¯ï¼Œå®ƒæœ¬èº«å¹¶ä¸ç®¡ç†ç¬¦å·çš„å¯è§æ€§é—®é¢˜ï¼Œä¸åŒnamespaceä¹‹é—´çš„ç¬¦å·å¯è§æ€§å–å†³äºç¼–è¯‘å•å…ƒçš„ç¬¦å·å¯è§æ€§ï¼Œè¿™è®©ç¬¦å·çš„ç®¡ç†å˜å¾—éå¸¸å¤æ‚ã€‚è€Œä¸”namespaceåœ¨ä¸åŒç¼–è¯‘å™¨ä¸Šçš„è¡¨ç°ä¸åŒï¼Œåœ¨ABIå±‚é¢æ— æ³•å®ç°å…¼å®¹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œincludeå¤´æ–‡ä»¶æœºåˆ¶æ²¡èƒ½è·Ÿä¸Šç°ä»£C++æ ‡å‡†çš„æ¼”è¿›ï¼Œæä¾›ä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„è¿›è¡Œä»£ç ç»„åˆã€ç¬¦å·å’ŒåŠŸèƒ½å¤ç”¨çš„æ–¹æ¡ˆã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•æ¥ä¿è¯åº“çš„ç‹¬ç«‹æ€§ã€æ˜“ç”¨æ€§ï¼ŒåŒæ—¶æé«˜ä»£ç ç¼–è¯‘é€Ÿåº¦å‘¢ï¼Ÿ</p><p>ä¸‹ä¸€è®²ï¼ŒModulesåœ¨ç°ä»£C++ä¸­å°±è¦ç²‰å¢¨ç™»åœºäº†ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p><h3>è¯¾åæ€è€ƒ</h3><p>ä»Šå¤©ï¼Œæˆ‘ä»¬ç ”ç©¶äº†includeå¤´æ–‡ä»¶æœºåˆ¶ä»¥åŠC++20å‰è§£å†³ç¬¦å·å¯è§æ€§é—®é¢˜çš„ä¸€äº›æœ€ä½³å®è·µã€‚é‚£ä¹ˆåœ¨C++ Moduleså‡ºç°ä»¥å‰ï¼Œä½ æ˜¯æ€ä¹ˆè§£å†³ç¬¦å·éš”ç¦»é—®é¢˜çš„ï¼Ÿ</p><p>æ¬¢è¿æŠŠä½ ç¢°åˆ°çš„æƒ…å†µä¸è§£å†³æ–¹æ³•ï¼Œä¸å¤§å®¶ä¸€èµ·åˆ†äº«ã€‚æˆ‘ä»¬ä¸€åŒäº¤æµã€‚ä¸‹ä¸€è®²è§ï¼</p>","comments":[{"had_liked":false,"id":370681,"user_name":"ç³ç²‘ä¸æ˜¯é¥­","can_delete":false,"product_type":"c1","uid":1295664,"ip_address":"åŒ—äº¬","ucode":"FCF9D03A1AC755","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/adf8X0vmoJN8EuJOpIs81VyVmib9zgxTeWheic1C3DKfFeFT0os67qbicsRFHUeMnz7nKQ25XHp2r7wlbX8KXfLDA/132","comment_is_top":false,"comment_ctime":1679103614,"is_pvip":false,"replies":[{"id":135292,"content":"Good point!\næ­£å¥½åœ¨è¿™é‡Œåšä¸ªè°ƒç ”ï¼Œå¤§å®¶æ˜¯å¦å¯¹è¿™ä¸ªè¯é¢˜æ„Ÿå…´è¶£å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1006976,"ctime":1679306548,"ip_address":"ä¸Šæµ·","comment_id":370681,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100523801,"comment_content":"è€å¸ˆæ˜¯å¦è€ƒè™‘å†å¢åŠ äº›CMakeæˆ–è€…åŒ…ç®¡ç†ç›¸å…³çš„è¯¾ç¨‹å‘¢ï¼ŸğŸ˜ƒ","like_count":7,"discussions":[{"author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609943,"discussion_content":"Good point!\næ­£å¥½åœ¨è¿™é‡Œåšä¸ªè°ƒç ”ï¼Œå¤§å®¶æ˜¯å¦å¯¹è¿™ä¸ªè¯é¢˜æ„Ÿå…´è¶£å‘¢ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1679306549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1295664,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/adf8X0vmoJN8EuJOpIs81VyVmib9zgxTeWheic1C3DKfFeFT0os67qbicsRFHUeMnz7nKQ25XHp2r7wlbX8KXfLDA/132","nickname":"ç³ç²‘ä¸æ˜¯é¥­","note":"","ucode":"FCF9D03A1AC755","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":610020,"discussion_content":"ç”¨C++å°±å¾—ç”¨åˆ°CMakeï¼Œé¿ä¸å¼€ã€‚ç›¸å…³èµ„æ–™å°‘ä¹‹åˆå°‘ï¼Œè€å¸ˆè¦æ˜¯è®²è¿™ä¸ªè‚¯å®šä¼šå¾ˆå—æ¬¢è¿ï¼","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1679355287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":609943,"ip_address":"åŒ—äº¬","group_id":0},"score":610020,"extra":""}]},{"author":{"id":1118806,"avatar":"https://static001.geekbang.org/account/avatar/00/11/12/56/4abadfc3.jpg","nickname":"LoveDr.kang","note":"","ucode":"BED888A788922C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":616777,"discussion_content":"+10086","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1683096722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1238921,"avatar":"https://static001.geekbang.org/account/avatar/00/12/e7/89/207cc841.jpg","nickname":"HI","note":"","ucode":"C65218113883E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":613013,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1681091006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366653,"user_name":"tanatang","can_delete":false,"product_type":"c1","uid":2349826,"ip_address":"å››å·","ucode":"7526705D25959A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/FhibmYQUzY7ibPac8Id5PwbibqCbvj5rWibeQhEyvYguc9pvPNUciaQydicrUjJKkhhp1s2AgfP7LRTZA8zqaa82yC8g/132","comment_is_top":false,"comment_ctime":1674019943,"is_pvip":false,"replies":[{"id":133592,"content":"OOPåŸæ•™æ—¨ä¸»ä¹‰ ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1006976,"ctime":1674026998,"ip_address":"æ±Ÿè‹","comment_id":366653,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100523801,"comment_content":"å†™é¢å‘å¯¹è±¡çš„C++ï¼Œæˆå‘˜å’Œå‡½æ•°éƒ½åœ¨è®¾è®¡åœ¨ç±»ä¸­ï¼Œç¦æ­¢ä½¿ç”¨è¿™ç§ä¸å±äºä»»ä½•ç±»çš„å…¨å±€å‡½æ•°ï¼Œ å…¨å±€å˜é‡ã€‚","like_count":5,"discussions":[{"author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600126,"discussion_content":"OOPåŸæ•™æ—¨ä¸»ä¹‰ ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674026998,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366616,"user_name":"wilby","can_delete":false,"product_type":"c1","uid":1345031,"ip_address":"ç‘å…¸","ucode":"4296C04148B479","user_header":"https://static001.geekbang.org/account/avatar/00/14/86/07/aefa4e8b.jpg","comment_is_top":false,"comment_ctime":1673988633,"is_pvip":false,"replies":[{"id":133594,"content":"æ–‡ä¸­çš„æ„æ€å¹¶éè¯´namespaceå¯¼è‡´ç¬¦å·ç®¡ç†å˜å¤æ‚ã€‚è¿™é‡Œçš„æ„æ€æ˜¯ï¼Œè¯¸å¦‚namespaceè¿™ç±»è¯­è¨€ç‰¹æ€§å¯ä»¥è§£å†³ç¬¦å·å†²çªé—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç»™äºˆå‹å¥½çš„æç¤ºï¼Œä½†ç”±äºC++çš„ç¼–è¯‘é“¾æ¥åˆ†ç¦»æœºåˆ¶ï¼ŒC++åªä¸ºé“¾æ¥å®šä¹‰äº†ä¸€äº›æŒ‡å¯¼æ€§åŸåˆ™ï¼Œé“¾æ¥ä¸­å¾ˆå¤šå…·ä½“æŠ€æœ¯è§„èŒƒå¤§å¤šç”±ABIæ¥å®šä¹‰ï¼Œè¿™å°±å¯¼è‡´åœ¨ä¸åŒç¼–è¯‘å™¨å’Œä¸åŒä½“ç³»ç»“æ„ä¸‹å¯èƒ½åœ¨é“¾æ¥æ—¶ä¼šé‡åˆ°ä¸åŒçš„é—®é¢˜ï¼Œè¿™æ‰æ˜¯C++ç¬¦å·ç®¡ç†å¤æ‚æ€§çš„æ ¸å¿ƒé—®é¢˜æ‰€åœ¨ã€‚è€ŒC++ Modulesåˆ™æ˜¯æ›´å®Œå¤‡çš„ç¬¦å·å¯è§æ€§ç®¡ç†è¯­è¨€ç‰¹æ€§ï¼Œå¯ä»¥ä¸namespaceå®ç°äº’è¡¥ï¼Œè€Œä¸”åœ¨é“¾æ¥ä¸Šä¹Ÿç»™å‡ºäº†æ›´å¤šçš„åŸåˆ™ï¼ˆè™½ç„¶è¿˜æ˜¯æ— æ³•å®Œå…¨è§£å†³ABIé—®é¢˜ï¼‰ï¼Œè®©ç¬¦å·ç®¡ç†æ›´åŠ æ˜“äºç†è§£ï¼Œæ›´æ¥è¿‘ç°ä»£ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦é™ä½æ•´ä½“ç¬¦å·ç®¡ç†çš„å¤æ‚æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1006976,"ctime":1674027940,"ip_address":"æ±Ÿè‹","comment_id":366616,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100523801,"comment_content":"ä¸ºä»€ä¹ˆnamespaceè®©ç¬¦å·ç®¡ç†å˜å¾—å¾ˆå¤æ‚ï¼Ÿè€å¸ˆå¥½åƒå°±ç»™äº†ä¸ªç»“è®ºï¼Œèƒ½å±•å¼€è®²è®²ä¹ˆï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600129,"discussion_content":"æ–‡ä¸­çš„æ„æ€å¹¶éè¯´namespaceå¯¼è‡´ç¬¦å·ç®¡ç†å˜å¤æ‚ã€‚è¿™é‡Œçš„æ„æ€æ˜¯ï¼Œè¯¸å¦‚namespaceè¿™ç±»è¯­è¨€ç‰¹æ€§å¯ä»¥è§£å†³ç¬¦å·å†²çªé—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç»™äºˆå‹å¥½çš„æç¤ºï¼Œä½†ç”±äºC++çš„ç¼–è¯‘é“¾æ¥åˆ†ç¦»æœºåˆ¶ï¼ŒC++åªä¸ºé“¾æ¥å®šä¹‰äº†ä¸€äº›æŒ‡å¯¼æ€§åŸåˆ™ï¼Œé“¾æ¥ä¸­å¾ˆå¤šå…·ä½“æŠ€æœ¯è§„èŒƒå¤§å¤šç”±ABIæ¥å®šä¹‰ï¼Œè¿™å°±å¯¼è‡´åœ¨ä¸åŒç¼–è¯‘å™¨å’Œä¸åŒä½“ç³»ç»“æ„ä¸‹å¯èƒ½åœ¨é“¾æ¥æ—¶ä¼šé‡åˆ°ä¸åŒçš„é—®é¢˜ï¼Œè¿™æ‰æ˜¯C++ç¬¦å·ç®¡ç†å¤æ‚æ€§çš„æ ¸å¿ƒé—®é¢˜æ‰€åœ¨ã€‚è€ŒC++ Modulesåˆ™æ˜¯æ›´å®Œå¤‡çš„ç¬¦å·å¯è§æ€§ç®¡ç†è¯­è¨€ç‰¹æ€§ï¼Œå¯ä»¥ä¸namespaceå®ç°äº’è¡¥ï¼Œè€Œä¸”åœ¨é“¾æ¥ä¸Šä¹Ÿç»™å‡ºäº†æ›´å¤šçš„åŸåˆ™ï¼ˆè™½ç„¶è¿˜æ˜¯æ— æ³•å®Œå…¨è§£å†³ABIé—®é¢˜ï¼‰ï¼Œè®©ç¬¦å·ç®¡ç†æ›´åŠ æ˜“äºç†è§£ï¼Œæ›´æ¥è¿‘ç°ä»£ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦é™ä½æ•´ä½“ç¬¦å·ç®¡ç†çš„å¤æ‚æ€§ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1674027941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1275357,"avatar":"https://static001.geekbang.org/account/avatar/00/13/75/dd/9ead6e69.jpg","nickname":"é»„æµ·å³°","note":"","ucode":"E9340719BC96B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":628521,"discussion_content":"æ„æ€æ˜¯aå•å…ƒè¿™ä¸ªç¼–è¯‘å™¨ç¼–ï¼Œbå•å…ƒå¦ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œæœ€åé“¾æ¥åˆç”¨ä¸åŒé“¾æ¥å™¨ï¼Ÿè¿™æ ·ænamespaceæ‰æœ‰é“¾æ¥é—®é¢˜ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1695427767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":600129,"ip_address":"å¹¿ä¸œ","group_id":0},"score":628521,"extra":""}]}]},{"had_liked":false,"id":366617,"user_name":"Geek_7c0961","can_delete":false,"product_type":"c1","uid":2277181,"ip_address":"ç¾å›½","ucode":"B1482E64FF9E4E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ8aLz0tWdsZuMiaNUAd0dicSD9M6A77seMGFdHgvsQwOzN8ztYPiaJSo53DcbjQWUQpw4pf4rI2f7vg/132","comment_is_top":false,"comment_ctime":1673997797,"is_pvip":true,"replies":[{"id":133595,"content":"æ¯”å¦‚ä»¥ä¸‹ä»£ç \na.cpp:\n#include &lt;iostream&gt;\n\nstatic void print() {\n  std::cout &lt;&lt; &quot;Print in A&quot; &lt;&lt; std::endl;\n}\n\nvoid fa() {\n    print();\n}\n \nb.cpp:\n#include &lt;iostream&gt;\n\nstatic void print() {\n  std::cout &lt;&lt; &quot;Print in B&quot; &lt;&lt; std::endl;\n}\n\nvoid fb() {\n    print();\n}\n\nmain.cpp\n\nextern void fa();\nextern void fa();\n\nint main() {\n  fa();\n  fb();\n\n  return 0;\n}\n\nè¿™é‡Œa.cppå’Œb.cppä¸¤ä¸ªç¼–è¯‘å•å…ƒéƒ½æœ‰printå‡½æ•°ï¼Œä½†æ˜¯å‡½æ•°ä½¿ç”¨äº†staticä¿®é¥°ç¬¦ï¼Œå› æ­¤printå‡½æ•°ä»…å¯¹å„è‡ªç¼–è¯‘å•å…ƒå†…éƒ¨å¯è§ï¼Œæ‰€ä»¥é“¾æ¥æ—¶ä¸ä¼šå¯¼è‡´ç¬¦å·å†²çªé—®é¢˜ã€‚ä¼šæ­£ç¡®è¾“å‡ºï¼š\nPrint in A\nPrint in B","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1006976,"ctime":1674028420,"ip_address":"æ±Ÿè‹","comment_id":366617,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100523801,"comment_content":"&quot;è¿™ä¹Ÿèƒ½å¤§é‡å‡å°‘ç¼–è¯‘å•å…ƒä¹‹é—´çš„ç¬¦å·å†²çªé—®é¢˜ï¼Œæ¯•ç«Ÿå¯èƒ½å‡ºç°ï¼Œä¸¤ä¸ªç¼–è¯‘å•å…ƒå®šä¹‰äº†åŒåï¼Œä½†åªæƒ³åœ¨ç¼–è¯‘å•å…ƒå†…éƒ¨ä½¿ç”¨å‡½æ•°çš„æƒ…å†µï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³ç»™è¿™äº›å‡½æ•°åŠ ä¸Šå†—é•¿çš„å‰ç¼€ã€‚é‚£è¿™ä¸ªæ—¶å€™ï¼Œåªéœ€è¦ä½¿ç”¨ static ä¿®é¥°ç¬¦ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨ A å’Œ B ä¸­éƒ½å®šä¹‰ static å‡½æ•° to_intï¼Œç„¶åå†ç¼–è¯‘é“¾æ¥ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°ç¬¦å·å†²çªçš„é—®é¢˜ã€‚&quot; è¿™å—å„¿èƒ½å¦ç»™ä¸ªå…·ä½“çš„ä»£ç ç¤ºä¾‹?","like_count":2,"discussions":[{"author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600133,"discussion_content":"æ¯”å¦‚ä»¥ä¸‹ä»£ç \na.cpp:\n#include &lt;iostream&gt;\n\nstatic void print() {\n  std::cout &lt;&lt; &#34;Print in A&#34; &lt;&lt; std::endl;\n}\n\nvoid fa() {\n    print();\n}\n \nb.cpp:\n#include &lt;iostream&gt;\n\nstatic void print() {\n  std::cout &lt;&lt; &#34;Print in B&#34; &lt;&lt; std::endl;\n}\n\nvoid fb() {\n    print();\n}\n\nmain.cpp\n\nextern void fa();\nextern void fa();\n\nint main() {\n  fa();\n  fb();\n\n  return 0;\n}\n\nè¿™é‡Œa.cppå’Œb.cppä¸¤ä¸ªç¼–è¯‘å•å…ƒéƒ½æœ‰printå‡½æ•°ï¼Œä½†æ˜¯å‡½æ•°ä½¿ç”¨äº†staticä¿®é¥°ç¬¦ï¼Œå› æ­¤printå‡½æ•°ä»…å¯¹å„è‡ªç¼–è¯‘å•å…ƒå†…éƒ¨å¯è§ï¼Œæ‰€ä»¥é“¾æ¥æ—¶ä¸ä¼šå¯¼è‡´ç¬¦å·å†²çªé—®é¢˜ã€‚ä¼šæ­£ç¡®è¾“å‡ºï¼š\nPrint in A\nPrint in B","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674028420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2277181,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ8aLz0tWdsZuMiaNUAd0dicSD9M6A77seMGFdHgvsQwOzN8ztYPiaJSo53DcbjQWUQpw4pf4rI2f7vg/132","nickname":"Geek_7c0961","note":"","ucode":"B1482E64FF9E4E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":601035,"discussion_content":"è°¢è°¢ï¼Œè€å¸ˆè§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675000362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":600133,"ip_address":"ç¾å›½","group_id":0},"score":601035,"extra":""}]},{"author":{"id":1047043,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","nickname":"é£æ¸…æ‰¬","note":"","ucode":"651F1390B64953","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":606786,"discussion_content":"main.cppä¸­æœ‰ä¸ªå°é”™è¯¯ extern void fb(); ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1677407082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366879,"user_name":"å°æ ·","can_delete":false,"product_type":"c1","uid":1075443,"ip_address":"æ±Ÿè¥¿","ucode":"0D05E1D31150F1","user_header":"https://static001.geekbang.org/account/avatar/00/10/68/f3/22481a37.jpg","comment_is_top":false,"comment_ctime":1674524161,"is_pvip":false,"replies":[{"id":133862,"content":"æ˜¯çš„ï¼Œæ‰€ä»¥è½¯ä»¶å·¥ç¨‹éœ€è¦ç¡®å®šç§ç§è§„èŒƒï¼Œå°±æ˜¯ä¸ºäº†å°½é‡è§„é¿è¿™äº›é—®é¢˜ï¼Œä½†åœ¨å®é™…çš„å¤§é¡¹ç›®ä¸­è¿˜æ˜¯å¾ˆéš¾å®Œå…¨é¿å…ï¼Œå°¤å…¶æ˜¯è¦é›†æˆå¤§é‡ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ä¼šæ›´åŠ å¤´ç—›ã€‚\nç»éªŒç§¯ç´¯å¾ˆé‡è¦ï¼Œè€Œä¸”å¾ˆå€¼é’±ã€‚è®°å¾—æ€»ç»“å‡ºè‡ªå·±çš„ä¸€å¥—å®è·µæ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1006976,"ctime":1675349638,"ip_address":"æ±Ÿè‹","comment_id":366879,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100523801,"comment_content":"å¤ªå¯æ€•äº†ï¼Œä»¥å‰æ²¡æœ‰æƒ³è¿‡è¿™ç§é—®é¢˜ã€‚\nå®é™…ç”¨åˆ°çš„ä»£ç è§„æ¨¡å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œä¸€ä¸ªäººå°±èƒ½å®Œå…¨æŒæ¡å„ä¸ªæ¨¡å—ï¼Œä¹Ÿå°±ä¸ä¼šæœ‰å†²çªã€‚ç°åœ¨æ¥çœ‹ä¼ ç»Ÿä¸Šç¬¦å·éš”ç¦»å’Œæ±¡æŸ“é—®é¢˜æ ¹æœ¬å°±æ²¡æœ‰åœ¨è®¾è®¡ä¸Šè§£å†³è¿‡ã€‚è½¯ä»¶å·¥ç¨‹è§„æ¨¡å¤§åå¿…ç„¶æœ‰å†²çªé—®é¢˜ã€‚","like_count":1,"discussions":[{"author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601688,"discussion_content":"æ˜¯çš„ï¼Œæ‰€ä»¥è½¯ä»¶å·¥ç¨‹éœ€è¦ç¡®å®šç§ç§è§„èŒƒï¼Œå°±æ˜¯ä¸ºäº†å°½é‡è§„é¿è¿™äº›é—®é¢˜ï¼Œä½†åœ¨å®é™…çš„å¤§é¡¹ç›®ä¸­è¿˜æ˜¯å¾ˆéš¾å®Œå…¨é¿å…ï¼Œå°¤å…¶æ˜¯è¦é›†æˆå¤§é‡ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ä¼šæ›´åŠ å¤´ç—›ã€‚\nç»éªŒç§¯ç´¯å¾ˆé‡è¦ï¼Œè€Œä¸”å¾ˆå€¼é’±ã€‚è®°å¾—æ€»ç»“å‡ºè‡ªå·±çš„ä¸€å¥—å®è·µæ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675349638,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366559,"user_name":"tang_ming_wu","can_delete":false,"product_type":"c1","uid":2566054,"ip_address":"å¹¿ä¸œ","ucode":"98E5847CEF8B84","user_header":"https://static001.geekbang.org/account/avatar/00/27/27/a6/32e9479b.jpg","comment_is_top":false,"comment_ctime":1673925906,"is_pvip":false,"replies":[{"id":133574,"content":"ä¸ä¸€å®šï¼ŒC++å¹¶æ²¡æœ‰å®šä¹‰äºŒè¿›åˆ¶å‡½æ•°åœ°å€å¡«å……çš„æ–¹å¼ï¼Œè¿™å®Œå…¨å–å†³äºæ“ä½œç³»ç»Ÿä¸ç‰¹å®šä½“ç³»ç»“æ„çš„ABIï¼Œæœ‰å¯èƒ½æ˜¯ç›¸å¯¹åœ°å€ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç»å¯¹åœ°å€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1006976,"ctime":1673966919,"ip_address":"æ±Ÿè‹","comment_id":366559,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100523801,"comment_content":"é“¾æ¥è¿‡ç¨‹ï¼Œå‡½æ•°åœ°å€å¡«å……ï¼Œæ˜¯ä¸æ˜¯éƒ½æ˜¯ç›¸å¯¹åœ°å€ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600062,"discussion_content":"ä¸ä¸€å®šï¼ŒC++å¹¶æ²¡æœ‰å®šä¹‰äºŒè¿›åˆ¶å‡½æ•°åœ°å€å¡«å……çš„æ–¹å¼ï¼Œè¿™å®Œå…¨å–å†³äºæ“ä½œç³»ç»Ÿä¸ç‰¹å®šä½“ç³»ç»“æ„çš„ABIï¼Œæœ‰å¯èƒ½æ˜¯ç›¸å¯¹åœ°å€ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç»å¯¹åœ°å€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673966919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366537,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"åŒ—äº¬","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1673916227,"is_pvip":false,"replies":[{"id":133557,"content":"A1ï¼šã€ŠåŠ¨æ€è§„åˆ’é¢è¯•å®å…¸ã€‹\nA2ï¼šå› ä¸ºC++ç¼–è¯‘æœŸæ”¯æŒé’ˆå¯¹å‡½æ•°è°ƒç”¨çš„å†…è”ä¼˜åŒ–ã€‚\nå°†å‡½æ•°å®ç°æ”¾åˆ°å¤´æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘æœŸå¯ä»¥æ ¹æ®å®é™…æƒ…å†µå¯¹å‡½æ•°è°ƒç”¨è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚å°†å‡½æ•°è°ƒç”¨æ›¿æ¢æˆå‡½æ•°çš„å®ç°ä»£ç ï¼Œè¿™æ ·é’ˆå¯¹éƒ¨åˆ†è¾ƒçŸ­çš„å‡½æ•°å¯ä»¥æŠµæ¶ˆæ‰å‡½æ•°è°ƒç”¨çš„æ€§èƒ½æŸè€—ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä½•æ˜ç¡®æ ‡ä¸ºinlineçš„å‡½æ•°å®šä¹‰éƒ½ä¸€å®šè¦æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1006976,"ctime":1673923343,"ip_address":"æ±Ÿè‹","comment_id":366537,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100523801,"comment_content":"è¯·æ•™ä¸¤ä¸ªé—®é¢˜ï¼š\nQ1ï¼šç¬¬ä¸€ä¸ªä¸“æ æ˜¯ä»€ä¹ˆï¼Ÿ\n\nQ2ï¼šå®ç°æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ä¸ºä»€ä¹ˆå¯ä»¥æé«˜è¿è¡Œæ€§èƒ½ï¼Ÿ\næ–‡ä¸­æœ‰è¿™æ ·ä¸€å¥è¯â€œä½†æ˜¯ä¸ºäº†æé«˜è¿è¡Œæ—¶æ€§èƒ½ï¼Œå¼€å‘è€…ä¹Ÿä¼šè€ƒè™‘å°†å®ç°ç›´æ¥æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚â€ ä¸ºä»€ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599977,"discussion_content":"A1ï¼šã€ŠåŠ¨æ€è§„åˆ’é¢è¯•å®å…¸ã€‹\nA2ï¼šå› ä¸ºC++ç¼–è¯‘æœŸæ”¯æŒé’ˆå¯¹å‡½æ•°è°ƒç”¨çš„å†…è”ä¼˜åŒ–ã€‚\nå°†å‡½æ•°å®ç°æ”¾åˆ°å¤´æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘æœŸå¯ä»¥æ ¹æ®å®é™…æƒ…å†µå¯¹å‡½æ•°è°ƒç”¨è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚å°†å‡½æ•°è°ƒç”¨æ›¿æ¢æˆå‡½æ•°çš„å®ç°ä»£ç ï¼Œè¿™æ ·é’ˆå¯¹éƒ¨åˆ†è¾ƒçŸ­çš„å‡½æ•°å¯ä»¥æŠµæ¶ˆæ‰å‡½æ•°è°ƒç”¨çš„æ€§èƒ½æŸè€—ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä½•æ˜ç¡®æ ‡ä¸ºinlineçš„å‡½æ•°å®šä¹‰éƒ½ä¸€å®šè¦æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1673923343,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"å¬æ°´çš„æ¹–","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599969,"discussion_content":"ç¬¬ä¸€ä¸ªä¸“æ ã€ŠåŠ¨æ€è§„åˆ’é¢è¯•å®å…¸ã€‹https://time.geekbang.org/column/intro/10006050","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673921188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386170,"user_name":"ä¸­å±±æµªå­","can_delete":false,"product_type":"c1","uid":1055296,"ip_address":"æ±Ÿè‹","ucode":"25D0F8462473D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/40/f10493ef.jpg","comment_is_top":false,"comment_ctime":1704257334,"is_pvip":false,"replies":[{"id":140886,"content":"å¯ä»¥ç”¨binutilsä¸­çš„objdump&#47;nmæŸ¥çœ‹ç¬¦å·ï¼Œå¦‚æœæ˜¯Windowsä¸‹ç”Ÿæˆçš„PE&#47;COFFæ ¼å¼çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ç”¨VCçš„dumpbinæŸ¥çœ‹ç¬¦å·","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1006976,"ctime":1704988777,"ip_address":"ä¸Šæµ·","comment_id":386170,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100523801,"comment_content":"â€œ b.o ä¸­ä¼šç”Ÿæˆä¸€ä¸ªåä¸º add çš„ç¬¦å·â€ä¸€èˆ¬æ˜¯ç”¨ä»€ä¹ˆå·¥å…·æˆ–è€…æ€ä¹ˆæŸ¥çœ‹ç”Ÿæˆçš„äºŒè¿›åˆ¶ä¸­çš„ç¬¦å·ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":635631,"discussion_content":"å¯ä»¥ç”¨binutilsä¸­çš„objdump/nmæŸ¥çœ‹ç¬¦å·ï¼Œå¦‚æœæ˜¯Windowsä¸‹ç”Ÿæˆçš„PE/COFFæ ¼å¼çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ç”¨VCçš„dumpbinæŸ¥çœ‹ç¬¦å·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1704988777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":366734,"user_name":"ä¸äºŒ","can_delete":false,"product_type":"c1","uid":2409976,"ip_address":"æµ™æ±Ÿ","ucode":"DDB885462EB91B","user_header":"https://static001.geekbang.org/account/avatar/00/24/c5/f8/623a0375.jpg","comment_is_top":false,"comment_ctime":1674121581,"is_pvip":false,"replies":[{"id":133684,"content":"æŒæ¡C++çš„è¿‡å»ï¼Œæ‰èƒ½æ›´å¥½çš„ç†è§£C++çš„æœªæ¥ã€‚è™½ç„¶è¿™æ˜¯C++ç¼–ç¨‹è¯­è¨€å¤æ‚æ€§çš„ä¸€ä¸ªç¼©å½±ï¼Œä½†æ˜¯æœ‰åŠ©äºå¤§å®¶ç†è§£ç°ä»£C++ã€‚å¦‚æœå¯¹è¿™äº›æ—§æœ‰æ¦‚å¿µæ„Ÿå…´è¶£ï¼Œå¯ä»¥å›é¡¾ä¸€ä¸‹è¿™äº›æ¦‚å¿µã€‚æœ‰ä»»ä½•é—®é¢˜ä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼Œæˆ‘ä¼šè·Ÿä½ ä¸€èµ·æ¢è®¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1006976,"ctime":1674470141,"ip_address":"æ±Ÿè‹","comment_id":366734,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100523801,"comment_content":"å†å²æŒºå¥½çš„ï¼Œä½†æ˜¯é‡Œé¢æ¦‚å¿µå¤ªå¤šï¼Œè§£é‡Šä¸æ¸…æ¥šæ„Ÿè§‰æ¶ˆåŒ–ä¸äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1006976,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5d/80/0c52be53.jpg","nickname":"å¢èª‰å£°","note":"","ucode":"93C5EFC39EB9C6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600523,"discussion_content":"æŒæ¡C++çš„è¿‡å»ï¼Œæ‰èƒ½æ›´å¥½çš„ç†è§£C++çš„æœªæ¥ã€‚è™½ç„¶è¿™æ˜¯C++ç¼–ç¨‹è¯­è¨€å¤æ‚æ€§çš„ä¸€ä¸ªç¼©å½±ï¼Œä½†æ˜¯æœ‰åŠ©äºå¤§å®¶ç†è§£ç°ä»£C++ã€‚å¦‚æœå¯¹è¿™äº›æ—§æœ‰æ¦‚å¿µæ„Ÿå…´è¶£ï¼Œå¯ä»¥å›é¡¾ä¸€ä¸‹è¿™äº›æ¦‚å¿µã€‚æœ‰ä»»ä½•é—®é¢˜ä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼Œæˆ‘ä¼šè·Ÿä½ ä¸€èµ·æ¢è®¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1674470141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}