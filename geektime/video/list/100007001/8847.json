{"id":8847,"title":"39 | Apollo Java客户端和多语言接入","content":"无","comments":[{"had_liked":false,"id":63389,"user_name":"james","can_delete":false,"product_type":"c3","uid":1049208,"ip_address":"","ucode":"5701899403917C","user_header":"https://static001.geekbang.org/account/avatar/00/10/02/78/23c56bce.jpg","comment_is_top":false,"comment_ctime":1548338776,"is_pvip":false,"replies":[{"id":22559,"content":"如果你的用户管理服务逻辑功能是一样的，只是不同集群配置不同，那么可以采用同一个appid，同一方式部署，但是可以在apollo中建cluster，然后将用户管理服务以不同cluster方式部署，每个cluster服务会从apollo中拉去对应cluster的配置。具体请参考apollo的自定义cluster功能:https:&#47;&#47;github.com&#47;ctripcorp&#47;apollo&#47;wiki&#47;Apollo%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E4%BB%8B%E7%BB%8D。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1548508974,"ip_address":"","comment_id":63389,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师, 比如无状态多个用户管理服务的 appid 都写一样(如: user-service) 可以吗?  好像没有讲这部分, 还是说必须携程user-service01, user-service02, 如果是这样的话部署起来就费劲了","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437569,"discussion_content":"如果你的用户管理服务逻辑功能是一样的，只是不同集群配置不同，那么可以采用同一个appid，同一方式部署，但是可以在apollo中建cluster，然后将用户管理服务以不同cluster方式部署，每个cluster服务会从apollo中拉去对应cluster的配置。具体请参考apollo的自定义cluster功能:https://github.com/ctripcorp/apollo/wiki/Apollo%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E4%BB%8B%E7%BB%8D。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548508974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24778,"user_name":"大卫","can_delete":false,"product_type":"c3","uid":1019127,"ip_address":"","ucode":"D861709E483793","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/f7/a4de6f64.jpg","comment_is_top":false,"comment_ctime":1537192967,"is_pvip":false,"replies":[{"id":9633,"content":"谢谢更正🌹，是+连接的","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1537675931,"ip_address":"","comment_id":24778,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"视频中本地缓存文件名是+连接的，不是-连接的。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424109,"discussion_content":"谢谢更正🌹，是+连接的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537675931,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201925,"user_name":"J.Smile","can_delete":false,"product_type":"c3","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/d1ab239e.jpg","comment_is_top":false,"comment_ctime":1585878073,"is_pvip":false,"replies":[{"id":75951,"content":"apollo客户端配置方式有可能更新，具体可参考apollo官方的&quot;Java客户端使用指南&quot;：https:&#47;&#47;github.com&#47;ctripcorp&#47;apollo&#47;wiki&#47;Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1586170814,"ip_address":"","comment_id":201925,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":" springboot项目，如那些apollo.meta、env直接再resource&#47;META-INF&#47;app.properties下配置也是可以的.","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490458,"discussion_content":"apollo客户端配置方式有可能更新，具体可参考apollo官方的&amp;quot;Java客户端使用指南&amp;quot;：https://github.com/ctripcorp/apollo/wiki/Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586170814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127058,"user_name":"初音未来","can_delete":false,"product_type":"c3","uid":1274518,"ip_address":"","ucode":"3AE23DBC649B97","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erKFNFAQl3ibwlic54a5SQYAMhQYeVtMnSmMahZZjyqG2d66whxbEE3I3IyD07pSmte5DSibr71m6A9g/132","comment_is_top":false,"comment_ctime":1566547021,"is_pvip":false,"replies":[{"id":47034,"content":"你好，apollo java客户端配置可以参考官方文档，很详细：\nhttps:&#47;&#47;github.com&#47;ctripcorp&#47;apollo&#47;wiki&#47;Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1566566345,"ip_address":"","comment_id":127058,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师您好，我是在github下载编译好的zip包，请问该怎么配置本地缓存和应用环境","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464299,"discussion_content":"你好，apollo java客户端配置可以参考官方文档，很详细：\nhttps://github.com/ctripcorp/apollo/wiki/Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566566345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117097,"user_name":"贾俊","can_delete":false,"product_type":"c3","uid":1591943,"ip_address":"","ucode":"A2E6DD5BAF3E27","user_header":"https://static001.geekbang.org/account/avatar/00/18/4a/87/b6b91b03.jpg","comment_is_top":false,"comment_ctime":1563967471,"is_pvip":false,"replies":[{"id":42843,"content":"一般我认为4c8g左右的虚拟机或者物理机就OK了。实际还要看生产支持应用的数量和访问量情况，建议做好监控(apollo内置支持CAT监控的)，根据监控数据按需扩容。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1563974121,"ip_address":"","comment_id":117097,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师好，请问生产上portal，config还有数据库服务器的硬件资源有何要求？推荐配置是怎样的","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459820,"discussion_content":"一般我认为4c8g左右的虚拟机或者物理机就OK了。实际还要看生产支持应用的数量和访问量情况，建议做好监控(apollo内置支持CAT监控的)，根据监控数据按需扩容。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563974121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68234,"user_name":"任禹潼","can_delete":false,"product_type":"c3","uid":1369245,"ip_address":"","ucode":"BFDD83CA34E202","user_header":"","comment_is_top":false,"comment_ctime":1550462933,"is_pvip":false,"replies":[{"id":24396,"content":"你好，apollo客户端启动配置主要指meta server地址，配置方式有很多中，环境变量也是一种，包活和Spring Boot集成，具体建议参考官方文档&quot;https:&#47;&#47;github.com&#47;ctripcorp&#47;apollo&#47;wikiJava客户端使用指南#准备工作1.2.2 Apollo Metaserver&quot;","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1550576840,"ip_address":"","comment_id":68234,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，你好，咨询一下spring boot类型项目通过java -jar启动的问题，配置中心用apollo的话，指定不同环境用的是java -jar -Denv=dev *.jar, 其中Denv是否我们可以自定义呢？比如用-Dspring.profiles.active=dev","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439581,"discussion_content":"你好，apollo客户端启动配置主要指meta server地址，配置方式有很多中，环境变量也是一种，包活和Spring Boot集成，具体建议参考官方文档&amp;quot;https://github.com/ctripcorp/apollo/wikiJava客户端使用指南#准备工作1.2.2 Apollo Metaserver&amp;quot;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550576840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":50023,"user_name":"王盛武","can_delete":false,"product_type":"c3","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1544842590,"is_pvip":false,"replies":[{"id":18452,"content":"你指哪个的优先级？关注apollo client相关配置的优先级可参考其官方文档，java客户端使用指南https:&#47;&#47;github.com&#47;ctripcorp&#47;apollo&#47;wiki&#47;Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1545138057,"ip_address":"","comment_id":50023,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"启动参数、OS环境变量、配置文件\n如果同时都配置，优先级是哪样呢？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":432844,"discussion_content":"你指哪个的优先级？关注apollo client相关配置的优先级可参考其官方文档，java客户端使用指南https://github.com/ctripcorp/apollo/wiki/Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545138057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26145,"user_name":"黑夜骑士","can_delete":false,"product_type":"c3","uid":1084527,"ip_address":"","ucode":"202B76FBF97F5D","user_header":"","comment_is_top":false,"comment_ctime":1537506064,"is_pvip":false,"replies":[{"id":10675,"content":"据我了解，一个apollo客户端同一时间只能运行在一个环境，不能同时运行在多个环境。同一个机器可以考虑virtualbox虚拟机或容器隔离部署。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1538481242,"ip_address":"","comment_id":26145,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，我想知道客户端所在运行环境只能是一个么，同一台机器既要部署测试环境又要部署开发环境，这个C盘的地址应该怎么写？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424539,"discussion_content":"据我了解，一个apollo客户端同一时间只能运行在一个环境，不能同时运行在多个环境。同一个机器可以考虑virtualbox虚拟机或容器隔离部署。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538481242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":26141,"user_name":"黑夜骑士","can_delete":false,"product_type":"c3","uid":1084527,"ip_address":"","ucode":"202B76FBF97F5D","user_header":"","comment_is_top":false,"comment_ctime":1537505926,"is_pvip":false,"replies":[{"id":10676,"content":"据我了解，一个apollo客户端同一时间只能运行在一个环境，不能同时运行在多个环境。同一个机器可以考虑virtualbox虚拟机或容器隔离布暑。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1538481366,"ip_address":"","comment_id":26141,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，我想问问，假如客户端支持多个环境，那C盘的properties文件要怎么弄","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424537,"discussion_content":"据我了解，一个apollo客户端同一时间只能运行在一个环境，不能同时运行在多个环境。同一个机器可以考虑virtualbox虚拟机或容器隔离布暑。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538481366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20285,"user_name":"AA","can_delete":false,"product_type":"c3","uid":1103583,"ip_address":"","ucode":"CADCB958D6DA1B","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/df/1e4ecd94.jpg","comment_is_top":false,"comment_ctime":1534347137,"is_pvip":false,"replies":[{"id":7364,"content":"要看这个用户是项目管理员或owner吗？如果是的话用户还是权限的。点击项目编辑按钮，看是否owner或管理员","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1534845030,"ip_address":"","comment_id":20285,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，请教个问题，创建了一个用户，取消了布权限，用户登录进去还是可以自己授权","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422187,"discussion_content":"要看这个用户是项目管理员或owner吗？如果是的话用户还是权限的。点击项目编辑按钮，看是否owner或管理员","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534845030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}