{"id":106153,"title":"09 | 数据和接口模型设计：业务服务","content":"","comments":[{"had_liked":false,"id":112715,"user_name":"undifined","can_delete":false,"product_type":"c3","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1562809185,"is_pvip":false,"replies":[{"id":41033,"content":"你好，课程中的接口主要作用是展示和沟通，没有特别强调规范。对于大多数企业来说，RESTful规范也不是很严格，只有发展到一定阶段和规模的企业才会更多考虑API规范的问题，也就是说API规范是比较奢侈的事情:)。如果你对RESTful API规范感兴趣，可以参考这里：http:&#47;&#47;apistylebook.com&#47;design&#47;guidelines&#47;，这里有国外主流互联网公司的RESTful API风格指导，作者还专门写了一个RESTful API规范的书[The Design of Web API]https:&#47;&#47;www.manning.com&#47;books&#47;the-design-of-web-apis，有兴趣也可以参考。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1562851519,"ip_address":"","comment_id":112715,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师 这些接口看起来不是很符合RESTful的规范，在实际开发过程中也有这样的问题，对于RESTful的最佳实践老师可以给些建议吗 谢谢老师","like_count":10,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457872,"discussion_content":"你好，课程中的接口主要作用是展示和沟通，没有特别强调规范。对于大多数企业来说，RESTful规范也不是很严格，只有发展到一定阶段和规模的企业才会更多考虑API规范的问题，也就是说API规范是比较奢侈的事情:)。如果你对RESTful API规范感兴趣，可以参考这里：http://apistylebook.com/design/guidelines/，这里有国外主流互联网公司的RESTful API风格指导，作者还专门写了一个RESTful API规范的书[The Design of Web API]https://www.manning.com/books/the-design-of-web-apis，有兴趣也可以参考。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562851519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278138,"user_name":"美好时光海苔","can_delete":false,"product_type":"c3","uid":1904626,"ip_address":"","ucode":"CD4637BFC8A7C6","user_header":"https://static001.geekbang.org/account/avatar/00/1d/0f/f2/3f3c0946.jpg","comment_is_top":false,"comment_ctime":1612773709,"is_pvip":false,"replies":[{"id":101152,"content":"你好：\n\n1，可以根据需要在worker表中添加company ID作为外键，以简化某些查询API的存取逻辑。\n2. Company和Admin之间是一对多关系，一个Company可以有多个Admin，但是一个Admin只能关联管理一个公司。Account和Admin之间是一对多关系，一个用户账号可以扮演多个Admin角色，分别管理多个公司，但是实际这种一对关系是否合理，要看具体的业务需要。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1612971158,"ip_address":"","comment_id":278138,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"波波老师你好，\n可能跟本课重点关系不大，但我还是想问一下关于数据模型设计的问题。\n1. 公司数据模型中，worker table 没有 company ID 作为 FK。那么 Worker接口服务模型中 listWorkers API by GroupId and TeamID 的查询是不是就需要多个表join 了。如果有这个API的需求，是不是把Company ID 作为Worker Table 的FK 好一些。\n2. Account 到 Admin 为什么是一对多的关系？难道一个用户可以成为多个Admin吗？老师提到Admin 到 Company 已经是 多对一的关系，一个Admin 可以管理多个公司。那Account 到 Admin 一对多的关系还有必要吗？\n","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515290,"discussion_content":"你好：\n\n1，可以根据需要在worker表中添加company ID作为外键，以简化某些查询API的存取逻辑。\n2. Company和Admin之间是一对多关系，一个Company可以有多个Admin，但是一个Admin只能关联管理一个公司。Account和Admin之间是一对多关系，一个用户账号可以扮演多个Admin角色，分别管理多个公司，但是实际这种一对关系是否合理，要看具体的业务需要。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612971158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":197495,"user_name":"dondon","can_delete":false,"product_type":"c3","uid":1732521,"ip_address":"","ucode":"8DD96E32BC02BD","user_header":"https://static001.geekbang.org/account/avatar/00/1a/6f/a9/ce325b9f.jpg","comment_is_top":false,"comment_ctime":1585381948,"is_pvip":false,"replies":[{"id":75141,"content":"谢谢！","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1585658173,"ip_address":"","comment_id":197495,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"点个赞","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489533,"discussion_content":"谢谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585658173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117901,"user_name":"健健","can_delete":false,"product_type":"c3","uid":1236365,"ip_address":"","ucode":"33E4F5E07F3F67","user_header":"https://static001.geekbang.org/account/avatar/00/12/dd/8d/3e3dbe47.jpg","comment_is_top":false,"comment_ctime":1564186394,"is_pvip":false,"replies":[{"id":43221,"content":"实际业务场景可以考虑表级别的隔离，这样隔离性会更好，之前我做过一个多租户消息队列项目，就是基于每个队列一个表这种隔离设计。Staffjoy项目以教学为主，采用相对简单的逻辑隔离，如果弄成表隔离就有点搞复杂了。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564223894,"ip_address":"","comment_id":117901,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100031401,"comment_content":"老师，请问在做公司相关的表，有没有考虑过根据公司进行分表，就是针对每个公司，都有一套相对应的表，这样可以保证数据的隔离性","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460170,"discussion_content":"实际业务场景可以考虑表级别的隔离，这样隔离性会更好，之前我做过一个多租户消息队列项目，就是基于每个队列一个表这种隔离设计。Staffjoy项目以教学为主，采用相对简单的逻辑隔离，如果弄成表隔离就有点搞复杂了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564223894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1236365,"avatar":"https://static001.geekbang.org/account/avatar/00/12/dd/8d/3e3dbe47.jpg","nickname":"健健","note":"","ucode":"33E4F5E07F3F67","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3386,"discussion_content":"谢谢老师的回复","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564451457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}