{"id":76446,"title":"24 | MySQLæ˜¯æ€ä¹ˆä¿è¯ä¸»å¤‡ä¸€è‡´çš„ï¼Ÿ","content":"<p>åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä¸æ­¢ä¸€æ¬¡åœ°å’Œä½ æåˆ°äº†binlogï¼Œå¤§å®¶çŸ¥é“binlogå¯ä»¥ç”¨æ¥å½’æ¡£ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åšä¸»å¤‡åŒæ­¥ï¼Œä½†å®ƒçš„å†…å®¹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿä¸ºä»€ä¹ˆå¤‡åº“æ‰§è¡Œäº†binlogå°±å¯ä»¥è·Ÿä¸»åº“ä¿æŒä¸€è‡´äº†å‘¢ï¼Ÿä»Šå¤©æˆ‘å°±æ­£å¼åœ°å’Œä½ ä»‹ç»ä¸€ä¸‹å®ƒã€‚</p><p>æ¯«ä¸å¤¸å¼ åœ°è¯´ï¼ŒMySQLèƒ½å¤Ÿæˆä¸ºç°ä¸‹æœ€æµè¡Œçš„å¼€æºæ•°æ®åº“ï¼ŒbinlogåŠŸä¸å¯æ²¡ã€‚</p><p>åœ¨æœ€å¼€å§‹ï¼ŒMySQLæ˜¯ä»¥å®¹æ˜“å­¦ä¹ å’Œæ–¹ä¾¿çš„é«˜å¯ç”¨æ¶æ„ï¼Œè¢«å¼€å‘äººå‘˜é’ççš„ã€‚è€Œå®ƒçš„å‡ ä¹æ‰€æœ‰çš„é«˜å¯ç”¨æ¶æ„ï¼Œéƒ½ç›´æ¥ä¾èµ–äºbinlogã€‚è™½ç„¶è¿™äº›é«˜å¯ç”¨æ¶æ„å·²ç»å‘ˆç°å‡ºè¶Šæ¥è¶Šå¤æ‚çš„è¶‹åŠ¿ï¼Œä½†éƒ½æ˜¯ä»æœ€åŸºæœ¬çš„ä¸€ä¸»ä¸€å¤‡æ¼”åŒ–è¿‡æ¥çš„ã€‚</p><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« æˆ‘ä¸»è¦ä¸ºä½ ä»‹ç»ä¸»å¤‡çš„åŸºæœ¬åŸç†ã€‚ç†è§£äº†èƒŒåçš„è®¾è®¡åŸç†ï¼Œä½ ä¹Ÿå¯ä»¥ä»ä¸šåŠ¡å¼€å‘çš„è§’åº¦ï¼Œæ¥å€Ÿé‰´è¿™äº›è®¾è®¡æ€æƒ³ã€‚</p><h1>MySQLä¸»å¤‡çš„åŸºæœ¬åŸç†</h1><p>å¦‚å›¾1æ‰€ç¤ºå°±æ˜¯åŸºæœ¬çš„ä¸»å¤‡åˆ‡æ¢æµç¨‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/fd/10/fd75a2b37ae6ca709b7f16fe060c2c10.png?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾ 1 MySQLä¸»å¤‡åˆ‡æ¢æµç¨‹</span></center><p>åœ¨çŠ¶æ€1ä¸­ï¼Œå®¢æˆ·ç«¯çš„è¯»å†™éƒ½ç›´æ¥è®¿é—®èŠ‚ç‚¹Aï¼Œè€ŒèŠ‚ç‚¹Bæ˜¯Açš„å¤‡åº“ï¼Œåªæ˜¯å°†Açš„æ›´æ–°éƒ½åŒæ­¥è¿‡æ¥ï¼Œåˆ°æœ¬åœ°æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥ä¿æŒèŠ‚ç‚¹Bå’ŒAçš„æ•°æ®æ˜¯ç›¸åŒçš„ã€‚</p><p>å½“éœ€è¦åˆ‡æ¢çš„æ—¶å€™ï¼Œå°±åˆ‡æˆçŠ¶æ€2ã€‚è¿™æ—¶å€™å®¢æˆ·ç«¯è¯»å†™è®¿é—®çš„éƒ½æ˜¯èŠ‚ç‚¹Bï¼Œè€ŒèŠ‚ç‚¹Aæ˜¯Bçš„å¤‡åº“ã€‚</p><p>åœ¨çŠ¶æ€1ä¸­ï¼Œè™½ç„¶èŠ‚ç‚¹Bæ²¡æœ‰è¢«ç›´æ¥è®¿é—®ï¼Œä½†æ˜¯æˆ‘ä¾ç„¶å»ºè®®ä½ æŠŠèŠ‚ç‚¹Bï¼ˆä¹Ÿå°±æ˜¯å¤‡åº“ï¼‰è®¾ç½®æˆåªè¯»ï¼ˆreadonlyï¼‰æ¨¡å¼ã€‚è¿™æ ·åšï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªè€ƒè™‘ï¼š</p><!-- [[[read_end]]] --><ol>\n<li>\n<p>æœ‰æ—¶å€™ä¸€äº›è¿è¥ç±»çš„æŸ¥è¯¢è¯­å¥ä¼šè¢«æ”¾åˆ°å¤‡åº“ä¸Šå»æŸ¥ï¼Œè®¾ç½®ä¸ºåªè¯»å¯ä»¥é˜²æ­¢è¯¯æ“ä½œï¼›</p>\n</li>\n<li>\n<p>é˜²æ­¢åˆ‡æ¢é€»è¾‘æœ‰bugï¼Œæ¯”å¦‚åˆ‡æ¢è¿‡ç¨‹ä¸­å‡ºç°åŒå†™ï¼Œé€ æˆä¸»å¤‡ä¸ä¸€è‡´ï¼›</p>\n</li>\n<li>\n<p>å¯ä»¥ç”¨readonlyçŠ¶æ€ï¼Œæ¥åˆ¤æ–­èŠ‚ç‚¹çš„è§’è‰²ã€‚</p>\n</li>\n</ol><p>ä½ å¯èƒ½ä¼šé—®ï¼Œæˆ‘æŠŠå¤‡åº“è®¾ç½®æˆåªè¯»äº†ï¼Œè¿˜æ€ä¹ˆè·Ÿä¸»åº“ä¿æŒåŒæ­¥æ›´æ–°å‘¢ï¼Ÿ</p><p>è¿™ä¸ªé—®é¢˜ï¼Œä½ ä¸ç”¨æ‹…å¿ƒã€‚å› ä¸ºreadonlyè®¾ç½®å¯¹è¶…çº§(super)æƒé™ç”¨æˆ·æ˜¯æ— æ•ˆçš„ï¼Œè€Œç”¨äºåŒæ­¥æ›´æ–°çš„çº¿ç¨‹ï¼Œå°±æ‹¥æœ‰è¶…çº§æƒé™ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹çœ‹<strong>èŠ‚ç‚¹Aåˆ°Bè¿™æ¡çº¿çš„å†…éƒ¨æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„</strong>ã€‚å›¾2ä¸­ç”»å‡ºçš„å°±æ˜¯ä¸€ä¸ªupdateè¯­å¥åœ¨èŠ‚ç‚¹Aæ‰§è¡Œï¼Œç„¶ååŒæ­¥åˆ°èŠ‚ç‚¹Bçš„å®Œæ•´æµç¨‹å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a6/a3/a66c154c1bc51e071dd2cc8c1d6ca6a3.png?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾2 ä¸»å¤‡æµç¨‹å›¾</span></center><p>å›¾2ä¸­ï¼ŒåŒ…å«äº†æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­è®²åˆ°çš„binlogå’Œredo logçš„å†™å…¥æœºåˆ¶ç›¸å…³çš„å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°ï¼šä¸»åº“æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æ›´æ–°è¯·æ±‚åï¼Œæ‰§è¡Œå†…éƒ¨äº‹åŠ¡çš„æ›´æ–°é€»è¾‘ï¼ŒåŒæ—¶å†™binlogã€‚</p><p>å¤‡åº“Bè·Ÿä¸»åº“Aä¹‹é—´ç»´æŒäº†ä¸€ä¸ªé•¿è¿æ¥ã€‚ä¸»åº“Aå†…éƒ¨æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸“é—¨ç”¨äºæœåŠ¡å¤‡åº“Bçš„è¿™ä¸ªé•¿è¿æ¥ã€‚ä¸€ä¸ªäº‹åŠ¡æ—¥å¿—åŒæ­¥çš„å®Œæ•´è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>\n<p>åœ¨å¤‡åº“Bä¸Šé€šè¿‡change masterå‘½ä»¤ï¼Œè®¾ç½®ä¸»åº“Açš„IPã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ï¼Œä»¥åŠè¦ä»å“ªä¸ªä½ç½®å¼€å§‹è¯·æ±‚binlogï¼Œè¿™ä¸ªä½ç½®åŒ…å«æ–‡ä»¶åå’Œæ—¥å¿—åç§»é‡ã€‚</p>\n</li>\n<li>\n<p>åœ¨å¤‡åº“Bä¸Šæ‰§è¡Œstart slaveå‘½ä»¤ï¼Œè¿™æ—¶å€™å¤‡åº“ä¼šå¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œå°±æ˜¯å›¾ä¸­çš„io_threadå’Œsql_threadã€‚å…¶ä¸­io_threadè´Ÿè´£ä¸ä¸»åº“å»ºç«‹è¿æ¥ã€‚</p>\n</li>\n<li>\n<p>ä¸»åº“Aæ ¡éªŒå®Œç”¨æˆ·åã€å¯†ç åï¼Œå¼€å§‹æŒ‰ç…§å¤‡åº“Bä¼ è¿‡æ¥çš„ä½ç½®ï¼Œä»æœ¬åœ°è¯»å–binlogï¼Œå‘ç»™Bã€‚</p>\n</li>\n<li>\n<p>å¤‡åº“Bæ‹¿åˆ°binlogåï¼Œå†™åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œç§°ä¸ºä¸­è½¬æ—¥å¿—ï¼ˆrelay logï¼‰ã€‚</p>\n</li>\n<li>\n<p>sql_threadè¯»å–ä¸­è½¬æ—¥å¿—ï¼Œè§£æå‡ºæ—¥å¿—é‡Œçš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œã€‚</p>\n</li>\n</ol><p>è¿™é‡Œéœ€è¦è¯´æ˜ï¼Œåæ¥ç”±äºå¤šçº¿ç¨‹å¤åˆ¶æ–¹æ¡ˆçš„å¼•å…¥ï¼Œsql_threadæ¼”åŒ–æˆä¸ºäº†å¤šä¸ªçº¿ç¨‹ï¼Œè·Ÿæˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„åŸç†æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œæš‚ä¸”ä¸å±•å¼€ã€‚</p><p>åˆ†æå®Œäº†è¿™ä¸ªé•¿è¿æ¥çš„é€»è¾‘ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªé—®é¢˜ï¼šbinlogé‡Œé¢åˆ°åº•æ˜¯ä»€ä¹ˆå†…å®¹ï¼Œä¸ºä»€ä¹ˆå¤‡åº“æ‹¿è¿‡å»å¯ä»¥ç›´æ¥æ‰§è¡Œã€‚</p><h1>binlogçš„ä¸‰ç§æ ¼å¼å¯¹æ¯”</h1><p>æˆ‘åœ¨<a href=\"https://time.geekbang.org/column/article/73161\">ç¬¬15ç¯‡ç­”ç–‘æ–‡ç« </a>ä¸­ï¼Œå’Œä½ æåˆ°è¿‡binlogæœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯statementï¼Œä¸€ç§æ˜¯rowã€‚å¯èƒ½ä½ åœ¨å…¶ä»–èµ„æ–™ä¸Šè¿˜ä¼šçœ‹åˆ°æœ‰ç¬¬ä¸‰ç§æ ¼å¼ï¼Œå«ä½œmixedï¼Œå…¶å®å®ƒå°±æ˜¯å‰ä¸¤ç§æ ¼å¼çš„æ··åˆã€‚</p><p>ä¸ºäº†ä¾¿äºæè¿°binlogçš„è¿™ä¸‰ç§æ ¼å¼é—´çš„åŒºåˆ«ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªè¡¨ï¼Œå¹¶åˆå§‹åŒ–å‡ è¡Œæ•°æ®ã€‚</p><pre><code>mysql&gt; CREATE TABLE `t` (\n  `id` int(11) NOT NULL,\n  `a` int(11) DEFAULT NULL,\n  `t_modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  KEY `a` (`a`),\n  KEY `t_modified`(`t_modified`)\n) ENGINE=InnoDB;\n\ninsert into t values(1,1,'2018-11-13');\ninsert into t values(2,2,'2018-11-12');\ninsert into t values(3,3,'2018-11-11');\ninsert into t values(4,4,'2018-11-10');\ninsert into t values(5,5,'2018-11-09');\n</code></pre><p>å¦‚æœè¦åœ¨è¡¨ä¸­åˆ é™¤ä¸€è¡Œæ•°æ®çš„è¯ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªdeleteè¯­å¥çš„binlogæ˜¯æ€ä¹ˆè®°å½•çš„ã€‚</p><p>æ³¨æ„ï¼Œä¸‹é¢è¿™ä¸ªè¯­å¥åŒ…å«æ³¨é‡Šï¼Œå¦‚æœä½ ç”¨MySQLå®¢æˆ·ç«¯æ¥åšè¿™ä¸ªå®éªŒçš„è¯ï¼Œè¦è®°å¾—åŠ -cå‚æ•°ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å»æ‰æ³¨é‡Šã€‚</p><pre><code>mysql&gt; delete from t /*comment*/  where a&gt;=4 and t_modified&lt;='2018-11-10' limit 1;\n</code></pre><p>å½“binlog_format=statementæ—¶ï¼Œbinlogé‡Œé¢è®°å½•çš„å°±æ˜¯SQLè¯­å¥çš„åŸæ–‡ã€‚ä½ å¯ä»¥ç”¨</p><pre><code>mysql&gt; show binlog events in 'master.000001';\n</code></pre><p>å‘½ä»¤çœ‹binlogä¸­çš„å†…å®¹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b9/31/b9818f73cd7d38a96ddcb75350b52931.png?wh=1882*213\" alt=\"\"></p><center><span class=\"reference\">å›¾3 statementæ ¼å¼binlog ç¤ºä¾‹</span></center><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å›¾3çš„è¾“å‡ºç»“æœã€‚</p><ul>\n<li>ç¬¬ä¸€è¡ŒSET @@SESSION.GTID_NEXT='ANONYMOUSâ€™ä½ å¯ä»¥å…ˆå¿½ç•¥ï¼Œåé¢æ–‡ç« æˆ‘ä»¬ä¼šåœ¨ä»‹ç»ä¸»å¤‡åˆ‡æ¢çš„æ—¶å€™å†æåˆ°ï¼›</li>\n<li>ç¬¬äºŒè¡Œæ˜¯ä¸€ä¸ªBEGINï¼Œè·Ÿç¬¬å››è¡Œçš„commitå¯¹åº”ï¼Œè¡¨ç¤ºä¸­é—´æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼›</li>\n<li>ç¬¬ä¸‰è¡Œå°±æ˜¯çœŸå®æ‰§è¡Œçš„è¯­å¥äº†ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨çœŸå®æ‰§è¡Œçš„deleteå‘½ä»¤ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€ä¸ªâ€œuse â€˜testâ€™â€å‘½ä»¤ã€‚è¿™æ¡å‘½ä»¤ä¸æ˜¯æˆ‘ä»¬ä¸»åŠ¨æ‰§è¡Œçš„ï¼Œè€Œæ˜¯MySQLæ ¹æ®å½“å‰è¦æ“ä½œçš„è¡¨æ‰€åœ¨çš„æ•°æ®åº“ï¼Œè‡ªè¡Œæ·»åŠ çš„ã€‚è¿™æ ·åšå¯ä»¥ä¿è¯æ—¥å¿—ä¼ åˆ°å¤‡åº“å»æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸è®ºå½“å‰çš„å·¥ä½œçº¿ç¨‹åœ¨å“ªä¸ªåº“é‡Œï¼Œéƒ½èƒ½å¤Ÿæ­£ç¡®åœ°æ›´æ–°åˆ°teståº“çš„è¡¨tã€‚<br>\nuse 'testâ€™å‘½ä»¤ä¹‹åçš„delete è¯­å¥ï¼Œå°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„SQLåŸæ–‡äº†ã€‚å¯ä»¥çœ‹åˆ°ï¼Œbinlogâ€œå¿ å®â€åœ°è®°å½•äº†SQLå‘½ä»¤ï¼Œç”šè‡³è¿æ³¨é‡Šä¹Ÿä¸€å¹¶è®°å½•äº†ã€‚</li>\n<li>æœ€åä¸€è¡Œæ˜¯ä¸€ä¸ªCOMMITã€‚ä½ å¯ä»¥çœ‹åˆ°é‡Œé¢å†™ç€xid=61ã€‚ä½ è¿˜è®°å¾—è¿™ä¸ªXIDæ˜¯åšä»€ä¹ˆç”¨çš„å—ï¼Ÿå¦‚æœè®°å¿†æ¨¡ç³Šäº†ï¼Œå¯ä»¥å†å›é¡¾ä¸€ä¸‹<a href=\"https://time.geekbang.org/column/article/73161\">ç¬¬15ç¯‡æ–‡ç« </a>ä¸­çš„ç›¸å…³å†…å®¹ã€‚</li>\n</ul><p>ä¸ºäº†è¯´æ˜statement å’Œ rowæ ¼å¼çš„åŒºåˆ«ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™æ¡deleteå‘½ä»¤çš„æ‰§è¡Œæ•ˆæœå›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/96/2b/96c2be9c0fcbff66883118526b26652b.png?wh=1893*315\" alt=\"\"></p><center><span class=\"reference\">å›¾4 deleteæ‰§è¡Œwarnings</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿è¡Œè¿™æ¡deleteå‘½ä»¤äº§ç”Ÿäº†ä¸€ä¸ªwarningï¼ŒåŸå› æ˜¯å½“å‰binlogè®¾ç½®çš„æ˜¯statementæ ¼å¼ï¼Œå¹¶ä¸”è¯­å¥ä¸­æœ‰limitï¼Œæ‰€ä»¥è¿™ä¸ªå‘½ä»¤å¯èƒ½æ˜¯unsafeçš„ã€‚</p><p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºdelete å¸¦limitï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°ä¸»å¤‡æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚æ¯”å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼š</p><ol>\n<li>\n<p>å¦‚æœdeleteè¯­å¥ä½¿ç”¨çš„æ˜¯ç´¢å¼•aï¼Œé‚£ä¹ˆä¼šæ ¹æ®ç´¢å¼•aæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´åˆ é™¤çš„æ˜¯a=4è¿™ä¸€è¡Œï¼›</p>\n</li>\n<li>\n<p>ä½†å¦‚æœä½¿ç”¨çš„æ˜¯ç´¢å¼•t_modifiedï¼Œé‚£ä¹ˆåˆ é™¤çš„å°±æ˜¯ t_modified='2018-11-09â€™ä¹Ÿå°±æ˜¯a=5è¿™ä¸€è¡Œã€‚</p>\n</li>\n</ol><p>ç”±äºstatementæ ¼å¼ä¸‹ï¼Œè®°å½•åˆ°binlogé‡Œçš„æ˜¯è¯­å¥åŸæ–‡ï¼Œå› æ­¤å¯èƒ½ä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼šåœ¨ä¸»åº“æ‰§è¡Œè¿™æ¡SQLè¯­å¥çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯ç´¢å¼•aï¼›è€Œåœ¨å¤‡åº“æ‰§è¡Œè¿™æ¡SQLè¯­å¥çš„æ—¶å€™ï¼Œå´ä½¿ç”¨äº†ç´¢å¼•t_modifiedã€‚å› æ­¤ï¼ŒMySQLè®¤ä¸ºè¿™æ ·å†™æ˜¯æœ‰é£é™©çš„ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘æŠŠbinlogçš„æ ¼å¼æ”¹ä¸ºbinlog_format=â€˜rowâ€™ï¼Œ æ˜¯ä¸æ˜¯å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™æ—¶å€™binogä¸­çš„å†…å®¹å§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d6/26/d67a38db154afff610ae3bb64e266826.png?wh=1920*533\" alt=\"\"></p><center><span class=\"reference\">å›¾5 rowæ ¼å¼binlog ç¤ºä¾‹</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸statementæ ¼å¼çš„binlogç›¸æ¯”ï¼Œå‰åçš„BEGINå’ŒCOMMITæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œrowæ ¼å¼çš„binlogé‡Œæ²¡æœ‰äº†SQLè¯­å¥çš„åŸæ–‡ï¼Œè€Œæ˜¯æ›¿æ¢æˆäº†ä¸¤ä¸ªeventï¼šTable_mapå’ŒDelete_rowsã€‚</p><ol>\n<li>\n<p>Table_map eventï¼Œç”¨äºè¯´æ˜æ¥ä¸‹æ¥è¦æ“ä½œçš„è¡¨æ˜¯teståº“çš„è¡¨t;</p>\n</li>\n<li>\n<p>Delete_rows eventï¼Œç”¨äºå®šä¹‰åˆ é™¤çš„è¡Œä¸ºã€‚</p>\n</li>\n</ol><p>å…¶å®ï¼Œæˆ‘ä»¬é€šè¿‡å›¾5æ˜¯çœ‹ä¸åˆ°è¯¦ç»†ä¿¡æ¯çš„ï¼Œè¿˜éœ€è¦å€ŸåŠ©mysqlbinlogå·¥å…·ï¼Œç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤è§£æå’ŒæŸ¥çœ‹binlogä¸­çš„å†…å®¹ã€‚å› ä¸ºå›¾5ä¸­çš„ä¿¡æ¯æ˜¾ç¤ºï¼Œè¿™ä¸ªäº‹åŠ¡çš„binlogæ˜¯ä»8900è¿™ä¸ªä½ç½®å¼€å§‹çš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨start-positionå‚æ•°æ¥æŒ‡å®šä»è¿™ä¸ªä½ç½®çš„æ—¥å¿—å¼€å§‹è§£æã€‚</p><pre><code>mysqlbinlog  -vv data/master.000001 --start-position=8900;\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/c3/c2/c342cf480d23b05d30a294b114cebfc2.png?wh=1920*664\" alt=\"\"></p><center><span class=\"reference\">å›¾6 rowæ ¼å¼binlog ç¤ºä¾‹çš„è¯¦ç»†ä¿¡æ¯</span></center><p>ä»è¿™ä¸ªå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å‡ ä¸ªä¿¡æ¯ï¼š</p><ul>\n<li>server id 1ï¼Œè¡¨ç¤ºè¿™ä¸ªäº‹åŠ¡æ˜¯åœ¨server_id=1çš„è¿™ä¸ªåº“ä¸Šæ‰§è¡Œçš„ã€‚</li>\n<li>æ¯ä¸ªeventéƒ½æœ‰CRC32çš„å€¼ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘æŠŠå‚æ•°binlog_checksumè®¾ç½®æˆäº†CRC32ã€‚</li>\n<li>Table_map eventè·Ÿåœ¨å›¾5ä¸­çœ‹åˆ°çš„ç›¸åŒï¼Œæ˜¾ç¤ºäº†æ¥ä¸‹æ¥è¦æ‰“å¼€çš„è¡¨ï¼Œmapåˆ°æ•°å­—226ã€‚ç°åœ¨æˆ‘ä»¬è¿™æ¡SQLè¯­å¥åªæ“ä½œäº†ä¸€å¼ è¡¨ï¼Œå¦‚æœè¦æ“ä½œå¤šå¼ è¡¨å‘¢ï¼Ÿæ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„Table_map eventã€éƒ½ä¼šmapåˆ°ä¸€ä¸ªå•ç‹¬çš„æ•°å­—ï¼Œç”¨äºåŒºåˆ†å¯¹ä¸åŒè¡¨çš„æ“ä½œã€‚</li>\n<li>æˆ‘ä»¬åœ¨mysqlbinlogçš„å‘½ä»¤ä¸­ï¼Œä½¿ç”¨äº†-vvå‚æ•°æ˜¯ä¸ºäº†æŠŠå†…å®¹éƒ½è§£æå‡ºæ¥ï¼Œæ‰€ä»¥ä»ç»“æœé‡Œé¢å¯ä»¥çœ‹åˆ°å„ä¸ªå­—æ®µçš„å€¼ï¼ˆæ¯”å¦‚ï¼Œ@1=4ã€ @2=4è¿™äº›å€¼ï¼‰ã€‚</li>\n<li>binlog_row_imageçš„é»˜è®¤é…ç½®æ˜¯FULLï¼Œå› æ­¤Delete_eventé‡Œé¢ï¼ŒåŒ…å«äº†åˆ æ‰çš„è¡Œçš„æ‰€æœ‰å­—æ®µçš„å€¼ã€‚å¦‚æœæŠŠbinlog_row_imageè®¾ç½®ä¸ºMINIMALï¼Œåˆ™åªä¼šè®°å½•å¿…è¦çš„ä¿¡æ¯ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå°±æ˜¯åªä¼šè®°å½•id=4è¿™ä¸ªä¿¡æ¯ã€‚</li>\n<li>æœ€åçš„Xid eventï¼Œç”¨äºè¡¨ç¤ºäº‹åŠ¡è¢«æ­£ç¡®åœ°æäº¤äº†ã€‚</li>\n</ul><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œå½“binlog_formatä½¿ç”¨rowæ ¼å¼çš„æ—¶å€™ï¼Œbinlogé‡Œé¢è®°å½•äº†çœŸå®åˆ é™¤è¡Œçš„ä¸»é”®idï¼Œè¿™æ ·binlogä¼ åˆ°å¤‡åº“å»çš„æ—¶å€™ï¼Œå°±è‚¯å®šä¼šåˆ é™¤id=4çš„è¡Œï¼Œä¸ä¼šæœ‰ä¸»å¤‡åˆ é™¤ä¸åŒè¡Œçš„é—®é¢˜ã€‚</p><h1>ä¸ºä»€ä¹ˆä¼šæœ‰mixedæ ¼å¼çš„binlogï¼Ÿ</h1><p>åŸºäºä¸Šé¢çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸ªé—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆä¼šæœ‰mixedè¿™ç§binlogæ ¼å¼çš„å­˜åœ¨åœºæ™¯ï¼Ÿ</strong>æ¨è®ºè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul>\n<li>å› ä¸ºæœ‰äº›statementæ ¼å¼çš„binlogå¯èƒ½ä¼šå¯¼è‡´ä¸»å¤‡ä¸ä¸€è‡´ï¼Œæ‰€ä»¥è¦ä½¿ç”¨rowæ ¼å¼ã€‚</li>\n<li>ä½†rowæ ¼å¼çš„ç¼ºç‚¹æ˜¯ï¼Œå¾ˆå ç©ºé—´ã€‚æ¯”å¦‚ä½ ç”¨ä¸€ä¸ªdeleteè¯­å¥åˆ æ‰10ä¸‡è¡Œæ•°æ®ï¼Œç”¨statementçš„è¯å°±æ˜¯ä¸€ä¸ªSQLè¯­å¥è¢«è®°å½•åˆ°binlogä¸­ï¼Œå ç”¨å‡ åä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚ä½†å¦‚æœç”¨rowæ ¼å¼çš„binlogï¼Œå°±è¦æŠŠè¿™10ä¸‡æ¡è®°å½•éƒ½å†™åˆ°binlogä¸­ã€‚è¿™æ ·åšï¼Œä¸ä»…ä¼šå ç”¨æ›´å¤§çš„ç©ºé—´ï¼ŒåŒæ—¶å†™binlogä¹Ÿè¦è€—è´¹IOèµ„æºï¼Œå½±å“æ‰§è¡Œé€Ÿåº¦ã€‚</li>\n<li>æ‰€ä»¥ï¼ŒMySQLå°±å–äº†ä¸ªæŠ˜ä¸­æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯æœ‰äº†mixedæ ¼å¼çš„binlogã€‚mixedæ ¼å¼çš„æ„æ€æ˜¯ï¼ŒMySQLè‡ªå·±ä¼šåˆ¤æ–­è¿™æ¡SQLè¯­å¥æ˜¯å¦å¯èƒ½å¼•èµ·ä¸»å¤‡ä¸ä¸€è‡´ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼Œå°±ç”¨rowæ ¼å¼ï¼Œå¦åˆ™å°±ç”¨statementæ ¼å¼ã€‚</li>\n</ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œmixedæ ¼å¼å¯ä»¥åˆ©ç”¨statmentæ ¼å¼çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶åˆé¿å…äº†æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä½ çš„çº¿ä¸ŠMySQLè®¾ç½®çš„binlogæ ¼å¼æ˜¯statementçš„è¯ï¼Œé‚£åŸºæœ¬ä¸Šå°±å¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªä¸åˆç†çš„è®¾ç½®ã€‚ä½ è‡³å°‘åº”è¯¥æŠŠbinlogçš„æ ¼å¼è®¾ç½®ä¸ºmixedã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­ï¼Œè®¾ç½®ä¸ºmixedåï¼Œå°±ä¼šè®°å½•ä¸ºrowæ ¼å¼ï¼›è€Œå¦‚æœæ‰§è¡Œçš„è¯­å¥å»æ‰limit 1ï¼Œå°±ä¼šè®°å½•ä¸ºstatementæ ¼å¼ã€‚</p><p>å½“ç„¶æˆ‘è¦è¯´çš„æ˜¯ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„åœºæ™¯è¦æ±‚æŠŠMySQLçš„binlogæ ¼å¼è®¾ç½®æˆrowã€‚è¿™ä¹ˆåšçš„ç†ç”±æœ‰å¾ˆå¤šï¼Œæˆ‘æ¥ç»™ä½ ä¸¾ä¸€ä¸ªå¯ä»¥ç›´æ¥çœ‹å‡ºæ¥çš„å¥½å¤„ï¼š<strong>æ¢å¤æ•°æ®</strong>ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åˆ†åˆ«ä»deleteã€insertå’Œupdateè¿™ä¸‰ç§SQLè¯­å¥çš„è§’åº¦ï¼Œæ¥çœ‹çœ‹æ•°æ®æ¢å¤çš„é—®é¢˜ã€‚</p><p>é€šè¿‡å›¾6ä½ å¯ä»¥çœ‹å‡ºæ¥ï¼Œå³ä½¿æˆ‘æ‰§è¡Œçš„æ˜¯deleteè¯­å¥ï¼Œrowæ ¼å¼çš„binlogä¹Ÿä¼šæŠŠè¢«åˆ æ‰çš„è¡Œçš„æ•´è¡Œä¿¡æ¯ä¿å­˜èµ·æ¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ åœ¨æ‰§è¡Œå®Œä¸€æ¡deleteè¯­å¥ä»¥åï¼Œå‘ç°åˆ é”™æ•°æ®äº†ï¼Œå¯ä»¥ç›´æ¥æŠŠbinlogä¸­è®°å½•çš„deleteè¯­å¥è½¬æˆinsertï¼ŒæŠŠè¢«é”™åˆ çš„æ•°æ®æ’å…¥å›å»å°±å¯ä»¥æ¢å¤äº†ã€‚</p><p>å¦‚æœä½ æ˜¯æ‰§è¡Œé”™äº†insertè¯­å¥å‘¢ï¼Ÿé‚£å°±æ›´ç›´æ¥äº†ã€‚rowæ ¼å¼ä¸‹ï¼Œinsertè¯­å¥çš„binlogé‡Œä¼šè®°å½•æ‰€æœ‰çš„å­—æ®µä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥ç”¨æ¥ç²¾ç¡®å®šä½åˆšåˆšè¢«æ’å…¥çš„é‚£ä¸€è¡Œã€‚è¿™æ—¶ï¼Œä½ ç›´æ¥æŠŠinsertè¯­å¥è½¬æˆdeleteè¯­å¥ï¼Œåˆ é™¤æ‰è¿™è¢«è¯¯æ’å…¥çš„ä¸€è¡Œæ•°æ®å°±å¯ä»¥äº†ã€‚</p><p>å¦‚æœæ‰§è¡Œçš„æ˜¯updateè¯­å¥çš„è¯ï¼Œbinlogé‡Œé¢ä¼šè®°å½•ä¿®æ”¹å‰æ•´è¡Œçš„æ•°æ®å’Œä¿®æ”¹åçš„æ•´è¡Œæ•°æ®ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ è¯¯æ‰§è¡Œäº†updateè¯­å¥çš„è¯ï¼Œåªéœ€è¦æŠŠè¿™ä¸ªeventå‰åçš„ä¸¤è¡Œä¿¡æ¯å¯¹è°ƒä¸€ä¸‹ï¼Œå†å»æ•°æ®åº“é‡Œé¢æ‰§è¡Œï¼Œå°±èƒ½æ¢å¤è¿™ä¸ªæ›´æ–°æ“ä½œäº†ã€‚</p><p>å…¶å®ï¼Œç”±deleteã€insertæˆ–è€…updateè¯­å¥å¯¼è‡´çš„æ•°æ®æ“ä½œé”™è¯¯ï¼Œéœ€è¦æ¢å¤åˆ°æ“ä½œä¹‹å‰çŠ¶æ€çš„æƒ…å†µï¼Œä¹Ÿæ—¶æœ‰å‘ç”Ÿã€‚MariaDBçš„<a href=\"https://mariadb.com/kb/en/library/flashback/\">Flashback</a>å·¥å…·å°±æ˜¯åŸºäºä¸Šé¢ä»‹ç»çš„åŸç†æ¥å›æ»šæ•°æ®çš„ã€‚</p><p>è™½ç„¶mixedæ ¼å¼çš„binlogç°åœ¨å·²ç»ç”¨å¾—ä¸å¤šäº†ï¼Œä½†è¿™é‡Œæˆ‘è¿˜æ˜¯è¦å†å€Ÿç”¨ä¸€ä¸‹mixedæ ¼å¼æ¥è¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼Œæ¥çœ‹ä¸€ä¸‹è¿™æ¡SQLè¯­å¥ï¼š</p><pre><code>mysql&gt; insert into t values(10,10, now());\n</code></pre><p>å¦‚æœæˆ‘ä»¬æŠŠbinlogæ ¼å¼è®¾ç½®ä¸ºmixedï¼Œä½ è§‰å¾—MySQLä¼šæŠŠå®ƒè®°å½•ä¸ºrowæ ¼å¼è¿˜æ˜¯statementæ ¼å¼å‘¢ï¼Ÿ</p><p>å…ˆä¸è¦ç€æ€¥è¯´ç»“æœï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹è¿™æ¡è¯­å¥æ‰§è¡Œçš„æ•ˆæœã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/01/ef/0150301698979255a6f27711c35e9eef.png?wh=1490*154\" alt=\"\"></p><center><span class=\"reference\">å›¾7 mixedæ ¼å¼å’Œnow()</span></center><p>å¯ä»¥çœ‹åˆ°ï¼ŒMySQLç”¨çš„å±…ç„¶æ˜¯statementæ ¼å¼ã€‚ä½ ä¸€å®šä¼šå¥‡æ€ªï¼Œå¦‚æœè¿™ä¸ªbinlogè¿‡äº†1åˆ†é’Ÿæ‰ä¼ ç»™å¤‡åº“çš„è¯ï¼Œé‚£ä¸»å¤‡çš„æ•°æ®ä¸å°±ä¸ä¸€è‡´äº†å—ï¼Ÿ</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†ç”¨mysqlbinlogå·¥å…·æ¥çœ‹çœ‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/1a/41/1ad3a4c4b9a71955edba5195757dd041.png?wh=1628*242\" alt=\"\"></p><center><span class=\"reference\">å›¾8 TIMESTAMP å‘½ä»¤</span></center><p>ä»å›¾ä¸­çš„ç»“æœå¯ä»¥çœ‹åˆ°ï¼ŒåŸæ¥binlogåœ¨è®°å½•eventçš„æ—¶å€™ï¼Œå¤šè®°äº†ä¸€æ¡å‘½ä»¤ï¼šSET TIMESTAMP=1546103491ã€‚å®ƒç”¨ SET TIMESTAMPå‘½ä»¤çº¦å®šäº†æ¥ä¸‹æ¥çš„now()å‡½æ•°çš„è¿”å›æ—¶é—´ã€‚</p><p>å› æ­¤ï¼Œä¸è®ºè¿™ä¸ªbinlogæ˜¯1åˆ†é’Ÿä¹‹åè¢«å¤‡åº“æ‰§è¡Œï¼Œè¿˜æ˜¯3å¤©åç”¨æ¥æ¢å¤è¿™ä¸ªåº“çš„å¤‡ä»½ï¼Œè¿™ä¸ªinsertè¯­å¥æ’å…¥çš„è¡Œï¼Œå€¼éƒ½æ˜¯å›ºå®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡è¿™æ¡SET TIMESTAMPå‘½ä»¤ï¼ŒMySQLå°±ç¡®ä¿äº†ä¸»å¤‡æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>æˆ‘ä¹‹å‰çœ‹è¿‡æœ‰äººåœ¨é‡æ”¾binlogæ•°æ®çš„æ—¶å€™ï¼Œæ˜¯è¿™ä¹ˆåšçš„ï¼šç”¨mysqlbinlogè§£æå‡ºæ—¥å¿—ï¼Œç„¶åæŠŠé‡Œé¢çš„statementè¯­å¥ç›´æ¥æ‹·è´å‡ºæ¥æ‰§è¡Œã€‚</p><p>ä½ ç°åœ¨çŸ¥é“äº†ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æœ‰é£é™©çš„ã€‚å› ä¸ºæœ‰äº›è¯­å¥çš„æ‰§è¡Œç»“æœæ˜¯ä¾èµ–äºä¸Šä¸‹æ–‡å‘½ä»¤çš„ï¼Œç›´æ¥æ‰§è¡Œçš„ç»“æœå¾ˆå¯èƒ½æ˜¯é”™è¯¯çš„ã€‚</p><p>æ‰€ä»¥ï¼Œç”¨binlogæ¥æ¢å¤æ•°æ®çš„æ ‡å‡†åšæ³•æ˜¯ï¼Œç”¨ mysqlbinlogå·¥å…·è§£æå‡ºæ¥ï¼Œç„¶åæŠŠè§£æç»“æœæ•´ä¸ªå‘ç»™MySQLæ‰§è¡Œã€‚ç±»ä¼¼ä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>mysqlbinlog master.000001  --start-position=2738 --stop-position=2973 | mysql -h127.0.0.1 -P13000 -u$user -p$pwd;\n</code></pre><p>è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯ï¼Œå°† master.000001 æ–‡ä»¶é‡Œé¢ä»ç¬¬2738å­—èŠ‚åˆ°ç¬¬2973å­—èŠ‚ä¸­é—´è¿™æ®µå†…å®¹è§£æå‡ºæ¥ï¼Œæ”¾åˆ°MySQLå»æ‰§è¡Œã€‚</p><h1>å¾ªç¯å¤åˆ¶é—®é¢˜</h1><p>é€šè¿‡ä¸Šé¢å¯¹MySQLä¸­binlogåŸºæœ¬å†…å®¹çš„ç†è§£ï¼Œä½ ç°åœ¨å¯ä»¥çŸ¥é“ï¼Œbinlogçš„ç‰¹æ€§ç¡®ä¿äº†åœ¨å¤‡åº“æ‰§è¡Œç›¸åŒçš„binlogï¼Œå¯ä»¥å¾—åˆ°ä¸ä¸»åº“ç›¸åŒçš„çŠ¶æ€ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ­£å¸¸æƒ…å†µä¸‹ä¸»å¤‡çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾1ä¸­Aã€Bä¸¤ä¸ªèŠ‚ç‚¹çš„å†…å®¹æ˜¯ä¸€è‡´çš„ã€‚å…¶å®ï¼Œå›¾1ä¸­æˆ‘ç”»çš„æ˜¯M-Sç»“æ„ï¼Œä½†å®é™…ç”Ÿäº§ä¸Šä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯åŒMç»“æ„ï¼Œä¹Ÿå°±æ˜¯å›¾9æ‰€ç¤ºçš„ä¸»å¤‡åˆ‡æ¢æµç¨‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/20/56/20ad4e163115198dc6cf372d5116c956.png?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾ 9 MySQLä¸»å¤‡åˆ‡æ¢æµç¨‹--åŒMç»“æ„</span></center><p>å¯¹æ¯”å›¾9å’Œå›¾1ï¼Œä½ å¯ä»¥å‘ç°ï¼ŒåŒMç»“æ„å’ŒM-Sç»“æ„ï¼Œå…¶å®åŒºåˆ«åªæ˜¯å¤šäº†ä¸€æ¡çº¿ï¼Œå³ï¼šèŠ‚ç‚¹Aå’ŒBä¹‹é—´æ€»æ˜¯äº’ä¸ºä¸»å¤‡å…³ç³»ã€‚è¿™æ ·åœ¨åˆ‡æ¢çš„æ—¶å€™å°±ä¸ç”¨å†ä¿®æ”¹ä¸»å¤‡å…³ç³»ã€‚</p><p>ä½†æ˜¯ï¼ŒåŒMç»“æ„è¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚</p><p>ä¸šåŠ¡é€»è¾‘åœ¨èŠ‚ç‚¹Aä¸Šæ›´æ–°äº†ä¸€æ¡è¯­å¥ï¼Œç„¶åå†æŠŠç”Ÿæˆçš„binlog å‘ç»™èŠ‚ç‚¹Bï¼ŒèŠ‚ç‚¹Bæ‰§è¡Œå®Œè¿™æ¡æ›´æ–°è¯­å¥åä¹Ÿä¼šç”Ÿæˆbinlogã€‚ï¼ˆæˆ‘å»ºè®®ä½ æŠŠå‚æ•°log_slave_updatesè®¾ç½®ä¸ºonï¼Œè¡¨ç¤ºå¤‡åº“æ‰§è¡Œrelay logåç”Ÿæˆbinlogï¼‰ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚æœèŠ‚ç‚¹AåŒæ—¶æ˜¯èŠ‚ç‚¹Bçš„å¤‡åº“ï¼Œç›¸å½“äºåˆæŠŠèŠ‚ç‚¹Bæ–°ç”Ÿæˆçš„binlogæ‹¿è¿‡æ¥æ‰§è¡Œäº†ä¸€æ¬¡ï¼Œç„¶åèŠ‚ç‚¹Aå’ŒBé—´ï¼Œä¼šä¸æ–­åœ°å¾ªç¯æ‰§è¡Œè¿™ä¸ªæ›´æ–°è¯­å¥ï¼Œä¹Ÿå°±æ˜¯å¾ªç¯å¤åˆ¶äº†ã€‚è¿™ä¸ªè¦æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p><p>ä»ä¸Šé¢çš„å›¾6ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒMySQLåœ¨binlogä¸­è®°å½•äº†è¿™ä¸ªå‘½ä»¤ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶æ‰€åœ¨å®ä¾‹çš„server idã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„é€»è¾‘ï¼Œæ¥è§£å†³ä¸¤ä¸ªèŠ‚ç‚¹é—´çš„å¾ªç¯å¤åˆ¶çš„é—®é¢˜ï¼š</p><ol>\n<li>\n<p>è§„å®šä¸¤ä¸ªåº“çš„server idå¿…é¡»ä¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™å®ƒä»¬ä¹‹é—´ä¸èƒ½è®¾å®šä¸ºä¸»å¤‡å…³ç³»ï¼›</p>\n</li>\n<li>\n<p>ä¸€ä¸ªå¤‡åº“æ¥åˆ°binlogå¹¶åœ¨é‡æ”¾çš„è¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆä¸åŸbinlogçš„server idç›¸åŒçš„æ–°çš„binlogï¼›</p>\n</li>\n<li>\n<p>æ¯ä¸ªåº“åœ¨æ”¶åˆ°ä»è‡ªå·±çš„ä¸»åº“å‘è¿‡æ¥çš„æ—¥å¿—åï¼Œå…ˆåˆ¤æ–­server idï¼Œå¦‚æœè·Ÿè‡ªå·±çš„ç›¸åŒï¼Œè¡¨ç¤ºè¿™ä¸ªæ—¥å¿—æ˜¯è‡ªå·±ç”Ÿæˆçš„ï¼Œå°±ç›´æ¥ä¸¢å¼ƒè¿™ä¸ªæ—¥å¿—ã€‚</p>\n</li>\n</ol><p>æŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®äº†åŒMç»“æ„ï¼Œæ—¥å¿—çš„æ‰§è¡Œæµå°±ä¼šå˜æˆè¿™æ ·ï¼š</p><ol>\n<li>\n<p>ä»èŠ‚ç‚¹Aæ›´æ–°çš„äº‹åŠ¡ï¼Œbinlogé‡Œé¢è®°çš„éƒ½æ˜¯Açš„server idï¼›</p>\n</li>\n<li>\n<p>ä¼ åˆ°èŠ‚ç‚¹Bæ‰§è¡Œä¸€æ¬¡ä»¥åï¼ŒèŠ‚ç‚¹Bç”Ÿæˆçš„binlog çš„server idä¹Ÿæ˜¯Açš„server idï¼›</p>\n</li>\n<li>\n<p>å†ä¼ å›ç»™èŠ‚ç‚¹Aï¼ŒAåˆ¤æ–­åˆ°è¿™ä¸ªserver idä¸è‡ªå·±çš„ç›¸åŒï¼Œå°±ä¸ä¼šå†å¤„ç†è¿™ä¸ªæ—¥å¿—ã€‚æ‰€ä»¥ï¼Œæ­»å¾ªç¯åœ¨è¿™é‡Œå°±æ–­æ‰äº†ã€‚</p>\n</li>\n</ol><h1>å°ç»“</h1><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ç»™ä½ ä»‹ç»äº†MySQL binlogçš„æ ¼å¼å’Œä¸€äº›åŸºæœ¬æœºåˆ¶ï¼Œæ˜¯åé¢æˆ‘è¦ä»‹ç»çš„è¯»å†™åˆ†ç¦»ç­‰ç³»åˆ—æ–‡ç« çš„èƒŒæ™¯çŸ¥è¯†ï¼Œå¸Œæœ›ä½ å¯ä»¥è®¤çœŸæ¶ˆåŒ–ç†è§£ã€‚</p><p>binlogåœ¨MySQLçš„å„ç§é«˜å¯ç”¨æ–¹æ¡ˆä¸Šæ‰®æ¼”äº†é‡è¦è§’è‰²ã€‚ä»Šå¤©ä»‹ç»çš„å¯ä»¥è¯´æ˜¯æ‰€æœ‰MySQLé«˜å¯ç”¨æ–¹æ¡ˆçš„åŸºç¡€ã€‚åœ¨è¿™ä¹‹ä¸Šæ¼”åŒ–å‡ºäº†è¯¸å¦‚å¤šèŠ‚ç‚¹ã€åŠåŒæ­¥ã€MySQL group replicationç­‰ç›¸å¯¹å¤æ‚çš„æ–¹æ¡ˆã€‚</p><p>æˆ‘ä¹Ÿè·Ÿä½ ä»‹ç»äº†MySQLä¸åŒæ ¼å¼binlogçš„ä¼˜ç¼ºç‚¹ï¼Œå’Œè®¾è®¡è€…çš„æ€è€ƒã€‚å¸Œæœ›ä½ åœ¨åšç³»ç»Ÿå¼€å‘æ—¶å€™ï¼Œä¹Ÿèƒ½å€Ÿé‰´è¿™äº›è®¾è®¡æ€æƒ³ã€‚</p><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>è¯´åˆ°å¾ªç¯å¤åˆ¶é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯´MySQLé€šè¿‡åˆ¤æ–­server idçš„æ–¹å¼ï¼Œæ–­æ‰æ­»å¾ªç¯ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæœºåˆ¶å…¶å®å¹¶ä¸å®Œå¤‡ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½å‡ºç°æ­»å¾ªç¯ã€‚</p><p>ä½ èƒ½æ„é€ å‡ºä¸€ä¸ªè¿™æ ·çš„åœºæ™¯å—ï¼Ÿåˆåº”è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„è®¾è®¡å’Œåˆ†æå†™åœ¨è¯„è®ºåŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« è·Ÿä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>ä¸ŠæœŸæˆ‘ç•™ç»™ä½ çš„é—®é¢˜æ˜¯ï¼Œä½ åœ¨ä»€ä¹ˆæ—¶å€™ä¼šæŠŠçº¿ä¸Šç”Ÿäº§åº“è®¾ç½®æˆâ€œéåŒ1â€ã€‚æˆ‘ç›®å‰çŸ¥é“çš„åœºæ™¯ï¼Œæœ‰ä»¥ä¸‹è¿™äº›ï¼š</p><ol>\n<li>\n<p>ä¸šåŠ¡é«˜å³°æœŸã€‚ä¸€èˆ¬å¦‚æœæœ‰é¢„çŸ¥çš„é«˜å³°æœŸï¼ŒDBAä¼šæœ‰é¢„æ¡ˆï¼ŒæŠŠä¸»åº“è®¾ç½®æˆâ€œéåŒ1â€ã€‚</p>\n</li>\n<li>\n<p>å¤‡åº“å»¶è¿Ÿï¼Œä¸ºäº†è®©å¤‡åº“å°½å¿«èµ¶ä¸Šä¸»åº“ã€‚@æ°¸æ’è®°å¿†å’Œ@Second Sightæåˆ°äº†è¿™ä¸ªåœºæ™¯ã€‚</p>\n</li>\n<li>\n<p>ç”¨å¤‡ä»½æ¢å¤ä¸»åº“çš„å‰¯æœ¬ï¼Œåº”ç”¨binlogçš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè·Ÿä¸Šä¸€ç§åœºæ™¯ç±»ä¼¼ã€‚</p>\n</li>\n<li>\n<p>æ‰¹é‡å¯¼å…¥æ•°æ®çš„æ—¶å€™ã€‚</p>\n</li>\n</ol><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæŠŠç”Ÿäº§åº“æ”¹æˆâ€œéåŒ1â€é…ç½®ï¼Œæ˜¯è®¾ç½®innodb_flush_logs_at_trx_commit=2ã€sync_binlog=1000ã€‚</p><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>\n<p>@way åŒå­¦æåˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼Œç”±äºä»åº“è®¾ç½®äº† binlog_group_commit_sync_delayå’Œbinlog_group_commit_sync_no_delay_countå¯¼è‡´ä¸€ç›´å»¶è¿Ÿçš„æƒ…å†µã€‚æˆ‘ä»¬åœ¨ä¸»åº“è®¾ç½®è¿™ä¸¤ä¸ªå‚æ•°ï¼Œæ˜¯ä¸ºäº†å‡å°‘binlogçš„å†™ç›˜å‹åŠ›ã€‚å¤‡åº“è¿™ä¹ˆè®¾ç½®ï¼Œå°¤å…¶åœ¨â€œå¿«è¦è¿½ä¸Šâ€çš„æ—¶å€™ï¼Œå°±åè€Œä¼šå—è¿™ä¸¤ä¸ªå‚æ•°çš„æ‹–ç´¯ã€‚ä¸€èˆ¬è¿½ä¸»å¤‡å°±ç”¨â€œéåŒ1â€ï¼ˆè¿½ä¸Šè®°å¾—æ”¹å›æ¥ï¼‰ã€‚</p>\n</blockquote><blockquote>\n<p>@ä¸€å¤§åª åŒå­¦éªŒè¯äº†åœ¨sync_binlog=0çš„æƒ…å†µä¸‹ï¼Œè®¾ç½®sync_delayå’Œsync_no_delay_countçš„ç°è±¡ï¼Œç‚¹èµè¿™ç§å‘ç°è¾¹ç•Œçš„æ„è¯†å’Œæ‰‹åŠ¨éªŒè¯çš„å¥½ä¹ æƒ¯ã€‚æ˜¯è¿™æ ·çš„ï¼šsync_delayå’Œsync_no_delay_countçš„é€»è¾‘å…ˆèµ°ï¼Œå› æ­¤è¯¥ç­‰è¿˜æ˜¯ä¼šç­‰ã€‚ç­‰åˆ°æ»¡è¶³äº†è¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œå°±è¿›å…¥sync_binlogé˜¶æ®µã€‚è¿™æ—¶å€™å¦‚æœåˆ¤æ–­sync_binlog=0ï¼Œå°±ç›´æ¥è·³è¿‡ï¼Œè¿˜æ˜¯ä¸è°ƒfsyncã€‚</p>\n</blockquote><blockquote>\n<p>@é”…å­ åŒå­¦æåˆ°ï¼Œè®¾ç½®sync_binlog=0çš„æ—¶å€™ï¼Œè¿˜æ˜¯å¯ä»¥çœ‹åˆ°binlogæ–‡ä»¶é©¬ä¸Šåšäº†ä¿®æ”¹ã€‚è¿™ä¸ªæ˜¯å¯¹çš„ï¼Œæˆ‘ä»¬è¯´â€œå†™åˆ°äº†page cacheâ€ï¼Œå°±æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„page cacheã€‚è€Œä½ ç”¨lså‘½ä»¤çœ‹åˆ°çš„å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿè¿”å›çš„ç»“æœã€‚</p>\n</blockquote><p></p>","neighbors":{"left":{"article_title":"23 | MySQLæ˜¯æ€ä¹ˆä¿è¯æ•°æ®ä¸ä¸¢çš„ï¼Ÿ","id":76161},"right":{"article_title":"25 | MySQLæ˜¯æ€ä¹ˆä¿è¯é«˜å¯ç”¨çš„ï¼Ÿ","id":76795}},"comments":[{"had_liked":false,"id":62468,"user_name":"Sinyo","can_delete":false,"product_type":"c1","uid":1307297,"ip_address":"","ucode":"57B243E7AB86A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAibnPX9jW8kqLcIfibjic8GbkQkEUYyFKJkc39hZhibVlNrqwTjdLozkqibI2IwACd5YzofYickNxFnZg/132","comment_is_top":true,"comment_ctime":1548063827,"is_pvip":false,"replies":[{"id":"22091","content":"å¥½é—®é¢˜ï¼Œ<br>æ˜¯è¿™æ ·çš„ï¼Œå¯¹äºAçš„çº¿ç¨‹æ¥è¯´ï¼Œå°±æ˜¯â€œè¯»æ–‡ä»¶â€ï¼Œ<br>1. å¦‚æœè¿™ä¸ªæ–‡ä»¶ç°åœ¨è¿˜åœ¨ page cacheä¸­ï¼Œé‚£å°±æœ€å¥½äº†ï¼Œç›´æ¥è¯»èµ°ï¼›<br>2. å¦‚æœä¸åœ¨page cacheé‡Œï¼Œå°±åªå¥½å»ç£ç›˜è¯»<br><br>è¿™ä¸ªè¡Œä¸ºæ˜¯æ–‡ä»¶ç³»ç»Ÿæ§åˆ¶çš„ï¼ŒMySQLåªæ˜¯æ‰§è¡Œâ€œè¯»æ–‡ä»¶â€è¿™ä¸ªæ“ä½œ","user_name":"ä½œè€…å›å¤","comment_id":62468,"uid":"1264162","ip_address":"","utype":1,"ctime":1548077632,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"9.2233727513673994e+18","product_id":100020801,"comment_content":"ä¸»åº“ A ä»æœ¬åœ°è¯»å– binlogï¼Œå‘ç»™ä»åº“ Bï¼›<br>è€å¸ˆï¼Œè¯·é—®è¿™é‡Œçš„æœ¬åœ°æ˜¯æŒ‡æ–‡ä»¶ç³»ç»Ÿçš„ page cacheè¿˜æ˜¯diskå‘¢ï¼Ÿ","like_count":167,"discussions":[{"author":{"id":1997293,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/79/ed/4737a49b.jpg","nickname":"é›ªã®é›«Â·é›¨ã®éŸ³","note":"","ucode":"0693DA3939A321","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269323,"discussion_content":"æ˜ç™½äº†ï¼Œè¿™çº¯ç²¹æ˜¯æ“ä½œç³»ç»Ÿå¹²çš„äº‹æƒ…äº†","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1589894518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1650233,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2e/39/880d1122.jpg","nickname":"é‡‘ç››æ˜Œ","note":"","ucode":"8219A1C10F2E7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1997293,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/79/ed/4737a49b.jpg","nickname":"é›ªã®é›«Â·é›¨ã®éŸ³","note":"","ucode":"0693DA3939A321","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383102,"discussion_content":"åŸæ¥å¦‚æ­¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625904420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":269323,"ip_address":""},"score":383102,"extra":""}]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437227,"discussion_content":"å¥½é—®é¢˜ï¼Œ\næ˜¯è¿™æ ·çš„ï¼Œå¯¹äºAçš„çº¿ç¨‹æ¥è¯´ï¼Œå°±æ˜¯â€œè¯»æ–‡ä»¶â€ï¼Œ\n1. å¦‚æœè¿™ä¸ªæ–‡ä»¶ç°åœ¨è¿˜åœ¨ page cacheä¸­ï¼Œé‚£å°±æœ€å¥½äº†ï¼Œç›´æ¥è¯»èµ°ï¼›\n2. å¦‚æœä¸åœ¨page cacheé‡Œï¼Œå°±åªå¥½å»ç£ç›˜è¯»\n\nè¿™ä¸ªè¡Œä¸ºæ˜¯æ–‡ä»¶ç³»ç»Ÿæ§åˆ¶çš„ï¼ŒMySQLåªæ˜¯æ‰§è¡Œâ€œè¯»æ–‡ä»¶â€è¿™ä¸ªæ“ä½œ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1548077632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"é©¬ä»¥","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6382,"discussion_content":"åŸæ¥å¦‚æ­¤ï¼Œä¸ŠèŠ‚è¯¾æˆ‘é—®äº†åŒæ ·ä¸€ä¸ªé—®é¢˜ï¼ŒåŸæ¥æ˜¯è¿™æ ·ï¼Œæ²¡ææ‡‚è¿™ä¸ªpage cacheï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566875147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63592,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":true,"comment_ctime":1548410454,"is_pvip":false,"replies":[{"id":"22493","content":"å¥½é—®é¢˜ã€‚<br><br>ä¸€å¼€å§‹åˆ›å»ºä¸»å¤‡å…³ç³»çš„æ—¶å€™ï¼Œ æ˜¯ç”±å¤‡åº“æŒ‡å®šçš„ã€‚<br>æ¯”å¦‚åŸºäºä½ç‚¹çš„ä¸»å¤‡å…³ç³»ï¼Œå¤‡åº“è¯´â€œæˆ‘è¦ä»binlogæ–‡ä»¶Açš„ä½ç½®Pâ€å¼€å§‹åŒæ­¥ï¼Œ ä¸»åº“å°±ä»è¿™ä¸ªæŒ‡å®šçš„ä½ç½®å¼€å§‹å¾€åå‘ã€‚<br><br><br>è€Œä¸»å¤‡å¤åˆ¶å…³ç³»æ­å»ºå®Œæˆä»¥åï¼Œæ˜¯ä¸»åº“æ¥å†³å®šâ€œè¦å‘æ•°æ®ç»™å¤‡åº“â€çš„ã€‚<br><br>æ‰€ä»¥ä¸»åº“æœ‰ç”Ÿæˆæ–°çš„æ—¥å¿—ï¼Œå°±ä¼šå‘ç»™å¤‡åº“ã€‚<br>","user_name":"ä½œè€…å›å¤","comment_id":63592,"uid":"1264162","ip_address":"","utype":1,"ctime":1548413409,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":11,"race_medal":0,"score":"9.2233725237344993e+18","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹åŒMæ¶æ„ä¸‹ï¼Œä¸»ä»å¤åˆ¶ï¼Œæ˜¯ä¸æ˜¯ä¸€æ–¹åˆ¤æ–­è‡ªå·±çš„æ•°æ®æ¯”å¯¹æ–¹å°‘å°±ä»å¯¹æ–¹å¤åˆ¶ï¼Œåˆ¤æ–­ä¾æ®æ˜¯ä»€ä¹ˆ","like_count":114,"discussions":[{"author":{"id":1107305,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e5/69/719ec5d0.jpg","nickname":"Jian","note":"","ucode":"17ED4919F22DEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337396,"discussion_content":"å¦‚æœåŒæ­¥çš„è¿‡ç¨‹å¤±è´¥çš„ä¼šæ€ä¹ˆåŠï¼Ÿä¼šé‡è¯•å—ï¼Ÿ\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1608891493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1502074,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKb5BzdGZbSYHxq88kicdDtBh0yBtJpDAD81wruIsTsLdBysDZztrm8tYb4mBYvAI1ZE4lorKuvmgw/132","nickname":"java_lunsong","note":"","ucode":"180EEE6C8BCAA8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311912,"discussion_content":"äº’ä¸ºä¸»å¤‡é‚£å°±æ˜¯åˆšå¼€å§‹çš„æ—¶å€™åŒæ–¹éƒ½è¦æŒ‡å®šä¸€ä¸‹ï¼Œç„¶ååé¢å°±ä¸»æ¨è¿‡å»","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1602519506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1117597,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0d/9d/58d09086.jpg","nickname":"è¾¾è¾¾é˜Ÿé•¿","note":"","ucode":"1C3F2E4F6B7637","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261649,"discussion_content":"æ’çœ¼","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1588989151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437648,"discussion_content":"å¥½é—®é¢˜ã€‚\n\nä¸€å¼€å§‹åˆ›å»ºä¸»å¤‡å…³ç³»çš„æ—¶å€™ï¼Œ æ˜¯ç”±å¤‡åº“æŒ‡å®šçš„ã€‚\næ¯”å¦‚åŸºäºä½ç‚¹çš„ä¸»å¤‡å…³ç³»ï¼Œå¤‡åº“è¯´â€œæˆ‘è¦ä»binlogæ–‡ä»¶Açš„ä½ç½®Pâ€å¼€å§‹åŒæ­¥ï¼Œ ä¸»åº“å°±ä»è¿™ä¸ªæŒ‡å®šçš„ä½ç½®å¼€å§‹å¾€åå‘ã€‚\n\n\nè€Œä¸»å¤‡å¤åˆ¶å…³ç³»æ­å»ºå®Œæˆä»¥åï¼Œæ˜¯ä¸»åº“æ¥å†³å®šâ€œè¦å‘æ•°æ®ç»™å¤‡åº“â€çš„ã€‚\n\næ‰€ä»¥ä¸»åº“æœ‰ç”Ÿæˆæ–°çš„æ—¥å¿—ï¼Œå°±ä¼šå‘ç»™å¤‡åº“ã€‚\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1548413409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1543040,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/80/8702bd5f.jpg","nickname":"evan","note":"","ucode":"491B073D5AFEDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320001,"discussion_content":"å¦‚æœå‘ç”Ÿäº†ä¸»ä»åˆ‡æ¢, åˆ‡çš„å½“æ—¶ä»åº“binlogå°äºä¸»åº“, æ–°çš„ä¸»åº“æ•°æ®å°±ä¼šä¸å®Œæ•´? \næ–°çš„ä¸»åº“å¼€å§‹æ¥å—å†™è¯·æ±‚, åˆä¼šä¼ å›åŸæ¥çš„ä¸»åº“, æ•°æ®ä¼šè¢«è¦†ç›–å—?\nä¹Ÿå°±æ˜¯æ•°æ®ä¼šæ°¸è¿œçš„ä¸ä¸€è‡´","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1604224057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1788647,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/4a/e7/6c16af5d.jpg","nickname":"æ±‰æ±Ÿ","note":"","ucode":"01622D984B8F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1543040,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/80/8702bd5f.jpg","nickname":"evan","note":"","ucode":"491B073D5AFEDE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347387,"discussion_content":"ä¸»å¤‡åˆ‡æ¢çš„æ—¶å€™ ä¸æ˜¯è¦æŒ‡å®šå¼€å§‹åŒæ­¥ä½ç½®å˜›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612227145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":320001,"ip_address":""},"score":347387,"extra":""}]},{"author":{"id":1676246,"avatar":"https://static001.geekbang.org/account/avatar/00/19/93/d6/040e4965.jpg","nickname":"Omer","note":"","ucode":"8EE3E531313265","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576752,"discussion_content":"å¦‚æœä¸»åº“å› ä¸ºç½‘ç»œåŸå› ï¼Œåå‘é€çš„æ—¥å¿—æ¯”å…ˆå‘é€çš„æ—¥å¿—å…ˆæ¨ç»™äº†ä»åº“ï¼Œé‚£ä¼šä¸ä¼šå¯¼è‡´æ—¥å¿—é¡ºåºä¸åŒï¼Œå¯¼è‡´ä¸»ä»ä¸ä¸€è‡´å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655777382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049510,"avatar":"https://static001.geekbang.org/account/avatar/00/10/03/a6/956b8734.jpg","nickname":"è«å¤±é“­å¿˜","note":"","ucode":"BF0951AF9610E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555530,"discussion_content":"ä¸»å¤‡åŒæ­¥æœ‰ç‚¹åƒredisçš„masterå’Œsalveçš„æ“ä½œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646965034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2063923,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er4rbCWDxib3FHibYBouTwZqZBH6h5IgvjibEiaBv4Ceekib9SYg0peBBlFGu8hDuGvwjKp6LNznvEAibYw/132","nickname":"DonaldTrumpppppppppp","note":"","ucode":"211B1A25C53172","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554341,"discussion_content":"M","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646335761,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310798,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","nickname":"å´å°æ™º","note":"","ucode":"C7C9F58B5C9F7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37878,"discussion_content":"å¤‡åº“æœ€å¼€å§‹æ˜¯æ€ä¹ˆç¡®å®šä½ç½®çš„å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571673781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1297858,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cd/c2/4ffdf37b.jpg","nickname":"DJZhu","note":"","ucode":"82866CD74F1A6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1310798,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/4e/be2b206b.jpg","nickname":"å´å°æ™º","note":"","ucode":"C7C9F58B5C9F7B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46768,"discussion_content":"å¤‡åº“å¯åŠ¨åŒæ­¥çš„æ—¶å€™æŒ‡å®šå¼€å§‹åŒæ­¥çš„binlogå’Œbinlogå†…éƒ¨ä½ç§»çš„å‚æ•°ï¼Œåˆ†åˆ«æ˜¯MASTER_LOG_FILEå’ŒMASTER_LOG_POSå‚æ•°","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1573204236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":37878,"ip_address":""},"score":46768,"extra":""}]}]},{"had_liked":false,"id":73235,"user_name":"Joker","can_delete":false,"product_type":"c1","uid":1382003,"ip_address":"","ucode":"BD5B1AF491D60C","user_header":"https://static001.geekbang.org/account/avatar/00/15/16/73/c3aa4992.jpg","comment_is_top":false,"comment_ctime":1551843536,"is_pvip":false,"replies":[{"id":"28006","content":"å¥½é—®é¢˜<br><br>ä¸€ä¸ªäº‹åŠ¡çš„binlogæ—¥å¿—ä¸ä¼šè¢«æ‹†åˆ°ä¸¤ä¸ªbinlogæ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šç­‰åˆ°è¿™ä¸ªäº‹åŠ¡çš„æ—¥å¿—å†™å®Œå†rotateï¼Œæ‰€ä»¥ä½ ä¼šçœ‹è§è¶…è¿‡é…ç½®å¤§å°ä¸Šé™çš„binlog æ–‡ä»¶","user_name":"ä½œè€…å›å¤","comment_id":73235,"uid":"1264162","ip_address":"","utype":1,"ctime":1552723906,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"486883147984","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯»åˆ°æ‚¨å…³äºbinlogçš„æ–‡ç« ä¹‹åï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ã€‚<br>æˆ‘ä¹‹å‰ç†è§£æ˜¯ï¼Œmysql æ¯æ‰§è¡Œä¸€æ¡äº‹åŠ¡æ‰€äº§ç”Ÿçš„binlogå‡†å¤‡å†™åˆ° binlog fileæ—¶ï¼Œéƒ½ä¼šå…ˆåˆ¤æ–­å½“å‰æ–‡ä»¶å†™å…¥è¿™æ¡binlogä¹‹åæ˜¯å¦ä¼šè¶…è¿‡è®¾ç½®çš„max_binlog_sizeå€¼ã€‚ å¦‚æœè¶…è¿‡ï¼Œåˆ™rotate è‡ªåŠ¨ç”Ÿæˆä¸‹ä¸ªbinlog flie æ¥è®°å½•è¿™æ¡binlogä¿¡æ¯ã€‚<br>é‚£å¦‚æœ äº‹åŠ¡æ‰€æœ‰äº§ç”Ÿçš„binlog å¤§äº  max_binlog_size å€¼å‘¢ï¼Ÿ é‚£ä¸æ˜¯æ°¸ä¹…åœ°rotateå—ï¼Ÿ mysqlæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ<br>è°¢è°¢ã€‚","like_count":114,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441985,"discussion_content":"å¥½é—®é¢˜\n\nä¸€ä¸ªäº‹åŠ¡çš„binlogæ—¥å¿—ä¸ä¼šè¢«æ‹†åˆ°ä¸¤ä¸ªbinlogæ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šç­‰åˆ°è¿™ä¸ªäº‹åŠ¡çš„æ—¥å¿—å†™å®Œå†rotateï¼Œæ‰€ä»¥ä½ ä¼šçœ‹è§è¶…è¿‡é…ç½®å¤§å°ä¸Šé™çš„binlog æ–‡ä»¶","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1552723906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"éƒ­ä¿Šæ°","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2121,"discussion_content":"è§åˆ°è¿‡","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1563269951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407775,"discussion_content":"å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635121496,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57466,"user_name":"è§‚å¼ˆé“äºº","can_delete":false,"product_type":"c1","uid":1016905,"ip_address":"","ucode":"F3BB619A33C605","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","comment_is_top":false,"comment_ctime":1546818258,"is_pvip":false,"replies":[{"id":"20717","content":"Mysqlbinlogæœ‰ä¸ªå‚æ•°â€”stop-datetime ","user_name":"ä½œè€…å›å¤","comment_id":57466,"uid":"1264162","ip_address":"","utype":1,"ctime":1546826131,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"323669365458","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œé—®ä¸ªå¤‡ä»½é—®é¢˜ï¼Œå‡å¦‚å‘¨æ—¥23ç‚¹åšäº†å¤‡ä»½ï¼Œå‘¨äºŒ20ç‚¹éœ€è¦æ¢å¤æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ç”¨binlogæ¢å¤æ—¶ï¼Œå¦‚ä½•æ°å¥½å®šä½åˆ°å‘¨æ—¥23ç‚¹çš„binlog,è°¢è°¢ã€‚","like_count":76,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435590,"discussion_content":"Mysqlbinlogæœ‰ä¸ªå‚æ•°â€”stop-datetime ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546826131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561166,"discussion_content":"æ—¶é—´ä¹Ÿä¸é è°±,ç²¾ç¡®åˆ°å¾®ç§’ä¹Ÿæ˜¯æœ‰å¯èƒ½æœ‰é—´éš™çš„,é€šè¿‡ä½ç‚¹æ‰æœ€å‡†ç¡®","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649566137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":71369,"user_name":"å¦¥å¦¥","can_delete":false,"product_type":"c1","uid":1206716,"ip_address":"","ucode":"5BC1C85CF60CAD","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/bc/c22bf219.jpg","comment_is_top":false,"comment_ctime":1551329523,"is_pvip":true,"replies":[{"id":"25540","content":"å¥½é—®é¢˜ï¼Œ<br>ä¼šåˆ é™¤ä¸€æ¡ï¼Œä½†ç¡®å®å¯èƒ½åˆ é™¤åˆ°ä¹‹å‰çš„é‚£æ¡ã€‚<br><br>ä¸»è¦å°±æ˜¯å› ä¸ºï¼Œæ²¡æœ‰ä¸»é”®çš„æ—¶å€™ï¼Œbinlogé‡Œé¢å°±ä¸ä¼šè®°å½•ä¸»é”®å­—æ®µã€‚","user_name":"ä½œè€…å›å¤","comment_id":71369,"uid":"1264162","ip_address":"","utype":1,"ctime":1551331702,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":10,"race_medal":0,"score":"250659432691","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œå¦‚æœä¸€å¼ è¡¨å¹¶æ²¡æœ‰ä¸»é”®ï¼Œæ’å…¥çš„ä¸€æ¡æ•°æ®å’Œè¿™å¼ è¡¨åŸæœ‰çš„ä¸€æ¡æ•°æ®æ‰€æœ‰å­—æ®µéƒ½æ˜¯ä¸€æ ·çš„ï¼Œç„¶åå¯¹æ’å…¥çš„è¿™æ¡æ•°æ®åšæ¢å¤ï¼Œä¼šä¸ä¼šæŠŠåŸæœ‰çš„é‚£æ¡æ•°æ®åˆ é™¤ï¼Ÿä¸çŸ¥é“åœ¨æ²¡æœ‰ä¸»é”®çš„æƒ…å†µä¸‹binlogä¼šä¸ä¼šä¹Ÿè®°å½•æ•°æ®åº“ä¸ºå…¶ç”Ÿæˆçš„ä¸»é”®id","like_count":59,"discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307520,"discussion_content":"æ²¡æœ‰è®¾ç½®ä¸»é”®ï¼Œåœ¨rowæ¨¡å¼ä¸‹ä¸ä¼šè®°å½• innodbéšè—çš„ä¸»é”®idå­—æ®µ\n\nid æ²¡æœ‰è®¾ç½®ä¸»é”®\ninsert into t_241 values(5,5,&#39;2018-11-09&#39;); \ninsert into t_241 values(5,5,&#39;2018-11-09&#39;);\n\n### INSERT INTO `mysql45`.`t_241`\n### SET\n###   @1=5 /* INT meta=0 nullable=0 is_null=0 */\n###   @2=5 /* INT meta=0 nullable=1 is_null=0 */\n###   @3=1541692800 /* TIMESTAMP(0) meta=0 nullable=0 is_null=0 */\n# at 1395\n#200921 15:53:10 server id 1  end_log_pos 1426 CRC32 0x1e564d8b \tXid = 34\nCOMMIT/*!*/;\nSET @@SESSION.GTID_NEXT= &#39;AUTOMATIC&#39; /* added by mysqlbinlog */ /*!*/;\nDELIMITER ;\n# End of log file\n/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;\n/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=0*/;","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1600675290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2215928,"avatar":"https://static001.geekbang.org/account/avatar/00/21/cf/f8/86076de4.jpg","nickname":"å®å½¬","note":"","ucode":"8EFDD45EA62342","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394590,"discussion_content":"æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šä¸»é”®ï¼Œä¸¤æ¡ä¸€æ¨¡ä¸€æ ·çš„æ•°æ®ï¼Œåˆ é™¤å“ªä¸€æ¡éƒ½è¡Œï¼Œä¸å½±å“æœ€ç»ˆç»“æœ","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1631950777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441129,"discussion_content":"å¥½é—®é¢˜ï¼Œ\nä¼šåˆ é™¤ä¸€æ¡ï¼Œä½†ç¡®å®å¯èƒ½åˆ é™¤åˆ°ä¹‹å‰çš„é‚£æ¡ã€‚\n\nä¸»è¦å°±æ˜¯å› ä¸ºï¼Œæ²¡æœ‰ä¸»é”®çš„æ—¶å€™ï¼Œbinlogé‡Œé¢å°±ä¸ä¼šè®°å½•ä¸»é”®å­—æ®µã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1551331702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250907,"avatar":"https://static001.geekbang.org/account/avatar/00/13/16/5b/83a35681.jpg","nickname":"Monday","note":"","ucode":"77B9BACC783598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296762,"discussion_content":"è¿™ä¹Ÿæ˜¯æˆ‘è¯»åˆ°rowæ ¼å¼æ—¶ï¼Œæƒ³åˆ°é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596640359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1997293,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/79/ed/4737a49b.jpg","nickname":"é›ªã®é›«Â·é›¨ã®éŸ³","note":"","ucode":"0693DA3939A321","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":269328,"discussion_content":"ä¸æ˜¯è¯´æ²¡æœ‰è®¾ç½®ä¸»é”®çš„è¯innodbä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªrowidå—ï¼Ÿæˆ‘è§‰å¾—å¯ä»¥ç”¨rowidæ¥åŒºåˆ†å‘€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589894806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2708697,"avatar":"","nickname":"ææµ·é¾™","note":"","ucode":"766E49D0AE1434","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1997293,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/79/ed/4737a49b.jpg","nickname":"é›ªã®é›«Â·é›¨ã®éŸ³","note":"","ucode":"0693DA3939A321","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567306,"discussion_content":"ä¼šæœ‰rowidï¼Œçœ‹è¿™æ ·ä¸»ä»çš„ä¸€æ¡è®°å½•çš„rowidå¹¶ä¸ä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650882142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":269328,"ip_address":""},"score":567306,"extra":""},{"author":{"id":1811277,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a3/4d/59390ba9.jpg","nickname":"æ’éª¨","note":"","ucode":"A413CF46211E1F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1997293,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/79/ed/4737a49b.jpg","nickname":"é›ªã®é›«Â·é›¨ã®éŸ³","note":"","ucode":"0693DA3939A321","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572999,"discussion_content":"innodbæ˜¯å­˜å‚¨å¼•æ“å±‚,binlogæ˜¯serverå±‚,ä¸ä¸€æ ·çš„","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1653122519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":269328,"ip_address":""},"score":572999,"extra":""}]},{"author":{"id":1310826,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/6a/da96c764.jpg","nickname":"å°¹å¸Œé—¯","note":"","ucode":"A35F70179808D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215631,"discussion_content":"æˆ‘ä¹Ÿè®°å¾—å‰é¢è¯´è¿‡æ²¡æœ‰è®¾ç½®ä¸»é”®å­—æ®µçš„æƒ…å†µä¸‹ï¼Œinnodbä¼šè‡ªåŠ¨è®¾ä¸»é”®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585363485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1335293,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","nickname":"å‘¨æ²»æ…§","note":"","ucode":"7D56C4E66BEE17","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":195379,"discussion_content":"row\\æ¨¡å¼ä¸‹binlogä¼šè®°å½•è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583275252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1099875,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c8/63/f94f9fda.jpg","nickname":"smily","note":"","ucode":"E2FDA059724A02","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":136438,"discussion_content":"æ²¡æœ‰ä¸»é”®çš„æƒ…å†µä¸‹ï¼ŒINNODBä¼šå¼ºåˆ¶åŠ ä¸€ä¸ªä¸»é”®å—ï¼Œå¦‚æœBINLOGæ—¥å¿—rowæ ¼å¼ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°åˆ é™¤å‰ä¸€æ¡çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579141676,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57582,"user_name":"HuaMax","can_delete":false,"product_type":"c1","uid":1118488,"ip_address":"","ucode":"2E78DE1AF098AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/18/8cee35f9.jpg","comment_is_top":false,"comment_ctime":1546841214,"is_pvip":false,"replies":[{"id":"20784","content":"æ˜¯çš„ï¼Œä¼š","user_name":"ä½œè€…å›å¤","comment_id":57582,"uid":"1264162","ip_address":"","utype":1,"ctime":1546869601,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":8,"race_medal":0,"score":"233475075198","product_id":100020801,"comment_content":"è¯¾åé¢˜ã€‚å¦‚æœåœ¨åŒæ­¥çš„è¿‡ç¨‹ä¸­ä¿®æ”¹äº†server idï¼Œé‚£ç”¨åŸserver id ç”Ÿæˆçš„logè¢«ä¸¤ä¸ªMè®¤ä¸ºéƒ½ä¸æ˜¯è‡ªå·±çš„è€Œè¢«å¾ªç¯æ‰§è¡Œï¼Œä¸çŸ¥è¿™ç§æƒ…å†µä¼šä¸ä¼šå‘ç”Ÿ","like_count":55,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435651,"discussion_content":"æ˜¯çš„ï¼Œä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546869601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015877,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/45/d719f7df.jpg","nickname":"æå’Œæ¡ƒ","note":"","ucode":"97E66953070EE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263713,"discussion_content":"è¿™ç§åªä¼šå¾ªç¯æ‰§è¡Œä¸€æ¬¡å§ã€‚ç¬¬äºŒæ¬¡server idåˆä¸€è‡´äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1589243723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":3006374,"avatar":"","nickname":"Geek_b870f9","note":"","ucode":"D270298B3C2292","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1015877,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/45/d719f7df.jpg","nickname":"æå’Œæ¡ƒ","note":"","ucode":"97E66953070EE0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577203,"discussion_content":"å¤‡åº“æ‰§è¡Œä¸»åº“çš„binlogåç”Ÿæˆæ–°çš„binlogï¼Œæ­¤æ—¶serveridä¹Ÿæ˜¯ä¸»åº“çš„idï¼Œæ–‡ç« æœ€åå†™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655969881,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":263713,"ip_address":""},"score":577203,"extra":""}]},{"author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87313,"discussion_content":"åŒæ­¥çš„è¿‡ç¨‹æ€ä¹ˆä¿®æ”¹server id?","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576660776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1481811,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","nickname":"ub8","note":"","ucode":"0D937C3EAEB781","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":160599,"discussion_content":"åœæ‰æœåŠ¡ï¼Œä¿®æ”¹my.ini/my.cnf,[mysqld]ä¸‹server-idï¼Œç„¶åé‡å¯","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1580818762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":87313,"ip_address":""},"score":160599,"extra":""},{"author":{"id":1454272,"avatar":"https://static001.geekbang.org/account/avatar/00/16/30/c0/761ec683.jpg","nickname":"faker","note":"","ucode":"15212F3641253F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280203,"discussion_content":"å“ªä¸ªdbaæ•¢è¿™ä¹ˆæ”¹ã€‚ã€‚ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1591513681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":160599,"ip_address":""},"score":280203,"extra":""},{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1454272,"avatar":"https://static001.geekbang.org/account/avatar/00/16/30/c0/761ec683.jpg","nickname":"faker","note":"","ucode":"15212F3641253F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286322,"discussion_content":"æµ‹è¯•è€Œå·²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593134346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":280203,"ip_address":""},"score":286322,"extra":""}]}]},{"had_liked":false,"id":57600,"user_name":"ä¸€å¤§åªğŸ˜´","can_delete":false,"product_type":"c1","uid":1310960,"ip_address":"","ucode":"92F3D2B7F63568","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/f0/08409e78.jpg","comment_is_top":false,"comment_ctime":1546845532,"is_pvip":false,"replies":[{"id":"21104","content":"èµ","user_name":"ä½œè€…å›å¤","comment_id":57600,"uid":"1264162","ip_address":"","utype":1,"ctime":1547117575,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"186230439260","product_id":100020801,"comment_content":"æ­»å¾ªç¯ç¬¬äºŒç§æƒ…å†µï¼š<br>åŒä¸»ï¼Œlog_slave_updates=onï¼Œbinlog_format=statement<br>é…ç½®æ–‡ä»¶é‡Œå†™æˆstatementæ ¼å¼ï¼Œç„¶åä¸¤ä¸ªmasteréƒ½é‡å¯<br>(ä»rowæ ¼å¼æ”¹æˆstatementè¯•äº†å‡ æ¬¡æ²¡æœ‰æˆåŠŸ,å› ä¸ºbinlogä¸­è®°å½•æ ¼å¼è¿˜æ˜¯row)<br>æµ‹è¯•ï¼š<br>è¡¨t (id ,c,d) ä¸»é”®idï¼Œæœ‰ä¸€æ¡æ•°æ®(1,2,1);<br>M1æ‰§è¡Œ <br>     stop slave;<br>     update t set c=c+1 ;æˆ– update t set c=c+1 where id=1;<br>     set global server_id=new_server_idï¼›<br>     start slaveï¼›<br>ç„¶åå°±èƒ½çœ‹åˆ°cçš„å€¼åœ¨ä¸æ–­å˜å¤§ï¼Œæƒ³åœæ­¢å°±æŠŠserver_idæ”¹å›åŸæ¥çš„å°±å¯ä»¥äº†ã€‚<br><br><br>","like_count":43,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435660,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547117575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1788647,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/4a/e7/6c16af5d.jpg","nickname":"æ±‰æ±Ÿ","note":"","ucode":"01622D984B8F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347398,"discussion_content":"æ”¹ server-id ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1612227711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2497728,"avatar":"https://static001.geekbang.org/account/avatar/00/26/1c/c0/b8ff566a.jpg","nickname":"æˆ‘æ˜¯å¤§æ©™å­132","note":"","ucode":"61660568CF07C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570386,"discussion_content":"ä¼šè¯çº§ä¿®æ”¹server_idæ¥åˆ¶é€ å¾ªç¯å¤åˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651752733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57752,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1546897785,"is_pvip":false,"replies":[{"id":"20832","content":"è¿ç»´ç°åœ¨è¦æ±‚ä¹ŸæŒºé«˜çš„<br><br>ç¬¬ä¸€ä¸ªé—®é¢˜å…¶å®æˆ‘ä¹Ÿæ²¡çœ‹æ‡‚ï¼Œâ€œé«˜å³°æœŸä¸¢æ•°æ®â€æ˜¯æŒ‡ä¸»å¤‡å»¶è¿ŸæŸ¥ä¸åˆ°æ•°æ®ï¼Œè¿˜æ˜¯çœŸçš„ä¸¢äº†ï¼Œå¾—å…ˆé—®æ¸…æ¥šä¸‹<br><br>ä¸è¿‡ä½ å›ç­”çš„ç¬¬äºŒç‚¹ä¸å¤ªå¥½ï¼Œä½å³°æœŸé‡åšè¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“è¦è¿™ä¹ˆåšï¼Œè€Œä¸”åªæ˜¯ä¿®å¤åŠ¨ä½œï¼Œæ²¡åŠæ³•ç”¨æ¥å®šä½åŸå› ï¼Œé¢è¯•å®˜æ˜¯è¦é—®ä½ åˆ†æé—®é¢˜çš„æ–¹æ³•ï¼ˆæ–¹å‘é”™è¯¯ï¼‰<br>é‡æ­ä»åº“é”™è¯¯æ—¥å¿—é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰çš„ï¼ˆè¿™ä¸ªæ¯”è¾ƒå¯æƒœï¼Œæš´éœ²äº†å¯¹å­—èŠ‚ä¸å¤Ÿäº†è§£ï¼Œä¸€èˆ¬ä¸äº†è§£çš„æ–¹æ³•åœ¨é¢è¯•çš„æ—¶å€™æ˜¯ä¸å¦‚ä¸è¯´çš„ï¼‰<br><br>ç¬¬äºŒä¸ªé—®é¢˜ä¸‰ç‚¹éƒ½æ˜¯ä½ å›ç­”çš„å—ï¼Ÿé‚£è¿˜ç®—å›ç­”å¾—å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸èƒ½åªè®²åè¯ï¼Œè¦æ‰¾ä¸ªä½ ç†Ÿæ‚‰ç»†èŠ‚çš„æ–¹æ¡ˆå±•å¼€ä¸€ä¸‹<br><br>ä¸‰æ–¹å‘ä¹Ÿæ˜¯å¯¹çš„<br><br>æˆ‘ä¼°è®¡å°±æ˜¯ç¬¬ä¸€ä¸ªé—®é¢˜å‡åˆ†æ¯”è¾ƒå‰å®³","user_name":"ä½œè€…å›å¤","comment_id":57752,"uid":"1264162","ip_address":"","utype":1,"ctime":1546917849,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":6,"race_medal":0,"score":"164755655033","product_id":100020801,"comment_content":"å¤§ç¥ï¼Œæˆ‘å‰äº›å¤©å»é¢è¯•ï¼Œé¢è¯•å®˜é—®äº†ä¸€é¢˜:<br>mysqlåšä¸»ä»ï¼Œä¸€æ®µæ—¶é—´åå‘ç°ä»åº“åœ¨é«˜å³°æœŸä¼šå‘ç”Ÿä¸€ä¸¤æ¡æ¡æ•°æ®ä¸¢å¤±ï¼ˆä¸è®°å¾—æ˜¯æŸ¥è¯¢è¡Œç©ºç™½è¿˜æ˜¯æŸ¥è¯¢ä¸åˆ°äº†ï¼‰ï¼Œä¸»ä»æ­£å¸¸ï¼Œæ€ä¹ˆåˆ¤æ–­ï¼Ÿ<br>1.æˆ‘é—®ä»–æ˜¯ä¸æ˜¯æ‰€ä»¥ä»åº“éƒ½æ˜¯ä¸€æ ·ï¼Œä»–è¯´ä¸ä¸€æ ·<br>2.æˆ‘è¯´ä½å³°æœŸé‡åšæ–°çš„ä»åº“è§‚å¯Ÿï¼ŒæŸ¥çœ‹æ—¥å¿—æœ‰æ²¡æœ‰æŠ¥é”™ï¼Ÿä»–å¥½åƒä¸æ»¡æ„è¿™ä¸ªç­”æ¡ˆã€‚<br><br> äºŒã€ä»–è¿˜é—®ä¸»åº“æŒ‚äº†æ€ä¹ˆåŠï¼Ÿ<br>1.  mysqlä¸»ä»+keepalived&#47;heartbeat<br>     æœ‰è„‘è£‚ï¼Œè¿˜æ˜¯æœ‰å‰é¢ä¸¢æ•°æ®é—®é¢˜<br>2. ç”¨MMMæˆ–HMAä¹‹ç±»<br>3.ç”¨ZKä¹‹ç±»<br><br>ä¸‰ã€å†™çš„å‹åŠ›å¤§æ€ä¹ˆåŠï¼Ÿ<br>æˆ‘å›ç­”ï¼Œåˆ†åº“ï¼Œåˆ†è¡¨<br><br>æ„Ÿè§‰æ•´å¤©ä»–éƒ½ä¸æ€ä¹ˆæ»¡æ„ï¼Œæœç„¶æ²¡è®©æˆ‘å¤è¯•äº†ï¼Œæˆ‘éƒé—·å‘€ï¼Œæˆ‘å°±é¢è¯•è¿ç»´çš„ï¼Œé—®æ•°æ®è¿™ä¹ˆè¯¦ç»†ã€‚ğŸ˜‚<br>å¤§ç¥ï¼Œèƒ½è¯´ä¸‹æˆ‘å“ªé‡Œæœ‰é—®é¢˜å—ï¼Ÿç°åœ¨æˆ‘éƒ½æƒ³ä¸æ˜ç™½ğŸ˜‚","like_count":39,"discussions":[{"author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":250773,"discussion_content":"DBAé¢è¯•ä¼šé—®è¿ç»´çš„ä¸œè¥¿å§ï¼Œjavaé¢è¯•è¿™äº› åŸºæœ¬ç­‰äºå‡‰äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1588039285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1547667,"avatar":"https://static001.geekbang.org/account/avatar/00/17/9d/93/4159edaa.jpg","nickname":"æœ´ç´ æŸ æª¬c","note":"","ucode":"2D4CBB70D801B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295331,"discussion_content":"javaé¢è¯•é—®è¿™äº›çš„ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨å»å•¦ï¼Œä¸šåŠ¡ç›¸å…³çš„ä¸é—®ï¼Ÿã€‚ã€‚è¿™ç§å›¢é˜Ÿä½ å»å¹²å•¥ï¼Ÿé¢è¯•æ˜¯åŒé€‰ï¼Œé¢è¯•å®˜é€‰ä½ ï¼Œä½ ä¹Ÿè¦é€šè¿‡çœ‹é¢è¯•å®˜çš„é—®é¢˜ä»¥åŠè¿½é—®æ–¹å¼é€šè¿‡çœ‹é¢è¯•å®˜è¿™ä¸ªäººçŒœçŒœè¿™ä¸ªå›¢é˜Ÿçš„æ°›å›´","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1596166441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":250773,"ip_address":""},"score":295331,"extra":""}]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435741,"discussion_content":"è¿ç»´ç°åœ¨è¦æ±‚ä¹ŸæŒºé«˜çš„\n\nç¬¬ä¸€ä¸ªé—®é¢˜å…¶å®æˆ‘ä¹Ÿæ²¡çœ‹æ‡‚ï¼Œâ€œé«˜å³°æœŸä¸¢æ•°æ®â€æ˜¯æŒ‡ä¸»å¤‡å»¶è¿ŸæŸ¥ä¸åˆ°æ•°æ®ï¼Œè¿˜æ˜¯çœŸçš„ä¸¢äº†ï¼Œå¾—å…ˆé—®æ¸…æ¥šä¸‹\n\nä¸è¿‡ä½ å›ç­”çš„ç¬¬äºŒç‚¹ä¸å¤ªå¥½ï¼Œä½å³°æœŸé‡åšè¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“è¦è¿™ä¹ˆåšï¼Œè€Œä¸”åªæ˜¯ä¿®å¤åŠ¨ä½œï¼Œæ²¡åŠæ³•ç”¨æ¥å®šä½åŸå› ï¼Œé¢è¯•å®˜æ˜¯è¦é—®ä½ åˆ†æé—®é¢˜çš„æ–¹æ³•ï¼ˆæ–¹å‘é”™è¯¯ï¼‰\né‡æ­ä»åº“é”™è¯¯æ—¥å¿—é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰çš„ï¼ˆè¿™ä¸ªæ¯”è¾ƒå¯æƒœï¼Œæš´éœ²äº†å¯¹å­—èŠ‚ä¸å¤Ÿäº†è§£ï¼Œä¸€èˆ¬ä¸äº†è§£çš„æ–¹æ³•åœ¨é¢è¯•çš„æ—¶å€™æ˜¯ä¸å¦‚ä¸è¯´çš„ï¼‰\n\nç¬¬äºŒä¸ªé—®é¢˜ä¸‰ç‚¹éƒ½æ˜¯ä½ å›ç­”çš„å—ï¼Ÿé‚£è¿˜ç®—å›ç­”å¾—å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸èƒ½åªè®²åè¯ï¼Œè¦æ‰¾ä¸ªä½ ç†Ÿæ‚‰ç»†èŠ‚çš„æ–¹æ¡ˆå±•å¼€ä¸€ä¸‹\n\nä¸‰æ–¹å‘ä¹Ÿæ˜¯å¯¹çš„\n\næˆ‘ä¼°è®¡å°±æ˜¯ç¬¬ä¸€ä¸ªé—®é¢˜å‡åˆ†æ¯”è¾ƒå‰å®³","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1546917849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2446024,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/GA9AqKGEdib009iaPw3FSluiaeibCXmen7yFIKicZB8qqEtczZJF2WmwBJ738eExnxDmPREIGjqc4BFVXiamyhuCZASw/132","nickname":"ä¸€ç¼•é˜³å…‰","note":"","ucode":"CA89C1B7CB16C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587528,"discussion_content":"å†™å‹åŠ›å¤§ï¼Œé¢è¯•å®˜æ€•ä¸æ˜¯è®©ä½ è€ƒè™‘åˆ†åº“åˆ†è¡¨æ¥å¤„ç†ï¼Œåº”è¯¥æ˜¯å†™å¹¶å‘æ¯”è¾ƒå¤§ï¼ŒæœåŠ¡å™¨æ‰›ä¸ä½äº†ï¼Œé—®ä½ å’‹æ•´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663134872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2053679,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/56/2f/4518f8e1.jpg","nickname":"æ”¾ä¸ä¸‹è£åå¯Œè´µ","note":"","ucode":"9FE29C22B9ABE3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576453,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ„Ÿè§‰é¢è¯•å®˜æ„æ€æ˜¯æ˜¯çœŸçš„ä¸¢äº†ï¼Œè€Œéå»¶è¿ŸæŸ¥ä¸åˆ°å§ï¼Œå¦åˆ™å°±æ˜¯é¢JAVAäº†ã€‚\næˆ‘è§‰å¾—ï¼Œé—®é¢˜åº”è¯¥å¯ä»¥è½¬åŒ–ä¸ºã€‚ã€‚ä¸»ä»åŒæ­¥ä¸¢æ•°æ®çš„åœºæ™¯ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655558283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1623575,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c6/17/651e8d72.jpg","nickname":"Persist","note":"","ucode":"203596C835EAF2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290846,"discussion_content":"é¢è¯•é¢˜æ‰“ä¸ªå¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594622375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81731,"user_name":"ä¸‰æœ¨ç¦¾","can_delete":false,"product_type":"c1","uid":1109458,"ip_address":"","ucode":"39C37228236860","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/d2/e3ae7ddd.jpg","comment_is_top":false,"comment_ctime":1554021475,"is_pvip":false,"replies":[{"id":"30224","content":"ä¸€èˆ¬è¯´åŒMæ˜¯åªABä¹‹é—´è®¾ç½®ä¸ºäº’ä¸ºä¸»å¤‡ï¼Œä¸è¿‡ä»»ä½•æ—¶åˆ»åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹åœ¨æ¥å—æ›´æ–°çš„","user_name":"ä½œè€…å›å¤","comment_id":81731,"uid":"1264162","ip_address":"","utype":1,"ctime":1554653450,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"160467811427","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒåŒMå¯èƒ½ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µä¹ˆ? æ¯”å¦‚ï¼ŒA  BåŒæ—¶æ›´æ–°åŒä¸€æ¡æ•°æ®ï¼Ÿ","like_count":37,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445318,"discussion_content":"ä¸€èˆ¬è¯´åŒMæ˜¯åªABä¹‹é—´è®¾ç½®ä¸ºäº’ä¸ºä¸»å¤‡ï¼Œä¸è¿‡ä»»ä½•æ—¶åˆ»åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹åœ¨æ¥å—æ›´æ–°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554653450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2897549,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/36/8d/4527e1b2.jpg","nickname":"çª—å¤–çš„å‹‡æ°”","note":"","ucode":"9DAE4AD477266C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":551397,"discussion_content":"ä¸€èˆ¬è¡¨æŒ‰idè‡ªå¢é•¿çš„è¯ï¼Œåº”è¯¥è®¾ç½®åˆ†å¼€çš„å§ï¼Œæ¯”å¦‚ä¸€è¾¹åªæ’å…¥idä¸ºå¶æ•°çš„æ•°æ®ï¼Œå¦å¤–ä¸€è¾¹æ’å…¥idä¸ºå¥‡æ•°çš„æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645007874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":445318,"ip_address":""},"score":551397,"extra":""}]},{"author":{"id":1115724,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","nickname":"ä¹˜é£","note":"","ucode":"0420C5535DACB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66674,"discussion_content":"åŒM,ä¸€å®šæ—¶æ˜¯ ç›¸äº’ç‹¬ç«‹æ•°æ®çš„ä¸»,å¯¹æ–¹ç‹¬ç«‹æ•°æ®çš„å¤‡.æ‰€ä»¥å°±ä¸å­˜åœ¨åŒæ—¶æ›´æ–°çš„æƒ…å†µ,è‹¥ä¸¤ä¸ªåº“éƒ½æ“ä½œåŒä¸€ä¸ªæ•°æ®,é‚£ä»¥å“ªä¸ªä¸ºä¸»å‘¢?","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1575097314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165676,"discussion_content":"å¦‚æœæ˜¯è¿™æ ·ï¼Œå…¶å®åŒä¸»çš„åœºæ™¯æ„Ÿè§‰æœ‰ç‚¹å¤šä½™ï¼Œä¸»å¤‡å°±å¤Ÿäº†ã€‚é™¤éåŒä¸»çš„å­˜åœ¨çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿å¾ˆå¿«çš„è¿›è¡Œä¸»å¤‡åˆ‡æ¢ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1581313400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62932,"user_name":"æ±ªç‚œ","can_delete":false,"product_type":"c1","uid":1307404,"ip_address":"","ucode":"64B548B9D06404","user_header":"https://static001.geekbang.org/account/avatar/00/13/f3/0c/b46fb155.jpg","comment_is_top":false,"comment_ctime":1548209249,"is_pvip":false,"replies":[{"id":"22261","content":"å¦‚æœâ€redoæ²¡æœ‰åŠæ—¶åˆ·ç›˜ï¼Œbinlogåˆ·ç›˜äº†â€ä¹‹åç¬é—´æ•°æ®åº“æ‰€åœ¨ä¸»æœºæ‰ç”µï¼Œ<br>ä¸»æœºé‡å¯ï¼ŒMySQLé‡å¯ä»¥åï¼Œè¿™ä¸ªäº‹åŠ¡ä¼šä¸¢å¤±ï¼›è¿™é‡Œç¡®å®ä¼šå¼•èµ·æ—¥å¿—å’Œæ•°æ®ä¸ä¸€è‡´ï¼Œ<br>è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¯´è¦é»˜è®¤è®¾ç½®ä¸ºåŒ1çš„åŸå› ä¹‹ä¸€å“ˆ","user_name":"ä½œè€…å›å¤","comment_id":62932,"uid":"1264162","ip_address":"","utype":1,"ctime":1548225420,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":5,"race_medal":0,"score":"147577097313","product_id":100020801,"comment_content":"è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜ï¼Œå¸Œæœ›èƒ½è¢«å›ç­”ï¼š<br>mmysqlä¸æ˜¯åŒä¸€è®¾ç½®çš„æ—¶å€™ï¼Œç ´åäº†äºŒé˜¶æ®µæäº¤ï¼Œäº‹åŠ¡å·²æäº¤ï¼Œredoæ²¡æœ‰åŠæ—¶åˆ·ç›˜ï¼Œbinlogåˆ·ç›˜äº†ï¼Œè¿™ç§æƒ…å†µï¼Œmysqlæ˜¯æ€ä¹ˆæ¢å¤çš„ï¼Œè¿™ä¸ªäº‹åŠ¡åˆ°åº•ç®—ä¸ç®—æäº¤ï¼Ÿ","like_count":35,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437409,"discussion_content":"å¦‚æœâ€redoæ²¡æœ‰åŠæ—¶åˆ·ç›˜ï¼Œbinlogåˆ·ç›˜äº†â€ä¹‹åç¬é—´æ•°æ®åº“æ‰€åœ¨ä¸»æœºæ‰ç”µï¼Œ\nä¸»æœºé‡å¯ï¼ŒMySQLé‡å¯ä»¥åï¼Œè¿™ä¸ªäº‹åŠ¡ä¼šä¸¢å¤±ï¼›è¿™é‡Œç¡®å®ä¼šå¼•èµ·æ—¥å¿—å’Œæ•°æ®ä¸ä¸€è‡´ï¼Œ\nè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¯´è¦é»˜è®¤è®¾ç½®ä¸ºåŒ1çš„åŸå› ä¹‹ä¸€å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548225420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1502074,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKb5BzdGZbSYHxq88kicdDtBh0yBtJpDAD81wruIsTsLdBysDZztrm8tYb4mBYvAI1ZE4lorKuvmgw/132","nickname":"java_lunsong","note":"","ucode":"180EEE6C8BCAA8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311913,"discussion_content":"ä¸è®¾ç½®åŒ1çš„è¯å°±ä¼šæœ‰åˆ·ç›˜ä¸åŒæ­¥çš„é—®é¢˜,mark","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1602519995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2046179,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLAsbPRKgaVw8kKp5pKGUE4JdDZaW16RoRTItTI3wJ3pPGNoFIjYQm8FKa3xLlNwRicziclmWKsmp7kA/132","nickname":"æ¸…æ²³","note":"","ucode":"AB44CB37FCB026","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303443,"discussion_content":"ä¸¤é˜¶æ®µæäº¤å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå¦‚æœredoå‘ç°äº‹åŠ¡æ²¡æœ‰æäº¤ï¼Œå¹¶ä¸”ä¹Ÿæ²¡æœ‰å›æ»šï¼Œä¼šå»æŸ¥è¯¢binlogï¼Œå¦‚æœbinlogé‡Œè¿™ä¸ªäº‹åŠ¡æäº¤äº†ï¼Œé‚£redoä¹Ÿè®¤ä¸ºè¿™ä¸ªäº‹åŠ¡æäº¤äº†ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1599266719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3167302,"avatar":"","nickname":"Geek_eabafe","note":"","ucode":"4D94487320B33B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588125,"discussion_content":"å¦‚æœbinlog redolog éƒ½å†™åˆ°page cacheï¼Œæ­¤æ—¶mysqlå®•æœºäº†ï¼Œä½†ä¸»æœºæ²¡æœ‰å®•æœºï¼Œå…¶å®mysqlé‡å¯æ—¶ï¼Œè¿˜æ˜¯ä¸ä¼šä¸¢æ•°æ®çš„ å¯¹å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663564718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2739046,"avatar":"https://static001.geekbang.org/account/avatar/00/29/cb/66/c34226a9.jpg","nickname":"éå¢¨","note":"","ucode":"6C2F75B04DA1EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414257,"discussion_content":"ç”±äºbinlogæ˜¯å®Œæ•´çš„ï¼Œé‡å¯åä¼šæäº¤äº‹åŠ¡ï¼Œä½†ä¸»åº“redo log å’Œ  å†…å­˜æ•°æ®çš„æ›´æ”¹ä¼šä¸¢å¤± ï¼Œä½†æ˜¯å¤‡åº“å·²ç»æ‹¿åˆ°binlogå»æ›´æ–°æ•°æ® ï¼Œæ­¤æ—¶ä¸»åº“çš„äº‹åŠ¡æ˜¯ä¸æ˜¯å°±çœŸçš„ä¸¢å¤±äº† ï¼Ÿä»è€Œä¸»å¤‡æ•°æ®ä¸ä¸€è‡´ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636703738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67981,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1550374175,"is_pvip":false,"replies":[{"id":"25259","content":"2. æµå¼å‘é€ï¼Œä¸€ä¸ªäº‹åŠ¡æäº¤å°±ä¼šå‘<br>3. â€œå›æ»šæ®µä¹Ÿæ˜¯å…ˆè®°å½•åˆ°å†…å­˜ï¼Œå†è®°å½•åœ¨ç£ç›˜ä¹ˆï¼Ÿâ€ æ˜¯çš„ã€‚  undolog(disk)ä¸éœ€è¦åˆ°data(disk)ï¼Œundo logçš„ä½œç”¨çœ‹ä¸€ä¸‹08ç¯‡<br>5. â€œupdateæ—¶ï¼Œéœ€è¦è®°å½•æ›´æ–°å‰åçš„æ•°æ®ï¼Œé‚£è¿™æ ·çš„è¯ï¼Œchage bufferä¸æ˜¯ç”¨ä¸ä¸Šäº†ä¹ˆâ€ ---  ä¸æ˜¯çš„ï¼Œbinlogé‡Œé¢çš„å†…å®¹ç”¨çš„æ˜¯ä¸»é”®ç´¢å¼•ä¸Šçš„ï¼Œä¸»é”®ç´¢å¼•ç¡®å®ç”¨ä¸ä¸Šchange bufferï¼Œä½†æ˜¯æ™®é€šç´¢å¼•å¯ä»¥<br><br>","user_name":"ä½œè€…å›å¤","comment_id":67981,"uid":"1264162","ip_address":"","utype":1,"ctime":1551183659,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":5,"race_medal":0,"score":"100334621983","product_id":100020801,"comment_content":"å†™ä¸‹å­¦ä¹ å®Œè¿™ç¯‡çš„æ€»ç»“å’Œç†è§£ï¼Œè€å¸ˆæœ‰ç©ºå¸®å¿™çœ‹ä¸‹å“¦<br>1ã€ç®€å•ä¸»å¤‡ï¼Œä¸€ä¸»å¤šå¤‡ï¼Œä¸»è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå°†ç”Ÿæˆbinlogæ–‡ä»¶å‘é€ç»™å¤‡ï¼Œä½†æ˜¯æ¯”è¾ƒå¥½å¥‡ä¸€ç‚¹çš„æ˜¯æ‰€æœ‰å¤‡å‘ä¸»æ‹¿binlogæ–‡ä»¶çš„æ—¶å€™ï¼Œä¸»éƒ½æ˜¯ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå°†binlogæ–‡ä»¶ä¾æ¬¡å‘é€ç»™å¤‡ä¹ˆï¼Ÿä¸¤ä¸ªåº“äº’ä¸ºä¸»å¤‡å¯ä»¥å°†ä¸€ä¸ªè´Ÿè´£æ•°æ®çš„å†™å…¥ï¼Œç”Ÿæˆbinlogæ–‡ä»¶ï¼Œå¦ä¸€ä¸ªä½œä¸ºæ•°æ®çš„åŒæ­¥ï¼Œå°†å…¶æ”¹å˜çš„binlogåŒæ­¥åˆ°è‡ªèº«ï¼Œç„¶åå…¶ä»–å¤‡å†ä»å…¶åŒæ­¥binlogï¼Œå¤šmasterå¯ä»¥åšåˆ°ä¸€å°å®•æœºï¼Œå¿«é€Ÿåˆ‡æ¢åˆ°å¦ä¸€å°ä½œä¸ºä¸»ï¼Œé˜²æ­¢ä¸»åº“å®•æœºå¯¹ä¸šåŠ¡é€ æˆçš„å½±å“ï¼Œä½†æ˜¯è¿™æ ·å¯èƒ½å¯¼è‡´ä¸€å®šç¨‹åº¦çš„åŒæ­¥å»¶è¿Ÿã€‚<br>2ã€ä¸»å¤‡å¤åˆ¶å…³ç³»æ­å»ºå®Œæˆï¼Œä¸»æœ‰æ•°æ®å†™å…¥çš„æ—¶å€™ï¼Œå‘é€ç»™å¤‡çš„åº”è¯¥ä¸æ˜¯æ•´ä¸ªbinlog logæ–‡ä»¶å§ï¼Œæ˜¯æ¯æ¬¡å†™å…¥çš„binlog eventä¹ˆï¼Ÿ<br>3ã€åœ¨å›¾ 2 ä¸»å¤‡æµç¨‹å›¾å¯¹bg-thread-&gt;undolog(disk)-&gt;data(disk)ä¸å¤ªç†è§£ï¼Œå›æ»šæ®µä¹Ÿæ˜¯å…ˆè®°å½•åˆ°å†…å­˜ï¼Œå†è®°å½•åœ¨ç£ç›˜ä¹ˆï¼Ÿundolog(disk)å†åˆ°data(disk),çœ‹äº†ä¸‹undo logçš„æ§åˆ¶å‚æ•°æ²¡æœ‰çœ‹åˆ°æ§åˆ¶ç±»ä¼¼è¡Œä¸ºçš„ï¼Œæ²¡æƒ³é€šï¼Ÿè€å¸ˆå¸®å¿™è§£ç­”ä¸‹å“¦<br>4ã€binlogçš„ä¸‰ç§æ ¼å¼ï¼Œstatement,è®°å½•æ•°æ®åº“åŸå¥ï¼Œæœ‰å¯èƒ½å¯¼è‡´ï¼Œä¸»å¤‡æ‰€é€‰æ‹©çš„ç´¢å¼•ä¸ä¸€è‡´ï¼Œå¯¼è‡´ä¸»å¤‡æ•°æ®ä¸ä¸€è‡´ã€‚rowï¼Œbinlog logè®°å½•çš„æ˜¯æ“ä½œçš„å­—æ®µå€¼ï¼Œæ ¹æ®binlog_row_image çš„é»˜è®¤é…ç½®æ˜¯ FULLåŒ…æ‹¬æ“ä½œè¡Œä¸ºçš„æ‰€æœ‰å­—æ®µå€¼ï¼Œbinlog_row_image è®¾ç½®ä¸º MINIMALï¼Œåˆ™ä¼šè®°å½•å¿…é¡»çš„å­—æ®µ,ä¸€èˆ¬è®¾ç½®ä¸ºrowï¼Œå¯ä»¥æ ¹æ®binlogæ–‡ä»¶åšå…¶ä»–æ“ä½œï¼Œæ¯”å¦‚åœ¨è¯¯åˆ é™¤ä¸€è¡Œæ•°æ®æ—¶ï¼Œå¯ä»¥åšinsertï¼Œæ¢å¤æ•°æ®ã€‚<br>5ã€å¦‚æœæ‰§è¡Œçš„æ˜¯ update è¯­å¥çš„è¯ï¼Œbinlog é‡Œé¢ä¼šè®°å½•ä¿®æ”¹å‰æ•´è¡Œçš„æ•°æ®å’Œä¿®æ”¹åçš„æ•´è¡Œæ•°æ®ï¼Œåœ¨äºŒçº§ç´¢å¼•çš„æ™®é€šç´¢å¼•ï¼Œæœ‰ä¸ªchange bufferä¼˜åŒ–ï¼Œé˜²æ­¢é¢‘ç¹çš„å°†æ•°æ®é¡µè¯»å…¥è¿›æ¥ï¼Œå¯ä»¥å‡å°‘buffer poolçš„æ¶ˆè€—ï¼Œå¯ä»¥åœ¨è¯»å–æ•°æ®æ—¶ï¼Œå†å°†å…¶margeï¼Œæˆ–è€…åå°çº¿ç¨‹margeï¼Œä½†æ˜¯åœ¨binlog logè®¾ç½®rowæ ¼å¼çš„ï¼Œupdateæ—¶ï¼Œéœ€è¦è®°å½•æ›´æ–°å‰åçš„æ•°æ®ï¼Œé‚£è¿™æ ·çš„è¯ï¼Œchage bufferä¸æ˜¯ç”¨ä¸ä¸Šäº†ä¹ˆï¼Ÿè¿˜æ˜¯è¯´è®¾ç½®æˆrowæ ¼å¼çš„æ—¶å€™ï¼Œchange bufferä¼šæ²¡ç”Ÿæ•ˆï¼Ÿè€å¸ˆéº»çƒ¦å¸®å¿™è§£ç­”ä¸‹å“¦ï¼Œæ²¡æƒ³æ˜ç™½","like_count":24,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439454,"discussion_content":"2. æµå¼å‘é€ï¼Œä¸€ä¸ªäº‹åŠ¡æäº¤å°±ä¼šå‘\n3. â€œå›æ»šæ®µä¹Ÿæ˜¯å…ˆè®°å½•åˆ°å†…å­˜ï¼Œå†è®°å½•åœ¨ç£ç›˜ä¹ˆï¼Ÿâ€ æ˜¯çš„ã€‚  undolog(disk)ä¸éœ€è¦åˆ°data(disk)ï¼Œundo logçš„ä½œç”¨çœ‹ä¸€ä¸‹08ç¯‡\n5. â€œupdateæ—¶ï¼Œéœ€è¦è®°å½•æ›´æ–°å‰åçš„æ•°æ®ï¼Œé‚£è¿™æ ·çš„è¯ï¼Œchage bufferä¸æ˜¯ç”¨ä¸ä¸Šäº†ä¹ˆâ€ ---  ä¸æ˜¯çš„ï¼Œbinlogé‡Œé¢çš„å†…å®¹ç”¨çš„æ˜¯ä¸»é”®ç´¢å¼•ä¸Šçš„ï¼Œä¸»é”®ç´¢å¼•ç¡®å®ç”¨ä¸ä¸Šchange bufferï¼Œä½†æ˜¯æ™®é€šç´¢å¼•å¯ä»¥\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551183659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590037,"discussion_content":"updateæ›´æ–°æ•°æ®ï¼Œè¦æ›´æ–°äºŒçº§ç´¢å¼•å’Œä¸»é”®ç´¢å¼•ä¸Šçš„å€¼ï¼›ä¸»é”®ç´¢å¼•æœ¬èº«ä½¿ç”¨ä¸ä¸Šchange bufferï¼Œrowæ ¼å¼çš„binlogï¼Œè®°å½•æ›´æ–°å‰çš„å€¼ï¼Œæ˜¯é€šè¿‡ä¸»é”®ç´¢å¼•è·å–çš„ã€‚äºŒçº§ç´¢å¼•ä»ç„¶å¯ä»¥ä½¿ç”¨change bufferã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665482646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2414796,"avatar":"","nickname":"Geek_36a6ce","note":"","ucode":"81FEEFB2EADCB3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574751,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654315417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2172764,"avatar":"https://static001.geekbang.org/account/avatar/00/21/27/5c/1c557c7e.jpg","nickname":"SaberA","note":"","ucode":"0795D520BB6CB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":390201,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629711316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1785448,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3e/68/c2b2a285.jpg","nickname":"will","note":"","ucode":"6843B14B09192F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344841,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611583728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":70043,"user_name":"é™ˆæ‰¬é¸¿","can_delete":false,"product_type":"c1","uid":1284708,"ip_address":"","ucode":"DDDA8493CDC83C","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/64/eea9aa33.jpg","comment_is_top":false,"comment_ctime":1550974837,"is_pvip":false,"replies":[{"id":"24976","content":"æœ€å¥½æ˜¯æ¢ç¡¬ä»¶,æŠŠå¤‡åº“çš„ç£ç›˜èƒ½åŠ›æä¸Šæ¥,<br><br>å¯ä»¥è€ƒè™‘ä¸€ä¸‹å¤‡åº“è®¾ç½® innodb_flush_log_at_trx_commit å’Œ sync_binlog ä¸ºéåŒ1 è¯•è¯•","user_name":"ä½œè€…å›å¤","comment_id":70043,"uid":"1264162","ip_address":"","utype":1,"ctime":1550980970,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"83155353461","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘ç°åœ¨ç”Ÿäº§ä¸Šç”¨çš„æ˜¯MySQL5.6çš„ä¸»ä»åŒæ­¥ï¼Œä¸»åº“ç”¨çš„æ˜¯ssdç¡¬ç›˜ï¼Œå¤‡åº“ç”¨çš„æ˜¯æœºæ¢°ç¡¬ç›˜ï¼Œç°åœ¨ä»åº“è½åä¸»åº“å¥½å‡ ä¸ªå°æ—¶ï¼Œä¸»åº“ä¸Šæ•°æ®çš„å†™å…¥æ›´æ–°æ¯”è¾ƒå¤§ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯ç”±äºä¸¤ç«¯ç¡¬ä»¶é—®é¢˜é€ æˆçš„å—ï¼Ÿçº¿ä¸Šåªæœ‰ä¸€ä¸ªæ•°æ®åº“ï¼Œæœ‰ä»€ä¹ˆå¥½çš„åŒæ­¥åŠ é€Ÿæ–¹æ¡ˆå—ï¼Ÿéº»çƒ¦è€å¸ˆç»™æˆ‘è§£ç­”ä¸€ä¸‹ï¼Œè°¢è°¢ï¼","like_count":20,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":440413,"discussion_content":"æœ€å¥½æ˜¯æ¢ç¡¬ä»¶,æŠŠå¤‡åº“çš„ç£ç›˜èƒ½åŠ›æä¸Šæ¥,\n\nå¯ä»¥è€ƒè™‘ä¸€ä¸‹å¤‡åº“è®¾ç½® innodb_flush_log_at_trx_commit å’Œ sync_binlog ä¸ºéåŒ1 è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550980970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"éƒ­ä¿Šæ°","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2123,"discussion_content":"æˆ‘æƒ³è¿™ä½åŒå­¦ä¼šé‡‡ç”¨ç¬¬äºŒç§æ–¹å¼çš„ï¼Œå“ˆå“ˆ","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1563270017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306028,"discussion_content":"ä»€ä¹ˆå…¬å¸å‘€è¿™ä¹ˆæŠ é—¨ï¼Œä¸ºéš¾æŠ€æœ¯äººå‘˜","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1600150828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57723,"user_name":"hetiu","can_delete":false,"product_type":"c1","uid":1056127,"ip_address":"","ucode":"35D9338C3ABD20","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/7f/aabc1b66.jpg","comment_is_top":false,"comment_ctime":1546875433,"is_pvip":false,"replies":[{"id":"20819","content":"åŒå†™ï¼Ÿåˆ«åŒå†™ã€‚<br>","user_name":"ä½œè€…å›å¤","comment_id":57723,"uid":"1264162","ip_address":"","utype":1,"ctime":1546914614,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"83151254057","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸‹åŒMæ¨¡å¼æ˜¯å¦‚ä½•è§£å†³æ•°æ®å†²çªçš„ï¼Ÿ","like_count":19,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435722,"discussion_content":"åŒå†™ï¼Ÿåˆ«åŒå†™ã€‚\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1546914614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284068,"avatar":"https://static001.geekbang.org/account/avatar/00/13/97/e4/c6b4d918.jpg","nickname":"Phoeson","note":"","ucode":"57328F475B2A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409906,"discussion_content":"ä¸ºä»€ä¹ˆä¸å»ºè®®åŒå†™ï¼Œæˆ‘çœ‹ç½‘ä¸Šæœ‰è¿™ç§æ–¹æ¡ˆï¼Œæœ‰ä¸¤ä¸ªå‚æ•°å¯ä»¥è®¾ç½®auto_increment_increment å’Œ auto_increment_offset æ¥é¿å…ä¸»é”®å†²çªï¼Œä¸çŸ¥é“åŒä¸»äº’å¤‡å“ªé‡Œä¸å¥½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635528687,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57667,"user_name":"å¤å¨œæ‹‰é»‘æš—ä¹‹ç¥Â·å·´å•¦å•¦èƒ½é‡Â·å •è½è¾¾","can_delete":false,"product_type":"c1","uid":1185642,"ip_address":"","ucode":"080BBCEF7DE985","user_header":"https://static001.geekbang.org/account/avatar/00/12/17/6a/c979163e.jpg","comment_is_top":false,"comment_ctime":1546865609,"is_pvip":false,"replies":[{"id":"20789","content":"ä¿®æ”¹çš„è¡Œè¦è¯»å…¥å†…å­˜å‘€<br><br>å†™binlogåªéœ€è¦ä¸»é”®ç´¢å¼•ä¸Šçš„å€¼<br><br>ä½ è¿™ä¸ªè¯­å¥çš„è¯ï¼Œå¦‚æœå­—æ®µc dä¸Šéƒ½æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆcç”¨ä¸ä¸Šchsnge buffer,<br>Då¯èƒ½å¯ä»¥åŒä¸Š","user_name":"ä½œè€…å›å¤","comment_id":57667,"uid":"1264162","ip_address":"","utype":1,"ctime":1546870002,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":9,"race_medal":0,"score":"53086473161","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œé—®ä¸€ä¸ªå…³äºchange bufferçš„é—®é¢˜ã€‚<br>å¯¹äºinsertè¯­å¥æ¥è¯´ï¼Œchange bufferçš„ä¼˜åŒ–ä¸»è¦åœ¨éå”¯ä¸€çš„äºŒçº§ç´¢å¼•ä¸Šï¼Œå› ä¸ºä¸»é”®æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œæ’å…¥å¿…é¡»è¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨ã€‚<br>é‚£ä¹ˆå¯¹äºupdateè¯­å¥å‘¢ï¼Ÿå¦‚ä¸‹ï¼ˆå‡è®¾cæœ‰éå”¯ä¸€ç´¢å¼•ï¼Œidæ˜¯ä¸»é”®ï¼Œdæ²¡æœ‰ç´¢å¼•ï¼‰ï¼š<br>update t set d=2 where c=10;<br>åŸå…ˆä»¥ä¸ºï¼šä»ç´¢å¼•cå–å‡ºidä¹‹åï¼Œä¸ä¼šå›è¡¨ï¼Œä¹Ÿä¸ä¼šæŠŠä¿®æ”¹è¡Œçš„æ•°æ®è¯»å…¥å†…å­˜ï¼Œè€Œæ˜¯ç›´æ¥åœ¨change bufferä¸­è®°å½•ä¸€ä¸‹ã€‚ä½†çœ‹äº†ä»Šå¤©å¾—å†…å®¹ä¹‹ååˆè¿·ç³Šäº†ï¼Œå› ä¸ºå¦‚æœä¸æŠŠä¿®æ”¹è¡Œçš„æ•°æ®è¯»å…¥å†…å­˜ï¼Œå®ƒåˆæ€ä¹ˆæŠŠæ—§æ•°æ®å†™å…¥binlogä¸­å‘¢ï¼Ÿ<br>æ‰€ä»¥æˆ‘æƒ³é—®çš„å°±æ˜¯ï¼Œä¸Šé¢çš„sqlè¯­å¥ä¼šä¸ä¼šæŠŠä¿®æ”¹è¡Œçš„å†…å®¹ä¹Ÿè¯»è¿›å†…å­˜ï¼Ÿå¦‚æœè¯»è¿›å†…å­˜ï¼Œé‚£è¯»è¿›å†…å­˜çš„è¿™ä¸€æ­¥éš¾é“å°±ä¸ºäº†å†™binlogå—ï¼Ÿå¦‚æœä¸è¯»è¿›å†…å­˜ï¼Œé‚£binlogä¸­çš„æ—§æ•°æ®åˆæ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿè¿˜æœ‰deleteè¯­å¥ä¹ŸåŒç†ã€‚","like_count":12,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435693,"discussion_content":"ä¿®æ”¹çš„è¡Œè¦è¯»å…¥å†…å­˜å‘€\n\nå†™binlogåªéœ€è¦ä¸»é”®ç´¢å¼•ä¸Šçš„å€¼\n\nä½ è¿™ä¸ªè¯­å¥çš„è¯ï¼Œå¦‚æœå­—æ®µc dä¸Šéƒ½æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆcç”¨ä¸ä¸Šchsnge buffer,\nDå¯èƒ½å¯ä»¥åŒä¸Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1546870002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2158801,"avatar":"","nickname":"è°­ä¼Ÿ","note":"","ucode":"3ABC29245A7C22","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575959,"discussion_content":"è¿™é‡Œè¿˜æ˜¯æ²¡å¬æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655211380,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2158801,"avatar":"","nickname":"è°­ä¼Ÿ","note":"","ucode":"3ABC29245A7C22","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587788,"discussion_content":"æ›´æ–°æ“ä½œæ—¢è¦æ›´æ–°èšç°‡ç´¢å¼•ä¹Ÿè¦æ›´æ–°æ‰€å½±å“çš„äºŒçº§ç´¢å¼•çš„ï¼Œæ‰€ä»¥èšç°‡ç´¢å¼•è‚¯å®šæ˜¯è¦è¯»å–ï¼›æ‰€ä»¥rowæ¨¡å¼è¦è·å–è€å€¼è·Ÿchange bufferä¼˜åŒ–å®Œå…¨ä¸å†²çªï¼Œæœ¬æ¥change bufferç›®çš„å°±åªæ˜¯ä¼˜åŒ–äºŒçº§æ™®é€šç´¢å¼•çš„éšæœºè¯»è€Œå·²","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1663294573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":575959,"ip_address":"å¹¿ä¸œ"},"score":587788,"extra":""}]},{"author":{"id":1261530,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDKsicmpne7xQNocwRQ80DDZ3CzjsDoVIcH0SBiaYzS056oVOx4pEeEVeCaXE3QtsjUIEI0x1xQVTw/132","nickname":"muggle","note":"","ucode":"D78087BCAD0860","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533598,"discussion_content":"å…¶å®æ¥¼ä¸»å°±æ˜¯å¯¹change bufferçš„ç”Ÿæ•ˆèŒƒå›´è¿·ç³Šäº†ï¼Œå¹¶éä½¿ç”¨äº†äºŒçº§ç´¢å¼•å°±ä¼šå‡ºå‘change bufferï¼Œè€Œæ˜¯åªå¯¹äºŒçº§ç´¢å¼•æœ‰æ›´æ–°æ—¶ï¼Œæ‰è§¦å‘change bufferçš„ç¼“å­˜ã€‚åƒæ¥¼ä¸»ç»™å‡ºçš„ä¾‹å­ï¼Œç”±äºè¦å¯¹ä¸€ä¸ªæ— ç´¢å¼•å­—æ®µè¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥éœ€è¦è¯»å…¥å†…å­˜ï¼Œæ­¤æ—¶change bufferçš„ä½œç”¨æ˜¯åœ¨æ–°çš„æ•°æ®é¡µè¯»å…¥å†…å­˜æ—¶ï¼Œè¿›è¡Œæ•°æ®é¡µæ˜¯å¦éœ€è¦å¼•ç”¨change bufferå·²å­˜åœ¨çš„å˜åŠ¨è®°å½•çš„åˆ¤å®šã€‚è¿™ä¸€æ­¥æ˜¯å°†å¤§éƒ¨åˆ†çš„éšæœºç£ç›˜è¯»ï¼Œæ”¹ä¸ºäº†é¡ºåºç£ç›˜è¯»ã€‚change bufferåœ¨è¿™é‡Œæ˜¯æœ‰æå‡æ€§èƒ½ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637914448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356054,"discussion_content":"æ ¹æ®SQLè¯­å¥ï¼Œå­—æ®µcçš„å€¼æ˜¯ä¸ä¿®æ”¹çš„ï¼Œè‡ªç„¶ç”¨ä¸ä¸Šchange bufferã€‚è€Œå­—æ®µdå¦‚æœæ˜¯å»ºäº†éå”¯ä¸€äºŒçº§ç´¢å¼•çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µdç´¢å¼•å°±ç”¨çš„ä¸Šchange bufferï¼›å¦‚æœæ²¡æœ‰å»ºç«‹ç´¢å¼•ï¼Œé‚£ä¹ˆéœ€è¦å›è¡¨æ ¹æ®ä¸»é”®IDæŸ¥å‡ºdå€¼æ‰€åœ¨çš„pageï¼Œç„¶åæ›´æ–°ï¼ŒåŒæ—¶å†™binlogã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615523786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306032,"discussion_content":"change buffer æ˜¯éšæœºç£ç›˜å†™ä¼˜åŒ–ä¸ºé¡ºåºå†™ï¼Œå¦‚æœæŸ¥è¯¢åˆ°change bufferä¸­çš„æ•°æ®ï¼ŒçŸ«æ­£pageé¡µæ•°æ®ç”¨çš„ï¼Œpageé¡µå†™å›ç£ç›˜çš„æ—¶å€™å†™å…¥ç£ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600152160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512642,"avatar":"https://static001.geekbang.org/account/avatar/00/17/14/c2/46ebe3a0.jpg","nickname":"ä¾§è€³å€¾å¬","note":"","ucode":"5BF2A2440B54F0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":249922,"discussion_content":"è®©è€å¸ˆæ•´è¿·ç³Šäº†ï¼Œchange bufferä¸æ˜¯è§£å†³éšæœºè¯»å—ï¼Ÿè¿™æ€ä¹ˆåˆè¯»è¿›å†…å­˜äº†ï¼Ÿé‚£æ—¢ç„¶è¯»è¿›æ¥äº†ï¼Œè¿˜è¦bufferå¹²å˜›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587975400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165683,"discussion_content":"chage bufferä¸æ˜¯ç”¨åœ¨éå”¯ä¸€çš„æ™®é€šç´¢å¼•ä¸Šå—ï¼Ÿä¸ºä»€ä¹ˆä½œè€…åˆè¯´ç”¨åœ¨då­—æ®µä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581314057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1043325,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/c9xpiakQ3OC1AlfCeW03lLnnb7mj5v35Hib8YDs66zpnVib2n2qFichFmFp2Ec4QDPR0dKh38MkBBLyD3bE4NiaanZQ/132","nickname":"é¾™æ™“","note":"","ucode":"FAF34F1C65D103","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352326,"discussion_content":"è€å¸ˆæ˜¯è¯´Dæœ‰ç´¢å¼•æ‰ç”¨changebufferï¼Œcæ²¡åšå˜æ›´ä¸éœ€è¦changebufferï¼Œä¸çŸ¥é“ç†è§£å¯¹ä¸å¯¹ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614685177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":165683,"ip_address":""},"score":352326,"extra":""}]}]},{"had_liked":false,"id":57593,"user_name":"æŸšå­","can_delete":false,"product_type":"c1","uid":1002136,"ip_address":"","ucode":"7641A699DA0CFD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/NhbRicjvf8v3K6D3v1FtOicxOciaPZQsCjCmuGCqea4vJeRVaLicKLpAcFQlcTgLvczBWY7SYDkeOtibxXj1PGl7Nug/132","comment_is_top":false,"comment_ctime":1546843803,"is_pvip":true,"replies":[{"id":"20753","content":"æ˜¯çš„ï¼Œå½“ç„¶è¿˜æœ‰minimalå¯é€‰ï¼Œä¼šå¥½äº›ğŸ˜„","user_name":"ä½œè€…å›å¤","comment_id":57593,"uid":"1264162","ip_address":"","utype":1,"ctime":1546850055,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"48791484059","product_id":100020801,"comment_content":"å¤§ä½¬æ‚¨å¥½ï¼Œæ–‡ä¸­è¯´ç°åœ¨è¶Šæ¥è¶Šå¤šçš„ä½¿ç”¨rowæ–¹å¼çš„binlogï¼Œé‚£ä¹ˆåªèƒ½é€‰æ‹©æ¥å—å†™å…¥æ…¢å’Œå ç”¨ç©ºé—´å¤§çš„å¼Šç«¯ä¹ˆï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435658,"discussion_content":"æ˜¯çš„ï¼Œå½“ç„¶è¿˜æœ‰minimalå¯é€‰ï¼Œä¼šå¥½äº›ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546850055,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1019302,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8d/a6/22c37c91.jpg","nickname":"æ¥Š_å®µå¤œ","note":"","ucode":"7BA0CADC5F23BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405631,"discussion_content":"æˆ‘è®¤ä¸ºæ˜¯ä»·å€¼é—®é¢˜ï¼Œæ¯•ç«Ÿï¼Œç›¸æ¯”äºâ€œæ•°æ®æ¢å¤â€æ¥è¯´ï¼Œâ€œå†™å…¥æ…¢ï¼Œç©ºé—´å¤§â€è¿™äº›äº‹å¤ªå°äº†ï¼ŒåŠ ç¡¬ç›˜å‡çº§è®¾å¤‡å°±èƒ½æå®šäº†ã€‚\nä½†æ•°æ®ä¸¢äº†ï¼Œæ¢å¤ä¸äº†ï¼Œé‚£å¯ä¸æ˜¯å°äº‹ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634609111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1794060,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/60/0c/e1f012cb.jpg","nickname":"frankie","note":"","ucode":"813D1352B68A21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360971,"discussion_content":"æˆ‘ä»¬ç”Ÿäº§åªå¯ä»¥ä½¿ç”¨row\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616569777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57962,"user_name":"ä¸è¿·å¤±","can_delete":false,"product_type":"c1","uid":1192774,"ip_address":"","ucode":"7FE6419F0CFEAD","user_header":"https://static001.geekbang.org/account/avatar/00/12/33/46/315a862e.jpg","comment_is_top":false,"comment_ctime":1546951573,"is_pvip":false,"replies":[{"id":"20892","content":"ç´¢å¼•ä½¿ç”¨æ­£ç¡®ï¼Œä¸è¦å‡ºç°å…¨è¡¨æ‰«æï¼Œå…¶å®OKçš„","user_name":"ä½œè€…å›å¤","comment_id":57962,"uid":"1264162","ip_address":"","utype":1,"ctime":1546953450,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":8,"race_medal":0,"score":"44496624533","product_id":100020801,"comment_content":"è¯·æ•™ä¸€ä¸‹ï¼Œç”Ÿäº§ç¯å¢ƒèƒ½ä¸èƒ½ä½¿ç”¨æ­£å¸¸ä½¿ç”¨è¡¨è¿æ¥ï¼Ÿè¦æ³¨æ„å“ªäº›åœ°æ–¹ï¼ŸDBAæ€»æ˜¯è¯´ä¸å»ºè®®ç”¨ï¼Œè¿˜å‚¬ä¿ƒæˆ‘å°†ä½¿ç”¨äº†è¡¨è¿æ¥çš„åœ°æ–¹æ”¹é€ ï¼Œä½†ä¹Ÿè¯´ä¸å‡ºä¸ªæ‰€ä»¥ç„¶ã€‚ç›®å‰åœ¨ä¸¤ä¸ªç™¾ä¸‡çº§æ•°æ®çš„è¡¨ä¸­æœ‰ç”¨åˆ°å†…è¿æ¥ï¼Œå¹¶æ²¡æœ‰è§‰å¾—æœ‰ä»€ä¹ˆé—®é¢˜","like_count":10,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435850,"discussion_content":"ç´¢å¼•ä½¿ç”¨æ­£ç¡®ï¼Œä¸è¦å‡ºç°å…¨è¡¨æ‰«æï¼Œå…¶å®OKçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546953450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1657429,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwTZdUafC5YM7bCASt8icUnoyYfV4hUHulexibDI7B4eaokTxYXHFtoic97DBlCAU9j5Jw4QUuGhyZQ/132","nickname":"Carisy","note":"","ucode":"67E887967347BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":224420,"discussion_content":"å¯èƒ½æ˜¯è€ƒè™‘åˆ°ä¹‹ååˆ†åº“å§ï¼Œä¹‹ååˆ†åº“å…³è”çš„æ•°æ®å¯èƒ½ä¸åœ¨ä¸€ä¸ªåº“","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1586306409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2046179,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLAsbPRKgaVw8kKp5pKGUE4JdDZaW16RoRTItTI3wJ3pPGNoFIjYQm8FKa3xLlNwRicziclmWKsmp7kA/132","nickname":"æ¸…æ²³","note":"","ucode":"AB44CB37FCB026","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303445,"discussion_content":"å¾ˆå¤šdbaéƒ½æ˜¯ä¸»æœºè¿ç»´è½¬è¿‡æ¥çš„ï¼Œå¯¹SQLæˆ–æ•°æ®åº“ç†è®ºäº†è§£æ²¡æœ‰é‚£ä¹ˆæ·±ï¼Œå¾ˆå¤šè¦æ±‚æ˜¯ä¸åˆç†çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599266939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165681,"discussion_content":"å¯¹äºäº’è”ç½‘åœºæ™¯ï¼Œå»ºè®®ä¸è¦ä½¿ç”¨æ•°æ®åº“å±‚é¢çš„joinã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581313943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561174,"discussion_content":"ä¸€èˆ¬éƒ½æ˜¯å•è¡¨æŸ¥,ä»£ç å±‚å…³è”ã€‚ä¸ªäººç†è§£joinä¸åˆ©äºä»£ç å¤ç”¨,åç»­é‡æ„,ä¸”å½±å“æ•°æ®åº“buffer..","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649568869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2249670,"avatar":"","nickname":"mofee888","note":"","ucode":"F1FB6F68DCF802","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346501,"discussion_content":"å¦‚æœè¿™æ ·ï¼Œé‚£â€œå…³ç³»å‹æ•°æ®åº“â€è¿™ä¸ªâ€œå…³ç³»â€è¿˜æœ‰ä»€ä¹ˆç”¨å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611975474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1742868,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/JVOiclOoyFvgJHNXRgqB9RDyDueBHEP5lwATC47nFXRJibtK8ibU8phJPiav3BsPCUAssM1X82mnGtEe7bF91p39eA/132","nickname":"Geek_9d8be5","note":"","ucode":"20181C54A2C589","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283762,"discussion_content":"æˆ‘æƒ³é—®ï¼Œä¸ç”¨joiné‚£è¡¨ä¹‹é—´çš„å…³è”éƒ½å•ç‹¬å»æ‰§è¡Œå˜›ï½ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592357840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1722041,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/46/b9/834d003b.jpg","nickname":"å•¦å•¦å•¦","note":"","ucode":"6A31CDDA7FD3F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1742868,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/JVOiclOoyFvgJHNXRgqB9RDyDueBHEP5lwATC47nFXRJibtK8ibU8phJPiav3BsPCUAssM1X82mnGtEe7bF91p39eA/132","nickname":"Geek_9d8be5","note":"","ucode":"20181C54A2C589","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330900,"discussion_content":"ä¸€èˆ¬éƒ½æ˜¯æ”¾åœ¨ä¸šåŠ¡å±‚é¢è¿›è¡Œå…³è”","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1606727980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":283762,"ip_address":""},"score":330900,"extra":""}]}]},{"had_liked":false,"id":57462,"user_name":"å®ˆæŠ¤.","can_delete":false,"product_type":"c1","uid":1327849,"ip_address":"","ucode":"14FE863C2FF948","user_header":"https://static001.geekbang.org/account/avatar/00/14/42/e9/e27c659d.jpg","comment_is_top":false,"comment_ctime":1546817472,"is_pvip":false,"replies":[{"id":"20716","content":"æˆ‘çš„å»ºè®®æ˜¯ä¸å¤„ç†ï¼Œè‡ªå¢ä¸»é”®idä¸è¿ç»­åº”è¯¥ä½œä¸ºå¸¸æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿä¸è¦ä¾èµ–äºè¿™ä¸ªå®ƒå¿…é¡»è¦è¿ç»­","user_name":"ä½œè€…å›å¤","comment_id":57462,"uid":"1264162","ip_address":"","utype":1,"ctime":1546826074,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"44496490432","product_id":100020801,"comment_content":"è€å¸ˆæ—©ï¼Œé—®ä¸€ä¸ªå’Œæœ¬æ¬¡è¯¾é¢˜ä¹‹å¤–çš„é—®é¢˜.mysql æ•°æ®åº“ï¼Œæˆ‘å¦‚æœå¼€å¯å¤šçº¿ç¨‹å¯¹å¤šå¼ è¡¨åŒæ—¶è¿›è¡Œinsert æ“ä½œ. æ¯å¼ è¡¨è‡ªå¢çš„ä¸»é”®idä¼šä¸è¿ç»­.è¿™ä¸ªé—®é¢˜æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435588,"discussion_content":"æˆ‘çš„å»ºè®®æ˜¯ä¸å¤„ç†ï¼Œè‡ªå¢ä¸»é”®idä¸è¿ç»­åº”è¯¥ä½œä¸ºå¸¸æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿä¸è¦ä¾èµ–äºè¿™ä¸ªå®ƒå¿…é¡»è¦è¿ç»­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546826074,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2303492,"avatar":"https://static001.geekbang.org/account/avatar/00/23/26/04/844be9df.jpg","nickname":"æ‡’èµ«èµ«","note":"","ucode":"EDFB9B69ABB705","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411429,"discussion_content":"å¥½å¥‡é—®ä¸€ä¸‹ï¼Œä¸å¤„ç†å¾—åŒ–ï¼Œå¤šçº¿ç¨‹åŒæ—¶è¿›è¡Œinsertæ“ä½œï¼Œå‡è®¾æ“ä½œåˆ°åŒä¸€å¼ è¡¨ï¼Œä¼šä¸ä¼šå‘ç”Ÿæ­»é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635926575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60310,"user_name":"Mackie .Weng","can_delete":false,"product_type":"c1","uid":1308336,"ip_address":"","ucode":"A86DDC5F3E2DD5","user_header":"https://static001.geekbang.org/account/avatar/00/13/f6/b0/837f5d36.jpg","comment_is_top":false,"comment_ctime":1547457030,"is_pvip":false,"replies":[{"id":"21549","content":"1. æœ‰ç”¨ï¼Œæœ€å¥½ä¿ç•™è¿™äº›ä¿¡æ¯ä¸€èµ·æ‰§è¡Œï¼›<br>2. æå‡ä¸äº†å¤šå°‘é€Ÿåº¦çš„ï¼ŒèŠ±æ—¶é—´ä¸»è¦è¿˜æ˜¯åœ¨æ›´æ–°æ•°æ®çš„é‚£äº›æ—¥å¿—ä¸Šï¼Œé‚£äº›æ—¥å¿—åˆä¸èƒ½å»æ‰çš„ï¼šï¼‰<br>3. è¿™ä¸ªæ–¹æ¡ˆæ˜¯ä¸²è¡Œæ¢å¤ã€‚ä½ å¯ä»¥æŠŠå…¨é‡æ¢å¤å‡ºæ¥çš„åº“ï¼Œæ¥æˆçº¿ä¸Šä¸€ä¸ªä»åº“çš„å¤‡åº“ï¼Œå¼€å¹¶è¡Œå¤åˆ¶ï¼Œ","user_name":"ä½œè€…å›å¤","comment_id":60310,"uid":"1264162","ip_address":"","utype":1,"ctime":1547461772,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"40202162694","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ çš„è¯¾çœŸå¥½ï¼Œ ä½ è®²çš„éƒ½æ˜¯ç”Ÿäº§å®é™…ç”¨åˆ°çš„ï¼Œç‚¹èµ~<br>ä¸è¿‡è¿‘æœŸæœ‰ç‚¹è‹¦æ¼ï¼Œè¦è¯·æ•™ä¸€ä¸‹è¿‘æœŸé‡åˆ°çš„äº‹<br><br>åœºæ™¯ï¼š<br>SSDç¡¬ç›˜ï¼Œæˆ‘ä»¬æ•°æ®ä¸€å¤©ä¸€å¤‡ä»½ï¼Œæƒ³é€šè¿‡æ˜¨å¤©å‡Œæ™¨å¤‡ä»½+binlogæ¢å¤åˆ°æœ€æ–°æ•°æ®ï¼Œå¯¼å‡ºçš„binlogä¸º2Gï¼Œç„¶åå‘ç°å¯¼å…¥binlogèŠ±è´¹äº†4ï¼Œ5å°æ—¶ï¼Œçœ‹äº†ä¸‹binlogæ—¥å¿—é‡Œé¢æœ‰å¾ˆå¤šè¿™ç§ä¿¡æ¯<br># at 2492<br>#190108 17:08:38 server id 2  end_log_pos 2601 CRC32 0x8b0598ec         Query   thread_id=12277795      exec_time=0     error_code=0<br>SET TIMESTAMP=1546938518&#47;*!*&#47;;<br>BEGIN<br>&#47;*!*&#47;;<br># at 2601<br># at 2633<br># at 2919<br>#190108 17:08:38 server id 2  end_log_pos 2950 CRC32 0x13806369         Xid = 1924155105<br>COMMIT&#47;*!*&#47;;<br><br>é—®é¢˜ï¼š<br>1ã€åœ¨å¯¼å‡ºbinlogä¸º2Gè€Œä¸”çœ‹äº†ä¸‹é‡Œé¢å¾ˆå¤šè¿™ç§äº‹åŠ¡ï¼Œè¿™æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œæœ‰ä»€ä¹ˆç”¨å—<br>2ã€è¿™ç§äº‹åŠ¡åœ¨å¯¼å‡ºbinlogçš„æ—¶å€™å¯ä»¥ä¸è®°å½•å—ï¼Œç„¶åæ¥æé«˜æ¢å¤æ•°æ®çš„é€Ÿåº¦ï¼Ÿ<br>3ã€å¦‚æœè¿™æ˜¯æ­£å¸¸çš„æƒ…å†µï¼Œæœ‰æ— æ¨èæ›´å¥½çš„æ•°æ®æ¢å¤æ–¹æ¡ˆæˆ–è€…å·¥å…·<br><br>æ„Ÿè°¢è€å¸ˆ","like_count":10,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436473,"discussion_content":"1. æœ‰ç”¨ï¼Œæœ€å¥½ä¿ç•™è¿™äº›ä¿¡æ¯ä¸€èµ·æ‰§è¡Œï¼›\n2. æå‡ä¸äº†å¤šå°‘é€Ÿåº¦çš„ï¼ŒèŠ±æ—¶é—´ä¸»è¦è¿˜æ˜¯åœ¨æ›´æ–°æ•°æ®çš„é‚£äº›æ—¥å¿—ä¸Šï¼Œé‚£äº›æ—¥å¿—åˆä¸èƒ½å»æ‰çš„ï¼šï¼‰\n3. è¿™ä¸ªæ–¹æ¡ˆæ˜¯ä¸²è¡Œæ¢å¤ã€‚ä½ å¯ä»¥æŠŠå…¨é‡æ¢å¤å‡ºæ¥çš„åº“ï¼Œæ¥æˆçº¿ä¸Šä¸€ä¸ªä»åº“çš„å¤‡åº“ï¼Œå¼€å¹¶è¡Œå¤åˆ¶ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547461772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590055,"discussion_content":"ä»åº“å¹¶è¡Œå¤åˆ¶ï¼Œå¤§èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665492457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":59016,"user_name":"é£äºŒä¸­","can_delete":false,"product_type":"c1","uid":1131876,"ip_address":"","ucode":"73AC0AFB04931D","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/64/2b09a36b.jpg","comment_is_top":false,"comment_ctime":1547272769,"is_pvip":true,"replies":[{"id":"21361","content":"å¯¹ï¼Œåªæ˜¯ä¸€ä¸ªä¸¾ä¾‹çš„","user_name":"ä½œè€…å›å¤","comment_id":59016,"uid":"1264162","ip_address":"","utype":1,"ctime":1547277543,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"40201978433","product_id":100020801,"comment_content":"åœ¨ä¸»åº“æ‰§è¡Œè¿™æ¡ SQL è¯­å¥çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯ç´¢å¼• aï¼›è€Œåœ¨å¤‡åº“æ‰§è¡Œè¿™æ¡ SQL è¯­å¥çš„æ—¶å€™ï¼Œå´ä½¿ç”¨äº†ç´¢å¼• t_modified<br>è€å¸ˆï¼Œæ‚¨å¥½ï¼Œè¿™é‡Œç´¢å¼•é€‰æ‹©ä¸ä¸€æ ·ï¼Œæ˜¯å› ä¸ºå‰é¢æåˆ°çš„mysql ä¼šé€‰é”™ç´¢å¼•å—ï¼Ÿè¿™ç§æƒ…å†µåº”è¯¥å‘ç”Ÿæ¯”è¾ƒå°‘å§ï¼Œè¿™é‡Œåº”è¯¥éƒ½ä¼šé€‰æ‹©ç´¢å¼•aå§ï¼Œè¿˜æ˜¯è¯´è¿™é‡Œåªæ˜¯ä¸€ä¸ªäº‹ä¾‹ï¼Œè¿˜æœ‰æ›´å¤æ‚çš„æƒ…å†µ","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436270,"discussion_content":"å¯¹ï¼Œåªæ˜¯ä¸€ä¸ªä¸¾ä¾‹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547277543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587790,"discussion_content":"ä¸¾ä¸ªä¾‹å­ï¼›å¦‚æœä¸»ä»å»¶æ—¶å¾ˆå¤§ï¼Œæ•°æ®é‡å°±ä¼šå½±å“ç´¢å¼•çš„é€‰æ‹©","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1663295067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58311,"user_name":"å…‰","can_delete":false,"product_type":"c1","uid":1284618,"ip_address":"","ucode":"BDA7F41566E4FE","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/0a/6c74e932.jpg","comment_is_top":false,"comment_ctime":1547034129,"is_pvip":true,"replies":[{"id":"21133","content":"è¿™ä¸ªçš„æ„æ€æ˜¯ï¼Œ ç°åœ¨å·¥ä½œçº¿ç¨‹é‡Œé¢ç­‰å¾…çš„é˜Ÿåˆ—å¤ªå¤šï¼Œéƒ½å·²ç»è¶…è¿‡ä¸Šé™äº†ï¼Œè¦ç­‰å·¥ä½œçº¿ç¨‹æ¶ˆåŒ–æ‰ä¸€äº›äº‹åŠ¡å†åˆ†<br><br>ç®€å•è¯´ï¼Œå°±æ˜¯å¤‡åº“çš„åº”ç”¨æ—¥å¿—çš„é˜Ÿåˆ—å¤ªæ…¢äº†ã€‚ã€‚","user_name":"ä½œè€…å›å¤","comment_id":58311,"uid":"1264162","ip_address":"","utype":1,"ctime":1547119849,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"35906772497","product_id":100020801,"comment_content":"æ—è€å¸ˆä»Šå¤©é‡åˆ°ä¸ªé—®é¢˜å°±æ˜¯ä¸»ä»åŒæ­¥å»¶è¿Ÿï¼ŒæŸ¥åˆ°ä¸»ä»çŠ¶æ€ä¸­å‡ºç°ï¼šSlave_SQL_Running_State: Waiting for Slave Workers to free pending eventsã€‚ä¸çŸ¥é“è¿™ä¸ªæ˜¯å¦ä¼šå¼•èµ·å»¶è¿Ÿã€‚æŸ¥äº†äº›èµ„æ–™è¯´å¾—éƒ½ä¸æ˜¯å¾ˆæ˜ç™½ã€‚è€å¸ˆæ˜¯å¦å¯ä»¥ç®€çŸ­è§£ç­”ä¸‹ã€‚ä»¥åŠè¿™ç§å»¶è¿Ÿå¦‚ä½•é¿å…ã€‚","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436004,"discussion_content":"è¿™ä¸ªçš„æ„æ€æ˜¯ï¼Œ ç°åœ¨å·¥ä½œçº¿ç¨‹é‡Œé¢ç­‰å¾…çš„é˜Ÿåˆ—å¤ªå¤šï¼Œéƒ½å·²ç»è¶…è¿‡ä¸Šé™äº†ï¼Œè¦ç­‰å·¥ä½œçº¿ç¨‹æ¶ˆåŒ–æ‰ä¸€äº›äº‹åŠ¡å†åˆ†\n\nç®€å•è¯´ï¼Œå°±æ˜¯å¤‡åº“çš„åº”ç”¨æ—¥å¿—çš„é˜Ÿåˆ—å¤ªæ…¢äº†ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547119849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1599454,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLOKzDVXse2WibsBGOR27GVYOlv8WRtFBfQe4ekNia2S5986QibD6Wv17gyDpZqmQt3kJcAcbhl3rroQ/132","nickname":"itsxun","note":"","ucode":"69E6CEA3FCB4F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287109,"discussion_content":"ä¸€é’ˆè§è¡€ï¼Œå“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593361642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57909,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1546938747,"is_pvip":false,"replies":[{"id":"20882","content":"å…¶å®è¦æ˜¯æˆ‘å›ç­”ï¼Œæˆ‘ä¹Ÿåªèƒ½è¯´ä»¥ä¸»åº“ä¸ºå‡†æŒ‰é¡ºåºé‡åšï¼Œéƒ½è¿‡äº†è¿™ä¹ˆä¹…äº†è¿˜èƒ½å’‹æ ·ğŸ˜“<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546949766,"ip_address":"","comment_id":57909,"utype":1}],"discussion_count":7,"race_medal":0,"score":"31611709819","product_id":100020801,"comment_content":"é¢è¯•å®˜è¯´çš„æ˜¯mysqlåšä¸€ä¸»å¤šä»ï¼Œè¯»å†™åˆ†ç¦»ï¼Œè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå‘ç°ä»åº“åœ¨ä¸šåŠ¡é«˜å³°æœŸä¸è§„å¾‹æ€§å‡ºç°ä»åº“ä¸¢å¤±æ•°æ®ï¼Œè€Œæ‰€æœ‰ä»åº“ä¸¢å¤±çš„æ•°æ®æƒ…å†µéƒ½ä¸ä¸€æ ·ï¼Œåœ¨ä¸€ä¸ªä»åº“æŸ¥è¯¢æŸæ¡è®°å½•æ˜¯ç©ºçš„ï¼ˆä¸è®°å¾—æ˜¯ç©ºç™½è¿˜æ˜¯ç›´æ¥æŸ¥ä¸åˆ°ï¼ŒçœŸçš„æ²¡æ•°æ®äº†ï¼Œå¹¶ä¸æ˜¯å»¶è¿Ÿäº†ï¼Œä¸»ä»æ²¡åœï¼Œå°±æ˜¯æ²¡å†™è¿›ä»åº“ï¼‰ï¼Œåœ¨å¦ä¸€ä¸ªä»åº“å´èƒ½æŸ¥åˆ°ï¼Œæœ‰çš„åœ¨è¿™ä¸ªä»åº“æŸ¥åˆ°äº†ï¼Œå¦ä¸€ä¸ªä»åº“æŸ¥ä¸åˆ°ï¼Œå› ä¸ºè¿è¡Œäº†å‡ ä¸ªæœˆå®¢æˆ·åé¦ˆæ‰å‘ç°æ­¤é—®é¢˜ï¼Œä¸ç¡®å®šæ‰€æœ‰ä»åº“ä¸­å“ªä¸ªä»åº“æ•°æ®æ˜¯æ²¡æœ‰ä¸¢å¤±çš„ï¼Œå’Œä¸»åº“ä¸€è‡´ï¼Œæ€ä¹ˆåŠï¼Ÿ<br>æˆ‘å›ç­”:<br>1.åœ¨ä¸šåŠ¡ä½å³°æœŸï¼Œé”åº“ï¼Œé‡æ–°åšä¸»ä»ï¼Œä½†æ˜¯å¦‚æœä¸€å¤©ä¸èƒ½åŒæ­¥å®Œçš„è¯ï¼Œç™½å¤©ä¸»åº“è¿˜è¦è§£é”ã€‚ä¸ä¼šæäº†â€¦â€¦<br>åˆä¸åƒmongoDBé‚£æ ·ä¸ç”¨è®°å½•poså€¼ğŸ˜‚<br>2.å‡å°‘ä¸»åº“ioå‹åŠ›è¯•ä¸‹ï¼Œæ¯”å¦‚åˆ†åº“åˆ†è¡¨<br>3.æŸ¥çœ‹æ—¥å¿—ä¹‹ç±»â€¦â€¦<br><br>äºŒã€mysqlä¸»åº“é«˜å¯ç”¨<br>mysqlä¸»ä»+keepalived&#47;heatbeat<br>HMA&#47;MMM<br>ZK<br>æ˜¯æˆ‘çœ‹é…ç½®è§†é¢‘ï¼Œè€å¸ˆç®€å•è®²äº†ä¸€ä¸‹ï¼Œæˆ‘åœ¨ç½‘ä¸Šæœçš„<br><br>ä¸‰ã€ä¸»åº“å†™å‹åŠ›è¿‡å¤§<br>åªèƒ½é€šè¿‡åˆ†åº“ï¼Œåˆ†è¡¨<br>ä¹Ÿæ˜¯æˆ‘çœ‹linuxè¿ç»´åŸ¹è®­è§†é¢‘è€å¸ˆè¯´çš„","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435825,"discussion_content":"å…¶å®è¦æ˜¯æˆ‘å›ç­”ï¼Œæˆ‘ä¹Ÿåªèƒ½è¯´ä»¥ä¸»åº“ä¸ºå‡†æŒ‰é¡ºåºé‡åšï¼Œéƒ½è¿‡äº†è¿™ä¹ˆä¹…äº†è¿˜èƒ½å’‹æ ·ğŸ˜“\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546949766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1458200,"avatar":"https://static001.geekbang.org/account/avatar/00/16/40/18/cc3804e2.jpg","nickname":"æ²ˆæ´ªå½¬","note":"","ucode":"F9911236D0BA1C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100211,"discussion_content":"åˆ†æé—®é¢˜çš„è¯: 1 ç¬¬ä¸€åšç›‘æ§ï¼ŒæŸ¥çœ‹æ˜¯ä¸æ˜¯æœ‰sqlå»¶è¿Ÿã€‚æˆ–è€…binlogçš„ioå»¶è¿Ÿå¯¼è‡´çš„ä¸»ä»ä¸ä¸€è‡´\n                    2 å¯ä»¥è®°å½•ä¸ä¸€è‡´çš„æ•°æ®(éœ€è¦ä¸šåŠ¡é…åˆ)ä¹ˆåˆ¤æ–­æ˜¯ä¸æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚è¿˜æ˜¯åˆ¤æ–­æ—¶å»¶è¿Ÿè¿˜æ˜¯çœŸçš„ä¸ä¸€è‡´\nè§£å†³é—®é¢˜:\n                   1 å¦‚æœæ˜¯æœ€ç»ˆå¯ä»¥ä¸€è‡´ï¼Œé‚£ä¹ˆå°±æ˜¯å»¶è¿Ÿã€‚\n                      1.1 æ ¹æ®åŸå› è§£å†³ä¸€è‡´æ€§ï¼Œè¿˜æœ‰å°±æ˜¯æƒ³åŠæ³•é™ä½å‹åŠ›\n                      1.2 å…³è”é«˜çš„ä¸šåŠ¡ç›´æ¥è¯»ä¸»\n                  2 å¦‚æœæ˜¯çœŸçš„å·²ç»ä¸ä¸€è‡´äº†ï¼Œé‚£ä¹ˆå°±é‡åšå‘—ã€‚çƒ­å¤‡å¾ˆå¿«çš„ã€‚éœ€è¦ä¸­é—´ä»¶åˆ‡æ¢æˆ–è€…ä¸šåŠ¡é…åˆ\n        ä¹Ÿå¯ä»¥è€ƒè™‘ptè¿›è¡Œcrc32 æ£€æµ‹æ•°æ®ä¸€è‡´æ€§æˆ–è€… pt-syncä¿®å¤ ä½†æ˜¯äº‘ä¸Šçš„è¯ï¼Œå¯èƒ½ä¸å¥½ç”¨ï¼Œæ²¡æœ‰superæƒé™           ","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1577242503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115724,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","nickname":"ä¹˜é£","note":"","ucode":"0420C5535DACB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66685,"discussion_content":"æ˜¯å¦è€ƒè™‘æ˜¯å› ä¸ºåŸºäºstatementåŒæ­¥æ•°æ®å¯¼è‡´ ä»åº“æ•°æ®ä¸ä¸€è‡´?","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1575098199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333649,"avatar":"https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg","nickname":"ä¸åƒè¾£ğŸ‘¾","note":"","ucode":"B25E0725B5E85F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381611,"discussion_content":"æˆ‘ä¹Ÿè§‰å¾—æ˜¯åŸºäºstatmentåšä¸»ä»å¯¼è‡´çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625143102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1794060,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/60/0c/e1f012cb.jpg","nickname":"frankie","note":"","ucode":"813D1352B68A21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360973,"discussion_content":"æˆ‘ä¹Ÿé‡åˆ°è¿‡ï¼Œä¸»ä»æ­£å¸¸ï¼Œéƒ½æ˜¯åŒyes,ä½†æ˜¯ä»åº“æ•°æ®å’Œä¸»åº“ä¸ä¸€è‡´ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616570028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1902913,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/09/41/32ff65b9.jpg","nickname":"Lets up","note":"","ucode":"784EC9E9ACC892","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291040,"discussion_content":"rc+statement,å¹¶è¡Œå¤åˆ¶çš„è¯å¯èƒ½ä¼šæœ‰æ•°æ®ä¸¢å¤±å§ï¼Œæ¯”å¦‚è¯´deleteæ¡ä»¶ä¸æ˜¯ä¸»é”®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594688625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1902913,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/09/41/32ff65b9.jpg","nickname":"Lets up","note":"","ucode":"784EC9E9ACC892","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590058,"discussion_content":"RCç›®å‰å·²ç»ä¸æ”¯æŒè®¾ç½®æˆstatementæ ¼å¼äº†ï¼Œå®¹æ˜“é€ æˆä¸»ä»ä¸ä¸€è‡´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665493000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":291040,"ip_address":"é™•è¥¿"},"score":590058,"extra":""}]}]},{"had_liked":false,"id":90352,"user_name":"northpoplar","can_delete":false,"product_type":"c1","uid":1087178,"ip_address":"","ucode":"B83EF9C7915412","user_header":"https://static001.geekbang.org/account/avatar/00/10/96/ca/4af8614f.jpg","comment_is_top":false,"comment_ctime":1556498818,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27326302594","product_id":100020801,"comment_content":"åšå®éªŒï¼Œéœ€è¦çš„å‡ ä¸ªå‡†å¤‡å·¥ä½œ<br>æŸ¥çœ‹binlog_format:<br>show session variables like &#39;binlog_format&#39;;<br>ä¿®æ”¹æ—¥å¿—æ ¼å¼ï¼š<br>set session binlog_format=statement;<br>set session binlog_format=row;<br>æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶åˆ—è¡¨ï¼š<br>show binary logs;<br>æ ¹æ®æŸ¥çœ‹åˆ°çš„æ—¥å¿—æ–‡ä»¶ä½¿ç”¨æ˜¾ç¤ºæ—¥å¿—äº‹ä»¶çš„å‘½ä»¤:<br>show binlog events in &#39;XXX&#39;;","like_count":7},{"had_liked":false,"id":57951,"user_name":"é¸ ç¿±","can_delete":false,"product_type":"c1","uid":1116568,"ip_address":"","ucode":"7D498AF2BC4289","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/98/b11c372b.jpg","comment_is_top":false,"comment_ctime":1546949658,"is_pvip":false,"replies":[{"id":"20897","content":"ä¸èƒ½ç”¨åœ¨ä½¿ç”¨flashbackæœºåˆ¶æ¢å¤","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546957605,"ip_address":"","comment_id":57951,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27316753434","product_id":100020801,"comment_content":"ä¹Ÿå°±æ˜¯è¯´ statementæ ¼å¼æ˜¯ä¸èƒ½ç”¨æ¥æ¢å¤æ•°æ®çš„æ˜¯å˜›â€¦â€¦","like_count":6,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435844,"discussion_content":"ä¸èƒ½ç”¨åœ¨ä½¿ç”¨flashbackæœºåˆ¶æ¢å¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546957605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57614,"user_name":"ç‰§é±¼","can_delete":false,"product_type":"c1","uid":1360250,"ip_address":"","ucode":"0EB8FDD7A4BB2E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erFY9H3mxyTpZ9gxAmdeKic565hicicDZmv7cjswd8hdernmxib0chdQrlDNKUZQ8AticQCgDdgVEmJNuA/132","comment_is_top":false,"comment_ctime":1546851381,"is_pvip":false,"replies":[{"id":"20774","content":"1. å°±æ˜¯æˆ‘ä»¬æ–‡ä¸­åé¢è¯´çš„é‚£äº›åŸå› ï¼Œè¦ç”¨è¿™äº›binlogçš„å†…å®¹å»åšåˆ«çš„äº‹æƒ…ğŸ˜„<br>2. å¯¹ï¼Œå›ºå®šæ¨¡å¼ä¸‹çš„ã€‚å¥½é—®é¢˜ï¼Œæˆ‘å»æ‹‰ä¸ä¸‹æœ€æ–°ç‰ˆæœ¬ä»£ç çœ‹ä¸‹è§„åˆ™","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546854830,"ip_address":"","comment_id":57614,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27316655157","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œmixedæ˜¯rowå’Œstatementçš„ä¼˜ç‚¹æ•´åˆæŠ˜ä¸­æ–¹æ¡ˆï¼Œè¿™åº”è¯¥æ˜¯å¥½å¤šç³»ç»Ÿè®¾è®¡ç†å¿µå§ï¼Ÿé‚£ä¹ˆé—®é¢˜ä¸€ï¼šmixedæ—¢ç„¶èƒ½åˆ¤æ–­æ˜¯ä»€ä¹ˆæ—¶å€™ä½¿ç”¨rowï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨statementï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå¥½å¤šæ¨èéƒ½æ˜¯ä½¿ç”¨rowè€Œä¸”ä¸æ˜¯ä½¿ç”¨mixedå‘¢ï¼Ÿæ˜¯å› ä¸ºmixedè¿™ç§æ¨¡å¼ä¸‹çš„è‡ªåŠ¨é€‰æ‹©è½¬æ¢ä¸å‡†ç¡®å¯èƒ½ä¼šå‡ºç°ä¸»ä»é—®é¢˜å—ï¼Ÿé—®é¢˜äºŒï¼šå½“ä½¿ç”¨mixedæ¨¡å¼æƒ…å†µä¸‹ï¼Œmysqlå†…éƒ¨æ˜¯æ€ä¹ˆåˆ¤æ–­çš„å‘¢ï¼Ÿæ¯”å¦‚æœ‰limitè¯­å¥å°±ä¼šé€‰æ‹©è®°å½•rowæ ¼å¼ï¼Œæœ‰now()å‡½æ•°è¿˜æ˜¯åŒæ ·ä¼šè®°å½•statementæ ¼å¼ï¼Œmysqlåªæ˜¯ç®€å•çš„æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ä¼šä½¿ç”¨è®°å½•rowæ ¼å¼å—ï¼Ÿè°¢è°¢ã€‚","like_count":6,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435666,"discussion_content":"1. å°±æ˜¯æˆ‘ä»¬æ–‡ä¸­åé¢è¯´çš„é‚£äº›åŸå› ï¼Œè¦ç”¨è¿™äº›binlogçš„å†…å®¹å»åšåˆ«çš„äº‹æƒ…ğŸ˜„\n2. å¯¹ï¼Œå›ºå®šæ¨¡å¼ä¸‹çš„ã€‚å¥½é—®é¢˜ï¼Œæˆ‘å»æ‹‰ä¸ä¸‹æœ€æ–°ç‰ˆæœ¬ä»£ç çœ‹ä¸‹è§„åˆ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546854830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57893,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1546936907,"is_pvip":false,"replies":[{"id":"21115","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547118863,"ip_address":"","comment_id":57893,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23021773387","product_id":100020801,"comment_content":"è¿™èŠ‚è¯¾å®Œå…¨å­¦æ‡‚äº†ï¼Œå¼€å¿ƒğŸ˜ƒ","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435814,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547118863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57892,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1546936826,"is_pvip":false,"replies":[{"id":"20880","content":"ä¸ä¼šå“¦ï¼Œ1ç»™2ï¼Œ2ç»™3ï¼Œ3ç»™1ï¼Œ1å°±æ”¾å¼ƒäº†<br><br>ä¸è¿‡å¼•å…¥ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹çš„æ€è·¯æ˜¯å¯¹çš„å“ˆğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546949313,"ip_address":"","comment_id":57892,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23021773306","product_id":100020801,"comment_content":"çº§è”å¤åˆ¶ï¼Œ3ä¸ªæ•°æ®åº“ï¼Œé¦–å°¾ç›¸è¿ï¼Œåº”ä¼šå‡ºç°æ­»å¾ªç¯","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435813,"discussion_content":"ä¸ä¼šå“¦ï¼Œ1ç»™2ï¼Œ2ç»™3ï¼Œ3ç»™1ï¼Œ1å°±æ”¾å¼ƒäº†\n\nä¸è¿‡å¼•å…¥ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹çš„æ€è·¯æ˜¯å¯¹çš„å“ˆğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546949313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1681374,"avatar":"https://static001.geekbang.org/account/avatar/00/19/a7/de/10d89f28.jpg","nickname":"è°ˆæ¸¯","note":"","ucode":"C4E49E1A9288AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333137,"discussion_content":"ä¸‰ä¸ªåŠä¸‰ä¸ªä»¥ä¸ŠèŠ‚ç‚¹ï¼Œå…¶ä¸­ä¸€ä¸ªåœ¨å‘å‡ºbinlogä¹‹åè¿˜æ²¡æœ‰æ”¶åˆ°å°±æŒ‚æ‰äº†ï¼Œè¿™æ—¶å€™å°±æ²¡æœ‰èŠ‚ç‚¹æ¥ç»ˆæ­¢å¾ªç¯","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1607439443,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97177,"user_name":"è¿˜ä¸€æ£µæ ‘","can_delete":false,"product_type":"c1","uid":1317709,"ip_address":"","ucode":"C187F2A141D60E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eop9WylZJicLQxlvXukXUgPp39zJHyyReK5s1C9VhA6rric7GiarbfQMuWhdCCDdxdfL610Hc4cNkn9Q/132","comment_is_top":false,"comment_ctime":1558602185,"is_pvip":false,"replies":[{"id":"34893","content":"å› ä¸ºè¿™ä¸ªbinlog eventé‡Œé¢åªåˆ é™¤äº†ä¸€æ¡<br>æ‰€ä»¥åœ¨å¤‡åº“åº”ç”¨çš„æ—¶å€™ï¼Œåˆ äº†ä¸€æ¡ä»¥åï¼Œå°±é€€å‡ºäº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1558708659,"ip_address":"","comment_id":97177,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18738471369","product_id":100020801,"comment_content":"ç¬¬äºŒéåˆ°è¿™é‡Œå•¦ï¼Œçœ‹ç•™è¨€æœ‰ä¸ªç–‘é—®ï¼š<br>å…³äºæ²¡æœ‰ä¸»é”®çš„è¡¨ æœ‰åŒæ ·çš„ä¸¤è¡Œæ•°æ®ï¼Œåœ¨ä¸»åº“ä¸Š limit 1 åˆ é™¤å…¶ä¸­çš„ä¸€æ¡ï¼Œå¤‡åº“ä¹Ÿæ˜¯éšæœºåˆ é™¤å…¶ä¸­çš„ä¸€æ¡ã€‚<br>è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼šè§£æä¸»åº“çš„binlog çœ‹åˆ°çš„rowè®°å½•å®Œæ•´çš„binlogå¦‚ä¸‹ï¼š<br># at 1245<br>#190523 16:58:32 server id 1  end_log_pos 1293 CRC32 0x598e440d         GTID    last_committed=0        sequence_number=0       rbr_only=no<br>SET @@SESSION.GTID_NEXT= &#39;f15197b2-f235-11e8-88f1-00163e02236b:6&#39;&#47;*!*&#47;;<br># at 1293<br>#190523 16:58:32 server id 1  end_log_pos 1365 CRC32 0x61325084         Query   thread_id=2     exec_time=0     error_code=0<br>SET TIMESTAMP=1558601912&#47;*!*&#47;;<br>BEGIN<br>&#47;*!*&#47;;<br># at 1365<br>#190523 16:58:32 server id 1  end_log_pos 1411 CRC32 0x2b9b4aea         Table_map: `test`.`bbb` mapped to number 78<br># at 1411<br>#190523 16:58:32 server id 1  end_log_pos 1451 CRC32 0x31dec98e         Delete_rows: table id 78 flags: STMT_END_F<br><br>BINLOG &#39;<br>uGDmXBMBAAAALgAAAIMFAAAAAE4AAAAAAAEABHRlc3QAA2JiYgABAwAB6kqbKw==<br>uGDmXCABAAAAKAAAAKsFAAAAAE4AAAAAAAEAAgAB&#47;&#47;4BAAAAjsneMQ==<br>&#39;&#47;*!*&#47;;<br>### DELETE FROM `test`.`bbb`<br>### WHERE<br>###   @1=1 &#47;* INT meta=0 nullable=1 is_null=0 *&#47;<br># at 1451<br>#190523 16:58:32 server id 1  end_log_pos 1482 CRC32 0xd6be57a8         Xid = 216<br>COMMIT&#47;*!*&#47;;<br><br>--ä»binlogçœ‹åº”è¯¥ä¼šåˆ é™¤2æ¡çš„ï¼Œä½†ä¸çŸ¥ä¸ºä»€ä¹ˆåªåˆ é™¤äº†ä¸€æ¡ï¼Œè¿™ä¸ªmysqlæ˜¯æ€ä¹ˆæ§åˆ¶çš„ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451165,"discussion_content":"å› ä¸ºè¿™ä¸ªbinlog eventé‡Œé¢åªåˆ é™¤äº†ä¸€æ¡\næ‰€ä»¥åœ¨å¤‡åº“åº”ç”¨çš„æ—¶å€™ï¼Œåˆ äº†ä¸€æ¡ä»¥åï¼Œå°±é€€å‡ºäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558708659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79912,"user_name":"D.L","can_delete":false,"product_type":"c1","uid":1339142,"ip_address":"","ucode":"E6DA186C4BB972","user_header":"https://static001.geekbang.org/account/avatar/00/14/6f/06/82d8bdfb.jpg","comment_is_top":false,"comment_ctime":1553573023,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"18733442207","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘è¿™é‡Œæœ‰ä¸ªé—®é¢˜æƒ³é—®ä¸€ä¸‹ã€‚åœ¨ä¸»åº“å®•æœºåï¼Œè¿˜æ²¡åŒæ­¥åˆ°ä»åº“çš„binlogåœ¨ä»åº“ä¸Šæ˜¯çœ‹ä¸åˆ°çš„ï¼Œè¿™ç§é—®é¢˜æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583174,"discussion_content":"æˆ–è€…é€šè¿‡semi-replçš„after_syncåŠåŒæ­¥å¤åˆ¶æœ€å¤§é™åº¦çš„é˜²æ­¢ä¸»ä»å¤åˆ¶ä¸¢å¤±ï¼Œä½†è¿˜æ˜¯æœ‰å¯èƒ½ä¸»ä»æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659940740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583173,"discussion_content":"å¯ä»¥é€šè¿‡MHAé«˜å¯ç”¨ç»„ä»¶æ¥å®ç°ï¼Œå·®å¼‚binlogçš„è¡¥é½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659940696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179156,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/14/f1532dec.jpg","nickname":"é²ç­å¤§å¸ˆ","note":"","ucode":"4F9615DF87B031","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301666,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598602839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1297858,"avatar":"https://static001.geekbang.org/account/avatar/00/13/cd/c2/4ffdf37b.jpg","nickname":"DJZhu","note":"","ucode":"82866CD74F1A6F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46776,"discussion_content":"é€šè¿‡åŒæ­¥ç­–ç•¥æ’ä»¶https://dev.mysql.com/doc/refman/8.0/en/replication-semisync.html","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573205727,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57821,"user_name":"å°è¶…","can_delete":false,"product_type":"c1","uid":1068004,"ip_address":"","ucode":"FCC8B303A16E70","user_header":"https://static001.geekbang.org/account/avatar/00/10/4b/e4/0219e7c8.jpg","comment_is_top":false,"comment_ctime":1546917609,"is_pvip":false,"replies":[{"id":"20833","content":" é€†å‘ä½¿ç”¨ï¼Œå¯ä»¥ç”¨æ¥è§£å†³æ­»å¾ªç¯é—®é¢˜ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546917957,"ip_address":"","comment_id":57821,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18726786793","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘çœ‹å¥½å¤šäººç•™è¨€éƒ½è¯´æ”¹set global server_idæ¥é€ æˆæ­»å¾ªç¯çš„ï¼Œè¿™ä¸ªserver_idä¸ºä»€ä¹ˆä¸è®¾ç½®æˆåªè¯»ï¼Œè¿™ç§ä¿®æ”¹ä¸€èˆ¬ç”¨æ¥åšä»€ä¹ˆç”¨ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435775,"discussion_content":" é€†å‘ä½¿ç”¨ï¼Œå¯ä»¥ç”¨æ¥è§£å†³æ­»å¾ªç¯é—®é¢˜ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546917957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356058,"discussion_content":"é™¤äº†æ”¹server_idè¿˜æœ‰å…¶ä»–ä¼šå¯¼è‡´æ­»å¾ªç¯çš„åœºæ™¯å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615524376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57585,"user_name":"ä¸€å¤§åªğŸ˜´","can_delete":false,"product_type":"c1","uid":1310960,"ip_address":"","ucode":"92F3D2B7F63568","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/f0/08409e78.jpg","comment_is_top":false,"comment_ctime":1546842047,"is_pvip":false,"replies":[{"id":"20783","content":"ğŸ‘ğŸ¿","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546869586,"ip_address":"","comment_id":57585,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18726711231","product_id":100020801,"comment_content":"æ€è€ƒé¢˜ï¼š<br>åŒä¸»<br>M1 server_id 1363306 log_slave_updates=on<br>M2 server_id 1163306 log_slave_updates=on<br>åŒä¸»å¤åˆ¶æ­£å¸¸<br>è§¦å‘æ­»å¾ªç¯åœºæ™¯ï¼š<br>teståº“ä¸­æœ‰ä¸€ä¸ªtè¡¨(id int,c int,d int)ï¼Œtè¡¨æ²¡æœ‰ä¸»é”®<br>M1æ‰§è¡Œï¼š<br>stop slave;<br>insert into t values (3,3,3);<br>set global server_id=1373306 ;  ##å˜æ›´M1çš„server_id<br>start slave;<br>ç„¶åå°±èƒ½çœ‹åˆ°M1å’ŒM2ï¼Œä¸€ç›´åœ¨ä¸åœçš„æ’å…¥(3,3,3)<br><br>æˆ‘ç›®å‰æµ‹è¯•å‡ºæ¥è¿™ä¸€ç§æƒ…å†µï¼Œå¯èƒ½è¿˜æœ‰å…¶å®ƒçš„è§¦å‘æ–¹å¼ï¼Œæœ›è¡¥å……<br>æ„Ÿè§‰è¿™ä¸ªæœºåˆ¶ä¸å®Œå–„å°±æ˜¯åªä¾èµ–server_idä½œä¸ºåˆ¤æ–­æ˜¯å¦æ˜¯è‡ªèº«æ‰§è¡Œçš„è¯­å¥ï¼Œè€Œä¸”server_idè¿˜æ˜¯åŠ¨æ€å˜é‡ï¼Œå¦‚æœæ˜¯åªè¯»ä¹Ÿè®¸ä¼šå¥½çš„å¤š<br><br><br><br><br>","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435653,"discussion_content":"ğŸ‘ğŸ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546869586,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117407,"user_name":"è¿œæ–¹å¤•é˜³","can_delete":false,"product_type":"c1","uid":1122317,"ip_address":"","ucode":"EEBCD53B2B5D3E","user_header":"https://static001.geekbang.org/account/avatar/00/11/20/0d/93967314.jpg","comment_is_top":false,"comment_ctime":1564041931,"is_pvip":false,"replies":[{"id":"43026","content":"å°±æ˜¯è¯´è‡³å°‘è®¾ç½®æˆmixedï¼Œå®é™…ä¸Šåº”è¯¥è®¾ç½®æˆrowğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1564066558,"ip_address":"","comment_id":117407,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14448943819","product_id":100020801,"comment_content":"1ä½ è‡³å°‘åº”è¯¥æŠŠ binlog çš„æ ¼å¼è®¾ç½®ä¸º mixed  <br>2è™½ç„¶ mixed æ ¼å¼çš„ binlog ç°åœ¨å·²ç»ç”¨å¾—ä¸å¤šäº† <br>è€å¸ˆä½ å¥½ï¼Œè¿™2å¥è¯å‡ºç°åœ¨ä¸€èµ·å¦‚ä½•ç†è§£ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459953,"discussion_content":"å°±æ˜¯è¯´è‡³å°‘è®¾ç½®æˆmixedï¼Œå®é™…ä¸Šåº”è¯¥è®¾ç½®æˆrowğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564066558,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57954,"user_name":"React","can_delete":false,"product_type":"c1","uid":1100554,"ip_address":"","ucode":"A176EF0AA242B5","user_header":"https://static001.geekbang.org/account/avatar/00/10/cb/0a/6a9e6602.jpg","comment_is_top":false,"comment_ctime":1546950331,"is_pvip":false,"replies":[{"id":"20898","content":"å¦‚æœè‡ªå¢å€¼ä¸¥æ ¼æ§åˆ¶äº†ï¼Œä¹Ÿæ²¡å¿…è¦è®¾ç½®è·³è¿‡ä¸»é”®å†²çªäº†å¯¹å§ï¼ˆåæ­£ä¸å†²çªï¼‰<br><br>é™¤éä½ çš„ä¸šåŠ¡å°±æ˜¯è®¾è®¡å¥½æ”¯æŒå¤šç‚¹å†™å…¥ï¼Œå¦åˆ™è¿˜æ˜¯æŠŠä¸å†™å…¥çš„éƒ½è®¾ç½®ä¸Šreadonlyå§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546957708,"ip_address":"","comment_id":57954,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14431852219","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæ–‡ç« å‰é¢è¯´ä¸»ä»æœ€å¥½ä»æœºè®¾ç½®readonly.é‚£ä¹ˆåœ¨åŒä¸»çš„æƒ…å†µ(äº’ä¸ºä¸»å¤‡)ä¸‹ï¼Œè®¾ç½®ä¸åŒçš„è‡ªå¢å€¼æ˜¯å¦å°±å¯ä»¥ä¸ç”¨è®¾ç½®åªè¯»äº†ï¼Ÿä¸”æ­¤æ—¶å¤åˆ¶æ˜¯å¦å¯ä»¥è·³è¿‡ä¸»é”®å†²çªï¼Œå› ä¸ºè‡ªå¢å€¼ä¸åŒï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435845,"discussion_content":"å¦‚æœè‡ªå¢å€¼ä¸¥æ ¼æ§åˆ¶äº†ï¼Œä¹Ÿæ²¡å¿…è¦è®¾ç½®è·³è¿‡ä¸»é”®å†²çªäº†å¯¹å§ï¼ˆåæ­£ä¸å†²çªï¼‰\n\né™¤éä½ çš„ä¸šåŠ¡å°±æ˜¯è®¾è®¡å¥½æ”¯æŒå¤šç‚¹å†™å…¥ï¼Œå¦åˆ™è¿˜æ˜¯æŠŠä¸å†™å…¥çš„éƒ½è®¾ç½®ä¸Šreadonlyå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546957708,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203145,"user_name":"icyricky","can_delete":false,"product_type":"c1","uid":1302556,"ip_address":"","ucode":"D63C285165309D","user_header":"https://static001.geekbang.org/account/avatar/00/13/e0/1c/aa50dc27.jpg","comment_is_top":false,"comment_ctime":1586143889,"is_pvip":false,"replies":[{"id":"75953","content":"å¯¹ï¼Œå¥‘ç¨super_read_only ä¹Ÿä¸å½±å“åŒæ­¥","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1586171497,"ip_address":"","comment_id":203145,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10176078481","product_id":100020801,"comment_content":"è¿™ä¸ªé—®é¢˜ï¼Œä½ ä¸ç”¨æ‹…å¿ƒã€‚å› ä¸º readonly è®¾ç½®å¯¹è¶…çº§ (super) æƒé™ç”¨æˆ·æ˜¯æ— æ•ˆçš„ï¼Œè€Œç”¨äºåŒæ­¥æ›´æ–°çš„çº¿ç¨‹ï¼Œå°±æ‹¥æœ‰è¶…çº§æƒé™ã€‚<br>è§‰å¾—sql_threadå±äºå†…éƒ¨çº¿ç¨‹ï¼Œåº”è¯¥ä¸å—read_onlyå’Œsuper_read_onlyå½±å“å§ã€‚æˆ‘ä»¬ç¯å¢ƒéƒ½æ˜¯å¼€çš„super_read_onlyï¼ˆå› ä¸ºæœ‰æ¬¡ è¯¯ç”¨rootè´¦å·åœ¨ä»åº“æ›´æ”¹äº†è¡¨ç»“æ„ï¼‰ï¼Œä½†æ˜¯å¤åˆ¶çº¿ç¨‹ä¹Ÿæ²¡æœ‰å‡ºé”™ã€‚ã€‚ä¸çŸ¥é“æˆ‘çš„ç†è§£æ˜¯å¦æ­£ç¡®ã€‚ã€‚","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490782,"discussion_content":"å¯¹ï¼Œå¥‘ç¨super_read_only ä¹Ÿä¸å½±å“åŒæ­¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586171497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201643,"user_name":"hmm...","can_delete":false,"product_type":"c1","uid":1906140,"ip_address":"","ucode":"6AD2D7940C9BBF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/iaxgvyIjNFomECZvLAeRlfBITm6uaCv9l7nGg4nepMXxAsmNibtKNI16jgzT38DDJT5GXp1U1dU7JjU5a4rdoy8A/132","comment_is_top":false,"comment_ctime":1585815340,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10175749932","product_id":100020801,"comment_content":"åŒä¸»ç»“æ„ç›¸å¯¹äºä¸»ä»æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583175,"discussion_content":"è€å¸ˆè¿™é‡Œè¯´çš„åŒMï¼Œå…¶å®è¿˜æ˜¯ä¸»å¤‡è§’è‰²ï¼Œå…¶ä¸­å¤‡ä½œä¸ºå¤‡ä¸»ä½¿ç”¨çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659940828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1062547,"avatar":"https://static001.geekbang.org/account/avatar/00/10/36/93/4ee65d90.jpg","nickname":"ç»´å°¼ç†Š","note":"","ucode":"01AB1525790DEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550172,"discussion_content":"æˆ‘ä¹Ÿæƒ³çŸ¥é“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644404490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77134,"user_name":"è¿æ–¤æˆé£","can_delete":false,"product_type":"c1","uid":1350812,"ip_address":"","ucode":"BAFF69C29FDFA5","user_header":"https://static001.geekbang.org/account/avatar/00/14/9c/9c/e02a0daf.jpg","comment_is_top":false,"comment_ctime":1552863111,"is_pvip":false,"replies":[{"id":"34326","content":"relaylog æ˜¯åº”ç”¨åå°±ä¸¢å¼ƒäº†çš„ï¼Œbinlogæ‰ä¼šä¿å­˜ç€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1558261906,"ip_address":"","comment_id":77134,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142797703","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼ŒåŒMçš„ä¸»ä»ç»“æ„ï¼Œbinlogè®¾ç½®ä¸ºrowï¼Œä¸»åº“ä¸Šæ˜¯ä¸æ˜¯ä¿å­˜äº†ä¸¤ä»½ç›¸åŒçš„æ—¥å¿—æ•°æ®ï¼Ÿbinlogå’Œrelay logï¼Ÿè¿˜æ˜¯ä¸»åº“åˆ¤æ–­æ˜¯è‡ªå·±ç”Ÿæˆçš„æ—¥å¿—åå°±ä¸¢æ‰ï¼Ÿè°¢è°¢","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443596,"discussion_content":"relaylog æ˜¯åº”ç”¨åå°±ä¸¢å¼ƒäº†çš„ï¼Œbinlogæ‰ä¼šä¿å­˜ç€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558261906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58515,"user_name":"ç§‹ä¸€åŒ¹","can_delete":false,"product_type":"c1","uid":1351117,"ip_address":"","ucode":"BEBDBF8C15C6BC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2au3iaQvydOVeVY1vlSVeGia7SvrpWFVibdxdjKiafof3RhzFO9e8sxKIBxKXJQibRNpO9pCH2hmibkibsGv7YKF3yjEw/132","comment_is_top":false,"comment_ctime":1547099515,"is_pvip":false,"replies":[{"id":"21176","content":"è¿˜æ˜¯è¦ç»™ä¸€ä¸‹æ›´å…·ä½“çš„ä¿¡æ¯<br>æ¯”å¦‚ä¸»åº“çš„tps<br>å¤‡åº“çš„è·Ÿå¤åˆ¶ç›¸å…³çš„é…ç½®ç­‰ä¿¡æ¯","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547134489,"ip_address":"","comment_id":58515,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10137034107","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚æˆ‘è¿™æ…¢äº†ä¸€æ­¥ã€‚ã€‚ã€‚å­¦ä¹ æ™šäº†ç‚¹ã€‚æˆ‘è¿™ä¹‹å‰ç¢°åˆ°äº†ä¸ªé—®é¢˜ï¼Œæœ‰ä¸€æ®µæ—¶é—´ä¸»ä»å¤åˆ¶å»¶è¿Ÿæ¯”è¾ƒå‰å®³ï¼Œè¾¾åˆ°5så·¦å³å§ï¼Œä¸€èˆ¬éƒ½æ˜¯1ï½2ç§’å§ã€‚é¦–å…ˆæ’é™¤ä¸æ˜¯ç½‘ç»œåŸå› ã€‚æƒ³é—®ä¸‹è¿˜æœ‰å“ªäº›å› ç´ ä¼šå½±å“ä¸»ä»å¤åˆ¶å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436103,"discussion_content":"è¿˜æ˜¯è¦ç»™ä¸€ä¸‹æ›´å…·ä½“çš„ä¿¡æ¯\næ¯”å¦‚ä¸»åº“çš„tps\nå¤‡åº“çš„è·Ÿå¤åˆ¶ç›¸å…³çš„é…ç½®ç­‰ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547134489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57654,"user_name":"æ±ªç‚œ","can_delete":false,"product_type":"c1","uid":1307404,"ip_address":"","ucode":"64B548B9D06404","user_header":"https://static001.geekbang.org/account/avatar/00/13/f3/0c/b46fb155.jpg","comment_is_top":false,"comment_ctime":1546861812,"is_pvip":false,"replies":[{"id":"20786","content":"å¯ä»¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546869691,"ip_address":"","comment_id":57654,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10136796404","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè®¾ç½® sync_binlog=0 çš„æ—¶å€™ï¼Œbinlogæ²¡åˆ·ç›˜çš„æƒ…å†µä¸‹ï¼Œå†™åˆ°äº† page cacheï¼Œå¯¹å§ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä»åº“èƒ½æ”¶åˆ°è¿™ä¸ªeventå—ï¼Ÿæˆ–è€…è¯´ä¸€äº›binlogæ—¥å¿—å¢é‡è®¢é˜…èƒ½æ”¶åˆ°å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435685,"discussion_content":"å¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546869691,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343173,"user_name":"woJA1wCgAAegtr2ipn-nrwJ_dBQouJVw","can_delete":false,"product_type":"c1","uid":2983794,"ip_address":"","ucode":"D491F06E48532D","user_header":"","comment_is_top":false,"comment_ctime":1650689214,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5945656510","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼ŒåŒMæ¨¡å¼ä¸‹ï¼Œå¦‚æœå› ä¸ºä¸»æœºA ç½‘ç»œé—®é¢˜ å¤±è”ï¼Œæ­¤æ—¶å†™å…¥çš„æ•°æ®åˆ°äº†B,å¦‚æœAç½‘ç»œæ¢å¤åï¼ŒBä¿®æ”¹çš„æ•°æ®ä¸ºä»€ä¹ˆä¸ä¼šé‡æ–°åŒæ­¥åˆ°A å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583177,"discussion_content":"ä¸ä¼šï¼Œå› ä¸ºBå¹¶æ²¡æœ‰åŒæ­¥æŒ‡å‘åˆ°Aï¼Œæ‰€ä»¥é€šå¸¸æ¥è¯´å»ºè®®Bè®¾ç½®ä¸ºreadonlyï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659940893,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318988,"user_name":"Geek_3800f3","can_delete":false,"product_type":"c1","uid":2555596,"ip_address":"","ucode":"4830639B5E787F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/m2Sanic5FCSDLNPvZNmeNVyiaIHOSl3GW8dpupHw047nFRp6xvEjwror7BuUdZOq8WT0VZ2hLQRkpxfSFA90ibzhw/132","comment_is_top":false,"comment_ctime":1635498492,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5930465788","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹ï¼ŒAæ˜¯ä¸»åº“ï¼ŒBæ˜¯ä»åº“æƒ…å†µï¼ŒBçªç„¶å®•æœºäº†ï¼Œè¿‡ä¸€ä¼šBåˆæ¢å¤äº†ï¼ŒBå†æ¬¡æ¢å¤çš„æ—¶å€™,æ˜¯å¦‚ä½•åŒæ­¥æ•°æ®çš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583178,"discussion_content":"ä¸»ä»å¤åˆ¶ä¸ºé•¿è¿æ¥ï¼Œæ¯éš”60ç§’é’Ÿä¼šé‡è¯•è¯·æ±‚ä¸»ä»ï¼ˆB-&gt;Aï¼‰è¿æ¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659940997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281892,"user_name":"æ†¨çš®è‹","can_delete":false,"product_type":"c1","uid":1412429,"ip_address":"","ucode":"D0B4B7660DA766","user_header":"https://static001.geekbang.org/account/avatar/00/15/8d/4d/992070e8.jpg","comment_is_top":false,"comment_ctime":1614937283,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5909904579","product_id":100020801,"comment_content":"å¼€å¯ GTID åœºæ™¯ä¸‹ï¼Œè¡Œæ ¼å¼æ— è®ºæ˜¯ row è¿˜æ˜¯ statementï¼Œå¾ªç¯å¤åˆ¶å®éªŒéƒ½æ²¡æˆåŠŸï¼›<br>å…³é—­ GTID åœºæ™¯ä¸‹ï¼Œè¡Œæ ¼å¼ä¸º statementï¼Œå¾ªç¯å¤åˆ¶å®éªŒæˆåŠŸï¼Œ<br>å¾ªç¯å¤åˆ¶å®éªŒéœ€æ³¨æ„ä¸¤ç‚¹<br>1. å…³é—­ GTID<br>2. å°† binlog_format è°ƒæ•´ä½ statement;","like_count":1},{"had_liked":false,"id":153400,"user_name":"éšå¿ƒè€Œè‡³","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1574230076,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5869197372","product_id":100020801,"comment_content":"è‡ªå·±åœ¨æœ¬åœ°éªŒè¯äº†ä¸‹ï¼Œçš„ç¡®æ˜¯è¿™æ ·ï¼Œå‚è€ƒäº†è…¾è®¯å·¥ç¨‹å¸ˆå¸¦ä½ æ·±å…¥è§£æ MySQL binlog<br>https:&#47;&#47;zhuanlan.zhihu.com&#47;p&#47;33504555 ä»¥åŠå®˜æ–¹æ–‡æ¡£ã€‚<br>å…¶å®è¦æƒ³å­¦çš„ç³»ç»Ÿï¼Œåé¢è¿˜æ˜¯å†å»çœ‹å®˜æ–¹æ–‡æ¡£å¹¶ä¸”è¿›ä¸€æ­¥å®è·µçš„ã€‚","like_count":1},{"had_liked":false,"id":120286,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1564820459,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5859787755","product_id":100020801,"comment_content":"æ—¥å¿—æœ‰è®¸å¤šçš„ä½œç”¨ï¼Œé—®é¢˜å®šä½å’Œæ’æŸ¥ã€è´£ä»»è®¤å®šå’Œè¿½è¸ªã€æ•°æ®æ¢å¤&#47;åŒæ­¥&#47;å¤‡ä»½&#47;åˆ†æç­‰ç­‰ï¼Œä¿¡æ¯åŒ–ç¤¾ä¼šæ•°æ®å°±æ˜¯ä¸»ä½“å‘€!æ‹¥æœ‰äº†æ•°æ®ï¼Œå°±èƒ½åšæ›´å¤šçš„äº‹æƒ…ã€‚<br>WALæ˜¯è®¸å¤šé«˜å¯ç”¨ç³»ç»Ÿè®¾è®¡çš„åŸºçŸ³ï¼Œå¯¹MySQLè€Œè¨€ binlogæ›´æ˜¯åŠŸä¸å¯æ²¡ã€‚<br>binlogæœ‰ä¸‰ç§æ ¼å¼<br>1ï¼šstatementï¼Œè®°å½•æ•°æ®æ“ä½œçš„å‘½ä»¤ï¼Œ<br>ä¼˜ç‚¹ï¼šå¯¹äººå‹å¥½ï¼Œæ•°æ®é‡å°<br>ç¼ºç‚¹ï¼šä¸èƒ½ç”¨åœ¨ä½¿ç”¨flashbackæœºåˆ¶æ¢å¤<br>2ï¼šrow è®°å½•æ•°æ®çš„æ“ä½œï¼Œæ¨èçš„æ ¼å¼<br>ä¼˜ç‚¹ï¼šæ•°æ®æ¢å¤å°èƒ½æ‰‹<br>ç¼ºç‚¹ï¼šæ•°æ®é‡å¤§ï¼Œä¼ è¾“å¸¦å®½å’Œæ€§èƒ½æœ‰æŸ<br>3ï¼šmixed è‡ªè¡Œåˆ¤æ–­ä½¿ç”¨statementæ ¼å¼è¿˜æ˜¯rowæ ¼å¼<br>ä¼˜ç‚¹ï¼šæŠ˜ä¸­rowæ ¼å¼çš„ç¼ºç‚¹<br>ç¼ºç‚¹ï¼šå…·ä½“ä½¿ç”¨ä»€ä¹ˆæ ¼å¼è§„åˆ™ä¸æ˜(ç›®å‰æˆ‘ä¸æ¸…æ¥š)ï¼Œæœ‰äº›æƒ…å†µå’Œå¸¸è¯†ç›¸å†²ï¼Œå…¶æ—¥å¿—ä¸èƒ½ç®€å•çš„æ‹¿æ¥ç”¨äºæ•°æ®æ¢å¤<br>è¿™äº›åŸç†æ„Ÿè§‰æ¯”é”å®¹æ˜“ç†è§£å¤šäº†ï¼Œä¹Ÿæ¸…æ™°å¤šäº†ï¼Œå¾ˆå—ç”¨ï¼Œæ„Ÿè°¢è€å¸ˆã€‚<br>","like_count":1},{"had_liked":false,"id":112052,"user_name":"WL","can_delete":false,"product_type":"c1","uid":1173771,"ip_address":"","ucode":"6277DCD776B87E","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/0b/1171ac71.jpg","comment_is_top":false,"comment_ctime":1562660682,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5857627978","product_id":100020801,"comment_content":"è€å¸ˆè¯·é—®åŒMç»“æ„ï¼ŒèŠ‚ç‚¹åˆ¤æ–­server idçš„å¹¶å†³å®šæ˜¯å¦ä¸¢å¼ƒçš„æœºåˆ¶éœ€è¦é…ç½®å“ªä¸ªå‚æ•°å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165690,"discussion_content":"ç¨‹åºåˆ¤æ–­å§ã€‚è¿™ç§è¿˜æƒ³æœ‰åˆ«çš„å¤„ç†æƒ³æ³•å˜›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581314454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98978,"user_name":"ping","can_delete":false,"product_type":"c1","uid":1303688,"ip_address":"","ucode":"B60EF3B90D827E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJR5k5ThxFPZyew0UKNaq89utnIEQia2CiaxMOvacibGnbuZNpSiaaGTlRLWhmegxagELnIXfNveRxLfw/132","comment_is_top":false,"comment_ctime":1559123177,"is_pvip":false,"replies":[{"id":"37469","content":"é¢ï¼Ÿ ä½ è¿™ä¸ªé—®é¢˜çš„å‰åé€»è¾‘æˆ‘æ²¡çœ‹æ˜ç™½å“ˆ<br><br>mtsæ˜¯æŒ‡å¤šçº¿ç¨‹å¤åˆ¶ï¼Œè®¾ç½®çº§è”å¤åˆ¶æ˜¯å¯ä»¥ç”¨çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1560473269,"ip_address":"","comment_id":98978,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5854090473","product_id":100020801,"comment_content":"è€å¸ˆåœ¨é—®ç­”ç¯èŠ‚æåˆ° ä»åº“è®¾ç½®  binlog_group_commit_sync_delay      binlog_group_commit_sync_no_delay_count ä¼šæ‹–ç´¯ä¸»ä»åŒæ­¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨è®¾ç½® çº§è”å¤åˆ¶çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯å°±ä¸èƒ½ç”¨ mtsäº†å‘¢ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451916,"discussion_content":"é¢ï¼Ÿ ä½ è¿™ä¸ªé—®é¢˜çš„å‰åé€»è¾‘æˆ‘æ²¡çœ‹æ˜ç™½å“ˆ\n\nmtsæ˜¯æŒ‡å¤šçº¿ç¨‹å¤åˆ¶ï¼Œè®¾ç½®çº§è”å¤åˆ¶æ˜¯å¯ä»¥ç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560473269,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58138,"user_name":"æ¢ä¸­å","can_delete":false,"product_type":"c1","uid":1006789,"ip_address":"","ucode":"52FE40242CBAD0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg","comment_is_top":false,"comment_ctime":1547001725,"is_pvip":true,"discussion_count":2,"race_medal":1,"score":"5841969021","product_id":100020801,"comment_content":"æˆ‘æœ‰ä¸€ä¸ªæ¯”è¾ƒæç«¯ä¸€ç‚¹çš„HAé—®é¢˜ï¼Œå‡è®¾ä¸»åº“çš„binlogåˆšå†™æˆåŠŸè¿˜æœªæ¥å¾—åŠæŠŠbinlogåŒæ­¥åˆ°ä»åº“ï¼Œä¸»åº“å°±æ‰ç”µäº†ï¼Œè¿™æ—¶å€™ä»åº“çš„æ•°æ®ä¼šä¸å®Œæ•´å—ï¼Ÿ<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼ŒåŸä¸»åº“é‡å¯åŠ å…¥é›†ç¾¤åï¼Œé‚£æ¡æ²¡æœ‰ä¼ å‡ºå»çš„binlogä¼šå¦‚ä½•å¤„ç†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1115724,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","nickname":"ä¹˜é£","note":"","ucode":"0420C5535DACB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66689,"discussion_content":"1.ä¼šå­˜åœ¨æ•°æ®ä¸ä¸€è‡´æ€§.åˆ†å¸ƒå¼ä¸‹æœ€å¸¸è§çš„.\n2.å› ä¸ºä»åº“ä»ç„¶è®°å½•ç€æœ€ååŒæ­¥çš„é¡ºåº,æ‰€ä»¥æ•°æ®ä¼šæœ€ç»ˆä¸€è‡´.\n  åœ¨redisä¸­,ä¼šæœ‰è¿™ç§ç­–ç•¥,ä»èŠ‚ç‚¹å¯åŠ¨æ—¶ä¼šæ£€æµ‹è‡ªèº«çŠ¶æ€,è‹¥ä¸ä¸»åº“æ•°æ®ç›¸å·®å¤ªå¤§æ—¶ä¼šå…ˆåŒæ­¥æ•°æ®å¹¶ä¸”æš‚åœæä¾›æœåŠ¡(ä¹Ÿæ”¯æŒç»§ç»­æä¾›æœåŠ¡).\n\n\n\n\n\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1575098448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1458200,"avatar":"https://static001.geekbang.org/account/avatar/00/16/40/18/cc3804e2.jpg","nickname":"æ²ˆæ´ªå½¬","note":"","ucode":"F9911236D0BA1C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100227,"discussion_content":"çœ‹é›†ç¾¤çš„åšæ³•ï¼š\n    å¦‚æœæ˜¯MAHï¼Œä¸»åº“æ–­ç”µï¼Œå¦‚æœæœºå™¨å¯è¿ï¼Œé‚£ä¹ˆMHAä¼šåº”ç”¨æ²¡åº”ç”¨çš„binlog\n                                      å¦‚æœæœºå™¨ä¸å¯è¿ï¼Œé‚£ä¹ˆå°±çœŸçš„ä¸¢äº†æ²¡åº”ç”¨çš„æ—¥å¿—\n     å¦‚æœéœ€æ±‚ç‰¹åˆ«é«˜ å°±è€ƒè™‘åŠåŒæ­¥ï¼Œå°±èƒ½ä¿è¯æ•°æ®ä¸ä¸¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577243556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57878,"user_name":"ccstorm","can_delete":false,"product_type":"c1","uid":1186888,"ip_address":"","ucode":"C08BC38BDCA73F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqyfwpUx3JgSX2IediaP7AUtYPVBjhy17OibD6e7owwBK0uF2rABzQYKSgiaCgFYibWrZ9b5ib55InmDpw/132","comment_is_top":false,"comment_ctime":1546933922,"is_pvip":false,"replies":[{"id":"20881","content":"å¤Ÿç”¨å°±ä¸åŠ¨ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546949434,"ip_address":"","comment_id":57878,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841901218","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼è¯·æ•™ä¸€ä¸ªè¯¾é¢˜ä¹‹å¤–çš„é—®é¢˜ï¼Œè¯·é—®mysqlå°ç‰ˆæœ¬éœ€è¦æ›´æ–°ä¹ˆã€‚æˆ‘ç°åœ¨é¡¹ç›®ç”¨çš„5.6ï¼Œè¯·é—®éœ€è¦å‡çº§åˆ°5.7ä¹ˆï¼Œå¦‚æœå‡çº§çš„è¯éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Œè°¢è°¢è€å¸ˆï¼","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435805,"discussion_content":"å¤Ÿç”¨å°±ä¸åŠ¨ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546949434,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353708,"user_name":"ç”°æ™¶è‹±","can_delete":false,"product_type":"c1","uid":2946356,"ip_address":"åŒ—äº¬","ucode":"D058FBB71C5F00","user_header":"","comment_is_top":false,"comment_ctime":1659690556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659690556","product_id":100020801,"comment_content":"1.ä»èŠ‚ç‚¹ A æ›´æ–°çš„äº‹åŠ¡ï¼Œbinlog é‡Œé¢è®°çš„éƒ½æ˜¯ A çš„ server idï¼›<br>2.ä¼ åˆ°èŠ‚ç‚¹ B æ‰§è¡Œä¸€æ¬¡ä»¥åï¼ŒèŠ‚ç‚¹ B ç”Ÿæˆçš„ binlog çš„ server id ä¹Ÿæ˜¯ A çš„ server idï¼›<br>3.å†ä¼ å›ç»™èŠ‚ç‚¹ Aï¼ŒA åˆ¤æ–­åˆ°è¿™ä¸ª server id ä¸è‡ªå·±çš„ç›¸åŒï¼Œå°±ä¸ä¼šå†å¤„ç†è¿™ä¸ªæ—¥å¿—ã€‚æ‰€ä»¥ï¼Œæ­»å¾ªç¯åœ¨è¿™é‡Œå°±æ–­æ‰äº†ã€‚<br><br>æ‚¨å¥½ï¼Œè¯·é—®ä¸‹ï¼Œè¿™ä¸ªå…·ä½“è¯¥æ€ä¹ˆè®¾ç½®å‘¢ï¼Œæ˜¯æ”¹é…ç½®å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":352676,"user_name":"ç¨‹åºå‘˜ç­å‰","can_delete":false,"product_type":"c1","uid":1478098,"ip_address":"","ucode":"BD48CF7649609A","user_header":"https://static001.geekbang.org/account/avatar/00/16/8d/d2/8a6be8d8.jpg","comment_is_top":false,"comment_ctime":1658858179,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658858179","product_id":100020801,"comment_content":"æ€ä¹ˆæ‰‹åŠ¨æ¨¡æ‹Ÿä¸€ä¸ªslaveå»masteråŒæ­¥æ•°æ®ï¼ŸMySQLæœ‰æ–‡æ¡£å¯ä»¥å‚è€ƒå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":345943,"user_name":"æ‰“äººä¸æ‰“è„¸","can_delete":false,"product_type":"c1","uid":1309484,"ip_address":"","ucode":"95D94EB72DF5A8","user_header":"https://static001.geekbang.org/account/avatar/00/13/fb/2c/8c37a254.jpg","comment_is_top":false,"comment_ctime":1652707839,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1652707839","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼ŒåŒMæ¨¡å¼ä¸‹ï¼ŒåŒä¸€æ—¶é—´è§¦å‘äº†å¯¹åŒä¸€æ•°æ®çš„æ›´æ–°æ“ä½œï¼ˆå¹¶ä¸”è¯·æ±‚åˆ†åˆ«æ‰“åˆ°äº†ä¸åŒæœºå­ä¸Šï¼‰ï¼Œåœ¨åšåŒæ­¥æ›´æ–°çš„æ—¶å€™æ€ä¹ˆä¿è¯æ•°æ®çš„æ­£ç¡®æ€§å‘¢","like_count":0},{"had_liked":false,"id":343028,"user_name":"é¢œæµ·èˆª","can_delete":false,"product_type":"c1","uid":1308159,"ip_address":"","ucode":"5644F6328BF901","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/ff/523fb378.jpg","comment_is_top":false,"comment_ctime":1650600819,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650600819","product_id":100020801,"comment_content":"3 ä¸»åº“ A æ ¡éªŒå®Œç”¨æˆ·åã€å¯†ç åï¼Œå¼€å§‹æŒ‰ç…§å¤‡åº“ B ä¼ è¿‡æ¥çš„ä½ç½®ï¼Œä»æœ¬åœ°è¯»å– binlogï¼Œå‘ç»™ Bã€‚<br>è€å¸ˆ ä¸»åº“æ˜¯å‘é€binlogæ—¥å¿—åˆ°ä»åº“å—ï¼Ÿ è¿˜æ˜¯ä»åº“æ‹‰å–binlogæ—¥å¿—æœ¬åœ°å‘€","like_count":0},{"had_liked":false,"id":342284,"user_name":"å†è§ç†æƒ³","can_delete":false,"product_type":"c1","uid":1245999,"ip_address":"","ucode":"FAC88B3F6F6DFD","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/2f/0a5e0751.jpg","comment_is_top":false,"comment_ctime":1650170074,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650170074","product_id":100020801,"comment_content":"å¤‡åº“é€šè¿‡æ¶ˆè´¹ä¸»åº“çš„binlogå®ç°ä¸»å¤‡æ•°æ®ä¸€è‡´æ€§ã€‚<br>binlogæœ‰ä¸‰ç§æ ¼å¼ï¼š<br>1.statementæ ¼å¼ è®°å½•sqlè¯­å¥ã€‚ å­˜åœ¨å¯¼è‡´ä¸»å¤‡ä¸ä¸€è‡´çš„æƒ…å†µã€‚<br>2.rowæ ¼å¼ è®°å½•è¡Œæ•°æ®æ›´æ”¹å†…å®¹ã€‚ ä¸»å¤‡æ•°æ®ä¸€è‡´ï¼Œä½†æ˜¯è®°å½•å†…å®¹è¾ƒå¤§ï¼Œå½“æ‰§è¡Œåˆ é™¤1000è¡Œæ•°æ®çš„sqlè¯­å¥æ—¶ï¼Œstatementæ ¼å¼åªéœ€è¦è®°å½•ä¸€æ¡sqlè¯­å¥ï¼Œè€Œrowæ ¼å¼éœ€è¦è®°å½•1000æ¡è¡Œæ›´æ”¹çš„äº‹ä»¶ã€‚<br>3.mixed æ··åˆæ ¼å¼  æ­£å¸¸æƒ…å†µä¸‹ä½¿ç”¨statementæ ¼å¼è®°å½•ï¼Œåœ¨å¯èƒ½å¯¼è‡´ä¸»å¤‡ä¸ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨rowæ ¼å¼è®°å½•ã€‚å…¼å®¹ä¸¤ç§æ ¼å¼çš„ä¼˜ç‚¹ã€‚<br>åŒä¸»å¾ªç¯å¤åˆ¶çš„è§£å†³æ–¹æ¡ˆï¼š<br>é€šè¿‡åˆ¤æ–­ binlogä¸­çš„serverIdå’Œæ•°æ®åº“çš„serverIdï¼Œ å¦‚æœç›¸åŒå°±ä¸å†é‡å¤æ‰§è¡Œè¯¥æ—¥å¿—ã€‚","like_count":0},{"had_liked":false,"id":338434,"user_name":"å¼ ã€‚","can_delete":false,"product_type":"c1","uid":1127147,"ip_address":"","ucode":"B8B6BCB0D9038E","user_header":"https://static001.geekbang.org/account/avatar/00/11/32/eb/37dad1cc.jpg","comment_is_top":false,"comment_ctime":1647503581,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647503581","product_id":100020801,"comment_content":"äº‹åŠ¡æ²¡æäº¤å¯ä»¥è¯»åˆ°binlogå—","like_count":0},{"had_liked":false,"id":322462,"user_name":"Geek_be775f","can_delete":false,"product_type":"c1","uid":2848324,"ip_address":"","ucode":"B40A323802EA96","user_header":"","comment_is_top":false,"comment_ctime":1637400159,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637400159","product_id":100020801,"comment_content":"æœ‰æ²¡æœ‰ä»€ä¹ˆå·¥å…·ï¼Œ åªéœ€è¦è¯»å–binlogæ–‡ä»¶ ï¼Œå°±å¯ä»¥ç”Ÿæˆè¡¨æ•°æ® ï¼Ÿ ","like_count":0},{"had_liked":false,"id":313500,"user_name":"å¬é›¨","can_delete":false,"product_type":"c1","uid":1254493,"ip_address":"","ucode":"252754F9FCFF0C","user_header":"https://static001.geekbang.org/account/avatar/00/13/24/5d/65e61dcb.jpg","comment_is_top":false,"comment_ctime":1632468610,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632468610","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼š<br>1.å¦‚ä½•çŸ¥é“åˆ åº“è·‘è·¯ä¹‹å‰çš„ç²¾ç¡®æ—¶é—´ç‚¹å‘¢<br>2.å¦‚æœæœ‰æ­£å¸¸é€»è¾‘åœ¨è¯¯æ“ä½œæ•°æ®çš„åŸºç¡€ä¸Šåšäº†ä¿®æ”¹ï¼Œè¿™æ—¶å€™å†æ¢å¤binlogï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®é”™è¯¯ï¼Œè¯¥å¦‚ä½•é¿å…å‘¢","like_count":0},{"had_liked":false,"id":312827,"user_name":"ä¸å‡¡","can_delete":false,"product_type":"c1","uid":2031689,"ip_address":"","ucode":"28A3EC4C309C56","user_header":"","comment_is_top":false,"comment_ctime":1632042055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632042055","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘æœ‰ä¸ªé—®é¢˜ï¼ŒM-Mçš„æ¶æ„ä¸‹ï¼ŒèŠ‚ç‚¹Aå½“å‰æ˜¯masterï¼ŒèŠ‚ç‚¹Bæ˜¯slaveï¼Œå‡è®¾åœ¨AèŠ‚ç‚¹æ‰§è¡Œä¸€ä¸ªå¤§äº‹ç‰©Tï¼Œupdateäº†100ä¸‡è¡Œæ•°æ®ï¼Œåœ¨AèŠ‚ç‚¹ä¼ è¾“binlogç»™BèŠ‚ç‚¹ä¸€åŠçš„æ—¶å€™ï¼ŒèŠ‚ç‚¹Aå®•æœºäº†ï¼Œé‚£å¯¹äºèŠ‚ç‚¹Bçš„relay_logæ˜¯ä¸æ˜¯å°±ä¸å®Œæ•´äº†<br>1.é‚£ä¹ˆè¿™ä¸ªæ—¶å€™BèŠ‚ç‚¹relay_logæ˜¯æ€ä¹ˆå¤„ç†è¿™ä¸ªäº‹ç‰©çš„ï¼Ÿ<br>2.è¿™æ—¶ç”±keepalivedå°†èŠ‚ç‚¹Båˆ‡æ¢ä¸ºæ–°çš„masteräº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤§äº‹ç‰©Tçš„æ›´æ–°çš„æ•°æ®æ˜¯ä¸æ˜¯ä¸¢äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":309512,"user_name":"kingğŸ³","can_delete":false,"product_type":"c1","uid":2557346,"ip_address":"","ucode":"88DA7981062AB5","user_header":"https://static001.geekbang.org/account/avatar/00/27/05/a2/24d5e88e.jpg","comment_is_top":false,"comment_ctime":1630206277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630206277","product_id":100020801,"comment_content":"[root@www &#47;]# &#47;www&#47;server&#47;mysql&#47;bin&#47;mysqlbinlog -d test &#47;www&#47;server&#47;data&#47;mysql-bin.000015 --start-position=6970 | mysql  -uroot -p;<br>Enter password: <br>ERROR 1032 (HY000) at line 35: Can&#39;t find record in &#39;t&#39;<br>è¯·æ•™ä¸‹è¿™ä¸ªé”™å’‹è§£å†³ã€‚ã€‚","like_count":0},{"had_liked":false,"id":301218,"user_name":"è±†ç“£é…±","can_delete":false,"product_type":"c1","uid":2625639,"ip_address":"","ucode":"AF7525F7FE83E8","user_header":"https://static001.geekbang.org/account/avatar/00/28/10/67/49dfb810.jpg","comment_is_top":false,"comment_ctime":1625578752,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1625578752","product_id":100020801,"comment_content":"å¦‚æœä½ ç”¨ MySQL å®¢æˆ·ç«¯æ¥åšè¿™ä¸ªå®éªŒçš„è¯ï¼Œè¦è®°å¾—åŠ  -c å‚æ•°ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å»æ‰æ³¨é‡Šã€‚ ä»€ä¹ˆæ„æ€ æ€ä¹ˆæ“ä½œ","like_count":0,"discussions":[{"author":{"id":1015184,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/90/abb7bfe3.jpg","nickname":"fourge","note":"","ucode":"F3E3FFC4990358","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583180,"discussion_content":" -c, --comments      Preserve comments. Send comments to the server. The default is --skip-comments (discard comments), enable  with --comments.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659941121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296685,"user_name":"å¼ è¯š","can_delete":false,"product_type":"c1","uid":1115702,"ip_address":"","ucode":"F623703194769B","user_header":"https://static001.geekbang.org/account/avatar/00/11/06/36/d288bcc7.jpg","comment_is_top":false,"comment_ctime":1623116328,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1623116328","product_id":100020801,"comment_content":"When row-based binary logging is used, the binlog_row_event_max_size system variable and its corresponding startup option --binlog-row-event-max-size set a soft limit on the maximum size of row events. The default value is 8192 bytes, and the value can only be changed at server startup. Where possible, rows stored in the binary log are grouped into events with a size not exceeding the value of this setting. If an event cannot be split, the maximum size can be exceeded.<br><br>å½“è®¾ç½®binlog_format = rowæ—¶ï¼Œæœ‰ä¸€ä¸ªå‚æ•° binlog-row-event-max-size é»˜è®¤å€¼æ˜¯8192å­—èŠ‚ã€‚æ–‡ä¸­è¯´è¿™æ˜¯ä¸€ä¸ªè½¯é™åˆ¶ï¼Œå½“äº‹ä»¶å¯åˆ†æ—¶ï¼Œä¼šå°†å®ƒåˆ†ä¸ºå¤šç»„ï¼Œä¸å¯åˆ†æ—¶ä¼šè¶…è¿‡å¤§å°ã€‚<br>æˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œå¯åˆ†ä¸ä¸å¯åˆ†çš„åœºæ™¯ï¼›mysqlå¦‚ä½•åˆ¤æ–­æ˜¯å¦å¯åˆ†ï¼›åˆ¤æ–­æ˜¯å¦å¯åˆ†çš„èŠ±é”€ï¼Œä¸åˆ†ä¹‹åå¸¦æ¥çš„å¥½å¤„çš„å¯¹æ¯”ã€‚","like_count":0},{"had_liked":false,"id":293455,"user_name":"lleft","can_delete":false,"product_type":"c1","uid":1970443,"ip_address":"","ucode":"D573EB509455AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","comment_is_top":false,"comment_ctime":1621393133,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1621393133","product_id":100020801,"comment_content":"è€å¸ˆï¼Œbinlogæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™åŒæ­¥åˆ°å¤‡åº“çš„ï¼Ÿæ˜¯åœ¨binlogè½ç›˜ä¹‹åè¿˜æ˜¯åœ¨ä»€ä¹ˆæ—¶é—´ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374911,"discussion_content":"çœ‹äº†ä¸‹é¢çš„æé—®ï¼Œè‡ªå·±å›ç­”ï¼Œäº‹åŠ¡æäº¤ä¹‹åå°±ä¼šä¸»åŠ¨å‘é€binlogç»™å¤‡åº“ï¼Œbinlogè¿™æ—¶åœ¨page cacheè¿˜æ˜¯å·²ç»è½ç›˜åˆ°binlog fileéƒ½æ²¡æœ‰å…³ç³»äº†ï¼Œåœ¨å“ªå°±ä»å“ªè¯»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621409974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288116,"user_name":"ddomi","can_delete":false,"product_type":"c1","uid":2109640,"ip_address":"","ucode":"671D1957240FE7","user_header":"","comment_is_top":false,"comment_ctime":1618307109,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618307109","product_id":100020801,"comment_content":"å¯¹äºæ–‡ä¸­å†…å®¹<br>ç”±äº statement æ ¼å¼ä¸‹ï¼Œè®°å½•åˆ° binlog é‡Œçš„æ˜¯è¯­å¥åŸæ–‡ï¼Œå› æ­¤å¯èƒ½ä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼šåœ¨ä¸»åº“æ‰§è¡Œè¿™æ¡ SQL è¯­å¥çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯ç´¢å¼• aï¼›è€Œåœ¨å¤‡åº“æ‰§è¡Œè¿™æ¡ SQL è¯­å¥çš„æ—¶å€™ï¼Œå´ä½¿ç”¨äº†ç´¢å¼• t_modifiedã€‚å› æ­¤ï¼ŒMySQL è®¤ä¸ºè¿™æ ·å†™æ˜¯æœ‰é£é™©çš„ã€‚<br>ä¸»ä»ä¹‹é—´è¡¨ç»“æ„ç›¸åŒï¼Œæ•°æ®å’Œæ•°æ®é‡ä¹ŸåŸºæœ¬ç›¸åŒï¼Œå¯èƒ½ä¼šå‡ºç°é€‰æ‹©åŒä¸€ä¸ªè¯­å¥é€‰æ‹©ä¸åŒç´¢å¼•çš„æƒ…å†µå˜›","like_count":0},{"had_liked":false,"id":287941,"user_name":"TM","can_delete":false,"product_type":"c1","uid":1569910,"ip_address":"","ucode":"DCF88E51C5D2E8","user_header":"https://static001.geekbang.org/account/avatar/00/17/f4/76/5cc8d16e.jpg","comment_is_top":false,"comment_ctime":1618228458,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618228458","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚æœMySQLä»åº“æ•°æ®ä¸ä¸€è‡´äº†ï¼Œæ€ä¹ˆæ¢å¤ï¼Ÿå¤šä¸ªå­˜åº“ï¼Œå­˜åº“é—´æ•°æ®ä¸ä¸€è‡´ï¼Ÿä¸€ä¸»å’Œå¤šå­˜æ•°æ®ä¸ä¸€è‡´ï¼Ÿéƒ½æ˜¯ä¸€æ ·çš„åŸç†å—","like_count":0},{"had_liked":false,"id":286524,"user_name":"å›å›","can_delete":false,"product_type":"c1","uid":1046711,"ip_address":"","ucode":"0E8F1058F01C28","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erRDnCKfAWyOSUfU9hI8gYu2qsMOUwnFlCSngM0a9hbdnMmqHmBlziajorVdm9NGjx23SlAJXvicHGQ/132","comment_is_top":false,"comment_ctime":1617356135,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617356135","product_id":100020801,"comment_content":"æ–‡ç« ä¸­â€œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„é€»è¾‘ï¼Œæ¥è§£å†³ä¸¤ä¸ªèŠ‚ç‚¹é—´çš„å¾ªç¯å¤åˆ¶çš„é—®é¢˜ï¼šâ€ï¼Œæ„æ€æ˜¯è¿™ä¸ªè¦æˆ‘ä»¬è‡ªå·±å®ç°å—ï¼Ÿæ”¹æºç ï¼Ÿ","like_count":0},{"had_liked":false,"id":284898,"user_name":"æ¡","can_delete":false,"product_type":"c1","uid":1203836,"ip_address":"","ucode":"6F8679175256E3","user_header":"https://static001.geekbang.org/account/avatar/00/12/5e/7c/94af3f5e.jpg","comment_is_top":false,"comment_ctime":1616515162,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616515162","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå¯¹äºä¸»åº“Açš„binlogåœ¨page cacheæ—¶ä¸­åŒæ­¥åˆ°äº†ä»åº“Bï¼Œä½†æ˜¯è¿˜æ²¡æœ‰fsyncæ—¶Aåº“crashçš„æƒ…å†µï¼ŒAåº”è¯¥ä¼šå›æ»šï¼Œè¿™æ—¶Aå’ŒBå°±ä¸ä¸€è‡´äº†ï¼ŒBæ€ä¹ˆå¤„ç†è¿™ä¸ªäº‹åŠ¡å‘¢ï¼Œæ˜¯ä¼šå°†è¿™ä¸ªå¤±è´¥çš„ä¿¡æ¯é€šçŸ¥åˆ°Båº“å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":283732,"user_name":"Geek_2dd7e1","can_delete":false,"product_type":"c1","uid":1394305,"ip_address":"","ucode":"880A84387C9405","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WNIeg1BYZHgfHHYY2fdzRvkVdbZGdMhVlxfiaQhEGRZIsT184hxfpd43T7omvKznn4iaBs8Cx0J1hqlpH72jPCQw/132","comment_is_top":false,"comment_ctime":1615898846,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615898846","product_id":100020801,"comment_content":"å†ä¼ å›ç»™èŠ‚ç‚¹ Aï¼ŒA åˆ¤æ–­åˆ°è¿™ä¸ª server id ä¸è‡ªå·±çš„ç›¸åŒï¼Œå°±ä¸ä¼šå†å¤„ç†è¿™ä¸ªæ—¥å¿—ã€‚æ‰€ä»¥ï¼Œæ­»å¾ªç¯åœ¨è¿™é‡Œå°±æ–­æ‰äº†ã€‚æ„Ÿè§‰è¿™é‡Œå¯ä»¥ä¼˜åŒ–æˆå‘é€binlogçš„æ—¶å€™åœ¨æœåŠ¡ç«¯åˆ¤æ–­æ›´ç§‘å­¦ç‚¹","like_count":0},{"had_liked":false,"id":282336,"user_name":"syuan","can_delete":false,"product_type":"c1","uid":1215879,"ip_address":"","ucode":"D9BBC2ADAB5F2E","user_header":"https://static001.geekbang.org/account/avatar/00/12/8d/87/47d95f4a.jpg","comment_is_top":false,"comment_ctime":1615198809,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615198809","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½<br>ä¸€ä¸ªå¤‡åº“æ¥åˆ° binlog å¹¶åœ¨é‡æ”¾çš„è¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆä¸åŸ binlog çš„ server id ç›¸åŒçš„æ–°çš„ binlogï¼›<br>æ¯ä¸ªåº“åœ¨æ”¶åˆ°ä»è‡ªå·±çš„ä¸»åº“å‘è¿‡æ¥çš„æ—¥å¿—åï¼Œå…ˆåˆ¤æ–­ server idï¼Œå¦‚æœè·Ÿè‡ªå·±çš„ç›¸åŒï¼Œè¡¨ç¤ºè¿™ä¸ªæ—¥å¿—æ˜¯è‡ªå·±ç”Ÿæˆçš„ï¼Œå°±ç›´æ¥ä¸¢å¼ƒè¿™ä¸ªæ—¥å¿—ã€‚<br>è¿™ä¸¤æ¡é˜²æ­¢å¾ªç¯å¤åˆ¶ï¼Œé€šè¿‡ä»€ä¹ˆå‚æ•°æ§åˆ¶ï¼Ÿ","like_count":0},{"had_liked":false,"id":276368,"user_name":"xfan","can_delete":false,"product_type":"c1","uid":1315147,"ip_address":"","ucode":"48ED8D498D7F56","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/4b/fa64f061.jpg","comment_is_top":false,"comment_ctime":1611901893,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611901893","product_id":100020801,"comment_content":"è€å¸ˆï¼ŒåŒå­¦ä»¬å¥½ï¼Œè¯·é—®å…³äºmysqlé›†ç¾¤ï¼Œæœ‰æ²¡æœ‰è®²åˆ° mariadb galeraé›†ç¾¤çš„ç›¸å…³åŸç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":269523,"user_name":"åˆšæ¯…æœ¨è®·","can_delete":false,"product_type":"c1","uid":2304624,"ip_address":"","ucode":"67A36FBB162B69","user_header":"https://static001.geekbang.org/account/avatar/00/23/2a/70/6de74794.jpg","comment_is_top":false,"comment_ctime":1608691803,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608691803","product_id":100020801,"comment_content":"ä»èŠ‚ç‚¹ A æ›´æ–°çš„äº‹åŠ¡ï¼Œbinlog é‡Œé¢è®°çš„éƒ½æ˜¯ A çš„ server idï¼›<br>ä¼ åˆ°èŠ‚ç‚¹ B æ‰§è¡Œä¸€æ¬¡ä»¥åï¼ŒèŠ‚ç‚¹ B ç”Ÿæˆçš„ binlog çš„ server id ä¹Ÿæ˜¯ A çš„ server idï¼›<br>å†ä¼ å›ç»™èŠ‚ç‚¹ Aï¼ŒA åˆ¤æ–­åˆ°è¿™ä¸ª server id ä¸è‡ªå·±çš„ç›¸åŒï¼Œå°±ä¸ä¼šå†å¤„ç†è¿™ä¸ªæ—¥å¿—ã€‚<br>æ‰€ä»¥ï¼Œæ­»å¾ªç¯åœ¨è¿™é‡Œå°±æ–­æ‰äº†ã€‚<br>æ˜¯mysqlè‡ªå·±åˆ¤æ–­ï¼Œä¸ç”¨é€šè¿‡é…ç½®å‚æ•°è§£å†³è¿™ä¸ªæ•°æ®å¾ªç¯é—®é¢˜å§","like_count":0},{"had_liked":false,"id":267737,"user_name":"ä½•ç£Š","can_delete":false,"product_type":"c1","uid":1047604,"ip_address":"","ucode":"78934C3ED4A342","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/34/c733b116.jpg","comment_is_top":false,"comment_ctime":1607910008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607910008","product_id":100020801,"comment_content":"æˆ‘åœ¨ä½¿ç”¨rowæ ¼å¼çš„binlogæ—¶é‡åˆ°ä¸€ä¸ªç°è±¡ã€‚å¤šæ¬¡updateåŒä¸€è¡Œæ•°æ®ï¼Œå¦‚æœupdateä¸­setçš„å€¼ä¸dbä¸­çš„å€¼ç›¸åŒï¼Œä¼šè¿”å›å½±å“0è¡Œã€‚æ”¹æˆstatementæ ¼å¼åæ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚<br>éº»çƒ¦è€å¸ˆå¸®å¿™è§£ç­”ä¸‹mysqlå¦‚æ­¤è®¾è®¡çš„ç›®çš„ã€‚<br>mysqlç‰ˆæœ¬ï¼š5.7+","like_count":0},{"had_liked":false,"id":260110,"user_name":"é’ç„","can_delete":false,"product_type":"c1","uid":1308848,"ip_address":"","ucode":"C21660BB9BE976","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/b0/d67cca7a.jpg","comment_is_top":false,"comment_ctime":1604925657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604925657","product_id":100020801,"comment_content":"autoReconnectåœ¨æ–‡æ¡£ä¸­å¹¶ä¸æ¨èä½¿ç”¨, æˆ‘æƒ³çŸ¥é“ä¸ºä»€ä¹ˆ? æœ‰å¤§ä½¬è§£ç­”ä¸€ä¸‹å˜›? è¯´æ˜¯è¦ä»¥åˆé€‚çš„æ–¹å¼å¤„ç†sqlException, å¦åˆ™å¯èƒ½ä¼šå‡ºé—®é¢˜. ä»€ä¹ˆæ˜¯åˆé€‚çš„æ–¹å¼.","like_count":0},{"had_liked":false,"id":258542,"user_name":"dbtiger","can_delete":false,"product_type":"c1","uid":1324202,"ip_address":"","ucode":"05E8447593318C","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/aa/431de942.jpg","comment_is_top":false,"comment_ctime":1604478694,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604478694","product_id":100020801,"comment_content":"åŒæ´»çš„è¯server_idè¦ä¸åŒ<br>å¹¶ä¸”è®¾ç½®å¦‚ä¸‹2ä¸ªå‚æ•°ï¼š<br>log_bin=on<br>log_slave_updates=off<br>","like_count":0},{"had_liked":false,"id":252105,"user_name":"Wing","can_delete":false,"product_type":"c1","uid":1304201,"ip_address":"","ucode":"154CABA3CA394E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/nNLq6GHrFNm6HrxWeMLf9t31G8fO1s1j3qk995thicplR8Oo2JOJ546aQPCsRND58Q0HyjrdtK1udgdemzR2eaA/132","comment_is_top":false,"comment_ctime":1602126971,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602126971","product_id":100020801,"comment_content":"delete è¯­å¥çš„ä¾‹å­ ï¼Œ æœ¬èº« æ²¡æœ‰ order by ï¼Œ æœ¬æ¥åœ¨ ä¸»åº“è¿è¡Œçš„æ—¶å€™å°±ä¸æ˜¯ç¡®å®šçš„ã€‚ <br><br>","like_count":0},{"had_liked":false,"id":249792,"user_name":"æŸæµ©","can_delete":false,"product_type":"c1","uid":2036290,"ip_address":"","ucode":"5CA12F6B5A38B1","user_header":"https://static001.geekbang.org/account/avatar/00/1f/12/42/9322abe6.jpg","comment_is_top":false,"comment_ctime":1600792443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600792443","product_id":100020801,"comment_content":"è€å¸ˆè®²å¾—å¾ˆå¥½","like_count":0},{"had_liked":false,"id":247236,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1599638933,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599638933","product_id":100020801,"comment_content":"ä¸»åº“binlogä¼ ç»™å¤‡åº“æ‰§è¡Œåï¼Œå‘ç”Ÿé‡å¯ï¼Œå¾—åˆ°ä¸åŒçš„serveridï¼Œè¿™æ—¶å¤‡åº“å†å°†åŸæ¥çš„binlogç»™åˆ°â€œä¸»åº“â€æ‰§è¡Œï¼Œæ­¤æ—¶serveridåˆ¤æ–­å‡†åˆ™å¤±æ•ˆï¼Œâ€œä¸»åº“â€ä¼šç»§ç»­æ‰§è¡Œï¼Œä»è€Œé€ æˆæ­»å¾ªç¯ã€‚","like_count":0},{"had_liked":false,"id":246722,"user_name":"é¢œæµ·èˆª","can_delete":false,"product_type":"c1","uid":1308159,"ip_address":"","ucode":"5644F6328BF901","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/ff/523fb378.jpg","comment_is_top":false,"comment_ctime":1599462794,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599462794","product_id":100020801,"comment_content":"        Seconds_Behind_Master: 148<br>Master_SSL_Verify_Server_Cert: No<br>                Last_IO_Errno: 0<br>                Last_IO_Error: <br>               Last_SQL_Errno: 0<br>               Last_SQL_Error: <br>  Replicate_Ignore_Server_Ids: <br>             Master_Server_Id: 330601<br>                  Master_UUID: 234a00c7-b7ed-11e8-9211-00163e0a68ff<br>             Master_Info_File: mysql.slave_master_info<br>                    SQL_Delay: 0<br>          SQL_Remaining_Delay: NULL<br>      Slave_SQL_Running_State: Waiting for dependent transaction to commit<br>           Master_Retry_Count: 86400<br>è€å¸ˆ æˆ‘ä»¬è¿™ä¸ªæœ‰ä¸ªä»åº“ ä¸€ç›´æœ‰å»¶è¿Ÿ ï¼Œç›®å‰çœ‹æ¯20åˆ†é’Ÿå†™æ»¡ä¸€ä¸ª1Gçš„binlogæ–‡ä»¶ï¼Œè®°å½•çš„æ˜¯ä¸€äº›javaæ—¥å¿—ï¼Œæ¯å¤©éƒ½æœ‰ä¸Šç™¾Gçš„å¢é‡ï¼Œä»åº“çš„SQLçº¿ç¨‹ä¸€ç›´ Waiting for dependent transaction to commitè¿™ä¸ªçŠ¶æ€ï¼Œæˆ‘è¯¥ä»å“ªäº›æ–¹é¢ä¼˜åŒ–å‘¢","like_count":0},{"had_liked":false,"id":246721,"user_name":"é¢œæµ·èˆª","can_delete":false,"product_type":"c1","uid":1308159,"ip_address":"","ucode":"5644F6328BF901","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/ff/523fb378.jpg","comment_is_top":false,"comment_ctime":1599462685,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599462685","product_id":100020801,"comment_content":"        Seconds_Behind_Master: 148<br>Master_SSL_Verify_Server_Cert: No<br>                Last_IO_Errno: 0<br>                Last_IO_Error: <br>               Last_SQL_Errno: 0<br>               Last_SQL_Error: <br>  Replicate_Ignore_Server_Ids: <br>             Master_Server_Id: 330601<br>                  Master_UUID: 234a00c7-b7ed-11e8-9211-00163e0a68ff<br>             Master_Info_File: mysql.slave_master_info<br>                    SQL_Delay: 0<br>          SQL_Remaining_Delay: NULL<br>      Slave_SQL_Running_State: Waiting for dependent transaction to commit<br>           Master_Retry_Count: 86400","like_count":0},{"had_liked":false,"id":236109,"user_name":"Geek_4660f3","can_delete":false,"product_type":"c1","uid":1757482,"ip_address":"","ucode":"8B59B0C29EF88A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIMFaaIb1ZyU6zuYrT2WlD4RrsV2orxLonpIFwsx3ic01OLJ0N4dnSXQ3mFQxnbemiabKDw9810rX4Q/132","comment_is_top":false,"comment_ctime":1595319441,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595319441","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸‹è€æ˜¯ï¼Œæ–‡ä¸­è¯´çš„deleteè¯­å¥èµ°t_modifiedç´¢å¼•å’Œaç´¢å¼•ä¼šäº§ç”Ÿä¸ä¸€æ ·çš„ç»“æœæ˜¯ä¸ºå•¥","like_count":0},{"had_liked":false,"id":232555,"user_name":"EveryDayIsNew","can_delete":false,"product_type":"c1","uid":1316926,"ip_address":"","ucode":"776B81EF6830FA","user_header":"https://static001.geekbang.org/account/avatar/00/14/18/3e/f8632713.jpg","comment_is_top":false,"comment_ctime":1594036687,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594036687","product_id":100020801,"comment_content":"è¿™ä¸ªåŒä¸»äº’ç›¸åŒæ­¥æ›´æ–°ï¼Œè¦æ˜¯åœ¨ç”¨æˆ·æ³¨å†Œåœºæ™¯æ€ä¹ˆåŠï¼Œæ¯”å¦‚æˆ‘å’Œå¦å¤–ä¸€ä¸ªäººåŒæ—¶æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œè´¦å·ä¸ºå”¯ä¸€é”®ï¼Œé‚£ä¸æ˜¯å¤åˆ¶å†²çªäº†","like_count":0},{"had_liked":false,"id":232117,"user_name":"Damo","can_delete":false,"product_type":"c1","uid":1599197,"ip_address":"","ucode":"F332EA67F5A40C","user_header":"https://static001.geekbang.org/account/avatar/00/18/66/dd/c9f17139.jpg","comment_is_top":false,"comment_ctime":1593858889,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593858889","product_id":100020801,"comment_content":"1. è€å¸ˆï¼Œå›¾ 1 ä¸­ï¼Œä¸»åˆ‡ä»ï¼Œä»åˆ‡ä¸»æ˜¯ä»€ä¹ˆæ—¶æœºè§¦å‘çš„ï¼Ÿå¸Œæœ›è€å¸ˆè®²ä¸€ä¸‹<br>2. è¯»å†™åˆ†ç¦»çš„å¥½å¤„æ˜¯å•¥å‘€ï¼Ÿå…·ä½“åœºæ™¯æœ‰æœ¨æœ‰ï¼Ÿ","like_count":0},{"had_liked":false,"id":229667,"user_name":"å¼ sir","can_delete":false,"product_type":"c1","uid":1209431,"ip_address":"","ucode":"52958DF6705208","user_header":"https://static001.geekbang.org/account/avatar/00/12/74/57/7b828263.jpg","comment_is_top":false,"comment_ctime":1593093662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593093662","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘æ€ä¹ˆå»æŸ¥çœ‹å½“å‰ä¸»å¤‡æ˜¯å¦åœ¨æ‰§è¡ŒåŒæ­¥æ“ä½œå‘¢ï¼Œåˆæ€ä¹ˆçœ‹ä¸ä¸»åº“çš„è¿æ¥æ˜¯å¦æ­£å¸¸å‘¢","like_count":0},{"had_liked":false,"id":227321,"user_name":"Geek_9d8be5","can_delete":false,"product_type":"c1","uid":1742868,"ip_address":"","ucode":"20181C54A2C589","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/JVOiclOoyFvgJHNXRgqB9RDyDueBHEP5lwATC47nFXRJibtK8ibU8phJPiav3BsPCUAssM1X82mnGtEe7bF91p39eA/132","comment_is_top":false,"comment_ctime":1592357733,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592357733","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸‹ï¼Œä¸ºä»€ä¹ˆè¦åšä¸»ä»å‘¢ï¼Ÿåšäº†ä»¥åæ€§èƒ½èƒ½æå‡å¤šå°‘å‘¢ï¼Ÿè¿™ä¸ªæ€§èƒ½å¸¦æ¥çš„æå‡ä¸æŠ•å…¥çš„å¼€å‘è¿ç»´æˆæœ¬ç›¸æ¯”æ˜¯å¦å€¼å¾—å‘¢ï¼Ÿæœ›è§£ç­”","like_count":0},{"had_liked":false,"id":225451,"user_name":"Rememberä¹ç¦»","can_delete":false,"product_type":"c1","uid":1237327,"ip_address":"","ucode":"97EE6E6344689F","user_header":"https://static001.geekbang.org/account/avatar/00/12/e1/4f/00476b4c.jpg","comment_is_top":false,"comment_ctime":1591758263,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591758263","product_id":100020801,"comment_content":"æœ¬æ¥è¿™å‡ ç¯‡å…³äºä¸»ä»çš„æ–‡ç« æ˜¯ä¸€ç‚¹éƒ½æ²¡çœ‹æ‡‚ï¼Œè¿™æ®µæ—¶é—´é¡¹ç›®éœ€æ±‚ï¼Œå®è·µäº†ï¼Œå†å›å¤´çœ‹è¿™äº›æ–‡ç« ï¼Œç¬é—´æ¸…æ™°äº†ã€‚å®è·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†ã€‚","like_count":0},{"had_liked":false,"id":216616,"user_name":"æ‰¬","can_delete":false,"product_type":"c1","uid":1315397,"ip_address":"","ucode":"E76C4791763EF3","user_header":"https://static001.geekbang.org/account/avatar/00/14/12/45/ecc7a922.jpg","comment_is_top":false,"comment_ctime":1589296577,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589296577","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚æœæŠŠsync_binlog è®¾ç½®ä¸º100ï¼Œé‚£ä¹ˆå¼‚å¸¸é‡å¯ä¹‹åï¼Œè¿™æ®µæ—¥å¿—å°±ä¸¢å¤±äº†ï¼Œé‚£ä¹ˆæ€ä¹ˆä¿è¯ä¸»å¤‡åŒæ­¥çš„","like_count":0},{"had_liked":false,"id":208499,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1587371701,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587371701","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼<br>å¥½åƒ io_thread ä¹Ÿèƒ½å¤Ÿå®ç° sql_thread çš„åŠŸèƒ½ï¼Œå³ io_thread è¯»å– binlog åç›´æ¥è½åº“ï¼Œä¸å†™ deley_logï¼Œè€Œä¸” io_thread ä¹Ÿå¯ä»¥åƒ sql_thread ä¸€æ ·ï¼Œæ¼”å˜æˆå¤šçº¿ç¨‹ã€‚<br>è¿™é‡Œä¸ºå•¥è¦è®¾è®¡æˆ io_thread å’Œ sql_thread å–ï¼Ÿ<br>è°¢è°¢è€å¸ˆï¼","like_count":0},{"had_liked":false,"id":206341,"user_name":"ç†å¸†","can_delete":false,"product_type":"c1","uid":1098526,"ip_address":"","ucode":"1B32202C229735","user_header":"https://static001.geekbang.org/account/avatar/00/10/c3/1e/633a1e87.jpg","comment_is_top":false,"comment_ctime":1586843848,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1586843848","product_id":100020801,"comment_content":"ç°åœ¨å¾ˆå¤šä¸šåŠ¡ç³»ç»Ÿéƒ½åŸºäº binlog å®ç°äº‹ä»¶é©±åŠ¨è®¾è®¡ï¼Œåˆ©ç”¨å¦‚é˜¿é‡Œ Canal çš„æŠ€æœ¯æ¥æ”¶ binlogï¼Œå¹¶è½¬æ¢æˆä¸šåŠ¡äº‹ä»¶ã€‚é—®é¢˜æ˜¯å› ä¸ºå†™ binlog å‘ç”Ÿåœ¨äº‹åŠ¡æäº¤å‰ï¼Œé‚£æ¥æ”¶æ­¤äº‹ä»¶çš„ç³»ç»Ÿåœ¨æ”¶åˆ°äº‹ä»¶åï¼ŒæŸ¥è¯¢å¯¹åº”è®°å½•ï¼Œæ˜¯å¦æœ‰å¯èƒ½çœ‹åˆ°äº‹åŠ¡æäº¤å‰çš„æ•°æ®ã€‚","like_count":0,"discussions":[{"author":{"id":1107305,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e5/69/719ec5d0.jpg","nickname":"Jian","note":"","ucode":"17ED4919F22DEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335794,"discussion_content":"å¯ä»¥çœ‹åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608310601,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202952,"user_name":"Ryan","can_delete":false,"product_type":"c1","uid":1667987,"ip_address":"","ucode":"95BBBEE5B23878","user_header":"https://static001.geekbang.org/account/avatar/00/19/73/93/0a3a1e5b.jpg","comment_is_top":false,"comment_ctime":1586092567,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586092567","product_id":100020801,"comment_content":"äº†è§£äº†ä¸»ä»å¤‡ä»½çš„æ€è·¯ï¼Œå¹²è´§æ»¡æ»¡","like_count":0},{"had_liked":false,"id":198433,"user_name":"é²ç­å¤§å¸ˆ","can_delete":false,"product_type":"c1","uid":1179156,"ip_address":"","ucode":"4F9615DF87B031","user_header":"https://static001.geekbang.org/account/avatar/00/11/fe/14/f1532dec.jpg","comment_is_top":false,"comment_ctime":1585451149,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585451149","product_id":100020801,"comment_content":"å¦‚æœ delete è¯­å¥ä½¿ç”¨çš„æ˜¯ç´¢å¼• aï¼Œé‚£ä¹ˆä¼šæ ¹æ®ç´¢å¼• a æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´åˆ é™¤çš„æ˜¯ a=4 è¿™ä¸€è¡Œï¼›<br>ä½†å¦‚æœä½¿ç”¨çš„æ˜¯ç´¢å¼• t_modifiedï¼Œé‚£ä¹ˆåˆ é™¤çš„å°±æ˜¯ t_modifed=&#39;2018-11-09â€™ä¹Ÿå°±æ˜¯ a=5 è¿™ä¸€è¡Œã€‚<br>---------------<br>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢","like_count":0},{"had_liked":false,"id":192005,"user_name":"è¿ç»´è€èƒ¡","can_delete":false,"product_type":"c1","uid":1227007,"ip_address":"","ucode":"DF398BEE296E11","user_header":"https://static001.geekbang.org/account/avatar/00/12/b8/ff/249da6da.jpg","comment_is_top":false,"comment_ctime":1584810135,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584810135","product_id":100020801,"comment_content":"ç”¨binlogserveråº”ç”¨binlogæ˜¯ä¸ªä¸é”™çš„æ–¹æ³•","like_count":0},{"had_liked":false,"id":187256,"user_name":"Geek_bf14f3","can_delete":false,"product_type":"c1","uid":1305789,"ip_address":"","ucode":"DE43BE8DDE6CFD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIfT8quy2V8eMGrFZNQp1riaB8zz767gDMQhgybXB8ZvmXJNiaHWYxpLfy75mjKo5R5C8cOkj8JLYtA/132","comment_is_top":false,"comment_ctime":1584069945,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1584069945","product_id":100020801,"comment_content":"æ‚¨å¥½ï¼Œå‘¨ä¸€ç”¨mysqldumpåšäº†ä¸€ä¸ªå…¨å¤‡ï¼Œä½¿ç”¨äº†--single-transactionï¼Œè¿™æœŸé—´æœ‰ä¸€ä¸ªä¸€ç›´æ²¡æœ‰æäº¤çš„äº‹åŠ¡ï¼Œå¤‡ä»½å®Œåäº‹åŠ¡æäº¤äº†ã€‚å‘¨äºŒä½¿ç”¨å…¨å¤‡+binlogæ¢å¤ï¼Œä¸çŸ¥é“æ˜¯å¦ä¼šæ¢å¤è¿™ä¸ªä¹‹å‰æ²¡æœ‰æäº¤çš„äº‹åŠ¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1373454,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/1hp9kzzuLUVHzmmddIPIO2OgUWr1ibJRr8cMoB7K0fwx8Vmn34L8yN2NoYUtgNicfPGaXKF02pQ2huXd59r2I0kw/132","nickname":"ä¸‰èƒ–","note":"","ucode":"CD69FCD606FC5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282149,"discussion_content":"ä¼šå•Šï¼Œäº‹åŠ¡æäº¤äº†å°±ä¼šå†™åˆ°binlogã€‚é‡å¤çœ‹å¤šå‡ éè¯¾ç¨‹å§ï¼Œæ„Ÿè§‰ä½ è¿˜æ²¡ç†è§£äº‹åŠ¡å’Œæ—¥å¿—è¿™ä¸¤å—çš„å†…å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591891067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186944,"user_name":"weineel","can_delete":false,"product_type":"c1","uid":1049741,"ip_address":"","ucode":"6DC6EF4F256A53","user_header":"https://static001.geekbang.org/account/avatar/00/10/04/8d/005c2ff3.jpg","comment_is_top":false,"comment_ctime":1583977533,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1583977533","product_id":100020801,"comment_content":"åŒ M ä¸­ï¼ŒA æŠŠ binglog å‘ç»™ B, Bæ‰§è¡Œå®Œæˆåï¼Œåˆ¤æ–­ server id ä¸æ˜¯è‡ªå·±ï¼Œç”Ÿæˆçš„ binlog å°±ä¸å‘ç»™ A äº†,ä¸æ˜¯å¯ä»¥æå‰æ–­å¼€æ­»å¾ªç¯å—ï¼Ÿè¿™æ ·ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":183720,"user_name":"spuryin","can_delete":false,"product_type":"c1","uid":1221753,"ip_address":"","ucode":"17474DCB7D293D","user_header":"https://static001.geekbang.org/account/avatar/00/12/a4/79/35ab3a19.jpg","comment_is_top":false,"comment_ctime":1583119999,"is_pvip":false,"replies":[{"id":"71135","content":"å¤‡åº“åŒæ­¥æœ‰å»¶è¿Ÿå—<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1583128110,"ip_address":"","comment_id":183720,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1583119999","product_id":100020801,"comment_content":"é—®ä¸ªå·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä¸çŸ¥é“è¿˜èƒ½ä¸èƒ½æœ‰äººå›ç­”ï¼ŒMySQLç‰ˆæœ¬éƒ½æ˜¯5.6ï¼Œä¸»åº“æœ‰ä¸ªè®¡ç®—æ’åçš„é€»è¾‘ï¼Œè®¡ç®—å®Œæ’ååï¼Œå¤‡åº“å¤‡ä»½çš„æ•°æ®å¶å°”ä¼šæœ‰é—®é¢˜ï¼Œæœ‰æ—¶å€™ä¼šå‘ç°å¤‡åº“æ²¡è®¡ç®—æ’åï¼Œæœ‰æ—¶å€™æ’åè®¡ç®—çš„å’Œä¸»åº“ä¸ä¸€è‡´ï¼Œè¿™ä¸¤ç§æƒ…å†µï¼Œåªè¦åœ¨ä¸»åº“é‡æ–°è¿è¡Œä¸€ä¸‹è®¡ç®—æ’åçš„é€»è¾‘ï¼Œå¤‡åº“æ•°æ®å°±å¯¹äº†ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485761,"discussion_content":"å¤‡åº“åŒæ­¥æœ‰å»¶è¿Ÿå—\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583128110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292461,"discussion_content":"binlog_formatè¿™æ˜¯çš„æ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595234868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1221753,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a4/79/35ab3a19.jpg","nickname":"spuryin","note":"","ucode":"17474DCB7D293D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":204096,"discussion_content":"æŠ±æ­‰è¿™ä¹ˆä¹…å›å¤ï¼ŒåŸºæœ¬æ²¡æœ‰å»¶è¿Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584113403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179254,"user_name":"é™ˆå¤§å¤´","can_delete":false,"product_type":"c1","uid":1335400,"ip_address":"","ucode":"F1CA8837BF1E5C","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/68/626cb455.jpg","comment_is_top":false,"comment_ctime":1581945598,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581945598","product_id":100020801,"comment_content":"è¿™è®©æˆ‘æƒ³èµ·æˆ‘ä¹‹å‰åšçš„ä¸€ä¸ªéœ€æ±‚ï¼Œç¨‹åºéƒ¨ç½²å›½å†…å¤–ï¼Œæ•°æ®éœ€è¦åŒæ­¥ï¼Œæˆ‘ä»¬æœ€å¼€å§‹æ˜¯é€šè¿‡æ•°æ®ç”Ÿæˆå›½å­—æ®µä¸ç¨‹åºéƒ¨ç½²æœåŠ¡å™¨æ‰€å±å›½å­—æ®µå»åˆ¤æ–­æ˜¯å¦éœ€è¦åŒæ­¥çš„ï¼Œåé¢å°±æ”¹æˆç”¨ä¸€ä¸ªflagï¼Œåœ¨ç”ŸæˆåŒæ­¥æ–‡ä»¶çš„æ—¶å€™å…ˆåˆ¤æ–­flagï¼Œå¦‚æœç­‰äºfalseï¼Œå°±æŠŠflagè®¾ç½®ä¸ºtrueï¼Œç„¶åå†™å…¥æ–‡ä»¶è¿›è¡ŒåŒæ­¥ï¼Œä¸ç„¶å°±ä¸å†™å…¥","like_count":0},{"had_liked":false,"id":174839,"user_name":"åèç§‘æŠ€","can_delete":false,"product_type":"c1","uid":1808280,"ip_address":"","ucode":"B6BA3C47C05073","user_header":"","comment_is_top":false,"comment_ctime":1580429560,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1580429560","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ ¹æ®ä¸»å¤‡æµç¨‹å›¾ï¼ŒmasterA åœ¨binlogå®Œæˆï¼ŒåŒæ—¶å¼€å§‹äº†2ä¸ªåŠ¨ä½œï¼š<br>1. redo log commit (è¿™æ—¶ä¼šæ›´æ–°redo log commit çŠ¶æ€åˆ° redo log ç£ç›˜æ–‡ä»¶<br>2. dump_thread çº¿ç¨‹ä¼šåŒæ­¥binlog åˆ°slaveB,<br>é—®é¢˜ï¼Œä¼šä¸ä¼šå‡ºç° redo log commit æ¯” dump_thread æ…¢ï¼Œè¿™æ—¶çªç„¶æ–­ç”µäº†ï¼Œ salveBæœ‰äº†æœ€æ–°çš„binlogï¼Œ ä½† redo log commitæ²¡å®Œæˆï¼Œä»è€Œä¸¤è¾¹æ•°æ®ä¸ä¸€è‡´ï¼Ÿ å¦‚æœæ˜¯ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œæ˜¯å¦‚ä½•ä¿éšœ redo log commitä¸€å®šå…ˆäº binlogåŒæ­¥ ï¼Ÿè°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1107305,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e5/69/719ec5d0.jpg","nickname":"Jian","note":"","ucode":"17ED4919F22DEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335795,"discussion_content":"è¿™ç§æƒ…å†µä¼šå‡ºç°ä¸¤è¾¹æ•°æ®ä¸ä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608310823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171997,"user_name":"æœ€åˆçš„å°è±¡","can_delete":false,"product_type":"c1","uid":1228852,"ip_address":"","ucode":"4DD68307FA274E","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/34/0574bb44.jpg","comment_is_top":false,"comment_ctime":1579067063,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579067063","product_id":100020801,"comment_content":"æ¯ç¯‡éƒ½å¹²è´§æ»¡æ»¡ï¼ï¼","like_count":0},{"had_liked":false,"id":169076,"user_name":"Sic Pavis","can_delete":false,"product_type":"c1","uid":1106088,"ip_address":"","ucode":"48B5F0118347C8","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/a8/4e739cf6.jpg","comment_is_top":false,"comment_ctime":1578271306,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1578271306","product_id":100020801,"comment_content":"å†ä¼ å›ç»™èŠ‚ç‚¹ Aï¼ŒA åˆ¤æ–­åˆ°è¿™ä¸ª server id ä¸è‡ªå·±çš„ç›¸åŒï¼Œå°±ä¸ä¼šå†å¤„ç†è¿™ä¸ªæ—¥å¿—ã€‚æ‰€ä»¥ï¼Œæ­»å¾ªç¯åœ¨è¿™é‡Œå°±æ–­æ‰äº†ã€‚<br><br>è¿™é‡Œæ˜¯ä¸æ˜¯ç”±binlogäº§ç”Ÿæ–¹åˆ¤æ–­æ›´å¥½ï¼Ÿåº“æ¥å—åˆ°binlogï¼Œè‡ªå·±æ‰§è¡Œåç”Ÿæˆä¸€ä¸ªç›¸åŒserver idçš„binlogï¼Œæœ¬åœ°åº”è¯¥æ˜¯æœ‰å­˜ä¸€ä»½server idçš„é›†ç¾¤é…ç½®çš„å§ï¼ŒåªæŠŠbinlogä¼ è¾“ç»™server idä¸åŒçš„åº“ï¼Œä¸æ˜¯èŠ‚çº¦äº†å¾ˆå¤šç½‘ç»œå¼€é”€äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165693,"discussion_content":"å¸¦ä¸€ä¸ªidæ²¡å•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581314592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163129,"user_name":"ub8","can_delete":false,"product_type":"c1","uid":1481811,"ip_address":"","ucode":"0D937C3EAEB781","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg","comment_is_top":false,"comment_ctime":1576661024,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1576661024","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œçœ‹åˆ°å›¾ 2 ä¸»å¤‡æµç¨‹å›¾ ä¸­ ç”»çš„æåˆ°äº† undolog , æˆ‘ä¸€ç›´æä¸æ¸…æ¥šï¼Œundolog,binlog,redolog,ä¸‰ä¸ªæ—¥å¿—æ–‡ä»¶çš„å†™å…¥å…¥å£ï¼Œæ¯”å¦‚æ‰§è¡Œä¸€å¥update , mysqlä¸­å¦‚ä½•ï¼Œå¯¹è¿™å‡ ä¸ªæ—¥å¿—è¿›è¡Œæ“ä½œçš„ï¼Ÿè¿™å‡ ä¸ªæ—¥å¿—é—´çš„æ•°æ®åˆæ˜¯å¦‚ä½•ä¿è¯ä¸€è‡´çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410785,"discussion_content":"å›¾äºŒå…¶å®å°±å·²ç»å°†è¿™ä¸‰ä¸ªæ—¥å¿—ä¸²èµ·æ¥äº†ã€‚æ›´æ–°æ•°æ®åº“çš„æ—¶å€™ï¼Œå°±åœ¨å†…å­˜ä¸­æ›´æ–°â€”â€”å¯¹åº”æ•°æ®è®°å½•å°±æœ‰æ–°çš„ç‰ˆæœ¬ã€å³undologã€‚åœ¨æ›´æ–°æ•°æ®è®°å½•æ—¶ï¼Œå½“ç„¶ä¹Ÿä¼šç”Ÿæˆredologï¼Œredologåœ¨äº‹åŠ¡æäº¤åï¼Œéœ€è¦ä¸¤é˜¶æ®µæ­¥éª¤æ‰èƒ½ä¿è¯å’Œbinlogä¸€è‡´ã€‚binlogåœ¨redologçš„prepareé˜¶æ®µå°±å¼€å§‹å†™ï¼Œå½“binlogä¹Ÿå†™å®Œï¼Œredologå°±å˜æˆcommité˜¶æ®µå•¦ã€‚\nå›¾äºŒé‡Œè¿˜æœ‰ä¸€ä¸ªåå°çº¿ç¨‹ï¼Œè´Ÿè´£å°†undologè½ç›˜ï¼Œå› ä¸ºæ•°æ®éƒ½æ˜¯åœ¨å†…å­˜ä¸­å¿ƒæ›´æ”¹çš„ï¼Œæ‰€ä»¥ï¼Œmysqlä¼šåœ¨æŸä¸ªæ—¶åˆ»å°†å†…å­˜ä¸­çš„æ•°æ®çœŸæ­£fsyncåˆ°ç£ç›˜ã€‚æ³¨æ„ä¸è¦å’Œredologã€binlogçš„æŒä¹…åŒ–æ··æ·†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635776509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":160630,"discussion_content":"redologå’Œundo logæ˜¯æ›´æ–°æ“ä½œæ‰§è¡Œå®Œå°±æœ‰äº†ï¼Œbinlogæ˜¯äº‹åŠ¡æäº¤æ‰æœ‰ï¼Œåªæœ‰binlogä¼šåœ¨æœ‰æ•ˆæœŸå†…ä¸€ç›´å­˜åœ¨ã€‚è¯¦ç»†çš„å‰é¢æ•™ç¨‹éƒ½æœ‰è®²åˆ°çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580821136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157037,"user_name":"ä¹å–‡å˜›","can_delete":false,"product_type":"c1","uid":1732339,"ip_address":"","ucode":"8845322554C33D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/6e/f3/0789b0ac.jpg","comment_is_top":false,"comment_ctime":1575016495,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575016495","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®MySQLæ•°æ®åº“æ‰§è¡Œä¸»å¤‡åŒæ­¥çš„æ—¶å€™ï¼Œæ•ˆç‡æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ<br>ä¹‹å‰å‘æ•°æ®åº“æ’å…¥åƒä¸‡é‡çº§çš„æ•°æ®ï¼Œbinlogç£ç›˜åªæœ‰20Gï¼Œæ‰§è¡Œæ—¶é—´é•¿äº†ï¼Œç£ç›˜ä¸å¤Ÿäº†ï¼Œéœ€è¦åˆ é™¤ï¼Œæ ¹æ®DBAçš„å»ºè®®ï¼Œåˆ é™¤æ›´æ—©æ—¶é—´ç”Ÿæˆçš„æ—¥å¿—ï¼ˆæ¯æ¬¡åˆ é™¤éƒ½é¢„ç•™å¥½å‡ ä¸ªbinlogæ–‡ä»¶ï¼‰ï¼Œæœ‰å‡ æ¬¡å‡ºç°æ•°æ®åº“ä¸»ä»ä¸åŒæ­¥ï¼ŒDBAç»™çš„å®šä½æ˜¯binlogé—®é¢˜ã€‚","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165694,"discussion_content":"çœ‹æ˜¯ä»€ä¹ˆæ ¼å¼çš„binlog","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581314650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153321,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1574216264,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574216264","product_id":100020801,"comment_content":"æˆ‘binlogåšå¤§ç²¾æ·±å•Š...","like_count":0},{"had_liked":false,"id":151852,"user_name":"å¼ å¤§äºº","can_delete":false,"product_type":"c1","uid":1200544,"ip_address":"","ucode":"4FCA71788DEB29","user_header":"https://static001.geekbang.org/account/avatar/00/12/51/a0/f3bb1dd7.jpg","comment_is_top":false,"comment_ctime":1573799944,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1573799944","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œä¸»åº“binlogè¿˜åœ¨bufferä¸­çš„æƒ…å†µä¸‹ï¼Œdumpçº¿ç¨‹ä¼šä¸ä¼šå°†binlogå‘é€åˆ°ä»åº“ï¼Ÿè¿˜æ˜¯è¯´å¿…é¡»binlogè½ç›˜äº†ï¼Œç„¶ådumpçº¿ç¨‹å†å»è¯»binlogå¹¶å‘é€ç»™ä»åº“ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374912,"discussion_content":"äº‹åŠ¡æäº¤äº†å°±å¯ä»¥å‘é€ï¼Œè¿™æ—¶binlogè¦ä¹ˆåœ¨page cacheè¦ä¹ˆè½ç›˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621410229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1107305,"avatar":"https://static001.geekbang.org/account/avatar/00/10/e5/69/719ec5d0.jpg","nickname":"Jian","note":"","ucode":"17ED4919F22DEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335797,"discussion_content":"å¿…é¡»è½ç›˜æ‰å‘binlogç»™ä»åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608310948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":149068,"user_name":"ç¬‘ç€æ´»ä¸‹å»","can_delete":false,"product_type":"c1","uid":1621001,"ip_address":"","ucode":"23B8B4F9390A2B","user_header":"https://static001.geekbang.org/account/avatar/00/18/bc/09/d6b138fb.jpg","comment_is_top":false,"comment_ctime":1573135284,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1573135284","product_id":100020801,"comment_content":"è€å¸ˆï¼Œèƒ½ä¸èƒ½è®²ä¸€èŠ‚è¯¾çš„undo logæ—¥å¿—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1453053,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2b/fd/7013289d.jpg","nickname":"æ¸©æ•…è€ŒçŸ¥æ–°å¯ä»¥ä¸ºå¸ˆçŸ£","note":"","ucode":"FADCDFA9F9E5E8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":160632,"discussion_content":"éš”ç¦»çº§åˆ«å“ªé‡Œæœ‰è®²åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580821204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140669,"user_name":"ä¸€ä¸€","can_delete":false,"product_type":"c1","uid":1344255,"ip_address":"","ucode":"29D73AC1DCFFB6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/JkMtA7dN7V9Z9iaX2w5zTuPOU6mxhARmEZxicXG7vOs5snjAQrlU0Km8pk9eOibJlhdV3aQk2zkFXOQwZEu1mDgLg/132","comment_is_top":false,"comment_ctime":1571025610,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571025610","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸‹ï¼Œbinlog_rows_query_log_eventså‚æ•°å¼€å¯çš„è¯æ˜¯é™¤äº†è®°å½•sqlè¯­å¥æ›´æ”¹å‰åçš„ä¿¡æ¯ä¹‹å¤–è¿˜è®°å½•åŸå§‹çš„sqlè¯­å¥ã€‚<br>æƒ³é—®ä¸‹å¦‚æœè¿™ä¸ªå‚æ•°å…³é—­ååœ¨å“ªäº›æƒ…å¢ƒä¸‹ä¼šå—åˆ°å½±å“å‘¢ã€‚ï¼ˆæ¯”å¦‚ä½¿ç”¨Flashbackæ¢å¤çš„æ—¶å€™ä¼šå—è¿™ä¸ªå‚æ•°çš„å½±å“å—ï¼Ÿï¼‰","like_count":0},{"had_liked":false,"id":131214,"user_name":"å¹¸çŒ´å„¿(à¹‘Ã²á†ºÃ³à¹‘)","can_delete":false,"product_type":"c1","uid":1312709,"ip_address":"","ucode":"16294369690484","user_header":"https://static001.geekbang.org/account/avatar/00/14/07/c5/b91d88d2.jpg","comment_is_top":false,"comment_ctime":1567672425,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1567672425","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯åŒmæ¶æ„ï¼Œkeyé”®è‡ªå¢ï¼Œä¼šä¸ä¼šæœ‰è¿™ç§æƒ…å†µé”®å€¼æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯å†…å®¹ä¸ä¸€æ ·äº†ã€‚å¦‚æœæœ‰æœ‰è§£å†³åŠæ³•å—ã€‚","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165697,"discussion_content":"æ˜¯ä¸æ˜¯æ’å…¥åæœ‰æ›´æ–°ï¼Œå¯¼è‡´ä¸»ä»æš‚æ—¶ä¸åŒæ­¥ï¼Œè¢«ä½ çœ‹åˆ°å°±è¯¯è®¤ä¸ºå†…å®¹ä¸ä¸€æ ·ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581314774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129244,"user_name":"MrVito","can_delete":false,"product_type":"c1","uid":1252169,"ip_address":"","ucode":"716FF6F8871706","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/49/ddefc656.jpg","comment_is_top":false,"comment_ctime":1567070304,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567070304","product_id":100020801,"comment_content":"ä¸»ä»å¤‡ä»½å¼€äº†ä¸‰ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯bg_thread,dump_thread,io_threadï¼Œä¸‰ä¸ªçº¿ç¨‹ï¼Œä»åº“ä»dump_threadè¯»å–binlogï¼Œå¦‚æœæ˜¯ä¸»ä»å¤‡ä»½ï¼Œå‡ºç°æ•°æ®ä¸¢å¤±ï¼Œä¸»åº“çš„æ•°æ®åº”è¯¥æ˜¯æ•°æ®é‡æ¯”è¾ƒå¤§è€Œä¸¢å¤±çš„é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œéƒ½æ˜¯æŸ¥çœ‹binlogæ¥çœ‹çœ‹å¤‡ä»½æ˜¯å¦å‡ºç°é—®é¢˜ï¼Œè¿˜æœ‰å°±æ˜¯show slave statusã€‚<br>è€å¸ˆæçš„é—®é¢˜ï¼Œç®€å•æ¥è¯´ï¼Œæˆ‘ä¸ä¼š...","like_count":0},{"had_liked":false,"id":129235,"user_name":"MrVito","can_delete":false,"product_type":"c1","uid":1252169,"ip_address":"","ucode":"716FF6F8871706","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/49/ddefc656.jpg","comment_is_top":false,"comment_ctime":1567068697,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567068697","product_id":100020801,"comment_content":"çœ‹å®Œæ‰€æœ‰çš„è¯„è®ºï¼Œå¯¹äºä¸€ä¸ªä¸€å¹´çš„æ–°äººæ¥è¯´ï¼Œæœ¬æ¥è¯»è¿™ç¯‡æ–‡ç« æ˜¯æŒºç®€å•çš„ï¼Œä½†æ˜¯ç»“åˆåº”ç”¨åœºæ™¯æ¥è¯´ï¼Œå°±æ˜¾å¾—å¤æ‚äº†ï¼","like_count":0},{"had_liked":false,"id":122015,"user_name":"Eagles","can_delete":false,"product_type":"c1","uid":1115950,"ip_address":"","ucode":"BADAC7969475F2","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/2e/f6a2dc27.jpg","comment_is_top":false,"comment_ctime":1565269357,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565269357","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œrowæ¨¡å¼ä¸‹ï¼Œæ˜¯ä¸æ˜¯åŠ äº†-cå‚æ•°ï¼Œåœ¨binlogé‡Œé¢ä¹Ÿæ˜¯çœ‹ä¸åˆ°æ³¨é‡Šçš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":121318,"user_name":"timidsmile","can_delete":false,"product_type":"c1","uid":1524158,"ip_address":"","ucode":"E062F321730201","user_header":"https://static001.geekbang.org/account/avatar/00/17/41/be/7c756efa.jpg","comment_is_top":false,"comment_ctime":1565098859,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565098859","product_id":100020801,"comment_content":"è¯·é—®ä¸‹MySQLç‰ˆæœ¬æ˜¯ï¼Ÿä¸ºå•¥æˆ‘ç”¨åŒæ ·å‘½ä»¤çœ‹åˆ°çš„æ ¼å¼ä¸ä¸€æ ·","like_count":0},{"had_liked":false,"id":121035,"user_name":"gerry pang","can_delete":false,"product_type":"c1","uid":1068169,"ip_address":"","ucode":"54BD1D8DE1DBBF","user_header":"https://static001.geekbang.org/account/avatar/00/10/4c/89/e698c0a9.jpg","comment_is_top":false,"comment_ctime":1565052310,"is_pvip":false,"replies":[{"id":"44569","content":"08ç¯‡æœ‰å‘€ğŸ˜†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1565095048,"ip_address":"","comment_id":121035,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565052310","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¹‹å‰çš„æ–‡ç« å¥½åƒæ²¡æœ‰ä»‹ç»è¿‡undologï¼Œå¯ä¸å¯ä»¥è€ƒè™‘è¡¥å……ä¸€ä¸‹ç›¸å…³å†…å®¹å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461586,"discussion_content":"08ç¯‡æœ‰å‘€ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565095048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110121,"user_name":"å°¼å…‹","can_delete":false,"product_type":"c1","uid":1063589,"ip_address":"","ucode":"8F5E51C621D57A","user_header":"https://static001.geekbang.org/account/avatar/00/10/3a/a5/217df1c5.jpg","comment_is_top":false,"comment_ctime":1562198947,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1562198947","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæƒ³é—®é—®åŒæ´»è¿™ç§æ¶æ„åœ¨å®è·µä¸­ç”¨çš„å¤šå—ï¼Ÿç›¸æ¯”ä¸»ä»è¿™ç§æ–¹å¼åœ¨æ•°æ®å®Œæ•´æ€§ä¸Šæœ‰ä»€ä¹ˆæ‹…å¿§å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165698,"discussion_content":"ä½ å¯ä»¥æŠŠåŒMçœ‹æˆæ˜¯ä¸»ä»ï¼ŒåŒMåªä¸è¿‡ä½“ç°åœ¨æ›´å®¹æ˜“åˆ‡æ¢åœºæ™¯ä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581314860,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95544,"user_name":"ä¼šå­¦å­¦ä¸ä¼š","can_delete":false,"product_type":"c1","uid":1315319,"ip_address":"","ucode":"375B9AF8B0F201","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/f7/b1ab4b15.jpg","comment_is_top":false,"comment_ctime":1558078978,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1558078978","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¯·é—®æ–‡ä¸­æå‡ºçš„è§£å†³ä¸¤ä¸ªèŠ‚ç‚¹é—´çš„å¾ªç¯å¤åˆ¶çš„ä¼˜åŒ–é€»è¾‘ï¼Œå°±æ˜¯åˆ¤æ–­binlogçš„server idæ˜¯ä¸æ˜¯è‡ªå·±çš„ï¼Œè¿™ä¸ªæ˜¯MySQLæœ¬èº«å°±å·²ç»é›†æˆä¼˜åŒ–äº†ï¼Œè¿˜æ˜¯éœ€è¦è¿ç»´äººå‘˜å»ä¼˜åŒ–ï¼Ÿ<br><br>","like_count":0,"discussions":[{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290868,"discussion_content":"æœ¬èº«å°±æœ‰çš„å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594629859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95412,"user_name":"A_Jinxs","can_delete":false,"product_type":"c1","uid":1317385,"ip_address":"","ucode":"70CDB86D3DA0DA","user_header":"https://static001.geekbang.org/account/avatar/00/14/1a/09/5b8cc220.jpg","comment_is_top":false,"comment_ctime":1558054352,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1558054352","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œç®€å•ä¸»ä»æ¶æ„ä¸­ï¼Œä¸»åº“deleteæ¸…ç©ºä¸€å¼ è¡¨ï¼Œç™¾ä¸‡çº§åˆ«ï¼Œä¸ºä»€ä¹ˆä»åº“ä¼šæœ‰å¾ˆå¤§çš„å»¶è¿Ÿï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1458200,"avatar":"https://static001.geekbang.org/account/avatar/00/16/40/18/cc3804e2.jpg","nickname":"æ²ˆæ´ªå½¬","note":"","ucode":"F9911236D0BA1C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100223,"discussion_content":"rowæ ¼å¼ä¸‹ï¼š\n    sql ä¼šè¿›è¡Œæ‹†åˆ† ï¼š ä¸»åº“ä¸€æ¡è¯­å¥ï¼Œç›¸å½“äºä»åº“æ‰§è¡Œ100wæ¬¡ï¼Œç›¸å½“äºæ¯æ¬¡åŠ äº†ä¸ªwhere ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1577243220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74390,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1552211455,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552211455","product_id":100020801,"comment_content":"ä¸é”™","like_count":0},{"had_liked":false,"id":58458,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1547085793,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1547085793","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼š<br>æœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œå¤šæ¡è¯­å¥åŒæ—¶åœ¨commité˜¶æ®µè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç”Ÿå†™å…¥binlogå’Œå†™å…¥redologçš„é¡ºåºä¸ä¸€è‡´çš„æƒ…å†µã€‚ä¸»ä»å¤‡ä»½çš„æ—¶å€™ï¼Œä»åº“æ˜¯ä¸æ˜¯ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´å‘€ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410788,"discussion_content":"redologçš„é¡ºåºå’Œbinlogçš„é¡ºåºæ²¡æœ‰å…³ç³»ã€‚redologæ˜¯å¾ªç¯å†™ï¼Œè¿Ÿæ—©éƒ½ä¼šè¢«è¦†ç›–æ‰ï¼Œè€Œä¸”ä¸»ä»åˆä¸ä¾æ®redologæ¥æ¢å¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635776842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165700,"discussion_content":"æœ‰å¯èƒ½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581315102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1458200,"avatar":"https://static001.geekbang.org/account/avatar/00/16/40/18/cc3804e2.jpg","nickname":"æ²ˆæ´ªå½¬","note":"","ucode":"F9911236D0BA1C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":100225,"discussion_content":"rr åº”è¯¥ä½¿ç”¨ gapæ§åˆ¶çš„         ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577243345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58425,"user_name":"æœªçŸ¥","can_delete":false,"product_type":"c1","uid":1312918,"ip_address":"","ucode":"DB389CEBEEE9E1","user_header":"https://static001.geekbang.org/account/avatar/00/14/08/96/231fdd9e.jpg","comment_is_top":false,"comment_ctime":1547082042,"is_pvip":false,"replies":[{"id":"21069","content":"Undoå‰é¢å¤§è‡´æœ‰è¯´è¿‡äº†ï¼Œä½ è¦äº†è§£undoçš„ä»€ä¹ˆå†…å®¹å‘¢","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547087050,"ip_address":"","comment_id":58425,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547082042","product_id":100020801,"comment_content":"è€å¸ˆåœ¨è®²rowæ¨¡å¼çš„æ•°æ®æ¢å¤æ—¶ï¼Œæ„Ÿè§‰insertï¼Œupdateï¼Œdeleteçš„æ•°æ®æ ¼å¼å’Œundo  logçš„å·®ä¸å¤šã€‚ä¹‹å‰æ–‡ç« ä¸€ç›´è¯´redoå’Œbinlogï¼Œè€å¸ˆæŠ½ç©ºä¹Ÿè®²ä¸‹undoå’Œå›æ»šæ®µçš„çŸ¥è¯†ã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436059,"discussion_content":"Undoå‰é¢å¤§è‡´æœ‰è¯´è¿‡äº†ï¼Œä½ è¦äº†è§£undoçš„ä»€ä¹ˆå†…å®¹å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547087050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57959,"user_name":"hua168","can_delete":false,"product_type":"c1","uid":1065255,"ip_address":"","ucode":"CFF9A7E86EBA48","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/27/3ff1a1d6.jpg","comment_is_top":false,"comment_ctime":1546951282,"is_pvip":false,"replies":[{"id":"20893","content":"ä¸­é—´ä»¶ä½œä¸ºç»ƒæ‰‹è¿™äº›éƒ½å¯ä»¥çš„<br><br>ä½ æœâ€œå¼€æºåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿâ€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546953578,"ip_address":"","comment_id":57959,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546951282","product_id":100020801,"comment_content":"è¿™æ ·ï¼Œæˆ‘æ˜¯æƒ³å¢åŠ ä¸€äº›ç»éªŒï¼Œæ€•åé¢è¯•åˆé‡åˆ°ï¼Œæƒ³é—®ä¸€ä¸‹å¤§ç¥åˆ†ææ€è·¯ï¼Œè¿™ç§é—®é¢˜æ²¡ç»éªŒå›ç­”ã€‚<br>æˆ‘å°±å·®ç‚¹å›ç­”ç”¨é˜¿é‡Œäº‘çš„DRDSäº†ğŸ˜‚<br><br>ç°åœ¨å¼€æºçš„mysqlä¸­é—´ä»¶ç”Ÿå­˜ç¯å¢ƒä¸­ç”¨ä»€ä¹ˆæ¯”è¾ƒå¤šå‘€ï¼Ÿmycatè¿˜æ˜¯ç½‘æ˜“çš„cetusï¼Ÿ<br><br>æµ·é‡å­˜å‚¨é˜¿é‡Œäº‘æœ‰OSSï¼Œæœ‰æ²¡æœ‰å¯¹åº”çš„å¼€æºè½¯ä»¶å‘€ï¼Ÿç”¨äºç”Ÿå­˜ç¯å¢ƒçš„ï¼Œæ²¡æœ‰æ¥è§¦è¿‡ï¼Œæƒ³é—®ä¸‹ï¼Œæä¸‹å®éªŒåå†å»æ‰¾å·¥ä½œã€‚ğŸ˜‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435848,"discussion_content":"ä¸­é—´ä»¶ä½œä¸ºç»ƒæ‰‹è¿™äº›éƒ½å¯ä»¥çš„\n\nä½ æœâ€œå¼€æºåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿâ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546953578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57897,"user_name":"null","can_delete":false,"product_type":"c1","uid":1159612,"ip_address":"","ucode":"6BBD8835CD4013","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/eePa5cW5DNLD2iaIgcSe54wt9KnC4D8bEZgFVtUJwYgRXykLpXxT3MrqZYnxygkiaAfdrPngB7PSZIvV2WDibRjow/132","comment_is_top":false,"comment_ctime":1546937103,"is_pvip":false,"replies":[{"id":"20883","content":"æˆ‘è§‰å¾—ä½ è¦å…ˆæŸ¥ä¸€ä¸‹ä¸ºå•¥ç¬¬ä¸€ä¸ªæŸ¥è¯¢è¦ç”¨1-2ç§’ï¼Œè¿™ä¸ªè¯·æ±‚çœ‹èµ·æ¥åº”è¯¥æŒºå¿«å‘€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546949947,"ip_address":"","comment_id":57897,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546937103","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘è¯·æ•™ä¸€ä¸ªé—®é¢˜ã€‚ç°åœ¨æˆ‘æœ‰ä¸€å¼ è¡¨é‡Œé¢å­˜å‚¨çš„æœ‰ç”¨æˆ·idå’Œç”¨æˆ·å¤´åƒï¼Œç”¨æˆ·å¤´åƒå­˜çš„äºŒè¿›åˆ¶ã€‚æˆ‘æ‰¹é‡æŸ¥è¯¢ç”¨æˆ·å¤´åƒï¼Œæ¯”å¦‚æˆ‘æŸ¥500ä¸ªç”¨æˆ·idçš„å¤´åƒï¼Œæˆ‘å°†500ä¸ªç”¨æˆ·idåˆ†æˆåç­‰ä»½ï¼Œæ¯ä»½50ä¸ªidï¼Œç„¶åå¼€å¯çº¿ç¨‹æ± ç”¨10ä¸ªçº¿ç¨‹å¹¶è¡ŒæŸ¥è¯¢ã€‚ç°åœ¨çš„é—®é¢˜æ˜¯å…ˆæäº¤æŸ¥è¯¢çš„é‚£ä¸ªçº¿ç¨‹æŸ¥è¯¢æ—¶é—´å¯èƒ½åªç”¨äº†ä¸€ä¸¤ç§’ï¼Œåé¢æäº¤çš„é‚£å‡ ä¸ªçº¿ç¨‹æŸ¥è¯¢æ—¶é—´ä¾æ¬¡å¢åŠ ï¼Œæœ€ä¹…çš„å¤§æ¦‚éœ€è¦äº”å…­ç§’ã€‚æˆ‘ä»¬æ•°æ®åº“ç”¨çš„Oracleï¼Œè™½ç„¶ä¸æ˜¯mysqlï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰Oracleä¸è‡³äº10ä¸ªçº¿ç¨‹çš„å¹¶å‘éƒ½æ‰›ä¸ä½è¿˜éœ€è¦æ’é˜Ÿå¤„ç†å•Šï¼Œæƒ³è¯·æ•™ä¸€ä¸‹è€å¸ˆå‡ºç°è¿™ç§æƒ…å†µæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„å‘¢","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435816,"discussion_content":"æˆ‘è§‰å¾—ä½ è¦å…ˆæŸ¥ä¸€ä¸‹ä¸ºå•¥ç¬¬ä¸€ä¸ªæŸ¥è¯¢è¦ç”¨1-2ç§’ï¼Œè¿™ä¸ªè¯·æ±‚çœ‹èµ·æ¥åº”è¯¥æŒºå¿«å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546949947,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57628,"user_name":"ä¸‡å‹‡","can_delete":false,"product_type":"c1","uid":1309092,"ip_address":"","ucode":"BC9E0918DF4516","user_header":"https://static001.geekbang.org/account/avatar/00/13/f9/a4/f0b92135.jpg","comment_is_top":false,"comment_ctime":1546854745,"is_pvip":false,"replies":[{"id":"20785","content":"åé¢çš„æ–‡ç« ä¼šè¯´åˆ°å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546869678,"ip_address":"","comment_id":57628,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546854745","product_id":100020801,"comment_content":"ç»“åˆä¸ŠèŠ‚çš„ç»„æäº¤å†…å®¹ï¼Œmysql5.7æœ‰ä¸ªåŸºäºç»„æäº¤çš„å¹¶è¡Œå¤åˆ¶åŠŸèƒ½ã€‚è®¾ç½®slave-parallel-workers=Nï¼Œåœ¨å¹¶å‘é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå¹¶è¡Œå¤åˆ¶èƒ½æé«˜slaveæ€§èƒ½ï¼Œå‡å°‘å»¶è¿Ÿã€‚åœ¨å¾ˆå¤šæ—¶å€™ä¸»æœºè´Ÿè½½ä¸å¤§ï¼Œæ¯ç»„æäº¤çš„äº‹åŠ¡æ•°é‡ä»…ä¸º1ï¼Œslave-parallel-workers=0ï¼Œå•çº¿ç¨‹å¤åˆ¶æ€§èƒ½æ›´å¥½ã€‚è¯·é—®è€å¸ˆï¼Œæœ‰æ²¡æœ‰æ¯”è¾ƒå¥½çš„åŠæ³•è¿›è¡Œä¼˜åŒ–ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435672,"discussion_content":"åé¢çš„æ–‡ç« ä¼šè¯´åˆ°å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546869678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57540,"user_name":"ThinkingQuest","can_delete":false,"product_type":"c1","uid":1118560,"ip_address":"","ucode":"597D0C00DAEFE4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/0SDRac7XoordnKYgDLhz5wxAOtE6xqcsSywsywEtKQAR7xicBZQ6ceYftfZjl4Ivq3a5dzvRhYkn2GcUWiaQK7ZQ/132","comment_is_top":false,"comment_ctime":1546830806,"is_pvip":false,"replies":[{"id":"20734","content":"æ²¡ç†è§£ä½ çš„æ„æ€â€¦ å†…å­˜çš„æ•°æ®é¡µåŸæ ·æ‹·è´åˆ°ç£ç›˜çš„ï¼Œä½ æŒ‡çš„æŠ€æœ¯ç»†èŠ‚æ˜¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546832652,"ip_address":"","comment_id":57540,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546830806","product_id":100020801,"comment_content":"é—®ä¸€ä¸ªä¸æœ¬èŠ‚å†…å®¹æ— å…³çš„è¯é¢˜ã€‚ <br>B+æ ‘çš„ç´¢å¼•æ˜¯å¦‚ä½•å­˜å‚¨åœ¨ç£ç›˜æ–‡ä»¶ä¸­çš„å‘¢ã€‚ å›½å†…çš„æŠ€æœ¯æ–‡ç« å¤šè®¨è®ºB+æ ‘çš„ç»“æ„ï¼Œç´¢å¼•çš„çœŸç¡®ä½¿ç”¨ç­‰ã€‚ <br>å…³äºmyslqæ˜¯å¦‚ä½•æŠŠè¡¨æ•°æ®å’Œç´¢å¼•æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ï¼Œè®¨è®ºçš„éå¸¸å°‘ã€‚ <br>å¤§å®¶é€šè¿‡è‡ªè¡ŒæŸ¥æ‰¾ä¸€äº›èµ„æ–™ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°å †æ–‡ä»¶ç­‰å½¢å¼ã€‚ ä½†æ˜¯è¿™é‡Œè¾¹æŠ€æœ¯ç»†èŠ‚å’Œä¼˜åŒ–ç›¸ä¿¡æ˜¯å¾ˆå¤šçš„ã€‚è¿™å¿«å¯ä»¥è¯´æ˜¯ç›®å‰å¯ä»¥æ‰¾åˆ°çš„èµ„æ–™ä¸­ï¼Œç›¸å¯¹æ¯”è¾ƒç©ºç™½çš„ä¸€å—ã€‚<br>è€å¸ˆåè¾¹çš„æ–‡ç« ä¼šæ¶‰åŠè¿™ä¸€å—å†…å®¹ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435633,"discussion_content":"æ²¡ç†è§£ä½ çš„æ„æ€â€¦ å†…å­˜çš„æ•°æ®é¡µåŸæ ·æ‹·è´åˆ°ç£ç›˜çš„ï¼Œä½ æŒ‡çš„æŠ€æœ¯ç»†èŠ‚æ˜¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546832652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}