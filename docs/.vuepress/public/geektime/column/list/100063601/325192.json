{"id":325192,"title":"20 | æ™ºèƒ½è¯­éŸ³ï¼šå¥½ç©çš„è¯­éŸ³æ§åˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ­æœæ–Œã€‚</p><p>å®æˆ˜ç¯‡çš„å‰å‡ è®²ï¼Œæˆ‘ä»¬æ‰“é€ äº†è”ç½‘æ™ºèƒ½ç”µç¯ï¼Œå¹¶å®ç°äº†è·Ÿå…‰ç…§ä¼ æ„Ÿå™¨çš„åœºæ™¯è”åŠ¨ã€‚ä»Šå¤©æˆ‘ä»¬æ¥ç©ä¸€ä¸ªæ›´é…·çš„ï¼Œæ™ºèƒ½éŸ³ç®±ã€‚</p><p>æ™ºèƒ½éŸ³ç®±ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´åŠ è‡ªç„¶çš„äº¤äº’æ–¹å¼ï¼Œæ‰€ä»¥äºšé©¬é€Šçš„Echoäº§å“ä¸€ç»é—®ä¸–ï¼Œå°±è¿…é€Ÿæµè¡Œèµ·æ¥ã€‚ä¸æ™ºèƒ½å®¶å±…ç»“åˆä¹‹åï¼Œå®ƒæ›´æ˜¯å¼•èµ·äº†è¡Œä¸šå·¨å¤´çš„æ³¨æ„ï¼Œè¢«è®¤ä¸ºæ˜¯å¾ˆæœ‰å‘å±•æ½œåŠ›çš„ç”¨æˆ·å…¥å£å’Œå¹³å°çº§äº§å“ã€‚</p><p>æˆ‘ä»¬å…ˆä¸è®ºæ™ºèƒ½éŸ³ç®±æœ€ç»ˆåˆ°åº•èƒ½ä¸èƒ½å‘å±•æˆæ™ºèƒ½å®¶å±…çš„å¹³å°çº§äº§å“ï¼Œè‡³å°‘è¿™æ³¢çƒ­æ½®å·²ç»æå¤§åœ°æ¨åŠ¨äº†ç›¸å…³æŠ€æœ¯çš„å‘å±•ï¼Œè€Œä¸”ç”¨æˆ·è¦†ç›–ç‡ä¹Ÿæœ‰äº†å¾ˆå¤§çš„æå‡ã€‚</p><p>è¿™ä¸€è®²æˆ‘å°±ä¸ºä½ ä»‹ç»ä¸€ä¸‹æ™ºèƒ½éŸ³ç®±çš„è¯­éŸ³æ§åˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œå¹¶ä¸”å¸¦ä½ åŠ¨æ‰‹å®Œæˆå¼€å‘è¿‡ç¨‹ï¼ˆå¦‚æœ‰éœ€è¦ï¼Œä½ å¯ä»¥æ ¹æ®<a href=\"https://shimo.im/sheets/D3VVPdwcYRhhQRXh/MODOC\">è¿™ä»½æ–‡æ¡£</a>è‡ªè¡Œé‡‡è´­ç›¸å…³ç¡¬ä»¶ï¼‰ã€‚</p><h2>æ™ºèƒ½éŸ³ç®±çš„æŠ€æœ¯æ¶æ„</h2><p>æ™ºèƒ½éŸ³ç®±ä¸»è¦æ¶‰åŠ<strong>æ‹¾éŸ³</strong>ã€<strong>å‰ç«¯ä¿¡å·å¤„ç†</strong>ã€<strong>è¯­éŸ³è¯†åˆ«</strong>ã€<strong>è‡ªç„¶è¯­è¨€å¤„ç†</strong>å’Œ<strong>è¯­éŸ³åˆæˆ</strong>ç­‰æŠ€æœ¯ï¼Œç°åœ¨ä¸€äº›äº§å“ç”šè‡³æä¾›äº†å£°çº¹è¯†åˆ«æŠ€æœ¯ã€‚</p><p>å½“ç„¶ï¼Œæ™ºèƒ½éŸ³ç®±æœ€é‡è¦çš„æ˜¯æä¾›å„ç§åŠŸèƒ½ï¼Œå®Œæˆä¸€äº›ä»»åŠ¡ï¼Œæ¯”å¦‚æ§åˆ¶ç”µç¯çš„å¼€å’Œå…³ï¼Œè¿™è¢«ç§°ä¸º<strong>æŠ€èƒ½</strong>ã€‚</p><p>æ•´ä½“çš„æŠ€æœ¯æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2a/f5/2a01c24619120c4c464d975bb0e8e4f5.jpg?wh=2700*1408\" alt=\"\"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šé€ä¸ªè®²è§£è¿™äº›æŠ€æœ¯ç»„æˆã€‚</p><h3>æ‹¾éŸ³</h3><p>æ‹¾éŸ³ï¼Œå°±æ˜¯é€šè¿‡<strong>éº¦å…‹é£</strong>è·å–ä½ çš„è¯­éŸ³ã€‚</p><p>æˆ‘ä»¬éƒ½ç”¨å¾®ä¿¡å‘é€è¿‡è¯­éŸ³æ¶ˆæ¯ï¼Œæ‰‹æœºå°±æ˜¯é€šè¿‡éº¦å…‹é£æ¥è·å–ä½ è¯´çš„è¯çš„ï¼Œè¿™ä¹ˆè¯´èµ·æ¥ï¼Œæ‹¾éŸ³å¥½åƒå¾ˆç®€å•ã€‚ä½†æ˜¯ï¼Œæ™ºèƒ½éŸ³ç®±åº”å¯¹çš„ç¯å¢ƒè¦æ›´å¤æ‚ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½åœ¨æ¯”è¾ƒè¿œçš„åœ°æ–¹ä¸‹è¾¾è¯­éŸ³æŒ‡ä»¤ã€‚</p><!-- [[[read_end]]] --><p>å› æ­¤ï¼Œæ™ºèƒ½éŸ³ç®±ä¸Šä¸€èˆ¬é‡‡ç”¨<strong>éº¦å…‹é£é˜µåˆ—</strong>ï¼ˆMic Arrayï¼‰ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§ä¸€å®šè§„åˆ™æ’åˆ—çš„å¤šä¸ªéº¦å…‹é£ï¼Œæ¯”å¦‚ä¸‹å›¾å±•ç¤ºçš„å°±æ˜¯<a href=\"https://zh.ifixit.com/Teardown/Amazon+Echo+Teardown/33953\">Amazon Echo</a>ç”±7ä¸ªéº¦å…‹é£ç»„æˆçš„é˜µåˆ—ï¼ˆç»¿è‰²åœ†åœˆéƒ¨åˆ†ï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/83/f0/831c5e67ddb3cbdeda86c496317b8df0.jpg?wh=2700*1308\" alt=\"\"></p><h3>å‰ç«¯è¯­éŸ³ä¿¡å·å¤„ç†</h3><p>åœ¨æ”¶é›†åˆ°å£°éŸ³ä¿¡å·åï¼Œè¿˜éœ€è¦è¿›è¡Œå‰ç«¯è¯­éŸ³ä¿¡å·å¤„ç†ã€‚åªæœ‰ç»è¿‡å¤„ç†ï¼Œæ™ºèƒ½éŸ³ç®±æ‰èƒ½è·å–åˆ°ç›¸å¯¹å¹²å‡€çš„è¯­éŸ³ä¿¡å·ï¼Œä¹Ÿæ‰èƒ½æé«˜åé¢çš„è¯­éŸ³è¯†åˆ«çš„å‡†ç¡®ç‡ã€‚</p><p>è¿™äº›å¤„ç†æŠ€æœ¯åŒ…æ‹¬å›å£°æ¶ˆé™¤ï¼ˆAcoustic Echo Cancellaction, AECï¼‰ã€å™ªéŸ³æŠ‘åˆ¶ï¼ˆNoise Suppressionï¼ŒNSï¼‰ã€è¯­éŸ³æ£€æµ‹ï¼ˆVoice Activity Detectionï¼ŒVADï¼‰ã€å£°æºå®šä½ï¼ˆDirection of Arrival estimationï¼ŒDOAï¼‰ã€æ³¢æŸæˆå‹ï¼ˆBeamformingï¼‰å’Œæ··å“æ¶ˆé™¤ï¼ˆSpeech Dereverberationï¼‰ç­‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/aa/71/aaffc6862eab6a9af9cb27ec6dacd971.jpg?wh=2700*1237\" alt=\"\"></p><h3>è¯­éŸ³å”¤é†’</h3><p>è¯­éŸ³å”¤é†’ï¼ˆKeyword Spottingï¼ŒKWSï¼‰ï¼Œå°±æ˜¯é€šè¿‡ç‰¹å®šçš„<strong>å”¤é†’è¯</strong>æ¥æ¿€æ´»æ™ºèƒ½éŸ³ç®±ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„è¯­éŸ³äº¤äº’ä»»åŠ¡ã€‚è¿™æ ·åšä¸€æ–¹é¢å¯ä»¥ä¿æŠ¤ç”¨æˆ·çš„éšç§ï¼Œå› ä¸ºåªæœ‰å”¤é†’åï¼ŒéŸ³ç®±æ‰æ”¶é›†å’Œè¯†åˆ«ç”¨æˆ·çš„è¯­éŸ³ä¿¡æ¯ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥ç®€åŒ–è¯­éŸ³çš„è¯†åˆ«å’Œç†è§£ï¼Œæ¯”å¦‚å°ç±³æ™ºèƒ½éŸ³ç®±çš„â€œå°çˆ±åŒå­¦â€å°±æ˜¯è¿™æ ·çš„å”¤é†’è¯ã€‚</p><h3>è¯­éŸ³è¯†åˆ«</h3><p>è¯­éŸ³è¯†åˆ«ï¼ˆAutomatic Speech Recognitionï¼ŒASRï¼‰ï¼Œä¸»è¦å®Œæˆçš„ä»»åŠ¡æ˜¯å°†è¯­éŸ³è½¬æ¢æˆæ–‡æœ¬ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸ºSTTï¼ˆSpeech to Textï¼‰ã€‚</p><h3>è‡ªç„¶è¯­è¨€ç†è§£</h3><p>è‡ªç„¶è¯­è¨€ç†è§£ï¼ˆNatural Language Understandingï¼ŒNLUï¼‰ï¼Œæ˜¯å¯¹è¯­éŸ³è¯†åˆ«ç”Ÿæˆçš„æ–‡æœ¬è¿›è¡Œå¤„ç†ï¼Œè¯†åˆ«ç”¨æˆ·çš„æ„å›¾ï¼Œå¹¶ç”Ÿäº§ç»“æ„åŒ–çš„æ•°æ®ã€‚</p><p>å½“ç„¶ï¼Œä»¥ç°åœ¨çš„äººå·¥æ™ºèƒ½å‘å±•æ°´å¹³æ¥çœ‹ï¼Œè‡ªç„¶è¯­è¨€ç†è§£è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å¸¸å‘ç°æ™ºèƒ½éŸ³ç®±ä¸å¤Ÿâ€œæ™ºèƒ½â€çš„åŸå› ã€‚</p><h3>æŠ€èƒ½</h3><p>æŠ€èƒ½ï¼ˆSkillsï¼‰ä¸€èˆ¬è¦å€ŸåŠ©åç«¯äº‘å¹³å°çš„å¼ºå¤§èƒ½åŠ›ï¼Œäº‘å¹³å°å¯ä»¥æä¾›çŸ¥è¯†å›¾è°±ã€å®¶å±…è®¾å¤‡è¿œç¨‹æ§åˆ¶å’ŒéŸ³ä¹ç­‰éŸ³é¢‘èµ„æºç­‰èƒ½åŠ›ã€‚</p><h3>è‡ªç„¶è¯­è¨€ç”Ÿæˆ</h3><p>è‡ªç„¶è¯­è¨€ç”Ÿæˆï¼ˆNatural Language Generationï¼ŒNLGï¼‰ï¼Œå°±æ˜¯å°†å„ç§æŠ€èƒ½çš„å“åº”ç»“æœç»„ç»‡æˆæ–‡æœ¬è¯­è¨€ã€‚æ¯”å¦‚å½“ä½ è¯¢é—®å¤©æ°”æ—¶ï¼Œæ ¹æ®è·å–çš„å¤©æ°”çŠ¶å†µå’Œæ¸©åº¦ç­‰ä¿¡æ¯ç”Ÿæˆâ€œåŒ—äº¬ä»Šå¤©æ™´ï¼Œæœ€é«˜æ¸©åº¦5Â°ï¼Œæœ€ä½æ¸©åº¦-6Â°â€è¿™æ ·çš„è¯­å¥ã€‚è‡ªç„¶è¯­è¨€ç”Ÿæˆå’Œè‡ªç„¶è¯­è¨€ç†è§£éƒ½å±äº<strong>è‡ªç„¶è¯­è¨€å¤„ç†</strong>ï¼ˆNatural Language Processingï¼ŒNLPï¼‰çš„èŒƒç•´ã€‚</p><h3>è¯­éŸ³åˆæˆ</h3><p>è¯­éŸ³åˆæˆï¼ˆSpeech Synthesisï¼‰ï¼Œå°±æ˜¯å°†è‡ªç„¶è¯­è¨€ç”Ÿæˆçš„æ–‡æœ¬è½¬æ¢ä¸ºè¯­éŸ³çš„å½¢å¼ï¼Œæä¾›ç»™æ™ºèƒ½éŸ³ç®±æ’­æ”¾å‡ºæ¥ï¼Œç»™äººçš„æ„Ÿè§‰å°±åƒå’ŒéŸ³ç®±åœ¨å¯¹è¯ã€‚å› æ­¤ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿå«åšTTSï¼ˆText to Speechï¼‰ã€‚</p><h2>æ™ºèƒ½éŸ³ç®±çš„å¼€å‘</h2><p>äº†è§£å®Œæ™ºèƒ½éŸ³ç®±çš„åŸºæœ¬æŠ€æœ¯æ„æˆï¼Œä¸‹é¢æˆ‘ä»¬å°±åŸºäºæ ‘è“æ´¾å¼€å‘ä¸€ä¸ªè‡ªå·±çš„ç®€æ˜“æ™ºèƒ½éŸ³ç®±å§ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘éœ€è¦è¯´æ˜ä¸€ä¸‹æ ‘è“æ´¾çš„ç³»ç»Ÿã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºåœ¨<a href=\"https://time.geekbang.org/column/article/320675\">ç¬¬15è®²</a>ä¸­ï¼Œæˆ‘ä»¬å®‰è£…äº†Gladys Assistantç³»ç»Ÿé•œåƒï¼Œè€Œè¿™ä¸ªç³»ç»ŸRaspbianæ˜¯åŸºäºDebian busterç‰ˆæœ¬çš„ï¼Œä¸€äº›è¯­éŸ³è¯†åˆ«å¼€æºåº“å¯¹äºbusterçš„æ”¯æŒå¹¶ä¸å¤Ÿå¥½ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ çš„æ ‘è“æ´¾æ˜¯Raspberry Pi 3ç³»åˆ—ï¼Œå¼ºçƒˆå»ºè®®ä½ æŠŠç³»ç»Ÿé•œåƒåˆ‡æ¢æˆ<strong>Debian stretch</strong>ç‰ˆæœ¬ã€‚é€šè¿‡<a href=\"https://downloads.raspberrypi.org/raspbian/images/raspbian-2019-04-09/\">è¿™ä¸ªé“¾æ¥</a>å°±å¯ä»¥ä¸‹è½½åŸºäºDebian stretchç‰ˆæœ¬çš„Raspbiané•œåƒæ–‡ä»¶å‹ç¼©åŒ…ï¼Œå®‰è£…è¿˜æ˜¯ä½¿ç”¨Etcherå·¥å…·ï¼Œä½ å¯ä»¥å›å¤´çœ‹ä¸€ä¸‹ç¬¬15è®²çš„ä»‹ç»ã€‚</p><p>è‡³äºæ ‘è“æ´¾Raspberry Pi 4ç³»åˆ—ï¼Œå› ä¸ºå®˜æ–¹ç³»ç»ŸRaspbianåªæœ‰busterç‰ˆæœ¬æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯ç»§ç»­åŸºäºç¬¬15è®²çš„ç³»ç»Ÿå¼€å‘ã€‚</p><h3>éº¦å…‹é£é˜µåˆ—</h3><p>éº¦å…‹é£é˜µåˆ—æˆ‘ä½¿ç”¨çš„æ˜¯<strong>ReSpeaker 2-Mics Pi HAT</strong>ï¼Œå®ƒçš„2ä¸ªéº¦å…‹é£åˆ†å¸ƒåœ¨æ¨¡ç»„çš„ä¸¤è¾¹ã€‚æˆ‘ä»¬ç°åœ¨æ¥é…ç½®ä¸€ä¸‹ï¼Œè®©å®ƒå¯ä»¥åœ¨æ ‘è“æ´¾ä¸Šæ­£å¸¸å·¥ä½œã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å®‰è£…å®ƒçš„é©±åŠ¨ç¨‹åºã€‚é¦–å…ˆï¼Œä½ æœ€å¥½åˆ‡æ¢ä¸€ä¸‹æ ‘è“æ´¾çš„è½¯ä»¶å®‰è£…æºï¼Œå°†å®ƒåˆ‡æ¢åˆ°å›½å†…çš„è…¾è®¯äº‘å®‰è£…æºï¼Œè¿™æ ·ä¸‹è½½å®‰è£…çš„é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚è¿è¡Œä¸‹é¢çš„å‘½ä»¤ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><pre><code>$ sudo vim /etc/apt/sources.list\n</code></pre><p>å°†æ–‡ä»¶ä¿®æ”¹ä¸ºä¸‹é¢çš„å†…å®¹ï¼š</p><pre><code>deb https://mirrors.cloud.tencent.com/raspbian/raspbian/ buster main contrib non-free rpi\n# Uncomment line below then 'apt-get update' to enable 'apt-get source'\ndeb-src https://mirrors.cloud.tencent.com/raspbian/raspbian/ buster main contrib non-free rpi\n</code></pre><p>ä¿®æ”¹å¦ä¸€ä¸ªè½¯ä»¶å®‰è£…æºçš„é…ç½®æ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>$ sudo vim /etc/apt/sources.list.d/raspi.list \n</code></pre><p>ä¿®æ”¹åçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code>deb https://mirrors.cloud.tencent.com/raspberrypi/ buster main\n# Uncomment line below then 'apt-get update' to enable 'apt-get source'\ndeb-src https://mirrors.cloud.tencent.com/raspberrypi/ buster main\n</code></pre><p>ç„¶åï¼Œä½ éœ€è¦è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ›´æ–°å®‰è£…æºï¼š</p><pre><code>$ sudo apt-get clean all\n$ sudo apt-get update\n</code></pre><p>ç°åœ¨ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢å‘½ä»¤å®‰è£…éº¦å…‹é£é˜µåˆ—çš„é©±åŠ¨ç¨‹åºã€‚å› ä¸ºè¿™ä¸ªé©±åŠ¨ä¾èµ–çš„wm8960 ç¼–è§£ç å™¨æ²¡æœ‰åŒ…å«åœ¨æ ‘è“æ´¾ç³»ç»Ÿçš„å†…æ ¸é‡Œé¢ï¼Œéœ€è¦é‡æ–°åŠ è½½å†…æ ¸ï¼Œç¼–è¯‘é©±åŠ¨ï¼Œæ‰€ä»¥æ•´ä¸ªè¿‡ç¨‹æ¯”è¾ƒä¹…ã€‚åœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥å…ˆé˜…è¯»è¿™ä¸€è®²çš„å…¶ä»–éƒ¨åˆ†ã€‚</p><pre><code>$ sudo apt-get install git\n$ git clone --depth=1 https://github.com/respeaker/seeed-voicecard\n$ cd seeed-voicecard\n$ sudo ./install.sh\n$ sudo reboot\n</code></pre><p>æ ‘è“æ´¾é‡å¯ä¹‹åï¼Œä½ å¯ä»¥åœ¨æ ‘è“æ´¾ç»ˆç«¯è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹éŸ³é¢‘çš„è¾“å…¥å’Œè¾“å‡ºè®¾å¤‡æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p><pre><code>$ arecord -l\n$ aplay -l\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/ef/54/ef1645e03ef2ba2e2c78edf6a9804e54.png?wh=1022*692\" alt=\"\"></p><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæˆ‘ä»¬å°±å¯ä»¥æµ‹è¯•å½•éŸ³å’Œæ’­æ”¾åŠŸèƒ½äº†ã€‚åœ¨ReSpeaker 2-Mics Pi HATçš„è€³æœºæ’å£ä¸Šæ’å…¥è€³æœºæˆ–è€…æ‰¬å£°å™¨ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¹¶è¯´å‡ å¥è¯ã€‚</p><pre><code>$ arecord -d 5 test.wav\n$ aplay test.wav \n</code></pre><p>å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è½¯ä»¶<strong>AlsaMixer</strong>ï¼ˆå‘½ä»¤alsamixerï¼‰æ¥é…ç½®å£°éŸ³è®¾ç½®å’Œè°ƒæ•´éŸ³é‡ï¼Œå·¦ã€å³ç®­å¤´é”®ç”¨äºé€‰æ‹©é€šé“æˆ–è®¾å¤‡ï¼Œå‘ä¸Šã€å‘ä¸‹ç®­å¤´æ§åˆ¶å½“å‰æ‰€é€‰è®¾å¤‡çš„éŸ³é‡ã€‚é€€å‡ºç¨‹åºä½¿ç”¨ALT + Qï¼Œæˆ–è€…æŒ‰Escé”®ã€‚</p><p>ä¸ºäº†ç®€åŒ–å¼€å‘ï¼Œä¹Ÿè€ƒè™‘åˆ°éº¦å…‹é£ç¡¬ä»¶çš„é™åˆ¶ï¼Œæˆ‘ä»¬è¿™é‡Œå°±å…ˆä¸å…³æ³¨å‰ç«¯è¯­éŸ³ä¿¡å·å¤„ç†çš„ç›¸å…³å¼€å‘äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç›´æ¥æ¥åˆ°å®ç°è¯­éŸ³å”¤é†’çš„ç¯èŠ‚ã€‚</p><h3>è¯­éŸ³å”¤é†’</h3><p>ä¸ºäº†å®ç°è¯­éŸ³å”¤é†’ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ä¸ªè½»é‡çº§çš„ã€å¯ä»¥åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œçš„å”¤é†’è¯ç›‘æµ‹å™¨è½¯ä»¶ã€‚</p><p>ä½ å¯èƒ½é¦–å…ˆæƒ³åˆ°çš„æ˜¯<strong>Snowboy</strong>ï¼Œæ²¡é”™ï¼Œå®ƒç¡®å®æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„å·¥å…·ã€‚ä¸è¿‡ï¼ŒSnowboyå›¢é˜Ÿåœ¨2020å¹´åˆçš„æ—¶å€™å®£å¸ƒï¼Œ2020å¹´12æœˆ31æ—¥ä¼šåœæ­¢æä¾›æœåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆã€‚</p><p>æˆ‘é€‰æ‹©çš„æ˜¯<a href=\"https://github.com/MycroftAI/mycroft-precise\">Mycroft Precise</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäºRNNç¥ç»ç½‘ç»œçš„è¯­éŸ³å”¤é†’å·¥å…·ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æ ‘è“æ´¾å®‰è£…Mycroft Preciseã€‚å› ä¸ºéœ€è¦è®­ç»ƒå”¤é†’è¯æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦åŸºäºæºä»£ç æ¥ç¼–è¯‘ã€å®‰è£…ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡gitå‘½ä»¤æŠŠMycroft Preciseçš„æºä»£ç ä¸‹è½½åˆ°æ ‘è“æ´¾çš„/home/piç›®å½•ï¼š</p><pre><code>$ cd ~\n$ git clone https://github.com/mycroftai/mycroft-precise\n$ cd mycroft-precise\n</code></pre><p>åœ¨å®‰è£…ä¹‹å‰ï¼ŒæŠŠpypiçš„å®‰è£…æºä¿®æ”¹åˆ°æ¸…åæ•°æ®æºï¼Œå¯ä»¥è·å¾—æ›´å¿«çš„ä¸‹è½½é€Ÿåº¦ã€‚æˆ‘ä»¬æ‰“å¼€ç›®å½•ä¸­çš„setup.shæ–‡ä»¶ï¼š</p><pre><code>$ vim setup.sh\n</code></pre><p>å°†æ–‡ä»¶ä¸­çš„è¿™è¡Œå†…å®¹ï¼š</p><pre><code>extra-index-url=https://www.piwheels.org/simple\n</code></pre><p>æ›¿æ¢æˆä¸‹é¢çš„å†…å®¹ï¼š</p><pre><code>index-url=https://pypi.tuna.tsinghua.edu.cn/simple\nextra-index-url=https://www.piwheels.org/simple\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬è¿è¡Œå®ƒè‡ªå¸¦çš„å®‰è£…è„šæœ¬ï¼Œå¼€å§‹ç¼–è¯‘å’Œå®‰è£…ã€‚ä¸­é—´å¦‚æœæ‰§è¡Œä¸­æ–­ï¼Œå¯ä»¥é‡æ–°æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œç»§ç»­å®‰è£…è¿‡ç¨‹ã€‚ï¼ˆæç¤ºï¼šæœ‰äº›ARMå¹³å°çš„åº“åªæœ‰piwheelsä¸Šæœ‰ï¼Œæ‰€ä»¥è¿™äº›åº“å®‰è£…æ—¶é€Ÿåº¦è¿˜æ˜¯å¾ˆæ…¢ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”µè„‘ä¸Šä½¿ç”¨ä¸‹è½½å·¥å…·è·å–è¿™ä¸ªæ¨¡å—çš„å®‰è£…æ–‡ä»¶ï¼Œç„¶åä¸Šä¼ åˆ°æ ‘è“æ´¾ä¸Šï¼Œæ‰‹åŠ¨å®‰è£…ã€‚ï¼‰</p><pre><code>$ ./setup.sh\n</code></pre><p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å¼€å§‹ä½¿ç”¨Mycroft Preciseæ¥è®­ç»ƒä¸€ä¸ªå”¤é†’è¯æ¨¡å‹ï¼Œå”¤é†’è¯å¯ä»¥æ ¹æ®å–œå¥½æ¥é€‰æ‹©ï¼Œæ¯”å¦‚â€œæå®¢æ—¶é—´â€ã€‚</p><p>æˆ‘ä»¬éœ€è¦å…ˆæ¿€æ´»Pythonçš„è™šæ‹Ÿç¯å¢ƒï¼Œå› ä¸ºMycroft Preciseåœ¨å®‰è£…è¿‡ç¨‹ä¸­åˆ›å»ºäº†è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚</p><pre><code>$ source .venv/bin/activate\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡å·¥å…·precise-collectæ¥æ”¶é›†è¯­éŸ³æ¨¡å‹è®­ç»ƒçš„å£°éŸ³ç´ æï¼Œè¿è¡Œåï¼Œæ ¹æ®æç¤ºå½•åˆ¶12æ®µå£°éŸ³ã€‚</p><pre><code>$ precise-collect\nAudio name (Ex. recording-##): geektime.##\n\nPress space to record (esc to exit)...\nRecording...\nSaved as geektime-00.wav\nPress space to record (esc to exit)...\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›å£°éŸ³éšæœºåˆ†ä¸ºä¸¤ä»½ï¼Œä¸€ä»½æ˜¯è®­ç»ƒæ ·æœ¬ï¼ŒåŒ…æ‹¬8ä¸ªå£°éŸ³æ–‡ä»¶ï¼Œå¦ä¸€ä»½æ˜¯æµ‹è¯•æ ·æœ¬ï¼ŒåŒ…æ‹¬4ä¸ªå£°éŸ³æ–‡ä»¶ï¼Œå¹¶ä¸”æŠŠè¿™ä¸¤ä»½æ ·æœ¬åˆ†åˆ«æ”¾åˆ°geektime/wake-word/å’Œ/geektime/test/wake-word/è¿™ä¸¤ä¸ªç›®å½•ä¸‹é¢ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œç”Ÿæˆç¥ç»ç½‘ç»œæ¨¡å‹geektime.netï¼š</p><pre><code>$ precise-train -e 60 geektime.net geektime/\n</code></pre><p>æœ€åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†geektime.netçš„æ¨¡å‹æ ¼å¼åšä¸€ä¸‹è½¬æ¢ï¼Œå°†å®ƒä»Kerasæ¨¡å‹æ ¼å¼æ”¹ä¸ºTensorFlowæ¨¡å‹æ ¼å¼ï¼Œå› ä¸ºTensorFlowæ¨¡å‹æ›´åŠ é€šç”¨ã€‚</p><pre><code>$ precise-convert geektime.net\n</code></pre><p>æ‰§è¡Œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼š</p><ol>\n<li>geektime.pbï¼ŒTensorFlowæ¨¡å‹æ–‡ä»¶</li>\n<li>geektime.pb.paramsï¼ŒåŒ…å«Mycroft Preciseåœ¨å¤„ç†éŸ³é¢‘æ—¶éœ€è¦çš„ä¸€äº›å‚æ•°ä¿¡æ¯ã€‚</li>\n</ol><p>å½“ç„¶ï¼Œä¸ºäº†æé«˜æ¨¡å‹çš„å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨precise-train-incrementalå·¥å…·æ¥å¢åŠ è´Ÿæ ·æœ¬ï¼Œé‡æ–°è®­ç»ƒåˆšæ‰çš„æ¨¡å‹ã€‚å¦‚æœç¯å¢ƒå¤æ‚çš„è¯ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä¸€æ®µä»£ç æ¥æµ‹è¯•è¿™ä¸ªå”¤é†’è¯æ¨¡å‹ã€‚ä¸è¿‡ï¼Œå› ä¸ºportaudioè¿™ä¸ªåº“åœ¨æ ‘è“æ´¾ä¸Šè¿è¡Œæœ‰é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä¿®å¤ä¸€ä¸‹portaudioåº“ã€‚ä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>$ sudo apt-get remove libportaudio2\n$ sudo apt-get install libasound2-dev\n$ git clone -b alsapatch https://github.com/gglockner/portaudio\n$ cd portaudio\n$ ./configure &amp;&amp; make\n$ sudo make install\n$ sudo ldconfig\n</code></pre><p>æµ‹è¯•ç¨‹åºçš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code># Fileï¼škwsdemo.py\n#!/usr/bin/env python3\n\nfrom precise_runner import PreciseEngine, PreciseRunner\n\nengine = PreciseEngine('precise-engine/precise-engine', 'geektime.pb')\nrunner = PreciseRunner(engine, on_activation=lambda: print('hello'))\nrunner.start()\n\n# Sleep forever\nfrom time import sleep\nwhile True:\n    sleep(10)\n</code></pre><p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠkwsdemo.pyæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸¤ä¸ªgeektime.pbæ¨¡å‹ç›¸å…³çš„æ–‡ä»¶ï¼Œéƒ½ä¸Šä¼ åˆ°æ ‘è“æ´¾çš„Mycroft Preciseç›®å½•ä¸‹ï¼Œç„¶åè¿è¡Œkwsdemo.pyæ–‡ä»¶ï¼Œè¯´å‡ºâ€œæå®¢æ—¶é—´â€å‡ ä¸ªå­—ï¼Œå°±ä¼šçœ‹åˆ°ç»ˆç«¯æ˜¾ç¤ºå‡ºâ€œhelloâ€è¿™ä¸ªå•è¯ã€‚</p><h3>è¯­éŸ³è¯†åˆ«</h3><p>å¯¹äºè¯­éŸ³è¯†åˆ«ï¼Œæˆ‘ä»¬ç›´æ¥é‡‡ç”¨è…¾è®¯äº‘æä¾›çš„è¯­éŸ³è¯†åˆ«SDKæ¥å®Œæˆï¼ˆä½ éœ€è¦æå‰åœ¨è…¾è®¯äº‘æ§åˆ¶å°å¼€é€šè¿™ä¸ªæœåŠ¡ï¼‰ã€‚å®ƒä¼šå°†è¯­éŸ³å‘é€åˆ°äº‘ç«¯ï¼Œç”±äº‘ç«¯æœåŠ¡å™¨è®¡ç®—å‡ºæ–‡æœ¬ä¿¡æ¯ã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤æ¥å®‰è£…ï¼š</p><pre><code>$ pip3 install tencentcloud-sdk-python\n</code></pre><p>åœ¨å¼€å§‹ä½¿ç”¨ä¹‹å‰ï¼Œä½ éœ€è¦è®¿é—®<a href=\"https://console.cloud.tencent.com/cam/capi\">è¿™ä¸ªé“¾æ¥</a>åˆ›å»ºä¸€ä¸ªå¯†é’¥ï¼Œç„¶åè®°å½•ä¸‹SecretIdå’ŒSecretKeyçš„ä¿¡æ¯ã€‚</p><p>ä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ï¼Œæ¥å®Œæˆä¸€ä¸ªå½•éŸ³æ–‡ä»¶çš„è¯†åˆ«ã€‚</p><pre><code>from tencentcloud.common import credential\nfrom tencentcloud.common.profile.client_profile import ClientProfile\nfrom tencentcloud.common.profile.http_profile import HttpProfile\nfrom tencentcloud.common.exception.tencent_cloud_sdk_exception import TencentCloudSDKException \nfrom tencentcloud.asr.v20190614 import asr_client, models \nimport base64\nimport io \nimport sys \n\nSECRET_ID = &quot;ä½ çš„Secret ID&quot;\nSECRET_KEY = &quot;ä½ çš„Secret Key&quot;\n\ntry: \n    cred = credential.Credential(SECRET_ID, SECRET_KEY) \n    httpProfile = HttpProfile()\n    httpProfile.endpoint = &quot;asr.tencentcloudapi.com&quot;\n    clientProfile = ClientProfile()\n    clientProfile.httpProfile = httpProfile\n    clientProfile.signMethod = &quot;TC3-HMAC-SHA256&quot;  \n    client = asr_client.AsrClient(cred, &quot;ap-beijing&quot;, clientProfile) \n    #è¯»å–æ–‡ä»¶ä»¥åŠ base64\n    with open('./geektime-00.wav', &quot;rb&quot;) as f:\n        if sys.version_info[0] == 2:\n            content = base64.b64encode(f.read())\n        else:\n            content = base64.b64encode(f.read()).decode('utf-8')\n        f.close()\n    #å‘é€è¯·æ±‚\n    req = models.SentenceRecognitionRequest()\n    params = {&quot;ProjectId&quot;:0,&quot;SubServiceType&quot;:2,&quot;SourceType&quot;:1,&quot;UsrAudioKey&quot;:&quot;sessionid-geektime&quot;}\n    req._deserialize(params)\n    req.DataLen = len(content)\n    req.Data = content\n    req.EngSerViceType = &quot;16k_zh&quot;\n    req.VoiceFormat = &quot;wav&quot;\n    resp = client.SentenceRecognition(req) \n    print(resp.to_json_string()) \n\nexcept TencentCloudSDKException as err: \n    print(err)\n</code></pre><h3>è¯­éŸ³åˆæˆ</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘æ¥ä»‹ç»ä¸€ä¸‹è¯­éŸ³åˆæˆã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œåˆšæ‰ä»‹ç»æŠ€æœ¯æ¶æ„çš„æ—¶å€™ï¼Œä¸æ˜¯è¿˜è®²äº†è‡ªç„¶è¯­è¨€ç†è§£ã€æŠ€èƒ½å’Œè‡ªç„¶è¯­è¨€ç”Ÿæˆå—ï¼Ÿè¿™é‡Œæ€ä¹ˆè·³è¿‡å»äº†å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œå› ä¸ºæˆ‘ä»¬çš„ä»»åŠ¡å¾ˆç®€å•ï¼Œåªéœ€è¦æŸ¥è¯¢è¯­éŸ³è¯†åˆ«çš„æ–‡æœ¬ä¸­æ˜¯å¦æœ‰â€œå¼€â€ã€â€œç¯â€ï¼Œå’Œâ€œå…³â€ã€â€œç¯â€å°±å¯ä»¥å®Œæˆåˆ¤æ–­ï¼Œæ‰€ä»¥è‡ªç„¶è¯­è¨€ç†è§£ç›´æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…å³å¯ã€‚</p><p>å…¶æ¬¡ï¼Œæˆ‘ä»¬è¦å®ç°æ§åˆ¶æ™ºèƒ½ç”µç¯ï¼Œè¿™ä¸ªæŠ€èƒ½æˆ‘åœ¨åé¢ä¼šä»‹ç»ã€‚</p><p>æœ€åï¼Œæ™ºèƒ½éŸ³ç®±åªéœ€è¦åé¦ˆæ‰§è¡Œå¼€å…³ç¯çš„ç»“æœå°±å¯ä»¥ï¼Œæ¯”å¦‚â€œæˆ‘å·²ç»æŠŠç¯æ‰“å¼€äº†â€æˆ–è€…â€œæˆ‘å·²ç»æŠŠç¯å…³äº†â€ï¼Œè‡ªç„¶è¯­è¨€ç”Ÿæˆçš„éƒ¨åˆ†æŒ‰ç…§å›ºå®šçš„æ–‡æœ¬å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦è€ƒè™‘åŠ¨æ€ç”Ÿæˆçš„é—®é¢˜ã€‚</p><p>è¯­éŸ³åˆæˆï¼Œå°±æ˜¯æˆ‘ä»¬å¸Œæœ›æŠŠç±»ä¼¼â€œæˆ‘å·²ç»æŠŠç¯å…³äº†â€è¿™æ ·çš„æ–‡æœ¬ä¿¡æ¯ï¼Œè½¬æ¢ä¸ºéŸ³é¢‘ï¼Œä¾¿äºæ™ºèƒ½éŸ³ç®±æ’­æ”¾å‡ºæ¥ã€‚ä½ å¯ä»¥åŸºäºç¦»çº¿çš„TTSå¼•æ“æ¥å®ç°ï¼Œæ¯”å¦‚<a href=\"https://github.com/junzew/HanTTS\">HanTTS</a>è¿™ä¸ªé¡¹ç›®ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è…¾è®¯äº‘çš„è¯­éŸ³åˆæˆæœåŠ¡ï¼ˆä½ éœ€è¦æå‰åœ¨è…¾è®¯äº‘æ§åˆ¶å°å¼€é€šè¿™ä¸ªæœåŠ¡ï¼‰ã€‚ä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>import json\nimport base64\n\nfrom tencentcloud.common import credential\nfrom tencentcloud.common.profile.client_profile import ClientProfile\nfrom tencentcloud.common.profile.http_profile import HttpProfile\nfrom tencentcloud.common.exception.tencent_cloud_sdk_exception import TencentCloudSDKException\nfrom tencentcloud.tts.v20190823 import tts_client, models\n\nSECRET_ID = &quot;ä½ çš„Secret ID&quot;\nSECRET_KEY = &quot;ä½ çš„Secret Key&quot;\n\ntry: \n    cred = credential.Credential(SECRET_ID, SECRET_KEY) \n    httpProfile = HttpProfile()\n    httpProfile.endpoint = &quot;tts.tencentcloudapi.com&quot;\n\n    clientProfile = ClientProfile()\n    clientProfile.httpProfile = httpProfile\n    client = tts_client.TtsClient(cred, &quot;ap-beijing&quot;, clientProfile) \n\n    req = models.TextToVoiceRequest()\n    params = {\n        &quot;Text&quot;: &quot;æˆ‘å·²ç»æŠŠç¯å…³äº†&quot;,\n        &quot;SessionId&quot;: &quot;sessionid-geektime&quot;,\n        &quot;ModelType&quot;: 1,\n        &quot;ProjectId&quot;: 0,\n        &quot;VoiceType&quot;: 1002\n    }\n    req.from_json_string(json.dumps(params))\n\n    resp = client.TextToVoice(req) \n    print(resp.to_json_string()) \n\n    if resp.Audio is not None:\n        audio = resp.Audio\n        data = base64.b64decode(audio)\n        wav_file = open(&quot;temp.wav&quot;, &quot;wb&quot;)\n        wav_file.write(data)\n        wav_file.close()\n\nexcept TencentCloudSDKException as err: \n    print(err)\n</code></pre><h2>é€šè¿‡æ™ºèƒ½éŸ³ç®±æ§åˆ¶ç”µç¯</h2><p>ä¸ºäº†å®ç°æ§åˆ¶æ™ºèƒ½ç”µç¯çš„ç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ç‰©è”ç½‘å¹³å°æä¾›çš„å¼€å‘æ¥å£ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¿›å…¥ç‰©è”ç½‘å¼€å‘å¹³å°ï¼Œé€‰æ‹©â€œæ™ºèƒ½å®¶å±…â€é¡¹ç›®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/77/49/77f96b642b6d5a077865b40904c59a49.png?wh=2066*462\" alt=\"\"></p><p>ç„¶åï¼Œç‚¹å‡»å·¦ä¾§çš„â€œåº”ç”¨å¼€å‘â€ï¼Œè¿›å…¥æ–°å»ºåº”ç”¨çš„ç•Œé¢ï¼Œç‚¹å‡»â€œæ–°å»ºåº”ç”¨â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/26/d3/2630643ca6202249d3e4e7ba52e226d3.png?wh=1448*444\" alt=\"\"></p><p>å®Œæˆåï¼Œç‚¹å‡»åº”ç”¨åˆ—è¡¨é‡Œé¢çš„åº”ç”¨åç§°ï¼Œè¿›å…¥åº”ç”¨çš„è¯¦æƒ…é¡µé¢ã€‚ä½ å¯ä»¥çœ‹åˆ°åº”ç”¨çš„SecretIdå’ŒSecretKeyä¿¡æ¯ã€‚è¿™é‡Œï¼Œä½ éœ€è¦å°†ä¸‹é¢â€œå…³è”äº§å“â€ä¸­çš„æ™ºèƒ½ç”µç¯å‹¾é€‰ä¸Šã€‚åªæœ‰å»ºç«‹å…³è”ï¼Œåº”ç”¨æ‰å¯ä»¥æ§åˆ¶è¿™ä¸ªè®¾å¤‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6f/a2/6f93dbacdaa2d6573f6a183905d44da2.png?wh=2232*612\" alt=\"\"></p><p>å…·ä½“ä»£ç å¯ä»¥å‚è€ƒè…¾è®¯æä¾›çš„å¼€æºå®ç°ï¼ŒåŒ…æ‹¬<a href=\"https://github.com/tencentyun/iot-link-ios/tree/master/Source/LinkApp\">iOS</a>ã€<a href=\"https://github.com/tencentyun/iot-link-android/tree/master/app\">Android</a>å’Œ<a href=\"https://github.com/tencentyun/qcloud-iotexplorer-appdev-miniprogram-sdk-demo\">å°ç¨‹åº</a>ã€‚</p><p>ä¸è¿‡ï¼Œè¿™ç§æ–¹å¼éœ€è¦ç”¨æˆ·è´¦å·çš„ç™»å½•è®¤è¯ï¼Œåœ¨æ ‘è“æ´¾ä¸Šä¸å¤ªæ–¹ä¾¿ã€‚è¿˜æœ‰ä¸€ä¸ªæ–¹å¼å°±æ˜¯åŸºäºç‰©è”ç½‘å¼€å‘å¹³å°æä¾›çš„é€šç”¨APIæ¥å£ã€‚å…¶ä¸­çš„â€œ<a href=\"https://cloud.tencent.com/document/product/1081/34973\">è®¾å¤‡è¿œç¨‹æ§åˆ¶</a>â€æ¥å£å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><p>å…·ä½“çš„æ§åˆ¶æ–¹æ³•ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ï¼ˆæ³¨æ„ï¼Œç›®å‰åªæ”¯æŒap-guangzhouåŒºåŸŸï¼‰ã€‚</p><pre><code>import json\nfrom led2.main import PRODUCT_ID\nfrom tencentcloud.common import credential\nfrom tencentcloud.common.profile.client_profile import ClientProfile\nfrom tencentcloud.common.profile.http_profile import HttpProfile\nfrom tencentcloud.common.exception.tencent_cloud_sdk_exception import TencentCloudSDKException\nfrom tencentcloud.iotexplorer.v20190423 import iotexplorer_client, models\n\nSECRET_ID = &quot;ä½ çš„Secret ID&quot;\nSECRET_KEY = &quot;ä½ çš„Secret Key&quot;\nPRODUCT_ID = &quot;ä½ çš„ProductID&quot;\n\ndef Light_control(state):\n    try: \n        cred = credential.Credential(SECRET_ID, SECRET_KEY) \n        httpProfile = HttpProfile()\n        httpProfile.endpoint = &quot;iotexplorer.tencentcloudapi.com&quot;\n\n        clientProfile = ClientProfile()\n        clientProfile.httpProfile = httpProfile\n        client = iotexplorer_client.IotexplorerClient(cred, &quot;ap-guangzhou&quot;, clientProfile) \n\n        req = models.ControlDeviceDataRequest()\n        data = {\n            &quot;power_switch&quot;: state\n        }\n        data_str = json.dumps(data)\n\n        params = {\n            &quot;DeviceName&quot;: &quot;Led_1&quot;,\n            &quot;ProductId&quot;: PRODUCT_ID,\n            &quot;Data&quot;: data_str\n        }\n        req.from_json_string(json.dumps(params))\n\n        resp = client.ControlDeviceData(req) \n        print(resp.to_json_string()) \n\n    except TencentCloudSDKException as err: \n        print(err) \n\nLight_control(0)\n</code></pre><h2>å°ç»“</h2><p>æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»‹ç»äº†æ™ºèƒ½éŸ³ç®±çš„æŠ€æœ¯æ¶æ„ï¼Œä»¥åŠåœ¨æ ‘è“æ´¾ä¸Šç”¨äºå®ç°æ™ºèƒ½éŸ³ç®±çš„ä¸€äº›å¯é€‰çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå¹¶ä¸”å¸¦ä½ å®ç°äº†è¯­éŸ³æ§åˆ¶æ™ºèƒ½ç”µç¯çš„ç›®çš„ã€‚ä½ éœ€è¦é‡ç‚¹å…³æ³¨çš„çŸ¥è¯†æœ‰ï¼š</p><ol>\n<li>æ™ºèƒ½éŸ³ç®±çš„å®ç°ï¼Œéœ€è¦å‰ç«¯éŸ³ç®±æœ¬ä½“å’Œåç«¯äº‘å¹³å°ä¸Šä¸€ç³»åˆ—æŠ€æœ¯çš„æ”¯æŒã€‚è¿™äº›æŠ€æœ¯æœ‰å‰ç«¯çš„æ‹¾éŸ³ã€è¯­éŸ³ä¿¡å·å¤„ç†ã€è¯­éŸ³å”¤é†’å’Œæ’­éŸ³ï¼Œä»¥åŠåç«¯çš„è¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€ç†è§£ã€æŠ€èƒ½ã€è‡ªç„¶è¯­è¨€ç”Ÿæˆå’Œè¯­éŸ³åˆæˆã€‚</li>\n<li>åœ¨æ ‘è“æ´¾çš„å®ç°ä¸Šï¼Œæ‹¾éŸ³å¯ä»¥é€‰æ‹©ä½¿ç”¨éº¦å…‹é£é˜µåˆ—ï¼Œå› ä¸ºåŸºäºéº¦å…‹é£é˜µåˆ—å¯ä»¥æ›´å¥½åœ°å®ç°å‰ç«¯è¯­éŸ³ä¿¡å·å¤„ç†ï¼Œæ¯”å¦‚å£°æºå®šä½å’Œæ³¢æŸæˆå‹ç­‰ã€‚</li>\n<li>è¯­è¨€å”¤é†’éœ€è¦åœ¨æ™ºèƒ½éŸ³ç®±æœ¬ä½“ä¸Šå®ç°ï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›è½»é‡çº§çš„è¯†åˆ«å¼•æ“å’Œè®­ç»ƒå¥½çš„å”¤é†’è¯æ¨¡å‹ã€‚ä¹‹å‰æ¯”è¾ƒæµè¡Œçš„Snowboyå°†è¦åœæ­¢æœåŠ¡ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©äº†Mycroft Preciseè¿™ä¸ªå¼€æºæ–¹æ¡ˆã€‚</li>\n<li>è¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€ç†è§£ã€æŠ€èƒ½ã€è‡ªç„¶è¯­è¨€ç”Ÿæˆå’Œè¯­éŸ³åˆæˆç­‰ä»»åŠ¡é€‚åˆåŸºäºäº‘å¹³å°çš„èƒ½åŠ›æ¥å®ç°ï¼Œå› ä¸ºäº‘å¹³å°çš„è®¡ç®—èƒ½åŠ›æ›´å¼ºï¼Œæœ‰æ›´å¥½çš„æ€§èƒ½å’Œå‡†ç¡®åº¦ã€‚</li>\n</ol><p>æ™ºèƒ½éŸ³ç®±çš„æŠ€æœ¯ä¹Ÿä¸€ç›´åœ¨å‘å±•ï¼Œæ¯”å¦‚ç°åœ¨è¶Šæ¥è¶Šå¤šçš„æ™ºèƒ½éŸ³ç®±å¼€å§‹é…å¤‡å±å¹•å’Œæ‘„åƒå¤´ï¼Œè¿™ä¸ºæ™ºèƒ½éŸ³ç®±å¼•å…¥äº†å£°éŸ³ã€UIå’Œè§†è§‰ç­‰å¤šæ¨¡æ€çš„äº¤äº’æ–¹å¼ï¼Œç›¸åº”åœ°ï¼Œè¿™ä¹Ÿç»™å£°çº¹è¯†åˆ«ã€äººè„¸è¯†åˆ«å’ŒåŠ¨ä½œè¯†åˆ«ç­‰æŠ€æœ¯å¸¦æ¥äº†æ–°çš„åº”ç”¨åœºæ™¯ã€‚æˆ‘ç›¸ä¿¡æ™ºèƒ½éŸ³ç®±æœªæ¥çš„äº§å“å½¢æ€å’ŒåŠŸèƒ½è¿˜ä¼šä¸æ–­åœ°è¿›åŒ–å’Œå‘å±•ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ç‰©è”ç½‘å¹³å°æä¾›çš„APIæ¥å£æ¥æ§åˆ¶æ™ºèƒ½ç”µç¯çš„ã€‚é™¤äº†è¿™ç§æ–¹å¼ï¼Œä½ è¿˜èƒ½æƒ³åˆ°å…¶ä»–çš„æ–¹æ³•æ¥è¿œç¨‹æ§åˆ¶æ™ºèƒ½ç”µç¯å—ï¼Ÿä½ èƒ½å®ç°ä¸€ä¸ªè™šæ‹Ÿçš„è”ç½‘å¼€å…³ï¼ŒåŸºäºåœºæ™¯è”åŠ¨æ¥æ§åˆ¶æ™ºèƒ½ç”µç¯çš„å¼€å’Œå…³å—ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ æ€è€ƒçš„ç»“æœï¼Œä¹Ÿæ¬¢è¿ä½ å°†è¿™ä¸€è®²åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œå¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ã€‚</p>","comments":[{"had_liked":false,"id":274192,"user_name":"ä¿¡å¤§æ·å®‰","can_delete":false,"product_type":"c1","uid":1748552,"ip_address":"","ucode":"096797EEB7A14E","user_header":"","comment_is_top":true,"comment_ctime":1610896609,"is_pvip":false,"replies":[{"id":"100785","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1612589596,"ip_address":"","comment_id":274192,"utype":1}],"discussion_count":1,"race_medal":0,"score":"9.2233720556454994e+18","product_id":100063601,"comment_content":"è…¾è®¯é•œåƒç»å¸¸ä¼šå‡ºç°åŒæ­¥å¤±è´¥çš„é—®é¢˜ï¼Œå¦‚æœå‡ºç°ä¸èƒ½æ­£å¸¸ä¸‹è½½å®‰è£…çš„æƒ…å†µå¯ä»¥ä½¿ç”¨æ¸…åå¤§å­¦é•œåƒæº<br><br># ç¼–è¾‘ `&#47;etc&#47;apt&#47;sources.list` æ–‡ä»¶ï¼Œåˆ é™¤åŸæ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œç”¨ä»¥ä¸‹å†…å®¹å–ä»£ï¼š<br>deb http:&#47;&#47;mirrors.tuna.tsinghua.edu.cn&#47;raspbian&#47;raspbian&#47; buster main non-free contrib rpi<br>deb-src http:&#47;&#47;mirrors.tuna.tsinghua.edu.cn&#47;raspbian&#47;raspbian&#47; buster main non-free contrib rpi<br><br># ç¼–è¾‘ `&#47;etc&#47;apt&#47;sources.list.d&#47;raspi.list` æ–‡ä»¶ï¼Œåˆ é™¤åŸæ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œç”¨ä»¥ä¸‹å†…å®¹å–ä»£ï¼š<br>deb http:&#47;&#47;mirrors.tuna.tsinghua.edu.cn&#47;raspberrypi&#47; buster main ui","like_count":4,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513937,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612589596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269998,"user_name":"å­™å®‡ç¿”","can_delete":false,"product_type":"c1","uid":1944746,"ip_address":"","ucode":"A10DC9018CCCC0","user_header":"https://static001.geekbang.org/account/avatar/00/1d/ac/aa/2f117918.jpg","comment_is_top":false,"comment_ctime":1608870243,"is_pvip":false,"replies":[{"id":"99269","content":"å¥½ï¼Œç­‰åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1610807846,"ip_address":"","comment_id":269998,"utype":1}],"discussion_count":4,"race_medal":0,"score":"35968608611","product_id":100063601,"comment_content":"æˆ‘æƒ³ç­‰æŠŠè¯¾ç¨‹é‡Œçš„éƒ½å®ç°åï¼Œè¯•ç€åœ¨é—¨æ¡†çš„ä¸¤è¾¹è£…ä¸¤ä¸ªçº¢å¤–ä¼ æ„Ÿå™¨ï¼Œé€šè¿‡æ„ŸçŸ¥çš„å…ˆåé¡ºåºï¼Œæ¥åˆ¤æ–­æ˜¯è¿›é—¨æˆ–è€…å‡ºé—¨ï¼Œæ¥æ§åˆ¶ç¯çš„å¼€å…³","like_count":8,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512483,"discussion_content":"å¥½ï¼Œç­‰åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610807846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132690,"avatar":"https://static001.geekbang.org/account/avatar/00/11/48/92/de629e17.jpg","nickname":"æ¸¸é±¼","note":"","ucode":"ADBB8B24B4594F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573866,"discussion_content":"è¿˜è¦è€ƒè™‘æœ‰å¤šäººè¿›å‡ºçš„åœºæ™¯ï¼Œç™½å¤©ä¸é»‘å¤œæˆ–å…‰çº¿å¥½ä¸ä¸å¥½çš„åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653702488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256331,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2b/8b/ea70179f.jpg","nickname":"é»„é‘«è£","note":"","ucode":"80B72CC68F7E06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337867,"discussion_content":"é—¨æ¡†ä¸¤è¾¹å„ä¸€ä¸ªä¸è¡Œçš„ï¼Œåº”è¯¥ä¸¤ä¸ªæ”¾åœ¨åŒä¸€è¾¹ï¼Œæ°´å¹³æ”¾ï¼ŒæŒ‰ç…§ä¼ æ„Ÿå™¨æ£€æµ‹åˆ°äººçš„å…ˆåé¡ºåºæ¥åˆ¤æ–­è¿›é—¨è¿˜æ˜¯å‡ºé—¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609113871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1944746,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/ac/aa/2f117918.jpg","nickname":"å­™å®‡ç¿”","note":"","ucode":"A10DC9018CCCC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1256331,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2b/8b/ea70179f.jpg","nickname":"é»„é‘«è£","note":"","ucode":"80B72CC68F7E06","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338461,"discussion_content":"å“ˆå“ˆï¼Œæˆ‘å°±æ˜¯è¿™ä¸ªæ„æ€ï¼Œæ²¡è¡¨è¿°æ¸…æ¥šï¼Œå¤šè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609295629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":337867,"ip_address":""},"score":338461,"extra":""}]}]},{"had_liked":false,"id":272640,"user_name":"ç‰›å“¥å“¥","can_delete":false,"product_type":"c1","uid":1785568,"ip_address":"","ucode":"2B3926008E97CB","user_header":"https://static001.geekbang.org/account/avatar/00/1b/3e/e0/08069dfc.jpg","comment_is_top":false,"comment_ctime":1610182903,"is_pvip":false,"replies":[{"id":"99231","content":"éœ€è¦å†çœ‹çœ‹respeakerçš„é©±åŠ¨å®‰è£…æ˜¯å¦æˆåŠŸ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1610783795,"ip_address":"","comment_id":272640,"utype":1}],"discussion_count":6,"race_medal":0,"score":"14495084791","product_id":100063601,"comment_content":"arecord -l å‘ç°æ²¡æœ‰è®¾å¤‡ï¼Œé‡è£…ç³»ç»Ÿä¹Ÿä¸è¡Œ","like_count":3,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513333,"discussion_content":"éœ€è¦å†çœ‹çœ‹respeakerçš„é©±åŠ¨å®‰è£…æ˜¯å¦æˆåŠŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610783795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1022286,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/4e/0146807f.jpg","nickname":"å…”å­","note":"","ucode":"327C5142FD0940","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341248,"discussion_content":"æˆ‘çš„ä¹Ÿæ˜¯ï¼Œæœ‰äººèƒ½è§£ç­”ä¸€ä¸‹å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610361224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1133649,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/51/a339d363.jpg","nickname":"æŸ æª¬æ°´","note":"","ucode":"B105855D7FF8FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1022286,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/4e/0146807f.jpg","nickname":"å…”å­","note":"","ucode":"327C5142FD0940","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342646,"discussion_content":"é©±åŠ¨è£…å¥½äº†å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610764622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":341248,"ip_address":""},"score":342646,"extra":""}]},{"author":{"id":1022286,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/99/4e/0146807f.jpg","nickname":"å…”å­","note":"","ucode":"327C5142FD0940","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343568,"discussion_content":"æˆ‘æŠŠæ¸…åæºè¿˜åŸæˆé»˜è®¤çš„æºï¼Œå½“ç„¶æœ€åèŠ±äº†ä¸€æ•´æ™šæ—¶é—´æ¥æ›´æ–°åŒ…ï¼Œæœ€åå¯èƒ½è¿˜æ˜¯å¤šè¯•å‡ æ¬¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611100124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1748552,"avatar":"","nickname":"ä¿¡å¤§æ·å®‰","note":"","ucode":"096797EEB7A14E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342998,"discussion_content":"è…¾è®¯æºç»å¸¸å‡ºé—®é¢˜æ¢æˆæ¸…åå¤§å­¦æº\n\n# ç¼–è¾‘ `/etc/apt/sources.list` æ–‡ä»¶ï¼Œåˆ é™¤åŸæ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œç”¨ä»¥ä¸‹å†…å®¹å–ä»£ï¼š\ndeb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi\ndeb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi\n\n# ç¼–è¾‘ `/etc/apt/sources.list.d/raspi.list` æ–‡ä»¶ï¼Œåˆ é™¤åŸæ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œç”¨ä»¥ä¸‹å†…å®¹å–ä»£ï¼š\ndeb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610896665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2141147,"avatar":"","nickname":"Geek_e3bbee","note":"","ucode":"B4234950340D3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341591,"discussion_content":"ä¸éœ€è¦æœ‰æ–‡ä»¶ï¼Œç›´æ¥ arecord -d 5 test.wav å½•åˆ¶ï¼Œç„¶å aplay test.wav æ’­æ”¾æµ‹è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610458404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271429,"user_name":"è¹","can_delete":false,"product_type":"c1","uid":1020356,"ip_address":"","ucode":"395C6C4191B091","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/c4/40609b81.jpg","comment_is_top":false,"comment_ctime":1609620099,"is_pvip":false,"replies":[{"id":"99257","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1610806541,"ip_address":"","comment_id":271429,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14494521987","product_id":100063601,"comment_content":"ä½¿ç”¨precise-convert geektime.netä¼šå‡ºç°ä¸€ç‚¹é—®é¢˜ï¼Œè¯´æ˜¯æœ‰äº›æ–‡ä»¶ä¸­çš„.decode(&#39;utf8&#39;)æœ‰AttributeErrorï¼Œä¼°è®¡æ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Œçœ‹åˆ°æœ€è¿‘æœ‰ä¸ªæŠ¥äº†çš„bugï¼šhttps:&#47;&#47;github.com&#47;MycroftAI&#47;mycroft-precise&#47;issues&#47;197ï¼Œæš‚æ—¶çš„è§£å†³åŠæ³•ï¼Œå°†æŠ¥é”™ä¸­çš„.decode(&#39;utf8&#39;)åˆ æ‰","like_count":3,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512925,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610806541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1600835,"avatar":"https://static001.geekbang.org/account/avatar/00/18/6d/43/61b81243.jpg","nickname":"ç±³","note":"","ucode":"5079E87A201B6B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574278,"discussion_content":"ä¹Ÿå¯ä»¥æŠŠsetup.pyä¸­çš„h5pyï¼Œæ”¹ä¸ºh5py&lt;3.0.0ã€‚ç„¶åé‡æ–°./setup.sh","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653955351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":271430,"user_name":"è¹","can_delete":false,"product_type":"c1","uid":1020356,"ip_address":"","ucode":"395C6C4191B091","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/c4/40609b81.jpg","comment_is_top":false,"comment_ctime":1609621519,"is_pvip":false,"replies":[{"id":"99256","content":"è®°å¾—æ‰§è¡Œæ—¶åˆ‡æ¢åˆ°preciseçš„pythonè™šæ‹Ÿç¯å¢ƒ","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1610806524,"ip_address":"","comment_id":271430,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10199556111","product_id":100063601,"comment_content":"ä¸Šé¢çš„kwsdemo.pyçš„æµ‹è¯•ä»£ç é‡Œè¿™ç¬¬6è¡Œ&quot;precise-engine&#47;precise-engine&quot;ä¼šå¯¼è‡´æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œéœ€è¦æ›¿æ¢åˆ°â€œ.venv&#47;bin&#47;precise-engineâ€œã€‚å‚è€ƒgithubä¸Šçš„sample python program.","like_count":2,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512926,"discussion_content":"è®°å¾—æ‰§è¡Œæ—¶åˆ‡æ¢åˆ°preciseçš„pythonè™šæ‹Ÿç¯å¢ƒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610806524,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273179,"user_name":"Geek_e3bbee","can_delete":false,"product_type":"c1","uid":2141147,"ip_address":"","ucode":"B4234950340D3D","user_header":"","comment_is_top":false,"comment_ctime":1610466895,"is_pvip":false,"replies":[{"id":"99215","content":"å¯ä»¥å…³æ³¨è´Ÿæ ·æœ¬ï¼Œå¢åŠ è®­ç»ƒæ¨¡å‹çš„è´¨é‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1610777321,"ip_address":"","comment_id":273179,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5905434191","product_id":100063601,"comment_content":"è¯­è¨€å”¤é†’ éƒ¨åˆ†èƒ½è·‘èµ·æ¥ï¼Œä½†æœ€ç»ˆå”¤é†’æ•ˆæœæ²¡æœ‰å‡ºç°ï¼Œä¸çŸ¥é“å…¶ä»–åŒå­¦æœ‰æ²¡æœ‰ç¢°åˆ°ç±»ä¼¼çš„é—®é¢˜","like_count":1,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513517,"discussion_content":"å¯ä»¥å…³æ³¨è´Ÿæ ·æœ¬ï¼Œå¢åŠ è®­ç»ƒæ¨¡å‹çš„è´¨é‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610777321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2309713,"avatar":"https://static001.geekbang.org/account/avatar/00/23/3e/51/f7d32e81.jpg","nickname":"æ¬¢ä¹é©¬","note":"","ucode":"230968AA8EEE30","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341749,"discussion_content":"ä¸€æ ·ï¼Œè¿˜æ²¡è¯´è¯å°±å‡ºç°helloï¼Œå’Œè€å¸ˆè¯¾ç¨‹ä¸­çš„ç°è±¡ä¸ä¸€æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610510978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2141147,"avatar":"","nickname":"Geek_e3bbee","note":"","ucode":"B4234950340D3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2309713,"avatar":"https://static001.geekbang.org/account/avatar/00/23/3e/51/f7d32e81.jpg","nickname":"æ¬¢ä¹é©¬","note":"","ucode":"230968AA8EEE30","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342098,"discussion_content":"æ˜¯çš„ï¼Œæˆ‘è¿™ä¹Ÿè¿™æ ·ã€‚ä¸çŸ¥é“å…¶ä»–åŒå­¦æœ‰å•¥è§£æ³•æ²¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610593098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":341749,"ip_address":""},"score":342098,"extra":""},{"author":{"id":1168143,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d3/0f/ad26c21a.jpg","nickname":"ç¥å®é’¢","note":"","ucode":"A32F11EA6C5417","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2309713,"avatar":"https://static001.geekbang.org/account/avatar/00/23/3e/51/f7d32e81.jpg","nickname":"æ¬¢ä¹é©¬","note":"","ucode":"230968AA8EEE30","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348351,"discussion_content":"æˆ‘çš„å’Œä½ ä¸€æ ·ï¼Œä¹Ÿæ˜¯è¿˜æ²¡è¯´è¯å°±å‡ºç°helloï¼Œç„¶åæ€ä¹ˆå–Šéƒ½ä¸èµ·ååº”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612519674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":341749,"ip_address":""},"score":348351,"extra":""}]}]},{"had_liked":false,"id":346922,"user_name":"ç±³","can_delete":false,"product_type":"c1","uid":1600835,"ip_address":"","ucode":"5079E87A201B6B","user_header":"https://static001.geekbang.org/account/avatar/00/18/6d/43/61b81243.jpg","comment_is_top":false,"comment_ctime":1653537987,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1653537987","product_id":100063601,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸‹ï¼Œè¿™ä¸ªé—®é¢˜å›°æ‰°æˆ‘å¾ˆä¹…äº†ã€‚<br>æ‰§è¡Œå®ŒæŒ‡ä»¤precise-collectåï¼ŒæŒ‰ç©ºæ ¼é”®å¼€å§‹å½•éŸ³ï¼Œæ­¤æ—¶ä¼šæŠ¥é”™ï¼š<br>ALSA lib dlmisc.c:287:(snd1_dlobj_cache_get) Cannot open shared library &#47;usr&#47;lib&#47;arm-linux-gnueabihf&#47;alsa-lib&#47;libasound_module_rate_samplerate.so ((null): &#47;usr&#47;lib&#47;arm-linux-gnueabihf&#47;alsa-lib&#47;libasound_module_rate_samplerate.so: cannot open shared object file: No such file or directory)","like_count":0,"discussions":[{"author":{"id":1600835,"avatar":"https://static001.geekbang.org/account/avatar/00/18/6d/43/61b81243.jpg","nickname":"ç±³","note":"","ucode":"5079E87A201B6B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575708,"discussion_content":"é€›äº†å¥½ä¹…çš„githubè®ºå›ï¼Œæ‰¾åˆ°ä¸€ä¸ªè§£å†³æ–¹æ³•ã€‚\né¦–å…ˆï¼Œcd ~\nå…¶æ¬¡ï¼Œvim .asoundrc\næœ€åï¼Œåœ¨.asoundrcé‡Œé¢è¾“å…¥ä»¥ä¸‹å†…å®¹\npcm.!default {\n  type asym\n   playback.pcm {\n     type plug\n     slave.pcm &#34;hw:1,0&#34;\n   }\n   capture.pcm {\n     type plug\n     slave.pcm &#34;hw:1,0&#34;\n   }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655043123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":337183,"user_name":"z","can_delete":false,"product_type":"c1","uid":1028132,"ip_address":"","ucode":"8A64B9354556CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b0/24/bb1297cf.jpg","comment_is_top":false,"comment_ctime":1646664161,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646664161","product_id":100063601,"comment_content":"æœ‰æ²¡æœ‰å¯èƒ½æˆ‘åšä¸€ä¸ªæ‹¾éŸ³å™¨å‰å°ï¼Œå°†è¯­éŸ³ï¼ˆå·²ç»æ˜ç¡®æ˜¯æŒ‡ä»¤äº†ï¼Œæ— éœ€å†åˆ¤æ–­æ˜¯å¦å”¤é†’ï¼‰é€šè¿‡è“ç‰™çš„å½¢å¼ä¼ è¾“ç»™å°çˆ±éŸ³å“æˆ–è€…æ‰‹æœºçš„å°çˆ±åŒå­¦APPè¿›è¡Œè¯­ä¹‰åˆ†æå¹¶å®ŒæˆæŒ‡ä»¤ï¼Ÿ","like_count":0},{"had_liked":false,"id":332191,"user_name":"é˜¿ç”˜","can_delete":false,"product_type":"c1","uid":1057843,"ip_address":"","ucode":"BC93175B70E05D","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","comment_is_top":false,"comment_ctime":1643092560,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1643092560","product_id":100063601,"comment_content":"æ„Ÿè§‰å¼€æºçœŸçš„å¾ˆä¼Ÿå¤§ï¼Œè‡ªå·±éƒ½å¯ä»¥DIYè¿™ä¹ˆä¸€ä¸ªå°å°çš„æ™ºèƒ½å®¶å±…äº†ã€‚","like_count":0},{"had_liked":false,"id":270095,"user_name":"LDxy","can_delete":false,"product_type":"c1","uid":1188710,"ip_address":"","ucode":"956432CE7B7761","user_header":"https://static001.geekbang.org/account/avatar/00/12/23/66/413c0bb5.jpg","comment_is_top":false,"comment_ctime":1608901022,"is_pvip":false,"replies":[{"id":"99268","content":"æ˜¯çš„ï¼Œéƒ½æ¯”è¾ƒæˆç†Ÿäº†","user_name":"ä½œè€…å›å¤","user_name_real":"éƒ­æœæ–Œ","uid":"2302171","ctime":1610807820,"ip_address":"","comment_id":270095,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1608901022","product_id":100063601,"comment_content":"æ–‡ä¸­æåˆ°çš„æ™ºèƒ½éŸ³ç®±çš„æŠ€æœ¯æ¶æ„ä¸­æ‰€ç”¨çš„çš„å„ç§æŠ€æœ¯ï¼Œæ˜¯ä¸æ˜¯éƒ½å·²ç»æœ‰æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆçš„ï¼Ÿå¹¶ä¸”éƒ½å·²ç»èƒ½åœ¨äº§å“ä¸­ä½¿ç”¨çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2302171,"avatar":"https://static001.geekbang.org/account/avatar/00/23/20/db/b04f43dc.jpg","nickname":"éƒ­æœæ–Œ","note":"","ucode":"2969986E1B3851","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":512516,"discussion_content":"æ˜¯çš„ï¼Œéƒ½æ¯”è¾ƒæˆç†Ÿäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610807820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2324000,"avatar":"https://static001.geekbang.org/account/avatar/00/23/76/20/ca7a685a.jpg","nickname":"çˆ¶ä¸å­","note":"","ucode":"E0269DD24BE49A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345387,"discussion_content":"è¯¾ä»¶èƒ½ä¸‹è½½å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611716199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}