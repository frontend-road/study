{"id":132889,"title":"20 | RocketMQ Produceræºç åˆ†æï¼šæ¶ˆæ¯ç”Ÿäº§çš„å®ç°è¿‡ç¨‹","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æç¥ã€‚</p><p>å¯¹äºæ¶ˆæ¯é˜Ÿåˆ—æ¥è¯´ï¼Œå®ƒæœ€æ ¸å¿ƒçš„åŠŸèƒ½å°±æ˜¯æ”¶å‘æ¶ˆæ¯ã€‚ä¹Ÿå°±æ˜¯æ¶ˆæ¯ç”Ÿäº§å’Œæ¶ˆè´¹è¿™ä¸¤ä¸ªæµç¨‹ã€‚æˆ‘ä»¬åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­æåˆ°äº†æ¶ˆæ¯é˜Ÿåˆ—ä¸€äº›å¸¸è§é—®é¢˜ï¼Œæ¯”å¦‚ï¼Œâ€œå¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ï¼Ÿâ€â€œä¸ºä»€ä¹ˆä¼šæ”¶åˆ°é‡å¤æ¶ˆæ¯ï¼Ÿâ€â€œæ¶ˆè´¹æ—¶ä¸ºä»€ä¹ˆè¦å…ˆæ‰§è¡Œæ¶ˆè´¹ä¸šåŠ¡é€»è¾‘å†ç¡®è®¤æ¶ˆè´¹ï¼Ÿâ€ï¼Œé’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œæˆ‘è®²è¿‡å®ƒä»¬çš„å®ç°åŸç†ï¼Œè¿™äº›æœ€ç»ˆè½åœ°åˆ°ä»£ç ä¸Šï¼Œéƒ½åŒ…å«åœ¨è¿™ä¸€æ”¶ä¸€å‘ä¸¤ä¸ªæµç¨‹ä¸­ã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„ä¸¤èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä¼šå¸¦ä½ ä¸€èµ·é€šè¿‡åˆ†ææºç çš„æ–¹å¼ï¼Œè¯¦ç»†å­¦ä¹ ä¸€ä¸‹è¿™ä¸¤ä¸ªæµç¨‹åˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„ã€‚ä½ åœ¨æ—¥å¸¸ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„æ—¶å€™ï¼Œé‡åˆ°çš„å¤§éƒ¨åˆ†é—®é¢˜ï¼Œæ›´å¤šçš„æ˜¯è·ŸProducerå’ŒConsumerï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„å®¢æˆ·ç«¯ï¼Œå…³è”æ›´ç´§å¯†ã€‚ææ¸…æ¥šå®¢æˆ·ç«¯çš„å®ç°åŸç†å’Œä»£ç ä¸­çš„ç»†èŠ‚ï¼Œå°†å¯¹ä½ æ—¥åä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ—¶è¿›è¡Œé—®é¢˜æ’æŸ¥æœ‰éå¸¸å¤§çš„å¸®åŠ©ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿™ä¸¤èŠ‚è¯¾çš„é‡ç‚¹ï¼Œä¹Ÿå°†æ”¾åœ¨åˆ†æå®¢æˆ·ç«¯çš„æºä»£ç ä¸Šã€‚</p><p>ç§‰ç€å…ˆæ˜“åéš¾çš„åŸåˆ™ï¼Œæˆ‘ä»¬é€‰æ‹©ä»£ç é£æ ¼æ¯”è¾ƒç®€æ˜æ˜“æ‡‚çš„RocketMQä½œä¸ºåˆ†æå¯¹è±¡ã€‚ä¸€èµ·åˆ†æRocketMQçš„Producerçš„æºä»£ç ï¼Œå­¦ä¹ æ¶ˆæ¯ç”Ÿäº§çš„å®ç°è¿‡ç¨‹ã€‚</p><p>åœ¨åˆ†ææºä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çš„é¦–è¦ç›®çš„å°±æ˜¯ææ¸…æ¥šåŠŸèƒ½çš„å®ç°åŸç†ï¼Œå¦å¤–ï¼Œæœ€å¥½èƒ½æœ‰æ•é”çš„å—…è§‰ï¼Œå–„äºå‘ç°ä»£ç ä¸­ä¼˜ç§€çš„è®¾è®¡å’Œå·§å¦™æ„æ€ï¼Œå­¦ä¹ ã€æ€»ç»“å¹¶è®°ä½è¿™äº›æ–¹æ³•ã€‚åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå†é‡åˆ°ç±»ä¼¼åœºæ™¯ï¼Œä½ å°±å¯ä»¥ç›´æ¥æ‹¿æ¥ä½¿ç”¨ã€‚</p><!-- [[[read_end]]] --><p>æˆ‘ä»¬ä½¿ç”¨å½“å‰æœ€æ–°çš„releaseç‰ˆæœ¬release-4.5.1è¿›è¡Œåˆ†æï¼Œä½¿ç”¨Gitåœ¨GitHubä¸Šç›´æ¥ä¸‹è½½æºç åˆ°æœ¬åœ°ï¼š</p><pre><code>git clone git@github.com:apache/rocketmq.git\ncd rocketmq\ngit checkout release-4.5.1\n</code></pre><p>å®¢æˆ·ç«¯æ˜¯ä¸€ä¸ªå•ç‹¬çš„Moduleï¼Œåœ¨rocketmq/clientç›®å½•ä¸­ã€‚</p><h2>ä»å•å…ƒæµ‹è¯•çœ‹Producer APIçš„ä½¿ç”¨</h2><p>åœ¨ä¸“æ ä¹‹å‰çš„è¯¾ç¨‹ã€Š<a href=\"https://time.geekbang.org/column/article/115519\">09 | å­¦ä¹ å¼€æºä»£ç è¯¥å¦‚ä½•å…¥æ‰‹ï¼Ÿ</a>ã€‹ä¸­æˆ‘å’Œä½ è®²è¿‡ï¼Œä¸å»ºè®®ä½ ä»main()æ–¹æ³•å…¥æ‰‹å»åˆ†ææºç ï¼Œè€Œæ˜¯å¸¦ç€é—®é¢˜å»åˆ†æã€‚æˆ‘ä»¬æœ¬èŠ‚è¯¾çš„é—®é¢˜æ˜¯éå¸¸æ¸…æ™°çš„ï¼Œå°±æ˜¯è¦ææ¸…æ¥šProduceræ˜¯å¦‚ä½•å‘æ¶ˆæ¯çš„ã€‚å¸¦ç€è¿™ä¸ªé—®é¢˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯¥å¦‚ä½•åˆ†ææºç å‘¢ï¼Ÿ</p><p>æˆ‘çš„å»ºè®®æ˜¯ï¼Œå…ˆçœ‹ä¸€ä¸‹å•å…ƒæµ‹è¯•ç”¨ä¾‹ã€‚å› ä¸ºï¼Œä¸€èˆ¬å•å…ƒæµ‹è¯•ä¸­ï¼Œæ¯ä¸€ä¸ªç”¨ä¾‹å°±æ˜¯æµ‹è¯•ä»£ç ä¸­çš„ä¸€ä¸ªå±€éƒ¨æˆ–è€…è¯´æ˜¯ä¸€ä¸ªå°æµç¨‹ã€‚é‚£å¯¹äºä¸€äº›æ¯”è¾ƒå®Œå–„çš„å¼€æºè½¯ä»¶ï¼Œå®ƒä»¬çš„å•å…ƒæµ‹è¯•è¦†ç›–ç‡éƒ½éå¸¸é«˜ï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°æˆ‘ä»¬å…³å¿ƒçš„é‚£ä¸ªæµç¨‹æ‰€å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹ã€‚æˆ‘ä»¬çš„æºç åˆ†æï¼Œå°±å¯ä»¥ä»è¿™äº›æµ‹è¯•ç”¨ä¾‹å…¥æ‰‹ï¼Œä¸€æ­¥ä¸€æ­¥è·Ÿè¸ªå…¶æ–¹æ³•è°ƒç”¨é“¾è·¯ï¼Œç†æ¸…å®ç°è¿‡ç¨‹ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹RocketMQå®¢æˆ·ç«¯çš„å•å…ƒæµ‹è¯•ï¼Œçœ‹çœ‹Produceræä¾›å“ªäº›APIï¼Œæ›´é‡è¦çš„æ˜¯äº†è§£è¿™äº›APIåº”è¯¥å¦‚ä½•ä½¿ç”¨ã€‚</p><p>Producerçš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹éƒ½åœ¨åŒä¸€ä¸ªæµ‹è¯•ç±»\"org.apache.rocketmq.client.producer.DefaultMQProducerTest\"ä¸­ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªæµ‹è¯•ç±»ä¸­çš„æ‰€æœ‰å•å…ƒæµ‹è¯•æ–¹æ³•ï¼Œå¤§è‡´å¯ä»¥äº†è§£åˆ°Producerçš„ä¸»è¦åŠŸèƒ½ã€‚</p><p>è¿™ä¸ªæµ‹è¯•ç±»çš„ä¸»è¦æµ‹è¯•æ–¹æ³•å¦‚ä¸‹ï¼š</p><blockquote>\n<p>init<br>\nterminate<br>\ntestSendMessage_ZeroMessage<br>\ntestSendMessage_NoNameSrv<br>\ntestSendMessage_NoRoute<br>\ntestSendMessageSync_Success<br>\ntestSendMessageSync_WithBodyCompressed<br>\ntestSendMessageAsync_Success<br>\ntestSendMessageAsync<br>\ntestSendMessageAsync_BodyCompressed<br>\ntestSendMessageSync_SuccessWithHook</p>\n</blockquote><p>å…¶ä¸­initå’Œterminateæ˜¯æµ‹è¯•å¼€å§‹åˆå§‹åŒ–å’Œæµ‹è¯•ç»“æŸé”€æ¯æ—¶éœ€è¦æ‰§è¡Œçš„ä»£ç ï¼Œå…¶ä»–ä»¥testSendMessageå¼€å¤´çš„æ–¹æ³•éƒ½æ˜¯åœ¨å„ç§æƒ…å†µå’Œå„ç§åœºæ™¯ä¸‹å‘é€æ¶ˆæ¯çš„æµ‹è¯•ç”¨ä¾‹ï¼Œé€šè¿‡è¿™äº›ç”¨ä¾‹çš„åå­—ï¼Œä½ å¯ä»¥å¤§è‡´çœ‹å‡ºæµ‹è¯•çš„åŠŸèƒ½ã€‚</p><p>æ¯”å¦‚ï¼ŒtestSendMessageSyncå’ŒtestSendMessageAsyncåˆ†åˆ«æ˜¯æµ‹è¯•åŒæ­¥å‘é€å’Œå¼‚æ­¥å‘é€çš„ç”¨ä¾‹ï¼ŒtestSendMessageSync_WithBodyCompressedæ˜¯å‹ç¼©æ¶ˆæ¯å‘é€çš„æµ‹è¯•ç”¨ä¾‹ï¼Œç­‰ç­‰ã€‚</p><p>åƒRocketMQè¿™ç§å¼€æºé¡¹ç›®ï¼Œå‰æœŸèŠ±è´¹å¤§é‡æ—¶é—´å»ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œçœ‹ä¼¼æµªè´¹æ—¶é—´ï¼Œå®é™…ä¸Šä¼šèŠ‚çœéå¸¸å¤šåæœŸè”è°ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ä»¥åŠä¸Šçº¿åå‡ºç°é—®é¢˜è§£å†³é—®é¢˜çš„æ—¶é—´ï¼Œå¹¶ä¸”èƒ½å¤Ÿæœ‰æ•ˆé™ä½çº¿ä¸Šæ•…éšœçš„æ¦‚ç‡ï¼Œæ€»ä½“æ¥è¯´æ˜¯éå¸¸åˆ’ç®—çš„ã€‚å¼ºçƒˆå»ºè®®ä½ åœ¨æ—¥å¸¸è¿›è¡Œå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¤šå†™ä¸€äº›æµ‹è¯•ç”¨ä¾‹ï¼Œå°½é‡æŠŠå•å…ƒæµ‹è¯•çš„è¦†ç›–ç‡åšåˆ°50%ä»¥ä¸Šã€‚</p><p>RockectMQçš„Producerå…¥å£ç±»ä¸ºâ€œorg.apache.rocketmq.client.producer.DefaultMQProducerâ€ï¼Œå¤§è‡´æµè§ˆä¸€ä¸‹ä»£ç å’Œç±»çš„ç»§æ‰¿å…³ç³»ï¼Œæˆ‘æ•´ç†å‡ºProducerç›¸å…³çš„å‡ ä¸ªæ ¸å¿ƒç±»å’Œæ¥å£å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ee/09/ee719ca65c6fb1d43c10c60512913209.png?wh=1834*824\" alt=\"\"></p><p>è¿™é‡Œé¢RocketMQä½¿ç”¨äº†ä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼šé—¨é¢æ¨¡å¼ï¼ˆFacade Patternï¼‰ã€‚</p><blockquote>\n<p>é—¨é¢æ¨¡å¼ä¸»è¦çš„ä½œç”¨æ˜¯ç»™å®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå¯ä»¥è®¿é—®ç³»ç»Ÿçš„æ¥å£ï¼Œéšè—ç³»ç»Ÿå†…éƒ¨çš„å¤æ‚æ€§ã€‚</p>\n</blockquote><p>æ¥å£MQProducerå°±æ˜¯è¿™ä¸ªæ¨¡å¼ä¸­çš„é—¨é¢ï¼Œå®¢æˆ·ç«¯åªè¦ä½¿ç”¨è¿™ä¸ªæ¥å£å°±å¯ä»¥è®¿é—®Producerå®ç°æ¶ˆæ¯å‘é€çš„ç›¸å…³åŠŸèƒ½ï¼Œä»ä½¿ç”¨å±‚é¢ä¸Šæ¥è¯´ï¼Œä¸å¿…å†ä¸å…¶ä»–å¤æ‚çš„å®ç°ç±»æ‰“äº¤é“äº†ã€‚</p><p>ç±»DefaultMQProducerå®ç°äº†æ¥å£MQProducerï¼Œå®ƒé‡Œé¢çš„æ–¹æ³•å®ç°å¤§å¤šæ²¡æœ‰ä»»ä½•çš„ä¸šåŠ¡é€»è¾‘ï¼Œåªæ˜¯å°è£…äº†å¯¹å…¶ä»–å®ç°ç±»çš„æ–¹æ³•è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯é—¨é¢çš„ä¸€éƒ¨åˆ†ã€‚Producerçš„å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘çš„å®ç°éƒ½åœ¨ç±»DefaultMQProducerImplä¸­ï¼Œè¿™ä¸ªç±»æˆ‘ä»¬ä¼šåœ¨åé¢é‡ç‚¹åˆ†æå…¶å®ç°ã€‚</p><p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„å®ç°åˆ†æ•£åœ¨å¾ˆå¤šçš„å†…éƒ¨ç±»ä¸­ï¼Œä¸æ–¹ä¾¿ç”¨æ¥å£æ¥å¯¹å¤–æä¾›æœåŠ¡ï¼Œä½ å°±å¯ä»¥ä»¿ç…§RocketMQçš„è¿™ç§æ–¹å¼ï¼Œä½¿ç”¨é—¨é¢æ¨¡å¼æ¥éšè—å†…éƒ¨å®ç°ï¼Œå¯¹å¤–æä¾›æœåŠ¡ã€‚</p><p>æ¥å£MQAdminå®šä¹‰äº†ä¸€äº›å…ƒæ•°æ®ç®¡ç†çš„æ–¹æ³•ï¼Œåœ¨æ¶ˆæ¯å‘é€è¿‡ç¨‹ä¸­ä¼šç”¨åˆ°ã€‚</p><h2>å¯åŠ¨è¿‡ç¨‹</h2><p>é€šè¿‡å•å…ƒæµ‹è¯•ä¸­çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œåœ¨init()å’Œterminate()è¿™ä¸¤ä¸ªæµ‹è¯•æ–¹æ³•ä¸­ï¼Œåˆ†åˆ«æ‰§è¡Œäº†Producerçš„startå’Œshutdownæ–¹æ³•ï¼Œè¯´æ˜åœ¨RocketMQä¸­ï¼ŒProduceræ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„æœåŠ¡ï¼Œåœ¨å‘é€æ¶ˆæ¯ä¹‹å‰éœ€è¦å…ˆå¯åŠ¨Producerã€‚è¿™ä¸ªå¯åŠ¨è¿‡ç¨‹ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸ºäº†å‘æ¶ˆæ¯åšçš„å‡†å¤‡å·¥ä½œï¼Œæ‰€ä»¥ï¼Œåœ¨åˆ†æå‘æ¶ˆæ¯æµç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†æ¸…Producerä¸­ç»´æŠ¤äº†å“ªäº›çŠ¶æ€ï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ï¼ŒProduceréƒ½åšäº†å“ªäº›åˆå§‹åŒ–çš„å·¥ä½œã€‚æœ‰äº†è¿™ä¸ªåŸºç¡€æ‰èƒ½åˆ†æå…¶å‘æ¶ˆæ¯çš„å®ç°æµç¨‹ã€‚</p><p>é¦–å…ˆä»æµ‹è¯•ç”¨ä¾‹çš„æ–¹æ³•init()å…¥æ‰‹ï¼š</p><pre><code>  @Before\n  public void init() throws Exception {\n      String producerGroupTemp = producerGroupPrefix + System.currentTimeMillis();\n      producer = new DefaultMQProducer(producerGroupTemp);\n      producer.setNamesrvAddr(&quot;127.0.0.1:9876&quot;);\n      producer.setCompressMsgBodyOverHowmuch(16);\n\n      //çœç•¥æ„é€ æµ‹è¯•æ¶ˆæ¯çš„ä»£ç \n\n      producer.start();\n\n      //çœç•¥ç”¨äºæµ‹è¯•æ„é€ mockçš„ä»£ç \n  }\n</code></pre><p>è¿™æ®µåˆå§‹åŒ–ä»£ç çš„é€»è¾‘éå¸¸ç®€å•ï¼Œå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªDefaultMQProducerçš„å®ä¾‹ï¼Œä¸ºå®ƒåˆå§‹åŒ–ä¸€äº›å‚æ•°ï¼Œç„¶åè°ƒç”¨startæ–¹æ³•å¯åŠ¨å®ƒã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è·Ÿè¿›startæ–¹æ³•çš„å®ç°ï¼Œç»§ç»­åˆ†æå…¶åˆå§‹åŒ–è¿‡ç¨‹ã€‚</p><p>DefaultMQProducer#start()æ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨äº†DefaultMQProducerImpl#start()æ–¹æ³•ï¼Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹è¿™ä¸ªæ–¹æ³•çš„ä»£ç ï¼š</p><pre><code>public void start(final boolean startFactory) throws MQClientException {\n    switch (this.serviceState) {\n        case CREATE_JUST:\n            this.serviceState = ServiceState.START_FAILED;\n\n            // çœç•¥å‚æ•°æ£€æŸ¥å’Œå¼‚å¸¸æƒ…å†µå¤„ç†çš„ä»£ç \n\n            // è·å–MQClientInstanceçš„å®ä¾‹mQClientFactoryï¼Œæ²¡æœ‰åˆ™è‡ªåŠ¨åˆ›å»ºæ–°çš„å®ä¾‹\n            this.mQClientFactory = MQClientManager.getInstance().getAndCreateMQClientInstance(this.defaultMQProducer, rpcHook);\n            // åœ¨mQClientFactoryä¸­æ³¨å†Œè‡ªå·±\n            boolean registerOK = mQClientFactory.registerProducer(this.defaultMQProducer.getProducerGroup(), this);\n            // çœç•¥å¼‚å¸¸å¤„ç†ä»£ç \n\n            // å¯åŠ¨mQClientFactory\n            if (startFactory) {\n                mQClientFactory.start();\n            }\n            this.serviceState = ServiceState.RUNNING;\n            break;\n        case RUNNING:\n        case START_FAILED:\n        case SHUTDOWN_ALREADY:\n            // çœç•¥å¼‚å¸¸å¤„ç†ä»£ç \n        default:\n            break;\n    }\n    // ç»™æ‰€æœ‰Brokerå‘é€å¿ƒè·³\n    this.mQClientFactory.sendHeartbeatToAllBrokerWithLock();\n}\n</code></pre><p>è¿™é‡Œé¢ï¼ŒRocketMQä½¿ç”¨ä¸€ä¸ªæˆå‘˜å˜é‡serviceStateæ¥è®°å½•å’Œç®¡ç†è‡ªèº«çš„æœåŠ¡çŠ¶æ€ï¼Œè¿™å®é™…ä¸Šæ˜¯çŠ¶æ€æ¨¡å¼(State Pattern)è¿™ç§è®¾è®¡æ¨¡å¼çš„å˜ç§å®ç°ã€‚</p><blockquote>\n<p>çŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å°±åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»ã€‚</p>\n</blockquote><p>ä¸æ ‡å‡†çš„çŠ¶æ€æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œå®ƒæ²¡æœ‰ä½¿ç”¨çŠ¶æ€å­ç±»ï¼Œè€Œæ˜¯ä½¿ç”¨åˆ†æ”¯æµç¨‹ï¼ˆswitch-caseï¼‰æ¥å®ç°ä¸åŒçŠ¶æ€ä¸‹çš„ä¸åŒè¡Œä¸ºï¼Œåœ¨ç®¡ç†æ¯”è¾ƒç®€å•çš„çŠ¶æ€æ—¶ï¼Œä½¿ç”¨è¿™ç§è®¾è®¡ä¼šè®©ä»£ç æ›´åŠ ç®€æ´ã€‚è¿™ç§æ¨¡å¼éå¸¸å¹¿æ³›åœ°ç”¨äºç®¡ç†æœ‰çŠ¶æ€çš„ç±»ï¼Œæ¨èä½ åœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨ã€‚</p><p>åœ¨è®¾è®¡çŠ¶æ€çš„æ—¶å€™ï¼Œæœ‰ä¸¤ä¸ªè¦ç‚¹æ˜¯éœ€è¦æ³¨æ„çš„ï¼Œç¬¬ä¸€æ˜¯ï¼Œä¸ä»…è¦è®¾è®¡æ­£å¸¸çš„çŠ¶æ€ï¼Œè¿˜è¦è®¾è®¡ä¸­é—´çŠ¶æ€å’Œå¼‚å¸¸çŠ¶æ€ï¼Œå¦åˆ™ï¼Œä¸€æ—¦ç³»ç»Ÿå‡ºç°å¼‚å¸¸ï¼Œä½ çš„çŠ¶æ€å°±ä¸å‡†ç¡®äº†ï¼Œä½ ä¹Ÿå°±å¾ˆéš¾å¤„ç†è¿™ç§å¼‚å¸¸çŠ¶æ€ã€‚æ¯”å¦‚åœ¨è¿™æ®µä»£ç ä¸­ï¼ŒRUNNINGå’ŒSHUTDOWN_ALREADYæ˜¯æ­£å¸¸çŠ¶æ€ï¼ŒCREATE_JUSTæ˜¯ä¸€ä¸ªä¸­é—´çŠ¶æ€ï¼ŒSTART_FAILEDæ˜¯ä¸€ä¸ªå¼‚å¸¸çŠ¶æ€ã€‚</p><p>ç¬¬äºŒä¸ªè¦ç‚¹æ˜¯ï¼Œå°†è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬æ¢è·¯å¾„è€ƒè™‘æ¸…æ¥šï¼Œå¹¶åœ¨è¿›è¡ŒçŠ¶æ€è½¬æ¢çš„æ—¶å€™ï¼Œæ£€æŸ¥ä¸Šä¸€ä¸ªçŠ¶æ€æ˜¯å¦èƒ½è½¬æ¢åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚æ¯”å¦‚ï¼Œåœ¨è¿™é‡Œï¼Œåªæœ‰å¤„äºCREATE_JUSTçŠ¶æ€æ‰èƒ½è½¬æ¢ä¸ºRUNNINGçŠ¶æ€ï¼Œè¿™æ ·å°±å¯ä»¥ç¡®ä¿è¿™ä¸ªæœåŠ¡æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œåªèƒ½å¯åŠ¨ä¸€æ¬¡ã€‚ä»è€Œé¿å…äº†å¤šæ¬¡å¯åŠ¨æœåŠ¡è€Œå¯¼è‡´çš„å„ç§é—®é¢˜ã€‚</p><p>æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹å¯åŠ¨è¿‡ç¨‹çš„å®ç°ï¼š</p><ol>\n<li>é€šè¿‡ä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰çš„MQClientManagerè·å–MQClientInstanceçš„å®ä¾‹mQClientFactoryï¼Œæ²¡æœ‰åˆ™è‡ªåŠ¨åˆ›å»ºæ–°çš„å®ä¾‹ï¼›</li>\n<li>åœ¨mQClientFactoryä¸­æ³¨å†Œè‡ªå·±ï¼›</li>\n<li>å¯åŠ¨mQClientFactoryï¼›</li>\n<li>ç»™æ‰€æœ‰Brokerå‘é€å¿ƒè·³ã€‚</li>\n</ol><p>è¿™é‡Œé¢åˆä½¿ç”¨äº†ä¸€ä¸ªæœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼ã€‚æˆ‘ä»¬åœ¨è¿™å„¿ç»™å‡ºå•ä¾‹æ¨¡å¼çš„å®šä¹‰ï¼Œä¸å†è¯¦ç»†è¯´æ˜äº†ï¼Œä¸ä¼šçš„åŒå­¦éœ€è¦è‡ªæˆ‘åçœä¸€ä¸‹ï¼Œç„¶åèµ¶ç´§å»å¤ä¹ è®¾è®¡æ¨¡å¼åŸºç¡€å»ã€‚</p><blockquote>\n<p>å•ä¾‹æ¨¡å¼æ¶‰åŠä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»è´Ÿè´£åˆ›å»ºè‡ªå·±çš„å¯¹è±¡ï¼ŒåŒæ—¶ç¡®ä¿åªæœ‰å•ä¸ªå¯¹è±¡è¢«åˆ›å»ºã€‚è¿™ä¸ªç±»æä¾›äº†ä¸€ç§è®¿é—®å…¶å”¯ä¸€çš„å¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ã€‚</p>\n</blockquote><p>å…¶ä¸­å®ä¾‹mQClientFactoryå¯¹åº”çš„ç±»MQClientInstanceæ˜¯RocketMQå®¢æˆ·ç«¯ä¸­çš„é¡¶å±‚ç±»ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯å¯¹åº”ç±»MQClientInstanceçš„ä¸€ä¸ªå®ä¾‹ã€‚è¿™ä¸ªå®ä¾‹ç»´æŠ¤ç€å®¢æˆ·ç«¯çš„å¤§éƒ¨åˆ†çŠ¶æ€ä¿¡æ¯ï¼Œä»¥åŠæ‰€æœ‰çš„Producerã€Consumerå’Œå„ç§æœåŠ¡çš„å®ä¾‹ï¼Œæƒ³è¦å­¦ä¹ å®¢æˆ·ç«¯æ•´ä½“ç»“æ„çš„åŒå­¦å¯ä»¥ä»åˆ†æè¿™ä¸ªç±»å…¥æ‰‹ï¼Œé€æ­¥ç»†åŒ–åˆ†æä¸‹å»ã€‚</p><p>æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æä¸€ä¸‹MQClientInstance#start()ä¸­çš„ä»£ç ï¼š</p><pre><code>// å¯åŠ¨è¯·æ±‚å“åº”é€šé“\nthis.mQClientAPIImpl.start();\n// å¯åŠ¨å„ç§å®šæ—¶ä»»åŠ¡\nthis.startScheduledTask();\n// å¯åŠ¨æ‹‰æ¶ˆæ¯æœåŠ¡\nthis.pullMessageService.start();\n// å¯åŠ¨RebalanceæœåŠ¡\nthis.rebalanceService.start();\n// å¯åŠ¨ProduceræœåŠ¡\nthis.defaultMQProducer.getDefaultMQProducerImpl().start(false);\n</code></pre><p>è¿™ä¸€éƒ¨åˆ†ä»£ç çš„æ³¨é‡Šæ¯”è¾ƒæ¸…æ¥šï¼Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol>\n<li>å¯åŠ¨å®ä¾‹mQClientAPIImplï¼Œå…¶ä¸­mQClientAPIImplæ˜¯ç±»MQClientAPIImplçš„å®ä¾‹ï¼Œå°è£…äº†å®¢æˆ·ç«¯ä¸Brokeré€šä¿¡çš„æ–¹æ³•ï¼›</li>\n<li>å¯åŠ¨å„ç§å®šæ—¶ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä¸Brokerä¹‹é—´çš„å®šæ—¶å¿ƒè·³ï¼Œå®šæ—¶ä¸NameServeråŒæ­¥æ•°æ®ç­‰ä»»åŠ¡ï¼›</li>\n<li>å¯åŠ¨æ‹‰å–æ¶ˆæ¯æœåŠ¡ï¼›</li>\n<li>å¯åŠ¨RebalanceæœåŠ¡ï¼›</li>\n<li>å¯åŠ¨é»˜è®¤çš„ProduceræœåŠ¡ã€‚</li>\n</ol><p>ä»¥ä¸Šæ˜¯Producerçš„å¯åŠ¨æµç¨‹ã€‚è¿™é‡Œé¢æœ‰å‡ ä¸ªé‡è¦çš„ç±»ï¼Œä½ éœ€è¦æ¸…æ¥šå®ƒä»¬çš„å„è‡ªçš„èŒè´£ã€‚åç»­ä½ åœ¨ä½¿ç”¨RocketMQæ—¶ï¼Œå¦‚æœé‡åˆ°é—®é¢˜éœ€è¦è°ƒè¯•ä»£ç ï¼Œäº†è§£è¿™å‡ ä¸ªé‡è¦ç±»çš„èŒè´£ä¼šå¯¹ä½ æœ‰éå¸¸å¤§çš„å¸®åŠ©ã€‚</p><ol>\n<li>DefaultMQProducerImplï¼šProducerçš„å†…éƒ¨å®ç°ç±»ï¼Œå¤§éƒ¨åˆ†Producerçš„ä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯å‘æ¶ˆæ¯çš„é€»è¾‘ï¼Œéƒ½åœ¨è¿™ä¸ªç±»ä¸­ã€‚</li>\n<li>MQClientInstanceï¼šè¿™ä¸ªç±»ä¸­å°è£…äº†å®¢æˆ·ç«¯ä¸€äº›é€šç”¨çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ— è®ºæ˜¯Producerè¿˜æ˜¯Consumerï¼Œæœ€ç»ˆéœ€è¦ä¸æœåŠ¡ç«¯äº¤äº’æ—¶ï¼Œéƒ½éœ€è¦è°ƒç”¨è¿™ä¸ªç±»ä¸­çš„æ–¹æ³•ï¼›</li>\n<li>MQClientAPIImplï¼šè¿™ä¸ªç±»ä¸­å°è£…äº†å®¢æˆ·ç«¯æœåŠ¡ç«¯çš„RPCï¼Œå¯¹è°ƒç”¨è€…éšè—äº†çœŸæ­£ç½‘ç»œé€šä¿¡éƒ¨åˆ†çš„å…·ä½“å®ç°ï¼›</li>\n<li>NettyRemotingClientï¼šRocketMQå„è¿›ç¨‹ä¹‹é—´ç½‘ç»œé€šä¿¡çš„åº•å±‚å®ç°ç±»ã€‚</li>\n</ol><h2>æ¶ˆæ¯å‘é€è¿‡ç¨‹</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·åˆ†æProducerå‘é€æ¶ˆæ¯çš„æµç¨‹ã€‚</p><p>åœ¨Producerçš„æ¥å£MQProducerä¸­ï¼Œå®šä¹‰äº†19ä¸ªä¸åŒå‚æ•°çš„å‘æ¶ˆæ¯çš„æ–¹æ³•ï¼ŒæŒ‰ç…§å‘é€æ–¹å¼ä¸åŒå¯ä»¥åˆ†æˆä¸‰ç±»ï¼š</p><ul>\n<li>å•å‘å‘é€ï¼ˆOnewayï¼‰ï¼šå‘é€æ¶ˆæ¯åç«‹å³è¿”å›ï¼Œä¸å¤„ç†å“åº”ï¼Œä¸å…³å¿ƒæ˜¯å¦å‘é€æˆåŠŸï¼›</li>\n<li>åŒæ­¥å‘é€ï¼ˆSyncï¼‰ï¼šå‘é€æ¶ˆæ¯åç­‰å¾…å“åº”ï¼›</li>\n<li>å¼‚æ­¥å‘é€ï¼ˆAsyncï¼‰ï¼šå‘é€æ¶ˆæ¯åç«‹å³è¿”å›ï¼Œåœ¨æä¾›çš„å›è°ƒæ–¹æ³•ä¸­å¤„ç†å“åº”ã€‚</li>\n</ul><p>è¿™ä¸‰ç±»å‘é€å®ç°åŸºæœ¬ä¸Šæ˜¯ç›¸åŒçš„ï¼Œå¼‚æ­¥å‘é€ç¨å¾®æœ‰ä¸€ç‚¹å„¿åŒºåˆ«ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å¼‚æ­¥å‘é€çš„å®ç°æ–¹æ³•\"DefaultMQProducerImpl#send()\"ï¼ˆå¯¹åº”æºç ä¸­çš„1132è¡Œï¼‰ï¼š</p><pre><code>@Deprecated\npublic void send(final Message msg, final MessageQueueSelector selector, final Object arg, final SendCallback sendCallback, final long timeout)\n    throws MQClientException, RemotingException, InterruptedException {\n    final long beginStartTime = System.currentTimeMillis();\n    ExecutorService executor = this.getAsyncSenderExecutor();\n    try {\n        executor.submit(new Runnable() {\n            @Override\n            public void run() {\n                long costTime = System.currentTimeMillis() - beginStartTime;\n                if (timeout &gt; costTime) {\n                    try {\n                        try {\n                            sendSelectImpl(msg, selector, arg, CommunicationMode.ASYNC, sendCallback,\n                                timeout - costTime);\n                        } catch (MQBrokerException e) {\n                            throw new MQClientException(&quot;unknownn exception&quot;, e);\n                        }\n                    } catch (Exception e) {\n                        sendCallback.onException(e);\n                    }\n                } else {\n                    sendCallback.onException(new RemotingTooMuchRequestException(&quot;call timeout&quot;));\n                }\n            }\n\n        });\n    } catch (RejectedExecutionException e) {\n        throw new MQClientException(&quot;exector rejected &quot;, e);\n    }\n}\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒRocketMQä½¿ç”¨äº†ä¸€ä¸ªExecutorServiceæ¥å®ç°å¼‚æ­¥å‘é€ï¼šä½¿ç”¨asyncSenderExecutorçš„çº¿ç¨‹æ± ï¼Œå¼‚æ­¥è°ƒç”¨æ–¹æ³•sendSelectImpl()ï¼Œç»§ç»­å‘é€æ¶ˆæ¯çš„åç»­å·¥ä½œï¼Œå½“å‰çº¿ç¨‹æŠŠå‘é€ä»»åŠ¡æäº¤ç»™asyncSenderExecutorå°±å¯ä»¥è¿”å›äº†ã€‚å•å‘å‘é€å’ŒåŒæ­¥å‘é€çš„å®ç°åˆ™æ˜¯ç›´æ¥åœ¨å½“å‰çº¿ç¨‹ä¸­è°ƒç”¨æ–¹æ³•sendSelectImpl()ã€‚</p><p>æˆ‘ä»¬æ¥ç»§ç»­çœ‹æ–¹æ³•sendSelectImpl()çš„å®ç°ï¼š</p><pre><code>// çœç•¥éƒ¨åˆ†ä»£ç \nMessageQueue mq = null;\n\n// é€‰æ‹©å°†æ¶ˆæ¯å‘é€åˆ°å“ªä¸ªé˜Ÿåˆ—ï¼ˆQueueï¼‰ä¸­\ntry {\n    List&lt;MessageQueue&gt; messageQueueList =\n        mQClientFactory.getMQAdminImpl().parsePublishMessageQueues(topicPublishInfo.getMessageQueueList());\n    Message userMessage = MessageAccessor.cloneMessage(msg);\n    String userTopic = NamespaceUtil.withoutNamespace(userMessage.getTopic(), mQClientFactory.getClientConfig().getNamespace());\n    userMessage.setTopic(userTopic);\n\n    mq = mQClientFactory.getClientConfig().queueWithNamespace(selector.select(messageQueueList, userMessage, arg));\n} catch (Throwable e) {\n    throw new MQClientException(&quot;select message queue throwed exception.&quot;, e);\n}\n\n// çœç•¥éƒ¨åˆ†ä»£ç \n\n// å‘é€æ¶ˆæ¯\nif (mq != null) {\n    return this.sendKernelImpl(msg, mq, communicationMode, sendCallback, null, timeout - costTime);\n} else {\n    throw new MQClientException(&quot;select message queue return null.&quot;, null);\n}\n// çœç•¥éƒ¨åˆ†ä»£ç \n</code></pre><p>æ–¹æ³•sendSelectImpl()ä¸­ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯é€‰å®šè¦å‘é€çš„é˜Ÿåˆ—ï¼Œç„¶åè°ƒç”¨æ–¹æ³•sendKernelImpl()å‘é€æ¶ˆæ¯ã€‚</p><p>é€‰æ‹©å“ªä¸ªé˜Ÿåˆ—å‘é€ç”±MessageQueueSelector#selectæ–¹æ³•å†³å®šã€‚åœ¨è¿™é‡ŒRocketMQä½¿ç”¨äº†ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰ï¼Œæ¥è§£å†³ä¸åŒåœºæ™¯ä¸‹éœ€è¦ä½¿ç”¨ä¸åŒçš„é˜Ÿåˆ—é€‰æ‹©ç®—æ³•é—®é¢˜ã€‚</p><blockquote>\n<p>ç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–ã€‚</p>\n</blockquote><p>RocketMQæä¾›äº†å¾ˆå¤šMessageQueueSelectorçš„å®ç°ï¼Œä¾‹å¦‚éšæœºé€‰æ‹©ç­–ç•¥ï¼Œå“ˆå¸Œé€‰æ‹©ç­–ç•¥å’ŒåŒæœºæˆ¿é€‰æ‹©ç­–ç•¥ç­‰ï¼Œå¦‚æœéœ€è¦ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å®ç°é€‰æ‹©ç­–ç•¥ã€‚ä¹‹å‰æˆ‘ä»¬çš„è¯¾ç¨‹ä¸­æåˆ°è¿‡ï¼Œå¦‚æœè¦ä¿è¯ç›¸åŒkeyæ¶ˆæ¯çš„ä¸¥æ ¼é¡ºåºï¼Œä½ éœ€è¦ä½¿ç”¨å“ˆå¸Œé€‰æ‹©ç­–ç•¥ï¼Œæˆ–è€…æä¾›ä¸€ä¸ªè‡ªå·±å®ç°çš„é€‰æ‹©ç­–ç•¥ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†çœ‹ä¸€ä¸‹æ–¹æ³•sendKernelImpl()ã€‚è¿™ä¸ªæ–¹æ³•çš„ä»£ç éå¸¸å¤šï¼Œå¤§çº¦æœ‰200è¡Œï¼Œä½†é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œä¸»è¦åŠŸèƒ½å°±æ˜¯æ„å»ºå‘é€æ¶ˆæ¯çš„å¤´RequestHeaderå’Œä¸Šä¸‹æ–‡SendMessageContextï¼Œç„¶åè°ƒç”¨æ–¹æ³•MQClientAPIImpl#sendMessage()ï¼Œå°†æ¶ˆæ¯å‘é€ç»™é˜Ÿåˆ—æ‰€åœ¨çš„Brokerã€‚</p><p>è‡³æ­¤ï¼Œæ¶ˆæ¯è¢«å‘é€ç»™è¿œç¨‹è°ƒç”¨çš„å°è£…ç±»MQClientAPIImplï¼Œå®Œæˆåç»­åºåˆ—åŒ–å’Œç½‘ç»œä¼ è¾“ç­‰æ­¥éª¤ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼ŒRocketMQçš„Produceræ•´ä¸ªå‘æ¶ˆæ¯çš„æµç¨‹ï¼Œæ— è®ºæ˜¯åŒæ­¥å‘é€è¿˜æ˜¯å¼‚æ­¥å‘é€ï¼Œéƒ½ç»Ÿä¸€åˆ°äº†åŒä¸€ä¸ªæµç¨‹ä¸­ã€‚åŒ…æ‹¬å¼‚æ­¥å‘é€æ¶ˆæ¯çš„å®ç°ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯é€šè¿‡ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œåœ¨å¼‚æ­¥çº¿ç¨‹æ‰§è¡Œçš„è°ƒç”¨å’ŒåŒæ­¥å‘é€ç›¸åŒçš„åº•å±‚æ–¹æ³•æ¥å®ç°çš„ã€‚</p><p>åœ¨åº•å±‚æ–¹æ³•çš„ä»£ç ä¸­ï¼Œä¾é æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°æ¥åŒºåˆ†åŒæ­¥è¿˜æ˜¯å¼‚æ­¥å‘é€ã€‚è¿™æ ·å®ç°çš„å¥½å¤„æ˜¯ï¼Œæ•´ä¸ªæµç¨‹æ˜¯ç»Ÿä¸€çš„ï¼Œå¾ˆå¤šåŒæ­¥å¼‚æ­¥å…±åŒçš„é€»è¾‘ï¼Œä»£ç å¯ä»¥å¤ç”¨ï¼Œå¹¶ä¸”ä»£ç ç»“æ„æ¸…æ™°ç®€å•ï¼Œä¾¿äºç»´æŠ¤ã€‚</p><p>ä½¿ç”¨åŒæ­¥å‘é€çš„æ—¶å€™ï¼Œå½“å‰çº¿ç¨‹ä¼šé˜»å¡ç­‰å¾…æœåŠ¡ç«¯çš„å“åº”ï¼Œç›´åˆ°æ”¶åˆ°å“åº”æˆ–è€…è¶…æ—¶æ–¹æ³•æ‰ä¼šè¿”å›ï¼Œæ‰€ä»¥åœ¨ä¸šåŠ¡ä»£ç è°ƒç”¨åŒæ­¥å‘é€çš„æ—¶å€™ï¼Œåªè¦è¿”å›æˆåŠŸï¼Œæ¶ˆæ¯å°±ä¸€å®šå‘é€æˆåŠŸäº†ã€‚å¼‚æ­¥å‘é€çš„æ—¶å€™ï¼Œå‘é€çš„é€»è¾‘éƒ½æ˜¯åœ¨Executorçš„å¼‚æ­¥çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå½“æœåŠ¡ç«¯è¿”å›å“åº”æˆ–è€…è¶…æ—¶ä¹‹åï¼ŒProducerä¼šè°ƒç”¨Callbackæ–¹æ³•æ¥ç»™ä¸šåŠ¡ä»£ç è¿”å›ç»“æœã€‚ä¸šåŠ¡ä»£ç éœ€è¦åœ¨Callbackä¸­æ¥åˆ¤æ–­å‘é€ç»“æœã€‚è¿™å’Œæˆ‘ä»¬åœ¨ä¹‹å‰çš„è¯¾ç¨‹ã€Š<a href=\"https://time.geekbang.org/column/article/111488\">05 | å¦‚ä½•ç¡®ä¿æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ï¼Ÿ</a>ã€‹è®²åˆ°çš„å‘é€æµç¨‹æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾æˆ‘å¸¦ä½ åˆ†æäº†RocketMQå®¢æˆ·ç«¯æ¶ˆæ¯ç”Ÿäº§çš„å®ç°è¿‡ç¨‹ï¼ŒåŒ…æ‹¬Produceråˆå§‹åŒ–å’Œå‘é€æ¶ˆæ¯çš„ä¸»æµç¨‹ã€‚Producerä¸­åŒ…å«çš„å‡ ä¸ªæ ¸å¿ƒçš„æœåŠ¡éƒ½æ˜¯æœ‰çŠ¶æ€çš„ï¼Œåœ¨Producerå¯åŠ¨æ—¶ï¼Œåœ¨MQClientInstanceè¿™ä¸ªç±»ä¸­æ¥ç»Ÿä¸€æ¥å¯åŠ¨ã€‚åœ¨å‘é€æ¶ˆæ¯çš„æµç¨‹ä¸­ï¼ŒRocketMQåˆ†äº†ä¸‰ç§å‘é€æ–¹å¼ï¼šå•å‘ã€åŒæ­¥å’Œå¼‚æ­¥ï¼Œè¿™ä¸‰ç§å‘é€æ–¹å¼å¯¹åº”çš„å‘é€æµç¨‹åŸºæœ¬æ˜¯ç›¸åŒçš„ï¼ŒåŒæ­¥å’Œå¼‚æ­¥å‘é€æ˜¯ç”±å·²ç»å°è£…å¥½çš„MQClientAPIImplç±»æ¥åˆ†åˆ«å®ç°çš„ã€‚</p><p>å¯¹äºæˆ‘ä»¬åœ¨åˆ†æä»£ç ä¸­æåˆ°çš„å‡ ä¸ªé‡è¦çš„ä¸šåŠ¡é€»è¾‘å®ç°ç±»ï¼Œä½ æœ€å¥½èƒ½è®°ä½è¿™å‡ ä¸ªç±»å’Œå®ƒçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ ï¼šDefaultMQProducerImplå°è£…äº†å¤§éƒ¨åˆ†Producerçš„ä¸šåŠ¡é€»è¾‘ï¼ŒMQClientInstanceå°è£…äº†å®¢æˆ·ç«¯ä¸€äº›é€šç”¨çš„ä¸šåŠ¡é€»è¾‘ï¼ŒMQClientAPIImplå°è£…äº†å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„RPCï¼ŒNettyRemotingClientå®ç°äº†åº•å±‚ç½‘ç»œé€šä¿¡ã€‚</p><p>æˆ‘åœ¨è¯¾ç¨‹ä¸­ï¼Œåªèƒ½å¸¦ä½ æŠŠä¸»å¹²æµç¨‹åˆ†ææ¸…æ¥šï¼Œä½†æ˜¯å¾ˆå¤šç»†èŠ‚å¹¶æ²¡æœ‰æ¶‰åŠï¼Œè¯¾åè¯·ä½ ä¸€å®šè¦æŒ‰ç…§æµç¨‹æŠŠæºä»£ç ä»”ç»†çœ‹ä¸€éï¼Œä»”ç»†æ¶ˆåŒ–ä¸€ä¸‹æ²¡æœ‰æåŠåˆ°çš„åˆ†æ”¯æµç¨‹ï¼Œå°†è¿™ä¸¤ä¸ªæµç¨‹ç»˜åˆ¶æˆè¯¦ç»†çš„æµç¨‹å›¾æˆ–è€…æ—¶åºå›¾ã€‚</p><p>åˆ†æè¿‡ç¨‹ä¸­æåˆ°çš„å‡ ä¸ªè®¾è®¡æ¨¡å¼ï¼Œæ˜¯éå¸¸å®ç”¨ä¸”å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå¸Œæœ›ä½ èƒ½å……åˆ†ç†è§£å¹¶ç†Ÿç»ƒè¿ç”¨ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œåœ¨æºç ä¸­ï¼Œå¼‚æ­¥å‘é€æ¶ˆæ¯æ–¹æ³•DefaultMQProducerImpl#send()(1132è¡Œ)è¢«å¼€å‘è€…åŠ äº†@Deprecatedï¼ˆå¼ƒç”¨ï¼‰æ³¨è§£ï¼Œæ˜¾ç„¶å¼€å‘è€…ä¹Ÿæ„è¯†åˆ°äº†è¿™ç§å¼‚æ­¥çš„å®ç°å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œéœ€è¦æ”¹è¿›ã€‚è¯·ä½ ç»“åˆæˆ‘ä»¬ä¸“æ æ–‡ç« ã€Š<a href=\"https://time.geekbang.org/column/article/117272\">10 | å¦‚ä½•ä½¿ç”¨å¼‚æ­¥è®¾è®¡æå‡ç³»ç»Ÿæ€§èƒ½ï¼Ÿ</a>ã€‹ä¸­è®²åˆ°çš„å¼‚æ­¥è®¾è®¡æ–¹æ³•æƒ³ä¸€æƒ³ï¼Œåº”è¯¥å¦‚ä½•æ”¹è¿›è¿™ä¸ªå¼‚æ­¥å‘é€çš„æµç¨‹ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æƒ³æ³•ã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":145352,"user_name":". ã€‚o O","can_delete":false,"product_type":"c1","uid":1273146,"ip_address":"","ucode":"79767AC422D775","user_header":"https://static001.geekbang.org/account/avatar/00/13/6d/3a/dfda3cbd.jpg","comment_is_top":false,"comment_ctime":1572257095,"is_pvip":false,"replies":[{"id":56297,"content":"å¼‚æ­¥å‘é€ä»ç„¶å¯ä»¥ä¿è¯ä¸¥æ ¼é¡ºåºï¼Œä½†éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š\n\n1. éœ€è¦å•çº¿ç¨‹å¼‚æ­¥å‘é€ï¼›\n2. éœ€è¦è®°å½•ä¸€ä¸ªé€’å¢æµæ°´å·ï¼Œä¿è¯æ¯ä¸ªå‘å‡ºçš„æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªæµæ°´å·ï¼Œå¦‚æœæŸä¸ªæµæ°´å·çš„æ¶ˆæ¯å‘é€å‡ºé”™ï¼Œéœ€è¦é‡å‘è¿™ä¸ªæµæ°´å·ä¹‹åçš„æ‰€æœ‰æ¶ˆæ¯ã€‚æ¯”å¦‚ï¼Œè¿ç»­å¼‚æ­¥å‘é€12345è¿™5æ¡æ¶ˆæ¯ï¼Œå‡å¦‚å·²ç»å¼‚æ­¥å‘é€äº†12345ï¼Œç„¶åå¼‚æ­¥æ£€æŸ¥å‘é€ç»“æœçš„æ—¶å€™å‘ç°3å‘é€å¤±è´¥äº†ï¼Œéœ€è¦ä»3å¼€å§‹é‡å‘ã€‚ä¹Ÿå°±æ˜¯æŒ‰é¡ºåºé‡å‘345ã€‚\n3. æ¶ˆè´¹é€»è¾‘éœ€è¦å¹‚ç­‰ï¼Œèƒ½æ¥å—2ä¸­çš„è¿™ç§æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¶åˆ°çš„æ¶ˆæ¯æœ‰å¯èƒ½æ˜¯ï¼š12ï¼ˆ3ä¸¢äº†ï¼‰45 345ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1572397823,"ip_address":"","comment_id":145352,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜,å¦‚æœå¼‚æ­¥å‘é€çš„è¯,å°±æ˜¯æŠŠå‘é€é€»è¾‘å°è£…æˆä»»åŠ¡æ”¾åˆ°çº¿ç¨‹æ± é‡Œå»å¤„ç†,é‚£ä¹ˆæ˜¯ä¸æ˜¯å°±æ²¡æ³•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§äº†å‘¢?å“ªæ€•æ˜¯é€šè¿‡keyå“ˆå¸Œåˆ°ä¸€ä¸ªåŒä¸€ä¸ªé˜Ÿåˆ—,ä½†æ˜¯å‘é€æ¶ˆæ¯çš„ä»»åŠ¡æ‰§è¡Œå…ˆåé¡ºåºæ²¡æ³•ä¿è¯å§?","like_count":35},{"had_liked":false,"id":132615,"user_name":"å¾®å¾®ä¸€ç¬‘","can_delete":false,"product_type":"c1","uid":1250327,"ip_address":"","ucode":"CFA7ABE81D0B99","user_header":"https://static001.geekbang.org/account/avatar/00/13/14/17/8763dced.jpg","comment_is_top":false,"comment_ctime":1568173245,"is_pvip":false,"replies":[{"id":50996,"content":"A1ï¼šè¿™ä¸ªå‚æ•°æ˜¯æ§åˆ¶å®¢æˆ·ç«¯åœ¨ç”Ÿäº§æ¶ˆè´¹çš„æ—¶å€™ä¼šè®¿é—®åŒä¸€ä¸ªä¸»é¢˜çš„é˜Ÿåˆ—æ•°é‡ï¼Œå‡è®¾ä¸€ä¸ªä¸»é¢˜æœ‰100ä¸ªé˜Ÿåˆ—ï¼Œå¯¹äºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒæ²¡å¿…è¦100ä¸ªé˜Ÿåˆ—éƒ½è®¿é—®ï¼Œåªéœ€è¦ä½¿ç”¨å…¶ä¸­çš„å‡ ä¸ªé˜Ÿåˆ—å°±è¡Œäº†ã€‚\n\nA2ï¼šwriteQueueNumså’ŒreadQueueNumsæ˜¯åœ¨æœåŠ¡ç«¯æ¥æ§åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹çš„æ—¶å€™ï¼Œåˆ†åˆ«è®¿é—®å¤šå°‘ä¸ªé˜Ÿåˆ—ã€‚è¿™ä¸¤ä¸ªå‚æ•°æ˜¯æœåŠ¡ç«¯å‚æ•°ï¼Œä¼˜å…ˆçº§æ˜¯é«˜äºå®¢æˆ·ç«¯æ§åˆ¶çš„å‚æ•°defaultTopicQueueNumsçš„ã€‚permæ˜¯è®¾ç½®Topicè¯»å†™ç­‰æƒé™çš„å‚æ•°ï¼Œå…·ä½“å¦‚ä½•è®¾ç½®ä½ éœ€è¦å»çœ‹ä¸€ä¸‹æ–‡æ¡£ã€‚\n\nA3ï¼šå¦‚æœå±€é™äºï¼šâ€œAPP&#47;æµè§ˆå™¨ --[httpåè®®]--&gt;web æœåŠ¡â€è¿™æ ·çš„åœºæ™¯ï¼Œå—é™äºhttpåè®®ï¼Œå‰ç«¯å’ŒwebæœåŠ¡çš„äº¤äº’ä¸€å®šæ˜¯å•å‘å’ŒåŒæ­¥çš„ã€‚ä¸€å®šè¦ç­‰å¾…ç»“æœç„¶åè¿”å›å“åº”ï¼Œä½†æ˜¯ï¼Œè¿™ç§æƒ…å†µä»ç„¶å¯ä»¥ä½¿ç”¨å¼‚æ­¥çš„æ–¹æ³•ï¼Œè¿™ä¸ªæˆ‘åœ¨â€œ08ç­”ç–‘â€ä¸­è§£é‡Šç§’æ€çš„æ—¶å€™å…¶å®å·²ç»ç»™å‡ºäº†ç­”æ¡ˆã€‚å¾ˆå¤šåŒå­¦ä¸ç†è§£çš„åŸå› æ˜¯æ€ç»´è¢«webæ¡†æ¶ç»™é™åˆ¶ä½äº†ã€‚åƒspring webè¿™ç§æ¡†æ¶ï¼Œå®ƒæŠŠå¤„ç†webè¯·æ±‚éƒ½ç»™ä½ å°è£…å¥½äº†ï¼Œä½ åªè¦å†™ä¸€ä¸ªhandlerå°±è¡Œäº†ï¼Œå¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªhandleråªèƒ½æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œå®ƒå¿…é¡»åœ¨è¿”å›å€¼ä¸­ç»™å‡ºå“åº”ç»“æœï¼Œæ‰€ä»¥å¯¼è‡´å¾ˆå¤šåŒå­¦çš„æ€ç»´è½¬ä¸è¿‡æ¥è¿™ä¸ªå¼¯å„¿ã€‚\n\nä½ å¯ä»¥ç»“åˆæˆ‘ä»¬è®²çš„å¼‚æ­¥ç½‘ç»œIOå†…å®¹æƒ³ä¸€ä¸‹ï¼Œhttpåè®®å‘ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œå°±æ˜¯å‘äº†ä¸€äº›æ•°æ®è¿‡æ¥ï¼ŒæœåŠ¡ç«¯å›å“åº”ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªè¿æ¥ä¸Šç»™å®ƒè¿”å›ä¸€äº›æ•°æ®å›å»å°±å¯ä»¥äº†ã€‚è‡³äºä»€ä¹ˆæ—¶å€™å¾€å›å‘å“åº”æ•°æ®ï¼Œå“ªä¸ªçº¿ç¨‹æ¥å‘ï¼Œæœ‰è¦æ±‚å—ï¼Ÿå¹¶æ²¡æœ‰ã€‚åªè¦åœ¨è¶…æ—¶ä¹‹å‰å‘å“åº”å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬è®²å¾—å¦‚ä½•æ¥å®ç°å¼‚æ­¥ç½‘ç»œIOçš„æ–¹æ³•å¤„ç†çš„ä¸å°±æ˜¯è¿™ç§æƒ…å†µå—ï¼Ÿ\n\nè¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯è¯´ä¸€å®šè¦åšæˆå’Œwebæ¡†æ¶ä¸€æ ·çš„åŒæ­¥å¤„ç†ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568429329,"ip_address":"","comment_id":132615,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆå¥½ï¼Œå…ˆç¥æ‚¨èŠ‚æ—¥å¿«ä¹ï¼ï¼ï¼æ‚¨è¾›è‹¦äº†~\næœ‰å‡ ä¸ªç–‘é—®éœ€è¦è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼š\nâ‘ ä»Šå¤©åœ¨çœ‹rocketMqæºç è¿‡ç¨‹ä¸­ï¼Œå‘ç°DefaultMQProduceræœ‰ä¸ªå±æ€§defaultTopicQueueNumsï¼Œå®ƒæ˜¯ç”¨æ¥è®¾ç½®topicçš„ConsumeQueueçš„æ•°é‡çš„å—ï¼Ÿæˆ‘ä¹‹å‰çš„ç†è§£æ˜¯ï¼ŒconsumeQueueçš„æ•°é‡æ˜¯åˆ›å»ºtopicçš„æ—¶å€™æŒ‡å®šçš„ï¼Œè·Ÿproduceræ²¡æœ‰å…³ç³»ï¼Œé‚£è¿™ä¸ªå‚æ•°åˆæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ\nâ‘¡åœ¨RocketMqçš„æ§åˆ¶å°ä¸Šå¯ä»¥åˆ›å»ºtopicï¼Œéœ€è¦æŒ‡å®šwriteQueueNumsï¼ŒreadQueueNumsï¼Œpermï¼Œè¿™ä¸‰ä¸ªå‚æ•°æ˜¯æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™é‡Œä¸ºä»€ä¹ˆè¦åŒºåˆ†å†™é˜Ÿåˆ—è·Ÿè¯»é˜Ÿåˆ—å‘¢ï¼Ÿä¸åº”è¯¥åªæœ‰ä¸€ä¸ªconsumeQueueå—ï¼Ÿ\nâ‘¢ç”¨æˆ·è¯·æ±‚--&gt;å¼‚æ­¥å¤„ç†---&gt;ç”¨æˆ·æ”¶åˆ°å“åº”ç»“æœã€‚å¼‚æ­¥å¤„ç†çš„ä½œç”¨æ˜¯ï¼šç”¨æ›´å°‘çš„çº¿ç¨‹æ¥æ¥æ”¶æ›´å¤šçš„ç”¨æˆ·è¯·æ±‚ï¼Œç„¶åå¼‚æ­¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚è€å¸ˆï¼Œå¼‚æ­¥å¤„ç†å®Œåï¼Œå¦‚ä½•å°†ç»“æœé€šçŸ¥ç»™åŸå…ˆçš„ç”¨æˆ·å‘¢ï¼Ÿå³ä½¿æœ‰å›è°ƒæ¥å£ï¼Œæˆ‘ç†è§£ä¹Ÿæ˜¯ç»™ç”¨æˆ·å‘ä¸ªçŸ­ä¿¡ä¹‹ç±»çš„å¤„ç†ï¼Œé‚£ç»“æœæ€ä¹ˆè¿”å›åˆ°å®šä½åˆ°ç”¨æˆ·ï¼Œå¹¶è¿”å›ä¹‹å‰è¯·æ±‚çš„é¡µé¢ä¸Šå‘¢ï¼Ÿéœ€è¦è®©ä¹‹å‰çš„è¯·æ±‚çº¿ç¨‹é˜»å¡å—ï¼Ÿé‚£ä¹Ÿæ— æ³•è¾¾åˆ°ã€ç”¨æ›´å°‘çš„çº¿ç¨‹æ¥æ¥æ”¶æ›´å¤šçš„ç”¨æˆ·è¯·æ±‚ã€‘çš„ç›®çš„ä¸«ã€‚\næœ›è€å¸ˆèƒ½æŒ‡ç‚¹è¿·æ´¥~~~","like_count":23,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472352,"discussion_content":"å¼‚æ­¥å‘é€ä»ç„¶å¯ä»¥ä¿è¯ä¸¥æ ¼é¡ºåºï¼Œä½†éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š\n\n1. éœ€è¦å•çº¿ç¨‹å¼‚æ­¥å‘é€ï¼›\n2. éœ€è¦è®°å½•ä¸€ä¸ªé€’å¢æµæ°´å·ï¼Œä¿è¯æ¯ä¸ªå‘å‡ºçš„æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªæµæ°´å·ï¼Œå¦‚æœæŸä¸ªæµæ°´å·çš„æ¶ˆæ¯å‘é€å‡ºé”™ï¼Œéœ€è¦é‡å‘è¿™ä¸ªæµæ°´å·ä¹‹åçš„æ‰€æœ‰æ¶ˆæ¯ã€‚æ¯”å¦‚ï¼Œè¿ç»­å¼‚æ­¥å‘é€12345è¿™5æ¡æ¶ˆæ¯ï¼Œå‡å¦‚å·²ç»å¼‚æ­¥å‘é€äº†12345ï¼Œç„¶åå¼‚æ­¥æ£€æŸ¥å‘é€ç»“æœçš„æ—¶å€™å‘ç°3å‘é€å¤±è´¥äº†ï¼Œéœ€è¦ä»3å¼€å§‹é‡å‘ã€‚ä¹Ÿå°±æ˜¯æŒ‰é¡ºåºé‡å‘345ã€‚\n3. æ¶ˆè´¹é€»è¾‘éœ€è¦å¹‚ç­‰ï¼Œèƒ½æ¥å—2ä¸­çš„è¿™ç§æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¶åˆ°çš„æ¶ˆæ¯æœ‰å¯èƒ½æ˜¯ï¼š12ï¼ˆ3ä¸¢äº†ï¼‰45 345ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572397823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1020492,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/4c/40783447.jpg","nickname":"ä½•éª§","note":"","ucode":"11DCC74CE2F300","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":585940,"discussion_content":"æ™•å€’ è¿™æ˜¯rabbitmqçš„å®ç°æ–¹å¼å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661913603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":472352,"ip_address":"å¹¿ä¸œ","group_id":0},"score":585940,"extra":""}]},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":637260,"discussion_content":"è¦ä¿è¯é¡ºåºï¼Œè‚¯å®šä¸èƒ½ç”¨çº¿ç¨‹æ± äº†ï¼Œæˆ–è€…è¯´çº¿ç¨‹æ± å¤§å°å¾—æ˜¯ 1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708223188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152755,"user_name":"Standly","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1574075752,"is_pvip":false,"replies":[{"id":58723,"content":"æˆ‘ç†è§£ä¸»è¦çš„åŸå› é™¤äº†è¶…æ—¶æ—¶é—´çš„è®¡ç®—ä¸å‡†ç¡®ä»¥å¤–ï¼Œæ›´é‡è¦çš„åŸå› æ˜¯è¿™ä¸ªå¼‚æ­¥æ–¹æ³•è¿˜æœ‰æ”¹è¿›çš„ç©ºé—´ï¼Œå…¶å®å¯ä»¥ç›´æ¥ç»“åˆNettyåšåˆ°ä¸éœ€è¦Executorã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1574123954,"ip_address":"","comment_id":152755,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œå¼‚æ­¥å‘é€ä¸ºä»€ä¹ˆæ˜¯å¼ƒç”¨ï¼Œè¿˜æ˜¯æ²¡æœ‰çœ‹æ‡‚ï¼Œæ„Ÿè§‰è¶…æ—¶æ—¶é—´çš„è®¡ç®—æ²¡æœ‰é”™å•Šâ€¦","like_count":13,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474927,"discussion_content":"æˆ‘ç†è§£ä¸»è¦çš„åŸå› é™¤äº†è¶…æ—¶æ—¶é—´çš„è®¡ç®—ä¸å‡†ç¡®ä»¥å¤–ï¼Œæ›´é‡è¦çš„åŸå› æ˜¯è¿™ä¸ªå¼‚æ­¥æ–¹æ³•è¿˜æœ‰æ”¹è¿›çš„ç©ºé—´ï¼Œå…¶å®å¯ä»¥ç›´æ¥ç»“åˆNettyåšåˆ°ä¸éœ€è¦Executorã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574123954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147297,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":1595382,"ip_address":"","ucode":"A77322C4E07B2D","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/f6/2c7ac1ad.jpg","comment_is_top":false,"comment_ctime":1572855479,"is_pvip":false,"replies":[{"id":57124,"content":"ç»™è®¤çœŸæ€è€ƒå®Œæˆä½œä¸šçš„åŒå­¦ç‚¹èµğŸ‘ï¼\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1573006661,"ip_address":"","comment_id":147297,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è¯¾åä½œä¸šï¼Œè¯·è€å¸ˆæŒ‡æ­£ï¼š\nä»æ–¹æ³•çš„æ³¨é‡Šçœ‹ï¼Œè¯´æ˜¯å› ä¸ºå¼‚å¸¸å¤„ç†å’Œè¶…æ—¶æ—¶é—´çš„è¯­ä¹‰ä¸å¯¹ã€‚\nå¼‚å¸¸å¤„ç†è¿™å—æˆ‘è§‰å¾—åº”è¯¥æ˜¯é‡‡ç”¨ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ï¼Œè€Œä¸åº”è¯¥æ˜¯æœ‰çš„å¼‚å¸¸æŠ›å‡ºï¼Œè€Œæœ‰çš„å¼‚å¸¸é€šè¿‡å›è°ƒæ–¹æ³•è¿”å›å®¢æˆ·ç«¯ã€‚\nå†è¯´è¶…æ—¶æ—¶é—´çš„é”™è¯¯è¯­ä¹‰ï¼Œä¸¥æ ¼æ¥è¯´åº”è¯¥æ˜¯ä¸å‡†ç¡®çš„è¶…æ—¶æ—¶é—´ï¼Œå› ä¸ºåœ¨runæ–¹æ³•é‡Œè¿›è¡Œæ—¶é—´åˆ¤æ–­ï¼ˆif (timeout &gt; costTime)ï¼‰å®é™…ä¸Šå·²ç»æ˜¯å¼€å§‹æ‰§è¡Œå½“å‰çº¿ç¨‹çš„æ—¶é—´ï¼Œè€Œä¹‹å‰çš„æ’é˜Ÿæ—¶é—´æ²¡æœ‰ç®—ï¼Œå› æ­¤æˆ‘æ”¹è¿›çš„æ–¹æ³•åº”è¯¥æ˜¯è¿™æ ·ï¼š\nCompletableFuture.runAsync(() -&gt; {\n            long costTime = System.currentTimeMillis() - beginStartTime;\n            if (timeout &gt; costTime) {\n                try {\n                    sendDefaultImpl(msg, CommunicationMode.ASYNC, sendCallback, timeout - costTime);\n                } catch (Exception e) {\n                    sendCallback.onException(e);\n                }\n            } else {\n                sendCallback.onException(\n                        new RemotingTooMuchRequestException(&quot;DEFAULT ASYNC send call timeout&quot;));\n            }\n        }, executor);","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474927,"discussion_content":"æˆ‘ç†è§£ä¸»è¦çš„åŸå› é™¤äº†è¶…æ—¶æ—¶é—´çš„è®¡ç®—ä¸å‡†ç¡®ä»¥å¤–ï¼Œæ›´é‡è¦çš„åŸå› æ˜¯è¿™ä¸ªå¼‚æ­¥æ–¹æ³•è¿˜æœ‰æ”¹è¿›çš„ç©ºé—´ï¼Œå…¶å®å¯ä»¥ç›´æ¥ç»“åˆNettyåšåˆ°ä¸éœ€è¦Executorã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574123954,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132382,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1568104167,"is_pvip":false,"replies":[{"id":50691,"content":"ä¸ªäººå»ºè®®å­¦ä¹ Javaæˆ–è€…Goï¼Œè¿™ä¸¤ç§è¯­è¨€éƒ½æœ‰ä¸é”™çš„ç”Ÿæ€ç³»ç»Ÿï¼Œéƒ½å¯ä»¥ç”¨æ¥æ„å»ºå¤§è§„æ¨¡é›†ç¾¤ã€‚\n\nç›¸å¯¹æ¥è¯´ï¼ŒJavaçš„ç”Ÿæ€ç³»ç»Ÿæ›´å¼ºå¤§ï¼ŒGoæ¯”è¾ƒå¹´è½»ï¼Œæœ‰å¾ˆå¤šJavaä¸å…·å¤‡çš„è¯­è¨€ç‰¹æ€§ã€‚\n\nPythonæœ¬æ¥åªæ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œç‰¹åˆ«é€‚åˆå¼€å‘æœºå™¨å­¦ä¹ ç¨‹åºè€Œç«èµ·æ¥äº†ï¼Œå¦‚æœä½ ä¸æ˜¯ä»äº‹æœºå™¨å­¦ä¹ ç›¸å…³çš„ç ”å‘ï¼Œä¸å¤ªå»ºè®®ä½œä¸ºç¬¬ä¸€è¯­è¨€æ¥å­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568165136,"ip_address":"","comment_id":132382,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"       ç¼–ç¨‹è¯­è¨€çš„è¯Pythonæˆ–Goå¯ä»¥ä¹ˆï¼Ÿæå®¢æ—¶é—´é‡Œéƒ½æœ‰è´­ä¹°ï¼Œå°±æ˜¯å¿™ç€å…¶å®ƒè¯¾ç¨‹çš„å­¦ä¹ ï¼Œä¸€ç›´æ²¡é¡¾çš„ä¸Šç¼–ç¨‹è¯­è¨€çš„å­¦ä¹ ã€‚\n       ä»å¼€å§‹ä¸€è·¯è·Ÿåˆ°ç°åœ¨ï¼šç®—æ˜¯å°‘æ•°ä¸€ç›´åœ¨å®Œå…¨æ²¡æœ‰ç¼ºçš„è¯¾ï¼›å‰æœŸä¸€ç›´éè¾¹å­¦ä¹ è¾¹é’ˆå¯¹å¼€ç¯‡æ—¶çš„å­¦ä¹ ç›®æ ‡é’ˆå¯¹å½“ä¸‹å·¥ä½œç¯å¢ƒçš„Nosql DBå’ŒMQä½¿ç”¨ç‡çš„ä½ä¸‹çš„é—®é¢˜æ‰¾è§£å†³æ€è·¯å’Œæ–¹æ¡ˆï¼Œè¯¾åç¬”è®°ä¸»è¦åŒæ ·é›†ä¸­åœ¨æ€è·¯ä»¥åŠé’ˆå¯¹æ€è·¯çš„å›°æƒ‘æŸ¥ç–‘ä¸Šï¼Œä»£ç è¿™å—å®Œå…¨æ²¡é¡¾ä¸Šã€‚è™½ç„¶ä»£ç çš„æ€è·¯çœ‹çš„æ‡‚ï¼Œå‘ç°åŠ¨æ‰‹èƒ½åŠ›ç¡®å®éå¸¸æ¬ ç¼ºã€‚ä¸€è·¯å­¦åˆ°ç°åœ¨æ¢³ç†åˆ°ç°åœ¨æ•´ä½“æ–¹æ¡ˆå¤§è‡´å®šä¸‹æ¥ï¼šä»¥åŠæ—©æœŸçš„éƒ¨åˆ†è¯¾ç¨‹çš„ç»“æŸï¼›è¯¾ç¨‹çš„ä¸»è¦æ–¹æ¡ˆè‡ªå·±ä¼°è®¡åœ¨æŒæ¡æ€è·¯çš„åŸºç¡€ä¸Šå»è¡¥å¼ºCodingèƒ½åŠ›ã€‚è™½ç„¶DBAçš„Codingèƒ½åŠ›éƒ½æ¯”è¾ƒçƒ‚ï¼Œä¸è¿‡è¿˜æ˜¯å¾—è¾¹å­¦è¾¹å•ƒä¸‹æ¥ï¼›é€¼è‡ªå·±ä¸€ä¸‹æ€»èƒ½å‹‰å¼ºå†™å‡ºæ¥ï¼Œä¼°è®¡å°±æ˜¯æ•ˆç‡é—®é¢˜ã€ã€ã€MQè¿™å—PYæˆ–GOå“ªç§æ›´åˆé€‚ï¼Œæˆ–è€…è¯´éƒ½å¯ä»¥ï¼Ÿ\n        æ„Ÿè°¢è€å¸ˆä¸€è·¯çš„è¾›å‹¤æˆä¸šï¼šæˆè¯¾ä¹‹ä½™å°½åŠ›å»å¸®åŠ©å­¦ç”Ÿä»¬è§£æƒ‘ï¼Œè®©æˆ‘ä»¬èƒ½ä¸€è·¯èµ°æ¥ä¸€è·¯æˆé•¿ï¼›æ„¿è€å¸ˆæ•™å¸ˆèŠ‚å¿«ä¹ï¼Œè°¢è°¢è€å¸ˆçš„åˆ†äº«ã€‚","like_count":6,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466905,"discussion_content":"ä¸ªäººå»ºè®®å­¦ä¹ Javaæˆ–è€…Goï¼Œè¿™ä¸¤ç§è¯­è¨€éƒ½æœ‰ä¸é”™çš„ç”Ÿæ€ç³»ç»Ÿï¼Œéƒ½å¯ä»¥ç”¨æ¥æ„å»ºå¤§è§„æ¨¡é›†ç¾¤ã€‚\n\nç›¸å¯¹æ¥è¯´ï¼ŒJavaçš„ç”Ÿæ€ç³»ç»Ÿæ›´å¼ºå¤§ï¼ŒGoæ¯”è¾ƒå¹´è½»ï¼Œæœ‰å¾ˆå¤šJavaä¸å…·å¤‡çš„è¯­è¨€ç‰¹æ€§ã€‚\n\nPythonæœ¬æ¥åªæ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œç‰¹åˆ«é€‚åˆå¼€å‘æœºå™¨å­¦ä¹ ç¨‹åºè€Œç«èµ·æ¥äº†ï¼Œå¦‚æœä½ ä¸æ˜¯ä»äº‹æœºå™¨å­¦ä¹ ç›¸å…³çš„ç ”å‘ï¼Œä¸å¤ªå»ºè®®ä½œä¸ºç¬¬ä¸€è¯­è¨€æ¥å­¦ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568165136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132757,"user_name":"å¢™è§’å„¿çš„èŠ±","can_delete":false,"product_type":"c1","uid":1258474,"ip_address":"","ucode":"EE5CAD76175CCF","user_header":"","comment_is_top":false,"comment_ctime":1568214192,"is_pvip":false,"replies":[{"id":50886,"content":"æœ‰ä¸€ä¸ªé—®é¢˜ä½ éœ€è¦è€ƒè™‘ï¼Œä½ æ˜¯ä¸æ˜¯éœ€è¦ä¸ºæ¯ä¸€ä¸ªä¼šè¯ï¼ˆæ¯”å¦‚ï¼Œå¼ ä¸‰å’Œæå››ä¹‹é—´å¼€å§‹èŠå¤©ï¼Œæˆä¸ºä¸€ä¸ªä¼šè¯ï¼‰åœ¨MQä¸­å‡‘åˆ›å»ºä¸€ä¸ªTopicå‘¢ï¼Ÿè¿™æ ·ä¼šå¯¼è‡´MQé›†ç¾¤ä¸­çš„Topicæ•°é‡éå¸¸å¤šã€‚å‡è®¾ä½ çš„ç³»ç»Ÿæ³¨å†Œç”¨æˆ·æ•°æ˜¯nï¼Œç†è®ºä¸Šæœ€å¤šä¼šéœ€è¦ n x n ä¸ªTopicï¼Œè¿™è¿˜æ²¡æœ‰è®¡ç®—ç”¨æˆ·æ‹‰çš„ç¾¤ã€‚\n\nå¯¹äºæµ·é‡çš„Topicæ•°é‡ï¼ŒRocketMQå’ŒKafkaéƒ½ä¸æ˜¯å¤ªå¥½çš„é€‰æ‹©ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568251706,"ip_address":"","comment_id":132757,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆ å¯¹äºimæœåŠ¡å™¨é›†ç¾¤ï¼Œå®¢æˆ·ç«¯çš„socketå‡å¸ƒåœ¨å„ä¸ªæœåŠ¡å™¨ï¼Œç›®æ ‡socketä¸åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šæ—¶ï¼ŒæœåŠ¡å™¨é—´éœ€è¦è½¬å‘æ¶ˆæ¯ï¼Œè¿™ä¸ªåœºæ™¯éœ€è¦ä½å»¶è¿Ÿæ— éœ€æŒä¹…åŒ–ï¼ŒæœåŠ¡å™¨é—´ç”¨redisçš„å‘å¸ƒè®¢é˜…ï¼Œå› å…¶èµ°å†…å­˜è¾ƒå¿«ï¼Œå³ä½¿æ–­ç”µè¿˜å¯ä»¥èµ°åº“ã€‚imæœåŠ¡å™¨å’Œå…¥åº“æœåŠ¡é—´ç”¨å…¶ä»–mqè§£è€¦ï¼Œå› ä¸ºè¿™ä¸ªç¯èŠ‚éœ€è¦æŒä¹…åŒ–ï¼Œæ‰€ä»¥é€‰rocketmqæˆ–kafkaï¼Œä½†kafkaä¼šå»¶è¿Ÿæ‰¹é‡å‘å¸ƒæ¶ˆæ¯ æ‰€ä»¥é€‰rocketmqï¼Œè¿™ä¸¤ä¸ªç¯èŠ‚çš„mqé€‰å‹å¯è¡Œå—ã€‚","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466905,"discussion_content":"ä¸ªäººå»ºè®®å­¦ä¹ Javaæˆ–è€…Goï¼Œè¿™ä¸¤ç§è¯­è¨€éƒ½æœ‰ä¸é”™çš„ç”Ÿæ€ç³»ç»Ÿï¼Œéƒ½å¯ä»¥ç”¨æ¥æ„å»ºå¤§è§„æ¨¡é›†ç¾¤ã€‚\n\nç›¸å¯¹æ¥è¯´ï¼ŒJavaçš„ç”Ÿæ€ç³»ç»Ÿæ›´å¼ºå¤§ï¼ŒGoæ¯”è¾ƒå¹´è½»ï¼Œæœ‰å¾ˆå¤šJavaä¸å…·å¤‡çš„è¯­è¨€ç‰¹æ€§ã€‚\n\nPythonæœ¬æ¥åªæ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œç‰¹åˆ«é€‚åˆå¼€å‘æœºå™¨å­¦ä¹ ç¨‹åºè€Œç«èµ·æ¥äº†ï¼Œå¦‚æœä½ ä¸æ˜¯ä»äº‹æœºå™¨å­¦ä¹ ç›¸å…³çš„ç ”å‘ï¼Œä¸å¤ªå»ºè®®ä½œä¸ºç¬¬ä¸€è¯­è¨€æ¥å­¦ä¹ ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568165136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147211,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":1595382,"ip_address":"","ucode":"A77322C4E07B2D","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/f6/2c7ac1ad.jpg","comment_is_top":false,"comment_ctime":1572841004,"is_pvip":false,"replies":[{"id":57129,"content":"PullConsumerï¼šä¸šåŠ¡ä»£ç åœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨consumer.pullxxxxæ–¹æ³•ä»consumeræ‹‰æ¶ˆæ¯ï¼›PushConsumerï¼šå½“æœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œconsumerä¼šè‡ªåŠ¨è°ƒç”¨messageListener(ä¸šåŠ¡å¤„ç†æ¶ˆæ¯çš„ä»£ç )ã€‚\n\nè¿™ä¸¤ç§æ–¹å¼ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨è€…è¿›è¡Œçº¿ç¨‹æ§åˆ¶ï¼Œæ²¡æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1573007518,"ip_address":"","comment_id":147211,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆç»§ç»­è¯·æ•™é—®é¢˜ï¼š\n1.DefaultMQPullConsumerå’ŒDefaultMQPushConsumeræœ‰ä»€ä¹ˆåŒºåˆ«\n2.ä¸ºä»€ä¹ˆpullConsumerçš„å¯åŠ¨å’Œproducerçš„å¯åŠ¨åœ¨åŒä¸€ä¸ªstartæ–¹æ³•é‡Œï¼ˆæœ€ç»ˆéƒ½åœ¨MQClientInstance#starté‡Œï¼‰\n3.rebalanceServiceæœåŠ¡æ˜¯å¹²å˜›çš„","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467109,"discussion_content":"æœ‰ä¸€ä¸ªé—®é¢˜ä½ éœ€è¦è€ƒè™‘ï¼Œä½ æ˜¯ä¸æ˜¯éœ€è¦ä¸ºæ¯ä¸€ä¸ªä¼šè¯ï¼ˆæ¯”å¦‚ï¼Œå¼ ä¸‰å’Œæå››ä¹‹é—´å¼€å§‹èŠå¤©ï¼Œæˆä¸ºä¸€ä¸ªä¼šè¯ï¼‰åœ¨MQä¸­å‡‘åˆ›å»ºä¸€ä¸ªTopicå‘¢ï¼Ÿè¿™æ ·ä¼šå¯¼è‡´MQé›†ç¾¤ä¸­çš„Topicæ•°é‡éå¸¸å¤šã€‚å‡è®¾ä½ çš„ç³»ç»Ÿæ³¨å†Œç”¨æˆ·æ•°æ˜¯nï¼Œç†è®ºä¸Šæœ€å¤šä¼šéœ€è¦ n x n ä¸ªTopicï¼Œè¿™è¿˜æ²¡æœ‰è®¡ç®—ç”¨æˆ·æ‹‰çš„ç¾¤ã€‚\n\nå¯¹äºæµ·é‡çš„Topicæ•°é‡ï¼ŒRocketMQå’ŒKafkaéƒ½ä¸æ˜¯å¤ªå¥½çš„é€‰æ‹©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568251706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2019655,"avatar":"","nickname":"Geek_92d619","note":"","ucode":"BE0E322B9178E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349883,"discussion_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆè¦è€ƒè™‘ä¸ºæ¯ä¸ªä¼šè¯åˆ›å»ºä¸€ä¸ªTopicï¼Œè¿™æ˜¯å‡ºäºä»€ä¹ˆæ ·çš„è€ƒè™‘ï¼Ÿç”¨åŒä¸€ä¸ªtopicï¼Œå†é€šè¿‡å…¶ä»–è‡ªå®šä¹‰æ ‡è®°æ¥åŒºåˆ†ä¼šè¯ä¸è¡Œä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613616303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101526,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ce/d6/ab8e6178.jpg","nickname":"Rå¸ˆå‚…","note":"","ucode":"74FC6975E881B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346793,"discussion_content":"è€å¸ˆï¼Œæˆ‘ä»¬æ˜¯ç”¨rabbitmqåšçš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä½†æ˜¯ä¹Ÿé‡åˆ°äº†queue sizeæš´æ¶¨çš„é—®é¢˜ã€‚ç½‘ä¸Šå¾ˆå¤šSTOMP over websokectçš„sampleï¼Œå¦‚æœä¸­é—´ä»¶æ˜¯MQ brokerï¼Œå¥½åƒéƒ½æ˜¯ä¸€ä¸ªuseråˆ›å»ºä¸€ä¸ªqueueçš„æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612065085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178891,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1581847391,"is_pvip":false,"replies":[{"id":69994,"content":"A1: å› ä¸ºå®ƒæœåŠ¡çš„ç±»æ²¡æœ‰è®¾è®¡æˆçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡å¿…è¦ç”¨volatileå…³é”®å­—ã€‚\n\nA2ï¼šwriteQueueNumså’ŒreadQueueNumsæ˜¯åœ¨æœåŠ¡ç«¯æ¥æ§åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹çš„æ—¶å€™ï¼Œåˆ†åˆ«è®¿é—®å¤šå°‘ä¸ªé˜Ÿåˆ—ã€‚å› ä¸ºå¯¹ä¸»é¢˜æ¥è¯´ï¼Œç”Ÿäº§è€…çš„å®ä¾‹æ•°å’Œæ¶ˆè´¹è€…çš„å®ä¾‹æ•°æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå‚æ•°æ˜¯ä¸å…³è”çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1582246785,"ip_address":"","comment_id":178891,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"1ã€ä¸ºä»€ä¹ˆServiceStateå˜é‡ä¸è®¾ç½®æˆvolatileå‘¢ï¼Ÿ\n2ã€æ¶ˆè´¹è€…MessageQueue(readQueueNums)æ€ä¹ˆå’Œç”Ÿäº§è€…MessageQueue(writeQueueNums)å…³è”èµ·æ¥çš„å‘¢ï¼Ÿæ¯”å¦‚readQueueNums=19ä¸ªï¼ŒwriteQueueNums=23ä¸ªï¼Œå®ƒä»¬æ˜¯æ€ä¹ˆå…³è”çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484008,"discussion_content":"A1: å› ä¸ºå®ƒæœåŠ¡çš„ç±»æ²¡æœ‰è®¾è®¡æˆçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡å¿…è¦ç”¨volatileå…³é”®å­—ã€‚\n\nA2ï¼šwriteQueueNumså’ŒreadQueueNumsæ˜¯åœ¨æœåŠ¡ç«¯æ¥æ§åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹çš„æ—¶å€™ï¼Œåˆ†åˆ«è®¿é—®å¤šå°‘ä¸ªé˜Ÿåˆ—ã€‚å› ä¸ºå¯¹ä¸»é¢˜æ¥è¯´ï¼Œç”Ÿäº§è€…çš„å®ä¾‹æ•°å’Œæ¶ˆè´¹è€…çš„å®ä¾‹æ•°æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå‚æ•°æ˜¯ä¸å…³è”çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582246785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151559,"user_name":"Standly","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1573740020,"is_pvip":false,"replies":[{"id":58287,"content":"è¿™ä¸¤ä¸ªæ–¹æ³•æ²¡æœ‰åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°å†…éƒ¨ï¼Œè°ƒç”¨çš„æ–¹æ³•éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1573779248,"ip_address":"","comment_id":151559,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"DefaultMQProducerImplçš„startå’Œshutdownæ–¹æ³•æ²¡æœ‰åŠ åŒæ­¥ï¼ŒserviceStateä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šæˆå‘˜å˜é‡æ²¡åŠ volatileï¼Œä¸ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474533,"discussion_content":"è¿™ä¸¤ä¸ªæ–¹æ³•æ²¡æœ‰åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°å†…éƒ¨ï¼Œè°ƒç”¨çš„æ–¹æ³•éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573779248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135155,"user_name":"Standly","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1569046724,"is_pvip":false,"replies":[{"id":51965,"content":"åˆ†åˆ«åœ¨å“ªä¸¤ä¸ªåœ°æ–¹æ‰§è¡Œçš„2æ¬¡å¯åŠ¨å‘¢ï¼Ÿ\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569202847,"ip_address":"","comment_id":135155,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"çœ‹äº†Rocketmq produceræºç ï¼Œå…³äºproducerè¿™å—æœ‰ä¸ªç–‘é—®ä¸çŸ¥é“èƒ½å¦è¯·æ•™ä¸‹ï¼Ÿå°±æ˜¯producerå¯åŠ¨è¿‡ç¨‹ä¸­ä¸ºä»€ä¹ˆMQClientInstance mQClientFactory.start()è¿™ä¸ªæ–¹æ³•éœ€è¦è¢«æ‰§è¡Œ2æ¬¡ï¼Ÿ2æ¬¡çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468071,"discussion_content":"åˆ†åˆ«åœ¨å“ªä¸¤ä¸ªåœ°æ–¹æ‰§è¡Œçš„2æ¬¡å¯åŠ¨å‘¢ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569202847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145352,"user_name":". ã€‚o O","can_delete":false,"product_type":"c1","uid":1273146,"ip_address":"","ucode":"79767AC422D775","user_header":"https://static001.geekbang.org/account/avatar/00/13/6d/3a/dfda3cbd.jpg","comment_is_top":false,"comment_ctime":1572257095,"is_pvip":false,"replies":[{"id":56297,"content":"å¼‚æ­¥å‘é€ä»ç„¶å¯ä»¥ä¿è¯ä¸¥æ ¼é¡ºåºï¼Œä½†éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š\n\n1. éœ€è¦å•çº¿ç¨‹å¼‚æ­¥å‘é€ï¼›\n2. éœ€è¦è®°å½•ä¸€ä¸ªé€’å¢æµæ°´å·ï¼Œä¿è¯æ¯ä¸ªå‘å‡ºçš„æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªæµæ°´å·ï¼Œå¦‚æœæŸä¸ªæµæ°´å·çš„æ¶ˆæ¯å‘é€å‡ºé”™ï¼Œéœ€è¦é‡å‘è¿™ä¸ªæµæ°´å·ä¹‹åçš„æ‰€æœ‰æ¶ˆæ¯ã€‚æ¯”å¦‚ï¼Œè¿ç»­å¼‚æ­¥å‘é€12345è¿™5æ¡æ¶ˆæ¯ï¼Œå‡å¦‚å·²ç»å¼‚æ­¥å‘é€äº†12345ï¼Œç„¶åå¼‚æ­¥æ£€æŸ¥å‘é€ç»“æœçš„æ—¶å€™å‘ç°3å‘é€å¤±è´¥äº†ï¼Œéœ€è¦ä»3å¼€å§‹é‡å‘ã€‚ä¹Ÿå°±æ˜¯æŒ‰é¡ºåºé‡å‘345ã€‚\n3. æ¶ˆè´¹é€»è¾‘éœ€è¦å¹‚ç­‰ï¼Œèƒ½æ¥å—2ä¸­çš„è¿™ç§æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¶åˆ°çš„æ¶ˆæ¯æœ‰å¯èƒ½æ˜¯ï¼š12ï¼ˆ3ä¸¢äº†ï¼‰45 345ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1572397823,"ip_address":"","comment_id":145352,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜,å¦‚æœå¼‚æ­¥å‘é€çš„è¯,å°±æ˜¯æŠŠå‘é€é€»è¾‘å°è£…æˆä»»åŠ¡æ”¾åˆ°çº¿ç¨‹æ± é‡Œå»å¤„ç†,é‚£ä¹ˆæ˜¯ä¸æ˜¯å°±æ²¡æ³•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§äº†å‘¢?å“ªæ€•æ˜¯é€šè¿‡keyå“ˆå¸Œåˆ°ä¸€ä¸ªåŒä¸€ä¸ªé˜Ÿåˆ—,ä½†æ˜¯å‘é€æ¶ˆæ¯çš„ä»»åŠ¡æ‰§è¡Œå…ˆåé¡ºåºæ²¡æ³•ä¿è¯å§?","like_count":35,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472352,"discussion_content":"å¼‚æ­¥å‘é€ä»ç„¶å¯ä»¥ä¿è¯ä¸¥æ ¼é¡ºåºï¼Œä½†éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š\n\n1. éœ€è¦å•çº¿ç¨‹å¼‚æ­¥å‘é€ï¼›\n2. éœ€è¦è®°å½•ä¸€ä¸ªé€’å¢æµæ°´å·ï¼Œä¿è¯æ¯ä¸ªå‘å‡ºçš„æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªæµæ°´å·ï¼Œå¦‚æœæŸä¸ªæµæ°´å·çš„æ¶ˆæ¯å‘é€å‡ºé”™ï¼Œéœ€è¦é‡å‘è¿™ä¸ªæµæ°´å·ä¹‹åçš„æ‰€æœ‰æ¶ˆæ¯ã€‚æ¯”å¦‚ï¼Œè¿ç»­å¼‚æ­¥å‘é€12345è¿™5æ¡æ¶ˆæ¯ï¼Œå‡å¦‚å·²ç»å¼‚æ­¥å‘é€äº†12345ï¼Œç„¶åå¼‚æ­¥æ£€æŸ¥å‘é€ç»“æœçš„æ—¶å€™å‘ç°3å‘é€å¤±è´¥äº†ï¼Œéœ€è¦ä»3å¼€å§‹é‡å‘ã€‚ä¹Ÿå°±æ˜¯æŒ‰é¡ºåºé‡å‘345ã€‚\n3. æ¶ˆè´¹é€»è¾‘éœ€è¦å¹‚ç­‰ï¼Œèƒ½æ¥å—2ä¸­çš„è¿™ç§æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¶åˆ°çš„æ¶ˆæ¯æœ‰å¯èƒ½æ˜¯ï¼š12ï¼ˆ3ä¸¢äº†ï¼‰45 345ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572397823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1020492,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/92/4c/40783447.jpg","nickname":"ä½•éª§","note":"","ucode":"11DCC74CE2F300","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":585940,"discussion_content":"æ™•å€’ è¿™æ˜¯rabbitmqçš„å®ç°æ–¹å¼å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661913603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":472352,"ip_address":"å¹¿ä¸œ","group_id":0},"score":585940,"extra":""}]},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":637260,"discussion_content":"è¦ä¿è¯é¡ºåºï¼Œè‚¯å®šä¸èƒ½ç”¨çº¿ç¨‹æ± äº†ï¼Œæˆ–è€…è¯´çº¿ç¨‹æ± å¤§å°å¾—æ˜¯ 1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1708223188,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132615,"user_name":"å¾®å¾®ä¸€ç¬‘","can_delete":false,"product_type":"c1","uid":1250327,"ip_address":"","ucode":"CFA7ABE81D0B99","user_header":"https://static001.geekbang.org/account/avatar/00/13/14/17/8763dced.jpg","comment_is_top":false,"comment_ctime":1568173245,"is_pvip":false,"replies":[{"id":50996,"content":"A1ï¼šè¿™ä¸ªå‚æ•°æ˜¯æ§åˆ¶å®¢æˆ·ç«¯åœ¨ç”Ÿäº§æ¶ˆè´¹çš„æ—¶å€™ä¼šè®¿é—®åŒä¸€ä¸ªä¸»é¢˜çš„é˜Ÿåˆ—æ•°é‡ï¼Œå‡è®¾ä¸€ä¸ªä¸»é¢˜æœ‰100ä¸ªé˜Ÿåˆ—ï¼Œå¯¹äºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒæ²¡å¿…è¦100ä¸ªé˜Ÿåˆ—éƒ½è®¿é—®ï¼Œåªéœ€è¦ä½¿ç”¨å…¶ä¸­çš„å‡ ä¸ªé˜Ÿåˆ—å°±è¡Œäº†ã€‚\n\nA2ï¼šwriteQueueNumså’ŒreadQueueNumsæ˜¯åœ¨æœåŠ¡ç«¯æ¥æ§åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹çš„æ—¶å€™ï¼Œåˆ†åˆ«è®¿é—®å¤šå°‘ä¸ªé˜Ÿåˆ—ã€‚è¿™ä¸¤ä¸ªå‚æ•°æ˜¯æœåŠ¡ç«¯å‚æ•°ï¼Œä¼˜å…ˆçº§æ˜¯é«˜äºå®¢æˆ·ç«¯æ§åˆ¶çš„å‚æ•°defaultTopicQueueNumsçš„ã€‚permæ˜¯è®¾ç½®Topicè¯»å†™ç­‰æƒé™çš„å‚æ•°ï¼Œå…·ä½“å¦‚ä½•è®¾ç½®ä½ éœ€è¦å»çœ‹ä¸€ä¸‹æ–‡æ¡£ã€‚\n\nA3ï¼šå¦‚æœå±€é™äºï¼šâ€œAPP&#47;æµè§ˆå™¨ --[httpåè®®]--&gt;web æœåŠ¡â€è¿™æ ·çš„åœºæ™¯ï¼Œå—é™äºhttpåè®®ï¼Œå‰ç«¯å’ŒwebæœåŠ¡çš„äº¤äº’ä¸€å®šæ˜¯å•å‘å’ŒåŒæ­¥çš„ã€‚ä¸€å®šè¦ç­‰å¾…ç»“æœç„¶åè¿”å›å“åº”ï¼Œä½†æ˜¯ï¼Œè¿™ç§æƒ…å†µä»ç„¶å¯ä»¥ä½¿ç”¨å¼‚æ­¥çš„æ–¹æ³•ï¼Œè¿™ä¸ªæˆ‘åœ¨â€œ08ç­”ç–‘â€ä¸­è§£é‡Šç§’æ€çš„æ—¶å€™å…¶å®å·²ç»ç»™å‡ºäº†ç­”æ¡ˆã€‚å¾ˆå¤šåŒå­¦ä¸ç†è§£çš„åŸå› æ˜¯æ€ç»´è¢«webæ¡†æ¶ç»™é™åˆ¶ä½äº†ã€‚åƒspring webè¿™ç§æ¡†æ¶ï¼Œå®ƒæŠŠå¤„ç†webè¯·æ±‚éƒ½ç»™ä½ å°è£…å¥½äº†ï¼Œä½ åªè¦å†™ä¸€ä¸ªhandlerå°±è¡Œäº†ï¼Œå¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªhandleråªèƒ½æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œå®ƒå¿…é¡»åœ¨è¿”å›å€¼ä¸­ç»™å‡ºå“åº”ç»“æœï¼Œæ‰€ä»¥å¯¼è‡´å¾ˆå¤šåŒå­¦çš„æ€ç»´è½¬ä¸è¿‡æ¥è¿™ä¸ªå¼¯å„¿ã€‚\n\nä½ å¯ä»¥ç»“åˆæˆ‘ä»¬è®²çš„å¼‚æ­¥ç½‘ç»œIOå†…å®¹æƒ³ä¸€ä¸‹ï¼Œhttpåè®®å‘ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œå°±æ˜¯å‘äº†ä¸€äº›æ•°æ®è¿‡æ¥ï¼ŒæœåŠ¡ç«¯å›å“åº”ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªè¿æ¥ä¸Šç»™å®ƒè¿”å›ä¸€äº›æ•°æ®å›å»å°±å¯ä»¥äº†ã€‚è‡³äºä»€ä¹ˆæ—¶å€™å¾€å›å‘å“åº”æ•°æ®ï¼Œå“ªä¸ªçº¿ç¨‹æ¥å‘ï¼Œæœ‰è¦æ±‚å—ï¼Ÿå¹¶æ²¡æœ‰ã€‚åªè¦åœ¨è¶…æ—¶ä¹‹å‰å‘å“åº”å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬è®²å¾—å¦‚ä½•æ¥å®ç°å¼‚æ­¥ç½‘ç»œIOçš„æ–¹æ³•å¤„ç†çš„ä¸å°±æ˜¯è¿™ç§æƒ…å†µå—ï¼Ÿ\n\nè¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯è¯´ä¸€å®šè¦åšæˆå’Œwebæ¡†æ¶ä¸€æ ·çš„åŒæ­¥å¤„ç†ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568429329,"ip_address":"","comment_id":132615,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆå¥½ï¼Œå…ˆç¥æ‚¨èŠ‚æ—¥å¿«ä¹ï¼ï¼ï¼æ‚¨è¾›è‹¦äº†~\næœ‰å‡ ä¸ªç–‘é—®éœ€è¦è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼š\nâ‘ ä»Šå¤©åœ¨çœ‹rocketMqæºç è¿‡ç¨‹ä¸­ï¼Œå‘ç°DefaultMQProduceræœ‰ä¸ªå±æ€§defaultTopicQueueNumsï¼Œå®ƒæ˜¯ç”¨æ¥è®¾ç½®topicçš„ConsumeQueueçš„æ•°é‡çš„å—ï¼Ÿæˆ‘ä¹‹å‰çš„ç†è§£æ˜¯ï¼ŒconsumeQueueçš„æ•°é‡æ˜¯åˆ›å»ºtopicçš„æ—¶å€™æŒ‡å®šçš„ï¼Œè·Ÿproduceræ²¡æœ‰å…³ç³»ï¼Œé‚£è¿™ä¸ªå‚æ•°åˆæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ\nâ‘¡åœ¨RocketMqçš„æ§åˆ¶å°ä¸Šå¯ä»¥åˆ›å»ºtopicï¼Œéœ€è¦æŒ‡å®šwriteQueueNumsï¼ŒreadQueueNumsï¼Œpermï¼Œè¿™ä¸‰ä¸ªå‚æ•°æ˜¯æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™é‡Œä¸ºä»€ä¹ˆè¦åŒºåˆ†å†™é˜Ÿåˆ—è·Ÿè¯»é˜Ÿåˆ—å‘¢ï¼Ÿä¸åº”è¯¥åªæœ‰ä¸€ä¸ªconsumeQueueå—ï¼Ÿ\nâ‘¢ç”¨æˆ·è¯·æ±‚--&gt;å¼‚æ­¥å¤„ç†---&gt;ç”¨æˆ·æ”¶åˆ°å“åº”ç»“æœã€‚å¼‚æ­¥å¤„ç†çš„ä½œç”¨æ˜¯ï¼šç”¨æ›´å°‘çš„çº¿ç¨‹æ¥æ¥æ”¶æ›´å¤šçš„ç”¨æˆ·è¯·æ±‚ï¼Œç„¶åå¼‚æ­¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚è€å¸ˆï¼Œå¼‚æ­¥å¤„ç†å®Œåï¼Œå¦‚ä½•å°†ç»“æœé€šçŸ¥ç»™åŸå…ˆçš„ç”¨æˆ·å‘¢ï¼Ÿå³ä½¿æœ‰å›è°ƒæ¥å£ï¼Œæˆ‘ç†è§£ä¹Ÿæ˜¯ç»™ç”¨æˆ·å‘ä¸ªçŸ­ä¿¡ä¹‹ç±»çš„å¤„ç†ï¼Œé‚£ç»“æœæ€ä¹ˆè¿”å›åˆ°å®šä½åˆ°ç”¨æˆ·ï¼Œå¹¶è¿”å›ä¹‹å‰è¯·æ±‚çš„é¡µé¢ä¸Šå‘¢ï¼Ÿéœ€è¦è®©ä¹‹å‰çš„è¯·æ±‚çº¿ç¨‹é˜»å¡å—ï¼Ÿé‚£ä¹Ÿæ— æ³•è¾¾åˆ°ã€ç”¨æ›´å°‘çš„çº¿ç¨‹æ¥æ¥æ”¶æ›´å¤šçš„ç”¨æˆ·è¯·æ±‚ã€‘çš„ç›®çš„ä¸«ã€‚\næœ›è€å¸ˆèƒ½æŒ‡ç‚¹è¿·æ´¥~~~","like_count":23,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467038,"discussion_content":"A1ï¼šè¿™ä¸ªå‚æ•°æ˜¯æ§åˆ¶å®¢æˆ·ç«¯åœ¨ç”Ÿäº§æ¶ˆè´¹çš„æ—¶å€™ä¼šè®¿é—®åŒä¸€ä¸ªä¸»é¢˜çš„é˜Ÿåˆ—æ•°é‡ï¼Œå‡è®¾ä¸€ä¸ªä¸»é¢˜æœ‰100ä¸ªé˜Ÿåˆ—ï¼Œå¯¹äºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒæ²¡å¿…è¦100ä¸ªé˜Ÿåˆ—éƒ½è®¿é—®ï¼Œåªéœ€è¦ä½¿ç”¨å…¶ä¸­çš„å‡ ä¸ªé˜Ÿåˆ—å°±è¡Œäº†ã€‚\n\nA2ï¼šwriteQueueNumså’ŒreadQueueNumsæ˜¯åœ¨æœåŠ¡ç«¯æ¥æ§åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹çš„æ—¶å€™ï¼Œåˆ†åˆ«è®¿é—®å¤šå°‘ä¸ªé˜Ÿåˆ—ã€‚è¿™ä¸¤ä¸ªå‚æ•°æ˜¯æœåŠ¡ç«¯å‚æ•°ï¼Œä¼˜å…ˆçº§æ˜¯é«˜äºå®¢æˆ·ç«¯æ§åˆ¶çš„å‚æ•°defaultTopicQueueNumsçš„ã€‚permæ˜¯è®¾ç½®Topicè¯»å†™ç­‰æƒé™çš„å‚æ•°ï¼Œå…·ä½“å¦‚ä½•è®¾ç½®ä½ éœ€è¦å»çœ‹ä¸€ä¸‹æ–‡æ¡£ã€‚\n\nA3ï¼šå¦‚æœå±€é™äºï¼šâ€œAPP/æµè§ˆå™¨ --[httpåè®®]--&amp;gt;web æœåŠ¡â€è¿™æ ·çš„åœºæ™¯ï¼Œå—é™äºhttpåè®®ï¼Œå‰ç«¯å’ŒwebæœåŠ¡çš„äº¤äº’ä¸€å®šæ˜¯å•å‘å’ŒåŒæ­¥çš„ã€‚ä¸€å®šè¦ç­‰å¾…ç»“æœç„¶åè¿”å›å“åº”ï¼Œä½†æ˜¯ï¼Œè¿™ç§æƒ…å†µä»ç„¶å¯ä»¥ä½¿ç”¨å¼‚æ­¥çš„æ–¹æ³•ï¼Œè¿™ä¸ªæˆ‘åœ¨â€œ08ç­”ç–‘â€ä¸­è§£é‡Šç§’æ€çš„æ—¶å€™å…¶å®å·²ç»ç»™å‡ºäº†ç­”æ¡ˆã€‚å¾ˆå¤šåŒå­¦ä¸ç†è§£çš„åŸå› æ˜¯æ€ç»´è¢«webæ¡†æ¶ç»™é™åˆ¶ä½äº†ã€‚åƒspring webè¿™ç§æ¡†æ¶ï¼Œå®ƒæŠŠå¤„ç†webè¯·æ±‚éƒ½ç»™ä½ å°è£…å¥½äº†ï¼Œä½ åªè¦å†™ä¸€ä¸ªhandlerå°±è¡Œäº†ï¼Œå¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªhandleråªèƒ½æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œå®ƒå¿…é¡»åœ¨è¿”å›å€¼ä¸­ç»™å‡ºå“åº”ç»“æœï¼Œæ‰€ä»¥å¯¼è‡´å¾ˆå¤šåŒå­¦çš„æ€ç»´è½¬ä¸è¿‡æ¥è¿™ä¸ªå¼¯å„¿ã€‚\n\nä½ å¯ä»¥ç»“åˆæˆ‘ä»¬è®²çš„å¼‚æ­¥ç½‘ç»œIOå†…å®¹æƒ³ä¸€ä¸‹ï¼Œhttpåè®®å‘ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œå°±æ˜¯å‘äº†ä¸€äº›æ•°æ®è¿‡æ¥ï¼ŒæœåŠ¡ç«¯å›å“åº”ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªè¿æ¥ä¸Šç»™å®ƒè¿”å›ä¸€äº›æ•°æ®å›å»å°±å¯ä»¥äº†ã€‚è‡³äºä»€ä¹ˆæ—¶å€™å¾€å›å‘å“åº”æ•°æ®ï¼Œå“ªä¸ªçº¿ç¨‹æ¥å‘ï¼Œæœ‰è¦æ±‚å—ï¼Ÿå¹¶æ²¡æœ‰ã€‚åªè¦åœ¨è¶…æ—¶ä¹‹å‰å‘å“åº”å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬è®²å¾—å¦‚ä½•æ¥å®ç°å¼‚æ­¥ç½‘ç»œIOçš„æ–¹æ³•å¤„ç†çš„ä¸å°±æ˜¯è¿™ç§æƒ…å†µå—ï¼Ÿ\n\nè¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯è¯´ä¸€å®šè¦åšæˆå’Œwebæ¡†æ¶ä¸€æ ·çš„åŒæ­¥å¤„ç†ã€‚\n\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1568429329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267905,"discussion_content":"å¦‚æœå†™é˜Ÿåˆ—è®¾ç½®8ä¸ªï¼Œè€Œè¯»é˜Ÿåˆ—è®¾ç½®4ä¸ªä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589707712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049360,"avatar":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","nickname":"Switch","note":"","ucode":"D8A7F7F6A0BEA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39862,"discussion_content":"è€å¸ˆ A3 çš„å†…å®¹è§£é™¤äº†ä¸€ç›´ä»¥æ¥å¯¹ web æ¡†æ¶ä¸ºå•¥è¦åŒæ­¥å“åº”çš„ç–‘æƒ‘ã€‚ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572004469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":152755,"user_name":"Standly","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1574075752,"is_pvip":false,"replies":[{"id":58723,"content":"æˆ‘ç†è§£ä¸»è¦çš„åŸå› é™¤äº†è¶…æ—¶æ—¶é—´çš„è®¡ç®—ä¸å‡†ç¡®ä»¥å¤–ï¼Œæ›´é‡è¦çš„åŸå› æ˜¯è¿™ä¸ªå¼‚æ­¥æ–¹æ³•è¿˜æœ‰æ”¹è¿›çš„ç©ºé—´ï¼Œå…¶å®å¯ä»¥ç›´æ¥ç»“åˆNettyåšåˆ°ä¸éœ€è¦Executorã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1574123954,"ip_address":"","comment_id":152755,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œå¼‚æ­¥å‘é€ä¸ºä»€ä¹ˆæ˜¯å¼ƒç”¨ï¼Œè¿˜æ˜¯æ²¡æœ‰çœ‹æ‡‚ï¼Œæ„Ÿè§‰è¶…æ—¶æ—¶é—´çš„è®¡ç®—æ²¡æœ‰é”™å•Šâ€¦","like_count":13,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467038,"discussion_content":"A1ï¼šè¿™ä¸ªå‚æ•°æ˜¯æ§åˆ¶å®¢æˆ·ç«¯åœ¨ç”Ÿäº§æ¶ˆè´¹çš„æ—¶å€™ä¼šè®¿é—®åŒä¸€ä¸ªä¸»é¢˜çš„é˜Ÿåˆ—æ•°é‡ï¼Œå‡è®¾ä¸€ä¸ªä¸»é¢˜æœ‰100ä¸ªé˜Ÿåˆ—ï¼Œå¯¹äºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒæ²¡å¿…è¦100ä¸ªé˜Ÿåˆ—éƒ½è®¿é—®ï¼Œåªéœ€è¦ä½¿ç”¨å…¶ä¸­çš„å‡ ä¸ªé˜Ÿåˆ—å°±è¡Œäº†ã€‚\n\nA2ï¼šwriteQueueNumså’ŒreadQueueNumsæ˜¯åœ¨æœåŠ¡ç«¯æ¥æ§åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹çš„æ—¶å€™ï¼Œåˆ†åˆ«è®¿é—®å¤šå°‘ä¸ªé˜Ÿåˆ—ã€‚è¿™ä¸¤ä¸ªå‚æ•°æ˜¯æœåŠ¡ç«¯å‚æ•°ï¼Œä¼˜å…ˆçº§æ˜¯é«˜äºå®¢æˆ·ç«¯æ§åˆ¶çš„å‚æ•°defaultTopicQueueNumsçš„ã€‚permæ˜¯è®¾ç½®Topicè¯»å†™ç­‰æƒé™çš„å‚æ•°ï¼Œå…·ä½“å¦‚ä½•è®¾ç½®ä½ éœ€è¦å»çœ‹ä¸€ä¸‹æ–‡æ¡£ã€‚\n\nA3ï¼šå¦‚æœå±€é™äºï¼šâ€œAPP/æµè§ˆå™¨ --[httpåè®®]--&amp;gt;web æœåŠ¡â€è¿™æ ·çš„åœºæ™¯ï¼Œå—é™äºhttpåè®®ï¼Œå‰ç«¯å’ŒwebæœåŠ¡çš„äº¤äº’ä¸€å®šæ˜¯å•å‘å’ŒåŒæ­¥çš„ã€‚ä¸€å®šè¦ç­‰å¾…ç»“æœç„¶åè¿”å›å“åº”ï¼Œä½†æ˜¯ï¼Œè¿™ç§æƒ…å†µä»ç„¶å¯ä»¥ä½¿ç”¨å¼‚æ­¥çš„æ–¹æ³•ï¼Œè¿™ä¸ªæˆ‘åœ¨â€œ08ç­”ç–‘â€ä¸­è§£é‡Šç§’æ€çš„æ—¶å€™å…¶å®å·²ç»ç»™å‡ºäº†ç­”æ¡ˆã€‚å¾ˆå¤šåŒå­¦ä¸ç†è§£çš„åŸå› æ˜¯æ€ç»´è¢«webæ¡†æ¶ç»™é™åˆ¶ä½äº†ã€‚åƒspring webè¿™ç§æ¡†æ¶ï¼Œå®ƒæŠŠå¤„ç†webè¯·æ±‚éƒ½ç»™ä½ å°è£…å¥½äº†ï¼Œä½ åªè¦å†™ä¸€ä¸ªhandlerå°±è¡Œäº†ï¼Œå¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªhandleråªèƒ½æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œå®ƒå¿…é¡»åœ¨è¿”å›å€¼ä¸­ç»™å‡ºå“åº”ç»“æœï¼Œæ‰€ä»¥å¯¼è‡´å¾ˆå¤šåŒå­¦çš„æ€ç»´è½¬ä¸è¿‡æ¥è¿™ä¸ªå¼¯å„¿ã€‚\n\nä½ å¯ä»¥ç»“åˆæˆ‘ä»¬è®²çš„å¼‚æ­¥ç½‘ç»œIOå†…å®¹æƒ³ä¸€ä¸‹ï¼Œhttpåè®®å‘ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œå°±æ˜¯å‘äº†ä¸€äº›æ•°æ®è¿‡æ¥ï¼ŒæœåŠ¡ç«¯å›å“åº”ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªè¿æ¥ä¸Šç»™å®ƒè¿”å›ä¸€äº›æ•°æ®å›å»å°±å¯ä»¥äº†ã€‚è‡³äºä»€ä¹ˆæ—¶å€™å¾€å›å‘å“åº”æ•°æ®ï¼Œå“ªä¸ªçº¿ç¨‹æ¥å‘ï¼Œæœ‰è¦æ±‚å—ï¼Ÿå¹¶æ²¡æœ‰ã€‚åªè¦åœ¨è¶…æ—¶ä¹‹å‰å‘å“åº”å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬è®²å¾—å¦‚ä½•æ¥å®ç°å¼‚æ­¥ç½‘ç»œIOçš„æ–¹æ³•å¤„ç†çš„ä¸å°±æ˜¯è¿™ç§æƒ…å†µå—ï¼Ÿ\n\nè¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯è¯´ä¸€å®šè¦åšæˆå’Œwebæ¡†æ¶ä¸€æ ·çš„åŒæ­¥å¤„ç†ã€‚\n\n","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1568429329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253384,"avatar":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","nickname":"Dovelol","note":"","ucode":"9B5DDF7720F307","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":267905,"discussion_content":"å¦‚æœå†™é˜Ÿåˆ—è®¾ç½®8ä¸ªï¼Œè€Œè¯»é˜Ÿåˆ—è®¾ç½®4ä¸ªä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589707712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049360,"avatar":"https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg","nickname":"Switch","note":"","ucode":"D8A7F7F6A0BEA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39862,"discussion_content":"è€å¸ˆ A3 çš„å†…å®¹è§£é™¤äº†ä¸€ç›´ä»¥æ¥å¯¹ web æ¡†æ¶ä¸ºå•¥è¦åŒæ­¥å“åº”çš„ç–‘æƒ‘ã€‚ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572004469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147297,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":1595382,"ip_address":"","ucode":"A77322C4E07B2D","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/f6/2c7ac1ad.jpg","comment_is_top":false,"comment_ctime":1572855479,"is_pvip":false,"replies":[{"id":57124,"content":"ç»™è®¤çœŸæ€è€ƒå®Œæˆä½œä¸šçš„åŒå­¦ç‚¹èµğŸ‘ï¼\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1573006661,"ip_address":"","comment_id":147297,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è¯¾åä½œä¸šï¼Œè¯·è€å¸ˆæŒ‡æ­£ï¼š\nä»æ–¹æ³•çš„æ³¨é‡Šçœ‹ï¼Œè¯´æ˜¯å› ä¸ºå¼‚å¸¸å¤„ç†å’Œè¶…æ—¶æ—¶é—´çš„è¯­ä¹‰ä¸å¯¹ã€‚\nå¼‚å¸¸å¤„ç†è¿™å—æˆ‘è§‰å¾—åº”è¯¥æ˜¯é‡‡ç”¨ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ï¼Œè€Œä¸åº”è¯¥æ˜¯æœ‰çš„å¼‚å¸¸æŠ›å‡ºï¼Œè€Œæœ‰çš„å¼‚å¸¸é€šè¿‡å›è°ƒæ–¹æ³•è¿”å›å®¢æˆ·ç«¯ã€‚\nå†è¯´è¶…æ—¶æ—¶é—´çš„é”™è¯¯è¯­ä¹‰ï¼Œä¸¥æ ¼æ¥è¯´åº”è¯¥æ˜¯ä¸å‡†ç¡®çš„è¶…æ—¶æ—¶é—´ï¼Œå› ä¸ºåœ¨runæ–¹æ³•é‡Œè¿›è¡Œæ—¶é—´åˆ¤æ–­ï¼ˆif (timeout &gt; costTime)ï¼‰å®é™…ä¸Šå·²ç»æ˜¯å¼€å§‹æ‰§è¡Œå½“å‰çº¿ç¨‹çš„æ—¶é—´ï¼Œè€Œä¹‹å‰çš„æ’é˜Ÿæ—¶é—´æ²¡æœ‰ç®—ï¼Œå› æ­¤æˆ‘æ”¹è¿›çš„æ–¹æ³•åº”è¯¥æ˜¯è¿™æ ·ï¼š\nCompletableFuture.runAsync(() -&gt; {\n            long costTime = System.currentTimeMillis() - beginStartTime;\n            if (timeout &gt; costTime) {\n                try {\n                    sendDefaultImpl(msg, CommunicationMode.ASYNC, sendCallback, timeout - costTime);\n                } catch (Exception e) {\n                    sendCallback.onException(e);\n                }\n            } else {\n                sendCallback.onException(\n                        new RemotingTooMuchRequestException(&quot;DEFAULT ASYNC send call timeout&quot;));\n            }\n        }, executor);","like_count":7,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473222,"discussion_content":"ç»™è®¤çœŸæ€è€ƒå®Œæˆä½œä¸šçš„åŒå­¦ç‚¹èµğŸ‘ï¼\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573006661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181055,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","nickname":"Standly","note":"","ucode":"805CC5784D3F76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":51348,"discussion_content":"è€å“¥ä½ è¿™ä¸ªæ”¹é€ ç‰ˆï¼Œè¶…æ—¶æ—¶é—´çš„è®¡ç®—å’ŒåŸç‰ˆæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿæ²¡çœ‹å‡ºæ¥å•Šã€‚ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1573835590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1721168,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/43/50/abb4ca1e.jpg","nickname":"å‡¡","note":"","ucode":"80C2A6452AB9EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181055,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","nickname":"Standly","note":"","ucode":"805CC5784D3F76","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":183904,"discussion_content":"CompletableFuture.runAsync","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582531015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":51348,"ip_address":"","group_id":0},"score":183904,"extra":""}]},{"author":{"id":1478242,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8e/62/435148c1.jpg","nickname":"SinKitwah","note":"","ucode":"BC39A39E17C95E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389505,"discussion_content":"æ²¡çœ‹å‡ºæ¥ä½ è¿™ä¸ªè¶…æ—¶æ—¶é—´å’ŒåŸç‰ˆè®¡ç®—å‡ºæ¥çš„ç»“æœå“ªé‡Œä¼šæœ‰åŒºåˆ«ï¼Ÿæˆ‘çš„ç†è§£æ˜¯è¿™é‡Œæ’é˜Ÿä¹‹åå†åœ¨nettyçš„çº¿ç¨‹æ± åˆæ’é˜Ÿä¸€æ¬¡å¯¼è‡´æ—¶é—´ä¸å‡†ç¡®ï¼Œè¯·æŒ‡æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629296758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112955,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fb/7b/2d4b38fb.jpg","nickname":"Jialin","note":"","ucode":"12583269732A75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381282,"discussion_content":"è°ƒç”¨sendæ–¹æ³•å…¥å£å¤„è·å–beginStartTimeï¼Œçº¿ç¨‹æ‰§è¡Œrunæ–¹æ³•å†…éƒ¨long costTime = System.currentTimeMillis() - beginStartTime;æŒ‰é“ç†è¿™é‡Œçš„è¶…æ—¶è¯­ä¹‰åº”è¯¥æ˜¯å¯¹çš„å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624980221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1880246,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/8ENRufE9XpK1CTV63hIg0UmncylH8ibAoIwmxVReAMwTGt7enOpuhKVLRS6k0H73ToWHAokPE6Tzu7b1icO6Z9icQ/132","nickname":"æ—è·ƒæ¶›","note":"","ucode":"9238AD646C042E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380202,"discussion_content":"ä¹‹å‰æ’é˜Ÿçš„æ—¶é—´æ²¡æœ‰ç®—æ˜¯å•¥æ„æ€ã€‚ã€‚ã€‚æœ‰ç‚¹ä¸æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624371850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1597566,"avatar":"","nickname":"Geek_yoriba","note":"","ucode":"9754362861F2B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1880246,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/8ENRufE9XpK1CTV63hIg0UmncylH8ibAoIwmxVReAMwTGt7enOpuhKVLRS6k0H73ToWHAokPE6Tzu7b1icO6Z9icQ/132","nickname":"æ—è·ƒæ¶›","note":"","ucode":"9238AD646C042E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407305,"discussion_content":"çº¿ç¨‹çœŸæ­£æ‰§è¡Œå‰çš„ åœ¨cpuæ’é˜Ÿçš„æ—¶é—´","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634974927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380202,"ip_address":"","group_id":0},"score":407305,"extra":""}]}]},{"had_liked":false,"id":132382,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1568104167,"is_pvip":false,"replies":[{"id":50691,"content":"ä¸ªäººå»ºè®®å­¦ä¹ Javaæˆ–è€…Goï¼Œè¿™ä¸¤ç§è¯­è¨€éƒ½æœ‰ä¸é”™çš„ç”Ÿæ€ç³»ç»Ÿï¼Œéƒ½å¯ä»¥ç”¨æ¥æ„å»ºå¤§è§„æ¨¡é›†ç¾¤ã€‚\n\nç›¸å¯¹æ¥è¯´ï¼ŒJavaçš„ç”Ÿæ€ç³»ç»Ÿæ›´å¼ºå¤§ï¼ŒGoæ¯”è¾ƒå¹´è½»ï¼Œæœ‰å¾ˆå¤šJavaä¸å…·å¤‡çš„è¯­è¨€ç‰¹æ€§ã€‚\n\nPythonæœ¬æ¥åªæ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œç‰¹åˆ«é€‚åˆå¼€å‘æœºå™¨å­¦ä¹ ç¨‹åºè€Œç«èµ·æ¥äº†ï¼Œå¦‚æœä½ ä¸æ˜¯ä»äº‹æœºå™¨å­¦ä¹ ç›¸å…³çš„ç ”å‘ï¼Œä¸å¤ªå»ºè®®ä½œä¸ºç¬¬ä¸€è¯­è¨€æ¥å­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568165136,"ip_address":"","comment_id":132382,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"       ç¼–ç¨‹è¯­è¨€çš„è¯Pythonæˆ–Goå¯ä»¥ä¹ˆï¼Ÿæå®¢æ—¶é—´é‡Œéƒ½æœ‰è´­ä¹°ï¼Œå°±æ˜¯å¿™ç€å…¶å®ƒè¯¾ç¨‹çš„å­¦ä¹ ï¼Œä¸€ç›´æ²¡é¡¾çš„ä¸Šç¼–ç¨‹è¯­è¨€çš„å­¦ä¹ ã€‚\n       ä»å¼€å§‹ä¸€è·¯è·Ÿåˆ°ç°åœ¨ï¼šç®—æ˜¯å°‘æ•°ä¸€ç›´åœ¨å®Œå…¨æ²¡æœ‰ç¼ºçš„è¯¾ï¼›å‰æœŸä¸€ç›´éè¾¹å­¦ä¹ è¾¹é’ˆå¯¹å¼€ç¯‡æ—¶çš„å­¦ä¹ ç›®æ ‡é’ˆå¯¹å½“ä¸‹å·¥ä½œç¯å¢ƒçš„Nosql DBå’ŒMQä½¿ç”¨ç‡çš„ä½ä¸‹çš„é—®é¢˜æ‰¾è§£å†³æ€è·¯å’Œæ–¹æ¡ˆï¼Œè¯¾åç¬”è®°ä¸»è¦åŒæ ·é›†ä¸­åœ¨æ€è·¯ä»¥åŠé’ˆå¯¹æ€è·¯çš„å›°æƒ‘æŸ¥ç–‘ä¸Šï¼Œä»£ç è¿™å—å®Œå…¨æ²¡é¡¾ä¸Šã€‚è™½ç„¶ä»£ç çš„æ€è·¯çœ‹çš„æ‡‚ï¼Œå‘ç°åŠ¨æ‰‹èƒ½åŠ›ç¡®å®éå¸¸æ¬ ç¼ºã€‚ä¸€è·¯å­¦åˆ°ç°åœ¨æ¢³ç†åˆ°ç°åœ¨æ•´ä½“æ–¹æ¡ˆå¤§è‡´å®šä¸‹æ¥ï¼šä»¥åŠæ—©æœŸçš„éƒ¨åˆ†è¯¾ç¨‹çš„ç»“æŸï¼›è¯¾ç¨‹çš„ä¸»è¦æ–¹æ¡ˆè‡ªå·±ä¼°è®¡åœ¨æŒæ¡æ€è·¯çš„åŸºç¡€ä¸Šå»è¡¥å¼ºCodingèƒ½åŠ›ã€‚è™½ç„¶DBAçš„Codingèƒ½åŠ›éƒ½æ¯”è¾ƒçƒ‚ï¼Œä¸è¿‡è¿˜æ˜¯å¾—è¾¹å­¦è¾¹å•ƒä¸‹æ¥ï¼›é€¼è‡ªå·±ä¸€ä¸‹æ€»èƒ½å‹‰å¼ºå†™å‡ºæ¥ï¼Œä¼°è®¡å°±æ˜¯æ•ˆç‡é—®é¢˜ã€ã€ã€MQè¿™å—PYæˆ–GOå“ªç§æ›´åˆé€‚ï¼Œæˆ–è€…è¯´éƒ½å¯ä»¥ï¼Ÿ\n        æ„Ÿè°¢è€å¸ˆä¸€è·¯çš„è¾›å‹¤æˆä¸šï¼šæˆè¯¾ä¹‹ä½™å°½åŠ›å»å¸®åŠ©å­¦ç”Ÿä»¬è§£æƒ‘ï¼Œè®©æˆ‘ä»¬èƒ½ä¸€è·¯èµ°æ¥ä¸€è·¯æˆé•¿ï¼›æ„¿è€å¸ˆæ•™å¸ˆèŠ‚å¿«ä¹ï¼Œè°¢è°¢è€å¸ˆçš„åˆ†äº«ã€‚","like_count":6,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473222,"discussion_content":"ç»™è®¤çœŸæ€è€ƒå®Œæˆä½œä¸šçš„åŒå­¦ç‚¹èµğŸ‘ï¼\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573006661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181055,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","nickname":"Standly","note":"","ucode":"805CC5784D3F76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":51348,"discussion_content":"è€å“¥ä½ è¿™ä¸ªæ”¹é€ ç‰ˆï¼Œè¶…æ—¶æ—¶é—´çš„è®¡ç®—å’ŒåŸç‰ˆæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿæ²¡çœ‹å‡ºæ¥å•Šã€‚ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1573835590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1721168,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/43/50/abb4ca1e.jpg","nickname":"å‡¡","note":"","ucode":"80C2A6452AB9EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181055,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","nickname":"Standly","note":"","ucode":"805CC5784D3F76","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":183904,"discussion_content":"CompletableFuture.runAsync","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582531015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":51348,"ip_address":"","group_id":0},"score":183904,"extra":""}]},{"author":{"id":1478242,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8e/62/435148c1.jpg","nickname":"SinKitwah","note":"","ucode":"BC39A39E17C95E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389505,"discussion_content":"æ²¡çœ‹å‡ºæ¥ä½ è¿™ä¸ªè¶…æ—¶æ—¶é—´å’ŒåŸç‰ˆè®¡ç®—å‡ºæ¥çš„ç»“æœå“ªé‡Œä¼šæœ‰åŒºåˆ«ï¼Ÿæˆ‘çš„ç†è§£æ˜¯è¿™é‡Œæ’é˜Ÿä¹‹åå†åœ¨nettyçš„çº¿ç¨‹æ± åˆæ’é˜Ÿä¸€æ¬¡å¯¼è‡´æ—¶é—´ä¸å‡†ç¡®ï¼Œè¯·æŒ‡æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629296758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112955,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fb/7b/2d4b38fb.jpg","nickname":"Jialin","note":"","ucode":"12583269732A75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381282,"discussion_content":"è°ƒç”¨sendæ–¹æ³•å…¥å£å¤„è·å–beginStartTimeï¼Œçº¿ç¨‹æ‰§è¡Œrunæ–¹æ³•å†…éƒ¨long costTime = System.currentTimeMillis() - beginStartTime;æŒ‰é“ç†è¿™é‡Œçš„è¶…æ—¶è¯­ä¹‰åº”è¯¥æ˜¯å¯¹çš„å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624980221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1880246,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/8ENRufE9XpK1CTV63hIg0UmncylH8ibAoIwmxVReAMwTGt7enOpuhKVLRS6k0H73ToWHAokPE6Tzu7b1icO6Z9icQ/132","nickname":"æ—è·ƒæ¶›","note":"","ucode":"9238AD646C042E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380202,"discussion_content":"ä¹‹å‰æ’é˜Ÿçš„æ—¶é—´æ²¡æœ‰ç®—æ˜¯å•¥æ„æ€ã€‚ã€‚ã€‚æœ‰ç‚¹ä¸æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624371850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1597566,"avatar":"","nickname":"Geek_yoriba","note":"","ucode":"9754362861F2B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1880246,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/8ENRufE9XpK1CTV63hIg0UmncylH8ibAoIwmxVReAMwTGt7enOpuhKVLRS6k0H73ToWHAokPE6Tzu7b1icO6Z9icQ/132","nickname":"æ—è·ƒæ¶›","note":"","ucode":"9238AD646C042E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407305,"discussion_content":"çº¿ç¨‹çœŸæ­£æ‰§è¡Œå‰çš„ åœ¨cpuæ’é˜Ÿçš„æ—¶é—´","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634974927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380202,"ip_address":"","group_id":0},"score":407305,"extra":""}]}]},{"had_liked":false,"id":132757,"user_name":"å¢™è§’å„¿çš„èŠ±","can_delete":false,"product_type":"c1","uid":1258474,"ip_address":"","ucode":"EE5CAD76175CCF","user_header":"","comment_is_top":false,"comment_ctime":1568214192,"is_pvip":false,"replies":[{"id":50886,"content":"æœ‰ä¸€ä¸ªé—®é¢˜ä½ éœ€è¦è€ƒè™‘ï¼Œä½ æ˜¯ä¸æ˜¯éœ€è¦ä¸ºæ¯ä¸€ä¸ªä¼šè¯ï¼ˆæ¯”å¦‚ï¼Œå¼ ä¸‰å’Œæå››ä¹‹é—´å¼€å§‹èŠå¤©ï¼Œæˆä¸ºä¸€ä¸ªä¼šè¯ï¼‰åœ¨MQä¸­å‡‘åˆ›å»ºä¸€ä¸ªTopicå‘¢ï¼Ÿè¿™æ ·ä¼šå¯¼è‡´MQé›†ç¾¤ä¸­çš„Topicæ•°é‡éå¸¸å¤šã€‚å‡è®¾ä½ çš„ç³»ç»Ÿæ³¨å†Œç”¨æˆ·æ•°æ˜¯nï¼Œç†è®ºä¸Šæœ€å¤šä¼šéœ€è¦ n x n ä¸ªTopicï¼Œè¿™è¿˜æ²¡æœ‰è®¡ç®—ç”¨æˆ·æ‹‰çš„ç¾¤ã€‚\n\nå¯¹äºæµ·é‡çš„Topicæ•°é‡ï¼ŒRocketMQå’ŒKafkaéƒ½ä¸æ˜¯å¤ªå¥½çš„é€‰æ‹©ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568251706,"ip_address":"","comment_id":132757,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆ å¯¹äºimæœåŠ¡å™¨é›†ç¾¤ï¼Œå®¢æˆ·ç«¯çš„socketå‡å¸ƒåœ¨å„ä¸ªæœåŠ¡å™¨ï¼Œç›®æ ‡socketä¸åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šæ—¶ï¼ŒæœåŠ¡å™¨é—´éœ€è¦è½¬å‘æ¶ˆæ¯ï¼Œè¿™ä¸ªåœºæ™¯éœ€è¦ä½å»¶è¿Ÿæ— éœ€æŒä¹…åŒ–ï¼ŒæœåŠ¡å™¨é—´ç”¨redisçš„å‘å¸ƒè®¢é˜…ï¼Œå› å…¶èµ°å†…å­˜è¾ƒå¿«ï¼Œå³ä½¿æ–­ç”µè¿˜å¯ä»¥èµ°åº“ã€‚imæœåŠ¡å™¨å’Œå…¥åº“æœåŠ¡é—´ç”¨å…¶ä»–mqè§£è€¦ï¼Œå› ä¸ºè¿™ä¸ªç¯èŠ‚éœ€è¦æŒä¹…åŒ–ï¼Œæ‰€ä»¥é€‰rocketmqæˆ–kafkaï¼Œä½†kafkaä¼šå»¶è¿Ÿæ‰¹é‡å‘å¸ƒæ¶ˆæ¯ æ‰€ä»¥é€‰rocketmqï¼Œè¿™ä¸¤ä¸ªç¯èŠ‚çš„mqé€‰å‹å¯è¡Œå—ã€‚","like_count":5,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467109,"discussion_content":"æœ‰ä¸€ä¸ªé—®é¢˜ä½ éœ€è¦è€ƒè™‘ï¼Œä½ æ˜¯ä¸æ˜¯éœ€è¦ä¸ºæ¯ä¸€ä¸ªä¼šè¯ï¼ˆæ¯”å¦‚ï¼Œå¼ ä¸‰å’Œæå››ä¹‹é—´å¼€å§‹èŠå¤©ï¼Œæˆä¸ºä¸€ä¸ªä¼šè¯ï¼‰åœ¨MQä¸­å‡‘åˆ›å»ºä¸€ä¸ªTopicå‘¢ï¼Ÿè¿™æ ·ä¼šå¯¼è‡´MQé›†ç¾¤ä¸­çš„Topicæ•°é‡éå¸¸å¤šã€‚å‡è®¾ä½ çš„ç³»ç»Ÿæ³¨å†Œç”¨æˆ·æ•°æ˜¯nï¼Œç†è®ºä¸Šæœ€å¤šä¼šéœ€è¦ n x n ä¸ªTopicï¼Œè¿™è¿˜æ²¡æœ‰è®¡ç®—ç”¨æˆ·æ‹‰çš„ç¾¤ã€‚\n\nå¯¹äºæµ·é‡çš„Topicæ•°é‡ï¼ŒRocketMQå’ŒKafkaéƒ½ä¸æ˜¯å¤ªå¥½çš„é€‰æ‹©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568251706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2019655,"avatar":"","nickname":"Geek_92d619","note":"","ucode":"BE0E322B9178E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349883,"discussion_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆè¦è€ƒè™‘ä¸ºæ¯ä¸ªä¼šè¯åˆ›å»ºä¸€ä¸ªTopicï¼Œè¿™æ˜¯å‡ºäºä»€ä¹ˆæ ·çš„è€ƒè™‘ï¼Ÿç”¨åŒä¸€ä¸ªtopicï¼Œå†é€šè¿‡å…¶ä»–è‡ªå®šä¹‰æ ‡è®°æ¥åŒºåˆ†ä¼šè¯ä¸è¡Œä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613616303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101526,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ce/d6/ab8e6178.jpg","nickname":"Rå¸ˆå‚…","note":"","ucode":"74FC6975E881B7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346793,"discussion_content":"è€å¸ˆï¼Œæˆ‘ä»¬æ˜¯ç”¨rabbitmqåšçš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä½†æ˜¯ä¹Ÿé‡åˆ°äº†queue sizeæš´æ¶¨çš„é—®é¢˜ã€‚ç½‘ä¸Šå¾ˆå¤šSTOMP over websokectçš„sampleï¼Œå¦‚æœä¸­é—´ä»¶æ˜¯MQ brokerï¼Œå¥½åƒéƒ½æ˜¯ä¸€ä¸ªuseråˆ›å»ºä¸€ä¸ªqueueçš„æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612065085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147211,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":1595382,"ip_address":"","ucode":"A77322C4E07B2D","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/f6/2c7ac1ad.jpg","comment_is_top":false,"comment_ctime":1572841004,"is_pvip":false,"replies":[{"id":57129,"content":"PullConsumerï¼šä¸šåŠ¡ä»£ç åœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨consumer.pullxxxxæ–¹æ³•ä»consumeræ‹‰æ¶ˆæ¯ï¼›PushConsumerï¼šå½“æœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œconsumerä¼šè‡ªåŠ¨è°ƒç”¨messageListener(ä¸šåŠ¡å¤„ç†æ¶ˆæ¯çš„ä»£ç )ã€‚\n\nè¿™ä¸¤ç§æ–¹å¼ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨è€…è¿›è¡Œçº¿ç¨‹æ§åˆ¶ï¼Œæ²¡æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ã€‚\n\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1573007518,"ip_address":"","comment_id":147211,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"è€å¸ˆç»§ç»­è¯·æ•™é—®é¢˜ï¼š\n1.DefaultMQPullConsumerå’ŒDefaultMQPushConsumeræœ‰ä»€ä¹ˆåŒºåˆ«\n2.ä¸ºä»€ä¹ˆpullConsumerçš„å¯åŠ¨å’Œproducerçš„å¯åŠ¨åœ¨åŒä¸€ä¸ªstartæ–¹æ³•é‡Œï¼ˆæœ€ç»ˆéƒ½åœ¨MQClientInstance#starté‡Œï¼‰\n3.rebalanceServiceæœåŠ¡æ˜¯å¹²å˜›çš„","like_count":1,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473198,"discussion_content":"PullConsumerï¼šä¸šåŠ¡ä»£ç åœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨consumer.pullxxxxæ–¹æ³•ä»consumeræ‹‰æ¶ˆæ¯ï¼›PushConsumerï¼šå½“æœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œconsumerä¼šè‡ªåŠ¨è°ƒç”¨messageListener(ä¸šåŠ¡å¤„ç†æ¶ˆæ¯çš„ä»£ç )ã€‚\n\nè¿™ä¸¤ç§æ–¹å¼ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨è€…è¿›è¡Œçº¿ç¨‹æ§åˆ¶ï¼Œæ²¡æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573007518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178891,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1581847391,"is_pvip":false,"replies":[{"id":69994,"content":"A1: å› ä¸ºå®ƒæœåŠ¡çš„ç±»æ²¡æœ‰è®¾è®¡æˆçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡å¿…è¦ç”¨volatileå…³é”®å­—ã€‚\n\nA2ï¼šwriteQueueNumså’ŒreadQueueNumsæ˜¯åœ¨æœåŠ¡ç«¯æ¥æ§åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹çš„æ—¶å€™ï¼Œåˆ†åˆ«è®¿é—®å¤šå°‘ä¸ªé˜Ÿåˆ—ã€‚å› ä¸ºå¯¹ä¸»é¢˜æ¥è¯´ï¼Œç”Ÿäº§è€…çš„å®ä¾‹æ•°å’Œæ¶ˆè´¹è€…çš„å®ä¾‹æ•°æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå‚æ•°æ˜¯ä¸å…³è”çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1582246785,"ip_address":"","comment_id":178891,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"1ã€ä¸ºä»€ä¹ˆServiceStateå˜é‡ä¸è®¾ç½®æˆvolatileå‘¢ï¼Ÿ\n2ã€æ¶ˆè´¹è€…MessageQueue(readQueueNums)æ€ä¹ˆå’Œç”Ÿäº§è€…MessageQueue(writeQueueNums)å…³è”èµ·æ¥çš„å‘¢ï¼Ÿæ¯”å¦‚readQueueNums=19ä¸ªï¼ŒwriteQueueNums=23ä¸ªï¼Œå®ƒä»¬æ˜¯æ€ä¹ˆå…³è”çš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473198,"discussion_content":"PullConsumerï¼šä¸šåŠ¡ä»£ç åœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨consumer.pullxxxxæ–¹æ³•ä»consumeræ‹‰æ¶ˆæ¯ï¼›PushConsumerï¼šå½“æœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œconsumerä¼šè‡ªåŠ¨è°ƒç”¨messageListener(ä¸šåŠ¡å¤„ç†æ¶ˆæ¯çš„ä»£ç )ã€‚\n\nè¿™ä¸¤ç§æ–¹å¼ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨è€…è¿›è¡Œçº¿ç¨‹æ§åˆ¶ï¼Œæ²¡æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ã€‚\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573007518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151559,"user_name":"Standly","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1573740020,"is_pvip":false,"replies":[{"id":58287,"content":"è¿™ä¸¤ä¸ªæ–¹æ³•æ²¡æœ‰åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°å†…éƒ¨ï¼Œè°ƒç”¨çš„æ–¹æ³•éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1573779248,"ip_address":"","comment_id":151559,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"DefaultMQProducerImplçš„startå’Œshutdownæ–¹æ³•æ²¡æœ‰åŠ åŒæ­¥ï¼ŒserviceStateä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šæˆå‘˜å˜é‡æ²¡åŠ volatileï¼Œä¸ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484008,"discussion_content":"A1: å› ä¸ºå®ƒæœåŠ¡çš„ç±»æ²¡æœ‰è®¾è®¡æˆçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡å¿…è¦ç”¨volatileå…³é”®å­—ã€‚\n\nA2ï¼šwriteQueueNumså’ŒreadQueueNumsæ˜¯åœ¨æœåŠ¡ç«¯æ¥æ§åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹çš„æ—¶å€™ï¼Œåˆ†åˆ«è®¿é—®å¤šå°‘ä¸ªé˜Ÿåˆ—ã€‚å› ä¸ºå¯¹ä¸»é¢˜æ¥è¯´ï¼Œç”Ÿäº§è€…çš„å®ä¾‹æ•°å’Œæ¶ˆè´¹è€…çš„å®ä¾‹æ•°æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå‚æ•°æ˜¯ä¸å…³è”çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582246785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135155,"user_name":"Standly","can_delete":false,"product_type":"c1","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1569046724,"is_pvip":false,"replies":[{"id":51965,"content":"åˆ†åˆ«åœ¨å“ªä¸¤ä¸ªåœ°æ–¹æ‰§è¡Œçš„2æ¬¡å¯åŠ¨å‘¢ï¼Ÿ\n","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1569202847,"ip_address":"","comment_id":135155,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100032301,"comment_content":"çœ‹äº†Rocketmq produceræºç ï¼Œå…³äºproducerè¿™å—æœ‰ä¸ªç–‘é—®ä¸çŸ¥é“èƒ½å¦è¯·æ•™ä¸‹ï¼Ÿå°±æ˜¯producerå¯åŠ¨è¿‡ç¨‹ä¸­ä¸ºä»€ä¹ˆMQClientInstance mQClientFactory.start()è¿™ä¸ªæ–¹æ³•éœ€è¦è¢«æ‰§è¡Œ2æ¬¡ï¼Ÿ2æ¬¡çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474533,"discussion_content":"è¿™ä¸¤ä¸ªæ–¹æ³•æ²¡æœ‰åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°å†…éƒ¨ï¼Œè°ƒç”¨çš„æ–¹æ³•éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573779248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132462,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1568127325,"is_pvip":false,"replies":[{"id":50692,"content":"æ„Ÿè°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568165178,"ip_address":"","comment_id":132462,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆï¼ŒèŠ‚æ—¥å¿«ä¹ğŸ‰","like_count":0},{"had_liked":false,"id":132361,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1568097737,"is_pvip":false,"replies":[{"id":50686,"content":"æ„Ÿè°¢ï¼\nä»£ç èƒ½åŠ›è¿™å—å„¿ï¼Œé™¤äº†å­¦ä¹ ï¼Œè¿˜æ˜¯å¤šå†™ä»£ç ï¼Œç†Ÿèƒ½ç”Ÿå·§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568164739,"ip_address":"","comment_id":132361,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"     å‰æœŸä¸€ç›´å¿™ç€å¼ºåŒ–å’Œæ¢³ç†ä¸€äº›åŸºæœ¬åŠŸï¼šæ“ä½œç³»ç»Ÿã€ç½‘ç»œè¿™å—ï¼Œå­¦åˆ°ç°åœ¨å‘ç°è€å¸ˆçš„è¯¾ç¨‹ä¸­çš„ä»£ç èƒ½çœ‹æ‡‚ï¼Œå¤§è‡´æ€è·¯ä¹Ÿèƒ½æ˜ç™½ï¼›å°±æ˜¯å†™ä¸å‡ºã€‚Pythonæˆ–è€…Goå¯ä»¥ä¹ˆï¼Ÿ Javaå®åœ¨ã€ã€ã€Pythonå’ŒGoæå®¢æ—¶é—´éƒ½æœ‰è´­ä¹°è¯¾ç¨‹ã€‚\n           å¯èƒ½ç›®å‰çº¿ä¸Šçš„å­˜å‚¨ä¸­é—´ä»¶ç°çŠ¶æ¯”è¾ƒå·®ã€è®¸è€å¸ˆçš„è¯¾ç¨‹å¯¹æ•°æ®å­˜å‚¨çš„å®šä¹‰ï¼Œè§‰å¾—æœ‰é“ç†å°±ç›´æ¥ç°ç”¨äº†ã€‘ï¼Œå°¤å…¶æ˜¯Nosql DBå’ŒMQåŸºæœ¬å¤„äºé—²ç½®ï¼Œæ•…è€Œä¸€ç›´ç„¦è™‘åœ¨è¿™å—ï¼›å¯æ˜¯å½“ç°åœ¨åˆæœŸè¿·æƒ‘å·²ç»è§£é™¤ä¸”åŸºæœ¬æ¸…æ™°æ—¶å‘ç°å­¦ä¹ è¿™é—¨è¯¾å’Œä½¿ç”¨MQçš„ç“¶é¢ˆå°±åœ¨ä»£ç èƒ½åŠ›ä¸Šï¼Œæ¯•ç«ŸDBAçš„Codingèƒ½åŠ›éƒ½æ¯”è¾ƒå·®å°¤å…¶æ˜¯å¼€å‘ç›¸å…³çš„èƒ½åŠ›ï¼›å‡†å¤‡å¼€å§‹æŠŠä¹‹å‰æŠ¥çš„å¼€å‘è¯­è¨€çš„è¯¾ç¨‹å­¦ä¹ ä¸€éã€‚\n         ä»Šå¤©æ•™å¸ˆèŠ‚ï¼šæ„¿è€å¸ˆèŠ‚æ—¥å¿«ä¹ï¼Œæ„Ÿæ¿€è€å¸ˆåœ¨æˆè¯¾ä¹‹ä½™ä¸€ç›´å¦‚æ­¤è¾›å‹¤çš„å›å¸–è§£ç­”æˆ‘ä»¬çš„å›°æƒ‘ï¼›è°¢è°¢è€å¸ˆã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466950,"discussion_content":"æ„Ÿè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568165178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132351,"user_name":"ä»˜æ°¸å¼º","can_delete":false,"product_type":"c1","uid":1419544,"ip_address":"","ucode":"898998296EBD56","user_header":"https://static001.geekbang.org/account/avatar/00/15/a9/18/393a841d.jpg","comment_is_top":false,"comment_ctime":1568096762,"is_pvip":false,"replies":[{"id":50685,"content":"æ„Ÿè°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568164622,"ip_address":"","comment_id":132351,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æ•™å¸ˆèŠ‚å¿«ä¹ï¼","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466900,"discussion_content":"æ„Ÿè°¢ï¼\nä»£ç èƒ½åŠ›è¿™å—å„¿ï¼Œé™¤äº†å­¦ä¹ ï¼Œè¿˜æ˜¯å¤šå†™ä»£ç ï¼Œç†Ÿèƒ½ç”Ÿå·§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568164739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132263,"user_name":"ä¸šä½™è‰","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1568075415,"is_pvip":false,"replies":[{"id":50556,"content":"æ„Ÿè°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568077350,"ip_address":"","comment_id":132263,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æ•™å¸ˆèŠ‚ï¼Œè€å¸ˆä»¬éƒ½è¾›è‹¦äº†ï¼","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466894,"discussion_content":"æ„Ÿè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568164622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132251,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1568072563,"is_pvip":false,"replies":[{"id":50561,"content":"ä¸éœ€è¦ä¸€å®šä¼šJavaï¼Œä½†è‡³å°‘è¦ç†Ÿç»ƒæŒæ¡ä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568077564,"ip_address":"","comment_id":132251,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"ä¸€å®šè¦å­¦javaå— è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466846,"discussion_content":"æ„Ÿè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568077350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132337,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1568087605,"is_pvip":false,"replies":null,"discussion_count":8,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è¿™ç§å¼‚æ­¥æ–¹å¼å‡ ä¹æ²¡æœ‰æ„ä¹‰ï¼Œåº•å±‚çš„nettyå·²ç»å®ç°äº†å¼‚æ­¥ï¼Œè¿™é‡Œåªæ˜¯åœ¨é€‰æ‹©æ¶ˆæ¯é˜Ÿåˆ—ç­‰åˆ¤æ–­çš„è¿‡ç¨‹åŠ äº†å¼‚æ­¥ï¼Œæœ€ç»ˆcallbackè¿˜æ˜¯ç”±nettyçº¿ç¨‹æ¥è°ƒç”¨çš„","like_count":20,"discussions":[{"author":{"id":1434220,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzkDzxIjZItgnK58KjRwGHiaFibO93yluEDggaLOHpG9BLup4R3boKIpSYvy69zcSNJjXrXQicPjIJw/132","nickname":"ä¸ç”˜å¹³åº¸çš„å°ç å†œ","note":"","ucode":"6CE5B7D94D09F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288217,"discussion_content":"å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹æºç ï¼Œä¸€ç›´è·Ÿåˆ°NettyRemotingAbstractçš„406è¡Œï¼Œæ— è®ºrocketmqç”¨çš„æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„æ–¹å¼ï¼Œåˆ°äº†nettyè¿™ä¸€å±‚ï¼Œéƒ½æ˜¯å¼‚æ­¥çš„ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1593680764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1031336,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bc/a8/810c8fd4.jpg","nickname":"nikoart","note":"","ucode":"FF7AB24E25ABA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1434220,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzkDzxIjZItgnK58KjRwGHiaFibO93yluEDggaLOHpG9BLup4R3boKIpSYvy69zcSNJjXrXQicPjIJw/132","nickname":"ä¸ç”˜å¹³åº¸çš„å°ç å†œ","note":"","ucode":"6CE5B7D94D09F1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600005,"discussion_content":"æˆ‘ä¹Ÿçœ‹äº†ä¸‹å¼‚æ­¥å’ŒåŒæ­¥å‘é€æ¶ˆæ¯çš„åº•å±‚ï¼Œæ„Ÿè§‰é€»è¾‘æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673939305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288217,"ip_address":"åŒ—äº¬","group_id":0},"score":600005,"extra":""},{"author":{"id":1031336,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bc/a8/810c8fd4.jpg","nickname":"nikoart","note":"","ucode":"FF7AB24E25ABA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1434220,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzkDzxIjZItgnK58KjRwGHiaFibO93yluEDggaLOHpG9BLup4R3boKIpSYvy69zcSNJjXrXQicPjIJw/132","nickname":"ä¸ç”˜å¹³åº¸çš„å°ç å†œ","note":"","ucode":"6CE5B7D94D09F1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600006,"discussion_content":"åŒæ­¥æ–¹å¼è·å–å“åº”çš„åœ°æ–¹ï¼Œæ˜¯è¿™ä¹ˆå†™çš„ï¼ŒresponseFuture.waitResponse(timeoutMillis)ï¼ŒåŒºåˆ«å¤§æ¦‚å°±æ˜¯è¿™é‡Œå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673939408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288217,"ip_address":"åŒ—äº¬","group_id":0},"score":600006,"extra":""}]},{"author":{"id":2019655,"avatar":"","nickname":"Geek_92d619","note":"","ucode":"BE0E322B9178E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349881,"discussion_content":"æˆ‘è§‰å¾—å¼‚æ­¥å’ŒåŒæ­¥çš„æ„ä¹‰æ˜¯ç›¸å¯¹è°ƒç”¨API çš„å±‚é¢æ¥è¯´çš„ï¼Œå¦‚æœæ˜¯åŒæ­¥çš„APIï¼Œä½ åº•å±‚æ˜¯é€šè¿‡å¼‚æ­¥è¿˜æ˜¯åŒæ­¥è·å–ç»“æœéƒ½å’Œä¸Šå±‚æ— å…³ï¼Œå› ä¸ºå¯¹äºè°ƒç”¨APIå“ªé‡Œæ¥è¯´å®ƒéƒ½å¿…é¡»ç­‰å¾…ç»“æœæ‰èƒ½å¾€ä¸‹èµ°ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1613615385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1221488,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a3/70/a9f35354.jpg","nickname":"Pretender","note":"","ucode":"F87B509143C9C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21956,"discussion_content":"å¼‚æ­¥æœ‰æ²¡æœ‰æ„ä¹‰æ˜¯ç›¸å¯¹äºåŒæ­¥ï¼Œè€Œä¸æ˜¯å¼‚æ­¥è°æ¥åš","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569555844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1447739,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eou1BMETumU21ZI4yiaLenOMSibzkAgkw944npIpsJRicmdicxlVQcgibyoQ00rdGk9Htp1j0dM5CP2Fibw/132","nickname":"å¯¥è‹¥æ™¨æ˜Ÿ","note":"","ucode":"2E87E43687DE72","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550145,"discussion_content":"æ€ä¹ˆèƒ½æ²¡æœ‰æ„ä¹‰å‘¢ï¼Œè™½ç„¶nettyæ˜¯å¼‚æ­¥å‘é€çš„ï¼Œä½†æ˜¯è°ƒç”¨nettyå‰çš„ä¸€äº›å¤„ç†é€»è¾‘ä¹Ÿæ˜¯æœ‰æ—¶é—´å¼€é”€çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644393884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1063149,"avatar":"https://static001.geekbang.org/account/avatar/00/10/38/ed/72f73710.jpg","nickname":"å˜»å˜»","note":"","ucode":"C47140EF144225","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216592,"discussion_content":"å‰åŠéƒ¨åˆ†æ˜¯è¿™æ ·çš„ã€‚ä½†callback rocketmqæ˜¯æŠŠresponseåˆ†å‘äº†å¦ä¸€ä¸ªçº¿ç¨‹æ± å¤„ç†å›è°ƒï¼Œæ‰€ä»¥åªåœ¨è¯»å–responseçš„æ—¶å€™å ç”¨äº†IOçº¿ç¨‹æ± ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585468561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115777,"avatar":"https://static001.geekbang.org/account/avatar/00/11/06/81/28418795.jpg","nickname":"è¡£ç”³äºº","note":"","ucode":"887FE9109B97DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":110250,"discussion_content":"æˆ‘èµåŒè¿™ä¸ªå¤§ç¥çš„åˆ†æï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577718995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132461,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1568127191,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æˆ‘æ€»ç»“çš„kafkaç”Ÿäº§æ¶ˆæ¯çš„æºç åˆ†æ\nhttps:&#47;&#47;mp.weixin.qq.com&#47;s&#47;-s34_y16HU6HR5HDsSD4bg","like_count":6},{"had_liked":false,"id":132440,"user_name":"æ˜æ—¥","can_delete":false,"product_type":"c1","uid":1003917,"ip_address":"","ucode":"348899EC65AE8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/8d/09f28606.jpg","comment_is_top":false,"comment_ctime":1568122913,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æè€å¸ˆèŠ‚æ—¥å¿«ä¹ï¼\nå…³äºæ€è€ƒé¢˜çœ‹åˆ°äº†æºç çš„æ³¨é‡Šè¯´å¼‚å¸¸å¤„ç†å’Œè¶…æ—¶æ—¶é—´æœ‰é—®é¢˜ã€‚\nè‡ªå·±çœ‹çš„è¯ä¸€æ˜¯å¼‚å¸¸è¿™é‡ŒæŠ›æœªçŸ¥çš„åŸå› ï¼Œä¸å¤Ÿæ˜ç¡®ã€‚\näºŒæ˜¯è¿™é‡Œç”¨çš„çº¿ç¨‹æ± é»˜è®¤ä½¿ç”¨äº†è™šæ‹Ÿæœºå¯ç”¨çš„çº¿ç¨‹ï¼Œå¯èƒ½ä¼šå¯¹å…¶ä»–æœåŠ¡é€ æˆå½±å“ã€‚\nä¸‰æ˜¯è¶…æ—¶æ—¶é—´è¿™æŠŠçº¿ç¨‹é˜»å¡å¯èƒ½ç­‰å¾…çš„æ—¶é—´ä¹ŸåŒ…æ‹¬è¿›å»äº†ä¸å¤ªåˆé€‚ã€‚\næ„Ÿè§‰ä»£ç å±‚æ¬¡ä½¿ç”¨è€å¸ˆè¯´è¿‡çš„completablefutureå¤„ç†æ›´ä¼˜é›…ã€‚å¦å¤–åº•å±‚ä½¿ç”¨äº†nettyï¼Œåº”è¯¥ç›´æ¥ç”¨å¼‚æ­¥ioå°±è¡Œäº†å§ã€‚","like_count":4},{"had_liked":false,"id":171553,"user_name":"ä¾§é¢","can_delete":false,"product_type":"c1","uid":1098974,"ip_address":"","ucode":"D55BF71996FDE8","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/de/9649fcee.jpg","comment_is_top":false,"comment_ctime":1578966080,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æœ‰è¿™ç¯‡è¿™è¯¾å°±ä¹°çš„å€¼äº†","like_count":2},{"had_liked":false,"id":288081,"user_name":"äºŒå°‘","can_delete":false,"product_type":"c1","uid":1442885,"ip_address":"","ucode":"190983809CD3EC","user_header":"https://static001.geekbang.org/account/avatar/00/16/04/45/0c474d47.jpg","comment_is_top":false,"comment_ctime":1618291565,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"DefaultMQProduceræ˜¯DefaultMQProducerImplçš„é—¨é¢ï¼Œä½†äºŒè€…çš„ç±»åèµ·å¾—æœ‰ç‚¹æ€ªæ€ªçš„æ„Ÿè§‰ã€‚ç±»åæœ‰Implåç¼€ï¼Œä¸€èˆ¬éƒ½è¡¨ç¤ºè¿™ä¸ªç±»æ˜¯æŸä¸ªæ¥å£çš„å®ç°ç±»ï¼Œä½†å®é™…ä¸Šå´æ˜¯é—¨é¢å’Œè¢«åŒ…è£…ç±»çš„å…³ç³»ã€‚è€Œä¸”æŠŠé—¨é¢ç±»ç»™ä¸ªfacadeåç¼€ä¸æ˜¯æ›´é€‚å½“ä¸€äº›å—ï¼Ÿå¤§å®¶æ€ä¹ˆçœ‹ã€‚","like_count":1,"discussions":[{"author":{"id":1434220,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzkDzxIjZItgnK58KjRwGHiaFibO93yluEDggaLOHpG9BLup4R3boKIpSYvy69zcSNJjXrXQicPjIJw/132","nickname":"ä¸ç”˜å¹³åº¸çš„å°ç å†œ","note":"","ucode":"6CE5B7D94D09F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288217,"discussion_content":"å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹æºç ï¼Œä¸€ç›´è·Ÿåˆ°NettyRemotingAbstractçš„406è¡Œï¼Œæ— è®ºrocketmqç”¨çš„æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„æ–¹å¼ï¼Œåˆ°äº†nettyè¿™ä¸€å±‚ï¼Œéƒ½æ˜¯å¼‚æ­¥çš„ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1593680764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1031336,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bc/a8/810c8fd4.jpg","nickname":"nikoart","note":"","ucode":"FF7AB24E25ABA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1434220,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzkDzxIjZItgnK58KjRwGHiaFibO93yluEDggaLOHpG9BLup4R3boKIpSYvy69zcSNJjXrXQicPjIJw/132","nickname":"ä¸ç”˜å¹³åº¸çš„å°ç å†œ","note":"","ucode":"6CE5B7D94D09F1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600005,"discussion_content":"æˆ‘ä¹Ÿçœ‹äº†ä¸‹å¼‚æ­¥å’ŒåŒæ­¥å‘é€æ¶ˆæ¯çš„åº•å±‚ï¼Œæ„Ÿè§‰é€»è¾‘æ˜¯ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673939305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288217,"ip_address":"åŒ—äº¬","group_id":0},"score":600005,"extra":""},{"author":{"id":1031336,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bc/a8/810c8fd4.jpg","nickname":"nikoart","note":"","ucode":"FF7AB24E25ABA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1434220,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJzkDzxIjZItgnK58KjRwGHiaFibO93yluEDggaLOHpG9BLup4R3boKIpSYvy69zcSNJjXrXQicPjIJw/132","nickname":"ä¸ç”˜å¹³åº¸çš„å°ç å†œ","note":"","ucode":"6CE5B7D94D09F1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":600006,"discussion_content":"åŒæ­¥æ–¹å¼è·å–å“åº”çš„åœ°æ–¹ï¼Œæ˜¯è¿™ä¹ˆå†™çš„ï¼ŒresponseFuture.waitResponse(timeoutMillis)ï¼ŒåŒºåˆ«å¤§æ¦‚å°±æ˜¯è¿™é‡Œå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673939408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":288217,"ip_address":"åŒ—äº¬","group_id":0},"score":600006,"extra":""}]},{"author":{"id":2019655,"avatar":"","nickname":"Geek_92d619","note":"","ucode":"BE0E322B9178E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349881,"discussion_content":"æˆ‘è§‰å¾—å¼‚æ­¥å’ŒåŒæ­¥çš„æ„ä¹‰æ˜¯ç›¸å¯¹è°ƒç”¨API çš„å±‚é¢æ¥è¯´çš„ï¼Œå¦‚æœæ˜¯åŒæ­¥çš„APIï¼Œä½ åº•å±‚æ˜¯é€šè¿‡å¼‚æ­¥è¿˜æ˜¯åŒæ­¥è·å–ç»“æœéƒ½å’Œä¸Šå±‚æ— å…³ï¼Œå› ä¸ºå¯¹äºè°ƒç”¨APIå“ªé‡Œæ¥è¯´å®ƒéƒ½å¿…é¡»ç­‰å¾…ç»“æœæ‰èƒ½å¾€ä¸‹èµ°ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1613615385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1221488,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a3/70/a9f35354.jpg","nickname":"Pretender","note":"","ucode":"F87B509143C9C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21956,"discussion_content":"å¼‚æ­¥æœ‰æ²¡æœ‰æ„ä¹‰æ˜¯ç›¸å¯¹äºåŒæ­¥ï¼Œè€Œä¸æ˜¯å¼‚æ­¥è°æ¥åš","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569555844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1447739,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eou1BMETumU21ZI4yiaLenOMSibzkAgkw944npIpsJRicmdicxlVQcgibyoQ00rdGk9Htp1j0dM5CP2Fibw/132","nickname":"å¯¥è‹¥æ™¨æ˜Ÿ","note":"","ucode":"2E87E43687DE72","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550145,"discussion_content":"æ€ä¹ˆèƒ½æ²¡æœ‰æ„ä¹‰å‘¢ï¼Œè™½ç„¶nettyæ˜¯å¼‚æ­¥å‘é€çš„ï¼Œä½†æ˜¯è°ƒç”¨nettyå‰çš„ä¸€äº›å¤„ç†é€»è¾‘ä¹Ÿæ˜¯æœ‰æ—¶é—´å¼€é”€çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644393884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1063149,"avatar":"https://static001.geekbang.org/account/avatar/00/10/38/ed/72f73710.jpg","nickname":"å˜»å˜»","note":"","ucode":"C47140EF144225","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216592,"discussion_content":"å‰åŠéƒ¨åˆ†æ˜¯è¿™æ ·çš„ã€‚ä½†callback rocketmqæ˜¯æŠŠresponseåˆ†å‘äº†å¦ä¸€ä¸ªçº¿ç¨‹æ± å¤„ç†å›è°ƒï¼Œæ‰€ä»¥åªåœ¨è¯»å–responseçš„æ—¶å€™å ç”¨äº†IOçº¿ç¨‹æ± ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585468561,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115777,"avatar":"https://static001.geekbang.org/account/avatar/00/11/06/81/28418795.jpg","nickname":"è¡£ç”³äºº","note":"","ucode":"887FE9109B97DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":110250,"discussion_content":"æˆ‘èµåŒè¿™ä¸ªå¤§ç¥çš„åˆ†æï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577718995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132462,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1568127325,"is_pvip":false,"replies":[{"id":50692,"content":"æ„Ÿè°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568165178,"ip_address":"","comment_id":132462,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è€å¸ˆï¼ŒèŠ‚æ—¥å¿«ä¹ğŸ‰","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466950,"discussion_content":"æ„Ÿè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568165178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132361,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1568097737,"is_pvip":false,"replies":[{"id":50686,"content":"æ„Ÿè°¢ï¼\nä»£ç èƒ½åŠ›è¿™å—å„¿ï¼Œé™¤äº†å­¦ä¹ ï¼Œè¿˜æ˜¯å¤šå†™ä»£ç ï¼Œç†Ÿèƒ½ç”Ÿå·§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568164739,"ip_address":"","comment_id":132361,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"     å‰æœŸä¸€ç›´å¿™ç€å¼ºåŒ–å’Œæ¢³ç†ä¸€äº›åŸºæœ¬åŠŸï¼šæ“ä½œç³»ç»Ÿã€ç½‘ç»œè¿™å—ï¼Œå­¦åˆ°ç°åœ¨å‘ç°è€å¸ˆçš„è¯¾ç¨‹ä¸­çš„ä»£ç èƒ½çœ‹æ‡‚ï¼Œå¤§è‡´æ€è·¯ä¹Ÿèƒ½æ˜ç™½ï¼›å°±æ˜¯å†™ä¸å‡ºã€‚Pythonæˆ–è€…Goå¯ä»¥ä¹ˆï¼Ÿ Javaå®åœ¨ã€ã€ã€Pythonå’ŒGoæå®¢æ—¶é—´éƒ½æœ‰è´­ä¹°è¯¾ç¨‹ã€‚\n           å¯èƒ½ç›®å‰çº¿ä¸Šçš„å­˜å‚¨ä¸­é—´ä»¶ç°çŠ¶æ¯”è¾ƒå·®ã€è®¸è€å¸ˆçš„è¯¾ç¨‹å¯¹æ•°æ®å­˜å‚¨çš„å®šä¹‰ï¼Œè§‰å¾—æœ‰é“ç†å°±ç›´æ¥ç°ç”¨äº†ã€‘ï¼Œå°¤å…¶æ˜¯Nosql DBå’ŒMQåŸºæœ¬å¤„äºé—²ç½®ï¼Œæ•…è€Œä¸€ç›´ç„¦è™‘åœ¨è¿™å—ï¼›å¯æ˜¯å½“ç°åœ¨åˆæœŸè¿·æƒ‘å·²ç»è§£é™¤ä¸”åŸºæœ¬æ¸…æ™°æ—¶å‘ç°å­¦ä¹ è¿™é—¨è¯¾å’Œä½¿ç”¨MQçš„ç“¶é¢ˆå°±åœ¨ä»£ç èƒ½åŠ›ä¸Šï¼Œæ¯•ç«ŸDBAçš„Codingèƒ½åŠ›éƒ½æ¯”è¾ƒå·®å°¤å…¶æ˜¯å¼€å‘ç›¸å…³çš„èƒ½åŠ›ï¼›å‡†å¤‡å¼€å§‹æŠŠä¹‹å‰æŠ¥çš„å¼€å‘è¯­è¨€çš„è¯¾ç¨‹å­¦ä¹ ä¸€éã€‚\n         ä»Šå¤©æ•™å¸ˆèŠ‚ï¼šæ„¿è€å¸ˆèŠ‚æ—¥å¿«ä¹ï¼Œæ„Ÿæ¿€è€å¸ˆåœ¨æˆè¯¾ä¹‹ä½™ä¸€ç›´å¦‚æ­¤è¾›å‹¤çš„å›å¸–è§£ç­”æˆ‘ä»¬çš„å›°æƒ‘ï¼›è°¢è°¢è€å¸ˆã€‚","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466900,"discussion_content":"æ„Ÿè°¢ï¼\nä»£ç èƒ½åŠ›è¿™å—å„¿ï¼Œé™¤äº†å­¦ä¹ ï¼Œè¿˜æ˜¯å¤šå†™ä»£ç ï¼Œç†Ÿèƒ½ç”Ÿå·§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568164739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132351,"user_name":"ä»˜æ°¸å¼º","can_delete":false,"product_type":"c1","uid":1419544,"ip_address":"","ucode":"898998296EBD56","user_header":"https://static001.geekbang.org/account/avatar/00/15/a9/18/393a841d.jpg","comment_is_top":false,"comment_ctime":1568096762,"is_pvip":false,"replies":[{"id":50685,"content":"æ„Ÿè°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568164622,"ip_address":"","comment_id":132351,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æ•™å¸ˆèŠ‚å¿«ä¹ï¼","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466894,"discussion_content":"æ„Ÿè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568164622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132263,"user_name":"ä¸šä½™è‰","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1568075415,"is_pvip":false,"replies":[{"id":50556,"content":"æ„Ÿè°¢ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568077350,"ip_address":"","comment_id":132263,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æ•™å¸ˆèŠ‚ï¼Œè€å¸ˆä»¬éƒ½è¾›è‹¦äº†ï¼","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466846,"discussion_content":"æ„Ÿè°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568077350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132251,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1568072563,"is_pvip":false,"replies":[{"id":50561,"content":"ä¸éœ€è¦ä¸€å®šä¼šJavaï¼Œä½†è‡³å°‘è¦ç†Ÿç»ƒæŒæ¡ä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":1501046,"ctime":1568077564,"ip_address":"","comment_id":132251,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"ä¸€å®šè¦å­¦javaå— è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466842,"discussion_content":"ä¸éœ€è¦ä¸€å®šä¼šJavaï¼Œä½†è‡³å°‘è¦ç†Ÿç»ƒæŒæ¡ä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568077564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132337,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1568087605,"is_pvip":false,"replies":null,"discussion_count":8,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"è¿™ç§å¼‚æ­¥æ–¹å¼å‡ ä¹æ²¡æœ‰æ„ä¹‰ï¼Œåº•å±‚çš„nettyå·²ç»å®ç°äº†å¼‚æ­¥ï¼Œè¿™é‡Œåªæ˜¯åœ¨é€‰æ‹©æ¶ˆæ¯é˜Ÿåˆ—ç­‰åˆ¤æ–­çš„è¿‡ç¨‹åŠ äº†å¼‚æ­¥ï¼Œæœ€ç»ˆcallbackè¿˜æ˜¯ç”±nettyçº¿ç¨‹æ¥è°ƒç”¨çš„","like_count":20,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466842,"discussion_content":"ä¸éœ€è¦ä¸€å®šä¼šJavaï¼Œä½†è‡³å°‘è¦ç†Ÿç»ƒæŒæ¡ä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568077564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132461,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1568127191,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æˆ‘æ€»ç»“çš„kafkaç”Ÿäº§æ¶ˆæ¯çš„æºç åˆ†æ\nhttps:&#47;&#47;mp.weixin.qq.com&#47;s&#47;-s34_y16HU6HR5HDsSD4bg","like_count":6},{"had_liked":false,"id":132440,"user_name":"æ˜æ—¥","can_delete":false,"product_type":"c1","uid":1003917,"ip_address":"","ucode":"348899EC65AE8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/8d/09f28606.jpg","comment_is_top":false,"comment_ctime":1568122913,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æè€å¸ˆèŠ‚æ—¥å¿«ä¹ï¼\nå…³äºæ€è€ƒé¢˜çœ‹åˆ°äº†æºç çš„æ³¨é‡Šè¯´å¼‚å¸¸å¤„ç†å’Œè¶…æ—¶æ—¶é—´æœ‰é—®é¢˜ã€‚\nè‡ªå·±çœ‹çš„è¯ä¸€æ˜¯å¼‚å¸¸è¿™é‡ŒæŠ›æœªçŸ¥çš„åŸå› ï¼Œä¸å¤Ÿæ˜ç¡®ã€‚\näºŒæ˜¯è¿™é‡Œç”¨çš„çº¿ç¨‹æ± é»˜è®¤ä½¿ç”¨äº†è™šæ‹Ÿæœºå¯ç”¨çš„çº¿ç¨‹ï¼Œå¯èƒ½ä¼šå¯¹å…¶ä»–æœåŠ¡é€ æˆå½±å“ã€‚\nä¸‰æ˜¯è¶…æ—¶æ—¶é—´è¿™æŠŠçº¿ç¨‹é˜»å¡å¯èƒ½ç­‰å¾…çš„æ—¶é—´ä¹ŸåŒ…æ‹¬è¿›å»äº†ä¸å¤ªåˆé€‚ã€‚\næ„Ÿè§‰ä»£ç å±‚æ¬¡ä½¿ç”¨è€å¸ˆè¯´è¿‡çš„completablefutureå¤„ç†æ›´ä¼˜é›…ã€‚å¦å¤–åº•å±‚ä½¿ç”¨äº†nettyï¼Œåº”è¯¥ç›´æ¥ç”¨å¼‚æ­¥ioå°±è¡Œäº†å§ã€‚","like_count":4},{"had_liked":false,"id":171553,"user_name":"ä¾§é¢","can_delete":false,"product_type":"c1","uid":1098974,"ip_address":"","ucode":"D55BF71996FDE8","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/de/9649fcee.jpg","comment_is_top":false,"comment_ctime":1578966080,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"æœ‰è¿™ç¯‡è¿™è¯¾å°±ä¹°çš„å€¼äº†","like_count":2},{"had_liked":false,"id":288081,"user_name":"äºŒå°‘","can_delete":false,"product_type":"c1","uid":1442885,"ip_address":"","ucode":"190983809CD3EC","user_header":"https://static001.geekbang.org/account/avatar/00/16/04/45/0c474d47.jpg","comment_is_top":false,"comment_ctime":1618291565,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100032301,"comment_content":"DefaultMQProduceræ˜¯DefaultMQProducerImplçš„é—¨é¢ï¼Œä½†äºŒè€…çš„ç±»åèµ·å¾—æœ‰ç‚¹æ€ªæ€ªçš„æ„Ÿè§‰ã€‚ç±»åæœ‰Implåç¼€ï¼Œä¸€èˆ¬éƒ½è¡¨ç¤ºè¿™ä¸ªç±»æ˜¯æŸä¸ªæ¥å£çš„å®ç°ç±»ï¼Œä½†å®é™…ä¸Šå´æ˜¯é—¨é¢å’Œè¢«åŒ…è£…ç±»çš„å…³ç³»ã€‚è€Œä¸”æŠŠé—¨é¢ç±»ç»™ä¸ªfacadeåç¼€ä¸æ˜¯æ›´é€‚å½“ä¸€äº›å—ï¼Ÿå¤§å®¶æ€ä¹ˆçœ‹ã€‚","like_count":1},{"had_liked":false,"id":278111,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1612766178,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å› ä¸ºNettyæœ¬èº«å°±æ”¯æŒå¼‚æ­¥çš„å†™å…¥æ¶ˆæ¯,å¹¶æ³¨å…¥Listener,è¿™ä¸€æ­¥çš„å‘é€,åˆ™æ˜¯åˆ©ç”¨Nioçš„WorkGroup,è¿™ç§æƒ…å†µä¸‹,æ˜¾å¼çš„ä½¿ç”¨çº¿ç¨‹æ± å¼‚æ­¥çš„å‘é€æ˜¾å¾—æœ‰ç‚¹å¤šä½™","like_count":1},{"had_liked":false,"id":231169,"user_name":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","can_delete":false,"product_type":"c1","uid":1593289,"ip_address":"","ucode":"4A5BE9A5E877FA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","comment_is_top":false,"comment_ctime":1593599299,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"RocketMQåŒç­‰çš„ç­–ç•¥æ¨¡å¼è¿˜æœ‰æ¶ˆè´¹ç«¯çš„æ—¶å€™é€‰æ‹©æ¶ˆè´¹è€…ä¸queueçš„å¯¹åº”ç­–ç•¥ï¼š\nAllocateMessageQueueStrategyæ¥å£ä¸‹æœ‰å¦‚ä¸‹å‡ ä¸ªå®ç°ç±»\nAllocateMessageQueueAveragely\nAllocateMachineRoomNearby\nAllocateMessageQueueAveragelyByCircle\nAllocateMessageQueueByConfigï¼šè¿™ä¸ªç­–ç•¥çœŸä¸çŸ¥é“æœ‰å•¥é¸Ÿç”¨\nAllocateMessageQueueByMachineRoom\nAllocateMessageQueueConsistentHash\nè€Œä¸”çœ‹è¿™åå­—å°±çŸ¥é“æ˜¯ç­–ç•¥æ¨¡å¼ã€‚ç›´æ¥ä»¥Strategyç»“å°¾ã€‚","like_count":1},{"had_liked":false,"id":182871,"user_name":"Geek_6ank0y","can_delete":false,"product_type":"c1","uid":1116340,"ip_address":"","ucode":"54F4AE0579711C","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/b4/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1582880242,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è·Ÿè¸ªæºç å‘ç°ï¼Œå¼‚æ­¥å›è°ƒï¼Œæœ€åè¿˜æ˜¯åœ¨NettyRemotingAbstractä¸­å¯åŠ¨çº¿ç¨‹æ± åšäº†    \n&#47;**\n     * Execute callback in callback executor. If callback executor is null, run directly in current thread\n     *&#47;\n    private void executeInvokeCallback(final ResponseFuture responseFuture) {\n        boolean runInThisThread = false;\n        ExecutorService executor = this.getCallbackExecutor();\n        if (executor != null) {\n            try {\n                executor.submit(new Runnable() {\n                    @Override\n                    public void run() {\n                        try {\n                            responseFuture.executeInvokeCallback();\n                        } catch (Throwable e) {\n                            log.warn(&quot;execute callback in executor exception, and callback throw&quot;, e);\n                        } finally {\n                            responseFuture.release();\n                        }\n                    }\n                });\n            } catch (Exception e) {\n                runInThisThread = true;\n                log.warn(&quot;execute callback in executor exception, maybe executor busy&quot;, e);\n            }\n        } else {\n            runInThisThread = true;\n        }\n\n        if (runInThisThread) {\n            try {\n                responseFuture.executeInvokeCallback();\n            } catch (Throwable e) {\n                log.warn(&quot;executeInvokeCallback Exception&quot;, e);\n            } finally {\n                responseFuture.release();\n            }\n        }\n    }","like_count":1},{"had_liked":false,"id":137300,"user_name":"å§‘å°„ä»™äºº","can_delete":false,"product_type":"c1","uid":1008517,"ip_address":"","ucode":"3EFC1F3E592165","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/85/1dc41622.jpg","comment_is_top":false,"comment_ctime":1569681655,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"1. å¼‚å¸¸å¤„ç†é—®é¢˜ï¼šçº¿ç¨‹å†…éƒ¨æŠ›å‡ºçš„å¼‚å¸¸ï¼Œæ¯”å¦‚MQBrokerExceptionï¼Œå®¢æˆ·ç«¯æ— æ³•æ„ŸçŸ¥åˆ°ï¼Œä»¥ä¸ºå‘é€æˆåŠŸï¼Œä¼šç»§ç»­æ‰§è¡Œã€‚\n2. è¶…æ—¶æ—¶é—´çš„æ¦‚å¿µé—®é¢˜ï¼šè¿™é‡Œä¼¼ä¹å»æ‰äº†çº¿ç¨‹è°ƒåº¦çš„æ—¶é—´ï¼Œå°†å‰©ä¸‹çš„æ—¶é—´ç»™äº†nettyï¼Œä¸ªäººæ„Ÿè§‰ä¹Ÿåº”è¯¥åŒ…å«è¿›å»ã€‚å¯¹å®¢æˆ·ç«¯è€Œè¨€ï¼Œè°ƒåº¦æ˜¯è‡ªå·±çš„äº‹ï¼Œä¸åº”åŒ…å«åœ¨ç½‘ç»œè¶…æ—¶æ—¶é—´é‡Œã€‚\n\nè¯·è€å¸ˆæŒ‡æ­£ã€‚","like_count":1},{"had_liked":false,"id":358567,"user_name":"è°éƒ½ä¼šå˜","can_delete":false,"product_type":"c1","uid":1195017,"ip_address":"ä¸Šæµ·","ucode":"9965748F7EBB57","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/09/b7f0eac6.jpg","comment_is_top":false,"comment_ctime":1664433474,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"æ¶ˆæ¯ç”Ÿäº§è€…å¯åŠ¨æ‹‰å–æ¶ˆæ¯è¿™ä¸ªæ„Ÿè§‰æ²¡ä»€ä¹ˆç”¨å•Šï¼Œå®ƒä¸æ˜¯æ¨é€æ¶ˆæ¯å¾—å—ï¼Ÿ\n","like_count":0},{"had_liked":false,"id":167733,"user_name":"ä¸ƒæ¥¼","can_delete":false,"product_type":"c1","uid":1491023,"ip_address":"","ucode":"106856DF5F8F12","user_header":"https://static001.geekbang.org/account/avatar/00/16/c0/4f/db7f2ab2.jpg","comment_is_top":false,"comment_ctime":1577925621,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"mvcæ¡†æ¶çš„ controllerä¹Ÿç®—æ˜¯é—¨é¢æ¨¡å¼çš„é—¨é¢æŠŠï¼Ÿä»–ä¹Ÿæ˜¯æä¾›ä¸€ä¸ªå¯è®¿é—®ç³»ç»Ÿçš„å€Ÿå£  éšè—äº†ç³»ç»Ÿå†…éƒ¨çš„å¤æ‚æ€§  å¯¹å—","like_count":0},{"had_liked":false,"id":147206,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":1595382,"ip_address":"","ucode":"A77322C4E07B2D","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/f6/2c7ac1ad.jpg","comment_is_top":false,"comment_ctime":1572838402,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆè¯·æ•™é—®é¢˜ï¼šRocketMQæœ‰ä¸ªDefaultMQPullConsumerå’ŒDefaultMQPushConsumerï¼Œè¿™ä¸¤ä¸ªç±»åˆ°åº•æ˜¯å¹²å˜›çš„ï¼Œå®ƒä»¬åˆ°åº•ä»€ä¹ˆå…³ç³»ï¼Ÿ","like_count":0},{"had_liked":false,"id":136558,"user_name":"å±±å¤´","can_delete":false,"product_type":"c1","uid":1610142,"ip_address":"","ucode":"9CD45A7966F37E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/kQ0NueqD3LTRravKIH2DgtqFKLqgjZQicDZtibdTqJ8pBRjNwlKornibGj2qibPdsgLXh2xQ3MesQ7q2JyATIEBphVHpcS2iaboZqATms4IDUibes/132","comment_is_top":false,"comment_ctime":1569472405,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œè¾›è‹¦äº†ï¼Œèƒ½å¦è®²è®²å‘é€ç«¯å¦‚ä½•æ‰¾åˆ°brokerä¸Šçš„æ–‡ä»¶ï¼Œé˜Ÿåˆ—å’Œæ–‡ä»¶çš„å…³ç³»ï¼Œæ¶ˆæ¯éƒ½æ”¾åˆ°æ–‡ä»¶ä¸Šå§ï¼Œèƒ½å¦å±•å¼€æ¢³ç†æ¢³ç†ï¼Œä¸ç„¶è¿˜æ˜¯ä¸æ‡‚æ€ä¹ˆå®ç°çš„","like_count":0},{"had_liked":false,"id":133760,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1568647227,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è¿™é‡Œä½¿ç”¨å¼‚æ­¥ä¸»è¦æ˜¯æå‡æ¶ˆæ¯å‘é€çš„ååé‡ï¼Œè€Œåœ¨è¿™è¿‡ç¨‹ä¸­å½±å“ååçš„æœ‰ä¸¤ä¸ªï¼šç£ç›˜IOå’Œç½‘ç»œIOï¼Œè€Œç°åœ¨çš„è¿™ç§å¼‚æ­¥æ–¹å¼å¥½åƒå¹¶æ²¡æœ‰ä¸ºè¿™ä¸¤éƒ¨åˆ†è®¾è®¡è¯¦ç»†çš„ä¼˜åŒ–ï¼Œä¼¼ä¹åªæ˜¯ç®€å•ç”¨äº†ä¸€ä¸ªå¤šçº¿ç¨‹å»æ‰§è¡Œå„è‡ªçš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯å¹¶æ²¡æœ‰å¯¹çœŸæ­£çš„æ€§èƒ½çŸ­æ¿åšä¼˜åŒ–ã€‚æˆ‘è§‰å¾—çœŸè¦æ˜¯å¼‚æ­¥çš„è¯ï¼Œéœ€è¦åœ¨è¿™é‡Œç»´æŒä¸€ä¸ªé˜Ÿåˆ—ã€ä¸€ä¸ªç£ç›˜IOé€‰æ‹©å™¨å’Œä¸€ä¸ªç½‘ç»œå‘é€IOé€‰æ‹©å™¨ï¼ŒçœŸæ­£å¼‚æ­¥çš„ç‚¹åº”è¯¥æ˜¯ä¸¤ä¸ªé€‰æ‹©å™¨åŠ å¹¶å‘åè°ƒå¤„ç†å¾…å‘é€çš„æ•°æ®ã€‚ä¸è¿‡å°±åƒæœ‰äº›åŒå­¦è¯„ä»·çš„ï¼Œnettyåº•å±‚å¯¹å„ç§IOå·²ç»åšäº†å¾ˆå¥½çš„æ”¯æŒï¼Œè¿™é‡Œçš„å¼‚æ­¥å°±æ˜¾å¾—å¾ˆè‹ç™½æ— åŠ›äº†ã€‚ä¸çŸ¥nettyæ˜¯æ€ä¹ˆè®¾è®¡å¼‚æ­¥æ¥è¾¾åˆ°æè‡´çš„æ€§èƒ½çš„ã€‚","like_count":0},{"had_liked":false,"id":133559,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1568605238,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"ä¸€æ˜¯å¤„ç†å¼‚å¸¸çš„ä»£ç å¾ˆå¥‡æ€ªå§ï¼Œæœ‰çš„å¼‚å¸¸ä½¿ç”¨sendCallbackæŠ›å‡ºï¼Œæœ‰çš„ç›´æ¥æŠ›å‡ºï¼›äºŒæ˜¯è¶…æ—¶çš„è¯­ä¹‰æœ‰é—®é¢˜ï¼Œç°åœ¨çš„timeoutæ„æ€æ˜¯æ¶ˆæ¯åœ¨çº¿ç¨‹æ± ä¸­æ’é˜Ÿçš„æ—¶é—´","like_count":0},{"had_liked":false,"id":278111,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1612766178,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"å› ä¸ºNettyæœ¬èº«å°±æ”¯æŒå¼‚æ­¥çš„å†™å…¥æ¶ˆæ¯,å¹¶æ³¨å…¥Listener,è¿™ä¸€æ­¥çš„å‘é€,åˆ™æ˜¯åˆ©ç”¨Nioçš„WorkGroup,è¿™ç§æƒ…å†µä¸‹,æ˜¾å¼çš„ä½¿ç”¨çº¿ç¨‹æ± å¼‚æ­¥çš„å‘é€æ˜¾å¾—æœ‰ç‚¹å¤šä½™","like_count":1},{"had_liked":false,"id":231169,"user_name":"ç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿ","can_delete":false,"product_type":"c1","uid":1593289,"ip_address":"","ucode":"4A5BE9A5E877FA","user_header":"https://static001.geekbang.org/account/avatar/00/18/4f/c9/9f51fd27.jpg","comment_is_top":false,"comment_ctime":1593599299,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"RocketMQåŒç­‰çš„ç­–ç•¥æ¨¡å¼è¿˜æœ‰æ¶ˆè´¹ç«¯çš„æ—¶å€™é€‰æ‹©æ¶ˆè´¹è€…ä¸queueçš„å¯¹åº”ç­–ç•¥ï¼š\nAllocateMessageQueueStrategyæ¥å£ä¸‹æœ‰å¦‚ä¸‹å‡ ä¸ªå®ç°ç±»\nAllocateMessageQueueAveragely\nAllocateMachineRoomNearby\nAllocateMessageQueueAveragelyByCircle\nAllocateMessageQueueByConfigï¼šè¿™ä¸ªç­–ç•¥çœŸä¸çŸ¥é“æœ‰å•¥é¸Ÿç”¨\nAllocateMessageQueueByMachineRoom\nAllocateMessageQueueConsistentHash\nè€Œä¸”çœ‹è¿™åå­—å°±çŸ¥é“æ˜¯ç­–ç•¥æ¨¡å¼ã€‚ç›´æ¥ä»¥Strategyç»“å°¾ã€‚","like_count":1},{"had_liked":false,"id":182871,"user_name":"Geek_6ank0y","can_delete":false,"product_type":"c1","uid":1116340,"ip_address":"","ucode":"54F4AE0579711C","user_header":"https://static001.geekbang.org/account/avatar/00/11/08/b4/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1582880242,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è·Ÿè¸ªæºç å‘ç°ï¼Œå¼‚æ­¥å›è°ƒï¼Œæœ€åè¿˜æ˜¯åœ¨NettyRemotingAbstractä¸­å¯åŠ¨çº¿ç¨‹æ± åšäº†    \n&#47;**\n     * Execute callback in callback executor. If callback executor is null, run directly in current thread\n     *&#47;\n    private void executeInvokeCallback(final ResponseFuture responseFuture) {\n        boolean runInThisThread = false;\n        ExecutorService executor = this.getCallbackExecutor();\n        if (executor != null) {\n            try {\n                executor.submit(new Runnable() {\n                    @Override\n                    public void run() {\n                        try {\n                            responseFuture.executeInvokeCallback();\n                        } catch (Throwable e) {\n                            log.warn(&quot;execute callback in executor exception, and callback throw&quot;, e);\n                        } finally {\n                            responseFuture.release();\n                        }\n                    }\n                });\n            } catch (Exception e) {\n                runInThisThread = true;\n                log.warn(&quot;execute callback in executor exception, maybe executor busy&quot;, e);\n            }\n        } else {\n            runInThisThread = true;\n        }\n\n        if (runInThisThread) {\n            try {\n                responseFuture.executeInvokeCallback();\n            } catch (Throwable e) {\n                log.warn(&quot;executeInvokeCallback Exception&quot;, e);\n            } finally {\n                responseFuture.release();\n            }\n        }\n    }","like_count":1},{"had_liked":false,"id":137300,"user_name":"å§‘å°„ä»™äºº","can_delete":false,"product_type":"c1","uid":1008517,"ip_address":"","ucode":"3EFC1F3E592165","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/85/1dc41622.jpg","comment_is_top":false,"comment_ctime":1569681655,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"1. å¼‚å¸¸å¤„ç†é—®é¢˜ï¼šçº¿ç¨‹å†…éƒ¨æŠ›å‡ºçš„å¼‚å¸¸ï¼Œæ¯”å¦‚MQBrokerExceptionï¼Œå®¢æˆ·ç«¯æ— æ³•æ„ŸçŸ¥åˆ°ï¼Œä»¥ä¸ºå‘é€æˆåŠŸï¼Œä¼šç»§ç»­æ‰§è¡Œã€‚\n2. è¶…æ—¶æ—¶é—´çš„æ¦‚å¿µé—®é¢˜ï¼šè¿™é‡Œä¼¼ä¹å»æ‰äº†çº¿ç¨‹è°ƒåº¦çš„æ—¶é—´ï¼Œå°†å‰©ä¸‹çš„æ—¶é—´ç»™äº†nettyï¼Œä¸ªäººæ„Ÿè§‰ä¹Ÿåº”è¯¥åŒ…å«è¿›å»ã€‚å¯¹å®¢æˆ·ç«¯è€Œè¨€ï¼Œè°ƒåº¦æ˜¯è‡ªå·±çš„äº‹ï¼Œä¸åº”åŒ…å«åœ¨ç½‘ç»œè¶…æ—¶æ—¶é—´é‡Œã€‚\n\nè¯·è€å¸ˆæŒ‡æ­£ã€‚","like_count":1},{"had_liked":false,"id":358567,"user_name":"è°éƒ½ä¼šå˜","can_delete":false,"product_type":"c1","uid":1195017,"ip_address":"ä¸Šæµ·","ucode":"9965748F7EBB57","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/09/b7f0eac6.jpg","comment_is_top":false,"comment_ctime":1664433474,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"æ¶ˆæ¯ç”Ÿäº§è€…å¯åŠ¨æ‹‰å–æ¶ˆæ¯è¿™ä¸ªæ„Ÿè§‰æ²¡ä»€ä¹ˆç”¨å•Šï¼Œå®ƒä¸æ˜¯æ¨é€æ¶ˆæ¯å¾—å—ï¼Ÿ\n","like_count":0},{"had_liked":false,"id":167733,"user_name":"ä¸ƒæ¥¼","can_delete":false,"product_type":"c1","uid":1491023,"ip_address":"","ucode":"106856DF5F8F12","user_header":"https://static001.geekbang.org/account/avatar/00/16/c0/4f/db7f2ab2.jpg","comment_is_top":false,"comment_ctime":1577925621,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"mvcæ¡†æ¶çš„ controllerä¹Ÿç®—æ˜¯é—¨é¢æ¨¡å¼çš„é—¨é¢æŠŠï¼Ÿä»–ä¹Ÿæ˜¯æä¾›ä¸€ä¸ªå¯è®¿é—®ç³»ç»Ÿçš„å€Ÿå£  éšè—äº†ç³»ç»Ÿå†…éƒ¨çš„å¤æ‚æ€§  å¯¹å—","like_count":0,"discussions":[{"author":{"id":1001893,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","nickname":"å°æ–‡åŒå­¦","note":"","ucode":"48F2AEB989C12A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265719,"discussion_content":"hiï¼Œé—¨é¢æ¨¡å¼æ¥åˆ†æ MVC æ¡†æ¶çš„  Controller ä¸æ˜¯å¾ˆåˆé€‚ã€‚è®¾è®¡æ¨¡å¼æ˜¯ç”¨æ¥è®¾è®¡æŸä¸ªç±»æˆ–è€…å­ç³»ç»Ÿçš„ï¼ŒController å’Œ MVC çš„å…³ç³»ï¼Œå…¶å®æ˜¯ä¸€ç§å¼€å‘æ¡†æ¶ï¼Œä¸¤è€…çš„è€ƒè™‘çš„é—®é¢˜ä¸æ˜¯ä¸€ä¸ªç»´åº¦çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šController ä¸­æŸä¸ªç±»ä½¿ç”¨äº†é—¨é¢æ¨¡å¼ï¼Œè®©ç³»ç»Ÿæ›´å®¹æ˜“è¢«è®¿é—®ä½¿ç”¨ï¼Œä½†å¾ˆå°‘è¯´ Controller æœ¬èº«å°±æ˜¯é—¨é¢æ¨¡å¼ã€‚:ï¼‰\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589430131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":147206,"user_name":"Peter","can_delete":false,"product_type":"c1","uid":1595382,"ip_address":"","ucode":"A77322C4E07B2D","user_header":"https://static001.geekbang.org/account/avatar/00/18/57/f6/2c7ac1ad.jpg","comment_is_top":false,"comment_ctime":1572838402,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆè¯·æ•™é—®é¢˜ï¼šRocketMQæœ‰ä¸ªDefaultMQPullConsumerå’ŒDefaultMQPushConsumerï¼Œè¿™ä¸¤ä¸ªç±»åˆ°åº•æ˜¯å¹²å˜›çš„ï¼Œå®ƒä»¬åˆ°åº•ä»€ä¹ˆå…³ç³»ï¼Ÿ","like_count":0},{"had_liked":false,"id":136558,"user_name":"å±±å¤´","can_delete":false,"product_type":"c1","uid":1610142,"ip_address":"","ucode":"9CD45A7966F37E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/kQ0NueqD3LTRravKIH2DgtqFKLqgjZQicDZtibdTqJ8pBRjNwlKornibGj2qibPdsgLXh2xQ3MesQ7q2JyATIEBphVHpcS2iaboZqATms4IDUibes/132","comment_is_top":false,"comment_ctime":1569472405,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è€å¸ˆï¼Œè¾›è‹¦äº†ï¼Œèƒ½å¦è®²è®²å‘é€ç«¯å¦‚ä½•æ‰¾åˆ°brokerä¸Šçš„æ–‡ä»¶ï¼Œé˜Ÿåˆ—å’Œæ–‡ä»¶çš„å…³ç³»ï¼Œæ¶ˆæ¯éƒ½æ”¾åˆ°æ–‡ä»¶ä¸Šå§ï¼Œèƒ½å¦å±•å¼€æ¢³ç†æ¢³ç†ï¼Œä¸ç„¶è¿˜æ˜¯ä¸æ‡‚æ€ä¹ˆå®ç°çš„","like_count":0},{"had_liked":false,"id":133760,"user_name":"DFighting","can_delete":false,"product_type":"c1","uid":1233193,"ip_address":"","ucode":"F3BA2426FF8582","user_header":"https://static001.geekbang.org/account/avatar/00/12/d1/29/1b1234ed.jpg","comment_is_top":false,"comment_ctime":1568647227,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"è¿™é‡Œä½¿ç”¨å¼‚æ­¥ä¸»è¦æ˜¯æå‡æ¶ˆæ¯å‘é€çš„ååé‡ï¼Œè€Œåœ¨è¿™è¿‡ç¨‹ä¸­å½±å“ååçš„æœ‰ä¸¤ä¸ªï¼šç£ç›˜IOå’Œç½‘ç»œIOï¼Œè€Œç°åœ¨çš„è¿™ç§å¼‚æ­¥æ–¹å¼å¥½åƒå¹¶æ²¡æœ‰ä¸ºè¿™ä¸¤éƒ¨åˆ†è®¾è®¡è¯¦ç»†çš„ä¼˜åŒ–ï¼Œä¼¼ä¹åªæ˜¯ç®€å•ç”¨äº†ä¸€ä¸ªå¤šçº¿ç¨‹å»æ‰§è¡Œå„è‡ªçš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯å¹¶æ²¡æœ‰å¯¹çœŸæ­£çš„æ€§èƒ½çŸ­æ¿åšä¼˜åŒ–ã€‚æˆ‘è§‰å¾—çœŸè¦æ˜¯å¼‚æ­¥çš„è¯ï¼Œéœ€è¦åœ¨è¿™é‡Œç»´æŒä¸€ä¸ªé˜Ÿåˆ—ã€ä¸€ä¸ªç£ç›˜IOé€‰æ‹©å™¨å’Œä¸€ä¸ªç½‘ç»œå‘é€IOé€‰æ‹©å™¨ï¼ŒçœŸæ­£å¼‚æ­¥çš„ç‚¹åº”è¯¥æ˜¯ä¸¤ä¸ªé€‰æ‹©å™¨åŠ å¹¶å‘åè°ƒå¤„ç†å¾…å‘é€çš„æ•°æ®ã€‚ä¸è¿‡å°±åƒæœ‰äº›åŒå­¦è¯„ä»·çš„ï¼Œnettyåº•å±‚å¯¹å„ç§IOå·²ç»åšäº†å¾ˆå¥½çš„æ”¯æŒï¼Œè¿™é‡Œçš„å¼‚æ­¥å°±æ˜¾å¾—å¾ˆè‹ç™½æ— åŠ›äº†ã€‚ä¸çŸ¥nettyæ˜¯æ€ä¹ˆè®¾è®¡å¼‚æ­¥æ¥è¾¾åˆ°æè‡´çš„æ€§èƒ½çš„ã€‚","like_count":0},{"had_liked":false,"id":133559,"user_name":"humor","can_delete":false,"product_type":"c1","uid":1181867,"ip_address":"","ucode":"9B48C4C7BEC92C","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/ab/caec7bca.jpg","comment_is_top":false,"comment_ctime":1568605238,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100032301,"comment_content":"ä¸€æ˜¯å¤„ç†å¼‚å¸¸çš„ä»£ç å¾ˆå¥‡æ€ªå§ï¼Œæœ‰çš„å¼‚å¸¸ä½¿ç”¨sendCallbackæŠ›å‡ºï¼Œæœ‰çš„ç›´æ¥æŠ›å‡ºï¼›äºŒæ˜¯è¶…æ—¶çš„è¯­ä¹‰æœ‰é—®é¢˜ï¼Œç°åœ¨çš„timeoutæ„æ€æ˜¯æ¶ˆæ¯åœ¨çº¿ç¨‹æ± ä¸­æ’é˜Ÿçš„æ—¶é—´","like_count":0,"discussions":[{"author":{"id":1001893,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","nickname":"å°æ–‡åŒå­¦","note":"","ucode":"48F2AEB989C12A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265719,"discussion_content":"hiï¼Œé—¨é¢æ¨¡å¼æ¥åˆ†æ MVC æ¡†æ¶çš„  Controller ä¸æ˜¯å¾ˆåˆé€‚ã€‚è®¾è®¡æ¨¡å¼æ˜¯ç”¨æ¥è®¾è®¡æŸä¸ªç±»æˆ–è€…å­ç³»ç»Ÿçš„ï¼ŒController å’Œ MVC çš„å…³ç³»ï¼Œå…¶å®æ˜¯ä¸€ç§å¼€å‘æ¡†æ¶ï¼Œä¸¤è€…çš„è€ƒè™‘çš„é—®é¢˜ä¸æ˜¯ä¸€ä¸ªç»´åº¦çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šController ä¸­æŸä¸ªç±»ä½¿ç”¨äº†é—¨é¢æ¨¡å¼ï¼Œè®©ç³»ç»Ÿæ›´å®¹æ˜“è¢«è®¿é—®ä½¿ç”¨ï¼Œä½†å¾ˆå°‘è¯´ Controller æœ¬èº«å°±æ˜¯é—¨é¢æ¨¡å¼ã€‚:ï¼‰\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589430131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132381,"user_name":"Geek_zbvt62","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg","comment_is_top":false,"comment_ctime":1568103966,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"åŒæ¥¼ä¸Š@lmtooç­”æ¡ˆï¼Œæºç ä¸€ç›´è¿½ä¸‹å»å‘ç°å›è°ƒä¸»è¦è¿˜æ˜¯NettyRemotingåšçš„ï¼Œå›è°ƒäº‹ä»¶åº”è¯¥å‘ç”Ÿåœ¨nettyçš„event executorç»‘å®šçš„çº¿ç¨‹å†…ã€‚æœ€ä¸Šå±‚åˆ›å»ºçº¿ç¨‹æ± æ²¡ä»€ä¹ˆæ„ä¹‰ã€‚æ”¹è¿›çš„è¯æ˜¯ä¸æ˜¯çº¿ç¨‹æ± å»æ‰äº†å°±å¯ä»¥äº†ã€‚","like_count":0},{"had_liked":false,"id":132381,"user_name":"Geek_zbvt62","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/d28174a9.jpg","comment_is_top":false,"comment_ctime":1568103966,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100032301,"comment_content":"åŒæ¥¼ä¸Š@lmtooç­”æ¡ˆï¼Œæºç ä¸€ç›´è¿½ä¸‹å»å‘ç°å›è°ƒä¸»è¦è¿˜æ˜¯NettyRemotingåšçš„ï¼Œå›è°ƒäº‹ä»¶åº”è¯¥å‘ç”Ÿåœ¨nettyçš„event executorç»‘å®šçš„çº¿ç¨‹å†…ã€‚æœ€ä¸Šå±‚åˆ›å»ºçº¿ç¨‹æ± æ²¡ä»€ä¹ˆæ„ä¹‰ã€‚æ”¹è¿›çš„è¯æ˜¯ä¸æ˜¯çº¿ç¨‹æ± å»æ‰äº†å°±å¯ä»¥äº†ã€‚","like_count":0}]}