{"id":93819,"title":"26 | å¦‚ä½•æé«˜ JSON è§£æçš„æ€§èƒ½ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æˆ´é“­ã€‚</p><p>åœ¨iOS å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éƒ½ä¼šç¢°åˆ°è¿™æ ·çš„é—®é¢˜ï¼šä¸åŒå›¢é˜Ÿå¼€å‘çš„åº“éœ€è¦è¿›è¡Œæ•°æ®é€šä¿¡ï¼Œè€Œé€šä¿¡æ•°æ®è§„èŒƒé€šå¸¸å¾ˆéš¾ç¡®å®šã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠå¦‚ä½•é«˜æ•ˆåœ°è§£å†³è¿™ä¸ªé—®é¢˜å§ã€‚</p><p>åŒä¸€ä¸ªç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„æ•°æ®é€šä¿¡éå¸¸ç®€å•ï¼Œå› ä¸ºæ•°æ®çš„è§„èŒƒéƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥è¾“å…¥å’Œè¾“å‡ºä¸éœ€è¦åšä»»ä½•è½¬æ¢ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸åŒç¼–ç¨‹è¯­è¨€ä¹‹é—´è¿›è¡Œæ•°æ®é€šä¿¡ï¼Œå°±ä¼šæ¯”è¾ƒéº»çƒ¦äº†ã€‚æ¯”å¦‚ï¼Œä¸€ç§è¯­è¨€æŒ‰ç…§è‡ªèº«çš„æ ‡å‡†è§„èŒƒè¾“å‡ºäº†ä¸€ä»½æ•°æ®ï¼Œå¦ä¸€é—¨è¯­è¨€æ¥æ”¶åˆ°æ—¶éœ€è¦ä¾æ®è‡ªèº«ç¼–ç¨‹è¯­è¨€æ ‡å‡†è¿›è¡Œæ•°æ®å¯¹é½ã€‚</p><p>å¯¹é½ä¸€é—¨è¯­è¨€çš„æ•°æ®æˆ–è®¸ä½ è¿˜èƒ½å¤Ÿæ¥å—ï¼Œä½†æ˜¯å¦‚æœå¯¹æ¥çš„è¯­è¨€å¤šäº†ï¼Œä½ å°±éœ€è¦å†™å¾ˆå¤šä»½èƒ½å¤Ÿä¸ä¹‹å¯¹åº”çš„æ•°æ®å¯¹é½è½¬æ¢ä»£ç ã€‚ç¼–å†™å’Œç»´æŠ¤çš„æˆæœ¬å¯æƒ³è€ŒçŸ¥ï¼Œé‚£ä¹ˆç›®å‰æœ‰æ²¡æœ‰ä¸€ç§é€šç”¨ï¼Œè€Œä¸”å„ä¸ªç¼–ç¨‹è¯­è¨€éƒ½èƒ½æ”¯æŒçš„æ•°æ®æ ¼å¼å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯æœ‰çš„ã€‚è¿™ä¸ªæ•°æ®æ ¼å¼ï¼Œå°±æ˜¯æˆ‘ä»Šå¤©è¦è·Ÿä½ èŠçš„ JSONã€‚</p><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¼šå…ˆå’Œä½ èŠèŠä»€ä¹ˆæ˜¯ JSONï¼›ç„¶åï¼Œå†å’Œä½ è¯´è¯´ JSON çš„ä½¿ç”¨åœºæ™¯ï¼Œä»¥åŠ iOS é‡Œæ˜¯å¦‚ä½•è§£æ JSON çš„ï¼›æœ€åï¼Œå†å’Œä½ åˆ†æå¦‚ä½•æé«˜ JSON çš„è§£ææ€§èƒ½ã€‚</p><h2>ä»€ä¹ˆæ˜¯ JSONï¼Ÿ</h2><p>JSON ï¼Œæ˜¯JavaScript Object Notationçš„ç¼©å†™ã€‚å…¶å®ï¼ŒJSONæœ€åˆæ˜¯è¢«è®¾è®¡ä¸º JavaScript è¯­è¨€çš„ä¸€ä¸ªå­é›†ï¼Œä½†æœ€ç»ˆå› ä¸ºå’Œç¼–ç¨‹è¯­è¨€æ— å…³ï¼Œæ‰€ä»¥æˆä¸ºäº†ä¸€ç§å¼€æ”¾æ ‡å‡†çš„å¸¸è§æ•°æ®æ ¼å¼ã€‚</p><!-- [[[read_end]]] --><p>è™½ç„¶JSONæºäº JavaScriptï¼Œä½†åˆ°ç›®å‰å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰äº† JSON è§£æçš„åº“ï¼ŒåŒ…æ‹¬ Cã€C++ã€Javaã€Perlã€Python ç­‰ç­‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šç¼–ç¨‹è¯­è¨€å†…ç½®äº† JSON ç”Ÿæˆå’Œè§£æçš„æ–¹æ³•ï¼Œæ¯”å¦‚ PHP åœ¨5.2ç‰ˆæœ¬å¼€å§‹å†…ç½®äº† json_encode() æ–¹æ³•ï¼Œå¯ä»¥å°† PHP é‡Œçš„ Array ç›´æ¥è½¬åŒ–æˆ JSONã€‚è½¬æ¢ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>$arr = array(array(7,11,21));\necho json_encode($arr).&quot;&lt;br&gt;&quot;;\n\n$dic = array('name1' =&gt; 'val1', 'name2' =&gt; 'val2');\necho json_encode($dic)\n</code></pre><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><pre><code>[[7,11,21]]\n{&quot;name1&quot;:&quot;val1&quot;,&quot;name2&quot;:&quot;val2&quot;}\n</code></pre><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œç”Ÿæˆäº†ä¸¤ä¸ª JSON å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªè§£æå®Œåå°±æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œç¬¬äºŒä¸ªè§£æå®Œåå°±æ˜¯ä¸€ä¸ªå­—å…¸ã€‚<strong>æœ‰äº†ç¼–ç¨‹è¯­è¨€å†…ç½®æ–¹æ³•è§£æå’Œç”Ÿæˆ JSON çš„æ”¯æŒï¼ŒJSON æˆä¸ºäº†ç†æƒ³çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚</strong></p><p>é€šè¿‡ä¸Šé¢ç”Ÿæˆçš„ JSON å¯ä»¥çœ‹å‡ºï¼ŒJSON è¿™ç§æ–‡æœ¬æ•°æ®äº¤æ¢æ ¼å¼æ˜“è¯»ï¼Œä¸”ç»“æ„ç®€å•ã€‚</p><p>JSONåŸºäºä¸¤ç§ç»“æ„ï¼š</p><ul>\n<li>åå­—/å€¼å¯¹é›†åˆï¼šè¿™ç§ç»“æ„åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€é‡Œè¢«å®ç°ä¸ºå¯¹è±¡ã€å­—å…¸ã€Hash è¡¨ã€ç»“æ„ä½“æˆ–è€…å…³è”æ•°ç»„ã€‚</li>\n<li>æœ‰åºå€¼åˆ—è¡¨ï¼šè¿™ç§ç»“æ„åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€é‡Œè¢«å®ç°ä¸ºæ•°ç»„ã€å‘é‡ã€åˆ—è¡¨æˆ–åºåˆ—ã€‚</li>\n</ul><p>å„ç§ç¼–ç¨‹è¯­è¨€éƒ½ä»¥æŸç§å½¢å¼æ”¯æŒç€è¿™ä¸¤ç§ç»“æ„ã€‚æ¯”å¦‚ï¼ŒPHP çš„ Array æ—¢æ”¯æŒåå­—/å€¼å¯¹é›†åˆåˆæ”¯æŒæœ‰åºå€¼åˆ—è¡¨ï¼›åœ¨ Swift é‡Œé”®å€¼é›†åˆå°±æ˜¯å­—å…¸ï¼Œæœ‰åºå€¼åˆ—è¡¨å°±æ˜¯æ•°ç»„ã€‚<strong>åå­—/å€¼å¯¹é›†åˆ</strong>åœ¨ JSON å’Œ JavaScript é‡Œéƒ½è¢«ç§°ä¸ºå¯¹è±¡ã€‚JSONè¯­æ³•å›¾ä»¥åŠè¯´æ˜ï¼Œä½ å¯ä»¥åœ¨ <a href=\"https://www.json.org/\">JSON å®˜ç½‘</a>æŸ¥çœ‹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘åªåˆ—å‡ºäº†å‡ ä¸ªç”¨çš„æ¯”è¾ƒå¤šçš„è¯­æ³•å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/00/4b/00077e283c07754189106221b6886c4b.gif?wh=598*113\" alt=\"\"><br>\nå¦‚ä¸Šé¢è¯­æ³•å›¾æ‰€ç¤ºï¼Œå¯¹è±¡æ˜¯ä»¥å·¦å¤§æ‹¬å·å¼€å¤´å’Œå³å¤§æ‹¬å·ç»“å°¾ï¼Œåå­—åé¢è·Ÿå†’å·ï¼Œåå­—/å€¼å¯¹ç”¨é€—å·åˆ†éš”ã€‚æ¯”å¦‚ï¼š</p><pre><code>{&quot;name1&quot;:&quot;val1&quot;,&quot;name2&quot;:&quot;val2&quot;}\n</code></pre><p><strong>æœ‰åºå€¼åˆ—è¡¨</strong>åœ¨ JSON å’Œ JavaScript é‡Œéƒ½å«æ•°ç»„ï¼Œå…¶è¯­æ³•å›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/27/df/27be471d9d5c0a9604216fb55d1401df.gif?wh=598*113\" alt=\"\"><br>\nå¯ä»¥çœ‹å‡ºæ•°ç»„æ˜¯ä»¥å·¦ä¸­æ‹¬å·å¼€å¤´ï¼Œä»¥å³ä¸­æ‹¬å·ç»“å°¾ï¼Œå€¼ä»¥é€—å·åˆ†éš”ã€‚æ•°ç»„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>[[7,11,21]]\n</code></pre><p><strong>è¯­æ³•å›¾ä¸­å€¼</strong>çš„è¯­æ³•å›¾å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/4b/ab/4b85ca012e31a1d9eb73b42a4e2220ab.gif?wh=598*278\" alt=\"\"><br>\nå¯ä»¥çœ‹å‡ºï¼Œå€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ã€å¸ƒå°”å€¼tureã€å¸ƒå°”å€¼falseã€ç©ºå€¼ã€‚æ ¹æ®è¿™ä¸ªè¯­æ³•ï¼ŒJSON å¯ä»¥é€šè¿‡å®ç°å¯¹è±¡å’Œæ•°ç»„çš„åµŒå¥—æ¥æè¿°æ›´ä¸ºå¤æ‚çš„æ•°æ®ç»“æ„ã€‚</p><p>JSON æ˜¯æ²¡æœ‰æ³¨é‡Šçš„ï¼Œæ°´å¹³åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ã€å›è½¦ç¬¦éƒ½ä¼šè¢«å½“åšç©ºæ ¼ã€‚å­—ç¬¦ä¸²ç”±åŒå¼•å·æ‹¬èµ·æ¥ï¼Œé‡Œé¢å¯ä»¥ä½¿é›¶åˆ°å¤šä¸ª Unicode å­—ç¬¦åºåˆ—ï¼Œä½¿ç”¨åæ–œæ æ¥è¿›è¡Œè½¬ä¹‰ã€‚</p><h2>JSONçš„ä½¿ç”¨åœºæ™¯</h2><p>JSON çš„æ•°æ®ç»“æ„å’Œä»»ä½•ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•ç»“æ„æ¯”èµ·æ¥éƒ½è¦ç®€å•å¾—å¤šï¼Œä½†å®ƒèƒ½å¹²çš„äº‹æƒ…å´ä¸€ç‚¹å„¿ä¹Ÿä¸å°‘ï¼Œç”šè‡³å¯ä»¥å®Œæ•´åœ°æè¿°å‡ºä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„ä»£ç é€»è¾‘ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„è¿™æ®µ JavaScript ä»£ç ï¼š</p><pre><code>if (hour &lt; 18) {\n  greeting = &quot;Good day&quot;;\n}\n</code></pre><p>è¿™æ®µ JavaScript ä»£ç çš„é€»è¾‘æ˜¯ï¼Œå½“ hour å˜é‡å°äº18æ—¶ï¼Œgreeting è®¾ç½®ä¸º Good day å­—ç¬¦ä¸²ï¼Œæ ¹æ® JavaScript çš„è¯­æ³•è§„åˆ™ï¼Œå®Œæ•´é€»è¾‘çš„è¯­æ³•æ ‘ç»“æ„å¯ä»¥é€šè¿‡ JSON æè¿°å‡ºæ¥ã€‚å¯¹åº”çš„JSONï¼Œå¦‚ä¸‹ï¼š</p><pre><code>{\n  &quot;type&quot;: &quot;Program&quot;,\n  &quot;body&quot;: [\n    {\n      &quot;type&quot;: &quot;IfStatement&quot;,\n      &quot;test&quot;: {\n        &quot;type&quot;: &quot;BinaryExpression&quot;,\n        &quot;left&quot;: {\n          &quot;type&quot;: &quot;Identifier&quot;,\n          &quot;name&quot;: &quot;hour&quot;\n        },\n        &quot;operator&quot;: &quot;&lt;&quot;,\n        &quot;right&quot;: {\n          &quot;type&quot;: &quot;Literal&quot;,\n          &quot;value&quot;: 18,\n          &quot;raw&quot;: &quot;18&quot;\n        }\n      },\n      &quot;consequent&quot;: {\n        &quot;type&quot;: &quot;BlockStatement&quot;,\n        &quot;body&quot;: [\n          {\n            &quot;type&quot;: &quot;ExpressionStatement&quot;,\n            &quot;expression&quot;: {\n              &quot;type&quot;: &quot;AssignmentExpression&quot;,\n              &quot;operator&quot;: &quot;=&quot;,\n              &quot;left&quot;: {\n                &quot;type&quot;: &quot;Identifier&quot;,\n                &quot;name&quot;: &quot;greeting&quot;\n              },\n              &quot;right&quot;: {\n                &quot;type&quot;: &quot;Literal&quot;,\n                &quot;value&quot;: &quot;Good day&quot;,\n                &quot;raw&quot;: &quot;\\&quot;Good day\\&quot;&quot;\n              }\n            }\n          }\n        ]\n      },\n      &quot;alternate&quot;: null\n    }\n  ],\n  &quot;sourceType&quot;: &quot;module&quot;\n}\n</code></pre><p>ä»ä¸Šé¢çš„ JSON ä»£ç å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªè¯­æ³•æ ‘èŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼ŒåŒçº§èŠ‚ç‚¹ä½¿ç”¨çš„æ˜¯ JSON æ•°ç»„ã€‚JavaScript è¯­æ³•è§„åˆ™æ ‡å‡†å¯ä»¥åœ¨<a href=\"https://www.ecma-international.org/publications/standards/Standard.htm\">Ecma ç½‘ç«™</a>ä¸Šæ‰¾åˆ°ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™æ®µ JavaScript ä»£ç ï¼š</p><pre><code>button.onclick = function() {\n    var name = realname('Tom');\n    if(name.length &gt;= 5) {\n        show();\n    }\n}\n</code></pre><p>ä¸Šé¢è¿™æ®µ JavaScript ä»£ç å¯¹åº”çš„è¯­æ³•æ ‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/ad/42/adbf1a5955d2d7014691d098bd8be942.jpeg?wh=1600*1199\" alt=\"\"><br>\nJavaScript ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•æ ‘èƒ½å¤Ÿä½¿ç”¨ JSON æ¥æè¿°ï¼Œå…¶ä»–ç¼–ç¨‹è¯­è¨€åŒæ ·ä¹Ÿå¯ä»¥ï¼Œæ¯”å¦‚Objective-C æˆ– Swiftï¼Œéƒ½èƒ½å¤Ÿç”Ÿæˆè‡ªå·±çš„è¯­æ³•æ ‘ç»“æ„ï¼Œè½¬æˆ JSON åèƒ½å¤Ÿåœ¨è¿è¡ŒæœŸè¢«åŠ¨æ€åœ°è¯†åˆ«ã€‚å› æ­¤ï¼Œ<strong>App çš„ä¸šåŠ¡é€»è¾‘åŠ¨æ€åŒ–å°±ä¸ä»…é™äºä½¿ç”¨ JavaScript è¿™ä¸€é—¨è¯­è¨€æ¥ç¼–å†™ï¼Œè€Œæ˜¯å¯ä»¥é€‰æ‹©ä½¿ç”¨å…¶ä»–ä½ ç†Ÿæ‚‰çš„è¯­è¨€ã€‚</strong></p><p>JSON ä¸ä»…å¯ä»¥æè¿°ä¸šåŠ¡æ•°æ®ä½¿å¾—ä¸šåŠ¡æ•°æ®èƒ½å¤ŸåŠ¨æ€æ›´æ–°ï¼Œè¿˜å¯ä»¥ç”¨æ¥æè¿°ä¸šåŠ¡é€»è¾‘ï¼Œä»¥å®ç°ä¸šåŠ¡é€»è¾‘çš„åŠ¨æ€åŒ–ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥ç”¨æ¥æè¿°é¡µé¢å¸ƒå±€ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¥å‰å°±åšè¿‡è¿™ä¹ˆä¸€ä»¶äº‹å„¿ï¼šè§£æä¸€ä¸ªH5é¡µé¢ç¼–è¾‘å™¨ç”Ÿæˆçš„ JSONï¼Œå°† JSON å¯¹åº”ç”Ÿæˆ iOS åŸç”Ÿç•Œé¢å¸ƒå±€ä»£ç ã€‚æˆ‘å½“æ—¶æ˜¯ç”¨ Swift è¯­è¨€æ¥ç¼–å†™è¿™ä¸ªé¡¹ç›®çš„ï¼Œå®Œæ•´ä»£ç åœ¨<a href=\"https://github.com/ming1016/HTN/tree/master/Sources/H5Editor\">è¿™é‡Œ</a>ã€‚</p><p>åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œå¯¹JSON çš„è§£æä½¿ç”¨çš„æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ JSONDecoder çš„ decode æ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>let jsonData = jsonString.data(using: .utf8)!\nlet decoder = JSONDecoder()\nlet jsonModel = try! decoder.decode(H5Editor.self, from: jsonData)\n</code></pre><p>ä¸Šé¢ä»£ç ä¸­çš„ï¼ŒH5Editor æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œèƒ½å¤Ÿè®°å½• JSON è§£æåçš„å­—å…¸å’Œæ•°ç»„ã€‚H5Editor ç»“æ„ä½“å®Œæ•´å®šä¹‰ï¼Œè¯·ç‚¹å‡»<a href=\"https://github.com/ming1016/HTN/blob/master/Sources/H5Editor/H5EditorStruct.swift\">è¿™é‡Œçš„é“¾æ¥</a>ã€‚</p><p>é‚£ä¹ˆï¼Œ JSONDecoder çš„ decode æ–¹æ³•åˆ°åº•æ˜¯æ€ä¹ˆè§£æ JSON çš„å‘¢ï¼Ÿåœ¨æˆ‘çœ‹æ¥ï¼Œäº†è§£è¿™ä¸€è¿‡ç¨‹çš„æœ€å¥½æ–¹å¼ï¼Œå°±æ˜¯ç›´æ¥çœ‹çœ‹å®ƒåœ¨Swift æºç é‡Œæ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p><h2>JSONDecoder å¦‚ä½•è§£æ JSONï¼Ÿ</h2><p>JSONDecoder çš„ä»£ç ï¼Œä½ å¯ä»¥<a href=\"https://github.com/apple/swift/blob/master/stdlib/public/Darwin/Foundation/JSONEncoder.swift\">åœ¨ Swift çš„å®˜æ–¹ GitHub ä¸Š</a>æŸ¥çœ‹ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å…ˆè·Ÿä½ è¯´ä¸‹è§£æ JSON çš„å…¥å£ï¼Œ JSONDecoder çš„ decode æ–¹æ³•ã€‚ä¸‹é¢æ˜¯ decode æ–¹æ³•çš„å®šä¹‰ä»£ç ï¼š</p><pre><code>open func decode&lt;T : Decodable&gt;(_ type: T.Type, from data: Data) throws -&gt; T {\n    let topLevel: Any\n    do {\n       topLevel = try JSONSerialization.jsonObject(with: data)\n    } catch {\n        throw DecodingError.dataCorrupted(DecodingError.Context(codingPath: [], debugDescription: &quot;The given data was not valid JSON.&quot;, underlyingError: error))\n    }\n    // JSONDecoder çš„åˆå§‹åŒ–\n    let decoder = __JSONDecoder(referencing: topLevel, options: self.options)\n    // ä»é¡¶å±‚å¼€å§‹è§£æ JSON\n    guard let value = try decoder.unbox(topLevel, as: type) else {\n        throw DecodingError.valueNotFound(type, DecodingError.Context(codingPath: [], debugDescription: &quot;The given data did not contain a top-level value.&quot;))\n    }\n\n    return value\n}\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„ä»£ç ä¸€èµ·æ¥çœ‹çœ‹ decode æ–¹æ³•æ˜¯å¦‚ä½•è§£æ JSON çš„ã€‚</p><p>ä¸Šé¢ decode æ–¹æ³•å…¥å‚ T.type çš„ T æ˜¯ä¸€ä¸ªæ³›å‹ï¼Œå…·ä½“åˆ°è§£æH5é¡µé¢ç¼–è¾‘å™¨ç”Ÿæˆçš„ JSON çš„ä¾‹å­ï¼Œå°±æ˜¯ H5Editor ç»“æ„ä½“ï¼›å…¥å‚ data å°±æ˜¯ JSON å­—ç¬¦ä¸²è½¬æˆçš„ Data æ•°æ®ã€‚</p><p>decode æ–¹æ³•åœ¨è§£æå®Œåä¼šå°†è§£æåˆ°çš„æ•°æ®ä¿å­˜åˆ°ä¼ å…¥çš„ç»“æ„ä½“ä¸­ï¼Œç„¶åè¿”å›ã€‚åœ¨ decode æ–¹æ³•é‡Œå¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºä¼ å…¥çš„ Data æ•°æ®ä¼šé¦–å…ˆé€šè¿‡ JSONSerialization æ–¹æ³•è½¬åŒ–æˆ topLevel åŸç”Ÿå¯¹è±¡ï¼Œç„¶åtopLevel åŸç”Ÿå¯¹è±¡é€šè¿‡ JSONDecoder åˆå§‹åŒ–æˆä¸€ä¸ª JSONDecoder å¯¹è±¡ï¼Œæœ€åä½¿ç”¨ JSONDecoder çš„ unbox æ–¹æ³•å°†æ•°æ®å’Œä¼ å…¥çš„ç»“æ„ä½“å¯¹åº”ä¸Šï¼Œå¹¶ä¿å­˜åœ¨ç»“æ„ä½“é‡Œè¿›è¡Œè¿”å›ã€‚</p><p>å¯ä»¥çœ‹å‡ºï¼Œç›®å‰ JSONSerialization å·²ç»èƒ½å¤Ÿå¾ˆå¥½åœ°è§£æ JSONï¼ŒJSONDecoderå°†å…¶åŒ…è£…ä»¥åï¼Œé€šè¿‡ unbox æ–¹æ³•ä½¿å¾— JSON è§£æåèƒ½å¾ˆæ–¹ä¾¿åœ°åŒ¹é… JSON æ•°æ®ç»“æ„å’Œ Swift åŸç”Ÿç»“æ„ä½“ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœè¦å°† JSON åº”ç”¨åˆ°æ›´å¤§çš„åœºæ™¯æ—¶ï¼Œæ¯”å¦‚å¯¹ç¼–ç¨‹è¯­è¨€çš„æè¿°æˆ–è€…ç•Œé¢å¸ƒå±€çš„æè¿°ï¼Œå…¶ç”Ÿæˆçš„ JSON æ–‡ä»¶å¯èƒ½ä¼šå¾ˆå¤§ï¼Œå¹¶ä¸”å¯¹è¿™ç§å¤§ JSON æ–‡ä»¶è§£ææ€§èƒ½çš„è¦æ±‚ä¹Ÿä¼šæ›´é«˜ã€‚é‚£ä¹ˆï¼Œæœ‰æ¯”JSONSerializationæ€§èƒ½æ›´å¥½çš„è§£æJSONçš„æ–¹æ³•å—ï¼Ÿ</p><h2>æé«˜ JSON è§£ææ€§èƒ½</h2><p>2019å¹´2æœˆï¼ŒGeoff Langdale å’Œ Daniel Lemireå‘å¸ƒäº† <a href=\"https://github.com/lemire/simdjson\">simdjson</a>ã€‚ simdjsonæ˜¯ä¸€æ¬¾ä»–ä»¬ç ”ç©¶äº†å¾ˆä¹…çš„å¿«é€Ÿ JSON è§£æå™¨ï¼Œ å·ç§°æ¯ç§’å¯è§£æåƒå…†å­—èŠ‚ JSON æ–‡ä»¶ã€‚simdjson å’Œå…¶ä»– JSON è§£æå™¨å¯¹æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/40/5e/401c6aba33f2335f242dbd8f8305885e.png?wh=774*918\" alt=\"\"><br>\nå¯ä»¥çœ‹å‡ºï¼Œåªæœ‰ simdjson èƒ½å¤Ÿè¾¾åˆ°æ¯ç§’åƒå…†å­—èŠ‚çº§åˆ«ï¼Œå¹¶ä¸”è¿œè¿œé«˜äºå…¶ä»– JSON è§£æå™¨ã€‚é‚£ä¹ˆ ï¼Œsimdjson æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘é€šè¿‡ simdjson è§£æ JSON çš„ä¸¤ä¸ªé˜¶æ®µæ¥è·Ÿä½ è¯´æ˜ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œ</strong>ä½¿ç”¨ simdjson å»å‘ç°éœ€è¦ JSON é‡Œé‡è¦çš„å­—ç¬¦é›†ï¼Œæ¯”å¦‚å¤§æ‹¬å·ã€ä¸­æ‹¬å·ã€é€—å·ã€å†’å·ç­‰ï¼Œè¿˜æœ‰ç±»ä¼¼ trueã€falseã€nullã€æ•°å­—è¿™æ ·çš„åŸå­å­—ç¬¦é›†ã€‚ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯æ²¡æœ‰åˆ†æ”¯å¤„ç†çš„ï¼Œè¿™ä¸ªé˜¶æ®µä¸è¯æ³•åˆ†æéå¸¸ç±»ä¼¼ã€‚</p><p><strong>ç¬¬äºŒä¸ªé˜¶æ®µï¼Œ</strong>simdjson ä¹Ÿæ²¡æœ‰åšåˆ†æ”¯å¤„ç†ï¼Œè€Œæ˜¯é‡‡ç”¨çš„å †æ ˆç»“æ„ï¼ŒåµŒå¥—å…³ç³»ä½¿ç”¨ goto çš„æ–¹å¼è¿›è¡Œå¯¼èˆªã€‚simdjson é€šè¿‡ç´¢å¼•å¯ä»¥å¤„ç†æ‰€æœ‰è¾“å…¥çš„ JSON å†…å®¹è€Œæ— éœ€ä½¿ç”¨åˆ†æ”¯ï¼Œè¿™éƒ½å½’åŠŸäºèªæ˜çš„æ¡ä»¶ç§»åŠ¨æ“ä½œï¼Œä½¿å¾—éå†è¿‡ç¨‹å˜å¾—é«˜æ•ˆäº†å¾ˆå¤šã€‚</p><p>é€šè¿‡ simdjson è§£æ JSON çš„ä¸¤ä¸ªé˜¶æ®µå¯ä»¥çœ‹å‡ºï¼Œsimdjsonçš„ä¸»è¦æ€è·¯æ˜¯å°½å¯èƒ½åœ°ä»¥æœ€é«˜æ•ˆçš„æ–¹å¼å°† JSON è¿™ç§å¯è¯»æ€§é«˜çš„æ•°æ®æ ¼å¼è½¬æ¢ä¸ºè®¡ç®—æœºèƒ½æ›´å¿«ç†è§£çš„æ•°æ®æ ¼å¼ã€‚</p><p>ä¸ºäº†è¾¾åˆ°å¿«é€Ÿè§£æçš„ç›®çš„ï¼Œ simdjsonåœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µä¸€æ¬¡æ€§ä½¿ç”¨äº† 64å­—èŠ‚è¾“å…¥è¿›è¡Œå¤§è§„æ¨¡çš„æ•°æ®æ“ä½œï¼Œæ£€æŸ¥å­—ç¬¦å’Œå­—ç¬¦ç±»æ—¶ä»¥åŠå½“è·å¾—æ©ç åº”ç”¨å˜æ¢æ—¶ä»¥64ä½è¿›è¡Œä½æ“ä½œã€‚è¿™ç§æ–¹å¼ï¼Œå¯¹äºå¤§çš„ JSON æ•°æ®è§£ææ€§èƒ½æå‡æ˜¯éå¸¸æ˜æ˜¾çš„ã€‚</p><p>å¦‚æœä½ æƒ³æ›´è¯¦ç»†åœ°äº†è§£è¿™ä¸¤ä¸ªé˜¶æ®µçš„è§£ææ€è·¯ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ç¯‡è®ºæ–‡â€œ<a href=\"https://arxiv.org/abs/1902.08318\">Parsing Gigabytes of JSON per Second</a>â€ã€‚å…¶å®ï¼Œsimdjson å°±æ˜¯å¯¹è¿™ç¯‡è®ºæ–‡çš„å®ç°ï¼Œä½ å¯ä»¥åœ¨<a href=\"https://github.com/lemire/simdjson\">GitHub</a>ä¸ŠæŸ¥çœ‹å…·ä½“çš„å®ç°ä»£ç ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œä¸€è¾¹çœ‹è®ºæ–‡ï¼Œä¸€è¾¹çœ‹å¯¹åº”çš„ä»£ç å®ç°ï¼Œä¸å¤±ä¸ºä¸€ç§é«˜æ•ˆçš„å­¦ä¹ æ–¹å¼ã€‚</p><p>è€Œå¦‚æœä½ æƒ³è¦åœ¨å·¥ç¨‹ä¸­ä½¿ç”¨ simdjsonçš„è¯ï¼Œç›´æ¥ä½¿ç”¨å®ƒæä¾›çš„ä¸€ä¸ªç®€å•æ¥å£å³å¯ã€‚å…·ä½“çš„ä½¿ç”¨ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>#include &quot;simdjson/jsonparser.h&quot;\n\n/...\n\nconst char * filename = ... // JSON æ–‡ä»¶\nstd::string_view p = get_corpus(filename);\nParsedJson pj = build_parsed_json(p); // è§£ææ–¹æ³•\n// you no longer need p at this point, can do aligned_free((void*)p.data())\nif( ! pj.isValid() ) {\n    // å‡ºé”™å¤„ç†\n}\naligned_free((void*)p.data());\n</code></pre><h2>å°ç»“</h2><p>åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ åˆ†äº«äº†ä»€ä¹ˆæ˜¯ JSONï¼ŒJSON çš„ä½¿ç”¨åœºæ™¯ï¼Œä»¥åŠsimdjson è¿™ä¸ªå¼€æº JSON è§£æåº“ã€‚simdjson èƒ½å¤Ÿæå¤§åœ°æé«˜ JSON è§£ææ€§èƒ½ï¼Œä½ ä¹Ÿå¯ä»¥éå¸¸æ–¹ä¾¿åœ°æŠŠå®ƒç”¨åˆ°è‡ªå·±çš„å·¥ç¨‹ä¸­ã€‚</p><p>å½“éœ€è¦å¯¹ç°æœ‰æ–¹æ¡ˆè¿›è¡Œä¼˜åŒ–æ—¶ï¼Œæœ‰çš„äººä¼šåˆ©ç”¨è‡ªå·±æ‰å®çš„è®¡ç®—æœºåŸºç¡€çŸ¥è¯†æ‰¾å‡ºæ›´ä¼˜ç§€çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæœ‰çš„äººåªèƒ½ç­‰å¾…æ›´ä¼˜ç§€çš„è§£å†³æ–¹æ¡ˆçš„å‡ºç°ã€‚simdjsonçš„ä½œè€…æ˜æ˜¾å°±å±äºå‰è€…ï¼Œè€Œæˆ‘ä»¬ä¹Ÿè¦ä¸æ–­å……å®è‡ªå·±çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŠªåŠ›æˆä¸ºè¿™å…¶ä¸­çš„ä¸€å‘˜ã€‚</p><h2>è¯¾åå°ä½œä¸š</h2><p>å¯¹äº JSON çš„è§£æåº“ï¼Œæˆ‘ä»Šå¤©åªå’Œä½ åˆ†æäº†ç³»ç»Ÿè‡ªå¸¦çš„ JSONSerialization å’Œ simdjsonã€‚é‚£ä¹ˆï¼Œæˆ‘æƒ³è¯·ä½ è¯´è¯´ä½ ç›®å‰ä½¿ç”¨çš„ JSON è§£æåº“æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒæ˜¯å¦‚ä½•è§£æ JSON çš„ï¼Œæ€§èƒ½åˆå¦‚ä½•å‘¢ï¼Ÿ</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","comments":[{"had_liked":false,"id":92855,"user_name":"å¼ è’™","can_delete":false,"product_type":"c1","uid":1035858,"ip_address":"","ucode":"CF8727F5DCFD55","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ce/52/4f1911b5.jpg","comment_is_top":false,"comment_ctime":1557353877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44507026837","product_id":100024501,"comment_content":"æˆ´è€å¸ˆç»™æˆ‘ä¼ è¾¾çš„æ€ç»´æ–¹å¼ã€‚é˜¶æ®µä¸€ï¼Œèƒ½ç”¨å°±å¥½ã€‚é˜¶æ®µäºŒï¼Œèƒ½ä¸èƒ½æ›´å¥½ã€‚æ˜¾ç„¶ï¼Œç¬¬äºŒç§æ›´æœ‰åˆ©äºè‡ªå·±çš„è¿›æ­¥ã€‚","like_count":10},{"had_liked":false,"id":92970,"user_name":"TengFeng","can_delete":false,"product_type":"c1","uid":1453559,"ip_address":"","ucode":"A5D9CC67C00C6A","user_header":"https://static001.geekbang.org/account/avatar/00/16/2d/f7/25c0591c.jpg","comment_is_top":false,"comment_ctime":1557370333,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"31622141405","product_id":100024501,"comment_content":"YYmodel æ–¹ä¾¿ï¼Œæ•ˆç‡è¿˜å¥½","like_count":8,"discussions":[{"author":{"id":2076600,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/af/b8/458866d3.jpg","nickname":"Bo","note":"","ucode":"D5DD3300310C02","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574830,"discussion_content":"çœ‹èµ·æ¥YYmodelå’Œsidmjsonä¸æ˜¯ä¸€ä¸ªå±‚é¢çš„åº“ï¼Œsimdjsonå’Œç³»ç»Ÿè‡ªå¸¦çš„NSJSONSerializationæ˜¯ä¸€ä¸ªå±‚çº§ï¼ŒYYModelæ˜¯åŸºäºNSJSONSerializationå°è£…çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654395310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":105995,"user_name":"Jeffrey","can_delete":false,"product_type":"c1","uid":1453745,"ip_address":"","ucode":"1CA6A788EA9B74","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/b1/85bbfa6b.jpg","comment_is_top":false,"comment_ctime":1561122590,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23035959070","product_id":100024501,"comment_content":"æˆ‘æŠŠsimdjsonä»£ç ä¸‹è½½ä¸‹æ¥ å†™ä¸€ä¸ªOCè§£æjsonçš„ demo , ä½†æ˜¯æ•ˆç‡æ²¡æœ‰ NSJSONSerialization é«˜ å¸Œæœ›è€å¸ˆæœ‰ç©ºäº†å¸®å¿™çœ‹ä¸‹ simdjson æ˜¯å¦åšçš„æ¯”ç³»ç»Ÿçš„NSJSONSerialization æ›´å¥½ èƒ½å¦æé«˜å¼€å‘æ•ˆç‡<br><br>https:&#47;&#47;github.com&#47;BestiOSDev&#47;MTSimdjson","like_count":6},{"had_liked":false,"id":213077,"user_name":"lvv","can_delete":false,"product_type":"c1","uid":1987666,"ip_address":"","ucode":"22B961D413DEFF","user_header":"","comment_is_top":false,"comment_ctime":1588297706,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18768166890","product_id":100024501,"comment_content":"swift å‡ºäº†codable ä»¥åå…¶ä»–åº“éƒ½ä¸é¦™äº†","like_count":5},{"had_liked":false,"id":96790,"user_name":"Geek","can_delete":false,"product_type":"c1","uid":1456901,"ip_address":"","ucode":"8C1AD026C1AC84","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/05/b2776d73.jpg","comment_is_top":false,"comment_ctime":1558507281,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14443409169","product_id":100024501,"comment_content":"ä»€ä¹ˆæ—¶å€™ä¼šæœ‰1GBæµé‡çš„JSONéœ€è¦è§£æï¼Œå¯¹äºå¤§å¤šæ•°çš„æ¥å£æ¥è¯´ï¼Œå¸¸ç”¨çš„0.2GB&#47;så’Œ2.2GB&#47;sï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„","like_count":4},{"had_liked":false,"id":92948,"user_name":"bo","can_delete":false,"product_type":"c1","uid":1456491,"ip_address":"","ucode":"0D99D00E1AF5BA","user_header":"https://static001.geekbang.org/account/avatar/00/16/39/6b/5fcc65ad.jpg","comment_is_top":false,"comment_ctime":1557367252,"is_pvip":false,"replies":[{"id":"35024","content":"JSON è§£æåçš„å¤„ç†å¯ä»¥å‚çœ‹ä¸‰æ–¹åº“çš„å¤„ç†","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1558852132,"ip_address":"","comment_id":92948,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14442269140","product_id":100024501,"comment_content":"NSJSONSerialization åœ¨è§£æå€¼æ˜¯ null çš„æ—¶å€™ã€‚å¹¶ä¸ä¼šç™¾åˆ†ä¹‹ç™¾è¿”å› NSNullï¼Œç»“æœæ˜¯éšæœºçš„ã€‚æœ‰ç©ºæ•°ç»„ï¼ŒNSNullï¼Œè¿˜æœ‰å€¼æ˜¯ 0 çš„ NSNumberã€‚ç”±äºä¸šåŠ¡æ²¡æœ‰è¿‡æ»¤ NSNumber å¯¼è‡´æŠŠå®ƒå½“ä½œ NSDictionary æ¥å¤„ç†å‡ºç°äº†æ¶ˆæ¯ä¸å“åº”çš„ crashã€‚å¯¹äºè¿™ç±»é—®é¢˜ï¼Œè€å¸ˆæ˜¯å¦æœ‰å¥½çš„è§£å†³åŠæ³•ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449434,"discussion_content":"JSON è§£æåçš„å¤„ç†å¯ä»¥å‚çœ‹ä¸‰æ–¹åº“çš„å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558852132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":92857,"user_name":"Jeffrey","can_delete":false,"product_type":"c1","uid":1453745,"ip_address":"","ucode":"1CA6A788EA9B74","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/b1/85bbfa6b.jpg","comment_is_top":false,"comment_ctime":1557355267,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14442257155","product_id":100024501,"comment_content":"æˆ‘ç”¨çš„æ˜¯Objective-C Foundationä¸­è‡ªå¸¦çš„æ–¹æ³• NSJSONSerializationæ¥è§£æjson æœ¬æ–‡ä¸­æåˆ°çš„simdjson æ¯”iOSç³»ç»Ÿè‡ªå¸¦çš„jsonè§£ææ•ˆç‡é«˜å—ï¼Ÿæ˜¯ä¸æ˜¯ä»¥åå¯ä»¥ç”¨simdjsonæ¥æ›¿ä»£ NSJsonSerialization","like_count":3},{"had_liked":false,"id":96201,"user_name":"æ¢¦ç¿¼","can_delete":false,"product_type":"c1","uid":1265322,"ip_address":"","ucode":"C1D63EAD25960B","user_header":"https://static001.geekbang.org/account/avatar/00/13/4e/aa/3a4708f2.jpg","comment_is_top":false,"comment_ctime":1558356557,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5853323853","product_id":100024501,"comment_content":"é¡¹ç›®ä¸­è§£æMJExtensionæ¥è§£æjson,ä½†å­˜åœ¨æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ï¼Œç›®å‰è§£æä¸€ä¸ªæ•°æ®æ¨¡å‹éœ€è¦20mså·¦å³ï¼Œå¯¼è‡´æœ‰æ˜æ˜¾çš„å¡é¡¿ç°è±¡ï¼Œå‡†å¤‡å‘yyModelè½¬å‹ã€‚","like_count":2,"discussions":[{"author":{"id":1471551,"avatar":"https://static001.geekbang.org/account/avatar/00/16/74/3f/52fa1e72.jpg","nickname":"findU","note":"","ucode":"B3F26ED4E5A29D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":998,"discussion_content":"ä¿ºä¹Ÿä¸€æ ·...","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562228252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93208,"user_name":"è¿™ä¸ªshaonianä¸å¤ªå†·ä¸¶","can_delete":false,"product_type":"c1","uid":1073685,"ip_address":"","ucode":"437F52FD32A043","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/15/62976153.jpg","comment_is_top":false,"comment_ctime":1557423143,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5852390439","product_id":100024501,"comment_content":"Simdjsonå¦‚ä½•åœ¨iOSä¸­ä½¿ç”¨å‘¢","like_count":1},{"had_liked":false,"id":92930,"user_name":"æ¢…é•¿è‹","can_delete":false,"product_type":"c1","uid":1238732,"ip_address":"","ucode":"DD1CBB46E444A3","user_header":"https://static001.geekbang.org/account/avatar/00/12/e6/cc/7fc82af4.jpg","comment_is_top":false,"comment_ctime":1557365281,"is_pvip":false,"replies":[{"id":"35025","content":"ç”¨çš„ç³»ç»Ÿ NSJSONSerialization","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1558852157,"ip_address":"","comment_id":92930,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5852332577","product_id":100024501,"comment_content":"é‚£mjextentionè§£ææ•ˆç‡å¦‚ä½•ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449427,"discussion_content":"ç”¨çš„ç³»ç»Ÿ NSJSONSerialization","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558852157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":101564,"user_name":"Jeffrey","can_delete":false,"product_type":"c1","uid":1453745,"ip_address":"","ucode":"1CA6A788EA9B74","user_header":"https://static001.geekbang.org/account/avatar/00/16/2e/b1/85bbfa6b.jpg","comment_is_top":false,"comment_ctime":1559872748,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559872748","product_id":100024501,"comment_content":"ç›®å‰æ‰‹åŠ¨è§£æjsonä¸éœ€è¦ç”¨ä»€ä¹ˆåº“ æ•ˆç‡è¿˜å¯ä»¥ ğŸ˜‚ yymodeléƒ½è¯´äº† åª²ç¾ç›´æ¥è§£æjson","like_count":0},{"had_liked":false,"id":98874,"user_name":"xilie","can_delete":false,"product_type":"c1","uid":1013805,"ip_address":"","ucode":"AFCC4E157F7830","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVegfjqa0gM4hcRrBhZkIf7Uc5oeTMYsg6o5pd76IQlUoIIh2ic6P22xVEFtRnAzjyLtiaPVstkKug/132","comment_is_top":false,"comment_ctime":1559111833,"is_pvip":false,"replies":[{"id":"38607","content":"ä¸‰æ–¹ä¹Ÿæ˜¯ç”¨çš„ JSONDecoder","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1561388009,"ip_address":"","comment_id":98874,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559111833","product_id":100024501,"comment_content":"åœ¨ Swift åŸç”Ÿæä¾› JSONDecoder ä¹‹åï¼Œç›¸å¯¹äºä¸€äº›å¤§åé¼é¼çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ˜¯å¦æ›´æ¨èä½¿ç”¨è¯­è¨€è‡ªå¸¦çš„ JSONDecoder å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451875,"discussion_content":"ä¸‰æ–¹ä¹Ÿæ˜¯ç”¨çš„ JSONDecoder","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561388009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":98873,"user_name":"xilie","can_delete":false,"product_type":"c1","uid":1013805,"ip_address":"","ucode":"AFCC4E157F7830","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVegfjqa0gM4hcRrBhZkIf7Uc5oeTMYsg6o5pd76IQlUoIIh2ic6P22xVEFtRnAzjyLtiaPVstkKug/132","comment_is_top":false,"comment_ctime":1559111734,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559111734","product_id":100024501,"comment_content":"ä¸ºä»€ä¹ˆ JSONDecoder åªæœ‰ 1 ä¸ª decode Data æ–¹æ³•ï¼Œæ²¡æœ‰ decode JSONObject çš„æ–¹æ³•ï¼Ÿå¾ˆå¤šæ—¶å€™æ‹¿åˆ°çš„å°±æ˜¯ JSONObjectï¼Œè¿™æ—¶ç”¨ JSONDecoder decodeï¼Œè¿˜è¦å…ˆè½¬ä¸º Dataï¼Œå¤šæ­¤ä¸€ä¸¾å•Š","like_count":1},{"had_liked":false,"id":95433,"user_name":"å¤§å¤ªé˜³","can_delete":false,"product_type":"c1","uid":1455051,"ip_address":"","ucode":"C84A55C0F0102C","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/cb/a57f65cb.jpg","comment_is_top":false,"comment_ctime":1558056028,"is_pvip":false,"replies":[{"id":"35012","content":"swiftyjson è§£ææ—¶ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿ JSONSerialization æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šå’Œç³»ç»Ÿè§£æ JSON æ•ˆç‡å¹¶æ— åŒºåˆ«","user_name":"ä½œè€…å›å¤","user_name_real":"æˆ´é“­","uid":"1140280","ctime":1558850317,"ip_address":"","comment_id":95433,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1558056028","product_id":100024501,"comment_content":"æˆ‘ç°åœ¨çš„é¡¹ç›®å°±æ˜¯çº¯swiftçš„é¡¹ç›®ï¼Œç°åœ¨ç»å¤§éƒ¨åˆ†ç”¨çš„jsonè§£æéƒ½æ˜¯swiftyjsonï¼Œä¸€å°éƒ¨åˆ†æ˜¯kvcï¼Œå‰ç€ä½¿ç”¨æ—¶ä»£ç é‡å¤šä¸€äº›ï¼Œåè€…åŸºæœ¬ä¸ç”¨æ€ä¹ˆä¿®æ”¹ï¼Œæƒ³é—®ä¸‹æˆ´è€å¸ˆï¼Œswiftyjsonçš„æ•ˆç‡æ€ä¹ˆæ ·ï¼Ÿè¿˜æœ‰å¸Œæœ›æˆ´è€å¸ˆå¯ä»¥æŒ‡å¯¼ä¸‹æˆ‘ä»¬æ€ä¹ˆæµ‹è¿™ä¸ªæ•ˆç‡å—ï¼Ÿå¸‚é¢ä¸Šçš„è¿™äº›æ¯”è¾ƒå‡ºåçš„ç¬¬ä¸‰æ–¹è§£æåº“ï¼Œçš„æ•ˆç‡æ’åæ˜¯æ€ä¹ˆæ ·çš„ï¼Œkvcæ˜¯åœ¨é‡Œé¢èƒ½æ’åˆ°ç¬¬å‡ å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"æˆ´é“­","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":450456,"discussion_content":"swiftyjson è§£ææ—¶ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿ JSONSerialization æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šå’Œç³»ç»Ÿè§£æ JSON æ•ˆç‡å¹¶æ— åŒºåˆ«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558850317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95176,"user_name":"æœ¨æœ¨å½¡","can_delete":false,"product_type":"c1","uid":1455806,"ip_address":"","ucode":"2661AC2EF856E9","user_header":"https://static001.geekbang.org/account/avatar/00/16/36/be/f68a19b1.jpg","comment_is_top":false,"comment_ctime":1557978718,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1557978718","product_id":100024501,"comment_content":"simdjson ä¸æ˜¯è¿˜ä¸æ”¯æŒç§»åŠ¨è®¾å¤‡å¸¸ç”¨çš„ARMå¤„ç†å™¨å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1453745,"avatar":"https://static001.geekbang.org/account/avatar/00/16/2e/b1/85bbfa6b.jpg","nickname":"Jeffrey","note":"","ucode":"1CA6A788EA9B74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128,"discussion_content":"simdjsonç¼–è¯‘å‡ºæ¥çš„.aæ–‡ä»¶åªæ”¯æŒx86_64æ¶æ„ ä¸æ”¯æŒarmæ¶æ„ æ²¡æ³•åœ¨çœŸæœºä¸Šç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561123048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93392,"user_name":"æŸ æª¬","can_delete":false,"product_type":"c1","uid":1523856,"ip_address":"","ucode":"3BF641A6360F4D","user_header":"https://static001.geekbang.org/account/avatar/00/17/40/90/b88d1c20.jpg","comment_is_top":false,"comment_ctime":1557462796,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557462796","product_id":100024501,"comment_content":"simdjson ä¼šæ¯”  NSJSONSerializationæ›´å¿«ï¼Ÿæˆ‘ä»¬é¡¹ç›®ä¸­éƒ½ä½¿ç”¨ç³»ç»Ÿçš„è§£æjson ç„¶åä½¿ç”¨yymodelæ¥å°†å®ƒå†è½¬æ¢ä¸€æ¬¡","like_count":0},{"had_liked":false,"id":93283,"user_name":"è°­é¹","can_delete":false,"product_type":"c1","uid":1142009,"ip_address":"","ucode":"4A8120C4AA6F2F","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/f9/af80b4da.jpg","comment_is_top":false,"comment_ctime":1557450064,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557450064","product_id":100024501,"comment_content":"JSONKit æ•ˆç‡å¾ˆå¥½","like_count":0}]}