{"id":184018,"title":"16 | å‡½æ•°å¯¹è±¡å’Œlambdaï¼šè¿›å…¥å‡½æ•°å¼ç¼–ç¨‹","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>æœ¬è®²æˆ‘ä»¬å°†ä»‹ç»å‡½æ•°å¯¹è±¡ï¼Œå°¤å…¶æ˜¯åŒ¿åå‡½æ•°å¯¹è±¡â€”â€”lambda è¡¨è¾¾å¼ã€‚ä»Šå¤©çš„å†…å®¹è¯´éš¾ä¸éš¾ï¼Œä½†å¯èƒ½è·Ÿä½ çš„æ—¥å¸¸æ€ç»´æ–¹å¼æœ‰è¾ƒå¤§çš„åŒºåˆ«ï¼Œå»ºè®®ä½ ä¸€å®šè¦è¯•éªŒä¸€ä¸‹æ–‡ä¸­çš„ä»£ç ï¼ˆä½¿ç”¨ xeus-cling çš„åŒå­¦è¦æ³¨æ„ï¼šxeus-cling ä¼¼ä¹ä¸å¤ªå–œæ¬¢æœ‰ lambda çš„ä»£ç ğŸ˜“ï¼›é‡åˆ°æœ‰é—®é¢˜æ—¶ï¼Œè¿˜æ˜¯åªèƒ½å›åˆ°æ™®é€šçš„ç¼–è¯‘æ‰§è¡Œæ–¹å¼äº†ï¼‰ã€‚</p><h2>C++98 çš„å‡½æ•°å¯¹è±¡</h2><p>å‡½æ•°å¯¹è±¡ï¼ˆfunction objectï¼‰<span class=\"orange\">[1]</span> è‡ª C++98 å¼€å§‹å°±å·²ç»è¢«æ ‡å‡†åŒ–äº†ã€‚ä»æ¦‚å¿µä¸Šæ¥è¯´ï¼Œå‡½æ•°å¯¹è±¡æ˜¯ä¸€ä¸ªå¯ä»¥è¢«å½“ä½œå‡½æ•°æ¥ç”¨çš„å¯¹è±¡ã€‚å®ƒæœ‰æ—¶ä¹Ÿä¼šè¢«å«åš functorï¼Œä½†è¿™ä¸ªæœ¯è¯­åœ¨èŒƒç•´è®ºé‡Œæœ‰ç€å®Œå…¨ä¸åŒçš„å«ä¹‰ï¼Œè¿˜æ˜¯ä¸ç”¨ä¸ºå¦™â€”â€”å¦åˆ™ç©å‡½æ•°å¼ç¼–ç¨‹çš„äººå¯èƒ½ä¼šæœç€ä½ å¤§çš±çœ‰å¤´çš„ã€‚</p><p>ä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„åŠ  <em>n</em> çš„å‡½æ•°å¯¹è±¡ç±»ï¼ˆæ ¹æ®ä¸€èˆ¬çš„æƒ¯ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>struct</code> å…³é”®å­—è€Œä¸æ˜¯ <code>class</code> å…³é”®å­—ï¼‰ï¼š</p><pre><code class=\"language-c++\">struct adder {\n  adder(int n) : n_(n) {}\n  int operator()(int x) const\n  {\n    return x + n_;\n  }\nprivate:\n  int n_;\n};\n</code></pre><p>å®ƒçœ‹èµ·æ¥ç›¸å½“æ™®é€šï¼Œå”¯ä¸€æœ‰ç‚¹ç‰¹åˆ«çš„åœ°æ–¹å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ª <code>operator()</code>ï¼Œè¿™ä¸ªè¿ç®—ç¬¦å…è®¸æˆ‘ä»¬åƒè°ƒç”¨å‡½æ•°ä¸€æ ·ä½¿ç”¨å°æ‹¬å·çš„è¯­æ³•ã€‚éšåï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå®é™…çš„å‡½æ•°å¯¹è±¡ï¼Œå¦‚ C++11 å½¢å¼çš„ï¼š</p><!-- [[[read_end]]] --><pre><code class=\"language-c++\">auto add_2 = adder(2);\n</code></pre><p>æˆ– C++98 å½¢å¼çš„ï¼š</p><pre><code class=\"language-c++\">adder add_2(2);\n</code></pre><p>å¾—åˆ°çš„ç»“æœ <code>add_2</code> å°±å¯ä»¥å½“ä½œä¸€ä¸ªå‡½æ•°æ¥ç”¨äº†ã€‚ä½ å¦‚æœå†™ä¸‹ <code>add_2(5)</code> çš„è¯ï¼Œå°±ä¼šå¾—åˆ°ç»“æœ 7ã€‚</p><p>C++98 é‡Œä¹Ÿå®šä¹‰äº†å°‘æ•°é«˜é˜¶å‡½æ•°ï¼šä½ å¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°å¯¹è±¡è¿‡å»ï¼Œç»“æœå¾—åˆ°ä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡ã€‚æœ€å…¸å‹çš„ä¹Ÿè®¸æ˜¯ç›®å‰å·²ç»ä» C++17 æ ‡å‡†é‡Œç§»é™¤çš„ <code>bind1st</code> å’Œ <code>bind2nd</code> äº†ï¼ˆåœ¨ &lt;functional&gt; å¤´æ–‡ä»¶ä¸­æä¾›ï¼‰ï¼š</p><pre><code class=\"language-c++\">auto add_2 = bind2nd(plus&lt;int&gt;(), 2);\n</code></pre><p>è¿™æ ·äº§ç”Ÿçš„ <code>add_2</code> åŠŸèƒ½å’Œå‰é¢ç›¸åŒï¼Œæ˜¯æŠŠå‚æ•° <code>2</code> å½“ä½œç¬¬äºŒä¸ªå‚æ•°ç»‘å®šåˆ°å‡½æ•°å¯¹è±¡ <code>plus&lt;int&gt;</code>ï¼ˆå®ƒçš„ <code>operator()</code> éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼‰ä¸Šçš„ç»“æœã€‚å½“ç„¶ï¼Œ<code>auto</code> åœ¨ C++98 é‡Œæ˜¯æ²¡æœ‰çš„ï¼Œç»“æœè¦èµ‹ç»™ä¸€ä¸ªå˜é‡å°±æœ‰ç‚¹åˆ«æ‰­äº†ï¼Œå¾—å†™æˆï¼š</p><pre><code class=\"language-c++\">binder2nd&lt;plus&lt;int&gt; &gt; add_2(\n  plus&lt;int&gt;(), 2);\n</code></pre><p>å› æ­¤ï¼Œåœ¨ C++98 é‡Œæˆ‘ä»¬é€šå¸¸ä¼šç›´æ¥ä½¿ç”¨ç»‘å®šçš„ç»“æœï¼š</p><pre><code class=\"language-c++\">#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nvector v{1, 2, 3, 4, 5};\ntransform(v.begin(), v.end(),\n          v.begin(),\n          bind2nd(plus&lt;int&gt;(), 2));\n</code></pre><p>ä¸Šé¢çš„ä»£ç ä¼šå°†å®¹å™¨é‡Œçš„æ¯ä¸€é¡¹æ•°å€¼éƒ½åŠ ä¸Š 2ï¼ˆ<code>transform</code> å‡½æ•°æ¨¡æ¿åœ¨ &lt;algorithm&gt; å¤´æ–‡ä»¶ä¸­æä¾›ï¼‰ã€‚å¯ä»¥éªŒè¯ç»“æœï¼š</p><pre><code class=\"language-c++\">v\n</code></pre><blockquote>\n<p><code>{ 3, 4, 5, 6, 7 }</code></p>\n</blockquote><h3>å‡½æ•°çš„æŒ‡é’ˆå’Œå¼•ç”¨</h3><p>é™¤éä½ ç”¨ä¸€ä¸ªå¼•ç”¨æ¨¡æ¿å‚æ•°æ¥æ•æ‰å‡½æ•°ç±»å‹ï¼Œä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°å®å‚ä¼šé€€åŒ–æˆä¸ºä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚ä¸ç®¡æ˜¯å‡½æ•°æŒ‡é’ˆè¿˜æ˜¯å‡½æ•°å¼•ç”¨ï¼Œä½ ä¹Ÿéƒ½å¯ä»¥å½“æˆå‡½æ•°å¯¹è±¡æ¥ç”¨ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸‹é¢çš„å‡½æ•°å®šä¹‰ï¼š</p><pre><code class=\"language-c++\">int add_2(int x)\n{\n  return x + 2;\n};\n</code></pre><p>å¦‚æœæˆ‘ä»¬æœ‰ä¸‹é¢çš„æ¨¡æ¿å£°æ˜ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nauto test1(T fn)\n{\n  return fn(2);\n}\n\ntemplate &lt;typename T&gt;\nauto test2(T&amp; fn)\n{\n  return fn(2);\n}\n\ntemplate &lt;typename T&gt;\nauto test3(T* fn)\n{\n  return (*fn)(2);\n}\n</code></pre><p>å½“æˆ‘ä»¬æ‹¿ <code>add_2</code> å»è°ƒç”¨è¿™ä¸‰ä¸ªå‡½æ•°æ¨¡æ¿æ—¶ï¼Œ<code>fn</code> çš„ç±»å‹å°†åˆ†åˆ«è¢«æ¨å¯¼ä¸º <code>int (*)(int)</code>ã€<code>int (&amp;)(int)</code> å’Œ <code>int (*)(int)</code>ã€‚ä¸ç®¡æˆ‘ä»¬å¾—åˆ°çš„æ˜¯æŒ‡é’ˆè¿˜æ˜¯å¼•ç”¨ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç›´æ¥æ‹¿å®ƒå½“æ™®é€šçš„å‡½æ•°ç”¨ã€‚å½“ç„¶ï¼Œåœ¨å‡½æ•°æŒ‡é’ˆçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥å†™ <code>*value</code> ä¹Ÿå¯ä»¥ã€‚å› è€Œä¸Šé¢ä¸‰ä¸ªå‡½æ•°æ‹¿ <code>add_2</code> ä½œä¸ºå®å‚è°ƒç”¨çš„ç»“æœéƒ½æ˜¯ <code>4</code>ã€‚</p><p>å¾ˆå¤šæ¥æ”¶å‡½æ•°å¯¹è±¡çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶å‡½æ•°çš„æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚ä½†åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼Œéœ€è¦é€šè¿‡å‡½æ•°å¯¹è±¡çš„ç±»å‹æ¥åŒºåˆ†å‡½æ•°å¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¸èƒ½ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæˆ–å¼•ç”¨äº†â€”â€”åŸå‹ç›¸åŒçš„å‡½æ•°ï¼Œå®ƒä»¬çš„ç±»å‹ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚</p><h2>Lambda è¡¨è¾¾å¼</h2><p>Lambda è¡¨è¾¾å¼ <span class=\"orange\">[2]</span> æ˜¯ä¸€ä¸ªæºè‡ªé˜¿éš†ä½Â·é‚±å¥‡ï¼ˆAlonzo Churchï¼‰â€”â€”è‰¾ä¼¦Â·å›¾çµï¼ˆAlan Turingï¼‰çš„è€å¸ˆâ€”â€”çš„æœ¯è¯­ã€‚é‚±å¥‡åˆ›ç«‹äº† Î» æ¼”ç®— <span class=\"orange\">[3]</span>ï¼Œåæ¥è¢«è¯æ˜å’Œå›¾çµæœºæ˜¯ç­‰ä»·çš„ã€‚</p><p>æˆ‘ä»¬å…ˆä¸çœ‹æ•°å­¦ä¸Šçš„ Î» è¡¨è¾¾å¼ï¼Œçœ‹ä¸€ä¸‹ä¸Šä¸€èŠ‚ç»™å‡ºçš„ä»£ç åœ¨ä½¿ç”¨ lambda è¡¨è¾¾å¼æ—¶å¯ä»¥å¦‚ä½•ç®€åŒ–ã€‚</p><pre><code class=\"language-c++\">auto add_2 = [](int x) {\n  return x + 2;\n};\n</code></pre><p>æ˜¾ç„¶ï¼Œå®šä¹‰ <code>add_2</code> ä¸å†éœ€è¦å®šä¹‰ä¸€ä¸ªé¢å¤–çš„ç±»å‹äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†™å‡ºå®ƒçš„å®šä¹‰ã€‚ç†è§£å®ƒåªéœ€è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š</p><ul>\n<li>Lambda è¡¨è¾¾å¼ä»¥ä¸€å¯¹ä¸­æ‹¬å·å¼€å§‹ï¼ˆä¸­æ‹¬å·ä¸­æ˜¯å¯ä»¥æœ‰å†…å®¹çš„ï¼›ç¨åæˆ‘ä»¬å†è¯´ï¼‰</li>\n<li>è·Ÿå‡½æ•°å®šä¹‰ä¸€æ ·ï¼Œæˆ‘ä»¬æœ‰å‚æ•°åˆ—è¡¨</li>\n<li>è·Ÿæ­£å¸¸çš„å‡½æ•°å®šä¹‰ä¸€æ ·ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªå‡½æ•°ä½“ï¼Œé‡Œé¢ä¼šæœ‰ <code>return</code> è¯­å¥</li>\n<li>Lambda è¡¨è¾¾å¼ä¸€èˆ¬ä¸éœ€è¦è¯´æ˜è¿”å›å€¼ï¼ˆç›¸å½“äº <code>auto</code>ï¼‰ï¼›æœ‰ç‰¹æ®Šæƒ…å†µéœ€è¦è¯´æ˜æ—¶ï¼Œåˆ™åº”ä½¿ç”¨ç®­å¤´è¯­æ³•çš„æ–¹å¼ï¼ˆå‚è§<a href=\"https://time.geekbang.org/column/article/176850\">[ç¬¬ 8 è®²]</a>ï¼‰ï¼š<code>[]â€‹(int x) -&gt; int { â€¦ }</code></li>\n<li>æ¯ä¸ª lambda è¡¨è¾¾å¼éƒ½æœ‰ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ç±»å‹ï¼Œè¦ç²¾ç¡®æ•æ‰ lambda è¡¨è¾¾å¼åˆ°ä¸€ä¸ªå˜é‡ä¸­ï¼Œåªèƒ½é€šè¿‡ <code>auto</code> å£°æ˜çš„æ–¹å¼</li>\n</ul><p>å½“ç„¶ï¼Œæˆ‘ä»¬æƒ³è¦å®šä¹‰ä¸€ä¸ªé€šç”¨çš„ <code>adder</code> ä¹Ÿä¸éš¾ï¼š</p><pre><code class=\"language-c++\">auto adder = [](int n) {\n  return [n](int x) {\n    return x + n;\n  };\n};\n</code></pre><p>è¿™æ¬¡æˆ‘ä»¬ç›´æ¥è¿”å›äº†ä¸€ä¸ª lambda è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸­æ‹¬å·ä¸­å†™äº† <code>n</code> æ¥æ•è·å˜é‡ <code>n</code> çš„æ•°å€¼ã€‚è¿™ä¸ªå‡½æ•°çš„å®é™…æ•ˆæœå’Œå‰é¢çš„ <code>adder</code> å‡½æ•°å¯¹è±¡å®Œå…¨ä¸€è‡´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•è· <code>n</code> çš„æ•ˆæœç›¸å½“äºåœ¨ä¸€ä¸ªå‡½æ•°å¯¹è±¡ä¸­ç”¨æˆå‘˜å˜é‡å­˜å‚¨å…¶æ•°å€¼ã€‚</p><p>çº¯ç²¹ä¸ºäº†æ»¡è¶³ä½ å¯èƒ½æœ‰çš„å¥½å¥‡å¿ƒï¼Œä¸Šé¢çš„ <code>adder</code> ç›¸å½“äºè¿™æ ·ä¸€ä¸ª Î» è¡¨è¾¾å¼ï¼š</p><p>$$<br>\n\\mathrm{adder} = \\lambda n.(\\lambda x.(+ \\ x \\ n))<br>\n$$</p><p>å¦‚æœä½ å»å­¦ Lisp æˆ– Scheme çš„è¯ï¼Œä½ å°±ä¼šå‘ç°è¿™äº›è¯­è¨€å’Œ Î» è¡¨è¾¾å¼å‡ ä¹æ˜¯ä¸€ä¸€æ˜ å°„äº†ã€‚åœ¨ C++ é‡Œï¼Œè¡¨è¾¾è™½ç„¶ç¨å¾®å•°å—¦ä¸€ç‚¹ï¼Œä½†ä¹Ÿæ¯”è¾ƒæ¥è¿‘äº†ã€‚ç”¨æˆ‘ä¸Šé¢çš„ <code>adder</code> ï¼Œå°±å¯ä»¥å¾—åˆ°ç±»ä¼¼äºå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€é‡Œçš„ currying <span class=\"orange\">[4]</span> çš„æ•ˆæœâ€”â€”æŠŠä¸€ä¸ªæ“ä½œï¼ˆæ­¤å¤„æ˜¯åŠ æ³•ï¼‰åˆ†æˆå‡ æ­¥æ¥å®Œæˆã€‚æ²¡è§è¿‡å‡½æ•°å¼ç¼–ç¨‹çš„ï¼Œå¯èƒ½å¯¹ä¸‹é¢çš„è¡¨è¾¾å¼æ„Ÿåˆ°å¥‡æ€ªå§ï¼š</p><pre><code class=\"language-c++\">auto seven = adder(2)(5);\n</code></pre><p>ä¸è¿‡ï¼Œæœ€å¸¸è§çš„æƒ…å†µæ˜¯ï¼Œå†™åŒ¿åå‡½æ•°å°±æ˜¯å¸Œæœ›ä¸éœ€è¦èµ·åå­—ã€‚ä»¥å‰é¢çš„æŠŠæ‰€æœ‰å®¹å™¨å…ƒç´ å€¼åŠ  2 çš„æ“ä½œä¸ºä¾‹ï¼Œä½¿ç”¨åŒ¿åå‡½æ•°å¯ä»¥å¾—åˆ°æ›´ç®€æ´å¯è¯»çš„ä»£ç ï¼š</p><pre><code class=\"language-c++\">transform(v.begin(), v.end(),\n          v.begin(),\n          [](int x) {\n            return x + 2;\n          });\n</code></pre><p>åˆ°äº†å¯ä»¥ä½¿ç”¨ rangesï¼ˆå·²åœ¨ C++20 æ ‡å‡†åŒ–ï¼‰çš„æ—¶å€™ï¼Œä»£ç å¯ä»¥æ›´çŸ­ã€æ›´çµæ´»ã€‚è¿™ä¸ªæˆ‘ä»¬å°±ç•™åˆ°åé¢å†è¯´äº†ã€‚</p><p>ä¸€ä¸ª lambda è¡¨è¾¾å¼é™¤äº†æ²¡æœ‰åå­—ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹æ˜¯ä½ å¯ä»¥ç«‹å³è¿›è¡Œæ±‚å€¼ã€‚è¿™å°±ä½¿å¾—æˆ‘ä»¬å¯ä»¥æŠŠä¸€æ®µç‹¬ç«‹çš„ä»£ç å°è£…èµ·æ¥ï¼Œè¾¾åˆ°æ›´å¹²å‡€ã€è¡¨æ„çš„æ•ˆæœã€‚</p><p>å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><pre><code class=\"language-c++\">[](int x) { return x * x; }(3)\n</code></pre><p>è¿™ä¸ªè¡¨è¾¾å¼çš„ç»“æœæ˜¯ 3 çš„å¹³æ–¹ 9ã€‚å³ä½¿è¿™ä¸ªçœ‹ä¼¼æ— èŠçš„ä¾‹å­ï¼Œéƒ½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºå®ƒå…å»äº†æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª constexpr å‡½æ•°çš„å¿…è¦ã€‚åªè¦èƒ½æ»¡è¶³ constexpr å‡½æ•°çš„æ¡ä»¶ï¼Œä¸€ä¸ª lambda è¡¨è¾¾å¼é»˜è®¤å°±æ˜¯ constexpr å‡½æ•°ã€‚</p><p>å¦å¤–ä¸€ç§ç”¨é€”æ˜¯è§£å†³å¤šé‡åˆå§‹åŒ–è·¯å¾„çš„é—®é¢˜ã€‚å‡è®¾ä½ æœ‰è¿™æ ·çš„ä»£ç ï¼š</p><pre><code class=\"language-c++\">Obj obj;\nswitch (init_mode) {\ncase init_mode1:\n  obj = Obj(â€¦);\n  break;\ncase init_mode2;\n  obj = Obj(â€¦);\n  break;\nâ€¦\n}\n</code></pre><p>è¿™æ ·çš„ä»£ç ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨äº†é»˜è®¤æ„é€ å‡½æ•°ã€å¸¦å‚æ•°çš„æ„é€ å‡½æ•°å’Œï¼ˆç§»åŠ¨ï¼‰èµ‹å€¼å‡½æ•°ï¼šæ—¢å¯èƒ½æœ‰æ€§èƒ½æŸå¤±ï¼Œä¹Ÿå¯¹ <code>Obj</code> æå‡ºäº†æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„é¢å¤–è¦æ±‚ã€‚å¯¹äºè¿™æ ·çš„ä»£ç ï¼Œæœ‰ä¸€ç§é‡æ„æ„è§æ˜¯æŠŠè¿™æ ·çš„ä»£ç åˆ†ç¦»æˆç‹¬ç«‹çš„å‡½æ•°ã€‚ä¸è¿‡ï¼Œæœ‰æ—¶å€™æ›´ç›´æˆªäº†å½“çš„åšæ³•æ˜¯ç”¨ä¸€ä¸ª lambda è¡¨è¾¾å¼æ¥è¿›è¡Œæ”¹é€ ï¼Œæ—¢å¯ä»¥æå‡æ€§èƒ½ï¼ˆä¸éœ€è¦é»˜è®¤å‡½æ•°æˆ–æ‹·è´/ç§»åŠ¨ï¼‰ï¼Œåˆè®©åˆå§‹åŒ–éƒ¨åˆ†æ˜¾å¾—æ›´æ¸…æ™°ï¼š</p><pre><code class=\"language-c++\">auto obj = [init_mode]() {\n  switch (init_mode) {\n  case init_mode1:\n    return Obj(â€¦);\n    break;\n  case init_mode2:\n    return Obj(â€¦);\n    break;\n  â€¦\n  }\n}();\n</code></pre><h3>å˜é‡æ•è·</h3><p>ç°åœ¨æˆ‘ä»¬æ¥ç»†çœ‹ä¸€ä¸‹ lambda è¡¨è¾¾å¼ä¸­å˜é‡æ•è·çš„ç»†èŠ‚ã€‚</p><p>å˜é‡æ•è·çš„å¼€å¤´æ˜¯å¯é€‰çš„é»˜è®¤æ•è·ç¬¦ <code>=</code> æˆ– <code>&amp;</code>ï¼Œè¡¨ç¤ºä¼šè‡ªåŠ¨æŒ‰å€¼æˆ–æŒ‰å¼•ç”¨æ•è·ç”¨åˆ°çš„æœ¬åœ°å˜é‡ï¼Œç„¶ååé¢å¯ä»¥è·Ÿï¼ˆé€—å·åˆ†éš”ï¼‰ï¼š</p><ul>\n<li>æœ¬åœ°å˜é‡åæ ‡æ˜å¯¹å…¶æŒ‰å€¼æ•è·ï¼ˆä¸èƒ½åœ¨é»˜è®¤æ•è·ç¬¦ <code>=</code> åå‡ºç°ï¼›å› å…¶å·²è‡ªåŠ¨æŒ‰å€¼æ•è·æ‰€æœ‰æœ¬åœ°å˜é‡ï¼‰</li>\n<li><code>&amp;</code> åŠ æœ¬åœ°å˜é‡åæ ‡æ˜å¯¹å…¶æŒ‰å¼•ç”¨æ•è·ï¼ˆä¸èƒ½åœ¨é»˜è®¤æ•è·ç¬¦ <code>&amp;</code> åå‡ºç°ï¼›å› å…¶å·²è‡ªåŠ¨æŒ‰å¼•ç”¨æ•è·æ‰€æœ‰æœ¬åœ°å˜é‡ï¼‰</li>\n<li><code>this</code> æ ‡æ˜æŒ‰å¼•ç”¨æ•è·å¤–å›´å¯¹è±¡ï¼ˆé’ˆå¯¹ lambda è¡¨è¾¾å¼å®šä¹‰å‡ºç°åœ¨ä¸€ä¸ªéé™æ€ç±»æˆå‘˜å†…çš„æƒ…å†µï¼‰ï¼›æ³¨æ„é»˜è®¤æ•è·ç¬¦ <code>=</code> å’Œ <code>&amp;</code> å·å¯ä»¥è‡ªåŠ¨æ•è· <code>this</code>ï¼ˆå¹¶ä¸”åœ¨ C++20 ä¹‹å‰ï¼Œåœ¨ <code>=</code> åå†™ <code>this</code> ä¼šå¯¼è‡´å‡ºé”™ï¼‰</li>\n<li><code>*this</code> æ ‡æ˜æŒ‰å€¼æ•è·å¤–å›´å¯¹è±¡ï¼ˆé’ˆå¯¹ lambda è¡¨è¾¾å¼å®šä¹‰å‡ºç°åœ¨ä¸€ä¸ªéé™æ€ç±»æˆå‘˜å†…çš„æƒ…å†µï¼›C++17 æ–°å¢è¯­æ³•ï¼‰</li>\n<li><code>å˜é‡å = è¡¨è¾¾å¼</code> æ ‡æ˜æŒ‰å€¼æ•è·è¡¨è¾¾å¼çš„ç»“æœï¼ˆå¯ç†è§£ä¸º <code>auto å˜é‡å = è¡¨è¾¾å¼</code>ï¼‰</li>\n<li><code>&amp;å˜é‡å = è¡¨è¾¾å¼</code> æ ‡æ˜æŒ‰å¼•ç”¨æ•è·è¡¨è¾¾å¼çš„ç»“æœï¼ˆå¯ç†è§£ä¸º <code>auto&amp; å˜é‡å = è¡¨è¾¾å¼</code>ï¼‰</li>\n</ul><p>ä»å·¥ç¨‹çš„è§’åº¦ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸æ¨èä½¿ç”¨é»˜è®¤æ•è·ç¬¦ã€‚æ›´ä¸€èˆ¬åŒ–çš„ä¸€æ¡å·¥ç¨‹åŸåˆ™æ˜¯ï¼š<strong>æ˜¾å¼çš„ä»£ç æ¯”éšå¼çš„ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚</strong>å½“ç„¶ï¼Œåœ¨è¿™æ¡åŸåˆ™ä¸Šèµ°å¤šè¿œæ˜¯éœ€è¦æƒè¡¡çš„ï¼Œä½ ä¹Ÿä¸æ„¿æ„å†™å‡ºéå¸¸å•°å—¦çš„ä»£ç å§ï¼Ÿå¦åˆ™çš„è¯ï¼Œå¤§å®¶å°±å…¨éƒ¨å»å†™ C äº†ã€‚</p><p>ä¸€èˆ¬è€Œè¨€ï¼ŒæŒ‰å€¼æ•è·æ˜¯æ¯”è¾ƒå®‰å…¨çš„åšæ³•ã€‚æŒ‰å¼•ç”¨æ•è·æ—¶åˆ™éœ€è¦æ›´å°å¿ƒäº›ï¼Œå¿…é¡»èƒ½å¤Ÿç¡®ä¿è¢«æ•è·çš„å˜é‡å’Œ lambda è¡¨è¾¾å¼çš„ç”Ÿå‘½æœŸè‡³å°‘ä¸€æ ·é•¿ï¼Œå¹¶åœ¨æœ‰ä¸‹é¢éœ€æ±‚ä¹‹ä¸€æ—¶æ‰ä½¿ç”¨ï¼š</p><ul>\n<li>éœ€è¦åœ¨ lambda è¡¨è¾¾å¼ä¸­ä¿®æ”¹è¿™ä¸ªå˜é‡å¹¶è®©å¤–éƒ¨è§‚å¯Ÿåˆ°</li>\n<li>éœ€è¦çœ‹åˆ°è¿™ä¸ªå˜é‡åœ¨å¤–éƒ¨è¢«ä¿®æ”¹çš„ç»“æœ</li>\n<li>è¿™ä¸ªå˜é‡çš„å¤åˆ¶ä»£ä»·æ¯”è¾ƒé«˜</li>\n</ul><p>å¦‚æœå¸Œæœ›ä»¥ç§»åŠ¨çš„æ–¹å¼æ¥æ•è·æŸä¸ªå˜é‡çš„è¯ï¼Œåˆ™åº”è€ƒè™‘ <code>å˜é‡å = è¡¨è¾¾å¼</code> çš„å½¢å¼ã€‚è¡¨è¾¾å¼å¯ä»¥è¿”å›ä¸€ä¸ª prvalue æˆ– xvalueï¼Œæ¯”å¦‚å¯ä»¥æ˜¯ <code>std::move(éœ€ç§»åŠ¨æ•è·çš„å˜é‡)</code>ã€‚</p><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬å·²ç»è§è¿‡ç®€å•çš„æŒ‰å€¼æ•è·ã€‚ä¸‹é¢æ˜¯ä¸€äº›æ›´å¤šçš„æ¼”ç¤ºå˜é‡æ•è·çš„ä¾‹å­ã€‚</p><p>æŒ‰å¼•ç”¨æ•è·ï¼š</p><pre><code class=\"language-c++\">vector&lt;int&gt; v1;\nvector&lt;int&gt; v2;\nâ€¦\nauto push_data = [&amp;](int n) {\n  // æˆ–ä½¿ç”¨ [&amp;v1, &amp;v2] æ•æ‰\n  v1.push_back(n);\n  v2.push_back(n)\n};\n\npush_data(2);\npush_data(3);\n</code></pre><p>è¿™ä¸ªä¾‹å­å¾ˆç®€å•ã€‚æˆ‘ä»¬æŒ‰å¼•ç”¨æ•è· <code>v1</code> å’Œ <code>v2</code>ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¿®æ”¹å®ƒä»¬çš„å†…å®¹ã€‚</p><p>æŒ‰å€¼æ•è·å¤–å›´å¯¹è±¡ï¼š</p><pre><code class=\"language-c++\">#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\nint get_count()\n{\n  static int count = 0;\n  return ++count;\n}\n\nclass task {\npublic:\n  task(int data) : data_(data) {}\n  auto lazy_launch()\n  {\n    return\n      [*this, count = get_count()]()\n      mutable {\n        ostringstream oss;\n        oss &lt;&lt; \"Done work \" &lt;&lt; data_\n            &lt;&lt; \" (No. \" &lt;&lt; count\n            &lt;&lt; \") in thread \"\n            &lt;&lt; this_thread::get_id()\n            &lt;&lt; '\\n';\n        msg_ = oss.str();\n        calculate();\n      };\n  }\n  void calculate()\n  {\n    this_thread::sleep_for(100ms);\n    cout &lt;&lt; msg_;\n  }\n\nprivate:\n  int data_;\n  string msg_;\n};\n\nint main()\n{\n  auto t = task{37};\n  thread t1{t.lazy_launch()};\n  thread t2{t.lazy_launch()};\n  t1.join();\n  t2.join();\n}\n</code></pre><p>è¿™ä¸ªä¾‹å­ç¨å¤æ‚ï¼Œæ¼”ç¤ºäº†å¥½å‡ ä¸ª lambda è¡¨è¾¾å¼çš„ç‰¹æ€§ï¼š</p><ul>\n<li><code>mutable</code> æ ‡è®°ä½¿æ•è·çš„å†…å®¹å¯æ›´æ”¹ï¼ˆç¼ºçœä¸å¯æ›´æ”¹æ•è·çš„å€¼ï¼Œç›¸å½“äºå®šä¹‰äº† <code>operator()(â€¦) const</code>ï¼‰ï¼›</li>\n<li><code>[*this]</code> æŒ‰å€¼æ•è·å¤–å›´å¯¹è±¡ï¼ˆ<code>task</code>ï¼‰ï¼›</li>\n<li><code>[count = get_count()]</code> æ•è·è¡¨è¾¾å¼å¯ä»¥åœ¨ç”Ÿæˆ lambda è¡¨è¾¾å¼æ—¶è®¡ç®—å¹¶å­˜å‚¨ç­‰å·åè¡¨è¾¾å¼çš„ç»“æœã€‚</li>\n</ul><p>è¿™æ ·ï¼Œå¤šä¸ªçº¿ç¨‹å¤åˆ¶äº†ä»»åŠ¡å¯¹è±¡ï¼Œå¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œè®¡ç®—ã€‚è¯·è‡ªè¡Œè¿è¡Œä¸€ä¸‹ä»£ç ï¼Œå¹¶æŠŠ <code>*this</code> æ”¹æˆ <code>this</code>ï¼Œçœ‹çœ‹è¾“å‡ºä¼šæœ‰ä»€ä¹ˆä¸åŒã€‚</p><h2>æ³›å‹ lambda è¡¨è¾¾å¼</h2><p>å‡½æ•°çš„è¿”å›å€¼å¯ä»¥ autoï¼Œä½†å‚æ•°è¿˜æ˜¯è¦ä¸€ä¸€å£°æ˜çš„ã€‚åœ¨ lambda è¡¨è¾¾å¼é‡Œåˆ™æ›´è¿›ä¸€æ­¥ï¼Œåœ¨å‚æ•°å£°æ˜æ—¶å°±å¯ä»¥ä½¿ç”¨ <code>auto</code>ï¼ˆåŒ…æ‹¬ <code>auto&amp;&amp;</code> ç­‰å½¢å¼ï¼‰ã€‚ä¸è¿‡ï¼Œå®ƒçš„åŠŸèƒ½ä¹Ÿä¸é‚£ä¹ˆç¥ç§˜ï¼Œå°±æ˜¯ç»™ä½ è‡ªåŠ¨å£°æ˜äº†æ¨¡æ¿è€Œå·²ã€‚æ¯•ç«Ÿï¼Œåœ¨ lambda è¡¨è¾¾å¼çš„å®šä¹‰è¿‡ç¨‹ä¸­æ˜¯æ²¡æ³•å†™ <code>template</code> å…³é”®å­—çš„ã€‚</p><p>è¿˜æ˜¯æ‹¿ä¾‹å­è¯´è¯ï¼š</p><pre><code class=\"language-c++\">template &lt;typename T1,\n          typename T2&gt;\nauto sum(T1 x, T2 y)\n{\n  return x + y;\n}\n</code></pre><p>è·Ÿä¸Šé¢çš„å‡½æ•°ç­‰ä»·çš„ lambda è¡¨è¾¾å¼æ˜¯ï¼š</p><pre><code class=\"language-c++\">auto sum = [](auto x, auto y)\n{\n  return x + y;\n}\n</code></pre><p>æ˜¯ä¸æ˜¯åè€Œæ›´ç®€å•äº†ï¼ŸğŸ˜‚</p><p>ä½ å¯èƒ½è¦é—®ï¼Œè¿™ä¹ˆå†™æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿé—®å¾—å¥½ã€‚ç®€å•æ¥è¯´ï¼Œç­”æ¡ˆæ˜¯å¯ç»„åˆæ€§ã€‚ä¸Šé¢è¿™ä¸ª <code>sum</code>ï¼Œå°±è·Ÿæ ‡å‡†åº“é‡Œçš„ <code>plus</code> æ¨¡æ¿ä¸€æ ·ï¼Œæ˜¯å¯ä»¥ä¼ é€’ç»™å…¶ä»–æ¥å—å‡½æ•°å¯¹è±¡çš„å‡½æ•°çš„ï¼Œè€Œ <code>+</code> æœ¬èº«åˆ™ä¸è¡Œã€‚ä¸‹é¢çš„ä¾‹å­è™½ç„¶ç•¥æœ‰ç‚¹æ— èŠï¼Œä¹Ÿå¯ä»¥æ¼”ç¤ºä¸€ä¸‹ï¼š</p><pre><code class=\"language-c++\">#include &lt;array&gt;    // std::array\n#include &lt;iostream&gt; // std::cout/endl\n#include &lt;numeric&gt;  // std::accumulate\n\nusing namespace std;\n\nint main()\n{\n  array a{1, 2, 3, 4, 5};\n  auto s = accumulate(\n    a.begin(), a.end(), 0,\n    [](auto x, auto y) {\n      return x + y;\n    });\n  cout &lt;&lt; s &lt;&lt; endl;\n}\n</code></pre><p>è™½ç„¶å‡½æ•°åå­—å« <code>accumulate</code>â€”â€”ç´¯åŠ â€”â€”ä½†å®ƒçš„è¡Œä¸ºæ˜¯é€šè¿‡ç¬¬å››ä¸ªå‚æ•°å¯ä¿®æ”¹çš„ã€‚æˆ‘ä»¬æŠŠä¸Šé¢çš„åŠ å· <code>+</code> æ”¹æˆæ˜Ÿå· <code>*</code>ï¼Œä¸Šé¢çš„è®¡ç®—å°±ä»ä» 1 åŠ åˆ° 5 å˜æˆäº†ç®— 5 çš„é˜¶ä¹˜äº†ã€‚</p><h2>bind æ¨¡æ¿</h2><p>æˆ‘ä»¬ä¸Šé¢æåˆ°äº† <code>bind1st</code> å’Œ <code>bind2nd</code> ç›®å‰å·²ç»ä» C++ æ ‡å‡†é‡Œç§»é™¤ã€‚åŸå› å®é™…ä¸Šæœ‰ä¸¤ä¸ªï¼š</p><ul>\n<li>å®ƒçš„åŠŸèƒ½å¯ä»¥è¢« lambda è¡¨è¾¾å¼æ›¿ä»£</li>\n<li>æœ‰äº†ä¸€ä¸ªæ›´å¼ºå¤§çš„ <code>bind</code> æ¨¡æ¿ <span class=\"orange\">[5]</span></li>\n</ul><p>æ‹¿æˆ‘ä»¬ä¹‹å‰ç»™å‡ºçš„ä¾‹å­ï¼š</p><pre><code class=\"language-c++\">transform(v.begin(), v.end(),\n          v.begin(),\n          bind2nd(plus&lt;int&gt;(), 2));\n</code></pre><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å†™æˆï¼š</p><pre><code class=\"language-c++\">using namespace std::\n  placeholders;  // for _1, _2...\ntransform(v.begin(), v.end(),\n          v.begin(),\n          bind(plus&lt;&gt;(), _1, 2));\n</code></pre><p>åŸå…ˆæˆ‘ä»¬åªèƒ½æŠŠä¸€ä¸ªç»™å®šçš„å‚æ•°ç»‘å®šåˆ°ç¬¬ä¸€ä¸ªå‚æ•°æˆ–ç¬¬äºŒä¸ªå‚æ•°ä¸Šï¼Œç°åœ¨åˆ™å¯ä»¥éå¸¸è‡ªç”±åœ°é€‚é…å„ç§æ›´å¤æ‚çš„æƒ…å†µï¼å½“ç„¶ï¼Œ<code>bind</code> çš„å‚æ•°æ•°é‡ï¼Œå¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆå‡½æ•°å¯¹è±¡ï¼‰æ‰€éœ€çš„å‚æ•°æ•°é‡åŠ ä¸€ã€‚è€Œ <code>bind</code> çš„ç»“æœçš„å‚æ•°æ•°é‡åˆ™æ²¡æœ‰é™åˆ¶â€”â€”ä½ å¯ä»¥æ— èŠåœ°å†™å‡º <code>bind(plus&lt;&gt;(), _1, _3)(1, 2, 3)</code>ï¼Œè€Œç»“æœæ˜¯ 4ï¼ˆå®Œå…¨å¿½ç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼‰ã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ä¸æ˜¯å¯ä»¥è¢« lambda è¡¨è¾¾å¼æ›¿ä»£å‘¢ã€‚å›ç­”æ˜¯â€œæ˜¯â€ã€‚å¯¹ <code>bind</code> åªéœ€è¦ç¨å¾®äº†è§£ä¸€ä¸‹å°±å¥½â€”â€”åœ¨ C++14 ä¹‹åçš„å¹´ä»£é‡Œï¼Œå·²ç»æ²¡æœ‰ä»€ä¹ˆåœ°æ–¹å¿…é¡»è¦ä½¿ç”¨ <code>bind</code> äº†ã€‚</p><h2>function æ¨¡æ¿</h2><p>æ¯ä¸€ä¸ª lambda è¡¨è¾¾å¼éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç±»å‹ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨ <code>auto</code> æˆ–æ¨¡æ¿å‚æ•°æ¥æ¥æ”¶ç»“æœã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ›´æ–¹ä¾¿çš„é€šç”¨ç±»å‹æ¥æ¥æ”¶ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>function</code> æ¨¡æ¿ <span class=\"orange\">[6]</span>ã€‚<code>function</code> æ¨¡æ¿çš„å‚æ•°å°±æ˜¯å‡½æ•°çš„ç±»å‹ï¼Œä¸€ä¸ªå‡½æ•°å¯¹è±¡æ”¾åˆ° <code>function</code> é‡Œä¹‹åï¼Œå¤–ç•Œå¯ä»¥è§‚å¯Ÿåˆ°çš„å°±åªå‰©ä¸‹å®ƒçš„å‚æ•°ã€è¿”å›å€¼ç±»å‹å’Œæ‰§è¡Œæ•ˆæœäº†ã€‚æ³¨æ„ <code>function</code> å¯¹è±¡çš„åˆ›å»ºè¿˜æ˜¯æ¯”è¾ƒè€—èµ„æºçš„ï¼Œæ‰€ä»¥è¯·ä½ åªåœ¨ç”¨ <code>auto</code> ç­‰æ–¹æ³•è§£å†³ä¸äº†é—®é¢˜çš„æ—¶å€™ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿ã€‚</p><p>ä¸‹é¢æ˜¯ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><pre><code class=\"language-c++\">map&lt;string, function&lt;int(int, int)&gt;&gt;\n  op_dict{\n    {\"+\",\n     [](int x, int y) {\n       return x + y;\n     }},\n    {\"-\",\n     [](int x, int y) {\n       return x - y;\n     }},\n    {\"*\",\n     [](int x, int y) {\n       return x * y;\n     }},\n    {\"/\",\n     [](int x, int y) {\n       return x / y;\n     }},\n  };\n</code></pre><p>è¿™å„¿ï¼Œç”±äºè¦æŠŠå‡½æ•°å¯¹è±¡å­˜åˆ°ä¸€ä¸ª <code>map</code> é‡Œï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ <code>function</code> æ¨¡æ¿ã€‚éšåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ç±»ä¼¼äº <code>op_dict.at(\"+\")(1, 6)</code> è¿™æ ·çš„æ–¹å¼æ¥ä½¿ç”¨ <code>function</code> å¯¹è±¡ã€‚è¿™ç§æ–¹å¼å¯¹è¡¨è¾¾å¼çš„è§£æå¤„ç†å¯èƒ½ä¼šæ¯”è¾ƒæœ‰ç”¨ã€‚</p><h2>å†…å®¹å°ç»“</h2><p>åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†å‡½æ•°å¯¹è±¡å’Œ lambda è¡¨è¾¾å¼çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶ç®€å•ä»‹ç»äº† <code>bind</code> æ¨¡æ¿å’Œ <code>function</code> æ¨¡æ¿ã€‚å®ƒä»¬åœ¨æ³›å‹ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹ä¸­éƒ½æ˜¯é‡è¦çš„åŸºç¡€ç»„æˆéƒ¨åˆ†ï¼Œä½ åº”è¯¥ç†Ÿç»ƒæŒæ¡ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>è¯·ï¼š</p><ol>\n<li>å°è¯•ä¸€ä¸‹ï¼ŒæŠŠæ–‡ç« çš„ lambda è¡¨è¾¾å¼æ”¹é€ æˆå®Œå…¨ä¸ä½¿ç”¨ lambdaã€‚</li>\n<li>ä½“ä¼šä¸€ä¸‹ï¼Œlambda è¡¨è¾¾å¼å¸¦æ¥äº†å“ªäº›è¡¨è¾¾ä¸Šçš„å¥½å¤„ã€‚</li>\n</ol><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ã€‚</p><h2><span class=\"reference\">å‚è€ƒèµ„æ–™</span></h2><p><span class=\"reference\">[1] Wikipedia, â€œFunction objectâ€. <a href=\"https://en.wikipedia.org/wiki/Function_object\">https://en.wikipedia.org/wiki/Function_object</a> </span></p><p><span class=\"reference\">[1a] ç»´åŸºç™¾ç§‘, â€œå‡½æ•°å¯¹è±¡â€. <a href=\"https://zh.wikipedia.org/zh-cn/%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1\">https://zh.wikipedia.org/zh-cn/å‡½æ•°å¯¹è±¡</a> </span></p><p><span class=\"reference\">[2] Wikipedia, â€œAnonymous functionâ€.<a href=\"https://en.wikipedia.org/wiki/Anonymous_function\">https://en.wikipedia.org/wiki/Anonymous_function</a> </span></p><p><span class=\"reference\">[2a] ç»´åŸºç™¾ç§‘, â€œåŒ¿åå‡½æ•°â€. <a href=\"https://zh.wikipedia.org/zh-cn/%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0\">https://zh.wikipedia.org/zh-cn/åŒ¿åå‡½æ•°</a> </span></p><p><span class=\"reference\">[3] Wikipedia, â€œLambda calculusâ€. <a href=\"https://en.wikipedia.org/wiki/Lambda_calculus\">https://en.wikipedia.org/wiki/Lambda_calculus</a> </span></p><p><span class=\"reference\">[3a] ç»´åŸºç™¾ç§‘, â€œÎ»æ¼”ç®—â€. <a href=\"https://zh.wikipedia.org/zh-cn/%CE%9B%E6%BC%94%E7%AE%97\">https://zh.wikipedia.org/zh-cn/Î›æ¼”ç®—</a> </span></p><p><span class=\"reference\">[4] Wikipedia, â€œCurryingâ€. <a href=\"https://en.wikipedia.org/wiki/Currying\">https://en.wikipedia.org/wiki/Currying</a> </span></p><p><span class=\"reference\">[4a] ç»´åŸºç™¾ç§‘, â€œæŸ¯é‡ŒåŒ–â€. <a href=\"https://zh.wikipedia.org/zh-cn/%E6%9F%AF%E9%87%8C%E5%8C%96\">https://zh.wikipedia.org/zh-cn/æŸ¯é‡ŒåŒ–</a> </span></p><p><span class=\"reference\">[5] cppreference.com, â€œstd::bindâ€. <a href=\"https://en.cppreference.com/w/cpp/utility/functional/bind\">https://en.cppreference.com/w/cpp/utility/functional/bind</a> </span></p><p><span class=\"reference\">[5a] cppreference.com, â€œstd::bindâ€. <a href=\"https://zh.cppreference.com/w/cpp/utility/functional/bind\">https://zh.cppreference.com/w/cpp/utility/functional/bind</a> </span></p><p><span class=\"reference\">[6] cppreference.com, â€œstd::functionâ€. <a href=\"https://en.cppreference.com/w/cpp/utility/functional/function\">https://en.cppreference.com/w/cpp/utility/functional/function</a> </span></p><p><span class=\"reference\">[6a] cppreference.com, â€œstd::functionâ€. <a href=\"https://zh.cppreference.com/w/cpp/utility/functional/function\">https://zh.cppreference.com/w/cpp/utility/functional/function</a> </span></p>","neighbors":{"left":{"article_title":"15 | constexprï¼šä¸€ä¸ªå¸¸æ€çš„ä¸–ç•Œ","id":182902},"right":{"article_title":"17 | å‡½æ•°å¼ç¼–ç¨‹ï¼šä¸€ç§è¶Šæ¥è¶Šæµè¡Œçš„ç¼–ç¨‹èŒƒå¼","id":185189}},"comments":[{"had_liked":false,"id":233561,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1594354792,"is_pvip":false,"replies":[{"id":"86231","content":"è¿˜çœŸä¸æ˜¯å‡½æ•°æŒ‡é’ˆã€‚å¯ä»¥è®¤ä¸ºç¼–è¯‘å™¨å¸®ä½ ç»„åˆå‡ºäº†ä¸€ä¸ªå”¯ä¸€çš„ç±»å‹åç§°å§ã€‚<br><br>ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœä½ å†™ï¼š<br><br>auto adder = [n](int x) { return n + x; };<br><br>ç¼–è¯‘å™¨äº§ç”Ÿçš„ä»£ç ç±»ä¼¼äºï¼š<br><br>struct lambda_1266ab7e {<br>  lambda_1266ab7e(int n) : n_{n} {}<br>  auto operator()(int x) const<br>  {<br>    return n_ + x;<br>  }<br>private:<br>  int n_;<br>};<br><br>auto adder = lambda_1266ab7e(n);","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1594378448,"ip_address":"","comment_id":233561,"utype":1}],"discussion_count":1,"race_medal":0,"score":"100378602600","product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œæ‚¨å¥½ã€‚<br>å››åˆ·æœ¬è®²ã€‚<br>æˆ‘å¯¹æ‚¨æ–‡ä¸­çš„è¿™ä¸€å¥ä»‹ç»æœ‰ç‚¹å¥½å¥‡ï¼Œâ€œæ¯ä¸ª lambda è¡¨è¾¾å¼éƒ½æœ‰ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ç±»å‹â€ã€‚ è¯·é—®è¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿæœ¬è´¨ä¸Šä¸åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆä¹ˆï¼Ÿè¿™ä¹ˆè§„å®šçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":23,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501087,"discussion_content":"è¿˜çœŸä¸æ˜¯å‡½æ•°æŒ‡é’ˆã€‚å¯ä»¥è®¤ä¸ºç¼–è¯‘å™¨å¸®ä½ ç»„åˆå‡ºäº†ä¸€ä¸ªå”¯ä¸€çš„ç±»å‹åç§°å§ã€‚\n\nä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœä½ å†™ï¼š\n\nauto adder = [n](int x) { return n + x; };\n\nç¼–è¯‘å™¨äº§ç”Ÿçš„ä»£ç ç±»ä¼¼äºï¼š\n\nstruct lambda_1266ab7e {\n  lambda_1266ab7e(int n) : n_{n} {}\n  auto operator()(int x) const\n  {\n    return n_ + x;\n  }\nprivate:\n  int n_;\n};\n\nauto adder = lambda_1266ab7e(n);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594378448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167831,"user_name":"å»–ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":1141444,"ip_address":"","ucode":"8E8C475CD11FBC","user_header":"https://static001.geekbang.org/account/avatar/00/11/6a/c4/8679ca8a.jpg","comment_is_top":false,"comment_ctime":1577946185,"is_pvip":false,"replies":[{"id":"65178","content":"æ–°å¹´å¿«ä¹ã€‚<br><br>å¯¹ï¼Œæ¦‚å¿µä¸Šå°±æ˜¯è¿™æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1577962864,"ip_address":"","comment_id":167831,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57412521033","product_id":100040501,"comment_content":"è€å¸ˆæ–°å¹´å¿«ä¹ã€‚<br>lambdaè¡¨è¾¾å¼å¤§æ¦‚æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªåŒ¿åçš„structå§ï¼Œå®ç°äº†operator(), æ•è·çš„è¯å¯¹åº”structä¸Šçš„å­—æ®µã€‚","like_count":13,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480014,"discussion_content":"æ–°å¹´å¿«ä¹ã€‚\n\nå¯¹ï¼Œæ¦‚å¿µä¸Šå°±æ˜¯è¿™æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577962864,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167742,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1577926655,"is_pvip":false,"replies":[{"id":"65177","content":"å¯¹ï¼Œå°±æ˜¯é—­åŒ…ã€‚<br><br>Stackful åç¨‹è§ Boost.Coroutine2ã€‚Stackless åç¨‹å·²ç»è¿›å…¥ C++20ï¼Œç¬¬ 30 è®²è®¨è®ºã€‚ğŸ¤“<br><br>æ–°å¹´å¿«ä¹ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1577962836,"ip_address":"","comment_id":167742,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35937665023","product_id":100040501,"comment_content":"1ã€æ„Ÿè§‰lambdaè¡¨è¾¾å¼å°±æ˜¯C++ä¸­çš„é—­åŒ…ã€‚<br><br>2ã€lambdaè¡¨è¾¾å¼å¯ä»¥ç«‹å³è¿›è¡Œæ±‚èŒï¼Œè¿™ä¸€ç‚¹å’ŒJavaScripté‡Œçš„ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆImdiately Invoked Function Expressionï¼ŒIIFEï¼‰ä¸€æ ·ã€‚åœ¨JavaScripté‡Œï¼Œå®ƒæ˜¯ç”¨æ¥è§£å†³ä½œç”¨åŸŸç¼ºé™·çš„ã€‚<br><br>æ„Ÿè§‰åœ¨åŠ¨æ€è¯­è¨€é‡Œè¢«ç”¨åˆ°æè‡´çš„é—­åŒ…ç­‰ç‰¹æ€§ï¼Œå› ä¸ºC++çš„å¼ºå¤§ã€å®Œå¤‡ï¼Œåœ¨C++é‡Œå¾ˆæ™®é€šã€‚<br><br>lambdaçš„å®šä¹‰å¯¹åº”ä¸€ä¸ªåŒ¿åå‡½æ•°å¯¹è±¡ï¼Œæ•è·å°±æ˜¯æ„é€ è¿™ä¸ªå¯¹è±¡æ—¶æŸç§æ–¹å¼çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œç”¨lambdaè¡¨è¾¾å¼éšè—äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œåªä¿ç•™äº†è¿™ä¸ªæ„æ€ï¼Œæ›´ç›´è§‚å’Œå†™æ„ã€‚<br><br>è€å¸ˆï¼Œæˆ‘å¯¹åç¨‹å¾ˆæ„Ÿå…´è¶£ï¼ŒC++ä¼šæœ‰åç¨‹ä¹ˆï¼Ÿéšçº¦æ„Ÿè§‰æ•è·å˜é‡è¿™ä¸ªä¸œè¥¿æ˜¯ä¸æ˜¯å¯ä»¥ç”¨åœ¨å®ç°åç¨‹ä¸Šï¼Ÿ<br><br>æœ€åï¼Œç¥è€å¸ˆæ–°å¹´å¿«ä¹ï¼","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479971,"discussion_content":"å¯¹ï¼Œå°±æ˜¯é—­åŒ…ã€‚\n\nStackful åç¨‹è§ Boost.Coroutine2ã€‚Stackless åç¨‹å·²ç»è¿›å…¥ C++20ï¼Œç¬¬ 30 è®²è®¨è®ºã€‚ğŸ¤“\n\næ–°å¹´å¿«ä¹ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577962836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178288,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1581651159,"is_pvip":false,"replies":[{"id":"69162","content":"æ³¨æ„æˆ‘è¿™å„¿ç”¨çš„æ˜¯ return Obj(â€¦) çš„å½¢å¼ï¼Œä¸æ˜¯æœ‰åå˜é‡çš„è¿”å›ï¼ˆObj a{â€¦} ç„¶å å† return aï¼‰ï¼Œä¸å±äº named return value optimization çš„æƒ…å†µã€‚NRVO æŒ‡çš„æ˜¯æœ¬åœ°å˜é‡çš„è¿”å›ã€‚C++17 å¼€å§‹ï¼Œprvalue ä»è¯­è¨€ä¸Šä½œäº†ç‰¹æ®Šè§£é‡Šï¼Œè¦æ±‚è¿™æ ·çš„è¿”å›ç›´æ¥æ„é€ åˆ°ç›®çš„ä½ç½®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1581661463,"ip_address":"","comment_id":178288,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18761520343","product_id":100040501,"comment_content":"è€å¸ˆï¼Œå›è¿‡å¤´æ¥çœ‹å¾—æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ã€‚<br><br>åœ¨ç”¨LAMBDAè¡¨è¾¾å¼è§£å†³å¤šé‡åˆå§‹åŒ–è·¯å¾„çš„é—®é¢˜æ—¶ï¼Œè¯´åˆ°è¿™æ ·è¿˜å¯ä»¥æé«˜æ€§èƒ½ï¼Œå› ä¸ºä¸éœ€è¦é»˜è®¤æ„é€ å’Œä¸éœ€è¦æ‹·è´&#47;ç§»åŠ¨ã€‚å¯æ˜¯åœ¨ç¬¬10è®²ä¸­è®²è¿”å›å€¼ä¼˜åŒ–çš„æ—¶å€™ï¼Œä¸æ˜¯è¯´å¦‚æœè¿”å›å€¼æ—¶æœ‰æ¡ä»¶åˆ¤æ–­ï¼Œç¼–è¯‘å™¨éƒ½è¢«ä¼šéš¾å€’ï¼Œä»è€Œå¯¼è‡´NRVOå¤±æ•ˆä¹ˆï¼ˆå‡½æ•°getA_duangï¼‰ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483744,"discussion_content":"æ³¨æ„æˆ‘è¿™å„¿ç”¨çš„æ˜¯ return Obj(â€¦) çš„å½¢å¼ï¼Œä¸æ˜¯æœ‰åå˜é‡çš„è¿”å›ï¼ˆObj a{â€¦} ç„¶å å† return aï¼‰ï¼Œä¸å±äº named return value optimization çš„æƒ…å†µã€‚NRVO æŒ‡çš„æ˜¯æœ¬åœ°å˜é‡çš„è¿”å›ã€‚C++17 å¼€å§‹ï¼Œprvalue ä»è¯­è¨€ä¸Šä½œäº†ç‰¹æ®Šè§£é‡Šï¼Œè¦æ±‚è¿™æ ·çš„è¿”å›ç›´æ¥æ„é€ åˆ°ç›®çš„ä½ç½®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581661463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1184280,"avatar":"https://static001.geekbang.org/account/avatar/00/12/12/18/3fd57334.jpg","nickname":"~å¤©äº†å™œ~","note":"","ucode":"745847776A9CD7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567052,"discussion_content":"å­¦ä¹ äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650815298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167491,"user_name":"æ€»ç»Ÿè€å”","can_delete":false,"product_type":"c1","uid":1490070,"ip_address":"","ucode":"F2CC66E5BB4871","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/96/c679bb3d.jpg","comment_is_top":false,"comment_ctime":1577842193,"is_pvip":false,"replies":[{"id":"65021","content":"è°¢è°¢ğŸ™ã€‚åœ¨è¿™å„¿ä¹Ÿé¡ºç¥æ‰€æœ‰çš„åŒå­¦ä»¬æ–°å¹´å¥½ï¼ğŸ˜‡ğŸˆğŸŠ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1577845530,"ip_address":"","comment_id":167491,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18757711377","product_id":100040501,"comment_content":"2020ç¬¬ä¸€è¯¾ï¼Œå´è€å¸ˆæ–°å¹´å¥½","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479882,"discussion_content":"è°¢è°¢ğŸ™ã€‚åœ¨è¿™å„¿ä¹Ÿé¡ºç¥æ‰€æœ‰çš„åŒå­¦ä»¬æ–°å¹´å¥½ï¼ğŸ˜‡ğŸˆğŸŠ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577845530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339024,"user_name":"Daniel","can_delete":false,"product_type":"c1","uid":1664804,"ip_address":"","ucode":"F4EFE2D2A3E118","user_header":"https://static001.geekbang.org/account/avatar/00/19/67/24/32c58f77.jpg","comment_is_top":false,"comment_ctime":1647863363,"is_pvip":false,"replies":[{"id":"124038","content":"æ˜¯è¿™æ ·ã€‚ğŸ˜Š","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1645639","ctime":1648040154,"ip_address":"","comment_id":339024,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10237797955","product_id":100040501,"comment_content":"class task {<br>public:<br>  task(int data) : data_(data) {}<br>  auto lazy_launch()<br>  {<br>    return<br>      [this, count = get_count()]()<br>      mutable {<br>        ostringstream oss;<br>        oss &lt;&lt; &quot;Done work &quot; &lt;&lt; data_<br>            &lt;&lt; &quot; (No. &quot; &lt;&lt; count<br>            &lt;&lt; &quot;) in thread &quot;<br>            &lt;&lt; this_thread::get_id()<br>            &lt;&lt; &#39;\\n&#39;;<br>        msg_ = oss.str();<br>        calculate();<br>      };<br>  }<br>  void calculate()<br>  {<br>    this_thread::sleep_for(100ms);<br>    cout &lt;&lt; msg_;<br>  }<br><br>private:<br>  int data_;<br>  string msg_;<br>};<br><br>è¾“å‡ºï¼š<br>Done work 37 (No. 2) in thread 3<br>Done work 37 (No. 2) in thread 3<br><br>æŒ‰å¼•ç”¨æ•è·ï¼Œåº”è¯¥æ˜¯çº¿ç¨‹1è¾“å‡ºä¹‹å‰msg_è¢«çº¿ç¨‹2è¦†ç›–äº†ã€‚","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":557998,"discussion_content":"æ˜¯è¿™æ ·ã€‚ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648040154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167596,"user_name":"ç½— ä¹¾ æ—","can_delete":false,"product_type":"c1","uid":1188222,"ip_address":"","ucode":"D0406F95176ABA","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/7e/fb725950.jpg","comment_is_top":false,"comment_ctime":1577871348,"is_pvip":false,"replies":[{"id":"65079","content":"lambdaè¡¨è¾¾å¼çš„ç†è§£æ²¡å•¥é—®é¢˜ã€‚<br><br>int(int, int) ä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹ï¼šä¸€ä¸ªæ¥å—ä¸¤ä¸ªæ•´æ•°å‚æ•°ã€è¿”å›ä¸€ä¸ªæ•´æ•°çš„å‡½æ•°ã€‚function çš„ä¸»è¦å¤æ‚æ€§ï¼Œåº”è¯¥æ˜¯éœ€è¦å¤„ç†å‡½æ•°ã€å‡½æ•°æŒ‡é’ˆã€å‡½æ•°å¯¹è±¡ç­‰å„ç§æƒ…å†µã€‚å‡½æ•°å¯¹è±¡çš„å¤§å°ä¸ç¡®å®šï¼Œå› è€Œ function éœ€è¦åœ¨å †ä¸Šåˆ†é…å†…å­˜ã€‚operator() æˆ‘è®°å¾—ç›¸å½“äºä¸€ä¸ªè™šå‡½æ•°è°ƒç”¨çš„å¤æ‚åº¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1577929427,"ip_address":"","comment_id":167596,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10167805940","product_id":100040501,"comment_content":"ç¼–è¯‘å™¨é‡åˆ°lambda è¡¨è¾¾å¼æ—¶ï¼Œäº§ç”Ÿä¸€ä¸ªåŒ¿åçš„å‡½æ•°å¯¹è±¡ï¼Œå„ç§æ•è·ç›¸å½“äºæŒ‰å€¼æˆ–è€…æŒ‰å¼•ç”¨è®¾ç½®ç»™åŒ¿åå¯¹è±¡çš„æˆå‘˜å­—æ®µã€‚<br>ä¸å¯¹çš„åœ°æ–¹ï¼Œæœ›è€å¸ˆæŒ‡æ­£ã€‚<br>å¯¹function&lt;int(int, int)&gt;è¿™è´§æ€ä¹ˆå®ç°çš„æ¯”è¾ƒå¥½å¥‡ï¼Œå¤§å¤šæ•°æ¨¡æ¿å‚æ•°éƒ½æ˜¯ç±»å‹ï¼Œåšçš„éƒ½æ˜¯æ˜¯ç±»å‹æ¨å¯¼ï¼Œè¿™è´§å±…ç„¶æ˜¯int(int, int)","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479911,"discussion_content":"lambdaè¡¨è¾¾å¼çš„ç†è§£æ²¡å•¥é—®é¢˜ã€‚\n\nint(int, int) ä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹ï¼šä¸€ä¸ªæ¥å—ä¸¤ä¸ªæ•´æ•°å‚æ•°ã€è¿”å›ä¸€ä¸ªæ•´æ•°çš„å‡½æ•°ã€‚function çš„ä¸»è¦å¤æ‚æ€§ï¼Œåº”è¯¥æ˜¯éœ€è¦å¤„ç†å‡½æ•°ã€å‡½æ•°æŒ‡é’ˆã€å‡½æ•°å¯¹è±¡ç­‰å„ç§æƒ…å†µã€‚å‡½æ•°å¯¹è±¡çš„å¤§å°ä¸ç¡®å®šï¼Œå› è€Œ function éœ€è¦åœ¨å †ä¸Šåˆ†é…å†…å­˜ã€‚operator() æˆ‘è®°å¾—ç›¸å½“äºä¸€ä¸ªè™šå‡½æ•°è°ƒç”¨çš„å¤æ‚åº¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577929427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348281,"user_name":"mawei","can_delete":false,"product_type":"c1","uid":1712470,"ip_address":"","ucode":"07DACA0F8BA65D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/21/56/91669d26.jpg","comment_is_top":false,"comment_ctime":1654930150,"is_pvip":false,"replies":[{"id":"126949","content":"æˆ‘çš„æ„æ€æ˜¯ï¼Œå¯ä»¥å†™ [&amp;a, &amp;b]ï¼Œä¹Ÿå¯ä»¥å†™ [=, &amp;a, &amp;b]ï¼Œä½†ä¸èƒ½å†™ [&amp;, &amp;a, &amp;b]ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1645639","ctime":1655131261,"ip_address":"","comment_id":348281,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5949897446","product_id":100040501,"comment_content":"&amp; åŠ æœ¬åœ°å˜é‡åæ ‡æ˜å¯¹å…¶æŒ‰å¼•ç”¨æ•è·ï¼ˆä¸èƒ½åœ¨é»˜è®¤æ•è·ç¬¦ &amp; åå‡ºç°ï¼›å› å…¶å·²è‡ªåŠ¨æŒ‰å¼•ç”¨æ•è·æ‰€æœ‰æœ¬åœ°å˜é‡ï¼‰<br>è€å¸ˆè¿™å¥è¯æœ‰é—®é¢˜ä¹ˆï¼Ÿæ‹¬å·å†…å¤–æ„Ÿè§‰æè¿°çŸ›ç›¾<br>&amp;æœ¬åœ°å˜é‡åï¼šè¿™ç§å†™æ³•ä¸è¢«å…è®¸ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575837,"discussion_content":"æˆ‘çš„æ„æ€æ˜¯ï¼Œå¯ä»¥å†™ [&amp;a, &amp;b]ï¼Œä¹Ÿå¯ä»¥å†™ [=, &amp;a, &amp;b]ï¼Œä½†ä¸èƒ½å†™ [&amp;, &amp;a, &amp;b]ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655131262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170278,"user_name":"EncodedStar","can_delete":false,"product_type":"c1","uid":1504234,"ip_address":"","ucode":"03958CA7DDD6AE","user_header":"https://static001.geekbang.org/account/avatar/00/16/f3/ea/2b2adda5.jpg","comment_is_top":false,"comment_ctime":1578560241,"is_pvip":false,"replies":[{"id":"66043","content":"ä¸æ˜¯ã€‚ä½ æ¼çœ‹äº†è¿™å¥è¯ï¼š<br><br>â€œé™¤éä½ ç”¨ä¸€ä¸ªå¼•ç”¨æ¨¡æ¿å‚æ•°æ¥æ•æ‰å‡½æ•°ç±»å‹ï¼Œä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°å®å‚ä¼šé€€åŒ–æˆä¸ºä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚â€","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1578569289,"ip_address":"","comment_id":170278,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873527537","product_id":100040501,"comment_content":"å‡½æ•°æŒ‡é’ˆå’Œå¼•ç”¨è¿™ä¸ªæ¨¡å—ä¸­<br>å½“æˆ‘ä»¬æ‹¿ add_2 å»è°ƒç”¨è¿™ä¸‰ä¸ªå‡½æ•°æ¨¡æ¿æ—¶ï¼Œfn çš„ç±»å‹å°†åˆ†åˆ«è¢«æ¨å¯¼ä¸º int (*)(int)ã€int (&amp;)(int) å’Œ int (*)(int)ã€‚<br>ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªéƒ½æ˜¯ int (*)(int) ç¬¬ä¸€ä¸ªæ˜¯ä¸æ˜¯  int (int)","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480918,"discussion_content":"ä¸æ˜¯ã€‚ä½ æ¼çœ‹äº†è¿™å¥è¯ï¼š\n\nâ€œé™¤éä½ ç”¨ä¸€ä¸ªå¼•ç”¨æ¨¡æ¿å‚æ•°æ¥æ•æ‰å‡½æ•°ç±»å‹ï¼Œä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°å®å‚ä¼šé€€åŒ–æˆä¸ºä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578569289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168745,"user_name":"ç©ºæ°”","can_delete":false,"product_type":"c1","uid":1307602,"ip_address":"","ucode":"45F9574A02343D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep73FalJJ7FPUJAcK2Ket1Qia1HOHhmaEcd8zdr4O6LHHk5NwzyUTnBAOzgmMtR3H0gSgYcbH6N5Vg/132","comment_is_top":false,"comment_ctime":1578149526,"is_pvip":false,"replies":[{"id":"65500","content":"ä½ å¦‚æœä¸æ˜¯é¢‘ç¹åˆ›å»º function å¯¹è±¡çš„è¯ï¼Œå…³ç³»ä¹Ÿä¸å¤§å§ã€‚æˆ‘è§‰å¾—å¤šè€ƒè™‘ç§»åŠ¨å°±è¡Œäº†ã€‚é™¤éæ€§èƒ½æµ‹è¯•å·¥å…·æŠ¥å‘Šç“¶é¢ˆå°±åœ¨è¿™å„¿äº†ï¼Œç”¨æ™ºèƒ½æŒ‡é’ˆå»ä¼˜åŒ–ä¸å¤ªå€¼ï¼ˆæ¯•ç«Ÿéœ€è¦ä¿®æ”¹ä½¿ç”¨çš„ä»£ç ï¼‰ã€‚<br><br>æ¯ä¸ª lambda éƒ½æœ‰è‡ªå·±çš„ç‹¬ç‰¹ç±»å‹ï¼Œæ¯æ¬¡å®šä¹‰ç›¸å½“äºç¼–è¯‘å™¨å¸®ä½ äº§ç”Ÿäº†ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼ˆå°±åƒè¿™ä¸€è®²é‡Œå®šä¹‰çš„é‚£äº›å‡½æ•°å¯¹è±¡ä¸€æ ·ï¼‰ã€‚<br><br>å…·ä½“å¦‚ä½•å®ç°ï¼Œæˆ‘å€’æ²¡è¯»åˆ°è¿‡ç›¸å…³çš„æ–‡ç« ã€‚ä½ å¯ä»¥ç½‘ä¸Šæœæœçœ‹ï¼Œæˆ–è€…é˜…è¯»æ ‡å‡†åº“é‡Œçš„æºç ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1578223249,"ip_address":"","comment_id":168745,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5873116822","product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œæˆ‘åœ¨å·¥ä½œä¸­å¾ˆç»å¸¸ç”¨åˆ°functionã€‚æ–‡ä¸­è®²åˆ°functionå¯¹è±¡çš„åˆ›å»ºæ¯”è¾ƒè€—èµ„æºï¼Œèƒ½å¦ä»‹ç»ä¸€ä¸‹åŸå› ï¼Œæˆ–è€…å¯ä»¥å‚è€ƒå“ªäº›èµ„æ–™ï¼Ÿç¡®å®è¦ä½¿ç”¨çš„è¯ï¼Œæ˜¯å¦æœ‰å¿…è¦ä½¿ç”¨å…±äº«æŒ‡é’ˆç®¡ç†æ¥å‡è½»å¤åˆ¶å’Œè½¬ç§»æ¶ˆè€—ï¼Ÿ<br>å¦‚æœlambdaçš„æ¨å¯¼ç±»å‹ä¸æ˜¯functionï¼Œé‚£æ˜¯ä»€ä¹ˆç±»å‹å‘¢ï¼Ÿå’Œfunctionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480317,"discussion_content":"ä½ å¦‚æœä¸æ˜¯é¢‘ç¹åˆ›å»º function å¯¹è±¡çš„è¯ï¼Œå…³ç³»ä¹Ÿä¸å¤§å§ã€‚æˆ‘è§‰å¾—å¤šè€ƒè™‘ç§»åŠ¨å°±è¡Œäº†ã€‚é™¤éæ€§èƒ½æµ‹è¯•å·¥å…·æŠ¥å‘Šç“¶é¢ˆå°±åœ¨è¿™å„¿äº†ï¼Œç”¨æ™ºèƒ½æŒ‡é’ˆå»ä¼˜åŒ–ä¸å¤ªå€¼ï¼ˆæ¯•ç«Ÿéœ€è¦ä¿®æ”¹ä½¿ç”¨çš„ä»£ç ï¼‰ã€‚\n\næ¯ä¸ª lambda éƒ½æœ‰è‡ªå·±çš„ç‹¬ç‰¹ç±»å‹ï¼Œæ¯æ¬¡å®šä¹‰ç›¸å½“äºç¼–è¯‘å™¨å¸®ä½ äº§ç”Ÿäº†ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼ˆå°±åƒè¿™ä¸€è®²é‡Œå®šä¹‰çš„é‚£äº›å‡½æ•°å¯¹è±¡ä¸€æ ·ï¼‰ã€‚\n\nå…·ä½“å¦‚ä½•å®ç°ï¼Œæˆ‘å€’æ²¡è¯»åˆ°è¿‡ç›¸å…³çš„æ–‡ç« ã€‚ä½ å¯ä»¥ç½‘ä¸Šæœæœçœ‹ï¼Œæˆ–è€…é˜…è¯»æ ‡å‡†åº“é‡Œçš„æºç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578223249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356791,"user_name":"ä½ å¥½æ¢¦æ¢¦","can_delete":false,"product_type":"c1","uid":1259578,"ip_address":"ä¸Šæµ·","ucode":"17A25B7AE62549","user_header":"https://static001.geekbang.org/account/avatar/00/13/38/3a/102afd91.jpg","comment_is_top":false,"comment_ctime":1662598503,"is_pvip":false,"replies":[{"id":"129864","content":"function å¯¹è±¡ä¸ç®—å°ï¼ˆä½ å¯ä»¥ç”¨ sizeof æ£€æŸ¥ä¸€ä¸‹ï¼‰ã€‚å› æ­¤ï¼Œä¸€èˆ¬ç”¨å¼•ç”¨ä¼ å‚ã€‚<br><br>å¦å¤–å‚è€ƒç¬¬ 41 è®²ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1645639","ctime":1662637214,"ip_address":"ä¸Šæµ·","comment_id":356791,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1662598503","product_id":100040501,"comment_content":"è€å¸ˆï¼Œå¯¹äºä¸€ä¸ªfunctionç±»å‹ï¼Œå¦‚æœæŠŠä»–ä½œä¸ºå‡½æ•°å‹å‚ï¼Œæ˜¯ç”¨å¼•ç”¨å¥½ï¼Œè¿˜æ˜¯ç›´æ¥ä¼ å€¼å¥½","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586977,"discussion_content":"function å¯¹è±¡ä¸ç®—å°ï¼ˆä½ å¯ä»¥ç”¨ sizeof æ£€æŸ¥ä¸€ä¸‹ï¼‰ã€‚å› æ­¤ï¼Œä¸€èˆ¬ç”¨å¼•ç”¨ä¼ å‚ã€‚\n\nå¦å¤–å‚è€ƒç¬¬ 41 è®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662637215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355616,"user_name":"å½“åˆè«ç›¸è¯†","can_delete":false,"product_type":"c1","uid":2768765,"ip_address":"ä¸Šæµ·","ucode":"313917BB360D48","user_header":"https://static001.geekbang.org/account/avatar/00/2a/3f/7d/f624fa69.jpg","comment_is_top":false,"comment_ctime":1661565960,"is_pvip":false,"replies":[{"id":"129526","content":"[=] æ•è·äº† thisï¼ˆä¸å»ºè®®ï¼ŒC++20 å¼€å§‹ä¼šæŠ¥é”™ï¼‰ï¼Œä¸æ˜¯ *thisã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæ•è·äº†å¤–å›´å¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯å¤åˆ¶äº†ä¸€ä»½å¤–å›´å¯¹è±¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1645639","ctime":1661836582,"ip_address":"ä¸Šæµ·","comment_id":355616,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1661565960","product_id":100040501,"comment_content":"å…³äºå¤šçº¿ç¨‹é‚£é‡Œï¼Œæœ‰ä¸ªç–‘é—®ã€‚æˆ‘åœ¨å°è¯•å°†*thisæ¢ä¸º=ï¼ŒåŒæ ·éƒ½æ˜¯æŒ‰å€¼æ•è·ï¼Œä¸ºä»€ä¹ˆç»“æœå´ä¸åŒå‘¢<br>return [=, count = get_count()]()ã€‚<br>æˆ‘è®°å¾—[]é‡Œ=æ˜¯æŒ‰å€¼æ•è·ï¼Œ&amp;å¼•ç”¨æ•è·ï¼Œæ˜¯æˆ‘å“ªé‡Œæ²¡ç†è§£å¯¹å—ï¼Œè¿˜æ˜¯C++æ ‡å‡†ä¸åŒæ‰€è‡´ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585810,"discussion_content":"[=] æ•è·äº† thisï¼ˆä¸å»ºè®®ï¼ŒC++20 å¼€å§‹ä¼šæŠ¥é”™ï¼‰ï¼Œä¸æ˜¯ *thisã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæ•è·äº†å¤–å›´å¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯å¤åˆ¶äº†ä¸€ä»½å¤–å›´å¯¹è±¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661836582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328482,"user_name":"è«è¨€","can_delete":false,"product_type":"c1","uid":2174219,"ip_address":"","ucode":"7B4A0D0FF49806","user_header":"https://static001.geekbang.org/account/avatar/00/21/2d/0b/e6836053.jpg","comment_is_top":false,"comment_ctime":1640749954,"is_pvip":false,"replies":[{"id":"119893","content":"get_countè¿”å›çš„å€¼ä¸ä¸€æ ·ã€‚ä½ çœ‹åˆ°è¾“å‡ºçš„æ ·å­ï¼Œæ˜¯å…¶ä»–åŸå› å¼•èµ·çš„ã€‚å†ä»”ç»†æƒ³æƒ³ã€‚ğŸ˜‰","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1645639","ctime":1641202234,"ip_address":"","comment_id":328482,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1640749954","product_id":100040501,"comment_content":"è¯·é—®ä¸‹å´è€å¸ˆï¼ŒthisæŒ‰å¼•ç”¨æ•è·çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆget_countè¿”å›çš„å€¼ä¹Ÿæ˜¯ä¸€æ ·çš„å‘¢ï¼Ÿè™½ç„¶å¼•ç”¨ä¸äº§ç”Ÿæ‹·è´ï¼Œä½†æ˜¯get_countä¸æ˜¯å®å®åœ¨åœ¨çš„æ‰§è¡Œäº†ä¸¤æ¬¡ä¹ˆ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543553,"discussion_content":"get_countè¿”å›çš„å€¼ä¸ä¸€æ ·ã€‚ä½ çœ‹åˆ°è¾“å‡ºçš„æ ·å­ï¼Œæ˜¯å…¶ä»–åŸå› å¼•èµ·çš„ã€‚å†ä»”ç»†æƒ³æƒ³ã€‚ğŸ˜‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641202234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2119142,"avatar":"https://static001.geekbang.org/account/avatar/00/20/55/e6/6a89ccc4.jpg","nickname":"éŸ¦å°‘","note":"","ucode":"7255683605E0C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546521,"discussion_content":"æ“ä½œçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚ ä½ æŠŠsleepå‡½æ•°æ”¾åˆ°ã€cout &lt;&lt;msg_;ã€ åé¢ æˆ–è®¸ä¼šæœ‰ç‚¹å¯å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642332715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284223,"user_name":"è–›å‡¯æ–‡","can_delete":false,"product_type":"c1","uid":2098241,"ip_address":"","ucode":"92EDBE7FADB41F","user_header":"https://static001.geekbang.org/account/avatar/00/20/04/41/a044b81c.jpg","comment_is_top":false,"comment_ctime":1616126443,"is_pvip":false,"replies":[{"id":"103112","content":"å› ä¸ºä½ äº§ç”Ÿäº†æœªå®šä¹‰è¡Œä¸ºã€‚å¦‚æœä½¿ç”¨æŒ‰å¼•ç”¨æ•è·ï¼Œä½ éœ€è¦ä¿è¯è¿™ä¸ªå˜é‡ä¸€ç›´å­˜åœ¨ã€‚<br><br>äº‹å®ä¸Šï¼Œclang å¯¹è¿™ç§æƒ…å†µæ˜¯å¯ä»¥ç›´æ¥æŠ¥è­¦çš„ï¼š<br><br>warning: address of stack memory associated with parameter &#39;n&#39; returned [-Wreturn-stack-address]","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1616155294,"ip_address":"","comment_id":284223,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616126443","product_id":100040501,"comment_content":"Helloï¼Œè€å¸ˆã€‚å…³äºlambda adderã€‚ <br>auto adder = [](int n) {<br>  return [n](int x) {<br>    return x + n;<br>  };<br>};<br>å¦‚æœé‡Œé¢çš„lambdaæ”¹æˆå¼•ç”¨æ•è·ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>auto adder = [](int n) {<br>  return [&amp;n](int x) {<br>    return x + n;<br>  };<br>};<br>ç»“æœå°±æ˜¯ä¸å¯¹çš„äº†. adder(3)(5)çš„ç»“æœæ˜¯10(5 + 5). è¯·é—®æ˜¯ä»€ä¹ˆåŸå› å•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517275,"discussion_content":"å› ä¸ºä½ äº§ç”Ÿäº†æœªå®šä¹‰è¡Œä¸ºã€‚å¦‚æœä½¿ç”¨æŒ‰å¼•ç”¨æ•è·ï¼Œä½ éœ€è¦ä¿è¯è¿™ä¸ªå˜é‡ä¸€ç›´å­˜åœ¨ã€‚\n\näº‹å®ä¸Šï¼Œclang å¯¹è¿™ç§æƒ…å†µæ˜¯å¯ä»¥ç›´æ¥æŠ¥è­¦çš„ï¼š\n\nwarning: address of stack memory associated with parameter &amp;#39;n&amp;#39; returned [-Wreturn-stack-address]","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616155294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279910,"user_name":"è”¡å†°æˆ","can_delete":false,"product_type":"c1","uid":1795821,"ip_address":"","ucode":"A1C50B0121C6C4","user_header":"https://static001.geekbang.org/account/avatar/00/1b/66/ed/a1233b74.jpg","comment_is_top":false,"comment_ctime":1613999167,"is_pvip":false,"replies":[{"id":"101735","content":"æˆ‘çŒœæ˜¯æ²¡å¼€ä¼˜åŒ–ï¼Ÿæˆ‘è¯•ä¸‹æ¥æ²¡é—®é¢˜å•Šï¼š<br><br>https:&#47;&#47;godbolt.org&#47;z&#47;M73ccj","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1614096332,"ip_address":"","comment_id":279910,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1613999167","product_id":100040501,"comment_content":"hi, å´è€å¸ˆ<br>    auto dbl_lambda = [](const int&amp; x) {return x * x;};<br>    int dbl1 = dbl_lambda(3);<br>å…³äº&quot;åªè¦èƒ½æ»¡è¶³ constexpr å‡½æ•°çš„æ¡ä»¶ï¼Œä¸€ä¸ª lambda è¡¨è¾¾å¼é»˜è®¤å°±æ˜¯ constexpr å‡½æ•°&quot;è¿™ä¸ªç»“è®º, æˆ‘ç”¨ä¸Šé¢å¯¹ä»£ç ç¼–è¯‘ä¹‹å, è®¡ç®—3*3ä¾ç„¶æ˜¯è¿è¡Œæ—¶è°ƒç”¨, ä½¿ç”¨çš„æ˜¯https:&#47;&#47;gcc.godbolt.org&#47;, ç¼–è¯‘ç¯å¢ƒx86-64 gcc10.2<br> call   401172 &lt;main::{lambda(int)#1}::operator()(int) const&gt;<br> mov    DWORD PTR [rbp-0x4],eax<br>è¯·é—®æ˜¯æœ‰ä»€ä¹ˆåœ°æ–¹ä¸æ­£ç¡®å—? å¦‚æœä½¿ç”¨æ­£å¸¸å¯¹å‡½æ•°åŠ constexprå£°æ˜åˆ™æ˜¯ç¼–è¯‘æœŸè®¡ç®—çš„","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515920,"discussion_content":"æˆ‘çŒœæ˜¯æ²¡å¼€ä¼˜åŒ–ï¼Ÿæˆ‘è¯•ä¸‹æ¥æ²¡é—®é¢˜å•Šï¼š\n\nhttps://godbolt.org/z/M73ccj","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614096332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1795821,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/66/ed/a1233b74.jpg","nickname":"è”¡å†°æˆ","note":"","ucode":"A1C50B0121C6C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357282,"discussion_content":"æ„Ÿè°¢å›å¤, ç”¨æ‚¨çš„æ–¹æ³•éªŒè¯äº†ä¸€ä¸‹çœ‹èµ·æ¥æ˜¯ä¼˜åŒ–å‚æ•°çš„åŒºåˆ«. å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯, lambdaå¯ä»¥åšç¼–è¯‘æœŸè®¡ç®—å…¶å®å°±æ˜¯åœ¨ç¼–è¯‘å±•å¼€çš„æ—¶å€™æ·»åŠ äº†constexprå…³é”®è¯å—? è¿™é‡Œçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ ,ä½†æ˜¯æˆ‘ä¸æ˜¯å¾ˆç¡®å®š : https://cppinsights.io/s/80abc66f","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615776389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":230795,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1593496121,"is_pvip":false,"replies":[{"id":"85388","content":"std::placeholdersï¼Ÿé‚£åªæ˜¯ç”¨äº bind çš„ã€‚lambda é‡Œå®Œå…¨æ²¡çœ‹åˆ°æœ‰éœ€è¦è¦ç”¨ç±»ä¼¼çš„ä¸œè¥¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1593650698,"ip_address":"","comment_id":230795,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1593496121","product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ã€‚<br>è¯·é—®åˆ©ç”¨lamdaè¡¨è¾¾å¼æ¥æ›¿æ¢bind,æ˜¯å¦è¦ä½¿ç”¨std::thresholdersæ¥ä¼ é€’å‚æ•°?","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500040,"discussion_content":"std::placeholdersï¼Ÿé‚£åªæ˜¯ç”¨äº bind çš„ã€‚lambda é‡Œå®Œå…¨æ²¡çœ‹åˆ°æœ‰éœ€è¦è¦ç”¨ç±»ä¼¼çš„ä¸œè¥¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593650698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1020160,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","nickname":"zhengfan","note":"","ucode":"B3AC0E10BF7A14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287646,"discussion_content":"çœ‹æ¥å°ç¼–ç¡é†’äº†ï¼šï¼‰\nè¡¥å……ä¸€ä¸‹é—®é¢˜ç»†èŠ‚å§ï¼š\næˆ‘å°è¯•äº†ä¸€ä¸‹ç”¨lambdaæ›¿æ¢bind,å‘ç°thresholderä¸çŸ¥é“è¯¥å¦‚ä½•å¤„ç†ï¼Œç”¨äº†autoæç¤ºæ— æ³•åŒ¹é…ã€‚éš¾é“å¿…é¡»è¦å…·ååŒ–å¤„ç†å—ï¼Ÿ\nè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593503458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1020160,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","nickname":"zhengfan","note":"","ucode":"B3AC0E10BF7A14","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290274,"discussion_content":"æ‹¿å…·ä½“ä¾‹å­å§ã€‚\n\nå¦ï¼Œä½ è¿™æ ·å›å¤æˆ‘æ”¶ä¸åˆ°æé†’çš„ã€‚åŸå…ˆé‚£æ ·æé—®é¢˜æˆ‘èƒ½æ”¶åˆ°æé†’ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594394127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":287646,"ip_address":""},"score":290274,"extra":""}]}]},{"had_liked":false,"id":230784,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1593491421,"is_pvip":false,"replies":[{"id":"85229","content":"æœ‰æ„æ€çš„é—®é¢˜ã€‚å®æµ‹ä¸‹æ¥ï¼ŒC++ ä¸çœ‹å½¢å¼ï¼Œè€Œæ˜¯çœ‹å®è´¨ã€‚æŒ‰ä½ è¿™ä¸ªå½¢å¼ï¼Œèƒ½ç¼–è¯‘è¿‡ã€‚ä½†å¦‚æœè¿™ä¸ª lambda è¡¨è¾¾å¼çœŸçš„ä¼šä¿®æ”¹è‡ªå·±çš„å­˜å‚¨çš„æ•°å€¼ï¼Œåˆ™ä¸å¯ä»¥æ˜¯ constexprã€‚<br><br>è§ï¼š<br><br>https:&#47;&#47;godbolt.org&#47;z&#47;wc5axG<br><br>å†™<br><br>auto l = [x = 1]() { return x++; };<br>constexpr auto l = [x = 1]() mutable { return x++; };<br><br>éƒ½ä¸è¡Œã€‚<br><br>auto l = [x = 1]() mutable { return x++; };<br><br>å¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1593499619,"ip_address":"","comment_id":230784,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1593491421","product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ï¼Œè¯·æ•™ä¸€ä¸‹ï¼š<br>å¯¹äºå½¢å¦‚[]() mutable {}çš„lamdaè¡¨è¾¾å¼ è¿˜èƒ½å¤Ÿè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªconstexprå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500036,"discussion_content":"æœ‰æ„æ€çš„é—®é¢˜ã€‚å®æµ‹ä¸‹æ¥ï¼ŒC++ ä¸çœ‹å½¢å¼ï¼Œè€Œæ˜¯çœ‹å®è´¨ã€‚æŒ‰ä½ è¿™ä¸ªå½¢å¼ï¼Œèƒ½ç¼–è¯‘è¿‡ã€‚ä½†å¦‚æœè¿™ä¸ª lambda è¡¨è¾¾å¼çœŸçš„ä¼šä¿®æ”¹è‡ªå·±çš„å­˜å‚¨çš„æ•°å€¼ï¼Œåˆ™ä¸å¯ä»¥æ˜¯ constexprã€‚\n\nè§ï¼š\n\nhttps://godbolt.org/z/wc5axG\n\nå†™\n\nauto l = [x = 1]() { return x++; };\nconstexpr auto l = [x = 1]() mutable { return x++; };\n\néƒ½ä¸è¡Œã€‚\n\nauto l = [x = 1]() mutable { return x++; };\n\nå¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593499619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1020160,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","nickname":"zhengfan","note":"","ucode":"B3AC0E10BF7A14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287645,"discussion_content":"è¯¶å‘€å´è€å¸ˆå±…ç„¶ç§’å›ï¼å¤ªæ„ŸåŠ¨äº†â€¦\nå¦å¤–è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œä¸çŸ¥é“å°ç¼–ä¸ºä½•ç•™ä¸­ä¸å‘ï¼Œä¸€å¹¶åœ¨è¿™é‡Œé—®äº†å§ï¼š\næˆ‘å°è¯•äº†ä¸€ä¸‹ç”¨lambdaæ›¿æ¢bind,å‘ç°thresholderä¸çŸ¥é“è¯¥å¦‚ä½•å¤„ç†ï¼Œç”¨äº†autoæç¤ºæ— æ³•åŒ¹é…ã€‚éš¾é“å¿…é¡»è¦å…·ååŒ–å¤„ç†å—ï¼Ÿ\nè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593502711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":180518,"user_name":"æ™šé£Â·å’Œç…¦","can_delete":false,"product_type":"c1","uid":1236047,"ip_address":"","ucode":"0B1DB8F437A4B2","user_header":"","comment_is_top":false,"comment_ctime":1582302359,"is_pvip":false,"replies":[{"id":"70056","content":"ã€Œè‹¥ä¸å¯¹ç±»ç±»å‹ï¼ˆstructã€class æˆ– unionï¼‰æä¾›ä»»ä½•ç”¨æˆ·å£°æ˜çš„æ„é€ å‡½æ•°ï¼Œåˆ™ç¼–è¯‘å™¨å°†å§‹ç»ˆå£°æ˜ä¸€ä¸ªä½œä¸ºå…¶ç±»çš„ inline public æˆå‘˜çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚ ã€<br><br>https:&#47;&#47;zh.cppreference.com&#47;w&#47;cpp&#47;language&#47;default_constructor","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1582335412,"ip_address":"","comment_id":180518,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582302359","product_id":100040501,"comment_content":"è€å¸ˆï¼Œä¸€ä¸ªç©ºç±»ï¼Œç¼–è¯‘å™¨æ²¡æœ‰ç”Ÿæˆé»˜è®¤çš„æ„é€ å‡½æ•°æ˜¯å—ï¼ŸğŸ˜‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484691,"discussion_content":"ã€Œè‹¥ä¸å¯¹ç±»ç±»å‹ï¼ˆstructã€class æˆ– unionï¼‰æä¾›ä»»ä½•ç”¨æˆ·å£°æ˜çš„æ„é€ å‡½æ•°ï¼Œåˆ™ç¼–è¯‘å™¨å°†å§‹ç»ˆå£°æ˜ä¸€ä¸ªä½œä¸ºå…¶ç±»çš„ inline public æˆå‘˜çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚ ã€\n\nhttps://zh.cppreference.com/w/cpp/language/default_constructor","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582335412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168547,"user_name":"æ©™å­888","can_delete":false,"product_type":"c1","uid":1447790,"ip_address":"","ucode":"8FB8A9AAE526E3","user_header":"https://static001.geekbang.org/account/avatar/00/16/17/6e/76b4aa3d.jpg","comment_is_top":false,"comment_ctime":1578107928,"is_pvip":false,"replies":[{"id":"65374","content":"libgo æˆ‘æ²¡æœ‰ä»»ä½•ä½¿ç”¨ç»éªŒï¼Œä¸è¿‡ï¼Œçœ‹èµ·æ¥å®ƒå’Œå¤§éƒ¨åˆ†åº“å®ç°çš„åç¨‹ä¸€æ ·ï¼Œéƒ½æ˜¯ stackful coroutineã€‚æˆ‘ç¬¬ 30 è®²ä¼šè®²çš„æ˜¯ä¼šè¿›å…¥ C++20 çš„ stackless coroutineã€‚<br><br>æ¯ä¸ª libgo çš„åç¨‹éƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹æ ˆç©ºé—´ï¼Œå› æ­¤ï¼Œåç¨‹å”¤èµ·å’Œä¼‘çœ æ—¶éƒ½éœ€è¦è¿›è¡Œæ ˆåˆ‡æ¢ã€‚æ— æ ˆåç¨‹åˆ™è·Ÿå”¤èµ·è€…ä½¿ç”¨åŒä¸€ä¸ªæ ˆã€‚æœ‰æ ˆçš„åç¨‹å®ç°å¦å¤–è¿˜æœ‰ libcoã€Boost.Coroutine2 ç­‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1578124433,"ip_address":"","comment_id":168547,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1578107928","product_id":100040501,"comment_content":"æœ€è¿‘é¡¹ç›®é‡Œä½¿ç”¨åˆ°äº†libgoè¿™ä¸ªC++å†™çš„åç¨‹åº“ï¼Œç¤ºä¾‹ä»£ç ä¸­ç”¨åˆ°äº†å¥½å¤šè€å¸ˆä»Šå¤©è®²çš„çŸ¥è¯†ç‚¹ï¼š<br>void foo()<br>{<br>    printf(&quot;function pointer\\n&quot;);<br>}<br><br>struct A {<br>    void fA() { printf(&quot;std::bind\\n&quot;); }<br>    void fB() { printf(&quot;std::function\\n&quot;); }<br>};<br>int main()<br>{<br>    go foo;<br><br>    go []{<br>        printf(&quot;lambda\\n&quot;);<br>    };<br><br>    go std::bind(&amp;A::fA, A());<br><br>    std::function&lt;void()&gt; fn(std::bind(&amp;A::fB, A()));<br>    go fn;<br>}<br>å…¶ä¸­è·Ÿåœ¨&quot;go&quot;åé¢çš„å†…å®¹æ€»ç®—èƒ½ç†è§£äº†ï¼Œä½†æ˜¯&quot;go&quot;çš„å®ç°åŸç†è¿˜æ˜¯æ²¡ææ‡‚ï¼Œä¸çŸ¥é“åé¢åç¨‹è¿™å—çš„å†…å®¹ä¼šä¸ä¼šæœ‰è®²åˆ°ã€‚<br>å¦å¤–å¯¹è€å¸ˆä»Šå¤©è®²çš„ â€ä¸€èˆ¬è€Œè¨€ï¼ŒæŒ‰å€¼æ•è·æ˜¯æ¯”è¾ƒå®‰å…¨çš„åšæ³•ã€‚æŒ‰å¼•ç”¨æ•è·æ—¶åˆ™éœ€è¦æ›´å°å¿ƒäº›ï¼Œå¿…é¡»èƒ½å¤Ÿç¡®ä¿è¢«æ•è·çš„å˜é‡å’Œ lambda è¡¨è¾¾å¼çš„ç”Ÿå‘½æœŸè‡³å°‘ä¸€æ ·é•¿â€œ è¿™å¥è¯æ·±æœ‰ä½“ä¼šï¼Œæˆ‘åœ¨é¡¹ç›®é‡ŒæŒ‰å€¼æ•è·æŒ‡é’ˆç»™åç¨‹ç”¨ï¼Œç»“æœè°ƒè¯•çš„æ—¶å€™å°±æ˜¯å„ç§éšæœºçš„å´©æºƒã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480247,"discussion_content":"libgo æˆ‘æ²¡æœ‰ä»»ä½•ä½¿ç”¨ç»éªŒï¼Œä¸è¿‡ï¼Œçœ‹èµ·æ¥å®ƒå’Œå¤§éƒ¨åˆ†åº“å®ç°çš„åç¨‹ä¸€æ ·ï¼Œéƒ½æ˜¯ stackful coroutineã€‚æˆ‘ç¬¬ 30 è®²ä¼šè®²çš„æ˜¯ä¼šè¿›å…¥ C++20 çš„ stackless coroutineã€‚\n\næ¯ä¸ª libgo çš„åç¨‹éƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹æ ˆç©ºé—´ï¼Œå› æ­¤ï¼Œåç¨‹å”¤èµ·å’Œä¼‘çœ æ—¶éƒ½éœ€è¦è¿›è¡Œæ ˆåˆ‡æ¢ã€‚æ— æ ˆåç¨‹åˆ™è·Ÿå”¤èµ·è€…ä½¿ç”¨åŒä¸€ä¸ªæ ˆã€‚æœ‰æ ˆçš„åç¨‹å®ç°å¦å¤–è¿˜æœ‰ libcoã€Boost.Coroutine2 ç­‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578124433,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1217554,"avatar":"https://static001.geekbang.org/account/avatar/00/12/94/12/15558f28.jpg","nickname":"Jason","note":"","ucode":"C5A540BC5A60B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":185363,"discussion_content":"æ­£å·§æˆ‘ä¹Ÿåœ¨é›†æˆlibgoï¼Œä½ è¯´çš„goåé¢çš„å¤„ç†ï¼Œå…¶å®goæ˜¯ä¸€ä¸ªå®å®šä¹‰ã€‚\n#define go_alias ::co::__go(__FILE__, __LINE__)-\n#define go go_alias\n\nè¿™é‡Œä½ å¯èƒ½çœ‹åˆ°ä¸€ä¸ªå‡å·å¾ˆç–‘æƒ‘ï¼Œå…¶å®æ˜¯__goè¿™ä¸ªç»“æ„åšäº†è¿ç®—ç¬¦é‡è½½ï¼Œå»ºè®®çœ‹ä¸‹syntax_helper.hè¿™ä¸ªå¤´æ–‡ä»¶","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1582620370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167962,"user_name":"æäº®äº®","can_delete":false,"product_type":"c1","uid":1116508,"ip_address":"","ucode":"290907F930B261","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","comment_is_top":false,"comment_ctime":1577969785,"is_pvip":false,"replies":[{"id":"65233","content":"æ˜¯è¯´æœ‰çº¿ç¨‹çš„é‚£ä¸ªä¾‹å­å—ï¼Ÿæˆ‘åˆšåˆè¯•äº†ï¼Œæ²¡é—®é¢˜çš„ã€‚<br><br>ä½ æ˜¯ä¸æ˜¯æ²¡æœ‰è®¾å®šè¯­è¨€æ ‡å‡†ä¸º c++17ï¼Ÿä½†ä½ è¯„è®ºé‡Œåˆè¯´è®¾äº†â€¦â€¦ä¸è®¾æ˜¯ç¡®å®ä¸è¡Œçš„ã€‚<br><br>æˆ‘ç¼–è¯‘çš„å‘½ä»¤è¡Œæ˜¯ï¼š<br><br>cl &#47;EHsc &#47;std:c++17 test16.cpp<br><br>å¦‚æœä½ é‡åˆ°é”™è¯¯äº†ï¼Œåˆä¸è´´å‡ºé”™è¯¯ä¿¡æ¯ï¼Œåˆ«äººä¹Ÿæ²¡æ³•å¸®ä½ å•Šâ€¦â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1577974351,"ip_address":"","comment_id":167962,"utype":1}],"discussion_count":6,"race_medal":0,"score":"1577969785","product_id":100040501,"comment_content":"Microsoft Visual Studio Community 2019  ç‰ˆæœ¬ 16.4.2ï¼Œè¯­è¨€æ ‡å‡†ï¼šC++17 ä¾‹å­ç¼–è¯‘ä¸è¿‡ï¼Œæ°´å¹³åˆèœï¼Œä¸ä¼šæ”¹ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480072,"discussion_content":"æ˜¯è¯´æœ‰çº¿ç¨‹çš„é‚£ä¸ªä¾‹å­å—ï¼Ÿæˆ‘åˆšåˆè¯•äº†ï¼Œæ²¡é—®é¢˜çš„ã€‚\n\nä½ æ˜¯ä¸æ˜¯æ²¡æœ‰è®¾å®šè¯­è¨€æ ‡å‡†ä¸º c++17ï¼Ÿä½†ä½ è¯„è®ºé‡Œåˆè¯´è®¾äº†â€¦â€¦ä¸è®¾æ˜¯ç¡®å®ä¸è¡Œçš„ã€‚\n\næˆ‘ç¼–è¯‘çš„å‘½ä»¤è¡Œæ˜¯ï¼š\n\ncl /EHsc /std:c++17 test16.cpp\n\nå¦‚æœä½ é‡åˆ°é”™è¯¯äº†ï¼Œåˆä¸è´´å‡ºé”™è¯¯ä¿¡æ¯ï¼Œåˆ«äººä¹Ÿæ²¡æ³•å¸®ä½ å•Šâ€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577974351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1116508,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","nickname":"æäº®äº®","note":"","ucode":"290907F930B261","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115130,"discussion_content":"æ²¡æœ‰ä½¿ç”¨å‘½ä»¤ï¼Œç›´æ¥ç‚¹çš„ runï¼Œåé¢æˆ‘ä½¿ç”¨åœ¨çº¿çš„C++ ç¼–è¯‘å™¨æµ‹è¯•äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577980552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1116508,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","nickname":"æäº®äº®","note":"","ucode":"290907F930B261","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115485,"discussion_content":"åªè¦å‡ºé”™ï¼Œæ€»æœ‰é”™è¯¯ä¿¡æ¯çš„â€¦â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578015918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":115130,"ip_address":""},"score":115485,"extra":""},{"author":{"id":1116508,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","nickname":"æäº®äº®","note":"","ucode":"290907F930B261","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":115578,"discussion_content":"å´è€å¸ˆï¼Œè¿™æ˜¯vsæç¤ºçš„é”™è¯¯ï¼š\n\n[*this, count = get_count()]â€‹() è¿™è¡Œæç¤ºï¼š\nE1758\tåº”è¾“å…¥â€œ{â€ä»¥å¼•å…¥ lambda ä½“\tï¼Œ\t\nC3260\tâ€œæ ‡è¯†ç¬¦â€: è·³è¿‡ lambda ä¸»ä½“ä¹‹å‰çš„æ„å¤–æ ‡è®°\n\nmsg_ = oss.str(); è¿™è¡Œæç¤ºï¼š\nC2678\täºŒè¿›åˆ¶â€œ=â€: æ²¡æœ‰æ‰¾åˆ°æ¥å—â€œconst std::stringâ€ç±»å‹çš„å·¦æ“ä½œæ•°çš„è¿ç®—ç¬¦(æˆ–æ²¡æœ‰å¯æ¥å—çš„è½¬æ¢)\n\ncalculate(); è¿™è¡Œæç¤ºï¼š\nC2662\tâ€œvoid task::calculate(void)â€: ä¸èƒ½å°†â€œthisâ€æŒ‡é’ˆä»â€œconst taskâ€è½¬æ¢ä¸ºâ€œtask &amp;â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578020693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":115485,"ip_address":""},"score":115578,"extra":""},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1116508,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","nickname":"æäº®äº®","note":"","ucode":"290907F930B261","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115644,"discussion_content":"å“ˆï¼Œä¸æ˜¯ä½ çš„é—®é¢˜ã€‚æ˜¯â€œ[*this, count = get_count()]â€‹()â€ è¿™è¡Œï¼Œåœ¨ç»“æŸçš„â€œ()â€å‰æœ‰ä¸ªä¸å¯è§å­—ç¬¦ï¼Œéœ€è¦åˆ æ‰æ‰èƒ½æ­£ç¡®ç¼–è¯‘ã€‚æˆ‘åœ¨è”ç³»ç¼–è¾‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578025257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":115578,"ip_address":""},"score":115644,"extra":""}]}]},{"had_liked":false,"id":167678,"user_name":"ç¦¾æ¡ƒ","can_delete":false,"product_type":"c1","uid":1477855,"ip_address":"","ucode":"9FE85C34A9E9E0","user_header":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","comment_is_top":false,"comment_ctime":1577892347,"is_pvip":false,"replies":[{"id":"65082","content":"å°±æ˜¯è®©ä½ æƒ³ä¸€æƒ³çš„å‘€ã€‚æç¤ºï¼šæŒ‰å¼•ç”¨æ•è·çš„åæœã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1577929706,"ip_address":"","comment_id":167678,"utype":1}],"discussion_count":9,"race_medal":0,"score":"1577892347","product_id":100040501,"comment_content":"&quot;è¯·è‡ªè¡Œè¿è¡Œä¸€ä¸‹ä»£ç ï¼Œå¹¶æŠŠ *this æ”¹æˆ thisï¼Œçœ‹çœ‹è¾“å‡ºä¼šæœ‰ä»€ä¹ˆä¸åŒã€‚&quot;<br><br>int get_count()<br>{<br>    static int count = 0;<br>    return ++count;<br>}<br><br>class task {<br>public:<br>    task(int data) : data_(data) { cout &lt;&lt; __func__ &lt;&lt; &quot;|&quot; &lt;&lt; this &lt;&lt; endl; }<br>    auto lazy_launch()<br>    {<br>        return<br>            &#47;&#47; *this æ ‡æ˜æŒ‰å€¼æ•è·å¤–å›´å¯¹è±¡<br>            &#47;&#47; å˜é‡å = è¡¨è¾¾å¼ æ ‡æ˜æŒ‰å€¼æ•è·è¡¨è¾¾å¼çš„ç»“æœ<br>                [this, count = get_count()]()<br>                        mutable { &#47;&#47; mutable æ ‡è®°ä½¿æ•è·çš„å†…å®¹å¯æ›´æ”¹<br>                    cout &lt;&lt; __func__ &lt;&lt; &quot;|&quot; &lt;&lt; this &lt;&lt; endl;<br>                    ostringstream oss;<br>                    oss &lt;&lt; &quot;Done work &quot; &lt;&lt; data_<br>                        &lt;&lt; &quot; (No. &quot; &lt;&lt; count<br>                        &lt;&lt; &quot;) in thread &quot;<br>                        &lt;&lt; this_thread::get_id()<br>                        &lt;&lt; &#39;\\n&#39;;<br>                    msg_ = oss.str();<br>                    calculate();<br>                };<br>    }<br>    void calculate()<br>    {<br>        this_thread::sleep_for(100ms);<br>        cout &lt;&lt; msg_;<br>    }<br><br>private:<br>    int data_;<br>    string msg_;<br>};<br><br>int main()<br>{<br>    auto t = task{37};<br>    thread t1{t.lazy_launch()};<br>    thread t2{t.lazy_launch()};<br>    t1.join();<br>    t2.join();<br>}<br><br> æ‰“å°è¾“å‡º<br>task|0x7ffe6f0e7120<br>operator()|0x7ffe6f0e7120<br>operator()|0x7ffe6f0e7120<br>Done work 37 (No. 2) in thread 140331800897280 <br>Done work 37 (No. 2) in thread 140331800897280<br><br>ä¸å¤ªæ˜ç™½ä¸ºä»€ä¹ˆï¼Œ<br>#1 t1, t2è¿™ä¸¤ä¸ªthreadæœ‰åŒæ ·çš„thread id(140331800897280)ï¼Ÿ<br>#2 ä¸ºä»€ä¹ˆ countåœ¨ï¼Œ t1, t2è¿è¡Œæ—¶ï¼Œæ‰“å°å‡ºçš„éƒ½æ˜¯2(No. 2)ï¼Ÿ<br><br>å¤šè°¢ï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479941,"discussion_content":"å°±æ˜¯è®©ä½ æƒ³ä¸€æƒ³çš„å‘€ã€‚æç¤ºï¼šæŒ‰å¼•ç”¨æ•è·çš„åæœã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577929706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":114226,"discussion_content":"å“ˆï¼Œå¤šè°¢ï¼ æ¯”è¾ƒtrickyçš„æ˜¯this_thread::sleep_for(100ms); ç”±äºä»–çš„å­˜åœ¨ï¼Œ msg_è™½ç„¶å·²ç»è¢«ä¸¤ä¸ªçº¿ç¨‹é‡Œçš„ä»£ç åˆ†åˆ«æ›´æ–°äº†ä¸€æ¬¡ï¼Œ ä½†æ˜¯å½“æ‰§è¡Œåˆ°cout << msg_ï¼ˆä¸ç®¡æ˜¯å“ªä¸ªçº¿ç¨‹ï¼‰ï¼Œ çœ‹åˆ°çš„éƒ½æ˜¯msg_è¢«æ›´æ–°å®Œä¸¤æ¬¡ä»¥åçš„æœ€ç»ˆçŠ¶æ€ã€‚  å»æ‰this_thread::sleep_for(100ms)ï¼Œ å°±èƒ½çœ‹åˆ° msg_è¢«ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«æ›´æ–°åçš„ä¸­é—´çŠ¶æ€äº†ã€‚æœ‰æ„æ€ï¼","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577964382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1757384,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL41RCmZy6An5SLXPmXU6ea5yvweBGPicedqQ0xjuaYp1PY1CSlUuNwgV3BNpbWzdJwXlWZAVicrtPg/132","nickname":"å•¦å•¦å•¦","note":"","ucode":"76BBA994C40F23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":114094,"discussion_content":"æˆ‘è§‰å¾—è¿™ä¸ªå°±æ˜¯å› ä¸ºæŒ‰å¼•ç”¨æ•è·ï¼Œæ‰€ä»¥å‰é¢çš„å†…å®¹éƒ½è¢«åé¢çš„è¦†ç›–äº†ï¼Œæœ€åè¾“å‡ºçš„éƒ½æ˜¯æœ€åèµ‹å€¼çš„å†…å®¹äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1577957096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1757384,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL41RCmZy6An5SLXPmXU6ea5yvweBGPicedqQ0xjuaYp1PY1CSlUuNwgV3BNpbWzdJwXlWZAVicrtPg/132","nickname":"å•¦å•¦å•¦","note":"","ucode":"76BBA994C40F23","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":114203,"discussion_content":"è¿™ä½åŒå­¦æ­£è§£ã€‚ğŸ˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577963668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":114094,"ip_address":""},"score":114203,"extra":""},{"author":{"id":1188173,"avatar":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","nickname":"å…‰åŸ~å…´","note":"","ucode":"55A0D25BFCDD47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":129870,"discussion_content":"æœ€ä¸»è¦è¿˜æ˜¯æœ‰ä¸ªsleepè¿‡ç¨‹ï¼Œå“ˆå“ˆï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578743007,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":114203,"ip_address":""},"score":129870,"extra":""},{"author":{"id":1311125,"avatar":"https://static001.geekbang.org/account/avatar/00/14/01/95/fd09e8a8.jpg","nickname":"å¸ƒæ‹‰å§†","note":"","ucode":"479FF27D73BCAD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":353324,"discussion_content":"é‚£ä¹ˆè€å¸ˆï¼ŒC++17ä¹‹å‰ï¼Œæ¯”å¦‚C++14åœ¨æ•è·åˆ—è¡¨å†…æ— æ³•ä½¿ç”¨[*this], è¿™ç§æƒ…å†µä¸‹æ˜¯å¦æœ‰æ›¿ä»£æ–¹æ³•ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615127204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":114203,"ip_address":""},"score":353324,"extra":""}]},{"author":{"id":1116508,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","nickname":"æäº®äº®","note":"","ucode":"290907F930B261","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":114437,"discussion_content":"å€¼æ•è·å°±æ˜¯æ“ä½œå¤‡ä»½ï¼Œå¼•ç”¨æ•è·æ“ä½œçš„æ˜¯åŒä¸€ä¸ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577972091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1477855,"avatar":"https://static001.geekbang.org/account/avatar/00/16/8c/df/77acb793.jpg","nickname":"ç¦¾æ¡ƒ","note":"","ucode":"9FE85C34A9E9E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1116508,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","nickname":"æäº®äº®","note":"","ucode":"290907F930B261","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":114825,"discussion_content":"å—¯ï¼Œå¼•ç”¨æ•è·é‚£éƒ¨åˆ†ç†è§£æ²¡é—®é¢˜ã€‚å¼€å§‹ç–‘æƒ‘çš„æ˜¯ï¼Œæ—¢ç„¶æ˜¯å¼•ç”¨æ•è·ï¼Œmsg_åœ¨æ¯ä¸ªçº¿ç¨‹é‡Œéƒ½è¢«ä¿®æ”¹è¿‡ä¸€æ¬¡ï¼Œä½†æ˜¯ä¸¤ä¸ªçº¿ç¨‹ä¸­çš„å‡½æ•°coutçš„ä¸€æ ·ã€‚åæ¥æ˜ç™½äº†ï¼Œæ˜¯ç”±äºsleepçš„å­˜åœ¨ï¼Œä¸¤ä¸ªcout æ‰§è¡Œçš„æ—¶é—´éƒ½è¦æ¯”msg_ç¬¬äºŒæ¬¡è¢«æ›´æ–°çš„æ—¶é—´è¦æ™šï¼Œæ‰€ä»¥ä¸¤æ¬¡coutååº”çš„éƒ½æ˜¯msg_ç¬¬äºŒæ¬¡è¢«æ›´æ–°åçš„å€¼ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1577977774,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":114437,"ip_address":""},"score":114825,"extra":""}]}]},{"had_liked":false,"id":167585,"user_name":"æ³°ä¼¦å¢","can_delete":false,"product_type":"c1","uid":1141994,"ip_address":"","ucode":"FEA6B43C8D4FF9","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/ea/e03fec22.jpg","comment_is_top":false,"comment_ctime":1577868965,"is_pvip":true,"replies":[{"id":"65041","content":"ä¸ä¼šã€‚è°ˆè¿™ä¸ªçš„ä¹¦å’Œæ–‡ç« å¤Ÿå¤šäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1577873337,"ip_address":"","comment_id":167585,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577868965","product_id":100040501,"comment_content":"è¯·é—®è€å¸ˆåç»­ä¼šè®²å…³äºç±»å¯¹è±¡åŠè™šå‡½æ•°è¡¨ç›¸å…³çŸ¥è¯†å—ï¼Œè¿™å—æ¯”è¾ƒè–„å¼±","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479907,"discussion_content":"ä¸ä¼šã€‚è°ˆè¿™ä¸ªçš„ä¹¦å’Œæ–‡ç« å¤Ÿå¤šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577873337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167499,"user_name":"viper","can_delete":false,"product_type":"c1","uid":1265184,"ip_address":"","ucode":"1BD8983502436C","user_header":"https://static001.geekbang.org/account/avatar/00/13/4e/20/83151e94.jpg","comment_is_top":false,"comment_ctime":1577845177,"is_pvip":false,"replies":[{"id":"65119","content":"è°¢è°¢åé¦ˆã€‚å·²æ›´æ­£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":"1645639","ctime":1577936630,"ip_address":"","comment_id":167499,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1577845177","product_id":100040501,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆä¸Šé¢ä¼šè¯´ç”¨add_2å»è°ƒç”¨é‚£ä¸‰æ¨¡ç‰ˆå‡½æ•°è¿”å›å€¼éƒ½æ˜¯2ï¼Œä¸è¯¥æ˜¯4å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479884,"discussion_content":"è°¢è°¢åé¦ˆã€‚å·²æ›´æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577936630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1271183,"avatar":"","nickname":"nelson","note":"","ucode":"773BE75A23C1C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":113510,"discussion_content":"è¿˜æœ‰è¿”å›å€¼æ˜¯voidï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577898242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}