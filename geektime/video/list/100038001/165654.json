{"id":165654,"title":"25 | 使用断言验证预期结果","content":"<p><strong>Appium参考文档汇总与安装、课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/Geek_AppAutomationTesting\">https://gitee.com/geektime-geekbang/Geek_AppAutomationTesting</a></p>","comments":[{"had_liked":false,"id":151590,"user_name":"稻草人","can_delete":false,"product_type":"c3","uid":1719624,"ip_address":"","ucode":"4650FCAFEA96B5","user_header":"https://static001.geekbang.org/account/avatar/00/1a/3d/48/13ba578a.jpg","comment_is_top":false,"comment_ctime":1573745309,"is_pvip":false,"replies":[{"id":59221,"content":"嗯 一般都会先借助uiautomator解决一些初始问题，然后再用appium，没法同时用。同时用需要做一些改造。","user_name":"作者回复","user_name_real":"seveniruby","uid":1029333,"ctime":1574404618,"ip_address":"","comment_id":151590,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"请问老师，uiautomatorviewer和appium不能同时运行吧？同时运行会出错。","like_count":2,"discussions":[{"author":{"id":1029333,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erNI8QsCiaEX6OPqbVjAExp28Un7mamZHTbKRgiaC8VnW2ON9mv3hBibiavKQFLH1qFv2JNWibHRdwMHTQ/132","nickname":"seveniruby","note":"","ucode":"F4E4FD1E0D55B1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474546,"discussion_content":"嗯 一般都会先借助uiautomator解决一些初始问题，然后再用appium，没法同时用。同时用需要做一些改造。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574404618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168891,"user_name":"felix","can_delete":false,"product_type":"c3","uid":1565906,"ip_address":"","ucode":"9E9BB6D8D4AB86","user_header":"https://static001.geekbang.org/account/avatar/00/17/e4/d2/e168f342.jpg","comment_is_top":false,"comment_ctime":1578211362,"is_pvip":false,"replies":[{"id":66989,"content":"第一个问题是你的输入法拦截了输入，所以换成无界面的输入法就没问题了。\n\n\n第二个问题要怎么写是底层决定的。对属性的名字有约束的，我后面剖析代码的时候讲过的。\n\n第三个报错是没找到元素，说明是之前的控件定位有问题，你得查下定位问题，看下错误的代码行。可能跟前两个问题无关。\n\n","user_name":"作者回复","user_name_real":"seveniruby","uid":1029333,"ctime":1579256896,"ip_address":"","comment_id":168891,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"老师，我有3个问题，麻烦老师有空解答一下\n1.xxx.send_keys(&quot;PDD&quot;)，但是实际运行变成了“PdD”.将unicodeKeyboard设置为True就好了，为什么英文也需要设置unicode呢？\n2.我用price.get_attribute(&quot;resource-id&quot;)会报错“This element does not have the &#39;resource-id&#39; attribute”,但是用price.get_attribute(&quot;resourceId&quot;)就正常\n3.get_attribute(&quot;package&quot;)同样报错NoSuchElementException，与2一样。查找资料说是获取不到，为什么老师的是可以呢？\n环境：windows10-android9-appium v1.9.1\n代码如下\n```\n    def test_demo(self):\n        self.driver.find_element_by_id(&quot;com.xueqiu.android:id&#47;tv_search&quot;).click()\n        sleep(1)\n        self.driver.find_element_by_id(&quot;com.xueqiu.android:id&#47;search_input_text&quot;).send_keys(&quot;PDD&quot;)\n        self.driver.find_element_by_id(&quot;name&quot;).click()\n        price = self.driver.find_element_by_id(&quot;current_price&quot;)\n        assert float(price.text) &gt; 0\n        assert &quot;price&quot; in price.get_attribute(&quot;resourceId&quot;)\n\n        # 使用hamcrest 断言\n        assert_that(price.get_attribute(&quot;package&quot;), equal_to(&quot;com.xueqiu.android&quot;))\n```","like_count":1,"discussions":[{"author":{"id":1029333,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erNI8QsCiaEX6OPqbVjAExp28Un7mamZHTbKRgiaC8VnW2ON9mv3hBibiavKQFLH1qFv2JNWibHRdwMHTQ/132","nickname":"seveniruby","note":"","ucode":"F4E4FD1E0D55B1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480360,"discussion_content":"第一个问题是你的输入法拦截了输入，所以换成无界面的输入法就没问题了。\n\n\n第二个问题要怎么写是底层决定的。对属性的名字有约束的，我后面剖析代码的时候讲过的。\n\n第三个报错是没找到元素，说明是之前的控件定位有问题，你得查下定位问题，看下错误的代码行。可能跟前两个问题无关。\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579256896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2519067,"avatar":"https://static001.geekbang.org/account/avatar/00/26/70/1b/9d9a47d1.jpg","nickname":"Vae","note":"","ucode":"503A79A554739B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365072,"discussion_content":"问题2 和问题3 我也遇到了，问题2 按照楼上的方式换成 resourceId  就OK了，但是问题3还是不行，我查了下1. package //using el.get_attribute(&#34;package&#34;) failed，2. content-description //using el.get_attribute(&#34;content-description&#34;) failed， 3. long-clickable //using el.get_attribute(&#34;long-clickable&#34;) failed，4. password //using el.get_attribute(&#34;password&#34;) failed    这4个都不行，其他的都OK。不明白为啥老师的可以\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617701366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151860,"user_name":"秦时明月","can_delete":false,"product_type":"c3","uid":1626942,"ip_address":"","ucode":"164058B433D637","user_header":"https://static001.geekbang.org/account/avatar/00/18/d3/3e/0f3514c7.jpg","comment_is_top":false,"comment_ctime":1573800809,"is_pvip":false,"replies":[{"id":59219,"content":"目前没有什么开源框架，自动化框架结合集群运行机制，外加自己编写兼容性问题发现规则就可以","user_name":"作者回复","user_name_real":"seveniruby","uid":1029333,"ctime":1574404309,"ip_address":"","comment_id":151860,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"老师，我想知道，app兼容测试用什么框架实施好的","like_count":0,"discussions":[{"author":{"id":1029333,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erNI8QsCiaEX6OPqbVjAExp28Un7mamZHTbKRgiaC8VnW2ON9mv3hBibiavKQFLH1qFv2JNWibHRdwMHTQ/132","nickname":"seveniruby","note":"","ucode":"F4E4FD1E0D55B1","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474639,"discussion_content":"目前没有什么开源框架，自动化框架结合集群运行机制，外加自己编写兼容性问题发现规则就可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574404309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243392,"user_name":"Mhc测试","can_delete":false,"product_type":"c3","uid":1910801,"ip_address":"","ucode":"7B95A87CBFC92E","user_header":"https://static001.geekbang.org/account/avatar/00/1d/28/11/f5d97eb3.jpg","comment_is_top":false,"comment_ctime":1598084533,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"self.driver.find_element_by_id(&quot;com.xueqiu.android:id&#47;search_input_text&quot;).send_keys(&quot;pdd&quot;)后为什么偶尔（频率很高）会自动隐藏模糊搜索的选择框，导致self.driver.find_element_by_id(&quot;name&quot;).click()失败，中间明明没有任何操作了呀，我中间强制等待了几秒钟还是会出现同样的问题。\n","like_count":1},{"had_liked":false,"id":291751,"user_name":"智品学习-5","can_delete":false,"product_type":"c3","uid":2317608,"ip_address":"","ucode":"45DC4E35E6412C","user_header":"","comment_is_top":false,"comment_ctime":1620462841,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"请问老师，横屏状态下要怎么定位元素呢","like_count":0},{"had_liked":false,"id":227331,"user_name":"阎晓静","can_delete":false,"product_type":"c3","uid":1395937,"ip_address":"","ucode":"55DA133B3B5E4E","user_header":"https://static001.geekbang.org/account/avatar/00/15/4c/e1/814431e9.jpg","comment_is_top":false,"comment_ctime":1592358871,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"uiautomatorviewer 捕捉过程偶现提示 Error obtaining UI hierarchy. Remote object doesn&#39;t exist 是为什么呀","like_count":0},{"had_liked":false,"id":221283,"user_name":"zhangfan","can_delete":false,"product_type":"c3","uid":1966665,"ip_address":"","ucode":"3DA9240CC5C31D","user_header":"","comment_is_top":false,"comment_ctime":1590462753,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100038001,"comment_content":"请问老师 我的项目中 需要向左右滚动的需求 官方的方法只能上下滑动  请教老师一下","like_count":0}]}