{"id":103844,"title":"13 |  Javaç”Ÿäº§è€…æ˜¯å¦‚ä½•ç®¡ç†TCPè¿æ¥çš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å¤•ã€‚ä»Šå¤©æˆ‘è¦å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼šKafkaçš„Javaç”Ÿäº§è€…æ˜¯å¦‚ä½•ç®¡ç†TCPè¿æ¥çš„ã€‚</p><h2>ä¸ºä½•é‡‡ç”¨TCPï¼Ÿ</h2><p>Apache Kafkaçš„æ‰€æœ‰é€šä¿¡éƒ½æ˜¯åŸºäºTCPçš„ï¼Œè€Œä¸æ˜¯åŸºäºHTTPæˆ–å…¶ä»–åè®®ã€‚æ— è®ºæ˜¯ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ï¼Œè¿˜æ˜¯Brokerä¹‹é—´çš„é€šä¿¡éƒ½æ˜¯å¦‚æ­¤ã€‚ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆKafkaä¸ä½¿ç”¨HTTPä½œä¸ºåº•å±‚çš„é€šä¿¡åè®®å‘¢ï¼Ÿå…¶å®è¿™é‡Œé¢çš„åŸå› æœ‰å¾ˆå¤šï¼Œä½†æœ€ä¸»è¦çš„åŸå› åœ¨äºTCPå’ŒHTTPä¹‹é—´çš„åŒºåˆ«ã€‚</p><p>ä»ç¤¾åŒºçš„è§’åº¦æ¥çœ‹ï¼Œåœ¨å¼€å‘å®¢æˆ·ç«¯æ—¶ï¼Œäººä»¬èƒ½å¤Ÿåˆ©ç”¨TCPæœ¬èº«æä¾›çš„ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œæ¯”å¦‚å¤šè·¯å¤ç”¨è¯·æ±‚ä»¥åŠåŒæ—¶è½®è¯¢å¤šä¸ªè¿æ¥çš„èƒ½åŠ›ã€‚</p><p>æ‰€è°“çš„å¤šè·¯å¤ç”¨è¯·æ±‚ï¼Œå³multiplexing requestï¼Œæ˜¯æŒ‡å°†ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°æ®æµåˆå¹¶åˆ°åº•å±‚å•ä¸€ç‰©ç†è¿æ¥ä¸­çš„è¿‡ç¨‹ã€‚TCPçš„å¤šè·¯å¤ç”¨è¯·æ±‚ä¼šåœ¨ä¸€æ¡ç‰©ç†è¿æ¥ä¸Šåˆ›å»ºè‹¥å¹²ä¸ªè™šæ‹Ÿè¿æ¥ï¼Œæ¯ä¸ªè™šæ‹Ÿè¿æ¥è´Ÿè´£æµè½¬å„è‡ªå¯¹åº”çš„æ•°æ®æµã€‚å…¶å®ä¸¥æ ¼æ¥è¯´ï¼ŒTCPå¹¶ä¸èƒ½å¤šè·¯å¤ç”¨ï¼Œå®ƒåªæ˜¯æä¾›å¯é çš„æ¶ˆæ¯äº¤ä»˜è¯­ä¹‰ä¿è¯ï¼Œæ¯”å¦‚è‡ªåŠ¨é‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡ã€‚</p><p>æ›´ä¸¥è°¨åœ°è¯´ï¼Œä½œä¸ºä¸€ä¸ªåŸºäºæŠ¥æ–‡çš„åè®®ï¼ŒTCPèƒ½å¤Ÿè¢«ç”¨äºå¤šè·¯å¤ç”¨è¿æ¥åœºæ™¯çš„å‰ææ˜¯ï¼Œä¸Šå±‚çš„åº”ç”¨åè®®ï¼ˆæ¯”å¦‚HTTPï¼‰å…è®¸å‘é€å¤šæ¡æ¶ˆæ¯ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬ä»Šå¤©å¹¶ä¸æ˜¯è¦è¯¦ç»†è®¨è®ºTCPåŸç†ï¼Œå› æ­¤ä½ åªéœ€è¦çŸ¥é“è¿™æ˜¯ç¤¾åŒºé‡‡ç”¨TCPçš„ç†ç”±ä¹‹ä¸€å°±è¡Œäº†ã€‚</p><!-- [[[read_end]]] --><p>é™¤äº†TCPæä¾›çš„è¿™äº›é«˜çº§åŠŸèƒ½æœ‰å¯èƒ½è¢«Kafkaå®¢æˆ·ç«¯çš„å¼€å‘äººå‘˜ä½¿ç”¨ä¹‹å¤–ï¼Œç¤¾åŒºè¿˜å‘ç°ï¼Œç›®å‰å·²çŸ¥çš„HTTPåº“åœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­éƒ½ç•¥æ˜¾ç®€é™‹ã€‚</p><p>åŸºäºè¿™ä¸¤ä¸ªåŸå› ï¼ŒKafkaç¤¾åŒºå†³å®šé‡‡ç”¨TCPåè®®ä½œä¸ºæ‰€æœ‰è¯·æ±‚é€šä¿¡çš„åº•å±‚åè®®ã€‚</p><h2>Kafkaç”Ÿäº§è€…ç¨‹åºæ¦‚è§ˆ</h2><p>Kafkaçš„Javaç”Ÿäº§è€…APIä¸»è¦çš„å¯¹è±¡å°±æ˜¯KafkaProducerã€‚é€šå¸¸æˆ‘ä»¬å¼€å‘ä¸€ä¸ªç”Ÿäº§è€…çš„æ­¥éª¤æœ‰4æ­¥ã€‚</p><p>ç¬¬1æ­¥ï¼šæ„é€ ç”Ÿäº§è€…å¯¹è±¡æ‰€éœ€çš„å‚æ•°å¯¹è±¡ã€‚</p><p>ç¬¬2æ­¥ï¼šåˆ©ç”¨ç¬¬1æ­¥çš„å‚æ•°å¯¹è±¡ï¼Œåˆ›å»ºKafkaProducerå¯¹è±¡å®ä¾‹ã€‚</p><p>ç¬¬3æ­¥ï¼šä½¿ç”¨KafkaProducerçš„sendæ–¹æ³•å‘é€æ¶ˆæ¯ã€‚</p><p>ç¬¬4æ­¥ï¼šè°ƒç”¨KafkaProducerçš„closeæ–¹æ³•å…³é—­ç”Ÿäº§è€…å¹¶é‡Šæ”¾å„ç§ç³»ç»Ÿèµ„æºã€‚</p><p>ä¸Šé¢è¿™4æ­¥å†™æˆJavaä»£ç çš„è¯å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><pre><code>Properties props = new Properties ();\nprops.put(â€œå‚æ•°1â€, â€œå‚æ•°1çš„å€¼â€)ï¼›\nprops.put(â€œå‚æ•°2â€, â€œå‚æ•°2çš„å€¼â€)ï¼›\nâ€¦â€¦\ntry (Producer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(props)) {\n            producer.send(new ProducerRecord&lt;String, String&gt;(â€¦â€¦), callback);\n\tâ€¦â€¦\n}\n</code></pre><p>è¿™æ®µä»£ç ä½¿ç”¨äº†Java 7 æä¾›çš„try-with-resourceç‰¹æ€§ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰æ˜¾å¼è°ƒç”¨producer.close()æ–¹æ³•ã€‚æ— è®ºæ˜¯å¦æ˜¾å¼è°ƒç”¨closeæ–¹æ³•ï¼Œæ‰€æœ‰ç”Ÿäº§è€…ç¨‹åºå¤§è‡´éƒ½æ˜¯è¿™ä¸ªè·¯æ•°ã€‚</p><p>ç°åœ¨é—®é¢˜æ¥äº†ï¼Œå½“æˆ‘ä»¬å¼€å‘ä¸€ä¸ªProduceråº”ç”¨æ—¶ï¼Œç”Ÿäº§è€…ä¼šå‘Kafkaé›†ç¾¤ä¸­æŒ‡å®šçš„ä¸»é¢˜ï¼ˆTopicï¼‰å‘é€æ¶ˆæ¯ï¼Œè¿™å¿…ç„¶æ¶‰åŠä¸Kafka Brokeråˆ›å»ºTCPè¿æ¥ã€‚é‚£ä¹ˆï¼ŒKafkaçš„Producerå®¢æˆ·ç«¯æ˜¯å¦‚ä½•ç®¡ç†è¿™äº›TCPè¿æ¥çš„å‘¢ï¼Ÿ</p><h2>ä½•æ—¶åˆ›å»ºTCPè¿æ¥ï¼Ÿ</h2><p>è¦å›ç­”ä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å¼„æ˜ç™½ç”Ÿäº§è€…ä»£ç æ˜¯ä»€ä¹ˆæ—¶å€™åˆ›å»ºTCPè¿æ¥çš„ã€‚å°±ä¸Šé¢çš„é‚£æ®µä»£ç è€Œè¨€ï¼Œå¯èƒ½åˆ›å»ºTCPè¿æ¥çš„åœ°æ–¹æœ‰ä¸¤å¤„ï¼šProducer producer = new KafkaProducer(props)å’Œproducer.send(msg, callback)ã€‚ä½ è§‰å¾—è¿å‘Brokerç«¯çš„TCPè¿æ¥ä¼šæ˜¯å“ªé‡Œåˆ›å»ºçš„å‘¢ï¼Ÿå‰è€…è¿˜æ˜¯åè€…ï¼ŒæŠ‘æˆ–æ˜¯ä¸¤è€…éƒ½æœ‰ï¼Ÿè¯·å…ˆæ€è€ƒ5ç§’é’Ÿï¼Œç„¶åæˆ‘ç»™å‡ºæˆ‘çš„ç­”æ¡ˆã€‚</p><p>é¦–å…ˆï¼Œç”Ÿäº§è€…åº”ç”¨åœ¨åˆ›å»ºKafkaProducerå®ä¾‹æ—¶æ˜¯ä¼šå»ºç«‹ä¸Brokerçš„TCPè¿æ¥çš„ã€‚å…¶å®è¿™ç§è¡¨è¿°ä¹Ÿä¸æ˜¯å¾ˆå‡†ç¡®ï¼Œåº”è¯¥è¿™æ ·è¯´ï¼š<strong>åœ¨åˆ›å»ºKafkaProducerå®ä¾‹æ—¶ï¼Œç”Ÿäº§è€…åº”ç”¨ä¼šåœ¨åå°åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªåä¸ºSenderçš„çº¿ç¨‹ï¼Œè¯¥Senderçº¿ç¨‹å¼€å§‹è¿è¡Œæ—¶é¦–å…ˆä¼šåˆ›å»ºä¸Brokerçš„è¿æ¥</strong>ã€‚æˆ‘æˆªå–äº†ä¸€æ®µæµ‹è¯•ç¯å¢ƒä¸­çš„æ—¥å¿—æ¥è¯´æ˜è¿™ä¸€ç‚¹ï¼š</p><blockquote>\n<p>[2018-12-09 09:35:45,620] DEBUG [Producer clientId=producer-1] Initialize connection to node <span class=\"orange\">localhost:9093 (id: -2 rack: null) </span>for sending metadata request (org.apache.kafka.clients.NetworkClient:1084)</p>\n</blockquote><blockquote>\n<p>[2018-12-09 09:35:45,622] DEBUG [Producer clientId=producer-1] Initiating connection to node <span class=\"orange\">localhost:9093 (id: -2 rack: null) </span>using address localhost/127.0.0.1 (org.apache.kafka.clients.NetworkClient:914)</p>\n</blockquote><blockquote>\n<p>[2018-12-09 09:35:45,814] DEBUG [Producer clientId=producer-1] Initialize connection to node <span class=\"orange\">localhost:9092 (id: -1 rack: null)</span> for sending metadata request (org.apache.kafka.clients.NetworkClient:1084)</p>\n</blockquote><blockquote>\n<p>[2018-12-09 09:35:45,815] DEBUG [Producer clientId=producer-1] Initiating connection to node <span class=\"orange\">localhost:9092 (id: -1 rack: null) </span>using address localhost/127.0.0.1 (org.apache.kafka.clients.NetworkClient:914)</p>\n</blockquote><blockquote>\n<p>[2018-12-09 09:35:45,828] DEBUG [Producer clientId=producer-1] Sending metadata request (type=MetadataRequest, topics=) to node localhost:9093 (id: -2 rack: null) (org.apache.kafka.clients.NetworkClient:1068)</p>\n</blockquote><p>ä½ ä¹Ÿè®¸ä¼šé—®ï¼šæ€ä¹ˆå¯èƒ½æ˜¯è¿™æ ·ï¼Ÿå¦‚æœä¸è°ƒç”¨sendæ–¹æ³•ï¼Œè¿™ä¸ªProduceréƒ½ä¸çŸ¥é“ç»™å“ªä¸ªä¸»é¢˜å‘æ¶ˆæ¯ï¼Œå®ƒåˆæ€ä¹ˆèƒ½çŸ¥é“è¿æ¥å“ªä¸ªBrokerå‘¢ï¼Ÿéš¾ä¸æˆå®ƒä¼šè¿æ¥bootstrap.serverså‚æ•°æŒ‡å®šçš„æ‰€æœ‰Brokerå—ï¼Ÿå—¯ï¼Œæ˜¯çš„ï¼ŒJava Producerç›®å‰è¿˜çœŸæ˜¯è¿™æ ·è®¾è®¡çš„ã€‚</p><p>æˆ‘åœ¨è¿™é‡Œç¨å¾®è§£é‡Šä¸€ä¸‹bootstrap.serverså‚æ•°ã€‚å®ƒæ˜¯Producerçš„æ ¸å¿ƒå‚æ•°ä¹‹ä¸€ï¼ŒæŒ‡å®šäº†è¿™ä¸ªProducerå¯åŠ¨æ—¶è¦è¿æ¥çš„Brokeråœ°å€ã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œçš„â€œå¯åŠ¨æ—¶â€ï¼Œä»£è¡¨çš„æ˜¯Producerå¯åŠ¨æ—¶ä¼šå‘èµ·ä¸è¿™äº›Brokerçš„è¿æ¥ã€‚å› æ­¤ï¼Œå¦‚æœä½ ä¸ºè¿™ä¸ªå‚æ•°æŒ‡å®šäº†1000ä¸ªBrokerè¿æ¥ä¿¡æ¯ï¼Œé‚£ä¹ˆå¾ˆé—æ†¾ï¼Œä½ çš„Producerå¯åŠ¨æ—¶ä¼šé¦–å…ˆåˆ›å»ºä¸è¿™1000ä¸ªBrokerçš„TCPè¿æ¥ã€‚</p><p>åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¹¶ä¸å»ºè®®æŠŠé›†ç¾¤ä¸­æ‰€æœ‰çš„Brokerä¿¡æ¯éƒ½é…ç½®åˆ°bootstrap.serversä¸­ï¼Œé€šå¸¸ä½ æŒ‡å®š3ï½4å°å°±è¶³ä»¥äº†ã€‚å› ä¸ºProducerä¸€æ—¦è¿æ¥åˆ°é›†ç¾¤ä¸­çš„ä»»ä¸€å°Brokerï¼Œå°±èƒ½æ‹¿åˆ°æ•´ä¸ªé›†ç¾¤çš„Brokerä¿¡æ¯ï¼Œæ•…æ²¡å¿…è¦ä¸ºbootstrap.serversæŒ‡å®šæ‰€æœ‰çš„Brokerã€‚</p><p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¸Šé¢çš„æ—¥å¿—è¾“å‡ºï¼Œè¯·æ³¨æ„æˆ‘æ ‡ä¸ºæ©™è‰²çš„å†…å®¹ã€‚ä»è¿™æ®µæ—¥å¿—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåœ¨KafkaProducerå®ä¾‹è¢«åˆ›å»ºåä»¥åŠæ¶ˆæ¯è¢«å‘é€å‰ï¼ŒProduceråº”ç”¨å°±å¼€å§‹åˆ›å»ºä¸ä¸¤å°Brokerçš„TCPè¿æ¥äº†ã€‚å½“ç„¶äº†ï¼Œåœ¨æˆ‘çš„æµ‹è¯•ç¯å¢ƒä¸­ï¼Œæˆ‘ä¸ºbootstrap.serversé…ç½®äº†localhost:9092ã€localhost:9093æ¥æ¨¡æ‹Ÿä¸åŒçš„Brokerï¼Œä½†æ˜¯è¿™å¹¶ä¸å½±å“åé¢çš„è®¨è®ºã€‚å¦å¤–ï¼Œæ—¥å¿—è¾“å‡ºä¸­çš„æœ€åä¸€è¡Œä¹Ÿå¾ˆå…³é”®ï¼šå®ƒè¡¨æ˜Producerå‘æŸä¸€å°Brokerå‘é€äº†METADATAè¯·æ±‚ï¼Œå°è¯•è·å–é›†ç¾¤çš„å…ƒæ•°æ®ä¿¡æ¯â€”â€”è¿™å°±æ˜¯å‰é¢æåˆ°çš„Producerèƒ½å¤Ÿè·å–é›†ç¾¤æ‰€æœ‰ä¿¡æ¯çš„æ–¹æ³•ã€‚</p><p>è®²åˆ°è¿™é‡Œï¼Œæˆ‘æœ‰ä¸€äº›ä¸ªäººçš„çœ‹æ³•æƒ³è·Ÿä½ åˆ†äº«ä¸€ä¸‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘éƒ½ä¸è®¤ä¸ºç¤¾åŒºå†™çš„ä»£ç æˆ–åšçš„è®¾è®¡å°±ä¸€å®šæ˜¯å¯¹çš„ï¼Œå› æ­¤ï¼Œå¾ˆå¤šç±»ä¼¼çš„è¿™ç§â€œè´¨ç–‘â€ä¼šæ—¶ä¸æ—¶åœ°åœ¨æˆ‘è„‘å­é‡Œå†’å‡ºæ¥ã€‚</p><p>æ‹¿ä»Šå¤©çš„è¿™ä¸ªKafkaProduceråˆ›å»ºå®ä¾‹æ¥è¯´ï¼Œç¤¾åŒºçš„å®˜æ–¹æ–‡æ¡£ä¸­æåŠKafkaProducerç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æˆ‘æœ¬äººå¹¶æ²¡æœ‰è¯¦å°½åœ°å»éªŒè¯è¿‡å®ƒæ˜¯å¦çœŸçš„å°±æ˜¯thread-safeçš„ï¼Œä½†æ˜¯å¤§è‡´æµè§ˆä¸€ä¸‹æºç å¯ä»¥å¾—å‡ºè¿™æ ·çš„ç»“è®ºï¼šKafkaProducerå®ä¾‹åˆ›å»ºçš„çº¿ç¨‹å’Œå‰é¢æåˆ°çš„Senderçº¿ç¨‹å…±äº«çš„å¯å˜æ•°æ®ç»“æ„åªæœ‰RecordAccumulatorç±»ï¼Œæ•…ç»´æŠ¤äº†RecordAccumulatorç±»çš„çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿå°±å®ç°äº†KafkaProducerç±»çš„çº¿ç¨‹å®‰å…¨ã€‚</p><p>ä½ ä¸éœ€è¦äº†è§£RecordAccumulatorç±»æ˜¯åšä»€ä¹ˆçš„ï¼Œä½ åªè¦çŸ¥é“å®ƒä¸»è¦çš„æ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªConcurrentMap&lt;TopicPartition, Deque&gt;ã€‚TopicPartitionæ˜¯Kafkaç”¨æ¥è¡¨ç¤ºä¸»é¢˜åˆ†åŒºçš„Javaå¯¹è±¡ï¼Œæœ¬èº«æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚è€ŒRecordAccumulatorä»£ç ä¸­ç”¨åˆ°Dequeçš„åœ°æ–¹éƒ½æœ‰é”çš„ä¿æŠ¤ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šå¯ä»¥è®¤å®šRecordAccumulatorç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘å…¶å®æ˜¯æƒ³è¯´ï¼Œçºµç„¶KafkaProduceræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæˆ‘ä¹Ÿä¸èµåŒåˆ›å»ºKafkaProducerå®ä¾‹æ—¶å¯åŠ¨Senderçº¿ç¨‹çš„åšæ³•ã€‚å†™äº†ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®è·µã€‹çš„é‚£ä½å¸ƒèµ–æ©Â·æ ¼èŒ¨ï¼ˆBrian Goetzï¼‰å¤§ç¥ï¼Œæ˜ç¡®æŒ‡å‡ºäº†è¿™æ ·åšçš„é£é™©ï¼šåœ¨å¯¹è±¡æ„é€ å™¨ä¸­å¯åŠ¨çº¿ç¨‹ä¼šé€ æˆthisæŒ‡é’ˆçš„é€ƒé€¸ã€‚ç†è®ºä¸Šï¼ŒSenderçº¿ç¨‹å®Œå…¨èƒ½å¤Ÿè§‚æµ‹åˆ°ä¸€ä¸ªå°šæœªæ„é€ å®Œæˆçš„KafkaProducerå®ä¾‹ã€‚å½“ç„¶ï¼Œåœ¨æ„é€ å¯¹è±¡æ—¶åˆ›å»ºçº¿ç¨‹æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æœ€å¥½æ˜¯ä¸è¦åŒæ—¶å¯åŠ¨å®ƒã€‚</p><p>å¥½äº†ï¼Œæˆ‘ä»¬è¨€å½’æ­£ä¼ ã€‚é’ˆå¯¹TCPè¿æ¥ä½•æ—¶åˆ›å»ºçš„é—®é¢˜ï¼Œç›®å‰æˆ‘ä»¬çš„ç»“è®ºæ˜¯è¿™æ ·çš„ï¼š<strong>TCPè¿æ¥æ˜¯åœ¨åˆ›å»ºKafkaProducerå®ä¾‹æ—¶å»ºç«‹çš„</strong>ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æƒ³é—®çš„æ˜¯ï¼Œå®ƒåªä¼šåœ¨è¿™ä¸ªæ—¶å€™è¢«åˆ›å»ºå—ï¼Ÿ</p><p>å½“ç„¶ä¸æ˜¯ï¼<strong>TCPè¿æ¥è¿˜å¯èƒ½åœ¨ä¸¤ä¸ªåœ°æ–¹è¢«åˆ›å»ºï¼šä¸€ä¸ªæ˜¯åœ¨æ›´æ–°å…ƒæ•°æ®åï¼Œå¦ä¸€ä¸ªæ˜¯åœ¨æ¶ˆæ¯å‘é€æ—¶</strong>ã€‚ä¸ºä»€ä¹ˆè¯´æ˜¯å¯èƒ½ï¼Ÿå› ä¸ºè¿™ä¸¤ä¸ªåœ°æ–¹å¹¶éæ€»æ˜¯åˆ›å»ºTCPè¿æ¥ã€‚å½“Produceræ›´æ–°äº†é›†ç¾¤çš„å…ƒæ•°æ®ä¿¡æ¯ä¹‹åï¼Œå¦‚æœå‘ç°ä¸æŸäº›Brokerå½“å‰æ²¡æœ‰è¿æ¥ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šåˆ›å»ºä¸€ä¸ªTCPè¿æ¥ã€‚åŒæ ·åœ°ï¼Œå½“è¦å‘é€æ¶ˆæ¯æ—¶ï¼ŒProducerå‘ç°å°šä¸å­˜åœ¨ä¸ç›®æ ‡Brokerçš„è¿æ¥ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Produceræ›´æ–°é›†ç¾¤å…ƒæ•°æ®ä¿¡æ¯çš„ä¸¤ä¸ªåœºæ™¯ã€‚</p><p>åœºæ™¯ä¸€ï¼šå½“Producerå°è¯•ç»™ä¸€ä¸ªä¸å­˜åœ¨çš„ä¸»é¢˜å‘é€æ¶ˆæ¯æ—¶ï¼ŒBrokerä¼šå‘Šè¯‰Producerè¯´è¿™ä¸ªä¸»é¢˜ä¸å­˜åœ¨ã€‚æ­¤æ—¶Producerä¼šå‘é€METADATAè¯·æ±‚ç»™Kafkaé›†ç¾¤ï¼Œå»å°è¯•è·å–æœ€æ–°çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚</p><p>åœºæ™¯äºŒï¼šProduceré€šè¿‡metadata.max.age.mså‚æ•°å®šæœŸåœ°å»æ›´æ–°å…ƒæ•°æ®ä¿¡æ¯ã€‚è¯¥å‚æ•°çš„é»˜è®¤å€¼æ˜¯300000ï¼Œå³5åˆ†é’Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç®¡é›†ç¾¤é‚£è¾¹æ˜¯å¦æœ‰å˜åŒ–ï¼ŒProduceræ¯5åˆ†é’Ÿéƒ½ä¼šå¼ºåˆ¶åˆ·æ–°ä¸€æ¬¡å…ƒæ•°æ®ä»¥ä¿è¯å®ƒæ˜¯æœ€åŠæ—¶çš„æ•°æ®ã€‚</p><p>è®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥â€œæŒ‘æˆ˜â€ä¸€ä¸‹ç¤¾åŒºå¯¹Producerçš„è¿™ç§è®¾è®¡çš„åˆç†æ€§ã€‚ç›®å‰æ¥çœ‹ï¼Œä¸€ä¸ªProduceré»˜è®¤ä¼šå‘é›†ç¾¤çš„æ‰€æœ‰Brokeréƒ½åˆ›å»ºTCPè¿æ¥ï¼Œä¸ç®¡æ˜¯å¦çœŸçš„éœ€è¦ä¼ è¾“è¯·æ±‚ã€‚è¿™æ˜¾ç„¶æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚å†åŠ ä¸ŠKafkaè¿˜æ”¯æŒå¼ºåˆ¶å°†ç©ºé—²çš„TCPè¿æ¥èµ„æºå…³é—­ï¼Œè¿™å°±æ›´æ˜¾å¾—å¤šæ­¤ä¸€ä¸¾äº†ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªæœ‰ç€1000å°Brokerçš„é›†ç¾¤ä¸­ï¼Œä½ çš„Producerå¯èƒ½åªä¼šä¸å…¶ä¸­çš„3ï½5å°Brokeré•¿æœŸé€šä¿¡ï¼Œä½†æ˜¯Producerå¯åŠ¨åä¾æ¬¡åˆ›å»ºä¸è¿™1000å°Brokerçš„TCPè¿æ¥ã€‚ä¸€æ®µæ—¶é—´ä¹‹åï¼Œå¤§çº¦æœ‰995ä¸ªTCPè¿æ¥åˆè¢«å¼ºåˆ¶å…³é—­ã€‚è¿™éš¾é“ä¸æ˜¯ä¸€ç§èµ„æºæµªè´¹å—ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œæ˜¯æœ‰æ”¹å–„å’Œä¼˜åŒ–çš„ç©ºé—´çš„ã€‚</p><h2>ä½•æ—¶å…³é—­TCPè¿æ¥ï¼Ÿ</h2><p>è¯´å®Œäº†TCPè¿æ¥çš„åˆ›å»ºï¼Œæˆ‘ä»¬æ¥è¯´è¯´å®ƒä»¬ä½•æ—¶è¢«å…³é—­ã€‚</p><p>Producerç«¯å…³é—­TCPè¿æ¥çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š<strong>ä¸€ç§æ˜¯ç”¨æˆ·ä¸»åŠ¨å…³é—­ï¼›ä¸€ç§æ˜¯Kafkaè‡ªåŠ¨å…³é—­</strong>ã€‚</p><p>æˆ‘ä»¬å…ˆè¯´ç¬¬ä¸€ç§ã€‚è¿™é‡Œçš„ä¸»åŠ¨å…³é—­å®é™…ä¸Šæ˜¯å¹¿ä¹‰çš„ä¸»åŠ¨å…³é—­ï¼Œç”šè‡³åŒ…æ‹¬ç”¨æˆ·è°ƒç”¨kill -9ä¸»åŠ¨â€œæ€æ‰â€Produceråº”ç”¨ã€‚å½“ç„¶æœ€æ¨èçš„æ–¹å¼è¿˜æ˜¯è°ƒç”¨producer.close()æ–¹æ³•æ¥å…³é—­ã€‚</p><p>ç¬¬äºŒç§æ˜¯Kafkaå¸®ä½ å…³é—­ï¼Œè¿™ä¸Producerç«¯å‚æ•°connections.max.idle.msçš„å€¼æœ‰å…³ã€‚é»˜è®¤æƒ…å†µä¸‹è¯¥å‚æ•°å€¼æ˜¯9åˆ†é’Ÿï¼Œå³å¦‚æœåœ¨9åˆ†é’Ÿå†…æ²¡æœ‰ä»»ä½•è¯·æ±‚â€œæµè¿‡â€æŸä¸ªTCPè¿æ¥ï¼Œé‚£ä¹ˆKafkaä¼šä¸»åŠ¨å¸®ä½ æŠŠè¯¥TCPè¿æ¥å…³é—­ã€‚ç”¨æˆ·å¯ä»¥åœ¨Producerç«¯è®¾ç½®connections.max.idle.ms=-1ç¦æ‰è¿™ç§æœºåˆ¶ã€‚ä¸€æ—¦è¢«è®¾ç½®æˆ-1ï¼ŒTCPè¿æ¥å°†æˆä¸ºæ°¸ä¹…é•¿è¿æ¥ã€‚å½“ç„¶è¿™åªæ˜¯è½¯ä»¶å±‚é¢çš„â€œé•¿è¿æ¥â€æœºåˆ¶ï¼Œç”±äºKafkaåˆ›å»ºçš„è¿™äº›Socketè¿æ¥éƒ½å¼€å¯äº†keepaliveï¼Œå› æ­¤keepaliveæ¢æ´»æœºåˆ¶è¿˜æ˜¯ä¼šéµå®ˆçš„ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç¬¬äºŒç§æ–¹å¼ä¸­ï¼ŒTCPè¿æ¥æ˜¯åœ¨Brokerç«¯è¢«å…³é—­çš„ï¼Œä½†å…¶å®è¿™ä¸ªTCPè¿æ¥çš„å‘èµ·æ–¹æ˜¯å®¢æˆ·ç«¯ï¼Œå› æ­¤åœ¨TCPçœ‹æ¥ï¼Œè¿™å±äºè¢«åŠ¨å…³é—­çš„åœºæ™¯ï¼Œå³passive closeã€‚è¢«åŠ¨å…³é—­çš„åæœå°±æ˜¯ä¼šäº§ç”Ÿå¤§é‡çš„CLOSE_WAITè¿æ¥ï¼Œå› æ­¤Producerç«¯æˆ–Clientç«¯æ²¡æœ‰æœºä¼šæ˜¾å¼åœ°è§‚æµ‹åˆ°æ­¤è¿æ¥å·²è¢«ä¸­æ–­ã€‚</p><h2>å°ç»“</h2><p>æˆ‘ä»¬æ¥ç®€å•æ€»ç»“ä¸€ä¸‹ä»Šå¤©çš„å†…å®¹ã€‚å¯¹æœ€æ–°ç‰ˆæœ¬çš„Kafkaï¼ˆ2.1.0ï¼‰è€Œè¨€ï¼ŒJava Producerç«¯ç®¡ç†TCPè¿æ¥çš„æ–¹å¼æ˜¯ï¼š</p><ol>\n<li>KafkaProducerå®ä¾‹åˆ›å»ºæ—¶å¯åŠ¨Senderçº¿ç¨‹ï¼Œä»è€Œåˆ›å»ºä¸bootstrap.serversä¸­æ‰€æœ‰Brokerçš„TCPè¿æ¥ã€‚</li>\n<li>KafkaProducerå®ä¾‹é¦–æ¬¡æ›´æ–°å…ƒæ•°æ®ä¿¡æ¯ä¹‹åï¼Œè¿˜ä¼šå†æ¬¡åˆ›å»ºä¸é›†ç¾¤ä¸­æ‰€æœ‰Brokerçš„TCPè¿æ¥ã€‚</li>\n<li>å¦‚æœProducerç«¯å‘é€æ¶ˆæ¯åˆ°æŸå°Brokeræ—¶å‘ç°æ²¡æœ‰ä¸è¯¥Brokerçš„TCPè¿æ¥ï¼Œé‚£ä¹ˆä¹Ÿä¼šç«‹å³åˆ›å»ºè¿æ¥ã€‚</li>\n<li>å¦‚æœè®¾ç½®Producerç«¯connections.max.idle.mså‚æ•°å¤§äº0ï¼Œåˆ™æ­¥éª¤1ä¸­åˆ›å»ºçš„TCPè¿æ¥ä¼šè¢«è‡ªåŠ¨å…³é—­ï¼›å¦‚æœè®¾ç½®è¯¥å‚æ•°=-1ï¼Œé‚£ä¹ˆæ­¥éª¤1ä¸­åˆ›å»ºçš„TCPè¿æ¥å°†æ— æ³•è¢«å…³é—­ï¼Œä»è€Œæˆä¸ºâ€œåƒµå°¸â€è¿æ¥ã€‚</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/de/38/de71cc4b496a22e47b4ce079dbe99238.jpg?wh=2069*2560\" alt=\"\"></p><h2>å¼€æ”¾è®¨è®º</h2><p>å¯¹äºä»Šå¤©æˆ‘ä»¬â€œæŒ‘æˆ˜â€çš„ç¤¾åŒºè®¾è®¡ï¼Œä½ æœ‰ä»€ä¹ˆæ”¹è¿›çš„æƒ³æ³•å—ï¼Ÿ</p><p>æ¬¢è¿å†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"12 | å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ä¸å¸¸è§ä½†æ˜¯å¾ˆé«˜çº§çš„åŠŸèƒ½ï¼Ÿ","id":103397},"right":{"article_title":"14 | å¹‚ç­‰ç”Ÿäº§è€…å’Œäº‹åŠ¡ç”Ÿäº§è€…æ˜¯ä¸€å›äº‹å—ï¼Ÿ","id":103974}},"comments":[{"had_liked":false,"id":146243,"user_name":"æ³¨å®šéå‡¡","can_delete":false,"product_type":"c1","uid":1113597,"ip_address":"","ucode":"80673056E131B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","comment_is_top":false,"comment_ctime":1572482869,"is_pvip":true,"replies":[{"id":"56452","content":"æ€»ç»“å¾—ç›¸å½“å¼ºï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1572485667,"ip_address":"","comment_id":146243,"utype":1}],"discussion_count":6,"race_medal":0,"score":"186256076597","product_id":100029201,"comment_content":"Apache Kafkaçš„æ‰€æœ‰é€šä¿¡éƒ½æ˜¯åŸºäºTCPçš„ï¼Œè€Œä¸æ˜¯äºHTTPæˆ–å…¶ä»–åè®®çš„<br>1 ä¸ºä»€é‡‡ç”¨TCP?<br>ï¼ˆ1ï¼‰TCPæ‹¥æœ‰ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œå¦‚å¤šè·¯å¤ç”¨è¯·æ±‚å’ŒåŒæ—¶è½®è¯¢å¤šä¸ªè¿æ¥çš„èƒ½åŠ›ã€‚<br>\tï¼ˆ2ï¼‰å¾ˆå¤šç¼–ç¨‹è¯­è¨€çš„HTTPåº“åŠŸèƒ½ç›¸å¯¹çš„æ¯”è¾ƒç®€é™‹ã€‚<br>\t\tåè¯è§£é‡Šï¼š<br>\t\t\tå¤šè·¯å¤ç”¨è¯·æ±‚ï¼šmultiplexing requestï¼Œæ˜¯å°†ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°æ®åˆå¹¶åˆ°åº•å±‚â€”ç‰©ç†è¿æ¥ä¸­çš„è¿‡ç¨‹ã€‚TCPçš„å¤šè·¯å¤ç”¨è¯·æ±‚ä¼šåœ¨ä¸€æ¡ç‰©ç†è¿æ¥ä¸Šåˆ›å»ºè‹¥å¹²ä¸ªè™šæ‹Ÿè¿æ¥ï¼Œæ¯ä¸ªè™šæ‹Ÿè¿æ¥è´Ÿè´£æµè½¬å„è‡ªå¯¹åº”çš„æ•°æ®æµã€‚ä¸¥æ ¼è®²ï¼šTCPå¹¶ä¸èƒ½å¤šè·¯å¤ç”¨ï¼Œåªæ˜¯æä¾›å¯é çš„æ¶ˆæ¯äº¤ä»˜è¯­ä¹‰ä¿è¯ï¼Œå¦‚è‡ªåŠ¨é‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡ã€‚<br><br>2 ä½•æ—¶åˆ›å»ºTCPè¿æ¥ï¼Ÿ<br>\tï¼ˆ1ï¼‰åœ¨åˆ›å»ºKafkaProducerå®ä¾‹æ—¶ï¼Œ<br>Aï¼šç”Ÿäº§è€…åº”ç”¨ä¼šåœ¨åå°åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªåä¸ºSenderçš„çº¿ç¨‹ï¼Œè¯¥Senderçº¿ç¨‹å¼€å§‹è¿è¡Œæ—¶ï¼Œé¦–å…ˆä¼šåˆ›å»ºä¸Brokerçš„è¿æ¥ã€‚<br>Bï¼šæ­¤æ—¶ä¸çŸ¥é“è¦è¿æ¥å“ªä¸ªBrokerï¼Œkafkaä¼šé€šè¿‡METADATAè¯·æ±‚è·å–é›†ç¾¤çš„å…ƒæ•°æ®ï¼Œè¿æ¥æ‰€æœ‰çš„Brokerã€‚<br>\tï¼ˆ2ï¼‰è¿˜å¯èƒ½åœ¨æ›´æ–°å…ƒæ•°æ®åï¼Œæˆ–åœ¨æ¶ˆæ¯å‘é€æ—¶<br>3 ä½•æ—¶å…³é—­TCPè¿æ¥<br>\tï¼ˆ1ï¼‰Producerç«¯å…³é—­TCPè¿æ¥çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šç”¨æˆ·ä¸»åŠ¨å…³é—­ï¼Œæˆ–kafkaè‡ªåŠ¨å…³é—­ã€‚<br>\t\tAï¼šç”¨æˆ·ä¸»åŠ¨å…³é—­ï¼Œé€šè¿‡è°ƒç”¨producer.close()æ–¹å…³é—­ï¼Œä¹ŸåŒ…æ‹¬kill -9æš´åŠ›å…³é—­ã€‚<br>\t\tBï¼šKafkaè‡ªåŠ¨å…³é—­ï¼Œè¿™ä¸Producerç«¯å‚æ•°connection.max.idles.msçš„å€¼æœ‰å…³ï¼Œé»˜è®¤ä¸º9åˆ†é’Ÿï¼Œ9åˆ†é’Ÿå†…æ²¡æœ‰ä»»ä½•è¯·æ±‚æµè¿‡ï¼Œå°±ä¼šè¢«è‡ªåŠ¨å…³é—­ã€‚è¿™ä¸ªå‚æ•°å¯ä»¥è°ƒæ•´ã€‚<br>\t\tCï¼šç¬¬äºŒç§æ–¹å¼ä¸­ï¼ŒTCPè¿æ¥æ˜¯åœ¨Brokerç«¯è¢«å…³é—­çš„ï¼Œä½†è¿™ä¸ªè¿æ¥è¯·æ±‚æ˜¯å®¢æˆ·ç«¯å‘èµ·çš„ï¼Œå¯¹TCPè€Œè¨€è¿™æ˜¯è¢«åŠ¨çš„å…³é—­ï¼Œè¢«åŠ¨å…³é—­ä¼šäº§ç”Ÿå¤§é‡çš„CLOSE_WAITè¿æ¥ã€‚<br>","like_count":43,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472766,"discussion_content":"æ€»ç»“å¾—ç›¸å½“å¼ºï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572485667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1580046,"avatar":"https://static001.geekbang.org/account/avatar/00/18/1c/0e/f2954d1c.jpg","nickname":"hy","note":"","ucode":"7D492373043C96","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":112406,"discussion_content":"TCPè·ŸHTTPåè®®å¤„äºä¸åŒçš„å±‚çº§ï¼Œè¿™ä¸¤è€…ç›´æ¥æ¯”è¾ƒæ€»æ„Ÿè§‰æœ‰ä¸å¦¥ä¹‹å¤„å§ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577859330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2833242,"avatar":"","nickname":"Geek_cec0e4","note":"","ucode":"DEEAFAE8190EFF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532966,"discussion_content":"å”å±å•¦æ¢éå‡¡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637742599,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1017986,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/88/82/e26364d7.jpg","nickname":"ptrr","note":"","ucode":"DC093709E651E3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375066,"discussion_content":"redisé‚£è¯¾é‡Œ æ˜¯ä¸æ˜¯ä¹Ÿæœ‰ä½ ï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621473384,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2289723,"avatar":"https://static001.geekbang.org/account/avatar/00/22/f0/3b/3a142c70.jpg","nickname":"å¤§å§","note":"","ucode":"F23143AB43DDDF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352983,"discussion_content":"åˆ°ä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614936508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103208,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","nickname":"å½’é›¶","note":"","ucode":"C99B8E93009A46","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335078,"discussion_content":"èµä¸€ä¸ª\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608086362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116458,"user_name":"æ—­æ°","can_delete":false,"product_type":"c1","uid":1242099,"ip_address":"","ucode":"964603ACF81B28","user_header":"https://static001.geekbang.org/account/avatar/00/12/f3/f3/3fbb4c38.jpg","comment_is_top":false,"comment_ctime":1563852542,"is_pvip":false,"replies":[{"id":"42673","content":"å‘å®ƒè®¤ä¸ºå½“å‰è´Ÿè½½æœ€å°‘çš„èŠ‚ç‚¹å‘é€è¯·æ±‚ï¼Œæ‰€è°“è´Ÿè½½æœ€å°‘å°±æ˜¯æŒ‡æœªå®Œæˆè¯·æ±‚æ•°æœ€å°‘çš„broker","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563929711,"ip_address":"","comment_id":116458,"utype":1}],"discussion_count":4,"race_medal":0,"score":"104643067646","product_id":100029201,"comment_content":"Producer é€šè¿‡ metadata.max.age.mså®šæœŸæ›´æ–°å…ƒæ•°æ®ï¼Œåœ¨è¿æ¥å¤šä¸ªbrokerçš„æƒ…å†µä¸‹ï¼Œproduceræ˜¯å¦‚ä½•å†³å®šå‘å“ªä¸ªbrokerå‘èµ·è¯¥è¯·æ±‚ï¼Ÿ","like_count":24,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459550,"discussion_content":"å‘å®ƒè®¤ä¸ºå½“å‰è´Ÿè½½æœ€å°‘çš„èŠ‚ç‚¹å‘é€è¯·æ±‚ï¼Œæ‰€è°“è´Ÿè½½æœ€å°‘å°±æ˜¯æŒ‡æœªå®Œæˆè¯·æ±‚æ•°æœ€å°‘çš„broker","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563929711,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285580,"discussion_content":"æœªå®Œæˆçš„è¯·æ±‚ä¿å­˜åœ¨InFlightsRequestsä¸­ï¼Œç»“æ„æ˜¯Map<Node,Deque<Request>>","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1592884009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057056,"avatar":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","nickname":"ç§‹å¤©","note":"","ucode":"A7E1D953EF7E17","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532298,"discussion_content":"é‚£é—®é¢˜æ¥äº†ï¼Œå¦‚æœä¸å’Œæ‰€æœ‰çš„brokerå»ºç«‹è¿æ¥ï¼Œproduceræ˜¯æ€ä¹ˆçŸ¥é“å“ªä¸ªbrokerçš„è´Ÿè½½æœ€å°‘å‘¢ï¼Ÿè€å¸ˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637569050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":1,"child_discussions":[{"author":{"id":1807547,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKP3t4m8icCSqGkxAxNGAlorHfZm1PJY4I78EFx87MeIaO0l0Cic0RuzBicY2VkkxQIExKMqBYrsVZLA/132","nickname":"Geek_47e96c","note":"","ucode":"59FE9825C3F2A9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1057056,"avatar":"https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg","nickname":"ç§‹å¤©","note":"","ucode":"A7E1D953EF7E17","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":547747,"discussion_content":"producerçš„InFlightsRequestsä¸­ç»´æŠ¤ç€æ¯ä¸ªbrokerçš„ç­‰å¾…å›å¤æ¶ˆæ¯çš„é˜Ÿåˆ—ï¼Œæ‰€æœ‰é˜Ÿåˆ—ä¸­ç­‰å¾…å›å¤çš„æ¶ˆæ¯æ•°æœ€å°‘çš„è¿™ä¸ªé˜Ÿåˆ—æ‰€å¯¹åº”çš„brokerå°±æ˜¯è´Ÿè½½æœ€å°çš„ï¼Œå› ä¸ºç­‰å¾…æ•°é‡è¶Šå°‘è¯´æ˜brokerå¤„ç†é€Ÿåº¦è¶Šå¿«ï¼Œè´Ÿè½½è¶Šå°","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1642850369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532298,"ip_address":""},"score":547747,"extra":""}]}]},{"had_liked":false,"id":170277,"user_name":"å°é©¬","can_delete":false,"product_type":"c1","uid":1490686,"ip_address":"","ucode":"92B7ECD23BDCB5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoXW5rycAcrNTwgOvib8poPXO0zvIekIPzBZJfsnciaLPIw9Q1t3rsXeH6DR24QndpYQibvibhR1tKHPw/132","comment_is_top":false,"comment_ctime":1578559985,"is_pvip":false,"replies":[{"id":"66075","content":"å¦‚æœä½ çš„produceré•¿æ—¶é—´æ²¡æœ‰æ¶ˆæ¯éœ€è¦å‘é€ï¼ŒTCPè¿æ¥ç¡®å®ä¼šå®šæœŸå…³é—­å†é‡å»ºçš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1578619114,"ip_address":"","comment_id":170277,"utype":1}],"discussion_count":2,"race_medal":0,"score":"83182938609","product_id":100029201,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸‹ï¼š<br>Producer é€šè¿‡ metadata.max.age.ms å‚æ•°å®šæœŸåœ°å»æ›´æ–°å…ƒæ•°æ®ä¿¡æ¯ï¼Œé»˜è®¤5åˆ†é’Ÿæ›´æ–°å…ƒæ•°æ®ï¼Œå¦‚æœæ²¡å»ºç«‹TCPè¿æ¥åˆ™ä¼šåˆ›å»ºï¼Œè€Œconnections.max.idle.msé»˜è®¤9åˆ†é’Ÿä¸ä½¿ç”¨è¯¥è¿æ¥å°±ä¼šå…³é—­ã€‚é‚£å²‚ä¸æ˜¯ä¼šå¾ªç¯å¾€å¤åœ°ä¸æ–­åœ°åœ¨åˆ›å»ºå…³é—­TCPè¿æ¥äº†å—ï¼Ÿ","like_count":19,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480917,"discussion_content":"å¦‚æœä½ çš„produceré•¿æ—¶é—´æ²¡æœ‰æ¶ˆæ¯éœ€è¦å‘é€ï¼ŒTCPè¿æ¥ç¡®å®ä¼šå®šæœŸå…³é—­å†é‡å»ºçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578619114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1652895,"avatar":"https://static001.geekbang.org/account/avatar/00/19/38/9f/895353ab.jpg","nickname":"é»„å«æ±Ÿ","note":"","ucode":"0366942B81E7FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573893,"discussion_content":"æ›´æ–°å…ƒæ•°æ®åªéœ€è¿æ¥æŸä¸€ä¸ªbrokerå°±è¡Œï¼Œè€Œconnections.max.idle.mså…³é—­æ‰€æœ‰ç©ºé—²è¿æ¥ã€‚å¹¶ä¸ä¼šå¯¼è‡´å¤§æ‰¹é‡è¿æ¥å¾ªç¯é‡å»º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653716017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112584,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1419276,"ip_address":"","ucode":"FAACCA4E6D481F","user_header":"https://static001.geekbang.org/account/avatar/00/15/a8/0c/82ba8ef9.jpg","comment_is_top":false,"comment_ctime":1562765896,"is_pvip":false,"replies":[{"id":"40978","content":"topicæ•°é‡åªè¦ä¸æ˜¯å¤ªå¤šï¼Œé€šå¸¸æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚å¦‚æœå•å°brokerä¸Šåˆ†åŒºæ•°è¶…è¿‡2kï¼Œé‚£ä¹ˆå¯èƒ½è¦å…³æ³¨æ˜¯å¦ä¼šå‡ºç°æ€§èƒ½é—®é¢˜äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562804155,"ip_address":"","comment_id":112584,"utype":1}],"discussion_count":1,"race_medal":0,"score":"70282242632","product_id":100029201,"comment_content":"æœ€è¿‘åœ¨ä½¿ç”¨kafka Connectoråšæ•°æ®åŒæ­¥æœåŠ¡ï¼Œåœ¨kafkaä¸­åˆ›å»ºäº†è®¸å¤štopicï¼Œç›®å‰å¯¹kafkaäº†è§£è¿˜ä¸å¤Ÿæ·±å…¥ï¼Œä¸çŸ¥é“è¿™ä¸ªå¯¹æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“ï¼Ÿtopicçš„æ•°é‡å¤šå¤§èŒƒå›´æ¯”è¾ƒåˆé€‚ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457804,"discussion_content":"topicæ•°é‡åªè¦ä¸æ˜¯å¤ªå¤šï¼Œé€šå¸¸æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚å¦‚æœå•å°brokerä¸Šåˆ†åŒºæ•°è¶…è¿‡2kï¼Œé‚£ä¹ˆå¯èƒ½è¦å…³æ³¨æ˜¯å¦ä¼šå‡ºç°æ€§èƒ½é—®é¢˜äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562804155,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109660,"user_name":"ä½ å¥½æ—…è¡Œè€…","can_delete":false,"product_type":"c1","uid":1154101,"ip_address":"","ucode":"5C72A428DC28F3","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/35/9dc79371.jpg","comment_is_top":false,"comment_ctime":1562072975,"is_pvip":false,"replies":[{"id":"39759","content":"1. é›†ç¾¤å…ƒæ•°æ®æŒä¹…åŒ–åœ¨ZooKeeperä¸­ï¼ŒåŒæ—¶ä¹Ÿç¼“å­˜åœ¨æ¯å°Brokerçš„å†…å­˜ä¸­ï¼Œå› æ­¤ä¸éœ€è¦è¯·æ±‚ZooKeeper<br>2. å°±æˆ‘ä¸ªäººè®¤ä¸ºï¼Œçš„ç¡®æœ‰ä¸€äº›ä¸é«˜æ•ˆã€‚æ‰€ä»¥æˆ‘è¯´è¿™é‡Œæœ‰ä¼˜åŒ–çš„ç©ºé—´çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562114716,"ip_address":"","comment_id":109660,"utype":1}],"discussion_count":4,"race_medal":0,"score":"65986582415","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œçœ‹äº†ä»Šå¤©çš„æ–‡ç« æˆ‘æœ‰å‡ ä¸ªé—®é¢˜ï¼š<br><br>1.Kafkaçš„å…ƒæ•°æ®ä¿¡æ¯æ˜¯å­˜å‚¨åœ¨zookeeperä¸­çš„ï¼Œè€ŒProduceræ˜¯é€šè¿‡brokeræ¥è·å–å…ƒæ•°æ®ä¿¡æ¯çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹æ˜¯å¦æ˜¯è¿™æ ·çš„ï¼ŒProducerå‘Brokerå‘é€ä¸€ä¸ªè·å–å…ƒæ•°æ®çš„è¯·æ±‚ç»™Brokerï¼Œä¹‹åBrokerå†å‘zookeeperè¯·æ±‚è¿™ä¸ªä¿¡æ¯è¿”å›ç»™Producer?<br><br>2.å¦‚æœProduceråœ¨è·å–å®Œå…ƒæ•°æ®ä¿¡æ¯ä¹‹åè¦å’Œæ‰€æœ‰çš„Brokerå»ºç«‹è¿æ¥ï¼Œé‚£ä¹ˆå‡è®¾ä¸€ä¸ªKafkaé›†ç¾¤ä¸­æœ‰1000å°Brokerï¼Œå¯¹äºä¸€ä¸ªåªéœ€è¦ä¸5å°Brokeräº¤äº’çš„Producerï¼Œå®ƒè¿æ¥æ± ä¸­çš„é“¾æ¥æ•°é‡æ˜¯ä¸æ˜¯ä»1000-&gt;5-&gt;1000-&gt;5?è¿™æ ·ä¸æ˜¯æ˜¾å¾—éå¸¸å¾—æµªè´¹è¿æ¥æ± èµ„æºï¼Ÿ","like_count":15,"discussions":[{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366846,"discussion_content":"ä»¥å‰çš„ç‰ˆæœ¬éƒ½æ˜¯ç›´æ¥è¿æ¥zkçš„ï¼Œåé¢æ‰æ”¹ä¸ºè¿æ¥ä»»æ„ä¸€ä¸ªbrokerï¼Œå¤§æ¦‚æ˜¯ä¸ºäº†å±è”½å†…éƒ¨çš„å…ƒæ•°æ®ç®¡ç†æ–¹æ¡ˆå§ï¼Œè¯´ä¸å®šå“ªå¤©kafkaå°±å¼ƒç”¨zkäº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1618205602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2860851,"avatar":"","nickname":"Geek_e78fa5","note":"","ucode":"713677ED3B5745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539505,"discussion_content":"æœ€æ–°ç‰ˆçš„å·²ç»å¼ƒç”¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639730851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":366846,"ip_address":""},"score":539505,"extra":""}]},{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456501,"discussion_content":"1. é›†ç¾¤å…ƒæ•°æ®æŒä¹…åŒ–åœ¨ZooKeeperä¸­ï¼ŒåŒæ—¶ä¹Ÿç¼“å­˜åœ¨æ¯å°Brokerçš„å†…å­˜ä¸­ï¼Œå› æ­¤ä¸éœ€è¦è¯·æ±‚ZooKeeper\n2. å°±æˆ‘ä¸ªäººè®¤ä¸ºï¼Œçš„ç¡®æœ‰ä¸€äº›ä¸é«˜æ•ˆã€‚æ‰€ä»¥æˆ‘è¯´è¿™é‡Œæœ‰ä¼˜åŒ–çš„ç©ºé—´çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562114716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1543348,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8c/b4/318ba5ef.jpg","nickname":"OldHemp","note":"","ucode":"8F58DA0BB478F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3060,"discussion_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜ï¼Œå½“producerç¬¬ä¸€æ¬¡æ›´æ–°å…ƒæ•°æ®è¦ä¸æ‰€æœ‰çš„brokerå»ºç«‹TCPè¿æ¥ï¼Œä½†æ˜¯æœ‰äº›è¿æ¥9minåä¼šè¢«brokerä¸»åŠ¨å…³é—­ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡æ›´æ–°å…ƒæ•°æ®çš„æ—¶å€™è¿˜æ˜¯ä¼šå’Œæ‰€æœ‰çš„brokerå»ºç«‹è¿æ¥å—?æ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ªç¯çš„è¿‡ç¨‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564139302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109407,"user_name":"æŸ æª¬C","can_delete":false,"product_type":"c1","uid":1181505,"ip_address":"","ucode":"BC0EE704D952A4","user_header":"https://static001.geekbang.org/account/avatar/00/12/07/41/2d477385.jpg","comment_is_top":false,"comment_ctime":1562030273,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"65986539713","product_id":100029201,"comment_content":"åº”è¯¥å¯ä»¥ç”¨æ‡’åŠ è½½çš„æ–¹å¼ï¼Œå®é™…å‘é€æ—¶å†è¿›è¡ŒTCPè¿æ¥å§ï¼Œè™½ç„¶è¿™æ ·ç¬¬ä¸€æ¬¡å‘é€æ—¶å› ä¸ºæ¡æ‰‹çš„åŸå› ä¼šç¨æ…¢ä¸€ç‚¹","like_count":15,"discussions":[{"author":{"id":1502067,"avatar":"","nickname":"é«˜å¤§çš„éœæ¯”ç‰¹äºº","note":"","ucode":"DB855B98D78281","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538263,"discussion_content":"æ€»å¾—å¯åŠ¨çš„ã€‚ã€‚ã€‚è¿˜å¾—æ‹¿metadataå‘¢ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639387792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1339409,"avatar":"https://static001.geekbang.org/account/avatar/00/14/70/11/42cf8f9d.jpg","nickname":"chenjia","note":"","ucode":"61983C29FF4987","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366848,"discussion_content":"é‚£é¦–æ¬¡è®¿é—®å²‚ä¸æ˜¯å¾ˆæ…¢ï¼ŸæœåŠ¡é¢„çƒ­æœ¬èº«å°±æ˜¯ä¸€ä¸ªé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618205647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1186115,"avatar":"https://static001.geekbang.org/account/avatar/00/12/19/43/226ca347.jpg","nickname":"Michael ğŸ›¡YZY","note":"","ucode":"F1D2BF8489A7D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":899,"discussion_content":"è¿™æ ·åº”è¯¥ä¼šæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæˆ–è€…å¢åŠ å‚æ•°ï¼Œç”¨æ¥è°ƒèŠ‚è¿™ä¸ªå»ºç«‹è¿æ¥çš„timingï¼ŒåŒæ—¶è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562143519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1555695,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/k5OsGRHWreVATJ1tKJBrUO4s4HaeSibRia4FgcmsElibriarMZHg6ntgK6srAUsCohricBsfWRib6zAOy9cDQwzVpjicg/132","nickname":"Vince","note":"","ucode":"1D35072822C6F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1186115,"avatar":"https://static001.geekbang.org/account/avatar/00/12/19/43/226ca347.jpg","nickname":"Michael ğŸ›¡YZY","note":"","ucode":"F1D2BF8489A7D2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302904,"discussion_content":"æ‡’åŠ è½½å…¶å®ä¹Ÿå¯èƒ½å¯¹ååé‡é€ æˆä¸€å®šçš„å½±å“ï¼Œç­‰åˆ°å‘æ¶ˆæ¯æ˜¯å†å»åˆ›å»ºé“¾æ¥ï¼Œä¼šé™ä½ç”Ÿäº§æ¶ˆæ¯çš„æ•ˆç‡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599060011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":899,"ip_address":""},"score":302904,"extra":""}]}]},{"had_liked":false,"id":120511,"user_name":"è“é­”ä¸¶","can_delete":false,"product_type":"c1","uid":1219438,"ip_address":"","ucode":"2AE4359E263558","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/6e/edd2da0c.jpg","comment_is_top":false,"comment_ctime":1564920371,"is_pvip":false,"replies":[{"id":"44238","content":"é—®é¢˜åœ¨äºå®¢æˆ·ç«¯æœ‰å¯èƒ½ä¸€ç›´holdä½è¿™ä¸ªè¿æ¥å¯¼è‡´çŠ¶æ€ä¸€ç›´æ˜¯CLOSE_WAITã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯éå¸¸æ­£ç¡®çš„åšæ³•ï¼Œè‡³å°‘ç¬¦åˆTCPåè®®çš„è®¾è®¡ã€‚å½“ç„¶ï¼Œå¦‚æœå®¢æˆ·ç«¯å…³é—­äº†è¿æ¥ï¼Œå°±åƒä½ è¯´çš„ï¼ŒOSä¼šå‘èµ·FINç»™è¿œç«¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564965556,"ip_address":"","comment_id":120511,"utype":1}],"discussion_count":6,"race_medal":0,"score":"48809560627","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå¦‚æœBrokerç«¯è¢«åŠ¨å…³é—­ï¼Œä¼šå¯¼è‡´clientç«¯äº§ç”Ÿclose_waitçŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€æŒç»­ä¸€æ®µæ—¶é—´ä¹‹åï¼Œclientç«¯ä¸æ˜¯åº”è¯¥å‘ç”ŸFINå®ŒæˆTCPæ–­å¼€çš„æ­£å¸¸å››æ¬¡æ¡æ‰‹å—ï¼Ÿæ€ä¹ˆæ„Ÿè§‰è€å¸ˆè®²çš„è¿™ä¸ªFINå°±ä¸ä¼šå†å‘äº†ï¼Œå¯¼è‡´äº†åƒµå°¸è¿æ¥çš„äº§ç”Ÿï¼Ÿ","like_count":11,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461367,"discussion_content":"é—®é¢˜åœ¨äºå®¢æˆ·ç«¯æœ‰å¯èƒ½ä¸€ç›´holdä½è¿™ä¸ªè¿æ¥å¯¼è‡´çŠ¶æ€ä¸€ç›´æ˜¯CLOSE_WAITã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯éå¸¸æ­£ç¡®çš„åšæ³•ï¼Œè‡³å°‘ç¬¦åˆTCPåè®®çš„è®¾è®¡ã€‚å½“ç„¶ï¼Œå¦‚æœå®¢æˆ·ç«¯å…³é—­äº†è¿æ¥ï¼Œå°±åƒä½ è¯´çš„ï¼ŒOSä¼šå‘èµ·FINç»™è¿œç«¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564965556,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1319617,"avatar":"https://static001.geekbang.org/account/avatar/00/14/22/c1/3ba7deca.jpg","nickname":"çŒ«å“­","note":"","ucode":"17358613AABE3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85520,"discussion_content":"1.å®¢æˆ·ç«¯ç¨‹åºå†™çš„æœ‰é—®é¢˜ï¼Œæ”¶åˆ°å¯¹æ–¹brokerå‘é€çš„finåŒ…ï¼Œread()=0ä¹‹åæ²¡æœ‰å…³é—­socketçš„é€»è¾‘ï¼›2.å®¢æˆ·ç«¯cpuå¤ªå¿™æ¥ä¸åŠè°ƒåº¦ï¼Œæˆ–è€…å®¢æˆ·ç«¯åœ¨sleepç­‰é”æˆ–è€…IOæ“ä½œä¹‹ç±»çš„ï¼Œå¾—ä¸åˆ°CPUçš„åŠæ—¶è°ƒåº¦ï¼Œå®¢æˆ·ç«¯å…³é—­socketçš„æ“ä½œè¢«å»¶æ—¶æ‰§è¡Œï¼›3.å®¢æˆ·ç«¯æ”¶åˆ°brokerå‘é€çš„finåŒ…ä¹‹åï¼Œè¿™ä¸ªåªæ˜¯å…³é—­äº†brokeråˆ°å®¢æˆ·ç«¯çš„è¿æ¥ï¼ˆæ­¤æ—¶brokerä¸èƒ½å†™ï¼Œä½†æ˜¯è¿˜æ˜¯èƒ½è¯»ï¼Œä¸è¿‡è¿™ä¸ªå–å†³äºbrokeræ˜¯è°ƒç”¨çš„closeæ–¹æ³•è¿˜æ˜¯shutdownæ–¹æ³•ï¼Œå®¢æˆ·ç«¯è¿˜èƒ½å†™è¿˜èƒ½è¯»ï¼‰ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æ”¶åˆ°finåŒ…çš„åŒæ—¶ï¼Œå¦‚æœå‘é€ç¼“å†²åŒºè¿˜æœ‰å¾ˆå¤šæ•°æ®ï¼Œæ˜¯è¦ç­‰å°†å‘é€ç¼“å†²åŒºçš„æ•°æ®å‘é€ç»™brokerä¹‹åï¼Œæ‰ä¼šç»™brokerå‘é€finåŒ…ï¼Œæ­¤æœŸé—´ä¹Ÿæ˜¯close_waitçŠ¶æ€","likes_number":17,"is_delete":false,"is_hidden":false,"ctime":1576551622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1151686,"avatar":"https://static001.geekbang.org/account/avatar/00/11/92/c6/84418347.jpg","nickname":"lucas","note":"","ucode":"683A6065CD2483","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1319617,"avatar":"https://static001.geekbang.org/account/avatar/00/14/22/c1/3ba7deca.jpg","nickname":"çŒ«å“­","note":"","ucode":"17358613AABE3D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":260713,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588897072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":85520,"ip_address":""},"score":260713,"extra":""},{"author":{"id":2860851,"avatar":"","nickname":"Geek_e78fa5","note":"","ucode":"713677ED3B5745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1319617,"avatar":"https://static001.geekbang.org/account/avatar/00/14/22/c1/3ba7deca.jpg","nickname":"çŒ«å“­","note":"","ucode":"17358613AABE3D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539506,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639731246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":85520,"ip_address":""},"score":539506,"extra":""},{"author":{"id":2897143,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/34/f7/dee5feb9.jpg","nickname":"æº¯","note":"","ucode":"9E693CCB835FE0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1319617,"avatar":"https://static001.geekbang.org/account/avatar/00/14/22/c1/3ba7deca.jpg","nickname":"çŒ«å“­","note":"","ucode":"17358613AABE3D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548226,"discussion_content":"make","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643092303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":85520,"ip_address":""},"score":548226,"extra":""}]}]},{"had_liked":false,"id":109556,"user_name":"kursk.ye","can_delete":false,"product_type":"c1","uid":1015995,"ip_address":"","ucode":"9D6A3854E408F9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/bb/c0ed9d76.jpg","comment_is_top":false,"comment_ctime":1562056941,"is_pvip":false,"replies":[{"id":"39763","content":"å—¯å—¯ï¼Œæ¬¢è¿ä¸åŒæ„è§ã€‚Kafkaå¯¹äºåˆ›å»ºè¿æ¥æ²¡æœ‰åšä»»ä½•é™åˆ¶ã€‚å¦‚æœä¸€å¼€å§‹å°±åˆ›å»ºæ‰€æœ‰TCPè¿æ¥ï¼Œä¹‹åå› ä¸ºè¶…æ—¶çš„ç¼˜æ•…åˆå…³é—­è¿™äº›è¿æ¥ï¼Œå½“çœŸæ­£ä½¿ç”¨æ—¶å†æ¬¡åˆ›å»ºï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸æŠŠåˆ›å»ºæ—¶æœºåå»¶åˆ°çœŸæ­£éœ€è¦çš„æ—¶å€™å‘¢ï¼Ÿå®é™…åœºæ™¯ä¸­å°†TCPè¿æ¥è®¾ç½®ä¸ºé•¿è¿æ¥çš„æƒ…å½¢å¹¶ä¸å¤šè§ï¼Œå› æ­¤æˆ‘è¯´è¿™ç§è®¾è®¡æ˜¯å¯ä»¥æ”¹è¿›çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562115108,"ip_address":"","comment_id":109556,"utype":1}],"discussion_count":11,"race_medal":0,"score":"48806697197","product_id":100029201,"comment_content":"è¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªæœ‰ç€ 1000 å° Broker çš„é›†ç¾¤ä¸­ï¼Œä½ çš„ Producer å¯èƒ½åªä¼šä¸å…¶ä¸­çš„ 3ï½5 å° Broker é•¿æœŸé€šä¿¡ï¼Œä½†æ˜¯ Producer å¯åŠ¨åä¾æ¬¡åˆ›å»ºä¸è¿™ 1000 å° Broker çš„ TCP è¿æ¥ã€‚ä¸€æ®µæ—¶é—´ä¹‹åï¼Œå¤§çº¦æœ‰ 995 ä¸ª TCP è¿æ¥åˆè¢«å¼ºåˆ¶å…³é—­ã€‚è¿™éš¾é“ä¸æ˜¯ä¸€ç§èµ„æºæµªè´¹å—ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œæ˜¯æœ‰æ”¹å–„å’Œä¼˜åŒ–çš„ç©ºé—´çš„ã€‚<br><br>è¿™æ®µä¸æ•¢è‹ŸåŒã€‚ä½œä¸ºæ¶ˆæ¯æœåŠ¡å™¨ä¸­å›½ï¼Œè¿æ¥åº”è¯¥æ˜¯ç§å¿…è¦èµ„æºï¼Œæ‰€ä»¥éƒ¨ç½²æ—¶å°±è¯¥å……åˆ†ç»™äºˆï¼Œè€Œä¸”åˆ›å»ºè¿æ¥ä¼šæ¶ˆè€—CPU,ç”¨åˆ°æ—¶å†åˆ›å»ºä¸åˆé€‚ï¼Œæˆ‘ç”šè‡³è§‰å¾—Kafkaåº”è¯¥æœ‰è¿æ¥æ± çš„è®¾è®¡ã€‚<br><br>å¦å¤–æœ€åä¸€éƒ¨åˆ†å…³äºTCPå…³é—­ç¬¬äºŒç§æƒ…å†µï¼Œå®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯æ²¡æœ‰å…³é—­ï¼Œåªæ˜¯æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯å…³é—­äº†ï¼Œtcpæ˜¯å››æ¬¡æ–­å¼€ï¼Œå¯ä»¥å•æ–¹å‘å…³é—­ï¼Œå¦ä¸€æ–¹å‘ç»§ç»­ä¿æŒè¿æ¥","like_count":11,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456463,"discussion_content":"å—¯å—¯ï¼Œæ¬¢è¿ä¸åŒæ„è§ã€‚Kafkaå¯¹äºåˆ›å»ºè¿æ¥æ²¡æœ‰åšä»»ä½•é™åˆ¶ã€‚å¦‚æœä¸€å¼€å§‹å°±åˆ›å»ºæ‰€æœ‰TCPè¿æ¥ï¼Œä¹‹åå› ä¸ºè¶…æ—¶çš„ç¼˜æ•…åˆå…³é—­è¿™äº›è¿æ¥ï¼Œå½“çœŸæ­£ä½¿ç”¨æ—¶å†æ¬¡åˆ›å»ºï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸æŠŠåˆ›å»ºæ—¶æœºåå»¶åˆ°çœŸæ­£éœ€è¦çš„æ—¶å€™å‘¢ï¼Ÿå®é™…åœºæ™¯ä¸­å°†TCPè¿æ¥è®¾ç½®ä¸ºé•¿è¿æ¥çš„æƒ…å½¢å¹¶ä¸å¤šè§ï¼Œå› æ­¤æˆ‘è¯´è¿™ç§è®¾è®¡æ˜¯å¯ä»¥æ”¹è¿›çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562115108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1036906,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d2/6a/a9039139.jpg","nickname":"ITå°åƒ§","note":"","ucode":"4DC9B291AAD748","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":132103,"discussion_content":"å¦ä¸€æ–¹ä¸ä¼šç«‹å³å…³é—­ï¼Œä½†æ˜¯ä¼šå…³é—­ï¼Œè€Œä¸”ä¸ä¼šç»§ç»­ä¿æŒè¿æ¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578881969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":322705,"discussion_content":"å•æ–¹å…³é—­ï¼Œå¦ä¸€æ–¹ç»§ç»­ä¿æŒè¿æ¥ï¼Ÿéƒ½æ²¡ACKäº†...æ€ä¹ˆä¿æŒè¿æ¥...è¿™è¿˜å«TCPå—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604804605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1081299,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg","nickname":"Realm","note":"","ucode":"30CBEBE619D1A2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552062,"discussion_content":"ä¸€æ–¹å‘é€ FINï¼Œè¡¨ç¤ºè¿™ä¸ªè¿æ¥å¼€å§‹å…³é—­äº†ï¼ŒåŒæ–¹å°±éƒ½ä¸ä¼šå‘é€æ–°çš„æ•°æ®äº†ï¼Ÿè¿™ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„è¯¯åŒºã€‚\nå®é™…ä¸Šï¼Œä¸€æ–¹å‘é€ FIN åªæ˜¯è¡¨ç¤ºè¿™ä¸€æ–¹ä¸å†å‘é€æ–°çš„æ•°æ®ï¼Œä½†å¯¹æ–¹ä»å¯ä»¥å‘é€æ•°æ®ã€‚\nè¿˜æ˜¯åœ¨ Richard Stevens çš„ã€ŠTCP/IP è¯¦è§£ï¼ˆç¬¬ä¸€å·ï¼‰ã€‹ä¸­ï¼Œæ˜ç¡®æåˆ° TCP å¯ä»¥æœ‰â€œåŠå…³é—­â€çš„åšæ³•ï¼Œä¹Ÿå°±æ˜¯ï¼š\nä¸€ç«¯ï¼ˆAï¼‰å‘é€ FINï¼Œè¡¨ç¤ºâ€œæˆ‘è¦å…³é—­ï¼Œä¸å†å‘é€æ–°çš„æ•°æ®äº†ï¼Œä½†æˆ‘å¯ä»¥æ¥æ”¶æ–°çš„æ•°æ®â€ã€‚\nå¦ä¸€ç«¯ï¼ˆBï¼‰å¯ä»¥å›å¤ ACKï¼Œè¡¨ç¤ºâ€œæˆ‘çŸ¥é“ä½ é‚£å¤´ä¸ä¼šå†å‘é€äº†ï¼Œæˆ‘è¿™å¤´æœªå¿…å“¦â€ã€‚\nB å¯ä»¥ç»§ç»­å‘é€æ–°çš„æ•°æ®ç»™ Aï¼ŒA ä¹Ÿä¼šå›å¤ ACK è¡¨ç¤ºç¡®è®¤æ”¶åˆ°æ–°æ•°æ®ã€‚\nåœ¨å‘é€å®Œè¿™äº›æ–°æ•°æ®åï¼ŒB æ‰å¯åŠ¨äº†è‡ªå·±çš„å…³é—­è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å‘é€ FIN ç»™ Aï¼Œè¡¨ç¤ºâ€œæˆ‘çš„äº‹æƒ…ç»ˆäºå¿™å¥½äº†ï¼Œæˆ‘ä¹Ÿè¦å…³é—­ï¼Œä¸ä¼šå†å‘é€æ–°æ•°æ®äº†â€ã€‚\nè¿™æ—¶å€™æ‰æ˜¯çœŸæ­£çš„ä¸¤ç«¯éƒ½å…³é—­äº†è¿æ¥ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1645264812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":322705,"ip_address":""},"score":552062,"extra":""},{"author":{"id":2071279,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/9a/ef/6162b0e0.jpg","nickname":"Rangarok","note":"","ucode":"D13AF6E247EFCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1081299,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg","nickname":"Realm","note":"","ucode":"30CBEBE619D1A2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":575453,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654843359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":552062,"ip_address":""},"score":575453,"extra":""}]},{"author":{"id":1036906,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d2/6a/a9039139.jpg","nickname":"ITå°åƒ§","note":"","ucode":"4DC9B291AAD748","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":132099,"discussion_content":"tcpæ˜¯å››æ¬¡æ–­å¼€ï¼Œå¯ä»¥å•æ–¹å‘å…³é—­ï¼Œå¦ä¸€æ–¹å‘ç»§ç»­ä¿æŒè¿æ¥ã€‚\n\næˆ‘æƒ³çŸ¥é“ä½ è¿™ä¸ªé€»è¾‘æ˜¯å“ªé‡Œæ¥çš„ï¼Ÿç»§ç»­ä¿æŒè¿æ¥çš„æ„ä¹‰æ˜¯å•¥ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578881835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1196886,"avatar":"https://static001.geekbang.org/account/avatar/00/12/43/56/62c38c36.jpg","nickname":"æ¬§é˜³","note":"","ucode":"2612576E262813","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1036906,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d2/6a/a9039139.jpg","nickname":"ITå°åƒ§","note":"","ucode":"4DC9B291AAD748","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":228545,"discussion_content":"åŒä¸æ˜ç™½ã€‚å·¥ä½œäº†è¿™ä¹ˆå¤šå¹´ï¼Œç¬¬ä¸€æ¬¡å¬åˆ°æœ‰äººè¯´tcpå¯ä»¥ä¸€ç«¯å…³é—­ï¼Œå¦ä¸€ç«¯ç»§ç»­ä¿æŒå¯ç”¨â€¦â€¦","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1586559990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":132099,"ip_address":""},"score":228545,"extra":""},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1196886,"avatar":"https://static001.geekbang.org/account/avatar/00/12/43/56/62c38c36.jpg","nickname":"æ¬§é˜³","note":"","ucode":"2612576E262813","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":265786,"discussion_content":"åº”è¯¥æ˜¯ç†è§£å‡ºå…¥å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589439205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":228545,"ip_address":""},"score":265786,"extra":""},{"author":{"id":1503506,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f1/12/7dac30d6.jpg","nickname":"ä½ ä¸ºå•¥é‚£ä¹ˆç‰›","note":"","ucode":"1ABC604A54A8F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1196886,"avatar":"https://static001.geekbang.org/account/avatar/00/12/43/56/62c38c36.jpg","nickname":"æ¬§é˜³","note":"","ucode":"2612576E262813","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":343455,"discussion_content":"ç§°ä¹‹ä¸ºå‡è¿æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611048957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":228545,"ip_address":""},"score":343455,"extra":""}]}]},{"had_liked":false,"id":216835,"user_name":"åŠç“¶é†‹","can_delete":false,"product_type":"c1","uid":1282746,"ip_address":"","ucode":"8C898E244D0417","user_header":"https://static001.geekbang.org/account/avatar/00/13/92/ba/9833f06f.jpg","comment_is_top":false,"comment_ctime":1589352920,"is_pvip":true,"replies":[{"id":"80242","content":"æœ€æƒå¨çš„æ•°æ®ä¿å­˜åœ¨ZooKeeperä¸­ï¼ŒControllerä¼šä»ZooKeeperä¸­è¯»å–å¹¶ä¿å­˜åœ¨å®ƒè‡ªå·±çš„å†…å­˜ä¸­ï¼Œç„¶ååŒæ­¥éƒ¨åˆ†å…ƒæ•°æ®ç»™é›†ç¾¤æ‰€æœ‰Broker","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1589382473,"ip_address":"","comment_id":216835,"utype":1}],"discussion_count":2,"race_medal":0,"score":"35949091288","product_id":100029201,"comment_content":"èƒ¡å¤•è€å¸ˆï¼ŒKafkaé›†ç¾¤çš„å…ƒæ•°æ®ä¿¡æ¯æ˜¯ä¿å­˜åœ¨å“ªé‡Œçš„å‘¢ï¼Œä»¥CDHé›†ç¾¤ä¸ºä¾‹ï¼Œæˆ‘æ¯”è¾ƒèœï¼šï¼‰","like_count":8,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494963,"discussion_content":"æœ€æƒå¨çš„æ•°æ®ä¿å­˜åœ¨ZooKeeperä¸­ï¼ŒControllerä¼šä»ZooKeeperä¸­è¯»å–å¹¶ä¿å­˜åœ¨å®ƒè‡ªå·±çš„å†…å­˜ä¸­ï¼Œç„¶ååŒæ­¥éƒ¨åˆ†å…ƒæ•°æ®ç»™é›†ç¾¤æ‰€æœ‰Broker","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589382473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2860851,"avatar":"","nickname":"Geek_e78fa5","note":"","ucode":"713677ED3B5745","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":539507,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639731366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126020,"user_name":"yzh","can_delete":false,"product_type":"c1","uid":1395798,"ip_address":"","ucode":"B6C06FEB731BDC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKcGBqEZQKHjq3XaSZRLmxrCykMEotI0yKWX7RbbPZh6xTdmNRsum2YxtHv33zHGFdVqxic1pIEn8Q/132","comment_is_top":false,"comment_ctime":1566294076,"is_pvip":false,"replies":[{"id":"46649","content":"1. è¿™äº›TCPè¿æ¥åªä¼šè¢«Producerå®ä¾‹ä¸‹çš„Senderçº¿ç¨‹ä½¿ç”¨ã€‚å¤šä¸ªProducerå®ä¾‹ä¼šåˆ›å»ºå„è‡ªçš„TCPè¿æ¥<br>2. ä»é•¿æœŸæ¥çœ‹ï¼Œåªå’Œéœ€è¦äº¤äº’çš„Brokeræœ‰è¿æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566374795,"ip_address":"","comment_id":126020,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35926032444","product_id":100029201,"comment_content":"è€æ˜¯æ‚¨å¥½ï¼Œå’¨è¯¢ä¸¤ä¸ªé—®é¢˜ã€‚<br>1. Producerå®ä¾‹åˆ›å»ºå’Œç»´æŠ¤çš„tcpè¿æ¥åœ¨åº•å±‚æ˜¯å¦æ˜¯å¤šä¸ªProducerå®ä¾‹å…±äº«çš„ï¼Œè¿˜æ˜¯Jvmå†…ï¼Œå¤šä¸ªProducerå®ä¾‹ä¼šå„è‡ªç‹¬ç«‹åˆ›å»ºå’Œæ‰€æœ‰brokerçš„tcpè¿æ¥<br>2.Producerå®ä¾‹ä¼šå’Œæ‰€æœ‰brokerç»´æŒè¿æ¥ï¼Œè¿™é‡Œçš„æ‰€æœ‰ï¼Œæ˜¯æŒ‡å’Œtopicä¸‹å„ä¸ªåˆ†åŒºleaderå‰¯æœ¬æ‰€åœ¨çš„brokerè¿›è¡Œè¿æ¥çš„ï¼Œè¿˜æ˜¯æ‰€æœ‰çš„brokerï¼Œå³ä½¿è¯¥brokerä¸‹çš„æ‰€æœ‰topicåˆ†åŒºéƒ½æ˜¯flower<br>","like_count":8,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463789,"discussion_content":"1. è¿™äº›TCPè¿æ¥åªä¼šè¢«Producerå®ä¾‹ä¸‹çš„Senderçº¿ç¨‹ä½¿ç”¨ã€‚å¤šä¸ªProducerå®ä¾‹ä¼šåˆ›å»ºå„è‡ªçš„TCPè¿æ¥\n2. ä»é•¿æœŸæ¥çœ‹ï¼Œåªå’Œéœ€è¦äº¤äº’çš„Brokeræœ‰è¿æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566374795,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111098,"user_name":"ç”µå…‰ç«çŸ³","can_delete":false,"product_type":"c1","uid":1013160,"ip_address":"","ucode":"3AD33BB4AA940F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg","comment_is_top":false,"comment_ctime":1562472279,"is_pvip":false,"replies":[{"id":"40501","content":"1. ä¹Ÿä¸èƒ½è¯´æ²¡æœ‰å…³ç³»ã€‚å®¢æˆ·ç«¯éœ€è¦å’Œtopicä¸‹å„ä¸ªåˆ†åŒºleaderå‰¯æœ¬æ‰€åœ¨çš„brokerè¿›è¡Œè¿æ¥çš„<br>2. å—¯å—¯ï¼Œç›®å‰å®¢æˆ·ç«¯æ˜¯ç›´è¿brokerçš„<br>3. å…‰çœ‹æè¿°æƒ³ä¸å‡ºå…·ä½“çš„åŸå› ã€‚æœ‰å¯èƒ½æ˜¯é¢‘ç¹rebalanceã€long GCã€æ¶ˆæ¯corruptedæˆ–å¹²è„†å°±æ˜¯ä¸€ä¸ªå·²çŸ¥çš„bug","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562546346,"ip_address":"","comment_id":111098,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23037308759","product_id":100029201,"comment_content":"è°¢è°¢è€å¸ˆã€‚æœ‰å‡ ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼š<br>1. producerè¿æ¥æ˜¯æ¯ä¸ªbrokerä¸€ä¸ªè¿æ¥ï¼Œè·Ÿtopicæ²¡æœ‰å…³ç³»æ˜¯å—ï¼Ÿï¼ˆconsumerä¹Ÿæ˜¯è¿™æ ·æ˜¯å—ï¼Ÿï¼‰<br>2. æˆ‘ä»¬è¿ç»´åœ¨æ‰€æœ‰çš„brokerä¹‹å‰æ”¾äº†ä¸€ä¸ªF5åšè´Ÿè½½å‡è¡¡ï¼Œä½†å…¶å®åº”è¯¥ä¹Ÿæ²¡ç”¨ï¼Œä»–ä¼šè‡ªåŠ¨å»è·å–kafkaæ‰€æœ‰çš„brokerï¼Œç»•è¿‡è¿™ä¸ªF5ï¼Œä¸çŸ¥é“æˆ‘çš„ç†è§£æ˜¯å¦æ­£ç¡®ï¼Ÿ<br>3. åœ¨çº¿ä¸Šæˆ‘ä»¬æœ‰ä¸ªkafkaé›†ç¾¤ï¼Œå¤§æ¦‚200ä¸ªtopicï¼Œæ•°æ®ä¸æ˜¯å¾ˆå‡è¡¡ï¼Œæœ‰çš„ä¸€å¤©æ‰åå‡ mï¼Œæœ‰çš„ä¸€å¤©500Gï¼Œæˆ‘ä»¬æ˜¯æƒ³consumerè¯»å–æ‰€æœ‰çš„topicï¼Œç„¶ååé¢åšåˆ†å‘ï¼Œä½†æ˜¯consumerä¼šå¡æ­»åœ¨å“ªï¼Œä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œä¹Ÿæ²¡æœ‰æ—¥å¿—è¾“å‡ºï¼Œä¸çŸ¥é“è€å¸ˆæœ‰æ²¡æœ‰æ€è·¯å¯èƒ½æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ<br>è°¢è°¢äº†ï¼","like_count":5,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457227,"discussion_content":"1. ä¹Ÿä¸èƒ½è¯´æ²¡æœ‰å…³ç³»ã€‚å®¢æˆ·ç«¯éœ€è¦å’Œtopicä¸‹å„ä¸ªåˆ†åŒºleaderå‰¯æœ¬æ‰€åœ¨çš„brokerè¿›è¡Œè¿æ¥çš„\n2. å—¯å—¯ï¼Œç›®å‰å®¢æˆ·ç«¯æ˜¯ç›´è¿brokerçš„\n3. å…‰çœ‹æè¿°æƒ³ä¸å‡ºå…·ä½“çš„åŸå› ã€‚æœ‰å¯èƒ½æ˜¯é¢‘ç¹rebalanceã€long GCã€æ¶ˆæ¯corruptedæˆ–å¹²è„†å°±æ˜¯ä¸€ä¸ªå·²çŸ¥çš„bug","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562546346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109693,"user_name":"æ›¾è½¼éºŸ","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1562077910,"is_pvip":false,"replies":[{"id":"39756","content":"KafkaProduceræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤ç”¨æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚åªæ˜¯è¦ç›‘æ§å†…å­˜ç¼“å†²åŒºçš„ä½¿ç”¨æƒ…å†µã€‚æ¯•ç«Ÿå¦‚æœå¤šä¸ªçº¿ç¨‹éƒ½ä½¿ç”¨ä¸€ä¸ªKafkaProducerå®ä¾‹ï¼Œç¼“å†²å™¨è¢«å¡«æ»¡çš„é€Ÿåº¦ä¼šå˜å¿«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562114284,"ip_address":"","comment_id":109693,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18741947094","product_id":100029201,"comment_content":"è€å¸ˆä¸‹é¢å°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒKafkaProduceræ˜¯å»ºè®®åˆ›å»ºå®ä¾‹åå¤ç”¨ï¼Œåƒè¿æ¥æ± é‚£æ ·ä½¿ç”¨ï¼Œè¿˜æ˜¯å»ºè®®æ¯æ¬¡å‘é€æ„é€ ä¸€ä¸ªå®ä¾‹ï¼Ÿå¬å®Œè¿™è®²åæ„Ÿè§‰å“ªä¸ªéƒ½ä¸åˆç†ï¼Œæ¯æ¬¡newä¼šæœ‰å¾ˆå¤§çš„å¼€é”€ï¼Œä½†æ˜¯ä¸€æ¬¡newæ„Ÿè§‰åˆæœ‰åƒµå°¸è¿æ¥ï¼ŒKafkaProduceré€‚åˆæ± åŒ–å—ï¼Ÿè¿˜æ˜¯å»ºè®®å•ä¾‹ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456519,"discussion_content":"KafkaProduceræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤ç”¨æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚åªæ˜¯è¦ç›‘æ§å†…å­˜ç¼“å†²åŒºçš„ä½¿ç”¨æƒ…å†µã€‚æ¯•ç«Ÿå¦‚æœå¤šä¸ªçº¿ç¨‹éƒ½ä½¿ç”¨ä¸€ä¸ªKafkaProducerå®ä¾‹ï¼Œç¼“å†²å™¨è¢«å¡«æ»¡çš„é€Ÿåº¦ä¼šå˜å¿«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562114284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109444,"user_name":"å¼€æ°´","can_delete":false,"product_type":"c1","uid":1528555,"ip_address":"","ucode":"651491C38B925B","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/eb/eec719f3.jpg","comment_is_top":false,"comment_ctime":1562033308,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18741902492","product_id":100029201,"comment_content":"è§‰å¾—åˆ›å»ºkafkaProducerçš„æ—¶å€™å¯ä»¥ä¸ç”¨å»åˆ›å»ºsenderçº¿ç¨‹å»è¿æ¥brokerã€‚<br>1. ç¬¬ä¸€æ¬¡æ›´æ–°å…ƒæ•°æ®çš„æ—¶å€™ï¼Œé…ç½®ä¸€ä¸ªå¹¶å‘è¿æ¥å‚æ•°ï¼Œæ¯”å¦‚è¯´10ï¼ŒæŒ‰ç…§è¯¥è¿æ¥å‚æ•°çš„ä½™æ•°å»å’Œé…ç½®ä¸­brokerå»ºç«‹TCPè¿æ¥ã€‚<br>2. è·å–åˆ°ç›¸åº”çš„metadataä¿¡æ¯åï¼Œå†å»å’Œç›¸åº”çš„brokerè¿›è¡Œè¿æ¥ï¼Œè¿æ¥å»ºç«‹åå…³é—­æ‰æ— ç”¨çš„è¿æ¥ã€‚<br>3. æŒ‰ç…§åŸæœ‰è®¾è®¡ï¼Œå‘é€æ•°æ®æ—¶å†æ¬¡æ£€æŸ¥è¿æ¥ã€‚<br><br>è¿™æ ·å¤šä½™è¿æ¥ä¸ä¼šè¶…è¿‡10ï¼Œå¹¶ä¸”å¯é…ç½®ã€‚è€Œä¸”åœ¨æ›´æ–°metadataå’Œå‘é€æ•°æ®æ—¶è¿›è¡Œäº†è¿æ¥çš„åŒé‡ç›‘æµ‹ï¼Œä¸ç”¨è¿›è¡Œä¸‰æ¬¡ç›‘æµ‹ã€‚","like_count":4,"discussions":[{"author":{"id":1637632,"avatar":"https://static001.geekbang.org/account/avatar/00/18/fd/00/6cff1d24.jpg","nickname":"Y","note":"","ucode":"F57929C11BD34C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41117,"discussion_content":"æ— æ³•å®šä¹‰å“ªäº›é“¾æ¥æ˜¯æ— ç”¨é“¾æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572357038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1528555,"avatar":"https://static001.geekbang.org/account/avatar/00/17/52/eb/eec719f3.jpg","nickname":"å¼€æ°´","note":"","ucode":"651491C38B925B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1637632,"avatar":"https://static001.geekbang.org/account/avatar/00/18/fd/00/6cff1d24.jpg","nickname":"Y","note":"","ucode":"F57929C11BD34C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46473,"discussion_content":"å“ªå°brokerä¸Šé¢æ²¡å­˜ç›¸åº”partitionçš„å…ƒä¿¡æ¯ä¸å°±æ˜¯æ— ç”¨è¿æ¥ä¹ˆï¼Ÿè¿™ä¸ªåœ¨ç›®å‰ç‰ˆæœ¬é‡Œä¹Ÿæœ‰å®ç°å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573174080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":41117,"ip_address":""},"score":46473,"extra":""}]}]},{"had_liked":false,"id":109428,"user_name":"è¯—æ³½","can_delete":false,"product_type":"c1","uid":1031865,"ip_address":"","ucode":"F28BE01C3FD12F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/b9/f2481c2c.jpg","comment_is_top":false,"comment_ctime":1562031618,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18741900802","product_id":100029201,"comment_content":"çœ‹æ¥æ— è®ºåœ¨bootstrap.serversä¸­æ˜¯å¦å†™å…¨éƒ¨broker çš„åœ°å€æ¥ä¸‹æ¥producer è¿˜æ˜¯ä¼šè·Ÿæ‰€æœ‰çš„broker å»ºç«‹ä¸€æ¬¡è¿æ¥ğŸ˜‚","like_count":4},{"had_liked":false,"id":116666,"user_name":"Wenthkim","can_delete":false,"product_type":"c1","uid":1111515,"ip_address":"","ucode":"24F387DA17D7DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/f5/db/93d89a14.jpg","comment_is_top":false,"comment_ctime":1563887683,"is_pvip":false,"replies":[{"id":"42672","content":"ä¸ºä»€ä¹ˆè¿ä¸ä¸Šäº†å‘¢ï¼Ÿæ˜¯ulimitæ‰“æ»¡äº†å—ï¼Ÿå¦‚æœæ˜¯å¯å¦è°ƒå¤§ä¸€ä¸‹ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563929394,"ip_address":"","comment_id":116666,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14448789571","product_id":100029201,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œç›®å‰é‡åˆ°ä¸€ä¸ªæ–‡ä¸­æ‰€æçš„ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯brokerç«¯è¢«ç›´æ¥kill -9,ç„¶åäº§ç”Ÿä¸é‡çš„close_wait,å¯¼è‡´é‡å¯brokeråï¼Œproducerå’Œconsumeréƒ½è¿ä¸ä¸Šï¼Œåˆ·äº†å¤§é‡çš„æ—¥å¿—ï¼ŒæŠŠæœºå™¨ç£ç›˜ç»™åˆ·çˆ†äº†ï¼Œè¯·é—®è€å¸ˆè¿™ä¸ªé—®é¢˜æˆ‘åº”è¯¥æ€ä¹ˆå»å¤„ç†ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459630,"discussion_content":"ä¸ºä»€ä¹ˆè¿ä¸ä¸Šäº†å‘¢ï¼Ÿæ˜¯ulimitæ‰“æ»¡äº†å—ï¼Ÿå¦‚æœæ˜¯å¯å¦è°ƒå¤§ä¸€ä¸‹ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563929394,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109653,"user_name":"å´å®‡æ™¨","can_delete":false,"product_type":"c1","uid":1199968,"ip_address":"","ucode":"F8F45B7067DF6D","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/60/049a20e9.jpg","comment_is_top":false,"comment_ctime":1562071835,"is_pvip":false,"replies":[{"id":"39760","content":"Clientsç«¯æœ‰ä¸ªå‚æ•°metadata.max.age.mså¼ºåˆ¶åˆ·æ–°å…ƒæ•°æ®ï¼Œé»˜è®¤çš„ç¡®æ˜¯5åˆ†é’Ÿã€‚æ–°ç‰ˆæœ¬Clientsä¸ä¼šä¸ZooKeeperäº¤äº’ï¼Œæ‰€ä»¥æ„Ÿè§‰å’ŒZooKeeperæ²¡ä»€ä¹ˆå…³ç³»ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562114813,"ip_address":"","comment_id":109653,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14446973723","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œkafkaæ›´æ–°å…ƒæ•°æ®çš„æ–¹æ³•åªæœ‰æ¯5åˆ†é’Ÿçš„è½®è®­å—ï¼Œå¦‚æœæœ‰ç›‘æ§zkèŠ‚ç‚¹ä¹‹ç±»çš„ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æŠŠè½®è¯¢å…ƒæ•°æ®æ—¶é—´è°ƒå¤§ç”šè‡³å–æ¶ˆ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456499,"discussion_content":"Clientsç«¯æœ‰ä¸ªå‚æ•°metadata.max.age.mså¼ºåˆ¶åˆ·æ–°å…ƒæ•°æ®ï¼Œé»˜è®¤çš„ç¡®æ˜¯5åˆ†é’Ÿã€‚æ–°ç‰ˆæœ¬Clientsä¸ä¼šä¸ZooKeeperäº¤äº’ï¼Œæ‰€ä»¥æ„Ÿè§‰å’ŒZooKeeperæ²¡ä»€ä¹ˆå…³ç³»ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562114813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109426,"user_name":"KEEPUP","can_delete":false,"product_type":"c1","uid":1436576,"ip_address":"","ucode":"D0B31031E2923F","user_header":"https://static001.geekbang.org/account/avatar/00/15/eb/a0/9d294a9a.jpg","comment_is_top":false,"comment_ctime":1562031455,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"14446933343","product_id":100029201,"comment_content":"KafkaProducer å®ä¾‹åªæ˜¯åœ¨é¦–æ¬¡æ›´æ–°å…ƒæ•°æ®ä¿¡æ¯ä¹‹åï¼Œåˆ›å»ºä¸é›†ç¾¤ä¸­æ‰€æœ‰ Broker çš„ TCP è¿æ¥ï¼Œè¿˜æ˜¯æ¯æ¬¡æ›´æ–°ä¹‹åéƒ½è¦åˆ›å»ºï¼Ÿä¸ºä»€ä¹ˆè¦åˆ›å»ºä¸æ‰€æœ‰ Broker çš„è¿æ¥å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1319617,"avatar":"https://static001.geekbang.org/account/avatar/00/14/22/c1/3ba7deca.jpg","nickname":"çŒ«å“­","note":"","ucode":"17358613AABE3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":85504,"discussion_content":"ä¸æ˜¯è¿™æ ·çš„ï¼Œæ›´æ–°å…ƒæ•°æ®ä¿¡æ¯çš„æ—¶å€™ï¼Œæ˜¯æœ‰è¦æ“ä½œçš„è¯¥topicï¼Œç„¶åè¿”å›çš„å…ƒæ•°æ®ä¿¡æ¯é‡Œæœ‰è¯¥topicçš„ISRé›†åˆï¼Œåº”è¯¥æ˜¯ä¸è¿™äº›ISRé›†åˆå¯¹åº”çš„brokerå»ºç«‹è¿æ¥ã€‚è€Œä¸æ˜¯æ‰€æœ‰çš„Broker","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576550563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1319617,"avatar":"https://static001.geekbang.org/account/avatar/00/14/22/c1/3ba7deca.jpg","nickname":"çŒ«å“­","note":"","ucode":"17358613AABE3D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389754,"discussion_content":"é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629423503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":85504,"ip_address":""},"score":389754,"extra":""}]},{"author":{"id":1035562,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cd/2a/bdbed6ed.jpg","nickname":"æ— è‡æœ‹å‹","note":"","ucode":"80482C5F0464A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":813,"discussion_content":"åŒæ ·çš„ç–‘é—®ğŸ¤”ï¸","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562074625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109415,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1562030727,"is_pvip":false,"replies":[{"id":"39766","content":"å½“éœ€è¦ç”¨åˆ°è¿æ¥è€Œå‘ç°è¿æ¥ä¸å¯ç”¨çš„æ—¶å€™å°±ä¼šé‡å»ºè¿æ¥äº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562115287,"ip_address":"","comment_id":109415,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14446932615","product_id":100029201,"comment_content":"produceræ˜¯å¦ä¼šæœ‰ç±»ä¼¼äºheart beatçš„æœºåˆ¶å»æ¢æµ‹å¯èƒ½è¢«brokerå…³é—­çš„è¿æ¥ç„¶åå»ºç«‹é‡è¿å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456401,"discussion_content":"å½“éœ€è¦ç”¨åˆ°è¿æ¥è€Œå‘ç°è¿æ¥ä¸å¯ç”¨çš„æ—¶å€™å°±ä¼šé‡å»ºè¿æ¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562115287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217211,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1589441409,"is_pvip":false,"replies":[{"id":"80318","content":"ç›®å‰çš„è®¾è®¡æ˜¯ä¸ä¼šï¼Œå®ƒåªä¼šä¸éœ€è¦è®¿é—®çš„ä¸»é¢˜åˆ†åŒºæ‰€åœ¨çš„brokerå»ºç«‹è¿æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1589458593,"ip_address":"","comment_id":217211,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10179376001","product_id":100029201,"comment_content":"è¯·é—®è€å¸ˆï¼Œ<br>ç¬¬ä¸€æ¬¡åˆ›å»ºå®ä¾‹ï¼Œè·å–metadataæ•°æ®ï¼Œæ¯”å¦‚æœ‰1000ä¸ªBrokerï¼Œåˆ™ä¼šåˆ›å»º1000ä¸ªè¿æ¥å—<br>ç„¶åè·Ÿä¸å­˜åœ¨çš„ä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œä¹Ÿä¼šè·å–metadataæ•°æ®ï¼Œç„¶åä¹Ÿæ˜¯åˆ›å»º1000ä¸ªè¿æ¥å—<br>æœ€åï¼Œå®šæ—¶æ›´æ–°metadadaä¹Ÿæ˜¯ä¼šåˆ›å»º1000ä¸ªè¿æ¥å—<br><br>ç„¶åæœ€å¤§ä¿æ´»æ—¶é—´åˆåˆ é™¤æ— ç”¨çš„è¿æ¥ï¼Œæ˜¯å§ã€‚","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495079,"discussion_content":"ç›®å‰çš„è®¾è®¡æ˜¯ä¸ä¼šï¼Œå®ƒåªä¼šä¸éœ€è¦è®¿é—®çš„ä¸»é¢˜åˆ†åŒºæ‰€åœ¨çš„brokerå»ºç«‹è¿æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589458593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165427,"user_name":"å¼ ä¼¯æ¯…","can_delete":false,"product_type":"c1","uid":1099929,"ip_address":"","ucode":"E9EAF5ECFE32C7","user_header":"https://static001.geekbang.org/account/avatar/00/10/c8/99/22d2a6a7.jpg","comment_is_top":false,"comment_ctime":1577236962,"is_pvip":false,"replies":[{"id":"63192","content":"å®˜æ–¹ç»™çš„ç»éªŒï¼šï¼‰   æœ€å¥½è¿˜æ˜¯ç»“åˆè‡ªå·±å®é™…åœºæ™¯è€Œå®š","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1577322093,"ip_address":"","comment_id":165427,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10167171554","product_id":100029201,"comment_content":"æ•´ä¸ªé›†ç¾¤ topic çš„æ•°é‡æœ‰é™åˆ¶å˜›, æœ€å¤§æ˜¯å¤šå°‘ ?<br>å•å°brokerä¸Šåˆ†åŒºæ•°æœ€å¥½ä¸è¦è¶…è¿‡ 2k . è¿™ä¸ªæ˜¯æ ¹æ®ç»éªŒæ¥çš„å˜›,è¿˜æ˜¯å®˜æ–¹æœ‰æ¨è.??","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479156,"discussion_content":"å®˜æ–¹ç»™çš„ç»éªŒï¼šï¼‰   æœ€å¥½è¿˜æ˜¯ç»“åˆè‡ªå·±å®é™…åœºæ™¯è€Œå®š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577322093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124092,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1565823876,"is_pvip":false,"replies":[{"id":"45518","content":"producerä¼šå‘ä»»æ„ä¸€ä¸ªbrokerè¯·æ±‚å…ƒæ•°æ®ï¼Œå› ä¸ºæ‰€æœ‰brokeréƒ½ç¼“å­˜äº†ç›¸åŒçš„é›†ç¾¤å…ƒæ•°æ®ä¿¡æ¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565827113,"ip_address":"","comment_id":124092,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10155758468","product_id":100029201,"comment_content":"1ï¼šé›†ç¾¤ä¸­çš„ä»»æ„ä¸€å°brokeréƒ½æ‹¥æœ‰æ•´ä¸ªé›†ç¾¤çš„æ‰€æœ‰brokerçš„ä¿¡æ¯ï¼Ÿ<br>é€šè¿‡è¯„è®ºäº†è§£åˆ°ï¼Œæ‰€æœ‰çš„å…ƒæ•°æ®æ˜¯å­˜å‚¨åœ¨zookeeperé›†ç¾¤èŠ‚ç‚¹ä¸­çš„ï¼Œbrokeræ˜¯ç¼“å­˜äº†è¿™éƒ¨åˆ†ä¿¡æ¯ã€‚å…ƒæ•°æ®çŸ¥éƒ½æœ‰ä¸»é¢˜çš„ä¿¡æ¯ã€éƒ½æœ‰brokerçš„ä¿¡æ¯ã€‚<br><br>2ï¼šå‹‡æ•¢çš„è´¨ç–‘ç²¾ç¥æ˜¯ï¼Œç‹¬ç«‹æ€è€ƒçš„å‰æ<br><br>3ï¼šå½“Producer å°è¯•ç»™ä¸€ä¸ªä¸å­˜åœ¨çš„ä¸»é¢˜å‘é€æ¶ˆæ¯æ—¶ï¼ŒBroker ä¼šå‘Šè¯‰ Producer è¯´è¿™ä¸ªä¸»é¢˜ä¸å­˜åœ¨ã€‚æ­¤æ—¶ Producer ä¼šå‘é€ METADATA è¯·æ±‚ç»™ Kafka é›†ç¾¤ï¼Œå»å°è¯•è·å–æœ€æ–°çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚<br>è¿™ç§æƒ…å†µæ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Œä¸€ä¸ªä¸»é¢˜å¦‚æœä¸å­˜åœ¨ï¼Œproduceræ€ä¹ˆçŸ¥é“ç»™é‚£ä¸ªbrokerå»ºç«‹è¿æ¥ï¼Œå‘é€æ¶ˆæ¯ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463007,"discussion_content":"producerä¼šå‘ä»»æ„ä¸€ä¸ªbrokerè¯·æ±‚å…ƒæ•°æ®ï¼Œå› ä¸ºæ‰€æœ‰brokeréƒ½ç¼“å­˜äº†ç›¸åŒçš„é›†ç¾¤å…ƒæ•°æ®ä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565827113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4930,"discussion_content":"èƒ¡è€å¸ˆï¼Œæˆ‘çš„ç–‘æƒ‘æ˜¯produceræ€ä¹ˆä¼šå°è¯•ç»™ä¸€ä¸ªä¸å­˜åœ¨çš„topicå‘é€æ¶ˆæ¯ï¼Œå› ä¸ºæˆ‘ç›®å‰çš„è®¤è¯†ï¼Œæ˜¯å‡å¦‚æ²¡æœ‰topicï¼Œå°±ä¸ä¼šä¸ºå…¶åˆ†é…brokerï¼Œå‘é€æ¶ˆæ¯å¿…å®šè¦çŸ¥é“å‘ç»™é‚£ä¸ª broker çš„ï¼Ÿ\nå¯¹äºè·å–brokerçš„ä¿¡æ¯æˆ‘æ˜¯æ²¡ç–‘é—®çš„ï¼Œæ¯å°brokerä¸Šéƒ½ä¼šç¼“å­˜ä¸€ä»½æ‰€æœ‰ä¸»é¢˜åŠbrokerçš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå»ä»»æ„ä¸€å°æœºå™¨ç¡®å®å¯ä»¥æ‹¿åˆ°å¯¹äºçš„ä¿¡æ¯ã€‚\nå¦‚æœæ–¹ä¾¿è¿˜è¯·è§£ç­”ä¸€ä¸‹ï¼Œéå¸¸æ„Ÿè°¢!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565839053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1009652,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","nickname":"é’±","note":"","ucode":"2C92A243A463D4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301513,"discussion_content":"ç”Ÿäº§è¿‡ç¨‹ä¸­topicè¢«åˆ é™¤äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598542390,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4930,"ip_address":""},"score":301513,"extra":""}]}]},{"had_liked":false,"id":109945,"user_name":"Li Shunduo","can_delete":false,"product_type":"c1","uid":1222882,"ip_address":"","ucode":"6C5AB4129E9780","user_header":"https://static001.geekbang.org/account/avatar/00/12/a8/e2/f8e51df2.jpg","comment_is_top":false,"comment_ctime":1562138337,"is_pvip":false,"replies":[{"id":"39910","content":"æœ‰å¯èƒ½ï¼Œå¯èƒ½ç”¨äºä¸åŒçš„ç›®çš„ï¼Œé€šå¸¸æœ€ç»ˆä¼šæ”¶æ•›æˆä¸€ä¸ª","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562202126,"ip_address":"","comment_id":109945,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10152072929","product_id":100029201,"comment_content":"è¯·é—®Producerä¼šå’ŒåŒä¸€å°brokerå»ºç«‹å¤šä¸ªTCPè¿æ¥å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456650,"discussion_content":"æœ‰å¯èƒ½ï¼Œå¯èƒ½ç”¨äºä¸åŒçš„ç›®çš„ï¼Œé€šå¸¸æœ€ç»ˆä¼šæ”¶æ•›æˆä¸€ä¸ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562202126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109364,"user_name":"æ˜ç¿¼","can_delete":false,"product_type":"c1","uid":1068361,"ip_address":"","ucode":"E77F86BEB3D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","comment_is_top":false,"comment_ctime":1562026950,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10151961542","product_id":100029201,"comment_content":"æˆ‘çš„æƒ³æ³•è¿™æ ·çš„ï¼Œå…ˆç”¨å®¢æˆ·ç«¯å»è¿é…ç½®çš„ç¬¬ä¸€broker serverï¼Œè¿ä¸ä¸Šå°±è¿æ¥ç¬¬äºŒä¸ªï¼Œä¸€æ—¦è¿ä¸Šäº†ï¼Œå°±å¯ä»¥è·å–å…ƒæ•°æ®ä¿¡æ¯äº†ï¼Œè¿™æ˜¯åˆ›å»ºproduceå®ä¾‹æ—¶å€™åŠ¨ä½œï¼Œåªå‘èµ·ä¸€ä¸ªTCPè¿æ¥ã€‚å†sendæ—¶å€™å‘ç°æ²¡è¿æ¥çš„å†è¿æ¥ï¼Œè‡³äºå…¶ä»–çš„éƒ½è¿˜æ˜¯å¾ˆåˆç†çš„ã€‚","like_count":2},{"had_liked":false,"id":232430,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1594002907,"is_pvip":false,"replies":[{"id":"85927","content":"â€œé‡æ–°è·Ÿleaderå‰¯æœ¬æ‰€åœ¨çš„brokerèŠ‚ç‚¹å»ºç«‹è¿æ¥ï¼Ÿâ€ -- å¦‚æœè¿˜éœ€è¦å‘é€è¯·æ±‚åˆ™è¦å»ºç«‹è¿æ¥ã€‚ä¼šä¸ä¼šrebalanceä¸tcpè¿æ¥æ— å…³<br>","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1594131813,"ip_address":"","comment_id":232430,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5888970203","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæ·±å…¥æ€è€ƒğŸ¤”å†è¿½é—®ä¸‹:<br>â€œå¦‚æœæŸä¸ª Socket è¿æ¥ä¸Šè¿ç»­ 9 åˆ†é’Ÿéƒ½æ²¡æœ‰ä»»ä½•è¯·æ±‚â€œè¿‡å¢ƒâ€çš„è¯ï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…ä¼šå¼ºè¡Œâ€œæ€æ‰â€è¿™ä¸ª Socket è¿æ¥â€ï¼Œè¿™ä¸ªsocketè¿æ¥è¢«æ€æ‰åï¼Œè¿˜ä¼šé‡æ–°è·Ÿleaderå‰¯æœ¬æ‰€åœ¨çš„brokerèŠ‚ç‚¹å»ºç«‹è¿æ¥å—ï¼Ÿå¦‚æœä¼šï¼Œè¿™ä¸ªåº”è¯¥æ˜¯ä¸ä¼šreblanceå› ä¸ºè·Ÿå¿ƒè·³è¿æ¥ä¸æ˜¯åŒä¸€ä¸ªã€‚æ‰€ä»¥ï¼Œä¼šåœ¨å•¥åœºæ™¯é‡æ–°å»ºç«‹ï¼Ÿ<br>","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500641,"discussion_content":"â€œé‡æ–°è·Ÿleaderå‰¯æœ¬æ‰€åœ¨çš„brokerèŠ‚ç‚¹å»ºç«‹è¿æ¥ï¼Ÿâ€ -- å¦‚æœè¿˜éœ€è¦å‘é€è¯·æ±‚åˆ™è¦å»ºç«‹è¿æ¥ã€‚ä¼šä¸ä¼šrebalanceä¸tcpè¿æ¥æ— å…³\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594131813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194308,"user_name":"SunshineBoy","can_delete":false,"product_type":"c1","uid":1160644,"ip_address":"","ucode":"FC54CD1815CCBA","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/c4/9148b40d.jpg","comment_is_top":false,"comment_ctime":1585048599,"is_pvip":false,"replies":[{"id":"74065","content":"é•¿æœŸæ¥çœ‹ï¼Œproducerä¸Nä¸ªbrokeré€šè®¯ï¼Œé‚£ä¹ˆå°±ä¼šç»´æŒä¸è¿™Nä¸ªBrokerçš„TCPè¿æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1585096228,"ip_address":"","comment_id":194308,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5880015895","product_id":100029201,"comment_content":"å‡å¦‚broker leaderå‰¯æœ¬æœ‰100å°æœºå™¨ï¼ŒbootStrap.serversé…ç½®äº†10ä¸ªbrokeråœ°å€ï¼ŒkafkaProduceråˆ›å»ºå®ä¾‹æ—¶ï¼Œæ˜¯åˆ›å»º100ä¸ªTcpè¿æ¥è¿˜æ˜¯110ä¸ªTcpè¿æ¥ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488810,"discussion_content":"é•¿æœŸæ¥çœ‹ï¼Œproducerä¸Nä¸ªbrokeré€šè®¯ï¼Œé‚£ä¹ˆå°±ä¼šç»´æŒä¸è¿™Nä¸ªBrokerçš„TCPè¿æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585096228,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":186366,"user_name":"å’¸æ·¡ä¸€é¦–è¯—","can_delete":false,"product_type":"c1","uid":1435869,"ip_address":"","ucode":"FEE5A9B5139BF1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLl9nj9b6RydKADq82ZwOad0fQcvXWyQKk5U5RFC2kzHGI4GjIQsIZvHsEm7mFELgMiaGx3lGq9vag/132","comment_is_top":false,"comment_ctime":1583830585,"is_pvip":false,"replies":[{"id":"72115","content":"è¿™ä¸ªé”™è¯¯å¤šæ˜¯ç½‘ç»œåŸå› å¯¼è‡´çš„ï¼Œå¦‚æœæ˜¯ç¬æ—¶é”™è¯¯å¯ä»¥ä¸ç”¨ç†ä¼šï¼Œå¦‚æœæŒç»­æŠ›è¿™ä¸ªé”™è¯¯é‚£ä¹ˆéœ€è¦è¿›ä¸€æ­¥çœ‹æ˜¯ä»€ä¹ˆåŸå› äº†å¯¼è‡´çš„äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1583976032,"ip_address":"","comment_id":186366,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5878797881","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆé—®ä¸€ä¸ªé—®é¢˜ï¼Œproducer å¼‚æ­¥å‘é€æ•°æ®æ—¶æŠ¥è¿™ä¸ªé”™ï¼š The server disconnected before a response was receivedï¼Œæƒ³é—®ä¸€ä¸‹è¿™ä¸ªå¯èƒ½å¯¼è‡´çš„åŸå› ä»¥åŠè§£å†³åŠæ³•ï¼Œkafkaç‰ˆæœ¬æ˜¯0.10.1.1ï¼Œè°¢è°¢è€å¸ˆã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486729,"discussion_content":"è¿™ä¸ªé”™è¯¯å¤šæ˜¯ç½‘ç»œåŸå› å¯¼è‡´çš„ï¼Œå¦‚æœæ˜¯ç¬æ—¶é”™è¯¯å¯ä»¥ä¸ç”¨ç†ä¼šï¼Œå¦‚æœæŒç»­æŠ›è¿™ä¸ªé”™è¯¯é‚£ä¹ˆéœ€è¦è¿›ä¸€æ­¥çœ‹æ˜¯ä»€ä¹ˆåŸå› äº†å¯¼è‡´çš„äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583976032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301514,"discussion_content":"æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒé‡åˆ°è¿‡è¿™ä¸ªé”™è¯¯ï¼Œæ˜¯ç©ºé—²è¿æ¥è¶…æ—¶ï¼Œkafkaä¸»åŠ¨æ–­å¼€äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598542588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181216,"user_name":"HZ","can_delete":false,"product_type":"c1","uid":1371862,"ip_address":"","ucode":"883D79CEEA9C66","user_header":"https://static001.geekbang.org/account/avatar/00/14/ee/d6/0142c3a3.jpg","comment_is_top":false,"comment_ctime":1582519994,"is_pvip":false,"replies":[{"id":"70341","content":"å¹¶ä¸ä¼šä¸æ‰€æœ‰brokerå»ºç«‹TCPè¿æ¥å»è·å–å…ƒæ•°æ®ã€‚éšæœºæ‰¾ä¸€ä¸ªbrokerå»è·å–çš„~<br>","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1582593607,"ip_address":"","comment_id":181216,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5877487290","product_id":100029201,"comment_content":"è€å¸ˆ æœ‰ä¸€ç‚¹ä¸æ˜ç™½ï¼Œä¸ºä»€ä¹ˆæ›´æ–°å…ƒæ•°æ®éœ€è¦å’Œæ‰€æœ‰çš„brokerå»ºç«‹ tcp è¿æ¥å‘¢ï¼Ÿ æˆ‘æ„Ÿè§‰åº”è¯¥ä»…ä»…æ˜¯controlleræˆ–è€…æŸä¸ªbrokerå§ã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484961,"discussion_content":"å¹¶ä¸ä¼šä¸æ‰€æœ‰brokerå»ºç«‹TCPè¿æ¥å»è·å–å…ƒæ•°æ®ã€‚éšæœºæ‰¾ä¸€ä¸ªbrokerå»è·å–çš„~\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582593607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1344289,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEYbNElGIxY6Le1rfiakWJecz8JIOp06Y9JQFR2YBn3T3gx3icI5CKxZNgxgqiaKbfVOicXquO3QBw9w/132","nickname":"july","note":"","ucode":"E081987929063A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":232240,"discussion_content":"ä½ å¥½ï¼Œå¤§ç‰›ï¼ŒProduceræ›´æ–°å…ƒæ•°æ®ä¿¡æ¯åä¼šå’Œæ‰€æœ‰çš„brokerè¿›è¡Œè¿æ¥ï¼Œç„¶åæ²¡æœ‰æ•°æ®äº¤äº’ï¼Œè¿æ¥ä¼šè¢«kafkaå…³é—­ï¼Œç„¶åProducerä¸€æ®µæ—¶é—´åˆä¼šæ›´æ–°å…ƒæ•°æ®ï¼Œæ­¤æ—¶Producerè¿˜é‡æ–°å»ºç«‹ä¸é‚£äº›æ›¾ç»è¿è¿‡çš„ä½†æ˜¯æ–­å¼€äº†çš„brokerçš„è¿æ¥å—ï¼Ÿå¦‚æœæ–°çš„å…ƒæ•°æ®ä¸­åŒ…å«äº†æ–°åŠ å…¥çš„brokerçš„è¯ï¼ŒProducerä¼šä¸å…¶å»ºç«‹è¿æ¥å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586862562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128346,"user_name":"cgddw","can_delete":false,"product_type":"c1","uid":1316424,"ip_address":"","ucode":"621E250BC49C28","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLHKka9hn8hYyd7SD12PEYiazRKg2a5iaFibP7z13t9ARicUvbwItESpIYONxV6gHMFYTmdp4eGZ4YDsA/132","comment_is_top":false,"comment_ctime":1566872908,"is_pvip":false,"replies":[{"id":"47602","content":"å¯èƒ½æœ‰å¾ˆå¤šclientsç«¯è¿æ¥è¿‡è¯¥brokerï¼Œè€Œclientsåˆéƒ½æ²¡æœ‰æ­£å¸¸å…³é—­æ‰€è‡´","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566879709,"ip_address":"","comment_id":128346,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5861840204","product_id":100029201,"comment_content":"brokeræœ‰å¾ˆå¤štime_waitç«¯å£ï¼Œç”šè‡³æ¯”establishedå¤šï¼Œè¿™æ˜¯ä»€ä¹ˆæƒ…å†µ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464909,"discussion_content":"å¯èƒ½æœ‰å¾ˆå¤šclientsç«¯è¿æ¥è¿‡è¯¥brokerï¼Œè€Œclientsåˆéƒ½æ²¡æœ‰æ­£å¸¸å…³é—­æ‰€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566879709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1439908,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/IPdZZXuHVMibwfZWmm7NiawzeEFGsaRoWjhuN99iaoj5amcRkiaOePo6rH1KJ3jictmNlic4OibkF4I20vOGfwDqcBxfA/132","nickname":"é±¼å‘åŒ—æ¸¸","note":"","ucode":"580EC7DCE57E9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32259,"discussion_content":"è¿™ä¸ªé—®é¢˜æˆ‘å’Œè€å¸ˆçš„è§‚ç‚¹ä¸åŒï¼Œtimewaitä¼šç­‰2mslæ—¶é—´ï¼Œè§„èŒƒä¸Šæ˜¯2minï¼Œlinuxå®ç°åº”è¯¥æ˜¯30sï¼Œç­‰å®Œè¿™ä¸ªæ—¶é—´ï¼Œtcpæ‰ä¼šå®Œå…¨å…³é—­ï¼Œä¸€èˆ¬ç³»ç»Ÿå‚æ•°éƒ½ä¼šå¼€å¯timewaitçš„ç«¯å£å¤ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571020014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124331,"user_name":"ä¸½å„¿","can_delete":false,"product_type":"c1","uid":1386917,"ip_address":"","ucode":"3804ACF2C1D8A3","user_header":"https://static001.geekbang.org/account/avatar/00/15/29/a5/9c6e7526.jpg","comment_is_top":false,"comment_ctime":1565861745,"is_pvip":false,"replies":[{"id":"45633","content":"ä¸€èˆ¬å…ˆéšæœºé€‰ä¸€ä¸ªbrokerè·å–åˆ°æ‰€æœ‰é›†ç¾¤ä¿¡æ¯ï¼Œç„¶åå†æœ‰é’ˆå¯¹æ€§åœ°è¿æ¥ç‰¹å®šçš„broker","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565875660,"ip_address":"","comment_id":124331,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860829041","product_id":100029201,"comment_content":"è¯·é—®ä¸€ä¸‹è€å¸ˆå®¢æˆ·ç«¯æ˜¯æ€ä¹ˆé€‰æ‹©brokerçš„","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463119,"discussion_content":"ä¸€èˆ¬å…ˆéšæœºé€‰ä¸€ä¸ªbrokerè·å–åˆ°æ‰€æœ‰é›†ç¾¤ä¿¡æ¯ï¼Œç„¶åå†æœ‰é’ˆå¯¹æ€§åœ°è¿æ¥ç‰¹å®šçš„broker","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565875660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119731,"user_name":"ç›˜å°¼è¥¿æ—","can_delete":false,"product_type":"c1","uid":1197347,"ip_address":"","ucode":"B59569FC25144F","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/23/28311447.jpg","comment_is_top":false,"comment_ctime":1564666905,"is_pvip":false,"replies":[{"id":"43963","content":"å—¯å—¯ï¼Œé›†ç¾¤ä¸­æ‰€æœ‰ä¸»é¢˜ä¿¡æ¯ã€æ‰€æœ‰brokerä¿¡æ¯ç­‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564707912,"ip_address":"","comment_id":119731,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5859634201","product_id":100029201,"comment_content":"é—®ä¸€ä¸‹å…ƒæ•°æ®å…·ä½“æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿå­˜æ”¾åœ¨brokerç«¯çš„ç»´æŠ¤topicçš„ä¿¡æ¯çš„å…ƒæ•°æ®ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461043,"discussion_content":"å—¯å—¯ï¼Œé›†ç¾¤ä¸­æ‰€æœ‰ä¸»é¢˜ä¿¡æ¯ã€æ‰€æœ‰brokerä¿¡æ¯ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564707912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119508,"user_name":"è¡Œåˆ™å°†è‡³","can_delete":false,"product_type":"c1","uid":1542987,"ip_address":"","ucode":"DB972F2DF059C4","user_header":"https://static001.geekbang.org/account/avatar/00/17/8b/4b/fa52d222.jpg","comment_is_top":false,"comment_ctime":1564620446,"is_pvip":false,"replies":[{"id":"43870","content":"æˆ‘å»ºè®®ç›´æ¥ä½¿ç”¨kafkaè‡ªå·±åŸç”Ÿçš„api","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564627803,"ip_address":"","comment_id":119508,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5859587742","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½œä¸ºkafkaçš„åˆå­¦è€…æ¥è¯´ã€‚æ‚¨å»ºè®®ä½¿ç”¨kafkaçš„åŸç”ŸAPIç»ƒä¹ æ–‡ä¸­demoï¼Œè¿˜æ˜¯ä½¿ç”¨è¢«å…¶ä»–æ¡†æ¶æ•´åˆçš„kafkaç»ƒä¹ ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460935,"discussion_content":"æˆ‘å»ºè®®ç›´æ¥ä½¿ç”¨kafkaè‡ªå·±åŸç”Ÿçš„api","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564627803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111793,"user_name":"é‡‘å°ç’","can_delete":false,"product_type":"c1","uid":1443031,"ip_address":"","ucode":"2B0B3BC55CA147","user_header":"https://static001.geekbang.org/account/avatar/00/16/04/d7/fa5583e5.jpg","comment_is_top":false,"comment_ctime":1562601021,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5857568317","product_id":100029201,"comment_content":"tcpå’Œhttpè¿™éƒ¨åˆ†çš„è§£é‡Šè§‰å¾—æœ‰ç‚¹æ€ªã€‚å¤šè·¯å¤ç”¨ä¸æ˜¯tcpåè®®æ ˆç‰¹æ€§ï¼Œè€Œä¸”httpä¹Ÿèƒ½åšå¤šè·¯å¤ç”¨ï¼ˆå¦‚spdyï¼‰ï¼Œä¸èƒ½ç®—ä½œé€‰å‹åŸå› ã€‚httpæ˜¯åŸºäºtcpåè®®ä¹‹ä¸Šçš„ï¼Œæˆ‘ç†è§£å¦‚æœä¸éœ€è¦httpåè®®ç‰¹å¾ï¼Œé‚£é€‰tcpä¸€å®šæ¯”é€‰httpå¥½ï¼Œæ¯•ç«Ÿå°‘äº†ä¸€å±‚åè®®æ ˆè§£æå‘€ï½","like_count":1,"discussions":[{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383842,"discussion_content":"TCPå¤šè·¯å¤ç”¨è¿™é‡Œæˆ‘ä¹Ÿæ²¡çœ‹æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626251519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110301,"user_name":"ç‡ƒçƒ§çš„Mè±†","can_delete":false,"product_type":"c1","uid":1355000,"ip_address":"","ucode":"BEDA9FC8852F5D","user_header":"https://static001.geekbang.org/account/avatar/00/14/ac/f8/a56b7475.jpg","comment_is_top":false,"comment_ctime":1562226255,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857193551","product_id":100029201,"comment_content":"c åŒ…åœ¨v1.0.0 å·²ç»å¯¹è¿™ä¸ªé—®é¢˜é‡‡å–äº†å¯¹ç­–ã€‚æ‰€æœ‰ä½¿ç”¨åŸºç¡€ c åŒ… librdkafka éƒ½å› æ­¤å—ç›Š<br><br>Sparse connections<br>In previous releases librdkafka would maintain open connections to all<br>brokers in the cluster and the bootstrap servers.<br><br>With this release librdkafka now connects to a single bootstrap server<br>to retrieve the full broker list, and then connects to the brokers<br>it needs to communicate with: partition leaders, group coordinators, etc.<br><br>For large scale deployments this greatly reduces the number of connections<br>between clients and brokers, and avoids the repeated idle connection closes<br>for unused connections.<br><br>Sparse connections is on by default (recommended setting), the old<br>behavior of connecting to all brokers in the cluster can be re-enabled<br>by setting enable.sparse.connections=false.<br><br>See Sparse connections in the manual for more information.<br><br>Original issue librdkafka #825.<br><br>ä¸ºå•¥ java ç›®å‰è¿˜æ˜¯è¿™æ ·æˆ–è€…ä¸€å·²ç»å¼€å§‹åŠ¨æ‰‹ä¿®æ”¹äº†ï¼Ÿ- -æœ‰ç‚¹æ— æ³•ç†è§£ã€‚","like_count":1},{"had_liked":false,"id":110264,"user_name":"JoeyLi666","can_delete":false,"product_type":"c1","uid":1564463,"ip_address":"","ucode":"734864661E4BE0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJZCkGPSOcvucpfLqRP3aqp3qRpwJKyzjNms4jMwibIkxpjiaszqiazSItCeo3IxqQSFvMDh66XaJ2zw/132","comment_is_top":false,"comment_ctime":1562217170,"is_pvip":false,"replies":[{"id":"40149","content":"ä¹Ÿå¯èƒ½æ˜¯ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°çš„å¶å‘æƒ…å†µï¼Œé€šå¸¸æ²¡æœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562287014,"ip_address":"","comment_id":110264,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5857184466","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæœ€è¿‘ä½¿ç”¨kakfaï¼ŒæŠ¥äº†ä¸ªå¼‚å¸¸ï¼š<br>Caused by: org.apache.kafka.common.KafkaException: Record batch for partition Notify-18 at offset 1803009 is invalid, cause: Record is corrupt (stored crc = 3092077514, computed crc = 2775748463)<br>kafkaçš„æ•°æ®è¿˜ä¼šæŸåï¼Œä¸æ˜¯æœ‰æ ¡éªŒå—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456792,"discussion_content":"ä¹Ÿå¯èƒ½æ˜¯ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°çš„å¶å‘æƒ…å†µï¼Œé€šå¸¸æ²¡æœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562287014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1564463,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJZCkGPSOcvucpfLqRP3aqp3qRpwJKyzjNms4jMwibIkxpjiaszqiazSItCeo3IxqQSFvMDh66XaJ2zw/132","nickname":"JoeyLi666","note":"","ucode":"734864661E4BE0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1195,"discussion_content":"è€å¸ˆï¼Œé‚£é’ˆå¯¹è¿™ä¸ªå¼‚å¸¸ï¼Œéœ€è¦å¯¹consume.poll()åŠ try-catchï¼Œç„¶åæ‰‹åŠ¨commitæ‰è¿™æ¡æ¶ˆæ¯ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562389515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109993,"user_name":"å—è¾•åŒ—è¾™","can_delete":false,"product_type":"c1","uid":1214502,"ip_address":"","ucode":"03EC406AE0D591","user_header":"https://static001.geekbang.org/account/avatar/00/12/88/26/b8c53cee.jpg","comment_is_top":false,"comment_ctime":1562146687,"is_pvip":false,"replies":[{"id":"39914","content":"æˆ‘ä¸çŸ¥é“æ‚¨è¿™è¾¹æ˜¯æ€ä¹ˆå®éªŒçš„ï¼Œä½†æ˜¯æˆ‘è¿™è¾¹çš„ç¡®ä¼šåˆ›å»ºæ–°çš„TCPè¿æ¥~~ ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562202838,"ip_address":"","comment_id":109993,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5857113983","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘åœ¨æœ¬åœ°åˆ†åˆ«ç”¨1.xç‰ˆæœ¬å’Œ2.xç‰ˆæœ¬çš„ç”Ÿäº§è€…å»æµ‹è¯•ï¼Œä¸ºä»€ä¹ˆç»“æœå’Œè€å¸ˆçš„ä¸ä¸€æ ·å‘¢ã€‚åˆå§‹åŒ–KafkaProduceræ—¶ï¼Œå¹¶æ²¡æœ‰ä¸å‚æ•°ä¸­è®¾ç½®çš„æ‰€æœ‰brokerå»å»ºç«‹è¿æ¥ï¼Œç„¶åæˆ‘sleepåç§’ï¼Œè®©senderçº¿ç¨‹æœ‰æœºä¼šå¤šè¿è¡Œä¼šã€‚ä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰çœ‹åˆ°å»è¿æ¥æ‰€æœ‰çš„brokerã€‚åªæœ‰å½“è¿è¡Œåˆ°procuder.sendæ—¶æ‰ä¼šæœ‰Initialize connectionæ—¥å¿—è¾“å‡ºï¼Œä»¥åŠç”±äºmetadataçš„needUpdateè¢«æ›´æ–°æˆtrueï¼Œsenderçº¿ç¨‹ä¼šå¼€å§‹æœ‰æœºä¼šå»æ›´æ–°metadataå»è¿æ¥brokerï¼ˆäº§ç”ŸInitialize connection to node...for sending metadata requestï¼‰ã€‚ä¹‹å‰å­¦ä¹ æºç çš„æ—¶å€™ï¼Œä¹Ÿåªæ³¨æ„åˆ°äºŒä¸ªåœ°æ–¹å»è¿æ¥brokerï¼ˆåº•å±‚æ–¹æ³•initiateConnectï¼Œæ›´æ–°metadataæ—¶å»ºç«‹è¿æ¥ä»¥åŠå‘é€æ•°æ®æ—¶åˆ¤æ–­å¾…å‘é€çš„nodeæ˜¯å¦å»ºç«‹äº†è¿æ¥ï¼‰ã€‚è€å¸ˆæ˜¯æˆ‘å“ªé‡Œç–å¿½äº†å—ï¼Œè¿˜æ˜¯ç†è§£æœ‰é—®é¢˜ã€‚ç¿»é˜…è€å¸ˆçš„ä¹¦ä¸ŠTCPç®¡ç†è¿™å—è²Œä¼¼æ²¡æœ‰è¿‡å¤šçš„è®²è§£ï¼Œæ±‚è€å¸ˆæŒ‡å¯¼ã€‚ã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456673,"discussion_content":"æˆ‘ä¸çŸ¥é“æ‚¨è¿™è¾¹æ˜¯æ€ä¹ˆå®éªŒçš„ï¼Œä½†æ˜¯æˆ‘è¿™è¾¹çš„ç¡®ä¼šåˆ›å»ºæ–°çš„TCPè¿æ¥~~ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562202838,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762252,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e3/cc/0947ff0b.jpg","nickname":"nestle","note":"","ucode":"469800BED81B54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383875,"discussion_content":"æ–°ç‰ˆæœ¬çš„å®¢æˆ·ç«¯ç¡®å®ä¸ä¼šè¿æ¥å…¨éƒ¨çš„bootstrap.serversï¼Œå¹¶ä¸”éªŒè¯ç”Ÿäº§è€…ä¹Ÿåªä¼šä¸leaderå»ºç«‹è¿æ¥","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626265224,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109953,"user_name":"ban","can_delete":false,"product_type":"c1","uid":1034204,"ip_address":"","ucode":"E523CE97E48266","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","comment_is_top":false,"comment_ctime":1562139637,"is_pvip":false,"replies":[{"id":"39909","content":"ä¸€ä¸ªKafkaProducerå®ä¾‹ä¼šå¼€è¾Ÿä¸€å—å†…å­˜ç¼“å†²åŒºï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹å…±ç”¨è¿™éƒ¨åˆ†bufferï¼Œè‡ªç„¶bufferè¢«å¡«æ»¡çš„é€Ÿåº¦å°±ä¼šå¿«å¾ˆå¤šã€‚æˆ‘æ˜¯è¿™ä¸ªæ„æ€ã€‚ã€‚ã€‚ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562202096,"ip_address":"","comment_id":109953,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857106933","product_id":100029201,"comment_content":"å¦‚æœå¤šä¸ªçº¿ç¨‹éƒ½ä½¿ç”¨ä¸€ä¸ªKafkaProducerå®ä¾‹ï¼Œç¼“å†²å™¨è¢«å¡«æ»¡çš„é€Ÿåº¦ä¼šå˜å¿«ã€‚<br>è€å¸ˆçœ‹è¯„è®ºè¿™å¥è¯ä¸å¤ªç†è§£ï¼Œå¤šä¸ªçº¿ç¨‹å…±ç”¨ä¸€ä¸ªå®ä¾‹ï¼Œæ²¡æœ‰å†newæ–°çš„å®ä¾‹ï¼Œä¸ºä»€ä¹ˆç¼“å†²å™¨å¾ˆå¿«å¡«æ»¡ï¼Œä¸æ˜¯åˆ©ç”¨åŸæœ‰çš„å®ä¾‹çš„å—ã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456651,"discussion_content":"ä¸€ä¸ªKafkaProducerå®ä¾‹ä¼šå¼€è¾Ÿä¸€å—å†…å­˜ç¼“å†²åŒºï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹å…±ç”¨è¿™éƒ¨åˆ†bufferï¼Œè‡ªç„¶bufferè¢«å¡«æ»¡çš„é€Ÿåº¦å°±ä¼šå¿«å¾ˆå¤šã€‚æˆ‘æ˜¯è¿™ä¸ªæ„æ€ã€‚ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562202096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109851,"user_name":"Geek_Sue","can_delete":false,"product_type":"c1","uid":1580774,"ip_address":"","ucode":"B2C9400D72BB1D","user_header":"","comment_is_top":false,"comment_ctime":1562120957,"is_pvip":false,"replies":[{"id":"39911","content":"å¦‚æœ brokerç«¯å’Œclientsç«¯çš„connections.max.idle.mséƒ½æ˜¯-1ï¼Œå°±çœŸæ˜¯æ°¸ä¸å…³é—­äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562202230,"ip_address":"","comment_id":109851,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857088253","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ã€‚<br>connections.max.idle.msè¿™ä¸ªå€¼å¦‚æœè®¾ç½®ä¸º-1ï¼ŒæŒ‰ç…§æ‚¨æ–‡ç« é‡Œæ‰€è¯´ï¼ŒKafkaProducerä¼šåˆ›å»ºbootstrap.serversä¸­å…¨éƒ¨tcpè¿æ¥ï¼Œå¦‚æœæ˜¯1000ä¸ªï¼Œé‚£ä¹ˆå°±æ˜¯è¯´è¿™1000ä¸ªè¿æ¥æ°¸è¿œä¸ä¼šå…³é—­äº†ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456604,"discussion_content":"å¦‚æœ brokerç«¯å’Œclientsç«¯çš„connections.max.idle.mséƒ½æ˜¯-1ï¼Œå°±çœŸæ˜¯æ°¸ä¸å…³é—­äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562202230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109738,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1562084385,"is_pvip":true,"replies":[{"id":"39753","content":"å—¯å—¯ï¼Œ ç›®å‰ä¸æ˜¯è¿™æ ·è®¾è®¡çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562113982,"ip_address":"","comment_id":109738,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5857051681","product_id":100029201,"comment_content":"KafkaProducer å®ä¾‹é¦–æ¬¡æ›´æ–°å…ƒæ•°æ®ä¿¡æ¯ä¹‹åï¼Œè¿˜ä¼šå†æ¬¡åˆ›å»ºä¸é›†ç¾¤ä¸­æ‰€æœ‰ Broker çš„ TCP è¿æ¥ã€‚    è¿™é‡Œå¦‚æœæˆ‘æœ‰1000ä¸ªbrokerï¼Œå°±å»ºç«‹1000ä¸ªé“¾æ¥ï¼Ÿ ä¸ºå•¥ä¸æ˜¯åªæ ¹æ®å…ƒä¿¡æ¯åªå»ºç«‹æœ‰æˆ‘è¦å‘çš„ä¸»é¢˜çš„brokeçš„é“¾æ¥ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456545,"discussion_content":"å—¯å—¯ï¼Œ ç›®å‰ä¸æ˜¯è¿™æ ·è®¾è®¡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562113982,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1736462,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/7f/0e/e3a8dbd9.jpg","nickname":"Liujun","note":"","ucode":"3DB1F3CA57B5B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389759,"discussion_content":"å…ƒæ•°æ®ä¿¡æ¯æ€ä¹ˆä¼šçŸ¥é“ä½ è¦å‘é€çš„æ˜¯å“ªä¸ªä¸»é¢˜ï¼Ÿè€Œä¸”å‘é€æ—¶ä¹Ÿä¼šåˆ›å»ºä¸»é¢˜ï¼Œå®˜æ–¹è¿™ç§åšæ³•æ˜¯æå…¶æ­£ç¡®çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629424461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109489,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1562042717,"is_pvip":false,"replies":[{"id":"39764","content":"æœ‰å¯èƒ½ä¹Ÿä¼šè¿æ¥è¿™äº›Brokerçš„ã€‚Clientsè·å–åˆ°é›†ç¾¤å…ƒæ•°æ®åçŸ¥é“äº†é›†ç¾¤æ‰€æœ‰Brokerçš„è¿æ¥ä¿¡æ¯ã€‚ä¸‹æ¬¡å†æ¬¡è·å–å…ƒæ•°æ®æ—¶ï¼Œå®ƒä¼šé€‰æ‹©ä¸€ä¸ªè´Ÿè½½æœ€å°‘çš„Brokerè¿›è¡Œè¿æ¥ã€‚å¦‚æœå‘ç°æ²¡æœ‰è¿æ¥ä¹Ÿä¼šåˆ›å»ºSocketï¼Œä½†å…¶å®å®ƒå¹¶ä¸éœ€è¦å‘è¿™ä¸ªBrokerå‘é€ä»»ä½•æ¶ˆæ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562115231,"ip_address":"","comment_id":109489,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857010013","product_id":100029201,"comment_content":"Produceråº”è¯¥åªè·ŸControllerèŠ‚ç‚¹æ›´æ–°å…ƒæ•°æ®ï¼Œä»¥åŠç›¸å…³çš„topicæœºå™¨äº¤äº’æ•°æ®ï¼Œè€Œä¸åº”è¯¥è·Ÿæ‰€æœ‰çš„æœºå™¨åˆ›å»ºè¿æ¥ï¼›æœ‰ä¸ªç–‘é—®ï¼Œå½“ Producer æ›´æ–°äº†é›†ç¾¤çš„å…ƒæ•°æ®ä¿¡æ¯ä¹‹åï¼Œå¦‚æœå‘ç°ä¸æŸäº›brokeræ²¡æœ‰è¿æ¥ï¼Œå°±å»åˆ›å»ºï¼Œä¸ºä»€ä¹ˆä¼šå»åˆ›å»ºè·Ÿproduceræ— å…³çš„è¿æ¥ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456437,"discussion_content":"æœ‰å¯èƒ½ä¹Ÿä¼šè¿æ¥è¿™äº›Brokerçš„ã€‚Clientsè·å–åˆ°é›†ç¾¤å…ƒæ•°æ®åçŸ¥é“äº†é›†ç¾¤æ‰€æœ‰Brokerçš„è¿æ¥ä¿¡æ¯ã€‚ä¸‹æ¬¡å†æ¬¡è·å–å…ƒæ•°æ®æ—¶ï¼Œå®ƒä¼šé€‰æ‹©ä¸€ä¸ªè´Ÿè½½æœ€å°‘çš„Brokerè¿›è¡Œè¿æ¥ã€‚å¦‚æœå‘ç°æ²¡æœ‰è¿æ¥ä¹Ÿä¼šåˆ›å»ºSocketï¼Œä½†å…¶å®å®ƒå¹¶ä¸éœ€è¦å‘è¿™ä¸ªBrokerå‘é€ä»»ä½•æ¶ˆæ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562115231,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109482,"user_name":"å¼ åº†","can_delete":false,"product_type":"c1","uid":1050284,"ip_address":"","ucode":"17AE1E23B83304","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/ac/604de2e8.jpg","comment_is_top":false,"comment_ctime":1562040007,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857007303","product_id":100029201,"comment_content":"ä¸»è¦çš„èµ„æºæµªè´¹åº”è¯¥æ˜¯åœ¨ç¬¬ä¸€æ¬¡è·å–å…ƒæ•°æ®çš„æ—¶å€™åˆ›å»ºæ‰€æœ‰çš„è¿æ¥ï¼Œåº”è¯¥æ˜¯è¿™ä¸ªåœ°æ–¹å¯ä»¥åšä¸€äº›ä¼˜åŒ–å§ï¼Œå¯ä»¥åšä¸€ä¸ªæœ€å°åˆå§‹åŒ–æ•°é‡ï¼Œä»å…ƒæ•°æ®ä¸­éšæœºè·å–é…ç½®çš„æœ€å°‘æ•°æ®ï¼Œç„¶åè¿›è¡Œåˆå§‹åŒ–ã€‚ç„¶åå‘Brokerå‘é€æ¶ˆæ¯çš„æ—¶å€™åœ¨å»åˆ¤æ–­ï¼Œå¦‚æœæ²¡æœ‰è¿æ¥å°±åˆ›å»ºè¿æ¥ï¼Œè¿™æ ·åº”è¯¥å¯ä»¥æŠ˜ä¸­ä¸€ä¸‹å§ã€‚","like_count":1},{"had_liked":false,"id":109343,"user_name":"songt","can_delete":false,"product_type":"c1","uid":1097118,"ip_address":"","ucode":"E6868282100139","user_header":"https://static001.geekbang.org/account/avatar/00/10/bd/9e/301600c4.jpg","comment_is_top":false,"comment_ctime":1562023615,"is_pvip":false,"replies":[{"id":"39591","content":"è¿™ä¸¤æ¬¾MQçš„ååé‡éƒ½å¾ˆå¤§ï¼Œéƒ½èƒ½æ»¡è¶³ä½ ä»¬çš„éœ€æ±‚ã€‚RocketMQæ˜¯é˜¿é‡Œç ”å‘çš„ï¼Œå›½å†…æ”¯æŒä¸Šè¦æ¯”Kafkaå¥½ä¸€äº›ï¼›Kafkaæ¯”è¾ƒæˆç†Ÿï¼Œç¤¾åŒºä¹Ÿå¾ˆå®Œå–„ï¼Œåæ­£æ˜¯å„è‡ªæœ‰ä¼˜ç¼ºç‚¹å§ã€‚è‡³äºç½‘ä¸Šé‚£äº›æ¯”è¾ƒçš„æ–‡ç« ï¼Œæˆ‘è§‰å¾—å®ƒä»¬çš„ç¼ºç‚¹åœ¨å®é™…åœºæ™¯ä¸­éƒ½èƒ½è§„é¿ï¼Œä¸å­˜åœ¨ç»å¯¹çš„å­°å¼ºå­°åŠ£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562028099,"ip_address":"","comment_id":109343,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5856990911","product_id":100029201,"comment_content":"æœ€è¿‘å’ŒåŒäº‹æ¢³ç†mqçš„ä¸­é—´ä»¶ç§ç±» æåˆ°ä½¿ç”¨Kafkaè¿˜æ˜¯rocketmq åŒäº‹å¼ºçƒˆæ¨èä½¿ç”¨rocketmq å…¶å®æˆ‘ä»¬çš„ä¸šåŠ¡æ˜¯å¯èƒ½æœ‰æ•°æ®é‡è¾ƒå¤§æƒ…å†µçš„ï¼Œä¹‹å‰ä¸äº†è§£Rocketmq è€å¸ˆèƒ½ç»™äº›å»ºè®®å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456367,"discussion_content":"è¿™ä¸¤æ¬¾MQçš„ååé‡éƒ½å¾ˆå¤§ï¼Œéƒ½èƒ½æ»¡è¶³ä½ ä»¬çš„éœ€æ±‚ã€‚RocketMQæ˜¯é˜¿é‡Œç ”å‘çš„ï¼Œå›½å†…æ”¯æŒä¸Šè¦æ¯”Kafkaå¥½ä¸€äº›ï¼›Kafkaæ¯”è¾ƒæˆç†Ÿï¼Œç¤¾åŒºä¹Ÿå¾ˆå®Œå–„ï¼Œåæ­£æ˜¯å„è‡ªæœ‰ä¼˜ç¼ºç‚¹å§ã€‚è‡³äºç½‘ä¸Šé‚£äº›æ¯”è¾ƒçš„æ–‡ç« ï¼Œæˆ‘è§‰å¾—å®ƒä»¬çš„ç¼ºç‚¹åœ¨å®é™…åœºæ™¯ä¸­éƒ½èƒ½è§„é¿ï¼Œä¸å­˜åœ¨ç»å¯¹çš„å­°å¼ºå­°åŠ£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562028099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1130929,"avatar":"https://static001.geekbang.org/account/avatar/00/11/41/b1/565d0f56.jpg","nickname":".cc","note":"","ucode":"D99025BD7626C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":156462,"discussion_content":"ä¸»è¦çœ‹åœºæ™¯çš„ååé‡å§ï¼ŒRocketMQ åä¸‡TPSé‡çº§ï¼ŒKafkaç™¾ä¸‡é‡çº§ï¼Œå¤§æ•°æ®åœºæ™¯Kafkaæ˜¯æ ‡é…ï¼ŒRocketMQå–ä»£ä¸äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580367057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360742,"user_name":"é’ç„","can_delete":false,"product_type":"c1","uid":1356135,"ip_address":"å››å·","ucode":"C61BD9BCEFEF66","user_header":"https://static001.geekbang.org/account/avatar/00/14/b1/67/1d3c2f25.jpg","comment_is_top":false,"comment_ctime":1666799272,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1666799272","product_id":100029201,"comment_content":"æ–‡ä¸­ç¬¬äºŒç§å…³é—­è¿æ¥çš„æ–¹å¼ï¼Œåœ¨å½“å‰æœ€æ–°ç‰ˆæœ¬ Kafka3.3.1 TCP è¿æ¥è¶…æ—¶å…³é—­æ˜¯æœ‰å®¢æˆ·ç«¯å®Œæˆçš„ã€‚","like_count":0},{"had_liked":false,"id":354756,"user_name":"Geek_06d12d","can_delete":false,"product_type":"c1","uid":1590623,"ip_address":"æµ™æ±Ÿ","ucode":"1C5172C3BBAEC3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqGaJsoQicG7Bp8cUjUkevAp5Sm8ZXy5vl5TVk4CDrq5UAoI9VicK5wwjCdk66FVRbGziaWXHgO52l1Q/132","comment_is_top":false,"comment_ctime":1660746703,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1660746703","product_id":100029201,"comment_content":"TCPå¤šè·¯å¤ç”¨ï¼ŒæŒ‡çš„ä¸æ˜¯ä¸æ–­å¼€è¿æ¥è¿›è¡Œå¤ç”¨é¿å…é‡å¤è¿æ¥å—ï¼Œæ²¡æ˜ç™½åœ¨ä¸€æ¡ç‰©ç†è¿æ¥ä¸Šåˆ›å»ºè‹¥å¹²ä¸ªè™šæ‹Ÿè¿æ¥æ˜¯å•¥æ„æ€","like_count":0},{"had_liked":false,"id":349740,"user_name":"å¼ ä¼Ÿæ˜","can_delete":false,"product_type":"c1","uid":1229314,"ip_address":"","ucode":"E101C8E2833004","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/02/f20e09c5.jpg","comment_is_top":false,"comment_ctime":1656299874,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1656299874","product_id":100029201,"comment_content":"åŠ å…¥æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œä½¿å…¶ä¿æŒæœ€é€‚åˆçš„è¿æ¥æ•°ã€‚","like_count":0},{"had_liked":false,"id":349374,"user_name":"æœºæ™ºçš„èƒ–çº¸","can_delete":false,"product_type":"c1","uid":1430568,"ip_address":"","ucode":"0EEBC02FF9EB06","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK6yJ7MdMSUEuhaIFJ1VibttXlbrnqib1ubb5vOVC4V0XuoTP6qGpPmhA7p1fAeJ1Rm6ciayOUMc7xCA/132","comment_is_top":false,"comment_ctime":1655914973,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1655914973","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆ æˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ å‡å¦‚æœ‰10å°broker æˆ‘è®¾ç½®æŸä¸ªtopicæœ‰åä¸ªåˆ†åŒº. è¿™åä¸ªåˆ†åŒºï¼ˆéƒ½æ˜¯å•å‰¯æœ¬ï¼‰åˆ†å¸ƒåœ¨ä¸åŒçš„æœºå™¨ä¸Š. å¦‚æœæŸä¸€å°brokeræŒ‚äº† ç”Ÿäº§è€…æ˜¯ä¸æ˜¯å°±ä¼šå°†è¿™å°brokerçš„åˆ†åŒºä»åˆ†åŒºåˆ—è¡¨é‡Œé¢å‰”é™¤ ä¸ä¼šç»§ç»­å¾€è¿™ä¸ªbrokerå‘æ•°æ®äº†ã€‚åœ¨æ•´ä½“ç”Ÿäº§è¿‡ç¨‹ä¸­ï¼ˆé™¤äº†é‚£å°brokeråˆšæŒ‚é‚£æ®µæ—¶é—´ å‘å¾€è¿™å°åˆ†åŒºçš„æ•°æ®ä¼šä¸¢å¤±ï¼‰ä¼šå°†æ•°æ®å‘å¾€å…¶ä»–çš„åˆ†åŒº ä¸ä¼šç»§ç»­å‘å¾€è¿™ä¸ªåˆ†åŒºäº†å§","like_count":0},{"had_liked":false,"id":335720,"user_name":"å’¸","can_delete":false,"product_type":"c1","uid":1349358,"ip_address":"","ucode":"1F189A2B1A6A71","user_header":"https://static001.geekbang.org/account/avatar/00/14/96/ee/9b21c199.jpg","comment_is_top":false,"comment_ctime":1645664341,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645664341","product_id":100029201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œå†çœ‹kafkaæºç çš„æ—¶å€™ï¼Œå‘å±•producerä¸brokeré€šè¿‡tcpé“¾æ¥çš„å®ç°æ˜¯é€šè¿‡javanioæ¥å®Œæˆçš„ï¼Œä½†æ˜¯ä¹Ÿæ˜¯å¯¹javanioåšäº†åŒ…è£…ï¼Œèƒ½å¸®å¿™è¯´è¯´æ˜¯å¦‚ä½•åŒ…è£…çš„å˜›ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨nettyæ¥å®Œæˆè¿™ä¸ªäº‹å‘¢","like_count":0},{"had_liked":false,"id":330563,"user_name":"å°ä»™","can_delete":false,"product_type":"c1","uid":1866677,"ip_address":"","ucode":"9F94043DFCEC3A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq6pWvKsV4rzQ62z5MDEjaEU5MbDfmzbA62kUgoqia2tgKIIxw4ibkDhF7W48iat5dT8UB9Adky2NuzQ/132","comment_is_top":false,"comment_ctime":1642043138,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642043138","product_id":100029201,"comment_content":"å‡è®¾ producer é…ç½® bootstrap.servers ï¼škafka1:9192,kafka2:9192ï¼Œä½†æ˜¯kafkaé›†ç¾¤æœ‰100ä¸ªbroker<br>1.ç¬¬ä¸€æ¬¡ producer åˆ›å»º sender çº¿ç¨‹ï¼Œåªä¼šä¸ kafka1:9192,kafka2:9192 å»ºç«‹ TCP è¿æ¥<br>2.ä½†æ˜¯å½“ producer å®ä¾‹é¦–æ¬¡æ›´æ–°å…ƒæ•°æ®ä¿¡æ¯ä¹‹åï¼Œè¿˜ä¼šå†æ¬¡åˆ›å»ºä¸é›†ç¾¤ä¸­æ‰€æœ‰ Brokerï¼ˆ100ä¸ªï¼‰ çš„ TCP è¿æ¥ã€‚","like_count":0},{"had_liked":false,"id":328216,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1640609582,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640609582","product_id":100029201,"comment_content":"æˆ‘å¾ˆæƒ³é—®ä¸‹ï¼Œè¿™é‡Œä¸ºå•¥è¦æ‹¿httpå’Œtcpæ¥åšå¯¹æ¯”ï¼Ÿè¿™ä¸¤ä¸ªåè®®å®Œå…¨ä¸åœ¨åŒä¸€ä¸ªç½‘ç»œå±‚å•Šï¼Ÿç”¨TCPæ˜¯å› ä¸ºTCPæ˜¯ä¸€ä¸ªå¯é ä¼ è¾“åè®®ï¼Œè¿™å’Œç”¨ä¸ç”¨httpæ²¡å•¥å…³ç³»å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":323594,"user_name":"æœ€çƒ¦èµ·åå­—","can_delete":false,"product_type":"c1","uid":2153662,"ip_address":"","ucode":"405A886940AD46","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIXbxuhFpUq10M3H87WiaE4bbqI5gTtmxfQCZDPUad4KrCJn8NiaPxhask5YSzRyQiaRaEJqaGoax35A/132","comment_is_top":false,"comment_ctime":1638008466,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638008466","product_id":100029201,"comment_content":"è€å¸ˆ ï¼Œconnections.max.idle.ms =-1 ï¼Œå»ºç«‹çš„TCPé“¾æ¥ä¸ä¼šè¢«å…³é—­ï¼Œé‚£å†å°†connections.max.idle.msè®¾ç½®ä¸ºä¸€ä¸ªå¤§äº0çš„å€¼ï¼Œ å“ªäº›åƒµå°¸é“¾æ¥ä¼šè¢«å…³é—­å—","like_count":0},{"had_liked":false,"id":312563,"user_name":"æ—¥å°±æœˆå°†","can_delete":false,"product_type":"c1","uid":2651148,"ip_address":"","ucode":"0F9BA55A2898FF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/cabLXAUXiavXnEckAgo971o4l1CxP4L9wOV2eUGTyKBUicTib6gJyKV9iatM4GG1scz5Ym17GOzXWQEGzhE31tXUtQ/132","comment_is_top":false,"comment_ctime":1631865734,"is_pvip":false,"replies":[{"id":"114439","content":"æˆ‘æ˜¯æƒ³è¯´Kafkaçš„åè®®ç±»å‹åº•å±‚èµ°çš„æ˜¯TCPçš„é€šé“","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1634004604,"ip_address":"","comment_id":312563,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1631865734","product_id":100029201,"comment_content":"è€å¸ˆ HTTPåè®®ä¸æ˜¯åŸºäºTCPåè®®çš„å— é‚£HTTPæ²¡æœ‰TCPåè®®çš„åŠŸèƒ½å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527027,"discussion_content":"æˆ‘æ˜¯æƒ³è¯´Kafkaçš„åè®®ç±»å‹åº•å±‚èµ°çš„æ˜¯TCPçš„é€šé“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634004604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307247,"user_name":"weirdw","can_delete":false,"product_type":"c1","uid":2597645,"ip_address":"","ucode":"CC97D762CF383A","user_header":"https://static001.geekbang.org/account/avatar/00/27/a3/0d/b3a40f90.jpg","comment_is_top":false,"comment_ctime":1628985229,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628985229","product_id":100029201,"comment_content":"å¼€æ”¾è®¨è®ºçš„é—®é¢˜ï¼Œæ˜¯å¦å¯ä»¥è®¾è®¡ä¸€ä¸ªMax connection çš„å‚æ•°æ¯”å¦‚3-5ï¼Œå¦‚æœå› ä¸ºå„ç§ç½‘ç»œåŸå› connectionå‡å°‘äº†å°±é‡è¿æˆ–è€…è¿æ¥å…¶ä»–çš„brokerï¼Œè€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±é“¾æ¥æ‰€æœ‰çš„broker","like_count":0},{"had_liked":false,"id":298763,"user_name":"âœ¨èƒ¡å°ä¸œ","can_delete":false,"product_type":"c1","uid":1312339,"ip_address":"","ucode":"314D40A5857C17","user_header":"https://static001.geekbang.org/account/avatar/00/14/06/53/29fa4e12.jpg","comment_is_top":false,"comment_ctime":1624318400,"is_pvip":false,"replies":[{"id":"108485","content":"ä»»ä½•tcpè¿æ¥ï¼Œåªè¦ä¸€æ®µæ—¶é—´æ²¡æœ‰è¯·æ±‚æµç»å…¶ä¸Šï¼Œéƒ½ä¼šè¢«å…³é—­","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1624497401,"ip_address":"","comment_id":298763,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1624318400","product_id":100029201,"comment_content":"å¦‚æœè®¾ç½® Producer ç«¯ connections.max.idle.ms å‚æ•°å¤§äº 0ï¼Œåˆ™æ­¥éª¤ 1 ä¸­åˆ›å»ºçš„ TCP è¿æ¥ä¼šè¢«è‡ªåŠ¨å…³é—­ï¼Ÿ è¿™é‡Œæœ‰ç‚¹ç–‘é—®ï¼Ÿåªä¼šå…³é—­ç¬¬ä¸€æ¬¡å»ºç«‹çš„tcpè¿æ¥å—ï¼Ÿé€šè¿‡å…ƒæ•°æ®åˆ›å»ºçš„tcpè¿æ¥ä¸ä¼šè¢«å…³é—­å˜›ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522234,"discussion_content":"ä»»ä½•tcpè¿æ¥ï¼Œåªè¦ä¸€æ®µæ—¶é—´æ²¡æœ‰è¯·æ±‚æµç»å…¶ä¸Šï¼Œéƒ½ä¼šè¢«å…³é—­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624497401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295887,"user_name":"Geek1185","can_delete":false,"product_type":"c1","uid":2028954,"ip_address":"","ucode":"47BEE492EF4C1A","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/9a/63dc81a2.jpg","comment_is_top":false,"comment_ctime":1622630549,"is_pvip":false,"replies":[{"id":"107774","content":"ä¹Ÿä¸æ˜¯äº†ã€‚æ€»ä¹‹ï¼Œç›®å‰å°±æ˜¯è¿™æ ·è®¾è®¡çš„ï¼Œå…¶å®ç¡®å®æœ‰ä¸€äº›å¯ä»¥ä¼˜åŒ–çš„ç©ºé—´","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1623120250,"ip_address":"","comment_id":295887,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622630549","product_id":100029201,"comment_content":"kafka Producer å¯åŠ¨åä¾æ¬¡åˆ›å»ºä¸è¿™ 1000 å° Broker çš„ TCP è¿æ¥ã€‚ä½†æ˜¯producerçŸ­æœŸå†…åªä¸å…¶ä¸­3-5å°é€šä¿¡ï¼Œä¸€æ®µæ—¶é—´ä¹‹åï¼Œå¤§çº¦æœ‰ 995 ä¸ª TCP è¿æ¥åˆè¢«å¼ºåˆ¶å…³é—­ã€‚è¿™å…¶ä¸­æ˜¯å¦å­˜åœ¨èµ„æºçš„æµªè´¹ï¼Ÿ<br><br>æ˜¯å¦æ˜¯å› ä¸ºå†…ç½‘åº”ç”¨çš„é•¿è¿æ¥çš„èµ„æºæŸè€—å¯ä»¥å¿½ç•¥ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521253,"discussion_content":"ä¹Ÿä¸æ˜¯äº†ã€‚æ€»ä¹‹ï¼Œç›®å‰å°±æ˜¯è¿™æ ·è®¾è®¡çš„ï¼Œå…¶å®ç¡®å®æœ‰ä¸€äº›å¯ä»¥ä¼˜åŒ–çš„ç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623120250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290148,"user_name":"worry","can_delete":false,"product_type":"c1","uid":1047773,"ip_address":"","ucode":"AF2BDAF6F6370E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/dd/0e17bf09.jpg","comment_is_top":false,"comment_ctime":1619403286,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1619403286","product_id":100029201,"comment_content":"bootstrap.serversè¿™ä¸ªå‚æ•°çš„æœ‰äº›æ­§ä¹‰ï¼Œæœ¬æ„æ˜¯é…ç½®å‡ ä¸ªbrokeråšå¤‡ç”¨å°±å¯ä»¥äº†ï¼Œä¸æ˜¯æ‰€æœ‰çš„éƒ½é…ç½®ä¸Šã€‚è¿™æ ·çš„è¯ï¼Œproducerä¹Ÿå°±æ˜¯å’Œå‡ ä¸ªbrokerå»ºç«‹äº†é“¾æ¥ï¼Œè€Œä¸æ˜¯æ‰€æœ‰ã€‚è¿™æ ·è®¾è®¡åº”è¯¥ä¹Ÿç®—åˆç†ã€‚","like_count":0},{"had_liked":false,"id":288578,"user_name":"åŒæ¤’å”å”","can_delete":false,"product_type":"c1","uid":1395385,"ip_address":"","ucode":"9C4B1DB2E693AF","user_header":"https://static001.geekbang.org/account/avatar/00/15/4a/b9/1531ff1c.jpg","comment_is_top":false,"comment_ctime":1618547734,"is_pvip":false,"replies":[{"id":"105291","content":"å¢åŠ ä¸‹å…³é—­è¿æ¥çš„ç©ºé—²æ—¶æ®µé˜ˆå€¼<br>","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1619600158,"ip_address":"","comment_id":288578,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1618547734","product_id":100029201,"comment_content":"è€å¸ˆï¼Œkafkaï¼ˆv0.11.0.1ï¼‰æ—¥å¿—ä¸­æœ‰å¾ˆå¤š<br>WARN Attempting to send response via channel for which there is no open connection, connection id<br>çš„å‘Šè­¦ï¼Œå‘ç°ipéƒ½æ¥è‡ªåŒä¸€ä¸ªé›†ç¾¤ï¼ˆä»¥kafkaä¸ºæ•°æ®æºè¿›è¡Œ60s pollä¸€æ¬¡ï¼‰\b<br>è¿™ä¸ªç°è±¡æŒç»­å¾ˆä¹…äº†ï¼Œæ˜¯ä»€ä¹ˆåŸå› å‘¢<br><br>è€Œä¸”åœ¨è¿™ä¸ªç°è±¡å‰æä¸‹ï¼Œæœ‰ä¸€å¤©controllerèŠ‚ç‚¹çªç„¶å¾ˆå¤šCLOSE_WAITEï¼Œæ‰“æ»¡äº†socket,ç„¶åkafkaå°±æŒ‚äº†ï¼Œè¿™ä¸ªéœ€è¦è°ƒæ•´ä»€ä¹ˆå‚æ•°å‘¢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518669,"discussion_content":"å¢åŠ ä¸‹å…³é—­è¿æ¥çš„ç©ºé—²æ—¶æ®µé˜ˆå€¼\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619600158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":285009,"user_name":"è‚–æ’","can_delete":false,"product_type":"c1","uid":1861000,"ip_address":"","ucode":"50B1118691B222","user_header":"","comment_is_top":false,"comment_ctime":1616577897,"is_pvip":false,"replies":[{"id":"103529","content":"æˆ‘çš„æ„æ€æ˜¯ä»¥ç°æœ‰producerå’Œconsumerçš„ä»£ç å®ç°ï¼Œå®ƒhiæ— æ³•è§‚å¯Ÿåˆ°çš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1616721419,"ip_address":"","comment_id":285009,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1616577897","product_id":100029201,"comment_content":"å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç¬¬äºŒç§æ–¹å¼ä¸­ï¼ŒTCP è¿æ¥æ˜¯åœ¨ Broker ç«¯è¢«å…³é—­çš„ï¼Œä½†å…¶å®è¿™ä¸ª TCP è¿æ¥çš„å‘èµ·æ–¹æ˜¯å®¢æˆ·ç«¯ï¼Œå› æ­¤åœ¨ TCP çœ‹æ¥ï¼Œè¿™å±äºè¢«åŠ¨å…³é—­çš„åœºæ™¯ï¼Œå³ passive closeã€‚è¢«åŠ¨å…³é—­çš„åæœå°±æ˜¯ä¼šäº§ç”Ÿå¤§é‡çš„ CLOSE_WAIT è¿æ¥ï¼Œå› æ­¤ Producer ç«¯æˆ– Client ç«¯æ²¡æœ‰æœºä¼šæ˜¾å¼åœ°è§‚æµ‹åˆ°æ­¤è¿æ¥å·²è¢«ä¸­æ–­ã€‚<br><br>è¯·æ•™ä¸‹ Producer æˆ– Client ç«¯æ²¡æœ‰æœºä¼šæ˜¾ç¤ºå…³é—­åˆ°æ­¤è¿æ¥å¦‚ä½•ç†è§£ï¼Ÿå¦‚ä½•è¿™ä¹ˆè¯´ï¼Œåœ¨ netty ä¸­ server ç«¯å…³é—­è¿æ¥ï¼Œclient ç«¯ä¹Ÿæ£€æµ‹ä¸åˆ°ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517551,"discussion_content":"æˆ‘çš„æ„æ€æ˜¯ä»¥ç°æœ‰producerå’Œconsumerçš„ä»£ç å®ç°ï¼Œå®ƒhiæ— æ³•è§‚å¯Ÿåˆ°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616721419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263969,"user_name":"Codingå°å…ˆ","can_delete":false,"product_type":"c1","uid":1051563,"ip_address":"","ucode":"965B1CC757E026","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/ab/0e2857e5.jpg","comment_is_top":false,"comment_ctime":1606305467,"is_pvip":false,"replies":[{"id":"95853","content":"topic leaderå‰¯æœ¬åœ¨å“ªäº›brokerä¸Šæœ¬èº«å°±æ˜¯ä¸å›ºå®šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1606440225,"ip_address":"","comment_id":263969,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606305467","product_id":100029201,"comment_content":"è€å¸ˆï¼Œåƒä¸€äº›å¤§çš„ Kafka é›†ç¾¤ï¼Œå¯èƒ½æˆ‘ä»¬ç”Ÿäº§è€…åªéœ€è¦å‘é€æŸä¸ª Topicï¼Œæ˜¯å¦å¯ä»¥å¢åŠ è¿™ä¹ˆä¸€ä¸ªè®¾è®¡ï¼Œè®© Producer åªè¿æ¥åˆ°ç›®æ ‡ Topic æ‰€åœ¨çš„ Broker å°±å¯ä»¥äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":510370,"discussion_content":"topic leaderå‰¯æœ¬åœ¨å“ªäº›brokerä¸Šæœ¬èº«å°±æ˜¯ä¸å›ºå®šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606440225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":261501,"user_name":"winston","can_delete":false,"product_type":"c1","uid":1061885,"ip_address":"","ucode":"1A39D7A6574B27","user_header":"https://static001.geekbang.org/account/avatar/00/10/33/fd/2bfd537d.jpg","comment_is_top":false,"comment_ctime":1605364609,"is_pvip":false,"replies":[{"id":"94899","content":"é€šå¸¸éƒ½æ˜¯å› ä¸ºæ— æ³•è¿æ¥Brokerå¯¼è‡´çš„ã€‚çœ‹ä¸‹brokerçš„è¿æ¥ä¿¡æ¯æ˜¯å¦æ˜¯æ­£ç¡®ä»¥åŠå¯è¿æ¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1605422843,"ip_address":"","comment_id":261501,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1605364609","product_id":100029201,"comment_content":"è¯·æ•™ä¸€ä¸‹å¤§å®¶ï¼Œå®¢æˆ·ç«¯send(test, data)åï¼ŒæŠ¥å¼‚å¸¸ï¼šjava.util.concurrent.ExecutionException: org.apache.kafka.common.errors.TimeoutException: Topic test not present in metadata after 60000 ms<br>æœåŠ¡ç«¯æ˜¯å…è®¸è‡ªåŠ¨åˆ›å»ºtopicçš„ã€‚è¿™æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509503,"discussion_content":"é€šå¸¸éƒ½æ˜¯å› ä¸ºæ— æ³•è¿æ¥Brokerå¯¼è‡´çš„ã€‚çœ‹ä¸‹brokerçš„è¿æ¥ä¿¡æ¯æ˜¯å¦æ˜¯æ­£ç¡®ä»¥åŠå¯è¿æ¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605422843,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":247368,"user_name":"åç«¯è¿›é˜¶","can_delete":false,"product_type":"c1","uid":1125656,"ip_address":"","ucode":"480F48F5378307","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/18/918eaecf.jpg","comment_is_top":false,"comment_ctime":1599674056,"is_pvip":false,"replies":[{"id":"91190","content":"producerè¢«å¤šä¸ªçº¿ç¨‹å…±äº«ï¼Œä½†updateä¸ä¼šè¢«è°ƒç”¨å¤šæ¬¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1600053660,"ip_address":"","comment_id":247368,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1599674056","product_id":100029201,"comment_content":"è€å¸ˆï¼Œå‡è®¾æ­¤æ—¶ Producer è¢«å¤šä¸ªçº¿ç¨‹å…±äº«ï¼ŒMetadata#update æ–¹æ³•æ˜¯å¦ä¼šé€ æˆå¤šæ¬¡æ›´æ–°é—®é¢˜ï¼Ÿ<br>æˆ‘çš„ç†è§£æ˜¯ï¼šupdateæ–¹æ³•æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨ä¸€æ¡çº¿ç¨‹æ›´æ–°å®Œå…ƒæ•°æ®åï¼Œåé¢çš„çº¿ç¨‹ä¼šæ‹¿ç€ä»–ä»¬å½“å‰çš„å…ƒæ•°æ®ç‰ˆæœ¬è°ƒç”¨updateï¼Œæ­¤æ—¶ç‰ˆæœ¬å·ä¸ä¸€æ ·äº†ï¼Œå°±ä¼šé€ æˆupdateæ–¹æ³•å†…å†æ¬¡å°†needUpdateè®¾ç½®ä¸ºtrueã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505379,"discussion_content":"producerè¢«å¤šä¸ªçº¿ç¨‹å…±äº«ï¼Œä½†updateä¸ä¼šè¢«è°ƒç”¨å¤šæ¬¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600053660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243514,"user_name":"å¶å³¥ç‘¶","can_delete":false,"product_type":"c1","uid":1797584,"ip_address":"","ucode":"170E0F29BC6D4D","user_header":"","comment_is_top":false,"comment_ctime":1598164724,"is_pvip":false,"replies":[{"id":"89759","content":"brokerä¸ä¼šæ‰¾consumerã€‚ç›¸ååœ°ï¼Œconsumerä¼šæ‰¾brokerçš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1598232046,"ip_address":"","comment_id":243514,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598164724","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œè¯·é—®ä¸‹brokeræ”¶åˆ°æ¶ˆæ¯ååˆ°ç„¶åconsumeræ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆï¼Œbrokerå¦‚ä½•æ‰¾åˆ°å¯¹åº”çš„consumer.çš„","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504311,"discussion_content":"brokerä¸ä¼šæ‰¾consumerã€‚ç›¸ååœ°ï¼Œconsumerä¼šæ‰¾brokerçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598232046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243236,"user_name":"å•æœ‹è£","can_delete":false,"product_type":"c1","uid":1272662,"ip_address":"","ucode":"8AD121BEDD9675","user_header":"https://static001.geekbang.org/account/avatar/00/13/6b/56/37a4cea7.jpg","comment_is_top":false,"comment_ctime":1597999722,"is_pvip":false,"replies":[{"id":"89769","content":"producerå…¶å®åªå’ŒçœŸæ­£éœ€è¦è¿æ¥çš„brokerå»ºç«‹é•¿ä¹…çš„TCPè¿æ¥","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1598232906,"ip_address":"","comment_id":243236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597999722","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œå¯¹äºâ€œæŒ‘æˆ˜â€œçš„é—®é¢˜ï¼šæˆ‘è§‰å¾—æ˜¯ä¸æ˜¯é»˜è®¤å»ºç«‹æ‰€æœ‰ä¸brokerçš„è¿æ¥å†å…³é—­ç©ºé—²çš„ï¼Œä¼šæ¯”éœ€è¦æ—¶å†ä¸€ä¸ªä¸ªå»ºç«‹è¿æ¥ï¼Œæƒè¡¡ä¸‹æ¥æ•ˆç›Šè¦é«˜äº›ï¼Œæ‰€ä»¥ç¤¾åŒºæ‰ä¼šä¿ç•™è¿™ç§åšæ³•ã€‚<br>å¦å¤–ï¼Œæˆ‘æœ‰ä¸€ä¸ªä¸æ˜ç™½çš„ç‚¹å“ˆï¼Œå»ºç«‹è¿æ¥éœ€è¦å…ˆä»bootstrap.serversè·å–ä¿¡æ¯ï¼ˆä¸€èˆ¬å°‘è®¸å‡ å°å°±è¡Œï¼‰ï¼Œç„¶åè·å¾—metadataã€‚è¿™æ ·çš„è¯ï¼Œproducerç«¯æ˜¯ä¸æ˜¯çŸ¥é“äº†åˆæ¬¡éœ€è¦å»ºç«‹è¿æ¥çš„brokerä¿¡æ¯ï¼Œç›´æ¥å»ºç«‹éœ€è¦çš„è¿æ¥å°±è¡Œï¼Œæ²¡æœ‰å¿…è¦å»ºç«‹æ‰€æœ‰è¿æ¥å—ï¼Ÿï¼Ÿè¿˜æ˜¯è¯´ï¼Œé»˜è®¤åœºæ™¯å’Œè¿™ä¸ªåœºæ™¯æ˜¯ä¸åŒçš„å•Šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504233,"discussion_content":"producerå…¶å®åªå’ŒçœŸæ­£éœ€è¦è¿æ¥çš„brokerå»ºç«‹é•¿ä¹…çš„TCPè¿æ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598232906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242887,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1597885951,"is_pvip":false,"replies":[{"id":"89612","content":"åªæ˜¯æƒ³è¯´æ˜è¿æ¥ä¿æ´»ï¼ŒKafkaé€šè¿‡è¿™ä¸ªå‚æ•°åœ¨åº”ç”¨å±‚é¢åšäº†è½¯ä»¶ä¿æ´»ã€‚è¿˜æœ‰ä¸€ç§ä¿æ´»æœºåˆ¶æ˜¯é€šè¿‡TCPçš„keepaliveæœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1597976497,"ip_address":"","comment_id":242887,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597885951","product_id":100029201,"comment_content":"è¿™å¥è¯æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿æ¥å…³äº†è¿˜æ˜¯æ²¡å…³ï¼Ÿ ä»€ä¹ˆæ˜¯è½¯ä»¶å±‚é¢çš„é•¿è¿æ¥ï¼Ÿ<br><br>ç”¨æˆ·å¯ä»¥åœ¨ Producer ç«¯è®¾ç½® connections.max.idle.ms=-1 ç¦æ‰è¿™ç§æœºåˆ¶ã€‚ä¸€æ—¦è¢«è®¾ç½®æˆ -1ï¼ŒTCP è¿æ¥å°†æˆä¸ºæ°¸ä¹…é•¿è¿æ¥ã€‚å½“ç„¶è¿™åªæ˜¯è½¯ä»¶å±‚é¢çš„â€œé•¿è¿æ¥â€æœºåˆ¶ï¼Œç”±äº Kafka åˆ›å»ºçš„è¿™äº› Socket è¿æ¥éƒ½å¼€å¯äº† keepaliveï¼Œå› æ­¤ keepalive æ¢æ´»æœºåˆ¶è¿˜æ˜¯ä¼šéµå®ˆçš„ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504123,"discussion_content":"åªæ˜¯æƒ³è¯´æ˜è¿æ¥ä¿æ´»ï¼ŒKafkaé€šè¿‡è¿™ä¸ªå‚æ•°åœ¨åº”ç”¨å±‚é¢åšäº†è½¯ä»¶ä¿æ´»ã€‚è¿˜æœ‰ä¸€ç§ä¿æ´»æœºåˆ¶æ˜¯é€šè¿‡TCPçš„keepaliveæœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597976497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":241459,"user_name":"ç«ç‹¼","can_delete":false,"product_type":"c1","uid":2046978,"ip_address":"","ucode":"37BDE583E64D8C","user_header":"https://static001.geekbang.org/account/avatar/00/1f/3c/02/b7c27217.jpg","comment_is_top":false,"comment_ctime":1597300754,"is_pvip":false,"replies":[{"id":"89376","content":"å—¯ï¼Œå¦‚æœé›†ç¾¤æœ‰å‡ ç™¾å°æœºå™¨ï¼Œbootstrap.serverså°±å¤ªé•¿äº†ï¼Œè¿™ä¹ˆæƒ³çš„è¯ï¼Œè¿™ä¸ªå»ºè®®è¿˜æ˜¯æœ‰å¯å–ä¹‹å¤„å§ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1597628316,"ip_address":"","comment_id":241459,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1597300754","product_id":100029201,"comment_content":"KafkaProducerå¯¹è±¡åˆ›å»ºçš„æ—¶å€™ï¼Œä¼šå’Œå‚æ•° bootstrap.serversä¸Šçš„å„ä¸ªBrokerå»ºç«‹TCPé“¾æ¥ï¼ŒåŒæ—¶è·å–é›†ç¾¤çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œä¹‹åè·Ÿæ–°Producerç«¯çš„å…ƒæ•°æ®ï¼Œå¹¶ä¸é›†ç¾¤ä¸­æ²¡æœ‰å»ºç«‹TCPè¿æ¥çš„Brokerå»ºç«‹è¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´æ— è®º  bootstrap.servers æŒ‡å®šå‡ ä¸ªBrokerèŠ‚ç‚¹ï¼ŒProducer éƒ½ä¼šå’Œé›†ç¾¤ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹å»ºç«‹è¿æ¥ï¼Œé‚£ä¹ˆæ–‡ç« ä¸­æåˆ°çš„ ä¸å»ºè®®æŠŠé›†ç¾¤ä¸­æ‰€æœ‰çš„ Broker ä¿¡æ¯éƒ½é…ç½®åˆ° bootstrap.servers ä¸­ï¼Œæ„Ÿè§‰è¿™ä¸ªå»ºè®®æ„ä¹‰ä¸å¤ªå¤§ï¼","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503743,"discussion_content":"å—¯ï¼Œå¦‚æœé›†ç¾¤æœ‰å‡ ç™¾å°æœºå™¨ï¼Œbootstrap.serverså°±å¤ªé•¿äº†ï¼Œè¿™ä¹ˆæƒ³çš„è¯ï¼Œè¿™ä¸ªå»ºè®®è¿˜æ˜¯æœ‰å¯å–ä¹‹å¤„å§ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597628316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240081,"user_name":"Gavin","can_delete":false,"product_type":"c1","uid":1616970,"ip_address":"","ucode":"A5735665E303FD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2UXuSevhia94o9Eky4OfMuSictaldxcqpjGuvRCOcvjIIoVBAENLEZbv2lgwmwC8icK1ZrUcneNtiaeFBV8MT3uzNg/132","comment_is_top":false,"comment_ctime":1596757617,"is_pvip":false,"replies":[{"id":"88655","content":"å—¯ï¼Œä½ è¯´çš„æ²¡é”™ã€‚å¦å¤–ï¼Œæœ¬æ–‡å¹¶æœªæ¢è®¨IOå¤šè·¯å¤ç”¨ã€‚ä»…ä»…æ˜¯è®¨è®ºä¸ºä»€ä¹ˆä½¿ç”¨TCPè¿æ¥æ—¶è°ˆåˆ°äº†TCPçš„å¤šè·¯å¤ç”¨ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1596771700,"ip_address":"","comment_id":240081,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596757617","product_id":100029201,"comment_content":"æ‰€è°“çš„å¤šè·¯å¤ç”¨è¯·æ±‚ï¼Œå³ multiplexing requestï¼Œæ˜¯æŒ‡å°†ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°æ®æµåˆå¹¶åˆ°åº•å±‚å•ä¸€ç‰©ç†è¿æ¥ä¸­çš„è¿‡ç¨‹ã€‚TCP çš„å¤šè·¯å¤ç”¨è¯·æ±‚ä¼šåœ¨ä¸€æ¡ç‰©ç†è¿æ¥ä¸Šåˆ›å»ºè‹¥å¹²ä¸ªè™šæ‹Ÿè¿æ¥ï¼Œæ¯ä¸ªè™šæ‹Ÿè¿æ¥è´Ÿè´£æµè½¬å„è‡ªå¯¹åº”çš„æ•°æ®æµã€‚å…¶å®ä¸¥æ ¼æ¥è¯´ï¼ŒTCP å¹¶ä¸èƒ½å¤šè·¯å¤ç”¨ï¼Œå®ƒåªæ˜¯æä¾›å¯é çš„æ¶ˆæ¯äº¤ä»˜è¯­ä¹‰ä¿è¯ï¼Œæ¯”å¦‚è‡ªåŠ¨é‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡<br><br>ioå¤šè·¯å¤ç”¨ï¼Œæ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹ç›‘å¬å¤šä¸ªsocketè¿æ¥ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¿æ¥å»ºå¤šä¸ªè™šæ‹Ÿè¿æ¥å§","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503333,"discussion_content":"å—¯ï¼Œä½ è¯´çš„æ²¡é”™ã€‚å¦å¤–ï¼Œæœ¬æ–‡å¹¶æœªæ¢è®¨IOå¤šè·¯å¤ç”¨ã€‚ä»…ä»…æ˜¯è®¨è®ºä¸ºä»€ä¹ˆä½¿ç”¨TCPè¿æ¥æ—¶è°ˆåˆ°äº†TCPçš„å¤šè·¯å¤ç”¨ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596771700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233383,"user_name":"å‹¿æ›´æ”¹ä»»ä½•ä¿¡æ¯","can_delete":false,"product_type":"c1","uid":2028956,"ip_address":"","ucode":"575185C69C05A3","user_header":"","comment_is_top":false,"comment_ctime":1594304274,"is_pvip":false,"replies":[{"id":"86307","content":"å®ƒä¸ä¼šå‘ç°ï¼Œè€Œæ˜¯é€šè¿‡brokerå‘Šè¯‰å®ƒçš„ã€‚producerå‘è€leaderæ‰€åœ¨çš„brokerå‘é€è¯·æ±‚ï¼Œbrokerè¿”å›å¼‚å¸¸å‘ŠçŸ¥producerï¼šæˆ‘å·²ç»ä¸æ˜¯leaderäº†","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1594469100,"ip_address":"","comment_id":233383,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594304274","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œproducerå®šæ—¶ä»æŸä¸ªbrokerè·å–å…ƒæ•°æ®ï¼Œå½“æŸä¸ªåˆ†åŒºçš„leaderå‘ç”Ÿäº†åˆ‡æ¢ï¼Œsenderæ˜¯æ€ä¹ˆåŠä½¿å‘ç°ï¼Œå’Œæ–°brokerå»ºç«‹è¿æ¥çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501004,"discussion_content":"å®ƒä¸ä¼šå‘ç°ï¼Œè€Œæ˜¯é€šè¿‡brokerå‘Šè¯‰å®ƒçš„ã€‚producerå‘è€leaderæ‰€åœ¨çš„brokerå‘é€è¯·æ±‚ï¼Œbrokerè¿”å›å¼‚å¸¸å‘ŠçŸ¥producerï¼šæˆ‘å·²ç»ä¸æ˜¯leaderäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594469100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":229064,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1592890413,"is_pvip":false,"replies":[{"id":"84612","content":"ä½ å½“å‰çš„open file limitè®¾ç½®äº†å¤šå°‘å‘¢ï¼Ÿ å¦å¤–ä½ çš„Brokerä¸Šçš„åˆ†åŒºæ•°å¤§æ¦‚æ˜¯ä»€ä¹ˆé‡çº§çš„ã€‚Kafkaçš„ç¡®ä¼šæ‰“å¼€å¾ˆå¤šæ–‡ä»¶ï¼Œè€Œä¸”æ˜¯åˆ†åŒºæ•°è¶Šå¤šopen file handlerå ç”¨è¶Šå¤šï¼Œä¸è¿‡ä¸€èˆ¬è°ƒå¤§ä¸€ç‚¹è¿™ä¸ªéƒ½ä¸ä¼šæœ‰å¤ªå¤šé—®é¢˜ çš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1592966657,"ip_address":"","comment_id":229064,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592890413","product_id":100029201,"comment_content":"brokerç«¯é€šè¿‡prometheusç›‘æ§åˆ°openfilesä¸€ç›´å¾ˆé«˜ä¸”é™ä¸ä¸‹å»ï¼Œåº”è¯¥ä»å“ªä¸ªè§’åº¦å»æ‰¾åŸå› å‘¢","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499320,"discussion_content":"ä½ å½“å‰çš„open file limitè®¾ç½®äº†å¤šå°‘å‘¢ï¼Ÿ å¦å¤–ä½ çš„Brokerä¸Šçš„åˆ†åŒºæ•°å¤§æ¦‚æ˜¯ä»€ä¹ˆé‡çº§çš„ã€‚Kafkaçš„ç¡®ä¼šæ‰“å¼€å¾ˆå¤šæ–‡ä»¶ï¼Œè€Œä¸”æ˜¯åˆ†åŒºæ•°è¶Šå¤šopen file handlerå ç”¨è¶Šå¤šï¼Œä¸è¿‡ä¸€èˆ¬è°ƒå¤§ä¸€ç‚¹è¿™ä¸ªéƒ½ä¸ä¼šæœ‰å¤ªå¤šé—®é¢˜ çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592966657,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217222,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1589442765,"is_pvip":false,"replies":[{"id":"80314","content":"ä¸ä¼šå¤ç”¨ä¸€ä¸ªtcpè¿æ¥åˆ°å¤šä¸ªbrokerä¸Š","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1589457824,"ip_address":"","comment_id":217222,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589442765","product_id":100029201,"comment_content":"è¯·é—®æ›´æ–°å…ƒæ•°æ®å,ä¸æŸäº›brokeræ²¡æœ‰è¿æ¥,åˆ™åˆ›å»ºä¸€ä¸ªtcpè¿æ¥ï¼›<br>æ¯”å¦‚3ä¸ªbrokeræ²¡è¿æ¥ï¼Œåˆ™ä¼šåˆ›å»º3ä¸ªè¿æ¥ï¼Ÿåªæ˜¯åˆ›å»ºä¸€ä¸ªtcpè¿æ¥å¤šè·¯å¤ç”¨ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495084,"discussion_content":"ä¸ä¼šå¤ç”¨ä¸€ä¸ªtcpè¿æ¥åˆ°å¤šä¸ªbrokerä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589457824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":217200,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1589439121,"is_pvip":false,"replies":[{"id":"80316","content":"å¤§ä½“ä¸Šå°±æ˜¯å‘é€æ—¶å€™åˆ›å»ºï¼Œåªæ˜¯è·å–å…ƒæ•°æ®æœ‰æ—¶æ˜¯å…ˆäºå‘é€äº‹ä»¶çš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1589458249,"ip_address":"","comment_id":217200,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589439121","product_id":100029201,"comment_content":"æ„Ÿè§‰é‚£ä¸ªåŠŸèƒ½å¥½å°´å°¬ï¼Œè·å–æ‰€æœ‰brokerå¹¶åˆ›å»ºè¿æ¥ï¼Œç„¶ååˆå› ä¸ºè®¾ç½®æœ€å¤§å­˜æ´»æ—¶é—´åˆæ–­å¼€è¿æ¥ï¼›<br>æ„Ÿè§‰åº”è¯¥å‘é€çš„æ—¶å€™åˆ›å»ºè¿æ¥ï¼Œç¬¬ä¸€æ¬¡å¯èƒ½ä¼šæ…¢ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495075,"discussion_content":"å¤§ä½“ä¸Šå°±æ˜¯å‘é€æ—¶å€™åˆ›å»ºï¼Œåªæ˜¯è·å–å…ƒæ•°æ®æœ‰æ—¶æ˜¯å…ˆäºå‘é€äº‹ä»¶çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589458249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209850,"user_name":"ç‡ƒç‚¹ä¸¶","can_delete":false,"product_type":"c1","uid":1106277,"ip_address":"","ucode":"01E91FB4287535","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/65/0dd1abf7.jpg","comment_is_top":false,"comment_ctime":1587625288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587625288","product_id":100029201,"comment_content":"ä½•æ—¶åˆ›å»º TCP è¿æ¥ï¼Ÿ<br>KafkaProducer å®ä¾‹åˆ›å»ºæ—¶å¯åŠ¨ Sender çº¿ç¨‹ï¼Œä»è€Œåˆ›å»ºä¸ bootstrap.servers ä¸­æ‰€æœ‰ Broker çš„ TCP è¿æ¥ã€‚<br>KafkaProducer å®ä¾‹é¦–æ¬¡æ›´æ–°å…ƒæ•°æ®ä¿¡æ¯ä¹‹åï¼Œè¿˜ä¼šå†æ¬¡åˆ›å»ºä¸é›†ç¾¤ä¸­æ‰€æœ‰ Broker çš„ TCP è¿æ¥ã€‚<br>å¦‚æœ Producer ç«¯å‘é€æ¶ˆæ¯åˆ°æŸå° Broker æ—¶å‘ç°æ²¡æœ‰ä¸è¯¥ Broker çš„ TCP è¿æ¥ï¼Œé‚£ä¹ˆä¹Ÿä¼šç«‹å³åˆ›å»ºè¿æ¥ã€‚<br>å¦‚æœè®¾ç½® Producer ç«¯ connections.max.idle.ms å‚æ•°å¤§äº 0ï¼Œåˆ™æ­¥éª¤ 1 ä¸­åˆ›å»ºçš„ TCP è¿æ¥ä¼šè¢«è‡ªåŠ¨å…³é—­ï¼›å¦‚æœè®¾ç½®è¯¥å‚æ•° =-1ï¼Œé‚£ä¹ˆæ­¥éª¤ 1 ä¸­åˆ›å»ºçš„ TCP è¿æ¥å°†æ— æ³•è¢«å…³é—­ï¼Œä»è€Œæˆä¸ºâ€œåƒµå°¸â€è¿æ¥ã€‚<br><br>ä½•æ—¶å…³é—­ TCP è¿æ¥ï¼Ÿ<br>Producer ç«¯å…³é—­ TCP è¿æ¥çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯ç”¨æˆ·ä¸»åŠ¨å…³é—­ï¼›ä¸€ç§æ˜¯ Kafka è‡ªåŠ¨å…³é—­ã€‚<br>ç¬¬ä¸€ç§ã€‚è¿™é‡Œçš„ä¸»åŠ¨å…³é—­å®é™…ä¸Šæ˜¯å¹¿ä¹‰çš„ä¸»åŠ¨å…³é—­ï¼Œç”šè‡³åŒ…æ‹¬ç”¨æˆ·è°ƒç”¨ kill -9 ä¸»åŠ¨â€œæ€æ‰â€Producer åº”ç”¨ã€‚å½“ç„¶æœ€æ¨èçš„æ–¹å¼è¿˜æ˜¯è°ƒç”¨ producer.close() æ–¹æ³•æ¥å…³é—­ã€‚<br>ç¬¬äºŒç§æ˜¯ Kafka å¸®ä½ å…³é—­ï¼Œè¿™ä¸ Producer ç«¯å‚æ•° connections.max.idle.ms çš„å€¼æœ‰å…³ã€‚é»˜è®¤æƒ…å†µä¸‹è¯¥å‚æ•°å€¼æ˜¯ 9 åˆ†é’Ÿï¼Œå³å¦‚æœåœ¨ 9 åˆ†é’Ÿå†…æ²¡æœ‰ä»»ä½•è¯·æ±‚â€œæµè¿‡â€æŸä¸ª TCP è¿æ¥ï¼Œé‚£ä¹ˆ Kafka ä¼šä¸»åŠ¨å¸®ä½ æŠŠè¯¥ TCP è¿æ¥å…³é—­ã€‚ç”¨æˆ·å¯ä»¥åœ¨ Producer ç«¯è®¾ç½® connections.max.idle.ms=-1 ç¦æ‰è¿™ç§æœºåˆ¶ã€‚ä¸€æ—¦è¢«è®¾ç½®æˆ -1ï¼ŒTCP è¿æ¥å°†æˆä¸ºæ°¸ä¹…é•¿è¿æ¥ã€‚å½“ç„¶è¿™åªæ˜¯è½¯ä»¶å±‚é¢çš„â€œé•¿è¿æ¥â€æœºåˆ¶ï¼Œç”±äº Kafka åˆ›å»ºçš„è¿™äº› Socket è¿æ¥éƒ½å¼€å¯äº† keepaliveï¼Œå› æ­¤ keepalive æ¢æ´»æœºåˆ¶è¿˜æ˜¯ä¼šéµå®ˆçš„ã€‚","like_count":0},{"had_liked":false,"id":205135,"user_name":"WhatAKitty","can_delete":false,"product_type":"c1","uid":1135707,"ip_address":"","ucode":"911C089450926B","user_header":"https://static001.geekbang.org/account/avatar/00/11/54/5b/1a14d829.jpg","comment_is_top":false,"comment_ctime":1586536361,"is_pvip":false,"replies":[{"id":"76726","content":"ä½ çš„ç†è§£æ²¡æœ‰é—®é¢˜ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1586609678,"ip_address":"","comment_id":205135,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586536361","product_id":100029201,"comment_content":"çœ‹äº†ä¸‹æœ€æ–°ç‰ˆæœ¬çš„æºç ï¼Œè²Œä¼¼åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œåªæ˜¯è·å–é›†ç¾¤ä¿¡æ¯å†…readyçŠ¶æ€çš„LeaderèŠ‚ç‚¹ï¼ˆå­˜åœ¨æœªçŸ¥leaderçš„èŠ‚ç‚¹åˆ™ä¼šå¼ºåˆ¶æ›´æ–°metadataä¿¡æ¯ï¼‰ï¼›ç„¶åä¸è·å–åˆ°çš„readyçŠ¶æ€çš„LeaderèŠ‚ç‚¹ä»¬å‘é€ä¸€æ¬¡è¯·æ±‚ä»¥æ­¤å»ºç«‹TCPè¿æ¥ã€‚<br><br>```java<br>RecordAccumulator.ReadyCheckResult result = this.accumulator.ready(cluster, now);<br><br>        &#47;&#47; if there are any partitions whose leaders are not known yet, force metadata update<br>        if (!result.unknownLeaderTopics.isEmpty()) {<br>            &#47;&#47; The set of topics with unknown leader contains topics with leader election pending as well as<br>            &#47;&#47; topics which may have expired. Add the topic again to metadata to ensure it is included<br>            &#47;&#47; and request metadata update, since there are messages to send to the topic.<br>            for (String topic : result.unknownLeaderTopics)<br>                this.metadata.add(topic, now);<br><br>            log.debug(&quot;Requesting metadata update due to unknown leader topics from the batched records: {}&quot;,<br>                result.unknownLeaderTopics);<br>            this.metadata.requestUpdate();<br>        }<br><br>        &#47;&#47; remove any nodes we aren&#39;t ready to send to<br>        Iterator&lt;Node&gt; iter = result.readyNodes.iterator();<br>```<br><br>Kafkaå®¢æˆ·ç«¯ç‰ˆæœ¬ï¼š2.4.1<br><br>æ˜¯æˆ‘ç†è§£çš„å­˜åœ¨é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491400,"discussion_content":"ä½ çš„ç†è§£æ²¡æœ‰é—®é¢˜ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586609678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194348,"user_name":"SunshineBoy","can_delete":false,"product_type":"c1","uid":1160644,"ip_address":"","ucode":"FC54CD1815CCBA","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/c4/9148b40d.jpg","comment_is_top":false,"comment_ctime":1585053142,"is_pvip":false,"replies":[{"id":"74064","content":"ä¹Ÿä¸ç®—æ— æ•ˆå§ï¼Œåªèƒ½è¯´ä¸Šé¢æ²¡æœ‰è¯·æ±‚å¤„ç†ã€‚ç‰ˆæœ¬çš„å½±å“æ˜¯å­˜åœ¨çš„ï¼Œä¸æ’é™¤å„ä¸ªç‰ˆæœ¬ä¹‹é—´æ˜¯å¦æœ‰å¯¹è¿æ¥åšäº†ä»€ä¹ˆä¿®æ”¹ï¼Œæ¯•ç«Ÿä¸ç®—ä»€ä¹ˆé‡å¤§çš„åŠŸèƒ½æ”¹è¿›ã€‚æœ€å¥½è¿˜æ˜¯ä»¥å®é™…è¯•éªŒç»“æœä¸ºå‡†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1585096183,"ip_address":"","comment_id":194348,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1585053142","product_id":100029201,"comment_content":"ä½œè€…ä½ å¥½ï¼Œå‡å¦‚peoduceræŒ‡å®šäº†connections.max.idle.ms = -1,bootStrap.serversæŒ‡å®šäº†æ‰€æœ‰brokeråœ°å€ä¿¡æ¯ï¼ˆTCPè¿æ¥çš„å…³é—­å’Œåˆ›å»ºä¹Ÿæ˜¯æœ‰å¼€é”€çš„ï¼Œå› æ­¤å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æƒ³è¦ç¦æ‰è‡ªåŠ¨å…³é—­æœºåˆ¶ï¼‰ï¼Œ<br>å‡å¦‚bokeræ•°é‡æ˜¯Nï¼Œé‚£ä¹ˆproducerå¯åŠ¨ååˆ›å»º2*Nä¸ªTCPè¿æ¥ï¼Œä¸ä¼šè¢«å…³é—­ï¼Œå…¶ä¸­Nä¸ªTCPè¿æ¥æ˜¯æœ‰æ•ˆçš„ï¼ŒNä¸ªTCPè¿æ¥æ˜¯æ— æ•ˆçš„ï¼Œä¸çŸ¥é“è¿™ç§è§‚ç‚¹æ˜¯å¦æ­£ç¡®ï¼Ÿè¿˜æ˜¯å’Œkafkaç‰ˆæœ¬æœ‰å…³ï¼Ÿ<br>    äº†ç¤¾åŒºçš„ä¸€äº›è¯„è®º","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488814,"discussion_content":"ä¹Ÿä¸ç®—æ— æ•ˆå§ï¼Œåªèƒ½è¯´ä¸Šé¢æ²¡æœ‰è¯·æ±‚å¤„ç†ã€‚ç‰ˆæœ¬çš„å½±å“æ˜¯å­˜åœ¨çš„ï¼Œä¸æ’é™¤å„ä¸ªç‰ˆæœ¬ä¹‹é—´æ˜¯å¦æœ‰å¯¹è¿æ¥åšäº†ä»€ä¹ˆä¿®æ”¹ï¼Œæ¯•ç«Ÿä¸ç®—ä»€ä¹ˆé‡å¤§çš„åŠŸèƒ½æ”¹è¿›ã€‚æœ€å¥½è¿˜æ˜¯ä»¥å®é™…è¯•éªŒç»“æœä¸ºå‡†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585096183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177449,"user_name":"Geek_383ffd","can_delete":false,"product_type":"c1","uid":1834097,"ip_address":"","ucode":"C3E15ED58CB6DB","user_header":"","comment_is_top":false,"comment_ctime":1581394728,"is_pvip":false,"replies":[{"id":"68978","content":"Kafkaä¸ç”¨httpè€Œé€‰æ‹©tcpå¹¶éæ˜¯å› ä¸ºtcpæ˜¯ä¼ è¾“å±‚åè®®ï¼Œhttpæ˜¯åº”ç”¨å±‚åè®®ï¼Œå› æ­¤æˆ‘æ˜¯è¿™ä¹ˆçœ‹çš„ï¼šæˆ‘ä»¬è¯´çš„éƒ½æ˜¯å¯¹çš„ï¼Œåªæ˜¯å›åº”å¾—ä¸æ˜¯ä¸€ä¸ªå±‚é¢ä¸Šçš„é—®é¢˜ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1581472149,"ip_address":"","comment_id":177449,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581394728","product_id":100029201,"comment_content":"å¯¹äºä¸ºä½•é‡‡ç”¨TCPè€Œä¸ç”¨Httpçš„åŸå› æè¿°æœ‰ç‚¹ç–‘é—®ï¼šHttpæ˜¯åº”ç”¨å±‚çš„åè®®ï¼Œè€Œtcpæ˜¯ä¼ è¾“æ§åˆ¶åè®®ï¼Œå³ä¾¿ä½¿ç”¨httpåº•å±‚å‘é€è¿˜æ˜¯ä¼šç”¨åˆ°tcpçš„ä¸æ˜¯å—ï¼Ÿæ‰€ä»¥è¿™ä¸ªåŸå› æè¿°æ˜¯å¦éœ€è¦æ›´æ­£ä¸€ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483431,"discussion_content":"Kafkaä¸ç”¨httpè€Œé€‰æ‹©tcpå¹¶éæ˜¯å› ä¸ºtcpæ˜¯ä¼ è¾“å±‚åè®®ï¼Œhttpæ˜¯åº”ç”¨å±‚åè®®ï¼Œå› æ­¤æˆ‘æ˜¯è¿™ä¹ˆçœ‹çš„ï¼šæˆ‘ä»¬è¯´çš„éƒ½æ˜¯å¯¹çš„ï¼Œåªæ˜¯å›åº”å¾—ä¸æ˜¯ä¸€ä¸ªå±‚é¢ä¸Šçš„é—®é¢˜ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581472149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":174201,"user_name":"å¤ç›®-Steve","can_delete":false,"product_type":"c1","uid":1037560,"ip_address":"","ucode":"3B8B66A75FC596","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d4/f8/6a368642.jpg","comment_is_top":false,"comment_ctime":1580082792,"is_pvip":false,"replies":[{"id":"67905","content":"Brokerç«¯å’ŒClientç«¯éƒ½æœ‰è¿™ä¸ªå‚æ•°ã€‚Brokerç«¯å‚æ•°çš„é»˜è®¤å€¼çš„ç¡®æ˜¯10åˆ†é’Ÿï¼ŒClientç«¯çš„åˆ™ä¸æ˜¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1580368378,"ip_address":"","comment_id":174201,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1580082792","product_id":100029201,"comment_content":"connections.max.idle.ms è¿™ä¸ªå‚æ•°æƒ³ç¡®è®¤ä¸€ä¸‹, æ˜¯ä¸æ˜¯é»˜è®¤å€¼ä¸º 600000 æ¯«ç§’","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482332,"discussion_content":"Brokerç«¯å’ŒClientç«¯éƒ½æœ‰è¿™ä¸ªå‚æ•°ã€‚Brokerç«¯å‚æ•°çš„é»˜è®¤å€¼çš„ç¡®æ˜¯10åˆ†é’Ÿï¼ŒClientç«¯çš„åˆ™ä¸æ˜¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580368378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138560,"user_name":"worry","can_delete":false,"product_type":"c1","uid":1047773,"ip_address":"","ucode":"AF2BDAF6F6370E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fc/dd/0e17bf09.jpg","comment_is_top":false,"comment_ctime":1570335790,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1570335790","product_id":100029201,"comment_content":"æˆ‘è§‰å¾—åœ¨åˆ›å»ºKafkaProduceræ—¶å°±é€šè¿‡Senderçº¿ç¨‹ä¸æŸäº›Brokeråˆ›å»ºè¿æ¥çš„ä¸»è¦ç›®çš„æ˜¯è·å–é›†ç¾¤å…ƒæ•°æ®ï¼Œä¸ä¸€å®šä¼šå’Œé›†ç¾¤çš„æ‰€æœ‰brokeråˆ›å»ºè¿æ¥ã€‚å‘é€æ¶ˆæ¯æ—¶ï¼Œå¦‚æœå’ŒleaderèŠ‚ç‚¹æ²¡æœ‰è¿æ¥å°±ä¼šåˆ›å»ºï¼Œå‘é€å®Œæ¶ˆæ¯å¦‚æœæ²¡æœ‰æ•°æ®è¦å‘é€ï¼Œè¿æ¥å°±ä¼šè¢«å…³é—­é‡Šæ”¾èµ„æºã€‚","like_count":0},{"had_liked":false,"id":138461,"user_name":"æœªæ¥å°å¨ƒ","can_delete":false,"product_type":"c1","uid":1047329,"ip_address":"","ucode":"477D166EBB6B70","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/21/d017438c.jpg","comment_is_top":false,"comment_ctime":1570259666,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1570259666","product_id":100029201,"comment_content":"Kafkaå¼ºä¾èµ–zookeeperè¿˜æ˜¯æœ‰å¾ˆå¤§é£é™©çš„ï¼Œä¹‹å‰å…¬å¸å°±å‡ºç°zookeeperè¢«æ‰“æŒ‚çš„åœºæ™¯","like_count":0,"discussions":[{"author":{"id":1521451,"avatar":"https://static001.geekbang.org/account/avatar/00/17/37/2b/b32f1d66.jpg","nickname":"Ball","note":"","ucode":"1EE949E68D84CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128652,"discussion_content":"ä¸ºå•¥è¢«æ‰“æŒ‚äº†ï¼ŒKafka ä¹Ÿä¸ä¼šä¸€ç›´å¾€ zk å†™æ•°æ®å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578657621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":138420,"user_name":"æ—è‚¯","can_delete":false,"product_type":"c1","uid":1008582,"ip_address":"","ucode":"D2C97220230DE5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/c6/d6ea3df3.jpg","comment_is_top":false,"comment_ctime":1570228905,"is_pvip":false,"replies":[{"id":"53467","content":"bootstrap.serversè®¾ç½®çš„æ˜¯è¿æ¥Kafkaçš„brokerä¿¡æ¯ï¼Œå’Œå‰¯æœ¬æ²¡æœ‰å…³ç³»å•Š","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1570495510,"ip_address":"","comment_id":138420,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570228905","product_id":100029201,"comment_content":"ç¬¬äºŒç« æœ‰å†™åˆ°ï¼šç”Ÿäº§è€…æ€»æ˜¯å‘é¢†å¯¼è€…å‰¯æœ¬å†™æ¶ˆæ¯ï¼›è€Œæ¶ˆè´¹è€…æ€»æ˜¯ä»é¢†å¯¼è€…å‰¯æœ¬è¯»æ¶ˆæ¯ã€‚è‡³äºè¿½éšè€…å‰¯æœ¬ï¼Œå®ƒåªåšä¸€ä»¶äº‹ï¼šå‘é¢†å¯¼è€…å‰¯æœ¬å‘é€è¯·æ±‚ï¼Œè¯·æ±‚é¢†å¯¼è€…æŠŠæœ€æ–°ç”Ÿäº§çš„æ¶ˆæ¯å‘ç»™å®ƒï¼Œè¿™æ ·å®ƒèƒ½ä¿æŒä¸é¢†å¯¼è€…çš„åŒæ­¥ã€‚å¦‚æœbootstrap.servers å‚æ•°ä¸­æ²¡æœ‰è®¾ç½®é¢†å¯¼è€…å‰¯æœ¬åœ°å€ï¼Œé‚£ä¹ˆå°±å¾—è¿½éšè€…å‰¯æœ¬åŒæ­¥æ•°æ®åˆ°é¢†å¯¼è€…å‰¯æœ¬ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469516,"discussion_content":"bootstrap.serversè®¾ç½®çš„æ˜¯è¿æ¥Kafkaçš„brokerä¿¡æ¯ï¼Œå’Œå‰¯æœ¬æ²¡æœ‰å…³ç³»å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570495510,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137594,"user_name":"äº‘å¸ˆå…„","can_delete":false,"product_type":"c1","uid":1010459,"ip_address":"","ucode":"4475AF1598FBFD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/1b/4b397b80.jpg","comment_is_top":false,"comment_ctime":1569803567,"is_pvip":false,"replies":[{"id":"53471","content":"å› ä¸ºæ˜¯è¢«åŠ¨å…³é—­ï¼Œæ‰€ä»¥æ‰æœ‰CLOSE_WAITï¼Œå’Œæ˜¯å¦æœ‰ä¼ è¾“é‡å…³ç³»ä¸å¤§","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1570495635,"ip_address":"","comment_id":137594,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569803567","product_id":100029201,"comment_content":"Kafkaè‡ªåŠ¨å…³é—­è¿æ¥ï¼Œè¢«åŠ¨å…³é—­çš„åæœå°±æ˜¯ä¼šäº§ç”Ÿå¤§é‡çš„ CLOSE_WAIT è¿æ¥ï¼Œå½“å‘èµ·ç«¯è¢«ç¡®è®¤ä¸ºç©ºé—²æ‰ä¼šè¢«è¢«åŠ¨å…³é—­ï¼Œç†è®ºæ•°æ®ä¼ è¾“é‡æ²¡æœ‰äº†ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜æœ‰å¾ˆå¤šclose waitï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469167,"discussion_content":"å› ä¸ºæ˜¯è¢«åŠ¨å…³é—­ï¼Œæ‰€ä»¥æ‰æœ‰CLOSE_WAITï¼Œå’Œæ˜¯å¦æœ‰ä¼ è¾“é‡å…³ç³»ä¸å¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570495635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":128087,"user_name":"cgddw","can_delete":false,"product_type":"c1","uid":1316424,"ip_address":"","ucode":"621E250BC49C28","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLHKka9hn8hYyd7SD12PEYiazRKg2a5iaFibP7z13t9ARicUvbwItESpIYONxV6gHMFYTmdp4eGZ4YDsA/132","comment_is_top":false,"comment_ctime":1566829823,"is_pvip":false,"replies":[{"id":"47547","content":"å…¶ä»–è¯­è¨€ç®¡ç†TCPèµ„æºçš„æ–¹å¼å’ŒJavaç‰ˆæœ¬çš„ä¸ä¸€å®šç›¸åŒã€‚å¯ä»¥å‚è€ƒä¸€ä¸‹githubå®˜ç½‘ï¼Œçœ‹çœ‹æ˜¯å¦å·²çŸ¥çš„bugã€‚å¦å¤–ä¹Ÿå–å†³äºæ˜¯ä»€ä¹ˆè¯­è¨€ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566869377,"ip_address":"","comment_id":128087,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566829823","product_id":100029201,"comment_content":"é’ˆå¯¹ç¬¬äºŒç§å‡ºç°çš„å¤§é‡æ— ç”¨é“¾æ¥ï¼Œæœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•å—ï¼Ÿç”Ÿäº§ä¸­å‘ç°ï¼Œéjavaè¯­éŸ³å‡ºç°è¿‡è¿™ç§å¤§é‡é“¾æ¥å æ»¡äº†brokeræœºå™¨çš„è¿æ¥æ•°<br>","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464789,"discussion_content":"å…¶ä»–è¯­è¨€ç®¡ç†TCPèµ„æºçš„æ–¹å¼å’ŒJavaç‰ˆæœ¬çš„ä¸ä¸€å®šç›¸åŒã€‚å¯ä»¥å‚è€ƒä¸€ä¸‹githubå®˜ç½‘ï¼Œçœ‹çœ‹æ˜¯å¦å·²çŸ¥çš„bugã€‚å¦å¤–ä¹Ÿå–å†³äºæ˜¯ä»€ä¹ˆè¯­è¨€ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566869377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125268,"user_name":"æ‰¬ä¸€åœºè¿œè¿œçš„é£","can_delete":false,"product_type":"c1","uid":1357801,"ip_address":"","ucode":"AB47E3D2EAB8A8","user_header":"https://static001.geekbang.org/account/avatar/00/14/b7/e9/5400cdf3.jpg","comment_is_top":false,"comment_ctime":1566134809,"is_pvip":false,"replies":[{"id":"46039","content":"æŸ¥çœ‹ä¸€ä¸‹Broker id=2çš„brokerè¿›ç¨‹æ˜¯å¦å¯åŠ¨å§ï¼Œä»æ—¥å¿—ä¸Šæ¥è¯´ï¼Œfolloweræ— æ³•è¿æ¥åˆ°è¿™ä¸ªbrokerä¸Šçš„leaderäº†<br>","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1566181530,"ip_address":"","comment_id":125268,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1566134809","product_id":100029201,"comment_content":"å†…å®¹ä¸2018å¹´å‡ºç‰ˆçš„é‚£æœ¬kafkaå·®ä¸å¤šã€‚è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œçº¿ä¸Šç¯å¢ƒï¼ˆé‡æ¯”è¾ƒå¤§ï¼Œæ¯å¤©çš„æ¶ˆæ¯é‡èƒ½è¾¾åˆ°1Tï¼‰,è¿ç»­æ€§æŠ¥â€œjava.io.IOException: Connection to 2 was disconnected before the response was readâ€ã€‚æˆ‘è´´ä¸€ä¸‹æŠ¥é”™ä¿¡æ¯ï¼š<br>2019-08-18 11:46:37,499] INFO [ReplicaFetcher replicaId=0, leaderId=2, fetcherId=2] Error sending fetch request (sessionId=88469530, epoch=INITIAL) to node 2: java.io.IOException: Connection to 2 was disconnected before the response was read. (org.apache.kafka.clients.FetchSessionHandler)<br>......... t-0-logs-11=(offset=0, logStartOffset=0, maxBytes=1698029824), t0_pt_error-6=(offset=9999, logStartOffset=9999, maxBytes=1698029824), t0_pt_find_pid-5=(offset=4439, logStartOffset=4439, maxBytes=1698029824), t0_pt_extract_patient-15=(offset=18400, logStartOffset=18400, maxBytes=1698029824), __consumer_offsets-25=(offset=83, logStartOffset=0, maxBytes=1698029824), t0_qmjkda_extract_patient-9=(offset=877, logStartOffset=12, maxBytes=1698029824), t0_qmjkda_find_pid-5=(offset=5105, logStartOffset=5105, maxBytes=1698029824), t0_pt_find_pid-35=(offset=4321, logStartOffset=4321, maxBytes=1698029824), bigscreenRdData-18=(offset=1, logStartOffset=1, maxBytes=1698029824), t0_pt_etldr_mapping-4=(offset=16075, logStartOffset=16075, maxBytes=1698029824)}, isolationLevel=READ_UNCOMMITTED, toForget=, metadata=(sessionId=88469530, epoch=INITIAL)) (kafka.server.ReplicaFetcherThread)<br>java.io.IOException: Connection to 2 was disconnected before the response was read<br>\tat org.apache.kafka.clients.NetworkClientUtils.sendAndReceive(NetworkClientUtils.java:97)<br>\tat kafka.server.ReplicaFetcherBlockingSend.sendRequest(ReplicaFetcherBlockingSend.scala:96)<br>\tat kafka.server.ReplicaFetcherThread.fetch(ReplicaFetcherThread.scala:223)<br>\tat kafka.server.ReplicaFetcherThread.fetch(ReplicaFetcherThread.scala:43)<br>\tat kafka.server.AbstractFetcherThread.processFetchRequest(AbstractFetcherThread.scala:146)<br>\tat kafka.server.AbstractFetcherThread.doWork(AbstractFetcherThread.scala:111)<br>\tat kafka.utils.ShutdownableThread.run(ShutdownableThread.scala:82)","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463502,"discussion_content":"æŸ¥çœ‹ä¸€ä¸‹Broker id=2çš„brokerè¿›ç¨‹æ˜¯å¦å¯åŠ¨å§ï¼Œä»æ—¥å¿—ä¸Šæ¥è¯´ï¼Œfolloweræ— æ³•è¿æ¥åˆ°è¿™ä¸ªbrokerä¸Šçš„leaderäº†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566181530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1357801,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b7/e9/5400cdf3.jpg","nickname":"æ‰¬ä¸€åœºè¿œè¿œçš„é£","note":"","ucode":"AB47E3D2EAB8A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5329,"discussion_content":"ä¸‰ä¸ªbroker æ˜¯dockerå®¹å™¨åŒ–å¸ƒç½²ï¼Œå…³æ‰ä»»æ„ä¸¤ä¸ªbrokerå¦ä¸€ä¸ªbrokerèƒ½æ­£å¸¸ç”Ÿäº§å’Œæ¶ˆè´¹ï¼Œè¿›ç¨‹æ²¡å•¥é—®é¢˜ã€‚ä¹‹å‰num.replica.fetchersï¼Œnum.io.threadsï¼Œnum.network.threadsè°ƒå¤§äº†æœ‰ä¸€æ®µæ—¶é—´å¥½äº†ï¼Œåæ¥åˆé‡å¤æŠ¥è¿™ä¸ªé”™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566182550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117667,"user_name":"Johnson","can_delete":false,"product_type":"c1","uid":1060473,"ip_address":"","ucode":"FF29D9659284FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/2e/79/05261bd7.jpg","comment_is_top":false,"comment_ctime":1564108277,"is_pvip":false,"replies":[{"id":"43215","content":"åº”è¯¥æ˜¯ä¸ä¸€æ ·çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564213526,"ip_address":"","comment_id":117667,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564108277","product_id":100029201,"comment_content":"è¯·é—®è€å¸ˆï¼Œé™¤äº†Javaåº“ä¹‹å¤–ï¼Œå…¶ä»–è¯­è¨€çš„libraryï¼Œæ¯”å¦‚librdkafkaçš„prodcuerç®¡ç†TCPè¿æ¥çš„æ–¹å¼ä¸Javaåº“çš„æ–¹å¼æ˜¯ä¸€æ ·çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460078,"discussion_content":"åº”è¯¥æ˜¯ä¸ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564213526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112229,"user_name":"èµŒç¥å¾ˆä½è°ƒ","can_delete":false,"product_type":"c1","uid":1168545,"ip_address":"","ucode":"1066778E1EDF26","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/a1/8bc8e7e1.jpg","comment_is_top":false,"comment_ctime":1562687418,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1562687418","product_id":100029201,"comment_content":"â€œKafkaProducer å®ä¾‹åˆ›å»ºæ—¶å¯åŠ¨ Sender çº¿ç¨‹ï¼Œä»è€Œåˆ›å»ºä¸ bootstrap.servers ä¸­æ‰€æœ‰ Broker çš„ TCP è¿æ¥ã€‚â€â€”â€”æˆ‘è§‰å¾—è¿™ä¸ªå®Œå…¨å¯ä»¥å¼„æˆéšæœºè¿æ¥å‘€ï¼Œå¦‚æœä¸€ä¸ªè¿ä¸é€šå†éšæœºè¿å¦ä¸€ä¸ªï¼Œä¸æ˜¯ä»»ä½•ä¸€ä¸ªbrokeréƒ½æœ‰å…ƒæ•°æ®ç¼“å­˜å—ï¼Œéšæœºè¿ä¸€ä¸ªå–å¾—å…ƒæ•°æ®ä¸å°±å¯ä»¥äº†ï¼Œä¸ºä»€ä¹ˆè¦å…¨è¿å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":110059,"user_name":"æµæµªçš„é˜³å…‰","can_delete":false,"product_type":"c1","uid":1307137,"ip_address":"","ucode":"0E534F8EE3AA3B","user_header":"https://static001.geekbang.org/account/avatar/00/13/f2/01/b78add60.jpg","comment_is_top":false,"comment_ctime":1562162759,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562162759","product_id":100029201,"comment_content":"è€å¸ˆã€å„ä½ä¸“å®¶å¥½ï¼Œè¯·é—®kafcaé€‚åˆåšä¸¤ä¸ªç³»ç»Ÿä¹‹é—´çš„è½¬è´¦å¤„ç†å—ï¼Ÿ<br><br>å¦å¤–ï¼Œè¯·é—®kafcaçš„ä½¿ç”¨æ¡ˆä¾‹ä¸­ï¼Œæœ€å¤šæ”¯æŒè¿‡ä»€ä¹ˆæ•°é‡çº§çš„æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ï¼Ÿ","like_count":0},{"had_liked":false,"id":109719,"user_name":"rm -rf ğŸ˜Šà½²","can_delete":false,"product_type":"c1","uid":1070908,"ip_address":"","ucode":"BC448EC4206D95","user_header":"https://static001.geekbang.org/account/avatar/00/10/57/3c/081b89ec.jpg","comment_is_top":false,"comment_ctime":1562081996,"is_pvip":false,"replies":[{"id":"39755","content":"1. æ˜¯è¿™ä¸ªæ„æ€<br>2. æˆ‘æ˜¯æƒ³è¯´consumerç«¯ä¹Ÿæ˜¯è¿™ä¸ªåŸç†ã€‚å› æ­¤åŠ ä¸Šäº†clients","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562114212,"ip_address":"","comment_id":109719,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562081996","product_id":100029201,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Œä½ è¯´çš„ç¬¬äºŒç§å…³é—­producerçš„æ–¹æ³•æ˜¯ä¸€ä¸ªè¢«åŠ¨å…³é—­ï¼Œå‘èµ·æ–¹æ˜¯å®¢æˆ·ç«¯ã€‚<br>1. è¿™ä¸ªå®¢æˆ·ç«¯æŒ‡çš„æ˜¯producerå®¢æˆ·ç«¯ï¼Ÿæ‰€ä»¥brokeræ­¤æ—¶ä¼šå¯èƒ½å‡ºç°close waitï¼Œæ˜¯è¿™ä¸ªæ„æ€å—ï¼Ÿ<br>2. è¿˜æœ‰è¿™å¥â€œå› æ­¤ Producer ç«¯æˆ– Client ç«¯æ²¡æœ‰æœºä¼šæ˜¾å¼åœ°.â€ä¹Ÿä¸æ˜¯å¾ˆç†è§£ï¼Œproducerç«¯å’Œclientç«¯ä¸æ˜¯ä¸€ä¸ªæ„æ€å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456536,"discussion_content":"1. æ˜¯è¿™ä¸ªæ„æ€\n2. æˆ‘æ˜¯æƒ³è¯´consumerç«¯ä¹Ÿæ˜¯è¿™ä¸ªåŸç†ã€‚å› æ­¤åŠ ä¸Šäº†clients","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562114212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}