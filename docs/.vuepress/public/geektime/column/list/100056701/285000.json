{"id":285000,"title":"16 | å¼‚æ­¥æœºåˆ¶ï¼šå¦‚ä½•é¿å…å•çº¿ç¨‹æ¨¡å‹çš„é˜»å¡ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å¾·é’§ã€‚</p><p>Redisä¹‹æ‰€ä»¥è¢«å¹¿æ³›åº”ç”¨ï¼Œå¾ˆé‡è¦çš„ä¸€ä¸ªåŸå› å°±æ˜¯å®ƒæ”¯æŒé«˜æ€§èƒ½è®¿é—®ã€‚ä¹Ÿæ­£å› ä¸ºè¿™æ ·ï¼Œæˆ‘ä»¬å¿…é¡»è¦é‡è§†æ‰€æœ‰å¯èƒ½å½±å“Redisæ€§èƒ½çš„å› ç´ ï¼ˆä¾‹å¦‚å‘½ä»¤æ“ä½œã€ç³»ç»Ÿé…ç½®ã€å…³é”®æœºåˆ¶ã€ç¡¬ä»¶é…ç½®ç­‰ï¼‰ï¼Œä¸ä»…è¦çŸ¥é“å…·ä½“çš„æœºåˆ¶ï¼Œå°½å¯èƒ½é¿å…æ€§èƒ½å¼‚å¸¸çš„æƒ…å†µå‡ºç°ï¼Œè¿˜è¦æå‰å‡†å¤‡å¥½åº”å¯¹å¼‚å¸¸çš„æ–¹æ¡ˆã€‚</p><p>æ‰€ä»¥ï¼Œä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä¼šç”¨6èŠ‚è¯¾çš„æ—¶é—´ä»‹ç»å½±å“Redisæ€§èƒ½çš„5å¤§æ–¹é¢çš„æ½œåœ¨å› ç´ ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul>\n<li>Rediså†…éƒ¨çš„é˜»å¡å¼æ“ä½œï¼›</li>\n<li>CPUæ ¸å’ŒNUMAæ¶æ„çš„å½±å“ï¼›</li>\n<li>Rediså…³é”®ç³»ç»Ÿé…ç½®ï¼›</li>\n<li>Rediså†…å­˜ç¢ç‰‡ï¼›</li>\n<li>Redisç¼“å†²åŒºã€‚</li>\n</ul><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±å…ˆå­¦ä¹ äº†è§£ä¸‹Rediså†…éƒ¨çš„é˜»å¡å¼æ“ä½œä»¥åŠåº”å¯¹çš„æ–¹æ³•ã€‚</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/270474\">ç¬¬3è®²</a>ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ è¿‡ï¼ŒRedisçš„ç½‘ç»œIOå’Œé”®å€¼å¯¹è¯»å†™æ˜¯ç”±ä¸»çº¿ç¨‹å®Œæˆçš„ã€‚é‚£ä¹ˆï¼Œå¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„æ“ä½œæ¶ˆè€—çš„æ—¶é—´å¤ªé•¿ï¼Œå°±ä¼šå¼•èµ·ä¸»çº¿ç¨‹é˜»å¡ã€‚ä½†æ˜¯ï¼ŒRedisæ—¢æœ‰æœåŠ¡å®¢æˆ·ç«¯è¯·æ±‚çš„é”®å€¼å¯¹å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œä¹Ÿæœ‰ä¿è¯å¯é æ€§çš„æŒä¹…åŒ–æ“ä½œï¼Œè¿˜æœ‰è¿›è¡Œä¸»ä»å¤åˆ¶æ—¶çš„æ•°æ®åŒæ­¥æ“ä½œï¼Œç­‰ç­‰ã€‚æ“ä½œè¿™ä¹ˆå¤šï¼Œç©¶ç«Ÿå“ªäº›ä¼šå¼•èµ·é˜»å¡å‘¢ï¼Ÿ</p><p>åˆ«ç€æ€¥ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘å°±å¸¦ä½ åˆ†é—¨åˆ«ç±»åœ°æ¢³ç†ä¸‹è¿™äº›æ“ä½œï¼Œå¹¶ä¸”æ‰¾å‡ºé˜»å¡å¼æ“ä½œã€‚</p><h2>Rediså®ä¾‹æœ‰å“ªäº›é˜»å¡ç‚¹ï¼Ÿ</h2><p>Rediså®ä¾‹åœ¨è¿è¡Œæ—¶ï¼Œè¦å’Œè®¸å¤šå¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œè¿™äº›ä¸åŒçš„äº¤äº’å°±ä¼šæ¶‰åŠä¸åŒçš„æ“ä½œï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å’ŒRediså®ä¾‹äº¤äº’çš„å¯¹è±¡ï¼Œä»¥åŠäº¤äº’æ—¶ä¼šå‘ç”Ÿçš„æ“ä½œã€‚</p><!-- [[[read_end]]] --><ul>\n<li><strong>å®¢æˆ·ç«¯</strong>ï¼šç½‘ç»œIOï¼Œé”®å€¼å¯¹å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œæ•°æ®åº“æ“ä½œï¼›</li>\n<li><strong>ç£ç›˜</strong>ï¼šç”ŸæˆRDBå¿«ç…§ï¼Œè®°å½•AOFæ—¥å¿—ï¼ŒAOFæ—¥å¿—é‡å†™ï¼›</li>\n<li><strong>ä¸»ä»èŠ‚ç‚¹</strong>ï¼šä¸»åº“ç”Ÿæˆã€ä¼ è¾“RDBæ–‡ä»¶ï¼Œä»åº“æ¥æ”¶RDBæ–‡ä»¶ã€æ¸…ç©ºæ•°æ®åº“ã€åŠ è½½RDBæ–‡ä»¶ï¼›</li>\n<li><strong>åˆ‡ç‰‡é›†ç¾¤å®ä¾‹</strong>ï¼šå‘å…¶ä»–å®ä¾‹ä¼ è¾“å“ˆå¸Œæ§½ä¿¡æ¯ï¼Œæ•°æ®è¿ç§»ã€‚</li>\n</ul><p>ä¸ºäº†å¸®åŠ©ä½ ç†è§£ï¼Œæˆ‘å†ç”»ä¸€å¼ å›¾æ¥å±•ç¤ºä¸‹è¿™4ç±»äº¤äº’å¯¹è±¡å’Œå…·ä½“çš„æ“ä½œä¹‹é—´çš„å…³ç³»ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6c/22/6ce8abb76b3464afe1c4cb3bbe426922.jpg?wh=2685*2250\" alt=\"\"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥é€ä¸ªåˆ†æä¸‹åœ¨è¿™äº›äº¤äº’å¯¹è±¡ä¸­ï¼Œæœ‰å“ªäº›æ“ä½œä¼šå¼•èµ·é˜»å¡ã€‚</p><p><strong>1.å’Œå®¢æˆ·ç«¯äº¤äº’æ—¶çš„é˜»å¡ç‚¹</strong></p><p>ç½‘ç»œIOæœ‰æ—¶å€™ä¼šæ¯”è¾ƒæ…¢ï¼Œä½†æ˜¯Redisä½¿ç”¨äº†IOå¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œé¿å…äº†ä¸»çº¿ç¨‹ä¸€ç›´å¤„åœ¨ç­‰å¾…ç½‘ç»œè¿æ¥æˆ–è¯·æ±‚åˆ°æ¥çš„çŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œç½‘ç»œIOä¸æ˜¯å¯¼è‡´Redisé˜»å¡çš„å› ç´ ã€‚</p><p>é”®å€¼å¯¹çš„å¢åˆ æ”¹æŸ¥æ“ä½œæ˜¯Rediså’Œå®¢æˆ·ç«¯äº¤äº’çš„ä¸»è¦éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯Redisä¸»çº¿ç¨‹æ‰§è¡Œçš„ä¸»è¦ä»»åŠ¡ã€‚æ‰€ä»¥ï¼Œå¤æ‚åº¦é«˜çš„å¢åˆ æ”¹æŸ¥æ“ä½œè‚¯å®šä¼šé˜»å¡Redisã€‚</p><p>é‚£ä¹ˆï¼Œæ€ä¹ˆåˆ¤æ–­æ“ä½œå¤æ‚åº¦æ˜¯ä¸æ˜¯é«˜å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ªæœ€åŸºæœ¬çš„æ ‡å‡†ï¼Œå°±æ˜¯çœ‹æ“ä½œçš„å¤æ‚åº¦æ˜¯å¦ä¸ºO(N)ã€‚</p><p>Redisä¸­æ¶‰åŠé›†åˆçš„æ“ä½œå¤æ‚åº¦é€šå¸¸ä¸ºO(N)ï¼Œæˆ‘ä»¬è¦åœ¨ä½¿ç”¨æ—¶é‡è§†èµ·æ¥ã€‚ä¾‹å¦‚é›†åˆå…ƒç´ å…¨é‡æŸ¥è¯¢æ“ä½œHGETALLã€SMEMBERSï¼Œä»¥åŠé›†åˆçš„èšåˆç»Ÿè®¡æ“ä½œï¼Œä¾‹å¦‚æ±‚äº¤ã€å¹¶å’Œå·®é›†ã€‚è¿™äº›æ“ä½œå¯ä»¥ä½œä¸ºRedisçš„<strong>ç¬¬ä¸€ä¸ªé˜»å¡ç‚¹ï¼šé›†åˆå…¨é‡æŸ¥è¯¢å’Œèšåˆæ“ä½œ</strong>ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œé›†åˆè‡ªèº«çš„åˆ é™¤æ“ä½œåŒæ ·ä¹Ÿæœ‰æ½œåœ¨çš„é˜»å¡é£é™©ã€‚ä½ å¯èƒ½ä¼šè®¤ä¸ºï¼Œåˆ é™¤æ“ä½œå¾ˆç®€å•ï¼Œç›´æ¥æŠŠæ•°æ®åˆ é™¤å°±å¥½äº†ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šé˜»å¡ä¸»çº¿ç¨‹å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œåˆ é™¤æ“ä½œçš„æœ¬è´¨æ˜¯è¦é‡Šæ”¾é”®å€¼å¯¹å ç”¨çš„å†…å­˜ç©ºé—´ã€‚ä½ å¯ä¸è¦å°ç§å†…å­˜çš„é‡Šæ”¾è¿‡ç¨‹ã€‚é‡Šæ”¾å†…å­˜åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œä¸ºäº†æ›´åŠ é«˜æ•ˆåœ°ç®¡ç†å†…å­˜ç©ºé—´ï¼Œåœ¨åº”ç”¨ç¨‹åºé‡Šæ”¾å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦æŠŠé‡Šæ”¾æ‰çš„å†…å­˜å—æ’å…¥ä¸€ä¸ªç©ºé—²å†…å­˜å—çš„é“¾è¡¨ï¼Œä»¥ä¾¿åç»­è¿›è¡Œç®¡ç†å’Œå†åˆ†é…ã€‚è¿™ä¸ªè¿‡ç¨‹æœ¬èº«éœ€è¦ä¸€å®šæ—¶é—´ï¼Œè€Œä¸”ä¼šé˜»å¡å½“å‰é‡Šæ”¾å†…å­˜çš„åº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸‹å­é‡Šæ”¾äº†å¤§é‡å†…å­˜ï¼Œç©ºé—²å†…å­˜å—é“¾è¡¨æ“ä½œæ—¶é—´å°±ä¼šå¢åŠ ï¼Œç›¸åº”åœ°å°±ä¼šé€ æˆRedisä¸»çº¿ç¨‹çš„é˜»å¡ã€‚</p><p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™ä¼šé‡Šæ”¾å¤§é‡å†…å­˜å‘¢ï¼Ÿå…¶å®å°±æ˜¯åœ¨åˆ é™¤å¤§é‡é”®å€¼å¯¹æ•°æ®çš„æ—¶å€™ï¼Œæœ€å…¸å‹çš„å°±æ˜¯åˆ é™¤åŒ…å«äº†å¤§é‡å…ƒç´ çš„é›†åˆï¼Œä¹Ÿç§°ä¸ºbigkeyåˆ é™¤ã€‚ä¸ºäº†è®©ä½ å¯¹bigkeyçš„åˆ é™¤æ€§èƒ½æœ‰ä¸€ä¸ªç›´è§‚çš„å°è±¡ï¼Œæˆ‘æµ‹è¯•äº†ä¸åŒå…ƒç´ æ•°é‡çš„é›†åˆåœ¨è¿›è¡Œåˆ é™¤æ“ä½œæ—¶æ‰€æ¶ˆè€—çš„æ—¶é—´ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/94/53/94bc8cf9yy5c34a6445434a15b1e9653.jpg?wh=2951*836\" alt=\"\"></p><p>ä»è¿™å¼ è¡¨é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸‰ä¸ªç»“è®ºï¼š</p><ol>\n<li>å½“å…ƒç´ æ•°é‡ä»10ä¸‡å¢åŠ åˆ°100ä¸‡æ—¶ï¼Œ4å¤§é›†åˆç±»å‹çš„åˆ é™¤æ—¶é—´çš„å¢é•¿å¹…åº¦ä»5å€ä¸Šå‡åˆ°äº†è¿‘20å€ï¼›</li>\n<li>é›†åˆå…ƒç´ è¶Šå¤§ï¼Œåˆ é™¤æ‰€èŠ±è´¹çš„æ—¶é—´å°±è¶Šé•¿ï¼›</li>\n<li>å½“åˆ é™¤æœ‰100ä¸‡ä¸ªå…ƒç´ çš„é›†åˆæ—¶ï¼Œæœ€å¤§çš„åˆ é™¤æ—¶é—´ç»å¯¹å€¼å·²ç»è¾¾åˆ°äº†1.98sï¼ˆHashç±»å‹ï¼‰ã€‚Redisçš„å“åº”æ—¶é—´ä¸€èˆ¬åœ¨å¾®ç§’çº§åˆ«ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªæ“ä½œè¾¾åˆ°äº†è¿‘2sï¼Œä¸å¯é¿å…åœ°ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li>\n</ol><p>ç»è¿‡åˆšåˆšçš„åˆ†æï¼Œå¾ˆæ˜¾ç„¶ï¼Œ<strong>bigkeyåˆ é™¤æ“ä½œå°±æ˜¯Redisçš„ç¬¬äºŒä¸ªé˜»å¡ç‚¹</strong>ã€‚åˆ é™¤æ“ä½œå¯¹Rediså®ä¾‹æ€§èƒ½çš„è´Ÿé¢å½±å“å¾ˆå¤§ï¼Œè€Œä¸”åœ¨å®é™…ä¸šåŠ¡å¼€å‘æ—¶å®¹æ˜“è¢«å¿½ç•¥ï¼Œæ‰€ä»¥ä¸€å®šè¦é‡è§†å®ƒã€‚</p><p>æ—¢ç„¶é¢‘ç¹åˆ é™¤é”®å€¼å¯¹éƒ½æ˜¯æ½œåœ¨çš„é˜»å¡ç‚¹äº†ï¼Œé‚£ä¹ˆï¼Œåœ¨Redisçš„æ•°æ®åº“çº§åˆ«æ“ä½œä¸­ï¼Œæ¸…ç©ºæ•°æ®åº“ï¼ˆä¾‹å¦‚FLUSHDBå’ŒFLUSHALLæ“ä½œï¼‰å¿…ç„¶ä¹Ÿæ˜¯ä¸€ä¸ªæ½œåœ¨çš„é˜»å¡é£é™©ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°åˆ é™¤å’Œé‡Šæ”¾æ‰€æœ‰çš„é”®å€¼å¯¹ã€‚æ‰€ä»¥ï¼Œè¿™å°±æ˜¯<strong>Redisçš„ç¬¬ä¸‰ä¸ªé˜»å¡ç‚¹ï¼šæ¸…ç©ºæ•°æ®åº“</strong>ã€‚</p><p><strong>2.å’Œç£ç›˜äº¤äº’æ—¶çš„é˜»å¡ç‚¹</strong></p><p>æˆ‘ä¹‹æ‰€ä»¥æŠŠRedisä¸ç£ç›˜çš„äº¤äº’å•ç‹¬åˆ—ä¸ºä¸€ç±»ï¼Œä¸»è¦æ˜¯å› ä¸ºç£ç›˜IOä¸€èˆ¬éƒ½æ˜¯æ¯”è¾ƒè´¹æ—¶è´¹åŠ›çš„ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼ŒRediså¼€å‘è€…æ—©å·²è®¤è¯†åˆ°ç£ç›˜IOä¼šå¸¦æ¥é˜»å¡ï¼Œæ‰€ä»¥å°±æŠŠRedisè¿›ä¸€æ­¥è®¾è®¡ä¸ºé‡‡ç”¨å­è¿›ç¨‹çš„æ–¹å¼ç”ŸæˆRDBå¿«ç…§æ–‡ä»¶ï¼Œä»¥åŠæ‰§è¡ŒAOFæ—¥å¿—é‡å†™æ“ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿™ä¸¤ä¸ªæ“ä½œç”±å­è¿›ç¨‹è´Ÿè´£æ‰§è¡Œï¼Œæ…¢é€Ÿçš„ç£ç›˜IOå°±ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹äº†ã€‚</p><p>ä½†æ˜¯ï¼ŒRedisç›´æ¥è®°å½•AOFæ—¥å¿—æ—¶ï¼Œä¼šæ ¹æ®ä¸åŒçš„å†™å›ç­–ç•¥å¯¹æ•°æ®åšè½ç›˜ä¿å­˜ã€‚ä¸€ä¸ªåŒæ­¥å†™ç£ç›˜çš„æ“ä½œçš„è€—æ—¶å¤§çº¦æ˜¯1ï½2msï¼Œå¦‚æœæœ‰å¤§é‡çš„å†™æ“ä½œéœ€è¦è®°å½•åœ¨AOFæ—¥å¿—ä¸­ï¼Œå¹¶åŒæ­¥å†™å›çš„è¯ï¼Œå°±ä¼šé˜»å¡ä¸»çº¿ç¨‹äº†ã€‚è¿™å°±å¾—åˆ°äº†Redisçš„<strong>ç¬¬å››ä¸ªé˜»å¡ç‚¹äº†ï¼šAOFæ—¥å¿—åŒæ­¥å†™</strong>ã€‚</p><p><strong>3.ä¸»ä»èŠ‚ç‚¹äº¤äº’æ—¶çš„é˜»å¡ç‚¹</strong></p><p>åœ¨ä¸»ä»é›†ç¾¤ä¸­ï¼Œä¸»åº“éœ€è¦ç”ŸæˆRDBæ–‡ä»¶ï¼Œå¹¶ä¼ è¾“ç»™ä»åº“ã€‚ä¸»åº“åœ¨å¤åˆ¶çš„è¿‡ç¨‹ä¸­ï¼Œåˆ›å»ºå’Œä¼ è¾“RDBæ–‡ä»¶éƒ½æ˜¯ç”±å­è¿›ç¨‹æ¥å®Œæˆçš„ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚ä½†æ˜¯ï¼Œå¯¹äºä»åº“æ¥è¯´ï¼Œå®ƒåœ¨æ¥æ”¶äº†RDBæ–‡ä»¶åï¼Œéœ€è¦ä½¿ç”¨FLUSHDBå‘½ä»¤æ¸…ç©ºå½“å‰æ•°æ®åº“ï¼Œè¿™å°±æ­£å¥½æ’ä¸Šäº†åˆšæ‰æˆ‘ä»¬åˆ†æçš„<strong>ç¬¬ä¸‰ä¸ªé˜»å¡ç‚¹ã€‚</strong></p><p>æ­¤å¤–ï¼Œä»åº“åœ¨æ¸…ç©ºå½“å‰æ•°æ®åº“åï¼Œè¿˜éœ€è¦æŠŠRDBæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„å¿«æ…¢å’ŒRDBæ–‡ä»¶çš„å¤§å°å¯†åˆ‡ç›¸å…³ï¼ŒRDBæ–‡ä»¶è¶Šå¤§ï¼ŒåŠ è½½è¿‡ç¨‹è¶Šæ…¢ï¼Œæ‰€ä»¥ï¼Œ<strong>åŠ è½½RDBæ–‡ä»¶å°±æˆä¸ºäº†Redisçš„ç¬¬äº”ä¸ªé˜»å¡ç‚¹</strong>ã€‚</p><p><strong>4.åˆ‡ç‰‡é›†ç¾¤å®ä¾‹äº¤äº’æ—¶çš„é˜»å¡ç‚¹</strong></p><p>æœ€åï¼Œå½“æˆ‘ä»¬éƒ¨ç½²Redisåˆ‡ç‰‡é›†ç¾¤æ—¶ï¼Œæ¯ä¸ªRediså®ä¾‹ä¸Šåˆ†é…çš„å“ˆå¸Œæ§½ä¿¡æ¯éœ€è¦åœ¨ä¸åŒå®ä¾‹é—´è¿›è¡Œä¼ é€’ï¼ŒåŒæ—¶ï¼Œå½“éœ€è¦è¿›è¡Œè´Ÿè½½å‡è¡¡æˆ–è€…æœ‰å®ä¾‹å¢åˆ æ—¶ï¼Œæ•°æ®ä¼šåœ¨ä¸åŒçš„å®ä¾‹é—´è¿›è¡Œè¿ç§»ã€‚ä¸è¿‡ï¼Œå“ˆå¸Œæ§½çš„ä¿¡æ¯é‡ä¸å¤§ï¼Œè€Œæ•°æ®è¿ç§»æ˜¯æ¸è¿›å¼æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸¤ç±»æ“ä½œå¯¹Redisä¸»çº¿ç¨‹çš„é˜»å¡é£é™©ä¸å¤§ã€‚</p><p>ä¸è¿‡ï¼Œå¦‚æœä½ ä½¿ç”¨äº†Redis Clusteræ–¹æ¡ˆï¼Œè€Œä¸”åŒæ—¶æ­£å¥½è¿ç§»çš„æ˜¯bigkeyçš„è¯ï¼Œå°±ä¼šé€ æˆä¸»çº¿ç¨‹çš„é˜»å¡ï¼Œå› ä¸ºRedis Clusterä½¿ç”¨äº†åŒæ­¥è¿ç§»ã€‚æˆ‘å°†åœ¨ç¬¬33è®²ä¸­å‘ä½ ä»‹ç»ä¸åŒåˆ‡ç‰‡é›†ç¾¤æ–¹æ¡ˆå¯¹æ•°æ®è¿ç§»é€ æˆçš„é˜»å¡çš„è§£å†³æ–¹æ³•ï¼Œè¿™é‡Œä½ åªéœ€è¦çŸ¥é“ï¼Œå½“æ²¡æœ‰bigkeyæ—¶ï¼Œåˆ‡ç‰‡é›†ç¾¤çš„å„å®ä¾‹åœ¨è¿›è¡Œäº¤äº’æ—¶ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œå°±å¯ä»¥äº†ã€‚</p><p>å¥½äº†ï¼Œä½ ç°åœ¨å·²ç»äº†è§£äº†Redisçš„å„ç§å…³é”®æ“ä½œï¼Œä»¥åŠå…¶ä¸­çš„é˜»å¡å¼æ“ä½œï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸‹åˆšåˆšæ‰¾åˆ°çš„äº”ä¸ªé˜»å¡ç‚¹ï¼š</p><ul>\n<li>é›†åˆå…¨é‡æŸ¥è¯¢å’Œèšåˆæ“ä½œï¼›</li>\n<li>bigkeyåˆ é™¤ï¼›</li>\n<li>æ¸…ç©ºæ•°æ®åº“ï¼›</li>\n<li>AOFæ—¥å¿—åŒæ­¥å†™ï¼›</li>\n<li>ä»åº“åŠ è½½RDBæ–‡ä»¶ã€‚</li>\n</ul><p>å¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œè¿™äº›æ“ä½œï¼Œå¿…ç„¶ä¼šå¯¼è‡´ä¸»çº¿ç¨‹é•¿æ—¶é—´æ— æ³•æœåŠ¡å…¶ä»–è¯·æ±‚ã€‚ä¸ºäº†é¿å…é˜»å¡å¼æ“ä½œï¼ŒRedisæä¾›äº†å¼‚æ­¥çº¿ç¨‹æœºåˆ¶ã€‚æ‰€è°“çš„å¼‚æ­¥çº¿ç¨‹æœºåˆ¶ï¼Œå°±æ˜¯æŒ‡ï¼ŒRedisä¼šå¯åŠ¨ä¸€äº›å­çº¿ç¨‹ï¼Œç„¶åæŠŠä¸€äº›ä»»åŠ¡äº¤ç»™è¿™äº›å­çº¿ç¨‹ï¼Œè®©å®ƒä»¬åœ¨åå°å®Œæˆï¼Œè€Œä¸å†ç”±ä¸»çº¿ç¨‹æ¥æ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚ä½¿ç”¨å¼‚æ­¥çº¿ç¨‹æœºåˆ¶æ‰§è¡Œæ“ä½œï¼Œå¯ä»¥é¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p><p>ä¸è¿‡ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œé—®é¢˜æ¥äº†ï¼šè¿™äº”å¤§é˜»å¡å¼æ“ä½œéƒ½å¯ä»¥è¢«å¼‚æ­¥æ‰§è¡Œå—ï¼Ÿ</p><h2>å“ªäº›é˜»å¡ç‚¹å¯ä»¥å¼‚æ­¥æ‰§è¡Œï¼Ÿ</h2><p>åœ¨åˆ†æé˜»å¡å¼æ“ä½œçš„å¼‚æ­¥æ‰§è¡Œçš„å¯è¡Œæ€§ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹å¼‚æ­¥æ‰§è¡Œå¯¹æ“ä½œçš„è¦æ±‚ã€‚</p><p>å¦‚æœä¸€ä¸ªæ“ä½œèƒ½è¢«å¼‚æ­¥æ‰§è¡Œï¼Œå°±æ„å‘³ç€ï¼Œå®ƒå¹¶ä¸æ˜¯Redisä¸»çº¿ç¨‹çš„å…³é”®è·¯å¾„ä¸Šçš„æ“ä½œã€‚æˆ‘å†è§£é‡Šä¸‹å…³é”®è·¯å¾„ä¸Šçš„æ“ä½œæ˜¯å•¥ã€‚è¿™å°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯æŠŠè¯·æ±‚å‘é€ç»™Redisåï¼Œç­‰ç€Redisè¿”å›æ•°æ®ç»“æœçš„æ“ä½œã€‚</p><p>è¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ç”»ä¸€å¼ å›¾ç‰‡æ¥è§£é‡Šä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f1/61/f196035e3d2ba65257b211ed436b0b61.jpg?wh=3000*1593\" alt=\"\"></p><p>ä¸»çº¿ç¨‹æ¥æ”¶åˆ°æ“ä½œ1åï¼Œå› ä¸ºæ“ä½œ1å¹¶ä¸ç”¨ç»™å®¢æˆ·ç«¯è¿”å›å…·ä½“çš„æ•°æ®ï¼Œæ‰€ä»¥ï¼Œä¸»çº¿ç¨‹å¯ä»¥æŠŠå®ƒäº¤ç»™åå°å­çº¿ç¨‹æ¥å®Œæˆï¼ŒåŒæ—¶åªè¦ç»™å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªâ€œOKâ€ç»“æœå°±è¡Œã€‚åœ¨å­çº¿ç¨‹æ‰§è¡Œæ“ä½œ1çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯åˆå‘Rediså®ä¾‹å‘é€äº†æ“ä½œ2ï¼Œè€Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯æ˜¯éœ€è¦ä½¿ç”¨æ“ä½œ2è¿”å›çš„æ•°æ®ç»“æœçš„ï¼Œå¦‚æœæ“ä½œ2ä¸è¿”å›ç»“æœï¼Œé‚£ä¹ˆï¼Œå®¢æˆ·ç«¯å°†ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ“ä½œ1å°±ä¸ç®—å…³é”®è·¯å¾„ä¸Šçš„æ“ä½œï¼Œå› ä¸ºå®ƒä¸ç”¨ç»™å®¢æˆ·ç«¯è¿”å›å…·ä½“æ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥ç”±åå°å­çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œã€‚è€Œæ“ä½œ2éœ€è¦æŠŠç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®ƒå°±æ˜¯å…³é”®è·¯å¾„ä¸Šçš„æ“ä½œï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹å¿…é¡»ç«‹å³æŠŠè¿™ä¸ªæ“ä½œæ‰§è¡Œå®Œã€‚</p><p>å¯¹äºRedisæ¥è¯´ï¼Œ<strong>è¯»æ“ä½œæ˜¯å…¸å‹çš„å…³é”®è·¯å¾„æ“ä½œ</strong>ï¼Œå› ä¸ºå®¢æˆ·ç«¯å‘é€äº†è¯»æ“ä½œä¹‹åï¼Œå°±ä¼šç­‰å¾…è¯»å–çš„æ•°æ®è¿”å›ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„æ•°æ®å¤„ç†ã€‚è€ŒRedisçš„ç¬¬ä¸€ä¸ªé˜»å¡ç‚¹â€œé›†åˆå…¨é‡æŸ¥è¯¢å’Œèšåˆæ“ä½œâ€éƒ½æ¶‰åŠåˆ°äº†è¯»æ“ä½œï¼Œæ‰€ä»¥ï¼Œå®ƒä»¬æ˜¯ä¸èƒ½è¿›è¡Œå¼‚æ­¥æ“ä½œäº†ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹åˆ é™¤æ“ä½œã€‚åˆ é™¤æ“ä½œå¹¶ä¸éœ€è¦ç»™å®¢æˆ·ç«¯è¿”å›å…·ä½“çš„æ•°æ®ç»“æœï¼Œæ‰€ä»¥ä¸ç®—æ˜¯å…³é”®è·¯å¾„æ“ä½œã€‚è€Œæˆ‘ä»¬åˆšæ‰æ€»ç»“çš„ç¬¬äºŒä¸ªé˜»å¡ç‚¹â€œbigkeyåˆ é™¤â€ï¼Œå’Œç¬¬ä¸‰ä¸ªé˜»å¡ç‚¹â€œæ¸…ç©ºæ•°æ®åº“â€ï¼Œéƒ½æ˜¯å¯¹æ•°æ®åšåˆ é™¤ï¼Œå¹¶ä¸åœ¨å…³é”®è·¯å¾„ä¸Šã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åå°å­çº¿ç¨‹æ¥å¼‚æ­¥æ‰§è¡Œåˆ é™¤æ“ä½œã€‚</p><p>å¯¹äºç¬¬å››ä¸ªé˜»å¡ç‚¹â€œAOFæ—¥å¿—åŒæ­¥å†™â€æ¥è¯´ï¼Œä¸ºäº†ä¿è¯æ•°æ®å¯é æ€§ï¼ŒRediså®ä¾‹éœ€è¦ä¿è¯AOFæ—¥å¿—ä¸­çš„æ“ä½œè®°å½•å·²ç»è½ç›˜ï¼Œè¿™ä¸ªæ“ä½œè™½ç„¶éœ€è¦å®ä¾‹ç­‰å¾…ï¼Œä½†å®ƒå¹¶ä¸ä¼šè¿”å›å…·ä½“çš„æ•°æ®ç»“æœç»™å®ä¾‹ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯åŠ¨ä¸€ä¸ªå­çº¿ç¨‹æ¥æ‰§è¡ŒAOFæ—¥å¿—çš„åŒæ­¥å†™ï¼Œè€Œä¸ç”¨è®©ä¸»çº¿ç¨‹ç­‰å¾…AOFæ—¥å¿—çš„å†™å®Œæˆã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹â€œä»åº“åŠ è½½RDBæ–‡ä»¶â€è¿™ä¸ªé˜»å¡ç‚¹ã€‚ä»åº“è¦æƒ³å¯¹å®¢æˆ·ç«¯æä¾›æ•°æ®å­˜å–æœåŠ¡ï¼Œå°±å¿…é¡»æŠŠRDBæ–‡ä»¶åŠ è½½å®Œæˆã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ“ä½œä¹Ÿå±äºå…³é”®è·¯å¾„ä¸Šçš„æ“ä½œï¼Œæˆ‘ä»¬å¿…é¡»è®©ä»åº“çš„ä¸»çº¿ç¨‹æ¥æ‰§è¡Œã€‚</p><p>å¯¹äºRedisçš„äº”å¤§é˜»å¡ç‚¹æ¥è¯´ï¼Œé™¤äº†â€œé›†åˆå…¨é‡æŸ¥è¯¢å’Œèšåˆæ“ä½œâ€å’Œâ€œä»åº“åŠ è½½RDBæ–‡ä»¶â€ï¼Œå…¶ä»–ä¸‰ä¸ªé˜»å¡ç‚¹æ¶‰åŠçš„æ“ä½œéƒ½ä¸åœ¨å…³é”®è·¯å¾„ä¸Šï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Redisçš„å¼‚æ­¥å­çº¿ç¨‹æœºåˆ¶æ¥å®ç°bigkeyåˆ é™¤ï¼Œæ¸…ç©ºæ•°æ®åº“ï¼Œä»¥åŠAOFæ—¥å¿—åŒæ­¥å†™ã€‚</p><p>é‚£ä¹ˆï¼ŒRediså®ç°çš„å¼‚æ­¥å­çº¿ç¨‹æœºåˆ¶å…·ä½“æ˜¯æ€ä¹ˆæ‰§è¡Œå‘¢ï¼Ÿ</p><h2>å¼‚æ­¥çš„å­çº¿ç¨‹æœºåˆ¶</h2><p>Redisä¸»çº¿ç¨‹å¯åŠ¨åï¼Œä¼šä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„pthread_createå‡½æ•°åˆ›å»º3ä¸ªå­çº¿ç¨‹ï¼Œåˆ†åˆ«ç”±å®ƒä»¬è´Ÿè´£AOFæ—¥å¿—å†™æ“ä½œã€é”®å€¼å¯¹åˆ é™¤ä»¥åŠæ–‡ä»¶å…³é—­çš„å¼‚æ­¥æ‰§è¡Œã€‚</p><p>ä¸»çº¿ç¨‹é€šè¿‡ä¸€ä¸ªé“¾è¡¨å½¢å¼çš„ä»»åŠ¡é˜Ÿåˆ—å’Œå­çº¿ç¨‹è¿›è¡Œäº¤äº’ã€‚å½“æ”¶åˆ°é”®å€¼å¯¹åˆ é™¤å’Œæ¸…ç©ºæ•°æ®åº“çš„æ“ä½œæ—¶ï¼Œä¸»çº¿ç¨‹ä¼šæŠŠè¿™ä¸ªæ“ä½œå°è£…æˆä¸€ä¸ªä»»åŠ¡ï¼Œæ”¾å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åç»™å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªå®Œæˆä¿¡æ¯ï¼Œè¡¨æ˜åˆ é™¤å·²ç»å®Œæˆã€‚</p><p>ä½†å®é™…ä¸Šï¼Œè¿™ä¸ªæ—¶å€™åˆ é™¤è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œç­‰åˆ°åå°å­çº¿ç¨‹ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¯»å–ä»»åŠ¡åï¼Œæ‰å¼€å§‹å®é™…åˆ é™¤é”®å€¼å¯¹ï¼Œå¹¶é‡Šæ”¾ç›¸åº”çš„å†…å­˜ç©ºé—´ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æŠŠè¿™ç§å¼‚æ­¥åˆ é™¤ä¹Ÿç§°ä¸ºæƒ°æ€§åˆ é™¤ï¼ˆlazy freeï¼‰ã€‚æ­¤æ—¶ï¼Œåˆ é™¤æˆ–æ¸…ç©ºæ“ä½œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œè¿™å°±é¿å…äº†å¯¹ä¸»çº¿ç¨‹çš„æ€§èƒ½å½±å“ã€‚</p><p>å’Œæƒ°æ€§åˆ é™¤ç±»ä¼¼ï¼Œå½“AOFæ—¥å¿—é…ç½®æˆeverysecé€‰é¡¹åï¼Œä¸»çº¿ç¨‹ä¼šæŠŠAOFå†™æ—¥å¿—æ“ä½œå°è£…æˆä¸€ä¸ªä»»åŠ¡ï¼Œä¹Ÿæ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚åå°å­çº¿ç¨‹è¯»å–ä»»åŠ¡åï¼Œå¼€å§‹è‡ªè¡Œå†™å…¥AOFæ—¥å¿—ï¼Œè¿™æ ·ä¸»çº¿ç¨‹å°±ä¸ç”¨ä¸€ç›´ç­‰å¾…AOFæ—¥å¿—å†™å®Œäº†ã€‚</p><p>ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†Redisä¸­çš„å¼‚æ­¥å­çº¿ç¨‹æ‰§è¡Œæœºåˆ¶ï¼Œä½ å¯ä»¥å†çœ‹ä¸‹ï¼ŒåŠ æ·±å°è±¡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ae/69/ae004728bfe6d3771c7424e4161e7969.jpg?wh=2889*1371\" alt=\"\"></p><p>è¿™é‡Œæœ‰ä¸ªåœ°æ–¹éœ€è¦ä½ æ³¨æ„ä¸€ä¸‹ï¼Œå¼‚æ­¥çš„é”®å€¼å¯¹åˆ é™¤å’Œæ•°æ®åº“æ¸…ç©ºæ“ä½œæ˜¯Redis 4.0åæä¾›çš„åŠŸèƒ½ï¼ŒRedisä¹Ÿæä¾›äº†æ–°çš„å‘½ä»¤æ¥æ‰§è¡Œè¿™ä¸¤ä¸ªæ“ä½œã€‚</p><ul>\n<li>é”®å€¼å¯¹åˆ é™¤ï¼šå½“ä½ çš„é›†åˆç±»å‹ä¸­æœ‰å¤§é‡å…ƒç´ ï¼ˆä¾‹å¦‚æœ‰ç™¾ä¸‡çº§åˆ«æˆ–åƒä¸‡çº§åˆ«å…ƒç´ ï¼‰éœ€è¦åˆ é™¤æ—¶ï¼Œæˆ‘å»ºè®®ä½ ä½¿ç”¨UNLINKå‘½ä»¤ã€‚</li>\n<li>æ¸…ç©ºæ•°æ®åº“ï¼šå¯ä»¥åœ¨FLUSHDBå’ŒFLUSHALLå‘½ä»¤ååŠ ä¸ŠASYNCé€‰é¡¹ï¼Œè¿™æ ·å°±å¯ä»¥è®©åå°å­çº¿ç¨‹å¼‚æ­¥åœ°æ¸…ç©ºæ•°æ®åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li>\n</ul><pre><code>FLUSHDB ASYNC\nFLUSHALL AYSNC\n</code></pre><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Rediså®ä¾‹è¿è¡Œæ—¶çš„4å¤§ç±»äº¤äº’å¯¹è±¡ï¼šå®¢æˆ·ç«¯ã€ç£ç›˜ã€ä¸»ä»åº“å®ä¾‹ã€åˆ‡ç‰‡é›†ç¾¤å®ä¾‹ã€‚åŸºäºè¿™4å¤§ç±»äº¤äº’å¯¹è±¡ï¼Œæˆ‘ä»¬æ¢³ç†äº†ä¼šå¯¼è‡´Redisæ€§èƒ½å—æŸçš„5å¤§é˜»å¡ç‚¹ï¼ŒåŒ…æ‹¬é›†åˆå…¨é‡æŸ¥è¯¢å’Œèšåˆæ“ä½œã€bigkeyåˆ é™¤ã€æ¸…ç©ºæ•°æ®åº“ã€AOFæ—¥å¿—åŒæ­¥å†™ï¼Œä»¥åŠä»åº“åŠ è½½RDBæ–‡ä»¶ã€‚</p><p>åœ¨è¿™5å¤§é˜»å¡ç‚¹ä¸­ï¼Œbigkeyåˆ é™¤ã€æ¸…ç©ºæ•°æ®åº“ã€AOFæ—¥å¿—åŒæ­¥å†™ä¸å±äºå…³é”®è·¯å¾„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨å¼‚æ­¥å­çº¿ç¨‹æœºåˆ¶æ¥å®Œæˆã€‚Redisåœ¨è¿è¡Œæ—¶ä¼šåˆ›å»ºä¸‰ä¸ªå­çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹ä¼šé€šè¿‡ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—å’Œä¸‰ä¸ªå­çº¿ç¨‹è¿›è¡Œäº¤äº’ã€‚å­çº¿ç¨‹ä¼šæ ¹æ®ä»»åŠ¡çš„å…·ä½“ç±»å‹ï¼Œæ¥æ‰§è¡Œç›¸åº”çš„å¼‚æ­¥æ“ä½œã€‚</p><p>ä¸è¿‡ï¼Œå¼‚æ­¥åˆ é™¤æ“ä½œæ˜¯Redis 4.0ä»¥åæ‰æœ‰çš„åŠŸèƒ½ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯4.0ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå½“ä½ é‡åˆ°bigkeyåˆ é™¤æ—¶ï¼Œæˆ‘ç»™ä½ ä¸ªå°å»ºè®®ï¼šå…ˆä½¿ç”¨é›†åˆç±»å‹æä¾›çš„SCANå‘½ä»¤è¯»å–æ•°æ®ï¼Œç„¶åå†è¿›è¡Œåˆ é™¤ã€‚å› ä¸ºç”¨SCANå‘½ä»¤å¯ä»¥æ¯æ¬¡åªè¯»å–ä¸€éƒ¨åˆ†æ•°æ®å¹¶è¿›è¡Œåˆ é™¤ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸€æ¬¡æ€§åˆ é™¤å¤§é‡keyç»™ä¸»çº¿ç¨‹å¸¦æ¥çš„é˜»å¡ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äºHashç±»å‹çš„bigkeyåˆ é™¤ï¼Œä½ å¯ä»¥ä½¿ç”¨HSCANå‘½ä»¤ï¼Œæ¯æ¬¡ä»Hashé›†åˆä¸­è·å–ä¸€éƒ¨åˆ†é”®å€¼å¯¹ï¼ˆä¾‹å¦‚200ä¸ªï¼‰ï¼Œå†ä½¿ç”¨HDELåˆ é™¤è¿™äº›é”®å€¼å¯¹ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠåˆ é™¤å‹åŠ›åˆ†æ‘Šåˆ°å¤šæ¬¡æ“ä½œä¸­ï¼Œé‚£ä¹ˆï¼Œæ¯æ¬¡åˆ é™¤æ“ä½œçš„è€—æ—¶å°±ä¸ä¼šå¤ªé•¿ï¼Œä¹Ÿå°±ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹äº†ã€‚</p><p>æœ€åï¼Œæˆ‘æƒ³å†æä¸€ä¸‹ï¼Œé›†åˆå…¨é‡æŸ¥è¯¢å’Œèšåˆæ“ä½œã€ä»åº“åŠ è½½RDBæ–‡ä»¶æ˜¯åœ¨å…³é”®è·¯å¾„ä¸Šï¼Œæ— æ³•ä½¿ç”¨å¼‚æ­¥æ“ä½œæ¥å®Œæˆã€‚å¯¹äºè¿™ä¸¤ä¸ªé˜»å¡ç‚¹ï¼Œæˆ‘ä¹Ÿç»™ä½ ä¸¤ä¸ªå°å»ºè®®ã€‚</p><ul>\n<li>é›†åˆå…¨é‡æŸ¥è¯¢å’Œèšåˆæ“ä½œï¼šå¯ä»¥ä½¿ç”¨SCANå‘½ä»¤ï¼Œåˆ†æ‰¹è¯»å–æ•°æ®ï¼Œå†åœ¨å®¢æˆ·ç«¯è¿›è¡Œèšåˆè®¡ç®—ï¼›</li>\n<li>ä»åº“åŠ è½½RDBæ–‡ä»¶ï¼šæŠŠä¸»åº“çš„æ•°æ®é‡å¤§å°æ§åˆ¶åœ¨2~4GBå·¦å³ï¼Œä»¥ä¿è¯RDBæ–‡ä»¶èƒ½ä»¥è¾ƒå¿«çš„é€Ÿåº¦åŠ è½½ã€‚</li>\n</ul><h2>æ¯è¯¾ä¸€é—®</h2><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ç»™ä½ æä¸€ä¸ªå°é—®é¢˜ï¼šæˆ‘ä»¬ä»Šå¤©å­¦ä¹ äº†å…³é”®è·¯å¾„ä¸Šçš„æ“ä½œï¼Œä½ è§‰å¾—ï¼ŒRedisçš„å†™æ“ä½œï¼ˆä¾‹å¦‚SETã€HSETã€SADDç­‰ï¼‰æ˜¯åœ¨å…³é”®è·¯å¾„ä¸Šå—ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµè®¨è®ºã€‚å¦‚æœä½ è§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿ä½ å¸®æˆ‘åˆ†äº«ç»™æ›´å¤šäººï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>","neighbors":{"left":{"article_title":"15 | æ¶ˆæ¯é˜Ÿåˆ—çš„è€ƒéªŒï¼šRedisæœ‰å“ªäº›è§£å†³æ–¹æ¡ˆï¼Ÿ","id":284291},"right":{"article_title":"17 | ä¸ºä»€ä¹ˆCPUç»“æ„ä¹Ÿä¼šå½±å“Redisçš„æ€§èƒ½ï¼Ÿ","id":286082}},"comments":[{"had_liked":false,"id":248113,"user_name":"Kaito","can_delete":false,"product_type":"c1","uid":1020042,"ip_address":"","ucode":"79775FA35A95F2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","comment_is_top":false,"comment_ctime":1600013397,"is_pvip":true,"discussion_count":78,"race_medal":0,"score":"2123313857621","product_id":100056701,"comment_content":"Redisçš„å†™æ“ä½œï¼ˆä¾‹å¦‚SETï¼ŒHSETï¼ŒSADDç­‰ï¼‰æ˜¯åœ¨å…³é”®è·¯å¾„ä¸Šå—ï¼Ÿ<br><br>æˆ‘è§‰å¾—è¿™éœ€è¦å®¢æˆ·ç«¯æ ¹æ®ä¸šåŠ¡éœ€è¦æ¥åŒºåˆ†ï¼š<br><br>1ã€å¦‚æœå®¢æˆ·ç«¯ä¾èµ–æ“ä½œè¿”å›å€¼çš„ä¸åŒï¼Œè¿›è€Œéœ€è¦å¤„ç†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œé‚£ä¹ˆHSETå’ŒSADDæ“ä½œç®—å…³é”®è·¯å¾„ï¼Œè€ŒSETæ“ä½œä¸ç®—å…³é”®è·¯å¾„ã€‚å› ä¸ºHSETå’ŒSADDæ“ä½œï¼Œå¦‚æœfieldæˆ–memberä¸å­˜åœ¨æ—¶ï¼ŒRedisç»“æœä¼šè¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚è€ŒSETæ“ä½œè¿”å›çš„ç»“æœéƒ½æ˜¯OKï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å…³å¿ƒç»“æœæœ‰ä»€ä¹ˆä¸åŒã€‚<br><br>2ã€å¦‚æœå®¢æˆ·ç«¯ä¸å…³å¿ƒè¿”å›å€¼ï¼Œåªå…³å¿ƒæ•°æ®æ˜¯å¦å†™å…¥æˆåŠŸï¼Œé‚£ä¹ˆSET&#47;HSET&#47;SADDä¸ç®—å…³é”®è·¯å¾„ï¼Œå¤šæ¬¡æ‰§è¡Œè¿™äº›å‘½ä»¤éƒ½æ˜¯å¹‚ç­‰çš„ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥æ”¾åˆ°å¼‚æ­¥çº¿ç¨‹ä¸­æ‰§è¡Œã€‚<br><br>3ã€ä½†æ˜¯æœ‰ç§ä¾‹å¤–æƒ…å†µï¼Œå¦‚æœRedisè®¾ç½®äº†maxmemoryï¼Œä½†æ˜¯å´æ²¡æœ‰è®¾ç½®æ·˜æ±°ç­–ç•¥ï¼Œè¿™ä¸‰ä¸ªæ“ä½œä¹Ÿéƒ½ç®—å…³é”®è·¯å¾„ã€‚å› ä¸ºå¦‚æœRediså†…å­˜è¶…è¿‡äº†maxmemoryï¼Œå†å†™å…¥æ•°æ®æ—¶ï¼ŒRedisè¿”å›çš„ç»“æœæ˜¯OOM errorï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯éœ€è¦æ„ŸçŸ¥æœ‰é”™è¯¯å‘ç”Ÿæ‰è¡Œã€‚<br><br>å¦å¤–ï¼Œæˆ‘æŸ¥é˜…äº†lazy-freeç›¸å…³çš„æºç ï¼Œå‘ç°æœ‰å¾ˆå¤šç»†èŠ‚éœ€è¦è¡¥å……ä¸‹ï¼š<br><br>1ã€lazy-freeæ˜¯4.0æ–°å¢çš„åŠŸèƒ½ï¼Œä½†æ˜¯é»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ã€‚<br><br>2ã€æ‰‹åŠ¨å¼€å¯lazy-freeæ—¶ï¼Œæœ‰4ä¸ªé€‰é¡¹å¯ä»¥æ§åˆ¶ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒåœºæ™¯ä¸‹ï¼Œè¦ä¸è¦å¼€å¯å¼‚æ­¥é‡Šæ”¾å†…å­˜æœºåˆ¶ï¼š<br>a) lazyfree-lazy-expireï¼škeyåœ¨è¿‡æœŸåˆ é™¤æ—¶å°è¯•å¼‚æ­¥é‡Šæ”¾å†…å­˜<br>b) lazyfree-lazy-evictionï¼šå†…å­˜è¾¾åˆ°maxmemoryå¹¶è®¾ç½®äº†æ·˜æ±°ç­–ç•¥æ—¶å°è¯•å¼‚æ­¥é‡Šæ”¾å†…å­˜<br>c) lazyfree-lazy-server-delï¼šæ‰§è¡ŒRENAME&#47;MOVEç­‰å‘½ä»¤æˆ–éœ€è¦è¦†ç›–ä¸€ä¸ªkeyæ—¶ï¼Œåˆ é™¤æ—§keyå°è¯•å¼‚æ­¥é‡Šæ”¾å†…å­˜<br>d) replica-lazy-flushï¼šä¸»ä»å…¨é‡åŒæ­¥ï¼Œä»åº“æ¸…ç©ºæ•°æ®åº“æ—¶å¼‚æ­¥é‡Šæ”¾å†…å­˜<br><br>3ã€å³ä½¿å¼€å¯äº†lazy-freeï¼Œå¦‚æœç›´æ¥ä½¿ç”¨DELå‘½ä»¤è¿˜æ˜¯ä¼šåŒæ­¥åˆ é™¤keyï¼Œåªæœ‰ä½¿ç”¨UNLINKå‘½ä»¤æ‰ä¼šå¯èƒ½å¼‚æ­¥åˆ é™¤keyã€‚<br><br>4ã€è¿™ä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€ç‚¹ï¼Œä¸Šé¢æåˆ°å¼€å¯lazy-freeçš„åœºæ™¯ï¼Œé™¤äº†replica-lazy-flushä¹‹å¤–ï¼Œå…¶ä»–æƒ…å†µéƒ½åªæ˜¯*å¯èƒ½*å»å¼‚æ­¥é‡Šæ”¾keyçš„å†…å­˜ï¼Œå¹¶ä¸æ˜¯æ¯æ¬¡å¿…å®šå¼‚æ­¥é‡Šæ”¾å†…å­˜çš„ã€‚<br><br>å¼€å¯lazy-freeåï¼ŒRedisåœ¨é‡Šæ”¾ä¸€ä¸ªkeyçš„å†…å­˜æ—¶ï¼Œé¦–å…ˆä¼šè¯„ä¼°ä»£ä»·ï¼Œå¦‚æœé‡Šæ”¾å†…å­˜çš„ä»£ä»·å¾ˆå°ï¼Œé‚£ä¹ˆå°±ç›´æ¥åœ¨ä¸»çº¿ç¨‹ä¸­æ“ä½œäº†ï¼Œæ²¡å¿…è¦æ”¾åˆ°å¼‚æ­¥çº¿ç¨‹ä¸­æ‰§è¡Œï¼ˆä¸åŒçº¿ç¨‹ä¼ é€’æ•°æ®ä¹Ÿä¼šæœ‰æ€§èƒ½æ¶ˆè€—ï¼‰ã€‚<br><br>ä»€ä¹ˆæƒ…å†µæ‰ä¼šçœŸæ­£å¼‚æ­¥é‡Šæ”¾å†…å­˜ï¼Ÿè¿™å’Œkeyçš„ç±»å‹ã€ç¼–ç æ–¹å¼ã€å…ƒç´ æ•°é‡éƒ½æœ‰å…³ç³»ï¼ˆè¯¦ç»†å¯å‚è€ƒæºç ä¸­çš„lazyfreeGetFreeEffortå‡½æ•°ï¼‰ï¼š<br><br>a) å½“Hash&#47;Setåº•å±‚é‡‡ç”¨å“ˆå¸Œè¡¨å­˜å‚¨ï¼ˆéziplist&#47;intç¼–ç å­˜å‚¨ï¼‰æ—¶ï¼Œå¹¶ä¸”å…ƒç´ æ•°é‡è¶…è¿‡64ä¸ª<br>b) å½“ZSetåº•å±‚é‡‡ç”¨è·³è¡¨å­˜å‚¨ï¼ˆéziplistç¼–ç å­˜å‚¨ï¼‰æ—¶ï¼Œå¹¶ä¸”å…ƒç´ æ•°é‡è¶…è¿‡64ä¸ª<br>c) å½“Listé“¾è¡¨èŠ‚ç‚¹æ•°é‡è¶…è¿‡64ä¸ªï¼ˆæ³¨æ„ï¼Œä¸æ˜¯å…ƒç´ æ•°é‡ï¼Œè€Œæ˜¯é“¾è¡¨èŠ‚ç‚¹çš„æ•°é‡ï¼ŒListçš„å®ç°æ˜¯åœ¨æ¯ä¸ªèŠ‚ç‚¹åŒ…å«äº†è‹¥å¹²ä¸ªå…ƒç´ çš„æ•°æ®ï¼Œè¿™äº›å…ƒç´ é‡‡ç”¨ziplistå­˜å‚¨ï¼‰<br><br>åªæœ‰ä»¥ä¸Šè¿™äº›æƒ…å†µï¼Œåœ¨åˆ é™¤keyé‡Šæ”¾å†…å­˜æ—¶ï¼Œæ‰ä¼šçœŸæ­£æ”¾åˆ°å¼‚æ­¥çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå…¶ä»–æƒ…å†µä¸€å¾‹è¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹æ“ä½œã€‚<br><br>ä¹Ÿå°±æ˜¯è¯´Stringï¼ˆä¸ç®¡å†…å­˜å ç”¨å¤šå¤§ï¼‰ã€Listï¼ˆå°‘é‡å…ƒç´ ï¼‰ã€Setï¼ˆintç¼–ç å­˜å‚¨ï¼‰ã€Hash&#47;ZSetï¼ˆziplistç¼–ç å­˜å‚¨ï¼‰è¿™äº›æƒ…å†µä¸‹çš„keyåœ¨é‡Šæ”¾å†…å­˜æ—¶ï¼Œä¾æ—§åœ¨ä¸»çº¿ç¨‹ä¸­æ“ä½œã€‚<br><br>å¯è§ï¼Œå³ä½¿å¼€å¯äº†lazy-freeï¼ŒStringç±»å‹çš„bigkeyï¼Œåœ¨åˆ é™¤æ—¶ä¾æ—§æœ‰é˜»å¡ä¸»çº¿ç¨‹çš„é£é™©ã€‚æ‰€ä»¥ï¼Œå³ä¾¿Redisæä¾›äº†lazy-freeï¼Œæˆ‘å»ºè®®è¿˜æ˜¯å°½é‡ä¸è¦åœ¨Redisä¸­å­˜å‚¨bigkeyã€‚<br><br>ä¸ªäººç†è§£Redisåœ¨è®¾è®¡è¯„ä¼°é‡Šæ”¾å†…å­˜çš„ä»£ä»·æ—¶ï¼Œä¸æ˜¯çœ‹keyçš„å†…å­˜å ç”¨æœ‰å¤šå°‘ï¼Œè€Œæ˜¯å…³æ³¨é‡Šæ”¾å†…å­˜æ—¶çš„å·¥ä½œé‡æœ‰å¤šå¤§ã€‚ä»ä¸Šé¢åˆ†æåŸºæœ¬èƒ½çœ‹å‡ºï¼Œå¦‚æœéœ€è¦é‡Šæ”¾çš„å†…å­˜æ˜¯è¿ç»­çš„ï¼ŒRedisä½œè€…è®¤ä¸ºé‡Šæ”¾å†…å­˜çš„ä»£ä»·æ¯”è¾ƒä½ï¼Œå°±æ”¾åœ¨ä¸»çº¿ç¨‹åšã€‚å¦‚æœé‡Šæ”¾çš„å†…å­˜ä¸è¿ç»­ï¼ˆå¤§é‡æŒ‡é’ˆç±»å‹çš„æ•°æ®ï¼‰ï¼Œè¿™ä¸ªä»£ä»·å°±æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥æ‰ä¼šæ”¾åœ¨å¼‚æ­¥çº¿ç¨‹ä¸­å»æ‰§è¡Œã€‚<br><br>å¦‚æœæˆ‘çš„ç†è§£æœ‰åå·®ï¼Œè¿˜è¯·è€å¸ˆå’Œå¤§å®¶æŒ‡å‡ºï¼","like_count":495,"discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305732,"discussion_content":"åˆšåˆçœ‹äº†ä¸€ä¸‹ï¼ŒRedis 6.0åˆæä¾›ä¸€ä¸ªé€‰é¡¹ï¼šlazyfree-lazy-user-delã€‚\n\næ‰“å¼€è¿™ä¸ªé€‰é¡¹åï¼Œä½¿ç”¨DELå’ŒUNLINKå°±æ²¡æœ‰åŒºåˆ«äº†ã€‚","likes_number":59,"is_delete":false,"is_hidden":false,"ctime":1600071522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047423,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/7f/746a6f5e.jpg","nickname":"Q","note":"","ucode":"785546C617D3DF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305615,"discussion_content":"å¤§ä½¬æ¯æ¬¡çš„æ€»ç»“ï¼Œå¯ä»¥é›†åˆæˆä¸€ä¸ªä¸“æ äº†ï¼ŒğŸ˜„ï¼èµğŸ‘","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1600039205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1325816,"avatar":"https://static001.geekbang.org/account/avatar/00/14/3a/f8/c1a939e7.jpg","nickname":"å›å“¥èŠæŠ€æœ¯","note":"","ucode":"2C9A22BCE4C79E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1047423,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/7f/746a6f5e.jpg","nickname":"Q","note":"","ucode":"785546C617D3DF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305636,"discussion_content":"ç¡®å®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600043289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305615,"ip_address":""},"score":305636,"extra":""},{"author":{"id":1069127,"avatar":"https://static001.geekbang.org/account/avatar/00/10/50/47/46da4585.jpg","nickname":"Fan()","note":"","ucode":"FED79EC7D78E91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1047423,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/7f/746a6f5e.jpg","nickname":"Q","note":"","ucode":"785546C617D3DF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305642,"discussion_content":"ç¡®å®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600044511,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305615,"ip_address":""},"score":305642,"extra":""},{"author":{"id":2201323,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/CV9kk5M26pdxvFhbrkicjZa4avHTfWWPJCKCIrkhgws8WN9RJAJ5D4oGAPgAOVXmDk9gKEQ9nbrhia9Qjsqk4DyA/132","nickname":"crtmsvc","note":"","ucode":"A00D3FB17CB614","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1047423,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fb/7f/746a6f5e.jpg","nickname":"Q","note":"","ucode":"785546C617D3DF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311130,"discussion_content":"ç¡®å®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602232314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305615,"ip_address":""},"score":311130,"extra":""}]},{"author":{"id":1209939,"avatar":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","nickname":"é²Â·æœ¬","note":"","ucode":"F1DEB30C21B48E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325544,"discussion_content":"è€å¸ˆä¸çŸ¥ä»å•¥æ—¶å€™å¼€å§‹å°±æ¶ˆå¤±ä¸å›å¤è¯„è®ºäº†","likes_number":18,"is_delete":false,"is_hidden":false,"ctime":1605342799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1932460,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/7c/ac/f7106c90.jpg","nickname":"i","note":"","ucode":"334B4F089CB983","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351032,"discussion_content":"åŠŸé«˜ç›–ä¸»äº†","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1614129376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1227366,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ba/66/7d9f45e7.jpg","nickname":"å¤ªç©ºç‰›ä»”","note":"","ucode":"0205635C3854AF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1932460,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/7c/ac/f7106c90.jpg","nickname":"i","note":"","ucode":"334B4F089CB983","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545781,"discussion_content":"è¿™ä¹ˆå¯æ€•å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642050069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351032,"ip_address":""},"score":545781,"extra":""},{"author":{"id":2630632,"avatar":"https://static001.geekbang.org/account/avatar/00/28/23/e8/9f445339.jpg","nickname":"ç« æ½˜","note":"","ucode":"1A24E1B3084450","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1932460,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/7c/ac/f7106c90.jpg","nickname":"i","note":"","ucode":"334B4F089CB983","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588930,"discussion_content":"è’‹è€å¸ˆå¯¹redisçš„ç†è§£å’Œè¡¨è¾¾èƒ½åŠ›æ˜æ˜¾å¼ºå¾ˆå¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664237177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351032,"ip_address":"å¹¿ä¸œ"},"score":588930,"extra":""}]},{"author":{"id":1079495,"avatar":"https://static001.geekbang.org/account/avatar/00/10/78/c7/083a3a0b.jpg","nickname":"æ–°ä¸–ç•Œ","note":"","ucode":"4473DC1505F158","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331796,"discussion_content":" ç¡®å®ï¼Œkaitoå¯ä»¥å¼€ä¸ªä¸“æ äº†","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1606979987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2320446,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJxzxDIUjoToCibu1fOnK5xII7WdYkkgxSL3tbd9uTicZhhaqZ42rIhDT3J3jmQZL2sxX3om3jI9xRA/132","nickname":"Geek_88888888","note":"","ucode":"8CA811FA981159","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353117,"discussion_content":"å°kkï¼ŒçœŸæ­£å¼‚æ­¥é‡Šæ”¾å†…å­˜çš„a b cå‡ ç§æƒ…å†µä¸­, è¿˜éœ€è¦åŒæ—¶æ»¡è¶³å¼•ç”¨æ¬¡æ•°ä»…ä¸º1çš„æ—¶å€™ï¼Œæ‰èƒ½å¼‚æ­¥é‡Šæ”¾~","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1615018078,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2320446,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJxzxDIUjoToCibu1fOnK5xII7WdYkkgxSL3tbd9uTicZhhaqZ42rIhDT3J3jmQZL2sxX3om3jI9xRA/132","nickname":"Geek_88888888","note":"","ucode":"8CA811FA981159","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577110,"discussion_content":"ä»€ä¹ˆæ—¶å€™ä¼šå¢åŠ RedisObjectçš„å¼•ç”¨è®¡æ•°å•Š?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655920548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":353117,"ip_address":""},"score":577110,"extra":""},{"author":{"id":2662872,"avatar":"https://static001.geekbang.org/account/avatar/00/28/a1/d8/42252c48.jpg","nickname":"123","note":"","ucode":"5A343B568B9524","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586019,"discussion_content":"ä¸ºäº†å†…å­˜èƒ½é‡å¤ä½¿ç”¨ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´ï¼Œredis æ•°æ®å¯¹è±¡å¯èƒ½è¢«å…±äº«ï¼Œé€šè¿‡å¼•ç”¨è®¡æ•°ï¼Œç»Ÿè®¡å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œredisåœ¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ·»åŠ 0-9999çš„æ•´æ•°å­—ç¬¦ä¸²ï¼Œå¾…è®¾ç½®æ–°çš„keyçš„å€¼å¯¹è±¡åœ¨0-9999ä¹‹é—´ï¼Œä¼šå¤ç”¨åŸæœ‰çš„å†…å­˜åœ°å€ï¼Œå°†å¯¹åº”é”®å€¼çš„å¼•ç”¨å¯¹è±¡è¿›è¡Œæ”¹å˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661936786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":577110,"ip_address":"æµ™æ±Ÿ"},"score":586019,"extra":""}]},{"author":{"id":2015036,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJxTic6Oaob2NaRp4uQ1hI08fFJpH0vB7cEymDhz9kufQZ5ibAxkrvwtjjDM7parCAye8S24zWZtqiaw/132","nickname":"Geek_35d414","note":"","ucode":"8CED159FEF7260","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371423,"discussion_content":"æœç„¶æºç æ˜¯ç‹é“","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1619765831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1101762,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/c2/a5b3ceaf.jpg","nickname":"helloworld","note":"","ucode":"003700A99A910B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348951,"discussion_content":"è¯¾ä»£è¡¨ä½ å¥½,  è¯·æ•™ä¸€ä¸ªé—®é¢˜:  è€å¸ˆåœ¨æ–‡ä¸­è¯´ AOF åŒæ­¥å†™è¿™ä¸ªæ“ä½œæ˜¯åœ¨å­çº¿ç¨‹æ‰§è¡Œçš„, ä½†åœ¨ä¹‹å‰çš„æ–‡ç« è¯´ AOF åŒæ­¥å†™ä¼šå½±å“æ€§èƒ½, è¿™ä¸¤å¤„è¯´æ³•è¯¥æ€ä¹ˆç†è§£å‘¢? æˆ‘çš„ç†è§£æ˜¯ AOF åŒæ­¥å†™å°±æ˜¯åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„,æ‰§è¡Œå®Œæ‰èƒ½ä¼šè¿”å›ç»™å®¢æˆ·ç«¯.","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1612792549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":7,"child_discussions":[{"author":{"id":1112676,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/64/457325e6.jpg","nickname":"Sam Fu","note":"","ucode":"EA285A4943271F","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1101762,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/c2/a5b3ceaf.jpg","nickname":"helloworld","note":"","ucode":"003700A99A910B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348989,"discussion_content":"+1ï¼Œ æˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘æƒ‘ï¼Œå¬è€å¸ˆçš„æ„æ€å¥½åƒæ˜¯å…¨ç¨‹å­çº¿ç¨‹å®Œæˆï¼Œé‚£éƒ½åœ¨å­çº¿ç¨‹äº†ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šé˜»å¡å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612835992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":348951,"ip_address":""},"score":348989,"extra":""},{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1101762,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/c2/a5b3ceaf.jpg","nickname":"helloworld","note":"","ucode":"003700A99A910B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348993,"discussion_content":"AOFåˆ·ç›˜æ˜¯æœ‰å‚æ•°å¯ä»¥æ§åˆ¶çš„ï¼Œå¯ä»¥åœ¨ä¸»çº¿ç¨‹åšï¼Œæˆ‘å¯ä»¥æ”¾åœ¨å­çº¿ç¨‹åšã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612836563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":348951,"ip_address":""},"score":348993,"extra":""},{"author":{"id":2162784,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/9ExlO4FktmTib5RRJKaxic2bbS7AicJodsnms8jOGibG53ibNyqicHO1F7LKOaDjDNTlyqCO91NXTlLcYlFia2sO5SPQw/132","nickname":"æ¼‚æ³Šçš„å°ç å†œ","note":"","ucode":"8557471627BA6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":350124,"discussion_content":"å¦‚æœé…ç½®çš„alwaysï¼Œå°±æ˜¯åœ¨ä¸»çº¿ç¨‹åšçš„å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613718294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":348993,"ip_address":""},"score":350124,"extra":""}]},{"author":{"id":1101762,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/c2/a5b3ceaf.jpg","nickname":"helloworld","note":"","ucode":"003700A99A910B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348945,"discussion_content":"æ¯æ¬¡çœ‹å®Œæ–‡ç« ,å¿…çœ‹è¯¾ä»£è¡¨çš„æ€»ç»“,çœ‹å®Œæ€»ç»“,æ¯æ¬¡ä¸ç”±è‡ªä¸»æƒ³ç»™è¯¾ä»£è¡¨ç‚¹èµ!","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1612790077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1312184,"avatar":"https://static001.geekbang.org/account/avatar/00/14/05/b8/8d468842.jpg","nickname":"JulyRemember","note":"","ucode":"9E3D5D60D82999","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305687,"discussion_content":"æ­£å¥½æœ‰å¥½å¤šå¼‚æ­¥åˆ é™¤keyçš„é—®é¢˜æƒ³é—®ï¼Œçœ‹è¿‡ä½ çš„æ€»ç»“å‡†å¤‡å»çœ‹ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œæœ‰äº›åœ°æ–¹è¿˜æ˜¯æ²¡ç†è§£ï¼Œå¦‚æœæ˜¯å¼‚æ­¥åˆ é™¤çš„è¯ï¼Œåœ¨æ²¡æœ‰çœŸæ­£åˆ é™¤ä¹‹å‰æŸ¥è¯¢æ€ä¹ˆåŠï¼Œæˆ‘è®°å¾—æ˜¯ä¼šæœ‰åˆ é™¤æ ‡è®°çš„å§ï¼Œæˆ‘è¦å†å»çœ‹çœ‹ï¼Œå°±å’Œjavaè™šæ‹Ÿæœºåƒåœ¾å›æ”¶ä¸€æ ·ï¼Œæœ‰ä¸ªæ ‡è®°æ¸…é™¤çš„ç®—æ³•","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1600058550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":11,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1312184,"avatar":"https://static001.geekbang.org/account/avatar/00/14/05/b8/8d468842.jpg","nickname":"JulyRemember","note":"","ucode":"9E3D5D60D82999","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305696,"discussion_content":"æ”¾åˆ°å¼‚æ­¥çº¿ç¨‹ä¹‹å‰ï¼Œå…ˆåœ¨ä¸»çº¿ç¨‹ä¸­æŠŠè¿™ä¸ªkeyä»æ•°æ®åº“ä¸­åˆ æ‰ï¼Œå†è¿›æ¥çš„æŸ¥è¯¢è¯·æ±‚å°±æŸ¥ä¸åˆ°è¿™ä¸ªkeyäº†ã€‚","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1600061973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305687,"ip_address":""},"score":305696,"extra":""},{"author":{"id":1312184,"avatar":"https://static001.geekbang.org/account/avatar/00/14/05/b8/8d468842.jpg","nickname":"JulyRemember","note":"","ucode":"9E3D5D60D82999","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":305711,"discussion_content":"æ‚¨è¯´çš„æ•°æ®åº“åˆ é™¤æ˜¯æŒ‡å…³ç³»æ€§æ•°æ®åº“å§ï¼Œè¿˜æœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘çœ‹äº†rediså®˜ç½‘ï¼Œå“ªé‡Œå¯ä»¥çœ‹åˆ°lazyfreeçš„ç›¸å…³æ–‡æ¡£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600065693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305696,"ip_address":""},"score":305711,"extra":""},{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1312184,"avatar":"https://static001.geekbang.org/account/avatar/00/14/05/b8/8d468842.jpg","nickname":"JulyRemember","note":"","ucode":"9E3D5D60D82999","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305713,"discussion_content":"ä¸æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œä»æ•°æ®åº“ä¸­åˆ é™¤æŒ‡çš„æ˜¯Redisçš„å…¨å±€é”®å€¼å¯¹çš„dictä¸­å‰”é™¤ã€‚\n\næ–‡æ¡£æˆ‘æ²¡å…·ä½“å…³æ³¨ï¼Œæˆ‘çœ‹çš„æ˜¯æºç ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1600066680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305711,"ip_address":""},"score":305713,"extra":""}]},{"author":{"id":1503506,"avatar":"https://static001.geekbang.org/account/avatar/00/16/f1/12/7dac30d6.jpg","nickname":"ä½ ä¸ºå•¥é‚£ä¹ˆç‰›","note":"","ucode":"1ABC604A54A8F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340684,"discussion_content":"ç»™ä½ ä¸€æœµå°çº¢èŠ±","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1610097028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305656,"discussion_content":"ä¼˜ç§€è¯¾ä»£è¡¨","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1600048409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1227366,"avatar":"https://static001.geekbang.org/account/avatar/00/12/ba/66/7d9f45e7.jpg","nickname":"å¤ªç©ºç‰›ä»”","note":"","ucode":"0205635C3854AF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545782,"discussion_content":"å¤©ä¸‹è¯„è®ºä¸‰åƒ æˆ‘åªçœ‹ä½ ä¸€äºº","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1642050137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2805682,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/cf/b2/2a124ccc.jpg","nickname":"æ˜äººä¸åšæš—äº‹","note":"","ucode":"10D845C54312C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411086,"discussion_content":"å¤§ä½¬å¤ªå¼ºäº†ã€‚æ¯æ¬¡éƒ½æ˜¯çœ‹å®Œè€å¸ˆçš„æ–‡ç« ï¼Œå¿…é¡»è¦å†çœ‹ä¸‹ä½ çš„æ€»ç»“æ‰ç®—æŠŠæœ¬èŠ‚è¯¾å­¦å®Œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635845557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1779061,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/25/75/d38dacaf.jpg","nickname":"æå®‰æ°‘","note":"","ucode":"B5C45FD56E652B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408973,"discussion_content":"è€å¸ˆ æ‚¨å¥½ ä»€ä¹ˆæ—¶å€™å¼€ä¸€é—¨è¯¾ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635347739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1641326,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJDdmHm6txEVtEXEDibSdIsRLEpghOoMt2kfZHetY9QLWHygicKCfhVoYiaylAZJoXbcCMBhXqMF4icgw/132","nickname":"æ´—æ´—ç¡å§","note":"","ucode":"DE7F8B4CA512F6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385340,"discussion_content":"ä½ è¿™æ ·è€å¸ˆå¾ˆæ²¡é¢å­å•Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627008127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1641326,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJDdmHm6txEVtEXEDibSdIsRLEpghOoMt2kfZHetY9QLWHygicKCfhVoYiaylAZJoXbcCMBhXqMF4icgw/132","nickname":"æ´—æ´—ç¡å§","note":"","ucode":"DE7F8B4CA512F6","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":385485,"discussion_content":"è€å¸ˆæ¯èŠ‚è¯¾ä¸å¯èƒ½è®²çš„å¾ˆå…¨å¾ˆç»†ï¼Œè€Œä¸”æ¯ä¸ªäººçš„åŸºç¡€ä¹Ÿä¸ä¸€æ ·ã€‚å¤§ä½“æ–¹å‘æœ‰äº†ï¼Œèƒ½åŠ›å¼ºçš„ï¼Œå¯ä»¥è‡ªå·±å†åšæ·±å…¥ã€‚è¯¾ä»£è¡¨å¯¹ä¸€äº›ç»†èŠ‚åšè¡¥å……ï¼Œæˆ‘è§‰å¾—ä»–ä¿©é…åˆçš„æŒºå¥½çš„ï¼Œå“ˆå“ˆ...","likes_number":12,"is_delete":false,"is_hidden":false,"ctime":1627092637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":385340,"ip_address":""},"score":385485,"extra":""},{"author":{"id":1272315,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/nSvVtStiaQzslFM7YRnlhPyTgSHGoXvOqlSQS8rMEmfnFCtasNxRiaVfrRcMlkuOSq1iaReQD0CiaGHMVibsVMNkAxQ/132","nickname":"justin","note":"","ucode":"09AE502D6A28D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1641326,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJDdmHm6txEVtEXEDibSdIsRLEpghOoMt2kfZHetY9QLWHygicKCfhVoYiaylAZJoXbcCMBhXqMF4icgw/132","nickname":"æ´—æ´—ç¡å§","note":"","ucode":"DE7F8B4CA512F6","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":412967,"discussion_content":"çš„ç¡®æ˜¯æ²¡é¢å­ï¼Œè€å¸ˆè®²çš„æ¯”è¾ƒhighï¼Œååº”ç”¨å®è·µï¼Œæ„Ÿè§‰å¯¹æºç æ²¡æœ‰æ€ä¹ˆæ·±å…¥ç ”ç©¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636342858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":385340,"ip_address":""},"score":412967,"extra":""},{"author":{"id":2729003,"avatar":"https://static001.geekbang.org/account/avatar/00/29/a4/2b/0e1bab59.jpg","nickname":"senda","note":"","ucode":"74541011088AFB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1272315,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/nSvVtStiaQzslFM7YRnlhPyTgSHGoXvOqlSQS8rMEmfnFCtasNxRiaVfrRcMlkuOSq1iaReQD0CiaGHMVibsVMNkAxQ/132","nickname":"justin","note":"","ucode":"09AE502D6A28D9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545943,"discussion_content":"ä½ é”™äº†ï¼Œä¸ç ”ç©¶æºç ï¼Œæ ¹æœ¬å†™ä¸å‡ºè¿™æ ·çš„æ–‡ç« æ¥","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1642087077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":412967,"ip_address":""},"score":545943,"extra":""}]},{"author":{"id":1879262,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/ac/de/68f35320.jpg","nickname":"å°æ¥å­","note":"","ucode":"4EDAF31E43B211","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342719,"discussion_content":"æœ‰kaitoå¤§ä½¬çš„è¯, è¿™ä¸ªä¸“æ å˜å¾—å¤ªæ£’äº†~  kaitoå¤§ä½¬ä¸æ­¢æ˜¯æ€»ç»“å’Œè¡¥å……åˆ°ä½, æ›´æ˜¯ç»™å¤§å®¶æŠ›å‡ºäº†å­¦ä¹ æ–¹å‘.","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610792129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1001893,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","nickname":"å°æ–‡åŒå­¦","note":"","ucode":"48F2AEB989C12A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305942,"discussion_content":"hiï¼Œè¯¾ä»£è¡¨ï¼æˆ‘æƒ³é—®é—®è¦è¯» Redis çš„æºç éœ€è¦ä»€ä¹ˆæ ·çš„é¢„å¤‡çŸ¥è¯†ï¼Ÿæˆ‘æŠŠ Redis çš„æºç æ‹·è´ä¸‹æ¥äº†ï¼Œä¹Ÿç¼–è¯‘å®Œæˆï¼Œåœ¨ VS ä¸Šå¯ä»¥ debug äº†ã€‚å‰©ä¸‹å°±ç¡¬åƒä¹ˆï¼Ÿæ„Ÿè§‰é‡Œå¤´çš„æºç éƒ½æ˜¯å‡ åƒè¡Œï¼Œå‡ åƒè¡Œçš„æ¥çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600135173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1001893,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","nickname":"å°æ–‡åŒå­¦","note":"","ucode":"48F2AEB989C12A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305950,"discussion_content":"å…ˆçœ‹åº•å±‚æ•°æ®ç±»å‹çš„å®ç°ï¼Œå†çœ‹æ¯ç§æ•°æ®ç±»å‹çš„å‘½ä»¤æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Œæœ€åå†å…³æ³¨ä¸»ä»å¤åˆ¶ã€é«˜å¯ç”¨ã€åˆ‡ç‰‡é›†ç¾¤ç›¸å…³çš„é€»è¾‘ã€‚","likes_number":20,"is_delete":false,"is_hidden":false,"ctime":1600135548,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305942,"ip_address":""},"score":305950,"extra":""},{"author":{"id":1001893,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/49/a5/e4c1c2d4.jpg","nickname":"å°æ–‡åŒå­¦","note":"","ucode":"48F2AEB989C12A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":305987,"discussion_content":"thanks.","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600143218,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305950,"ip_address":""},"score":305987,"extra":""}]},{"author":{"id":1811495,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a4/27/15e75982.jpg","nickname":"å°è¢","note":"","ucode":"3F5D8721F577D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305786,"discussion_content":"æˆ‘æ˜¯è¿‡æ¥æŠ„ä½œä¸šçš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600084849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1312184,"avatar":"https://static001.geekbang.org/account/avatar/00/14/05/b8/8d468842.jpg","nickname":"JulyRemember","note":"","ucode":"9E3D5D60D82999","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305689,"discussion_content":"è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œå†™çš„æ—¶å€™çœ‹æ˜¯å¦æ˜¯å…³é”®è·¯å¾„ä¸ç”¨è€ƒè™‘å†™å¤±è´¥å—ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸æˆ–è€…æ˜¯å› ä¸ºå†™å¹‚ç­‰çš„åŸå› å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600058659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1312184,"avatar":"https://static001.geekbang.org/account/avatar/00/14/05/b8/8d468842.jpg","nickname":"JulyRemember","note":"","ucode":"9E3D5D60D82999","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305697,"discussion_content":"æ—¢ç„¶æ”¾åˆ°å¼‚æ­¥æ‰§è¡Œï¼Œå°±å¿…é¡»è¦ä¿è¯æˆåŠŸã€‚å¦‚æœæœ‰å¤±è´¥é£é™©ï¼Œåªèƒ½åŒæ­¥æ¥åšæŠŠç»“æœè¿”å›å®¢æˆ·ç«¯ï¼Œæˆ–è€…ç”¨å…¶ä»–æœºåˆ¶ä¿è¯ä¸ä¼šå¤±è´¥ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1600062114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305689,"ip_address":""},"score":305697,"extra":""}]},{"author":{"id":1103171,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d5/43/714ec40b.jpg","nickname":"ç‡ƒæƒ…å²æœˆ","note":"","ucode":"97F046C32715F9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590060,"discussion_content":"ç»†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665493528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3013303,"avatar":"https://static001.geekbang.org/account/avatar/00/2d/fa/b7/0342db08.jpg","nickname":"å¤§æ’æ³¡é¥­","note":"","ucode":"30B882AAB67CC5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574266,"discussion_content":"hihi, æ—¢ç„¶linkedListæ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªziplistï¼Œ é‚£skiplistçš„èŠ‚ç‚¹æœ‰æ²¡æœ‰ä¹Ÿç”¨è¿™ç§æ•°æ®ç»“æ„ï¼Œæ„Ÿè§‰è¿™æ ·å®ç°å‡ºæ¥ä¼šå¿«å¾ˆå¤šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653929535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1415619,"avatar":"https://static001.geekbang.org/account/avatar/00/15/99/c3/e4f408d4.jpg","nickname":"é™Œå…®","note":"","ucode":"00CE47CAECD5CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553497,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645932293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2856313,"avatar":"","nickname":"Yipsen","note":"","ucode":"F0ECE8C12AF105","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535696,"discussion_content":"ä½ å¥½ï¼Œè¯·æ•™ä¸¤ä¸ªé—®é¢˜ï¼š1. è€å¸ˆç”»çš„å›¾é‡Œä¸»ä»åŒæ­¥é‡‡ç”¨çš„æ˜¯RDBï¼Œä¸ºä»€ä¹ˆä¸åªæ˜¯é‡‡ç”¨RDBåšåˆå§‹åŒæ­¥ï¼Œåç»­å†é‡‡ç”¨AOFæ¥å¢é‡åŒæ­¥å‘¢ï¼Ÿæ„Ÿè§‰æ¯æ¬¡ä¼ è¾“RDBéå¸¸å¤§è€Œä¸”æœ‰å»¶è¿Ÿï¼ŒAOFå¢é‡å°±æ‹†å°äº†ã€‚2. è€å¸ˆè¯¾ä¸­è¯´åˆ°å¼‚æ­¥ä»»åŠ¡æœ‰ä¸ªé˜Ÿåˆ—ï¼Œé‚£å¼‚æ­¥å­çº¿ç¨‹æ˜¯æœ‰çº¿ç¨‹æ± çš„å—ï¼Ÿå¦‚æœæ²¡æœ‰çš„è¯ï¼Œæœ‰æ²¡æœ‰å¯èƒ½ä»»åŠ¡å¤ªå¤šæŠŠCPUæ‰“çˆ†äº†ã€‚é‚£å¦‚æœæœ‰çš„è¯ï¼Œåˆæ˜¯æ€ä¹ˆä¿è¯AOFåœ¨everysecå®Œæˆå¤„ç†çš„ï¼Œæœ‰å¯èƒ½AOFæ‰§è¡Œæ—¶ï¼Œçº¿ç¨‹æ± æ²¡æœ‰å¯ç”¨çš„äº†ï¼Œéƒ½åœ¨é˜»å¡ï¼Œæ­¤æ—¶çš„AOFæ‰§è¡Œä¸äº†éœ€è¦ç­‰å¾…ï¼Œé‚£å°±æœ‰å¯èƒ½ä¿è¯ä¸äº†ç§’çº§äº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638520534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000441,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/43/f9/723ee153.jpg","nickname":"wessonwang","note":"","ucode":"A9BA5E3A3F278E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534983,"discussion_content":"listèŠ‚ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638327914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1272315,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/nSvVtStiaQzslFM7YRnlhPyTgSHGoXvOqlSQS8rMEmfnFCtasNxRiaVfrRcMlkuOSq1iaReQD0CiaGHMVibsVMNkAxQ/132","nickname":"justin","note":"","ucode":"09AE502D6A28D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412961,"discussion_content":"æ„Ÿè§‰è€å¸ˆæ²¡æœ‰ä½ æ‡‚å¾—å¤šã€‚ å“ˆå“ˆï¼Œ æ¯•ç«Ÿä½ åº”è¯¥æ˜¯è¯»äº†æºç çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636341798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1289329,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ac/71/1661342c.jpg","nickname":"Limmy","note":"","ucode":"67E91AA8EC0729","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410329,"discussion_content":"å¼‚æ­¥åˆ é™¤çš„è¯ï¼Œå¦‚æœçœŸæ­£åˆ é™¤ä¹‹å‰çš„è¯»å–æ˜¯ä¸æ˜¯è¿˜æ˜¯èƒ½å¤Ÿè¯»åˆ°å‘¢ã€‚å¦‚æœä¸æ˜¯çš„è¯ï¼Œæ˜¯å¦ä¼šé˜»å¡åé¢å¯¹è¯¥å€¼çš„è¯»å–å’Œå†™æ“ä½œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635665813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1098987,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","nickname":"èŠ±æ™¨å°‘å¹´","note":"","ucode":"6AA3537A6BA10E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380822,"discussion_content":"è¯·é—®ï¼Œå¦‚æœaofé…ç½®é€‰é¡¹æ˜¯alwaysçš„è¯ï¼Œåº”è¯¥ä¸èƒ½ä½¿ç”¨å­çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œè¿™ä¸ªè½æ—¥å¿—æ“ä½œæŠŠï¼Ÿ\nå› ä¸ºæˆ‘ç†è§£alwaysåº”è¯¥æ˜¯ä¸ºäº†ä¿è¯æ•°æ®å®‰å…¨æ€§ï¼Œå¦‚æœå¼‚æ­¥æ‰§è¡Œï¼Œå°±å¤±å»äº†ä¿è¯æ•°æ®å®‰å…¨æ€§çš„æ„ä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624713632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2673963,"avatar":"https://static001.geekbang.org/account/avatar/00/28/cd/2b/2a640e56.jpg","nickname":"nil","note":"","ucode":"3E10F284D95475","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1098987,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","nickname":"èŠ±æ™¨å°‘å¹´","note":"","ucode":"6AA3537A6BA10E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389367,"discussion_content":"alwaysæ—¶å€™æ˜¯åœ¨ä¸»è¿›ç¨‹è½ç›˜çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629254782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":380822,"ip_address":""},"score":389367,"extra":""}]},{"author":{"id":1815374,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK4ibibOsboHycltqqicSIkm9eibSBu86BRNc0LQnTRTMEPGDvJXYpBicWOW4srMt7c9iaUT7b5mTmicgkjw/132","nickname":"Geek_6a58c7","note":"","ucode":"37900229ED9B3C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375377,"discussion_content":"å¤§ä½¬ï¼Œè¯·é—®ä¸€ä¸‹åˆ é™¤å’Œç›´æ¥æŠŠkeyè®¾ç½®æˆè¿‡æœŸï¼Œåœ¨æ€§èƒ½ä¸Šæœ‰åŒºåˆ«å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621596093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1815374,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK4ibibOsboHycltqqicSIkm9eibSBu86BRNc0LQnTRTMEPGDvJXYpBicWOW4srMt7c9iaUT7b5mTmicgkjw/132","nickname":"Geek_6a58c7","note":"","ucode":"37900229ED9B3C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":375426,"discussion_content":"æœ‰çš„ï¼Œè®¾ç½®æˆè¿‡æœŸåï¼ŒRedisè¿˜éœ€è¦æ‰§è¡Œé€»è¾‘å»åˆ é™¤è¿™äº›keyï¼Œè‚¯å®šæ¯”ç›´æ¥åˆ å¤šèŠ±æ—¶é—´ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1621647950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375377,"ip_address":""},"score":375426,"extra":""},{"author":{"id":1691516,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/7c/2e99d0ad.jpg","nickname":"ä¸€æ–°","note":"","ucode":"1915C6C655C31F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1815374,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK4ibibOsboHycltqqicSIkm9eibSBu86BRNc0LQnTRTMEPGDvJXYpBicWOW4srMt7c9iaUT7b5mTmicgkjw/132","nickname":"Geek_6a58c7","note":"","ucode":"37900229ED9B3C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376459,"discussion_content":"ä¸šåŠ¡é€»è¾‘ä¸Šå¯é€šè¿‡ ç‰ˆæœ¬çº§åˆ« + è¿‡æœŸæ—¶é—´ è¿›è¡Œåˆ é™¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622129458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375377,"ip_address":""},"score":376459,"extra":""},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1815374,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK4ibibOsboHycltqqicSIkm9eibSBu86BRNc0LQnTRTMEPGDvJXYpBicWOW4srMt7c9iaUT7b5mTmicgkjw/132","nickname":"Geek_6a58c7","note":"","ucode":"37900229ED9B3C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577113,"discussion_content":"è¿‡æœŸäº†å¦‚æœè¿˜æ²¡å¼€å§‹åˆ é™¤è¿™ä¸ªæ—¶å€™èƒ½è¯»åˆ°å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655920895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":375377,"ip_address":""},"score":577113,"extra":""}]},{"author":{"id":1024294,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","nickname":"null","note":"","ucode":"F9039EFED6B55D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374798,"discussion_content":"replica-lazy-flush æœ‰å¿…è¦æ¸…ç©ºæ•°æ®åº“æ—¶å¼‚æ­¥é‡Šæ”¾å†…å­˜ä¹ˆï¼Ÿæ­¤æ—¶ä»åº“å¹¶æ²¡æœ‰å¯¹å¤–æœåŠ¡ï¼Œä¸»çº¿ç¨‹åº”è¯¥æ²¡æœ‰å…¶ä»–æ“ä½œéœ€è¦å¤„ç†ï¼Œä¸»çº¿ç¨‹é‡æ–°åŠ è½½æ–°çš„ rdb æ–‡ä»¶ï¼Œä¹Ÿéœ€è¦ç­‰å¾…æ•°æ®åº“æ¸…ç©ºå®Œæ¯•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621350303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":4,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1613760,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9f/c0/86febfff.jpg","nickname":"Master","note":"","ucode":"79D0145B853C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358817,"discussion_content":"å¯ä»¥å¯ä»¥ï¼Œæ¯”è¾ƒå¹²è´§äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616055175,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2320446,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJxzxDIUjoToCibu1fOnK5xII7WdYkkgxSL3tbd9uTicZhhaqZ42rIhDT3J3jmQZL2sxX3om3jI9xRA/132","nickname":"Geek_88888888","note":"","ucode":"8CA811FA981159","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353124,"discussion_content":"Redisåœ¨è®¾è®¡è¯„ä¼°é‡Šæ”¾å†…å­˜çš„ä»£ä»·æ—¶ï¼Œä¸æ˜¯çœ‹keyçš„å†…å­˜å ç”¨æœ‰å¤šå°‘ï¼Œè€Œæ˜¯å…³æ³¨é‡Šæ”¾å†…å­˜æ—¶çš„å·¥ä½œé‡æœ‰å¤šå¤§...â€œé‡Šæ”¾çš„å†…å­˜ä¸è¿ç»­&#34; è¿™ä¸ªæ˜¯æ ¹æ®ä»€ä¹ˆå¾—å‡ºçš„ç»“è®ºå‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615019373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2320446,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJxzxDIUjoToCibu1fOnK5xII7WdYkkgxSL3tbd9uTicZhhaqZ42rIhDT3J3jmQZL2sxX3om3jI9xRA/132","nickname":"Geek_88888888","note":"","ucode":"8CA811FA981159","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353135,"discussion_content":"åº•å±‚æ˜¯é“¾è¡¨å®ç°çš„æ•°æ®ç»“æ„ï¼Œå†…å­˜å°±æ˜¯ä¸è¿ç»­çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1615021330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":353124,"ip_address":""},"score":353135,"extra":""}]},{"author":{"id":1101251,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cd/c3/d62a07f9.jpg","nickname":"Fanrncho","note":"","ucode":"D2D28FC92CFB6C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350501,"discussion_content":"â€œå³ä½¿å¼€å¯äº†lazy-freeï¼Œå¦‚æœç›´æ¥ä½¿ç”¨DELå‘½ä»¤è¿˜æ˜¯ä¼šåŒæ­¥åˆ é™¤keyï¼Œåªæœ‰ä½¿ç”¨UNLINKå‘½ä»¤æ‰ä¼šå¯èƒ½å¼‚æ­¥åˆ é™¤keyã€‚â€è¿™æ®µæ€»ç»“çš„æºå‡ºå¤„åœ¨å“ªï¼Œèƒ½é€éœ²ä¸ªé“¾æ¥ä¸ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613896630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1020042,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/90/8a/288f9f94.jpg","nickname":"Kaito","note":"","ucode":"79775FA35A95F2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1101251,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cd/c3/d62a07f9.jpg","nickname":"Fanrncho","note":"","ucode":"D2D28FC92CFB6C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350535,"discussion_content":"æºç ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613908775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":350501,"ip_address":""},"score":350535,"extra":""}]},{"author":{"id":1606288,"avatar":"https://static001.geekbang.org/account/avatar/00/18/82/90/295449c4.jpg","nickname":"åŠç”Ÿç“œã€‚","note":"","ucode":"6D4CC445230D19","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343751,"discussion_content":"ä½ å¥½ï¼Œè¯·é—®ä¸€ä¸‹ï¼Œå¦‚æœå†™æ”¾åˆ°å¼‚æ­¥æ‰§è¡Œï¼Œé‚£ä¹ˆåœ¨redisæ²¡å†™å…¥çš„æ—¶å€™å®¢æˆ·ç«¯å°±è¯»å–ä¸ä¼šæœ‰é—®é¢˜å—ï¼Ÿè¿˜æ˜¯è¯´è¿™ç§æƒ…å†µå…¶å®æ˜¯æ¯”è¾ƒæç«¯çš„ï¼Œæ²¡æœ‰é‚£ä¹ˆå®¹æ˜“å‡ºç°ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611146660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1006735,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/8f/551b5624.jpg","nickname":"å°å¯","note":"","ucode":"8834AF621FA67D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1606288,"avatar":"https://static001.geekbang.org/account/avatar/00/18/82/90/295449c4.jpg","nickname":"åŠç”Ÿç“œã€‚","note":"","ucode":"6D4CC445230D19","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347870,"discussion_content":"å…ˆåˆ é™¤å…¨å±€å“ˆå¸Œæ˜ å°„è¡¨ï¼Œç›¸å½“äºæ ‡è®°åˆ é™¤ï¼Œæ˜¯æŸ¥ä¸åˆ°æ•°æ®çš„ï¼Œå†æ–°å†™çš„æ•°æ®ï¼Œæ˜¯æ–°çš„åœ°å€ï¼Œä¹Ÿä¸å½±å“","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1612346192,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":343751,"ip_address":""},"score":347870,"extra":""}]},{"author":{"id":2034717,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/ZOjPic948JaOXhbUwZcBqGibPYtu6QA5BuA9qdQHE6xBaGuER5BAfdVGDyeenvhuXAb8069w1fA8p5iblALtmk6hA/132","nickname":"Geek_f5a46e","note":"","ucode":"C6618A64653E5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":330629,"discussion_content":"è¶…ç¥ï¼Œç‰›çš®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606659641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306128,"discussion_content":"lazy-free å¯ä»¥æé«˜Redis æ€§èƒ½ï¼Œä¸ºä»€ä¹ˆé»˜è®¤å…³é—­å‘¢ï¼Ÿ è¿™æ˜¯å¤„äºä»€ä¹ˆè€ƒè™‘çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600176819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":5,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1436839,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ec/a7/7d44c655.jpg","nickname":"snailshen","note":"","ucode":"C4875C476649B1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"discussion":{"id":308118,"discussion_content":"æ•°æ®ä¸€è‡´æ€§ï¼Œå®¢æˆ·ç«¯å’Œredisçš„æ•°æ®ä¸€è‡´æ€§","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1600848934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":306128,"ip_address":""},"score":308118,"extra":""},{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1436839,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ec/a7/7d44c655.jpg","nickname":"snailshen","note":"","ucode":"C4875C476649B1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333574,"discussion_content":"æˆ‘è§‰å¾—åº”è¯¥ä¸æ˜¯ã€‚ã€‚ã€‚æ— è®ºdel è¿˜æ˜¯unlink  keyéƒ½æ˜¯åŒæ­¥åˆ é™¤ï¼Œlazy æŒ‡çš„æ˜¯valueå€¼ã€‚æˆ‘è§‰å¾—è¿˜æ˜¯ç¨³å¦¥èµ·è§ï¼Œå¤§å®¶å…ˆç”¨ç”¨ï¼Œæœ‰é—®é¢˜åé¦ˆåé¦ˆï¼Œæˆ‘ä»¬fixå®Œäº†ï¼Œè¿­ä»£å‡ ä¸ªç‰ˆæœ¬ æˆ‘ä»¬å†fixä¸ºé»˜è®¤æ‰“å¼€ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607566858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":308118,"ip_address":""},"score":333574,"extra":""},{"author":{"id":1046714,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","nickname":"çº¦ä¹¦äºš","note":"","ucode":"81EA27ADD9EC1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346582,"discussion_content":"æ„Ÿè§‰ä¸å†²çªï¼Œç¨³å¦¥æ˜¯ä¸ºäº†è¿™ç§å¯èƒ½é€ æˆä¸ä¸€è‡´ç‰¹æ€§ä¸Šçš„ç¨³å¦¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611997579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":333574,"ip_address":""},"score":346582,"extra":""}]}]},{"had_liked":false,"id":255177,"user_name":"æ³¨å®šéå‡¡","can_delete":false,"product_type":"c1","uid":1113597,"ip_address":"","ucode":"80673056E131B7","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/fd/326be9bb.jpg","comment_is_top":false,"comment_ctime":1603276889,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"139042230361","product_id":100056701,"comment_content":"1ï¼Œä½œè€…è®²äº†ä»€ä¹ˆï¼Ÿ<br>    Redisæœ‰å“ªäº›å¯èƒ½å¯¼è‡´é˜»å¡çš„æ“ä½œï¼Œä»¥åŠè§£å†³æœºåˆ¶<br><br>2ï¼Œä½œè€…æ˜¯æ€ä¹ˆæŠŠè¿™ä»¶äº‹è®²æ˜ç™½çš„ï¼Ÿ<br>    1ï¼Œåˆ†ç±»ï¼šé€šè¿‡Rediså®ä¾‹çš„äº¤äº’å…³ç³»ï¼Œæ‹†åˆ†äº†å››ç±»ï¼šå®¢æˆ·ç«¯ï¼Œç£ç›˜ï¼Œä¸»ä»é›†ç¾¤ï¼Œåˆ†ç‰‡é›†ç¾¤<br>    2ï¼Œæå‡ºå…³é”®è·¯å¾„æ“ä½œæ¦‚å¿µï¼Œä½œä¸ºæ˜¯å¦å¯ä»¥å¼‚æ­¥å¤„ç†çš„åˆ¤æ–­æ ‡å‡†<br><br>3ï¼Œä¸ºäº†è®²æ˜ç™½ï¼Œä½œè€…è®²äº†å“ªäº›è¦ç‚¹ï¼Ÿæœ‰å“ªäº›äº®ç‚¹ï¼Ÿ<br>    1ï¼Œäº®ç‚¹1ï¼šå°†Redisçš„å¯èƒ½é˜»å¡ç‚¹åˆ’åˆ†äº†å››å—ï¼Œä¸å®¢æˆ·ç«¯äº¤äº’ï¼Œä¸ç£ç›˜äº¤äº’ï¼Œä¸»ä»å®ä¾‹äº¤äº’ï¼Œåˆ†ç‰‡é›†ç¾¤å®ä¾‹äº¤äº’<br>    2ï¼Œäº®ç‚¹2ï¼šé€šè¿‡å…³é”®è·¯å¾„ä¸Šæ“ä½œæ¦‚å¿µï¼Œå»ºç«‹äº†åˆ¤æ–­æ˜¯å¦é€‚åˆå¼‚æ­¥æ“ä½œçš„æ ‡å‡†<br>    3ï¼Œè¦ç‚¹1ï¼šä¸å®¢æˆ·ç«¯äº¤äº’æ—¶çš„é˜»å¡ç‚¹ï¼šé«˜å¤æ‚åº¦çš„å¢åˆ æ”¹æ“ä½œï¼ˆé›†åˆå…¨é‡çš„æŸ¥è¯¢å’Œèšåˆæ“ä½œï¼ŒbigKey åˆ é™¤æ“ä½œï¼Œæ¸…ç©ºæ•°æ®åº“ï¼‰<br>    4ï¼Œè¦ç‚¹2ï¼šä¸ç£ç›˜äº¤äº’çš„é˜»å¡ç‚¹ï¼šaofæ—¥å¿—å®æ—¶åŒæ­¥å†™å›<br>    5ï¼Œè¦ç‚¹3ï¼šä¸»ä»èŠ‚ç‚¹äº¤äº’æ—¶çš„é˜»å¡ç‚¹ï¼šä»åº“åŠ è½½RDBæ–‡ä»¶<br>    6ï¼Œè¦ç‚¹4ï¼šåˆ†ç‰‡é›†ç¾¤çš„é˜»å¡ç‚¹ï¼šå“ˆå¸Œæ§½bigkeyæ•°æ®è¿ç§»<br>    7ï¼Œè¦ç‚¹5ï¼šå…³é”®è·¯å¾„æ“ä½œæ¦‚å¿µï¼šå®¢æˆ·ç«¯æŠŠè¯·æ±‚å‘ç»™Redisåï¼Œè¦ç­‰ç€Redisè¿”å›æ•°æ®ç»“æœçš„æ“ä½œ<br>    8ï¼Œè¦ç‚¹6ï¼šå¼‚æ­¥çš„å­çº¿ç¨‹æœºåˆ¶ï¼šä¸»çº¿ç¨‹é€šè¿‡ä¸€ä¸ªé“¾è¡¨å½¢å¼çš„ä»»åŠ¡é˜Ÿåˆ—å’Œå­çº¿ç¨‹è¿›è¡Œäº¤äº’<br><br>4ï¼Œå¯¹äºä½œè€…æ‰€è®²ï¼Œæˆ‘æœ‰å“ªäº›å‘æ•£æ€§æ€è€ƒï¼Ÿ<br>   ç»™è‡ªå·±æäº†å‡ ä¸ªé—®é¢˜ï¼š<br>     1ï¼ŒRedisè‡³å°‘æœ‰å‡ ä¸ªçº¿ç¨‹ï¼Ÿ<br>     2ï¼Œç½‘ç»œIOæœ‰æ—¶ä¼šæ¯”è¾ƒæ…¢ï¼Œç½‘ç»œIOæ˜¯å¦ä¸ºRedisçš„é˜»å¡ç‚¹ï¼Ÿ<br>     3ï¼Œåˆ é™¤æ“ä½œä¸ºä»€ä¹ˆä¼šé˜»å¡Redis<br><br>5ï¼Œå°†æ¥åœ¨å“ªäº›åœºæ™¯é‡Œï¼Œæˆ‘èƒ½å¤Ÿä½¿ç”¨å®ƒï¼Ÿ<br><br>6ï¼Œç•™è¨€æ”¶è·<br>ä»€ä¹ˆæ—¶å€™Redisä¼šçœŸæ­£çš„å¼‚æ­¥é‡Šæ”¾å†…å­˜ï¼Ÿï¼ˆç­”æ¡ˆæ¥è‡ª@kaito å¤§ä½¬ï¼‰<br><br>lazy freeæœºåˆ¶ï¼šRedisæ”¶åˆ°é”®å€¼å¯¹åˆ é™¤å’Œæ¸…ç©ºæ•°æ®åº“çš„æŒ‡ä»¤æ—¶ï¼Œä¸»çº¿çº¿ç¨‹ä¼šæŠŠè¿™ä¸ªæ“ä½œå°è£…æˆä¸€ä¸ªä»»åŠ¡ï¼Œæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åç»™å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªå®Œæˆä¿¡æ¯ï¼Œä½†å®é™…ä¸Šï¼Œè¿™ä¸ªåˆ é™¤è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œéœ€è¦ç­‰å¾…åå°å­çº¿ç¨‹ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¯»å–åˆ°è¿™ä¸ªä»»åŠ¡åï¼Œæ‰å¼€å§‹å®é™…åˆ é™¤é”®å€¼å¯¹ï¼Œå¹¶é‡Šæ”¾ç›¸åº”çš„å†…å­˜ç©ºé—´ã€‚<br><br>ä½†æ˜¯ï¼šlazy-freeæ˜¯4.0æ–°å¢åŠŸèƒ½ï¼Œé»˜è®¤å…³é—­ã€‚å¼€å¯è¿™ä¸ªé…ç½®åï¼Œ é™¤äº†replica-lazy-flushä¹‹å¤–ï¼Œå…¶ä»–æƒ…å†µéƒ½åªæ˜¯*å¯èƒ½*å»å¼‚æ­¥é‡Šæ”¾keyçš„å†…å­˜ï¼Œå¹¶ä¸æ˜¯æ¯æ¬¡å¿…å®šå¼‚æ­¥é‡Šæ”¾å†…å­˜çš„ã€‚æ˜¯å¦ä¼šçœŸæ­£å¼‚æ­¥é‡Šæ”¾å†…å­˜ï¼Œå–å†³äºkeyçš„ç±»å‹ï¼Œç¼–ç æ–¹å¼ï¼Œå…ƒç´ æ•°é‡ï¼Œæ‰€ä»¥ å³ä½¿å¼€å¯äº†lazy-freeï¼ŒStringç±»å‹çš„bigkeyï¼Œåœ¨åˆ é™¤æ—¶ä¾æ—§æœ‰é˜»å¡ä¸»çº¿ç¨‹çš„é£é™©","like_count":33},{"had_liked":false,"id":248210,"user_name":"Spring4J","can_delete":false,"product_type":"c1","uid":1645430,"ip_address":"","ucode":"06F056085A2564","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiauonyMORA2s43W7mogGDH4WYjW0gBJtYmUa9icTB6aMPGqibicEKlLoQmLKLWEctwHzthbTZkKR20w/132","comment_is_top":false,"comment_ctime":1600065849,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"44549738809","product_id":100056701,"comment_content":"Redisçš„å¼‚æ­¥å­çº¿ç¨‹æœºåˆ¶å°±è·Ÿjavaé‡Œé¢çš„çº¿ç¨‹æ± åŸç†å·®ä¸å¤šï¼Œéƒ½æ˜¯ä¸»çº¿ç¨‹å°è£…ä»»åŠ¡åˆ°é˜Ÿåˆ—ä¸­ï¼Œå­çº¿ç¨‹åˆ°é˜Ÿåˆ—ä¸­æ‹‰å–ä»»åŠ¡å¼‚æ­¥æ‰§è¡Œï¼Œè¿ç”¨äº†ç”Ÿäº§è€…æ¶ˆè´¹è€…çš„æ¨¡å‹","like_count":10},{"had_liked":false,"id":248478,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1600176415,"is_pvip":true,"discussion_count":5,"race_medal":1,"score":"27369980191","product_id":100056701,"comment_content":"é‡Šæ”¾æ‰çš„å†…å­˜å—æ’å…¥ä¸€ä¸ªç©ºé—²å†…å­˜å—çš„é“¾è¡¨<br>===================<br>è¿™ä¸ªè¿‡ç¨‹æ€ä¹ˆä¼šè€—æ—¶é—´å‘¢ï¼Ÿ æ’å…¥é“¾è¡¨çš„æ—¶å€™ï¼Œä¸å°±æ˜¯åœ¨é“¾è¡¨å°¾éƒ¨ä¸€æ”¾ä¸å°±å¯ä»¥äº†å—ï¼Ÿ æ—¶é—´å¤æ‚åº¦ä½ O(1)","like_count":6,"discussions":[{"author":{"id":1275690,"avatar":"https://static001.geekbang.org/account/avatar/00/13/77/2a/244d98aa.jpg","nickname":"cpâ˜…é’Šî€¢îˆ±î€²","note":"","ucode":"6B86D4D538BDF7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325398,"discussion_content":"è¿™ä¸ªå¾—çœ‹æ“ä½œç³»ç»Ÿå…·ä½“å®ç°ï¼Œæœ‰å¯èƒ½ä¸æ˜¯ç›´æ¥æ”¾é“¾è¡¨å°¾éƒ¨ï¼Œå†…å­˜é“¾è¡¨å¯èƒ½æŒ‰å†…å­˜å¤§å°è¿›è¡Œæ’åº","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1605285765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1281480,"avatar":"https://static001.geekbang.org/account/avatar/00/13/8d/c8/3ffed92b.jpg","nickname":"å¾åŸ¹","note":"","ucode":"0020C302D02C34","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312150,"discussion_content":"é‡Šæ”¾æœ€ç»ˆè¿˜æ˜¯è¦äº¤ç»™æ“ä½œç³»ç»Ÿåº•å±‚å»æ“ä½œçš„ï¼Œè€ŒLinuxåº•å±‚å†…å­˜ç®¡ç†æœ‰ä¸€ç§å«åšä¼™ä¼´ç³»ç»Ÿçš„ä¸œè¥¿ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1602597547,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2326134,"avatar":"https://static001.geekbang.org/account/avatar/00/23/7e/76/368394bf.jpg","nickname":"å“¦","note":"","ucode":"C776659DED9D79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386899,"discussion_content":"ç³»ç»Ÿè°ƒç”¨ï¼Œé™·å…¥å†…æ ¸ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢éƒ½æ˜¯éœ€è¦æ—¶é—´çš„ã€‚å…·ä½“åˆ°å®é™…è‚¯å®šä¸æ˜¯ç®€å•çš„ç§»åŠ¨æŒ‡é’ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627886637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023101,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9c/7d/774e07f9.jpg","nickname":"studyçš„ç¨‹åºå‘˜","note":"","ucode":"E5AE9037D24429","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371642,"discussion_content":"hashé‡Œå…¨æ˜¯æŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆå°±å°±æ˜¯ä¸€å—å†…å­˜ï¼Œå°±è¦æ”¾ä¸€æ¬¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619881696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1268603,"avatar":"https://static001.geekbang.org/account/avatar/00/13/5b/7b/7481a340.jpg","nickname":"ä¸€åªç‰›","note":"","ucode":"32950C7C3F5997","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318854,"discussion_content":"æ•°æ®å¤ªå¤šï¼Œé‡å˜å¼•èµ·è´¨å˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603867934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248477,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1600175841,"is_pvip":true,"discussion_count":3,"race_medal":1,"score":"27369979617","product_id":100056701,"comment_content":"åœ¨åˆ é™¤ä¸€ä¸ª å¤§ key çš„æ—¶å€™ï¼Œredis æŠŠè¿™ä¸ªä»»åŠ¡æ”¾åˆ°é˜Ÿåˆ—ï¼Œå®é™…è¿˜æ²¡æœ‰æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œè¿™æ—¶å€™é©¬ä¸Šæ¥ä¸ªæŸ¥è¯¢æŸ¥åˆšæ‰åˆ é™¤çš„ key. è¿™æ—¶å€™ä¼šæŸ¥è¯¢åˆ°å—ï¼Ÿ Redis æ˜¯æ€ä¹ˆå¤„ç†è¿™ç§æƒ…å†µçš„ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1317999,"avatar":"https://static001.geekbang.org/account/avatar/00/14/1c/6f/3ea2a599.jpg","nickname":"å˜‰æœ¨","note":"","ucode":"AF4877693782C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393799,"discussion_content":"åˆ é™¤å…¨å±€hashé”®ï¼Œå°±æŸ¥ä¸åˆ°äº†ï¼›valueå¯¹è±¡çš„å†…å­˜æ”¾åˆ°å¼‚æ­¥çº¿ç¨‹é‡Šæ”¾","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1631604240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2253496,"avatar":"","nickname":"Geek_3d87cb","note":"","ucode":"F09334D60C3BC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337966,"discussion_content":"åº”è¯¥åªä¼šåˆ é™¤æ‰å…¨å±€çš„hashé”®,å†…å­˜é‡Šæ”¾å¼‚æ­¥æ‰§è¡Œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609138962,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1649662,"avatar":"https://static001.geekbang.org/account/avatar/00/19/2b/fe/7925eb7e.jpg","nickname":"pdf","note":"","ucode":"A44250955878BB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336397,"discussion_content":"æ ‡è®°åˆ é™¤","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1608563674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248122,"user_name":"æ¼«æ­¥oo0äº‘ç«¯","can_delete":false,"product_type":"c1","uid":1427152,"ip_address":"","ucode":"4906095751D7B0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eppZl39m2knwLH6PIia5YQTOWSOTGhy8ZZAutUIrxKOYFCtLLLYb1OZvIVVLzL7Y8eglKFe4Sib9D7g/132","comment_is_top":false,"comment_ctime":1600038274,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23074874754","product_id":100056701,"comment_content":"ä»Šå¤©å­¦ä¹ äº†5ç§é˜»å¡ç‚¹ï¼Œè¯·é—®è€å¸ˆï¼Œåé¢ä¼šå­¦ä¹ ï¼Œå½“rediså‘ç”Ÿé˜»å¡æ—¶å¦‚ä½•åˆ†ææ˜¯ä»€ä¹ˆæ“ä½œå¯¼è‡´çš„è¿™ä¸ªæŠ€èƒ½å—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305859,"discussion_content":"ä¸€èˆ¬çœ‹æ…¢ä»»åŠ¡ï¼ˆslowlogï¼‰ï¼Œæˆ–è€…å½“æ—¶æ˜¯å¦åœ¨åšaofæ“ä½œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600095685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341176,"user_name":"Geek_1b4c8","can_delete":false,"product_type":"c1","uid":1972308,"ip_address":"","ucode":"1B446E400D70F0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJlZSBIXmp6PQWeibP4iaztdX3hF3o2p5EJZGNBN9aILibIj5JHVFUeqYFEOv0a7tHs6R3pOsXpta0qQ/132","comment_is_top":false,"comment_ctime":1649403228,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10239337820","product_id":100056701,"comment_content":"å¼‚æ­¥åˆ é™¤keyæ—¶ï¼Œå¦‚æœåˆ é™¤æ“ä½œåœ¨ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢è¿˜æœªè¢«å­çº¿ç¨‹æ‰§è¡Œï¼Œæ­¤æ—¶å¦‚æœæ¥äº†getæŸ¥è¯¢æ“ä½œï¼Œæ˜¯å¦ä¼šè¿”å›æ•°æ®å—ï¼Œå¼‚æ­¥åˆ é™¤æ—¶æ˜¯å¦ä¼šå…ˆæ ‡è¯†ä¸ºåˆ é™¤å—","like_count":2},{"had_liked":false,"id":248187,"user_name":"test","can_delete":false,"product_type":"c1","uid":1065849,"ip_address":"","ucode":"9A4973E591DD12","user_header":"https://static001.geekbang.org/account/avatar/00/10/43/79/18073134.jpg","comment_is_top":false,"comment_ctime":1600054618,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10189989210","product_id":100056701,"comment_content":"å†™æ“ä½œæ˜¯å¦åœ¨å…³é”®è·¯å¾„ï¼Œéœ€è¦çœ‹ä½¿ç”¨æ–¹æ˜¯å¦éœ€è¦ç¡®è®¤å†™å…¥å·²ç»å®Œæˆã€‚","like_count":2},{"had_liked":false,"id":248168,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1600049772,"is_pvip":false,"discussion_count":1,"race_medal":1,"score":"10189984364","product_id":100056701,"comment_content":"å½“ AOF æ—¥å¿—é…ç½®æˆ everysec é€‰é¡¹åï¼Œä¸»çº¿ç¨‹ä¼šæŠŠ AOF å†™æ—¥å¿—æ“ä½œå°è£…æˆä¸€ä¸ªä»»åŠ¡ï¼Œä¹Ÿæ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚åå°å­çº¿ç¨‹è¯»å–ä»»åŠ¡åï¼Œç„¶åå†™å…¥AOFæ—¥å¿—ã€‚è¯·é—®è€å¸ˆï¼Œå¦‚æœå†™å…¥æ“ä½œæ¯”è¾ƒé¢‘ç¹ï¼Œæ˜¯å¦ä¹Ÿä¼šå¼•èµ·rediså»¶è¿Ÿå¢å¤§å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1811495,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a4/27/15e75982.jpg","nickname":"å°è¢","note":"","ucode":"3F5D8721F577D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305788,"discussion_content":"å†™å…¥æ“ä½œé¢‘ç¹æ›´åº”è¯¥ç”¨å¼‚æ­¥çš„å­çº¿ç¨‹ï¼Œå†™å†…å­˜æ€»æ¯”å†™ç£ç›˜å¥½å§ã€‚å¦‚æœå¼‚æ­¥å­çº¿ç¨‹éƒ½æ‰›ä¸ä½ï¼Œä¸»çº¿ç¨‹ç›´æ¥å†™ç£ç›˜æ›´æ‰›ä¸ä½äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1600084971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":286239,"user_name":"Geek_77c5bf","can_delete":false,"product_type":"c1","uid":2423085,"ip_address":"","ucode":"9C850E34868C7D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKcgJZ4M0hFDvia4IicRiaPaAfKoDBxTYI22Nduibs0ThDFA6s54uztEo5qaVP1TfvkRrnnDSYoHSFicng/132","comment_is_top":false,"comment_ctime":1617204952,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5912172248","product_id":100056701,"comment_content":"è€å¸ˆæˆ‘ä¸€ç›´æœ‰ä¸ªé—®é¢˜ï¼Œä½ ä¸Šé¢è¯´ï¼Œå¦‚æœæ˜¯è¯»æ“ä½œã€‚è¯»æ“ä½œæ˜¯ä¸»çº¿ç¨‹æ¥å¤„ç†æŸ¥è¯¢å¹¶è¿”å›çš„å—ï¼Ÿæ„æ€æ˜¯åŒæ­¥çš„ï¼Ÿæˆ‘çš„ç†è§£ï¼Œå®¢æˆ·ç«¯çš„ç¡®æ˜¯ä¸€ç›´åœ¨ç­‰å¾…ç»“æœï¼Œä½†æ˜¯redisæ˜¯å¼‚æ­¥çš„ï¼Œæ˜¯åŸºäºäº‹ä»¶é€šçŸ¥å›è°ƒæœºåˆ¶ï¼Œç­‰redisæŸ¥åˆ°ç»“æœï¼Œå†socketé€šçŸ¥å®¢æˆ·ç«¯ã€‚å¸Œæœ›è€å¸ˆå¸®å¿™è§£ç­”ï¼Œå›°æ‰°æˆ‘å¾ˆä¹…","like_count":1,"discussions":[{"author":{"id":1035612,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cd/5c/e09eac13.jpg","nickname":"åˆ˜å¼·","note":"","ucode":"B2E41BB894A727","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378140,"discussion_content":"ç½‘ä¸Šçš„æ–‡ç« ç¿»æ¥ç¿»å»ï¼Œè¿˜ä¸å¦‚å»çœ‹çœ‹redisæºç ã€‚æ•´æ˜ç™½äº†æºç ï¼Œè¿™äº›æ–‡ç« éƒ½æ˜¯åƒåœ¾ï¼Œä¸è¦åœ¨åƒåœ¾ä¸Šæµªè´¹æ—¶é—´ã€‚è¿™æ˜¯æˆ‘çš„ç»éªŒã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1623065857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136421,"avatar":"https://static001.geekbang.org/account/avatar/00/11/57/25/956ee90f.jpg","nickname":"Max","note":"","ucode":"B705CF0314D84D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532790,"discussion_content":"åœºæ™¯ä¸ä¸€æ ·ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™é‡Œé¢æˆ‘ä»¬è¯´çš„getéƒ½æ˜¯è¦åŒæ­¥è¿”å›ç»“æœçš„ã€‚ä½ è¯´çš„è¿™ç§åœºæ™¯ï¼Œæ˜¯å®¢æˆ·ç«¯å·²ç»æ¥å—äº†å¼‚æ­¥çš„æƒ…å†µï¼Œå¹¶ä¸”åšäº†æ”¯æŒæ‰å¯ä»¥ï¼ˆä¸ç®¡ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿˜æ˜¯socketé€šçŸ¥ï¼Œéƒ½å¢åŠ äº†å®¢æˆ·ç«¯çš„å¼€å‘æˆæœ¬ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637685742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264334,"user_name":"å¤§ä¸Šæµ·","can_delete":false,"product_type":"c1","uid":1092861,"ip_address":"","ucode":"3969C018D6C0DC","user_header":"https://static001.geekbang.org/account/avatar/00/10/ac/fd/f70a6e3e.jpg","comment_is_top":false,"comment_ctime":1606441647,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5901408943","product_id":100056701,"comment_content":"è€å¸ˆï¼Œå¤§keyçš„æŸ¥è¯¢ä¹Ÿä¼šé˜»å¡ï¼Œè¿™ä¸ªèƒ½ä»‹ç»ä¸€ä¸‹åŸç†å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376233,"discussion_content":"å¦‚æœæ˜¯O(N)çº§åˆ«æŸ¥è¯¢ å°±ä¼šé˜»å¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622031270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250660,"user_name":"dfuru","can_delete":false,"product_type":"c1","uid":2110772,"ip_address":"","ucode":"0222FADA093D95","user_header":"","comment_is_top":false,"comment_ctime":1601188442,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5896155738","product_id":100056701,"comment_content":"1. ä¸»çº¿ç¨‹æ¥æ”¶åˆ°SETã€HSETã€SADDæ“ä½œå‘½ä»¤åï¼Œè¦è¿”å›æˆåŠŸæˆ–å¤±è´¥ã€‚å¦‚é‡å¤å¢åŠ éœ€è¦è¿”å›å¤±è´¥ï¼Œåˆ¤æ–­æ˜¯å¦é‡å¤åˆ™éœ€è¦è®¿é—®é›†åˆæ•°æ®ï¼Œæ‰€ä»¥æ˜¯å…³é”®å…³é”®è·¯å¾„æ“ä½œã€‚<br>   ä¸ºä¿è¯è¯»å†™ä¸€è‡´æ€§ï¼Œä¹Ÿéœ€è¦ä¿è¯å†™å…¥æˆåŠŸåå†è¿”å›ã€‚<br>2. è‹¥ä¸æ˜¯å…³é”®è·¯å¾„æ“ä½œï¼Œä¸»çº¿ç¨‹å°†æ“ä½œæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå†ç”±åå°å­çº¿ç¨‹å†™å…¥é›†åˆã€‚è‹¥åå°å­çº¿ç¨‹å°šæœªæ‰§è¡Œï¼Œä¸»çº¿ç¨‹è¿›è¡Œè¯»æ“ä½œï¼Œåˆ™è¯»å¤±è´¥ã€‚<br>   è‹¥å‘ç”Ÿå®•æœºï¼Œåœ¨é˜Ÿåˆ—ä¸­çš„å†™æ“ä½œï¼Œä¹Ÿä¼šä¸¢å¤±ã€‚<br>","like_count":1},{"had_liked":false,"id":248676,"user_name":"Geek_lc","can_delete":false,"product_type":"c1","uid":1590580,"ip_address":"","ucode":"B854E84A98C8C9","user_header":"","comment_is_top":false,"comment_ctime":1600259830,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5895227126","product_id":100056701,"comment_content":"å½“åˆ é™¤bigkeyçš„æ—¶å€™ä¼šæœ‰é˜»å¡ï¼Œå¦‚æœæ–°å¢ä¸€ä¸ªbigkeyï¼Œä¼šæœ‰é˜»å¡å—ï¼Ÿæ˜¯é˜»å¡åœ¨AOFè¿˜æ˜¯å†…å­˜åˆ†é…ï¼Ÿ","like_count":1},{"had_liked":false,"id":354408,"user_name":"æ€¡çº¢æ¥¼æ€»è£","can_delete":false,"product_type":"c1","uid":1263044,"ip_address":"ä¸Šæµ·","ucode":"DDF513B06C1A98","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLqzGbatqxWianMyppPS2XUgEJHLGW3ib0l3HsoOnYKKJJlUekv2R7Sf7zkzlnjQl5eibZSZNxDUysKQ/132","comment_is_top":false,"comment_ctime":1660370730,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1660370730","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­è¯´&quot;Redis å®ä¾‹éœ€è¦ä¿è¯ AOF æ—¥å¿—ä¸­çš„æ“ä½œè®°å½•å·²ç»è½ç›˜ï¼Œè¿™ä¸ªæ“ä½œè™½ç„¶éœ€è¦å®ä¾‹ç­‰å¾…ï¼Œä½†å®ƒå¹¶ä¸ä¼šè¿”å›å…·ä½“çš„æ•°æ®ç»“æœç»™å®ä¾‹ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯åŠ¨ä¸€ä¸ªå­çº¿ç¨‹æ¥æ‰§è¡Œ AOF æ—¥å¿—çš„åŒæ­¥å†™ï¼Œè€Œä¸ç”¨è®©ä¸»çº¿ç¨‹ç­‰å¾… AOF æ—¥å¿—çš„å†™å®Œæˆã€‚&quot;è¿™æ ·æ˜¯ä¸æ˜¯åœ¨aofè½ç›˜æœºåˆ¶è®¾ç½®äº†alwaysçš„æ—¶å€™ï¼Œä¸ä¼šä¼˜åŒ–å¼‚æ­¥å‘¢","like_count":0},{"had_liked":false,"id":353573,"user_name":"going","can_delete":false,"product_type":"c1","uid":2313353,"ip_address":"åŒ—äº¬","ucode":"3AA83F9B07BE8B","user_header":"https://static001.geekbang.org/account/avatar/00/23/4c/89/82a3ee04.jpg","comment_is_top":false,"comment_ctime":1659577465,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659577465","product_id":100056701,"comment_content":"æ˜¯å› ä¸ºå­å®ä¾‹åœ¨è¿›è¡ŒåŒæ­¥çš„æ—¶å€™éœ€è¦å‘ŠçŸ¥å®¢æˆ·ç«¯è‡ªå·±åŒæ­¥å®Œæˆçš„ç»“æœå—ï¼Œä¸ºä»€ä¹ˆä»–ä¹Ÿæ˜¯å…³é”®è·¯å¾„ä¸Šçš„æ“ä½œã€‚","like_count":0},{"had_liked":false,"id":353018,"user_name":"é£é¾™","can_delete":false,"product_type":"c1","uid":2276763,"ip_address":"åŒ—äº¬","ucode":"EC83FE73985491","user_header":"https://static001.geekbang.org/account/avatar/00/22/bd/9b/366bb87b.jpg","comment_is_top":false,"comment_ctime":1659080453,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1659080453","product_id":100056701,"comment_content":"å¯ä»¥æŸ¥çœ‹rediså‘½ä»¤æ‰§è¡Œçš„æ—¶é—´å—ï¼Œä¾‹å¦‚delä¸€ä¸ªkeyï¼Œç”¨äº†å¤šé•¿æ—¶é—´","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587426,"discussion_content":"ç”¨slowlog","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663050236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351022,"user_name":"XXG","can_delete":false,"product_type":"c1","uid":1219238,"ip_address":"","ucode":"55258F95874BF4","user_header":"https://static001.geekbang.org/account/avatar/00/12/9a/a6/29ac6f6a.jpg","comment_is_top":false,"comment_ctime":1657460380,"is_pvip":true,"discussion_count":1,"race_medal":4,"score":"1657460380","product_id":100056701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘é—®ï¼Œæ¸…ç©ºæ•°æ®åº“æ“ä½œå¼‚æ­¥çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿä¸ç®¡æ˜¯ä¸»åº“è¿˜æ˜¯ä»åº“ï¼Œå°±ç®—å¼‚æ­¥æ¸…ç©ºæ•°æ®åº“ï¼Œæ²¡æœ‰æ‰§è¡Œå®Œæˆä¹Ÿä¸èƒ½å¹²åˆ«çš„å§","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587425,"discussion_content":"å¼‚æ­¥åˆ é™¤åˆ†2æ­¥ï¼š1ã€åŒæ­¥åˆ é™¤æŒ‡é’ˆæŒ‡å‘ï¼›2ã€å¼‚æ­¥é‡Šæ”¾valueçš„å†…å­˜ï¼Œæ‰€ä»¥åªè¦å®Œæˆç¬¬ä¸€æ­¥ï¼Œå°±èƒ½è¿›è¡Œåç»­çš„æ“ä½œï¼Œç¬¬äºŒæ­¥å¯ä»¥å­çº¿ç¨‹æ…¢æ…¢åš","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663050226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":341552,"user_name":"é˜¿æ˜•","can_delete":false,"product_type":"c1","uid":1012906,"ip_address":"","ucode":"F3AD093B68E074","user_header":"https://static001.geekbang.org/account/avatar/00/0f/74/aa/178a6797.jpg","comment_is_top":false,"comment_ctime":1649688075,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649688075","product_id":100056701,"comment_content":"å†™æ“ä½œè™½ç„¶æ²¡æœ‰å…·ä½“è¿”å›å€¼ï¼Œä½†æ˜¯å®¢æˆ·ç«¯éœ€è¦çŸ¥é“å†™å…¥çš„ç»“æœï¼Œå› æ­¤å±äºå…³é”®é“¾è·¯","like_count":0},{"had_liked":false,"id":339824,"user_name":"å‰‘å…«","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1648425091,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648425091","product_id":100056701,"comment_content":"å¼‚æ­¥åˆ é™¤ï¼Œå¦‚æœçº¿ç¨‹1åˆ é™¤keyä¸ºaçš„ï¼Œä½†æ˜¯æ˜¯å¼‚æ­¥åˆ é™¤ï¼Œè¿˜æ²¡æ¥å¾—åŠæ‰§è¡Œçš„å¼‚æ­¥åˆ é™¤ã€‚<br>è¿™æ—¶çº¿ç¨‹2æ¥å–è¿™ä¸ªkeyä¸ºaçš„ï¼Œæˆ‘ç†è§£è¿™ç§æƒ…å†µæ˜¯éœ€è¦æœ‰æœºåˆ¶ä¿éšœçº¿ç¨‹2è¯»å–ä¸åˆ°çš„ï¼Œæ¯”å¦‚åœ¨çº¿ç¨‹1åˆ é™¤çš„æ—¶å€™å…ˆå¯¹keyä¸ºaçš„æ‰“ä¸ªæ¸…é™¤æ ‡","like_count":0},{"had_liked":false,"id":334521,"user_name":"æ—¥æœˆæ˜Ÿè¾°","can_delete":false,"product_type":"c1","uid":1796332,"ip_address":"","ucode":"4E9F48153B2D8B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/68/ec/eb0ebbb6.jpg","comment_is_top":false,"comment_ctime":1644984234,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1644984234","product_id":100056701,"comment_content":"è¿™é‡Œçš„å­çº¿ç¨‹æ˜¯å­çº¿ç¨‹è¿˜æ˜¯å­è¿›ç¨‹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2632273,"avatar":"https://static001.geekbang.org/account/avatar/00/28/2a/51/4694740b.jpg","nickname":"æ ¹éŸ³æˆ˜å£«","note":"","ucode":"F2EBE390E32480","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587972,"discussion_content":"éƒ½å«å­çº¿ç¨‹äº†ï¼Œä½ è¿˜é—®æ˜¯å­çº¿ç¨‹è¿˜æ˜¯å­è¿›ç¨‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663413456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331274,"user_name":"1634LM","can_delete":false,"product_type":"c1","uid":1483821,"ip_address":"","ucode":"0F5FA57B69788C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK0G3cibDykvgIkomb5QrjBGuiaf5rJG2317JN1sePZ589IjUcMTOF4ZMrKVYU4ywfq1qfREqCW9Zww/132","comment_is_top":false,"comment_ctime":1642514300,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1642514300","product_id":100056701,"comment_content":"æ‚¨å¥½ è’‹è€å¸ˆ! ä»€ä¹ˆæ˜¯IOå¤šè·¯å¤ç”¨å‘¢,å¯ä»¥ç”¨é€šä¿—çš„è¯­è¨€è§£é‡Šä¸€ä¸‹å—? è°¢è°¢","like_count":0,"discussions":[{"author":{"id":2061045,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/72/f5/35f2f763.jpg","nickname":"è·¯å°é¹¿","note":"","ucode":"331F70041CE8DC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574786,"discussion_content":"IO å¤šè·¯å¤ç”¨åœ¨æœ¬æ•™ç¨‹çš„ç¬¬ 3 è®²æœ‰è®²åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654337837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":329591,"user_name":"Geek_9bd7ef","can_delete":false,"product_type":"c1","uid":2649828,"ip_address":"","ucode":"E68C656EE1EBAC","user_header":"https://static001.geekbang.org/account/avatar/00/28/6e/e4/9901994d.jpg","comment_is_top":false,"comment_ctime":1641437669,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641437669","product_id":100056701,"comment_content":"â€pthread_create å‡½æ•°åˆ›å»º 3 ä¸ªå­çº¿ç¨‹ï¼Œåˆ†åˆ«ç”±å®ƒä»¬è´Ÿè´£ AOF æ—¥å¿—å†™æ“ä½œã€é”®å€¼å¯¹åˆ é™¤ä»¥åŠæ–‡ä»¶å…³é—­çš„å¼‚æ­¥æ‰§è¡Œâ€œ è¯·é—®ä¸‹è¿™é‡Œé¢çš„æ–‡ä»¶å…³é—­æŒ‡çš„æ˜¯åŠ è½½æ–‡ä»¶åˆ°å†…å­˜çš„æ—¶å€™å—ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":326578,"user_name":"æ ‘å¿ƒ","can_delete":false,"product_type":"c1","uid":1589523,"ip_address":"","ucode":"6C329F0FF798B9","user_header":"https://static001.geekbang.org/account/avatar/00/18/41/13/ab14ad25.jpg","comment_is_top":false,"comment_ctime":1639569366,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1639569366","product_id":100056701,"comment_content":"æƒ°æ€§åˆ é™¤ä¸­ï¼Œå¦‚æœåœ¨å¤„ç†å®Œåˆ é™¤ä¹‹é—´å†æ¬¡è¯»è¿˜èƒ½è¯»åˆ°å—ï¼Ÿå¦‚æœä¸èƒ½æ˜¯å¦‚ä½•ä¿è¯çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":319192,"user_name":"Limmy","can_delete":false,"product_type":"c1","uid":1289329,"ip_address":"","ucode":"67E91AA8EC0729","user_header":"https://static001.geekbang.org/account/avatar/00/13/ac/71/1661342c.jpg","comment_is_top":false,"comment_ctime":1635665801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635665801","product_id":100056701,"comment_content":"å¼‚æ­¥åˆ é™¤çš„è¯ï¼Œå¦‚æœçœŸæ­£åˆ é™¤ä¹‹å‰çš„è¯»å–æ˜¯ä¸æ˜¯è¿˜æ˜¯èƒ½å¤Ÿè¯»åˆ°å‘¢ã€‚å¦‚æœä¸æ˜¯çš„è¯ï¼Œæ˜¯å¦ä¼šé˜»å¡åé¢å¯¹è¯¥å€¼çš„è¯»å–å’Œå†™æ“ä½œï¼Ÿ","like_count":0},{"had_liked":false,"id":312369,"user_name":"å€ªæ˜Š","can_delete":false,"product_type":"c1","uid":1236631,"ip_address":"","ucode":"790CB649341D37","user_header":"https://static001.geekbang.org/account/avatar/00/12/de/97/cda3f551.jpg","comment_is_top":false,"comment_ctime":1631777685,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1631777685","product_id":100056701,"comment_content":"å¼‚æ­¥åˆ é™¤çš„è¯ï¼Œå¦‚æœåœ¨è¿˜æ²¡åˆ é™¤å®Œä¹‹å‰æ”¶åˆ°äº†ä¸€æ¡è¯»çš„å‘½ä»¤ï¼Œä¼šè¿”å›ä»€ä¹ˆç»“æœå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2420294,"avatar":"https://static001.geekbang.org/account/avatar/00/24/ee/46/7d65ae37.jpg","nickname":"æœ¨å‡ ä¸¶","note":"","ucode":"FFDB958DA64F8C","race_medal":5,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404937,"discussion_content":"è¯»ä¸åˆ°ï¼Œå³ä½¿å¼€å¯æƒ°æ€§åˆ é™¤ï¼Œå…¨å±€hashè¡¨åˆ é™¤ä¹Ÿæ˜¯åŒæ­¥çš„ï¼Œåªæ˜¯é‡Šæ”¾å†…å­˜ç­‰åç»­æ“ä½œæ˜¯å¼‚æ­¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634466302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306444,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1628564586,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628564586","product_id":100056701,"comment_content":"æˆ‘è®¤ä¸ºåœ¨,å› ä¸ºReidsçš„å†™æ“ä½œå¯èƒ½åç»­è·Ÿç€è¯»è¯·æ±‚,ç›´æ¥æ”¾å…¥å¼‚æ­¥å­çº¿ç¨‹çš„è¯,å¯èƒ½ä¼šå‡ºç°å­çº¿ç¨‹æ²¡æœ‰åŠæ—¶å¤„ç†,å¯¼è‡´è¯»å–çš„æ•°æ®ä¸ç¬¦çš„é—®é¢˜,æ‰€ä»¥åº”è¯¥æ˜¯å…³é”®è·¯å¾„ä¸Šçš„","like_count":0},{"had_liked":false,"id":300856,"user_name":"å‰‘å…«","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1625405945,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1625405945","product_id":100056701,"comment_content":"é˜»å¡ç‚¹ï¼š<br>1.é¢å‘å®¢æˆ·ç«¯<br>ç½‘ç»œIOï¼ˆä¸å¯æ§ï¼‰<br>é›†åˆåŠbig keyæŸ¥è¯¢ï¼Œæ–°å¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤æ“ä½œ<br>æŸ¥è¯¢ä¸èƒ½å¼‚æ­¥æ“ä½œ<br>åˆ é™¤å¯å¼‚æ­¥ï¼Œæ–°å¢ä¿®æ”¹çœ‹ä¸šåŠ¡åœºæ™¯,rediså› ä¸ºæ˜¯é€šç”¨çš„å­˜å‚¨ï¼Œæ‰€ä»¥æ–°å¢å’Œä¿®æ”¹éƒ½æ˜¯åŒæ­¥æ“ä½œ(åº•å±‚çš„æŒä¹…åŒ–å¯ä»¥æ˜¯å¼‚æ­¥)ã€‚<br>2.ä¸»ä»åŒæ­¥<br>ä»åº“flush dbï¼ˆå¯ä»¥å¼‚æ­¥ï¼‰ï¼Œå¹¶åŠ è½½rdbæ–‡ä»¶(ä¸èƒ½å¼‚æ­¥ï¼Œå®¢æˆ·ç«¯è¯»å–æˆ–æ“ä½œçš„æ—¶å€™ä¾èµ–è¿™ä¸ªæ•°æ®)<br>3.é›†ç¾¤åˆ†ç‰‡ï¼Œrehash<br>è¿™é‡Œclusterå¯ä»¥åšæ¸è¿‘å¼rehash<br>4.ç£ç›˜äº¤äº’<br>AOFåŒæ­¥åˆ·ç›˜<br><br>æ”¶è·ï¼š<br>å¯¹äºå¼‚æ­¥è¦çœ‹ä¸šåŠ¡åœºæ™¯ï¼Œå¦‚æœæ˜¯å½±å“ä¸šåŠ¡çš„æ˜¯ä¸èƒ½å¼‚æ­¥çš„ã€‚<br>å…¶æ¬¡redis4å¯¹äºå·²ç»å¼€å¯äº†å¼‚æ­¥åˆ é™¤çš„æƒ…å†µï¼Œè¿˜æ˜¯ä¼šè€ƒè™‘æ¸…é™¤keyçš„æˆæœ¬ï¼Œå¦‚æœæˆæœ¬ä¸å¤§å°±ç›´æ¥æ¸…æ‰äº†ã€‚<br>è¿™ä¸ªä¸€æ–¹é¢æ˜¯çœ‹æ˜¯å¦æ˜¯è¿ç»­å†…å­˜çš„å…ƒç´ ï¼Œå¦‚æœæ˜¯ç›´æ¥åœ¨ä¸»çº¿ç¨‹æ¸…é™¤ã€‚å¦åˆ™å°±çœ‹å…ƒç´ æ•°é‡åŠå¤§å°äº†ã€‚","like_count":0},{"had_liked":false,"id":299566,"user_name":"èŠ±æ™¨å°‘å¹´","can_delete":false,"product_type":"c1","uid":1098987,"ip_address":"","ucode":"6AA3537A6BA10E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","comment_is_top":false,"comment_ctime":1624713601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624713601","product_id":100056701,"comment_content":"å¦‚æœaofé…ç½®é€‰é¡¹æ˜¯alwaysçš„è¯ï¼Œåº”è¯¥ä¸èƒ½ä½¿ç”¨å­çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œè¿™ä¸ªè½æ—¥å¿—æ“ä½œæŠŠï¼Ÿ<br>å› ä¸ºæˆ‘ç†è§£alwaysåº”è¯¥æ˜¯ä¸ºäº†ä¿è¯æ•°æ®å®‰å…¨æ€§ï¼Œå¦‚æœå¼‚æ­¥æ‰§è¡Œï¼Œå°±å¤±å»äº†ä¿è¯æ•°æ®å®‰å…¨æ€§çš„æ„ä¹‰ã€‚","like_count":0},{"had_liked":false,"id":294328,"user_name":"æ‚Ÿç©ºèŠæ¶æ„","can_delete":false,"product_type":"c1","uid":1123163,"ip_address":"","ucode":"C2F482A0CF8AF1","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/5b/983408b9.jpg","comment_is_top":false,"comment_ctime":1621901524,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1621901524","product_id":100056701,"comment_content":"è¿™ç¯‡æ€»ç»“å¾—å¾ˆæ£’ï¼","like_count":0},{"had_liked":false,"id":291927,"user_name":"æ´»ç€","can_delete":false,"product_type":"c1","uid":1080023,"ip_address":"","ucode":"29B91C57E94E65","user_header":"https://static001.geekbang.org/account/avatar/00/10/7a/d7/8d64cfb1.jpg","comment_is_top":false,"comment_ctime":1620610331,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1620610331","product_id":100056701,"comment_content":"ä¸»ä»å¤åˆ¶FLUSHDB å¦‚æœæ”¹ä¸ºå¼‚æ­¥ åç»­ä»åŠ rdbæ–‡ä»¶åŠ è½½çš„æ•°æ®æ˜¯å¦ä¼šè¢«è¯¯åˆ é™¤","like_count":0,"discussions":[{"author":{"id":1613760,"avatar":"https://static001.geekbang.org/account/avatar/00/18/9f/c0/86febfff.jpg","nickname":"Master","note":"","ucode":"79D0145B853C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373982,"discussion_content":"è‚¯å®šä¸¥æ ¼æŒ‰ç…§é€»è¾‘å…ˆåé¡ºåºæ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620957814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":289497,"user_name":"æ²§é¢œ","can_delete":false,"product_type":"c1","uid":1517966,"ip_address":"","ucode":"143CF912BC7247","user_header":"https://static001.geekbang.org/account/avatar/00/17/29/8e/bdd22627.jpg","comment_is_top":false,"comment_ctime":1619054382,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619054382","product_id":100056701,"comment_content":"åˆ é™¤å¦‚æœæ˜¯å¼‚æ­¥æ“ä½œï¼Œé‚£è¯»å–æœ‰æ²¡æœ‰å¯èƒ½è¯»åˆ°åˆ é™¤çš„å€¼","like_count":0},{"had_liked":false,"id":285109,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1616630070,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1616630070","product_id":100056701,"comment_content":"Redis å®ä¾‹è¿è¡Œæ—¶ 4 å¤§ç±»äº¤äº’å¯¹è±¡çš„å›¾éå¸¸æ¼‚äº®ï¼Œä¸€å›¾é¡¶åƒè¨€ã€‚<br><br>Redis é˜»å¡ç‚¹<br><br>1. é›†åˆçš„å…¨é‡æŸ¥è¯¢ã€èšåˆ<br>2. bigkey åˆ é™¤ï¼ˆé‡Šæ”¾å†…å­˜ï¼‰<br>3. æ¸…ç©ºæ•°æ®<br>4. AOF æ—¥å¿—åŒæ­¥å†™<br>5. ï¼ˆä»åº“ï¼‰åŠ è½½ RDB æ–‡ä»¶<br>6. Redis Cluster åŒæ­¥è¿ç§» bigkey ï¼ˆåç»­æœ‰è§£å†³æ–¹æ¡ˆï¼‰<br><br>å…³é”®æ“ä½œï¼ˆè¯»æ“ä½œï¼‰<br><br>- é›†åˆçš„å…¨é‡æŸ¥è¯¢å’Œåˆ é™¤<br>- ä»åº“åŠ è½½ RDB<br><br>pthread_create å­çº¿ç¨‹<br><br>1. AOF æ—¥å¿—å†™æ“ä½œ<br>2. é”®å€¼å¯¹åˆ é™¤<br>3. æ–‡ä»¶å…³é—­<br><br>å¦‚æœæ˜¯ Redis 4.0 ä»¥å‰çš„ç‰ˆæœ¬ï¼Œbigkey åˆ é™¤çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯é›†åˆç±»å‹å¯ä»¥å…ˆä½¿ç”¨ SCAN å‘½ä»¤è¯»å–ï¼ˆä¸€éƒ¨åˆ†ï¼‰æ•°æ®ï¼Œç„¶åå†è¿›è¡Œåˆ é™¤ï¼›å¦‚æœæ˜¯ Hash ç±»å‹ï¼Œé‚£ä¹ˆæ­é…ä½¿ç”¨ HSCAN å’Œ HDELï¼ŒæŠŠåˆ é™¤å‹åŠ›åˆ†æ‘Šåˆ°å¤šæ¬¡æ“ä½œä¸­ã€‚<br><br>é›†åˆå…¨é‡æŸ¥è¯¢å’Œèšåˆæ“ä½œä¹Ÿå¯ä»¥ä½¿ç”¨ SCAN å‘½ä»¤ï¼Œåˆ†æ‰¹è¯»å–æ•°æ®ï¼Œåœ¨å®¢æˆ·ç«¯èšåˆ<br>è§£å†³ä»åº“åŠ è½½ RDB æ–‡ä»¶çš„é˜»å¡ï¼Œå¯ä»¥æŠŠä¸»åº“æ•°æ®é‡æ§åˆ¶åœ¨ 2~4GB<br><br>å¯¹äºè¯¾åé¢˜ç›® Redis çš„å†™æ“ä½œï¼ˆSETã€HSETã€SADDï¼‰ä¸€èˆ¬æ¥è¯´åº”è¯¥ä¸åœ¨å…³é”®è·¯å¾„ä¸Šã€‚ä¸»è¦è¿˜æ˜¯çœ‹ä¸šåŠ¡çš„éœ€è¦ï¼Œå¦‚æœæ˜¯è¦æ±‚å®æ—¶è¯»å–å†™å…¥å†…å®¹ï¼Œé‚£ä¹ˆå†™æ“ä½œå°±åœ¨å…³é”®è·¯å¾„ä¸Šï¼›ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸è¦æ±‚ï¼Œå°±ä¸åœ¨å…³é”®è·¯å¾„ä¸Šã€‚<br><br>å¯ä»¥å¯¹ç…§çš„æ˜¯ï¼Œå¯¹äºå…³ç³»å‹æ•°æ®åº“ï¼Œç‰¹åˆ«æ˜¯è®°å½•æ—¥å¿—çš„ï¼Œå†™æ“ä½œåº”è¯¥åœ¨å…³é”®è·¯å¾„ä¸Šã€‚<br><br>çœ‹äº†è¯¾ä»£è¡¨ @Kaito çš„å›ç­”ï¼Œæˆ‘ä¹Ÿåªå¥½è†œæ‹œä¸€ä¸‹äº†ï¼Œç‰¹åˆ«æ˜¯å¯¹äº lazy free çš„è¡¥å……ï¼Œæˆ‘è§‰çš„å®Œå…¨å¯ä»¥æ”¾åˆ°ä¸“æ æ­£æ–‡ä¸­å»ã€‚","like_count":0},{"had_liked":false,"id":282931,"user_name":"stockçŸ³å¤´","can_delete":false,"product_type":"c1","uid":1269523,"ip_address":"","ucode":"ED8AEBA09A5A31","user_header":"https://static001.geekbang.org/account/avatar/00/13/5f/13/d22a0ff0.jpg","comment_is_top":false,"comment_ctime":1615468722,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615468722","product_id":100056701,"comment_content":"æƒ³é—®ä¸€ä¸ªå¯¹äºèšåˆæ“ä½œçš„ç–‘é—®ã€‚æ¯”å¦‚ä½¿ç”¨ZSETå­˜å‚¨äº†æ—¶é—´åºåˆ—æ•°æ® timestamp1_value1, timestamp2_value2......ï¼Œæƒ³åšdistinctã€sumä¹‹ç±»çš„èšåˆæ“ä½œã€‚åœ¨åº”ç”¨æ—¶ï¼Œè¿™ä¸ªèšåˆæ“ä½œé€šè¿‡luaè„šæœ¬ï¼Œæ”¾åˆ°redisæœåŠ¡ç«¯å®ç°æœ‰å¿…è¦å—ï¼Ÿè¿˜æ˜¯é€šè¿‡zrangebyscoreæ¥æ•°æ®åˆ°æœ¬åœ°æ›´å¥½ï¼Ÿ","like_count":0},{"had_liked":false,"id":281539,"user_name":"ladba","can_delete":false,"product_type":"c1","uid":1232522,"ip_address":"","ucode":"78ADCE66B403A4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/K8uoNDBqLNQicA8KOecJIb6DWrt7YJuy99VsVpAqPZia2SzSGyECAaPhFU5td1cO9wqjWIqLWIzfxd5DqmUXTKibw/132","comment_is_top":false,"comment_ctime":1614779294,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614779294","product_id":100056701,"comment_content":"å½“ AOF æ—¥å¿—é…ç½®æˆ everysec é€‰é¡¹åï¼Œä¸»çº¿ç¨‹ä¼šæŠŠ AOF å†™æ—¥å¿—æ“ä½œå°è£…æˆä¸€ä¸ªä»»åŠ¡ï¼Œä¹Ÿæ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚åå°å­çº¿ç¨‹è¯»å–ä»»åŠ¡åï¼Œç„¶åå†™å…¥AOFæ—¥å¿—ã€‚--é‚£è¿™è¿˜å«åŒæ­¥å†™å—ï¼Ÿä¸å°±æˆå¼‚æ­¥çš„äº†å—ï¼Ÿé‚£è¿™ä¸ªæ—¶å€™å®•æœºäº†ï¼Œæ•°æ®ä¸å°±ä¸¢å¤±äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2028938,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/f5/8a/dc9a23a1.jpg","nickname":"ç»­è´¹ä¸“ç”¨","note":"","ucode":"1B585A131B64B4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":388193,"discussion_content":"Everysecæœ¬æ¥å°±ä¸ä¿è¯æ•°æ®å®Œå…¨ä¸ä¸¢å¤±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628648121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275588,"user_name":"å°‘å¹´","can_delete":false,"product_type":"c1","uid":1009178,"ip_address":"","ucode":"2B6BCC526A5F2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/1a/9e9f7d58.jpg","comment_is_top":false,"comment_ctime":1611591025,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611591025","product_id":100056701,"comment_content":"â€œRedis ä¸»çº¿ç¨‹å¯åŠ¨åï¼Œä¼šä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„ pthread_create å‡½æ•°åˆ›å»º 3 ä¸ªå­çº¿ç¨‹ï¼Œåˆ†åˆ«ç”±å®ƒä»¬è´Ÿè´£ AOF æ—¥å¿—å†™æ“ä½œã€é”®å€¼å¯¹åˆ é™¤ä»¥åŠæ–‡ä»¶å…³é—­çš„å¼‚æ­¥æ‰§è¡Œâ€<br>è¿™å¥è¯è·Ÿå›¾ç‰‡æœ‰äº›çŸ›ç›¾ï¼Ÿ","like_count":0},{"had_liked":false,"id":263267,"user_name":"æ¼‚æ³Šè€…åŠå…¶å½±å­","can_delete":false,"product_type":"c1","uid":1119979,"ip_address":"","ucode":"13FE760FE8B111","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/eb/30864e40.jpg","comment_is_top":false,"comment_ctime":1606083765,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1606083765","product_id":100056701,"comment_content":"ä¸»ä»èŠ‚ç‚¹äº¤äº’æ—¶ä¸»åº“ä¹Ÿä¼šé˜»å¡å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339553,"discussion_content":"ä¼š , forkå­è¿›ç¨‹æ—¶ä¼šé˜»å¡ä¸€ä¸‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609730237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":260792,"user_name":"æ˜æœˆå‡ æ—¶","can_delete":false,"product_type":"c1","uid":1675716,"ip_address":"","ucode":"E46C844EAB2CD0","user_header":"https://static001.geekbang.org/account/avatar/00/19/91/c4/bcdcda65.jpg","comment_is_top":false,"comment_ctime":1605106861,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1605106861","product_id":100056701,"comment_content":"é”®å€¼å¯¹çš„å¢åˆ æ”¹æŸ¥æ“ä½œæ˜¯ Redis å’Œå®¢æˆ·ç«¯äº¤äº’çš„ä¸»è¦éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯ Redis ä¸»çº¿ç¨‹æ‰§è¡Œçš„ä¸»è¦ä»»åŠ¡ã€‚æ‰€ä»¥ï¼Œå¤æ‚åº¦é«˜çš„å¢åˆ æ”¹æŸ¥æ“ä½œè‚¯å®šä¼šé˜»å¡ Redisã€‚","like_count":0},{"had_liked":false,"id":260791,"user_name":"æ˜æœˆå‡ æ—¶","can_delete":false,"product_type":"c1","uid":1675716,"ip_address":"","ucode":"E46C844EAB2CD0","user_header":"https://static001.geekbang.org/account/avatar/00/19/91/c4/bcdcda65.jpg","comment_is_top":false,"comment_ctime":1605106842,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1605106842","product_id":100056701,"comment_content":"å¦‚æœå®¢æˆ·ç«¯ä¾èµ–æ“ä½œè¿”å›å€¼çš„ä¸åŒï¼Œè¿›è€Œéœ€è¦å¤„ç†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œé‚£ä¹ˆHSETå’ŒSADDæ“ä½œç®—å…³é”®è·¯å¾„ï¼Œè€ŒSETæ“ä½œä¸ç®—å…³é”®è·¯å¾„ã€‚å› ä¸ºHSETå’ŒSADDæ“ä½œï¼Œå¦‚æœfieldæˆ–memberä¸å­˜åœ¨æ—¶ï¼ŒRedisç»“æœä¼šè¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚è€ŒSETæ“ä½œè¿”å›çš„ç»“æœéƒ½æ˜¯OKï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å…³å¿ƒç»“æœæœ‰ä»€ä¹ˆä¸åŒã€‚","like_count":0},{"had_liked":false,"id":258194,"user_name":"Gypsophilaä¸¶ğŸ’","can_delete":false,"product_type":"c1","uid":2267827,"ip_address":"","ucode":"6213EBAEBC7171","user_header":"https://static001.geekbang.org/account/avatar/00/22/9a/b3/7055134b.jpg","comment_is_top":false,"comment_ctime":1604324697,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1604324697","product_id":100056701,"comment_content":"ç”¨SCANçš„æ–¹å¼å»åˆ é™¤é›†åˆç±»å‹æ•°æ®ä»¥å‡å°‘ä¸»çº¿ç¨‹çš„é˜»å¡,ä½†è®ºæ•ˆç‡ä¸Šè®²,è¿™å¢åŠ äº†TCPä¼ è¾“çš„æ¬¡æ•°,å¯¹äºè¿™ä¸€ç‚¹è¯¥æ€ä¹ˆæƒè¡¡å‘¢?","like_count":0,"discussions":[{"author":{"id":1066508,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/0c/773ba2f3.jpg","nickname":"ä¸‹ä¸ªç›®æ ‡45k","note":"","ucode":"193BA8C3AA9A61","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339555,"discussion_content":"åˆ†æ²»æ€æƒ³åœ¨è®¡ç®—æœºä½“ç³»æ— å¤„ä¸åœ¨","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609730305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":250237,"user_name":"pines","can_delete":false,"product_type":"c1","uid":1200708,"ip_address":"","ucode":"7B925605B36B4E","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/44/de7f2b98.jpg","comment_is_top":false,"comment_ctime":1601000835,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601000835","product_id":100056701,"comment_content":"æˆ‘è§‰å¾—æ˜¯åœ¨çš„ï¼Œé’ˆå¯¹ä¸€ä¸ªå†™æ“ä½œï¼Œå¯èƒ½ç´§æ¥ç€å°±ä¼šæœ‰ä¸‹ä¸€ä¸ªè¯»æ“ä½œï¼Œå¦‚æœæ˜¯å¼‚æ­¥çš„è¯ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå†™å¤±è´¥æˆ–è€…å†™å»¶è¿Ÿï¼Œå¯¼è‡´å‡ºç°è„è¯»ã€‚åˆ é™¤æ“ä½œå³ä½¿æˆ‘åˆ é™¤å¤±è´¥ä¸å½±å“æ­£å¸¸æ•°æ®çš„å‡†ç¡®æ€§ã€‚åˆ¤æ–­çš„æ ‡å‡†å°±æ˜¯å¼‚æ­¥æ“ä½œèƒ½ä¸èƒ½ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§","like_count":0},{"had_liked":false,"id":249611,"user_name":"Mr.èœœ","can_delete":false,"product_type":"c1","uid":1035257,"ip_address":"","ucode":"C911B81198B3F5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","comment_is_top":false,"comment_ctime":1600705856,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1600705856","product_id":100056701,"comment_content":"çœ‹åˆ°ä»åº“è¯»rdbæ–‡ä»¶ï¼Œæ¥ç€ä¹‹å‰è¯´è¿‡å¦‚æœä»åº“åŒæ­¥çª—å£è¶…æ—¶ï¼Œé‚£ä¹ˆä¼šé‡æ–°åŒæ­¥æ–°çš„rdbæ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¼šä¸ä¼šå­˜åœ¨ä¸€ç§å¯èƒ½ï¼Œå°±æ˜¯ä»åº“æ¯æ¬¡åŒæ­¥å®Œrdbæ–‡ä»¶åï¼Œå…¶åŒæ­¥çª—å£éƒ½æ˜¯è¶…æ—¶çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1221953,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a5/41/f480323c.jpg","nickname":"é½å“¥å“¥","note":"","ucode":"867D3EBB5BD608","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310474,"discussion_content":"åœ¨åšå…¨é‡åŒæ­¥æ—¶ï¼Œmasterä¼šæŠŠå†™å‘½ä»¤æ”¾åˆ°ç¼“å­˜ï¼ŒrdbåŒæ­¥å®Œåç»§ç»­æŠŠç¼“å­˜çš„å†™å‘½ä»¤åŒæ­¥åˆ°slaveï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ä¸€ç›´è¶…æ—¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601870221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1221953,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a5/41/f480323c.jpg","nickname":"é½å“¥å“¥","note":"","ucode":"867D3EBB5BD608","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310547,"discussion_content":"â€œrdbåŒæ­¥å®Œåç»§ç»­æŠŠç¼“å­˜çš„å†™å‘½ä»¤åŒæ­¥åˆ°slaveâ€ï¼Œå¦‚æœè¿™ä¸ªè¿‡ç¨‹å°±å·²ç»è¶…è¿‡ç¼“å­˜å®¹é‡äº†å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601901046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":310474,"ip_address":""},"score":310547,"extra":""},{"author":{"id":1221953,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a5/41/f480323c.jpg","nickname":"é½å“¥å“¥","note":"","ucode":"867D3EBB5BD608","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1035257,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cb/f9/75d08ccf.jpg","nickname":"Mr.èœœ","note":"","ucode":"C911B81198B3F5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310673,"discussion_content":"è¿™æ ·ä¼šè¿›å…¥ä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¸è¿‡ç¼“å†²åŒºå¤§å°ä¼šæ ¹æ®ä¸šåŠ¡ä¼°ç®—ä¸€ä¸ªåˆé€‚çš„å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601990958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":310547,"ip_address":""},"score":310673,"extra":""}]}]},{"had_liked":false,"id":249538,"user_name":"é»¯è¨€","can_delete":false,"product_type":"c1","uid":1200106,"ip_address":"","ucode":"11D7CAC0CE27D1","user_header":"https://static001.geekbang.org/account/avatar/00/12/4f/ea/05056ee0.jpg","comment_is_top":false,"comment_ctime":1600686332,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1600686332","product_id":100056701,"comment_content":"å¼‚æ­¥å¤„ç†ï¼Œrediså‡ºç°å¼‚å¸¸é‡å¯ï¼Œä¼šä¸ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1170843,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","nickname":"yyl","note":"","ucode":"1741DACDFCA9AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312543,"discussion_content":"ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602731260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248482,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1600176810,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1600176810","product_id":100056701,"comment_content":"lazy-free å¯ä»¥æé«˜Redis æ€§èƒ½ï¼Œä¸ºä»€ä¹ˆé»˜è®¤å…³é—­å‘¢ï¼Ÿ è¿™æ˜¯å¤„äºä»€ä¹ˆè€ƒè™‘çš„","like_count":0},{"had_liked":false,"id":248263,"user_name":"å°è¢","can_delete":false,"product_type":"c1","uid":1811495,"ip_address":"","ucode":"3F5D8721F577D9","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a4/27/15e75982.jpg","comment_is_top":false,"comment_ctime":1600083672,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600083672","product_id":100056701,"comment_content":"æˆ‘å¬è¯´ç½‘ç»œéƒ¨åˆ†å·²ç»æœ‰å¤šçº¿ç¨‹å®ç°ï¼Œè¿™é‡Œå·²ç»ä¸æ˜¯é—®é¢˜äº†å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":248165,"user_name":"MClink","can_delete":false,"product_type":"c1","uid":1435733,"ip_address":"","ucode":"F479190923355C","user_header":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","comment_is_top":false,"comment_ctime":1600047619,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1600047619","product_id":100056701,"comment_content":"æƒ³é—®ä¸€ä¸ªé—®é¢˜ï¼ŒRedis è‡ªå·±ä¼šä¸ä¼šç»´æŠ¤ä¸€ä¸ªå¯ç”¨å†…å­˜åŒºåŸŸå‘¢ï¼Œæˆ‘çœ‹è¿‡ä¸€äº›å·¥å…·çš„è®¾è®¡ï¼Œæœ‰äº›éƒ½æ˜¯å‘ os ç”³è¯·åˆ°å†…å­˜ç©ºé—´åï¼Œéƒ½ä¼šé€šè¿‡æ ‡è®°ä½œç”¨ï¼ˆå³æ ‡è®°ä¸ºå¯å¤ç”¨ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„é‡Šæ”¾å†…å­˜ï¼‰æ¥ç®¡ç†ä»¥å¾€ç”³è¯·è¿‡çš„å†…å­˜ã€‚æ–‡ä¸­æåˆ°çš„ç©ºé—²å†…å­˜å—çš„é“¾è¡¨ï¼Œåº”è¯¥æ˜¯ os å±‚çº§çš„æŠŠï¼Œé‚£ Redis æœ‰æ²¡æœ‰ç›¸å…³çš„å¤„ç†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305849,"discussion_content":"æœ‰å§ï¼Œå†…å­˜åˆ†é…å™¨ï¼ˆé»˜è®¤jemallocï¼‰çš„ä½œç”¨å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600094250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1811495,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a4/27/15e75982.jpg","nickname":"å°è¢","note":"","ucode":"3F5D8721F577D9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305789,"discussion_content":"ä¸ªäººè§‰å¾—åº”è¯¥ä¼šè¿™æ ·åšã€‚ä¸ç„¶é©¬ä¸Šæ¥ä¸€ä¸ªæŸ¥è¯¢åˆšåˆ é™¤keyçš„è¯»æ“ä½œï¼Œå°±éº»çƒ¦äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600085033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}