{"id":108491,"title":"02 | 如何通过WebRTC进行音视频设备检测呢？","content":"<p>使用过音视频会议或在线教育等实时互动软件的同学都知道，在打开摄像头（Camera）或麦克风（Micphone）的时候，首先要对其进行检测，检测的内容包括：</p><ul>\n<li>电脑/手机上都有那些音视频设备？</li>\n<li>我们选中的音视频设备是否可用？</li>\n</ul><p>以手机为例，它一般会包括前置摄像头和后置摄像头。我们可以根据自己的需要，选择打开不同的摄像头。当然，手机上不单有多个摄像头，麦克风的种类就更多了， 如：</p><ul>\n<li>系统内置麦克</li>\n<li>外插的耳机</li>\n<li>蓝牙耳机</li>\n<li>……</li>\n</ul><p>以上这些设备，我们都可以通过手动或自动的方式打开它们。</p><p>那么，WebRTC是否提供了相关的接口，以便我们查询自己机子上都有哪些音视频设备呢？答案是肯定的。</p><p>下面我们就来看看如何使用浏览器下 WebRTC API 来显示我们的音视频设备吧。</p><h2>WebRTC处理过程</h2><p>在正式讲解之前，咱们先回顾一下WebRTC 的整体处理过程图，以便让你清楚地知道咱们这篇文章在整个处理过程中的位置。</p><p><img src=\"https://static001.geekbang.org/resource/image/e9/1c/e9a2fd3adee1568e4171addce5b64a1c.png?wh=1142*571\" alt=\"\"></p><center><span class=\"reference\">WebRTC 1对1音视频实时通话过程示意图</span></center><p>上面这幅图与第一篇文章中的图几乎是一模一样的。其差别在于，我将图中两个<strong>音视频设备检测模块</strong>置红了。</p><p>这样，我们本文所讲的内容在整个 WebRTC 处理过程中的位置就一目了然了！</p><h2>音视频设备的基本原理</h2><p>既然说到音视频设备，那么我们再顺便介绍一下音视频设备的基本工作原理，对于这些设备工作原理的了解，会为你后续学习音视频相关知识提供很大的帮助。</p><!-- [[[read_end]]] --><h3>1. 音频设备</h3><p>音频有<strong>采样率</strong>和<strong>采样大小</strong>的概念，实际上这两个概念就与音频设备密不可分。</p><p>音频输入设备的主要工作是采集音频数据，而采集音频数据的本质就是模数转换（A/D），即将模似信号转换成数字信号。</p><p>模数转换使用的采集定理称为<strong>奈奎斯特定理</strong>，其内容如下：</p><blockquote>\n<p>在进行模拟/数字信号的转换过程中，当采样率大于信号中最高频率的2倍时，采样之后的数字信号就完整地保留了原始信号中的信息。</p>\n</blockquote><p>你也知道，人类听觉范围的频率是 20Hz～20kHz 之间。对于日常语音交流（像电话），8kHz 采样率就可以满足人们的需求。但为了追求高品质、高保真，你需要将音频输入设备的采样率设置在 40kHz 以上，这样才能完整地将原始信号保留下来。例如我们平时听的数字音乐，一般其采样率都是44.1k、48k等，以确保其音质的无损。</p><p>采集到的数据再经过量化、编码，最终形成数字信号，这就是音频设备所要完成的工作。在量化和编码的过程中，采样大小（保存每个采样的二进制位个数）决定了每个采样最大可以表示的范围。如果采样大小是 8 位，则它表示的最大值是就是2<sup>8</sup> -1，即 255；如果是 16 位，则其表示的最大数值是 65535。</p><h3>2. 视频设备</h3><p>至于视频设备，则与音频输入设备很类似。当实物光通过镜头进行到摄像机后，它会通过视频设备的模数转换（A/D）模块，即光学传感器， 将光转换成数字信号，即 RGB（Red、Green、Blue）数据。</p><p>获得 RGB 数据后，还要通过 DSP（Digital Signal Processer）进行优化处理，如自动增强、白平衡、色彩饱和等都属于这一阶段要做的事情。</p><p>通过 DSP 优化处理后，你就得到了24位的真彩色图片。因为每一种颜色由 8 位组成，而一个像素由RGB三种颜色构成，所以一个像素就需要用24位表示，故称之为<strong>24位真彩色</strong>。</p><p>另外，此时获得的 RGB 图像只是临时数据。因最终的图像数据还要进行压缩、传输，而编码器一般使用的输入格式为 YUV I420，所以在摄像头内部还有一个专门的模块用于将 RGB 图像转为 YUV 格式的图像。</p><p>那什么是YUV呢？YUV也是一种色彩编码方法，主要用于电视系统以及模拟视频领域。它将亮度信息（Y）与色彩信息（UV）分离，即使没有UV信息一样可以显示完整的图像，只不过是黑白的，这样的设计很好地解决了彩色电视机与黑白电视的兼容问题。</p><p>YUV格式还是蛮复杂的，它有好几种存储方式，需要用一整篇的文章来详述才行。所以，在这里我就不一一描述了，如果你想进一步了解其相关知识可以到网上搜索相关资料自行学习。</p><p>通过上面的讲解，现在你应该对音频设备与视频设备都有一个基本的认知了。</p><h2>WebRTC设备管理的基本概念</h2><p>在讲解如何通过浏览器的 WebRTC API 获取音视频设备之前，咱们先了解几个WebRTC 关于设备的基本概念。如果这些基本概念不清楚的话，就很难理解后面的知识。</p><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\">MediaDevices</a>，该接口提供了访问（连接到计算机上的）媒体设备（如摄像头、麦克风）以及截取屏幕的方法。实际上，它允许你访问任何硬件媒体设备。而<strong>咱们要获取可用的音视频设备列表，就是通过该接口中的方法来实现的</strong>。</p><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo\">MediaDeviceInfo</a>，它表示的是每个输入/输出设备的信息。包含以下三个重要的属性：</p><ul>\n<li><strong>deviceID</strong>，设备的<strong>唯一标识</strong>；</li>\n<li><strong>label</strong>，设备<strong>名称</strong>；</li>\n<li><strong>kind</strong>，设备<strong>种类</strong>，可用于识别出是音频设备还是视频设备，是输入设备还是输出设备。</li>\n</ul><p>需要注意的是，出于安全原因，<strong>除非用户已被授予访问媒体设备的权限（要想授予权限需要使用HTTPS请求），否则label字段始终为空</strong>。</p><p><strong>另外，label 可以用作指纹识别机制的一部分，以识别是否是合法用户</strong>。对于这一点我们以后再专门讨论。</p><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\">Promise</a>，它是一种JavaScript异步处理机制。其思想是，首先执行指定的业务逻辑，而不管逻辑的对错，然后再根据结果做具体的操作：如果成功了做些什么，失败了做些什么。结合下面的例子，可以让你对 <strong>Promise</strong> 有个清楚的认识，生成 <strong>Promise</strong> 对象时，首先会执行 <strong>function</strong> 函数中的逻辑，该函数会根据随机数生成 timeOut，然后定时地对 timeOut 做出判断：</p><ul>\n<li>如果 timeOut 小于1，则调用 resolve 方法。resolve 又会调用 <strong>Promise</strong> 中 <strong>then</strong> 部分传入的函数。</li>\n<li>如果 timeOut 大于等于1，则调用 reject 方法。reject 则会调用 <strong>Promise</strong> 中 <strong>catch</strong> 部分传入的函数。</li>\n</ul><pre><code>\tnew Promise(function (resolve, reject) {\n\t\tconsole.log('start new Promise...');\n\n        //产生随机值\n\t\tvar timeOut = Math.random() * 2;\n\t\tconsole.log('set timeout to: ' + timeOut + ' seconds.');\n\n        //设置一个定时器函数，根据随机值触发该函数执行\n\t\tsetTimeout(function () {\n\t\t\tif (timeOut &lt; 1) {\n\t\t\t\tconsole.log('call resolve()...');\n\t\t\t\tresolve('200 OK');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log('call reject()...');\n\t\t\t\treject('timeout in ' + timeOut + ' seconds.');\n\t\t\t}\n\t\t}, timeOut * 1000);\n\t}).then(function (r) {\n\t\tconsole.log('Done: ' + r);\n\t}).catch(function (reason) {\n\t\tconsole.log('Failed: ' + reason);\n\t});\n</code></pre><h2>获取音视频设备列表</h2><p>有了上面这些基础知识，你就很容易理解下面的内容了。首先，我们来看浏览器上WebRTC 获取音视频设备列表的接口，其格式如下：</p><pre><code>MediaDevices.enumerateDevices()\n</code></pre><p>通过调用 <strong>MediaDevices</strong> 的 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/enumerateDevices\">enumerateDevices()</a> 方法就可以获取到媒体输入和输出设备列表，例如： 麦克风、相机、耳机等。是不是非常简单？</p><p>该函数返回的是一个 <strong>Promise</strong> 对象。我们只需要向它的 <strong>then</strong> 部分传入一个函数，就可以通过该函数获得所有的音视频设备信息了。</p><p>传入的函数有一个参数，它是一个 <strong>MediaDeviceInfo</strong> 类型的数组，用来存放 WebRTC 获取到的每一个音视频设备信息。</p><p>这样说可能有点抽象，还是让我们结合下面代码看一个具体的例子吧。</p><pre><code>...\n\n//判断浏览器是否支持这些 API\nif (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n  console.log(&quot;enumerateDevices() not supported.&quot;);\n  return;\n}\n\n// 枚举 cameras and microphones.\nnavigator.mediaDevices.enumerateDevices()\n.then(function(deviceInfos) {\n\n  //打印出每一个设备的信息\n  deviceInfos.forEach(function(deviceInfo) {\n    console.log(deviceInfo.kind + &quot;: &quot; + deviceInfo.label +\n                &quot; id = &quot; + deviceInfo.deviceId);\n  });\n})\n.catch(function(err) {\n  console.log(err.name + &quot;: &quot; + err.message);\n});\n</code></pre><p>总结起来，上面的代码中做了以下几件事儿：</p><ul>\n<li>首先，判断浏览器是否支持 MediaDevice 接口（老版本浏览器可能不支持）。</li>\n<li>如果支持，则调用<code>navigator.mediaDevices.enumerateDevices()</code>方法获取音视频设备列表，该方法会返回一个 <strong>Promise</strong> 对象。</li>\n<li>如果返回 <strong>Promise</strong> 对象成功，则执行then中的函数。而<strong>then</strong>分支中的函数非常简单，它遍历每一个MediaDeviceInfo，并将每个 MediaDeviceInfo 中的基本信息打印出来，也就是我们想要的每个音视频设备的基本信息。</li>\n<li>但如果失败的话，则执行 <strong>catch</strong> 中的函数。</li>\n</ul><p>通过上面的介绍，你是不是觉得在浏览器上检测音视频设备非常简单呢？</p><h2>设备检测</h2><p>在获取到电脑/手机上的所有设备信息后，我们就可以对设备的可用性做真正的检测了。在我们的设备列表中，可以通过<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo\">MediaDeviceInfo</a>结构中的<strong>kind</strong>字段，将设备分类为音频设备或视频设备。</p><p>如果再细分的话，还可以通过 kind 字段再将音视设备分为<strong>输入设备</strong>和<strong>输出设备</strong>。如我们平时使用的耳机，从大的方面说它是一个音频设备，但它同时兼有音频输入设备和音频输出设备的功能。</p><p>对于区分出的音频设备和视频设备，每种不同种类的设备还会设置各自的<strong>默认设备</strong>。还是以耳机这个音频设备为例，将耳机插入电脑后，耳机就变成了音频的默认设备；将耳机拔出后，默认设备又切换成了系统的音频设备。</p><p>因此，在获取到所有的设备列表后，如果我们不指定某个具体设备，直接调用<a href=\"https://time.geekbang.org/column/article/107948\">《01 | 原来通过浏览器访问摄像头这么容易》</a>一文中所介绍的 getUserMedia  API 来采集音视频数据时，它就会从设备列表中的默认设备上采集数据。当然，我们是可以通过 MediaDeviceInfo 中的 deviceID 字段来指定从哪个具体设备采集数据的，不过这就是后话了。</p><p>如果我们能从指定的设备上采集到音视频数据，那说明这个设备就是有效的设备。我们在排查设备问题的时候，就可以利用上面的方法，对每个设备都一项一项进行检测，即<strong>先排查视频设备，然后再排查音频设备</strong>。因此，需要<strong>调用两次 getUserMedia API 进行设备检测</strong>。</p><p>第一次，调用  getUserMedia API 只采集视频数据并将其展示出来。如果用户能看到自己的视频，说明视频设备是有效的；否则，设备无效，可以再次选择不同的视频设备进行重新检测。</p><p>第二次，如果用户视频检测通过了，再次调用 getUserMedia API 时，则只采集音频数据。由于音频数据不能直接展示，所以需要使用JavaScript中的 AudioContext 对象，将采集到的音频计算后，再将其绘制到页面上。这样，当用户看到音频数值的变化后，说明音频设备也是有效的。</p><p>通过以上步骤，我们就完成了对指定音视频设备的检测工作。</p><h2>小结</h2><p>在本文中，我主要向你介绍了如何通过浏览器中的WebRTC接口获取自己机子上的音视频设备列表。通过上面的描述你应该可以了解到，在浏览器下只需要调用 enumerateDevices 方法，就可以轻松获取设备信息了。</p><p>这个看似简单的接口，其实在WebRTC底层做了大量的工作。你可以思考这样一个case，当我们在获取设备列表时，用户将设备从电脑上拔下来了，此时设备列表会发生怎样的变化呢？如果设备被拔出后，设备列表不发生变化，那么用户正好选择使用被拔下的设备，又会怎样呢？</p><p>你还可以顺着这个思路想下去，当我们正在使用某个视频或音频设备的时候，由于某种原因，设备失效了（设备坏了或被拔出了），这种情况下又该怎样处理呢？一般情况下，我们想到的可能是提示设备出错的消息。但如果电脑中还有其他设备可用呢？是不是可以自动切到另外一个可用的设备上呢？另外，假如有多个设备同时可用，此时该如何切换设备呢？这听上去是不是就很棘手？</p><p>但不用担心，我说的这些问题，WebRTC已经处理得非常好，有兴趣的同学可以自行验证一下 WebRTC的具体行为是怎样的。所以，从这一点我们也可以看出 WebRTC 所做出的努力。</p><h2>思考时间</h2><p>在获取音视频设备时，我们可以得到机子上（电脑/手机等）的所有音视频设备。每个设备都有 deviceID 字段，那么你可以想一想这个字段在真实场景中是如何通过 deviceID进行设备切换的呢？</p><p>欢迎在留言区与我分享你的想法，也欢迎你在留言区记录你的思考过程。感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给更多的朋友。</p><p><a href=\"https://github.com/avdance/webrtc_web/tree/master/02_device/webserver\">所做Demo的GitHub链接（有需要可以点这里）</a></p><p></p>","neighbors":{"left":{"article_title":"01 | 原来通过浏览器访问摄像头这么容易","id":107948},"right":{"article_title":"03 | 如何使用浏览器给自己拍照呢？","id":109065}},"comments":[{"had_liked":false,"id":118487,"user_name":"曙光","can_delete":false,"product_type":"c1","uid":1476450,"ip_address":"","ucode":"04D65BF7F19845","user_header":"https://static001.geekbang.org/account/avatar/00/16/87/62/f99b5b05.jpg","comment_is_top":false,"comment_ctime":1564374130,"is_pvip":false,"replies":[{"id":"43423","content":"显示器明明是输出设备，啥时候变成了输入设备哈？只能用 HTTPS...，不要在这方面浪费时间了，在国外买个云服务器（花不了几个钱的），这样可以省去域名备案的时间。能用钱解决的问题就不要用时间去解决，因为这些时间可以用来挣更多的钱哈","user_name":"作者回复","comment_id":118487,"uid":"1507837","ip_address":"","utype":1,"ctime":1564388772,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"23039210610","product_id":100031801,"comment_content":"1 我测试的结果没有videooutput(显示器不算么？)<br>2 default和communications 有啥区别？如何显示它们的id信息？<br>3 ()是lable,老师说需要HTTPS才能看到，有其他方法么？<br>谷歌浏览器，测试结果如下：<br>audioinput:(): id = default<br>audioinput:(): id = communications<br>audioinput:(): id = 101a8.....<br>videoinput:(): id = f9b4.....<br>audiooutput:(): id = default<br>audiooutput:(): id = communications<br>audiooutput:(): id = 71b3....","like_count":6,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460431,"discussion_content":"显示器明明是输出设备，啥时候变成了输入设备哈？只能用 HTTPS...，不要在这方面浪费时间了，在国外买个云服务器（花不了几个钱的），这样可以省去域名备案的时间。能用钱解决的问题就不要用时间去解决，因为这些时间可以用来挣更多的钱哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564388772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":243443,"user_name":"宇宙之王","can_delete":false,"product_type":"c1","uid":1981915,"ip_address":"","ucode":"5E6C28F8CCFF6D","user_header":"","comment_is_top":false,"comment_ctime":1598110114,"is_pvip":false,"replies":[{"id":"91438","content":"自已生成的证书不行，要用正式的证书！","user_name":"作者回复","comment_id":243443,"uid":"1507837","ip_address":"","utype":1,"ctime":1600529347,"user_name_real":"音视频专家-李超"}],"discussion_count":2,"race_medal":0,"score":"14483012002","product_id":100031801,"comment_content":"请问老师，我用的自己生成的证书https和阿里云的ECS主机（CentOS系统），用第一讲和第三讲，第四讲（后面还没试）的代码可以正常获取摄像头的图像，采集视频，并实现保存下载视频功能，但是这一讲的代码我获取label也是为空，是不是还有什么别的限制，最关键的是本地运行也获取不到，是什么原因呢？谢谢老师！","like_count":4,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504285,"discussion_content":"自已生成的证书不行，要用正式的证书！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600529347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981915,"avatar":"","nickname":"宇宙之王","note":"","ucode":"5E6C28F8CCFF6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307235,"discussion_content":"谢谢老师，学习阶段我先用自己生成的证书试玩一下，后面打算用阿里云正式证书了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600565067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":237151,"user_name":"在水一方","can_delete":false,"product_type":"c1","uid":1390701,"ip_address":"","ucode":"07E701E95BF91B","user_header":"https://static001.geekbang.org/account/avatar/00/15/38/6d/4efc1bea.jpg","comment_is_top":false,"comment_ctime":1595690812,"is_pvip":false,"replies":[{"id":"87919","content":"iOS用safari, android安装chrome","user_name":"作者回复","comment_id":237151,"uid":"1507837","ip_address":"","utype":1,"ctime":1596023694,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"10185625404","product_id":100031801,"comment_content":"移动端（安卓，iOS）有没有一种浏览器，能完美支持webrtc？","like_count":2,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502316,"discussion_content":"iOS用safari, android安装chrome","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596023694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114827,"user_name":"李跃爱学习","can_delete":false,"product_type":"c1","uid":1347792,"ip_address":"","ucode":"F25C038C86324A","user_header":"https://static001.geekbang.org/account/avatar/00/14/90/d0/48037ba6.jpg","comment_is_top":false,"comment_ctime":1563412916,"is_pvip":false,"replies":[{"id":"41932","content":"如果采样大小太小的话，你的声音的振幅又很大，这时就会对声音产生损失呀！","user_name":"作者回复","comment_id":114827,"uid":"1507837","ip_address":"","utype":1,"ctime":1563421686,"user_name_real":"garrylee"}],"discussion_count":4,"race_medal":0,"score":"10153347508","product_id":100031801,"comment_content":"老师音频采样率解释得很清楚，可是采样大小没有深入解释，能否补充一下，不同采样大小意味着什么差别？","like_count":2,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458831,"discussion_content":"如果采样大小太小的话，你的声音的振幅又很大，这时就会对声音产生损失呀！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563421686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1075033,"avatar":"https://static001.geekbang.org/account/avatar/00/10/67/59/017b5726.jpg","nickname":"猫切切切切切","note":"","ucode":"F350BA1B7FFDC4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352410,"discussion_content":"采样就是采集振幅信息，\n采样大小就是采样范围，\n采样范围就是采集振幅范围。\n\n如果\n实际要采样的振幅范围\n大于\n设备可采样的振幅范围（采样大小）\n\n那么\n就会失真（采集相对实际失真了）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614731421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145377,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7a/21/a33cc944.jpg","nickname":"熊出没","note":"","ucode":"6E39230CC87808","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2419,"discussion_content":"采样率好比一个人一秒说5个字，一秒采1次就会有损失 一秒采5次会有损失 一秒采10次也有可能有损失 但是采样率越大 损失的越少","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563587624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145377,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7a/21/a33cc944.jpg","nickname":"熊出没","note":"","ucode":"6E39230CC87808","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2418,"discussion_content":"采样大小可以这么理解，比如一个样本很大，却用了小容器去容纳，容纳不下就有损失了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563587483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114822,"user_name":"Keep-Moving","can_delete":false,"product_type":"c1","uid":1182631,"ip_address":"","ucode":"76F33C06E07A27","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/a7/6ef32187.jpg","comment_is_top":false,"comment_ctime":1563412253,"is_pvip":false,"replies":[{"id":"41934","content":"基本都是，服务端会有一点 C&#47;C++的","user_name":"作者回复","comment_id":114822,"uid":"1507837","ip_address":"","utype":1,"ctime":1563421710,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"10153346845","product_id":100031801,"comment_content":"想问一下，后续的实例代码也都是js语言的吗？","like_count":2,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458827,"discussion_content":"基本都是，服务端会有一点 C/C++的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563421710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1616471,"avatar":"https://static001.geekbang.org/account/avatar/00/18/aa/57/1997dd93.jpg","nickname":"抹染流年听风","note":"","ucode":"136C45201F6107","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2956,"discussion_content":"老师没有视频的讲解吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564062085,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114794,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1563409086,"is_pvip":true,"replies":[{"id":"41936","content":"举个例子，对于耳机，它即是音频输入设备又是音频输出设备，因此它们属于同一个 groupID,你可以自己做个实验验证一下哈。对于第二个问题不同的浏览器表现不一样，其中chrome与webrtc规范是最接近的，你可以用chrome实验一下，是可以区分出音频的输入与输出设置的。","user_name":"作者回复","comment_id":114794,"uid":"1507837","ip_address":"","utype":1,"ctime":1563421863,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":1,"score":"10153343678","product_id":100031801,"comment_content":"我这通过 navigator.mediaDevices.enumerateDevices() 获取到的设备列表想请教下老师：<br>1: 对于每个设备 还有个 groupId ，这个字段是干什么用的？ 每一组的设备还有特殊的含义吗？<br>2: 获取的设备分为 InputDeviceInfo 和 MediaDeviceInfo ，这里 InputDeviceInfo 是指输入设备信息，那么MediaDeviceInfo（下面的kind:都是 &quot;audiooutput&quot; 没有 videooutput）是指输出的设备信息吗？","like_count":2,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458816,"discussion_content":"举个例子，对于耳机，它即是音频输入设备又是音频输出设备，因此它们属于同一个 groupID,你可以自己做个实验验证一下哈。对于第二个问题不同的浏览器表现不一样，其中chrome与webrtc规范是最接近的，你可以用chrome实验一下，是可以区分出音频的输入与输出设置的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563421863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240451,"user_name":"Geek_a6a976","can_delete":false,"product_type":"c1","uid":2096912,"ip_address":"","ucode":"25B4A0ABF08293","user_header":"","comment_is_top":false,"comment_ctime":1596936527,"is_pvip":false,"replies":[{"id":"89677","content":"有的，ondevicechange。<br>例如：<br>navigator.mediaDevices.ondevicechange = function(event) {<br>  updateDeviceList();<br>}","user_name":"作者回复","comment_id":240451,"uid":"1507837","ip_address":"","utype":1,"ctime":1598018849,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"5891903823","product_id":100031801,"comment_content":"作业：<br>应该可以用上一节课讲的MediaStreamConstraints中的MediaTrackConstraints设置要读取的deviceId, groupId来选择要获取的设备的stream。<br>想问老师，设备掉线后，是否有类似onchange事件来异步通知","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503449,"discussion_content":"有的，ondevicechange。\n例如：\nnavigator.mediaDevices.ondevicechange = function(event) {\n  updateDeviceList();\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598018849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173711,"user_name":"chong-de.fang","can_delete":false,"product_type":"c1","uid":1112737,"ip_address":"","ucode":"324C46FB005A75","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/a1/2857f15d.jpg","comment_is_top":false,"comment_ctime":1579666471,"is_pvip":false,"replies":[{"id":"70166","content":"调用一下 getUserMedia方法就好了","user_name":"作者回复","comment_id":173711,"uid":"1507837","ip_address":"","utype":1,"ctime":1582430376,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5874633767","product_id":100031801,"comment_content":"请问在本地，用域名的方式可以获取到设备信息，但是label值为空，这是什么问题？","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482177,"discussion_content":"调用一下 getUserMedia方法就好了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582430376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151776,"user_name":"月光伴奏","can_delete":false,"product_type":"c1","uid":1651505,"ip_address":"","ucode":"F8CA499FEE0530","user_header":"https://static001.geekbang.org/account/avatar/00/19/33/31/8db0ff30.jpg","comment_is_top":false,"comment_ctime":1573789409,"is_pvip":false,"replies":[{"id":"59355","content":"本地是可以的，但真正的产品不会放在本地。另外，只测试本地有可能很多环节在真实环境是是打不通的。","user_name":"作者回复","comment_id":151776,"uid":"1507837","ip_address":"","utype":1,"ctime":1574502164,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5868756705","product_id":100031801,"comment_content":"我本地测试不用https也能拿到lable 哈哈","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474610,"discussion_content":"本地是可以的，但真正的产品不会放在本地。另外，只测试本地有可能很多环节在真实环境是是打不通的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574502164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115691,"user_name":"赵健","can_delete":false,"product_type":"c1","uid":1260246,"ip_address":"","ucode":"553E417EE92EFB","user_header":"https://static001.geekbang.org/account/avatar/00/13/3a/d6/485590bd.jpg","comment_is_top":false,"comment_ctime":1563699577,"is_pvip":false,"replies":[{"id":"42259","content":"要满足两个条件，一是使用https;二是调用getUserMedia ","user_name":"作者回复","comment_id":115691,"uid":"1507837","ip_address":"","utype":1,"ctime":1563706780,"user_name_real":"garrylee"}],"discussion_count":3,"race_medal":0,"score":"5858666873","product_id":100031801,"comment_content":"需要注意的是，出于安全原因，除非用户已被授予访问媒体设备的权限，否则 label 字段始终为空 --- 老师，您好，不太明白何为用户已被授予访问媒体设备的权限？比如，第一节课里面的电脑的摄像头已经被打开了，这个还不算有访问设备的权限吗？","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459233,"discussion_content":"要满足两个条件，一是使用https;二是调用getUserMedia ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563706780,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1607475,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/dQZH4oEsCUjunqCIs4ls8iaAFsgzc7lQVFtgUd6RicKt3DSpANXAQCsLfU5MmgcRwJl1L9kdr3H5L5QM1BqMxPlg/132","nickname":"随风的小猪","note":"","ucode":"F9C741891B0BAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206568,"discussion_content":"是不是在html文件里做https的配置","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584415474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1607475,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/dQZH4oEsCUjunqCIs4ls8iaAFsgzc7lQVFtgUd6RicKt3DSpANXAQCsLfU5MmgcRwJl1L9kdr3H5L5QM1BqMxPlg/132","nickname":"随风的小猪","note":"","ucode":"F9C741891B0BAA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206546,"discussion_content":"是将本地file访问改成https访问么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584413670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114868,"user_name":"恋着歌","can_delete":false,"product_type":"c1","uid":1001048,"ip_address":"","ucode":"CFDC00CB9965D9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/58/31205087.jpg","comment_is_top":false,"comment_ctime":1563420502,"is_pvip":false,"replies":[{"id":"41944","content":"你加上“默认 - ”它能真的变成默认吗哈？你可以自己亲自试一下","user_name":"作者回复","comment_id":114868,"uid":"1507837","ip_address":"","utype":1,"ctime":1563426430,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5858387798","product_id":100031801,"comment_content":"deviceID 切换，通过观察 enumerateDevices() 返回的数据，目的是要向 default 切换。对目标设备信息做一次拷贝，修改 deviceId 为 default，修改 label 加上前缀“默认 - ”。不知道老师的题目是不是这样解答？","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458853,"discussion_content":"你加上“默认 - ”它能真的变成默认吗哈？你可以自己亲自试一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563426430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328646,"user_name":"FECoding","can_delete":false,"product_type":"c1","uid":1253140,"ip_address":"","ucode":"A3E8397FDD20D6","user_header":"https://static001.geekbang.org/account/avatar/00/13/1f/14/57cb7926.jpg","comment_is_top":false,"comment_ctime":1640826956,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1640826956","product_id":100031801,"comment_content":"好像插拔设备，不会自动切换，我们自己实现的切换","like_count":0},{"had_liked":false,"id":316336,"user_name":"Digitalization","can_delete":false,"product_type":"c1","uid":1488654,"ip_address":"","ucode":"3596FAAF46D4D6","user_header":"https://static001.geekbang.org/account/avatar/00/16/b7/0e/739fd98a.jpg","comment_is_top":false,"comment_ctime":1634276559,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1634276559","product_id":100031801,"comment_content":"一个规避https证书好办法是，随便打开一个https的网页，打开chrome控制台，Elements里添加html, console里跑js","like_count":0,"discussions":[{"author":{"id":1187483,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1e/9b/397e8fa1.jpg","nickname":"Canon","note":"","ucode":"411FF465C3A3E5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574530,"discussion_content":"人才","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654128977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212572,"user_name":"loong","can_delete":false,"product_type":"c1","uid":1143797,"ip_address":"","ucode":"D5E6B2DE442D60","user_header":"https://static001.geekbang.org/account/avatar/00/11/73/f5/6f11f003.jpg","comment_is_top":false,"comment_ctime":1588152836,"is_pvip":false,"replies":[{"id":"79591","content":"因为你不是https 所以看不到","user_name":"作者回复","comment_id":212572,"uid":"1507837","ip_address":"","utype":1,"ctime":1588866010,"user_name_real":"音视频专家-李超"}],"discussion_count":1,"race_medal":0,"score":"1588152836","product_id":100031801,"comment_content":"老师好，deviceId为空是什么原因？ 有3个kind显示，也有groupId。看你这个才接触js，对这个代码运行和要搭建的环境还不熟悉。我是直接点开html文件在浏览器中打开运行的，是否这样就可以？不用管https什么的？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493549,"discussion_content":"因为你不是https 所以看不到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588866010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192367,"user_name":"leo","can_delete":false,"product_type":"c1","uid":1154091,"ip_address":"","ucode":"0E2D4D779D8DC9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erxJYxzce3mZpuZFJNyTAvCibzLUTYbZepaBPNd7ichZgkMeibkQLmNzeb63zda1iaKJ6aIewUTA517hQ/132","comment_is_top":false,"comment_ctime":1584847795,"is_pvip":false,"replies":[{"id":"73967","content":"有些移动端浏览器确实对 webrtc的支持不好。对于android端更是如些。如果是移动端我建议还是用 app的方式。","user_name":"作者回复","comment_id":192367,"uid":"1507837","ip_address":"","utype":1,"ctime":1585037371,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1584847795","product_id":100031801,"comment_content":"webrtc在移动web的兼容性如何解决呢","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488381,"discussion_content":"有些移动端浏览器确实对 webrtc的支持不好。对于android端更是如些。如果是移动端我建议还是用 app的方式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585037371,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188883,"user_name":"Geek_5a0689","can_delete":false,"product_type":"c1","uid":1911478,"ip_address":"","ucode":"E424A43AA72AE9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIQYc8seCHrRfJicqCWDfUap4jdHWnJ39ezlpvIY5sbwZP8ze9lFE572hzeNEY07nHWVjaR0QLjgyw/132","comment_is_top":false,"comment_ctime":1584430315,"is_pvip":false,"replies":[{"id":"73329","content":"看一下git 代码","user_name":"作者回复","comment_id":188883,"uid":"1507837","ip_address":"","utype":1,"ctime":1584705549,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"1584430315","product_id":100031801,"comment_content":"老师，咨询一下，我获取到的label都是空，我不晓得如何设置https，调用getusermedia是直接将第一讲的js代码复制到第二讲的开源代码中么？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487557,"discussion_content":"看一下git 代码","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584705549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1911478,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIQYc8seCHrRfJicqCWDfUap4jdHWnJ39ezlpvIY5sbwZP8ze9lFE572hzeNEY07nHWVjaR0QLjgyw/132","nickname":"Geek_5a0689","note":"","ucode":"E424A43AA72AE9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206743,"discussion_content":"老师大概什么时间会回复呀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584436645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":188790,"user_name":"随风的小猪","can_delete":false,"product_type":"c1","uid":1607475,"ip_address":"","ucode":"F9C741891B0BAA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/dQZH4oEsCUjunqCIs4ls8iaAFsgzc7lQVFtgUd6RicKt3DSpANXAQCsLfU5MmgcRwJl1L9kdr3H5L5QM1BqMxPlg/132","comment_is_top":false,"comment_ctime":1584415931,"is_pvip":false,"replies":[{"id":"73330","content":"在server.js中","user_name":"作者回复","comment_id":188790,"uid":"1507837","ip_address":"","utype":1,"ctime":1584705564,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1584415931","product_id":100031801,"comment_content":"老师，https访问是在html中配置的么？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":487527,"discussion_content":"在server.js中","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584705564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163919,"user_name":"子非鱼焉知鱼之乐","can_delete":false,"product_type":"c1","uid":1133314,"ip_address":"","ucode":"09D7F478CB016B","user_header":"https://static001.geekbang.org/account/avatar/00/11/4b/02/ee837c4b.jpg","comment_is_top":false,"comment_ctime":1576827978,"is_pvip":false,"replies":[{"id":"62480","content":"直接调用webrtc 的native 接口就可以。它与 web 接口类似，稍有不同！","user_name":"作者回复","comment_id":163919,"uid":"1507837","ip_address":"","utype":1,"ctime":1577024387,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1576827978","product_id":100031801,"comment_content":"老师 android ios是怎么实现音视频呢","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478580,"discussion_content":"直接调用webrtc 的native 接口就可以。它与 web 接口类似，稍有不同！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577024387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":153163,"user_name":"SherwinFeng","can_delete":false,"product_type":"c1","uid":1747728,"ip_address":"","ucode":"1754290DCF5CB7","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJoNVHqRL5iatEoMgfFAaGFZxD8ic6CicxKI9Facp4bzAkNMAfaduSENlPOafs6dOGawibhNv3V9lVowQ/132","comment_is_top":false,"comment_ctime":1574172166,"is_pvip":false,"replies":[{"id":"59346","content":"调用那个函数呢？","user_name":"作者回复","comment_id":153163,"uid":"1507837","ip_address":"","utype":1,"ctime":1574501201,"user_name_real":"garrylee"}],"discussion_count":4,"race_medal":0,"score":"1574172166","product_id":100031801,"comment_content":"小白的基本思路是这样的：<br>通过enumerateDevices（）遍历所有的输入输出设备列表，如果当前设备的id和想要访问的设备id一致，就通过某个函数使用它。","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475066,"discussion_content":"调用那个函数呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574501201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1747728,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJoNVHqRL5iatEoMgfFAaGFZxD8ic6CicxKI9Facp4bzAkNMAfaduSENlPOafs6dOGawibhNv3V9lVowQ/132","nickname":"SherwinFeng","note":"","ucode":"1754290DCF5CB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56669,"discussion_content":"是getUserMedia吗\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574507062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1747728,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJoNVHqRL5iatEoMgfFAaGFZxD8ic6CicxKI9Facp4bzAkNMAfaduSENlPOafs6dOGawibhNv3V9lVowQ/132","nickname":"SherwinFeng","note":"","ucode":"1754290DCF5CB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53516,"discussion_content":"但是对js不熟悉 怎么把代码实现出来就不懂了😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574173293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1747728,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJoNVHqRL5iatEoMgfFAaGFZxD8ic6CicxKI9Facp4bzAkNMAfaduSENlPOafs6dOGawibhNv3V9lVowQ/132","nickname":"SherwinFeng","note":"","ucode":"1754290DCF5CB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53514,"discussion_content":"调用的函数就是第一节课学的getUserMedia，然后通过MediaStreamConstraints参数设置需要使用设备的deviceID字段","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574173187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121249,"user_name":"style","can_delete":false,"product_type":"c1","uid":1235709,"ip_address":"","ucode":"ED683F58593EB8","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/fd/4cc7212e.jpg","comment_is_top":false,"comment_ctime":1565085435,"is_pvip":false,"replies":[{"id":"44704","content":"你要在你的音频设置管理里边看，耳机是外摄，还是内置扬声器。另外你有没有使用https?","user_name":"作者回复","comment_id":121249,"uid":"1507837","ip_address":"","utype":1,"ctime":1565187261,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"1565085435","product_id":100031801,"comment_content":"老师我打印了下devices信息，有两点不明白<br>kind=audioinput label= id=default<br>kind=audioinput label= id=communications<br>kind=audioinput label= id=afab9796f6f60aa5d0a7c6604619ccbf452e5abfbf33a7adf76839f480ae3a14<br>kind=audiooutput label= id=default<br>kind=audiooutput label= id=communications<br>kind=audiooutput label= id=8e2cdf7151acd5c488d56bb1b397dcf23063d4cdf7a3a39b3a9c723090073c6b<br> kind=audiooutput label= id=d1c85beda42b8586f603e24335eec7e430d88320a91a99c4eee3d2eecedd581c<br>1，我把电脑上的耳机，麦都拔下来了，但还是输入和输出设备<br>2，我也授权访问麦克风了，但是我打印的label始终为空","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461704,"discussion_content":"你要在你的音频设置管理里边看，耳机是外摄，还是内置扬声器。另外你有没有使用https?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565187261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1235709,"avatar":"https://static001.geekbang.org/account/avatar/00/12/da/fd/4cc7212e.jpg","nickname":"style","note":"","ucode":"ED683F58593EB8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4208,"discussion_content":"没有用https，我等会挂服务器上看下吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565227753,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116714,"user_name":"Sunsmile","can_delete":false,"product_type":"c1","uid":1325937,"ip_address":"","ucode":"44398E6D58FCDC","user_header":"https://static001.geekbang.org/account/avatar/00/14/3b/71/b7094a80.jpg","comment_is_top":false,"comment_ctime":1563894000,"is_pvip":false,"replies":[{"id":"42683","content":"可以，需要使用 AudioContext，你可以查一下相关信息","user_name":"作者回复","comment_id":116714,"uid":"1507837","ip_address":"","utype":1,"ctime":1563930565,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"1563894000","product_id":100031801,"comment_content":"老师，js可以实现音量柱吗？怎样获取音量柱数据的呢？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459655,"discussion_content":"可以，需要使用 AudioContext，你可以查一下相关信息","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563930565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1367429,"avatar":"https://static001.geekbang.org/account/avatar/00/14/dd/85/fcbb5850.jpg","nickname":"binger233","note":"","ucode":"E3800577541C79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2831,"discussion_content":"参考：https://mdn.github.io/voice-change-o-matic/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563960282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116683,"user_name":"小鸟淫太","can_delete":false,"product_type":"c1","uid":1247186,"ip_address":"","ucode":"AC44F552DDF93E","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/d2/d7a200d5.jpg","comment_is_top":false,"comment_ctime":1563890396,"is_pvip":false,"replies":[{"id":"42686","content":"是的, safari这块是有这个问题，目前各浏览器的实现上还有一些区别","user_name":"作者回复","comment_id":116683,"uid":"1507837","ip_address":"","utype":1,"ctime":1563930626,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1563890396","product_id":100031801,"comment_content":"我也是 mac 环境，我以为接入耳机后id也会发生变化。把label打出来就看到label变了。。<br>老师我还有个问题，Safari只有两个，分别是 内建麦克风 和 FaceTime 高清摄像头（内建）。没看到有audioOutput，是权限问题吗？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459639,"discussion_content":"是的, safari这块是有这个问题，目前各浏览器的实现上还有一些区别","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563930626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116609,"user_name":"小鸟淫太","can_delete":false,"product_type":"c1","uid":1247186,"ip_address":"","ucode":"AC44F552DDF93E","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/d2/d7a200d5.jpg","comment_is_top":false,"comment_ctime":1563880610,"is_pvip":false,"replies":[{"id":"42634","content":"有耳机呀，你用的什么设备测试的？我在 mac 环境下，chrome 浏览器没有问题。","user_name":"作者回复","comment_id":116609,"uid":"1507837","ip_address":"","utype":1,"ctime":1563888146,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1563880610","product_id":100031801,"comment_content":"老师好，我想问一下这个列表里的 audioOutput 有耳机吗？我接入耳机和拔掉耳机打印出来的设备数量没有变化。","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459609,"discussion_content":"有耳机呀，你用的什么设备测试的？我在 mac 环境下，chrome 浏览器没有问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563888146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116595,"user_name":"麦晓杰alwaysu","can_delete":false,"product_type":"c1","uid":1374052,"ip_address":"","ucode":"247457B8524270","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/64/7e39a739.jpg","comment_is_top":false,"comment_ctime":1563877060,"is_pvip":false,"replies":[{"id":"42626","content":"打卡！大卡！","user_name":"作者回复","comment_id":116595,"uid":"1507837","ip_address":"","utype":1,"ctime":1563877950,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1563877060","product_id":100031801,"comment_content":"学习打卡！！","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459605,"discussion_content":"打卡！大卡！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563877950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115440,"user_name":"熊出没","can_delete":false,"product_type":"c1","uid":1145377,"ip_address":"","ucode":"6E39230CC87808","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/21/a33cc944.jpg","comment_is_top":false,"comment_ctime":1563589447,"is_pvip":true,"replies":[{"id":"42245","content":"首先代码部分我会放到github上，下周一你就可以看到了。其次我想你是对如何发布写的H5页面不熟悉，这块我还会再写一篇简短的文章放出来。耐心等待！","user_name":"作者回复","comment_id":115440,"uid":"1507837","ip_address":"","utype":1,"ctime":1563664945,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1563589447","product_id":100031801,"comment_content":"怎么把这里面的代码用起来 JS还是太陌生了","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459109,"discussion_content":"首先代码部分我会放到github上，下周一你就可以看到了。其次我想你是对如何发布写的H5页面不熟悉，这块我还会再写一篇简短的文章放出来。耐心等待！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563664945,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115403,"user_name":"tommy_zhang","can_delete":false,"product_type":"c1","uid":1607132,"ip_address":"","ucode":"C995F39459467C","user_header":"","comment_is_top":false,"comment_ctime":1563578432,"is_pvip":false,"replies":[{"id":"42247","content":"从stream获取的 track后，调stop方面，可以去试一试。我想你应该可以自己解决这个问题哈！","user_name":"作者回复","comment_id":115403,"uid":"1507837","ip_address":"","utype":1,"ctime":1563665032,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1563578432","product_id":100031801,"comment_content":"怎么实现摄像头的关闭操作？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459091,"discussion_content":"从stream获取的 track后，调stop方面，可以去试一试。我想你应该可以自己解决这个问题哈！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563665032,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114920,"user_name":"恋着歌","can_delete":false,"product_type":"c1","uid":1001048,"ip_address":"","ucode":"CFDC00CB9965D9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/58/31205087.jpg","comment_is_top":false,"comment_ctime":1563433631,"is_pvip":false,"replies":[{"id":"41959","content":"为啥？如果你有多个输出设备切换不了？","user_name":"作者回复","comment_id":114920,"uid":"1507837","ip_address":"","utype":1,"ctime":1563448841,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1563433631","product_id":100031801,"comment_content":"在调用 getUserMedia 的时候，可以通过 MediaStreamConstraints 参数可以指定采集设备的deviceId。但是这样只能切换输入设备。","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458887,"discussion_content":"为啥？如果你有多个输出设备切换不了？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563448841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114902,"user_name":"君","can_delete":false,"product_type":"c1","uid":1607419,"ip_address":"","ucode":"F3051212585BF5","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/u9oss767Kxzbl3SVgibUzngqMiafndGzA43bgPTw8BRvTCGicAl5La5HfZJm9rTYQJBE65TkePiaVEtMDquUIaEOAg/132","comment_is_top":false,"comment_ctime":1563429821,"is_pvip":false,"replies":[{"id":"41954","content":"没有这种情况，一定是你自己写的逻辑有问题，再仔细找找原因！","user_name":"作者回复","comment_id":114902,"uid":"1507837","ip_address":"","utype":1,"ctime":1563448418,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1563429821","product_id":100031801,"comment_content":"移动端收到web端的视频显示不完全，居中截取，请问怎么把web端的视频全部显示出来","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458875,"discussion_content":"没有这种情况，一定是你自己写的逻辑有问题，再仔细找找原因！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563448418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114897,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1563427241,"is_pvip":true,"replies":[{"id":"41956","content":"MediaDeviceInfo 表是所有设备信息，InputDeviceInfo表式输入设备信息，MediaDeviceInfo 包含 InputDeviceInfo。","user_name":"作者回复","comment_id":114897,"uid":"1507837","ip_address":"","utype":1,"ctime":1563448658,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":1,"score":"1563427241","product_id":100031801,"comment_content":"老师 我这里就是用 Chrome 进行实验的， navigator.mediaDevices.enumerateDevices() 返回的设备信息，有时候是 MediaDeviceInfo，InputDeviceInfo  这两个有什么区别呢？","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458872,"discussion_content":"MediaDeviceInfo 表是所有设备信息，InputDeviceInfo表式输入设备信息，MediaDeviceInfo 包含 InputDeviceInfo。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563448658,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114871,"user_name":"Geek_miao","can_delete":false,"product_type":"c1","uid":1607347,"ip_address":"","ucode":"56C63F6245D0F7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eos0PEkRcfViczmTPgjJ7iaAziaxswFPaqmZTEiayhXrhicmsiaOk9DDcPro0MhK3tcQlROQibe6ncH7Oj4A/132","comment_is_top":false,"comment_ctime":1563420592,"is_pvip":false,"replies":[{"id":"41943","content":"原理已经说的很清楚了，至于排查的细节逻辑属于业务逻辑，这不是本专栏的重点，这块要你自己解决哈。实在抱歉！","user_name":"作者回复","comment_id":114871,"uid":"1507837","ip_address":"","utype":1,"ctime":1563426270,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1563420592","product_id":100031801,"comment_content":"排查设备这部分，能不能加上代码说明一下","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458855,"discussion_content":"原理已经说的很清楚了，至于排查的细节逻辑属于业务逻辑，这不是本专栏的重点，这块要你自己解决哈。实在抱歉！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563426270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":114765,"user_name":"LongXiaJun","can_delete":false,"product_type":"c1","uid":1154688,"ip_address":"","ucode":"B5246BF0DAF4F7","user_header":"https://static001.geekbang.org/account/avatar/00/11/9e/80/b87f8b49.jpg","comment_is_top":false,"comment_ctime":1563380576,"is_pvip":false,"replies":[{"id":"41906","content":"打卡，哈哈","user_name":"作者回复","comment_id":114765,"uid":"1507837","ip_address":"","utype":1,"ctime":1563406642,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1563380576","product_id":100031801,"comment_content":"打卡！","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"音视频专家-李超","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458807,"discussion_content":"打卡，哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563406642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}