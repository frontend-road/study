{"id":40153,"title":"开篇词 | 秒杀系统架构设计都有哪些关键点？","content":"<p>你好，我是许令波，花名“君山”。说起来我的职业生涯算是比较简单，2009年大学毕业后就进入了淘宝，一直工作了七年多。这七年多的时间里，我有幸看到了淘宝业务的快速增长，并且以开发者的身份参与其中。</p>\n<p>说实话，作为一名程序员，我的技术能力也在公司业务的快速增长过程中得到了历练，并积累了一些大流量高并发网站架构设计和优化的经验，尤其是针对“秒杀”这个场景。因为我确信，那个时候我们肯定是对系统做了足够多的极致优化，才能扛住当时洪峰般的流量请求。</p>\n<p>记得早期的时候，淘宝商品详情系统的PV还差不多是1亿的样子，但是到2016年差不多已经升至50亿了。尤其是2012年到2014年那个时间段，“秒杀”活动特别流行，用户的参与热情一浪高过一浪，系统要面对的流量也是成倍增长。</p>\n<p>而每一次的秒杀活动对技术团队来说都是一次考验。现在想起来，那个时候我们整个团队，无所畏惧，逐步迭代创新，然后解决一个个难题的过程，也是极具挑战性和成就感的事情。</p>\n<p>记得有一年，为了应对“双十一”，我们整个商品详情团队对系统做了很多优化，我们自认为已经是整个公司最牛的系统了，性能也已经是“业界之巅”。</p>\n<p>但是那年“双十一”的晚上，我们的系统还是遇到了瓶颈。当时老大就跑过来盯着我们，问我们什么时候能够恢复，我们整个团队都承担着巨大的心理压力。</p><!-- [[[read_end]]] -->\n<p>事后我们复盘宕机的原因，发现当时的秒杀流量远远超过了我们的预想，我们根本没想到大家的参与热情能有那么高。于是我们按照这个增长率去预估下一年的流量和服务器，粗算下来，我记得差不多要增加2000台服务器，简直不可思议。</p>\n<p>怎么可能真正增加这么多机器，所以这也就倒逼我们必须找出一些特殊的手段来优化系统。后面，经过一段时间的调研和分析，我们想到了把整个系统进行动静分离改造的解决方案。</p>\n<p>秒杀系统也差不多那个时候才从商品详情系统独立出来成为一个独立产品的。因为我见证了秒杀系统的建设过程，所以也有颇多感慨。秒杀系统的迭代又是一个升级打怪的过程，我们也都是遇到问题解决问题，逐一优化。</p>\n<p>那么，如何才能更好地理解秒杀系统呢？我觉得作为一个程序员，你首先需要从高维度出发，从整体上思考问题。在我看来，<strong>秒杀其实主要解决两个问题，一个是并发读，一个是并发写</strong>。并发读的核心优化理念是尽量减少用户到服务端来“读”数据，或者让他们读更少的数据；并发写的处理原则也一样，它要求我们在数据库层面独立出来一个库，做特殊的处理。另外，我们还要针对秒杀系统做一些保护，针对意料之外的情况设计兜底方案，以防止最坏的情况发生。</p>\n<p>而从一个架构师的角度来看，要想打造并维护一个超大流量并发读写、高性能、高可用的系统，在整个用户请求路径上从浏览器到服务端我们要遵循几个原则，就是要保证用户请求的数据尽量少、请求数尽量少、路径尽量短、依赖尽量少，并且不要有单点。这些关键点我会在后面的文章里重点讲解。</p>\n<p><strong>其实，秒杀的整体架构可以概括为“稳、准、快”几个关键字。</strong></p>\n<p>所谓“稳”，就是整个系统架构要满足高可用，流量符合预期时肯定要稳定，就是超出预期时也同样不能掉链子，你要保证秒杀活动顺利完成，即秒杀商品顺利地卖出去，这个是最基本的前提。</p>\n<p>然后就是“准”，就是秒杀10台iPhone，那就只能成交10台，多一台少一台都不行。一旦库存不对，那平台就要承担损失，所以“准”就是要求保证数据的一致性。</p>\n<p>最后再看“快”，“快”其实很好理解，它就是说系统的性能要足够高，否则你怎么支撑这么大的流量呢？不光是服务端要做极致的性能优化，而且在整个请求链路上都要做协同的优化，每个地方快一点，整个系统就完美了。</p>\n<p>所以从技术角度上看“稳、准、快”，就对应了我们架构上的高可用、一致性和高性能的要求，我们的专栏也将主要围绕这几个方面来展开，具体如下。</p>\n<ul>\n<li><strong>高性能。</strong> 秒杀涉及大量的并发读和并发写，因此支持高并发访问这点非常关键。本专栏将从设计数据的动静分离方案、热点的发现与隔离、请求的削峰与分层过滤、服务端的极致优化这4个方面重点介绍。</li>\n<li><strong>一致性。</strong> 秒杀中商品减库存的实现方式同样关键。可想而知，有限数量的商品在同一时刻被很多倍的请求同时来减库存，减库存又分为“拍下减库存”“付款减库存”以及预扣等几种，在大并发更新的过程中都要保证数据的准确性，其难度可想而知。因此，我将用一篇文章来专门讲解如何设计秒杀减库存方案。</li>\n<li><strong>高可用。</strong> 虽然我介绍了很多极致的优化思路，但现实中总难免出现一些我们考虑不到的情况，所以要保证系统的高可用和正确性，我们还要设计一个PlanB来兜底，以便在最坏情况发生时仍然能够从容应对。专栏的最后，我将带你思考可以从哪些环节来设计兜底方案。</li>\n</ul>\n<p>最后，很幸运能在极客时间遇到你，希望这堂课能让你彻底理解大并发、高性能、高可用秒杀系统的设计之道，并能够在思考解决类似问题时有更准确的思考和判断。</p>\n<p></p>\n","neighbors":{"left":[],"right":{"article_title":"01 | 设计秒杀系统时应该注意的5个架构原则","id":40726}},"comments":[{"had_liked":false,"id":27545,"user_name":"郭蕾","can_delete":false,"product_type":"c1","uid":1000473,"ip_address":"","ucode":"34F4C07D1C5FE8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","comment_is_top":true,"comment_ctime":1537920835,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"9.2233722016014991e+18","product_id":100017501,"comment_content":"一共7篇，10月1日正式更新，每天一篇。详细的介绍大家可以在专栏简介页面了解。","like_count":39},{"had_liked":false,"id":28174,"user_name":"杰","can_delete":false,"product_type":"c1","uid":1255474,"ip_address":"","ucode":"B5C0B19795757E","user_header":"https://static001.geekbang.org/account/avatar/00/13/28/32/c99aaa80.jpg","comment_is_top":false,"comment_ctime":1538015409,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"667257946289","product_id":100017501,"comment_content":"知识无价，你可能小赚，但我永远不亏。","like_count":156,"discussions":[{"author":{"id":1617369,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/FqWrN8aNrlXEfo2YeDeCRuWMZ57VzsNC0aibkEIdiaNBdUVPjlBXrg9F4Eb8uMFYckuSgmXQ49vT6SHoicAjeEGdA/132","nickname":"Geek_558387","note":"","ucode":"2EA857EBC365B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349169,"discussion_content":"这思路不错，要不真不想花钱","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612947963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28049,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1537982253,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"405264908077","product_id":100017501,"comment_content":"之前开发过一个秒杀系统：<br>1. 前端限流，5 秒内只提交一个请求，静态资源存放于 CDN。<br>2. 后端 redis 对 uid 限流，同样 5 秒内提交一个请求。<br>3. 请求保存队列，队列长度为库存 2 倍。为什么是 2 倍呢？拍脑门决定的，防止前面预订失败，后面补上。<br>4. 队列满后，后续请求直接返回秒杀结束。<br>5. 消费线程消费队列内容，下订单，直接操作 MySQL 扣库存。<br><br>可惜的是用户量不大，没能很好检验这个系统，因此不了解系统存在哪些问题。<br><br>当时也没想到支付超时后，剩余的库存如何处理，导致最后剩余商品没卖出去，囧…<br><br><br><br>","like_count":95,"discussions":[{"author":{"id":1499963,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e3/3b/3125ed1d.jpg","nickname":"目标","note":"","ucode":"D778F27DF9A7E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573016,"discussion_content":"你们自己做了压测么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653136164,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2344071,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c4/87/174fa848.jpg","nickname":"Lzh","note":"","ucode":"49E1E7028972DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348820,"discussion_content":"老哥可以的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612745792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310276,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fe/44/38165aef.jpg","nickname":"洋","note":"","ucode":"61A398D3C62F5B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":322216,"discussion_content":"可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604705862,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333094,"avatar":"https://static001.geekbang.org/account/avatar/00/14/57/66/e57bdb18.jpg","nickname":"liliumss","note":"","ucode":"A52AC5042F3115","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312085,"discussion_content":"很不错了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602580841,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1095316,"avatar":"https://static001.geekbang.org/account/avatar/00/10/b6/94/190de8f4.jpg","nickname":"五河士稻","note":"","ucode":"CB1809F3B739A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":137864,"discussion_content":"感谢分享，啊哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579195546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1133702,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4c/86/3be94807.jpg","nickname":"angel😇txy🤓","note":"","ucode":"C0AEE0D8BAF7ED","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6950,"discussion_content":"666 兄弟果然有实战经验啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567195639,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28523,"user_name":"chon","can_delete":false,"product_type":"c1","uid":1068925,"ip_address":"","ucode":"1C32170972F726","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/7d/dd852b04.jpg","comment_is_top":false,"comment_ctime":1538098795,"is_pvip":true,"replies":[{"id":"11705","content":"会有介绍的","user_name":"作者回复","comment_id":28523,"uid":"1253339","ip_address":"","utype":1,"ctime":1539498951,"user_name_real":"君山"}],"discussion_count":2,"race_medal":0,"score":"130387117675","product_id":100017501,"comment_content":"建议增加如何用啥样的工具发现某个地方存在瓶颈。很多人不知道如何定位，即使学了，也不知道如何发现，定位和量化自己项目中问题","like_count":31,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425291,"discussion_content":"会有介绍的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539498951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1219110,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9a/26/bfa935a3.jpg","nickname":"姜秀龙","note":"","ucode":"9D36C95CFF15DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211994,"discussion_content":"是的 找到瓶颈才能想办法解决","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584923573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27537,"user_name":"龙猫","can_delete":false,"product_type":"c1","uid":1112490,"ip_address":"","ucode":"FD726CC969EF9C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/aa/3e80212e.jpg","comment_is_top":false,"comment_ctime":1537920261,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"83142298885","product_id":100017501,"comment_content":"一顿兰州拉面的价钱，划算！！！！","like_count":20,"discussions":[{"author":{"id":1998835,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/7f/f3/010d9634.jpg","nickname":"Owen Zhang","note":"","ucode":"48D2063B87AD8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543026,"discussion_content":"+1 哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640934789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112490,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f9/aa/3e80212e.jpg","nickname":"龙猫","note":"","ucode":"FD726CC969EF9C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348094,"discussion_content":".....","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612425142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27486,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1537894244,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"57372469092","product_id":100017501,"comment_content":"向年轻人学习","like_count":13},{"had_liked":false,"id":34671,"user_name":"彭正聪","can_delete":false,"product_type":"c1","uid":1072708,"ip_address":"","ucode":"82E7D09927F47E","user_header":"https://static001.geekbang.org/account/avatar/00/10/5e/44/520d293a.jpg","comment_is_top":false,"comment_ctime":1540256641,"is_pvip":false,"replies":[{"id":"12627","content":"你说的问题其实也是并发问题，对秒杀来说，谁先减库存成功就算谁秒杀成功，假如有两个完全同时的同求减库存，在数据库层可能要数据库来区分谁先完成了😊","user_name":"作者回复","comment_id":34671,"uid":"1253339","ip_address":"","utype":1,"ctime":1540630026,"user_name_real":"君山"}],"discussion_count":2,"race_medal":0,"score":"48784896897","product_id":100017501,"comment_content":"问一个问题，存不存在2个请求完全同时的情况。这样先后顺序怎么区分?","like_count":10,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427293,"discussion_content":"你说的问题其实也是并发问题，对秒杀来说，谁先减库存成功就算谁秒杀成功，假如有两个完全同时的同求减库存，在数据库层可能要数据库来区分谁先完成了😊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540630026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1499963,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e3/3b/3125ed1d.jpg","nickname":"目标","note":"","ucode":"D778F27DF9A7E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573017,"discussion_content":"所以就是 乐观锁 更新库存，更新成功的抢到名额，另一个就抢失败了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653136258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27462,"user_name":"long.mr","can_delete":false,"product_type":"c1","uid":1071784,"ip_address":"","ucode":"F808C4E62BBCF1","user_header":"https://static001.geekbang.org/account/avatar/00/10/5a/a8/f25ec64c.jpg","comment_is_top":false,"comment_ctime":1537890691,"is_pvip":false,"replies":[{"id":"10042","content":"为啥要时间戳，谁先到谁先执行啊","user_name":"作者回复","comment_id":27462,"uid":"1253339","ip_address":"","utype":1,"ctime":1537962177,"user_name_real":"君山"}],"discussion_count":2,"race_medal":0,"score":"35897629059","product_id":100017501,"comment_content":"问一哈，秒杀系统，判断先后顺序的依据是请求到达的时间戳吗？ 会不会有一个服务器存在串行的请求的情况，这样的话会在一定程度上影响公平性吗？","like_count":8,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424919,"discussion_content":"为啥要时间戳，谁先到谁先执行啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537962177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1499963,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e3/3b/3125ed1d.jpg","nickname":"目标","note":"","ucode":"D778F27DF9A7E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573018,"discussion_content":"不要求绝对的公平。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653136320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27331,"user_name":"dragonwsh","can_delete":false,"product_type":"c1","uid":1253362,"ip_address":"","ucode":"F3D7CE347BB029","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DvhadoBC4I19kmicyCOA94IJNc2A1SUCf1YUFHBbgrZ0iapchOUkDPGr5dSR00XyetczO1b6eRz4HuV6KQia0kjsA/132","comment_is_top":false,"comment_ctime":1537873021,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35897611389","product_id":100017501,"comment_content":"看到是许神的视频果断买了，相信许神的质量。","like_count":8,"discussions":[{"author":{"id":1433535,"avatar":"https://static001.geekbang.org/account/avatar/00/15/df/bf/96b50d1e.jpg","nickname":"😚 46","note":"","ucode":"EED0EBBBF80A43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55384,"discussion_content":"啥视频","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574353129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28842,"user_name":"云学","can_delete":false,"product_type":"c1","uid":1027233,"ip_address":"","ucode":"366AE90BA06356","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg","comment_is_top":false,"comment_ctime":1538179343,"is_pvip":false,"replies":[{"id":"11707","content":"后面文章有介绍","user_name":"作者回复","comment_id":28842,"uid":"1253339","ip_address":"","utype":1,"ctime":1539499076,"user_name_real":"君山"}],"discussion_count":1,"race_medal":0,"score":"31602950415","product_id":100017501,"comment_content":"如何发现瓶颈点，怎么判断某个地方是否有优化的空间，有哪些推荐的工具，请作者分享一下","like_count":7,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425392,"discussion_content":"后面文章有介绍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539499076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27513,"user_name":"ds.Yang™️","can_delete":false,"product_type":"c1","uid":1140994,"ip_address":"","ucode":"2DE0192F2D23D0","user_header":"https://static001.geekbang.org/account/avatar/00/11/69/02/ff0d94f6.jpg","comment_is_top":false,"comment_ctime":1537917411,"is_pvip":false,"replies":[{"id":"10096","content":"谢谢支持，这个小专栏我们就是想交付一个具体的场景解决方案，希望能帮到你","user_name":"作者回复","comment_id":27513,"uid":"1000473","ip_address":"","utype":1,"ctime":1538004157,"user_name_real":"郭蕾"}],"discussion_count":1,"race_medal":0,"score":"27307721187","product_id":100017501,"comment_content":"相见恨晚，最近也在读许老师的web技术内幕，很不错","like_count":6,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424932,"discussion_content":"谢谢支持，这个小专栏我们就是想交付一个具体的场景解决方案，希望能帮到你","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538004157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27336,"user_name":"青梅煮酒","can_delete":false,"product_type":"c1","uid":1016591,"ip_address":"","ucode":"40B466AC361609","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/0f/b39a072d.jpg","comment_is_top":false,"comment_ctime":1537873932,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23012710412","product_id":100017501,"comment_content":"非常期待“君山”老师后续的课程","like_count":5},{"had_liked":false,"id":29023,"user_name":"智心悦","can_delete":false,"product_type":"c1","uid":1257976,"ip_address":"","ucode":"91F69E8189C6B9","user_header":"https://static001.geekbang.org/account/avatar/00/13/31/f8/3b88bf49.jpg","comment_is_top":false,"comment_ctime":1538227650,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18718096834","product_id":100017501,"comment_content":"作为不回家的菜鸟，给自己一个国庆学习的动力！<br>","like_count":4},{"had_liked":false,"id":27392,"user_name":"小柯基","can_delete":false,"product_type":"c1","uid":1173644,"ip_address":"","ucode":"6BD6F45AE5704F","user_header":"https://static001.geekbang.org/account/avatar/00/11/e8/8c/299bb7af.jpg","comment_is_top":false,"comment_ctime":1537882426,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18717751610","product_id":100017501,"comment_content":"跟着javaweb技术内幕进来的","like_count":4},{"had_liked":false,"id":27387,"user_name":"张斌","can_delete":false,"product_type":"c1","uid":1114994,"ip_address":"","ucode":"87ADFCA3BA1F9A","user_header":"https://static001.geekbang.org/account/avatar/00/11/03/72/938c4beb.jpg","comment_is_top":false,"comment_ctime":1537881884,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18717751068","product_id":100017501,"comment_content":"之前看过许先生的书，实战经历很丰富","like_count":4},{"had_liked":false,"id":262653,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1605794706,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"14490696594","product_id":100017501,"comment_content":"因为在参加极客大学架构师训练营的课程，第九周的内容里面讲到了秒杀系统，所以来这里学习一下。<br><br>秒杀系统要解决并发读和并发写两个问题，要达到稳、准、快的要求，这几个关键点总结的很好，期待之后的讲解。<br><br>其实这种 7 天的小课，形式挺好的，适合周末或者假期学习，学习下来应该也不累，后来似乎没有了。","like_count":3},{"had_liked":false,"id":28383,"user_name":"Geek_d6c376","can_delete":false,"product_type":"c1","uid":1125597,"ip_address":"","ucode":"5F754980AE5980","user_header":"https://static001.geekbang.org/account/avatar/00/11/2c/dd/c80d7276.jpg","comment_is_top":false,"comment_ctime":1538064801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14422966689","product_id":100017501,"comment_content":"有开源项目吗","like_count":3},{"had_liked":false,"id":27461,"user_name":"JackGe","can_delete":false,"product_type":"c1","uid":1063340,"ip_address":"","ucode":"1FB187BF8443CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/ac/92e6f652.jpg","comment_is_top":false,"comment_ctime":1537890543,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"14422792431","product_id":100017501,"comment_content":"支持令波😃","like_count":3},{"had_liked":false,"id":28958,"user_name":"大白菜","can_delete":false,"product_type":"c1","uid":1048303,"ip_address":"","ucode":"4769E37224E85F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/ef/252cd5c4.jpg","comment_is_top":false,"comment_ctime":1538207448,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10128142040","product_id":100017501,"comment_content":"感谢。作者加油，希望要是纯干货。最好写点自己经验和业界的方案。让我们这些付费的系统学。别弄得和免费的一样","like_count":2},{"had_liked":false,"id":28208,"user_name":"可可","can_delete":false,"product_type":"c1","uid":1215525,"ip_address":"","ucode":"BE715CC4756CCF","user_header":"https://static001.geekbang.org/account/avatar/00/12/8c/25/9c35480d.jpg","comment_is_top":false,"comment_ctime":1538022958,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10127957550","product_id":100017501,"comment_content":"之前做过秒杀系统，前端限流，入口限流，排队，把用户大并发改成队列的小并发，库存用redis的cas机制减少。可能用户量少，无法检验出瓶颈","like_count":2},{"had_liked":false,"id":28032,"user_name":"过河卒子","can_delete":false,"product_type":"c1","uid":1254668,"ip_address":"","ucode":"C19EA4DB247741","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/0c/d507fa18.jpg","comment_is_top":false,"comment_ctime":1537977916,"is_pvip":false,"replies":[{"id":"10092","content":"APP右上角有个有图标啊","user_name":"作者回复","user_name_real":"郭蕾","uid":"1000473","ctime":1538004044,"ip_address":"","comment_id":28032,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10127912508","product_id":100017501,"comment_content":"怎么没有看到具体课程介绍呀！","like_count":2,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425124,"discussion_content":"APP右上角有个有图标啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538004044,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27523,"user_name":"Exception","can_delete":false,"product_type":"c1","uid":1184197,"ip_address":"","ucode":"59D80C6C8E6F8C","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/c5/437c0a80.jpg","comment_is_top":false,"comment_ctime":1537918753,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10127853345","product_id":100017501,"comment_content":"之前买过许神的书籍，受益颇多，一看标题，直接秒杀","like_count":2},{"had_liked":false,"id":27353,"user_name":"亮仔","can_delete":false,"product_type":"c1","uid":1253416,"ip_address":"","ucode":"7EB5943F729221","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/28/14540c7c.jpg","comment_is_top":false,"comment_ctime":1537877025,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10127811617","product_id":100017501,"comment_content":"哈哈 😁 <br>  我以为 已经开课啦<br> 都已经迫不及待啦","like_count":2},{"had_liked":false,"id":149663,"user_name":"William","can_delete":false,"product_type":"c1","uid":1346215,"ip_address":"","ucode":"55F5D9DEE485B1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/a7/674c1864.jpg","comment_is_top":false,"comment_ctime":1573309393,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5868276689","product_id":100017501,"comment_content":"暂时工作没接触到高并发这类的情况，但是面试也会被问到所以来学习一下。<br> <br>总结#秒杀其实就是开两个问题 ：并发读，并发写。<br>   并发读： 减少直接读库<br>   并发写：层层设卡- 保db<br>打卡 第一天","like_count":1},{"had_liked":false,"id":112928,"user_name":"张浩","can_delete":false,"product_type":"c1","uid":1588393,"ip_address":"","ucode":"1A5A6BECBF70B6","user_header":"https://static001.geekbang.org/account/avatar/00/18/3c/a9/25e8b2f2.jpg","comment_is_top":false,"comment_ctime":1562849059,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857816355","product_id":100017501,"comment_content":"两年前买了您一本书，现在买一堂课。不亏！","like_count":1},{"had_liked":false,"id":31073,"user_name":"倪","can_delete":false,"product_type":"c1","uid":1033241,"ip_address":"","ucode":"4464C7F582C92C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/19/cc33dc52.jpg","comment_is_top":false,"comment_ctime":1539081929,"is_pvip":false,"replies":[{"id":"11672","content":"😄","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1539495503,"ip_address":"","comment_id":31073,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5834049225","product_id":100017501,"comment_content":"lua.脚本操作redis秒杀，后同步数据库","like_count":1,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426215,"discussion_content":"😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539495503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":30440,"user_name":"allen.huang","can_delete":false,"product_type":"c1","uid":1119789,"ip_address":"","ucode":"3D1F0996CE65C8","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/2d/2753369a.jpg","comment_is_top":false,"comment_ctime":1538866741,"is_pvip":false,"replies":[{"id":"11677","content":"时间可以根据实际情况来调整😊","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1539496025,"ip_address":"","comment_id":30440,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5833834037","product_id":100017501,"comment_content":"@null<br><br>5秒一个请求，写太长了吧，体验太差了。<br>我以前做的秒杀是静态资源用阿里云的cdn,用redis计数限流。库存也是用redis的hash结构来存储，进行库存的减操作。效果也不是很好，压力也在redis这边。","like_count":1,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426003,"discussion_content":"时间可以根据实际情况来调整😊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539496025,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29261,"user_name":"刘涛","can_delete":false,"product_type":"c1","uid":1218955,"ip_address":"","ucode":"D1706A8E26A7C0","user_header":"https://static001.geekbang.org/account/avatar/00/12/99/8b/883c9790.jpg","comment_is_top":false,"comment_ctime":1538312738,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5833280034","product_id":100017501,"comment_content":"会有代码吗，还是只有一些文字描述？","like_count":1},{"had_liked":false,"id":28942,"user_name":"此鱼不得水","can_delete":false,"product_type":"c1","uid":1257453,"ip_address":"","ucode":"95268E823FB4D2","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/ed/a87bb8fa.jpg","comment_is_top":false,"comment_ctime":1538203059,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5833170355","product_id":100017501,"comment_content":"第一次付费学习，还是相信君山老师的","like_count":1},{"had_liked":false,"id":27982,"user_name":"Alon","can_delete":false,"product_type":"c1","uid":1084267,"ip_address":"","ucode":"34069BD445BE95","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/6b/394177a8.jpg","comment_is_top":false,"comment_ctime":1537972864,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5832940160","product_id":100017501,"comment_content":"向年轻人学习！！","like_count":1},{"had_liked":false,"id":27971,"user_name":"罗","can_delete":false,"product_type":"c1","uid":1010326,"ip_address":"","ucode":"FDB4E441E4D741","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6a/96/92c85a12.jpg","comment_is_top":false,"comment_ctime":1537972469,"is_pvip":false,"replies":[{"id":"10093","content":"10月1日正式更新，内容还在最后迭代中，希望能帮到你","user_name":"作者回复","user_name_real":"郭蕾","uid":"1000473","ctime":1538004073,"ip_address":"","comment_id":27971,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5832939765","product_id":100017501,"comment_content":"居然不是开了 是开场白啊，还是点个赞吧！","like_count":1,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425102,"discussion_content":"10月1日正式更新，内容还在最后迭代中，希望能帮到你","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538004073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27948,"user_name":"追云的帆","can_delete":false,"product_type":"c1","uid":1253505,"ip_address":"","ucode":"BFA1BEEE457C00","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/81/75f3c11d.jpg","comment_is_top":false,"comment_ctime":1537969260,"is_pvip":false,"replies":[{"id":"10094","content":"谢谢支持","user_name":"作者回复","user_name_real":"郭蕾","uid":"1000473","ctime":1538004081,"ip_address":"","comment_id":27948,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5832936556","product_id":100017501,"comment_content":"君山 老师写的书和文章一定要好好看看","like_count":1,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425098,"discussion_content":"谢谢支持","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538004081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27380,"user_name":"后端进阶","can_delete":false,"product_type":"c1","uid":1125656,"ip_address":"","ucode":"480F48F5378307","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/18/918eaecf.jpg","comment_is_top":false,"comment_ctime":1537880609,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5832847905","product_id":100017501,"comment_content":"之前做了一个抢红包业务，也算是秒杀场景吧。","like_count":1,"discussions":[{"author":{"id":2055809,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/5e/81/82709d6e.jpg","nickname":"码小呆","note":"","ucode":"44532D6ABF9340","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586847,"discussion_content":"之前也做过一个抢红包的功能，可能我们的业务量比较少，直接就是用redis的队列实现，一旦获取redis队列中的数据为空就表示红包被抢光了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662538764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广东"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2344071,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c4/87/174fa848.jpg","nickname":"Lzh","note":"","ucode":"49E1E7028972DE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348826,"discussion_content":"可以的，感觉这个场景也算秒杀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612746673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27357,"user_name":"朱晓磊","can_delete":false,"product_type":"c1","uid":1112635,"ip_address":"","ucode":"D2691980D5EE92","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/3b/f129b12a.jpg","comment_is_top":false,"comment_ctime":1537877724,"is_pvip":false,"replies":[{"id":"10100","content":"很多公司面试都会问这个问题","user_name":"作者回复","user_name_real":"郭蕾","uid":"1000473","ctime":1538004664,"ip_address":"","comment_id":27357,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5832845020","product_id":100017501,"comment_content":"记得第一次实习面试的时候，小组讨论就是关于 秒杀的问题 ","like_count":1,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424890,"discussion_content":"很多公司面试都会问这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538004664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27340,"user_name":"Hidden","can_delete":false,"product_type":"c1","uid":1114462,"ip_address":"","ucode":"6323E5D32A3190","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/5e/95f7d928.jpg","comment_is_top":false,"comment_ctime":1537874354,"is_pvip":false,"replies":[{"id":"10101","content":"读完你可以写个学习总结","user_name":"作者回复","user_name_real":"郭蕾","uid":"1000473","ctime":1538004680,"ip_address":"","comment_id":27340,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5832841650","product_id":100017501,"comment_content":"面试官经常问 如何设计一个秒杀系统，不知从哪些角度 回答，一脸懵","like_count":1,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424885,"discussion_content":"读完你可以写个学习总结","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538004680,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319227,"user_name":"克里斯","can_delete":false,"product_type":"c1","uid":1181844,"ip_address":"","ucode":"00B755C10AC1C3","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/94/2c22bd4e.jpg","comment_is_top":false,"comment_ctime":1635685442,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1635685442","product_id":100017501,"comment_content":"建议先具体分析秒杀系统是什么?做什么?具体有什么问题?是数据库连接数有上限?还是内存线程数有上线?还是内存大小的问题?很多人没有做过秒杀系统,不知道秒杀系统具体面临什么问题,如果不了解有什么需求,就开始分析方案,这不是一个好的授之以渔的方式","like_count":0},{"had_liked":false,"id":198583,"user_name":"鸡蛋石头","can_delete":false,"product_type":"c1","uid":1229450,"ip_address":"","ucode":"61801769E485C8","user_header":"https://static001.geekbang.org/account/avatar/00/12/c2/8a/aed13671.jpg","comment_is_top":false,"comment_ctime":1585457883,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585457883","product_id":100017501,"comment_content":"读写分离","like_count":0},{"had_liked":false,"id":197957,"user_name":"大鹏展翅","can_delete":false,"product_type":"c1","uid":1308449,"ip_address":"","ucode":"244C4648E64E66","user_header":"https://static001.geekbang.org/account/avatar/00/13/f7/21/fbfc06c5.jpg","comment_is_top":false,"comment_ctime":1585405263,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585405263","product_id":100017501,"comment_content":"学习秒杀系统","like_count":0},{"had_liked":false,"id":192071,"user_name":"Mango","can_delete":false,"product_type":"c1","uid":1734886,"ip_address":"","ucode":"EC2D20BD322E22","user_header":"","comment_is_top":false,"comment_ctime":1584836782,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584836782","product_id":100017501,"comment_content":"高并发，高可用现在几乎是大型软件系统的必需要求了","like_count":0},{"had_liked":false,"id":180515,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1582300902,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582300902","product_id":100017501,"comment_content":"循序渐进：秒杀系统的迭代又是一个升级打怪的过程，我们也都是遇到问题解决问题，逐一优化<br><br><br>认清问题本质：秒杀其实主要解决两个问题，一个是并发读，一个是并发写<br><br><br>技术角度拆解：上看“稳、准、快”，就对应了我们架构上的高可用、一致性和高性能的要求","like_count":0},{"had_liked":false,"id":176584,"user_name":"slark","can_delete":false,"product_type":"c1","uid":1143574,"ip_address":"","ucode":"7E8DE962AA23A7","user_header":"https://static001.geekbang.org/account/avatar/00/11/73/16/595b0342.jpg","comment_is_top":false,"comment_ctime":1581091982,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581091982","product_id":100017501,"comment_content":"并发读写，高性能，高可用","like_count":0},{"had_liked":false,"id":139226,"user_name":"亚东","can_delete":false,"product_type":"c1","uid":1026101,"ip_address":"","ucode":"8B7C8080B8516D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a8/35/85033228.jpg","comment_is_top":false,"comment_ctime":1570588893,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1570588893","product_id":100017501,"comment_content":"似乎可以用秒杀系统的设计思想用于量化交易的高频交易。","like_count":0},{"had_liked":false,"id":133954,"user_name":"亚东","can_delete":false,"product_type":"c1","uid":1026101,"ip_address":"","ucode":"8B7C8080B8516D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a8/35/85033228.jpg","comment_is_top":false,"comment_ctime":1568705554,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1568705554","product_id":100017501,"comment_content":"我在思考可以用秒杀的技术来做量化中的高频交易么？","like_count":0},{"had_liked":false,"id":105525,"user_name":"moTzxx","can_delete":false,"product_type":"c1","uid":1516150,"ip_address":"","ucode":"0E278EFB6D1984","user_header":"https://static001.geekbang.org/account/avatar/00/17/22/76/a37533f8.jpg","comment_is_top":false,"comment_ctime":1561021476,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561021476","product_id":100017501,"comment_content":"以前自己做过，但是流量太少，又缺乏扎实的技术支持，特地前来充电！支持支持，学习学习... ","like_count":0},{"had_liked":false,"id":93871,"user_name":"雪飞鸿","can_delete":false,"product_type":"c1","uid":1012325,"ip_address":"","ucode":"65D7B030828809","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/65/68bd8177.jpg","comment_is_top":false,"comment_ctime":1557646300,"is_pvip":true,"replies":[{"id":"34282","content":"其实我想表达的意思是，数据在这个节点上需要被转发，相当于增加一个中转站，socket连接当然可以被复用","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1558245491,"ip_address":"","comment_id":93871,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1557646300","product_id":100017501,"comment_content":"每个节点都会产生一个socket连接，怎样复用这些连接呢？","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449804,"discussion_content":"其实我想表达的意思是，数据在这个节点上需要被转发，相当于增加一个中转站，socket连接当然可以被复用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558245491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74397,"user_name":"Geek__sunchi","can_delete":false,"product_type":"c1","uid":1452691,"ip_address":"","ucode":"D3C6C506243482","user_header":"","comment_is_top":false,"comment_ctime":1552215398,"is_pvip":false,"replies":[{"id":"30096","content":"不是我的声音😂","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1554532985,"ip_address":"","comment_id":74397,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552215398","product_id":100017501,"comment_content":"看到老师的名字，立马下单了。之前看过老师的Java Web技术内幕，当时就一个感受，老师真的很厉害，讲的很清楚透彻。还有，没想到老师的声音也很好听。","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442558,"discussion_content":"不是我的声音😂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554532985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67159,"user_name":"金葫芦","can_delete":false,"product_type":"c1","uid":1111109,"ip_address":"","ucode":"74620E768AF4CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/f4/45/f9a0cbbf.jpg","comment_is_top":false,"comment_ctime":1550105815,"is_pvip":false,"replies":[{"id":"26116","content":"当然可以了，啥区别？不知道你是问哪方面","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1551524418,"ip_address":"","comment_id":67159,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550105815","product_id":100017501,"comment_content":"老师：PHP可以设计秒杀系统么？和java的区别在哪里？","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439086,"discussion_content":"当然可以了，啥区别？不知道你是问哪方面","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551524418,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43485,"user_name":"Jun","can_delete":false,"product_type":"c1","uid":1029313,"ip_address":"","ucode":"4A904C5C43474A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b4/c1/73df153f.jpg","comment_is_top":false,"comment_ctime":1543232706,"is_pvip":false,"replies":[{"id":"16251","content":"问题可以再具体一点😊","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1543724133,"ip_address":"","comment_id":43485,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1543232706","product_id":100017501,"comment_content":"想要支持10W，100Wqps，这套方案集群数量要多少？","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430398,"discussion_content":"问题可以再具体一点😊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543724133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":41382,"user_name":"火腿","can_delete":false,"product_type":"c1","uid":1308116,"ip_address":"","ucode":"40F17DBC18F5D5","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/d4/5a0a2f8d.jpg","comment_is_top":false,"comment_ctime":1542771439,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542771439","product_id":100017501,"comment_content":"有好的秒杀开源项目推荐吗？","like_count":0},{"had_liked":false,"id":37434,"user_name":"落叶飞逝的恋","can_delete":false,"product_type":"c1","uid":1046429,"ip_address":"","ucode":"F9A95DB28BCF1E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/9d/be04b331.jpg","comment_is_top":false,"comment_ctime":1541584611,"is_pvip":false,"replies":[{"id":"14461","content":"然后呢😊","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1542529149,"ip_address":"","comment_id":37434,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1541584611","product_id":100017501,"comment_content":"文章总结：设计秒杀系统需要解决两个问题：如何并发读？如何并发写？","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428338,"discussion_content":"然后呢😊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542529149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37140,"user_name":"新人注册","can_delete":false,"product_type":"c1","uid":1113249,"ip_address":"","ucode":"2B1AD2ADF5D3AE","user_header":"https://static001.geekbang.org/account/avatar/00/10/fc/a1/a47a8ebf.jpg","comment_is_top":false,"comment_ctime":1541466398,"is_pvip":false,"replies":[{"id":"14463","content":"为啥😄","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1542529281,"ip_address":"","comment_id":37140,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1541466398","product_id":100017501,"comment_content":"把maven实战作者看成君山了。。。哈哈哈哈哈哈","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428194,"discussion_content":"为啥😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542529281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32120,"user_name":"wxyjuly","can_delete":false,"product_type":"c1","uid":1026495,"ip_address":"","ucode":"694F0988768E74","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/bf/973d716c.jpg","comment_is_top":false,"comment_ctime":1539421819,"is_pvip":false,"replies":[{"id":"11657","content":"哪里变化啦？😉","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1539489570,"ip_address":"","comment_id":32120,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1539421819","product_id":100017501,"comment_content":"君山变化好大啊，感觉和以前判若两人....","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426642,"discussion_content":"哪里变化啦？😉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539489570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29869,"user_name":"陈涛","can_delete":false,"product_type":"c1","uid":1088211,"ip_address":"","ucode":"EECB4701FF03F5","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/d3/7b28cdfb.jpg","comment_is_top":false,"comment_ctime":1538574160,"is_pvip":false,"replies":[{"id":"11691","content":"😉","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1539497219,"ip_address":"","comment_id":29869,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1538574160","product_id":100017501,"comment_content":"果断买，支持","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425749,"discussion_content":"😉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539497219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29265,"user_name":"Anonymous","can_delete":false,"product_type":"c1","uid":1124512,"ip_address":"","ucode":"8198EBD27A2308","user_header":"https://static001.geekbang.org/account/avatar/00/11/28/a0/02687960.jpg","comment_is_top":false,"comment_ctime":1538315032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538315032","product_id":100017501,"comment_content":"会有具体的实现代码吗？希望有一些大概的伪代码吧","like_count":0},{"had_liked":false,"id":29257,"user_name":"L","can_delete":false,"product_type":"c1","uid":1237556,"ip_address":"","ucode":"0BDC32D02DB267","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/34/0c2c1200.jpg","comment_is_top":false,"comment_ctime":1538310004,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538310004","product_id":100017501,"comment_content":"一碗重庆小面成本，血赚！","like_count":0},{"had_liked":false,"id":29060,"user_name":"后端沉思录","can_delete":false,"product_type":"c1","uid":1124707,"ip_address":"","ucode":"BCBF67382E0A89","user_header":"https://static001.geekbang.org/account/avatar/00/11/29/63/8c3bca92.jpg","comment_is_top":false,"comment_ctime":1538241107,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538241107","product_id":100017501,"comment_content":"支持许神!","like_count":0},{"had_liked":false,"id":29051,"user_name":"balancer","can_delete":false,"product_type":"c1","uid":1145758,"ip_address":"","ucode":"A865FAFF2FE1FA","user_header":"https://static001.geekbang.org/account/avatar/00/11/7b/9e/37d69ff0.jpg","comment_is_top":false,"comment_ctime":1538236241,"is_pvip":false,"replies":[{"id":"10516","content":"有关于技术选型的内容","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1538310120,"ip_address":"","comment_id":29051,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1538236241","product_id":100017501,"comment_content":"老师多讲点，秒杀设计里面的技术选型，将透彻些；","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425477,"discussion_content":"有关于技术选型的内容","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538310120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28693,"user_name":"李明成","can_delete":false,"product_type":"c1","uid":1256488,"ip_address":"","ucode":"E44922559132EB","user_header":"https://static001.geekbang.org/account/avatar/00/13/2c/28/bff8f0c4.jpg","comment_is_top":false,"comment_ctime":1538128054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538128054","product_id":100017501,"comment_content":"期待期待，充实的10.1","like_count":0},{"had_liked":false,"id":28481,"user_name":"加多","can_delete":false,"product_type":"c1","uid":1101824,"ip_address":"","ucode":"B2192A2D58C444","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/00/9d05af66.jpg","comment_is_top":false,"comment_ctime":1538096307,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538096307","product_id":100017501,"comment_content":"支持","like_count":0},{"had_liked":false,"id":28270,"user_name":"clancytom","can_delete":false,"product_type":"c1","uid":1128682,"ip_address":"","ucode":"11A97BB7014D83","user_header":"https://static001.geekbang.org/account/avatar/00/11/38/ea/f450f7fb.jpg","comment_is_top":false,"comment_ctime":1538037067,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538037067","product_id":100017501,"comment_content":"坐等更新","like_count":0},{"had_liked":false,"id":28206,"user_name":"James","can_delete":false,"product_type":"c1","uid":1246122,"ip_address":"","ucode":"D65E37DF19A845","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/aa/1429ee49.jpg","comment_is_top":false,"comment_ctime":1538020821,"is_pvip":false,"replies":[{"id":"11704","content":"也可以放redis","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1539498929,"ip_address":"","comment_id":28206,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1538020821","product_id":100017501,"comment_content":"秒杀的库存是放redis吗？","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425178,"discussion_content":"也可以放redis","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539498929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28175,"user_name":"看不到de颜色","can_delete":false,"product_type":"c1","uid":1162714,"ip_address":"","ucode":"88348CCAE81931","user_header":"https://static001.geekbang.org/account/avatar/00/11/bd/da/3d76ea74.jpg","comment_is_top":false,"comment_ctime":1538015510,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538015510","product_id":100017501,"comment_content":"总算等到秒杀系列的课程~","like_count":0},{"had_liked":false,"id":28152,"user_name":"南北少卿","can_delete":false,"product_type":"c1","uid":1018958,"ip_address":"","ucode":"DFCC59F2BBD8CE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/4e/b81969fa.jpg","comment_is_top":false,"comment_ctime":1538012623,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538012623","product_id":100017501,"comment_content":"学习!支持!","like_count":0},{"had_liked":false,"id":28110,"user_name":"无谓生活","can_delete":false,"product_type":"c1","uid":1186711,"ip_address":"","ucode":"0CE98476E35263","user_header":"https://static001.geekbang.org/account/avatar/00/12/1b/97/1e92b476.jpg","comment_is_top":false,"comment_ctime":1538009537,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538009537","product_id":100017501,"comment_content":"期待ing","like_count":0},{"had_liked":false,"id":28091,"user_name":"J","can_delete":false,"product_type":"c1","uid":1107681,"ip_address":"","ucode":"5196AC0BAEE457","user_header":"https://static001.geekbang.org/account/avatar/00/10/e6/e1/f44cdfaf.jpg","comment_is_top":false,"comment_ctime":1538007823,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1538007823","product_id":100017501,"comment_content":"期待后续文章，，，","like_count":0},{"had_liked":false,"id":28026,"user_name":"mike","can_delete":false,"product_type":"c1","uid":1109306,"ip_address":"","ucode":"FF8EC7347CAC29","user_header":"https://static001.geekbang.org/account/avatar/00/10/ed/3a/e61ba233.jpg","comment_is_top":false,"comment_ctime":1537976877,"is_pvip":false,"replies":[{"id":"10102","content":"主要介绍的是实现思路，思路是通用的","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1538006621,"ip_address":"","comment_id":28026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537976877","product_id":100017501,"comment_content":"其他需要也通用吗，类似php？","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425121,"discussion_content":"主要介绍的是实现思路，思路是通用的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538006621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27991,"user_name":"trymorewang","can_delete":false,"product_type":"c1","uid":1005713,"ip_address":"","ucode":"5804857F5B8B2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/91/3a2822f0.jpg","comment_is_top":false,"comment_ctime":1537973595,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537973595","product_id":100017501,"comment_content":"快更快更  等不及了😌","like_count":0},{"had_liked":false,"id":27941,"user_name":"Mr.xi","can_delete":false,"product_type":"c1","uid":1185267,"ip_address":"","ucode":"2C122670BBF2AA","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/f3/dbbdad25.jpg","comment_is_top":false,"comment_ctime":1537968612,"is_pvip":false,"replies":[{"id":"10095","content":"嗯，我这个思路基本是高并发类系统都会用到的优化方法","user_name":"作者回复","user_name_real":"郭蕾","uid":"1000473","ctime":1538004109,"ip_address":"","comment_id":27941,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537968612","product_id":100017501,"comment_content":"以前写过一个抢购的，但是太low了，这次学习学习","like_count":0,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425095,"discussion_content":"嗯，我这个思路基本是高并发类系统都会用到的优化方法","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538004109,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27936,"user_name":"🏹Mr.Lee","can_delete":false,"product_type":"c1","uid":1254146,"ip_address":"","ucode":"7FBC4690269885","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/02/4971ecd9.jpg","comment_is_top":false,"comment_ctime":1537967999,"is_pvip":false,"replies":[{"id":"10066","content":"播音员老师的声音很赞","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1537971506,"ip_address":"","comment_id":27936,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537967999","product_id":100017501,"comment_content":"第一章：声音很好听。","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425091,"discussion_content":"播音员老师的声音很赞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537971506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27929,"user_name":"狂奔的野马","can_delete":false,"product_type":"c1","uid":1255049,"ip_address":"","ucode":"5709630290B137","user_header":"https://static001.geekbang.org/account/avatar/00/13/26/89/a7ba337d.jpg","comment_is_top":false,"comment_ctime":1537967148,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537967148","product_id":100017501,"comment_content":"敬请期待……","like_count":0},{"had_liked":false,"id":27754,"user_name":"Geek_41d472","can_delete":false,"product_type":"c1","uid":1247965,"ip_address":"","ucode":"DEC2B6329460CF","user_header":"https://static001.geekbang.org/account/avatar/00/13/0a/dd/88fa7b52.jpg","comment_is_top":false,"comment_ctime":1537936330,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537936330","product_id":100017501,"comment_content":"非常期待！","like_count":0},{"had_liked":false,"id":27508,"user_name":"emilymeng","can_delete":false,"product_type":"c1","uid":1164285,"ip_address":"","ucode":"CB5155F4D9BC0C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c3/fd/f4663263.jpg","comment_is_top":false,"comment_ctime":1537916279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537916279","product_id":100017501,"comment_content":"期待","like_count":0},{"had_liked":false,"id":27490,"user_name":"XIANFENG SOONG","can_delete":false,"product_type":"c1","uid":1254043,"ip_address":"","ucode":"20A35D5218E929","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/9b/ef08cfe0.jpg","comment_is_top":false,"comment_ctime":1537895179,"is_pvip":false,"replies":[{"id":"10097","content":"问题导向是最好的学习方式","user_name":"作者回复","user_name_real":"郭蕾","uid":"1000473","ctime":1538004603,"ip_address":"","comment_id":27490,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537895179","product_id":100017501,"comment_content":"最近正打算从秒杀开始学习性能优化","like_count":0,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424923,"discussion_content":"问题导向是最好的学习方式","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538004603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27480,"user_name":"有匪君子","can_delete":false,"product_type":"c1","uid":1204061,"ip_address":"","ucode":"72B91AFC96E285","user_header":"https://static001.geekbang.org/account/avatar/00/12/5f/5d/63010e32.jpg","comment_is_top":false,"comment_ctime":1537893049,"is_pvip":false,"replies":[{"id":"10041","content":"可以说是所有技术系统追求的目标😄","user_name":"作者回复","user_name_real":"君山","uid":"1253339","ctime":1537962062,"ip_address":"","comment_id":27480,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537893049","product_id":100017501,"comment_content":"高性能，高并发，高可用。。这不全都是redis的特性吗？😂","like_count":0,"discussions":[{"author":{"id":1253339,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1f/db/d7d863ed.jpg","nickname":"君山","note":"","ucode":"F8ACCB6FBFAFCD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424922,"discussion_content":"可以说是所有技术系统追求的目标😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1537962062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27434,"user_name":"老裴","can_delete":false,"product_type":"c1","uid":1253872,"ip_address":"","ucode":"18932DC556A719","user_header":"https://static001.geekbang.org/account/avatar/00/13/21/f0/51c493cc.jpg","comment_is_top":false,"comment_ctime":1537886657,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537886657","product_id":100017501,"comment_content":"期待(๑˙ー˙๑)","like_count":0},{"had_liked":false,"id":27365,"user_name":"瑞","can_delete":false,"product_type":"c1","uid":1008021,"ip_address":"","ucode":"7502E51E4FF1F2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/95/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1537878830,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537878830","product_id":100017501,"comment_content":"买过徐哥的JAVA  web技术内幕，值得投资","like_count":0},{"had_liked":false,"id":27362,"user_name":"okJohn","can_delete":false,"product_type":"c1","uid":1071413,"ip_address":"","ucode":"0E0A0CCF0EABE5","user_header":"https://static001.geekbang.org/account/avatar/00/10/59/35/b967e113.jpg","comment_is_top":false,"comment_ctime":1537878540,"is_pvip":false,"replies":[{"id":"10099","content":"互相交流","user_name":"作者回复","user_name_real":"郭蕾","uid":"1000473","ctime":1538004650,"ip_address":"","comment_id":27362,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1537878540","product_id":100017501,"comment_content":"期待许神","like_count":0,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":424891,"discussion_content":"互相交流","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1538004650,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":27360,"user_name":"Doraemon","can_delete":false,"product_type":"c1","uid":1237404,"ip_address":"","ucode":"AD4F30662A0606","user_header":"https://static001.geekbang.org/account/avatar/00/12/e1/9c/7dfde983.jpg","comment_is_top":false,"comment_ctime":1537878248,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537878248","product_id":100017501,"comment_content":"期待","like_count":0},{"had_liked":false,"id":27359,"user_name":"Mac Kwan","can_delete":false,"product_type":"c1","uid":1001958,"ip_address":"","ucode":"FC80EBC9CD37A8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/e6/4f00fe55.jpg","comment_is_top":false,"comment_ctime":1537878117,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1537878117","product_id":100017501,"comment_content":"秒购","like_count":0}]}