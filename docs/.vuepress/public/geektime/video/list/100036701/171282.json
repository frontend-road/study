{"id":171282,"title":"42 | è·Ÿè¸ªè¯Šæ–­ï¼šè®©åº”ç”¨å†…å­˜ä¸â€œæ³„éœ²â€ï¼Ÿ","content":"<p><strong>è¯¾ä»¶å’ŒDemoåœ°å€</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":156366,"user_name":"Standly","can_delete":false,"product_type":"c3","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1574862522,"is_pvip":false,"replies":[{"id":60555,"content":"å—¯ï¼Œä½ æ€»ç»“çš„æŒºå…¨é¢çš„ï¼Œå…¶å®è¿™å—å¾ˆé¥¶äººï¼Œåƒä½ è¿™æ ·åˆ†å—çœ‹æŒºå¥½ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"å‚…å¥","uid":1638649,"ctime":1575324779,"ip_address":"","comment_id":156366,"utype":1}],"discussion_count":12,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"çœ‹äº†æºç é‡æ–°ç†äº†ä¸‹æ€è·¯ï¼š\n1. åˆ›å»ºByteBufæ—¶è°ƒç”¨äº†track0(obj)æ–¹æ³•ï¼Œä¼ å…¥çš„objå°±æ˜¯åˆ›å»ºçš„ByteBufå¯¹è±¡ã€‚\n2. track0(obj)æ–¹æ³•å†…åšäº†2ä»¶äº‹\n   a. åˆ›å»ºä¸€ä¸ªå¼±å¼•ç”¨å¯¹è±¡ï¼Œç»‘å®šä¸Šé¢ä¼ å…¥çš„ByteBufå¯¹è±¡å’Œä¸€ä¸ªå…¨å±€çš„å¼±å¼•ç”¨é˜Ÿåˆ—refQueueã€‚\n   b. æŠŠè¿™ä¸ªå¼±å¼•ç”¨å¯¹è±¡åŠ å…¥åˆ°å¦ä¸€ä¸ªå…¨å±€é›†åˆallLeaksé‡Œé¢ã€‚\n3. ByteBufå¯¹è±¡ç”¨å®Œäº†ï¼Œæ­£å¸¸æƒ…å†µä¼šè°ƒç”¨release()æ–¹æ³•å›æ”¶å †å¤–å†…å­˜ï¼ŒåŒæ—¶release()æ–¹æ³•ä¸­è°ƒç”¨äº†å¼±å¼•ç”¨å¯¹è±¡DefaultResourceLeakçš„close()æ–¹æ³•ï¼Œä»allLeaksé›†åˆé‡Œé¢æŠŠè¿™ä¸ªå¼±å¼•ç”¨å¯¹è±¡ç§»é™¤ã€‚å¦‚æœå¼€å‘è€…å¿˜è®°è°ƒç”¨release()æ–¹æ³•ï¼Œåˆ™allLeaksé›†åˆé‡Œè¿˜ä¼šå­˜åœ¨è¿™ä¸ªå¼±å¼•ç”¨å¯¹è±¡ã€‚\n4. ä¸€æ®µæ—¶é—´åï¼ŒByteBufå¯¹è±¡è¢«GCå›æ”¶ï¼Œæ­¤æ—¶ä¼šè§¦å‘ä¸€ä¸ªæ“ä½œï¼šByteBufå¯¹è±¡æ‰€ç»‘å®šçš„å¼±å¼•ç”¨å¯¹è±¡è¢«åŠ å…¥åˆ°refQueueä¸­ã€‚\n5.ä¸‹ä¸€æ¬¡åˆ›å»ºByteBufæ—¶åˆè°ƒç”¨äº†track0(obj)æ–¹æ³•ï¼ŒæŠŠrefQueueå’ŒallLeaksè¿™ä¿©é›†åˆä¸€å¯¹æ¯”ï¼Œæ—¢å­˜åœ¨äºrefQueueï¼ˆè¯´æ˜ByteBufç”¨å®Œäº†ä¸”å·²ç»è¢«GCå›æ”¶ï¼‰ï¼Œåˆå­˜åœ¨äºallLeaksï¼ˆè¯´æ˜æ²¡è°ƒç”¨releaseé‡Šæ”¾å†…å­˜ï¼‰ï¼Œè¡¨æ˜å­˜åœ¨å†…å­˜æ³„æ¼ã€‚\n","like_count":26,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476080,"discussion_content":"å—¯ï¼Œä½ æ€»ç»“çš„æŒºå…¨é¢çš„ï¼Œå…¶å®è¿™å—å¾ˆé¥¶äººï¼Œåƒä½ è¿™æ ·åˆ†å—çœ‹æŒºå¥½ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575324779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1786752,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/43/80/b1ae32cd.jpg","nickname":"Kennethã€‚ğŸŒ","note":"","ucode":"299ADF236395CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594159,"discussion_content":"åœ¨ç¬¬ä¸€æ­¥å¯ä»¥æåŠä¸‹è¿”å›ByteBuf å®é™…ä¸Šæ˜¯SimpleLeakAwareByteBufï¼Œ ä¸ç„¶å¿½ç•¥äº†åŒ…è£…ç±»ï¼Œæ‰¾ä¸åˆ°å®é™…releaseå…¥å£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668839236,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250327,"avatar":"https://static001.geekbang.org/account/avatar/00/13/14/17/8763dced.jpg","nickname":"å¾®å¾®ä¸€ç¬‘","note":"","ucode":"CFA7ABE81D0B99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384474,"discussion_content":"æ¯”ä½œè€…è®²çš„æ¸…æ¥šï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626608024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274049,"avatar":"https://static001.geekbang.org/account/avatar/00/13/70/c1/eb005452.jpg","nickname":"bigbaldy","note":"","ucode":"F5192F24F96806","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296950,"discussion_content":"ç›´æ¥åœ¨poll refQueueæ—¶é‡Šæ”¾æ‰å †å¤–å†…å­˜ä¸å°±å¯ä»¥äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596712357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1108924,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/bc/6ccac4bb.jpg","nickname":"æ­¦æ–‡æ–‡æ­¦","note":"","ucode":"5288366646A15B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262455,"discussion_content":"javaè‡ªåŠ¨é‡Šæ”¾å†…å­˜ï¼ŒæŠŠå¼•ç”¨ç½®nullä¸å°±ä¼šè¢«å›æ”¶äº†å—ï¼ŸåŒ…æ‹¬å †å¤–å†…å­˜ä¹Ÿä¸€æ ·å•Šï¼Œä¸ºä½•è¿˜è¦è°ƒç”¨releaseå‘¢ï¼Ÿè¯·æŒ‡æ•™ä¸‹å‘—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589100705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1181055,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","nickname":"Standly","note":"","ucode":"805CC5784D3F76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108924,"avatar":"https://static001.geekbang.org/account/avatar/00/10/eb/bc/6ccac4bb.jpg","nickname":"æ­¦æ–‡æ–‡æ­¦","note":"","ucode":"5288366646A15B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":262980,"discussion_content":"å †å¤–ä¸ä¼šè‡ªåŠ¨å›æ”¶ï¼Œgcåªå›æ”¶å †å†…å­˜å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589159610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":262455,"ip_address":"","group_id":0},"score":262980,"extra":""}]},{"author":{"id":1101615,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","nickname":"æé‘«ç£Š","note":"","ucode":"D06517CFCEEE00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":188015,"discussion_content":"å†…å­˜æ³„æ¼ä¸æ˜¯æŒ‡çš„æœ‰å¼ºå¼•ç”¨æŒ‡å‘å†…å­˜ï¼Œå¯¼è‡´å†…å­˜æ— æ³•è¢« GCï¼ŒByteBuf å¯¹è±¡çš„å†…å­˜æ—¢ç„¶å·²ç»è¢« GC äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¯´å‘ç”Ÿäº†å†…å­˜æ³„æ¼å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582788264,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1181055,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","nickname":"Standly","note":"","ucode":"805CC5784D3F76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1101615,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","nickname":"æé‘«ç£Š","note":"","ucode":"D06517CFCEEE00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":223959,"discussion_content":"ä¸æ˜¯bytebufå¯¹è±¡æœ¬èº«ï¼Œæ˜¯bytebufå…³è”çš„ç›´æ¥å†…å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586264133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":188015,"ip_address":"","group_id":0},"score":223959,"extra":""}]},{"author":{"id":1101615,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","nickname":"æé‘«ç£Š","note":"","ucode":"D06517CFCEEE00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":188010,"discussion_content":"å¼±å¼•ç”¨å¯¹è±¡åŠ å…¥åˆ° refQueue ä¸­ï¼Œè¯´æ˜ ByteBuf å¯¹è±¡è¢« GC äº†å‘€ï¼Œè¢« GC äº†ä¸å°±æ„å‘³ç€å†…å­˜é‡Šæ”¾äº†å—ï¼Ÿå†…å­˜é‡Šæ”¾äº†ä¸ºä»€ä¹ˆè¿˜è¯´å†…å­˜æ³„æ¼äº†å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582787933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1214499,"avatar":"https://static001.geekbang.org/account/avatar/00/12/88/23/a0966b4d.jpg","nickname":"Tim Zhang","note":"","ucode":"4956AC5FE45EE1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1101615,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","nickname":"æé‘«ç£Š","note":"","ucode":"D06517CFCEEE00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":202103,"discussion_content":"åŒæ ·ç–‘æƒ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583858009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":188010,"ip_address":"","group_id":0},"score":202103,"extra":""},{"author":{"id":1274049,"avatar":"https://static001.geekbang.org/account/avatar/00/13/70/c1/eb005452.jpg","nickname":"bigbaldy","note":"","ucode":"F5192F24F96806","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1101615,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","nickname":"æé‘«ç£Š","note":"","ucode":"D06517CFCEEE00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296951,"discussion_content":"åªæ˜¯ByteBufçš„å †å†…å†…å­˜é‡Šæ”¾äº†ï¼Œå †å¤–å¹¶æ²¡æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596712397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":188010,"ip_address":"","group_id":0},"score":296951,"extra":""},{"author":{"id":1155616,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a2/20/7549ff2b.jpg","nickname":"flying eagle","note":"","ucode":"1020359D893C04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1101615,"avatar":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","nickname":"æé‘«ç£Š","note":"","ucode":"D06517CFCEEE00","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549257,"discussion_content":"åŒæ ·ç–‘æƒ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643788492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":188010,"ip_address":"","group_id":0},"score":549257,"extra":""}]}]},{"had_liked":false,"id":157120,"user_name":"zpzeng","can_delete":false,"product_type":"c3","uid":1697579,"ip_address":"","ucode":"BC53D95766FE7C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epOLt1slWbKAtNR9yjAfvrM73hlOQpe2Zzptah7jN3relYAhDudicALnysGfAPL0RjVdzhS7Y2Kbmg/132","comment_is_top":false,"comment_ctime":1575037140,"is_pvip":false,"replies":[{"id":62164,"content":"è¿™é‡Œä½ æŠ“ä½å‡ ä¸ªå…³é”®ç‚¹ï¼š\n1 GCçš„æ—¶å€™ï¼Œå †å†…å¼•ç”¨ä¸å¯è¾¾äº†ï¼Œæ‰€ä»¥æ‰è¢«å›æ”¶äº†ï¼Œæ‰€ä»¥é”™å¤±äº†ä¸»åŠ¨é‡Šæ”¾çš„æœºä¼šï¼›\n2 å¼±å¼•ç”¨å¯¹è±¡çš„å›æ”¶å°±å’Œæ™®é€šå¯¹è±¡ä¸€æ ·ï¼Œæ‰€ä»¥å¼€å§‹åŠ åˆ°liståï¼Œå‡è®¾æ²¡æœ‰é‡Šæ”¾ï¼Œä¼šåœ¨listé‡Œé¢ï¼Œæ‰€ä»¥æœ‰äººæŒ‡å‘å®ƒï¼Œæ‰€ä»¥å®ƒä¸ä¼šè¢«å›æ”¶æ‰ã€‚æ‰€ä»¥åé¢refQueueæ‰èƒ½æ‹¿å‡ºå¯¹è±¡çœ‹çœ‹åœ¨ä¸åœ¨listé‡Œé¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1576743921,"ip_address":"","comment_id":157120,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆï¼Œé’ˆå¯¹è¿™ä¸ªæ£€æµ‹æœ‰å‡ ä¸ªé—®é¢˜æƒ³ä¸æ˜ç™½ï¼Œå¼±å¼•ç”¨å¯¹è±¡æŒ‡å‘çš„æ˜¯è°ï¼Œæ˜¯å †å¤–å†…å­˜ï¼Œè¿˜æ˜¯æŒæœ‰å †å¤–å†…å­˜çš„å †å†…å¯¹è±¡ï¼ŸGCçš„æ—¶å€™ï¼Œå¼±å¼•ç”¨å¯¹è±¡ä¸æ˜¯åº”è¯¥è¢«å›æ”¶æ‰å—ï¼Œé‚£ä¹ˆå¼±å¼•ç”¨é˜Ÿåˆ— allLeaké‡Œè¿˜æœ‰å¯¹è±¡èƒ½å’ŒrefQueueåšå¯¹æ¯”å—ï¼Ÿå †å¤–å†…å­˜çš„é‡Šæ”¾æ˜¯ä¸ªä»€ä¹ˆæ¦‚å¿µï¼Œæ˜¯æ²¡æœ‰è¢«å †å†…å¯¹è±¡æŒæœ‰ï¼Œè¿˜æ˜¯æœ‰ä¸ªä½ç½®å­˜å‚¨å†…å­˜å—çš„å¯åˆ†é…çŠ¶æ€ï¼Ÿ\næˆ‘èƒ½å‡è®¾çš„ä¸€ä¸ªç›¸å¯¹åˆç†çš„è§£é‡Šæ˜¯ï¼šå¼±å¼•ç”¨æŒ‡å‘çš„æ˜¯å †å†…å¯¹è±¡ï¼ŒGCçš„æ—¶å€™å †å†…å¯¹è±¡ä¸å¼•ç”¨å †å¤–å†…å­˜ï¼Œä½†æ²¡æœ‰æ˜¾å¼çš„é‡Šæ”¾ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡è¢«å›æ”¶äº†ï¼Œç„¶åè¿™ä¸ªå¯¹è±¡çš„å¼±å¼•ç”¨è¢«è®°å½•åˆ°refQueueä¸­ï¼Œç„¶åæŸä¸ªæ—¶é—´å‡ºå‘refQueue å’ŒallLeakçš„å¯¹æ¯”ï¼Œå‘ç°æœ‰å †å¤–å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾ã€‚ä½†æ˜¯è¿™æ ·å°±æœ‰â€œCçš„æ—¶å€™ï¼Œå¼±å¼•ç”¨å¯¹è±¡ä¸æ˜¯åº”è¯¥è¢«å›æ”¶æ‰å—ï¼Œé‚£ä¹ˆå¼±å¼•ç”¨é˜Ÿåˆ— allLeaké‡Œè¿˜æœ‰å¯¹è±¡èƒ½å’ŒrefQueueåšå¯¹æ¯”å—ï¼Ÿâ€ çš„é—®é¢˜ã€‚\néº»çƒ¦è€å¸ˆè§£ç­”ä¸€ä¸‹","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476333,"discussion_content":"è¿™é‡Œä½ æŠ“ä½å‡ ä¸ªå…³é”®ç‚¹ï¼š\n1 GCçš„æ—¶å€™ï¼Œå †å†…å¼•ç”¨ä¸å¯è¾¾äº†ï¼Œæ‰€ä»¥æ‰è¢«å›æ”¶äº†ï¼Œæ‰€ä»¥é”™å¤±äº†ä¸»åŠ¨é‡Šæ”¾çš„æœºä¼šï¼›\n2 å¼±å¼•ç”¨å¯¹è±¡çš„å›æ”¶å°±å’Œæ™®é€šå¯¹è±¡ä¸€æ ·ï¼Œæ‰€ä»¥å¼€å§‹åŠ åˆ°liståï¼Œå‡è®¾æ²¡æœ‰é‡Šæ”¾ï¼Œä¼šåœ¨listé‡Œé¢ï¼Œæ‰€ä»¥æœ‰äººæŒ‡å‘å®ƒï¼Œæ‰€ä»¥å®ƒä¸ä¼šè¢«å›æ”¶æ‰ã€‚æ‰€ä»¥åé¢refQueueæ‰èƒ½æ‹¿å‡ºå¯¹è±¡çœ‹çœ‹åœ¨ä¸åœ¨listé‡Œé¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576743921,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156888,"user_name":"é±¼å‘åŒ—æ¸¸","can_delete":false,"product_type":"c3","uid":1439908,"ip_address":"","ucode":"580EC7DCE57E9A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/IPdZZXuHVMibwfZWmm7NiawzeEFGsaRoWjhuN99iaoj5amcRkiaOePo6rH1KJ3jictmNlic4OibkF4I20vOGfwDqcBxfA/132","comment_is_top":false,"comment_ctime":1574992228,"is_pvip":false,"replies":[{"id":61373,"content":"è°¢è°¢æé†’ï¼Œæœ€æ—©æ˜¯linked list.ç°åœ¨æ˜¯set.ä¸çŸ¥é“ä»¥åå˜æˆä»€ä¹ˆï¼Œä¸åŒç‰ˆæœ¬éƒ½ä¸ä¸€æ ·éƒ½ï¼Œä»¥åä¹Ÿä¸çŸ¥é“å˜æˆä»€ä¹ˆï¼Œä¸è¿‡å¤§ä½“æ€è·¯éƒ½æ˜¯ä¸€æ ·çš„:åˆ¤æ–­é›†åˆé‡Œæœ‰æ²¡æœ‰è¿™ä¸ªå¯¹è±¡æ¥åˆ¤æ–­gcåçš„å¯¹è±¡å¼•ç”¨è®¡æ•°æœ‰æ²¡æœ‰åˆ°0ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"stroller","uid":1638649,"ctime":1576091597,"ip_address":"","comment_id":156888,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"allleaksä¸ºäº†åšå¿«é€ŸæŸ¥æ‰¾é‚£ä¸ªåº”è¯¥æ˜¯ä¸ªsetä¸€ç±»çš„å§ ä½†æ˜¯å¤§å®¶éƒ½å«ä»–é“¾è¡¨","like_count":0,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"å‚…å¥","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476263,"discussion_content":"è°¢è°¢æé†’ï¼Œæœ€æ—©æ˜¯linked list.ç°åœ¨æ˜¯set.ä¸çŸ¥é“ä»¥åå˜æˆä»€ä¹ˆï¼Œä¸åŒç‰ˆæœ¬éƒ½ä¸ä¸€æ ·éƒ½ï¼Œä»¥åä¹Ÿä¸çŸ¥é“å˜æˆä»€ä¹ˆï¼Œä¸è¿‡å¤§ä½“æ€è·¯éƒ½æ˜¯ä¸€æ ·çš„:åˆ¤æ–­é›†åˆé‡Œæœ‰æ²¡æœ‰è¿™ä¸ªå¯¹è±¡æ¥åˆ¤æ–­gcåçš„å¯¹è±¡å¼•ç”¨è®¡æ•°æœ‰æ²¡æœ‰åˆ°0ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576091597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182432,"user_name":"æé‘«ç£Š","can_delete":false,"product_type":"c3","uid":1101615,"ip_address":"","ucode":"D06517CFCEEE00","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","comment_is_top":false,"comment_ctime":1582787592,"is_pvip":false,"replies":null,"discussion_count":6,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"buffer.release() å’Œ GC æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿä¸éƒ½æ˜¯å†…å­˜è¢«é‡Šæ”¾äº†ï¼Ÿå¼±å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡è¢« GC æ‰äº†ï¼Œç©ºé—´ä¸å°±è¢«é‡Šæ”¾äº†ï¼Œç„¶åå¼±å¼•ç”¨è¿›å…¥ ReferenceQueueï¼Œå†…å­˜ä¸æ˜¯è¢«é‡Šæ”¾æ‰äº†å—ï¼Ÿæ€ä¹ˆè¿˜è¯´æ˜¯å†…å­˜æ³„æ¼äº†å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1793475,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5d/c3/69019d24.jpg","nickname":"æ±Ÿä¸œ","note":"","ucode":"391A62BC7039B3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542270,"discussion_content":"æ„Ÿè§‰æ˜¯å’Œnettyå†…éƒ¨æ± åŒ–å†…å­˜ç®¡ç†æ–¹å¼æœ‰å…³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640696835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1200971,"avatar":"https://static001.geekbang.org/account/avatar/00/12/53/4b/28991f30.jpg","nickname":"Alpha ğŸ‘€","note":"","ucode":"3C0BAD36550718","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337535,"discussion_content":"æˆ‘ç†è§£è™½ç„¶æ˜¯GCå›æ”¶äº†å†…å­˜ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å› ä¸ºç¨‹åºä¸»åŠ¨releaseé‡Šæ”¾çš„ï¼ŒGCå¾ˆæœ‰å¯èƒ½å°±æ˜¯æˆ‘ä»¬åªç”³è¯·ç©ºé—´ä¸ä¸»åŠ¨é‡Šæ”¾ï¼Œå†…å­˜æ³„æ¼æ‰é€ æˆçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608965026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1212750,"avatar":"https://static001.geekbang.org/account/avatar/00/12/81/4e/d71092f4.jpg","nickname":"å¤ç›®","note":"","ucode":"67C075A01CF4D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":273250,"discussion_content":"å¼±å¼•ç”¨å¯¹è±¡æ˜¯åªè¦å‘ç”ŸGCå°±ä¼šè¢«å›æ”¶ã€‚ä½†æ˜¯å®é™…ä¸Šä½¿ç”¨çš„ByteBufçš„å¼•ç”¨(å¼ºå¼•ç”¨)åªè¦å­˜åœ¨å†…å­˜ç©ºé—´å°±ä¸ä¼šè¢«å›æ”¶ï¼Œrelease()ä¼šé‡Šæ”¾å†…å­˜åŒæ—¶å°†å¼±åº”ç”¨ä»é›†åˆç§»é™¤ï¼Œè¿™æ ·çš„è¯åªè¦GCåå‘ç°ReferenceQueueä¸­å¼±å¼•ç”¨ä¸å­˜åœ¨äºé›†åˆä¸­å³è¯´æ˜è°ƒç”¨äº†release()æ–¹æ³•ï¼Œé‡Šæ”¾äº†å†…å­˜ã€‚åä¹‹å¦‚æœå­˜åœ¨äºé›†åˆä¸­åˆ™è¯´æ˜æ²¡æœ‰è°ƒç”¨release()é‡Šæ”¾å†…å­˜ï¼Œé‚£ä¹ˆåˆ™ä¼šå‘ç”Ÿå†…å­˜æ³„éœ²ã€‚ä¸çŸ¥é“æˆ‘è¿™æ ·è®²ä½ ç†è§£å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590421309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1066928,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/b0/a9b77a1e.jpg","nickname":"å†¬é£å‘å·¦å¹","note":"","ucode":"376C45C5134F93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1212750,"avatar":"https://static001.geekbang.org/account/avatar/00/12/81/4e/d71092f4.jpg","nickname":"å¤ç›®","note":"","ucode":"67C075A01CF4D2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538018,"discussion_content":"éƒ½å·²ç»gcäº†ï¼Œèµ„æºéƒ½å·²ç»é‡Šæ”¾äº†ï¼Œä¸ºå•¥è¿˜è¦å…³å¿ƒé‚£ä¸ªé›†åˆé‡Œé¢æœ‰æ²¡æœ‰å¼•ç”¨å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639300935,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":273250,"ip_address":"","group_id":0},"score":538018,"extra":""},{"author":{"id":1786752,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/43/80/b1ae32cd.jpg","nickname":"Kennethã€‚ğŸŒ","note":"","ucode":"299ADF236395CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1066928,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/b0/a9b77a1e.jpg","nickname":"å†¬é£å‘å·¦å¹","note":"","ucode":"376C45C5134F93","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":594160,"discussion_content":"å¦‚æœä¸äº†è§£å®ƒbytebuf é‡Šæ”¾é€»è¾‘ï¼Œä»£ç æ¢ä¸ºPool åŒ–å®ç°åœ¨ç”Ÿäº§å°±ä¼šå‡ºç°é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1668839369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":538018,"ip_address":"ä¸Šæµ·","group_id":0},"score":594160,"extra":""}]},{"author":{"id":1883035,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/bb/9b/d649f756.jpg","nickname":"æœˆå¤œæ«","note":"","ucode":"A153D482576782","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200270,"discussion_content":"åŒé—®ï¼è¯·è€å¸ˆå›ç­”ä¸€ä¸‹å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583673355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178245,"user_name":"é»„æµ·å³°","can_delete":false,"product_type":"c3","uid":1275357,"ip_address":"","ucode":"E9340719BC96B2","user_header":"https://static001.geekbang.org/account/avatar/00/13/75/dd/9ead6e69.jpg","comment_is_top":false,"comment_ctime":1581641311,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"å…ˆé—®é—®ByteBufçš„å¼•ç”¨è®¡æ•°åœ¨å“ªé‡Œä»€ä¹ˆæ—¶å€™åŠ å‡ä¸€","like_count":1},{"had_liked":false,"id":178190,"user_name":"suke","can_delete":false,"product_type":"c3","uid":1007753,"ip_address":"","ucode":"C0287C31A4F45B","user_header":"","comment_is_top":false,"comment_ctime":1581604284,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜æƒ³é—®ä¸€ä¸‹,nettyå‚æ•°æŒ‡å®šä½¿ç”¨æ± åŒ–å†…å­˜ä¹Ÿå°±æ˜¯å †å†…å†…å­˜ä»¥å,å³ä½¿ctx.alloc().buffer() ç”³è¯·äº†å†…å­˜ä»¥å,æ²¡æœ‰é‡Šæ”¾,è¿™ä¸ªå†…å­˜æ— è®ºæ€ä¹ˆæ ·,éƒ½åœ¨å†…å­˜æ± é‡Œ,æ°¸è¿œä¸å¯èƒ½è¢«gcå§?å¦‚æœä¸ä¼šè¢«gc,å²‚ä¸æ˜¯æ°¸è¿œæ£€æµ‹ä¸åˆ°å†…å­˜æ³„æ¼?","like_count":1},{"had_liked":false,"id":328381,"user_name":"æ±Ÿä¸œ","can_delete":false,"product_type":"c3","uid":1793475,"ip_address":"","ucode":"391A62BC7039B3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/5d/c3/69019d24.jpg","comment_is_top":false,"comment_ctime":1640696713,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"æ£€æµ‹å†…å­˜æ˜¯å¦æ³„éœ²æ˜¯å’Œnettyæ± åŒ–ç®¡ç†å†…å­˜æœ‰å…³å—","like_count":0},{"had_liked":false,"id":295963,"user_name":"Geek_5aec96","can_delete":false,"product_type":"c3","uid":2591874,"ip_address":"","ucode":"45345D53041E42","user_header":"","comment_is_top":false,"comment_ctime":1622684078,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆ ä½ å¥½ å¯ä»¥è®²è§£ä¸€ä¸‹å®ƒè¿™ä¸ªå†…å­˜åˆ†é…ç®—æ³•ä¹ˆ","like_count":0},{"had_liked":false,"id":280357,"user_name":"Geek_1cc6d1","can_delete":false,"product_type":"c3","uid":1850248,"ip_address":"","ucode":"3E083616DD0742","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erZCyXaP2gbxwFHxvtnyaaF2Pyy5KkSMsk9kh7SJl8icp1CD6wicb6VJibiblGibbpDo6IuHrdST6AnWQg/132","comment_is_top":false,"comment_ctime":1614166791,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"byteBuf = ctx.allocate().buffer();  è¿™ä¸ªå±€éƒ¨å±€éƒ¨å˜é‡æ€ä¹ˆä¼šå‘ç”Ÿå†…å­˜æ³„æ¼å‘¢ï¼Ÿæ–¹æ³•æ‰§è¡Œå®Œäº†ï¼ŒbyteBuf ä¸å°±è‡ªåŠ¨å›æ”¶äº†ä¹ˆï¼Ÿå®ƒæŒ‡å‘çš„å†…å­˜ï¼Œä¹Ÿä¼šè¢«è‡ªåŠ¨å›æ”¶ã€‚ è¿™é‡Œçš„æ³„æ¼æ˜¯æŒ‡æ²¡æœ‰ç«‹å³å›æ”¶è¿˜æ˜¯ä¸€ç›´ä¸ä¼šè¢«å›æ”¶ï¼Ÿ","like_count":0},{"had_liked":false,"id":214864,"user_name":"å¿ƒæµ®å¤©ç©º","can_delete":false,"product_type":"c3","uid":1051609,"ip_address":"","ucode":"3B2D0E6CC51EE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/d9/3328dd12.jpg","comment_is_top":false,"comment_ctime":1588837149,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"è€å¸ˆä½ å¥½ï¼Œåœ¨çœ‹ResourceLeakDelectorç›¸å…³æºç æ—¶å‘ç°ï¼Œåœ¨ä½¿ç”¨ByteBufAlloctoråˆ†é…å†…å­˜ç©ºé—´æ—¶(ctx.alloc)ï¼Œä¼šè‡ªåŠ¨æ·»åŠ å†…å­˜æ³„éœ²æ£€æµ‹(æ ¹æ®æ£€æµ‹ç­‰çº§å†³å®šæ˜¯å¦è¿½è¸ªæ£€æµ‹)ï¼Œæ˜¯ä¸æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ˜¯å¦åº”è¯¥å°½é‡ä½¿ç”¨Allocatoråˆ†é…å†…å­˜ï¼Œå¹¶ä¸”é¿å…ç›´æ¥ä½¿ç”¨ ByteBufï¼Œæœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿå¸Œæœ›è€å¸ˆè§£ç­”ã€‚","like_count":0,"discussions":[{"author":{"id":1155616,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a2/20/7549ff2b.jpg","nickname":"flying eagle","note":"","ucode":"1020359D893C04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549258,"discussion_content":"å¦‚ä½•ç›´æ¥ä½¿ç”¨ buyeBuf å‘¢ï¼Ÿä¸è¿˜æ˜¯å¾—é€šè¿‡ ctx.allocåˆ›å»º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643788646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182439,"user_name":"æé‘«ç£Š","can_delete":false,"product_type":"c3","uid":1101615,"ip_address":"","ucode":"D06517CFCEEE00","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","comment_is_top":false,"comment_ctime":1582788270,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"å¼±å¼•ç”¨å¯¹è±¡åŠ å…¥åˆ° refQueue ä¸­ï¼Œè¯´æ˜ ByteBuf å¯¹è±¡è¢« GC äº†å‘€ï¼Œè¢« GC äº†ä¸å°±æ„å‘³ç€å†…å­˜é‡Šæ”¾äº†å—ï¼Ÿå†…å­˜é‡Šæ”¾äº†ä¸ºä»€ä¹ˆè¿˜è¯´å†…å­˜æ³„æ¼äº†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1155616,"avatar":"https://static001.geekbang.org/account/avatar/00/11/a2/20/7549ff2b.jpg","nickname":"flying eagle","note":"","ucode":"1020359D893C04","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549260,"discussion_content":"å †å†…å¯¹è±¡æŒ‡å‘å †å¤–å†…å­˜ï¼Œåœ¨æ²¡æœ‰æ­£ç¡®è°ƒç”¨ release çš„æƒ…å†µä¸‹ï¼Œåªæ˜¯å †å†…å¯¹è±¡è¢«é‡Šæ”¾ï¼Œä½†æ˜¯å †å¤–å†…å­˜è¿˜æ˜¯ &#34; ä½¿ç”¨ &#34; ä¸­ï¼Œè¿™ä¸ª ByteBuf æŒ‡å‘äº†å †å¤–çš„å†…å­˜ç©ºé—´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643788767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1556708,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYLPAlGUWic4yAqsGtEYBSRR7gDjyg9yiaJicNhMwiaNw4rMKQ5DHTfp7gmic0gpqEwCZaou8G6CdHKCg/132","nickname":"ant","note":"","ucode":"A39A03AF257471","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":303026,"discussion_content":"å»ºè®®ä½ å†çœ‹ä¸€éè§†é¢‘æ¢³ç†ä¸€ä¸‹é€»è¾‘ï¼Œä½ åº”è¯¥æ˜¯æ²¡ç†è§£è€å¸ˆçš„æ„æ€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599117225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181725,"user_name":"suke","can_delete":false,"product_type":"c3","uid":1007753,"ip_address":"","ucode":"C0287C31A4F45B","user_header":"","comment_is_top":false,"comment_ctime":1582624690,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"è€å¸ˆé‡åˆ°è¿‡å¼•ç”¨è®¡æ•°æå‰é‡Šæ”¾çš„é—®é¢˜ä¹ˆio.netty.util.IllegalReferenceCountException: refCnt: 0, increment: 1 ï¼Œæˆ‘ç°åœ¨çš„é—®é¢˜æ˜¯å·²ç»ç¡®å®šå†…å­˜è¢«æå‰é‡Šæ”¾äº† ä½†æ˜¯æˆ‘åé¢çš„handlerè¿˜éœ€è¦ç”¨ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å¯ä»¥æ’æŸ¥å‡ºæ¥åˆ°åº•æ˜¯å“ªé‡Œæå‰é‡Šæ”¾äº†","like_count":0},{"had_liked":false,"id":178608,"user_name":"å¯†ç 123456","can_delete":false,"product_type":"c3","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1581758731,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":" DefaultResourceLeak ref = (DefaultResourceLeak) refQueue.poll();\n           if (ref == null) {\n                break;\n            }\n\n            &#47;&#47;åˆ¤æ–­æœ‰æ²¡æœ‰æ³„éœ²çš„å…³é”®\n            if (!ref.dispose()) {\n                continue;\n            }\nè¿™æ®µä»£ç ï¼Œå‡å¦‚æ‰€æœ‰çš„bytebuféƒ½æ²¡æœ‰é‡Šæ”¾ï¼Œé‚£ä¹ˆè¯´æ˜¯ä¸æ˜¯å°±æ°¸è¿œéƒ½æ£€æµ‹ä¸åˆ°ï¼Œå†…å­˜æ³„æ¼ï¼Ÿ","like_count":0},{"had_liked":false,"id":178598,"user_name":"å¯†ç 123456","can_delete":false,"product_type":"c3","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1581755671,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100036701,"comment_content":"å†™äº†ä¸€ä¸ªè‹¥å¼•ç”¨çš„ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š\nObject s=new Object();\nReferenceQueue&lt;Object&gt; rq=new ReferenceQueue&lt;&gt;();\nWeakReference  re=new WeakReference(s, rq);\ns=null;\nSystem.gc();\n&#47;&#47;System.out.println(&quot;====&quot;);\nObject obj= rq.poll();\nSystem.out.println(obj);\nä¸ºä»€ä¹ˆæˆ‘æŠŠæ³¨é‡Šæ”¾å¼€ï¼Œå°±å¯ä»¥è·å–åˆ°ã€‚ä¸æ”¾å¼€æ³¨é‡Šå°±è·å–ä¸åˆ°é‡Šæ”¾çš„å¯¹è±¡å‘¢ï¼Ÿ\n","like_count":0}]}