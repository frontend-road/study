{"id":198262,"title":"21 | 中间件：掌控请求处理过程的关键","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/NET-Core\">https://gitee.com/geektime-geekbang/NET-Core</a></p>","comments":[{"had_liked":false,"id":180769,"user_name":"BZ","can_delete":false,"product_type":"c3","uid":1808032,"ip_address":"","ucode":"83DFE9C8FE82E6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLhRH6fwgzxM2g9awTn1wgvjWdPkjEV6plHUurjfqwZ9RLgNGk4duT6hHKqKKKd81xdulphmw1sug/132","comment_is_top":false,"comment_ctime":1582383833,"is_pvip":false,"replies":[{"id":70468,"content":"看一下appsettings.Development.json，可能是调试环境下，这个文件重写配置导致你的修改不生效","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1582695652,"ip_address":"","comment_id":180769,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"&#47;&#47; 请教老师，麻烦帮忙解答一下：\n&#47;&#47; 按照肖老师的如下配置，中间件中的  _logger.LogDebug(&quot;开始执行&quot;);  不能正常输出\n{\n  &quot;Logging&quot;: {\n    &quot;LogLevel&quot;: {\n      &quot;Default&quot;: &quot;Debug&quot;,\n      &quot;Microsoft&quot;: &quot;Warning&quot;,\n      &quot;Microsoft.Hosting.Lifetime&quot;: &quot;Information&quot;\n    },\n    &quot;Console&quot;: {\n      &quot;IncludeScopes&quot;: true\n    }\n  },\n  &quot;AllowedHosts&quot;: &quot;*&quot;\n}\n\n&#47;&#47; 而按照这种方式，才能正常工作，这是为什么？\n{\n  &quot;Logging&quot;: {\n    &quot;LogLevel&quot;: {\n      &quot;Default&quot;: &quot;Debug&quot;,\n      &quot;Microsoft&quot;: &quot;Warning&quot;,\n      &quot;Microsoft.Hosting.Lifetime&quot;: &quot;Information&quot;\n    },\n    &quot;Console&quot;: {\n      &quot;IncludeScopes&quot;: true,\n      &quot;LogLevel&quot;: {\n        &quot;Default&quot;: &quot;Debug&quot;,\n        &quot;Microsoft&quot;: &quot;Warning&quot;,\n        &quot;Microsoft.Hosting.Lifetime&quot;: &quot;Information&quot;\n      }\n    }\n  },\n  &quot;AllowedHosts&quot;: &quot;*&quot;\n}","like_count":1,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484786,"discussion_content":"看一下appsettings.Development.json，可能是调试环境下，这个文件重写配置导致你的修改不生效","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582695652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015235,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/c3/f7588426.jpg","nickname":"Null","note":"","ucode":"24C5BAD847D88D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211105,"discussion_content":"是的，就是调试状态下，应该是去改appsettings.Development.json这个文件，defalut 级别改成debug即可，非调试下，可以直接更改appsettings.json","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584803190,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1880838,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/b3/06/ab52e221.jpg","nickname":"学习者","note":"","ucode":"7B176FAE22C9E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":192006,"discussion_content":"那如何做呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583054114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209804,"user_name":"提姆","can_delete":false,"product_type":"c3","uid":1103960,"ip_address":"","ucode":"F2A339CC9AC594","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/58/1f5f7aed.jpg","comment_is_top":false,"comment_ctime":1587617829,"is_pvip":false,"replies":[{"id":80611,"content":"可以这么理解","user_name":"作者回复","user_name_real":"肖伟宇","uid":1756585,"ctime":1589685498,"ip_address":"","comment_id":209804,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100044601,"comment_content":"老师您好\n请问一下，我在MapWhen底下使用Use(主要是想玩玩看是否可针对特定url，这个url是有对应的controller，如果带有不一样的query string，让response后面再多带一些内容)，然后执行了next发现它不会去对应的controller去执行action，这样我是不是能理解成在Map底下，已经不属于主要管线了，而是另一个分支了，所以不管使用Use或是Run其实最终的效果都是一样的","like_count":0,"discussions":[{"author":{"id":1756585,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/cd/a9/791d0f5e.jpg","nickname":"老肖想当外语大佬","note":"","ucode":"F662D1BF671E92","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492870,"discussion_content":"可以这么理解","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589685498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}