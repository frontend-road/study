{"id":75973,"title":"20 | æ¡ˆä¾‹ç¯‡ï¼šä¸ºä»€ä¹ˆç³»ç»Ÿçš„Swapå˜é«˜äº†ï¼Ÿï¼ˆä¸‹ï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬è¯¦ç»†å­¦ä¹ äº† Linux å†…å­˜å›æ”¶ï¼Œç‰¹åˆ«æ˜¯ Swap çš„åŸç†ï¼Œå…ˆç®€å•å›é¡¾ä¸€ä¸‹ã€‚</p><p>åœ¨å†…å­˜èµ„æºç´§å¼ æ—¶ï¼ŒLinuxé€šè¿‡ç›´æ¥å†…å­˜å›æ”¶å’Œå®šæœŸæ‰«æçš„æ–¹å¼ï¼Œæ¥é‡Šæ”¾æ–‡ä»¶é¡µå’ŒåŒ¿åé¡µï¼Œä»¥ä¾¿æŠŠå†…å­˜åˆ†é…ç»™æ›´éœ€è¦çš„è¿›ç¨‹ä½¿ç”¨ã€‚</p><ul>\n<li>\n<p>æ–‡ä»¶é¡µçš„å›æ”¶æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œç›´æ¥æ¸…ç©ºç¼“å­˜ï¼Œæˆ–è€…æŠŠè„æ•°æ®å†™å›ç£ç›˜åï¼Œå†é‡Šæ”¾ç¼“å­˜å°±å¯ä»¥äº†ã€‚</p>\n</li>\n<li>\n<p>è€Œå¯¹ä¸å¸¸è®¿é—®çš„åŒ¿åé¡µï¼Œåˆ™éœ€è¦é€šè¿‡Swapæ¢å‡ºåˆ°ç£ç›˜ä¸­ï¼Œè¿™æ ·åœ¨ä¸‹æ¬¡è®¿é—®çš„æ—¶å€™ï¼Œå†æ¬¡ä»ç£ç›˜æ¢å…¥åˆ°å†…å­˜ä¸­å°±å¯ä»¥äº†ã€‚</p>\n</li>\n</ul><p>å¼€å¯ Swap åï¼Œä½ å¯ä»¥è®¾ç½® /proc/sys/vm/min_free_kbytes ï¼Œæ¥è°ƒæ•´ç³»ç»Ÿå®šæœŸå›æ”¶å†…å­˜çš„é˜ˆå€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½® /proc/sys/vm/swappiness ï¼Œæ¥è°ƒæ•´æ–‡ä»¶é¡µå’ŒåŒ¿åé¡µçš„å›æ”¶å€¾å‘ã€‚</p><p>é‚£ä¹ˆï¼Œå½“ Swap ä½¿ç”¨å‡é«˜æ—¶ï¼Œè¦å¦‚ä½•å®šä½å’Œåˆ†æå‘¢ï¼Ÿä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸ªç£ç›˜I/Oçš„æ¡ˆä¾‹ï¼Œå®æˆ˜åˆ†æå’Œæ¼”ç»ƒã€‚</p><h2>æ¡ˆä¾‹</h2><p>ä¸‹é¢æ¡ˆä¾‹åŸºäº Ubuntu 18.04ï¼ŒåŒæ ·é€‚ç”¨äºå…¶ä»–çš„ Linux ç³»ç»Ÿã€‚</p><ul>\n<li>\n<p>æœºå™¨é…ç½®ï¼š2 CPUï¼Œ8GB å†…å­˜</p>\n</li>\n<li>\n<p>ä½ éœ€è¦é¢„å…ˆå®‰è£… sysstat ç­‰å·¥å…·ï¼Œå¦‚ apt install sysstat</p>\n</li>\n</ul><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ« SSH ç™»å½•åˆ°ä¸¤å°æœºå™¨ä¸Šï¼Œå¹¶å®‰è£…ä¸Šé¢æåˆ°çš„è¿™äº›å·¥å…·ã€‚</p><p>åŒä»¥å‰çš„æ¡ˆä¾‹ä¸€æ ·ï¼Œæ¥ä¸‹æ¥çš„æ‰€æœ‰å‘½ä»¤éƒ½é»˜è®¤ä»¥ root ç”¨æˆ·è¿è¡Œï¼Œå¦‚æœä½ æ˜¯ç”¨æ™®é€šç”¨æˆ·èº«ä»½ç™»é™†ç³»ç»Ÿï¼Œè¯·è¿è¡Œ sudo su root å‘½ä»¤åˆ‡æ¢åˆ° root ç”¨æˆ·ã€‚</p><!-- [[[read_end]]] --><p>å¦‚æœå®‰è£…è¿‡ç¨‹ä¸­æœ‰ä»€ä¹ˆé—®é¢˜ï¼ŒåŒæ ·é¼“åŠ±ä½ å…ˆè‡ªå·±æœç´¢è§£å†³ï¼Œè§£å†³ä¸äº†çš„ï¼Œå¯ä»¥åœ¨ç•™è¨€åŒºå‘æˆ‘æé—®ã€‚</p><p>ç„¶åï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œfreeå‘½ä»¤ï¼ŒæŸ¥çœ‹Swapçš„ä½¿ç”¨æƒ…å†µã€‚æ¯”å¦‚ï¼Œåœ¨æˆ‘çš„æœºå™¨ä¸­ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code>$ free\n             total        used        free      shared  buff/cache   available\nMem:        8169348      331668     6715972         696     1121708     7522896\nSwap:             0           0           0\n</code></pre><p>ä»è¿™ä¸ªfreeè¾“å‡ºä½ å¯ä»¥çœ‹åˆ°ï¼ŒSwapçš„å¤§å°æ˜¯0ï¼Œè¿™è¯´æ˜æˆ‘çš„æœºå™¨æ²¡æœ‰é…ç½®Swapã€‚</p><p>ä¸ºäº†ç»§ç»­Swapçš„æ¡ˆä¾‹ï¼Œ å°±éœ€è¦å…ˆé…ç½®ã€å¼€å¯Swapã€‚å¦‚æœä½ çš„ç¯å¢ƒä¸­å·²ç»å¼€å¯äº†Swapï¼Œé‚£ä½ å¯ä»¥ç•¥è¿‡ä¸‹é¢çš„å¼€å¯æ­¥éª¤ï¼Œç»§ç»­å¾€åèµ°ã€‚</p><p>è¦å¼€å¯Swapï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ¸…æ¥šï¼ŒLinuxæœ¬èº«æ”¯æŒä¸¤ç§ç±»å‹çš„Swapï¼Œå³Swapåˆ†åŒºå’ŒSwapæ–‡ä»¶ã€‚ä»¥Swapæ–‡ä»¶ä¸ºä¾‹ï¼Œåœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢çš„å‘½ä»¤å¼€å¯Swapï¼Œæˆ‘è¿™é‡Œé…ç½®Swapæ–‡ä»¶çš„å¤§å°ä¸º8GBï¼š</p><pre><code># åˆ›å»ºSwapæ–‡ä»¶\n$ fallocate -l 8G /mnt/swapfile\n# ä¿®æ”¹æƒé™åªæœ‰æ ¹ç”¨æˆ·å¯ä»¥è®¿é—®\n$ chmod 600 /mnt/swapfile\n# é…ç½®Swapæ–‡ä»¶\n$ mkswap /mnt/swapfile\n# å¼€å¯Swap\n$ swapon /mnt/swapfile\n</code></pre><p>ç„¶åï¼Œå†æ‰§è¡Œfreeå‘½ä»¤ï¼Œç¡®è®¤Swapé…ç½®æˆåŠŸï¼š</p><pre><code>$ free\n             total        used        free      shared  buff/cache   available\nMem:        8169348      331668     6715972         696     1121708     7522896\nSwap:       8388604           0     8388604\n</code></pre><p>ç°åœ¨ï¼Œfree  è¾“å‡ºä¸­ï¼ŒSwap ç©ºé—´ä»¥åŠå‰©ä½™ç©ºé—´éƒ½ä» 0 å˜æˆäº†8GBï¼Œè¯´æ˜Swapå·²ç»<strong>æ­£å¸¸å¼€å¯</strong>ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯ä¸­ï¼Œè¿è¡Œä¸‹é¢çš„ dd å‘½ä»¤ï¼Œæ¨¡æ‹Ÿå¤§æ–‡ä»¶çš„è¯»å–ï¼š</p><pre><code># å†™å…¥ç©ºè®¾å¤‡ï¼Œå®é™…ä¸Šåªæœ‰ç£ç›˜çš„è¯»è¯·æ±‚\n$ dd if=/dev/sda1 of=/dev/null bs=1G count=2048\n</code></pre><p>æ¥ç€ï¼Œåœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸­è¿è¡Œ sar å‘½ä»¤ï¼ŒæŸ¥çœ‹å†…å­˜å„ä¸ªæŒ‡æ ‡çš„å˜åŒ–æƒ…å†µã€‚ä½ å¯ä»¥å¤šè§‚å¯Ÿä¸€ä¼šå„¿ï¼ŒæŸ¥çœ‹è¿™äº›æŒ‡æ ‡çš„å˜åŒ–æƒ…å†µã€‚</p><pre><code># é—´éš”1ç§’è¾“å‡ºä¸€ç»„æ•°æ®\n# -rè¡¨ç¤ºæ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œ-Sè¡¨ç¤ºæ˜¾ç¤ºSwapä½¿ç”¨æƒ…å†µ\n$ sar -r -S 1\n04:39:56    kbmemfree   kbavail kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty\n04:39:57      6249676   6839824   1919632     23.50    740512     67316   1691736     10.22    815156    841868         4\n\n04:39:56    kbswpfree kbswpused  %swpused  kbswpcad   %swpcad\n04:39:57      8388604         0      0.00         0      0.00\n\n04:39:57    kbmemfree   kbavail kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty\n04:39:58      6184472   6807064   1984836     24.30    772768     67380   1691736     10.22    847932    874224        20\n\n04:39:57    kbswpfree kbswpused  %swpused  kbswpcad   %swpcad\n04:39:58      8388604         0      0.00         0      0.00\n\nâ€¦\n\n\n04:44:06    kbmemfree   kbavail kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty\n04:44:07       152780   6525716   8016528     98.13   6530440     51316   1691736     10.22    867124   6869332         0\n\n04:44:06    kbswpfree kbswpused  %swpused  kbswpcad   %swpcad\n04:44:07      8384508      4096      0.05        52      1.27\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œsarçš„è¾“å‡ºç»“æœæ˜¯ä¸¤ä¸ªè¡¨æ ¼ï¼Œç¬¬ä¸€ä¸ªè¡¨æ ¼è¡¨ç¤ºå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œç¬¬äºŒä¸ªè¡¨æ ¼è¡¨ç¤ºSwapçš„ä½¿ç”¨æƒ…å†µã€‚å…¶ä¸­ï¼Œå„ä¸ªæŒ‡æ ‡åç§°å‰é¢çš„kbå‰ç¼€ï¼Œè¡¨ç¤ºè¿™äº›æŒ‡æ ‡çš„å•ä½æ˜¯KBã€‚</p><p>å»æ‰å‰ç¼€åï¼Œä½ ä¼šå‘ç°ï¼Œå¤§éƒ¨åˆ†æŒ‡æ ‡æˆ‘ä»¬éƒ½å·²ç»è§è¿‡äº†ï¼Œå‰©ä¸‹çš„å‡ ä¸ªæ–°å‡ºç°çš„æŒ‡æ ‡ï¼Œæˆ‘æ¥ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p><ul>\n<li>\n<p>kbcommitï¼Œè¡¨ç¤ºå½“å‰ç³»ç»Ÿè´Ÿè½½éœ€è¦çš„å†…å­˜ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸ºäº†ä¿è¯ç³»ç»Ÿå†…å­˜ä¸æº¢å‡ºï¼Œå¯¹éœ€è¦å†…å­˜çš„ä¼°è®¡å€¼ã€‚%commitï¼Œå°±æ˜¯è¿™ä¸ªå€¼ç›¸å¯¹æ€»å†…å­˜çš„ç™¾åˆ†æ¯”ã€‚</p>\n</li>\n<li>\n<p>kbactiveï¼Œè¡¨ç¤ºæ´»è·ƒå†…å­˜ï¼Œä¹Ÿå°±æ˜¯æœ€è¿‘ä½¿ç”¨è¿‡çš„å†…å­˜ï¼Œä¸€èˆ¬ä¸ä¼šè¢«ç³»ç»Ÿå›æ”¶ã€‚</p>\n</li>\n<li>\n<p>kbinactï¼Œè¡¨ç¤ºéæ´»è·ƒå†…å­˜ï¼Œä¹Ÿå°±æ˜¯ä¸å¸¸è®¿é—®çš„å†…å­˜ï¼Œæœ‰å¯èƒ½ä¼šè¢«ç³»ç»Ÿå›æ”¶ã€‚</p>\n</li>\n</ul><p>æ¸…æ¥šäº†ç•Œé¢æŒ‡æ ‡çš„å«ä¹‰åï¼Œæˆ‘ä»¬å†ç»“åˆå…·ä½“æ•°å€¼ï¼Œæ¥åˆ†æç›¸å…³çš„ç°è±¡ã€‚ä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œæ€»çš„å†…å­˜ä½¿ç”¨ç‡ï¼ˆ%memusedï¼‰åœ¨ä¸æ–­å¢é•¿ï¼Œä»å¼€å§‹çš„23%ä¸€ç›´é•¿åˆ°äº† 98%ï¼Œå¹¶ä¸”ä¸»è¦å†…å­˜éƒ½è¢«ç¼“å†²åŒºï¼ˆkbbuffersï¼‰å ç”¨ã€‚å…·ä½“æ¥è¯´ï¼š</p><ul>\n<li>\n<p>åˆšå¼€å§‹ï¼Œå‰©ä½™å†…å­˜ï¼ˆkbmemfreeï¼‰ä¸æ–­å‡å°‘ï¼Œè€Œç¼“å†²åŒºï¼ˆkbbuffersï¼‰åˆ™ä¸æ–­å¢å¤§ï¼Œç”±æ­¤å¯çŸ¥ï¼Œå‰©ä½™å†…å­˜ä¸æ–­åˆ†é…ç»™äº†ç¼“å†²åŒºã€‚</p>\n</li>\n<li>\n<p>ä¸€æ®µæ—¶é—´åï¼Œå‰©ä½™å†…å­˜å·²ç»å¾ˆå°ï¼Œè€Œç¼“å†²åŒºå ç”¨äº†å¤§éƒ¨åˆ†å†…å­˜ã€‚è¿™æ—¶å€™ï¼ŒSwapçš„ä½¿ç”¨å¼€å§‹é€æ¸å¢å¤§ï¼Œç¼“å†²åŒºå’Œå‰©ä½™å†…å­˜åˆ™åªåœ¨å°èŒƒå›´å†…æ³¢åŠ¨ã€‚</p>\n</li>\n</ul><p>ä½ å¯èƒ½å›°æƒ‘äº†ï¼Œä¸ºä»€ä¹ˆç¼“å†²åŒºåœ¨ä¸åœå¢å¤§ï¼Ÿè¿™åˆæ˜¯å“ªäº›è¿›ç¨‹å¯¼è‡´çš„å‘¢ï¼Ÿ</p><p>æ˜¾ç„¶ï¼Œæˆ‘ä»¬è¿˜å¾—çœ‹çœ‹è¿›ç¨‹ç¼“å­˜çš„æƒ…å†µã€‚åœ¨å‰é¢ç¼“å­˜çš„æ¡ˆä¾‹ä¸­æˆ‘ä»¬å­¦è¿‡ï¼Œ cachetop æ­£å¥½èƒ½æ»¡è¶³è¿™ä¸€ç‚¹ã€‚é‚£æˆ‘ä»¬å°±æ¥ cachetop ä¸€ä¸‹ã€‚</p><p>åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸­ï¼ŒæŒ‰ä¸‹Ctrl+Cåœæ­¢sarå‘½ä»¤ï¼Œç„¶åè¿è¡Œä¸‹é¢çš„cachetopå‘½ä»¤ï¼Œè§‚å¯Ÿç¼“å­˜çš„ä½¿ç”¨æƒ…å†µï¼š</p><pre><code>$ cachetop 5\n12:28:28 Buffers MB: 6349 / Cached MB: 87 / Sort: HITS / Order: ascending\nPID      UID      CMD              HITS     MISSES   DIRTIES  READ_HIT%  WRITE_HIT%\n   18280 root     python                 22        0        0     100.0%       0.0%\n   18279 root     dd                  41088    41022        0      50.0%      50.0%\n</code></pre><p>é€šè¿‡cachetopçš„è¾“å‡ºï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œddè¿›ç¨‹çš„è¯»å†™è¯·æ±‚åªæœ‰50%çš„å‘½ä¸­ç‡ï¼Œå¹¶ä¸”æœªå‘½ä¸­çš„ç¼“å­˜é¡µæ•°ï¼ˆMISSESï¼‰ä¸º41022ï¼ˆå•ä½æ˜¯é¡µï¼‰ã€‚è¿™è¯´æ˜ï¼Œæ­£æ˜¯æ¡ˆä¾‹å¼€å§‹æ—¶è¿è¡Œçš„ddï¼Œå¯¼è‡´äº†ç¼“å†²åŒºä½¿ç”¨å‡é«˜ã€‚</p><p>ä½ å¯èƒ½æ¥ç€ä¼šé—®ï¼Œä¸ºä»€ä¹ˆSwapä¹Ÿè·Ÿç€å‡é«˜äº†å‘¢ï¼Ÿç›´è§‚æ¥è¯´ï¼Œç¼“å†²åŒºå äº†ç³»ç»Ÿç»å¤§éƒ¨åˆ†å†…å­˜ï¼Œè¿˜å±äºå¯å›æ”¶å†…å­˜ï¼Œå†…å­˜ä¸å¤Ÿç”¨æ—¶ï¼Œä¸åº”è¯¥å…ˆå›æ”¶ç¼“å†²åŒºå—ï¼Ÿ</p><p>è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬è¿˜å¾—è¿›ä¸€æ­¥é€šè¿‡ /proc/zoneinfo  ï¼Œè§‚å¯Ÿå‰©ä½™å†…å­˜ã€å†…å­˜é˜ˆå€¼ä»¥åŠåŒ¿åé¡µå’Œæ–‡ä»¶é¡µçš„æ´»è·ƒæƒ…å†µã€‚</p><p>ä½ å¯ä»¥åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸­ï¼ŒæŒ‰ä¸‹Ctrl+Cï¼Œåœæ­¢cachetopå‘½ä»¤ã€‚ç„¶åè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œè§‚å¯Ÿ /proc/zoneinfo ä¸­è¿™å‡ ä¸ªæŒ‡æ ‡çš„å˜åŒ–æƒ…å†µï¼š</p><pre><code># -d è¡¨ç¤ºé«˜äº®å˜åŒ–çš„å­—æ®µ\n# -A è¡¨ç¤ºä»…æ˜¾ç¤ºNormalè¡Œä»¥åŠä¹‹åçš„15è¡Œè¾“å‡º\n$ watch -d grep -A 15 'Normal' /proc/zoneinfo\nNode 0, zone   Normal\n  pages free     21328\n        min      14896\n        low      18620\n        high     22344\n        spanned  1835008\n        present  1835008\n        managed  1796710\n        protection: (0, 0, 0, 0, 0)\n      nr_free_pages 21328\n      nr_zone_inactive_anon 79776\n      nr_zone_active_anon 206854\n      nr_zone_inactive_file 918561\n      nr_zone_active_file 496695\n      nr_zone_unevictable 2251\n      nr_zone_write_pending 0\n</code></pre><p>ä½ å¯ä»¥å‘ç°ï¼Œå‰©ä½™å†…å­˜ï¼ˆpages_freeï¼‰åœ¨ä¸€ä¸ªå°èŒƒå›´å†…ä¸åœåœ°æ³¢åŠ¨ã€‚å½“å®ƒå°äºé¡µä½é˜ˆå€¼ï¼ˆpages_low) æ—¶ï¼Œåˆä¼šçªç„¶å¢å¤§åˆ°ä¸€ä¸ªå¤§äºé¡µé«˜é˜ˆå€¼ï¼ˆpages_highï¼‰çš„å€¼ã€‚</p><p>å†ç»“åˆåˆšåˆšç”¨ sar çœ‹åˆ°çš„å‰©ä½™å†…å­˜å’Œç¼“å†²åŒºçš„å˜åŒ–æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡ºï¼Œå‰©ä½™å†…å­˜å’Œç¼“å†²åŒºçš„æ³¢åŠ¨å˜åŒ–ï¼Œæ­£æ˜¯ç”±äºå†…å­˜å›æ”¶å’Œç¼“å­˜å†æ¬¡åˆ†é…çš„å¾ªç¯å¾€å¤ã€‚</p><ul>\n<li>\n<p>å½“å‰©ä½™å†…å­˜å°äºé¡µä½é˜ˆå€¼æ—¶ï¼Œç³»ç»Ÿä¼šå›æ”¶ä¸€äº›ç¼“å­˜å’ŒåŒ¿åå†…å­˜ï¼Œä½¿å‰©ä½™å†…å­˜å¢å¤§ã€‚å…¶ä¸­ï¼Œç¼“å­˜çš„å›æ”¶å¯¼è‡´sarä¸­çš„ç¼“å†²åŒºå‡å°ï¼Œè€ŒåŒ¿åå†…å­˜çš„å›æ”¶å¯¼è‡´äº†Swapçš„ä½¿ç”¨å¢å¤§ã€‚</p>\n</li>\n<li>\n<p>ç´§æ¥ç€ï¼Œç”±äºddè¿˜åœ¨ç»§ç»­ï¼Œå‰©ä½™å†…å­˜åˆä¼šé‡æ–°åˆ†é…ç»™ç¼“å­˜ï¼Œå¯¼è‡´å‰©ä½™å†…å­˜å‡å°‘ï¼Œç¼“å†²åŒºå¢å¤§ã€‚</p>\n</li>\n</ul><p>å…¶å®è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼Œå¦‚æœå¤šæ¬¡è¿è¡Œddå’Œsarï¼Œä½ å¯èƒ½ä¼šå‘ç°ï¼Œåœ¨å¤šæ¬¡çš„å¾ªç¯é‡å¤ä¸­ï¼Œæœ‰æ—¶å€™æ˜¯Swapç”¨å¾—æ¯”è¾ƒå¤šï¼Œæœ‰æ—¶å€™Swapå¾ˆå°‘ï¼Œåè€Œç¼“å†²åŒºçš„æ³¢åŠ¨æ›´å¤§ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œç³»ç»Ÿå›æ”¶å†…å­˜æ—¶ï¼Œæœ‰æ—¶å€™ä¼šå›æ”¶æ›´å¤šçš„æ–‡ä»¶é¡µï¼Œæœ‰æ—¶å€™åˆå›æ”¶äº†æ›´å¤šçš„åŒ¿åé¡µã€‚</p><p>æ˜¾ç„¶ï¼Œç³»ç»Ÿå›æ”¶ä¸åŒç±»å‹å†…å­˜çš„å€¾å‘ï¼Œä¼¼ä¹ä¸é‚£ä¹ˆæ˜æ˜¾ã€‚ä½ åº”è¯¥æƒ³åˆ°äº†ä¸ŠèŠ‚è¯¾æåˆ°çš„swappinessï¼Œæ­£æ˜¯è°ƒæ•´ä¸åŒç±»å‹å†…å­˜å›æ”¶çš„é…ç½®é€‰é¡¹ã€‚</p><p>è¿˜æ˜¯åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸­ï¼ŒæŒ‰ä¸‹Ctrl+Cåœæ­¢watchå‘½ä»¤ï¼Œç„¶åè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹swappinessçš„é…ç½®ï¼š</p><pre><code>$ cat /proc/sys/vm/swappiness\n60\n</code></pre><p>swappinessæ˜¾ç¤ºçš„æ˜¯é»˜è®¤å€¼60ï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å¯¹ä¸­å’Œçš„é…ç½®ï¼Œæ‰€ä»¥ç³»ç»Ÿä¼šæ ¹æ®å®é™…è¿è¡Œæƒ…å†µï¼Œé€‰æ‹©åˆé€‚çš„å›æ”¶ç±»å‹ï¼Œæ¯”å¦‚å›æ”¶ä¸æ´»è·ƒçš„åŒ¿åé¡µï¼Œæˆ–è€…ä¸æ´»è·ƒçš„æ–‡ä»¶é¡µã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»æ‰¾å‡ºäº†Swapå‘ç”Ÿçš„æ ¹æºã€‚å¦ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œåˆšæ‰çš„Swapåˆ°åº•å½±å“äº†å“ªäº›åº”ç”¨ç¨‹åºå‘¢ï¼Ÿæ¢å¥è¯è¯´ï¼ŒSwapæ¢å‡ºçš„æ˜¯å“ªäº›è¿›ç¨‹çš„å†…å­˜ï¼Ÿ</p><p>è¿™é‡Œæˆ‘è¿˜æ˜¯æ¨è procæ–‡ä»¶ç³»ç»Ÿï¼Œç”¨æ¥æŸ¥çœ‹è¿›ç¨‹Swapæ¢å‡ºçš„è™šæ‹Ÿå†…å­˜å¤§å°ï¼Œå®ƒä¿å­˜åœ¨ /proc/pid/statusä¸­çš„VmSwapä¸­ï¼ˆæ¨èä½ æ‰§è¡Œman procæ¥æŸ¥è¯¢å…¶ä»–å­—æ®µçš„å«ä¹‰ï¼‰ã€‚</p><p>åœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå°±å¯ä»¥æŸ¥çœ‹ä½¿ç”¨Swapæœ€å¤šçš„è¿›ç¨‹ã€‚æ³¨æ„forã€awkã€sortéƒ½æ˜¯æœ€å¸¸ç”¨çš„Linuxå‘½ä»¤ï¼Œå¦‚æœä½ è¿˜ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥ç”¨manæ¥æŸ¥è¯¢å®ƒä»¬çš„æ‰‹å†Œï¼Œæˆ–ä¸Šç½‘æœç´¢æ•™ç¨‹æ¥å­¦ä¹ ã€‚</p><pre><code># æŒ‰VmSwapä½¿ç”¨é‡å¯¹è¿›ç¨‹æ’åºï¼Œè¾“å‡ºè¿›ç¨‹åç§°ã€è¿›ç¨‹IDä»¥åŠSWAPç”¨é‡\n$ for file in /proc/*/status ; do awk '/VmSwap|Name|^Pid/{printf $2 &quot; &quot; $3}END{ print &quot;&quot;}' $file; done | sort -k 3 -n -r | head\ndockerd 2226 10728 kB\ndocker-containe 2251 8516 kB\nsnapd 936 4020 kB\nnetworkd-dispat 911 836 kB\npolkitd 1004 44 kB\n</code></pre><p>ä»è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨Swapæ¯”è¾ƒå¤šçš„æ˜¯dockerd å’Œ docker-containe è¿›ç¨‹ï¼Œæ‰€ä»¥ï¼Œå½“dockerdå†æ¬¡è®¿é—®è¿™äº›æ¢å‡ºåˆ°ç£ç›˜çš„å†…å­˜æ—¶ï¼Œä¹Ÿä¼šæ¯”è¾ƒæ…¢ã€‚</p><p>è¿™ä¹Ÿè¯´æ˜äº†ä¸€ç‚¹ï¼Œè™½ç„¶ç¼“å­˜å±äºå¯å›æ”¶å†…å­˜ï¼Œä½†åœ¨ç±»ä¼¼å¤§æ–‡ä»¶æ‹·è´è¿™ç±»åœºæ™¯ä¸‹ï¼Œç³»ç»Ÿè¿˜æ˜¯ä¼šç”¨Swapæœºåˆ¶æ¥å›æ”¶åŒ¿åå†…å­˜ï¼Œè€Œä¸ä»…ä»…æ˜¯å›æ”¶å ç”¨ç»å¤§éƒ¨åˆ†å†…å­˜çš„æ–‡ä»¶é¡µã€‚</p><p>æœ€åï¼Œå¦‚æœä½ åœ¨ä¸€å¼€å§‹é…ç½®äº† Swapï¼Œä¸è¦å¿˜è®°åœ¨æ¡ˆä¾‹ç»“æŸåå…³é—­ã€‚ä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå…³é—­Swapï¼š</p><pre><code>$ swapoff -a\n</code></pre><p>å®é™…ä¸Šï¼Œå…³é—­Swapåå†é‡æ–°æ‰“å¼€ï¼Œä¹Ÿæ˜¯ä¸€ç§å¸¸ç”¨çš„Swapç©ºé—´æ¸…ç†æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p><pre><code>$ swapoff -a &amp;&amp; swapon -a \n</code></pre><h2>å°ç»“</h2><p>åœ¨å†…å­˜èµ„æºç´§å¼ æ—¶ï¼ŒLinux ä¼šé€šè¿‡ Swap ï¼ŒæŠŠä¸å¸¸è®¿é—®çš„åŒ¿åé¡µæ¢å‡ºåˆ°ç£ç›˜ä¸­ï¼Œä¸‹æ¬¡è®¿é—®çš„æ—¶å€™å†ä»ç£ç›˜æ¢å…¥åˆ°å†…å­˜ä¸­æ¥ã€‚ä½ å¯ä»¥è®¾ç½®/proc/sys/vm/min_free_kbytesï¼Œæ¥è°ƒæ•´ç³»ç»Ÿå®šæœŸå›æ”¶å†…å­˜çš„é˜ˆå€¼ï¼›ä¹Ÿå¯ä»¥è®¾ç½®/proc/sys/vm/swappinessï¼Œæ¥è°ƒæ•´æ–‡ä»¶é¡µå’ŒåŒ¿åé¡µçš„å›æ”¶å€¾å‘ã€‚</p><p>å½“Swapå˜é«˜æ—¶ï¼Œä½ å¯ä»¥ç”¨ sarã€/proc/zoneinfoã€/proc/pid/statusç­‰æ–¹æ³•ï¼ŒæŸ¥çœ‹ç³»ç»Ÿå’Œè¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œè¿›è€Œæ‰¾å‡ºSwapå‡é«˜çš„æ ¹æºå’Œå—å½±å“çš„è¿›ç¨‹ã€‚</p><p>åè¿‡æ¥è¯´ï¼Œé€šå¸¸ï¼Œé™ä½Swapçš„ä½¿ç”¨ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚è¦æ€ä¹ˆåšå‘¢ï¼Ÿè¿™é‡Œï¼Œæˆ‘ä¹Ÿæ€»ç»“äº†å‡ ç§å¸¸è§çš„é™ä½æ–¹æ³•ã€‚</p><ul>\n<li>\n<p>ç¦æ­¢Swapï¼Œç°åœ¨æœåŠ¡å™¨çš„å†…å­˜è¶³å¤Ÿå¤§ï¼Œæ‰€ä»¥é™¤éæœ‰å¿…è¦ï¼Œç¦ç”¨Swapå°±å¯ä»¥äº†ã€‚éšç€äº‘è®¡ç®—çš„æ™®åŠï¼Œå¤§éƒ¨åˆ†äº‘å¹³å°ä¸­çš„è™šæ‹Ÿæœºéƒ½é»˜è®¤ç¦æ­¢Swapã€‚</p>\n</li>\n<li>\n<p>å¦‚æœå®åœ¨éœ€è¦ç”¨åˆ°Swapï¼Œå¯ä»¥å°è¯•é™ä½swappinessçš„å€¼ï¼Œå‡å°‘å†…å­˜å›æ”¶æ—¶Swapçš„ä½¿ç”¨å€¾å‘ã€‚</p>\n</li>\n<li>\n<p>å“åº”å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨ï¼Œå¦‚æœå®ƒä»¬å¯èƒ½åœ¨å¼€å¯Swapçš„æœåŠ¡å™¨ä¸­è¿è¡Œï¼Œä½ è¿˜å¯ä»¥ç”¨åº“å‡½æ•° mlock() æˆ–è€… mlockall()é”å®šå†…å­˜ï¼Œé˜»æ­¢å®ƒä»¬çš„å†…å­˜æ¢å‡ºã€‚</p>\n</li>\n</ul><h2>æ€è€ƒ</h2><p>æœ€åï¼Œç»™ä½ ç•™ä¸€ä¸ªæ€è€ƒé¢˜ã€‚</p><p>ä»Šå¤©çš„æ¡ˆä¾‹ä¸­ï¼Œswappinessä½¿ç”¨çš„æ˜¯é»˜è®¤é…ç½®çš„60ã€‚å¦‚æœæŠŠå®ƒé…ç½®æˆ0çš„è¯ï¼Œè¿˜ä¼šå‘ç”ŸSwapå—ï¼Ÿè¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å¸Œæœ›ä½ å¯ä»¥å®é™…æ“ä½œä¸€ä¸‹ï¼Œé‡ç‚¹è§‚å¯Ÿsarçš„è¾“å‡ºï¼Œå¹¶ç»“åˆä»Šå¤©çš„å†…å®¹æ¥è®°å½•ã€æ€»ç»“ã€‚</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p></p>","neighbors":{"left":{"article_title":"19 | æ¡ˆä¾‹ç¯‡ï¼šä¸ºä»€ä¹ˆç³»ç»Ÿçš„Swapå˜é«˜äº†ï¼ˆä¸Šï¼‰","id":75797},"right":{"article_title":"21 | å¥—è·¯ç¯‡ï¼šå¦‚ä½•â€œå¿«å‡†ç‹ â€æ‰¾åˆ°ç³»ç»Ÿå†…å­˜çš„é—®é¢˜ï¼Ÿ","id":76460}},"comments":[{"had_liked":false,"id":57026,"user_name":"Free_fish","can_delete":false,"product_type":"c1","uid":1133405,"ip_address":"","ucode":"4B096A4EEDB294","user_header":"https://static001.geekbang.org/account/avatar/00/11/4b/5d/48205f1d.jpg","comment_is_top":false,"comment_ctime":1546604991,"is_pvip":false,"replies":[{"id":"20575","content":"ğŸ‘ è°¢è°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","comment_id":57026,"uid":"1001282","ip_address":"","utype":1,"ctime":1546612414,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":6,"race_medal":0,"score":"362323857855","product_id":100020901,"comment_content":"ç”¨smem --sort swapå‘½ä»¤å¯ä»¥ç›´æ¥å°†è¿›ç¨‹æŒ‰ç…§swapä½¿ç”¨é‡æ’åºæ˜¾ç¤º","like_count":84,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435369,"discussion_content":"ğŸ‘ è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546612414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1327184,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/OoQFTY8EKl6QTiaqhMJ4RAW7JhabGcYJMDqdrNYVibQIvicXBPVyGzNtjrmx0hF5LJTpoFEWNBkCncgqdRCPnLhibw/132","nickname":"rock","note":"","ucode":"02D7A46F4C486F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587539,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663136097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–åŒ—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2066801,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/W0VEO7Hxzd61mia6Ls2EpBmaZ0l9q7SFUAErbu4XKIjWLmlALr4ybpicDoI8SoXY8XJNKmk04Ep1ibTCuFvfCF8GQ/132","nickname":"Chen","note":"","ucode":"5D0F3DF807706E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331235,"discussion_content":"æ˜¯éœ€è¦äº†å¦å¤–å®‰è£…çš„å‘½ä»¤å—ï¼Œwhich smemæ‰¾ä¸åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606813797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1170843,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","nickname":"yyl","note":"","ucode":"1741DACDFCA9AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293765,"discussion_content":"command not found","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595661620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1009527,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/77/c1310aad.jpg","nickname":"å‰‘è¡£æ¸…é£","note":"","ucode":"470CD81F6612F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1170843,"avatar":"https://static001.geekbang.org/account/avatar/00/11/dd/9b/0bc44a78.jpg","nickname":"yyl","note":"","ucode":"1741DACDFCA9AF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":341445,"discussion_content":"yum -y install smem","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1610422160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":293765,"ip_address":""},"score":341445,"extra":""}]},{"author":{"id":1093541,"avatar":"https://static001.geekbang.org/account/avatar/00/10/af/a5/afa1d7d7.jpg","nickname":"hasWhere","note":"","ucode":"2C2B2988107489","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":123080,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578390088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56741,"user_name":"Geek_2b6807","can_delete":false,"product_type":"c1","uid":1240168,"ip_address":"","ucode":"4C1D0B7F283554","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ert8UYzoypaI9wMPZQV2ibThQ2zKsoge5R25qxHP10eia5pMYOV1mq6G9bft5LoygnyR6bn8RERwQDg/132","comment_is_top":false,"comment_ctime":1546532873,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"160460322825","product_id":100020901,"comment_content":"å¸Œæœ›è€å¸ˆåœ¨ç”¨å·¥å…·çš„æ—¶å€™èƒ½å¤Ÿä½¿ç”¨å¯¹å†…æ ¸ç‰ˆæœ¬è¦æ±‚ä¸é«˜çš„ï¼Œæ¯•ç«Ÿç”Ÿäº§ç¯å¢ƒç”¨è¾ƒæ–°å†…æ ¸çš„è¿˜æ˜¯æ¯”è¾ƒå°‘","like_count":37,"discussions":[{"author":{"id":2067934,"avatar":"","nickname":"dqznn88","note":"","ucode":"08E1EE384858F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297451,"discussion_content":"ebpfæ˜¯å†…æ ¸ç‰ˆæœ¬é«˜æ‰æœ‰çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596941789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56926,"user_name":"Scott","can_delete":false,"product_type":"c1","uid":1014800,"ip_address":"","ucode":"7E57FDCB5E5D49","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/10/165cb374.jpg","comment_is_top":false,"comment_ctime":1546580925,"is_pvip":false,"replies":[{"id":"21316","content":"ğŸ‘ æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":56926,"uid":"1001282","ip_address":"","utype":1,"ctime":1547259195,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":4,"race_medal":0,"score":"117510697917","product_id":100020901,"comment_content":"ç­”æ¡ˆä¸æ˜¯ä¸Šä¸€è®²æœ‰æåˆ°å—ï¼Œå°±ç®—è®¾ç½®ä¸º0ï¼Œå¦‚æœç©ºé—²å†…å­˜+æ–‡ä»¶é¡µ &lt; page_lowï¼Œè¿˜æ˜¯ä¼šå‘ç”Ÿswapï¼Œè¿™ä¸ªå€¼æ˜¯è®¾ç½®swapçš„ç§¯æç¨‹åº¦ï¼Œå°±ç®—æœ€ä¸ç§¯æï¼Œè¢«é€¼æ— å¥ˆè¿˜æ˜¯å¾—swapçš„ã€‚","like_count":27,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435315,"discussion_content":"ğŸ‘ æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547259195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1231289,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM56TmIEXDkHOfMNr7cAlCyGSQHiab7frfp59ibfuIibyPcpG1vugMLjNDeosfewg3sUkIfE0mzicqGgtw/132","nickname":"åŒ—æç†Š","note":"","ucode":"80B9CB59E151CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":580270,"discussion_content":"å¦‚æœswapæ–‡ä»¶æ ¹æœ¬å°±æ²¡æœ‰é…ç½®å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658051736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":435315,"ip_address":""},"score":580270,"extra":""}]},{"author":{"id":2118161,"avatar":"https://static001.geekbang.org/account/avatar/00/20/52/11/af170b65.jpg","nickname":"éª‘é©´æ‰¾ä½ ","note":"","ucode":"FB9E7511C00BEA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305259,"discussion_content":"ä¸æ˜¯page_low, è€Œæ˜¯page_high: A value of 0 instructs the kernel not to\ninitiate swap until the amount of free and file-backed pages is less\nthan the high water mark in a zone.","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1599832692,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2066801,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/W0VEO7Hxzd61mia6Ls2EpBmaZ0l9q7SFUAErbu4XKIjWLmlALr4ybpicDoI8SoXY8XJNKmk04Ep1ibTCuFvfCF8GQ/132","nickname":"Chen","note":"","ucode":"5D0F3DF807706E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2118161,"avatar":"https://static001.geekbang.org/account/avatar/00/20/52/11/af170b65.jpg","nickname":"éª‘é©´æ‰¾ä½ ","note":"","ucode":"FB9E7511C00BEA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331236,"discussion_content":"swappiness çš„èŒƒå›´æ˜¯ 0-100ï¼Œä¸è¿‡è¦æ³¨æ„ï¼Œè¿™å¹¶ä¸æ˜¯å†…å­˜çš„ç™¾åˆ†æ¯”ï¼Œè€Œæ˜¯è°ƒæ•´ Swap ç§¯æç¨‹åº¦çš„æƒé‡ï¼Œå³ä½¿ä½ æŠŠå®ƒè®¾ç½®æˆ 0ï¼Œå½“å‰©ä½™å†…å­˜ + æ–‡ä»¶é¡µå°äºé¡µé«˜é˜ˆå€¼æ—¶ï¼Œè¿˜æ˜¯ä¼šå‘ç”Ÿ Swap","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606814391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305259,"ip_address":""},"score":331236,"extra":""}]}]},{"had_liked":false,"id":56765,"user_name":"å°˜å°","can_delete":false,"product_type":"c1","uid":1247006,"ip_address":"","ucode":"CEE0C006387A03","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/1e/bdbe93f4.jpg","comment_is_top":false,"comment_ctime":1546559724,"is_pvip":false,"replies":[{"id":"21159","content":"æœ‰çš„ï¼Œä½¿ç”¨äº†swapè¯´æ˜å†…å­˜å¯èƒ½æœ‰å‹åŠ›äº†ï¼Œè¿™ä¹ˆå¼ºåˆ¶æ¢å…¥æœ‰å¯èƒ½å¯¼è‡´å†…å­˜é—®é¢˜","user_name":"ä½œè€…å›å¤","comment_id":56765,"uid":"1001282","ip_address":"","utype":1,"ctime":1547125133,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"70266036460","product_id":100020901,"comment_content":"$ swapoff -a &amp;&amp; swapon -aï¼Œçº¿ä¸Šä½¿ç”¨è¿™ä¸ªå‘½ä»¤é‡Šæ”¾swapæœ‰ä»€ä¹ˆé£é™©å—ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435220,"discussion_content":"æœ‰çš„ï¼Œä½¿ç”¨äº†swapè¯´æ˜å†…å­˜å¯èƒ½æœ‰å‹åŠ›äº†ï¼Œè¿™ä¹ˆå¼ºåˆ¶æ¢å…¥æœ‰å¯èƒ½å¯¼è‡´å†…å­˜é—®é¢˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1547125133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124465,"user_name":"Geek_b04b12","can_delete":false,"product_type":"c1","uid":1112139,"ip_address":"","ucode":"F8705A21FCDF09","user_header":"https://static001.geekbang.org/account/avatar/00/10/f8/4b/5ae62b10.jpg","comment_is_top":false,"comment_ctime":1565889831,"is_pvip":false,"replies":[{"id":"45967","content":"è°¢è°¢åˆ†äº«ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":124465,"uid":"1001282","ip_address":"","utype":1,"ctime":1566132958,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"35925628199","product_id":100020901,"comment_content":"å¯¹äºsarä»¥åŠå…¶ä»–çš„linuxå‘½ä»¤,å¦‚æœå‡ºç°åˆ—å¯¹çš„ä¸æ•´é½çš„æ—¶å€™,å¯ä»¥é€‚å½“çš„å‚è€ƒæ–‡æ¡£,å¢åŠ æ ¼å¼åŒ–è¾“å‡º,ä¾‹å¦‚:sarçš„æ ¼å¼åŒ–è¾“å‡º:sudo sar -h --human  -r -S 1 5<br>free å¯ä»¥æ·»åŠ  -h :free -h <br>æ›´å®¹æ˜“è®©äººç†è§£","like_count":8,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463191,"discussion_content":"è°¢è°¢åˆ†äº«ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566132958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2328318,"avatar":"https://static001.geekbang.org/account/avatar/00/23/86/fe/0fb57311.jpg","nickname":"æ¸¸ç¦»çš„é±¼","note":"","ucode":"292D852B51C7D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340306,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609950101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58327,"user_name":"ä»²é¬¼","can_delete":false,"product_type":"c1","uid":1314692,"ip_address":"","ucode":"DB1CD7052D5BA6","user_header":"https://static001.geekbang.org/account/avatar/00/14/0f/84/d8e63885.jpg","comment_is_top":false,"comment_ctime":1547037908,"is_pvip":false,"replies":[{"id":"21154","content":"kbcommitå°±æ˜¯è¿›ç¨‹ç”³è¯·çš„å†…å­˜ä¹‹å’Œï¼Œkbmemusedè¿˜åŒ…æ‹¬äº†bufferå’Œcache","user_name":"ä½œè€…å›å¤","comment_id":58327,"uid":"1001282","ip_address":"","utype":1,"ctime":1547124894,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"23021874388","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘ç ”ç©¶man saråè¿˜æ˜¯æ²¡ç†è§£kbcommitï¼Œè¿™ä¸ªä¼°è®¡å€¼å…·ä½“æŒ‡ä»€ä¹ˆå‘¢ï¼Ÿ<br>å°±ç®—å•çº¯ä»¥ä¸å¯¼è‡´OOMçš„æœ€å°å†…å­˜ç†è§£ï¼Œä¸ºä»€ä¹ˆä¼šå°äºkbmemusedï¼ˆå·²ç”¨ç‰©ç†å†…å­˜ï¼‰å‘¢ï¼Ÿæˆ‘è®¤ä¸ºåº”è¯¥æ˜¯kbcommit &gt;= kbmemusedã€‚","like_count":5,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436012,"discussion_content":"kbcommitå°±æ˜¯è¿›ç¨‹ç”³è¯·çš„å†…å­˜ä¹‹å’Œï¼Œkbmemusedè¿˜åŒ…æ‹¬äº†bufferå’Œcache","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547124894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56989,"user_name":"å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1267566,"ip_address":"","ucode":"ADC3E7B6789955","user_header":"https://static001.geekbang.org/account/avatar/00/13/57/6e/b6795c44.jpg","comment_is_top":false,"comment_ctime":1546594454,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18726463638","product_id":100020901,"comment_content":"swappiness ä½¿ç”¨çš„æ˜¯é»˜è®¤é…ç½®çš„ 60ã€‚å¦‚æœæŠŠå®ƒé…ç½®ä¸º0 è¿˜ä¼šä½¿ç”¨ swap å—ï¼Ÿ <br>ä¼šä½¿ç”¨çš„ ï¼Œä¸º0 æ˜¯æœ€å¤§é™åº¦ä¸ç”¨ï¼Œä¸æ˜¯ä¸€å®šä¸ç”¨ã€‚","like_count":4},{"had_liked":false,"id":240746,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1597051751,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14481953639","product_id":100020901,"comment_content":"æ€»ç»“ï¼š<br>- æŸ¥çœ‹ä½¿ç”¨swapæœ€å¤šçš„è¿›ç¨‹<br>for file in &#47;proc&#47;*&#47;status ; do awk &#39;&#47;VmSwap|Name|^Pid&#47;{printf $2 &quot; &quot; $3}END{ print &quot;&quot;}&#39; $file; done | sort -k 3 -n -r | head<br><br>- å…³é—­swap:<br>swapoff -a<br><br>- å…³é—­swapå†é‡æ–°æ‰“å¼€<br>swapoff -a &amp;&amp; swapon -a<br><br>-å‘½ä»¤å¯ä»¥ç›´æ¥å°†è¿›ç¨‹æŒ‰ç…§swapä½¿ç”¨é‡æ’åºæ˜¾ç¤º<br>smem --sort swap","like_count":3},{"had_liked":false,"id":56742,"user_name":"æµè½¬åƒå›","can_delete":false,"product_type":"c1","uid":1219002,"ip_address":"","ucode":"30E4BEB47581AA","user_header":"https://static001.geekbang.org/account/avatar/00/12/99/ba/f8db012f.jpg","comment_is_top":false,"comment_ctime":1546533380,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14431435268","product_id":100020901,"comment_content":"æ‰“å¡ï¼Œè€å¸ˆè¿™ä¹ˆæ™šè¿˜åœ¨æ›´æ–°ä¸“æ ï¼Œè‡´æ•¬ï¼","like_count":3},{"had_liked":false,"id":132788,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/619e3e48.jpg","comment_is_top":false,"comment_ctime":1568219465,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10158154057","product_id":100020901,"comment_content":"ä¸ºä½•æˆ‘è¯•ç”¨watch -d  grep -A 15 &#39;Normal&#39; &#47;proc&#47;zoneinfoä¹‹åè¾“å‡ºå…¨æ˜¯0å‘€???","like_count":2},{"had_liked":false,"id":355229,"user_name":"å‡Œç©ºé£èµ·çš„å‰ªåˆ€è…¿","can_delete":false,"product_type":"c1","uid":1243680,"ip_address":"åŒ—äº¬","ucode":"16FBBF4A3B54C6","user_header":"https://static001.geekbang.org/account/avatar/00/12/fa/20/0f06b080.jpg","comment_is_top":false,"comment_ctime":1661214825,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5956182121","product_id":100020901,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼åœ¨å†…å­˜èµ„æºç´§å¼ æ—¶ï¼ŒLinux é€šè¿‡ç›´æ¥å†…å­˜å›æ”¶å’Œå®šæœŸæ‰«æçš„æ–¹å¼ï¼Œæ¥é‡Šæ”¾æ–‡ä»¶é¡µå’ŒåŒ¿åé¡µï¼Œä»¥ä¾¿æŠŠå†…å­˜åˆ†é…ç»™æ›´éœ€è¦çš„è¿›ç¨‹ä½¿ç”¨ã€‚<br>è¿™ä¸ªå®šæœŸæ‰«æçš„å‘¨æœŸæ˜¯å¤šå°‘ï¼Ÿ","like_count":1},{"had_liked":false,"id":133645,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1246017,"ip_address":"","ucode":"6856180D7B2525","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/41/ba59e1ee.jpg","comment_is_top":false,"comment_ctime":1568627461,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5863594757","product_id":100020901,"comment_content":"é‡åˆ°ç±»ä¼¼çš„æƒ…å†µ.<br>è™šæ‹Ÿæœº,CentOS 7.4,4Gå†…å­˜,1G SWAPå¤§å°,swappinessè®¾ç½®ä¸º60,æ‰§è¡Œdd,swapæ²¡æœ‰ä»€ä¹ˆå˜åŒ–.","like_count":1},{"had_liked":false,"id":64845,"user_name":"å¦‚æœ","can_delete":false,"product_type":"c1","uid":1320638,"ip_address":"","ucode":"138A3EEEE50850","user_header":"","comment_is_top":false,"comment_ctime":1548923330,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5843890626","product_id":100020901,"comment_content":"DAY20ï¼Œæ‰“å¡","like_count":1},{"had_liked":false,"id":56807,"user_name":"Days","can_delete":false,"product_type":"c1","uid":1317834,"ip_address":"","ucode":"4DDB1CD8F493E1","user_header":"https://static001.geekbang.org/account/avatar/00/14/1b/ca/9afb89a2.jpg","comment_is_top":false,"comment_ctime":1546563081,"is_pvip":false,"replies":[{"id":"21160","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","comment_id":56807,"uid":"1001282","ip_address":"","utype":1,"ctime":1547125147,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5841530377","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·é—®å¦‚æœå…³é—­swapåˆ†åŒºï¼Œswappingé…ç½®æ˜¯ä¸æ˜¯æ— æ•ˆçš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435245,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547125147,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56801,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1546562862,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5841530158","product_id":100020901,"comment_content":"æ‰“å¡day21<br>æŒ‰æˆ‘çš„ç†è§£ï¼Œswapnessåªæ˜¯å‡ ç‡ï¼Œå¹¶ä¸æ„å‘³ç€ä¸€å®šï¼Œæ‰€ä»¥è¿˜æ˜¯ä¼šå‘ç”ŸåŒ¿åé¡µäº¤æ¢ï¼Œåªæ˜¯å‡ ç‡å°ç‚¹","like_count":1},{"had_liked":false,"id":359056,"user_name":"æ–Œå­","can_delete":false,"product_type":"c1","uid":1305393,"ip_address":"åŒ—äº¬","ucode":"602804C685CFAE","user_header":"https://static001.geekbang.org/account/avatar/00/13/eb/31/2768a6a1.jpg","comment_is_top":false,"comment_ctime":1665210233,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665210233","product_id":100020901,"comment_content":"åšè¯•éªŒçš„æ—¶å€™ä¸ºä»€ä¹ˆæˆ‘çš„kbbufferså¹¶æ²¡æœ‰å¢é•¿å¤ªå¤§ï¼Œåè€Œæ˜¯kbcommitå¢é•¿å¾ˆå¿«<br>02:21:44 PM  kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty<br>02:21:45 PM  361.6M    131.2M      3.3G     55.7%    818.2M    952.4M      0.0k<br>","like_count":0},{"had_liked":false,"id":321006,"user_name":"Jason Wong","can_delete":false,"product_type":"c1","uid":2790451,"ip_address":"","ucode":"0DA0D724B8F8D6","user_header":"https://static001.geekbang.org/account/avatar/00/2a/94/33/4becb05a.jpg","comment_is_top":false,"comment_ctime":1636617178,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636617178","product_id":100020901,"comment_content":"å¼€å¯ Swap åï¼Œä½ å¯ä»¥è®¾ç½® &#47;proc&#47;sys&#47;vm&#47;min_free_kbytes ï¼Œæ¥è°ƒæ•´ç³»ç»Ÿå®šæœŸå›æ”¶å†…å­˜çš„é˜ˆå€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½® &#47;proc&#47;sys&#47;vm&#47;swappiness ï¼Œæ¥è°ƒæ•´æ–‡ä»¶é¡µå’ŒåŒ¿åé¡µçš„å›æ”¶å€¾å‘ã€‚<br>----è¿™2é¡¹è®¾ç½®åªæ˜¯è®©å†…å­˜å›æ”¶åˆ°swapï¼Œè¿™æ ·swapä¸æ˜¯ä¼šä¸€ç›´å˜å¤§ï¼Ÿç”±è°æ¥å›æ”¶swapå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":295879,"user_name":"Lam","can_delete":false,"product_type":"c1","uid":2597783,"ip_address":"","ucode":"6BDC4B9055BDE9","user_header":"https://static001.geekbang.org/account/avatar/00/27/a3/97/139eb54c.jpg","comment_is_top":false,"comment_ctime":1622627761,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622627761","product_id":100020901,"comment_content":"$ free -m<br>             total       used       free     shared    buffers     cached<br>Mem:         31708      31465        242      14189        178      29689<br>-&#47;+ buffers&#47;cache:       1597      30110<br>Swap:        15919        624      15295<br><br>---<br>è¯·é—®ä¸ºä»€ä¹ˆOracleæ•°æ®åº“æœåŠ¡å™¨ä¸Šå†…å­˜æ€»æ˜¯è¢«è€—å°½å‘¢ï¼Œä¸”ä½¿ç”¨äº†å°‘é‡swapï¼Œcacheå å¤§å¤´ï¼Œæ˜¯Oracleä¸ºäº†æé«˜è¯»å†™æ€§èƒ½è€Œå¤§é‡ä½¿ç”¨cacheå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":267660,"user_name":"è°¢å“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":2326880,"ip_address":"","ucode":"5AADE70B5AFE27","user_header":"https://static001.geekbang.org/account/avatar/00/23/81/60/71ed6ac7.jpg","comment_is_top":false,"comment_ctime":1607863806,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607863806","product_id":100020901,"comment_content":"è‚¯å®šä¼šç»§ç»­ä½¿ç”¨swapï¼Œswappinessåªæ˜¯æ¢å‡ºanno memoryä¸page memoryçš„å€¾å‘ï¼Œä¸º0æ—¶ï¼Œåœ¨ä½äºhigh memoryçš„æ°´ä½æ—¶å°±å¼€å§‹æ¢å‡ºpage memoryåˆ°swap","like_count":0},{"had_liked":false,"id":245431,"user_name":"è±†è±†","can_delete":false,"product_type":"c1","uid":1745589,"ip_address":"","ucode":"249C55D3481682","user_header":"https://static001.geekbang.org/account/avatar/00/1a/a2/b5/c68d9439.jpg","comment_is_top":false,"comment_ctime":1598943089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598943089","product_id":100020901,"comment_content":"smem åœ¨centos  8  ä¸Šé¢æ²¡æ³•åœ¨ä½¿ç”¨äº†","like_count":0},{"had_liked":false,"id":245426,"user_name":"æ­¤å·ç”¨æ¥çœ‹æ–°é—»","can_delete":false,"product_type":"c1","uid":2152758,"ip_address":"","ucode":"D74C189B6922C0","user_header":"","comment_is_top":false,"comment_ctime":1598942288,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598942288","product_id":100020901,"comment_content":"æˆ‘è¿™è¾¹æ˜¯å§‹ç»ˆæ²¡æœ‰å‘ç”Ÿå¾ˆå¤§çš„swapï¼Œzoneinfoå€¼ æ˜¯è¿™æ ·çš„Node 0, zone   Normal<br>  pages free     120401<br>        min\t 4067<br>        low\t 5083<br>        high     6100<br>        scanned  0<br>        spanned  262144<br>        present  262144<br>        managed  241060<br>è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":244644,"user_name":"czkk","can_delete":false,"product_type":"c1","uid":1516278,"ip_address":"","ucode":"56EE189CD243C7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/5TeftklBIoiaslVT9uNqz1aiasOamDZOlawaaicfEibRloiamLVQpg7o3EmlxY0ALAJwA0SUkRYp0PO3mExibokmpgEQ/132","comment_is_top":false,"comment_ctime":1598602824,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1598602824","product_id":100020901,"comment_content":"è¯·é—®ä¸‹è€å¸ˆï¼Œæˆ‘çš„ddå‘½ä»¤æ‰§è¡Œå¾ˆå¿«å°±ç»“æŸäº†ï¼Œè°ƒæ•´ddå‘½ä»¤çš„å‚æ•°ä¹Ÿä¾æ—§å¾ˆå¿«ï¼Œå¯¼è‡´æˆ‘sarå‘½ä»¤çœ‹swapä¸€ç›´æ˜¯0ï¼Œè¯·é—®æ€ä¹ˆè§£å†³ï¼Ÿ","like_count":0},{"had_liked":false,"id":241359,"user_name":"Hulw","can_delete":false,"product_type":"c1","uid":2079396,"ip_address":"","ucode":"F58E46802DE4D4","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ba/a4/2db8b806.jpg","comment_is_top":false,"comment_ctime":1597278605,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597278605","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®åœ¨å®é™…ä½¿ç”¨ç¯å¢ƒä¸­å‡ºç°commitç™¾åˆ†æ¯”åˆ°è¾¾2000ï¼Œè¿™ç§æƒ…å†µæ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":224412,"user_name":"jorin@zou","can_delete":false,"product_type":"c1","uid":1564869,"ip_address":"","ucode":"A8CEF7CCF33570","user_header":"https://static001.geekbang.org/account/avatar/00/17/e0/c5/c324a7de.jpg","comment_is_top":false,"comment_ctime":1591372075,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1591372075","product_id":100020901,"comment_content":"ä¸ºä»€ä¹ˆåŒ¿åå†…å­˜çš„å›æ”¶å¯¼è‡´ Swap çš„ä½¿ç”¨å¢å¤§?","like_count":0,"discussions":[{"author":{"id":1850207,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/3b/5f/79587afa.jpg","nickname":"ä½•å®¶æ¬¢","note":"","ucode":"D7F597847278EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327721,"discussion_content":"å› ä¸ºåŒ¿åå†…å­˜è¿˜æœ‰ç”¨æ‰€ä»¥ä¸æ˜¯çœŸçš„å›æ”¶ï¼Œåªæ˜¯å¡åˆ°swapåŒºä¸­äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605926411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219316,"user_name":"Yong","can_delete":false,"product_type":"c1","uid":1912653,"ip_address":"","ucode":"0ADA75C5C68619","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL3OaibxsOia5ZET1iaBsPwDM6NS43lAUTdItqkwZ66fGaaXtjOQYL73IsvY0foscUZlkaZSQPPQNexA/132","comment_is_top":false,"comment_ctime":1589988043,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589988043","product_id":100020901,"comment_content":"æ‰“å¡ï¼Œæ–°getåˆ°å‘½ä»¤fallocate","like_count":0},{"had_liked":false,"id":193866,"user_name":"linker","can_delete":false,"product_type":"c1","uid":1803259,"ip_address":"","ucode":"6C5799F2FC2C82","user_header":"https://static001.geekbang.org/account/avatar/00/1b/83/fb/621adceb.jpg","comment_is_top":false,"comment_ctime":1584975274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584975274","product_id":100020901,"comment_content":"ç»æµ‹è¯•è¿˜æ˜¯ä¼šå‘ç”Ÿswap","like_count":0},{"had_liked":false,"id":189409,"user_name":"åˆ˜å‹æ·™","can_delete":false,"product_type":"c1","uid":1620058,"ip_address":"","ucode":"97F3A69A308313","user_header":"","comment_is_top":false,"comment_ctime":1584513029,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584513029","product_id":100020901,"comment_content":"D9 æ‰“å¡","like_count":0},{"had_liked":false,"id":148469,"user_name":"è€¿é•¿å­¦","can_delete":false,"product_type":"c1","uid":1309948,"ip_address":"","ucode":"C7A262812854D4","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/fc/1e235814.jpg","comment_is_top":false,"comment_ctime":1573012681,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573012681","product_id":100020901,"comment_content":"è€å¸ˆï¼Œæœ€è¿‘é‡åˆ°ç”Ÿäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œæœ‰ç‚¹ç–‘æƒ‘ï¼Œä»å†…å­˜ç¯‡ä¸­äº†è§£åˆ°ï¼Œå†…å­˜å›æ”¶æœ‰ä¸¤ç§æ–¹å¼ï¼š1ï¼‰kswapdè¿›ç¨‹é€šè¿‡&#47;proc&#47;sys&#47;vm&#47;min_free_kbytesä¸­å®šä¹‰çš„å€¼ï¼›2ï¼‰é€šè¿‡å†…å­˜å›æ”¶è„é¡µï¼Œåˆ¤æ–­æ˜¯&#47;proc&#47;zoneinfoæ–‡ä»¶ä¸­å®šä¹‰çš„å€¼ã€‚ç°åœ¨å‘ç°ä¸€ä¸ªç°è±¡ï¼Œå‰©ä½™å†…å­˜éƒ½å¤§äºä¸¤ä¸ªæ–‡ä»¶ä¸­çš„pages_highï¼Œä½†æ˜¯swapçªç„¶å¢å¤§ï¼Œè¿™ä¸ªæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘çš„swappinesså€¼æ˜¯1ï¼Œè¿™ç§æƒ…å†µä¸‹å†…å­˜å›æ”¶æ˜¯é€šè¿‡ä»€ä¹ˆæœºåˆ¶åˆ¤æ–­çš„å‘¢ï¼Ÿä¸€ç›´æƒ³ä¸é€š","like_count":0},{"had_liked":false,"id":134067,"user_name":"scorpiozj","can_delete":false,"product_type":"c1","uid":1031677,"ip_address":"","ucode":"C66EA76809F9BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/bd/fd/3f5d5db5.jpg","comment_is_top":false,"comment_ctime":1568731591,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568731591","product_id":100020901,"comment_content":"fallocateå¤±è´¥çš„å¯ä»¥çœ‹ï¼š http:&#47;&#47;t.cn&#47;AiEBH7PC<br><br>swapinessè®¾ç½®ä¸º0ï¼Œç†è®ºä¸Šè¿˜æ˜¯ä¼šå‘ç”Ÿï¼›å®é™…æµ‹è¯•æ—¶ swapæ²¡æœ‰å‘ç”Ÿï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æ¡ä»¶æœªè§¦å‘å¯¼è‡´ã€‚","like_count":0},{"had_liked":false,"id":131113,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1567645602,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567645602","product_id":100020901,"comment_content":"Jvmè®¾ç½®å’Œç‰©ç†å†…å­˜ä¸€æ ·å¤§å°ï¼Œä¸ºå•¥swapä½¿ç”¨æ¯”è¾ƒå¤šï¼Ÿ","like_count":0},{"had_liked":false,"id":99361,"user_name":"å¹¸è¿çš„äºº","can_delete":false,"product_type":"c1","uid":1490198,"ip_address":"","ucode":"F0FF3C3112A7A8","user_header":"https://static001.geekbang.org/account/avatar/00/16/bd/16/c940b1a3.jpg","comment_is_top":false,"comment_ctime":1559199572,"is_pvip":true,"replies":[{"id":"35812","content":"å—¯ï¼Œäº‘ç¯å¢ƒä¸€èˆ¬éƒ½æ˜¯å…³é—­swapï¼Œé¿å…æå¦‚æ¢å‡ºå¸¦æ¥çš„æ€§èƒ½é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1559280142,"ip_address":"","comment_id":99361,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1559199572","product_id":100020901,"comment_content":"è€å¸ˆï¼Œé—®ä¸€ä¸ªé—®é¢˜<br>ç°åœ¨çš„å…¬æœ‰äº‘ä¸»æœºæˆ–è€…æ˜¯ç§æœ‰äº‘çš„è™šæ‹Ÿæœºï¼Œswapé»˜è®¤æ˜¯0ï¼Œè¿™ç§æƒ…å†µä¸‹æ˜¯å¦è¿˜ä¼šå‡ºç°swap inå’Œswap outå‘¢ï¼Ÿæˆ‘åœ¨ç•™è¨€ä¸­ä¹Ÿçœ‹åˆ°å…¶ä»–åŒå­¦é—®è¿‡ç›¸ä¼¼çš„é—®é¢˜ï¼Œä½†æ²¡æœ‰çœ‹åˆ°ç­”æ¡ˆï¼Œè¯·å¸®å¿™è§£é‡Šä¸€ä¸‹ï¼Ÿè°¢è°¢ã€‚<br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452076,"discussion_content":"å—¯ï¼Œäº‘ç¯å¢ƒä¸€èˆ¬éƒ½æ˜¯å…³é—­swapï¼Œé¿å…æå¦‚æ¢å‡ºå¸¦æ¥çš„æ€§èƒ½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559280142,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73283,"user_name":"Adam","can_delete":false,"product_type":"c1","uid":1305633,"ip_address":"","ucode":"338BA720880E4F","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/21/b0fe1bfd.jpg","comment_is_top":false,"comment_ctime":1551850937,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1551850937","product_id":100020901,"comment_content":"ES å¯ä»¥é€šè¿‡è®¾ç½®é”å®šå†…å­˜ã€‚","like_count":0},{"had_liked":false,"id":60644,"user_name":"zshanjun","can_delete":false,"product_type":"c1","uid":1182120,"ip_address":"","ucode":"0C99216D6FBDB8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oCx7GX9P4w5cml1cpbFD1x21Biad3MLCTOhTPJvicRW3xp9C8xTgdiaOSdpFyvibKSfcD1LL4miaT7VtqqKms6rgujg/132","comment_is_top":false,"comment_ctime":1547522394,"is_pvip":true,"replies":[{"id":"22305","content":"ä»”ç»†çœ‹çœ‹ï¼Œ1048576 bytes (1.0 MB, 1.0 MiB) copied","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548249001,"ip_address":"","comment_id":60644,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1547522394","product_id":100020901,"comment_content":"å¤§æ–‡ä»¶è¯»å–ç¬é—´å®Œæˆï¼Œæ²¡æœ‰è§‚å¯Ÿåˆ°å†…å­˜çš„å˜åŒ–ï¼š<br>root@linux-1:~&#47;go&#47;bin# dd if=&#47;dev&#47;sda1 of=&#47;dev&#47;null bs=16G count=2048<br>0+1 records in<br>0+1 records out<br>1048576 bytes (1.0 MB, 1.0 MiB) copied, 0.00693471 s, 151 MB&#47;s","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436568,"discussion_content":"ä»”ç»†çœ‹çœ‹ï¼Œ1048576 bytes (1.0 MB, 1.0 MiB) copied","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548249001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1356083,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b1/33/8993eae0.jpg","nickname":"é»„å±•å¿—","note":"","ucode":"EBA342CD89072D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46017,"discussion_content":"æˆ‘æ˜¯0.5ç§’å®Œæˆ\n[root@app180-110 ~]# dd if=/dev/sda1 of=/dev/null bs=1G count=2048\n1+0 records in\n1+0 records out\n1073741824 bytes (1.1 GB) copied, 0.547584 s, 2.0 GB/s","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573111272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58513,"user_name":"berryfl","can_delete":false,"product_type":"c1","uid":1014479,"ip_address":"","ucode":"E9896F6EBC9A72","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLz5feictl6uxOFeth2zrO7LPOZKk0mvzIBYD9ic5EyGB39dicBbkYsIYoqqBsibJFo0fDicxN0CUt2dAQ/132","comment_is_top":false,"comment_ctime":1547098344,"is_pvip":false,"replies":[{"id":"21148","content":"å—¯ï¼Œæ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1547124122,"ip_address":"","comment_id":58513,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547098344","product_id":100020901,"comment_content":"&#47;proc&#47;*&#47;statusä¼šåŒ¹é…åˆ°selfä¹‹ç±»çš„ç‰¹æ®Šç›®å½•ï¼ŒæŠŠåŒ¹é…çš„éƒ¨åˆ†å†™å¤æ‚ç‚¹å¯ä»¥é™åˆ¶åˆ°ä»…æ•°å­—ï¼Œä¾‹å¦‚+([0-9])","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436102,"discussion_content":"å—¯ï¼Œæ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547124122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57634,"user_name":"ç™½å","can_delete":false,"product_type":"c1","uid":1315666,"ip_address":"","ucode":"FC9BACFCA6E8C1","user_header":"https://static001.geekbang.org/account/avatar/00/14/13/52/db1b01fc.jpg","comment_is_top":false,"comment_ctime":1546855243,"is_pvip":false,"replies":[{"id":"21002","content":"swapå¼€äº†å—ï¼Ÿswapinessé…ç½®çš„ä»€ä¹ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1547029255,"ip_address":"","comment_id":57634,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1546855243","product_id":100020901,"comment_content":"æˆ‘å†™çš„ddå‚æ•°å°±æ˜¯å¤§æ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ï¼Œä¸€å…±å°±20gå­˜å‚¨çš„è™šæ‹Ÿæœºï¼Œä¼ çš„æ˜¯&#47;dev&#47;rootæ–‡ä»¶ç³»ç»Ÿ æœ‰10g éœ€è¦å†™å¥½ä¹…ï¼Œå®éªŒç°è±¡å’Œæ‚¨æè¿°çš„å·®ä¸å¤šï¼Œä½†æ˜¯swapå°±æ˜¯æ²¡å˜åŒ–","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435674,"discussion_content":"swapå¼€äº†å—ï¼Ÿswapinessé…ç½®çš„ä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547029255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1246017,"avatar":"https://static001.geekbang.org/account/avatar/00/13/03/41/ba59e1ee.jpg","nickname":"Ethan","note":"","ucode":"6856180D7B2525","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12999,"discussion_content":"é‡åˆ°ç±»ä¼¼çš„æƒ…å†µ.\nè™šæ‹Ÿæœº,CentOS 7.4,4Gå†…å­˜,1G SWAPå¤§å°,swappinessè®¾ç½®ä¸º60,æ‰§è¡Œdd,swapæ²¡æœ‰ä»€ä¹ˆå˜åŒ–.\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568627381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57487,"user_name":"nemo","can_delete":false,"product_type":"c1","uid":1148570,"ip_address":"","ucode":"5E6926A3404A6F","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/9a/4231fb93.jpg","comment_is_top":false,"comment_ctime":1546821908,"is_pvip":false,"replies":[{"id":"20767","content":"ç”¨ç³»ç»Ÿé»˜è®¤å€¼å°±å¯ä»¥ï¼Œé™¤éå‘ç°é—®é¢˜æ‰å»ºè®®è°ƒæ•´","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1546854251,"ip_address":"","comment_id":57487,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546821908","product_id":100020901,"comment_content":"è¯·é—®min_free_kbytesä¸€èˆ¬è®¾ç½®å¤šå°‘ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435601,"discussion_content":"ç”¨ç³»ç»Ÿé»˜è®¤å€¼å°±å¯ä»¥ï¼Œé™¤éå‘ç°é—®é¢˜æ‰å»ºè®®è°ƒæ•´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546854251,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57471,"user_name":"nemo","can_delete":false,"product_type":"c1","uid":1148570,"ip_address":"","ucode":"5E6926A3404A6F","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/9a/4231fb93.jpg","comment_is_top":false,"comment_ctime":1546819811,"is_pvip":false,"replies":[{"id":"20768","content":"ç³»ç»Ÿé»˜è®¤å€¼å°±å¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1546854263,"ip_address":"","comment_id":57471,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546819811","product_id":100020901,"comment_content":"è¯·æ•™ä¸‹min_free_kbytesä¸€èˆ¬è®¾ç½®å¤šå°‘ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435592,"discussion_content":"ç³»ç»Ÿé»˜è®¤å€¼å°±å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546854263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57406,"user_name":"dexter","can_delete":false,"product_type":"c1","uid":1315252,"ip_address":"","ucode":"DD51207438FBD6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEL5xnfuicbtRz4F87AAjZX6oCEjMtYiaIu4iaQichQmy0vEBA6Sumic1RDvUCeuBEqj6iatnt2kENbKYmuw/132","comment_is_top":false,"comment_ctime":1546782620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546782620","product_id":100020901,"comment_content":"å½“å‰å…¨éƒ¨è¿›ç¨‹VmSwapçš„ä½¿ç”¨é‡çš„æ€»å’Œæ˜¯ä¸æ˜¯å°±æ˜¯freeé‡Œé¢swapä¸­çš„usedçš„ä½¿ç”¨é‡ï¼Ÿ","like_count":0},{"had_liked":false,"id":57367,"user_name":"è…¾è¾¾","can_delete":false,"product_type":"c1","uid":1079876,"ip_address":"","ucode":"72F9CFBA44FDEE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL9hlAIKQ1sGDu16oWLOHyCSicr18XibygQSMLMjuDvKk73deDlH9aMphFsj41WYJh121aniaqBLiaMNg/132","comment_is_top":false,"comment_ctime":1546766214,"is_pvip":false,"replies":[{"id":"20770","content":"è¯•è¯•è°ƒæ•´ dd å‚æ•°ï¼Œå¯èƒ½æ˜¯ä½ çš„å†…å­˜å¤§å¾—å¤šï¼Œå¯ä»¥å¤šè¯»ä¸€äº›æ•°æ®","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1546854608,"ip_address":"","comment_id":57367,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546766214","product_id":100020901,"comment_content":"ç¬¬ä¸€æ¬¡å¯åŠ¨è™šæ‹ŸæœºæŒ‰ç…§æ­¥éª¤æ“ä½œï¼Œswpusedå‘ç°é«˜èµ·æ¥å¥½å¤šï¼Œåæ¥å‡ æ¬¡ä¸çŸ¥é“ä¸ºä»€ä¹ˆswpusedé«˜ä¸èµ·æ¥äº†ï¼Œå§‹ç»ˆç»´æŒ2%ä¸Šä¸‹ã€‚ç¬¬ä¸€æ¬¡å’Œåé¢å‡ æ¬¡çš„å·®å¼‚å°±æ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œåï¼Œå»å®‰è£…äº†smemï¼Œç„¶åé‡å¯äº†æœºå™¨å‡ æ¬¡ï¼Œç³»ç»Ÿçš„é»˜è®¤å‚æ•°éƒ½æ²¡æ”¹è¿‡","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435548,"discussion_content":"è¯•è¯•è°ƒæ•´ dd å‚æ•°ï¼Œå¯èƒ½æ˜¯ä½ çš„å†…å­˜å¤§å¾—å¤šï¼Œå¯ä»¥å¤šè¯»ä¸€äº›æ•°æ®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546854608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57334,"user_name":"ç™½å","can_delete":false,"product_type":"c1","uid":1315666,"ip_address":"","ucode":"FC9BACFCA6E8C1","user_header":"https://static001.geekbang.org/account/avatar/00/14/13/52/db1b01fc.jpg","comment_is_top":false,"comment_ctime":1546754331,"is_pvip":false,"replies":[{"id":"20773","content":"è¯¦ç»†çš„ç°è±¡æ˜¯ä»€ä¹ˆï¼Ÿè¯•è¯•è°ƒå¤§ddçš„å‚æ•°è¯»æ›´å¤šçš„æ•°æ®ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1546854778,"ip_address":"","comment_id":57334,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546754331","product_id":100020901,"comment_content":"åœ¨centosç³»ç»Ÿæ“ä½œè¿˜æ˜¯ä¼šæœ‰åŒºåˆ«ï¼Œæˆ‘çš„swapåˆ†çš„2Gï¼Œä½†æ˜¯ä¸€ç‚¹éƒ½æ²¡æœ‰ç”¨åˆ°ï¼Œkbswpfreeæ€»æ˜¯ä¸å˜ï¼Œå³ä½¿memusedè¾¾åˆ°äº†98%ä»¥ä¸Šï¼Œå°±çœ‹åˆ°äº†kbswpfreeçš„æ³¢åŠ¨ã€‚","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435527,"discussion_content":"è¯¦ç»†çš„ç°è±¡æ˜¯ä»€ä¹ˆï¼Ÿè¯•è¯•è°ƒå¤§ddçš„å‚æ•°è¯»æ›´å¤šçš„æ•°æ®ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546854778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57283,"user_name":"é£é£˜ï¼Œå¾ç‹¬æ€","can_delete":false,"product_type":"c1","uid":1131032,"ip_address":"","ucode":"4DF0E7DC22EE53","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/18/edc1b373.jpg","comment_is_top":false,"comment_ctime":1546707235,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546707235","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":57232,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1546693499,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546693499","product_id":100020901,"comment_content":"ç°åœ¨å˜åŒ–ä¸å¤§ï¼ŒæŒ‰ç…§æ¯”ä¾‹æ“ä½œ","like_count":0},{"had_liked":false,"id":57230,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1546692192,"is_pvip":false,"replies":[{"id":"22287","content":"åº”è¯¥æ˜¯sarç‰ˆæœ¬é—®é¢˜ï¼Œå‡çº§åˆ°æ–°ç‰ˆè¯•è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1548246459,"ip_address":"","comment_id":57230,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546692192","product_id":100020901,"comment_content":"centos æ²¡æœ‰kbactive å’Œkbinact æ´»è·ƒå†…éƒ¨çš„å’Œéæ´»è·ƒå†…å­˜çš„æƒ…å†µ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435472,"discussion_content":"åº”è¯¥æ˜¯sarç‰ˆæœ¬é—®é¢˜ï¼Œå‡çº§åˆ°æ–°ç‰ˆè¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548246459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57076,"user_name":"Geek_37593b","can_delete":false,"product_type":"c1","uid":1333821,"ip_address":"","ucode":"9C0CD7C30CA62C","user_header":"https://static001.geekbang.org/account/avatar/00/14/5a/3d/1a1754f2.jpg","comment_is_top":false,"comment_ctime":1546615009,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546615009","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":56916,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1546579134,"is_pvip":false,"replies":[{"id":"21315","content":"ğŸ‘ ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1547259177,"ip_address":"","comment_id":56916,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546579134","product_id":100020901,"comment_content":"[D20æ‰“å¡]<br>å¥½åƒ swappiness é…ç½®ä¸º0ä¹Ÿä¼šå‘ç”Ÿswap.<br>è¿™ç¯‡æ–‡ç« ä¸­æœ‰å…·ä½“çš„åˆ†æ: http:&#47;&#47;www.yunweipai.com&#47;archives&#47;12863.html<br>```<br>å¦‚æœæ˜¯å…¨å±€é¡µå›æ”¶ï¼Œå¹¶ä¸”å½“å‰ç©ºé—²å†…å­˜å’Œæ‰€æœ‰file basedé“¾è¡¨pageæ•°ç›®çš„åŠ å’Œéƒ½å°äºç³»ç»Ÿçš„high watermarkï¼Œåˆ™å¿…é¡»è¿›è¡ŒåŒ¿åé¡µå›æ”¶ï¼Œåˆ™å¿…ç„¶ä¼šå‘ç”Ÿswap,å¯ä»¥çœ‹åˆ°è¿™é‡Œswappinessçš„å€¼å¦‚ä½•è®¾ç½®æ˜¯å®Œå…¨æ— å…³çš„ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆå…¶ä¸º0ï¼Œç³»ç»Ÿä¹Ÿä¼šè¿›è¡Œswapçš„åŸå› <br>```<br>ç”±äºæš‚æ—¶ç”¨ä¸ä¸Šswap,æ‰€ä»¥è¿™æœŸå°±æ²¡å®é™…æ“ä½œ. è¿˜æœ‰å¥½å¤šä¸“æ è¦å­¦ä¹ .ğŸ™ˆ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435311,"discussion_content":"ğŸ‘ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547259177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56855,"user_name":"åˆ’æ—¶ä»£","can_delete":false,"product_type":"c1","uid":1061454,"ip_address":"","ucode":"9554CE2F83B77F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2o1Izf2YyJSnnI0ErZ51pYRlnrmibqUTaia3tCU1PjMxuwyXSKOLUYiac2TQ5pd5gNGvS81fVqKWGvDsZLTM8zhWg/132","comment_is_top":false,"comment_ctime":1546569089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546569089","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":56746,"user_name":"æ¹–æ¹˜å¿—","can_delete":false,"product_type":"c1","uid":1285578,"ip_address":"","ucode":"C8B069B3AD4FEA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erJR5Kj0Xm6LykFHLaWqHjQiaroVxgdoGI7uHEGz2D3PfibWNkBYP23QLzFmcuicgKLbqUch0ZJ2ZNOA/132","comment_is_top":false,"comment_ctime":1546534273,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546534273","product_id":100020901,"comment_content":"D20","like_count":0}]}