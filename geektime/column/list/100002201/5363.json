{"id":5363,"title":"64 | 区块链技术细节：哈希算法","content":"<p>你好，我是陈皓，网名左耳朵耗子。</p>\n<p>对于计算机来说，区块链就像一个单向链表，一个数据块中保存着三个信息。</p>\n<ul>\n<li>真正的数据。</li>\n<li>自己的地址（或是ID）。</li>\n<li>前一个数据块的地址。</li>\n</ul>\n<p>这样，通过追溯前一个块的地址，把所有的数据块存成了一条链。所以，我们叫其BlockChain。如下图所示。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/1c/62/1c75fed53ee023c353a31616d2b29e62.png?wh=864*210?wh=864*210\" alt=\"\" /></p>\n<p>每个数据块的“地址”的编码使用了计算机上的一个算法，计算机圈内人士把这个算法叫Secure Hash。有人音译为“安全哈希”，也有人意译为“安全散列”。在计算机应用中，hash算法主要有几个功能。</p>\n<ul>\n<li>\n<p>用来生成唯一标识一个数据块的ID（身份证），这个ID几乎不能重复。</p>\n</li>\n<li>\n<p>用来做数据的特征码。只要数据中一个bit的数据出现更改，那么整个hash值就完全不一样了。而且数学上保证了，我们无法通过hash值反推回原数据。</p>\n</li>\n</ul>\n<p>于是，很多公司在互联网上发布信息或软件的时候，都会带上一个Checksum（校验码）。你只要把整个文件的数据传入到那个特定的hash算法中，就会得到一串很长的字符串。如果和官方发布的Checksum字符串不一样，那么就说明信息或文件内容被人更改或是信息残缺了。因此，也被应用在“数字签名”中。</p>\n<p>在计算机世界里，有两个很著名的hash算法，一个叫MD5（<a href=\"https://en.wikipedia.org/wiki/MD5\">Wikipedia链接</a>），一个叫SHA-2（<a href=\"https://en.wikipedia.org/wiki/SHA-2\">Wikipedia链接</a>）， 区块链用的是SHA-256这个算法。</p>\n<!-- [[[read_end]]] -->\n<p>下面是一个示例。</p>\n<ul>\n<li>\n<p>对&quot;chen hao&quot;这个信息计算MD5值得到 9824df83b2d35172ef5eb63a47a878eb（一个16进制数）。</p>\n</li>\n<li>\n<p>如果对 “chen hao&quot;做一个字符的修改，将字母&quot;o&quot;改成数字&quot;0”，即 “chen ha0”，计算出来的MD5值就成了 d521ce0616359df7e16b20486b78d2a8。可以看到，这和之前的MD5值完全不一样了。</p>\n</li>\n</ul>\n<p>于是，我们就可以利用hash算法的这个特性来对数据做&quot;数字签名&quot;。也就是说，我将&quot;数据&quot;和其&quot;签名&quot;（hash计算值）一起发布，这样可以让收到方来验证数据有没有被修改。</p>\n<p>我们再来看上面那个区块链的图。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/1c/62/1c75fed53ee023c353a31616d2b29e62.png?wh=864*210?wh=864*210\" alt=\"\" /></p>\n<p>对于第一块数据，我们把其“数据集”和“前数据块的hash值 00000a6cba”一起做hash值，得到本区块的地址000007cabfa。然后，下一个区块会把自己的数据和000007cabfa一起做hash，得到000008acbed这个哈希值……如此往复下去。</p>\n<p>根据“被hash的数据中有一个bit被修改了，整个hash就完全不一样了”这个特性，我们知道：</p>\n<ul>\n<li>\n<p>如果前置数据块中的数据改了，那么其hash就会完全不一样了，也就是说你的ID或地址就变了，于是别人就找不到这个数据块了；</p>\n</li>\n<li>\n<p>所以，你还要去修改别人数据块中指向你的地址，但是别人数据块中指向你的地址（ID/hash）变了，也会导致他自己的地址（ID/hash）随之变化。因为他用你的地址生成了自己的地址，这样一来，你就需要把其他人的地址全部改掉。</p>\n</li>\n</ul>\n<p>在这样的连锁反应下，你想要偷偷修改一个bit的难度一下就提高很多。所以，在区块链的世界里，越老的区块越安全也越不容易被人篡改，越新的区块越不安全也越容易被人篡改。</p>\n<h1>比特币的hash算法</h1>\n<p>下面我来简单介绍一下，比特币中区块链的一些细节。下图是区块链的协议格式。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/a9/98/a99ad9de4d156cea9e8ee716c48e0298.png?wh=864*454\" alt=\"\" /></p>\n<p>其中Version，Previous Block Hash，Merkle Root，Timestamp，Difficulty Target 和Nonce这六个数据字段是区块链的区块数据协议头。后面的数据是交易数据，分别是：本块中的交易笔数H和交易列表（最多不能超过1MB，为什么是1MB，后面会说）。</p>\n<p>下面我来说一下区块头中的那六个字段的含义。</p>\n<ul>\n<li>\n<p>Version：当前区块链协议的版本号，4个字节。如果升级了，这个版本号会变。</p>\n</li>\n<li>\n<p>Previous Block Hash：前面那个区块的hash地址。32个字节。</p>\n</li>\n<li>\n<p>Merkle Root：这个字段可以简单理解为是后面交易信息的hash值（后面具体说明一下） 。32个字节。</p>\n</li>\n<li>\n<p>Timestamp：区块生成的时间。这个时间不能早于前面11个区块的中位时间，不能晚于&quot;网络协调时间&quot;——你所连接的所有结点时间的中位数。4个字节。</p>\n</li>\n<li>\n<p>Bits：也就是上图中的Difficulty Tagrget，表明了当前的hash生成的难度（后面会说）。4个字节。</p>\n</li>\n<li>\n<p>Nonce：一个随机值，用于找到满足某个条件的hash值。4字节。</p>\n</li>\n</ul>\n<p>对这六个字段进行hash计算，就可以得到本区块的hash值，也就是其ID或是地址。其hash方式如下（对区块头做两次SHA-256的hash求值）：</p>\n<pre><code>SHA-256(SHA-256 (Block Header))\n</code></pre>\n<p>当然，事情并没有这么简单。比特币对这个hash值是有要求的，其要求是那个Bits字段控制的，然后你可以调整Nonce这个32位整型的值来找到符合条件的hash值。我们把这个事情叫做“挖矿”（在下一篇中，我们会详细讲一下这个事）。</p>\n<h1>关于 Merkle Root</h1>\n<p>前面说到过，可以简单地将Merkle Root理解为交易的hash值。这里，我们具体说一下，比特币的Merkle Root是怎么计算出来的。</p>\n<p>首先，我们知道，比特币的每一笔交易会有三个字段，一个是转出方，一个是转入方，还有一个是金额。那么，我们会对每个交易的这三个字段求hash，然后把交易的hash做两两合并，再求其hash，直到算出最后一个hash值，这就是我们的Merkle Root。</p>\n<p>我画了一个图展示一下这个过程。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/ae/yy/aeee43cfda67490b4ee40daaf367acyy.jpg?wh=1989x1296\" alt=\"\" /><br />\n上面的示意图中有四笔交易，A和B的hash成了Hash-AB， C和D的hash成了Hash-CD，然后再做Hash-AB + Hash-CD 的hash，得到了Hash-ABCD，这就是Merkle Root。整个过程就像一个二叉树一样。</p>\n<p>下图是一个区块链的示意图，来自<a href=\"https://bitcoin.org/bitcoin.pdf\">比特币的白皮书</a>。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/62/5b/627b2acd3eef17785c9c7efcaf594a5b.png?wh=864*343\" alt=\"\" /></p>\n<p>为什么要这样做呢？为什么不是把所有的交易都放在一起做一次hash呢？这不也可以让人无法篡改吗？这样做的好处是——我们把交易数据分成了若干个组。就像上面那个二叉树所表示的一样，我们可以不断地把这个树分成左边的分支和右边的分支，因为它们都被计算过hash值，所以可以很快地校验其中的内容有没有被修改过。</p>\n<p>这至少带来三个好处。</p>\n<ol>\n<li>\n<p>大量的交易数据可以被分成各种尺寸的小组，这样有利于我们整合数据和校验数据。</p>\n</li>\n<li>\n<p>这样的开销在存储和内存上并不大，然而我们可以提高校验一组数据的难易程度。</p>\n</li>\n<li>\n<p>在P2P的无中心化网络上，我们可以把大量数据拆成一个一个小数据片传输，可以提高网络的传输速度。</p>\n</li>\n</ol>\n<p>最后，需要说一下的是，以太坊有三个不同的Merkle Root树。因为以太坊要玩智能合约，所以需要更多的Merkle Root。</p>\n<ul>\n<li>\n<p>一个是用来做交易hash的Merkle Root。</p>\n</li>\n<li>\n<p>一个是用来表示状态State的。因为一个智能合同从初始状态走到最终状态需要有若干步（也就是若干笔交易），每一步都会让合同的状态发生变化，所以需要保存合同的状态。</p>\n</li>\n<li>\n<p>还有一个是用来做交易收据的。主要是用来记录一个智能合约中最终发生的交易信息。在StackExchange上的问题&quot;<a href=\"https://ethereum.stackexchange.com/questions/5888/relationship-between-transaction-trie-and-receipts-trie\">Relationship between Transaction Trie and Receipts Trie</a>&quot;中有相应的说明，你可以前往一看。</p>\n</li>\n</ul>\n<p>以太坊称其为Merkle Patricia Tree（具体细节可参看其<a href=\"https://github.com/ethereum/wiki/wiki/Patricia-Tree\">官方的Wiki</a>）。</p>\n<h1>比特币的交易模型</h1>\n<p>比特币区块中的交易数据，其实也是一个链。为了讲清楚这个链，我们需要了解一下比特币交易中的两个术语，一个是input，一个是output，也就是交易的支出方（input）和收入方（output）。</p>\n<p>在比特币中，一个交易可以有多个output，也就是说我可以把一笔钱汇给多个人，但一个output只能对应一个源的input，还有一个条件就是，output跟input的总数要吻合。</p>\n<p>这里举个例子。假设，Fred给了Alice 2个比特币，Ted给了Alice 3个比特币，这个时候，Alice有5个比特币。然而，大比特币的世界里是没有余额的，所以，对于Alice来说，她只有两个没有花出去的交易，一个是2个比特币，一个是3个比特币。这在比特币中叫UTXO（Unspent Transaction Output）。</p>\n<p>此时，如果Alice想要转给Bob 4个比特币，她发现自己的两个交易中都不够，也不能拆开之前的那两个比特币交易，那么她只能把交易2和交易3当成input，然后把自己和Bob当成output，Bob分得4个，她自己分1个。这样的交易才平衡。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/6c/41/6c82bd5c0bf3535b49f3dbe271480341.png?wh=689*391\" alt=\"\" /></p>\n<p>于是，一笔交易可能会包含大量的Input和Output。因为比特币没有“余额”的概念，所以需要通过多个input来凑，然后output这边还需要给自己找零，给矿工小费。</p>\n<p>这样一来，在比特币交易中，你把钱给了我，我又给了张三，张三给了李四……就这样传递下去，形成了一个交易链。因为还没有花出去，所以就成了UTXO，而系统计算你有没有钱可以汇出去时，只需要查看一下你的UTXO就可以了。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/df/4d/dfd5d623ff27a5e6cfb0e5371822354d.png?wh=864*670\" alt=\"\" /><br />\n(图片来源：<a href=\"https://bitcoin.org/en/developer-guide\">https://bitcoin.org/en/developer-guide</a> )</p>\n<p>UTXO因为没有账户和余额的概念，所以可以并行进行多笔交易。假如你有多个UTXO，你可以进行多笔交易而不需要并行锁。然后其还有匿名性的特征，你可以隐藏自己的交易目的地（通过设置的多个output），而且没有余额意味着是没有状态的。要知道你有多少个比特币，只需要把UTXO的交易记录统计一下就可以知道了。但这也让人比较费解，而且也不利于应用上的开发。以太坊则使用了余额的方式。</p>\n<p>在这一讲中，我先讲述了什么是区块链以及它的核心原理是什么。随后分享了比特币的hash算法，以及Merkle Root是如何计算出来的。最后，介绍了比特币的交易模型。希望对你有帮助。</p>\n<p>文末给出了《区块链技术》系列文章的目录，希望你能在这个列表里找到自己感兴趣的内容。</p>\n<ul>\n<li><a href=\"https://time.geekbang.org/column/article/5197\">区块链的革命性及技术概要</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/5363\">区块链技术细节：哈希算法</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/5438\">区块链技术细节：加密和挖矿</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/5612\">去中心化的共识机制</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/5623\">智能合约</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/5636\">传统金融和虚拟货币</a></li>\n</ul>\n","comments":[{"had_liked":false,"id":5095,"user_name":"杜小琨","can_delete":false,"product_type":"c1","uid":1023348,"ip_address":"","ucode":"FD577B19C381B7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9d/74/353e05c9.jpg","comment_is_top":false,"comment_ctime":1522729719,"is_pvip":false,"replies":[{"id":"1401","content":"我居然写漏了……😓<br><br>1）中本聪经常在代码里放一些不说明的事，这个就是一个。<br><br>2）区块有大小限制容易理解，一个是为了更好地去中心化，因为如果尺寸下限，算力大的可以打包更多的交易，就中心化了。另一个是为了节省网络带宽。<br><br>3）为什么是1M而不是2M，这是中本聪设置的，但他并没有做出解释。","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1522979330,"ip_address":"","comment_id":5095,"utype":1}],"discussion_count":1,"race_medal":0,"score":"203386192631","product_id":100002201,"comment_content":"所以，为什么是1M？","like_count":48,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416601,"discussion_content":"我居然写漏了……😓\n\n1）中本聪经常在代码里放一些不说明的事，这个就是一个。\n\n2）区块有大小限制容易理解，一个是为了更好地去中心化，因为如果尺寸下限，算力大的可以打包更多的交易，就中心化了。另一个是为了节省网络带宽。\n\n3）为什么是1M而不是2M，这是中本聪设置的，但他并没有做出解释。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522979330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5085,"user_name":"逆行","can_delete":false,"product_type":"c1","uid":1001431,"ip_address":"","ucode":"01FAD0A8A34686","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/d7/55a74a8d.jpg","comment_is_top":false,"comment_ctime":1522720923,"is_pvip":false,"replies":[{"id":"1404","content":"Merkle Root 是一组交易的层层hash的结果。","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1522979554,"ip_address":"","comment_id":5085,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27292524699","product_id":100002201,"comment_content":"一次交易完成后，Merkle Root  就会改变，那么每次交易都要重写整个区块链表，那效率太低了吧，是不是我错过了什么细节？","like_count":7,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416596,"discussion_content":"Merkle Root 是一组交易的层层hash的结果。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522979554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":6799,"user_name":"登高","can_delete":false,"product_type":"c1","uid":1068600,"ip_address":"","ucode":"CD40046238BA18","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/38/3faa8377.jpg","comment_is_top":false,"comment_ctime":1524966549,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"18704835733","product_id":100002201,"comment_content":"“”对这五字段进行 hash 计算，就可以得到本区块的 hash 值“”<br><br>数了下，前面介绍了6个，这里写的五个，是笔误吗？","like_count":4},{"had_liked":false,"id":5411,"user_name":"Skysper","can_delete":false,"product_type":"c1","uid":1058800,"ip_address":"","ucode":"164B3CAF81A7C5","user_header":"https://static001.geekbang.org/account/avatar/00/10/27/f0/06ecce19.jpg","comment_is_top":false,"comment_ctime":1523320670,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18703189854","product_id":100002201,"comment_content":"UTXO不太理解 我有多少可交易的比特币是系统从哪里验证的？从区块链追溯下去还是另外有一个存储记录？","like_count":5},{"had_liked":false,"id":5094,"user_name":"jimmy","can_delete":false,"product_type":"c1","uid":1003262,"ip_address":"","ucode":"F7CC7E298AD0C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/fe/7dfe2910.jpg","comment_is_top":false,"comment_ctime":1522727529,"is_pvip":false,"replies":[{"id":"1402","content":"是很牵强","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1522979355,"ip_address":"","comment_id":5094,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18702596713","product_id":100002201,"comment_content":"近期在研究event-sourcing架构，比特币的交易感觉有点像event-sourcing的味道，记录的只是事件，无状态，天然适应分布式，不知道这个类比是否有点牵强","like_count":4,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416600,"discussion_content":"是很牵强","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522979355,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1876823,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/X4ib36ADEvj76XaKD4OUY9k15KqWCAVCwibPicBxz6BBUfDrVolpYInn8zFOw3JBPtVw3L4Lkibaf2eLPemwGKzAXA/132","nickname":"Geek_427d0c","note":"","ucode":"D7A04138C4B8CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286565,"discussion_content":"从这个角度来看是很像event-sourcing。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593228414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5089,"user_name":"Nelson","can_delete":false,"product_type":"c1","uid":1000081,"ip_address":"","ucode":"9760C2B397D170","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/91/aa88985d.jpg","comment_is_top":false,"comment_ctime":1522723247,"is_pvip":true,"replies":[{"id":"1403","content":"不同的交易在不同的UTXO上并行，在同一个上不行。如果用余额来做，则无法并行，上一笔不完成，下一笔无法执行。","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1522979495,"ip_address":"","comment_id":5089,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18702592431","product_id":100002201,"comment_content":"&quot;假如你有多个 UTXO，你可以进行多笔交易而不需要并行锁。&quot;这一句没懂，不会出现一个UTXO被使用两次情况吗？","like_count":4,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416599,"discussion_content":"不同的交易在不同的UTXO上并行，在同一个上不行。如果用余额来做，则无法并行，上一笔不完成，下一笔无法执行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522979495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5651,"user_name":"Donald","can_delete":false,"product_type":"c1","uid":1043694,"ip_address":"","ucode":"78337CC105B102","user_header":"","comment_is_top":false,"comment_ctime":1523699421,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"14408601309","product_id":100002201,"comment_content":"为什么是对区块头做两次 SHA-256 的 hash 求值？","like_count":3,"discussions":[{"author":{"id":1013097,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/75/69/791d0f5e.jpg","nickname":"rocedu","note":"","ucode":"E46E29CBBB94A9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300480,"discussion_content":"这样可以使得SHA-256算法预防“长度扩展”攻击","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598139505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":13809,"user_name":"痴痴","can_delete":false,"product_type":"c1","uid":1116149,"ip_address":"","ucode":"B14C2AE04AF134","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/f5/33d5cf22.jpg","comment_is_top":false,"comment_ctime":1529994546,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10119929138","product_id":100002201,"comment_content":"本区块的Id值等于 【version、previous block hash、merkle root、timestamp、bits、nonce】hash计算而得到的，而merkle是交易两两hash得到的，假如产生一笔新交易，merkle root的值肯定就会改变，区块Id的值不就也会跟着变吗？那您是怎么得出【merkle和区块无关】的结论呢？？","like_count":2,"discussions":[{"author":{"id":1314753,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/c1/92c540fe.jpg","nickname":"joy  ོ","note":"","ucode":"83236E71DC3BD0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364817,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617616366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5077,"user_name":"多米","can_delete":false,"product_type":"c1","uid":1005563,"ip_address":"","ucode":"A51148663381E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/fb/02039e8b.jpg","comment_is_top":false,"comment_ctime":1522718906,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10112653498","product_id":100002201,"comment_content":"然而对比特币没兴趣","like_count":3},{"had_liked":false,"id":182451,"user_name":"钱","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1582790083,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5877757379","product_id":100002201,"comment_content":"区块链的内容有三部分：真正的数据＋自己的ID＋上一个区块的ID，那第一个区块的上一个区块的ID是啥？还是一个固定的默认值？","like_count":1,"discussions":[{"author":{"id":1014665,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7b/89/34f2cbcc.jpg","nickname":"杨宇","note":"","ucode":"EB74DF6E269F03","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389294,"discussion_content":"创世区块是特殊的存在","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629206594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171986,"user_name":"倡印","can_delete":false,"product_type":"c1","uid":1455958,"ip_address":"","ucode":"4F53AA5D017D89","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/56/11068390.jpg","comment_is_top":false,"comment_ctime":1579061793,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5874029089","product_id":100002201,"comment_content":"那么中本聪是什么？是人还是组织","like_count":2,"discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391195,"discussion_content":"神秘组织代言人","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630329141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169457,"user_name":"chitanda","can_delete":false,"product_type":"c1","uid":1235077,"ip_address":"","ucode":"B3E28E1C8E410B","user_header":"https://static001.geekbang.org/account/avatar/00/12/d8/85/21fd42fa.jpg","comment_is_top":false,"comment_ctime":1578359862,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"5873327158","product_id":100002201,"comment_content":"UTXO，感觉和event sourcing一样","like_count":1},{"had_liked":false,"id":13664,"user_name":"痴痴","can_delete":false,"product_type":"c1","uid":1116149,"ip_address":"","ucode":"B14C2AE04AF134","user_header":"https://static001.geekbang.org/account/avatar/00/11/07/f5/33d5cf22.jpg","comment_is_top":false,"comment_ctime":1529913208,"is_pvip":false,"replies":[{"id":"4613","content":"1、不是，这个由各个矿工自己决定。2、merkle和区块无关，但是与交易有关。","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1529993662,"ip_address":"","comment_id":13664,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5824880504","product_id":100002201,"comment_content":"1.是不是只有前一个区块交易满了，才会产生下一个区块？  2.Merkle的生成过程理解，不过不理解的是：假设a区块有新的一笔交易产生，放到这个区块里，那么这个区块的id自然也就变了，后面所有的区块id也要跟着变，这样是不是太麻烦了","like_count":1,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":419716,"discussion_content":"1、不是，这个由各个矿工自己决定。2、merkle和区块无关，但是与交易有关。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1529993662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":13472,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1529664304,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5824631600","product_id":100002201,"comment_content":"建议补充一下ETH和BITCOIN的一些不同啦，比如ETH是有世界状态的，而比特币只有UTXO。比如BITCOIN也是通过脚本来完成交易的，ETH通过EVM来让大家都可以写智能合约。比如ETH发明了Gas，积极推送DAO、DAPP什么的，会不会好一些？","like_count":1},{"had_liked":false,"id":5072,"user_name":"郎哲","can_delete":false,"product_type":"c1","uid":1007926,"ip_address":"","ucode":"EE2F5F061E2F7A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/61/36/343a8ef8.jpg","comment_is_top":false,"comment_ctime":1522717506,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5817684802","product_id":100002201,"comment_content":"赞赞赞讲的通俗易懂","like_count":1},{"had_liked":false,"id":211702,"user_name":"邹德虎","can_delete":false,"product_type":"c1","uid":1943679,"ip_address":"","ucode":"1F3583873BD771","user_header":"https://static001.geekbang.org/account/avatar/00/1d/a8/7f/d49a56b5.jpg","comment_is_top":false,"comment_ctime":1587997090,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1587997090","product_id":100002201,"comment_content":"中本聪到底是何许人？感觉这个人深不可测","like_count":0},{"had_liked":false,"id":209819,"user_name":"mark","can_delete":false,"product_type":"c1","uid":1063172,"ip_address":"","ucode":"42CBC7FA8F31F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/39/04/3295d5eb.jpg","comment_is_top":false,"comment_ctime":1587620422,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587620422","product_id":100002201,"comment_content":"真心好懂，功力深厚才能写出这种文章","like_count":0},{"had_liked":false,"id":200306,"user_name":"向百","can_delete":false,"product_type":"c1","uid":1924815,"ip_address":"","ucode":"30681BDC5BB28F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJ7FvOBUp2rptO4tD9CoKQJsVBfPZlJEfS9SUxVoueJUEy41OhXicmFn66nEDAA11GB7lbvIqic7Wg/132","comment_is_top":false,"comment_ctime":1585570985,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585570985","product_id":100002201,"comment_content":"非常赞同和佩服耗子叔的洞见，炒股炒黄金炒房子都有这方面的性质，想赚快钱，不想踏踏实实的靠实力赚钱，人生是一场无限的博弈，不会总是运气都那么好，有一次ALL IN没成功，人将就此沉沦，无法翻身！","like_count":0},{"had_liked":false,"id":197976,"user_name":"迪","can_delete":false,"product_type":"c1","uid":1760077,"ip_address":"","ucode":"57EF0AF897A8B3","user_header":"https://static001.geekbang.org/account/avatar/00/1a/db/4d/8dec7917.jpg","comment_is_top":false,"comment_ctime":1585405622,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585405622","product_id":100002201,"comment_content":"简单来说就是比特币没有钱包的概念，没法将零钱变整钱","like_count":0},{"had_liked":false,"id":158793,"user_name":"尘埃观世界","can_delete":false,"product_type":"c1","uid":1107635,"ip_address":"","ucode":"4EC86C32468B45","user_header":"https://static001.geekbang.org/account/avatar/00/10/e6/b3/c0edfd54.jpg","comment_is_top":false,"comment_ctime":1575452352,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1575452352","product_id":100002201,"comment_content":"&quot; 就像上面那个二叉树所表示的一样，我们可以不断地把这个树分成左边的分支和右边的分支，因为它们都被计算过 hash 值，所以可以很快地校验其中的内容有没有被修改过。&quot;<br><br>为什么这样可以很快的校验其中的内容是否变更呢？比如如果改变了第一条交易的余额. 不明白为什么目前的设计可以加速校验。 还望解答，谢谢<br><br>","like_count":0,"discussions":[{"author":{"id":1073487,"avatar":"https://static001.geekbang.org/account/avatar/00/10/61/4f/e0b71e72.jpg","nickname":"我是谁","note":"","ucode":"D6C67E29D62EA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":170209,"discussion_content":"数据块内容越大，hash运算速度就越慢。如果以二叉树的形式，数据块内容会小，hash运算会快很多。而且改变了其中一条交易的金额，因为其他的hash值已经计算好了 ，所以可以很快知道内容是不是修改过","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581674944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118771,"user_name":"edisonhuang","can_delete":false,"product_type":"c1","uid":1530167,"ip_address":"","ucode":"BB2F639A779F96","user_header":"https://static001.geekbang.org/account/avatar/00/17/59/37/bd2de0a4.jpg","comment_is_top":false,"comment_ctime":1564446684,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564446684","product_id":100002201,"comment_content":"区块链的核心原理是针对每一个区块，内容都包含本身数据，上一个区块的id，以及利用id+数据计算的区块本身的id。由于id计算基于内容生成，当数据中任何一个bit改了就会导致完全不同的id，而所有的区块是像链表一样彼此链接，改变自己还要改变自己后面的子孙，因此可以让数据不易更改","like_count":0},{"had_liked":false,"id":15709,"user_name":"永光","can_delete":false,"product_type":"c1","uid":1102702,"ip_address":"","ucode":"0C54531ABED1B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/6e/281b85aa.jpg","comment_is_top":false,"comment_ctime":1531403889,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531403889","product_id":100002201,"comment_content":"区块链的协议格式，这部分数据是存在区块链图（本区快hash地址，前一个区块hash<br>地址，数据）中的数据中吗？总感觉不太对？不知道协议格式具体在哪里存着？","like_count":0},{"had_liked":false,"id":11270,"user_name":"i","can_delete":false,"product_type":"c1","uid":1017510,"ip_address":"","ucode":"B6D6B294C077DF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/86/a6/0aeceb81.jpg","comment_is_top":false,"comment_ctime":1528014673,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528014673","product_id":100002201,"comment_content":"既然一个区块可以存放至多四千笔交易，那什么时候才能生成新区块？够四千笔交易还是其他别的生成逻辑？","like_count":0},{"had_liked":false,"id":5882,"user_name":"龚极客","can_delete":false,"product_type":"c1","uid":1060645,"ip_address":"","ucode":"11AADCCD31D53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/25/d2162fce.jpg","comment_is_top":false,"comment_ctime":1524097013,"is_pvip":false,"replies":[{"id":"1623","content":"没有啊，hash无论hash多长的字符，总是得到一样的长度。你说的 “hash4个字节*7=28”是什么意思？","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1524101480,"ip_address":"","comment_id":5882,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1524097013","product_id":100002201,"comment_content":"Merkle Root是否至多三层？因为每个hash4个字节*7 =28&lt;32 。如果这样，那么超过3层怎么处理？","like_count":0,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416881,"discussion_content":"没有啊，hash无论hash多长的字符，总是得到一样的长度。你说的 “hash4个字节*7=28”是什么意思？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1524101480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5824,"user_name":"Jackson","can_delete":false,"product_type":"c1","uid":1061404,"ip_address":"","ucode":"FD22D39510CF8C","user_header":"https://static001.geekbang.org/account/avatar/00/10/32/1c/3e3cdad2.jpg","comment_is_top":false,"comment_ctime":1524011909,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1524011909","product_id":100002201,"comment_content":"关于以太坊state存储的部分有点模糊，表达成是账户状态的存储，而非合同状态，可能更好一些","like_count":0},{"had_liked":false,"id":5599,"user_name":"总指挥","can_delete":false,"product_type":"c1","uid":1022702,"ip_address":"","ucode":"C33506F095DDEC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9a/ee/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1523596941,"is_pvip":false,"replies":[{"id":"1547","content":"文中已经讲了。可以分块整理","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1523624399,"ip_address":"","comment_id":5599,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1523596941","product_id":100002201,"comment_content":"生成Merkle Root 过程理解的，但它的目的还是不能理解，如果是要验证完整性为什么不直接全部tx来哈希？小弟不才，望各位解答。","like_count":0,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416784,"discussion_content":"文中已经讲了。可以分块整理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1523624399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5236,"user_name":"湖心亭看雪","can_delete":false,"product_type":"c1","uid":1023363,"ip_address":"","ucode":"88BAEBA964B6BC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9d/83/968da410.jpg","comment_is_top":false,"comment_ctime":1522915228,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1522915228","product_id":100002201,"comment_content":"同问为什么是1M?","like_count":0},{"had_liked":false,"id":5228,"user_name":"Y024","can_delete":false,"product_type":"c1","uid":1018056,"ip_address":"","ucode":"397126D2E17997","user_header":"https://static001.geekbang.org/account/avatar/00/0f/88/c8/ae476935.jpg","comment_is_top":false,"comment_ctime":1522902825,"is_pvip":true,"replies":[{"id":"1433","content":"好习惯","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1523160827,"ip_address":"","comment_id":5228,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1522902825","product_id":100002201,"comment_content":"下载软件通过校验码验证真伪这个小常识，可以避免很多李鬼事件，就值回票价。","like_count":0,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416643,"discussion_content":"好习惯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1523160827,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5203,"user_name":"Dylan","can_delete":false,"product_type":"c1","uid":1040236,"ip_address":"","ucode":"58064D0C9F9F5F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/df/6c/5af32271.jpg","comment_is_top":false,"comment_ctime":1522836671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1522836671","product_id":100002201,"comment_content":"最近在研究ETH的MPT树，看到这豁然开朗很多了","like_count":0},{"had_liked":false,"id":5178,"user_name":"浪迹天涯","can_delete":false,"product_type":"c1","uid":1082155,"ip_address":"","ucode":"C96C58FEF5D292","user_header":"https://static001.geekbang.org/account/avatar/00/10/83/2b/bba680dd.jpg","comment_is_top":false,"comment_ctime":1522810230,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1522810230","product_id":100002201,"comment_content":"期待下一期的挖矿的技术细节，HashCash和命中概率问题。","like_count":0},{"had_liked":false,"id":5152,"user_name":"wx","can_delete":false,"product_type":"c1","uid":1079788,"ip_address":"","ucode":"0CE16BDD5D809F","user_header":"https://static001.geekbang.org/account/avatar/00/10/79/ec/ff3c6a7e.jpg","comment_is_top":false,"comment_ctime":1522798638,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1522798638","product_id":100002201,"comment_content":"浅显易懂，点赞","like_count":0},{"had_liked":false,"id":5124,"user_name":"风的叹息","can_delete":false,"product_type":"c1","uid":1014963,"ip_address":"","ucode":"5982CA332D46E0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/b3/40e8fa1d.jpg","comment_is_top":false,"comment_ctime":1522754641,"is_pvip":true,"replies":[{"id":"1398","content":"一个区块里有多笔交易，一个区块最大1M，一笔交易平均250个字节，于是一个区块4000笔交易，一个区块平均生成时间10分钟，所以每秒6.66667笔交易。<br><br>交易没有时序问题，因为一笔交易的支出必需来自（Unspent Transaction Output），所以，如果你无法对同一个“未花交易 ”操作两次，而对一个“未花交易”的操作未被确认前是不会产生新的未花交易，于是你也就无法进行下笔操作。<br><br>广播的时序？为什么会有时序问题呢？一个区块里有前一个区块的地址，另外，算力太大了，10分钟才能产生一个，完全是超低并发应用。","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1522978816,"ip_address":"","comment_id":5124,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1522754641","product_id":100002201,"comment_content":"单笔交易和区块是什么关系？记录在数据集里面之一？然后同时进行的交易呢？广播，这里的时序问题怎么处理的，不知后文有没解答","like_count":0,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416615,"discussion_content":"一个区块里有多笔交易，一个区块最大1M，一笔交易平均250个字节，于是一个区块4000笔交易，一个区块平均生成时间10分钟，所以每秒6.66667笔交易。\n\n交易没有时序问题，因为一笔交易的支出必需来自（Unspent Transaction Output），所以，如果你无法对同一个“未花交易 ”操作两次，而对一个“未花交易”的操作未被确认前是不会产生新的未花交易，于是你也就无法进行下笔操作。\n\n广播的时序？为什么会有时序问题呢？一个区块里有前一个区块的地址，另外，算力太大了，10分钟才能产生一个，完全是超低并发应用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522978816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5107,"user_name":"邋邋遢遢","can_delete":false,"product_type":"c1","uid":1014393,"ip_address":"","ucode":"C9A7D01015AC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/79/a74b95f3.jpg","comment_is_top":false,"comment_ctime":1522739461,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1522739461","product_id":100002201,"comment_content":"通过作者对UTXO做出的例子，又对它有了深刻的理解。而且对merkle树也明白了许多。很棒！","like_count":0},{"had_liked":false,"id":5101,"user_name":"0bug","can_delete":false,"product_type":"c1","uid":1050335,"ip_address":"","ucode":"CADCC882F31784","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/df/60126ff3.jpg","comment_is_top":false,"comment_ctime":1522735976,"is_pvip":false,"replies":[{"id":"1400","content":"对于交易来说，input是交易的输入方，output是交易的输出方。","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1522979040,"ip_address":"","comment_id":5101,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1522735976","product_id":100002201,"comment_content":"比特币交易模型中input应该是收入方，output是支出方吧","like_count":0,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416603,"discussion_content":"对于交易来说，input是交易的输入方，output是交易的输出方。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522979040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5093,"user_name":"jimmy","can_delete":false,"product_type":"c1","uid":1003262,"ip_address":"","ucode":"F7CC7E298AD0C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/fe/7dfe2910.jpg","comment_is_top":false,"comment_ctime":1522727300,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1522727300","product_id":100002201,"comment_content":"区块链的介绍看过些英文资料，懵懵懂懂，有耗子哥的文章提炼，豁然开朗，看着踏实，必须赞","like_count":0},{"had_liked":false,"id":5087,"user_name":"龍蝦","can_delete":false,"product_type":"c1","uid":1000076,"ip_address":"","ucode":"BE1D500833F070","user_header":"https://static001.geekbang.org/account/avatar/00/0f/42/8c/373d4027.jpg","comment_is_top":false,"comment_ctime":1522722015,"is_pvip":true,"replies":[{"id":"1414","content":"就是简单的hash啊，怎么个不理解？","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1523017661,"ip_address":"","comment_id":5087,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1522722015","product_id":100002201,"comment_content":"Merkle Root 还是不太理解，有没更详细的资料呢？","like_count":0,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416597,"discussion_content":"就是简单的hash啊，怎么个不理解？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1523017661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2009734,"avatar":"","nickname":"一墨","note":"","ucode":"2EFB72EEC69FE2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281821,"discussion_content":"估计和我一样, 不理解的地方在于, (1) 是由某个设备搜集很多交易产生的一个Merkle Root然后发布吗? 是的话那每个网络节点岂不是都可以产生一个区块. (2) 发生一笔交易之后, Merkle Root会重新计算Hash, 那么多拆分的树状交易, 很耗时吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591806128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":5081,"user_name":"云学","can_delete":false,"product_type":"c1","uid":1027233,"ip_address":"","ucode":"366AE90BA06356","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ac/a1/43d83698.jpg","comment_is_top":false,"comment_ctime":1522719555,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1522719555","product_id":100002201,"comment_content":"真心好懂，功力深厚才能写出这种文章","like_count":0},{"had_liked":false,"id":5079,"user_name":"Geek_74f253","can_delete":false,"product_type":"c1","uid":1069413,"ip_address":"","ucode":"A5C58583C9D312","user_header":"https://static001.geekbang.org/account/avatar/00/10/51/65/b40d4532.jpg","comment_is_top":false,"comment_ctime":1522719294,"is_pvip":false,"replies":[{"id":"1405","content":"一般来说不需要","user_name":"作者回复","user_name_real":"左耳朵","uid":"1001269","ctime":1522979713,"ip_address":"","comment_id":5079,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1522719294","product_id":100002201,"comment_content":"如果区块有新增的数据是不是所有的区块也需要重新计算一遍hash呢","like_count":0,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"左耳朵","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":416595,"discussion_content":"一般来说不需要","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1522979713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}