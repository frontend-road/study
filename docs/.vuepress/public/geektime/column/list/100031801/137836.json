{"id":137836,"title":"29 | å¦‚ä½•ä½¿ç”¨Medooze å®ç°å¤šæ–¹è§†é¢‘ä¼šè®®ï¼Ÿ","content":"<p>å‰é¢æˆ‘ä»¬é€šè¿‡ä¸¤ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº† Medooze çš„å®ç°é€»è¾‘ï¼Œæˆ‘ç›¸ä¿¡ä½ ç°åœ¨å·²ç»å¯¹ Medooze æœ‰äº†éå¸¸æ·±åˆ»çš„è®¤çŸ¥ã€‚é€šè¿‡å¯¹Medoozeå®ç°åŸç†å’Œæ¶æ„çš„äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“Medoozeæ”¯æŒçš„åŠŸèƒ½éå¸¸å¤šï¼Œå¦‚å½•åˆ¶å›æ”¾ã€æ¨æµã€SFU ç­‰ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„åŠŸèƒ½æ˜¯ SFU çš„å®ç°ã€‚</p><p>å®é™…ä¸Šï¼Œ<strong>æˆ‘ä»¬è¦å®ç°çš„å¤šæ–¹éŸ³è§†é¢‘ä¼šè®®å°±æ˜¯ç”± SFU æ¥å®ç°çš„ï¼Œæˆ–è€…ä½ å¯ä»¥è®¤ä¸ºMedoozå®ç°çš„ SFU å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„éŸ³è§†é¢‘ä¼šè®®ç³»ç»Ÿ</strong>ã€‚Medooze æä¾›çš„ SFU Demo çš„åœ°å€ä¸ºï¼š<a href=\"https://github.com/medooze/sfu\">https://github.com/medooze/sfu</a> ã€‚</p><p>ç”±äº SFU æ˜¯ä¸€ä¸ª Node.js é¡¹ç›®ï¼Œæ‰€ä»¥åœ¨ç¯å¢ƒéƒ¨ç½²ã€æºç åˆ†æçš„æ—¶å€™ï¼Œéœ€è¦ä½ æœ‰ JavaScript åŸºç¡€ï¼Œä¹Ÿéœ€è¦æŒæ¡ NPM å’Œ Node çš„å¸¸ç”¨å‘½ä»¤ï¼Œæ¯”å¦‚ npm install ç­‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸»è¦ä»ä»¥ä¸‹å‡ æ–¹é¢å‘ä½ ä»‹ç»ä¸€ä¸‹å¤šæ–¹éŸ³è§†é¢‘ä¼šè®®ï¼ˆSFUï¼‰é¡¹ç›®ï¼š</p><ul>\n<li>æ­å»ºå¤šæ–¹éŸ³è§†é¢‘ä¼šè®®ç³»ç»Ÿï¼Œè®©ä½ æ„Ÿå—ä¸€ä¸‹å¤šæ–¹é€šä¿¡ï¼›</li>\n<li>åˆ†æå¤šæ–¹éŸ³è§†é¢‘ä¼šè®®å®ç°çš„æ¶æ„ï¼›</li>\n<li>åˆ†æ Medooze API çš„å…·ä½“ä½¿ç”¨ï¼›</li>\n<li>åˆ†æå¤šæ–¹éŸ³è§†é¢‘ä¼šè®®çš„å…¥ä¼šæµç¨‹ã€‚</li>\n</ul><h2>å¤šæ–¹éŸ³è§†é¢‘ä¼šè®®ç¯å¢ƒçš„æ­å»º</h2><p>å¤šæ–¹éŸ³è§†é¢‘ä¼šè®®ï¼ˆSFUï¼‰é¡¹ç›®æ˜¯çº¯ Node.js å®ç°çš„ï¼Œå¯ä»¥è¯´åœ¨ç›®å‰æ‰€æœ‰çš„æ“ä½œç³»ç»Ÿä¸Šéƒ½å¯ä»¥è¿è¡Œã€‚ç„¶è€Œï¼Œç”±äºè¯¥ç³»ç»Ÿä¾èµ– medooze-media-server é¡¹ç›®ï¼Œè€Œè¯¥é¡¹ç›®ä»…æ”¯æŒ macOS X å’Œ Linux ä¸¤ç§æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥ SFU é¡¹ç›®ä¹Ÿåªèƒ½åœ¨ macOS X å’Œ Linux è¿™ä¸¤ç§æ“ä½œç³»ç»Ÿä¸‹è¿è¡Œäº†ã€‚</p><!-- [[[read_end]]] --><p>æœ¬æ–‡æˆ‘ä»¬æ‰€æ­å»ºçš„è¿™ä¸ª Demo çš„å®éªŒç¯å¢ƒæ˜¯åœ¨ Ubuntu 18.04 ç³»ç»Ÿä¸Šï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çš„å®éªŒæ­¥éª¤å’Œå®éªŒç»“è®ºéƒ½æ˜¯åŸºäº Ubuntu 18.04 å¾—å‡ºçš„ï¼Œå¦‚æœä½ åœ¨å…¶ä»–æ“ä½œç³»ç»Ÿä¸‹æ­å»ºå¯èƒ½ç»“æœä¼šç•¥æœ‰ä¸åŒï¼Œä½†å…·ä½“æ­¥éª¤éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥åˆ†æä¸‹è¿™ä¸ªç¯å¢ƒæ­å»ºçš„å…·ä½“æ­¥éª¤ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œæ‰“å¼€ Linux æ§åˆ¶ç»ˆç«¯ï¼Œä¸‹è½½ SFU ä»£ç ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>git clone https://github.com/medooze/sfu.git\n</code></pre><p>ç¬¬äºŒæ­¥ï¼Œå®‰è£… SFU ä¾èµ–çš„æ‰€æœ‰åŒ…ï¼š</p><pre><code>cd sfu\nnpm install\n</code></pre><p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨ <code>sfu</code> ç›®å½•ä¸‹ç”Ÿæˆè‡ªç­¾åè¯ä¹¦æ–‡ä»¶ï¼š</p><pre><code>openssl req -sha256 -days 3650 -newkey rsa:1024 -nodes -new -x509 -keyout server.key -out server.cert\n</code></pre><p>ç¬¬å››æ­¥ï¼Œåœ¨ <code>sfu</code> ç›®å½•ä¸‹å¯åŠ¨æœåŠ¡ï¼š</p><pre><code>node index.js IP\n</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­çš„ IP æ˜¯æµ‹è¯•æœºå™¨çš„IPåœ°å€ï¼Œå¦‚æœç”¨å†…ç½‘æµ‹è¯•ï¼Œä½ å¯ä»¥å°†å®ƒè®¾ç½®ä¸º 127.0.0.1ã€‚å¦‚æœä½ æƒ³ç”¨å¤–ç½‘è®¿é—®ï¼Œåˆ™å¯ä»¥æŒ‡å®šä½ çš„äº‘ä¸»æœºçš„å¤–ç½‘IPåœ°å€ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥æœåŠ¡å¯åŠ¨åé»˜è®¤ç›‘å¬çš„ç«¯å£æ˜¯ 8084ï¼Œ<strong>æ‰€ä»¥ä½ åœ¨è®¿é—®è¯¥æœåŠ¡æ—¶è¦æŒ‡å®šç«¯å£ä¸º8084</strong>ã€‚</p><p>é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å°±å°† Medooze çš„ SFU æœåŠ¡å™¨æ­å»ºå¥½äº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p><p>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥ä»¥ä¸‹åœ°å€å°±å¯ä»¥æ‰“å¼€ Medooze SFU Demo çš„æµ‹è¯•ç•Œé¢äº†ï¼š</p><pre><code>https://IP:8084/index.html\n</code></pre><p>åœ¨è¿™ä¸ªåœ°å€ä¸­éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ<strong>å¿…é¡»ä½¿ç”¨ HTTPS åè®®ï¼Œå¦åˆ™æµè§ˆå™¨æ— æ³•è®¿é—®æœ¬åœ°éŸ³è§†é¢‘è®¾å¤‡</strong>ã€‚æ­¤å¤–ï¼Œè¿™ä¸ªåœ°å€ä¸­çš„ IP æŒ‡çš„æ˜¯SFUæœåŠ¡çš„ä¸»æœºçš„IPåœ°å€ï¼Œå¯ä»¥æ˜¯å†…ç½‘åœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–ç½‘åœ°å€ã€‚</p><p>å½“è¯¥åœ°å€æ‰§è¡Œåï¼Œä¼šå¼¹å‡ºç™»å½•ç•Œé¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/df/73/dfb0c325dfa9eef91cd56041259f2a73.png?wh=1142*830\" alt=\"\"></p><center><span class=\"reference\">Medooze SFU ç™»å½•ç•Œé¢å›¾</span></center><p>è¿™æ˜¯ä¸€ä¸ªå¤šäººè§†é¢‘ä¼šè®®ç™»å½•ç•Œé¢ã€‚å…³äºç™»å½•ç•Œé¢ï¼Œè¿™é‡Œæˆ‘ä»¬åšä¸€ä¸ªç®€å•çš„è¯´æ˜ã€‚</p><ul>\n<li>ç•Œé¢ä¸­çš„Room Id å’Œ Name å¯ä»¥éšæœºç”Ÿæˆï¼Œä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šã€‚å¦‚æœéœ€è¦éšæœºç”Ÿæˆï¼Œç‚¹å‡»åé¢çš„ RANDOM æŒ‰é’®å³å¯ã€‚</li>\n<li>å‡ ä¸ªå‚ä¼šäººè‹¥æƒ³è¦è¿›å…¥åŒä¸€ä¸ªæˆ¿é—´ï¼Œé‚£ä¹ˆä»–ä»¬çš„ Room Id å¿…é¡»ç›¸åŒã€‚</li>\n<li>åœ¨ Audio Device åˆ—å‡ºäº†æ‰€æœ‰éº¦å…‹é£ï¼Œå¯ä¾›å‚ä¼šäººé€‰æ‹©ã€‚</li>\n<li>åœ¨Audio Deviceä¸‹é¢ï¼Œæœ‰ä¸€ä¸ªéŸ³é‡è¿›åº¦æ¡ï¼Œå®ƒå¯ä»¥æµ‹è¯•éº¦å…‹é£æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</li>\n<li>ä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œç‚¹å‡»å³ä¸‹è§’çš„â€œREADY!â€æŒ‰é’®ï¼Œå°±å¯ä»¥åŠ å…¥æˆ¿é—´äº†ã€‚æ­¤æ—¶ï¼Œåœ¨æµè§ˆå™¨å·¦ä¸‹è§’æ˜¾ç¤ºäº†è‡ªå·±çš„æœ¬åœ°è§†é¢‘ã€‚</li>\n<li>ç”±äºè¿™æ˜¯åŸºäºæµè§ˆå™¨çš„éŸ³è§†é¢‘åº”ç”¨ï¼Œå…·æœ‰å¾ˆå¥½çš„è·¨å¹³å°æ€§ï¼Œå› æ­¤ä½ å¯é€‰æ‹© PCæµè§ˆå™¨ã€æ‰‹æœºæµè§ˆå™¨ä¸€èµ·æµ‹è¯•ã€‚</li>\n</ul><p>ä¸Šé¢æˆ‘ä»¬å°±å°† Medooze çš„éŸ³è§†é¢‘ä¼šè®®ç³»ç»Ÿçš„ Demo ç¯å¢ƒæ­å»ºå¥½äº†ï¼Œå¹¶ä¸”ä½ å¯ä»¥è¿›è¡Œå¤šäººçš„éŸ³è§†é¢‘äº’åŠ¨äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±åˆ†æä¸€ä¸‹è¿™ä¸ªéŸ³è§†é¢‘ä¼šè®®ç³»ç»Ÿï¼ˆSFUï¼‰ Demo æ˜¯å¦‚ä½•å®ç°çš„å§ã€‚</p><h2>SFU ç›®å½•ç»“æ„</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥åˆ†æçœ‹ä¸€ä¸‹ Medooze çš„ SFU Demo çš„ç›®å½•ç»“æ„ï¼Œä»¥åŠæ¯ä¸ªå­ç›®å½•ä¸­ä»£ç çš„ä½œç”¨ï¼Œä¸ºæˆ‘ä»¬åé¢çš„åˆ†æåšå¥½å‡†å¤‡ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/06/29/06c09b7ebbee5cdb4e9c1de8ef42f629.png?wh=960*130\" alt=\"\"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨ SFU Demo ç›®å½•ä¸‹çš„æ–‡ä»¶éå¸¸å°‘ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„å…·ä½“ä½œç”¨å§ï¼</p><p><img src=\"https://static001.geekbang.org/resource/image/be/8e/becbb861d9775ad282513b3c451e268e.png?wh=1142*290\" alt=\"\"></p><p>äº†è§£äº† SFU Demo çš„ç›®å½•ç»“æ„åŠå…¶ä½œç”¨åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ SFU Demo çš„æ¶æ„æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p><h2>SFU æ¶æ„</h2><p>ä¸‹å›¾å°±æ˜¯ Medooze SFU Demo çš„æ¶æ„å›¾ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/fc/e4/fc4bcb1763ec26052cfe9de5ca2e58e4.png?wh=1142*914\" alt=\"\"></p><center><span class=\"reference\">SFUæ¶æ„å›¾</span></center><p>ä»å›¾ä¸­ä½ å¯ä»¥çœ‹å‡ºï¼ŒSFU æ¶æ„åŒ…æ‹¬äº†<strong>æµè§ˆå™¨å®¢æˆ·ç«¯</strong>å’Œ<strong>SFUæœåŠ¡ç«¯</strong>ä¸¤éƒ¨åˆ†ã€‚è€ŒSFUæœåŠ¡ç«¯åˆåŒ…æ‹¬ä¸¤éƒ¨åˆ†åŠŸèƒ½ï¼šWWW æœåŠ¡ã€WebSocketä¿¡ä»¤åŠä¸šåŠ¡ç®¡ç†ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åˆ†æä¸€ä¸‹<strong>æœåŠ¡ç«¯çš„å¤„ç†é€»è¾‘</strong>ã€‚</p><p>Node.jsä¸­çš„ Web æœåŠ¡å™¨ï¼ˆWWWï¼‰æ˜¯åœ¨ index.js æ–‡ä»¶ä¸­å®ç°çš„ã€‚å½“æˆ‘ä»¬æ‰§è¡Œ<code>node index.js IP</code>å‘½ä»¤æ—¶ï¼Œè¯¥å‘½ä»¤å¯åŠ¨äº†ä¸€ä¸ª HTTPS æœåŠ¡ï¼Œç›‘å¬çš„ç«¯å£æ˜¯ 8084ã€‚å½“ HTTPS å¯åŠ¨åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»å®ƒçš„ WWW æœåŠ¡è·å–åˆ°å®¢æˆ·ç«¯ä»£ç äº†ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒHTTPS æœåŠ¡ä¾èµ– server.key å’Œ server.crt æ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶éœ€è¦æˆ‘ä»¬æå‰ç”Ÿæˆå¥½ï¼ˆç”Ÿæˆè¯ä¹¦çš„å‘½ä»¤åœ¨ä¸Šé¢ SFU ç¯å¢ƒæ­å»ºä¸€èŠ‚å·²ç»å‘ä½ åšäº†è¯´æ˜ï¼‰ã€‚</p><p>è‡³äºWebSocket æœåŠ¡åŠä¸šåŠ¡ç®¡ç†éƒ¨åˆ†ï¼Œé€»è¾‘ä¼šç¨å¾®å¤æ‚äº›ã€‚æœåŠ¡ç«¯å¯åŠ¨WebSocketæœåŠ¡åï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„ä¿¡ä»¤ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡å®ƒå‘å®¢æˆ·ç«¯å‘é€é€šçŸ¥æ¶ˆæ¯ï¼›é™¤äº†å¯¹ä¿¡ä»¤çš„å¤„ç†å¤–ï¼ŒSFUçš„ä¸šåŠ¡é€»è¾‘ä¹Ÿæ˜¯åœ¨è¿™éƒ¨åˆ†å®ç°çš„ï¼Œå¦‚ Room å’Œ Participator å®ä¾‹çš„åˆ›å»ºã€å‚ä¼šäººè¿›å…¥/ç¦»å¼€æˆ¿é—´ç­‰ã€‚</p><p>è¿™é‡Œéœ€è¦ä½ æ³¨æ„çš„æ˜¯ï¼ŒWebSocketæœåŠ¡å’Œä¸šåŠ¡ç®¡ç†çš„ä»£ç ä¹Ÿæ˜¯åœ¨ index.jsä¸­å®ç°çš„ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨æœåŠ¡ç«¯çš„ index.js ä¸­ï¼Œå®ç°äº† WWW æœåŠ¡ã€WebSocketæœåŠ¡å’ŒSFUä¸šåŠ¡ç®¡ç†ä¸‰å—é€»è¾‘ï¼Œè¿™æ ·â€œå¤§æ‚çƒ©â€çš„ä»£ç å®ç°ä¹Ÿåªæ˜¯åœ¨ Demo ä¸­æ‰èƒ½è¿™ä¹ˆå†™äº†ã€‚å¦å¤–ï¼Œindex.js çš„å®ç°ä¾èµ–äº† websocket å’Œ transaction-manager ä¸¤ä¸ªåŒ…ã€‚</p><p>åˆ†æå®ŒæœåŠ¡ç«¯çš„å¤„ç†é€»è¾‘åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹çœ‹<strong>å®¢æˆ·ç«¯</strong>ã€‚æµè§ˆå™¨é¦–å…ˆä» Medooze SFU çš„ WWWæœåŠ¡ä¸Šè·å¾— sfu.js ä»£ç ï¼Œåœ¨æµè§ˆå™¨ä¸Šè¿è¡Œ sfu.jså°±å¯ä»¥ä¸ Medooze SFU å»ºç«‹è¿æ¥ï¼Œå¹¶è¿›è¡Œå¤šæ–¹éŸ³è§†é¢‘é€šä¿¡äº†ã€‚åœ¨ sfu.js ä¸­ï¼Œä¸»è¦å®ç°äº†æˆ¿é—´çš„ç™»å½•ã€éŸ³é¢‘è®¾å¤‡é€‰æ‹©ã€é‡‡é›†éŸ³è§†é¢‘æ•°æ®ã€å…±äº«éŸ³è§†é¢‘æ•°æ®ç­‰åŠŸèƒ½ã€‚å®é™…ä¸Šï¼Œå®¢æˆ·ç«¯çš„å®ç°é€»è¾‘å°±æ˜¯ä½¿ç”¨å’±ä»¬ä¸“æ ç¬¬ä¸€æ¨¡å—æ‰€ä»‹ç»çš„çŸ¥è¯†ï¼Œå¦‚ RTCPeerConnection çš„å»ºç«‹ã€è·å–éŸ³è§†é¢‘æµã€åª’ä½“åå•†ç­‰ã€‚</p><p>æ­¤å¤–ï¼ŒMedooze SFU è¿˜å®ç°äº†å‡ ä¸ªä¿¡ä»¤ï¼Œå¦‚ join ç”¨äºåŠ å…¥ä¼šè®®ã€update ç”¨äºé€šçŸ¥å®¢æˆ·ç«¯é‡æ–°è¿›è¡Œåª’ä½“åå•†ç­‰ç­‰ï¼Œè¿™å‡ ä¸ªä¿¡ä»¤è¿˜æ˜¯éå¸¸ç®€å•çš„ï¼Œä¸è¿‡å´éå¸¸é‡è¦ã€‚å°¤å…¶æ˜¯åœ¨é˜…è¯»Medooze SFU ä»£ç æ—¶ï¼Œå¯ä»¥æŒ‰ç…§ä¿¡ä»¤çš„æµè½¬æ¥æ¢³ç†SFUçš„ä»£ç é€»è¾‘ï¼Œè¿™æ ·ä¼šå¤§å¤§æé«˜ä½ çš„å·¥ä½œæ•ˆç‡ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯Medooze SFU çš„åŸºæœ¬æ¶æ„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ SFU çš„é€»è¾‘å¤„ç†ã€‚</p><h2>SFU é€»è¾‘å¤„ç†</h2><p>SFU çš„å®ç°å¾ˆç®€å•ã€‚åœ¨æœåŠ¡ç«¯æœ‰ä¸¤ä¸ªé‡è¦çš„ç±»ï¼Œå³<strong>Room</strong> å’Œ <strong>Participator</strong>ã€‚å®ƒä»¬åˆ†åˆ«æŠ½è±¡äº†å¤šäººä¼šè®®ä¸­çš„<strong>æˆ¿é—´</strong>å’Œ<strong>å‚ä¼šäºº</strong>ã€‚ä¸ºä¾¿äºä½ ç†è§£ï¼Œæˆ‘ç”»äº†ä¸€ä¸ªç®€å•ç±»å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/ad/f23f501a0453d24157633c2a1e62abad.png?wh=1142*266\" alt=\"\"></p><center><span class=\"reference\">SFU ç±»å›¾</span></center><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œindex.js ä¸­å®šä¹‰äº†ä¸€ä¸ª<strong>å…¨å±€å¯¹è±¡ Rooms</strong>ï¼Œä¿å­˜å¤šä¸ªæˆ¿é—´ï¼ˆRoomï¼‰å®ä¾‹ã€‚</p><p><strong>Room ç±»æ˜¯å¯¹æˆ¿é—´çš„æŠ½è±¡</strong>ï¼š</p><ul>\n<li>Endpoint å±æ€§æ˜¯ Medooze Endpoint ç±»å‹ï¼›</li>\n<li>Participators å±æ€§æ˜¯ä¸€ä¸ª Map ç±»å‹ï¼Œä¿å­˜æœ¬æˆ¿é—´ä¸­æ‰€æœ‰ Participator å®ä¾‹ï¼›</li>\n<li>è¯¥ç±»è¿˜æœ‰ä¸¤ä¸ªé‡è¦æ–¹æ³•ï¼ŒcreateParticipator ç”¨äºåˆ›å»ºå‚ä¼šäººå®ä¾‹ï¼ŒgetStreams è·å–æ‰€æœ‰å‚ä¼šäººå…±äº«çš„åª’ä½“æµã€‚</li>\n</ul><p><strong>Participator ç±»æ˜¯å¯¹å‚ä¼šäººçš„æŠ½è±¡</strong>ï¼š</p><ul>\n<li>IncomingStreams å±æ€§æ˜¯ Map ç±»å‹ï¼Œä¿å­˜è‡ªå·±å…±äº«çš„åª’ä½“æµï¼Œå…ƒç´ å±æ€§ç±»å‹æ˜¯ Medooze::IncomingStreamï¼›</li>\n<li>OutgoingStreams å±æ€§æ˜¯ Map ç±»å‹ï¼Œä¿å­˜è‡ªå·±è§‚çœ‹çš„åª’ä½“æµï¼Œå…ƒç´ å±æ€§ç±»å‹æ˜¯ Medooze::OutgoingStreamï¼›</li>\n<li>transport å±æ€§æ˜¯ Medooze::Transport ç±»å‹ï¼Œè¡¨ç¤º DTLS ä¼ è¾“ï¼›</li>\n<li>init() æ–¹æ³•ï¼Œåˆå§‹åŒ– transport å®ä¾‹ç­‰ï¼›</li>\n<li>publishStream() æ–¹æ³•ç”¨äºå‘å¸ƒè‡ªå·±å…±äº«çš„æµï¼Œåˆ›å»º IncomingStreamï¼›</li>\n<li>addStream() æ–¹æ³•ç”¨äºè§‚çœ‹å…¶ä»–å‚ä¼šäººå…±äº«çš„æµï¼Œåˆ›å»º OutgoingStream å®ä¾‹ï¼Œå¹¶ä¸” attachTo åˆ°å…±äº«äººçš„ IncomingStream ä¸­ã€‚</li>\n</ul><h2>å…¥ä¼šæµç¨‹</h2><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç»“åˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„é€»è¾‘ï¼Œåˆ†æä¸€ä¸‹å‚ä¼šäººå…¥ä¼šçš„å¤§è‡´æµç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/97/92/97b0ecb3c212a626f2e29ed1dab84c92.jpg?wh=829*508\" alt=\"\"></p><center><span class=\"reference\">SFU æ—¶åºå›¾</span></center><p>å›¾ä¸­æ·±ç²‰éƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯å®ç°ï¼Œåœ¨ <code>www/js/sfu.js</code> ä¸­ï¼›ç»¿è‰²éƒ¨åˆ†æ˜¯æœåŠ¡å™¨å®ç°ï¼Œåœ¨ <code>index.js</code> ä¸­ï¼›æ©˜è‰²æ˜¯åœ¨ medooze ä¸­å®ç°ã€‚é‚£å…·ä½“çš„æµç¨‹æ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œæµè§ˆå™¨ä» Node.js æœåŠ¡å™¨è·å–åˆ° <code>www/index.html</code> é¡µé¢åŠå¼•ç”¨çš„ JavaScript è„šæœ¬ï¼Œç„¶åæ‰§è¡Œ connect æ–¹æ³•ã€‚åœ¨ connect æ–¹æ³•ä¸­ä½¿ç”¨ WebSocket ä¸SFUæœåŠ¡ï¼ˆindex.jsï¼‰å»ºç«‹è¿æ¥ã€‚</p><p>æœåŠ¡ç«¯æ”¶åˆ° WebSocket è¿æ¥è¯·æ±‚åï¼Œä» URL ä¸­è§£æåˆ° roomid å‚æ•°ã€‚ç„¶åï¼Œæ ¹æ®è¯¥å‚æ•°åˆ¤æ–­æˆ¿é—´æ˜¯å¦åœ¨ä¹‹å‰å·²ç»åˆ›å»ºè¿‡ã€‚å¦‚æœè¯¥æˆ¿é—´å·²åˆ›å»ºï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼›å¦‚æœæ²¡åˆ›å»ºï¼Œåˆ™å°è¯•åˆ›å»º Room å®ä¾‹ã€‚</p><p>å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼ŒWebSocket è¿æ¥å»ºç«‹æˆåŠŸåï¼Œå®¢æˆ·ç«¯ä¼šå‘é€ join ä¿¡ä»¤åˆ°æœåŠ¡ç«¯ã€‚è€ŒæœåŠ¡ç«¯æ”¶åˆ° join ä¿¡ä»¤åï¼Œåˆ›å»º Participatorï¼ˆå‚ä¸äººï¼‰å®ä¾‹ï¼Œå¹¶ä¸”è°ƒç”¨å®ƒçš„ init æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>ä¹‹åï¼ŒParticipator è·å– Room ä¸­æ‰€æœ‰å·²å…±äº«çš„åª’ä½“æµï¼Œå¹¶è°ƒç”¨å®ƒçš„ addStream æ–¹æ³•ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥è®¢é˜… Room ä¸­æ‰€æœ‰çš„åª’ä½“æµäº†ã€‚è®¢é˜…æˆåŠŸåï¼Œåª’ä½“æµçš„æ•°æ®å°±è¢«æºæºä¸æ–­åœ°å‘é€ç»™Participatorå¯¹åº”çš„ç»ˆç«¯äº†ã€‚</p><p>ä¸Šé¢çš„é€»è¾‘å®Œæˆä¹‹åï¼ŒæœåŠ¡ç«¯ä¼šé€šçŸ¥å®¢æˆ·ç«¯ join å·²ç»æˆåŠŸã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥å…±äº«å®ƒçš„éŸ³è§†é¢‘æµç»™æœåŠ¡å™¨äº†ã€‚</p><p>æ­¤å¤–ï¼Œåœ¨å®¢æˆ·ç«¯å°†è‡ªå·±çš„åª’ä½“æµæ¨é€ç»™æœåŠ¡ç«¯ä¹‹å‰ï¼ŒæœåŠ¡å™¨ä¼šè°ƒç”¨ publishStream æ–¹æ³•åœ¨æœåŠ¡ç«¯åˆ›å»º IncomingStream å®ä¾‹ï¼Œè¿™æ ·å½“å®¢æˆ·ç«¯çš„æ•°æ®åˆ°è¾¾æœåŠ¡å™¨ç«¯åï¼Œå°±å¯ä»¥å°†æ•°æ®äº¤ç»™ IncomingStream æš‚å­˜èµ·æ¥ï¼Œä»¥å¤‡åé¢åˆ†å‘ç»™å…¶ä»–ç»ˆç«¯ã€‚</p><p>é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæ–°åŠ å…¥çš„å®¢æˆ·ç«¯å°±å¯ä»¥çœ‹åˆ°ä¼šè®®ä¸­å…¶ä»–äººåˆ†äº«çš„éŸ³è§†é¢‘æµäº†ï¼ŒåŒæ—¶è¿˜å¯ä»¥å°†è‡ªå·±çš„éŸ³è§†é¢‘æ¨é€åˆ°æœåŠ¡å™¨äº†ã€‚ä½†æ­¤æ—¶ï¼Œå…¶ä»–å‚ä¼šäººè¿˜çœ‹ä¸åˆ°æ–°åŠ å…¥ç”¨æˆ·çš„éŸ³è§†é¢‘æµï¼Œå› ä¸ºè¿˜æœ‰å…³é”®çš„ä¸€æ­¥æ²¡æœ‰å®Œæˆã€‚</p><p>è¿™<strong>å…³é”®çš„ä¸€æ­¥</strong>æ˜¯ï¼Œå½“æ–°å‚ä¼šäººä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼ŒæœåŠ¡ç«¯è¦å‘é€å¹¿æ’­æ¶ˆæ¯ï¼ˆupdateï¼‰ é€šçŸ¥æ‰€æœ‰å·²ç»åœ¨ä¼šä¸­çš„å…¶ä»–äººï¼Œæœ‰æ–°ç”¨æˆ·è¿›æ¥äº†ï¼Œéœ€è¦é‡æ–°è¿›è¡Œåª’ä½“åå•†ã€‚<strong>åªæœ‰é‡æ–°åª’ä½“åå•†ä¹‹åï¼Œå…¶ä»–å‚ä¼šäººæ‰èƒ½çœ‹åˆ°æ–°å…¥ä¼šäººçš„éŸ³è§†é¢‘æµ</strong>ã€‚</p><p>ä»¥ä¸Šæ­¥éª¤å°±æ˜¯ä¸€ä¸ªæ–°å‚ä¼šè€…åŠ å…¥ä¼šè®®çš„å¤§è‡´è¿‡ç¨‹ï¼ŒåŒæ—¶ä¹Ÿä»‹ç»äº†è¿™ä¸ªè¿‡ç¨‹ä¸­å…¶ä»–å·²ç»åœ¨ä¼šä¸­çš„å‚ä¸äººéœ€è¦å¦‚ä½•å¤„ç†ã€‚</p><h2>å°ç»“</h2><p>æœ¬æ–‡æˆ‘ä»¬é¦–å…ˆä»‹ç»äº†é€šè¿‡ Medooze SFU å¦‚ä½•æ­å»ºæœ€ç®€å•çš„éŸ³è§†é¢‘ä¼šè®®ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿæ­å»ºå¥½åå°±å¯ä»¥è¿›è¡Œå¤šäººéŸ³è§†é¢‘äº’åŠ¨çš„â€œå®éªŒâ€äº†ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å¯¹Medooze çš„ SFU é¡¹ç›®çš„é€»è¾‘åšäº†è¯¦ç»†ä»‹ç»ï¼Œåˆ†æäº†Medooze SFUçš„åŸºæœ¬æ¶æ„ã€é€»è¾‘å¤„ç†ã€å…¥ä¼šæµç¨‹ç­‰ã€‚ç›¸ä¿¡é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ å¯¹ Medooze çš„ä½¿ç”¨å’Œå®ç°åŸç†éƒ½ä¼šæœ‰æ›´æ·±åˆ»çš„è®¤è¯†ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœä½ è¦æƒ³åœ¨è‡ªå·±çš„äº§å“ä¸­æ›´å¥½åœ°åº”ç”¨ Medoozeï¼Œè¿˜éœ€è¦æŒæ¡æ›´å¤šçš„ç»†èŠ‚ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½åšåˆ°å¿ƒä¸­æœ‰æ•°ã€‚æ¯”å¦‚ï¼šå¦‚ä½•èƒ½å¤Ÿæ‰¿æ‹…ç™¾ä¸‡ç”¨æˆ·çº§çš„è´Ÿè½½ï¼Ÿå¦‚ä½•ä¸ºä¸åŒçš„çš„åœ°åŒºã€ä¸åŒçš„è¿è¥å•†çš„ç”¨æˆ·æä¾›ä¼˜è´¨çš„æœåŠ¡ï¼Ÿè¿™äº›éƒ½æ˜¯ä½ éœ€è¦è¿›ä¸€æ­¥ç ”ç©¶å’Œå­¦ä¹ çš„ã€‚</p><h2>æ€è€ƒæ—¶é—´</h2><p>ä»Šå¤©ç•™ç»™ä½ çš„æ€è€ƒé¢˜ï¼šä¸€ä¸ªå¤šäººå­˜åœ¨çš„ä¼šè®®ä¸­ï¼Œåˆæœ‰ä¸€ä¸ªäººåŠ å…¥è¿›æ¥ï¼Œå…¶ä»–å‚ä¼šäººæ˜¯å¦‚ä½•çœ‹åˆ°ååŠ å…¥äººçš„è§†é¢‘æµçš„å‘¢ï¼Ÿä½ æ¸…æ¥šå…¶ä¸­çš„åŸç†å—ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":261850,"user_name":"å¼ æ˜Œæµ·185","can_delete":false,"product_type":"c1","uid":1077784,"ip_address":"","ucode":"C047EEB16EF3DE","user_header":"https://static001.geekbang.org/account/avatar/00/10/72/18/a0b03020.jpg","comment_is_top":false,"comment_ctime":1605537740,"is_pvip":false,"replies":[{"id":"95275","content":"ä½ çœ‹ä¸€ä¸‹ SDPã€€é‚£ç¯‡æ–‡ç« ï¼Œé‡Œè¾¹æœ‰ SSRCï¼Œå°±æ˜¯ç”¨è¿™ä¸ªæ¥åŒºåˆ†","user_name":"ä½œè€…å›å¤","comment_id":261850,"uid":"1507837","ip_address":"","utype":1,"ctime":1605767903,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":1,"race_medal":0,"score":"5900505036","product_id":100031801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªé—®é¢˜æä¸æ¸…æ¥šï¼Œå°±æ˜¯sfuæ¨¡å¼ä¸­å¤šäººé€šè¯ï¼Œæ¥æ”¶ç€æ€ä¹ˆåˆ¤æ–­æ”¶åˆ°çš„åª’ä½“æ•°æ®ï¼Œæ˜¯å“ªä¸€ä¸ªç”¨æˆ·å‘å‡ºçš„å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":509636,"discussion_content":"ä½ çœ‹ä¸€ä¸‹ SDPã€€é‚£ç¯‡æ–‡ç« ï¼Œé‡Œè¾¹æœ‰ SSRCï¼Œå°±æ˜¯ç”¨è¿™ä¸ªæ¥åŒºåˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605767903,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151363,"user_name":"å¤§é­”ç‹","can_delete":false,"product_type":"c1","uid":1308552,"ip_address":"","ucode":"5EB049D18E122F","user_header":"https://static001.geekbang.org/account/avatar/00/13/f7/88/da243c77.jpg","comment_is_top":false,"comment_ctime":1573706551,"is_pvip":false,"replies":[{"id":"58295","content":"medooze demoå±äºåº”ç”¨å±‚ï¼Œmedooze-server-nodeæ˜¯åŸºç¡€åº“ï¼Œmedooze demo ä½¿ç”¨ meddoze-server-node å®ç°å¤šäººé€šä¿¡ã€‚","user_name":"ä½œè€…å›å¤","comment_id":151363,"uid":"1507837","ip_address":"","utype":1,"ctime":1573779776,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"5868673847","product_id":100031801,"comment_content":"è€å¸ˆ,è¿™ä¸ªå’Œä¹‹å‰çš„medooze-server-node åŒºåˆ«æ˜¯ä»€ä¹ˆå•Š","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474455,"discussion_content":"medooze demoå±äºåº”ç”¨å±‚ï¼Œmedooze-server-nodeæ˜¯åŸºç¡€åº“ï¼Œmedooze demo ä½¿ç”¨ meddoze-server-node å®ç°å¤šäººé€šä¿¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573779776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145699,"user_name":"No","can_delete":false,"product_type":"c1","uid":1470568,"ip_address":"","ucode":"542274058177E4","user_header":"https://static001.geekbang.org/account/avatar/00/16/70/68/0fc42e2d.jpg","comment_is_top":false,"comment_ctime":1572347923,"is_pvip":false,"replies":[{"id":"57405","content":"åº”è¯¥æ˜¯ npm ç‰ˆæœ¬çš„é—®é¢˜, æˆ‘è¿™é‡Œçš„ npm ç‰ˆæœ¬æ˜¯ 6.4.1","user_name":"ä½œè€…å›å¤","comment_id":145699,"uid":"1507837","ip_address":"","utype":1,"ctime":1573192088,"user_name_real":"garrylee"}],"discussion_count":5,"race_medal":0,"score":"5867315219","product_id":100031801,"comment_content":"&#47;src&#47;media-server_wrap.cxx: At global scope:<br>..&#47;src&#47;media-server_wrap.cxx:909:7: error: â€˜Handleâ€™ in namespace â€˜v8â€™ does not name a template type<br>   v8::Handle&lt;v8::Value&gt; err;<br>       ^<br>..&#47;src&#47;media-server_wrap.cxx: In member function â€˜virtual void OverloadErrorHandler::error(int, const char*)â€™:<br>..&#47;src&#47;media-server_wrap.cxx:904:5: error: â€˜errâ€™ was not declared in this scope<br>     err = v8::Exception::Error(SWIGV8_STRING_NEW(msg));<br>è€å¸ˆï¼Œæˆ‘ npm install çš„æ—¶å€™æŠ¥é”™äº†ã€‚ è¿™æ˜¯nodejs ç‰ˆæœ¬é—®é¢˜å—ï¼Ÿ<br><br>æˆ‘çš„ç‰ˆæœ¬ <br> node -v v12.13.0<br> node-gyp -v v5.0.5<br>ç³»ç»Ÿæ˜¯ Ubuntu 16.04  ","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472534,"discussion_content":"åº”è¯¥æ˜¯ npm ç‰ˆæœ¬çš„é—®é¢˜, æˆ‘è¿™é‡Œçš„ npm ç‰ˆæœ¬æ˜¯ 6.4.1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573192088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000620,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/ac/c84fa0c3.jpg","nickname":"Hadooper","note":"","ucode":"8F6ED4BF9E5AAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":58398,"discussion_content":"æˆ‘æ˜¯åŒæ ·çš„é—®é¢˜ï¼Œæ¢äº†npmè¿˜æ˜¯ä¸€æ ·çš„æŠ¥é”™","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574673507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2350496,"avatar":"https://static001.geekbang.org/account/avatar/00/23/dd/a0/a94a9c7d.jpg","nickname":"ï½ğŸ˜„ ï½","note":"","ucode":"064418636AFFD9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344747,"discussion_content":"è¿™ä¸ªé—®é¢˜è§£å†³äº†å—ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611567065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1988170,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/3giaicn2VaDJicDD7WnaT9mB5VbaF6J7aQszN4W9BVmSWmKoVFxTuN7iaDDgrKhlFp49k1iacvjMYSH3eejVbaH0Vhw/132","nickname":"sam","note":"","ucode":"D9DFFABC941E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290272,"discussion_content":"è¿™ä¸ªæ˜¯nodeç‰ˆæœ¬é—®é¢˜ï¼Œé€€åˆ°11å°±è¡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594393842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1175405,"avatar":"","nickname":"Randy586","note":"","ucode":"36DB4174145F45","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":194291,"discussion_content":"æè€å¸ˆï¼Œæˆ‘ç”¨v12.16.1ï¼Œä¹Ÿæ˜¯æŠ¥è¿™é”™ï¼Œæ˜¯ä¸æ˜¯å¿…é¡»å›é€€åˆ°6.xçš„ç‰ˆæœ¬ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583203201,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335470,"user_name":"expecting","can_delete":false,"product_type":"c1","uid":1377376,"ip_address":"","ucode":"1528740DC34DF4","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/60/20c6a3f2.jpg","comment_is_top":false,"comment_ctime":1645529963,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645529963","product_id":100031801,"comment_content":"sfu.jsé‡Œçš„æœ‰äº›æ–¹æ³•å·²ç»åºŸå¼ƒï¼Œéœ€è¦æ›´æ–°æ‰èƒ½è·‘èµ·æ¥<br>createEncodedVideoStreams --&gt; createEncodedStreams<br>forceEncodedVideoInsertableStreams --&gt; encodedInsertableStreams<br>readableStream --&gt; readable<br>writableStream --&gt; writable","like_count":0},{"had_liked":false,"id":332227,"user_name":"å¼ºè€…ä¹‹é£","can_delete":false,"product_type":"c1","uid":1500643,"ip_address":"","ucode":"E7608F908B87E1","user_header":"https://static001.geekbang.org/account/avatar/00/16/e5/e3/06aa87b5.jpg","comment_is_top":false,"comment_ctime":1643100264,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643100264","product_id":100031801,"comment_content":"æè€å¸ˆæˆ‘ç¡®è®¤ä¸€ä¸‹ï¼Œsfu demoï¼Œæ˜¯ä¸æ˜¯npm install å°±å¯ä»¥äº†ï¼Œ ä¸éœ€è¦å¦å¤–ç¼–è¯‘medooze-server-nodeï¼Œsfuä¾èµ–æœ‰medooze-server-node,npm install ä¼šè‡ªåŠ¨ç¼–è¯‘ã€‚","like_count":0},{"had_liked":false,"id":318248,"user_name":"Geek_f6186b","can_delete":false,"product_type":"c1","uid":2825285,"ip_address":"","ucode":"C7CBC4D59B2403","user_header":"","comment_is_top":false,"comment_ctime":1635215428,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635215428","product_id":100031801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼Œè¯·é—®ä¸‹ä¸ºä»€ä¹ˆç™»å½•ä¸ä¸Šå»äº†å‘¢ï¼Ÿï¼Ÿæˆ‘æŒ‰ç…§æ‚¨çš„è¦æ±‚éƒ½æ­å»ºæˆåŠŸäº†ã€‚å¯æ˜¯å°±ç™»å½•ä¸ä¸Šå»å“‡ï¼Œ","like_count":0},{"had_liked":false,"id":290158,"user_name":"é˜¿è‰¯","can_delete":false,"product_type":"c1","uid":1969314,"ip_address":"","ucode":"AD8EBD69D38DC0","user_header":"https://static001.geekbang.org/account/avatar/00/1e/0c/a2/14c30983.jpg","comment_is_top":false,"comment_ctime":1619407503,"is_pvip":false,"replies":[{"id":"105419","content":"ä½ çš„æœåŠ¡å™¨éƒ¨ç½²åœ¨è‡ªå·±æœ¬æœºå—ï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":290158,"uid":"1507837","ip_address":"","utype":1,"ctime":1619870593,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":2,"race_medal":0,"score":"1619407503","product_id":100031801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æ­å»ºmedoozeä¹‹åï¼ŒæœåŠ¡é¡ºåˆ©è·‘èµ·æ¥äº†ï¼Œä½†æ˜¯åªèƒ½çœ‹åˆ°è‡ªå·±çš„å›¾åƒï¼Œè€Œæ²¡æ³•çœ‹åˆ°å…¶ä»–äººçš„ã€‚æˆ‘è°ƒè¯•å‘ç°ä»–ä»¬çš„videoçš„idç¼–ç ä¸ä¸€è‡´ï¼Œæƒ³å¾€è¿™æ–¹é¢è°ƒè¯•ï¼Œä½†æ˜¯åœ¨è¯„è®ºåŒºæ²¡çœ‹åˆ°å°ä¼™ä¼´æœ‰è¿™æ ·çš„é—®é¢˜ï¼Œæ‰€ä»¥æƒ³è·Ÿè€å¸ˆè¯·æ•™ä¸‹ï¼Œæˆ‘é‡åˆ°çš„è¿™ä¸ªé—®é¢˜æœ‰å¯èƒ½æ˜¯ä»€ä¹ˆå¼•èµ·çš„ï¼Ÿå¦‚æœ‰å¯èƒ½ï¼Œèƒ½å¦æä¾›æµ‹è¯•å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„demoï¼Œæ„Ÿè°¢~","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519127,"discussion_content":"ä½ çš„æœåŠ¡å™¨éƒ¨ç½²åœ¨è‡ªå·±æœ¬æœºå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619870593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1969314,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/0c/a2/14c30983.jpg","nickname":"é˜¿è‰¯","note":"","ucode":"AD8EBD69D38DC0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580654,"discussion_content":"éƒ¨ç½²åˆ°å†…ç½‘æœåŠ¡å™¨ä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658306628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288627,"user_name":"Her later","can_delete":false,"product_type":"c1","uid":2033044,"ip_address":"","ucode":"85BDB2DC93C0F2","user_header":"https://static001.geekbang.org/account/avatar/00/1f/05/94/e55abef3.jpg","comment_is_top":false,"comment_ctime":1618566560,"is_pvip":false,"replies":[{"id":"105425","content":"æœåŠ¡ç«¯ä¹Ÿæ˜¯ä¸€ä¸ªwebrtc å®¢æˆ·ç«¯å‘€","user_name":"ä½œè€…å›å¤","comment_id":288627,"uid":"1507837","ip_address":"","utype":1,"ctime":1619871026,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":1,"race_medal":0,"score":"1618566560","product_id":100031801,"comment_content":"å¤§ä½¬ æ‚¨å¥½ ï¼š <br>offer å’Œ answer éƒ½æ˜¯å®¢æˆ·ç«¯è‡ªå·±åˆ›å»ºçš„ ï¼Œé‚£RTCPeerConnection  æ€ä¹ˆçŸ¥é“è¦æŠŠæµæ¨åˆ°è‡ªå·±çš„ä¸­è½¬æœåŠ¡å™¨å‘¢ ã€‚<br>æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯æ˜¯æ€ä¹ˆå¾—åˆ°çš„å‘¢ ï¼Œæ˜¯å¦offerå’Œanswerå‘é€åˆ°ä¿¡ä»¤æœåŠ¡å™¨å ï¼Œä¿¡ä»¤æœåŠ¡å™¨å¯¹å…¶è¿›è¡Œäº†å°è£…ï¼Ÿ ","like_count":1,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518687,"discussion_content":"æœåŠ¡ç«¯ä¹Ÿæ˜¯ä¸€ä¸ªwebrtc å®¢æˆ·ç«¯å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619871026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266844,"user_name":"ä¼šé£çš„çŒª","can_delete":false,"product_type":"c1","uid":1612014,"ip_address":"","ucode":"0C90B1DE7FB3E8","user_header":"https://static001.geekbang.org/account/avatar/00/18/98/ee/43bb6c11.jpg","comment_is_top":false,"comment_ctime":1607504120,"is_pvip":false,"replies":[{"id":"103811","content":"Medooze å½•åˆ¶å‡ºçš„åº”è¯¥æ˜¯mp4v2 æ™®é€šæ’­æ”¾å™¨æ”¾ä¸äº†ï¼Œä½ è¦ç”¨å®ƒæä¾›çš„å·¥å…·è½¬ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","comment_id":266844,"uid":"1507837","ip_address":"","utype":1,"ctime":1617074294,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":1,"race_medal":0,"score":"1607504120","product_id":100031801,"comment_content":"è€å¸ˆï¼Œç”¨medoozeå½•åˆ¶çš„mp4è§†é¢‘ä¸èƒ½æ’­æ”¾ï¼Œæ‚¨æœ‰é‡åˆ°è¿‡å—ï¼Ÿ<br>const recorder = MediaServer.createRecorder (ts +&quot;.mp4&quot;,{<br>\t\t\trefresh : 1000,<br>\t\t\ttimeShift : 6000,<br>\t\t\tdisableHints : true,<br>\t\t\twaitForIntra: true<br>\t\t});<br>\t\trecorder.record(incomingStream);","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511407,"discussion_content":"Medooze å½•åˆ¶å‡ºçš„åº”è¯¥æ˜¯mp4v2 æ™®é€šæ’­æ”¾å™¨æ”¾ä¸äº†ï¼Œä½ è¦ç”¨å®ƒæä¾›çš„å·¥å…·è½¬ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617074294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251946,"user_name":"å¼ ä¸€ç”»","can_delete":false,"product_type":"c1","uid":1935262,"ip_address":"","ucode":"53209E3BD46FC3","user_header":"https://static001.geekbang.org/account/avatar/00/1d/87/9e/e18f55ec.jpg","comment_is_top":false,"comment_ctime":1601995627,"is_pvip":false,"replies":[{"id":"94547","content":"è¯ä¹¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ç”¨äºå‘å¸ƒhttpå®¢æˆ·ç«¯çš„è¯ä¹¦ï¼›å¦ä¸€ä¸ªæ˜¯medoozeè‡ªå·±ä¼ æ•°æ®ç”¨çš„è¯ä¹¦ï¼›<br><br>å¯¹äºæµè§ˆå™¨æ¥è¯´ï¼Œå¿…é¡»ç”¨æƒå¨æœºæ„å‘å¸ƒçš„ï¼Œè€Œmedoozeå¯ä»¥ç”¨è‡ªå®šä¹‰çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":251946,"uid":"1507837","ip_address":"","utype":1,"ctime":1605004068,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":1,"race_medal":0,"score":"1601995627","product_id":100031801,"comment_content":"è€å¸ˆ æˆ‘æœ‰ä¸€äº›ä¸å¤ªç†è§£ è¿™ä¸€è¯¾é‡Œé¢çš„HTTPSè¯ä¹¦ä¸ºä»€ä¹ˆæ˜¯è‡ªå·±ç”Ÿæˆ æˆ‘è®°å¾—æ‚¨ä¹‹å‰è¯´å¿…é¡»æ˜¯æƒå¨æœºæ„å‘å¸ƒçš„è¯ä¹¦","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506672,"discussion_content":"è¯ä¹¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ç”¨äºå‘å¸ƒhttpå®¢æˆ·ç«¯çš„è¯ä¹¦ï¼›å¦ä¸€ä¸ªæ˜¯medoozeè‡ªå·±ä¼ æ•°æ®ç”¨çš„è¯ä¹¦ï¼›\n\nå¯¹äºæµè§ˆå™¨æ¥è¯´ï¼Œå¿…é¡»ç”¨æƒå¨æœºæ„å‘å¸ƒçš„ï¼Œè€Œmedoozeå¯ä»¥ç”¨è‡ªå®šä¹‰çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605004068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":246527,"user_name":"Geek_sky","can_delete":false,"product_type":"c1","uid":1733288,"ip_address":"","ucode":"BBFE6FF1193873","user_header":"https://static001.geekbang.org/account/avatar/00/1a/72/a8/c24a66a1.jpg","comment_is_top":false,"comment_ctime":1599392412,"is_pvip":false,"replies":[{"id":"91441","content":"è¿™æ˜¯ä½ è‡ªå·±çš„ç¨‹åºè¿˜æ˜¯ demoæŠ¥çš„é”™ï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":246527,"uid":"1507837","ip_address":"","utype":1,"ctime":1600529678,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":3,"race_medal":0,"score":"1599392412","product_id":100031801,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿™è¾¹è¿æ¥çš„æ—¶å€™é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼š<br>VM479:1 Uncaught DOMException: Failed to execute &#39;createEncodedVideoStreams&#39; on &#39;RTCRtpSender&#39;: Encoded video streams not requested at PC initialization<br>    at eval (eval at ws.onopen (https:&#47;&#47;192.168.50.150:8084&#47;js&#47;sfu.js:264:36), &lt;anonymous&gt;:1:8)<br>    at WebSocket.ws.onopen (https:&#47;&#47;192.168.50.150:8084&#47;js&#47;sfu.js:264:36)<br>æˆ‘æ¢äº†createEncodedStreamsï¼Œä¹Ÿä¸è¡Œã€‚è¿™æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿchromeæ˜¯ä¸æ˜¯éœ€è¦è®¾ç½®ä»€ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505174,"discussion_content":"è¿™æ˜¯ä½ è‡ªå·±çš„ç¨‹åºè¿˜æ˜¯ demoæŠ¥çš„é”™ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600529678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1138916,"avatar":"https://static001.geekbang.org/account/avatar/00/11/60/e4/d2389115.jpg","nickname":"é‰´é‰´ï¼ˆBillï¼‰","note":"","ucode":"D7CD780D817F68","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361965,"discussion_content":"è¿™ä¸ªæ–¹æ³•å·²ç»è¢«æ›¿æ¢ä¸º createEncodedStreamsäº†ï¼Œå¯ä»¥è‡ªå·±æ”¹ä¸‹jsã€‚ä½†æ˜¯\nchromeæµè§ˆå™¨å’Œfirefoxçš„æœ€æ–°ç‰ˆéƒ½æ˜¯ä¼šæŠ¥é”™ï¼Œä¼°è®¡éœ€è¦è€ç‰ˆæœ¬æ‰è¡ŒT_T","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616814463,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1733288,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/72/a8/c24a66a1.jpg","nickname":"Geek_sky","note":"","ucode":"BBFE6FF1193873","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309400,"discussion_content":"æ˜¯è·‘demoç¨‹åºï¼Œä½¿ç”¨chromeæ‰“å¼€ç½‘é¡µï¼Œåœ¨consoleä¸­çœ‹åˆ°çš„æŠ¥é”™ã€‚æˆ‘æ¥ç€å°±æ›´æ–°äº†chromeï¼Œå‘ç°è¿˜æ˜¯æœ‰è¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601279950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233701,"user_name":"sam","can_delete":false,"product_type":"c1","uid":1988170,"ip_address":"","ucode":"D9DFFABC941E6A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3giaicn2VaDJicDD7WnaT9mB5VbaF6J7aQszN4W9BVmSWmKoVFxTuN7iaDDgrKhlFp49k1iacvjMYSH3eejVbaH0Vhw/132","comment_is_top":false,"comment_ctime":1594394628,"is_pvip":false,"replies":[{"id":"87923","content":"å¯ä»¥æ‰“å¼€æµè§ˆå™¨çš„dev tools çœ‹ä¸€ä¸‹æŠ¥å•¥é”™äº†","user_name":"ä½œè€…å›å¤","comment_id":233701,"uid":"1507837","ip_address":"","utype":1,"ctime":1596023911,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":2,"race_medal":0,"score":"1594394628","product_id":100031801,"comment_content":"è·‘èµ·æ¥ååˆ°é¡µé¢åŠ å…¥æˆ¿é—´ï¼Œç‚¹readyåé¡µé¢åˆ·æ–°ä¸€ä¸‹è¿˜æ˜¯å¼¹çª—è®©åŠ å…¥æˆ¿é—´æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œè²Œä¼¼ä¹Ÿæ‰¾ä¸åˆ°log","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501137,"discussion_content":"å¯ä»¥æ‰“å¼€æµè§ˆå™¨çš„dev tools çœ‹ä¸€ä¸‹æŠ¥å•¥é”™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596023911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981915,"avatar":"","nickname":"å®‡å®™ä¹‹ç‹","note":"","ucode":"5E6C28F8CCFF6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311119,"discussion_content":"å“¥ä»¬ä½ æ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ï¼Œæ€ä¹ˆé…ç½®çš„å•Šèƒ½äº¤æµä¸€ä¸‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602228593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224056,"user_name":"è¡Œæ‰€å½“è¡Œ","can_delete":false,"product_type":"c1","uid":1922457,"ip_address":"","ucode":"1B36BDA6D3562A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/WgRsoJMxcTMcDkRlR59jCDLux2JDdtz1G8Ophe3a7EnhP8lqOdFw8F7sURXkRTYXibzVicozrQ8HFYj578myJ0CA/132","comment_is_top":false,"comment_ctime":1591263657,"is_pvip":false,"replies":[{"id":"84442","content":"â€œinsertable streamsâ€ï¼Œæ˜¯æœ€è¿‘çš„ ç«¯åˆ°ç«¯ åŠ å¯†æŠ€æœ¯ï¼Œè¿™ä¸ªæç¤ºå°±ä½ æ˜¯chromeä¸æ”¯æŒï¼Œä½†ä¸åº”è¯¥å½±å“ä½ æ­£ç¡®çš„é€šè¯æ‰å¯¹ã€‚","user_name":"ä½œè€…å›å¤","comment_id":224056,"uid":"1507837","ip_address":"","utype":1,"ctime":1592879069,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":8,"race_medal":0,"score":"1591263657","product_id":100031801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œåœ¨å®¢æˆ·ç«¯çš„chromeæ‰“å¼€index.htmlï¼Œæç¤º: Your browser does not support insertable streamsï¼Œchromeç‰ˆæœ¬83.0.4103.61(æ­£å¼ç‰ˆæœ¬)(64ä½)ï¼Œè¿™ä¸ªæ˜¯æµè§ˆå™¨ç‰ˆæœ¬é—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497348,"discussion_content":"â€œinsertable streamsâ€ï¼Œæ˜¯æœ€è¿‘çš„ ç«¯åˆ°ç«¯ åŠ å¯†æŠ€æœ¯ï¼Œè¿™ä¸ªæç¤ºå°±ä½ æ˜¯chromeä¸æ”¯æŒï¼Œä½†ä¸åº”è¯¥å½±å“ä½ æ­£ç¡®çš„é€šè¯æ‰å¯¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592879069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1768793,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/fd/59/7f653e69.jpg","nickname":"noâ€†ne","note":"","ucode":"15295B9864D4C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":405656,"discussion_content":"è¿™é‡Œé¢Crypto keyä¸è®¾ç½®å¥½åƒä¹Ÿè¡Œ,æŠ¥çš„é”™å°±æ˜¯è¿™ä¸ªkeyå€¼æ˜¯ç©ºçš„.æˆ–è€…ä¹Ÿå¯ä»¥æŠŠsfu.jsé‡Œé¢çš„if (!supportsInsertableStreams)\n      dialog.querySelector(&#39;#key&#39;).parentElement.innerHTML =\n        &#39;<red>Your browser does not support insertable streams<red>&#39;æ³¨é‡Šæ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634613668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1922457,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/WgRsoJMxcTMcDkRlR59jCDLux2JDdtz1G8Ophe3a7EnhP8lqOdFw8F7sURXkRTYXibzVicozrQ8HFYj578myJ0CA/132","nickname":"è¡Œæ‰€å½“è¡Œ","note":"","ucode":"1B36BDA6D3562A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285645,"discussion_content":"ç‚¹äº†RANDOMæŒ‰é’®å†ç‚¹READY!æŒ‰é’®åï¼Œç•Œé¢é—ªä¸€ä¸‹ï¼Œæ ‡çº¢äº†nameçš„ç©ºæ ï¼Œå¥½åƒæ˜¯æƒ³æç¤ºå¡«å†™çš„åå­—æœ‰é—®é¢˜ï¼Œå¯æ˜¯å…·ä½“ä»€ä¹ˆé—®é¢˜ä¸çŸ¥é“ï¼Œæ¢äº†å‡ ä¸ªåå­—ä¹Ÿä¸è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592903438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103919,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d8/2f/43601694.jpg","nickname":"Patrick","note":"","ucode":"A49803CD6EB2C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280375,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™ä¸ªé—®é¢˜ï¼Œè¯·é—®ä¸€ä¸‹ï¼Œè§£å†³äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591534365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1922457,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/WgRsoJMxcTMcDkRlR59jCDLux2JDdtz1G8Ophe3a7EnhP8lqOdFw8F7sURXkRTYXibzVicozrQ8HFYj578myJ0CA/132","nickname":"è¡Œæ‰€å½“è¡Œ","note":"","ucode":"1B36BDA6D3562A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1103919,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d8/2f/43601694.jpg","nickname":"Patrick","note":"","ucode":"A49803CD6EB2C6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280836,"discussion_content":"æ²¡æœ‰ï¼Œæ¢äº†å¥½å‡ ä¸ªç‰ˆæœ¬çš„è°·æ­Œæµè§ˆå™¨è¿˜æ˜¯ä¸€æ ·ä¸è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591618845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":280375,"ip_address":""},"score":280836,"extra":""},{"author":{"id":1103919,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d8/2f/43601694.jpg","nickname":"Patrick","note":"","ucode":"A49803CD6EB2C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1922457,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/WgRsoJMxcTMcDkRlR59jCDLux2JDdtz1G8Ophe3a7EnhP8lqOdFw8F7sURXkRTYXibzVicozrQ8HFYj578myJ0CA/132","nickname":"è¡Œæ‰€å½“è¡Œ","note":"","ucode":"1B36BDA6D3562A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281418,"discussion_content":"checkoutè¿™ä¸ªè¯¾ç¨‹ä¹‹å‰çš„æœ€æ–°ç‰ˆæœ¬å°±è¡Œäº†ï¼Œæˆ‘æ˜¯è¿™ä¹ˆæçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591740992,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":280836,"ip_address":""},"score":281418,"extra":""},{"author":{"id":1922457,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/WgRsoJMxcTMcDkRlR59jCDLux2JDdtz1G8Ophe3a7EnhP8lqOdFw8F7sURXkRTYXibzVicozrQ8HFYj578myJ0CA/132","nickname":"è¡Œæ‰€å½“è¡Œ","note":"","ucode":"1B36BDA6D3562A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1103919,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d8/2f/43601694.jpg","nickname":"Patrick","note":"","ucode":"A49803CD6EB2C6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281597,"discussion_content":"éº»çƒ¦é—®ä¸€ä¸‹ä½ å…·ä½“ç”¨çš„å“ªä¸ªç‰ˆæœ¬ï¼Œæˆ‘åˆè¯•äº†69å’Œ77è¿˜æ˜¯ä¸è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591772504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":281418,"ip_address":""},"score":281597,"extra":""}]}]},{"had_liked":false,"id":215106,"user_name":"dayu","can_delete":false,"product_type":"c1","uid":1214458,"ip_address":"","ucode":"1C21338B85EADA","user_header":"https://static001.geekbang.org/account/avatar/00/12/87/fa/403e82ea.jpg","comment_is_top":false,"comment_ctime":1588906044,"is_pvip":false,"replies":[{"id":"81388","content":"å¯ä»¥å‘€ï¼","user_name":"ä½œè€…å›å¤","comment_id":215106,"uid":"1507837","ip_address":"","utype":1,"ctime":1590294332,"user_name_real":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…"}],"discussion_count":1,"race_medal":0,"score":"1588906044","product_id":100031801,"comment_content":"è€å¸ˆï¼Œå¯ä»¥åŸºäºmedoozeå¼€å‘å®‰å“ç‰ˆçš„è§†é¢‘ä¼šè®®ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494318,"discussion_content":"å¯ä»¥å‘€ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590294332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194701,"user_name":"pyg","can_delete":false,"product_type":"c1","uid":1907014,"ip_address":"","ucode":"B236121671E113","user_header":"","comment_is_top":false,"comment_ctime":1585098302,"is_pvip":false,"replies":[{"id":"74303","content":"å¦‚æœæ˜¯æœ¬åœ°çš„è¯ä¸€èˆ¬ä¸åº”è¯¥å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œä½ æ£€æŸ¥ä¸€ä¸‹æ‘„åƒå¤´æ‰“å¼€äº†å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":194701,"uid":"1507837","ip_address":"","utype":1,"ctime":1585204196,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"1585098302","product_id":100031801,"comment_content":"è€å¸ˆæˆ‘åœ¨æœ¬åœ°è¿è¡Œäº†sfuæœåŠ¡ï¼Œæ‰“å¼€äº†ä¸¤ä¸ªChromeçª—å£ï¼Œä½†æ˜¯äº’ç›¸çœ‹ä¸è§å¯¹æ–¹ã€‚å“ªäº›åŸå› ä¼šå¯¼è‡´è¿™æ ·å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488875,"discussion_content":"å¦‚æœæ˜¯æœ¬åœ°çš„è¯ä¸€èˆ¬ä¸åº”è¯¥å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œä½ æ£€æŸ¥ä¸€ä¸‹æ‘„åƒå¤´æ‰“å¼€äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585204196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1907014,"avatar":"","nickname":"pyg","note":"","ucode":"B236121671E113","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214663,"discussion_content":"æ˜¯åœ¨å¤–ç½‘ï¼Œæ‰¾åˆ°åŸå› äº†ï¼Œå› ä¸ºUDPç«¯å£æ²¡æœ‰å¼€æ”¾ã€‚ç°åœ¨èƒ½çœ‹è§å¯¹æ–¹äº†ï¼Œä½†æ˜¯è²Œä¼¼åªèƒ½çœ‹è§ç¬¬ä¸€å¸§ï¼Œåé¢è§†é¢‘å°±ä¸åŠ¨äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585223807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194246,"user_name":"é™ˆé¾™","can_delete":false,"product_type":"c1","uid":1859140,"ip_address":"","ucode":"FF9D40E72D3ED6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/xaL9uxibkT3AKspw9bPYXnsibQJztSjY1vxiceovK5UUHA3AsCCJEfJtR1fOzHxADz13OR8rktgQxIiaO1YOXsByiaQ/132","comment_is_top":false,"comment_ctime":1585041072,"is_pvip":false,"replies":[{"id":"74022","content":"ä½ å…‹éš†ä»£ç æ—¶ä½¿ç”¨å¾ªç¯å…‹éš†è¯•è¯•ï¼Œgit clone --recursive https:&#47;&#47;xxxx.git","user_name":"ä½œè€…å›å¤","comment_id":194246,"uid":"1507837","ip_address":"","utype":1,"ctime":1585055971,"user_name_real":"garrylee"}],"discussion_count":4,"race_medal":0,"score":"1585041072","product_id":100031801,"comment_content":"è€å¸ˆï¼ŒcentOS 6.5 npm install å¤±è´¥<br>make: *** [Release&#47;obj.target&#47;medooze-media-server&#47;src&#47;media-server_wrap.o] Error 1<br>make: *** Waiting for unfinished jobs....<br>..&#47;media-server&#47;src&#47;RTPTransport.cpp: In member function â€˜int RTPTransport::SetLocalCryptoSDES(const char*, const uint8_t*, uint32_t)â€™:<br>..&#47;media-server&#47;src&#47;RTPTransport.cpp:219:22: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]<br>  if (len!=policy.rtp.cipher_key_len)<br>                      ^<br>..&#47;media-server&#47;src&#47;RTPTransport.cpp: In member function â€˜int RTPTransport::SetRemoteCryptoSDES(const char*, const uint8_t*, uint32_t)â€™:<br>..&#47;media-server&#47;src&#47;RTPTransport.cpp:363:22: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]<br>  if (len!=policy.rtp.cipher_key_len)<br>                      ^<br>make: Leaving directory `&#47;home&#47;chenlong&#47;sfu-master&#47;node_modules&#47;medooze-media-server&#47;build&#39;<br>gyp ERR! build error <br>gyp ERR! stack Error: `make` failed with exit code: 2<br>gyp ERR! stack     at ChildProcess.onExit (&#47;home&#47;chenlong&#47;node-v12.16.1-linux-x64&#47;lib&#47;node_modules&#47;npm&#47;node_modules&#47;node-gyp&#47;lib&#47;build.js:194:23)<br>gyp ERR! stack     at ChildProcess.emit (events.js:311:20)<br>gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal&#47;child_process.js:275:12)<br>gyp ERR! System Linux 3.10.5-3.el6.x86_64<br>gyp ERR! command &quot;&#47;home&#47;chenlong&#47;node-v12.16.1-linux-x64&#47;bin&#47;node&quot; &quot;&#47;home&#47;chenlong&#47;node-v12.16.1-linux-x64&#47;lib&#47;node_modules&#47;npm&#47;node_modules&#47;node-gyp&#47;bin&#47;node-gyp.js&quot; &quot;rebuild&quot; &quot;--jobs=max&quot;<br>gyp ERR! cwd &#47;home&#47;chenlong&#47;sfu-master&#47;node_modules&#47;medooze-media-server<br>gyp ERR! node -v v12.16.1<br>gyp ERR! node-gyp -v v5.0.5<br>gyp ERR! not ok <br>npm ERR! code ELIFECYCLE<br>npm ERR! errno 1<br>npm ERR! medooze-media-server@0.27.2 install: `test -f build&#47;Release&#47;medooze-media-server.node || (node-gyp configure &amp;&amp; node-gyp rebuild --jobs=max)`<br>npm ERR! Exit status 1<br>npm ERR! <br>npm ERR! Failed at the medooze-media-server@0.27.2 install script.<br><br>","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488789,"discussion_content":"ä½ å…‹éš†ä»£ç æ—¶ä½¿ç”¨å¾ªç¯å…‹éš†è¯•è¯•ï¼Œgit clone --recursive https://xxxx.git","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585055971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1935262,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/87/9e/e18f55ec.jpg","nickname":"å¼ ä¸€ç”»","note":"","ucode":"53209E3BD46FC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310645,"discussion_content":"æ¥¼ä¸»åæ¥è§£å†³äº†å—ï¼Œæˆ‘çš„centOS7ä¹Ÿå®‰è£…ä¸è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601968877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225618,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b3/92/3fe36d79.jpg","nickname":"å¹³è¡¡ä¹‹ç¾","note":"","ucode":"810AE2EAF9918C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283251,"discussion_content":"æ€ä¹ˆè§£å†³çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592223077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1859140,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/xaL9uxibkT3AKspw9bPYXnsibQJztSjY1vxiceovK5UUHA3AsCCJEfJtR1fOzHxADz13OR8rktgQxIiaO1YOXsByiaQ/132","nickname":"é™ˆé¾™","note":"","ucode":"FF9D40E72D3ED6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216103,"discussion_content":"è¯•è¿‡äº†ï¼Œè¿˜æ˜¯ä¸è¡Œï¼Œå¯èƒ½è¿™ä¸ªé¡¹ç›®æœ€è¿‘æœ‰ä¿®æ”¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585406235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176420,"user_name":"æª¸æª¬ç¨»","can_delete":false,"product_type":"c1","uid":1497893,"ip_address":"","ucode":"DD13B8793F024D","user_header":"https://static001.geekbang.org/account/avatar/00/16/db/25/47fd129d.jpg","comment_is_top":false,"comment_ctime":1581055410,"is_pvip":false,"replies":[{"id":"70156","content":"ä½ åœ¨æ‹‰å–ä»£ç æ—¶ï¼Œè¦åŠ ä¸ªé‡‡ç”¨å¾ªç¯æ‹‰å–çš„å‚æ•°ã€‚è¿™æ ·å®ƒæ‰èƒ½å°†ä¾èµ–ä¹Ÿä¸‹è½½ä¸‹æ¥ã€‚ä½ è¯•è¯•çœ‹","user_name":"ä½œè€…å›å¤","comment_id":176420,"uid":"1507837","ip_address":"","utype":1,"ctime":1582429981,"user_name_real":"garrylee"}],"discussion_count":3,"race_medal":0,"score":"1581055410","product_id":100031801,"comment_content":"æœ€åå¡åœ¨ï¼Œ<br>æˆ‘çš„ç‰ˆæœ¬<br> node 12.15.0&#47;10.13.0<br> npm 6.4.1<br>ç³»ç»Ÿæ˜¯ Ubuntu 18.04 &#47;Ubuntu 14.04<br>è¿™äº›éƒ½è¯•äº†ï¼ŒopenSSL ä¸¤ä¸ªç‰ˆæœ¬ä¹Ÿè¯•äº†1.1.1ä¸1.0.2dæœ€åå¡åœ¨ nodeè¿è¡Œä¸èµ·æ¥<br>internal&#47;modules&#47;cjs&#47;loader.js:717                                                                                      <br>  return process.dlopen(module, path.toNamespacedPath(filename));                                                       <br>                 ^                                                                                                      <br>                                                                                                                        <br>Error: &#47;root&#47;sfu&#47;node_modules&#47;medooze-media-server&#47;build&#47;Release&#47;medooze-media-server.node: undefined symbol: HMAC_CTX_i<br>nit                                                                                                                     <br>    at Object.Module._extensions..node (internal&#47;modules&#47;cjs&#47;loader.js:717:18)                                          <br>    at Module.load (internal&#47;modules&#47;cjs&#47;loader.js:598:32)                                                              <br>    at tryModuleLoad (internal&#47;modules&#47;cjs&#47;loader.js:537:12)                                                            <br>    at Function.Module._load (internal&#47;modules&#47;cjs&#47;loader.js:529:3)                                                     <br>    at Module.require (internal&#47;modules&#47;cjs&#47;loader.js:636:17)                                                           <br>    at require (internal&#47;modules&#47;cjs&#47;helpers.js:20:18)                                                                  <br>    at Object.&lt;anonymous&gt; (&#47;root&#47;sfu&#47;node_modules&#47;medooze-media-server&#47;lib&#47;Native.js:10:19)                             <br>    at Module._compile (internal&#47;modules&#47;cjs&#47;loader.js:688:30)                                             ","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483098,"discussion_content":"ä½ åœ¨æ‹‰å–ä»£ç æ—¶ï¼Œè¦åŠ ä¸ªé‡‡ç”¨å¾ªç¯æ‹‰å–çš„å‚æ•°ã€‚è¿™æ ·å®ƒæ‰èƒ½å°†ä¾èµ–ä¹Ÿä¸‹è½½ä¸‹æ¥ã€‚ä½ è¯•è¯•çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582429981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225618,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b3/92/3fe36d79.jpg","nickname":"å¹³è¡¡ä¹‹ç¾","note":"","ucode":"810AE2EAF9918C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283279,"discussion_content":"è€æ¹¿ æ€ä¹ˆè§£å†³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592227063,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1225618,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b3/92/3fe36d79.jpg","nickname":"å¹³è¡¡ä¹‹ç¾","note":"","ucode":"810AE2EAF9918C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":283278,"discussion_content":"è¿˜æ˜¯ä¸å¾—è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592227037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167793,"user_name":"ralph","can_delete":false,"product_type":"c1","uid":1145808,"ip_address":"","ucode":"7CAFE2B0B8E894","user_header":"https://static001.geekbang.org/account/avatar/00/11/7b/d0/e39b1875.jpg","comment_is_top":false,"comment_ctime":1577935674,"is_pvip":false,"replies":[{"id":"66414","content":"è¿™ä¸ªä¸“æ é‡Œå·²ç»è®²äº†å‘€","user_name":"ä½œè€…å›å¤","comment_id":167793,"uid":"1507837","ip_address":"","utype":1,"ctime":1578897913,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1577935674","product_id":100031801,"comment_content":"è€å¸ˆï¼Œèƒ½ä¸èƒ½æé«˜ä¸€ä¸ªè§†é¢‘é€šä¿¡çš„ä¾‹å­ï¼ŒéŸ³é¢‘çš„çœ‹å®Œï¼Œè¿˜æ˜¯æ²¡æƒ³æ˜ç™½è§†é¢‘æ€ä¹ˆå¼„.....","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479995,"discussion_content":"è¿™ä¸ªä¸“æ é‡Œå·²ç»è®²äº†å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578897913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166545,"user_name":"é¢œå¹¿æ°","can_delete":false,"product_type":"c1","uid":1033508,"ip_address":"","ucode":"90FA7789DE7240","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/24/dbc4d29d.jpg","comment_is_top":false,"comment_ctime":1577492999,"is_pvip":false,"replies":[{"id":"66417","content":"åº”è¯¥æ˜¯ä»£ç ä¸‹è½½çš„æœ‰é—®é¢˜","user_name":"ä½œè€…å›å¤","comment_id":166545,"uid":"1507837","ip_address":"","utype":1,"ctime":1578898067,"user_name_real":"garrylee"}],"discussion_count":3,"race_medal":0,"score":"1577492999","product_id":100031801,"comment_content":"å®‰è£…è¿‡ç¨‹æœ‰æŠ¥é”™ï¼Œç„¶åè¿è¡Œä¹‹åæŠ¥é”™ã€‚root@iZwz9isydglfcdgnqd84a4Z:&#47;home&#47;sfu# node index.js 47.112.45.177<br>&#47;home&#47;sfu&#47;lib&#47;Room.js:59<br>                this.activeSpeakerDetector = MediaServer.createActiveSpeakerDetector();<br>                                                         ^<br><br>TypeError: MediaServer.createActiveSpeakerDetector is not a function<br>    at new Room (&#47;home&#47;sfu&#47;lib&#47;Room.js:59:44)<br>    at WebSocketServer.ws.on (&#47;home&#47;sfu&#47;index.js:116:10)<br>    at WebSocketServer.emit (events.js:198:13)<br>    at WebSocketServer.handleUpgrade (&#47;home&#47;sfu&#47;node_modules&#47;websocket&#47;lib&#47;WebSocketServer.js:213:14)<br>    at Server.emit (events.js:198:13)<br>    at onParserExecuteCommon (_http_server.js:555:14)<br>    at onParserExecute (_http_server.js:501:3)<br><br>","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479536,"discussion_content":"åº”è¯¥æ˜¯ä»£ç ä¸‹è½½çš„æœ‰é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578898067,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208340,"avatar":"https://static001.geekbang.org/account/avatar/00/12/70/14/96dbc740.jpg","nickname":"éƒ­æ™“æ˜","note":"","ucode":"DC438D6A91CB59","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115521,"discussion_content":"å·²è§£å†³ã€‚åˆ é™¤package-lock.json åˆ é™¤å·²ä¸‹è½½çš„node_modulesæ–‡ä»¶å¤¹ã€‚é‡æ–°npm install. ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578017333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208340,"avatar":"https://static001.geekbang.org/account/avatar/00/12/70/14/96dbc740.jpg","nickname":"éƒ­æ™“æ˜","note":"","ucode":"DC438D6A91CB59","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115481,"discussion_content":"æˆ‘ä¹ŸæŠ¥è¿™ä¸ªé”™ï¼Œå…„å¼Ÿè§£å†³äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578015570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":166544,"user_name":"é¢œå¹¿æ°","can_delete":false,"product_type":"c1","uid":1033508,"ip_address":"","ucode":"90FA7789DE7240","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c5/24/dbc4d29d.jpg","comment_is_top":false,"comment_ctime":1577492804,"is_pvip":false,"replies":[{"id":"66626","content":"æ²¡é‡åˆ°ä½ è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯ä¸æ˜¯ä½ çš„opensslçš„ç‰ˆæœ¬å¤ªä½äº†ï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":166544,"uid":"1507837","ip_address":"","utype":1,"ctime":1579016280,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1577492804","product_id":100031801,"comment_content":"..&#47;external&#47;mp4v2&#47;lib&#47;src&#47;itmf&#47;type.cpp:258:1: warning: missing initializer for member â€˜mp4v2::impl::Enum&lt;mp4v2::impl::itmf::ContentRating, (mp4v2::impl::itmf::ContentRating)255&gt;::Entry::formalâ€™ [-Wmissing-field-initializers]<br>..&#47;external&#47;mp4v2&#47;lib&#47;src&#47;itmf&#47;type.cpp:290:5: warning: missing initializer for member â€˜mp4v2::impl::itmf::{anonymous}::ImageHeader::dataâ€™ [-Wmissing-field-initializers]<br>     };<br><br>..&#47;media-server&#47;src&#47;stunmessage.cpp: In static member function â€˜static STUNMessage* STUNMessage::Parse(uint8_t*, uint32_t)â€™:<br>..&#47;media-server&#47;src&#47;stunmessage.cpp:106:8: warning: variable â€˜posMessageIntegrityâ€™ set but not used [-Wunused-but-set-variable]<br>  DWORD posMessageIntegrity = 0;<br>        ^~~~~~~~~~~~~~~~~~~<br><br>&#47;root&#47;.node-gyp&#47;10.18.0&#47;include&#47;node&#47;openssl&#47;ssl.h:1895:45: note: declared here<br> DEPRECATEDIN_1_1_0(__owur const SSL_METHOD *DTLSv1_method(void)) &#47;* DTLSv1.0 *&#47;<br>                                             ^<br>&#47;root&#47;.node-gyp&#47;10.18.0&#47;include&#47;node&#47;openssl&#47;.&#47;.&#47;archs&#47;linux-x86_64&#47;asm&#47;include&#47;openssl&#47;opensslconf.h:124:37: note: in definition of macro â€˜DECLARE_DEPRECATEDâ€™<br>ç³»ç»Ÿæ˜¯ é˜¿é‡Œäº‘ Ubuntu 18.04<br>node v10.18.0<br>npm 6.4.1<br>è€å¸ˆï¼Œå°è¯•äº†å¥½å‡ æ¬¡ï¼ŒæŠ¥äº†å¥½å¤šé”™ã€‚","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479535,"discussion_content":"æ²¡é‡åˆ°ä½ è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯ä¸æ˜¯ä½ çš„opensslçš„ç‰ˆæœ¬å¤ªä½äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579016280,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155273,"user_name":"Hadooper","can_delete":false,"product_type":"c1","uid":1000620,"ip_address":"","ucode":"8F6ED4BF9E5AAB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/44/ac/c84fa0c3.jpg","comment_is_top":false,"comment_ctime":1574673206,"is_pvip":false,"replies":[{"id":"60309","content":"æŠ¥ä»€ä¹ˆé”™å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","comment_id":155273,"uid":"1507837","ip_address":"","utype":1,"ctime":1575103512,"user_name_real":"garrylee"}],"discussion_count":3,"race_medal":0,"score":"1574673206","product_id":100031801,"comment_content":"ä¸ç®¡ç”¨ubuntu18è¿˜æ˜¯centos7ï¼Œç”¨12çš„nodejsæ€ä¹ˆç¼–è¯‘éƒ½å¤±è´¥ï¼Œå®Œå…¨æ²¡åŠæ³•","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475708,"discussion_content":"æŠ¥ä»€ä¹ˆé”™å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575103512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103540,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d6/b4/0808999d.jpg","nickname":"ç™½é©¬","note":"","ucode":"FD4DA715AC5984","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328831,"discussion_content":"å¾—çœ‹å…·ä½“é”™è¯¯æ˜¯ä»€ä¹ˆï¼Œæˆ‘åˆšå¼€å§‹ä¹Ÿç¼–è¯‘å¤±è´¥ï¼Œæ ¹æ®é”™è¯¯æç¤ºè§£å†³é—®é¢˜åæˆåŠŸç¼–è¯‘äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606235137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1981915,"avatar":"","nickname":"å®‡å®™ä¹‹ç‹","note":"","ucode":"5E6C28F8CCFF6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311134,"discussion_content":"å“¥ä»¬ä½ åæ¥è§£å†³äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602232966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":136283,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1053390,"ip_address":"","ucode":"ABB3F1A63E102A","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/ce/a8c8b5e8.jpg","comment_is_top":false,"comment_ctime":1569403009,"is_pvip":false,"replies":[{"id":"52388","content":"å•å°500äººï¼Œä¸»è¦è¿˜å’Œä½ çš„å¸¦å®½æœ‰å¾ˆå¤§å…³ç³»ã€‚SFUæ¶æ„å›¾æˆ‘æ›´æ–°ä¸€ä¸‹ï¼ŒæŠ±æ­‰ï¼æŠ±æ­‰ï¼","user_name":"ä½œè€…å›å¤","comment_id":136283,"uid":"1507837","ip_address":"","utype":1,"ctime":1569493664,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1569403009","product_id":100031801,"comment_content":" è€å¸ˆå¥½ï¼Œå’±ä»¬æ­å»ºçš„medoozeçš„demoèƒ½æ‰¿æ‹…å¤šå°‘ç”¨æˆ·çš„è´Ÿè½½ï¼Ÿå¦å¤–ï¼Œsfuæ¶æ„å›¾æœ‰ä¸ªåˆ«å•è¯æ‹¼å†™é”™è¯¯ï¼Œç™½ç’§å¾®ç‘•^^","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468542,"discussion_content":"å•å°500äººï¼Œä¸»è¦è¿˜å’Œä½ çš„å¸¦å®½æœ‰å¾ˆå¤§å…³ç³»ã€‚SFUæ¶æ„å›¾æˆ‘æ›´æ–°ä¸€ä¸‹ï¼ŒæŠ±æ­‰ï¼æŠ±æ­‰ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569493664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135203,"user_name":"accessory","can_delete":false,"product_type":"c1","uid":1455454,"ip_address":"","ucode":"988A99ACF03611","user_header":"https://static001.geekbang.org/account/avatar/00/16/35/5e/7a584fed.jpg","comment_is_top":false,"comment_ctime":1569059205,"is_pvip":false,"replies":[{"id":"51881","content":"è¿›å…¥åˆ° sfuï¼Œé‡æ–°æ‰§è¡Œnpm install çœ‹çœ‹ä¼šæŠ¥é”™å—","user_name":"ä½œè€…å›å¤","comment_id":135203,"uid":"1507837","ip_address":"","utype":1,"ctime":1569066254,"user_name_real":"garrylee"}],"discussion_count":2,"race_medal":0,"score":"1569059205","product_id":100031801,"comment_content":"&#47;home&#47;toney&#47;source&#47;sfu&#47;lib&#47;Room.js:59<br>\t\tthis.activeSpeakerDetector = MediaServer.createActiveSpeakerDetector();<br>\t\t                                         ^<br><br>TypeError: MediaServer.createActiveSpeakerDetector is not a function<br>    at new Room (&#47;home&#47;toney&#47;source&#47;sfu&#47;lib&#47;Room.js:59:44)<br>    at WebSocketServer.ws.on (&#47;home&#47;toney&#47;source&#47;sfu&#47;index.js:116:10)<br>    at WebSocketServer.emit (events.js:198:13)<br>    at WebSocketServer.handleUpgrade (&#47;home&#47;toney&#47;source&#47;sfu&#47;node_modules&#47;websocket&#47;lib&#47;WebSocketServer.js:213:14)<br>    at Server.emit (events.js:198:13)<br>    at onParserExecuteCommon (_http_server.js:553:14)<br>    at onParserExecute (_http_server.js:499:3)<br><br>æŒ‰ç…§è¯¾ç¨‹ä¸­æ­å»ºäº†æœåŠ¡ï¼Œä½¿ç”¨æµè§ˆå™¨è®¿é—®æœåŠ¡ï¼Œè¾“å…¥ roomidï¼Œnameï¼Œç‚¹å‡» ready æŒ‰é’®ï¼Œsfu å°± crash äº†ï¼Œè¯·é—®è€å¸ˆæ”¹å¦‚ä½•è§£å†³","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468093,"discussion_content":"è¿›å…¥åˆ° sfuï¼Œé‡æ–°æ‰§è¡Œnpm install çœ‹çœ‹ä¼šæŠ¥é”™å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569066254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1455454,"avatar":"https://static001.geekbang.org/account/avatar/00/16/35/5e/7a584fed.jpg","nickname":"accessory","note":"","ucode":"988A99ACF03611","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":18595,"discussion_content":"è°¢è°¢ï¼Œå·²è§£å†³ æŠŠ package-lock.json æ–‡ä»¶åˆ é™¤ï¼Œé‡æ–° npm install å°±å¯ä»¥äº†ï¼ŒçŒœæµ‹æ˜¯æ˜¯ package-lock.json ä¸­ medooze-media-server çš„ç‰ˆæœ¬å¤ªè€äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1569071485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134741,"user_name":"frank","can_delete":false,"product_type":"c1","uid":1448674,"ip_address":"","ucode":"0D15C35E6A6A7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/1a/e2/f88bf28f.jpg","comment_is_top":false,"comment_ctime":1568906913,"is_pvip":false,"replies":[{"id":"51879","content":"å†ä»”ç»†çœ‹çœ‹ä»£ç å“ˆï¼Œè¿™ä¸ªçŸ¥è¯†ç‚¹éå¸¸å…³é”®ï¼","user_name":"ä½œè€…å›å¤","comment_id":134741,"uid":"1507837","ip_address":"","utype":1,"ctime":1569066146,"user_name_real":"garrylee"}],"discussion_count":1,"race_medal":0,"score":"1568906913","product_id":100031801,"comment_content":"ä¸æ‡‚nodejsï¼Œå¤§è‡´çœ‹äº†ä¸‹ï¼Œåº”è¯¥æ˜¯participant.on(&#39;stream&#39; è¿™è¾¹ï¼Œä½†æ˜¯streamæ€ä¹ˆè§¦å‘å°±ä¸çŸ¥é“äº†","like_count":0,"discussions":[{"author":{"id":1507837,"avatar":"https://static001.geekbang.org/account/avatar/00/17/01/fd/69869646.jpg","nickname":"éŸ³è§†é¢‘ä¸“å®¶-æè¶…","note":"","ucode":"5557943CF28441","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467884,"discussion_content":"å†ä»”ç»†çœ‹çœ‹ä»£ç å“ˆï¼Œè¿™ä¸ªçŸ¥è¯†ç‚¹éå¸¸å…³é”®ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569066146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}