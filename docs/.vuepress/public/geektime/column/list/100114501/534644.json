{"id":534644,"title":"15ï½œå®æˆ˜æ¼”ç»ƒï¼šç©è½¬Kubernetesï¼ˆ1ï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>ç»è¿‡ä¸¤ä¸ªæ˜ŸæœŸçš„å­¦ä¹ ï¼Œåˆ°ä»Šå¤©æˆ‘ä»¬çš„â€œåˆçº§ç¯‡â€ä¹Ÿå¿«è¦ç»“æŸäº†ã€‚</p><p>å’Œä¹‹å‰çš„â€œå…¥é—¨ç¯‡â€ä¸€æ ·ï¼Œåœ¨è¿™æ¬¡è¯¾é‡Œï¼Œæˆ‘ä¹Ÿä¼šå¯¹å‰é¢å­¦è¿‡çš„çŸ¥è¯†åšä¸€ä¸ªæ¯”è¾ƒå…¨é¢çš„å›é¡¾ï¼Œæ¯•ç«ŸKubernetesé¢†åŸŸé‡Œæœ‰å¾ˆå¤šæ–°åè¯ã€æ–°æœ¯è¯­ã€æ–°æ¶æ„ï¼ŒçŸ¥è¯†ç‚¹å¤šä¸”æ‚ï¼Œè¿™æ ·çš„æ€»ç»“å¤ä¹ å°±æ›´æœ‰å¿…è¦ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘è¿˜æ˜¯å…ˆç®€è¦åˆ—ä¸¾ä¸€ä¸‹â€œåˆçº§ç¯‡â€é‡Œè®²åˆ°çš„Kubernetesè¦ç‚¹ï¼Œç„¶åå†ç»¼åˆè¿ç”¨è¿™äº›çŸ¥è¯†ï¼Œæ¼”ç¤ºä¸€ä¸ªå®æˆ˜é¡¹ç›®â€”â€”è¿˜æ˜¯æ­å»ºWordPressç½‘ç«™ï¼Œä¸è¿‡è¿™æ¬¡ä¸æ˜¯åœ¨Dockeré‡Œï¼Œè€Œæ˜¯åœ¨Kubernetesé›†ç¾¤é‡Œã€‚</p><h2>KubernetesæŠ€æœ¯è¦ç‚¹å›é¡¾</h2><p>å®¹å™¨æŠ€æœ¯å¼€å¯äº†äº‘åŸç”Ÿçš„å¤§æ½®ï¼Œä½†æˆç†Ÿçš„å®¹å™¨æŠ€æœ¯ï¼Œåˆ°ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨éƒ¨ç½²çš„æ—¶å€™ï¼Œå´æ˜¾å¾—â€œæ­¥å±¥ç»´è‰°â€ã€‚å› ä¸ºå®¹å™¨åªæ˜¯é’ˆå¯¹å•ä¸ªè¿›ç¨‹çš„éš”ç¦»å’Œå°è£…ï¼Œè€Œå®é™…çš„åº”ç”¨åœºæ™¯å´æ˜¯è¦æ±‚è®¸å¤šçš„åº”ç”¨è¿›ç¨‹äº’ç›¸ååŒå·¥ä½œï¼Œå…¶ä¸­çš„å„ç§å…³ç³»å’Œéœ€æ±‚éå¸¸å¤æ‚ï¼Œåœ¨å®¹å™¨è¿™ä¸ªæŠ€æœ¯å±‚æ¬¡å¾ˆéš¾æŒæ§ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<strong>å®¹å™¨ç¼–æ’</strong>ï¼ˆContainer Orchestrationï¼‰å°±å‡ºç°äº†ï¼Œå®ƒå¯ä»¥è¯´æ˜¯ä»¥å‰çš„è¿ç»´å·¥ä½œåœ¨äº‘åŸç”Ÿä¸–ç•Œçš„è½åœ°å®è·µï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯åœ¨é›†ç¾¤é‡Œè°ƒåº¦ç®¡ç†åº”ç”¨ç¨‹åºï¼Œåªä¸è¿‡ç®¡ç†çš„ä¸»ä½“ç”±äººå˜æˆäº†è®¡ç®—æœºï¼Œç®¡ç†çš„ç›®æ ‡ç”±åŸç”Ÿè¿›ç¨‹å˜æˆäº†å®¹å™¨å’Œé•œåƒã€‚</p><p>è€Œç°åœ¨ï¼Œå®¹å™¨ç¼–æ’é¢†åŸŸçš„ç‹è€…å°±æ˜¯â€”â€”Kubernetesã€‚</p><!-- [[[read_end]]] --><p>Kubernetesæºè‡ªBorgç³»ç»Ÿï¼Œå®ƒå‡èšäº†Googleçš„å†…éƒ¨ç»éªŒå’ŒCNCFçš„ç¤¾åŒºæ™ºæ…§ï¼Œæ‰€ä»¥æˆ˜èƒœäº†ç«äº‰å¯¹æ‰‹Apache Mesoså’ŒDocker Swarmï¼Œæˆä¸ºäº†å®¹å™¨ç¼–æ’é¢†åŸŸçš„äº‹å®æ ‡å‡†ï¼Œä¹Ÿæˆä¸ºäº†äº‘åŸç”Ÿæ—¶ä»£çš„åŸºç¡€æ“ä½œç³»ç»Ÿï¼Œå­¦ä¹ äº‘åŸç”Ÿå°±å¿…é¡»è¦æŒæ¡Kubernetesã€‚</p><p>ï¼ˆ<a href=\"https://time.geekbang.org/column/article/529800\">10è®²</a>ï¼‰Kubernetesçš„<strong>Master/Nodeæ¶æ„</strong>æ˜¯å®ƒå…·æœ‰è‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›çš„å…³é”®ï¼Œä¹Ÿå¯¹æˆ‘ä»¬çš„å­¦ä¹ è‡³å…³é‡è¦ï¼Œè¿™é‡Œæˆ‘å†ç”¨å¦ä¸€å¼ å‚è€ƒæ¶æ„å›¾æ¥ç®€ç•¥è¯´æ˜ä¸€ä¸‹å®ƒçš„è¿è¡Œæœºåˆ¶ï¼ˆ<a href=\"https://kubernetes.io/blog/2018/07/18/11-ways-not-to-get-hacked\">å›¾ç‰‡æ¥æº</a>ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/f4/05/f429ca7114eebf140632409f3fbcbb05.png?wh=1475x852\" alt=\"å›¾ç‰‡\"></p><p>KubernetesæŠŠé›†ç¾¤é‡Œçš„è®¡ç®—èµ„æºå®šä¹‰ä¸ºèŠ‚ç‚¹ï¼ˆNodeï¼‰ï¼Œå…¶ä¸­åˆåˆ’åˆ†æˆæ§åˆ¶é¢å’Œæ•°æ®é¢ä¸¤ç±»ã€‚</p><ul>\n<li>æ§åˆ¶é¢æ˜¯MasterèŠ‚ç‚¹ï¼Œè´Ÿè´£ç®¡ç†é›†ç¾¤å’Œè¿ç»´ç›‘æ§åº”ç”¨ï¼Œé‡Œé¢çš„æ ¸å¿ƒç»„ä»¶æ˜¯<strong>apiserverã€etcdã€schedulerã€controller-manager</strong>ã€‚</li>\n<li>æ•°æ®é¢æ˜¯WorkerèŠ‚ç‚¹ï¼Œå—MasterèŠ‚ç‚¹çš„ç®¡æ§ï¼Œé‡Œé¢çš„æ ¸å¿ƒç»„ä»¶æ˜¯<strong>kubeletã€kube-proxyã€container-runtime</strong>ã€‚</li>\n</ul><p>æ­¤å¤–ï¼ŒKubernetesè¿˜æ”¯æŒæ’ä»¶æœºåˆ¶ï¼Œèƒ½å¤Ÿçµæ´»æ‰©å±•å„é¡¹åŠŸèƒ½ï¼Œå¸¸ç”¨çš„æ’ä»¶æœ‰DNSå’ŒDashboardã€‚</p><p>ä¸ºäº†æ›´å¥½åœ°ç®¡ç†é›†ç¾¤å’Œä¸šåŠ¡åº”ç”¨ï¼ŒKubernetesä»ç°å®ä¸–ç•Œä¸­æŠ½è±¡å‡ºäº†è®¸å¤šæ¦‚å¿µï¼Œç§°ä¸ºâ€œ<strong>APIå¯¹è±¡</strong>â€ï¼Œæè¿°è¿™äº›å¯¹è±¡å°±éœ€è¦ä½¿ç”¨<strong>YAML</strong>è¯­è¨€ã€‚</p><p>YAMLæ˜¯JSONçš„è¶…é›†ï¼Œä½†è¯­æ³•æ›´ç®€æ´ï¼Œè¡¨ç°èƒ½åŠ›æ›´å¼ºï¼Œæ›´é‡è¦çš„æ˜¯å®ƒä»¥â€œ<strong>å£°æ˜å¼</strong>â€æ¥è¡¨è¿°å¯¹è±¡çš„çŠ¶æ€ï¼Œä¸æ¶‰åŠå…·ä½“çš„æ“ä½œç»†èŠ‚ï¼Œè¿™æ ·Kuberneteså°±èƒ½å¤Ÿä¾é å­˜å‚¨åœ¨etcdé‡Œé›†ç¾¤çš„çŠ¶æ€ä¿¡æ¯ï¼Œä¸æ–­åœ°â€œè°ƒæ§â€å¯¹è±¡ï¼Œç›´è‡³å®é™…çŠ¶æ€ä¸æœŸæœ›çŠ¶æ€ç›¸åŒï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯Kubernetesçš„è‡ªåŠ¨åŒ–è¿ç»´ç®¡ç†ï¼ˆ<a href=\"https://time.geekbang.org/column/article/529813\">11è®²</a>ï¼‰ã€‚</p><p>Kubernetesé‡Œæœ‰å¾ˆå¤šçš„APIå¯¹è±¡ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„å¯¹è±¡æ˜¯â€œ<strong>Pod</strong>â€ï¼Œå®ƒæ†ç»‘äº†ä¸€ç»„å­˜åœ¨å¯†åˆ‡åä½œå…³ç³»çš„å®¹å™¨ï¼Œå®¹å™¨ä¹‹é—´å…±äº«ç½‘ç»œå’Œå­˜å‚¨ï¼Œåœ¨é›†ç¾¤é‡Œå¿…é¡»ä¸€èµ·è°ƒåº¦ä¸€èµ·è¿è¡Œã€‚é€šè¿‡Podè¿™ä¸ªæ¦‚å¿µï¼ŒKuberneteså°±ç®€åŒ–äº†å¯¹å®¹å™¨çš„ç®¡ç†å·¥ä½œï¼Œå…¶ä»–çš„æ‰€æœ‰ä»»åŠ¡éƒ½æ˜¯é€šè¿‡å¯¹Podè¿™ä¸ªæœ€å°å•ä½çš„å†åŒ…è£…æ¥å®ç°çš„ï¼ˆ<a href=\"https://time.geekbang.org/column/article/531551\">12è®²</a>ï¼‰ã€‚</p><p>é™¤äº†æ ¸å¿ƒçš„Podå¯¹è±¡ï¼ŒåŸºäºâ€œå•ä¸€èŒè´£â€å’Œâ€œå¯¹è±¡ç»„åˆâ€è¿™ä¸¤ä¸ªåŸºæœ¬åŸåˆ™ï¼Œæˆ‘ä»¬åˆå­¦ä¹ äº†4ä¸ªæ¯”è¾ƒç®€å•çš„APIå¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯<strong>Job/CronJob</strong>å’Œ<strong>ConfigMap</strong>/<strong>Secret</strong>ã€‚</p><ul>\n<li>Job/CronJobå¯¹åº”çš„æ˜¯ç¦»çº¿ä½œä¸šï¼Œå®ƒä»¬é€å±‚åŒ…è£…äº†Podï¼Œæ·»åŠ äº†ä½œä¸šæ§åˆ¶å’Œå®šæ—¶è§„åˆ™ï¼ˆ<a href=\"https://time.geekbang.org/column/article/531566\">13è®²</a>ï¼‰ã€‚</li>\n<li>ConfigMap/Secretå¯¹åº”çš„æ˜¯é…ç½®ä¿¡æ¯ï¼Œéœ€è¦ä»¥ç¯å¢ƒå˜é‡æˆ–è€…å­˜å‚¨å·çš„å½¢å¼æ³¨å…¥è¿›Podï¼Œç„¶åè¿›ç¨‹æ‰èƒ½åœ¨è¿è¡Œæ—¶ä½¿ç”¨ï¼ˆ<a href=\"https://time.geekbang.org/column/article/533395\">14è®²</a>ï¼‰ã€‚</li>\n</ul><p>å’ŒDockerç±»ä¼¼ï¼ŒKubernetesä¹Ÿæä¾›ä¸€ä¸ªå®¢æˆ·ç«¯å·¥å…·ï¼Œåå­—å«â€œ<strong>kubectl</strong>â€ï¼Œå®ƒç›´æ¥ä¸MasterèŠ‚ç‚¹çš„apiserveré€šä¿¡ï¼ŒæŠŠYAMLæ–‡ä»¶å‘é€ç»™RESTfulæ¥å£ï¼Œä»è€Œè§¦å‘Kubernetesçš„å¯¹è±¡ç®¡ç†å·¥ä½œæµç¨‹ã€‚</p><p>kubectlçš„å‘½ä»¤å¾ˆå¤šï¼ŒæŸ¥çœ‹è‡ªå¸¦æ–‡æ¡£å¯ä»¥ç”¨ <code>api-resources</code>ã€<code>explain</code> ï¼ŒæŸ¥çœ‹å¯¹è±¡çŠ¶æ€å¯ä»¥ç”¨ <code>get</code>ã€<code>describe</code>ã€<code>logs</code> ï¼Œæ“ä½œå¯¹è±¡å¯ä»¥ç”¨ <code>run</code>ã€<code>apply</code>ã€<code>exec</code>ã€<code>delete</code> ç­‰ç­‰ï¼ˆ<a href=\"https://time.geekbang.org/column/article/529780\">09è®²</a>ï¼‰ã€‚</p><p>ä½¿ç”¨YAMLæè¿°APIå¯¹è±¡ä¹Ÿæœ‰å›ºå®šçš„æ ¼å¼ï¼Œå¿…é¡»å†™çš„â€œå¤´å­—æ®µâ€æ˜¯â€œ<strong>apiVersion</strong>â€â€œ<strong>kind</strong>â€â€œ<strong>metadata</strong>â€ï¼Œå®ƒä»¬è¡¨ç¤ºå¯¹è±¡çš„ç‰ˆæœ¬ã€ç§ç±»å’Œåå­—ç­‰å…ƒä¿¡æ¯ã€‚å®ä½“å¯¹è±¡å¦‚Podã€Jobã€CronJobä¼šå†æœ‰â€œ<strong>spec</strong>â€å­—æ®µæè¿°å¯¹è±¡çš„æœŸæœ›çŠ¶æ€ï¼Œæœ€åŸºæœ¬çš„å°±æ˜¯å®¹å™¨ä¿¡æ¯ï¼Œéå®ä½“å¯¹è±¡å¦‚ConfigMapã€Secretä½¿ç”¨çš„æ˜¯â€œ<strong>data</strong>â€å­—æ®µï¼Œè®°å½•ä¸€äº›é™æ€çš„å­—ç¬¦ä¸²ä¿¡æ¯ã€‚</p><p>å¥½äº†ï¼Œâ€œåˆçº§ç¯‡â€é‡Œçš„KubernetesçŸ¥è¯†è¦ç‚¹æˆ‘ä»¬å°±åŸºæœ¬æ€»ç»“å®Œäº†ï¼Œå¦‚æœä½ å‘ç°å“ªéƒ¨åˆ†ä¸å¤ªæ¸…æ¥šï¼Œå¯ä»¥è¯¾åå†å¤šå¤ä¹ ä¸€ä¸‹å‰é¢çš„è¯¾ç¨‹åŠ ä»¥å·©å›ºã€‚</p><h2>WordPressç½‘ç«™åŸºæœ¬æ¶æ„</h2><p>ä¸‹é¢æˆ‘ä»¬å°±åœ¨Kubernetesé›†ç¾¤é‡Œå†æ­å»ºå‡ºä¸€ä¸ªWordPressç½‘ç«™ï¼Œç”¨çš„é•œåƒè¿˜æ˜¯â€œå…¥é—¨ç¯‡â€é‡Œçš„é‚£ä¸‰ä¸ªåº”ç”¨ï¼šWordPressã€MariaDBã€Nginxï¼Œä¸è¿‡å½“æ—¶æˆ‘ä»¬æ˜¯ç›´æ¥ä»¥å®¹å™¨çš„å½¢å¼æ¥ä½¿ç”¨å®ƒä»¬ï¼Œç°åœ¨è¦æ”¹æˆPodçš„å½¢å¼ï¼Œè®©å®ƒä»¬è¿è¡Œåœ¨Kubernetesé‡Œã€‚</p><p>æˆ‘è¿˜æ˜¯ç”»äº†ä¸€å¼ ç®€å•çš„æ¶æ„å›¾ï¼Œæ¥è¯´æ˜è¿™ä¸ªç³»ç»Ÿçš„å†…éƒ¨é€»è¾‘å…³ç³»ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/3d/cc/3d9d09078f1200a84c63a7cea2f40bcc.jpg?wh=1920x865\" alt=\"å›¾ç‰‡\"></p><p>ä»è¿™å¼ å›¾ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œç½‘ç«™çš„å¤§ä½“æ¶æ„æ˜¯æ²¡æœ‰å˜åŒ–çš„ï¼Œæ¯•ç«Ÿåº”ç”¨è¿˜æ˜¯é‚£ä¸‰ä¸ªï¼Œå®ƒä»¬çš„è°ƒç”¨ä¾èµ–å…³ç³»ä¹Ÿå¿…ç„¶æ²¡æœ‰å˜åŒ–ã€‚</p><p>é‚£ä¹ˆKubernetesç³»ç»Ÿå’ŒDockerç³»ç»Ÿçš„åŒºåˆ«åˆåœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><p>å…³é”®å°±åœ¨<strong>å¯¹åº”ç”¨çš„å°è£…</strong>å’Œ<strong>ç½‘ç»œç¯å¢ƒ</strong>è¿™ä¸¤ç‚¹ä¸Šã€‚</p><p>ç°åœ¨WordPressã€MariaDBè¿™ä¸¤ä¸ªåº”ç”¨è¢«å°è£…æˆäº†Podï¼ˆç”±äºå®ƒä»¬éƒ½æ˜¯åœ¨çº¿ä¸šåŠ¡ï¼Œæ‰€ä»¥Job/CronJobåœ¨è¿™é‡Œæ´¾ä¸ä¸Šç”¨åœºï¼‰ï¼Œè¿è¡Œæ‰€éœ€çš„ç¯å¢ƒå˜é‡ä¹Ÿéƒ½è¢«æ”¹å†™æˆConfigMapï¼Œç»Ÿä¸€ç”¨â€œå£°æ˜å¼â€æ¥ç®¡ç†ï¼Œæ¯”èµ·Shellè„šæœ¬æ›´å®¹æ˜“é˜…è¯»å’Œç‰ˆæœ¬åŒ–ç®¡ç†ã€‚</p><p>å¦å¤–ï¼ŒKubernetesé›†ç¾¤åœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªè‡ªå·±çš„ä¸“ç”¨ç½‘ç»œï¼Œè¿™ä¸ªç½‘ç»œå’Œå¤–ç•Œéš”ç¦»ï¼Œè¦ç”¨ç‰¹æ®Šçš„â€œç«¯å£è½¬å‘â€æ–¹å¼æ¥ä¼ é€’æ•°æ®ï¼Œè¿˜éœ€è¦åœ¨é›†ç¾¤ä¹‹å¤–ç”¨Nginxåå‘ä»£ç†è¿™ä¸ªåœ°å€ï¼Œè¿™æ ·æ‰èƒ½å®ç°å†…å¤–æ²Ÿé€šï¼Œå¯¹æ¯”Dockerçš„ç›´æ¥ç«¯å£æ˜ å°„ï¼Œè¿™é‡Œç•¥å¾®éº»çƒ¦äº†ä¸€äº›ã€‚</p><h2>WordPressç½‘ç«™æ­å»ºæ­¥éª¤</h2><p>äº†è§£åŸºæœ¬æ¶æ„ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é€æ­¥æ­å»ºè¿™ä¸ªç½‘ç«™ç³»ç»Ÿï¼Œæ€»å…±éœ€è¦4æ­¥ã€‚</p><p><strong>ç¬¬ä¸€æ­¥</strong>å½“ç„¶æ˜¯è¦ç¼–æ’MariaDBå¯¹è±¡ï¼Œå®ƒçš„å…·ä½“è¿è¡Œéœ€æ±‚å¯ä»¥å‚è€ƒâ€œå…¥é—¨ç¯‡â€çš„å®æˆ˜æ¼”ç»ƒè¯¾ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†é‡å¤äº†ã€‚</p><p>MariaDBéœ€è¦4ä¸ªç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚æ•°æ®åº“åã€ç”¨æˆ·åã€å¯†ç ç­‰ï¼Œåœ¨Dockeré‡Œæˆ‘ä»¬æ˜¯åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨å‚æ•° <code>--env</code>ï¼Œè€Œåœ¨Kubernetesé‡Œæˆ‘ä»¬å°±åº”è¯¥ä½¿ç”¨ConfigMapï¼Œä¸ºæ­¤éœ€è¦å®šä¹‰ä¸€ä¸ª <code>maria-cm</code> å¯¹è±¡ï¼š</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: ConfigMap\nmetadata:\n&nbsp; name: maria-cm\n\ndata:\n&nbsp; DATABASE: 'db'\n&nbsp; USER: 'wp'\n&nbsp; PASSWORD: '123'\n&nbsp; ROOT_PASSWORD: '123'\n</code></pre><p>ç„¶åæˆ‘ä»¬å®šä¹‰Podå¯¹è±¡ <code>maria-pod</code>ï¼ŒæŠŠé…ç½®ä¿¡æ¯æ³¨å…¥Podï¼Œè®©MariaDBè¿è¡Œæ—¶ä»ç¯å¢ƒå˜é‡è¯»å–è¿™äº›ä¿¡æ¯ï¼š</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: Pod\nmetadata:\n&nbsp; name: maria-pod\n&nbsp; labels:\n&nbsp; &nbsp; app: wordpress\n&nbsp; &nbsp; role: database\n\nspec:\n&nbsp; containers:\n&nbsp; - image: mariadb:10\n&nbsp; &nbsp; name: maria\n&nbsp; &nbsp; imagePullPolicy: IfNotPresent\n&nbsp; &nbsp; ports:\n&nbsp; &nbsp; - containerPort: 3306\n\n&nbsp; &nbsp; envFrom:\n&nbsp; &nbsp; - prefix: 'MARIADB_'\n&nbsp; &nbsp; &nbsp; configMapRef:\n&nbsp; &nbsp; &nbsp; &nbsp; name: maria-cm\n</code></pre><p>æ³¨æ„è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªæ–°çš„å­—æ®µâ€œ<strong>envFrom</strong>â€ï¼Œè¿™æ˜¯å› ä¸ºConfigMapé‡Œçš„ä¿¡æ¯æ¯”è¾ƒå¤šï¼Œå¦‚æœç”¨ <code>env.valueFrom</code> ä¸€ä¸ªä¸ªåœ°å†™ä¼šéå¸¸éº»çƒ¦ï¼Œå®¹æ˜“å‡ºé”™ï¼Œè€Œ <code>envFrom</code> å¯ä»¥ä¸€æ¬¡æ€§åœ°æŠŠConfigMapé‡Œçš„å­—æ®µå…¨å¯¼å…¥è¿›Podï¼Œå¹¶ä¸”èƒ½å¤ŸæŒ‡å®šå˜é‡åçš„å‰ç¼€ï¼ˆå³è¿™é‡Œçš„ <code>MARIADB_</code>ï¼‰ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><p>ä½¿ç”¨ <code>kubectl apply</code> åˆ›å»ºè¿™ä¸ªå¯¹è±¡ä¹‹åï¼Œå¯ä»¥ç”¨ <code>kubectl get pod</code> æŸ¥çœ‹å®ƒçš„çŠ¶æ€ï¼Œå¦‚æœæƒ³è¦è·å–IPåœ°å€éœ€è¦åŠ ä¸Šå‚æ•° <code>-o wide</code> ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f mariadb-pod.yml\nkubectl get pod -o wide\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/3f/98/3fb0242f97c782f79ecf8ba845c81798.png?wh=1788x362\" alt=\"å›¾ç‰‡\"></p><p>ç°åœ¨æ•°æ®åº“å°±æˆåŠŸåœ°åœ¨Kubernetesé›†ç¾¤é‡Œè·‘èµ·æ¥äº†ï¼ŒIPåœ°å€æ˜¯â€œ172.17.0.2â€ï¼Œæ³¨æ„è¿™ä¸ªåœ°å€å’ŒDockerçš„ä¸åŒï¼Œæ˜¯Kubernetesé‡Œçš„ç§æœ‰ç½‘æ®µã€‚</p><p>æ¥ç€æ˜¯<strong>ç¬¬äºŒæ­¥</strong>ï¼Œç¼–æ’WordPresså¯¹è±¡ï¼Œè¿˜æ˜¯å…ˆç”¨ConfigMapå®šä¹‰å®ƒçš„ç¯å¢ƒå˜é‡ï¼š</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: ConfigMap\nmetadata:\n&nbsp; name: wp-cm\n\ndata:\n&nbsp; HOST: '172.17.0.2'\n&nbsp; USER: 'wp'\n&nbsp; PASSWORD: '123'\n&nbsp; NAME: 'db'\n</code></pre><p>åœ¨è¿™ä¸ªConfigMapé‡Œè¦æ³¨æ„çš„æ˜¯â€œHOSTâ€å­—æ®µï¼Œå®ƒå¿…é¡»æ˜¯MariaDB Podçš„IPåœ°å€ï¼Œå¦‚æœä¸å†™æ­£ç¡®WordPressä¼šæ— æ³•æ­£å¸¸è¿æ¥æ•°æ®åº“ã€‚</p><p>ç„¶åæˆ‘ä»¬å†ç¼–å†™WordPressçš„YAMLæ–‡ä»¶ï¼Œä¸ºäº†ç®€åŒ–ç¯å¢ƒå˜é‡çš„è®¾ç½®åŒæ ·ä½¿ç”¨äº† <code>envFrom</code>ï¼š</p><pre><code class=\"language-yaml\">apiVersion: v1\nkind: Pod\nmetadata:\n&nbsp; name: wp-pod\n&nbsp; labels:\n&nbsp; &nbsp; app: wordpress\n&nbsp; &nbsp; role: website\n\nspec:\n&nbsp; containers:\n&nbsp; - image: wordpress:5\n&nbsp; &nbsp; name: wp-pod\n&nbsp; &nbsp; imagePullPolicy: IfNotPresent\n&nbsp; &nbsp; ports:\n&nbsp; &nbsp; - containerPort: 80\n\n&nbsp; &nbsp; envFrom:\n&nbsp; &nbsp; - prefix: 'WORDPRESS_DB_'\n&nbsp; &nbsp; &nbsp; configMapRef:\n&nbsp; &nbsp; &nbsp; &nbsp; name: wp-cm\n</code></pre><p>æ¥ç€è¿˜æ˜¯ç”¨ <code>kubectl apply</code> åˆ›å»ºå¯¹è±¡ï¼Œ<code>kubectl get pod</code> æŸ¥çœ‹å®ƒçš„çŠ¶æ€ï¼š</p><pre><code class=\"language-plain\">kubectl apply -f wp-pod.yml\nkubectl get pod -o wide\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/d5/de/d5e8c09e70e90179d651bf3c28abc0de.png?wh=1562x426\" alt=\"å›¾ç‰‡\"></p><p><strong>ç¬¬ä¸‰æ­¥</strong>æ˜¯ä¸ºWordPress Podæ˜ å°„ç«¯å£å·ï¼Œè®©å®ƒåœ¨é›†ç¾¤å¤–å¯è§ã€‚</p><p>å› ä¸ºPodéƒ½æ˜¯è¿è¡Œåœ¨Kuberneteså†…éƒ¨çš„ç§æœ‰ç½‘æ®µé‡Œçš„ï¼Œå¤–ç•Œæ— æ³•ç›´æ¥è®¿é—®ï¼Œæƒ³è¦å¯¹å¤–æš´éœ²æœåŠ¡ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„ <code>kubectl port-forward</code> å‘½ä»¤ï¼Œå®ƒä¸“é—¨è´Ÿè´£æŠŠæœ¬æœºçš„ç«¯å£æ˜ å°„åˆ°åœ¨ç›®æ ‡å¯¹è±¡çš„ç«¯å£å·ï¼Œæœ‰ç‚¹ç±»ä¼¼Dockerçš„å‚æ•° <code>-p</code>ï¼Œç»å¸¸ç”¨äºKubernetesçš„ä¸´æ—¶è°ƒè¯•å’Œæµ‹è¯•ã€‚</p><p>ä¸‹é¢æˆ‘å°±æŠŠæœ¬åœ°çš„â€œ8080â€æ˜ å°„åˆ°WordPress Podçš„â€œ80â€ï¼Œkubectlä¼šæŠŠè¿™ä¸ªç«¯å£çš„æ‰€æœ‰æ•°æ®éƒ½è½¬å‘ç»™é›†ç¾¤å†…éƒ¨çš„Podï¼š</p><pre><code class=\"language-plain\">kubectl port-forward wp-pod 8080:80 &amp;\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/d4/be/d445d205ae6f8c966200ffa9ba7f29be.png?wh=1366x240\" alt=\"å›¾ç‰‡\"></p><p>æ³¨æ„åœ¨å‘½ä»¤çš„æœ«å°¾æˆ‘ä½¿ç”¨äº†ä¸€ä¸ª <code>&amp;</code> ç¬¦å·ï¼Œè®©ç«¯å£è½¬å‘å·¥ä½œåœ¨åå°è¿›è¡Œï¼Œè¿™æ ·å°±ä¸ä¼šé˜»ç¢æˆ‘ä»¬åç»­çš„æ“ä½œã€‚</p><p>å¦‚æœæƒ³å…³é—­ç«¯å£è½¬å‘ï¼Œéœ€è¦æ•²å‘½ä»¤ <code>fg</code> ï¼Œå®ƒä¼šæŠŠåå°çš„ä»»åŠ¡å¸¦å›åˆ°å‰å°ï¼Œç„¶åå°±å¯ä»¥ç®€å•åœ°ç”¨â€œCtrl + Câ€æ¥åœæ­¢è½¬å‘äº†ã€‚</p><p><strong>ç¬¬å››æ­¥</strong>æ˜¯åˆ›å»ºåå‘ä»£ç†çš„Nginxï¼Œè®©æˆ‘ä»¬çš„ç½‘ç«™å¯¹å¤–æä¾›æœåŠ¡ã€‚</p><p>è¿™æ˜¯å› ä¸ºWordPressç½‘ç«™ä½¿ç”¨äº†URLé‡å®šå‘ï¼Œç›´æ¥ä½¿ç”¨â€œ8080â€ä¼šå¯¼è‡´è·³è½¬æ•…éšœï¼Œæ‰€ä»¥ä¸ºäº†è®©ç½‘ç«™æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬è¿˜åº”è¯¥åœ¨Kubernetesä¹‹å¤–å¯åŠ¨Nginxåå‘ä»£ç†ï¼Œä¿è¯å¤–ç•Œçœ‹åˆ°çš„ä»ç„¶æ˜¯â€œ80â€ç«¯å£å·ã€‚ï¼ˆè¿™é‡Œçš„ç»†èŠ‚å’Œæˆ‘ä»¬çš„è¯¾ç¨‹å…³ç³»ä¸å¤§ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç•™è¨€æé—®è®¨è®ºï¼‰</p><p>Nginxçš„é…ç½®æ–‡ä»¶å’Œ<a href=\"https://time.geekbang.org/column/article/528740\">ç¬¬7è®²</a>åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯ç›®æ ‡åœ°å€å˜æˆäº†â€œ127.0.0.1:8080â€ï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬åœ¨ç¬¬ä¸‰æ­¥é‡Œç”¨ <code>kubectl port-forward</code> å‘½ä»¤åˆ›å»ºçš„æœ¬åœ°åœ°å€ï¼š</p><pre><code class=\"language-plain\">server {\n&nbsp; listen 80;\n&nbsp; default_type text/html;\n\n&nbsp; location / {\n&nbsp; &nbsp; &nbsp; proxy_http_version 1.1;\n&nbsp; &nbsp; &nbsp; proxy_set_header Host $host;\n&nbsp; &nbsp; &nbsp; proxy_pass http://127.0.0.1:8080;\n&nbsp; }\n}\n</code></pre><p>ç„¶åæˆ‘ä»¬ç”¨ <code>docker run -v</code> å‘½ä»¤åŠ è½½è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œä»¥å®¹å™¨çš„æ–¹å¼å¯åŠ¨è¿™ä¸ªNginxä»£ç†ï¼š</p><pre><code class=\"language-plain\">docker run -d --rm \\\n&nbsp; &nbsp; --net=host \\\n&nbsp; &nbsp; -v /tmp/proxy.conf:/etc/nginx/conf.d/default.conf \\\n&nbsp; &nbsp; nginx:alpine\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/9f/51/9f2b16fb58dbe0a358e26042565f9851.png?wh=1920x238\" alt=\"å›¾ç‰‡\"></p><p>æœ‰äº†Nginxçš„åå‘ä»£ç†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥æœ¬æœºçš„â€œ127.0.0.1â€æˆ–è€…æ˜¯è™šæ‹Ÿæœºçš„IPåœ°å€ï¼ˆæˆ‘è¿™é‡Œä»ç„¶æ˜¯â€œ<a href=\"http://192.168.10.208\">http://192.168.10.208</a>â€ï¼‰ï¼Œçœ‹åˆ°WordPressçš„ç•Œé¢ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/73/f4/735552be9cf6d45ac41a001252ayyef4.png?wh=1524x1858\" alt=\"å›¾ç‰‡\"></p><p>ä½ ä¹Ÿå¯ä»¥åœ¨Kubernetesé‡Œä½¿ç”¨å‘½ä»¤ <code>kubectl logs</code> æŸ¥çœ‹WordPressã€MariaDBç­‰Podçš„è¿è¡Œæ—¥å¿—ï¼Œæ¥éªŒè¯å®ƒä»¬æ˜¯å¦å·²ç»æ­£ç¡®åœ°å“åº”äº†è¯·æ±‚ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/84/62/8498c598e6f3142d490218601acdbc62.png?wh=1920x809\" alt=\"å›¾ç‰‡\"></p><h2>ä½¿ç”¨Dashboardç®¡ç†Kubernetes</h2><p>åˆ°è¿™é‡ŒWordPressç½‘ç«™å°±æ­å»ºæˆåŠŸäº†ï¼Œæˆ‘ä»¬çš„ä¸»è¦ä»»åŠ¡ä¹Ÿç®—æ˜¯å®Œæˆäº†ï¼Œä¸è¿‡æˆ‘è¿˜æƒ³å†å¸¦ä½ çœ‹çœ‹Kubernetesçš„å›¾å½¢ç®¡ç†ç•Œé¢ï¼Œä¹Ÿå°±æ˜¯Dashboardï¼Œçœ‹çœ‹ä¸ç”¨å‘½ä»¤è¡Œè¯¥æ€ä¹ˆç®¡ç†Kubernetesã€‚</p><p>å¯åŠ¨Dashboardçš„å‘½ä»¤ä½ è¿˜è®°å¾—å—ï¼Œåœ¨ç¬¬10èŠ‚è¯¾é‡Œè®²æ’ä»¶çš„æ—¶å€™æ›¾ç»è¯´è¿‡ï¼Œéœ€è¦ç”¨minikubeï¼Œå‘½ä»¤æ˜¯ï¼š</p><pre><code class=\"language-plain\">minikube dashboard\n</code></pre><p>å®ƒä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ç•Œé¢ï¼Œæ˜¾ç¤ºå‡ºå½“å‰Kubernetesé›†ç¾¤é‡Œçš„å·¥ä½œè´Ÿè½½ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/53/59/536eeb176a7737c9ed815c10af0fcf59.png?wh=1920x1022\" alt=\"å›¾ç‰‡\"></p><p>ç‚¹å‡»ä»»æ„ä¸€ä¸ªPodçš„åå­—ï¼Œå°±ä¼šè¿›å…¥ç®¡ç†ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°Podçš„è¯¦ç»†ä¿¡æ¯ï¼Œè€Œå³ä¸Šè§’æœ‰4ä¸ªå¾ˆé‡è¦çš„åŠŸèƒ½ï¼Œåˆ†åˆ«å¯ä»¥æŸ¥çœ‹æ—¥å¿—ã€è¿›å…¥Podå†…éƒ¨ã€ç¼–è¾‘Podå’Œåˆ é™¤Podï¼Œç›¸å½“äºæ‰§è¡Œ <code>logs</code>ã€<code>exec</code>ã€<code>edit</code>ã€<code>delete</code> å‘½ä»¤ï¼Œä½†è¦æ¯”å‘½ä»¤è¡Œè¦ç›´è§‚å‹å¥½çš„å¤šï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d5/28/d5e5131bfb1d6aae2f026177bf283628.png?wh=1920x781\" alt=\"å›¾ç‰‡\"></p><p>æ¯”å¦‚è¯´ï¼Œæˆ‘ç‚¹å‡»äº†ç¬¬äºŒä¸ªæŒ‰é’®ï¼Œå°±ä¼šåœ¨æµè§ˆå™¨é‡Œå¼€å¯ä¸€ä¸ªShellçª—å£ï¼Œç›´æ¥å°±æ˜¯Podçš„å†…éƒ¨Linuxç¯å¢ƒï¼Œåœ¨é‡Œé¢å¯ä»¥è¾“å…¥ä»»æ„çš„å‘½ä»¤ï¼Œæ— è®ºæ˜¯æŸ¥çœ‹çŠ¶æ€è¿˜æ˜¯è°ƒè¯•éƒ½å¾ˆæ–¹ä¾¿ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/46/4c/466c67a48616c946505242d0796ed74c.png?wh=1820x1240\" alt=\"å›¾ç‰‡\"></p><p>ConfigMap/Secretç­‰å¯¹è±¡ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œä»»æ„æŸ¥çœ‹æˆ–ç¼–è¾‘ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/de/22/defyybc05ed793b7966e1f6b68018022.png?wh=1312x976\" alt=\"å›¾ç‰‡\"></p><p>Dashboardé‡Œçš„å¯æ“ä½œçš„åœ°æ–¹è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘åªæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä»‹ç»ã€‚è™½ç„¶ä½ ä¹Ÿè®¸å·²ç»ä¹ æƒ¯äº†ä½¿ç”¨é”®ç›˜å’Œå‘½ä»¤è¡Œï¼Œä½†å¶å°”æ¢ä¸€æ¢å£å‘³ï¼Œæ”¹ç”¨é¼ æ ‡å’Œå›¾å½¢ç•Œé¢æ¥ç®¡ç†Kubernetesä¹Ÿæ˜¯ä»¶æŒºæœ‰æ„æ€çš„äº‹æƒ…ï¼Œæœ‰æœºä¼šä¸å¦¨å°è¯•ä¸€ä¸‹ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä½œä¸ºâ€œåˆçº§ç¯‡â€çš„æœ€åä¸€èŠ‚è¯¾ï¼Œä»Šå¤©æˆ‘ä»¬å›é¡¾äº†ä¸€ä¸‹Kubernetesçš„çŸ¥è¯†è¦ç‚¹ï¼Œæˆ‘è¿˜æ˜¯ç”»ä¸€ä»½è¯¦ç»†çš„æ€ç»´å¯¼å›¾ï¼Œå¸®åŠ©ä½ è¯¾åéšæ—¶å¤ä¹ æ€»ç»“ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/87/1f/87a1d338340c8ca771a97d0fyy4b611f.jpg?wh=1920x1877\" alt=\"å›¾ç‰‡\"></p><p>è¿™èŠ‚è¯¾é‡Œæˆ‘ä»¬ä½¿ç”¨Kubernetesæ­å»ºäº†WordPressç½‘ç«™ï¼Œå’Œç¬¬7è®²é‡Œçš„Dockeræ¯”è¾ƒèµ·æ¥ï¼Œæˆ‘ä»¬åº”ç”¨äº†å®¹å™¨ç¼–æ’æŠ€æœ¯ï¼Œä»¥â€œå£°æ˜å¼â€çš„YAMLæ¥æè¿°åº”ç”¨çš„çŠ¶æ€å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œè€Œä¸ä¼šåˆ—å‡ºè¯¦ç»†çš„æ“ä½œæ­¥éª¤ï¼Œè¿™å°±é™ä½äº†æˆ‘ä»¬çš„å¿ƒæ™ºè´Ÿæ‹…â€”â€”è°ƒåº¦ã€åˆ›å»ºã€ç›‘æ§ç­‰æ‚äº‹éƒ½äº¤ç»™Kuberneteså¤„ç†ï¼Œæˆ‘ä»¬åªéœ€â€œåäº«å…¶æˆâ€ã€‚</p><p>è™½ç„¶æˆ‘ä»¬æœç€äº‘åŸç”Ÿçš„æ–¹å‘è¿ˆå‡ºäº†ä¸€å¤§æ­¥ï¼Œä¸è¿‡ç°åœ¨æˆ‘ä»¬çš„å®¹å™¨ç¼–æ’è¿˜ä¸å¤Ÿå®Œå–„ï¼ŒPodçš„IPåœ°å€è¿˜å¿…é¡»æ‰‹å·¥æŸ¥æ‰¾å¡«å†™ï¼Œç¼ºå°‘è‡ªåŠ¨çš„æœåŠ¡å‘ç°æœºåˆ¶ï¼Œå¦å¤–å¯¹å¤–æš´éœ²æœåŠ¡çš„æ–¹å¼è¿˜å¾ˆåŸå§‹ï¼Œå¿…é¡»è¦ä¾èµ–é›†ç¾¤å¤–éƒ¨åŠ›é‡çš„å¸®åŠ©ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„å­¦ä¹ ä¹‹æ—…è¿˜å°†ç»§ç»­ï¼Œåœ¨æ¥ä¸‹æ¥çš„â€œä¸­çº§ç¯‡â€é‡Œï¼Œä¼šå¼€å§‹ç ”ç©¶æ›´å¤šçš„APIå¯¹è±¡ï¼Œæ¥è§£å†³è¿™é‡Œé‡åˆ°çš„é—®é¢˜ã€‚</p><h2>è¯¾ä¸‹ä½œä¸š</h2><p>æœ€åæ˜¯è¯¾ä¸‹ä½œä¸šæ—¶é—´ï¼Œç»™ä½ ç•™ä¸¤ä¸ªåŠ¨æ‰‹é¢˜ï¼š</p><ol>\n<li>MariaDBã€WordPressç°åœ¨ç”¨çš„æ˜¯ConfigMapï¼Œèƒ½å¦æ”¹ç”¨Secretæ¥å®ç°å‘¢ï¼Ÿ</li>\n<li>ä½ èƒ½å¦æŠŠNginxä»£ç†è½¬æ¢æˆPodçš„å½¢å¼ï¼Œè®©å®ƒåœ¨Kubernetesé‡Œè¿è¡Œå‘¢ï¼Ÿ</li>\n</ol><p>æœŸå¾…èƒ½çœ‹åˆ°ä½ åŠ¨æ‰‹ä½“éªŒåçš„æƒ³æ³•ï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åˆ†äº«ç»™è‡ªå·±èº«è¾¹çš„æœ‹å‹ä¸€èµ·å­¦ä¹ ã€‚</p><p>ä¸‹èŠ‚è¯¾å°±æ˜¯è§†é¢‘æ¼”ç¤ºçš„æ“ä½œè¯¾äº†ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3c/ea/3c3036bc56bb9ec14598342e56c11bea.jpg?wh=1920x1544\" alt=\"å›¾ç‰‡\"></p>","neighbors":{"left":{"article_title":"14ï½œConfigMap/Secretï¼šæ€æ ·é…ç½®ã€å®šåˆ¶æˆ‘çš„åº”ç”¨","id":533395},"right":{"article_title":"16ï½œè§†é¢‘ï¼šåˆçº§ç¯‡å®æ“æ€»ç»“","id":534688}},"comments":[{"had_liked":false,"id":353574,"user_name":"YueShi","can_delete":false,"product_type":"c1","uid":1625530,"ip_address":"ä¸Šæµ·","ucode":"8F7AFAE4641A7D","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","comment_is_top":false,"comment_ctime":1659577594,"is_pvip":true,"replies":[{"id":"128556","content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1659579186,"ip_address":"ä¸Šæµ·","comment_id":353574,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23134414074","product_id":100114501,"comment_content":"Macä¸Šæˆ–è€…Windowä¸Šï¼Œå¯èƒ½å‡ºç°è®¿é—®ä¸åˆ°é—®é¢˜ï¼Œè¿™é‡Œå†™äº†ä¸€ç¯‡æ’æŸ¥é—®é¢˜çš„æ€è·¯ï¼ŒæœŸæœ›èƒ½å¸®åˆ°å„ä½è€æ¿<br><br>https:&#47;&#47;juejin.cn&#47;post&#47;7127679053242302477","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582653,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659579186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582689,"discussion_content":"å…„å¼Ÿï¼Œå¤ªèµäº†ï¼Œè¿™ä¸ªæœ‰ç”¨ï¼Œè§£å†³äº†æˆ‘çš„é—®é¢˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659597855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352502,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1658734051,"is_pvip":false,"replies":[{"id":"128222","content":"YAMLå†™çš„éå¸¸å¥½ï¼Œä¸è¿‡Nginxé…ç½®æ–‡ä»¶é‡Œçš„proxy_passï¼Œåœ°å€ä¸èƒ½æ˜¯127.0.0.1ï¼Œå¿…é¡»æ˜¯WordPress Podçš„åœ°å€ã€‚<br><br>è¿˜æœ‰å› ä¸ºNginx podè¿è¡Œåœ¨Kubernetesé‡Œï¼Œæ˜¯ä¸å¤–ç•Œéš”ç¦»çš„ï¼Œå¿…é¡»è¦ç”¨port-forwardå¤–ç•Œæ‰èƒ½çœ‹åˆ°ï¼Œå¯ä»¥å‚è€ƒWordPressçš„åšæ³•ã€‚<br><br>ä½†è¿™æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œåˆ°ä¸­çº§ç¯‡æˆ‘ä»¬å­¦ä¹ äº†Serviceã€Ingresså°±èƒ½å¤Ÿè½»æ¾è§£å†³äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1181974","ctime":1658789352,"ip_address":"","comment_id":352502,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23133570531","product_id":100114501,"comment_content":"æ€è€ƒé¢˜ 2ï¼Œ<br><br>è¯•ç€å†™å‡ºäº† Pod çš„ YAML æ–‡ä»¶<br><br>apiVersion: v1<br>kind: ConfigMap<br>metadata:<br>  name: ngx-cm<br><br>data:<br>  default.conf: |-<br>    server {<br>      listen 80;<br>      default_type text&#47;html;<br><br>      location &#47; {<br>        proxy_http_version 1.1;<br>        proxy_set_header Host $host;<br>        proxy_pass http:&#47;&#47;127.0.0.1:8080;<br>      }<br>    }<br><br>---<br><br>apiVersion: v1<br>kind: Pod<br>metadata:<br>  name: ngx-pod<br>  labels:<br>    app: nginx-alpine<br>    role: website<br><br>spec:<br>  volumes:<br>    - name: conf<br>      configMap:<br>        name: ngx-cm<br><br>  containers:<br>  - volumeMounts:<br>    - mountPath: &#47;etc&#47;nginx&#47;conf.d&#47;<br>      name: conf<br><br>    image: nginx:alpine<br>    name: ngx-pod<br>    imagePullPolicy: IfNotPresent<br>    ports:<br>    - containerPort: 80<br><br>å¯ä»¥æˆåŠŸåˆ›å»º Podï¼Œnginx çš„é…ç½®æ–‡ä»¶ä¹Ÿè¢«æŒ‚è½½åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œä½†æ˜¯æµè§ˆå™¨è¿˜æ˜¯æ— æ³•è®¿é—® wordpressï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘çš„ YAML æ–‡ä»¶ä¸­å°‘äº†ä»€ä¹ˆğŸ¤”ï¼Œè¿˜æœ›è€å¸ˆæŒ‡ç‚¹","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581427,"discussion_content":"YAMLå†™çš„éå¸¸å¥½ï¼Œä¸è¿‡Nginxé…ç½®æ–‡ä»¶é‡Œçš„proxy_passï¼Œåœ°å€ä¸èƒ½æ˜¯127.0.0.1ï¼Œå¿…é¡»æ˜¯WordPress Podçš„åœ°å€ã€‚\n\nè¿˜æœ‰å› ä¸ºNginx podè¿è¡Œåœ¨Kubernetesé‡Œï¼Œæ˜¯ä¸å¤–ç•Œéš”ç¦»çš„ï¼Œå¿…é¡»è¦ç”¨port-forwardå¤–ç•Œæ‰èƒ½çœ‹åˆ°ï¼Œå¯ä»¥å‚è€ƒWordPressçš„åšæ³•ã€‚\n\nä½†è¿™æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œåˆ°ä¸­çº§ç¯‡æˆ‘ä»¬å­¦ä¹ äº†Serviceã€Ingresså°±èƒ½å¤Ÿè½»æ¾è§£å†³äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658789353,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":581735,"discussion_content":"è€å¸ˆèƒ½è®²ä¸€è®²è¿™é‡Œå¦‚æœå¯¹ Nginx Pod ç”¨ port-forwardï¼Œè¯¥æ€ä¹ˆå®šä¹‰ç«¯å£å’Œ Nginx é…ç½®å—ï¼Ÿ\n\nè¿™é‡Œæˆ‘ä¿æŒå…¶ä»– Pod ä»¥åŠ default.conf ä¸å˜ï¼Œç„¶åä½¿ç”¨\n\nkubectl port-forward ngx-pod 8081:80 &amp;\n\nåœ¨ Mac æµè§ˆå™¨ç«¯ç”¨è™šæ‹Ÿæœºåœ°å€åŠ ç«¯å£å· http://172.16.35.128:8081ï¼Œä½†æ˜¯è¿˜æ˜¯æ˜¾ç¤º â€œThis site canâ€™t be reachedâ€ï¼Œæ— æ³•è®¿é—®\n\nä¸çŸ¥é“æ˜¯ä¸æ˜¯å“ªä¸€æ­¥åšé”™äº†ï¼Œè°¢è°¢è€å¸ˆ ğŸ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658962234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":581427,"ip_address":""},"score":581735,"extra":""},{"author":{"id":1800818,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/7a/72/a86c521e.jpg","nickname":"å…­æœˆ","note":"","ucode":"D94CD05F648A7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583377,"discussion_content":"ç†è®ºä¸Šå¯ä»¥ç”¨å®¹å™¨åä»£æ›¿ipï¼Œdockerå°±å¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660060806,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":581735,"ip_address":"å¹¿ä¸œ"},"score":583377,"extra":""}]}]},{"had_liked":false,"id":352463,"user_name":"æ¤°å­","can_delete":false,"product_type":"c1","uid":2278399,"ip_address":"","ucode":"CD9A5C5496AD62","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKQuaDVYz2jWN9vrmgbB785SNkmYmxf1xzEG8m8ku3ZvzYSkiaanTjqt7O47ficOQUpGmEy7eImplDw/132","comment_is_top":false,"comment_ctime":1658712107,"is_pvip":false,"replies":[{"id":"128200","content":"æ˜¯çš„ï¼Œä¼šå˜åŒ–ï¼Œåˆ°åé¢çš„ä¸­çº§ç¯‡ä¼šç”¨Serviceå¯¹è±¡æ¥è§£å†³ï¼Œè¿™é‡Œæ˜¯ä»dockeråˆ°Kubernetesçš„ä¸€ä¸ªè¿‡æ¸¡é˜¶æ®µã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1658716349,"ip_address":"","comment_id":352463,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14543613995","product_id":100114501,"comment_content":"è€å¸ˆï¼Œç›®å‰Podé…ç½®ä¸­ä½¿ç”¨äº†å›ºå®šIPã€‚å¦‚æœpodè¢«é‡å¯äº†ï¼Œip æ˜¯å¦ä¼šå˜åŒ–ï¼Ÿå¦‚æœæœ‰å˜åŒ–ï¼Œè¿™æ ·é…ç½®æ˜¯å¦æœ‰ç‚¹ä¸åˆç†ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581298,"discussion_content":"æ˜¯çš„ï¼Œä¼šå˜åŒ–ï¼Œåˆ°åé¢çš„ä¸­çº§ç¯‡ä¼šç”¨Serviceå¯¹è±¡æ¥è§£å†³ï¼Œè¿™é‡Œæ˜¯ä»dockeråˆ°Kubernetesçš„ä¸€ä¸ªè¿‡æ¸¡é˜¶æ®µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658716349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352455,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1658691713,"is_pvip":false,"replies":[{"id":"128198","content":"<br>1. ConfigMapå·²ç»å«åœ¨pod yamlé‡Œäº†ï¼Œæ˜¯ç”¨â€œ---â€åˆ†éš”çš„å¤šä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥åˆ›å»ºConfigMapå’Œpodã€‚<br><br>2.åå‘ä»£ç†å°±æ˜¯åœ¨çœŸæ­£ç½‘ç«™ï¼ˆWordPressï¼‰å‰çš„ä¸€ä¸ªä»£ç†è½¯ä»¶ï¼Œæä¾›å®‰å…¨é˜²æŠ¤ç­‰åŠŸèƒ½ï¼Œå¯å‚è€ƒã€Šé€è§†HTTPåè®®ã€‹ã€‚ä¸åŠ è¿™ä¸ªå…¶å®ä¹Ÿå¯ä»¥ï¼Œä¸»è¦çš„ç›®çš„æ˜¯æ¨¡æ‹ŸçœŸå®ç¯å¢ƒï¼Œå¢åŠ ä¸€ç‚¹éƒ¨ç½²éš¾åº¦ã€‚<br><br>3. minikube dashboardä¼šè‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨ï¼Œå¯ä»¥åŠ -hçœ‹å®ƒçš„è¯¦ç»†ç”¨æ³•ï¼Œä¹Ÿå¯ä»¥ç²˜è´´urlã€‚<br><br>4.è¦æŠŠé…ç½®æ–‡ä»¶ç”¨ConfigMapçš„å½¢å¼åŠ è½½ï¼Œæ‹·è´ä¸è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1658712453,"ip_address":"","comment_id":352455,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14543593601","product_id":100114501,"comment_content":"æœ‰åœ¨æ“ä½œè¿‡ç¨‹ä¸­é‡åˆ°å‡ ä¸ªé—®é¢˜ï¼Œè¿˜çƒ¦è¯·è€å¸ˆæŒ‡ç‚¹<br><br>1ã€å‰é¢ 2 ä¸ªæ­¥éª¤ä¸­ï¼Œåœ¨ kubectl apply -f *-pod.yml ä¹‹å‰æ˜¯ä¸æ˜¯ä¹Ÿå¾— apply ä¸€ä¸‹ä¹‹å‰å®šä¹‰çš„ configMap å¯¹è±¡ï¼Ÿ<br><br>2ã€å¯¹äºåå‘ä»£ç†ï¼Œä¸æ˜¯ç‰¹åˆ«çš„ç†è§£ï¼Œè€å¸ˆèƒ½ç®€å•è§£é‡Šä¸€ä¸‹åå‘ä»£ç†ï¼Œå¹¶é™„å¸¦è¯´æ˜è¿™é‡Œ Nginx è¿™é‡Œä½œä¸ºåå‘ä»£ç†çš„ç›®çš„æ˜¯ä»€ä¹ˆå—ï¼Ÿ<br><br>3ã€`minikube dashboard` æ— æ³•åœ¨å‘½ä»¤è¡Œæ˜¾ç¤ºç•Œé¢ï¼Œæˆ‘å°† URL å¤åˆ¶ç²˜è´´åˆ° Ubuntu è™šæ‹Ÿæœºå›¾å½¢ç•Œé¢ä¸Šçš„æµè§ˆå™¨ä¸­ï¼Œä½†å›å¤çš„ JSON ä¸­æ˜¾ç¤º 404ï¼Ÿä¸å¤ªæ¸…æ¥šæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•<br>Opening http:&#47;&#47;127.0.0.1:38539&#47;api&#47;v1&#47;namespaces&#47;kubernetes-dashboard&#47;services&#47;http:kubernetes-dashboard:&#47;proxy&#47; in your default browser...<br>Error: no DISPLAY environment variable specified<br><br>4ã€å¯¹äºæ€è€ƒé¢˜çš„ 2ï¼Œæˆ‘åˆ›å»ºä¸€ä¸ªäº† nginx Podï¼Œç„¶åå°†å…¶é…ç½®æ–‡ä»¶é€šè¿‡ kubectl cp æ‹·è´åˆ° Pod å®¹å™¨ä¸­çš„å¯¹åº”ä½ç½®ï¼Œä½†æ˜¯å‘ç°å¹¶ä¸èµ·ä½œç”¨ï¼Œæœ¬æ¥æƒ³ç€é‡å¯ Pod è®©é…ç½®ç”Ÿæ•ˆï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æŒ‡ä»¤ã€‚è¿™é‡Œæ˜¯ä¸æ˜¯éœ€è¦å…¶ä»–çš„ K8S API å¯¹è±¡çš„å¸®åŠ©ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581291,"discussion_content":"\n1. ConfigMapå·²ç»å«åœ¨pod yamlé‡Œäº†ï¼Œæ˜¯ç”¨â€œ---â€åˆ†éš”çš„å¤šä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥åˆ›å»ºConfigMapå’Œpodã€‚\n\n2.åå‘ä»£ç†å°±æ˜¯åœ¨çœŸæ­£ç½‘ç«™ï¼ˆWordPressï¼‰å‰çš„ä¸€ä¸ªä»£ç†è½¯ä»¶ï¼Œæä¾›å®‰å…¨é˜²æŠ¤ç­‰åŠŸèƒ½ï¼Œå¯å‚è€ƒã€Šé€è§†HTTPåè®®ã€‹ã€‚ä¸åŠ è¿™ä¸ªå…¶å®ä¹Ÿå¯ä»¥ï¼Œä¸»è¦çš„ç›®çš„æ˜¯æ¨¡æ‹ŸçœŸå®ç¯å¢ƒï¼Œå¢åŠ ä¸€ç‚¹éƒ¨ç½²éš¾åº¦ã€‚\n\n3. minikube dashboardä¼šè‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨ï¼Œå¯ä»¥åŠ -hçœ‹å®ƒçš„è¯¦ç»†ç”¨æ³•ï¼Œä¹Ÿå¯ä»¥ç²˜è´´urlã€‚\n\n4.è¦æŠŠé…ç½®æ–‡ä»¶ç”¨ConfigMapçš„å½¢å¼åŠ è½½ï¼Œæ‹·è´ä¸è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658712453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2608728,"avatar":"https://static001.geekbang.org/account/avatar/00/27/ce/58/71ed845f.jpg","nickname":"Dexter","note":"","ucode":"909CABC4AC4AC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":581354,"discussion_content":"ç¬¬4ç‚¹ï¼Œä½ å¯ä»¥è‡ªå·±åšä¸€ä¸ªnginxçš„image, åŒ…æ‹¬ä¿®æ”¹ä¹‹åçš„é…ç½®æ–‡ä»¶ï¼Œæ”¾ç½®åœ¨æ­£ç¡®çš„ä½ç½®ã€‚è¿™æ ·ä¹Ÿå¯ä»¥çš„ã€‚åªæ˜¯ä¸å¤Ÿå¼¹æ€§ï¼Œå¦‚æœé…ç½®è¦æ”¹ï¼Œåˆå¾—é‡æ–°åšimage","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658736901,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":581291,"ip_address":""},"score":581354,"extra":""}]},{"author":{"id":1256496,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","nickname":"pyhhou","note":"","ucode":"31EF8D50CF91A5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581342,"discussion_content":"3. å› ä¸ºæˆ‘æ˜¯åœ¨ Mac ä¸Šçš„ Terminal SSH åˆ°è™šæ‹Ÿæœºä¸Šå»ï¼Œæ‰€ä»¥è‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨å¤±è´¥ã€‚åªæœ‰åœ¨è™šæ‹Ÿæœºå›¾å½¢ç•Œé¢ä¸­è¿è¡Œ minikube dashboard æ‰èƒ½æ­£å¸¸è‡ªåŠ¨å¯åŠ¨æµè§ˆå™¨ã€‚ä½†æ˜¯åœ¨å›¾å½¢ç•Œé¢çš„ç»ˆç«¯ä¸­è·‘ minikube dashboard ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š\n\nExiting due to GUEST_STATUS: state: unknown state &#34;minikube&#34;: docker container inspect minikube --format=: exit status 1\nstdout:\n\nstderr:\nGot permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get &#34;http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/minikube/json&#34;: dial unix /var/run/docker.sock: connect: permission denied\n\næ„Ÿè§‰æŒºå¥‡æ€ªçš„ï¼ŒåŒæ ·åœ¨è™šæ‹Ÿæœºä¸Šï¼Œä¸ºä»€ä¹ˆ SSH ç™»é™†çš„å¯ä»¥æ­£å¸¸è¿è¡Œ minikube dashboard, ä½†æ˜¯å›¾å½¢ç•Œé¢ç™»é™†çš„å°±ä¸è¡Œã€‚æœ€åæŸ¥äº†ä¸‹ï¼Œæ›´æ”¹äº† docker æ–‡ä»¶æƒé™åå°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼Œå…·ä½“ä¹Ÿä¸æ¸…æ¥šä¸ºä»€ä¹ˆ\nsudo chmod 666 /var/run/docker.sock\nsudo usermod -aG docker ${USER}","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1658731649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353592,"user_name":"wcy","can_delete":false,"product_type":"c1","uid":1316071,"ip_address":"åŒ—äº¬","ucode":"E401E6C6D24032","user_header":"https://static001.geekbang.org/account/avatar/00/14/14/e7/c534fab3.jpg","comment_is_top":false,"comment_ctime":1659584555,"is_pvip":false,"replies":[{"id":"128558","content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1659589146,"ip_address":"åŒ—äº¬","comment_id":353592,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10249519147","product_id":100114501,"comment_content":"ä½œä¸š1ï¼šæ”¹ç”¨secretå¯ä»¥ï¼Œè¿™ä¸ªç®€å•ï¼ŒæŠŠdataé‡Œå¯¹åº”çš„å€¼ç”¨base64ç¼–ç å°±è¡Œï¼Œå¯¹åº”podçš„ymlæ”¹ä¸‹<br>ä½œä¸š2ï¼šnginxæ”¹æˆpod è¿è¡Œæ˜¯æˆåŠŸçš„ï¼Œ ä½†æ˜¯port-forwardå‡ºæ¥ï¼Œlinuxè™šæœºä¸Šç”¨firefoxæ‰“å¼€é¡µé¢æ˜¯okçš„ã€‚ä½†åœ¨shellç»ˆç«¯æœ¬åœ°æµè§ˆå™¨è®¿é—®ä¸äº†ï¼Œçœ‹äº†ä¸‹åº”è¯¥æ˜¯port-forwardçš„é—®é¢˜ï¼Œæ˜ å°„çš„ç«¯å£ç»‘å®šåœ¨Linuxè™šæœº127.0.0.1ä¸Šï¼Œæ‰€ä»¥virtualboxè½¬å‘ä¸å‡ºæ¥ã€‚<br>nginx cm:<br>apiVersion: v1<br>kind: ConfigMap<br>metadata:<br>  name: ngx-cm<br>data:<br>  nginx.conf: |<br>    server {<br>    #  listen 80;<br>       listen 8080;<br>    #   default_type text&#47;html;<br><br>       location &#47; {<br>           proxy_http_version 1.1;<br>           proxy_set_header Host $host;<br>           proxy_pass http:&#47;&#47;172.17.0.10:80;<br>       }<br>     }<br><br>nginx podé…ç½®ï¼š<br>apiVersion: v1<br>kind: Pod<br>metadata:<br>  name: wp-ngx-pod<br>  labels:<br>    env: test<br><br>spec:<br>  containers:<br>  - image: nginx:alpine<br>    name: wp-ngx<br>    ports:<br>    - containerPort: 8080<br>    volumeMounts:<br>    - mountPath: &#47;etc&#47;nginx&#47;conf.d&#47;<br>      name: myngxconf<br><br>  volumes:<br>  - name: myngxconf<br>    configMap:<br>      name: ngx-cm<br>      items:<br>      - key: nginx.conf<br>        path: default.conf<br>","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582675,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659589146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352931,"user_name":"æœ±é›¯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"é™•è¥¿","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1659021891,"is_pvip":true,"replies":[{"id":"128328","content":"Kubernetesé¢å¯¹çš„æ˜¯å¤§è§„æ¨¡é›†ç¾¤ï¼Œå…¶å®è¿™äº›éƒ½æ˜¯å¯ä»¥ç”¨ci&#47;cdè‡ªåŠ¨åŒ–çš„ï¼Œæˆ‘ä»¬ç°åœ¨çš„å­¦ä¹ æ˜¯ä»åº•å±‚åšèµ·å…¨æ‰‹åŠ¨æ“ä½œï¼Œå½“ç„¶ä¼šéº»çƒ¦ä¸€äº›ï¼Œåˆ°åé¢ä¼šæœ‰æ›´é«˜çº§çš„å¯¹è±¡ï¼Œæ¯”å¦‚Deploymentã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1659062313,"ip_address":"é™•è¥¿","comment_id":352931,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10248956483","product_id":100114501,"comment_content":"å­¦äº†è¿™ä¸€èŠ‚ï¼Œæ²¡æ„Ÿè§‰åˆ°å®¹å™¨ç¼–æ’çš„å¥½ç”¨ï¼Œåè€Œé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨é…ç½®ä¸­ï¼Œæˆ‘æŠŠwordpressé“¾æ¥æ•°æ®åº“çš„hostç»™å°å†™äº†ï¼Œç»“æœä¸€ç›´å‘Šè¯‰æˆ‘é“¾æ¥æ•°æ®åº“å¤±è´¥ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ’æŸ¥æ‰‹æ®µï¼Œä¸€ç›´å¤±è´¥ï¼Œæˆ‘æƒ³çš„æ˜¯ï¼Œè¿™ä¸ªk8sçš„éƒ¨ç½²æ­¥éª¤å®åœ¨æ˜¯å¤ªå¤æ‚äº†ï¼Œå¤æ‚åˆ°é…ç½®éœ€è¦ä¸€ä¸ªyamlï¼Œå®¹å™¨éœ€è¦ä¸€ä¸ªyamlï¼Œport-forwardä¹Ÿéœ€è¦ä¸€ä¸ªyamlï¼Œæˆ‘æƒ³å¦‚æœæ˜¯dockerç›´æ¥éƒ¨ç½²ï¼Œå…¶å®å°±éœ€è¦ä¸¤æ¡å‘½ä»¤ï¼Œæ‰€æœ‰å‚æ•°éƒ½æ”¾åˆ°envä¸­ï¼Œæˆ–è€…æ”¾åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œä¹Ÿæ¯”æ£€æŸ¥yamlæ–‡ä»¶å¼ºï¼Œåœ¨å…¥é—¨ç¯‡ä¸­æ²¡æ„Ÿå—åˆ°k8sçš„å¥½ç”¨ï¼Œåªæ„Ÿè§‰åˆ°çç¢ï¼Œæ˜¯å› ä¸ºæœåŠ¡å¤ªå°ï¼Œè¿˜æ˜¯å› ä¸ºæ²¡ç”¨å¥½çš„åŸå› å‘¢<br>","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581894,"discussion_content":"Kubernetesé¢å¯¹çš„æ˜¯å¤§è§„æ¨¡é›†ç¾¤ï¼Œå…¶å®è¿™äº›éƒ½æ˜¯å¯ä»¥ç”¨ci/cdè‡ªåŠ¨åŒ–çš„ï¼Œæˆ‘ä»¬ç°åœ¨çš„å­¦ä¹ æ˜¯ä»åº•å±‚åšèµ·å…¨æ‰‹åŠ¨æ“ä½œï¼Œå½“ç„¶ä¼šéº»çƒ¦ä¸€äº›ï¼Œåˆ°åé¢ä¼šæœ‰æ›´é«˜çº§çš„å¯¹è±¡ï¼Œæ¯”å¦‚Deploymentã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659062313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352557,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1658760889,"is_pvip":true,"replies":[{"id":"128228","content":"<br>1.å½“ç„¶å¯ä»¥ï¼ŒPodé‡Œçš„å¤šå®¹å™¨å¯ä»¥ä»»æ„ç»„åˆï¼Œä½†ä¸€èˆ¬åšæ³•éƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸€ä¸ªPod<br><br>2.æ˜¯çš„ï¼Œå‚è€ƒå…¥é—¨ç¯‡ï¼ŒMariaDBè¦æ±‚ç¯å¢ƒå˜é‡å¿…é¡»è¿™ä¹ˆå‘½åã€‚<br><br>3.æ˜¯çš„ï¼Œè¿™æ ·å¤–ç•Œç”¨çš„å°±æ˜¯80ç«¯å£ï¼Œè½¬å‘çš„åœ°å€ç«¯å£å°±ä¸ä¼šä¹±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1658789642,"ip_address":"","comment_id":352557,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10248695481","product_id":100114501,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜ï¼š<br>Q1ï¼šMariaDBå’ŒWPå¯ä»¥è·‘åœ¨ä¸€ä¸ªPODé‡Œé¢å—ï¼Ÿ<br><br>Q2ï¼šæ–‡ä¸­çš„prefixæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ<br>æ–‡ä¸­å®šä¹‰mariadb-pod.ymlçš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªprefix: &#39;MARIADB_&#39;ï¼Œ è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ<br>æ˜¯æŠŠconfigMapä¸­çš„å˜é‡åå­—å‰é¢åŠ ä¸Šè¿™ä¸ªå‰ç¼€ä½œä¸ºpodä¸­çš„å˜é‡åç§°å—ï¼Ÿ<br>å³ï¼špodä¸­çš„å˜é‡åç§° = MARIADB_&#39; + configMapä¸­çš„å˜é‡åç§°ã€‚<br>Q3ï¼šå…³äºè½¬å‘çš„ç–‘é—®<br>æ–‡ä¸­æœ‰ä¸€å¥ï¼šâ€œå› ä¸º WordPress ç½‘ç«™ä½¿ç”¨äº† URL é‡å®šå‘ï¼Œç›´æ¥ä½¿ç”¨â€œ8080â€ä¼šå¯¼è‡´è·³è½¬æ•…éšœâ€ã€‚ å¦‚æœæ²¡æœ‰nginxï¼Œå®¿ä¸»æœºä¸Šç”¨æµè§ˆå™¨ç›´æ¥è®¿é—®WPçš„8080ç«¯å£ï¼Œåˆ™ä¼šå› ä¸ºWPå†…éƒ¨å®ç°æœºåˆ¶è€Œäº§ç”Ÿé”™è¯¯ï¼› å¦‚æœåŠ ä¸Šnginxï¼Œnginxå»è®¿é—®WPçš„8080ç«¯å£ï¼Œå°±æ²¡äº‹ã€‚ æ˜¯è¿™æ ·å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581433,"discussion_content":"\n1.å½“ç„¶å¯ä»¥ï¼ŒPodé‡Œçš„å¤šå®¹å™¨å¯ä»¥ä»»æ„ç»„åˆï¼Œä½†ä¸€èˆ¬åšæ³•éƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸€ä¸ªPod\n\n2.æ˜¯çš„ï¼Œå‚è€ƒå…¥é—¨ç¯‡ï¼ŒMariaDBè¦æ±‚ç¯å¢ƒå˜é‡å¿…é¡»è¿™ä¹ˆå‘½åã€‚\n\n3.æ˜¯çš„ï¼Œè¿™æ ·å¤–ç•Œç”¨çš„å°±æ˜¯80ç«¯å£ï¼Œè½¬å‘çš„åœ°å€ç«¯å£å°±ä¸ä¼šä¹±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658789642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2917100,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/82/ec/99b480e8.jpg","nickname":"hiDaLao","note":"","ucode":"3C2DC2A3A377E4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581419,"discussion_content":"1ï¼šå¯ä»¥ä½†æœ€å¥½ä¸è¦ï¼Œä¸åˆ©äºä¸šåŠ¡çš„æ‹“å±•\n2ï¼šæ˜¯çš„ï¼Œè€å¸ˆæ–‡ä¸­æœ‰è§£ç­”ï¼Œâ€œæŒ‡å®šå˜é‡åçš„å‰ç¼€ï¼ˆå³è¿™é‡Œçš„ MARIADB_ï¼‰â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658765874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354353,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"åŒ—äº¬","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1660295236,"is_pvip":false,"replies":[{"id":"128888","content":"awesomeï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1660306997,"ip_address":"åŒ—äº¬","comment_id":354353,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5955262532","product_id":100114501,"comment_content":"å†™ä¸€ä¸‹ç¬¬2é¢˜å§è§£é¢˜æ­¥éª¤ï¼š<br>é¦–å…ˆå¦‚æœæˆ‘ä»¬æŠŠdocker å½¢å¼æ”¹æˆpodå½¢å¼è¿™é‡Œå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼ˆ1ï¼‰ç½‘ç»œé—®é¢˜ï¼Œï¼ˆ2ï¼‰nginxé…ç½®æ–‡ä»¶åŠ è½½é—®é¢˜ï¼Œ<br>ç¬¬ä¸€ä¸ªé—®é¢˜k8sçš„æ’ä»¶ä¼šå¤„ç†èŠ‚ç‚¹å†…ä»¥åŠèŠ‚ç‚¹é—´ç½‘ç»œé€šä¿¡é—®é¢˜ï¼Œè¿™ä¸ªæˆ‘ä»¬è¿™é‡Œæš‚æ—¶ä¸éœ€è¦è€ƒè™‘ï¼Œ<br>é‚£ä¹ˆéœ€è¦æˆ‘ä»¬å¤„ç†çš„å°±æ˜¯é…ç½®æ–‡ä»¶é—®é¢˜ï¼šè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šä¸ªæ–¹æ³•å¤„ç†<br>   a: podæŒ‚è½½å®¿ä¸»æœºç›®å½•ï¼ŒæŠŠé…ç½®æ–‡ä»¶æ”¾åˆ°å®¿ä¸»æœºç›®å½•ä¸‹ï¼Œå®¹å™¨å¯åŠ¨æŒ‚è½½<br>   b: ä½¿ç”¨æˆ‘ä»¬å­¦è¿‡çš„configMap<br>   cï¼šä½¿ç”¨pvã€pvc è¿™ä¸ªåé¢è€å¸ˆåº”è¯¥ä¼šè®²åˆ°<br>è¿™é‡Œæˆ‘é—¨å°±ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œä¹Ÿæ˜¯è¯„è®ºé‡Œä½¿ç”¨æœ€å¤šçš„æ–¹æ³•ï¼š<br>ymlæ–‡ä»¶å¦‚ä¸‹ï¼š<br>    ngx-cm.yml<br><br>apiVersion: v1<br>kind: ConfigMap<br>metadata:<br>  name: ngx-cm<br>data:<br>  nginx.conf: |<br>    server {<br>      listen 8080;<br>      #default_type text&#47;html;<br><br>      location &#47; {<br>        proxy_http_version 1.1;<br>        proxy_set_header Host $host;<br>        proxy_pass http:&#47;&#47;172.17.0.9:80;<br>      }<br>    }<br><br>nginx.yml:<br><br>apiVersion: v1<br>kind: Pod<br>metadata:<br>  name: ngx-pod<br>  labels:<br>    env: demo<br>    owner: ant<br><br>spec:<br>  volumes:<br>    - name: nginx-conf<br>      configMap:<br>        name: ngx-cm<br>        items:<br>        - key: nginx.conf<br>          path: default.conf<br>  containers:<br>  - image: nginx:alpine<br>    name: ngx<br>    volumeMounts:<br>      - name: nginx-conf<br>        mountPath: &#47;etc&#47;nginx&#47;conf.d<br>    ports:<br>    - containerPort: 8080<br><br>ç„¶åä½¿ç”¨ kubectl apply -f nginx.yml åˆ›å»ºpodï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ç”±äºk8sèŠ‚ç‚¹è¿˜æ˜¯ä¸€ä¸ªéš”ç¦»ç¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯æ— æ³•è®¿é—®ï¼Œ<br>æ‰€ä»¥æˆ‘ä»¬è¦åœ¨ç½‘é¡µè§‚å¯Ÿåˆ°å…·ä½“çš„ç½‘é¡µå†…å®¹ï¼Œè¿˜æ˜¯è¦å†ç”¨dockeråˆ›å»ºä¸€å±‚nginxä»£ç†ï¼Œserver å†…å®¹å¦‚ä¸‹ï¼š<br>server {<br>  listen 80;<br>  default_type text&#47;html;<br><br>  location &#47; {<br>      proxy_http_version 1.1;<br>      proxy_set_header Host $host;<br>      proxy_pass http:&#47;&#47;127.0.0.1:8888;<br>  }<br>}<br><br>ä½¿ç”¨ docker run -d --rm --net=host -v &#47;home&#47;ant&#47;kubernetes&#47;pod&#47;nginx-conf&#47;nginx.conf:&#47;etc&#47;nginx&#47;conf.d&#47;default.conf nginx:alpine<br>å¯åŠ¨ï¼Œ<br>ç„¶åä½¿ç”¨ kubectl port-forward ngx-pod 8888:8080 &amp; åšè½¬å‘<br><br>è®¿é—® http:&#47;&#47;192.168.56.208&#47; æ­£å¸¸è®¿é—®","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583714,"discussion_content":"awesomeï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660306997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354127,"user_name":"Geek_39bdd5","can_delete":false,"product_type":"c1","uid":2781060,"ip_address":"åŒ—äº¬","ucode":"CEC28F9978165F","user_header":"","comment_is_top":false,"comment_ctime":1660117378,"is_pvip":false,"replies":[{"id":"128804","content":"ä¹Ÿè®¸æ˜¯ç½‘ç»œæ’ä»¶æ²¡æœ‰æ­£å¸¸å·¥ä½œï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1660122618,"ip_address":"åŒ—äº¬","comment_id":354127,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5955084674","product_id":100114501,"comment_content":"kubectl get pod -o wideæŸ¥çœ‹çš„æ—¶å€™ipæ˜¾ç¤ºæ˜¯noneæ˜¯æ€ä¹ˆå›äº‹<br>","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583448,"discussion_content":"ä¹Ÿè®¸æ˜¯ç½‘ç»œæ’ä»¶æ²¡æœ‰æ­£å¸¸å·¥ä½œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660122618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2203253,"avatar":"https://static001.geekbang.org/account/avatar/00/21/9e/75/3ff9e7aa.jpg","nickname":"Java-åˆ˜æ–°æ¼³","note":"","ucode":"28F0BAA103CE6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588241,"discussion_content":"æˆ‘çš„ä¹Ÿæ˜¯è¿™æ ·çš„ï¼Œç”¨describeæŸ¥çœ‹eventï¼Œå‘ç°å¡åœ¨æ‹‰å–é•œåƒé‚£è¾¹äº†ï¼Œè¿‡äº†å¥½ä¸€ä¼šæ‰æ‹‰å®Œå¯åŠ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663605021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1401511,"avatar":"https://static001.geekbang.org/account/avatar/00/15/62/a7/595b36f8.jpg","nickname":"chuanshen","note":"","ucode":"02B565DFA534A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588001,"discussion_content":"æœ‰å¯èƒ½æ˜¯è¿˜æ²¡å¯åŠ¨å®Œæˆï¼Œç­‰è®®ä¼šï¼Œåˆ°runingçš„çŠ¶æ€\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663429560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å±±ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193366,"avatar":"https://static001.geekbang.org/account/avatar/00/12/35/96/6abd636f.jpg","nickname":"null","note":"","ucode":"709A3D55AB8961","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583610,"discussion_content":"æˆ‘ä¹Ÿäº§ç”Ÿäº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ˜¯ç­‰äº†5åˆ†é’Ÿå·¦å³è‡ªåŠ¨åˆ†é…äº†IPåœ°å€äº†ï¼Œä½ å¤šç­‰ä¸€ä¸‹è¯•è¯•çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660233012,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353418,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"ä¸Šæµ·","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1659425916,"is_pvip":false,"replies":[{"id":"128482","content":"--net=hostæ˜¯è®©dockerç”¨æœ¬æœºçš„ç½‘ç»œï¼Œä¸æ˜¯bridgeç«¯å£æ˜ å°„ï¼Œå‰é¢åº”è¯¥è®²è¿‡äº†ã€‚<br><br>å¦‚æœæ˜¯æ‹’ç»è®¿é—®ï¼Œåº”è¯¥æ‰¾å…¶ä»–çš„åŸå› ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1659430874,"ip_address":"ä¸Šæµ·","comment_id":353418,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5954393212","product_id":100114501,"comment_content":"è€å¸ˆï¼Œdocker run -d --rm \\ --net=host ï¼Œè¿™é‡Œçš„--net=host èµ·ä»€ä¹ˆä½œç”¨å•Šï¼ŸåŠ äº†ä»¥åï¼Œç›´æ¥æ‹’ç»è®¿é—®äº†ï¼Œä¹‹å‰ä¸éƒ½æ˜¯ä¼šç«¯å£æ˜ å°„ç”¨æ¥è®¿é—®çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582423,"discussion_content":"--net=hostæ˜¯è®©dockerç”¨æœ¬æœºçš„ç½‘ç»œï¼Œä¸æ˜¯bridgeç«¯å£æ˜ å°„ï¼Œå‰é¢åº”è¯¥è®²è¿‡äº†ã€‚\n\nå¦‚æœæ˜¯æ‹’ç»è®¿é—®ï¼Œåº”è¯¥æ‰¾å…¶ä»–çš„åŸå› ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659430874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352939,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"åŒ—äº¬","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1659025067,"is_pvip":false,"replies":[{"id":"128329","content":"port-forward åº”è¯¥åªèƒ½æœ¬æœºè®¿é—®ï¼Œå¯ä»¥ç”¨curléªŒè¯ä¸€ä¸‹ã€‚å®ƒçš„åŠŸèƒ½å¾ˆå¼±ï¼Œåªèƒ½ç”¨æ¥æµ‹è¯•ï¼Œè¦è¢«å¤–ç•Œè®¿é—®è¿˜æ˜¯å¾—ç”¨dockerå¯ä¸€ä¸ªNginxåå‘ä»£ç†æ‰è¡Œã€‚<br><br>è¿™é“é¢˜åªè¦åŠ¨æ‰‹æ“ä½œè¿‡å°±è¡Œäº†ï¼Œæ²¡å¿…è¦ä¸€å®šè¦å‡ºç»“æœï¼Œå› ä¸ºåé¢ä¼šæœ‰æ›´å¥½çš„Kuberneteså¤„ç†æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1659062470,"ip_address":"åŒ—äº¬","comment_id":352939,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5953992363","product_id":100114501,"comment_content":"ç¬¬äºŒé¢˜æ ¹æ®è€å¸ˆçš„å›å¤ä¿®æ”¹äº†ä¸‹ï¼Œä½†æ˜¯è¿˜æ˜¯è¿ä¸ä¸Š<br><br>virtual-machine:~&#47;k8s-testing&#47;wordpress$ cat ngx-pod.yml<br>apiVersion: v1<br>kind: ConfigMap<br>metadata:<br>  name: ngx-cm<br><br>data:<br>  default.conf: |-<br>    server {<br>      listen 80;<br>      default_type text&#47;html;<br><br>      location &#47; {<br>        proxy_http_version 1.1;<br>        proxy_set_header Host $host;<br>        proxy_pass http:&#47;&#47;172.17.0.6:80;<br>      }<br>    }<br><br>---<br><br>apiVersion: v1<br>kind: Pod<br>metadata:<br>  name: ngx-pod<br>  labels:<br>    app: nginx-alpine<br>    role: website<br><br>spec:<br>  volumes:<br>    - name: conf<br>      configMap:<br>        name: ngx-cm<br><br>  containers:<br>  - volumeMounts:<br>    - mountPath: &#47;etc&#47;nginx&#47;conf.d&#47;<br>      name: conf<br><br>    image: nginx:alpine<br>    name: ngx-pod<br>    imagePullPolicy: IfNotPresent<br>    ports:<br>    - containerPort: 80<br><br>port-forward é‚£é‡Œæˆ‘å–æ¶ˆäº† wp-pod çš„ port-forward, åŸå› æ˜¯è¿™é‡Œæ˜¯ç›´æ¥ä» ngx-pod bypass åˆ° wp-podï¼Œæ‰€ä»¥ä¸éœ€è¦ forward å¤–ç•Œçš„ç«¯å£ã€‚ä½†æ˜¯ ngx-pod åœ¨å®¹å™¨ä¸­ï¼Œè¿˜æ˜¯éœ€è¦çš„ï¼ŒæŒ‡ä»¤å¦‚ä¸‹<br><br>kubectl port-forward ngx-pod 8080:80 &amp;<br><br>ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œä» Mac æµè§ˆå™¨å°±æ˜¯è¿ä¸ä¸Šã€‚æˆ‘ä¹Ÿè¿›åˆ° ngx-pod ä¸Šæ£€æŸ¥äº†ï¼Œé…ç½®æ–‡ä»¶ä»€ä¹ˆçš„éƒ½å’Œä¸Šé¢å®šä¹‰çš„ä¸€æ ·ã€‚è¿˜çƒ¦è¯·è€å¸ˆåœ¨å¸®å¿™çœ‹çœ‹ ğŸ˜‚<br><br>","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581896,"discussion_content":"port-forward åº”è¯¥åªèƒ½æœ¬æœºè®¿é—®ï¼Œå¯ä»¥ç”¨curléªŒè¯ä¸€ä¸‹ã€‚å®ƒçš„åŠŸèƒ½å¾ˆå¼±ï¼Œåªèƒ½ç”¨æ¥æµ‹è¯•ï¼Œè¦è¢«å¤–ç•Œè®¿é—®è¿˜æ˜¯å¾—ç”¨dockerå¯ä¸€ä¸ªNginxåå‘ä»£ç†æ‰è¡Œã€‚\n\nè¿™é“é¢˜åªè¦åŠ¨æ‰‹æ“ä½œè¿‡å°±è¡Œäº†ï¼Œæ²¡å¿…è¦ä¸€å®šè¦å‡ºç»“æœï¼Œå› ä¸ºåé¢ä¼šæœ‰æ›´å¥½çš„Kuberneteså¤„ç†æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659062470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625530,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/ba/3a348f2d.jpg","nickname":"YueShi","note":"","ucode":"8F7AFAE4641A7D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582648,"discussion_content":"Macæ— æ³•è®¿é—®çš„åŸå› åœ¨äºMacä¸Šçš„è½¯ä»¶æ¶æ„é—®é¢˜ï¼Œå†™äº†ä¸€ç¯‡æ–‡ç« ï¼ŒæœŸå¾…èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ©\n\nhttps://juejin.cn/post/7127679053242302477","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659577508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185500,"avatar":"https://static001.geekbang.org/account/avatar/00/12/16/dc/e860a835.jpg","nickname":"è‚–äºŒéƒ","note":"","ucode":"BD1216F1DF0DA6","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582183,"discussion_content":"port-foward åé¢åŠ ä¸Š --addressè¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659285129,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352816,"user_name":"ç½—è€€é¾™@åå¿˜","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1658967342,"is_pvip":true,"replies":[{"id":"128295","content":"Nginxé…ç½®æ–‡ä»¶é‡Œé™¤äº†è¦ç”¨WordPressçš„IPåœ°å€ï¼Œç«¯å£å·ä¹Ÿè¦æ˜¯WordPressçš„ç«¯å£ï¼Œä¹Ÿå°±æ˜¯80ã€‚<br><br>ä¹‹å‰åœ¨dockerç”¨çš„8080ï¼Œæ˜¯å› ä¸ºport-forwardæ˜ å°„çš„æ˜¯æœ¬åœ°ç«¯å£å·8080ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1658970986,"ip_address":"","comment_id":352816,"utype":1}],"discussion_count":2,"race_medal":5,"score":"5953934638","product_id":100114501,"comment_content":"ç¬¬äºŒé¢˜ï¼šæ”¹æ˜¯èƒ½æ”¹ï¼Œä½†æ˜¯å°±æ˜¯è¿ä¸ä¸Š<br>å·²ç»å‚è€ƒäº†è€å¸ˆç»™phyhouçš„å›å¤ä¸­çš„å¯¹Nginxé…ç½®ä¿®æ”¹ï¼Œæ¥ç€æ˜¯kubectl port-forward &lt;nginx&gt; 8080:80 &amp;ï¼Œç»“æœè¿˜æ˜¯è¿ä¸ä¸Š<br><br>å®Œæ•´ä»£ç ï¼š<br>#Nginx.yaml<br>apiVersion: v1<br><br>kind: ConfigMap<br><br>metadata:<br><br>  name: wpma-ngx-cm<br><br><br><br>data:<br><br>  default.conf: |-<br><br>    server {<br><br>      listen 80;<br><br>      default_type text&#47;html;<br><br><br><br>      location &#47; {<br><br>          proxy_http_version 1.1;<br><br>          proxy_set_header Host $host;<br><br>          proxy_pass http:&#47;&#47;172.17.0.6:8080; &#47;&#47;wordpress ip<br><br>      }<br><br>    }<br><br><br><br>---<br><br><br><br>apiVersion: v1<br><br>kind: Pod<br><br>metadata:<br><br>  labels:<br><br>    run: wpma-ngx<br><br>  name: wpma-ngx<br><br><br><br>spec:<br><br>  containers:<br><br>  - image: nginx:alpine<br><br>    name: wpma-ngx<br><br>    imagePullPolicy: IfNotPresent<br><br>    ports:<br><br>    - containerPort: 80<br><br><br><br>    volumeMounts:<br><br>      - name: wpma-ngx-cm<br><br>        mountPath: &quot;etc&#47;nginx&#47;conf.d&quot;<br><br>  volumes:<br><br>    - name: wpma-ngx-cm<br><br>      configMap:<br><br>        name: wpma-ngx-cm","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581749,"discussion_content":"Nginxé…ç½®æ–‡ä»¶é‡Œé™¤äº†è¦ç”¨WordPressçš„IPåœ°å€ï¼Œç«¯å£å·ä¹Ÿè¦æ˜¯WordPressçš„ç«¯å£ï¼Œä¹Ÿå°±æ˜¯80ã€‚\n\nä¹‹å‰åœ¨dockerç”¨çš„8080ï¼Œæ˜¯å› ä¸ºport-forwardæ˜ å°„çš„æ˜¯æœ¬åœ°ç«¯å£å·8080ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658970986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009622,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/d6/2f5cb85c.jpg","nickname":"xmr","note":"","ucode":"1BBF165F91F10B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586889,"discussion_content":"mountPath: &#34;etc/nginx/conf.d&#34;å†™é”™äº†ï¼Œåº”è¯¥æ˜¯mountPath: &#34;/etc/nginx/conf.d&#34;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662571850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352814,"user_name":"ç½—è€€é¾™@åå¿˜","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1658962233,"is_pvip":true,"replies":[{"id":"128294","content":"good","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1658970908,"ip_address":"","comment_id":352814,"utype":1}],"discussion_count":1,"race_medal":5,"score":"5953929529","product_id":100114501,"comment_content":"ç»ˆäºèƒ½æŠŠç½‘ç«™ç»™å¼„èµ·æ¥äº†ï¼Œå¼€å¿ƒã€‚<br><br>ç¬¬ä¸€é¢˜ï¼šæ”¹æˆç”¨secretï¼Œå¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠè€å¸ˆçš„ç¤ºä¾‹é‡Œçš„configMapRefæ”¹æˆsecretRef<br>å®Œæ•´ä»£ç ï¼š<br>#maria secret<br><br>apiVersion: v1<br><br>data:<br><br>  DATABASE: ZGI=<br><br>  PASSWORD: MTIz<br><br>  ROOT_PASSWORD: MTIz<br><br>  USER: d3A=<br><br>kind: Secret<br><br>metadata:<br><br>  creationTimestamp: null<br><br>  name: maria-sc<br><br><br><br>---<br><br><br><br>apiVersion: v1<br><br>kind: Pod<br><br>metadata:<br><br>  labels:<br><br>    app: wordpress<br><br>    role: database<br><br>  name: mariasc-pod<br><br><br><br>spec:<br><br>  containers:<br><br>  - image: mariadb:10<br><br>    name: maria<br><br>    imagePullPolicy: IfNotPresent<br><br>    ports:<br><br>    - containerPort: 3306<br><br>  <br><br>    envFrom:<br><br>    - prefix: &#39;MARIADB_&#39;<br><br>      secretRef:<br><br>        name: maria-sc<br><br><br>#WordPress secret<br>apiVersion: v1<br><br>data:<br><br>  HOST: MTcyLjE3LjAuNw==<br><br>  NAME: ZGI=<br><br>  PASSWORD: MTIz<br><br>  USER: d3A=<br><br>kind: Secret<br><br>metadata:<br><br>  creationTimestamp: null<br><br>  name: wp-sc<br><br><br><br>---<br><br><br><br>apiVersion: v1<br><br>kind: Pod<br><br>metadata:<br><br>  labels:<br><br>    app: wordpress<br><br>    role: website<br><br>  name: wpsc-pod<br><br><br><br>spec:<br><br>  containers:<br><br>  - image: wordpress:5<br><br>    name: wordpress<br><br>    imagePullPolicy: IfNotPresent<br><br>    ports:<br><br>    - containerPort: 80<br><br><br><br>    envFrom:<br><br>    - prefix: &#39;WORDPRESS_DB_&#39;<br><br>      secretRef:<br><br>        name: wp-sc<br><br>","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581748,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658970908,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352812,"user_name":"ç½—è€€é¾™@åå¿˜","can_delete":false,"product_type":"c1","uid":1917663,"ip_address":"","ucode":"3CEA258DE7F3C7","user_header":"https://static001.geekbang.org/account/avatar/00/1d/42/df/a034455d.jpg","comment_is_top":false,"comment_ctime":1658949182,"is_pvip":true,"replies":[{"id":"128293","content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1658970892,"ip_address":"","comment_id":352812,"utype":1}],"discussion_count":1,"race_medal":5,"score":"5953916478","product_id":100114501,"comment_content":"ç»ˆäºè·‘é€šäº†ï¼Œæ„ŸåŠ¨","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581747,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658970892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352747,"user_name":"RRR","can_delete":false,"product_type":"c1","uid":1014991,"ip_address":"","ucode":"F32A579D201EC5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7c/cf/d5382404.jpg","comment_is_top":false,"comment_ctime":1658908491,"is_pvip":false,"replies":[{"id":"128280","content":"<br>1. port-forwardåªèƒ½ç”¨äºæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå½“ç„¶è¦ç”¨Ingress<br><br>2.helmå¯ä»¥ç†è§£æˆæ˜¯Kubernetesçš„å®‰è£…åŒ…ï¼Œistioæ˜¯è¿è¡Œåœ¨Kubernetesä¸Šçš„æœåŠ¡ç½‘æ ¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1658915040,"ip_address":"","comment_id":352747,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5953875787","product_id":100114501,"comment_content":"ä¸¤ä¸ªé—®é¢˜<br><br>1. port-forward å®é™…åœ¨ç”Ÿäº§ç”¨çš„å¤šä¹ˆï¼Ÿåº”è¯¥éƒ½æ˜¯ ingress å§<br>2. è€å¸ˆåé¢èƒ½è®²è®² helm å’Œ Istio å—ï¼Œä»–ä»¬å’Œ k8s å…³ç³»æ˜¯ä»€ä¹ˆï¼Œæˆ‘çœ‹ä¸æ˜ç™½","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581681,"discussion_content":"\n1. port-forwardåªèƒ½ç”¨äºæµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå½“ç„¶è¦ç”¨Ingress\n\n2.helmå¯ä»¥ç†è§£æˆæ˜¯Kubernetesçš„å®‰è£…åŒ…ï¼Œistioæ˜¯è¿è¡Œåœ¨Kubernetesä¸Šçš„æœåŠ¡ç½‘æ ¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658915040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014991,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7c/cf/d5382404.jpg","nickname":"RRR","note":"","ucode":"F32A579D201EC5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581684,"discussion_content":"å¯¹ å…¶å®å°±æ˜¯ä¸ç†è§£ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658916733,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352569,"user_name":"Matthew","can_delete":false,"product_type":"c1","uid":2843865,"ip_address":"","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1658765309,"is_pvip":true,"replies":[{"id":"128261","content":"ç”¨kubectl describe æ£€æŸ¥ä¸€ä¸‹podï¼Œå¯èƒ½æ˜¯é•œåƒæ²¡æ‹‰å–ä¸‹æ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1658813833,"ip_address":"","comment_id":352569,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5953732605","product_id":100114501,"comment_content":"æ‰§è¡Œ kubectl apply  -f mariadb-pod.yml ä»¥åï¼ŒPODçš„çŠ¶æ€ä¸€ç›´æ˜¯ ContainerCreatingï¼Œæ˜¯ä»€ä¹ˆåŸå› ï¼Ÿåº”è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581494,"discussion_content":"ç”¨kubectl describe æ£€æŸ¥ä¸€ä¸‹podï¼Œå¯èƒ½æ˜¯é•œåƒæ²¡æ‹‰å–ä¸‹æ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658813834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581568,"discussion_content":"ä¹Ÿå¯èƒ½æ˜¯æŠ¥é”™äº†ï¼Œä½¿ç”¨ kubectl logs pod [pod name]","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1658842817,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1640477,"avatar":"https://static001.geekbang.org/account/avatar/00/19/08/1d/30b32c93.jpg","nickname":"è·¯äººä¸","note":"","ucode":"078F0235DAFCA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582374,"discussion_content":"pull image å¾ˆè´¹æ—¶é—´ã€‚è€å¿ƒç­‰å¾…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659411875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360334,"user_name":"å¯å¯","can_delete":false,"product_type":"c1","uid":1053294,"ip_address":"ä¸Šæµ·","ucode":"297A5D32949128","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1VPGSQg7SqrN1Gutx31Kicks2icZjTCg1gZoDLfEcSSricYD6l5qQgE3MkMpqlhkM4gMicymOYzaudg/132","comment_is_top":false,"comment_ctime":1666438474,"is_pvip":true,"replies":[{"id":"131151","content":"æ˜¯çš„ï¼Œè¿™ä¸ªä¸€å®šè¦æ³¨æ„ã€‚<br><br>minikubeåœ¨å®ƒçš„è™šæ‹ŸèŠ‚ç‚¹é‡Œåˆè¿è¡Œäº†ä¸€ä¸ªdocker daemonï¼Œå¤–ç•Œæ˜¯çœ‹ä¸åˆ°çš„ï¼Œå¯ä»¥æƒ³è±¡æˆæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1666588678,"ip_address":"ä¸Šæµ·","comment_id":360334,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1666438474","product_id":100114501,"comment_content":"kubectl apply -f wp-pod.ymlæ‰§è¡Œåæ¯æ¬¡éƒ½å¤±è´¥ï¼Œçœ‹äº†ä¸€ä¸‹kubectl describe pod wp-podï¼Œå‘ç°æ˜¯æ‹‰å»é•œåƒè¶…æ—¶ã€‚æˆ‘å°±çº³é—·ä¸ºå•¥æˆ‘æœ¬åœ°å­˜åœ¨wordpress:5çš„dockeré•œåƒï¼Œä¸ºå•¥è¿™é‡Œæ‰¾ä¸åˆ°å‘¢ã€‚åæ¥åœ¨ç½‘ä¸Šçœ‹åˆ°minikubeä½¿ç”¨ç‹¬ç«‹çš„docker daemonï¼Œä¸åŒäºæœ¬åœ°çš„dockerå®ˆæŠ¤è¿›ç¨‹ã€‚æ‰€ä»¥éœ€è¦å…ˆæŠŠæœ¬åœ°çš„dockeré•œåƒå¯¼å…¥åˆ°minikubeä¹‹ä¸­æ‰èƒ½ä½¿ç”¨ã€‚<br>docker save wordpress:5 | (eval $(minikube docker-env) &amp;&amp; docker load)<br>æ­¤å‘½ä»¤å°†é•œåƒä¿å­˜ä¸ºtarå­˜æ¡£,ç„¶åå°†é•œåƒåŠ è½½åˆ°minikubeä¸­ã€‚è¿™æ—¶å€™åˆ é™¤æ‰ä¹‹å‰applyå¤±è´¥çš„podï¼Œé‡æ–°applyå°±æˆåŠŸäº†ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591455,"discussion_content":"æ˜¯çš„ï¼Œè¿™ä¸ªä¸€å®šè¦æ³¨æ„ã€‚\n\nminikubeåœ¨å®ƒçš„è™šæ‹ŸèŠ‚ç‚¹é‡Œåˆè¿è¡Œäº†ä¸€ä¸ªdocker daemonï¼Œå¤–ç•Œæ˜¯çœ‹ä¸åˆ°çš„ï¼Œå¯ä»¥æƒ³è±¡æˆæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666588678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359961,"user_name":"rubys_","can_delete":false,"product_type":"c1","uid":1394115,"ip_address":"åŒ—äº¬","ucode":"931AD02864126A","user_header":"https://static001.geekbang.org/account/avatar/00/15/45/c3/051ffe83.jpg","comment_is_top":false,"comment_ctime":1666090886,"is_pvip":true,"replies":[{"id":"130932","content":"å½“ç„¶äº†ï¼Œéƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸€ä¸ªpodï¼Œè¿™æ ·æ–¹ä¾¿ç‹¬ç«‹éƒ¨ç½²ã€ç®¡ç†ã€æ‰©å®¹ï¼Œå¤šä¸ªå®¹å™¨åœ¨ä¸€ä¸ªpodé‡Œçš„æƒ…å†µä¹Ÿæœ‰ï¼Œä½†æ¯”è¾ƒå°‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1666096023,"ip_address":"åŒ—äº¬","comment_id":359961,"utype":1}],"discussion_count":1,"race_medal":5,"score":"1666090886","product_id":100114501,"comment_content":"æˆ‘ä¸€å¼€å§‹ä»¥ä¸ºä¼šå°† db è·Ÿ wp æ”¾åœ¨åŒä¸€ä¸ª pod çš„ä¸¤ä¸ª container é‡Œé¢çš„ï¼Œæ²¡æƒ³åˆ°æ˜¯ä¸¤ä¸ª podã€‚åœ¨ç”Ÿäº§ç¯å¢ƒé‡Œé¢ï¼Œè¿™ç§åœºæ™¯ä¹Ÿä¼šæ˜¯ä¸åŒçš„ pod å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590833,"discussion_content":"å½“ç„¶äº†ï¼Œéƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸€ä¸ªpodï¼Œè¿™æ ·æ–¹ä¾¿ç‹¬ç«‹éƒ¨ç½²ã€ç®¡ç†ã€æ‰©å®¹ï¼Œå¤šä¸ªå®¹å™¨åœ¨ä¸€ä¸ªpodé‡Œçš„æƒ…å†µä¹Ÿæœ‰ï¼Œä½†æ¯”è¾ƒå°‘ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1666096023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357463,"user_name":"Geek_fc4e0b","can_delete":false,"product_type":"c1","uid":2894152,"ip_address":"åŒ—äº¬","ucode":"67A7F1D7A896FF","user_header":"","comment_is_top":false,"comment_ctime":1663290540,"is_pvip":false,"replies":[{"id":"130097","content":"æ ‡ç­¾éšä¾¿å†™çš„ï¼Œæ²¡ä»€ä¹ˆç‰¹æ®Šå«ä¹‰ï¼ŒçœŸæ­£è¿è¡Œçš„æ—¶å€™è¦å’Œå®é™…ç¯å¢ƒç»“åˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1663299895,"ip_address":"åŒ—äº¬","comment_id":357463,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1663290540","product_id":100114501,"comment_content":"è€å¸ˆå¥½ï¼šèƒ½è§£é‡Šä¸€ä¸‹æ ‡ç­¾ä¸ºä»€ä¹ˆæ˜¯wordpresså’Œwebsiteå—ï¼Œæœ‰ä»€ä¹ˆç‰¹æ®Šå«ä¹‰å—ï¼Œä¸¤ä¸ªyamlæ–‡ä»¶å¾—æ ‡ç­¾æœ‰å•¥å…³ç³»ï¼Œä¸å†™è¿™ä¸ªæ ‡ç­¾æœ‰å•¥å½±å“","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587801,"discussion_content":"æ ‡ç­¾éšä¾¿å†™çš„ï¼Œæ²¡ä»€ä¹ˆç‰¹æ®Šå«ä¹‰ï¼ŒçœŸæ­£è¿è¡Œçš„æ—¶å€™è¦å’Œå®é™…ç¯å¢ƒç»“åˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663299895,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355725,"user_name":"Aioria","can_delete":false,"product_type":"c1","uid":1161407,"ip_address":"ä¸Šæµ·","ucode":"E7158D2E1C1B72","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/bf/3a6e8773.jpg","comment_is_top":false,"comment_ctime":1661695893,"is_pvip":false,"replies":[{"id":"129470","content":"kubectl port-forwardåªèƒ½ç”¨æ¥æµ‹è¯•ï¼Œä¸èƒ½ç”¨äºç”Ÿäº§ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ci&#47;cdé‡Œç”¨ï¼Œåº”è¯¥æ”¹æˆserviceçš„æ–¹å¼ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1661743665,"ip_address":"ä¸Šæµ·","comment_id":355725,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1661695893","product_id":100114501,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªç–‘é—®ï¼Œ` kubectl port-forward`è¿™æ¡å‘½ä»¤æ˜¯å¦ä¹Ÿèƒ½åœ¨.ymlæ–‡ä»¶ä¸­æè¿°å‘¢ï¼Ÿè¿è¡ŒPodåå†ä»¥å‘½ä»¤æ–¹å¼æ˜ å°„ç«¯å£ï¼Œä¼¼ä¹ä¸åˆ©äºCI&#47;CDã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585640,"discussion_content":"kubectl port-forwardåªèƒ½ç”¨æ¥æµ‹è¯•ï¼Œä¸èƒ½ç”¨äºç”Ÿäº§ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ci/cdé‡Œç”¨ï¼Œåº”è¯¥æ”¹æˆserviceçš„æ–¹å¼ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661743665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354041,"user_name":"rongyefeng","can_delete":false,"product_type":"c1","uid":1959482,"ip_address":"åŒ—äº¬","ucode":"9A15D947E9D645","user_header":"https://static001.geekbang.org/account/avatar/00/1d/e6/3a/382cf024.jpg","comment_is_top":false,"comment_ctime":1660038407,"is_pvip":false,"replies":[{"id":"128779","content":"æ˜¯çš„ï¼Œå¯ä»¥è®©æˆ‘ä»¬çœäº›åŠ›æ°”ï¼Œå°‘å†™ç‚¹å­—ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1660041070,"ip_address":"åŒ—äº¬","comment_id":354041,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1660038407","product_id":100114501,"comment_content":"å¹¶ä¸”èƒ½å¤ŸæŒ‡å®šå˜é‡åçš„å‰ç¼€ï¼ˆå³è¿™é‡Œçš„ MARIADB_ï¼‰ ï¼šè¿™é‡Œå¯ä»¥ç†è§£ä¸ºåœ¨dataä¸­å„ä¸ªå­—æ®µçš„åŸºç¡€ä¸ŠåŠ ä¸Šè¿™ä¸ªå‰ç¼€å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583337,"discussion_content":"æ˜¯çš„ï¼Œå¯ä»¥è®©æˆ‘ä»¬çœäº›åŠ›æ°”ï¼Œå°‘å†™ç‚¹å­—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660041070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353664,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"åŒ—äº¬","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1659666201,"is_pvip":false,"replies":[{"id":"128585","content":"è¿™ä¸ªä¸æ˜¯Kubernetesçš„å®˜æ–¹æ¦‚å¿µï¼Œæ˜¯æˆ‘è‡ªå·±çš„ç†è§£ï¼Œä½ å¯ä»¥å‚è€ƒæ¥æ–¹ä¾¿å­¦ä¹ ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1659667812,"ip_address":"åŒ—äº¬","comment_id":353664,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1659666201","product_id":100114501,"comment_content":"è€å¸ˆï¼Œå®ä½“å¯¹è±¡å’Œéå®ä½“å¯¹è±¡æ˜¯æ€ä¹ˆåŒºåˆ†çš„ï¼Ÿ å¸¦æœ‰å®¹å™¨çš„å°±æ˜¯å®ä½“å¯¹è±¡å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582775,"discussion_content":"è¿™ä¸ªä¸æ˜¯Kubernetesçš„å®˜æ–¹æ¦‚å¿µï¼Œæ˜¯æˆ‘è‡ªå·±çš„ç†è§£ï¼Œä½ å¯ä»¥å‚è€ƒæ¥æ–¹ä¾¿å­¦ä¹ ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1659667812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352943,"user_name":"æœ±é›¯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"åŒ—äº¬","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1659025647,"is_pvip":true,"replies":[{"id":"128323","content":"æ˜¯çš„ï¼Œport-forwardåªæ˜¯ç”¨æ¥æµ‹è¯•çš„ï¼Œæ‰€ä»¥è¦æ±‚ä¹Ÿä¸å¿…å¤ªé«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1659060688,"ip_address":"åŒ—äº¬","comment_id":352943,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1659025647","product_id":100114501,"comment_content":"8080:80 wp-podåº”è¯¥æ˜¯å°†å®¿ä¸»æœºçš„8080è½¬å‘åˆ°å®¹å™¨çš„80ï¼Œä½†åªè¦å®¹å™¨é‡å¯ï¼Œè¿™æ¡è§„åˆ™å°±æ²¡äº†ï¼Œéœ€è¦é‡æ–°åŠ å…¥ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581885,"discussion_content":"æ˜¯çš„ï¼Œport-forwardåªæ˜¯ç”¨æ¥æµ‹è¯•çš„ï¼Œæ‰€ä»¥è¦æ±‚ä¹Ÿä¸å¿…å¤ªé«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659060688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352942,"user_name":"æœ±é›¯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"é™•è¥¿","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1659025596,"is_pvip":true,"replies":[{"id":"128320","content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1659057328,"ip_address":"é™•è¥¿","comment_id":352942,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1659025596","product_id":100114501,"comment_content":"1. ç¬¬ä¸€é¢˜<br>é‡ç‚¹ä¿®æ”¹ï¼Œæ‰€æœ‰å†…å®¹éƒ½ç”¨base64åŠ å¯†åå­˜å‚¨ï¼Œç±»å‹ä¸ºSecretï¼ŒSä¸ºå¤§å†™,configMapRefæ”¹ä¸ºsecretRef,é¦–å­—æ¯æ³¨æ„å°å†™ã€‚<br>å®é™…æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°echo -n &quot;172.17.0.5&quot;|base64 å’Œecho &quot;172.17.0.5&quot; |base64æ˜¯æœ‰å·®åˆ«çš„ï¼Œä½†æ˜¯ç¯å¢ƒå˜é‡é‡Œé¢çœ‹ä¸å‡ºæ¥ï¼Œæ‰€ä»¥ä¸€ç›´é…ç½®å¤±è´¥ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581875,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659057328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}