{"id":138844,"title":"21 | Chrome开发者工具：利用网络面板做性能分析","content":"<p>“浏览器中的页面循环系统”模块我们已经介绍完了，循环系统是页面的基础，理解了循环系统能让我们从本质上更好地理解页面的工作方式，加深我们对一些前端概念的理解。</p><p>接下来我们就要进入新的模块了，也就是“浏览器中的页面”模块，正如专栏简介中所言，页面是浏览器的核心，浏览器中的所有功能点都是服务于页面的，而Chrome开发者工具又是工程师调试页面的核心工具，所以在这个模块的开篇，我想先带你来深入了解下Chrome开发者工具。</p><p><strong>Chrome开发者工具（简称DevTools）是一组网页制作和调试的工具，内嵌于Google Chrome 浏览器中</strong>。Chrome开发者工具非常重要，所蕴含的内容也是非常多的，熟练使用它能让你更加深入地了解浏览器内部工作原理。（Chrome开发者工具也在不停地迭代改进，如果你想使用最新版本，可以使用<a href=\"https://www.google.com/intl/en/chrome/canary/\">Chrome Canary</a>。）</p><p>作为这一模块的第一篇文章，我们主要聚焦<strong>页面的源头</strong>和<strong>网络数据的接收</strong>，这些发送和接收的数据都能体现在开发者工具的网络面板上。不过为了你能更好地理解和掌握，我们会先对Chrome开发者工具做一个大致的介绍，然后再深入剖析网络面板。</p><h2>Chrome开发者工具</h2><p>Chrome开发者工具有很多重要的面板，比如与性能相关的有网络面板、Performance面板、内存面板等，与调试页面相关的有Elements面板、Sources面板、Console面板等。</p><!-- [[[read_end]]] --><p>你可以在浏览器窗口的右上方选择Chrome菜单，然后选择“更多工具–&gt;开发者工具”来打开Chrome开发者工具。打开的页面如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/68/8d/68edf7b09e33b5481b49dc76967b838d.png?wh=1142*178\" alt=\"\"></p><center><span class=\"reference\">Chrome开发者工具</span></center><p>从图中可以看出，它一共包含了10个功能面板，包括了Elements、Console、Sources、NetWork、Performance、Memory、Application、Security、Audits和Layers。</p><p>关于这10个面板的大致功能，我做了一个表格，感兴趣的话，你可以详细看下：</p><p><img src=\"https://static001.geekbang.org/resource/image/c5/82/c5eb9603e79547ae3d815254e24d4782.png?wh=1142*605\" alt=\"\"></p><p>简单来说，Chrome开发者工具为我们提供了通过界面访问或者编辑DOM和CSSOM的能力，还提供了强大的调试功能和查看性能指标的能力。</p><p>OK，接下来我们就要重点看下其中重要的Network面板，即网络面板。</p><h2>网络面板</h2><p>网络面板由控制器、过滤器、抓图信息、时间线、详细列表和下载信息概要这6个区域构成（如下图所示）。</p><p><img src=\"https://static001.geekbang.org/resource/image/46/57/46fba54f54b9bd43918308f9f1ae1357.png?wh=1142*603\" alt=\"\"></p><center><span class=\"reference\">网络面板概要图</span></center><h3>1. 控制器</h3><p>其中，控制器有4个比较重要的功能，我们按照下文中的这张图来简单介绍下。</p><p><img src=\"https://static001.geekbang.org/resource/image/f0/42/f02477088c0499247e0ed37f46ad2a42.png?wh=1142*583\" alt=\"\"></p><center><span class=\"reference\">控制器概要图</span></center><ul>\n<li>红色圆点的按钮，表示“开始/暂停抓包”，这个功能很常见，很容易理解。</li>\n<li>“全局搜索”按钮，这个功能就非常重要了，可以在所有下载资源中搜索相关内容，还可以快速定位到某几个你想要的文件上。</li>\n<li>Disable cache，即“禁止从Cache中加载资源”的功能，它在调试Web应用的时候非常有用，因为开启了Cache会影响到网络性能测试的结果。</li>\n<li>Online按钮，是“模拟2G/3G”功能，它可以限制带宽，模拟弱网情况下页面的展现情况，然后你就可以根据实际展示情况来动态调整策略，以便让Web应用更加适用于这些弱网。</li>\n</ul><h3>2. 过滤器</h3><p>网络面板中的过滤器，主要就是起过滤功能。因为有时候一个页面有太多内容在详细列表区域中展示了，而你可能只想查看JavaScript文件或者CSS文件，这时候就可以通过过滤器模块来筛选你想要的文件类型。</p><h3>3. 抓图信息</h3><p>抓图信息区域，可以用来分析用户等待页面加载时间内所看到的内容，分析用户实际的体验情况。比如，如果页面加载1秒多之后屏幕截图还是白屏状态，这时候就需要分析是网络还是代码的问题了。（勾选面板上的“Capture screenshots”即可启用屏幕截图。）</p><h3>4. 时间线</h3><p>时间线，主要用来展示HTTP、HTTPS、WebSocket加载的状态和时间的一个关系，用于直观感受页面的加载过程。如果是多条竖线堆叠在一起，那说明这些资源被同时被加载。至于具体到每个文件的加载信息，还需要用到下面要讲的详细列表。</p><h3>5. 详细列表</h3><p>这个区域是最重要的，它详细记录了每个资源从发起请求到完成请求这中间所有过程的状态，以及最终请求完成的数据信息。通过该列表，你就能很容易地去诊断一些网络问题。</p><p>详细列表是我们本篇文章介绍的重点，不过内容比较多，所以放到最后去专门介绍了。</p><h3>6. 下载信息概要</h3><p>下载信息概要中，你要重点关注下DOMContentLoaded和Load两个事件，以及这两个事件的完成时间。</p><ul>\n<li>DOMContentLoaded，这个事件发生后，说明页面已经构建好DOM了，这意味着构建DOM所需要的HTML文件、JavaScript文件、CSS文件都已经下载完成了。</li>\n<li>Load，说明浏览器已经加载了所有的资源（图像、样式表等）。</li>\n</ul><p>通过下载信息概要面板，你可以查看触发这两个事件所花费的时间。</p><h2>网络面板中的详细列表</h2><p>下面我们就来重点介绍网络面板中的详细列表，这里面包含了大量有用的信息。</p><h3>1. 列表的属性</h3><p>列表的属性比较多，比如Name、Status、Type、Initiator等等，这个不难理解。当然，你还可以通过点击右键的下拉菜单来添加其他属性，这里我就不再赘述了，你可以自己上手实操一下。</p><p>另外，你也可以按照列表的属性来给列表排序，默认情况下，列表是按请求发起的时间来排序的，最早发起请求的资源在顶部。当然也可以按照返回状态码、请求类型、请求时长、内容大小等基础属性排序，只需点击相应属性即可。</p><p><img src=\"https://static001.geekbang.org/resource/image/7b/81/7b296e168a4900d3b5cb8e57cc3f6181.png?wh=1142*542\" alt=\"\"></p><center><span class=\"reference\">根据属性排序</span></center><h3>2. 详细信息</h3><p>如果你选中详细列表中的一项，右边就会出现该项的详细信息，如下所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/f7/e6/f76ee3b6b2e6e9629efdd01e6ded57e6.png?wh=1142*806\" alt=\"\"></p><center><span class=\"reference\">详细请求信息</span></center><p>你可以在此查看请求列表中任意一项的请求行和请求头信息，还可以查看响应行、响应头和响应体。然后你可以根据这些查看的信息来判断你的业务逻辑是否正确，或者有时候也可以用来逆向推导别人网站的业务逻辑。</p><h3>3. 单个资源的时间线</h3><p>了解了每个资源的详细请求信息之后，我们再来分析单个资源请求时间线，这就涉及具体的HTTP请求流程了。</p><p><img src=\"https://static001.geekbang.org/resource/image/1f/e0/1f4f8c194b02975f6d2848b7b73175e0.png?wh=1142*332\" alt=\"\"></p><center><span class=\"reference\">浏览器中HTTP请求流程</span></center><p>我们再回顾下在<a href=\"https://time.geekbang.org/column/article/116588\">《03 | HTTP请求流程：为什么很多站点第二次打开速度会很快？》</a>这篇文章，我们介绍过发起一个HTTP请求之后，浏览器首先查找缓存，如果缓存没有命中，那么继续发起DNS请求获取IP地址，然后利用IP地址和服务器端建立TCP连接，再发送HTTP请求，等待服务器响应；不过，如果服务器响应头中包含了重定向的信息，那么整个流程就需要重新再走一遍。这就是在浏览器中一个HTTP请求的基础流程。</p><p>那详细列表中是如何表示出这个流程的呢？这就要重点看下时间线面板了：</p><p><img src=\"https://static001.geekbang.org/resource/image/ba/af/ba91f06503bda4b4dc4a54901bd7a8af.png?wh=1068*822\" alt=\"\"></p><center><span class=\"reference\">单个文件的时间线</span></center><p>那面板中这各项到底是什么含义呢？</p><p><strong>第一个是Queuing</strong>，也就是排队的意思，当浏览器发起一个请求的时候，会有很多原因导致该请求不能被立即执行，而是需要排队等待。导致请求处于排队状态的原因有很多。</p><ul>\n<li>首先，页面中的资源是有优先级的，比如CSS、HTML、JavaScript等都是页面中的核心文件，所以优先级最高；而图片、视频、音频这类资源就不是核心资源，优先级就比较低。通常当后者遇到前者时，就需要“让路”，进入待排队状态。</li>\n<li>其次，我们前面也提到过，浏览器会为每个域名最多维护6个TCP连接，如果发起一个HTTP请求时，这6个TCP连接都处于忙碌状态，那么这个请求就会处于排队状态。</li>\n<li>最后，网络进程在为数据分配磁盘空间时，新的HTTP请求也需要短暂地等待磁盘分配结束。</li>\n</ul><p>等待排队完成之后，就要进入发起连接的状态了。不过在发起连接之前，还有一些原因可能导致连接过程被推迟，这个推迟就表现在面板中的<strong>Stalled</strong>上，它表示停滞的意思。</p><p>这里需要额外说明的是，如果你使用了代理服务器，还会增加一个<strong>Proxy Negotiation</strong>阶段，也就是代理协商阶段，它表示代理服务器连接协商所用的时间，不过在上图中没有体现出来，因为这里我们没有使用代理服务器。</p><p>接下来，就到了<strong>Initial connection/SSL阶段</strong>了，也就是和服务器建立连接的阶段，这包括了建立TCP连接所花费的时间；不过如果你使用了HTTPS协议，那么还需要一个额外的SSL握手时间，这个过程主要是用来协商一些加密信息的。（关于SSL协商的详细过程，我们会在Web安全模块中介绍。）</p><p>和服务器建立好连接之后，网络进程会准备请求数据，并将其发送给网络，这就是<strong>Request sent阶段</strong>。通常这个阶段非常快，因为只需要把浏览器缓冲区的数据发送出去就结束了，并不需要判断服务器是否接收到了，所以这个时间通常不到1毫秒。</p><p>数据发送出去了，接下来就是等待接收服务器第一个字节的数据，这个阶段称为Waiting (TTFB)，通常也称为“<strong>第一字节时间</strong>”。 TTFB是反映服务端响应速度的重要指标，对服务器来说，TTFB 时间越短，就说明服务器响应越快。</p><p>接收到第一个字节之后，进入陆续接收完整数据的阶段，也就是<strong>Content Download阶段</strong>，这意味着从第一字节时间到接收到全部响应数据所用的时间。</p><h2>优化时间线上耗时项</h2><p>了解了时间线面板上的各项含义之后，我们就可以根据这个请求的时间线来实现相关的优化操作了。</p><h3>1. 排队（Queuing）时间过久</h3><p>排队时间过久，大概率是由浏览器为每个域名最多维护6个连接导致的。那么基于这个原因，你就可以让1个站点下面的资源放在多个域名下面，比如放到3个域名下面，这样就可以同时支持18个连接了，这种方案称为<strong>域名分片</strong>技术。除了域名分片技术外，我个人还建议你<strong>把站点升级到HTTP2</strong>，因为HTTP2已经没有每个域名最多维护6个TCP连接的限制了。</p><h3>2. 第一字节时间（TTFB）时间过久</h3><p>这可能的原因有如下：</p><ul>\n<li><strong>服务器生成页面数据的时间过久</strong>。对于动态网页来说，服务器收到用户打开一个页面的请求时，首先要从数据库中读取该页面需要的数据，然后把这些数据传入到模板中，模板渲染后，再返回给用户。服务器在处理这个数据的过程中，可能某个环节会出问题。</li>\n<li><strong>网络的原因</strong>。比如使用了低带宽的服务器，或者本来用的是电信的服务器，可联通的网络用户要来访问你的服务器，这样也会拖慢网速。</li>\n<li><strong>发送请求头时带上了多余的用户信息</strong>。比如一些不必要的Cookie信息，服务器接收到这些Cookie信息之后可能需要对每一项都做处理，这样就加大了服务器的处理时长。</li>\n</ul><p>对于这三种问题，你要有针对性地出一些解决方案。面对第一种服务器的问题，你可以想办法去提高服务器的处理速度，比如通过增加各种缓存的技术；针对第二种网络问题，你可以使用CDN来缓存一些静态文件；至于第三种，你在发送请求时就去尽可能地减少一些不必要的Cookie数据信息。</p><h3>3. Content Download时间过久</h3><p>如果单个请求的Content Download花费了大量时间，有可能是字节数太多的原因导致的。这时候你就需要减少文件大小，比如压缩、去掉源码中不必要的注释等方法。</p><h2>总结</h2><p>好了，今天就介绍到这里了，下面我来总结下今天的内容。</p><p>首先我们简单介绍了Chrome开发者工具10个基础的面板信息；然后重点剖析了网络面板，再结合之前介绍的网络请求流程来重点分析了网络面板中时间线的各个指标的含义；最后我们还简要分析了时间线中各项指标出现异常的可能原因，并给出了一些优化方案。</p><p>其实通过今天的分析，我们可以得出这样一个结论：如果你要去做一些实践性的项目优化，理解其背后的理论至关重要。因为理论就是一条“线”，它会把各种实践的内容“串”在一起，然后你可以围绕着这条“线”来排查问题。</p><h2>思考时间</h2><p>今天我们介绍了网络面板，还有一个非常重要的Performance面板我们没有介绍，不过你可以去网上查找一些相关的资料。</p><p>所以今天留给你的是一道实际操作的题目，你可以结合网络面板和Performance面板来分析一个Web应用的性能瓶颈（比如<a href=\"https://www.12306.cn/index/\">https://www.12306.cn</a> ）。</p><p>欢迎在留言区与我分享你的想法，也欢迎你在留言区记录你的思考过程。感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给更多的朋友。</p><p></p>","neighbors":{"left":{"article_title":"20 | async/await：使用同步的方式去写异步代码","id":137827},"right":{"article_title":"22 | DOM树：JavaScript是如何影响DOM树构建的？","id":140140}},"comments":[{"had_liked":false,"id":139418,"user_name":"wubinsheng","can_delete":false,"product_type":"c1","uid":1661637,"ip_address":"","ucode":"6ECCABF4C4D7D1","user_header":"https://static001.geekbang.org/account/avatar/00/19/5a/c5/221ab4d9.jpg","comment_is_top":false,"comment_ctime":1570629918,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"486901934366","product_id":100033601,"comment_content":"强烈请求老师追加Performance面板的介绍。。。。","like_count":113,"discussions":[{"author":{"id":2033513,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/07/69/43cf2251.jpg","nickname":"Alan He","note":"","ucode":"A0780F4619D388","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351786,"discussion_content":"已追加了，😄","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614436781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1037687,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d5/77/fbbd42f8.jpg","nickname":"菜帅帅帅","note":"","ucode":"A70D1BD8DFA8F1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312452,"discussion_content":"+10086","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602688258,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135472,"user_name":"mfist","can_delete":false,"product_type":"c1","uid":1373624,"ip_address":"","ucode":"4F99F422C23FB4","user_header":"https://static001.geekbang.org/account/avatar/00/14/f5/b8/9f165f4b.jpg","comment_is_top":false,"comment_ctime":1569191663,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"194842719983","product_id":100033601,"comment_content":"12306首页网站分析：<br>1. 传输方面：可以启用gzip压缩提高传输效率<br>2. js模块化方面：使用requirejs的前端模块化方案，可以使用webpack进行打包压缩，使用esModule方案，有利于浏览器优化<br>3. 缓存方面：全部使用的协商缓存，每次静态资源请求都会走到服务器进行验证，无疑增加服务器压力，可以考虑部分使用浏览器强缓存没设置过期时间<br>另外：感觉12306主要压力不在首页，在于大量的班次查询服务（如查询北京到上海的火车会直接生成新的页面进行响应），还有车位区间的算法的优化","like_count":46},{"had_liked":false,"id":135131,"user_name":"杨越","can_delete":false,"product_type":"c1","uid":1651132,"ip_address":"","ucode":"88B933F2096E11","user_header":"https://static001.geekbang.org/account/avatar/00/19/31/bc/4e679d81.jpg","comment_is_top":false,"comment_ctime":1569034890,"is_pvip":false,"replies":[{"id":"51915","content":"目前没有，写完还要修订，答疑，补充。 这个专栏的后续事情还挺多","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1569147204,"ip_address":"","comment_id":135131,"utype":1}],"discussion_count":1,"race_medal":0,"score":"104648249994","product_id":100033601,"comment_content":"老师除了这个专栏还有其他专栏的计划吗？这个课干货很多，纯理论和纯代码是不给力的，老师你这种模式结合代码和理论很给力啊啊啊！","like_count":25,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468061,"discussion_content":"目前没有，写完还要修订，答疑，补充。 这个专栏的后续事情还挺多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569147204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157507,"user_name":"六个周","can_delete":false,"product_type":"c1","uid":1067697,"ip_address":"","ucode":"7FFED12CC3346F","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/b1/e2b9e94f.jpg","comment_is_top":false,"comment_ctime":1575180758,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"35934919126","product_id":100033601,"comment_content":"这个专栏内的干货  我感觉能用半年时间去消化吸收。","like_count":8,"discussions":[{"author":{"id":1098279,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c2/27/2b426e56.jpg","nickname":"杨柳岸-晓风残月","note":"","ucode":"51178EF07694F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385303,"discussion_content":"相见恨晚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626976508,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1409470,"avatar":"https://static001.geekbang.org/account/avatar/00/15/81/be/41a30164.jpg","nickname":"王耀莹","note":"","ucode":"05C050C4C9CACE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352281,"discussion_content":"我感觉自己3年内都很受用","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614671816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135116,"user_name":"レイン小雨","can_delete":false,"product_type":"c1","uid":1219933,"ip_address":"","ucode":"45BED977EFE852","user_header":"https://static001.geekbang.org/account/avatar/00/12/9d/5d/3fdead91.jpg","comment_is_top":false,"comment_ctime":1569031505,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"31633802577","product_id":100033601,"comment_content":"一直不太会用Audits这个面板。。。。。","like_count":7,"discussions":[{"author":{"id":1374715,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/fb/04faa152.jpg","nickname":"上海彭鱼晏","note":"","ucode":"F21C391263DA23","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321191,"discussion_content":"我都没找到这个选项，more tools里也没看到，你的有吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604545949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2033513,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/07/69/43cf2251.jpg","nickname":"Alan He","note":"","ucode":"A0780F4619D388","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1374715,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f9/fb/04faa152.jpg","nickname":"上海彭鱼晏","note":"","ucode":"F21C391263DA23","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351787,"discussion_content":"即LightHouse，改名了","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614436835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":321191,"ip_address":""},"score":351787,"extra":""}]}]},{"had_liked":false,"id":140411,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1570933669,"is_pvip":true,"discussion_count":3,"race_medal":1,"score":"23045770149","product_id":100033601,"comment_content":"对于网络面板的每一个请求的 Timing 中<br>最上面出现了<br>Queued at 40.0 min<br>Started at 40.0 min<br>这个是代表什么意思呢？","like_count":5,"discussions":[{"author":{"id":1159974,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b3/26/cc28a05a.jpg","nickname":"悬炫","note":"","ucode":"28BA6B2169256B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":256579,"discussion_content":"Queued at 40.0 min\n它表示当前的这个请求在这个页面加载过程中，加入到请求队列中的时间。这个数值是从0开始计算的，然后按照加入队列的顺序，依次累加的。\nStarted at 40.0 min\n表示加入到队列之后，实际开始处理的时间","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588498529,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1159974,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b3/26/cc28a05a.jpg","nickname":"悬炫","note":"","ucode":"28BA6B2169256B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332137,"discussion_content":"假如该请求是第二个请求，那也就是说前面的请求用时40ms，那么问题来了，请求不是同时可以发起6个吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607072911,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":256579,"ip_address":""},"score":332137,"extra":""},{"author":{"id":1440735,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fb/df/8615f2d3.jpg","nickname":"kaiking","note":"","ucode":"DBE91C5855B9FD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380353,"discussion_content":"？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624452568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":332137,"ip_address":""},"score":380353,"extra":""}]}]},{"had_liked":false,"id":135172,"user_name":"隔夜果酱","can_delete":false,"product_type":"c1","uid":1319638,"ip_address":"","ucode":"5AFEB62E832BCB","user_header":"https://static001.geekbang.org/account/avatar/00/14/22/d6/9378f4d5.jpg","comment_is_top":false,"comment_ctime":1569051382,"is_pvip":false,"replies":[{"id":"51913","content":"很好，后面继续","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1569147133,"ip_address":"","comment_id":135172,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18748920566","product_id":100033601,"comment_content":"没有使用cdn缓存静态资源,js&#47;css&#47;html等也没有进行压缩,一些ajax请求感觉可以合并.request.js可以换为wepack来打包.使用nginx之类的.","like_count":4,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468081,"discussion_content":"很好，后面继续","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569147133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":160131,"user_name":"-_-|||","can_delete":false,"product_type":"c1","uid":1328142,"ip_address":"","ucode":"94B21594658BF9","user_header":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","comment_is_top":false,"comment_ctime":1575876719,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"14460778607","product_id":100033601,"comment_content":"‘还有一些原因可能导致连接过程被推迟，这个推迟就表现在面板中的 Stalled 上，它表示停滞的意思’，还到底是哪些原因呢？比如说呢","like_count":3},{"had_liked":false,"id":140591,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1571013108,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10160947700","product_id":100033601,"comment_content":"优先级低的会给优先级高的让路，浏览器是怎么实现让路的？求老师指教","like_count":2,"discussions":[{"author":{"id":1373624,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f5/b8/9f165f4b.jpg","nickname":"mfist","note":"","ucode":"4F99F422C23FB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":40955,"discussion_content":"http2中有关键资源，会有优先级","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572311939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137433,"user_name":"Geek_320111","can_delete":false,"product_type":"c1","uid":1648388,"ip_address":"","ucode":"837D86A00F9DA8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/XA9Dx0Gv5dTDjZbdRDd8m5BQWOdsXhJcib2oosKqBpkztD4G63PIna2moqndQ0Zu0WVga4wFP7arLaR2RshczwA/132","comment_is_top":false,"comment_ctime":1569739948,"is_pvip":false,"replies":[{"id":"52814","content":"关于performance，我是考虑等课程结束之后补充讲下，performance的确非常重要","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1569749909,"ip_address":"","comment_id":137433,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10159674540","product_id":100033601,"comment_content":"老师，今天讲的功能在工作中用得很多，performance还会详讲吗？这个不太会用。","like_count":2,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469090,"discussion_content":"关于performance，我是考虑等课程结束之后补充讲下，performance的确非常重要","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569749909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":222885,"user_name":"落叶无凌萝","can_delete":false,"product_type":"c1","uid":1245462,"ip_address":"","ucode":"A3516A94659882","user_header":"https://static001.geekbang.org/account/avatar/00/13/01/16/97878049.jpg","comment_is_top":false,"comment_ctime":1590939447,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5885906743","product_id":100033601,"comment_content":"“在发起连接之前，还有一些原因可能导致连接过程被推迟，这个推迟就表现在面板中的 Stalled 上”，这里的，可能会导致连接过程推迟的原因有哪些呢？","like_count":1},{"had_liked":false,"id":138037,"user_name":"Boogie 捷","can_delete":false,"product_type":"c1","uid":1541552,"ip_address":"","ucode":"9F54EF69CC0106","user_header":"https://static001.geekbang.org/account/avatar/00/17/85/b0/496ae224.jpg","comment_is_top":false,"comment_ctime":1569988651,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5864955947","product_id":100033601,"comment_content":"自己学着用performance看了下，主线程一共花了13s才fire on load event，期间大概10s 线程都是idle的。看了下idle期间的network，两个png下载了大概3s，jquery.min.js 也下载了大概1.5s。感觉应该用cdn 加速 asset loading 的时间. 希望老师还是可以结合一下例子讲一下performace tool。","like_count":1,"discussions":[{"author":{"id":1295848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/yicibWmBIDaSpBYI5wCBDQcYu6mxjvz3XZzBibxSNXFfqCS6OJOjvy2Nc2lyDicZfmneW9ZY4KbicA1sNgLktVSicgkw/132","nickname":"老余","note":"","ucode":"17AC6C60D0EB86","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":27672,"discussion_content":"是你网络问题吧，我这边3.5s loaded事件触发","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570674429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1541552,"avatar":"https://static001.geekbang.org/account/avatar/00/17/85/b0/496ae224.jpg","nickname":"Boogie 捷","note":"","ucode":"9F54EF69CC0106","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1295848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/yicibWmBIDaSpBYI5wCBDQcYu6mxjvz3XZzBibxSNXFfqCS6OJOjvy2Nc2lyDicZfmneW9ZY4KbicA1sNgLktVSicgkw/132","nickname":"老余","note":"","ucode":"17AC6C60D0EB86","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29162,"discussion_content":"哦那有可能是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570751449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":27672,"ip_address":""},"score":29162,"extra":""}]}]},{"had_liked":false,"id":135553,"user_name":"Angus","can_delete":false,"product_type":"c1","uid":1377467,"ip_address":"","ucode":"7CC3BA1550FB5B","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/bb/5e5c37c1.jpg","comment_is_top":false,"comment_ctime":1569209391,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5864176687","product_id":100033601,"comment_content":"关于DOMContentLoaded和load事件的区别，一直都有些疑问，老师这里能不能解释的清楚一些，我认为这两个事件对后续Performance性能分析时会有所帮助。以下是我理解的<br>DOMContentLoaded：HTML文档加载完毕，内外链同步JS代码执行完毕之后触发<br>load：DOM结构中的JS&#47;CSS&#47;图片以及异步加载的JS&#47;CSS&#47;图片加载完成之后出发，video&#47;audio&#47;flash不会影响load事件的触发","like_count":1,"discussions":[{"author":{"id":1742425,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/96/59/07ed4c07.jpg","nickname":"harrison","note":"","ucode":"9C8FBAD3041D44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244487,"discussion_content":"defer的script是在Html parse后，DomContentLoaded前触发","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587606075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135534,"user_name":"Will","can_delete":false,"product_type":"c1","uid":1161437,"ip_address":"","ucode":"BB78C2B9B44D36","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/dd/d729557f.jpg","comment_is_top":false,"comment_ctime":1569205773,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"5864173069","product_id":100033601,"comment_content":"老师可以解释一下这句话的意思吗?<br>网络进程在为数据分配磁盘空间时，新的HTTP请求也需要短暂的等待磁盘分配结束。","like_count":1,"discussions":[{"author":{"id":1623567,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c6/0f/3937645e.jpg","nickname":"NBE01","note":"","ucode":"DF0D22D4495D54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":26697,"discussion_content":"首先内存大小是有限的，其次，我们网络请求的资源都是占内存的，最终我们都是放到硬盘上的，上硬盘就有 磁盘io的介入， 磁盘io慢。 不光你网页卡，整个电脑都卡！！","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1570614040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1161437,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b8/dd/d729557f.jpg","nickname":"Will","note":"","ucode":"BB78C2B9B44D36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1623567,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c6/0f/3937645e.jpg","nickname":"NBE01","note":"","ucode":"DF0D22D4495D54","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":41088,"discussion_content":"多谢!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572348739,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":26697,"ip_address":""},"score":41088,"extra":""},{"author":{"id":1622868,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/yxWUVmiccGZdE0lVATCpdUQDh7ubI7BGXRxiadfog14S3TjRR2dcqMLOR87jf2EA3taEFw4FdNMSDhRanKhMB2Kw/132","nickname":"Geek_panda","note":"","ucode":"ED245B851B841A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1623567,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c6/0f/3937645e.jpg","nickname":"NBE01","note":"","ucode":"DF0D22D4495D54","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385299,"discussion_content":"每次请求都会去申请硬盘空间吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626971832,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":26697,"ip_address":""},"score":385299,"extra":""}]}]},{"had_liked":false,"id":135224,"user_name":"前端队长","can_delete":false,"product_type":"c1","uid":1035766,"ip_address":"","ucode":"2F6ACAD6568FDE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/f6/ad85ac99.jpg","comment_is_top":false,"comment_ctime":1569070618,"is_pvip":false,"replies":[{"id":"51912","content":"很好，继续","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1569147104,"ip_address":"","comment_id":135224,"utype":1}],"discussion_count":1,"race_medal":1,"score":"5864037914","product_id":100033601,"comment_content":"12306官网的css没有压缩，TTFB耗时很多。。","like_count":1,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468102,"discussion_content":"很好，继续","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569147104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357927,"user_name":"一箭中的","can_delete":false,"product_type":"c1","uid":1025729,"ip_address":"中国香港","ucode":"9D18662C5CCF7A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/c1/d4e6147e.jpg","comment_is_top":false,"comment_ctime":1663751574,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1663751574","product_id":100033601,"comment_content":"Stalled时间长有哪些影响因素？","like_count":0},{"had_liked":false,"id":347820,"user_name":"爱拼才会赢","can_delete":false,"product_type":"c1","uid":1998601,"ip_address":"","ucode":"09421C3BDB80DC","user_header":"https://static001.geekbang.org/account/avatar/00/1e/7f/09/1e95ccbf.jpg","comment_is_top":false,"comment_ctime":1654487677,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654487677","product_id":100033601,"comment_content":"谢谢作者，学到很多","like_count":0},{"had_liked":false,"id":260425,"user_name":"507","can_delete":false,"product_type":"c1","uid":2081134,"ip_address":"","ucode":"2D41E2CF2A2A63","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7qJDGibf9lykyV56jzWbpxXkSg1ThxQ27Uo2VQas1o5WQ5W2cshjlLGaWtbolY8teAhpCyIAkCibA/132","comment_is_top":false,"comment_ctime":1605002093,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1605002093","product_id":100033601,"comment_content":"老师你好，很好奇一个问题，DOM解析时候是按照HTML从上到下解析的，如果遇到js脚本则暂停解析，等待js下载完成解析后在继续解析，那为什么同时还可以有6个链接呢？比如我一个HTML文件从上到下引入3个js文件，包含a.js, b.js, c.js,实际上我观察了一下，这3个文件会同时下载，在依次执行？","like_count":0,"discussions":[{"author":{"id":1374181,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f7/e5/ec543f3b.jpg","nickname":"张宗伟","note":"","ucode":"1447A20C7A8982","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":364751,"discussion_content":"同时的6个链接，是指一个域名下同时只能同时进行6个请求。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617592461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244148,"user_name":"zgy","can_delete":false,"product_type":"c1","uid":1387798,"ip_address":"","ucode":"05EA6845199250","user_header":"https://static001.geekbang.org/account/avatar/00/15/2d/16/b525a71d.jpg","comment_is_top":false,"comment_ctime":1598410998,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1598410998","product_id":100033601,"comment_content":"为啥有的请求Timing中显示 DNS look up、SSL、initial connection 等信息，有的不显示，同样的请求地址，不同的参数，两个请求TTFB时间相差比较大。","like_count":0,"discussions":[{"author":{"id":2366285,"avatar":"","nickname":"Geek_ee7675","note":"","ucode":"6A02AC65A98E0C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373276,"discussion_content":"缓存","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1620674059,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242320,"user_name":"太白北路","can_delete":false,"product_type":"c1","uid":1516144,"ip_address":"","ucode":"3C7E54D38408A3","user_header":"https://static001.geekbang.org/account/avatar/00/17/22/70/ab911260.jpg","comment_is_top":false,"comment_ctime":1597669957,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1597669957","product_id":100033601,"comment_content":"1. 每个请求都带了相同的cookie，考虑是否有可以去掉的情况；<br>2. 部分文件没有压缩；<br>3. 请求中有大量小图片和图标其实可以合并，部分图标可以使用字体图标替换，部分图片效果其实用dom+css可以画出来，没必要用图片；<br>4. 请求大多在TTFB阶段产生阻塞，考虑增强服务器性能","like_count":0},{"had_liked":false,"id":212008,"user_name":"Geek_28d96d","can_delete":false,"product_type":"c1","uid":1449848,"ip_address":"","ucode":"D12D80B55DD534","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/noTIfbBmzicH6oZaBqycVzKTLN5ibWWrDleVgnaQYCHJAAhUhNmgSCdFzrr1VRABwUQ7hROU7BgGVwHiaaHeHAiaVQ/132","comment_is_top":false,"comment_ctime":1588045536,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588045536","product_id":100033601,"comment_content":"没有在Devtools里面看见 Layers 面板 和Memory面板？","like_count":0},{"had_liked":false,"id":211470,"user_name":"汤显文","can_delete":false,"product_type":"c1","uid":1377966,"ip_address":"","ucode":"C3D41A180EB0F7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/xCAJCvA3iaMXgjibb0mh99qN9y2Kibc5y31DOaAM0RaEryHM50qJ8GOqXvPAtjILIArIysRQhEWPq9Bt1NgibZpBoA/132","comment_is_top":false,"comment_ctime":1587968558,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587968558","product_id":100033601,"comment_content":"为什么我的抓图信息部分就显示fetching frames。。。","like_count":0},{"had_liked":false,"id":209732,"user_name":"前端黑板报","can_delete":false,"product_type":"c1","uid":1003365,"ip_address":"","ucode":"55A9F886A35838","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4f/65/2133fdfb.jpg","comment_is_top":false,"comment_ctime":1587605961,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1587605961","product_id":100033601,"comment_content":"TTFB是不是包括：发送过去的时间 + 服务器返回第一个字节的时间，是一个来回的时间？","like_count":0,"discussions":[{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":328486,"discussion_content":"我是这么理解的，request send只是把包从缓冲区发出去了，代表离开了网卡。 所以是数据包从网卡出去开始算起，包括发送到服务器的时间和返回的时间。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606146734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209342,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1587539164,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587539164","product_id":100033601,"comment_content":"3. 单个资源的时间线  这一部分的图里 发出请求之后 应该是  回复响应头，不是请求头","like_count":0},{"had_liked":false,"id":186127,"user_name":"blueBean","can_delete":false,"product_type":"c1","uid":1816697,"ip_address":"","ucode":"6A68D2414BD904","user_header":"https://static001.geekbang.org/account/avatar/00/1b/b8/79/a4dbe9ee.jpg","comment_is_top":false,"comment_ctime":1583762741,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583762741","product_id":100033601,"comment_content":"空闲时间块非常多，但下载的时候又很密集，应该是需要CDN吧","like_count":0},{"had_liked":false,"id":168012,"user_name":"Geek_a2584e","can_delete":false,"product_type":"c1","uid":1785158,"ip_address":"","ucode":"26F4FD66A90C93","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIkvkUicJ7SfC3lXJUQMaTFgYYdv9tgAibMCe99gzicrl1gAOqRZcKXTeNQMp41PeyTmfd0bTx4xCNzQ/132","comment_is_top":false,"comment_ctime":1577975659,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577975659","product_id":100033601,"comment_content":"日常黑12306哈哈哈","like_count":0},{"had_liked":false,"id":164869,"user_name":"coder","can_delete":false,"product_type":"c1","uid":1059952,"ip_address":"","ucode":"F70511D614B9F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/2c/70/02b627a6.jpg","comment_is_top":false,"comment_ctime":1577102951,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577102951","product_id":100033601,"comment_content":"过滤器那四个选项不显示的，点一下和过滤器同一排右侧的小齿轮","like_count":0},{"had_liked":false,"id":160115,"user_name":"-_-|||","can_delete":false,"product_type":"c1","uid":1328142,"ip_address":"","ucode":"94B21594658BF9","user_header":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","comment_is_top":false,"comment_ctime":1575873129,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1575873129","product_id":100033601,"comment_content":"&#39;DOMContentLoaded，这个事件发生后，.......CSS 文件都已经下载完成了。Load，说明浏览器已经加载了所有的资源（图像、样式表等）。&#39;，CSS文件难道不是样式表吗？应该在DOMContentLoaded事件触发时完成。","like_count":0},{"had_liked":false,"id":143487,"user_name":"风一样的浪漫","can_delete":false,"product_type":"c1","uid":1097299,"ip_address":"","ucode":"EE023C0B759F26","user_header":"https://static001.geekbang.org/account/avatar/00/10/be/53/71057a8b.jpg","comment_is_top":false,"comment_ctime":1571715853,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571715853","product_id":100033601,"comment_content":"本以为这章会有Performance<br>曾经查过很多Performance的资料，感觉都不对<br>只能试着去啃纯英文了","like_count":0},{"had_liked":false,"id":143486,"user_name":"风一样的浪漫","can_delete":false,"product_type":"c1","uid":1097299,"ip_address":"","ucode":"EE023C0B759F26","user_header":"https://static001.geekbang.org/account/avatar/00/10/be/53/71057a8b.jpg","comment_is_top":false,"comment_ctime":1571715742,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571715742","product_id":100033601,"comment_content":"看到这章的时候超期待Performance，哈哈","like_count":0},{"had_liked":false,"id":141991,"user_name":"曹慧琳","can_delete":false,"product_type":"c1","uid":1203595,"ip_address":"","ucode":"E538709EC056A5","user_header":"https://static001.geekbang.org/account/avatar/00/12/5d/8b/b1e5983b.jpg","comment_is_top":false,"comment_ctime":1571276511,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571276511","product_id":100033601,"comment_content":"老师，我想问个问题，上传文件的请求为什么在network的response里面看不到后端的返回值","like_count":0,"discussions":[{"author":{"id":1502796,"avatar":"https://static001.geekbang.org/account/avatar/00/16/ee/4c/dc3da8f1.jpg","nickname":"π_π蔚","note":"","ucode":"DED817B325A9E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46577,"discussion_content":"没有截图恐怕老师看到也没有办法被你分析。\n个人分析来看，上传文件的接口如果response看不到返回值，有可能是options请求或者接口跨域了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573183763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141859,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1571237866,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571237866","product_id":100033601,"comment_content":"css文件和样式表文件是一个意思吗？","like_count":0},{"had_liked":false,"id":140958,"user_name":"aprilday","can_delete":false,"product_type":"c1","uid":1091173,"ip_address":"","ucode":"E0736DDE5BD3A6","user_header":"https://static001.geekbang.org/account/avatar/00/10/a6/65/1ac26974.jpg","comment_is_top":false,"comment_ctime":1571099283,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571099283","product_id":100033601,"comment_content":"想提问一下我在实际开发中遇到的和这节有关的问题，就是 二阶段 Stalled这一步耗时巨长，这个最可能和什么相关呢。","like_count":0,"discussions":[{"author":{"id":1469677,"avatar":"https://static001.geekbang.org/account/avatar/00/16/6c/ed/e98bde9d.jpg","nickname":"阿dá尤祐","note":"","ucode":"C0564442AEAAC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281172,"discussion_content":"百度到的结论是：stalled阶段是TCP连接的检测过程，如果检测成功就会继续使用该TCP连接发送数据，如果检测失败就会重新建立TCP连接。所以出现stalled阶段过长，往往是丢包所致，这也意味着网络或服务端有问题","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591685487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139393,"user_name":"stone","can_delete":false,"product_type":"c1","uid":1112708,"ip_address":"","ucode":"3FA105FB89CF5F","user_header":"https://static001.geekbang.org/account/avatar/00/10/fa/84/b91ee3a9.jpg","comment_is_top":false,"comment_ctime":1570626126,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570626126","product_id":100033601,"comment_content":"1, Queuing等待时间有点长, 可以升级HTTP2. <br>2, 静态资源文件没有使用CDN<br>3, TTFB 时间长","like_count":0},{"had_liked":false,"id":135587,"user_name":"70K","can_delete":false,"product_type":"c1","uid":1624406,"ip_address":"","ucode":"584CCADC11E74D","user_header":"https://static001.geekbang.org/account/avatar/00/18/c9/56/2caa9d38.jpg","comment_is_top":false,"comment_ctime":1569221233,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569221233","product_id":100033601,"comment_content":"12306官网首页问题：<br>1. 静态资源没有必要携带cookie信息，可以使用第一个独立域名来加载静态资源；<br>2.首页右下角有一个板块是“信用信息”，该板块在未点击的时候数据就已经请求，并且一次性返回了3000条数据，导致在点击该模块时，页面会有可感知的卡顿。可以在浏览到此模块时再发起数据请求，并且返回几十条数据即可。","like_count":0},{"had_liked":false,"id":135585,"user_name":"Chao","can_delete":false,"product_type":"c1","uid":1108745,"ip_address":"","ucode":"DD7742F5537521","user_header":"https://static001.geekbang.org/account/avatar/00/10/eb/09/ba5f0135.jpg","comment_is_top":false,"comment_ctime":1569220684,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569220684","product_id":100033601,"comment_content":"老师：<br>    域名分片 对于域名是否有上限？ <br>    HTTP&#47;2是由于其机制原因还是彻底删除了6个TCP的链接限制","like_count":0},{"had_liked":false,"id":135484,"user_name":"HQ","can_delete":false,"product_type":"c1","uid":1562793,"ip_address":"","ucode":"D01378AFA09EA3","user_header":"https://static001.geekbang.org/account/avatar/00/17/d8/a9/7ddc53b7.jpg","comment_is_top":false,"comment_ctime":1569196200,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1569196200","product_id":100033601,"comment_content":"怎么判断当前有几个tcp链接了？","like_count":0,"discussions":[{"author":{"id":1106123,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKOASyV1lpdkW6It8WQltNGj9021PTibqOwRUTccaSUEM1GmQThOTIRp9Eu7XNZZFfGGNveLbUSw9Q/132","nickname":"tick","note":"","ucode":"D2C864306C06CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21427,"discussion_content":"详细列表可以看connectionID","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1569483197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135347,"user_name":"浩明啦","can_delete":false,"product_type":"c1","uid":1377422,"ip_address":"","ucode":"120ED8FC45B992","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/8e/e75ecc5e.jpg","comment_is_top":false,"comment_ctime":1569135043,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1569135043","product_id":100033601,"comment_content":"没仔细看 -，- 不好意思","like_count":0},{"had_liked":false,"id":135346,"user_name":"浩明啦","can_delete":false,"product_type":"c1","uid":1377422,"ip_address":"","ucode":"120ED8FC45B992","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/8e/e75ecc5e.jpg","comment_is_top":false,"comment_ctime":1569134990,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1569134990","product_id":100033601,"comment_content":"TTFB里面的时间包括请求发出后网络状态不好的等待时间吗？？","like_count":0},{"had_liked":false,"id":135342,"user_name":"浩明啦","can_delete":false,"product_type":"c1","uid":1377422,"ip_address":"","ucode":"120ED8FC45B992","user_header":"https://static001.geekbang.org/account/avatar/00/15/04/8e/e75ecc5e.jpg","comment_is_top":false,"comment_ctime":1569134085,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1569134085","product_id":100033601,"comment_content":"是不是如果有10个请求  先把前6个请求开6个tcp连接 然后后面4个依次放到每一个tcp中排队？","like_count":0}]}