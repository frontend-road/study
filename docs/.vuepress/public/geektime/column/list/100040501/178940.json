{"id":178940,"title":"10 | åˆ°åº•åº”ä¸åº”è¯¥è¿”å›å¯¹è±¡ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>å‰å‡ è®²é‡Œæˆ‘ä»¬å·²ç»çº¦ç•¥åœ°æåˆ°äº†è¿”å›å¯¹è±¡çš„é—®é¢˜ï¼Œæœ¬è®²é‡Œæˆ‘ä»¬è¿›ä¸€æ­¥å±•å¼€è¿™ä¸ªè¯é¢˜ï¼ŒæŠŠè¿”å›å¯¹è±¡è¿™ä¸ªé—®é¢˜è®²æ·±è®²é€ã€‚</p><h2>F.20</h2><p>ã€ŠC++ æ ¸å¿ƒæŒ‡å—ã€‹çš„ F.20 è¿™ä¸€æ¡æ¬¾æ˜¯è¿™ä¹ˆè¯´çš„ <span class=\"orange\">[1]</span>ï¼š</p><blockquote>\n<p>F.20: For â€œoutâ€ output values, prefer return values to output parameters</p>\n</blockquote><p>ç¿»è¯‘ä¸€ä¸‹ï¼š</p><blockquote>\n<p>åœ¨å‡½æ•°è¾“å‡ºæ•°å€¼æ—¶ï¼Œå°½é‡ä½¿ç”¨è¿”å›å€¼è€Œéè¾“å‡ºå‚æ•°</p>\n</blockquote><p>è¿™æ¡å¯èƒ½ä¼šè®©ä¸€äº› C++ è€æ‰‹æ„Ÿåˆ°æƒŠè®¶â€”â€”åœ¨ C++11 ä¹‹å‰çš„å®è·µé‡Œï¼Œæˆ‘ä»¬å®Œå…¨æ˜¯é‡‡ç”¨ç›¸åçš„åšæ³•çš„å•Šï¼</p><p>åœ¨è§£é‡Š F.20 ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æˆ‘ä»¬ä¹‹å‰çš„åšæ³•ã€‚</p><h3>è°ƒç”¨è€…è´Ÿè´£ç®¡ç†å†…å­˜ï¼Œæ¥å£è´Ÿè´£ç”Ÿæˆ</h3><p>ä¸€ç§å¸¸è§çš„åšæ³•æ˜¯ï¼Œæ¥å£çš„è°ƒç”¨è€…è´Ÿè´£åˆ†é…ä¸€ä¸ªå¯¹è±¡æ‰€éœ€çš„å†…å­˜å¹¶è´Ÿè´£å…¶ç”Ÿå‘½å‘¨æœŸï¼Œæ¥å£è´Ÿè´£ç”Ÿæˆæˆ–ä¿®æ”¹è¯¥å¯¹è±¡ã€‚è¿™ç§åšæ³•æ„å‘³ç€å¯¹è±¡å¯ä»¥é»˜è®¤æ„é€ ï¼ˆç”šè‡³åªæ˜¯ä¸€ä¸ªç»“æ„ï¼‰ï¼Œä»£ç ä¸€èˆ¬ä½¿ç”¨é”™è¯¯ç è€Œéå¼‚å¸¸ã€‚</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class=\"language-c++\">MyObj obj;\nec = initialize(&amp;obj);\nâ€¦\n</code></pre><p>è¿™ç§åšæ³•å’Œ C æ˜¯å…¼å®¹çš„ï¼Œå¾ˆå¤šç¨‹åºå‘˜å‡ºäºæƒ¯æ€§ä¹Ÿæ²¿ç”¨äº† C çš„è¿™ç§åšæ³•ã€‚ä¸€ç§ç•¥ä¸º C++ ç‚¹çš„åšæ³•æ˜¯ä½¿ç”¨å¼•ç”¨ä»£æ›¿æŒ‡é’ˆï¼Œè¿™æ ·åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­å°±ä¸éœ€è¦ä½¿ç”¨ <code>&amp;</code> è¿ç®—ç¬¦äº†ï¼›ä½†è¿™æ ·åªæ˜¯è¯­æ³•ç•¥æœ‰åŒºåˆ«ï¼Œæœ¬è´¨å®Œå…¨ç›¸åŒã€‚å¦‚æœå¯¹è±¡æœ‰åˆç†çš„ææ„å‡½æ•°çš„è¯ï¼Œé‚£è¿™ç§åšæ³•çš„ä¸»è¦é—®é¢˜æ˜¯å•°å—¦ã€éš¾äºç»„åˆã€‚ä½ éœ€è¦å†™æ›´å¤šçš„ä»£ç è¡Œï¼Œä½¿ç”¨æ›´å¤šçš„ä¸­é—´å˜é‡ï¼Œä¹Ÿå°±æ›´å®¹æ˜“çŠ¯é”™è¯¯ã€‚</p><!-- [[[read_end]]] --><p>å‡å¦‚æˆ‘ä»¬å·²æœ‰çŸ©é˜µå˜é‡ $\\mathbf{A}$ã€$\\mathbf{B}$ å’Œ $\\mathbf{C}$ï¼Œè¦æ‰§è¡Œä¸€ä¸ªæ“ä½œ</p><p>$$<br>\n\\mathbf{R} = \\mathbf{A} \\times \\mathbf{B} + \\mathbf{C}<br>\n$$</p><p>é‚£åœ¨è¿™ç§åšæ³•ä¸‹ä»£ç å¤§æ¦‚ä¼šå†™æˆï¼š</p><pre><code class=\"language-c++\">error_code_t add(\n  matrix* result,\n  const matrix&amp; lhs,\n  const matrix&amp; rhs);\nerror_code_t multiply(\n  matrix* result,\n  const matrix&amp; lhs,\n  const matrix&amp; rhs);\nâ€¦\n  error_code_t ec;\n  â€¦\n  matrix temp;\n  ec = multiply(&amp;temp, a, b);\n  if (ec != SUCCESS) {\n    goto end;\n  }\n  matrix r;\n  ec = add(&amp;r, temp, c);\n  if (ec != SUCCESS) {\n    goto end;\n  }\n  â€¦\nend:\n  // è¿”å› ec æˆ–ç±»ä¼¼é”™è¯¯å¤„ç†\n</code></pre><p>ç†è®ºä¸Šè¯¥æ–¹æ³•å¯ä»¥æœ‰ä¸€ä¸ªå˜ä½“ï¼Œä¸ä½¿ç”¨è¿”å›å€¼ï¼Œè€Œä½¿ç”¨å¼‚å¸¸æ¥è¡¨ç¤ºé”™è¯¯ã€‚å®è·µä¸­ï¼Œæˆ‘ä»æ¥æ²¡åœ¨å®é™…ç³»ç»Ÿä¸­çœ‹åˆ°è¿‡è¿™æ ·çš„ä»£ç ã€‚</p><h3>æ¥å£è´Ÿè´£å¯¹è±¡çš„å †ä¸Šç”Ÿæˆå’Œå†…å­˜ç®¡ç†</h3><p>å¦å¤–ä¸€ç§å¯èƒ½çš„åšæ³•æ˜¯æ¥å£æä¾›ç”Ÿæˆå’Œé”€æ¯å¯¹è±¡çš„å‡½æ•°ï¼Œå¯¹è±¡åœ¨å †ä¸Šç»´æŠ¤ã€‚<code>fopen</code> å’Œ <code>fclose</code> å°±æ˜¯è¿™æ ·çš„æ¥å£çš„å®ä¾‹ã€‚æ³¨æ„ä½¿ç”¨è¿™ç§æ–¹æ³•ä¸€èˆ¬ä¸æ¨èç”±æ¥å£ç”Ÿæˆå¯¹è±¡ï¼Œç„¶åç”±è°ƒç”¨è€…é€šè¿‡è°ƒç”¨ <code>delete</code> æ¥é‡Šæ”¾ã€‚åœ¨æŸäº›ç¯å¢ƒé‡Œï¼Œæ¯”å¦‚ Windows ä¸Šä½¿ç”¨ä¸åŒçš„è¿è¡Œæ—¶åº“æ—¶ï¼Œè¿™æ ·åšä¼šå¼•å‘é—®é¢˜ã€‚</p><p>åŒæ ·ä»¥ä¸Šé¢çš„çŸ©é˜µè¿ç®—ä¸ºä¾‹ï¼Œä»£ç å¤§æ¦‚å°±ä¼šå†™æˆè¿™ä¸ªæ ·å­ï¼š</p><pre><code class=\"language-c++\">matrix* add(\n  const matrix* lhs,\n  const matrix* rhs,\n  error_code_t* ec);\nmatrix* multiply(\n  const matrix* lhs,\n  const matrix* rhs,\n  error_code_t* ec);\nvoid deinitialize(matrix** mat);\nâ€¦\n  error_code_t ec;\n  â€¦\n  matrix* temp = nullptr;\n  matrix* r = nullptr;\n  temp = multiply(a, b, &amp;ec);\n  if (!temp) {\n    goto end;\n  }\n  r = add(temp, c, &amp;ec);\n  if (!r) {\n    goto end;\n  }\n  â€¦\nend:\n  if (temp) {\n    deinitialize(&amp;temp);\n  }\n  // è¿”å› ec æˆ–ç±»ä¼¼é”™è¯¯å¤„ç†\n</code></pre><p>å¯ä»¥æ³¨æ„åˆ°ï¼Œè™½ç„¶ä»£ç çœ‹ä¼¼ç¨å¾®è‡ªç„¶äº†ä¸€ç‚¹ï¼Œä½†å•°å—¦ç¨‹åº¦å´å¢åŠ äº†ï¼ŒåŸå› æ˜¯æ­£ç¡®çš„å¤„ç†éœ€è¦è€ƒè™‘åˆ°å„ç§ä¸åŒé”™è¯¯è·¯å¾„ä¸‹çš„èµ„æºé‡Šæ”¾é—®é¢˜ã€‚è¿™å„¿ä¹Ÿæ²¡æœ‰ä½¿ç”¨å¼‚å¸¸ï¼Œå› ä¸ºå¼‚å¸¸åœ¨è¿™ç§è¡¨è¾¾ä¸‹ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ï¼Œé™¤éç”¨ä¸Šä¸€å † <code>try</code> å’Œ <code>catch</code>ï¼Œä½†é‚£æ ·å¼‚å¸¸åœ¨è¡¨è¾¾ç®€æ´æ€§ä¸Šçš„ä¼˜åŠ¿å°±æ²¡æœ‰äº†ï¼Œæ²¡æœ‰å®é™…çš„å¥½å¤„ã€‚</p><p>ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬åŒæ—¶ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå’Œå¼‚å¸¸çš„è¯ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªè¿˜ä¸é”™çš„å˜ä½“ã€‚å¦‚æœæ¥å£æ¥å—å’Œè¿”å›çš„éƒ½æ˜¯ <code>shared_ptr&lt;matrix&gt;</code>ï¼Œé‚£è°ƒç”¨ä»£ç å°±ç®€å•äº†ï¼š</p><pre><code class=\"language-c++\">shared_ptr&lt;matrix&gt; add(\n  const shared_ptr&lt;matrix&gt;&amp; lhs,\n  const shared_ptr&lt;matrix&gt;&amp; rhs);\nshared_ptr&lt;matrix&gt; multiply(\n  const shared_ptr&lt;matrix&gt;&amp; lhs,\n  const shared_ptr&lt;matrix&gt;&amp; rhs);\nâ€¦\n  auto r = add(multiply(a, b), c);\n</code></pre><p>è°ƒç”¨è¿™äº›æ¥å£å¿…é¡»è¦ä½¿ç”¨ <code>shared_ptr</code>ï¼Œè¿™ä¸èƒ½ä¸è¯´æ˜¯ä¸€ä¸ªé™åˆ¶ã€‚å¦å¤–ï¼Œå¯¹è±¡æ°¸è¿œæ˜¯åœ¨å †ä¸Šåˆ†é…çš„ï¼Œåœ¨å¾ˆå¤šåœºåˆï¼Œä¹Ÿä¼šæœ‰ä¸€å®šçš„æ€§èƒ½å½±å“ã€‚</p><h3>æ¥å£ç›´æ¥è¿”å›å¯¹è±¡</h3><p>æœ€ç›´æ¥äº†å½“çš„ä»£ç ï¼Œå½“ç„¶å°±æ˜¯ç›´æ¥è¿”å›å¯¹è±¡äº†ã€‚è¿™å›æˆ‘ä»¬çœ‹å®é™…å¯ç¼–è¯‘ã€è¿è¡Œçš„ä»£ç ï¼š</p><pre><code class=\"language-c++\">#include &lt;armadillo&gt;\n#include &lt;iostream&gt;\n\nusing arma::imat22;\nusing std::cout;\n\nint main()\n{\n  imat22 a{{1, 1}, {2, 2}};\n  imat22 b{{1, 0}, {0, 1}};\n  imat22 c{{2, 2}, {1, 1}};\n  imat22 r = a * b + c;\n  cout &lt;&lt; r;\n}\n</code></pre><p>è¿™æ®µä»£ç ä½¿ç”¨äº† Armadilloï¼Œä¸€ä¸ªåˆ©ç”¨ç°ä»£ C++ ç‰¹æ€§çš„å¼€æºçº¿æ€§ä»£æ•°åº“ <span class=\"orange\">[2]</span>ã€‚ä½ å¯ä»¥çœ‹åˆ°ä»£ç éå¸¸ç®€æ´ï¼Œå®Œå…¨è¡¨æ„ï¼ˆ<code>imat22</code> æ˜¯å…ƒç´ ç±»å‹ä¸ºæ•´æ•°çš„å¤§å°å›ºå®šä¸º 2 x 2 çš„çŸ©é˜µï¼‰ã€‚å®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul>\n<li>ä»£ç ç›´è§‚ã€å®¹æ˜“ç†è§£ã€‚</li>\n<li>ä¹˜æ³•å’ŒåŠ æ³•å¯ä»¥ç»„åˆåœ¨ä¸€è¡Œé‡Œå†™å‡ºæ¥ï¼Œæ— éœ€ä¸­é—´å˜é‡ã€‚</li>\n<li>æ€§èƒ½ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚å®é™…æ‰§è¡Œä¸­ï¼Œæ²¡æœ‰å¤åˆ¶å‘ç”Ÿï¼Œè®¡ç®—ç»“æœç›´æ¥å­˜æ”¾åˆ°äº†å˜é‡ <code>r</code> ä¸Šã€‚æ›´å¦™çš„æ˜¯ï¼Œå› ä¸ºçŸ©é˜µå¤§å°æ˜¯å·²çŸ¥çš„ï¼Œè¿™å„¿ä¸éœ€è¦ä»»ä½•åŠ¨æ€å†…å­˜ï¼Œæ‰€æœ‰å¯¹è±¡åŠå…¶æ•°æ®å…¨éƒ¨å­˜æ”¾åœ¨æ ˆä¸Šã€‚</li>\n</ul><p>Armadillo æ˜¯ä¸ªæ¯”è¾ƒå¤æ‚çš„åº“ï¼Œæˆ‘ä»¬å°±ä¸ä»¥ Armadillo çš„ä»£ç ä¸ºä¾‹æ¥è¿›ä¸€æ­¥è®²è§£äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå‡æƒ³çš„ <code>matrix</code> ç±»æ¥çœ‹çœ‹è¿”å›å¯¹è±¡çš„ä»£ç æ˜¯æ€æ ·ç¼–å†™çš„ã€‚</p><h2>å¦‚ä½•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Ÿ</h2><p>ä¸€ä¸ªç”¨æ¥è¿”å›çš„å¯¹è±¡ï¼Œé€šå¸¸åº”å½“æ˜¯å¯ç§»åŠ¨æ„é€ /èµ‹å€¼çš„ï¼Œä¸€èˆ¬ä¹ŸåŒæ—¶æ˜¯å¯æ‹·è´æ„é€ /èµ‹å€¼çš„ã€‚å¦‚æœè¿™æ ·ä¸€ä¸ªå¯¹è±¡åŒæ—¶åˆå¯ä»¥é»˜è®¤æ„é€ ï¼Œæˆ‘ä»¬å°±ç§°å…¶ä¸ºä¸€ä¸ªåŠæ­£åˆ™ï¼ˆsemiregularï¼‰çš„å¯¹è±¡ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œæˆ‘ä»¬åº”å½“å°½é‡è®©æˆ‘ä»¬çš„ç±»æ»¡è¶³åŠæ­£åˆ™è¿™ä¸ªè¦æ±‚ã€‚</p><p>åŠæ­£åˆ™æ„å‘³ç€æˆ‘ä»¬çš„ <code>matrix</code> ç±»æä¾›ä¸‹é¢çš„æˆå‘˜å‡½æ•°ï¼š</p><pre><code class=\"language-c++\">class matrix {\npublic:\n  // æ™®é€šæ„é€ \n  matrix(size_t rows, size_t cols);\n  // åŠæ­£åˆ™è¦æ±‚çš„æ„é€ \n  matrix();\n  matrix(const matrix&amp;);\n  matrix(matrix&amp;&amp;);\n  // åŠæ­£åˆ™è¦æ±‚çš„èµ‹å€¼\n  matrix&amp; operator=(const matrix&amp;);\n  matrix&amp; operator=(matrix&amp;&amp;);\n};\n</code></pre><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹åœ¨æ²¡æœ‰è¿”å›å€¼ä¼˜åŒ–çš„æƒ…å†µä¸‹ C++ æ˜¯æ€æ ·è¿”å›å¯¹è±¡çš„ã€‚ä»¥çŸ©é˜µä¹˜æ³•ä¸ºä¾‹ï¼Œä»£ç åº”è¯¥åƒä¸‹é¢è¿™æ ·ï¼š</p><pre><code class=\"language-c++\">matrix operator*(const matrix&amp; lhs,\n                 const matrix&amp; rhs)\n{\n  if (lhs.cols() != rhs.rows()) {\n    throw runtime_error(\n      \"sizes mismatch\");\n  }\n  matrix result(lhs.rows(),\n                rhs.cols());\n  // å…·ä½“è®¡ç®—è¿‡ç¨‹\n  return result;\n}\n</code></pre><p>æ³¨æ„å¯¹äºä¸€ä¸ªæœ¬åœ°å˜é‡ï¼Œæˆ‘ä»¬æ°¸è¿œä¸åº”è¯¥è¿”å›å…¶å¼•ç”¨ï¼ˆæˆ–æŒ‡é’ˆï¼‰ï¼Œä¸ç®¡æ˜¯ä½œä¸ºå·¦å€¼è¿˜æ˜¯å³å€¼ã€‚ä»æ ‡å‡†çš„è§’åº¦ï¼Œè¿™ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼ˆundefined behaviorï¼‰ï¼Œä»å®é™…çš„è§’åº¦ï¼Œè¿™æ ·çš„å¯¹è±¡ä¸€èˆ¬æ”¾åœ¨æ ˆä¸Šå¯ä»¥è¢«è°ƒç”¨è€…æ­£å¸¸è¦†ç›–ä½¿ç”¨çš„éƒ¨åˆ†ï¼Œéšä¾¿ä¸€ä¸ªå‡½æ•°è°ƒç”¨æˆ–å˜é‡å®šä¹‰å°±å¯èƒ½è¦†ç›–è¿™ä¸ªå¯¹è±¡å æ®çš„å†…å­˜ã€‚è¿™è¿˜æ˜¯è¿™ä¸ªå¯¹è±¡çš„ææ„ä¸åšäº‹æƒ…çš„æƒ…å†µï¼šå¦‚æœææ„å‡½æ•°ä¼šé‡Šæ”¾å†…å­˜æˆ–ç ´åæ•°æ®çš„è¯ï¼Œé‚£ä½ è®¿é—®åˆ°çš„å¯¹è±¡å³ä½¿å†…å­˜æ²¡æœ‰è¢«è¦†ç›–ï¼Œä¹Ÿæ—©å°±ä¸æ˜¯æœ‰åˆæ³•æ•°æ®çš„å¯¹è±¡äº†â€¦â€¦</p><p>å›åˆ°æ­£é¢˜ã€‚æˆ‘ä»¬éœ€è¦å›æƒ³èµ·ï¼Œåœ¨<a href=\"https://time.geekbang.org/column/article/169268\">[ç¬¬ 3 è®²]</a> é‡Œè¯´è¿‡çš„ï¼Œè¿”å›éå¼•ç”¨ç±»å‹çš„è¡¨è¾¾å¼ç»“æœæ˜¯ä¸ªçº¯å³å€¼ï¼ˆprvalueï¼‰ã€‚åœ¨æ‰§è¡Œ <code>auto r = â€¦</code> çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè®¤ä¸ºæˆ‘ä»¬å®é™…æ˜¯åœ¨æ„é€  <code>matrix r(â€¦)</code>ï¼Œè€Œâ€œâ€¦â€éƒ¨åˆ†æ˜¯ä¸€ä¸ªçº¯å³å€¼ã€‚å› æ­¤ç¼–è¯‘å™¨ä¼šé¦–å…ˆè¯•å›¾åŒ¹é… <code>matrix(matrix&amp;&amp;)</code>ï¼Œåœ¨æ²¡æœ‰æ—¶åˆ™è¯•å›¾åŒ¹é… <code>matrix(const matrix&amp;)</code>ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰ç§»åŠ¨æ”¯æŒæ—¶ä½¿ç”¨ç§»åŠ¨ï¼Œæ²¡æœ‰ç§»åŠ¨æ”¯æŒæ—¶åˆ™æ‹·è´ã€‚</p><h2>è¿”å›å€¼ä¼˜åŒ–ï¼ˆæ‹·è´æ¶ˆé™¤ï¼‰</h2><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªèƒ½æ˜¾ç¤ºç”Ÿå‘½æœŸè¿‡ç¨‹çš„å¯¹è±¡çš„ä¾‹å­ï¼š</p><pre><code class=\"language-c++\">#include &lt;iostream&gt;\n\nusing namespace std;\n\n// Can copy and move\nclass A {\npublic:\n  A() { cout &lt;&lt; \"Create A\\n\"; }\n  ~A() { cout &lt;&lt; \"Destroy A\\n\"; }\n  A(const A&amp;) { cout &lt;&lt; \"Copy A\\n\"; }\n  A(A&amp;&amp;) { cout &lt;&lt; \"Move A\\n\"; }\n};\n\nA getA_unnamed()\n{\n  return A();\n}\n\nint main()\n{\n  auto a = getA_unnamed();\n}\n</code></pre><p>å¦‚æœä½ è®¤ä¸ºæ‰§è¡Œç»“æœé‡Œåº”å½“æœ‰ä¸€è¡Œâ€œCopy Aâ€æˆ–â€œMove Aâ€çš„è¯ï¼Œä½ å°±å¿½è§†äº†è¿”å›å€¼ä¼˜åŒ–çš„å¨åŠ›äº†ã€‚å³ä½¿å®Œå…¨å…³é—­ä¼˜åŒ–ï¼Œä¸‰ç§ä¸»æµç¼–è¯‘å™¨ï¼ˆGCCã€Clang å’Œ MSVCï¼‰éƒ½åªè¾“å‡ºä¸¤è¡Œï¼š</p><blockquote>\n<p><code>Create A</code><br>\n<code>Destroy A</code></p>\n</blockquote><p>æˆ‘ä»¬æŠŠä»£ç ç¨ç¨æ”¹ä¸€ä¸‹ï¼š</p><pre><code class=\"language-c++\">A getA_named()\n{\n  A a;\n  return a;\n}\n\nint main()\n{\n  auto a = getA_named();\n}\n</code></pre><p>è¿™å›ç»“æœæœ‰äº†ä¸€ç‚¹ç‚¹å°å˜åŒ–ã€‚è™½ç„¶ GCC å’Œ Clang çš„ç»“æœå®Œå…¨ä¸å˜ï¼Œä½† MSVC åœ¨éä¼˜åŒ–ç¼–è¯‘çš„æƒ…å†µä¸‹äº§ç”Ÿäº†ä¸åŒçš„è¾“å‡ºï¼ˆä¼˜åŒ–ç¼–è¯‘â€”â€”ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•° <code>/O1</code>ã€<code>/O2</code> æˆ– <code>/Ox</code>â€”â€”åˆ™ä¸å˜ï¼‰ï¼š</p><blockquote>\n<p><code>Create A</code><br>\n<code>Move A</code><br>\n<code>Destroy A</code><br>\n<code>Destroy A</code></p>\n</blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿”å›å†…å®¹è¢«ç§»åŠ¨æ„é€ äº†ã€‚</p><p>æˆ‘ä»¬ç»§ç»­å˜å½¢ä¸€ä¸‹ï¼š</p><pre><code class=\"language-c++\">#include &lt;stdlib.h&gt;\n\nA getA_duang()\n{\n  A a1;\n  A a2;\n  if (rand() &gt; 42) {\n    return a1;\n  } else {\n    return a2;\n  }\n}\n\nint main()\n{\n  auto a = getA_duang();\n}\n</code></pre><p>è¿™å›æ‰€æœ‰çš„ç¼–è¯‘å™¨éƒ½è¢«éš¾å€’äº†ï¼Œè¾“å‡ºæ˜¯ï¼š</p><blockquote>\n<p><code>Create A</code><br>\n<code>Create A</code><br>\n<code>Move A</code><br>\n<code>Destroy A</code><br>\n<code>Destroy A</code><br>\n<code>Destroy A</code></p>\n</blockquote><p>å…³äºè¿”å›å€¼ä¼˜åŒ–çš„å®éªŒæˆ‘ä»¬å°±åšåˆ°è¿™é‡Œã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¯•éªŒä¸€ä¸‹æŠŠç§»åŠ¨æ„é€ å‡½æ•°åˆ é™¤ï¼š</p><pre><code class=\"language-c++\">  // A(A&amp;&amp;) { cout &lt;&lt; \"Move A\\n\"; }\n</code></pre><p>æˆ‘ä»¬å¯ä»¥ç«‹å³çœ‹åˆ°â€œCopy Aâ€å‡ºç°åœ¨äº†ç»“æœè¾“å‡ºä¸­ï¼Œè¯´æ˜ç›®å‰ç»“æœå˜æˆæ‹·è´æ„é€ äº†ã€‚</p><p>å¦‚æœå†è¿›ä¸€æ­¥ï¼ŒæŠŠæ‹·è´æ„é€ å‡½æ•°ä¹Ÿåˆ é™¤å‘¢ï¼ˆæ³¨ï¼šæ­¤æ—¶æ˜¯æ ‡æˆ <code>= delete</code>ï¼Œè€Œä¸æ˜¯ç®€å•æ³¨é‡Šæ‰â€”â€”å¦åˆ™ï¼Œå°±å¦‚æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/176916\">[ç¬¬ 9 è®²]</a> è®¨è®ºè¿‡çš„ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤æä¾›æ‹·è´æ„é€ å’Œç§»åŠ¨æ„é€ å‡½æ•°ï¼‰ï¼Ÿæ˜¯ä¸æ˜¯ä¸Šé¢çš„ <code>getA_unnamed</code>ã€<code>getA_named</code> å’Œ <code>getA_duang</code> éƒ½ä¸èƒ½å·¥ä½œäº†ï¼Ÿ</p><p>åœ¨ C++14 åŠä¹‹å‰ç¡®å®æ˜¯è¿™æ ·çš„ã€‚ä½†ä» C++17 å¼€å§‹ï¼Œå¯¹äºç±»ä¼¼äº <code>getA_unnamed</code> è¿™æ ·çš„æƒ…å†µï¼Œå³ä½¿å¯¹è±¡ä¸å¯æ‹·è´ã€ä¸å¯ç§»åŠ¨ï¼Œè¿™ä¸ªå¯¹è±¡ä»ç„¶æ˜¯å¯ä»¥è¢«è¿”å›çš„ï¼C++17 è¦æ±‚å¯¹äºè¿™ç§æƒ…å†µï¼Œå¯¹è±¡å¿…é¡»è¢«ç›´æ¥æ„é€ åœ¨ç›®æ ‡ä½ç½®ä¸Šï¼Œä¸ç»è¿‡ä»»ä½•æ‹·è´æˆ–ç§»åŠ¨çš„æ­¥éª¤ <span class=\"orange\">[3]</span>ã€‚</p><h2>å›åˆ° F.20</h2><p>ç†è§£äº† C++ é‡Œçš„å¯¹è¿”å›å€¼çš„å¤„ç†å’Œè¿”å›å€¼ä¼˜åŒ–ä¹‹åï¼Œæˆ‘ä»¬å†å›è¿‡å¤´çœ‹ä¸€ä¸‹ F.20 é‡Œé™ˆè¿°çš„ç†ç”±çš„è¯ï¼Œåº”è¯¥å°±æ˜¾å¾—å¾ˆè‡ªç„¶äº†ï¼š</p><blockquote>\n<p>A return value is self-documenting, whereas a <code>&amp;</code> could be either in-out or out-only and is liable to be misused.</p>\n<p>è¿”å›å€¼æ˜¯å¯ä»¥è‡ªæˆ‘æè¿°çš„ï¼›è€Œ <code>&amp;</code> å‚æ•°æ—¢å¯èƒ½æ˜¯è¾“å…¥è¾“å‡ºï¼Œä¹Ÿå¯èƒ½æ˜¯ä»…è¾“å‡ºï¼Œä¸”å¾ˆå®¹æ˜“è¢«è¯¯ç”¨ã€‚</p>\n</blockquote><p>æˆ‘æƒ³æˆ‘å¯¹è¿”å›å¯¹è±¡çš„å¯è¯»æ€§ï¼Œå·²ç»ç»™å‡ºäº†å……è¶³çš„ä¾‹å­ã€‚å¯¹äºå…¶æ˜¯å¦æœ‰æ€§èƒ½å½±å“è¿™ä¸€é—®é¢˜ï¼Œä¹Ÿç»™å‡ºäº†å……åˆ†çš„è¯´æ˜ã€‚</p><p>æˆ‘ä»¬æœ€åçœ‹ä¸€ä¸‹ F.20 é‡Œæè¿°çš„ä¾‹å¤–æƒ…å†µï¼š</p><ul>\n<li>â€œå¯¹äºéå€¼ç±»å‹ï¼Œæ¯”å¦‚è¿”å›å€¼å¯èƒ½æ˜¯å­å¯¹è±¡çš„æƒ…å†µï¼Œä½¿ç”¨ <code>unique_ptr</code> æˆ– <code>shared_ptr</code> æ¥è¿”å›å¯¹è±¡ã€‚â€ä¹Ÿå°±æ˜¯é¢å‘å¯¹è±¡ã€å·¥å‚æ–¹æ³•è¿™æ ·çš„æƒ…å†µï¼Œåƒ<a href=\"https://time.geekbang.org/column/article/169225\">[ç¬¬ 1 è®²]</a> é‡Œç»™å‡ºçš„ <code>create_shape</code> åº”è¯¥è¿™æ ·æ”¹é€ ã€‚</li>\n<li>â€œå¯¹äºç§»åŠ¨ä»£ä»·å¾ˆé«˜çš„å¯¹è±¡ï¼Œè€ƒè™‘å°†å…¶åˆ†é…åœ¨å †ä¸Šï¼Œç„¶åè¿”å›ä¸€ä¸ªå¥æŸ„ï¼ˆå¦‚ <code>unique_ptr</code>ï¼‰ï¼Œæˆ–ä¼ é€’ä¸€ä¸ªé const çš„ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨æ¥å¡«å……ï¼ˆç”¨ä½œè¾“å‡ºå‚æ•°ï¼‰ã€‚â€ä¹Ÿå°±æ˜¯è¯´ä¸æ–¹ä¾¿ç§»åŠ¨çš„ï¼Œé‚£å°±åªèƒ½ä½¿ç”¨ä¸€ä¸ª RAII å¯¹è±¡æ¥ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œæˆ–è€…è€åŠæ³•è¾“å‡ºå‚æ•°äº†ã€‚</li>\n<li>â€œè¦åœ¨ä¸€ä¸ªå†…å±‚å¾ªç¯é‡Œåœ¨å¤šæ¬¡å‡½æ•°è°ƒç”¨ä¸­é‡ç”¨ä¸€ä¸ªè‡ªå¸¦å®¹é‡çš„å¯¹è±¡ï¼šå°†å…¶å½“ä½œè¾“å…¥/è¾“å‡ºå‚æ•°å¹¶å°†å…¶æŒ‰å¼•ç”¨ä¼ é€’ã€‚â€è¿™ä¹Ÿæ˜¯ä¸ªéœ€è¦ç»§ç»­ä½¿ç”¨è€åŠæ³•çš„æƒ…å†µã€‚</li>\n</ul><h2>å†…å®¹å°ç»“</h2><p>C++ é‡Œå·²ç»å¯¹è¿”å›å¯¹è±¡åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼Œç›®å‰åœ¨å‡½æ•°é‡Œç›´æ¥è¿”å›å¯¹è±¡å¯ä»¥å¾—åˆ°æ›´å¯è¯»ã€å¯ç»„åˆçš„ä»£ç ï¼ŒåŒæ—¶åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç§»åŠ¨å’Œè¿”å›å€¼ä¼˜åŒ–æ¶ˆé™¤æ€§èƒ½é—®é¢˜ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>è¯·ä½ è€ƒè™‘ä¸€ä¸‹ï¼š</p><ol>\n<li>ä½ çš„é¡¹ç›®ä½¿ç”¨äº†è¿”å›å¯¹è±¡äº†å—ï¼Ÿå¦‚æœæ²¡æœ‰çš„è¯ï¼Œæœ¬è®²å†…å®¹æœ‰æ²¡æœ‰è¯´æœä½ ï¼Ÿ</li>\n<li>è¿™è®²é‡Œæˆ‘ä»¬æ²¡æœ‰æ·±å…¥è®¨è®ºèµ‹å€¼ï¼›è¯·ä½ æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœä¾‹å­é‡Œæ”¹æˆèµ‹å€¼ï¼Œä¼šæœ‰ä»€ä¹ˆæ ·çš„å˜åŒ–ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘äº¤æµä½ çš„æƒ³æ³•ã€‚</p><h2><span class=\"reference\">å‚è€ƒèµ„æ–™</span></h2><p><span class=\"reference\">[1] Bjarne Stroustrup and Herb Sutter (editors), â€œC++ core guidelinesâ€, item F.20. <a href=\"https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rf-out\">https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rf-out</a> (éå®˜æ–¹ä¸­æ–‡ç‰ˆå¯å‚è§ <a href=\"https://github.com/lynnboy/CppCoreGuidelines-zh-CN\">https://github.com/lynnboy/CppCoreGuidelines-zh-CN</a>) </span></p><p><span class=\"reference\">[2] Conrad Sanderson and Ryan Curtin, Armadillo. <a href=\"http://arma.sourceforge.net/\">http://arma.sourceforge.net/</a> </span></p><p><span class=\"reference\">[3] cppreference.com, â€œCopy elisionâ€. <a href=\"https://en.cppreference.com/w/cpp/language/copy_elision\">https://en.cppreference.com/w/cpp/language/copy_elision</a> </span></p><p><span class=\"reference\">[3a] cppreference.com, â€œå¤åˆ¶æ¶ˆé™¤â€. <a href=\"https://zh.cppreference.com/w/cpp/language/copy_elision\">https://zh.cppreference.com/w/cpp/language/copy_elision</a> </span></p>","comments":[{"had_liked":false,"id":163026,"user_name":"å°ä¸€æ—¥ä¸€","can_delete":false,"product_type":"c1","uid":1301097,"ip_address":"","ucode":"0A506C2B918C14","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","comment_is_top":false,"comment_ctime":1576642142,"is_pvip":false,"replies":[{"id":61923,"content":"ç®€å•æ¥è¯´ï¼Œåœ¨å¯¹æœ¬åœ°å˜é‡è¿›è¡Œè¿”å›æ—¶ï¼Œä¸ç”¨ std::moveã€‚å®é™…ä¸Šï¼Œæˆ‘åœ¨ç¬¬ 3 è®²å°±å†™äº†ï¼š\n\nâ€œæœ‰ä¸€ç§å¸¸è§çš„ C++ ç¼–ç¨‹é”™è¯¯ï¼Œæ˜¯åœ¨å‡½æ•°é‡Œè¿”å›ä¸€ä¸ªæœ¬åœ°å¯¹è±¡çš„å¼•ç”¨ã€‚ç”±äºåœ¨å‡½æ•°ç»“æŸæ—¶æœ¬åœ°å¯¹è±¡å³è¢«é”€æ¯ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘æœ¬åœ°å¯¹è±¡çš„å¼•ç”¨å±äºæœªå®šä¹‰è¡Œä¸ºã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œç¨‹åºå‡ºä»»ä½•å¥‡æ€ªçš„è¡Œä¸ºéƒ½æ˜¯æ­£å¸¸çš„ã€‚\n\nâ€œåœ¨ C++11 ä¹‹å‰ï¼Œè¿”å›ä¸€ä¸ªæœ¬åœ°å¯¹è±¡æ„å‘³ç€è¿™ä¸ªå¯¹è±¡ä¼šè¢«æ‹·è´ï¼Œé™¤éç¼–è¯‘å™¨å‘ç°å¯ä»¥åšè¿”å›å€¼ä¼˜åŒ–ï¼ˆnamed return value optimizationï¼Œæˆ– NRVOï¼‰ï¼Œèƒ½æŠŠå¯¹è±¡ç›´æ¥æ„é€ åˆ°è°ƒç”¨è€…çš„æ ˆä¸Šã€‚ä» C++11 å¼€å§‹ï¼Œè¿”å›å€¼ä¼˜åŒ–ä»å¯ä»¥å‘ç”Ÿï¼Œä½†åœ¨æ²¡æœ‰è¿”å›å€¼ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†è¯•å›¾æŠŠæœ¬åœ°å¯¹è±¡ç§»åŠ¨å‡ºå»ï¼Œè€Œä¸æ˜¯æ‹·è´å‡ºå»ã€‚è¿™ä¸€è¡Œä¸ºä¸éœ€è¦ç¨‹åºå‘˜æ‰‹å·¥ç”¨ `std::move` è¿›è¡Œå¹²é¢„â€”â€”ä½¿ç”¨`std::move` å¯¹äºç§»åŠ¨è¡Œä¸ºæ²¡æœ‰å¸®åŠ©ï¼Œåè€Œä¼šå½±å“è¿”å›å€¼ä¼˜åŒ–ã€‚â€","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576646399,"ip_address":"","comment_id":163026,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘è®¤ä¸ºè€å¸ˆåº”è¯¥è®²ä¸€ä¸‹NRVO&#47;RVOä¸std::move()çš„åŒºåˆ«ï¼Œè¿™ä¸ªé—®é¢˜æ›¾ç»å›°æ‰°è¿‡æˆ‘ï¼Œä»stackoverflowçš„é—®é¢˜æ¥çœ‹ï¼Œå­¦ä¹ c++11æ—¶å¤§å¤šæ•°äººéƒ½æ€è€ƒè¿‡è¿™ä¸ªé—®é¢˜ï¼šhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;4986673&#47;c11-rvalues-and-move-semantics-confusion-return-statement","like_count":50},{"had_liked":false,"id":167342,"user_name":"å°ç™½å…”çº¸ç™½åˆç™½","can_delete":false,"product_type":"c1","uid":1145139,"ip_address":"","ucode":"1F415287933976","user_header":"https://static001.geekbang.org/account/avatar/00/11/79/33/e4af2cdb.jpg","comment_is_top":false,"comment_ctime":1577771983,"is_pvip":false,"replies":[{"id":64996,"content":"å¥½é—®é¢˜ã€‚åˆ©ç”¨ç¬¬ 14 è®²çš„ SFINAE æŠ€å·§ï¼Œæ˜¯å¯ä»¥å†™å‡ºæ¥çš„ã€‚æ¯”å¦‚ï¼Œä½ å¸Œæœ›æ£€æµ‹æ˜¯ä¸æ˜¯æœ‰ä¸‹é¢ç¬¬ä¸€ä¸ªé‡è½½ï¼š\n\nclass Obj {\npublic:\n    void foo() &amp;&amp;;\n    void foo() const &amp;;\n};\n\nå¯ä»¥å®šä¹‰ä¸‹é¢è¿™æ ·çš„ type traitï¼š\n\ntemplate &lt;typename T, typename = void_t&lt;&gt;&gt;\nstruct has_rvalue_ref_foo : false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_rvalue_ref_foo&lt;\n    T, void_t&lt;decltype(static_cast&lt;void (T::*)() &amp;&amp;&gt;(&amp;T::foo))&gt;&gt;\n    : true_type {};\n\nä¸Šé¢ç¬¬ä¸€ä¸ª foo çš„é‡è½½åœ¨çš„è¯ï¼Œä½¿ç”¨ has_rvalue_ref_foo&lt;Obj&gt;::value å°±èƒ½å¾—åˆ°ç¼–è¯‘æœŸå¸¸é‡ trueã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577804920,"ip_address":"","comment_id":167342,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®æœ‰ä½•æ–¹æ³•å¯ä»¥æµ‹è¯•ç¼–è¯‘å™¨æ˜¯å¦ä¸ºä¸€ä¸ªç±»æä¾›äº†å³å€¼å¼•ç”¨çš„ç‰ˆæœ¬çš„æˆå‘˜å‡½æ•°","like_count":13,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479832,"discussion_content":"å¥½é—®é¢˜ã€‚åˆ©ç”¨ç¬¬ 14 è®²çš„ SFINAE æŠ€å·§ï¼Œæ˜¯å¯ä»¥å†™å‡ºæ¥çš„ã€‚æ¯”å¦‚ï¼Œä½ å¸Œæœ›æ£€æµ‹æ˜¯ä¸æ˜¯æœ‰ä¸‹é¢ç¬¬ä¸€ä¸ªé‡è½½ï¼š\n\nclass Obj {\npublic:\n    void foo() &amp;amp;&amp;amp;;\n    void foo() const &amp;amp;;\n};\n\nå¯ä»¥å®šä¹‰ä¸‹é¢è¿™æ ·çš„ type traitï¼š\n\ntemplate &amp;lt;typename T, typename = void_t&amp;lt;&amp;gt;&amp;gt;\nstruct has_rvalue_ref_foo : false_type {};\n\ntemplate &amp;lt;typename T&amp;gt;\nstruct has_rvalue_ref_foo&amp;lt;\n    T, void_t&amp;lt;decltype(static_cast&amp;lt;void (T::*)() &amp;amp;&amp;amp;&amp;gt;(&amp;amp;T::foo))&amp;gt;&amp;gt;\n    : true_type {};\n\nä¸Šé¢ç¬¬ä¸€ä¸ª foo çš„é‡è½½åœ¨çš„è¯ï¼Œä½¿ç”¨ has_rvalue_ref_foo&amp;lt;Obj&amp;gt;::value å°±èƒ½å¾—åˆ°ç¼–è¯‘æœŸå¸¸é‡ trueã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577804920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3542569,"avatar":"https://static001.geekbang.org/account/avatar/00/36/0e/29/fa3601d3.jpg","nickname":"ğŸ¶çš„å·´æ™®æ´›å¤«","note":"","ucode":"1213DD5A056674","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607722,"discussion_content":"çœ‹äº†è€å¸ˆçš„å›ç­”æˆ‘æ‚Ÿäº†ï¼Œæˆ‘æ‚Ÿäº†æˆ‘è¯¥è½¬è¡Œäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1678106169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308761,"user_name":"æ€ªå…½","can_delete":false,"product_type":"c1","uid":1324007,"ip_address":"","ucode":"3342C55CB83B08","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/e7/145be2f9.jpg","comment_is_top":false,"comment_ctime":1629788485,"is_pvip":false,"replies":[{"id":111778,"content":"å› ä¸º (rand() &gt; 42 ? a1 : a2) çš„ç»“æœæ˜¯ä¸€ä¸ª A çš„å·¦å€¼å¼•ç”¨ï¼Œreturn è¯­å¥è¿”å›çš„æ˜¯å·¦å€¼å¼•ç”¨ï¼Œä¸æ˜¯å˜é‡ï¼Œæ‰€ä»¥å°±ä¸è¡Œäº†ã€‚è¦ç§»åŠ¨éœ€è¦è‡ªå·±åŠ ä¸Š std::moveã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1629811052,"ip_address":"","comment_id":308761,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œæ±‚åŠ©ï¼Œæˆ‘æŠŠgetA_duangå‡½æ•°ä¿®æ”¹ä¸ºï¼š\nA getA_duang()\n{\n\tA a1;\n\tA a2;\n\treturn (rand() &gt; 42 ? a1 : a2);\n}\nå¾—åˆ°çš„ç»“æœæ˜¯:\nCreate A\nCreate A\nCopy A\nDestroy A\nDestroy A\nDestroy A\nè¯·é—®ä¸ºä»€ä¹ˆç”¨æ¡ä»¶è¡¨è¾¾å¼ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ Copy Aï¼Œè€Œç”¨ä½ èŒƒä¾‹ä¸­çš„ if è¯­å¥åˆ¤æ–­å°±èƒ½å¾—åˆ° Move Aå‘¢ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479832,"discussion_content":"å¥½é—®é¢˜ã€‚åˆ©ç”¨ç¬¬ 14 è®²çš„ SFINAE æŠ€å·§ï¼Œæ˜¯å¯ä»¥å†™å‡ºæ¥çš„ã€‚æ¯”å¦‚ï¼Œä½ å¸Œæœ›æ£€æµ‹æ˜¯ä¸æ˜¯æœ‰ä¸‹é¢ç¬¬ä¸€ä¸ªé‡è½½ï¼š\n\nclass Obj {\npublic:\n    void foo() &amp;amp;&amp;amp;;\n    void foo() const &amp;amp;;\n};\n\nå¯ä»¥å®šä¹‰ä¸‹é¢è¿™æ ·çš„ type traitï¼š\n\ntemplate &amp;lt;typename T, typename = void_t&amp;lt;&amp;gt;&amp;gt;\nstruct has_rvalue_ref_foo : false_type {};\n\ntemplate &amp;lt;typename T&amp;gt;\nstruct has_rvalue_ref_foo&amp;lt;\n    T, void_t&amp;lt;decltype(static_cast&amp;lt;void (T::*)() &amp;amp;&amp;amp;&amp;gt;(&amp;amp;T::foo))&amp;gt;&amp;gt;\n    : true_type {};\n\nä¸Šé¢ç¬¬ä¸€ä¸ª foo çš„é‡è½½åœ¨çš„è¯ï¼Œä½¿ç”¨ has_rvalue_ref_foo&amp;lt;Obj&amp;gt;::value å°±èƒ½å¾—åˆ°ç¼–è¯‘æœŸå¸¸é‡ trueã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577804920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3542569,"avatar":"https://static001.geekbang.org/account/avatar/00/36/0e/29/fa3601d3.jpg","nickname":"ğŸ¶çš„å·´æ™®æ´›å¤«","note":"","ucode":"1213DD5A056674","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":607722,"discussion_content":"çœ‹äº†è€å¸ˆçš„å›ç­”æˆ‘æ‚Ÿäº†ï¼Œæˆ‘æ‚Ÿäº†æˆ‘è¯¥è½¬è¡Œäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1678106169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181696,"user_name":"Milittle","can_delete":false,"product_type":"c1","uid":1045455,"ip_address":"","ucode":"80E566639A8ABB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f3/cf/851dab01.jpg","comment_is_top":false,"comment_ctime":1582619489,"is_pvip":false,"replies":[{"id":70395,"content":"å¯¹ï¼Œå¥½ç”¨éå¸¸é‡è¦ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1582630283,"ip_address":"","comment_id":181696,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"Armadilloè¿™ä¸ªåº“æˆ‘ç”¨è¿‡ï¼ŒæŒºå¥½ç”¨ã€‚è¯­æ³•å¯ä»¥å’ŒMatlabäº’è½¬ï¼Œå¦‚æœæœ‰ç”¨Matlabçš„å°ä¼™ä¼´ å¯ä»¥æ¨èä½¿ç”¨ æ€§èƒ½æ æ çš„","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525615,"discussion_content":"å› ä¸º (rand() &amp;gt; 42 ? a1 : a2) çš„ç»“æœæ˜¯ä¸€ä¸ª A çš„å·¦å€¼å¼•ç”¨ï¼Œreturn è¯­å¥è¿”å›çš„æ˜¯å·¦å€¼å¼•ç”¨ï¼Œä¸æ˜¯å˜é‡ï¼Œæ‰€ä»¥å°±ä¸è¡Œäº†ã€‚è¦ç§»åŠ¨éœ€è¦è‡ªå·±åŠ ä¸Š std::moveã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1629811052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168749,"user_name":"ç©ºæ°”","can_delete":false,"product_type":"c1","uid":1307602,"ip_address":"","ucode":"45F9574A02343D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep73FalJJ7FPUJAcK2Ket1Qia1HOHhmaEcd8zdr4O6LHHk5NwzyUTnBAOzgmMtR3H0gSgYcbH6N5Vg/132","comment_is_top":false,"comment_ctime":1578149803,"is_pvip":false,"replies":[{"id":65501,"content":"å¦‚æœéƒ½æ˜¯è¿”å›è€Œéä¿®æ”¹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ pairã€tupleã€tie å’Œç¬¬ 8 è®²è®¨è®ºçš„ç»“æ„åŒ–ç»‘å®šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578223367,"ip_address":"","comment_id":168749,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘åœ¨å·¥ä½œä¸­ä½¿ç”¨å¼•ç”¨å‡ºå‚çš„åœºæ™¯ä¹‹ä¸€æ˜¯åŒæ—¶è¿”å›å¤šä¸ªå¯¹è±¡ï¼Œå¦‚æœä½¿ç”¨è¿”å›å€¼å°±è¦å°è£…å¾ˆå¤šä¸åŒç»“æ„ä½“ã€‚è¯·é—®è€å¸ˆè¿™ç§åœºæ™¯å»ºè®®æ€ä¹ˆå®ç°ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485084,"discussion_content":"å¯¹ï¼Œå¥½ç”¨éå¸¸é‡è¦ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582630283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319814,"user_name":"é˜¿ç™½","can_delete":false,"product_type":"c1","uid":2736474,"ip_address":"","ucode":"811D111BEC0298","user_header":"https://static001.geekbang.org/account/avatar/00/29/c1/5a/4d4e6200.jpg","comment_is_top":false,"comment_ctime":1635950425,"is_pvip":false,"replies":[{"id":116021,"content":"å‡½æ•°è¿”å›ä¸€ä¸ªæœ¬åœ°å˜é‡æ˜¯æœ‰ç‰¹æ®Šè§„åˆ™çš„ã€‚è¯·åœ¨ cppreference ä¸ŠæŸ¥é˜… return å’Œ copy elision çš„æ–‡æ¡£ã€‚\n\nå¯ä»¥ç±»æ¯”ä¸€ä¸‹ decltypeï¼ˆè§„åˆ™è¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼‰æ¥è·å¾—ä¸€äº›ç›´è§‚çš„æ„Ÿå—ã€‚å¦‚æœä½ æœ‰ int a; å’Œ int b; ä¸¤ä¸ªå˜é‡ï¼Œdecltype(a) ä¼šå¾—åˆ° intï¼Œdecltype(a &gt; b ? a : b) åˆ™å¾—åˆ° int&amp;ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1636074146,"ip_address":"","comment_id":319814,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆçœ‹åˆ°ä½ å’Œåˆ«çš„åŒå­¦è®¨è®ºçš„é—®é¢˜ï¼Œreturn :?ä¸­:?è¡¨è¾¾å¼è¿”å›çš„æ˜¯å·¦å€¼å¼•ç”¨ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ å‡½æ•°ã€‚ä½†æ˜¯return a1,a1æ˜¯ä¸ªæ ‡è¯†è¡¨è¾¾å¼æ˜¯ä¸ªå·¦å€¼ä¸ºä»€ä¹ˆå°±æ˜¯è°ƒç”¨ç§»åŠ¨æ„é€ ã€‚æˆ‘ä¸æ˜ç™½åœ¨å‡½æ•°å£°æ˜è¿”å›å€¼ä¸ºå€¼ç±»å‹ï¼Œä½†æ˜¯:?è¿”å›ä¸€ä¸ªå·¦å€¼å¼•ç”¨çš„æ—¶å€™ä¸ºä»€ä¹ˆè°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ ï¼Ÿ\n\nA getA_duang()\n{\nA a1;\nA a2;\nreturn (rand() &gt; 42 ? a1 : a2);\n}\nCreate A\nCreate A\nCopy A\nDestroy A\nDestroy A\nDestroy A\nauto a = getA_duang();","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480319,"discussion_content":"å¦‚æœéƒ½æ˜¯è¿”å›è€Œéä¿®æ”¹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ pairã€tupleã€tie å’Œç¬¬ 8 è®²è®¨è®ºçš„ç»“æ„åŒ–ç»‘å®šã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578223367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163031,"user_name":"æœ¨ç“œ777","can_delete":false,"product_type":"c1","uid":1512537,"ip_address":"","ucode":"FC52A499AF6374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","comment_is_top":false,"comment_ctime":1576643454,"is_pvip":false,"replies":[{"id":61926,"content":"ç”¨é»˜è®¤æ„é€ å‡½æ•°ä»£è¡¨ç©ºï¼Œæˆ–è€…ç”¨ optional&lt;å¯¹è±¡&gt; ï¼ˆä¸æ„é€ ï¼‰ä»£è¡¨ç©ºï¼Œæˆ–è€…æŠ›å¼‚å¸¸ä»£è¡¨ä¸æ­£å¸¸ï¼ˆè§†æ˜¯å¦ä¸æ­£å¸¸è€Œå®šï¼‰ã€‚\n\noptional ä¼šåœ¨ç¬¬ 22 è®²é‡Œè®¨è®ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576647227,"ip_address":"","comment_id":163031,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"é¡¹ç›®ä¸­ä¸€ç›´ä½¿ç”¨æ‚¨è¯´çš„è€æ–¹æ³•ï¼Œç›®å‰çœ‹ç¼–è¯‘å™¨æœ‰ä¼˜åŒ–çš„è¯ï¼Œåé¢ä¼šé€æ­¥è€ƒè™‘é‡‡ç”¨è¿”å›å¯¹è±¡çš„æ–¹æ³•ï¼ æœ‰ä¸ªé—®é¢˜é—®ä¸‹ï¼Œå¦‚æœè¦è¿”å›ç©ºå¯¹è±¡ï¼Œè¯¥å¦‚ä½•åšï¼Ÿ æ˜¯ç›´æ¥é‡‡ç”¨ç©ºçš„æ„é€ å‡½æ•°ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529780,"discussion_content":"å‡½æ•°è¿”å›ä¸€ä¸ªæœ¬åœ°å˜é‡æ˜¯æœ‰ç‰¹æ®Šè§„åˆ™çš„ã€‚è¯·åœ¨ cppreference ä¸ŠæŸ¥é˜… return å’Œ copy elision çš„æ–‡æ¡£ã€‚\n\nå¯ä»¥ç±»æ¯”ä¸€ä¸‹ decltypeï¼ˆè§„åˆ™è¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼‰æ¥è·å¾—ä¸€äº›ç›´è§‚çš„æ„Ÿå—ã€‚å¦‚æœä½ æœ‰ int a; å’Œ int b; ä¸¤ä¸ªå˜é‡ï¼Œdecltype(a) ä¼šå¾—åˆ° intï¼Œdecltype(a &amp;gt; b ? a : b) åˆ™å¾—åˆ° int&amp;amp;ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636074146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162868,"user_name":"æ³°ä¼¦å¢","can_delete":false,"product_type":"c1","uid":1141994,"ip_address":"","ucode":"FEA6B43C8D4FF9","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/ea/e03fec22.jpg","comment_is_top":false,"comment_ctime":1576626755,"is_pvip":false,"replies":[{"id":61896,"content":"çœ‹è¿™ä¸ªé¡µé¢å§ï¼š\n\nhttps:&#47;&#47;en.cppreference.com&#47;w&#47;cpp&#47;compiler_support\n\nç›®å‰ GCC é¢†å…ˆä¸€äº›ï¼ˆå¯ä»¥ç”¨ -std=c++2a å¯ç”¨ 20 çš„åŠŸèƒ½ï¼‰ï¼Œä½†è¿˜æ²¡æœ‰å“ªå®¶å®Œæ•´æ”¯æŒ C++20ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576633076,"ip_address":"","comment_id":162868,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®è€å¸ˆè¿™ä¸ªC++20ä»€ä¹ˆæ—¶å€™å‘å¸ƒç¼–è¯‘å™¨ä¹‹ç±»çš„å•Šï¼Ÿè¿˜æ˜¯è¯´å·²ç»æœ‰äº†ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478221,"discussion_content":"ç”¨é»˜è®¤æ„é€ å‡½æ•°ä»£è¡¨ç©ºï¼Œæˆ–è€…ç”¨ optional&amp;lt;å¯¹è±¡&amp;gt; ï¼ˆä¸æ„é€ ï¼‰ä»£è¡¨ç©ºï¼Œæˆ–è€…æŠ›å¼‚å¸¸ä»£è¡¨ä¸æ­£å¸¸ï¼ˆè§†æ˜¯å¦ä¸æ­£å¸¸è€Œå®šï¼‰ã€‚\n\noptional ä¼šåœ¨ç¬¬ 22 è®²é‡Œè®¨è®ºã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576647227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293358,"user_name":"æ€ªå…½","can_delete":false,"product_type":"c1","uid":1324007,"ip_address":"","ucode":"3342C55CB83B08","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/e7/145be2f9.jpg","comment_is_top":false,"comment_ctime":1621349564,"is_pvip":false,"replies":[{"id":106336,"content":"1. å¯ä»¥å‚è€ƒcppreference.com ç½‘ç«™ï¼Œæˆ–è€…ç¬¬ 9 è®²ï¼Œé‡Œé¢æåˆ°ï¼Œâ€œç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°â€ã€‚â€œ= defaultâ€å’Œâ€œ= deleteâ€è¿™ç§ä¹Ÿç®—å£°æ˜ã€‚\n\n2. ç§»åŠ¨çš„ä»£ä»·æ˜¯çœ‹å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¾‹å­é‡Œçš„çš„ A(A&amp;&amp;)ã€‚åƒæˆ‘ä»¬çš„ç©å…·ä¾‹å­ï¼Œç§»åŠ¨å’Œæ‹·è´æ€§èƒ½å°±æ²¡å•¥åŒºåˆ«ã€‚è¯´ç§»åŠ¨ä»£ä»·é«˜ï¼Œä¹Ÿä¸æ˜¯æŒ‡æ¯”æ‹·è´é«˜ï¼Œè€Œæ˜¯æŒ‡æ‹·è´ä»£ä»·é«˜ä¸”æ²¡æœ‰å¯¹ç§»åŠ¨åšä¼˜åŒ–ï¼ˆå¦‚æ²¡æœ‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼‰ï¼Œæˆ–å¯¹è±¡å¤ªå¤§ï¼Œæ²¡æ³•åšç§»åŠ¨ä¼˜åŒ–ï¼ˆå¦‚ sizeof è¾¾åˆ°æ•°ç™¾ä¸ªå­—èŠ‚ä»¥ä¸Šï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1621470268,"ip_address":"","comment_id":293358,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¯·æ•™2ä¸ªç–‘æƒ‘ï¼š\n1. åœ¨è¿”å›å€¼ä¼˜åŒ–ï¼ˆæ‹·è´æ¶ˆé™¤ï¼‰å°èŠ‚é‡Œï¼ŒA(const A&amp;) = delete;äº†ï¼Œä½†A(A&amp;&amp;)åªæ˜¯æ³¨é‡Šæ‰ï¼Œä¸æ˜¯è¯´ç¼–è¯‘å™¨ä¼šæä¾›é»˜è®¤çš„ç§»åŠ¨æ„é€ å‡½æ•°å—ï¼Ÿä¸ºä»€ä¹ˆgetA_namedä¹Ÿä¸è¡Œäº†ï¼Ÿä¸æ˜¯ä¼˜å…ˆåŒ¹é…ç§»åŠ¨æ„é€ å—ï¼Ÿ\nA getA_named()\n{\n\tA a;\n\treturn a;\n}\n2. å“ªç§æƒ…å†µä¸‹ç§»åŠ¨çš„ä»£ä»·é«˜ï¼Ÿæˆ‘ç†è§£ç§»åŠ¨çš„ä»£ä»·éƒ½å¾ˆä½ï¼Œè‡³å°‘æ¯”æ‹·è´ä½å§ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478168,"discussion_content":"çœ‹è¿™ä¸ªé¡µé¢å§ï¼š\n\nhttps://en.cppreference.com/w/cpp/compiler_support\n\nç›®å‰ GCC é¢†å…ˆä¸€äº›ï¼ˆå¯ä»¥ç”¨ -std=c++2a å¯ç”¨ 20 çš„åŠŸèƒ½ï¼‰ï¼Œä½†è¿˜æ²¡æœ‰å“ªå®¶å®Œæ•´æ”¯æŒ C++20ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576633076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":86917,"discussion_content":"c++20çš„æ ‡å‡†è¿˜æ²¡æœ‰ç¡®å®šå‘¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576632476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87141,"discussion_content":"åŸºæœ¬ç¡®å®šäº†ã€‚ä¸ƒæœˆæ—¶å·²ç»ç¡®å®šäº†å“ªäº›åŠŸèƒ½ä¼šè¿› C++20ï¼Œå“ªäº›è¿›ä¸äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576646750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":86917,"ip_address":"","group_id":0},"score":87141,"extra":""}]}]},{"had_liked":false,"id":164333,"user_name":"èŠ±æ™¨å°‘å¹´","can_delete":false,"product_type":"c1","uid":1098987,"ip_address":"","ucode":"6AA3537A6BA10E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","comment_is_top":false,"comment_ctime":1576939070,"is_pvip":false,"replies":[{"id":62449,"content":"C++ç¼–è¯‘å™¨å“ªä¼šåšè¿™ä¹ˆä¸å¿…è¦çš„äº‹â€¦â€¦å°±æ˜¯ä¸€æ¬¡ç§»åŠ¨ã€‚å¦‚æœæœ‰è¿”å›å€¼ä¼˜åŒ–çš„è¯ï¼Œä¸€æ¬¡ç§»åŠ¨éƒ½ä¸ä¼šæœ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576983450,"ip_address":"","comment_id":164333,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘ä»¬ç»§ç»­å˜å½¢ä¸€ä¸‹ï¼š\n#include &lt;stdlib.h&gt;\nA getA_duang()\n{\n  A a1;\n  A a2;\n  if (rand() &gt; 42) {\n    return a1;\n  } else {\n    return a2;\n  }\n}\nint main()\n{\n  auto a = getA_duang();\n}\nè¿™å›æ‰€æœ‰çš„ç¼–è¯‘å™¨éƒ½è¢«éš¾å€’äº†ï¼Œè¾“å‡ºæ˜¯ï¼š\nCreate A\nCreate A\nMove A\nDestroy A\nDestroy A\nDestroy A\n\nâ€”â€”â€”â€”â€”â€”â€”\nè€å¸ˆè¿™ä¸ªç»“æœåº”è¯¥è¿˜æ˜¯ä¼šæœ‰ä¼˜åŒ–åœ¨çš„å§ï¼Ÿå¦‚æœå®Œå…¨æ²¡æœ‰ä¼˜åŒ–åº”è¯¥æ˜¯ä¸¤ä¸ªç§»åŠ¨æ‰å¯¹ï¼Œa1æˆ–è€…a2ç§»åŠ¨ç»™è¿”å›å€¼æ˜¯ä¸€æ¬¡ï¼Œè¿”å›å€¼ç§»åŠ¨ç»™aåˆæ˜¯ä¸€æ¬¡ï¼Œå¦‚æœçœŸæ˜¯è¿™æ ·ï¼Œå“ªæ¬¡è¢«ä¼˜åŒ–æ‰äº†ï¼Ÿç¬¬äºŒæ¬¡å—","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520175,"discussion_content":"1. å¯ä»¥å‚è€ƒcppreference.com ç½‘ç«™ï¼Œæˆ–è€…ç¬¬ 9 è®²ï¼Œé‡Œé¢æåˆ°ï¼Œâ€œç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°â€ã€‚â€œ= defaultâ€å’Œâ€œ= deleteâ€è¿™ç§ä¹Ÿç®—å£°æ˜ã€‚\n\n2. ç§»åŠ¨çš„ä»£ä»·æ˜¯çœ‹å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¾‹å­é‡Œçš„çš„ A(A&amp;amp;&amp;amp;)ã€‚åƒæˆ‘ä»¬çš„ç©å…·ä¾‹å­ï¼Œç§»åŠ¨å’Œæ‹·è´æ€§èƒ½å°±æ²¡å•¥åŒºåˆ«ã€‚è¯´ç§»åŠ¨ä»£ä»·é«˜ï¼Œä¹Ÿä¸æ˜¯æŒ‡æ¯”æ‹·è´é«˜ï¼Œè€Œæ˜¯æŒ‡æ‹·è´ä»£ä»·é«˜ä¸”æ²¡æœ‰å¯¹ç§»åŠ¨åšä¼˜åŒ–ï¼ˆå¦‚æ²¡æœ‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼‰ï¼Œæˆ–å¯¹è±¡å¤ªå¤§ï¼Œæ²¡æ³•åšç§»åŠ¨ä¼˜åŒ–ï¼ˆå¦‚ sizeof è¾¾åˆ°æ•°ç™¾ä¸ªå­—èŠ‚ä»¥ä¸Šï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621470268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163026,"user_name":"å°ä¸€æ—¥ä¸€","can_delete":false,"product_type":"c1","uid":1301097,"ip_address":"","ucode":"0A506C2B918C14","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","comment_is_top":false,"comment_ctime":1576642142,"is_pvip":false,"replies":[{"id":61923,"content":"ç®€å•æ¥è¯´ï¼Œåœ¨å¯¹æœ¬åœ°å˜é‡è¿›è¡Œè¿”å›æ—¶ï¼Œä¸ç”¨ std::moveã€‚å®é™…ä¸Šï¼Œæˆ‘åœ¨ç¬¬ 3 è®²å°±å†™äº†ï¼š\n\nâ€œæœ‰ä¸€ç§å¸¸è§çš„ C++ ç¼–ç¨‹é”™è¯¯ï¼Œæ˜¯åœ¨å‡½æ•°é‡Œè¿”å›ä¸€ä¸ªæœ¬åœ°å¯¹è±¡çš„å¼•ç”¨ã€‚ç”±äºåœ¨å‡½æ•°ç»“æŸæ—¶æœ¬åœ°å¯¹è±¡å³è¢«é”€æ¯ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘æœ¬åœ°å¯¹è±¡çš„å¼•ç”¨å±äºæœªå®šä¹‰è¡Œä¸ºã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œç¨‹åºå‡ºä»»ä½•å¥‡æ€ªçš„è¡Œä¸ºéƒ½æ˜¯æ­£å¸¸çš„ã€‚\n\nâ€œåœ¨ C++11 ä¹‹å‰ï¼Œè¿”å›ä¸€ä¸ªæœ¬åœ°å¯¹è±¡æ„å‘³ç€è¿™ä¸ªå¯¹è±¡ä¼šè¢«æ‹·è´ï¼Œé™¤éç¼–è¯‘å™¨å‘ç°å¯ä»¥åšè¿”å›å€¼ä¼˜åŒ–ï¼ˆnamed return value optimizationï¼Œæˆ– NRVOï¼‰ï¼Œèƒ½æŠŠå¯¹è±¡ç›´æ¥æ„é€ åˆ°è°ƒç”¨è€…çš„æ ˆä¸Šã€‚ä» C++11 å¼€å§‹ï¼Œè¿”å›å€¼ä¼˜åŒ–ä»å¯ä»¥å‘ç”Ÿï¼Œä½†åœ¨æ²¡æœ‰è¿”å›å€¼ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†è¯•å›¾æŠŠæœ¬åœ°å¯¹è±¡ç§»åŠ¨å‡ºå»ï¼Œè€Œä¸æ˜¯æ‹·è´å‡ºå»ã€‚è¿™ä¸€è¡Œä¸ºä¸éœ€è¦ç¨‹åºå‘˜æ‰‹å·¥ç”¨ `std::move` è¿›è¡Œå¹²é¢„â€”â€”ä½¿ç”¨`std::move` å¯¹äºç§»åŠ¨è¡Œä¸ºæ²¡æœ‰å¸®åŠ©ï¼Œåè€Œä¼šå½±å“è¿”å›å€¼ä¼˜åŒ–ã€‚â€","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576646399,"ip_address":"","comment_id":163026,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘è®¤ä¸ºè€å¸ˆåº”è¯¥è®²ä¸€ä¸‹NRVO&#47;RVOä¸std::move()çš„åŒºåˆ«ï¼Œè¿™ä¸ªé—®é¢˜æ›¾ç»å›°æ‰°è¿‡æˆ‘ï¼Œä»stackoverflowçš„é—®é¢˜æ¥çœ‹ï¼Œå­¦ä¹ c++11æ—¶å¤§å¤šæ•°äººéƒ½æ€è€ƒè¿‡è¿™ä¸ªé—®é¢˜ï¼šhttps:&#47;&#47;stackoverflow.com&#47;questions&#47;4986673&#47;c11-rvalues-and-move-semantics-confusion-return-statement","like_count":50,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478218,"discussion_content":"ç®€å•æ¥è¯´ï¼Œåœ¨å¯¹æœ¬åœ°å˜é‡è¿›è¡Œè¿”å›æ—¶ï¼Œä¸ç”¨ std::moveã€‚å®é™…ä¸Šï¼Œæˆ‘åœ¨ç¬¬ 3 è®²å°±å†™äº†ï¼š\n\nâ€œæœ‰ä¸€ç§å¸¸è§çš„ C++ ç¼–ç¨‹é”™è¯¯ï¼Œæ˜¯åœ¨å‡½æ•°é‡Œè¿”å›ä¸€ä¸ªæœ¬åœ°å¯¹è±¡çš„å¼•ç”¨ã€‚ç”±äºåœ¨å‡½æ•°ç»“æŸæ—¶æœ¬åœ°å¯¹è±¡å³è¢«é”€æ¯ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘æœ¬åœ°å¯¹è±¡çš„å¼•ç”¨å±äºæœªå®šä¹‰è¡Œä¸ºã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œç¨‹åºå‡ºä»»ä½•å¥‡æ€ªçš„è¡Œä¸ºéƒ½æ˜¯æ­£å¸¸çš„ã€‚\n\nâ€œåœ¨ C++11 ä¹‹å‰ï¼Œè¿”å›ä¸€ä¸ªæœ¬åœ°å¯¹è±¡æ„å‘³ç€è¿™ä¸ªå¯¹è±¡ä¼šè¢«æ‹·è´ï¼Œé™¤éç¼–è¯‘å™¨å‘ç°å¯ä»¥åšè¿”å›å€¼ä¼˜åŒ–ï¼ˆnamed return value optimizationï¼Œæˆ– NRVOï¼‰ï¼Œèƒ½æŠŠå¯¹è±¡ç›´æ¥æ„é€ åˆ°è°ƒç”¨è€…çš„æ ˆä¸Šã€‚ä» C++11 å¼€å§‹ï¼Œè¿”å›å€¼ä¼˜åŒ–ä»å¯ä»¥å‘ç”Ÿï¼Œä½†åœ¨æ²¡æœ‰è¿”å›å€¼ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†è¯•å›¾æŠŠæœ¬åœ°å¯¹è±¡ç§»åŠ¨å‡ºå»ï¼Œè€Œä¸æ˜¯æ‹·è´å‡ºå»ã€‚è¿™ä¸€è¡Œä¸ºä¸éœ€è¦ç¨‹åºå‘˜æ‰‹å·¥ç”¨ `std::move` è¿›è¡Œå¹²é¢„â€”â€”ä½¿ç”¨`std::move` å¯¹äºç§»åŠ¨è¡Œä¸ºæ²¡æœ‰å¸®åŠ©ï¼Œåè€Œä¼šå½±å“è¿”å›å€¼ä¼˜åŒ–ã€‚â€","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1576646399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1414215,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiboeh23vhCNruZ7odUjROiac6N9fx0VWAE6zBNRxJIJFZspSUTQdgu9ajg4F0fAZgdk1vBsicnib3QQ/132","nickname":"åœ¨æ°´ä¸€æ–¹","note":"","ucode":"D8371EFEBED2C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570744,"discussion_content":"ç¼–è¯‘å™¨æ˜¯å¦‚ä½•æŠŠæœ¬åœ°å¯¹è±¡ç§»åŠ¨å‡ºå»çš„ï¼Ÿç¼–è¯‘å™¨ä¼šåšç‰¹æ®Šæ ‡è®°å³ä½¿å‡½æ•°æ‰§è¡Œå®Œä¹Ÿä¸é‡Šæ”¾æœ¬åœ°å˜é‡å—ï¼Ÿå› ä¸ºå¤–éƒ¨è°ƒç”¨è€…æœ‰ä¸ªå¼•ç”¨?è¿˜æ˜¯å…¶ä»–åŸç†?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651899145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":478218,"ip_address":"","group_id":0},"score":570744,"extra":""},{"author":{"id":2006194,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/9c/b2/1a9beeb1.jpg","nickname":"è½¬éä¸–ç•Œ","note":"","ucode":"0783BFDDE87029","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1414215,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiboeh23vhCNruZ7odUjROiac6N9fx0VWAE6zBNRxJIJFZspSUTQdgu9ajg4F0fAZgdk1vBsicnib3QQ/132","nickname":"åœ¨æ°´ä¸€æ–¹","note":"","ucode":"D8371EFEBED2C7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634556,"discussion_content":"æ‚¨æå‡ºäº†ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ã€‚å®é™…ä¸Šï¼Œå¦‚æœå‡½æ•°è¿”å›ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡è¢«ç§»åŠ¨æ„é€ å‡½æ•°å¤„ç†ï¼Œé‚£ä¹ˆå®ƒçš„èµ„æºï¼ˆå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼‰å°†ä¼šè¢«è½¬ç§»åˆ°æ–°å¯¹è±¡ä¸­ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒåŸå§‹å±€éƒ¨å¯¹è±¡ä¼šè¢«ç½®äºä¸€ä¸ªæœ‰æ•ˆä½†æœªå®šä¹‰çš„çŠ¶æ€ï¼Œé€šå¸¸æ˜¯é€šè¿‡å°†å…¶å†…éƒ¨çš„æŒ‡é’ˆè®¾ç½®ä¸º nullptr æ¥å®ç°çš„ã€‚è¿™ç¡®ä¿äº†å½“å±€éƒ¨å¯¹è±¡çš„ææ„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¸ä¼šåˆ é™¤å·²ç»è½¬ç§»ç»™æ–°å¯¹è±¡çš„èµ„æºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703660410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":570744,"ip_address":"æ±Ÿè‹","group_id":0},"score":634556,"extra":""}]},{"author":{"id":1331396,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/c4/71d9745f.jpg","nickname":"é£","note":"","ucode":"48701F74729E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":101112,"discussion_content":"å“ˆå“ˆï¼Œç¡®å®ä¸€å¼€å§‹ç¡®å®ä¸ç†è§£moveå’ŒNVROï¼Œè¿˜å†™å‡ºäº†åœ¨returnæ—¶è°ƒç”¨moveçš„ä»£ç ã€‚ä¸è¿‡çœ‹äº†å³å€¼é‚£è®²å°±æ‡‚äº†ã€‚å‡½æ•°è¿”å›å¯¹è±¡æ˜¯çº¯å³å€¼ï¼Œreturnçš„æ—¶å€™ä¸ç”¨moveä¹Ÿæ˜¯å³å€¼ã€‚å…¶å®C++è¿™ä¸ªè®¾è®¡çœŸçš„å¾ˆå¦™ï¼Œè€çš„ä»£ç ä¸ç”¨æ”¹ï¼Œè‡³å°‘è°ƒç”¨æ‹·è´çš„åœ°æ–¹ç›´æ¥æ”¹æˆè°ƒç”¨moveäº†","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577283973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1301097,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","nickname":"å°ä¸€æ—¥ä¸€","note":"","ucode":"0A506C2B918C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87136,"discussion_content":"å‰é¢å­¦åé¢å¿˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576646537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167342,"user_name":"å°ç™½å…”çº¸ç™½åˆç™½","can_delete":false,"product_type":"c1","uid":1145139,"ip_address":"","ucode":"1F415287933976","user_header":"https://static001.geekbang.org/account/avatar/00/11/79/33/e4af2cdb.jpg","comment_is_top":false,"comment_ctime":1577771983,"is_pvip":false,"replies":[{"id":64996,"content":"å¥½é—®é¢˜ã€‚åˆ©ç”¨ç¬¬ 14 è®²çš„ SFINAE æŠ€å·§ï¼Œæ˜¯å¯ä»¥å†™å‡ºæ¥çš„ã€‚æ¯”å¦‚ï¼Œä½ å¸Œæœ›æ£€æµ‹æ˜¯ä¸æ˜¯æœ‰ä¸‹é¢ç¬¬ä¸€ä¸ªé‡è½½ï¼š\n\nclass Obj {\npublic:\n    void foo() &amp;&amp;;\n    void foo() const &amp;;\n};\n\nå¯ä»¥å®šä¹‰ä¸‹é¢è¿™æ ·çš„ type traitï¼š\n\ntemplate &lt;typename T, typename = void_t&lt;&gt;&gt;\nstruct has_rvalue_ref_foo : false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_rvalue_ref_foo&lt;\n    T, void_t&lt;decltype(static_cast&lt;void (T::*)() &amp;&amp;&gt;(&amp;T::foo))&gt;&gt;\n    : true_type {};\n\nä¸Šé¢ç¬¬ä¸€ä¸ª foo çš„é‡è½½åœ¨çš„è¯ï¼Œä½¿ç”¨ has_rvalue_ref_foo&lt;Obj&gt;::value å°±èƒ½å¾—åˆ°ç¼–è¯‘æœŸå¸¸é‡ trueã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577804920,"ip_address":"","comment_id":167342,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®æœ‰ä½•æ–¹æ³•å¯ä»¥æµ‹è¯•ç¼–è¯‘å™¨æ˜¯å¦ä¸ºä¸€ä¸ªç±»æä¾›äº†å³å€¼å¼•ç”¨çš„ç‰ˆæœ¬çš„æˆå‘˜å‡½æ•°","like_count":13,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478218,"discussion_content":"ç®€å•æ¥è¯´ï¼Œåœ¨å¯¹æœ¬åœ°å˜é‡è¿›è¡Œè¿”å›æ—¶ï¼Œä¸ç”¨ std::moveã€‚å®é™…ä¸Šï¼Œæˆ‘åœ¨ç¬¬ 3 è®²å°±å†™äº†ï¼š\n\nâ€œæœ‰ä¸€ç§å¸¸è§çš„ C++ ç¼–ç¨‹é”™è¯¯ï¼Œæ˜¯åœ¨å‡½æ•°é‡Œè¿”å›ä¸€ä¸ªæœ¬åœ°å¯¹è±¡çš„å¼•ç”¨ã€‚ç”±äºåœ¨å‡½æ•°ç»“æŸæ—¶æœ¬åœ°å¯¹è±¡å³è¢«é”€æ¯ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘æœ¬åœ°å¯¹è±¡çš„å¼•ç”¨å±äºæœªå®šä¹‰è¡Œä¸ºã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œç¨‹åºå‡ºä»»ä½•å¥‡æ€ªçš„è¡Œä¸ºéƒ½æ˜¯æ­£å¸¸çš„ã€‚\n\nâ€œåœ¨ C++11 ä¹‹å‰ï¼Œè¿”å›ä¸€ä¸ªæœ¬åœ°å¯¹è±¡æ„å‘³ç€è¿™ä¸ªå¯¹è±¡ä¼šè¢«æ‹·è´ï¼Œé™¤éç¼–è¯‘å™¨å‘ç°å¯ä»¥åšè¿”å›å€¼ä¼˜åŒ–ï¼ˆnamed return value optimizationï¼Œæˆ– NRVOï¼‰ï¼Œèƒ½æŠŠå¯¹è±¡ç›´æ¥æ„é€ åˆ°è°ƒç”¨è€…çš„æ ˆä¸Šã€‚ä» C++11 å¼€å§‹ï¼Œè¿”å›å€¼ä¼˜åŒ–ä»å¯ä»¥å‘ç”Ÿï¼Œä½†åœ¨æ²¡æœ‰è¿”å›å€¼ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†è¯•å›¾æŠŠæœ¬åœ°å¯¹è±¡ç§»åŠ¨å‡ºå»ï¼Œè€Œä¸æ˜¯æ‹·è´å‡ºå»ã€‚è¿™ä¸€è¡Œä¸ºä¸éœ€è¦ç¨‹åºå‘˜æ‰‹å·¥ç”¨ `std::move` è¿›è¡Œå¹²é¢„â€”â€”ä½¿ç”¨`std::move` å¯¹äºç§»åŠ¨è¡Œä¸ºæ²¡æœ‰å¸®åŠ©ï¼Œåè€Œä¼šå½±å“è¿”å›å€¼ä¼˜åŒ–ã€‚â€","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1576646399,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1414215,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiboeh23vhCNruZ7odUjROiac6N9fx0VWAE6zBNRxJIJFZspSUTQdgu9ajg4F0fAZgdk1vBsicnib3QQ/132","nickname":"åœ¨æ°´ä¸€æ–¹","note":"","ucode":"D8371EFEBED2C7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":570744,"discussion_content":"ç¼–è¯‘å™¨æ˜¯å¦‚ä½•æŠŠæœ¬åœ°å¯¹è±¡ç§»åŠ¨å‡ºå»çš„ï¼Ÿç¼–è¯‘å™¨ä¼šåšç‰¹æ®Šæ ‡è®°å³ä½¿å‡½æ•°æ‰§è¡Œå®Œä¹Ÿä¸é‡Šæ”¾æœ¬åœ°å˜é‡å—ï¼Ÿå› ä¸ºå¤–éƒ¨è°ƒç”¨è€…æœ‰ä¸ªå¼•ç”¨?è¿˜æ˜¯å…¶ä»–åŸç†?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651899145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":478218,"ip_address":"","group_id":0},"score":570744,"extra":""},{"author":{"id":2006194,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/9c/b2/1a9beeb1.jpg","nickname":"è½¬éä¸–ç•Œ","note":"","ucode":"0783BFDDE87029","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1414215,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKiboeh23vhCNruZ7odUjROiac6N9fx0VWAE6zBNRxJIJFZspSUTQdgu9ajg4F0fAZgdk1vBsicnib3QQ/132","nickname":"åœ¨æ°´ä¸€æ–¹","note":"","ucode":"D8371EFEBED2C7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":634556,"discussion_content":"æ‚¨æå‡ºäº†ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ã€‚å®é™…ä¸Šï¼Œå¦‚æœå‡½æ•°è¿”å›ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡è¢«ç§»åŠ¨æ„é€ å‡½æ•°å¤„ç†ï¼Œé‚£ä¹ˆå®ƒçš„èµ„æºï¼ˆå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼‰å°†ä¼šè¢«è½¬ç§»åˆ°æ–°å¯¹è±¡ä¸­ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒåŸå§‹å±€éƒ¨å¯¹è±¡ä¼šè¢«ç½®äºä¸€ä¸ªæœ‰æ•ˆä½†æœªå®šä¹‰çš„çŠ¶æ€ï¼Œé€šå¸¸æ˜¯é€šè¿‡å°†å…¶å†…éƒ¨çš„æŒ‡é’ˆè®¾ç½®ä¸º nullptr æ¥å®ç°çš„ã€‚è¿™ç¡®ä¿äº†å½“å±€éƒ¨å¯¹è±¡çš„ææ„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¸ä¼šåˆ é™¤å·²ç»è½¬ç§»ç»™æ–°å¯¹è±¡çš„èµ„æºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1703660410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":570744,"ip_address":"æ±Ÿè‹","group_id":0},"score":634556,"extra":""}]},{"author":{"id":1331396,"avatar":"https://static001.geekbang.org/account/avatar/00/14/50/c4/71d9745f.jpg","nickname":"é£","note":"","ucode":"48701F74729E5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":101112,"discussion_content":"å“ˆå“ˆï¼Œç¡®å®ä¸€å¼€å§‹ç¡®å®ä¸ç†è§£moveå’ŒNVROï¼Œè¿˜å†™å‡ºäº†åœ¨returnæ—¶è°ƒç”¨moveçš„ä»£ç ã€‚ä¸è¿‡çœ‹äº†å³å€¼é‚£è®²å°±æ‡‚äº†ã€‚å‡½æ•°è¿”å›å¯¹è±¡æ˜¯çº¯å³å€¼ï¼Œreturnçš„æ—¶å€™ä¸ç”¨moveä¹Ÿæ˜¯å³å€¼ã€‚å…¶å®C++è¿™ä¸ªè®¾è®¡çœŸçš„å¾ˆå¦™ï¼Œè€çš„ä»£ç ä¸ç”¨æ”¹ï¼Œè‡³å°‘è°ƒç”¨æ‹·è´çš„åœ°æ–¹ç›´æ¥æ”¹æˆè°ƒç”¨moveäº†","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1577283973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1301097,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKtVXiaJbfkpeXH4udkPUIlFte7z3HWMebdogk8jFpgFEkJ0ruGiawUMUcZj9RLpLkIWxV7QOzbHoSg/132","nickname":"å°ä¸€æ—¥ä¸€","note":"","ucode":"0A506C2B918C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87136,"discussion_content":"å‰é¢å­¦åé¢å¿˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576646537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":308761,"user_name":"æ€ªå…½","can_delete":false,"product_type":"c1","uid":1324007,"ip_address":"","ucode":"3342C55CB83B08","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/e7/145be2f9.jpg","comment_is_top":false,"comment_ctime":1629788485,"is_pvip":false,"replies":[{"id":111778,"content":"å› ä¸º (rand() &gt; 42 ? a1 : a2) çš„ç»“æœæ˜¯ä¸€ä¸ª A çš„å·¦å€¼å¼•ç”¨ï¼Œreturn è¯­å¥è¿”å›çš„æ˜¯å·¦å€¼å¼•ç”¨ï¼Œä¸æ˜¯å˜é‡ï¼Œæ‰€ä»¥å°±ä¸è¡Œäº†ã€‚è¦ç§»åŠ¨éœ€è¦è‡ªå·±åŠ ä¸Š std::moveã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1629811052,"ip_address":"","comment_id":308761,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œæ±‚åŠ©ï¼Œæˆ‘æŠŠgetA_duangå‡½æ•°ä¿®æ”¹ä¸ºï¼š\nA getA_duang()\n{\n\tA a1;\n\tA a2;\n\treturn (rand() &gt; 42 ? a1 : a2);\n}\nå¾—åˆ°çš„ç»“æœæ˜¯:\nCreate A\nCreate A\nCopy A\nDestroy A\nDestroy A\nDestroy A\nè¯·é—®ä¸ºä»€ä¹ˆç”¨æ¡ä»¶è¡¨è¾¾å¼ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ Copy Aï¼Œè€Œç”¨ä½ èŒƒä¾‹ä¸­çš„ if è¯­å¥åˆ¤æ–­å°±èƒ½å¾—åˆ° Move Aå‘¢ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525615,"discussion_content":"å› ä¸º (rand() &amp;gt; 42 ? a1 : a2) çš„ç»“æœæ˜¯ä¸€ä¸ª A çš„å·¦å€¼å¼•ç”¨ï¼Œreturn è¯­å¥è¿”å›çš„æ˜¯å·¦å€¼å¼•ç”¨ï¼Œä¸æ˜¯å˜é‡ï¼Œæ‰€ä»¥å°±ä¸è¡Œäº†ã€‚è¦ç§»åŠ¨éœ€è¦è‡ªå·±åŠ ä¸Š std::moveã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1629811052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181696,"user_name":"Milittle","can_delete":false,"product_type":"c1","uid":1045455,"ip_address":"","ucode":"80E566639A8ABB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f3/cf/851dab01.jpg","comment_is_top":false,"comment_ctime":1582619489,"is_pvip":false,"replies":[{"id":70395,"content":"å¯¹ï¼Œå¥½ç”¨éå¸¸é‡è¦ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1582630283,"ip_address":"","comment_id":181696,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"Armadilloè¿™ä¸ªåº“æˆ‘ç”¨è¿‡ï¼ŒæŒºå¥½ç”¨ã€‚è¯­æ³•å¯ä»¥å’ŒMatlabäº’è½¬ï¼Œå¦‚æœæœ‰ç”¨Matlabçš„å°ä¼™ä¼´ å¯ä»¥æ¨èä½¿ç”¨ æ€§èƒ½æ æ çš„","like_count":8,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485084,"discussion_content":"å¯¹ï¼Œå¥½ç”¨éå¸¸é‡è¦ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582630283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168749,"user_name":"ç©ºæ°”","can_delete":false,"product_type":"c1","uid":1307602,"ip_address":"","ucode":"45F9574A02343D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep73FalJJ7FPUJAcK2Ket1Qia1HOHhmaEcd8zdr4O6LHHk5NwzyUTnBAOzgmMtR3H0gSgYcbH6N5Vg/132","comment_is_top":false,"comment_ctime":1578149803,"is_pvip":false,"replies":[{"id":65501,"content":"å¦‚æœéƒ½æ˜¯è¿”å›è€Œéä¿®æ”¹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ pairã€tupleã€tie å’Œç¬¬ 8 è®²è®¨è®ºçš„ç»“æ„åŒ–ç»‘å®šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578223367,"ip_address":"","comment_id":168749,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘åœ¨å·¥ä½œä¸­ä½¿ç”¨å¼•ç”¨å‡ºå‚çš„åœºæ™¯ä¹‹ä¸€æ˜¯åŒæ—¶è¿”å›å¤šä¸ªå¯¹è±¡ï¼Œå¦‚æœä½¿ç”¨è¿”å›å€¼å°±è¦å°è£…å¾ˆå¤šä¸åŒç»“æ„ä½“ã€‚è¯·é—®è€å¸ˆè¿™ç§åœºæ™¯å»ºè®®æ€ä¹ˆå®ç°ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480319,"discussion_content":"å¦‚æœéƒ½æ˜¯è¿”å›è€Œéä¿®æ”¹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ pairã€tupleã€tie å’Œç¬¬ 8 è®²è®¨è®ºçš„ç»“æ„åŒ–ç»‘å®šã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578223367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319814,"user_name":"é˜¿ç™½","can_delete":false,"product_type":"c1","uid":2736474,"ip_address":"","ucode":"811D111BEC0298","user_header":"https://static001.geekbang.org/account/avatar/00/29/c1/5a/4d4e6200.jpg","comment_is_top":false,"comment_ctime":1635950425,"is_pvip":false,"replies":[{"id":116021,"content":"å‡½æ•°è¿”å›ä¸€ä¸ªæœ¬åœ°å˜é‡æ˜¯æœ‰ç‰¹æ®Šè§„åˆ™çš„ã€‚è¯·åœ¨ cppreference ä¸ŠæŸ¥é˜… return å’Œ copy elision çš„æ–‡æ¡£ã€‚\n\nå¯ä»¥ç±»æ¯”ä¸€ä¸‹ decltypeï¼ˆè§„åˆ™è¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼‰æ¥è·å¾—ä¸€äº›ç›´è§‚çš„æ„Ÿå—ã€‚å¦‚æœä½ æœ‰ int a; å’Œ int b; ä¸¤ä¸ªå˜é‡ï¼Œdecltype(a) ä¼šå¾—åˆ° intï¼Œdecltype(a &gt; b ? a : b) åˆ™å¾—åˆ° int&amp;ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1636074146,"ip_address":"","comment_id":319814,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆçœ‹åˆ°ä½ å’Œåˆ«çš„åŒå­¦è®¨è®ºçš„é—®é¢˜ï¼Œreturn :?ä¸­:?è¡¨è¾¾å¼è¿”å›çš„æ˜¯å·¦å€¼å¼•ç”¨ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ å‡½æ•°ã€‚ä½†æ˜¯return a1,a1æ˜¯ä¸ªæ ‡è¯†è¡¨è¾¾å¼æ˜¯ä¸ªå·¦å€¼ä¸ºä»€ä¹ˆå°±æ˜¯è°ƒç”¨ç§»åŠ¨æ„é€ ã€‚æˆ‘ä¸æ˜ç™½åœ¨å‡½æ•°å£°æ˜è¿”å›å€¼ä¸ºå€¼ç±»å‹ï¼Œä½†æ˜¯:?è¿”å›ä¸€ä¸ªå·¦å€¼å¼•ç”¨çš„æ—¶å€™ä¸ºä»€ä¹ˆè°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ ï¼Ÿ\n\nA getA_duang()\n{\nA a1;\nA a2;\nreturn (rand() &gt; 42 ? a1 : a2);\n}\nCreate A\nCreate A\nCopy A\nDestroy A\nDestroy A\nDestroy A\nauto a = getA_duang();","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529780,"discussion_content":"å‡½æ•°è¿”å›ä¸€ä¸ªæœ¬åœ°å˜é‡æ˜¯æœ‰ç‰¹æ®Šè§„åˆ™çš„ã€‚è¯·åœ¨ cppreference ä¸ŠæŸ¥é˜… return å’Œ copy elision çš„æ–‡æ¡£ã€‚\n\nå¯ä»¥ç±»æ¯”ä¸€ä¸‹ decltypeï¼ˆè§„åˆ™è¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼‰æ¥è·å¾—ä¸€äº›ç›´è§‚çš„æ„Ÿå—ã€‚å¦‚æœä½ æœ‰ int a; å’Œ int b; ä¸¤ä¸ªå˜é‡ï¼Œdecltype(a) ä¼šå¾—åˆ° intï¼Œdecltype(a &amp;gt; b ? a : b) åˆ™å¾—åˆ° int&amp;amp;ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1636074146,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163031,"user_name":"æœ¨ç“œ777","can_delete":false,"product_type":"c1","uid":1512537,"ip_address":"","ucode":"FC52A499AF6374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","comment_is_top":false,"comment_ctime":1576643454,"is_pvip":false,"replies":[{"id":61926,"content":"ç”¨é»˜è®¤æ„é€ å‡½æ•°ä»£è¡¨ç©ºï¼Œæˆ–è€…ç”¨ optional&lt;å¯¹è±¡&gt; ï¼ˆä¸æ„é€ ï¼‰ä»£è¡¨ç©ºï¼Œæˆ–è€…æŠ›å¼‚å¸¸ä»£è¡¨ä¸æ­£å¸¸ï¼ˆè§†æ˜¯å¦ä¸æ­£å¸¸è€Œå®šï¼‰ã€‚\n\noptional ä¼šåœ¨ç¬¬ 22 è®²é‡Œè®¨è®ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576647227,"ip_address":"","comment_id":163031,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"é¡¹ç›®ä¸­ä¸€ç›´ä½¿ç”¨æ‚¨è¯´çš„è€æ–¹æ³•ï¼Œç›®å‰çœ‹ç¼–è¯‘å™¨æœ‰ä¼˜åŒ–çš„è¯ï¼Œåé¢ä¼šé€æ­¥è€ƒè™‘é‡‡ç”¨è¿”å›å¯¹è±¡çš„æ–¹æ³•ï¼ æœ‰ä¸ªé—®é¢˜é—®ä¸‹ï¼Œå¦‚æœè¦è¿”å›ç©ºå¯¹è±¡ï¼Œè¯¥å¦‚ä½•åšï¼Ÿ æ˜¯ç›´æ¥é‡‡ç”¨ç©ºçš„æ„é€ å‡½æ•°ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478221,"discussion_content":"ç”¨é»˜è®¤æ„é€ å‡½æ•°ä»£è¡¨ç©ºï¼Œæˆ–è€…ç”¨ optional&amp;lt;å¯¹è±¡&amp;gt; ï¼ˆä¸æ„é€ ï¼‰ä»£è¡¨ç©ºï¼Œæˆ–è€…æŠ›å¼‚å¸¸ä»£è¡¨ä¸æ­£å¸¸ï¼ˆè§†æ˜¯å¦ä¸æ­£å¸¸è€Œå®šï¼‰ã€‚\n\noptional ä¼šåœ¨ç¬¬ 22 è®²é‡Œè®¨è®ºã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576647227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":162868,"user_name":"æ³°ä¼¦å¢","can_delete":false,"product_type":"c1","uid":1141994,"ip_address":"","ucode":"FEA6B43C8D4FF9","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/ea/e03fec22.jpg","comment_is_top":false,"comment_ctime":1576626755,"is_pvip":false,"replies":[{"id":61896,"content":"çœ‹è¿™ä¸ªé¡µé¢å§ï¼š\n\nhttps:&#47;&#47;en.cppreference.com&#47;w&#47;cpp&#47;compiler_support\n\nç›®å‰ GCC é¢†å…ˆä¸€äº›ï¼ˆå¯ä»¥ç”¨ -std=c++2a å¯ç”¨ 20 çš„åŠŸèƒ½ï¼‰ï¼Œä½†è¿˜æ²¡æœ‰å“ªå®¶å®Œæ•´æ”¯æŒ C++20ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576633076,"ip_address":"","comment_id":162868,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®è€å¸ˆè¿™ä¸ªC++20ä»€ä¹ˆæ—¶å€™å‘å¸ƒç¼–è¯‘å™¨ä¹‹ç±»çš„å•Šï¼Ÿè¿˜æ˜¯è¯´å·²ç»æœ‰äº†ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478168,"discussion_content":"çœ‹è¿™ä¸ªé¡µé¢å§ï¼š\n\nhttps://en.cppreference.com/w/cpp/compiler_support\n\nç›®å‰ GCC é¢†å…ˆä¸€äº›ï¼ˆå¯ä»¥ç”¨ -std=c++2a å¯ç”¨ 20 çš„åŠŸèƒ½ï¼‰ï¼Œä½†è¿˜æ²¡æœ‰å“ªå®¶å®Œæ•´æ”¯æŒ C++20ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576633076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":86917,"discussion_content":"c++20çš„æ ‡å‡†è¿˜æ²¡æœ‰ç¡®å®šå‘¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576632476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1762459,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e4/9b/fcb4b8b7.jpg","nickname":"æä¹‰ç››","note":"","ucode":"2C79848BCF545D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":87141,"discussion_content":"åŸºæœ¬ç¡®å®šäº†ã€‚ä¸ƒæœˆæ—¶å·²ç»ç¡®å®šäº†å“ªäº›åŠŸèƒ½ä¼šè¿› C++20ï¼Œå“ªäº›è¿›ä¸äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576646750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":86917,"ip_address":"","group_id":0},"score":87141,"extra":""}]}]},{"had_liked":false,"id":293358,"user_name":"æ€ªå…½","can_delete":false,"product_type":"c1","uid":1324007,"ip_address":"","ucode":"3342C55CB83B08","user_header":"https://static001.geekbang.org/account/avatar/00/14/33/e7/145be2f9.jpg","comment_is_top":false,"comment_ctime":1621349564,"is_pvip":false,"replies":[{"id":106336,"content":"1. å¯ä»¥å‚è€ƒcppreference.com ç½‘ç«™ï¼Œæˆ–è€…ç¬¬ 9 è®²ï¼Œé‡Œé¢æåˆ°ï¼Œâ€œç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°â€ã€‚â€œ= defaultâ€å’Œâ€œ= deleteâ€è¿™ç§ä¹Ÿç®—å£°æ˜ã€‚\n\n2. ç§»åŠ¨çš„ä»£ä»·æ˜¯çœ‹å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¾‹å­é‡Œçš„çš„ A(A&amp;&amp;)ã€‚åƒæˆ‘ä»¬çš„ç©å…·ä¾‹å­ï¼Œç§»åŠ¨å’Œæ‹·è´æ€§èƒ½å°±æ²¡å•¥åŒºåˆ«ã€‚è¯´ç§»åŠ¨ä»£ä»·é«˜ï¼Œä¹Ÿä¸æ˜¯æŒ‡æ¯”æ‹·è´é«˜ï¼Œè€Œæ˜¯æŒ‡æ‹·è´ä»£ä»·é«˜ä¸”æ²¡æœ‰å¯¹ç§»åŠ¨åšä¼˜åŒ–ï¼ˆå¦‚æ²¡æœ‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼‰ï¼Œæˆ–å¯¹è±¡å¤ªå¤§ï¼Œæ²¡æ³•åšç§»åŠ¨ä¼˜åŒ–ï¼ˆå¦‚ sizeof è¾¾åˆ°æ•°ç™¾ä¸ªå­—èŠ‚ä»¥ä¸Šï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1621470268,"ip_address":"","comment_id":293358,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œè¯·æ•™2ä¸ªç–‘æƒ‘ï¼š\n1. åœ¨è¿”å›å€¼ä¼˜åŒ–ï¼ˆæ‹·è´æ¶ˆé™¤ï¼‰å°èŠ‚é‡Œï¼ŒA(const A&amp;) = delete;äº†ï¼Œä½†A(A&amp;&amp;)åªæ˜¯æ³¨é‡Šæ‰ï¼Œä¸æ˜¯è¯´ç¼–è¯‘å™¨ä¼šæä¾›é»˜è®¤çš„ç§»åŠ¨æ„é€ å‡½æ•°å—ï¼Ÿä¸ºä»€ä¹ˆgetA_namedä¹Ÿä¸è¡Œäº†ï¼Ÿä¸æ˜¯ä¼˜å…ˆåŒ¹é…ç§»åŠ¨æ„é€ å—ï¼Ÿ\nA getA_named()\n{\n\tA a;\n\treturn a;\n}\n2. å“ªç§æƒ…å†µä¸‹ç§»åŠ¨çš„ä»£ä»·é«˜ï¼Ÿæˆ‘ç†è§£ç§»åŠ¨çš„ä»£ä»·éƒ½å¾ˆä½ï¼Œè‡³å°‘æ¯”æ‹·è´ä½å§ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":520175,"discussion_content":"1. å¯ä»¥å‚è€ƒcppreference.com ç½‘ç«™ï¼Œæˆ–è€…ç¬¬ 9 è®²ï¼Œé‡Œé¢æåˆ°ï¼Œâ€œç”¨æˆ·å¦‚æœæ²¡æœ‰è‡ªå·±å£°æ˜æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°å’Œææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šéšå¼å£°æ˜ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°â€ã€‚â€œ= defaultâ€å’Œâ€œ= deleteâ€è¿™ç§ä¹Ÿç®—å£°æ˜ã€‚\n\n2. ç§»åŠ¨çš„ä»£ä»·æ˜¯çœ‹å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¾‹å­é‡Œçš„çš„ A(A&amp;amp;&amp;amp;)ã€‚åƒæˆ‘ä»¬çš„ç©å…·ä¾‹å­ï¼Œç§»åŠ¨å’Œæ‹·è´æ€§èƒ½å°±æ²¡å•¥åŒºåˆ«ã€‚è¯´ç§»åŠ¨ä»£ä»·é«˜ï¼Œä¹Ÿä¸æ˜¯æŒ‡æ¯”æ‹·è´é«˜ï¼Œè€Œæ˜¯æŒ‡æ‹·è´ä»£ä»·é«˜ä¸”æ²¡æœ‰å¯¹ç§»åŠ¨åšä¼˜åŒ–ï¼ˆå¦‚æ²¡æœ‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼‰ï¼Œæˆ–å¯¹è±¡å¤ªå¤§ï¼Œæ²¡æ³•åšç§»åŠ¨ä¼˜åŒ–ï¼ˆå¦‚ sizeof è¾¾åˆ°æ•°ç™¾ä¸ªå­—èŠ‚ä»¥ä¸Šï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621470268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164333,"user_name":"èŠ±æ™¨å°‘å¹´","can_delete":false,"product_type":"c1","uid":1098987,"ip_address":"","ucode":"6AA3537A6BA10E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","comment_is_top":false,"comment_ctime":1576939070,"is_pvip":false,"replies":[{"id":62449,"content":"C++ç¼–è¯‘å™¨å“ªä¼šåšè¿™ä¹ˆä¸å¿…è¦çš„äº‹â€¦â€¦å°±æ˜¯ä¸€æ¬¡ç§»åŠ¨ã€‚å¦‚æœæœ‰è¿”å›å€¼ä¼˜åŒ–çš„è¯ï¼Œä¸€æ¬¡ç§»åŠ¨éƒ½ä¸ä¼šæœ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576983450,"ip_address":"","comment_id":164333,"utype":1}],"discussion_count":4,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘ä»¬ç»§ç»­å˜å½¢ä¸€ä¸‹ï¼š\n#include &lt;stdlib.h&gt;\nA getA_duang()\n{\n  A a1;\n  A a2;\n  if (rand() &gt; 42) {\n    return a1;\n  } else {\n    return a2;\n  }\n}\nint main()\n{\n  auto a = getA_duang();\n}\nè¿™å›æ‰€æœ‰çš„ç¼–è¯‘å™¨éƒ½è¢«éš¾å€’äº†ï¼Œè¾“å‡ºæ˜¯ï¼š\nCreate A\nCreate A\nMove A\nDestroy A\nDestroy A\nDestroy A\n\nâ€”â€”â€”â€”â€”â€”â€”\nè€å¸ˆè¿™ä¸ªç»“æœåº”è¯¥è¿˜æ˜¯ä¼šæœ‰ä¼˜åŒ–åœ¨çš„å§ï¼Ÿå¦‚æœå®Œå…¨æ²¡æœ‰ä¼˜åŒ–åº”è¯¥æ˜¯ä¸¤ä¸ªç§»åŠ¨æ‰å¯¹ï¼Œa1æˆ–è€…a2ç§»åŠ¨ç»™è¿”å›å€¼æ˜¯ä¸€æ¬¡ï¼Œè¿”å›å€¼ç§»åŠ¨ç»™aåˆæ˜¯ä¸€æ¬¡ï¼Œå¦‚æœçœŸæ˜¯è¿™æ ·ï¼Œå“ªæ¬¡è¢«ä¼˜åŒ–æ‰äº†ï¼Ÿç¬¬äºŒæ¬¡å—","like_count":3,"discussions":[{"author":{"id":1217554,"avatar":"https://static001.geekbang.org/account/avatar/00/12/94/12/15558f28.jpg","nickname":"Jason","note":"","ucode":"C5A540BC5A60B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":123511,"discussion_content":"ç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œç¼–è¯‘æ—¶åŠ ä¸Š-std=c++11åï¼Œç¼–è¯‘å™¨ç›´æ¥æŠŠaä½œä¸ºäº†ç§»åŠ¨çš„å¯¹è±¡ï¼Œä¼˜åŒ–æ‰äº†é’ˆå¯¹è¿”å›å€¼çš„é‚£æ¬¡ç§»åŠ¨ã€‚å¦‚æœå»æ‰c++11é€‰é¡¹ä¸”å…³é—­è¿”å›å€¼ä¼˜åŒ–ï¼Œå°±ä¼šå‡ºç°ä¸¤æ¬¡æ‹·è´ï¼ˆ11ä¹‹å‰ä¸æ”¯æŒç§»åŠ¨ï¼‰","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1578404483,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1098987,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","nickname":"èŠ±æ™¨å°‘å¹´","note":"","ucode":"6AA3537A6BA10E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1217554,"avatar":"https://static001.geekbang.org/account/avatar/00/12/94/12/15558f28.jpg","nickname":"Jason","note":"","ucode":"C5A540BC5A60B9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":130885,"discussion_content":"èµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578803854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":123511,"ip_address":"","group_id":0},"score":130885,"extra":""}]},{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478727,"discussion_content":"C++ç¼–è¯‘å™¨å“ªä¼šåšè¿™ä¹ˆä¸å¿…è¦çš„äº‹â€¦â€¦å°±æ˜¯ä¸€æ¬¡ç§»åŠ¨ã€‚å¦‚æœæœ‰è¿”å›å€¼ä¼˜åŒ–çš„è¯ï¼Œä¸€æ¬¡ç§»åŠ¨éƒ½ä¸ä¼šæœ‰ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576983450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1098987,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","nickname":"èŠ±æ™¨å°‘å¹´","note":"","ucode":"6AA3537A6BA10E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":94798,"discussion_content":"æˆ‘æ„æ€æ˜¯æŒ‰ç…§äººå»ç†è§£ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œåº”è¯¥æœ‰å“ªäº›æ­¥éª¤ï¼Œä¸æ˜¯è¯´ç¼–è¯‘å™¨çš„æ­¥éª¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576989797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371472,"user_name":"TJJ","can_delete":false,"product_type":"c1","uid":3578564,"ip_address":"ä¸Šæµ·","ucode":"DC8A0008A9C6A2","user_header":"https://static001.geekbang.org/account/avatar/00/36/9a/c4/99c6f985.jpg","comment_is_top":false,"comment_ctime":1679978020,"is_pvip":false,"replies":[{"id":135583,"content":"æ˜¯çš„ï¼Œè¿™ä¹Ÿæ˜¯å‡ºå‚å¾ˆä¸æ–¹ä¾¿çš„åœ°æ–¹ä¹‹ä¸€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1680089026,"ip_address":"å¹¿ä¸œ","comment_id":371472,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"ç”¨æˆå‘˜å‡½æ•°è¿”å›å€¼ï¼Œå¯ä»¥æå‡ºé“¾å¼è°ƒç”¨ï¼Œç”¨èµ·æ¥å¾ˆæ–¹ä¾¿","like_count":2},{"had_liked":false,"id":347750,"user_name":"Cafba","can_delete":false,"product_type":"c1","uid":3018755,"ip_address":"","ucode":"29BD3BD7143D41","user_header":"","comment_is_top":false,"comment_ctime":1654396337,"is_pvip":false,"replies":[{"id":126775,"content":"Move å’Œ Copy ä¹Ÿæ„å‘³ç€æ„é€ ï¼Œåˆ†åˆ«è°ƒç”¨äº†ç§»åŠ¨æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•°ã€‚ä¸èƒ½è¯´â€œä¸éœ€è¦æ„é€ å‡½æ•°åˆå§‹åŒ–â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1654425382,"ip_address":"","comment_id":347750,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·æ•™ä¸€ä¸‹è¿™é‡Œå‡ºç°ä¸¤æ¬¡æ„é€ ï¼Œä½†ææ„äº†ä¸‰æ¬¡çš„åŸå› ï¼Œæˆ‘çš„æ€è€ƒæ˜¯å¯¹äºauto a = getA_duang();\nå‡½æ•°ä½“å†…ä¸¤ä¸ªä¸´æ—¶å¯¹è±¡ç”Ÿæˆä¸ææ„å¯¹åº”ç€ä¸¤æ¬¡ï¼Œå½“è¿”å›æ—¶å› ä¸ºç§»åŠ¨æ„é€ ï¼Œä¸éœ€è¦æ‹·è´ï¼Œç›´æ¥å°†ä¸€ä¸ªä¸´æ—¶å¯¹è±¡çš„æ‰€æœ‰æƒè½¬ç§»ç»™ç›®æ ‡aï¼ˆä¸”æ­¤æ—¶ä¿è¯ç€ä¸´æ—¶å¯¹è±¡ä»ç„¶å¤„äºå¯ææ„çŠ¶æ€ï¼‰ï¼Œæ­¤æ—¶è¿™ä¸ªç›®æ ‡aä¸éœ€è¦æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œä½†ä»ç„¶ææ„ï¼Œå› æ­¤å°‘äº†æ„é€ çš„ä¸€æ¬¡ææ„äº†ä¸‰æ¬¡ï¼Œè¿™æ ·ç†è§£å“ªé‡Œæœ‰é—®é¢˜\nCreate A\nCreate A\nMove A\nDestroy A\nDestroy A\nDestroy A","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611443,"discussion_content":"æ˜¯çš„ï¼Œè¿™ä¹Ÿæ˜¯å‡ºå‚å¾ˆä¸æ–¹ä¾¿çš„åœ°æ–¹ä¹‹ä¸€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1680089026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235888,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1595235093,"is_pvip":false,"replies":[{"id":87146,"content":"æ˜¯ï¼Œè¿™äº›æ¦‚å¿µéƒ½æ˜¯æœ‰æ·±åˆ»æ•°å­¦èƒŒæ™¯çš„ã€‚è¦è¿›ä¸€æ­¥äº†è§£çš„è¯ï¼Œæˆ‘æ¨è From Mathematics to Generic Programmingï¼ŒSTL ä¹‹çˆ¶çš„å¤§ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1595252157,"ip_address":"","comment_id":235888,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ã€‚\næŠ±æ­‰æˆ‘ä¹‹å‰çš„çš„æé—®æè¿°çš„ä¸å¤ªæ¸…æ¥šã€‚æ‚¨æ–‡ä¸­æ¸…æ¥šåœ°æè¿°äº†semi-regularæ˜¯â€œå¦‚ä½•â€å®šä¹‰çš„ã€‚æˆ‘å¥½å¥‡çš„æ˜¯ï¼Œè¿™æ ·å®šä¹‰çš„æ„ä¹‰æ˜¯å•¥ï¼Œå¯¹äºcopiableå¢åŠ ä¸€ä¸ªaliasçš„æ„ä¹‰ä½•åœ¨ï¼Ÿå¯¹åº”çš„regularå®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ\nåœ¨ç½‘ä¸Šä»”ç»†æœç´¢äº†ä¸€ä¸‹ï¼Œä¼¼ä¹æ‰¾åˆ°äº†æºå¤´ï¼š\nhttps:&#47;&#47;www.slideshare.net&#47;ilio-catallo&#47;regular-types-in-c \nè¿™ä¸€ä¸ªpptæè¿°äº†regularçš„å®šä¹‰ï¼Œä»¥åŠç”±æ­¤å¼•ç”³å‡ºæ¥çš„semi-regularã€‚è¿™é‡Œçš„å„ç§å®šä¹‰æ˜¯éå¸¸ä¸¥è°¨çš„ï¼Œç±»ä¼¼äºæ•°åŸŸåŠå…¶æ»¡è¶³æ“ä½œçš„æ‰©å±•ã€‚\nhttps:&#47;&#47;www.modernescpp.com&#47;index.php&#47;c-20-define-the-concept-regular-and-semiregular\nè¿™ç¯‡æ–‡ç« ç»“åˆäº†C++ std20ä¸­conceptä»‹ç»äº†ä¸€ä¸‹regularå’Œsemi-regularå®šä¹‰çš„å®æ“ã€‚å…¶ä¸­æ·±åº¦ä½¿ç”¨äº†æ‚¨ä»‹ç»çš„SFINAEã€‚\nä»ä¸­ä¼¼ä¹éšç„¶å¯ä»¥çœ‹å‡ºC++æˆä¸ºä¸€ä¸ªå…¬å¼è¯­è¨€çš„å¯èƒ½æ€§ã€‚","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501866,"discussion_content":"æ˜¯ï¼Œè¿™äº›æ¦‚å¿µéƒ½æ˜¯æœ‰æ·±åˆ»æ•°å­¦èƒŒæ™¯çš„ã€‚è¦è¿›ä¸€æ­¥äº†è§£çš„è¯ï¼Œæˆ‘æ¨è From Mathematics to Generic Programmingï¼ŒSTL ä¹‹çˆ¶çš„å¤§ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595252157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278952,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1613480109,"is_pvip":false,"replies":[{"id":101423,"content":"ä¸åªæ˜¯èƒ½ï¼Œè€Œæ˜¯å¿…é¡»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1613629876,"ip_address":"","comment_id":278952,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"åœ¨ C++14 åŠä¹‹å‰ç¡®å®æ˜¯è¿™æ ·çš„ã€‚ä½†ä» C++17 å¼€å§‹ï¼Œå¯¹äºç±»ä¼¼äº getA_unnamed è¿™æ ·çš„æƒ…å†µï¼Œå³ä½¿å¯¹è±¡ä¸å¯æ‹·è´ã€ä¸å¯ç§»åŠ¨ï¼Œè¿™ä¸ªå¯¹è±¡ä»ç„¶æ˜¯å¯ä»¥è¢«è¿”å›çš„ ----è¿™æ ·çš„æƒ…å†µå°±æ˜¯æŒ‡èƒ½è¢«è¿”å›å€¼ä¼˜åŒ–çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501866,"discussion_content":"æ˜¯ï¼Œè¿™äº›æ¦‚å¿µéƒ½æ˜¯æœ‰æ·±åˆ»æ•°å­¦èƒŒæ™¯çš„ã€‚è¦è¿›ä¸€æ­¥äº†è§£çš„è¯ï¼Œæˆ‘æ¨è From Mathematics to Generic Programmingï¼ŒSTL ä¹‹çˆ¶çš„å¤§ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595252157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235569,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1595088211,"is_pvip":false,"replies":[{"id":87065,"content":"1. è¿˜æ˜¯çœ‹æ­£æ–‡ã€‚æˆ‘ä¸å¯èƒ½è¿™å„¿è¯´ä¸€ä¸¤å¥å°±æ¯”æˆ‘èŠ±åŠ›æ°”å†™çš„æ­£æ–‡æ›´å¥½ã€‚\n\n2. å®ç”¨è§’åº¦æ˜¯å·®ä¸å¤šï¼ˆä½†è·Ÿç¼–è¯‘å™¨ä¼˜åŒ–ç¨‹åº¦æœ‰å…³ï¼‰ã€‚æœ‰ä¸€ä¸ªå°åŒºåˆ«æ˜¯ç”¨ Obj&amp;&amp; å¯ä»¥æ¥æ”¶ Obj çš„å­ç±»å¯¹è±¡ã€‚ç”¨ Obj åˆ™ä¼šå‘ç”Ÿå¯¹è±¡åˆ‡å‰²ï¼Œä¸è¡Œã€‚\n\n3. C++17 çš„ä¸€æ¡æ–°è§„åˆ™æ˜¯ï¼Œåœ¨ä½ è¯´çš„æƒ…å†µä¸‹ç¼–è¯‘å™¨å¿…é¡»è¿›è¡Œè¿”å›å€¼ä¼˜åŒ–ï¼Œä¸è¦æ±‚å¯¹è±¡å¯æ‹·è´æˆ–ç§»åŠ¨ã€‚ä¹‹å‰çš„è§„åˆ™æ˜¯ä¸ç®¡ç¼–è¯‘å™¨èƒ½ä¸èƒ½ä¼˜åŒ–ï¼Œè¯­è¨€è®¤ä¸ºè¿™å„¿å‘ç”Ÿäº†å¯¹è±¡æ‹·è´æˆ–ç§»åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1595207730,"ip_address":"","comment_id":235569,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ã€‚\n1. æ‚¨èƒ½å¦ä»‹ç»ä¸€ä¸‹å®šä¹‰æ‰€è°“â€œåŠæ­£åˆ™å¯¹è±¡â€çš„æ„ä¹‰ï¼Ÿ\n\n2. æˆ‘æµ‹è¯•äº†ä¸€ä¸‹æ‚¨åœ¨ä»‹ç»ç§»åŠ¨ä¸€ç« æåˆ°çš„ä½¿ç”¨ auto&amp;&amp; å»¶é•¿prvalueç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•:\nauto&amp;&amp; obj = get_obj();\nå‘ç°å…¶å’Œä½¿ç”¨autoè·å¾—è¿™ä¸ªprvalueçš„ä»£ç æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼š\nObj obj = get_obj();\nè¿™ç§ç­‰ä»·ä¸ä»…é™äºåœ¨è·å¾—Objå®ä¾‹ä¹‹åçš„ä½¿ç”¨èŒƒå›´å’Œæ–¹å¼å®Œå…¨ä¸€æ ·ï¼Œå…¶åœ¨get_obj()å†…éƒ¨å¯¹Objçš„æ„é€ å’Œä¼ é€’ï¼ˆæ— è®ºæ˜¯å¦æ¿€æ´»NRVOï¼‰ä¹Ÿå®Œå…¨ä¸€æ ·ã€‚å½“ç„¶åœ¨æ±‡ç¼–å±‚é¢è¿˜æ˜¯æœ‰ä¸€äº›ä¸åŒï¼Œå°±æ˜¯çœ‹ä¸å¤ªæ‡‚T_T\n\n3. å¦å¤–ï¼Œæˆ‘æµ‹è¯•äº†ä¸€ä¸‹NRVOçš„ä»£ç ï¼Œå‘ç°äº†ä¸€ä¸ªæŒºæœ‰æ„æ€çš„æƒ…å†µï¼Œåœ¨C++14ä¸‹ï¼Œå½¢å¦‚\nA get_A_directly() {\n  return A{};\n}\nè¿™æ ·çš„ä»£ç ï¼Œç¡®å®åªä½¿ç”¨äº†é»˜è®¤æ„é€ äº†ä¸€æ¬¡ï¼Œæ²¡æœ‰å…¶å®ƒç§»åŠ¨å’Œå¤åˆ¶ã€‚ä½†æ˜¯å¦‚æœAä¸æä¾›ç§»åŠ¨å’Œdeleteæ‰å¤åˆ¶æ„é€ ï¼Œç¼–è¯‘ä¸èƒ½é€šè¿‡ã€‚GCCå’Œclangéƒ½å¦‚æ­¤ã€‚â€œæœªä½¿ç”¨ä½†å¿…é¡»æä¾›â€ï¼Œå“ˆå“ˆï¼Œå¥½åƒè¿èƒŒäº†â€œæœªä½¿ç”¨å°±ä¸éœ€è¦è´Ÿæ‹…æˆæœ¬â€çš„åŸåˆ™ï¼šï¼‰","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515573,"discussion_content":"ä¸åªæ˜¯èƒ½ï¼Œè€Œæ˜¯å¿…é¡»ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613629876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163324,"user_name":"nelson","can_delete":false,"product_type":"c1","uid":1271183,"ip_address":"","ucode":"773BE75A23C1C9","user_header":"","comment_is_top":false,"comment_ctime":1576685734,"is_pvip":false,"replies":[{"id":62146,"content":"å¤šè°¢ã€‚å·²ä¿®æ­£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576736031,"ip_address":"","comment_id":163324,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æ–‡ç¨¿ä¸­çš„ä»£ç ç‰‡æ®µ\nec = multiply(&amp;temp, a, b); \nif (result != SUCCESS) \n{ \n  goto end; \n}\n\nresult åº”è¯¥æ˜¯ ecå§","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501770,"discussion_content":"1. è¿˜æ˜¯çœ‹æ­£æ–‡ã€‚æˆ‘ä¸å¯èƒ½è¿™å„¿è¯´ä¸€ä¸¤å¥å°±æ¯”æˆ‘èŠ±åŠ›æ°”å†™çš„æ­£æ–‡æ›´å¥½ã€‚\n\n2. å®ç”¨è§’åº¦æ˜¯å·®ä¸å¤šï¼ˆä½†è·Ÿç¼–è¯‘å™¨ä¼˜åŒ–ç¨‹åº¦æœ‰å…³ï¼‰ã€‚æœ‰ä¸€ä¸ªå°åŒºåˆ«æ˜¯ç”¨ Obj&amp;amp;&amp;amp; å¯ä»¥æ¥æ”¶ Obj çš„å­ç±»å¯¹è±¡ã€‚ç”¨ Obj åˆ™ä¼šå‘ç”Ÿå¯¹è±¡åˆ‡å‰²ï¼Œä¸è¡Œã€‚\n\n3. C++17 çš„ä¸€æ¡æ–°è§„åˆ™æ˜¯ï¼Œåœ¨ä½ è¯´çš„æƒ…å†µä¸‹ç¼–è¯‘å™¨å¿…é¡»è¿›è¡Œè¿”å›å€¼ä¼˜åŒ–ï¼Œä¸è¦æ±‚å¯¹è±¡å¯æ‹·è´æˆ–ç§»åŠ¨ã€‚ä¹‹å‰çš„è§„åˆ™æ˜¯ä¸ç®¡ç¼–è¯‘å™¨èƒ½ä¸èƒ½ä¼˜åŒ–ï¼Œè¯­è¨€è®¤ä¸ºè¿™å„¿å‘ç”Ÿäº†å¯¹è±¡æ‹·è´æˆ–ç§»åŠ¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595207730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381967,"user_name":"ç‹å­é¢","can_delete":false,"product_type":"c1","uid":1921193,"ip_address":"ç¾å›½","ucode":"D087C843D39100","user_header":"https://static001.geekbang.org/account/avatar/00/1d/50/a9/40a58c67.jpg","comment_is_top":false,"comment_ctime":1696392803,"is_pvip":false,"replies":[{"id":139156,"content":"è¿™æ˜¯ä¼ ç»Ÿçš„æƒ¯ç”¨æ³•ï¼Œä½¿ç”¨åœºæ™¯é€šå¸¸å°±æ˜¯å¦‚æ­¤ã€‚å› ä¸ºåç»­è¦ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡ä¸èƒ½é»˜è®¤æ„é€ ï¼Œä»£ç å°±ä¼šæ¯”è¾ƒå•°å—¦ï¼Œåšä¸å¿…è¦çš„åŠ¨ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1696637101,"ip_address":"ä¸Šæµ·","comment_id":381967,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"&quot;è¿™ç§åšæ³•æ„å‘³ç€å¯¹è±¡å¯ä»¥é»˜è®¤æ„é€ ï¼ˆç”šè‡³åªæ˜¯ä¸€ä¸ªç»“æ„ï¼‰ï¼Œä»£ç ä¸€èˆ¬ä½¿ç”¨é”™è¯¯ç è€Œéå¼‚å¸¸ã€‚&quot;è¿™é‡Œè€å¸ˆä¸ºä»€ä¹ˆç‰¹æ„æŒ‡å‡ºè¿™ç‚¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478348,"discussion_content":"å¤šè°¢ã€‚å·²ä¿®æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576736031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176978,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","comment_is_top":false,"comment_ctime":1581240396,"is_pvip":false,"replies":[{"id":68680,"content":"æ²¡æœ‰å¯ç”¨ C++17 æ ‡å‡†å§ï¼Ÿ\n\nåº”è¯¥æ˜¯ä¸Šé¢è¿™ç§æƒ…å†µã€‚ä¸æ˜¯çš„è¯ï¼Œè¯·æè¿°å…·ä½“çš„ç¼–è¯‘å™¨ç‰ˆæœ¬å’Œç¼–è¯‘çš„å‘½ä»¤è¡Œå‚æ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581245369,"ip_address":"","comment_id":176978,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å…³äºè¿”å›å€¼ä¼˜åŒ–çš„å®éªŒæˆ‘ä»¬å°±åšåˆ°è¿™é‡Œã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¯•éªŒä¸€ä¸‹æŠŠç§»åŠ¨æ„é€ å‡½æ•°åˆ é™¤ï¼š\nA(A&amp;&amp;)=delete æˆ‘ä»¬å¯ä»¥ç«‹å³çœ‹åˆ°â€œCopy Aâ€å‡ºç°åœ¨äº†ç»“æœè¾“å‡ºä¸­ï¼Œè¯´æ˜ç›®å‰ç»“æœå˜æˆæ‹·è´æ„é€ äº†ã€‚\n\nè¿™é‡Œæˆ‘ä¿®æ”¹æˆA(A&amp;&amp;) = deleteåï¼Œç¼–è¯‘æŠ¥é”™ï¼šæç¤ºï¼šerror: use of deleted function â€˜A::A(A&amp;&amp;)","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629068,"discussion_content":"è¿™æ˜¯ä¼ ç»Ÿçš„æƒ¯ç”¨æ³•ï¼Œä½¿ç”¨åœºæ™¯é€šå¸¸å°±æ˜¯å¦‚æ­¤ã€‚å› ä¸ºåç»­è¦ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡ä¸èƒ½é»˜è®¤æ„é€ ï¼Œä»£ç å°±ä¼šæ¯”è¾ƒå•°å—¦ï¼Œåšä¸å¿…è¦çš„åŠ¨ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696637101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168601,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1578120021,"is_pvip":false,"replies":[{"id":65375,"content":"ä½ è¿™ä¸å°±æ˜¯æˆ‘ä¸‹é¢ç»™å‡ºçš„ getA_named å—ï¼Ÿç¡®å®ä¸ä¼šæ‹·è´å•Šï¼Œæˆ‘è¿™ä¸€è®²å°±æ˜¯è¿™ä¹ˆå†™çš„ã€‚å°±æ˜¯è®©ä½ çœ‹åˆ°ï¼Œè¿”å›å€¼ä¼˜åŒ–åœ¨è¿™å„¿èµ·çš„ä½œç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578124674,"ip_address":"","comment_id":168601,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"#include &lt;iostream&gt;\n  2 using namespace std;\n  3 &#47;&#47; Can copy and move\n  4 class A {\n  5         public:\n  6                 A() {\n  7                         cout &lt;&lt; &quot;Create A\\n&quot;;\n  8                 }\n  9                 ~A() {\n 10                         cout &lt;&lt; &quot;Destroy A\\n&quot;;\n 11                 }\n 12                 A(const A&amp;) {\n 13                         cout &lt;&lt; &quot;Copy A\\n&quot;;\n 14                 }\n 15                 A(A&amp;&amp;) { cout &lt;&lt; &quot;Move A\\n&quot;; }\n 16 };\n 17 A getA_unnamed(){\n 18 &#47;&#47;      return A();\n 19     A a;\n 20     return a;\n 21 }\n 22 int main(){\n 23         auto a = getA_unnamed();\n 24 }\ng++ main.cpp\n.&#47;a.out ä¹Ÿä¸ä¼šæ‰§è¡Œcopyæ“ä½œå‘¢ï¼Ÿæˆ‘çš„æ“ä½œç³»ç»Ÿæ˜¯ubuntu","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483266,"discussion_content":"æ²¡æœ‰å¯ç”¨ C++17 æ ‡å‡†å§ï¼Ÿ\n\nåº”è¯¥æ˜¯ä¸Šé¢è¿™ç§æƒ…å†µã€‚ä¸æ˜¯çš„è¯ï¼Œè¯·æè¿°å…·ä½“çš„ç¼–è¯‘å™¨ç‰ˆæœ¬å’Œç¼–è¯‘çš„å‘½ä»¤è¡Œå‚æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581245369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047043,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","nickname":"é£æ¸…æ‰¬","note":"","ucode":"651F1390B64953","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165527,"discussion_content":"...... A return statement with any other operand shall be used only in a function whose return type is not cv void; the return statement initializes the glvalue result or prvalue result object of the (explicit or implicit) function call by copy-initialization from the operand. ......\n\nè¿™ä¸ªè¯­ä¹‰ä¸Šçš„æ‹·è´åœ¨ C++17 é‡Œä¹Ÿè¿˜å­˜åœ¨ï¼Œå³ä½¿è¿™ä¸ªæ‹·è´è¢« RVO ä¼˜åŒ–æ‰ã€‚æ‰€ä»¥ï¼Œè¯­ä¹‰ä¸Šï¼Œè¿™é‡Œéœ€è¦ä¸€ä¸ª copy/move constructor ã€‚\n\n\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581299458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047043,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","nickname":"é£æ¸…æ‰¬","note":"","ucode":"651F1390B64953","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165522,"discussion_content":"\n#include <iostream>\n\nusing namespace std;\n\n// Can copy and move\nclass A {\npublic:\n  A() { cout << &#34;Create A\\n&#34;; }\n  ~A() { cout << &#34;Destroy A\\n&#34;; }\n  A(const A&amp;) { cout << &#34;Copy A\\n&#34;; }\n  A(A&amp;&amp;) = delete;\n};\n\nA getA_duang()\n{\n  A a1;\n  A a2;\n  if (rand() > 42) {\n    return a1;\n  } else {\n    return a2;\n  }\n}\n\nint main()\n{\n  auto a = getA_duang();\n  return 0;\n}\n\nç¼–è¯‘é€‰é¡¹åŠæŠ¥é”™ä¿¡æ¯ï¼š\n[root shared_ptr]#g++ -std=c++17 main.cpp\nmain.cpp: In function â€˜A getA_duang()â€™:\nmain.cpp:20:12: error: use of deleted function â€˜A::A(A&amp;&amp;)â€™\n     return a1;\n            ^~\nmain.cpp:12:3: note: declared here\n   A(A&amp;&amp;) = delete;\n   ^\nmain.cpp:22:12: error: use of deleted function â€˜A::A(A&amp;&amp;)â€™\n     return a2;\n            ^~\nmain.cpp:12:3: note: declared here\n   A(A&amp;&amp;) = delete;\n   ^\n\ng++ç‰ˆæœ¬ä¿¡æ¯ï¼š\n[root shared_ptr]#g++ --version\ng++ (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\nCopyright (C) 2017 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581299099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1047043,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","nickname":"é£æ¸…æ‰¬","note":"","ucode":"651F1390B64953","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":166722,"discussion_content":"åº”è¯¥æ˜¯GCC 7çš„bugã€‚æˆ‘å¤ç°äº†è¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶GCC 8å°±ç¼–è¯‘é€šè¿‡äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581424756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":165522,"ip_address":"","group_id":0},"score":166722,"extra":""}]}]},{"had_liked":false,"id":165041,"user_name":"petit_kayak","can_delete":false,"product_type":"c1","uid":1025214,"ip_address":"","ucode":"6889CCCBFA0180","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/be/39cc22f5.jpg","comment_is_top":false,"comment_ctime":1577151484,"is_pvip":false,"replies":[{"id":62942,"content":"å…ˆè¯•è¯•å‡çº§ç¯å¢ƒã€å……åˆ†æµ‹è¯•çœ‹çœ‹æœ‰æ²¡æœ‰é—®é¢˜ã€‚ä¹Ÿè®¸æ²¡é—®é¢˜å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577181695,"ip_address":"","comment_id":165041,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"ä¸€ç›´ä½¿ç”¨å…±äº«æŒ‡é’ˆï¼Œéå¸¸å–œæ¬¢è¿™äº›æ–°çš„ä¼˜åŒ–ï¼Œèƒ½ç®€åŒ–éå¸¸å¤šä»£ç ï¼Œä½†ç°å®æ˜¯éœ€è¦è€ƒè™‘å¾ˆå¤šæ— æ³•å‡çº§çš„æ—§ç¯å¢ƒï¼Œä¸èƒ½éšä¾¿ä½¿ç”¨c++11åŠä»¥åçš„å†™æ³•","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480265,"discussion_content":"ä½ è¿™ä¸å°±æ˜¯æˆ‘ä¸‹é¢ç»™å‡ºçš„ getA_named å—ï¼Ÿç¡®å®ä¸ä¼šæ‹·è´å•Šï¼Œæˆ‘è¿™ä¸€è®²å°±æ˜¯è¿™ä¹ˆå†™çš„ã€‚å°±æ˜¯è®©ä½ çœ‹åˆ°ï¼Œè¿”å›å€¼ä¼˜åŒ–åœ¨è¿™å„¿èµ·çš„ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578124674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":371472,"user_name":"TJJ","can_delete":false,"product_type":"c1","uid":3578564,"ip_address":"ä¸Šæµ·","ucode":"DC8A0008A9C6A2","user_header":"https://static001.geekbang.org/account/avatar/00/36/9a/c4/99c6f985.jpg","comment_is_top":false,"comment_ctime":1679978020,"is_pvip":false,"replies":[{"id":135583,"content":"æ˜¯çš„ï¼Œè¿™ä¹Ÿæ˜¯å‡ºå‚å¾ˆä¸æ–¹ä¾¿çš„åœ°æ–¹ä¹‹ä¸€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1680089026,"ip_address":"å¹¿ä¸œ","comment_id":371472,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"ç”¨æˆå‘˜å‡½æ•°è¿”å›å€¼ï¼Œå¯ä»¥æå‡ºé“¾å¼è°ƒç”¨ï¼Œç”¨èµ·æ¥å¾ˆæ–¹ä¾¿","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":611443,"discussion_content":"æ˜¯çš„ï¼Œè¿™ä¹Ÿæ˜¯å‡ºå‚å¾ˆä¸æ–¹ä¾¿çš„åœ°æ–¹ä¹‹ä¸€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1680089026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":347750,"user_name":"Cafba","can_delete":false,"product_type":"c1","uid":3018755,"ip_address":"","ucode":"29BD3BD7143D41","user_header":"","comment_is_top":false,"comment_ctime":1654396337,"is_pvip":false,"replies":[{"id":126775,"content":"Move å’Œ Copy ä¹Ÿæ„å‘³ç€æ„é€ ï¼Œåˆ†åˆ«è°ƒç”¨äº†ç§»åŠ¨æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•°ã€‚ä¸èƒ½è¯´â€œä¸éœ€è¦æ„é€ å‡½æ•°åˆå§‹åŒ–â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1654425382,"ip_address":"","comment_id":347750,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·æ•™ä¸€ä¸‹è¿™é‡Œå‡ºç°ä¸¤æ¬¡æ„é€ ï¼Œä½†ææ„äº†ä¸‰æ¬¡çš„åŸå› ï¼Œæˆ‘çš„æ€è€ƒæ˜¯å¯¹äºauto a = getA_duang();\nå‡½æ•°ä½“å†…ä¸¤ä¸ªä¸´æ—¶å¯¹è±¡ç”Ÿæˆä¸ææ„å¯¹åº”ç€ä¸¤æ¬¡ï¼Œå½“è¿”å›æ—¶å› ä¸ºç§»åŠ¨æ„é€ ï¼Œä¸éœ€è¦æ‹·è´ï¼Œç›´æ¥å°†ä¸€ä¸ªä¸´æ—¶å¯¹è±¡çš„æ‰€æœ‰æƒè½¬ç§»ç»™ç›®æ ‡aï¼ˆä¸”æ­¤æ—¶ä¿è¯ç€ä¸´æ—¶å¯¹è±¡ä»ç„¶å¤„äºå¯ææ„çŠ¶æ€ï¼‰ï¼Œæ­¤æ—¶è¿™ä¸ªç›®æ ‡aä¸éœ€è¦æ„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œä½†ä»ç„¶ææ„ï¼Œå› æ­¤å°‘äº†æ„é€ çš„ä¸€æ¬¡ææ„äº†ä¸‰æ¬¡ï¼Œè¿™æ ·ç†è§£å“ªé‡Œæœ‰é—®é¢˜\nCreate A\nCreate A\nMove A\nDestroy A\nDestroy A\nDestroy A","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574896,"discussion_content":"Move å’Œ Copy ä¹Ÿæ„å‘³ç€æ„é€ ï¼Œåˆ†åˆ«è°ƒç”¨äº†ç§»åŠ¨æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•°ã€‚ä¸èƒ½è¯´â€œä¸éœ€è¦æ„é€ å‡½æ•°åˆå§‹åŒ–â€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654425382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235888,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1595235093,"is_pvip":false,"replies":[{"id":87146,"content":"æ˜¯ï¼Œè¿™äº›æ¦‚å¿µéƒ½æ˜¯æœ‰æ·±åˆ»æ•°å­¦èƒŒæ™¯çš„ã€‚è¦è¿›ä¸€æ­¥äº†è§£çš„è¯ï¼Œæˆ‘æ¨è From Mathematics to Generic Programmingï¼ŒSTL ä¹‹çˆ¶çš„å¤§ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1595252157,"ip_address":"","comment_id":235888,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ã€‚\næŠ±æ­‰æˆ‘ä¹‹å‰çš„çš„æé—®æè¿°çš„ä¸å¤ªæ¸…æ¥šã€‚æ‚¨æ–‡ä¸­æ¸…æ¥šåœ°æè¿°äº†semi-regularæ˜¯â€œå¦‚ä½•â€å®šä¹‰çš„ã€‚æˆ‘å¥½å¥‡çš„æ˜¯ï¼Œè¿™æ ·å®šä¹‰çš„æ„ä¹‰æ˜¯å•¥ï¼Œå¯¹äºcopiableå¢åŠ ä¸€ä¸ªaliasçš„æ„ä¹‰ä½•åœ¨ï¼Ÿå¯¹åº”çš„regularå®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ\nåœ¨ç½‘ä¸Šä»”ç»†æœç´¢äº†ä¸€ä¸‹ï¼Œä¼¼ä¹æ‰¾åˆ°äº†æºå¤´ï¼š\nhttps:&#47;&#47;www.slideshare.net&#47;ilio-catallo&#47;regular-types-in-c \nè¿™ä¸€ä¸ªpptæè¿°äº†regularçš„å®šä¹‰ï¼Œä»¥åŠç”±æ­¤å¼•ç”³å‡ºæ¥çš„semi-regularã€‚è¿™é‡Œçš„å„ç§å®šä¹‰æ˜¯éå¸¸ä¸¥è°¨çš„ï¼Œç±»ä¼¼äºæ•°åŸŸåŠå…¶æ»¡è¶³æ“ä½œçš„æ‰©å±•ã€‚\nhttps:&#47;&#47;www.modernescpp.com&#47;index.php&#47;c-20-define-the-concept-regular-and-semiregular\nè¿™ç¯‡æ–‡ç« ç»“åˆäº†C++ std20ä¸­conceptä»‹ç»äº†ä¸€ä¸‹regularå’Œsemi-regularå®šä¹‰çš„å®æ“ã€‚å…¶ä¸­æ·±åº¦ä½¿ç”¨äº†æ‚¨ä»‹ç»çš„SFINAEã€‚\nä»ä¸­ä¼¼ä¹éšç„¶å¯ä»¥çœ‹å‡ºC++æˆä¸ºä¸€ä¸ªå…¬å¼è¯­è¨€çš„å¯èƒ½æ€§ã€‚","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574896,"discussion_content":"Move å’Œ Copy ä¹Ÿæ„å‘³ç€æ„é€ ï¼Œåˆ†åˆ«è°ƒç”¨äº†ç§»åŠ¨æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•°ã€‚ä¸èƒ½è¯´â€œä¸éœ€è¦æ„é€ å‡½æ•°åˆå§‹åŒ–â€ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1654425382,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":278952,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1613480109,"is_pvip":false,"replies":[{"id":101423,"content":"ä¸åªæ˜¯èƒ½ï¼Œè€Œæ˜¯å¿…é¡»ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1613629876,"ip_address":"","comment_id":278952,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"åœ¨ C++14 åŠä¹‹å‰ç¡®å®æ˜¯è¿™æ ·çš„ã€‚ä½†ä» C++17 å¼€å§‹ï¼Œå¯¹äºç±»ä¼¼äº getA_unnamed è¿™æ ·çš„æƒ…å†µï¼Œå³ä½¿å¯¹è±¡ä¸å¯æ‹·è´ã€ä¸å¯ç§»åŠ¨ï¼Œè¿™ä¸ªå¯¹è±¡ä»ç„¶æ˜¯å¯ä»¥è¢«è¿”å›çš„ ----è¿™æ ·çš„æƒ…å†µå°±æ˜¯æŒ‡èƒ½è¢«è¿”å›å€¼ä¼˜åŒ–çš„å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":515573,"discussion_content":"ä¸åªæ˜¯èƒ½ï¼Œè€Œæ˜¯å¿…é¡»ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613629876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235569,"user_name":"zhengfan","can_delete":false,"product_type":"c1","uid":1020160,"ip_address":"","ucode":"B3AC0E10BF7A14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg","comment_is_top":false,"comment_ctime":1595088211,"is_pvip":false,"replies":[{"id":87065,"content":"1. è¿˜æ˜¯çœ‹æ­£æ–‡ã€‚æˆ‘ä¸å¯èƒ½è¿™å„¿è¯´ä¸€ä¸¤å¥å°±æ¯”æˆ‘èŠ±åŠ›æ°”å†™çš„æ­£æ–‡æ›´å¥½ã€‚\n\n2. å®ç”¨è§’åº¦æ˜¯å·®ä¸å¤šï¼ˆä½†è·Ÿç¼–è¯‘å™¨ä¼˜åŒ–ç¨‹åº¦æœ‰å…³ï¼‰ã€‚æœ‰ä¸€ä¸ªå°åŒºåˆ«æ˜¯ç”¨ Obj&amp;&amp; å¯ä»¥æ¥æ”¶ Obj çš„å­ç±»å¯¹è±¡ã€‚ç”¨ Obj åˆ™ä¼šå‘ç”Ÿå¯¹è±¡åˆ‡å‰²ï¼Œä¸è¡Œã€‚\n\n3. C++17 çš„ä¸€æ¡æ–°è§„åˆ™æ˜¯ï¼Œåœ¨ä½ è¯´çš„æƒ…å†µä¸‹ç¼–è¯‘å™¨å¿…é¡»è¿›è¡Œè¿”å›å€¼ä¼˜åŒ–ï¼Œä¸è¦æ±‚å¯¹è±¡å¯æ‹·è´æˆ–ç§»åŠ¨ã€‚ä¹‹å‰çš„è§„åˆ™æ˜¯ä¸ç®¡ç¼–è¯‘å™¨èƒ½ä¸èƒ½ä¼˜åŒ–ï¼Œè¯­è¨€è®¤ä¸ºè¿™å„¿å‘ç”Ÿäº†å¯¹è±¡æ‹·è´æˆ–ç§»åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1595207730,"ip_address":"","comment_id":235569,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ã€‚\n1. æ‚¨èƒ½å¦ä»‹ç»ä¸€ä¸‹å®šä¹‰æ‰€è°“â€œåŠæ­£åˆ™å¯¹è±¡â€çš„æ„ä¹‰ï¼Ÿ\n\n2. æˆ‘æµ‹è¯•äº†ä¸€ä¸‹æ‚¨åœ¨ä»‹ç»ç§»åŠ¨ä¸€ç« æåˆ°çš„ä½¿ç”¨ auto&amp;&amp; å»¶é•¿prvalueç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•:\nauto&amp;&amp; obj = get_obj();\nå‘ç°å…¶å’Œä½¿ç”¨autoè·å¾—è¿™ä¸ªprvalueçš„ä»£ç æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼š\nObj obj = get_obj();\nè¿™ç§ç­‰ä»·ä¸ä»…é™äºåœ¨è·å¾—Objå®ä¾‹ä¹‹åçš„ä½¿ç”¨èŒƒå›´å’Œæ–¹å¼å®Œå…¨ä¸€æ ·ï¼Œå…¶åœ¨get_obj()å†…éƒ¨å¯¹Objçš„æ„é€ å’Œä¼ é€’ï¼ˆæ— è®ºæ˜¯å¦æ¿€æ´»NRVOï¼‰ä¹Ÿå®Œå…¨ä¸€æ ·ã€‚å½“ç„¶åœ¨æ±‡ç¼–å±‚é¢è¿˜æ˜¯æœ‰ä¸€äº›ä¸åŒï¼Œå°±æ˜¯çœ‹ä¸å¤ªæ‡‚T_T\n\n3. å¦å¤–ï¼Œæˆ‘æµ‹è¯•äº†ä¸€ä¸‹NRVOçš„ä»£ç ï¼Œå‘ç°äº†ä¸€ä¸ªæŒºæœ‰æ„æ€çš„æƒ…å†µï¼Œåœ¨C++14ä¸‹ï¼Œå½¢å¦‚\nA get_A_directly() {\n  return A{};\n}\nè¿™æ ·çš„ä»£ç ï¼Œç¡®å®åªä½¿ç”¨äº†é»˜è®¤æ„é€ äº†ä¸€æ¬¡ï¼Œæ²¡æœ‰å…¶å®ƒç§»åŠ¨å’Œå¤åˆ¶ã€‚ä½†æ˜¯å¦‚æœAä¸æä¾›ç§»åŠ¨å’Œdeleteæ‰å¤åˆ¶æ„é€ ï¼Œç¼–è¯‘ä¸èƒ½é€šè¿‡ã€‚GCCå’Œclangéƒ½å¦‚æ­¤ã€‚â€œæœªä½¿ç”¨ä½†å¿…é¡»æä¾›â€ï¼Œå“ˆå“ˆï¼Œå¥½åƒè¿èƒŒäº†â€œæœªä½¿ç”¨å°±ä¸éœ€è¦è´Ÿæ‹…æˆæœ¬â€çš„åŸåˆ™ï¼šï¼‰","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501770,"discussion_content":"1. è¿˜æ˜¯çœ‹æ­£æ–‡ã€‚æˆ‘ä¸å¯èƒ½è¿™å„¿è¯´ä¸€ä¸¤å¥å°±æ¯”æˆ‘èŠ±åŠ›æ°”å†™çš„æ­£æ–‡æ›´å¥½ã€‚\n\n2. å®ç”¨è§’åº¦æ˜¯å·®ä¸å¤šï¼ˆä½†è·Ÿç¼–è¯‘å™¨ä¼˜åŒ–ç¨‹åº¦æœ‰å…³ï¼‰ã€‚æœ‰ä¸€ä¸ªå°åŒºåˆ«æ˜¯ç”¨ Obj&amp;amp;&amp;amp; å¯ä»¥æ¥æ”¶ Obj çš„å­ç±»å¯¹è±¡ã€‚ç”¨ Obj åˆ™ä¼šå‘ç”Ÿå¯¹è±¡åˆ‡å‰²ï¼Œä¸è¡Œã€‚\n\n3. C++17 çš„ä¸€æ¡æ–°è§„åˆ™æ˜¯ï¼Œåœ¨ä½ è¯´çš„æƒ…å†µä¸‹ç¼–è¯‘å™¨å¿…é¡»è¿›è¡Œè¿”å›å€¼ä¼˜åŒ–ï¼Œä¸è¦æ±‚å¯¹è±¡å¯æ‹·è´æˆ–ç§»åŠ¨ã€‚ä¹‹å‰çš„è§„åˆ™æ˜¯ä¸ç®¡ç¼–è¯‘å™¨èƒ½ä¸èƒ½ä¼˜åŒ–ï¼Œè¯­è¨€è®¤ä¸ºè¿™å„¿å‘ç”Ÿäº†å¯¹è±¡æ‹·è´æˆ–ç§»åŠ¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595207730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163324,"user_name":"nelson","can_delete":false,"product_type":"c1","uid":1271183,"ip_address":"","ucode":"773BE75A23C1C9","user_header":"","comment_is_top":false,"comment_ctime":1576685734,"is_pvip":false,"replies":[{"id":62146,"content":"å¤šè°¢ã€‚å·²ä¿®æ­£ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576736031,"ip_address":"","comment_id":163324,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æ–‡ç¨¿ä¸­çš„ä»£ç ç‰‡æ®µ\nec = multiply(&amp;temp, a, b); \nif (result != SUCCESS) \n{ \n  goto end; \n}\n\nresult åº”è¯¥æ˜¯ ecå§","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478348,"discussion_content":"å¤šè°¢ã€‚å·²ä¿®æ­£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576736031,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":381967,"user_name":"ç‹å­é¢","can_delete":false,"product_type":"c1","uid":1921193,"ip_address":"ç¾å›½","ucode":"D087C843D39100","user_header":"https://static001.geekbang.org/account/avatar/00/1d/50/a9/40a58c67.jpg","comment_is_top":false,"comment_ctime":1696392803,"is_pvip":false,"replies":[{"id":139156,"content":"è¿™æ˜¯ä¼ ç»Ÿçš„æƒ¯ç”¨æ³•ï¼Œä½¿ç”¨åœºæ™¯é€šå¸¸å°±æ˜¯å¦‚æ­¤ã€‚å› ä¸ºåç»­è¦ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡ä¸èƒ½é»˜è®¤æ„é€ ï¼Œä»£ç å°±ä¼šæ¯”è¾ƒå•°å—¦ï¼Œåšä¸å¿…è¦çš„åŠ¨ä½œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1696637101,"ip_address":"ä¸Šæµ·","comment_id":381967,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"&quot;è¿™ç§åšæ³•æ„å‘³ç€å¯¹è±¡å¯ä»¥é»˜è®¤æ„é€ ï¼ˆç”šè‡³åªæ˜¯ä¸€ä¸ªç»“æ„ï¼‰ï¼Œä»£ç ä¸€èˆ¬ä½¿ç”¨é”™è¯¯ç è€Œéå¼‚å¸¸ã€‚&quot;è¿™é‡Œè€å¸ˆä¸ºä»€ä¹ˆç‰¹æ„æŒ‡å‡ºè¿™ç‚¹ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":629068,"discussion_content":"è¿™æ˜¯ä¼ ç»Ÿçš„æƒ¯ç”¨æ³•ï¼Œä½¿ç”¨åœºæ™¯é€šå¸¸å°±æ˜¯å¦‚æ­¤ã€‚å› ä¸ºåç»­è¦ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡ä¸èƒ½é»˜è®¤æ„é€ ï¼Œä»£ç å°±ä¼šæ¯”è¾ƒå•°å—¦ï¼Œåšä¸å¿…è¦çš„åŠ¨ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1696637101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":176978,"user_name":"é£æ¸…æ‰¬","can_delete":false,"product_type":"c1","uid":1047043,"ip_address":"","ucode":"651F1390B64953","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","comment_is_top":false,"comment_ctime":1581240396,"is_pvip":false,"replies":[{"id":68680,"content":"æ²¡æœ‰å¯ç”¨ C++17 æ ‡å‡†å§ï¼Ÿ\n\nåº”è¯¥æ˜¯ä¸Šé¢è¿™ç§æƒ…å†µã€‚ä¸æ˜¯çš„è¯ï¼Œè¯·æè¿°å…·ä½“çš„ç¼–è¯‘å™¨ç‰ˆæœ¬å’Œç¼–è¯‘çš„å‘½ä»¤è¡Œå‚æ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581245369,"ip_address":"","comment_id":176978,"utype":1}],"discussion_count":4,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å…³äºè¿”å›å€¼ä¼˜åŒ–çš„å®éªŒæˆ‘ä»¬å°±åšåˆ°è¿™é‡Œã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¯•éªŒä¸€ä¸‹æŠŠç§»åŠ¨æ„é€ å‡½æ•°åˆ é™¤ï¼š\nA(A&amp;&amp;)=delete æˆ‘ä»¬å¯ä»¥ç«‹å³çœ‹åˆ°â€œCopy Aâ€å‡ºç°åœ¨äº†ç»“æœè¾“å‡ºä¸­ï¼Œè¯´æ˜ç›®å‰ç»“æœå˜æˆæ‹·è´æ„é€ äº†ã€‚\n\nè¿™é‡Œæˆ‘ä¿®æ”¹æˆA(A&amp;&amp;) = deleteåï¼Œç¼–è¯‘æŠ¥é”™ï¼šæç¤ºï¼šerror: use of deleted function â€˜A::A(A&amp;&amp;)","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483266,"discussion_content":"æ²¡æœ‰å¯ç”¨ C++17 æ ‡å‡†å§ï¼Ÿ\n\nåº”è¯¥æ˜¯ä¸Šé¢è¿™ç§æƒ…å†µã€‚ä¸æ˜¯çš„è¯ï¼Œè¯·æè¿°å…·ä½“çš„ç¼–è¯‘å™¨ç‰ˆæœ¬å’Œç¼–è¯‘çš„å‘½ä»¤è¡Œå‚æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581245369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047043,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","nickname":"é£æ¸…æ‰¬","note":"","ucode":"651F1390B64953","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165527,"discussion_content":"...... A return statement with any other operand shall be used only in a function whose return type is not cv void; the return statement initializes the glvalue result or prvalue result object of the (explicit or implicit) function call by copy-initialization from the operand. ......\n\nè¿™ä¸ªè¯­ä¹‰ä¸Šçš„æ‹·è´åœ¨ C++17 é‡Œä¹Ÿè¿˜å­˜åœ¨ï¼Œå³ä½¿è¿™ä¸ªæ‹·è´è¢« RVO ä¼˜åŒ–æ‰ã€‚æ‰€ä»¥ï¼Œè¯­ä¹‰ä¸Šï¼Œè¿™é‡Œéœ€è¦ä¸€ä¸ª copy/move constructor ã€‚\n\n\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581299458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047043,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","nickname":"é£æ¸…æ‰¬","note":"","ucode":"651F1390B64953","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165522,"discussion_content":"\n#include <iostream>\n\nusing namespace std;\n\n// Can copy and move\nclass A {\npublic:\n  A() { cout << &#34;Create A\\n&#34;; }\n  ~A() { cout << &#34;Destroy A\\n&#34;; }\n  A(const A&amp;) { cout << &#34;Copy A\\n&#34;; }\n  A(A&amp;&amp;) = delete;\n};\n\nA getA_duang()\n{\n  A a1;\n  A a2;\n  if (rand() > 42) {\n    return a1;\n  } else {\n    return a2;\n  }\n}\n\nint main()\n{\n  auto a = getA_duang();\n  return 0;\n}\n\nç¼–è¯‘é€‰é¡¹åŠæŠ¥é”™ä¿¡æ¯ï¼š\n[root shared_ptr]#g++ -std=c++17 main.cpp\nmain.cpp: In function â€˜A getA_duang()â€™:\nmain.cpp:20:12: error: use of deleted function â€˜A::A(A&amp;&amp;)â€™\n     return a1;\n            ^~\nmain.cpp:12:3: note: declared here\n   A(A&amp;&amp;) = delete;\n   ^\nmain.cpp:22:12: error: use of deleted function â€˜A::A(A&amp;&amp;)â€™\n     return a2;\n            ^~\nmain.cpp:12:3: note: declared here\n   A(A&amp;&amp;) = delete;\n   ^\n\ng++ç‰ˆæœ¬ä¿¡æ¯ï¼š\n[root shared_ptr]#g++ --version\ng++ (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\nCopyright (C) 2017 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581299099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1047043,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg","nickname":"é£æ¸…æ‰¬","note":"","ucode":"651F1390B64953","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":166722,"discussion_content":"åº”è¯¥æ˜¯GCC 7çš„bugã€‚æˆ‘å¤ç°äº†è¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶GCC 8å°±ç¼–è¯‘é€šè¿‡äº†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581424756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":165522,"ip_address":"","group_id":0},"score":166722,"extra":""}]}]},{"had_liked":false,"id":168601,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1578120021,"is_pvip":false,"replies":[{"id":65375,"content":"ä½ è¿™ä¸å°±æ˜¯æˆ‘ä¸‹é¢ç»™å‡ºçš„ getA_named å—ï¼Ÿç¡®å®ä¸ä¼šæ‹·è´å•Šï¼Œæˆ‘è¿™ä¸€è®²å°±æ˜¯è¿™ä¹ˆå†™çš„ã€‚å°±æ˜¯è®©ä½ çœ‹åˆ°ï¼Œè¿”å›å€¼ä¼˜åŒ–åœ¨è¿™å„¿èµ·çš„ä½œç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578124674,"ip_address":"","comment_id":168601,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"#include &lt;iostream&gt;\n  2 using namespace std;\n  3 &#47;&#47; Can copy and move\n  4 class A {\n  5         public:\n  6                 A() {\n  7                         cout &lt;&lt; &quot;Create A\\n&quot;;\n  8                 }\n  9                 ~A() {\n 10                         cout &lt;&lt; &quot;Destroy A\\n&quot;;\n 11                 }\n 12                 A(const A&amp;) {\n 13                         cout &lt;&lt; &quot;Copy A\\n&quot;;\n 14                 }\n 15                 A(A&amp;&amp;) { cout &lt;&lt; &quot;Move A\\n&quot;; }\n 16 };\n 17 A getA_unnamed(){\n 18 &#47;&#47;      return A();\n 19     A a;\n 20     return a;\n 21 }\n 22 int main(){\n 23         auto a = getA_unnamed();\n 24 }\ng++ main.cpp\n.&#47;a.out ä¹Ÿä¸ä¼šæ‰§è¡Œcopyæ“ä½œå‘¢ï¼Ÿæˆ‘çš„æ“ä½œç³»ç»Ÿæ˜¯ubuntu","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480265,"discussion_content":"ä½ è¿™ä¸å°±æ˜¯æˆ‘ä¸‹é¢ç»™å‡ºçš„ getA_named å—ï¼Ÿç¡®å®ä¸ä¼šæ‹·è´å•Šï¼Œæˆ‘è¿™ä¸€è®²å°±æ˜¯è¿™ä¹ˆå†™çš„ã€‚å°±æ˜¯è®©ä½ çœ‹åˆ°ï¼Œè¿”å›å€¼ä¼˜åŒ–åœ¨è¿™å„¿èµ·çš„ä½œç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578124674,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165041,"user_name":"petit_kayak","can_delete":false,"product_type":"c1","uid":1025214,"ip_address":"","ucode":"6889CCCBFA0180","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/be/39cc22f5.jpg","comment_is_top":false,"comment_ctime":1577151484,"is_pvip":false,"replies":[{"id":62942,"content":"å…ˆè¯•è¯•å‡çº§ç¯å¢ƒã€å……åˆ†æµ‹è¯•çœ‹çœ‹æœ‰æ²¡æœ‰é—®é¢˜ã€‚ä¹Ÿè®¸æ²¡é—®é¢˜å‘¢ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577181695,"ip_address":"","comment_id":165041,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"ä¸€ç›´ä½¿ç”¨å…±äº«æŒ‡é’ˆï¼Œéå¸¸å–œæ¬¢è¿™äº›æ–°çš„ä¼˜åŒ–ï¼Œèƒ½ç®€åŒ–éå¸¸å¤šä»£ç ï¼Œä½†ç°å®æ˜¯éœ€è¦è€ƒè™‘å¾ˆå¤šæ— æ³•å‡çº§çš„æ—§ç¯å¢ƒï¼Œä¸èƒ½éšä¾¿ä½¿ç”¨c++11åŠä»¥åçš„å†™æ³•","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478998,"discussion_content":"å…ˆè¯•è¯•å‡çº§ç¯å¢ƒã€å……åˆ†æµ‹è¯•çœ‹çœ‹æœ‰æ²¡æœ‰é—®é¢˜ã€‚ä¹Ÿè®¸æ²¡é—®é¢˜å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577181695,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164494,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1577008806,"is_pvip":false,"replies":[{"id":62549,"content":"å¯¹äºåŠŸèƒ½å’Œç‰ˆæœ¬çš„å…³ç³»ï¼Œè¿™ä¸ªé¡µé¢æ¯”è¾ƒå…¨ï¼š\n\nhttps:&#47;&#47;en.cppreference.com&#47;w&#47;cpp&#47;compiler_support","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577065381,"ip_address":"","comment_id":164494,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹c++xxä¸gccç‰ˆæœ¬çš„å¯¹åº”å…³ç³»ï¼Œè¿˜æœ‰è¿™èŠ‚æåˆ°çš„è¿”å›å€¼ä¼˜åŒ–åœ¨c++17ä¸­çš„ç»“æœä¸c++14åŠä¹‹å‰çš„ç»“æœ(ç¦ç”¨è¿”å›å€¼ä¼˜åŒ–ï¼Œç¼–è¯‘åçš„ç»“æœ)æ˜¯ä¸ä¸€æ ·çš„ï¼Œåƒè¿™ç§æœ‰æ²¡æœ‰å‚è€ƒèµ„æ–™å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":164332,"user_name":"èŠ±æ™¨å°‘å¹´","can_delete":false,"product_type":"c1","uid":1098987,"ip_address":"","ucode":"6AA3537A6BA10E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","comment_is_top":false,"comment_ctime":1576938566,"is_pvip":false,"replies":[{"id":62462,"content":"å¯¹ï¼Œæ˜¯è°ƒç”¨ç§»åŠ¨æ„é€ å˜æˆè°ƒç”¨æ‹·è´æ„é€ ï¼Œå¦‚æœåŸæ¥å°±ç›´æ¥è¿”å›å€¼ä¼˜åŒ–æ‰äº†ï¼Œé‚£ä¸ä¼šå˜åŒ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576994302,"ip_address":"","comment_id":164332,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å…³äºè¿”å›å€¼ä¼˜åŒ–çš„å®éªŒæˆ‘ä»¬å°±åšåˆ°è¿™é‡Œã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¯•éªŒä¸€ä¸‹æŠŠç§»åŠ¨æ„é€ å‡½æ•°åˆ é™¤ï¼š\n  A(A&amp;&amp;) = delete;\næˆ‘ä»¬å¯ä»¥ç«‹å³çœ‹åˆ°â€œCopy Aâ€å‡ºç°åœ¨äº†ç»“æœè¾“å‡ºä¸­ï¼Œè¯´æ˜ç›®å‰ç»“æœå˜æˆæ‹·è´æ„é€ äº†\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nè¯·é—®è¿™ç§æƒ…å†µè¯´çš„æ˜¯é’ˆå¯¹getA_duang()å‡½æ•°å§ï¼Ÿä¸åŒ…æ‹¬ getA_named() ç­‰å‡½æ•°å§","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478790,"discussion_content":"å¯¹äºåŠŸèƒ½å’Œç‰ˆæœ¬çš„å…³ç³»ï¼Œè¿™ä¸ªé¡µé¢æ¯”è¾ƒå…¨ï¼š\n\nhttps://en.cppreference.com/w/cpp/compiler_support","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577065381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163811,"user_name":"è¥¿é’¾é’¾","can_delete":false,"product_type":"c1","uid":1097722,"ip_address":"","ucode":"0EE77083636ED9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJV27QOK57cdpdh3E4hbArCOlccdtjCyWooF9fhjeSKAMo9SN1v9RODkrZUZD4RejjbdsqU2FIeMA/132","comment_is_top":false,"comment_ctime":1576806061,"is_pvip":false,"replies":[{"id":62310,"content":"VS 2017 ä¸‹ä¹Ÿèƒ½è¿‡çš„ã€‚ä½ æ²¡æœ‰æŒ‰ç¯å¢ƒè¦æ±‚é‡Œè¯´çš„åŠ ä¸Š &#47;std:c++17ã€‚äº†è§£ç»†èŠ‚ï¼Œå¯ä»¥çœ‹å‚è€ƒèµ„æ–™ [3]ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576818936,"ip_address":"","comment_id":163811,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"ä»¥ä¸‹çš„ä»£ç ä¸­ï¼Œæ— è®ºæ˜¯å°†æ‹·è´æ„é€ å‡½æ•°è¿˜æ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ç½®ä¸ºdeleteï¼Œéƒ½ä¸èƒ½æ­£å¸¸ç¼–è¯‘ï¼ˆvs2017ï¼‰ã€‚ä¸ºå•¥åªæ˜¯ä½¿ç”¨ä¸€æ¬¡æ„é€ å‡½æ•°ï¼Œè€å¸ˆèƒ½ç®€å•è®²ä¸‹è¿™ä¸ªåŸç†ä¹ˆï¼Ÿ\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n&#47;&#47; Can copy and move\nclass A {\npublic:\n  A() { cout &lt;&lt; &quot;Create A\\n&quot;; }\n  ~A() { cout &lt;&lt; &quot;Destroy A\\n&quot;; }\n  A(const A&amp;) { cout &lt;&lt; &quot;Copy A\\n&quot;; }\n  A(A&amp;&amp;) { cout &lt;&lt; &quot;Move A\\n&quot;; }\n};\n\nA getA_unnamed()\n{\n  return A();\n}\n\nint main()\n{\n  auto a = getA_unnamed();\n}","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478726,"discussion_content":"å¯¹ï¼Œæ˜¯è°ƒç”¨ç§»åŠ¨æ„é€ å˜æˆè°ƒç”¨æ‹·è´æ„é€ ï¼Œå¦‚æœåŸæ¥å°±ç›´æ¥è¿”å›å€¼ä¼˜åŒ–æ‰äº†ï¼Œé‚£ä¸ä¼šå˜åŒ–ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576994302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164543,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1577024930,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"åŠ å…¥äº†move assignmentåï¼Œé»˜è®¤æ˜¯è°ƒç”¨move assignmentè€Œä¸æ˜¯copy assignmentã€‚","like_count":2},{"had_liked":false,"id":278950,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1613479844,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"åœ¨ C++14 åŠä¹‹å‰ç¡®å®æ˜¯è¿™æ ·çš„ã€‚ä½†ä» C++17 å¼€å§‹ï¼Œå¯¹äºç±»ä¼¼äº getA_unnamed è¿™æ ·çš„æƒ…å†µï¼Œå³ä½¿å¯¹è±¡ä¸å¯æ‹·è´ã€ä¸å¯ç§»åŠ¨ï¼Œè¿™ä¸ªå¯¹è±¡ä»ç„¶æ˜¯å¯ä»¥è¢«è¿”å›çš„","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478538,"discussion_content":"VS 2017 ä¸‹ä¹Ÿèƒ½è¿‡çš„ã€‚ä½ æ²¡æœ‰æŒ‰ç¯å¢ƒè¦æ±‚é‡Œè¯´çš„åŠ ä¸Š /std:c++17ã€‚äº†è§£ç»†èŠ‚ï¼Œå¯ä»¥çœ‹å‚è€ƒèµ„æ–™ [3]ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576818936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164494,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1577008806,"is_pvip":false,"replies":[{"id":62549,"content":"å¯¹äºåŠŸèƒ½å’Œç‰ˆæœ¬çš„å…³ç³»ï¼Œè¿™ä¸ªé¡µé¢æ¯”è¾ƒå…¨ï¼š\n\nhttps:&#47;&#47;en.cppreference.com&#47;w&#47;cpp&#47;compiler_support","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577065381,"ip_address":"","comment_id":164494,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹c++xxä¸gccç‰ˆæœ¬çš„å¯¹åº”å…³ç³»ï¼Œè¿˜æœ‰è¿™èŠ‚æåˆ°çš„è¿”å›å€¼ä¼˜åŒ–åœ¨c++17ä¸­çš„ç»“æœä¸c++14åŠä¹‹å‰çš„ç»“æœ(ç¦ç”¨è¿”å›å€¼ä¼˜åŒ–ï¼Œç¼–è¯‘åçš„ç»“æœ)æ˜¯ä¸ä¸€æ ·çš„ï¼Œåƒè¿™ç§æœ‰æ²¡æœ‰å‚è€ƒèµ„æ–™å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478790,"discussion_content":"å¯¹äºåŠŸèƒ½å’Œç‰ˆæœ¬çš„å…³ç³»ï¼Œè¿™ä¸ªé¡µé¢æ¯”è¾ƒå…¨ï¼š\n\nhttps://en.cppreference.com/w/cpp/compiler_support","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577065381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164332,"user_name":"èŠ±æ™¨å°‘å¹´","can_delete":false,"product_type":"c1","uid":1098987,"ip_address":"","ucode":"6AA3537A6BA10E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","comment_is_top":false,"comment_ctime":1576938566,"is_pvip":false,"replies":[{"id":62462,"content":"å¯¹ï¼Œæ˜¯è°ƒç”¨ç§»åŠ¨æ„é€ å˜æˆè°ƒç”¨æ‹·è´æ„é€ ï¼Œå¦‚æœåŸæ¥å°±ç›´æ¥è¿”å›å€¼ä¼˜åŒ–æ‰äº†ï¼Œé‚£ä¸ä¼šå˜åŒ–ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576994302,"ip_address":"","comment_id":164332,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å…³äºè¿”å›å€¼ä¼˜åŒ–çš„å®éªŒæˆ‘ä»¬å°±åšåˆ°è¿™é‡Œã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¯•éªŒä¸€ä¸‹æŠŠç§»åŠ¨æ„é€ å‡½æ•°åˆ é™¤ï¼š\n  A(A&amp;&amp;) = delete;\næˆ‘ä»¬å¯ä»¥ç«‹å³çœ‹åˆ°â€œCopy Aâ€å‡ºç°åœ¨äº†ç»“æœè¾“å‡ºä¸­ï¼Œè¯´æ˜ç›®å‰ç»“æœå˜æˆæ‹·è´æ„é€ äº†\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nè¯·é—®è¿™ç§æƒ…å†µè¯´çš„æ˜¯é’ˆå¯¹getA_duang()å‡½æ•°å§ï¼Ÿä¸åŒ…æ‹¬ getA_named() ç­‰å‡½æ•°å§","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478726,"discussion_content":"å¯¹ï¼Œæ˜¯è°ƒç”¨ç§»åŠ¨æ„é€ å˜æˆè°ƒç”¨æ‹·è´æ„é€ ï¼Œå¦‚æœåŸæ¥å°±ç›´æ¥è¿”å›å€¼ä¼˜åŒ–æ‰äº†ï¼Œé‚£ä¸ä¼šå˜åŒ–ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1576994302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":163811,"user_name":"è¥¿é’¾é’¾","can_delete":false,"product_type":"c1","uid":1097722,"ip_address":"","ucode":"0EE77083636ED9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJV27QOK57cdpdh3E4hbArCOlccdtjCyWooF9fhjeSKAMo9SN1v9RODkrZUZD4RejjbdsqU2FIeMA/132","comment_is_top":false,"comment_ctime":1576806061,"is_pvip":false,"replies":[{"id":62310,"content":"VS 2017 ä¸‹ä¹Ÿèƒ½è¿‡çš„ã€‚ä½ æ²¡æœ‰æŒ‰ç¯å¢ƒè¦æ±‚é‡Œè¯´çš„åŠ ä¸Š &#47;std:c++17ã€‚äº†è§£ç»†èŠ‚ï¼Œå¯ä»¥çœ‹å‚è€ƒèµ„æ–™ [3]ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1576818936,"ip_address":"","comment_id":163811,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"ä»¥ä¸‹çš„ä»£ç ä¸­ï¼Œæ— è®ºæ˜¯å°†æ‹·è´æ„é€ å‡½æ•°è¿˜æ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ç½®ä¸ºdeleteï¼Œéƒ½ä¸èƒ½æ­£å¸¸ç¼–è¯‘ï¼ˆvs2017ï¼‰ã€‚ä¸ºå•¥åªæ˜¯ä½¿ç”¨ä¸€æ¬¡æ„é€ å‡½æ•°ï¼Œè€å¸ˆèƒ½ç®€å•è®²ä¸‹è¿™ä¸ªåŸç†ä¹ˆï¼Ÿ\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n&#47;&#47; Can copy and move\nclass A {\npublic:\n  A() { cout &lt;&lt; &quot;Create A\\n&quot;; }\n  ~A() { cout &lt;&lt; &quot;Destroy A\\n&quot;; }\n  A(const A&amp;) { cout &lt;&lt; &quot;Copy A\\n&quot;; }\n  A(A&amp;&amp;) { cout &lt;&lt; &quot;Move A\\n&quot;; }\n};\n\nA getA_unnamed()\n{\n  return A();\n}\n\nint main()\n{\n  auto a = getA_unnamed();\n}","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478538,"discussion_content":"VS 2017 ä¸‹ä¹Ÿèƒ½è¿‡çš„ã€‚ä½ æ²¡æœ‰æŒ‰ç¯å¢ƒè¦æ±‚é‡Œè¯´çš„åŠ ä¸Š /std:c++17ã€‚äº†è§£ç»†èŠ‚ï¼Œå¯ä»¥çœ‹å‚è€ƒèµ„æ–™ [3]ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576818936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164543,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1577024930,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"åŠ å…¥äº†move assignmentåï¼Œé»˜è®¤æ˜¯è°ƒç”¨move assignmentè€Œä¸æ˜¯copy assignmentã€‚","like_count":2},{"had_liked":false,"id":278950,"user_name":"ç‹æ—§ä¸š","can_delete":false,"product_type":"c1","uid":1013076,"ip_address":"","ucode":"A8DEC38430D007","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/54/73cc7f73.jpg","comment_is_top":false,"comment_ctime":1613479844,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"åœ¨ C++14 åŠä¹‹å‰ç¡®å®æ˜¯è¿™æ ·çš„ã€‚ä½†ä» C++17 å¼€å§‹ï¼Œå¯¹äºç±»ä¼¼äº getA_unnamed è¿™æ ·çš„æƒ…å†µï¼Œå³ä½¿å¯¹è±¡ä¸å¯æ‹·è´ã€ä¸å¯ç§»åŠ¨ï¼Œè¿™ä¸ªå¯¹è±¡ä»ç„¶æ˜¯å¯ä»¥è¢«è¿”å›çš„","like_count":0}]}