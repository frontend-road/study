{"id":91265,"title":"52 | 面向错误的设计","content":"<h1>课件及源代码地址</h1><p><a href=\"https://gitee.com/geektime-geekbang/go_learning\">https://gitee.com/geektime-geekbang/go_learning</a></p><h2>书目推荐</h2><p><a href=\"time://mall?url=https%3A%2F%2Fh5.youzan.com%2Fv2%2Fgoods%2F1ycmk3uob0ryw\">《计算机程序的构造和解释》</a></p>","comments":[{"had_liked":false,"id":87840,"user_name":"fl260919784","can_delete":false,"product_type":"c3","uid":1045678,"ip_address":"","ucode":"D6E10B8BDD0BB8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f4/ae/3b101c00.jpg","comment_is_top":false,"comment_ctime":1555728920,"is_pvip":false,"replies":[{"id":31618,"content":"推荐你试试这个：https:&#47;&#47;github.com&#47;easierway&#47;service_decorators&#47;blob&#47;master&#47;README.md","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1555748112,"ip_address":"","comment_id":87840,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"打扰，go在microservices方面有与spring cloud对标的项目吗，类似服务发现、熔断、负载等项目","like_count":8,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447621,"discussion_content":"推荐你试试这个：https://github.com/easierway/service_decorators/blob/master/README.md","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555748112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":257843,"user_name":"Geek_1548b2","can_delete":false,"product_type":"c3","uid":2252821,"ip_address":"","ucode":"50C750510B84EB","user_header":"","comment_is_top":false,"comment_ctime":1604152950,"is_pvip":false,"replies":[{"id":94053,"content":"谢谢。你们的认可是我前进的动力","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1604365664,"ip_address":"","comment_id":257843,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"老师讲的课程让我对golang的理解又深入了,每一次学习,甚至是复习都是一种进步","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":508469,"discussion_content":"谢谢。你们的认可是我前进的动力","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604365664,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":156147,"user_name":"疯琴","can_delete":false,"product_type":"c3","uid":1099379,"ip_address":"","ucode":"82ACAA4A27753D","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/73/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1574824661,"is_pvip":false,"replies":[{"id":60087,"content":"谢谢🙏","user_name":"作者回复","user_name_real":"ChaoCai2010","uid":1008262,"ctime":1574903344,"ip_address":"","comment_id":156147,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"这些知识很实战，在基本的编程教学上提高了一层。","like_count":2,"discussions":[{"author":{"id":1008262,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/62/86/632ad029.jpg","nickname":"蔡超","note":"","ucode":"4C281BBF511238","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476008,"discussion_content":"谢谢🙏","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574903344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":288052,"user_name":"escray","can_delete":false,"product_type":"c3","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1618281589,"is_pvip":true,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100024001,"comment_content":"接受系统的不完美，接受自己和他人的不完美\n\n面向错误的设计主要包括：隔离错误、冗余资源、限流、限时和断路器。\n\n隔离错误，当系统中的一部分发生错误的时候，尽量减少对于系统其他部分的影响，尽可能让系统的主体保持正常操作，包括微内核架构和微服务部署。\n\n要注意区分逻辑的重用和部署的隔离。\n\n冗余一般有两种方式，Standby 和 Online Redundancy，其实也就是常说的一主一从和双机热备（读写分离？）\n\n采用 token bucket 方式进行限流，避免集群中一部分机器故障导致的“雪崩”效应。\n\n对所有的阻塞操作加上 timeout 限时，这个似乎是 go 语言的特长，避免资源耗尽。\n\n搭配使用断路器和降级机制，在发生部分错误的时候保证系统整体或其他部分可用。\n\n发现大家似乎都比较喜欢相对宏观的设计思想和具体的小技巧 tips。","like_count":5}]}