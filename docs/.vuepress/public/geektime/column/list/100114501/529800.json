{"id":529800,"title":"10ï½œè‡ªåŠ¨åŒ–çš„è¿ç»´ç®¡ç†ï¼šæ¢ç©¶Kuberneteså·¥ä½œæœºåˆ¶çš„å¥¥ç§˜","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯Chronoã€‚</p><p>åœ¨ä¸Šä¸€æ¬¡è¯¾é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°å®¹å™¨æŠ€æœ¯åªå®ç°äº†åº”ç”¨çš„æ‰“åŒ…åˆ†å‘ï¼Œåˆ°è¿ç»´çœŸæ­£è½åœ°å®æ–½çš„æ—¶å€™ä»ç„¶ä¼šé‡åˆ°å¾ˆå¤šå›°éš¾ï¼Œæ‰€ä»¥å°±éœ€è¦ç”¨å®¹å™¨ç¼–æ’æŠ€æœ¯æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œè€ŒKubernetesæ˜¯è¿™ä¸ªé¢†åŸŸçš„å”¯ä¸€éœ¸ä¸»ï¼Œå·²ç»æˆä¸ºäº†â€œäº‹å®æ ‡å‡†â€ã€‚</p><p>é‚£ä¹ˆï¼ŒKuberneteså‡­ä»€ä¹ˆèƒ½æ‹…å½“è¿™æ ·çš„é¢†å†›é‡ä»»å‘¢ï¼Ÿéš¾é“ä»…ä»…å› ä¸ºå®ƒæ˜¯ç”±Googleä¸»å¯¼å¼€å‘çš„å—ï¼Ÿ</p><p>ä»Šå¤©æˆ‘å°±å¸¦ä½ ä¸€èµ·æ¥çœ‹çœ‹Kubernetesçš„å†…éƒ¨æ¶æ„å’Œå·¥ä½œæœºåˆ¶ï¼Œäº†è§£å®ƒèƒ½å¤Ÿå‚²è§†ç¾¤é›„çš„ç§˜å¯†æ‰€åœ¨ã€‚</p><h2>äº‘è®¡ç®—æ—¶ä»£çš„æ“ä½œç³»ç»Ÿ</h2><p>å‰é¢æˆ‘æ›¾ç»è¯´è¿‡ï¼ŒKubernetesæ˜¯<strong>ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„å®¹å™¨ç¼–æ’å¹³å°å’Œé›†ç¾¤ç®¡ç†ç³»ç»Ÿ</strong>ï¼Œèƒ½å¤Ÿåˆ›å»ºã€è°ƒåº¦å®¹å™¨ï¼Œç›‘æ§ã€ç®¡ç†æœåŠ¡å™¨ã€‚</p><p>å®¹å™¨æ˜¯ä»€ä¹ˆï¼Ÿå®¹å™¨æ˜¯è½¯ä»¶ï¼Œæ˜¯åº”ç”¨ï¼Œæ˜¯è¿›ç¨‹ã€‚æœåŠ¡å™¨æ˜¯ä»€ä¹ˆï¼ŸæœåŠ¡å™¨æ˜¯ç¡¬ä»¶ï¼Œæ˜¯CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘å¡ã€‚é‚£ä¹ˆï¼Œæ—¢å¯ä»¥ç®¡ç†è½¯ä»¶ï¼Œä¹Ÿå¯ä»¥ç®¡ç†ç¡¬ä»¶ï¼Œè¿™æ ·çš„ä¸œè¥¿åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ä½ ä¹Ÿè®¸ä¼šè„±å£è€Œå‡ºï¼šè¿™å°±æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼ˆOperating Systemï¼‰ï¼</p><p>æ²¡é”™ï¼Œä»æŸç§è§’åº¦æ¥çœ‹ï¼ŒKuberneteså¯ä»¥è¯´æ˜¯ä¸€ä¸ªé›†ç¾¤çº§åˆ«çš„æ“ä½œç³»ç»Ÿï¼Œä¸»è¦åŠŸèƒ½å°±æ˜¯èµ„æºç®¡ç†å’Œä½œä¸šè°ƒåº¦ã€‚ä½†Kubernetesä¸æ˜¯è¿è¡Œåœ¨å•æœºä¸Šç®¡ç†å•å°è®¡ç®—èµ„æºå’Œè¿›ç¨‹ï¼Œè€Œæ˜¯è¿è¡Œåœ¨å¤šå°æœåŠ¡å™¨ä¸Šç®¡ç†å‡ ç™¾å‡ åƒå°çš„è®¡ç®—èµ„æºï¼Œä»¥åŠåœ¨è¿™äº›èµ„æºä¸Šè¿è¡Œçš„ä¸Šä¸‡ä¸Šç™¾ä¸‡çš„è¿›ç¨‹ï¼Œè§„æ¨¡è¦å¤§å¾—å¤šã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/a0/f1/a09709bdf35516603yy377fc599e0af1.png?wh=800x418\" alt=\"å›¾ç‰‡\" title=\"å›¾ç‰‡æ¥è‡ªç½‘ç»œ\"></p><p>æ‰€ä»¥ï¼Œä½ å¯ä»¥æŠŠKubernetesä¸Linuxå¯¹æ¯”èµ·æ¥å­¦ä¹ ï¼Œè€Œè¿™ä¸ªæ–°çš„æ“ä½œç³»ç»Ÿé‡Œè‡ªç„¶ä¼šæœ‰ä¸€ç³»åˆ—æ–°åè¯ã€æ–°æœ¯è¯­ï¼Œä½ ä¹Ÿéœ€è¦ä½¿ç”¨æ–°çš„æ€ç»´æ–¹å¼æ¥è€ƒè™‘é—®é¢˜ï¼Œå¿…è¦çš„æ—¶å€™è¿˜å¾—å’Œè¿‡å»çš„ä¹ æƒ¯â€œè¯´å†è§â€ã€‚</p><p>Kubernetesè¿™ä¸ªæ“ä½œç³»ç»Ÿä¸Linuxè¿˜æœ‰ä¸€ç‚¹åŒºåˆ«ä½ å€¼å¾—æ³¨æ„ã€‚Linuxçš„ç”¨æˆ·é€šå¸¸æ˜¯ä¸¤ç±»äººï¼š<strong>Dev</strong>å’Œ<strong>Ops</strong>ï¼Œè€Œåœ¨Kubernetesé‡Œåˆ™åªæœ‰ä¸€ç±»äººï¼š<strong>DevOps</strong>ã€‚</p><p>åœ¨ä»¥å‰çš„åº”ç”¨å®æ–½æµç¨‹ä¸­ï¼Œå¼€å‘äººå‘˜å’Œè¿ç»´äººå‘˜åˆ†å·¥æ˜ç¡®ï¼Œå¼€å‘å®Œæˆåéœ€è¦ç¼–å†™è¯¦ç»†çš„è¯´æ˜æ–‡æ¡£ï¼Œç„¶åäº¤ç»™è¿ç»´å»éƒ¨ç½²ç®¡ç†ï¼Œä¸¤è€…ä¹‹é—´ä¸èƒ½éšä¾¿â€œè¶Šçº¿â€ã€‚</p><p>è€Œåœ¨Kubernetesè¿™é‡Œï¼Œå¼€å‘å’Œè¿ç»´çš„ç•Œé™å˜å¾—ä¸é‚£ä¹ˆæ¸…æ™°äº†ã€‚ç”±äºäº‘åŸç”Ÿçš„å…´èµ·ï¼Œå¼€å‘äººå‘˜ä»ä¸€å¼€å§‹å°±å¿…é¡»è€ƒè™‘åç»­çš„éƒ¨ç½²è¿ç»´å·¥ä½œï¼Œè€Œè¿ç»´äººå‘˜ä¹Ÿéœ€è¦åœ¨æ—©æœŸä»‹å…¥å¼€å‘ï¼Œæ‰èƒ½åšå¥½åº”ç”¨çš„è¿ç»´ç›‘æ§å·¥ä½œã€‚</p><p>è¿™å°±ä¼šå¯¼è‡´å¾ˆå¤šKubernetesçš„æ–°ç”¨æˆ·ä¼šé¢ä¸´èº«ä»½çš„è½¬å˜ï¼Œä¸€å¼€å§‹å¯èƒ½ä¼šæœ‰ç‚¹å›°éš¾ã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œè¿™ä¹Ÿéå¸¸æ­£å¸¸ï¼Œä»»ä½•çš„å­¦ä¹ è¿‡ç¨‹éƒ½æœ‰ä¸ªé€‚åº”æœŸï¼Œåªè¦è¿‡äº†æœ€åˆçš„æ¦‚å¿µç†è§£é˜¶æ®µå°±å¥½äº†ã€‚</p><h2>Kubernetesçš„åŸºæœ¬æ¶æ„</h2><p>æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦åŠŸèƒ½å°±æ˜¯æŠ½è±¡ï¼Œä»ç¹ççš„åº•å±‚äº‹åŠ¡ä¸­æŠ½è±¡å‡ºä¸€äº›ç®€æ´çš„æ¦‚å¿µï¼Œç„¶ååŸºäºè¿™äº›æ¦‚å¿µå»ç®¡ç†ç³»ç»Ÿèµ„æºã€‚</p><p>Kubernetesä¹Ÿæ˜¯è¿™æ ·ï¼Œå®ƒçš„ç®¡ç†ç›®æ ‡æ˜¯å¤§è§„æ¨¡çš„é›†ç¾¤å’Œåº”ç”¨ï¼Œå¿…é¡»è¦èƒ½å¤ŸæŠŠç³»ç»ŸæŠ½è±¡åˆ°è¶³å¤Ÿé«˜çš„å±‚æ¬¡ï¼Œåˆ†è§£å‡ºä¸€äº›æ¾è€¦åˆçš„å¯¹è±¡ï¼Œæ‰èƒ½ç®€åŒ–ç³»ç»Ÿæ¨¡å‹ï¼Œå‡è½»ç”¨æˆ·çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚</p><p>æ‰€ä»¥ï¼ŒKubernetesæ‰®æ¼”çš„è§’è‰²å°±å¦‚åŒä¸€ä¸ªâ€œå¤§å¸ˆçº§åˆ«â€çš„ç³»ç»Ÿç®¡ç†å‘˜ï¼Œå…·æœ‰ä¸°å¯Œçš„é›†ç¾¤è¿ç»´ç»éªŒï¼Œç‹¬åˆ›äº†è‡ªå·±çš„ä¸€å¥—å·¥ä½œæ–¹å¼ï¼Œä¸éœ€è¦å¤ªå¤šçš„å¤–éƒ¨å¹²é¢„ï¼Œå°±èƒ½å¤Ÿè‡ªä¸»å®ç°åŸå…ˆè®¸å¤šå¤æ‚çš„ç®¡ç†å·¥ä½œã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™ä½èµ„æ·±ç®¡ç†å‘˜çš„â€œå†…åŠŸå¿ƒæ³•â€ã€‚</p><p>Kuberneteså®˜ç½‘ä¸Šæœ‰ä¸€å¼ æ¶æ„å›¾ï¼Œä½†æˆ‘è§‰å¾—ä¸æ˜¯å¤ªæ¸…æ™°ã€é‡ç‚¹ä¸çªå‡ºï¼Œæ‰€ä»¥å¦å¤–æ‰¾äº†ä¸€ä»½ï¼ˆ<a href=\"https://medium.com/@keshiha/k8s-architecture-bb6964767c12\">å›¾ç‰‡æ¥æº</a>ï¼‰ã€‚è™½ç„¶è¿™å¼ å›¾æœ‰ç‚¹â€œè€â€ï¼Œä½†å¯¹äºæˆ‘ä»¬åˆå­¦Kubernetesè¿˜æ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/34/b7/344e0c6dc2141b12f99e61252110f6b7.png?wh=1278x704\" alt=\"å›¾ç‰‡\"></p><p>Kubernetesé‡‡ç”¨äº†ç°ä»Šæµè¡Œçš„â€œ<strong>æ§åˆ¶é¢/æ•°æ®é¢</strong>â€ï¼ˆControl Plane / Data Planeï¼‰æ¶æ„ï¼Œé›†ç¾¤é‡Œçš„è®¡ç®—æœºè¢«ç§°ä¸ºâ€œ<strong>èŠ‚ç‚¹</strong>â€ï¼ˆNodeï¼‰ï¼Œå¯ä»¥æ˜¯å®æœºä¹Ÿå¯ä»¥æ˜¯è™šæœºï¼Œå°‘é‡çš„èŠ‚ç‚¹ç”¨ä½œæ§åˆ¶é¢æ¥æ‰§è¡Œé›†ç¾¤çš„ç®¡ç†ç»´æŠ¤å·¥ä½œï¼Œå…¶ä»–çš„å¤§éƒ¨åˆ†èŠ‚ç‚¹éƒ½è¢«åˆ’å½’æ•°æ®é¢ï¼Œç”¨æ¥è·‘ä¸šåŠ¡åº”ç”¨ã€‚</p><p>æ§åˆ¶é¢çš„èŠ‚ç‚¹åœ¨Kubernetesé‡Œå«åš<strong>Master Node</strong>ï¼Œä¸€èˆ¬ç®€ç§°ä¸º<strong>Master</strong>ï¼Œå®ƒæ˜¯æ•´ä¸ªé›†ç¾¤é‡Œæœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå¯ä»¥è¯´æ˜¯Kubernetesçš„å¤§è„‘å’Œå¿ƒè„ã€‚</p><p>æ•°æ®é¢çš„èŠ‚ç‚¹å«åš<strong>Worker Node</strong>ï¼Œä¸€èˆ¬å°±ç®€ç§°ä¸º<strong>Worker</strong>æˆ–è€…<strong>Node</strong>ï¼Œç›¸å½“äºKubernetesçš„æ‰‹å’Œè„šï¼Œåœ¨Masterçš„æŒ‡æŒ¥ä¸‹å¹²æ´»ã€‚</p><p>Nodeçš„æ•°é‡éå¸¸å¤šï¼Œæ„æˆäº†ä¸€ä¸ªèµ„æºæ± ï¼ŒKuberneteså°±åœ¨è¿™ä¸ªæ± é‡Œåˆ†é…èµ„æºï¼Œè°ƒåº¦åº”ç”¨ã€‚å› ä¸ºèµ„æºè¢«â€œæ± åŒ–â€äº†ï¼Œæ‰€ä»¥ç®¡ç†ä¹Ÿå°±å˜å¾—æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥åœ¨é›†ç¾¤ä¸­ä»»æ„æ·»åŠ æˆ–è€…åˆ é™¤èŠ‚ç‚¹ã€‚</p><p>åœ¨è¿™å¼ æ¶æ„å›¾é‡Œï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªkubectlï¼Œå®ƒå°±æ˜¯Kubernetesçš„å®¢æˆ·ç«¯å·¥å…·ï¼Œç”¨æ¥æ“ä½œKubernetesï¼Œä½†å®ƒä½äºé›†ç¾¤ä¹‹å¤–ï¼Œç†è®ºä¸Šä¸å±äºé›†ç¾¤ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>kubectl get node</code> æ¥æŸ¥çœ‹Kubernetesçš„èŠ‚ç‚¹çŠ¶æ€ï¼š</p><pre><code class=\"language-plain\">kubectl get node\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/33/38/33937b919cbc5d6fe4b4e0e203415538.png?wh=1472x180\" alt=\"å›¾ç‰‡\"></p><p>å¯ä»¥çœ‹åˆ°å½“å‰çš„minikubeé›†ç¾¤é‡Œåªæœ‰ä¸€ä¸ªMasterï¼Œé‚£Nodeæ€ä¹ˆä¸è§äº†ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºMasterå’ŒNodeçš„åˆ’åˆ†ä¸æ˜¯ç»å¯¹çš„ã€‚å½“é›†ç¾¤çš„è§„æ¨¡è¾ƒå°ï¼Œå·¥ä½œè´Ÿè½½è¾ƒå°‘çš„æ—¶å€™ï¼ŒMasterä¹Ÿå¯ä»¥æ‰¿æ‹…Nodeçš„å·¥ä½œï¼Œå°±åƒæˆ‘ä»¬æ­å»ºçš„minikubeç¯å¢ƒï¼Œå®ƒå°±åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹æ—¢æ˜¯Masteråˆæ˜¯Nodeã€‚</p><h2>èŠ‚ç‚¹å†…éƒ¨çš„ç»“æ„</h2><p>Kubernetesçš„èŠ‚ç‚¹å†…éƒ¨ä¹Ÿå…·æœ‰å¤æ‚çš„ç»“æ„ï¼Œæ˜¯ç”±å¾ˆå¤šçš„æ¨¡å—æ„æˆçš„ï¼Œè¿™äº›æ¨¡å—åˆå¯ä»¥åˆ†æˆç»„ä»¶ï¼ˆComponentï¼‰å’Œæ’ä»¶ï¼ˆAddonï¼‰ä¸¤ç±»ã€‚</p><p>ç»„ä»¶å®ç°äº†Kubernetesçš„æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§ï¼Œæ²¡æœ‰è¿™äº›ç»„ä»¶Kuberneteså°±æ— æ³•å¯åŠ¨ï¼Œè€Œæ’ä»¶åˆ™æ˜¯Kubernetesçš„ä¸€äº›é™„åŠ åŠŸèƒ½ï¼Œå±äºâ€œé”¦ä¸Šæ·»èŠ±â€ï¼Œä¸å®‰è£…ä¹Ÿä¸ä¼šå½±å“Kubernetesçš„æ­£å¸¸è¿è¡Œã€‚</p><p>æ¥ä¸‹æ¥æˆ‘å…ˆæ¥è®²è®²Masterå’ŒNodeé‡Œçš„ç»„ä»¶ï¼Œç„¶åå†æå¸¦æä¸€ä¸‹æ’ä»¶ï¼Œç†è§£äº†å®ƒä»¬çš„å·¥ä½œæµç¨‹ï¼Œä½ å°±ä¼šæ˜ç™½ä¸ºä»€ä¹ˆKubernetesæœ‰å¦‚æ­¤å¼ºå¤§çš„è‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›ã€‚</p><h3>Masteré‡Œçš„ç»„ä»¶æœ‰å“ªäº›</h3><p>Masteré‡Œæœ‰4ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯<strong>apiserver</strong>ã€<strong>etcd</strong>ã€<strong>scheduler</strong>ã€<strong>controller-manager</strong>ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/33/c6/330e03a66f636657c0d8695397c508c6.jpg?wh=1278x704\" alt=\"å›¾ç‰‡\"></p><p>apiserveræ˜¯MasterèŠ‚ç‚¹â€”â€”åŒæ—¶ä¹Ÿæ˜¯æ•´ä¸ªKubernetesç³»ç»Ÿçš„å”¯ä¸€å…¥å£ï¼Œå®ƒå¯¹å¤–å…¬å¼€äº†ä¸€ç³»åˆ—çš„RESTful APIï¼Œå¹¶ä¸”åŠ ä¸Šäº†éªŒè¯ã€æˆæƒç­‰åŠŸèƒ½ï¼Œæ‰€æœ‰å…¶ä»–ç»„ä»¶éƒ½åªèƒ½å’Œå®ƒç›´æ¥é€šä¿¡ï¼Œå¯ä»¥è¯´æ˜¯Kubernetesé‡Œçš„è”ç»œå‘˜ã€‚</p><p>etcdæ˜¯ä¸€ä¸ªé«˜å¯ç”¨çš„åˆ†å¸ƒå¼Key-Valueæ•°æ®åº“ï¼Œç”¨æ¥æŒä¹…åŒ–å­˜å‚¨ç³»ç»Ÿé‡Œçš„å„ç§èµ„æºå¯¹è±¡å’ŒçŠ¶æ€ï¼Œç›¸å½“äºKubernetesé‡Œçš„é…ç½®ç®¡ç†å‘˜ã€‚æ³¨æ„å®ƒåªä¸apiserveræœ‰ç›´æ¥è”ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ä»»ä½•å…¶ä»–ç»„ä»¶æƒ³è¦è¯»å†™etcdé‡Œçš„æ•°æ®éƒ½å¿…é¡»ç»è¿‡apiserverã€‚</p><p>schedulerè´Ÿè´£å®¹å™¨çš„ç¼–æ’å·¥ä½œï¼Œæ£€æŸ¥èŠ‚ç‚¹çš„èµ„æºçŠ¶æ€ï¼ŒæŠŠPodè°ƒåº¦åˆ°æœ€é€‚åˆçš„èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œç›¸å½“äºéƒ¨ç½²äººå‘˜ã€‚å› ä¸ºèŠ‚ç‚¹çŠ¶æ€å’ŒPodä¿¡æ¯éƒ½å­˜å‚¨åœ¨etcdé‡Œï¼Œæ‰€ä»¥schedulerå¿…é¡»é€šè¿‡apiserveræ‰èƒ½è·å¾—ã€‚</p><p>controller-managerè´Ÿè´£ç»´æŠ¤å®¹å™¨å’ŒèŠ‚ç‚¹ç­‰èµ„æºçš„çŠ¶æ€ï¼Œå®ç°æ•…éšœæ£€æµ‹ã€æœåŠ¡è¿ç§»ã€åº”ç”¨ä¼¸ç¼©ç­‰åŠŸèƒ½ï¼Œç›¸å½“äºç›‘æ§è¿ç»´äººå‘˜ã€‚åŒæ ·åœ°ï¼Œå®ƒä¹Ÿå¿…é¡»é€šè¿‡apiserverè·å¾—å­˜å‚¨åœ¨etcdé‡Œçš„ä¿¡æ¯ï¼Œæ‰èƒ½å¤Ÿå®ç°å¯¹èµ„æºçš„å„ç§æ“ä½œã€‚</p><p>è¿™4ä¸ªç»„ä»¶ä¹Ÿéƒ½è¢«å®¹å™¨åŒ–äº†ï¼Œè¿è¡Œåœ¨é›†ç¾¤çš„Podé‡Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨kubectlæ¥æŸ¥çœ‹å®ƒä»¬çš„çŠ¶æ€ï¼Œä½¿ç”¨å‘½ä»¤ï¼š</p><pre><code class=\"language-plain\">kubectl get pod -n kube-system\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/86/99/868380a89077c45c6ac1918794632399.png?wh=1862x504\" alt=\"å›¾ç‰‡\"></p><p>æ³¨æ„å‘½ä»¤è¡Œé‡Œè¦ç”¨ <code>-n kube-system</code> å‚æ•°ï¼Œè¡¨ç¤ºæ£€æŸ¥â€œkube-systemâ€åå­—ç©ºé—´é‡Œçš„Podï¼Œè‡³äºåå­—ç©ºé—´æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬åé¢ä¼šè®²åˆ°ã€‚</p><h3>Nodeé‡Œçš„ç»„ä»¶æœ‰å“ªäº›</h3><p>Masteré‡Œçš„apiserverã€schedulerç­‰ç»„ä»¶éœ€è¦è·å–èŠ‚ç‚¹çš„å„ç§ä¿¡æ¯æ‰èƒ½å¤Ÿä½œå‡ºç®¡ç†å†³ç­–ï¼Œé‚£è¿™äº›ä¿¡æ¯è¯¥æ€ä¹ˆæ¥å‘¢ï¼Ÿ</p><p>è¿™å°±éœ€è¦Nodeé‡Œçš„3ä¸ªç»„ä»¶äº†ï¼Œåˆ†åˆ«æ˜¯<strong>kubelet</strong>ã€<strong>kube-proxy</strong>ã€<strong>container-runtime</strong>ã€‚</p><p>kubeletæ˜¯Nodeçš„ä»£ç†ï¼Œè´Ÿè´£ç®¡ç†Nodeç›¸å…³çš„ç»å¤§éƒ¨åˆ†æ“ä½œï¼ŒNodeä¸Šåªæœ‰å®ƒèƒ½å¤Ÿä¸apiserveré€šä¿¡ï¼Œå®ç°çŠ¶æ€æŠ¥å‘Šã€å‘½ä»¤ä¸‹å‘ã€å¯åœå®¹å™¨ç­‰åŠŸèƒ½ï¼Œç›¸å½“äºæ˜¯Nodeä¸Šçš„ä¸€ä¸ªâ€œå°ç®¡å®¶â€ã€‚</p><p>kube-proxyçš„ä½œç”¨æœ‰ç‚¹ç‰¹åˆ«ï¼Œå®ƒæ˜¯Nodeçš„ç½‘ç»œä»£ç†ï¼Œåªè´Ÿè´£ç®¡ç†å®¹å™¨çš„ç½‘ç»œé€šä¿¡ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä¸ºPodè½¬å‘TCP/UDPæ•°æ®åŒ…ï¼Œç›¸å½“äºæ˜¯ä¸“èŒçš„â€œå°é‚®å·®â€ã€‚</p><p>ç¬¬ä¸‰ä¸ªç»„ä»¶container-runtimeæˆ‘ä»¬å°±æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œå®ƒæ˜¯å®¹å™¨å’Œé•œåƒçš„å®é™…ä½¿ç”¨è€…ï¼Œåœ¨kubeletçš„æŒ‡æŒ¥ä¸‹åˆ›å»ºå®¹å™¨ï¼Œç®¡ç†Podçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯çœŸæ­£å¹²æ´»çš„â€œè‹¦åŠ›â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/87/35/87bab507ce8381325e85570f3bc1d935.jpg?wh=1278x704\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘ä»¬ä¸€å®šè¦æ³¨æ„ï¼Œå› ä¸ºKubernetesçš„å®šä½æ˜¯å®¹å™¨ç¼–æ’å¹³å°ï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰é™å®šcontainer-runtimeå¿…é¡»æ˜¯Dockerï¼Œå®Œå…¨å¯ä»¥æ›¿æ¢æˆä»»ä½•ç¬¦åˆæ ‡å‡†çš„å…¶ä»–å®¹å™¨è¿è¡Œæ—¶ï¼Œä¾‹å¦‚containerdã€CRI-Oç­‰ç­‰ï¼Œåªä¸è¿‡åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Dockerã€‚</p><p>è¿™3ä¸ªç»„ä»¶ä¸­åªæœ‰kube-proxyè¢«å®¹å™¨åŒ–äº†ï¼Œè€Œkubeletå› ä¸ºå¿…é¡»è¦ç®¡ç†æ•´ä¸ªèŠ‚ç‚¹ï¼Œå®¹å™¨åŒ–ä¼šé™åˆ¶å®ƒçš„èƒ½åŠ›ï¼Œæ‰€ä»¥å®ƒå¿…é¡»åœ¨container-runtimeä¹‹å¤–è¿è¡Œã€‚</p><p>ä½¿ç”¨ <code>minikube ssh</code> å‘½ä»¤ç™»å½•åˆ°èŠ‚ç‚¹åï¼Œå¯ä»¥ç”¨ <code>docker ps</code> çœ‹åˆ°kube-proxyï¼š</p><pre><code class=\"language-plain\">minikube ssh\ndocker ps |grep kube-proxy\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/1f/a4/1f08490fd66c91b4f5d2172d2d93eba4.png?wh=1920x141\" alt=\"å›¾ç‰‡\"></p><p>è€Œkubeletç”¨ <code>docker ps</code> æ˜¯æ‰¾ä¸åˆ°çš„ï¼Œéœ€è¦ç”¨æ“ä½œç³»ç»Ÿçš„ <code>ps</code> å‘½ä»¤ï¼š</p><pre><code class=\"language-plain\">ps -ef|grep kubelet\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/ay/28/ayy7246d222fa723f5f4a1f8edc0eb28.png?wh=1920x95\" alt=\"å›¾ç‰‡\"></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å†æŠŠNodeé‡Œçš„ç»„ä»¶å’ŒMasteré‡Œçš„ç»„ä»¶æ”¾åœ¨ä¸€èµ·æ¥çœ‹ï¼Œå°±èƒ½å¤Ÿæ˜ç™½Kubernetesçš„å¤§è‡´å·¥ä½œæµç¨‹äº†ï¼š</p><ul>\n<li>æ¯ä¸ªNodeä¸Šçš„kubeletä¼šå®šæœŸå‘apiserverä¸ŠæŠ¥èŠ‚ç‚¹çŠ¶æ€ï¼Œapiserverå†å­˜åˆ°etcdé‡Œã€‚</li>\n<li>æ¯ä¸ªNodeä¸Šçš„kube-proxyå®ç°äº†TCP/UDPåå‘ä»£ç†ï¼Œè®©å®¹å™¨å¯¹å¤–æä¾›ç¨³å®šçš„æœåŠ¡ã€‚</li>\n<li>scheduleré€šè¿‡apiserverå¾—åˆ°å½“å‰çš„èŠ‚ç‚¹çŠ¶æ€ï¼Œè°ƒåº¦Podï¼Œç„¶åapiserverä¸‹å‘å‘½ä»¤ç»™æŸä¸ªNodeçš„kubeletï¼Œkubeletè°ƒç”¨container-runtimeå¯åŠ¨å®¹å™¨ã€‚</li>\n<li>controller-managerä¹Ÿé€šè¿‡apiserverå¾—åˆ°å®æ—¶çš„èŠ‚ç‚¹çŠ¶æ€ï¼Œç›‘æ§å¯èƒ½çš„å¼‚å¸¸æƒ…å†µï¼Œå†ä½¿ç”¨ç›¸åº”çš„æ‰‹æ®µå»è°ƒèŠ‚æ¢å¤ã€‚</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/34/b7/344e0c6dc2141b12f99e61252110f6b7.png?wh=1278x704\" alt=\"å›¾ç‰‡\"></p><p>å…¶å®ï¼Œè¿™å’Œæˆ‘ä»¬åœ¨Kuberneteså‡ºç°ä¹‹å‰çš„æ“ä½œæµç¨‹ä¹Ÿå·®ä¸äº†å¤šå°‘ï¼Œä½†Kubernetesçš„é«˜æ˜ä¹‹å¤„å°±åœ¨äºæŠŠè¿™äº›éƒ½æŠ½è±¡åŒ–è§„èŒƒåŒ–äº†ã€‚</p><p>äºæ˜¯ï¼Œè¿™äº›ç»„ä»¶å°±å¥½åƒæ˜¯æ— æ•°ä¸ªä¸çŸ¥ç–²å€¦çš„è¿ç»´å·¥ç¨‹å¸ˆï¼ŒæŠŠåŸå…ˆç¹çä½æ•ˆçš„äººåŠ›å·¥ä½œæ¬è¿›äº†é«˜æ•ˆçš„è®¡ç®—æœºé‡Œï¼Œå°±èƒ½å¤Ÿéšæ—¶å‘ç°é›†ç¾¤é‡Œçš„å˜åŒ–å’Œå¼‚å¸¸ï¼Œå†äº’ç›¸åä½œï¼Œç»´æŠ¤é›†ç¾¤çš„å¥åº·çŠ¶æ€ã€‚</p><h3>æ’ä»¶ï¼ˆAddonsï¼‰æœ‰å“ªäº›</h3><p>åªè¦æœåŠ¡å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œäº†apiserverã€schedulerã€kubeletã€kube-proxyã€container-runtimeç­‰ç»„ä»¶ï¼Œå°±å¯ä»¥è¯´æ˜¯ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„Kubernetesé›†ç¾¤äº†ã€‚</p><p>ä¸è¿‡å°±åƒLinuxä¸€æ ·ï¼Œæ“ä½œç³»ç»Ÿæä¾›çš„åŸºç¡€åŠŸèƒ½è™½ç„¶â€œå¯ç”¨â€ï¼Œä½†æƒ³è¾¾åˆ°â€œå¥½ç”¨â€çš„ç¨‹åº¦ï¼Œè¿˜æ˜¯è¦å†å®‰è£…ä¸€äº›é™„åŠ åŠŸèƒ½ï¼Œè¿™åœ¨Kubernetesé‡Œå°±æ˜¯æ’ä»¶ï¼ˆAddonï¼‰ã€‚</p><p>ç”±äºKubernetesæœ¬èº«çš„è®¾è®¡éå¸¸çµæ´»ï¼Œæ‰€ä»¥å°±æœ‰å¤§é‡çš„æ’ä»¶ç”¨æ¥æ‰©å±•ã€å¢å¼ºå®ƒå¯¹åº”ç”¨å’Œé›†ç¾¤çš„ç®¡ç†èƒ½åŠ›ã€‚</p><p>minikubeä¹Ÿæ”¯æŒå¾ˆå¤šçš„æ’ä»¶ï¼Œä½¿ç”¨å‘½ä»¤ <code>minikube addons list</code> å°±å¯ä»¥æŸ¥çœ‹æ’ä»¶åˆ—è¡¨ï¼š</p><pre><code class=\"language-plain\">minikube addons list\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/db/2f/dbd588f0cca1ffb93a702a6d4c8f4c2f.png?wh=1920x987\" alt=\"å›¾ç‰‡\"></p><p>æ’ä»¶ä¸­æˆ‘ä¸ªäººè®¤ä¸ºæ¯”è¾ƒé‡è¦çš„æœ‰ä¸¤ä¸ªï¼š<strong>DNS</strong>å’Œ<strong>Dashboard</strong>ã€‚</p><p>DNSä½ åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰å§ï¼Œå®ƒåœ¨Kubernetesé›†ç¾¤é‡Œå®ç°äº†åŸŸåè§£ææœåŠ¡ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬ä»¥åŸŸåè€Œä¸æ˜¯IPåœ°å€çš„æ–¹å¼æ¥äº’ç›¸é€šä¿¡ï¼Œæ˜¯æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡çš„åŸºç¡€ã€‚ç”±äºå®ƒå¯¹å¾®æœåŠ¡ã€æœåŠ¡ç½‘æ ¼ç­‰æ¶æ„è‡³å…³é‡è¦ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ˜¯Kubernetesçš„å¿…å¤‡æ’ä»¶ã€‚</p><p>Dashboardå°±æ˜¯ä»ªè¡¨ç›˜ï¼Œä¸ºKubernetesæä¾›äº†ä¸€ä¸ªå›¾å½¢åŒ–çš„æ“ä½œç•Œé¢ï¼Œéå¸¸ç›´è§‚å‹å¥½ï¼Œè™½ç„¶å¤§å¤šæ•°Kuberneteså·¥ä½œéƒ½æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œkubectlï¼Œä½†æœ‰çš„æ—¶å€™åœ¨Dashboardä¸ŠæŸ¥çœ‹ä¿¡æ¯ä¹Ÿæ˜¯æŒºæ–¹ä¾¿çš„ã€‚</p><p>ä½ åªè¦åœ¨minikubeç¯å¢ƒé‡Œæ‰§è¡Œä¸€æ¡ç®€å•çš„å‘½ä»¤ï¼Œå°±å¯ä»¥è‡ªåŠ¨ç”¨æµè§ˆå™¨æ‰“å¼€Dashboardé¡µé¢ï¼Œè€Œä¸”è¿˜æ”¯æŒä¸­æ–‡ï¼š</p><pre><code class=\"language-plain\">minikube dashboard\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/60/e6/6077ff98a11705448f875ee00a1d8de6.png?wh=1920x957\" alt=\"å›¾ç‰‡\"></p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ¥ç ”ç©¶äº†Kubernetesçš„å†…éƒ¨æ¶æ„å’Œå·¥ä½œæœºåˆ¶ï¼Œå¯ä»¥çœ‹åˆ°å®ƒçš„åŠŸèƒ½éå¸¸å®Œå–„ï¼Œå®ç°äº†å¤§éƒ¨åˆ†å¸¸è§çš„è¿ç»´ç®¡ç†å·¥ä½œï¼Œè€Œä¸”æ˜¯å…¨è‡ªåŠ¨åŒ–çš„ï¼Œèƒ½å¤ŸèŠ‚çº¦å¤§é‡çš„äººåŠ›æˆæœ¬ã€‚</p><p>ç”±äºKubernetesçš„æŠ½è±¡ç¨‹åº¦æ¯”è¾ƒé«˜ï¼Œæœ‰å¾ˆå¤šé™Œç”Ÿçš„æ–°æœ¯è¯­ï¼Œä¸å¤ªå¥½ç†è§£ï¼Œæ‰€ä»¥æˆ‘ç”»äº†ä¸€å¼ æ€ç»´å¯¼å›¾ï¼Œä½ å¯ä»¥å¯¹ç…§ç€å†åŠ æ·±ç†è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/65/e1/65d38ac50b4f2f1fd4b6700d5b8e7be1.jpg?wh=1920x1096\" alt=\"å›¾ç‰‡\"></p><p>æœ€åå°ç»“ä¸€ä¸‹ä»Šå¤©çš„è¦ç‚¹ï¼š</p><ol>\n<li>Kubernetesèƒ½å¤Ÿåœ¨é›†ç¾¤çº§åˆ«ç®¡ç†åº”ç”¨å’ŒæœåŠ¡å™¨ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§é›†ç¾¤æ“ä½œç³»ç»Ÿã€‚å®ƒä½¿ç”¨â€œæ§åˆ¶é¢/æ•°æ®é¢â€çš„åŸºæœ¬æ¶æ„ï¼ŒMasterèŠ‚ç‚¹å®ç°ç®¡ç†æ§åˆ¶åŠŸèƒ½ï¼ŒWorkerèŠ‚ç‚¹è¿è¡Œå…·ä½“ä¸šåŠ¡ã€‚</li>\n<li>Kubernetesç”±å¾ˆå¤šæ¨¡å—ç»„æˆï¼Œå¯åˆ†ä¸ºæ ¸å¿ƒçš„ç»„ä»¶å’Œé€‰é…çš„æ’ä»¶ä¸¤ç±»ã€‚</li>\n<li>Masteré‡Œæœ‰4ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯apiserverã€etcdã€schedulerã€controller-managerã€‚</li>\n<li>Nodeé‡Œæœ‰3ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯kubeletã€kube-proxyã€container-runtimeã€‚</li>\n<li>é€šå¸¸å¿…å¤‡çš„æ’ä»¶æœ‰DNSå’ŒDashboardã€‚</li>\n</ol><h2>è¯¾ä¸‹ä½œä¸š</h2><p>æœ€åæ˜¯è¯¾ä¸‹ä½œä¸šæ—¶é—´ï¼Œç»™ä½ ç•™ä¸¤ä¸ªæ€è€ƒé¢˜ï¼š</p><ol>\n<li>ä½ è§‰å¾—Kubernetesç®—å¾—ä¸Šæ˜¯ä¸€ç§æ“ä½œç³»ç»Ÿå—ï¼Ÿå’ŒçœŸæ­£çš„æ“ä½œç³»ç»Ÿç›¸æ¯”æœ‰ä»€ä¹ˆå·®å¼‚ï¼Ÿ</li>\n<li>è¯´è¯´ä½ ç†è§£çš„Kubernetesç»„ä»¶çš„ä½œç”¨ï¼Œä½ è§‰å¾—å“ªå‡ ä¸ªæœ€é‡è¦ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ç§¯æç•™è¨€æˆ–è€…æé—®ï¼Œå’Œå…¶ä»–åŒå­¦ä¸€èµ·å‚ä¸è®¨è®ºï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/63/e5/6390bdf6a447f77726866d95df1eafe5.jpg?wh=1920x2580\" alt=\"\"></p>","neighbors":{"left":{"article_title":"09ï½œèµ°è¿‘äº‘åŸç”Ÿï¼šå¦‚ä½•åœ¨æœ¬æœºæ­å»ºå°å·§å®Œå¤‡çš„Kubernetesç¯å¢ƒ","id":529780},"right":{"article_title":"11ï½œYAMLï¼šKubernetesä¸–ç•Œé‡Œçš„é€šç”¨è¯­","id":529813}},"comments":[{"had_liked":false,"id":351486,"user_name":"è‡ªç”±","can_delete":false,"product_type":"c1","uid":2576960,"ip_address":"","ucode":"4E3B53D29D86CA","user_header":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","comment_is_top":false,"comment_ctime":1657847208,"is_pvip":false,"replies":[{"id":"127837","content":"amazing!","user_name":"ä½œè€…å›å¤","comment_id":351486,"uid":"1181974","ip_address":"","utype":1,"ctime":1657851185,"user_name_real":"ç¼–è¾‘"}],"discussion_count":4,"race_medal":0,"score":"87557193128","product_id":100114501,"comment_content":"1. Kubernetes ç®—å¾—ä¸Šæ˜¯ä¸€ç§æ“ä½œç³»ç»Ÿå—ï¼Ÿ<br>ç®—ã€‚ä»€ä¹ˆæ˜¯ OSï¼Œä¾‹å¦‚åœ¨ç‰©ç†æœåŠ¡å™¨ä¸Šï¼Œå®ƒç”¨äºå¯¹ç‰©ç†æœåŠ¡å™¨ç¡¬ä»¶èµ„æºçš„æŠ½è±¡ï¼Œå¹¶å¯¹è¿›ç¨‹è¿›è¡Œè°ƒåº¦ç­‰ç­‰ã€‚é‚£ä¹ˆ Kubernetes å°±æ˜¯å¯¹äº‘ä¸Šèµ„æºçš„æŠ½è±¡ï¼Œå¹¶å¯¹äº‘åŸç”Ÿå¾®æœåŠ¡åº”ç”¨è¿›è¡Œè°ƒåº¦ã€‚Kubernetes å¯ä»¥å¯¹å…¬æœ‰äº‘ã€ç§æœ‰äº‘è¿›è¡Œç»Ÿä¸€æŠ½è±¡ï¼Œå¹¶å®ç°å¯¹è´Ÿè½½çš„æ— ç¼è¿ç§»å’Œå‡è¡¡ï¼Œä¸ä¼šæ°¸è¿œè¢«ç»‘å®šåœ¨æŸä¸€ä¸ªç‰¹å®šçš„äº‘ä¸Šã€‚<br>OSï¼Œèƒ½å±è”½åº•å±‚çš„å¤æ‚æ€§ï¼Œä¾‹å¦‚ Linux ï¼Œæˆ‘ä»¬ä¸ç”¨å…³å¿ƒç¨‹åºè¿è¡Œåœ¨å“ªä¸ª CPU æ ¸å¿ƒä¸Šï¼ŒOS å·²ç»æå®šäº†ã€‚Kubernetes å¯¹äº‘å’Œåº”ç”¨ç¨‹åºè¿›è¡Œäº†ç±»ä¼¼çš„ç®¡ç†ï¼Œæ— é¡»æ˜ç¡®å¯¹åº”ç”¨ç¨‹åºåœ¨å“ªä¸ªèŠ‚ç‚¹æˆ–å­˜å‚¨å·ä¸Šè¿›è¡Œç¡¬ç¼–ç¨‹ã€‚<br><br>2.æˆ‘ç†è§£çš„ Kubernetes ç»„ä»¶çš„ä½œç”¨<br>2.1 ä¸»èŠ‚ç‚¹ä¸Šçš„ç»„ä»¶<br>2.1.1 API Server<br>è´Ÿè´£é›†ç¾¤ä¸­æ‰€æœ‰ç»„ä»¶é€šä¿¡ã€‚è®¿é—®å®ƒå¿…é¡»ç»è¿‡æˆæƒäºè®¤è¯ã€‚<br><br>2.1.2 é›†ç¾¤å­˜å‚¨<br>åœ¨æ§åˆ¶å¹³é¢ä¸­ï¼Œåªæœ‰é›†ç¾¤å­˜å‚¨æ˜¯æœ‰çŠ¶æ€çš„ï¼ˆä¼šæŒä¹…åŒ–çš„æ„æ€ï¼‰ï¼Œå­˜å‚¨é›†ç¾¤çš„é…ç½®ä¸çŠ¶æ€ã€‚Kubernetes åº•å±‚ç”¨ etcdã€‚etcd è®¤ä¸ºä¸€è‡´æ€§æ¯”å¯ç”¨æ€§æ›´åŠ é‡è¦ã€‚å¯¹äºæ‰€æœ‰åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå†™æ“ä½œæ€§çš„ä¸€è‡´æ€§è‡³å…³é‡è¦ã€‚etcd ä½¿ç”¨ Raft ä¸€è‡´æ€§ç®—æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br><br>2.1.3 Controller ç®¡ç†å™¨<br>Controller ç®¡ç†å™¨å®ç°äº†æ§åˆ¶å¾ªç¯ï¼Œå®Œæˆé›†ç¾¤ç›‘æ§ä¸äº‹ä»¶å“åº”ã€‚å®ƒè´Ÿè´£åˆ›å»º controllerã€‚ä¸€èˆ¬æ§åˆ¶å¾ªç¯åŒ…æ‹¬ï¼šå·¥ä½œèŠ‚ç‚¹ controllerã€ç»ˆç«¯ controller ä»¥åŠå‰¯æœ¬ controllerã€‚é›†ç¾¤ç›‘æ§ç›®çš„æ˜¯ä¿è¯é›†ç¾¤å½“å‰çŠ¶æ€ä¸æœŸæœ›çŠ¶æ€ç›¸åŒ¹é…ã€‚é›†ç¾¤ç›‘æ§åŸºç¡€é€»è¾‘å¤§è‡´å¦‚ä¸‹ï¼š<br>* è·å–æœŸæœ›çŠ¶æ€ã€‚<br>* è§‚å¯Ÿå½“å‰çŠ¶æ€ã€‚<br>* åˆ¤æ–­å·®å¼‚ã€‚<br>* å˜æ›´æ¶ˆé™¤å·®å¼‚ç‚¹ã€‚<br><br>2.1.4 è°ƒåº¦å™¨<br>è°ƒåº¦å™¨èŒè´£æ˜¯ç›‘å¬ API Server æ¥å¯åŠ¨å·¥ä½œä»»åŠ¡ï¼Œå¹¶åˆ†é…åˆé€‚çš„èŠ‚ç‚¹ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯æ’åºç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿæœ‰è¯„åˆ†æœºåˆ¶ï¼Œå°†å·¥ä½œåˆ†é…åˆ°åˆ†æ•°æœ€é«˜çš„èŠ‚ç‚¹æ¥è¿è¡Œä»»åŠ¡ã€‚è°ƒåº¦å™¨ç¡®å®šå¯ä»¥æ‰§è¡Œä»»åŠ¡çš„èŠ‚ç‚¹åï¼Œè¿˜ä¼šå†è¿›è¡Œå‰ç½®æ ¡éªŒï¼Œä¾‹å¦‚è¯¥èŠ‚ç‚¹æ˜¯å¦ä»ç„¶å­˜åœ¨ã€åˆ†é…çš„ä»»åŠ¡éœ€è¦çš„ç«¯å£å½“å‰é€‰æ‹©çš„å·¥ä½œèŠ‚ç‚¹æ˜¯å¦å¯ä»¥è®¿é—®ç­‰ï¼Œå¦‚æœæ— æ³•é€šè¿‡ï¼Œè¯¥èŠ‚ç‚¹ä¼šè¢«ç›´æ¥å¿½ç•¥ï¼Œå¦‚æœè°ƒåº¦å™¨æœ€åæ— æ³•æ‰¾åˆ°åˆé€‚çš„å·¥ä½œèŠ‚ç‚¹ï¼Œåˆ™å½“å‰ä»»åŠ¡æ— æ³•è¢«è°ƒåº¦ï¼Œå¹¶è¢«æ ‡è®°ä¸ºæš‚åœçŠ¶æ€ã€‚â€¨éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œè°ƒåº¦å™¨ä¸è´Ÿè´£è¿è¡Œä»»åŠ¡ï¼Œåªä¸ºä»»åŠ¡è´Ÿè´£åˆ†é…åˆé€‚çš„å·¥ä½œèŠ‚ç‚¹ã€‚<br><br>2.2 å·¥ä½œèŠ‚ç‚¹ä¸Šçš„ç»„ä»¶<br><br>2.2.1 Kubelet<br>å·¥ä½œèŠ‚ç‚¹çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚æ–°å·¥ä½œèŠ‚ç‚¹åŠ å…¥èŠ‚ç‚¹åï¼ŒKubelet ä¼šè¢«éƒ¨ç½²åˆ°æ–°èŠ‚ç‚¹ï¼Œç„¶å Kubelet å°†å½“å‰èŠ‚ç‚¹æ³¨å†Œåˆ°é›†ç¾¤ä¸­ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªèŒè´£ï¼Œç›‘å¬ API Server åˆ†é…çš„ä»»åŠ¡ï¼Œç›‘å¬åˆ°å°±æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªä¸æ§åˆ¶å¹³é¢çš„é€šä¿¡é¢‘é“ã€‚<br><br>2.2.2 å®¹å™¨è¿è¡Œæ—¶<br>å·¥ä½œèŠ‚ç‚¹éœ€è¦é€šè¿‡å®ƒæ¥è·å–ã€å¯åŠ¨ã€åœæ­¢æ‰§è¡Œä»»åŠ¡ä¾èµ–çš„å®¹å™¨ï¼Œå®ƒè´Ÿè´£å®¹å™¨ç®¡ç†ä¸è¿è¡Œé€»è¾‘ã€‚","like_count":21,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580052,"discussion_content":"amazing!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657851185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1807943,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/96/47/93838ff7.jpg","nickname":"å‡ºå–çµé­‚çš„æ•™ç»ƒKerry","note":"","ucode":"8C64517DA556FE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588161,"discussion_content":"å¾ˆå‰å®³çš„æ€»ç»“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663581134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1660330,"avatar":"https://static001.geekbang.org/account/avatar/00/19/55/aa/c79c292c.jpg","nickname":"Erebus","note":"","ucode":"81CC93A6D7A4BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583638,"discussion_content":"ç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660265357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581320,"discussion_content":"åŒå­¦æ€»ç»“çš„çœŸä¸é”™ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658720705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351281,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1657676063,"is_pvip":true,"replies":[{"id":"127763","content":"<br>1.å¦‚æœæœ‰å¤šå°masterèŠ‚ç‚¹ï¼Œé‚£å°±æ„æˆäº†ä¸€ä¸ªmasteré›†ç¾¤ï¼Œè¿™äº›ç»„ä»¶å°±å¯ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹é‡Œéšæ„è¿è¡Œï¼Œå®ƒä»¬éƒ½æ˜¯ç‹¬ç«‹çš„æœåŠ¡ï¼Œç”¨apiæ¥å£é€šä¿¡ï¼Œä¸å¿…é™åˆ¶åœ¨åŒä¸€å°ä¸»æœºä¸Šã€‚<br><br>2.åé¢ä¼šå†ä¸“é—¨è®²Podæ¦‚å¿µã€‚<br><br>3.masterè´Ÿè´£è°ƒåº¦ç®¡ç†ï¼ŒPodè¿è¡Œåœ¨Nodeä¸Šï¼Œä¸æ˜¯å­˜å‚¨çš„æ„æ€ï¼Œmasterä¸‹å‘å‘½ä»¤ç»™kubeletï¼Œkubeletåœ¨nodeä¸Šå¯åŠ¨Podã€‚<br><br>4.è¿™ä¸ªè·Ÿç½‘ç»œæœ‰å…³ï¼Œåªèƒ½è¯´æ˜¯å‡‘å·§ä¸€æ ·ã€‚<br><br>5.ç”¨kubectl get podï¼Œåé¢ä¼šå†è®²podçš„è¯¦ç»†æ“ä½œã€‚","user_name":"ä½œè€…å›å¤","comment_id":351281,"uid":"1181974","ip_address":"","utype":1,"ctime":1657677505,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"27427479839","product_id":100114501,"comment_content":"è¯·æ•™è€å¸ˆå‡ ä¸ªé—®é¢˜ï¼š<br>Q1ï¼šMaterçš„å››ä¸ªç»„ä»¶è¿è¡Œåœ¨ä¸€å°ä¸»æœºä¸Šå—ï¼Ÿ<br>ä¸€ä¸ªmateråŒ…æ‹¬å››ä¸ªç»„ä»¶ï¼Œè¿™å››ä¸ªç»„ä»¶æ˜¯è¿è¡Œåœ¨åŒä¸€å°ä¸»æœºä¸Šå—ï¼Ÿå³â€œä¸€ä¸ªMaterå¯¹åº”ä¸€ä¸ªä¸»æœºâ€ã€‚æˆ–è€…æ˜¯å¦å¤–ä¸€ç§ç†è§£ï¼šmateræ˜¯ä¸ªé€»è¾‘æ¦‚å¿µï¼Œå¯ä»¥å¯¹åº”ä¸€å°ä¸»æœºï¼Œä¹Ÿå¯ä»¥å¯¹åº”å¤šå°ä¸»æœºï¼Œæ¯”å¦‚ä¸¤ä¸ªç»„ä»¶è¿è¡Œåœ¨ä¸€å°ä¸»æœºï¼Œå¦å¤–ä¸¤ä¸ªç»„ä»¶è¿è¡Œåœ¨å¦å¤–ä¸€å°ä¸»æœºï¼Œä¸¤å°ä¸»æœºåˆèµ·æ¥æ‰æ˜¯materã€‚å“ªä¸€ç§ç†è§£å¯¹ï¼Ÿ<br>Q2ï¼šPodä¸dockerå®¹å™¨æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ<br>ä¸€ä¸ªpodå°±å¯¹åº”ä¸€ä¸ªdockerå®¹å™¨å—ï¼Ÿ æ¯”å¦‚åˆ›å»ºä¸€ä¸ªnginxå®¹å™¨ï¼Œé‚£ä¹ˆæ­¤å®¹å™¨å°±å¯¹åº”ä¸€ä¸ªpodã€‚<br>Q3ï¼šPodæ˜¯é›†ä¸­å­˜å‚¨åœ¨masterä¸Šï¼Œç”±masteråˆ†å‘åˆ°å„ä¸ªnodeè¿è¡Œå—ï¼Ÿ<br>Q4ï¼šå¯åŠ¨k8såå°ç®¡ç†ç³»ç»Ÿåï¼Œâ€node listâ€æŸ¥è¯¢å‡ºçš„IPæ˜¯å›ºå®šçš„å—ï¼Ÿ<br>09è¯¾æ–‡ç« ä¸­ï¼Œç”¨â€œminikube node listâ€æŸ¥è¯¢å‡ºæ¥çš„ç»“æœä¸­ï¼ŒIPæ˜¯â€œ192.168.49.2â€ã€‚åœ¨æˆ‘çš„ç¬”è®°æœ¬ä¸Šï¼ŒæŸ¥å‡ºæ¥çš„ä¹Ÿæ˜¯â€œ192.168.49.2â€ã€‚ è¯·é—®ï¼Œè¿™ä¸ªIPæ˜¯å›ºå®šçš„å—ï¼Ÿ<br>Q5ï¼š09è¯¾ä¸­ï¼Œå¯åŠ¨nginxåæ€ä¹ˆéªŒè¯å¯åŠ¨æˆåŠŸï¼Ÿ<br>09è¯¾çš„æœ€åï¼Œç”¨â€œkubectl run ngx --image=nginx:alpineâ€è¿™ä¸ªå‘½ä»¤å¯åŠ¨äº†nginxï¼Œæ­¤å‘½ä»¤ä¸­æ²¡æœ‰æŒ‡å®šç«¯å£æ˜ å°„ã€‚ è¯·é—®ï¼Œæ€ä¹ˆéªŒè¯å¯åŠ¨æˆåŠŸï¼Ÿ  Localhost:80 å—ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579761,"discussion_content":"\n1.å¦‚æœæœ‰å¤šå°masterèŠ‚ç‚¹ï¼Œé‚£å°±æ„æˆäº†ä¸€ä¸ªmasteré›†ç¾¤ï¼Œè¿™äº›ç»„ä»¶å°±å¯ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹é‡Œéšæ„è¿è¡Œï¼Œå®ƒä»¬éƒ½æ˜¯ç‹¬ç«‹çš„æœåŠ¡ï¼Œç”¨apiæ¥å£é€šä¿¡ï¼Œä¸å¿…é™åˆ¶åœ¨åŒä¸€å°ä¸»æœºä¸Šã€‚\n\n2.åé¢ä¼šå†ä¸“é—¨è®²Podæ¦‚å¿µã€‚\n\n3.masterè´Ÿè´£è°ƒåº¦ç®¡ç†ï¼ŒPodè¿è¡Œåœ¨Nodeä¸Šï¼Œä¸æ˜¯å­˜å‚¨çš„æ„æ€ï¼Œmasterä¸‹å‘å‘½ä»¤ç»™kubeletï¼Œkubeletåœ¨nodeä¸Šå¯åŠ¨Podã€‚\n\n4.è¿™ä¸ªè·Ÿç½‘ç»œæœ‰å…³ï¼Œåªèƒ½è¯´æ˜¯å‡‘å·§ä¸€æ ·ã€‚\n\n5.ç”¨kubectl get podï¼Œåé¢ä¼šå†è®²podçš„è¯¦ç»†æ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657677506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1259323,"avatar":"https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg","nickname":"é™ˆæ–¯ä½³","note":"","ucode":"C236F874FC767A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587900,"discussion_content":"Podç›¸å½“äºæ˜¯Container group,æ˜¯ä¸€ç¾¤æœ‰å…³è”çš„å®¹å™¨ç»„ç¾¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663380755,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŠ æ‹¿å¤§"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352480,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1658720993,"is_pvip":false,"replies":[{"id":"128215","content":"<br>1.ä¸èƒ½ï¼Œetcdæ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ€§èƒ½è‡ªç„¶æ²¡æœ‰Rediså¥½ï¼Œç”¨é€”ä¸åŒã€‚<br><br>2.æ˜¯çš„ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥æ‰¾å‡†æ–¹å‘ï¼Œæ²¡æœ‰å¿…è¦ä»€ä¹ˆéƒ½å­¦ï¼Œå’ŒLinuxå¼€å‘ä¸€æ ·ï¼Œå…ˆæœ‰ä¸ªåŸºç¡€ã€‚<br><br>3.æ˜¯çš„ï¼Œå’Œhttpé‡Œçš„ageå·®ä¸å¤š<br><br>4.å¯¹ã€‚dnså·²ç»æ˜¯å¿…å¤‡æ’ä»¶äº†ï¼Œä¸ç”¨å•ç‹¬å®‰è£…ã€‚","user_name":"ä½œè€…å›å¤","comment_id":352480,"uid":"1181974","ip_address":"","utype":1,"ctime":1658730957,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"23133557473","product_id":100114501,"comment_content":"è€å¸ˆï¼Œæœ‰å‡ ä¸ªå°é—®é¢˜ï¼š<br><br>1. etcdèƒ½å–ä»£redisçš„å¤§éƒ¨åˆ†åŠŸèƒ½å—ï¼Ÿ<br><br>2.  åœ¨ Kubernetes é‡Œåˆ™åªæœ‰ä¸€ç±»äººï¼šDevOpsã€‚æ˜¯ä¸æ˜¯æ„å‘³ç€ä»¥åå¯¹å¼€å‘æˆ–è€…è¿ç»´äººå‘˜éƒ½æœ‰æ›´å¤§çš„æŒ‘æˆ˜ï¼Œæ¯•ç«ŸKubernetesçš„ä¹Ÿå¾ˆå¾ˆåºæ‚çš„çŸ¥è¯†è¦å»å­¦ä¹ ã€‚<br><br>3. çŠ¶æ€ä¿¡æ¯ä¸­çš„â€œAGEâ€ä»£è¡¨å¯åŠ¨æ—¶é•¿å—ï¼Ÿ<br><br>4. DNSæ’ä»¶åœ¨æ‰§è¡Œå‘½ä»¤ï¼šminikube addons list è¾“å‡ºçš„åˆ—è¡¨ä¸­æ²¡çœ‹åˆ°ã€‚æ˜¯ä¸æ˜¯è¯´è¿™ä¸ªæ’ä»¶å·²ç»é›†æˆåˆ°k8sä¸­äº†ï¼Œä¸éœ€è¦å•ç‹¬å®‰è£…ã€‚","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581341,"discussion_content":"\n1.ä¸èƒ½ï¼Œetcdæ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ€§èƒ½è‡ªç„¶æ²¡æœ‰Rediså¥½ï¼Œç”¨é€”ä¸åŒã€‚\n\n2.æ˜¯çš„ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥æ‰¾å‡†æ–¹å‘ï¼Œæ²¡æœ‰å¿…è¦ä»€ä¹ˆéƒ½å­¦ï¼Œå’ŒLinuxå¼€å‘ä¸€æ ·ï¼Œå…ˆæœ‰ä¸ªåŸºç¡€ã€‚\n\n3.æ˜¯çš„ï¼Œå’Œhttpé‡Œçš„ageå·®ä¸å¤š\n\n4.å¯¹ã€‚dnså·²ç»æ˜¯å¿…å¤‡æ’ä»¶äº†ï¼Œä¸ç”¨å•ç‹¬å®‰è£…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658730957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352026,"user_name":"hiDaLao","can_delete":false,"product_type":"c1","uid":2917100,"ip_address":"","ucode":"3C2DC2A3A377E4","user_header":"https://static001.geekbang.org/account/avatar/00/2c/82/ec/99b480e8.jpg","comment_is_top":false,"comment_ctime":1658334938,"is_pvip":true,"replies":[{"id":"127985","content":"è¿™ä¸ªåŠæ³•æ˜¯å¯è¡Œçš„ï¼Œä½†æŒ‰ç†æ¥è¯´minikubeä¼šç›´æ¥å¯åŠ¨æµè§ˆå™¨çš„ï¼Œä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦ï¼Œå¯ä»¥å†æ‰¾æ‰¾åŸå› ã€‚","user_name":"ä½œè€…å›å¤","comment_id":352026,"uid":"1181974","ip_address":"","utype":1,"ctime":1658357487,"user_name_real":"ç¼–è¾‘"}],"discussion_count":4,"race_medal":0,"score":"14543236826","product_id":100114501,"comment_content":"æ‰§è¡Œminikube dashboardæ— æ³•åœ¨æœ¬æœºè‡ªåŠ¨ç”¨æµè§ˆå™¨æ‰“å¼€dashboardé¡µé¢ï¼Œç½‘ä¸Šæœåˆ°çš„è§£å†³åŠæ³•ï¼šæ‰§è¡Œ<br>kubectl proxy --port=8888 --address=&#39;è™šæ‹Ÿæœºip&#39; --accept-hosts=&#39;^.*&#39; &amp;<br>ç„¶ååœ¨æœ¬æœºæ‰“å¼€http:&#47;&#47;è™šæ‹Ÿæœºip:8888&#47;api&#47;v1&#47;namespaces&#47;kubernetes-dashboard&#47;services&#47;http:kubernetes-dashboard:&#47;proxy&#47;#&#47;workloads?namespace=default","like_count":4,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580717,"discussion_content":"è¿™ä¸ªåŠæ³•æ˜¯å¯è¡Œçš„ï¼Œä½†æŒ‰ç†æ¥è¯´minikubeä¼šç›´æ¥å¯åŠ¨æµè§ˆå™¨çš„ï¼Œä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦ï¼Œå¯ä»¥å†æ‰¾æ‰¾åŸå› ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658357487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986211,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/4e/a3/e705111b.jpg","nickname":"Geek_fd0d9a","note":"","ucode":"609C110913F524","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582681,"discussion_content":"åº”è¯¥æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šæ“ä½œï¼Œdashboardåªèƒ½localhostæ‰“å¼€ï¼Œæ‰€ä»¥éœ€è¦åšä¸€ä¸ªä»£ç†ã€‚vmæ“ä½œç•Œé¢ä¸æ˜¯å¾ˆå¥½ï¼Œæˆ‘é€šè¿‡nps ä»£ç†äº†ä¸€ä¸‹ï¼Œä¹Ÿæ˜¯è¿™æ ·çš„æƒ…å†µã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659593913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1344431,"avatar":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","nickname":"é©¬ä»¥","note":"","ucode":"3FEA06CA14DE28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581653,"discussion_content":"ä½ è¿œç¨‹ç™»å½•è™šæ‹Ÿæœºäº†å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658909293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581265,"discussion_content":"æˆ‘çš„æ˜¯è‡ªåŠ¨æ‰“å¼€çš„ã€‚æ²¡åšé¢å¤–çš„æ“ä½œçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658676471,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351487,"user_name":"è‡ªç”±","can_delete":false,"product_type":"c1","uid":2576960,"ip_address":"","ucode":"4E3B53D29D86CA","user_header":"https://static001.geekbang.org/account/avatar/00/27/52/40/db9b0eb2.jpg","comment_is_top":false,"comment_ctime":1657847221,"is_pvip":false,"replies":[{"id":"127836","content":"great","user_name":"ä½œè€…å›å¤","comment_id":351487,"uid":"1181974","ip_address":"","utype":1,"ctime":1657851122,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"14542749109","product_id":100114501,"comment_content":"2.2.3 Kube-proxy<br>è´Ÿè´£æœ¬åœ°é›†ç¾¤ç½‘ç»œï¼Œä¿éšœ Pod é—´çš„ç½‘ç»œè·¯ç”±ä¸è´Ÿè½½å‡è¡¡","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580051,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657851122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352209,"user_name":"æä¸€","can_delete":false,"product_type":"c1","uid":1524952,"ip_address":"","ucode":"EEB7C5099C566C","user_header":"https://static001.geekbang.org/account/avatar/00/17/44/d8/708a0932.jpg","comment_is_top":false,"comment_ctime":1658457187,"is_pvip":true,"replies":[{"id":"128135","content":"ç”Ÿäº§ç¯å¢ƒä¼šæœ‰å¤šä¸ªmasterèŠ‚ç‚¹ï¼Œetcdä¼šéƒ¨ç½²æˆé«˜å¯ç”¨ã€‚","user_name":"ä½œè€…å›å¤","comment_id":352209,"uid":"1181974","ip_address":"","utype":1,"ctime":1658461184,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"10248391779","product_id":100114501,"comment_content":"é—®ä¸€ä¸ªå°ç™½é—®é¢˜ï¼Œçœ‹æ¶æ„å›¾ ETCDæ˜¯åœ¨MasterèŠ‚ç‚¹ä¸Šçš„ï¼Œç”±äºETCDè®°å½•äº†èŠ‚ç‚¹ä¿¡æ¯ã€ConfigMapã€Secretæ•°æ®ï¼Œå¦‚æœMaster èŠ‚ç‚¹å®•æœºæˆ–æ•°æ®æŸåï¼ŒK8S å¦‚ä½•ä¿è¯æ•°æ®å®Œæ•´æ€§ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581022,"discussion_content":"ç”Ÿäº§ç¯å¢ƒä¼šæœ‰å¤šä¸ªmasterèŠ‚ç‚¹ï¼Œetcdä¼šéƒ¨ç½²æˆé«˜å¯ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658461184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351567,"user_name":"dao","can_delete":false,"product_type":"c1","uid":1087879,"ip_address":"","ucode":"4181FB270462CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","comment_is_top":false,"comment_ctime":1657938054,"is_pvip":true,"replies":[{"id":"127855","content":"awesome","user_name":"ä½œè€…å›å¤","comment_id":351567,"uid":"1181974","ip_address":"","utype":1,"ctime":1657949604,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"10247872646","product_id":100114501,"comment_content":"è¯¾åæ€è€ƒï¼š<br>1. kubernetes ç®—å¾—ä¸Šæ˜¯ä¸€ç§æ“ä½œç³»ç»Ÿï¼Œæ­£å¦‚å®ƒå®šä½çš„å°±æ˜¯ cloud native ä¸€æ ·ã€‚å®ƒä¸ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿä¸åŒçš„æ˜¯ç®¡ç†ã€è°ƒåº¦çš„éƒ½æ˜¯è™šæ‹ŸåŒ–&#47;æ± åŒ–çš„èµ„æºï¼Œä¸ç¡¬ä»¶ä¹‹é—´éš”äº†ä¸€å±‚å®¿ä¸»æ“ä½œç³»ç»Ÿï¼ˆä¼ ç»Ÿ OSï¼‰ã€‚<br>2. å“ˆå“ˆï¼Œæˆ‘è§‰å¾—è¿™é‡Œé¢çš„ç»„ä»¶æ²¡æœ‰ä¸€ä¸ªæ˜¯å¤šä½™çš„â€”â€”éƒ½é‡è¦ã€‚æ²¡æœ‰ etcd å°±æ²¡æœ‰æŒä¹…åŒ–ä¿¡æ¯&#47;é…ç½®ï¼›æ²¡æœ‰ apiserver æ•´ä¸ªé›†ç¾¤å°±å¤±è”ã€å¤±æ§ï¼›æ²¡æœ‰ kubelet è¯¥èŠ‚ç‚¹å°±å¤±è”äº†ï¼›æ²¡æœ‰èŠ‚ç‚¹é‡Œçš„ container runtime å°±æ²¡æœ‰ Podï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä»»ä½•åº”ç”¨æœåŠ¡ï¼›æ²¡æœ‰ kube-proxyï¼ŒèŠ‚ç‚¹çš„æœåŠ¡å°±æ˜¯å­¤å²›ï¼›æ²¡æœ‰ controller manager å°±æ— æ³•ç®¡ç†èŠ‚ç‚¹åŠ Pod ï¼Œä¹Ÿå°±æ— æ³•å¯¹å¤–æä¾›åº”ç”¨æœåŠ¡ï¼›æ²¡æœ‰ scheduler é›†ç¾¤å°±å¤„äºå¤±è¡¡çŠ¶æ€ã€‚è¿™é‡Œ apiserver ã€ kubelet ã€ kube-proxy å……å½“ä¸åŒçš„æ¡¥æ¥ä½œç”¨ã€‚","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580169,"discussion_content":"awesome","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657949604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581305,"discussion_content":"åŒå­¦æ€è€ƒçš„å¾ˆä¸é”™ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658718661,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351478,"user_name":"Andrew","can_delete":false,"product_type":"c1","uid":1856849,"ip_address":"","ucode":"B1598E1E447EC6","user_header":"https://static001.geekbang.org/account/avatar/00/1c/55/51/c7bffc64.jpg","comment_is_top":false,"comment_ctime":1657820330,"is_pvip":true,"replies":[{"id":"127832","content":"ä»»æ„ä¸€å°æœºå™¨ï¼Œå®‰è£…äº†kubectlï¼Œç„¶åå†æœ‰ä¸€ä¸ªconfigï¼Œå°±å¯ä»¥è®¿é—®é›†ç¾¤ã€‚<br><br>çœ‹ç¬¬9è®²çš„æ¶æ„å›¾ï¼Œå°±æ˜¯é›†ç¾¤å¤–é¢çš„consoleã€‚","user_name":"ä½œè€…å›å¤","comment_id":351478,"uid":"1181974","ip_address":"","utype":1,"ctime":1657839646,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"10247754922","product_id":100114501,"comment_content":"è€å¸ˆï¼Œåœ¨çœŸå®ç¯å¢ƒä¸­éœ€è¦ç™»å½•åˆ°master nodeæ‰èƒ½å¯¹é›†ç¾¤è¿›è¡Œæ“ä½œå—ï¼Ÿ<br>ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ªkubeconfigæ–‡ä»¶ï¼Œé‡Œé¢è®°å½•äº†server, userç­‰ä¿¡æ¯ï¼Œæ˜¯é€šè¿‡æœ¬æœºç›´æ¥å’Œmaster nodeçš„api serverè¿›è¡Œäº¤äº’å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580033,"discussion_content":"ä»»æ„ä¸€å°æœºå™¨ï¼Œå®‰è£…äº†kubectlï¼Œç„¶åå†æœ‰ä¸€ä¸ªconfigï¼Œå°±å¯ä»¥è®¿é—®é›†ç¾¤ã€‚\n\nçœ‹ç¬¬9è®²çš„æ¶æ„å›¾ï¼Œå°±æ˜¯é›†ç¾¤å¤–é¢çš„consoleã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657839646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351345,"user_name":"Frank","can_delete":false,"product_type":"c1","uid":1111985,"ip_address":"","ucode":"9DADD72C193296","user_header":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","comment_is_top":false,"comment_ctime":1657712442,"is_pvip":true,"replies":[{"id":"127801","content":"good","user_name":"ä½œè€…å›å¤","comment_id":351345,"uid":"1181974","ip_address":"","utype":1,"ctime":1657750821,"user_name_real":"ç¼–è¾‘"}],"discussion_count":3,"race_medal":0,"score":"10247647034","product_id":100114501,"comment_content":"ä¸€ç›´æ²¡æœ‰æ¸…æ¥š  module å’Œaddon åŒºåˆ«ï¼Œä»Šå¤©æ€»äºæ˜ç™½äº†ğŸ˜‚","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579872,"discussion_content":"good","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657750821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581263,"discussion_content":"è¿™é‡Œä½ è¯´çš„ module æ˜¯æŒ‡ æ–‡ä¸­çš„ â€œComponentâ€å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658675642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1109562,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ee/3a/c0ad9c43.jpg","nickname":"æ°","note":"","ucode":"036B010A45070A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580798,"discussion_content":"moduleæ˜¯ä»€ä¹ˆ?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658375622,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351274,"user_name":"æ˜Ÿå‚å¹³é‡é˜”","can_delete":false,"product_type":"c1","uid":3010581,"ip_address":"","ucode":"036EC20979D406","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/WrANpwBMr6DsGAE207QVs0YgfthMXy3MuEKJxR8icYibpGDCI1YX4DcpDq1EsTvlP8ffK1ibJDvmkX9LUU4yE8X0w/132","comment_is_top":false,"comment_ctime":1657671160,"is_pvip":true,"replies":[{"id":"127762","content":"great","user_name":"ä½œè€…å›å¤","comment_id":351274,"uid":"1181974","ip_address":"","utype":1,"ctime":1657675507,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"10247605752","product_id":100114501,"comment_content":"1.k8sæ„Ÿè§‰ä¸Šæ›´åƒæ˜¯ä¸€ä¸ªä»‹äºæ“ä½œç³»ç»Ÿå’Œåº”ç”¨ä¹‹é—´çš„æœåŠ¡ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿï¼Œå®ƒæä¾›äº†æ›´å¼ºå¤§çš„èµ„æºæŠ½è±¡åŠŸèƒ½ã€‚<br>2.schedulerå’Œkubeletæ¯”è¾ƒé‡è¦ã€‚å‰è€…æä¾›äº†podè°ƒåº¦åŠŸèƒ½ï¼Œæ²¡æœ‰å®ƒæœåŠ¡å°±æ— æ³•éƒ¨ç½²è¿è¡Œï¼›kubeletæ˜¯æ›´åŸºç¡€çš„ç»„ä»¶ï¼Œæ²¡æœ‰å®ƒå®¹å™¨éƒ½æ— æ³•è¿è¡Œï¼Œä¹Ÿæ— æ³•ä¸ŠæŠ¥èŠ‚ç‚¹çŠ¶æ€ã€‚","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579758,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657675507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352586,"user_name":"ä¸‰æºª","can_delete":false,"product_type":"c1","uid":2078022,"ip_address":"","ucode":"00807C1B166E5E","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b5/46/2ac4b984.jpg","comment_is_top":false,"comment_ctime":1658797544,"is_pvip":false,"replies":[{"id":"128259","content":"thanks","user_name":"ä½œè€…å›å¤","comment_id":352586,"uid":"1181974","ip_address":"","utype":1,"ctime":1658811562,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5953764840","product_id":100114501,"comment_content":"ç½—è€å¸ˆç”»æ€ç»´å¯¼å›¾æ˜¯çœŸçš„å¼º","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581490,"discussion_content":"thanks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658811562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351802,"user_name":"pyhhou","can_delete":false,"product_type":"c1","uid":1256496,"ip_address":"","ucode":"31EF8D50CF91A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ibZVAmmdAibBeVpUjzwId8ibgRzNk7fkuR5pgVicB5mFSjjmt2eNadlykVLKCyGA0GxGffbhqLsHnhDRgyzxcKUhjg/132","comment_is_top":false,"comment_ctime":1658201051,"is_pvip":false,"replies":[{"id":"127932","content":"<br>1. Podæ˜¯åº”ç”¨ç¨‹åºï¼Œnodeæ˜¯è®¡ç®—èŠ‚ç‚¹ï¼Œæ‰€ä»¥Podå°±è¢«è°ƒåº¦åˆ°nodeä¸Šè¿è¡Œã€‚<br><br>2.etcdæ˜¯åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œä¸€è‡´æ€§ç”±å®ƒä¿è¯ï¼Œä¸€èˆ¬ä¼šæœ‰å¤šä¸ªmasterèŠ‚ç‚¹ï¼Œå’Œä»»æ„ä¸€ä¸ªä¸Šé¢çš„apiserveré€šä¿¡ï¼Œéƒ½ä¼šå­˜åˆ°etcdé‡Œã€‚<br><br>3. kube-proxyæ˜¯ç»™Serviceå¯¹è±¡ç”¨çš„ï¼Œæ˜¯å››å±‚çš„è´Ÿè½½å‡è¡¡ã€‚","user_name":"ä½œè€…å›å¤","comment_id":351802,"uid":"1181974","ip_address":"","utype":1,"ctime":1658206591,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5953168347","product_id":100114501,"comment_content":"æœ‰å‡ ä¸ªé—®é¢˜æƒ³è¯·æ•™è€å¸ˆï¼š<br><br>1. Pod å’Œ Node çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥ç†è§£ä¸º Pod åœ¨ Node ä¸Šè¿è¡Œå’ŒæŒ‚è½½å—ï¼Ÿ<br><br>2. å½“é›†ç¾¤ä¸­æœ‰å¤šä¸ª Master å­˜åœ¨æ—¶ï¼ŒMaster å’Œ Worker æ˜¯å¦‚ä½•è¿›è¡Œäº¤æµçš„ï¼Ÿå¦‚æœä¸€ä¸ª Worker å¯ä»¥å’Œå¤šä¸ª Master è¿›è¡Œé€šä¿¡ï¼Œé‚£ä¹ˆ Master ä¹‹é—´æ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ï¼Ÿå¦‚æœ Worker åªèƒ½å’ŒæŸä¸€ä¸ªå¯¹åº”çš„ master è¿›è¡Œé€šä¿¡ï¼Œé‚£ä¹ˆ K8S æ˜¯å¦‚ä½•å¤„ç†å•ç‚¹æ•…éšœçš„ï¼Ÿ<br><br>3. kube-proxy çš„ä½œç”¨å’ŒæœåŠ¡å¯¹è±¡æ˜¯è°ï¼Ÿæ˜¯åŒä¸€ä¸ª node ä¸Šä¸åŒçš„ pod å—ï¼Ÿæˆ‘åœ¨æƒ³ container-runtime å·²ç»åŒ…å«äº†å¯¹å¤–çš„ç½‘ç»œæ¨¡å—ï¼Œè¿™é‡Œçš„ kube-proxy çš„ä½œç”¨å¯¹è±¡åº”è¯¥æ˜¯å±€é™äºé›†ç¾¤å†…éƒ¨ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580480,"discussion_content":"\n1. Podæ˜¯åº”ç”¨ç¨‹åºï¼Œnodeæ˜¯è®¡ç®—èŠ‚ç‚¹ï¼Œæ‰€ä»¥Podå°±è¢«è°ƒåº¦åˆ°nodeä¸Šè¿è¡Œã€‚\n\n2.etcdæ˜¯åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œä¸€è‡´æ€§ç”±å®ƒä¿è¯ï¼Œä¸€èˆ¬ä¼šæœ‰å¤šä¸ªmasterèŠ‚ç‚¹ï¼Œå’Œä»»æ„ä¸€ä¸ªä¸Šé¢çš„apiserveré€šä¿¡ï¼Œéƒ½ä¼šå­˜åˆ°etcdé‡Œã€‚\n\n3. kube-proxyæ˜¯ç»™Serviceå¯¹è±¡ç”¨çš„ï¼Œæ˜¯å››å±‚çš„è´Ÿè½½å‡è¡¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658206591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351366,"user_name":"ç¾¿è¾¾","can_delete":false,"product_type":"c1","uid":1659275,"ip_address":"","ucode":"48559E9D480C34","user_header":"https://static001.geekbang.org/account/avatar/00/19/51/8b/e3b827b7.jpg","comment_is_top":false,"comment_ctime":1657727752,"is_pvip":true,"replies":[{"id":"127796","content":"å®ƒæ˜¯åŸºäºdockerï¼Œç”¨é•œåƒå¯åŠ¨äº†Kubernetesã€‚","user_name":"ä½œè€…å›å¤","comment_id":351366,"uid":"1181974","ip_address":"","utype":1,"ctime":1657750602,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5952695048","product_id":100114501,"comment_content":"è€å¸ˆï¼Œæ˜¯ä¸æ˜¯minikubeçš„ä½œç”¨å°±æ˜¯æä¾›äº†ä»¥ä¸Šçš„åŸºç¡€ç»„ä»¶ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579867,"discussion_content":"å®ƒæ˜¯åŸºäºdockerï¼Œç”¨é•œåƒå¯åŠ¨äº†Kubernetesã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657750602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351362,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1657724861,"is_pvip":true,"replies":[{"id":"127810","content":"æ”¹åäº†ï¼Œä¸å«masteräº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":351362,"uid":"1181974","ip_address":"","utype":1,"ctime":1657764112,"user_name_real":"ç¼–è¾‘"}],"discussion_count":3,"race_medal":1,"score":"5952692157","product_id":100114501,"comment_content":"mac ä¸Šæ‰§è¡Œ kubectl get node, ä¸ºä»€ä¹ˆæ²¡æœ‰æ˜¾ç¤º master èŠ‚ç‚¹çš„ï¼Ÿ<br>NAME       STATUS   ROLES           AGE   VERSION<br>minikube   Ready    control-plane   2d    v1.24.1","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579900,"discussion_content":"æ”¹åäº†ï¼Œä¸å«masteräº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657764112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581264,"discussion_content":"å¯èƒ½æ˜¯v1.24.1æ”¹æ‰äº†å§ã€‚æˆ‘è¿™é‡Œv.1.23.3è¿˜æœ‰çš„ã€‚\n\nNAME       STATUS   ROLES                  AGE     VERSION\nminikube   Ready    control-plane,master   3d13h   v1.23.3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658676222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1087879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg","nickname":"dao","note":"","ucode":"4181FB270462CF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":580157,"discussion_content":"control-plane çš„è§’è‰²ï¼Œä¸å°±ç®—æ˜¯ Master node ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657935414,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351361,"user_name":"å¿§å¤©å°é¸¡","can_delete":false,"product_type":"c1","uid":1073947,"ip_address":"","ucode":"A1412BDC108FD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/63/1b/83ac7733.jpg","comment_is_top":false,"comment_ctime":1657724277,"is_pvip":false,"replies":[{"id":"127799","content":"masterå¯ä»¥æ¨ªå‘æ‰©å®¹ï¼Œkubeletä¸ŠæŠ¥é”™è¯¯ä¿¡æ¯ä¹Ÿæœ‰å¯èƒ½ï¼Œä½†è¿™ä¸ªææ€•æ— æ³•é¿å…ã€‚","user_name":"ä½œè€…å›å¤","comment_id":351361,"uid":"1181974","ip_address":"","utype":1,"ctime":1657750696,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"5952691573","product_id":100114501,"comment_content":"è¿™ä¸ªç»“æ„ï¼Œä¼šä¸ä¼šäº§ç”Ÿä¿¡æ¯æ¬ºéª—ï¼Ÿ<br>apiserverè´Ÿè´£å¤ªå¤šå†…å®¹ï¼Œä¼šä¸ä¼šæ»¡è´Ÿè·ï¼Œç›‘æ§é¢æ¿ä»etcdè¯»æ•°æ®ï¼Œ<br>å¦‚æœkubeletå¦‚æœä¸€ç›´ä¸ŠæŠ¥é”™è¯¯çš„ä¿¡æ¯ï¼Œæ˜¯ä¸æ˜¯ä¼šäº§ç”Ÿç›‘å¬é”™è¯¯çš„æƒ…å†µï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579870,"discussion_content":"masterå¯ä»¥æ¨ªå‘æ‰©å®¹ï¼Œkubeletä¸ŠæŠ¥é”™è¯¯ä¿¡æ¯ä¹Ÿæœ‰å¯èƒ½ï¼Œä½†è¿™ä¸ªææ€•æ— æ³•é¿å…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657750696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581266,"discussion_content":"åŒå­¦ï¼Œæ€ä¹ˆç†è§£è¿™é‡Œçš„â€œä¿¡æ¯æ¬ºéª—â€å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658676744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351360,"user_name":"æœ±é›¯","can_delete":false,"product_type":"c1","uid":1035744,"ip_address":"","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1657723536,"is_pvip":true,"replies":[{"id":"127798","content":"great","user_name":"ä½œè€…å›å¤","comment_id":351360,"uid":"1181974","ip_address":"","utype":1,"ctime":1657750632,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5952690832","product_id":100114501,"comment_content":"1. ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿï¼Ÿæ ¹æ®æˆ‘æ‰€å­¦åˆ°çŸ¥è¯†ï¼Œæ“ä½œç³»ç»Ÿæ˜¯å¸®åŠ©äººç®¡ç†ç¡¬ä»¶çš„ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ç®¡ç†å†…å­˜ï¼Œcpuï¼Œç¡¬ç›˜è¿™äº›å†…å®¹ã€‚æ–‡ä»¶æ˜¯ç¡¬ç›˜çš„æŠ½è±¡ï¼Œå†…å­˜æ˜¯å†…å­˜æ¡çš„æŠ½è±¡ï¼Œè¿›ç¨‹æ˜¯è¿è¡Œç¨‹åºçš„æŠ½è±¡ã€‚æ€»çš„æ¥è¯´ï¼Œæ“ä½œç³»ç»Ÿå°±æ˜¯ç¡¬ä»¶å†è½¯ä»¶å±‚é¢å¦‚ä½•è¢«æŠ½è±¡å’Œç®¡ç†çš„å·¥å…·ã€‚ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œk8sä¸ç®—æ“ä½œç³»ç»Ÿï¼Œå› ä¸ºk8så¹¶ä¸ç›´æ¥æ§åˆ¶ç¡¬ä»¶ï¼Œè€Œæ˜¯æ§åˆ¶æ›´é«˜çº§åˆ«çš„æŠ½è±¡è½¯ä»¶ã€‚ä½†ä»ç»“æœä¸Šæ¥çœ‹ï¼Œk8så¯ä»¥ç®¡ç†ï¼Œå¹¶ä¸”ä¸»è¦æ˜¯ä¸ºè¿™ä¸ªäº§ç”Ÿçš„ï¼Œæ‰€ä»¥åˆç®—æ˜¯æ“ä½œç³»ç»Ÿã€‚ä¸ä¼ ç»Ÿçš„æ“ä½œç³»ç»ŸåŒºåˆ«åœ¨äºï¼Œä¼ ç»Ÿæ“ä½œç³»ç»Ÿç®¡ç†å¯ä»¥æ›´å¤šæ˜¯å•æœºç®¡ç†ï¼Œæ— æ³•è·¨æœºå™¨è·¨é›†ç¾¤ç®¡ç†ï¼Œä½†k8så¯ä»¥ï¼Œå› ä¸ºk8så¤©ç„¶åœ¨äº‘ä¸Šã€‚<br>2. å¯¹äºä¸€ä¸ªæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œç®¡ç†çš„é‡ç‚¹åœ¨äºï¼Œç½‘ç»œï¼Œè®¡ç®—å’Œå­˜å‚¨ï¼Œç½‘ç»œæ–¹é¢ä¼šä½¿ç”¨åˆ°kube-proxyå’Œapiserverï¼Œè®¡ç®—æ–¹é¢æœ‰contonller-managerï¼Œschedulerï¼Œapiserverå’Œkubeletï¼Œå­˜å‚¨æ–¹é¢ä¸»è¦æ˜¯etcdï¼Œæˆ‘è§‰å¾—éƒ½æŒºé‡è¦ï¼Œç¼ºå°‘ä¸€ç¯éƒ½æ— æ³•æˆå°±æ“ä½œç³»ç»Ÿçš„ç®¡ç†äº†ï¼Œä½†ç¡¬è¦è¯´æœ€é‡è¦ï¼Œå¯èƒ½è¿˜æ˜¯etcdï¼Œæ¯•ç«Ÿå…¶ä»–çš„ä¸€å…³æœºå°±æ²¡äº†ï¼Œä½†å­˜å‚¨è¿˜åœ¨ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579869,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657750632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351355,"user_name":"psoracle","can_delete":false,"product_type":"c1","uid":1219195,"ip_address":"","ucode":"26F9B166508BBA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2xoGmvlQ9qfSibVpPJyyaEriavuWzXnuECrJITmGGHnGVuTibUuBho43Uib3Y5qgORHeSTxnOOSicxs0FV3HGvTpF0A/132","comment_is_top":false,"comment_ctime":1657718736,"is_pvip":false,"replies":[{"id":"127806","content":"great","user_name":"ä½œè€…å›å¤","comment_id":351355,"uid":"1181974","ip_address":"","utype":1,"ctime":1657751050,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5952686032","product_id":100114501,"comment_content":"å›ç­”ä¸‹æ€è€ƒé¢˜ï¼š<br>1. ä½ è§‰å¾— Kubernetes ç®—å¾—ä¸Šæ˜¯ä¸€ç§æ“ä½œç³»ç»Ÿå—ï¼Ÿ<br>éƒ½è¯´Kubernetesæ˜¯äº‘åŸç”Ÿæ—¶ä»£çš„æ“ä½œç³»ç»Ÿï¼Œç ”ç©¶ä¸æ·±ï¼Œè¯´ä¸‹è‡ªå·±çš„æ„Ÿå—ã€‚<br>Kubernetesçš„æ ¸å¿ƒæ˜¯å®¹å™¨ç¼–æ’ï¼Œå›´ç»•ç€è°ƒåº¦ï¼Œå‘æ˜äº†Podï¼Œå†é€šè¿‡å£°æ˜å¼apiã€æ§åˆ¶å™¨è¿™äº›æ¦‚å¿µå°†Podé«˜æ•ˆåœ°è°ƒåº¦ä¸è¿è¡Œèµ·æ¥ã€‚æ‰€ä»¥è¯´å®ƒç®¡ç†è½¯ä»¶ï¼ˆå®¹å™¨ï¼Œå¦‚ä¸šåŠ¡å®¹å™¨ï¼Œæœ¬è´¨æ˜¯Node OSä¸Šçš„ä¸€ä¸ªè¿›ç¨‹ï¼‰ï¼Œç¡®å®æ˜¯çš„ï¼Œå®ƒæ§åˆ¶äº†Podçš„å¯åœã€å‰¯æœ¬ç­‰ï¼›ä½†è¯´å®ƒç®¡ç†ç¡¬ä»¶ï¼Œå€’æ²¡çœ‹å‡ºæ¥ï¼ŒåƒCPUã€å†…å­˜ã€å­˜å‚¨ä¹Ÿåªå‚ä¸äº†è°ƒåº¦ç®—æ³•è€Œå·²ã€‚<br><br>2. å’ŒçœŸæ­£çš„æ“ä½œç³»ç»Ÿç›¸æ¯”æœ‰ä»€ä¹ˆå·®å¼‚ï¼Ÿè¯´è¯´ä½ ç†è§£çš„ Kubernetes ç»„ä»¶çš„ä½œç”¨ï¼Œä½ è§‰å¾—å“ªå‡ ä¸ªæœ€é‡è¦ï¼Ÿ<br>a. kube-apiserverï¼Œæ˜¯k8sç³»ç»Ÿå…¥å£ï¼Œç±»ä¼¼äºæ“ä½œç³»ç»Ÿä¸Šçš„ç³»ç»Ÿè°ƒç”¨<br>b. kube-schedulerï¼Œè°ƒåº¦å™¨ï¼Œå®¹å™¨ç¼–æ’æœ€ä¸»è¦çš„ç»„ä»¶ï¼Œè´Ÿè´£Podè°ƒåº¦ï¼Œç±»ä¼¼äºæ“ä½œç³»ç»Ÿä¸Šçš„æ§åˆ¶å™¨<br>c. kube-manage-controllerï¼Œæ§åˆ¶å™¨ï¼Œè´Ÿè´£ç®¡ç†k8sä¸­èµ„æºå¯¹è±¡<br>d. kubeletï¼ŒPodç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè´Ÿè´£Podè¿è¡Œç¯å¢ƒåˆ›å»ºï¼ŒåŒ…æ‹¬å„ç§CRIã€CNIç­‰å„ç§managerçš„ç®¡ç†<br>å½“ç„¶ï¼Œetcdå­˜å‚¨k8sæ‰€æœ‰å¯¹è±¡é…ç½®ï¼Œæä¾›æŸ¥è¯¢ä¸è®¢é˜…åŠŸèƒ½ï¼Œå¹¶ä¸”æ€§èƒ½ä¼˜ç§€ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579877,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657751051,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351350,"user_name":"psoracle","can_delete":false,"product_type":"c1","uid":1219195,"ip_address":"","ucode":"26F9B166508BBA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2xoGmvlQ9qfSibVpPJyyaEriavuWzXnuECrJITmGGHnGVuTibUuBho43Uib3Y5qgORHeSTxnOOSicxs0FV3HGvTpF0A/132","comment_is_top":false,"comment_ctime":1657716060,"is_pvip":false,"replies":[{"id":"127802","content":"æœ‰çš„æ—¶å€™è¡¨è¿°ä¼šçœç•¥ï¼Œä»€ä¹ˆéƒ½è¯´è¦ç»è¿‡apiserverä¹Ÿå¤ªéº»çƒ¦äº†ã€‚","user_name":"ä½œè€…å›å¤","comment_id":351350,"uid":"1181974","ip_address":"","utype":1,"ctime":1657750878,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"5952683356","product_id":100114501,"comment_content":"çœ‹å›¾kubeletè¿æ¥çš„æ˜¯apiserverï¼Œå¯æ€ä¹ˆåˆè¯´kubeletä¹Ÿç›´æ¥è®¿é—®etcdå‘¢ï¼Ÿä¸æ˜¯è¯´apiserveræ˜¯k8sé›†ç¾¤ä¸­å”¯ä¸€è®¿é—®etcdçš„ç»„ä»¶å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579873,"discussion_content":"æœ‰çš„æ—¶å€™è¡¨è¿°ä¼šçœç•¥ï¼Œä»€ä¹ˆéƒ½è¯´è¦ç»è¿‡apiserverä¹Ÿå¤ªéº»çƒ¦äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657750878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1219195,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/2xoGmvlQ9qfSibVpPJyyaEriavuWzXnuECrJITmGGHnGVuTibUuBho43Uib3Y5qgORHeSTxnOOSicxs0FV3HGvTpF0A/132","nickname":"psoracle","note":"","ucode":"26F9B166508BBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579916,"discussion_content":"è§£æƒ‘äº†ï¼Œè°¢è°¢ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657772237,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351309,"user_name":"å°æ—å­","can_delete":false,"product_type":"c1","uid":1145383,"ip_address":"","ucode":"058C95ECBFE422","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/27/77ca2bc2.jpg","comment_is_top":false,"comment_ctime":1657690840,"is_pvip":true,"replies":[{"id":"127773","content":"great","user_name":"ä½œè€…å›å¤","comment_id":351309,"uid":"1181974","ip_address":"","utype":1,"ctime":1657692897,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"5952658136","product_id":100114501,"comment_content":"æˆ‘è§‰å¾— etcd æ¯”è¾ƒé‡è¦ï¼Œå®ƒæŒ‚äº†ï¼Œæ•´ä¸ªé›†ç¾¤å°±èººäº†","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579787,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657692898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359029,"user_name":"...","can_delete":false,"product_type":"c1","uid":1896681,"ip_address":"åŒ—äº¬","ucode":"E3694D4CED77E0","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f0/e9/1ff0a3d5.jpg","comment_is_top":false,"comment_ctime":1665190144,"is_pvip":false,"replies":[{"id":"130558","content":"å¦‚æœè¦åœ¨masterèŠ‚ç‚¹ä¸Šç”¨kubectlæ“ä½œKuberneteså°±å¾—å®‰è£…ï¼Œä¸€èˆ¬å»ºè®®å®‰è£…ï¼Œæ“ä½œèµ·æ¥æ–¹ä¾¿ï¼Œä¸è£…ä¹Ÿå¯ä»¥ã€‚","user_name":"ä½œè€…å›å¤","comment_id":359029,"uid":"1181974","ip_address":"åŒ—äº¬","utype":1,"ctime":1665197923,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1665190144","product_id":100114501,"comment_content":"masterèŠ‚ç‚¹éœ€è¦å®‰è£…kubectlæ’ä»¶å—","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589609,"discussion_content":"å¦‚æœè¦åœ¨masterèŠ‚ç‚¹ä¸Šç”¨kubectlæ“ä½œKuberneteså°±å¾—å®‰è£…ï¼Œä¸€èˆ¬å»ºè®®å®‰è£…ï¼Œæ“ä½œèµ·æ¥æ–¹ä¾¿ï¼Œä¸è£…ä¹Ÿå¯ä»¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665197923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357505,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"åŒ—äº¬","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1663319991,"is_pvip":true,"replies":[{"id":"130142","content":"thanks","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1663396578,"ip_address":"åŒ—äº¬","comment_id":357505,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1663319991","product_id":100114501,"comment_content":"è€å¸ˆè®²å¾—å¾ˆæ¸…æ¥š~","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587942,"discussion_content":"thanks","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663396578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}