{"id":81497,"title":"36 | å¥—è·¯ç¯‡ï¼šæ€ä¹ˆè¯„ä¼°ç³»ç»Ÿçš„ç½‘ç»œæ€§èƒ½ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚</p><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬å›é¡¾äº†ç»å…¸çš„ C10K å’Œ C1000K é—®é¢˜ã€‚ç®€å•å›é¡¾ä¸€ä¸‹ï¼ŒC10K æ˜¯æŒ‡å¦‚ä½•å•æœºåŒæ—¶å¤„ç† 1 ä¸‡ä¸ªè¯·æ±‚ï¼ˆå¹¶å‘è¿æ¥1ä¸‡ï¼‰çš„é—®é¢˜ï¼Œè€Œ C1000K åˆ™æ˜¯å•æœºæ”¯æŒå¤„ç† 100 ä¸‡ä¸ªè¯·æ±‚ï¼ˆå¹¶å‘è¿æ¥100ä¸‡ï¼‰çš„é—®é¢˜ã€‚</p><p>I/O æ¨¡å‹çš„ä¼˜åŒ–ï¼Œæ˜¯è§£å†³ C10K é—®é¢˜çš„æœ€ä½³è‰¯æ–¹ã€‚Linux 2.6 ä¸­å¼•å…¥çš„ epollï¼Œå®Œç¾è§£å†³äº† C10K çš„é—®é¢˜ï¼Œå¹¶ä¸€ç›´æ²¿ç”¨è‡³ä»Šã€‚ä»Šå¤©çš„å¾ˆå¤šé«˜æ€§èƒ½ç½‘ç»œæ–¹æ¡ˆï¼Œä»éƒ½åŸºäº epollã€‚</p><p>è‡ªç„¶ï¼Œéšç€äº’è”ç½‘æŠ€æœ¯çš„æ™®åŠï¼Œå‚¬ç”Ÿå‡ºæ›´é«˜çš„æ€§èƒ½éœ€æ±‚ã€‚ä» C10K åˆ° C100Kï¼Œæˆ‘ä»¬åªéœ€è¦å¢åŠ ç³»ç»Ÿçš„ç‰©ç†èµ„æºï¼Œå°±å¯ä»¥æ»¡è¶³è¦æ±‚ï¼›ä½†ä» C100K åˆ° C1000K ï¼Œå…‰å¢åŠ ç‰©ç†èµ„æºå°±ä¸å¤Ÿäº†ã€‚</p><p>è¿™æ—¶ï¼Œå°±è¦å¯¹ç³»ç»Ÿçš„è½¯ç¡¬ä»¶è¿›è¡Œç»Ÿä¸€ä¼˜åŒ–ï¼Œä»ç¡¬ä»¶çš„ä¸­æ–­å¤„ç†ï¼Œåˆ°ç½‘ç»œåè®®æ ˆçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡ã€è¿æ¥çŠ¶æ€è·Ÿè¸ªã€ç¼“å­˜é˜Ÿåˆ—ï¼Œå†åˆ°åº”ç”¨ç¨‹åºçš„å·¥ä½œæ¨¡å‹ç­‰çš„æ•´ä¸ªç½‘ç»œé“¾è·¯ï¼Œéƒ½éœ€è¦æ·±å…¥ä¼˜åŒ–ã€‚</p><p>å†è¿›ä¸€æ­¥ï¼Œè¦å®ç° C10Mï¼Œå°±ä¸æ˜¯å¢åŠ ç‰©ç†èµ„æºã€è°ƒä¼˜å†…æ ¸å’Œåº”ç”¨ç¨‹åºå¯ä»¥è§£å†³çš„é—®é¢˜äº†ã€‚è¿™æ—¶å†…æ ¸ä¸­å†—é•¿çš„ç½‘ç»œåè®®æ ˆå°±æˆäº†æœ€å¤§çš„è´Ÿæ‹…ã€‚</p><ul>\n<li>\n<p>éœ€è¦ç”¨ XDP æ–¹å¼ï¼Œåœ¨å†…æ ¸åè®®æ ˆä¹‹å‰ï¼Œå…ˆå¤„ç†ç½‘ç»œåŒ…ã€‚</p>\n</li>\n<li>\n<p>æˆ–åŸºäº DPDK ï¼Œç›´æ¥è·³è¿‡ç½‘ç»œåè®®æ ˆï¼Œåœ¨ç”¨æˆ·ç©ºé—´é€šè¿‡è½®è¯¢çš„æ–¹å¼å¤„ç†ã€‚</p>\n</li>\n</ul><p>å…¶ä¸­ï¼ŒDPDK æ˜¯ç›®å‰æœ€ä¸»æµçš„é«˜æ€§èƒ½ç½‘ç»œæ–¹æ¡ˆï¼Œä¸è¿‡ï¼Œè¿™éœ€è¦èƒ½æ”¯æŒ DPDK çš„ç½‘å¡é…åˆä½¿ç”¨ã€‚</p><!-- [[[read_end]]] --><p>å½“ç„¶ï¼Œå®é™…ä¸Šï¼Œåœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å•æœºå¹¶å‘ 1000 ä¸‡è¯·æ±‚ã€‚é€šè¿‡è°ƒæ•´ç³»ç»Ÿæ¶æ„ï¼ŒæŠŠè¯·æ±‚åˆ†å‘åˆ°å¤šå°æœåŠ¡å™¨ä¸­å¹¶è¡Œå¤„ç†ï¼Œæ‰æ˜¯æ›´ç®€å•ã€æ‰©å±•æ€§æ›´å¥½çš„æ–¹æ¡ˆã€‚</p><p>ä¸è¿‡ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå°±éœ€è¦æˆ‘ä»¬è¯„ä¼°ç³»ç»Ÿçš„ç½‘ç»œæ€§èƒ½ï¼Œä»¥ä¾¿è€ƒå¯Ÿç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œå¹¶ä¸ºå®¹é‡è§„åˆ’æä¾›åŸºå‡†æ•°æ®ã€‚</p><p>é‚£ä¹ˆï¼Œåˆ°åº•è¯¥æ€ä¹ˆè¯„ä¼°ç½‘ç»œçš„æ€§èƒ½å‘¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘å°±å¸¦ä½ ä¸€èµ·æ¥çœ‹çœ‹è¿™ä¸ªé—®é¢˜ã€‚</p><h2>æ€§èƒ½æŒ‡æ ‡å›é¡¾</h2><p>åœ¨è¯„ä¼°ç½‘ç»œæ€§èƒ½å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹ï¼Œè¡¡é‡ç½‘ç»œæ€§èƒ½çš„æŒ‡æ ‡ã€‚åœ¨ Linux ç½‘ç»œåŸºç¡€ç¯‡ä¸­ï¼Œæˆ‘ä»¬æ›¾ç»è¯´åˆ°ï¼Œå¸¦å®½ã€ååé‡ã€å»¶æ—¶ã€PPS ç­‰ï¼Œéƒ½æ˜¯æœ€å¸¸ç”¨çš„ç½‘ç»œæ€§èƒ½æŒ‡æ ‡ã€‚è¿˜è®°å¾—å®ƒä»¬çš„å…·ä½“å«ä¹‰å—ï¼Ÿä½ å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹ï¼Œå†ç»§ç»­ä¸‹é¢çš„å†…å®¹ã€‚</p><p>é¦–å…ˆï¼Œ<strong>å¸¦å®½</strong>ï¼Œè¡¨ç¤ºé“¾è·¯çš„æœ€å¤§ä¼ è¾“é€Ÿç‡ï¼Œå•ä½æ˜¯ b/sï¼ˆæ¯”ç‰¹/ç§’ï¼‰ã€‚åœ¨ä½ ä¸ºæœåŠ¡å™¨é€‰è´­ç½‘å¡æ—¶ï¼Œå¸¦å®½å°±æ˜¯æœ€æ ¸å¿ƒçš„å‚è€ƒæŒ‡æ ‡ã€‚å¸¸ç”¨çš„å¸¦å®½æœ‰ 1000Mã€10Gã€40Gã€100G ç­‰ã€‚</p><p>ç¬¬äºŒï¼Œ<strong>ååé‡</strong>ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¸¢åŒ…æ—¶çš„æœ€å¤§æ•°æ®ä¼ è¾“é€Ÿç‡ï¼Œå•ä½é€šå¸¸ä¸º b/s ï¼ˆæ¯”ç‰¹/ç§’ï¼‰æˆ–è€… B/sï¼ˆå­—èŠ‚/ç§’ï¼‰ã€‚ååé‡å—å¸¦å®½çš„é™åˆ¶ï¼Œååé‡/å¸¦å®½ä¹Ÿå°±æ˜¯è¯¥ç½‘ç»œé“¾è·¯çš„ä½¿ç”¨ç‡ã€‚</p><p>ç¬¬ä¸‰ï¼Œ<strong>å»¶æ—¶</strong>ï¼Œè¡¨ç¤ºä»ç½‘ç»œè¯·æ±‚å‘å‡ºåï¼Œä¸€ç›´åˆ°æ”¶åˆ°è¿œç«¯å“åº”ï¼Œæ‰€éœ€è¦çš„æ—¶é—´å»¶è¿Ÿã€‚è¿™ä¸ªæŒ‡æ ‡åœ¨ä¸åŒåœºæ™¯ä¸­å¯èƒ½ä¼šæœ‰ä¸åŒçš„å«ä¹‰ã€‚å®ƒå¯ä»¥è¡¨ç¤ºå»ºç«‹è¿æ¥éœ€è¦çš„æ—¶é—´ï¼ˆæ¯”å¦‚ TCP æ¡æ‰‹å»¶æ—¶ï¼‰ï¼Œæˆ–è€…ä¸€ä¸ªæ•°æ®åŒ…å¾€è¿”æ‰€éœ€æ—¶é—´ï¼ˆæ¯”å¦‚ RTTï¼‰ã€‚</p><p>æœ€åï¼Œ<strong>PPS</strong>ï¼Œæ˜¯ Packet Per Secondï¼ˆåŒ…/ç§’ï¼‰çš„ç¼©å†™ï¼Œè¡¨ç¤ºä»¥ç½‘ç»œåŒ…ä¸ºå•ä½çš„ä¼ è¾“é€Ÿç‡ã€‚PPS é€šå¸¸ç”¨æ¥è¯„ä¼°ç½‘ç»œçš„è½¬å‘èƒ½åŠ›ï¼Œè€ŒåŸºäº Linux æœåŠ¡å™¨çš„è½¬å‘ï¼Œå¾ˆå®¹æ˜“å—åˆ°ç½‘ç»œåŒ…å¤§å°çš„å½±å“ï¼ˆäº¤æ¢æœºé€šå¸¸ä¸ä¼šå—åˆ°å¤ªå¤§å½±å“ï¼Œå³äº¤æ¢æœºå¯ä»¥çº¿æ€§è½¬å‘ï¼‰ã€‚</p><p>è¿™å››ä¸ªæŒ‡æ ‡ä¸­ï¼Œå¸¦å®½è·Ÿç‰©ç†ç½‘å¡é…ç½®æ˜¯ç›´æ¥å…³è”çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç½‘å¡ç¡®å®šåï¼Œå¸¦å®½ä¹Ÿå°±ç¡®å®šäº†ï¼ˆå½“ç„¶ï¼Œå®é™…å¸¦å®½ä¼šå—é™äºæ•´ä¸ªç½‘ç»œé“¾è·¯ä¸­æœ€å°çš„é‚£ä¸ªæ¨¡å—ï¼‰ã€‚</p><p>å¦å¤–ï¼Œä½ å¯èƒ½åœ¨å¾ˆå¤šåœ°æ–¹å¬è¯´è¿‡â€œç½‘ç»œå¸¦å®½æµ‹è¯•â€ï¼Œè¿™é‡Œæµ‹è¯•çš„å®é™…ä¸Šä¸æ˜¯å¸¦å®½ï¼Œè€Œæ˜¯ç½‘ç»œååé‡ã€‚Linux æœåŠ¡å™¨çš„ç½‘ç»œååé‡ä¸€èˆ¬ä¼šæ¯”å¸¦å®½å°ï¼Œè€Œå¯¹äº¤æ¢æœºç­‰ä¸“é—¨çš„ç½‘ç»œè®¾å¤‡æ¥è¯´ï¼Œååé‡ä¸€èˆ¬ä¼šæ¥è¿‘å¸¦å®½ã€‚</p><p>æœ€åçš„ PPSï¼Œåˆ™æ˜¯ä»¥ç½‘ç»œåŒ…ä¸ºå•ä½çš„ç½‘ç»œä¼ è¾“é€Ÿç‡ï¼Œé€šå¸¸ç”¨åœ¨éœ€è¦å¤§é‡è½¬å‘çš„åœºæ™¯ä¸­ã€‚è€Œå¯¹ TCP æˆ–è€… Web æœåŠ¡æ¥è¯´ï¼Œæ›´å¤šä¼šç”¨å¹¶å‘è¿æ¥æ•°å’Œæ¯ç§’è¯·æ±‚æ•°ï¼ˆQPSï¼ŒQuery per Secondï¼‰ç­‰æŒ‡æ ‡ï¼Œå®ƒä»¬æ›´èƒ½ååº”å®é™…åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</p><h2>ç½‘ç»œåŸºå‡†æµ‹è¯•</h2><p>ç†Ÿæ‚‰äº†ç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œå¦‚ä½•é€šè¿‡æ€§èƒ½æµ‹è¯•æ¥ç¡®å®šè¿™äº›æŒ‡æ ‡çš„åŸºå‡†å€¼ã€‚</p><p>ä½ å¯ä»¥å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“ï¼ŒLinux ç½‘ç»œåŸºäº TCP/IP åè®®æ ˆï¼Œè€Œä¸åŒåè®®å±‚çš„è¡Œä¸ºæ˜¾ç„¶ä¸åŒã€‚é‚£ä¹ˆï¼Œæµ‹è¯•ä¹‹å‰ï¼Œä½ åº”è¯¥å¼„æ¸…æ¥šï¼Œä½ è¦è¯„ä¼°çš„ç½‘ç»œæ€§èƒ½ï¼Œç©¶ç«Ÿå±äºåè®®æ ˆçš„å“ªä¸€å±‚ï¼Ÿæ¢å¥è¯è¯´ï¼Œä½ çš„åº”ç”¨ç¨‹åºåŸºäºåè®®æ ˆçš„å“ªä¸€å±‚å‘¢ï¼Ÿ</p><p>æ ¹æ®å‰é¢å­¦è¿‡çš„ TCP/IP åè®®æ ˆçš„åŸç†ï¼Œè¿™ä¸ªé—®é¢˜åº”è¯¥ä¸éš¾å›ç­”ã€‚æ¯”å¦‚ï¼š</p><ul>\n<li>\n<p>åŸºäº HTTP æˆ–è€… HTTPS çš„ Web åº”ç”¨ç¨‹åºï¼Œæ˜¾ç„¶å±äºåº”ç”¨å±‚ï¼Œéœ€è¦æˆ‘ä»¬æµ‹è¯• HTTP/HTTPS çš„æ€§èƒ½ï¼›</p>\n</li>\n<li>\n<p>è€Œå¯¹å¤§å¤šæ•°æ¸¸æˆæœåŠ¡å™¨æ¥è¯´ï¼Œä¸ºäº†æ”¯æŒæ›´å¤§çš„åŒæ—¶åœ¨çº¿äººæ•°ï¼Œé€šå¸¸ä¼šåŸºäº TCP æˆ– UDP ï¼Œä¸å®¢æˆ·ç«¯è¿›è¡Œäº¤äº’ï¼Œè¿™æ—¶å°±éœ€è¦æˆ‘ä»¬æµ‹è¯• TCP/UDP çš„æ€§èƒ½ï¼›</p>\n</li>\n<li>\n<p>å½“ç„¶ï¼Œè¿˜æœ‰ä¸€äº›åœºæ™¯ï¼Œæ˜¯æŠŠ Linux ä½œä¸ºä¸€ä¸ªè½¯äº¤æ¢æœºæˆ–è€…è·¯ç”±å™¨æ¥ç”¨çš„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æ›´å…³æ³¨ç½‘ç»œåŒ…çš„å¤„ç†èƒ½åŠ›ï¼ˆå³ PPSï¼‰ï¼Œé‡ç‚¹å…³æ³¨ç½‘ç»œå±‚çš„è½¬å‘æ€§èƒ½ã€‚</p>\n</li>\n</ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±å¸¦ä½ ä»ä¸‹å¾€ä¸Šï¼Œäº†è§£ä¸åŒåè®®å±‚çš„ç½‘ç»œæ€§èƒ½æµ‹è¯•æ–¹æ³•ã€‚ä¸è¿‡è¦æ³¨æ„ï¼Œä½å±‚åè®®æ˜¯å…¶ä¸Šçš„å„å±‚ç½‘ç»œåè®®çš„åŸºç¡€ã€‚è‡ªç„¶ï¼Œä½å±‚åè®®çš„æ€§èƒ½ï¼Œä¹Ÿå°±å†³å®šäº†é«˜å±‚çš„ç½‘ç»œæ€§èƒ½ã€‚</p><p>æ³¨æ„ï¼Œä»¥ä¸‹æ‰€æœ‰çš„æµ‹è¯•æ–¹æ³•ï¼Œéƒ½éœ€è¦ä¸¤å° Linux è™šæ‹Ÿæœºã€‚å…¶ä¸­ä¸€å°ï¼Œå¯ä»¥å½“ä½œå¾…æµ‹è¯•çš„ç›®æ ‡æœºå™¨ï¼›è€Œå¦ä¸€å°ï¼Œåˆ™å¯ä»¥å½“ä½œæ­£åœ¨è¿è¡Œç½‘ç»œæœåŠ¡çš„å®¢æˆ·ç«¯ï¼Œç”¨æ¥è¿è¡Œæµ‹è¯•å·¥å…·ã€‚</p><h2>å„åè®®å±‚çš„æ€§èƒ½æµ‹è¯•</h2><h3>è½¬å‘æ€§èƒ½</h3><p>æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ï¼Œç½‘ç»œæ¥å£å±‚å’Œç½‘ç»œå±‚ï¼Œå®ƒä»¬ä¸»è¦è´Ÿè´£ç½‘ç»œåŒ…çš„å°è£…ã€å¯»å€ã€è·¯ç”±ä»¥åŠå‘é€å’Œæ¥æ”¶ã€‚åœ¨è¿™ä¸¤ä¸ªç½‘ç»œåè®®å±‚ä¸­ï¼Œæ¯ç§’å¯å¤„ç†çš„ç½‘ç»œåŒ…æ•° PPSï¼Œå°±æ˜¯æœ€é‡è¦çš„æ€§èƒ½æŒ‡æ ‡ã€‚ç‰¹åˆ«æ˜¯ 64B å°åŒ…çš„å¤„ç†èƒ½åŠ›ï¼Œå€¼å¾—æˆ‘ä»¬ç‰¹åˆ«å…³æ³¨ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•æ¥æµ‹è¯•ç½‘ç»œåŒ…çš„å¤„ç†èƒ½åŠ›å‘¢ï¼Ÿ</p><p>è¯´åˆ°ç½‘ç»œåŒ…ç›¸å…³çš„æµ‹è¯•ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—é™Œç”Ÿã€‚ä¸è¿‡ï¼Œå…¶å®åœ¨ä¸“æ å¼€å¤´çš„ CPU æ€§èƒ½ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°±æ¥è§¦è¿‡ä¸€ä¸ªç›¸å…³å·¥å…·ï¼Œä¹Ÿå°±æ˜¯è½¯ä¸­æ–­æ¡ˆä¾‹ä¸­çš„ hping3ã€‚</p><p>åœ¨é‚£ä¸ªæ¡ˆä¾‹ä¸­ï¼Œhping3 ä½œä¸ºä¸€ä¸ª SYN æ”»å‡»çš„å·¥å…·æ¥ä½¿ç”¨ã€‚å®é™…ä¸Šï¼Œ hping3 æ›´å¤šçš„ç”¨é€”ï¼Œæ˜¯ä½œä¸ºä¸€ä¸ªæµ‹è¯•ç½‘ç»œåŒ…å¤„ç†èƒ½åŠ›çš„æ€§èƒ½å·¥å…·ã€‚</p><p>ä»Šå¤©æˆ‘å†æ¥ä»‹ç»å¦ä¸€ä¸ªæ›´å¸¸ç”¨çš„å·¥å…·ï¼ŒLinux å†…æ ¸è‡ªå¸¦çš„é«˜æ€§èƒ½ç½‘ç»œæµ‹è¯•å·¥å…· <a href=\"https://wiki.linuxfoundation.org/networking/pktgen\">pktgen</a>ã€‚pktgen æ”¯æŒä¸°å¯Œçš„è‡ªå®šä¹‰é€‰é¡¹ï¼Œæ–¹ä¾¿ä½ æ ¹æ®å®é™…éœ€è¦æ„é€ æ‰€éœ€ç½‘ç»œåŒ…ï¼Œä»è€Œæ›´å‡†ç¡®åœ°æµ‹è¯•å‡ºç›®æ ‡æœåŠ¡å™¨çš„æ€§èƒ½ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨ Linux ç³»ç»Ÿä¸­ï¼Œä½ å¹¶ä¸èƒ½ç›´æ¥æ‰¾åˆ° pktgen å‘½ä»¤ã€‚å› ä¸º pktgen ä½œä¸ºä¸€ä¸ªå†…æ ¸çº¿ç¨‹æ¥è¿è¡Œï¼Œéœ€è¦ä½ åŠ è½½ pktgen å†…æ ¸æ¨¡å—åï¼Œå†é€šè¿‡ /proc æ–‡ä»¶ç³»ç»Ÿæ¥äº¤äº’ã€‚ä¸‹é¢å°±æ˜¯ pktgen å¯åŠ¨çš„ä¸¤ä¸ªå†…æ ¸çº¿ç¨‹å’Œ /proc æ–‡ä»¶ç³»ç»Ÿçš„äº¤äº’æ–‡ä»¶ï¼š</p><pre><code>$ modprobe pktgen\n$ ps -ef | grep pktgen | grep -v grep\nroot     26384     2  0 06:17 ?        00:00:00 [kpktgend_0]\nroot     26385     2  0 06:17 ?        00:00:00 [kpktgend_1]\n$ ls /proc/net/pktgen/\nkpktgend_0  kpktgend_1  pgctrl\n</code></pre><p>pktgen åœ¨æ¯ä¸ª CPU ä¸Šå¯åŠ¨ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œå¹¶å¯ä»¥é€šè¿‡ /proc/net/pktgen ä¸‹é¢çš„åŒåæ–‡ä»¶ï¼Œè·Ÿè¿™äº›çº¿ç¨‹äº¤äº’ï¼›è€Œ pgctrl åˆ™ä¸»è¦ç”¨æ¥æ§åˆ¶è¿™æ¬¡æµ‹è¯•çš„å¼€å¯å’Œåœæ­¢ã€‚</p><blockquote>\n<p>å¦‚æœ modprobe å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œè¯´æ˜ä½ çš„å†…æ ¸æ²¡æœ‰é…ç½® CONFIG_NET_PKTGEN é€‰é¡¹ã€‚è¿™å°±éœ€è¦ä½ é…ç½® pktgen å†…æ ¸æ¨¡å—ï¼ˆå³ CONFIG_NET_PKTGEN=mï¼‰åï¼Œé‡æ–°ç¼–è¯‘å†…æ ¸ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚</p>\n</blockquote><p>åœ¨ä½¿ç”¨ pktgen æµ‹è¯•ç½‘ç»œæ€§èƒ½æ—¶ï¼Œéœ€è¦å…ˆç»™æ¯ä¸ªå†…æ ¸çº¿ç¨‹ kpktgend_X ä»¥åŠæµ‹è¯•ç½‘å¡ï¼Œé…ç½® pktgen é€‰é¡¹ï¼Œç„¶åå†é€šè¿‡ pgctrl å¯åŠ¨æµ‹è¯•ã€‚</p><p>ä»¥å‘åŒ…æµ‹è¯•ä¸ºä¾‹ï¼Œå‡è®¾å‘åŒ…æœºå™¨ä½¿ç”¨çš„ç½‘å¡æ˜¯ eth0ï¼Œè€Œç›®æ ‡æœºå™¨çš„ IP åœ°å€ä¸º 192.168.0.30ï¼ŒMAC åœ°å€ä¸º 11:11:11:11:11:11ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f0/09/f01dc79465e7f1d03b6fbdabbe4ad109.png?wh=1310*466\" alt=\"\"></p><p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯ä¸€ä¸ªå‘åŒ…æµ‹è¯•çš„ç¤ºä¾‹ã€‚</p><pre><code># å®šä¹‰ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œæ–¹ä¾¿åé¢é…ç½®å„ç§æµ‹è¯•é€‰é¡¹\nfunction pgset() {\n    local result\n    echo $1 &gt; $PGDEV\n\n    result=`cat $PGDEV | fgrep &quot;Result: OK:&quot;`\n    if [ &quot;$result&quot; = &quot;&quot; ]; then\n         cat $PGDEV | fgrep Result:\n    fi\n}\n\n# ä¸º0å·çº¿ç¨‹ç»‘å®šeth0ç½‘å¡\nPGDEV=/proc/net/pktgen/kpktgend_0\npgset &quot;rem_device_all&quot;   # æ¸…ç©ºç½‘å¡ç»‘å®š\npgset &quot;add_device eth0&quot;  # æ·»åŠ eth0ç½‘å¡\n\n# é…ç½®eth0ç½‘å¡çš„æµ‹è¯•é€‰é¡¹\nPGDEV=/proc/net/pktgen/eth0\npgset &quot;count 1000000&quot;    # æ€»å‘åŒ…æ•°é‡\npgset &quot;delay 5000&quot;       # ä¸åŒåŒ…ä¹‹é—´çš„å‘é€å»¶è¿Ÿ(å•ä½çº³ç§’)\npgset &quot;clone_skb 0&quot;      # SKBåŒ…å¤åˆ¶\npgset &quot;pkt_size 64&quot;      # ç½‘ç»œåŒ…å¤§å°\npgset &quot;dst 192.168.0.30&quot; # ç›®çš„IP\npgset &quot;dst_mac 11:11:11:11:11:11&quot;  # ç›®çš„MAC\n\n# å¯åŠ¨æµ‹è¯•\nPGDEV=/proc/net/pktgen/pgctrl\npgset &quot;start&quot;\n</code></pre><p>ç¨ç­‰ä¸€ä¼šå„¿ï¼Œæµ‹è¯•å®Œæˆåï¼Œç»“æœå¯ä»¥ä» /proc æ–‡ä»¶ç³»ç»Ÿä¸­è·å–ã€‚é€šè¿‡ä¸‹é¢ä»£ç æ®µä¸­çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆšæ‰çš„æµ‹è¯•æŠ¥å‘Šï¼š</p><pre><code>$ cat /proc/net/pktgen/eth0\nParams: count 1000000  min_pkt_size: 64  max_pkt_size: 64\n     frags: 0  delay: 0  clone_skb: 0  ifname: eth0\n     flows: 0 flowlen: 0\n...\nCurrent:\n     pkts-sofar: 1000000  errors: 0\n     started: 1534853256071us  stopped: 1534861576098us idle: 70673us\n...\nResult: OK: 8320027(c8249354+d70673) usec, 1000000 (64byte,0frags)\n  120191pps 61Mb/sec (61537792bps) errors: 0\n</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œæµ‹è¯•æŠ¥å‘Šä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul>\n<li>\n<p>ç¬¬ä¸€éƒ¨åˆ†çš„ Params æ˜¯æµ‹è¯•é€‰é¡¹ï¼›</p>\n</li>\n<li>\n<p>ç¬¬äºŒéƒ¨åˆ†çš„ Current æ˜¯æµ‹è¯•è¿›åº¦ï¼Œå…¶ä¸­ï¼Œ packts so farï¼ˆpkts-sofarï¼‰è¡¨ç¤ºå·²ç»å‘é€äº† 100 ä¸‡ä¸ªåŒ…ï¼Œä¹Ÿå°±è¡¨æ˜æµ‹è¯•å·²å®Œæˆã€‚</p>\n</li>\n<li>\n<p>ç¬¬ä¸‰éƒ¨åˆ†çš„ Result æ˜¯æµ‹è¯•ç»“æœï¼ŒåŒ…å«æµ‹è¯•æ‰€ç”¨æ—¶é—´ã€ç½‘ç»œåŒ…æ•°é‡å’Œåˆ†ç‰‡ã€PPSã€ååé‡ä»¥åŠé”™è¯¯æ•°ã€‚</p>\n</li>\n</ul><p>æ ¹æ®ä¸Šé¢çš„ç»“æœï¼Œæˆ‘ä»¬å‘ç°ï¼ŒPPS ä¸º 12 ä¸‡ï¼Œååé‡ä¸º 61 Mb/sï¼Œæ²¡æœ‰å‘ç”Ÿé”™è¯¯ã€‚é‚£ä¹ˆï¼Œ12 ä¸‡çš„ PPS å¥½ä¸å¥½å‘¢ï¼Ÿ</p><p>ä½œä¸ºå¯¹æ¯”ï¼Œä½ å¯ä»¥è®¡ç®—ä¸€ä¸‹åƒå…†äº¤æ¢æœºçš„ PPSã€‚äº¤æ¢æœºå¯ä»¥è¾¾åˆ°çº¿é€Ÿï¼ˆæ»¡è´Ÿè½½æ—¶ï¼Œæ— å·®é”™è½¬å‘ï¼‰ï¼Œå®ƒçš„ PPS å°±æ˜¯ 1000Mbit é™¤ä»¥ä»¥å¤ªç½‘å¸§çš„å¤§å°ï¼Œå³ 1000Mbps/((64+20)*8bit) = 1.5 Mppsï¼ˆå…¶ä¸­ï¼Œ20B ä¸ºä»¥å¤ªç½‘å¸§å‰å¯¼å’Œå¸§é—´è·çš„å¤§å°ï¼‰ã€‚</p><p>ä½ çœ‹ï¼Œå³ä½¿æ˜¯åƒå…†äº¤æ¢æœºçš„ PPSï¼Œä¹Ÿå¯ä»¥è¾¾åˆ° 150 ä¸‡ PPSï¼Œæ¯”æˆ‘ä»¬æµ‹è¯•å¾—åˆ°çš„ 12 ä¸‡å¤§å¤šäº†ã€‚æ‰€ä»¥ï¼Œçœ‹åˆ°è¿™ä¸ªæ•°å€¼ä½ å¹¶ä¸ç”¨æ‹…å¿ƒï¼Œç°åœ¨çš„å¤šæ ¸æœåŠ¡å™¨å’Œä¸‡å…†ç½‘å¡å·²ç»å¾ˆæ™®éäº†ï¼Œç¨åšä¼˜åŒ–å°±å¯ä»¥è¾¾åˆ°æ•°ç™¾ä¸‡çš„ PPSã€‚è€Œä¸”ï¼Œå¦‚æœä½ ç”¨äº†ä¸ŠèŠ‚è¯¾è®²åˆ°çš„ DPDK æˆ– XDP ï¼Œè¿˜èƒ½è¾¾åˆ°åƒä¸‡æ•°é‡çº§ã€‚</p><h3>TCP/UDP æ€§èƒ½</h3><p>æŒæ¡äº† PPS çš„æµ‹è¯•æ–¹æ³•ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹TCP å’Œ UDP çš„æ€§èƒ½æµ‹è¯•æ–¹æ³•ã€‚è¯´åˆ° TCP å’Œ UDP çš„æµ‹è¯•ï¼Œæˆ‘æƒ³ä½ å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œç”šè‡³å¯èƒ½ä¸€ä¸‹å­å°±èƒ½æƒ³åˆ°ç›¸åº”çš„æµ‹è¯•å·¥å…·ï¼Œæ¯”å¦‚ iperf æˆ–è€… netperfã€‚</p><p>ç‰¹åˆ«æ˜¯ç°åœ¨çš„äº‘è®¡ç®—æ—¶ä»£ï¼Œåœ¨ä½ åˆšæ‹¿åˆ°ä¸€æ‰¹è™šæ‹Ÿæœºæ—¶ï¼Œé¦–å…ˆè¦åšçš„ï¼Œåº”è¯¥å°±æ˜¯ç”¨ iperf ï¼Œæµ‹è¯•ä¸€ä¸‹ç½‘ç»œæ€§èƒ½æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p><p>iperf å’Œ netperf éƒ½æ˜¯æœ€å¸¸ç”¨çš„ç½‘ç»œæ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œæµ‹è¯• TCP å’Œ UDP çš„ååé‡ã€‚å®ƒä»¬éƒ½ä»¥å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šä¿¡çš„æ–¹å¼ï¼Œæµ‹è¯•ä¸€æ®µæ—¶é—´å†…çš„å¹³å‡ååé‡ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä»¥ iperf ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹ TCP æ€§èƒ½çš„æµ‹è¯•æ–¹æ³•ã€‚ç›®å‰ï¼Œiperf çš„æœ€æ–°ç‰ˆæœ¬ä¸º iperf3ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…ï¼š</p><pre><code># Ubuntu\napt-get install iperf3\n# CentOS\nyum install iperf3\n</code></pre><p>ç„¶åï¼Œåœ¨ç›®æ ‡æœºå™¨ä¸Šå¯åŠ¨ iperf æœåŠ¡ç«¯ï¼š</p><pre><code># -sè¡¨ç¤ºå¯åŠ¨æœåŠ¡ç«¯ï¼Œ-iè¡¨ç¤ºæ±‡æŠ¥é—´éš”ï¼Œ-pè¡¨ç¤ºç›‘å¬ç«¯å£\n$ iperf3 -s -i 1 -p 10000\n</code></pre><p>æ¥ç€ï¼Œåœ¨å¦ä¸€å°æœºå™¨ä¸Šè¿è¡Œ iperf å®¢æˆ·ç«¯ï¼Œè¿è¡Œæµ‹è¯•ï¼š</p><pre><code># -cè¡¨ç¤ºå¯åŠ¨å®¢æˆ·ç«¯ï¼Œ192.168.0.30ä¸ºç›®æ ‡æœåŠ¡å™¨çš„IP\n# -bè¡¨ç¤ºç›®æ ‡å¸¦å®½(å•ä½æ˜¯bits/s)\n# -tè¡¨ç¤ºæµ‹è¯•æ—¶é—´\n# -Pè¡¨ç¤ºå¹¶å‘æ•°ï¼Œ-pè¡¨ç¤ºç›®æ ‡æœåŠ¡å™¨ç›‘å¬ç«¯å£\n$ iperf3 -c 192.168.0.30 -b 1G -t 15 -P 2 -p 10000\n</code></pre><p>ç¨ç­‰ä¸€ä¼šå„¿ï¼ˆ15ç§’ï¼‰æµ‹è¯•ç»“æŸåï¼Œå›åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹ iperf çš„æŠ¥å‘Šï¼š</p><pre><code>[ ID] Interval           Transfer     Bandwidth\n...\n[SUM]   0.00-15.04  sec  0.00 Bytes  0.00 bits/sec                  sender\n[SUM]   0.00-15.04  sec  1.51 GBytes   860 Mbits/sec                  receiver\n</code></pre><p>æœ€åçš„ SUM è¡Œå°±æ˜¯æµ‹è¯•çš„æ±‡æ€»ç»“æœï¼ŒåŒ…æ‹¬æµ‹è¯•æ—¶é—´ã€æ•°æ®ä¼ è¾“é‡ä»¥åŠå¸¦å®½ç­‰ã€‚æŒ‰ç…§å‘é€å’Œæ¥æ”¶ï¼Œè¿™ä¸€éƒ¨åˆ†åˆåˆ†ä¸ºäº† sender å’Œ receiver ä¸¤è¡Œã€‚</p><p>ä»æµ‹è¯•ç»“æœä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™å°æœºå™¨ TCP æ¥æ”¶çš„å¸¦å®½ï¼ˆååé‡ï¼‰ä¸º 860 Mb/sï¼Œ è·Ÿç›®æ ‡çš„ 1Gb/s ç›¸æ¯”ï¼Œè¿˜æ˜¯æœ‰äº›å·®è·çš„ã€‚</p><h3>HTTP æ€§èƒ½</h3><p>ä»ä¼ è¾“å±‚å†å¾€ä¸Šï¼Œåˆ°äº†åº”ç”¨å±‚ã€‚æœ‰çš„åº”ç”¨ç¨‹åºï¼Œä¼šç›´æ¥åŸºäº TCP æˆ– UDP æ„å»ºæœåŠ¡ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰å¤§é‡çš„åº”ç”¨ï¼ŒåŸºäºåº”ç”¨å±‚çš„åè®®æ¥æ„å»ºæœåŠ¡ï¼ŒHTTP å°±æ˜¯æœ€å¸¸ç”¨çš„ä¸€ä¸ªåº”ç”¨å±‚åè®®ã€‚æ¯”å¦‚ï¼Œå¸¸ç”¨çš„ Apacheã€Nginx ç­‰å„ç§ Web æœåŠ¡ï¼Œéƒ½æ˜¯åŸºäº HTTPã€‚</p><p>è¦æµ‹è¯• HTTP çš„æ€§èƒ½ï¼Œä¹Ÿæœ‰å¤§é‡çš„å·¥å…·å¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚ abã€webbench ç­‰ï¼Œéƒ½æ˜¯å¸¸ç”¨çš„ HTTP å‹åŠ›æµ‹è¯•å·¥å…·ã€‚å…¶ä¸­ï¼Œab æ˜¯ Apache è‡ªå¸¦çš„ HTTP å‹æµ‹å·¥å…·ï¼Œä¸»è¦æµ‹è¯• HTTP æœåŠ¡çš„æ¯ç§’è¯·æ±‚æ•°ã€è¯·æ±‚å»¶è¿Ÿã€ååé‡ä»¥åŠè¯·æ±‚å»¶è¿Ÿçš„åˆ†å¸ƒæƒ…å†µç­‰ã€‚</p><p>è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½ å°±å¯ä»¥å®‰è£… ab å·¥å…·ï¼š</p><pre><code># Ubuntu\n$ apt-get install -y apache2-utils\n# CentOS\n$ yum install -y httpd-tools\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œåœ¨ç›®æ ‡æœºå™¨ä¸Šï¼Œä½¿ç”¨ Docker å¯åŠ¨ä¸€ä¸ª Nginx æœåŠ¡ï¼Œç„¶åç”¨ ab æ¥æµ‹è¯•å®ƒçš„æ€§èƒ½ã€‚é¦–å…ˆï¼Œåœ¨ç›®æ ‡æœºå™¨ä¸Šè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>$ docker run -p 80:80 -itd nginx\n</code></pre><p>è€Œåœ¨å¦ä¸€å°æœºå™¨ä¸Šï¼Œè¿è¡Œ ab å‘½ä»¤ï¼Œæµ‹è¯• Nginx çš„æ€§èƒ½ï¼š</p><pre><code># -cè¡¨ç¤ºå¹¶å‘è¯·æ±‚æ•°ä¸º1000ï¼Œ-nè¡¨ç¤ºæ€»çš„è¯·æ±‚æ•°ä¸º10000\n$ ab -c 1000 -n 10000 http://192.168.0.30/\n...\nServer Software:        nginx/1.15.8\nServer Hostname:        192.168.0.30\nServer Port:            80\n\n...\n\nRequests per second:    1078.54 [#/sec] (mean)\nTime per request:       927.183 [ms] (mean)\nTime per request:       0.927 [ms] (mean, across all concurrent requests)\nTransfer rate:          890.00 [Kbytes/sec] received\n\nConnection Times (ms)\n              min  mean[+/-sd] median   max\nConnect:        0   27 152.1      1    1038\nProcessing:     9  207 843.0     22    9242\nWaiting:        8  207 843.0     22    9242\nTotal:         15  233 857.7     23    9268\n\nPercentage of the requests served within a certain time (ms)\n  50%     23\n  66%     24\n  75%     24\n  80%     26\n  90%    274\n  95%   1195\n  98%   2335\n  99%   4663\n 100%   9268 (longest request)\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œab çš„æµ‹è¯•ç»“æœåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯è¯·æ±‚æ±‡æ€»ã€è¿æ¥æ—¶é—´æ±‡æ€»è¿˜æœ‰è¯·æ±‚å»¶è¿Ÿæ±‡æ€»ã€‚ä»¥ä¸Šé¢çš„ç»“æœä¸ºä¾‹ï¼Œæˆ‘ä»¬å…·ä½“æ¥çœ‹ã€‚</p><p>åœ¨è¯·æ±‚æ±‡æ€»éƒ¨åˆ†ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼š</p><ul>\n<li>\n<p>Requests per second ä¸º 1074ï¼›</p>\n</li>\n<li>\n<p>æ¯ä¸ªè¯·æ±‚çš„å»¶è¿Ÿï¼ˆTime per requestï¼‰åˆ†ä¸ºä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œçš„ 927 ms è¡¨ç¤ºå¹³å‡å»¶è¿Ÿï¼ŒåŒ…æ‹¬äº†çº¿ç¨‹è¿è¡Œçš„è°ƒåº¦æ—¶é—´å’Œç½‘ç»œè¯·æ±‚å“åº”æ—¶é—´ï¼Œè€Œä¸‹ä¸€è¡Œçš„ 0.927ms ï¼Œåˆ™è¡¨ç¤ºå®é™…è¯·æ±‚çš„å“åº”æ—¶é—´ï¼›</p>\n</li>\n<li>\n<p>Transfer rate è¡¨ç¤ºååé‡ï¼ˆBPSï¼‰ä¸º 890 KB/sã€‚</p>\n</li>\n</ul><p>è¿æ¥æ—¶é—´æ±‡æ€»éƒ¨åˆ†ï¼Œåˆ™æ˜¯åˆ†åˆ«å±•ç¤ºäº†å»ºç«‹è¿æ¥ã€è¯·æ±‚ã€ç­‰å¾…ä»¥åŠæ±‡æ€»ç­‰çš„å„ç±»æ—¶é—´ï¼ŒåŒ…æ‹¬æœ€å°ã€æœ€å¤§ã€å¹³å‡ä»¥åŠä¸­å€¼å¤„ç†æ—¶é—´ã€‚</p><p>æœ€åçš„è¯·æ±‚å»¶è¿Ÿæ±‡æ€»éƒ¨åˆ†ï¼Œåˆ™ç»™å‡ºäº†ä¸åŒæ—¶é—´æ®µå†…å¤„ç†è¯·æ±‚çš„ç™¾åˆ†æ¯”ï¼Œæ¯”å¦‚ï¼Œ 90% çš„è¯·æ±‚ï¼Œéƒ½å¯ä»¥åœ¨ 274ms å†…å®Œæˆã€‚</p><h3>åº”ç”¨è´Ÿè½½æ€§èƒ½</h3><p>å½“ä½ ç”¨ iperf æˆ–è€… ab ç­‰æµ‹è¯•å·¥å…·ï¼Œå¾—åˆ° TCPã€HTTP ç­‰çš„æ€§èƒ½æ•°æ®åï¼Œè¿™äº›æ•°æ®æ˜¯å¦å°±èƒ½è¡¨ç¤ºåº”ç”¨ç¨‹åºçš„å®é™…æ€§èƒ½å‘¢ï¼Ÿæˆ‘æƒ³ï¼Œä½ çš„ç­”æ¡ˆåº”è¯¥æ˜¯å¦å®šçš„ã€‚</p><p>æ¯”å¦‚ï¼Œä½ çš„åº”ç”¨ç¨‹åºåŸºäº HTTP åè®®ï¼Œä¸ºæœ€ç»ˆç”¨æˆ·æä¾›ä¸€ä¸ª Web æœåŠ¡ã€‚è¿™æ—¶ï¼Œä½¿ç”¨ ab å·¥å…·ï¼Œå¯ä»¥å¾—åˆ°æŸä¸ªé¡µé¢çš„è®¿é—®æ€§èƒ½ï¼Œä½†è¿™ä¸ªç»“æœè·Ÿç”¨æˆ·çš„å®é™…è¯·æ±‚ï¼Œå¾ˆå¯èƒ½ä¸ä¸€è‡´ã€‚å› ä¸ºç”¨æˆ·è¯·æ±‚å¾€å¾€ä¼šé™„å¸¦ç€å„ç§å„ç§çš„è´Ÿè½½ï¼ˆpayloadï¼‰ï¼Œè€Œè¿™äº›è´Ÿè½½ä¼šå½±å“ Web åº”ç”¨ç¨‹åºå†…éƒ¨çš„å¤„ç†é€»è¾‘ï¼Œä»è€Œå½±å“æœ€ç»ˆæ€§èƒ½ã€‚</p><p>é‚£ä¹ˆï¼Œä¸ºäº†å¾—åˆ°åº”ç”¨ç¨‹åºçš„å®é™…æ€§èƒ½ï¼Œå°±è¦æ±‚æ€§èƒ½å·¥å…·æœ¬èº«å¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·çš„è¯·æ±‚è´Ÿè½½ï¼Œè€Œiperfã€ab è¿™ç±»å·¥å…·å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ wrkã€TCPCopyã€Jmeter æˆ–è€… LoadRunner ç­‰å®ç°è¿™ä¸ªç›®æ ‡ã€‚</p><p>ä»¥ <a href=\"https://github.com/wg/wrk\">wrk</a> ä¸ºä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ª HTTP æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œå†…ç½®äº† LuaJITï¼Œæ–¹ä¾¿ä½ æ ¹æ®å®é™…éœ€æ±‚ï¼Œç”Ÿæˆæ‰€éœ€çš„è¯·æ±‚è´Ÿè½½ï¼Œæˆ–è€…è‡ªå®šä¹‰å“åº”çš„å¤„ç†æ–¹æ³•ã€‚</p><p>wrk å·¥å…·æœ¬èº«ä¸æä¾› yum æˆ– apt çš„å®‰è£…æ–¹æ³•ï¼Œéœ€è¦é€šè¿‡æºç ç¼–è¯‘æ¥å®‰è£…ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ¥ç¼–è¯‘å’Œå®‰è£… wrkï¼š</p><pre><code>$ https://github.com/wg/wrk\n$ cd wrk\n$ apt-get install build-essential -y\n$ make\n$ sudo cp wrk /usr/local/bin/\n</code></pre><p>wrk çš„å‘½ä»¤è¡Œå‚æ•°æ¯”è¾ƒç®€å•ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ wrk ï¼Œæ¥é‡æ–°æµ‹ä¸€ä¸‹å‰é¢å·²ç»å¯åŠ¨çš„ Nginx çš„æ€§èƒ½ã€‚</p><pre><code># -cè¡¨ç¤ºå¹¶å‘è¿æ¥æ•°1000ï¼Œ-tè¡¨ç¤ºçº¿ç¨‹æ•°ä¸º2\n$ wrk -c 1000 -t 2 http://192.168.0.30/\nRunning 10s test @ http://192.168.0.30/\n  2 threads and 1000 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency    65.83ms  174.06ms   1.99s    95.85%\n    Req/Sec     4.87k   628.73     6.78k    69.00%\n  96954 requests in 10.06s, 78.59MB read\n  Socket errors: connect 0, read 0, write 0, timeout 179\nRequests/sec:   9641.31\nTransfer/sec:      7.82MB\n</code></pre><p>è¿™é‡Œä½¿ç”¨ 2 ä¸ªçº¿ç¨‹ã€å¹¶å‘ 1000 è¿æ¥ï¼Œé‡æ–°æµ‹è¯•äº† Nginx çš„æ€§èƒ½ã€‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ¯ç§’è¯·æ±‚æ•°ä¸º 9641ï¼Œååé‡ä¸º 7.82MBï¼Œå¹³å‡å»¶è¿Ÿä¸º 65msï¼Œæ¯”å‰é¢ ab çš„æµ‹è¯•ç»“æœè¦å¥½å¾ˆå¤šã€‚</p><p>è¿™ä¹Ÿè¯´æ˜ï¼Œæ€§èƒ½å·¥å…·æœ¬èº«çš„æ€§èƒ½ï¼Œå¯¹æ€§èƒ½æµ‹è¯•ä¹Ÿæ˜¯è‡³å…³é‡è¦çš„ã€‚ä¸åˆé€‚çš„æ€§èƒ½å·¥å…·ï¼Œå¹¶ä¸èƒ½å‡†ç¡®æµ‹å‡ºåº”ç”¨ç¨‹åºçš„æœ€ä½³æ€§èƒ½ã€‚</p><p>å½“ç„¶ï¼Œwrk æœ€å¤§çš„ä¼˜åŠ¿ï¼Œæ˜¯å…¶å†…ç½®çš„ LuaJITï¼Œå¯ä»¥ç”¨æ¥å®ç°å¤æ‚åœºæ™¯çš„æ€§èƒ½æµ‹è¯•ã€‚wrk åœ¨è°ƒç”¨ Lua è„šæœ¬æ—¶ï¼Œå¯ä»¥å°† HTTP è¯·æ±‚åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œå³ setupã€runningã€doneï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d0/82/d02b845aa308b7a38a5735f3db8d9682.png?wh=621*530\" alt=\"\"></p><p>ï¼ˆå›¾ç‰‡æ¥è‡ª<a href=\"https://sq.163yun.com/blog/article/200008406328934400\">ç½‘æ˜“äº‘åšå®¢</a>ï¼‰</p><p>æ¯”å¦‚ï¼Œä½ å¯ä»¥åœ¨ setup é˜¶æ®µï¼Œä¸ºè¯·æ±‚è®¾ç½®è®¤è¯å‚æ•°ï¼ˆæ¥è‡ªäº wrk å®˜æ–¹<a href=\"https://github.com/wg/wrk/blob/master/scripts/auth.lua\">ç¤ºä¾‹</a>ï¼‰ï¼š</p><pre><code>-- example script that demonstrates response handling and\n-- retrieving an authentication token to set on all future\n-- requests\n\ntoken = nil\npath  = &quot;/authenticate&quot;\n\nrequest = function()\n   return wrk.format(&quot;GET&quot;, path)\nend\n\nresponse = function(status, headers, body)\n   if not token and status == 200 then\n      token = headers[&quot;X-Token&quot;]\n      path  = &quot;/resource&quot;\n      wrk.headers[&quot;X-Token&quot;] = token\n   end\nend\n</code></pre><p>è€Œåœ¨æ‰§è¡Œæµ‹è¯•æ—¶ï¼Œé€šè¿‡ -s é€‰é¡¹ï¼Œæ‰§è¡Œè„šæœ¬çš„è·¯å¾„ï¼š</p><pre><code>$ wrk -c 1000 -t 2 -s auth.lua http://192.168.0.30/\n</code></pre><p>wrk éœ€è¦ä½ ç”¨ Lua è„šæœ¬ï¼Œæ¥æ„é€ è¯·æ±‚è´Ÿè½½ã€‚è¿™å¯¹äºå¤§éƒ¨åˆ†åœºæ™¯æ¥è¯´ï¼Œå¯èƒ½å·²ç»è¶³å¤Ÿäº† ã€‚ä¸è¿‡ï¼Œå®ƒçš„ç¼ºç‚¹ä¹Ÿæ­£æ˜¯ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½éœ€è¦ä»£ç æ¥æ„é€ ï¼Œå¹¶ä¸”å·¥å…·æœ¬èº«ä¸æä¾› GUI ç¯å¢ƒã€‚</p><p>åƒ Jmeter æˆ–è€… LoadRunnerï¼ˆå•†ä¸šäº§å“ï¼‰ï¼Œåˆ™é’ˆå¯¹å¤æ‚åœºæ™¯æä¾›äº†è„šæœ¬å½•åˆ¶ã€å›æ”¾ã€GUI ç­‰æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ›´åŠ æ–¹ä¾¿ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·å›é¡¾äº†ç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡ï¼Œå¹¶å­¦ä¹ äº†ç½‘ç»œæ€§èƒ½çš„è¯„ä¼°æ–¹æ³•ã€‚</p><p>æ€§èƒ½è¯„ä¼°æ˜¯ä¼˜åŒ–ç½‘ç»œæ€§èƒ½çš„å‰æï¼Œåªæœ‰åœ¨ä½ å‘ç°ç½‘ç»œæ€§èƒ½ç“¶é¢ˆæ—¶ï¼Œæ‰éœ€è¦è¿›è¡Œç½‘ç»œæ€§èƒ½ä¼˜åŒ–ã€‚æ ¹æ® TCP/IP åè®®æ ˆçš„åŸç†ï¼Œä¸åŒåè®®å±‚å…³æ³¨çš„æ€§èƒ½é‡ç‚¹ä¸å®Œå…¨ä¸€æ ·ï¼Œä¹Ÿå°±å¯¹åº”ä¸åŒçš„æ€§èƒ½æµ‹è¯•æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œ</p><ul>\n<li>\n<p>åœ¨åº”ç”¨å±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ wrkã€Jmeter ç­‰æ¨¡æ‹Ÿç”¨æˆ·çš„è´Ÿè½½ï¼Œæµ‹è¯•åº”ç”¨ç¨‹åºçš„æ¯ç§’è¯·æ±‚æ•°ã€å¤„ç†å»¶è¿Ÿã€é”™è¯¯æ•°ç­‰ï¼›</p>\n</li>\n<li>\n<p>è€Œåœ¨ä¼ è¾“å±‚ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ iperf ç­‰å·¥å…·ï¼Œæµ‹è¯• TCP çš„ååæƒ…å†µï¼›</p>\n</li>\n<li>\n<p>å†å‘ä¸‹ï¼Œä½ è¿˜å¯ä»¥ç”¨ Linux å†…æ ¸è‡ªå¸¦çš„ pktgen ï¼Œæµ‹è¯•æœåŠ¡å™¨çš„ PPSã€‚</p>\n</li>\n</ul><p>ç”±äºä½å±‚åè®®æ˜¯é«˜å±‚åè®®çš„åŸºç¡€ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸Šåˆ°ä¸‹ï¼Œå¯¹æ¯ä¸ªåè®®å±‚è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Œç„¶åæ ¹æ®æ€§èƒ½æµ‹è¯•çš„ç»“æœï¼Œç»“åˆ Linux ç½‘ç»œåè®®æ ˆçš„åŸç†ï¼Œæ‰¾å‡ºå¯¼è‡´æ€§èƒ½ç“¶é¢ˆçš„æ ¹æºï¼Œè¿›è€Œä¼˜åŒ–ç½‘ç»œæ€§èƒ½ã€‚</p><h2>æ€è€ƒ</h2><p>æœ€åï¼Œæˆ‘æƒ³è¯·ä½ æ¥èŠä¸€èŠã€‚</p><ul>\n<li>\n<p>ä½ æ˜¯å¦‚ä½•è¯„ä¼°ç½‘ç»œæ€§èƒ½çš„ï¼Ÿ</p>\n</li>\n<li>\n<p>åœ¨è¯„ä¼°ç½‘ç»œæ€§èƒ½æ—¶ï¼Œä½ ä¼šä»å“ªä¸ªåè®®å±‚ã€é€‰æ‹©å“ªäº›æŒ‡æ ‡ï¼Œä½œä¸ºæ€§èƒ½æµ‹è¯•æœ€æ ¸å¿ƒçš„ç›®æ ‡ï¼Ÿ</p>\n</li>\n<li>\n<p>ä½ åˆä¼šç”¨å“ªäº›å·¥å…·ï¼Œæµ‹è¯•å¹¶åˆ†æç½‘ç»œçš„æ€§èƒ½å‘¢ï¼Ÿ</p>\n</li>\n</ul><p>ä½ å¯ä»¥ç»“åˆä»Šå¤©å­¦åˆ°çš„ç½‘ç»œçŸ¥è¯†ï¼Œæ€»ç»“è‡ªå·±çš„æ€è·¯ã€‚</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„åŒäº‹ã€æœ‹å‹ã€‚æˆ‘ä»¬ä¸€èµ·åœ¨å®æˆ˜ä¸­æ¼”ç»ƒï¼Œåœ¨äº¤æµä¸­è¿›æ­¥ã€‚</p><p></p>","neighbors":{"left":{"article_title":"35 | åŸºç¡€ç¯‡ï¼šC10K å’Œ C1000K å›é¡¾","id":81268},"right":{"article_title":"37 | æ¡ˆä¾‹ç¯‡ï¼šDNS è§£ææ—¶å¿«æ—¶æ…¢ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ","id":81850}},"comments":[{"had_liked":false,"id":123770,"user_name":"ã€‚ã€‚ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":1370981,"ip_address":"","ucode":"E724186A3F957A","user_header":"https://static001.geekbang.org/account/avatar/00/14/eb/65/6c4fbdd9.jpg","comment_is_top":false,"comment_ctime":1565754207,"is_pvip":false,"replies":[{"id":"45970","content":"ä¸è¦ä½¿ç”¨localhostæµ‹è¯•ç½‘ç»œï¼Œæµ‹è¯•å¸¦å®½è¦è·¨ä¸»æœºæµ‹è¯•","user_name":"ä½œè€…å›å¤","comment_id":123770,"uid":"1001282","ip_address":"","utype":1,"ctime":1566133286,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"108939936607","product_id":100020901,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼š ä¹°åˆ°çš„  ã€æœåŠ¡å™¨å¸¦å®½ã€‘ç†è®ºä¸Š &gt;=ååé‡ã€‚<br>æˆ‘ç°åœ¨ æ‰‹ä¸Šçš„è…¾è®¯äº‘æœåŠ¡å™¨ ï¼šç½‘ç»œå¸¦å®½æ˜¯ 1M<br>ä½†æ˜¯ç»ï¼Œwrkæµ‹è¯•ï¼Œç½‘ç»œååé‡è¾¾åˆ°äº†4M,è¿™æ˜¯æ€ä¹ˆä¸€å›äº‹å„¿å‘¢ï¼Ÿ<br>[root@VM_0_2_centos wrk]# wrk -c 1000 -t 2 http:&#47;&#47;localhost&#47;<br>Running 10s test @ http:&#47;&#47;localhost&#47;<br>  2 threads and 1000 connections<br>  Thread Stats   Avg      Stdev     Max   +&#47;- Stdev<br>    Latency   108.23ms   80.21ms   1.95s    97.68%<br>    Req&#47;Sec     2.54k     1.77k    5.87k    66.15%<br>  49587 requests in 10.06s, 40.20MB read<br>  Socket errors: connect 0, read 0, write 0, timeout 78<br>Requests&#47;sec:   4929.91<br>Transfer&#47;sec:      4.00MB","like_count":25,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462808,"discussion_content":"ä¸è¦ä½¿ç”¨localhostæµ‹è¯•ç½‘ç»œï¼Œæµ‹è¯•å¸¦å®½è¦è·¨ä¸»æœºæµ‹è¯•","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566133286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1246785,"avatar":"https://static001.geekbang.org/account/avatar/00/13/06/41/abb7bfe3.jpg","nickname":"meow","note":"","ucode":"BB7FBD681B5EFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576769,"discussion_content":"æ˜¯çš„ 10mæ˜¯å¤–ç½‘å¸¦å®½ï¼Œlocalhost æ˜¯å†…ç½‘ç½‘å¡ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655782324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66941,"user_name":"æˆ‘æ¥ä¹Ÿ","can_delete":false,"product_type":"c1","uid":1205253,"ip_address":"","ucode":"773D6104F56767","user_header":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","comment_is_top":false,"comment_ctime":1550044998,"is_pvip":false,"replies":[{"id":"23707","content":"å—¯ï¼Œç½‘ç»œæŠ–åŠ¨æ˜¯å¾ˆå¸¸è§çš„ç°è±¡ã€‚å¯ä»¥è€ƒè™‘æ›´å¤šçš„æ¥å…¥ç‚¹ã€ä¸“çº¿ã€CDN ç­‰ç­‰éƒ½å¯ä»¥ä¼˜åŒ–å…¬ç½‘çš„é“¾è·¯å»¶è¿Ÿé—®é¢˜","user_name":"ä½œè€…å›å¤","comment_id":66941,"uid":"1001282","ip_address":"","utype":1,"ctime":1550068855,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":2,"race_medal":0,"score":"70269521734","product_id":100020901,"comment_content":"[D36æ‰“å¡]<br>æƒ³ä¸åˆ°ç½‘ç»œç¯‡è¿™ä¹ˆå¿«å°±å¼€å§‹&quot;å¥—è·¯&quot;äº†ğŸ˜<br>ç”±äºç°åœ¨å®¢æˆ·ç«¯çš„ç½‘ç»œç¯å¢ƒå¤æ‚,ç»å¸¸ä¼šå‡ºç°éƒ¨åˆ†ç”¨æˆ·åé¦ˆå¡é¡¿çš„æƒ…å†µ.<br>æˆ‘è¿™è¾¹èƒ½åšçš„ä¹Ÿæœ‰é™.<br>åªèƒ½åœ¨ç¬¬ä¸€ä¸ªç½‘è·¯å‡ºå…¥å£,è®°å½•æ¯æ¬¡æ”¶å‘æ¶ˆæ¯çš„å†…å®¹å’Œå…·ä½“çš„æ—¶é—´æˆ³(ç²¾ç¡®åˆ°ms).<br>é‡åˆ°ç©å®¶åé¦ˆæ—¶,å†æ ¹æ®ç©å®¶çš„å”¯ä¸€ç¼–å·,åŠå‘ç”Ÿçš„å¤§è‡´æ—¶é—´,åœ¨æ—¥å¿—ä¸­æŸ¥æ‰¾ç©å®¶çš„å“åº”æ—¶é—´,æ¥æ¨æµ‹æ˜¯æœåŠ¡å™¨å“åº”æ…¢äº†,è¿˜æ˜¯å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ä¸­é—´çš„è·¯çº¿æ…¢äº†.<br>æœ‰æ—¶ç”šè‡³ä¼šè®©å®¢æˆ·ç«¯ä¸»åŠ¨æ±‡æŠ¥,ä¸Šæ¬¡å‘é€è¯·æ±‚å’Œæ”¶åˆ°è¯·æ±‚çš„æ—¶é—´é—´éš”. æ¥éªŒè¯æ˜¯ä¸æ˜¯å®¢æˆ·æœ¬èº«çš„ç½‘ç»œç¯å¢ƒå¯¼è‡´çš„.<br>å…¶å®æœåŠ¡å™¨ç«¯éƒ½æœ‰å¤„ç†æ¶ˆæ¯çš„è€—æ—¶è®°å½•,å¹³å¸¸å‡ ä¹éƒ½æ²¡ä»€ä¹ˆå¤ªè€—æ—¶çš„çŠ¶å†µå‘ç”Ÿ.<br>é‡åˆ°å®¢æˆ·ç½‘ç»œåŸå› å¯¼è‡´çš„å»¶è¿Ÿ,åªèƒ½è¯´æ˜¯æ–°åŠ å…¥å£,è®©å®¢æˆ·ç«¯é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜å…¥å£äº†.","like_count":16,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438986,"discussion_content":"å—¯ï¼Œç½‘ç»œæŠ–åŠ¨æ˜¯å¾ˆå¸¸è§çš„ç°è±¡ã€‚å¯ä»¥è€ƒè™‘æ›´å¤šçš„æ¥å…¥ç‚¹ã€ä¸“çº¿ã€CDN ç­‰ç­‰éƒ½å¯ä»¥ä¼˜åŒ–å…¬ç½‘çš„é“¾è·¯å»¶è¿Ÿé—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550068855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000515,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/43/abb7bfe3.jpg","nickname":"123","note":"","ucode":"61ED60FFFEDCB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":176127,"discussion_content":"å®¢æˆ·ç«¯åŸ‹æ¢é’ˆï¼Œå¯ä»¥æèµ·æ¥äº† ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1582025316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184639,"user_name":"ç½—è¾‘æ€ç»´","can_delete":false,"product_type":"c1","uid":1318941,"ip_address":"","ucode":"D257A06EDE928E","user_header":"https://static001.geekbang.org/account/avatar/00/14/20/1d/0c1a184c.jpg","comment_is_top":false,"comment_ctime":1583376088,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"66007885528","product_id":100020901,"comment_content":"wrk å·¥å…·æœ¬èº«ä¸æä¾› yum æˆ– apt çš„å®‰è£…æ–¹æ³•ï¼Œéœ€è¦é€šè¿‡æºç ç¼–è¯‘æ¥å®‰è£…ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ¥ç¼–è¯‘å’Œå®‰è£… ï¼š<br>1 $ https:&#47;&#47;github.com&#47;wg&#47;wrk<br>2 $ cd wrk<br>3 $ apt-get install build-essential -y<br>4 $ make<br>5 $ sudo cp wrk &#47;usr&#47;local&#47;bin&#47;<br>--------------------------------------------<br>ç¬¬ä¸€å¥å‘½ä»¤ã€Œhttps:&#47;&#47;github.com&#47;wg&#47;wrkã€åº”è¯¥æ˜¯ã€Œgit clone https:&#47;&#47;github.com&#47;wg&#47;wrkã€ã€‚ä¸ç„¶æ‰§è¡Œä¸äº†ã€‚","like_count":15,"discussions":[{"author":{"id":1970516,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLK4NPyaFDl4rzrd4A9z42tQDibFLdCicbrAdyUa5P2B5u8UCUBenpHX7VgUCibvHvhpza4icMBKVnhmA/132","nickname":"å­¦æ— æ­¢å¢ƒ","note":"","ucode":"2C28E8E54DAB4E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413556,"discussion_content":"è¡¥å……çš„å¾ˆåˆ°ä½ï¼Œå¯¹åˆå­¦è€…å¾ˆå‹å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636511623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78868,"user_name":"Maxwell","can_delete":false,"product_type":"c1","uid":1086275,"ip_address":"","ucode":"720A00AD472616","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/43/0e84492d.jpg","comment_is_top":false,"comment_ctime":1553264401,"is_pvip":false,"replies":[{"id":"28739","content":"ä¸æ˜¯çš„ï¼Œè¿™åªæ˜¯è¯´æ˜äº†ç³»ç»Ÿçš„ç½‘ç»œååæ²¡é—®é¢˜ï¼Œä½†ä¸ä»£è¡¨åº”ç”¨çš„ååå°±æ²¡é—®é¢˜äº†ã€‚åº”ç”¨ç¨‹åºçš„ååä¹Ÿè¿˜æ˜¯è¦æµ‹è¯•çš„","user_name":"ä½œè€…å›å¤","comment_id":78868,"uid":"1001282","ip_address":"","utype":1,"ctime":1553315977,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"31618035473","product_id":100020901,"comment_content":"ç›®å‰åœ¨å…¬å¸åšæ€§èƒ½æµ‹è¯•ï¼Œæˆ‘ä¼šé¦–å…ˆä½¿ç”¨iperfæµ‹è¯•ç½‘ç»œååé‡ï¼Œåœ¨å±€åŸŸç½‘ä¸‹ï¼Œæˆ‘ä¼šå…ˆå¼€å¯å°‘æ•°çº¿ç¨‹(2ä¸ª)è¿›è¡Œå‹æµ‹ï¼Œåœ¨æµ‹è¯•ç»“æœæŠ¥å‘Šä¸­ï¼ŒæŸ¥çœ‹æ¶ˆè€—çš„å¸¦å®½ï¼Œå†ä½¿ç”¨iperfçš„æµ‹è¯•ç»“æœååé‡å¯¹æ¯”ï¼Œå¦‚æœç½‘ç»œååé‡æ²¡æœ‰ç“¶é¢ˆï¼Œé‚£åº”ç”¨ç¨‹åºçš„æ€§èƒ½å°±ä¸ç½‘ç»œæ— å…³äº†ï¼Œè¿™æ ·ç†è§£å¯¹ä¹ˆï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444267,"discussion_content":"ä¸æ˜¯çš„ï¼Œè¿™åªæ˜¯è¯´æ˜äº†ç³»ç»Ÿçš„ç½‘ç»œååæ²¡é—®é¢˜ï¼Œä½†ä¸ä»£è¡¨åº”ç”¨çš„ååå°±æ²¡é—®é¢˜äº†ã€‚åº”ç”¨ç¨‹åºçš„ååä¹Ÿè¿˜æ˜¯è¦æµ‹è¯•çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553315977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68511,"user_name":"ninuxer","can_delete":false,"product_type":"c1","uid":1243135,"ip_address":"","ucode":"5394ADAF2667D6","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132","comment_is_top":false,"comment_ctime":1550536493,"is_pvip":false,"replies":[{"id":"24377","content":"å—¯ è¶Šå¾€ä¸Šå±‚åœºæ™¯è¶Šå¤š","user_name":"ä½œè€…å›å¤","comment_id":68511,"uid":"1001282","ip_address":"","utype":1,"ctime":1550570441,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"18730405677","product_id":100020901,"comment_content":"æ‰“å¡day38<br>ä¹‹å‰å¯¹åº”ç”¨åšå‹æµ‹çš„åœºæ™¯å¤šç‚¹ï¼Œé€šè¿‡å­¦ä¹ ï¼Œåˆgetäº†åº•å±‚çš„å‹æµ‹çš„æ–¹æ³•ğŸ‘","like_count":4,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439711,"discussion_content":"å—¯ è¶Šå¾€ä¸Šå±‚åœºæ™¯è¶Šå¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550570441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251964,"user_name":"Geek_a16bbc","can_delete":false,"product_type":"c1","uid":2008721,"ip_address":"","ucode":"6F12AFEF638413","user_header":"","comment_is_top":false,"comment_ctime":1602002301,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"14486904189","product_id":100020901,"comment_content":"ç‚ºä»€éº¼ 64B å°åŒ…çš„å¤„ç†èƒ½åŠ›ï¼Œå€¼å¾—æˆ‘ä»¬ç‰¹åˆ«å…³æ³¨ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1543040,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/80/8702bd5f.jpg","nickname":"evan","note":"","ucode":"491B073D5AFEDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318072,"discussion_content":"å› ä¸ºç½‘ç»œå±‚å°±æ˜¯ç”¨æ¥è½¬å‘åŒ…çš„ å°åŒ…æ›´èƒ½ä½“ç°ppsçš„æ€§èƒ½","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1603635583,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1499362,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e0/e2/6054de3f.jpg","nickname":"*å›çœ¸*Â·wdlcoke","note":"","ucode":"8D5ECCD274601F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565740,"discussion_content":"æ€ä¹ˆçœ‹æ˜¯å¤§åŒ…è¿˜æ˜¯å°åŒ…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650532592,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1068361,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","nickname":"æ˜ç¿¼","note":"","ucode":"E77F86BEB3D5C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541634,"discussion_content":"åŒ…è¶Šå°ï¼ŒåŒ…ä¸ªæ•°è¶Šå¤šï¼Œä¸­æ–­è¶Šå¤šï¼Œç³»ç»Ÿå¤„ç†èµ·æ¥å‹åŠ›ä¹Ÿæ›´å¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640492628,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221363,"user_name":"LindaWang","can_delete":false,"product_type":"c1","uid":1800128,"ip_address":"","ucode":"45368868C3980B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/77/c0/22872965.jpg","comment_is_top":false,"comment_ctime":1590482823,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10180417415","product_id":100020901,"comment_content":"å€ªè€å¸ˆï¼Œæˆ‘ç°åœ¨åœ¨ç”¨wrkåšå‹æµ‹ï¼Œåªæ˜¯åšç®€å•çš„queryï¼Œä½†é—®é¢˜æ˜¯ï¼Œéšç€threadså’Œconnectionså‚æ•°è¶Šæ¥è¶Šå¤§ï¼ŒQPSå¹¶æ²¡æœ‰æå‡ï¼Œåè€Œæœ‰ä¸€äº›timeoutäº†ã€‚æ­¤æ—¶ï¼ŒæœåŠ¡ç«¯çš„cpu&#47;IOéƒ½è¿œè¿œæ²¡æœ‰è¾¾åˆ°è´Ÿè½½ï¼Œæ­¤æ—¶ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä¼šä¸ä¼šwrkå‹æµ‹å·¥å…·æœ¬èº«æ²¡æ³•è¾¾åˆ°å¾ˆå¤§çš„å‹åŠ›å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1515149,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1e/8d/5b242931.jpg","nickname":"Fish","note":"","ucode":"C20719F8B0F7C8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312417,"discussion_content":"threadå’Œconnectionsä¸æ˜¯è¶Šå¤§è¶Šå¥½","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1602680344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1610552,"avatar":"https://static001.geekbang.org/account/avatar/00/18/93/38/71615300.jpg","nickname":"DayDayUp","note":"","ucode":"9C53659518AB74","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":574248,"discussion_content":"è¯´ä¸å®šå¤§é‡çš„CPUç”¨äºè°ƒåº¦å’Œç®¡ç†è¿™ä¹ˆå¤šthreadså’Œconnectionsçš„è°ƒåº¦ç®¡ç†äº†ï¼Œåè€Œç”¨äºçœŸæ­£å¤„ç†è¯·æ±‚çš„æ—¶å€™ï¼Œå¿™ä¸è¿‡æ¥äº†ã€‚æˆ‘æ˜¯è¿™ä¹ˆæƒ³çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653923014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125997,"user_name":"ä¸–äº‹ä¸å¯å¼ºæ±‚-å¿«ä¹é•¿å­˜","can_delete":false,"product_type":"c1","uid":1317168,"ip_address":"","ucode":"DC061A196221DD","user_header":"https://static001.geekbang.org/account/avatar/00/14/19/30/2a92e423.jpg","comment_is_top":false,"comment_ctime":1566291102,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10156225694","product_id":100020901,"comment_content":"åœ¨å¯¹nginxè¿›è¡Œå‹æµ‹çš„æ—¶å€™ï¼Œç³»ç»Ÿçš„å†…æ ¸å‚æ•°æœ‰æ²¡æœ‰éœ€è¦æ”¹å˜çš„ï¼Ÿæ¯”å¦‚è¯´syncookieç­‰","like_count":2},{"had_liked":false,"id":79015,"user_name":"Xiaobai","can_delete":false,"product_type":"c1","uid":1440182,"ip_address":"","ucode":"659CE28C9B0206","user_header":"https://static001.geekbang.org/account/avatar/00/15/f9/b6/e1d1db4c.jpg","comment_is_top":false,"comment_ctime":1553323256,"is_pvip":false,"replies":[{"id":"29353","content":"æœ€ç®€å•çš„å°±æ˜¯åšå‹åŠ›æµ‹è¯•","user_name":"ä½œè€…å›å¤","comment_id":79015,"uid":"1001282","ip_address":"","utype":1,"ctime":1553699431,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"10143257848","product_id":100020901,"comment_content":"4æ ¸8G 5Må¸¦å®½æœåŠ¡å™¨ æœåŠ¡è·‘ä¸€äº›å•†åŸ ï¼Œå¾®ä¿¡å°ç¨‹åº ï¼Œå¦‚ä½•è¯„ä¼°èƒ½æ‰¿å—å¤šå¤§çš„å¹¶å‘é‡","like_count":2,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444326,"discussion_content":"æœ€ç®€å•çš„å°±æ˜¯åšå‹åŠ›æµ‹è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553699431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":295678,"user_name":"LH","can_delete":false,"product_type":"c1","uid":1211178,"ip_address":"","ucode":"819B9B2409E834","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/2a/7d8b5943.jpg","comment_is_top":false,"comment_ctime":1622540994,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5917508290","product_id":100020901,"comment_content":"å†…å®¹ç²¾å½©ï¼Œæ„Ÿè°¢åˆ†äº«","like_count":1},{"had_liked":false,"id":159315,"user_name":"v_peng","can_delete":false,"product_type":"c1","uid":1751411,"ip_address":"","ucode":"04249952E8B484","user_header":"https://static001.geekbang.org/account/avatar/00/1a/b9/73/8c281399.jpg","comment_is_top":false,"comment_ctime":1575597967,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5870565263","product_id":100020901,"comment_content":"è€å¸ˆå¥½ï¼Œ æœ‰ä¸ªé—®é¢˜è¯·æ•™ï¼Œ æ–‡ä¸­è¯´ http è¯·æ±‚çš„è´Ÿè½½ä¼šå½±å“åˆ°åº”ç”¨ç¨‹åºå†…éƒ¨çš„å¤„ç†é€»è¾‘ï¼Œ ä»è€Œå½±å“æµ‹è¯•ç»“æœï¼Œ è¿™ä¸ªå½±å“æ„æ€æ˜¯ä¼šå¢åŠ è¯·æ±‚çš„å¤„ç†æ—¶é—´ä¹ˆï¼Ÿè¿˜æ˜¯ä¼šä¼˜åŒ–æœåŠ¡å™¨åº”ç”¨çš„å¤„ç†ï¼Ÿ å¦å¤– wrk çš„æµ‹è¯•ç»“æœæ˜æ˜¾å¥½äº ab çš„æµ‹è¯•ç»“æœï¼Œ èƒ½ç®€å•è§£é‡Šä¸€ä¸‹åŸå› ä¹ˆï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1252173,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1b/4d/2cc44d9a.jpg","nickname":"åˆ˜å¿½æ‚ ","note":"","ucode":"095DE3A8D3F450","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293695,"discussion_content":"è¿™é‡Œç¡®å®ä¸ç†è§£ï¼Œæ„Ÿè§‰æŒ‰ç…§æ–‡ä¸­çš„è¯´æ³•åº”è¯¥wrkå› ä¸ºæœ‰æœåŠ¡å™¨ç«¯çš„ä¸šåŠ¡ï¼Œæµ‹å‡ºæ¥çš„åº”è¯¥å·®æ‰å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595644617,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1778000,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ncicjtgbOgxk2V3VWYJQAia6VqrvHE23JVGtkQALgl6XScQmdqmKZ5RXicfw0CQ4uMplhMeeYoSZNPggBRTpQLR1Q/132","nickname":"0xkjAlbert","note":"","ucode":"B607DA1230321F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1252173,"avatar":"https://static001.geekbang.org/account/avatar/00/13/1b/4d/2cc44d9a.jpg","nickname":"åˆ˜å¿½æ‚ ","note":"","ucode":"095DE3A8D3F450","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":338956,"discussion_content":"å› ä¸ºæ˜¯abæœ¬èº«çš„æ€§èƒ½å¯¼è‡´çš„ï¼Œæ¯”å¦‚nginxå¹¶å‘æ”¯æŒä¸€ä¸‡ï¼Œä½†æ˜¯abå‘èµ·è¿æ¥æœ€é«˜ä¸€åƒï¼Œé‚£ä¹ˆæµ‹è¯•ç»“æœåªèƒ½æ˜¯ä¸€åƒï¼Œå—abæœ¬èº«æ€§èƒ½é™åˆ¶","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609454302,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":293695,"ip_address":""},"score":338956,"extra":""}]}]},{"had_liked":false,"id":83019,"user_name":"æ¢¦å›æ±‰å”","can_delete":false,"product_type":"c1","uid":1321581,"ip_address":"","ucode":"9C66E35165F813","user_header":"https://static001.geekbang.org/account/avatar/00/14/2a/6d/0e436c1c.jpg","comment_is_top":false,"comment_ctime":1554374458,"is_pvip":false,"replies":[{"id":"30191","content":"è¯·å‚è€ƒç¬¬43ã€44æœŸ","user_name":"ä½œè€…å›å¤","comment_id":83019,"uid":"1001282","ip_address":"","utype":1,"ctime":1554639122,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5849341754","product_id":100020901,"comment_content":"æˆ‘æƒ³æŸ¥çœ‹ç›®æ ‡æœåŠ¡å™¨çš„æ”¶åŒ…çš„æƒ…å†µï¼Œè¿™ä¸ªæ€ä¹ˆåœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šæ“ä½œå‘¢","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445821,"discussion_content":"è¯·å‚è€ƒç¬¬43ã€44æœŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554639122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81819,"user_name":"æŒºç›´è…°æ¿","can_delete":false,"product_type":"c1","uid":1178397,"ip_address":"","ucode":"B7DD679A3A4EEB","user_header":"https://static001.geekbang.org/account/avatar/00/11/fb/1d/12c7c021.jpg","comment_is_top":false,"comment_ctime":1554042718,"is_pvip":false,"replies":[{"id":"29842","content":"æŸ¥ä¸€ä¸‹ç½‘å¡åï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯eth0ï¼Ÿæ¢æˆæ­£ç¡®çš„åº”è¯¥å°±å¯ä»¥äº†","user_name":"ä½œè€…å›å¤","comment_id":81819,"uid":"1001282","ip_address":"","utype":1,"ctime":1554210452,"user_name_real":"å€ªæœ‹é£"}],"discussion_count":1,"race_medal":0,"score":"5849010014","product_id":100020901,"comment_content":"å€ªè€å¸ˆï¼Œä½ ä¸Šé¢çš„è„šæœ¬è¿è¡Œåï¼Œæç¤ºâ€œcat: &#47;proc&#47;net&#47;pktgen&#47;eth0: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•â€ç³»ç»Ÿæ˜¯cetnos7.0,è¯·é—®å¦‚ä½•å¤„ç†ã€‚","like_count":1,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445358,"discussion_content":"æŸ¥ä¸€ä¸‹ç½‘å¡åï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯eth0ï¼Ÿæ¢æˆæ­£ç¡®çš„åº”è¯¥å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554210452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":353055,"user_name":"è‚¥low","can_delete":false,"product_type":"c1","uid":1043480,"ip_address":"é™•è¥¿","ucode":"A158AFAAB8C742","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/18/bf7254d3.jpg","comment_is_top":false,"comment_ctime":1659096227,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659096227","product_id":100020901,"comment_content":"åˆšåˆšç”¨åˆ°äº†wrkï¼Œä¸»è¦æ˜¯æµ‹è¯•api ä¹Ÿå°±æ˜¯æµ‹è¯•webæœåŠ¡çš„æ€§èƒ½ é€šè¿‡ç®€å•çš„luaè„šæœ¬æ¨¡æ‹Ÿä¸åŒç”¨æˆ·çš„è¯·æ±‚ å…¶å®ƒæ²¡çœ‹â€¦","like_count":0},{"had_liked":false,"id":336853,"user_name":"return","can_delete":false,"product_type":"c1","uid":1135528,"ip_address":"","ucode":"42B8A3380DF04B","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","comment_is_top":false,"comment_ctime":1646402037,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646402037","product_id":100020901,"comment_content":"â€œPPS é€šå¸¸ç”¨æ¥è¯„ä¼°ç½‘ç»œçš„è½¬å‘èƒ½åŠ›ï¼Œè€ŒåŸºäº Linux æœåŠ¡å™¨çš„è½¬å‘ï¼Œå¾ˆå®¹æ˜“å—åˆ°ç½‘ç»œåŒ…å¤§å°çš„å½±å“(äº¤æ¢æœºé€šå¸¸ä¸ä¼šå—åˆ°å¤ªå¤§å½±å“ï¼Œå³äº¤æ¢æœºå¯ä»¥çº¿æ€§è½¬å‘)â€<br>è¯·æ•™è€å¸ˆï¼Œ ä¸ºä»€ä¹ˆ äº¤æ¢æœºçš„ pps ä¸ä¼šå—åˆ° åŒ…å¤§å° å¤ªå¤§å½±å“ã€‚ æŒ‰é“ç† è½¬å‘é€Ÿç‡æ˜¯å›ºå®šçš„ï¼ŒåŒ…å¤§çš„åŒ–ï¼Œè‡ªç„¶æ¯ç§’è½¬å‘çš„åŒ…å°±å°‘äº†ã€‚ <br>ç½‘ä¸Šå®åœ¨æ˜¯æŸ¥ä¸åˆ° äº¤æ¢æœºå…³äºåŒ…å¤§å°è¿™æ–¹é¢çš„èµ„æ–™ã€‚","like_count":0},{"had_liked":false,"id":325794,"user_name":"kubxy","can_delete":false,"product_type":"c1","uid":1514411,"ip_address":"","ucode":"EDA317D303CC42","user_header":"https://static001.geekbang.org/account/avatar/00/17/1b/ab/a5f88914.jpg","comment_is_top":false,"comment_ctime":1639132382,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639132382","product_id":100020901,"comment_content":"â€œç°åœ¨çš„å¤šæ ¸æœåŠ¡å™¨å’Œä¸‡å…†ç½‘å¡å·²ç»å¾ˆæ™®éäº†ï¼Œç¨åšä¼˜åŒ–å°±å¯ä»¥è¾¾åˆ°æ•°ç™¾ä¸‡çš„ PPSâ€<br><br>è€å¸ˆï¼Œæˆ‘æŒ‰ç…§æ‚¨çš„æ–¹æ³•ï¼Œä½¿ç”¨pktgenåœ¨çº¿ä¸‹ç‰©ç†æœºç¯å¢ƒå’Œçº¿ä¸Šäº‘ç¯å¢ƒï¼ˆé˜¿é‡Œç»™å‡ºçš„æ€§èƒ½æ˜¯200ä¸‡PPSï¼‰æµ‹è¯•PPSï¼Œæµ‹è¯•çš„ç»“æœéƒ½æ˜¯20ä¸‡ã€‚è¿™æ˜¯å› ä¸ºpktgenåªç”¨äº†ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼ˆæˆ‘å°è¯•å°†eth0ç»‘å®šåˆ°å¤šä¸ªpktgenå†…æ ¸çº¿ç¨‹ï¼Œä½†æç¤ºè®¾å¤‡busyã€‚ï¼‰å—ï¼Ÿè¿˜æ˜¯è¯´æˆ‘çš„ç³»ç»Ÿéœ€è¦ä¼˜åŒ–ï¼Ÿ","like_count":0},{"had_liked":false,"id":313820,"user_name":"ç®€ç®€å•å•å°±æ˜¯å¹¸ç¦","can_delete":false,"product_type":"c1","uid":2740779,"ip_address":"","ucode":"A08080E6FD255F","user_header":"https://static001.geekbang.org/account/avatar/00/29/d2/2b/af13fcd6.jpg","comment_is_top":false,"comment_ctime":1632700159,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1632700159","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸‹ï¼Œâ€œå› ä¸ºç”¨æˆ·è¯·æ±‚å¾€å¾€ä¼šé™„å¸¦ç€å„ç§å„ç§çš„è´Ÿè½½ï¼ˆpayloadï¼‰ï¼Œè€Œè¿™äº›è´Ÿè½½ä¼šå½±å“ Web åº”ç”¨ç¨‹åºå†…éƒ¨çš„å¤„ç†é€»è¾‘ï¼Œä»è€Œå½±å“æœ€ç»ˆæ€§èƒ½â€œã€‚     ç”¨æˆ·è¯·æ±‚é™„å¸¦å„ç§è´Ÿè½½ï¼Œå¯ä»¥å½¢è±¡ä¸€ç‚¹å—ï¼Œå…·ä½“æŒ‡å“ªäº›å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1081299,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg","nickname":"Realm","note":"","ucode":"30CBEBE619D1A2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550699,"discussion_content":"æŸ¥æ•°æ®åº“ç­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644675666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304406,"user_name":"ghostwritten","can_delete":false,"product_type":"c1","uid":1308196,"ip_address":"","ucode":"AE512F2E24A1A0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f6/24/5a9277f1.jpg","comment_is_top":false,"comment_ctime":1627391936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627391936","product_id":100020901,"comment_content":"1.å¸¦å®½ï¼Œè¡¨ç¤ºé“¾è·¯çš„æœ€å¤§ä¼ è¾“é€Ÿç‡ï¼Œå•ä½æ˜¯ b&#47;sï¼ˆæ¯”ç‰¹ &#47; ç§’ï¼‰<br>2.ååé‡ï¼Œè¡¨ç¤ºæ²¡æœ‰ä¸¢åŒ…æ—¶çš„æœ€å¤§æ•°æ®ä¼ è¾“é€Ÿç‡ï¼Œå•ä½é€šå¸¸ä¸º b&#47;s ï¼ˆæ¯”ç‰¹ &#47; ç§’ï¼‰æˆ–è€… B&#47;sï¼ˆå­—èŠ‚ &#47;<br>   ç§’ï¼‰<br>3.å»¶æ—¶ï¼Œè¡¨ç¤ºä»ç½‘ç»œè¯·æ±‚å‘å‡ºåï¼Œä¸€ç›´åˆ°æ”¶åˆ°è¿œç«¯å“åº”ï¼Œæ‰€éœ€è¦çš„æ—¶é—´å»¶è¿Ÿ<br>4.PPSï¼Œæ˜¯ Packet Per Secondï¼ˆåŒ… &#47; ç§’ï¼‰çš„ç¼©å†™ï¼Œè¡¨ç¤ºä»¥ç½‘ç»œåŒ…ä¸ºå•ä½çš„ä¼ è¾“é€Ÿç‡<br>5.hping3 æ˜¯SYN æ”»å‡»çš„å·¥å…·ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæµ‹è¯•ç½‘ç»œåŒ…å¤„ç†èƒ½åŠ›çš„æ€§èƒ½å·¥å…·<br>6.pktgen å†…æ ¸è‡ªå¸¦çš„é«˜æ€§èƒ½ç½‘ç»œæµ‹è¯•å·¥å…·<br>modprobe pktgen<br>ls &#47;proc&#47;net&#47;pktgen&#47;<br>7.iperf ã€netperfã€iperf3 éƒ½æ˜¯æœ€å¸¸ç”¨çš„ç½‘ç»œæ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œæµ‹è¯• TCP å’Œ UDP çš„ååé‡<br>server: iperf3 -s -i 1 -p 10000<br>client: iperf3 -c 192.168.0.30 -b 1G -t 15 -P 2 -p 10000<br>8.  ab -c 1000 -n 10000 http:&#47;&#47;192.168.0.30&#47;<br>9. wrkæ˜¯ä¸€ä¸ª HTTP æ€§èƒ½æµ‹è¯•å·¥å…·<br>wrk -c 1000 -t 2 http:&#47;&#47;192.168.0.30&#47;","like_count":0},{"had_liked":false,"id":297281,"user_name":"coconut","can_delete":false,"product_type":"c1","uid":2344081,"ip_address":"","ucode":"07B95C7A6AC2F7","user_header":"https://static001.geekbang.org/account/avatar/00/23/c4/91/a017bf72.jpg","comment_is_top":false,"comment_ctime":1623403289,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1623403289","product_id":100020901,"comment_content":"pktgen åªèƒ½å‘udpåŒ…ï¼Ÿ","like_count":0},{"had_liked":false,"id":271306,"user_name":"å­¦ç”Ÿç›‘ç‹±","can_delete":false,"product_type":"c1","uid":1007240,"ip_address":"","ucode":"CA9510F6211FCF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/AkcVibvqux0qrKFbV7skQvQfHsl96tu9HTSaromQyzf7OOSacoorSDreBNbwOdlBeOrKr3Alc1zle66wKkibrL5g/132","comment_is_top":false,"comment_ctime":1609533414,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"1609533414","product_id":100020901,"comment_content":"PPS å°±æ˜¯ 1000Mbit é™¤ä»¥ä»¥å¤ªç½‘å¸§çš„å¤§å°ï¼Œå³ 1000Mbps&#47;((64+20)*8bit) = 1.5 Mppsï¼ˆå…¶ä¸­ï¼Œ20B ä¸ºä»¥å¤ªç½‘å¸§å‰å¯¼å’Œå¸§é—´è·çš„å¤§å°ï¼‰ã€‚ <br>è¿™é‡Œæ˜¯ä¸æ˜¯ç®—é”™äº†ï¼ŒResult: OK: 8320027(c8249354+d70673) usec, 1000000 (64byte,0frags) è¿™é‡Œç»“æœæ˜æ˜å†™çš„byte,æ€ä¹ˆå’Œ20Bç›´æ¥ç›¸åŠ äº†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1499362,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e0/e2/6054de3f.jpg","nickname":"*å›çœ¸*Â·wdlcoke","note":"","ucode":"8D5ECCD274601F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":565741,"discussion_content":"20B çš„B å°±æ˜¯byte å§ 20b bæ˜¯bit æˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650532852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1081299,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg","nickname":"Realm","note":"","ucode":"30CBEBE619D1A2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550700,"discussion_content":"64+20ï¼š æ˜¯æŒ‰ç½‘ç»œå±‚æœ€å°åŒ…å¤§å°64Bï¼Œé“¾è·¯å±‚å¸§å¤´+å¸§å°¾20B","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644675782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251113,"user_name":"baymax-me","can_delete":false,"product_type":"c1","uid":2192263,"ip_address":"","ucode":"989494AB215DE7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ7Fd19uVrF8TbBxKrOMV18HwFGP0BxmrRdRW4WgORhagvqFeG49Cia2Jx9kiafZsLMXId8dg0aLhibQ/132","comment_is_top":false,"comment_ctime":1601367623,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601367623","product_id":100020901,"comment_content":"è€å¸ˆï¼Œä½¿ç”¨Linux å†…æ ¸è‡ªå¸¦çš„é«˜æ€§èƒ½ç½‘ç»œæµ‹è¯•å·¥å…·pktgenï¼Œä¸€å°å‘åŒ…æœºå™¨ï¼Œä¸€å°ç›®æ ‡æœºå™¨ï¼›åœ¨å‘åŒ…æœºå™¨ä¸Šè·‘è„šæœ¬ï¼Œç„¶åä¹Ÿæ˜¯åœ¨å‘åŒ…æœºå™¨ä¸Šä½¿ç”¨cat &#47;proc&#47;net&#47;pktgen&#47;eth0æ¥æŸ¥çœ‹procæ–‡ä»¶ã€‚æƒ³è¯·æ•™è€å¸ˆçš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼š è¯¥æµ‹è¯•æµ‹çš„æ˜¯å‘åŒ…æœºå™¨çš„è½¬å‘æ€§èƒ½è¿˜æ˜¯ç›®æ ‡æœºå™¨çš„è½¬å‘æ€§èƒ½å‘¢ï¼Ÿåœ¨çº¿ç­‰ï¼ï¼ï¼","like_count":0},{"had_liked":false,"id":241850,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1597466363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597466363","product_id":100020901,"comment_content":"å„ç§æµ‹è¯•å·¥å…·éƒ½ç”¨äº†ä¸€éè¿‡ç˜¾ï¼","like_count":0},{"had_liked":false,"id":236976,"user_name":"å¹»ä¹‹ç¾½ç¿¼ğŸ˜€ğŸ˜ğŸ˜†ğŸ˜…","can_delete":false,"product_type":"c1","uid":1109762,"ip_address":"","ucode":"4AAFF3B421713D","user_header":"https://static001.geekbang.org/account/avatar/00/10/ef/02/904aa83f.jpg","comment_is_top":false,"comment_ctime":1595635628,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595635628","product_id":100020901,"comment_content":"å¤§ä½¬ ï¼Œå‹åŠ›æµ‹è¯•20å°æœåŠ¡å™¨åˆ°23ä¸‡å¹¶å‘å°±ä¸Šä¸å»äº†ï¼Œæ±‚è°ƒä¼˜å‚æ•°","like_count":0},{"had_liked":false,"id":219688,"user_name":"Damoncui","can_delete":false,"product_type":"c1","uid":1566446,"ip_address":"","ucode":"5F09EB267F0572","user_header":"https://static001.geekbang.org/account/avatar/00/17/e6/ee/8fdbd5db.jpg","comment_is_top":false,"comment_ctime":1590064260,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590064260","product_id":100020901,"comment_content":"æœ‰ç‚¹åƒåŠ›å•¦~ ä¸è¿‡è¿˜æ˜¯å¾ˆæ·‹æ¼“å°½è‡´~<br>åŠ æ²¹~ æ‰“å¡ D8~","like_count":0},{"had_liked":false,"id":199313,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1585486554,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585486554","product_id":100020901,"comment_content":"çŸ¥é“æ€§èƒ½æŒ‡æ ‡ï¼ŒçŸ¥é“è¦ä¼˜åŒ–çš„ç›®æ ‡ï¼Œç»“åˆåˆé€‚çš„å·¥å…·æ¥éªŒè¯ï¼Œæ¥å£æ€§èƒ½è°ƒä¼˜çš„å¥—è·¯ä¹Ÿç±»ä¼¼~","like_count":0},{"had_liked":false,"id":188296,"user_name":"gg","can_delete":false,"product_type":"c1","uid":1225252,"ip_address":"","ucode":"363A9671D9469F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUYHWnZz9BGSq0wduPwAULAT0ENpwibnTByqFHhZTcgUlicYr6bvUlo0no1icOmamoHu9oyniaYHaaqA/132","comment_is_top":false,"comment_ctime":1584336665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584336665","product_id":100020901,"comment_content":"æ‰“å¡ï¼š<br>è™½ç„¶ç›®å‰å·¥ä½œè¿˜ç”¨ä¸åˆ°è¿™äº›ã€ä½†æ˜¯é€šè¿‡å­¦ä¹ å¯ä»¥å°†åº•å±‚çŸ¥è¯†ä¸²è”èµ·æ¥","like_count":0},{"had_liked":false,"id":180122,"user_name":"Ljian","can_delete":false,"product_type":"c1","uid":1079486,"ip_address":"","ucode":"481E4BAEAA666C","user_header":"https://static001.geekbang.org/account/avatar/00/10/78/be/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1582192047,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582192047","product_id":100020901,"comment_content":"é—®é¢˜1ï¼šåšåº”ç”¨å±‚çš„æ€§èƒ½æµ‹è¯•çš„æ—¶å€™ï¼Œæµ‹è¯•é“¾è·¯ä¸€èˆ¬æ˜¯æ€æ ·çš„ï¼Ÿ<br>* æµ‹è¯•å·¥å…· â€”&gt; å¤–ç½‘ â€”&gt; è´Ÿè½½å‡è¡¡å™¨ â€”&gt; åº”ç”¨<br>* æµ‹è¯•å·¥å…· â€”&gt; è´Ÿè½½å‡è¡¡å™¨ â€”&gt; åº”ç”¨<br>* æµ‹è¯•å·¥å…· â€”&gt; åº”ç”¨<br><br>é—®é¢˜2ï¼šä¸€èˆ¬æ¥è¯´å¹¶å‘æ•°å’Œçº¿ç¨‹æ•°ï¼Œéœ€è¦æ ¹æ®ä¸Šé¢æ¥å®šï¼Ÿ","like_count":0},{"had_liked":false,"id":177441,"user_name":"soimage","can_delete":false,"product_type":"c1","uid":1011400,"ip_address":"","ucode":"82FC2D560616D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6e/c8/ed2926b5.jpg","comment_is_top":false,"comment_ctime":1581392900,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1581392900","product_id":100020901,"comment_content":"è¯·é—® C10K ä¸­çš„å•æœºï¼Œæ˜¯ä»€ä¹ˆé…ç½®çš„æœåŠ¡å™¨ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312036,"discussion_content":"ä¸Šä¸–çºª90å¹´ä»£çš„æœåŠ¡å™¨é…ç½®ï¼Œ2Gå†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602569782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173124,"user_name":"å°èŠ±","can_delete":false,"product_type":"c1","uid":1401483,"ip_address":"","ucode":"BFF0A1A59FD35D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/umxqic2CHGySYhT47Rz03ePCloIZ7X21dCLZMVo82m2gjhJdJVqYt3AOdZUXg1roTNSRibkj2g5eia76cbFdxjliag/132","comment_is_top":false,"comment_ctime":1579428505,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579428505","product_id":100020901,"comment_content":"å®¢æˆ·ç«¯ï¼š<br>&gt;iperf3 -c 10.8.7.16  -b 1m -t 15 -p 8080<br>Connecting to host 10.8.7.16, port 8080<br>[  4] local 10.20.0.48 port 58029 connected to 10.8.7.16 port 8080<br>[ ID] Interval           Transfer     Bandwidth<br>[  4]   0.00-1.00   sec   256 KBytes  2.10 Mbits&#47;sec<br>[  4]   1.00-2.00   sec   768 KBytes  6.28 Mbits&#47;sec<br>...<br>[  4]  12.00-13.00  sec   896 KBytes  7.34 Mbits&#47;sec<br>[  4]  13.00-14.00  sec   896 KBytes  7.34 Mbits&#47;sec<br>[  4]  14.00-15.00  sec   768 KBytes  6.29 Mbits&#47;sec<br><br>[ ID] Interval           Transfer     Bandwidth<br>[  4]   0.00-15.00  sec  9.88 MBytes  5.52 Mbits&#47;sec                  sender<br>[  4]   0.00-15.00  sec  9.88 MBytes  5.52 Mbits&#47;sec                  receiver<br><br>iperf Done.<br><br>æœåŠ¡ç«¯ï¼š<br>[ ID] Interval           Transfer     Bandwidth<br>[ 10]   0.00-1.00   sec  91.3 KBytes   748 Kbits&#47;sec                  <br>[ 10]   1.00-2.00   sec   677 KBytes  5.54 Mbits&#47;sec                  <br>[ 10]   2.00-3.00   sec   768 KBytes  6.29 Mbits&#47;sec                  <br>[ 10]   3.00-4.00   sec   896 KBytes  7.34 Mbits&#47;sec                  <br>...              <br>[ 10]  12.00-13.00  sec   896 KBytes  7.34 Mbits&#47;sec                  <br>[ 10]  13.00-14.00  sec   896 KBytes  7.34 Mbits&#47;sec                  <br>[ 10]  14.00-15.00  sec   768 KBytes  6.29 Mbits&#47;sec                  <br>[ 10]  15.00-15.22  sec   256 KBytes  9.72 Mbits&#47;sec                  <br><br>[ ID] Interval           Transfer     Bandwidth<br>[ 10]   0.00-15.22  sec  0.00 Bytes  0.00 bits&#47;sec                  sender<br>[ 10]   0.00-15.22  sec  9.88 MBytes  5.44 Mbits&#47;sec                  receiver<br>-----------------------------------------------------------<br>Server listening on 8080<br>-----------------------------------------------------------<br><br>è¯·é—®è¿™ä¸ªæµ‹è¯•ç»“æœæ˜¯çœ‹æœ€å2è¡Œä¹ˆï¼Ÿ<br>å®¢æˆ·ç«¯å¸¦å®½æ˜¯5.52 Mbits&#47;sec ,æœåŠ¡ç«¯æ˜¯ 5.44 Mbits&#47;sec?<br>è¿™ä¸ªæ˜¯æœ€å¤§å¸¦å®½ä¹ˆï¼Ÿ<br><br>","like_count":0},{"had_liked":false,"id":166679,"user_name":"å¤§åœŸè±†","can_delete":false,"product_type":"c1","uid":1121636,"ip_address":"","ucode":"67445DC3EC9DB0","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg","comment_is_top":false,"comment_ctime":1577542574,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1577542574","product_id":100020901,"comment_content":"è€å¸ˆï¼Œ5ç§ç½‘ç»œI &#47; O ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªä¿¡å·é©±åŠ¨I&#47; O ï¼Œå¯ä»¥è¯´ä¸‹ä½¿ç”¨åœºæ™¯å—ï¼Ÿä¹Ÿæ˜¯è¾¹ç¼˜è§¦å‘","like_count":0},{"had_liked":false,"id":158473,"user_name":"tech1","can_delete":false,"product_type":"c1","uid":1659886,"ip_address":"","ucode":"95D3457819C68A","user_header":"https://static001.geekbang.org/account/avatar/00/19/53/ee/bad231da.jpg","comment_is_top":false,"comment_ctime":1575379459,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575379459","product_id":100020901,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":140580,"user_name":"æ‡µæ‡‚çš„Java","can_delete":false,"product_type":"c1","uid":1312151,"ip_address":"","ucode":"19D3BE0AA1410B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELTaqicWVpIsOpha9icy6LLJrrd24lGlwsBYhBTkBUdGHIGFXRbyZicNbSafvhMATDBjX6NSGLam9bag/132","comment_is_top":false,"comment_ctime":1571011329,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1571011329","product_id":100020901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œåƒtcpå’Œhttpæˆ‘ç†è§£æœ€åçš„æ€§èƒ½å¥½åä¸ä¹Ÿå¾—å–å†³äºç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œæ˜¯å¦ç•…é€šå—ã€‚å…‰é’å’Œæ™®é€šä»¥å¤ªç½‘è‚¯å®šç»“æœä¹Ÿä¸ä¸€æ ·å§ã€‚","like_count":0,"discussions":[{"author":{"id":1778000,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ncicjtgbOgxk2V3VWYJQAia6VqrvHE23JVGtkQALgl6XScQmdqmKZ5RXicfw0CQ4uMplhMeeYoSZNPggBRTpQLR1Q/132","nickname":"0xkjAlbert","note":"","ucode":"B607DA1230321F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338957,"discussion_content":"è‚¯å®šæ˜¯é»˜è®¤ç•…é€šçš„æƒ…å†µçš„ï¼Œå¦‚æœä¸ç•…é€šï¼Œæ˜¯å®¢æˆ·ç«¯çš„é—®é¢˜çš„è¯è¯·æ±‚åˆ°ä¸äº†æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯çš„é—®é¢˜å°±éœ€è¦è·Ÿæœºæˆ¿ï¼Œè¿è¥å•†æ²Ÿé€šè§£å†³äº†ã€‚å…‰çº¤å’ŒåŒç»çº¿ç½‘çº¿éƒ½å¯ä»¥ä¿è¯ç•…é€šï¼Œåªæ˜¯å¸¦å®½å’Œå»¶è¿Ÿå¯èƒ½ç•¥æœ‰ä¸åŒï¼Œè€Œè¿™ä¸ªæ—¶é—´æ¶ˆè€—å æ¯”ä¸€èˆ¬æ¯”åœ¨è¿è¥å•†é“¾è·¯ä¸­å°çš„å¤šï¼Œæ‰€ä»¥é»˜è®¤æ˜¯ç•…é€šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609454743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":137727,"user_name":"è¾‰æ™–","can_delete":false,"product_type":"c1","uid":1574062,"ip_address":"","ucode":"E5EC033EE4952B","user_header":"https://static001.geekbang.org/account/avatar/00/18/04/ae/0118c132.jpg","comment_is_top":false,"comment_ctime":1569831540,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569831540","product_id":100020901,"comment_content":"åº•å±‚åè®®æ˜¯å…¶ä¸Šçš„å„å±‚ç½‘ç»œåè®®çš„åŸºç¡€ã€‚å¯ä»¥ç†è§£æˆï¼šè¶Šé«˜å±‚ï¼Œæ€§èƒ½æµ‹è¯•çš„ç»“æœå°±è¶Šâ€œå·®â€?<br>æŒ‰ç…§è€å¸ˆçš„æ¡ˆä¾‹ï¼Œå¦‚æœHTTPå±‚é€‰ç”¨äº†åˆé€‚çš„å·¥å…·ï¼Œé‚£ä¹ˆæµ‹è¯•ç»“æœå°±åº”è¯¥æ¯”ä½¿ç”¨wrkæ¥çš„å¥½ï¼Ÿ","like_count":0},{"had_liked":false,"id":136316,"user_name":"ä¹–ï¼Œæ‘¸æ‘¸å¤´","can_delete":false,"product_type":"c1","uid":1611745,"ip_address":"","ucode":"BD92741A11D3CD","user_header":"https://static001.geekbang.org/account/avatar/00/18/97/e1/0f4d90ff.jpg","comment_is_top":false,"comment_ctime":1569407850,"is_pvip":true,"discussion_count":3,"race_medal":0,"score":"1569407850","product_id":100020901,"comment_content":"æˆ‘äº‘æœåŠ¡å™¨15Mçš„å¸¦å®½ï¼Œå’‹æµ‹è¯•å‡ºæ¥ååç‡è¿™ä¹ˆä½<br>[root@node1 ~]# wrk -c 1000 -t 2 http:&#47;&#47;m.xxxx.com<br>Running 10s test @ http:&#47;&#47;m.yupao.com<br>  2 threads and 1000 connections<br>  Thread Stats   Avg      Stdev     Max   +&#47;- Stdev<br>    Latency     1.27s   320.93ms   1.99s    62.96%<br>    Req&#47;Sec    42.03     58.53   290.00     87.69%<br>  313 requests in 10.05s, 8.82MB read<br>  Socket errors: connect 0, read 0, write 0, timeout 97<br>  Non-2xx or 3xx responses: 268<br>Requests&#47;sec:     31.15<br>Transfer&#47;sec:      0.88MB<br>åªæœ‰0.88M","like_count":0,"discussions":[{"author":{"id":1290469,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Um0fKCDsGBRStZBF1M4HLPSq8jiancnNoYKiaYyYldFX0NObkyUFmnVKTgjm6Y7wUiaCQ3Vm9Ic213l65kJfUzq4w/132","nickname":"Geek_c92584","note":"","ucode":"D9DA02DA718977","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205429,"discussion_content":"æµ‹è¯•ä¸­é€æ­¥åŠ å¹¶å‘é‡ï¼Œå¦‚æœå¢åŠ å¹¶å‘é‡ä¹Ÿæ²¡æ”¹è§‚ï¼Œå°±æ”¹ä¸ºæœ¬åœ°ç½‘ç»œå‹æµ‹ï¼Œçœ‹æ˜¯å¦ç½‘ç»œæ—¶å»¶å¯¼è‡´ç“¶é¢ˆ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584304391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1611745,"avatar":"https://static001.geekbang.org/account/avatar/00/18/97/e1/0f4d90ff.jpg","nickname":"ä¹–ï¼Œæ‘¸æ‘¸å¤´","note":"","ucode":"BD92741A11D3CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21039,"discussion_content":"å·®è·ä¸ºå•¥ä¼šè¿™ä¹ˆå¤§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569415362,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1611745,"avatar":"https://static001.geekbang.org/account/avatar/00/18/97/e1/0f4d90ff.jpg","nickname":"ä¹–ï¼Œæ‘¸æ‘¸å¤´","note":"","ucode":"BD92741A11D3CD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21038,"discussion_content":"æ˜¯ä¸æ˜¯è¯¥è¿™æ ·ç®—    15*1024/8 =1920KB/s =1.875Mè¿™æ˜¯ç†è®ºå€¼ï¼Œ0.88Mä¸ºå®é™…å€¼ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569415342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123766,"user_name":"ã€‚ã€‚ã€‚ã€‚","can_delete":false,"product_type":"c1","uid":1370981,"ip_address":"","ucode":"E724186A3F957A","user_header":"https://static001.geekbang.org/account/avatar/00/14/eb/65/6c4fbdd9.jpg","comment_is_top":false,"comment_ctime":1565753975,"is_pvip":false,"replies":[{"id":"45971","content":"è·¨ä¸»æœºæµ‹è¯•è¯•è¯•ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1566133305,"ip_address":"","comment_id":123766,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565753975","product_id":100020901,"comment_content":"è€å¸ˆ ï¼Œæ²¡æ˜ç™½è¿™é‡Œçš„ååé‡å’Œå®é™…çš„å¸¦å®½å¤§å°æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ<br>æˆ‘çš„æœåŠ¡å™¨å¸¦å®½å¤§å°æ˜¯1Mï¼Œä½†æ˜¯ç”¨wrkæµ‹è¯•ç½‘ç»œååé‡è¾¾åˆ°äº†4Mï¼Ÿä¸ºä»€ä¹ˆä¼šè¶…å‡ºå®é™…çš„å¸¦å®½å¤§å°å‘¢ï¼Ÿ<br>[root@VM_0_2_centos wrk]# wrk -c 1000 -t 2 http:&#47;&#47;localhost&#47;<br>Running 10s test @ http:&#47;&#47;localhost&#47;<br>  2 threads and 1000 connections<br>  Thread Stats   Avg      Stdev     Max   +&#47;- Stdev<br>    Latency   108.23ms   80.21ms   1.95s    97.68%<br>    Req&#47;Sec     2.54k     1.77k    5.87k    66.15%<br>  49587 requests in 10.06s, 40.20MB read<br>  Socket errors: connect 0, read 0, write 0, timeout 78<br>Requests&#47;sec:   4929.91<br>Transfer&#47;sec:      4.00MB","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462806,"discussion_content":"è·¨ä¸»æœºæµ‹è¯•è¯•è¯•ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566133305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123473,"user_name":"ä½ è®¤ä¸å‡ºæ¥æˆ‘","can_delete":false,"product_type":"c1","uid":1315516,"ip_address":"","ucode":"81772397576E38","user_header":"https://static001.geekbang.org/account/avatar/00/14/12/bc/2f2e165a.jpg","comment_is_top":false,"comment_ctime":1565684052,"is_pvip":false,"replies":[{"id":"45973","content":"ä»å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯åŒæ—¶æŠ“åŒ…ï¼Œå°±å¯ä»¥çœ‹å‡ºåŒºåˆ«äº†ã€‚è¿™é‡Œå¾ˆè‚¯èƒ½æ˜¯ä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„è¿æ¥æ…¢äº†","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1566133685,"ip_address":"","comment_id":123473,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565684052","product_id":100020901,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œæˆ‘ç°åœ¨æœ‰ä¸ªæœåŠ¡å‹æµ‹çš„æ—¶å€™ä»æœåŠ¡ç«¯çœ‹åˆ°æœåŠ¡ç«¯ä»æ¥åˆ°ç½‘ç»œè¯·æ±‚åˆ°å¤„ç†å®Œæˆåªç”¨äº† 5msï¼› ä½†æ˜¯ä»å®¢æˆ·ç«¯çœ‹è€—æ—¶ 75 åˆ†ä½éƒ½æœ‰ 400msï¼Œ æˆ‘ç”¨ iperf æµ‹è¯•ååé‡ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œæ‰€ä»¥è¯·æ•™ä¸€ä¸‹è€å¸ˆæœ‰æ²¡æœ‰ä»€ä¹ˆæŸ¥è¿™ä¸ªé—®é¢˜çš„æ€è·¯å‘¢ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462690,"discussion_content":"ä»å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯åŒæ—¶æŠ“åŒ…ï¼Œå°±å¯ä»¥çœ‹å‡ºåŒºåˆ«äº†ã€‚è¿™é‡Œå¾ˆè‚¯èƒ½æ˜¯ä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„è¿æ¥æ…¢äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566133685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81231,"user_name":"null","can_delete":false,"product_type":"c1","uid":1462466,"ip_address":"","ucode":"67DE98FA6DAEBF","user_header":"","comment_is_top":false,"comment_ctime":1553836819,"is_pvip":false,"replies":[{"id":"29584","content":"ç›®æ ‡æœºå†…éƒ¨å¯ä»¥è§‚æµ‹åˆ°çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1554003150,"ip_address":"","comment_id":81231,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553836819","product_id":100020901,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ‰ç‚¹ç–‘é—®è¯·è€å¸ˆè§£ç­”ä¸€ä¸‹ï¼Œåœ¨ç”¨pktgen çš„æµ‹è¯•ä¸­ï¼Œè²Œä¼¼åªèƒ½æµ‹å‡ºå‘åŒ…æœºå™¨çš„å‘åŒ…ååé‡å§ï¼Ÿå› ä¸ºå‘åŒ…æœºæ²¡æ³•æ„ŸçŸ¥åˆ°ç›®æ ‡æœºæ˜¯å¦çœŸçš„å¤„ç†äº†è¿™ä¸ªåŒ…ï¼Œè¿˜æ˜¯ç›´æ¥åœ¨ç½‘å¡å°±è¢«ä¸¢äº†ã€‚å¦‚æœæƒ³æµ‹è¯•ç›®æ ‡æœºçš„ååé‡åº”è¯¥æ€ä¹ˆå¼„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445124,"discussion_content":"ç›®æ ‡æœºå†…éƒ¨å¯ä»¥è§‚æµ‹åˆ°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554003150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80475,"user_name":"å¦‚æœ","can_delete":false,"product_type":"c1","uid":1320638,"ip_address":"","ucode":"138A3EEEE50850","user_header":"","comment_is_top":false,"comment_ctime":1553665840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553665840","product_id":100020901,"comment_content":"DAY36ï¼Œæ‰“å¡<br>","like_count":0},{"had_liked":false,"id":77999,"user_name":"ğŸ’–æäº¬æ½¼ğŸ’–","can_delete":false,"product_type":"c1","uid":1284775,"ip_address":"","ucode":"8337BC784D9674","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/a7/51cf1a9e.jpg","comment_is_top":false,"comment_ctime":1553051577,"is_pvip":false,"replies":[{"id":"29354","content":"è¿™æ˜¯çº¯åº”ç”¨çš„ä¸œè¥¿äº†ï¼Œæ²¡æœ‰å…·ä½“ç»†èŠ‚ä¸å¥½æ¨è","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1553699566,"ip_address":"","comment_id":77999,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553051577","product_id":100020901,"comment_content":"è€å¸ˆæˆ‘è¿™æœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼ŒåŸºäºwebservice æ¥å£ï¼Œå¯¹äºéœ€è¦å¤šsessionï¼Œ æ¯ä¸ªsessionæœ‰å¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”è¿™äº›è¯·æ±‚æŒ‰ç…§å…ˆåé¡ºåºæœ‰ä¾èµ–å…³ç³»ï¼Œä¸Šä¸ªè¯·æ±‚å“åº”ç»“æœä½œä¸ºä¸‹ä¸ªè¯·æ±‚åŒ…çš„å†…å®¹ï¼Œç”¨å“ªç§å¼€æºå·¥å…·æ›´åˆé€‚å‘¢ï¼Ÿè°¢è°¢","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443930,"discussion_content":"è¿™æ˜¯çº¯åº”ç”¨çš„ä¸œè¥¿äº†ï¼Œæ²¡æœ‰å…·ä½“ç»†èŠ‚ä¸å¥½æ¨è","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553699566,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75921,"user_name":"Griffin","can_delete":false,"product_type":"c1","uid":1087329,"ip_address":"","ucode":"CF766B92A65261","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/61/34a0da09.jpg","comment_is_top":false,"comment_ctime":1552491794,"is_pvip":false,"replies":[{"id":"28054","content":"è®¾ç½®æµ‹è¯•æ•°æ®çš„ååé‡ï¼Œä¹Ÿå°±æ˜¯ iperf3 è‡ªå·±å‘å‡ºçš„æµ‹è¯•åŒ…è¯¥ç”¨å¤šå¤§çš„å¸¦å®½ã€‚åœ¨æ–‡æ¡£é‡Œè¿˜æœ‰æ›´è¯¦ç»†çš„ä»‹ç»ï¼Œä½ å¯ä»¥mançœ‹çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1552750178,"ip_address":"","comment_id":75921,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552491794","product_id":100020901,"comment_content":"è¯·é—®ç”¨iperf3æµ‹è¯•tcp&#47;udpæ—¶è¿™ä¸ª-bçš„ç›®æ ‡å¸¦å®½æ˜¯æŒ‡å•¥ï¼Ÿ æ˜¯é¢„ä¼°è¯¥ç½‘ç»œæœ‰1Gçš„å¸¦å®½ä¹ˆï¼Ÿ<br>iperf3 -c 192.168.0.30 -b 1G -t 15 -P 2 -p 10000","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443091,"discussion_content":"è®¾ç½®æµ‹è¯•æ•°æ®çš„ååé‡ï¼Œä¹Ÿå°±æ˜¯ iperf3 è‡ªå·±å‘å‡ºçš„æµ‹è¯•åŒ…è¯¥ç”¨å¤šå¤§çš„å¸¦å®½ã€‚åœ¨æ–‡æ¡£é‡Œè¿˜æœ‰æ›´è¯¦ç»†çš„ä»‹ç»ï¼Œä½ å¯ä»¥mançœ‹çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552750178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75913,"user_name":"Griffin","can_delete":false,"product_type":"c1","uid":1087329,"ip_address":"","ucode":"CF766B92A65261","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/61/34a0da09.jpg","comment_is_top":false,"comment_ctime":1552490804,"is_pvip":false,"replies":[{"id":"28053","content":"å¯¹çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1552750046,"ip_address":"","comment_id":75913,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552490804","product_id":100020901,"comment_content":"è€å¸ˆï¼Œ è¯·é—®åœ¨æµ‹è¯•PPSçš„æ¡ˆä¾‹ä¸­ï¼Œ æˆ‘å†™é”™äº†IPå’Œmacåœ°å€ï¼Œä½†æ˜¯pkts-sofarè¿˜æ˜¯1000000 å‘¢ï¼Ÿ è¿™ä¸ªæ˜¯åªæµ‹è¯•å‘é€ä¸çœ‹è¿”å›å€¼ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443086,"discussion_content":"å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552750046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75552,"user_name":"MJ","can_delete":false,"product_type":"c1","uid":1237145,"ip_address":"","ucode":"FCEC0C21444D2A","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/99/5d603697.jpg","comment_is_top":false,"comment_ctime":1552434250,"is_pvip":false,"replies":[{"id":"28040","content":"å¯ä»¥ç›´æ¥ç²˜è´´åˆ°SHELLè¿è¡Œï¼Œä¿å­˜åˆ°è„šæœ¬é‡Œä¹Ÿå¯ä»¥çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1552748754,"ip_address":"","comment_id":75552,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552434250","product_id":100020901,"comment_content":"# å®šä¹‰ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œæ–¹ä¾¿åé¢é…ç½®å„ç§æµ‹è¯•é€‰é¡¹<br>function pgset() {<br>    local result<br>    echo $1 &gt; $PGDEV<br><br>    result=`cat $PGDEV | fgrep &quot;Result: OK:&quot;`<br>    if [ &quot;$result&quot; = &quot;&quot; ]; then<br>         cat $PGDEV | fgrep Result:<br>    fi<br>}<br><br># ä¸º 0 å·çº¿ç¨‹ç»‘å®š eth0 ç½‘å¡<br>PGDEV=&#47;proc&#47;net&#47;pktgen&#47;kpktgend_0<br>pgset &quot;rem_device_all&quot;   # æ¸…ç©ºç½‘å¡ç»‘å®š<br>pgset &quot;add_device eth0&quot;  # æ·»åŠ  eth0 ç½‘å¡<br><br># é…ç½® eth0 ç½‘å¡çš„æµ‹è¯•é€‰é¡¹<br>PGDEV=&#47;proc&#47;net&#47;pktgen&#47;eth0<br>pgset &quot;count 1000000&quot;    # æ€»å‘åŒ…æ•°é‡<br>pgset &quot;delay 5000&quot;       # ä¸åŒåŒ…ä¹‹é—´çš„å‘é€å»¶è¿Ÿ (å•ä½çº³ç§’)<br>pgset &quot;clone_skb 0&quot;      # SKB åŒ…å¤åˆ¶<br>pgset &quot;pkt_size 64&quot;      # ç½‘ç»œåŒ…å¤§å°<br>pgset &quot;dst 192.168.0.30&quot; # ç›®çš„ IP<br>pgset &quot;dst_mac 11:11:11:11:11:11&quot;  # ç›®çš„ MAC<br><br># å¯åŠ¨æµ‹è¯•<br>PGDEV=&#47;proc&#47;net&#47;pktgen&#47;pgctrl<br>pgset &quot;start&quot;<br><br><br>è€å¸ˆï¼Œè¿™æ®µæ˜¯viä¸€ä¸ªæ–‡ä»¶ä¿å­˜æˆè„šæ­¥å—ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442937,"discussion_content":"å¯ä»¥ç›´æ¥ç²˜è´´åˆ°SHELLè¿è¡Œï¼Œä¿å­˜åˆ°è„šæœ¬é‡Œä¹Ÿå¯ä»¥çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552748754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":69302,"user_name":"åˆ’æ—¶ä»£","can_delete":false,"product_type":"c1","uid":1061454,"ip_address":"","ucode":"9554CE2F83B77F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/2o1Izf2YyJSnnI0ErZ51pYRlnrmibqUTaia3tCU1PjMxuwyXSKOLUYiac2TQ5pd5gNGvS81fVqKWGvDsZLTM8zhWg/132","comment_is_top":false,"comment_ctime":1550714276,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550714276","product_id":100020901,"comment_content":"æ‰“å¡æ€»ç»“ã€‚","like_count":0},{"had_liked":false,"id":68017,"user_name":"ğŸ€ ğŸ€ ğŸ€ ğŸ¼","can_delete":false,"product_type":"c1","uid":1252056,"ip_address":"","ucode":"1D22FEE1E50117","user_header":"https://static001.geekbang.org/account/avatar/00/13/1a/d8/4a051faa.jpg","comment_is_top":false,"comment_ctime":1550387897,"is_pvip":false,"replies":[{"id":"24367","content":"çœ‹åœºæ™¯çš„ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„æ•°å€¼ã€‚å¹¶ä¸”è·Ÿè¯­è¨€å…¶å®æ²¡å…³ç³»ï¼Œå¦‚æœæ¶æ„åˆç†çš„è¯ï¼Œå³ä¾¿æ˜¯pyä¹Ÿå¯ä»¥åšåˆ°å¾ˆé«˜çš„rpsã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550569283,"ip_address":"","comment_id":68017,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550387897","product_id":100020901,"comment_content":"åƒè€å¸ˆæ–‡æ¡£é‡Œçš„ä¾‹å­ ä½œä¸ºåº”ç”¨æœåŠ¡å™¨ å®Œæˆhttpè¯·æ±‚çš„ä¸šåŠ¡ rpsä¸€èˆ¬æ¥è¯´å¤šå°‘ç®—æ˜¯åˆæ ¼å‘¢ï¼Ÿå°¤å…¶æ˜¯åƒpyè¿™ç§å¹¶å‘èƒ½åŠ›ä¸ç®—ä¼˜ç§€çš„è¯­è¨€æ¥è¯´","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439472,"discussion_content":"çœ‹åœºæ™¯çš„ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„æ•°å€¼ã€‚å¹¶ä¸”è·Ÿè¯­è¨€å…¶å®æ²¡å…³ç³»ï¼Œå¦‚æœæ¶æ„åˆç†çš„è¯ï¼Œå³ä¾¿æ˜¯pyä¹Ÿå¯ä»¥åšåˆ°å¾ˆé«˜çš„rpsã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550569283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67852,"user_name":"è…¾è¾¾","can_delete":false,"product_type":"c1","uid":1079876,"ip_address":"","ucode":"72F9CFBA44FDEE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL9hlAIKQ1sGDu16oWLOHyCSicr18XibygQSMLMjuDvKk73deDlH9aMphFsj41WYJh121aniaqBLiaMNg/132","comment_is_top":false,"comment_ctime":1550299838,"is_pvip":false,"replies":[{"id":"24052","content":"æˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä»‹ç»äº†ï¼Œå†ç³»ç»Ÿçš„è¯è¦å»å‚è€ƒä¸‹å®ƒçš„å®˜æ–¹æ–‡æ¡£ https:&#47;&#47;iperf.fr&#47;","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550326744,"ip_address":"","comment_id":67852,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550299838","product_id":100020901,"comment_content":"â€œç‰¹åˆ«æ˜¯ç°åœ¨çš„äº‘è®¡ç®—æ—¶ä»£ï¼Œåœ¨ä½ åˆšæ‹¿åˆ°ä¸€æ‰¹è™šæ‹Ÿæœºæ—¶ï¼Œé¦–å…ˆè¦åšçš„ï¼Œåº”è¯¥å°±æ˜¯ç”¨ iperf ï¼Œæµ‹è¯•ä¸€ä¸‹ç½‘ç»œæ€§èƒ½æ˜¯å¦ç¬¦åˆé¢„æœŸâ€  è¿™ä¸ªä¸œè¥¿è¿˜æœ‰æ¯”è¾ƒæœ‰ç³»ç»Ÿçš„ä»‹ç»å—ï¼Ÿ æˆ–è€…ä¸€äº›åšå®¢æ¨èï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439401,"discussion_content":"æˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä»‹ç»äº†ï¼Œå†ç³»ç»Ÿçš„è¯è¦å»å‚è€ƒä¸‹å®ƒçš„å®˜æ–¹æ–‡æ¡£ https://iperf.fr/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550326744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67536,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":false,"comment_ctime":1550194236,"is_pvip":false,"replies":[{"id":"24037","content":"ä½ è¿™é‡Œçš„ tcp_wmem å’Œ  tcp_rmem å¤ªå°äº†ï¼Œæ˜¯ä¸æ˜¯è®¾ç½®é”™è¯¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550325667,"ip_address":"","comment_id":67536,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550194236","product_id":100020901,"comment_content":"è€å¸ˆã€‚æˆ‘å‰å‡ å¤©æµ‹è¯•å±€åŸŸç½‘ä¸‰å°æœºå™¨é«˜å¹¶å‘ä¿®æ”¹äº†å‚æ•°<br>&#47;etc&#47;security&#47;limits.conf<br>* soft  nofile  102400<br>* hard  nofile  102400<br>&#47;etc&#47;sysctl.conf<br>net.ipv4.tcp_mem = 252144 524288 786432<br>net.ipv4.tcp_wmem = 2048 2048 4096<br>net.ipv4.tcp_rmem = 2048 2048 4096<br>fs.file-max = 1048576<br>æµ‹è¯•ç»“æŸåæ²¡æœ‰æ”¹å›å»ï¼Œä¿®æ”¹ä¹‹å‰ä¸‰å°æœºå™¨ä¹‹é—´pingå€¼æ˜¯0.3mså·¦å³ï¼Œå…¬ç½‘ä¸‹è½½é€Ÿåº¦300KB&#47;så·¦å³ï¼Œ<br>ä¿®æ”¹åå…¬ç½‘ä¸‹è½½é€Ÿåº¦æ˜¯30KB&#47;s,è¯·é—®è¿™æ˜¯ç¼“å†²åŒºçš„é”…å—","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439234,"discussion_content":"ä½ è¿™é‡Œçš„ tcp_wmem å’Œ  tcp_rmem å¤ªå°äº†ï¼Œæ˜¯ä¸æ˜¯è®¾ç½®é”™è¯¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550325667,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67441,"user_name":"ç‹å´§éœ","can_delete":false,"product_type":"c1","uid":1317115,"ip_address":"","ucode":"4F3284634293A8","user_header":"https://static001.geekbang.org/account/avatar/00/14/18/fb/c1334976.jpg","comment_is_top":false,"comment_ctime":1550147578,"is_pvip":false,"replies":[{"id":"24033","content":"ğŸ‘ å…¨é“¾è·¯ç›‘æ§æ˜¯ä¸ªå¤§è¯é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550325249,"ip_address":"","comment_id":67441,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550147578","product_id":100020901,"comment_content":"åšå…¨é“¾è·¯ç›‘æ§","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439197,"discussion_content":"ğŸ‘ å…¨é“¾è·¯ç›‘æ§æ˜¯ä¸ªå¤§è¯é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550325249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":67146,"user_name":"black_mirror","can_delete":false,"product_type":"c1","uid":1320092,"ip_address":"","ucode":"2549C87298BF12","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM4z9WYWVvWDhMF0SicPE5ad56ME6DibyWGbRoQa0lH4U9icdsjNcv3ssRickcuRMDA01e6vMXnmOVSr9l5LVUefVxicn/132","comment_is_top":false,"comment_ctime":1550104107,"is_pvip":false,"replies":[{"id":"24025","content":"å°±æ˜¯å…±äº«çš„å‘€ï¼Œå†…å­˜æ¨¡å—åˆè¯¥å¤ä¹ äº†ğŸ˜Š","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550324388,"ip_address":"","comment_id":67146,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550104107","product_id":100020901,"comment_content":"å€ªè€å¸ˆ <br>è¯·é—®linuxç³»ç»Ÿä¸‹æ€ä¹ˆæŸ¥çœ‹è¿›ç¨‹çš„æ¯ä¸ªçº¿ç¨‹å ç”¨å¤šå°‘å†…å­˜é‚£ï¼Ÿtop -Hp çœ‹åˆ°çº¿ç¨‹å†…å­˜ä¸è¿›ç¨‹ä¸€æ ·ï¼Œçœ‹èµ·æ¥å®ƒä»¬æ˜¯å…±äº«çš„","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439080,"discussion_content":"å°±æ˜¯å…±äº«çš„å‘€ï¼Œå†…å­˜æ¨¡å—åˆè¯¥å¤ä¹ äº†ğŸ˜Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550324388,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66798,"user_name":"Enterprize","can_delete":false,"product_type":"c1","uid":1215130,"ip_address":"","ucode":"3C120E9023B6C5","user_header":"https://static001.geekbang.org/account/avatar/00/12/8a/9a/7270d764.jpg","comment_is_top":false,"comment_ctime":1550022898,"is_pvip":false,"replies":[{"id":"23708","content":"å¦‚æœæ˜¯ç°è±¡è¿˜åœ¨çš„è¯ï¼ŒæŠ“ä¸ªåŒ…å°±å¯ä»¥çœ‹å‡ºæ¥ã€‚ä¸è¿‡ï¼Œæœ€å¥½è¿˜æ˜¯åŠ ä¸Šå„å±‚çš„å»¶è¿Ÿç›‘æ§ï¼Œè¿™æ ·å¯ä»¥çœ‹åˆ°å†å²çš„æƒ…å†µ","user_name":"ä½œè€…å›å¤","user_name_real":"å€ªæœ‹é£","uid":"1001282","ctime":1550068932,"ip_address":"","comment_id":66798,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1550022898","product_id":100020901,"comment_content":"æœ‰æ—¶ä¼šé‡åˆ°å¶ç„¶æ€§çš„apiè¯·æ±‚å“åº”æ…¢ï¼Œè¿™ç§é—®é¢˜æ’æŸ¥çš„æ€è·¯æ˜¯æ€æ ·çš„å‘¢ï¼Œæ€ä¹ˆç¡®å®šæ˜¯ç½‘ç»œæŠ–åŠ¨è¿˜æ˜¯æœåŠ¡å™¨é…ç½®å°±æœ‰é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1001282,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/42/5b55bd1a.jpg","nickname":"å€ªæœ‹é£","note":"","ucode":"F0FAC195CDE7AC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438916,"discussion_content":"å¦‚æœæ˜¯ç°è±¡è¿˜åœ¨çš„è¯ï¼ŒæŠ“ä¸ªåŒ…å°±å¯ä»¥çœ‹å‡ºæ¥ã€‚ä¸è¿‡ï¼Œæœ€å¥½è¿˜æ˜¯åŠ ä¸Šå„å±‚çš„å»¶è¿Ÿç›‘æ§ï¼Œè¿™æ ·å¯ä»¥çœ‹åˆ°å†å²çš„æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550068932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}