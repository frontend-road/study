{"id":103397,"title":"12 | å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ä¸å¸¸è§ä½†æ˜¯å¾ˆé«˜çº§çš„åŠŸèƒ½ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å¤•ã€‚ä»Šå¤©æˆ‘è¦å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼šå®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ä¸å¸¸è§ä½†æ˜¯å¾ˆé«˜çº§çš„åŠŸèƒ½ã€‚</p><p>æ—¢ç„¶æ˜¯ä¸å¸¸è§ï¼Œé‚£å°±è¯´æ˜åœ¨å®é™…åœºæ™¯ä¸­å¹¶æ²¡æœ‰å¤ªé«˜çš„å‡ºåœºç‡ï¼Œä½†å®ƒä»¬ä¾ç„¶æ˜¯å¾ˆé«˜çº§å¾ˆå®ç”¨çš„ã€‚ä¸‹é¢å°±æœ‰è¯·ä»Šå¤©çš„ä¸»è§’ç™»åœºï¼šKafkaæ‹¦æˆªå™¨ã€‚</p><h2><strong>ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨ï¼Ÿ</strong></h2><p>å¦‚æœä½ ç”¨è¿‡Spring Interceptoræˆ–æ˜¯Apache Flumeï¼Œé‚£ä¹ˆåº”è¯¥ä¸ä¼šå¯¹æ‹¦æˆªå™¨è¿™ä¸ªæ¦‚å¿µæ„Ÿåˆ°é™Œç”Ÿï¼Œå…¶åŸºæœ¬æ€æƒ³å°±æ˜¯å…è®¸åº”ç”¨ç¨‹åºåœ¨ä¸ä¿®æ”¹é€»è¾‘çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°å®ç°ä¸€ç»„å¯æ’æ‹”çš„äº‹ä»¶å¤„ç†é€»è¾‘é“¾ã€‚å®ƒèƒ½å¤Ÿåœ¨ä¸»ä¸šåŠ¡æ“ä½œçš„å‰åå¤šä¸ªæ—¶é—´ç‚¹ä¸Šæ’å…¥å¯¹åº”çš„â€œæ‹¦æˆªâ€é€»è¾‘ã€‚ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†Spring MVCæ‹¦æˆªå™¨çš„å·¥ä½œåŸç†ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/09/c4/096831a3ba037b3f9e507e6db631d3c4.png?wh=770*461\" alt=\"\"></p><center><a href=\"https://o7planning.org/en/11229/spring-mvc-interceptors-tutorial\">å›¾ç‰‡æ¥æº</a> </center><p>æ‹¦æˆªå™¨1å’Œæ‹¦æˆªå™¨2åˆ†åˆ«åœ¨è¯·æ±‚å‘é€ä¹‹å‰ã€å‘é€ä¹‹åä»¥åŠå®Œæˆä¹‹åä¸‰ä¸ªåœ°æ–¹æ’å…¥äº†å¯¹åº”çš„å¤„ç†é€»è¾‘ã€‚è€ŒFlumeä¸­çš„æ‹¦æˆªå™¨ä¹Ÿæ˜¯åŒç†ï¼Œå®ƒä»¬æ’å…¥çš„é€»è¾‘å¯ä»¥æ˜¯ä¿®æ”¹å¾…å‘é€çš„æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ›å»ºæ–°çš„æ¶ˆæ¯ï¼Œç”šè‡³æ˜¯ä¸¢å¼ƒæ¶ˆæ¯ã€‚è¿™äº›åŠŸèƒ½éƒ½æ˜¯ä»¥é…ç½®æ‹¦æˆªå™¨ç±»çš„æ–¹å¼åŠ¨æ€æ’å…¥åˆ°åº”ç”¨ç¨‹åºä¸­çš„ï¼Œæ•…å¯ä»¥å¿«é€Ÿåœ°åˆ‡æ¢ä¸åŒçš„æ‹¦æˆªå™¨è€Œä¸å½±å“ä¸»ç¨‹åºé€»è¾‘ã€‚</p><p>Kafkaæ‹¦æˆªå™¨å€Ÿé‰´äº†è¿™æ ·çš„è®¾è®¡æ€è·¯ã€‚ä½ å¯ä»¥åœ¨æ¶ˆæ¯å¤„ç†çš„å‰åå¤šä¸ªæ—¶ç‚¹åŠ¨æ€æ¤å…¥ä¸åŒçš„å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚åœ¨æ¶ˆæ¯å‘é€å‰æˆ–è€…åœ¨æ¶ˆæ¯è¢«æ¶ˆè´¹åã€‚</p><p>ä½œä¸ºä¸€ä¸ªéå¸¸å°ä¼—çš„åŠŸèƒ½ï¼ŒKafkaæ‹¦æˆªå™¨è‡ª0.10.0.0ç‰ˆæœ¬è¢«å¼•å…¥åå¹¶æœªå¾—åˆ°å¤ªå¤šçš„å®é™…åº”ç”¨ï¼Œæˆ‘ä¹Ÿä»æœªåœ¨ä»»ä½•KafkaæŠ€æœ¯å³°ä¼šä¸Šçœ‹åˆ°æœ‰å…¬å¸åˆ†äº«å…¶ä½¿ç”¨æ‹¦æˆªå™¨çš„æˆåŠŸæ¡ˆä¾‹ã€‚ä½†å³ä¾¿å¦‚æ­¤ï¼Œåœ¨è‡ªå·±çš„Kafkaå·¥å…·ç®±ä¸­æ”¾å…¥è¿™ä¹ˆä¸€ä¸ªæœ‰ç”¨çš„ä¸œè¥¿ä¾ç„¶æ˜¯å€¼å¾—çš„ã€‚ä»Šå¤©æˆ‘ä»¬å°±è®©å®ƒæ¥å‘æŒ¥å¨åŠ›ï¼Œå±•ç¤ºä¸€äº›éå¸¸é…·ç‚«çš„åŠŸèƒ½ã€‚</p><!-- [[[read_end]]] --><h2><strong>Kafkaæ‹¦æˆªå™¨</strong></h2><p><strong>Kafkaæ‹¦æˆªå™¨åˆ†ä¸ºç”Ÿäº§è€…æ‹¦æˆªå™¨å’Œæ¶ˆè´¹è€…æ‹¦æˆªå™¨</strong>ã€‚ç”Ÿäº§è€…æ‹¦æˆªå™¨å…è®¸ä½ åœ¨å‘é€æ¶ˆæ¯å‰ä»¥åŠæ¶ˆæ¯æäº¤æˆåŠŸåæ¤å…¥ä½ çš„æ‹¦æˆªå™¨é€»è¾‘ï¼›è€Œæ¶ˆè´¹è€…æ‹¦æˆªå™¨æ”¯æŒåœ¨æ¶ˆè´¹æ¶ˆæ¯å‰ä»¥åŠæäº¤ä½ç§»åç¼–å†™ç‰¹å®šé€»è¾‘ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ä¸¤ç§æ‹¦æˆªå™¨éƒ½æ”¯æŒé“¾çš„æ–¹å¼ï¼Œå³ä½ å¯ä»¥å°†ä¸€ç»„æ‹¦æˆªå™¨ä¸²è¿æˆä¸€ä¸ªå¤§çš„æ‹¦æˆªå™¨ï¼ŒKafkaä¼šæŒ‰ç…§æ·»åŠ é¡ºåºä¾æ¬¡æ‰§è¡Œæ‹¦æˆªå™¨é€»è¾‘ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æƒ³åœ¨ç”Ÿäº§æ¶ˆæ¯å‰æ‰§è¡Œä¸¤ä¸ªâ€œå‰ç½®åŠ¨ä½œâ€ï¼šç¬¬ä¸€ä¸ªæ˜¯ä¸ºæ¶ˆæ¯å¢åŠ ä¸€ä¸ªå¤´ä¿¡æ¯ï¼Œå°è£…å‘é€è¯¥æ¶ˆæ¯çš„æ—¶é—´ï¼Œç¬¬äºŒä¸ªæ˜¯æ›´æ–°å‘é€æ¶ˆæ¯æ•°å­—æ®µï¼Œé‚£ä¹ˆå½“ä½ å°†è¿™ä¸¤ä¸ªæ‹¦æˆªå™¨ä¸²è”åœ¨ä¸€èµ·ç»Ÿä¸€æŒ‡å®šç»™Produceråï¼ŒProducerä¼šæŒ‰é¡ºåºæ‰§è¡Œä¸Šé¢çš„åŠ¨ä½œï¼Œç„¶åå†å‘é€æ¶ˆæ¯ã€‚</p><p>å½“å‰Kafkaæ‹¦æˆªå™¨çš„è®¾ç½®æ–¹æ³•æ˜¯é€šè¿‡å‚æ•°é…ç½®å®Œæˆçš„ã€‚ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸¤ç«¯æœ‰ä¸€ä¸ªç›¸åŒçš„å‚æ•°ï¼Œåå­—å«interceptor.classesï¼Œå®ƒæŒ‡å®šçš„æ˜¯ä¸€ç»„ç±»çš„åˆ—è¡¨ï¼Œæ¯ä¸ªç±»å°±æ˜¯ç‰¹å®šé€»è¾‘çš„æ‹¦æˆªå™¨å®ç°ç±»ã€‚æ‹¿ä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼Œå‡è®¾ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨çš„å®Œæ•´ç±»è·¯å¾„æ˜¯com.yourcompany.kafkaproject.interceptors.AddTimeStampInterceptorï¼Œç¬¬äºŒä¸ªç±»æ˜¯com.yourcompany.kafkaproject.interceptors.UpdateCounterInterceptorï¼Œé‚£ä¹ˆä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ–¹æ³•åœ¨Producerç«¯æŒ‡å®šæ‹¦æˆªå™¨ï¼š</p><pre><code>Properties props = new Properties();\nList&lt;String&gt; interceptors = new ArrayList&lt;&gt;();\ninterceptors.add(&quot;com.yourcompany.kafkaproject.interceptors.AddTimestampInterceptor&quot;); // æ‹¦æˆªå™¨1\ninterceptors.add(&quot;com.yourcompany.kafkaproject.interceptors.UpdateCounterInterceptor&quot;); // æ‹¦æˆªå™¨2\nprops.put(ProducerConfig.INTERCEPTOR_CLASSES_CONFIG, interceptors);\nâ€¦â€¦\n</code></pre><p>ç°åœ¨é—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆç¼–å†™AddTimeStampInterceptorå’ŒUpdateCounterInterceptorç±»å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œè¿™ä¸¤ä¸ªç±»ä»¥åŠä½ è‡ªå·±ç¼–å†™çš„æ‰€æœ‰Producerç«¯æ‹¦æˆªå™¨å®ç°ç±»éƒ½è¦ç»§æ‰¿org.apache.kafka.clients.producer.ProducerInterceptoræ¥å£ã€‚è¯¥æ¥å£æ˜¯Kafkaæä¾›çš„ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªæ ¸å¿ƒçš„æ–¹æ³•ã€‚</p><ol>\n<li>\n<p>onSendï¼šè¯¥æ–¹æ³•ä¼šåœ¨æ¶ˆæ¯å‘é€ä¹‹å‰è¢«è°ƒç”¨ã€‚å¦‚æœä½ æƒ³åœ¨å‘é€ä¹‹å‰å¯¹æ¶ˆæ¯â€œç¾ç¾å®¹â€ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ä½ å”¯ä¸€çš„æœºä¼šã€‚</p>\n</li>\n<li>\n<p>onAcknowledgementï¼šè¯¥æ–¹æ³•ä¼šåœ¨æ¶ˆæ¯æˆåŠŸæäº¤æˆ–å‘é€å¤±è´¥ä¹‹åè¢«è°ƒç”¨ã€‚è¿˜è®°å¾—æˆ‘åœ¨ä¸Šä¸€æœŸä¸­æåˆ°çš„å‘é€å›è°ƒé€šçŸ¥callbackå—ï¼ŸonAcknowledgementçš„è°ƒç”¨è¦æ—©äºcallbackçš„è°ƒç”¨ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•å’ŒonSendä¸æ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¢«è°ƒç”¨çš„ï¼Œå› æ­¤å¦‚æœä½ åœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­è°ƒç”¨äº†æŸä¸ªå…±äº«å¯å˜å¯¹è±¡ï¼Œä¸€å®šè¦ä¿è¯çº¿ç¨‹å®‰å…¨å“¦ã€‚è¿˜æœ‰ä¸€ç‚¹å¾ˆé‡è¦ï¼Œè¿™ä¸ªæ–¹æ³•å¤„åœ¨Producerå‘é€çš„ä¸»è·¯å¾„ä¸­ï¼Œæ‰€ä»¥æœ€å¥½åˆ«æ”¾ä¸€äº›å¤ªé‡çš„é€»è¾‘è¿›å»ï¼Œå¦åˆ™ä½ ä¼šå‘ç°ä½ çš„Producer TPSç›´çº¿ä¸‹é™ã€‚</p>\n</li>\n</ol><p>åŒç†ï¼ŒæŒ‡å®šæ¶ˆè´¹è€…æ‹¦æˆªå™¨ä¹Ÿæ˜¯åŒæ ·çš„æ–¹æ³•ï¼Œåªæ˜¯å…·ä½“çš„å®ç°ç±»è¦å®ç°org.apache.kafka.clients.consumer.ConsumerInterceptoræ¥å£ï¼Œè¿™é‡Œé¢ä¹Ÿæœ‰ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ã€‚</p><ol>\n<li>\n<p>onConsumeï¼šè¯¥æ–¹æ³•åœ¨æ¶ˆæ¯è¿”å›ç»™Consumerç¨‹åºä¹‹å‰è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨å¼€å§‹æ­£å¼å¤„ç†æ¶ˆæ¯ä¹‹å‰ï¼Œæ‹¦æˆªå™¨ä¼šå…ˆæ‹¦ä¸€é“ï¼Œæä¸€äº›äº‹æƒ…ï¼Œä¹‹åå†è¿”å›ç»™ä½ ã€‚</p>\n</li>\n<li>\n<p>onCommitï¼šConsumeråœ¨æäº¤ä½ç§»ä¹‹åè°ƒç”¨è¯¥æ–¹æ³•ã€‚é€šå¸¸ä½ å¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­åšä¸€äº›è®°è´¦ç±»çš„åŠ¨ä½œï¼Œæ¯”å¦‚æ‰“æ—¥å¿—ç­‰ã€‚</p>\n</li>\n</ol><p>ä¸€å®šè¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>æŒ‡å®šæ‹¦æˆªå™¨ç±»æ—¶è¦æŒ‡å®šå®ƒä»¬çš„å…¨é™å®šå</strong>ï¼Œå³full qualified nameã€‚é€šä¿—ç‚¹è¯´å°±æ˜¯è¦æŠŠå®Œæ•´åŒ…åä¹ŸåŠ ä¸Šï¼Œä¸è¦åªæœ‰ä¸€ä¸ªç±»ååœ¨é‚£é‡Œï¼Œå¹¶ä¸”è¿˜è¦ä¿è¯ä½ çš„Producerç¨‹åºèƒ½å¤Ÿæ­£ç¡®åŠ è½½ä½ çš„æ‹¦æˆªå™¨ç±»ã€‚</p><h2><strong>å…¸å‹ä½¿ç”¨åœºæ™¯</strong></h2><p>Kafkaæ‹¦æˆªå™¨éƒ½èƒ½ç”¨åœ¨å“ªäº›åœ°æ–¹å‘¢ï¼Ÿå…¶å®ï¼Œè·Ÿå¾ˆå¤šæ‹¦æˆªå™¨çš„ç”¨æ³•ç›¸åŒï¼Œ<strong>Kafkaæ‹¦æˆªå™¨å¯ä»¥åº”ç”¨äºåŒ…æ‹¬å®¢æˆ·ç«¯ç›‘æ§ã€ç«¯åˆ°ç«¯ç³»ç»Ÿæ€§èƒ½æ£€æµ‹ã€æ¶ˆæ¯å®¡è®¡ç­‰å¤šç§åŠŸèƒ½åœ¨å†…çš„åœºæ™¯</strong>ã€‚</p><p>æˆ‘ä»¥ç«¯åˆ°ç«¯ç³»ç»Ÿæ€§èƒ½æ£€æµ‹å’Œæ¶ˆæ¯å®¡è®¡ä¸ºä¾‹æ¥å±•å¼€ä»‹ç»ä¸‹ã€‚</p><p>ä»Šå¤©Kafkaé»˜è®¤æä¾›çš„ç›‘æ§æŒ‡æ ‡éƒ½æ˜¯é’ˆå¯¹å•ä¸ªå®¢æˆ·ç«¯æˆ–Brokerçš„ï¼Œä½ å¾ˆéš¾ä»å…·ä½“çš„æ¶ˆæ¯ç»´åº¦å»è¿½è¸ªé›†ç¾¤é—´æ¶ˆæ¯çš„æµè½¬è·¯å¾„ã€‚åŒæ—¶ï¼Œå¦‚ä½•ç›‘æ§ä¸€æ¡æ¶ˆæ¯ä»ç”Ÿäº§åˆ°æœ€åæ¶ˆè´¹çš„ç«¯åˆ°ç«¯å»¶æ—¶ä¹Ÿæ˜¯å¾ˆå¤šKafkaç”¨æˆ·è¿«åˆ‡éœ€è¦è§£å†³çš„é—®é¢˜ã€‚</p><p>ä»æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯ç¨‹åºä¸­å¢åŠ è¿™æ ·çš„ç»Ÿè®¡é€»è¾‘ï¼Œä½†æ˜¯å¯¹äºé‚£äº›å°†Kafkaä½œä¸ºä¼ä¸šçº§åŸºç¡€æ¶æ„çš„å…¬å¸æ¥è¯´ï¼Œåœ¨åº”ç”¨ä»£ç ä¸­ç¼–å†™ç»Ÿä¸€çš„ç›‘æ§é€»è¾‘å…¶å®æ˜¯å¾ˆéš¾çš„ï¼Œæ¯•ç«Ÿè¿™ä¸œè¥¿éå¸¸çµæ´»ï¼Œä¸å¤ªå¯èƒ½æå‰ç¡®å®šå¥½æ‰€æœ‰çš„è®¡ç®—é€»è¾‘ã€‚å¦å¤–ï¼Œå°†ç›‘æ§é€»è¾‘ä¸ä¸»ä¸šåŠ¡é€»è¾‘è€¦åˆä¹Ÿæ˜¯è½¯ä»¶å·¥ç¨‹ä¸­ä¸æå€¡çš„åšæ³•ã€‚</p><p>ç°åœ¨ï¼Œé€šè¿‡å®ç°æ‹¦æˆªå™¨çš„é€»è¾‘ä»¥åŠå¯æ’æ‹”çš„æœºåˆ¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿåœ°è§‚æµ‹ã€éªŒè¯ä»¥åŠç›‘æ§é›†ç¾¤é—´çš„å®¢æˆ·ç«¯æ€§èƒ½æŒ‡æ ‡ï¼Œç‰¹åˆ«æ˜¯èƒ½å¤Ÿä»å…·ä½“çš„æ¶ˆæ¯å±‚é¢ä¸Šå»æ”¶é›†è¿™äº›æ•°æ®ã€‚è¿™å°±æ˜¯Kafkaæ‹¦æˆªå™¨çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„ä½¿ç”¨åœºæ™¯ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹æ¶ˆæ¯å®¡è®¡ï¼ˆmessage auditï¼‰çš„åœºæ™¯ã€‚è®¾æƒ³ä½ çš„å…¬å¸æŠŠKafkaä½œä¸ºä¸€ä¸ªç§æœ‰äº‘æ¶ˆæ¯å¼•æ“å¹³å°å‘å…¨å…¬å¸æä¾›æœåŠ¡ï¼Œè¿™å¿…ç„¶è¦æ¶‰åŠå¤šç§Ÿæˆ·ä»¥åŠæ¶ˆæ¯å®¡è®¡çš„åŠŸèƒ½ã€‚</p><p>ä½œä¸ºç§æœ‰äº‘çš„PaaSæä¾›æ–¹ï¼Œä½ è‚¯å®šè¦èƒ½å¤Ÿéšæ—¶æŸ¥çœ‹æ¯æ¡æ¶ˆæ¯æ˜¯å“ªä¸ªä¸šåŠ¡æ–¹åœ¨ä»€ä¹ˆæ—¶é—´å‘å¸ƒçš„ï¼Œä¹‹ååˆè¢«å“ªäº›ä¸šåŠ¡æ–¹åœ¨ä»€ä¹ˆæ—¶åˆ»æ¶ˆè´¹ã€‚ä¸€ä¸ªå¯è¡Œçš„åšæ³•å°±æ˜¯ä½ ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨ç±»ï¼Œå®ç°ç›¸åº”çš„æ¶ˆæ¯å®¡è®¡é€»è¾‘ï¼Œç„¶åå¼ºè¡Œè§„å®šæ‰€æœ‰æ¥å…¥ä½ çš„KafkaæœåŠ¡çš„å®¢æˆ·ç«¯ç¨‹åºå¿…é¡»è®¾ç½®è¯¥æ‹¦æˆªå™¨ã€‚</p><h2><strong>æ¡ˆä¾‹åˆ†äº«</strong></h2><p>ä¸‹é¢æˆ‘ä»¥ä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹æ¥è¯´æ˜ä¸€ä¸‹æ‹¦æˆªå™¨çš„ä½¿ç”¨ã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç¼–å†™æ‹¦æˆªå™¨ç±»æ¥ç»Ÿè®¡æ¶ˆæ¯ç«¯åˆ°ç«¯å¤„ç†çš„å»¶æ—¶ï¼Œéå¸¸å®ç”¨ï¼Œæˆ‘å»ºè®®ä½ å¯ä»¥ç›´æ¥ç§»æ¤åˆ°ä½ è‡ªå·±çš„ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p><p>æˆ‘æ›¾ç»ç»™ä¸€ä¸ªå…¬å¸åšKafkaåŸ¹è®­ï¼Œåœ¨åŸ¹è®­è¿‡ç¨‹ä¸­ï¼Œé‚£ä¸ªå…¬å¸çš„äººæå‡ºäº†ä¸€ä¸ªè¯‰æ±‚ã€‚ä»–ä»¬çš„åœºæ™¯å¾ˆç®€å•ï¼ŒæŸä¸ªä¸šåŠ¡åªæœ‰ä¸€ä¸ªProducerå’Œä¸€ä¸ªConsumerï¼Œä»–ä»¬æƒ³çŸ¥é“è¯¥ä¸šåŠ¡æ¶ˆæ¯ä»è¢«ç”Ÿäº§å‡ºæ¥åˆ°æœ€åè¢«æ¶ˆè´¹çš„å¹³å‡æ€»æ—¶é•¿æ˜¯å¤šå°‘ï¼Œä½†æ˜¯ç›®å‰Kafkaå¹¶æ²¡æœ‰æä¾›è¿™ç§ç«¯åˆ°ç«¯çš„å»¶æ—¶ç»Ÿè®¡ã€‚</p><p>å­¦ä¹ äº†æ‹¦æˆªå™¨ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨çŸ¥é“å¯ä»¥ç”¨æ‹¦æˆªå™¨æ¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚æ—¢ç„¶æ˜¯è¦è®¡ç®—æ€»å»¶æ—¶ï¼Œé‚£ä¹ˆä¸€å®šè¦æœ‰ä¸ªå…¬å…±çš„åœ°æ–¹æ¥ä¿å­˜å®ƒï¼Œå¹¶ä¸”è¿™ä¸ªå…¬å…±çš„åœ°æ–¹è¿˜æ˜¯è¦è®©ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç¨‹åºéƒ½èƒ½è®¿é—®çš„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‡è®¾æ•°æ®è¢«ä¿å­˜åœ¨Redisä¸­ã€‚</p><p>Okayï¼Œè¿™ä¸ªéœ€æ±‚æ˜¾ç„¶è¦å®ç°ç”Ÿäº§è€…æ‹¦æˆªå™¨ï¼Œä¹Ÿè¦å®ç°æ¶ˆè´¹è€…æ‹¦æˆªå™¨ã€‚æˆ‘ä»¬å…ˆæ¥å®ç°å‰è€…ï¼š</p><pre><code>public class AvgLatencyProducerInterceptor implements ProducerInterceptor&lt;String, String&gt; {\n\n\n    private Jedis jedis; // çœç•¥Jedisåˆå§‹åŒ–\n\n\n    @Override\n    public ProducerRecord&lt;String, String&gt; onSend(ProducerRecord&lt;String, String&gt; record) {\n        jedis.incr(&quot;totalSentMessage&quot;);\n        return record;\n    }\n\n\n    @Override\n    public void onAcknowledgement(RecordMetadata metadata, Exception exception) {\n    }\n\n\n    @Override\n    public void close() {\n    }\n\n\n    @Override\n    public void configure(Map&lt;java.lang.String, ?&gt; configs) {\n    }\n</code></pre><p>ä¸Šé¢çš„ä»£ç æ¯”è¾ƒå…³é”®çš„æ˜¯åœ¨å‘é€æ¶ˆæ¯å‰æ›´æ–°æ€»çš„å·²å‘é€æ¶ˆæ¯æ•°ã€‚ä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œæˆ‘æ²¡æœ‰è€ƒè™‘å‘é€å¤±è´¥çš„æƒ…å†µï¼Œå› ä¸ºå‘é€å¤±è´¥å¯èƒ½å¯¼è‡´æ€»å‘é€æ•°ä¸å‡†ç¡®ã€‚ä¸è¿‡å¥½åœ¨å¤„ç†æ€è·¯æ˜¯ç›¸åŒçš„ï¼Œä½ å¯ä»¥æœ‰é’ˆå¯¹æ€§åœ°è°ƒæ•´ä¸‹ä»£ç é€»è¾‘ã€‚</p><p>ä¸‹é¢æ˜¯æ¶ˆè´¹è€…ç«¯çš„æ‹¦æˆªå™¨å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>public class AvgLatencyConsumerInterceptor implements ConsumerInterceptor&lt;String, String&gt; {\n\n\n    private Jedis jedis; //çœç•¥Jedisåˆå§‹åŒ–\n\n\n    @Override\n    public ConsumerRecords&lt;String, String&gt; onConsume(ConsumerRecords&lt;String, String&gt; records) {\n        long lantency = 0L;\n        for (ConsumerRecord&lt;String, String&gt; record : records) {\n            lantency += (System.currentTimeMillis() - record.timestamp());\n        }\n        jedis.incrBy(&quot;totalLatency&quot;, lantency);\n        long totalLatency = Long.parseLong(jedis.get(&quot;totalLatency&quot;));\n        long totalSentMsgs = Long.parseLong(jedis.get(&quot;totalSentMessage&quot;));\n        jedis.set(&quot;avgLatency&quot;, String.valueOf(totalLatency / totalSentMsgs));\n        return records;\n    }\n\n\n    @Override\n    public void onCommit(Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets) {\n    }\n\n\n    @Override\n    public void close() {\n    }\n\n\n    @Override\n    public void configure(Map&lt;String, ?&gt; configs) {\n</code></pre><p>åœ¨ä¸Šé¢çš„æ¶ˆè´¹è€…æ‹¦æˆªå™¨ä¸­ï¼Œæˆ‘ä»¬åœ¨çœŸæ­£æ¶ˆè´¹ä¸€æ‰¹æ¶ˆæ¯å‰é¦–å…ˆæ›´æ–°äº†å®ƒä»¬çš„æ€»å»¶æ—¶ï¼Œæ–¹æ³•å°±æ˜¯ç”¨å½“å‰çš„æ—¶é’Ÿæ—¶é—´å‡å»å°è£…åœ¨æ¶ˆæ¯ä¸­çš„åˆ›å»ºæ—¶é—´ï¼Œç„¶åç´¯è®¡å¾—åˆ°è¿™æ‰¹æ¶ˆæ¯æ€»çš„ç«¯åˆ°ç«¯å¤„ç†å»¶æ—¶å¹¶æ›´æ–°åˆ°Redisä¸­ã€‚ä¹‹åçš„é€»è¾‘å°±å¾ˆç®€å•äº†ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»Redisä¸­è¯»å–æ›´æ–°è¿‡çš„æ€»å»¶æ—¶å’Œæ€»æ¶ˆæ¯æ•°ï¼Œä¸¤è€…ç›¸é™¤å³å¾—åˆ°ç«¯åˆ°ç«¯æ¶ˆæ¯çš„å¹³å‡å¤„ç†å»¶æ—¶ã€‚</p><p>åˆ›å»ºå¥½ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ‹¦æˆªå™¨åï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸Šé¢æŒ‡å®šçš„æ–¹æ³•åˆ†åˆ«å°†å®ƒä»¬é…ç½®åˆ°å„è‡ªçš„Producerå’ŒConsumerç¨‹åºä¸­ï¼Œè¿™æ ·å°±èƒ½è®¡ç®—æ¶ˆæ¯ä»Producerç«¯åˆ°Consumerç«¯å¹³å‡çš„å¤„ç†å»¶æ—¶äº†ã€‚è¿™ç§ç«¯åˆ°ç«¯çš„æŒ‡æ ‡ç›‘æ§èƒ½å¤Ÿä»å…¨å±€è§’åº¦ä¿¯å¯Ÿå’Œå®¡è§†ä¸šåŠ¡è¿è¡Œæƒ…å†µï¼ŒåŠæ—¶æŸ¥çœ‹ä¸šåŠ¡æ˜¯å¦æ»¡è¶³ç«¯åˆ°ç«¯çš„SLAç›®æ ‡ã€‚</p><h2><strong>å°ç»“</strong></h2><p>ä»Šå¤©æˆ‘ä»¬èŠ±äº†ä¸€äº›æ—¶é—´è®¨è®ºKafkaæä¾›çš„å†·é—¨åŠŸèƒ½ï¼šæ‹¦æˆªå™¨ã€‚å¦‚ä¹‹å‰æ‰€è¯´ï¼Œæ‹¦æˆªå™¨çš„å‡ºåœºç‡æä½ï¼Œä»¥è‡³äºæˆ‘ä»æœªçœ‹åˆ°è¿‡å›½å†…å¤§å‚å®é™…åº”ç”¨Kafkaæ‹¦æˆªå™¨çš„æŠ¥é“ã€‚ä½†å†·é—¨ä¸ä»£è¡¨æ²¡ç”¨ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ‹¦æˆªå™¨æ»¡è¶³å®é™…çš„éœ€æ±‚ï¼Œæ¯”å¦‚ç«¯åˆ°ç«¯ç³»ç»Ÿæ€§èƒ½æ£€æµ‹ã€æ¶ˆæ¯å®¡è®¡ç­‰ã€‚</p><p>ä»è¿™ä¸€æœŸå¼€å§‹ï¼Œæˆ‘ä»¬å°†é€æ¸æ¥è§¦åˆ°æ›´å¤šçš„å®é™…ä»£ç ã€‚çœ‹å®Œäº†ä»Šå¤©çš„åˆ†äº«ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½å¤Ÿäº²è‡ªåŠ¨æ‰‹ç¼–å†™ä¸€äº›ä»£ç ï¼Œå»å®ç°ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œä½“ä¼šä¸€ä¸‹Kafkaæ‹¦æˆªå™¨çš„åŠŸèƒ½ã€‚è¦çŸ¥é“ï¼Œâ€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œâ€ã€‚ä¹Ÿè®¸ä½ åœ¨æ•²ä»£ç çš„åŒæ—¶ï¼Œå°±ä¼šæƒ³åˆ°ä¸€ä¸ªä½¿ç”¨æ‹¦æˆªå™¨çš„ç»å¦™ç‚¹å­ï¼Œè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…å§ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/f2/0d/f2cbe18428396aab14749be10dc5550d.jpg?wh=2069*2560\" alt=\"\"></p><h2><strong>å¼€æ”¾è®¨è®º</strong></h2><p>æ€è€ƒè¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šProduceræ‹¦æˆªå™¨onSendæ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š</p><pre><code>public ProducerRecord&lt;K, V&gt; onSend(ProducerRecord&lt;K, V&gt; record)\n</code></pre><p>å¦‚æœæˆ‘å®ç°çš„é€»è¾‘ä»…ä»…æ˜¯return nullï¼Œä½ è§‰å¾—Kafkaä¼šä¸¢å¼ƒè¯¥æ¶ˆæ¯ï¼Œè¿˜æ˜¯åŸå°ä¸åŠ¨åœ°å‘é€æ¶ˆæ¯ï¼Ÿè¯·åŠ¨æ‰‹è¯•éªŒä¸€ä¸‹ï¼Œçœ‹çœ‹ç»“æœæ˜¯å¦ç¬¦åˆä½ çš„é¢„æœŸã€‚</p><p>æ¬¢è¿å†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>","comments":[{"had_liked":false,"id":110311,"user_name":"é£ä¸­èŠ±","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1562228191,"is_pvip":false,"replies":[{"id":"40152","content":"æ¶ˆæ¯å †ç§¯å¯èƒ½åŸå› å¦‚ä¸‹ï¼š1. ç”Ÿäº§é€Ÿåº¦å¤§äºæ¶ˆè´¹é€Ÿåº¦ï¼Œè¿™æ ·å¯ä»¥é€‚å½“å¢åŠ åˆ†åŒºï¼Œå¢åŠ consumeræ•°é‡ï¼Œæå‡æ¶ˆè´¹TPSï¼›2. consumeræ¶ˆè´¹æ€§èƒ½ä½ï¼ŒæŸ¥ä¸€ä¸‹æ˜¯å¦æœ‰å¾ˆé‡çš„æ¶ˆè´¹é€»è¾‘ï¼ˆæ¯”å¦‚æ‹¿åˆ°æ¶ˆæ¯åå†™HDFSæˆ–HBASEè¿™ç§é€»è¾‘å°±æŒºé‡çš„ï¼‰ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥ä¼˜åŒ–consumer TPSï¼›3. ç¡®ä¿consumerç«¯æ²¡æœ‰å› ä¸ºå¼‚å¸¸è€Œå¯¼è‡´æ¶ˆè´¹hangä½; 4. å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ¶ˆè´¹è€…ç»„ï¼Œç¡®ä¿æ²¡æœ‰é¢‘ç¹åœ°å‘ç”Ÿrebalance<br><br>ä¸»è¦æ’æŸ¥ä¸‹å¯èƒ½æ˜¯å“ªäº›åŸå›  ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562287256,"ip_address":"","comment_id":110311,"utype":1}],"discussion_count":17,"race_medal":0,"score":"319389808095","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆæ‚¨å¥½ï¼ æˆ‘å…¬å¸ç°åœ¨å°±æˆ‘ä¸€ä¸ªäººæ‡‚ç‚¹kafkaï¼Œä½†æ˜¯å…¬å¸çº¿ä¸‹å´æœ‰ä½¿ç”¨kafkaï¼Œç°åœ¨çŸ¥é“æˆ‘å­¦ä¹ è¿™ä¸ªå°±äº¤ç»™æˆ‘äº†ï¼Œæˆ‘ç°åœ¨é‡åˆ°ä¸€ä¸ªçº¿ä¸Šé—®é¢˜ï¼šæ¶ˆæ¯ç»å¸¸å †ç§¯èµ·æ¥ï¼Œä¸èƒ½æ¶ˆè´¹äº†ï¼Œé‡å¯æœåŠ¡å°±èƒ½ç»§ç»­æ¶ˆè´¹äº†ã€‚æˆ‘ç›®å‰å¾—èƒ½åŠ›è¿˜æä¸å®šï¼Œæœ›è€å¸ˆèƒ½ç»™æŒ‡ç‚¹ä¸€äºŒ ã€‚è°¢è°¢ã€‚è°¢è°¢","like_count":75,"discussions":[{"author":{"id":1448893,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKj4w4lW7ibGEVxPv8wS1CrXKDeBz3RAaAdISxQSD23uUpV3wicsIMepaYZE8GzRcWmSpjet5NDN4MA/132","nickname":"Zm","note":"","ucode":"831FF80F07E965","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378278,"discussion_content":"å¦‚æœä¸èƒ½æ¶ˆè´¹äº†ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ¶ˆè´¹ç«¯å¼‚å¸¸çº¿ç¨‹æŒ‚äº†ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1623144268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456810,"discussion_content":"æ¶ˆæ¯å †ç§¯å¯èƒ½åŸå› å¦‚ä¸‹ï¼š1. ç”Ÿäº§é€Ÿåº¦å¤§äºæ¶ˆè´¹é€Ÿåº¦ï¼Œè¿™æ ·å¯ä»¥é€‚å½“å¢åŠ åˆ†åŒºï¼Œå¢åŠ consumeræ•°é‡ï¼Œæå‡æ¶ˆè´¹TPSï¼›2. consumeræ¶ˆè´¹æ€§èƒ½ä½ï¼ŒæŸ¥ä¸€ä¸‹æ˜¯å¦æœ‰å¾ˆé‡çš„æ¶ˆè´¹é€»è¾‘ï¼ˆæ¯”å¦‚æ‹¿åˆ°æ¶ˆæ¯åå†™HDFSæˆ–HBASEè¿™ç§é€»è¾‘å°±æŒºé‡çš„ï¼‰ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥ä¼˜åŒ–consumer TPSï¼›3. ç¡®ä¿consumerç«¯æ²¡æœ‰å› ä¸ºå¼‚å¸¸è€Œå¯¼è‡´æ¶ˆè´¹hangä½; 4. å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ¶ˆè´¹è€…ç»„ï¼Œç¡®ä¿æ²¡æœ‰é¢‘ç¹åœ°å‘ç”Ÿrebalance\n\nä¸»è¦æ’æŸ¥ä¸‹å¯èƒ½æ˜¯å“ªäº›åŸå›  ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1562287256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":5,"child_discussions":[{"author":{"id":1450353,"avatar":"https://static001.geekbang.org/account/avatar/00/16/21/71/f881973f.jpg","nickname":"ä¹”åº·","note":"","ucode":"332B93AB67D6CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":563699,"discussion_content":"å¦‚ä½•ç¡®å®šç”Ÿäº§é€Ÿåº¦å¤§äºæ¶ˆè´¹é€Ÿåº¦å‘¢ï¼Ÿæ˜¯æœ‰æŸ¥è¯¢å‘½ä»¤ï¼Œè¿˜æ˜¯éœ€è¦ä»£ç å®ç°ç»Ÿè®¡åŠŸèƒ½ï¼Ÿçº¿ä¸Šæ€»ä¼šå‡ºç°ä¸æ¶ˆè´¹çš„ç°è±¡ï¼Œè¿™è¾¹æ˜¯é¾™èŠ¯æœºå™¨ï¼Œæ€§èƒ½å¾ˆå·®ï¼Œæ€»æœ‰æ­»æœºå’Œæ–­ç½‘æƒ…å†µï¼Œå»ºç«‹äº†äº”å°çš„kafka é›†ç¾¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650065890,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":456810,"ip_address":""},"score":563699,"extra":""},{"author":{"id":1214808,"avatar":"https://static001.geekbang.org/account/avatar/00/12/89/58/ba318314.jpg","nickname":"db","note":"","ucode":"2E21B60B4C0FC8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1450353,"avatar":"https://static001.geekbang.org/account/avatar/00/16/21/71/f881973f.jpg","nickname":"ä¹”åº·","note":"","ucode":"332B93AB67D6CA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572284,"discussion_content":"è£…ä¸€ä¸‹kagka managerç®¡ç†è½¯ä»¶ï¼ŒæœŸé—´éœ€è¦ç¼–è¯‘ä¸€ä¸‹å†å®‰è£…ï¼Œç„¶åå¯ä»¥é€šè¿‡kafkaç®¡ç†é¡µé¢æŸ¥çœ‹æ¶ˆæ¯å †ç§¯æƒ…å†µï¼Œå¦‚æœæ¶ˆæ¯å¾ˆå¿«å°±æ¶ˆè´¹å®Œäº†ï¼Œæ²¡æœ‰å †ç§¯é‚£å°±æ²¡é—®é¢˜ï¼Œè¦æ˜¯æ˜¾ç¤ºæ¶ˆæ¯æ•°é‡ä¸€ç›´åœ¨å¢é•¿ï¼Œé‚£ä¹ˆè¯´æ˜æ¶ˆè´¹è€…é‚£è¾¹æ¶ˆè´¹å­˜åœ¨é—®é¢˜(å¯èƒ½æ˜¯æ¶ˆè´¹è€…æ‰€åœ¨æœºå™¨æ€§èƒ½å¤ªä½ï¼Œæˆ–è€…æ¶ˆè´¹è¿›ç¨‹æ‰äº†ä¹‹ç±»çš„å§ï¼Œæ¯”å¦‚logstashã€flumeç­‰ç­‰)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652691645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":563699,"ip_address":""},"score":572284,"extra":""},{"author":{"id":1214808,"avatar":"https://static001.geekbang.org/account/avatar/00/12/89/58/ba318314.jpg","nickname":"db","note":"","ucode":"2E21B60B4C0FC8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1450353,"avatar":"https://static001.geekbang.org/account/avatar/00/16/21/71/f881973f.jpg","nickname":"ä¹”åº·","note":"","ucode":"332B93AB67D6CA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572286,"discussion_content":"1ã€kafka managerç¼–è¯‘å¥½çš„è½¯ä»¶é“¾æ¥ï¼šé“¾æ¥ï¼šhttps://pan.baidu.com/s/1hGtmZH7eODeOttt6LEypnw æå–ç ï¼še7w9\n2ã€kafka managerç®¡ç†è½¯ä»¶å®‰è£…æ–‡ä»¶ä»‹ç»ï¼šhttps://blog.csdn.net/Kammingo/article/details/106813447","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652692004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":563699,"ip_address":""},"score":572286,"extra":""}]},{"author":{"id":2270904,"avatar":"","nickname":"102447","note":"","ucode":"82B85EFB6AB052","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338080,"discussion_content":"æ‰€ä»¥é«˜æ‰‹ã€‚ã€‚ã€‚åˆ—å‡ºçš„é—®é¢˜å¾ˆèƒ½çœ‹å‡ºæ°´å¹³","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1609166373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1516600,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/wBjvGCCZmO0Bic0DrnG466y6hwPkibGevAV6E6FPfQEricvw5toL7a2HSgjhI83cCiadrUibIyVibkgbbMOHVxo7HA8Q/132","nickname":"è·ç¦»30ç±³","note":"","ucode":"5566D9AB9E47DE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590123,"discussion_content":"è¿˜æœ‰ä¸€ä¸ªï¼Œå¦‚æœæ¯æ¬¡pollçš„æ—¶é—´ï¼Œå’Œä½ æ¶ˆè´¹çš„èƒ½åŠ›ä¸è¶³ï¼Œä¼šè¢«kafkaæŠŠä½ ä¸»åŠ¨Tæ‰çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸èƒ½æ¶ˆè´¹çš„åŸå› ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665543234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3071431,"avatar":"https://static001.geekbang.org/account/avatar/00/2e/dd/c7/9523b3dc.jpg","nickname":"æœˆå½±","note":"","ucode":"39D5315F2365A8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587058,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662722408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2071279,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/9a/ef/6162b0e0.jpg","nickname":"Rangarok","note":"","ucode":"D13AF6E247EFCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575434,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654830493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2906256,"avatar":"","nickname":"Geek_7cd8d7","note":"","ucode":"18F8A69B1C710E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549505,"discussion_content":"å¦‚æœä½ ç”¨çš„kafkastream é‚£ç½‘ç»œæŠ–åŠ¨éƒ½æœ‰å¯èƒ½å¯¼è‡´æ¶ˆè´¹è€…ä¸æ¶ˆè´¹ è¿™ç§æƒ…å†µä¸‹å¯ä»¥å¢å¤§å¿ƒè·³å‘¨æœŸå’Œsessionæ—¶é•¿å°½å¯èƒ½é¿å…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644037762,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543972,"discussion_content":"ä¸€ç§æƒ…å†µå¯èƒ½æ˜¯ä½ æœ¬èº«æ¶ˆæ¯æ ¼å¼æœ‰é—®é¢˜ï¼Œå¼‚å¸¸å¯¼è‡´æ²¡æ³•æ‰‹åŠ¨æäº¤ï¼Œé‡å¯åè¿™ä¸ªæ¶ˆæ¯åˆè¿‡æœŸäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641369441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179249,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/71/28b73687.jpg","nickname":"Zz","note":"","ucode":"C3A3C11071E86B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530775,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637145296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1061786,"avatar":"https://static001.geekbang.org/account/avatar/00/10/33/9a/a323b2f1.jpg","nickname":"æ‚ æ‚ å°ç«¹å­","note":"","ucode":"A5E6731D28EBF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":197125,"discussion_content":"å¤§æ¦‚ç‡æ˜¯æ¶ˆè´¹çŸ­å¼‚å¸¸äº†ï¼Œç„¶åæ¶ˆè´¹çº¿ç¨‹æŒ‚äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583408830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49986,"discussion_content":"ä½¿ç”¨çš„æ˜¯æ¶ˆè´¹è€…ç»„ï¼Œä»Šå¤©å‘ç”Ÿrebalanceäº†,ç„¶åå°±æŒ‚äº†.è¿˜çœŸä¸çŸ¥é“ä¸ºä»€ä¹ˆ.æˆ‘å†ç™¾åº¦ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573654981,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49985,"discussion_content":"é©¬å…‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573654923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108853,"user_name":"ç‹æ§é“¤","can_delete":false,"product_type":"c1","uid":1073782,"ip_address":"","ucode":"D01A18E5025391","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/76/0564a5ee.jpg","comment_is_top":false,"comment_ctime":1561901811,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78871313139","product_id":100029201,"comment_content":"onSendä¼ nullä¼šåœ¨KafkaProducerç±»ä¸­è°ƒç”¨doSendæ—¶å¼•å‘NPEï¼Œå¹¶é€šè¿‡ ProducerInterceptors.onSendError æ–¹æ³•ä¼ å¯¼è‡³onAcknowledgementï¼Œä»¥åŠthrowåˆ°ç”¨æˆ·ç¼–å†™çš„Producerä¸­ã€‚","like_count":19},{"had_liked":false,"id":108729,"user_name":"è½éœä¸å­¤é¹œ","can_delete":false,"product_type":"c1","uid":1111004,"ip_address":"","ucode":"1F06EB86DD2E6B","user_header":"https://static001.geekbang.org/account/avatar/00/10/f3/dc/e7e5c159.jpg","comment_is_top":false,"comment_ctime":1561866228,"is_pvip":false,"replies":[{"id":"39432","content":"æˆ‘å‡è®¾ä½ æŒ‡çš„åå­—æ˜¯group.idã€‚é‚£ä¹ˆæŠŠAæ”¹æˆBå¯¹äºKafkaè€Œè¨€å°±æ˜¯æ–°çš„consumerã€‚æ–°consumerä»å¤´è¿˜æ˜¯ä»æœ€æ–°å¼€å§‹æ¶ˆè´¹å–å†³äºauto.offset.resetçš„è®¾ç½®","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561946372,"ip_address":"","comment_id":108729,"utype":1}],"discussion_count":3,"race_medal":0,"score":"78871277556","product_id":100029201,"comment_content":"è¿™ä¸ªé—®é¢˜å’Œè¿™æœŸçš„å†…å®¹æ²¡å…³ç³»ğŸ˜“ã€‚<br><br>å¦‚æœä¸€ä¸ªä¸»é¢˜ï¼Œç”±ä¸€ä¸ªåº”ç”¨çš„åä¸ºAçš„æ¶ˆè´¹ç»„æ¶ˆè´¹ï¼Œç„¶åæŠŠæ¶ˆè´¹ç»„åæ”¹ä¸ºBï¼Œé‡æ–°å‘å¸ƒåº”ç”¨ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ä¸æ˜¯ä»ä¸»é¢˜çš„åˆ†åŒºå¤´å¼€å§‹æ¶ˆè´¹ï¼Ÿå¦‚ä½•ä¿è¯ä»ä¸Šæ¬¡Aæ¶ˆè´¹ç»„çš„æœ€æ–°åç§»é‡å¤„å¼€å§‹æ¶ˆè´¹ï¼Ÿ","like_count":19,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456093,"discussion_content":"æˆ‘å‡è®¾ä½ æŒ‡çš„åå­—æ˜¯group.idã€‚é‚£ä¹ˆæŠŠAæ”¹æˆBå¯¹äºKafkaè€Œè¨€å°±æ˜¯æ–°çš„consumerã€‚æ–°consumerä»å¤´è¿˜æ˜¯ä»æœ€æ–°å¼€å§‹æ¶ˆè´¹å–å†³äºauto.offset.resetçš„è®¾ç½®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946372,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1058231,"avatar":"https://static001.geekbang.org/account/avatar/00/10/25/b7/c90b315b.jpg","nickname":"ç¾Šå…«äº•","note":"","ucode":"72731AC6ECCFA1","race_medal":3,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299486,"discussion_content":"group.id æ¢äº†çš„è¯ï¼Œå¯ä»¥å…ˆæŠŠè€çš„ offset å–å‡ºæ¥ï¼Œå†æŒ‰ offset å¼€å§‹æ¶ˆè´¹ï¼Œå°±èƒ½ä¿æŒä»ä¹‹å‰çš„æœ€æ–°åç§»é‡å¤„å¼€å§‹æ¶ˆè´¹äº†ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1597717006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183423,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLAqN8yGhXKdbmiaewYGaTtKGYgy8d691LOCRJdDbfW8hDFM5HagwvTJup9p5mNjoPyl0cvapHEyWA/132","nickname":"Kyrie","note":"","ucode":"C548CB78393159","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138586,"discussion_content":"å¯ä»¥ä»æŒ‡å®šoffsetå¼€å§‹æ¶ˆè´¹çš„å§ï¼Œä¸ç„¶å¦‚æœæ–°åŠ è¿›æ¥ä¸€ä¸ªgroup ä»å¤´æ¶ˆè´¹ æœ€åçš„æƒ…å†µå¯èƒ½è¦æ¶ˆè´¹7å¤©çš„æ¶ˆæ¯ï¼Œåˆ«çš„consumerä¼°è®¡è¦ç­‰æ­»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579254546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":205042,"user_name":"æå…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1237614,"ip_address":"","ucode":"D9039715F7D290","user_header":"https://static001.geekbang.org/account/avatar/00/12/e2/6e/0a300829.jpg","comment_is_top":false,"comment_ctime":1586514220,"is_pvip":false,"replies":[{"id":"76728","content":"å¦‚æœåªæ˜¯è¿™æ ·ä½¿ç”¨ï¼Œæˆ‘å€’æ˜¯ä¸å»ºè®®ç”¨MySQLæ¥åšå»é‡ï¼Œä½ è¿˜ä¸å¦‚åœ¨åº”ç”¨å±‚é¢è‡ªè¡Œå»é‡ã€‚ä¸€å®šè¦ç”¨çš„è¯ï¼Œä¸å¦¨è¯•è¯•æŠŠMySQLè¡¨ä¸ºtopic keyåšåˆ†åŒºè¡¨å§","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1586610180,"ip_address":"","comment_id":205042,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44536187180","product_id":100029201,"comment_content":"èƒ¡å“¥ï¼š<br>consumeræ¶ˆè´¹ï¼šæ¯”å¦‚å¼‚æ­¥å‘ç§¯åˆ†ï¼Œå‘ç§¯åˆ†çš„æ¶ˆæ¯è¿›å…¥kafkaï¼ŒåŠ ç§¯åˆ†æœåŠ¡ç›‘å¬kafkaçš„topicï¼Œä¸ºäº†é¿å…é‡å¤æ¶ˆè´¹ï¼ŒåŠ ç§¯åˆ†æœåŠ¡è·å–åˆ°æ¶ˆæ¯åå…ˆå†™å…¥mysqlï¼Œå¹¶åˆ©ç”¨mysqlçš„å”¯ä¸€ç´¢å¼•çš„èƒ½åŠ›æ¥é¿å…é‡å¤æ¶ˆè´¹ï¼Œç„¶ååŠ ç§¯åˆ†æœåŠ¡å¼‚æ­¥å»æ‰§è¡Œmysqlä¸­çš„ä¿¡æ¯å»å®ç°åŠ ç§¯åˆ†ã€‚è¿™ç§å®ç°æ–¹æ¡ˆä¼šå¯¼è‡´æ¶ˆè´¹æ€§èƒ½ä½ä¸‹ï¼Œä½†æ˜¯å†™å…¥mysqlä¸€æ˜¯é¿å…é‡å¤æ¶ˆè´¹ï¼ŒäºŒæ˜¯åšä¸€æ¡æˆåŠŸçš„è®°å½•(ä¾¿äºåæœŸæŸ¥è¯¢)ã€‚è¿™ç§å¦‚ä½•ä¼˜åŒ–å‘¢","like_count":11,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491364,"discussion_content":"å¦‚æœåªæ˜¯è¿™æ ·ä½¿ç”¨ï¼Œæˆ‘å€’æ˜¯ä¸å»ºè®®ç”¨MySQLæ¥åšå»é‡ï¼Œä½ è¿˜ä¸å¦‚åœ¨åº”ç”¨å±‚é¢è‡ªè¡Œå»é‡ã€‚ä¸€å®šè¦ç”¨çš„è¯ï¼Œä¸å¦¨è¯•è¯•æŠŠMySQLè¡¨ä¸ºtopic keyåšåˆ†åŒºè¡¨å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586610180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109510,"user_name":"å¼ åº†","can_delete":false,"product_type":"c1","uid":1050284,"ip_address":"","ucode":"17AE1E23B83304","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/ac/604de2e8.jpg","comment_is_top":false,"comment_ctime":1562047692,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"44511720652","product_id":100029201,"comment_content":"return null ; æŠ¥é”™äº†ï¼ŒNullPointExceptioné”™è¯¯ï¼ŒKafkaProducer doSendæ–¹æ³•é‡Œé¢è·å–æ¶ˆæ¯ä¸»é¢˜å’Œåˆ†åŒºã€‚","like_count":10,"discussions":[{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49993,"discussion_content":"é©¬å…‹,æœªå®ŒæˆéªŒè¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573655417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108609,"user_name":"Lei@æ—¶é€Ÿäº‘","can_delete":false,"product_type":"c1","uid":1054183,"ip_address":"","ucode":"F9BD7DBD99864C","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/e7/da14c0a9.jpg","comment_is_top":false,"comment_ctime":1561814886,"is_pvip":false,"replies":[{"id":"39439","content":"ç£Šæ€»åˆ«é—¹ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561946600,"ip_address":"","comment_id":108609,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35921553254","product_id":100029201,"comment_content":"ğŸ‘ èƒ¡æ€»å‡ºä¸“æ äº†","like_count":8,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456057,"discussion_content":"ç£Šæ€»åˆ«é—¹ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109013,"user_name":"æ‰“ç çš„åœŸè±†","can_delete":false,"product_type":"c1","uid":1395211,"ip_address":"","ucode":"33B8ED2BFE0752","user_header":"https://static001.geekbang.org/account/avatar/00/15/4a/0b/775b0a98.jpg","comment_is_top":false,"comment_ctime":1561948537,"is_pvip":false,"replies":[{"id":"39461","content":"å®ƒè¿™å¥è¯çš„æ„æ€æ˜¯ä¸éœ€è¦ç”¨æˆ·æ‰‹åŠ¨è°ƒç”¨flushæ¥åˆ·ç›˜ï¼Œç”±osè‡ªå·±æ¥åšï¼š)","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561951997,"ip_address":"","comment_id":109013,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31626719609","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ æœ€è¿‘åœ¨çœ‹kafkaå®˜æ–¹æ–‡æ¡£æ—¶æœ‰ä¸€å¤„æ²¡çœ‹æ‡‚è¿˜æœ›è€å¸ˆæŒ‡æ•™ <br>All data is immediately written to a persistent log on the filesystem without necessarily flushing to disk. In effect this just means that it is transferred into the kernel&#39;s pagecache<br>è¿™ä¸Šé¢è¯´çš„æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æŒä¹…æ—¥å¿—ä¸ºä»€ä¹ˆä¼šæ˜¯pagecache  pagecacheä¸æ˜¯å†…å­˜çš„ä¸€éƒ¨åˆ†å—","like_count":7,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456210,"discussion_content":"å®ƒè¿™å¥è¯çš„æ„æ€æ˜¯ä¸éœ€è¦ç”¨æˆ·æ‰‹åŠ¨è°ƒç”¨flushæ¥åˆ·ç›˜ï¼Œç”±osè‡ªå·±æ¥åšï¼š)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561951997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397491,"discussion_content":"å†™å…¥æ•°æ®ä¸€å¼€å§‹éƒ½ä¼šåœ¨cacheï¼ˆè¿™é‡Œåªè®¨è®ºæ–‡ä»¶ç³»ç»Ÿ è£¸ioä¸è€ƒè™‘ï¼‰ä¹‹åæ‰“æ»¡æˆ–æ˜¯é‡åˆ°close flushå°±æäº¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632628232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171204,"user_name":"ITå°åƒ§","can_delete":false,"product_type":"c1","uid":1036906,"ip_address":"","ucode":"4DC9B291AAD748","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d2/6a/a9039139.jpg","comment_is_top":false,"comment_ctime":1578880692,"is_pvip":true,"replies":[{"id":"66482","content":"æ˜¯çš„ï¼Œä½ æ˜¯å¯¹çš„~ å…¶å®æ”¾åœ¨å“ªä¸ªæ–¹æ³•é‡Œé¢å–å†³äºä½ çš„è®¡æ—¶é€»è¾‘ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1578968339,"ip_address":"","comment_id":171204,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27348684468","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼è¿™ä¸ªæ¶ˆè´¹è€…æ®µonConsumeæ˜¯åœ¨æ¶ˆè´¹æ•°æ®ä¹‹å‰æ‰§è¡Œçš„æ–¹æ³•ï¼Œå¹¶ä¸èƒ½çœŸæ­£ç»Ÿè®¡å®é™…å¤„ç†è¯¥æ¶ˆè´¹è€—è´¹æ—¶é—´çš„å§ã€‚æˆ‘è§‰å¾—ç†åº”æ”¾åœ¨onCommité‡Œé¢ã€‚","like_count":6,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481261,"discussion_content":"æ˜¯çš„ï¼Œä½ æ˜¯å¯¹çš„~ å…¶å®æ”¾åœ¨å“ªä¸ªæ–¹æ³•é‡Œé¢å–å†³äºä½ çš„è®¡æ—¶é€»è¾‘ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578968339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":170240,"user_name":"å°é©¬","can_delete":false,"product_type":"c1","uid":1490686,"ip_address":"","ucode":"92B7ECD23BDCB5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoXW5rycAcrNTwgOvib8poPXO0zvIekIPzBZJfsnciaLPIw9Q1t3rsXeH6DR24QndpYQibvibhR1tKHPw/132","comment_is_top":false,"comment_ctime":1578555538,"is_pvip":false,"replies":[{"id":"66076","content":"1. ç¡®å®æœ‰è¿™ä¸ªé—®é¢˜ã€‚ç”¨æˆ·è‡ªå·±æ¥è§„é¿ä¹‹<br>2. åŒæ„~<br>3. æˆ‘ä»¬è¿˜æ˜¯èƒ½ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±çš„å§ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1578619194,"ip_address":"","comment_id":170240,"utype":1}],"discussion_count":4,"race_medal":0,"score":"27348359314","product_id":100029201,"comment_content":"è€å¸ˆæœ‰ä¸¤ä¸ªç–‘é—®è¯·æ•™ä¸‹ï¼š<br>1ã€æ—¶é—´çš„ä¸€è‡´æ€§é—®é¢˜ã€‚System.currentTimeMillis() - record.timestamp()å‘é€å’Œæ¥æ”¶çš„æ—¶é—´å®é™…ä¸Šå¯èƒ½æ¥è‡ªä¸¤å°æœºå™¨ï¼Œæœ‰å¯èƒ½æ—¶é—´ä¸ä¸€è‡´ï¼Œä¼šå¯¼è‡´ç»Ÿè®¡ç»“æœåå·®å¾ˆå¤§;<br>2ã€æ¶ˆè´¹ç«¯ä»£ç è®¡ç®—æ—¶é—´å·®æ˜¯åœ¨å¾ªç¯é‡Œé¢è¿›è¡Œçš„ï¼ŒæŠŠSystem.currentTimeMillis()æåˆ°å¾ªç¯å¤–é¢åº”è¯¥ä¼šå¥½ä¸€ç‚¹å§ï¼Œæ¯•ç«Ÿè¿™ä¸€æ‰¹æ¶ˆæ¯åº”è¯¥ç®—æ˜¯åŒæ—¶æ¥æ”¶çš„;<br>3ã€æ¶ˆæ¯æ€»æ•°æ˜¯åœ¨ç”Ÿäº§ç«¯ç»Ÿè®¡çš„ï¼Œæ—¶å»¶æ˜¯åœ¨æ¶ˆè´¹ç«¯ç»Ÿè®¡çš„ï¼Œä½†æ˜¯å¦‚æœåœ¨æ¶ˆæ¯ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°éƒ¨åˆ†æ¶ˆæ¯ä¸¢å¤±æ˜¯ä¸æ˜¯ä¼šå½±å“ç»Ÿè®¡çš„å‡†ç¡®æ€§ã€‚","like_count":6,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480900,"discussion_content":"1. ç¡®å®æœ‰è¿™ä¸ªé—®é¢˜ã€‚ç”¨æˆ·è‡ªå·±æ¥è§„é¿ä¹‹\n2. åŒæ„~\n3. æˆ‘ä»¬è¿˜æ˜¯èƒ½ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±çš„å§ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578619194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1193755,"avatar":"https://static001.geekbang.org/account/avatar/00/12/37/1b/82310e20.jpg","nickname":"æ‹¿ç¬”å°æ˜Ÿ","note":"","ucode":"D3D8F6A959710D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533561,"discussion_content":"å¥½é—®é¢˜ï¼Œèµ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637905870,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397496,"discussion_content":"å¯èƒ½è¿™ä¸ªpatchå¤ªå¤è€ èƒ¡è€å¸ˆå·²ç»ä¸è®°å¾—äº†å§ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632628536,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397495,"discussion_content":"è¿™é‡Œæœ‰ä¸ªæ³¨æ„ç‚¹System.currentTimeMillis()åœ¨kafkaä¸­å¦‚æœç”¨ä½œç»Ÿè®¡æ—¶é•¿ é‚£ä¹ˆè°ƒç”¨é¢‘æ¬¡ä¸€å®šéå¸¸é«˜ è€Œè¿™ä¸ªé—®é¢˜å½“å¹´kafkaå°±é‡åˆ°è¿‡ä¸¥é‡æ€§èƒ½ä¸‹é™ã€‚å‚è§KAFKA-2950","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632628514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123805,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1565764878,"is_pvip":false,"replies":[{"id":"45640","content":"1. å®é™…ä¸Šè¿™ä¸ªäº¤ç”±OSæ¥å†³å®šï¼ŒKafkaä¸ç®¡<br>2. ä»æ‹‰å–çš„æ–¹å¼ã€‚Kafkaå®šä¹‰äº†æ°´ä½çš„æ¦‚å¿µæ¥æ ‡è¯†æ‹‰å–çš„è¿›åº¦","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1565876464,"ip_address":"","comment_id":123805,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27335568654","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆå¥½ï¼Œè¯·æ•™ä¸¤ä¸ªå°é—®é¢˜<br>1ï¼šbrokeré€šè¿‡ç½‘ç»œæ‹¿åˆ°æ¶ˆæ¯åï¼Œè½ç›˜çš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿæ¥ä¸€æ¡æ¶ˆæ¯å°±è½ç›˜ä¸€æ¡ï¼Ÿè¿˜æ˜¯ç§¯æ”’å¤Ÿä¸€å®šçš„é‡å†è½ç›˜ï¼Ÿ<br>2ï¼šä»è¿½ä¸»ï¼Œæ–°çš„æ¶ˆæ¯æ˜¯ä¸»ä¸»åŠ¨æ¨ç»™å„ä¸ªä»çš„ï¼Ÿè¿˜æ˜¯ä»ä¸»åŠ¨æ‹‰å–çš„ï¼Ÿå¦‚æœæ˜¯ä¸»åŠ¨æ‹‰å–ï¼Œä»æ€ä¹ˆçŸ¥é“ä¸»æœ‰æ–°çš„æ¶ˆæ¯çš„ï¼Ÿå¦å¤–ï¼ŒåŒæ­¥çš„æ—¶å€™æ˜¯åªè¦æœ‰ä¸€æ¡æ–°æ¶ˆæ¯å°±åŒæ­¥å˜›ï¼Ÿ<br>å¦‚æœå…¶ä»–åŒå­¦æ¸…æ¥šï¼Œä¹Ÿè¯·å¸®å¿™è§£ç­”ä¸€ä¸‹ï¼Œå¤šè°¢ã€‚","like_count":6,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462822,"discussion_content":"1. å®é™…ä¸Šè¿™ä¸ªäº¤ç”±OSæ¥å†³å®šï¼ŒKafkaä¸ç®¡\n2. ä»æ‹‰å–çš„æ–¹å¼ã€‚Kafkaå®šä¹‰äº†æ°´ä½çš„æ¦‚å¿µæ¥æ ‡è¯†æ‹‰å–çš„è¿›åº¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565876464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1183423,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLAqN8yGhXKdbmiaewYGaTtKGYgy8d691LOCRJdDbfW8hDFM5HagwvTJup9p5mNjoPyl0cvapHEyWA/132","nickname":"Kyrie","note":"","ucode":"C548CB78393159","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":138588,"discussion_content":"1 å¦‚æœæ˜¯OSæ¥å†³å®šåˆ·ç›˜æ—¶æœºçš„è¯ï¼Œ brokerå®•æœºå°±æœ‰å¯èƒ½ä¸¢æ¶ˆæ¯\n2 é«˜æ°´ä½å’Œä½æ°´ä½æˆ‘è®°å¾—æ˜¯ç”¨æ¥æ§åˆ¶æŸä¸ªæ¶ˆæ¯æ˜¯å¦å¯ä»¥åŒæ­¥ç»™followerçš„è§„åˆ™å‘¢\n\nå¸Œæœ›è€å¸ˆè§£ç­”å“ˆ ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579254919,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1061786,"avatar":"https://static001.geekbang.org/account/avatar/00/10/33/9a/a323b2f1.jpg","nickname":"æ‚ æ‚ å°ç«¹å­","note":"","ucode":"A5E6731D28EBF9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":197131,"discussion_content":"å¦‚æœæ˜¯æ‹‰çš„ï¼Œå®æ•ˆæ€§å¦‚ä½•å¤„ç†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583409004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204610,"user_name":"å‘¨æ›™å…‰çˆ±å­¦ä¹ ","can_delete":false,"product_type":"c1","uid":1022920,"ip_address":"","ucode":"98EAB6EBAB34B6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/c8/665100a3.jpg","comment_is_top":false,"comment_ctime":1586428962,"is_pvip":false,"replies":[{"id":"76528","content":"å—¯å—¯ï¼Œç®—æ˜¯ä¸€ä¸ªä¸å¤ªå¸¸è§åŠŸèƒ½çš„å…¸å‹åº”ç”¨äº†ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1586481559,"ip_address":"","comment_id":204610,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18766298146","product_id":100029201,"comment_content":"æ‹¦æˆªå™¨çš„ç¡®æ˜¯å¾ˆæœ‰ç”¨ï¼Œæˆ‘ä»¬åœ¨grpcçš„æ‹¦æˆªå™¨ä¸­åšé™æµå¤„ç†ã€‚åŒç†ï¼Œç”±äºä¸‹æ¸¸å­˜å‚¨TPSèƒ½åŠ›æœ‰é™ï¼Œä¹Ÿå®Œå…¨å¯ä»¥åœ¨kafkaæ¶ˆè´¹çš„æ‹¦æˆªå™¨ä¸­åšæ¶ˆè´¹é™æµå¤„ç†ï¼Œé˜²æ­¢æŠŠå­˜å‚¨æ‰“æŒ‚","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491232,"discussion_content":"å—¯å—¯ï¼Œç®—æ˜¯ä¸€ä¸ªä¸å¤ªå¸¸è§åŠŸèƒ½çš„å…¸å‹åº”ç”¨äº†ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586481559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154628,"user_name":"è¿›å‡»çš„å§¬å“¥","can_delete":false,"product_type":"c1","uid":1527231,"ip_address":"","ucode":"0A6ED9C58F1FE0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1T8Etnuwm77aViawR2wyricV9SIh7EadUEmCZStBHZKC0BYibmwwFTVaVVBJLibnfibOPyfkgfrBuQePcicVHzny8iaNg/132","comment_is_top":false,"comment_ctime":1574496008,"is_pvip":false,"replies":[{"id":"59491","content":"å•æ¡æ¶ˆæ¯","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1574642934,"ip_address":"","comment_id":154628,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18754365192","product_id":100029201,"comment_content":"Interceptorå¤„ç†æ•°æ®æ˜¯å•æ¡çš„å—ï¼Œè¿˜æ˜¯å¤šæ¡æ•°æ®ä½œä¸ºä¸€ä¸ªé›†åˆ","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475530,"discussion_content":"å•æ¡æ¶ˆæ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574642934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151114,"user_name":"James","can_delete":false,"product_type":"c1","uid":1134861,"ip_address":"","ucode":"48B0F2A334D1C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","comment_is_top":false,"comment_ctime":1573654906,"is_pvip":false,"replies":[{"id":"58203","content":"æˆ‘çš„ç»éªŒæ˜¯å…ˆè§£å†³OOMçš„é—®é¢˜å§ã€‚è‡³äºcommit å¤±è´¥ï¼Œé€šå¸¸æ˜¯å› ä¸ºäº‹ä»¶å¤„ç†çš„é€Ÿåº¦å¤ªæ…¢äº†","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1573695395,"ip_address":"","comment_id":151114,"utype":1}],"discussion_count":7,"race_medal":0,"score":"18753524090","product_id":100029201,"comment_content":"è¯·é—®è€å¸ˆæ— æ³•å®Œæˆæäº¤,æ˜¯å› ä¸ºé‡æ–°å¹³è¡¡,æ˜¯ä»€ä¹ˆåŸå› æ‰ä¼šå¯¼è‡´.<br>åˆšæ¥è§¦ä¸ä¹…,å°±è¦ä¿®æ”¹çº¿ä¸Šç¯å¢ƒé—®é¢˜.ä½†æ˜¯ä¸€ç›´è·‘äº†ä¸€å°æ—¶å°±ä¼šä¸‹é¢é—®é¢˜,ç„¶åoom<br>Group coordinator rl-hadoop5.gci.com:9092 (id: 2147483646 rack: null) is unavailable or invalid, will attempt rediscovery<br><br><br>Offset commit failed on partition dispatch_bus-1 at offset 28978632: The coordinator is not aware of this member.<br><br><br>Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spending too much time message processing. You can address this either by increasing the session timeout or by reducing the maximum size of batches returned in poll() with max.poll.records.","like_count":4,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474367,"discussion_content":"æˆ‘çš„ç»éªŒæ˜¯å…ˆè§£å†³OOMçš„é—®é¢˜å§ã€‚è‡³äºcommit å¤±è´¥ï¼Œé€šå¸¸æ˜¯å› ä¸ºäº‹ä»¶å¤„ç†çš„é€Ÿåº¦å¤ªæ…¢äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573695395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2071279,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/9a/ef/6162b0e0.jpg","nickname":"Rangarok","note":"","ucode":"D13AF6E247EFCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575437,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654831288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179293,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/9d/105fa746.jpg","nickname":"å®‡ç¿”","note":"","ucode":"CDEAAB29FC1A9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":168485,"discussion_content":"é‡åˆ°åŒæ ·çš„é—®é¢˜ï¼Œè¯·é—®æ¥¼ä¸»æœ€åæ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿæˆ–è€…æœ‰æ²¡æœ‰ä»€ä¹ˆæ€è·¯\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581583927,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1179293,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/9d/105fa746.jpg","nickname":"å®‡ç¿”","note":"","ucode":"CDEAAB29FC1A9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265772,"discussion_content":"æ‰çœ‹åˆ°ï¼Œå…¶å®æ˜¯å› ä¸ºç¨‹åº¦æ¶ˆè´¹é˜Ÿåˆ—ç´¯ç§¯å¤ªå¤šå¤„ç†ä¸è¿‡æ¥å¯¼è‡´oomï¼Œæ¶ˆè´¹ç«¯å¤„ç†æ—¶è¦å¤„ç†æ‰ä¸€äº›è¿‡æœŸæ•°æ®ä»¥åŠå¤„ç†é€»è¾‘ä¸è¦å¤ªé‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589436913,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":168485,"ip_address":""},"score":265772,"extra":""},{"author":{"id":1134861,"avatar":"https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg","nickname":"James","note":"","ucode":"48B0F2A334D1C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1179293,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/9d/105fa746.jpg","nickname":"å®‡ç¿”","note":"","ucode":"CDEAAB29FC1A9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265773,"discussion_content":"æ¯”å¦‚åŠ é”ï¼Œæ¯”å¦‚ä¸€äº›æ•°æ®å…¶å®å·²ç»è¿‡æœŸäº†ï¼Œåº”è¯¥è¿‡æ»¤äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589436970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":168485,"ip_address":""},"score":265773,"extra":""}]},{"author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158900,"discussion_content":"äº‹ä»¶å¤„ç†å¤ªæ…¢å¯¼è‡´ commitå¤±è´¥ ï¼Œä¸ºå•¥ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580637271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1054827,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/6b/a1448af1.jpg","nickname":"è´å½±","note":"","ucode":"19545C8DCBF8A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1132315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg","nickname":"èƒ¡å°ç¦¾","note":"","ucode":"1C23B7492C0C9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543973,"discussion_content":"è¿‡é•¿æ—¶é—´æ²¡æ‹‰å–æ¶ˆæ¯æ—¶ï¼Œä¼šè¢«Kafkaè®¤å®šè¯¥æ¶ˆè´¹è€…å¯èƒ½å‡ºç°é—®é¢˜å¯¼è‡´rebalanceï¼Œå› ä¸ºéœ€è¦pollä¸­å‘é€å…ƒæ•°æ®ä¿¡æ¯ï¼Œç›¸å½“äºå‘é€å¿ƒè·³","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641369836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":158900,"ip_address":""},"score":543973,"extra":""}]}]},{"had_liked":false,"id":206417,"user_name":"Roy Liang","can_delete":false,"product_type":"c1","uid":1098898,"ip_address":"","ucode":"1DF5FC831A35DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/92/338b5609.jpg","comment_is_top":false,"comment_ctime":1586857931,"is_pvip":false,"replies":[{"id":"77341","content":"hmmm.... æˆ‘çš„æ„æ€æ˜¯æ¶ˆæ¯è¢«brokerç«¯åº”ç­”å°±è¡¨ç¤ºæ¶ˆæ¯è¢«æäº¤æˆåŠŸäº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1587004138,"ip_address":"","comment_id":206417,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14471759819","product_id":100029201,"comment_content":"è€å¸ˆä½ å¥½ï¼ŒonAcknowledgementä¸åº”è¯¥æ˜¯æ¶ˆæ¯ACKåå—ï¼Ÿæ€ä¹ˆæ˜¯æäº¤æˆåŠŸåå‘¢ï¼Ÿæäº¤æˆåŠŸåæ„Ÿè§‰åº”è¯¥å±äºcallbackçš„","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491782,"discussion_content":"hmmm.... æˆ‘çš„æ„æ€æ˜¯æ¶ˆæ¯è¢«brokerç«¯åº”ç­”å°±è¡¨ç¤ºæ¶ˆæ¯è¢«æäº¤æˆåŠŸäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587004138,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108429,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1561771430,"is_pvip":false,"replies":[{"id":"39443","content":"onsendæ˜¯producerè¿›ç¨‹ä¸‹çš„çº¿ç¨‹ï¼›onConsumeæ˜¯consumerè¿›ç¨‹ä¸‹çš„çº¿ç¨‹ï¼Œå®ƒä»¬ä¸æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚æˆ‘è¯´çš„æ˜¯onSendå’ŒonAcknowledgementæ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸‹çš„å¤šä¸ªçº¿ç¨‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561946836,"ip_address":"","comment_id":108429,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14446673318","product_id":100029201,"comment_content":"è¯·é—®ä¸‹è€å¸ˆã€‚onsendæˆ–onconsumerçš„æ‰§è¡Œçº¿ç¨‹å’Œå‘é€æˆ–æ¶ˆè´¹æ¶ˆæ¯çš„çº¿ç¨‹æ˜¯å¦æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼ŸåŠ å…¥å¤ªå¤šè€—æ—¶é€»è¾‘æ˜¯å¦ä¼šå½±å“ä¸»é€»è¾‘ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":455971,"discussion_content":"onsendæ˜¯producerè¿›ç¨‹ä¸‹çš„çº¿ç¨‹ï¼›onConsumeæ˜¯consumerè¿›ç¨‹ä¸‹çš„çº¿ç¨‹ï¼Œå®ƒä»¬ä¸æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚æˆ‘è¯´çš„æ˜¯onSendå’ŒonAcknowledgementæ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸‹çš„å¤šä¸ªçº¿ç¨‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108464,"user_name":"æŒ¯è¶…","can_delete":false,"product_type":"c1","uid":1103529,"ip_address":"","ucode":"D55B896810DBBF","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/a9/ffd70fdc.jpg","comment_is_top":false,"comment_ctime":1561777671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10151712263","product_id":100029201,"comment_content":"Producer å‘é€çš„æ˜¯è¢« ProducerInterceptor ä¿®æ”¹åçš„æ¶ˆæ¯ï¼Œè¿”å› null ä¹Ÿæ˜¯ä¸€ç§ä¿®æ”¹çš„è¡Œä¸ºï¼Œæ‰€ä»¥ kafka ä¸åº”è¯¥å¯¹è¿™ç§æƒ…å†µç‰¹æ®Šå¯¹å¾…ã€‚ä¸è¿‡å°† null å‘é€åˆ°æœåŠ¡ç«¯æ²¡æœ‰æ„ä¹‰ï¼Œå®é™…æ‰§è¡Œä¼šå‡ºç° NPEï¼Œä¸è¿‡å¼‚å¸¸æœ€ç»ˆä¼šè¢«æ•è·ä¼ é€’ç»™ ProducerInterceptor çš„ onAcknowledgement æ–¹æ³•ã€‚","like_count":2},{"had_liked":false,"id":293316,"user_name":"å°é©¬å“¥","can_delete":false,"product_type":"c1","uid":1358045,"ip_address":"","ucode":"B2C0FF38F8C9BC","user_header":"https://static001.geekbang.org/account/avatar/00/14/b8/dd/37726c34.jpg","comment_is_top":false,"comment_ctime":1621332572,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5916299868","product_id":100029201,"comment_content":"ç»“æœ: KafkaProducer.doSend(KafkaProducer.java:876)æŠ›å‡ºjava.lang.NullPointerExceptionå¼‚å¸¸<br>åŸç†è§£é‡Š: ä¸Javawebçš„æ‹¦æˆªå™¨ä¸€æ ·, è¢«è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨æ‹¦æˆªä¹‹å, åœ¨ç”Ÿäº§è€…doSendä¹‹å‰æ²¡æœ‰å°†æ¶ˆæ¯æ”¾è¡Œ, è€Œæ˜¯æ”¾è¡Œäº†null, ç”Ÿäº§è€…doSend(null)æŠ›å¼‚å¸¸","like_count":1},{"had_liked":false,"id":234292,"user_name":"åŒæ¤’å”å”","can_delete":false,"product_type":"c1","uid":1395385,"ip_address":"","ucode":"9C4B1DB2E693AF","user_header":"https://static001.geekbang.org/account/avatar/00/15/4a/b9/1531ff1c.jpg","comment_is_top":false,"comment_ctime":1594633944,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5889601240","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œæˆ‘çœ‹äº†æºç åå‘ç°<br>1038ï¼Œ1037ï¼Œ1029-----reassign-----&gt;1038,1037,1048<br>è¿ç§»è®¡åˆ’å¡ä½çš„é‚£æ­¥æ˜¯è¿™æ ·çš„<br>é¦–å…ˆ1029å‰¯æœ¬çš„çŠ¶æ€ä»replicaä¸­ç§»é™¤æµç¨‹æ˜¯<br>controllerå…ˆæŠŠ1029offline,<br>ç„¶å<br>controllerå‘é€çŠ¶æ€æ”¹å˜è¯·æ±‚ç»™1029<br><br><br>1ã€first move the replica to offline state (the controller removes it from the ISR)<br><br>2ã€send stop replica command to the old replicas<br><br><br>3ã€Eventually partition reassignment could use a callback that does retries if deletion failed<br><br><br>ç„¶åè¿”å›ä¸€ä¸ªå›è°ƒçŠ¶æ€å€¼NonExistentReplicaï¼ˆå› ä¸º1029ç°åœ¨æ˜¯æ­»äº†çš„çŠ¶æ€ï¼‰ã€‚<br>é‚£ä¹ˆè¿™ç§æƒ…å†µå¦‚ä½•è§£å†³å‘¢ï¼Ÿ<br>æ˜¯ç›´æ¥åœ¨zkä¸­ä¿®æ”¹è¯¥ä¸»é¢˜çš„é—®é¢˜åˆ†åŒºï¼ˆæ‰§è¡Œè¿ç§»è®¡åˆ’å¡ä¸»çš„é‚£ä¸ªåˆ†åŒºï¼‰å—ï¼Ÿ<br>","like_count":2,"discussions":[{"author":{"id":1879982,"avatar":"","nickname":"Geek_505716","note":"","ucode":"4D521700DE208E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349824,"discussion_content":"è¯·é—®é—®é¢˜è§£å†³äº†å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613568260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234291,"user_name":"åŒæ¤’å”å”","can_delete":false,"product_type":"c1","uid":1395385,"ip_address":"","ucode":"9C4B1DB2E693AF","user_header":"https://static001.geekbang.org/account/avatar/00/15/4a/b9/1531ff1c.jpg","comment_is_top":false,"comment_ctime":1594633770,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5889601066","product_id":100029201,"comment_content":"åˆ†åŒºè¿ç§»é‡åˆ°çš„é—®é¢˜æ€ä¹ˆè§£å†³å‘¢<br>1038ï¼Œ1037ï¼Œ1029-----reassign-----&gt;1038,1037,1048<br>è¿ç§»è®¡åˆ’å¡æ­»äº†<br>replicaå˜æˆ1038ï¼Œ1037ï¼Œ1048ï¼Œ1029äº†ï¼ŒISRå˜æˆäº†1038,1048<br>å…¶å®å°±æ˜¯1029æœºå­å…ˆå®•æ‰äº†ï¼Œæˆ‘æƒ³è¦æŠŠæ­»æ‰çš„1029æœºå­ä¸Šçš„å‰¯æœ¬è¿ç§»åˆ°1048ä¸Š<br>ç°åœ¨å¡æ­»äº†ï¼Œä¸€ç›´in progress<br>æˆ‘æƒ³è¦åœ¨replicaä¸­remove1029ï¼Œä½†æ˜¯æˆ‘çœ‹äº†æºç å‘ç°æ˜¯çŠ¶æ€æœºç»´æŠ¤æ¯ä¸€ä¸ªreplicaï¼Œè‡ªå·±æ²¡åŠæ³•åˆ é™¤ï¼Œæ‰€ä»¥ç°åœ¨æ²¡è¾™äº†ã€‚ã€‚ã€‚","like_count":1},{"had_liked":false,"id":204200,"user_name":"é£çŒªç¯æ¸¸è®°","can_delete":false,"product_type":"c1","uid":1120765,"ip_address":"","ucode":"BEE1A2E097997D","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/fd/b77903c0.jpg","comment_is_top":false,"comment_ctime":1586350347,"is_pvip":false,"replies":[{"id":"76531","content":"ä¸åŒåŒä¸€æ¡ï¼Œæ˜¯ä¸€æ‰¹æ¶ˆæ¯ã€‚onConsumeæ–¹æ³•å°±æ˜¯åœ¨pollè¿”å›æ¶ˆæ¯å‰è°ƒç”¨çš„ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­åŠ å…¥ä½ çš„å¤„ç†é€»è¾‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1586481912,"ip_address":"","comment_id":204200,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5881317643","product_id":100029201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæ¶ˆè´¹ç«¯æ‹¦æˆªå™¨é‡Œæ¥æ”¶åˆ°çš„å¤šæ¡æ¶ˆæ¯æ˜¯åŒä¸€æ¡å—ï¼Ÿæƒ³åœ¨æ‹¦æˆªå™¨å‘é€å‰ï¼Œæ¶ˆè´¹å‰å¯¹åŒä¸€æ¡æ¶ˆæ¯åšäº›å¤„ç†å¯ä»¥å®ç°å—","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491100,"discussion_content":"ä¸åŒåŒä¸€æ¡ï¼Œæ˜¯ä¸€æ‰¹æ¶ˆæ¯ã€‚onConsumeæ–¹æ³•å°±æ˜¯åœ¨pollè¿”å›æ¶ˆæ¯å‰è°ƒç”¨çš„ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­åŠ å…¥ä½ çš„å¤„ç†é€»è¾‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586481912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":173866,"user_name":"yic","can_delete":false,"product_type":"c1","uid":1201577,"ip_address":"","ucode":"C8DC471B7C28B8","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/a9/5282a560.jpg","comment_is_top":false,"comment_ctime":1579746213,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5874713509","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œå…³äºåˆ†äº«çš„æ¡ˆä¾‹ã€‚æˆ‘æ„Ÿè§‰æ¶ˆæ¯æ€»æ•°å’Œæ—¶å»¶çš„ç»Ÿè®¡éƒ½åº”è¯¥æ”¾åœ¨æ¶ˆè´¹ç«¯å‘¢ã€‚æ¯•ç«Ÿæ¶ˆæ¯çš„å‘é€å’Œæ¶ˆè´¹æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸èƒ½ä¿è¯ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ç«‹åˆ»å°±è¢«æ¶ˆè´¹è€…ä¸€æ¬¡æ¶ˆè´¹ã€‚","like_count":1,"discussions":[{"author":{"id":1206149,"avatar":"https://static001.geekbang.org/account/avatar/00/12/67/85/a5ad73d8.jpg","nickname":"æ´‹","note":"","ucode":"C7F9707FBCD15F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355976,"discussion_content":"æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œå¼‚æ­¥ä¸‹ä¸èƒ½ä¿è¯ç»Ÿè®¡æ•°æ˜¯å‡†ç¡®çš„ã€‚ä¸è¿‡è€å¸ˆçš„ç›®çš„åº”è¯¥æ˜¯è¦æ¼”ç¤ºç”Ÿäº§å’Œæ¶ˆè´¹æ‹¦æˆªå™¨çš„ä½¿ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615513608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145305,"user_name":"æ­¤æ–¹å½¼æ–¹Francis","can_delete":false,"product_type":"c1","uid":1001390,"ip_address":"","ucode":"73E6C93CF1FE39","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/ae/0a5f7a56.jpg","comment_is_top":false,"comment_ctime":1572247703,"is_pvip":false,"replies":[{"id":"56144","content":"Kafkaæœ¬èº«ä¹Ÿæä¾›äº†ä¸€æ•´å¥—æƒé™æ§åˆ¶çš„é€»è¾‘ã€‚å½“ç„¶å¦‚æœä½ è¿™ä¹ˆç”¨èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œæˆ‘è§‰å¾—æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼šï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1572309203,"ip_address":"","comment_id":145305,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867214999","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œåœ¨kafkaçš„interceptoré‡Œé¢å®ç°æƒé™æ§åˆ¶çš„é€»è¾‘åˆé€‚å—ï¼Ÿ<br>å‡è®¾è¯´æœ‰å¦å¤–ä¸€ä¸ªæœåŠ¡ç»´æŠ¤äº†IPå’Œtopicä¹‹é—´çš„å…³ç³»ï¼Œåœ¨interceptoré‡Œé¢çº¿è·å–åˆ°æœ¬æœºipæœ‰æƒé™çš„topicåˆ—è¡¨ï¼Œç„¶åæ¯æ¬¡å‘æ¶ˆæ¯çš„æ—¶å€™åšåˆ¤æ–­ã€‚","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472328,"discussion_content":"Kafkaæœ¬èº«ä¹Ÿæä¾›äº†ä¸€æ•´å¥—æƒé™æ§åˆ¶çš„é€»è¾‘ã€‚å½“ç„¶å¦‚æœä½ è¿™ä¹ˆç”¨èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œæˆ‘è§‰å¾—æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572309203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115102,"user_name":"æ¨é™†ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1108457,"ip_address":"","ucode":"3BC968447406EB","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/e9/1f95e422.jpg","comment_is_top":false,"comment_ctime":1563495786,"is_pvip":true,"replies":[{"id":"42091","content":"é»˜è®¤æƒ…å†µä¸‹æ˜¯æ¶ˆæ¯å‘ç”Ÿæ—¶producerç¨‹åºæ‰€åœ¨æœºå™¨æ—¶é’Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1563517594,"ip_address":"","comment_id":115102,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5858463082","product_id":100029201,"comment_content":"System.currentTimeMillis() - record.timestamp() æ˜¯å¦è¦æ±‚ç”Ÿäº§å®¢æˆ·ç«¯è®¾ç½®recordçš„timestampå­—æ®µï¼Ÿè¿˜æ˜¯Producer Clientä¼šè‡ªåŠ¨ç”Ÿæˆï¼Ÿå¯¹äºKafkaä¸­çš„timestampè¿˜æä¸å¤ªæ¸…æ¥šï¼Œè¿™å¯¹ç›‘æ§æ¯”è¾ƒå…³é”®ï¼Œä¸çŸ¥é“åé¢æœ‰æ²¡æœ‰ä»‹ç»ï¼Œè°¢è°¢","like_count":2,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458966,"discussion_content":"é»˜è®¤æƒ…å†µä¸‹æ˜¯æ¶ˆæ¯å‘ç”Ÿæ—¶producerç¨‹åºæ‰€åœ¨æœºå™¨æ—¶é’Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563517594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":110794,"user_name":"å°å¤´é’ˆ","can_delete":false,"product_type":"c1","uid":1422920,"ip_address":"","ucode":"21EB7CDE48EC9B","user_header":"https://static001.geekbang.org/account/avatar/00/15/b6/48/1275e0ce.jpg","comment_is_top":false,"comment_ctime":1562336194,"is_pvip":false,"replies":[{"id":"40299","content":"å¯ä»¥å•Šï¼Œä½ æƒ³åœ¨é‡Œé¢å®ç°ä»€ä¹ˆæ ·çš„é€»è¾‘éƒ½è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562370527,"ip_address":"","comment_id":110794,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5857303490","product_id":100029201,"comment_content":"æˆ‘ä»¬çš„åº”ç”¨åœºæ™¯æ˜¯è¿™æ ·çš„ï¼Œå°†é‡‡é›†åˆ°çš„æ•°æ®æ¥æ”¶åˆ°kafkaï¼Œå¹¶ç”±kafkaå†è¿›è¡Œç”Ÿäº§ä¾›ä¸‹ä¸€é€»è¾‘æ¶ˆè´¹ï¼Œæ¶ˆè´¹çš„æ•°æ®è¿›è¡Œä¸€äº›ä¸šåŠ¡çš„ä¿®æ”¹ï¼Œæœ€åè¿›å…¥åˆ°æŸ¥è¯¢å¹³å°ä¸­ï¼Œä½†æ˜¯ç»å¸¸ä¼šå‡ºç°é‡‡é›†ç«¯çš„æ•°æ®ä¸æŸ¥è¯¢ç«¯çš„æ•°æ®é‡ç›¸å·®è¾ƒå¤§çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç®€å•çš„ç»Ÿè®¡äº†æ•°æ®å†™å…¥åˆ°redisä¸­ã€‚<br><br>èƒ¡è€å¸ˆï¼Œè¯·é—®Interceptorå¯ä»¥å¯¹ç”Ÿäº§è€…ç”Ÿäº§çš„æ•°æ®ä»¥åŠæ¶ˆè´¹è€…æ¶ˆè´¹çš„æ•°æ®è¿›è¡Œç»Ÿè®¡ä¹ˆï¼Ÿ<br><br><br>","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457059,"discussion_content":"å¯ä»¥å•Šï¼Œä½ æƒ³åœ¨é‡Œé¢å®ç°ä»€ä¹ˆæ ·çš„é€»è¾‘éƒ½è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562370527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109059,"user_name":"Geek_Sue","can_delete":false,"product_type":"c1","uid":1580774,"ip_address":"","ucode":"B2C9400D72BB1D","user_header":"","comment_is_top":false,"comment_ctime":1561953913,"is_pvip":false,"replies":[{"id":"39535","content":"äº‹å®ä¸Šï¼Œå³ä½¿ä¸ç”¨Kafkaçš„æ‹¦æˆªå™¨ï¼Œè¿™ç§è®¡æ•°ç±»çš„æŒ‡æ ‡ä¹Ÿå¯èƒ½æœ‰äº›è®¸çš„ä¸å‡†ç¡®ï¼Œä¸è¿‡åº”è¯¥æ²¡å…³ç³»å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561982603,"ip_address":"","comment_id":109059,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856921209","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹æ‚¨æ–‡ä¸­çš„ä¾‹å­ï¼Œåœ¨onConsumeçš„æ—¶å€™ï¼Œæ˜¯å¦ä¼šå­˜åœ¨è¿™ä¸€æ—¶åˆ»Producerä»ç„¶åœ¨å‘é€æ¶ˆæ¯ï¼Œç„¶åtotalSentMessageè¿™ä¸ªå€¼æ‹¿åˆ°çš„åå°ï¼Œå¹¶ä¸å®Œå…¨å‡†ç¡®å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456229,"discussion_content":"äº‹å®ä¸Šï¼Œå³ä½¿ä¸ç”¨Kafkaçš„æ‹¦æˆªå™¨ï¼Œè¿™ç§è®¡æ•°ç±»çš„æŒ‡æ ‡ä¹Ÿå¯èƒ½æœ‰äº›è®¸çš„ä¸å‡†ç¡®ï¼Œä¸è¿‡åº”è¯¥æ²¡å…³ç³»å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561982603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108508,"user_name":"lmtoo","can_delete":false,"product_type":"c1","uid":1133918,"ip_address":"","ucode":"FCD5B9C941D448","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/5e/c5c62933.jpg","comment_is_top":false,"comment_ctime":1561789397,"is_pvip":false,"replies":[{"id":"39441","content":"æ—¶é’Ÿé¢‘ç‡ï¼Ÿä½ æ˜¯è¯´æ—¶é’Ÿä¿æŒä¸€æ ·å—ï¼Ÿä¸€èˆ¬ä½¿ç”¨NTPã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561946719,"ip_address":"","comment_id":108508,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5856756693","product_id":100029201,"comment_content":"è¿™ä¸ªæ€ä¹ˆä¿è¯ä¸åŒæœºå™¨çš„æ—¶é’Ÿé¢‘ç‡æ˜¯ä¸€æ ·çš„ï¼Ÿï¼Œå¦‚æœä¸å®Œå…¨ä¸€æ ·ï¼Œè¯¯å·®åº”è¯¥ä¼šè¶Šç´¯ç§¯è¶Šå¤§","like_count":1,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456016,"discussion_content":"æ—¶é’Ÿé¢‘ç‡ï¼Ÿä½ æ˜¯è¯´æ—¶é’Ÿä¿æŒä¸€æ ·å—ï¼Ÿä¸€èˆ¬ä½¿ç”¨NTPã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561946719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397497,"discussion_content":"å¦‚æœè¯¯å·®åœ¨ä¸€ç§’å†… ä¸€èˆ¬å¯ä»¥å¿½ç•¥ï¼Œå¦åˆ™å°±è¦è‡ªå·±åšä¸ªæ—¶é’ŸåŒæ­¥å™¨ NTP lamport clockä¸€ç±»çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632628659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":342946,"user_name":"å´”å´”","can_delete":false,"product_type":"c1","uid":1001624,"ip_address":"","ucode":"AEFF335158786B","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep7yaY0ibpBicMoQz4QZKOh9Uxv0xZdb4JxmVnlJ5HBRiaENibUKKJrb2u3JibckqIVmuQdQwVxflLIvOQ/132","comment_is_top":false,"comment_ctime":1650543648,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650543648","product_id":100029201,"comment_content":"ä½¿ç”¨ç”Ÿäº§æ‹¦æˆªå™¨ï¼Œä¼šå½±å“kafkaçš„tpså—","like_count":0},{"had_liked":false,"id":339815,"user_name":"i_chase","can_delete":false,"product_type":"c1","uid":1795511,"ip_address":"","ucode":"09C41C863F4EA3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/b7/058276dc.jpg","comment_is_top":false,"comment_ctime":1648400311,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648400311","product_id":100029201,"comment_content":"æ€è€ƒé¢˜ï¼š<br>å°†brokersåœ°å€æ‰“ä¹±ï¼Œç„¶åé€ä¸ªå°è¯•è¿›è¡Œè¿æ¥å¹¶è·å–meta dataï¼Œåªè¦æˆåŠŸå°±ç»“æŸã€‚golang saramaå®¢æˆ·ç«¯çš„producerå°±æ˜¯è¿™ä¹ˆåšçš„","like_count":0},{"had_liked":false,"id":339810,"user_name":"i_chase","can_delete":false,"product_type":"c1","uid":1795511,"ip_address":"","ucode":"09C41C863F4EA3","user_header":"https://static001.geekbang.org/account/avatar/00/1b/65/b7/058276dc.jpg","comment_is_top":false,"comment_ctime":1648397866,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648397866","product_id":100029201,"comment_content":"ç¤ºä¾‹ä»£ç é‡Œï¼Œæ—¢ç„¶å°†recordsæ—¶å»¶ç´¯ç§¯ï¼Œåˆä½•å¿…å¼•å…¥redisè®¡ç®—total count?<br>len(records)ä¸æ˜¯å°±å¯ä»¥äº†å˜›","like_count":0},{"had_liked":false,"id":326286,"user_name":"è‘‰å®¶è±ª","can_delete":false,"product_type":"c1","uid":1669220,"ip_address":"","ucode":"21EAB56467F7DA","user_header":"https://static001.geekbang.org/account/avatar/00/19/78/64/c703163a.jpg","comment_is_top":false,"comment_ctime":1639460304,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639460304","product_id":100029201,"comment_content":"è¦æ€ä¹ˆå¼ºåˆ¶æŒ‡å®šç”¨æˆ·å¿…é¡»å®ç°æŸä¸€ä¸ªæ‹¦æˆªå™¨ï¼Ÿ","like_count":0},{"had_liked":false,"id":313714,"user_name":"å‡¯æ–‡å°çŒª","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1632628448,"is_pvip":false,"replies":[{"id":"114438","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1634004554,"ip_address":"","comment_id":313714,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1632628448","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆ ä½¿ç”¨kafkaç»Ÿè®¡latencyè¦å°¤å…¶æ³¨æ„system.currentTimeMills() å¦‚æœæ˜¯kafkaè¿™ç±»é«˜ååé‡çš„åŸ‹ç‚¹è¦æ³¨æ„é¢‘ç¹çš„ç”¨æˆ·æ€åˆ‡æ¢é—®é¢˜ã€‚<br>è¿™ä¸ªé—®é¢˜åœ¨KAFKA-2950 ä¸­ä¹Ÿæåˆ°è¿‡","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527450,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634004554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2071279,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/9a/ef/6162b0e0.jpg","nickname":"Rangarok","note":"","ucode":"D13AF6E247EFCF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575439,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654831559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":292542,"user_name":"xxh","can_delete":false,"product_type":"c1","uid":2531606,"ip_address":"","ucode":"289A870D9FC0FE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/lvLKFmCZfCB7V6e2YA9kL4Fr9KaNEyGiaKBDGDRSuSKqMukJKLb8JH7BXIicdNiaHLmaQladtWJJPqZkyu5icCyrjw/132","comment_is_top":false,"comment_ctime":1620874051,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620874051","product_id":100029201,"comment_content":"redisæ˜¯æ€ä¹ˆæ³¨å…¥åˆ°è¿™ä¸ªæ‹¦æˆªå™¨ä¸­çš„å®ä¾‹ï¼Ÿï¼Ÿé…ç½®æ˜¯é…ç½®çš„æ‹¦æˆªå™¨çš„å…¨è·¯å¾„ï¼Œæ‹¦æˆªå™¨çš„å®ä¾‹spring ioc å¹¶æ²¡æœ‰ç®¡ç†èµ·æ¥ã€‚","like_count":0},{"had_liked":false,"id":288784,"user_name":"eviltion","can_delete":false,"product_type":"c1","uid":1515445,"ip_address":"","ucode":"022DE8510B825E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/mWicFKgbjL299CQPEhoFdSAphVb4UpibkhF8loRxryBRt3H7ZGkibibhaKANTxvSiatic4PLCy2MsbEMH1hc76YefPUw/132","comment_is_top":false,"comment_ctime":1618670580,"is_pvip":true,"replies":[{"id":"104997","content":"æ²¡å¤ªæ‡‚ä½ çš„é—®é¢˜ï¼Œåˆ°åº•æ˜¯è¦å‘é€æ¶ˆæ¯è¿˜æ˜¯æ¶ˆè´¹æ¶ˆæ¯ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1619004003,"ip_address":"","comment_id":288784,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1618670580","product_id":100029201,"comment_content":"èƒ¡è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜ï¼Œç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œå®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°çš„å…¶ä¸­ä¸€ä¸ªå­—æ®µæ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨topic,æ¥åˆ›å»ºtopicï¼Œå¹¶å‘é€æ¶ˆæ¯ï¼Œæƒ³çŸ¥é“æ€ä¹ˆå®ç°åŠ¨æ€consumeræ¥æ¶ˆè´¹","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518736,"discussion_content":"æ²¡å¤ªæ‡‚ä½ çš„é—®é¢˜ï¼Œåˆ°åº•æ˜¯è¦å‘é€æ¶ˆæ¯è¿˜æ˜¯æ¶ˆè´¹æ¶ˆæ¯ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619004003,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310388,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","nickname":"Allan","note":"","ucode":"8DA4DBECC2C45C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391340,"discussion_content":"è¿™ä¸ªé—®é¢˜æè¿°çš„ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚çœŸä¸çŸ¥é“å†è¯´å•¥ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630406987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284426,"user_name":"Allan","can_delete":false,"product_type":"c1","uid":1310388,"ip_address":"","ucode":"8DA4DBECC2C45C","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/b4/295338e7.jpg","comment_is_top":false,"comment_ctime":1616241251,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616241251","product_id":100029201,"comment_content":"1ã€å¦‚æœæ‹¦æˆªå™¨è¿”å›nullï¼Œé‚£ä¹ˆæˆ‘ä»¬producerå‘é€çš„æ—¶å€™å°±ä¼šæŠ¥ç©ºæŒ‡é’ˆï¼ŒåŒç†consumerçš„æ—¶å€™ä¹Ÿæ˜¯ã€‚æ„Ÿè°¢è€å¸ˆï¼Œæˆ‘å»åšäº†å®æˆ˜æ“ä½œï¼Œæ‰€æœ‰æ”¶è·ï¼ï¼","like_count":0},{"had_liked":false,"id":267553,"user_name":"å½’é›¶","can_delete":false,"product_type":"c1","uid":1103208,"ip_address":"","ucode":"C99B8E93009A46","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","comment_is_top":false,"comment_ctime":1607826877,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1607826877","product_id":100029201,"comment_content":"ä¸Šè¿°å®ä¾‹æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯record.timestamp()è¡¨ç¤ºçš„æ˜¯å‘é€æ¶ˆæ¯çš„æ—¶é—´ï¼Œè¿™ä¸ªç›´æ¥ä½¿ç”¨kafkaçš„apiè·å–çš„","like_count":0},{"had_liked":false,"id":267547,"user_name":"å½’é›¶","can_delete":false,"product_type":"c1","uid":1103208,"ip_address":"","ucode":"C99B8E93009A46","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/68/2201b6b9.jpg","comment_is_top":false,"comment_ctime":1607824899,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1607824899","product_id":100029201,"comment_content":"çœ‹äº†å››åˆ†ä¹‹ä¸€äº†ï¼Œå†’æ³¡æ‰“ä¸ªå¡ï¼Œæ¯æ¬¡çœ‹è¯„è®ºéƒ½æœ‰æ–°çš„æ€è€ƒğŸ¤”ï¼ŒåšæŒä¸‹å»âœŠ","like_count":0},{"had_liked":false,"id":265644,"user_name":"Lvjsky","can_delete":false,"product_type":"c1","uid":1257661,"ip_address":"","ucode":"9DC0F199596CAF","user_header":"https://static001.geekbang.org/account/avatar/00/13/30/bd/00cc9f72.jpg","comment_is_top":false,"comment_ctime":1606968729,"is_pvip":false,"replies":[{"id":"96625","content":"ç›´æ¥ä½¿ç”¨æµå¤„ç†æ¡†æ¶çš„filteræ›´åŠ å®¹æ˜“äº›","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1607077641,"ip_address":"","comment_id":265644,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1606968729","product_id":100029201,"comment_content":"è€å¸ˆï¼Œæ˜¯å¦å¯ä»¥ä½¿ç”¨æ¶ˆè´¹è€…è¿‡æ»¤å™¨ï¼Œåœ¨ä½¿ç”¨Spark Streamingæˆ–Flinkæ¶ˆè´¹æ•°æ®å‰ï¼Œé€šè¿‡æ¶ˆè´¹è€…æ‹¦æˆªå™¨è¿‡æ»¤æ‰ä¸éœ€è¦çš„æ•°æ®å‘¢ï¼Ÿè¿™æ ·å¯ä»¥å‡å°‘ä¸‹æ¸¸æ¶ˆè´¹è€…è®¡ç®—é‡","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511004,"discussion_content":"ç›´æ¥ä½¿ç”¨æµå¤„ç†æ¡†æ¶çš„filteræ›´åŠ å®¹æ˜“äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607077641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244526,"user_name":"æ°§æ°”ğŸŒ™ ğŸŸ ğŸŒº","can_delete":false,"product_type":"c1","uid":1591015,"ip_address":"","ucode":"8E23C210A9F09E","user_header":"https://static001.geekbang.org/account/avatar/00/18/46/e7/e20279ea.jpg","comment_is_top":false,"comment_ctime":1598572370,"is_pvip":false,"replies":[{"id":"89995","content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1598580328,"ip_address":"","comment_id":244526,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1598572370","product_id":100029201,"comment_content":"å¦‚æœå®ç°çš„é€»è¾‘ä»…ä»…æ˜¯ return nullï¼Œä½ è§‰å¾— Kafka ä¼šä¸¢å¼ƒè¯¥æ¶ˆæ¯ï¼Œè¿˜æ˜¯åŸå°ä¸åŠ¨åœ°å‘é€æ¶ˆæ¯ï¼Ÿ<br>å›ç­”ï¼šæ‹¦æˆªå™¨ return null æ„å‘³ç€ä»€ä¹ˆä¹Ÿä¸åšï¼Œä¼šåŸå°ä¸åŠ¨çš„å‘é€æ¶ˆæ¯","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504618,"discussion_content":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598580328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231244,"user_name":"Rioæ­£åœ¨åŠªåŠ›èµ¶ä½œä¸šä¸­...","can_delete":false,"product_type":"c1","uid":1338093,"ip_address":"","ucode":"3A0AB026A1B272","user_header":"https://static001.geekbang.org/account/avatar/00/14/6a/ed/c3e98fbb.jpg","comment_is_top":false,"comment_ctime":1593613013,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1593613013","product_id":100029201,"comment_content":"æ‹¦æˆªå™¨çš„ç¡®å¾ˆæœ‰ç”¨çš„ï¼ŒOpenTracingå’ŒSkyWalking","like_count":0},{"had_liked":false,"id":229650,"user_name":"mmé©¬","can_delete":false,"product_type":"c1","uid":1462076,"ip_address":"","ucode":"8CD674E4F61FC7","user_header":"https://static001.geekbang.org/account/avatar/00/16/4f/3c/296b5fa7.jpg","comment_is_top":false,"comment_ctime":1593087377,"is_pvip":false,"replies":[{"id":"84795","content":"æ¯ä¸ªæ¶ˆè´¹è€…æœ‰è‡ªå·±çš„æ‹¦æˆªå™¨ï¼Œäº’ä¸å½±å“","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1593163488,"ip_address":"","comment_id":229650,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593087377","product_id":100029201,"comment_content":"å¦‚æœæ¶ˆè´¹è€…æ˜¯å¤šä¸ªï¼Œç¤ºä¾‹ä¸­çš„æ¶ˆè´¹è€…ç«¯æ‹¦æˆªå™¨å°±æœ‰å¹¶å‘é—®é¢˜äº†å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499582,"discussion_content":"æ¯ä¸ªæ¶ˆè´¹è€…æœ‰è‡ªå·±çš„æ‹¦æˆªå™¨ï¼Œäº’ä¸å½±å“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593163488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212944,"user_name":"æ˜ŸæœŸå…«","can_delete":false,"product_type":"c1","uid":1185504,"ip_address":"","ucode":"34A37F73A48E7F","user_header":"https://static001.geekbang.org/account/avatar/00/12/16/e0/7abad3cc.jpg","comment_is_top":false,"comment_ctime":1588242011,"is_pvip":false,"replies":[{"id":"79132","content":"é›†åˆä¹Ÿè¦æ˜¯List&lt;String&gt;ï¼Œä½ çš„æ˜¯è¿™æ ·å—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"èƒ¡å¤•","uid":"1288090","ctime":1588400465,"ip_address":"","comment_id":212944,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1588242011","product_id":100029201,"comment_content":"é‡åˆ°è¿‡å¥‡æ€ªçš„ç°è±¡ï¼šæ‹¦æˆªç”¨é›†åˆä¼ è¿›å»ï¼Œè¯´classæ‰¾ä¸åˆ°ï¼Œç”¨å­—ç¬¦ä¸²ä¼ å´å¯ä»¥<br>props.put(ProducerConfig.INTERCEPTOR_CLASSES_CONFIG,  &quot;&quot;);<br>è¿™æ˜¯ä»€ä¹ˆç°è±¡å•Š","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493654,"discussion_content":"é›†åˆä¹Ÿè¦æ˜¯List&amp;lt;String&amp;gt;ï¼Œä½ çš„æ˜¯è¿™æ ·å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588400465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1185504,"avatar":"https://static001.geekbang.org/account/avatar/00/12/16/e0/7abad3cc.jpg","nickname":"æ˜ŸæœŸå…«","note":"","ucode":"34A37F73A48E7F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":256006,"discussion_content":"æ˜¯stringé›†åˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588433213,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":181243,"user_name":"HZ","can_delete":false,"product_type":"c1","uid":1371862,"ip_address":"","ucode":"883D79CEEA9C66","user_header":"https://static001.geekbang.org/account/avatar/00/14/ee/d6/0142c3a3.jpg","comment_is_top":false,"comment_ctime":1582525197,"is_pvip":false,"replies":[{"id":"70339","content":"producerç›®å‰ä½¿ç”¨2ä¸ªçº¿ç¨‹ï¼šå‰ç«¯ä¸»çº¿ç¨‹å’ŒSenderçº¿ç¨‹ã€‚å¾ˆå¤šæ“ä½œå®é™…ä¸Šæ˜¯åœ¨Senderçº¿ç¨‹å®Œæˆçš„ï¼Œæ¯”å¦‚ProducerInterceptorçš„onAcknowledgementæ–¹æ³•ã€‚<br><br>æŠ›å¼€ProducerInterceptorä¸è¯´ï¼ŒJava producerç›®å‰çš„çº¿ç¨‹å®‰å…¨æ€§æ˜¯è‡ªå·±å®ç°çš„ï¼Œä½ å¤§è‡´å¯ä»¥è®¤ä¸ºæ˜¯åº•å±‚ç”¨äº†çº¿ç¨‹å®‰å…¨çš„æ¶ˆæ¯é˜Ÿåˆ—ç±»å®ç°ç®€å•çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼è€Œå¸¦æ¥çš„çº¿ç¨‹å®‰å…¨","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1582593452,"ip_address":"","comment_id":181243,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582525197","product_id":100029201,"comment_content":"è€å¸ˆï¼Œinterceptorçš„å¤„ç†ï¼Œsenderï¼Œackï¼Œæ›´æ–°å…ƒæ•°æ®ï¼Œcallbackå¤„ç† è¿™äº›producerç«¯çš„åŠŸèƒ½éƒ½æ˜¯ç”¨çš„ä¸åŒçš„çº¿ç¨‹å—ï¼Ÿ producerç«¯çš„çº¿ç¨‹å®‰å…¨å¦‚ä½•æ¥ç†è§£ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484973,"discussion_content":"producerç›®å‰ä½¿ç”¨2ä¸ªçº¿ç¨‹ï¼šå‰ç«¯ä¸»çº¿ç¨‹å’ŒSenderçº¿ç¨‹ã€‚å¾ˆå¤šæ“ä½œå®é™…ä¸Šæ˜¯åœ¨Senderçº¿ç¨‹å®Œæˆçš„ï¼Œæ¯”å¦‚ProducerInterceptorçš„onAcknowledgementæ–¹æ³•ã€‚\n\næŠ›å¼€ProducerInterceptorä¸è¯´ï¼ŒJava producerç›®å‰çš„çº¿ç¨‹å®‰å…¨æ€§æ˜¯è‡ªå·±å®ç°çš„ï¼Œä½ å¤§è‡´å¯ä»¥è®¤ä¸ºæ˜¯åº•å±‚ç”¨äº†çº¿ç¨‹å®‰å…¨çš„æ¶ˆæ¯é˜Ÿåˆ—ç±»å®ç°ç®€å•çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼è€Œå¸¦æ¥çš„çº¿ç¨‹å®‰å…¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582593452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135939,"user_name":"æˆ‘å·²ç»è®¾ç½®äº†æ˜µç§°","can_delete":false,"product_type":"c1","uid":1364034,"ip_address":"","ucode":"ED672C5EBDBDC4","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","comment_is_top":false,"comment_ctime":1569310130,"is_pvip":false,"replies":[{"id":"52132","content":"å¯ä»¥å¤ç”¨ä½ åœ¨Springä¸­åˆ›å»ºçš„producerå—ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1569371087,"ip_address":"","comment_id":135939,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1569310130","product_id":100029201,"comment_content":"è€å¸ˆï¼Œé‡åˆ°ä¸ªé—®é¢˜ï¼Œ è‡ªå·±å»ºäº†ä¸ªconsumerçš„interceptorï¼Œéœ€è¦åœ¨interceptorä¸­æ”¶åˆ°æ¶ˆæ¯åï¼Œå‘é€å“åº”æ¶ˆæ¯ç»™å‘é€æ–¹ï¼Œä½†å‘ç°interceptorè¿™ä¸ªå®ä¾‹å¹¶æ²¡æœ‰è¢«springç®¡ç†èµ·æ¥ï¼Œå°±éœ€è¦è‡ªå·±å†newä¸€ä¸ªproducerã€‚ä½†è¿™ä¸ªkafkaé…ç½®åˆæ˜¯é…ç½®åœ¨é…ç½®ä¸­å¿ƒï¼Œä¹Ÿè¯»ä¸åˆ°ï¼Œåªèƒ½å†™æ­»äº†ã€‚æœ‰å•¥å¥½çš„æ–¹æ³•å—","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468394,"discussion_content":"å¯ä»¥å¤ç”¨ä½ åœ¨Springä¸­åˆ›å»ºçš„producerå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569371087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1364034,"avatar":"https://static001.geekbang.org/account/avatar/00/14/d0/42/6fd01fb9.jpg","nickname":"æˆ‘å·²ç»è®¾ç½®äº†æ˜µç§°","note":"","ucode":"ED672C5EBDBDC4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20807,"discussion_content":"ä¸è¡Œï¼Œæ‹¿ä¸åˆ°é‚£ä¸ªå€¼ï¼Œå› ä¸ºkafkaåœ¨åˆ›å»ºinterceptorçš„æ—¶å€™æ˜¯newå‡ºæ¥çš„ï¼Œè¿™ä¸ªnewçš„å¯¹è±¡é‡Œé¢æ ¹æœ¬æ‹¿ä¸åˆ°ä»»ä½•springç®¡ç†çš„bean","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569378696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119501,"user_name":"å°å¯","can_delete":false,"product_type":"c1","uid":1006735,"ip_address":"","ucode":"8834AF621FA67D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/8f/551b5624.jpg","comment_is_top":false,"comment_ctime":1564619934,"is_pvip":false,"replies":[{"id":"43871","content":"æ²¡ä»€ä¹ˆå¤ªå¥½çš„æ–¹æ³•ã€‚ä½ å¯ä»¥è¯•è¯•å‹ç¼©ã€‚å…¶å®æ¶ˆæ¯é˜Ÿåˆ—æœ¬ä¸é€‚åˆå‘é€å¤ªå¤§çš„æ¶ˆæ¯ä½“","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564627837,"ip_address":"","comment_id":119501,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1564619934","product_id":100029201,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªåœºæ™¯æƒ³è¯·æ•™ä¸‹ã€‚æˆ‘ä»¬å‘é€çš„æ•°æ®æ˜¯ä¸ªå¤§jsonï¼Œå¤§æ¦‚500Kï¼Œæœ‰ä¸€ç™¾å¤šçš„å­—æ®µï¼Œå…¶ä¸­ä¸€ä¸ªå­—æ®µ450Kæ˜¯å›¾ç‰‡base64ï¼Œå‘é€çš„é€Ÿåº¦ä¸åˆ°100æ¡&#47;ç§’ï¼Œåƒè¿™ç§å¤§æ¶ˆæ¯ä½“æ•°æ®çš„å‘é€ï¼Œkafkaæœ‰ä»€ä¹ˆå¥½çš„åŠæ³•ä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460931,"discussion_content":"æ²¡ä»€ä¹ˆå¤ªå¥½çš„æ–¹æ³•ã€‚ä½ å¯ä»¥è¯•è¯•å‹ç¼©ã€‚å…¶å®æ¶ˆæ¯é˜Ÿåˆ—æœ¬ä¸é€‚åˆå‘é€å¤ªå¤§çš„æ¶ˆæ¯ä½“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564627837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1096984,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bd/18/2af6bf4b.jpg","nickname":"å…”2ğŸ°ğŸƒ","note":"","ucode":"1FEDA044BB6CBD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7058,"discussion_content":"å°†å›¾ç‰‡æ•°æ®è½¬ç§»ï¼Œå­—æ®µå­˜å‚¨å›¾ç‰‡åœ°å€ï¼Œä¸çŸ¥é“è¯¥æ–¹æ³•æ˜¯å¦å¯ç”¨äºä½ çš„åœºæ™¯","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567328582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1006735,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/5c/8f/551b5624.jpg","nickname":"å°å¯","note":"","ucode":"8834AF621FA67D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1096984,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bd/18/2af6bf4b.jpg","nickname":"å…”2ğŸ°ğŸƒ","note":"","ucode":"1FEDA044BB6CBD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7097,"discussion_content":"è°¢è°¢æä¾›å¸®åŠ©ï¼Œç›®å‰ç”¨å°±æ˜¯è¿™ç§æ–¹å¼ï¼Œæƒ³çŸ¥é“ä¸ç”¨å›¾ç‰‡å­˜å‚¨æœåŠ¡æœ‰æ²¡æœ‰å…¶ä»–åŠæ³•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567384143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7058,"ip_address":""},"score":7097,"extra":""}]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":397499,"discussion_content":"è¿™ç§æœ€å¤§çš„é—®é¢˜ï¼š1.å‹ç¼©å›¾ç‰‡éœ€è¦åŠ¨ç”¨çš„ç ç‡è‚¯å®šæ˜¯åƒcpuçš„ 2. 450K * 100 = 45MB  è¿™ä¸ªå¸¦å®½ä¸å°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632628786,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119374,"user_name":"æ’’æ—¦çš„å •è½","can_delete":false,"product_type":"c1","uid":1116864,"ip_address":"","ucode":"15F6AA41EE556F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0a/c0/401c240e.jpg","comment_is_top":false,"comment_ctime":1564574790,"is_pvip":false,"replies":[{"id":"43877","content":"è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­è¢«è°ƒç”¨çš„","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1564628424,"ip_address":"","comment_id":119374,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564574790","product_id":100029201,"comment_content":"æˆ‘çœ‹åˆ°è€å¸ˆå›ç­”çš„onsend å’ŒonAcknowledgementæ˜¯ç”Ÿäº§è€…è¿›ç¨‹ä¸‹çš„ä¸åŒçº¿ç¨‹  æ—¢ç„¶éƒ½æ˜¯å­çº¿ç¨‹ ä¸ºå•¥åˆç‰¹æ„æåˆ°onAcknowledgementè¿™ä¸ªæ–¹æ³•åˆå¤„åœ¨å‘é€çš„ä¸»è·¯å¾„ä¸­ éš¾é“æ˜¯æºç ä¸­å¯¹è¿™ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨æœ‰åŒºåˆ«ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460874,"discussion_content":"è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­è¢«è°ƒç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564628424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112036,"user_name":"é£ä¸­èŠ±","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1562657857,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562657857","product_id":100029201,"comment_content":"åˆçœ‹äº†ä¸€æ¬¡ï¼ ","like_count":0},{"had_liked":false,"id":110178,"user_name":"October","can_delete":false,"product_type":"c1","uid":1137879,"ip_address":"","ucode":"CEDA78F4A5F8B1","user_header":"https://static001.geekbang.org/account/avatar/00/11/5c/d7/e4673fde.jpg","comment_is_top":false,"comment_ctime":1562204272,"is_pvip":false,"replies":[{"id":"40145","content":"ç±»ä¼¼äºåŸ‹ç‚¹çš„é€»è¾‘ã€‚å¯ä»¥åœ¨æ¶ˆæ¯å¤„ç†ï¼ˆå‘é€æˆ–æ¶ˆè´¹ï¼‰çš„ å„ä¸ªç¯èŠ‚åŸ‹ä¸€äº›ä½ åœ¨æ„çš„ç»Ÿè®¡é€»è¾‘è¿›å»","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562286620,"ip_address":"","comment_id":110178,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562204272","product_id":100029201,"comment_content":"è¯·é—®è€å¸ˆï¼Œkafka Interceptorå¯ä»¥å¯¹å®¢æˆ·ç«¯åšå“ªäº›ç›‘æ§ï¼Ÿå¯ä»¥ä¸¾ä¸ªä¾‹å­å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456761,"discussion_content":"ç±»ä¼¼äºåŸ‹ç‚¹çš„é€»è¾‘ã€‚å¯ä»¥åœ¨æ¶ˆæ¯å¤„ç†ï¼ˆå‘é€æˆ–æ¶ˆè´¹ï¼‰çš„ å„ä¸ªç¯èŠ‚åŸ‹ä¸€äº›ä½ åœ¨æ„çš„ç»Ÿè®¡é€»è¾‘è¿›å»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562286620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109877,"user_name":"mellow","can_delete":false,"product_type":"c1","uid":1257852,"ip_address":"","ucode":"C44F0A588263C6","user_header":"https://static001.geekbang.org/account/avatar/00/13/31/7c/14df0dbf.jpg","comment_is_top":false,"comment_ctime":1562124189,"is_pvip":false,"replies":[{"id":"39798","content":"ä¸æ”¯æŒ","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1562132303,"ip_address":"","comment_id":109877,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1562124189","product_id":100029201,"comment_content":"æ‹¦ æˆª å™¨å¯ä»¥æ”¯æŒåœ¨æœåŠ¡ç«¯bokerå—","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456619,"discussion_content":"ä¸æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562132303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":109020,"user_name":"é£ä¸­èŠ±","can_delete":false,"product_type":"c1","uid":1085237,"ip_address":"","ucode":"067E0A1E116844","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/35/f1839bb2.jpg","comment_is_top":false,"comment_ctime":1561949629,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561949629","product_id":100029201,"comment_content":"çœ‹å®Œäº†ï¼Œæ‰“ä¸ªå¡ï¼ è¿™ä¸ªä¸œè¥¿è®¾è®¡æ€æƒ³å…¶å®ä¸å°‘å˜æˆè¯­è¨€éƒ½æœ‰ï¼Œæ€æƒ³è¿˜æ˜¯å¥½ç†è§£ï¼Œä½†æ˜¯å…·ä½“åˆ°ä¸€äº›ç‰¹å®šåº”ç”¨åœºåˆæ˜¯åº”è¯¥å¥½å¥½å“å‘³ä¸€ç•ªï¼å…ˆè£…kafka ,æ¥å®æˆ˜ä¸‹ï¼å“‡å’”å’”","like_count":0},{"had_liked":false,"id":109016,"user_name":"æ°¸å…‰","can_delete":false,"product_type":"c1","uid":1102702,"ip_address":"","ucode":"0C54531ABED1B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/d3/6e/281b85aa.jpg","comment_is_top":false,"comment_ctime":1561949213,"is_pvip":false,"replies":[{"id":"39462","content":"è¦çœ‹ä½ çš„æ‹¦æˆªå™¨é€»è¾‘æ˜¯æ€ä¹ˆæ ·çš„äº†ã€‚é€šå¸¸ä¸ä¼šæœ‰å¤ªå¤§å½±å“ï¼Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"huxi_2b","uid":"1288090","ctime":1561952042,"ip_address":"","comment_id":109016,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1561949213","product_id":100029201,"comment_content":"æ‹¦    æˆª   å™¨ ä¼šå¯¹Tpsäº§ç”Ÿå½±å“ï¼Œæ€æ ·æƒè¡¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1288090,"avatar":"https://static001.geekbang.org/account/avatar/00/13/a7/9a/495cb99a.jpg","nickname":"èƒ¡å¤•","note":"","ucode":"5709A689B6683B","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":456212,"discussion_content":"è¦çœ‹ä½ çš„æ‹¦æˆªå™¨é€»è¾‘æ˜¯æ€ä¹ˆæ ·çš„äº†ã€‚é€šå¸¸ä¸ä¼šæœ‰å¤ªå¤§å½±å“ï¼Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561952042,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108432,"user_name":"æ˜ç¿¼","can_delete":false,"product_type":"c1","uid":1068361,"ip_address":"","ucode":"E77F86BEB3D5C1","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/49/28e73b9c.jpg","comment_is_top":false,"comment_ctime":1561771648,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561771648","product_id":100029201,"comment_content":"æ²¡è¯•éªŒï¼Œæˆ‘è§‰å¾—æ˜¯ä¼šç»§ç»­ï¼ŒåŸå› æ˜¯æ‹¦ æˆªå™¨æ˜¯é“¾å¼å®ç°çš„ï¼Œå¦‚æœè¿™ä¸ªæ‹¦  æˆªå™¨ä¸¢äº†ï¼Œåç»­çš„å¦‚ä½•è°ƒç”¨é‚£ï¼Ÿ","like_count":0}]}