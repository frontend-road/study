{"id":78920,"title":"17 | ç½‘ç»œä¼˜åŒ–ï¼ˆä¸‹ï¼‰ï¼šå¤§æ•°æ®ä¸‹ç½‘ç»œè¯¥å¦‚ä½•ç›‘æ§ï¼Ÿ","content":"<p>é€šè¿‡ä¸Šä¸€æœŸçš„å­¦ä¹ ï¼Œæˆ‘ä»¬å¯¹å¦‚ä½•æ‰“é€ ä¸€ä¸ªé«˜è´¨é‡çš„ç½‘ç»œå·²ç»æœ‰äº†ä¸€ä¸ªæ•´ä½“çš„è®¤è¯†ã€‚ä½†æ˜¯è¿™å°±è¶³å¤Ÿäº†å—ï¼Ÿå›æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªç½‘ç»œè¯·æ±‚ä»æ‰‹æœºåˆ°åå°æœåŠ¡å™¨ï¼Œä¼šæ¶‰åŠåŸºç«™ã€å…‰çº¤ã€è·¯ç”±å™¨è¿™äº›ç¡¬ä»¶è®¾æ–½ï¼Œä¹Ÿä¼šè·Ÿè¿è¥å•†å’ŒæœåŠ¡å™¨æœºæˆ¿æœ‰å…³ã€‚</p><p>ä¸è®ºæ˜¯åŸºç«™æ•…éšœã€å…‰çº¤è¢«æŒ–æ–­ã€è¿è¥å•†æŒŸæŒï¼Œè¿˜æ˜¯æˆ‘ä»¬çš„æœºæˆ¿ã€CDNæœåŠ¡å•†å‡ºç°æ•…éšœï¼Œéƒ½æœ‰å¯èƒ½ä¼šå¼•èµ·ç”¨æˆ·ç½‘ç»œå‡ºç°é—®é¢˜ã€‚ä½ æœ‰æ²¡æœ‰æ„Ÿè§‰çº¿ä¸Šç»å¸¸çªå‘å„ç§åƒå¥‡ç™¾æ€ªçš„ç½‘ç»œé—®é¢˜ï¼Œå¾ˆå¤šå…¬å¸çš„è¿ç»´äººå‘˜æ¯å¤©è¿‡å¾—èƒ†æˆ˜å¿ƒæƒŠã€ç–²äºå¥”å‘½ã€‚</p><p>â€œå–„è‰¯â€çš„æ•…éšœè¿‡äº†ä¸€æ®µæ—¶é—´ä¹‹åè«åå…¶å¦™å°±å¥½äº†ï¼Œâ€œé¡½å›ºâ€çš„æ•…éšœéš¾ä»¥å®šä½ä¹Ÿéš¾ä»¥è§£å†³ã€‚è¿™äº›æ•…éšœç©¶ç«Ÿæ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿä¸ºä»€ä¹ˆçªç„¶å°±æ¢å¤äº†ï¼Ÿå®ƒä»¬å½±å“äº†å¤šå°‘ç”¨æˆ·ã€å“ªäº›ç”¨æˆ·ï¼Ÿæƒ³è¦è§£å†³è¿™äº›é—®é¢˜ç¦»ä¸å¼€é«˜è´¨é‡çš„ç½‘ç»œï¼Œè€Œé«˜è´¨é‡çš„ç½‘ç»œåˆç¦»ä¸å¼€å¼ºå¤§çš„ç›‘æ§ã€‚ä»Šå¤©æˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹çœ‹ç½‘ç»œè¯¥å¦‚ä½•ç›‘æ§å§ã€‚</p><h2>ç§»åŠ¨ç«¯ç›‘æ§</h2><p>å¯¹äºç§»åŠ¨ç«¯æ¥è¯´ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰å„ç§å„æ ·çš„ç½‘ç»œè¯·æ±‚ã€‚å³ä½¿ä½¿ç”¨äº†OkHttpç½‘ç»œåº“ï¼Œä¹Ÿå¯èƒ½ä¼šæœ‰ä¸€äº›å¼€å‘äººå‘˜æˆ–è€…ç¬¬ä¸‰æ–¹ç»„ä»¶ä½¿ç”¨äº†ç³»ç»Ÿçš„ç½‘ç»œåº“ã€‚é‚£åº”è¯¥å¦‚ä½•ç»Ÿä¸€çš„ç›‘æ§å®¢æˆ·ç«¯çš„æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚å‘¢ï¼Ÿ</p><p><strong>1. å¦‚ä½•ç›‘æ§ç½‘ç»œ</strong></p><p><strong>ç¬¬ä¸€ç§æ–¹æ³•ï¼šæ’æ¡©ã€‚</strong></p><p>ä¸ºäº†å…¼å®¹æ€§è€ƒè™‘ï¼Œæˆ‘é¦–å…ˆæƒ³åˆ°çš„è¿˜æ˜¯æ’æ¡©ã€‚360å¼€æºçš„æ€§èƒ½ç›‘æ§å·¥å…·<a href=\"https://github.com/Qihoo360/ArgusAPM\">ArgusAPM</a>å°±æ˜¯åˆ©ç”¨Aspectåˆ‡æ¢æ’æ¡©ï¼Œå®ç°ç›‘æ§ç³»ç»Ÿå’ŒOkHttpç½‘ç»œåº“çš„è¯·æ±‚ã€‚</p><!-- [[[read_end]]] --><p>ç³»ç»Ÿç½‘ç»œåº“çš„æ’æ¡©å®ç°å¯ä»¥å‚è€ƒ<a href=\"https://github.com/Qihoo360/ArgusAPM/blob/bc03d63c65019cd3ffe2cbef9533c9228b3f2381/argus-apm/argus-apm-aop/src/main/java/com/argusapm/android/aop/TraceNetTrafficMonitor.java\">TraceNetTrafficMonitor</a>ï¼Œä¸»è¦åˆ©ç”¨<a href=\"http://www.shouce.ren/api/spring2.5/ch06s02.html\">Aspect</a>çš„åˆ‡é¢åŠŸèƒ½ï¼Œå…³äºOkHttpçš„æ‹¦æˆªå¯ä»¥å‚è€ƒ<a href=\"https://github.com/Qihoo360/ArgusAPM/blob/bc03d63c65019cd3ffe2cbef9533c9228b3f2381/argus-apm/argus-apm-okhttp/src/main/java/com/argusapm/android/okhttp3/OkHttp3Aspect.java\">OkHttp3Aspect</a>ï¼Œå®ƒä¼šæ›´åŠ ç®€å•ä¸€äº›ï¼Œå› ä¸ºOkHttpæœ¬èº«å°±æœ‰ä»£ç†æœºåˆ¶ã€‚</p><pre><code>@Pointcut(&quot;call(public okhttp3.OkHttpClient build())&quot;)\npublic void build() {\n}\n\n@Around(&quot;build()&quot;)\npublic Object aroundBuild(ProceedingJoinPoint joinPoint) throws Throwable {\n    Object target = joinPoint.getTarget();\n    if (target instanceof OkHttpClient.Builder &amp;&amp;    Client.isTaskRunning(ApmTask.TASK_NET)) {\n        OkHttpClient.Builder builder = (OkHttpClient.Builder) target;\n        builder.addInterceptor(new NetWorkInterceptor());\n    }\n    return joinPoint.proceed();\n}\n</code></pre><p>æ’æ¡©çš„æ–¹æ³•çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†æ˜¯å¹¶ä¸å…¨é¢ã€‚å¦‚æœä½¿ç”¨çš„ä¸æ˜¯ç³»ç»Ÿå’ŒOkHttpç½‘ç»œåº“ï¼Œåˆæˆ–è€…ä½¿ç”¨äº†Nativeä»£ç çš„ç½‘ç»œè¯·æ±‚ï¼Œéƒ½æ— æ³•ç›‘æ§åˆ°ã€‚</p><p><strong>ç¬¬äºŒç§æ–¹æ³•ï¼šNative Hookã€‚</strong></p><p>è·ŸI/Oç›‘æ§ä¸€æ ·ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æƒ³åˆ°äº†å¼ºå¤§çš„Native Hookã€‚ç½‘ç»œç›¸å…³çš„æˆ‘ä»¬ä¸€èˆ¬ä¼šHookä¸‹é¢å‡ ä¸ªæ–¹æ³• ï¼š</p><ul>\n<li>\n<p>è¿æ¥ç›¸å…³ï¼šconnectã€‚</p>\n</li>\n<li>\n<p>å‘é€æ•°æ®ç›¸å…³ï¼šsendå’Œsendtoã€‚</p>\n</li>\n<li>\n<p>æ¥æ”¶æ•°æ®ç›¸å…³ï¼šrecvå’Œrecvfromã€‚</p>\n</li>\n</ul><p>Androidåœ¨ä¸åŒç‰ˆæœ¬Socketçš„é€»è¾‘ä¼šæœ‰é‚£ä¹ˆä¸€äº›å·®å¼‚ï¼Œä»¥Android 7.0ä¸ºä¾‹ï¼ŒSocketå»ºè¿çš„å †æ ˆå¦‚ä¸‹ï¼š</p><pre><code>java.net.PlainSocketImpl.socketConnect(Native Method)\njava.net.AbstractPlainSocketImpl.doConnect\njava.net.AbstractPlainSocketImpl.connectToAddress\njava.net.AbstractPlainSocketImpl.connect\njava.net.SocksSocketImpl.connect\njava.net.Socket.connect\ncom.android.okhttp.internal.Platform.connectSocket\ncom.android.okhttp.Connection.connectSocket\ncom.android.okhttp.Connection.connect\n</code></pre><p>â€œsocketConnectâ€æ–¹æ³•å¯¹åº”çš„Nativeæ–¹æ³•å®šä¹‰åœ¨<a href=\"http://androidxref.com/7.0.0_r1/xref/libcore/ojluni/src/main/native/PlainSocketImpl.c\">PlainSocketImpl.c</a>ï¼ŒæŸ¥çœ‹<a href=\"http://androidxref.com/7.0.0_r1/xref/libcore/ojluni/src/main/native/openjdksub.mk\">makefile</a>å¯ä»¥çŸ¥é“å®ƒä»¬ä¼šç¼–è¯‘åœ¨libopenjdk.soä¸­ã€‚ä¸è¿‡åœ¨Android 8.0ï¼Œæ•´ä¸ªè°ƒç”¨æµç¨‹åˆå®Œå…¨æ”¹å˜äº†ã€‚ä¸ºäº†å…¼å®¹æ€§è€ƒè™‘ï¼Œæˆ‘ä»¬ç›´æ¥PLT Hookå†…å­˜çš„æ‰€æœ‰soï¼Œä½†æ˜¯éœ€è¦æ’é™¤æ‰Socketå‡½æ•°æœ¬èº«æ‰€åœ¨çš„libc.soã€‚</p><pre><code>hook_plt_method_all_lib(&quot;libc.so&quot;, &quot;connect&quot;, (hook_func) &amp;create_hook);\nhook_plt_method_all_lib(&quot;libc.so, &quot;send&quot;, (hook_func) &amp;send_hook);\nhook_plt_method_all_lib(&quot;libc.so&quot;, &quot;recvfrom&quot;, (hook_func) &amp;recvfrom_hook);\n...\n</code></pre><p>è¿™ç§åšæ³•ä¸å¥½çš„åœ°æ–¹åœ¨äºä¼šæŠŠç³»ç»Ÿçš„Local Socketä¹ŸåŒæ—¶æ¥ç®¡äº†ï¼Œéœ€è¦åœ¨ä»£ç ä¸­å¢åŠ è¿‡æ»¤æ¡ä»¶ã€‚åœ¨ä»Šå¤©çš„Sampleä¸­ï¼Œæˆ‘ç»™ä½ æä¾›äº†ä¸€å¥—ç®€å•çš„å®ç°ã€‚å…¶å®æ— è®ºæ˜¯å“ªä¸€ç§Hookï¼Œå¦‚æœç†Ÿç»ƒæŒæ¡ä¹‹åä½ ä¼šå‘ç°å®ƒå¹¶ä¸å›°éš¾ã€‚æˆ‘ä»¬éœ€è¦è€å¿ƒåœ°å¯»æ‰¾ï¼Œæ¢³ç†æ¸…æ¥šæ•´ä¸ªè°ƒç”¨æµç¨‹ã€‚</p><p><strong>ç¬¬ä¸‰ç§æ–¹æ³•ï¼šç»Ÿä¸€ç½‘ç»œåº“ã€‚</strong></p><p>å°½ç®¡æ‹¿åˆ°äº†æ‰€æœ‰çš„ç½‘ç»œè°ƒç”¨ï¼Œæƒ³æƒ³ä¼šæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯å‘¢ï¼Ÿæ¨¡æ‹Ÿç½‘ç»œæ•°æ®ã€ç»Ÿè®¡åº”ç”¨æµé‡ï¼Œæˆ–è€…æ˜¯å•ç‹¬ä»£ç†WebViewçš„ç½‘ç»œè¯·æ±‚ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7c/4c/7cecaa1134f078228598d9b3beec6b4c.png?wh=1652*852\" alt=\"\"></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¸ä¼šéå¸¸å…³å¿ƒç¬¬ä¸‰æ–¹çš„ç½‘ç»œè¯·æ±‚æƒ…å†µï¼Œè€Œå¯¹äºæˆ‘ä»¬åº”ç”¨è‡ªèº«çš„ç½‘ç»œè¯·æ±‚ï¼Œæœ€å¥½çš„ç›‘æ§æ–¹æ³•è¿˜æ˜¯ç»Ÿä¸€ç½‘ç»œåº“ã€‚<strong>ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡æ’æ¡©å’ŒHookè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œç›‘æ§åº”ç”¨ä¸­æœ‰å“ªäº›åœ°æ–¹ä½¿ç”¨äº†å…¶ä»–çš„ç½‘ç»œåº“ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„ç»Ÿä¸€ç½‘ç»œåº“ã€‚</strong></p><p>åœ¨ä¸Šä¸€æœŸå†…å®¹ä¸­ï¼Œæˆ‘è¯´è¿‡â€œç½‘ç»œè´¨é‡ç›‘æ§â€åº”è¯¥æ˜¯å®¢æˆ·ç«¯ç½‘ç»œåº“ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„æ¨¡å—ï¼Œå®ƒä¹Ÿä¼šè·Ÿå¤§ç½‘ç»œå¹³å°çš„æ¥å…¥æœåŠ¡å…±åŒåä½œã€‚é€šè¿‡ç»Ÿä¸€ç½‘ç»œåº“çš„æ–¹å¼ï¼Œçš„ç¡®æ— æ³•ç›‘æ§åˆ°ç¬¬ä¸‰æ–¹çš„ç½‘ç»œè¯·æ±‚ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼æ‹¿åˆ°åº”ç”¨çš„æ•´ä½“æµé‡ä½¿ç”¨æƒ…å†µï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ã€‚</p><p><strong>2. å¦‚ä½•ç›‘æ§æµé‡</strong></p><p>åº”ç”¨æµé‡ç›‘æ§çš„æ–¹æ³•éå¸¸ç®€å•ï¼Œä¸€èˆ¬é€šè¿‡TrafficStatsç±»ã€‚TrafficStateæ˜¯Android API 8åŠ å…¥çš„æ¥å£ï¼Œç”¨äºè·å–æ•´ä¸ªæ‰‹æœºæˆ–è€…æŸä¸ªUIDä»å¼€æœºç®—èµ·çš„ç½‘ç»œæµé‡ã€‚è‡³äºå¦‚ä½•ä½¿ç”¨ï¼Œä½ å¯ä»¥å‚è€ƒFacebookä¸€ä¸ªå†å²æ¯”è¾ƒä¹…è¿œçš„å¼€æºåº“<a href=\"https://github.com/facebook/network-connection-class\">network-connection-class</a>ã€‚</p><pre><code>getMobileRxBytes()        //ä»å¼€æœºå¼€å§‹Mobileç½‘ç»œæ¥æ”¶çš„å­—èŠ‚æ€»æ•°ï¼Œä¸åŒ…æ‹¬Wifi\ngetTotalRxBytes()         //ä»å¼€æœºå¼€å§‹æ‰€æœ‰ç½‘ç»œæ¥æ”¶çš„å­—èŠ‚æ€»æ•°ï¼ŒåŒ…æ‹¬Wifi\ngetMobileTxBytes()        //ä»å¼€æœºå¼€å§‹Mobileç½‘ç»œå‘é€çš„å­—èŠ‚æ€»æ•°ï¼Œä¸åŒ…æ‹¬Wifi\ngetTotalTxBytes()         //ä»å¼€æœºå¼€å§‹æ‰€æœ‰ç½‘ç»œå‘é€çš„å­—èŠ‚æ€»æ•°ï¼ŒåŒ…æ‹¬Wifi\n</code></pre><p>å®ƒçš„å®ç°åŸç†å…¶å®ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨Linuxå†…æ ¸çš„ç»Ÿè®¡æ¥å£ã€‚å…·ä½“æ¥è¯´ï¼Œæ˜¯ä¸‹é¢ä¸¤ä¸ªprocæ¥å£ã€‚</p><pre><code>// statsæ¥å£æä¾›å„ä¸ªuidåœ¨å„ä¸ªç½‘ç»œæ¥å£ï¼ˆwlan0, ppp0ç­‰ï¼‰çš„æµé‡ä¿¡æ¯\n/proc/net/xt_qtaguid/stats\n// iface_stat_fmtæ¥å£æä¾›å„ä¸ªæ¥å£çš„æ±‡æ€»æµé‡ä¿¡æ¯\nproc/net/xt_qtaguid/iface_stat_fmt\n</code></pre><p>TrafficStatsçš„å·¥ä½œåŸç†æ˜¯è¯»å–procï¼Œå¹¶å°†ç›®æ ‡UIDä¸‹é¢æ‰€æœ‰ç½‘ç»œæ¥å£çš„æµé‡ç›¸åŠ ã€‚ä½†å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨TrafficStatsæ¥å£ï¼Œè€Œæ˜¯è‡ªå·±è§£æprocæ–‡ä»¶å‘¢ï¼Ÿé‚£æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸åŒç½‘ç»œæ¥å£ä¸‹çš„æµé‡ï¼Œä»è€Œè®¡ç®—å‡ºWiFiã€2G/3G/4Gã€VPNã€çƒ­ç‚¹å…±äº«ã€WiFi P2Pç­‰ä¸åŒç½‘ç»œçŠ¶æ€ä¸‹çš„æµé‡ã€‚</p><p>ä¸è¿‡éå¸¸é—æ†¾çš„æ˜¯ï¼ŒAndroid 7.0ä¹‹åç³»ç»Ÿå·²ç»ä¸è®©æˆ‘ä»¬ç›´æ¥å»è¯»å–statsæ–‡ä»¶ï¼Œé˜²æ­¢å¼€å‘è€…å¯ä»¥æ‹¿åˆ°å…¶ä»–åº”ç”¨çš„æµé‡ä¿¡æ¯ï¼Œå› æ­¤åªèƒ½é€šè¿‡TrafficStatsæ‹¿åˆ°è‡ªå·±åº”ç”¨çš„æµé‡ä¿¡æ¯ã€‚</p><p>é™¤äº†æµé‡ä¿¡æ¯ï¼Œé€šè¿‡/proc/netæˆ‘ä»¬è¿˜å¯ä»¥æ‹¿åˆ°å¤§é‡ç½‘ç»œç›¸å…³çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç½‘ç»œä¿¡å·å¼ºåº¦ã€ç”µå¹³å¼ºåº¦ç­‰ã€‚Androidæ‰‹æœºè·ŸiPhoneéƒ½æœ‰ä¸€ä¸ªç½‘ç»œæµ‹è¯•æ¨¡å¼ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚</p><ul>\n<li>\n<p>iPhoneï¼šæ‰“å¼€æ‹¨å·ç•Œé¢ï¼Œè¾“å…¥â€œ*3001#12345#*â€ï¼Œç„¶åæŒ‰æ‹¨å·é”®ã€‚</p>\n</li>\n<li>\n<p>Androidæ‰‹æœºï¼šæ‰“å¼€æ‹¨å·ç•Œé¢ï¼Œè¾“å…¥â€œ*#*#4636#*#*â€ï¼Œç„¶åæŒ‰æ‹¨å·é”®ï¼ˆå¯è¿›å…¥å·¥ç¨‹æµ‹è¯•æ¨¡å¼ï¼Œéƒ¨åˆ†ç‰ˆæœ¬å¯èƒ½ä¸æ”¯æŒï¼‰ã€‚</p>\n</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/e6/59/e64bb9e4012132286b787483c01b5959.png?wh=1090*848\" alt=\"\"></p><p>ä¸ºä»€ä¹ˆç³»ç»Ÿå¯ä»¥åˆ¤æ–­æ­¤æ—¶çš„WiFiâ€œå·²è¿æ¥ï¼Œä½†æ— æ³•è®¿é—®äº’è”ç½‘â€ï¼Ÿå›æƒ³ä¸€ä¸‹ä¸“æ ç¬¬15æœŸæˆ‘ç»™ä½ ç•™çš„è¯¾åä½œä¸šï¼š</p><blockquote>\n<p>iPhoneçš„æ— çº¿ç½‘ç»œåŠ©ç†ã€å°ç±³å’Œä¸€åŠ çš„è‡ªé€‚åº”WLANå®ƒä»¬åœ¨æ£€æµ‹WiFiä¸ç¨³å®šæ—¶ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ç§»åŠ¨ç½‘ç»œã€‚é‚£è¯·ä½ æ€è€ƒä¸€ä¸‹ï¼Œå®ƒä»¬æ˜¯å¦‚ä½•å®ç°ä¾¦æµ‹ï¼Œå¦‚ä½•åŒºåˆ†æ˜¯åº”ç”¨åå°æœåŠ¡å™¨å‡ºé—®é¢˜è¿˜æ˜¯WiFiæœ¬èº«æœ‰é—®é¢˜å‘¢ï¼Ÿ</p>\n</blockquote><p>æˆ‘çœ‹äº†ä¸€ä¸‹åŒå­¦ä»¬çš„å›å¤ï¼Œå¤§éƒ¨åˆ†åŒå­¦è®¤ä¸ºéœ€è¦è®¿é—®ä¸€ä¸ªå…¬ç½‘IPçš„æ–¹å¼ã€‚å…¶å®å¯¹äºæ‰‹æœºå‚å•†æ¥è¯´æ ¹æ®ä¸éœ€è¦ï¼Œå®ƒåœ¨åº•å±‚å¯ä»¥æ‹¿åˆ°çš„ä¿¡æ¯æœ‰å¾ˆå¤šã€‚</p><ul>\n<li>\n<p>ç½‘å¡é©±åŠ¨å±‚ä¿¡æ¯ã€‚å¦‚å°„é¢‘å‚æ•°ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­WiFiçš„ä¿¡å·å¼ºåº¦ï¼›ç½‘å¡æ•°æ®åŒ…é˜Ÿåˆ—é•¿åº¦ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­ç½‘ç»œæ˜¯å¦æ‹¥å¡ã€‚</p>\n</li>\n<li>\n<p>åè®®æ ˆä¿¡æ¯ã€‚ä¸»è¦æ˜¯è·å–æ•°æ®åŒ…å‘é€ã€æ¥æ”¶ã€æ—¶å»¶å’Œä¸¢åŒ…ç­‰ä¿¡æ¯ã€‚</p>\n</li>\n</ul><p>å¦‚æœä¸€ä¸ªWiFiå‘é€è¿‡æ•°æ®åŒ…ï¼Œä½†æ˜¯æ²¡æœ‰æ”¶åˆ°ä»»ä½•çš„ACKå›åŒ…ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥åˆæ­¥åˆ¤æ–­å½“å‰çš„WiFiæ˜¯æœ‰é—®é¢˜çš„ã€‚è¿™æ ·ç³»ç»Ÿå¯ä»¥çŸ¥é“å½“å‰WiFiå¤§æ¦‚ç‡æ˜¯æœ‰é—®é¢˜çš„ï¼Œå®ƒå¹¶ä¸å…³å¿ƒæ˜¯ä¸æ˜¯å› ä¸ºæˆ‘ä»¬åå°æœåŠ¡å™¨å‡ºé—®é¢˜å¯¼è‡´çš„ã€‚</p><h2>å¤§ç½‘ç»œå¹³å°ç›‘æ§</h2><p>å‰é¢æˆ‘è®²äº†ä¸€äº›åº”ç”¨ç½‘ç»œè¯·æ±‚å’Œæµé‡çš„ç›‘æ§æ–¹æ³•ï¼Œä½†æ˜¯è¿˜æ²¡çœŸæ­£å›ç­”åº”è¯¥å¦‚ä½•å»æ‰“é€ ä¸€å¥—å¼ºå¤§çš„ç½‘ç»œç›‘æ§ä½“ç³»ã€‚è·Ÿç½‘ç»œä¼˜åŒ–ä¸€æ ·ï¼Œç½‘ç»œç›‘æ§ä¸æ˜¯å®¢æˆ·ç«¯å¯ä»¥å•ç‹¬å®Œæˆçš„ï¼Œå®ƒä¹Ÿæ˜¯æ•´ä¸ªå¤§ç½‘ç»œå¹³å°çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p><p>ä¸è¿‡é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨å®¢è§‚ä¸Šæ‰¿è®¤è¿™ä»¶äº‹æƒ…åšèµ·æ¥å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºç½‘ç»œé—®é¢˜ä¼šå­˜åœ¨ä¸‹é¢è¿™äº›ç‰¹ç‚¹ï¼š</p><ul>\n<li>\n<p>å®æ—¶æ€§ã€‚éƒ¨åˆ†ç½‘ç»œé—®é¢˜è¿‡æ—¶ä¸å€™ï¼Œå¯èƒ½å¾ˆå¿«å°±ä¸¢å¤±ç°åœºã€‚</p>\n</li>\n<li>\n<p>å¤æ‚æ€§ã€‚å¯èƒ½è·Ÿå›½å®¶ã€åœ°åŒºã€è¿è¥å•†ã€ç‰ˆæœ¬ã€ç³»ç»Ÿã€æœºå‹ã€CDNéƒ½æœ‰å…³ï¼Œä¸ä»…ç»´åº¦å¤šï¼Œæ•°æ®é‡ä¹Ÿå·¨å¤§ã€‚</p>\n</li>\n<li>\n<p>é“¾è·¯é•¿ã€‚æ•´ä¸ªè¯·æ±‚é“¾æ¡éå¸¸é•¿ï¼Œå®¢æˆ·ç«¯æ•…éšœã€ç½‘é“¾éšœç»œã€æœåŠ¡æ•…éšœéƒ½æœ‰å¯èƒ½ã€‚</p>\n</li>\n</ul><p>å› æ­¤æ‰€è°“çš„ç½‘ç»œç›‘æ§ï¼Œå¹¶ä¸èƒ½ä¿è¯å¯ä»¥æ˜ç¡®æ‰¾åˆ°æ•…éšœçš„åŸå› ã€‚è€Œæˆ‘ä»¬ç›®æ ‡æ˜¯å¸Œæœ›å¿«é€Ÿå‘ç°é—®é¢˜ï¼Œå°½å¯èƒ½æ‹¿åˆ°æ›´å¤šçš„è¾…åŠ©ä¿¡æ¯ï¼ŒååŠ©æˆ‘ä»¬æ›´å®¹æ˜“åœ°æ’æŸ¥é—®é¢˜ã€‚</p><p>ä¸‹é¢æˆ‘åˆ†åˆ«ä»å®¢æˆ·ç«¯ä¸æ¥å…¥å±‚çš„è§’åº¦å‡ºå‘ï¼Œä¸€èµ·æ¥çœ‹çœ‹å“ªäº›ä¿¡æ¯å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å‘ç°é—®é¢˜å’Œè§£å†³é—®é¢˜ã€‚</p><p><strong>1. å®¢æˆ·ç«¯ç›‘æ§</strong></p><p>å®¢æˆ·ç«¯çš„ç›‘æ§ä½¿ç”¨ç»Ÿç½‘ç»œåº“çš„æ–¹å¼ï¼Œä½ å¯ä»¥æƒ³æƒ³æˆ‘ä»¬éœ€è¦å…³å¿ƒå“ªäº›å†…å®¹ï¼š</p><ul>\n<li>\n<p>æ—¶å»¶ã€‚ä¸€èˆ¬æˆ‘ä»¬æ¯”è¾ƒå…³å¿ƒæ¯æ¬¡è¯·æ±‚çš„DNSæ—¶é—´ã€å»ºè¿æ—¶é—´ã€é¦–åŒ…æ—¶é—´ã€æ€»æ—¶é—´ç­‰ï¼Œä¼šæœ‰ç±»ä¼¼1ç§’å¿«å¼€ç‡ã€2ç§’å¿«å¼€ç‡è¿™äº›æŒ‡æ ‡ã€‚</p>\n</li>\n<li>\n<p>ç»´åº¦ã€‚ç½‘ç»œç±»å‹ã€å›½å®¶ã€çœä»½ã€åŸå¸‚ã€è¿è¥å•†ã€ç³»ç»Ÿã€å®¢æˆ·ç«¯ç‰ˆæœ¬ã€æœºå‹ã€è¯·æ±‚åŸŸåç­‰ï¼Œè¿™äº›ç»´åº¦ä¸»è¦ç”¨äºåˆ†æé—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>é”™è¯¯ã€‚DNSå¤±è´¥ã€è¿æ¥å¤±è´¥ã€è¶…æ—¶ã€è¿”å›é”™è¯¯ç ç­‰ï¼Œä¼šæœ‰DNSå¤±è´¥ç‡ã€è¿æ¥å¤±è´¥ç‡ã€ç½‘ç»œè®¿é—®çš„å¤±è´¥ç‡è¿™äº›æŒ‡æ ‡ã€‚</p>\n</li>\n</ul><p>é€šè¿‡è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ±‡æ€»å‡ºåº”ç”¨çš„ç½‘ç»œè®¿é—®å¤§å›¾ã€‚ä¾‹å¦‚åœ¨å›½å†…æ— è®ºæˆ‘ä»¬å»åˆ°å“ªé‡Œéƒ½ä¼šé—®æœ‰æ²¡æœ‰WiFiï¼ŒWiFiçš„å æ¯”ä¼šè¶…è¿‡50%ã€‚è¿™å…¶å®è¿œè¿œæ¯”æµ·å¤–é«˜ï¼Œåœ¨å°åº¦WiFiçš„å æ¯”ä»…ä»…åªæœ‰15%å·¦å³ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/62/e1/62926bf186ce0c4898419aa549ce77e1.png?wh=1920*601\" alt=\"\"></p><p>åŒæ ·çš„æˆ‘ä»¬åˆ†ç‰ˆæœ¬ã€åˆ†å›½å®¶ã€åˆ†è¿è¥å•†ã€åˆ†åŸŸåç­‰å„ç§å„æ ·çš„ç»´åº¦ï¼Œæ¥ç›‘æ§æˆ‘ä»¬çš„æ—¶å»¶å’Œé”™è¯¯è¿™äº›è®¿é—®æŒ‡æ ‡ã€‚</p><p>ç”±äºç»´åº¦å¤ªå¤šï¼Œæ¯ä¸ªç»´åº¦çš„å–å€¼èŒƒå›´ä¹Ÿå¾ˆå¹¿ï¼Œå¦‚æœæ˜¯å®æ—¶è®¡ç®—æ•´ä¸ªæ•°æ®é‡ä¼šéå¸¸éå¸¸å¤§ã€‚å¯¹äºå®¢æˆ·ç«¯çš„ä¸ŠæŠ¥æ•°æ®ï¼Œå¾®ä¿¡å¯ä»¥åšåˆ°åˆ†é’Ÿçº§åˆ«çš„ç›‘æ§æŠ¥è­¦ã€‚ä¸è¿‡ä¸ºäº†è¿ç®—ç®€å•æˆ‘ä»¬ä¼šæŠ›å¼ƒUVï¼Œåªè®¡ç®—æ¯ä¸€åˆ†é’Ÿéƒ¨åˆ†ç»´åº¦çš„PVã€‚</p><p><strong>2. æ¥å…¥å±‚ç›‘æ§</strong></p><p>å®¢æˆ·ç«¯ç›‘æ§çš„æ•°æ®ä¼šæ¯”æ¥å…¥å±‚æ›´åŠ ä¸°å¯Œï¼Œå› ä¸ºæœ‰å¯èƒ½ä¼šå‡ºç°éƒ¨åˆ†æ•°æ®è¿˜æ²¡åˆ°è¾¾æ¥å…¥å±‚å°±å·²ç»è¢«æ‰“å›ï¼Œä¾‹å¦‚è¿è¥å•†åŠ«æŒçš„æƒ…å†µã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/13/f3/133c91b1f38a8a8dc23fff33475b13f3.png?wh=1920*684\" alt=\"\"></p><p>ä½†æ˜¯æ¥å…¥å±‚çš„æ•°æ®ç›‘æ§è¿˜æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œä¸»è¦çš„åŸå› æ˜¯ï¼š</p><ul>\n<li>\n<p>å®æ—¶æ€§ã€‚å®¢æˆ·ç«¯å¦‚æœä½¿ç”¨ç§’çº§çš„å®æ—¶ä¸ŠæŠ¥ï¼Œå¯¹ç”¨æˆ·æ€§èƒ½å½±å“ä¼šæ¯”è¾ƒå¤§ã€‚æœåŠ¡ç«¯å°±ä¸ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¾ˆå®¹æ˜“å¯ä»¥åšåˆ°ç§’çº§çš„ç›‘æ§ã€‚</p>\n</li>\n<li>\n<p>å¯é æ€§ã€‚å¦‚æœå‡ºç°æŸäº›ç½‘ç»œé—®é¢˜ï¼Œå®¢æˆ·ç«¯çš„æ•°æ®ä¸ŠæŠ¥é€šé“å¯èƒ½ä¹Ÿä¼šå—åˆ°å½±å“ï¼Œå®¢æˆ·ç«¯çš„æ•°æ®ä¸å®Œå…¨å¯é ã€‚</p>\n</li>\n</ul><p>é‚£æ¥å…¥å±‚åº”è¯¥å…³å¿ƒå“ªäº›æ•°æ®å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šæ¯”è¾ƒå…³å¿ƒæœåŠ¡çš„å…¥å£å’Œå‡ºå£æµé‡ã€æœåŠ¡ç«¯çš„å¤„ç†æ—¶å»¶ã€é”™è¯¯ç‡ç­‰ã€‚</p><p><strong>3. ç›‘æ§æŠ¥è­¦</strong></p><p>æ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æ¥å…¥å±‚çš„ç›‘æ§ï¼Œå®ƒä»¬éƒ½æ˜¯åˆ†å±‚çš„ã€‚</p><ul>\n<li>\n<p>å®æ—¶ç›‘æ§ã€‚ç§’çº§æˆ–è€…åˆ†é’Ÿçº§åˆ«çš„å®æ—¶ç›‘æ§çš„ä¿¡æ¯ä¼šç›¸æ¯”å°‘ä¸€äº›ï¼Œä¾‹å¦‚åªæœ‰è®¿é—®é‡ï¼ˆPVï¼‰ã€é”™è¯¯ç‡ï¼Œæ²¡æœ‰å»æ‹†åˆ†å‡ ç™¾ä¸ªä¸Šåƒä¸ªç»´åº¦ï¼Œä¹Ÿæ²¡æœ‰ç‹¬ç«‹è®¿é—®ç”¨æˆ·æ•°ï¼ˆUVï¼‰ï¼Œå®æ—¶ç›‘æ§çš„ç›®çš„æ˜¯æœ€å¿«é€Ÿåº¦å‘ç°é—®é¢˜ã€‚</p>\n</li>\n<li>\n<p>ç¦»çº¿ç›‘æ§ã€‚å°æ—¶æˆ–è€…å¤©çº§åˆ«çš„ç›‘æ§æˆ‘ä»¬å¯ä»¥æ‹“å±•å‡ºå…¨éƒ¨çš„ç»´åº¦æ¥åšç›‘æ§ï¼Œå®ƒçš„ç›®çš„æ˜¯åœ¨ç›‘æ§çš„åŒæ—¶ï¼Œå¯ä»¥æ›´å¥½åœ°åœˆå‡ºé—®é¢˜çš„èŒƒå›´ã€‚</p>\n</li>\n</ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•æ ¹æ®å®¢æˆ·ç«¯ã€å›½å®¶ä»¥åŠè¿è¥å•†ç»´åº¦åˆ†æçš„ç¤ºä¾‹ã€‚å½“ç„¶æ›´å¤šçš„æ—¶å€™æ˜¯æŸä¸€ä¸ªæœåŠ¡å‡ºç°é—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™é€šè¿‡åˆ†åŸŸåæˆ–è€…é”™è¯¯ç å°±å¯ä»¥å¾ˆå®¹æ˜“çš„æ‰¾åˆ°åŸå› ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/54/86/54901a205444cce26ff1cfb6c802ac86.png?wh=1252*410\" alt=\"\"></p><p>é‚£åœ¨ç›‘æ§çš„åŒæ—¶å¦‚ä½•å®ç°å‡†ç¡®çš„è‡ªåŠ¨åŒ–æŠ¥è­¦å‘¢ï¼Ÿè¿™åŒæ ·ä¹Ÿæ˜¯ä¸šç•Œçš„ä¸€ä¸ªéš¾é¢˜ï¼Œå®ƒçš„éš¾åº¦åœ¨äºå¦‚æœè§„åˆ™è¿‡äºè‹›åˆ»ï¼Œå¯èƒ½ä¼šå‡ºç°æ¼æŠ¥ï¼›å¦‚æœè¿‡äºå®½æ¾ï¼Œå¯èƒ½ä¼šå‡ºç°å¤ªå¤šçš„è¯¯æŠ¥ã€‚</p><p>ä¸šç•Œä¸€èˆ¬å­˜åœ¨ä¸¤ç§æŠ¥è­¦çš„ç®—æ³•ï¼Œä¸€å¥—æ˜¯åŸºäºè§„åˆ™ï¼Œä¾‹å¦‚å¤±è´¥ç‡ä¸å†å²æ•°æ®ç›¸æ¯”æš´æ¶¨ã€æµé‡æš´è·Œç­‰ã€‚å¦ä¸€ç§æ˜¯åŸºäºæ—¶é—´åºåˆ—ç®—æ³•æˆ–è€…ç¥ç»ç½‘ç»œçš„æ™ºèƒ½åŒ–æŠ¥è­¦ï¼Œä½¿ç”¨è€…ä¸éœ€è¦å½•å…¥ä»»ä½•è§„åˆ™ï¼Œåªéœ€æœ‰è¶³å¤Ÿé•¿çš„å†å²æ•°æ®ï¼Œå°±å¯ä»¥å®ç°è‡ªåŠ¨æŠ¥è­¦ã€‚æ™ºèƒ½åŒ–æŠ¥è­¦ç›®å‰å‡†ç¡®æ€§ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œåœ¨æ™ºèƒ½åŒ–åŸºç¡€ä¸Šé¢æ·»åŠ å°‘é‡è§„åˆ™å¯èƒ½ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ”¶åˆ°ä¸€ä¸ªçº¿ä¸Šçš„ç½‘ç»œæŠ¥è­¦ï¼Œé€šè¿‡æ¥å…¥å±‚å’Œå®¢æˆ·ç«¯çš„ç›‘æ§æŠ¥è¡¨ï¼Œä¹Ÿä¼šæœ‰äº†ä¸€ä¸ªå¤§è‡´çš„åˆ¤æ–­ã€‚é‚£æ€ä¹ˆæ ·æ‰èƒ½ç¡®å®šé—®é¢˜çš„æœ€ç»ˆåŸå› ï¼Ÿæˆ‘ä»¬æ˜¯å¦å¯ä»¥æ‹¿åˆ°ç”¨æˆ·å®Œæ•´çš„ç½‘ç»œæ—¥å¿—ï¼Ÿç”šè‡³è¿œç¨‹åœ°è¯Šæ–­ç”¨æˆ·çš„ç½‘ç»œæƒ…å†µï¼Ÿå…³äºâ€œç½‘ç»œæ—¥å¿—å’Œè¿œç¨‹è¯Šæ–­ï¼Œå¦‚ä½•å¿«é€Ÿå®šä½ç½‘ç»œé—®é¢˜â€ï¼Œæˆ‘ä¼šæŠŠå®ƒå•ç‹¬æˆç¯‡æ”¾åœ¨ä¸“æ ç¬¬äºŒæ¨¡å—é‡Œï¼Œå†æ¥è®²è®²è¿™ä¸ªè¯é¢˜ã€‚</p><h2>æ€»ç»“</h2><p>ç›‘æ§ã€ç›‘æ§åˆæ˜¯ç›‘æ§ï¼Œå¾ˆå¤šæ€§èƒ½ä¼˜åŒ–å·¥ä½œå…¶å®éƒ½æ˜¯â€œä¸‰åˆ†é ä¼˜åŒ–ï¼Œä¸ƒåˆ†é ç›‘æ§â€ã€‚</p><p>ä¸ºä»€ä¹ˆç›‘æ§è¿™ä¹ˆé‡è¦å‘¢ï¼Ÿå¯¹äºå¤§å…¬å¸æ¥è¯´ï¼Œæ¯ä¸€ä¸ªé¡¹ç›®å‚ä¸äººå‘˜å¯èƒ½æˆç™¾ä¸Šåƒäººã€‚å¹¶ä¸”å¤§å…¬å¸è¦çš„ä¸æ˜¯ä»Šå¤©æˆ–è€…è¿™ä¸ªç‰ˆæœ¬å¯ä»¥åšå¥½ä¸€äº›äº‹æƒ…ï¼Œè€Œæ˜¯å¸Œæœ›ä¿è¯æ¯å¤©æ¯ä¸ªç‰ˆæœ¬éƒ½èƒ½æŒç»­ä¿æŒåº”ç”¨çš„é«˜è´¨é‡ã€‚å¦ä¸€æ–¹é¢æœ‰äº†å®Œå–„çš„åˆ†æå’Œç›‘æ§çš„å¹³å°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¤æ‚çš„äº‹æƒ…ç®€å•åŒ–ï¼ŒæŠŠä¸€äº›çœ‹èµ·æ¥â€œé«˜ä¸å¯æ”€â€çš„ä¼˜åŒ–å·¥ä½œï¼Œå˜æˆäººäººéƒ½å¯ä»¥åšã€‚</p><p>æœ€åå¤šè°ˆä¸¤å¥æˆ‘çš„æ„Ÿå—ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œçš„æ—¶å€™ï¼Œå¸Œæœ›ä½ å¯ä»¥çœ‹å¾—æ›´è¿œï¼Œä»æ›´é«˜çš„è§’åº¦å»æ€è€ƒé—®é¢˜ã€‚å¤šæƒ³æƒ³å¦‚æœæˆ‘èƒ½åšå¥½è¿™ä»¶äº‹æƒ…ï¼Œæ€ä¹ˆä¿è¯å…¶ä»–äººä¸ä¼šçŠ¯é”™ï¼Œæˆ–è€…è®©æ‰€æœ‰äººéƒ½å¯ä»¥åšå¾—æ›´å¥½ã€‚</p><h2>è¯¾åä½œä¸š</h2><p>å¯¹äºç½‘ç»œé—®é¢˜ï¼Œä½ å°è¯•è¿‡å“ªäº›ç›‘æ§æ–¹æ³•ï¼Ÿæœ‰æ²¡æœ‰ä»¤ä½ å°è±¡æ·±åˆ»çš„ç½‘ç»œæ•…éšœï¼Œæœ€ç»ˆåˆæ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼è§£å†³çš„å‘¢ï¼Ÿæ¬¢è¿ç•™è¨€è·Ÿæˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚</p><p>ä»Šå¤©æˆ‘ä»¬ç»ƒä¹ çš„<a href=\"https://github.com/AndroidAdvanceWithGeektime/Chapter17\">Sample</a>æ˜¯é€šè¿‡PLT  Hookï¼Œä»£ç†Socketç›¸å…³çš„å‡ ä¸ªé‡è¦å‡½æ•°ï¼Œè¿™æ¬¡è¿˜å¢åŠ äº†ä¸€ä¸ªä¸€æ¬¡æ€§Hookæ‰€æœ‰å·²ç»åŠ è½½Libraryçš„æ–¹æ³•ã€‚</p><pre><code>int hook_plt_method_all_lib(const char* exclueLibname, const char* name, hook_func hook) {\n  if (refresh_shared_libs()) {\n    // Could not properly refresh the cache of shared library data\n    return -1;\n  }\n  int failures = 0;\n  for (auto const&amp; lib : allSharedLibs()) {\n      if (strcmp(lib.first.c_str(), exclueLibname) != 0) {\n        failures += hook_plt_method(lib.first.c_str(), name, hook);\n      }\n  }\n  return failures;\n}\n</code></pre><p>å¸Œæœ›ä½ é€šè¿‡è¿™å‡ æ¬¡è¯¾åç»ƒä¹ ï¼Œå¯ä»¥å­¦ä¼šå°†HookæŠ€æœ¯åº”ç”¨åˆ°å®è·µå½“ä¸­ã€‚</p><p>æ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™å¥½å‹ï¼Œé‚€è¯·ä»–ä¸€èµ·å­¦ä¹ ã€‚æœ€ååˆ«å¿˜äº†åœ¨è¯„è®ºåŒºæäº¤ä»Šå¤©çš„ä½œä¸šï¼Œæˆ‘ä¹Ÿä¸ºè®¤çœŸå®Œæˆä½œä¸šçš„åŒå­¦å‡†å¤‡äº†ä¸°åšçš„â€œå­¦ä¹ åŠ æ²¹ç¤¼åŒ…â€ï¼ŒæœŸå¾…ä¸ä½ ä¸€èµ·åˆ‡ç£‹è¿›æ­¥å“¦ã€‚</p><p></p>","neighbors":{"left":{"article_title":"16 | ç½‘ç»œä¼˜åŒ–ï¼ˆä¸­ï¼‰ï¼šå¤æ‚å¤šå˜çš„ç§»åŠ¨ç½‘ç»œè¯¥å¦‚ä½•ä¼˜åŒ–ï¼Ÿ","id":78585},"right":{"article_title":"18 | è€—ç”µä¼˜åŒ–ï¼ˆä¸Šï¼‰ï¼šä»ç”µé‡ä¼˜åŒ–çš„æ¼”è¿›çœ‹è€—ç”µåˆ†æ","id":79642}},"comments":[{"had_liked":false,"id":63506,"user_name":"zzb226520","can_delete":false,"product_type":"c1","uid":1102323,"ip_address":"","ucode":"70D9BE21E55FD8","user_header":"","comment_is_top":false,"comment_ctime":1548386397,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"27318190173","product_id":100021101,"comment_content":"åœ¨okhttpä¸­ç»Ÿè®¡å»ºç«‹è¿æ¥è€—æ—¶ï¼ŒSSLæ¡æ‰‹è€—æ—¶ï¼Œç„¶åä¸ºäº†ç¡®å®šç»Ÿè®¡æ­£ç¡®ï¼Œç”¨äº†ç”µè„‘ä¸Šwiresharkè¿›è¡Œå­ç›¸åº”è¿‡ç¨‹çš„è€—æ—¶æ¯”è¾ƒã€‚<br><br>å‘ç°ï¼Œokhttpä¸­çš„æ–¹æ³•è€—æ—¶æ¯”wiresharkç»Ÿè®¡çš„è€—æ—¶å¤§å¾ˆå¤šï¼Œæ¯”å¦‚okhttpä¸­å¯¹SSLæ¡æ‰‹æ–¹æ³•socket.startHandSharke()çš„è€—æ—¶å¯èƒ½180msï¼Œä½†æ˜¯wireshakæ˜¾ç¤ºè¿™ä¸€æ­¥åªæœ‰40-50msã€‚<br><br>æœ‰äººåšè¿‡ç±»ä¼¼ç»Ÿè®¡å—ï¼Ÿä¸ºä»€ä¹ˆè·Ÿç”µè„‘æŠ“åŒ…å¯¹æ¯”è€—æ—¶ç»Ÿè®¡æ•°æ®ä¼šå·®è¿™ä¹ˆå¤šï¼Ÿéš¾é“startHandSharke()ä¸åªåšæ˜¯SSLçš„æ¡æ‰‹çš„äº‹ï¼Œè¿˜æœ‰åˆ«çš„äº‹åœ¨è€—æ—¶ï¼Ÿ<br>","like_count":6,"discussions":[{"author":{"id":1136636,"avatar":"https://static001.geekbang.org/account/avatar/00/11/57/fc/cefe6fc8.jpg","nickname":"ä¸€åªèƒ–Waç‰›","note":"","ucode":"914C828A41EEEE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":286978,"discussion_content":"ä¸åŒç‰ˆæœ¬å®ç°ä¸ä¸€æ ·ï¼Œåè®®æ”¯æŒåŠå¯†é’¥ç»„ä»¶éƒ½ä¸ä¸€æ ·çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593339871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63416,"user_name":"csdpz","can_delete":false,"product_type":"c1","uid":1043243,"ip_address":"","ucode":"E3F9325059165F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLlyJ6ricobic7OdzAUNkbNpdadtZ87ILUyibpcOb3eRicuHPrzLzefza7fdYS2iaBLseccsqeib8WLeKOg/132","comment_is_top":false,"comment_ctime":1548347784,"is_pvip":false,"replies":[{"id":"23117","content":"å¼±ç½‘ç»œçš„æ—¶å€™ä¼šå°½é‡ä¿è¯ä¿¡ä»¤ç½‘ç»œæœ‰å¯èƒ½æˆåŠŸ","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1549103046,"ip_address":"","comment_id":63416,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14433249672","product_id":100021101,"comment_content":"æˆ‘å¸çš„appåœ¨2018å¹´æœ‰ä¸€é˜µå­æœ‰ç”¨æˆ·æŒç»­åé¦ˆç½‘ç»œå¡é¡¿ã€‚ç»ˆäºèŠ±äº†ç‚¹åŠ›æ°”å®Œå–„äº†ç›‘æ§ã€‚å› ä¸ºä¸»è¦æ˜¯åé¦ˆçš„socketé‚£å—çš„ä¸šåŠ¡ï¼Œæ‰€ä»¥å¯¹socketè¯·æ±‚æ”¶å‘æµç¨‹åˆ†ä¸º7ä¸ªé˜¶æ®µè¿›è¡Œäº†ç›‘æ§ï¼Œåˆ†åˆ«æ˜¯ï¼šè¯·æ±‚è°ƒç”¨ï¼Œè¯·æ±‚å…¥é˜Ÿåˆ—ï¼Œè¯·æ±‚å¼€å§‹å‘é€ï¼Œè¯·æ±‚å‘é€æˆåŠŸï¼Œæ”¶åˆ°å“åº”ï¼Œå“åº”å…¥é˜Ÿåˆ—ï¼Œå“åº”æ•°æ®è§£æåˆ†å‘ã€‚<br><br>å½“ç„¶é™¤äº†å®¢æˆ·ç«¯ç›‘æ§æ•°æ®å¤–ï¼Œè¿˜å’ŒæœåŠ¡å™¨æ•°æ®æ•´åˆäº†ï¼Œèƒ½æ›´åŠ å‡†ç¡®çœ‹åˆ°å¡é¡¿çš„å æ¯”ã€‚<br><br>å®¢æˆ·ç«¯ç”¨çš„æ˜¯ç”Ÿäº§è€…æ¶ˆè´¹è€…åŠ é˜»å¡é˜Ÿåˆ—çš„æ¨¡å¼ã€‚é‡åˆ°äº†Tcpé˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚ä¸€æ—¦è¿›ä¸ªç”µæ¢¯æˆ–è€…åœ°ä¸‹å®¤ï¼Œå‡ºç°äº†å¼±ç½‘æƒ…å†µï¼Œè¯·æ±‚å¼€å§‹å‘é€å’Œè¯·æ±‚å‘é€æˆåŠŸçš„æ—¶é—´å·®å°±ä¼šæ€¥å‰§æ”¾å¤§ï¼Œè€Œè¿™ä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´ä»…ä»…åªæœ‰ä¸€è¡Œout.write(data)ã€‚å‰é¢ä¸€ä¸ªæ²¡å‘å®Œï¼Œé˜Ÿåˆ—é‡Œçš„éƒ½è¢«å µä½äº†ã€‚<br><br>åæ¥ï¼Œå‡†å¤‡å°è¯•Nioçš„æ–¹å¼ï¼ŒæŠŠè¯·æ±‚å‘é€çš„æ—¶é—´ç»™å‹ä¸‹å»ï¼Œä½†åæ¥æƒ³æƒ³æ•°æ®å¥½çœ‹äº†ï¼Œå¹¶ä¸è§£å†³å®é™…é—®é¢˜ï¼Œå‘ä¸å‡ºå»è¿˜æ˜¯å‘ä¸å‡ºå»ï¼Œäºæ˜¯ä½œç½¢ã€‚<br><br>ä¹Ÿæƒ³é—®é—®å„ä½å¤§ä½¬ï¼Œæœ‰æ²¡æœ‰å¥½çš„å»ºè®®ï¼Ÿ<br><br><br>","like_count":3,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437576,"discussion_content":"å¼±ç½‘ç»œçš„æ—¶å€™ä¼šå°½é‡ä¿è¯ä¿¡ä»¤ç½‘ç»œæœ‰å¯èƒ½æˆåŠŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549103046,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119655,"user_name":"Jerryé“¶é“¶","can_delete":false,"product_type":"c1","uid":1008404,"ip_address":"","ucode":"80DA1172A2360A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg","comment_is_top":false,"comment_ctime":1564647280,"is_pvip":false,"replies":[{"id":"62064","content":"ä¸€èˆ¬éƒ½æ˜¯ä¸€äº›å¤§å…¬å¸çš„å‡ºå“æ¯”è¾ƒæœ‰ä¿éšœä¸€äº›","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1576680818,"ip_address":"","comment_id":119655,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10154581872","product_id":100021101,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹äºå¤§å…¬å¸ï¼Œå¯ä»¥è‡ªå·±æä¸ªç›‘æ§ç³»ç»Ÿã€‚å¯æ˜¯å¯¹äºä¸­å°å‹çš„å…¬å¸ï¼Œè‡ªå·±æç›‘æ§ç³»ç»Ÿï¼Œåº”è¯¥ä¸å¤ªç°å®ï¼Œ æ¯•ç«Ÿæˆæœ¬å·¨å¤§ã€‚   ç„¶åï¼Œæˆ‘ä»¬å°±æƒ³ç€ï¼Œæ¥å…¥ä¸€äº›ç¬¬ä¸‰æ–¹çš„ç›‘æ§å¹³å°ã€‚ ä¸çŸ¥é“ï¼Œä½ è¿™è¾¹æœ‰æ¨èçš„ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460999,"discussion_content":"ä¸€èˆ¬éƒ½æ˜¯ä¸€äº›å¤§å…¬å¸çš„å‡ºå“æ¯”è¾ƒæœ‰ä¿éšœä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576680818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117409,"user_name":"EchoSomeTH","can_delete":false,"product_type":"c1","uid":1602634,"ip_address":"","ucode":"E73F13BF09695F","user_header":"https://static001.geekbang.org/account/avatar/00/18/74/4a/2dd9d62a.jpg","comment_is_top":false,"comment_ctime":1564042350,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10153976942","product_id":100021101,"comment_content":"è¿™ä¸ªHookçœŸæ£’ï¼è°ƒç”¨æ ˆï¼Œç½‘ç»œè¯·çš„ç›¸å…³å‚æ•°éƒ½ALOGå‡ºæ¥äº†","like_count":2},{"had_liked":false,"id":105964,"user_name":"Yjnull","can_delete":false,"product_type":"c1","uid":1003938,"ip_address":"","ucode":"89735E49167A60","user_header":"https://static001.geekbang.org/account/avatar/00/0f/51/a2/04adbfbb.jpg","comment_is_top":false,"comment_ctime":1561116065,"is_pvip":false,"replies":[{"id":"62044","content":"ç½‘ç»œè¯Šæ–­ä¸€èˆ¬ä¼šåšå‡ ä¸ªäº‹æƒ…ï¼š<br>1. è¿é€šæ€§è¯Šæ–­ï¼Œåˆ†åˆ«æ˜¯è¿æ¥çš„æ¯ä¸€ä¸ªæ­¥éª¤<br>2. é—®é¢˜è¯Šæ–­ï¼Œç±»ä¼¼pingï¼Œtracerouteç­‰æ“ä½œ","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1576679207,"ip_address":"","comment_id":105964,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5856083361","product_id":100021101,"comment_content":"æƒ³è¯·é—®ç½‘ç»œè¯Šæ–­æ˜¯æ€æ ·å»åšï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå…³é”®è¯æˆ‘å»æœç´¢ä¸‹ğŸ˜¢","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454891,"discussion_content":"ç½‘ç»œè¯Šæ–­ä¸€èˆ¬ä¼šåšå‡ ä¸ªäº‹æƒ…ï¼š\n1. è¿é€šæ€§è¯Šæ–­ï¼Œåˆ†åˆ«æ˜¯è¿æ¥çš„æ¯ä¸€ä¸ªæ­¥éª¤\n2. é—®é¢˜è¯Šæ–­ï¼Œç±»ä¼¼pingï¼Œtracerouteç­‰æ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576679207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":68637,"user_name":"å¥šå²©","can_delete":false,"product_type":"c1","uid":1107769,"ip_address":"","ucode":"E7D3A56216EE47","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/39/b47b1bc0.jpg","comment_is_top":false,"comment_ctime":1550563961,"is_pvip":false,"replies":[{"id":"30700","content":"ç½‘ç»œç›‘æ§æˆ‘ä»¬ä¼šæœ‰å…¨é“¾è·¯çš„ç›‘æ§ï¼Œä»è¯·æ±‚å‘èµ·çš„æ•´ä¸ªè¿‡ç¨‹ã€‚å…·ä½“çš„æŒ‡æ ‡å¯ä»¥æœ‰ç±»ä¼¼ç§’å¼€ç‡ï¼Œè¶…æ—¶ç‡è¿™äº›","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1555137787,"ip_address":"","comment_id":68637,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5845531257","product_id":100021101,"comment_content":"å…¬å¸å†…ç½‘æœåŠ¡ç”¨çš„è´­ä¹°çš„ https åœ¨ä½¿ç”¨è¿™äº›æœåŠ¡æ—¶ç»å¸¸ä¼šå‡ºç° timeoutï¼Œä½†æ˜¯æ­£å¼ç¯å¢ƒä¸ä¼šï¼Œè¿™ç§å¦‚ä½•æ¥ç›‘æ§è§£å†³ã€‚ ","like_count":1,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439770,"discussion_content":"ç½‘ç»œç›‘æ§æˆ‘ä»¬ä¼šæœ‰å…¨é“¾è·¯çš„ç›‘æ§ï¼Œä»è¯·æ±‚å‘èµ·çš„æ•´ä¸ªè¿‡ç¨‹ã€‚å…·ä½“çš„æŒ‡æ ‡å¯ä»¥æœ‰ç±»ä¼¼ç§’å¼€ç‡ï¼Œè¶…æ—¶ç‡è¿™äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555137787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64115,"user_name":"æ’","can_delete":false,"product_type":"c1","uid":1136165,"ip_address":"","ucode":"BCB3636424DEBA","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/25/ba0e44af.jpg","comment_is_top":false,"comment_ctime":1548670338,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5843637634","product_id":100021101,"comment_content":"ç”±äºæœ€è¿‘è¿™å‡ å¹´éƒ½æ˜¯åœ¨åšè·Ÿç½‘ç»œç›¸å…³çš„å·¥ä½œï¼ŒåŸºæœ¬ä¸Šé‡åˆ°çš„é—®é¢˜ç»æ–‡è€å¸ˆéƒ½å·²ç»æåˆ°äº†ã€‚æ¯”å¦‚DNSåŠ«æŒï¼Œè¶…æ—¶ï¼ŒæœåŠ¡å™¨å®•æœºã€å‡ç½‘ã€ç™½åå•ç­‰ç½‘ç»œé—®é¢˜ã€‚å…¶ä¸­è®©æˆ‘å°è±¡æœ€ä¸ºæ·±åˆ»çš„æ˜¯å…¬å¸å†…éƒ¨çš„wifiä¸Šç½‘è®¤è¯ï¼Œæ²¡æœ‰é€šè¿‡è®¤è¯æ˜¯æ— æ³•è®¿é—®å†…ç½‘å’Œå¤–ç½‘ã€‚  æœ€åè§£å†³è¿™ç±»é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬ä¼šä¸»åŠ¨ç”¨æµè§ˆå™¨æ‰“å¼€è®¤è¯é¡µé¢è®©ç”¨æˆ·ç™»å½•ã€‚<br> ","like_count":1},{"had_liked":false,"id":63118,"user_name":"ç¨»å­","can_delete":false,"product_type":"c1","uid":1043887,"ip_address":"","ucode":"561C57D796368C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ed/af/4a43ac25.jpg","comment_is_top":false,"comment_ctime":1548262382,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5843229678","product_id":100021101,"comment_content":"ğŸ›‹","like_count":1},{"had_liked":false,"id":356139,"user_name":"å¾®å°˜","can_delete":false,"product_type":"c1","uid":1667439,"ip_address":"åŒ—äº¬","ucode":"F9CB2CEE9F19B9","user_header":"https://static001.geekbang.org/account/avatar/00/19/71/6f/07e1452a.jpg","comment_is_top":false,"comment_ctime":1662003974,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1662003974","product_id":100021101,"comment_content":"è¿‡äº†ä¸¤å¹´ demo æèµ·æ¥ï¼Œç”¨äº†åŠå¤©æ—¶é—´","like_count":0},{"had_liked":false,"id":63272,"user_name":"å“ˆç€æœ‹å‹","can_delete":false,"product_type":"c1","uid":1180872,"ip_address":"","ucode":"16BDDE3B75D327","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/c8/68263086.jpg","comment_is_top":false,"comment_ctime":1548315926,"is_pvip":false,"replies":[{"id":"22490","content":"æ²¡æœ‰å•Š","user_name":"ä½œè€…å›å¤","user_name_real":"å¼ ç»æ–‡","uid":"1009577","ctime":1548409771,"ip_address":"","comment_id":63272,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548315926","product_id":100021101,"comment_content":"è€å“¥æ˜¯ä¸æ˜¯å‚åŠ äº†Buglyé¡¹ç›®","like_count":0,"discussions":[{"author":{"id":1009577,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/a9/e251ace7.jpg","nickname":"å¼ ç»æ–‡","note":"","ucode":"94B49E5F80BFDE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437530,"discussion_content":"æ²¡æœ‰å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548409771,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63252,"user_name":"åšæŒè¿œæ–¹","can_delete":false,"product_type":"c1","uid":1148716,"ip_address":"","ucode":"17D2D4E38DCC3F","user_header":"https://static001.geekbang.org/account/avatar/00/11/87/2c/037d64a1.jpg","comment_is_top":false,"comment_ctime":1548311750,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548311750","product_id":100021101,"comment_content":"åˆ›ä¸šå…¬å¸æ•´å¤©å¿™äºåšä¸šåŠ¡ï¼Œå¯¹äºç›‘æ§è¿™äº›åšçš„è¿˜æ˜¯ä¸å¤Ÿï¼Œæ‰€ä»¥ç›®å‰Appå¹¶æ²¡æœ‰ç›‘æ§æ–¹é¢çš„ä¸œè¥¿ï¼Œä½†æ˜¯è·Ÿç€ä½œè€…çš„æ­¥éª¤è¿˜æ˜¯å­¦åˆ°äº†å¾ˆå¤š","like_count":0},{"had_liked":false,"id":63166,"user_name":"Owen","can_delete":false,"product_type":"c1","uid":1038637,"ip_address":"","ucode":"845584BC1CCF69","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d9/2d/ca99e374.jpg","comment_is_top":false,"comment_ctime":1548292601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548292601","product_id":100021101,"comment_content":"å¹²è´§å¤šå¤šï¼Œåœ¨è¿™é‡Œæƒ³äº†è§£ä¸‹å¤§å®¶éƒ½æœ‰ç”¨å“ªäº›ç½‘ç»œåº“ï¼Ÿ","like_count":0}]}