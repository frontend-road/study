{"id":213230,"title":"11 | MySQLå¦‚ä½•åº”å¯¹é«˜å¹¶å‘ï¼ˆä¸€ï¼‰ï¼šä½¿ç”¨ç¼“å­˜ä¿æŠ¤MySQL","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æç¥ã€‚</p><p>é€šè¿‡å‰é¢å‡ èŠ‚è¯¾çš„å­¦ä¹ ï¼Œç›¸ä¿¡ä½ å¯¹MySQLè¿™ç±»å…³ç³»å‹æ•°æ®åº“çš„èƒ½åŠ›ï¼Œå·²ç»æœ‰äº†å®šé‡çš„è®¤çŸ¥ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¤§éƒ¨åˆ†é¢å‘å…¬ä¼—ç”¨æˆ·çš„äº’è”ç½‘ç³»ç»Ÿï¼Œå®ƒçš„å¹¶å‘è¯·æ±‚æ•°é‡æ˜¯å’Œåœ¨çº¿ç”¨æˆ·æ•°é‡æ­£ç›¸å…³çš„ï¼Œè€ŒMySQLèƒ½æ‰¿æ‹…çš„å¹¶å‘è¯»å†™çš„é‡æ˜¯æœ‰ä¸Šé™çš„ï¼Œå½“ç³»ç»Ÿçš„åœ¨çº¿ç”¨æˆ·è¶…è¿‡å‡ ä¸‡åˆ°å‡ åä¸‡è¿™ä¸ªé‡çº§çš„æ—¶å€™ï¼Œå•å°MySQLå°±å¾ˆéš¾åº”ä»˜äº†ã€‚</p><p>ç»å¤§å¤šæ•°äº’è”ç½‘ç³»ç»Ÿï¼Œéƒ½ä½¿ç”¨MySQLåŠ ä¸ŠRedisè¿™å¯¹å„¿ç»å…¸çš„ç»„åˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚Redisä½œä¸ºMySQLçš„å‰ç½®ç¼“å­˜ï¼Œå¯ä»¥æ›¿MySQLæŒ¡ä½ç»å¤§éƒ¨åˆ†æŸ¥è¯¢è¯·æ±‚ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šç¼“è§£äº†MySQLå¹¶å‘è¯·æ±‚çš„å‹åŠ›ã€‚</p><p>Redisä¹‹æ‰€ä»¥èƒ½è¿™ä¹ˆæµè¡Œï¼Œéå¸¸é‡è¦çš„ä¸€ä¸ªåŸå› æ˜¯ï¼Œå®ƒçš„APIéå¸¸ç®€å•ï¼Œå‡ ä¹æ²¡æœ‰å¤ªå¤šçš„å­¦ä¹ æˆæœ¬ã€‚ä½†æ˜¯ï¼Œè¦æƒ³åœ¨ç”Ÿäº§ç³»ç»Ÿä¸­ç”¨å¥½Rediså’ŒMySQLè¿™å¯¹å„¿ç»å…¸ç»„åˆï¼Œå¹¶ä¸æ˜¯ä¸€ä»¶å¾ˆç®€å•çš„äº‹å„¿ã€‚æˆ‘åœ¨ã€Š<a href=\"https://time.geekbang.org/column/article/211008\">08 | ä¸€ä¸ªå‡ ä¹æ¯ä¸ªç³»ç»Ÿå¿…è¸©çš„å‘å„¿ï¼šè®¿é—®æ•°æ®åº“è¶…æ—¶</a>ã€‹ä¸¾çš„ç¤¾äº¤ç”µå•†æ•°æ®åº“è¶…æ—¶æ•…éšœçš„æ¡ˆä¾‹ï¼Œå…¶ä¸­ä¸€ä¸ªé‡è¦çš„åŸå› å°±æ˜¯ï¼Œå¯¹ç¼“å­˜ä½¿ç”¨ä¸å½“å¼•å‘äº†ç¼“å­˜ç©¿é€ï¼Œæœ€ç»ˆå¯¼è‡´æ•°æ®åº“è¢«å¤§é‡æŸ¥è¯¢è¯·æ±‚æ‰“æ­»ã€‚</p><p>ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±æ¥è¯´ä¸€ä¸‹ï¼Œåœ¨ç”µå•†çš„äº¤æ˜“ç±»ç³»ç»Ÿä¸­ï¼Œå¦‚ä½•æ­£ç¡®åœ°ä½¿ç”¨Redisè¿™æ ·çš„ç¼“å­˜ç³»ç»Ÿï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®åº”å¯¹ä½¿ç”¨ç¼“å­˜è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å¸¸è§çš„é—®é¢˜ã€‚</p><!-- [[[read_end]]] --><h2>æ›´æ–°ç¼“å­˜çš„æœ€ä½³æ–¹å¼</h2><p>è¦æ­£ç¡®åœ°ä½¿ç”¨å¥½ä»»ä½•ä¸€ä¸ªæ•°æ®åº“ï¼Œä½ éƒ½éœ€è¦å…ˆäº†è§£å®ƒçš„èƒ½åŠ›å’Œå¼±ç‚¹ï¼Œæ‰¬é•¿é¿çŸ­ã€‚Redisæ˜¯ä¸€ä¸ªä½¿ç”¨å†…å­˜ä¿å­˜æ•°æ®çš„é«˜æ€§èƒ½KVæ•°æ®åº“ï¼Œå®ƒçš„é«˜æ€§èƒ½ä¸»è¦æ¥è‡ªäºï¼š</p><ol>\n<li>ç®€å•çš„æ•°æ®ç»“æ„ï¼›</li>\n<li>ä½¿ç”¨å†…å­˜å­˜å‚¨æ•°æ®ã€‚</li>\n</ol><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬è®²åˆ°è¿‡ï¼Œæ•°æ®åº“å¯ä»¥åˆ†ä¸ºæ‰§è¡Œå™¨å’Œå­˜å‚¨å¼•æ“ä¸¤éƒ¨åˆ†ï¼ŒRedisçš„æ‰§è¡Œå™¨è¿™ä¸€å±‚éå¸¸çš„è–„ï¼Œæ‰€ä»¥Redisåªèƒ½æ”¯æŒæœ‰é™çš„å‡ ä¸ªAPIï¼Œå‡ ä¹æ²¡æœ‰èšåˆæŸ¥è¯¢çš„èƒ½åŠ›ï¼Œä¹Ÿä¸æ”¯æŒSQLã€‚å®ƒçš„å­˜å‚¨å¼•æ“ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥åœ¨å†…å­˜ä¸­ç”¨æœ€ç®€å•çš„æ•°æ®ç»“æ„æ¥ä¿å­˜æ•°æ®ï¼Œä½ ä»å®ƒçš„APIä¸­çš„æ•°æ®ç±»å‹åŸºæœ¬å°±å¯ä»¥çŒœå‡ºå­˜å‚¨å¼•æ“ä¸­æ•°æ®ç»“æ„ã€‚</p><p>æ¯”å¦‚ï¼ŒRedisçš„LISTåœ¨å­˜å‚¨å¼•æ“çš„å†…å­˜ä¸­çš„æ•°æ®ç»“æ„å°±æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚å†…å­˜æ˜¯ä¸€ç§æ˜“å¤±æ€§å­˜å‚¨ï¼Œæ‰€ä»¥ä½¿ç”¨å†…å­˜ä¿å­˜æ•°æ®çš„Redisä¸èƒ½ä¿è¯æ•°æ®å¯é å­˜å‚¨ã€‚ä»è®¾è®¡ä¸Šæ¥è¯´ï¼ŒRedisç‰ºç‰²äº†å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œç‰ºç‰²äº†æ•°æ®å¯é æ€§ï¼Œæ¢å–äº†é«˜æ€§èƒ½ã€‚ä½†ä¹Ÿæ­£æ˜¯è¿™äº›ç‰¹æ€§ï¼Œä½¿å¾—Redisç‰¹åˆ«é€‚åˆç”¨æ¥åšMySQLçš„å‰ç½®ç¼“å­˜ã€‚</p><p>è™½ç„¶è¯´ï¼ŒRedisæ”¯æŒå°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ï¼Œå¹¶ä¸”è¿˜æ”¯æŒä¸»ä»å¤åˆ¶ï¼Œä½†ä½ éœ€è¦çŸ¥é“ï¼Œ<strong>Redisä»ç„¶æ˜¯ä¸€ä¸ªä¸å¯é çš„å­˜å‚¨ï¼Œå®ƒåœ¨è®¾è®¡ä¸Šå¤©ç„¶å°±ä¸ä¿è¯æ•°æ®çš„å¯é æ€§</strong>ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬éƒ½ä½¿ç”¨Redisåšç¼“å­˜ï¼Œå¾ˆå°‘ä½¿ç”¨å®ƒä½œä¸ºå”¯ä¸€çš„æ•°æ®å­˜å‚¨ã€‚</p><p>å³ä½¿åªæ˜¯æŠŠRedisä½œä¸ºç¼“å­˜æ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡Redisç¼“å­˜çš„æ—¶å€™ï¼Œä¹Ÿå¿…é¡»è¦è€ƒè™‘Redisçš„è¿™ç§â€œæ•°æ®ä¸å¯é æ€§â€ï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬çš„ç¨‹åºåœ¨ä½¿ç”¨Redisçš„æ—¶å€™ï¼Œè¦èƒ½å…¼å®¹Redisä¸¢æ•°æ®çš„æƒ…å†µï¼Œåšåˆ°å³ä½¿Rediså‘ç”Ÿäº†ä¸¢æ•°æ®çš„æƒ…å†µï¼Œä¹Ÿä¸å½±å“ç³»ç»Ÿçš„æ•°æ®å‡†ç¡®æ€§ã€‚</p><p>æˆ‘ä»¬ä»ç„¶ç”¨ç”µå•†çš„è®¢å•ç³»ç»Ÿæ¥ä½œä¸ºä¾‹å­è¯´æ˜ä¸€ä¸‹ï¼Œå¦‚ä½•æ­£ç¡®åœ°ä½¿ç”¨Redisåšç¼“å­˜ã€‚åœ¨ç¼“å­˜MySQLçš„ä¸€å¼ è¡¨çš„æ—¶å€™ï¼Œé€šå¸¸ç›´æ¥é€‰ç”¨ä¸»é”®æ¥ä½œä¸ºRedisä¸­çš„Keyï¼Œæ¯”å¦‚ç¼“å­˜è®¢å•è¡¨ï¼Œé‚£å°±ç›´æ¥ç”¨è®¢å•è¡¨çš„ä¸»é”®è®¢å•å·æ¥ä½œä¸ºRedisä¸­çš„keyã€‚</p><p>å¦‚æœè¯´ï¼ŒRedisçš„å®ä¾‹ä¸æ˜¯ç»™è®¢å•è¡¨ä¸“ç”¨çš„ï¼Œè¿˜éœ€è¦ç»™è®¢å•çš„KeyåŠ ä¸€ä¸ªç»Ÿä¸€çš„å‰ç¼€ï¼Œæ¯”å¦‚â€œorders:888888â€ã€‚Valueç”¨æ¥ä¿å­˜åºåˆ—åŒ–åçš„æ•´æ¡è®¢å•è®°å½•ï¼Œä½ å¯ä»¥é€‰æ‹©å¯è¯»æ€§æ¯”è¾ƒå¥½çš„JSONä½œä¸ºåºåˆ—åŒ–æ–¹å¼ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ€§èƒ½æ›´å¥½å¹¶ä¸”æ›´èŠ‚çœå†…å­˜çš„äºŒè¿›åˆ¶åºåˆ—åŒ–æ–¹å¼ï¼Œéƒ½æ˜¯å¯ä»¥çš„ã€‚</p><p>ç„¶åæˆ‘ä»¬æ¥è¯´ï¼Œç¼“å­˜ä¸­çš„æ•°æ®è¦æ€ä¹ˆæ¥æ›´æ–°çš„é—®é¢˜ã€‚æˆ‘è§è¿‡å¾ˆå¤šåŒå­¦éƒ½æ˜¯è¿™ä¹ˆç”¨ç¼“å­˜çš„ï¼šåœ¨æŸ¥è¯¢è®¢å•æ•°æ®çš„æ—¶å€™ï¼Œå…ˆå»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œå¦‚æœå‘½ä¸­ç¼“å­˜é‚£å°±ç›´æ¥è¿”å›è®¢å•æ•°æ®ã€‚å¦‚æœæ²¡æœ‰å‘½ä¸­ï¼Œé‚£å°±å»æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œå¾—åˆ°æŸ¥è¯¢ç»“æœä¹‹åæŠŠè®¢å•æ•°æ®å†™å…¥ç¼“å­˜ï¼Œç„¶åè¿”å›ã€‚åœ¨æ›´æ–°è®¢å•æ•°æ®çš„æ—¶å€™ï¼Œå…ˆå»æ›´æ–°æ•°æ®åº“ä¸­çš„è®¢å•è¡¨ï¼Œå¦‚æœæ›´æ–°æˆåŠŸï¼Œå†å»æ›´æ–°ç¼“å­˜ä¸­çš„æ•°æ®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c7/5e/c76155eaf8c6ac1e231d9bfb0e22ba5e.png?wh=1142*422\" alt=\"\"></p><p>è¿™å…¶å®æ˜¯ä¸€ç§ç»å…¸çš„ç¼“å­˜æ›´æ–°ç­–ç•¥: <strong>Read/Write Through</strong>ã€‚è¿™æ ·ä½¿ç”¨ç¼“å­˜çš„æ–¹å¼æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿç»å¤§å¤šæ•°æƒ…å†µä¸‹å¯èƒ½éƒ½æ²¡é—®é¢˜ã€‚ä½†æ˜¯ï¼Œåœ¨å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæœ‰ä¸€å®šçš„æ¦‚ç‡ä¼šå‡ºç°â€œè„æ•°æ®â€é—®é¢˜ï¼Œç¼“å­˜ä¸­çš„æ•°æ®å¯èƒ½ä¼šè¢«é”™è¯¯åœ°æ›´æ–°æˆäº†æ—§æ•°æ®ã€‚</p><p>æ¯”å¦‚ï¼Œå¯¹åŒä¸€æ¡è®¢å•è®°å½•ï¼ŒåŒæ—¶äº§ç”Ÿäº†ä¸€ä¸ªè¯»è¯·æ±‚å’Œä¸€ä¸ªå†™è¯·æ±‚ï¼Œè¿™ä¸¤ä¸ªè¯·æ±‚è¢«åˆ†é…åˆ°ä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼Œè¯»çº¿ç¨‹å°è¯•è¯»ç¼“å­˜æ²¡å‘½ä¸­ï¼Œå»æ•°æ®åº“è¯»åˆ°äº†è®¢å•æ•°æ®ï¼Œè¿™æ—¶å€™å¯èƒ½å¦å¤–ä¸€ä¸ªè¯»çº¿ç¨‹æŠ¢å…ˆæ›´æ–°äº†ç¼“å­˜ï¼Œåœ¨å¤„ç†å†™è¯·æ±‚çš„çº¿ç¨‹ä¸­ï¼Œå…ˆåæ›´æ–°äº†æ•°æ®å’Œç¼“å­˜ï¼Œç„¶åï¼Œæ‹¿ç€è®¢å•æ—§æ•°æ®çš„ç¬¬ä¸€ä¸ªè¯»çº¿ç¨‹åˆæŠŠç¼“å­˜æ›´æ–°æˆäº†æ—§æ•°æ®ã€‚</p><p>è¿™æ˜¯ä¸€ç§æƒ…å†µï¼Œè¿˜æœ‰æ¯”å¦‚ä¸¤ä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªæ¡è®¢å•æ•°æ®å¹¶å‘å†™ï¼Œä¹Ÿæœ‰å¯èƒ½é€ æˆç¼“å­˜ä¸­çš„â€œè„æ•°æ®â€ï¼Œå…·ä½“æµç¨‹ç±»ä¼¼äºæˆ‘åœ¨ä¹‹å‰â€œ<a href=\"https://time.geekbang.org/column/article/204673\">å¦‚ä½•ä¿è¯è®¢å•æ•°æ®å‡†ç¡®æ— è¯¯ï¼Ÿ</a>â€è¿™èŠ‚è¯¾ä¸­è®²åˆ°çš„ABAé—®é¢˜ã€‚ä½ ä¸è¦è§‰å¾—å‘ç”Ÿè¿™ç§æƒ…å†µçš„æ¦‚ç‡æ¯”è¾ƒå°ï¼Œå‡ºç°â€œè„æ•°æ®â€çš„æ¦‚ç‡æ˜¯å’Œç³»ç»Ÿçš„æ•°æ®é‡ä»¥åŠå¹¶å‘æ•°é‡æ­£ç›¸å…³çš„ï¼Œå½“ç³»ç»Ÿçš„æ•°æ®é‡è¶³å¤Ÿå¤§å¹¶ä¸”å¹¶å‘è¶³å¤Ÿå¤šçš„æƒ…å†µä¸‹ï¼Œè¿™ç§è„æ•°æ®å‡ ä¹æ˜¯å¿…ç„¶ä¼šå‡ºç°çš„ã€‚</p><p>æˆ‘åœ¨â€œ<a href=\"https://time.geekbang.org/column/article/204688\">å•†å“ç³»ç»Ÿçš„å­˜å‚¨è¯¥å¦‚ä½•è®¾è®¡</a>â€è¿™èŠ‚è¯¾ä¸­ï¼Œåœ¨è®²è§£å¦‚ä½•ç¼“å­˜å•†å“æ•°æ®çš„æ—¶å€™ï¼Œæ›¾ç»ç®€å•æåˆ°è¿‡ç¼“å­˜ç­–ç•¥ã€‚å…¶ä¸­æåˆ°çš„Cache Asideæ¨¡å¼å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ä½¿ç”¨ç¼“å­˜çš„æœ€ä½³æ–¹å¼ã€‚</p><p>Cache Asideæ¨¡å¼å’Œä¸Šé¢çš„Read/Write Throughæ¨¡å¼éå¸¸åƒï¼Œå®ƒä»¬å¤„ç†è¯»è¯·æ±‚çš„é€»è¾‘æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œå”¯ä¸€çš„ä¸€ä¸ªå°å·®åˆ«å°±æ˜¯ï¼ŒCache Asideæ¨¡å¼åœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œå¹¶ä¸å»å°è¯•æ›´æ–°ç¼“å­˜ï¼Œè€Œæ˜¯å»åˆ é™¤ç¼“å­˜ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/0b/31/0b9c9cb74f017c632136280a63015931.png?wh=1142*161\" alt=\"\"></p><p>è®¢å•æœåŠ¡æ”¶åˆ°æ›´æ–°æ•°æ®è¯·æ±‚ä¹‹åï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå¦‚æœæ›´æ–°æˆåŠŸäº†ï¼Œå†å°è¯•å»åˆ é™¤ç¼“å­˜ä¸­è®¢å•ï¼Œå¦‚æœç¼“å­˜ä¸­å­˜åœ¨è¿™æ¡è®¢å•å°±åˆ é™¤å®ƒï¼Œå¦‚æœä¸å­˜åœ¨å°±ä»€ä¹ˆéƒ½ä¸åšï¼Œç„¶åè¿”å›æ›´æ–°æˆåŠŸã€‚è¿™æ¡æ›´æ–°åçš„è®¢å•æ•°æ®å°†åœ¨ä¸‹æ¬¡è¢«è®¿é—®çš„æ—¶å€™åŠ è½½åˆ°ç¼“å­˜ä¸­ã€‚ä½¿ç”¨Cache Asideæ¨¡å¼æ¥æ›´æ–°ç¼“å­˜ï¼Œå¯ä»¥éå¸¸æœ‰æ•ˆåœ°é¿å…å¹¶å‘è¯»å†™å¯¼è‡´çš„è„æ•°æ®é—®é¢˜ã€‚</p><h2>æ³¨æ„ç¼“å­˜ç©¿é€å¼•èµ·é›ªå´©</h2><p>å¦‚æœæˆ‘ä»¬çš„ç¼“å­˜å‘½ä¸­ç‡æ¯”è¾ƒä½ï¼Œå°±ä¼šå‡ºç°å¤§é‡â€œç¼“å­˜ç©¿é€â€çš„æƒ…å†µã€‚ç¼“å­˜ç©¿é€æŒ‡çš„æ˜¯ï¼Œåœ¨è¯»æ•°æ®çš„æ—¶å€™ï¼Œæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œè¯·æ±‚â€œç©¿é€â€äº†ç¼“å­˜ï¼Œç›´æ¥è®¿é—®åç«¯æ•°æ®åº“çš„æƒ…å†µã€‚</p><p>å°‘é‡çš„ç¼“å­˜ç©¿é€æ˜¯æ­£å¸¸çš„ï¼Œæˆ‘ä»¬éœ€è¦é¢„é˜²çš„æ˜¯ï¼ŒçŸ­æ—¶é—´å†…å¤§é‡çš„è¯·æ±‚æ— æ³•å‘½ä¸­ç¼“å­˜ï¼Œè¯·æ±‚ç©¿é€åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“ç¹å¿™ï¼Œè¯·æ±‚è¶…æ—¶ã€‚å¤§é‡çš„è¯·æ±‚è¶…æ—¶è¿˜ä¼šå¼•å‘æ›´å¤šçš„é‡è¯•è¯·æ±‚ï¼Œæ›´å¤šçš„é‡è¯•è¯·æ±‚è®©æ•°æ®åº“æ›´åŠ ç¹å¿™ï¼Œè¿™æ ·æ¶æ€§å¾ªç¯å¯¼è‡´ç³»ç»Ÿé›ªå´©ã€‚</p><p>å½“ç³»ç»Ÿåˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ¯”å¦‚è¯´ç³»ç»Ÿå‡çº§é‡å¯æˆ–è€…æ˜¯ç¼“å­˜åˆšä¸Šçº¿ï¼Œè¿™ä¸ªæ—¶å€™ç¼“å­˜æ˜¯ç©ºçš„ï¼Œå¦‚æœå¤§é‡çš„è¯·æ±‚ç›´æ¥æ‰“è¿‡æ¥ï¼Œå¾ˆå®¹æ˜“å¼•å‘å¤§é‡ç¼“å­˜ç©¿é€å¯¼è‡´é›ªå´©ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥é‡‡ç”¨ç°åº¦å‘å¸ƒçš„æ–¹å¼ï¼Œå…ˆæ¥å…¥å°‘é‡è¯·æ±‚ï¼Œå†é€æ­¥å¢åŠ ç³»ç»Ÿçš„è¯·æ±‚æ•°é‡ï¼Œç›´åˆ°å…¨éƒ¨è¯·æ±‚éƒ½åˆ‡æ¢å®Œæˆã€‚</p><p>å¦‚æœç³»ç»Ÿä¸èƒ½é‡‡ç”¨ç°åº¦å‘å¸ƒçš„æ–¹å¼ï¼Œé‚£å°±éœ€è¦åœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™å¯¹ç¼“å­˜è¿›è¡Œé¢„çƒ­ã€‚æ‰€è°“çš„ç¼“å­˜é¢„çƒ­å°±æ˜¯åœ¨ç³»ç»Ÿåˆå§‹åŒ–é˜¶æ®µï¼Œæ¥æ”¶å¤–éƒ¨è¯·æ±‚ä¹‹å‰ï¼Œå…ˆæŠŠæœ€ç»å¸¸è®¿é—®çš„æ•°æ®å¡«å……åˆ°ç¼“å­˜é‡Œé¢ï¼Œè¿™æ ·å¤§é‡è¯·æ±‚æ‰“è¿‡æ¥çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå‡ºç°å¤§é‡çš„ç¼“å­˜ç©¿é€äº†ã€‚</p><p>è¿˜æœ‰ä¸€ç§å¸¸è§çš„ç¼“å­˜ç©¿é€å¼•èµ·é›ªå´©çš„æƒ…å†µæ˜¯ï¼Œå½“å‘ç”Ÿç¼“å­˜ç©¿é€æ—¶ï¼Œå¦‚æœä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®çš„æ—¶é—´æ¯”è¾ƒé•¿ï¼Œä¹Ÿå®¹æ˜“å¼•èµ·æ•°æ®åº“é›ªå´©ã€‚</p><p>è¿™ç§æƒ…å†µæˆ‘åœ¨ã€Š<a href=\"https://time.geekbang.org/column/article/211008\">08 | ä¸€ä¸ªå‡ ä¹æ¯ä¸ªç³»ç»Ÿå¿…è¸©çš„å‘å„¿ï¼šè®¿é—®æ•°æ®åº“è¶…æ—¶</a>ã€‹è¿™èŠ‚è¯¾ä¸­ä¹Ÿæ›¾ç»æåˆ°è¿‡ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ç¼“å­˜çš„æ•°æ®æ˜¯ä¸€ä¸ªå¤æ‚çš„æ•°æ®åº“è”æŸ¥ç»“æœï¼Œå¦‚æœåœ¨æ•°æ®åº“æ‰§è¡Œè¿™ä¸ªæŸ¥è¯¢éœ€è¦10ç§’é’Ÿï¼Œé‚£å½“ç¼“å­˜ä¸­è¿™æ¡æ•°æ®è¿‡æœŸä¹‹åï¼Œæœ€å°‘10ç§’å†…ï¼Œç¼“å­˜ä¸­éƒ½ä¸ä¼šæœ‰æ•°æ®ã€‚</p><p>å¦‚æœè¿™10ç§’å†…æœ‰å¤§é‡çš„è¯·æ±‚éƒ½éœ€è¦è¯»å–è¿™ä¸ªç¼“å­˜æ•°æ®ï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šç©¿é€ç¼“å­˜ï¼Œæ‰“åˆ°æ•°æ®åº“ä¸Šï¼Œè¿™æ ·å¾ˆå®¹æ˜“å¯¼è‡´æ•°æ®åº“ç¹å¿™ï¼Œå½“è¯·æ±‚é‡æ¯”è¾ƒå¤§çš„æ—¶å€™å°±ä¼šå¼•èµ·é›ªå´©ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœè¯´æ„å»ºç¼“å­˜æ•°æ®éœ€è¦çš„æŸ¥è¯¢æ—¶é—´å¤ªé•¿ï¼Œæˆ–è€…å¹¶å‘é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼ŒCache Asideæˆ–è€…æ˜¯Read/Write Throughè¿™ä¸¤ç§ç¼“å­˜æ¨¡å¼éƒ½å¯èƒ½å‡ºç°å¤§é‡ç¼“å­˜ç©¿é€ã€‚</p><p>å¯¹äºè¿™ç§æƒ…å†µï¼Œå¹¶æ²¡æœ‰ä¸€ç§æ–¹æ³•èƒ½åº”å¯¹æ‰€æœ‰çš„åœºæ™¯ï¼Œä½ éœ€è¦é’ˆå¯¹ä¸šåŠ¡åœºæ™¯æ¥é€‰æ‹©åˆé€‚è§£å†³æ–¹æ¡ˆã€‚æ¯”å¦‚è¯´ï¼Œå¯ä»¥ç‰ºç‰²ç¼“å­˜çš„æ—¶æ•ˆæ€§å’Œåˆ©ç”¨ç‡ï¼Œç¼“å­˜æ‰€æœ‰çš„æ•°æ®ï¼Œæ”¾å¼ƒRead Throughç­–ç•¥æ‰€æœ‰çš„è¯·æ±‚ï¼Œåªè¯»ç¼“å­˜ä¸è¯»æ•°æ®åº“ï¼Œç”¨åå°çº¿ç¨‹æ¥å®šæ—¶æ›´æ–°ç¼“å­˜æ•°æ®ã€‚</p><h2>å°ç»“</h2><p>ä½¿ç”¨Redisä½œä¸ºMySQLçš„å‰ç½®ç¼“å­˜ï¼Œå¯ä»¥éå¸¸æœ‰æ•ˆåœ°æå‡ç³»ç»Ÿçš„å¹¶å‘ä¸Šé™ï¼Œé™ä½è¯·æ±‚å“åº”æ—¶å»¶ã€‚ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨Cache Asideæ¨¡å¼æ¥æ›´æ–°ç¼“å­˜éƒ½æ˜¯æœ€ä½³çš„é€‰æ‹©ï¼Œç›¸æ¯”Read/Write Throughæ¨¡å¼æ›´ç®€å•ï¼Œè¿˜èƒ½å¤§å¹…é™ä½è„æ•°æ®çš„å¯èƒ½æ€§ã€‚</p><p>ä½¿ç”¨Redisçš„æ—¶å€™ï¼Œè¿˜éœ€è¦ç‰¹åˆ«æ³¨æ„å¤§é‡ç¼“å­˜ç©¿é€å¼•èµ·é›ªå´©çš„é—®é¢˜ï¼Œåœ¨ç³»ç»Ÿåˆå§‹åŒ–é˜¶æ®µï¼Œéœ€è¦ä½¿ç”¨ç°åº¦å‘å¸ƒæˆ–è€…å…¶ä»–æ–¹å¼æ¥å¯¹ç¼“å­˜è¿›è¡Œé¢„çƒ­ã€‚å¦‚æœè¯´æ„å»ºç¼“å­˜æ•°æ®éœ€è¦çš„æŸ¥è¯¢æ—¶é—´è¿‡é•¿ï¼Œæˆ–è€…å¹¶å‘é‡ç‰¹åˆ«å¤§ï¼Œè¿™ä¸¤ç§æƒ…å†µä¸‹ä½¿ç”¨Cache Asideæ¨¡å¼æ›´æ–°ç¼“å­˜ï¼Œä¼šå‡ºç°å¤§é‡ç¼“å­˜ç©¿é€ï¼Œæœ‰å¯èƒ½ä¼šå¼•å‘é›ªå´©ã€‚</p><p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘ä»¬ä»Šå¤©è¿™èŠ‚è¯¾ä¸­è®²åˆ°çš„è¿™äº›ç¼“å­˜ç­–ç•¥ï¼Œéƒ½æ˜¯éå¸¸ç»å…¸çš„ç†è®ºï¼Œæ—©åœ¨äº’è”ç½‘å¤§è§„æ¨¡åº”ç”¨ä¹‹å‰ï¼Œè¿™äº›ç¼“å­˜ç­–ç•¥å°±å·²ç»éå¸¸æˆç†Ÿäº†ï¼Œåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼ŒCPU Cacheçš„ç¼“å­˜ã€ç£ç›˜æ–‡ä»¶çš„å†…å­˜ç¼“å­˜ï¼Œå®ƒä»¬ä¹Ÿéƒ½åº”ç”¨äº†æˆ‘ä»¬ä»Šå¤©è®²åˆ°çš„è¿™äº›ç­–ç•¥ã€‚</p><p>æ‰€ä»¥æ— è®ºæŠ€æœ¯å‘å±•çš„å¤šå¿«ï¼Œè®¡ç®—æœºçš„å¾ˆå¤šåŸºç¡€çš„ç†è®ºçš„çŸ¥è¯†éƒ½æ˜¯ç›¸é€šçš„ï¼Œä½ ç»å°½è„‘æ±æƒ³å‡ºçš„è§£å†³å·¥ç¨‹é—®é¢˜çš„æ–¹æ³•ï¼Œå¾ˆå¯èƒ½æ—©éƒ½å†™åœ¨å‡ åå¹´å‰å‡ºç‰ˆçš„ä¹¦é‡Œã€‚å­¦ä¹ ç®—æ³•ã€æ•°æ®ç»“æ„ã€è®¾è®¡æ¨¡å¼ç­‰ç­‰è¿™äº›åŸºç¡€çš„çŸ¥è¯†ï¼Œå¹¶ä¸åªæ˜¯ä¸ºäº†åº”ä»˜é¢è¯•ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>è¯¾åè¯·ä½ æƒ³ä¸€ä¸‹ï¼Œå…·ä½“ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œä½¿ç”¨Cache Asideæ¨¡å¼æ›´æ–°ç¼“å­˜ä¼šäº§ç”Ÿè„æ•°æ®ï¼Ÿæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œé€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜æƒ…å†µã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—ä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>","neighbors":{"left":{"article_title":"10 | èµ°è¿›é»‘ç›’ï¼šSQLæ˜¯å¦‚ä½•åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œçš„ï¼Ÿ","id":213176},"right":{"article_title":"12 | MySQLå¦‚ä½•åº”å¯¹é«˜å¹¶å‘ï¼ˆäºŒï¼‰ï¼šè¯»å†™åˆ†ç¦»","id":215330}},"comments":[{"had_liked":false,"id":191359,"user_name":"æç¥","can_delete":false,"product_type":"c1","uid":1501046,"ip_address":"","ucode":"B19E91EE248591","user_header":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","comment_is_top":true,"comment_ctime":1584765501,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"9.2233721715835003e+18","product_id":100046801,"comment_content":"Hiï¼Œæˆ‘æ˜¯æç¥ã€‚<br><br>è¿™é‡Œå›é¡¾ä¸€ä¸‹ä¸ŠèŠ‚è¯¾çš„æ€è€ƒé¢˜ï¼š<br><br>è¯¾åè¯·ä½ é€‰ä¸€ç§ä½ ç†Ÿæ‚‰çš„éå…³ç³»å‹æ•°æ®åº“ï¼Œæœ€å¥½æ˜¯æ”¯æŒ SQL çš„ï¼Œå½“ç„¶ï¼Œä¸æ”¯æŒ SQL æœ‰è‡ªå·±çš„æŸ¥è¯¢è¯­è¨€ä¹Ÿå¯ä»¥ã€‚æ¯”å¦‚è¯´ HBaseã€Redis æˆ–è€… MongoDB ç­‰ç­‰éƒ½å¯ä»¥ï¼Œå°è¯•åˆ†æä¸€ä¸‹æŸ¥è¯¢çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯¹æ¯”ä¸€ä¸‹å®ƒçš„æ‰§è¡Œå™¨å’Œå­˜å‚¨å¼•æ“ä¸ MySQL æœ‰ä»€ä¹ˆä¸åŒã€‚<br><br>è°ˆä¸€ä¸‹æˆ‘çš„ç†è§£ï¼š<br><br>æˆ‘ä»¬æ‹¿ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“Hiveæ¥çœ‹ä¸€ä¸‹å®ƒçš„æ‰§è¡Œå™¨å’Œå­˜å‚¨å¼•æ“ã€‚ä¸¥æ ¼æ¥è¯´ï¼ŒHiveå¹¶ä¸æ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ‰§è¡Œå™¨ï¼Œå®ƒçš„å­˜å‚¨å¼•æ“å°±æ˜¯HDFSåŠ ä¸ŠMap-Reduceã€‚åœ¨Hiveä¸­ï¼Œä¸€æ¡SQLçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯å’ŒMySQLå·®ä¸å¤šçš„ï¼ŒHiveä¼šè§£æSQLï¼Œç”Ÿæˆå¹¶ä¼˜åŒ–é€»è¾‘æ‰§è¡Œè®¡åˆ’ï¼Œç„¶åå®ƒå°±ä¼šæŠŠé€»è¾‘æ‰§è¡Œè®¡åˆ’äº¤ç»™Map-Reduceå»æ‰§è¡Œäº†ï¼Œåç»­ç”Ÿæˆå¹¶ä¼˜åŒ–ç‰©ç†æ‰§è¡Œè®¡åˆ’ï¼Œåœ¨HDFSä¸Šæ‰§è¡ŒæŸ¥è¯¢è¿™äº›äº‹å„¿ï¼Œéƒ½æ˜¯Map-Reduceå»å¹²çš„ã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒHiveçš„æ‰§è¡Œå¼•æ“ï¼ˆä¸¥æ ¼æ¥è¯´æ˜¯ç‰©ç†æ‰§è¡Œå¼•æ“ï¼‰æ˜¯å¯ä»¥æ›¿æ¢çš„ï¼Œæ‰€ä»¥å°±æœ‰äº†Hive on Sparkï¼ŒHive on Tezè¿™äº›ã€‚","like_count":32},{"had_liked":false,"id":191919,"user_name":"Geek_3894f9","can_delete":false,"product_type":"c1","uid":1594820,"ip_address":"","ucode":"FD04B8163FC5A8","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKrzZT06vXeP6IfR9iasoiaaDeYiaUmmN6pgwvNUpLhrauiasU9acvNcdSuicrhicMmBhvEufcjPTS7ZXRA/132","comment_is_top":false,"comment_ctime":1584803267,"is_pvip":false,"replies":[{"id":"73515","content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":"1501046","ctime":1584846253,"ip_address":"","comment_id":191919,"utype":1}],"discussion_count":19,"race_medal":0,"score":"272167742915","product_id":100046801,"comment_content":"æ•°æ®åŠ ç‰ˆæœ¬å·ï¼Œå†™åº“æ—¶è‡ªåŠ¨å¢ä¸€ã€‚æ›´æ–°ç¼“å­˜æ—¶ï¼Œåªå…è®¸é«˜ç‰ˆæœ¬æ•°æ®è¦†ç›–ä½ç‰ˆæœ¬æ•°æ®ã€‚","like_count":64,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488285,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584846253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1448893,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKj4w4lW7ibGEVxPv8wS1CrXKDeBz3RAaAdISxQSD23uUpV3wicsIMepaYZE8GzRcWmSpjet5NDN4MA/132","nickname":"Zm","note":"","ucode":"831FF80F07E965","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":373848,"discussion_content":"ä¸å¯ä»¥çš„ï¼Œå¦‚æœA/Bä¸¤ä¸ªçº¿ç¨‹å¹¶å‘è¿›æ¥ï¼Œæ­¤æ—¶ç¼“å­˜æ°å¥½åˆ°äº†è¿‡æœŸæ—¶é—´å¤±æ•ˆäº†ã€‚\nAçº¿ç¨‹ï¼š\n1ã€è¯»ç¼“å­˜ï¼Œæ²¡è¯»å–åˆ°ï¼Œè¯»æ•°æ®åº“ï¼Œè¯»åˆ°äº†æ•°æ®v1ã€‚\n2ã€æŠŠæ•°æ®v1å†™åˆ°ç¼“å­˜ä¸­ã€‚\nBçº¿ç¨‹ï¼š\n1ã€æ›´æ–°æ•°æ®åº“ã€‚\n2ã€åˆ é™¤ç¼“å­˜ã€‚\nå¦‚æœA1åœ¨B1ã€B2ä¹‹å‰ï¼ŒA2åœ¨B1ã€B2ä¹‹åè¿™æ ·å­åŠ ç‰ˆæœ¬å·æ ¹æœ¬æ²¡åŠæ³•è§£å†³çš„ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1620893157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1500391,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e4/e7/31944ee7.jpg","nickname":"åƒå†›ä¸‡é©¬ä¸‡é©¬@","note":"","ucode":"0BDAD22123435A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1448893,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKj4w4lW7ibGEVxPv8wS1CrXKDeBz3RAaAdISxQSD23uUpV3wicsIMepaYZE8GzRcWmSpjet5NDN4MA/132","nickname":"Zm","note":"","ucode":"831FF80F07E965","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556359,"discussion_content":"é‚£åˆ°åº•æ€ä¹ˆåŠå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647328365,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":373848,"ip_address":""},"score":556359,"extra":""}]},{"author":{"id":1484192,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/a0/e0cccf7e.jpg","nickname":"åœ†åœ†æ»¡æ»¡","note":"","ucode":"396E7A822014D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215558,"discussion_content":"æ›´æ–°ç¼“å­˜æ—¶ï¼Œè¿˜æ˜¯ç¬¬ä¸€æ­¥æŸ¥ç¼“å­˜ï¼Œç¬¬äºŒæ­¥æ¯”è¾ƒç‰ˆæœ¬å†³å®šæ˜¯å¦æ›´æ–°ç¼“å­˜ã€‚è¿™ä¸¤æ­¥ä¹‹é—´è¿˜æ˜¯æœ‰å¯èƒ½è¢«åˆ«çš„çº¿ç¨‹æ›´æ–°æ•°æ®ã€‚æ­¤æ—¶ç”¨luaä¿è¯è¿™ä¸¤æ­¥çš„åŸå­æ€§ï¼Ÿ","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1585356083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1034001,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c7/11/89ba9915.jpg","nickname":"æ°¸è¿œçš„è‰è“åœ°","note":"","ucode":"D4BD8DD42350CC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1484192,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/a0/e0cccf7e.jpg","nickname":"åœ†åœ†æ»¡æ»¡","note":"","ucode":"396E7A822014D1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":235404,"discussion_content":"åŒé—®ï¼Œæœ€åä¸€æ­¥ï¼Œcompare and set å¿…é¡»å¾—åŸå­æ‰å¯ä»¥å§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587039391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":215558,"ip_address":""},"score":235404,"extra":""},{"author":{"id":1433535,"avatar":"https://static001.geekbang.org/account/avatar/00/15/df/bf/96b50d1e.jpg","nickname":"ğŸ˜š 46","note":"","ucode":"EED0EBBBF80A43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1484192,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/a0/e0cccf7e.jpg","nickname":"åœ†åœ†æ»¡æ»¡","note":"","ucode":"396E7A822014D1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265815,"discussion_content":"å¾ˆæ£’çš„é—®é¢˜ï¼Œå·®ç‚¹é—æ¼äº†è¿™ç§æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589441825,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":215558,"ip_address":""},"score":265815,"extra":""}]},{"author":{"id":1320730,"avatar":"https://static001.geekbang.org/account/avatar/00/14/27/1a/77fb1e4e.jpg","nickname":"Lingjun","note":"","ucode":"5CE38C19231D3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211695,"discussion_content":"read/write through + ç‰ˆæœ¬è²Œä¼¼æ˜¯æ¯”è¾ƒå®Œç¾çš„æ–¹æ¡ˆäº†ğŸ‘","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1584880507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534716,"discussion_content":"é¦–å…ˆå›ç­”ä¸‹è€å¸ˆçš„é—®é¢˜ï¼š\nç†è®ºä¸Šæ€»æ˜¯å­˜åœ¨è¿™ç§æƒ…å†µã€‚æ¯”æ–¹è¯´ ç¼“å­˜å¤±æ•ˆå‘ç”Ÿåœ¨å†™åº“ä¸å¤±æ•ˆç¼“å­˜ä¹‹é—´ é‚£ä¹ˆæ­¤æ—¶è¯»è¯·æ±‚è¯»å‡ºæ¥çš„æ•°æ®å°±æ˜¯æ—§çš„ã€‚ä½†æ˜¯è¿™ç§åœºæ™¯é€šå¸¸æ¦‚ç‡æä½ï¼Œå› ä¸ºè¯»æ€»æ˜¯å¿«äºå†™ æ‰€ä»¥å·¥ç¨‹ä¸Šä¸å¤šè§ã€‚å†æ¥è¯´ä¸‹å¦‚ä½•è§£å†³ï¼Œä¸¤ç§æ–¹æ³•ï¼š\n1. ä¸è§£å†³ ã€‚é€šå¸¸ä¹Ÿæ˜¯è¿™ä¹ˆåš å³æ¥å—è¿™ç§é—®é¢˜\n2. ä½¿ç”¨å®¹é”™çª—å£ã€‚åŸç†ç±»ä¼¼è€å¸ˆä¸ŠèŠ‚è¯¾æå‡ºçš„ spuæ”¹åŠ¨ä»·æ ¼ï¼Œå…è®¸ä¸€æ®µæ—¶é—´å†…æ—§ä»·æ ¼ä¸‹å•æˆåŠŸ\n\nä¸‹é¢å†æ¥è¯´è¯´ä¸ºä»€ä¹ˆwrite through / read through ä¸é€‚åˆè¿™ç§åœºæ™¯\næœ¬è´¨ä¸Šæ˜¯ç”±äºä¸¤ä¸ªå¹¶å‘å†™ï¼ˆè¯»è¯·æ±‚ä¸å†™è¯·æ±‚ï¼‰ä¼šå­˜åœ¨å½¼æ­¤è„å†™è¦†ç›– å› ä¸ºæœ€ç»ˆå†™å…¥å…¶å®æ²¡æœ‰é”æˆ–åŒæ­¥æœºåˆ¶æ¥åšåè°ƒã€‚\nè¿™ä¸ªé—®é¢˜åœ¨ã€ŠWhy does Facebook use delete to remove the key-value pair in Memcached instead of updating the Memcached during write request to the backend?ã€‹æœ‰è®¨è®ºè¿‡","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638260722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1162660,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bd/a4/cf4744ce.jpg","nickname":"è€é‚ª","note":"","ucode":"DACC50B0E3688E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":275513,"discussion_content":"è¿™é‡Œä¸è¡Œçš„ï¼Œç‰ˆæœ¬å¯¹æ¯”ä¸æ˜¯åŸå­çš„ï¼ŒåŒæ—¶æ¥ä¸¤ä¸ªä¸åŒçš„æ–°ç‰ˆæœ¬ï¼Œéƒ½å¯ä»¥æ›´æ–°ã€‚è€ä¸€äº›çš„æ–°ç‰ˆæœ¬å¯èƒ½è¦†ç›–æœ€æ–°çš„ã€‚ å¤§ä½¬æ€ä¹ˆçœ‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590722834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1594820,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKrzZT06vXeP6IfR9iasoiaaDeYiaUmmN6pgwvNUpLhrauiasU9acvNcdSuicrhicMmBhvEufcjPTS7ZXRA/132","nickname":"Geek_3894f9","note":"","ucode":"FD04B8163FC5A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1162660,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bd/a4/cf4744ce.jpg","nickname":"è€é‚ª","note":"","ucode":"DACC50B0E3688E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280797,"discussion_content":"æ›´æ–°ç¼“å­˜æ˜¯ä¸²è¡Œæ“ä½œï¼ˆæŸä¸€ç‰ˆæœ¬æ›´æ–°å®Œæˆåæ‰ä¼šå¼€å§‹å¦ä¸€ä¸ªç‰ˆæœ¬çš„æ›´æ–°ï¼‰ã€‚ç¼“å­˜è¦ä¹ˆé€æ¬¡æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œè¦ä¹ˆå…ˆæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæ¬¡æ–°ç‰ˆæœ¬åœ¨æ›´æ–°æ—¶è¢«å¿½ç•¥ã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1591612564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":275513,"ip_address":""},"score":280797,"extra":""},{"author":{"id":1484184,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg","nickname":"djfhchdh","note":"","ucode":"E71D75328CE398","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1162660,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bd/a4/cf4744ce.jpg","nickname":"è€é‚ª","note":"","ucode":"DACC50B0E3688E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306209,"discussion_content":"æ˜é£å¤§ä½¬ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600218950,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":275513,"ip_address":""},"score":306209,"extra":""}]},{"author":{"id":1295883,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c6/0b/eb3589f1.jpg","nickname":"ğŸ³å¤§æµ·å…¨æ˜¯æ°´","note":"","ucode":"8FB523F8D54D8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":220447,"discussion_content":"åŠ ç‰ˆæœ¬å·ä¸€æ ·åœ¨cache asideä¸‹ä¸€æ ·ä¼šå‡ºç°è„æ•°æ®ã€‚açº¿ç¨‹è¯»ç¼“å­˜å‘ç°æ²¡æœ‰æ•°æ®ï¼Œå»æ•°æ®åº“è¯»å–äº†ï¼Œæ—§ç‰ˆæœ¬æ•°æ®å‡ºæ¥ï¼Œbçº¿ç¨‹ç¨åï¼Œæ›´æ–°äº†æ•°æ®åº“ï¼Œåˆ é™¤ç¼“å­˜ï¼Œä¹‹åaçº¿ç¨‹å†™å…¥æ—§ç‰ˆæœ¬æ•°æ®ã€‚è¿™æ ·åé¢çš„è¯»å–éƒ½æ˜¯è„æ•°æ®äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585878105,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":6,"child_discussions":[{"author":{"id":1594820,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKrzZT06vXeP6IfR9iasoiaaDeYiaUmmN6pgwvNUpLhrauiasU9acvNcdSuicrhicMmBhvEufcjPTS7ZXRA/132","nickname":"Geek_3894f9","note":"","ucode":"FD04B8163FC5A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1295883,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c6/0b/eb3589f1.jpg","nickname":"ğŸ³å¤§æµ·å…¨æ˜¯æ°´","note":"","ucode":"8FB523F8D54D8B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221314,"discussion_content":"èµåŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586002875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":220447,"ip_address":""},"score":221314,"extra":""},{"author":{"id":1046664,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/88/96b870fd.jpg","nickname":"zcc","note":"","ucode":"58FB42400517A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1594820,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKrzZT06vXeP6IfR9iasoiaaDeYiaUmmN6pgwvNUpLhrauiasU9acvNcdSuicrhicMmBhvEufcjPTS7ZXRA/132","nickname":"Geek_3894f9","note":"","ucode":"FD04B8163FC5A8","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":221676,"discussion_content":"æˆ–è€…è¯»å†™åˆ†ç¦»ï¼ŒæŸ¥è¯¢æœåŠ¡å¯åŠ¨æ—¶æŸ¥è¯¢é¢„çƒ­ç¼“å­˜ï¼ˆä¹‹åè¯»è¯·æ±‚ä¸å†æ›´æ–°ç¼“å­˜ï¼‰ï¼Œæ›´æ–°è®°å½•æ—¶å¿…é¡»æ›´æ–°ç¼“å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586045287,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":221314,"ip_address":""},"score":221676,"extra":""},{"author":{"id":1615539,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI6LXcIqb5K48nia8d4zmdsD1M9AZeyXoGrLzX5xvqfN0fqXOsYKUWLbZvZ8TtJCXWmYbCkCXg93dQ/132","nickname":"æ¼è„šè„–","note":"","ucode":"214AE52EC201E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1295883,"avatar":"https://static001.geekbang.org/account/avatar/00/13/c6/0b/eb3589f1.jpg","nickname":"ğŸ³å¤§æµ·å…¨æ˜¯æ°´","note":"","ucode":"8FB523F8D54D8B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230263,"discussion_content":"åè¾¹å†æ¥ä¸ªcçº¿ç¨‹ï¼Œå¦‚æœç‰ˆæœ¬å·å¤§äºredisé‡Œçš„ç‰ˆæœ¬å·ï¼Œå°±å†æ›´æ–°rediså‘—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586738608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":220447,"ip_address":""},"score":230263,"extra":""}]},{"author":{"id":1332557,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","nickname":"é¥­å›¢","note":"","ucode":"E24F240CC91BE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212386,"discussion_content":"å¥½åŠæ³•ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584966803,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191525,"user_name":"å…¬å·-æŠ€æœ¯å¤œæœªçœ ","can_delete":false,"product_type":"c1","uid":1013683,"ip_address":"","ucode":"83825B57CBD952","user_header":"https://static001.geekbang.org/account/avatar/00/0f/77/b3/991f3f9b.jpg","comment_is_top":false,"comment_ctime":1584779066,"is_pvip":true,"discussion_count":13,"race_medal":0,"score":"203448241978","product_id":100046801,"comment_content":"Cache Aside åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¹Ÿä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´ã€‚<br>è¯»æ“ä½œAï¼Œæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œå°±ä¼šåˆ°æ•°æ®åº“ä¸­å–æ•°æ®v1ã€‚<br>æ­¤æ—¶æ¥äº†ä¸€ä¸ªå†™æ“ä½œBï¼Œå°†v2å†™å…¥æ•°æ®åº“ï¼Œè®©ç¼“å­˜å¤±æ•ˆï¼›<br>è¯»æ“ä½œAåœ¨æŠŠv1æ”¾å…¥ç¼“å­˜ï¼Œè¿™æ ·å°±ä¼šé€ æˆè„æ•°æ®ã€‚å› ä¸ºç¼“å­˜ä¸­æ˜¯v1ï¼Œæ•°æ®åº“ä¸­æ˜¯v2.<br>","like_count":48,"discussions":[{"author":{"id":1259218,"avatar":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","nickname":"å‘æ¡æ©™å­ ã€‚","note":"","ucode":"ED076F4534FFED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211483,"discussion_content":"è¿™ç§æ¦‚ç‡æ¯”è¾ƒå° å› ä¸ºå¤§å¤šæ•°è¯»éƒ½ä¼šæ¯”å†™å¿«","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1584856356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1004349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/3d/1189e48a.jpg","nickname":"å¾®æ€","note":"","ucode":"853C48AA183A7B","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1259218,"avatar":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","nickname":"å‘æ¡æ©™å­ ã€‚","note":"","ucode":"ED076F4534FFED","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370763,"discussion_content":"å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619526590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":211483,"ip_address":""},"score":370763,"extra":""}]},{"author":{"id":1314879,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/2nvw0GuJKcxfAsMrevuetMTXZNM2pf6vTL0LKNibH1tj7PhualK888g1MYRuo8hooGEgfcrc93IFY757C3AXiaTA/132","nickname":"peekaboo","note":"","ucode":"507BCFF01B3A39","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556848,"discussion_content":"å®é™…åœºæ™¯ä¸­ï¼Œä¼šä½¿ç”¨å»¶è¿ŸåŒåˆ çš„ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆæ›´æ–°db, æ¥ç€ç«‹é©¬åˆ é™¤redisä¸­çš„keyï¼Œç¡çœ 0.5s(æ ¹æ®ä¸šåŠ¡åœºæ™¯æ¥å®š)ï¼Œå†åˆ é™¤ä¸€æ¬¡key","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1647534990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2328990,"avatar":"","nickname":"Geek4870","note":"","ucode":"30DBE32C77FFE1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1314879,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/2nvw0GuJKcxfAsMrevuetMTXZNM2pf6vTL0LKNibH1tj7PhualK888g1MYRuo8hooGEgfcrc93IFY757C3AXiaTA/132","nickname":"peekaboo","note":"","ucode":"507BCFF01B3A39","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":557267,"discussion_content":"è¿™æ ·åˆå¯èƒ½ä¼šå‡ºç°ç¼“å­˜å‡»ç©¿çš„åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647746698,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":556848,"ip_address":""},"score":557267,"extra":""}]},{"author":{"id":1187478,"avatar":"https://static001.geekbang.org/account/avatar/00/12/1e/96/c735ad6b.jpg","nickname":"æ»©æ¶‚æ›³å°¾","note":"","ucode":"40F650F2A419D4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554519,"discussion_content":"ä¾‹å¦‚ï¼Œè¯»çº¿ç¨‹ åœ¨è¯»dbåï¼Œå›ç§cacheå‰ï¼Œå‘ç”Ÿjava GCï¼Œæˆ–å…¶ä»–æƒ…å†µçº¿ç¨‹å¡é¡¿ï¼Œå°±èƒ½å‡ºç°è¿™ç§æƒ…å†µ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1646437313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1290791,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLgIx7TUqhftK68PyEUt5mNBX4ruvprm0EPnvusrSdibqCdygia0w8dCNr5Tuib4HUJnUlFaP0KDllPw/132","nickname":"Geek_076d5e","note":"","ucode":"C3C1A32AB9457B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280802,"discussion_content":"Aå…ˆæ¥çš„è¯ï¼Œè¿™ä¸ªåœºæ™¯æ­£å¸¸å•Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591613211,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1902999,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/09/97/502e8869.jpg","nickname":"Colorful","note":"","ucode":"2D6AD65B28239E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1290791,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLgIx7TUqhftK68PyEUt5mNBX4ruvprm0EPnvusrSdibqCdygia0w8dCNr5Tuib4HUJnUlFaP0KDllPw/132","nickname":"Geek_076d5e","note":"","ucode":"C3C1A32AB9457B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297639,"discussion_content":"èµæˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596991509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":280802,"ip_address":""},"score":297639,"extra":""},{"author":{"id":1228313,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/vQiadbkZYR239J80hjekw7jzY9vy6otLKPNDSuz2lruDiaXlKGkcsX5wwiaFevicgqV8odlRG4UITiadDF3fgicrHPcw/132","nickname":"ç–¯ç ","note":"","ucode":"7FF11EC80439EA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1902999,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/09/97/502e8869.jpg","nickname":"Colorful","note":"","ucode":"2D6AD65B28239E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334050,"discussion_content":"å¯¹Aæ¥è¯´æ­£å¸¸ ä½†æ˜¯ç¼“å­˜æ•°æ®åäº†ï¼Œåç»­çš„å…¶ä»–è¯·æ±‚éƒ½ä¸å¯¹äº†","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1607705379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":297639,"ip_address":""},"score":334050,"extra":""}]},{"author":{"id":2115387,"avatar":"https://static001.geekbang.org/account/avatar/00/20/47/3b/70198ceb.jpg","nickname":"Aibo","note":"","ucode":"2CE3E77BD2D014","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":553004,"discussion_content":"æ‰€ä»¥å¦‚æœä¸šåŠ¡è¦ä¿è¯æ•°æ®çš„é«˜ä¸€è‡´æ€§ï¼Œä¸ç®¡æ˜¯å“ªç§æ¨¡å¼ï¼Œéƒ½éœ€è¦æ ¼å¤–çš„æ‰‹æ®µã€‚æ¯”å¦‚åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„é‡è¯•ï¼Œè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ï¼›åŸºäº 2pcã€tccé€šè¿‡åˆ†å¸ƒå¼é”è¾¾åˆ°å¼ºä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645685331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534695,"discussion_content":"å®é™…ä¸Šå°±æ˜¯ä¿è¯å¤±æ•ˆçš„é‚£ä¸€åˆ» æ­£å¥½è¯»è¯·æ±‚èƒ½æ‹¿åˆ°è€ç‰ˆæœ¬æ•°æ® ä½†è¿™ç§æƒ…å†µå°±åƒæ¥¼ä¸ŠåŒå­¦è¯´çš„æ˜¯å°æ¦‚ç‡ æ‰€ä»¥å·¥ç¨‹ä¸Šå¿½ç•¥ä¸è®¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638257811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1131477,"avatar":"https://static001.geekbang.org/account/avatar/00/11/43/d5/5af042f6.jpg","nickname":"å¼ ä¸–æŸ","note":"","ucode":"F43CF5BF9356A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368927,"discussion_content":"å¯ä»¥ä½¿ç”¨å»¶æ—¶åŒå†™ç­–ç•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618883715,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1333094,"avatar":"https://static001.geekbang.org/account/avatar/00/14/57/66/e57bdb18.jpg","nickname":"liliumss","note":"","ucode":"A52AC5042F3115","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219050,"discussion_content":"è°¢è°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585727809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1469608,"avatar":"https://static001.geekbang.org/account/avatar/00/16/6c/a8/1922a0f5.jpg","nickname":"éƒ‘ç¥–ç…Œ","note":"","ucode":"49A0D2E3279826","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215748,"discussion_content":"åŸæ¥å¦‚æ­¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585378764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191455,"user_name":"GaGiî","can_delete":false,"product_type":"c1","uid":1099053,"ip_address":"","ucode":"CC8D22E1DD8CA2","user_header":"https://static001.geekbang.org/account/avatar/00/10/c5/2d/1eebfc3c.jpg","comment_is_top":false,"comment_ctime":1584774708,"is_pvip":false,"replies":[{"id":"73513","content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":"1501046","ctime":1584846086,"ip_address":"","comment_id":191455,"utype":1}],"discussion_count":16,"race_medal":0,"score":"156203597364","product_id":100046801,"comment_content":"å¯¹äºCache asideå’Œread&#47;write throughè€Œå¸¦æ¥çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œå·¥ä½œä¸­æ˜¯è¿™æ ·è§£å†³ï¼š<br>aå†™çº¿ç¨‹ï¼Œbè¯»çº¿ç¨‹ï¼š<br>bçº¿ç¨‹ï¼šè¯»ç¼“å­˜-&gt;æœªå‘½ä¸­-&gt;ä¸Šå†™é”&gt;ä»dbè¯»æ•°æ®åˆ°ç¼“å­˜-&gt;é‡Šæ”¾é”ï¼›<br>açº¿ç¨‹ï¼šä¸Šå†™é”-&gt;å†™db-&gt;åˆ é™¤ç¼“å­˜&#47;æ”¹ç¼“å­˜-&gt;é‡Šæ”¾é”ï¼›<br>è¿™æ ·æ¥ä¿è¯aï¼Œbçº¿ç¨‹å¹¶å‘è¯»å†™ç¼“å­˜å¸¦æ¥çš„è„æ•°æ®é—®é¢˜ï¼›<br><br>","like_count":37,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488178,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584846086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1691516,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/7c/2e99d0ad.jpg","nickname":"ä¸€æ–°","note":"","ucode":"1915C6C655C31F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281581,"discussion_content":"åªè¦ç¼“å­˜å‘½ä¸­ç‡ä¸æ˜¯å¤ªä½ï¼Œæ„Ÿè§‰è¿˜æ˜¯å¯å–çš„ ï¼Œå¥¶æ€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591769829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1446375,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","nickname":"bookå°¾æ±","note":"","ucode":"AE2B8DFC643ACC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215990,"discussion_content":"æ„Ÿè§‰åªè¦è¯»çº¿ç¨‹ä¸Šä¸ªè¯»é”å°±å¤Ÿäº†å§ï¼Œä¿è¯è¯»çº¿ç¨‹è¯»å–æ•°æ®åˆ°å†…å­˜çš„æ—¶å€™ï¼Œè¯¥è¡Œæ•°æ®ä¸èƒ½è¢«æ›´æ”¹å°±è¡Œäº†å§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585401726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1173129,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e6/89/d8aec012.jpg","nickname":"Liang","note":"","ucode":"E1A816EE5CE7DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1446375,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/e7/044a9a6c.jpg","nickname":"bookå°¾æ±","note":"","ucode":"AE2B8DFC643ACC","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":305464,"discussion_content":"å†™çº¿ç¨‹ä¹Ÿè¦åŠ å†™é”çš„ï¼Œä¸ç„¶è¿˜æ˜¯æœ‰å¯èƒ½é€ æˆæ•°æ®ä¸ä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599930294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":215990,"ip_address":""},"score":305464,"extra":""},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1173129,"avatar":"https://static001.geekbang.org/account/avatar/00/11/e6/89/d8aec012.jpg","nickname":"Liang","note":"","ucode":"E1A816EE5CE7DC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366287,"discussion_content":"è¯»çº¿ç¨‹åŠ è¯»é”ï¼Œå¯ä»¥å¢åŠ è¯»å¹¶å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618021647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305464,"ip_address":""},"score":366287,"extra":""}]},{"author":{"id":2226157,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/0yfPt7iaQXLHH6LT41jfWhUZwdKwaPxPJGuzAVFf7nsvWd0cNXFoxMxTNtBX1N58AJQPzPAZVDo4FoOxh5BDlFQ/132","nickname":"zhangzhijun","note":"","ucode":"AAA2B2F4287D62","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570057,"discussion_content":"è¿™ç§åœºæ™¯åªé€‚åˆå•æœºç‰ˆçš„åœºæ™¯å§ï¼Œé›†ç¾¤å®ä¾‹ä¸‹é«˜å¹¶å‘æ¥è¯»ï¼ŒåŠ å†™é”ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚è¿˜æ˜¯å»ºè®®é‡‡ç”¨å»¶æ—¶åŒåˆ æ¥ä¿è¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651650642,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1433535,"avatar":"https://static001.geekbang.org/account/avatar/00/15/df/bf/96b50d1e.jpg","nickname":"ğŸ˜š 46","note":"","ucode":"EED0EBBBF80A43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265805,"discussion_content":"ä½¿ç”¨redissonæä¾›çš„RReadWriteLockè¯»å†™é”ä¼šä¸ä¼šæ›´å¥½å‘¢ï¼Ÿçº¿ç¨‹aä¸Šå†™é”ï¼Œçº¿ç¨‹bè¯»é”ï¼Œä½†æˆ‘è¿˜æ²¡éªŒè¯è¿‡å¯è¡Œæ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589441306,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005217,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/a1/abb7bfe3.jpg","nickname":"skyitachi","note":"","ucode":"FED5D96CC717B0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":252946,"discussion_content":"å¤šæœºå™¨çš„æƒ…å†µè¦ä¸Šåˆ†å¸ƒå¼é”å§ï¼Œä½ çš„å†™é”åº”è¯¥éƒ½æ˜¯æœ¬åœ°é”å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588207450,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1691516,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/7c/2e99d0ad.jpg","nickname":"ä¸€æ–°","note":"","ucode":"1915C6C655C31F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005217,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/a1/abb7bfe3.jpg","nickname":"skyitachi","note":"","ucode":"FED5D96CC717B0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281579,"discussion_content":"for update","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591769678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":252946,"ip_address":""},"score":281579,"extra":""}]},{"author":{"id":1798979,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/73/43/ae139b1f.jpg","nickname":"åš","note":"","ucode":"F7CA69FF5D09BA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216028,"discussion_content":"èµ·åˆè§‰å¾—ä¸Šé”æ˜¯ä¸ªå¥½åŠæ³•ï¼Œä½†æ˜¯é”çš„ç²’åº¦å’Œæ€§èƒ½æˆåæ¯”ï¼Œéœ€è¦æ…é‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585402787,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1039069,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/da/dd/1e5e7b0c.jpg","nickname":"image","note":"","ucode":"A45BFF284F8933","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214820,"discussion_content":"é”ç²’åº¦è¾ƒå¤§ï¼Œä½†ä¹Ÿæ˜¯å¥½æ–¹æ³•ï¼Œç‰ˆæœ¬å·æ–¹æ³•å¯ä»¥æ€§èƒ½æ›´é«˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585235293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1554570,"avatar":"https://static001.geekbang.org/account/avatar/00/17/b8/8a/7367a69e.jpg","nickname":"å˜‰å…´","note":"","ucode":"6997E7A3E25EE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":213482,"discussion_content":"æœ‰ä¸ªé—®é¢˜ï¼Œnä¸ªå¹¶å‘è¯»çº¿ç¨‹åªæœ‰ä¸€ä¸ªåŠ å†™é”æˆåŠŸï¼Œé‚£å…¶ä»–n-1ä¸ªæ€ä¹ˆåŠï¼Ÿ\n1.  å…¶ä»–n-1ä¸ªçº¿ç¨‹ç›´æ¥è¿”å›é‡è¯•çš„æç¤º\n2. å…¶ä»–n-1ä¸ªçº¿ç¨‹ç­‰å¾…ï¼ˆsleepï¼‰ï¼Œä½†ç­‰å¾…å¤šä¹…åˆæ˜¯ä¸ªé—®é¢˜ï¼Œå¤ªçŸ­æ— æ•ˆï¼Œå¤ªä¹…æµªè´¹èµ„æº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585098627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1433535,"avatar":"https://static001.geekbang.org/account/avatar/00/15/df/bf/96b50d1e.jpg","nickname":"ğŸ˜š 46","note":"","ucode":"EED0EBBBF80A43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1554570,"avatar":"https://static001.geekbang.org/account/avatar/00/17/b8/8a/7367a69e.jpg","nickname":"å˜‰å…´","note":"","ucode":"6997E7A3E25EE4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265790,"discussion_content":"è¿™ç§æƒ…å†µï¼Œé€šå¸¸æ˜¯å¤§æµé‡å†²å‡»ï¼Œæˆ‘è®¤ä¸ºç›´æ¥è¿”å›å¤±è´¥ï¼Œè®©ç”¨æˆ·æ‰‹åŠ¨é‡è¯•ä¼šæ›´å¥½äº›ã€‚å¦‚æœé‡‡ç”¨ç³»ç»Ÿè‡ªåŠ¨é‡è¯•æˆ–ç­‰å¾…ï¼Œä¸ä»…å ç”¨ç³»ç»Ÿèµ„æºå½±å“ååé‡è¿˜å¯èƒ½å› ä¸ºé‡è¯•è€Œå¼•å‘é›ªå´©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589439512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":213482,"ip_address":""},"score":265790,"extra":""}]},{"author":{"id":1112651,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/4b/c385f755.jpg","nickname":"å‘å‰èµ°","note":"","ucode":"8956E92DCEFB60","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211850,"discussion_content":"è¿™é‡Œæ˜¯çº¿ç¨‹a,béƒ½ä¸Šå†™é”ä¹ˆ,è¿˜æ˜¯åªæœ‰å†™çš„çº¿ç¨‹aä¸Šå†™é”å‘¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584890375,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1691516,"avatar":"https://static001.geekbang.org/account/avatar/00/19/cf/7c/2e99d0ad.jpg","nickname":"ä¸€æ–°","note":"","ucode":"1915C6C655C31F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1112651,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/4b/c385f755.jpg","nickname":"å‘å‰èµ°","note":"","ucode":"8956E92DCEFB60","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281580,"discussion_content":"select ... for update","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591769769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":211850,"ip_address":""},"score":281580,"extra":""}]},{"author":{"id":1259218,"avatar":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","nickname":"å‘æ¡æ©™å­ ã€‚","note":"","ucode":"ED076F4534FFED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211484,"discussion_content":"ç›´æ¥ä¸Šé” å¹¶å‘é‡å¤§çš„æ—¶å€™æ˜¯å¦ä¼šäº§ç”Ÿç“¶é¢ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584856557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235132,"user_name":"äºŒè¿›åˆ¶ä¹‹è·¯","can_delete":false,"product_type":"c1","uid":1008395,"ip_address":"","ucode":"67C84B013147B1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/0b/ad56aeb4.jpg","comment_is_top":false,"comment_ctime":1594901385,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"70314378121","product_id":100046801,"comment_content":"è€å¸ˆï¼Œçœ‹äº†ä½ å¯¹ç¼“å­˜æ¨¡å¼çš„è§£è¯»ä¹‹åï¼Œè·Ÿæˆ‘ä¹‹å‰çš„ç†è§£æ„Ÿè§‰æœ‰æ¯”è¾ƒå¤§çš„å†²çªã€‚<br><br>åœ¨æ–‡ä¸­ï¼Œä½ æåˆ°çš„ Read&#47;Write Through ç­–ç•¥ï¼Œæˆ‘çœ‹åˆ°çš„æ›´å¤šçš„æ˜¯æŠŠè¿™ç§æ–¹å¼ç§°ä¸ºCache Asideã€‚<br>è€ŒCache Aside å’Œ Read&#47;Write Througçš„å·®åˆ«ï¼Œä¹Ÿä¸æ˜¯æ˜¯å¦å»åˆ é™¤ç¼“å­˜ã€‚<br><br>æˆ‘çœ‹çš„ä¸€äº›æ–‡ç« ï¼ŒåŒ…æ‹¬ä¹°çš„ä¹¦ç±ï¼Œå¤§éƒ¨åˆ†éƒ½è·Ÿehcache caching-patternsæè¿°çš„æ„æ€å·®ä¸å¤šï¼Œæ€»ç»“å¦‚ä¸‹ï¼š<br><br># Cache Aside<br><br>åº”ç”¨ç¨‹åºç›´æ¥ä¸DBã€ç¼“å­˜äº¤äº’ï¼Œå¹¶è´Ÿè´£å¯¹ç¼“å­˜çš„ç»´æŠ¤ã€‚<br><br>è¯»æ•°æ®æ—¶ï¼Œå…ˆè®¿é—®ç¼“å­˜ï¼Œå‘½ä¸­åˆ™ç›´æ¥è¿”å›ã€‚<br>å¦‚æœä¸å‘½ä¸­ï¼Œåˆ™å…ˆæŸ¥è¯¢DBï¼Œå¹¶å°†æ•°æ®å†™åˆ°ç¼“å­˜ï¼Œæœ€åè¿”å›æ•°æ®ã€‚<br><br>å†™æ•°æ®æ—¶ï¼ŒåŒæ—¶æ›´æ–°DBå’Œç¼“å­˜ã€‚<br><br><br># Read-Through<br><br>åº”ç”¨ç¨‹åºåªä¸ç¼“å­˜äº¤äº’ï¼Œè€Œå¯¹DBçš„è¯»å–ç”±ç¼“å­˜æ¥ä»£ç†ã€‚<br><br>è¯»æ•°æ®æ—¶ï¼Œå…ˆè®¿é—®ç¼“å­˜ï¼Œå‘½ä¸­åˆ™ç›´æ¥è¿”å›ã€‚<br>å¦‚æœä¸å‘½ä¸­ï¼Œåˆ™ç”±ç¼“å­˜æŸ¥è¯¢DBï¼Œå¹¶å°†æ•°æ®å†™åˆ°ç¼“å­˜ï¼Œæœ€åè¿”å›æ•°æ®ã€‚<br><br><br># Write-Through<br><br>åº”ç”¨ç¨‹åºåªä¸ç¼“å­˜äº¤äº’ï¼Œè€Œå¯¹DBçš„å†™ç”±ç¼“å­˜æ¥ä»£ç†ã€‚<br><br>å†™æ•°æ®æ—¶ï¼Œè®¿é—®ç¼“å­˜ï¼Œç”±ç¼“å­˜å°†æ•°æ®å†™åˆ°DBï¼Œå¹¶å°†æ•°æ®ç¼“å­˜èµ·æ¥ã€‚<br><br><br>ä¾‹å¦‚ä½¿ç”¨Redisæ¥ç¼“å­˜MySQLçš„æ•°æ®ï¼Œä¸€èˆ¬éƒ½æ˜¯é€šè¿‡åº”ç”¨ç¨‹åºæ¥ç›´æ¥ä¸Redisã€MySQLäº¤äº’ï¼Œæˆ‘çš„ç†è§£æ˜¯Cache Asideï¼ŒåŒ…&quot;æ˜¯&#47;å¦&quot;åˆ é™¤Cacheåœ¨å†…ã€‚<br><br>è€ŒRead-Throughï¼ŒåƒGuava LoadingCacheï¼Œåœ¨loadé‡Œé¢å®šä¹‰å¥½è®¿é—®DBçš„ä»£ç ï¼Œåç»­çš„è¯»æ“ä½œéƒ½æ˜¯ç›´æ¥ä¸Cacheäº¤äº’äº†ã€‚<br><br><br>https:&#47;&#47;www.ehcache.org&#47;documentation&#47;3.8&#47;caching-patterns.html<br>https:&#47;&#47;docs.oracle.com&#47;cd&#47;E15357_01&#47;coh.360&#47;e15723&#47;cache_rtwtwbra.htm#COHDG5178<br>https:&#47;&#47;dzone.com&#47;articles&#47;using-read-through-amp-write-through-in-distribute<br>https:&#47;&#47;docs.microsoft.com&#47;en-us&#47;azure&#47;architecture&#47;patterns&#47;cache-aside<br>ã€Šäº¿çº§æµé‡ç½‘ç«™æ¶æ„æ ¸å¿ƒæŠ€æœ¯ã€‹<br>","like_count":17,"discussions":[{"author":{"id":1481979,"avatar":"https://static001.geekbang.org/account/avatar/00/16/9c/fb/7fe6df5b.jpg","nickname":"é™ˆå§è™«","note":"","ucode":"44BB84712436AB","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590490,"discussion_content":"åº”ç”¨ç¨‹åºåªä¸ç¼“å­˜äº¤äº’ï¼Œè¿˜æ˜¯ç›´æ¥ä¸mysqläº¤äº’ï¼Œéš¾é“ä¸æ˜¯ä»£ç åˆ†è£…æ–¹å¼çš„ä¸åŒå—ï¼Ÿæœ¬è´¨æµç¨‹è¿˜æ˜¯ä¸€æ ·çš„å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665815710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æµ™æ±Ÿ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111624,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f6/48/b7054856.jpg","nickname":"åŸæ¥åªæ˜¯æ¢¦","note":"","ucode":"C12C59BA333C5D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371095,"discussion_content":"æˆ‘å­¦åˆ°çš„ä¹Ÿæ˜¯è·Ÿä½ çš„ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619652395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192066,"user_name":"æ¯å¤©æ™’ç™½ç‰™","can_delete":false,"product_type":"c1","uid":1004698,"ip_address":"","ucode":"A1B102CD933DEA","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg","comment_is_top":false,"comment_ctime":1584835961,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35944574329","product_id":100046801,"comment_content":"æ€è€ƒé¢˜<br>Cache Aside æ¨¡å¼å¦‚ä½•äº§ç”Ÿè„æ•°æ®ï¼Ÿ<br>é¦–å…ˆ Cache Aside è¿™ç§æ¨¡å¼å’Œ Read&#47;Write Through    æ¨¡å¼çš„è¯»å–æ“ä½œä¸€æ ·ï¼Œéƒ½æ˜¯å…ˆå°è¯•è¯»ç¼“å­˜ï¼Œå¦‚æœå‘½ä¸­ç›´æ¥è¿”å›;æœªå‘½ä¸­çš„è¯è¯»æ•°æ®åº“ï¼Œç„¶åæ›´æ–°ç¼“å­˜ã€‚<br>å†™æ“ä½œä¸æ˜¯æ›´æ–°ç¼“å­˜ï¼Œè€Œæ˜¯æŠŠç¼“å­˜ä¸­çš„æ•°æ®åˆ æ‰<br>é‚£æ€ä¹ˆå‡ºç°è„æ•°æ®ï¼Ÿ<br>å‡è®¾æœ‰ä¸‹é¢ä¸¤ä¸ªçº¿ç¨‹å¯¹ key åˆ†åˆ«è¿›è¡Œè¯»å†™æ“ä½œ<br>è¯»çº¿ç¨‹ t1<br>å†™çº¿ç¨‹ t2<br>æŒ‰ç…§ä¸‹é¢çš„æµç¨‹è¿›è¡Œæ“ä½œ<br>1. t1 è¯»ç¼“å­˜æœªå‘½ä¸­ï¼Œç„¶åä»æ•°æ®åº“ä¸­è¯»åˆ° value1<br>2. t2 æ›´æ–° key ä¸º value2ï¼Œå¹¶å°è¯•åˆ ç¼“å­˜(æ­¤æ—¶ç¼“å­˜ä¸­å¹¶æ²¡æœ‰)<br>3. t1 æŠŠä» db ä¸­è¯»åˆ°çš„ value1å†™å›ç¼“å­˜<br><br>è¿™æ—¶ db ä¸­ key çš„ value ä¸ºæ–°æ•°æ® value2ï¼Œç¼“å­˜ä¸­ä¸ºæ—§æ•°æ® value1ï¼Œäº§ç”Ÿäº†ä¸ä¸€è‡´ã€‚<br>è¿™ç§æƒ…å†µåªå‘ç”Ÿåœ¨è¯»çº¿ç¨‹ä» bd è¯»åˆ°æ—§æ•°æ®å¾€ cache    ä¸­å†™å‰ï¼Œæœ‰å†™çº¿ç¨‹æ›´æ–°äº† dbï¼Œç„¶åè¯»çº¿ç¨‹æŠŠè€æ•°æ®å†™å› cache<br><br><br>Read&#47;Write Through å‘ç”Ÿè„æ•°æ®çš„æƒ…å†µ<br>ç¬¬ä¸€ç§æƒ…å†µæ˜¯å¹¶å‘è¯»å†™<br>å¯¹ key è¿›è¡Œè¯»å†™çš„ä¸¤ä¸ªçº¿ç¨‹<br>è¯»çº¿ç¨‹ t1<br>å†™çº¿ç¨‹ t2<br><br>æŒ‰ç…§å¦‚ä¸‹æ—¶é—´é¡ºåºæ“ä½œ<br>1.t1 å°è¯•è¯»ç¼“å­˜ä½†æœªå‘½ä¸­ï¼Œç„¶åå» db ä¸­è¯»å–åˆ°äº†æ•°æ® value1ï¼Œä½†è¿˜æœªæ›´æ–°ç¼“å­˜å…„å¼Ÿçš„æ•°æ®<br>2. t2 æ›´æ–°æ•°æ®åº“ value2ï¼Œæ›´æ–°æˆåŠŸåå¸¸è¯†è¯»å–ç¼“å­˜ï¼Œæœªå‘½ä¸­ï¼Œæ‰€ä»¥æ›´æ–°ç¼“å­˜ä¸º value2<br>3.t1 çº¿ç¨‹ç»§ç»­æŠŠä¹‹å‰ä» db ä¸­è¯»åˆ°çš„æ—§æ•°æ® value1 å†™å›ç¼“å­˜<br>è¿™æ · db ä¸­æ˜¯æ–°æ•°æ®ï¼Œä½†ç¼“å­˜ä¸­æ˜¯æ—§æ•°æ®<br><br>ç¬¬äºŒç§æƒ…å†µæ˜¯å¹¶å‘å†™<br>è¿™ç§æƒ…å†µæ˜¯db ä¸­äº§ç”Ÿäº† ABA é—®é¢˜<br>æ¯”å¦‚æœ‰ä¸¤ä¸ªå†™çº¿ç¨‹ t1,t2ï¼Œåˆ†åˆ«æŒ‰ä¸‹é¢çš„å…ˆåé¡ºåºæ“ä½œ<br>1.t1 å°è¯•æŠŠ key æ›´æ–°ä¸º value1ï¼Œä½†å“åº”ä¸¢å¤±<br>2.t2 å°è¯•æŠŠ key æ›´æ–°ä¸º value2ï¼Œè¿˜æœªå“åº”ç»“æœ<br>3.t1 å‘ç”Ÿé‡è¯•æ“ä½œ<br>4.t2 å“åº”æˆåŠŸ<br>5.t1 å“åº”æˆåŠŸ<br>æœ¬æ¥å†™åº”è¯¥æŒ‰å…ˆåé¡ºåºçš„ï¼Œt2ååˆ°ï¼Œæ•°æ®åº“å’Œç¼“å­˜ä¸­åº”è¯¥æ˜¯ value2ï¼Œä½†å› ä¸º t1 å‘ç”Ÿäº†é‡è¯•ï¼Œå¯¼è‡´æ•°æ®åº“å’Œç¼“å­˜ä¸­æ˜¯ value1äº†ï¼Œäº§ç”Ÿäº†ABAé—®é¢˜ï¼Œè§£å†³åŠæ³•æ˜¯åœ¨æ›´æ–°æ—¶åŠ ä¸Š version ç‰ˆæœ¬å·åˆ¤æ–­<br><br>æ‰€ä»¥æ²¡å•¥ä¸‡èƒ½çš„æ–¹æ³•ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯æ¥åˆ¶å®šæ–¹æ³•","like_count":8},{"had_liked":false,"id":210725,"user_name":"seg-ä¸Šæµ·","can_delete":false,"product_type":"c1","uid":1760320,"ip_address":"","ucode":"46BA8DCB06ED5E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLBllicLBj61g1ibmCeWzLYpQYEteTOtAAAypoIg6CD19ibXQBbM09VsME9Ta1G8ubwk0ibjiacItavibaeg/132","comment_is_top":false,"comment_ctime":1587815782,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23062652262","product_id":100046801,"comment_content":"1ï¼‰ç¼“å­˜åˆšå¥½å¤±æ•ˆ<br>ï¼ˆ2ï¼‰è¯·æ±‚AæŸ¥è¯¢æ•°æ®åº“ï¼Œå¾—ä¸€ä¸ªæ—§å€¼<br>ï¼ˆ3ï¼‰è¯·æ±‚Bå°†æ–°å€¼å†™å…¥æ•°æ®åº“<br>ï¼ˆ4ï¼‰è¯·æ±‚Båˆ é™¤ç¼“å­˜<br>ï¼ˆ5ï¼‰è¯·æ±‚Aå°†æŸ¥åˆ°çš„æ—§å€¼å†™å…¥ç¼“å­˜<br>","like_count":5,"discussions":[{"author":{"id":1031970,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/bf/22/26530e66.jpg","nickname":"è¶æ—©","note":"","ucode":"949FB3AA250D80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299337,"discussion_content":"ä½ è¿™ç§å¹¶ä¸ä¼šäº§ç”Ÿè„æ•°æ®ï¼Œè¯·æ±‚Aä¸ä¼šå°†æ—§å€¼å†™å…¥ç¼“å­˜ï¼Œå‡ºç°è„æ•°æ®æ˜¯åšäº†è¯»å†™åˆ†ç¦»ï¼Œå¹¶ä¸”æœ‰å»¶è¿Ÿçš„æƒ…å†µæ‰ä¼šäº§ç”Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597661422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191139,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1584748539,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"23059585019","product_id":100046801,"comment_content":"A,Bä¸¤ä¸ªè¿›ç¨‹<br>B read cache  x=null<br>B read DB x=1<br>A write DB x=2<br>A delete cache<br>B write cache x=1<br>è¿™æ—¶æ•°æ®åº“é‡Œx=2ï¼Œç¼“å­˜ä¸­x=1ï¼Œç›´åˆ°ç¼“å­˜è¿‡æœŸä¹‹å‰ä¸€ç›´æ˜¯è„æ•°æ®ã€‚è¿™ç§æ¦‚ç‡ç®—æ˜¯æ¯”è¾ƒå°çš„äº†ã€‚<br><br>æ–‡ç« ä¸­æåˆ°ç”¨ç°åº¦æ¥è§£å†³é—®é¢˜ï¼Œä¼¼ä¹è§£å†³ä¸äº†åŸºäºç±»ä¼¼redisè¿™ç§åšåˆ†å¸ƒå¼ç¼“å­˜æ—¶çš„é—®é¢˜ã€‚<br><br>","like_count":5,"discussions":[{"author":{"id":1367361,"avatar":"https://static001.geekbang.org/account/avatar/00/14/dd/41/1205154f.jpg","nickname":"Ian","note":"","ucode":"AA69F4F216BDA5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211309,"discussion_content":"å®åœ¨æä¸æ‡‚è¿™ç§é€»è¾‘ï¼ŒBè¯»æ•°æ®åº“æ—¶é—´åœ¨å‰ï¼ŒAå†™æ•°æ®åº“æ—¶é—´åœ¨åï¼Œä¸ºå•¥Bè¦ç­‰Aåˆ å®Œç¼“å­˜å†å†™ç¼“å­˜å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584839905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1046714,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","nickname":"çº¦ä¹¦äºš","note":"","ucode":"81EA27ADD9EC1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1367361,"avatar":"https://static001.geekbang.org/account/avatar/00/14/dd/41/1205154f.jpg","nickname":"Ian","note":"","ucode":"AA69F4F216BDA5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211966,"discussion_content":"Bæ²¡æœ‰æ•…æ„ç­‰ï¼Œæ˜¯ç”±äºå„ç§ä¸å¯æ§å› ç´ ï¼Œæ¯”å¦‚:ç½‘ç»œå»¶è¿Ÿï¼ŒGCï¼Œæˆ–è€…æ ¹æœ¬å°±æ˜¯Bçš„çº¿ç¨‹å¤±å»æ—¶é—´ç‰‡ä¸€ç›´å¾—ä¸åˆ°æ‰§è¡Œã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584917249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":211309,"ip_address":""},"score":211966,"extra":""}]}]},{"had_liked":false,"id":207786,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1587179221,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18767048405","product_id":100046801,"comment_content":"è€å¸ˆå¥½ã€‚æ–‡ä¸­å†™â€œè®¢å•æœåŠ¡æ”¶åˆ°æ›´æ–°æ•°æ®è¯·æ±‚ä¹‹åï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå¦‚æœæ›´æ–°æˆåŠŸäº†ï¼Œå†å°è¯•å»åˆ é™¤ç¼“å­˜ä¸­è®¢å•ï¼Œå¦‚æœç¼“å­˜ä¸­å­˜åœ¨è¿™æ¡è®¢å•å°±åˆ é™¤å®ƒï¼Œå¦‚æœä¸å­˜åœ¨å°±ä»€ä¹ˆéƒ½ä¸åšï¼Œç„¶åè¿”å›æ›´æ–°æˆåŠŸã€‚è¿™æ¡æ›´æ–°åçš„è®¢å•æ•°æ®å°†åœ¨ä¸‹æ¬¡è¢«è®¿é—®çš„æ—¶å€™åŠ è½½åˆ°ç¼“å­˜ä¸­ã€‚â€<br><br>è¯·é—®ï¼Œå‰é¢çš„è¯»çº¿ç¨‹æ²¡å‘½ä¸­ï¼Œå»æ•°æ®åº“è¯»åˆ°äº†è®¢å•æ•°æ®ï¼Œè¿™æ˜¯å†™è¿›ç¨‹è¿›æ¥å®Œæˆåï¼Œè¯»çº¿ç¨‹å°†åŸæ¥è¯»çš„è„æ•°æ®ç”Ÿæˆäº†ç¼“å­˜ï¼Œè¿™æ ·è¿˜æ˜¯ä¸èƒ½è§£å†³é—®é¢˜å•Šï¼Ÿ","like_count":4},{"had_liked":false,"id":196837,"user_name":"ä¸å°æ˜","can_delete":false,"product_type":"c1","uid":1207622,"ip_address":"","ucode":"CC23857B8D75D5","user_header":"https://static001.geekbang.org/account/avatar/00/12/6d/46/e16291f8.jpg","comment_is_top":false,"comment_ctime":1585316793,"is_pvip":false,"replies":[{"id":"74831","content":"é¦–å…ˆè¿™æ˜¯ä¸ªç»å…¸çš„æ–¹æ¡ˆï¼Œé è°±æ˜¯æ²¡é—®é¢˜çš„ã€‚å®ƒå¯ä»¥è§£å†³é—®é¢˜æ˜¯ï¼Œä¸ç”¨çœŸæ­£å»æŸ¥è¯¢æ•°æ®é›†ï¼Œå°±å¯ä»¥åˆ¤æ–­ï¼Œè¯·æ±‚çš„æ•°æ®æ˜¯ä¸æ˜¯ï¼Œä¸åœ¨æ•°æ®é›†å†…ã€‚å¦‚æœä¸åœ¨å°±ä¸ç”¨å»æŸ¥è¯¢æ•°æ®é›†äº†ã€‚<br><br>ä¸å°‘æ•°æ®åº“éƒ½å†…ç½®äº†å¸ƒéš†è¿‡æ»¤å™¨æ¥æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œæ¯”å¦‚HBaseã€‚<br><br>å¸ƒéš†è¿‡æ»¤å™¨çš„ç¼ºç‚¹å°±æ˜¯æœ‰ç‚¹å¤æ‚ï¼Œå®ç°éš¾åº¦è¿˜æ˜¯æŒºå¤§çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":"1501046","ctime":1585533305,"ip_address":"","comment_id":196837,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18765185977","product_id":100046801,"comment_content":"è€å¸ˆï¼Œç»å¸¸çœ‹åˆ°è¯´ç”¨å¸ƒéš†è¿‡æ»¤æ¥è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ‰å®é™…çš„æ¡ˆä¾‹å—ï¼Ÿ<br>å¦‚æœæ˜¯çœŸçš„å¯ä»¥é‚£ä¹ˆæ€ä¹ˆå»æ“ä½œå‘¢ï¼Ÿ<br>å…ˆåˆå§‹åŒ–æ‰€æœ‰å¯èƒ½å­˜åˆ°ç¼“å­˜é‡Œé¢æ•°æ®çš„keyåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å¸ƒéš†è¿‡æ»¤å™¨ï¼Œç„¶åå¦‚æœæœ‰æ–°å¢æ•°æ®å°±å°±ç»§ç»­å¾€è¿‡æ»¤å™¨ä¸­æ”¾ï¼Œåˆ é™¤å°±ä»è¿‡æ»¤å™¨é‡Œé¢åˆ ï¼ˆåˆçœ‹åˆ°è¯´ä¸ç”¨bitçš„è¯æ”¯æŒç´¯åŠ åˆ é™¤ï¼‰<br>å¦‚æœå‘ç°ä¸åœ¨è¿‡æ»¤å™¨ä¸­å°±è¡¨ç¤ºä¸€å®šä¸å­˜åœ¨ï¼Œå°±æ— éœ€æŸ¥è¯¢äº†ã€‚å¦‚æœåœ¨è¿‡æ»¤å™¨ä¸­ä¹Ÿæœ‰å¯èƒ½ä¸å­˜åœ¨ï¼Œè¿™ä¸ªæ—¶å€™åœ¨é…åˆnullå€¼ã€‚<br>è¿™ä¸ªæ–¹æ¡ˆé è°±ä¹ˆï¼Œå¸Œæœ›è€å¸ˆèƒ½è§£ç­”ä¸€ä¸‹","like_count":4,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489401,"discussion_content":"é¦–å…ˆè¿™æ˜¯ä¸ªç»å…¸çš„æ–¹æ¡ˆï¼Œé è°±æ˜¯æ²¡é—®é¢˜çš„ã€‚å®ƒå¯ä»¥è§£å†³é—®é¢˜æ˜¯ï¼Œä¸ç”¨çœŸæ­£å»æŸ¥è¯¢æ•°æ®é›†ï¼Œå°±å¯ä»¥åˆ¤æ–­ï¼Œè¯·æ±‚çš„æ•°æ®æ˜¯ä¸æ˜¯ï¼Œä¸åœ¨æ•°æ®é›†å†…ã€‚å¦‚æœä¸åœ¨å°±ä¸ç”¨å»æŸ¥è¯¢æ•°æ®é›†äº†ã€‚\n\nä¸å°‘æ•°æ®åº“éƒ½å†…ç½®äº†å¸ƒéš†è¿‡æ»¤å™¨æ¥æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œæ¯”å¦‚HBaseã€‚\n\nå¸ƒéš†è¿‡æ»¤å™¨çš„ç¼ºç‚¹å°±æ˜¯æœ‰ç‚¹å¤æ‚ï¼Œå®ç°éš¾åº¦è¿˜æ˜¯æŒºå¤§çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585533305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219520,"user_name":"ä»»é¹æ–Œ","can_delete":false,"product_type":"c1","uid":1104086,"ip_address":"","ucode":"34319B05EA6E74","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/d6/47da34bf.jpg","comment_is_top":false,"comment_ctime":1590035391,"is_pvip":false,"replies":[{"id":"81472","content":"ä¸¥æ ¼æ¥è¯´ï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹ï¼ŒäºŒç§æ–¹å¼éƒ½æœ‰å¯èƒ½äº§ç”Ÿè„æ•°æ®ã€‚Cache Aside Patternå»ºè®®ï¼Œå…ˆæ“ä½œæ•°æ®åº“ï¼Œå†æ“ä½œç¼“å­˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":"1501046","ctime":1590370248,"ip_address":"","comment_id":219520,"utype":1}],"discussion_count":4,"race_medal":0,"score":"14474937279","product_id":100046801,"comment_content":"è€å¸ˆCache Asideåº”è¯¥æ˜¯å…ˆåˆ ç¼“å­˜åæ›´æ–°æ•°æ®åº“å§ï¼Ÿå…ˆæ›´æ–°æ•°æ®åº“çš„è¯ä¸€æ—¦ç¼“å­˜åˆ é™¤å¤±è´¥äº†ï¼Œå°±ä¼šäº§ç”Ÿè„æ•°æ®","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495838,"discussion_content":"ä¸¥æ ¼æ¥è¯´ï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹ï¼ŒäºŒç§æ–¹å¼éƒ½æœ‰å¯èƒ½äº§ç”Ÿè„æ•°æ®ã€‚Cache Aside Patternå»ºè®®ï¼Œå…ˆæ“ä½œæ•°æ®åº“ï¼Œå†æ“ä½œç¼“å­˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590370248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144579,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKpSMbVNXBjCubrNiccEMImicVuK47fjWgkl3NPIKB2n7nrLSPdFz66ZXro7rh06zZIbwE5UNZbwJkw/132","nickname":"çŸ¥ä¹‹å–„è¯¢","note":"","ucode":"DB0D1E5CAC40A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352527,"discussion_content":"å¥½åƒæœ‰ä¸ªæ–‡ç« é‡Œæ˜¯è¯´ï¼Œæ›´æ–°å‰å…ˆåˆ ç¼“å­˜ï¼Œæ›´æ–°åå†åˆ ä¸€æ¬¡ç¼“å­˜ï¼Œé¿å…è¿™é‡Œæåˆ°çš„é—®é¢˜ã€‚ä¸è¿‡æƒ³æƒ³ï¼Œé«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå¥½åƒæ›´æ–°å‰åˆ ç¼“å­˜ï¼Œä½œç”¨ä¹Ÿä¸å¤§ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1614762839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1144579,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKpSMbVNXBjCubrNiccEMImicVuK47fjWgkl3NPIKB2n7nrLSPdFz66ZXro7rh06zZIbwE5UNZbwJkw/132","nickname":"çŸ¥ä¹‹å–„è¯¢","note":"","ucode":"DB0D1E5CAC40A7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366289,"discussion_content":"å¯¹ï¼Œå› ä¸ºåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä»ç„¶å¯èƒ½æœ‰è¯»çº¿ç¨‹åœ¨ç¬¬ä¸€æ¬¡åˆ é™¤ç¼“å­˜ï¼ŒåŠ è½½æ—§æ•°æ®è¿›ç¼“å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618021872,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352527,"ip_address":""},"score":366289,"extra":""}]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534696,"discussion_content":"å…ˆåˆ ç¼“å­˜ æ­¤æ—¶æ•°æ®åº“è¿˜æ²¡æ›´æ–° å¾®è§‚ä¸Šè¯»è¯·æ±‚æ‹¿åˆ°æ—§æ•°æ®æ˜¯åˆç†çš„ã€‚\nè¿™å°±åƒç¼“å­˜å¤±æ•ˆ è¯»è¯·æ±‚è¯»å‡ºæ—§æ•°æ®ä¸€æ · æ€»æ˜¯åˆç†çš„ã€‚ä½†æ˜¯è¿™ç§åœ¨å®è§‚ä¸Š ä¸šåŠ¡ä¸Šå¯èƒ½å°±ä¸åˆç† è¿™å°±è¦æ±‚åœ¨åç»­æµç¨‹é‡Œå¯¹æ—§ç‰ˆæœ¬æ•°æ®å…è®¸ä¸€æ®µæ—¶é—´å†…çš„å®¹é”™ç‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638257971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":209873,"user_name":"æ¡äº†ä¸ªå¤§èš‚èš±","can_delete":false,"product_type":"c1","uid":1488356,"ip_address":"","ucode":"AD34AD4FA37371","user_header":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","comment_is_top":false,"comment_ctime":1587630400,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14472532288","product_id":100046801,"comment_content":"æ€»ç»“ï¼š<br>1.ä¸ºä»€ä¹ˆå…ˆæ›´æ–°mysqlå†æ›´æ–°ï¼ˆåˆ é™¤ï¼‰redisæ¯”åè¿‡æ¥å¥½ï¼Ÿ<br><br>é™ä½äº†è„æ•°æ®å‡ºç°çš„æ¦‚ç‡ï¼Œå‰è€…äº§ç”Ÿè„æ•°æ®æ˜¯ç”±äºå¹¶å‘ï¼Œåè€…å‡ ä¹æ˜¯å¿…ç„¶ï¼Œåªè¦å…ˆå†™å†è¯»çš„è¯·æ±‚å‘ç”Ÿï¼Œéƒ½ä¼šé€ æˆè„æ•°æ®ï¼šå…ˆæŠŠredisä¸­çš„ç¼“å­˜æ¸…äº†ï¼Œç„¶åè¯»è¯·æ±‚è¯»ä¸åˆ°å»æ•°æ®åº“ä¸­æ‰¾åˆ°å¹¶æ›´æ–°åœ¨redisä¸­ã€‚<br>2.ä¸ºä»€ä¹ˆaside cacheæ¯”read&#47;write throughå¥½ï¼Ÿ<br>ä¹Ÿæ˜¯é™ä½äº†è„æ•°æ®å‡ºç°çš„æ¦‚ç‡ã€‚å‰è€…åªæœ‰è¯»å†™å…ˆåè®¿é—®æ•°æ®åº“ï¼Œåˆè°ƒè½¬é¡ºåºè®¿é—®redisæ—¶redisä¸­å‡ºç°è„æ•°æ®ï¼Œè¿™ä¸ªæ¦‚ç‡å¾ˆå°ï¼Œè€Œå¹¶å‘å†™æ—¶ç›¸å½“äºä¸æ“ä½œredisï¼›è€Œåè€…åœ¨å¹¶å‘å†™çš„æƒ…å†µä¸‹ä¹Ÿå®¹æ˜“è„ã€‚","like_count":3},{"had_liked":false,"id":207801,"user_name":"ç‹æ°","can_delete":false,"product_type":"c1","uid":1944186,"ip_address":"","ucode":"53CC01032E4A25","user_header":"","comment_is_top":false,"comment_ctime":1587182664,"is_pvip":false,"replies":[{"id":"77840","content":"mvccå¯ä»¥å¾ˆå¥½çš„è§£å†³è¯»å†™å†²çªï¼Œä½†æ˜¯å¯¹äºå†™å†™å†²çªï¼Œè¦ä¹ˆåŠ é”ï¼Œè¦ä¹ˆå¼•å…¥å†²çªæ£€æµ‹æœºåˆ¶ï¼Œå¦åˆ™å°±ä¼šå¯¼è‡´å†™å€¾æ–œçš„é—®é¢˜ã€‚è¿™ä¸ªåœ¨23ä¸­æœ‰è¯¦ç»†çš„è¯´æ˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":"1501046","ctime":1587351948,"ip_address":"","comment_id":207801,"utype":1}],"discussion_count":5,"race_medal":0,"score":"14472084552","product_id":100046801,"comment_content":"ä½œè€…å›å¤: ä½ å¯ä»¥å‚è€ƒä¸€ä¸‹â€œGaGiîâ€åŒå­¦çš„ç•™è¨€ï¼Œç”¨é”æ¥è§£å†³å¹¶å‘é—®é¢˜ã€‚------------------------------------------------------è€å¸ˆï¼Œåœ¨è¯»çº¿ç¨‹ä¸Šå†™é”ï¼ˆè¯´ç‹¬å é”æ¯”è¾ƒåˆé€‚ï¼‰ï¼Œæ˜¯å¦è·ŸMVCCç›¸è¿èƒŒï¼ŒMVCCä¸å°±æ˜¯ä¸ºäº†ç”¨æ¥è§£å†³é«˜å¹¶å‘å¸¦æ¥çš„è¯»å†™é˜»å¡é—®é¢˜å—ï¼Ÿæˆ‘è¿™è¾¹æœ‰ä¸¤ç§è§£å†³æ€è·¯ä¸çŸ¥å¯å¦ï¼šç¬¬ä¸€ç”¨ç‰ˆæœ¬æ§åˆ¶ï¼Œç±»ä¼¼MVCCï¼Œç¬¬äºŒç§ç”¨Read&#47;Write Throughï¼Œå†™å†™å¹¶å‘åœ¨MVCCæ¨¡å¼ä¸‹ä¾ç„¶æ˜¯é˜»å¡çš„ï¼Œä¸ç®—è¿èƒŒï¼Œæ‰€ä»¥åªè¦æŠŠæ›´æ–°æ•°æ®åº“ä¸æ›´æ–°ç¼“å­˜æ”¾å…¥ç»Ÿä¸€äº‹åŠ¡ä¸­å°±è¡Œã€‚è¯»å†™å¹¶å‘ä¸é˜»å¡ï¼Œæ˜¯å› ä¸ºmysqlç”¨äº†å¿«ç…§è¯»åŸå› ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç»§ç»­å†™çº¿ç¨‹æ›´æ–°ç¼“å­˜ï¼Œè¯»çº¿ç¨‹é‡‡ç”¨redisçš„setnxæ–¹å¼è§£å†³è¦†ç›–","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492244,"discussion_content":"mvccå¯ä»¥å¾ˆå¥½çš„è§£å†³è¯»å†™å†²çªï¼Œä½†æ˜¯å¯¹äºå†™å†™å†²çªï¼Œè¦ä¹ˆåŠ é”ï¼Œè¦ä¹ˆå¼•å…¥å†²çªæ£€æµ‹æœºåˆ¶ï¼Œå¦åˆ™å°±ä¼šå¯¼è‡´å†™å€¾æ–œçš„é—®é¢˜ã€‚è¿™ä¸ªåœ¨23ä¸­æœ‰è¯¦ç»†çš„è¯´æ˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587351948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1980201,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","nickname":"å‡¯æ–‡å°çŒª","note":"","ucode":"36D8AD0229547F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534713,"discussion_content":"mvccè§£å†³çš„æ˜¯è¯»å†™å¹¶å‘ ä»¥åŠæœ¬åœ°å› æœä¸€è‡´æ€§ã€‚ä½†æ˜¯å¯¹äºå†™å†™å¹¶å‘mysqlå®˜æ–¹è‡³ä»Šè¿˜æ²¡æœ‰ä¸€ä¸ªæ¨èçš„æ–¹æ¡ˆã€‚é€šå¸¸æˆ‘ä»¬éƒ½æ˜¯ç”¨ä¹è§‚é”æ¥åšçš„ã€‚\nå› ä¸ºè¿™ä¼šç‰µæ¶‰åˆ°ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´é”äº’æ–¥ æˆ–è€…å†™åè°ƒï¼ˆå†™åŒæ­¥ï¼‰ã€‚é€šå¸¸éœ€è¦è®¾è®¡ä¸€ä¸ªç±»ä¼¼snoopyåè®®æˆ–æ˜¯ä¸Šä¸€æŠŠå¤§é”ä¹‹ç±»çš„ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638260593,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1944186,"avatar":"","nickname":"ç‹æ°","note":"","ucode":"53CC01032E4A25","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244571,"discussion_content":"æ˜¯çš„ï¼ŒMVCCæ¨¡å¼ä¸‹ï¼Œmysqlçš„æ™®é€šè¯»æ˜¯å¿«ç…§è¯»ï¼Œä½†æ˜¯å†™æ˜¯å®æ—¶å†™ï¼ˆå­˜åœ¨ç‹¬å é”çš„è¯´æ³•ï¼‰ï¼Œä½†æ˜¯å¯¹äºGaGiåŒå­¦åœ¨è¯»ç¼“å­˜æ²¡è¯»åˆ°ä¸Šå†™é”ï¼ˆfor updateï¼‰çš„åšæ³•ä¸æ•¢è‹ŸåŒå•Šï¼Œä¼šæœ‰æ€§èƒ½é£é™©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587613867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1944186,"avatar":"","nickname":"ç‹æ°","note":"","ucode":"53CC01032E4A25","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366294,"discussion_content":"æˆ‘è§‰å¾—è¯»çº¿ç¨‹å¯ä»¥åŠ è¯»é”ï¼Œlock in share mode\nä½†æ˜¯è¯»å†™é”çš„é—®é¢˜åœ¨äºè¯»çº¿ç¨‹å¤šï¼Œå†™çº¿ç¨‹å°‘ï¼Œå®¹æ˜“å¯¼è‡´å†™çº¿ç¨‹é¥¥é¥¿\nå› æ­¤è¯»æœªå‘½ä¸­ï¼Œæ›´æ–°ç¼“å­˜\nå†™æ›´æ–°ï¼Œæ›´æ–°æ•°æ®åº“åï¼Œæ›´æ–°ç¼“å­˜\nå°½é‡ä¿è¯è¯»ä»ç¼“å­˜ï¼Œå†™åˆ°æ•°æ®åº“ï¼Œä¸¤è€…æ•°æ®ä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618022366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":244571,"ip_address":""},"score":366294,"extra":""},{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1944186,"avatar":"","nickname":"ç‹æ°","note":"","ucode":"53CC01032E4A25","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366298,"discussion_content":"ä½ æåˆ°çš„redisçš„setnxä¹Ÿæ˜¯äº’æ–¥é”ï¼Œåªæ˜¯ç”±æ•°æ®åº“çš„ç‹¬å é”æ”¹ä¸ºåˆ†å¸ƒå¼çš„ç‹¬å é”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618022519,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":244571,"ip_address":""},"score":366298,"extra":""}]}]},{"had_liked":false,"id":196107,"user_name":"image","can_delete":false,"product_type":"c1","uid":1039069,"ip_address":"","ucode":"A45BFF284F8933","user_header":"https://static001.geekbang.org/account/avatar/00/0f/da/dd/1e5e7b0c.jpg","comment_is_top":false,"comment_ctime":1585235906,"is_pvip":false,"replies":[{"id":"74412","content":"è¿™ç§æƒ…å†µç†è®ºä¸Šä¹Ÿæ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œæ¥è¯´è¯´å®é™…ä¸Šçš„ä¸€äº›å¤„ç†ç»éªŒã€‚<br><br>é¦–å…ˆï¼Œé¿å…çŸ­æ—¶é—´å¤§é‡äººä¸ºçš„ç©ºå€¼æ”»å‡»ï¼Œè¿™ä¸ªäº‹å„¿åº”è¯¥åœ¨ä¸Šå±‚å®‰å…¨æˆ–è€…é£æ§å±‚é¢å»è§£å†³ã€‚ï¼ˆå³ä½¿æ— æ³•åˆ¤æ–­æ˜¯å¦ç©ºå€¼æ”»å‡»ï¼Œè‡³å°‘è¦æ‹¦æˆªä½çŸ­æ—¶é—´å¤§é‡çš„ä¸æ­£å¸¸è®¿é—®è¯·æ±‚ï¼‰<br><br>å‰©ä½™ä¸‹æ¥çš„å°±æ˜¯ä¸šåŠ¡ä¸Šæ­£å¸¸çš„æŸ¥è¯¢è¿”å›ç©ºçš„æƒ…å†µï¼Œè¿™ç§å¯èƒ½è¦ä»ä¸šåŠ¡ä¸Šæ¥è®¾è®¡ä¸€ä¸‹ï¼Œå°½é‡é¿å…å¤§é‡å¯èƒ½çš„ç©ºå€¼æŸ¥è¯¢ã€‚<br><br>ä»¥ä¸Š2ç‚¹åšäº†ä¹‹åï¼Œç©ºå€¼æŸ¥è¯¢å°±ä¼šå°‘å¤šäº†ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ç¼“å­˜ç©ºå€¼ï¼Œæˆ–è€…è®©ç©ºå€¼ç©¿é€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":"1501046","ctime":1585274710,"ip_address":"","comment_id":196107,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14470137794","product_id":100046801,"comment_content":"å¦‚æœç¼“å­˜æ—¶æœ‰å¤§é‡å‘½ä¸­ä¸ºnullå¦‚ä½•å¤„ç†ï¼Ÿå¦‚æœå‘½ä¸­null ä¹Ÿè¿›è¡Œç¼“å­˜ï¼Œä¼šå¯¼è‡´ç¼“å­˜å¢é•¿å¤ªå¿«ï¼Œå®¹æ˜“è¢«æ”»å‡»<br>å¦‚æœä¸ç¼“å­˜ï¼Œåˆå®¹æ˜“å¼•èµ·å¤§é‡ç©¿é€","like_count":3,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":489226,"discussion_content":"è¿™ç§æƒ…å†µç†è®ºä¸Šä¹Ÿæ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œæ¥è¯´è¯´å®é™…ä¸Šçš„ä¸€äº›å¤„ç†ç»éªŒã€‚\n\né¦–å…ˆï¼Œé¿å…çŸ­æ—¶é—´å¤§é‡äººä¸ºçš„ç©ºå€¼æ”»å‡»ï¼Œè¿™ä¸ªäº‹å„¿åº”è¯¥åœ¨ä¸Šå±‚å®‰å…¨æˆ–è€…é£æ§å±‚é¢å»è§£å†³ã€‚ï¼ˆå³ä½¿æ— æ³•åˆ¤æ–­æ˜¯å¦ç©ºå€¼æ”»å‡»ï¼Œè‡³å°‘è¦æ‹¦æˆªä½çŸ­æ—¶é—´å¤§é‡çš„ä¸æ­£å¸¸è®¿é—®è¯·æ±‚ï¼‰\n\nå‰©ä½™ä¸‹æ¥çš„å°±æ˜¯ä¸šåŠ¡ä¸Šæ­£å¸¸çš„æŸ¥è¯¢è¿”å›ç©ºçš„æƒ…å†µï¼Œè¿™ç§å¯èƒ½è¦ä»ä¸šåŠ¡ä¸Šæ¥è®¾è®¡ä¸€ä¸‹ï¼Œå°½é‡é¿å…å¤§é‡å¯èƒ½çš„ç©ºå€¼æŸ¥è¯¢ã€‚\n\nä»¥ä¸Š2ç‚¹åšäº†ä¹‹åï¼Œç©ºå€¼æŸ¥è¯¢å°±ä¼šå°‘å¤šäº†ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ç¼“å­˜ç©ºå€¼ï¼Œæˆ–è€…è®©ç©ºå€¼ç©¿é€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585274710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":248121,"user_name":"ç¨‹å ƒ","can_delete":false,"product_type":"c1","uid":1549808,"ip_address":"","ucode":"50D02D13CAD09A","user_header":"https://static001.geekbang.org/account/avatar/00/17/a5/f0/c4eba20f.jpg","comment_is_top":false,"comment_ctime":1600038229,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10189972821","product_id":100046801,"comment_content":"é—®é¢˜ï¼šè¯»çº¿ç¨‹æŸ¥åˆ°ç¼“å­˜ä¸ºç©ºåï¼Œè¯»dbæ•°æ®å¹¶å†™å…¥ç¼“å­˜ï¼Œåœ¨å†™å…¥ä¹‹å‰å¦ä¸€ä¸ªæ›´æ–°æ“ä½œä¿®æ”¹äº†dbæ•°æ®ï¼Œä¼šå¯¼è‡´dbä¸ç¼“å­˜æ•°æ®ä¸ä¸€è‡´ã€‚<br>æ–¹æ¡ˆï¼šå°†Cache Asideçš„åˆ é™¤æ“ä½œæ”¹æˆè®¾ç½®ç¼“å­˜å‡ ç§’åå¤±æ•ˆï¼Œæˆ–è€…åŠ åˆ†å¸ƒå¼é”","like_count":2},{"had_liked":false,"id":204279,"user_name":"å¤ç›®","can_delete":false,"product_type":"c1","uid":1212750,"ip_address":"","ucode":"67C075A01CF4D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/81/4e/d71092f4.jpg","comment_is_top":false,"comment_ctime":1586359152,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10176293744","product_id":100046801,"comment_content":"çº¿ç¨‹1è¯»å–ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢å½“å‰æ•°æ®åº“æ•°æ®<br>çº¿ç¨‹2æ›´æ–°å½“å‰æ•°æ®åº“æ•°æ®ï¼Œåˆ é™¤ç¼“å­˜(ä¸å­˜åœ¨)<br>çº¿ç¨‹1è®²è€æ•°æ®æ›´æ–°è‡³ç¼“å­˜ï¼Œå¯¼è‡´å½“å‰æ•°æ®åº“æ•°æ®ä¸ç¼“å­˜ä¸ä¸€è‡´","like_count":2},{"had_liked":false,"id":192496,"user_name":"é™¶é‡‘","can_delete":false,"product_type":"c1","uid":1647666,"ip_address":"","ucode":"14ECFE57ABC162","user_header":"https://static001.geekbang.org/account/avatar/00/19/24/32/c712d415.jpg","comment_is_top":false,"comment_ctime":1584855477,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10174790069","product_id":100046801,"comment_content":"package main<br><br>import (<br>\t&quot;fmt&quot;<br>\t&quot;sync&quot;<br>\t&quot;time&quot;<br>)<br><br>type BaseModel struct {<br>\tdata int<br>\tmu sync.RWMutex<br>}<br><br><br>var cache *BaseModel<br>var db *BaseModel<br>const FIRST_DATA = 1<br>const SECNOD_DATA = 2<br>const EMPTY_DATA = 0<br><br>func init() {<br>\tcache = new (BaseModel)<br>\tdb = new (BaseModel)<br>\tdb.setData(FIRST_DATA)<br>}<br><br><br>func main() {<br><br>\tgo read()<br>\tgo write(SECNOD_DATA)<br><br>\ttime.Sleep(3 * time.Second)<br>\tfmt.Println(&quot;db&#39;s data is %d, cache&#39;s data is %d&quot;, db.getData(), cache.getData())<br>}<br><br><br>func read() {<br>\tdata := cache.getData()<br>\tif data == 0 {<br>\t\tdata = db.getData()<br>\t\ttime.Sleep(2* time.Second)<br>\t\tcache.setData(data)<br>\t}<br>}<br><br><br>func write(data int) {<br>\ttime.Sleep(1*time.Second)<br>\tdb.setData(data)<br>\tcache.setData(EMPTY_DATA)<br>}<br><br><br>func (self *BaseModel) getData() int {<br>\tself.mu.RLock()<br>\tdefer self.mu.RUnlock()<br>\treturn self.data<br>}<br><br>func (self *BaseModel) setData(data int) {<br>\tself.mu.Lock()<br>\tdefer self.mu.Unlock()<br>\tself.data = data<br>}<br><br>å¤§æ¦‚åœºæ™¯å¦‚ä¸‹ï¼š<br>1. åˆå§‹æ•°æ®åº“ä¸­æ•°æ®ä¸ºâ€œ1â€ï¼Œç¼“å­˜æ— æ•°æ®<br>2. çº¿ç¨‹Aä¸ºè¯»çº¿ç¨‹ï¼Œè¯»å–ç¼“å­˜æœªæœï¼Œç„¶åè¯»å–æ•°æ®åº“ä¸­çš„è®°å½•ä¸ºâ€œ1â€ï¼Œè¿™æ—¶å€™ç¼“å­˜é˜»å¡ä½ã€‚<br>3. çº¿ç¨‹Bä¸ºå†™çº¿ç¨‹ï¼Œå…ˆæŠŠæ•°æ®åº“ä¸­çš„æ•°æ®æ›´æ–°ä¸ºâ€œ2â€ï¼Œå†åˆ é™¤ç¼“å­˜ï¼Œç»“æŸã€‚<br>4. æ­¤æ—¶çº¿ç¨‹Aè§£é™¤é˜»å¡ï¼Œç„¶åæŠŠè®°å½•â€œ1â€æ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚<br><br>æ­¤æ—¶ç¼“å­˜ä¸­æ•°æ®ä¸ºâ€œ1â€ï¼Œ æ•°æ®åº“ä¸­æ•°æ®ä¸ºâ€œ2â€ï¼Œ ç¼“å­˜è½åäºæ•°æ®åº“ä¸­çš„æ•°æ®ã€‚<br>","like_count":2},{"had_liked":false,"id":191173,"user_name":"R20114","can_delete":false,"product_type":"c1","uid":1046260,"ip_address":"","ucode":"883B7FD07443BC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f6/f4/95191165.jpg","comment_is_top":false,"comment_ctime":1584752562,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10174687154","product_id":100046801,"comment_content":"Cache Aside æ¨¡å¼åœ¨ä¸‹é¢çš„åœºæ™¯ä¸‹ï¼š<br>è¯»å†™çº¿ç¨‹ä¹‹é—´åœ¨æ‰§è¡Œ Cache Aside Pattern æ“ä½œçš„æ—¶å€™ï¼Œå†™çº¿ç¨‹åˆ é™¤äº†ç¼“å­˜ï¼Œè¯»çº¿ç¨‹ä» DB è¯»åˆ°è€çš„æ•°æ®ï¼ŒæŠŠè€çš„æ•°æ®æ”¾åˆ°äº†ç¼“å­˜ä¸­ï¼Œè¿™æ ·å°±ä¼šåœ¨ç¼“å­˜ä¸­äº§ç”Ÿè„æ•°æ®ã€‚","like_count":2,"discussions":[{"author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"è§‚å¼ˆé“äºº","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210800,"discussion_content":"å…ˆå†™dB æ•°æ®ï¼Œå†åˆ ç¼“å­˜ï¼Œç¼“å­˜åˆ é™¤çš„æ—¶å€™ï¼Œdbæ•°æ®å·²ç»è½åº“ï¼Œè¯»çº¿ç¨‹è¯»ä¸åˆ°ç¼“å­˜çš„æ—¶å€™ï¼Œå†å»è¯»db,æ­¤æ—¶dbå·²ç»æ˜¯æ–°æ•°æ®ï¼Œæ„Ÿè§‰ä¸ä¼šæœ‰é—®é¢˜ï¼Œè™½ç„¶æœ‰è¿˜å‡ ä¸ªç•™è¨€æå‡ºé—®é¢˜äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584776290,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1046260,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f6/f4/95191165.jpg","nickname":"R20114","note":"","ucode":"883B7FD07443BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1016905,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/84/49/47d48fd0.jpg","nickname":"è§‚å¼ˆé“äºº","note":"","ucode":"F3BB619A33C605","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211280,"discussion_content":"åœ¨å¦‚ä¸‹åœºæ™¯ï¼Œè¿™ç§æƒ…å†µå¾ˆå®¹æ˜“å‘ç”Ÿï¼š\n1. DB é€šè¿‡ä¸»ä»å¤åˆ¶åšè¯»å†™åˆ†ç¦»ï¼Œå†™æ“ä½œåœ¨ä¸»åº“æ‰§è¡Œï¼Œè¯»æ“ä½œåœ¨ä»åº“æ‰§è¡Œï¼Œä¸»ä»å¤åˆ¶ä¹‹é—´å­˜åœ¨å»¶æ—¶ã€‚\n2. ä¸€ä¸ª Java è¯­è¨€å¼€å‘çš„æœåŠ¡é›†ç¾¤ï¼Œè¯»æ“ä½œå‘ç”Ÿåœ¨è¿›ç¨‹A, å†™æ“ä½œå‘ç”Ÿåœ¨è¿›åŸB, t1æ—¶åˆ»è¿›ç¨‹ A è¯»åˆ°æ—§çš„æ•°æ®ç„¶åå‘ç”Ÿäº† GCï¼Œt2 æ—¶åˆ»è¿›ç¨‹ B ä¸­å†™æ“ä½œæ›´æ–°äº† DB å¹¶ä¸”åˆ é™¤äº†ç¼“å­˜ï¼Œt3 æ—¶åˆ»è¿›ç¨‹ A ä¸­ä¸šåŠ¡çº¿ç¨‹æ¢å¤æ›´æ–°äº†ç¼“å­˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584838057,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":210800,"ip_address":""},"score":211280,"extra":""}]}]},{"had_liked":false,"id":255395,"user_name":"ç¿ ç¾½é¦™å‡","can_delete":false,"product_type":"c1","uid":1119933,"ip_address":"","ucode":"54F3762F0E545F","user_header":"https://static001.geekbang.org/account/avatar/00/11/16/bd/e14ba493.jpg","comment_is_top":false,"comment_ctime":1603335125,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5898302421","product_id":100046801,"comment_content":"æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸€ç›´æ²¡ææ˜ç™½ã€‚å¦‚æœä½¿ç”¨redisä½œä¸ºmysqlçš„å‰ç½®ï¼Œåœ¨å†™æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦åŒæ—¶å†™Mysqlå’Œredisï¼Œå¦‚æœæ›´æ–°mysqlæˆåŠŸåï¼Œæ›´æ–°redisæ²¡æˆåŠŸï¼Œé€ æˆäº†ä¸¤è€…ä¹‹é—´çš„ä¸ä¸€è‡´ï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆåŠï¼Ÿ","like_count":1},{"had_liked":false,"id":207795,"user_name":"ç‹æ°","can_delete":false,"product_type":"c1","uid":1944186,"ip_address":"","ucode":"53CC01032E4A25","user_header":"","comment_is_top":false,"comment_ctime":1587181627,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5882148923","product_id":100046801,"comment_content":"ä½ å¥½ï¼Œä½¿ç”¨ Cache Aside æ¨¡å¼æ›´æ–°ç¼“å­˜å¥½åƒä¹Ÿä¼šäº§ç”Ÿè„æ•°æ®ã€‚å°±å¦‚æ–‡ç« é‡Œæ‰€è¯´ï¼Œå½“ä¸€ä¸ªè¯»çº¿ç¨‹æ²¡æœ‰ä»ç¼“å­˜ä¸­è¯»åˆ°æ•°æ®ï¼Œè¿›è€Œå»æŸ¥æ•°æ®åº“è·å–åˆ°æ•°æ®ï¼Œè¿™æ—¶ä¸€ä¸ªå†™çº¿ç¨‹æ›´æ–°äº†æ•°æ®åº“å¹¶åˆ é™¤ç¼“å­˜ï¼Œå¯èƒ½ç”±äºè¯»çº¿ç¨‹æ”¾å…¥æ—§æ•°æ®åˆ°ç¼“å­˜æ—¶æœºæ¯”è¾ƒæ™šå†™çº¿ç¨‹æ²¡æ³•åˆ åˆ°ï¼Œå¯¼è‡´ç¼“å­˜ä¸­å¯èƒ½ä¸æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œåé¢å†æœ‰çº¿ç¨‹è¿‡æ¥æŸ¥è¯¢è‡ªç„¶ä¹Ÿè¯»ä¸åˆ°æ–°æ•°æ®äº†","like_count":1},{"had_liked":false,"id":191148,"user_name":"Mq","can_delete":false,"product_type":"c1","uid":1178359,"ip_address":"","ucode":"041F572AFAB275","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/f7/91ac44c5.jpg","comment_is_top":false,"comment_ctime":1584750168,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5879717464","product_id":100046801,"comment_content":"è€å¸ˆå¥½ï¼Œå†™æ•°æ®è·Ÿåˆ ç¼“å­˜ä¸æ˜¯ä¸€è‡´çš„ï¼Œå†™å®Œæ•°æ®åˆ°åˆ ç¼“å­˜è¿™æ®µæ—¶é—´å†…å…¶ä»–å¹¶å‘è®¿é—®éƒ½æ˜¯è„æ•°æ®ï¼Œè¿™ç§æ€ç»´æ–¹å¼æ„Ÿè§‰ä¸è§£å†³ä¸€è‡´æ€§é—®é¢˜ï¼Œéƒ½ä¼šæœ‰å¯èƒ½å‡ºç°è„è¯»ï¼Œåªæ˜¯æ—¶é—´é•¿çŸ­é—®é¢˜","like_count":1,"discussions":[{"author":{"id":1332557,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erbY9UsqHZhhVoI69yXNibBBg0TRdUVsKLMg2UZ1R3NJxXdMicqceI5yhdKZ5Ad6CJYO0XpFHlJzIYQ/132","nickname":"é¥­å›¢","note":"","ucode":"E24F240CC91BE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":214994,"discussion_content":"åŠ ç‰ˆæœ¬å·é è°±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585270897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":338264,"user_name":"è¿‡yearçš„year","can_delete":false,"product_type":"c1","uid":1249899,"ip_address":"","ucode":"D02971800EEB57","user_header":"https://static001.geekbang.org/account/avatar/00/13/12/6b/c5ca7d9e.jpg","comment_is_top":false,"comment_ctime":1647398906,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1647398906","product_id":100046801,"comment_content":"æœ‰ç‚¹è¯´çš„ä¸å¤Ÿå‡†ç¡®ï¼Œè„æ•°æ®çš„æ¦‚ç‡ä¸æ˜¯å’Œç³»ç»Ÿçš„å¹¶å‘é‡æ­£ç›¸å…³ï¼Œè€Œæ˜¯å’Œå•key(æ­¤å¤„æŒ‡å•ç”¨æˆ·ã€å•è®¢å•)çš„å¹¶å‘åº¦ï¼Œå…¶å®å³ä½¿ä¸šåŠ¡è§„æ¨¡å¾ˆå¤§ï¼Œè„æ•°æ®çš„æ¦‚ç‡ä¹Ÿæœªå¿…å¤§ã€‚","like_count":0},{"had_liked":false,"id":324913,"user_name":"å»ºå¼º","can_delete":false,"product_type":"c1","uid":1397126,"ip_address":"","ucode":"62B03D0E0C64EC","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg","comment_is_top":false,"comment_ctime":1638714432,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638714432","product_id":100046801,"comment_content":"æ€è€ƒé¢˜ï¼š<br>Cache Asideäº§ç”Ÿè„æ•°æ®ï¼Œä¸ªäººè‚¤æµ…ç†è§£ä¹Ÿæ˜¯æœ‰ä¸¤ç§æƒ…å†µï¼š<br>1ã€å½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ›´æ–°æ•°æ®æ—¶ï¼Œä¸€ä¸ªå› ä¸ºç½‘ç»œåŸå› æ›´æ–°å¤±è´¥ï¼Œä¸€ä¸ªæˆåŠŸï¼Œè€Œåï¼Œå¤±è´¥çš„é‚£ä¸ªå†æ¬¡é‡è¯•æ›´æ–°ï¼Œè¦†ç›–äº†æ›´æ–°æˆåŠŸçš„é‚£ä¸ªæ•°æ®ï¼Œä¹Ÿå°±æ˜¯ABAçš„æƒ…å†µï¼›<br>2ã€ä¸¤ä¸ªçº¿ç¨‹ä¸€ä¸ªæ›´æ–°æ•°æ®ï¼Œä¸€ä¸ªè¯»æ•°æ®ï¼Œå‰è€…åœ¨æ•°æ®æ›´æ–°å®Œæˆåï¼Œåœ¨è¿˜æœªåˆ é™¤ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹æ°å¥½è¯»åˆ°äº†ç¼“å­˜ï¼Œè¿™æ—¶ç¬¬äºŒä¸ªçº¿ç¨‹å°±æ˜¯è„æ•°æ®ã€‚","like_count":0},{"had_liked":false,"id":324020,"user_name":"å‡¯æ–‡å°çŒª","can_delete":false,"product_type":"c1","uid":1980201,"ip_address":"","ucode":"36D8AD0229547F","user_header":"https://static001.geekbang.org/account/avatar/00/1e/37/29/b3af57a7.jpg","comment_is_top":false,"comment_ctime":1638260665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638260665","product_id":100046801,"comment_content":"é¦–å…ˆå›ç­”ä¸‹è€å¸ˆçš„é—®é¢˜ï¼š<br>ç†è®ºä¸Šæ€»æ˜¯å­˜åœ¨è¿™ç§æƒ…å†µã€‚æ¯”æ–¹è¯´ ç¼“å­˜å¤±æ•ˆå‘ç”Ÿåœ¨å†™åº“ä¸å¤±æ•ˆç¼“å­˜ä¹‹é—´ é‚£ä¹ˆæ­¤æ—¶è¯»è¯·æ±‚è¯»å‡ºæ¥çš„æ•°æ®å°±æ˜¯æ—§çš„ã€‚ä½†æ˜¯è¿™ç§åœºæ™¯é€šå¸¸æ¦‚ç‡æä½ï¼Œå› ä¸ºè¯»æ€»æ˜¯å¿«äºå†™ æ‰€ä»¥å·¥ç¨‹ä¸Šä¸å¤šè§ã€‚å†æ¥è¯´ä¸‹å¦‚ä½•è§£å†³ï¼Œä¸¤ç§æ–¹æ³•ï¼š<br>1. ä¸è§£å†³ ã€‚é€šå¸¸ä¹Ÿæ˜¯è¿™ä¹ˆåš å³æ¥å—è¿™ç§é—®é¢˜<br>2. ä½¿ç”¨å®¹é”™çª—å£ã€‚åŸç†ç±»ä¼¼è€å¸ˆä¸ŠèŠ‚è¯¾æå‡ºçš„ spuæ”¹åŠ¨ä»·æ ¼ï¼Œå…è®¸ä¸€æ®µæ—¶é—´å†…æ—§ä»·æ ¼ä¸‹å•æˆåŠŸ<br><br>ä¸‹é¢å†æ¥è¯´è¯´ä¸ºä»€ä¹ˆwrite through &#47; read through ä¸é€‚åˆè¿™ç§åœºæ™¯<br>æœ¬è´¨ä¸Šæ˜¯ç”±äºä¸¤ä¸ªå¹¶å‘å†™ï¼ˆè¯»è¯·æ±‚ä¸å†™è¯·æ±‚ï¼‰ä¼šå­˜åœ¨å½¼æ­¤è„å†™è¦†ç›– å› ä¸ºæœ€ç»ˆå†™å…¥å…¶å®æ²¡æœ‰é”æˆ–åŒæ­¥æœºåˆ¶æ¥åšåè°ƒã€‚<br>è¿™ä¸ªé—®é¢˜åœ¨ã€ŠWhy does Facebook use delete to remove the key-value pair in Memcached instead of updating the Memcached during write request to the backend?ã€‹æœ‰è®¨è®ºè¿‡","like_count":0},{"had_liked":false,"id":322310,"user_name":"è‘£ä¿Šä¿Š","can_delete":false,"product_type":"c1","uid":1297887,"ip_address":"","ucode":"732300A779660B","user_header":"https://static001.geekbang.org/account/avatar/00/13/cd/df/c520d418.jpg","comment_is_top":false,"comment_ctime":1637299718,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637299718","product_id":100046801,"comment_content":"ç”¨åˆ†å¸ƒå¼é”æ›´æ–°ç¼“å­˜å•Šï¼Œå¤§é‡çš„è¯·æ±‚è¿‡å¹´ï¼Œåªå…è®¸ä¸€ä¸ªè¯·æ±‚è¯·æ±‚æ•°æ®åº“å¹¶æ›´æ–°ç¼“å­˜","like_count":0},{"had_liked":false,"id":317408,"user_name":"å¼ å‡¯","can_delete":false,"product_type":"c1","uid":1136254,"ip_address":"","ucode":"27566AD22CCAA1","user_header":"https://static001.geekbang.org/account/avatar/00/11/56/7e/64730c47.jpg","comment_is_top":false,"comment_ctime":1634787687,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634787687","product_id":100046801,"comment_content":"æ–‡ä¸­ä¸€ç›´åœ¨è¯´ç¼“å­˜ç©¿é€ï¼Œå…¶å®æ–‡ä¸­ä¸¾ä¾‹ç¼“å­˜å¤±æ•ˆï¼Œæ•°æ®åº“ä¸­æ•°æ®å­˜åœ¨çš„è¿™ç§æƒ…æ™¯ï¼Œåº”è¯¥ä¸ºç¼“å­˜å‡»ç©¿ã€‚","like_count":0},{"had_liked":false,"id":307570,"user_name":"æ³¨æ„åŠ›$","can_delete":false,"product_type":"c1","uid":1142316,"ip_address":"","ucode":"7FB3399A1EAB72","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/2c/e2f3cfc0.jpg","comment_is_top":false,"comment_ctime":1629163926,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629163926","product_id":100046801,"comment_content":"è€å¸ˆï¼Œä¼ ç»Ÿè¡Œä¸šå‰å°ä¸šåŠ¡æ¯”è¾ƒæ›´æ–°é¢‘ç¹çš„æ•°æ®ï¼Œè¿™ä¸ªèƒ½åšç¼“å­˜å—ï¼Ÿè¿˜æ˜¯ä¹Ÿèƒ½å®ç°ï¼Œä¸šåŠ¡SQLå†™çš„æ…¢ï¼Œå¯¼è‡´å¾ˆå¤šå‹åŠ›éƒ½åœ¨æ•°æ®åº“ä¸Šã€‚","like_count":0},{"had_liked":false,"id":274928,"user_name":"Geek6561","can_delete":false,"product_type":"c1","uid":2028940,"ip_address":"","ucode":"D44141D4AD2587","user_header":"","comment_is_top":false,"comment_ctime":1611219515,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611219515","product_id":100046801,"comment_content":"Cache Asideé‡åˆ°ä¸»ä»å°±éš¾äº†","like_count":0},{"had_liked":false,"id":260126,"user_name":"anthony","can_delete":false,"product_type":"c1","uid":1032896,"ip_address":"","ucode":"BA716F89900570","user_header":"","comment_is_top":false,"comment_ctime":1604928116,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604928116","product_id":100046801,"comment_content":"è€å¸ˆå¥½  å•ä¸ªmysqlçš„å¹¶å‘ ä½ é‚£è¾¹æœ‰å®ƒçš„å¹¶å‘æ•°æ®å—","like_count":0},{"had_liked":false,"id":250576,"user_name":"PhilZhang","can_delete":false,"product_type":"c1","uid":1088010,"ip_address":"","ucode":"383F1A792C7DF9","user_header":"https://static001.geekbang.org/account/avatar/00/10/9a/0a/922615cf.jpg","comment_is_top":false,"comment_ctime":1601135851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601135851","product_id":100046801,"comment_content":"ä¸¤ç§ç¼“å­˜æ›´æ–°æ¨¡å¼äº§ç”Ÿè„æ•°æ®çš„åœºæ™¯æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å†™çº¿ç¨‹å¯¹ç¼“å­˜çš„å¤±æ•ˆæˆ–æ›´æ–°æ“ä½œï¼Œå‘ç”Ÿåœ¨è¯»çº¿ç¨‹ä¹‹å‰ï¼Œè¢«è¯»çº¿ç¨‹çš„æ—§æ•°æ®è¦†ç›–ï¼Œä»è€Œäº§ç”Ÿè„æ•°æ®ã€‚<br><br>æƒ³åˆ°ä¸€ä¸ªåœ¨Read&#47;Write Throughæ¨¡å¼ä¸‹æ¯”è¾ƒç®€å•çš„å®ç°æ–¹å¼ï¼Œå°±æ˜¯è¯»çº¿ç¨‹æ›´æ–°ç¼“å­˜çš„æ—¶å€™ä¸ç”¨putï¼Œè€Œæ˜¯ç”¨putIfAbsentï¼Œæ„æ€å°±æ˜¯è¯»çº¿ç¨‹åœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°è¿™ä¸ªkeyå¯¹åº”çš„ç¼“å­˜å·²ç»å­˜åœ¨ï¼Œå°±æ”¾å¼ƒæ›´æ–°ï¼Œå› ä¸ºåˆšåˆšæŸ¥çš„æ—¶å€™æ²¡æœ‰ï¼Œç°åœ¨åˆæœ‰äº†ï¼Œè‚¯å®šæ˜¯å…¶ä»–è¯»çº¿ç¨‹æˆ–è€…å†™çº¿ç¨‹æ›´æ–°è¿›æ¥çš„ï¼Œè‚¯å®šæ¯”æˆ‘æœ¬èº«çš„å€¼ç›¸åŒæˆ–æ›´æ–°ã€‚","like_count":0},{"had_liked":false,"id":247358,"user_name":"æ— é“win","can_delete":false,"product_type":"c1","uid":1461075,"ip_address":"","ucode":"0C026BB03A53EA","user_header":"https://static001.geekbang.org/account/avatar/00/16/4b/53/f797f031.jpg","comment_is_top":false,"comment_ctime":1599668040,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1599668040","product_id":100046801,"comment_content":"ä¸€æ—¦å‘ç”Ÿäº†å¦‚ä¸‹åœºæ™¯ï¼š<br>açº¿ç¨‹è¯»å–ç¼“å­˜ï¼Œç¼“å­˜æ²¡æœ‰å€¼ï¼açº¿ç¨‹è¯»å–äº†dbï¼bçº¿ç¨‹æ›´æ–°dbï¼bçº¿ç¨‹åˆ é™¤ç¼“å­˜ï¼açº¿ç¨‹ä½¿ç”¨æ—§å€¼æ›´æ–°ç¼“å­˜ã€‚<br>è¿™æ ·å°±ä¼šå‘ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„ç°è±¡ã€‚<br><br>å…¶å®æ¢ä¸ªè§’åº¦æ¥çœ‹ï¼Œcache asideæ¨¡å¼é€ æˆæ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µå‡ºç°åœ¨aè¯»å–dbï¼‹å†™å…¥ç¼“å­˜è¿™ä¸ªæ“ä½œä¸æ˜¯åŸå­æ€§çš„æ“ä½œï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä¿è¯è¿™ä¸¤ä¸ªæ“ä½œçš„åŸå­æ€§å°±å®Œå…¨å¯ä»¥é¿å…è¿™ç§æƒ…å†µäº†ã€‚<br><br>å…·ä½“çš„è§£å†³æ–¹æ¡ˆå¯ä»¥åƒGagiåŒå­¦é‚£æ ·é‡‡ç”¨åŠ é”çš„æ–¹å¼æ¥è§£å†³ã€‚<br>","like_count":0},{"had_liked":false,"id":226345,"user_name":"å¼€è½åœ¨","can_delete":false,"product_type":"c1","uid":1108480,"ip_address":"","ucode":"8A5A6BA483DFB0","user_header":"https://static001.geekbang.org/account/avatar/00/10/ea/00/e97fe767.jpg","comment_is_top":false,"comment_ctime":1592042428,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1592042428","product_id":100046801,"comment_content":"updateæ•°æ®åº“ä¹‹åsleepä¸€æ®µæ—¶é—´å†å»åˆ é™¤cache","like_count":0,"discussions":[{"author":{"id":1019568,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/b0/ef201991.jpg","nickname":"CcczzZ","note":"","ucode":"5F46DA5053D2BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292940,"discussion_content":"ç¡çœ å¤§æ³•ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595389660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206415,"user_name":"é—«å†¬","can_delete":false,"product_type":"c1","uid":1109691,"ip_address":"","ucode":"1725E869D5A3D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/bb/7afd6824.jpg","comment_is_top":false,"comment_ctime":1586857587,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586857587","product_id":100046801,"comment_content":"ç¼“å­˜ç­–ç•¥<br>1.read write through å¯èƒ½å›é€ æˆè„æ•°æ®<br>2.catch aset æ¸…ç¼“å­˜ åŠ é¢„çƒ­ç¼“å­˜æ–¹å¼æ¯”è¾ƒå¥½äº›<br>3.redis ä½œä¸ºmysqlçš„å‰ç½®ç¼“å­˜","like_count":0},{"had_liked":false,"id":193714,"user_name":"AAAAAAres","can_delete":false,"product_type":"c1","uid":1243939,"ip_address":"","ucode":"B12540906635C7","user_header":"https://static001.geekbang.org/account/avatar/00/12/fb/23/e5c346e7.jpg","comment_is_top":false,"comment_ctime":1584952596,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584952596","product_id":100046801,"comment_content":"å¦‚æœè¯»ç¼“å­˜ä¸å­˜åœ¨ï¼Œç„¶åå»ä»åº“è¯»æ•°æ®æ¥å†™ç¼“å­˜çš„è¯ï¼Œä¸»ä»å»¶è¿Ÿä¹Ÿä¼šå¯¼è‡´ç¼“å­˜ä¸­æœ‰è„æ•°æ®","like_count":0},{"had_liked":false,"id":193568,"user_name":"1","can_delete":false,"product_type":"c1","uid":1895904,"ip_address":"","ucode":"44133D009755C7","user_header":"https://static001.geekbang.org/account/avatar/00/1c/ed/e0/c63d6a80.jpg","comment_is_top":false,"comment_ctime":1584928396,"is_pvip":false,"replies":[{"id":"73921","content":"è¿™ä¸ªè¿˜æ˜¯å¾—çœ‹ä¸šåŠ¡ï¼Œå¾ˆå¤šåˆ—è¡¨ä¹Ÿå¯ä»¥ç¼“å­˜çš„ï¼Œæ¯”å¦‚è¯´ä¸€äº›æ’è¡Œæ¦œæ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":"1501046","ctime":1585025238,"ip_address":"","comment_id":193568,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1584928396","product_id":100046801,"comment_content":"æ˜¯ä¸æ˜¯modelçš„è¯ä½¿ç”¨ç¼“å­˜ï¼Œåˆ—è¡¨çš„è¯æ˜¯ä¸æ˜¯ä¸é€‚åˆç”¨ç¼“å­˜ï¼Ÿåˆ—è¡¨åº”è¯¥æ€ä¹ˆå»ç¼“å­˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488589,"discussion_content":"è¿™ä¸ªè¿˜æ˜¯å¾—çœ‹ä¸šåŠ¡ï¼Œå¾ˆå¤šåˆ—è¡¨ä¹Ÿå¯ä»¥ç¼“å­˜çš„ï¼Œæ¯”å¦‚è¯´ä¸€äº›æ’è¡Œæ¦œæ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585025238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":192584,"user_name":"åˆ˜æ¥ ","can_delete":false,"product_type":"c1","uid":1120773,"ip_address":"","ucode":"9F19D44CBEE039","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/05/f154d134.jpg","comment_is_top":false,"comment_ctime":1584861702,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584861702","product_id":100046801,"comment_content":"ä¸€ç›´ç”¨çš„Cache Aside,","like_count":0},{"had_liked":false,"id":191944,"user_name":"Aliliin","can_delete":false,"product_type":"c1","uid":1025239,"ip_address":"","ucode":"61F9A09BB6650F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a4/d7/5d2bfaa7.jpg","comment_is_top":false,"comment_ctime":1584804989,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584804989","product_id":100046801,"comment_content":"aè¯»åˆ°è€æ•°æ®çš„åŒæ—¶å¹¶æ²¡æ¥å¾—åŠå†™å…¥ç¼“å­˜ï¼Œç„¶åbæ­£å¥½æ›´æ–°äº†dbæ¸…ç©ºç¼“å­˜ï¼Œaå†™å…¥ä¹‹å‰è¯»åˆ°çš„æ•°æ®å†™å…¥ç¼“å­˜ã€‚<br>åªæƒ³åˆ°è¿™ç§æƒ…å†µï¼Œä¸çŸ¥é“é è°±å—ã€‚","like_count":0},{"had_liked":false,"id":191520,"user_name":"æ­£åœ¨å‡è‚¥çš„èƒ–ç±½ã€‚","can_delete":false,"product_type":"c1","uid":1033728,"ip_address":"","ucode":"99E2E4DF599236","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c6/00/683bb4f0.jpg","comment_is_top":false,"comment_ctime":1584778686,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1584778686","product_id":100046801,"comment_content":"ä»»ä½•ä¸€ç§æ–¹å¼ç¼“å­˜ä½¿ç”¨æ–¹å¼å’Œæ•°æ®åº“ä¹‹é—´éƒ½ä¼šæœ‰è„æ•°æ®çš„äº§ç”Ÿï¼Œæˆ‘ç°åœ¨çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯çœ‹ä¸šåŠ¡æ–¹èƒ½æ¥å—å¤šé•¿æ—¶é—´çš„è„æ•°æ®ï¼Œç„¶åç¼“å­˜å°±è®¾ç½®å¤šä¹…çš„è¿‡æœŸæ—¶é—´ã€‚2.æˆ–è€…æ•°æ®åº“æ›´æ–°æˆåŠŸåï¼Œç”¨MQå»é€šçŸ¥åˆ·æ–°ç¼“å­˜ã€‚","like_count":0,"discussions":[{"author":{"id":1433535,"avatar":"https://static001.geekbang.org/account/avatar/00/15/df/bf/96b50d1e.jpg","nickname":"ğŸ˜š 46","note":"","ucode":"EED0EBBBF80A43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":265710,"discussion_content":"binlogç›¸æ¯”MQåº”è¯¥æ˜¯æ›´ä¼˜çš„é€‰æ‹©å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589429324,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191373,"user_name":"èš‚èšå†…æ¨+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1584767621,"is_pvip":false,"replies":[{"id":"73514","content":"ä½ å¯ä»¥å‚è€ƒä¸€ä¸‹â€œGaGiîâ€åŒå­¦çš„ç•™è¨€ï¼Œç”¨é”æ¥è§£å†³å¹¶å‘é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":"1501046","ctime":1584846220,"ip_address":"","comment_id":191373,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1584767621","product_id":100046801,"comment_content":"Cache Asideè§£å†³çš„åªæ˜¯å¹¶å‘å†™è¯·æ±‚å¯¼è‡´çš„ç¼“å­˜æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚å¯¹äºè¯»å†™è¿™ç§åœºæ™¯å¹¶æ²¡æœ‰å½»åº•è§£å†³ã€‚<br>Aï¼šè¯»ï¼Œç¼“å­˜ç©¿é€ï¼ŒæŸ¥åº“ã€‚<br>Bï¼šå†™ï¼Œæ›´æ–°æ•°æ®åº“ã€‚<br>Bï¼šå†™ï¼Œåˆ é™¤ç¼“å­˜ã€‚<br>Aï¼šè¯»ï¼Œå›å†™ç¼“å­˜ã€‚å¯¼è‡´ä¸ä¸€è‡´ã€‚<br>ç›®å‰é’ˆå¯¹è¿™ç§é—®é¢˜æˆ‘ä»¬è¿™è¾¹æ‰å»çš„æ–¹æ¡ˆæ˜¯å†™è¯·æ±‚åç”¨MQå»¶è¿Ÿåˆ é™¤ç¼“å­˜ã€‚è€å¸ˆæœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å’Œå®è·µå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488162,"discussion_content":"ä½ å¯ä»¥å‚è€ƒä¸€ä¸‹â€œGaGiîâ€åŒå­¦çš„ç•™è¨€ï¼Œç”¨é”æ¥è§£å†³å¹¶å‘é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584846220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1944186,"avatar":"","nickname":"ç‹æ°","note":"","ucode":"53CC01032E4A25","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":237757,"discussion_content":"è€å¸ˆï¼Œåœ¨è¯»çº¿ç¨‹ä¸Šå†™é”ï¼ˆè¯´ç‹¬å é”æ¯”è¾ƒåˆé€‚ï¼‰ï¼Œæ˜¯å¦è·ŸMVCCç›¸è¿èƒŒï¼ŒMVCCä¸å°±æ˜¯ä¸ºäº†ç”¨æ¥è§£å†³é«˜å¹¶å‘å¸¦æ¥çš„è¯»å†™é˜»å¡é—®é¢˜å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587182047,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191263,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1584759392,"is_pvip":false,"replies":[{"id":"73512","content":"ä½¿ç”¨Rediså‘½ä»¤INCRæ˜¯å¯ä»¥ä¿å­˜åŸå­æ€§çš„ã€‚<br><br>å¦‚æœæ˜¯GETå‡ºæ¥ï¼Œåœ¨ç¨‹åºå†…åŠ ä¸€ï¼Œåœ¨SETå›å»ï¼Œç¡®å®ä¼šå­˜åœ¨å¹¶å‘é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æç¥","uid":"1501046","ctime":1584845767,"ip_address":"","comment_id":191263,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1584759392","product_id":100046801,"comment_content":"è€å¸ˆæœ‰ä¸ªé—®é¢˜è¯·æ•™ä½ ï¼Œæˆ‘è¿™è¾¹æœ‰ä¸ªä¸šåŠ¡ï¼ŒåˆåŒç¼–å·ï¼Œå­˜åœ¨redis ğŸ€„ï¸å’Œæ•°æ®åº“ä¸­ï¼Œæ¯æ¬¡å…ˆæŸ¥redis è·å–åˆåŒç¼–å·åé¢è™šå¯’ï¼Œç„¶å¥½åŠ 1âƒ£ï¸ï¼Œä¿å­˜å›å»ï¼Œå¤–å»æ›´æ–°æ•°æ®åº“ï¼Œåšäº†æ•°æ®åº“åˆåŒç¼–å·é‡å¤ï¼Œæ£€éªŒï¼Œä½†æ˜¯æ¯æ¬¡è¿˜æ˜¯æœ‰åˆé€šç¼–å·é‡å¤çš„ï¼Œè¯·é—®è¿™ä¸ªæ€ä¹ˆè§£å†³ï¼Ÿå¸‚å¹¶å‘å¯¼è‡´ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1501046,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e7/76/79c1f23a.jpg","nickname":"æç¥","note":"","ucode":"B19E91EE248591","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488143,"discussion_content":"ä½¿ç”¨Rediså‘½ä»¤INCRæ˜¯å¯ä»¥ä¿å­˜åŸå­æ€§çš„ã€‚\n\nå¦‚æœæ˜¯GETå‡ºæ¥ï¼Œåœ¨ç¨‹åºå†…åŠ ä¸€ï¼Œåœ¨SETå›å»ï¼Œç¡®å®ä¼šå­˜åœ¨å¹¶å‘é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584845767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285085,"discussion_content":"å…„å¼Ÿæ‰“å­—å¯ä»¥è®¤çœŸä¸€ç‚¹å—\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592734851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484192,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/a0/e0cccf7e.jpg","nickname":"åœ†åœ†æ»¡æ»¡","note":"","ucode":"396E7A822014D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215248,"discussion_content":"å¹¶å‘æƒ…å†µä¸‹ä¼šæœ‰é—®é¢˜ã€‚åšä¸ªå‘å·æœåŠ¡ï¼Œä¿è¯å”¯ä¸€æ€§å³å¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585307439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":191246,"user_name":"è‚¥low","can_delete":false,"product_type":"c1","uid":1043480,"ip_address":"","ucode":"A158AFAAB8C742","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/18/bf7254d3.jpg","comment_is_top":false,"comment_ctime":1584757818,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"1584757818","product_id":100046801,"comment_content":"æˆ‘è§‰å¾—Cache Asideè¿˜æ˜¯æ²¡æœ‰è§£å†³ä¸»ä»å»¶è¿Ÿå¸¦æ¥çš„é—®é¢˜ğŸ˜±","like_count":0,"discussions":[{"author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":244788,"discussion_content":"ä¸»ä»å»¶è¿Ÿï¼Ÿredisä¸€èˆ¬ä¸åšè¯»å†™åˆ†ç¦»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587630459,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366218,"discussion_content":"redisä¸»ä»æ¶æ„ä¸å°±æ˜¯è¯»å†™åˆ†ç¦»å˜›ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617982334,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":244788,"ip_address":""},"score":366218,"extra":""},{"author":{"id":1488356,"avatar":"https://static001.geekbang.org/account/avatar/00/16/b5/e4/e6faf686.jpg","nickname":"æ¡äº†ä¸ªå¤§èš‚èš±","note":"","ucode":"AD34AD4FA37371","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1886331,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/c8/7b/153181d7.jpg","nickname":"å¤œè¾‰","note":"","ucode":"9421385F51FF9E","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369840,"discussion_content":"ä»èŠ‚ç‚¹åªæ˜¯å¤‡ä»½ä½œç”¨ï¼Œç”¨äºä¸»èŠ‚ç‚¹å®•æœºæ—¶åˆ‡æ¢ã€‚redisçš„å¹¶å‘ä¸€èˆ¬æ¥è¯´è¶³å¤Ÿï¼Œå¹¶ä¸”è€ƒè™‘åˆ°ä½œä¸ºç¼“å­˜å†™çš„é¢‘ç‡ä¹Ÿååˆ†é«˜ï¼Œè¯»å†™éš”ç¦»æ„ä¹‰æœ‰é™ï¼Œè€Œä¸”ä¸æ”¯æŒå†™åˆ°ä»èŠ‚ç‚¹å†è¿”å›çš„è¿™ç§åˆ†å¸ƒå¼å­˜å‚¨ç‰¹æ€§é…ç½®ï¼Œæ‰€ä»¥è¯»å†™åˆ†ç¦»å¸¦æ¥çš„éº»çƒ¦æ¯”å¥½å¤„å¤šå¤šäº†ï¼ŒåŸºæœ¬ä¸ç”¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619171137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":366218,"ip_address":""},"score":369840,"extra":""}]}]},{"had_liked":false,"id":191195,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1584753757,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1584753757","product_id":100046801,"comment_content":"åªæœ‰ä¸€ä¸ªä½“ä¼š: æ¸…æ¥šå„ç§ç¼“å­˜ç­–ç•¥çš„ç¼ºé™·ï¼Œæƒ³ç”¨ç¼“å­˜åªèƒ½æ˜¯ç»“åˆå½“å‰ä¸šåŠ¡æ¥æ˜¯å¦ç”¨ï¼Œç”¨ä»€ä¹ˆç­–ç•¥","like_count":0}]}