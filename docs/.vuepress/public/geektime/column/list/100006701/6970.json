{"id":6970,"title":"ç¬¬4è®² | å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€å¹»è±¡å¼•ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","content":"<p>åœ¨Javaè¯­è¨€ä¸­ï¼Œé™¤äº†åŸå§‹æ•°æ®ç±»å‹çš„å˜é‡ï¼Œå…¶ä»–æ‰€æœ‰éƒ½æ˜¯æ‰€è°“çš„å¼•ç”¨ç±»å‹ï¼ŒæŒ‡å‘å„ç§ä¸åŒçš„å¯¹è±¡ï¼Œç†è§£å¼•ç”¨å¯¹äºæŒæ¡Javaå¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’ŒJVMå†…éƒ¨ç›¸å…³æœºåˆ¶éå¸¸æœ‰å¸®åŠ©ã€‚</p>\n<p>ä»Šå¤©æˆ‘è¦é—®ä½ çš„é—®é¢˜æ˜¯ï¼Œ<span class=\"orange\">å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€å¹»è±¡å¼•ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…·ä½“ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</span></p>\n<h2>å…¸å‹å›ç­”</h2>\n<p>ä¸åŒçš„å¼•ç”¨ç±»å‹ï¼Œä¸»è¦ä½“ç°çš„æ˜¯<strong>å¯¹è±¡ä¸åŒçš„å¯è¾¾æ€§ï¼ˆreachableï¼‰çŠ¶æ€å’Œå¯¹åƒåœ¾æ”¶é›†çš„å½±å“</strong>ã€‚</p>\n<p>æ‰€è°“å¼ºå¼•ç”¨ï¼ˆâ€œStrongâ€ Referenceï¼‰ï¼Œå°±æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„æ™®é€šå¯¹è±¡å¼•ç”¨ï¼Œåªè¦è¿˜æœ‰å¼ºå¼•ç”¨æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå°±èƒ½è¡¨æ˜å¯¹è±¡è¿˜â€œæ´»ç€â€ï¼Œåƒåœ¾æ”¶é›†å™¨ä¸ä¼šç¢°è¿™ç§å¯¹è±¡ã€‚å¯¹äºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¼•ç”¨å…³ç³»ï¼Œåªè¦è¶…è¿‡äº†å¼•ç”¨çš„ä½œç”¨åŸŸæˆ–è€…æ˜¾å¼åœ°å°†ç›¸åº”ï¼ˆå¼ºï¼‰å¼•ç”¨èµ‹å€¼ä¸ºnullï¼Œå°±æ˜¯å¯ä»¥è¢«åƒåœ¾æ”¶é›†çš„äº†ï¼Œå½“ç„¶å…·ä½“å›æ”¶æ—¶æœºè¿˜æ˜¯è¦çœ‹åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚</p>\n<p>è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰ï¼Œæ˜¯ä¸€ç§ç›¸å¯¹å¼ºå¼•ç”¨å¼±åŒ–ä¸€äº›çš„å¼•ç”¨ï¼Œå¯ä»¥è®©å¯¹è±¡è±å…ä¸€äº›åƒåœ¾æ”¶é›†ï¼Œåªæœ‰å½“JVMè®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œæ‰ä¼šå»è¯•å›¾å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚JVMä¼šç¡®ä¿åœ¨æŠ›å‡ºOutOfMemoryErrorä¹‹å‰ï¼Œæ¸…ç†è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚è½¯å¼•ç”¨é€šå¸¸ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ï¼Œå¦‚æœè¿˜æœ‰ç©ºé—²å†…å­˜ï¼Œå°±å¯ä»¥æš‚æ—¶ä¿ç•™ç¼“å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰ï¼Œè¿™æ ·å°±ä¿è¯äº†ä½¿ç”¨ç¼“å­˜çš„åŒæ—¶ï¼Œä¸ä¼šè€—å°½å†…å­˜ã€‚</p>\n<p>å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰å¹¶ä¸èƒ½ä½¿å¯¹è±¡è±å…åƒåœ¾æ”¶é›†ï¼Œä»…ä»…æ˜¯æä¾›ä¸€ç§è®¿é—®åœ¨å¼±å¼•ç”¨çŠ¶æ€ä¸‹å¯¹è±¡çš„é€”å¾„ã€‚è¿™å°±å¯ä»¥ç”¨æ¥æ„å»ºä¸€ç§æ²¡æœ‰ç‰¹å®šçº¦æŸçš„å…³ç³»ï¼Œæ¯”å¦‚ï¼Œç»´æŠ¤ä¸€ç§éå¼ºåˆ¶æ€§çš„æ˜ å°„å…³ç³»ï¼Œå¦‚æœè¯•å›¾è·å–æ—¶å¯¹è±¡è¿˜åœ¨ï¼Œå°±ä½¿ç”¨å®ƒï¼Œå¦åˆ™é‡ç°å®ä¾‹åŒ–ã€‚å®ƒåŒæ ·æ˜¯å¾ˆå¤šç¼“å­˜å®ç°çš„é€‰æ‹©ã€‚</p>\n<!-- [[[read_end]]] -->\n<p>å¯¹äºå¹»è±¡å¼•ç”¨ï¼Œæœ‰æ—¶å€™ä¹Ÿç¿»è¯‘æˆè™šå¼•ç”¨ï¼Œä½ ä¸èƒ½é€šè¿‡å®ƒè®¿é—®å¯¹è±¡ã€‚å¹»è±¡å¼•ç”¨ä»…ä»…æ˜¯æä¾›äº†ä¸€ç§ç¡®ä¿å¯¹è±¡è¢«finalizeä»¥åï¼ŒåšæŸäº›äº‹æƒ…çš„æœºåˆ¶ï¼Œæ¯”å¦‚ï¼Œé€šå¸¸ç”¨æ¥åšæ‰€è°“çš„Post-Mortemæ¸…ç†æœºåˆ¶ï¼Œæˆ‘åœ¨ä¸“æ ä¸Šä¸€è®²ä¸­ä»‹ç»çš„Javaå¹³å°è‡ªèº«Cleaneræœºåˆ¶ç­‰ï¼Œä¹Ÿæœ‰äººåˆ©ç”¨å¹»è±¡å¼•ç”¨ç›‘æ§å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ã€‚</p>\n<h2>è€ƒç‚¹åˆ†æ</h2>\n<p>è¿™é“é¢è¯•é¢˜ï¼Œå±äºæ—¢åé—¨åˆéå¸¸é«˜é¢‘çš„ä¸€é“é¢˜ç›®ã€‚è¯´å®ƒåé—¨ï¼Œæ˜¯å› ä¸ºåœ¨å¤§å¤šæ•°åº”ç”¨å¼€å‘ä¸­ï¼Œå¾ˆå°‘ç›´æ¥æ“ä½œå„ç§ä¸åŒå¼•ç”¨ï¼Œè™½ç„¶æˆ‘ä»¬ä½¿ç”¨çš„ç±»åº“ã€æ¡†æ¶å¯èƒ½åˆ©ç”¨äº†å…¶æœºåˆ¶ã€‚å®ƒè¢«é¢‘ç¹é—®åˆ°ï¼Œæ˜¯å› ä¸ºè¿™æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„é¢˜ç›®ï¼Œæ—¢è€ƒå¯Ÿäº†æˆ‘ä»¬å¯¹åŸºç¡€æ¦‚å¿µçš„ç†è§£ï¼Œä¹Ÿè€ƒå¯Ÿäº†å¯¹åº•å±‚å¯¹è±¡ç”Ÿå‘½å‘¨æœŸã€åƒåœ¾æ”¶é›†æœºåˆ¶ç­‰çš„æŒæ¡ã€‚</p>\n<p>å……åˆ†ç†è§£è¿™äº›å¼•ç”¨ï¼Œå¯¹äºæˆ‘ä»¬è®¾è®¡å¯é çš„ç¼“å­˜ç­‰æ¡†æ¶ï¼Œæˆ–è€…è¯Šæ–­åº”ç”¨OOMç­‰é—®é¢˜ï¼Œä¼šå¾ˆæœ‰å¸®åŠ©ã€‚æ¯”å¦‚ï¼Œè¯Šæ–­MySQL connector-jé©±åŠ¨åœ¨ç‰¹å®šæ¨¡å¼ä¸‹ï¼ˆuseCompression=trueï¼‰çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Œå°±éœ€è¦æˆ‘ä»¬ç†è§£æ€ä¹ˆæ’æŸ¥å¹»è±¡å¼•ç”¨çš„å †ç§¯é—®é¢˜ã€‚</p>\n<h2>çŸ¥è¯†æ‰©å±•</h2>\n<p>1.å¯¹è±¡å¯è¾¾æ€§çŠ¶æ€æµè½¬åˆ†æ</p>\n<p>é¦–å…ˆï¼Œè¯·ä½ çœ‹ä¸‹é¢æµç¨‹å›¾ï¼Œæˆ‘è¿™é‡Œç®€å•æ€»ç»“äº†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’Œä¸åŒå¯è¾¾æ€§çŠ¶æ€ï¼Œä»¥åŠä¸åŒçŠ¶æ€å¯èƒ½çš„æ”¹å˜å…³ç³»ï¼Œå¯èƒ½æœªå¿…100%ä¸¥è°¨ï¼Œæ¥é˜è¿°ä¸‹å¯è¾¾æ€§çš„å˜åŒ–ã€‚</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/36/b0/36d3c7b158eda9421ef32463cb4d4fb0.png?wh=497*585\" alt=\"\" /></p>\n<p>æˆ‘æ¥è§£é‡Šä¸€ä¸‹ä¸Šå›¾çš„å…·ä½“çŠ¶æ€ï¼Œè¿™æ˜¯Javaå®šä¹‰çš„ä¸åŒå¯è¾¾æ€§çº§åˆ«ï¼ˆreachability levelï¼‰ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>\n<p>å¼ºå¯è¾¾ï¼ˆStrongly Reachableï¼‰ï¼Œå°±æ˜¯å½“ä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹å¯ä»¥ä¸é€šè¿‡å„ç§å¼•ç”¨è®¿é—®åˆ°çš„æƒ…å†µã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆåˆ›å»ºå®ƒçš„çº¿ç¨‹å¯¹å®ƒå°±æ˜¯å¼ºå¯è¾¾ã€‚</p>\n</li>\n<li>\n<p>è½¯å¯è¾¾ï¼ˆSoftly Reachableï¼‰ï¼Œå°±æ˜¯å½“æˆ‘ä»¬åªèƒ½é€šè¿‡è½¯å¼•ç”¨æ‰èƒ½è®¿é—®åˆ°å¯¹è±¡çš„çŠ¶æ€ã€‚</p>\n</li>\n<li>\n<p>å¼±å¯è¾¾ï¼ˆWeakly Reachableï¼‰ï¼Œç±»ä¼¼å‰é¢æåˆ°çš„ï¼Œå°±æ˜¯æ— æ³•é€šè¿‡å¼ºå¼•ç”¨æˆ–è€…è½¯å¼•ç”¨è®¿é—®ï¼Œåªèƒ½é€šè¿‡å¼±å¼•ç”¨è®¿é—®æ—¶çš„çŠ¶æ€ã€‚è¿™æ˜¯ååˆ†ä¸´è¿‘finalizeçŠ¶æ€çš„æ—¶æœºï¼Œå½“å¼±å¼•ç”¨è¢«æ¸…é™¤çš„æ—¶å€™ï¼Œå°±ç¬¦åˆfinalizeçš„æ¡ä»¶äº†ã€‚</p>\n</li>\n<li>\n<p>å¹»è±¡å¯è¾¾ï¼ˆPhantom Reachableï¼‰ï¼Œä¸Šé¢æµç¨‹å›¾å·²ç»å¾ˆç›´è§‚äº†ï¼Œå°±æ˜¯æ²¡æœ‰å¼ºã€è½¯ã€å¼±å¼•ç”¨å…³è”ï¼Œå¹¶ä¸”finalizeè¿‡äº†ï¼Œåªæœ‰å¹»è±¡å¼•ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ã€‚</p>\n</li>\n<li>\n<p>å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä¸ªæœ€åçš„çŠ¶æ€ï¼Œå°±æ˜¯ä¸å¯è¾¾ï¼ˆunreachableï¼‰ï¼Œæ„å‘³ç€å¯¹è±¡å¯ä»¥è¢«æ¸…é™¤äº†ã€‚</p>\n</li>\n</ul>\n<p>åˆ¤æ–­å¯¹è±¡å¯è¾¾æ€§ï¼Œæ˜¯JVMåƒåœ¾æ”¶é›†å™¨å†³å®šå¦‚ä½•å¤„ç†å¯¹è±¡çš„ä¸€éƒ¨åˆ†è€ƒè™‘ã€‚</p>\n<p>æ‰€æœ‰å¼•ç”¨ç±»å‹ï¼Œéƒ½æ˜¯æŠ½è±¡ç±»java.lang.ref.Referenceçš„å­ç±»ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°å®ƒæä¾›äº†get()æ–¹æ³•ï¼š</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/ba/3e/bae702d46c665e12113f5abd876eb53e.png?wh=661*41\" alt=\"\" /></p>\n<p>é™¤äº†å¹»è±¡å¼•ç”¨ï¼ˆå› ä¸ºgetæ°¸è¿œè¿”å›nullï¼‰ï¼Œå¦‚æœå¯¹è±¡è¿˜æ²¡æœ‰è¢«é”€æ¯ï¼Œéƒ½å¯ä»¥é€šè¿‡getæ–¹æ³•è·å–åŸæœ‰å¯¹è±¡ã€‚è¿™æ„å‘³ç€ï¼Œåˆ©ç”¨è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¿é—®åˆ°çš„å¯¹è±¡ï¼Œé‡æ–°æŒ‡å‘å¼ºå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯äººä¸ºçš„æ”¹å˜äº†å¯¹è±¡çš„å¯è¾¾æ€§çŠ¶æ€ï¼è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘åœ¨ä¸Šé¢å›¾é‡Œæœ‰äº›åœ°æ–¹ç”»äº†åŒå‘ç®­å¤´ã€‚</p>\n<p>æ‰€ä»¥ï¼Œå¯¹äºè½¯å¼•ç”¨ã€å¼±å¼•ç”¨ä¹‹ç±»ï¼Œåƒåœ¾æ”¶é›†å™¨å¯èƒ½ä¼šå­˜åœ¨äºŒæ¬¡ç¡®è®¤çš„é—®é¢˜ï¼Œä»¥ä¿è¯å¤„äºå¼±å¼•ç”¨çŠ¶æ€çš„å¯¹è±¡ï¼Œæ²¡æœ‰æ”¹å˜ä¸ºå¼ºå¼•ç”¨ã€‚</p>\n<p>ä½†æ˜¯ï¼Œä½ è§‰å¾—è¿™é‡Œæœ‰æ²¡æœ‰å¯èƒ½å‡ºç°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p>\n<p>ä¸é”™ï¼Œå¦‚æœæˆ‘ä»¬é”™è¯¯çš„ä¿æŒäº†å¼ºå¼•ç”¨ï¼ˆæ¯”å¦‚ï¼Œèµ‹å€¼ç»™äº†staticå˜é‡ï¼‰ï¼Œé‚£ä¹ˆå¯¹è±¡å¯èƒ½å°±æ²¡æœ‰æœºä¼šå˜å›ç±»ä¼¼å¼±å¼•ç”¨çš„å¯è¾¾æ€§çŠ¶æ€äº†ï¼Œå°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚æ‰€ä»¥ï¼Œæ£€æŸ¥å¼±å¼•ç”¨æŒ‡å‘å¯¹è±¡æ˜¯å¦è¢«åƒåœ¾æ”¶é›†ï¼Œä¹Ÿæ˜¯è¯Šæ–­æ˜¯å¦æœ‰ç‰¹å®šå†…å­˜æ³„æ¼çš„ä¸€ä¸ªæ€è·¯ï¼Œå¦‚æœæˆ‘ä»¬çš„æ¡†æ¶ä½¿ç”¨åˆ°å¼±å¼•ç”¨åˆæ€€ç–‘æœ‰å†…å­˜æ³„æ¼ï¼Œå°±å¯ä»¥ä»è¿™ä¸ªè§’åº¦æ£€æŸ¥ã€‚</p>\n<p>2.å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰ä½¿ç”¨</p>\n<p>è°ˆåˆ°å„ç§å¼•ç”¨çš„ç¼–ç¨‹ï¼Œå°±å¿…ç„¶è¦æåˆ°å¼•ç”¨é˜Ÿåˆ—ã€‚æˆ‘ä»¬åœ¨åˆ›å»ºå„ç§å¼•ç”¨å¹¶å…³è”åˆ°ç›¸åº”å¯¹è±¡æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦éœ€è¦å…³è”å¼•ç”¨é˜Ÿåˆ—ï¼ŒJVMä¼šåœ¨ç‰¹å®šæ—¶æœºå°†å¼•ç”¨enqueueåˆ°é˜Ÿåˆ—é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä»é˜Ÿåˆ—é‡Œè·å–å¼•ç”¨ï¼ˆremoveæ–¹æ³•åœ¨è¿™é‡Œå®é™…æ˜¯æœ‰è·å–çš„æ„æ€ï¼‰è¿›è¡Œç›¸å…³åç»­é€»è¾‘ã€‚å°¤å…¶æ˜¯å¹»è±¡å¼•ç”¨ï¼Œgetæ–¹æ³•åªè¿”å›nullï¼Œå¦‚æœå†ä¸æŒ‡å®šå¼•ç”¨é˜Ÿåˆ—ï¼ŒåŸºæœ¬å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚çœ‹çœ‹ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ã€‚åˆ©ç”¨å¼•ç”¨é˜Ÿåˆ—ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¹è±¡å¤„äºç›¸åº”çŠ¶æ€æ—¶ï¼ˆå¯¹äºå¹»è±¡å¼•ç”¨ï¼Œå°±æ˜¯å‰é¢è¯´çš„è¢«finalizeäº†ï¼Œå¤„äºå¹»è±¡å¯è¾¾çŠ¶æ€ï¼‰ï¼Œæ‰§è¡ŒåæœŸå¤„ç†é€»è¾‘ã€‚</p>\n<pre><code>Object counter = new Object();\nReferenceQueue refQueue = new ReferenceQueue&lt;&gt;();\nPhantomReference&lt;Object&gt; p = new PhantomReference&lt;&gt;(counter, refQueue);\ncounter = null;\nSystem.gc();\ntry {\n    // Removeæ˜¯ä¸€ä¸ªé˜»å¡æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®štimeoutï¼Œæˆ–è€…é€‰æ‹©ä¸€ç›´é˜»å¡\n    Reference&lt;Object&gt; ref = refQueue.remove(1000L);\n    if (ref != null) {\n        // do something\n    }\n} catch (InterruptedException e) {\n    // Handle it\n}\n</code></pre>\n<p>3.æ˜¾å¼åœ°å½±å“è½¯å¼•ç”¨åƒåœ¾æ”¶é›†</p>\n<p>å‰é¢æ³›æ³›æåˆ°äº†å¼•ç”¨å¯¹åƒåœ¾æ”¶é›†çš„å½±å“ï¼Œå°¤å…¶æ˜¯è½¯å¼•ç”¨ï¼Œåˆ°åº•JVMå†…éƒ¨æ˜¯æ€ä¹ˆå¤„ç†å®ƒçš„ï¼Œå…¶å®å¹¶ä¸æ˜¯éå¸¸æ˜ç¡®ã€‚é‚£ä¹ˆæˆ‘ä»¬èƒ½ä¸èƒ½ä½¿ç”¨ä»€ä¹ˆæ–¹æ³•æ¥å½±å“è½¯å¼•ç”¨çš„åƒåœ¾æ”¶é›†å‘¢ï¼Ÿ</p>\n<p>ç­”æ¡ˆæ˜¯æœ‰çš„ã€‚è½¯å¼•ç”¨é€šå¸¸ä¼šåœ¨æœ€åä¸€æ¬¡å¼•ç”¨åï¼Œè¿˜èƒ½ä¿æŒä¸€æ®µæ—¶é—´ï¼Œé»˜è®¤å€¼æ˜¯æ ¹æ®å †å‰©ä½™ç©ºé—´è®¡ç®—çš„ï¼ˆä»¥M bytesä¸ºå•ä½ï¼‰ã€‚ä»Java  1.3.1å¼€å§‹ï¼Œæä¾›äº†-XX:SoftRefLRUPolicyMSPerMBå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ¯«ç§’ï¼ˆmillisecondsï¼‰ä¸ºå•ä½è®¾ç½®ã€‚æ¯”å¦‚ï¼Œä¸‹é¢è¿™ä¸ªç¤ºä¾‹å°±æ˜¯è®¾ç½®ä¸º3ç§’ï¼ˆ3000æ¯«ç§’ï¼‰ã€‚</p>\n<pre><code>-XX:SoftRefLRUPolicyMSPerMB=3000\n</code></pre>\n<p>è¿™ä¸ªå‰©ä½™ç©ºé—´ï¼Œå…¶å®ä¼šå—ä¸åŒJVMæ¨¡å¼å½±å“ï¼Œå¯¹äºClientæ¨¡å¼ï¼Œæ¯”å¦‚é€šå¸¸çš„Windows 32 bit JDKï¼Œå‰©ä½™ç©ºé—´æ˜¯è®¡ç®—å½“å‰å †é‡Œç©ºé—²çš„å¤§å°ï¼Œæ‰€ä»¥æ›´åŠ å€¾å‘äºå›æ”¶ï¼›è€Œå¯¹äºserveræ¨¡å¼JVMï¼Œåˆ™æ˜¯æ ¹æ®-XmxæŒ‡å®šçš„æœ€å¤§å€¼æ¥è®¡ç®—ã€‚</p>\n<p>æœ¬è´¨ä¸Šï¼Œè¿™ä¸ªè¡Œä¸ºè¿˜æ˜¯ä¸ªé»‘ç›’ï¼Œå–å†³äºJVMå®ç°ï¼Œå³ä½¿æ˜¯ä¸Šé¢æåˆ°çš„å‚æ•°ï¼Œåœ¨æ–°ç‰ˆçš„JDKä¸Šä¹Ÿæœªå¿…æœ‰æ•ˆï¼Œå¦å¤–Clientæ¨¡å¼çš„JDKå·²ç»é€æ­¥é€€å‡ºå†å²èˆå°ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬åº”ç”¨æ—¶ï¼Œå¯ä»¥å‚è€ƒç±»ä¼¼è®¾ç½®ï¼Œä½†ä¸è¦è¿‡äºä¾èµ–å®ƒã€‚</p>\n<p>4.è¯Šæ–­JVMå¼•ç”¨æƒ…å†µ</p>\n<p>å¦‚æœä½ æ€€ç–‘åº”ç”¨å­˜åœ¨å¼•ç”¨ï¼ˆæˆ–finalizeï¼‰å¯¼è‡´çš„å›æ”¶é—®é¢˜ï¼Œå¯ä»¥æœ‰å¾ˆå¤šå·¥å…·æˆ–è€…é€‰é¡¹å¯ä¾›é€‰æ‹©ï¼Œæ¯”å¦‚HotSpot JVMè‡ªèº«ä¾¿æä¾›äº†æ˜ç¡®çš„é€‰é¡¹ï¼ˆPrintReferenceGCï¼‰å»è·å–ç›¸å…³ä¿¡æ¯ï¼Œæˆ‘æŒ‡å®šäº†ä¸‹é¢é€‰é¡¹å»ä½¿ç”¨JDK 8è¿è¡Œä¸€ä¸ªæ ·ä¾‹åº”ç”¨ï¼š</p>\n<pre><code>-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintReferenceGC\n</code></pre>\n<p>è¿™æ˜¯JDK 8ä½¿ç”¨ParrallelGCæ”¶é›†çš„åƒåœ¾æ”¶é›†æ—¥å¿—ï¼Œå„ç§å¼•ç”¨æ•°é‡éå¸¸æ¸…æ™°ã€‚</p>\n<pre><code>0.403: [GC (Allocation Failure) 0.871: [SoftReference, 0 refs, 0.0000393 secs]0.871: [WeakReference, 8 refs, 0.0000138 secs]0.871: [FinalReference, 4 refs, 0.0000094 secs]0.871: [PhantomReference, 0 refs, 0 refs, 0.0000085 secs]0.871: [JNI Weak Reference, 0.0000071 secs][PSYoungGen: 76272K-&gt;10720K(141824K)] 128286K-&gt;128422K(316928K), 0.4683919 secs] [Times: user=1.17 sys=0.03, real=0.47 secs] \n</code></pre>\n<p><strong>æ³¨æ„ï¼šJDK 9å¯¹JVMå’Œåƒåœ¾æ”¶é›†æ—¥å¿—è¿›è¡Œäº†å¹¿æ³›çš„é‡æ„</strong>ï¼Œç±»ä¼¼PrintGCTimeStampså’ŒPrintReferenceGCå·²ç»ä¸å†å­˜åœ¨ï¼Œæˆ‘åœ¨ä¸“æ åé¢çš„åƒåœ¾æ”¶é›†ä¸»é¢˜é‡Œä¼šæ›´åŠ ç³»ç»Ÿçš„é˜è¿°ã€‚</p>\n<p>5.Reachability Fence</p>\n<p>é™¤äº†æˆ‘å‰é¢ä»‹ç»çš„å‡ ç§åŸºæœ¬å¼•ç”¨ç±»å‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åº•å±‚APIæ¥è¾¾åˆ°å¼ºå¼•ç”¨çš„æ•ˆæœï¼Œè¿™å°±æ˜¯æ‰€è°“çš„è®¾ç½®<strong>reachability fence</strong>ã€‚</p>\n<p>ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§æœºåˆ¶å‘¢ï¼Ÿè€ƒè™‘ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼ŒæŒ‰ç…§Javaè¯­è¨€è§„èŒƒï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰æŒ‡å‘å¼ºå¼•ç”¨ï¼Œå°±ç¬¦åˆåƒåœ¾æ”¶é›†çš„æ ‡å‡†ï¼Œæœ‰äº›æ—¶å€™ï¼Œå¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰å¼ºå¼•ç”¨ï¼Œä½†æ˜¯ä¹Ÿè®¸å®ƒçš„éƒ¨åˆ†å±æ€§è¿˜åœ¨è¢«ä½¿ç”¨ï¼Œè¿™æ ·å°±å¯¼è‡´è¯¡å¼‚çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨æ²¡æœ‰å¼ºå¼•ç”¨æƒ…å†µä¸‹ï¼Œé€šçŸ¥JVMå¯¹è±¡æ˜¯åœ¨è¢«ä½¿ç”¨çš„ã€‚è¯´èµ·æ¥æœ‰ç‚¹ç»•ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Java 9ä¸­æä¾›çš„æ¡ˆä¾‹ã€‚</p>\n<pre><code>class Resource {\n private static ExternalResource[] externalResourceArray = ...\n int myIndex; Resource(...) {\n     myIndex = ...\n     externalResourceArray[myIndex] = ...;\n     ...\n }\n protected void finalize() {\n     externalResourceArray[myIndex] = null;\n     ...\n }\n public void action() {\n try {\n     // éœ€è¦è¢«ä¿æŠ¤çš„ä»£ç \n     int i = myIndex;\n     Resource.update(externalResourceArray[i]);\n } finally {\n     // è°ƒç”¨reachbilityFenceï¼Œæ˜ç¡®ä¿éšœå¯¹è±¡strongly reachable\n     Reference.reachabilityFence(this);\n }\n }\n private static void update(ExternalResource ext) {\n    ext.status = ...;\n }\n} \n</code></pre>\n<p>æ–¹æ³•actionçš„æ‰§è¡Œï¼Œä¾èµ–äºå¯¹è±¡çš„éƒ¨åˆ†å±æ€§ï¼Œæ‰€ä»¥è¢«ç‰¹å®šä¿æŠ¤äº†èµ·æ¥ã€‚å¦åˆ™ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä»£ç ä¸­åƒä¸‹é¢è¿™æ ·è°ƒç”¨ï¼Œé‚£ä¹ˆå°±å¯èƒ½ä¼šå‡ºç°å›°æ‰°ï¼Œå› ä¸ºæ²¡æœ‰å¼ºå¼•ç”¨æŒ‡å‘æˆ‘ä»¬åˆ›å»ºå‡ºæ¥çš„Resourceå¯¹è±¡ï¼ŒJVMå¯¹å®ƒè¿›è¡Œfinalizeæ“ä½œæ˜¯å®Œå…¨åˆæ³•çš„ã€‚</p>\n<pre><code>new Resource().action()\n</code></pre>\n<p>ç±»ä¼¼çš„ä¹¦å†™ç»“æ„ï¼Œåœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­ä¼¼ä¹æ˜¯å¾ˆæ™®éçš„ï¼Œå› ä¸ºå¼‚æ­¥ç¼–ç¨‹ä¸­å¾€å¾€ä¸ä¼šç”¨ä¼ ç»Ÿçš„â€œæ‰§è¡Œ-&gt;è¿”å›-&gt;ä½¿ç”¨â€çš„ç»“æ„ã€‚</p>\n<p>åœ¨Java 9ä¹‹å‰ï¼Œå®ç°ç±»ä¼¼åŠŸèƒ½ç›¸å¯¹æ¯”è¾ƒç¹çï¼Œæœ‰çš„æ—¶å€™éœ€è¦é‡‡å–ä¸€äº›æ¯”è¾ƒéšæ™¦çš„å°æŠ€å·§ã€‚å¹¸å¥½ï¼Œjava.lang.ref.Referenceç»™æˆ‘ä»¬æä¾›äº†æ–°æ–¹æ³•ï¼Œå®ƒæ˜¯JEP 193: Variable Handlesçš„ä¸€éƒ¨åˆ†ï¼Œå°†Javaå¹³å°åº•å±‚çš„ä¸€äº›èƒ½åŠ›æš´éœ²å‡ºæ¥ï¼š</p>\n<pre><code>static void reachabilityFence(Object ref)\n</code></pre>\n<p>åœ¨JDKæºç ä¸­ï¼ŒreachabilityFenceå¤§å¤šä½¿ç”¨åœ¨Executorsæˆ–è€…ç±»ä¼¼æ–°çš„HTTP/2å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯å¼‚æ­¥è°ƒç”¨çš„æƒ…å†µã€‚ç¼–ç¨‹ä¸­ï¼Œå¯ä»¥æŒ‰ç…§ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œå°†éœ€è¦reachabilityä¿éšœçš„ä»£ç æ®µåˆ©ç”¨try-finallyåŒ…å›´èµ·æ¥ï¼Œåœ¨finallyé‡Œæ˜ç¡®å£°æ˜å¯¹è±¡å¼ºå¯è¾¾ã€‚</p>\n<p>ä»Šå¤©ï¼Œæˆ‘æ€»ç»“äº†Javaè¯­è¨€æä¾›çš„å‡ ç§å¼•ç”¨ç±»å‹ã€ç›¸åº”å¯è¾¾çŠ¶æ€ä»¥åŠå¯¹äºJVMå·¥ä½œçš„æ„ä¹‰ï¼Œå¹¶åˆ†æäº†å¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨çš„ä¸€äº›å®é™…æƒ…å†µï¼Œæœ€åä»‹ç»äº†åœ¨æ–°çš„ç¼–ç¨‹æ¨¡å¼ä¸‹ï¼Œå¦‚ä½•åˆ©ç”¨APIå»ä¿éšœå¯¹è±¡ä¸è¢«æ„å¤–å›æ”¶ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>\n<h2>ä¸€è¯¾ä¸€ç»ƒ</h2>\n<p>å…³äºä»Šå¤©æˆ‘ä»¬è®¨è®ºçš„é¢˜ç›®ä½ åšåˆ°å¿ƒä¸­æœ‰æ•°äº†å—ï¼Ÿç»™ä½ ç•™ä¸€é“ç»ƒä¹ é¢˜ï¼Œä½ èƒ½ä»è‡ªå·±çš„äº§å“æˆ–è€…ç¬¬ä¸‰æ–¹ç±»åº“ä¸­æ‰¾åˆ°ä½¿ç”¨å„ç§å¼•ç”¨çš„æ¡ˆä¾‹å—ï¼Ÿå®ƒä»¬éƒ½è¯•å›¾è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>\n<p>è¯·ä½ åœ¨ç•™è¨€åŒºå†™å†™ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¼šé€‰å‡ºç»è¿‡è®¤çœŸæ€è€ƒçš„ç•™è¨€ï¼Œé€ç»™ä½ ä¸€ä»½å­¦ä¹ é¼“åŠ±é‡‘ï¼Œæ¬¢è¿ä½ ä¸æˆ‘ä¸€èµ·è®¨è®ºã€‚</p>\n<p>ä½ çš„æœ‹å‹æ˜¯ä¸æ˜¯ä¹Ÿåœ¨å‡†å¤‡é¢è¯•å‘¢ï¼Ÿä½ å¯ä»¥â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„é¢˜ç›®åˆ†äº«å‡ºå»ï¼Œæˆ–è®¸ä½ èƒ½å¸®åˆ°ä»–ã€‚</p>\n","neighbors":{"left":{"article_title":"ç¬¬3è®² | è°ˆè°ˆfinalã€finallyã€ finalizeæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ","id":6906},"right":{"article_title":"ç¬¬5è®² | Stringã€StringBufferã€StringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","id":7349}},"comments":[{"had_liked":false,"id":32201,"user_name":"æ¨æ™“å³°","can_delete":false,"product_type":"c1","uid":1009360,"ip_address":"","ucode":"2BF255467A978F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","comment_is_top":true,"comment_ctime":1539483698,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"9.2233722316678001e+18","product_id":100006701,"comment_content":"è¿™é‡Œæä¾›ä¸€ä¸ªçœŸæ˜¯æœ‰å…³reachabilityçš„ä¾‹å­ï¼Œä¹Ÿæ˜¯reachabilityFenceçš„ä¸€ä¸ªä½¿ç”¨http:&#47;&#47;mail.openjdk.java.net&#47;pipermail&#47;jdk-dev&#47;2018-October&#47;002067.html<br><br>æ¸…æ¥šè¯´æ˜å¯¹æ–¹æ³•çš„è°ƒç”¨å¹¶ä¸èƒ½ä¿è¯å¯¹è±¡å­˜æ´»","like_count":46},{"had_liked":false,"id":9133,"user_name":"Miaozhe","can_delete":false,"product_type":"c1","uid":1113660,"ip_address":"","ucode":"62872E8C138B67","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/3c/13175251.jpg","comment_is_top":true,"comment_ctime":1526627842,"is_pvip":false,"replies":[{"id":"2739","content":"ç©ºçš„Finalizeå®ç°ï¼Œä¸ä¼šèµ·ä½œç”¨çš„ï¼›<br>Finalizeræ˜¯æ‡’å®¶ä¼™ï¼Œè¯•è¯•system.runfinalizationï¼›","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526630527,"ip_address":"","comment_id":9133,"utype":1}],"discussion_count":2,"race_medal":0,"score":"9.2233721371656991e+18","product_id":100006701,"comment_content":"æ¥ç€ä¸Šä¸ªé—®é¢˜ï¼š<br>è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜:æˆ‘è‡ªå·±å®šä¹‰ä¸€ä¸ªç±»ï¼Œé‡å†™finalizeæ–¹æ³•åï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¢«å¹»æƒ³å¼•ç”¨ï¼ŒåŒæ—¶è¯¥å¹»æƒ³å¯¹è±¡ä½¿ç”¨ReferenceQueueã€‚<br>å½“æˆ‘è¿™ä¸ªå¯¹è±¡æŒ‡å‘nullï¼Œè¢«GCå›æ”¶åï¼ŒReferenceQueueä¸­æ²¡æœ‰æ”¹å¯¹è±¡ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿå¦‚æœæˆ‘æŠŠç±»ä¸­çš„finalizeæ–¹æ³•ç§»é™¤ï¼ŒReferenceQueueå°±èƒ½è·å–è¢«é‡Šæ”¾çš„å¯¹è±¡ã€‚<br><br>2018-05-17ä½œè€…å›å¤æ–‡ç« å›¾é‡Œé˜æ˜äº†ï¼Œå¹»è±¡å¼•ç”¨enqueå‘ç”Ÿåœ¨finalizeä¹‹åï¼Œä½ æŸ¥æŸ¥æ˜¯ä¸æ˜¯å¡åœ¨FinalReference queueé‡Œäº†ï¼Œé‚£æ˜¯å®ç°finalizationçš„åœ°æ–¹<br><br>æ¨è€å¸ˆï¼Œæˆ‘å»æŸ¥çœ‹äº†ï¼ŒFinal referenceå’ŒReferenceå‘ç°æ˜¯Reference Handleçº¿ç¨‹åœ¨ç›‘æ§ï¼Œä½†æ˜¯Debugè¿›å‡ºå»ï¼Œè¿˜æ˜¯æ²¡æœ‰ææ¸…æ¥šåŸç†ã€‚<br><br>ä¸è¿‡ï¼Œæˆ‘åˆå‘ç°ç±»ä¸­è‡ªå®šä¹‰å¾—Finalize,å¦‚æœæ˜¯ç©ºçš„ï¼Œæ­£å¸¸ã€‚å¦‚æœç±»ä¸­æœ‰ä»»ä½•ä»£ç ï¼Œéƒ½ä¸èƒ½è¿›å…¥Reference Queueï¼Œæ€€ç–‘æ˜¯å¯¹è±¡æ²¡æœ‰è¢«GCå›æ”¶ã€‚","like_count":23,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417980,"discussion_content":"ç©ºçš„Finalizeå®ç°ï¼Œä¸ä¼šèµ·ä½œç”¨çš„ï¼›\nFinalizeræ˜¯æ‡’å®¶ä¼™ï¼Œè¯•è¯•system.runfinalizationï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526630527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1482665,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/NPfmxlo2j93hOjYoJV54WHYFkeibzibUbRGhGCyicty5NXPx9XKxicZotfmjqhcibUbjJYnW8rLFDatleT2zhyaTlqg/132","nickname":"å°æ°¸","note":"","ucode":"40AB78B21615D5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13467,"discussion_content":"- æˆ‘ä¹Ÿæœ‰åŒæ ·çš„å›°æ‰°ï¼Œä½†æˆ‘å‘ç°ä¸€ä¸ªç°è±¡â€œå¦‚æœå®ç°äº†finalizeï¼ŒSystem.gc()åFinalizeræ‰§è¡Œæ—¶ä¼šæŠŠå…¥é˜Ÿçš„å¼•ç”¨removeæ‰ï¼ˆæ˜¾ç¤ºè°ƒç”¨removeæ–¹æ³•ï¼‰â€,ä½ å¯ä»¥æ‰“ä¸ªæ–­ç‚¹çœ‹åˆ°removeè¢«ä¸æ˜ç‰©ä½“æ˜¾ç¤ºè°ƒç”¨äº†ï¼Œæ‰€ä»¥åé¢è‡ªå·±çš„é€»è¾‘é‡Œå†è°ƒç”¨removeé˜»å¡è·å–æ—¶è¿”å›nullï¼›\n- è‡³äºfinalizeé‡Œæœ‰ä»£ç å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæˆ‘æ€€ç–‘æ˜¯JVMæ¡ä»¶ç¼–è¯‘æ—¶æ¶ˆé™¤äº†æ­¤ä»£ç æˆ–è€…JITæ—¶åšäº†æŸç§GCä¼˜åŒ–ä¹‹ç±»ï¼Œæ²¡æœ‰è¯å®è¿‡ï¼Œä»…ä¾›å‚è€ƒï¼›\næˆ‘ä¹Ÿæ²¡æ˜ç™½ï¼Œå¯¹äºè‡ªå®šä¹‰ç±»å®ç°äº†finalizeæ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œå¦‚æœå‘ç”Ÿä¸Šé¢çš„ç°è±¡ï¼Œå¦‚ä½•é€šè¿‡å¹»è±¡å¼•ç”¨è¿›è¡Œç¼–ç¨‹ï¼Œæ¯•ç«Ÿå¼•ç”¨é˜Ÿåˆ—å·²ç»removeè¿‡äº†å•Šã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1568671071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8353,"user_name":"å…¬å·-æŠ€æœ¯å¤œæœªçœ ","can_delete":false,"product_type":"c1","uid":1013683,"ip_address":"","ucode":"83825B57CBD952","user_header":"https://static001.geekbang.org/account/avatar/00/0f/77/b3/991f3f9b.jpg","comment_is_top":false,"comment_ctime":1526112240,"is_pvip":true,"replies":[{"id":"2516","content":"é«˜æ‰‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526274754,"ip_address":"","comment_id":8353,"utype":1}],"discussion_count":22,"race_medal":0,"score":"4214889029616","product_id":100006701,"comment_content":"åœ¨Javaè¯­è¨€ä¸­ï¼Œé™¤äº†åŸºæœ¬æ•°æ®ç±»å‹å¤–ï¼Œå…¶ä»–çš„éƒ½æ˜¯æŒ‡å‘å„ç±»å¯¹è±¡çš„å¯¹è±¡å¼•ç”¨ï¼›Javaä¸­æ ¹æ®å…¶ç”Ÿå‘½å‘¨æœŸçš„é•¿çŸ­ï¼Œå°†å¼•ç”¨åˆ†ä¸º4ç±»ã€‚<br><br>1 å¼ºå¼•ç”¨<br><br>ç‰¹ç‚¹ï¼šæˆ‘ä»¬å¹³å¸¸å…¸å‹ç¼–ç Object obj = new Object()ä¸­çš„objå°±æ˜¯å¼ºå¼•ç”¨ã€‚é€šè¿‡å…³é”®å­—newåˆ›å»ºçš„å¯¹è±¡æ‰€å…³è”çš„å¼•ç”¨å°±æ˜¯å¼ºå¼•ç”¨ã€‚ å½“JVMå†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJVMå®æ„¿æŠ›å‡ºOutOfMemoryErrorè¿è¡Œæ—¶é”™è¯¯ï¼ˆOOMï¼‰ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„â€œå­˜æ´»â€å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚å¯¹äºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¼•ç”¨å…³ç³»ï¼Œåªè¦è¶…è¿‡äº†å¼•ç”¨çš„ä½œç”¨åŸŸæˆ–è€…æ˜¾å¼åœ°å°†ç›¸åº”ï¼ˆå¼ºï¼‰å¼•ç”¨èµ‹å€¼ä¸º nullï¼Œå°±æ˜¯å¯ä»¥è¢«åƒåœ¾æ”¶é›†çš„äº†ï¼Œå…·ä½“å›æ”¶æ—¶æœºè¿˜æ˜¯è¦çœ‹åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚<br><br>2 è½¯å¼•ç”¨<br><br>ç‰¹ç‚¹ï¼šè½¯å¼•ç”¨é€šè¿‡SoftReferenceç±»å®ç°ã€‚ è½¯å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ¯”å¼ºå¼•ç”¨çŸ­ä¸€äº›ã€‚åªæœ‰å½“ JVM è®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œæ‰ä¼šå»è¯•å›¾å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼šå³JVM ä¼šç¡®ä¿åœ¨æŠ›å‡º OutOfMemoryError ä¹‹å‰ï¼Œæ¸…ç†è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚è½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªè½¯å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚åç»­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ReferenceQueueçš„poll()æ–¹æ³•æ¥æ£€æŸ¥æ˜¯å¦æœ‰å®ƒæ‰€å…³å¿ƒçš„å¯¹è±¡è¢«å›æ”¶ã€‚å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œå°†è¿”å›ä¸€ä¸ªnull,å¦åˆ™è¯¥æ–¹æ³•è¿”å›é˜Ÿåˆ—ä¸­å‰é¢çš„ä¸€ä¸ªReferenceå¯¹è±¡ã€‚<br><br>åº”ç”¨åœºæ™¯ï¼šè½¯å¼•ç”¨é€šå¸¸ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ã€‚å¦‚æœè¿˜æœ‰ç©ºé—²å†…å­˜ï¼Œå°±å¯ä»¥æš‚æ—¶ä¿ç•™ç¼“å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰ï¼Œè¿™æ ·å°±ä¿è¯äº†ä½¿ç”¨ç¼“å­˜çš„åŒæ—¶ï¼Œä¸ä¼šè€—å°½å†…å­˜ã€‚<br><br>3 å¼±å¼•ç”¨<br><br>å¼±å¼•ç”¨é€šè¿‡WeakReferenceç±»å®ç°ã€‚ å¼±å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ¯”è½¯å¼•ç”¨çŸ­ã€‚åœ¨åƒåœ¾å›æ”¶å™¨çº¿ç¨‹æ‰«æå®ƒæ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°äº†å…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸å¦ï¼Œéƒ½ä¼šå›æ”¶å®ƒçš„å†…å­˜ã€‚ç”±äºåƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ï¼Œå› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å›æ”¶å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚å¼±å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœå¼±å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªå¼±å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚<br><br>åº”ç”¨åœºæ™¯ï¼šå¼±åº”ç”¨åŒæ ·å¯ç”¨äºå†…å­˜æ•æ„Ÿçš„ç¼“å­˜ã€‚<br><br>4 è™šå¼•ç”¨<br><br>ç‰¹ç‚¹ï¼šè™šå¼•ç”¨ä¹Ÿå«å¹»è±¡å¼•ç”¨ï¼Œé€šè¿‡PhantomReferenceç±»æ¥å®ç°ã€‚æ— æ³•é€šè¿‡è™šå¼•ç”¨è®¿é—®å¯¹è±¡çš„ä»»ä½•å±æ€§æˆ–å‡½æ•°ã€‚å¹»è±¡å¼•ç”¨ä»…ä»…æ˜¯æä¾›äº†ä¸€ç§ç¡®ä¿å¯¹è±¡è¢« finalize ä»¥åï¼ŒåšæŸäº›äº‹æƒ…çš„æœºåˆ¶ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚è™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ— ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚<br>ReferenceQueue queue = new ReferenceQueue ();<br>PhantomReference pr = new PhantomReference (object, queue); <br>ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦å·²ç»åŠ å…¥äº†è™šå¼•ç”¨ï¼Œæ¥äº†è§£è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°†è¦è¢«åƒåœ¾å›æ”¶ã€‚å¦‚æœç¨‹åºå‘ç°æŸä¸ªè™šå¼•ç”¨å·²ç»è¢«åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å†…å­˜è¢«å›æ”¶ä¹‹å‰é‡‡å–ä¸€äº›ç¨‹åºè¡ŒåŠ¨ã€‚<br><br>åº”ç”¨åœºæ™¯ï¼šå¯ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ´»åŠ¨ï¼Œå½“ä¸€ä¸ªè™šå¼•ç”¨å…³è”çš„å¯¹è±¡è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ä¹‹å‰ä¼šæ”¶åˆ°ä¸€æ¡ç³»ç»Ÿé€šçŸ¥ã€‚","like_count":982,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417682,"discussion_content":"é«˜æ‰‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526274754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1952958,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJE5Y62XOTFc7B25pqzmI6nqInMmVNSAic8Yg3hsDbgtVb3ovFib4wUUwOficbKkuicOGvCqm8r761Fw/132","nickname":"Geek_0de10a","note":"","ucode":"ECA4552867055C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257208,"discussion_content":"æ¯”ä½œè€…è®²çš„æ¸…æ¥šå¤šäº†ï¼Œæ„Ÿè§‰ä½œè€…è¿™é‡Œè®²çš„ä¸€ç‚¹éƒ½ä¸æ¸…æ¥šï¼Œæˆ–è€…å¯¹æ–°æ‰‹å¾ˆä¸å‹å¥½","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1588531369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1144504,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","nickname":"KAGEMUSHA","note":"","ucode":"DFC05BE62A9C10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1952958,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJE5Y62XOTFc7B25pqzmI6nqInMmVNSAic8Yg3hsDbgtVb3ovFib4wUUwOficbKkuicOGvCqm8r761Fw/132","nickname":"Geek_0de10a","note":"","ucode":"ECA4552867055C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285785,"discussion_content":"è€å¸ˆæ˜¯æœ‰äº›åœ°æ–¹è®²çš„å¾ˆä¹±æ„Ÿè§‰æ˜¯è‡ªå·±æ‡‚äº†é«˜ä¼°äº†è¯»è€…çš„æ°´å‡†ï¼Œä½†æ˜¯è¿™ä¸ªæ€»ç»“ä¹Ÿä¸ç®—å®Œç¾ä¹Ÿæœ‰è®²é”™çš„åœ°æ–¹ï¼Œè€å¸ˆè®²çš„è™½ä¹±ä½†åŸºæœ¬æ²¡é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592938537,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":257208,"ip_address":""},"score":285785,"extra":""}]},{"author":{"id":1401685,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oEicpuoN6vAdFuvIicibn6OsUIDIsMlWVkd21mcd53zjoBIXdiadZCXFkJDUUWPkHuheybQjxQLQnPuxRMpszXmQ4A/132","nickname":"Jovi","note":"","ucode":"E5D399A3E4F02A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343144,"discussion_content":"å®Œçˆ†ä½œè€…","likes_number":14,"is_delete":false,"is_hidden":false,"ctime":1610955299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583833,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","nickname":"rike","note":"","ucode":"920AAD0BD9245C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":149302,"discussion_content":"æ¯”ä½œè€…è®²çš„å¼ºå‡ ä¸ªæ•°é‡çº§ï¼ŒåŸæ¥å¤§ç¥æ†‹ç€ä¸åšå£°åœ¨è¯„è®ºåŒºã€‚","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1579743846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1144504,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","nickname":"KAGEMUSHA","note":"","ucode":"DFC05BE62A9C10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1583833,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","nickname":"rike","note":"","ucode":"920AAD0BD9245C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285851,"discussion_content":"è€å¸ˆæ˜¯æœ‰äº›åœ°æ–¹è®²çš„å¾ˆä¹±æ„Ÿè§‰æ˜¯è‡ªå·±æ‡‚äº†é«˜ä¼°äº†è¯»è€…çš„æ°´å‡†ï¼Œä½†æ˜¯è¿™ä¸ªæ€»ç»“ä¹Ÿä¸ç®—å®Œç¾ä¹Ÿæœ‰è®²é”™çš„åœ°æ–¹ï¼Œè€å¸ˆè®²çš„è™½ä¹±ä½†åŸºæœ¬æ²¡é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592970299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":149302,"ip_address":""},"score":285851,"extra":""}]},{"author":{"id":1108853,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/rlToqaXUGUWPNTHic2pDQR2gibqibWAbhkoeoDccDrCkOG3BPYdJac7yNNwbrpbLDfCteiagrhticiaAhrkIIymxlOFg/132","nickname":"loversInJapan","note":"","ucode":"8A26970BD792A6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3853,"discussion_content":"ä½ æ¯”ä½œè€…è®²å¾—æ¸…æ¥šå¤šäº†ã€‚ã€‚","likes_number":11,"is_delete":false,"is_hidden":false,"ctime":1564886249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1144504,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","nickname":"KAGEMUSHA","note":"","ucode":"DFC05BE62A9C10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1108853,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/rlToqaXUGUWPNTHic2pDQR2gibqibWAbhkoeoDccDrCkOG3BPYdJac7yNNwbrpbLDfCteiagrhticiaAhrkIIymxlOFg/132","nickname":"loversInJapan","note":"","ucode":"8A26970BD792A6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285852,"discussion_content":"è€å¸ˆæ˜¯æœ‰äº›åœ°æ–¹è®²çš„å¾ˆä¹±æ„Ÿè§‰æ˜¯è‡ªå·±æ‡‚äº†é«˜ä¼°äº†è¯»è€…çš„æ°´å‡†ï¼Œä½†æ˜¯è¿™ä¸ªæ€»ç»“ä¹Ÿä¸ç®—å®Œç¾ä¹Ÿæœ‰è®²é”™çš„åœ°æ–¹ï¼Œè€å¸ˆè®²çš„è™½ä¹±ä½†åŸºæœ¬æ²¡é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592970315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3853,"ip_address":""},"score":285852,"extra":""},{"author":{"id":1563245,"avatar":"https://static001.geekbang.org/account/avatar/00/17/da/6d/7c8fdb14.jpg","nickname":"å—¯ã€‚","note":"","ucode":"30FC6EF9A01070","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1144504,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","nickname":"KAGEMUSHA","note":"","ucode":"DFC05BE62A9C10","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291833,"discussion_content":"å“ªé‡Œé”™äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594967807,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":285852,"ip_address":""},"score":291833,"extra":""},{"author":{"id":1144504,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","nickname":"KAGEMUSHA","note":"","ucode":"DFC05BE62A9C10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1563245,"avatar":"https://static001.geekbang.org/account/avatar/00/17/da/6d/7c8fdb14.jpg","nickname":"å—¯ã€‚","note":"","ucode":"30FC6EF9A01070","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292993,"discussion_content":"åå­—å’Œå›æ”¶æ—¶æœºæ€»æœ‰ä¸€ä¸ªæ˜¯é”™çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595406256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":291833,"ip_address":""},"score":292993,"extra":""}]},{"author":{"id":1339724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/71/4c/2cefec07.jpg","nickname":"é™æ°´æµæ·±","note":"","ucode":"644F05EFBD2E7B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4272,"discussion_content":"è§‰å¾—ä½ æ¯”ä½œè€…è®²å¾—æ¸…æ™°ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1565264831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1409357,"avatar":"https://static001.geekbang.org/account/avatar/00/15/81/4d/5f892de2.jpg","nickname":"Echo","note":"","ucode":"F04C6BC4E288A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":47222,"discussion_content":"ä½ æ¯”ä½œè€…è®²çš„å¥½","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1573297484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103445,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d6/55/47e76936.jpg","nickname":"å¶æ˜“","note":"","ucode":"0983EA217ACF28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":181133,"discussion_content":"ä¹‹å‰è‡ªå·±å†™çš„å…³äºå¼•ç”¨çš„ä¸€ç¯‡æ–‡ç« ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹ä¹Ÿå¯ä»¥ç›¸äº’å­¦ä¹ ä¸€ä¸‹https://mp.weixin.qq.com/s/8f29ZfGvZVPe0bO-FahokQ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1582340689,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066928,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/b0/a9b77a1e.jpg","nickname":"å†¬é£å‘å·¦å¹","note":"","ucode":"376C45C5134F93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3846,"discussion_content":"è¿™å››ä¸ªçš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯è§£é‡Šçš„å¾ˆæ¸…æ¥š","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1564880053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1830939,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eriaoouNOT0uLbN3fondbSTTfWjDJibVuFubGWDvzsgCtYmBpaTwvRMQbS0uXoIsUz6aPf7I1S75Rkg/132","nickname":"å‘¨é–å³°","note":"","ucode":"997B9776F923F3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285948,"discussion_content":"æ‰€ä»¥å¹»è±¡å¼•ç”¨å°±æ˜¯æ‰€è°“çš„è™šå¼•ç”¨å§ï¼Ÿ","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1592994184,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1276563,"avatar":"https://static001.geekbang.org/account/avatar/00/13/7a/93/c9302518.jpg","nickname":"é«˜å¿—å¼º","note":"","ucode":"68737002043752","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331268,"discussion_content":"markï¼Œæ€»ç»“çš„æ¯”ä½œè€…è¿˜åˆ°ä½ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606819179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181248,"avatar":"https://static001.geekbang.org/account/avatar/00/12/06/40/ff77554d.jpg","nickname":"å…»ğŸ±","note":"","ucode":"3CBBBEFD3945B2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230301,"discussion_content":"è°¢è°¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586739573,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1924811,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/5e/cb/ad85b408.jpg","nickname":"é»ƒå–»æ¦†","note":"","ucode":"644312AE93C490","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555846,"discussion_content":"Thanks!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647081076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144504,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","nickname":"KAGEMUSHA","note":"","ucode":"DFC05BE62A9C10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285784,"discussion_content":"â€œå¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚è™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ— ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚â€ç»¼åˆæ•´ä¸ªè¯„è®ºåŒºä»¥åŠç®€ä¹¦ä¸Šæœ‰äººæ€»ç»“çš„æ¦‚å¿µæˆ‘è®¤ä¸ºè¿™éƒ¨åˆ†è¯´æ˜æ˜¯å®Œå…¨é”™è¯¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592938389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215141,"discussion_content":"è™šå¼•ç”¨åˆ°åº•æ‚æ€ä¹ˆä½¿ç”¨çš„ï¼Œåªæ˜¯æ³›æ³›è€Œè°ˆï¼Œæ²¡æœ‰æ„ä¹‰ã€‚\nä½ è¿™ä¸ªç³»ç»Ÿé€šçŸ¥çš„å‡­æ®æ˜¯ä»€ä¹ˆï¼Ÿæºç ä¸­æ²¡çœ‹åˆ°\nå…¶ä¼šåœ¨finalizeè°ƒç”¨æ—¶ å…¥é˜Ÿè‡ªå·±å…³è”çš„queue\næ‰€ä»¥å…¶ä½¿ç”¨æ–¹æ³• è¿˜æ˜¯éœ€è¦ç”¨æˆ·ä»£ç ä¸»åŠ¨checkï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585290143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1494177,"avatar":"https://static001.geekbang.org/account/avatar/00/16/cc/a1/16d488fc.jpg","nickname":"é˜¿å›½","note":"","ucode":"2801861BB1C115","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48698,"discussion_content":"Mark ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573520559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8411,"user_name":"æµ·æ€ªå“¥å“¥","can_delete":false,"product_type":"c1","uid":1127866,"ip_address":"","ucode":"E82536F7259525","user_header":"https://static001.geekbang.org/account/avatar/00/11/35/ba/01762322.jpg","comment_is_top":false,"comment_ctime":1526189155,"is_pvip":false,"replies":[{"id":"2501","content":"ç‰›","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526270816,"ip_address":"","comment_id":8411,"utype":1}],"discussion_count":12,"race_medal":0,"score":"1934261472355","product_id":100006701,"comment_content":"æˆ‘çš„ç†è§£ï¼Œjavaçš„è¿™ç§æŠ½è±¡å¾ˆæœ‰æ„æ€ã€‚<br>å¼ºå¼•ç”¨å°±åƒå¤§è€å©†ï¼Œå…³ç³»å¾ˆç¨³å›ºã€‚<br>è½¯å¼•ç”¨å°±åƒäºŒè€å©†ï¼Œéšæ—¶æœ‰å¤±å® çš„å¯èƒ½ï¼Œä½†ä¹Ÿæœ‰æ‰¶æ­£çš„å¯èƒ½ã€‚<br>å¼±å¼•ç”¨å°±åƒæƒ…äººï¼Œå…³ç³»ä¸ç¨³å®šï¼Œå¯èƒ½è·Ÿåˆ«äººè·‘äº†ã€‚<br>å¹»åƒå¼•ç”¨å°±æ˜¯æ¢¦ä¸­æƒ…äººï¼Œåªåœ¨æ¢¦é‡Œå‡ºç°è¿‡ã€‚","like_count":451,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417703,"discussion_content":"ç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526270816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1636683,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJkTktMhVRbkn7U3mvnHUBBKkbzf17l98iaYZ35MQibvZPeZfXDV1licucYOI1Z70hk51X7TB9K8erpg/132","nickname":"åˆ˜é‘«","note":"","ucode":"E818077E19CD98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24796,"discussion_content":"é«˜æ‰‹ä¸­çš„é«˜æ‰‹","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1570266006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1583833,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/E3XKbwTv6WTssolgqZjZCkiazHgl2IdBYfwVfAcB7Ff3krsIQeBIBFQLQE1Kw91LFbl3lic2EzgdfNiciaYDlJlELA/132","nickname":"rike","note":"","ucode":"920AAD0BD9245C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":149305,"discussion_content":"æ¯”ä½œè€…å’Œäº‘ç”Ÿç¨‹åºå‘˜æ›´å‰å®³ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579743979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2642519,"avatar":"https://static001.geekbang.org/account/avatar/00/28/52/57/7212af10.jpg","nickname":"FAN","note":"","ucode":"C36DC4429F4A08","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570544,"discussion_content":"NBå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651809852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122277,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1f/e5/053ebfc9.jpg","nickname":"â€¢â€¢â€¢","note":"","ucode":"D7F185FC4BFE14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570356,"discussion_content":"å“ˆå“ˆï¼Œæ‰åå“¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651741474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2408132,"avatar":"https://static001.geekbang.org/account/avatar/00/24/be/c4/c4a8198c.jpg","nickname":"å¤§æ˜Ÿæ˜Ÿå’Œå°çŒ©çŒ©","note":"","ucode":"16817D5C063C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389036,"discussion_content":"æƒ³è±¡åŠ›ä¸°å¯Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629100229,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1436958,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ed/1e/d5ab9825.jpg","nickname":"å¤§æ™ºè‹¥å®‡","note":"","ucode":"7AA696AD29313C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343977,"discussion_content":"è¿™ä¸ªæ¯”å–»å¾ˆæœ‰æ„æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611222850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015938,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/80/82/3c21b30c.jpg","nickname":"æ¢…å­é»„æ—¶é›¨","note":"","ucode":"9F788D09C2E9E7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304869,"discussion_content":"ğŸ˜…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599703118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1635421,"avatar":"https://static001.geekbang.org/account/avatar/00/18/f4/5d/b67c6c57.jpg","nickname":"sharphuang","note":"","ucode":"4E84B0B88A1D48","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302988,"discussion_content":"ç‰›é€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599104878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205697,"avatar":"https://static001.geekbang.org/account/avatar/00/12/65/c1/afcd981b.jpg","nickname":"ç¨‹åºå‘˜äºŒå¸ˆå…„","note":"","ucode":"C9E3B5B3358BDF","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":291750,"discussion_content":"ç‰›çš®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594946317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1078675,"avatar":"https://static001.geekbang.org/account/avatar/00/10/75/93/8135f895.jpg","nickname":"bywuu","note":"","ucode":"2EDDB7E70CABB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":219921,"discussion_content":"å¤ªäº†ä¸èµ·ï¼Œä¸€ä¸‹å°±è®°ä½äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585824853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1644768,"avatar":"https://static001.geekbang.org/account/avatar/00/19/18/e0/fa5a473b.jpg","nickname":"Geek_dbb622","note":"","ucode":"9A061D09F48208","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":175765,"discussion_content":"æƒ³å¥³äººæƒ³ç–¯å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581994837,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8492,"user_name":"è‚–ä¸€æ—","can_delete":false,"product_type":"c1","uid":1113317,"ip_address":"","ucode":"1DE45D906EB836","user_header":"https://static001.geekbang.org/account/avatar/00/10/fc/e5/605f423f.jpg","comment_is_top":false,"comment_ctime":1526263119,"is_pvip":false,"discussion_count":12,"race_medal":0,"score":"1062383185231","product_id":100006701,"comment_content":"è¿™ç¯‡æ–‡ç« åªæè¿°äº†å¼ºå¼•ç”¨ï¼Œè½¯å¼•ç”¨ï¼Œå¼±å¼•ç”¨ï¼Œå¹»æƒ³å¼•ç”¨çš„ç‰¹å¾ã€‚æ²¡æœ‰è®²ä»–ä»¬çš„æ¦‚å¿µï¼Œæ›´æ²¡æœ‰è®²æ€ä¹ˆç”¨â€¦gc rootsä¹Ÿæ²¡æåˆ°ã€‚å¸Œæœ›èƒ½è¡¥å……å®Œæ¥é¾™å»è„‰ï¼Œè®©æ²¡æœ‰å¤ªå¤šåŸºç¡€çš„äººä¹Ÿèƒ½çœ‹æ‡‚","like_count":248,"discussions":[{"author":{"id":1070051,"avatar":"https://static001.geekbang.org/account/avatar/00/10/53/e3/39dcfb11.jpg","nickname":"æ¥ç¢—ç»¿è±†æ±¤","note":"","ucode":"B0AB63B8D9729F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":24271,"discussion_content":"ç¡®å®å†™çš„å¾ˆçƒ‚","likes_number":15,"is_delete":false,"is_hidden":false,"ctime":1570075603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145750,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7b/96/95a6e13a.jpg","nickname":"poetess","note":"","ucode":"240159FB179205","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":3511,"discussion_content":"è¿™ä¸ªæ–‡ç« çœŸæ˜¯è¶Šçœ‹è¶Šå¤´å¤§ï¼Œå•¥éƒ½æ˜¯ç‚¹ä¸€ä¸‹","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1564543562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1144012,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJL6oZUWKOHYkEDqsegvtRhHdfekAQ74A8BFIiah6u8PY5N31aicVeGJpKNaicPaH9FjyBNAvrpbU45w/132","nickname":"rrsx","note":"","ucode":"EB63D2B27CA514","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1145750,"avatar":"https://static001.geekbang.org/account/avatar/00/11/7b/96/95a6e13a.jpg","nickname":"poetess","note":"","ucode":"240159FB179205","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":21418,"discussion_content":"èµåŒ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1569481719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":3511,"ip_address":""},"score":21418,"extra":""},{"author":{"id":1324314,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/1a/9fa38dc9.jpg","nickname":"å­ç»","note":"","ucode":"5C26FF10934534","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1144012,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJL6oZUWKOHYkEDqsegvtRhHdfekAQ74A8BFIiah6u8PY5N31aicVeGJpKNaicPaH9FjyBNAvrpbU45w/132","nickname":"rrsx","note":"","ucode":"EB63D2B27CA514","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349693,"discussion_content":"èµåŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1613461936,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":21418,"ip_address":""},"score":349693,"extra":""}]},{"author":{"id":1179298,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fe/a2/5252a278.jpg","nickname":"å¯¹æ–¹æ­£åœ¨è¾“å…¥ã€‚ã€‚ã€‚","note":"","ucode":"7B0DEB4D9B43D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349501,"discussion_content":"åŸºæœ¬ä¸Šæ¯ç¯‡æ–‡ç« ï¼Œæˆ‘éƒ½æ˜¯çœ‹è¯„è®ºçœ‹æ‡‚çš„ã€‚ã€‚ã€‚ã€‚","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1613271274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1401685,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oEicpuoN6vAdFuvIicibn6OsUIDIsMlWVkd21mcd53zjoBIXdiadZCXFkJDUUWPkHuheybQjxQLQnPuxRMpszXmQ4A/132","nickname":"Jovi","note":"","ucode":"E5D399A3E4F02A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343142,"discussion_content":"ç¡®å®ï¼Œæµªè´¹ç²¾åŠ›å’Œäººæ°‘å¸","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1610955259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1473346,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7b/42/8607b8f8.jpg","nickname":"Believer","note":"","ucode":"53C32C9F6C35FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344477,"discussion_content":"è¯„è®ºæ‰æ˜¯ç²¾å","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1611473145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1400962,"avatar":"https://static001.geekbang.org/account/avatar/00/15/60/82/9a43504b.jpg","nickname":"[è€¶]å‹è¶…î–","note":"","ucode":"890572F77C3670","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36977,"discussion_content":"å®Œå…¨çœ‹è’™é€¼\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571473401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2014573,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/bd/6d/7010f98e.jpg","nickname":"SharpBB","note":"","ucode":"D30C5B798B8E8C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555838,"discussion_content":"å¯¹å•Š  æˆ‘è§‰å¾—è¿™ç¯‡æ˜¯çœŸçš„çƒ‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647078648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2408132,"avatar":"https://static001.geekbang.org/account/avatar/00/24/be/c4/c4a8198c.jpg","nickname":"å¤§æ˜Ÿæ˜Ÿå’Œå°çŒ©çŒ©","note":"","ucode":"16817D5C063C14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389037,"discussion_content":"å¯¹å‘€ï¼Œå‹æ ¹å°±æ²¡æœ‰ä»‹ç»4ç§å¼•ç”¨çš„æ¦‚å¿µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629100297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1985143,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/4a/77/f394be95.jpg","nickname":"Alpahe","note":"","ucode":"4ED1C3302C0E8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358642,"discussion_content":"æ˜¯å•Šå®Œå…¨çœ‹ä¸æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616026760,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1987202,"avatar":"","nickname":"Geek_783cc7","note":"","ucode":"C43F76B1978FA9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337543,"discussion_content":"ç¡®å®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608969723,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8320,"user_name":"Jerryé“¶é“¶","can_delete":false,"product_type":"c1","uid":1008404,"ip_address":"","ucode":"80DA1172A2360A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg","comment_is_top":false,"comment_ctime":1526091435,"is_pvip":false,"replies":[{"id":"2518","content":"éå¸¸ä¸é”™ï¼Œé«˜æ‰‹ï¼›<br>ä½ å¯ä»¥å‚è€ƒjdkå†…éƒ¨cleanerä½¿ç”¨ï¼Œä¸€ä¸ªæ–¹é¢å°±è´´å¤ªå¤šï¼Œæœ‰å‡‘å­—æ•°å«Œç–‘äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526274880,"ip_address":"","comment_id":8320,"utype":1}],"discussion_count":7,"race_medal":0,"score":"929239027371","product_id":100006701,"comment_content":"1. å¼ºå¼•ç”¨ï¼šé¡¹ç›®ä¸­åˆ°å¤„éƒ½æ˜¯ã€‚<br><br>2. è½¯å¼•ç”¨ï¼šå›¾ç‰‡ç¼“å­˜æ¡†æ¶ä¸­ï¼Œâ€œå†…å­˜ç¼“å­˜â€ä¸­çš„å›¾ç‰‡æ˜¯ä»¥è¿™ç§å¼•ç”¨æ¥ä¿å­˜ï¼Œä½¿å¾—JVMåœ¨å‘ç”ŸOOMä¹‹å‰ï¼Œå¯ä»¥å›æ”¶è¿™éƒ¨åˆ†ç¼“å­˜<br><br>3. è™šå¼•ç”¨ï¼šåœ¨é™æ€å†…éƒ¨ç±»ä¸­ï¼Œç»å¸¸ä¼šä½¿ç”¨è™šå¼•ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç±»å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰¿æ‹…callbackçš„é™æ€å†…éƒ¨ç±»ï¼Œåˆ™å¸¸ä»¥è™šå¼•ç”¨çš„æ–¹å¼æ¥ä¿å­˜å¤–éƒ¨ç±»(å®¿ä¸»ç±»)çš„å¼•ç”¨ï¼Œå½“å¤–éƒ¨ç±»éœ€è¦è¢«JVMå›æ”¶æ—¶ï¼Œä¸ä¼šå› ä¸ºç½‘ç»œè¯·æ±‚æ²¡æœ‰åŠæ—¶å›æ¥ï¼Œå¯¼è‡´å¤–éƒ¨ç±»ä¸èƒ½è¢«å›æ”¶ï¼Œå¼•èµ·å†…å­˜æ³„æ¼<br><br>4. å¹½çµå¼•ç”¨ï¼šè¿™ç§å¼•ç”¨çš„get()æ–¹æ³•è¿”å›æ€»æ˜¯nullï¼Œæ‰€ä»¥ï¼Œå¯ä»¥æƒ³è±¡ï¼Œåœ¨å¹³å¸¸çš„é¡¹ç›®å¼€å‘è‚¯å®šç”¨çš„å°‘ã€‚ä½†æ˜¯æ ¹æ®è¿™ç§å¼•ç”¨çš„ç‰¹ç‚¹ï¼Œæˆ‘æƒ³å¯ä»¥é€šè¿‡ç›‘æ§è¿™ç±»å¼•ç”¨ï¼Œæ¥è¿›è¡Œä¸€äº›åƒåœ¾æ¸…ç†çš„åŠ¨ä½œã€‚ä¸è¿‡å…·ä½“çš„åœºæ™¯ï¼Œè¿˜æ˜¯å¸Œæœ›å³°å“¥ä¸¾å‡ ä¸ªç¨å¾®è¯¦ç»†çš„å®æˆ˜æ€§çš„ä¾‹å­ï¼Ÿ","like_count":216,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417672,"discussion_content":"éå¸¸ä¸é”™ï¼Œé«˜æ‰‹ï¼›\nä½ å¯ä»¥å‚è€ƒjdkå†…éƒ¨cleanerä½¿ç”¨ï¼Œä¸€ä¸ªæ–¹é¢å°±è´´å¤ªå¤šï¼Œæœ‰å‡‘å­—æ•°å«Œç–‘äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526274880,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215142,"discussion_content":"å¼±å¼•ç”¨ --ã€‹æ¯”è¾ƒå…¸å‹çš„å®‰å“é‡Œé¢ handleræ³„éœ²è§£å†³","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585290321,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1482665,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/NPfmxlo2j93hOjYoJV54WHYFkeibzibUbRGhGCyicty5NXPx9XKxicZotfmjqhcibUbjJYnW8rLFDatleT2zhyaTlqg/132","nickname":"å°æ°¸","note":"","ucode":"40AB78B21615D5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13469,"discussion_content":"å¥½åƒè§£é‡Šäº†ThreadLocal#ThreadLocalMapé‡Œçš„Entryä¸ºä»€ä¹ˆè¦å£°æ˜ä¸ºå¼±å¼•ç”¨äº†ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹è¢«æŒ‚èµ·æˆ–è€…å‘ç”Ÿæ­»é”ï¼Œå¥½åƒthreadLocalå°±æ²¡åŠæ³•æ­£å¸¸å›æ”¶äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568671609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645866,"avatar":"","nickname":"frosro","note":"","ucode":"29BB9FC40800D5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7003,"discussion_content":"è¿™é‡Œçš„è™šå¼•ç”¨å°±æ˜¯æ–‡ç« é‡Œçš„å¼±å¼•ç”¨å§ã€‚å¹½çµå¼•ç”¨å°±æ˜¯æ–‡ç« é‡Œçš„è™šå¼•ç”¨å§ã€‚æœ‰ç‚¹æ‡µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567251120,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1482665,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/NPfmxlo2j93hOjYoJV54WHYFkeibzibUbRGhGCyicty5NXPx9XKxicZotfmjqhcibUbjJYnW8rLFDatleT2zhyaTlqg/132","nickname":"å°æ°¸","note":"","ucode":"40AB78B21615D5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645866,"avatar":"","nickname":"frosro","note":"","ucode":"29BB9FC40800D5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13468,"discussion_content":"æ˜æ˜¾è¿™å†™é”™äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568671368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7003,"ip_address":""},"score":13468,"extra":""},{"author":{"id":1008404,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg","nickname":"Jerryé“¶é“¶","note":"","ucode":"80DA1172A2360A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1645866,"avatar":"","nickname":"frosro","note":"","ucode":"29BB9FC40800D5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":29656,"discussion_content":"å—¯ å°±æ˜¯weakreference   ï¼Œç¿»è¯‘çš„å·®åˆ«ã€‚å¼±å¼•ç”¨çš„ç¿»è¯‘æ¯”è¾ƒå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570777914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7003,"ip_address":""},"score":29656,"extra":""}]},{"author":{"id":1058002,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/d2/40353046.jpg","nickname":"zeroxus","note":"","ucode":"9DBB3A81F01792","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1847,"discussion_content":"ç»“åˆåº”ç”¨åœºæ™¯ï¼Œç«‹é©¬å°±æœ‰æ„Ÿè§‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562988725,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9113,"user_name":"é¾™çŒ«çŒ«çŒ«çŒ«","can_delete":false,"product_type":"c1","uid":1131334,"ip_address":"","ucode":"B487E83EDF2FFC","user_header":"","comment_is_top":false,"comment_ctime":1526611734,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"435318308630","product_id":100006701,"comment_content":"çƒ­è¯„ç¬¬ä¸€è®²å¾—æ¯”è¿™æ–‡ç« è¿˜å¥½","like_count":102},{"had_liked":false,"id":8796,"user_name":"Jane","can_delete":false,"product_type":"c1","uid":1126744,"ip_address":"","ucode":"FEB5FA991CAC9F","user_header":"https://static001.geekbang.org/account/avatar/00/11/31/58/ddd35b42.jpg","comment_is_top":false,"comment_ctime":1526448522,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"306469126538","product_id":100006701,"comment_content":"å¼•ç”¨å‡ºç°çš„æ ¹æºæ˜¯ç”±äºGCå†…å­˜å›æ”¶çš„åŸºæœ¬åŸç†â€”GCå›æ”¶å†…å­˜æœ¬è´¨ä¸Šæ˜¯å›é¦–å¯¹è±¡ï¼Œè€Œç›®å‰æ¯”è¾ƒæµè¡Œçš„å›æ”¶ç®—æ³•æ˜¯å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Œä»GC Rootså¼€å§‹æŒ‰ç…§ä¸€å®šçš„é€»è¾‘åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯è¾¾ï¼Œä¸å¯è¾¾çš„è¯å°±è¯´æ˜è¿™ä¸ªå¯¹è±¡å·²æ­»ï¼ˆé™¤æ­¤ä¹‹å¤–å¦å¤–ä¸€ç§å¸¸è§çš„ç®—æ³•å°±æ˜¯å¼•ç”¨è®¡æ•°æ³•ï¼Œä½†æ˜¯è¿™ç§ç®—æ³•æœ‰ä¸ªé—®é¢˜å°±æ˜¯ä¸èƒ½è§£å†³ç›¸äº’å¼•ç”¨çš„é—®é¢˜ï¼‰ã€‚åŸºäºæ­¤Javaå‘ç”¨æˆ·æä¾›äº†å››ç§å¯ç”¨çš„å¼•ç”¨ï¼šå³æˆ‘ä»¬æœ¬ç« è®²è§£åˆ°çš„å‡ ç§ï¼ŒåŒæ—¶è¿˜æä¾›äº†ä¸€ç§ä¸å¯è¢«ä½¿ç”¨çš„å¼•ç”¨â€”FinalReferenceï¼Œè¿™ä¸ªå¼•ç”¨æ˜¯å’Œææ„å‡½æ•°å¯†åˆ‡ç›¸å…³çš„ï¼‰ã€‚å¼ºå¼•ç”¨ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡newçš„æ–¹å¼åˆ›å»ºï¼Œå…¶å®ƒçš„å‡ ç§å¼•ç”¨Javaæä¾›äº†ç›¸åº”çš„ç±»ï¼šSoftReferenceã€WeakReferenceã€PhantomReferenceã€‚å¦‚æœä½ å»æŸ¥çœ‹æºç ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªç±»å®ç°çš„æ ¸å¿ƒæ˜¯Referenceä¸ReferenceQueueï¼ˆæ›´é€šä¿—åœ°è¯´å¼•ç”¨é˜Ÿåˆ—ï¼‰ä¸¤ä¸ªç±»ï¼Œè€Œä¸”è¿™ä¸¤ä¸ªç±»ä¹Ÿç‰¹åˆ«çš„ç®€å•ã€‚Referenceç±»ä¼¼ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹æ¥æ‰§è¡Œå¯¹åº”å¼•ç”¨çš„æ¸…é™¤ã€Cleaner.cleanï¼ˆå¦‚æœä¼ å…¥çš„å¯¹è±¡æ˜¯è¯¥ç±»çš„è¯ï¼‰ã€ä»¥åŠå¼•ç”¨çš„å…¥é˜Ÿæ“ä½œï¼ˆéœ€è¦åœ¨åˆ›å»ºå¼•ç”¨çš„æ—¶å€™åˆ¶å®šä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼‰ï¼›ReferenceQueueè¿™æ˜¯åˆ¶å®šäº†å¼•ç”¨é˜Ÿåˆ—çš„ä¸€äº›å…·ä½“æ“ä½œï¼Œç®€å•çš„æ¥è¯´å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œå¹¶æä¾›äº†ä¸€äº›åŸºæœ¬çš„é“¾è¡¨æ“ä½œï¼‰ã€‚è€Œé™¤äº†å¼ºå¼•ç”¨å¤–å…¶å®ƒçš„éƒ½æ˜¯ç»§æ‰¿äºæ­¤ï¼Œé€šè¿‡è¿™æ ·çš„ç±»çº¦æŸäº†å¼•ç”¨çš„ç›¸å…³å†…å®¹ï¼Œä¾¿äºå’ŒGCè¿›è¡Œäº¤äº’ã€‚è¿™å‡ ç§å¼•ç”¨çš„åŒºåˆ«å¦‚ä¸‹ï¼š<br>1:å¼ºå¼•ç”¨æ˜¯åªæœ‰å½“GCæ˜ç¡®åˆ¤æ–­è¯¥å¼•ç”¨æ— æ•ˆçš„æ—¶å€™æ‰ä¼šå›æ”¶ç›¸åº”çš„å¼•ç”¨å¯¹è±¡ï¼Œå³ä½¿æŠ›å‡ºOOMEè­¦å‘Šã€‚<br>2:è½¯å¼•ç”¨æ˜¯å½“GCæ£€æµ‹åˆ°ç»§ç»­åˆ›å»ºå¯¹è±¡ä¼šå¯¼è‡´OOMEçš„æ—¶å€™ä¼šè¿›è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œè¿™æ¬¡å›æ”¶ä¼šè®²è½¯å¼•ç”¨å›æ”¶ä»¥é˜²æŠ›å‡ºå¼‚å¸¸ï¼Œæ ¹æ®è¿™æ ·çš„ç‰¹ç‚¹è¯¥å¼•ç”¨å¸¸ç”¨æ¥è¢«å½“ä½œç¼“å­˜ä½¿ç”¨ã€‚<br>3:è™šå¼•ç”¨æ˜¯å“ªäº›å¦‚æœå¼•ç”¨æœªè¢«ä½¿ç”¨ï¼Œå°±ä¼šåœ¨æœ€è¿‘çš„ä¸€æ¬¡GCçš„æ—¶å€™è¢«å›æ”¶ã€‚ä¾‹å¦‚Javaçš„TheardLocalä¸åŠ¨æ€ä»£ç†éƒ½æ˜¯åŸºäºè¿™æ ·çš„ä¸€ä¸ªå¼•ç”¨å®ç°çš„ï¼Œä¸€èˆ¬é’ˆå¯¹é‚£äº›æ¯”è¾ƒæ•æ„Ÿçš„æ•°æ®ã€‚<br>4:å¹»æƒ³å¼•ç”¨æ˜¯é’ˆå¯¹é‚£äº›å·²ç»æ‰§è¡Œå®Œææ„å‡½æ•°ä¹‹åï¼Œä»ç„¶éœ€è¦åœ¨æ‰§è¡Œä¸€äº›å…¶å®ƒæ“ä½œçš„å¯¹è±¡ï¼šæ¯”å¦‚èµ„æºå¯¹è±¡çš„å…³é—­å°±å¯ä»¥ç”¨åˆ°è¿™ä¸ªå¼•ç”¨ã€‚","like_count":72,"discussions":[{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384003,"discussion_content":"å¼•ç”¨çš„åŒºåˆ«å“ªé‡Œï¼š3:è™šå¼•ç”¨æ˜¯ï¼Œåº”è¯¥ä¸ºä¸ºå¼±å¼•ç”¨ï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626333545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1179028,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","nickname":"å’¸é±¼","note":"","ucode":"5E79636DE48155","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282910,"discussion_content":"å¯è¾¾æ€§åˆ†æç®—æ³•å°±æ˜¯ä¸ºäº†è§£å†³å¼•ç”¨è®¡æ•°æ³•çš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚ã€‚ã€‚  æ€ä¹ˆå¯èƒ½è¿˜ä¼šå‡ºç°å¾ªç¯å¼•ç”¨ï¼Ÿ å¤šç§å¼•ç”¨ç±»å‹çš„å‡ºç°æ˜¯ä¸ºäº†æ»¡è¶³æ›´ä¸°å¯Œçš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ä¸€äº›ç¼“å­˜ä¹‹ç±»ï¼Œå¯ä»¥åœ¨å†…å­˜å‘Šæ€¥æ—¶æ”¾å¼ƒè‡ªå·±ï¼Œä¿è¯ç¨‹åºå¯æ­£å¸¸è¿è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592116608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1092044,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a9/cc/c417c886.jpg","nickname":"æ¹®ç­æ˜Ÿç©º","note":"","ucode":"B1061A4C298E13","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1179028,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","nickname":"å’¸é±¼","note":"","ucode":"5E79636DE48155","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":321839,"discussion_content":"ä½ ç†è§£é”™äº†ï¼Œå†çœ‹ä¸€éä»–çš„è¯„è®º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604637709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282910,"ip_address":""},"score":321839,"extra":""},{"author":{"id":2330905,"avatar":"https://static001.geekbang.org/account/avatar/00/23/91/19/6a3e7efc.jpg","nickname":"ç¨‹åºå‘˜9527","note":"","ucode":"1A1609F6BEAD84","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1179028,"avatar":"https://static001.geekbang.org/account/avatar/00/11/fd/94/0247f945.jpg","nickname":"å’¸é±¼","note":"","ucode":"5E79636DE48155","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383996,"discussion_content":"åŸè¯æ˜¯ï¼šé™¤æ­¤ä¹‹å¤–å¦å¤–ä¸€ç§å¸¸è§çš„ç®—æ³•å°±æ˜¯å¼•ç”¨è®¡æ•°æ³•ï¼Œä½†æ˜¯è¿™ç§ç®—æ³•æœ‰ä¸ªé—®é¢˜å°±æ˜¯ä¸èƒ½è§£å†³ç›¸äº’å¼•ç”¨çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626332600,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":282910,"ip_address":""},"score":383996,"extra":""}]},{"author":{"id":1008582,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/63/c6/d6ea3df3.jpg","nickname":"æ—è‚¯","note":"","ucode":"D2C97220230DE5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25257,"discussion_content":"è¿™ä¸ªè®²çš„æ¯”ä½œè€…é€å½»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570491754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8573,"user_name":"feitian","can_delete":false,"product_type":"c1","uid":1123623,"ip_address":"","ucode":"56167A8210F48F","user_header":"https://static001.geekbang.org/account/avatar/00/11/25/27/5aef841d.jpg","comment_is_top":false,"comment_ctime":1526343068,"is_pvip":true,"replies":[{"id":"2577","content":"å¥½å»ºè®®ï¼Œå›å¤´å’Œæå®¢åé¦ˆä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526368359,"ip_address":"","comment_id":8573,"utype":1}],"discussion_count":2,"race_medal":0,"score":"237749544348","product_id":100006701,"comment_content":"æˆ‘è§‰å¾—å½•éŸ³å’Œæ–‡å­—å¯ä»¥ä¸ä¸€æ ·ï¼Œä¸è¦å…¼é¡¾è¿™ä¸¤è€…ï¼Œå½•éŸ³å†…å®¹åº”è¯¥è¿œå¤šäºæ–‡å­—ï¼Œå°±åƒPPTä¸€æ ·ï¼Œè®²è¿°çš„äººè¡¨è¿°çš„ä¼šè¿œå¤šäºæ–‡å­—ä½“ç°å‡ºæ¥çš„ä¸œè¥¿ã€‚æ‰€ä»¥ä¸ç”¨ä¸ºäº†å½•éŸ³æ–¹ä¾¿è€ƒè™‘æ–‡å­—å†…å®¹å¤šå°‘ï¼Œæ–‡å­—å°½é‡èƒ½ä¸é å½•éŸ³ä¹Ÿæ˜¯å®Œæ•´çš„ï¼Œå½•éŸ³çš„å†…å®¹ä¼šæ›´ä¸°å¯Œï¼Œä½†æœ‰äº›ä¸å¥½æè¿°çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ä»£ç è¦é…åˆæ–‡å­—ä¸€èµ·çœ‹ã€‚","like_count":55,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417774,"discussion_content":"å¥½å»ºè®®ï¼Œå›å¤´å’Œæå®¢åé¦ˆä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526368359,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2540922,"avatar":"","nickname":"Geek_309ecf","note":"","ucode":"2A41F7B21F7AFC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362650,"discussion_content":"...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616998612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8474,"user_name":"æ¢ç´¢æ— æ­¢å¢ƒ","can_delete":false,"product_type":"c1","uid":1044178,"ip_address":"","ucode":"91D2A9907DFA79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ee/d2/7024431c.jpg","comment_is_top":false,"comment_ctime":1526257729,"is_pvip":false,"replies":[{"id":"2512","content":"è°¢è°¢åé¦ˆï¼Œæˆ‘ä¼šå¹³è¡¡ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯è´´å¤ªå¤šä»£ç å¾ˆå®¹æ˜“å­—æ•°å°±æ»¡äº†ï¼Œä¹Ÿä¸åˆ©äºå½•éŸ³é¢‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526274440,"ip_address":"","comment_id":8474,"utype":1}],"discussion_count":2,"race_medal":0,"score":"199094753345","product_id":100006701,"comment_content":"å¸Œæœ›å¯ä»¥é…åˆä¸€äº›å®é™…çš„ä¾‹å­æ¥è®²è§£å„ç§å¼•ç”¨ä¼šæ›´å¥½ï¼Œä¸ä¼šä»…åœç•™åœ¨ç†è®ºç†è§£å±‚é¢ï¼Œå®é™…ä¾‹å­æ›´æœ‰åŠ©äºç†è§£ï¼","like_count":45,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417738,"discussion_content":"è°¢è°¢åé¦ˆï¼Œæˆ‘ä¼šå¹³è¡¡ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯è´´å¤ªå¤šä»£ç å¾ˆå®¹æ˜“å­—æ•°å°±æ»¡äº†ï¼Œä¹Ÿä¸åˆ©äºå½•éŸ³é¢‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526274440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1418862,"avatar":"https://static001.geekbang.org/account/avatar/00/15/a6/6e/21907ff9.jpg","nickname":"Xä¸­å€ª","note":"","ucode":"F28FAFF2FEDD1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6718,"discussion_content":"ä½œè€…è¯´ï¼šè´´å¤ªå¤šä»£ç å®¹æ˜“å­—æ•°å°±æ»¡äº†ã€‚æˆ‘æ„Ÿè§‰å­—æ•°ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬çœ‹äº†éƒ½æ‡‚ã€‚èƒ½å¤Ÿå¿«é€Ÿçš„ç†è§£ã€æŒæ¡ï¼Œè¾¾åˆ°ç™¾é—®ä¸å€’ã€‚å¤šå†™åƒå§å­—ï¼Œæµªè´¹çš„æ˜¯ä½œè€…ä¸¤ä¸ªå°æ—¶æ—¶é—´ï¼Œå¯¹äºä¸ç†è§£çš„å†…å®¹æˆ‘ä»¬èŠ±è´¹çš„æ—¶é—´ä¸åªä¸¤ä¸ªå°æ—¶ï¼Œç½‘ä¸Šæ‰¾ç­”æ¡ˆï¼Œåˆ†æå¯¹é”™ã€‚æ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œæˆ‘ä¸æ˜¯åœ¨æŠ¢ä½ çš„é’±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567067611,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8361,"user_name":"çŸ³å¤´ç‹®å­","can_delete":false,"product_type":"c1","uid":1118031,"ip_address":"","ucode":"3BABB93E552022","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/4f/c75c4889.jpg","comment_is_top":false,"comment_ctime":1526117342,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"181914743774","product_id":100006701,"comment_content":"å¯¹å„ç§å¼•ç”¨çš„ç†è§£ï¼Œå¯ä»¥ç†è§£ä¸ºå¯¹è±¡å¯¹ jvm å †å†…å­˜çš„å ç”¨æ—¶é•¿ã€‚å¯¹äºå¯¹è±¡å¯è¾¾æ€§åƒåœ¾å›æ”¶ç®—æ³•ï¼Œå¯è¾¾æ€§å¯ä»¥è®¤ä¸ºå›æ”¶å†…å­˜çš„æ ‡å¿—ã€‚<br>1ï¼Œå¼ºå¼•ç”¨ï¼Œåªè¦å¯¹è±¡å¼•ç”¨å¯è¾¾ï¼Œå¯¹è±¡ä½¿ç”¨çš„å†…å­˜å°±ä¸€ç›´è¢«å ç”¨ã€‚<br>2ï¼Œè½¯å¼•ç”¨ï¼Œå¯¹è±¡ä½¿ç”¨çš„å†…å­˜ä¸€ç›´å ç”¨ï¼Œç›´åˆ° jvm è®¤ä¸ºæœ‰å¿…è¦å›æ”¶å†…å­˜ã€‚<br>3ï¼Œå¼±å¼•ç”¨ï¼Œå¯¹è±¡ä½¿ç”¨çš„å†…å­˜ä¸€ç›´å ç”¨ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡ gcã€‚<br>æ±‚èµã€‚ğŸ˜‚ ğŸ˜‚ ğŸ˜‚ ","like_count":43,"discussions":[{"author":{"id":1811337,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a3/89/2aaf109f.jpg","nickname":"å¤§æ–°","note":"","ucode":"4ABC791BD4B491","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":278830,"discussion_content":"ä¸‹ä¸€æ¬¡GCæ˜¯æŒ‡æ–°ç”Ÿä»£è¿˜æ˜¯è€å¹´ä»£ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591239277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9906,"user_name":"kursk.ye","can_delete":false,"product_type":"c1","uid":1015995,"ip_address":"","ucode":"9D6A3854E408F9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/bb/c0ed9d76.jpg","comment_is_top":false,"comment_ctime":1527153146,"is_pvip":false,"replies":[{"id":"3253","content":"éå¸¸æ„Ÿè°¢åé¦ˆï¼›<br>å…³äºå¼•ç”¨è®¡æ•°ï¼Œä¹Ÿæœ‰ä¼˜åŠ¿ï¼Œæˆ‘è®°å¾—æŸä¸ªå›½å¤–ä¸€çº¿äº’è”ç½‘å…¬å¸è°ƒä¼˜pythonï¼Œå°±æ˜¯åªç”¨å¼•ç”¨è®¡æ•°ï¼Œå…³é—­gc","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1527484647,"ip_address":"","comment_id":9906,"utype":1}],"discussion_count":2,"race_medal":0,"score":"151851008506","product_id":100006701,"comment_content":"äºæ˜¯æˆ‘googleåˆ°äº†è¿™ç¯‡æ–‡ç« ,http:&#47;&#47;www.kdgregory.com&#47;index.php?page=java.refobj ï¼ŒèŠ±äº†å‡ å¤©ï¼ˆçœŸçš„æ˜¯å‡ å¤©ï¼Œä¸æ˜¯å‡ å°æ—¶ï¼‰æ‰åŸºæœ¬è¯»å®Œï¼ŒåŸºæœ¬ç†è§£è¿™å‡ ä¸ªreferenceçš„æ¦‚å¿µå’Œä½œç”¨ï¼Œä»è¿™ä¸ªè§’åº¦æ¥è®²éå¸¸æ„Ÿè°¢ä½œè€…ï¼Œå¦‚æœä¸æ˜¯æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘è¿˜ä»¥ä¸ºGCè¿˜æ˜¯æŒ‰ç…§reference counterçš„åŸç†å¤„ç†ï¼ŒåŸæ¥æ€è·¯æ—©å˜äº†ã€‚è¯è¯´å›æ¥ï¼Œã€ŠJava Reference Objectsã€‹çœŸå€¼å¾—å¤§å®¶å¥½å¥½ç¢ç£¨ï¼Œç›¸ä¿¡å¯ä»¥å›ç­”å¾ˆå¤šäººçš„é—®é¢˜ï¼Œæ¯”å¦‚strong reference , soft reference , weak referenceæ€ä¹ˆäº’è½¬ï¼Œå¦‚æœä¸€ä¸ªobj å·²ç» = null,å°±obj = reference.get()å‘—ï¼Œå†æœ‰ï¼Œæ–‡ç« ä¸­ç”¨weak reference å®ç° canonicalizing mapæ”¹å–„å†…å­˜å­˜å‚¨æ•ˆç‡ï¼Œå‡å°å­˜å‚¨ç©ºé—´çš„ä¾‹å­ï¼ŒçœŸæ˜¯éå¸¸ç»å…¸å•Šã€‚ä¹Ÿå¸Œæœ›ä½œè€…ä»¥åç…§é¡¾ä¸€ä¸‹ä½å±‚æ¬¡è¯»è€…ï¼Œå†™å¥½æŠ€æœ¯é“ºå«å’Œåè¯å®šä¹‰ã€‚é¡ºä¾¿é—®ä¸€ä¸‹å¤§å®¶æ˜¯æ€ä¹ˆç•™è¨€çš„ï¼Œåœ¨æ‰‹æœºä¸Šæ‰“é‚£ä¹ˆå¤šå­—ï¼Œè¿˜æœ‰æ’ç‰ˆæ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Œæˆ‘æ˜¯å…ˆåœ¨ç”µè„‘ä¸Šæ‰“å¥½å­—å†COPYä¸Šæ¥çš„ï¼Œå¤§å®¶å’Œæˆ‘ä¸€æ ·å—ï¼Ÿ","like_count":36,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418248,"discussion_content":"éå¸¸æ„Ÿè°¢åé¦ˆï¼›\nå…³äºå¼•ç”¨è®¡æ•°ï¼Œä¹Ÿæœ‰ä¼˜åŠ¿ï¼Œæˆ‘è®°å¾—æŸä¸ªå›½å¤–ä¸€çº¿äº’è”ç½‘å…¬å¸è°ƒä¼˜pythonï¼Œå°±æ˜¯åªç”¨å¼•ç”¨è®¡æ•°ï¼Œå…³é—­gc","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527484647,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645866,"avatar":"","nickname":"frosro","note":"","ucode":"29BB9FC40800D5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7005,"discussion_content":"å¤§ç¥ï¼Œè‹±æ–‡ä¸è¡Œå¥½æƒ³å“­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567251336,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":12071,"user_name":"kyqå¶é‘«","can_delete":false,"product_type":"c1","uid":1129030,"ip_address":"","ucode":"0002BFD7569B06","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/46/9fd9bd26.jpg","comment_is_top":false,"comment_ctime":1528550066,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"147557438130","product_id":100006701,"comment_content":"çœ‹åˆ°ç¬¬å››è®²äº†ï¼Œæ¯ä¸€è®²éƒ½çœ‹åˆ°ç•™è¨€æœ‰æœ‹å‹è¯´çœ‹å®Œä¹‹åè¿˜æ˜¯æ‡µæ‡µçš„å¸Œæœ›ä½œè€…å¤šæä¾›å®é™…ä¾‹å­ï¼Œå› ä¸ºå¤§å®¶éƒ½æ˜¯ç†å·¥æ€ç»´ï¼Œä¸å–œè™šçš„ï¼Œå–œæ¬¢ç›´æ¥ä¸Šå¹²è´§ï¼Œå»ºè®®ä½œè€…å¯ä»¥ä»è¯»è€…èƒŒæ™¯æ–¹é¢æ”¹å–„æ–‡ç« å†…å®¹ï¼Œè½¯ç¡¬å…¼å¹¶ã€‚","like_count":34},{"had_liked":false,"id":8861,"user_name":"çˆ±åƒé¢çš„èå­ç‹","can_delete":false,"product_type":"c1","uid":1128773,"ip_address":"","ucode":"1A5CCC63BC509C","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/45/4ba3caec.jpg","comment_is_top":false,"comment_ctime":1526486191,"is_pvip":false,"replies":[{"id":"2699","content":"è°¢è°¢åé¦ˆï¼Œå›å¤´æŠŠå¿…è¦æ¦‚å¿µåŠ ä¸ªé“¾æ¥æˆ–è§£é‡Š","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526597684,"ip_address":"","comment_id":8861,"utype":1}],"discussion_count":1,"race_medal":0,"score":"117490603183","product_id":100006701,"comment_content":"å¸Œæœ›ä½œè€…ç…§é¡¾å±‚æ¬¡åŒ–çš„è¯»è€…ï¼Œè®²åè¯æ¦‚å¿µè¦æœ‰å…·ä½“è§£é‡Šï¼Œå¹¶èƒ½ä¸¾ä¾‹ä¸€äºŒå¸®åŠ©ç†è§£ï¼Œä¸ç„¶çœ‹å®Œä¾æ—§ä¼¼æ‡‚éæ‡‚ä¸€çŸ¥åŠè§£ã€‚","like_count":27,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417876,"discussion_content":"è°¢è°¢åé¦ˆï¼Œå›å¤´æŠŠå¿…è¦æ¦‚å¿µåŠ ä¸ªé“¾æ¥æˆ–è§£é‡Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526597684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8313,"user_name":"kugool","can_delete":false,"product_type":"c1","uid":1105981,"ip_address":"","ucode":"4F0E19ABE67E5A","user_header":"https://static001.geekbang.org/account/avatar/00/10/e0/3d/11897c07.jpg","comment_is_top":false,"comment_ctime":1526087357,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"104605302461","product_id":100006701,"comment_content":"æ„Ÿè§‰è‡ªå·±çš„åŸºç¡€è¿˜å¾ˆå·® é™¤äº†å¼ºå¼•ç”¨ å…¶å®ƒå‡ ä¸ªéƒ½ä¸æ˜¯å¾ˆæ˜ç™½","like_count":24,"discussions":[{"author":{"id":1559178,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/a5U0nqaicLy5ZJkESxBd5lMicNQcTTDK8vURyyWiabHxic7vS1VVk7HWTZg6ltyWJ3n9jb3Gq554ibfjsf7bv1v1Sdw/132","nickname":"åå¤§æ°å‡ºé’å¹´","note":"","ucode":"BAB4AA12604CF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":174120,"discussion_content":"æˆ‘ä¹Ÿæ˜¯ï¼Œä¸€è„¸æ‡µé€¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581869478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8655,"user_name":"ç¨‹åºçŒ¿çš„å°æµ£ç†Š","can_delete":false,"product_type":"c1","uid":1118125,"ip_address":"","ucode":"7D26B2F5C4379C","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/ad/19cc513d.jpg","comment_is_top":false,"comment_ctime":1526354934,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"74540798966","product_id":100006701,"comment_content":"æˆ‘è§‰å¾—å¯ä»¥åœ¨githubä¸Šæ‰˜ç®¡äº‹ä¾‹ä»£ç ï¼Œè¯´åˆ°å…³é”®ä»£ç çš„æ—¶å€™ï¼Œç›´æ¥é“¾æ¥è¿‡å»å°±å¥½ã€‚è¿™æ ·å°±èƒ½ä¸°å¯Œå†…å®¹äº†ã€‚","like_count":17},{"had_liked":false,"id":8455,"user_name":"ç”·äººï¼Œ7åˆ†ç†Ÿã€‚","can_delete":false,"product_type":"c1","uid":1129067,"ip_address":"","ucode":"D0A9F75235E646","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/6b/18329c89.jpg","comment_is_top":false,"comment_ctime":1526228715,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"70245705451","product_id":100006701,"comment_content":"ç•™è¨€åŒºï¼Œä¸ªä¸ªéƒ½æ˜¯äººæ‰","like_count":16},{"had_liked":false,"id":8720,"user_name":"Geek_5b11b8","can_delete":false,"product_type":"c1","uid":1131898,"ip_address":"","ucode":"B1BBA989A08D6B","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/7a/3f8241ef.jpg","comment_is_top":false,"comment_ctime":1526385596,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"65950895036","product_id":100006701,"comment_content":"çœ‹äº†ä¹‹åï¼Œæ”¶è·ä¸æ˜¯å¾ˆå¤§ï¼Œæœ‰æ²¡æœ‰å…·ä½“çš„åº”ç”¨æ¡ˆä¾‹æˆ–è€…å®é™…å¼€å‘ä¸­çš„åº”ç”¨åœºæ™¯","like_count":15},{"had_liked":false,"id":8484,"user_name":"é¢è¯•å®˜é—®","can_delete":false,"product_type":"c1","uid":1009375,"ip_address":"","ucode":"F9CE89589772F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/66/df/501ba989.jpg","comment_is_top":false,"comment_ctime":1526260915,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"61655803059","product_id":100006701,"comment_content":"Androidå¼€å‘é¢è¯•ä¸­è¿™é“é¢˜å¤§å®¶åŸºæœ¬éƒ½ä¼šï¼ŒJavaåç«¯é¢è¯•ä¸­é‡åˆ°å¥½äº›äººè¯´æ²¡å¬è¿‡çš„ï¼Œè¯´åˆ°åº•æœ‰éƒ¨åˆ†äººè¿˜æ˜¯JavaåŸºç¡€ä¸è¿‡å…³ï¼Œåªä¼šç”¨æ¡†æ¶ã€‚","like_count":15},{"had_liked":false,"id":8405,"user_name":"coderç‹","can_delete":false,"product_type":"c1","uid":1121990,"ip_address":"","ucode":"21465DC3850BCB","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/c6/6f817e6e.jpg","comment_is_top":false,"comment_ctime":1526183981,"is_pvip":false,"replies":[{"id":"2502","content":"å›¾ç‰‡ç›¸å½“æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥å›¾ç‰‡ç¼“å­˜æ˜¯å…¸å‹åœºæ™¯","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526270873,"ip_address":"","comment_id":8405,"utype":1}],"discussion_count":1,"race_medal":0,"score":"53065791533","product_id":100006701,"comment_content":"Android ä¸­çš„Glide å›¾ç‰‡åŠ è½½æ¡†æ¶çš„å†…å­˜ç¼“å­˜å°±ä½¿ç”¨åˆ°äº†å¼±å¼•ç”¨ç¼“å­˜æœºåˆ¶ğŸ˜","like_count":12,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417700,"discussion_content":"å›¾ç‰‡ç›¸å½“æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥å›¾ç‰‡ç¼“å­˜æ˜¯å…¸å‹åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526270873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91007,"user_name":"å¥½å¥½å­¦ä¹ ","can_delete":false,"product_type":"c1","uid":1106515,"ip_address":"","ucode":"A2FD39E882DF19","user_header":"https://static001.geekbang.org/account/avatar/00/10/e2/53/ff7501a2.jpg","comment_is_top":false,"comment_ctime":1556783785,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40211489449","product_id":100006701,"comment_content":"å‡ ç§å¼•ç”¨å¯ä»¥å½¢è±¡åŒ–ä¸ºä¸‹é¢çš„ä¾‹å­<br>å…¬å¸çš„ä¼˜åŒ–åˆ¶åº¦<br>å¼ºå¼•ç”¨ï¼Œä¼˜ç§€å‘˜å·¥ï¼Œå³ä¾¿å…¬å¸äºç©ºä¹Ÿä¸ä¼˜åŒ–<br>è½¯å¼•ç”¨ï¼Œä¸€èˆ¬å‘˜å·¥ï¼Œå…¬å¸äºç©ºæ—¶æ‰ä¼˜åŒ–<br>å¼±å¼•ç”¨ï¼Œé€šçŸ¥è¦ä¼˜åŒ–ï¼Œä½†è¿˜åœ¨å…¬å¸<br>è™šå¼•ç”¨ï¼Œå·²ç»ä¼˜åŒ–ï¼Œä¸åœ¨å…¬å¸äº†ï¼Œç•™ç€å¼•ç”¨ä¸ä¸ºä»–æ¥å¹²äº‹ï¼Œè€Œæ˜¯æœ€åç»™åˆ°è¿™ä¸ªäººå‘å·¥èµ„","like_count":8},{"had_liked":false,"id":8340,"user_name":"wangbo","can_delete":false,"product_type":"c1","uid":1125722,"ip_address":"","ucode":"3F0C9C320F0A1D","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/5a/d965c147.jpg","comment_is_top":false,"comment_ctime":1526100456,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40180806120","product_id":100006701,"comment_content":"é™¤äº†å¼ºå¼•ç”¨ï¼Œå…¶å®ƒçš„éƒ½ä¸æ‡‚","like_count":9},{"had_liked":false,"id":47862,"user_name":"windam","can_delete":false,"product_type":"c1","uid":1154114,"ip_address":"","ucode":"8ED1BEAFFDAD30","user_header":"https://static001.geekbang.org/account/avatar/00/11/9c/42/b1fa9a1a.jpg","comment_is_top":false,"comment_ctime":1544238369,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"31609009441","product_id":100006701,"comment_content":"Reference.reachabilityFence(this);<br><br>æ²¡æœ‰ç†è§£è¿™ä¸ªä¾‹å­æ˜¯æ€ä¹ˆä¿æŠ¤tryå—ä¸­çš„æ‰§è¡Œä»£ç çš„ã€‚<br><br>reachabilityFence å‘ç”Ÿåœ¨ finallyé‡Œï¼Œé‚£ä¹ˆï¼Œè¿™å¥è¯æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸æ˜¯tryå—é‡Œçš„ä»£ç å·²ç»æ‰§è¡Œå®Œæˆè¿‡äº†å—ï¼Ÿ<br><br>å¦‚æœæ‰§è¡Œtryå—ä¸­çš„ä»£ç æ—¶ï¼Œè¿˜æ²¡æœ‰èµ°åˆ°è¿™å¥ï¼Œjvm åˆæ€ä¹ˆçŸ¥é“ä¸èƒ½å¯¹è¿™ä¸ªå¯¹è±¡åš finalizeï¼Ÿ<br><br>","like_count":7,"discussions":[{"author":{"id":1446316,"avatar":"https://static001.geekbang.org/account/avatar/00/16/11/ac/9cc5e692.jpg","nickname":"Corner","note":"","ucode":"7862D593172536","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38295,"discussion_content":"Rå¤§çš„è§£é‡Šhttps://www.zhihu.com/question/51244545/answer/126055789","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571756953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1541386,"avatar":"https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg","nickname":"N_H","note":"","ucode":"109B67557AB3CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561459104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8382,"user_name":"å‡‰ç™½å¼€","can_delete":false,"product_type":"c1","uid":1119698,"ip_address":"","ucode":"B20E671BE97649","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/d2/be877cf2.jpg","comment_is_top":false,"comment_ctime":1526138579,"is_pvip":false,"replies":[{"id":"2507","content":"æ­£è§£ï¼Œå‰é¢å›å¤è¿‡ï¼ŒThteadLocalæ˜¯å’Œçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç»‘å®šçš„ï¼Œæ‰€ä»¥é‡åˆ°çº¿ç¨‹æ± å°±å¯èƒ½å‡ºç°è¿™ç§é—®é¢˜ï¼Œå› ä¸ºworkeré€šå¸¸ä¸€ç›´æ´»ç€","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526272948,"ip_address":"","comment_id":8382,"utype":1}],"discussion_count":2,"race_medal":0,"score":"31590909651","product_id":100006701,"comment_content":"threadlocalmapé‡Œçš„keyä¸ºå¼±å¼•ç”¨ ä½¿ç”¨è¿‡å åº”è¯¥remove  å¦åˆ™å®¹æ˜“å‡ºç°oom å› ä¸ºå¯èƒ½keyè¢«å›æ”¶äº† å®ƒçš„å€¼è¿˜åœ¨","like_count":7,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417690,"discussion_content":"æ­£è§£ï¼Œå‰é¢å›å¤è¿‡ï¼ŒThteadLocalæ˜¯å’Œçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç»‘å®šçš„ï¼Œæ‰€ä»¥é‡åˆ°çº¿ç¨‹æ± å°±å¯èƒ½å‡ºç°è¿™ç§é—®é¢˜ï¼Œå› ä¸ºworkeré€šå¸¸ä¸€ç›´æ´»ç€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526272948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103445,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d6/55/47e76936.jpg","nickname":"å¶æ˜“","note":"","ucode":"0983EA217ACF28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":181123,"discussion_content":"æ¨è€å¸ˆè¿™ä¸ªåœºæ™¯åº”è¯¥æœ‰é—®é¢˜å§ï¼Œåœ¨çº¿ç¨‹æ± ä¸­åº”è¯¥ä¸èƒ½ç›´æ¥ä½¿ç”¨ThreadLocal","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582339896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":48896,"user_name":"lasdaybg","can_delete":false,"product_type":"c1","uid":1053818,"ip_address":"","ucode":"C292CF7263ED81","user_header":"https://static001.geekbang.org/account/avatar/00/10/14/7a/7b8dd310.jpg","comment_is_top":false,"comment_ctime":1544576444,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27314380220","product_id":100006701,"comment_content":"æˆ‘æ˜¯æ¥çœ‹è¯„è®ºçš„","like_count":6},{"had_liked":false,"id":20586,"user_name":"Kris","can_delete":false,"product_type":"c1","uid":1206813,"ip_address":"","ucode":"0D01BE449E1EC8","user_header":"https://static001.geekbang.org/account/avatar/00/12/6a/1d/466e21a0.jpg","comment_is_top":false,"comment_ctime":1534568001,"is_pvip":false,"replies":[{"id":"7562","content":"çœ‹æ¥æ–‡ç« éœ€è¦æ”¹è¿›...","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1535038273,"ip_address":"","comment_id":20586,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27304371777","product_id":100006701,"comment_content":"æ˜¯æˆ‘åŸºç¡€å¤ªå·®äº†å—ï¼Ÿçœ‹ç€ä¼¼æ‡‚éæ‡‚æœ¦æœ¦èƒ§èƒ§çš„æ„Ÿè§‰","like_count":6,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422317,"discussion_content":"çœ‹æ¥æ–‡ç« éœ€è¦æ”¹è¿›...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535038273,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8318,"user_name":"æœ‰æ¸”@è”¡","can_delete":false,"product_type":"c1","uid":1099829,"ip_address":"","ucode":"4AB669229892C8","user_header":"","comment_is_top":false,"comment_ctime":1526088859,"is_pvip":false,"replies":[{"id":"2444","content":"å·²å›å¤ï¼Œå¦‚æœæœ‰å…¶ä»–æƒ…å†µå¯ä»¥ä»‹ç»ä¸€ä¸‹ç»†èŠ‚ï¼Œé©¬ä¸Šé£æœºå»ç¾å›½ï¼Œæœ‰æ®µæ—¶é—´ä¸èƒ½å›å¤ï¼ŒæŠ±æ­‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526101714,"ip_address":"","comment_id":8318,"utype":1}],"discussion_count":2,"race_medal":0,"score":"27295892635","product_id":100006701,"comment_content":"å¥½æ–‡ç« ï¼Œå°±éœ€è¦è¿™æ ·æ·±çš„ã€‚æœ‰ä¸ªç•™è¨€é—®ThreadLocalä¸­ï¼Œentryçš„keyä¸ºè½¯å¼•ç”¨ï¼Œvalueä¸ºå®é™…object.å½“keyè¢«å›æ”¶åï¼Œobjectä¼šäº§ç”Ÿå†…å­˜æ³„éœ²é—®é¢˜ã€‚åŒè¯·å…·ä½“è§£ç­”ã€‚è°¢è°¢","like_count":6,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417671,"discussion_content":"å·²å›å¤ï¼Œå¦‚æœæœ‰å…¶ä»–æƒ…å†µå¯ä»¥ä»‹ç»ä¸€ä¸‹ç»†èŠ‚ï¼Œé©¬ä¸Šé£æœºå»ç¾å›½ï¼Œæœ‰æ®µæ—¶é—´ä¸èƒ½å›å¤ï¼ŒæŠ±æ­‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526101714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1635513,"avatar":"https://static001.geekbang.org/account/avatar/00/18/f4/b9/66f78e40.jpg","nickname":"æ¨å†›","note":"","ucode":"1BB7B6DCD42A43","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5461,"discussion_content":"ä¸ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ï¼Œvalueæ­£å¸¸æƒ…å†µä¸‹ä¼šè¢«å›æ”¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566286100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8315,"user_name":"é¸ æ‘©æ™º","can_delete":false,"product_type":"c1","uid":1106201,"ip_address":"","ucode":"853E584FC4CD64","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/19/c756aaed.jpg","comment_is_top":false,"comment_ctime":1526087599,"is_pvip":true,"replies":[{"id":"2442","content":"æœªå¿…æ˜¯ç›´æ¥å†™ï¼Œç±»ä¼¼åŸºç¡€æ¶æ„å¤„ç†mysql oomå°±ä¼šç”¨åˆ°äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526100985,"ip_address":"","comment_id":8315,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27295891375","product_id":100006701,"comment_content":"è¿™ä¸ªç¡®å®æ˜¯æ—¥å¸¸å¼€å‘æ‰€æ¥è§¦ä¸åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œæ‰€ä»¥çœ‹èµ·æ¥æŒºè´¹åŠ›çš„","like_count":6,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417668,"discussion_content":"æœªå¿…æ˜¯ç›´æ¥å†™ï¼Œç±»ä¼¼åŸºç¡€æ¶æ„å¤„ç†mysql oomå°±ä¼šç”¨åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526100985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8314,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1526087515,"is_pvip":false,"replies":[{"id":"2443","content":"1ï¼Œè¢«ç¼“å­˜çš„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶æ˜¯æœ‰å¼ºå¼•ç”¨çš„<br>2ï¼Œè¿™ç§é€šå¸¸æ˜¯ThreadLocalè¢«workerçº¿ç¨‹éŸ³ä¹äº†ï¼Œworkerä¸ä¼šåœçš„<br>3ï¼ŒæŒ‰ç…§Javaè¯­è¨€è§„èŒƒå‘ç”Ÿå›æ”¶æ˜¯åˆè§„çš„ï¼Œæ‰€ä»¥æç«¯æƒ…å†µä¼šå‡ºç°fieldä¸å¯ç”¨æƒ…å†µ","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526101431,"ip_address":"","comment_id":8314,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27295891291","product_id":100006701,"comment_content":"1. ä¸€ç›´ä¸å¤ªç†è§£å¼±å¼•ç”¨ã€‚æ–‡ä¸­çš„â€œæ¯”å¦‚â€åœ¨å…¶ä»–å¥½å¤šåœ°æ–¹ä¹Ÿè¿™ä¹ˆè¯´â€”â€”â€œå¦‚æœè¯•å›¾è·å–å¯¹è±¡æ—¶...å¦åˆ™é‡æ–°å®ä¾‹åŒ–â€ï¼Œä½†ä¹ æƒ¯å¹¶å‘ç¼–ç¨‹çš„äººä¼šè§‰å¾—ï¼Œå‡å¦‚åˆšå®ä¾‹åŒ–ä¹‹åï¼Œåˆæ°å¥½è¢«å›æ”¶äº†å‘¢ï¼Ÿ<br>2.åæ¥çœ‹äº†ThreadLocalMapçš„Entryä»£ç ï¼Œæˆ‘ä¼šè§‰å¾—â€œå¼±å¼•ç”¨ä¹Ÿè®¸ä¸ºäº†ä¸€äº›å·¥å…·ç±»åœ¨è®¾è®¡æ—¶åˆè¦è€ƒè™‘æ˜“ç”¨æ€§ï¼Œåˆè¦å°½é‡é˜²æ­¢å¼€å‘è€…ç¼–ç¨‹ä¸å½“é€ æˆå†…å­˜æ³„æ¼â€ï¼Œæ¯”å¦‚Entryå¼±å¼•ç”¨äº†ThreadLocal&lt;?&gt;ï¼Œå°±ä¸ä¼šç”±äºEntryæœ¬èº«ä¸€ç›´å­˜åœ¨ä½¿å¾—å¯¹åº”çš„ThreadLocal&lt;?&gt;å®ä¾‹ä¸€ç›´æ— æ³•å›æ”¶ï¼Ÿ<br>3. new Resource().action()é‚£é‡Œæˆ‘ä»¥å‰ä¸€ç›´ä»¥ä¸ºï¼Œå¯¹è±¡çš„æ–¹æ³•åœ¨è¿è¡ŒæœŸé—´ä¸€å®šä¼šæŒæœ‰thiså¼•ç”¨ï¼Œé—´æ¥ä½¿å¾—å¯¹è±¡çš„fieldå¯è¾¾ä¸ä¼šè¢«å›æ”¶ã€‚ç°åœ¨çœ‹æ¥æ˜¯é”™çš„ï¼Ÿ<br><br>è¯·è€å¸ˆè§£æƒ‘å’Œçº é”™ä¸€ä¸‹ä¸‡åˆ†æ„Ÿè°¢","like_count":6,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417667,"discussion_content":"1ï¼Œè¢«ç¼“å­˜çš„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶æ˜¯æœ‰å¼ºå¼•ç”¨çš„\n2ï¼Œè¿™ç§é€šå¸¸æ˜¯ThreadLocalè¢«workerçº¿ç¨‹éŸ³ä¹äº†ï¼Œworkerä¸ä¼šåœçš„\n3ï¼ŒæŒ‰ç…§Javaè¯­è¨€è§„èŒƒå‘ç”Ÿå›æ”¶æ˜¯åˆè§„çš„ï¼Œæ‰€ä»¥æç«¯æƒ…å†µä¼šå‡ºç°fieldä¸å¯ç”¨æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526101431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82980,"user_name":"ä¹¦ç”Ÿä¾æ—§","can_delete":false,"product_type":"c1","uid":1069827,"ip_address":"","ucode":"4B2181160AD303","user_header":"https://static001.geekbang.org/account/avatar/00/10/53/03/24a892b7.jpg","comment_is_top":false,"comment_ctime":1554364732,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"23029201212","product_id":100006701,"comment_content":"å›å¤ Miaozheï¼š<br><br>å¸¦æœ‰éç©ºçš„ finalize() æ–¹æ³•çš„ç±»ä¼šè¢« JVM ç‰¹æ®Šå¤„ç†ï¼šå½“ GC å‘ç°è¿™æ ·çš„ç±»çš„ä¸€ä¸ªå®ä¾‹å·²ç»ä¸å†è¢«ä»»ä½•æ´»çš„å¼ºå¼•ç”¨æ‰€å¼•ç”¨æ—¶ï¼Œå°±ä¼šæŠŠå®ƒæ”¾å…¥ finalizer queueï¼Œæ’é˜Ÿè°ƒç”¨å…¶ finalize() æ–¹æ³•ã€‚è€Œå½“è¿™æ ·çš„ä¸€ä¸ªå®ä¾‹çš„ fianlize() æ–¹æ³•è¢«è°ƒç”¨ï¼ˆå¹¶ä¸”è¯¥å®ä¾‹æ²¡æœ‰è¢«å¤æ´»ï¼‰ä¹‹åï¼Œä¸‹ä¸€æ¬¡ GC å°±å¯ä»¥æŠŠå®ƒçœ‹ä½œæ™®é€šå¯¹è±¡æ¥æ¸…ç†æ‰äº†ã€‚<br><br>æ‰€ä»¥ä¸€ä¸ªå¸¦ finalize() æ–¹æ³•çš„ç±»çš„å®ä¾‹ï¼Œä»å·²ç»å¤±å»æ‰€æœ‰å¼ºå¼•ç”¨åˆ°çœŸæ­£è¢«GCå›æ”¶ï¼Œé€šå¸¸è¦ç»å†ä¸¤æ¬¡GCã€‚<br><br>æ‰€ä»¥ï¼Œæƒ³è®©è§†çº¿ finalize çš„è™šå¼•ç”¨ enque éœ€è¦ä¸‰è¡Œä»£ç ï¼š<br><br>System.gc();  &#47;&#47; å°†è™šå¼•ç”¨åŠ å…¥ finalizer queue<br>System.runFinalization();  &#47;&#47; è¿«ä½¿è™šåº”ç”¨çš„ finalize æ‰§è¡Œ<br>System.gc();  &#47;&#47; GC æ¸…é™¤è™šå¼•ç”¨ï¼Œenque<br>","like_count":5,"discussions":[{"author":{"id":1144504,"avatar":"https://static001.geekbang.org/account/avatar/00/11/76/b8/e4cd7997.jpg","nickname":"KAGEMUSHA","note":"","ucode":"DFC05BE62A9C10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":285927,"discussion_content":"æ‰¯æ·¡ï¼Œä¸€ä¸ªSystem.gc(); å°±å¤Ÿäº†ã€‚è¿™é‡Œé¢æœ‰éç©ºfianlizeæ–¹æ³•ä¹ˆï¼Ÿæœ¨æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592990255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1330065,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/N0NACGUr8dNAbN6BdiagPHBaB0EnyDsI9zWpwJteqTY38apOEnTOA7JkBAQnzYKJBgxu3Q8YMUILwLAB6camn4w/132","nickname":"Swing","note":"","ucode":"55FCA9ECEFBBEB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":215145,"discussion_content":"æœ€åçš„ä¸‰è¡Œä»£ç  è§£é‡Šæœ‰é—®é¢˜å§ã€‚ã€‚finalizeä¹‹åï¼Œæ‰ä¼šå°† è™šå¼•ç”¨queueåˆ°è‡ªå·±çš„refQueueå§ã€‚ã€‚åˆ°åº•å•¥æ—¶å€™æ£€æµ‹ refQueue.remove() å…¶ä½¿ç”¨åœºæ™¯ æ‰æ˜¯å…³é”®å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585290828,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8852,"user_name":"å°æƒ…ç»ª","can_delete":false,"product_type":"c1","uid":1020311,"ip_address":"","ucode":"92D8081DB8DB45","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/97/3762ca10.jpg","comment_is_top":false,"comment_ctime":1526482833,"is_pvip":false,"replies":[{"id":"2639","content":"å¥½çš„ï¼Œåé¢æ–‡ç« å¹³è¡¡ä¸‹ï¼Œè´´å¤šäº†ä»£ç ä¹Ÿæœ‰äººè¯´å‡‘å­—æ•°...","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526517143,"ip_address":"","comment_id":8852,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23001319313","product_id":100006701,"comment_content":"å¤šè°¢æ¨è€å¸ˆï¼Œå»ºè®®å¤šç»“åˆä»£ç è®²è§£ä¼šæ›´æ¸…æ™°ï¼Œæ¯•ç«Ÿä»£ç æ˜¯æœ€å¥½çš„è¯ é‡Šã€‚","like_count":5,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417868,"discussion_content":"å¥½çš„ï¼Œåé¢æ–‡ç« å¹³è¡¡ä¸‹ï¼Œè´´å¤šäº†ä»£ç ä¹Ÿæœ‰äººè¯´å‡‘å­—æ•°...","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526517143,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":24625,"user_name":"çˆ±å–å’–å•¡çš„å°é”é”","can_delete":false,"product_type":"c1","uid":1227884,"ip_address":"","ucode":"2F7595ECC51DC8","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/6c/2a0e7f61.jpg","comment_is_top":false,"comment_ctime":1537174394,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18717043578","product_id":100006701,"comment_content":"çœ‹äº†ä¸‰å››éï¼Œåœ¨å»ç™¾åº¦äº†ä¸€ä¸‹å…¶ä»–åšå®¢ï¼Œå‹‰å¼ºå¤§æ¦‚èƒ½æ‡‚ä¸€äº›ï¼Œè¿˜æ˜¯å¸Œæœ›æœ‰å®é™…åœºåˆç»“åˆæˆ–è€…ç®€å•ä½†çš„ä¾‹å­ï¼ŒåŸºç¡€ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œæœ‰å®é™…åœºæ™¯demoä»£ç å¯èƒ½çœ‹ç€æ›´æ‡‚ä¸€äº›ã€‚","like_count":4},{"had_liked":false,"id":8436,"user_name":"gayguygogogo","can_delete":false,"product_type":"c1","uid":1116813,"ip_address":"","ucode":"4D2C6D9D1BA39F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0a/8d/f30e204f.jpg","comment_is_top":false,"comment_ctime":1526217000,"is_pvip":false,"replies":[{"id":"2508","content":"å¥½çš„ï¼Œè°¢è°¢åé¦ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526273001,"ip_address":"","comment_id":8436,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18706086184","product_id":100006701,"comment_content":"è®²äº›èƒ½å¤¯å®åŸºç¡€åŒæ—¶åœ¨å¼€å‘ä¸­éœ€è¦ç”¨åˆ°çš„","like_count":4,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417718,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢åé¦ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526273001,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8410,"user_name":"Douglas","can_delete":false,"product_type":"c1","uid":1073027,"ip_address":"","ucode":"CFDE3D76B9DAE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/83/bb728e53.jpg","comment_is_top":false,"comment_ctime":1526188995,"is_pvip":false,"replies":[{"id":"2503","content":"è°¢è°¢ï¼Œæˆ‘å°½é‡å…¼é¡¾ï¼Œæœ‰ä¸è¶³åé¢ä¼šè¡¥å……","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526270943,"ip_address":"","comment_id":8410,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18706058179","product_id":100006701,"comment_content":"çœ‹å¾—è¿˜æ˜¯æ¯”è¾ƒè’™ï¼Œå¸Œæœ›é…åˆä¸€äº›ä¾‹å­ä¸¾ä¾‹è¯´æ˜","like_count":4,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417702,"discussion_content":"è°¢è°¢ï¼Œæˆ‘å°½é‡å…¼é¡¾ï¼Œæœ‰ä¸è¶³åé¢ä¼šè¡¥å……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526270943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8308,"user_name":"å‘µå‘µ","can_delete":false,"product_type":"c1","uid":1052862,"ip_address":"","ucode":"986CC73CFBBC67","user_header":"","comment_is_top":false,"comment_ctime":1526084997,"is_pvip":false,"replies":[{"id":"2448","content":"å¯ä»¥ç®€åŒ–ä¸‹å‡ ä¸ªæ–¹é¢ï¼šå¯¹gcæ˜¯å¦å½±å“ï¼›ä»€ä¹ˆæ—¶å€™enqueueï¼›getè¿”å›ä»€ä¹ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526103069,"ip_address":"","comment_id":8308,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18705954181","product_id":100006701,"comment_content":"å¼±å¼•ç”¨ï¼Œå¹»å½±å¼•ç”¨è¿˜æ˜¯ç†è§£ä¸æ¸…æ¥š","like_count":4,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417664,"discussion_content":"å¯ä»¥ç®€åŒ–ä¸‹å‡ ä¸ªæ–¹é¢ï¼šå¯¹gcæ˜¯å¦å½±å“ï¼›ä»€ä¹ˆæ—¶å€™enqueueï¼›getè¿”å›ä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526103069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144334,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1571899801,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14456801689","product_id":100006701,"comment_content":"å¼ºå¼•ç”¨è¡¨ç¤ºæ²¡ä½ ä¸å¯<br>è½¯å¼•ç”¨è¡¨ç¤ºæœ‰ä½ æœ€å¥½<br>å¼±å¼•ç”¨è¡¨ç¤ºä½ å¯æœ‰å¯æ— <br>å¹»åƒå¼•ç”¨è¡¨ç¤ºä½ å°†æ­»ï¼Œè¿˜æ˜¯æŠŠèº«å¤–ä¹‹ç‰©åˆ†äº†å§ã€‚<br><br>","like_count":3},{"had_liked":false,"id":67882,"user_name":"Lh","can_delete":false,"product_type":"c1","uid":1102951,"ip_address":"","ucode":"19CA4286A49DB7","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/67/0eaa81a4.jpg","comment_is_top":false,"comment_ctime":1550308798,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14435210686","product_id":100006701,"comment_content":"åœ¨Javaè¯­è¨€ä¸­ï¼Œé™¤äº†åŸºæœ¬æ•°æ®ç±»å‹å¤–ï¼Œå…¶ä»–çš„éƒ½æ˜¯æŒ‡å‘å„ç±»å¯¹è±¡çš„å¯¹è±¡å¼•ç”¨ï¼›Javaä¸­æ ¹æ®å…¶ç”Ÿå‘½å‘¨æœŸçš„é•¿çŸ­ï¼Œå°†å¼•ç”¨åˆ†ä¸º4ç±»ã€‚<br><br>1 å¼ºå¼•ç”¨<br><br>ç‰¹ç‚¹ï¼šæˆ‘ä»¬å¹³å¸¸å…¸å‹ç¼–ç Object obj = new Object()ä¸­çš„objå°±æ˜¯å¼ºå¼•ç”¨ã€‚é€šè¿‡å…³é”®å­—newåˆ›å»ºçš„å¯¹è±¡æ‰€å…³è”çš„å¼•ç”¨å°±æ˜¯å¼ºå¼•ç”¨ã€‚ å½“JVMå†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJVMå®æ„¿æŠ›å‡ºOutOfMemoryErrorè¿è¡Œæ—¶é”™è¯¯ï¼ˆOOMï¼‰ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„â€œå­˜æ´»â€å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚å¯¹äºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¼•ç”¨å…³ç³»ï¼Œåªè¦è¶…è¿‡äº†å¼•ç”¨çš„ä½œç”¨åŸŸæˆ–è€…æ˜¾å¼åœ°å°†ç›¸åº”ï¼ˆå¼ºï¼‰å¼•ç”¨èµ‹å€¼ä¸º nullï¼Œå°±æ˜¯å¯ä»¥è¢«åƒåœ¾æ”¶é›†çš„äº†ï¼Œå…·ä½“å›æ”¶æ—¶æœºè¿˜æ˜¯è¦çœ‹åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚<br><br>2 è½¯å¼•ç”¨<br><br>ç‰¹ç‚¹ï¼šè½¯å¼•ç”¨é€šè¿‡SoftReferenceç±»å®ç°ã€‚ è½¯å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ¯”å¼ºå¼•ç”¨çŸ­ä¸€äº›ã€‚åªæœ‰å½“ JVM è®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œæ‰ä¼šå»è¯•å›¾å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼šå³JVM ä¼šç¡®ä¿åœ¨æŠ›å‡º OutOfMemoryError ä¹‹å‰ï¼Œæ¸…ç†è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚è½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªè½¯å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚åç»­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ReferenceQueueçš„poll()æ–¹æ³•æ¥æ£€æŸ¥æ˜¯å¦æœ‰å®ƒæ‰€å…³å¿ƒçš„å¯¹è±¡è¢«å›æ”¶ã€‚å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œå°†è¿”å›ä¸€ä¸ªnull,å¦åˆ™è¯¥æ–¹æ³•è¿”å›é˜Ÿåˆ—ä¸­å‰é¢çš„ä¸€ä¸ªReferenceå¯¹è±¡ã€‚<br><br>åº”ç”¨åœºæ™¯ï¼šè½¯å¼•ç”¨é€šå¸¸ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ã€‚å¦‚æœè¿˜æœ‰ç©ºé—²å†…å­˜ï¼Œå°±å¯ä»¥æš‚æ—¶ä¿ç•™ç¼“å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰ï¼Œè¿™æ ·å°±ä¿è¯äº†ä½¿ç”¨ç¼“å­˜çš„åŒæ—¶ï¼Œä¸ä¼šè€—å°½å†…å­˜ã€‚<br><br>3 å¼±å¼•ç”¨<br><br>å¼±å¼•ç”¨é€šè¿‡WeakReferenceç±»å®ç°ã€‚ å¼±å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ¯”è½¯å¼•ç”¨çŸ­ã€‚åœ¨åƒåœ¾å›æ”¶å™¨çº¿ç¨‹æ‰«æå®ƒæ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°äº†å…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸å¦ï¼Œéƒ½ä¼šå›æ”¶å®ƒçš„å†…å­˜ã€‚ç”±äºåƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ï¼Œå› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å›æ”¶å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚å¼±å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœå¼±å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªå¼±å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚<br><br>åº”ç”¨åœºæ™¯ï¼šå¼±åº”ç”¨åŒæ ·å¯ç”¨äºå†…å­˜æ•æ„Ÿçš„ç¼“å­˜ã€‚<br><br>4 è™šå¼•ç”¨<br><br>ç‰¹ç‚¹ï¼šè™šå¼•ç”¨ä¹Ÿå«å¹»è±¡å¼•ç”¨ï¼Œé€šè¿‡PhantomReferenceç±»æ¥å®ç°ã€‚æ— æ³•é€šè¿‡è™šå¼•ç”¨è®¿é—®å¯¹è±¡çš„ä»»ä½•å±æ€§æˆ–å‡½æ•°ã€‚å¹»è±¡å¼•ç”¨ä»…ä»…æ˜¯æä¾›äº†ä¸€ç§ç¡®ä¿å¯¹è±¡è¢« finalize ä»¥åï¼ŒåšæŸäº›äº‹æƒ…çš„æœºåˆ¶ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚è™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ— ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚<br>ReferenceQueue queue = new ReferenceQueue ();<br>PhantomReference pr = new PhantomReference (object, queue); <br>ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦å·²ç»åŠ å…¥äº†è™šå¼•ç”¨ï¼Œæ¥äº†è§£è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°†è¦è¢«åƒåœ¾å›æ”¶ã€‚å¦‚æœç¨‹åºå‘ç°æŸä¸ªè™šå¼•ç”¨å·²ç»è¢«åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å†…å­˜è¢«å›æ”¶ä¹‹å‰é‡‡å–ä¸€äº›ç¨‹åºè¡ŒåŠ¨ã€‚<br><br>åº”ç”¨åœºæ™¯ï¼šå¯ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ´»åŠ¨ï¼Œå½“ä¸€ä¸ªè™šå¼•ç”¨å…³è”çš„å¯¹è±¡è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ä¹‹å‰ä¼šæ”¶åˆ°ä¸€æ¡ç³»ç»Ÿé€šçŸ¥ã€‚","like_count":3,"discussions":[{"author":{"id":1436675,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ec/03/eeb4bdc9.jpg","nickname":"å»º","note":"","ucode":"4B5CBCB5610CC6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":158566,"discussion_content":"æ¯”ä½œè€…è®²çš„å¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580605412,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1541386,"avatar":"https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg","nickname":"N_H","note":"","ucode":"109B67557AB3CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344,"discussion_content":"æ„Ÿè§‰æ¯”ä½œè€…è®²å¾—æ¸…æ™°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1561459398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":31391,"user_name":"é»‘ç¾½","can_delete":false,"product_type":"c1","uid":1053338,"ip_address":"","ucode":"D68FD2B38A1D0E","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/9a/062f83c8.jpg","comment_is_top":false,"comment_ctime":1539170881,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14424072769","product_id":100006701,"comment_content":"è€å¸ˆè®²å¾—æœ‰ç‚¹æŠ½è±¡ï¼Œæœ€åå¯ä»¥ä¸¾ä¾‹è®²ä¸‹åœ¨å®é™…é¡¹ç›®ä¸­å‡ ç§å¼•ç”¨çš„åº”ç”¨ã€‚<br>è¯·é—®ï¼š<br>1. è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨åœ¨ä»€ä¹ˆæ—¶å€™åŠ å…¥å¼•ç”¨é˜Ÿåˆ—ï¼Ÿæ˜¯åœ¨finalizeæ–¹æ³•æ‰§è¡Œä¹‹å‰å—ï¼Ÿ<br>2. å¹»è±¡å¼•ç”¨åœ¨ä»€ä¹ˆæ—¶å€™åŠ å…¥å¼•ç”¨é˜Ÿåˆ—ï¼Ÿå¹»è±¡å¼•ç”¨æ˜¯ä¸æ˜¯åœ¨finalizeæ–¹æ³•æ‰§è¡Œå®Œåœ¨å¯¹è±¡è¢«å›æ”¶ä¹‹å‰åŠ å…¥é˜Ÿåˆ—ï¼Ÿ","like_count":3},{"had_liked":false,"id":8311,"user_name":"funnyx","can_delete":false,"product_type":"c1","uid":1115049,"ip_address":"","ucode":"A9B8E27919AE4D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoZqcVJzUjfu5noOW6OPAh6ibrBicibLmicibnVyVLHdf7GwAzf2th5s1oQ9pUbLpmq2mlVBauUZn8QUnw/132","comment_is_top":false,"comment_ctime":1526085879,"is_pvip":false,"replies":[{"id":"2445","content":"æˆ‘ç†è§£ï¼ŒFQç§»é™¤åï¼Œå¦‚æœæœ‰å¹»è±¡å¼•ç”¨ï¼Œå°±å¤„äºå¹»è±¡å¯è¾¾çŠ¶æ€ï¼Œèµ°å¯¹åº”é€»è¾‘ï¼Œç„¶åå°±å¯ä»¥é”€æ¯äº†ï¼›å¦‚æœæ²¡æœ‰å¹»è±¡å¼•ç”¨ï¼Œå°±ç›´æ¥å¤„äºä¸å¯è¾¾çŠ¶æ€ï¼Œå¯ä»¥é”€æ¯","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526101995,"ip_address":"","comment_id":8311,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14410987767","product_id":100006701,"comment_content":"æœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹å³°å“¥ï¼Œå°±æ˜¯å¯¹è±¡å›æ”¶çš„æ—¶æœºï¼Œå¦‚æœæœ€åè¿™ä¸ªå¯¹è±¡è¢«è®¤ä¸ºè¦å›æ”¶ï¼Œé‚£ä¹ˆä¼šè¢«æ·»åŠ åˆ°F-QUEUEçš„ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç”±ä¸€ä¸ªä¼˜å…ˆçº§æ¯”è¾ƒä½çš„çº¿ç¨‹ç¼“æ…¢æ‰§è¡Œï¼Œåœ¨JVMå¯¹è¯¥é˜Ÿåˆ—è¿›è¡Œæ ‡è®°ä¹‹åï¼Œå¦‚æœè¯¥å¯¹è±¡è¿˜æ²¡æœ‰å’Œå¼•ç”¨é“¾å»ºç«‹å…³è”ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡åº”è¯¥å°±è¢«å›æ”¶äº†ï¼Œä½†æ˜¯å¦‚æœè¢«è°ƒç”¨äº†finalize()æ–¹æ³•ï¼Œè¯¥å¯¹è±¡ä¹Ÿä¸ä¸€å®šä¼šè¢«å›æ”¶ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡ä»F-QUEUEè¢«ç§»é™¤ä¹‹åï¼Œåç»­çš„åƒåœ¾å›æ”¶è¯¥å¦‚ä½•è¿›è¡Œï¼Ÿå› ä¸ºä¸€ä¸ªfinalizeï¼ˆï¼‰æœ€å¤šåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚","like_count":3,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417666,"discussion_content":"æˆ‘ç†è§£ï¼ŒFQç§»é™¤åï¼Œå¦‚æœæœ‰å¹»è±¡å¼•ç”¨ï¼Œå°±å¤„äºå¹»è±¡å¯è¾¾çŠ¶æ€ï¼Œèµ°å¯¹åº”é€»è¾‘ï¼Œç„¶åå°±å¯ä»¥é”€æ¯äº†ï¼›å¦‚æœæ²¡æœ‰å¹»è±¡å¼•ç”¨ï¼Œå°±ç›´æ¥å¤„äºä¸å¯è¾¾çŠ¶æ€ï¼Œå¯ä»¥é”€æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526101995,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268787,"user_name":"acqierement","can_delete":false,"product_type":"c1","uid":1234980,"ip_address":"","ucode":"AC8DA74B9CB924","user_header":"https://static001.geekbang.org/account/avatar/00/12/d8/24/f48a38f4.jpg","comment_is_top":false,"comment_ctime":1608348577,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10198283169","product_id":100006701,"comment_content":"1:  å¼ºå¼•ç”¨ï¼šä»£ç ä¸­æ™®éå­˜åœ¨çš„å¼•ç”¨èµ‹å€¼ï¼Œæ¯”å¦‚ Object =new Object(); æ— è®ºä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦å¼ºå¼•ç”¨å…³ç³»è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å°±æ°¸è¿œä¸ä¼šå›æ”¶è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚<br>2ï¼šè½¯å¼•ç”¨ï¼šç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ï¼Œä½†éå¿…é¡»çš„å¯¹è±¡ã€‚åœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå‰ï¼Œä¼šè¢«å›æ”¶ã€‚<br>3ï¼šå¼±å¼•ç”¨ï¼šç”¨æ¥æè¿°éå¿…é¡»å¯¹è±¡ã€‚ä¸è®ºå†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œåƒåœ¾å›æ”¶æ—¶å¼±å¼•ç”¨å¯¹è±¡éƒ½ä¼šè¢«å›æ”¶ã€‚<br>4ï¼šè™šå¼•ç”¨ï¼šæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥è®¿é—®å¯¹è±¡å®ä¾‹ï¼Œå®Œå…¨ä¸ä¼šå¯¹å¯¹è±¡çš„ç”Ÿå­˜å‘¨æœŸé€ æˆå½±å“ã€‚å’Œå¼•ç”¨é˜Ÿåˆ—ç»“åˆä½¿ç”¨ï¼Œå¯ç”¨äºè¿½è¸ªåƒåœ¾æ”¶é›†ï¼Œåœ¨å¯¹è±¡è¢«æ¸…ç†æ—¶å‘å‡ºç³»ç»Ÿé€šçŸ¥ã€‚<br>","like_count":2},{"had_liked":false,"id":148355,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1572998243,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10162932835","product_id":100006701,"comment_content":"4 å¼ºå¼•ç”¨ï¼Œè½¯å¼•ç”¨ï¼Œå¼±å¼•ç”¨ï¼Œå¹»åƒå¼•ç”¨ å˜é‡é™¤äº†åŸå§‹çš„æ•°æ®ç±»å‹ï¼Œå…¶ä»–æ‰€æœ‰çš„éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼ŒæŒ‡å‘å„ç§ä¸åŒçš„å¯¹è±¡ ï¼Œä¸åŒçš„å¼•ç”¨ç±»å‹ï¼Œæç°çš„æ˜¯å¯¹è±¡ä¸åŒçš„å¯è¾¾æ€§çŠ¶æ€å’Œå¯¹åƒåœ¾æ”¶é›†çš„å½±å“ï¼Œ4.1 å¼ºå¼•ç”¨ æœ€å¸¸è§çš„æ™®é€šå¯¹è±¡å¼•ç”¨ï¼Œåªè¦æœ‰å¼ºå¼•ç”¨æŒ‡å‘è¿™ç§å¯¹è±¡ï¼Œåƒåœ¾æ”¶é›†å™¨ä¸ä¼šç¢°ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¼•ç”¨å…³ç³»ï¼Œè¶…è¿‡ä½œç”¨åŸŸæˆ–è€…æŒ‡å‘nullï¼Œåƒåœ¾æ”¶é›†å™¨å°±ä¼šè¿›è¡Œå›æ”¶ 4.2 è½¯å¼•ç”¨ æ˜¯ç›¸å¯¹å¼ºå¯¹è±¡å¼±åŒ–çš„å¼•ç”¨ï¼Œå¯ä»¥è®©å¯¹è±¡èµ¦å…ä¸€äº›åƒåœ¾æ”¶é›†ï¼Œæ˜¯JVMå‘ç°å†…å­˜ä¸å¤Ÿæ—¶ï¼Œä¼šæŠŠè½¯å¼•ç”¨çš„å¯¹è±¡å›æ”¶ï¼Œä¸€èˆ¬ç”¨äºå†…å­˜ç¼“å­˜ ï¼Œå¦‚æœæœ‰å†…å­˜ä¼šå…ˆä¸å›æ”¶ 4.3 å¼±å¼•ç”¨ ä¸èƒ½ä½¿å¯¹è±¡å…äºåƒåœ¾æ”¶é›†ï¼Œä»…ä»…æä¾›äº†ä¸€ç§è®¿é—®å¼±å¯¹è±¡çš„é€”å¾„ï¼Œå¦‚æœå¯¹è±¡åœ¨å°±ä½¿ç”¨ï¼Œä¸åœ¨å°±åˆ›å»ºã€‚ç¼“å­˜ä¹Ÿæ˜¯è¿™ç§ç±»å‹ 4.4 å¹»åƒå¼•ç”¨ ä¸èƒ½é€šè¿‡å®ƒè®¿é—®å¯¹è±¡ï¼Œä»…ä»…æ˜¯æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œåœ¨å¯¹è±¡åœ¨finalizeä¹‹åï¼ŒåšæŸäº›äº‹æƒ…çš„æœºåˆ¶ã€‚4.5 å¯¹è±¡çš„çŠ¶æ€åˆ†æ åˆ›å»ºå¯¹è±¡åˆ°å¯¹è±¡åˆå§‹åŒ–åˆ°å¼ºå¼•ç”¨çŠ¶æ€ï¼Œå¼ºå¼•ç”¨å³å¼ºå¯è¾¾ï¼Œæ¯”å¦‚åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåˆ›å»ºå¯¹è±¡çš„çº¿ç¨‹å¯¹å¯¹è±¡å°±æ˜¯å¼ºå¯è¾¾ï¼Œå¼ºå¼•ç”¨å¯ä»¥å’Œè½¯å¼•ç”¨å’Œå¼±å¼•ç”¨äº’è½¬ï¼Œé™¤äº†å¼±å¼•ç”¨ä¸èƒ½è½¬ä¸ºè½¯å¼•ç”¨ï¼Œè¿™ä¸‰ç§å¼•ç”¨éƒ½å¯ä»¥è¢«finalizeï¼Œå¹»åƒå¯è¾¾ï¼Œæ²¡æœ‰å¼ºå¯è¾¾ï¼Œè½¯å’Œå¼±å¯è¾¾ï¼Œå¹¶ä¸”finalizeè¿‡ï¼Œåªæœ‰å¹»åƒå¼•ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæœ€åä¸€ä¸ªçŠ¶æ€ unreachable ï¼Œæ„å‘³ç€å¯¹è±¡å¯ä»¥è¢«æ¸…ç†äº†ã€‚é™¤äº†å¹»åƒå¼•ç”¨ï¼Œå¼ºå¼•ç”¨ï¼Œè½¯ï¼Œå¼±å¼•ç”¨éƒ½å¯ä»¥é€šè¿‡getè·å–å¯¹è±¡ï¼Œå¼±å¼•ç”¨å°±å˜æˆäº†å¼ºå¼•ç”¨ï¼Œåƒåœ¾æ”¶é›†å™¨ä¹Ÿä¼šäºŒæ¬¡ç¡®è®¤ï¼Œçœ‹ä¸‹å¼±å¼•ç”¨å’Œè½¯å¼•ç”¨æ²¡æœ‰è½¬æˆå¼ºå¼•ç”¨ã€‚","like_count":2},{"had_liked":false,"id":90136,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1556424278,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10146358870","product_id":100006701,"comment_content":"ArrayBlockingQueue ä¸­çš„Itrç”¨åˆ°äº† è‹¥å¼•ç”¨<br><br>  class Itrs {<br><br>        &#47;**<br>         * Node in a linked list of weak iterator references.<br>         *&#47;<br>        private class Node extends WeakReference&lt;Itr&gt; {<br>            Node next;<br><br>            Node(Itr iterator, Node next) {<br>                super(iterator);<br>                this.next = next;<br>            }<br>        }<br>}<br><br>è¿˜æœ‰ ForkJoinTaskä¸­ä¹Ÿç”¨åˆ°äº†è‹¥å¼•ç”¨<br><br>    static final class ExceptionNode extends WeakReference&lt;ForkJoinTask&lt;?&gt;&gt; {<br>        final Throwable ex;<br>        ExceptionNode next;<br>        final long thrower;  &#47;&#47; use id not ref to avoid weak cycles<br>        final int hashCode;  &#47;&#47; store task hashCode before weak ref disappears<br>        ExceptionNode(ForkJoinTask&lt;?&gt; task, Throwable ex, ExceptionNode next) {<br>            super(task, exceptionTableRefQueue);<br>            this.ex = ex;<br>            this.next = next;<br>            this.thrower = Thread.currentThread().getId();<br>            this.hashCode = System.identityHashCode(task);<br>        }<br>    }<br><br>å¾ˆå¤šåœ°æ–¹éƒ½ç”¨åˆ°äº† Reference ä½†æ˜¯ç”¨æ¥åšä»€ä¹ˆäº†ï¼Œ  è¿˜éœ€è¦è‡ªå·±å†å¥½å¥½çœ‹çœ‹ï¼Œæ‰¾è¿™æ ·çš„ä¸“æ å¤šè¯»è¯»ã€‚ ","like_count":2},{"had_liked":false,"id":85754,"user_name":"neohope","can_delete":false,"product_type":"c1","uid":1043475,"ip_address":"","ucode":"C0268F6E7E2B6E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg","comment_is_top":false,"comment_ctime":1555223265,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10145157857","product_id":100006701,"comment_content":"Javaä¸­çš„å››ç§å¼•ç”¨çŠ¶æ€ï¼Œå’ŒC++ boostä¸­çš„æ™ºèƒ½æŒ‡é’ˆå…¶å®æŒºç›¸ä¼¼çš„ã€‚å½“ç„¶å¹¶éæ˜¯å®Œå…¨ä¸€è‡´å•¦ã€‚<br>boost::scoped_ptr<br>boost::shared_ptr<br>boost::weak_ptr<br>boost::intrusive_ptr<br>æ„Ÿè§‰å¾ˆå¤šæ—¶å€™è·¨è¯­è¨€æ¯”è¾ƒä¸€ä¸‹ï¼Œä¼šå¯¹å¤§å®¶æ›´æœ‰æé«˜ä¸€äº›å‘¢ã€‚","like_count":2},{"had_liked":false,"id":56094,"user_name":"cw","can_delete":false,"product_type":"c1","uid":1264296,"ip_address":"","ucode":"82A6B50462F9F9","user_header":"https://static001.geekbang.org/account/avatar/00/13/4a/a8/b7e36dd2.jpg","comment_is_top":false,"comment_ctime":1546392736,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10136327328","product_id":100006701,"comment_content":"åœ¨Javaè¯­è¨€ä¸­ï¼Œé™¤äº†åŸºæœ¬æ•°æ®ç±»å‹å¤–ï¼Œå…¶ä»–çš„éƒ½æ˜¯æŒ‡å‘å„ç±»å¯¹è±¡çš„å¯¹è±¡å¼•ç”¨ï¼›Javaä¸­æ ¹æ®å…¶ç”Ÿå‘½å‘¨æœŸçš„é•¿çŸ­ï¼Œå°†å¼•ç”¨åˆ†ä¸º4ç±»ã€‚<br><br>1 å¼ºå¼•ç”¨<br><br>ç‰¹ç‚¹ï¼šæˆ‘ä»¬å¹³å¸¸å…¸å‹ç¼–ç Object obj = new Object()ä¸­çš„objå°±æ˜¯å¼ºå¼•ç”¨ã€‚é€šè¿‡å…³é”®å­—newåˆ›å»ºçš„å¯¹è±¡æ‰€å…³è”çš„å¼•ç”¨å°±æ˜¯å¼ºå¼•ç”¨ã€‚ å½“JVMå†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJVMå®æ„¿æŠ›å‡ºOutOfMemoryErrorè¿è¡Œæ—¶é”™è¯¯ï¼ˆOOMï¼‰ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„â€œå­˜æ´»â€å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚å¯¹äºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¼•ç”¨å…³ç³»ï¼Œåªè¦è¶…è¿‡äº†å¼•ç”¨çš„ä½œç”¨åŸŸæˆ–è€…æ˜¾å¼åœ°å°†ç›¸åº”ï¼ˆå¼ºï¼‰å¼•ç”¨èµ‹å€¼ä¸º nullï¼Œå°±æ˜¯å¯ä»¥è¢«åƒåœ¾æ”¶é›†çš„äº†ï¼Œå…·ä½“å›æ”¶æ—¶æœºè¿˜æ˜¯è¦çœ‹åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚<br><br>2 è½¯å¼•ç”¨<br><br>ç‰¹ç‚¹ï¼šè½¯å¼•ç”¨é€šè¿‡SoftReferenceç±»å®ç°ã€‚ è½¯å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ¯”å¼ºå¼•ç”¨çŸ­ä¸€äº›ã€‚åªæœ‰å½“ JVM è®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œæ‰ä¼šå»è¯•å›¾å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼šå³JVM ä¼šç¡®ä¿åœ¨æŠ›å‡º OutOfMemoryError ä¹‹å‰ï¼Œæ¸…ç†è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚è½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªè½¯å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚åç»­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ReferenceQueueçš„poll()æ–¹æ³•æ¥æ£€æŸ¥æ˜¯å¦æœ‰å®ƒæ‰€å…³å¿ƒçš„å¯¹è±¡è¢«å›æ”¶ã€‚å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œå°†è¿”å›ä¸€ä¸ªnull,å¦åˆ™è¯¥æ–¹æ³•è¿”å›é˜Ÿåˆ—ä¸­å‰é¢çš„ä¸€ä¸ªReferenceå¯¹è±¡ã€‚<br><br>åº”ç”¨åœºæ™¯ï¼šè½¯å¼•ç”¨é€šå¸¸ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ã€‚å¦‚æœè¿˜æœ‰ç©ºé—²å†…å­˜ï¼Œå°±å¯ä»¥æš‚æ—¶ä¿ç•™ç¼“å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰ï¼Œè¿™æ ·å°±ä¿è¯äº†ä½¿ç”¨ç¼“å­˜çš„åŒæ—¶ï¼Œä¸ä¼šè€—å°½å†…å­˜ã€‚<br><br>3 å¼±å¼•ç”¨<br><br>å¼±å¼•ç”¨é€šè¿‡WeakReferenceç±»å®ç°ã€‚ å¼±å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ¯”è½¯å¼•ç”¨çŸ­ã€‚åœ¨åƒåœ¾å›æ”¶å™¨çº¿ç¨‹æ‰«æå®ƒæ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°äº†å…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸å¦ï¼Œéƒ½ä¼šå›æ”¶å®ƒçš„å†…å­˜ã€‚ç”±äºåƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ï¼Œå› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å›æ”¶å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚å¼±å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœå¼±å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªå¼±å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚<br><br>åº”ç”¨åœºæ™¯ï¼šå¼±åº”ç”¨åŒæ ·å¯ç”¨äºå†…å­˜æ•æ„Ÿçš„ç¼“å­˜ã€‚<br><br>4 è™šå¼•ç”¨<br><br>ç‰¹ç‚¹ï¼šè™šå¼•ç”¨ä¹Ÿå«å¹»è±¡å¼•ç”¨ï¼Œé€šè¿‡PhantomReferenceç±»æ¥å®ç°ã€‚æ— æ³•é€šè¿‡è™šå¼•ç”¨è®¿é—®å¯¹è±¡çš„ä»»ä½•å±æ€§æˆ–å‡½æ•°ã€‚å¹»è±¡å¼•ç”¨ä»…ä»…æ˜¯æä¾›äº†ä¸€ç§ç¡®ä¿å¯¹è±¡è¢« finalize ä»¥åï¼ŒåšæŸäº›äº‹æƒ…çš„æœºåˆ¶ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚è™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ— ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚<br>ReferenceQueue queue = new ReferenceQueue ();<br>PhantomReference pr = new PhantomReference (object, queue); <br>ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦å·²ç»åŠ å…¥äº†è™šå¼•ç”¨ï¼Œæ¥äº†è§£è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°†è¦è¢«åƒåœ¾å›æ”¶ã€‚å¦‚æœç¨‹åºå‘ç°æŸä¸ªè™šå¼•ç”¨å·²ç»è¢«åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å†…å­˜è¢«å›æ”¶ä¹‹å‰é‡‡å–ä¸€äº›ç¨‹åºè¡ŒåŠ¨ã€‚<br><br>åº”ç”¨åœºæ™¯ï¼šå¯ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ´»åŠ¨ï¼Œå½“ä¸€ä¸ªè™šå¼•ç”¨å…³è”çš„å¯¹è±¡è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ä¹‹å‰ä¼šæ”¶åˆ°ä¸€æ¡ç³»ç»Ÿé€šçŸ¥ã€‚","like_count":2},{"had_liked":false,"id":31685,"user_name":"éƒæ”€åˆšà¸ˆà¸¸à¹Šà¸š","can_delete":false,"product_type":"c1","uid":1206745,"ip_address":"","ucode":"8AE7A85093E51A","user_header":"https://static001.geekbang.org/account/avatar/00/12/69/d9/968df259.jpg","comment_is_top":false,"comment_ctime":1539264593,"is_pvip":false,"replies":[{"id":"11964","content":"ç†è§£è¿™ä¸ªæ›´å¤šæ˜¯åˆ©äºå½“å‡ºç°å¼•ç”¨å¤„ç†é—®é¢˜æ—¶è¯Šæ–­ï¼Œä¾‹å¦‚gcè¢«å½±å“ï¼Œèµ„æºæœªé‡Šæ”¾","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1539737169,"ip_address":"","comment_id":31685,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10129199185","product_id":100006701,"comment_content":"æ„Ÿè§‰ç†è®ºä¸Šçš„è¯éƒ½æ‡‚ã€‚ä½†æ˜¯å…·ä½“ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œæˆ–è€…è‡ªå·±åœ¨é¡¹ç›®ä¸Šå“ªäº›æƒ…å†µå¯ä»¥ç”¨ï¼Œè¿™éƒ½ä¸å¤ªæ¸…æ¥šï¼","like_count":2,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426465,"discussion_content":"ç†è§£è¿™ä¸ªæ›´å¤šæ˜¯åˆ©äºå½“å‡ºç°å¼•ç”¨å¤„ç†é—®é¢˜æ—¶è¯Šæ–­ï¼Œä¾‹å¦‚gcè¢«å½±å“ï¼Œèµ„æºæœªé‡Šæ”¾","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539737169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8510,"user_name":"Mr. Zhang","can_delete":false,"product_type":"c1","uid":1126169,"ip_address":"","ucode":"AB955F70FC8355","user_header":"https://static001.geekbang.org/account/avatar/00/11/2f/19/8de031a1.jpg","comment_is_top":false,"comment_ctime":1526282005,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10116216597","product_id":100006701,"comment_content":"è¿˜æ˜¯é…åˆä¾‹å­è®²è§£ä¼šæ¯”è¾ƒæ¸…æ¥š","like_count":2},{"had_liked":false,"id":8506,"user_name":"å­™æ™“æ˜","can_delete":false,"product_type":"c1","uid":1117094,"ip_address":"","ucode":"CAD28E4D5A3E76","user_header":"https://static001.geekbang.org/account/avatar/00/11/0b/a6/b234aa79.jpg","comment_is_top":false,"comment_ctime":1526276687,"is_pvip":false,"replies":[{"id":"2532","content":"æ•æˆ‘å­¤é™‹å¯¡é—»äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆç›´æ¥å…³ç³»","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526343909,"ip_address":"","comment_id":8506,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10116211279","product_id":100006701,"comment_content":"çœ‹å®Œè¿™ç¯‡æ–‡ç« ä¹‹åï¼Œå¯¹è¿™å››ç§å¼•ç”¨è¿˜æ˜¯ä¸€çŸ¥åŠè§£ã€‚ä¸çŸ¥é“å®ƒä»¬ä¸JVMä¸­heapçš„æ–°ç”Ÿä»£ï¼Œè€ç”Ÿä»£ï¼Œæ°¸ä»£æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417751,"discussion_content":"æ•æˆ‘å­¤é™‹å¯¡é—»äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆç›´æ¥å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526343909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118274,"user_name":"å´æ™“æ³¢å°¼å°¼","can_delete":false,"product_type":"c1","uid":1617844,"ip_address":"","ucode":"1C806CFC6ADC36","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/usX58SweWDFqjCmtkvPOWD3QUKZGlpNpibZvrTwiaOwPvcCLYjU2AST5GvicjFOdScUmuribQJiciaGkxj4FJzYVcVcA/132","comment_is_top":false,"comment_ctime":1564306997,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5859274293","product_id":100006701,"comment_content":" String string = new String(&quot;å¼ºå¼•ç”¨&quot;);<br> System.out.println(string);<br> WeakReference&lt;String&gt; stringWeakReference = new WeakReference&lt;&gt;(new String(&quot;234&quot;));<br> System.out.println(stringWeakReference.get());<br> string = stringWeakReference.get();<br> System.gc();<br> System.out.println(stringWeakReference.get());<br>å¼±å¼•ç”¨æŒ‡å‘å¼ºå¼•ç”¨æ˜¯è¿™ä¹ˆå®ç°çš„å—","like_count":1},{"had_liked":false,"id":81878,"user_name":"è¯·å«æˆ‘åä»”","can_delete":false,"product_type":"c1","uid":1465300,"ip_address":"","ucode":"307D39B12CEF61","user_header":"https://static001.geekbang.org/account/avatar/00/16/5b/d4/f4a2888a.jpg","comment_is_top":false,"comment_ctime":1554077655,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5849044951","product_id":100006701,"comment_content":"æµ‹è¯•äº†ä¸€ä¸‹ï¼Œé™å®šXmx100mï¼Œç„¶ååˆ›å»º1000ä¸ªå 1Må†…å­˜çš„æ•°ç»„ï¼Œå¼ºå¼•ç”¨æŠ¥OOMï¼Œè½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ä¸æŠ¥å†…å­˜æº¢å‡ºã€‚è½¯å¼•ç”¨æƒ…å†µä¸‹ï¼Œè¿›è¡Œfull gcï¼Œè€—æ—¶æ›´é•¿ã€‚<br><br>WeakHashMapåŸç†<br>Entryç»§æ‰¿äº†WeakReferenceï¼Œkeyè¢«å¼±å¼•ç”¨ï¼Œå¯ä»¥è¢«å›æ”¶ã€‚å¦‚æœkeyè¢«å›æ”¶ï¼Œåˆ™è¯¥Entryè¢«æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—ã€‚åœ¨å¯¹WeakHashMapè¿›è¡Œæ“ä½œæ—¶ï¼Œä¼šå…ˆæ¸…ç†å·²ç»æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—çš„Entryï¼Œvalueæ˜¯è¿™æ—¶å€™å»æ‰å¼ºå¼•ç”¨çš„ã€‚æœ‰ä¸€ä¸ªé—®é¢˜ï¼šä¼šä¸ä¼šå‡ºç°å¼±å¼•ç”¨å¯¹è±¡å·²ç»è¢«å›æ”¶ï¼Œä½†è¿˜æ²¡æœ‰è¿›å…¥åˆ°é˜Ÿåˆ—çš„æƒ…å†µï¼Ÿè¿™ç§æƒ…å†µå‡ºç°ï¼Œåº”è¯¥å¯¹åŠŸèƒ½æ²¡å½±å“ï¼Œå› ä¸ºæ­¤æ—¶WeakReferenceçš„getä¼šè¿”å›nullã€‚","like_count":1},{"had_liked":false,"id":35614,"user_name":"ç»´#","can_delete":false,"product_type":"c1","uid":1125848,"ip_address":"","ucode":"DC5FFFD2C1E895","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/d8/e06ec517.jpg","comment_is_top":false,"comment_ctime":1540710122,"is_pvip":true,"replies":[{"id":"16129","content":"è‡­åæ˜­è‘—çš„é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1543625428,"ip_address":"","comment_id":35614,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5835677418","product_id":100006701,"comment_content":"ä¸Šä¸ªæœˆThreadLocalåœ¨çº¿ç¨‹æ± ç¯å¢ƒä¸‹ï¼ŒOOMè¿‡ï¼Œè®°å¿†çŠ¹æ–°ã€‚","like_count":1,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427599,"discussion_content":"è‡­åæ˜­è‘—çš„é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543625428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":33367,"user_name":"å¥‡å¦™","can_delete":false,"product_type":"c1","uid":1254221,"ip_address":"","ucode":"DCB796520024ED","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/4d/24433399.jpg","comment_is_top":false,"comment_ctime":1539780210,"is_pvip":false,"replies":[{"id":"12319","content":"å‡ºä½œç”¨åŸŸå³å¯ï¼Œä¸€èˆ¬ä¸éœ€è¦æ˜ç¡®è®¾ç½®ä¸ºnull","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1540256454,"ip_address":"","comment_id":33367,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5834747506","product_id":100006701,"comment_content":"æ¨è€å¸ˆï¼Œè¯·é—®æ˜¯ä¸æ˜¯åœ¨è®¾ç½®å¯¹è±¡ä¸ºç©ºï¼Œä»¥åŠæ–¹æ³•å¼¹æ ˆï¼Œå¯¼è‡´æ–¹æ³•ä¸­å¯¹è±¡çš„ä½œç”¨åŸŸæ¶ˆå¤±ï¼Œæ‰èƒ½è¢«gcå…³æ³¨åˆ°ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426964,"discussion_content":"å‡ºä½œç”¨åŸŸå³å¯ï¼Œä¸€èˆ¬ä¸éœ€è¦æ˜ç¡®è®¾ç½®ä¸ºnull","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540256454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16474,"user_name":"needEndeavor.","can_delete":false,"product_type":"c1","uid":1114817,"ip_address":"","ucode":"2AEE0BB0F6471F","user_header":"https://static001.geekbang.org/account/avatar/00/11/02/c1/9fd29367.jpg","comment_is_top":false,"comment_ctime":1531969865,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5826937161","product_id":100006701,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œå½“è½¯å¼•ç”¨çš„æ„é€ å‡½æ•°ä¼ å…¥å¼•ç”¨é˜Ÿåˆ—çš„æ¡ä»¶ä¸‹ï¼Œåˆ°åº•æ˜¯åœ¨å¯¹è±¡è¢«å›æ”¶åï¼Œå¼•ç”¨åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Ÿè¿˜æ˜¯åœ¨å›æ”¶å‰è¯¥å¼•ç”¨åŠ å…¥é˜Ÿåˆ—ä¸­çš„ï¼Ÿ","like_count":1},{"had_liked":false,"id":15893,"user_name":"æ­£æ˜¯é‚£æœµç«ç‘°","can_delete":false,"product_type":"c1","uid":1048261,"ip_address":"","ucode":"73D630B654573F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fe/c5/3467cf94.jpg","comment_is_top":false,"comment_ctime":1531620928,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5826588224","product_id":100006701,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªç–‘é—®æƒ³é—®ä¸‹ï¼Œå¼±å¼•ç”¨ä¸€æ—¦è¢«å›æ”¶ï¼Œå°±ä¼šåŠ å…¥æ³¨å†Œå¼•ç”¨é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå¼•ç”¨é˜Ÿåˆ—ä¸ä¸€æ ·ä¼šå ç”¨å†…å­˜ï¼Œä¸ç­‰äºæ²¡æœ‰å›æ”¶ä¹ˆï¼Ÿ","like_count":1},{"had_liked":false,"id":9628,"user_name":"å²æœˆå¦‚æ­Œ","can_delete":false,"product_type":"c1","uid":1114542,"ip_address":"","ucode":"29FA49EEDBFF92","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/ae/f298ef27.jpg","comment_is_top":false,"comment_ctime":1526993365,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5821960661","product_id":100006701,"comment_content":"è½¯å¼•ç”¨åœ¨å†…å­˜ä¸è¶³æ—¶å›æ”¶ï¼Œè€Œå¼±å¼•ç”¨åœ¨æœ‰å†…å­˜å›æ”¶å‘ç”Ÿæ—¶å°±ä¼šè¢«å›æ”¶æ‰","like_count":1},{"had_liked":false,"id":9626,"user_name":"å²æœˆå¦‚æ­Œ","can_delete":false,"product_type":"c1","uid":1114542,"ip_address":"","ucode":"29FA49EEDBFF92","user_header":"https://static001.geekbang.org/account/avatar/00/11/01/ae/f298ef27.jpg","comment_is_top":false,"comment_ctime":1526993044,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5821960340","product_id":100006701,"comment_content":"è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰ï¼Œæ˜¯ä¸€ç§ç›¸å¯¹å¼ºå¼•ç”¨å¼±åŒ–ä¸€äº›çš„å¼•ç”¨ï¼Œå¯ä»¥è®©å¯¹è±¡è±å…ä¸€äº›åƒåœ¾æ”¶é›†ï¼Œåªæœ‰å½“ JVM è®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œæ‰ä¼šå»è¯•å›¾å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡","like_count":1},{"had_liked":false,"id":9592,"user_name":"å¼ å°æ¥","can_delete":false,"product_type":"c1","uid":1124295,"ip_address":"","ucode":"87E5B615E3823D","user_header":"https://static001.geekbang.org/account/avatar/00/11/27/c7/75b7631c.jpg","comment_is_top":false,"comment_ctime":1526973122,"is_pvip":false,"replies":[{"id":"2964","content":"å›¾ç‰‡","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1527035932,"ip_address":"","comment_id":9592,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5821940418","product_id":100006701,"comment_content":"å¯¹å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ï¼Œè€å¸ˆå¯ä»¥ä¸¾ä¸ªä¾‹å­å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418128,"discussion_content":"å›¾ç‰‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1527035932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9515,"user_name":"ç‰›è‚‰å‘³é²œæœæ©™","can_delete":false,"product_type":"c1","uid":1121522,"ip_address":"","ucode":"5640DBE28E83F6","user_header":"https://static001.geekbang.org/account/avatar/00/11/1c/f2/6548ab5e.jpg","comment_is_top":false,"comment_ctime":1526946152,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5821913448","product_id":100006701,"comment_content":"è¿™ä¸ªç³»åˆ—çš„å­¦ä¹ ä¹°çš„å¥½å€¼ï¼Œæ—¢èƒ½çœ‹åˆ°ä½œè€…å¯¹Javaæ·±å±‚æ¬¡çš„è®²è§£ï¼Œåˆèƒ½çœ‹èƒ½è¯„è®ºä¸“åŒºçš„å„ç§å¤§ç¥çš„ç†è§£ã€‚","like_count":1},{"had_liked":false,"id":8838,"user_name":"å¾®ç¬‘çš„å‘æ—¥è‘µ","can_delete":false,"product_type":"c1","uid":1099151,"ip_address":"","ucode":"90659BD4413DF1","user_header":"https://static001.geekbang.org/account/avatar/00/10/c5/8f/80443115.jpg","comment_is_top":false,"comment_ctime":1526476861,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5821444157","product_id":100006701,"comment_content":"å¹¶æ²¡æœ‰ ç¬¬ä¸€æ¬¡å¬è¯´è¿™ä¸ªä¸œè¥¿","like_count":1},{"had_liked":false,"id":8752,"user_name":"åˆ€å¥ç¬‘","can_delete":false,"product_type":"c1","uid":1037084,"ip_address":"","ucode":"4077841DA72DCB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d3/1c/7b106c98.jpg","comment_is_top":false,"comment_ctime":1526402850,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5821370146","product_id":100006701,"comment_content":"â€œè¿™å°±å¯ä»¥ç”¨æ¥æ„å»ºä¸€ç§æ²¡æœ‰ç‰¹å®šçº¦æŸçš„å…³ç³»ï¼Œæ¯”å¦‚ï¼Œç»´æŠ¤ä¸€ç§éå¼ºåˆ¶æ€§çš„æ˜ å°„å…³ç³»ï¼Œå¦‚æœè¯•å›¾è·å–æ—¶å¯¹è±¡è¿˜åœ¨ï¼Œå°±ä½¿ç”¨å®ƒï¼Œå¦åˆ™é‡ç°å®ä¾‹â€ï¼Œå¦åˆ™é‡ç°å®ä¾‹â€æ˜¯æŒ‡ï¼Ÿ","like_count":1},{"had_liked":false,"id":8498,"user_name":"jutsu","can_delete":false,"product_type":"c1","uid":1124574,"ip_address":"","ucode":"95CEDEF5D085CF","user_header":"https://static001.geekbang.org/account/avatar/00/11/28/de/54667f13.jpg","comment_is_top":false,"comment_ctime":1526268877,"is_pvip":true,"replies":[{"id":"2523","content":"åŠ æ²¹ğŸ’ª","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526276944,"ip_address":"","comment_id":8498,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5821236173","product_id":100006701,"comment_content":"æ„Ÿè§‰è‡ªå·±ç†è§£çš„æ…¢ï¼Œæ¯å¤©éƒ½ä¼šå¸æ”¶ä¸€ç‚¹è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œè°¢è°¢è€å¸ˆ","like_count":1,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417747,"discussion_content":"åŠ æ²¹ğŸ’ª","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526276944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8335,"user_name":"thinkers","can_delete":false,"product_type":"c1","uid":1031712,"ip_address":"","ucode":"81159393491E8D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/20/8f4e0810.jpg","comment_is_top":false,"comment_ctime":1526096900,"is_pvip":false,"replies":[{"id":"2441","content":"é™¤éå¯¹äºæ€§èƒ½å®Œå…¨ä¸æ•æ„Ÿï¼Œè¿™å°±æ˜¯å·®ä¸å¤šå’Œæè‡´çš„å·®åˆ«ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹nettyä¹‹ç±»åº•å±‚çš„ä¼˜åŒ–","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526100869,"ip_address":"","comment_id":8335,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5821064196","product_id":100006701,"comment_content":"é™¤äº†8ç§åŸºæœ¬æ•°æ®ç±»å‹(int,short,byte,long,double,float,boolean,char)ï¼Œå…¶ä»–éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼æ„Ÿè§‰è¿™ç§å¼•ç”¨çš„åˆ†ç±»æ²¡æœ‰ä»»ä½•å®é™…ä½œç”¨ï¼Œå¼€å‘ä¸­åŸºæœ¬å¯ä»¥å¿½ç•¥ç‚¹ï¼","like_count":1,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417677,"discussion_content":"é™¤éå¯¹äºæ€§èƒ½å®Œå…¨ä¸æ•æ„Ÿï¼Œè¿™å°±æ˜¯å·®ä¸å¤šå’Œæè‡´çš„å·®åˆ«ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹nettyä¹‹ç±»åº•å±‚çš„ä¼˜åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526100869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8323,"user_name":"George Gong","can_delete":false,"product_type":"c1","uid":1123724,"ip_address":"","ucode":"079FD5B8406948","user_header":"https://static001.geekbang.org/account/avatar/00/11/25/8c/1c9f98f2.jpg","comment_is_top":false,"comment_ctime":1526092593,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5821059889","product_id":100006701,"comment_content":"è¿™å‡ ä¸ªå¼•ç”¨è¿˜æ˜¯ä¸å¤ªæ‡‚å•Šï¼","like_count":1},{"had_liked":false,"id":352986,"user_name":"å¼€åˆ°è¼è˜¼","can_delete":false,"product_type":"c1","uid":2063945,"ip_address":"åŒ—äº¬","ucode":"EB5C016D0AA830","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7e/49/2efce374.jpg","comment_is_top":false,"comment_ctime":1659064649,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659064649","product_id":100006701,"comment_content":"1.å¼ºå¼•ç”¨æ˜¯é€šè¿‡newåˆ›å»ºçš„ï¼Œæˆ‘æƒ³çŸ¥é“æ€ä¹ˆä»å¼ºå¼•ç”¨å˜æˆè½¯å¼•ç”¨æˆ–è€…å¼±å¼•ç”¨ï¼Œä»ä»£ç å±‚é¢æ˜¯æ€ä¹ˆå˜åŒ–çš„ï¼Ÿ<br>2.æ—¢ç„¶finalizeä¸å¯é ï¼Œè™šå¼•ç”¨åªèƒ½é€šè¿‡finalizeè½¬å˜ï¼Œé‚£è™šå¼•ç”¨å­˜åœ¨æœ‰å…¶å¿…è¦æ€§å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":339482,"user_name":"ğŸŸğŸŸğŸŸ","can_delete":false,"product_type":"c1","uid":1607912,"ip_address":"","ucode":"FA780B0100906E","user_header":"https://static001.geekbang.org/account/avatar/00/18/88/e8/b9c40dfe.jpg","comment_is_top":false,"comment_ctime":1648126427,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648126427","product_id":100006701,"comment_content":"java.beans.BeanDescriptoræœ‰ç”¨åˆ°WeakReference","like_count":0},{"had_liked":false,"id":336831,"user_name":"ahao","can_delete":false,"product_type":"c1","uid":2898682,"ip_address":"","ucode":"BA63BE2FD58AAB","user_header":"https://static001.geekbang.org/account/avatar/00/2c/3a/fa/31f5319d.jpg","comment_is_top":false,"comment_ctime":1646387991,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646387991","product_id":100006701,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜é—®æ‚¨ä¸€ä¸‹ï¼šå¯¹è±¡è¢«GCåï¼Œéå¼ºå¼•ç”¨ä¼šè¢«JVMpushè¿›ReferenceQueueï¼Œé‚£è¯¥queueä¸­çš„å¯¹è±¡ä½•æ—¶è¢«æ¸…é™¤å‘¢ï¼Ÿè¿˜æ˜¯åªèƒ½äººä¸ºçš„removeï¼Ÿ","like_count":0},{"had_liked":false,"id":330556,"user_name":"ä¸å‘Šè¯‰ä½ ","can_delete":false,"product_type":"c1","uid":1140831,"ip_address":"","ucode":"983AE997A29B1A","user_header":"https://static001.geekbang.org/account/avatar/00/11/68/5f/2b4abbb6.jpg","comment_is_top":false,"comment_ctime":1642039959,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642039959","product_id":100006701,"comment_content":"ä¸ºä½•è¦è®¾è®¡è¿™ä¹ˆå¤šçš„å¼•ç”¨ç±»å‹ï¼Œåªä¿ç•™å¼ºå¼•ç”¨ä¸é¦™å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":302990,"user_name":"ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":1080238,"ip_address":"","ucode":"23C85117A16BEF","user_header":"https://static001.geekbang.org/account/avatar/00/10/7b/ae/66ae403d.jpg","comment_is_top":false,"comment_ctime":1626497269,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626497269","product_id":100006701,"comment_content":"è€å¸ˆï¼Œè®²çš„æ—¶å€™å¸Œæœ›å¤šä¸¾ä¾‹ï¼Œè¿è´¯äº›å“ˆï¼Œç°åœ¨çœ‹å®Œæ„Ÿè§‰è¿˜æ˜¯è¿·è¿·ç³Šç³Š","like_count":0},{"had_liked":false,"id":296325,"user_name":"AAA_å¶å­","can_delete":false,"product_type":"c1","uid":1325994,"ip_address":"","ucode":"1E93617D308EE0","user_header":"https://static001.geekbang.org/account/avatar/00/14/3b/aa/e8dfcd7e.jpg","comment_is_top":false,"comment_ctime":1622900136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622900136","product_id":100006701,"comment_content":"å¼ºå¼•ç”¨ï¼š æ™®é€šçš„new å¯¹è±¡<br>è½¯å¼•ç”¨ï¼šç¬¬ä¸‰æ–¹JVM æ¢æˆ caffeine å¯ä»¥åˆ›å»ºè½¯å¼•ç”¨æˆ–è€…å¼±å¼•ç”¨çš„keyå’Œvalue<br>å¼±å¼•ç”¨ï¼šjdk é‡Œé¢çš„ ThreadLocal <br>å¹»è±¡å¼•ç”¨ï¼šjdk nio é‡Œé¢çš„ DirectBuff é‡Œé¢çš„ å †å¤–å›æ”¶Cleaner å®ç°ã€‚","like_count":0},{"had_liked":false,"id":294529,"user_name":"å¹³å¸¸å¿ƒ","can_delete":false,"product_type":"c1","uid":1446513,"ip_address":"","ucode":"BF777548DDC920","user_header":"https://static001.geekbang.org/account/avatar/00/16/12/71/46b3ad0a.jpg","comment_is_top":false,"comment_ctime":1621991368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621991368","product_id":100006701,"comment_content":"æˆ‘è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œæ–‡ä¸­è¯´ã€‚   å¦‚æœæˆ‘ä»¬é”™è¯¯çš„ä¿æŒäº†å¼ºå¼•ç”¨ï¼ˆæ¯”å¦‚ï¼Œèµ‹å€¼ç»™äº† static å˜é‡ï¼‰ï¼Œé‚£ä¹ˆå¯¹è±¡å¯èƒ½å°±æ²¡æœ‰æœºä¼šå˜å›ç±»ä¼¼å¼±å¼•ç”¨çš„å¯è¾¾æ€§çŠ¶æ€äº†ï¼Œå°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚ é‚£æˆ‘å¯ä»¥ç†è§£ä¸ºèµ‹å€¼ç»™staticå˜é‡åå³ä½¿ä»–è¢«ä¸»åŠ¨ç½®ä¸ºnull ä¹Ÿä¸ä¼šå˜ä¸ºå¼±å¼•ç”¨å—","like_count":0},{"had_liked":false,"id":279494,"user_name":"å­è±ªsirius","can_delete":false,"product_type":"c1","uid":1117023,"ip_address":"","ucode":"E8D08D2D33E785","user_header":"https://static001.geekbang.org/account/avatar/00/11/0b/5f/2cc4060c.jpg","comment_is_top":false,"comment_ctime":1613805562,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1613805562","product_id":100006701,"comment_content":"Reachability Fenceè¿™ä¸ªä¾‹å­ä¸æ˜¯å¾ˆæ˜ç™½ã€‚â€œæœ‰äº›æ—¶å€™ï¼Œå¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰å¼ºå¼•ç”¨ï¼Œä½†æ˜¯ä¹Ÿè®¸å®ƒçš„éƒ¨åˆ†å±æ€§è¿˜åœ¨è¢«ä½¿ç”¨â€ã€‚Resouceåˆ›å»ºä½†æ˜¯æ²¡æœ‰ä»˜ç»™ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´åƒåœ¾å›æ”¶ã€‚ä½†æ˜¯å®ƒçš„éƒ¨åˆ†å±æ€§è¿˜åœ¨è¢«ä½¿ç”¨ã€‚æ˜¯æŒ‡å“ªä¸ªå±æ€§ï¼Ÿå¦‚æœæ²¡æœ‰å¼ºå¼•ç”¨æ‰§è¡ŒResourceçš„å¯¹è±¡ï¼Œå®ƒçš„å±æ€§è¦é€šè¿‡ä»€ä¹ˆæ–¹å¼ä½¿ç”¨å‘¢ï¼Ÿæ„Ÿè§‰çŸ›ç›¾","like_count":0},{"had_liked":false,"id":263497,"user_name":"escray","can_delete":false,"product_type":"c1","uid":1020525,"ip_address":"","ucode":"1F4204930E47C4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/6d/becd841a.jpg","comment_is_top":false,"comment_ctime":1606143165,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"1606143165","product_id":100006701,"comment_content":"å¼ºå¼•ç”¨ Strong Referenceï¼Œå¸¸è§æ™®é€šå¯¹è±¡å¼•ç”¨ï¼Œè¡¨æ˜å¯¹è±¡è¿˜â€œæ´»ç€â€ï¼Œä¸ä¼šè¢«åƒåœ¾æ”¶é›†ã€‚å¯¹åº” å¼ºå¯è¾¾ Strongly Reachable<br><br>è½¯å¼•ç”¨ SoftReferenceï¼Œå½“ JVM è®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œä¼šè¯•å›¾å›æ”¶ï¼Œé€‚åˆç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ã€‚å¯¹åº”è½¯å¯è¾¾ Softly Reachable<br><br>å¼±å¼•ç”¨ WeakReferenceï¼Œä¸èƒ½è±å…åƒåœ¾å›æ”¶ï¼Œç»´æŠ¤ä¸€ç§éå¼ºåˆ¶æ€§çš„æ˜ å°„å…³ç³»ï¼Œå¦‚æœè¯•å›¾è·å–æ—¶å¯¹è±¡è¿˜åœ¨ï¼Œå°±ä½¿ç”¨å®ƒï¼Œå¦åˆ™å°±é‡æ–°å®ä¾‹åŒ–ã€‚å¯¹åº”å¼±å¯è¾¾ Weakly Reachable<br><br>å¹»è±¡å¼•ç”¨ã€è™šå¼•ç”¨ Phantom Referenceï¼Œæä¾›ä¸€ç§ç¡®ä¿å¯¹è±¡åœ¨ finalize ä»¥ååšäº‹æƒ…çš„æœºåˆ¶ï¼Œæ¯”å¦‚ Post-Mortem æ¸…ç†ã€‚å¯¹åº”å¹»è±¡å¯è¾¾ Phantom Reachable","like_count":0},{"had_liked":false,"id":262413,"user_name":"AAA_å¶å­","can_delete":false,"product_type":"c1","uid":1325994,"ip_address":"","ucode":"1E93617D308EE0","user_header":"https://static001.geekbang.org/account/avatar/00/14/3b/aa/e8dfcd7e.jpg","comment_is_top":false,"comment_ctime":1605710395,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605710395","product_id":100006701,"comment_content":"NIOé‡Œé¢ ç”¨å¹»è±¡å¼•ç”¨ å›æ”¶å †å¤–å†…å­˜ã€‚ThreadLocal ä½¿ç”¨äº†å¼±å¼•ç”¨","like_count":0},{"had_liked":false,"id":260144,"user_name":"é£","can_delete":false,"product_type":"c1","uid":1077538,"ip_address":"","ucode":"104638BF19B048","user_header":"https://static001.geekbang.org/account/avatar/00/10/71/22/b8c596b6.jpg","comment_is_top":false,"comment_ctime":1604930780,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604930780","product_id":100006701,"comment_content":"è¯´å®è¯ä»æ¥æ²¡å…³å¿ƒè¿‡å„ç§å¼•ç”¨ï¼Œå¦‚æœä¸æ˜¯çœ‹åˆ°è€å¸ˆçš„ä¸“æ ï¼Œæˆ‘éƒ½ä¸çŸ¥é“è¿˜æœ‰å¹»è±¡å¼•ç”¨","like_count":0},{"had_liked":false,"id":253089,"user_name":"é™ˆè€å¹º","can_delete":false,"product_type":"c1","uid":1383995,"ip_address":"","ucode":"6811AD3B0DECA0","user_header":"https://static001.geekbang.org/account/avatar/00/15/1e/3b/869684f0.jpg","comment_is_top":false,"comment_ctime":1602592966,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602592966","product_id":100006701,"comment_content":"çœ‹ç•™è¨€åŒºå¾ˆæœ‰æ„æ€ï¼Œæ¯èŠ‚çœ‹å®Œä¹‹åéƒ½å¾ˆæœŸå¾…ç•™è¨€åŒºğŸ˜","like_count":0},{"had_liked":false,"id":233595,"user_name":"looper","can_delete":false,"product_type":"c1","uid":1238396,"ip_address":"","ucode":"DA4BCE83836C04","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/7c/2a5a418b.jpg","comment_is_top":false,"comment_ctime":1594363854,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594363854","product_id":100006701,"comment_content":"åšå¥½äº†reachabilityFenceä¾‹å­çš„ç¬”è®°ï¼Œå¸¸ç”¨çš„å¼±å¼•ç”¨æœ‰å…³çš„å¯¹è±¡æ˜¯ThreadLocal","like_count":0},{"had_liked":false,"id":231132,"user_name":"å‚…å®‡æ–°","can_delete":false,"product_type":"c1","uid":1608817,"ip_address":"","ucode":"262496F0E29E84","user_header":"https://static001.geekbang.org/account/avatar/00/18/8c/71/0d1a0ae9.jpg","comment_is_top":false,"comment_ctime":1593590524,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593590524","product_id":100006701,"comment_content":"å…¶å®å¾ˆå¤šäººåº”è¯¥æ˜¯äº†è§£è¿™å››ç§å¼•ç”¨ï¼Œä½†æ˜¯åœ¨å®é™…ä¸­ ä»€ä¹ˆåœºæ™¯ä½¿ç”¨è¿˜æ˜¯è¿·è¿·ç³Šç³Šçš„ è€å¸ˆå¦‚æœèƒ½ä»å®é™…ä¸­ä¸¾ä¾‹é‚£å°±å‰å®³äº†","like_count":0},{"had_liked":false,"id":214837,"user_name":"äº‘è®¡ç®—å°èœé¸Ÿ","can_delete":false,"product_type":"c1","uid":1146734,"ip_address":"","ucode":"D32CA551ACCF56","user_header":"https://static001.geekbang.org/account/avatar/00/11/7f/6e/863e4b2a.jpg","comment_is_top":false,"comment_ctime":1588829232,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588829232","product_id":100006701,"comment_content":"è€å¸ˆå’ŒåŒå­¦ä»¬ï¼Œæˆ‘æœ‰ä¸€ä¸ªå°é—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼š<br>è€å¸ˆçš„è¿™å¥è¯ï¼šè¿™æ„å‘³ç€ï¼Œåˆ©ç”¨è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¿é—®åˆ°çš„å¯¹è±¡ï¼Œé‡æ–°æŒ‡å‘å¼ºå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯äººä¸ºçš„æ”¹å˜äº†å¯¹è±¡çš„å¯è¾¾æ€§çŠ¶æ€ï¼<br>è¯·é—®è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ä¸æ˜¯äº‹å…ˆå®šä¹‰å¥½çš„å—ï¼Ÿæ˜¯è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ä½¿ç”¨getæ–¹æ³•ä¹‹åå°±ä¼šå˜æˆå¼ºå¼•ç”¨è¿™ä¸ªæ„æ€å—ï¼Ÿ<br>å¯æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>æœ¬äººæ¯”è¾ƒèœ å¸Œæœ›å„ä½è§£ç­”ä¸€ä¸‹è°¢è°¢ï¼","like_count":0},{"had_liked":false,"id":200522,"user_name":"åœ°è¡¨åè¿›åˆ¶","can_delete":false,"product_type":"c1","uid":1855791,"ip_address":"","ucode":"C3B5B60748CE67","user_header":"","comment_is_top":false,"comment_ctime":1585615608,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585615608","product_id":100006701,"comment_content":"å¯¹åº”å¼ºå¼•ç”¨ï¼Œç†è§£ä¸ºnewå‡ºæ¥çš„å¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚<br><br>è½¯å¼•ç”¨-softreference:åœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨æ‰§è¡Œæ—¶ä¸ä¼šå›æ”¶ï¼Œåä¹‹å›æ”¶ã€‚<br><br>å¼±å¼•ç”¨-weakreference:ä¸ç®¡å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œåƒåœ¾å›æ”¶å™¨æ‰§è¡Œæ—¶éƒ½ä¼šå›æ”¶ã€‚","like_count":0},{"had_liked":false,"id":197723,"user_name":"é»„ä¹”é‘«","can_delete":false,"product_type":"c1","uid":1863174,"ip_address":"","ucode":"CBD0A8E5E99427","user_header":"https://static001.geekbang.org/account/avatar/00/1c/6e/06/bb43e716.jpg","comment_is_top":false,"comment_ctime":1585395095,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585395095","product_id":100006701,"comment_content":"è™šå¼•ç”¨èƒ½ä¸èƒ½é¢‘ç¹ç”¨å‘¢","like_count":0},{"had_liked":false,"id":196220,"user_name":"ilovealt","can_delete":false,"product_type":"c1","uid":1113180,"ip_address":"","ucode":"35CB4FD836135B","user_header":"https://static001.geekbang.org/account/avatar/00/10/fc/5c/a3d42cdb.jpg","comment_is_top":false,"comment_ctime":1585261362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585261362","product_id":100006701,"comment_content":"åªèƒ½å¬æ‡‚60%ï¼Œå¾—å¤šå¬å‡ éå•¦ã€‚","like_count":0},{"had_liked":false,"id":185298,"user_name":"Seven.Linæ¾¤è€¿","can_delete":false,"product_type":"c1","uid":1181192,"ip_address":"","ucode":"4CAB732CD6F149","user_header":"https://static001.geekbang.org/account/avatar/00/12/06/08/855abb02.jpg","comment_is_top":false,"comment_ctime":1583555183,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583555183","product_id":100006701,"comment_content":"MyBatisåº•å±‚çš„ç¼“å­˜å®ç°å…¶ä¸­å°±æœ‰ä¸¤ä¸ªæ˜¯åˆ©ç”¨å¼•ç”¨å’Œå¼•ç”¨é˜Ÿåˆ—å®ç°çš„ï¼ŒWeakCacheå’ŒSofeCacheï¼Œéœ€è¦å¼€å¯çš„æ—¶å€™å¯ä»¥é€šè¿‡ç¼“å­˜é…ç½®","like_count":0},{"had_liked":false,"id":173586,"user_name":"J.Smile","can_delete":false,"product_type":"c1","uid":1336475,"ip_address":"","ucode":"C4D98DFDBF7584","user_header":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","comment_is_top":false,"comment_ctime":1579601865,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579601865","product_id":100006701,"comment_content":"2. å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰ä½¿ç”¨è°ˆåˆ°å„ç§å¼•ç”¨çš„ç¼–ç¨‹ï¼Œå°±å¿…ç„¶è¦æåˆ°å¼•ç”¨é˜Ÿåˆ—ã€‚æˆ‘ä»¬åœ¨åˆ›å»ºå„ç§å¼•ç”¨å¹¶å…³è”åˆ°å“åº”å¯¹è±¡æ—¶<br>----------------------------------------------------------------------<br>æœ€åäº”ä¸ªå­—â€œå“åº”å¯¹è±¡æ—¶â€-------&gt;â€œç›¸åº”å¯¹è±¡æ—¶â€å§ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":172166,"user_name":"è‹æš®æ²‰è§","can_delete":false,"product_type":"c1","uid":1577580,"ip_address":"","ucode":"532B816D4EF47B","user_header":"https://static001.geekbang.org/account/avatar/00/18/12/6c/61a598e9.jpg","comment_is_top":false,"comment_ctime":1579099944,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579099944","product_id":100006701,"comment_content":"è€å¸ˆï¼Œæ‚¨åœ¨æ–‡ä¸­è®²çš„ï¼šâ€œJVM ä¼šåœ¨ç‰¹å®šæ—¶æœºå°†å¼•ç”¨ enqueue åˆ°é˜Ÿåˆ—é‡Œâ€ï¼Œè¿™ä¸ªç‰¹å®šæ—¶é—´æ˜¯æŒ‡ä»€ä¹ˆæ—¶å€™ï¼Ÿçœ‹è¯„è®ºä¸­æœ‰äººè¯´æ˜¯åœ¨å›æ”¶ä»¥åï¼Œæœ‰äººè§‰å¾—åœ¨å›æ”¶ä¹‹å‰çš„æŸä¸ªæ—¶é—´","like_count":0},{"had_liked":false,"id":145897,"user_name":"jacy","can_delete":false,"product_type":"c1","uid":1103456,"ip_address":"","ucode":"0022A8759DDCE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/60/f21b2164.jpg","comment_is_top":false,"comment_ctime":1572400193,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1572400193","product_id":100006701,"comment_content":"è€å¸ˆï¼Œnew Resource().action()ï¼Œä¾‹å­ä¸­çš„å¯¹è±¡ä½•æ—¶å›æ”¶å‘¢ï¼Œä¼šä¸ä¼šé€ æˆæ³„æ¼","like_count":0},{"had_liked":false,"id":144338,"user_name":"Paul Shan","can_delete":false,"product_type":"c1","uid":1593140,"ip_address":"","ucode":"32D99989028284","user_header":"","comment_is_top":false,"comment_ctime":1571899924,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571899924","product_id":100006701,"comment_content":"è¯·é—®æ¨è€å¸ˆï¼Œ ä¾‹å­ä¸­çš„ä¸ºä»€ä¹ˆ Reference.reachabilityFenceè°ƒç”¨è¦æ”¾åœ¨finallyå—é‡Œé¢ï¼Œå¤šè°¢ï¼","like_count":0},{"had_liked":false,"id":143689,"user_name":"coderkeep","can_delete":false,"product_type":"c1","uid":1129178,"ip_address":"","ucode":"29EE99F8F19F2E","user_header":"https://static001.geekbang.org/account/avatar/00/11/3a/da/7f9cbbd1.jpg","comment_is_top":false,"comment_ctime":1571756351,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571756351","product_id":100006701,"comment_content":"Java ä¸­ä¸å…è®¸å¯¹å †å†…å­˜çš„ç›´æ¥ç”³è¯·å’Œé‡Šæ”¾çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹è±¡ä¸€æ—¦ä¸æ˜¯å¼ºå¼•ç”¨ï¼Œåç»­çš„ GC è¿‡ç¨‹æ— æ³•è¢«å¹²é¢„ã€‚æˆ‘è®¤ä¸º JVM æä¾›è½¯å¼•ç”¨ï¼Œå¼±å¼•ç”¨ï¼Œå¹»è±¡å¼•ç”¨å’Œå¼•ç”¨é˜Ÿåˆ—çš„æœºåˆ¶ï¼Œå®é™…ä¸Šæ˜¯æä¾›äº†å¯¹å†…å­˜é‡Šæ”¾è¿‡ç¨‹è¿›è¡Œå¹²é¢„å’Œæ“ä½œçš„æ¥å£ã€‚","like_count":0},{"had_liked":false,"id":134765,"user_name":"å–æ½˜å–æ½˜","can_delete":false,"product_type":"c1","uid":1435418,"ip_address":"","ucode":"6DE549504BF31E","user_header":"https://static001.geekbang.org/account/avatar/00/15/e7/1a/e86ae6c8.jpg","comment_is_top":false,"comment_ctime":1568912003,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568912003","product_id":100006701,"comment_content":"é™æ€å˜é‡å±äºå“ªä¸€ç§å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":128811,"user_name":"çŸ¥è¡Œåˆä¸€","can_delete":false,"product_type":"c1","uid":1090784,"ip_address":"","ucode":"563C4A71D80DA1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJwQvLGE4dMsF4JU0svW3DtGbodpjskbY65FdwF13JdtBYZfgL2IXHlHrdejWzHdjT0RibEIfib4QYA/132","comment_is_top":false,"comment_ctime":1566966956,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566966956","product_id":100006701,"comment_content":"threadlocalç”¨çš„weakå¼•ç”¨","like_count":0},{"had_liked":false,"id":126128,"user_name":"Geek_5d2b65","can_delete":false,"product_type":"c1","uid":1623606,"ip_address":"","ucode":"3775160556FAE4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erYwe4EFnsKySWl1K1NFQWzuyiaIjLEeibKWsnWp321o1SM9iauoegqAbZM96Cbs0qc19qiaibjchUc8jg/132","comment_is_top":false,"comment_ctime":1566318689,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566318689","product_id":100006701,"comment_content":"æ˜¯ä¸æ˜¯ä¸ºäº†ä¿è¯å¯¹è±¡å…·æœ‰å¼ºå¼•ç”¨ï¼Œæ—¥å¸¸ç¼–ç ä¸­ä¸æ¨èä½¿ç”¨new Resource().action()çš„å†™æ³•ï¼Œæ¯•ç«Ÿä¸å¯èƒ½æ‰€æœ‰æ–¹æ³•éƒ½åŠ try finally å¼ºåˆ¶æŒ‡å®šä¸ºå¼ºå¼•ç”¨ã€‚æ¨èä½¿ç”¨Resource re=new Resource();re.action()","like_count":0},{"had_liked":false,"id":116255,"user_name":"LoveDlei","can_delete":false,"product_type":"c1","uid":1102916,"ip_address":"","ucode":"68065848DF518B","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/44/ec084136.jpg","comment_is_top":false,"comment_ctime":1563808296,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563808296","product_id":100006701,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼š<br>éå¸¸æ„Ÿè°¢æ‚¨å¸¦æ¥çš„ç²¾å½©å†…å®¹ï¼<br>è€å¸ˆæ˜¯å¦å¯ä»¥æŠŠè¿™å‡ ç§å¼•ç”¨åœ¨GitHubä¸Šä¸Šä¼ ä¸€ä¸‹å®ä¾‹ä»£ç ï¼Œè·Ÿéšç€ä»£ç åœ¨è§£é‡Šåˆ†æä¸€ä¸‹è¿™å‡ ç§å¼•ç”¨ï¼Ÿ<br>æä¸ªå»ºè®®ï¼šæ–‡ç« ä¸­ç›´æ¥å†™ä¸ŠGitHubåœ°å€å³å¯ï¼Œè¿˜ä¸å ç”¨ç¯‡å¹…ï¼Œè¿™æ ·åŸºç¡€å¥½çš„å¯ä»¥ä¸ç”¨çœ‹ï¼ŒåŸºç¡€å·®ä¸€ç‚¹çš„å¯ä»¥è·ŸéšGitHubçš„å†…å®¹é…åˆä¸“æ ç»†ç»†ç†è§£åˆ†æï¼<br>ä¹‹å‰è¿˜çœŸæ²¡å¬è¿‡è¿™å››ç§å¼•ç”¨çš„æ¦‚å¿µã€‚","like_count":0},{"had_liked":false,"id":107106,"user_name":"N_H","can_delete":false,"product_type":"c1","uid":1541386,"ip_address":"","ucode":"109B67557AB3CE","user_header":"https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg","comment_is_top":false,"comment_ctime":1561459739,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561459739","product_id":100006701,"comment_content":"è¿˜æœ‰ä¸€ä¸ªé—®é¢˜é—®ä¸€ä¸‹è€å¸ˆï¼Œçœ‹åˆ°æ–‡ä¸­æœ‰å„ç§å¼•ç”¨çš„ç›¸äº’è½¬æ¢ï¼Œè¯·é—®ä¸‹ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿå¼•ç”¨çš„ç›¸äº’è½¬æ¢ï¼Ÿè¿™ä¸ªè½¬æ¢å¯ä»¥ç”¨æˆ·æ˜¾ç¤ºåœ°è¿›è¡Œå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":107095,"user_name":"N_H","can_delete":false,"product_type":"c1","uid":1541386,"ip_address":"","ucode":"109B67557AB3CE","user_header":"https://static001.geekbang.org/account/avatar/00/17/85/0a/e564e572.jpg","comment_is_top":false,"comment_ctime":1561458213,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561458213","product_id":100006701,"comment_content":"â€œä¸é”™ï¼Œå¦‚æœæˆ‘ä»¬é”™è¯¯åœ°ä½¿ç”¨äº†å¼ºå¼•ç”¨ï¼ˆæ¯”å¦‚ï¼Œèµ‹å€¼ç»™äº†staticå˜é‡ï¼‰ï¼Œé‚£ä¹ˆå¯¹è±¡å¯èƒ½å°±æ²¡æœ‰æœºä¼šå˜æˆå¼±å¼•ç”¨äº†...â€ï¼Œè€å¸ˆï¼Œè¿™ä¸€æ®µçš„å†…å­˜æ³„æ¼ä¸æ˜¯å¤ªç†è§£ï¼Œèƒ½å…·ä½“è¯´è¯´å†…å­˜æ³„æ¼æ˜¯æ€ä¹ˆé€ æˆçš„å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":101398,"user_name":"æåŒå­¦çˆ±å­¦ä¹ ","can_delete":false,"product_type":"c1","uid":1114774,"ip_address":"","ucode":"D85A7557F6E46E","user_header":"https://static001.geekbang.org/account/avatar/00/11/02/96/7505099c.jpg","comment_is_top":false,"comment_ctime":1559800669,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559800669","product_id":100006701,"comment_content":"ä¸ªäººç†è§£ï¼š<br>ä»GCå›æ”¶ç­–ç•¥ç†è§£åªè¦å¯¹è±¡æœªè¢«éå¼ºå¼•ç”¨æ‰€å¼•ç”¨å°±å¯è¢«åƒåœ¾å›æ”¶ï¼Œè€Œè½¯å¼•ç”¨ã€å¼±å¼•ç”¨ä»¥åŠå¹»è±¡å¼•ç”¨æ›´åƒæ˜¯ä¸ºäº†æ»¡è¶³ç‰¹å®šéœ€æ±‚ï¼ˆæ¯”å¦‚è½¯å¼•ç”¨å¯ä»¥è¾¾åˆ°å»¶æ—¶å›æ”¶çš„æ•ˆæœï¼‰è€Œå¼•å…¥çš„å¯¹è±¡ç»†åŒ–çš„é€»è¾‘çŠ¶æ€ï¼Œè¿™äº›é€»è¾‘çŠ¶æ€ä¸æ˜¯å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„å¿…ç»çŠ¶æ€ã€‚è¿™äº›ç°è‰²çŠ¶æ€å¦‚æœä½ æœ‰éœ€æ±‚ç”¨åˆ°äº†é‚£ä¹ˆå¯¹è±¡å°±ä¼šç»å†è¿™äº›çŠ¶æ€ï¼Œå¦‚æœæ²¡ç”¨é‚£ä¹ˆå¯¹è±¡å°±ä¸ä¼šç»å†è¿™äº›çŠ¶æ€ã€‚é‚£ä¹ˆé—®é¢˜ä¹Ÿå°±å˜æˆäº†æˆ‘ä»¬å¦‚ä½•è®©å¯¹è±¡ç»å†è¿™äº›ç°è‰²çŠ¶æ€ï¼Ÿæ‹¿è½¯å¼•ç”¨ä¸¾ä¾‹ï¼šæ¡ä»¶1ï¼Œæ²¡æœ‰å¼ºå¼•ç”¨æŒ‡å‘å®ƒï¼›æ¡ä»¶2ï¼Œæœ‰è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰æŒ‡å‘å®ƒã€‚","like_count":0},{"had_liked":false,"id":94918,"user_name":"ingsnow","can_delete":false,"product_type":"c1","uid":1528765,"ip_address":"","ucode":"1C1D1F45E53CAE","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erTFrZcEmQMzKDnC6ibZEicAatlcDUQ5qIXt6TicicCwuGsb9kPgiadgbZC2HEDvR1FSDnwQmZ9TgmJEvQ/132","comment_is_top":false,"comment_ctime":1557923604,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557923604","product_id":100006701,"comment_content":"æ„Ÿè§‰é™¤äº†å¼ºå¼•ç”¨ï¼Œå…¶å®ƒéƒ½ä¸æ‡‚ï¼Œåšæµ‹è¯•çš„","like_count":0},{"had_liked":false,"id":92294,"user_name":"PoL","can_delete":false,"product_type":"c1","uid":1416147,"ip_address":"","ucode":"72BA3C2D50D463","user_header":"https://static001.geekbang.org/account/avatar/00/15/9b/d3/41d04923.jpg","comment_is_top":false,"comment_ctime":1557222966,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557222966","product_id":100006701,"comment_content":"å¯¹è±¡çš„å¼ºå¼•ç”¨ï¼šå¯¹è±¡åˆå§‹åŒ–ä»¥åå°±å±äºå¼ºå¼•ç”¨ï¼ŒGCä¸ä¼šç¢°å®ƒï¼Œæ˜¾ç¤ºè®¾ç½®ä¸ºNULLï¼Œgcæ‰å¯èƒ½æ”¶å®ƒ<br>å¯¹è±¡çš„è½¯å¼•ç”¨ï¼šæ¯”å¼ºå¼•ç”¨å¼±ä¸€äº›ï¼Œå¯ä»¥è½¬æ¢æˆå¼ºå¼•ç”¨ï¼Œå†…å­˜å¤ŸGCä¸ç¢°å®ƒï¼Œå†…å­˜ä¸è¶³GCæ¸…ç†<br>å¯¹è±¡çš„å¼±å¼•ç”¨ï¼šæ¯”è½¯å¼•ç”¨æ›´å­˜æ´»å‘¨æœŸæ›´çŸ­ï¼Œæ˜“è¢«GCå›æ”¶ï¼Œå†…å­˜ä¸è¶³GCæ¸…ç†<br>å¯¹è±¡çš„å¹»è±¡ï¼ˆè™šï¼‰å¼•ç”¨ï¼šå­˜åœ¨äºå¯¹è±¡finalize é˜¶æ®µï¼Œå¯ä»¥ç”¨äºç›‘æ§å¯¹è±¡çš„æ˜¯å¦è¢«GCå›æ”¶<br>","like_count":0},{"had_liked":false,"id":81333,"user_name":"åˆ˜æ ‹","can_delete":false,"product_type":"c1","uid":1223013,"ip_address":"","ucode":"D0C294E312BCD2","user_header":"https://static001.geekbang.org/account/avatar/00/12/a9/65/e9fc7fd1.jpg","comment_is_top":false,"comment_ctime":1553864751,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553864751","product_id":100006701,"comment_content":"ä»€ä¹ˆæ˜¯å¼•ç”¨çš„â€œä½œç”¨åŸŸâ€ï¼Ÿä»€ä¹ˆæ—¶å€™ä¼šè¶…å‡ºå¼•ç”¨çš„â€œä½œç”¨åŸŸâ€ï¼Ÿ","like_count":0},{"had_liked":false,"id":80707,"user_name":"å½­å‘çº¢","can_delete":false,"product_type":"c1","uid":1461374,"ip_address":"","ucode":"9BAC208700791E","user_header":"https://static001.geekbang.org/account/avatar/00/16/4c/7e/4771d8a4.jpg","comment_is_top":false,"comment_ctime":1553700456,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1553700456","product_id":100006701,"comment_content":"ğŸ˜„å°±çŸ¥é“ç•™è¨€åŒºæœ‰åŠ©æ”»ï¼ŒçœŸé¦™","like_count":0},{"had_liked":false,"id":70260,"user_name":"Kennedy","can_delete":false,"product_type":"c1","uid":1049022,"ip_address":"","ucode":"C50627007E5ED0","user_header":"https://static001.geekbang.org/account/avatar/00/10/01/be/be358cab.jpg","comment_is_top":false,"comment_ctime":1551060834,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1551060834","product_id":100006701,"comment_content":"è¯·è€å¸ˆè®²è§£ä¸‹è¿™å¥è¯çš„åº”ç”¨åœºæ™¯ã€‚â€æœ‰äº›æ—¶å€™ï¼Œå¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰å¼ºå¼•ç”¨ï¼Œä½†æ˜¯ä¹Ÿè®¸å®ƒçš„éƒ¨åˆ†å±æ€§è¿˜åœ¨è¢«ä½¿ç”¨ï¼Œâ€ã€‚","like_count":0},{"had_liked":false,"id":67916,"user_name":"hgf","can_delete":false,"product_type":"c1","uid":1085297,"ip_address":"","ucode":"A9649ECFDBD9E8","user_header":"https://static001.geekbang.org/account/avatar/00/10/8f/71/29fb7bc2.jpg","comment_is_top":false,"comment_ctime":1550323186,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1550323186","product_id":100006701,"comment_content":"åœ¨å¼•ç”¨é˜Ÿåˆ—è¿™ä¸€å°èŠ‚ä»£ç ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯Integerå¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š<br>        Integer i = 1; &#47;&#47;Integer i = new Integer(1);<br>        ReferenceQueue&lt;Integer&gt; q = new ReferenceQueue();<br>        PhantomReference p = new PhantomReference(i, q);<br>        i = null;<br>        System.gc();<br><br>        try {<br>            Reference ref = q.remove(1000);<br>            if(ref!=null){<br>                System.out.println(ref.hashCode());<br>            }else {<br>                System.out.println(&quot;null&quot;);<br>            }<br>        } catch (InterruptedException e) {<br>            e.printStackTrace();<br>        }<br><br>ç”±äºintegerå¯¹è±¡æœ‰å°ç®±æœºåˆ¶ï¼Œå¯ä»¥æœ‰ä¸¤ç§åˆå§‹åŒ–æ–¹æ³•ï¼Œ Integer i = 1; å’ŒInteger i = new Integer(1);<br>ä½†æ˜¯è¿™ä¸¤ç§æ–¹æ³•åˆå§‹åŒ–çš„ç»“æœå´æ˜¯ä¸ä¸€æ ·çš„ï¼Œå½“ä½¿ç”¨Integer i = 1;è¿™ç§åˆå§‹åŒ–æ–¹æ³•æ—¶ï¼Œrefä¸ºnullï¼›ä½¿ç”¨Integer i = new Integer(1);åˆå§‹åŒ–æ—¶ï¼Œ ref!=null ã€‚æ„Ÿè§‰è¿™ä¸ªå’Œå°ç®±æœºåˆ¶ä¸­çš„ç¼“å­˜æœ‰å…³ï¼Œè€å¸ˆèƒ½åˆ†æä¸€ä¸‹åŸå› ï¼Œå¸®å¿™è§£ç­”ä¸€ä¸‹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":62743,"user_name":"ä¸ä¼¼æ—§æ—¥","can_delete":false,"product_type":"c1","uid":1161271,"ip_address":"","ucode":"DF4C5E3AB9570C","user_header":"https://static001.geekbang.org/account/avatar/00/11/b8/37/98991aeb.jpg","comment_is_top":false,"comment_ctime":1548146862,"is_pvip":false,"replies":[{"id":"23335","content":"ä½¿ç”¨ç›¸åº”çš„æ„é€ å‡½æ•°å°±æ˜¯äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1549814690,"ip_address":"","comment_id":62743,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548146862","product_id":100006701,"comment_content":"é™¤äº†å¼ºå¼•ç”¨å…¶ä»–ä¸‰ä¸ªæ€ä¹ˆæ€ä¹ˆæ„é€ ?","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437332,"discussion_content":"ä½¿ç”¨ç›¸åº”çš„æ„é€ å‡½æ•°å°±æ˜¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549814690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55697,"user_name":"äº¤å‰è·¯å£","can_delete":false,"product_type":"c1","uid":1125680,"ip_address":"","ucode":"D1A636F0F4E147","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/30/b840bd9e.jpg","comment_is_top":false,"comment_ctime":1546264499,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546264499","product_id":100006701,"comment_content":"å¯ä¸å¯ä»¥åˆ†åˆ«ç»“åˆjdk ä¸­çš„æºç æ¥è®²è§£è¿™äº›å¼•ç”¨ç±»å‹å•Šï¼Ÿè¿™è¾¹æ›´åŠ å¥½ç†è§£å’Œæ·±åˆ»","like_count":0},{"had_liked":false,"id":52565,"user_name":"å¤©ç‹","can_delete":false,"product_type":"c1","uid":1239337,"ip_address":"","ucode":"C074B2F9A5F007","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/29/629d9bb0.jpg","comment_is_top":false,"comment_ctime":1545440370,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545440370","product_id":100006701,"comment_content":"å¼ºå¼•ç”¨ï¼Œnewäº†ä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦æœ‰å¼•ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šè®¤ä¸ºæ´»ç€ï¼Œä¸ä¼šå›æ”¶è¿™ä¸ªå¯¹è±¡ï¼Œå˜é‡å‡ºäº†ä½œç”¨åŸŸæˆ–è€…æ‰‹å·¥ç½®ä¸ºnullï¼Œå°±ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ 2 è½¯å¼•ç”¨ç”¨äºå¯¹å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ï¼Œå½“å†…å­˜è¶³å¤Ÿä¸ä¼šå›æ”¶ï¼Œå†…å­˜ä¸å¤Ÿè¿›è¡Œå›æ”¶ã€‚3 å¼±å¼•ç”¨ç”¨äºå¯¹å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ï¼Œåƒåœ¾å›æ”¶å™¨æ‰«æåˆ°å¼±å¼•ç”¨å¯¹è±¡ï¼Œéƒ½ä¼šè¿›è¡Œå›æ”¶ï¼Œåƒåœ¾å›æ”¶å™¨çº¿ç¨‹ä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œä¸ä¸€å®šä¼šç«‹åˆ»å›æ”¶ã€‚ä¼˜å…ˆäºè½¯å¼•ç”¨è¢«å›æ”¶ã€‚3 å¹»è±¡å¼•ç”¨ï¼Œæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå½“å¯¹è±¡finalizeä¹‹åï¼Œè§¦å‘æŸäº›ç‰¹å®šçš„æ“ä½œã€‚å¼•ç”¨æœ¬è´¨æ˜¯å¯¹è±¡å¯è¾¾æ€§çŠ¶æ€å’Œå¯¹åƒåœ¾å›æ”¶çš„å½±å“ã€‚","like_count":0},{"had_liked":false,"id":49240,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1544629594,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544629594","product_id":100006701,"comment_content":"å¾ˆæ£’ï¼Œæ–‡ç« å’Œè¯„è®ºçš„çŸ¥è¯†å¯†åº¦éƒ½å¾ˆå¤§ï¼Œå¼ºï¼Œè½¯ï¼Œå¼±ï¼Œå¹»å››ç§å¼•ç”¨ï¼Œå¹³æ—¶å¼€å‘ç¡®å®ä½¿ç”¨å’Œå…³æ³¨ä¸å¤šï¼Œä¸è¿‡æ­£å¦‚å³°å“¥æ‰€è¨€ï¼Œå¯¹äºæ€§èƒ½éœ€è¦æè‡´ä¼˜åŒ–çš„å°±éœ€è¦å…³æ³¨äº†ï¼Œè¿™å››ç§å¼•ç”¨çš„åŒºåˆ«ä¸»è¦åœ¨äºJVMå›æ”¶å¯¹è±¡çš„ä¼˜å…ˆçº§æœ‰æ‰€ä¸åŒï¼Œå¯¹äºæ€§èƒ½è°ƒä¼˜ç¡®å®æœ‰è«å¤§çš„å…³ç³»ã€‚<br>éœ€è¦åå¤çœ‹ï¼Œæ”¶è·æ‰ä¼šæœ€å¤§åŒ–ã€‚<br>æ„Ÿè°¢ç²¾å½©çš„åˆ†äº«ï¼","like_count":0},{"had_liked":false,"id":48568,"user_name":"å³»é“­","can_delete":false,"product_type":"c1","uid":1106202,"ip_address":"","ucode":"63AB23BADACA88","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/1a/20977779.jpg","comment_is_top":false,"comment_ctime":1544489998,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1544489998","product_id":100006701,"comment_content":"æ–‡ä¸­è¯´çš„è½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡ä¼šåœ¨å†…å­˜ä¸è¶³æ—¶å›æ”¶ï¼Œé‚£æ˜¯ä¸æ˜¯ç”Ÿå‘½å‘¨æœŸæ¯”å¼ºå¼•ç”¨é•¿å‘¢","like_count":0},{"had_liked":false,"id":33496,"user_name":"æ‰æ‹…","can_delete":false,"product_type":"c1","uid":1266540,"ip_address":"","ucode":"95B78342FD1893","user_header":"https://static001.geekbang.org/account/avatar/00/13/53/6c/46c4efb0.jpg","comment_is_top":false,"comment_ctime":1539794842,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539794842","product_id":100006701,"comment_content":"è¿˜æ˜¯å¾ˆå¤šç–‘æƒ‘çš„ï¼Œä¸èƒ½ç†è§£å¾—é€šé€çš„æ„Ÿè§‰","like_count":0},{"had_liked":false,"id":21162,"user_name":"æ‰¬ï½","can_delete":false,"product_type":"c1","uid":1208163,"ip_address":"","ucode":"6FA7D8FE188341","user_header":"https://static001.geekbang.org/account/avatar/00/12/6f/63/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1534944223,"is_pvip":false,"replies":[{"id":"7561","content":"è·Ÿè¸ªæ¸…ç†æ˜¯ä¸ªå¸¸è§çš„ä¾‹å­ï¼Œå®é™…ä¸­æœ‰æ›´å¥½çš„åŠæ³•ï¼›<br>ä¸€èˆ¬æ˜¯åˆ©ç”¨ref queueæœºåˆ¶åšèµ„æºé‡Šæ”¾çš„æœ€åä¸€é“ä¿éšœ","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1535038219,"ip_address":"","comment_id":21162,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1534944223","product_id":100006701,"comment_content":"è™½ç„¶ç†è§£äº†å„ä¸ªå¼•ç”¨çš„ä½œç”¨ã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯ä¸ç†è§£å¹»æƒ³å¼•ç”¨çš„ä½œç”¨ï¼Œå¹»åƒå¼•ç”¨å¾—åˆ°çš„å¯¹è±¡éƒ½ä¸ºnullï¼Œè¯´æ˜æˆ‘ä»¬ä¹Ÿä¸ä¼šç”¨è¿™ç±»å¯¹è±¡ï¼Œé‚£ç›‘æ§ä»–æ˜¯å¦å›æ”¶æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ<br>å¦ä¸€ç§æˆ‘çš„ç†è§£æ˜¯ï¼Œä¸€ä¸ªå¯¹è±¡æœ‰å¥½å‡ ç§å¼•ç”¨ï¼Œæ¯”å¦‚å¸¦æœ‰å¼ºå¼•ç”¨å’Œå¹»åƒå¼•ç”¨çš„å¯¹è±¡ï¼Œå½“å¼ºå¼•ç”¨å¤±æ•ˆæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®å¹»åƒå¼•ç”¨æ¥è·Ÿè¸ªå®ƒè¢«æ¸…ç†çš„è¿‡ç¨‹ã€‚æ˜¯æŒ‰åè€…è¿™æ ·ç†è§£å—ï¼Œå°ç™½ä¸€ä¸ªï¼Œæœ›å³°å“¥è§£ç­”ä¸€ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422557,"discussion_content":"è·Ÿè¸ªæ¸…ç†æ˜¯ä¸ªå¸¸è§çš„ä¾‹å­ï¼Œå®é™…ä¸­æœ‰æ›´å¥½çš„åŠæ³•ï¼›\nä¸€èˆ¬æ˜¯åˆ©ç”¨ref queueæœºåˆ¶åšèµ„æºé‡Šæ”¾çš„æœ€åä¸€é“ä¿éšœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535038219,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1103445,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d6/55/47e76936.jpg","nickname":"å¶æ˜“","note":"","ucode":"0983EA217ACF28","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":181167,"discussion_content":"DirectByteBufferç”³è¯·å †å¤–å†…å­˜ï¼Œç„¶åJVMç®¡ç†ä¸äº†å †å¤–å†…å­˜çš„é‡Šæ”¾ã€‚å°±è¦é€šè¿‡è¿™ç§æ–¹å¼ï¼Œåœ¨å¯¹è±¡å›æ”¶å‰é€šè¿‡Unsafeç±»è°ƒç”¨nativeæ–¹æ³•é‡Šæ”¾DirectByteBufferå…³è”çš„å †å¤–å†…å­˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582342358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":20228,"user_name":"å¤","can_delete":false,"product_type":"c1","uid":1183604,"ip_address":"","ucode":"C479DCAD4C8150","user_header":"https://static001.geekbang.org/account/avatar/00/12/0f/74/8890b63f.jpg","comment_is_top":false,"comment_ctime":1534321189,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1534321189","product_id":100006701,"comment_content":"å¯¹è±¡Aå¦‚æœé‡å†™äº†finalizeæ–¹æ³•ï¼Œä¸”finalizeæ–¹æ³•ä¸ä¸ºç©ºï¼Œfinalizeæ–¹æ³•ä¼šè¢«Finalizerçš„å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œã€‚<br>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒFinalizeræŒæœ‰çš„æ˜¯å¼ºå¼•ç”¨ï¼Œåœ¨Finalizeræ‰§è¡Œå®Œfinalizeæ–¹æ³•åï¼Œå¯¹è±¡é‡æ–°å˜ä¸ºä¸å¯è¾¾(Finalizerä¸ºåå°å®ˆæŠ¤çº¿ç¨‹ï¼Œä¼˜å…ˆçº§è¿œä½äºmainçº¿ç¨‹)ï¼Œå¹»è±¡å¼•ç”¨enqueueã€‚<br>æ‰€ä»¥ï¼Œå¦‚æœé‡å†™äº†finalizeæ–¹æ³•ï¼Œgcåï¼Œè™šå¼•ç”¨æ²¡æœ‰enqueueï¼Œå¯ä»¥å°è¯•å¤šè§¦å‘å‡ æ¬¡gcï¼Œå› ä¸ºFinalizerçº¿ç¨‹å¯èƒ½è¿˜æ²¡æœ‰æ‰§è¡Œå®Œfinalizeæ–¹æ³•ã€‚<br>æˆ‘ä»¬åœ¨å®é™…çš„ç¼–ç è¿‡ç¨‹ä¸­é¿å…ä½¿ç”¨finalizeæ–¹æ³•ã€‚","like_count":0},{"had_liked":false,"id":20044,"user_name":"æ¡€","can_delete":false,"product_type":"c1","uid":1204584,"ip_address":"","ucode":"939C1EEFCFC08E","user_header":"https://static001.geekbang.org/account/avatar/00/12/61/68/e5f0ba39.jpg","comment_is_top":false,"comment_ctime":1534232225,"is_pvip":false,"replies":[{"id":"7051","content":"ä½ å†éšä¾¿æ‰¾ä¸ªPhontomReferenceçœ‹çœ‹ï¼Œåº”è¯¥éƒ½extends Referenceï¼Œè¿™ä¸ªéƒ½æ˜¯è€ä»£ç äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1534318799,"ip_address":"","comment_id":20044,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1534232225","product_id":100006701,"comment_content":"è€å¸ˆï¼Œæ±‚è§£ç­”<br>æ–‡ä¸­å†™åˆ°â€œæ‰€æœ‰å¼•ç”¨ç±»å‹ï¼Œéƒ½æ˜¯æŠ½è±¡ç±»java.lang.ref.Referenceçš„å­ç±»â€ï¼Œè¿™ä¸€ç‚¹å¦‚ä½•å¾—çŸ¥å‘¢ï¼ŒæŸ¥çœ‹apiå‘ç°å¹¶æ²¡æœ‰æ˜¾å¼çš„æœ‰ç»§æ‰¿å…³ç³»ã€‚","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":422079,"discussion_content":"ä½ å†éšä¾¿æ‰¾ä¸ªPhontomReferenceçœ‹çœ‹ï¼Œåº”è¯¥éƒ½extends Referenceï¼Œè¿™ä¸ªéƒ½æ˜¯è€ä»£ç äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1534318799,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19573,"user_name":"æˆ‘å¯èƒ½æ˜¯ä¸ªç¨‹åºå‘˜","can_delete":false,"product_type":"c1","uid":1051795,"ip_address":"","ucode":"8CA580EA34EEF3","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/93/e3014470.jpg","comment_is_top":false,"comment_ctime":1533884413,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1533884413","product_id":100006701,"comment_content":"å¹»è±¡å¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚ å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚<br><br>Â ReferenceQueue queue=new ReferenceQueue();<br><br>PhantomReference pr=new PhantomReference(object,queue);<br><br>ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦å·²ç»åŠ å…¥äº†è™šå¼•ç”¨ï¼Œæ¥äº†è§£è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°†è¦è¢«åƒåœ¾å›æ”¶ã€‚å¦‚æœç¨‹åºå‘ç°æŸä¸ªè™šå¼•ç”¨å·²ç»è¢«åŠ å…¥åˆ°å¼•ç”¨å¯¹åˆ—ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å†…å­˜è¢«å›æ”¶ä¹‹å‰é‡‡å–ä¸€äº›ç¨‹åºè¡ŒåŠ¨ã€‚<br><br>","like_count":0},{"had_liked":false,"id":19057,"user_name":"Meteor","can_delete":false,"product_type":"c1","uid":1180548,"ip_address":"","ucode":"3938D2A1474DD1","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/84/791fb8f1.jpg","comment_is_top":false,"comment_ctime":1533654113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1533654113","product_id":100006701,"comment_content":"è¿˜æ˜¯åªå¯¹å¼ºå¼•ç”¨ç†è§£ï¼Œå…¶ä»–ä¸‰ç§å¼•ç”¨ä¸æ˜¯å¤ªæ˜ç™½ã€‚èƒ½ä¸èƒ½ä¸¾ä¸€äº›å…·ä½“çš„å®é™…ä¾‹å­ï¼Œæ¥è¯´æ˜ä¸€ä¸‹ã€‚","like_count":0},{"had_liked":false,"id":18945,"user_name":"Aaron_æ¶›","can_delete":false,"product_type":"c1","uid":1180617,"ip_address":"","ucode":"067F3CBB1F036C","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/c9/9a9d82ab.jpg","comment_is_top":false,"comment_ctime":1533612395,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1533612395","product_id":100006701,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ï¼Œæˆ‘ç”¨è½¯å¼•ç”¨åšç¼“å­˜ï¼Œæˆ‘åº”è¯¥æ€ä¹ˆå›æ”¶è½¯å¼•ç”¨å‘¢ï¼Œæˆ‘çš„mapä¸­è¿˜æ˜¯å­˜åœ¨å¤§é‡è½¯å¼•ç”¨","like_count":0},{"had_liked":false,"id":17778,"user_name":"July","can_delete":false,"product_type":"c1","uid":1005384,"ip_address":"","ucode":"553873BE26CDA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/48/3da605c6.jpg","comment_is_top":false,"comment_ctime":1532949321,"is_pvip":false,"replies":[{"id":"6316","content":"ä¾‹å­é‡Œæ˜¯è¯´å¯¹è±¡çš„éƒ¨åˆ†å±æ€§å¯èƒ½ä¼šæœ‰å½±å“ï¼Œéå¸¸cornerçš„ä¾‹å­ï¼Œä¹Ÿå°±æ˜¯ç†è®ºä¸Š","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1533141706,"ip_address":"","comment_id":17778,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1532949321","product_id":100006701,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªç–‘é—®ï¼Œå¹³æ—¶ä¹Ÿå†™è¿‡ç±»ä¼¼new Axx().action(); è¿™æ ·çš„ä»£ç ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ‰‹åŠ¨è°ƒç”¨reachabilityFence()æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™æ ·çš„è¯ç†è®ºä¸Šæ˜¯ä¼šæœ‰é—®é¢˜çš„æ˜¯å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421269,"discussion_content":"ä¾‹å­é‡Œæ˜¯è¯´å¯¹è±¡çš„éƒ¨åˆ†å±æ€§å¯èƒ½ä¼šæœ‰å½±å“ï¼Œéå¸¸cornerçš„ä¾‹å­ï¼Œä¹Ÿå°±æ˜¯ç†è®ºä¸Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533141706,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":17721,"user_name":"ç®€ç¹","can_delete":false,"product_type":"c1","uid":1189562,"ip_address":"","ucode":"BBDF8D1DD904A9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/pHPfugzib71JdXkKxRITCzTZXmEnl2KvoVVjmf88SUh5S6x8aTCR30J205YRmak6eyhG6Bg75dyW4raHRW88RuQ/132","comment_is_top":false,"comment_ctime":1532912782,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532912782","product_id":100006701,"comment_content":"è¿˜æ˜¯å¾ˆæ„Ÿè°¢","like_count":0},{"had_liked":false,"id":17494,"user_name":"å°èœé¸Ÿ","can_delete":false,"product_type":"c1","uid":1114659,"ip_address":"","ucode":"16E75180BEFD4B","user_header":"https://static001.geekbang.org/account/avatar/00/11/02/23/bd476313.jpg","comment_is_top":false,"comment_ctime":1532685512,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532685512","product_id":100006701,"comment_content":"è€å¸ˆï¼Œå…³äºå¼•ç”¨ç±»å‹çš„åˆ’åˆ†ï¼åœ¨æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™å¦‚ä½•åŒºåˆ†å‘¢ï¼Ÿæˆ‘æ„Ÿè§‰å¹³æ—¶å†™çš„ä»£ç éƒ½æ˜¯å¼ºå¼•ç”¨ï¼Œæ²¡æœ‰æ¶‰åŠåˆ°å…¶ä»–çš„å¼•ç”¨ç±»å‹ï¼<br>å¯¹äºå„ç§å¼•ç”¨ç±»å‹æ˜¯å¦æœ‰ä»£ç æ ·ä¾‹å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":16903,"user_name":"clz1341521","can_delete":false,"product_type":"c1","uid":1179557,"ip_address":"","ucode":"3BDB4AB454C918","user_header":"https://static001.geekbang.org/account/avatar/00/11/ff/a5/eccc7653.jpg","comment_is_top":false,"comment_ctime":1532305157,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532305157","product_id":100006701,"comment_content":"å¸Œæœ›æ¥å¢åŠ æ¯ç§æƒ…å†µçš„ä½¿ç”¨ç”¨ä¾‹ï¼Œä»¥åŠä½¿ç”¨ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚è¿™æ ·ç»“åˆæ›´æœ‰æ„ä¹‰ã€‚","like_count":0},{"had_liked":false,"id":16707,"user_name":"Starry-","can_delete":false,"product_type":"c1","uid":1177215,"ip_address":"","ucode":"F319A6AD1B7910","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/7f/b7e08221.jpg","comment_is_top":false,"comment_ctime":1532118605,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532118605","product_id":100006701,"comment_content":"è¿˜æ˜¯è‡ªå·±ä¸å¤Ÿä¼˜ç§€ï¼Œæ„Ÿè§‰å¹³æ—¶å†™ä»£ç å¹¶ä¸ä¼šè€ƒè™‘åˆ°è¿™å››ç§å¼•ç”¨ä¹‹é—´çš„åŒºåˆ«ï¼Œæˆ–è€…è¯´é¡¹ç›®ä¸­éƒ½æ˜¯å¼ºå¼•ç”¨ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œä¸çŸ¥é“ä¼šä¸ä¼šå¯¹é¡¹ç›®ä»£ç äº§ç”Ÿå½±å“ï¼Ÿå¦‚æœç­”æ¡ˆæ˜¯é¡¹ç›®ä¸­ä¸ºäº†ä¿è¯é¡¹ç›®æ­£ç¡®è¿è¡Œå¿…é¡»å®šä¹‰å¼ºå¼•ç”¨ï¼Œé‚£ä¹ˆæ—¢ç„¶ä¸å¸¸ç”¨ä¸ºä»€ä¹ˆè¿˜è¦å­˜åœ¨è¿™æ ·çš„æœºåˆ¶ï¼Ÿè€å¸ˆèƒ½çœ‹åˆ°æˆ‘çš„ç•™è¨€çš„è¯ï¼Œè¿˜è¯·ç»™æˆ‘å›å¤å‘€","like_count":0},{"had_liked":false,"id":16551,"user_name":"L99","can_delete":false,"product_type":"c1","uid":1180449,"ip_address":"","ucode":"16FCBA62F388A0","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/21/bcab3032.jpg","comment_is_top":false,"comment_ctime":1532017754,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532017754","product_id":100006701,"comment_content":"å¾ˆå¼ºï¼Œå°ç™½çœ‹ä¸æ‡‚ï¼Œç‚¹ä¸ªèµé™é™çš„å…³é—­äº†ã€‚","like_count":0},{"had_liked":false,"id":13151,"user_name":"åŒ—é£ä¸€å¶","can_delete":false,"product_type":"c1","uid":1087302,"ip_address":"","ucode":"30310E66341D2A","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/46/fe1f21d8.jpg","comment_is_top":false,"comment_ctime":1529409327,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1529409327","product_id":100006701,"comment_content":"è¡¨ç¤ºåªæ‡‚å¼ºå¼•ç”¨","like_count":0},{"had_liked":false,"id":12996,"user_name":"Len","can_delete":false,"product_type":"c1","uid":1022767,"ip_address":"","ucode":"53C623CE17973F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/2f/b7a3625e.jpg","comment_is_top":false,"comment_ctime":1529256929,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1529256929","product_id":100006701,"comment_content":"è€å¸ˆï¼Œåœ¨ Wikipedia ä¸Šæœ‰ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹ï¼š<br>class A {<br>\tWeakReference r = new WeakReference(new String(&quot;Iâ€™m here&quot;));<br><br>\tWeakReference sr = new WeakReference(&quot;Iâ€™m here&quot;);<br><br><br>\tSystem.gc();<br>\tThread.sleep(100);<br><br>\t&#47;&#47; only r.get() becomes null<br>\tSystem.out.println(&quot;after gc:r =&quot; + r.get() +          &quot;,static=&quot; + sr.get());<br>}<br><br>Java 8 ç¯å¢ƒè¿è¡Œä¹‹åï¼Œ r.get() è¿”å› nullï¼Œä½†æ˜¯ sr.get() ä¸è¿”å› nullã€‚<br><br>è€å¸ˆï¼Œå¯¹ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘æœ‰ 2 ä¸ªç–‘æƒ‘ã€‚<br><br>1.æˆ‘å¯¹ sr ä¸è¿”å› null çš„ç†è§£æ˜¯ï¼š<br>å› ä¸º sr ç›´æ¥å¼•ç”¨çš„å¸¸é‡æ± ä¸­çš„å­—é¢é‡ &quot;Iâ€™m here&quot;ï¼Œè€Œå¸¸é‡æ± å¯¹è¿™ä¸ªå­—é¢é‡æœ¬èº«ä¹Ÿæœ‰å¼•ç”¨ï¼Œæ‰€ä»¥æ— æ³•å›æ”¶ã€‚<br><br>è¿™æ ·ç†è§£å¯¹å—ï¼Ÿ<br><br>2.åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå‡å¦‚æ²¡æœ‰ srï¼Œä¹Ÿå³ä»£ç å˜ä¸ºï¼š<br>class A {<br>\tWeakReference r = new WeakReference(new String(&quot;Iâ€™m here&quot;));<br><br>\tSystem.gc();<br>\tThread.sleep(100);<br><br>\t&#47;&#47; only r.get() becomes null<br>\tSystem.out.println(&quot;after gc:r =&quot; + r.get());<br>}<br>åœ¨è¿™ä¸ªç±»ä¸­ï¼Œåœ¨ System.gc å‰æœ‰ 3 ä¸ªå¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯ rã€string å¯¹è±¡ã€å¸¸é‡æ± ä¸­çš„ &quot;Iâ€™m here&quot;ã€‚<br>é‚£ä¹ˆï¼Œåœ¨ gc ä¹‹åï¼Œå¸¸é‡æ± ä¸­çš„ &quot;Iâ€™m here&quot; ä¼šè¢«åƒåœ¾å›æ”¶å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":12546,"user_name":"æ¡.","can_delete":false,"product_type":"c1","uid":1034776,"ip_address":"","ucode":"2811BFD1A538FC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ca/18/c74ce7b7.jpg","comment_is_top":false,"comment_ctime":1528902934,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528902934","product_id":100006701,"comment_content":"è€å¸ˆï¼Œå¯ä»¥ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹è¿™äº›å¼•ç”¨çš„ä½¿ç”¨åœºæ™¯ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":12270,"user_name":"chris","can_delete":false,"product_type":"c1","uid":1109640,"ip_address":"","ucode":"6663E3E09457E3","user_header":"https://static001.geekbang.org/account/avatar/00/10/ee/88/a890b41e.jpg","comment_is_top":false,"comment_ctime":1528736814,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1528736814","product_id":100006701,"comment_content":"è¿™å››ç§å¼•ç”¨é™¤äº†å¼ºå¼•ç”¨ï¼Œå…¶ä»–çš„ç¡®å®äº†è§£ç”šå°‘ï¼Œä»Šå¤©ä¸€çœ‹ç¡®å®å—ç›ŠåŒªæµ…ï¼","like_count":0},{"had_liked":false,"id":12122,"user_name":"vincentjia","can_delete":false,"product_type":"c1","uid":1005699,"ip_address":"","ucode":"EC26D23594600D","user_header":"","comment_is_top":false,"comment_ctime":1528602374,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528602374","product_id":100006701,"comment_content":"å¸Œæœ›èƒ½æœ‰å®ä¾‹ï¼ˆä»£ç ã€ä¼ªä»£ç ï¼‰ï¼Œæ›´ç›´è§‚ã€æ›´ç†è§£ã€‚å¦‚æœç¯‡å¹…æ‰€é™ï¼Œæ˜¯å¦å¯ä»¥é“¾æ¥åˆ°ä½ çš„åšå®¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":11647,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1061767,"ip_address":"","ucode":"86F679C62B90AA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epTXXDNFFe90dwTK2s5PxeuYn3MOLvfU6YLQ0uxuf9bXI8dWXgib5LRnOwk1uWiaDHqIGibOKyU4x3CQ/132","comment_is_top":false,"comment_ctime":1528260784,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528260784","product_id":100006701,"comment_content":"ç„¶åä¸ºä»€ä¹ˆThreadLocalMapçš„Entryæ˜¯å¼±å¼•ç”¨å‘¢ï¼Ÿæ˜¯removeåä¸‹ä¸€æ¬¡gcå°±ä¼šç«‹åˆ»é‡Šæ”¾ç¼“å­˜å§ï¼Ÿé‚£ä¸ºä»€ä¹ˆæ™®é€šçš„Mapçš„entryåˆä¸æ˜¯å¼±å¼•ç”¨ï¼Ÿæ™®é€šçš„mapå°±ä¸éœ€è¦æŠŠentryè®¾ç½®ä¸ºå¼±å¼•ç”¨ï¼Ÿè¿™ä¸ªåŒºåˆ«åœ¨å“ªï¼Ÿ","like_count":0},{"had_liked":false,"id":11624,"user_name":"Ethan","can_delete":false,"product_type":"c1","uid":1061767,"ip_address":"","ucode":"86F679C62B90AA","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epTXXDNFFe90dwTK2s5PxeuYn3MOLvfU6YLQ0uxuf9bXI8dWXgib5LRnOwk1uWiaDHqIGibOKyU4x3CQ/132","comment_is_top":false,"comment_ctime":1528250480,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1528250480","product_id":100006701,"comment_content":"è€å¸ˆæœ‰ä¸€ä¸ªåœ°æ–¹æˆ‘ä¸çŸ¥é“æœ‰æ²¡ç†è§£æ­£ç¡®ï¼šCleanerå°±æ˜¯ç»™å¯¹è±¡è®¾ç½®ä¸€ä¸ªPhantomReferenceï¼Œåœ¨å¯¹è±¡è¢«å›æ”¶å‰ä¼šè¢«jvmæ”¾è¿›pendingé˜Ÿåˆ—ï¼ŒReferenceHandlerä¼šåœ¨çœ‹åˆ°è¿™ä¸ªå¹»è±¡å¼•ç”¨æ˜¯Cleaneræ—¶ç‰¹æ®Šå¤„ç†ï¼Œä¸åŠ å…¥é˜Ÿåˆ—è€Œæ˜¯è°ƒç”¨ä»–çš„cleanæ–¹æ³•","like_count":0},{"had_liked":false,"id":11554,"user_name":"è‹±è€€","can_delete":false,"product_type":"c1","uid":1113425,"ip_address":"","ucode":"5E886F004BF6C2","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/51/7f75a232.jpg","comment_is_top":false,"comment_ctime":1528198981,"is_pvip":true,"replies":[{"id":"3716","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1528217562,"ip_address":"","comment_id":11554,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1528198981","product_id":100006701,"comment_content":"è¯·é—®ä¸€ä¸‹æ¨è€å¸ˆï¼Œèƒ½å¦ç¨å¾®è¯¦è°ˆä¸€ä¸‹çš„post-mortemæœºåˆ¶ï¼ŸæŒ‡çš„æ˜¯å¹»è±¡å¼•ç”¨+å¼•ç”¨é˜Ÿåˆ—è¿™ä¸€å¥—æœºåˆ¶å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":418897,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1528217562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":9655,"user_name":"ipofss","can_delete":false,"product_type":"c1","uid":1018620,"ip_address":"","ucode":"DE3061C9259F9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","comment_is_top":false,"comment_ctime":1527004709,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1527004709","product_id":100006701,"comment_content":"å¸Œæœ›èƒ½å¤Ÿå¬åˆ°è€å¸ˆçš„åŸå£°ï¼Œåˆ«äººçš„æœ—è¯»æ„Ÿè§‰æœ‰ç‚¹ç”Ÿç¡¬ã€‚è¿˜æœ‰ï¼Œå¯¹äºæ¦‚å¿µçš„è§£é‡Šï¼Œå’Œä»£ç çš„å±•ç¤ºï¼Œå¯ä»¥è´´ä¸ªé“¾æ¥ã€‚è°¢è°¢è€å¸ˆçš„åˆ†äº«","like_count":0},{"had_liked":false,"id":9556,"user_name":"è€å®äººHoney","can_delete":false,"product_type":"c1","uid":1080653,"ip_address":"","ucode":"EA4AB5C0C33090","user_header":"https://static001.geekbang.org/account/avatar/00/10/7d/4d/d98865b2.jpg","comment_is_top":false,"comment_ctime":1526951492,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1526951492","product_id":100006701,"comment_content":"apache commons pool å¯¹è±¡æ± æœ‰æä¾›SoftReferencePoolå®ç°","like_count":0},{"had_liked":false,"id":9464,"user_name":"kk","can_delete":false,"product_type":"c1","uid":1124038,"ip_address":"","ucode":"57F66E71F43251","user_header":"https://static001.geekbang.org/account/avatar/00/11/26/c6/31d3a52e.jpg","comment_is_top":false,"comment_ctime":1526889927,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526889927","product_id":100006701,"comment_content":"å¹³æ—¶å¼€å‘éƒ½æ˜¯ä¸Šå±‚åº”ç”¨ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯è°ƒç”¨å¼€æºåº“ï¼Œè¿™äº›ç¨å¾®åº•å±‚çš„æŠ€æœ¯ä»¥åŠå’Œæ€§èƒ½ç›¸å…³çš„æŠ€æœ¯å®ç°ï¼Œéƒ½æ˜¯è°ƒç”¨åº“æ¥åšçš„ï¼Œé‡åˆ°æ¯”è¾ƒå¤šçš„å°±æ˜¯å¼ºå¼•ç”¨ï¼Œå’Œå¼±å¼•ç”¨ã€‚çœ‹äº†ä¸ªæŠŠå°æ—¶å¯¹åé¢çš„å‡ ä¸ªçŸ¥è¯†ç‚¹éƒ½å¾ˆé™Œç”Ÿï¼Œå¸Œæœ›èƒ½æŒ‡å¯¼ä¸€ä¸‹ï¼Œæƒ³è¦æ›´å…¨é¢çš„äº†è§£è¿™äº›çŸ¥è¯†ç‚¹ï¼Œåº”è¯¥åšå“ªäº›æ–¹é¢çš„å‡†å¤‡","like_count":0},{"had_liked":false,"id":9440,"user_name":"Miaozhe","can_delete":false,"product_type":"c1","uid":1113660,"ip_address":"","ucode":"62872E8C138B67","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/3c/13175251.jpg","comment_is_top":false,"comment_ctime":1526872059,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526872059","product_id":100006701,"comment_content":"å…³æ³¨<br>2018-05-18ä½œè€…å›å¤ç©ºçš„Finalizeå®ç°ï¼Œä¸ä¼šèµ·ä½œç”¨çš„ï¼›<br>Finalizeræ˜¯æ‡’å®¶ä¼™ï¼Œè¯•è¯•system.runfinalizationï¼›<br><br>å°è¯•åï¼Œè¿˜æ˜¯ä¸è¡Œã€‚<br>æˆ‘æµ‹è¯•å‘ç°ï¼Œè‡ªå®šä¹‰çš„finalizeåªè¦æœ‰ä»»ä½•å˜é‡æˆ–å¯¹è±¡å®šä¹‰ï¼Œéƒ½ä¸ä¼šè¿›å…¥Reference Queueï¼Œæ€€ç–‘æ˜¯ï¼Œä»¥ä¸ºçº§è”ä¾èµ–çš„é—®é¢˜ï¼Œå°±æ˜¯è¯´Finalizeæ–¹æ³•ä¸­ï¼Œæœ‰æœªè¢«å›æ”¶çš„å¯¹è±¡ï¼Œé‚£ä¹ˆFinalizeæ‰€åœ¨çš„å¯¹è±¡ï¼Œå°±ä¸ä¼šè¢«å›æ”¶ã€‚","like_count":0},{"had_liked":false,"id":9262,"user_name":"ls","can_delete":false,"product_type":"c1","uid":1007293,"ip_address":"","ucode":"6C14A1D24DDC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5e/bd/e28f8ce5.jpg","comment_is_top":false,"comment_ctime":1526711116,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526711116","product_id":100006701,"comment_content":"æŒ‰GCå±‚é¢è‡ªå·±çš„ç†è§£ï¼šå¼ºå¼•ç”¨æ˜¯å®æ„¿æŠ›OOMå¼‚å¸¸ä¹Ÿä¸ä¼šå›æ”¶çš„å¯¹è±¡ï¼›è½¯å¼•ç”¨æ˜¯å†…å­˜ä¸è¶³æ—¶ä¼šå»å›æ”¶çš„å¯¹è±¡ï¼›å¼±å¼•ç”¨åªè¦GCçº¿ç¨‹æœ‰æ‰«æåˆ°å¼±å¼•ç”¨å°±ä¼šè¢«å›æ”¶ï¼›è€Œä¸€ä¸ªå¯¹è±¡åªæœ‰è™šå¼•ç”¨ï¼Œç­‰äºæ²¡æœ‰å¼•ç”¨ä¸€æ ·ï¼Œéšæ—¶è¢«GCå›æ”¶ï¼›<br><br><br>å…³äºå¼•ç”¨ï¼Œæœ€è¿‘Androidæœ‰é‡åˆ°ä¸€ä¸ªå°å‘ï¼›è‡ªå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œé‡Œé¢ new äº†ä¸€ä¸ªå®ä¾‹ A ç»™ a å¼•ç”¨ï¼ˆå¼ºå¼•ç”¨ï¼‰ï¼Œåœ¨å‡½æ•°ä¸­ç”¨ a å»è°ƒç”¨åº•å±‚çš„å‡½æ•°ï¼ˆåº•å±‚å¼€çº¿ç¨‹ï¼Œè€—æ—¶è€—å†…å­˜ï¼‰ï¼Œæ²¡è€ƒè™‘åˆ°å‡½æ•°è¿‡åï¼Œå¼ºå¼•ç”¨å°±å·²ç»è¿‡äº†ä½œç”¨åŸŸï¼Œå½“åº•å±‚åƒå†…å­˜å¤šåè§¦å‘äº† GC æŠŠè¿™ä¸ªå¼•ç”¨å’Œå¯¹è±¡å›æ”¶äº†ï¼›è€ŒBå¯¹è±¡å¼•ç”¨æ˜¯åœ¨ a å¼•ç”¨é“¾åº•ä¸‹ï¼Œå½“é¡¶å±‚å¼•ç”¨è¢«å›æ”¶äº†ï¼ŒBä¹Ÿä¼šè¢«å›æ”¶ï¼ŒB é‡å†™çš„ finalize å‡½æ•°åˆæŠŠåº•å±‚çš„çº¿ç¨‹ç»™ kill äº†ï¼›å¯¼è‡´å‡½æ•°è°ƒç”¨äº†ï¼Œä½†cå±‚çš„ä»£ç åœ¨ä¸€æ®µæ—¶é—´åï¼ˆå†…å­˜ç´§å¼ è¢«GCï¼‰å°±ä¸èµ·ä½œç”¨ï¼›æ²¡åŸºç¡€çœŸå¯æ€•ï¼Œèµ¶ç´§ç¿»çœ‹è¿™è®²å’Œä¸Šè®²çš„æ–‡ç« è¡¥è¡¥åŸºç¡€ï¼›<br><br>","like_count":0},{"had_liked":false,"id":9230,"user_name":"Nemo","can_delete":false,"product_type":"c1","uid":1126566,"ip_address":"","ucode":"1DDEDF9680D651","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/a6/0dca2856.jpg","comment_is_top":false,"comment_ctime":1526698667,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526698667","product_id":100006701,"comment_content":"try { &#47;&#47; éœ€è¦è¢«ä¿æŠ¤çš„ä»£ç <br> int i = myIndex; Resource.update(externalResourceArray[i]); <br>} finally {<br> &#47;&#47; è°ƒç”¨ reachbilityFenceï¼Œæ˜ç¡®ä¿éšœå¯¹è±¡ strongly reachable Reference.reachabilityFence(this); <br>}<br>è€å¸ˆè¿™æ®µä»£ç finallyä¸­æŒ‡å®šå¼ºå¯è¾¾å¯ä»¥ç†è§£ï¼Œä¸è¿‡å¦‚æœactionæ‰§è¡Œç»“æŸä»¥åï¼Œè¿™ä¸ªå¼ºå¼•ç”¨ä¼šè¢«é‡Šæ”¾æ‰å—ï¼Ÿåœ¨ä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾ï¼Œè¿˜æ˜¯ä¹Ÿéœ€è¦æ˜¾ç¤ºçš„è°ƒç”¨apié‡Šæ”¾å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":9084,"user_name":"jon","can_delete":false,"product_type":"c1","uid":1113537,"ip_address":"","ucode":"28299C17783414","user_header":"https://static001.geekbang.org/account/avatar/00/10/fd/c1/05e45dba.jpg","comment_is_top":false,"comment_ctime":1526605961,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526605961","product_id":100006701,"comment_content":"å­¦ä¹ äº†ï¼Œå¯æ˜¯é™¤äº†å¼ºå¼•ç”¨å¹³æ—¶åœ¨ç”¨ï¼Œå…¶ä»–å¼•ç”¨è¦æ€ä¹ˆç”¨å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":8990,"user_name":"arthur","can_delete":false,"product_type":"c1","uid":1116981,"ip_address":"","ucode":"EAD9D9D2837C5F","user_header":"https://static001.geekbang.org/account/avatar/00/11/0b/35/2c56c29c.jpg","comment_is_top":false,"comment_ctime":1526562130,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526562130","product_id":100006701,"comment_content":"æ¨è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æ˜¯æµ‹è¯•äººå‘˜ï¼Œçœ‹æ‡‚äº†è¿™äº›çŸ¥è¯†ç‚¹ï¼Œä½†å¹³æ—¶å¤§éƒ½åªæµ‹è¯•è„šæœ¬ï¼Œä¸ä¼šå»å®ç°åŠŸèƒ½ï¼Œæ‰€ä»¥å¯¹åº”ç”¨åœºæ™¯ä¸æ˜¯å¾ˆäº†è§£ï¼Œå¸Œæœ›è€å¸ˆèƒ½å¤šç»™ä¸€äº›å®ä¾‹ï¼Œä¸¾ä¸€äº›ä»£ç çš„ä¾‹å­ï¼Œæ–¹ä¾¿åƒæˆ‘è¿™äº›åŸºç¡€æ¯”è¾ƒå·®çš„åŒå­¦å­¦ä¹ ","like_count":0},{"had_liked":false,"id":8966,"user_name":"Miaozhe","can_delete":false,"product_type":"c1","uid":1113660,"ip_address":"","ucode":"62872E8C138B67","user_header":"https://static001.geekbang.org/account/avatar/00/10/fe/3c/13175251.jpg","comment_is_top":false,"comment_ctime":1526547764,"is_pvip":false,"replies":[{"id":"2695","content":"æ–‡ç« å›¾é‡Œé˜æ˜äº†ï¼Œå¹»è±¡å¼•ç”¨enqueå‘ç”Ÿåœ¨finalizeä¹‹åï¼Œä½ æŸ¥æŸ¥æ˜¯ä¸æ˜¯å¡åœ¨FinalReference queueé‡Œäº†ï¼Œé‚£æ˜¯å®ç°finalizationçš„åœ°æ–¹","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526593835,"ip_address":"","comment_id":8966,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1526547764","product_id":100006701,"comment_content":"è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜:æˆ‘è‡ªå·±å®šä¹‰ä¸€ä¸ªç±»ï¼Œé‡å†™finalizeæ–¹æ³•åï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¢«å¹»æƒ³å¼•ç”¨ï¼ŒåŒæ—¶è¯¥å¹»æƒ³å¯¹è±¡ä½¿ç”¨ReferenceQueueã€‚<br>å½“æˆ‘è¿™ä¸ªå¯¹è±¡æŒ‡å‘nullï¼Œè¢«GCå›æ”¶åï¼ŒReferenceQueueä¸­æ²¡æœ‰æ”¹å¯¹è±¡ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿå¦‚æœæˆ‘æŠŠç±»ä¸­çš„finalizeæ–¹æ³•ç§»é™¤ï¼ŒReferenceQueueå°±èƒ½è·å–è¢«é‡Šæ”¾çš„å¯¹è±¡ã€‚","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417923,"discussion_content":"æ–‡ç« å›¾é‡Œé˜æ˜äº†ï¼Œå¹»è±¡å¼•ç”¨enqueå‘ç”Ÿåœ¨finalizeä¹‹åï¼Œä½ æŸ¥æŸ¥æ˜¯ä¸æ˜¯å¡åœ¨FinalReference queueé‡Œäº†ï¼Œé‚£æ˜¯å®ç°finalizationçš„åœ°æ–¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526593835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8950,"user_name":"000","can_delete":false,"product_type":"c1","uid":1052192,"ip_address":"","ucode":"98A810FA164106","user_header":"https://static001.geekbang.org/account/avatar/00/10/0e/20/4a8eb862.jpg","comment_is_top":false,"comment_ctime":1526536671,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1526536671","product_id":100006701,"comment_content":"é™¤äº†å¼ºå¼•ç”¨ï¼Œå…¶ä»–çš„ä¸‰ç§å¹³æ—¶å¼€å‘ä¸­å‡ ä¹æ²¡ä½¿ç”¨è¿‡","like_count":0},{"had_liked":false,"id":8943,"user_name":"è½å¶é£é€çš„æ‹","can_delete":false,"product_type":"c1","uid":1046429,"ip_address":"","ucode":"F9A95DB28BCF1E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f7/9d/be04b331.jpg","comment_is_top":false,"comment_ctime":1526532721,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526532721","product_id":100006701,"comment_content":"å‡ ç§å¼•ç”¨ä¼šæ€ä¹ˆå‡ºç°ç›¸äº’è½¬åŒ–","like_count":0},{"had_liked":false,"id":8803,"user_name":"æˆ","can_delete":false,"product_type":"c1","uid":1121547,"ip_address":"","ucode":"E9B9535881D48C","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/0b/25742bed.jpg","comment_is_top":false,"comment_ctime":1526450989,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526450989","product_id":100006701,"comment_content":"æœ‰ä¸ªå…³äºnew Resource().action()çš„é—®é¢˜ï¼Œåœ¨actionæ–¹æ³•é‡Œéšå¼çš„thisä¸å°±è¯´æ˜äº†å¯è¾¾æ€§å—ï¼Ÿæœ›è§£ç­”","like_count":0},{"had_liked":false,"id":8729,"user_name":"fly","can_delete":false,"product_type":"c1","uid":1127349,"ip_address":"","ucode":"02E2AD0059D3C1","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/b5/ee3febd6.jpg","comment_is_top":false,"comment_ctime":1526389035,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526389035","product_id":100006701,"comment_content":"æˆ‘ä»¬ä¸€èˆ¬æ‰€è¯´çš„å†…å­˜æ³„æ¼æ˜¯éå†gcrootsï¼Œé‚£æ³„æ¼çš„å¯¹è±¡æ˜¯åœ¨gcrootsä¸Šçš„ï¼Œæ€ä¹ˆåˆ¤å®šå¯¹è±¡æ³„æ¼äº†å‘¢ï¼Ÿæ³„æ¼å¯¹è±¡å’Œæœªæ³„æ¼å¯¹è±¡æœ‰ä¸åŒçš„æ ‡å¿—å—ï¼Ÿ<br>ç­‰å¾…è€å¸ˆçš„è§£ç­”<br>","like_count":0},{"had_liked":false,"id":8684,"user_name":"å¼ å‹‡","can_delete":false,"product_type":"c1","uid":1120890,"ip_address":"","ucode":"F0C1A539442510","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/7a/5ffb9d63.jpg","comment_is_top":false,"comment_ctime":1526369976,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526369976","product_id":100006701,"comment_content":"åˆ›å»ºä¸€ä¸ªStudentçš„å¼ºå¼•ç”¨å¯¹è±¡stuï¼› Student stu=new Student(å°ç‹&quot;,3); åˆ›å»ºä¸€ä¸ªå¼±å¼•ç”¨æŒ‡å‘Student SoftReference&lt;Student&gt; softReference=new SoftReference&lt;Student&gt;(stu); é—®é¢˜1 æ­¤æ—¶å¦‚æœstuä¸æˆ‘ä¸æ‰‹åŠ¨çš„ç½®æˆstu=nullï¼Œå°±ç®—gcå¿«è¦å‘ç”ŸOOMçš„æ—¶å€™ä¹Ÿä¸ä¼šå›æ”¶è¿™ä¸ªStudentå¯¹è±¡å› ä¸ºå®ƒè¿˜æŒæœ‰ä¸€ä¸ªå¼ºå¼•ç”¨stuï¼Œè¿™å¥è¯å¯¹ä¸å¯¹ï¼Ÿ é—®é¢˜2 å¦‚æœstuæˆ‘ç½®æ¢æˆäº†stu=nullï¼Œæ­¤æ—¶åªæœ‰å¼±å¼•ç”¨æŒ‡å‘è¿™ä¸ªstudentè¿™ä¸ªæ—¶å€™å½“å†…å­˜ä¸è¶³å¿«è¦å‘ç”ŸOOMçš„æ—¶å€™gcä¼šå›æ”¶Studentå ç”¨çš„è¿™å—å†…å­˜ï¼Œè¿™å¥è¯å¯¹ä¸å¯¹ï¼Ÿ é—®é¢˜3ï¼Œå¦‚æœæˆ‘ä»å¼±å¼•ç”¨ä¸­è·å–æˆ‘è¿™ä¸ªStudentå¯¹è±¡ï¼Œå†™æˆ if(softReference.get()!=null) Student student=softReference.get();,æ­¤æ—¶è¿™ä¸ªstudentæ˜¯å¼ºå¼•ç”¨è¿˜æ˜¯å¼±å¼•ç”¨ï¼Œå¦‚æœæ˜¯å¼ºå¼•ç”¨æ˜¯ä¸æ˜¯ç”¨å®Œä»¥åéœ€è¦å†™æˆstudent==null,å¦‚æœä¸å†™student==nullè¿™å¥ gcå¿«è¦å‘ç”ŸOOMçš„æ—¶å€™ä¹Ÿä¸ä¼šå›æ”¶è¿™ä¸ªStudentå¯¹è±¡,ä¸‹æ¬¡å¦‚æœç»§ç»­ä½¿ç”¨è¿™ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯ç”¨åŒæ ·çš„æ–¹æ³•if(softReference.get()!=null) Student student=softReference.get();åœ¨è·å–è¿™ä¸ªå¯¹è±¡<br><br>è€å¸ˆæˆ‘è¿™ä¸ªä¾‹å­æ˜¯é’ˆå¯¹å…¨å±€å˜é‡çš„ï¼Œå¦‚æœæ˜¯å…¨å±€å˜é‡æˆ‘ä¸Šé¢çš„é—®é¢˜å¸®æˆ‘è§£ç­”ä¸‹ï¼Œè°¢è°¢","like_count":0},{"had_liked":false,"id":8667,"user_name":"å¼ å‹‡","can_delete":false,"product_type":"c1","uid":1120890,"ip_address":"","ucode":"F0C1A539442510","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/7a/5ffb9d63.jpg","comment_is_top":false,"comment_ctime":1526359074,"is_pvip":false,"replies":[{"id":"2584","content":"ä½ è¿™å‡ ä¸ªä¾‹å­ç”¨çš„éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Ÿè¿™æ˜¯æœ‰ä½œç”¨åŸŸçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526369634,"ip_address":"","comment_id":8667,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1526359074","product_id":100006701,"comment_content":"   åˆ›å»ºä¸€ä¸ªStudentçš„å¼ºå¼•ç”¨å¯¹è±¡stuï¼›\r        Student stu=new Student(å°ç‹&quot;,3);\r\r        åˆ›å»ºä¸€ä¸ªå¼±å¼•ç”¨æŒ‡å‘Student\r        SoftReference&lt;Student&gt; softReference=new SoftReference&lt;Student&gt;(stu);\r        é—®é¢˜1 æ­¤æ—¶å¦‚æœstuä¸æˆ‘ä¸æ‰‹åŠ¨çš„ç½®æˆstu=nullï¼Œå°±ç®—gcå¿«è¦å‘ç”ŸOOMçš„æ—¶å€™ä¹Ÿä¸ä¼šå›æ”¶è¿™ä¸ªStudentå¯¹è±¡å› ä¸ºå®ƒè¿˜æŒæœ‰ä¸€ä¸ªå¼ºå¼•ç”¨stuï¼Œè¿™å¥è¯å¯¹ä¸å¯¹ï¼Ÿ\r        é—®é¢˜2 å¦‚æœstuæˆ‘ç½®æ¢æˆäº†stu=nullï¼Œæ­¤æ—¶åªæœ‰å¼±å¼•ç”¨æŒ‡å‘è¿™ä¸ªstudentè¿™ä¸ªæ—¶å€™å½“å†…å­˜ä¸è¶³å¿«è¦å‘ç”ŸOOMçš„æ—¶å€™gcä¼šå›æ”¶Studentå ç”¨çš„è¿™å—å†…å­˜ï¼Œè¿™å¥è¯å¯¹ä¸å¯¹ï¼Ÿ\r       \r        é—®é¢˜3ï¼Œå¦‚æœæˆ‘ä»å¼±å¼•ç”¨ä¸­è·å–æˆ‘è¿™ä¸ªStudentå¯¹è±¡ï¼Œå†™æˆ if(softReference.get()!=null) Student student=softReference.get();,æ­¤æ—¶è¿™ä¸ªstudentæ˜¯å¼ºå¼•ç”¨è¿˜æ˜¯å¼±å¼•ç”¨ï¼Œå¦‚æœæ˜¯å¼ºå¼•ç”¨æ˜¯ä¸æ˜¯ç”¨å®Œä»¥åéœ€è¦å†™æˆstudent==null,å¦‚æœä¸å†™student==nullè¿™å¥\r        gcå¿«è¦å‘ç”ŸOOMçš„æ—¶å€™ä¹Ÿä¸ä¼šå›æ”¶è¿™ä¸ªStudentå¯¹è±¡,ä¸‹æ¬¡å¦‚æœç»§ç»­ä½¿ç”¨è¿™ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯ç”¨åŒæ ·çš„æ–¹æ³•if(softReference.get()!=null) Student student=softReference.get();åœ¨è·å–è¿™ä¸ªå¯¹è±¡","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417814,"discussion_content":"ä½ è¿™å‡ ä¸ªä¾‹å­ç”¨çš„éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Ÿè¿™æ˜¯æœ‰ä½œç”¨åŸŸçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526369634,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8624,"user_name":"xuejian.sun","can_delete":false,"product_type":"c1","uid":1046667,"ip_address":"","ucode":"1970D91675122C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/8b/dc3dc04d.jpg","comment_is_top":false,"comment_ctime":1526347999,"is_pvip":false,"replies":[{"id":"2580","content":"ä¸å¤ªæ¸…æ¥šé—®é¢˜ï¼Œåªå°‘removeä»¥åA Bå¯¹è±¡éƒ½å’Œmapæ²¡å…³ç³»äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526369132,"ip_address":"","comment_id":8624,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1526347999","product_id":100006701,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œmapä¸­æœ‰ä¸ªæ™®é€šç±»Aï¼ŒAä¸­å¼•ç”¨äº†ä¸€ä¸ªiocç®¡ç†çš„Bï¼Œmap.removeï¼ˆAï¼‰åè¿™ä¸ªAä¼šè¢«GCå—<br><br>","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417799,"discussion_content":"ä¸å¤ªæ¸…æ¥šé—®é¢˜ï¼Œåªå°‘removeä»¥åA Bå¯¹è±¡éƒ½å’Œmapæ²¡å…³ç³»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526369132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8539,"user_name":"å¼ å‹‡","can_delete":false,"product_type":"c1","uid":1120890,"ip_address":"","ucode":"F0C1A539442510","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/7a/5ffb9d63.jpg","comment_is_top":false,"comment_ctime":1526306627,"is_pvip":false,"replies":[{"id":"2572","content":"å–å†³äºä»€ä¹ˆæ—¶å€™é‡Šæ”¾ï¼Œå¦‚æœä¸€ç›´ä¿æŒç€ï¼Œå°±å¯èƒ½æ˜¯å†…å­˜æ³„éœ²çš„æ¥æºäº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526368141,"ip_address":"","comment_id":8539,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1526306627","product_id":100006701,"comment_content":"å¯¹è±¡ä»è½¯æˆ–è€…å¼±å¼•ç”¨å˜æˆå¼ºå¼•ç”¨åå¯¹è±¡è¿˜ä¼šè¢«gcå›æ”¶å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417767,"discussion_content":"å–å†³äºä»€ä¹ˆæ—¶å€™é‡Šæ”¾ï¼Œå¦‚æœä¸€ç›´ä¿æŒç€ï¼Œå°±å¯èƒ½æ˜¯å†…å­˜æ³„éœ²çš„æ¥æºäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526368141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8526,"user_name":"å¼ å‹‡","can_delete":false,"product_type":"c1","uid":1120890,"ip_address":"","ucode":"F0C1A539442510","user_header":"https://static001.geekbang.org/account/avatar/00/11/1a/7a/5ffb9d63.jpg","comment_is_top":false,"comment_ctime":1526298465,"is_pvip":false,"replies":[{"id":"2533","content":"ä¼šï¼Œå»ºè®®å»ç†è§£ä¸‹å±€éƒ¨å˜é‡ä½œç”¨åŸŸ","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526344387,"ip_address":"","comment_id":8526,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1526298465","product_id":100006701,"comment_content":"è‹¥æœæˆ‘ä¸€ä¸ªå¼ºå¼•ç”¨çš„å¯¹è±¡åªæ˜¯newå‡ºæ¥ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨newå‡ºæ¥çš„è¿™ä¸ªå¯¹è±¡ï¼Œgcä¹Ÿä¸ä¼šå›æ”¶è¿™ä¸ªå¯¹è±¡å—ï¼Ÿeg : Animal  an=new Animal();  anè¿™ä¸ªå¯¹è±¡æˆ‘åœ¨ç¨‹åºä¸­å¹¶ä¸ä½¿ç”¨ï¼Œæ˜¯ä¸æ˜¯gcä¸ä¼šå›æ”¶è¿™ä¸ªå¯¹è±¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417761,"discussion_content":"ä¼šï¼Œå»ºè®®å»ç†è§£ä¸‹å±€éƒ¨å˜é‡ä½œç”¨åŸŸ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526344387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8505,"user_name":"å¤èŒ¶","can_delete":false,"product_type":"c1","uid":1123978,"ip_address":"","ucode":"9348FC873129F8","user_header":"https://static001.geekbang.org/account/avatar/00/11/26/8a/c51a1f81.jpg","comment_is_top":false,"comment_ctime":1526275502,"is_pvip":false,"replies":[{"id":"2522","content":"ä¸æ˜¯å›æ”¶ï¼Œæ˜¯jvmåˆ¤æ–­å¯¹è±¡å¤„äºsoft reachableï¼Œç«‹å³æˆ–è€…è¿‡ä¸€ä¼šå„¿enqueueåˆ°é˜Ÿåˆ—é‡Œ","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526276929,"ip_address":"","comment_id":8505,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1526275502","product_id":100006701,"comment_content":"æ¨è€å¸ˆæˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œæƒ³è¯·æ‚¨å¸®æˆ‘è§£æƒ‘ä¸‹ï¼Œè°¢è°¢ï¼Œä»£ç è£è€€è¯´äº†ä¸€å¥â€œå¦‚æœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªè½¯å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­â€ï¼Œå¯¹è±¡è¢«åƒåœ¾å›æ”¶äº†ï¼ŒæŠŠè½¯å¼•ç”¨åŠ å…¥åˆ°é˜Ÿåˆ—é‡Œï¼Œé‚£è¿™é‡Œçš„è½¯å¼•ç”¨æ˜¯å¯¹è±¡å—ï¼Œå¦‚æœæ˜¯å¯¹è±¡æ˜¯ä»€ä¹ˆå¯¹è±¡ï¼Œè¿˜èƒ½ä¸èƒ½å–åˆ°è½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417750,"discussion_content":"ä¸æ˜¯å›æ”¶ï¼Œæ˜¯jvmåˆ¤æ–­å¯¹è±¡å¤„äºsoft reachableï¼Œç«‹å³æˆ–è€…è¿‡ä¸€ä¼šå„¿enqueueåˆ°é˜Ÿåˆ—é‡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526276929,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8486,"user_name":"Douglas","can_delete":false,"product_type":"c1","uid":1073027,"ip_address":"","ucode":"CFDE3D76B9DAE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/83/bb728e53.jpg","comment_is_top":false,"comment_ctime":1526261120,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526261120","product_id":100006701,"comment_content":"å¤§ç¥å¤šæ¥ç‚¹å¹²è´§å•Šï¼Œåº•å±‚çš„ä¸œè¥¿å¤ªæŠ½è±¡äº†ï¼Œçœ‹å®Œè¿˜æ˜¯æ²¡æ˜ç™½","like_count":0},{"had_liked":false,"id":8360,"user_name":"ç‹ç£Š","can_delete":false,"product_type":"c1","uid":1050085,"ip_address":"","ucode":"A4DE9804642A08","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/e5/aa579968.jpg","comment_is_top":false,"comment_ctime":1526116505,"is_pvip":false,"replies":[{"id":"2525","content":"è°¢è°¢åé¦ˆï¼Œ<br>1ï¼Œ2ï¼Œä¸é”™ï¼Œç”»çš„æ¯”è¾ƒç²—ç³™ï¼Œæ³¨æ˜äº†ä¸é‚£ä¹ˆä¸¥è°¨ï¼Œä¸»è¦æ˜¯ä¸ªæ¸…æ¥šçš„ç¤ºæ„ï¼›<br>3ï¼Œä¸æ˜¯çš„ï¼ŒJavaspecæ¸…æ¥šè¦æ±‚å¦‚æ­¤ï¼›å¯¹è±¡å¤„äºæŸç§å¯è¾¾çŠ¶æ€ï¼Œä¸æ˜¯è¯´æœ‰é‚£ç§å¼•ç”¨ï¼Œæ˜¯æ²¡æœ‰å…¶ä»–æ›´â€œå¼ºâ€çš„å¼•ç”¨å…³ç³»ï¼›finalizeå¦‚æœæ²¡æœ‰é‡æ–°ä¸ä¼šæ‰§è¡Œï¼Œä½†é€»è¾‘é¡ºåºä¸å˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526277742,"ip_address":"","comment_id":8360,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1526116505","product_id":100006701,"comment_content":"1.&#39;å¯¹è±¡å¯è¾¾æ€§çŠ¶æ€æµè½¬åˆ†æ&#39;ç« èŠ‚å›¾ç¤ºæ˜¯å¼ºè½¯å¼±å¹»è±¡å¼•ç”¨ï¼Œè€Œæ–‡å­—è¯´çš„æ˜¯å¼ºè½¯å¼±å¹»è±¡å¯è¾¾ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥éƒ½æ˜¯å¯è¾¾? <br>2. å¦å¤–ï¼Œæˆ‘æ³¨æ„åˆ°è½¯å¯è¾¾å’Œå¼±å¯è¾¾æ˜¯å•å‘çš„ï¼Œä¸èƒ½ä»å¼±åˆ°è½¯ï¼Œè¿™é‡Œèƒ½å¤šè§£é‡Šä¸‹å—?<br>3. è¯´å¹»è±¡å¯è¾¾æ˜¯finalizeä¹‹åçš„ï¼Œè¿™ä¸ªä»€ä¹ˆæ„æ€?æˆ‘ç†è§£åªè¦æ˜¯å¹»è±¡å¼•ç”¨ï¼Œå®ƒå°±æ˜¯å¹»è±¡å¯è¾¾ï¼Œå’Œæ˜¯å¦æ‰§è¡Œäº†finalize()æ²¡æœ‰å…³ç³»<br>è¯·è€å¸ˆè§£æƒ‘","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417685,"discussion_content":"è°¢è°¢åé¦ˆï¼Œ\n1ï¼Œ2ï¼Œä¸é”™ï¼Œç”»çš„æ¯”è¾ƒç²—ç³™ï¼Œæ³¨æ˜äº†ä¸é‚£ä¹ˆä¸¥è°¨ï¼Œä¸»è¦æ˜¯ä¸ªæ¸…æ¥šçš„ç¤ºæ„ï¼›\n3ï¼Œä¸æ˜¯çš„ï¼ŒJavaspecæ¸…æ¥šè¦æ±‚å¦‚æ­¤ï¼›å¯¹è±¡å¤„äºæŸç§å¯è¾¾çŠ¶æ€ï¼Œä¸æ˜¯è¯´æœ‰é‚£ç§å¼•ç”¨ï¼Œæ˜¯æ²¡æœ‰å…¶ä»–æ›´â€œå¼ºâ€çš„å¼•ç”¨å…³ç³»ï¼›finalizeå¦‚æœæ²¡æœ‰é‡æ–°ä¸ä¼šæ‰§è¡Œï¼Œä½†é€»è¾‘é¡ºåºä¸å˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526277742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8356,"user_name":"Hesher","can_delete":false,"product_type":"c1","uid":1026832,"ip_address":"","ucode":"99AB8B1704CB7E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ab/10/b812ff3e.jpg","comment_is_top":false,"comment_ctime":1526113103,"is_pvip":false,"replies":[{"id":"2515","content":"å¾ˆé«˜å…´æœ‰å¸®åŠ©","user_name":"ä½œè€…å›å¤","user_name_real":"æ¨æ™“å³°","uid":"1009360","ctime":1526274720,"ip_address":"","comment_id":8356,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1526113103","product_id":100006701,"comment_content":"è¿™ç¯‡è®²å¾—å¥½ï¼Œä»¥å‰çœ‹ä¹¦ç¼ºå°‘å®é™…ä½¿ç”¨ç»éªŒï¼Œç†è§£ä¸Šæ€»æ˜¯ä¸€çŸ¥åŠè§£æœ€åå¿˜äº†ï¼Œè¿™æ¬¡æ„Ÿè§‰çœ‹å®Œå°±æ˜ç™½äº†ã€‚è¿˜æ˜¯è¦å¤šç»“åˆå®è·µï¼Œæ‰èƒ½çœŸæ­£ç†è§£è¿™äº›å¾ˆå°‘ç”¨åˆ°çš„ä¸œè¥¿ã€‚","like_count":0,"discussions":[{"author":{"id":1009360,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/66/d0/6541f1d5.jpg","nickname":"æ¨æ™“å³°","note":"","ucode":"2BF255467A978F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417683,"discussion_content":"å¾ˆé«˜å…´æœ‰å¸®åŠ©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526274720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8329,"user_name":"ç–¯ç‹‚çš„æŸ´çŠ¬","can_delete":false,"product_type":"c1","uid":1126094,"ip_address":"","ucode":"343AF3A8953C78","user_header":"https://static001.geekbang.org/account/avatar/00/11/2e/ce/b8145a8d.jpg","comment_is_top":false,"comment_ctime":1526094131,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1526094131","product_id":100006701,"comment_content":"æ¯å¤©éƒ½ç­‰ç€æ›´æ–°ï¼Œè®²çš„æŒºç»†çš„ï¼Œwaitingä¸‹ä¸€ä¸ª","like_count":0}]}