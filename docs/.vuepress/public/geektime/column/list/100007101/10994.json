{"id":10994,"title":"ç¬¬27è®² | äº‘ä¸­çš„ç½‘ç»œQoSï¼šé‚»å±…ç–¯ç‹‚ä¸‹ç”µå½±ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ","content":"<p>åœ¨å°åŒºé‡Œé¢ï¼Œæ˜¯ä¸æ˜¯ç»å¸¸æœ‰ä½æˆ·ä¸è‡ªè§‰å°±éœ¸å å…¬å…±é€šé“ï¼Œå¦‚æœä½ æ‰¾ä»–ç†è®ºï¼Œä»–çš„è¯å°±åƒä¸€ä¸ªç›¸å£°ã€Šæ¥¼é“æ›²ã€‹è¯´çš„ä¸€æ ·ï¼šâ€œå…¬ç”¨å…¬ç”¨ï¼Œä½ ç”¨æˆ‘ç”¨ï¼Œå¤§å®¶éƒ½ç”¨ï¼Œæˆ‘ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ï¼Ÿâ€ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œä½ ç§Ÿæˆ¿å­çš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰ç¢°åˆ°è¿™æ ·çš„æƒ…å†µï¼šæœ¬æ¥åˆç§Ÿå…±äº«WiFiï¼Œä¸€ä¸ªäººç‹‚ä¸‹å°ç”µå½±ï¼Œä»è€Œä½ ç½‘éƒ½ä¸Šä¸å»ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ‡Šæ¼ï¼Ÿ</p><p>åœ¨äº‘å¹³å°ä¸Šï¼Œä¹Ÿæœ‰è¿™ç§ç°è±¡ï¼Œå¥½åœ¨æœ‰ä¸€ç§æµé‡æ§åˆ¶çš„æŠ€æœ¯ï¼Œå¯ä»¥å®ç°<strong>QoS</strong>ï¼ˆQuality of Serviceï¼‰ï¼Œä»è€Œä¿éšœå¤§å¤šæ•°ç”¨æˆ·çš„æœåŠ¡è´¨é‡ã€‚</p><p>å¯¹äºæ§åˆ¶ä¸€å°æœºå™¨çš„ç½‘ç»œçš„QoSï¼Œåˆ†ä¸¤ä¸ªæ–¹å‘ï¼Œä¸€ä¸ªæ˜¯å…¥æ–¹å‘ï¼Œä¸€ä¸ªæ˜¯å‡ºæ–¹å‘ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/74/11/747b0d537fd1705171ffcca3faf96211.jpg?wh=1539*646\" alt=\"\"></p><p>å…¶å®æˆ‘ä»¬èƒ½æ§åˆ¶çš„åªæœ‰å‡ºæ–¹å‘ï¼Œé€šè¿‡Shapingï¼Œå°†å‡ºçš„æµé‡æ§åˆ¶æˆè‡ªå·±æƒ³è¦çš„æ¨¡æ ·ã€‚è€Œè¿›å…¥çš„æ–¹å‘æ˜¯æ— æ³•æ§åˆ¶çš„ï¼Œåªèƒ½é€šè¿‡Policyå°†åŒ…ä¸¢å¼ƒã€‚</p><h2>æ§åˆ¶ç½‘ç»œçš„QoSæœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h2><p>åœ¨Linuxä¸‹ï¼Œå¯ä»¥é€šè¿‡TCæ§åˆ¶ç½‘ç»œçš„QoSï¼Œä¸»è¦å°±æ˜¯é€šè¿‡é˜Ÿåˆ—çš„æ–¹å¼ã€‚</p><h3>æ— ç±»åˆ«æ’é˜Ÿè§„åˆ™</h3><p>ç¬¬ä¸€å¤§ç±»ç§°ä¸º<strong>æ— ç±»åˆ«æ’é˜Ÿè§„åˆ™</strong>ï¼ˆClassless Queuing Disciplinesï¼‰ã€‚è¿˜è®°å¾—æˆ‘ä»¬è®²<a href=\"https://time.geekbang.org/column/article/7772\">ip addr</a>çš„æ—¶å€™è®²è¿‡çš„<strong>pfifo_fast</strong>ï¼Œè¿™æ˜¯ä¸€ç§ä¸æŠŠç½‘ç»œåŒ…åˆ†ç±»çš„æŠ€æœ¯ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e3/6c/e391b4b79580a7d66afe4307ff3f6f6c.jpg?wh=2037*1175\" alt=\"\"></p><p>pfifo_faståˆ†ä¸ºä¸‰ä¸ªå…ˆå…¥å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œç§°ä¸ºä¸‰ä¸ªBandã€‚æ ¹æ®ç½‘ç»œåŒ…é‡Œé¢TOSï¼Œçœ‹è¿™ä¸ªåŒ…åˆ°åº•åº”è¯¥è¿›å…¥å“ªä¸ªé˜Ÿåˆ—ã€‚TOSæ€»å…±å››ä½ï¼Œæ¯ä¸€ä½è¡¨ç¤ºçš„æ„æ€ä¸åŒï¼Œæ€»å…±åå…­ç§ç±»å‹ã€‚</p><!-- [[[read_end]]] --><p>é€šè¿‡å‘½ä»¤è¡Œtc qdisc show dev eth0ï¼Œå¯ä»¥è¾“å‡ºç»“æœpriomapï¼Œä¹Ÿæ˜¯åå…­ä¸ªæ•°å­—ã€‚åœ¨0åˆ°2ä¹‹é—´ï¼Œå’ŒTOSçš„åå…­ç§ç±»å‹å¯¹åº”èµ·æ¥ï¼Œè¡¨ç¤ºä¸åŒçš„TOSå¯¹åº”çš„ä¸åŒçš„é˜Ÿåˆ—ã€‚å…¶ä¸­Band 0ä¼˜å…ˆçº§æœ€é«˜ï¼Œå‘é€å®Œæ¯•åæ‰è½®åˆ°Band 1å‘é€ï¼Œæœ€åæ‰æ˜¯Band 2ã€‚</p><p>å¦å¤–ä¸€ç§æ— ç±»åˆ«é˜Ÿåˆ—è§„åˆ™å«ä½œ<strong>éšæœºå…¬å¹³é˜Ÿåˆ—</strong>ï¼ˆStochastic Fair Queuingï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b6/99/b6ec2e4e20ddee7d6952b7fa4586ba99.jpg?wh=2177*1182\" alt=\"\"></p><p>ä¼šå»ºç«‹å¾ˆå¤šçš„FIFOçš„é˜Ÿåˆ—ï¼ŒTCP Sessionä¼šè®¡ç®—hashå€¼ï¼Œé€šè¿‡hashå€¼åˆ†é…åˆ°æŸä¸ªé˜Ÿåˆ—ã€‚åœ¨é˜Ÿåˆ—çš„å¦ä¸€ç«¯ï¼Œç½‘ç»œåŒ…ä¼šé€šè¿‡è½®è¯¢ç­–ç•¥ä»å„ä¸ªé˜Ÿåˆ—ä¸­å–å‡ºå‘é€ã€‚è¿™æ ·ä¸ä¼šæœ‰ä¸€ä¸ªSessionå æ®æ‰€æœ‰çš„æµé‡ã€‚</p><p>å½“ç„¶å¦‚æœä¸¤ä¸ªSessionçš„hashæ˜¯ä¸€æ ·çš„ï¼Œä¼šå…±äº«ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¹Ÿæœ‰å¯èƒ½äº’ç›¸å½±å“ã€‚hashå‡½æ•°ä¼šç»å¸¸æ”¹å˜ï¼Œä»è€Œsessionä¸ä¼šæ€»æ˜¯ç›¸äº’å½±å“ã€‚</p><p>è¿˜æœ‰ä¸€ç§æ— ç±»åˆ«é˜Ÿåˆ—è§„åˆ™ç§°ä¸º<strong>ä»¤ç‰Œæ¡¶è§„åˆ™</strong>ï¼ˆTBFï¼ŒToken Bucket Filteï¼‰ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/14/9b/145c6f8593bf7603eae79246b9d6859b.jpg?wh=1894*1100\" alt=\"\"></p><p>æ‰€æœ‰çš„ç½‘ç»œåŒ…æ’æˆé˜Ÿåˆ—è¿›è¡Œå‘é€ï¼Œä½†ä¸æ˜¯åˆ°äº†é˜Ÿå¤´å°±èƒ½å‘é€ï¼Œè€Œæ˜¯éœ€è¦æ‹¿åˆ°ä»¤ç‰Œæ‰èƒ½å‘é€ã€‚</p><p>ä»¤ç‰Œæ ¹æ®è®¾å®šçš„é€Ÿåº¦ç”Ÿæˆï¼Œæ‰€ä»¥å³ä¾¿é˜Ÿåˆ—å¾ˆé•¿ï¼Œä¹Ÿæ˜¯æŒ‰ç…§ä¸€å®šçš„é€Ÿåº¦è¿›è¡Œå‘é€çš„ã€‚</p><p>å½“æ²¡æœ‰åŒ…åœ¨é˜Ÿåˆ—ä¸­çš„æ—¶å€™ï¼Œä»¤ç‰Œè¿˜æ˜¯ä»¥æ—¢å®šçš„é€Ÿåº¦ç”Ÿæˆï¼Œä½†æ˜¯ä¸æ˜¯æ— é™ç´¯ç§¯çš„ï¼Œè€Œæ˜¯æ”¾æ»¡äº†æ¡¶ä¸ºæ­¢ã€‚è®¾ç½®æ¡¶çš„å¤§å°ä¸ºäº†é¿å…ä¸‹é¢çš„æƒ…å†µï¼šå½“é•¿æ—¶é—´æ²¡æœ‰ç½‘ç»œåŒ…å‘é€çš„æ—¶å€™ï¼Œç§¯ç´¯äº†å¤§é‡çš„ä»¤ç‰Œï¼Œçªç„¶æ¥äº†å¤§é‡çš„ç½‘ç»œåŒ…ï¼Œæ¯ä¸ªéƒ½èƒ½å¾—åˆ°ä»¤ç‰Œï¼Œé€ æˆç¬é—´æµé‡å¤§å¢ã€‚</p><h3>åŸºäºç±»åˆ«çš„é˜Ÿåˆ—è§„åˆ™</h3><p>å¦å¤–ä¸€å¤§ç±»æ˜¯<strong>åŸºäºç±»åˆ«çš„é˜Ÿåˆ—è§„åˆ™</strong>ï¼ˆClassful Queuing Disciplinesï¼‰ï¼Œå…¶ä¸­å…¸å‹çš„ä¸º<strong>åˆ†å±‚ä»¤ç‰Œæ¡¶è§„åˆ™</strong>ï¼ˆ<strong>HTB</strong>ï¼Œ Hierarchical Token Bucketï¼‰ã€‚</p><p>HTBå¾€å¾€æ˜¯ä¸€æ£µæ ‘ï¼Œæ¥ä¸‹æ¥æˆ‘ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œé€šè¿‡TCå¦‚ä½•æ„å»ºä¸€æ£µHTBæ ‘æ¥å¸¦ä½ ç†è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e6/f5/e6de57bf00f2fe8865ec3548bf8c67f5.jpg?wh=2042*1852\" alt=\"\"></p><p>ä½¿ç”¨TCå¯ä»¥ä¸ºæŸä¸ªç½‘å¡eth0åˆ›å»ºä¸€ä¸ªHTBçš„é˜Ÿåˆ—è§„åˆ™ï¼Œéœ€è¦ä»˜ç»™å®ƒä¸€ä¸ªå¥æŸ„ä¸ºï¼ˆ1:ï¼‰ã€‚</p><p>è¿™æ˜¯æ•´æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ¥ä¸‹æ¥ä¼šæœ‰åˆ†æ”¯ã€‚ä¾‹å¦‚å›¾ä¸­æœ‰ä¸‰ä¸ªåˆ†æ”¯ï¼Œå¥æŸ„åˆ†åˆ«ä¸ºï¼ˆ:10ï¼‰ã€ï¼ˆ:11ï¼‰ã€ï¼ˆ:12ï¼‰ã€‚æœ€åçš„å‚æ•°default 12ï¼Œè¡¨ç¤ºé»˜è®¤å‘é€ç»™1:12ï¼Œä¹Ÿå³å‘é€ç»™ç¬¬ä¸‰ä¸ªåˆ†æ”¯ã€‚</p><pre><code>tc qdisc add dev eth0 root handle 1: htb default 12\n</code></pre><p>å¯¹äºè¿™ä¸ªç½‘å¡ï¼Œéœ€è¦è§„å®šå‘é€çš„é€Ÿåº¦ã€‚ä¸€èˆ¬æœ‰ä¸¤ä¸ªé€Ÿåº¦å¯ä»¥é…ç½®ï¼Œä¸€ä¸ªæ˜¯<strong>rate</strong>ï¼Œè¡¨ç¤ºä¸€èˆ¬æƒ…å†µä¸‹çš„é€Ÿåº¦ï¼›ä¸€ä¸ªæ˜¯<strong>ceil</strong>ï¼Œè¡¨ç¤ºæœ€é«˜æƒ…å†µä¸‹çš„é€Ÿåº¦ã€‚å¯¹äºæ ¹èŠ‚ç‚¹æ¥è®²ï¼Œè¿™ä¸¤ä¸ªé€Ÿåº¦æ˜¯ä¸€æ ·çš„ï¼Œäºæ˜¯åˆ›å»ºä¸€ä¸ªroot classï¼Œé€Ÿåº¦ä¸ºï¼ˆrate=100kbpsï¼Œceil=100kbpsï¼‰ã€‚</p><pre><code>tc class add dev eth0 parent 1: classid 1:1 htb rate 100kbps ceil 100kbps\n</code></pre><p>æ¥ä¸‹æ¥è¦åˆ›å»ºåˆ†æ”¯ï¼Œä¹Ÿå³åˆ›å»ºå‡ ä¸ªå­classã€‚æ¯ä¸ªå­classç»Ÿä¸€æœ‰ä¸¤ä¸ªé€Ÿåº¦ã€‚ä¸‰ä¸ªåˆ†æ”¯åˆ†åˆ«ä¸ºï¼ˆrate=30kbpsï¼Œceil=100kbpsï¼‰ã€ï¼ˆrate=10kbpsï¼Œceil=100kbpsï¼‰ã€ï¼ˆrate=60kbpsï¼Œceil=100kbpsï¼‰ã€‚</p><pre><code>tc class add dev eth0 parent 1:1 classid 1:10 htb rate 30kbps ceil 100kbps\ntc class add dev eth0 parent 1:1 classid 1:11 htb rate 10kbps ceil 100kbps\ntc class add dev eth0 parent 1:1 classid 1:12 htb rate 60kbps ceil 100kbps\n</code></pre><p>ä½ ä¼šå‘ç°ä¸‰ä¸ªrateåŠ èµ·æ¥ï¼Œæ˜¯æ•´ä¸ªç½‘å¡å…è®¸çš„æœ€å¤§é€Ÿåº¦ã€‚</p><p>HTBæœ‰ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ï¼ŒåŒä¸€ä¸ªroot classä¸‹çš„å­ç±»å¯ä»¥ç›¸äº’å€Ÿæµé‡ï¼Œå¦‚æœä¸ç›´æ¥åœ¨é˜Ÿåˆ—è§„åˆ™ä¸‹é¢åˆ›å»ºä¸€ä¸ªroot classï¼Œè€Œæ˜¯ç›´æ¥åˆ›å»ºä¸‰ä¸ªclassï¼Œå®ƒä»¬ä¹‹é—´æ˜¯ä¸èƒ½ç›¸äº’å€Ÿæµé‡çš„ã€‚å€Ÿæµé‡çš„ç­–ç•¥ï¼Œå¯ä»¥ä½¿å¾—å½“å‰ä¸ä½¿ç”¨è¿™ä¸ªåˆ†æ”¯çš„æµé‡çš„æ—¶å€™ï¼Œå¯ä»¥å€Ÿç»™å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œä»è€Œä¸æµªè´¹å¸¦å®½ï¼Œä½¿å¸¦å®½å‘æŒ¥æœ€å¤§çš„ä½œç”¨ã€‚</p><p>æœ€åï¼Œåˆ›å»ºå¶å­é˜Ÿåˆ—è§„åˆ™ï¼Œåˆ†åˆ«ä¸º<strong>fifo</strong>å’Œ<strong>sfq</strong>ã€‚</p><pre><code>tc qdisc add dev eth0 parent 1:10 handle 20: pfifo limit 5\ntc qdisc add dev eth0 parent 1:11 handle 30: pfifo limit 5\ntc qdisc add dev eth0 parent 1:12 handle 40: sfq perturb 10\n</code></pre><p>åŸºäºè¿™ä¸ªé˜Ÿåˆ—è§„åˆ™ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡TCè®¾å®šå‘é€è§„åˆ™ï¼šä»1.2.3.4æ¥çš„ï¼Œå‘é€ç»™port 80çš„åŒ…ï¼Œä»ç¬¬ä¸€ä¸ªåˆ†æ”¯1:10èµ°ï¼›å…¶ä»–ä»1.2.3.4å‘é€æ¥çš„åŒ…ä»ç¬¬äºŒä¸ªåˆ†æ”¯1:11èµ°ï¼›å…¶ä»–çš„èµ°é»˜è®¤åˆ†æ”¯ã€‚</p><pre><code>tc filter add dev eth0 protocol ip parent 1:0 prio 1 u32 match ip src 1.2.3.4 match ip dport 80 0xffff flowid 1:10\ntc filter add dev eth0 protocol ip parent 1:0 prio 1 u32 match ip src 1.2.3.4 flowid 1:11\n</code></pre><h2>å¦‚ä½•æ§åˆ¶QoSï¼Ÿ</h2><p>æˆ‘ä»¬è®²è¿‡ï¼Œä½¿ç”¨OpenvSwitchå°†äº‘ä¸­çš„ç½‘å¡è¿é€šåœ¨ä¸€èµ·ï¼Œé‚£å¦‚ä½•æ§åˆ¶QoSå‘¢ï¼Ÿ</p><p>å°±åƒæˆ‘ä»¬ä¸Šé¢è¯´çš„ä¸€æ ·ï¼ŒOpenvSwitchæ”¯æŒä¸¤ç§ï¼š</p><ul>\n<li>å¯¹äºè¿›å…¥çš„æµé‡ï¼Œå¯ä»¥è®¾ç½®ç­–ç•¥Ingress policyï¼›</li>\n</ul><pre><code>ovs-vsctl set Interface tap0 ingress_policing_rate=100000\novs-vsctl set Interface tap0 ingress_policing_burst=10000\n</code></pre><ul>\n<li>å¯¹äºå‘å‡ºçš„æµé‡ï¼Œå¯ä»¥è®¾ç½®QoSè§„åˆ™Egress shapingï¼Œæ”¯æŒHTBã€‚</li>\n</ul><p>æˆ‘ä»¬æ„å»ºä¸€ä¸ªæ‹“æ‰‘å›¾ï¼Œæ¥çœ‹çœ‹OpenvSwitchçš„QoSæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3b/ee/3b0de72bc937e108519a473067f607ee.jpg?wh=1945*1985\" alt=\"\"></p><p>é¦–å…ˆï¼Œåœ¨portä¸Šå¯ä»¥åˆ›å»ºQoSè§„åˆ™ï¼Œä¸€ä¸ªQoSè§„åˆ™å¯ä»¥æœ‰å¤šä¸ªé˜Ÿåˆ—Queueã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/e6/84/e65435bde65a255a085f10d02d2ff184.jpg?wh=2184*1918\" alt=\"\"></p><pre><code>ovs-vsctl set port first_br qos=@newqos -- --id=@newqos create qos type=linux-htb other-config:max-rate=10000000 queues=0=@q0,1=@q1,2=@q2 -- --id=@q0 create queue other-config:min-rate=3000000 other-config:max-rate=10000000 -- --id=@q1 create queue other-config:min-rate=1000000 other-config:max-rate=10000000 -- --id=@q2 create queue other-config:min-rate=6000000 other-config:max-rate=10000000\n</code></pre><p>ä¸Šé¢çš„å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªQoSè§„åˆ™ï¼Œå¯¹åº”ä¸‰ä¸ªQueueã€‚min-rateå°±æ˜¯ä¸Šé¢çš„rateï¼Œmax-rateå°±æ˜¯ä¸Šé¢çš„ceilã€‚é€šè¿‡äº¤æ¢æœºçš„ç½‘ç»œåŒ…ï¼Œè¦é€šè¿‡æµè¡¨è§„åˆ™ï¼ŒåŒ¹é…åè¿›å…¥ä¸åŒçš„é˜Ÿåˆ—ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ·»åŠ æµè¡¨è§„åˆ™Flow(first_bræ˜¯br0ä¸Šçš„port 5)ã€‚</p><pre><code>ovs-ofctl add-flow br0 &quot;in_port=6 nw_src=192.168.100.100 actions=enqueue:5:0&quot;\novs-ofctl add-flow br0 &quot;in_port=7 nw_src=192.168.100.101 actions=enqueue:5:1&quot;\novs-ofctl add-flow br0 &quot;in_port=8 nw_src=192.168.100.102 actions=enqueue:5:2&quot;\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å•ç‹¬æµ‹è¯•ä»192.168.100.100ï¼Œ192.168.100.101ï¼Œ192.168.100.102åˆ°192.168.100.103çš„å¸¦å®½çš„æ—¶å€™ï¼Œæ¯ä¸ªéƒ½æ˜¯èƒ½å¤Ÿæ‰“æ»¡å¸¦å®½çš„ã€‚</p><p>å¦‚æœä¸‰ä¸ªä¸€èµ·æµ‹è¯•ï¼Œä¸€èµ·ç‹‚å‘ç½‘ç»œåŒ…ï¼Œä¼šå‘ç°æ˜¯æŒ‰ç…§3:1:6çš„æ¯”ä¾‹è¿›è¡Œçš„ï¼Œæ­£æ˜¯æ ¹æ®é…ç½®çš„é˜Ÿåˆ—çš„å¸¦å®½æ¯”ä¾‹åˆ†é…çš„ã€‚</p><p>å¦‚æœ192.168.100.100å’Œ192.168.100.101ä¸€èµ·æµ‹è¯•ï¼Œå‘ç°å¸¦å®½å ç”¨æ¯”ä¾‹ä¸º3:1ï¼Œä½†æ˜¯å æ»¡äº†æ€»çš„æµé‡ï¼Œä¹Ÿå³æ²¡æœ‰å‘åŒ…çš„192.168.100.102æœ‰60%çš„å¸¦å®½è¢«å€Ÿç”¨äº†ã€‚</p><p>å¦‚æœ192.168.100.100å’Œ192.168.100.102ä¸€èµ·æµ‹è¯•ï¼Œå‘ç°å¸¦å®½å ç”¨æ¯”ä¾‹ä¸º1:2ã€‚å¦‚æœ192.168.100.101å’Œ192.168.100.102ä¸€èµ·æµ‹è¯•ï¼Œå‘ç°å¸¦å®½å ç”¨æ¯”ä¾‹ä¸º1:6ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œè¿™ä¸€èŠ‚å°±è®²åˆ°è¿™é‡Œäº†ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ã€‚</p><ul>\n<li>\n<p>äº‘ä¸­çš„æµé‡æ§åˆ¶ä¸»è¦é€šè¿‡é˜Ÿåˆ—è¿›è¡Œçš„ï¼Œé˜Ÿåˆ—åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ— ç±»åˆ«é˜Ÿåˆ—è§„åˆ™å’ŒåŸºäºç±»åˆ«çš„é˜Ÿåˆ—è§„åˆ™ã€‚</p>\n</li>\n<li>\n<p>åœ¨äº‘ä¸­ç½‘ç»œOpenvswitchä¸­ï¼Œä¸»è¦ä½¿ç”¨çš„æ˜¯åˆ†å±‚ä»¤ç‰Œæ¡¶è§„åˆ™ï¼ˆHTBï¼‰ï¼Œå°†æ€»çš„å¸¦å®½åœ¨ä¸€æ£µæ ‘ä¸ŠæŒ‰ç…§é…ç½®çš„æ¯”ä¾‹è¿›è¡Œåˆ†é…ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªåˆ†æ”¯ä¸ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥å€Ÿç»™å¦å¤–çš„åˆ†æ”¯ï¼Œä»è€Œå¢å¼ºå¸¦å®½åˆ©ç”¨ç‡ã€‚</p>\n</li>\n</ul><p>æœ€åï¼Œç»™ä½ ç•™ä¸¤ä¸ªæ€è€ƒé¢˜ã€‚</p><ol>\n<li>\n<p>è¿™ä¸€èŠ‚ä¸­æåˆ°ï¼Œå…¥å£æµé‡å…¶å®æ²¡æœ‰åŠæ³•æ§åˆ¶ï¼Œå‡ºå£æµé‡æ˜¯å¯ä»¥å¾ˆå¥½æ§åˆ¶çš„ï¼Œä½ èƒ½æƒ³å‡ºä¸€ä¸ªæ§åˆ¶äº‘ä¸­çš„è™šæ‹Ÿæœºçš„å…¥å£æµé‡çš„æ–¹å¼å—ï¼Ÿ</p>\n</li>\n<li>\n<p>å®‰å…¨æ€§å’Œæµé‡æ§åˆ¶å¤§æ¦‚è§£å†³äº†ï¼Œä½†æ˜¯ä¸åŒç”¨æˆ·åœ¨ç‰©ç†ç½‘ç»œçš„éš”ç¦»è¿˜æ˜¯æ²¡æœ‰è§£å†³ï¼Œä½ çŸ¥é“æ€ä¹ˆè§£å†³å—ï¼Ÿ</p>\n</li>\n</ol><p>æˆ‘ä»¬çš„ä¸“æ æ›´æ–°åˆ°ç¬¬27è®²ï¼Œä¸çŸ¥ä½ æŒæ¡å¾—å¦‚ä½•ï¼Ÿæ¯èŠ‚è¯¾åæˆ‘ç•™çš„æ€è€ƒé¢˜ï¼Œä½ éƒ½æœ‰æ²¡æœ‰è®¤çœŸæ€è€ƒï¼Œå¹¶åœ¨ç•™è¨€åŒºå†™ä¸‹ç­”æ¡ˆå‘¢ï¼Ÿæˆ‘ä¼šä»<strong>å·²å‘å¸ƒçš„æ–‡ç« ä¸­é€‰å‡ºä¸€æ‰¹è®¤çœŸç•™è¨€çš„åŒå­¦</strong>ï¼Œèµ é€<span class=\"orange\">å­¦ä¹ å¥–åŠ±ç¤¼åˆ¸</span>å’Œæˆ‘æ•´ç†çš„<span class=\"orange\">ç‹¬å®¶ç½‘ç»œåè®®çŸ¥è¯†å›¾è°±</span>ã€‚</p><p>æ¬¢è¿ä½ ç•™è¨€å’Œæˆ‘è®¨è®ºã€‚è¶£è°ˆç½‘ç»œåè®®ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼</p>","neighbors":{"left":{"article_title":"ç¬¬26è®² | äº‘ä¸­çš„ç½‘ç»œå®‰å…¨ï¼šè™½ç„¶ä¸æ˜¯åœŸè±ªï¼Œä¹Ÿéœ€è¦åŸºæœ¬å®‰å…¨å’Œä¿éšœ","id":10978},"right":{"article_title":"ç¬¬28è®² | äº‘ä¸­ç½‘ç»œçš„éš”ç¦»GREã€VXLANï¼šè™½ç„¶ä½ä¸€ä¸ªå°åŒºï¼Œä¹Ÿè¦ä¿æŠ¤éšç§","id":11324}},"comments":[{"had_liked":false,"id":16371,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1531913057,"is_pvip":false,"discussion_count":5,"race_medal":0,"score":"151855768417","product_id":100007101,"comment_content":"äº‘é‡Œé›¾é‡Œ ä¸æ˜¯ç§‘ç­ æ„Ÿè§‰è¦è¡¥çš„ä¸œè¥¿å¤ªå¤šäº†","like_count":36,"discussions":[{"author":{"id":1402127,"avatar":"https://static001.geekbang.org/account/avatar/00/15/65/0f/770eba2d.jpg","nickname":"Kay","note":"","ucode":"A5A6E3655FEC2D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":306399,"discussion_content":"è½æ³ªï¼Œè‡ª20è®²ä»¥æ¥ï¼Œå°±æ²¡çœ‹æ‡‚å‡ èŠ‚ã€‚ã€‚ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1600262671,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1144171,"avatar":"https://static001.geekbang.org/account/avatar/00/11/75/6b/fd685164.jpg","nickname":"lcfæ«","note":"","ucode":"D51E8F68BD41CA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":122667,"discussion_content":"è¿™ä¹ˆè¯´çš„è¯æˆ‘å¯èƒ½æ˜¯ä¸ªå‡ç§‘ç­","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1578366663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1440772,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fc/04/d83a555e.jpg","nickname":"Kevinâš¡ï¸Zhou","note":"","ucode":"C0FC2673705212","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1144171,"avatar":"https://static001.geekbang.org/account/avatar/00/11/75/6b/fd685164.jpg","nickname":"lcfæ«","note":"","ucode":"D51E8F68BD41CA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":297230,"discussion_content":"å“ˆå“ˆå“ˆ, æˆ‘ä¹Ÿæ˜¯å‡çš„","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1596817374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":122667,"ip_address":""},"score":297230,"extra":""}]},{"author":{"id":1707854,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0f/4e/07340631.jpg","nickname":"Geek_Gump","note":"","ucode":"C7EE0157EC891E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":72723,"discussion_content":"æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦è®¡ç®—æœºç½‘ç»œçš„ä¸œè¥¿ï¼Œå·²ç»å®Œå…¨ä¸çŸ¥é“åœ¨è®²ä»€ä¹ˆäº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1575520220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1260141,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3a/6d/910b2445.jpg","nickname":"Wheat","note":"","ucode":"7D99EA149B6DE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":350721,"discussion_content":"è¿™è®²å¯æ¯”æ•°æ®ä¸­å¿ƒé‚£è®²ç®€å•å¤šäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613989914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16314,"user_name":"yungoo","can_delete":false,"product_type":"c1","uid":1060805,"ip_address":"","ucode":"D9BB84A75047CB","user_header":"https://static001.geekbang.org/account/avatar/00/10/2f/c5/aaacb98f.jpg","comment_is_top":false,"comment_ctime":1531878755,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"91726191971","product_id":100007101,"comment_content":"é€šè¿‡ingress qdiscç­–ç•¥å°†å…¥å£æµé‡é‡å®šå‘åˆ°è™šæ‹Ÿç½‘å¡ifbï¼Œç„¶åå¯¹ifbçš„egressè¿›è¡Œå‡ºå£é™é€Ÿï¼Œä»è€Œå˜é€šå®ç°å…¥å£æµæ§ã€‚","like_count":20,"discussions":[{"author":{"id":1932583,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqiapnDZCf0DZvvzcB5CGibib5QDNhAX8nGY9Y5ygC9DUUwJwN4ASVv7MmIzM5vhS03zSfxibKgYTXyKg/132","nickname":"Geek_8664a7","note":"","ucode":"86F71BFF814D77","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583901,"discussion_content":"å±…ç„¶è¿˜æœ‰è¿™æ‹›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660478943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16357,"user_name":"æ™“.å…‰","can_delete":false,"product_type":"c1","uid":1135328,"ip_address":"","ucode":"EC826AE4901235","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/e0/ef42c4ce.jpg","comment_is_top":false,"comment_ctime":1531897903,"is_pvip":false,"replies":[{"id":"5678","content":"å¯¹å•Šï¼Œæ‰€ä»¥åŸç†æ˜¯é€šçš„","user_name":"ä½œè€…å›å¤","comment_id":16357,"uid":"1001590","ip_address":"","utype":1,"ctime":1531907763,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"65956407343","product_id":100007101,"comment_content":"è¶Šæ¥è¶Šå‘ç°äº‘ä¸­çš„ç½‘ç»œæ§åˆ¶è·Ÿæœ¬åœ°åŸç†ä¸€è‡´~","like_count":16,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420770,"discussion_content":"å¯¹å•Šï¼Œæ‰€ä»¥åŸç†æ˜¯é€šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531907763,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16324,"user_name":"zcpromising","can_delete":false,"product_type":"c1","uid":1131966,"ip_address":"","ucode":"4F29D98A436D09","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/be/494010aa.jpg","comment_is_top":false,"comment_ctime":1531882034,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"40186587698","product_id":100007101,"comment_content":"å‰é¢15è®²ä»¥å‰çš„å†…å®¹ï¼Œåœ¨å­¦æ ¡æ˜¯å¯ä»¥æ¥è§¦åˆ°çš„ï¼Œåé¢æ¯è®²çš„å†…å®¹ï¼Œåœ¨å­¦æ ¡æ˜¯ä½“ä¼šä¸åˆ°çš„ï¼Œæ¯å¤©å¬è€å¸ˆæ‚¨çš„è¯¾ç¨‹ï¼Œæ„Ÿè§‰å°±åƒå‘ç°äº†æ–°å¤§é™†ä¸€æ ·ï¼ŒæƒŠå–œä¸‡åˆ†ã€‚è¦æ˜¯å­¦æ ¡è€å¸ˆèƒ½å¤ŸæŒ‰ç…§æ‚¨è¿™æ ·çš„æ–¹å¼è®²ï¼Œé‚£è¯¥å¤šå¥½ã€‚","like_count":10},{"had_liked":false,"id":83527,"user_name":"è¶…è¶…","can_delete":false,"product_type":"c1","uid":1476077,"ip_address":"","ucode":"D0751F29553481","user_header":"https://static001.geekbang.org/account/avatar/00/16/85/ed/905b052f.jpg","comment_is_top":false,"comment_ctime":1554641011,"is_pvip":false,"replies":[{"id":"49889","content":"æ˜¯çš„ï¼Œå¯ä»¥è”åŠ¨","user_name":"ä½œè€…å›å¤","comment_id":83527,"uid":"1001590","ip_address":"","utype":1,"ctime":1567779994,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"27324444787","product_id":100007101,"comment_content":"ç­”é—®é¢˜1ï¼šæ˜¯å¦å¯ä»¥åœ¨è™šæ‹Ÿæœºçš„å‰ä¸€çº§æ§åˆ¶å‡ºå£æµé‡ï¼Ÿå‰ä¸€çº§çš„å‡ºå£æµé‡å¾—åˆ°æ§åˆ¶ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºçš„å…¥å£æµé‡ä¹Ÿå°±å¾—åˆ°äº†æ§åˆ¶ã€‚","like_count":7,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446057,"discussion_content":"æ˜¯çš„ï¼Œå¯ä»¥è”åŠ¨","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567779994,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":19170,"user_name":"iron_man","can_delete":false,"product_type":"c1","uid":1099883,"ip_address":"","ucode":"C0053A59442910","user_header":"https://static001.geekbang.org/account/avatar/00/10/c8/6b/0f3876ef.jpg","comment_is_top":false,"comment_ctime":1533693409,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27303497185","product_id":100007101,"comment_content":"è™šæ‹Ÿæœºçš„æµé‡éƒ½é€šè¿‡openv switchæ§åˆ¶ï¼Œæœºå™¨æ•°é‡å¤šäº†ï¼Œopenvswitchä¼šä¸ä¼šæˆä¸ºä¸€ä¸ªç“¶é¢ˆ","like_count":6},{"had_liked":false,"id":16745,"user_name":"Fisher","can_delete":false,"product_type":"c1","uid":1138887,"ip_address":"","ucode":"F3063BCEBC9F14","user_header":"https://static001.geekbang.org/account/avatar/00/11/60/c7/a147b71b.jpg","comment_is_top":false,"comment_ctime":1532148828,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27301952604","product_id":100007101,"comment_content":"è¿™ç¯‡æ–‡ç« æ§åˆ¶çš„å‡ºå£æµé‡æ˜¯æ§åˆ¶ç½‘å¡å±‚é¢çš„ï¼Œé‚£ä¹ˆåƒæ ‡é¢˜é‡Œé¢çš„ï¼Œå¦‚æœæ˜¯åœ¨å±€åŸŸç½‘ä¸­åˆ«äººç–¯ç‹‚ä¸‹è½½ï¼Œè¿™ç§æ§åˆ¶ç½‘é€Ÿçš„æ˜¯åœ¨å“ªä¸ªå±‚é¢æ§åˆ¶çš„ï¼Œè·¯ç”±å™¨æœ¬èº«æ§åˆ¶é€Ÿåº¦çš„åŸç†åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Œåªæ˜¯æ§åˆ¶è½¬å‘é€Ÿåº¦å—","like_count":6},{"had_liked":false,"id":18121,"user_name":"u","can_delete":false,"product_type":"c1","uid":1140276,"ip_address":"","ucode":"88FA7BA089807C","user_header":"https://static001.geekbang.org/account/avatar/00/11/66/34/0508d9e4.jpg","comment_is_top":false,"comment_ctime":1533141264,"is_pvip":false,"replies":[{"id":"6340","content":"ç°åœ¨å†™çš„å°‘äº†","user_name":"ä½œè€…å›å¤","comment_id":18121,"uid":"1001590","ip_address":"","utype":1,"ctime":1533173246,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"18713010448","product_id":100007101,"comment_content":"è¶…å“¥ï¼Œæœ‰ä¸ªé—®é¢˜æƒ³é—®ä¸‹ï¼šä½ å¹³æ—¶ä»£ç å†™çš„å¤šå—ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":421396,"discussion_content":"ç°åœ¨å†™çš„å°‘äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1533173246,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283025,"user_name":"Gabriel","can_delete":false,"product_type":"c1","uid":1437358,"ip_address":"","ucode":"714772A93E93DC","user_header":"https://static001.geekbang.org/account/avatar/00/15/ee/ae/855b7e6e.jpg","comment_is_top":false,"comment_ctime":1615524410,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10205459002","product_id":100007101,"comment_content":"å—¯ ä»€ä¹ˆå°±ç¡¬ç€å¤´çš®ä¹Ÿè¦çœ‹ æˆ‘ç°åœ¨å°±æ˜¯","like_count":2,"discussions":[{"author":{"id":2350230,"avatar":"https://static001.geekbang.org/account/avatar/00/23/dc/96/9501cd87.jpg","nickname":"æ— ç—•ä¹‹æ„","note":"","ucode":"8AF05C8C813352","race_medal":3,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583228,"discussion_content":"æˆ‘ç°åœ¨ä¹Ÿæ˜¯ğŸ˜‚ï¼Œåé¢å¼€å§‹è¶Šæ¥è¶Šçœ‹ä¸æ‡‚äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659964113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":16281,"user_name":"HIK","can_delete":false,"product_type":"c1","uid":1174344,"ip_address":"","ucode":"13A57077AED932","user_header":"https://static001.geekbang.org/account/avatar/00/11/eb/48/c7aad9d6.jpg","comment_is_top":false,"comment_ctime":1531874252,"is_pvip":false,"replies":[{"id":"5659","content":"æ€§èƒ½æµ‹è¯•è½¯ä»¶éƒ½å¯ä»¥","user_name":"ä½œè€…å›å¤","comment_id":16281,"uid":"1001590","ip_address":"","utype":1,"ctime":1531887193,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":3,"race_medal":0,"score":"10121808844","product_id":100007101,"comment_content":"è¯·é—®å¦‚ä½•å®ç°ç–¯ç‹‚å‘åŒ…ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":420739,"discussion_content":"æ€§èƒ½æµ‹è¯•è½¯ä»¶éƒ½å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1531887193,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2344081,"avatar":"https://static001.geekbang.org/account/avatar/00/23/c4/91/a017bf72.jpg","nickname":"coconut","note":"","ucode":"07B95C7A6AC2F7","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394268,"discussion_content":"æ¥¼ä¸Šè¯´çš„æ˜¯iperfå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631805569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1994374,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/6e/86/c682976b.jpg","nickname":"zhushenghang","note":"","ucode":"712CFE335C7CE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":280144,"discussion_content":"perfäº†è§£ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591503249,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":194962,"user_name":"King-ZJ","can_delete":false,"product_type":"c1","uid":1915385,"ip_address":"","ucode":"7448A4BBB5A118","user_header":"https://static001.geekbang.org/account/avatar/00/1d/39/f9/b946719a.jpg","comment_is_top":false,"comment_ctime":1585124319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5880091615","product_id":100007101,"comment_content":"QOSæœåŠ¡è´¨é‡åœ¨ä¸šåŠ¡è¿è¡Œä¸­åšä¸€ä¸ªæŒ‰éœ€çš„é…ç½®ï¼Œæ›´å¥½è°ƒèŠ‚ç½‘ç»œçš„è¿è¡Œæµç•…åº¦ï¼Œå¸¦ç»™å®¢æˆ·æ›´å¥½çš„ä½“éªŒã€‚","like_count":1},{"had_liked":false,"id":140986,"user_name":"è¢«è¿‡å»æ¨å¼€","can_delete":false,"product_type":"c1","uid":1276690,"ip_address":"","ucode":"8B4F34FE93FD5B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Cib5umA0W17N9pichI08pnrXAExdbyh7AVzH4nEhD6KN3FXuELk4LJJuqUPPD7xmIy9nq5Hjbgnzic7sVZG5BKiaUQ/132","comment_is_top":false,"comment_ctime":1571101358,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5866068654","product_id":100007101,"comment_content":"å¾ˆå¤šç½‘å…³éƒ½æä¾›äº†åŸºäºä»¤ç‰Œæ¡¶æ¨¡å¼çš„é™æµï¼Œæ¯”å¦‚spring cloud gateway","like_count":1},{"had_liked":false,"id":56554,"user_name":"haha","can_delete":false,"product_type":"c1","uid":1041547,"ip_address":"","ucode":"F4F3EAB4A15989","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e4/8b/8a0a6c86.jpg","comment_is_top":false,"comment_ctime":1546487332,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5841454628","product_id":100007101,"comment_content":"å‡ ç§é˜Ÿåˆ—çš„æ§åˆ¶ç­–ç•¥ï¼Œæ”¾åˆ°å“ªåˆé€‚çš„åœºæ™¯é€‚ç”¨ï¼Œå€Ÿé‰´ä¸å¯å‘ï¼ŒåŸç†éƒ½æ˜¯å¦‚æ­¤ã€‚","like_count":1},{"had_liked":false,"id":338420,"user_name":"ç†Š@ç†Š","can_delete":false,"product_type":"c1","uid":2005513,"ip_address":"","ucode":"2A792BA769348E","user_header":"https://static001.geekbang.org/account/avatar/00/1e/9a/09/af250bf8.jpg","comment_is_top":false,"comment_ctime":1647495142,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647495142","product_id":100007101,"comment_content":"HTBçš„å­é˜Ÿåˆ—ä¼šæ‰“æ»¡ä¹ˆï¼Ÿå¦‚æœæ»¡äº†ï¼Œæ–°æµé‡æ˜¯ä¸¢å¼ƒä¹ˆï¼Ÿè¿˜æ˜¯ä¼šè°ƒæ•´çª—å£ï¼Ÿ","like_count":0},{"had_liked":false,"id":326034,"user_name":"å¤œâŠ™â–½âŠ™","can_delete":false,"product_type":"c1","uid":1479222,"ip_address":"","ucode":"89F24E862A20F3","user_header":"https://static001.geekbang.org/account/avatar/00/16/92/36/6f4d8528.jpg","comment_is_top":false,"comment_ctime":1639321891,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1639321891","product_id":100007101,"comment_content":"è€å¸ˆï¼Œæ–‡ä¸­æåˆ°çš„ç±»åˆ«è¯¥å¦‚ä½•ç†è§£åˆ’åˆ†ï¼Ÿ","like_count":0},{"had_liked":false,"id":289958,"user_name":"ä¸‰æ™¯é¡µ","can_delete":false,"product_type":"c1","uid":1243410,"ip_address":"","ucode":"38588DDAA495BC","user_header":"https://static001.geekbang.org/account/avatar/00/12/f9/12/0e6620cd.jpg","comment_is_top":false,"comment_ctime":1619278006,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1619278006","product_id":100007101,"comment_content":"ä»åˆ˜è¶…è€å¸ˆçš„ åˆ˜è¶…çš„é€šä¿—äº‘è®¡ç®—åšå®¢ è¿½åˆ°æå®¢æ—¶é—´æ¥äº†","like_count":0,"discussions":[{"author":{"id":1080238,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7b/ae/66ae403d.jpg","nickname":"ç†ŠçŒ«","note":"","ucode":"23C85117A16BEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379844,"discussion_content":"ä½ å¥½ï¼Œåšå®¢åœ°å€èƒ½å‘ä¸‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624184272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1243410,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/12/0e6620cd.jpg","nickname":"ä¸‰æ™¯é¡µ","note":"","ucode":"38588DDAA495BC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1080238,"avatar":"https://static001.geekbang.org/account/avatar/00/10/7b/ae/66ae403d.jpg","nickname":"ç†ŠçŒ«","note":"","ucode":"23C85117A16BEF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":414647,"discussion_content":"https://blog.csdn.net/popsuper1982?ivk_sa=1024320u\nå“ˆå“ˆ å¯ä»¥çœ‹çš„å¤§ä½¬çš„æˆé•¿è¿‡ç¨‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636821971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":379844,"ip_address":""},"score":414647,"extra":""}]}]},{"had_liked":false,"id":276431,"user_name":"CiaoğŸŒš","can_delete":false,"product_type":"c1","uid":2415283,"ip_address":"","ucode":"B048EC8A4A4D77","user_header":"https://static001.geekbang.org/account/avatar/00/24/da/b3/35859560.jpg","comment_is_top":false,"comment_ctime":1611920560,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611920560","product_id":100007101,"comment_content":"è€å¸ˆï¼Œçœ‹ç½‘ä¸Šæœ‰çš„èµ„æ–™è¯´ï¼Œå®é™…ä¸Šå®ç°Qoséƒ½ä½¿ç”¨äº†IPå¤´éƒ¨TOS fieldçš„6ä¸ªbitçš„DSCPçš„æ¦‚å¿µï¼Œè€Œä¸æ˜¯é‚£4ä¸ªbitï¼Œå› ä¸ºapplicationéƒ½ä¸æ”¯æŒã€‚æ˜¯è¿™æ ·å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":251718,"user_name":"WÒˆTÒˆHÒˆ","can_delete":false,"product_type":"c1","uid":1919027,"ip_address":"","ucode":"93AA6E442B5A47","user_header":"https://static001.geekbang.org/account/avatar/00/1d/48/33/4663928e.jpg","comment_is_top":false,"comment_ctime":1601806970,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1601806970","product_id":100007101,"comment_content":"Qosæµé‡åˆ¤æ–­å¯ä»¥åšç½‘ç»œé»‘æ´å—ï¼Ÿæ¥æŠµå¾¡æµé‡æ”»å‡»ï¼Ÿ","like_count":0},{"had_liked":false,"id":223216,"user_name":"ä½³ä¿Š","can_delete":false,"product_type":"c1","uid":1385803,"ip_address":"","ucode":"A54445937EEF21","user_header":"https://static001.geekbang.org/account/avatar/00/15/25/4b/4cbd001e.jpg","comment_is_top":false,"comment_ctime":1591022760,"is_pvip":false,"replies":[{"id":"83034","content":"ä¸å¯¹åº”ï¼Œå¯¹åº”çš„æ˜¯enqueue","user_name":"ä½œè€…å›å¤","comment_id":223216,"uid":"1001590","ip_address":"","utype":1,"ctime":1591755666,"user_name_real":"åˆ˜è¶…@ç½‘æ˜“äº‘"}],"discussion_count":1,"race_medal":0,"score":"1591022760","product_id":100007101,"comment_content":"<br>ovs-ofctl add-flow br0 &quot;in_port=6 nw_src=192.168.100.100 actions=enqueue:5:0&quot;<br>ovs-ofctl add-flow br0 &quot;in_port=7 nw_src=192.168.100.101 actions=enqueue:5:1&quot;<br>ovs-ofctl add-flow br0 &quot;in_port=8 nw_src=192.168.100.102 actions=enqueue:5:2&quot;<br><br>1. è¿™å‡ ä¸ªå‘½ä»¤é‡Œé¢çš„in_port=6,7,8æ€ä¹ˆå’Œä¸Šé¢çš„queueå¯¹åº”èµ·æ¥çš„ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1001590,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/48/76/0c7d4d23.jpg","nickname":"åˆ˜è¶…","note":"","ucode":"196BF3F499E8FE","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":497058,"discussion_content":"ä¸å¯¹åº”ï¼Œå¯¹åº”çš„æ˜¯enqueue","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591755666,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":196841,"user_name":"25ma","can_delete":false,"product_type":"c1","uid":1303713,"ip_address":"","ucode":"AB5435B9DB52C9","user_header":"https://static001.geekbang.org/account/avatar/00/13/e4/a1/178387da.jpg","comment_is_top":false,"comment_ctime":1585317031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585317031","product_id":100007101,"comment_content":"æ„Ÿè§‰éç§‘ç­éœ€è¦èŠ±æ›´å¤šæ—¶é—´æ¥æ¶ˆåŒ–è¿™äº›çŸ¥è¯†ï¼Œå–œæ¬¢è¶…å“¥çš„è¯¾ç¨‹","like_count":0},{"had_liked":false,"id":19169,"user_name":"iron_man","can_delete":false,"product_type":"c1","uid":1099883,"ip_address":"","ucode":"C0053A59442910","user_header":"https://static001.geekbang.org/account/avatar/00/10/c8/6b/0f3876ef.jpg","comment_is_top":false,"comment_ctime":1533693311,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1533693311","product_id":100007101,"comment_content":"æ‰€æœ‰çš„æµé‡éƒ½é€šè¿‡openv","like_count":0},{"had_liked":false,"id":16593,"user_name":"Summer___J","can_delete":false,"product_type":"c1","uid":1135471,"ip_address":"","ucode":"FF53E15E3FC267","user_header":"https://static001.geekbang.org/account/avatar/00/11/53/6f/6051e0f1.jpg","comment_is_top":false,"comment_ctime":1532048268,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1532048268","product_id":100007101,"comment_content":"3:1:6çš„ä¾‹å­ã€å‡å¦‚ä¸€å¼€å§‹æ˜¯2ä¸ªèŠ‚ç‚¹ç–¯ç‹‚å‘åŒ…å æ»¡å¸¦å®½ï¼Œå‡å¦‚æ˜¯ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªä¸€å¼€å§‹åœ¨å‘ï¼Œå¸¦å®½åˆ©ç”¨å æ¯”æ˜¯3:1ã€‚ä¸€æ®µæ—¶é—´åï¼Œç¬¬ä¸‰ä¸ªèŠ‚ç‚¹å†å¼€å§‹ç–¯ç‹‚å‘åŒ…ã€‚è¿™ç§æƒ…å†µï¼Œå½“ç¬¬ä¸‰ä¸ªä¸Šæ¥ä»¥åï¼Œè¿™ä¸‰ä¸ªèŠ‚ç‚¹åœ¨å¸¦å®½å ç”¨ä¸Šä¼šåŠ¨æ€åœ°å›åˆ°3:1:6å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":16515,"user_name":"rtoday","can_delete":false,"product_type":"c1","uid":1174402,"ip_address":"","ucode":"DFAA788C96ABAC","user_header":"https://static001.geekbang.org/account/avatar/00/11/eb/82/4b56fa5f.jpg","comment_is_top":false,"comment_ctime":1531998845,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531998845","product_id":100007101,"comment_content":"ovs-vsctl set port first_br qos=@newqos <br>-- --id=@newqos create qos type=linux-htb other-config:max-rate=10,000,000 queues=0=@q0,1=@q1,2=@q2<br>-- --id=@q0 create queue other-config:min-rate=3,000,000 other-config:max-rate=10,000,000 <br>-- --id=@q1 create queue other-config:min-rate=1,000,000 other-config:max-rate=10,000,000 <br>-- --id=@q2 create queue other-config:min-rate=6,000,000 other-config:max-rate=10,000,000<br><br>è¿™æ˜¯å€’æ•°ç¬¬äºŒä¸ªæŒ‡ä»¤<br>æˆ‘åˆ»æ„æ’ç‰ˆä¸€ä¸‹ï¼Œå¹¶ä¸”æŠŠæ•°å­—ä½¿ç”¨ä¸‰ä½ä¸€ä¸ªæ’‡èŠ‚<br><br>1. è¯­æ³•é—®é¢˜<br>ä¸ºä½•å†™æˆ<br>-- --id=@newqos<br>æˆ‘å¯ä»¥åªå†™ä¸‹é¢è¿™æ ·å—<br>--id=@newqos<br>åŒæ¨ªçº¿ç„¶ååé¢ä¸åŠ ä¸Šoptionï¼Œè¯·é—®æœ‰ä»€ä¹ˆç‰¹æ®Šç”¨æ„å—ï¼Ÿ<br><br>2.è¯­æ„é—®é¢˜<br>æ˜¯å¦æ˜¯æˆ‘å¹æ¯›æ±‚ç–µäº†<br>å¥½è±¡æ¯ä¸ªæ•°å­—éƒ½å°‘ä¸€ä¸ª0<br>è¿˜æ˜¯æˆ‘çš„è®¤çŸ¥æœ‰è¯¯å‘¢","like_count":0},{"had_liked":false,"id":16502,"user_name":"ç½‘ç»œå·²æ–­å¼€","can_delete":false,"product_type":"c1","uid":1062138,"ip_address":"","ucode":"FBE0527E62A82B","user_header":"","comment_is_top":false,"comment_ctime":1531990536,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531990536","product_id":100007101,"comment_content":"çœ‹å®Œä¼¼æ‡‚éæ‡‚ï¼Œå¿ƒé‡Œç—’ç—’çš„","like_count":0},{"had_liked":false,"id":16499,"user_name":"rtoday","can_delete":false,"product_type":"c1","uid":1174402,"ip_address":"","ucode":"DFAA788C96ABAC","user_header":"https://static001.geekbang.org/account/avatar/00/11/eb/82/4b56fa5f.jpg","comment_is_top":false,"comment_ctime":1531986854,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531986854","product_id":100007101,"comment_content":"ç¬¬ä¸€é¢˜<br>è¿™ç¯‡è®²çš„æ˜¯Clientå¦‚ä½•æ§åˆ¶å‡ºå£æµé‡<br>é‚£Clientçš„å…¥å£æµé‡<br>ä¹ŸæŒ‰ç…§ä¸€æ ·çš„åŸç†ï¼Œåªæ˜¯ç”±Serverç«¯ï¼Œæˆ–æ˜¯æ•°æ®ä¸­å¿ƒç«¯çš„äººï¼Œæ¥æ§åˆ¶ä»–ä»¬çš„å‡ºå£æµé‡å³å¯ã€‚è¿™åº”è¯¥æ˜¯æœ‰æ²¡æœ‰æƒé™çš„é—®é¢˜ã€‚<br><br>ç¬¬äºŒé¢˜ï¼Œåº”è¯¥æ˜¯ä¸‹æœŸçš„ä¸»é¢˜ï¼Œç­‰ä¸‹æœŸå‡ºåˆŠåï¼Œå†æ¥å›é¡¾æœ¬é¢˜ï¼Œå¯èƒ½ä½“ä¼šçš„æ¯”è¾ƒå®Œæ•´ã€‚","like_count":0},{"had_liked":false,"id":16306,"user_name":"ä¸‰æ°´","can_delete":false,"product_type":"c1","uid":1017781,"ip_address":"","ucode":"11837CF38FD9BB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/b5/dd0353f4.jpg","comment_is_top":false,"comment_ctime":1531876812,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1531876812","product_id":100007101,"comment_content":"é—®é¢˜2: å¯ä»¥ä½¿ç”¨Linux Network Namespaceè¿›è¡Œéš”ç¦»ï¼Œcgroup å°±è¿›è¡Œèµ„æºè°ƒé…å’Œç»Ÿè®¡ï¼Œäº‘è®¡ç®—å¤šç§Ÿæˆ·èµ„æºä½¿ç”¨ï¼Œå¦‚åŸºäºdockerçš„äº‘è®¡ç®—æœåŠ¡","like_count":0}]}