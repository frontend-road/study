{"id":172895,"title":"113 | 商城列表页模块开发","content":"<p><strong>课件地址</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/swift-course\">https://gitee.com/geektime-geekbang/swift-course</a></p>","comments":[{"had_liked":false,"id":163549,"user_name":"大神博士","can_delete":false,"product_type":"c3","uid":1195144,"ip_address":"","ucode":"8C4318095949F0","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg","comment_is_top":false,"comment_ctime":1576742292,"is_pvip":false,"replies":[{"id":62428,"content":"你用一个tableview，然后第一个cell放轮播图就可以了，不过需要自己解决一下滚动冲突","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1576933230,"ip_address":"","comment_id":163549,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"如果列表很长，滚动时希望轮播图移除可是范围，应该怎么写呢？现在没看错的话，列表滚动只能滚动自己的内容。","like_count":0,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478444,"discussion_content":"你用一个tableview，然后第一个cell放轮播图就可以了，不过需要自己解决一下滚动冲突","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576933230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1166251,"avatar":"https://static001.geekbang.org/account/avatar/00/11/cb/ab/859d3184.jpg","nickname":"一个Lee","note":"","ucode":"1F64A1CEDB6944","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":95559,"discussion_content":"你放在tableHeaderView也可以啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577024270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252334,"user_name":"小千","can_delete":false,"product_type":"c3","uid":1286065,"ip_address":"","ucode":"8A1274AD7B87F0","user_header":"https://static001.geekbang.org/account/avatar/00/13/9f/b1/ae61b184.jpg","comment_is_top":false,"comment_ctime":1602242024,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"视频中banner实现，当isInfinite为true，图片为3张时，collectionView的numberOfItemsInSection方法，返回的为啥是pageNumber + 2呢？我分析了下代码，比如图片代号排列其实是 cabca，逻辑中第0位c就没用，这样不是多构造了个cell？我尝试，返回pageNumber + 1，并且改造下相应逻辑，图片代号排列其实是 abca，效果也是一样的。","like_count":1,"discussions":[{"author":{"id":1468634,"avatar":"https://static001.geekbang.org/account/avatar/00/16/68/da/407f9da0.jpg","nickname":"Forever","note":"","ucode":"D0644D32F53E66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353101,"discussion_content":"滑动是可以从左往右和从右往左滑的，abca是在从右往左滑时正常，从左往右就有问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615005140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":263382,"user_name":"微笑美男😄","can_delete":false,"product_type":"c3","uid":1010774,"ip_address":"","ucode":"E188923723703B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/56/07920099.jpg","comment_is_top":false,"comment_ctime":1606120638,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"如果tableView 是一个分区表的话 CommonList这个组件发现就不好用了 该如何改进呢。还是分区表的话就不用CommonList了","like_count":0},{"had_liked":false,"id":251082,"user_name":"ABC","can_delete":false,"product_type":"c3","uid":2132230,"ip_address":"","ucode":"25CED65C479770","user_header":"https://static001.geekbang.org/account/avatar/00/20/89/06/3f838eef.jpg","comment_is_top":false,"comment_ctime":1601359563,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"老师,请问这段代码的作用是什么,不写好像结果也没什么区别\nlet _ = dataSource.viewForBanner(self, index: index, covertView: view)","like_count":0,"discussions":[{"author":{"id":1286065,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9f/b1/ae61b184.jpg","nickname":"小千","note":"","ucode":"8A1274AD7B87F0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311163,"discussion_content":"viewForBanner 这个方法有返回值，如果不写=前面的，会有警告，这样用let _ 接收返回值，只是个占位符，代表返回值不做任何用处，也避免了警告。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602241640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":226261,"user_name":"o0oi1i","can_delete":false,"product_type":"c3","uid":1132312,"ip_address":"","ucode":"D1F6AD4AAEAFBE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/18/293cd24d.jpg","comment_is_top":false,"comment_ctime":1592018568,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"打卡113","like_count":0},{"had_liked":false,"id":220040,"user_name":"moonclock","can_delete":false,"product_type":"c3","uid":1098395,"ip_address":"","ucode":"524A0360A192BE","user_header":"https://static001.geekbang.org/account/avatar/00/10/c2/9b/ca6ed996.jpg","comment_is_top":false,"comment_ctime":1590141301,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"请问一下张老师, 在属性 dataSource 的 didSet 方法中, 为什么需要调用 DispatchQueue.main.async 才能设置滚动距离, 视频中讲到是要放到下一个 runloop 中, reload 后会重新开启一个 runloop 么? 这里能详细讲一下么? 感谢!","like_count":0}]}