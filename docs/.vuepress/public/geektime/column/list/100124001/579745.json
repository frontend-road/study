{"id":579745,"title":"02ï½œå†…æœ‰ä¹¾å¤ï¼šGoè¯­è¨€å…­å¤§åŸºç¡€çŸ¥è¯†ä½“ç³»","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ‘å»ºå‹‹ã€‚</p><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ç»§ç»­æ¥å›é¡¾ Go è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œå¸®åŠ©ä½ åœ¨å‰æœŸæŸ¥æ¼è¡¥ç¼ºï¼Œæ‰“å¥½é¡¹ç›®å¼€å‘çš„åŸºç¡€ã€‚åœ¨ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘æŠŠGoçš„åŸºç¡€çŸ¥è¯†åˆ†ä¸ºäº†å…­ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯å¼€å‘ç¯å¢ƒã€åŸºç¡€è¯­æ³•ã€è¯­æ³•ç‰¹æ€§ã€å¹¶å‘ç¼–ç¨‹ã€é¡¹ç›®ç»„ç»‡ã€å·¥å…·ä¸åº“ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬ç´§è·Ÿä¸ŠèŠ‚è¯¾çš„å†…å®¹ï¼Œç»§ç»­åé¢å››ä¸ªéƒ¨åˆ†çš„è®²è§£ã€‚</p><h2>è¯­æ³•ç‰¹æ€§</h2><p>Goè¯­è¨€ä¸­æœ‰è®¸å¤šç‰¹åˆ«çš„è¯­æ³•ç‰¹æ€§ï¼Œå…¶ä¸­æ¯”è¾ƒä¸»è¦çš„ç‰¹æ€§åŒ…æ‹¬äº†deferã€æ¥å£ã€åç¨‹ã€é€šé“ç­‰ã€‚è®©æˆ‘ä»¬å…ˆä»deferè¯´èµ·ã€‚</p><h3>defer</h3><p>defer æ˜¯Go è¯­è¨€ä¸­çš„å…³é”®å­—ï¼Œä¹Ÿæ˜¯Goè¯­è¨€çš„é‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œdeferåœ¨èµ„æºé‡Šæ”¾ã€panicæ•è·ç­‰åœºæ™¯ä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ã€‚</p><pre><code class=\"language-plain\">defer func(...){\n// å®é™…å¤„ç†\n}()\n</code></pre><p>æˆ‘ä»¬éœ€è¦æŒæ¡deferçš„å‡ ä¸ªé‡è¦ç‰¹æ€§ï¼ŒåŒ…æ‹¬ï¼š</p><ul>\n<li>å»¶è¿Ÿæ‰§è¡Œï¼›</li>\n<li>å‚æ•°é¢„è®¡ç®—ï¼›</li>\n<li>LIFOæ‰§è¡Œé¡ºåºã€‚</li>\n</ul><p>é™¤æ­¤ä¹‹å¤–ï¼ŒGoè¯­è¨€ç”¨äºå¼‚å¸¸æ¢å¤çš„å†…ç½®recover å‡½æ•°ï¼Œä¹Ÿéœ€è¦ä¸defer å‡½æ•°ç»“åˆä½¿ç”¨æ‰æœ‰æ„ä¹‰ï¼š</p><pre><code class=\"language-plain\">func f() {\n    defer func() {\n        if r := recover(); r != nil {\n            fmt.Println(\"Recovered in f\", r)\n        }\n    }()\n    fmt.Println(\"Calling g.\")\n    g(0)\n    fmt.Println(\"Returned normally from g.\")\n}\n</code></pre><!-- [[[read_end]]] --><h3>æ¥å£</h3><p>æ¥å£æ˜¯Goä¸­å®ç°æ¨¡å—è§£è€¦ã€ä»£ç å¤ç”¨è¿˜æœ‰æ§åˆ¶ç³»ç»Ÿå¤æ‚åº¦çš„é‡è¦æ‰‹æ®µï¼Œå› æ­¤ï¼Œäº†è§£æ¥å£çš„ä½¿ç”¨æ–¹æ³•å’Œåº”ç”¨åœºæ™¯æ˜¯å¾ˆå¿…è¦çš„ã€‚åœ¨åé¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘è¿˜ä¼šè¯¦ç»†åœ°ä»‹ç»æ¥å£çš„æœ€ä½³å®è·µå’Œè®¾è®¡æ¨¡å¼ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ¥å£çš„åŸºæœ¬ç”¨æ³•ã€‚</p><p>Goä¸­çš„æ¥å£æœ‰ä¸¤ç§ç±»å‹ï¼Œåˆ†åˆ«ä¸ºâ€œå¸¦æ–¹æ³•çš„æ¥å£â€å’Œâ€œç©ºæ¥å£â€ï¼ˆä¸è€ƒè™‘æ³›å‹çš„æƒ…å†µï¼‰ã€‚ å¸¦æ–¹æ³•çš„æ¥å£å†…éƒ¨æœ‰ä¸€ç³»åˆ—æ–¹æ³•ç­¾åï¼š</p><pre><code class=\"language-plain\">type InterfaceName interface {\n\tfA()\n\tfB(a int,b string) error\n\t...\n}\n</code></pre><p>è€Œç©ºæ¥å£å†…éƒ¨ä¸åŒ…å«ä»»ä½•ä¸œè¥¿ï¼Œå¯å­˜å‚¨ä»»æ„ç±»å‹ï¼š</p><pre><code class=\"language-plain\">type Empty interface{}\n</code></pre><p>æ¥å£è¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦æŒæ¡çš„çŸ¥è¯†ç‚¹åŒ…æ‹¬ä¸‹é¢è¿™äº›ã€‚</p><ul>\n<li>æ¥å£çš„å£°æ˜ä¸å®šä¹‰ï¼š</li>\n</ul><pre><code class=\"language-plain\">type Shape interface {\n\tperimeter() float64\n\tarea() float64\n}\nvar s Shape\n</code></pre><ul>\n<li>éšå¼åœ°è®©ä¸€ä¸ªç±»å‹å®ç°æ¥å£ï¼š</li>\n</ul><pre><code class=\"language-plain\">type Rectangle struct {\n\ta, b float64\n}\nfunc (r Rectangle) perimeter() float64 {\n\treturn (r.a + r.b) * 2\n}\nfunc (r Rectangle) area() float64 {\n\treturn r.a * r.b\n}\n</code></pre><ul>\n<li>æ¥å£çš„åŠ¨æ€è°ƒç”¨æ–¹å¼ï¼š</li>\n</ul><pre><code class=\"language-plain\">var s Shape\ns = Rectangle{3, 4}\ns.perimeter()\ns.area()\n</code></pre><ul>\n<li>æ¥å£çš„åµŒå¥—ï¼š</li>\n</ul><pre><code class=\"language-plain\">type ReadWriter interface {\n\tReader\n\tWriter\n}\ntype Reader interface {\n\tRead(p []byte) (n int, err error)\n}\ntype Writer interface {\n\tWrite(p []byte) (n int, err error)\n}\n</code></pre><ul>\n<li>æ¥å£ç±»å‹æ–­è¨€ï¼š</li>\n</ul><pre><code class=\"language-plain\">func main(){\n\tvar s Shape\n\ts = Rectangle{3, 4}\n\trect := s.(Rectangle)\n\tfmt.Printf(\"é•¿æ–¹å½¢å‘¨é•¿:%v, é¢ç§¯:%v \\\\n\",rect.perimeter(),rect.area())\n}\n</code></pre><ul>\n<li>æ ¹æ®ç©ºæ¥å£ä¸­åŠ¨æ€ç±»å‹çš„å·®å¼‚é€‰æ‹©ä¸åŒçš„å¤„ç†æ–¹å¼ï¼ˆè¿™åœ¨å‚æ•°ä¸ºç©ºæ¥å£å‡½æ•°çš„å†…éƒ¨å¤„ç†ä¸­ä½¿ç”¨å¹¿æ³›ï¼Œä¾‹å¦‚fmtåº“ã€JSONåº“ï¼‰ï¼š</li>\n</ul><pre><code class=\"language-plain\">switch f := arg.(type) {\n\tcase bool:\n\t\tp.fmtBool(f, verb)\n\tcase float32:\n\t\tp.fmtFloat(float64(f), 32, verb)\n\tcase float64:\n\t\tp.fmtFloat(f, 64, verb)\n</code></pre><ul>\n<li>æ¥å£çš„æ¯”è¾ƒæ€§ï¼Œå…·ä½“è§„åˆ™ä¸ºï¼š\n<ul>\n<li>åŠ¨æ€ç±»å‹å€¼ä¸ºnil çš„æ¥å£å˜é‡æ€»æ˜¯ç›¸ç­‰çš„</li>\n<li>å¦‚æœåªæœ‰1ä¸ªæ¥å£ä¸ºnilï¼Œé‚£ä¹ˆæ¯”è¾ƒç»“æœæ€»æ˜¯false</li>\n<li>å¦‚æœä¸¤ä¸ªæ¥å£éƒ½ä¸ä¸ºnilï¼Œä¸”æ¥å£å˜é‡å…·æœ‰ç›¸åŒçš„åŠ¨æ€ç±»å‹å’ŒåŠ¨æ€ç±»å‹å€¼ï¼Œé‚£ä¹ˆä¸¤ä¸ªæ¥å£æ˜¯ç›¸åŒçš„ã€‚å…³äºç±»å‹çš„å¯æ¯”è¾ƒæ€§ï¼Œå¯ä»¥å‚è§ä¸Šä¸€èŠ‚è¯¾ä¸­ç»“æ„ä½“çš„æ¯”è¾ƒæ€§ã€‚</li>\n<li>å¦‚æœæ¥å£å­˜å‚¨çš„åŠ¨æ€ç±»å‹å€¼æ˜¯ä¸å¯æ¯”è¾ƒçš„ï¼Œé‚£ä¹ˆåœ¨è¿è¡Œæ—¶ä¼šæŠ¥é”™ã€‚</li>\n</ul>\n</li>\n</ul><p>é™¤æ­¤ä¹‹å¤–ï¼ŒGoè¯­è¨€çš„ç‰¹æ€§åŒ…æ‹¬ï¼šå¤„ç†å…ƒæ•°æ®çš„åå°„ã€å¤„ç†æŒ‡é’ˆçš„unsafeåŒ…ï¼Œä»¥åŠè°ƒç”¨cå‡½æ•°çš„cgoç­‰ã€‚åå°„çš„åŸºç¡€æ˜¯æ¥å£ï¼Œå®è·µä¸­åå°„ä½¿ç”¨ä¸å¤šï¼Œä½†åœ¨ä¸€äº›åŸºç¡€åº“ã€ç½‘ç»œåº“ä¸­ä½¿ç”¨è¾ƒå¤šã€‚unsafeåŒ…è¯­ä¹‰ä¸Šä¸å…·å¤‡å…¼å®¹æ€§ï¼›cgoä¹¦å†™ä¸è°ƒè¯•å›°éš¾ï¼Œä¸å—è¿è¡Œæ—¶çš„ç®¡ç†ã€‚è¿™äº›æŠ€æœ¯æ¯”è¾ƒå¤æ‚è€Œä¸”ä¸å¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰æŠŠå®ƒä»¬æ”¾åˆ°â€œåŸºç¡€çŸ¥è¯†â€è¿™ä¸€éƒ¨åˆ†ã€‚</p><p>Goä¸­è¿˜æœ‰ä¸€å—é‡è¦çš„è¯­æ³•ç‰¹æ€§æ¶‰åŠåˆ°å¹¶å‘åŸè¯­ï¼Œå³åç¨‹ä¸é€šé“ã€‚å› ä¸ºå¹¶å‘æä¸ºé‡è¦ï¼Œæˆ‘ä»¬å•æ‹å‡ºæ¥è®²è§£ã€‚</p><h2>å¹¶å‘ç¼–ç¨‹</h2><p>Goå‘æ¥ä»¥å®¹æ˜“ç¼–å†™é«˜å¹¶å‘ç¨‹åºè€Œé—»åï¼Œè¿™æ˜¯å®ƒåŒºåˆ«äºå…¶ä»–è¯­è¨€çš„ç‰¹ç‚¹ä¹‹ä¸€ã€‚åœ¨Goè¯­è¨€ä¸­ä¸å¹¶å‘ç¼–ç¨‹ç´§å¯†ç›¸å…³çš„å°±æ˜¯åç¨‹ä¸é€šé“ã€‚å¯¹äºåç¨‹ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åŒºåˆ†ä¸‹é¢å‡ ä¸ªé‡è¦çš„æ¦‚å¿µã€‚</p><ul>\n<li><strong>è¿›ç¨‹ã€çº¿ç¨‹ä¸åç¨‹ã€‚</strong>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèµ„æºè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚è€Œåç¨‹ä½äºç”¨æˆ·æ€ï¼Œæ˜¯åœ¨çº¿ç¨‹åŸºç¡€ä¸Šæ„å»ºçš„è½»é‡çº§è°ƒåº¦å•ä½ã€‚</li>\n<li><strong>å¹¶å‘ä¸å¹¶è¡Œã€‚</strong>å¹¶è¡ŒæŒ‡çš„æ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ï¼Œå¹¶å‘æ˜¯æŒ‡åŒæ—¶ç®¡ç†å¾ˆå¤šäº‹æƒ…ã€‚</li>\n<li><strong>ä¸»åç¨‹ä¸å­åç¨‹ã€‚</strong> mainå‡½æ•°æ˜¯ç‰¹æ®Šçš„ä¸»åç¨‹ï¼Œå®ƒé€€å‡ºä¹‹åæ•´ä¸ªç¨‹åºéƒ½ä¼šé€€å‡ºã€‚è€Œå…¶ä»–çš„åç¨‹éƒ½æ˜¯å­åç¨‹ï¼Œå­åç¨‹é€€å‡ºä¹‹åï¼Œç¨‹åºæ­£å¸¸è¿è¡Œã€‚</li>\n</ul><p>Goè¯­è¨€è¿è¡Œæ—¶ä¸ºæˆ‘ä»¬æ‰˜ç®¡äº†åç¨‹çš„å¯åŠ¨ä¸è°ƒåº¦å·¥ä½œï¼Œæˆ‘ä»¬å…³å¿ƒçš„é‡ç‚¹åªè¦æ”¾åœ¨å¦‚ä½•ä¼˜é›…å®‰å…¨åœ°å…³é—­åç¨‹ï¼Œä»¥åŠå¦‚ä½•è¿›è¡Œåç¨‹é—´çš„é€šä¿¡å°±å¯ä»¥äº†ã€‚</p><p>Go è¯­è¨€å®ç°äº†CSP å¹¶å‘ç¼–ç¨‹æ¨¡å¼ï¼ŒæŠŠé€šé“å½“ä½œGoè¯­è¨€ä¸­çš„ä¸€ç­‰å…¬æ°‘ï¼Œé€šé“çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼åŒ…æ‹¬ä¸‹é¢å‡ ç‚¹ã€‚</p><ul>\n<li>é€šé“å£°æ˜ä¸åˆå§‹åŒ–ï¼š</li>\n</ul><pre><code class=\"language-plain\">chan int\nchan &lt;- float\n&lt;-chan string\n</code></pre><ul>\n<li>é€šé“å†™å…¥æ•°æ®ï¼š</li>\n</ul><pre><code class=\"language-plain\">c &lt;- 5\n</code></pre><ul>\n<li>é€šé“è¯»å–æ•°æ®ï¼š</li>\n</ul><pre><code class=\"language-plain\">data := &lt;-c\n</code></pre><ul>\n<li>é€šé“å…³é—­ï¼š</li>\n</ul><pre><code class=\"language-plain\">close(c)\n</code></pre><ul>\n<li>é€šé“ä½œä¸ºå‚æ•°ï¼š</li>\n</ul><pre><code class=\"language-plain\">func worker(id int, c chan int) {\n\tfor n := range c {\n\t\tfmt.Printf(\"Worker %d received %c\\\\n\",\n\t\t\tid, n)\n\t}\n}\n</code></pre><ul>\n<li>é€šé“ä½œä¸ºè¿”å›å€¼ï¼ˆä¸€èˆ¬ç”¨äºåˆ›å»ºé€šé“çš„é˜¶æ®µï¼‰ï¼š</li>\n</ul><pre><code class=\"language-plain\">func createWorker(id int) chan int {\n\tc := make(chan int)\n\tgo worker(id, c)\n\treturn c\n}\n</code></pre><ul>\n<li>å•æ–¹å‘çš„é€šé“ï¼Œç”¨äºåªè¯»å’Œåªå†™åœºæ™¯ï¼š</li>\n</ul><pre><code class=\"language-plain\">func worker(id int, c &lt;-chan int)\n</code></pre><ul>\n<li>select ç›‘å¬å¤šä¸ªé€šé“å®ç°å¤šè·¯å¤ç”¨ã€‚å½“caseä¸­å¤šä¸ªé€šé“çŠ¶æ€å‡†å¤‡å°±ç»ªæ—¶ï¼Œselectéšæœºé€‰æ‹©ä¸€ä¸ªåˆ†æ”¯è¿›è¡Œæ‰§è¡Œï¼š</li>\n</ul><pre><code class=\"language-plain\">select {\n\tcase &lt;-ch1:\n\t\t// ...\n\tcase x := &lt;-ch2:\n\t\t// ...use x...\n\tcase ch3 &lt;- y:\n\t\t// ...\n\tdefault:\n\t\t// ...\n\t}\n</code></pre><p>Goé™¤äº†ä½¿ç”¨é€šé“å®Œæˆåç¨‹é—´çš„é€šä¿¡å¤–ï¼Œè¿˜æä¾›äº†ä¸€äº›å…¶ä»–æ‰‹æ®µã€‚</p><ul>\n<li>ç”¨contextæ¥å¤„ç†åç¨‹çš„ä¼˜é›…é€€å‡ºå’Œçº§è”é€€å‡ºï¼Œæˆ‘ä»¬åœ¨åé¢çš„è¯¾ç¨‹ä¸­è¿˜ä¼šè¯¦ç»†ä»‹ç»ã€‚</li>\n</ul><pre><code class=\"language-plain\">func Stream(ctx context.Context, out chan&lt;- Value) error {\n\tfor {\n\t\tv, err := DoSomething(ctx)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\t\tselect {\n\t\tcase &lt;-ctx.Done():\n\t\t\treturn ctx.Err()\n\t\tcase out &lt;- v:\n\t\t}\n\t}\n</code></pre><ul>\n<li>ä¼ ç»Ÿçš„åŒæ­¥åŸè¯­ï¼šåŸå­é”ã€‚Go æä¾›äº†atomic åŒ…ç”¨äºå¤„ç†åŸå­æ“ä½œã€‚</li>\n</ul><pre><code class=\"language-plain\">func add() {\n\tfor {\n\t\tif atomic.CompareAndSwapInt64(&amp;flag, 0, 1) {\n\t\t\tcount++\n\t\t\tatomic.StoreInt64(&amp;flag, 0)\n\t\t\treturn\n\t\t}\n\t}\n}\n</code></pre><ul>\n<li>ä¼ ç»Ÿçš„åŒæ­¥åŸè¯­ï¼šäº’æ–¥é”ã€‚</li>\n</ul><pre><code class=\"language-plain\">var m sync.Mutex\nfunc add() {\n\tm.Lock()\n\tcount++\n\tm.Unlock()\n}\n</code></pre><ul>\n<li>ä¼ ç»Ÿçš„åŒæ­¥åŸè¯­ï¼šè¯»å†™é”ã€‚é€‚åˆå¤šè¯»å°‘å†™åœºæ™¯ã€‚</li>\n</ul><pre><code class=\"language-plain\">type Stat struct {\n\tcounters map[string]int64\n\tmutex sync.RWMutex\n}\nfunc (s *Stat) getCounter(name string) int64 {\n\ts.mutex.RLock()\n\tdefer s.mutex.RUnlock()\n\treturn s.counters[name]\n}\nfunc (s *Stat) SetCounter(name string){\n\ts.mutex.Lock()\n\tdefer s.mutex.Unlock()\n\ts.counters[name]++\n}\n</code></pre><ul>\n<li>é™¤æ­¤ä¹‹å¤–ï¼ŒGoè¯­è¨€åœ¨ä¼ ç»Ÿçš„åŒæ­¥åŸè¯­åŸºç¡€ä¸Šè¿˜æä¾›äº†è®¸å¤šæœ‰ç”¨çš„åŒæ­¥å·¥å…·ï¼ŒåŒ…æ‹¬sync.Onceã€sync.Condã€sync.WaitGroupã€‚æˆ‘ä»¬åœ¨åé¢ä»‹ç»é«˜å¹¶å‘æ¨¡å‹çš„è¯¾ç¨‹ä¸­ï¼Œè¿˜ä¼šè¯¦ç»†ä»‹ç»å®ƒä»¬ã€‚</li>\n</ul><h2>é¡¹ç›®ç»„ç»‡</h2><p>åˆšæ‰ï¼Œæˆ‘ä»¬æ€»æ‹¬å¼åœ°äº†è§£äº†Goè¯­è¨€ä¸­çš„ä¸€äº›åŸºæœ¬è¯­æ³•ï¼Œä½†æ˜¯è¦æ„å»ºä¸€ä¸ªå¤§å‹ç³»ç»Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œä½¿ç”¨å…¶ä»–äººå·²ç»å†™å¥½çš„ä»£ç åº“ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç®¡ç†å¥½é¡¹ç›®ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚</p><h3>ä¾èµ–ç®¡ç†</h3><p>Goçš„ä¾èµ–ç®¡ç†ç»å†äº†é•¿æ—¶é—´çš„æ¼”è¿›ã€‚ ç°å¦‚ä»Šï¼ŒGo Moduleå·²ç»æˆä¸ºäº†ä¾èµ–ç®¡ç†çš„äº‹å®æ ‡å‡†ï¼ŒæŒæ¡Go Moduleçš„åŸºç¡€ç”¨æ³•å·²ç»æˆä¸ºGoè¯­è¨€ä½¿ç”¨è€…çš„å¿…å¤‡æŠ€èƒ½ï¼ˆå…³äºGo Moduleçš„æ¼”è¿›ã€ä½¿ç”¨å’ŒåŸç†ï¼Œåé¢æˆ‘ä»¬è¿˜ä¼šæœ‰æ›´æ·±å…¥çš„ä»‹ç»ï¼‰ã€‚</p><pre><code class=\"language-plain\">module github.com/dreamerjackson/crawler\n\ngo 1.18\n\nrequire (\n\tgithub.com/PuerkitoBio/goquery v1.8.0 // indirect\n\tgithub.com/andybalholm/cascadia v1.3.1 // indirect\n\tgithub.com/antchfx/htmlquery v1.2.5 // indirect\n\tgithub.com/antchfx/xpath v1.2.1 // indirect\n)\n</code></pre><p>é™¤æ­¤ä¹‹å¤–ï¼Œç†è§£GOPATHè¿™ç§å•ä¸€å·¥ä½œåŒºçš„ä¾èµ–ç®¡ç†æ–¹å¼ä¹Ÿæ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œå› ä¸ºå®ƒç°é˜¶æ®µå¹¶æ²¡æœ‰å®Œå…¨è¢«åºŸå¼ƒã€‚</p><h3>é¢å‘ç»„åˆ</h3><p>æ„å»ºå¤§è§„æ¨¡ç¨‹åºéœ€è¦æˆ‘ä»¬å®Œæˆå¿…è¦çš„æŠ½è±¡ï¼Œè¿™æ ·æ‰èƒ½å±è”½ä¸€äº›ç»†èŠ‚ï¼Œç„¶åä»æ›´é«˜çš„å±‚é¢å»æ„å»ºå¤§è§„æ¨¡ç¨‹åºã€‚ä¹‹å‰ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸€äº›æ¯”è¾ƒç»å…¸çš„æ€æƒ³ï¼Œæ¯”å¦‚å‡½æ•°ç”¨äºè¿‡ç¨‹çš„æŠ½è±¡ã€è‡ªå®šä¹‰ç»“æ„ä½“ç”¨äºæ•°æ®çš„æŠ½è±¡ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªâ€œè€å­¦ç©¶â€ï¼Œæˆ‘çœŸçš„å»ºè®®ä½ å»é˜…è¯»ä¸€ä¸‹ã€ŠStructure and Interpretation of Computer Programsã€‹è¿™æœ¬ä¹¦ï¼Œæ„Ÿå—ä¸€ä¸‹è¿™äº›æˆ‘ä»¬ä¹ ä»¥ä¸ºå¸¸çš„ç®€å•å…ƒç´ èƒŒåçš„éå‡¡å“²å­¦ã€‚</p><p>åœ¨ç†è§£äº†è¿‡ç¨‹æŠ½è±¡ä¸æ•°æ®æŠ½è±¡ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹å¦ä¸€ç§ã€ç®€å•è€Œåˆå¼ºå¤§çš„è®¾è®¡å“²å­¦â€”â€”é¢å‘ç»„åˆã€‚é¢å‘ç»„åˆå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ŒæˆåŠŸèƒ½ä¹‹é—´çš„æ­£äº¤ç»„åˆï¼Œè½»æ¾æ„å»ºèµ·å¤æ‚çš„ç¨‹åºï¼Œè¿˜å¯ä»¥ä½¿æˆ‘ä»¬çµæ´»åº”å¯¹ç¨‹åºåœ¨æœªæ¥çš„å˜åŒ–ã€‚</p><p>ä¸‹é¢æˆ‘ä¸¾ä¸€ä¸ªåœ¨IOæ“ä½œä¸­å®ç°é¢å‘ç»„åˆæ€æƒ³çš„ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code class=\"language-plain\">type Reader interface {\n    Read(p []byte) (n int, err error)\n}\n\ntype Writer interface {\n    Write(p []byte) (n int, err error)\n}\n\n// ç»„åˆäº†Readä¸WriteåŠŸèƒ½\ntype ReadWriter interface {\n    Reader\n    Writer\n}\n\ntype doc struct{\n\t file *os.File\n}\n\nfunc (d *doc) Read(p []byte) (n int, err error){\n\t\tp,err := ioutil.ReadAll(d.file)\n\t  ...\n}\n\n// v1 ç‰ˆæœ¬\nfunc handle(r Reader){\n\tr.Read()\n\t ...\n}\n\n// v2 ç‰ˆæœ¬\nfunc handle(rw ReadWriter){\n\trw.Read()  \n\trw.Write()\n\t...\n}\n</code></pre><p>Readeræ¥å£åŒ…å«äº†Readæ–¹æ³•ï¼ŒWriteræ¥å£åŒ…å«äº†Writeæ–¹æ³•ã€‚å‡è®¾æˆ‘ä»¬çš„ä¸šåŠ¡æ˜¯å¤„ç†æ–‡æ¡£ç›¸å…³çš„æ“ä½œï¼Œç±»å‹docä¸€å¼€å§‹å®ç°äº†ReadåŠŸèƒ½ï¼Œå°†æ–‡ä»¶å†…å®¹è¯»å–åˆ°ä¼ é€’çš„ç¼“å†²åŒºä¸­ï¼Œå‡½æ•°handleä¸­çš„å‚æ•°ä¸ºæ¥å£Readerã€‚</p><p>åæ¥éšç€ä¸šåŠ¡å‘å±•ï¼Œæˆ‘ä»¬åˆéœ€è¦å®ç°æ–‡æ¡£å†™çš„åŠŸèƒ½ï¼Œè¿™æ—¶æˆ‘ä»¬å°†å‡½æ•°handleçš„å‚æ•°ä¿®æ”¹ä¸ºåŠŸèƒ½æ›´å¼ºå¤§çš„æ¥å£ReadWriterã€‚è€Œdocåªéœ€è¦å®ç°Writeræ¥å£ï¼Œå°±éšå¼åœ°å®ç°äº†è¿™ä¸ªReadWriteræ¥å£ã€‚è¿™æ ·ï¼Œé€šè¿‡ç»„åˆï¼Œæˆ‘ä»¬å°±ä¸åŠ¨å£°è‰²åœ°å®Œæˆäº†ä»£ç ä¸åŠŸèƒ½çš„æ‰©å±•ã€‚</p><p>å¦‚æœä½ æƒ³è¿›ä¸€æ­¥äº†è§£ç»“æ„ä½“ä¸æ¥å£çš„ç»„åˆï¼Œå¯ä»¥æŸ¥çœ‹ <a href=\"https://go.dev/doc/effective_go#embedding\">Effective Go</a> çš„æè¿°ã€‚åé¢çš„è¯¾ç¨‹æˆ‘ä»¬è¿˜ä¼šå®è·µé¢å‘ç»„åˆçš„è®¾è®¡å“²å­¦ã€‚</p><h2>å·¥å…·ä¸åº“</h2><p>Goè‡´åŠ›äºæˆä¸ºå¤§è§„æ¨¡è½¯ä»¶é¡¹ç›®çš„ä¼˜ç§€å·¥å…·ï¼Œå› æ­¤å®ƒä¸ä»…éœ€è¦åœ¨è¯­æ³•ä¸Šç»™å‡ºè‡ªå·±çš„è§£å†³æ–¹æ¡ˆï¼Œè¿˜éœ€è¦åœ¨æ•´ä¸ªè½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼ˆç¼–è¾‘ã€æµ‹è¯•ã€ç¼–è¯‘ã€éƒ¨ç½²ã€è°ƒè¯•ã€åˆ†æï¼‰æœ‰å®Œå–„çš„æ ‡å‡†åº“å’Œå·¥å…·ã€‚éšç€Goçš„å‘å±•ï¼Œä¹Ÿå‡ºç°äº†è¶Šæ¥è¶Šå¤šä¼˜ç§€çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p><h3>å·¥å…·ï¼šä»£ç åˆ†æä¸ä»£ç è§„èŒƒ</h3><p>Goè‡ªå¸¦äº†è®¸å¤šå·¥å…·ï¼Œå®ƒä»¬å¯ä»¥è§„èŒƒä»£ç ã€æé«˜å¯è¯»æ€§ï¼Œä¿ƒè¿›å›¢é˜Ÿåä½œã€æ£€æŸ¥ä»£ç é”™è¯¯ç­‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°†è¿™ç§å·¥å…·åˆ†ä¸ºé™æ€ä¸åŠ¨æ€ä¸¤ç§ç±»å‹ã€‚å…¶ä¸­ï¼Œé™æ€å·¥å…·å¯¹ä»£ç è¿›è¡Œé™æ€æ‰«æï¼Œæ£€æŸ¥ä»£ç çš„ç»“æ„ã€ä»£ç é£æ ¼ä»¥åŠè¯­æ³•é”™è¯¯ï¼Œè¿™ç§å·¥å…·ä¹Ÿè¢«ç§°ä¸ºLinterã€‚</p><ul>\n<li>go fmt</li>\n</ul><p>é™æ€å·¥å…·åŒ…æ‹¬äº†æˆ‘ä»¬ç†ŸçŸ¥çš„<code>go fmt</code> ï¼Œå®ƒå¯ä»¥æ ¼å¼åŒ–ä»£ç ï¼Œè§„èŒƒä»£ç çš„é£æ ¼ï¼š</p><pre><code class=\"language-plain\">go fmt path/to/your/package\n</code></pre><p>é™¤äº†<code>go fmt</code>ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<code>gofmt</code> å‘½ä»¤å¯¹å•ç‹¬çš„æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–ã€‚</p><pre><code class=\"language-plain\">gofmt -w yourcode.go\n</code></pre><p><code>gofmt</code> è¿˜å¯ä»¥å®Œæˆæ›¿æ¢çš„å·¥ä½œï¼Œè¿™é‡Œä¸å†å±•å¼€ï¼Œå¦‚æœæƒ³äº†è§£æ›´å¤šï¼Œä½ å¯ä»¥ç”¨<code>gofmt --help</code>æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ã€‚</p><ul>\n<li>go doc</li>\n</ul><p>go docå·¥å…·å¯ä»¥ç”Ÿæˆå’Œé˜…è¯»ä»£ç çš„æ–‡æ¡£è¯´æ˜ã€‚æ–‡æ¡£æ˜¯ä½¿è½¯ä»¶å¯è®¿é—®å’Œå¯ç»´æŠ¤çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚å½“ç„¶ï¼Œå®ƒéœ€è¦å†™å¾—å¥½ä¸”å‡†ç¡®ï¼Œä¹Ÿéœ€è¦æ˜“äºç¼–å†™å’Œç»´æŠ¤ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ–‡æ¡£æ³¨é‡Šåº”è¯¥ä¸ä»£ç æœ¬èº«è€¦åˆï¼Œä»¥ä¾¿æ–‡æ¡£ä¸ä»£ç ä¸€èµ·å‘å±•ã€‚ go doc å¯ä»¥è§£æ Go æºä»£ç ï¼ˆåŒ…æ‹¬æ³¨é‡Šï¼‰ï¼Œ å¹¶ç”Ÿæˆ HTML æˆ–çº¯æ–‡æœ¬å½¢å¼çš„æ–‡æ¡£ã€‚ä¾‹å¦‚å¯ä»¥æŸ¥çœ‹<a href=\"https://pkg.go.dev/bufio\">æ ‡å‡†åº“bufioçš„æ–‡æ¡£</a>ã€‚</p><ul>\n<li>go vet</li>\n</ul><p>go vet æ˜¯Goå®˜æ–¹æä¾›çš„ä»£ç é™æ€è¯Šæ–­å™¨ï¼Œä»–å¯ä»¥å¯¹ä»£ç é£æ ¼è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶ä¸”æŠ¥å‘Šå¯èƒ½æœ‰é—®é¢˜çš„åœ°æ–¹ï¼Œä¾‹å¦‚é”™è¯¯çš„é”ä½¿ç”¨ã€ä¸å¿…è¦çš„èµ‹å€¼ç­‰ã€‚ go vet å¯å‘å¼çš„é—®é¢˜è¯Šæ–­æ–¹æ³•ä¸èƒ½ä¿è¯æ‰€æœ‰è¾“å‡ºéƒ½çœŸæ­£æœ‰é—®é¢˜ï¼Œä½†å®ƒç¡®å®å¯ä»¥æ‰¾åˆ°ä¸€äº›ç¼–è¯‘å™¨æ— æ³•æ•è·çš„é”™è¯¯ã€‚</p><p>ç”±äº go vet æœ¬èº«æ˜¯å¤šç§Linterçš„èšåˆå™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>go tool vet help</code> å‘½ä»¤æŸ¥çœ‹å®ƒæ‹¥æœ‰çš„åŠŸèƒ½ã€‚Goè¯­è¨€ä¸ºè¿™ç§ä»£ç çš„é™æ€åˆ†ææä¾›äº†æ ‡å‡†åº“<a href=\"https://pkg.go.dev/golang.org/x/tools/go/analysis\">go/analysis</a>ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬åªç”¨éµå¾ªä¸€äº›é€šç”¨çš„è§„åˆ™å°±å¯ä»¥å†™å‡ºé€‚åˆè‡ªå·±çš„åˆ†æå·¥å…·ã€‚è¿™è¿˜æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¯¹ä¼—å¤šçš„é™æ€åˆ†æå™¨è¿›è¡Œé€‰æ‹©ã€åˆå¹¶ã€‚</p><ul>\n<li>golangci-lint</li>\n</ul><p>ä¸è¿‡ï¼Œå½“å‰ä¼ä¸šä¸­ä½¿ç”¨å¾—æœ€æ™®éçš„ä¸æ˜¯ go vet è€Œæ˜¯<a href=\"https://golangci-lint.run/\">golangci-lint</a>ã€‚è¿™æ˜¯å› ä¸ºGoä¸­çš„åˆ†æå™¨éå¸¸å®¹æ˜“ç¼–å†™ï¼Œç¤¾åŒºå·²ç»åˆ›å»ºäº†è®¸å¤šæœ‰ç”¨çš„Linterï¼Œè€Œgolangci-lintæ­£æ˜¯å¯¹å¤šç§Linterçš„é›†åˆã€‚è¦æŸ¥çœ‹ golangci-lint æ”¯æŒçš„ Linter åˆ—è¡¨ä»¥åŠgolangci-lintå¯ç”¨/ç¦ç”¨å“ªäº› Linterï¼Œå¯ä»¥é€šè¿‡<code>golangci-lint help linters</code> æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£æˆ–è€…æŸ¥çœ‹<a href=\"https://golangci-lint.run/\">golangci-lintçš„å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><ul>\n<li>go race</li>\n</ul><p>Go 1.1 åæä¾›äº†å¼ºå¤§çš„æ£€æŸ¥å·¥å…·raceï¼Œå®ƒå¯ä»¥æ’æŸ¥æ•°æ®äº‰ç”¨é—®é¢˜ã€‚race å¯ä»¥ç”¨åœ¨å¤šä¸ªGoæŒ‡ä»¤ä¸­ã€‚</p><pre><code class=\"language-plain\">$ go test -race mypkg\n$ go run -race mysrc.go\n$ go build -race mycmd\n$ go install -race mypkg\n</code></pre><p>å½“æ£€æµ‹å™¨åœ¨ç¨‹åºä¸­å‘ç°æ•°æ®äº‰ç”¨æ—¶ï¼Œå°†æ‰“å°æŠ¥å‘Šã€‚è¿™ä»½æŠ¥å‘ŠåŒ…å«å‘ç”Ÿraceå†²çªçš„åç¨‹æ ˆï¼Œä»¥åŠæ­¤æ—¶æ­£åœ¨è¿è¡Œçš„åç¨‹æ ˆã€‚</p><pre><code class=\"language-plain\">Â» go run -race 2_race.go\n==================\nWARNING: DATA RACE\nRead at 0x00000115c1f8 by goroutine 7:\nmain.add()\nbookcode/concurrence_control/2_race.go:5 +0x3a\nPrevious write at 0x00000115c1f8 by goroutine 6:\nmain.add()\nbookcode/concurrence_control/2_race.go:5 +0x56\n</code></pre><p><strong>åŠ¨æ€å·¥å…·æŒ‡çš„æ˜¯éœ€è¦å®é™…è¿è¡ŒæŒ‡å®šä»£ç æ‰èƒ½å¤Ÿåˆ†æå‡ºé—®é¢˜çš„å·¥å…·ã€‚</strong>go raceå·¥å…·å¯ä»¥å®Œæˆé™æ€åˆ†æï¼Œä½†æ˜¯æœ‰äº›å¹¶å‘å†²çªæ˜¯é™æ€åˆ†æéš¾ä»¥å‘ç°çš„ï¼Œæ‰€ä»¥go raceåœ¨è¿è¡Œæ—¶ä¹Ÿå¯ä»¥å¼€å¯ï¼Œå®ŒæˆåŠ¨æ€çš„æ•°æ®äº‰ç”¨æ£€æµ‹ï¼Œä¸€èˆ¬åœ¨ä¸Šçº¿ä¹‹å‰ä½¿ç”¨ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒåŠ¨æ€å·¥å…·è¿˜åŒ…æ‹¬äº†ä»£ç æµ‹è¯•ã€è°ƒè¯•ç­‰é˜¶æ®µä½¿ç”¨åˆ°çš„å·¥å…·ã€‚</p><h3>å·¥å…·ï¼šä»£ç æµ‹è¯•</h3><ul>\n<li><strong>go test</strong></li>\n</ul><p>åœ¨Goä¸­ï¼Œæµ‹è¯•å‡½æ•°ä½äºå•ç‹¬çš„ä»¥_test.goç»“å°¾çš„æ–‡ä»¶ä¸­ï¼Œæµ‹è¯•å‡½æ•°åä»¥<code>Test</code> å¼€å¤´ã€‚go testä¼šè¯†åˆ«è¿™äº›æµ‹è¯•æ–‡ä»¶å¹¶è¿›è¡Œæµ‹è¯•ã€‚æµ‹è¯•åŒ…æ‹¬å•å…ƒæµ‹è¯•ã€Benchmarkæµ‹è¯•ç­‰ã€‚</p><p><strong>å•å…ƒæµ‹è¯•æŒ‡çš„æ˜¯æµ‹è¯•ä»£ç ä¸­çš„æŸä¸€ä¸ªå‡½æ•°æˆ–è€…åŠŸèƒ½ï¼Œ</strong>å®ƒèƒ½å¸®åŠ©æˆ‘ä»¬éªŒè¯å‡½æ•°åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼Œå„ç§è¾¹ç•Œæ¡ä»¶æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚å•å…ƒæµ‹è¯•æ˜¯ä¿è¯ä»£ç å¥å£®æ€§çš„é‡è¦æ‰‹æ®µã€‚</p><p>Goä¸­æ¯”è¾ƒæœ‰ç‰¹è‰²çš„å•å…ƒæµ‹è¯•å«åšè¡¨æ ¼æµ‹è¯•ã€‚é€šè¿‡è¡¨æ ¼æµ‹è¯•å¯ä»¥ç®€å•åœ°æµ‹è¯•å¤šä¸ªåœºæ™¯ã€‚å¦‚ä¸‹æ‰€ç¤ºã€‚å¦å¤–ï¼Œæµ‹è¯•ä¸­è¿˜æœ‰ä¸€äº›ç‰¹æ€§ä¾‹å¦‚t.Runæ”¯æŒå¹¶å‘æµ‹è¯•ï¼Œè¿™èƒ½åŠ å¿«æµ‹è¯•çš„é€Ÿåº¦ï¼Œå³ä¾¿æŸä¸€ä¸ªå­æµ‹è¯•ï¼ˆsubtestï¼‰å¤±è´¥ï¼Œå…¶ä»–å­æµ‹è¯•ä¹Ÿä¼šå®Œæˆæµ‹è¯•ã€‚</p><pre><code class=\"language-plain\">func TestSplit(t *testing.T) {\n\ttests := map[string]struct {\n\t\tinput string\n\t\tsep   string\n\t\twant  []string\n\t}{\n\t\t\"simple\":       {input: \"a/b/c\", sep: \"/\", want: []string{\"a\", \"b\", \"c\"}},\n\t\t\"wrong sep\":    {input: \"a/b/c\", sep: \",\", want: []string{\"a/b/c\"}},\n\t\t\"no sep\":       {input: \"abc\", sep: \"/\", want: []string{\"abc\"}},\n\t\t\"trailing sep\": {input: \"a/b/c/\", sep: \"/\", want: []string{\"a\", \"b\", \"c\"}},\n\t}\n\n\tfor name, tc := range tests {\n\t\tt.Run(name, func(t *testing.T) {\n\t\t\tgot := Split(tc.input, tc.sep)\n\t\t\tif !reflect.DeepEqual(tc.want, got) {\n\t\t\t\tt.Fatalf(\"expected: %#v, got: %#v\", tc.want, got)\n\t\t\t}\n\t\t})\n\t}\n}\n</code></pre><ul>\n<li><strong>go test -cover</strong><br>\næ‰§è¡Œgo testå‘½ä»¤æ—¶ï¼ŒåŠ å…¥coverå‚æ•°èƒ½å¤Ÿç»Ÿè®¡å‡ºæµ‹è¯•ä»£ç çš„è¦†ç›–ç‡ã€‚</li>\n</ul><pre><code class=\"language-plain\">% go test -cover\nPASS\ncoverage: 42.9% of statements\nok      size    0.026s\n%\n</code></pre><ul>\n<li><strong>go tool cover</strong></li>\n</ul><p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ”¶é›†è¦†ç›–ç‡æ–‡ä»¶å¹¶è¿›è¡Œå¯è§†åŒ–çš„å±•ç¤ºã€‚</p><p>å…·ä½“çš„åšæ³•æ˜¯ï¼Œåœ¨æ‰§è¡Œgo testå‘½ä»¤æ—¶åŠ å…¥coverprofileå‚æ•°ï¼Œç”Ÿæˆä»£ç è¦†ç›–ç‡æ–‡ä»¶ã€‚ç„¶åä½¿ç”¨&nbsp;<code>go tool cover</code>&nbsp;å¯è§†åŒ–åˆ†æä»£ç è¦†ç›–ç‡çš„ä¿¡æ¯ã€‚</p><pre><code class=\"language-plain\">&gt; go test -coverprofile .coverage.txt\n&gt; go tool cover -func .coverage.txt\n</code></pre><ul>\n<li><strong>go test -bench</strong><br>\nGoè¿˜å¯ä»¥è¿›è¡ŒBenchmarkæµ‹è¯•ï¼Œè¦æµ‹è¯•å‡½æ•°çš„å‰ç¼€åéœ€è¦ä¸ºBenchmarkã€‚</li>\n</ul><pre><code class=\"language-plain\">func BenchmarkFibonacci(b *testing.B) {\n\tfor i := 0; i &lt; b.N; i++ {\n\t\t_ = Fibonacci(30)\n\t}\n}\n</code></pre><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰§è¡Œgo test -benchä¹‹åï¼Œç¨‹åºä¼šåœ¨1ç§’åæ‰“å°å‡ºåœ¨è¿™æ®µæ—¶é—´é‡Œå†…éƒ¨å‡½æ•°çš„è¿è¡Œæ¬¡æ•°å’Œæ—¶é—´ã€‚</p><p>åœ¨è¿›è¡ŒBenchMarkæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šä¸€äº›å…¶ä»–è¿è¡Œå‚æ•°ã€‚ä¾‹å¦‚ï¼Œâ€œ-benchmemâ€å¯ä»¥æ‰“å°æ¯æ¬¡å‡½æ•°çš„å†…å­˜åˆ†é…æƒ…å†µï¼Œâ€œcpuprofileâ€ã€â€œmemprofileâ€è¿˜èƒ½æ”¶é›†ç¨‹åºçš„ CPU å’Œå†…å­˜çš„ profileæ–‡ä»¶ï¼Œæ–¹ä¾¿åç»­ pprofå·¥å…·è¿›è¡Œå¯è§†åŒ–åˆ†æã€‚</p><pre><code class=\"language-plain\">go test ./fibonacci \\\\\n  -bench BenchmarkSuite \\\\\n  -benchmem \\\\\n  -cpuprofile=cpu.out \\\\\n  -memprofile=mem.out\n</code></pre><h3>å·¥å…·ï¼šä»£ç è°ƒè¯•</h3><p>åœ¨ç¨‹åºè°ƒè¯•é˜¶æ®µï¼Œé™¤äº†å¯ä»¥å€ŸåŠ©åŸå§‹çš„æ—¥å¿—æ‰“å°æ¶ˆæ¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›å¸¸ç”¨çš„ç¨‹åºåˆ†æä¸è°ƒè¯•çš„å·¥å…·ã€‚</p><ul>\n<li><a href=\"https://github.com/go-delve/delve\">dlv</a></li>\n</ul><p>dlvæ˜¯Goå®˜æ–¹æä¾›çš„ä¸€ä¸ªç®€å•ã€åŠŸèƒ½é½å…¨çš„è°ƒè¯•å·¥å…·ï¼Œå®ƒå’Œä¼ ç»Ÿçš„è°ƒè¯•å™¨ gdb çš„ä½¿ç”¨æ–¹å¼æ¯”è¾ƒç±»ä¼¼ï¼Œä½†æ˜¯dlvè¿˜ä¸“é—¨æä¾›äº†ä¸GoåŒ¹é…çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æŸ¥çœ‹åç¨‹æ ˆï¼Œåˆ‡æ¢åˆ°æŒ‡å®šåç¨‹ç­‰ã€‚æˆ‘ä»¬åœ¨åé¢çš„è¯¾ç¨‹ä¸­è¿˜ä¼šæœ‰dlvçš„å®æˆ˜æ¼”ç»ƒã€‚</p><ul>\n<li><a href=\"https://go.dev/doc/gdb\">gdb</a></li>\n</ul><p>gdbæ˜¯é€šç”¨çš„ç¨‹åºè°ƒè¯•å™¨ï¼Œä½†å®ƒå¹¶ä¸æ˜¯Goç¨‹åºåœ¨è°ƒè¯•æ—¶æœ€ä¼˜çš„é€‰é¡¹ã€‚gdbå¯èƒ½åœ¨æœ‰äº›æ–¹é¢æ¯”è¾ƒæœ‰ç”¨ï¼Œä¾‹å¦‚è°ƒè¯•cgoç¨‹åºæˆ–è¿è¡Œæ—¶ã€‚ä¸è¿‡åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå»ºè®®ä½ ä¼˜å…ˆé€‰æ‹©dlvã€‚</p><ul>\n<li>pprof</li>\n</ul><p>pprof æ˜¯Goè¯­è¨€ä¸­å¯¹æŒ‡æ ‡æˆ–ç‰¹å¾è¿›è¡Œåˆ†æçš„å·¥å…·ã€‚é€šè¿‡pprofï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥æ‰¾åˆ°ç¨‹åºä¸­çš„é”™è¯¯ï¼ˆå†…å­˜æ³„æ¼ã€race å†²çªã€åç¨‹æ³„æ¼ï¼‰ï¼Œä¹Ÿèƒ½æ‰¾åˆ°ç¨‹åºçš„ä¼˜åŒ–ç‚¹ï¼ˆCPUåˆ©ç”¨ç‡ä¸è¶³ç­‰ï¼‰ã€‚</p><p>pprofåŒ…å«äº†æ ·æœ¬æ•°æ®çš„æ”¶é›†ä»¥åŠå¯¹æ ·æœ¬è¿›è¡Œåˆ†æä¸¤ä¸ªé˜¶æ®µã€‚æ”¶é›†æ ·æœ¬ç®€å•çš„æ–¹å¼æ˜¯å€ŸåŠ©net/http/pprof æ ‡å‡†åº“æä¾›çš„ä¸€å¥—HTTPæ¥å£è®¿é—®ã€‚</p><pre><code class=\"language-plain\">curl -o cpu.out&nbsp; http://localhost:9981/debug/pprof/profile?seconds=30&nbsp;\n</code></pre><p>è€Œè¦å¯¹æ”¶é›†åˆ°çš„ç‰¹å¾æ–‡ä»¶è¿›è¡Œåˆ†æï¼Œéœ€è¦ä¾èµ–è°·æ­Œæä¾›çš„åˆ†æå·¥å…·ï¼Œè¯¥å·¥å…·åœ¨Goè¯­è¨€å¤„ç†å™¨å®‰è£…æ—¶å°±å­˜åœ¨ï¼š</p><pre><code class=\"language-plain\">go tool pprof -http=localhost:8000&nbsp; cpu.out&nbsp;\n</code></pre><ul>\n<li>trace</li>\n</ul><p>æˆ‘ä»¬åœ¨pprof çš„åˆ†æä¸­ï¼Œèƒ½å¤ŸçŸ¥é“ä¸€æ®µæ—¶é—´å†…CPUçš„å ç”¨ã€å†…å­˜åˆ†é…ã€åç¨‹å †æ ˆç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯éƒ½æ˜¯ä¸€æ®µæ—¶é—´å†…æ•°æ®çš„æ±‡æ€»ï¼Œä½†æ˜¯å®ƒä»¬å¹¶æ²¡æœ‰æä¾›æ•´ä¸ªå‘¨æœŸå†…äº‹ä»¶çš„å…¨è²Œã€‚ä¾‹å¦‚ï¼ŒæŒ‡å®šçš„åç¨‹ä½•æ—¶æ‰§è¡Œï¼Œæ‰§è¡Œäº†å¤šé•¿æ—¶é—´ï¼Œä»€ä¹ˆæ—¶å€™é™·å…¥äº†å µå¡ï¼Œä»€ä¹ˆæ—¶å€™è§£é™¤äº†å µå¡ï¼ŒGC æ˜¯å¦‚ä½•å½±å“åç¨‹æ‰§è¡Œçš„ï¼ŒSTW ä¸­æ–­èŠ±è´¹çš„æ—¶é—´æœ‰å¤šé•¿ç­‰ã€‚è€ŒGo1.5ä¹‹åæ¨å‡ºçš„traceå·¥å…·è§£å†³äº†è¿™äº›é—®é¢˜ã€‚traceçš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œæä¾›äº†ç¨‹åºåœ¨æŒ‡å®šæ—¶é—´å†…å‘ç”Ÿçš„äº‹ä»¶çš„å®Œæ•´ä¿¡æ¯ï¼Œè®©æˆ‘ä»¬å¯ä»¥ç²¾å‡†åœ°æ’æŸ¥å‡ºç¨‹åºçš„é—®é¢˜æ‰€åœ¨ï¼Œåœ¨åé¢çš„è¯¾ç¨‹ä¸­ï¼Œè¿˜ä¼šç”¨traceå®Œæˆå¯¹çº¿ä¸Šå®æˆ˜æ¡ˆä¾‹çš„åˆ†æã€‚</p><ul>\n<li><a href=\"https://github.com/google/gops\">gops</a></li>\n</ul><p>gopsæ˜¯è°·æ­Œæ¨å‡ºçš„è°ƒè¯•å·¥å…·ï¼Œå®ƒçš„ä½œç”¨æ˜¯è¯Šæ–­ç³»ç»Ÿå½“å‰è¿è¡Œçš„ Go è¿›ç¨‹ã€‚gopså¯ä»¥æ˜¾ç¤ºå‡ºå½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰çš„Goè¿›ç¨‹ï¼Œå¹¶å¯ä»¥æŸ¥çœ‹ç‰¹å®šè¿›ç¨‹çš„å †æ ˆä¿¡æ¯ã€å†…å­˜ä¿¡æ¯ç­‰ã€‚</p><h3>æ ‡å‡†åº“</h3><p><strong>æ ‡å‡†åº“æ˜¯å®˜æ–¹ç»´æŠ¤çš„ï¼Œç”¨äºå¢å¼ºå’Œæ‰©å±•è¯­è¨€çš„æ ¸å¿ƒåº“ã€‚</strong>æ ‡å‡†åº“ä¸€èˆ¬æ¶µç›–äº†é€šç”¨çš„åœºæ™¯ä»¥åŠç°ä»£å¼€å‘æ‰€éœ€çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œç”¨äºæ•°å­¦è¿ç®—çš„mathåŒ…ã€ç”¨äºI/Oå¤„ç†çš„ioåŒ…ï¼Œç”¨äºå¤„ç†å­—ç¬¦ä¸²çš„stringsåŒ…ï¼Œç”¨äºå¤„ç†ç½‘ç»œçš„netåŒ…ï¼Œä»¥åŠç”¨äºå¤„ç†HTTPåè®®çš„httpåŒ…ã€‚</p><p>ç”±äºæ ‡å‡†åº“ç»è¿‡äº†å¤§é‡çš„æµ‹è¯•ï¼Œæœ‰ç¨³å®šæ€§çš„ä¿è¯ï¼Œå¹¶ä¸”æä¾›äº†å‘åå…¼å®¹æ€§ã€‚å¼€å‘è€…å¯ä»¥å€ŸåŠ©æ ‡å‡†åº“å¿«é€Ÿå®Œæˆå¼€å‘ã€‚</p><p>Goæä¾›äº†ä¼—å¤šçš„<a href=\"https://pkg.go.dev/std\">æ ‡å‡†åº“</a>ï¼š</p><pre><code class=\"language-plain\">archive   bufio      bytes     compress   container   crypto    database\ndebug     encoding   errors    expvar     flag        fmt       go\nhash      html       image     index      io          log       math\nmime      net        os        path       reflect     regexp    runtime\nsort      strconv    strings   sync       syscall     testing   text\ntime      unicode    unsafe\n</code></pre><p>ç›¸æ¯”å…¶ä»–è¯­è¨€ï¼Œå¼€å‘è€…å¯¹Goæ ‡å‡†åº“çš„ä¾èµ–æ›´å¤šã€‚Goæ ‡å‡†åº“ä¸­æä¾›äº†ä¸°å¯Œçš„å†…å®¹å’Œå¼ºæœ‰åŠ›çš„å°è£…ï¼Œæ¯”å¦‚HTTP åº“å°±å¯¹HTTPåè®®è¿›è¡Œäº†å¤§é‡çš„å°è£…ï¼ŒTCPè¿æ¥åº•å±‚ä¹Ÿé€šè¿‡å°è£…epoll/kqueue/iocpå®ç°äº†I/Oå¤šè·¯å¤ç”¨ã€‚å¼€å‘è€…ä½¿ç”¨è¿™ç§å¼€ç®±å³ç”¨çš„ç‰¹æ€§å°±å¯ä»¥ç›¸å¯¹è½»æ¾åœ°å†™å‡ºç®€æ´ã€é«˜æ€§èƒ½çš„ç¨‹åºã€‚</p><h3>ç¬¬ä¸‰æ–¹åº“</h3><p>Goè¯­è¨€ä¸­ï¼Œä¼˜ç§€çš„ç¬¬ä¸‰æ–¹åº“ã€æ¡†æ¶å’Œè½¯ä»¶å¯è°“æ±—ç‰›å……æ ‹ï¼Œå°±æ‹¿HTTPæ¡†æ¶æ¥è¯´å§ï¼Œæˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„å°±æœ‰Echoã€Ginã€Beegoç­‰çŸ¥åçš„æ¡†æ¶ã€‚è¿™äº›ä¼˜ç§€çš„ä»£ç éƒ½éå¸¸å€¼å¾—å€Ÿé‰´ä¸å­¦ä¹ ã€‚åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šä½¿ç”¨éå¸¸å¤šçš„ç¬¬ä¸‰æ–¹åº“ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒ <a href=\"https://github.com/avelino/awesome-go\">awesome-go</a> ä¸­åˆ—å‡ºçš„ä¼—å¤šä¼˜ç§€çš„Goä»£ç åº“ã€‚</p><h2>æ€»ç»“</h2><p>ä¹‹å‰çš„ä¸¤èŠ‚è¯¾ï¼Œæˆ‘ä»¬æ¢³ç†äº†Goè¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œç›¸ä¿¡ä½ å·²ç»æ„Ÿå—äº†Goåºå¤§çŸ¥è¯†ä½“ç³»å’Œè“¬å‹ƒå‘å±•çš„ç”Ÿæ€ã€‚æˆ‘åœ¨è¿™ä¸¤èŠ‚è¯¾ä¸­å¯¹åŸºç¡€çŸ¥è¯†çš„è®²è§£èµ·åˆ°äº†ä¸€ä¸ªæçº²æŒˆé¢†çš„ä½œç”¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿåœ°è¿›è¡ŒæŸ¥æ¼è¡¥ç¼ºã€‚</p><p>ä¸ºäº†å¸®åŠ©åˆå­¦è€…å­¦ä¹ Goè¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘åœ¨ä¸šä½™æ—¶é—´ä¹Ÿåœ¨å®Œæˆä¸€å¥—å¼€æºçš„å…¥é—¨è¯¾ç¨‹<a href=\"https://book.golang-dream.com/\">ã€ŠGoè¯­è¨€å¼€æŒ‚å…¥é—¨ä¹‹æ—…ã€‹</a>ï¼Œå¹¶ä¸”<a href=\"https://www.bilibili.com/video/BV1Vi4y1f78S\">åœ¨Bç«™è¿›è¡Œäº†è§†é¢‘è®²è§£</a>ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å‚ä¸åˆ°è¿™é—¨è¯¾ç¨‹çš„åˆ›ä½œä¸­æ¥ï¼Œå¸®åŠ©å…¶ä»–äººå­¦ä¹ ä¹Ÿæ˜¯è‡ªæˆ‘æå‡çš„å¥½æ–¹å¼ã€‚</p><h2>è¯¾åé¢˜</h2><p>æœ€åï¼Œæˆ‘ä¹Ÿç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜ã€‚</p><p>ä½ å¦‚ä½•ç†è§£Goè¯­è¨€çš„ä¸€å¥åè¨€ï¼šâ€œä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜â€ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>","comments":[{"had_liked":false,"id":359534,"user_name":"G55","can_delete":false,"product_type":"c1","uid":1132146,"ip_address":"åŒ—äº¬","ucode":"12B5FD30B9D146","user_header":"https://static001.geekbang.org/account/avatar/00/11/46/72/cb6ada5c.jpg","comment_is_top":false,"comment_ctime":1665627594,"is_pvip":false,"replies":[{"id":130805,"content":"è¯´å¾—å¾ˆå¥½ï¼Œé€šé“ä¸€ç§æ‰€æœ‰æƒè½¬ç§»çš„æœºåˆ¶ï¼Œä¸ºæˆ‘ä»¬å±è”½äº†é”ç­‰æœºåˆ¶ã€‚ é€šè¿‡ä¸€äº›ç®€å•çš„å¹¶å‘æ¨¡å‹(ä¾‹å¦‚fan-inã€fan-out),å¼€å‘å¹¶è¡Œç¨‹åºä¼šå˜å¾—éå¸¸å®¹æ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1665715737,"ip_address":"åŒ—äº¬","comment_id":359534,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"é€šè¿‡å…±äº«å†…å­˜é€šä¿¡ç›¸å½“äºåŒæ–¹å¿…é¡»ä¾é é¢å¤–çš„æ§åˆ¶æœºåˆ¶æ¥ç¡®ä¿é€šä¿¡æ—¶å†…å­˜ä¸­çš„å†…å®¹æ˜¯æ­£ç¡®çš„ï¼Œè¿™ä¸€ç‚¹éœ€è¦å…±äº«åŒæ–¹è®¾ç½®åŒæ­¥æœºåˆ¶ï¼Œå¹¶ä¸é€šç”¨, è¿˜å®¹æ˜“æœ‰bugã€‚ä½†æ˜¯é€šè¿‡é€šä¿¡å…±äº«å†…å­˜åˆ™å¯ä»¥åˆ©ç”¨é€šç”¨çš„é€šä¿¡åŸºå»º, å‡¡æ˜¯ç»è¿‡é€šä¿¡ä¼ é€’çš„ä¿¡æ¯ä¸€å®šæ˜¯å‘é€æ–¹ç¡®è®¤æ­£ç¡®çš„, æ¥æ”¶æ–¹åªéœ€è¦ç­‰å¾…å³å¯, ä¸ç”¨å†ä¾èµ–é¢å¤–çš„åŒæ­¥æœºåˆ¶ï¼Œå‡å°‘äº†å‡ºbugçš„æœºä¼šã€‚","like_count":14,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590376,"discussion_content":"è¯´å¾—å¾ˆå¥½ï¼Œé€šé“ä¸€ç§æ‰€æœ‰æƒè½¬ç§»çš„æœºåˆ¶ï¼Œä¸ºæˆ‘ä»¬å±è”½äº†é”ç­‰æœºåˆ¶ã€‚ é€šè¿‡ä¸€äº›ç®€å•çš„å¹¶å‘æ¨¡å‹(ä¾‹å¦‚fan-inã€fan-out),å¼€å‘å¹¶è¡Œç¨‹åºä¼šå˜å¾—éå¸¸å®¹æ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665715738,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359439,"user_name":"é™ˆå§è™«","can_delete":false,"product_type":"c1","uid":1481979,"ip_address":"åŒ—äº¬","ucode":"44BB84712436AB","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/fb/7fe6df5b.jpg","comment_is_top":false,"comment_ctime":1665543875,"is_pvip":false,"replies":[{"id":130823,"content":"ğŸ‘ğŸ»è¿™ç§æ‰€æœ‰æƒè½¬ç§»çš„æœºåˆ¶éå¸¸å¦™å“ˆï¼Œå…¶å®æ˜¯é€šé“ä¸ºæˆ‘ä»¬å±è”½äº†ä¸€äº›ç»†èŠ‚ï¼Œéå¸¸æœ‰è¡¨ç°åŠ›","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1665717339,"ip_address":"åŒ—äº¬","comment_id":359439,"utype":1}],"discussion_count":1,"race_medal":5,"score":2,"product_id":100124001,"comment_content":"ä¸ªäººç†è§£ï¼Œå†…å­˜æ˜¯ä¿¡æ¯çš„è½½ä½“ï¼Œå…±äº«å†…å­˜çš„ç›®çš„å°±æ˜¯ä¸ºäº†ä¼ é€’ä¿¡æ¯ï¼Œè€Œå…±äº«å†…å­˜åªæ˜¯ä¼ é€’ä¿¡æ¯çš„ä¸€ç§æ‰‹æ®µã€‚å…±äº«å†…å­˜çš„ç‰¹ç‚¹æ˜¯ä¿¡æ¯å­˜ä¸€å—å…¬å…±çš„å†…å­˜åŒºåŸŸçš„ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸»åŠ¨æ¥è·å–å¹¶ç«äº‰å®ƒçš„ä½¿ç”¨æƒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å°±å¿…é¡»é€šè¿‡åŠ é”æ¥ä¿è¯åŸå­æ€§ã€‚é€šè¿‡é€šä¿¡ï¼ˆchannelï¼‰æ¥å…±äº«å†…å­˜ï¼Œå°±æ˜¯å°†çº¿ç¨‹çš„ä¸»åŠ¨ç«äº‰å˜ä¸ºäº†åªèƒ½è¢«åŠ¨ç­‰å¾…ï¼Œæ¥æ”¶ä¿¡æ¯ï¼Œè€Œæ¶ˆæ¯åªä¼šä¼ é€’ç»™å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ï¼Œè°æ‹¥æœ‰æ¶ˆæ¯ï¼ˆä»channelä¸­è·å¾—ï¼‰ï¼Œè°å°±æ‹¥æœ‰ä¿®æ”¹æƒï¼Œè¿™æ ·æ•´ä¸ªè¿‡ç¨‹å°±ä¸éœ€è¦åŠ é”ã€‚","like_count":10,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590396,"discussion_content":"ğŸ‘ğŸ»è¿™ç§æ‰€æœ‰æƒè½¬ç§»çš„æœºåˆ¶éå¸¸å¦™å“ˆï¼Œå…¶å®æ˜¯é€šé“ä¸ºæˆ‘ä»¬å±è”½äº†ä¸€äº›ç»†èŠ‚ï¼Œéå¸¸æœ‰è¡¨ç°åŠ›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665717339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359531,"user_name":"é‚£æ—¶åˆ»","can_delete":false,"product_type":"c1","uid":1150927,"ip_address":"åŒ—äº¬","ucode":"B0D150856C3A4A","user_header":"https://static001.geekbang.org/account/avatar/00/11/8f/cf/890f82d6.jpg","comment_is_top":false,"comment_ctime":1665626529,"is_pvip":false,"replies":[{"id":130804,"content":"åŒæ—¶ç®¡ç†å¾ˆå¤šäº‹æƒ…æŒ‡çš„æ˜¯è¿™äº›äº‹æƒ…å¯èƒ½ä¸æ˜¯åŒæ—¶å‘ç”Ÿçš„ï¼Œä¹Ÿä¸çŸ¥é“å‘ç”Ÿçš„å…ˆåé¡ºåºï¼Œä½†æ˜¯é€šè¿‡ä¸€äº›è°ƒåº¦è®©ä»–ä»¬éƒ½æœ‰æ‰§è¡Œçš„æœºä¼šã€‚  è€Œå¹¶è¡ŒæŒ‡çš„æ˜¯å½“å‰æ—¶åˆ»ï¼Œäº‹æƒ…åŒæ—¶åœ¨å‘ç”Ÿã€‚ \nå¹¶å‘å’Œå¹¶è¡Œæ˜¯éœ€è¦æ¢³ç†çš„ç»å…¸æ¦‚å¿µï¼ŒCPUæ ¸å¿ƒæ•°é‡å¯¹åº”äº†èƒ½å¤Ÿå¹¶è¡Œæ‰§è¡Œçš„æ•°é‡ã€‚ä½†æ˜¯ä¸€ä¸ªæœºå™¨ä¸Šå¯èƒ½æœ‰ä¸Šåƒä¸Šä¸‡çš„çº¿ç¨‹ã€åç¨‹åœ¨ç­‰å¾…æ‰§è¡Œ,ä»–ä»¬å…¶å®æ˜¯å¹¶å‘çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1665715075,"ip_address":"åŒ—äº¬","comment_id":359531,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"å¹¶è¡ŒæŒ‡çš„æ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ï¼Œå¹¶å‘æ˜¯æŒ‡åŒæ—¶ç®¡ç†å¾ˆå¤šäº‹æƒ…ã€‚è¯·é—®è€å¸ˆï¼Œç®¡ç†å’Œåšå…·ä½“åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590374,"discussion_content":"åŒæ—¶ç®¡ç†å¾ˆå¤šäº‹æƒ…æŒ‡çš„æ˜¯è¿™äº›äº‹æƒ…å¯èƒ½ä¸æ˜¯åŒæ—¶å‘ç”Ÿçš„ï¼Œä¹Ÿä¸çŸ¥é“å‘ç”Ÿçš„å…ˆåé¡ºåºï¼Œä½†æ˜¯é€šè¿‡ä¸€äº›è°ƒåº¦è®©ä»–ä»¬éƒ½æœ‰æ‰§è¡Œçš„æœºä¼šã€‚  è€Œå¹¶è¡ŒæŒ‡çš„æ˜¯å½“å‰æ—¶åˆ»ï¼Œäº‹æƒ…åŒæ—¶åœ¨å‘ç”Ÿã€‚ \nå¹¶å‘å’Œå¹¶è¡Œæ˜¯éœ€è¦æ¢³ç†çš„ç»å…¸æ¦‚å¿µï¼ŒCPUæ ¸å¿ƒæ•°é‡å¯¹åº”äº†èƒ½å¤Ÿå¹¶è¡Œæ‰§è¡Œçš„æ•°é‡ã€‚ä½†æ˜¯ä¸€ä¸ªæœºå™¨ä¸Šå¯èƒ½æœ‰ä¸Šåƒä¸Šä¸‡çš„çº¿ç¨‹ã€åç¨‹åœ¨ç­‰å¾…æ‰§è¡Œ,ä»–ä»¬å…¶å®æ˜¯å¹¶å‘çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665715075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360372,"user_name":"ä¼šé£çš„å¤§è±¡","can_delete":false,"product_type":"c1","uid":1520299,"ip_address":"åŒ—äº¬","ucode":"080A36D971E6CF","user_header":"https://static001.geekbang.org/account/avatar/00/17/32/ab/272af78e.jpg","comment_is_top":false,"comment_ctime":1666516813,"is_pvip":false,"replies":[{"id":131241,"content":"ğŸ‘ğŸ»ğŸ‘ğŸ»","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1666804419,"ip_address":"åŒ—äº¬","comment_id":360372,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"å…³äºç†è§£ â€ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜â€œ è¿™å¥è¯ï¼Œä¸ªäººç†è§£ï¼Œè¿™æ˜¯ä¸¤ç§å¹¶å‘åœºæ™¯ä¸‹çš„ä¸åŒé€šä¿¡æ–¹å¼ï¼Œæœ¬è´¨éƒ½æ˜¯ä¸ºäº†è¾¾åˆ°å…±äº«ä¿¡æ¯çš„ç›®çš„ï¼Œè€Œé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜ï¼Œæ˜¯ä¸ºäº†è§£å†³å…±äº«å†…å­˜æœºåˆ¶æœ¬èº«åœ¨ä½¿ç”¨æ—¶å¸¦æ¥çš„æ•°æ®å†²çªå’Œè§„é¿å®ç°å¤æ‚åº¦é—®é¢˜ï¼Œä¸¤ç§æ–¹å¼çš„ä¸åŒç‚¹åœ¨äºï¼Œå…±äº«å†…å­˜æ˜¯é€šè¿‡ä¸»åŠ¨è¯»å†™åŒä¸€å—å†…å­˜ï¼Œè€Œé€šä¿¡æ˜¯è¢«åŠ¨æ¥æ”¶æ¶ˆæ¯åŠå†…å®¹ï¼ˆæœ‰ç‚¹ç±»ä¼¼æ¶ˆæ¯é˜Ÿåˆ—ï¼‰","like_count":4,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591769,"discussion_content":"ğŸ‘ğŸ»ğŸ‘ğŸ»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666804419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361047,"user_name":"èŒƒé£æ‰¬","can_delete":false,"product_type":"c1","uid":2721761,"ip_address":"åŒ—äº¬","ucode":"A665DF46833A81","user_header":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg","comment_is_top":false,"comment_ctime":1667142015,"is_pvip":false,"replies":[{"id":131533,"content":"æŒ‡çš„å°±æ˜¯é€šä¿¡ï¼Œå³é€šé“è¿™ç§æ‰€æœ‰æƒè½¬ç§»çš„æœºåˆ¶","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1667757250,"ip_address":"åŒ—äº¬","comment_id":361047,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"â€œä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜â€\n\n æˆ‘è€æ˜¯è§‰å¾—è¿™æ˜¯ç—…å¥ï¼Œå› ä¸ºæŒ‰ç…§å¸¸äººçš„ç†è§£ï¼Œâ€œä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡â€çš„ä¸‹ä¸€å¥åº”è¯¥æ˜¯â€œè¦é€šè¿‡XXXæ¥é€šä¿¡â€ã€‚é‚£ä¹ˆè¿™é‡Œçš„XXXæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿˜è¯·è€å¸ˆè§£æƒ‘å‘€","like_count":2,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":592829,"discussion_content":"æŒ‡çš„å°±æ˜¯é€šä¿¡ï¼Œå³é€šé“è¿™ç§æ‰€æœ‰æƒè½¬ç§»çš„æœºåˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667757250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2721761,"avatar":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg","nickname":"èŒƒé£æ‰¬","note":"","ucode":"A665DF46833A81","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":592849,"discussion_content":"è°¢è°¢è€å¸ˆï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667777952,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":592829,"ip_address":"ä¸Šæµ·","group_id":0},"score":592849,"extra":""}]}]},{"had_liked":false,"id":359730,"user_name":"é™ˆå§è™«","can_delete":false,"product_type":"c1","uid":1481979,"ip_address":"åŒ—äº¬","ucode":"44BB84712436AB","user_header":"https://static001.geekbang.org/account/avatar/00/16/9c/fb/7fe6df5b.jpg","comment_is_top":false,"comment_ctime":1665821094,"is_pvip":false,"replies":[{"id":130913,"content":"ä¸å¤ªä¸€æ ·å“¦ï¼Œé€šé“çš„æ‰€æœ‰æƒæ˜¯ä¸ºäº†è§£å†³å¹¶å‘å®‰å…¨ï¼Œè€Œrustä¸­æ‰€æœ‰æƒæ˜¯ä¸ºäº†è§£å†³å†…å­˜çš„æ³„éœ²ã€‚é€šé“çš„æ‰€æœ‰æƒåº•å±‚æ˜¯è¿è¡Œæ—¶ç”¨é”å®ç°çš„ï¼Œrustä¸­æ‰€æœ‰æƒæ˜¯å€ŸåŠ©ç¼–è¯‘å™¨å®ç°çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1666025619,"ip_address":"åŒ—äº¬","comment_id":359730,"utype":1}],"discussion_count":1,"race_medal":5,"score":2,"product_id":100124001,"comment_content":"è€å¸ˆè®²çš„æ‰€æœ‰æƒè½¬ç§»å’Œrustä¸­æ‰€æœ‰æƒç±»ä¼¼å—","like_count":2,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590714,"discussion_content":"ä¸å¤ªä¸€æ ·å“¦ï¼Œé€šé“çš„æ‰€æœ‰æƒæ˜¯ä¸ºäº†è§£å†³å¹¶å‘å®‰å…¨ï¼Œè€Œrustä¸­æ‰€æœ‰æƒæ˜¯ä¸ºäº†è§£å†³å†…å­˜çš„æ³„éœ²ã€‚é€šé“çš„æ‰€æœ‰æƒåº•å±‚æ˜¯è¿è¡Œæ—¶ç”¨é”å®ç°çš„ï¼Œrustä¸­æ‰€æœ‰æƒæ˜¯å€ŸåŠ©ç¼–è¯‘å™¨å®ç°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666025619,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359450,"user_name":"æ¸©é›…å°å…¬å­","can_delete":false,"product_type":"c1","uid":2260390,"ip_address":"åŒ—äº¬","ucode":"9EA63E36D7C85C","user_header":"https://static001.geekbang.org/account/avatar/00/22/7d/a6/15798bf2.jpg","comment_is_top":false,"comment_ctime":1665548628,"is_pvip":true,"replies":[{"id":130808,"content":"ğŸ˜å“ˆå“ˆï¼Œæˆ‘åé¢æœ‰æ—¶é—´äº†è¿˜ä¼šé™†ç»­æ›´æ–°è§†é¢‘ï¼Œç°åœ¨å…¨åŠ›æä¸“æ ","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1665715920,"ip_address":"åŒ—äº¬","comment_id":359450,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"å¤ªè´´å¿ƒäº†å§ï¼Œè¿˜æœ‰è§†é¢‘ã€‚","like_count":2,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590379,"discussion_content":"ğŸ˜å“ˆå“ˆï¼Œæˆ‘åé¢æœ‰æ—¶é—´äº†è¿˜ä¼šé™†ç»­æ›´æ–°è§†é¢‘ï¼Œç°åœ¨å…¨åŠ›æä¸“æ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665715920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1793879,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5f/57/791d0f5e.jpg","nickname":"Geek_8ed998","note":"","ucode":"1C164836354665","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590147,"discussion_content":"æˆ‘æ€ä¹ˆæ²¡çœ‹åˆ°è§†é¢‘é˜¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665556854,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2260390,"avatar":"https://static001.geekbang.org/account/avatar/00/22/7d/a6/15798bf2.jpg","nickname":"æ¸©é›…å°å…¬å­","note":"","ucode":"9EA63E36D7C85C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1793879,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5f/57/791d0f5e.jpg","nickname":"Geek_8ed998","note":"","ucode":"1C164836354665","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590156,"discussion_content":"æ–‡ç« å°¾æœ‰ä¸ªbç«™çš„é“¾æ¥ğŸ”—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665560093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":590147,"ip_address":"æ²³åŒ—","group_id":0},"score":590156,"extra":""}]}]},{"had_liked":false,"id":359675,"user_name":"includestdio.h","can_delete":false,"product_type":"c1","uid":2314854,"ip_address":"åŒ—äº¬","ucode":"5027BACE9319CD","user_header":"https://static001.geekbang.org/account/avatar/00/23/52/66/3e4d4846.jpg","comment_is_top":false,"comment_ctime":1665740550,"is_pvip":true,"replies":[{"id":130841,"content":"é‚£æ˜¯ä¸€ä¸ªå…¥é—¨è§†é¢‘ï¼Œç°åœ¨æˆ‘çš„å°½åŠ›éƒ½åœ¨ä¸“æ ä¸Šé¢ï¼Œç©ºäº†ä¹Ÿä¼šæ›´æ–°çš„å“¦ã€‚\nå…¶å®çœ‹ä¸“æ å°±å¾ˆå¥½äº†å‘€ï¼ŒçŸ¥è¯†éƒ½å‡èšåœ¨ä¸“æ äº†å“¦ï¼Œå…¶ä»–çš„å¯ä½œä¸ºå‚è€ƒèµ„æ–™","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1665764050,"ip_address":"åŒ—äº¬","comment_id":359675,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"æƒ³é—®ä¸‹è€å¸ˆBç«™çš„è§†é¢‘å®Œç»“äº†å—ï¼Œæˆ‘çœ‹å¥½ä¹…æ²¡æ›´æ–°äº†\n\ngo å…¥é—¨å…¥äº†å¿«ä¸€å¹´äº†ï¼Œçœ‹è¿‡å„ç§ go ä¸“æ å’Œä¹¦ç±ï¼Œä½†æ˜¯è‹¦äºæ²¡æœ‰å®æ“ç»éªŒï¼Œä¸€ç›´åœç•™åœ¨ç†è®ºï¼Œç†è®ºä¹Ÿæ˜¯è¾¹å­¦è¾¹å¿˜ï¼Œå¸Œæœ›é€šè¿‡è¿™é—¨è¿›é˜¶è¯¾å…¥é—¨ -.-  ","like_count":1,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590459,"discussion_content":"é‚£æ˜¯ä¸€ä¸ªå…¥é—¨è§†é¢‘ï¼Œç°åœ¨æˆ‘çš„å°½åŠ›éƒ½åœ¨ä¸“æ ä¸Šé¢ï¼Œç©ºäº†ä¹Ÿä¼šæ›´æ–°çš„å“¦ã€‚\nå…¶å®çœ‹ä¸“æ å°±å¾ˆå¥½äº†å‘€ï¼ŒçŸ¥è¯†éƒ½å‡èšåœ¨ä¸“æ äº†å“¦ï¼Œå…¶ä»–çš„å¯ä½œä¸ºå‚è€ƒèµ„æ–™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665764050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359632,"user_name":"Geek_b4e7f6","can_delete":false,"product_type":"c1","uid":3200086,"ip_address":"åŒ—äº¬","ucode":"73029FCDB409CE","user_header":"","comment_is_top":false,"comment_ctime":1665717805,"is_pvip":false,"replies":[{"id":130845,"content":"å†²é¸­ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1903914,"ctime":1665764317,"ip_address":"åŒ—äº¬","comment_id":359632,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"æ–°æ‰‹æŠ¥åˆ°","like_count":1,"discussions":[{"author":{"id":1903914,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/0d/2a/dcb935cf.jpg","nickname":"æ—¶é—´ä¸ºæˆ‘ä»¬è¯æ˜","note":"","ucode":"299438152D9F3C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590464,"discussion_content":"å†²é¸­ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665764318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361045,"user_name":"èŒƒé£æ‰¬","can_delete":false,"product_type":"c1","uid":2721761,"ip_address":"ä¸Šæµ·","ucode":"A665DF46833A81","user_header":"https://static001.geekbang.org/account/avatar/00/29/87/e1/b3edcc09.jpg","comment_is_top":false,"comment_ctime":1667141800,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100124001,"comment_content":"æ„Ÿè°¢è€å¸ˆï¼Œå¾ˆå¥½çš„æ€»ç»“ï¼","like_count":2},{"had_liked":false,"id":360269,"user_name":"czy","can_delete":false,"product_type":"c1","uid":2398831,"ip_address":"åŒ—äº¬","ucode":"660826F2ABA3E4","user_header":"https://static001.geekbang.org/account/avatar/00/24/9a/6f/c4490cf2.jpg","comment_is_top":false,"comment_ctime":1666361828,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100124001,"comment_content":"æœ‰äº›ç»†èŠ‚è¿˜æ˜¯è¦æ³¨æ„ä¸‹æ¯”è¾ƒå¥½ï¼Œæ¯”å¦‚æ–‡ç« ä¸­çš„è¿™æ®µä»£ç ï¼š\n&#47;&#47; v2 ç‰ˆæœ¬\nfunc handle(rw ReadWriter){ \n    r.Read() \n    r.Write() \n...}\nä»£ç æ®µä¸­åº”è¯¥æ˜¯ç›¸å†™rw.Read()å’Œrw.Write()å§","like_count":2},{"had_liked":false,"id":359776,"user_name":"wendy","can_delete":false,"product_type":"c1","uid":3194640,"ip_address":"åŒ—äº¬","ucode":"F040182308259E","user_header":"","comment_is_top":false,"comment_ctime":1665854167,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100124001,"comment_content":"å­¦èµ·æ¥ğŸ’ªğŸ»","like_count":2},{"had_liked":false,"id":359749,"user_name":"å¼ é‡‘å¯Œ","can_delete":false,"product_type":"c1","uid":1269633,"ip_address":"å±±ä¸œ","ucode":"2F571C73DB868F","user_header":"https://static001.geekbang.org/account/avatar/00/13/5f/81/07505cdf.jpg","comment_is_top":false,"comment_ctime":1665832751,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100124001,"comment_content":"æƒ³åˆ°äº†é©¬å…‹æ€çš„åè¨€ï¼šé‡‘é“¶å¤©ç„¶ä¸æ˜¯è´§å¸ è€Œè´§å¸å¤©ç„¶æ˜¯é‡‘é“¶","like_count":2},{"had_liked":false,"id":370398,"user_name":"èƒ–é»‘","can_delete":false,"product_type":"c1","uid":2746090,"ip_address":"ä¸Šæµ·","ucode":"83D38ADD21D8A2","user_header":"https://static001.geekbang.org/account/avatar/00/29/e6/ea/57cf56da.jpg","comment_is_top":false,"comment_ctime":1678786099,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100124001,"comment_content":"çœ‹å®Œäº†è€å¸ˆè®²è§£çš„channel  è¿˜æ˜¯æ²¡æœ‰æ¦‚å¿µï¼Œåº”ç”¨åœºæ™¯æ˜¯å•¥ï¼Ÿ","like_count":0}]}