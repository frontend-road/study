{"id":171328,"title":"30 | ç»™ç³»ç»ŸåŠ ä¸Šçœ¼ç›ï¼šæœåŠ¡ç«¯ç›‘æ§è¦æ€ä¹ˆåšï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å”æ‰¬ã€‚</p><p>åœ¨ä¸€ä¸ªé¡¹ç›®çš„ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œè¿è¡Œç»´æŠ¤å æ®ç€å¾ˆå¤§çš„æ¯”é‡ï¼Œåœ¨é‡è¦æ€§ä¸Šï¼Œå®ƒå‡ ä¹ä¸é¡¹ç›®ç ”å‘å¹¶é©¾é½é©±ã€‚è€Œåœ¨ç³»ç»Ÿè¿ç»´è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤ŸåŠæ—¶åœ°å‘ç°é—®é¢˜å¹¶è§£å†³é—®é¢˜ï¼Œæ˜¯æ¯ä¸€ä¸ªå›¢é˜Ÿçš„æœ¬èŒå·¥ä½œã€‚æ‰€ä»¥ï¼Œä½ çš„å‚ç›´ç”µå•†ç³»ç»Ÿåœ¨æ­å»ºä¹‹åˆï¼Œè¿ç»´å›¢é˜Ÿè‚¯å®šå®Œæˆäº†å¯¹äºæœºå™¨CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰åŸºç¡€ç›‘æ§ï¼ŒæœŸæœ›èƒ½åœ¨å‡ºç°é—®é¢˜æ—¶ï¼ŒåŠæ—¶åœ°å‘ç°å¹¶ä¸”å¤„ç†ã€‚ä½ æœ¬ä»¥ä¸ºä¸‡äº‹å¤§å‰ï¼Œå´æ²¡æƒ³åˆ°ç³»ç»Ÿåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œé¢‘é¢‘å¾—åˆ°ç”¨æˆ·çš„æŠ•è¯‰ï¼ŒåŸå› æ˜¯ï¼š</p><ul>\n<li>ä½¿ç”¨çš„æ•°æ®åº“ä¸»ä»å»¶è¿Ÿå˜é•¿ï¼Œå¯¼è‡´ä¸šåŠ¡åŠŸèƒ½ä¸Šå‡ºç°äº†é—®é¢˜ï¼›</li>\n<li>æ¥å£çš„å“åº”æ—¶é—´å˜é•¿ï¼Œç”¨æˆ·åé¦ˆå•†å“é¡µé¢å‡ºç°ç©ºç™½é¡µï¼›</li>\n<li>ç³»ç»Ÿä¸­å‡ºç°å¤§é‡é”™è¯¯ï¼Œå½±å“äº†ç”¨æˆ·çš„æ­£å¸¸ä½¿ç”¨ã€‚</li>\n</ul><p>è¿™äº›é—®é¢˜ï¼Œä½ æœ¬åº”è¯¥åŠæ—¶å‘ç°å¹¶å¤„ç†çš„ï¼Œä½†ç°å®æ˜¯ï¼Œä½ åªèƒ½è¢«åŠ¨åœ°æ”¶åˆ°ç”¨æˆ·çš„åé¦ˆåï¼Œæ‰‹å¿™è„šä¹±åœ°ä¿®å¤ã€‚è¿™æ—¶ä½ çš„å›¢é˜Ÿæ‰æ„è¯†åˆ°ï¼Œè¦æƒ³å¿«é€Ÿåœ°å‘ç°å’Œå®šä½ä¸šåŠ¡ç³»ç»Ÿä¸­å‡ºç°çš„é—®é¢˜ï¼Œå¿…é¡»æ­å»ºä¸€å¥—å®Œå–„çš„æœåŠ¡ç«¯ç›‘æ§ä½“ç³»ã€‚æ­£æ‰€è°“â€œé“è·¯åƒä¸‡æ¡ï¼Œç›‘æ§ç¬¬ä¸€æ¡ï¼Œç›‘æ§ä¸åˆ°ä½ï¼Œé¢†å¯¼ä¸¤è¡Œæ³ªâ€ã€‚ä¸è¿‡åœ¨æ­å»ºçš„è¿‡ç¨‹ä¸­ï¼Œä½ çš„å›¢é˜Ÿåˆé™·å…¥äº†å›°å¢ƒï¼š</p><ul>\n<li>é¦–å…ˆï¼Œç›‘æ§çš„æŒ‡æ ‡è¦å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</li>\n<li>é‡‡é›†è¿™äº›æŒ‡æ ‡å¯ä»¥æœ‰å“ªäº›æ–¹æ³•å’Œé€”å¾„å‘¢ï¼Ÿ</li>\n<li>æŒ‡æ ‡é‡‡é›†åˆ°ä¹‹ååˆè¦å¦‚ä½•å¤„ç†å’Œå±•ç¤ºå‘¢ï¼Ÿ</li>\n</ul><p>è¿™äº›é—®é¢˜ä¸€ç¯æ‰£ä¸€ç¯ï¼Œå…³ä¹ç€ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç”¨æ€§ï¼Œè€Œæœ¬èŠ‚è¯¾ï¼Œæˆ‘å°±å¸¦ä½ è§£å†³è¿™äº›é—®é¢˜ï¼Œæ­å»ºä¸€å¥—æœåŠ¡ç«¯ç›‘æ§ä½“ç³»ã€‚</p><!-- [[[read_end]]] --><h2>ç›‘æ§æŒ‡æ ‡å¦‚ä½•é€‰æ‹©</h2><p>ä½ åœ¨æ­å»ºç›‘æ§ç³»ç»Ÿæ—¶ï¼Œæ‰€é¢ä¸´çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯é€‰æ‹©ä»€ä¹ˆæ ·çš„ç›‘æ§æŒ‡æ ‡ï¼Œä¹Ÿå°±æ˜¯ç›‘æ§ä»€ä¹ˆã€‚æœ‰äº›åŒå­¦åœ¨ç»™ä¸€ä¸ªæ–°çš„ç³»ç»Ÿè®¾å®šç›‘æ§æŒ‡æ ‡çš„æ—¶å€™ä¼šæ¯”è¾ƒè¿·èŒ«ï¼Œä¸çŸ¥é“ä»å“ªæ–¹é¢å…¥æ‰‹ã€‚å…¶å®ï¼Œæœ‰ä¸€äº›æˆç†Ÿçš„ç†è®ºå’Œå¥—è·¯ä½ å¯ä»¥ç›´æ¥æ‹¿æ¥ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œè°·æ­Œé’ˆå¯¹åˆ†å¸ƒå¼ç³»ç»Ÿç›‘æ§çš„ç»éªŒæ€»ç»“ï¼Œå››ä¸ªé»„é‡‘ä¿¡å·ï¼ˆFour Golden Signalsï¼‰ã€‚å®ƒæŒ‡çš„æ˜¯åœ¨æœåŠ¡å±‚é¢ä¸€èˆ¬éœ€è¦ç›‘æ§å››ä¸ªæŒ‡æ ‡ï¼Œ<strong>åˆ†åˆ«æ˜¯å»¶è¿Ÿã€é€šä¿¡é‡ã€é”™è¯¯å’Œé¥±å’Œåº¦ã€‚</strong></p><ul>\n<li>\n<p>å»¶è¿ŸæŒ‡çš„æ˜¯è¯·æ±‚çš„å“åº”æ—¶é—´ã€‚æ¯”å¦‚æ¥å£çš„å“åº”æ—¶é—´ã€è®¿é—®æ•°æ®åº“å’Œç¼“å­˜çš„å“åº”æ—¶é—´ã€‚</p>\n</li>\n<li>\n<p>é€šä¿¡é‡å¯ä»¥ç†è§£ä¸ºååé‡ï¼Œä¹Ÿå°±æ˜¯å•ä½æ—¶é—´å†…è¯·æ±‚é‡çš„å¤§å°ã€‚æ¯”å¦‚è®¿é—®ç¬¬ä¸‰æ–¹æœåŠ¡çš„è¯·æ±‚é‡ï¼Œè®¿é—®æ¶ˆæ¯é˜Ÿåˆ—çš„è¯·æ±‚é‡ã€‚</p>\n</li>\n<li>\n<p>é”™è¯¯è¡¨ç¤ºå½“å‰ç³»ç»Ÿå‘ç”Ÿçš„é”™è¯¯æ•°é‡ã€‚<strong>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ</strong> æˆ‘ä»¬éœ€è¦ç›‘æ§çš„é”™è¯¯æ—¢æœ‰æ˜¾å¼çš„ï¼Œæ¯”å¦‚åœ¨ç›‘æ§WebæœåŠ¡æ—¶ï¼Œå‡ºç°4 * *å’Œ 5 * *çš„å“åº”ç ï¼›ä¹Ÿæœ‰éšå¼çš„ï¼Œæ¯”å¦‚WebæœåŠ¡è™½ç„¶è¿”å›çš„å“åº”ç æ˜¯200ï¼Œä½†æ˜¯å´å‘ç”Ÿäº†ä¸€äº›å’Œä¸šåŠ¡ç›¸å…³çš„é”™è¯¯ï¼ˆå‡ºç°äº†æ•°ç»„è¶Šç•Œçš„å¼‚å¸¸æˆ–è€…ç©ºæŒ‡é’ˆå¼‚å¸¸ç­‰ï¼‰ï¼Œè¿™äº›éƒ½æ˜¯é”™è¯¯çš„èŒƒç•´ã€‚</p>\n</li>\n<li>\n<p>é¥±å’Œåº¦æŒ‡çš„æ˜¯æœåŠ¡æˆ–è€…èµ„æºåˆ°è¾¾ä¸Šé™çš„ç¨‹åº¦ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯æœåŠ¡æˆ–è€…èµ„æºçš„åˆ©ç”¨ç‡ï¼‰ï¼Œæ¯”å¦‚CPUçš„ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€ç£ç›˜ä½¿ç”¨ç‡ã€ç¼“å­˜æ•°æ®åº“çš„è¿æ¥æ•°ç­‰ç­‰ã€‚</p>\n</li>\n</ul><p>è¿™å››ä¸ªé»„é‡‘ä¿¡å·æä¾›äº†é€šç”¨çš„ç›‘æ§æŒ‡æ ‡ï¼Œ<strong>é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥å€Ÿé‰´REDæŒ‡æ ‡ä½“ç³»ã€‚</strong>è¿™ä¸ªä½“ç³»æ˜¯ä»å››ä¸ªé»„é‡‘ä¿¡å·ä¸­è¡ç”Ÿå‡ºæ¥çš„ï¼Œå…¶ä¸­ï¼ŒRä»£è¡¨è¯·æ±‚é‡ï¼ˆRequest rateï¼‰ã€Eä»£è¡¨é”™è¯¯ï¼ˆErrorï¼‰ã€Dä»£è¡¨å“åº”æ—¶é—´ï¼ˆDurationï¼‰ï¼Œå°‘äº†é¥±å’Œåº¦çš„æŒ‡æ ‡ã€‚ä½ å¯ä»¥æŠŠå®ƒå½“ä½œä¸€ç§ç®€åŒ–ç‰ˆçš„é€šç”¨ç›‘æ§æŒ‡æ ‡ä½“ç³»ã€‚</p><p>å½“ç„¶ï¼Œä¸€äº›ç»„ä»¶æˆ–è€…æœåŠ¡è¿˜æœ‰ç‹¬ç‰¹çš„æŒ‡æ ‡ï¼Œè¿™äº›æŒ‡æ ‡ä¹Ÿæ˜¯éœ€è¦ä½ ç‰¹æ®Šå…³æ³¨çš„ã€‚æ¯”å¦‚ï¼Œè¯¾ç¨‹ä¸­æåˆ°çš„æ•°æ®åº“ä¸»ä»å»¶è¿Ÿæ•°æ®ã€æ¶ˆæ¯é˜Ÿåˆ—çš„å †ç§¯æƒ…å†µã€ç¼“å­˜çš„å‘½ä¸­ç‡ç­‰ç­‰ã€‚æˆ‘æŠŠé«˜å¹¶å‘ç³»ç»Ÿä¸­å¸¸è§ç»„ä»¶çš„ç›‘æ§æŒ‡æ ‡æ•´ç†æˆäº†ä¸€å¼ è¡¨æ ¼ï¼Œå…¶ä¸­æ²¡æœ‰åŒ…å«è¯¸å¦‚CPUã€å†…å­˜ã€ç½‘ç»œã€ç£ç›˜ç­‰åŸºç¡€ç›‘æ§æŒ‡æ ‡ï¼Œåªæ˜¯ä¸šåŠ¡ä¸Šç›‘æ§æŒ‡æ ‡ï¼Œä¸»è¦æ–¹ä¾¿ä½ åœ¨å®é™…å·¥ä½œä¸­å‚è€ƒä½¿ç”¨ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1a/1a/1a29724ee8a33593797a5947d765f11a.jpg?wh=1142*566\" alt=\"\"></p><p>é€‰æ‹©å¥½äº†ç›‘æ§æŒ‡æ ‡ä¹‹åï¼Œä½ æ¥ä¸‹æ¥è¦è€ƒè™‘çš„æ˜¯å¦‚ä½•ä»ç»„ä»¶æˆ–è€…æœåŠ¡ä¸­é‡‡é›†åˆ°è¿™äº›æŒ‡æ ‡ï¼Œä¹Ÿå°±æ˜¯æŒ‡æ ‡æ•°æ®é‡‡é›†çš„é—®é¢˜ã€‚</p><h2>å¦‚ä½•é‡‡é›†æ•°æ®æŒ‡æ ‡</h2><p>è¯´åˆ°ç›‘æ§æŒ‡æ ‡çš„é‡‡é›†ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä¾æ®é‡‡é›†æ•°æ®æºçš„ä¸åŒé€‰ç”¨ä¸åŒçš„é‡‡é›†æ–¹å¼ï¼Œ<strong>æ€»ç»“èµ·æ¥ï¼Œå¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</strong></p><p>é¦–å…ˆï¼ŒAgentæ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„é‡‡é›†æ•°æ®æŒ‡æ ‡çš„æ–¹å¼ã€‚</p><p>æˆ‘ä»¬é€šè¿‡åœ¨æ•°æ®æºçš„æœåŠ¡å™¨ä¸Šéƒ¨ç½²è‡ªç ”æˆ–è€…å¼€æºçš„Agentæ¥æ”¶é›†æ•°æ®ï¼Œå‘é€ç»™ç›‘æ§ç³»ç»Ÿï¼Œå®ç°æ•°æ®çš„é‡‡é›†ã€‚åœ¨é‡‡é›†æ•°æ®æºä¸Šçš„ä¿¡æ¯æ—¶ï¼ŒAgentä¼šä¾æ®æ•°æ®æºä¸Šæä¾›çš„ä¸€äº›æ¥å£è·å–æ•°æ®ï¼Œ<strong>æˆ‘ç»™ä½ ä¸¾ä¸¤ä¸ªå…¸å‹çš„ä¾‹å­ã€‚</strong></p><p>æ¯”å¦‚ï¼Œä½ è¦ä»MemcachedæœåŠ¡å™¨ä¸Šè·å–å®ƒçš„æ€§èƒ½æ•°æ®ï¼Œé‚£ä¹ˆï¼Œä½ å°±å¯ä»¥åœ¨Agentä¸­è¿æ¥è¿™ä¸ªMemcachedæœåŠ¡å™¨ï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªstatså‘½ä»¤ï¼Œè·å–æœåŠ¡å™¨çš„ç»Ÿè®¡ä¿¡æ¯ã€‚ç„¶åï¼Œä½ å°±å¯ä»¥ä»è¿”å›çš„ä¿¡æ¯ä¸­ï¼ŒæŒ‘é€‰é‡è¦çš„ç›‘æ§æŒ‡æ ‡ï¼Œå‘é€ç»™ç›‘æ§æœåŠ¡å™¨ï¼Œå½¢æˆMemcachedæœåŠ¡çš„ç›‘æ§æŠ¥è¡¨ã€‚ä½ ä¹Ÿå¯ä»¥ä»è¿™äº›ç»Ÿè®¡ä¿¡æ¯ä¸­ï¼Œçœ‹å‡ºå½“å‰MemcachedæœåŠ¡å™¨æ˜¯å¦å­˜åœ¨æ½œåœ¨çš„é—®é¢˜ã€‚ä¸‹é¢æ˜¯æˆ‘æ¨èçš„ä¸€äº›é‡è¦çš„çŠ¶æ€é¡¹ï¼Œä½ å¯ä»¥å‚è€ƒä½¿ç”¨ã€‚</p><pre><code>    STAT cmd_get 201809037423    //è®¡ç®—æŸ¥è¯¢çš„QPS\n    STAT cmd_set 16174920166     //è®¡ç®—å†™å…¥çš„QPS\n    STAT get_hits 175226700643   //ç”¨æ¥è®¡ç®—å‘½ä¸­ç‡ï¼Œå‘½ä¸­ç‡ = get_hits/cmd_get\n    STAT curr_connections 1416   //å½“å‰è¿æ¥æ•°\n    STAT bytes 3738857307        //å½“å‰å†…å­˜å ç”¨é‡\n    STAT evictions 11008640149   //å½“å‰è¢«memcachedæœåŠ¡å™¨å‰”é™¤çš„itemæ•°\né‡ï¼Œå¦‚æœè¿™ä¸ªæ•°é‡è¿‡å¤§(æ¯”å¦‚ä¾‹å­ä¸­çš„è¿™ä¸ªæ•°å€¼ï¼‰ï¼Œé‚£ä¹ˆä»£è¡¨å½“å‰Memcachedå®¹é‡ä¸è¶³æˆ–è€…Memcached Slab Classåˆ†é…æœ‰é—®é¢˜\n</code></pre><p>å¦å¤–ï¼Œå¦‚æœä½ æ˜¯Javaçš„å¼€å‘è€…ï¼Œé‚£ä¹ˆä¸€èˆ¬ä½¿ç”¨Javaè¯­è¨€å¼€å‘çš„ä¸­é—´ä»¶æˆ–è€…ç»„ä»¶ï¼Œéƒ½å¯ä»¥é€šè¿‡JMXè·å–ç»Ÿè®¡æˆ–è€…ç›‘æ§ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œåœ¨<a href=\"https://time.geekbang.org/column/article/159487\">19è®²</a>ä¸­ï¼Œæˆ‘æåˆ°å¯ä»¥ä½¿ç”¨JMXç›‘æ§Kafkaé˜Ÿåˆ—çš„å †ç§¯æ•°ï¼Œå†æ¯”å¦‚ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡JMXç›‘æ§JVMå†…å­˜ä¿¡æ¯å’ŒGCç›¸å…³çš„ä¿¡æ¯ã€‚</p><p>å¦ä¸€ç§å¾ˆé‡è¦çš„æ•°æ®è·å–æ–¹å¼æ˜¯åœ¨ä»£ç ä¸­åŸ‹ç‚¹ã€‚</p><p>è¿™ä¸ªæ–¹å¼ä¸Agentçš„ä¸åŒä¹‹å¤„åœ¨äºï¼ŒAgentä¸»è¦æ”¶é›†çš„æ˜¯ç»„ä»¶æœåŠ¡ç«¯çš„ä¿¡æ¯ï¼Œè€ŒåŸ‹ç‚¹åˆ™æ˜¯ä»å®¢æˆ·ç«¯çš„è§’åº¦æ¥æè¿°æ‰€ä½¿ç”¨çš„ç»„ä»¶ï¼Œå’ŒæœåŠ¡çš„æ€§èƒ½å’Œå¯ç”¨æ€§ã€‚<strong>é‚£ä¹ˆåŸ‹ç‚¹çš„æ–¹å¼æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿ</strong></p><p>ä½ å¯ä»¥ä½¿ç”¨<a href=\"https://time.geekbang.org/column/article/167979\">25è®²</a>åˆ†å¸ƒå¼Traceç»„ä»¶ä¸­ï¼Œæåˆ°çš„é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ–¹å¼ï¼›ä¹Ÿå¯ä»¥åœ¨èµ„æºå®¢æˆ·ç«¯ä¸­ç›´æ¥è®¡ç®—è°ƒç”¨èµ„æºæˆ–è€…æœåŠ¡çš„è€—æ—¶ã€è°ƒç”¨é‡ï¼Œå¹¶ä¸”å‘é€ç»™ç›‘æ§æœåŠ¡å™¨ã€‚</p><p><strong>è¿™é‡Œä½ éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œ</strong>ç”±äºè°ƒç”¨ç¼“å­˜ã€æ•°æ®åº“çš„è¯·æ±‚é‡ä¼šæ¯”è¾ƒé«˜ï¼Œä¸€èˆ¬å•æœºä¹Ÿä¼šè¾¾åˆ°æ¯ç§’ä¸‡æ¬¡ï¼Œå¦‚æœä¸ç»è¿‡ä»»ä½•ä¼˜åŒ–ï¼ŒæŠŠæ¯æ¬¡è¯·æ±‚è€—æ—¶éƒ½å‘é€ç»™ç›‘æ§æœåŠ¡å™¨ï¼Œé‚£ä¹ˆç›‘æ§æœåŠ¡å™¨ä¼šä¸å ªé‡è´Ÿã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨åŸ‹ç‚¹æ—¶å…ˆåšä¸€äº›æ±‡æ€»ã€‚æ¯”å¦‚ï¼Œæ¯éš”10ç§’æ±‡æ€»è¿™10ç§’å†…å¯¹åŒä¸€ä¸ªèµ„æºçš„è¯·æ±‚é‡æ€»å’Œã€å“åº”æ—¶é—´åˆ†ä½å€¼ã€é”™è¯¯æ•°ç­‰ï¼Œç„¶åå‘é€ç»™ç›‘æ§æœåŠ¡å™¨ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥å¤§å¤§å‡å°‘å‘å¾€ç›‘æ§æœåŠ¡å™¨çš„è¯·æ±‚é‡äº†ã€‚</p><p>æœ€åï¼Œæ—¥å¿—ä¹Ÿæ˜¯ä½ ç›‘æ§æ•°æ®çš„é‡è¦æ¥æºä¹‹ä¸€ã€‚</p><p>ä½ æ‰€ç†ŸçŸ¥çš„Tomcatå’ŒNginxçš„è®¿é—®æ—¥å¿—ï¼Œéƒ½æ˜¯é‡è¦çš„ç›‘æ§æ—¥å¿—ã€‚ä½ å¯ä»¥é€šè¿‡å¼€æºçš„æ—¥å¿—é‡‡é›†å·¥å…·ï¼Œå°†è¿™äº›æ—¥å¿—ä¸­çš„æ•°æ®å‘é€ç»™ç›‘æ§æœåŠ¡å™¨ã€‚ç›®å‰ï¼Œå¸¸ç”¨çš„æ—¥å¿—é‡‡é›†å·¥å…·æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼Œ<a href=\"http://flume.apache.org/\">Apache Flume</a>ã€<a href=\"https://www.fluentd.org/\">Fluentd</a>å’Œ<a href=\"https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-overview.html\">Filebeat</a>ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸€ç§ç†Ÿæ‚‰çš„ä½¿ç”¨ã€‚åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œæˆ‘å€¾å‘äºä½¿ç”¨Filebeatæ¥æ”¶é›†ç›‘æ§æ—¥å¿—æ•°æ®ã€‚</p><h2>ç›‘æ§æ•°æ®çš„å¤„ç†å’Œå­˜å‚¨</h2><p>åœ¨é‡‡é›†åˆ°ç›‘æ§æ•°æ®ä¹‹åï¼Œä½ å°±å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œå¤„ç†å’Œå­˜å‚¨äº†ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå…ˆç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥æ‰¿æ¥æ•°æ®ï¼Œä¸»è¦çš„ä½œç”¨æ˜¯å‰Šå³°å¡«è°·ï¼Œé˜²æ­¢å†™å…¥è¿‡å¤šçš„ç›‘æ§æ•°æ®ï¼Œè®©ç›‘æ§æœåŠ¡äº§ç”Ÿå½±å“ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šéƒ¨ç½²ä¸¤ä¸ªé˜Ÿåˆ—å¤„ç†ç¨‹åºï¼Œæ¥æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ•°æ®ã€‚</p><p>ä¸€ä¸ªå¤„ç†ç¨‹åºæ¥æ”¶åˆ°æ•°æ®åï¼ŒæŠŠæ•°æ®å†™å…¥åˆ°Elasticsearchï¼Œç„¶åé€šè¿‡Kibanaå±•ç¤ºæ•°æ®ï¼Œè¿™äº›æ•°æ®ä¸»è¦æ˜¯ç”¨æ¥åšåŸå§‹æ•°æ®çš„æŸ¥è¯¢ã€‚</p><p>å¦ä¸€ä¸ªå¤„ç†ç¨‹åºæ˜¯ä¸€äº›æµå¼å¤„ç†çš„ä¸­é—´ä»¶ï¼Œæ¯”å¦‚Sparkã€Stormã€‚å®ƒä»¬ä»æ¶ˆæ¯é˜Ÿåˆ—é‡Œæ¥æ”¶æ•°æ®åä¼šåšä¸€äº›å¤„ç†ï¼Œè¿™äº›å¤„ç†åŒ…æ‹¬ï¼š</p><ul>\n<li>\n<p>è§£ææ•°æ®æ ¼å¼ï¼Œå°¤å…¶æ˜¯æ—¥å¿—æ ¼å¼ã€‚ä»é‡Œé¢æå–è¯¸å¦‚è¯·æ±‚é‡ã€å“åº”æ—¶é—´ã€è¯·æ±‚URLç­‰æ•°æ®ï¼›</p>\n</li>\n<li>\n<p>å¯¹æ•°æ®åšä¸€äº›èšåˆè¿ç®—ã€‚æ¯”å¦‚ï¼Œé’ˆå¯¹Tomcatè®¿é—®æ—¥å¿—ï¼Œå¯ä»¥è®¡ç®—åŒä¸€ä¸ªURLä¸€æ®µæ—¶é—´ä¹‹å†…çš„è¯·æ±‚é‡ã€å“åº”æ—¶é—´åˆ†ä½å€¼ã€é200è¯·æ±‚é‡çš„å¤§å°ç­‰ç­‰ã€‚</p>\n</li>\n<li>\n<p>å°†æ•°æ®å­˜å‚¨åœ¨æ—¶é—´åºåˆ—æ•°æ®åº“ä¸­ã€‚è¿™ç±»æ•°æ®åº“çš„ç‰¹ç‚¹æ˜¯ï¼Œå¯ä»¥å¯¹å¸¦æœ‰æ—¶é—´æ ‡ç­¾çš„æ•°æ®åšæ›´æœ‰æ•ˆçš„å­˜å‚¨ï¼Œè€Œæˆ‘ä»¬çš„ç›‘æ§æ•°æ®æ°æ°å¸¦æœ‰æ—¶é—´æ ‡ç­¾ï¼Œå¹¶ä¸”æŒ‰ç…§æ—¶é—´é€’å¢ï¼Œéå¸¸é€‚åˆå­˜å‚¨åœ¨æ—¶é—´åºåˆ—æ•°æ®åº“ä¸­ã€‚ç›®å‰ä¸šç•Œæ¯”è¾ƒå¸¸ç”¨çš„æ—¶åºæ•°æ®åº“æœ‰ InfluxDBã€OpenTSDBã€Graphiteï¼Œå„å¤§å‚çš„é€‰æ‹©å‡æœ‰ä¸åŒï¼Œä½ å¯ä»¥é€‰æ‹©ä¸€ç§ç†Ÿæ‚‰çš„æ¥ä½¿ç”¨ã€‚</p>\n</li>\n<li>\n<p>æœ€åï¼Œä½ å°±å¯ä»¥é€šè¿‡Grafanaæ¥è¿æ¥æ—¶åºæ•°æ®åº“ï¼Œå°†ç›‘æ§æ•°æ®ç»˜åˆ¶æˆæŠ¥è¡¨ï¼Œå‘ˆç°ç»™å¼€å‘å’Œè¿ç»´çš„åŒå­¦äº†ã€‚</p>\n</li>\n</ul><p><img src=\"https://static001.geekbang.org/resource/image/88/62/88a8d8c2461297fed4e95214f4325e62.jpg?wh=1142*340\" alt=\"\"></p><p>è‡³æ­¤ï¼Œä½ å’Œä½ çš„å›¢é˜Ÿä¹Ÿå°±å®Œæˆäº†å‚ç›´ç”µå•†ç³»ç»ŸæœåŠ¡ç«¯ç›‘æ§ç³»ç»Ÿæ­å»ºçš„å…¨è¿‡ç¨‹ã€‚è¿™é‡Œæˆ‘æƒ³å†å¤šè¯´ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä»ä¸åŒçš„æ•°æ®æºä¸­é‡‡é›†äº†å¾ˆå¤šçš„æŒ‡æ ‡ï¼Œæœ€ç»ˆåœ¨ç›‘æ§ç³»ç»Ÿä¸­ä¸€èˆ¬ä¼šå½¢æˆä»¥ä¸‹å‡ ä¸ªæŠ¥è¡¨ï¼Œä½ åœ¨å®é™…çš„å·¥ä½œä¸­å¯ä»¥å‚è€ƒå€Ÿé‰´ã€‚</p><p><strong>1. è®¿é—®è¶‹åŠ¿æŠ¥è¡¨ã€‚</strong>è¿™ç±»æŠ¥è¡¨æ¥å…¥çš„æ˜¯WebæœåŠ¡å™¨ï¼Œå’Œåº”ç”¨æœåŠ¡å™¨çš„è®¿é—®æ—¥å¿—ï¼Œå±•ç¤ºäº†æœåŠ¡æ•´ä½“çš„è®¿é—®é‡ã€å“åº”æ—¶é—´æƒ…å†µã€é”™è¯¯æ•°é‡ã€å¸¦å®½ç­‰ä¿¡æ¯ã€‚å®ƒä¸»è¦åæ˜ çš„æ˜¯æœåŠ¡çš„æ•´ä½“è¿è¡Œæƒ…å†µï¼Œå¸®åŠ©ä½ æ¥å‘ç°é—®é¢˜ã€‚</p><p><strong>2. æ€§èƒ½æŠ¥è¡¨ã€‚</strong> è¿™ç±»æŠ¥è¡¨å¯¹æ¥çš„æ˜¯èµ„æºå’Œä¾èµ–æœåŠ¡çš„åŸ‹ç‚¹æ•°æ®ï¼Œå±•ç¤ºäº†è¢«åŸ‹ç‚¹èµ„æºçš„è®¿é—®é‡å’Œå“åº”æ—¶é—´æƒ…å†µã€‚å®ƒåæ˜ äº†èµ„æºçš„æ•´ä½“è¿è¡Œæƒ…å†µï¼Œå½“ä½ ä»è®¿é—®è¶‹åŠ¿æŠ¥è¡¨å‘ç°é—®é¢˜åï¼Œå¯ä»¥å…ˆä»æ€§èƒ½æŠ¥è¡¨ä¸­ï¼Œæ‰¾åˆ°ç©¶ç«Ÿæ˜¯å“ªä¸€ä¸ªèµ„æºæˆ–è€…æœåŠ¡å‡ºç°äº†é—®é¢˜ã€‚</p><p><strong>3. èµ„æºæŠ¥è¡¨ã€‚</strong> è¿™ç±»æŠ¥è¡¨ä¸»è¦å¯¹æ¥çš„æ˜¯ï¼Œä½¿ç”¨Agenté‡‡é›†çš„èµ„æºçš„è¿è¡Œæƒ…å†µæ•°æ®ã€‚å½“ä½ ä»æ€§èƒ½æŠ¥è¡¨ä¸­ï¼Œå‘ç°æŸä¸€ä¸ªèµ„æºå‡ºç°äº†é—®é¢˜ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿›ä¸€æ­¥ä»è¿™ä¸ªæŠ¥è¡¨ä¸­ï¼Œå‘ç°èµ„æºç©¶ç«Ÿå‡ºç°äº†ä»€ä¹ˆé—®é¢˜ï¼Œæ˜¯è¿æ¥æ•°å¼‚å¸¸å¢é«˜è¿˜æ˜¯ç¼“å­˜å‘½ä¸­ç‡ä¸‹é™ã€‚è¿™æ ·å¯ä»¥è¿›ä¸€æ­¥å¸®ä½ åˆ†æé—®é¢˜çš„æ ¹æºï¼Œæ‰¾åˆ°è§£å†³é—®é¢˜çš„æ–¹æ¡ˆã€‚</p><h2>è¯¾ç¨‹å°ç»“</h2><p>æœ¬èŠ‚è¯¾ï¼Œæˆ‘å¸¦ä½ äº†è§£äº†æœåŠ¡ç«¯ç›‘æ§æ­å»ºçš„è¿‡ç¨‹ï¼Œåœ¨è¿™é‡Œï¼Œä½ éœ€è¦äº†è§£ä»¥ä¸‹å‡ ä¸ªé‡ç‚¹ï¼š</p><ol>\n<li>\n<p>è€—æ—¶ã€è¯·æ±‚é‡å’Œé”™è¯¯æ•°æ˜¯ä¸‰ç§æœ€é€šç”¨çš„ç›‘æ§æŒ‡æ ‡ï¼Œä¸åŒçš„ç»„ä»¶è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„ç›‘æ§æŒ‡æ ‡ï¼Œä½ åœ¨æ­å»ºè‡ªå·±çš„ç›‘æ§ç³»ç»Ÿçš„æ—¶å€™å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›</p>\n</li>\n<li>\n<p>Agentã€åŸ‹ç‚¹å’Œæ—¥å¿—æ˜¯ä¸‰ç§æœ€å¸¸è§çš„æ•°æ®é‡‡é›†æ–¹å¼ï¼›</p>\n</li>\n<li>\n<p>è®¿é—®è¶‹åŠ¿æŠ¥è¡¨ç”¨æ¥å±•ç¤ºæœåŠ¡çš„æ•´ä½“è¿è¡Œæƒ…å†µï¼Œæ€§èƒ½æŠ¥è¡¨ç”¨æ¥åˆ†æèµ„æºæˆ–è€…ä¾èµ–çš„æœåŠ¡æ˜¯å¦å‡ºç°é—®é¢˜ï¼Œèµ„æºæŠ¥è¡¨ç”¨æ¥è¿½æŸ¥èµ„æºé—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚è¿™ä¸‰ä¸ªæŠ¥è¡¨å…±åŒæ„æˆäº†ä½ çš„æœåŠ¡ç«¯ç›‘æ§ä½“ç³»ã€‚</p>\n</li>\n</ol><p>æ€»ä¹‹ï¼Œç›‘æ§ç³»ç»Ÿæ˜¯ä½ å‘ç°é—®é¢˜ï¼Œæ’æŸ¥é—®é¢˜çš„é‡è¦å·¥å…·ï¼Œä½ åº”è¯¥é‡è§†å®ƒï¼Œå¹¶ä¸”æŠ•å…¥è¶³å¤Ÿçš„ç²¾åŠ›æ¥ä¸æ–­åœ°å®Œå–„å®ƒã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½ä¸æ–­åœ°æé«˜å¯¹ç³»ç»Ÿè¿ç»´çš„æŒæ§åŠ›ï¼Œé™ä½æ•…éšœå‘ç”Ÿçš„é£é™©ã€‚</p><h2>ä¸€è¯¾ä¸€æ€</h2><p>åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œä½ çš„æœåŠ¡ç«¯ç›‘æ§ç³»ç»Ÿæ˜¯å¦‚ä½•æ­å»ºçš„å‘¢ï¼Ÿéƒ½æœ‰å“ªäº›ç›‘æ§æŠ¥è¡¨å’Œç›‘æ§é¡¹å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„ç»éªŒã€‚</p><p>æœ€åï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ å°†å®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p>","comments":[{"had_liked":false,"id":157924,"user_name":"åƒé¥­é¥­","can_delete":false,"product_type":"c1","uid":1231549,"ip_address":"","ucode":"95CFA07CDA2957","user_header":"https://static001.geekbang.org/account/avatar/00/12/ca/bd/a51ae4b2.jpg","comment_is_top":false,"comment_ctime":1575283633,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"108949466033","product_id":100035801,"comment_content":"ç›‘æ§æ‰‹æ®µè¿˜æ˜¯ä¸å°‘çš„ï¼ŒGrafana ï¼ŒSkywalkingï¼ŒPrometheus ç­‰ï¼Œ å¦å¤–è¿˜å¯ä»¥ç»“åˆNginxã€ Flume ã€Kafka ã€ELK ç­‰æ—¥å¿—æ”¶é›†åšè‡ªå·±çš„ç³»ç»Ÿåˆ†æ","like_count":26},{"had_liked":false,"id":301073,"user_name":"æ‚Ÿç©ºèŠæ¶æ„","can_delete":false,"product_type":"c1","uid":1123163,"ip_address":"","ucode":"C2F482A0CF8AF1","user_header":"https://static001.geekbang.org/account/avatar/00/11/23/5b/983408b9.jpg","comment_is_top":false,"comment_ctime":1625529307,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"27395333083","product_id":100035801,"comment_content":"å¯è§†åŒ–æŸ¥çœ‹ï¼šGrafanaï¼ŒPrometheusï¼ŒSkywalkingï¼ŒKibanaï¼Œç”¨ Zipkin æŸ¥çœ‹é“¾è·¯è¿½è¸ªï¼Œzabbix ç›‘æ§ç¡¬ä»¶æŒ‡æ ‡ã€‚<br>ä»å“ªäº›åœ°æ–¹æ”¶é›†æ•°æ®ï¼šNginx è®¿é—®æ—¥å¿—ï¼ŒTomcat è®¿é—®æ—¥å¿—ï¼Œdockerï¼Œæ•°æ®åº“æŠ¥é”™æ—¥å¿—ï¼Œredis æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ŒJVM å†…å­˜å¼‚å¸¸ç­‰ç­‰ã€‚<br>å“ªäº›å¯ä»¥ç”¨æ¥å­˜å‚¨ï¼šElasticsearchï¼ŒKafkaï¼Œinfluxdbï¼Œclickhouseã€‚","like_count":7},{"had_liked":false,"id":157643,"user_name":"æ— å½¢","can_delete":false,"product_type":"c1","uid":1016889,"ip_address":"","ucode":"B740E2A68A17A5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/39/c8772466.jpg","comment_is_top":false,"comment_ctime":1575217971,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"27345021747","product_id":100035801,"comment_content":"æˆ‘ä»¬ä¹‹å‰è‡ªå·±åšçš„ç›‘æ§ä¸»è¦æœ‰ä¸¤æ–¹é¢çš„ï¼Œä¸€ä¸ªæ˜¯å…³é”®æ¥å£nginxæ—¥å¿—ï¼Œä¸»è¦æ˜¯çŠ¶æ€ç ï¼Œè¿ç»´æ”¶é›†ä¹‹åæ‰”åˆ°kafkaï¼Œæˆ‘ä»¬ä»kafkaæ¶ˆè´¹ï¼Œèšåˆä¹‹åæ‰”åˆ°influxdbï¼Œåæ¥influxdbå†…å­˜å¤§ï¼Œåˆå¤ªæ…¢ï¼Œåˆæ¢æˆäº†clickhouseï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†æ˜¯åº”ç”¨å±‚çš„é”™è¯¯æ—¥å¿—ï¼ŒæŒ‰ç…§ä¸€å®šçš„é¢‘æ¬¡æ§åˆ¶ï¼ŒæŠ¥è­¦åˆ°é’‰é’‰ç¾¤é‡Œå¤„ç†","like_count":7},{"had_liked":false,"id":215039,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1588895227,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18768764411","product_id":100035801,"comment_content":"ç›‘æ§çš„é‡è¦æ€§ä¸è¨€è€Œå–»ï¼Œå¥½çš„ç›‘æ§å·¥å…·æ›´èƒ½æé«˜è¿ç»´æ•ˆç‡ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨è¿‡è¶æ‰‹çš„ç›‘æ§å·¥å…·åï¼Œå†ä½¿ç”¨ä¸€äº›ç³Ÿç³•çš„å·¥å…·ï¼Œä¼šæ»¡è…¹çš„ä¸æ»¡ã€‚<br>ç›‘æ§å·¥å…·æœ€å¥½åœ¨ä½¿ç”¨ä¸Šç®€å•å†ç®€å•ï¼Œå¦‚æœæŸ¥ä¸ªæ—¥å¿—éœ€è¦å…ˆç™»å½•å ¡å’æœºå†ç™»å½•ä¸­æ§æœºç„¶åå†ç™»å½•ç›®æ ‡æœºï¼Œç„¶åå†å®šä½æ—¥å¿—è·¯å¾„å†é€šè¿‡ç³»ç»Ÿå‘½ä»¤æŸ¥è¯¢ï¼Œåšè¿ç»´å·¥å…·çš„åº”è¯¥XXXï¼Œè¿™æ ·æ•ˆç‡å¤ªä½äº†ã€‚å¦å¤–ï¼Œå°±æ˜¯å·¥å…·é—´çš„å…³è”æ€§éœ€è¦è‡ªç„¶é¡ºç•…ï¼Œä¸èƒ½æŸ¥ä¸ªä¸œè¥¿ç™»å½•ä¸€ä¸ªç³»ç»Ÿï¼ŒæŸ¥å¦å¤–ä¸€ä¸ªåˆç™»å½•ä¸€ä¸ªç³»ç»Ÿï¼Œè€Œä¸”ç³»ç»Ÿåè¿˜ä¸çŸ­ï¼Œè¿™æ ·ä¹ŸéªŒè¯å½±å“æ•ˆç‡ã€‚<br>è¿ç»´å·¥å…·æœ€å¥½æ˜¯å‚»ç“œå¼çš„ç•Œé¢æ“ä½œï¼Œçº¦å®šå¤§äºé…ç½®ï¼Œä¸ç”¨ç‚¹å‡»Næ¬¡é¼ æ ‡æ‰æ‰¾åˆ°è‡ªå·±æƒ³è¦çš„ä¸œè¥¿ã€‚","like_count":4},{"had_liked":false,"id":157935,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1184658,"ip_address":"","ucode":"0641211EE9DA5C","user_header":"https://static001.geekbang.org/account/avatar/00/12/13/92/0b4c8e30.jpg","comment_is_top":false,"comment_ctime":1575285391,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"18755154575","product_id":100035801,"comment_content":"ç³»ç»Ÿç¡¬ä»¶æŒ‡æ ‡ç”¨zabbixç›‘æ§ï¼Œæ¥å£å“åº”ï¼Œæ…¢sqlç­‰æˆ‘ä»¬æ˜¯é€šè¿‡catç›‘æ§çš„","like_count":4},{"had_liked":false,"id":157742,"user_name":"åˆºçŒ¬","can_delete":false,"product_type":"c1","uid":1108297,"ip_address":"","ucode":"60C3E38F4F03CC","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/49/29072f9e.jpg","comment_is_top":false,"comment_ctime":1575253716,"is_pvip":false,"replies":[{"id":"60618","content":"open falcon","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1575367230,"ip_address":"","comment_id":157742,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14460155604","product_id":100035801,"comment_content":"è¿™é‡Œåªæåˆ°äº†è½¯ä»¶ç›‘æ§ï¼Œç¡¬ä»¶ä¸€èˆ¬æœ‰ä»€ä¹ˆå¥½çš„ç›‘æ§æ–¹å¼","like_count":3,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476515,"discussion_content":"open falcon","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575367230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577160,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/TicIdNMR9b27e7Llq2Z9M3WOoNuEJ7jl2vAgVdnQD1YwuTAPich0JkekTcQEwLMwMXeRsDE7ghe9qKVMooLSQ9mA/132","nickname":"biubiubiu","note":"","ucode":"6F358E347A6873","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352696,"discussion_content":"zabbix","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614821092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279485,"user_name":"äºæµ·é¾™","can_delete":false,"product_type":"c1","uid":1085679,"ip_address":"","ucode":"CCBA02E3BC0586","user_header":"https://static001.geekbang.org/account/avatar/00/10/90/ef/eb92d357.jpg","comment_is_top":false,"comment_ctime":1613802453,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10203737045","product_id":100035801,"comment_content":"Webç¨‹åºå†…åŸ‹ç‚¹ï¼ŒæŠ•é€’æ•°æ®åˆ°Prometheusï¼Œä½¿ç”¨ grafanaè¿›è¡Œå±•ç¤ºï¼›<br>ç”±äºPrometheus æ”¯æŒNginxæ’ä»¶å’Œnodeæ’ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿å¯¹nginxå’Œnodeç¡¬ä»¶è¿›è¡Œç›‘æ§<br>","like_count":3},{"had_liked":false,"id":160602,"user_name":"longslee","can_delete":false,"product_type":"c1","uid":1465986,"ip_address":"","ucode":"C24E32E5B1B6F5","user_header":"https://static001.geekbang.org/account/avatar/00/16/5e/82/438c8534.jpg","comment_is_top":false,"comment_ctime":1575983988,"is_pvip":false,"replies":[{"id":"61406","content":"ä¸€èˆ¬å¦‚æœåšä¸­é—´ä»¶çš„è¯ï¼Œæ˜¯éœ€è¦çš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1576116909,"ip_address":"","comment_id":160602,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870951284","product_id":100035801,"comment_content":"æ‰“å¡ã€‚è€å¸ˆï¼Œè¯·æ•™ä¸‹ï¼Œåœ¨å¯åŠ¨ Java ç¨‹åºçš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥å…»æˆæš´éœ² jmx çš„ä¹ æƒ¯å‘¢","like_count":1,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477429,"discussion_content":"ä¸€èˆ¬å¦‚æœåšä¸­é—´ä»¶çš„è¯ï¼Œæ˜¯éœ€è¦çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576116909,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322139,"user_name":"ğŸ’¢ æ˜Ÿæ˜ŸğŸ’¢","can_delete":false,"product_type":"c1","uid":1254392,"ip_address":"","ucode":"A402B765222C35","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/f8/24fcccea.jpg","comment_is_top":false,"comment_ctime":1637204375,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637204375","product_id":100035801,"comment_content":"è®¿é—®è¶‹åŠ¿æŠ¥è¡¨ï¼Œæ€§èƒ½æŠ¥è¡¨ï¼Œè¿˜æœ‰èµ„æºæŠ¥è¡¨ï¼Œå¯ä»¥ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":309802,"user_name":"å°èƒ¡","can_delete":false,"product_type":"c1","uid":2397964,"ip_address":"","ucode":"1E0DD4138E9D0E","user_header":"","comment_is_top":false,"comment_ctime":1630336501,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630336501","product_id":100035801,"comment_content":"ç°åœ¨å¤§éƒ¨åˆ†ç›‘æ§éƒ½æœ‰Prometheusï¼Œä¸ºå•¥ä¸ç”¨Prometheusä¸ºä¾‹è¿›è¡Œè®²è§£å‘¢","like_count":1},{"had_liked":false,"id":167756,"user_name":"ğŸ‘½","can_delete":false,"product_type":"c1","uid":1274117,"ip_address":"","ucode":"D313AF941B412D","user_header":"https://static001.geekbang.org/account/avatar/00/13/71/05/db554eba.jpg","comment_is_top":false,"comment_ctime":1577928564,"is_pvip":false,"replies":[{"id":"65113","content":"å…¶å®æˆ‘è§‰å¾—å¾ˆé‡è¦çš„æ˜¯ä¾èµ–æœåŠ¡å’Œèµ„æºçš„ç›‘æ§","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1577935491,"ip_address":"","comment_id":167756,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577928564","product_id":100035801,"comment_content":"ä¸ªäººç†è§£ï¼š<br>æœåŠ¡ç«¯ç›‘æ§ä¸»è¦å†…å®¹ï¼Œ<br>1 å…³æ³¨æ€§èƒ½æŒ‡æ ‡ï¼Œ<br>2 å­˜å‚¨æœåŠ¡ç«¯æ—¥å¿—æƒ…å†µï¼ˆé‡‡ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œ<br>3 æœåŠ¡ç«¯æŒ‡æ ‡å±•ç¤ºã€‚","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479976,"discussion_content":"å…¶å®æˆ‘è§‰å¾—å¾ˆé‡è¦çš„æ˜¯ä¾èµ–æœåŠ¡å’Œèµ„æºçš„ç›‘æ§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577935491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159109,"user_name":"å¼ å¾·","can_delete":false,"product_type":"c1","uid":1101929,"ip_address":"","ucode":"31FE63E8725EFC","user_header":"https://static001.geekbang.org/account/avatar/00/10/d0/69/5dbdc245.jpg","comment_is_top":false,"comment_ctime":1575539036,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575539036","product_id":100035801,"comment_content":"è¿™ä¸ªå®¢æˆ·ç«¯ç›‘æ§å°±ç®—æ˜¯BATå…¶å®åšçš„ä¹Ÿä¸æ˜¯å¾ˆå¥½     ä»¥å‰æœ‰ä¸€é˜¶æ®µ   æ‰‹æœºæ·˜å®æŸä¸ªç‰ˆæœ¬çš„å•†å“é¡µçš„æ”¶è—å°æ˜Ÿæ˜Ÿ   æ— è®ºå¦‚ä½•éƒ½ä¸èƒ½åŠ å…¥æ”¶è—å¤¹ã€‚ã€‚ã€‚","like_count":0},{"had_liked":false,"id":158127,"user_name":"å°å¯","can_delete":false,"product_type":"c1","uid":1006735,"ip_address":"","ucode":"8834AF621FA67D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5c/8f/551b5624.jpg","comment_is_top":false,"comment_ctime":1575336137,"is_pvip":false,"replies":[{"id":"60607","content":"é€‰å‹æ–¹æ¡ˆæ˜¯å¯ä»¥æ…¢æ…¢æ¼”è¿›çš„~","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1575363304,"ip_address":"","comment_id":158127,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575336137","product_id":100035801,"comment_content":"è¿‘ä¸€å¹´ä¸€ç›´åœ¨åšè¿ç»´ç›‘æ§ç³»ç»Ÿçš„å·¥ä½œï¼Œä»è„šæœ¬+è‡ªç ”agentåˆ°zabbix + logstashï¼Œç›‘æ§æœåŠ¡ç«¯æ¶ˆæ¯é˜Ÿåˆ—+èšåˆè®¡ç®—ç¨‹åºã€‚è™½ç„¶æ»¡è¶³éœ€æ±‚ï¼Œä½†èŠ‚ç‚¹å¤šï¼ŒæŒ‡æ ‡å¤šæ—¶ï¼Œzabbixå¯¹åº”çš„æ•°æ®åº“è´Ÿè½½è¿‡é«˜ï¼Œlogstashä¹Ÿå¤ªé‡å¤ªåƒèŠ‚ç‚¹æ€§èƒ½ï¼Œå½“æ—¶é€‰å‹æ—¶å¤ªå°±æ„Ÿè§‰éƒ½å¤ªé‡äº†ï¼Œä½†ä¸Šå±‚å®šçš„æ²¡åŠæ³•ã€‚ç°åœ¨å·²ç»ä¸åšè¿™å—äº†ï¼Œå¬è¯´åˆè¦æ¢æ–¹æ¡ˆğŸ˜‚","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476639,"discussion_content":"é€‰å‹æ–¹æ¡ˆæ˜¯å¯ä»¥æ…¢æ…¢æ¼”è¿›çš„~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575363304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157790,"user_name":"é˜¿å¡ç‰›","can_delete":false,"product_type":"c1","uid":1022247,"ip_address":"","ucode":"0BC43A904C3199","user_header":"https://static001.geekbang.org/account/avatar/00/0f/99/27/47aa9dea.jpg","comment_is_top":false,"comment_ctime":1575259352,"is_pvip":false,"replies":[{"id":"60609","content":"falconæœ‰å¾ˆå¤šagentçš„","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1575363385,"ip_address":"","comment_id":157790,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1575259352","product_id":100035801,"comment_content":"æœ‰é€šç”¨å¼€æºçš„agentæ¨èå—ï¼Ÿè¿˜æ˜¯å»ºè®®æ¯ç§ç»„ä»¶éƒ½æœ‰è‡ªå·±å¼„ä¸ªagent?","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476531,"discussion_content":"falconæœ‰å¾ˆå¤šagentçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575363385,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1121584,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/30/4a82c7af.jpg","nickname":"fancion","note":"","ucode":"9000895F6BE0E4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":69399,"discussion_content":"å¬äº‘äº†è§£ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575285641,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157762,"user_name":"PatHoo","can_delete":false,"product_type":"c1","uid":1097801,"ip_address":"","ucode":"7519F3ABCB7AC6","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/49/e2a18264.jpg","comment_is_top":false,"comment_ctime":1575256515,"is_pvip":false,"replies":[{"id":"60610","content":"äº‘åŸç”Ÿæ—¶ä»£çš„ç›‘æ§ç³»ç»Ÿç»„ä»¶","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1575363505,"ip_address":"","comment_id":157762,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575256515","product_id":100035801,"comment_content":"CNCF Prometheus","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476523,"discussion_content":"äº‘åŸç”Ÿæ—¶ä»£çš„ç›‘æ§ç³»ç»Ÿç»„ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575363505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157719,"user_name":"å¯’æºª","can_delete":false,"product_type":"c1","uid":1001970,"ip_address":"","ucode":"67B9F1A1C15A20","user_header":"https://static001.geekbang.org/account/avatar/00/0f/49/f2/25cfa472.jpg","comment_is_top":false,"comment_ctime":1575250135,"is_pvip":false,"replies":[{"id":"60619","content":"æ˜¯ä¸€ä¸ªå¼€æºæˆ–è€…è‡ªç ”çš„ç¨‹åº","user_name":"ä½œè€…å›å¤","user_name_real":"å”æ‰¬","uid":"1448977","ctime":1575367254,"ip_address":"","comment_id":157719,"utype":1}],"discussion_count":1,"race_medal":1,"score":"1575250135","product_id":100035801,"comment_content":"è¯·é—®agentæ˜¯ä¸€ä¸ªä¸­é—´ä»¶ä»¶è¿˜æ˜¯ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1448977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1c/11/4b45993d.jpg","nickname":"å”æ‰¬","note":"","ucode":"1AF4C4A4DBC6EF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476506,"discussion_content":"æ˜¯ä¸€ä¸ªå¼€æºæˆ–è€…è‡ªç ”çš„ç¨‹åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575367254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":157691,"user_name":"å³°","can_delete":false,"product_type":"c1","uid":1390326,"ip_address":"","ucode":"527BB65559F0B0","user_header":"https://static001.geekbang.org/account/avatar/00/15/36/f6/d65b7302.jpg","comment_is_top":false,"comment_ctime":1575247460,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575247460","product_id":100035801,"comment_content":"æ€ä¹ˆæ²¡æåˆ°Skywalking","like_count":0}]}