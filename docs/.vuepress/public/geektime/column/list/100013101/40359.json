{"id":40359,"title":"21 | panicå‡½æ•°ã€recoverå‡½æ•°ä»¥åŠdeferè¯­å¥ ï¼ˆä¸Šï¼‰","content":"<p>æˆ‘åœ¨ä¸Šä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œè¯¦ç»†åœ°è®²è¿°äº†Goè¯­è¨€ä¸­çš„é”™è¯¯å¤„ç†ï¼Œå¹¶ä»ä¸¤ä¸ªè§†è§’ä¸ºä½ æ€»ç»“äº†é”™è¯¯ç±»å‹ã€é”™è¯¯å€¼çš„å¤„ç†æŠ€å·§å’Œè®¾è®¡æ–¹å¼ã€‚</p><p>åœ¨æœ¬ç¯‡ï¼Œæˆ‘è¦ç»™ä½ å±•ç¤ºGoè¯­è¨€çš„å¦å¤–ä¸€ç§é”™è¯¯å¤„ç†æ–¹å¼ã€‚ä¸è¿‡ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œå®ƒå¤„ç†çš„ä¸æ˜¯é”™è¯¯ï¼Œè€Œæ˜¯å¼‚å¸¸ï¼Œå¹¶ä¸”æ˜¯ä¸€ç§åœ¨æˆ‘ä»¬æ„æ–™ä¹‹å¤–çš„ç¨‹åºå¼‚å¸¸ã€‚</p><h2>å‰å¯¼çŸ¥è¯†ï¼šè¿è¡Œæ—¶ææ…Œpanic</h2><p>è¿™ç§ç¨‹åºå¼‚å¸¸è¢«å«åšpanicï¼Œæˆ‘æŠŠå®ƒç¿»è¯‘ä¸ºè¿è¡Œæ—¶ææ…Œã€‚å…¶ä¸­çš„â€œææ…Œâ€äºŒå­—æ˜¯ç”±panicç›´è¯‘è¿‡æ¥çš„ï¼Œè€Œä¹‹æ‰€ä»¥å‰é¢åˆåŠ ä¸Šäº†â€œè¿è¡Œæ—¶â€ä¸‰ä¸ªå­—ï¼Œæ˜¯å› ä¸ºè¿™ç§å¼‚å¸¸åªä¼šåœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™è¢«æŠ›å‡ºæ¥ã€‚</p><p>æˆ‘ä»¬ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­æ¥çœ‹çœ‹ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œä¸€ä¸ªGoç¨‹åºé‡Œæœ‰ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå®ƒçš„é•¿åº¦æ˜¯5ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥åˆ‡ç‰‡ä¸­çš„å…ƒç´ å€¼çš„ç´¢å¼•åˆ†åˆ«ä¸º<code>0</code>ã€<code>1</code>ã€<code>2</code>ã€<code>3</code>ã€<code>4</code>ï¼Œä½†æ˜¯ï¼Œæˆ‘åœ¨ç¨‹åºé‡Œå´æƒ³é€šè¿‡ç´¢å¼•<code>5</code>è®¿é—®å…¶ä¸­çš„å…ƒç´ å€¼ï¼Œæ˜¾è€Œæ˜“è§ï¼Œè¿™æ ·çš„è®¿é—®æ˜¯ä¸æ­£ç¡®çš„ã€‚</p><p>Goç¨‹åºï¼Œç¡®åˆ‡åœ°è¯´æ˜¯ç¨‹åºå†…åµŒçš„Goè¯­è¨€è¿è¡Œæ—¶ç³»ç»Ÿï¼Œä¼šåœ¨æ‰§è¡Œåˆ°è¿™è¡Œä»£ç çš„æ—¶å€™æŠ›å‡ºä¸€ä¸ªâ€œindex out of rangeâ€çš„panicï¼Œç”¨ä»¥æç¤ºä½ ç´¢å¼•è¶Šç•Œäº†ã€‚</p><p>å½“ç„¶äº†ï¼Œè¿™ä¸ä»…ä»…æ˜¯ä¸ªæç¤ºã€‚å½“panicè¢«æŠ›å‡ºä¹‹åï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨ç¨‹åºé‡Œæ·»åŠ ä»»ä½•ä¿æŠ¤æªæ–½çš„è¯ï¼Œç¨‹åºï¼ˆæˆ–è€…è¯´ä»£è¡¨å®ƒçš„é‚£ä¸ªè¿›ç¨‹ï¼‰å°±ä¼šåœ¨æ‰“å°å‡ºpanicçš„è¯¦ç»†æƒ…å†µï¼ˆä»¥ä¸‹ç®€ç§°panicè¯¦æƒ…ï¼‰ä¹‹åï¼Œç»ˆæ­¢è¿è¡Œã€‚</p><!-- [[[read_end]]] --><p>ç°åœ¨ï¼Œå°±è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™æ ·çš„panicè¯¦æƒ…ä¸­éƒ½æœ‰ä»€ä¹ˆã€‚</p><pre><code>panic: runtime error: index out of range\n\ngoroutine 1 [running]:\nmain.main()\n /Users/haolin/GeekTime/Golang_Puzzlers/src/puzzlers/article19/q0/demo47.go:5 +0x3d\nexit status 2\n</code></pre><p>è¿™ä»½è¯¦æƒ…çš„ç¬¬ä¸€è¡Œæ˜¯â€œpanic: runtime error: index out of rangeâ€ã€‚å…¶ä¸­çš„â€œruntime errorâ€çš„å«ä¹‰æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ª<code>runtime</code>ä»£ç åŒ…ä¸­æŠ›å‡ºçš„panicã€‚åœ¨è¿™ä¸ªpanicä¸­ï¼ŒåŒ…å«äº†ä¸€ä¸ª<code>runtime.Error</code>æ¥å£ç±»å‹çš„å€¼ã€‚<code>runtime.Error</code>æ¥å£å†…åµŒäº†<code>error</code>æ¥å£ï¼Œå¹¶åšäº†ä¸€ç‚¹ç‚¹æ‰©å±•ï¼Œ<code>runtime</code>åŒ…ä¸­æœ‰ä¸å°‘å®ƒçš„å®ç°ç±»å‹ã€‚</p><p>å®é™…ä¸Šï¼Œæ­¤è¯¦æƒ…ä¸­çš„â€œpanicï¼šâ€å³è¾¹çš„å†…å®¹ï¼Œæ­£æ˜¯è¿™ä¸ªpanicåŒ…å«çš„<code>runtime.Error</code>ç±»å‹å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚</p><p>æ­¤å¤–ï¼Œpanicè¯¦æƒ…ä¸­ï¼Œä¸€èˆ¬è¿˜ä¼šåŒ…å«ä¸å®ƒçš„å¼•å‘åŸå› æœ‰å…³çš„goroutineçš„ä»£ç æ‰§è¡Œä¿¡æ¯ã€‚æ­£å¦‚å‰è¿°è¯¦æƒ…ä¸­çš„â€œgoroutine 1 [running]â€ï¼Œå®ƒè¡¨ç¤ºæœ‰ä¸€ä¸ªIDä¸º<code>1</code>çš„goroutineåœ¨æ­¤panicè¢«å¼•å‘çš„æ—¶å€™æ­£åœ¨è¿è¡Œã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œçš„IDå…¶å®å¹¶ä¸é‡è¦ï¼Œå› ä¸ºå®ƒåªæ˜¯Goè¯­è¨€è¿è¡Œæ—¶ç³»ç»Ÿå†…éƒ¨ç»™äºˆçš„ä¸€ä¸ªgoroutineç¼–å·ï¼Œæˆ‘ä»¬åœ¨ç¨‹åºä¸­æ˜¯æ— æ³•è·å–å’Œæ›´æ”¹çš„ã€‚</p><p>æˆ‘ä»¬å†çœ‹ä¸‹ä¸€è¡Œï¼Œâ€œmain.main()â€è¡¨æ˜äº†è¿™ä¸ªgoroutineåŒ…è£…çš„<code>go</code>å‡½æ•°å°±æ˜¯å‘½ä»¤æºç æ–‡ä»¶ä¸­çš„é‚£ä¸ª<code>main</code>å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œçš„goroutineæ­£æ˜¯ä¸»goroutineã€‚å†ä¸‹é¢çš„ä¸€è¡Œï¼ŒæŒ‡å‡ºçš„å°±æ˜¯è¿™ä¸ªgoroutineä¸­çš„å“ªä¸€è¡Œä»£ç åœ¨æ­¤panicè¢«å¼•å‘æ—¶æ­£åœ¨æ‰§è¡Œã€‚</p><p>è¿™åŒ…å«äº†æ­¤è¡Œä»£ç åœ¨å…¶æ‰€å±çš„æºç æ–‡ä»¶ä¸­çš„è¡Œæ•°ï¼Œä»¥åŠè¿™ä¸ªæºç æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚è¿™ä¸€è¡Œæœ€åçš„<code>+0x3d</code>ä»£è¡¨çš„æ˜¯ï¼šæ­¤è¡Œä»£ç ç›¸å¯¹äºå…¶æ‰€å±å‡½æ•°çš„å…¥å£ç¨‹åºè®¡æ•°åç§»é‡ã€‚ä¸è¿‡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å®ƒçš„ç”¨å¤„å¹¶ä¸å¤§ã€‚</p><p>æœ€åï¼Œâ€œexit status 2â€è¡¨æ˜æˆ‘çš„è¿™ä¸ªç¨‹åºæ˜¯ä»¥é€€å‡ºçŠ¶æ€ç <code>2</code>ç»“æŸè¿è¡Œçš„ã€‚åœ¨å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä¸­ï¼Œåªè¦é€€å‡ºçŠ¶æ€ç ä¸æ˜¯<code>0</code>ï¼Œéƒ½æ„å‘³ç€ç¨‹åºè¿è¡Œçš„éæ­£å¸¸ç»“æŸã€‚åœ¨Goè¯­è¨€ä¸­ï¼Œå› panicå¯¼è‡´ç¨‹åºç»“æŸè¿è¡Œçš„é€€å‡ºçŠ¶æ€ç ä¸€èˆ¬éƒ½ä¼šæ˜¯<code>2</code>ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ä»ä¸Šè¾¹çš„è¿™ä¸ªpanicè¯¦æƒ…å¯ä»¥çœ‹å‡ºï¼Œä½œä¸ºæ­¤panicçš„å¼•å‘æ ¹æºçš„ä»£ç å¤„äºdemo47.goæ–‡ä»¶ä¸­çš„ç¬¬5è¡Œï¼ŒåŒæ—¶è¢«åŒ…å«åœ¨<code>main</code>åŒ…ï¼ˆä¹Ÿå°±æ˜¯å‘½ä»¤æºç æ–‡ä»¶æ‰€åœ¨çš„ä»£ç åŒ…ï¼‰çš„<code>main</code>å‡½æ•°ä¸­ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªé—®é¢˜ä¹Ÿéšä¹‹è€Œæ¥äº†ã€‚æˆ‘ä»Šå¤©çš„é—®é¢˜æ˜¯ï¼š<strong>ä»panicè¢«å¼•å‘åˆ°ç¨‹åºç»ˆæ­¢è¿è¡Œçš„å¤§è‡´è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p><strong>è¿™é“é¢˜çš„å…¸å‹å›ç­”æ˜¯è¿™æ ·çš„ã€‚</strong></p><p>æˆ‘ä»¬å…ˆè¯´ä¸€ä¸ªå¤§è‡´çš„è¿‡ç¨‹ï¼šæŸä¸ªå‡½æ•°ä¸­çš„æŸè¡Œä»£ç æœ‰æ„æˆ–æ— æ„åœ°å¼•å‘äº†ä¸€ä¸ªpanicã€‚è¿™æ—¶ï¼Œåˆå§‹çš„panicè¯¦æƒ…ä¼šè¢«å»ºç«‹èµ·æ¥ï¼Œå¹¶ä¸”è¯¥ç¨‹åºçš„æ§åˆ¶æƒä¼šç«‹å³ä»æ­¤è¡Œä»£ç è½¬ç§»è‡³è°ƒç”¨å…¶æ‰€å±å‡½æ•°çš„é‚£è¡Œä»£ç ä¸Šï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨æ ˆä¸­çš„ä¸Šä¸€çº§ã€‚</p><p>è¿™ä¹Ÿæ„å‘³ç€ï¼Œæ­¤è¡Œä»£ç æ‰€å±å‡½æ•°çš„æ‰§è¡Œéšå³ç»ˆæ­¢ã€‚ç´§æ¥ç€ï¼Œæ§åˆ¶æƒå¹¶ä¸ä¼šåœ¨æ­¤æœ‰ç‰‡åˆ»çš„åœç•™ï¼Œå®ƒåˆä¼šç«‹å³è½¬ç§»è‡³å†ä¸Šä¸€çº§çš„è°ƒç”¨ä»£ç å¤„ã€‚æ§åˆ¶æƒå¦‚æ­¤ä¸€çº§ä¸€çº§åœ°æ²¿ç€è°ƒç”¨æ ˆçš„åæ–¹å‘ä¼ æ’­è‡³é¡¶ç«¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„æœ€å¤–å±‚å‡½æ•°é‚£é‡Œã€‚</p><p>è¿™é‡Œçš„æœ€å¤–å±‚å‡½æ•°æŒ‡çš„æ˜¯<code>go</code>å‡½æ•°ï¼Œå¯¹äºä¸»goroutineæ¥è¯´å°±æ˜¯<code>main</code>å‡½æ•°ã€‚ä½†æ˜¯æ§åˆ¶æƒä¹Ÿä¸ä¼šåœç•™åœ¨é‚£é‡Œï¼Œè€Œæ˜¯è¢«Goè¯­è¨€è¿è¡Œæ—¶ç³»ç»Ÿæ”¶å›ã€‚</p><p>éšåï¼Œç¨‹åºå´©æºƒå¹¶ç»ˆæ­¢è¿è¡Œï¼Œæ‰¿è½½ç¨‹åºè¿™æ¬¡è¿è¡Œçš„è¿›ç¨‹ä¹Ÿä¼šéšä¹‹æ­»äº¡å¹¶æ¶ˆå¤±ã€‚ä¸æ­¤åŒæ—¶ï¼Œåœ¨è¿™ä¸ªæ§åˆ¶æƒä¼ æ’­çš„è¿‡ç¨‹ä¸­ï¼Œpanicè¯¦æƒ…ä¼šè¢«é€æ¸åœ°ç§¯ç´¯å’Œå®Œå–„ï¼Œå¹¶ä¼šåœ¨ç¨‹åºç»ˆæ­¢ä¹‹å‰è¢«æ‰“å°å‡ºæ¥ã€‚</p><h2>é—®é¢˜è§£æ</h2><p>panicå¯èƒ½æ˜¯æˆ‘ä»¬åœ¨æ— æ„é—´ï¼ˆæˆ–è€…è¯´ä¸€ä¸å°å¿ƒï¼‰å¼•å‘çš„ï¼Œå¦‚å‰æ–‡æ‰€è¿°çš„ç´¢å¼•è¶Šç•Œã€‚è¿™ç±»panicæ˜¯çœŸæ­£çš„ã€åœ¨æˆ‘ä»¬æ„æ–™ä¹‹å¤–çš„ç¨‹åºå¼‚å¸¸ã€‚ä¸è¿‡ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥æœ‰æ„åœ°å¼•å‘panicã€‚</p><p>Goè¯­è¨€çš„å†…å»ºå‡½æ•°<code>panic</code>æ˜¯ä¸“é—¨ç”¨äºå¼•å‘panicçš„ã€‚<code>panic</code>å‡½æ•°ä½¿ç¨‹åºå¼€å‘è€…å¯ä»¥åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æŠ¥å‘Šå¼‚å¸¸ã€‚</p><p>æ³¨æ„ï¼Œè¿™ä¸ä»å‡½æ•°è¿”å›é”™è¯¯å€¼çš„æ„ä¹‰æ˜¯å®Œå…¨ä¸åŒçš„ã€‚å½“æˆ‘ä»¬çš„å‡½æ•°è¿”å›ä¸€ä¸ªé<code>nil</code>çš„é”™è¯¯å€¼æ—¶ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹æœ‰æƒé€‰æ‹©ä¸å¤„ç†ï¼Œå¹¶ä¸”ä¸å¤„ç†çš„åæœå¾€å¾€æ˜¯ä¸è‡´å‘½çš„ã€‚</p><p>è¿™é‡Œçš„â€œä¸è‡´å‘½â€çš„æ„æ€æ˜¯ï¼Œä¸è‡³äºä½¿ç¨‹åºæ— æ³•æä¾›ä»»ä½•åŠŸèƒ½ï¼ˆä¹Ÿå¯ä»¥è¯´åƒµæ­»ï¼‰æˆ–è€…ç›´æ¥å´©æºƒå¹¶ç»ˆæ­¢è¿è¡Œï¼ˆä¹Ÿå°±æ˜¯çœŸæ­»ï¼‰ã€‚</p><p>ä½†æ˜¯ï¼Œå½“ä¸€ä¸ªpanicå‘ç”Ÿæ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¸æ–½åŠ ä»»ä½•ä¿æŠ¤æªæ–½ï¼Œé‚£ä¹ˆå¯¼è‡´çš„ç›´æ¥åæœå°±æ˜¯ç¨‹åºå´©æºƒï¼Œå°±åƒå‰é¢æè¿°çš„é‚£æ ·ï¼Œè¿™æ˜¾ç„¶æ˜¯è‡´å‘½çš„ã€‚</p><p>ä¸ºäº†æ›´æ¸…æ¥šåœ°å±•ç¤ºç­”æ¡ˆä¸­æè¿°çš„è¿‡ç¨‹ï¼Œæˆ‘ç¼–å†™äº†demo48.goæ–‡ä»¶ã€‚ä½ å¯ä»¥å…ˆæŸ¥çœ‹ä¸€ä¸‹å…¶ä¸­çš„ä»£ç ï¼Œå†è¯•ç€è¿è¡Œå®ƒï¼Œå¹¶ä½“ä¼šå®ƒæ‰“å°çš„å†…å®¹æ‰€ä»£è¡¨çš„å«ä¹‰ã€‚</p><p>æˆ‘åœ¨è¿™é‡Œå†æç¤ºä¸€ç‚¹ã€‚panicè¯¦æƒ…ä¼šåœ¨æ§åˆ¶æƒä¼ æ’­çš„è¿‡ç¨‹ä¸­ï¼Œè¢«é€æ¸åœ°ç§¯ç´¯å’Œå®Œå–„ï¼Œå¹¶ä¸”ï¼Œæ§åˆ¶æƒä¼šä¸€çº§ä¸€çº§åœ°æ²¿ç€è°ƒç”¨æ ˆçš„åæ–¹å‘ä¼ æ’­è‡³é¡¶ç«¯ã€‚</p><p>å› æ­¤ï¼Œåœ¨é’ˆå¯¹æŸä¸ªgoroutineçš„ä»£ç æ‰§è¡Œä¿¡æ¯ä¸­ï¼Œè°ƒç”¨æ ˆåº•ç«¯çš„ä¿¡æ¯ä¼šå…ˆå‡ºç°ï¼Œç„¶åæ˜¯ä¸Šä¸€çº§è°ƒç”¨çš„ä¿¡æ¯ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€åæ‰æ˜¯æ­¤è°ƒç”¨æ ˆé¡¶ç«¯çš„ä¿¡æ¯ã€‚</p><p>æ¯”å¦‚ï¼Œ<code>main</code>å‡½æ•°è°ƒç”¨äº†<code>caller1</code>å‡½æ•°ï¼Œè€Œ<code>caller1</code>å‡½æ•°åˆè°ƒç”¨äº†<code>caller2</code>å‡½æ•°ï¼Œé‚£ä¹ˆ<code>caller2</code>å‡½æ•°ä¸­ä»£ç çš„æ‰§è¡Œä¿¡æ¯ä¼šå…ˆå‡ºç°ï¼Œç„¶åæ˜¯<code>caller1</code>å‡½æ•°ä¸­ä»£ç çš„æ‰§è¡Œä¿¡æ¯ï¼Œæœ€åæ‰æ˜¯<code>main</code>å‡½æ•°çš„ä¿¡æ¯ã€‚</p><pre><code>goroutine 1 [running]:\nmain.caller2()\n /Users/haolin/GeekTime/Golang_Puzzlers/src/puzzlers/article19/q1/demo48.go:22 +0x91\nmain.caller1()\n /Users/haolin/GeekTime/Golang_Puzzlers/src/puzzlers/article19/q1/demo48.go:15 +0x66\nmain.main()\n /Users/haolin/GeekTime/Golang_Puzzlers/src/puzzlers/article19/q1/demo48.go:9 +0x66\nexit status 2\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/60/d7/606ff433a6b58510f215e57792822bd7.png?wh=887*1060\" alt=\"\"></p><p>ï¼ˆä»panicåˆ°ç¨‹åºå´©æºƒï¼‰</p><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ç›¸ä¿¡ä½ å·²ç»å¯¹panicè¢«å¼•å‘åçš„ç¨‹åºç»ˆæ­¢è¿‡ç¨‹æœ‰ä¸€å®šçš„äº†è§£äº†ã€‚æ·±å…¥åœ°äº†è§£æ­¤è¿‡ç¨‹ï¼Œä»¥åŠæ­£ç¡®åœ°è§£è¯»panicè¯¦æƒ…åº”è¯¥æ˜¯æˆ‘ä»¬çš„å¿…å¤‡æŠ€èƒ½ï¼Œè¿™åœ¨è°ƒè¯•Goç¨‹åºæˆ–è€…ä¸ºGoç¨‹åºæ’æŸ¥é”™è¯¯çš„æ—¶å€™éå¸¸é‡è¦ã€‚</p><h2>æ€»ç»“</h2><p>æœ€è¿‘çš„ä¸¤ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æ˜¯å›´ç»•ç€panicå‡½æ•°ã€recoverå‡½æ•°ä»¥åŠdeferè¯­å¥è¿›è¡Œçš„ã€‚ä»Šå¤©æˆ‘ä¸»è¦è®²äº†panicå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ˜¯ä¸“é—¨è¢«ç”¨æ¥å¼•å‘panicçš„ã€‚panicä¹Ÿå¯ä»¥è¢«ç§°ä¸ºè¿è¡Œæ—¶ææ…Œï¼Œå®ƒæ˜¯ä¸€ç§åªèƒ½åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æŠ›å‡ºçš„ç¨‹åºå¼‚å¸¸ã€‚</p><p>Goè¯­è¨€çš„è¿è¡Œæ—¶ç³»ç»Ÿå¯èƒ½ä¼šåœ¨ç¨‹åºå‡ºç°ä¸¥é‡é”™è¯¯æ—¶è‡ªåŠ¨åœ°æŠ›å‡ºpanicï¼Œæˆ‘ä»¬åœ¨éœ€è¦æ—¶ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨<code>panic</code>å‡½æ•°å¼•å‘panicã€‚ä½†ä¸è®ºæ€æ ·ï¼Œå¦‚æœä¸åŠ ä»¥å¤„ç†ï¼Œpanicå°±ä¼šå¯¼è‡´ç¨‹åºå´©æºƒå¹¶ç»ˆæ­¢è¿è¡Œã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä¸€ä¸ªå‡½æ•°æ€æ ·æ‰èƒ½æŠŠpanicè½¬åŒ–ä¸º<code>error</code>ç±»å‹å€¼ï¼Œå¹¶å°†å…¶ä½œä¸ºå‡½æ•°çš„ç»“æœå€¼è¿”å›ç»™è°ƒç”¨æ–¹ï¼Ÿ</p><p><a href=\"https://github.com/hyper0x/Golang_Puzzlers\">æˆ³æ­¤æŸ¥çœ‹Goè¯­è¨€ä¸“æ æ–‡ç« é…å¥—è¯¦ç»†ä»£ç ã€‚</a></p><p></p>","comments":[{"had_liked":false,"id":30781,"user_name":"æ±Ÿå±±å¦‚ç”»","can_delete":false,"product_type":"c1","uid":1188280,"ip_address":"","ucode":"BEB6228E6135B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/b8/aca814dd.jpg","comment_is_top":false,"comment_ctime":1538996370,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"156157819026","product_id":100013101,"comment_content":"ä¸€ä¸ªå‡½æ•°å¦‚æœè¦æŠŠ panic è½¬åŒ–ä¸ºerrorç±»å‹å€¼ï¼Œå¹¶å°†å…¶ç»“æœè¿”å›ç»™è°ƒç”¨æ–¹ï¼Œå¯ä»¥è€ƒè™‘æŠŠ defer è¯­å¥å°è£…åˆ°ä¸€ä¸ªåŒ¿åå‡½æ•°ä¹‹ä¸­ï¼Œä¸‹é¢æ˜¯å®éªŒçš„ä¸€ä¸ªä¾‹å­ï¼Œæ‰€ç”¨å‡½æ•°æ˜¯ä¸€ä¸ªé™¤æ³•å‡½æ•°ï¼Œå½“é™¤æ•°ä¸º0çš„æ—¶å€™ä¼šæŠ›å‡º panicå¹¶æ•è·ã€‚<br><br>func divide(a, b int) (res int, err error) {<br>\tfunc() {<br>\t\tdefer func() {<br>\t\t\tif rec := recover(); rec != nil {<br>\t\t\t\terr = fmt.Errorf(&quot;%s&quot;, rec)<br>\t\t\t}<br>\t\t}()<br>\t\tres = a &#47; b<br>\t}()<br>\treturn<br>}<br><br>func main() {<br>\tres, err := divide(1, 0)<br>\tfmt.Println(res, err) &#47;&#47; 0 runtime error: integer divide by zero<br><br>\tres, err = divide(2, 1)<br>\tfmt.Println(res, err) &#47;&#47; 2 &lt;nil&gt;<br>}<br>","like_count":37,"discussions":[{"author":{"id":2735072,"avatar":"https://static001.geekbang.org/account/avatar/00/29/bb/e0/c7cd5170.jpg","nickname":"Bynow","note":"","ucode":"1E4F3ADD65CF18","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576016,"discussion_content":"å…„å¼Ÿä½ é‡Œé¢é‚£ä¸ªå‡½æ•°åµŒå¥—æ²¡å¿…è¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655232350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1435733,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","nickname":"MClink","note":"","ucode":"F479190923355C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2735072,"avatar":"https://static001.geekbang.org/account/avatar/00/29/bb/e0/c7cd5170.jpg","nickname":"Bynow","note":"","ucode":"1E4F3ADD65CF18","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579157,"discussion_content":"ç¡®å®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657203884,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":576016,"ip_address":""},"score":579157,"extra":""}]}]},{"had_liked":false,"id":184973,"user_name":"é”‹","can_delete":false,"product_type":"c1","uid":1807836,"ip_address":"","ucode":"F26BC1F14AB0D7","user_header":"https://static001.geekbang.org/account/avatar/00/1b/95/dc/07195a63.jpg","comment_is_top":false,"comment_ctime":1583460559,"is_pvip":false,"replies":[{"id":"71507","content":"Goçš„é”™è¯¯å¤„ç†æœºåˆ¶æ˜¯ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆçš„ï¼Œpanicä»£è¡¨ç€ç‰¹æ®Šçš„ï¼ˆæˆ–è€…è¯´æ„å¤–çš„ï¼‰é”™è¯¯ï¼Œerrorä»£è¡¨ç€æ™®é€šçš„é”™è¯¯ã€‚ä¸try-catchä¸åŒï¼Œerrorå¹¶ä¸æ˜¯æ‰“æ–­æ­£å¸¸çš„æ§åˆ¶æµç¨‹çš„æ‰§è¡Œã€‚å•å•è¿™ä¸€ç‚¹æ¥è®²ï¼Œå°±å·²ç»æ˜¯éå¸¸å¥½çš„è¿›æ­¥äº†ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œpanicä¼šæ‰“æ–­æ­£å¸¸çš„æ§åˆ¶æµç¨‹ã€‚ä»è¿™ä¸€ç‚¹ä¸Šçœ‹ï¼Œpanicä¸try-catchå¾ˆåƒã€‚<br><br>è¯´åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¹Ÿæ„è¯†åˆ°äº†ï¼Œtry-catchæ˜¯ä¸€å¥—è¡Œä¸ºå•ä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œè€ŒGoè¯­è¨€çš„ï¼ˆerror+panicï¼‰æŠŠé”™è¯¯å¤„ç†æœºåˆ¶åœ¨ä»£ç çº§åˆ«åˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†ã€‚<br><br>è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œå€’é€¼å¼€å‘è€…å»æ€è€ƒï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥è¿”å›æ™®é€šçš„é”™è¯¯ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥æŠ›å‡ºæ„å¤–çš„é”™è¯¯ã€‚è¿™ç§æ€è€ƒåœ¨è®¾è®¡ä¸€ä¸ªç¨‹åºçš„é”™è¯¯ä½“ç³»çš„æ—¶å€™æ˜¯éå¸¸é‡è¦çš„ï¼Œå…³ç³»åˆ°ç¨‹åºè¿è¡Œçš„ç¨³å®šæ€§ã€‚<br><br>è‡³äºç¼ºç‚¹ï¼Œerrorå®¹æ˜“è¢«æ»¥ç”¨ï¼Œå¯¼è‡´ç¨‹åºä¸­åˆ°å¤„æ˜¯ if err != nil çš„ä»£ç ã€‚ä½†æ˜¯æˆ‘ä»¬è¦æ¸…æ¥šçš„æ˜¯ï¼Œè¿™å¾€å¾€æ˜¯ç¨‹åºè®¾è®¡ä¸Šçš„é—®é¢˜ï¼Œè€Œä¸æ˜¯è¯­è¨€å±‚é¢çš„é—®é¢˜ã€‚å¦‚æœä¸å½“å¿ƒï¼Œtry-catchç…§æ ·ä¼šè¢«å¼„çš„æ»¡å±éƒ½æ˜¯ã€‚è€Œä¸”try-catchè¿˜æœ‰ä¸€ä¸ªé¢—ç²’åº¦å’Œæ•°é‡çš„é—®é¢˜ï¼ˆä¸ä¸´ç•ŒåŒºçš„é¢—ç²’åº¦å’Œæ•°é‡é—®é¢˜ç±»ä¼¼ï¼‰ã€‚<br><br>æ€»ä¹‹ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºGoè¯­è¨€çš„é”™è¯¯å¤„ç†æœºåˆ¶æ˜¯ä¸€ç§åˆ›æ–°å’Œè¿›æ­¥ã€‚ä¸è¿‡ï¼Œç”±äºå®¹æ˜“è¢«æ»¥ç”¨ï¼ŒGoè¯­è¨€å›¢é˜Ÿä¸æ˜¯è¿˜åœ¨è¿‘å‡ å¹´ä¸€ç›´åœ¨è€ƒè™‘æ›´å¥½çš„è§£å†³æ–¹æ¡ˆå—ã€‚æˆ‘ä¹Ÿå¾ˆæœŸå¾…ä»–ä»¬æ–°çš„è®¾è®¡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1583477835,"ip_address":"","comment_id":184973,"utype":1}],"discussion_count":8,"race_medal":0,"score":"70302937295","product_id":100013101,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œè¯·æ•™ä¸€ä¸‹ï¼Œè°¢è°¢~<br>Goåœ¨è®¾è®¡çš„æ—¶å€™æ²¡æœ‰è®¾è®¡try...catch...finallyè¿™æ ·çš„æ–¹å¼æ¥æ•è·å¼‚å¸¸ã€‚<br>æˆ‘åœ¨ç½‘ä¸ŠæŸ¥å¾ˆå¤šäººç”¨panicã€deferå’Œrecoverç»„åˆæ¥å®ç°å¼‚å¸¸çš„æ•è·ï¼Œç”šè‡³å¾ˆå¤šéƒ½å°†è¿™ä¸ªäºŒæ¬¡å°è£…ä¹‹åä½œä¸ºä¸€ä¸ªåº“æ¥è¿›è¡Œä½¿ç”¨ã€‚<br>æˆ‘çš„ç–‘é—®æ˜¯ï¼Œä»Goçš„è®¾è®¡è§’åº¦ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿæ˜¯å‡ºäºä»€ä¹ˆæ ·çš„ç›®çš„ï¼Œè¿˜æ˜¯ä»–ä¿©ä¹‹é—´æœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Ÿ<br>éå¸¸æ„Ÿè°¢~ï¼Œçƒ¦è¯·è§£ç­”ã€‚","like_count":17,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486198,"discussion_content":"Goçš„é”™è¯¯å¤„ç†æœºåˆ¶æ˜¯ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆçš„ï¼Œpanicä»£è¡¨ç€ç‰¹æ®Šçš„ï¼ˆæˆ–è€…è¯´æ„å¤–çš„ï¼‰é”™è¯¯ï¼Œerrorä»£è¡¨ç€æ™®é€šçš„é”™è¯¯ã€‚ä¸try-catchä¸åŒï¼Œerrorå¹¶ä¸æ˜¯æ‰“æ–­æ­£å¸¸çš„æ§åˆ¶æµç¨‹çš„æ‰§è¡Œã€‚å•å•è¿™ä¸€ç‚¹æ¥è®²ï¼Œå°±å·²ç»æ˜¯éå¸¸å¥½çš„è¿›æ­¥äº†ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œpanicä¼šæ‰“æ–­æ­£å¸¸çš„æ§åˆ¶æµç¨‹ã€‚ä»è¿™ä¸€ç‚¹ä¸Šçœ‹ï¼Œpanicä¸try-catchå¾ˆåƒã€‚\n\nè¯´åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¹Ÿæ„è¯†åˆ°äº†ï¼Œtry-catchæ˜¯ä¸€å¥—è¡Œä¸ºå•ä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œè€ŒGoè¯­è¨€çš„ï¼ˆerror+panicï¼‰æŠŠé”™è¯¯å¤„ç†æœºåˆ¶åœ¨ä»£ç çº§åˆ«åˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†ã€‚\n\nè¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œå€’é€¼å¼€å‘è€…å»æ€è€ƒï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥è¿”å›æ™®é€šçš„é”™è¯¯ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥æŠ›å‡ºæ„å¤–çš„é”™è¯¯ã€‚è¿™ç§æ€è€ƒåœ¨è®¾è®¡ä¸€ä¸ªç¨‹åºçš„é”™è¯¯ä½“ç³»çš„æ—¶å€™æ˜¯éå¸¸é‡è¦çš„ï¼Œå…³ç³»åˆ°ç¨‹åºè¿è¡Œçš„ç¨³å®šæ€§ã€‚\n\nè‡³äºç¼ºç‚¹ï¼Œerrorå®¹æ˜“è¢«æ»¥ç”¨ï¼Œå¯¼è‡´ç¨‹åºä¸­åˆ°å¤„æ˜¯ if err != nil çš„ä»£ç ã€‚ä½†æ˜¯æˆ‘ä»¬è¦æ¸…æ¥šçš„æ˜¯ï¼Œè¿™å¾€å¾€æ˜¯ç¨‹åºè®¾è®¡ä¸Šçš„é—®é¢˜ï¼Œè€Œä¸æ˜¯è¯­è¨€å±‚é¢çš„é—®é¢˜ã€‚å¦‚æœä¸å½“å¿ƒï¼Œtry-catchç…§æ ·ä¼šè¢«å¼„çš„æ»¡å±éƒ½æ˜¯ã€‚è€Œä¸”try-catchè¿˜æœ‰ä¸€ä¸ªé¢—ç²’åº¦å’Œæ•°é‡çš„é—®é¢˜ï¼ˆä¸ä¸´ç•ŒåŒºçš„é¢—ç²’åº¦å’Œæ•°é‡é—®é¢˜ç±»ä¼¼ï¼‰ã€‚\n\næ€»ä¹‹ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºGoè¯­è¨€çš„é”™è¯¯å¤„ç†æœºåˆ¶æ˜¯ä¸€ç§åˆ›æ–°å’Œè¿›æ­¥ã€‚ä¸è¿‡ï¼Œç”±äºå®¹æ˜“è¢«æ»¥ç”¨ï¼ŒGoè¯­è¨€å›¢é˜Ÿä¸æ˜¯è¿˜åœ¨è¿‘å‡ å¹´ä¸€ç›´åœ¨è€ƒè™‘æ›´å¥½çš„è§£å†³æ–¹æ¡ˆå—ã€‚æˆ‘ä¹Ÿå¾ˆæœŸå¾…ä»–ä»¬æ–°çš„è®¾è®¡ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1583477835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1174199,"avatar":"https://static001.geekbang.org/account/avatar/00/11/ea/b7/1a18a39d.jpg","nickname":"5-åˆ˜æ–°æ³¢(Arvin)","note":"","ucode":"DBD135D2587A93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394780,"discussion_content":"panicç›¸å½“äºjavaä¸­çš„[è¿è¡Œæ—¶]å¼‚å¸¸ï¼Œå¤„ç†ä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼Œerrorç›¸å½“äº[æ£€æŸ¥]å¼‚å¸¸ï¼Œä½†ä¸å¼ºåˆ¶å¤„ç†ï¼Œä¸»è¦ç”¨äºå¯é¢„æµ‹å’Œå›é¿çš„é”™è¯¯","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1632050488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047637,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYWRmibTZj9pb3d5ibfVQHFS9shvJmgMgtN3BM3r9qiaL5YTZSFdLvPZiaEHfBia4dFODVqw/132","nickname":"åŒ—å›½éª‘å£«","note":"","ucode":"AC657FCA2014ED","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376307,"discussion_content":"è®¾è®¡åƒåœ¾å°±æ˜¯åƒåœ¾ï¼Œè¿˜è¯´è¿™ä¹ˆå¤šç†ç”±ï¼Œæ—¢ç„¶å¾ˆå¥½ï¼Œä¸ºå•¥åˆè¦æ”¹ï¼Ÿå¦‚æœå†™ç¨‹åºæ—¶ä¸èƒ½ä¸“æ³¨ä¸šåŠ¡æœ¬èº«ï¼ŒæŠŠå¤§é‡çš„æ—¶é—´ç”¨æ¥æ€è€ƒå¦‚ä½•è®¾è®¡errorå¤„ç†ä¸Šï¼Œè¿™ç§ç¼–ç¨‹è¯­è¨€å’ŒçŸ³å™¨æ—¶ä»£çš„è¯­è¨€å¥½å¤šå°‘å•Šï¼Ÿæ—¢ç„¶å®¹æ˜“æ»¥ç”¨ï¼Œä¸ºå•¥ä¸è€ƒè™‘æ˜¯è¯­è¨€æœ¬èº«çš„é—®é¢˜å¯¼è‡´çš„æ»¥ç”¨ï¼Ÿcè¯­è¨€æ›´ç‰›é€¼ï¼Œæ›´è€ƒéªŒæ°´å¹³ï¼Œä¸ºå•¥å†™ä¸šåŠ¡ä¸ç”¨cï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622077942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1047637,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYWRmibTZj9pb3d5ibfVQHFS9shvJmgMgtN3BM3r9qiaL5YTZSFdLvPZiaEHfBia4dFODVqw/132","nickname":"åŒ—å›½éª‘å£«","note":"","ucode":"AC657FCA2014ED","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":401562,"discussion_content":"å“¥ï¼Œ try cache å¥½åœ¨å“ª? ç”¨ç€æ¶å¿ƒæ­»äº†ï¼Œ è®©ä½ æ›´ä¸“æ³¨äºä¸šåŠ¡äº†ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1633692395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":376307,"ip_address":""},"score":401562,"extra":""}]},{"author":{"id":1000237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/43/2d/af86d73f.jpg","nickname":"enjoylearning","note":"","ucode":"DCAF8538DEA277","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590410,"discussion_content":"æ„Ÿè§‰æ˜¯ä¸šåŠ¡ç±»å‹çš„é”™è¯¯ç”¨error,ä¸å¯é¢„çŸ¥çš„ç³»ç»Ÿé”™è¯¯ç”¨panic","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665723906,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401563,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633692430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1208981,"avatar":"https://static001.geekbang.org/account/avatar/00/12/72/95/5f83598c.jpg","nickname":"Hello World","note":"","ucode":"368D87D53DC58F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":362468,"discussion_content":"golang errorç›¸å½“äºCä¸­çš„é”™è¯¯ç å¤„ç†ï¼Œæ­£å¸¸çš„å‡ºé”™å¤„ç†ä¸ä¼šéšä¾¿å¯¼è‡´è¿›ç¨‹é€€å‡ºï¼Œä¿è¯å¯ç”¨æ€§ã€‚è€Œpanicå°±ç›¸å½“äºbug onï¼Œèµ°åˆ°äº†ä¸ç¬¦åˆé¢„æœŸçš„ä¸å¯æ¢å¤é”™è¯¯ï¼Œè¿›ç¨‹ä¼šcoreæ‰ï¼Œå¿…é¡»ä¿®æ”¹ä»£ç ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616945286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1807836,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/95/dc/07195a63.jpg","nickname":"é”‹","note":"","ucode":"F26BC1F14AB0D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198140,"discussion_content":"è°¢è°¢è€å¸ˆçš„è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583480397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":28385,"user_name":"Bang","can_delete":false,"product_type":"c1","uid":1160079,"ip_address":"","ucode":"0CB8A52B177868","user_header":"https://static001.geekbang.org/account/avatar/00/11/b3/8f/4caf7f03.jpg","comment_is_top":false,"comment_ctime":1538064932,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"53077672484","product_id":100013101,"comment_content":"å…ˆä½¿ç”¨goä¸­çš„ç±»ä¼¼try catchè¿™æ ·çš„è¯­å¥ï¼Œå°†å¼‚å¸¸æ•è·çš„å¼‚å¸¸è½¬ä¸ºç›¸åº”çš„é”™è¯¯errorå°±å¯ä»¥äº†","like_count":12},{"had_liked":false,"id":28421,"user_name":"å”ä¸¹","can_delete":false,"product_type":"c1","uid":1204418,"ip_address":"","ucode":"B45D936E6C4744","user_header":"https://static001.geekbang.org/account/avatar/00/12/60/c2/6d50bfdf.jpg","comment_is_top":false,"comment_ctime":1538092512,"is_pvip":false,"replies":[{"id":"10647","content":"åªè¦åœ¨è°ƒç”¨æ ˆè·¯å¾„ä¸Šå°±éƒ½å¯ä»¥å¤„ç†ï¼Œå¦‚æœä½ ç”¨äº†deferè¯­å¥å’Œrecoverå‡½æ•°ç­‰æ­£ç¡®å¤„ç†æ–¹å¼è¿˜æ˜¯ä¸è¡Œçš„è¯ï¼Œå°±è¦çœ‹çœ‹è¿™ä¸ªpanicæ˜¯ä¸æ˜¯ä¸äº†æ¢å¤çš„ã€‚ä¸€äº›runtimeæŠ›å‡ºæ¥çš„panicæ˜¯ä¸å¯æ¢å¤çš„ï¼Œå› ä¸ºé—®é¢˜å¾ˆä¸¥é‡å¿…é¡»æ•´æ”¹ä»£ç æ‰è¡Œã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1538452603,"ip_address":"","comment_id":28421,"utype":1}],"discussion_count":5,"race_medal":0,"score":"48782732768","product_id":100013101,"comment_content":"éƒå¤§ï¼Œä½ å¥½ï¼Œæˆ‘åœ¨golang 8ä¸­é€šè¿‡recoverå¤„ç†panicæ—¶å‘ç°ï¼Œå¿…é¡»åœ¨å¼•å‘panicçš„å½“å‰åç¨‹å°±å¤„ç†æ‰ï¼Œå¦åˆ™å¾…å…¶ä¼ é€’åˆ°çˆ¶åç¨‹ç›´è‡³mainæ–¹æ³•ä¸­ï¼Œéƒ½ä¸èƒ½é€šè¿‡recoveræˆåŠŸå¤„ç†æ‰äº†ï¼Œç¨‹åºä¼šå› æ­¤ç»“æŸã€‚è¯·é—®è¿™æ ·è®¾è®¡çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿé‚£ä¹ˆåç¨‹æ˜¯é€šè¿‡panicä¸­è®°å½•çš„åç¨‹idæ¥åŒºåˆ†æ˜¯ä¸æ˜¯åœ¨å½“å‰åç¨‹å¼•å‘çš„panicçš„å—ï¼Ÿå¦å¤–ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬åº”ç”¨ç¨‹åºä¸­æ¯ä¸€ä¸ªé€šè¿‡goæ–°èµ·çš„åç¨‹éƒ½åº”è¯¥åœ¨å¼€å§‹çš„åœ°æ–¹recoverï¼Œå¦åˆ™å³ä½¿çˆ¶åç¨‹æœ‰recoverä¹Ÿä¸èƒ½é˜»æ­¢ç¨‹åºå› ä¸ºä¸€ä¸ªæ„å¤–çš„panicè€ŒæŒ‚æ‰ï¼Ÿç›¼æœ›è§£ç­”ï¼Œè°¢è°¢ğŸ™","like_count":11,"discussions":[{"author":{"id":1112676,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/64/457325e6.jpg","nickname":"Sam Fu","note":"","ucode":"EA285A4943271F","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541708,"discussion_content":"defer å…³é”®å­—å¯¹åº”çš„ runtime.deferproc ä¼šå°†å»¶è¿Ÿè°ƒç”¨å‡½æ•°ä¸è°ƒç”¨æ–¹æ‰€åœ¨ Goroutine è¿›è¡Œå…³è”ã€‚æ‰€ä»¥å½“ç¨‹åºå‘ç”Ÿå´©æºƒæ—¶åªä¼šè°ƒç”¨å½“å‰ Goroutine çš„å»¶è¿Ÿè°ƒç”¨å‡½æ•°ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640524681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1112676,"avatar":"https://static001.geekbang.org/account/avatar/00/10/fa/64/457325e6.jpg","nickname":"Sam Fu","note":"","ucode":"EA285A4943271F","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541707,"discussion_content":"æ„Ÿè§‰ç­”éæ‰€é—®å•Š ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640524542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":425260,"discussion_content":"åªè¦åœ¨è°ƒç”¨æ ˆè·¯å¾„ä¸Šå°±éƒ½å¯ä»¥å¤„ç†ï¼Œå¦‚æœä½ ç”¨äº†deferè¯­å¥å’Œrecoverå‡½æ•°ç­‰æ­£ç¡®å¤„ç†æ–¹å¼è¿˜æ˜¯ä¸è¡Œçš„è¯ï¼Œå°±è¦çœ‹çœ‹è¿™ä¸ªpanicæ˜¯ä¸æ˜¯ä¸äº†æ¢å¤çš„ã€‚ä¸€äº›runtimeæŠ›å‡ºæ¥çš„panicæ˜¯ä¸å¯æ¢å¤çš„ï¼Œå› ä¸ºé—®é¢˜å¾ˆä¸¥é‡å¿…é¡»æ•´æ”¹ä»£ç æ‰è¡Œã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1538452603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401560,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633692161,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1242292,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f4/b4/da161b60.jpg","nickname":"Tracy","note":"","ucode":"5DA6F44D096B7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344296,"discussion_content":"panicä¸ä¼šä¼ æ’­åˆ°ä¸»groutine","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611394523,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219676,"user_name":"æ²å¤œæ˜Ÿå…‰","can_delete":false,"product_type":"c1","uid":1447220,"ip_address":"","ucode":"22F699E237B179","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLia2EwyyEVs3tWRnMlqaAG7R7HvlW4vGvxthKsicgsCEeXO1qL7mMy6GAzgdkSKcH3c70Qa2hY3JLw/132","comment_is_top":false,"comment_ctime":1590061911,"is_pvip":false,"replies":[{"id":"81169","content":"è¿™ä¼šç»è¿‡mainå‡½æ•°ï¼Œå¼‚æ­¥è°ƒç”¨ä¹Ÿæ˜¯è°ƒç”¨ã€‚mainå‡½æ•°å°±æ˜¯ä¸»goroutineçš„goå‡½æ•°ã€‚<br><br>goå›æ”¶è¿›ç¨‹ï¼Ÿè¿™æ²¡ä»€ä¹ˆç¨€å¥‡çš„å•Šï¼Œå°±æ˜¯è°ƒç”¨æ“ä½œç³»ç»Ÿçš„åº•å±‚APIï¼Œä½ å¯ä»¥æŸ¥çœ‹ runtime.main å‡½æ•°äº†è§£ç›¸å…³è¿‡ç¨‹ï¼Œæˆ–è€…æŸ¥çœ‹ runtime.exit å‡½æ•°äº†è§£è¿›ç¨‹é€€å‡ºæ—¶è°ƒç”¨çš„APIã€‚<br><br>åœ¨ä¸€ä¸ªgoroutineä¸­çš„goå‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œè¿™ä¸ªgoroutineä¼šè½¬ä¸º_GidleçŠ¶æ€ï¼Œå…¶ä¸­çš„æ‰€æœ‰å…³é”®å­—æ®µéƒ½ä¼šè¢«é‡ç½®ï¼Œå®ƒçš„æ ˆå†…å­˜ä¹Ÿä¼šè¢«é‡Šæ”¾ã€‚æœ€åï¼Œå®ƒä¼šè¢«æ”¾å…¥è‡ªç”±Gåˆ—è¡¨ã€‚ä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹ runtime.goexit0 äº†è§£åˆ°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1590118225,"ip_address":"","comment_id":219676,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18769931095","product_id":100013101,"comment_content":"â€œæ§åˆ¶æƒå¦‚æ­¤ä¸€çº§ä¸€çº§åœ°æ²¿ç€è°ƒç”¨æ ˆçš„åæ–¹å‘ä¼ æ’­è‡³é¡¶ç«¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç¼–å†™çš„æœ€å¤–å±‚å‡½æ•°é‚£é‡Œâ€ã€‚æœ€å¤–å±‚å‡½æ•°æ˜¯goå‡½æ•°ï¼Œä¹Ÿå°±è¯´å½“panicè§¦å‘ï¼Œé€šè¿‡å…¶æ‰€åœ¨çš„goroutineï¼Œå°†æ§åˆ¶æƒè½¬ç§»ç»™è¿è¡Œæ—¶ç³»ç»Ÿæ—¶ï¼Œæ˜¯ä¸ä¸€å®šç»è¿‡mainå‡½æ•°çš„å—ï¼Ÿå¦å¤–è€å¸ˆèƒ½ä¸èƒ½è®²è®²ï¼Œgoæ˜¯æ€ä¹ˆå›æ”¶ä¸€ä¸ªè¿›ç¨‹çš„ï¼Œæ€ä¹ˆå¤„ç†è¿è¡Œä¸­çš„goroutineä»¥åŠæ¶‰åŠçš„èµ„æºã€‚","like_count":4,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495899,"discussion_content":"è¿™ä¼šç»è¿‡mainå‡½æ•°ï¼Œå¼‚æ­¥è°ƒç”¨ä¹Ÿæ˜¯è°ƒç”¨ã€‚mainå‡½æ•°å°±æ˜¯ä¸»goroutineçš„goå‡½æ•°ã€‚\n\ngoå›æ”¶è¿›ç¨‹ï¼Ÿè¿™æ²¡ä»€ä¹ˆç¨€å¥‡çš„å•Šï¼Œå°±æ˜¯è°ƒç”¨æ“ä½œç³»ç»Ÿçš„åº•å±‚APIï¼Œä½ å¯ä»¥æŸ¥çœ‹ runtime.main å‡½æ•°äº†è§£ç›¸å…³è¿‡ç¨‹ï¼Œæˆ–è€…æŸ¥çœ‹ runtime.exit å‡½æ•°äº†è§£è¿›ç¨‹é€€å‡ºæ—¶è°ƒç”¨çš„APIã€‚\n\nåœ¨ä¸€ä¸ªgoroutineä¸­çš„goå‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œè¿™ä¸ªgoroutineä¼šè½¬ä¸º_GidleçŠ¶æ€ï¼Œå…¶ä¸­çš„æ‰€æœ‰å…³é”®å­—æ®µéƒ½ä¼šè¢«é‡ç½®ï¼Œå®ƒçš„æ ˆå†…å­˜ä¹Ÿä¼šè¢«é‡Šæ”¾ã€‚æœ€åï¼Œå®ƒä¼šè¢«æ”¾å…¥è‡ªç”±Gåˆ—è¡¨ã€‚ä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹ runtime.goexit0 äº†è§£åˆ°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590118225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401564,"discussion_content":"Markï¼Œ è€å¸ˆå¼º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633692494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":29552,"user_name":"å†°æ¿€å‡Œçš„çœ¼æ³ª","can_delete":false,"product_type":"c1","uid":1087945,"ip_address":"","ucode":"5DCB974667E93A","user_header":"https://static001.geekbang.org/account/avatar/00/10/99/c9/a7c77746.jpg","comment_is_top":false,"comment_ctime":1538437329,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14423339217","product_id":100013101,"comment_content":"panicæ—¶ï¼Œä¼šæ•è·å¼‚å¸¸åŠå¼‚å¸¸ä¸Šä¸‹æ–‡ï¼ˆå‡½æ•°å+æ–‡ä»¶è¡Œï¼‰<br>ç±»ä¼¼çœ‹ä½œæœ‰ä¸€ä¸ªå¼‚å¸¸ä¸Šä¸‹æ–‡åˆ—è¡¨ï¼Œå§‹äºå¼‚å¸¸è§¦å‘å¤„ï¼Œæ²¿ç€å‡½æ•°è°ƒç”¨é€†å‘å±•å¼€ï¼Œæ¯ä¸€çº§appendè‡ªå·±çš„å¼‚å¸¸ä¸Šä¸‹æ–‡ï¼Œç›´è‡³goroutineå…¥å£å‡½æ•°ï¼Œæœ€ç»ˆè¢«runtimeæ•è·<br>æœ€ç»ˆå¼‚å¸¸ä¿¡æ¯è¢«æ‰“å°ï¼Œå¼‚å¸¸ä¸Šä¸‹æ–‡åˆ—è¡¨è¢«é¡ºåºæ‰“å°ï¼Œç¨‹åºé€€å‡º","like_count":3},{"had_liked":false,"id":72327,"user_name":"ğŸ»","can_delete":false,"product_type":"c1","uid":1043072,"ip_address":"","ucode":"534EDAD496A0E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ea/80/8759e4c1.jpg","comment_is_top":false,"comment_ctime":1551587661,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10141522253","product_id":100013101,"comment_content":"https:&#47;&#47;gist.github.com&#47;bwangelme&#47;9ce1c606ba9f69c72f82722adf1402e1","like_count":2},{"had_liked":false,"id":34993,"user_name":"A å‡¡","can_delete":false,"product_type":"c1","uid":1197361,"ip_address":"","ucode":"BDC8DB599B8284","user_header":"https://static001.geekbang.org/account/avatar/00/12/45/31/53910b61.jpg","comment_is_top":false,"comment_ctime":1540377077,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10130311669","product_id":100013101,"comment_content":"ä¹‹å‰è‡ªå·±å­¦ä¹ æ—¶å€™çš„ä¸€äº›æ¨¡ç³Šç‚¹æ›´åŠ æ¸…æ™°äº†ï¼Œæ”¯æŒï¼","like_count":2},{"had_liked":false,"id":285231,"user_name":"MClink","can_delete":false,"product_type":"c1","uid":1435733,"ip_address":"","ucode":"F479190923355C","user_header":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","comment_is_top":false,"comment_ctime":1616678355,"is_pvip":true,"replies":[{"id":"103551","content":"æ¯ç§è¯­è¨€çš„é£æ ¼éƒ½ä¸åŒå•Šï¼Œä¹ æƒ¯ä¹ æƒ¯å°±å¥½äº†ï¼ˆæ³¨æ„åŠ›å¯ä»¥æ›´å¤šçš„æ”¾åœ¨â€œæ€æ ·é«˜æ•ˆæ„å»ºä¼˜ç§€è½¯ä»¶ä¸Šâ€ ï¼Œè¯­æ³•çš„ä¸€äº›ç‰¹ç‚¹ä¸å±äºå…³é”®é—®é¢˜ :-) ï¼‰ï¼Œè€Œä¸”åç»­Goåœ¨è¿™æ–¹é¢ä¼šæœ‰æ”¹å–„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1616737048,"ip_address":"","comment_id":285231,"utype":1}],"discussion_count":4,"race_medal":0,"score":"5911645651","product_id":100013101,"comment_content":"åˆå­¦goéƒ½ä¼šåæ§½è¯´æ²¡æœ‰ try catch , åº”è¯¥ä¸æ­¢æˆ‘ä¸€ä¸ª","like_count":1,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":517623,"discussion_content":"æ¯ç§è¯­è¨€çš„é£æ ¼éƒ½ä¸åŒå•Šï¼Œä¹ æƒ¯ä¹ æƒ¯å°±å¥½äº†ï¼ˆæ³¨æ„åŠ›å¯ä»¥æ›´å¤šçš„æ”¾åœ¨â€œæ€æ ·é«˜æ•ˆæ„å»ºä¼˜ç§€è½¯ä»¶ä¸Šâ€ ï¼Œè¯­æ³•çš„ä¸€äº›ç‰¹ç‚¹ä¸å±äºå…³é”®é—®é¢˜ :-) ï¼‰ï¼Œè€Œä¸”åç»­Goåœ¨è¿™æ–¹é¢ä¼šæœ‰æ”¹å–„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616737048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1000237,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/43/2d/af86d73f.jpg","nickname":"enjoylearning","note":"","ucode":"DCAF8538DEA277","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590411,"discussion_content":"ä¸æ˜¯æ»¡å±çš„try-catchè€Œæ˜¯errorï¼Œè¿™ç¡®å®æ˜¯äººçš„é—®é¢˜ï¼Œè·Ÿè¯­è¨€è®¾è®¡æ²¡å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665724131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047637,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYWRmibTZj9pb3d5ibfVQHFS9shvJmgMgtN3BM3r9qiaL5YTZSFdLvPZiaEHfBia4dFODVqw/132","nickname":"åŒ—å›½éª‘å£«","note":"","ucode":"AC657FCA2014ED","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376310,"discussion_content":"ä½ è¯­æ³•éƒ½è¿™ä¹ˆåƒåœ¾ï¼Œæˆ‘æ€ä¹ˆä¸“æ³¨åœ¨æ„å»ºä¼˜ç§€è½¯ä»¶ä¸Šï¼Œæ—¶é—´éƒ½æµªè´¹åœ¨åƒåœ¾è¯­æ³•ä¸Šäº†ï¼Œè¿ä¸ªä¸‰ç›®è¿ç®—ç¬¦éƒ½ä¸æ”¯æŒ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622078186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1047637,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcwXucibksEYWRmibTZj9pb3d5ibfVQHFS9shvJmgMgtN3BM3r9qiaL5YTZSFdLvPZiaEHfBia4dFODVqw/132","nickname":"åŒ—å›½éª‘å£«","note":"","ucode":"AC657FCA2014ED","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376308,"discussion_content":"ä½ è¿™ä¸ªè€Œä¸”å·²ç»è¯æ˜äº†ï¼Œè¿˜ç‹¡è¾©å•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622078110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":350800,"user_name":"MClink","can_delete":false,"product_type":"c1","uid":1435733,"ip_address":"","ucode":"F479190923355C","user_header":"https://static001.geekbang.org/account/avatar/00/15/e8/55/92f82281.jpg","comment_is_top":false,"comment_ctime":1657204457,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1657204457","product_id":100013101,"comment_content":"è¿™ä¸ªçœ‹èµ·æ¥æ¯”è¾ƒç®€å•<br>func main() {<br>\tres, err := divide(1, 0)<br>\tif err != nil {<br>\t\tfmt.Println(err)<br>\t}<br>\tfmt.Println(res)<br>}<br><br>func divide(a, b int) (res int, err error) {<br>\tdefer func() {<br>\t\tif r := recover(); r != nil {<br>\t\t\terr = fmt.Errorf(&quot;omg, panic ! err:%v&quot;, r)<br>\t\t\treturn<br>\t\t}<br>\t}()<br>\tres = a &#47; b<br>\treturn<br>}","like_count":0},{"had_liked":false,"id":306834,"user_name":"Harlan","can_delete":false,"product_type":"c1","uid":2134882,"ip_address":"","ucode":"F43595A0A00B19","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erpYZalYvFGcBs7zZvYwaQAZwTLiaw0mycJ4PdYpP3VxAYkAtyIRHhjSOrOK0yESaPpgEbVQUwf6LA/132","comment_is_top":false,"comment_ctime":1628739470,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628739470","product_id":100013101,"comment_content":"goè¿™ç§æ»¡å±å¹•éƒ½æ˜¯ åˆ¤æ–­ err!=nil è¿™ç§æ²¡æœ‰æ„ä¹‰çš„ä»£ç   ä»£ç ä¾µå…¥æ€§æå¼º  ä¹Ÿä¸ä¼˜é›…","like_count":0},{"had_liked":false,"id":267941,"user_name":"Geek_37a441","can_delete":false,"product_type":"c1","uid":2369701,"ip_address":"","ucode":"72A2EEBA0C1DBC","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PeibZXsEcwic1zvrAQpDlnNlPxZvmAtIZ6XCenC8NaPbVVfCk7PXgAYzb8icqrYlb9cJd82hia9FYTicxqSdgyCEP4w/132","comment_is_top":false,"comment_ctime":1608000921,"is_pvip":false,"replies":[{"id":"97316","content":"å½“ç„¶ä¸æ˜¯äº†ï¼Œæ˜¯æ‰§è¡Œç¨‹åºçš„ç¨‹åºç¢°åˆ°ä¸¥é‡é”™è¯¯å°±æŠ›å‡ºæ¥ï¼Œå±äºGoè¿è¡Œæ—¶ç³»ç»Ÿçš„èŒè´£èŒƒå›´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"éƒæ—","uid":"1026643","ctime":1608031203,"ip_address":"","comment_id":267941,"utype":1}],"discussion_count":4,"race_medal":0,"score":"1608000921","product_id":100013101,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œpanicè§¦å‘çš„æ—¶æœºï¼Œæ¯”å¦‚æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œåœ¨ä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨åˆ°ç›¸å…³çš„panicï¼Œæ¯”å¦‚æ•°ç»„è¶Šç•Œæ˜¯ä»€ä¹ˆæ—¶å€™è°ƒç”¨runtime.panicIndexï¼Œæ˜¯æœ‰ä¸ªé¢å¤–çš„çº¿ç¨‹ä¸æ–­æ£€æµ‹æœ‰å¼‚å¸¸äº†å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1026643,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/aa/53/768aec0a.jpg","nickname":"éƒæ—","note":"","ucode":"F66BA62BA56FFA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511798,"discussion_content":"å½“ç„¶ä¸æ˜¯äº†ï¼Œæ˜¯æ‰§è¡Œç¨‹åºçš„ç¨‹åºç¢°åˆ°ä¸¥é‡é”™è¯¯å°±æŠ›å‡ºæ¥ï¼Œå±äºGoè¿è¡Œæ—¶ç³»ç»Ÿçš„èŒè´£èŒƒå›´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608031203,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2925541,"avatar":"","nickname":"Geek_f0ae52","note":"","ucode":"C0CF6A54280522","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558203,"discussion_content":"è¿™ä¸ªåº”è¯¥æ˜¯åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œä½†å‡¡æ°¸å¥¥æ•°ç»„å–å€¼çš„åœ°æ–¹ï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥æ’å…¥ä¸€æ¡æ£€æµ‹è§’æ ‡æ˜¯å¦è¶Šç•Œçš„ä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648132740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2369701,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PeibZXsEcwic1zvrAQpDlnNlPxZvmAtIZ6XCenC8NaPbVVfCk7PXgAYzb8icqrYlb9cJd82hia9FYTicxqSdgyCEP4w/132","nickname":"Geek_37a441","note":"","ucode":"72A2EEBA0C1DBC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335280,"discussion_content":"æ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹æ²¡å¤ªæ˜ç™½ï¼ŒGoè¿è¡Œæ—¶å€™ç³»ç»Ÿæ€ä¹ˆçŸ¥é“è¯¥è·³è½¬åˆ°panicå‘¢ï¼Ÿï¼Œå°±æ¯”å¦‚è®¿é—®ä¸€ä¸ªç©ºæŒ‡é’ˆçš„æˆå‘˜ï¼Œå¯¹åº”æŒ‡ä»¤å¯èƒ½å°±æ˜¯å–è¿™ä¸ªç©ºæŒ‡é’ˆçš„å†…å®¹ï¼Œå–å‡ºæ¥å‘ç°æ˜¯nilï¼Œcpuæ€ä¹ˆçŸ¥é“è¯¥è·³è½¬åˆ°call  panicäº†å‘¢ ï¼Œå‡å¦‚æ˜¯ç¼–è¯‘å™¨ç¼–è¯‘æ—¶å€™æ£€æµ‹åˆ°å¯èƒ½è®¿é—®äº†æŸä¸ªç©ºæŒ‡é’ˆçš„æˆå‘˜ï¼Œé¢„å…ˆæŠŠæŒ‡ä»¤è·³è½¬åˆ°è¿™ä¸ªæŒ‡ä»¤ call  runtime.panicçš„é€»è¾‘ç¼–è¯‘åˆ°å¯æ‰§è¡Œç¨‹åºçš„æŒ‡ä»¤é›†ä¸­ã€‚  ä½†å‡å¦‚ç¼–è¯‘æ—¶å€™å°±èƒ½å‘ç°å¯èƒ½å‘ç”Ÿpanicï¼Œä¸ºå•¥è¿˜è¦æ”¾åˆ°è¿è¡Œæ—¶æŠ›å‡ºå‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608134145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1135528,"avatar":"https://static001.geekbang.org/account/avatar/00/11/53/a8/abc96f70.jpg","nickname":"return","note":"","ucode":"42B8A3380DF04B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2369701,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/PeibZXsEcwic1zvrAQpDlnNlPxZvmAtIZ6XCenC8NaPbVVfCk7PXgAYzb8icqrYlb9cJd82hia9FYTicxqSdgyCEP4w/132","nickname":"Geek_37a441","note":"","ucode":"72A2EEBA0C1DBC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":401565,"discussion_content":"å¥½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633692603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":335280,"ip_address":""},"score":401565,"extra":""}]}]},{"had_liked":false,"id":195107,"user_name":"ä¼ è¯´ä¸­çš„æˆå¤§å¤§","can_delete":false,"product_type":"c1","uid":1236766,"ip_address":"","ucode":"103543D6E706BF","user_header":"https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg","comment_is_top":false,"comment_ctime":1585137064,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585137064","product_id":100013101,"comment_content":"ä»Šæ—¥æ€»ç»“<br>ä»Šå¤©ä¸»è¦æ˜¯è®²äº†panicè¿è¡Œæ—¶ææ…Œï¼Œä¸€èˆ¬å‘ç”Ÿåœ¨è¿è¡Œæ—¶<br>åŒæ ·ä¹Ÿå¯ä»¥è‡ªå·±è°ƒç”¨å†…ç½®çš„panicæ¥ä¸»åŠ¨å¼•èµ·ææ…Œ ä¸€èˆ¬ç”¨æ¥è‡ªå·±è°ƒè¯•ç¨‹åºå¼‚å¸¸ç­‰ç­‰<br>ä¸»è¦æŒæ¡panicçš„æ‰§è¡Œè¿‡ç¨‹ <br>é¦–å…ˆä»æŸä¸€è¡Œå¼•èµ·äº†panic ç„¶åè¿”å›åˆ°å…¶è°ƒç”¨å‡½æ•° è¿™æ ·ä¸€çº§ä¸€çº§çš„è¿”å› ç›´åˆ°æœ€é¡¶å±‚ä¹Ÿå³mainå‡½æ•°ä¸­ æœ€åæŠŠæ§åˆ¶æƒäº¤ç»™äº†goè¿è¡Œæ—¶çŠ¶æ€ï¼Œæœ€åç¨‹åºå¥”æºƒ è¿›ç¨‹é€€å‡º<br>panicçš„ä¿¡æ¯ä¸€èˆ¬ä¹Ÿåœ¨è¿™ä¸ªè¿”å›è¿‡ç¨‹ä¸­ä¸æ–­çš„å®Œå–„<br>panic: runtime error: index out of range &#47;&#47;é”™è¯¯ä¿¡æ¯<br>&#47;&#47;ä»¥ä¸‹æ˜¯è°ƒç”¨å †æ ˆ<br>goroutine 1 [running]:<br>main.caller2()<br>        &#47;home&#47;ubuntu&#47;geek_go&#47;Golang_Puzzlers&#47;src&#47;puzzlers&#47;article19&#47;q1&#47;demo48.go:22 +0x91<br>main.caller1()<br>        &#47;home&#47;ubuntu&#47;geek_go&#47;Golang_Puzzlers&#47;src&#47;puzzlers&#47;article19&#47;q1&#47;demo48.go:15 +0x66<br>main.main()<br>        &#47;home&#47;ubuntu&#47;geek_go&#47;Golang_Puzzlers&#47;src&#47;puzzlers&#47;article19&#47;q1&#47;demo48.go:9 +0x66<br>exit status 2<br>å…³äºæ€è€ƒé¢˜ æˆ‘ä¹Ÿå…ˆæƒ³äº†ä¸€ä¸‹ æˆ‘ä»¬æ•è·å¼‚å¸¸å¹¶å°†é”™è¯¯ä¿¡æ¯å°è£…åˆ°ä¸€ä¸ªerrorå½“ä¸­æœ€åè¿”å›è¿™ä¸ªerr<br>åæ¥åˆå»ç¿»äº†è§£ç­” å¥½åƒå°±æ˜¯è¿™ä¸ª æ ·å­çš„","like_count":0},{"had_liked":false,"id":62485,"user_name":"è™¢åœ‹æŠ€é†¬","can_delete":false,"product_type":"c1","uid":1056807,"ip_address":"","ucode":"5A192262AA037E","user_header":"https://static001.geekbang.org/account/avatar/00/10/20/27/a6932fbe.jpg","comment_is_top":false,"comment_ctime":1548068907,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548068907","product_id":100013101,"comment_content":"æ‰“å¡","like_count":0},{"had_liked":false,"id":53672,"user_name":"melody_future","can_delete":false,"product_type":"c1","uid":1072632,"ip_address":"","ucode":"AEF6218FDA0B0A","user_header":"https://static001.geekbang.org/account/avatar/00/10/5d/f8/62a8b90d.jpg","comment_is_top":false,"comment_ctime":1545708478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545708478","product_id":100013101,"comment_content":"panicã€recover æœ‰ç‚¹åƒtryã€ã€catchã€‚è¿™æ ·åº”è¯¥ä¼šå¥½ç†è§£å¾ˆå¤š","like_count":0}]}