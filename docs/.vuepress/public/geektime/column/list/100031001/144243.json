{"id":144243,"title":"44 | å¦‚ä½•æ„å»ºè‡ªå·±çš„Flutteræ··åˆå¼€å‘æ¡†æ¶ï¼ˆäºŒï¼‰ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚</p><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»å·¥ç¨‹æ¶æ„ä¸å·¥ä½œæ¨¡å¼ä¸¤ä¸ªå±‚é¢ï¼Œä¸ä½ ä»‹ç»äº†è®¾è®¡Flutteræ··åˆæ¡†æ¶éœ€è¦å…³æ³¨çš„åŸºæœ¬è®¾è®¡åŸåˆ™ï¼Œå³ç¡®å®šåˆ†å·¥è¾¹ç•Œã€‚</p><p>åœ¨å·¥ç¨‹æ¶æ„ç»´åº¦ï¼Œç”±äºFlutteræ¨¡å—ä½œä¸ºåŸç”Ÿå·¥ç¨‹çš„ä¸€ä¸ªä¸šåŠ¡ä¾èµ–ï¼Œå…¶è¿è¡Œç¯å¢ƒæ˜¯ç”±åŸç”Ÿå·¥ç¨‹æä¾›çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†å®ƒä»¬å„è‡ªæŠ½è±¡ä¸ºå¯¹åº”æŠ€æœ¯æ ˆçš„ä¾èµ–ç®¡ç†æ–¹å¼ï¼Œä»¥åˆ†å±‚ä¾èµ–çš„æ–¹å¼ç¡®å®šäºŒè€…çš„è¾¹ç•Œã€‚</p><p>è€Œåœ¨å·¥ä½œæ¨¡å¼ç»´åº¦ï¼Œè€ƒè™‘åˆ°Flutteræ¨¡å—å¼€å‘æ˜¯åŸç”Ÿå¼€å‘çš„ä¸Šæ¸¸ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦ä»å…¶æ„å»ºäº§ç‰©çš„è¿‡ç¨‹å…¥æ‰‹ï¼ŒæŠ½è±¡å‡ºå¼€å‘è¿‡ç¨‹ä¸­çš„å…³é”®èŠ‚ç‚¹å’Œé«˜é¢‘èŠ‚ç‚¹ï¼Œä»¥å‘½ä»¤è¡Œçš„å½¢å¼è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚æ„å»ºäº§ç‰©æ˜¯Flutteræ¨¡å—çš„è¾“å‡ºï¼ŒåŒæ—¶ä¹Ÿæ˜¯åŸç”Ÿå·¥ç¨‹çš„è¾“å…¥ï¼Œä¸€æ—¦äº§ç‰©å®Œæˆæ„å»ºï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥å…¥åŸç”Ÿå¼€å‘çš„å·¥ä½œæµäº†ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Flutteræ··åˆæ¡†æ¶ä¸­ï¼ŒFlutteræ¨¡å—ä¸åŸç”Ÿå·¥ç¨‹æ˜¯ç›¸äº’ä¾å­˜ã€äº’åˆ©å…±èµ¢çš„å…³ç³»ï¼š</p><ul>\n<li>Flutterè·¨å¹³å°å¼€å‘æ•ˆç‡é«˜ï¼Œæ¸²æŸ“æ€§èƒ½å’Œå¤šç«¯ä½“éªŒä¸€è‡´æ€§å¥½ï¼Œå› æ­¤åœ¨åˆ†å·¥ä¸Šä¸»è¦ä¸“æ³¨äºå®ç°åº”ç”¨å±‚çš„ç‹¬ç«‹ä¸šåŠ¡ï¼ˆé¡µé¢ï¼‰çš„æ¸²æŸ“é—­ç¯ï¼›</li>\n<li>è€ŒåŸç”Ÿå¼€å‘ç¨³å®šæ€§é«˜ï¼Œç²¾ç»†åŒ–æ§åˆ¶åŠ›å¼ºï¼Œåº•å±‚åŸºç¡€èƒ½åŠ›ä¸°å¯Œï¼Œå› æ­¤åœ¨åˆ†å·¥ä¸Šä¸»è¦ä¸“æ³¨äºæä¾›æ•´ä½“åº”ç”¨æ¶æ„ï¼Œä¸ºFlutteræ¨¡å—æä¾›ç¨³å®šçš„è¿è¡Œç¯å¢ƒåŠå¯¹åº”çš„åŸºç¡€èƒ½åŠ›æ”¯æŒã€‚</li>\n</ul><p>é‚£ä¹ˆï¼Œåœ¨åŸç”Ÿå·¥ç¨‹ä¸­ä¸ºFlutteræ¨¡å—æä¾›åŸºç¡€èƒ½åŠ›æ”¯æ’‘çš„è¿‡ç¨‹ä¸­ï¼Œé¢å¯¹è·¨æŠ€æœ¯æ ˆçš„ä¾èµ–ç®¡ç†ï¼Œæˆ‘ä»¬è¯¥éµå¾ªä½•ç§åŸåˆ™å‘¢ï¼Ÿå¯¹äºFlutteræ¨¡å—åŠå…¶ä¾èµ–çš„åŸç”Ÿæ’ä»¶ä»¬ï¼Œæˆ‘ä»¬åˆè¯¥å¦‚ä½•ä»¥æ ‡å‡†çš„åŸç”Ÿå·¥ç¨‹ä¾èµ–å½¢å¼è¿›è¡Œç»„ä»¶å°è£…å‘¢ï¼Ÿ</p><!-- [[[read_end]]] --><p>åœ¨ä»Šå¤©çš„æ–‡ç« ä¸­ï¼Œæˆ‘å°±é€šè¿‡ä¸€ä¸ªå…¸å‹æ¡ˆä¾‹ï¼Œä¸ä½ è®²è¿°è¿™ä¸¤ä¸ªé—®é¢˜çš„è§£å†³åŠæ³•ã€‚</p><h2>åŸç”Ÿæ’ä»¶ä¾èµ–ç®¡ç†åŸåˆ™</h2><p>åœ¨å‰é¢<a href=\"https://time.geekbang.org/column/article/127601\">ç¬¬26</a>å’Œ<a href=\"https://time.geekbang.org/column/article/132818\">31ç¯‡</a>æ–‡ç« é‡Œï¼Œæˆ‘ä¸ä½ è®²è¿°äº†ä¸ºFlutteråº”ç”¨ä¸­çš„Dartä»£ç æä¾›åŸç”Ÿèƒ½åŠ›æ”¯æŒçš„ä¸¤ç§æ–¹å¼ï¼Œå³ï¼šåœ¨åŸç”Ÿå·¥ç¨‹ä¸­çš„Flutteråº”ç”¨å…¥å£æ³¨å†ŒåŸç”Ÿä»£ç å®¿ä¸»å›è°ƒçš„è½»é‡çº§æ–¹æ¡ˆï¼Œä»¥åŠä½¿ç”¨æ’ä»¶å·¥ç¨‹è¿›è¡Œç‹¬ç«‹æ‹†åˆ†å°è£…çš„å·¥ç¨‹åŒ–è§£è€¦æ–¹æ¡ˆã€‚</p><p>æ— è®ºä½¿ç”¨å“ªç§æ–¹å¼ï¼ŒFlutteråº”ç”¨å·¥ç¨‹éƒ½ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä½“åŒ–çš„æ ‡å‡†è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿåœ¨é›†æˆæ„å»ºæ—¶è‡ªåŠ¨ç®¡ç†åŸç”Ÿä»£ç å®¿ä¸»åŠå…¶ç›¸åº”çš„åŸç”Ÿä¾èµ–ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦åœ¨åº”ç”¨å±‚ä½¿ç”¨pubspec.yamlæ–‡ä»¶å»ç®¡ç†Dartçš„ä¾èµ–ã€‚</p><p>ä½†<strong>å¯¹äºæ··åˆå·¥ç¨‹è€Œè¨€ï¼Œä¾èµ–å…³ç³»çš„ç®¡ç†åˆ™ä¼šå¤æ‚ä¸€äº›</strong>ã€‚è¿™æ˜¯å› ä¸ºï¼Œä¸Flutteråº”ç”¨å·¥ç¨‹æœ‰ç€å¯¹åŸç”Ÿç»„ä»¶ç®€å•æ¸…æ™°çš„å•å‘ä¾èµ–å…³ç³»ä¸åŒï¼Œæ··åˆå·¥ç¨‹å¯¹åŸç”Ÿç»„ä»¶çš„ä¾èµ–å…³ç³»æ˜¯å¤šå‘çš„ï¼šFlutteræ¨¡å—å·¥ç¨‹ä¼šä¾èµ–åŸç”Ÿç»„ä»¶ï¼Œè€ŒåŸç”Ÿå·¥ç¨‹çš„ç»„ä»¶ä¹‹é—´ä¹Ÿä¼šäº’ç›¸ä¾èµ–ã€‚</p><p>å¦‚æœç»§ç»­è®©Flutterçš„å·¥å…·é“¾æ¥ç®¡åŸç”Ÿç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆæ•´ä¸ªå·¥ç¨‹å°±ä¼šé™·å…¥ä¸ç¨³å®šçš„çŠ¶æ€ä¹‹ä¸­ã€‚å› æ­¤ï¼Œå¯¹äºæ··åˆå·¥ç¨‹çš„åŸç”Ÿä¾èµ–ï¼ŒFlutteræ¨¡å—å¹¶ä¸åšä»‹å…¥ï¼Œå®Œå…¨äº¤ç”±åŸç”Ÿå·¥ç¨‹è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚è€ŒFlutteræ¨¡å—å·¥ç¨‹å¯¹åŸç”Ÿå·¥ç¨‹çš„ä¾èµ–ï¼Œä½“ç°åœ¨ä¾èµ–åŸç”Ÿä»£ç å®¿ä¸»æä¾›çš„åº•å±‚åŸºç¡€èƒ½åŠ›çš„åŸç”Ÿæ’ä»¶ä¸Šã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä»¥ç½‘ç»œé€šä¿¡è¿™ä¸€åŸºç¡€èƒ½åŠ›ä¸ºä¾‹ï¼Œä¸ä½ å±•å¼€è¯´æ˜åŸç”Ÿå·¥ç¨‹ä¸Flutteræ¨¡å—å·¥ç¨‹ä¹‹é—´åº”è¯¥å¦‚ä½•ç®¡ç†ä¾èµ–å…³ç³»ã€‚</p><h2>ç½‘ç»œæ’ä»¶ä¾èµ–ç®¡ç†å®è·µ</h2><p>åœ¨ç¬¬24ç¯‡æ–‡ç« â€œ<a href=\"https://time.geekbang.org/column/article/121163\">HTTPç½‘ç»œç¼–ç¨‹ä¸JSONè§£æ</a>â€ä¸­ï¼Œæˆ‘ä¸ä½ ä»‹ç»äº†åœ¨Flutterä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡HttpClientã€httpä¸dioè¿™ä¸‰ç§é€šä¿¡æ–¹å¼ï¼Œå®ç°ä¸æœåŠ¡ç«¯çš„æ•°æ®äº¤æ¢ã€‚</p><p>ä½†åœ¨æ··åˆå·¥ç¨‹ä¸­ï¼Œè€ƒè™‘åˆ°å…¶ä»–åŸç”Ÿç»„ä»¶ä¹Ÿéœ€è¦ä½¿ç”¨ç½‘ç»œé€šä¿¡èƒ½åŠ›ï¼Œæ‰€ä»¥é€šå¸¸æ˜¯ç”±åŸç”Ÿå·¥ç¨‹æ¥æä¾›ç½‘ç»œé€šä¿¡åŠŸèƒ½çš„ã€‚å› ä¸ºè¿™æ ·ä¸ä»…å¯ä»¥åœ¨å·¥ç¨‹æ¶æ„å±‚é¢å®ç°æ›´åˆç†çš„åŠŸèƒ½åˆ†æ²»ï¼Œè¿˜å¯ä»¥ç»Ÿä¸€æ•´ä¸ªAppå†…æ•°æ®äº¤æ¢çš„è¡Œä¸ºã€‚æ¯”å¦‚ï¼Œåœ¨ç½‘ç»œå¼•æ“ä¸­ä¸ºæ¥å£è¯·æ±‚å¢åŠ é€šç”¨å‚æ•°ï¼Œæˆ–è€…æ˜¯é›†ä¸­æ‹¦æˆªé”™è¯¯ç­‰ã€‚</p><p>å…³äºåŸç”Ÿç½‘ç»œé€šä¿¡åŠŸèƒ½ï¼Œç›®å‰å¸‚é¢ä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„ç¬¬ä¸‰æ–¹å¼€æºSDKï¼Œæ¯”å¦‚iOSçš„AFNetworkingå’ŒAlamofireã€Androidçš„OkHttpå’ŒRetrofitç­‰ã€‚è€ƒè™‘åˆ°AFNetworkingå’ŒOkHttpåœ¨å„è‡ªå¹³å°çš„ç¤¾åŒºæ´»è·ƒåº¦ç›¸å¯¹æœ€é«˜ï¼Œå› æ­¤æˆ‘å°±ä»¥å®ƒä¿©ä¸ºä¾‹ï¼Œä¸ä½ æ¼”ç¤ºæ··åˆå·¥ç¨‹çš„åŸç”Ÿæ’ä»¶ç®¡ç†æ–¹æ³•ã€‚</p><h2>ç½‘ç»œæ’ä»¶æ¥å£å°è£…</h2><p>è¦æƒ³ææ¸…æ¥šå¦‚ä½•ç®¡ç†åŸç”Ÿæ’ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä½¿ç”¨æ–¹æ³•é€šé“æ¥å»ºç«‹Dartå±‚ä¸åŸç”Ÿä»£ç å®¿ä¸»ä¹‹é—´çš„è”ç³»ã€‚</p><p>åŸç”Ÿå·¥ç¨‹ä¸ºFlutteræ¨¡å—æä¾›åŸç”Ÿä»£ç èƒ½åŠ›ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦ä½¿ç”¨Flutteræ’ä»¶å·¥ç¨‹æ¥è¿›è¡Œå°è£…ã€‚å…³äºè¿™éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘åœ¨ç¬¬<a href=\"https://time.geekbang.org/column/article/132818\">31</a>å’Œ<a href=\"https://time.geekbang.org/column/article/141164\">39</a>ç¯‡æ–‡ç« ä¸­ï¼Œå·²ç»åˆ†åˆ«ä¸ºä½ æ¼”ç¤ºäº†æ¨é€æ’ä»¶å’Œæ•°æ®ä¸ŠæŠ¥æ’ä»¶çš„å°è£…æ–¹æ³•ï¼Œä½ ä¹Ÿå¯ä»¥å†å›è¿‡å¤´æ¥å¤ä¹ ä¸‹ç›¸å…³å†…å®¹ã€‚æ‰€ä»¥ï¼Œä»Šå¤©æˆ‘å°±ä¸å†ä¸ä½ è¿‡å¤šä»‹ç»é€šç”¨çš„æµç¨‹å’Œå›ºå®šçš„ä»£ç å£°æ˜éƒ¨åˆ†äº†ï¼Œè€Œæ˜¯é‡ç‚¹ä¸ä½ è®²è¿°ä¸æ¥å£ç›¸å…³çš„å®ç°ç»†èŠ‚ã€‚</p><p><strong>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Dartä»£ç éƒ¨åˆ†ã€‚</strong></p><p>å¯¹äºæ’ä»¶å·¥ç¨‹çš„Dartå±‚ä»£ç è€Œè¨€ï¼Œç”±äºå®ƒä»…ä»…æ˜¯åŸç”Ÿå·¥ç¨‹çš„ä»£ç å®¿ä¸»ä»£ç†ï¼Œæ‰€ä»¥è¿™ä¸€å±‚çš„æ¥å£è®¾è®¡æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦æä¾›ä¸€ä¸ªå¯ä»¥æ¥æ”¶è¯·æ±‚URLå’Œå‚æ•°ï¼Œå¹¶è¿”å›æ¥å£å“åº”æ•°æ®çš„æ–¹æ³•doRequestå³å¯ï¼š</p><pre><code>class FlutterPluginNetwork {\n  ...\n  static Future&lt;String&gt; doRequest(url,params)  async {\n    //ä½¿ç”¨æ–¹æ³•é€šé“è°ƒç”¨åŸç”Ÿæ¥å£doRequestï¼Œä¼ å…¥URLå’Œparamä¸¤ä¸ªå‚æ•°\n    final String result = await _channel.invokeMethod('doRequest', {\n      &quot;url&quot;: url,\n      &quot;param&quot;: params,\n    });\n    return result;\n  }\n}\n</code></pre><p>Dartå±‚æ¥å£å°è£…æå®šäº†ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹<strong>æ¥ç®¡çœŸå®ç½‘ç»œè°ƒç”¨çš„Androidå’ŒiOSä»£ç å®¿ä¸»å¦‚ä½•å“åº”Dartå±‚çš„æ¥å£è°ƒç”¨</strong>ã€‚</p><p>æˆ‘åˆšåˆšä¸ä½ æåˆ°è¿‡ï¼ŒåŸç”Ÿä»£ç å®¿ä¸»æä¾›çš„åŸºç¡€é€šä¿¡èƒ½åŠ›æ˜¯åŸºäºAFNetworkingï¼ˆiOSï¼‰å’ŒOkHttpï¼ˆAndroidï¼‰åšçš„å°è£…ï¼Œæ‰€ä»¥ä¸ºäº†åœ¨åŸç”Ÿä»£ç ä¸­ä½¿ç”¨å®ƒä»¬ï¼Œæˆ‘ä»¬<strong>é¦–å…ˆ</strong>éœ€è¦åˆ†åˆ«åœ¨flutter_plugin_network.podspecå’Œbuild.gradleæ–‡ä»¶ä¸­å°†å·¥ç¨‹å¯¹å®ƒä»¬çš„ä¾èµ–æ˜¾å¼åœ°å£°æ˜å‡ºæ¥ï¼š</p><p>åœ¨flutter_plugin_network.podspecæ–‡ä»¶ä¸­ï¼Œå£°æ˜å·¥ç¨‹å¯¹AFNetworkingçš„ä¾èµ–ï¼š</p><pre><code>Pod::Spec.new do |s|\n  ...\n  s.dependency 'AFNetworking'\nend\n</code></pre><p>åœ¨build.gradleæ–‡ä»¶ä¸­ï¼Œå£°æ˜å·¥ç¨‹å¯¹OkHttpçš„ä¾èµ–ï¼š</p><pre><code>dependencies {\n    implementation &quot;com.squareup.okhttp3:okhttp:4.2.0&quot;\n}\n</code></pre><p><strong>ç„¶å</strong>ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åŸç”Ÿæ¥å£FlutterPluginNetworkPluginç±»ä¸­ï¼Œå®Œæˆä¾‹è¡Œçš„åˆå§‹åŒ–æ’ä»¶å®ä¾‹ã€ç»‘å®šæ–¹æ³•é€šé“å·¥ä½œã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æ–¹æ³•é€šé“ä¸­å–å‡ºå¯¹åº”çš„URLå’Œqueryå‚æ•°ï¼Œä¸ºdoRequeståˆ†åˆ«æä¾›AFNetworkingå’ŒOkHttpçš„å®ç°ç‰ˆæœ¬ã€‚</p><p>å¯¹äºiOSçš„è°ƒç”¨è€Œè¨€ï¼Œç”±äºAFNetworkingçš„ç½‘ç»œè°ƒç”¨å¯¹è±¡æ˜¯AFHTTPSessionManagerç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿™ä¸ªç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¹¶å®šä¹‰å…¶æ¥å£è¿”å›çš„åºåˆ—åŒ–æ–¹å¼ï¼ˆæœ¬ä¾‹ä¸­ä¸ºå­—ç¬¦ä¸²ï¼‰ã€‚ç„¶åå‰©ä¸‹çš„å·¥ä½œå°±æ˜¯ç”¨å®ƒå»å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œä½¿ç”¨æ–¹æ³•é€šé“é€šçŸ¥Dartå±‚æ‰§è¡Œç»“æœäº†ï¼š</p><pre><code>@implementation FlutterPluginNetworkPlugin\n...\n//æ–¹æ³•é€šé“å›è°ƒ\n- (void)handleMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result {\n    //å“åº”doRequestæ–¹æ³•è°ƒç”¨\n    if ([@&quot;doRequest&quot; isEqualToString:call.method]) {\n        //å–å‡ºqueryå‚æ•°å’ŒURL\n        NSDictionary *arguments = call.arguments[@&quot;param&quot;];\n        NSString *url = call.arguments[@&quot;url&quot;];\n        [self doRequest:url withParams:arguments andResult:result];\n    } else {\n        //å…¶ä»–æ–¹æ³•æœªå®ç°\n        result(FlutterMethodNotImplemented);\n    }\n}\n//å¤„ç†ç½‘ç»œè°ƒç”¨\n- (void)doRequest:(NSString *)url withParams:(NSDictionary *)params andResult:(FlutterResult)result {\n    //åˆå§‹åŒ–ç½‘ç»œè°ƒç”¨å®ä¾‹\n    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];\n    //å®šä¹‰æ•°æ®åºåˆ—åŒ–æ–¹å¼ä¸ºå­—ç¬¦ä¸²\n    manager.responseSerializer = [AFHTTPResponseSerializer serializer];\n    NSMutableDictionary *newParams = [params mutableCopy];\n    //å¢åŠ è‡ªå®šä¹‰å‚æ•°\n    newParams[@&quot;ppp&quot;] = @&quot;yyyy&quot;;\n    //å‘èµ·ç½‘ç»œè°ƒç”¨\n    [manager GET:url parameters:params progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) {\n        //å–å‡ºå“åº”æ•°æ®ï¼Œå“åº”Dartè°ƒç”¨\n        NSString *string = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];\n        result(string);\n    } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {\n        //é€šçŸ¥Dartè°ƒç”¨å¤±è´¥\n        result([FlutterError errorWithCode:@&quot;Error&quot; message:error.localizedDescription details:nil]);\n    }];\n}\n@end\n</code></pre><p>Androidçš„è°ƒç”¨ä¹Ÿç±»ä¼¼ï¼ŒOkHttpçš„ç½‘ç»œè°ƒç”¨å¯¹è±¡æ˜¯OkHttpClientç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬åŒæ ·éœ€è¦è¿™ä¸ªç±»è¿›è¡Œå®ä¾‹åŒ–ã€‚OkHttpçš„é»˜è®¤åºåˆ—åŒ–æ–¹å¼å·²ç»æ˜¯å­—ç¬¦ä¸²äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼Œåªéœ€è¦URLå‚æ•°åŠ å·¥æˆOkHttpæœŸæœ›çš„æ ¼å¼ï¼Œç„¶åå°±æ˜¯ç”¨å®ƒå»å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œä½¿ç”¨æ–¹æ³•é€šé“é€šçŸ¥Dartå±‚æ‰§è¡Œç»“æœäº†ï¼š</p><pre><code>public class FlutterPluginNetworkPlugin implements MethodCallHandler {\n  ...\n  @Override\n  //æ–¹æ³•é€šé“å›è°ƒ\n  public void onMethodCall(MethodCall call, Result result) {\n    //å“åº”doRequestæ–¹æ³•è°ƒç”¨\n    if (call.method.equals(&quot;doRequest&quot;)) {\n      //å–å‡ºqueryå‚æ•°å’ŒURL\n      HashMap param = call.argument(&quot;param&quot;);\n      String url = call.argument(&quot;url&quot;);\n      doRequest(url,param,result);\n    } else {\n      //å…¶ä»–æ–¹æ³•æœªå®ç°\n      result.notImplemented();\n    }\n  }\n  //å¤„ç†ç½‘ç»œè°ƒç”¨\n  void doRequest(String url, HashMap&lt;String, String&gt; param, final Result result) {\n    //åˆå§‹åŒ–ç½‘ç»œè°ƒç”¨å®ä¾‹\n    OkHttpClient client = new OkHttpClient();\n    //åŠ å·¥URLåŠqueryå‚æ•°\n    HttpUrl.Builder urlBuilder = HttpUrl.parse(url).newBuilder();\n    for (String key : param.keySet()) {\n      String value = param.get(key);\n      urlBuilder.addQueryParameter(key,value);\n    }\n    //åŠ å…¥è‡ªå®šä¹‰é€šç”¨å‚æ•°\n    urlBuilder.addQueryParameter(&quot;ppp&quot;, &quot;yyyy&quot;);\n    String requestUrl = urlBuilder.build().toString();\n\n    //å‘èµ·ç½‘ç»œè°ƒç”¨\n    final Request request = new Request.Builder().url(requestUrl).build();\n    client.newCall(request).enqueue(new Callback() {\n      @Override\n      public void onFailure(Call call, final IOException e) {\n        //åˆ‡æ¢è‡³ä¸»çº¿ç¨‹ï¼Œé€šçŸ¥Dartè°ƒç”¨å¤±è´¥\n        registrar.activity().runOnUiThread(new Runnable() {\n          @Override\n          public void run() {\n            result.error(&quot;Error&quot;, e.toString(), null);\n          }\n        });\n      }\n      \n      @Override\n      public void onResponse(Call call, final Response response) throws IOException {\n        //å–å‡ºå“åº”æ•°æ®\n        final String content = response.body().string();\n        //åˆ‡æ¢è‡³ä¸»çº¿ç¨‹ï¼Œå“åº”Dartè°ƒç”¨\n        registrar.activity().runOnUiThread(new Runnable() {\n            @Override\n            public void run() {\n              result.success(content);\n            }\n        });\n      }\n    });\n  }\n}\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>ç”±äºæ–¹æ³•é€šé“æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥åŸç”Ÿä»£ç ä¸Flutterä¹‹é—´æ‰€æœ‰çš„æ¥å£è°ƒç”¨å¿…é¡»å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ã€‚</strong>è€ŒOktHtpåœ¨å¤„ç†ç½‘ç»œè¯·æ±‚æ—¶ï¼Œç”±äºæ¶‰åŠéä¸»çº¿ç¨‹åˆ‡æ¢ï¼Œæ‰€ä»¥éœ€è¦è°ƒç”¨runOnUiThreadæ–¹æ³•ä»¥ç¡®ä¿å›è°ƒè¿‡ç¨‹æ˜¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¦åˆ™åº”ç”¨å¯èƒ½ä¼šå‡ºç°å¥‡æ€ªçš„Bugï¼Œç”šè‡³æ˜¯Crashã€‚</p><p>æœ‰äº›åŒå­¦å¯èƒ½ä¼šæ¯”è¾ƒå¥½å¥‡ï¼Œ<strong>ä¸ºä»€ä¹ˆdoRequestçš„Androidå®ç°éœ€è¦æ‰‹åŠ¨åˆ‡å›UIçº¿ç¨‹ï¼Œè€ŒiOSå®ç°åˆ™ä¸éœ€è¦å‘¢ï¼Ÿ</strong>è¿™å…¶å®æ˜¯å› ä¸ºdoRequestçš„iOSå®ç°èƒŒåä¾èµ–çš„AFNetworkingï¼Œå·²ç»åœ¨æ•°æ®å›è°ƒæ¥å£æ—¶ä¸ºæˆ‘ä»¬ä¸»åŠ¨åˆ‡æ¢äº†UIçº¿ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªç„¶ä¸éœ€è¦é‡å¤å†åšä¸€æ¬¡äº†ã€‚</p><p>åœ¨å®Œæˆäº†åŸç”Ÿæ¥å£å°è£…ä¹‹åï¼ŒFlutterå·¥ç¨‹æ‰€éœ€çš„ç½‘ç»œé€šä¿¡åŠŸèƒ½çš„æ¥å£å®ç°ï¼Œå°±å…¨éƒ¨æå®šäº†ã€‚</p><h2>Flutteræ¨¡å—å·¥ç¨‹ä¾èµ–ç®¡ç†</h2><p>é€šè¿‡ä¸Šé¢è¿™äº›æ­¥éª¤ï¼Œæˆ‘ä»¬ä»¥æ’ä»¶çš„å½¢å¼æä¾›äº†åŸç”Ÿç½‘ç»œåŠŸèƒ½çš„å°è£…ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨Flutteræ¨¡å—å·¥ç¨‹ä¸­ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œå¹¶æä¾›å¯¹åº”çš„æ„å»ºäº§ç‰©å°è£…ï¼Œæä¾›ç»™åŸç”Ÿå·¥ç¨‹ä½¿ç”¨äº†ã€‚è¿™éƒ¨åˆ†å†…å®¹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹3å¤§éƒ¨åˆ†ï¼š</p><ul>\n<li>ç¬¬ä¸€ï¼Œå¦‚ä½•ä½¿ç”¨FlutterPluginNetworkPluginæ’ä»¶ï¼Œä¹Ÿå°±æ˜¯æ¨¡å—å·¥ç¨‹åŠŸèƒ½å¦‚ä½•å®ç°ï¼›</li>\n<li>ç¬¬äºŒï¼Œæ¨¡å—å·¥ç¨‹çš„iOSæ„å»ºäº§ç‰©åº”è¯¥å¦‚ä½•å°è£…ï¼Œä¹Ÿå°±æ˜¯åŸç”ŸiOSå·¥ç¨‹å¦‚ä½•ç®¡ç†Flutteræ¨¡å—å·¥ç¨‹çš„ä¾èµ–ï¼›</li>\n<li>ç¬¬ä¸‰ï¼Œæ¨¡å—å·¥ç¨‹çš„Androidæ„å»ºäº§ç‰©åº”è¯¥å¦‚ä½•å°è£…ï¼Œä¹Ÿå°±æ˜¯åŸç”ŸAndroidå·¥ç¨‹å¦‚ä½•ç®¡ç†Flutteræ¨¡å—å·¥ç¨‹çš„ä¾èµ–ã€‚</li>\n</ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…·ä½“çœ‹çœ‹æ¯éƒ¨åˆ†åº”è¯¥å¦‚ä½•å®ç°ã€‚</p><h2>æ¨¡å—å·¥ç¨‹åŠŸèƒ½å®ç°</h2><p>ä¸ºäº†ä½¿ç”¨FlutterPluginNetworkPluginæ’ä»¶å®ç°ä¸æœåŠ¡ç«¯çš„æ•°æ®äº¤æ¢èƒ½åŠ›ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨pubspec.yamlæ–‡ä»¶ä¸­ï¼Œå°†å·¥ç¨‹å¯¹å®ƒçš„ä¾èµ–æ˜¾ç¤ºåœ°å£°æ˜å‡ºæ¥ï¼š</p><pre><code>flutter_plugin_network:\n    git:\n      url: https://github.com/cyndibaby905/44_flutter_plugin_network.git\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬è¿˜å¾—åœ¨main.dartæ–‡ä»¶ä¸­ä¸ºå®ƒæä¾›ä¸€ä¸ªè§¦å‘å…¥å£ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ç•Œé¢ä¸Šå±•ç¤ºäº†ä¸€ä¸ªRaisedButtonæŒ‰é’®ï¼Œå¹¶åœ¨å…¶ç‚¹å‡»å›è°ƒå‡½æ•°æ—¶ï¼Œä½¿ç”¨FlutterPluginNetworkæ’ä»¶å‘èµ·äº†ä¸€æ¬¡ç½‘ç»œæ¥å£è°ƒç”¨ï¼Œå¹¶æŠŠç½‘ç»œè¿”å›çš„æ•°æ®æ‰“å°åˆ°äº†æ§åˆ¶å°ä¸Šï¼š</p><pre><code>RaisedButton(\n  child: Text(&quot;doRequest&quot;),\n  //ç‚¹å‡»æŒ‰é’®å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ‰“å°æ•°æ®\n  onPressed:()=&gt;FlutterPluginNetwork.doRequest(&quot;https://jsonplaceholder.typicode.com/posts&quot;, {'userId':'2'}).then((s)=&gt;print('Result:$s')),\n)\n</code></pre><p>è¿è¡Œè¿™æ®µä»£ç ï¼Œç‚¹å‡»doRequestæŒ‰é’®ï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ¥å£è¿”å›çš„æ•°æ®ä¿¡æ¯èƒ½å¤Ÿè¢«æ­£å¸¸æ‰“å°ï¼Œè¯æ˜Flutteræ¨¡å—çš„åŠŸèƒ½è¡¨ç°æ˜¯å®Œå…¨ç¬¦åˆé¢„æœŸçš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/68/83/6855481fc112697ff2cc03fdcc185883.png?wh=2030*1662\" alt=\"\"></p><center><span class=\"reference\">å›¾1 Flutteræ¨¡å—å·¥ç¨‹è¿è¡Œç¤ºä¾‹</span></center><h2>æ„å»ºäº§ç‰©åº”è¯¥å¦‚ä½•å°è£…ï¼Ÿ</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ¨¡å—å·¥ç¨‹çš„Androidæ„å»ºäº§ç‰©æ˜¯aarï¼ŒiOSæ„å»ºäº§ç‰©æ˜¯Frameworkã€‚è€Œåœ¨ç¬¬<a href=\"https://time.geekbang.org/column/article/129754\">28</a>å’Œ<a href=\"https://time.geekbang.org/column/article/144156\">42</a>ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸ä½ ä»‹ç»äº†ä¸å¸¦æ’ä»¶ä¾èµ–çš„æ¨¡å—å·¥ç¨‹æ„å»ºäº§ç‰©çš„ä¸¤ç§å°è£…æ–¹æ¡ˆï¼Œå³æ‰‹åŠ¨å°è£…æ–¹æ¡ˆä¸è‡ªåŠ¨åŒ–å°è£…æ–¹æ¡ˆã€‚è¿™ä¸¤ç§å°è£…æ–¹æ¡ˆï¼Œæœ€ç»ˆéƒ½ä¼šè¾“å‡ºåŒæ ·çš„ç»„ç»‡å½¢å¼ï¼ˆAndroidæ˜¯aarï¼ŒiOSåˆ™æ˜¯å¸¦podspecçš„Frameworkå°è£…ç»„ä»¶ï¼‰ã€‚</p><p>å¦‚æœä½ å·²ç»ä¸ç†Ÿæ‚‰è¿™ä¸¤ç§å°è£…æ–¹å¼çš„å…·ä½“æ“ä½œæ­¥éª¤äº†ï¼Œå¯ä»¥å†å¤ä¹ ä¸‹è¿™ä¸¤ç¯‡æ–‡ç« çš„ç›¸å…³å†…å®¹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘é‡ç‚¹ä¸ä½ è®²è¿°çš„é—®é¢˜æ˜¯ï¼š<strong>å¦‚æœæˆ‘ä»¬çš„æ¨¡å—å·¥ç¨‹å­˜åœ¨æ’ä»¶ä¾èµ–ï¼Œå°è£…è¿‡ç¨‹æ˜¯å¦æœ‰åŒºåˆ«å‘¢ï¼Ÿ</strong></p><p>ç­”æ¡ˆæ˜¯ï¼Œå¯¹äºæ¨¡å—å·¥ç¨‹æœ¬èº«è€Œè¨€ï¼Œè¿™ä¸ªè¿‡ç¨‹æ²¡æœ‰åŒºåˆ«ï¼›ä½†å¯¹äºæ¨¡å—å·¥ç¨‹çš„æ’ä»¶ä¾èµ–æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸»åŠ¨å‘Šè¯‰åŸç”Ÿå·¥ç¨‹ï¼Œå“ªäº›ä¾èµ–æ˜¯éœ€è¦å®ƒå»ç®¡ç†çš„ã€‚</p><p>ç”±äºFlutteræ¨¡å—å·¥ç¨‹æŠŠæ‰€æœ‰åŸç”Ÿçš„ä¾èµ–éƒ½äº¤ç»™äº†åŸç”Ÿå·¥ç¨‹å»ç®¡ç†ï¼Œå› æ­¤å…¶æ„å»ºäº§ç‰©å¹¶ä¸ä¼šæºå¸¦ä»»ä½•åŸç”Ÿæ’ä»¶çš„å°è£…å®ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦éå†æ¨¡å—å·¥ç¨‹æ‰€ä½¿ç”¨çš„åŸç”Ÿä¾èµ–ç»„ä»¶ä»¬ï¼Œä¸ºå®ƒä»¬é€ä¸€ç”Ÿæˆæ’ä»¶ä»£ç å¯¹åº”çš„åŸç”Ÿç»„ä»¶å°è£…ã€‚</p><p>åœ¨ç¬¬18ç¯‡æ–‡ç« â€œ<a href=\"https://time.geekbang.org/column/article/114180\">ä¾èµ–ç®¡ç†ï¼ˆäºŒï¼‰ï¼šç¬¬ä¸‰æ–¹ç»„ä»¶åº“åœ¨Flutterä¸­è¦å¦‚ä½•ç®¡ç†ï¼Ÿ</a>â€ä¸­ï¼Œæˆ‘ä¸ä½ ä»‹ç»äº†Flutterå·¥ç¨‹ç®¡ç†ç¬¬ä¸‰æ–¹ä¾èµ–çš„å®ç°æœºåˆ¶ï¼Œå…¶ä¸­.packagesæ–‡ä»¶å­˜å‚¨çš„æ˜¯ä¾èµ–çš„åŒ…åä¸ç³»ç»Ÿç¼“å­˜ä¸­çš„åŒ…æ–‡ä»¶è·¯å¾„ã€‚</p><p>ç±»ä¼¼çš„ï¼Œæ’ä»¶ä¾èµ–ä¹Ÿæœ‰ä¸€ä¸ªç±»ä¼¼çš„æ–‡ä»¶è¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œå³<strong>.flutter-plugins</strong>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ’ä»¶åå­—ï¼ˆæœ¬ä¾‹ä¸­å³ä¸ºflutter_plugin_networkï¼‰åŠç¼“å­˜è·¯å¾„ï¼š</p><pre><code>flutter_plugin_network=/Users/hangchen/Documents/flutter/.pub-cache/git/44_flutter_plugin_network-9b4472aa46cf20c318b088573a30bc32c6961777/\n</code></pre><p>æ’ä»¶ç¼“å­˜æœ¬èº«ä¹Ÿå¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªFlutteræ¨¡å—å·¥ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸æ¨¡å—å·¥ç¨‹ç±»ä¼¼çš„åŠæ³•ï¼Œä¸ºå®ƒç”Ÿæˆå¯¹åº”çš„åŸç”Ÿç»„ä»¶å°è£…ã€‚</p><p>å¯¹äºiOSè€Œè¨€ï¼Œè¿™ä¸ªè¿‡ç¨‹ç›¸å¯¹ç®€å•äº›ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ¨¡å—å·¥ç¨‹çš„iOSæ„å»ºäº§ç‰©å°è£…è¿‡ç¨‹ã€‚</p><h3>iOSæ„å»ºäº§ç‰©åº”è¯¥å¦‚ä½•å°è£…ï¼Ÿ</h3><p>åœ¨æ’ä»¶å·¥ç¨‹çš„iosç›®å½•ä¸‹ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¸¦podspecæ–‡ä»¶çš„æºç ç»„ä»¶ï¼Œpodspecæ–‡ä»¶æä¾›äº†ç»„ä»¶çš„å£°æ˜ï¼ˆåŠå…¶ä¾èµ–ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´å‡ºæ¥ï¼Œè¿åŒFlutteræ¨¡å—ç»„ä»¶ä¸€èµ·æ”¾åˆ°åŸç”Ÿå·¥ç¨‹ä¸­çš„ä¸“ç”¨ç›®å½•ï¼Œå¹¶å†™åˆ°Podfileæ–‡ä»¶é‡Œã€‚</p><p>åŸç”Ÿå·¥ç¨‹ä¼šè¯†åˆ«å‡ºç»„ä»¶æœ¬èº«åŠå…¶ä¾èµ–ï¼Œå¹¶æŒ‰ç…§å£°æ˜çš„ä¾èµ–å…³ç³»ä¾æ¬¡éå†ï¼Œè‡ªåŠ¨å®‰è£…ï¼š</p><pre><code>#Podfile\ntarget 'iOSDemo' do\n  pod 'Flutter', :path =&gt; 'Flutter'\n  pod 'flutter_plugin_network', :path =&gt; 'flutter_plugin_network'\nend\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒä½¿ç”¨ä¸å¸¦æ’ä»¶ä¾èµ–çš„æ¨¡å—å·¥ç¨‹ä¸€æ ·ï¼ŒæŠŠå®ƒå¼•å…¥åˆ°åŸç”Ÿå·¥ç¨‹ä¸­ï¼Œä¸ºå…¶è®¾ç½®å…¥å£ï¼Œåœ¨FlutterViewControllerä¸­å±•ç¤ºFlutteræ¨¡å—çš„é¡µé¢äº†ã€‚</p><p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºFlutterViewControllerå¹¶ä¸æ„ŸçŸ¥è¿™ä¸ªè¿‡ç¨‹ï¼Œå› æ­¤ä¸ä¼šä¸»åŠ¨åˆå§‹åŒ–é¡¹ç›®ä¸­çš„æ’ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åœ¨å…¥å£å¤„æ‰‹åŠ¨å°†å·¥ç¨‹é‡Œæ‰€æœ‰çš„æ’ä»¶ä¾æ¬¡å£°æ˜å‡ºæ¥ï¼š</p><pre><code>//AppDelegate.m:\n@implementation AppDelegate\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {\n    self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];\n    //åˆå§‹åŒ–Flutterå…¥å£\n    FlutterViewController *vc = [[FlutterViewController alloc]init];\n    //åˆå§‹åŒ–æ’ä»¶\n    [FlutterPluginNetworkPlugin registerWithRegistrar:[vc registrarForPlugin:@&quot;FlutterPluginNetworkPlugin&quot;]];\n    //è®¾ç½®è·¯ç”±æ ‡è¯†ç¬¦\n    [vc setInitialRoute:@&quot;defaultRoute&quot;]; \n    self.window.rootViewController = vc;\n    [self.window makeKeyAndVisible];\n    return YES;\n}\n</code></pre><p>åœ¨Xcodeä¸­è¿è¡Œè¿™æ®µä»£ç ï¼Œç‚¹å‡»doRequestæŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ¥å£è¿”å›çš„æ•°æ®ä¿¡æ¯èƒ½å¤Ÿè¢«æ­£å¸¸æ‰“å°ï¼Œè¯æ˜æˆ‘ä»¬å·²ç»å¯ä»¥åœ¨åŸç”ŸiOSå·¥ç¨‹ä¸­é¡ºåˆ©çš„ä½¿ç”¨Flutteræ¨¡å—äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/32/c8/329866c452354bd0524fc3de798b4fc8.png?wh=2124*1890\" alt=\"\"></p><center><span class=\"reference\">å›¾2 åŸç”ŸiOSå·¥ç¨‹è¿è¡Œç¤ºä¾‹</span></center><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹æ¨¡å—å·¥ç¨‹çš„Androidæ„å»ºäº§ç‰©åº”è¯¥å¦‚ä½•å°è£…ã€‚</p><h3>Androidæ„å»ºäº§ç‰©åº”è¯¥å¦‚ä½•å°è£…ï¼Ÿ</h3><p>ä¸iOSçš„æ’ä»¶å·¥ç¨‹ç»„ä»¶åœ¨iosç›®å½•ç±»ä¼¼ï¼ŒAndroidçš„æ’ä»¶å·¥ç¨‹ç»„ä»¶åœ¨androidç›®å½•ã€‚å¯¹äºiOSçš„æ’ä»¶å·¥ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†æºç ç»„ä»¶æä¾›ç»™åŸç”Ÿå·¥ç¨‹ï¼Œä½†å¯¹äºAndriodçš„æ’ä»¶å·¥ç¨‹æ¥è¯´ï¼Œæˆ‘ä»¬åªèƒ½å°†aarç»„ä»¶æä¾›ç»™åŸç”Ÿå·¥ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ä»…éœ€è¦åƒiOSæ“ä½œæ­¥éª¤é‚£æ ·è¿›å…¥æ’ä»¶çš„ç»„ä»¶ç›®å½•ï¼Œè¿˜éœ€è¦å€ŸåŠ©æ„å»ºå‘½ä»¤ï¼Œä¸ºæ’ä»¶å·¥ç¨‹ç”Ÿæˆaarï¼š</p><pre><code>cd android\n./gradlew flutter_plugin_network:assRel\n</code></pre><p>å‘½ä»¤æ‰§è¡Œå®Œæˆä¹‹åï¼Œaarå°±ç”Ÿæˆå¥½äº†ã€‚aarä½äºandroid/build/outputs/aarç›®å½•ä¸‹ï¼Œæˆ‘ä»¬æ‰“å¼€æ’ä»¶ç¼“å­˜å¯¹åº”çš„è·¯å¾„ï¼Œæå–å‡ºå¯¹åº”çš„aarï¼ˆæœ¬ä¾‹ä¸­ä¸ºflutter_plugin_network-debug.aarï¼‰å°±å¯ä»¥äº†ã€‚</p><p>æˆ‘ä»¬æŠŠç”Ÿæˆçš„æ’ä»¶aarï¼Œè¿åŒFlutteræ¨¡å—aarä¸€èµ·æ”¾åˆ°åŸç”Ÿå·¥ç¨‹çš„libsç›®å½•ä¸‹ï¼Œæœ€ååœ¨build.gradleæ–‡ä»¶é‡Œå°†å®ƒæ˜¾å¼åœ°å£°æ˜å‡ºæ¥ï¼Œå°±å®Œæˆäº†æ’ä»¶å·¥ç¨‹çš„å¼•å…¥ã€‚</p><pre><code>//build.gradle\ndependencies {\n    ...\n    implementation(name: 'flutter-debug', ext: 'aar')\n    implementation(name: 'flutter_plugin_network-debug', ext: 'aar')\n    implementation &quot;com.squareup.okhttp3:okhttp:4.2.0&quot;\n    ...\n}\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åŸç”Ÿå·¥ç¨‹ä¸­ä¸ºå…¶è®¾ç½®å…¥å£ï¼Œåœ¨FlutterViewä¸­å±•ç¤ºFlutteré¡µé¢ï¼Œæ„‰å¿«åœ°ä½¿ç”¨Flutteræ¨¡å—å¸¦æ¥çš„é«˜æ•ˆå¼€å‘å’Œé«˜æ€§èƒ½æ¸²æŸ“èƒ½åŠ›äº†ï¼š</p><pre><code>//MainActivity.java\npublic class MainActivity extends AppCompatActivity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        View FlutterView = Flutter.createView(this, getLifecycle(), &quot;defaultRoute&quot;); \n        setContentView(FlutterView);\n    }\n}\n</code></pre><p>ä¸è¿‡<strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼Œä¸iOSæ’ä»¶å·¥ç¨‹çš„podspecèƒ½å¤Ÿæºå¸¦ç»„ä»¶ä¾èµ–ä¸åŒï¼ŒAndroidæ’ä»¶å·¥ç¨‹çš„å°è£…äº§ç‰©aaræœ¬èº«ä¸æºå¸¦ä»»ä½•é…ç½®ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œå¦‚æœæ’ä»¶å·¥ç¨‹æœ¬èº«å­˜åœ¨åŸç”Ÿä¾èµ–ï¼ˆåƒflutter_plugin_networkä¾èµ–OkHttpè¿™æ ·ï¼‰ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•é€šè¿‡aarå»å‘Šè¯‰åŸç”Ÿå·¥ç¨‹å…¶æ‰€éœ€çš„åŸç”Ÿä¾èµ–çš„ã€‚</p><p>é¢å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦åœ¨åŸç”Ÿå·¥ç¨‹ä¸­çš„build.gradleæ–‡ä»¶é‡Œæ‰‹åŠ¨åœ°å°†æ’ä»¶å·¥ç¨‹çš„ä¾èµ–ï¼ˆå³OkHttpï¼‰æ˜¾ç¤ºåœ°å£°æ˜å‡ºæ¥ã€‚</p><pre><code>//build.gradle\ndependencies {\n    ...\n    implementation(name: 'flutter-debug', ext: 'aar')\n    implementation(name: 'flutter_plugin_network-debug', ext: 'aar')\n    implementation &quot;com.squareup.okhttp3:okhttp:4.2.0&quot;\n    ...\n}\n</code></pre><p><strong>è‡³æ­¤ï¼Œå°†æ¨¡å—å·¥ç¨‹åŠå…¶æ’ä»¶ä¾èµ–å°è£…æˆåŸç”Ÿç»„ä»¶çš„å…¨éƒ¨å·¥ä½œå°±å®Œæˆäº†ï¼ŒåŸç”Ÿå·¥ç¨‹å¯ä»¥åƒä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„åŸç”Ÿç»„ä»¶ä¸€æ ·ï¼Œå»ä½¿ç”¨Flutteræ¨¡å—ç»„ä»¶çš„åŠŸèƒ½äº†ã€‚</strong></p><p>åœ¨Android Studioä¸­è¿è¡Œè¿™æ®µä»£ç ï¼Œå¹¶ç‚¹å‡»doRequestæŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŸç”ŸAndroidå·¥ç¨‹ä¸­æ­£å¸¸ä½¿ç”¨Flutterå°è£…çš„é¡µé¢ç»„ä»¶äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/54/f3/543a78c6839639a28b2eb9246c0196f3.png?wh=2060*1658\" alt=\"\"></p><center><span class=\"reference\">å›¾3 åŸç”ŸAndroidå·¥ç¨‹è¿è¡Œç¤ºä¾‹</span></center><p>å½“ç„¶ï¼Œè€ƒè™‘åˆ°æ‰‹åŠ¨å°è£…æ¨¡å—å·¥ç¨‹åŠå…¶æ„å»ºäº§ç‰©çš„è¿‡ç¨‹ï¼Œç¹çä¸”å®¹æ˜“å‡ºé”™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›æ­¥éª¤æŠ½è±¡æˆå‘½ä»¤è¡Œè„šæœ¬ï¼Œå¹¶æŠŠå®ƒéƒ¨ç½²åˆ°Travisä¸Šã€‚è¿™æ ·åœ¨Travisæ£€æµ‹åˆ°ä»£ç å˜æ›´ä¹‹åï¼Œå°±ä¼šè‡ªåŠ¨å°†Flutteræ¨¡å—çš„æ„å»ºäº§ç‰©å°è£…æˆåŸç”Ÿå·¥ç¨‹æœŸæœ›çš„ç»„ä»¶æ ¼å¼äº†ã€‚</p><p>å…³äºè¿™éƒ¨åˆ†å†…å®¹ï¼Œä½ å¯ä»¥å‚è€ƒæˆ‘åœ¨<a href=\"https://github.com/cyndibaby905/44_flutter_module_demo\">flutter_module_demo</a>é‡Œçš„<a href=\"https://github.com/cyndibaby905/44_flutter_module_demo/blob/master/generate_aars.sh\">generate_aars.sh</a>ä¸<a href=\"https://github.com/cyndibaby905/44_flutter_module_demo/blob/master/generate_pods.sh\">generate_pods.sh</a>å®ç°ã€‚å¦‚æœå…³äºè¿™éƒ¨åˆ†å†…å®¹æœ‰ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥ç›´æ¥ç•™è¨€ç»™æˆ‘ã€‚</p><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œå…³äºFlutteræ··åˆå¼€å‘æ¡†æ¶çš„ä¾èµ–ç®¡ç†éƒ¨åˆ†æˆ‘ä»¬å°±è®²åˆ°è¿™é‡Œã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·æ€»ç»“ä¸‹ä»Šå¤©çš„ä¸»è¦å†…å®¹å§ã€‚</p><p>Flutteræ¨¡å—å·¥ç¨‹çš„åŸç”Ÿç»„ä»¶å°è£…å½¢å¼æ˜¯aarï¼ˆAndroidï¼‰å’ŒFrameworkï¼ˆPodï¼‰ã€‚ä¸çº¯Flutteråº”ç”¨å·¥ç¨‹èƒ½å¤Ÿè‡ªåŠ¨ç®¡ç†æ’ä»¶çš„åŸç”Ÿä¾èµ–ä¸åŒï¼Œè¿™éƒ¨åˆ†å·¥ä½œåœ¨æ¨¡å—å·¥ç¨‹ä¸­æ˜¯å®Œå…¨äº¤ç»™åŸç”Ÿå·¥ç¨‹å»ç®¡ç†çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥æ‰¾è®°å½•äº†æ’ä»¶åç§°åŠç¼“å­˜è·¯å¾„æ˜ å°„å…³ç³»çš„.flutter-pluginsæ–‡ä»¶ï¼Œæå–å‡ºæ¯ä¸ªæ’ä»¶æ‰€å¯¹åº”çš„åŸç”Ÿç»„ä»¶å°è£…ï¼Œé›†æˆåˆ°åŸç”Ÿå·¥ç¨‹ä¸­ã€‚</p><p>ä»ä»Šå¤©çš„åˆ†äº«å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºæœ‰ç€æ’ä»¶ä¾èµ–çš„Androidç»„ä»¶å°è£…æ¥è¯´ï¼Œç”±äºaaræœ¬èº«å¹¶ä¸æºå¸¦ä»»ä½•é…ç½®ä¿¡æ¯ï¼Œå› æ­¤å…¶æ“ä½œä»¥æ‰‹å·¥ä¸ºä¸»ï¼šæˆ‘ä»¬ä¸ä»…è¦æ‰§è¡Œæ„å»ºå‘½ä»¤ä¾æ¬¡ç”Ÿæˆæ’ä»¶å¯¹åº”çš„aarï¼Œè¿˜éœ€è¦å°†æ’ä»¶è‡ªèº«çš„åŸç”Ÿä¾èµ–æ‹·è´è‡³åŸç”Ÿå·¥ç¨‹ï¼Œå…¶æ­¥éª¤ç›¸å¯¹iOSç»„ä»¶å°è£…æ¥è¯´è¦ç¹çä¸€äº›ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä¸šç•Œå‡ºç°äº†ä¸€ç§åä¸º<a href=\"https://github.com/adwiv/android-fat-aar\">fat-aar</a>çš„æ‰“åŒ…æ‰‹æ®µï¼Œå®ƒèƒ½å¤Ÿå°†æ¨¡å—å·¥ç¨‹æœ¬èº«ï¼ŒåŠå…¶ç›¸å…³çš„æ’ä»¶ä¾èµ–ç»Ÿä¸€æ‰“åŒ…æˆä¸€ä¸ªå¤§çš„aarï¼Œä»è€Œçœå»äº†ä¾èµ–éå†å’Œä¾èµ–å£°æ˜çš„è¿‡ç¨‹ï¼Œå®ç°äº†æ›´å¥½çš„åŠŸèƒ½è‡ªæ²»æ€§ã€‚ä½†è¿™ç§è§£å†³æ–¹æ¡ˆå­˜åœ¨ä¸€äº›è¾ƒä¸ºæ˜æ˜¾çš„ä¸è¶³ï¼š</p><ul>\n<li>ä¾èµ–å†²çªé—®é¢˜ã€‚å¦‚æœåŸç”Ÿå·¥ç¨‹ä¸æ’ä»¶å·¥ç¨‹éƒ½å¼•ç”¨äº†åŒæ ·çš„åŸç”Ÿä¾èµ–ç»„ä»¶ï¼ˆOkHttpï¼‰ï¼Œåˆ™åŸç”Ÿå·¥ç¨‹çš„ç»„ä»¶å¼•ç”¨å…¶ä¾èµ–æ—¶ä¼šäº§ç”Ÿåˆå¹¶å†²çªï¼Œå› æ­¤åœ¨å‘å¸ƒæ—¶å¿…é¡»æ‰‹åŠ¨å»æ‰åŸç”Ÿå·¥ç¨‹çš„ç»„ä»¶ä¾èµ–ã€‚</li>\n<li>åµŒå¥—ä¾èµ–é—®é¢˜ã€‚fat-aaråªä¼šå¤„ç†embeddedå…³é”®å­—æŒ‡å‘çš„è¿™å±‚ä¸€çº§ä¾èµ–ï¼Œè€Œä¸ä¼šå¤„ç†å†ä¸‹ä¸€å±‚çš„ä¾èµ–ã€‚å› æ­¤ï¼Œå¯¹äºä¾èµ–å…³ç³»å¤æ‚çš„æ’ä»¶æ”¯æŒï¼Œæˆ‘ä»¬ä»éœ€è¦æ‰‹åŠ¨å¤„ç†ä¾èµ–é—®é¢˜ã€‚</li>\n<li>Gradleç‰ˆæœ¬é™åˆ¶é—®é¢˜ã€‚fat-aaræ–¹æ¡ˆå¯¹Gradleæ’ä»¶ç‰ˆæœ¬æœ‰é™åˆ¶ï¼Œä¸”å®ç°æ–¹å¼å¹¶ä¸æ˜¯å®˜æ–¹è®¾è®¡è€ƒè™‘çš„ç‚¹ï¼ŒåŠ ä¹‹Gradle APIå˜æ›´è¾ƒå¿«ï¼Œæ‰€ä»¥å­˜åœ¨åç»­éš¾ä»¥ç»´æŠ¤çš„é—®é¢˜ã€‚</li>\n<li>å…¶ä»–æœªçŸ¥é—®é¢˜ã€‚fat-aaré¡¹ç›®å·²ç»ä¸å†ç»´æŠ¤äº†ï¼Œæœ€è¿‘ä¸€æ¬¡æ›´æ–°è¿˜æ˜¯2å¹´å‰ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨â€œå¹´ä¹…å¤±ä¿®â€çš„é¡¹ç›®å­˜åœ¨è¾ƒå¤§çš„é£é™©ã€‚</li>\n</ul><p>è€ƒè™‘åˆ°è¿™äº›å› ç´ ï¼Œfat-aarå¹¶ä¸æ˜¯ç®¡ç†æ’ä»¶å·¥ç¨‹ä¾èµ–çš„å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥<strong>æˆ‘ä»¬æœ€å¥½è¿˜æ˜¯å¾—è€è€å®å®åœ°å»éå†æ’ä»¶ä¾èµ–ï¼Œä»¥æŒç»­äº¤ä»˜çš„æ–¹å¼è‡ªåŠ¨åŒ–ç”Ÿæˆaarã€‚</strong></p><p>æˆ‘æŠŠä»Šå¤©åˆ†äº«æ¶‰åŠçŸ¥è¯†ç‚¹æ‰“åŒ…ä¸Šä¼ åˆ°äº†GitHubä¸­ï¼Œä½ å¯ä»¥æŠŠ<a href=\"https://github.com/cyndibaby905/44_flutter_plugin_network\">æ’ä»¶å·¥ç¨‹</a>ã€<a href=\"https://github.com/cyndibaby905/44_flutter_module_demo\">Flutteræ¨¡å—å·¥ç¨‹</a>ã€<a href=\"https://github.com/cyndibaby905/44_AndroidDemo\">åŸç”ŸAndroid</a>å’Œ<a href=\"https://github.com/cyndibaby905/44_iOSDemo\">iOSå·¥ç¨‹</a>ä¸‹è½½ä¸‹æ¥ï¼ŒæŸ¥çœ‹å…¶TravisæŒç»­äº¤ä»˜é…ç½®æ–‡ä»¶çš„æ„å»ºæ‰§è¡Œå‘½ä»¤ï¼Œä½“ä¼šåœ¨æ··åˆæ¡†æ¶ä¸­å¦‚ä½•ç®¡ç†è·¨æŠ€æœ¯æ ˆçš„ç»„ä»¶ä¾èµ–ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜å§ã€‚</p><p>åŸç”Ÿæ’ä»¶çš„å¼€å‘æ˜¯ä¸€ä¸ªéœ€è¦Dartå±‚ä»£ç å°è£…ï¼Œä»¥åŠåŸç”ŸAndroidã€iOSä»£ç å±‚å®ç°çš„é•¿é“¾è·¯è¿‡ç¨‹ã€‚å¦‚æœéœ€è¦æ”¯æŒçš„åŸºç¡€èƒ½åŠ›è¾ƒå¤šï¼Œå¼€å‘æ’ä»¶çš„è¿‡ç¨‹å°±ä¼šå˜å¾—ç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚æˆ‘ä»¬éƒ½çŸ¥é“Dartæ˜¯ä¸æ”¯æŒåå°„çš„ï¼Œä½†æ˜¯åŸç”Ÿä»£ç å¯ä»¥ã€‚æˆ‘ä»¬æ˜¯å¦å¯ä»¥åˆ©ç”¨åŸç”Ÿçš„åå°„å»å®ç°æ’ä»¶å®šä¹‰çš„æ ‡å‡†åŒ–å‘¢ï¼Ÿ</p><p>æç¤ºï¼šåœ¨Dartå±‚è°ƒç”¨ä¸å­˜åœ¨çš„æ¥å£ï¼ˆæˆ–æœªå®ç°çš„æ¥å£ï¼‰ï¼Œå¯ä»¥é€šè¿‡noSuchMethodæ–¹æ³•è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚</p><pre><code>class FlutterPluginDemo {\n  //æ–¹æ³•é€šé“\n  static const MethodChannel _channel =\n      const MethodChannel('flutter_plugin_demo');\n  //å½“è°ƒç”¨ä¸å­˜åœ¨æ¥å£æ—¶ï¼ŒDartä¼šäº¤ç”±è¯¥æ–¹æ³•è¿›è¡Œç»Ÿä¸€å¤„ç†\n  @override\n  Future&lt;dynamic&gt; noSuchMethod(Invocation invocation) {\n    //ä»å­—ç¬¦ä¸²Symbol(&quot;methodName&quot;)ä¸­å–å‡ºæ–¹æ³•å\n    String methodName = invocation.memberName.toString().substring(8, string.length - 2);\n    //å‚æ•°\n    dynamic args = invocation.positionalArguments;\n    print('methodName:$methodName');\n    print('args:$args');\n    return methodTemplate(methodName, args);\n  }\n  \n  //æŸæœªå®ç°çš„æ–¹æ³•\n  Future&lt;dynamic&gt; someMethodNotImplemented();\n  //æŸæœªå®ç°çš„å¸¦å‚æ•°æ–¹æ³•\n  Future&lt;dynamic&gt; someMethodNotImplementedWithParameter(param);\n}\n</code></pre><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç­‰å¾…ä½ ï¼æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","neighbors":{"left":{"article_title":"43 | å¦‚ä½•æ„å»ºè‡ªå·±çš„Flutteræ··åˆå¼€å‘æ¡†æ¶ï¼ˆä¸€ï¼‰ï¼Ÿ","id":144221},"right":{"article_title":"ç»“æŸè¯­ | å‹¿ç•éš¾ï¼Œå‹¿è½»ç•¥","id":146463}},"comments":[{"had_liked":false,"id":166518,"user_name":"æ—¶å…‰å¿µä½ ","can_delete":false,"product_type":"c1","uid":1051653,"ip_address":"","ucode":"1F19ECFBE58280","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/05/3e2b8688.jpg","comment_is_top":false,"comment_ctime":1577462603,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5872429899","product_id":100031001,"comment_content":"æ‹¿iOSæ¥è¯´å§ï¼Œå®šä¹‰ä¸€ä¸ªå•ä¾‹pluginï¼Œæ¯æ¬¡flutterè°ƒç”¨nativeï¼Œéƒ½å»è°ƒç”¨å•ä¾‹pluginï¼Œflutterçš„argumentså‚æ•°ä¼šä¼ é€’ä¸€ä¸ªmapå¯¹è±¡ï¼ŒåŒ…å«methodNameå’Œè‡ªå®šä¹‰çš„argumentsã€‚iOSç«¯åˆ©ç”¨runtimeï¼Œé€šè¿‡æ³¨å†Œæœºåˆ¶ï¼Œå°†methodNameå’ŒæŸä¸€ä¸ªclassè¿›è¡Œå…³ç³»ç»‘å®šï¼Œå­˜å…¥å•ä¾‹pluginå¯¹è±¡å†…éƒ¨ã€‚å½“flutterè°ƒç”¨nativeï¼ŒiOSç«¯å°±ä¼šåˆå§‹åŒ–ä¸€ä¸ªå¯¹åº”çš„classå®ä¾‹å¯¹è±¡å¹¶æŠŠå‚æ•°å’ŒresultBlockä¼ é€’ç»™å®ƒï¼Œå½“è¯¥å¯¹è±¡æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œè°ƒç”¨resultBlockæŠŠç»“æœå›ä¼ ç»™flutterã€‚","like_count":1},{"had_liked":false,"id":297995,"user_name":"Geek_Javy","can_delete":false,"product_type":"c1","uid":1473338,"ip_address":"","ucode":"04451AF7CFDCB3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq6LGLtCCNoIZ9jUJ0uBmedrVrdgZy2wXficALJPGtPpFagbJicb3CWesvXqfzsVYMLemiaJDRqyLRqA/132","comment_is_top":false,"comment_ctime":1623865220,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1623865220","product_id":100031001,"comment_content":"æ··ç¼–çš„é¡¹ç›®ç¼–è¯‘å¾ˆæ…¢å•Šï¼Œç›®å‰æˆ‘çš„androidé¡¹ç›®ç¼–è¯‘ä¸€æ¬¡ååˆ†é’Ÿæœ‰æ²¡æœ‰æ–¹æ³•å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":292214,"user_name":"Geek_cc0a3b","can_delete":false,"product_type":"c1","uid":1442156,"ip_address":"","ucode":"8D6C16AC4A9ED0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6ADlY3IFt3Rs1aVDyrTO2BiaV8wiabypPwbXhbPcyqicCvnTV9lUYHULVqUab7ww4taX5QbmFyatLQ/132","comment_is_top":false,"comment_ctime":1620722751,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620722751","product_id":100031001,"comment_content":"è¿™ç§æ¶æ„åº”è¯¥æ˜¯ç”±ä¸‰ä¸ªé¡¹ç›®ï¼šnativeã€flutter moduleã€flutter pluginï¼Œå¦‚ä½•debugå‘¢ï¼Œæ¯”å¦‚ä»nativeå±‚debugåˆ°flutter pluginï¼Œæ²¡æˆåŠŸã€‚","like_count":0},{"had_liked":false,"id":224984,"user_name":"å­¦ä¼šã€†å¿˜è®°","can_delete":false,"product_type":"c1","uid":1165947,"ip_address":"","ucode":"A6028589053BEE","user_header":"https://static001.geekbang.org/account/avatar/00/11/ca/7b/03407725.jpg","comment_is_top":false,"comment_ctime":1591609795,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591609795","product_id":100031001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸‹iOSå·¥ç¨‹ä¸­çš„App.frameworkå’Œç±»ä¼¼fluttertoastï¼Œåªèƒ½ä»Flutterå·¥ç¨‹é‡Œé¢æ‹·è´å‡ºæ¥å—ï¼Ÿæœ‰æ²¡æœ‰å¥½ä¸€ç‚¹çš„æ–¹æ³•ï¼Œå› ä¸ºæˆ‘iOSå·¥ç¨‹å·²ç»æ˜¯ç»„ä»¶åŒ–äº†ï¼Œæˆ‘ç°åœ¨æŠŠFlutterå½“æˆäº†å…¶ä¸­ä¸€ä¸ªå­ç»„ä»¶","like_count":0},{"had_liked":false,"id":218762,"user_name":"è‚–","can_delete":false,"product_type":"c1","uid":1529343,"ip_address":"","ucode":"763D0C2871B92F","user_header":"https://static001.geekbang.org/account/avatar/00/17/55/ff/1489d0fb.jpg","comment_is_top":false,"comment_ctime":1589870498,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589870498","product_id":100031001,"comment_content":"flutter è°ƒç”¨è…¾è®¯Tim  å‘é€è§†é¢‘ï¼ŒåŸç”Ÿæ€ä¹ˆæŠŠè¿›åº¦ä¼ å›ç»™flutterçš„æ¯ä¸€ä¸ªmessageå‘¢ï¼Ÿè¯·è€å¸ˆæŒ‡æ•™","like_count":0},{"had_liked":false,"id":214490,"user_name":"éª‘ç€ğŸš€çœ‹é“¶æ²³","can_delete":false,"product_type":"c1","uid":1074734,"ip_address":"","ucode":"8706A99A89F0CE","user_header":"https://static001.geekbang.org/account/avatar/00/10/66/2e/527b73c9.jpg","comment_is_top":false,"comment_ctime":1588757874,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1588757874","product_id":100031001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ‰flutterå®Œæ•´å®è·µä¸€ä¸ªAppçš„ç»éªŒå—ï¼Œä¸€ä¸ªå°çš„é¡¹ç›®ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯éœ€è¦æŠŠå¸¸è§çš„åŠŸèƒ½æå®šï¼Œæˆ–è€…æ¨èä¸€ä¸ªè¿™æ ·çš„æ¡ˆä¾‹å­¦ä¹ ä¹Ÿå¯ä»¥","like_count":0},{"had_liked":false,"id":161026,"user_name":"å¤©ç©º","can_delete":false,"product_type":"c1","uid":1121156,"ip_address":"","ucode":"761E84AF9EE8EA","user_header":"https://static001.geekbang.org/account/avatar/00/11/1b/84/76ca98cc.jpg","comment_is_top":false,"comment_ctime":1576085105,"is_pvip":false,"replies":[{"id":"63395","content":"1.moduleæ‰“åŒ…æˆaarå°±å¯ä»¥ä»¥åŸç”ŸæŠ€æœ¯æ ˆçš„æ–¹å¼é›†æˆåˆ°ç°æœ‰appå•Šï¼›<br>2.ä¸è¡Œï¼Œéœ€è¦æ”¹æˆmodule","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1577438646,"ip_address":"","comment_id":161026,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1576085105","product_id":100031001,"comment_content":"flutter moduleä¸­.android æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œ æ‰“åŒ…aaræœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ  ä¸€ä¸ªflutter projectå¯ä»¥æ‰“æˆaar é›†æˆåˆ°åŸç”Ÿå·¥ç¨‹é‡Œé¢å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477576,"discussion_content":"1.moduleæ‰“åŒ…æˆaarå°±å¯ä»¥ä»¥åŸç”ŸæŠ€æœ¯æ ˆçš„æ–¹å¼é›†æˆåˆ°ç°æœ‰appå•Šï¼›\n2.ä¸è¡Œï¼Œéœ€è¦æ”¹æˆmodule","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577438646,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139123,"user_name":"å¤©ç©º","can_delete":false,"product_type":"c1","uid":1121823,"ip_address":"","ucode":"4760B5C8A34F30","user_header":"https://static001.geekbang.org/account/avatar/00/11/1e/1f/e3c13f29.jpg","comment_is_top":false,"comment_ctime":1570549625,"is_pvip":false,"replies":[{"id":"53649","content":"åˆ†æ”¯åã€tagåã€commitéƒ½æ˜¯å¯ä»¥çš„ï¼š<br>dependencies:<br>  XXXX:<br>    git:<br>      url: git:&#47;&#47;github.com&#47;cyndibaby905&#47;XXXX.git<br>      ref: some-branch or some-tag or commit <br>","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1570590004,"ip_address":"","comment_id":139123,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570549625","product_id":100031001,"comment_content":"ä¾èµ–æ’ä»¶ä¸ºgitæ—¶èƒ½å£°æ˜åˆ†æ”¯æˆ–è€…tagç‰ˆæœ¬ä»€ä¹ˆçš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469802,"discussion_content":"åˆ†æ”¯åã€tagåã€commitéƒ½æ˜¯å¯ä»¥çš„ï¼š\ndependencies:\n  XXXX:\n    git:\n      url: git://github.com/cyndibaby905/XXXX.git\n      ref: some-branch or some-tag or commit \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570590004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":139031,"user_name":"Element","can_delete":false,"product_type":"c1","uid":1155609,"ip_address":"","ucode":"31FE7C1CB7BBE6","user_header":"https://static001.geekbang.org/account/avatar/00/11/a2/19/3f71c4e8.jpg","comment_is_top":false,"comment_ctime":1570529975,"is_pvip":false,"replies":[{"id":"53559","content":"å¯ä»¥çš„å“¦ï¼Œæœ¬åœ°è·¯å¾„ã€gitåœ°å€å’Œç‰ˆæœ¬çš„æ–¹å¼éƒ½å¯ä»¥ï¼Œå…·ä½“å¯ä»¥å‚è€ƒç¬¬18ç¯‡åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1570534867,"ip_address":"","comment_id":139031,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1570529975","product_id":100031001,"comment_content":"è€å¸ˆå¥½, æ¨¡å—å·¥ç¨‹ä¾èµ–æ’ä»¶é…ç½®è¿™å—: flutter_plugin_network:<br>    git:<br>      url: https:&#47;&#47;github.com&#47;cyndibaby905&#47;44_flutter_plugin_network.git<br>å¹³æ—¶å¼€å‘å°±éœ€è¦å°†æ’ä»¶ä¸Šä¼ åˆ°githubç„¶åè¿™æ ·é…ç½®ä¾èµ–å—? èƒ½ä¸èƒ½ç›´æ¥åœ¨æœ¬åœ°ä¾èµ–æ’ä»¶?","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":469757,"discussion_content":"å¯ä»¥çš„å“¦ï¼Œæœ¬åœ°è·¯å¾„ã€gitåœ°å€å’Œç‰ˆæœ¬çš„æ–¹å¼éƒ½å¯ä»¥ï¼Œå…·ä½“å¯ä»¥å‚è€ƒç¬¬18ç¯‡åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570534867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}