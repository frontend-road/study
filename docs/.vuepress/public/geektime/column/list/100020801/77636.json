{"id":77636,"title":"28 | è¯»å†™åˆ†ç¦»æœ‰å“ªäº›å‘ï¼Ÿ","content":"<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ ä»‹ç»äº†ä¸€ä¸»å¤šä»çš„ç»“æ„ä»¥åŠåˆ‡æ¢æµç¨‹ã€‚ä»Šå¤©æˆ‘ä»¬å°±ç»§ç»­èŠèŠä¸€ä¸»å¤šä»æ¶æ„çš„åº”ç”¨åœºæ™¯ï¼šè¯»å†™åˆ†ç¦»ï¼Œä»¥åŠæ€ä¹ˆå¤„ç†ä¸»å¤‡å»¶è¿Ÿå¯¼è‡´çš„è¯»å†™åˆ†ç¦»é—®é¢˜ã€‚</p><p>æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æåˆ°çš„ä¸€ä¸»å¤šä»çš„ç»“æ„ï¼Œå…¶å®å°±æ˜¯è¯»å†™åˆ†ç¦»çš„åŸºæœ¬ç»“æ„äº†ã€‚è¿™é‡Œï¼Œæˆ‘å†æŠŠè¿™å¼ å›¾è´´è¿‡æ¥ï¼Œæ–¹ä¾¿ä½ ç†è§£ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/13/aa/1334b9c08b8fd837832fdb2d82e6b0aa.png?wh=1142*637\" alt=\"\"></p><center><span class=\"reference\">å›¾1 è¯»å†™åˆ†ç¦»åŸºæœ¬ç»“æ„</span></center><p>è¯»å†™åˆ†ç¦»çš„ä¸»è¦ç›®æ ‡å°±æ˜¯åˆ†æ‘Šä¸»åº“çš„å‹åŠ›ã€‚å›¾1ä¸­çš„ç»“æ„æ˜¯å®¢æˆ·ç«¯ï¼ˆclientï¼‰ä¸»åŠ¨åšè´Ÿè½½å‡è¡¡ï¼Œè¿™ç§æ¨¡å¼ä¸‹ä¸€èˆ¬ä¼šæŠŠæ•°æ®åº“çš„è¿æ¥ä¿¡æ¯æ”¾åœ¨å®¢æˆ·ç«¯çš„è¿æ¥å±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±å®¢æˆ·ç«¯æ¥é€‰æ‹©åç«¯æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ã€‚</p><p>è¿˜æœ‰ä¸€ç§æ¶æ„æ˜¯ï¼Œåœ¨MySQLå’Œå®¢æˆ·ç«¯ä¹‹é—´æœ‰ä¸€ä¸ªä¸­é—´ä»£ç†å±‚proxyï¼Œå®¢æˆ·ç«¯åªè¿æ¥proxyï¼Œ ç”±proxyæ ¹æ®è¯·æ±‚ç±»å‹å’Œä¸Šä¸‹æ–‡å†³å®šè¯·æ±‚çš„åˆ†å‘è·¯ç”±ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/45/1b1ea74a48e1a16409e9b4d02172b945.jpg?wh=1142*668\" alt=\"\"></p><center><span class=\"reference\">å›¾2 å¸¦proxyçš„è¯»å†™åˆ†ç¦»æ¶æ„</span></center><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±çœ‹ä¸€ä¸‹å®¢æˆ·ç«¯ç›´è¿å’Œå¸¦proxyçš„è¯»å†™åˆ†ç¦»æ¶æ„ï¼Œå„æœ‰å“ªäº›ç‰¹ç‚¹ã€‚</p><ol>\n<li>\n<p>å®¢æˆ·ç«¯ç›´è¿æ–¹æ¡ˆï¼Œå› ä¸ºå°‘äº†ä¸€å±‚proxyè½¬å‘ï¼Œæ‰€ä»¥æŸ¥è¯¢æ€§èƒ½ç¨å¾®å¥½ä¸€ç‚¹å„¿ï¼Œå¹¶ä¸”æ•´ä½“æ¶æ„ç®€å•ï¼Œæ’æŸ¥é—®é¢˜æ›´æ–¹ä¾¿ã€‚ä½†æ˜¯è¿™ç§æ–¹æ¡ˆï¼Œç”±äºè¦äº†è§£åç«¯éƒ¨ç½²ç»†èŠ‚ï¼Œæ‰€ä»¥åœ¨å‡ºç°ä¸»å¤‡åˆ‡æ¢ã€åº“è¿ç§»ç­‰æ“ä½œçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯éƒ½ä¼šæ„ŸçŸ¥åˆ°ï¼Œå¹¶ä¸”éœ€è¦è°ƒæ•´æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚<br>\nä½ å¯èƒ½ä¼šè§‰å¾—è¿™æ ·å®¢æˆ·ç«¯ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œä¿¡æ¯å¤§é‡å†—ä½™ï¼Œæ¶æ„å¾ˆä¸‘ã€‚å…¶å®ä¹Ÿæœªå¿…ï¼Œä¸€èˆ¬é‡‡ç”¨è¿™æ ·çš„æ¶æ„ï¼Œä¸€å®šä¼šä¼´éšä¸€ä¸ªè´Ÿè´£ç®¡ç†åç«¯çš„ç»„ä»¶ï¼Œæ¯”å¦‚Zookeeperï¼Œå°½é‡è®©ä¸šåŠ¡ç«¯åªä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å¼€å‘ã€‚</p>\n</li>\n<li>\n<p>å¸¦proxyçš„æ¶æ„ï¼Œå¯¹å®¢æˆ·ç«¯æ¯”è¾ƒå‹å¥½ã€‚å®¢æˆ·ç«¯ä¸éœ€è¦å…³æ³¨åç«¯ç»†èŠ‚ï¼Œè¿æ¥ç»´æŠ¤ã€åç«¯ä¿¡æ¯ç»´æŠ¤ç­‰å·¥ä½œï¼Œéƒ½æ˜¯ç”±proxyå®Œæˆçš„ã€‚ä½†è¿™æ ·çš„è¯ï¼Œå¯¹åç«¯ç»´æŠ¤å›¢é˜Ÿçš„è¦æ±‚ä¼šæ›´é«˜ã€‚è€Œä¸”ï¼Œproxyä¹Ÿéœ€è¦æœ‰é«˜å¯ç”¨æ¶æ„ã€‚å› æ­¤ï¼Œå¸¦proxyæ¶æ„çš„æ•´ä½“å°±ç›¸å¯¹æ¯”è¾ƒå¤æ‚ã€‚</p>\n</li>\n</ol><!-- [[[read_end]]] --><p>ç†è§£äº†è¿™ä¸¤ç§æ–¹æ¡ˆçš„ä¼˜åŠ£ï¼Œå…·ä½“é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆå°±å–å†³äºæ•°æ®åº“å›¢é˜Ÿæä¾›çš„èƒ½åŠ›äº†ã€‚ä½†ç›®å‰çœ‹ï¼Œè¶‹åŠ¿æ˜¯å¾€å¸¦proxyçš„æ¶æ„æ–¹å‘å‘å±•çš„ã€‚</p><p>ä½†æ˜¯ï¼Œä¸è®ºä½¿ç”¨å“ªç§æ¶æ„ï¼Œä½ éƒ½ä¼šç¢°åˆ°æˆ‘ä»¬ä»Šå¤©è¦è®¨è®ºçš„é—®é¢˜ï¼šç”±äºä¸»ä»å¯èƒ½å­˜åœ¨å»¶è¿Ÿï¼Œå®¢æˆ·ç«¯æ‰§è¡Œå®Œä¸€ä¸ªæ›´æ–°äº‹åŠ¡åé©¬ä¸Šå‘èµ·æŸ¥è¯¢ï¼Œå¦‚æœæŸ¥è¯¢é€‰æ‹©çš„æ˜¯ä»åº“çš„è¯ï¼Œå°±æœ‰å¯èƒ½è¯»åˆ°åˆšåˆšçš„äº‹åŠ¡æ›´æ–°ä¹‹å‰çš„çŠ¶æ€ã€‚</p><p><strong>è¿™ç§â€œåœ¨ä»åº“ä¸Šä¼šè¯»åˆ°ç³»ç»Ÿçš„ä¸€ä¸ªè¿‡æœŸçŠ¶æ€â€çš„ç°è±¡ï¼Œåœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬æš‚ä¸”ç§°ä¹‹ä¸ºâ€œè¿‡æœŸè¯»â€ã€‚</strong></p><p>å‰é¢æˆ‘ä»¬è¯´è¿‡äº†å‡ ç§å¯èƒ½å¯¼è‡´ä¸»å¤‡å»¶è¿Ÿçš„åŸå› ï¼Œä»¥åŠå¯¹åº”çš„ä¼˜åŒ–ç­–ç•¥ï¼Œä½†æ˜¯ä¸»ä»å»¶è¿Ÿè¿˜æ˜¯ä¸èƒ½100%é¿å…çš„ã€‚</p><p>ä¸è®ºå“ªç§ç»“æ„ï¼Œå®¢æˆ·ç«¯éƒ½å¸Œæœ›æŸ¥è¯¢ä»åº“çš„æ•°æ®ç»“æœï¼Œè·ŸæŸ¥ä¸»åº“çš„æ•°æ®ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥è®¨è®ºæ€ä¹ˆå¤„ç†è¿‡æœŸè¯»é—®é¢˜ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘å…ˆæŠŠæ–‡ç« ä¸­æ¶‰åŠåˆ°çš„å¤„ç†è¿‡æœŸè¯»çš„æ–¹æ¡ˆæ±‡æ€»åœ¨è¿™é‡Œï¼Œä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡å…¨æ–‡çš„çŸ¥è¯†è„‰ç»œã€‚è¿™äº›æ–¹æ¡ˆåŒ…æ‹¬ï¼š</p><ul>\n<li>å¼ºåˆ¶èµ°ä¸»åº“æ–¹æ¡ˆï¼›</li>\n<li>sleepæ–¹æ¡ˆï¼›</li>\n<li>åˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿæ–¹æ¡ˆï¼›</li>\n<li>é…åˆsemi-syncæ–¹æ¡ˆï¼›</li>\n<li>ç­‰ä¸»åº“ä½ç‚¹æ–¹æ¡ˆï¼›</li>\n<li>ç­‰GTIDæ–¹æ¡ˆã€‚</li>\n</ul><h1>å¼ºåˆ¶èµ°ä¸»åº“æ–¹æ¡ˆ</h1><p>å¼ºåˆ¶èµ°ä¸»åº“æ–¹æ¡ˆå…¶å®å°±æ˜¯ï¼Œå°†æŸ¥è¯¢è¯·æ±‚åšåˆ†ç±»ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸ¥è¯¢è¯·æ±‚åˆ†ä¸ºè¿™ä¹ˆä¸¤ç±»ï¼š</p><ol>\n<li>\n<p>å¯¹äºå¿…é¡»è¦æ‹¿åˆ°æœ€æ–°ç»“æœçš„è¯·æ±‚ï¼Œå¼ºåˆ¶å°†å…¶å‘åˆ°ä¸»åº“ä¸Šã€‚æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªäº¤æ˜“å¹³å°ä¸Šï¼Œå–å®¶å‘å¸ƒå•†å“ä»¥åï¼Œé©¬ä¸Šè¦è¿”å›ä¸»é¡µé¢ï¼Œçœ‹å•†å“æ˜¯å¦å‘å¸ƒæˆåŠŸã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªè¯·æ±‚éœ€è¦æ‹¿åˆ°æœ€æ–°çš„ç»“æœï¼Œå°±å¿…é¡»èµ°ä¸»åº“ã€‚</p>\n</li>\n<li>\n<p>å¯¹äºå¯ä»¥è¯»åˆ°æ—§æ•°æ®çš„è¯·æ±‚ï¼Œæ‰å°†å…¶å‘åˆ°ä»åº“ä¸Šã€‚åœ¨è¿™ä¸ªäº¤æ˜“å¹³å°ä¸Šï¼Œä¹°å®¶æ¥é€›å•†é“ºé¡µé¢ï¼Œå°±ç®—æ™šå‡ ç§’çœ‹åˆ°æœ€æ–°å‘å¸ƒçš„å•†å“ï¼Œä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚é‚£ä¹ˆï¼Œè¿™ç±»è¯·æ±‚å°±å¯ä»¥èµ°ä»åº“ã€‚</p>\n</li>\n</ol><p>ä½ å¯èƒ½ä¼šè¯´ï¼Œè¿™ä¸ªæ–¹æ¡ˆæ˜¯ä¸æ˜¯æœ‰ç‚¹ç•éš¾å’Œå–å·§çš„æ„æ€ï¼Œä½†å…¶å®è¿™ä¸ªæ–¹æ¡ˆæ˜¯ç”¨å¾—æœ€å¤šçš„ã€‚</p><p>å½“ç„¶ï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ€å¤§çš„é—®é¢˜åœ¨äºï¼Œæœ‰æ—¶å€™ä½ ä¼šç¢°åˆ°â€œæ‰€æœ‰æŸ¥è¯¢éƒ½ä¸èƒ½æ˜¯è¿‡æœŸè¯»â€çš„éœ€æ±‚ï¼Œæ¯”å¦‚ä¸€äº›é‡‘èç±»çš„ä¸šåŠ¡ã€‚è¿™æ ·çš„è¯ï¼Œä½ å°±è¦æ”¾å¼ƒè¯»å†™åˆ†ç¦»ï¼Œæ‰€æœ‰è¯»å†™å‹åŠ›éƒ½åœ¨ä¸»åº“ï¼Œç­‰åŒäºæ”¾å¼ƒäº†æ‰©å±•æ€§ã€‚</p><p>å› æ­¤æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥è®¨è®ºçš„è¯é¢˜æ˜¯ï¼šå¯ä»¥æ”¯æŒè¯»å†™åˆ†ç¦»çš„åœºæ™¯ä¸‹ï¼Œæœ‰å“ªäº›è§£å†³è¿‡æœŸè¯»çš„æ–¹æ¡ˆï¼Œå¹¶åˆ†æå„ä¸ªæ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ã€‚</p><h1>Sleep æ–¹æ¡ˆ</h1><p>ä¸»åº“æ›´æ–°åï¼Œè¯»ä»åº“ä¹‹å‰å…ˆsleepä¸€ä¸‹ã€‚å…·ä½“çš„æ–¹æ¡ˆå°±æ˜¯ï¼Œç±»ä¼¼äºæ‰§è¡Œä¸€æ¡select sleep(1)å‘½ä»¤ã€‚</p><p>è¿™ä¸ªæ–¹æ¡ˆçš„å‡è®¾æ˜¯ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸»å¤‡å»¶è¿Ÿåœ¨1ç§’ä¹‹å†…ï¼Œåšä¸€ä¸ªsleepå¯ä»¥æœ‰å¾ˆå¤§æ¦‚ç‡æ‹¿åˆ°æœ€æ–°çš„æ•°æ®ã€‚</p><p>è¿™ä¸ªæ–¹æ¡ˆç»™ä½ çš„ç¬¬ä¸€æ„Ÿè§‰ï¼Œå¾ˆå¯èƒ½æ˜¯ä¸é è°±å„¿ï¼Œåº”è¯¥ä¸ä¼šæœ‰äººç”¨å§ï¼Ÿå¹¶ä¸”ï¼Œä½ è¿˜å¯èƒ½ä¼šè¯´ï¼Œç›´æ¥åœ¨å‘èµ·æŸ¥è¯¢æ—¶å…ˆæ‰§è¡Œä¸€æ¡sleepè¯­å¥ï¼Œç”¨æˆ·ä½“éªŒå¾ˆä¸å‹å¥½å•Šã€‚</p><p>ä½†ï¼Œè¿™ä¸ªæ€è·¯ç¡®å®å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³é—®é¢˜ã€‚ä¸ºäº†çœ‹èµ·æ¥æ›´é è°±å„¿ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ä¸€ç§æ–¹å¼ã€‚</p><p>ä»¥å–å®¶å‘å¸ƒå•†å“ä¸ºä¾‹ï¼Œå•†å“å‘å¸ƒåï¼Œç”¨Ajaxï¼ˆAsynchronous JavaScript + XMLï¼Œå¼‚æ­¥JavaScriptå’ŒXMLï¼‰ç›´æ¥æŠŠå®¢æˆ·ç«¯è¾“å…¥çš„å†…å®¹ä½œä¸ºâ€œæ–°çš„å•†å“â€æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œè€Œä¸æ˜¯çœŸæ­£åœ°å»æ•°æ®åº“åšæŸ¥è¯¢ã€‚</p><p>è¿™æ ·ï¼Œå–å®¶å°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ˜¾ç¤ºï¼Œæ¥ç¡®è®¤äº§å“å·²ç»å‘å¸ƒæˆåŠŸäº†ã€‚ç­‰åˆ°å–å®¶å†åˆ·æ–°é¡µé¢ï¼Œå»æŸ¥çœ‹å•†å“çš„æ—¶å€™ï¼Œå…¶å®å·²ç»è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿå°±è¾¾åˆ°äº†sleepçš„ç›®çš„ï¼Œè¿›è€Œä¹Ÿå°±è§£å†³äº†è¿‡æœŸè¯»çš„é—®é¢˜ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªsleepæ–¹æ¡ˆç¡®å®è§£å†³äº†ç±»ä¼¼åœºæ™¯ä¸‹çš„è¿‡æœŸè¯»é—®é¢˜ã€‚ä½†ï¼Œä»ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œè¿™ä¸ªæ–¹æ¡ˆå­˜åœ¨çš„é—®é¢˜å°±æ˜¯ä¸ç²¾ç¡®ã€‚è¿™ä¸ªä¸ç²¾ç¡®åŒ…å«äº†ä¸¤å±‚æ„æ€ï¼š</p><ol>\n<li>\n<p>å¦‚æœè¿™ä¸ªæŸ¥è¯¢è¯·æ±‚æœ¬æ¥0.5ç§’å°±å¯ä»¥åœ¨ä»åº“ä¸Šæ‹¿åˆ°æ­£ç¡®ç»“æœï¼Œä¹Ÿä¼šç­‰1ç§’ï¼›</p>\n</li>\n<li>\n<p>å¦‚æœå»¶è¿Ÿè¶…è¿‡1ç§’ï¼Œè¿˜æ˜¯ä¼šå‡ºç°è¿‡æœŸè¯»ã€‚</p>\n</li>\n</ol><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯æœ‰ä¸€ç§â€œä½ æ˜¯ä¸æ˜¯åœ¨é€—æˆ‘â€çš„æ„Ÿè§‰ï¼Œè¿™ä¸ªæ”¹è¿›æ–¹æ¡ˆè™½ç„¶å¯ä»¥è§£å†³ç±»ä¼¼Ajaxåœºæ™¯ä¸‹çš„è¿‡æœŸè¯»é—®é¢˜ï¼Œä½†è¿˜æ˜¯æ€ä¹ˆçœ‹éƒ½ä¸é è°±å„¿ã€‚åˆ«ç€æ€¥ï¼Œæ¥ä¸‹æ¥æˆ‘å°±å’Œä½ ä»‹ç»ä¸€äº›æ›´å‡†ç¡®çš„æ–¹æ¡ˆã€‚</p><h1>åˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿæ–¹æ¡ˆ</h1><p>è¦ç¡®ä¿å¤‡åº“æ— å»¶è¿Ÿï¼Œé€šå¸¸æœ‰ä¸‰ç§åšæ³•ã€‚</p><p>é€šè¿‡å‰é¢çš„<a href=\"https://time.geekbang.org/column/article/76795\">ç¬¬25ç¯‡</a>æ–‡ç« ï¼Œæˆ‘ä»¬çŸ¥é“show slave statusç»“æœé‡Œçš„seconds_behind_masterå‚æ•°çš„å€¼ï¼Œå¯ä»¥ç”¨æ¥è¡¡é‡ä¸»å¤‡å»¶è¿Ÿæ—¶é—´çš„é•¿çŸ­ã€‚</p><p>æ‰€ä»¥<strong>ç¬¬ä¸€ç§ç¡®ä¿ä¸»å¤‡æ— å»¶è¿Ÿçš„æ–¹æ³•æ˜¯ï¼Œ</strong>æ¯æ¬¡ä»åº“æ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚å‰ï¼Œå…ˆåˆ¤æ–­seconds_behind_masteræ˜¯å¦å·²ç»ç­‰äº0ã€‚å¦‚æœè¿˜ä¸ç­‰äº0 ï¼Œé‚£å°±å¿…é¡»ç­‰åˆ°è¿™ä¸ªå‚æ•°å˜ä¸º0æ‰èƒ½æ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚ã€‚</p><p>seconds_behind_masterçš„å•ä½æ˜¯ç§’ï¼Œå¦‚æœä½ è§‰å¾—ç²¾åº¦ä¸å¤Ÿçš„è¯ï¼Œè¿˜å¯ä»¥é‡‡ç”¨å¯¹æ¯”ä½ç‚¹å’ŒGTIDçš„æ–¹æ³•æ¥ç¡®ä¿ä¸»å¤‡æ— å»¶è¿Ÿï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦è¯´çš„ç¬¬äºŒå’Œç¬¬ä¸‰ç§æ–¹æ³•ã€‚</p><p>å¦‚å›¾3æ‰€ç¤ºï¼Œæ˜¯ä¸€ä¸ªshow slave statusç»“æœçš„éƒ¨åˆ†æˆªå›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/00/c1/00110923007513e865d7f43a124887c1.png?wh=1331*368\" alt=\"\"></p><center><span class=\"reference\">å›¾3 show slave statusç»“æœ</span></center><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±é€šè¿‡è¿™ä¸ªç»“æœï¼Œæ¥çœ‹çœ‹å…·ä½“å¦‚ä½•é€šè¿‡å¯¹æ¯”ä½ç‚¹å’ŒGTIDæ¥ç¡®ä¿ä¸»å¤‡æ— å»¶è¿Ÿã€‚</p><p><strong>ç¬¬äºŒç§æ–¹æ³•ï¼Œ</strong>å¯¹æ¯”ä½ç‚¹ç¡®ä¿ä¸»å¤‡æ— å»¶è¿Ÿï¼š</p><ul>\n<li>Master_Log_Fileå’ŒRead_Master_Log_Posï¼Œè¡¨ç¤ºçš„æ˜¯è¯»åˆ°çš„ä¸»åº“çš„æœ€æ–°ä½ç‚¹ï¼›</li>\n<li>Relay_Master_Log_Fileå’ŒExec_Master_Log_Posï¼Œè¡¨ç¤ºçš„æ˜¯å¤‡åº“æ‰§è¡Œçš„æœ€æ–°ä½ç‚¹ã€‚</li>\n</ul><p>å¦‚æœMaster_Log_Fileå’ŒRelay_Master_Log_Fileã€Read_Master_Log_Poså’ŒExec_Master_Log_Posè¿™ä¸¤ç»„å€¼å®Œå…¨ç›¸åŒï¼Œå°±è¡¨ç¤ºæ¥æ”¶åˆ°çš„æ—¥å¿—å·²ç»åŒæ­¥å®Œæˆã€‚</p><p><strong>ç¬¬ä¸‰ç§æ–¹æ³•ï¼Œ</strong>å¯¹æ¯”GTIDé›†åˆç¡®ä¿ä¸»å¤‡æ— å»¶è¿Ÿï¼š</p><ul>\n<li>Auto_Position=1 ï¼Œè¡¨ç¤ºè¿™å¯¹ä¸»å¤‡å…³ç³»ä½¿ç”¨äº†GTIDåè®®ã€‚</li>\n<li>Retrieved_Gtid_Setï¼Œæ˜¯å¤‡åº“æ”¶åˆ°çš„æ‰€æœ‰æ—¥å¿—çš„GTIDé›†åˆï¼›</li>\n<li>Executed_Gtid_Setï¼Œæ˜¯å¤‡åº“æ‰€æœ‰å·²ç»æ‰§è¡Œå®Œæˆçš„GTIDé›†åˆã€‚</li>\n</ul><p>å¦‚æœè¿™ä¸¤ä¸ªé›†åˆç›¸åŒï¼Œä¹Ÿè¡¨ç¤ºå¤‡åº“æ¥æ”¶åˆ°çš„æ—¥å¿—éƒ½å·²ç»åŒæ­¥å®Œæˆã€‚</p><p>å¯è§ï¼Œå¯¹æ¯”ä½ç‚¹å’Œå¯¹æ¯”GTIDè¿™ä¸¤ç§æ–¹æ³•ï¼Œéƒ½è¦æ¯”åˆ¤æ–­seconds_behind_masteræ˜¯å¦ä¸º0æ›´å‡†ç¡®ã€‚</p><p>åœ¨æ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚ä¹‹å‰ï¼Œå…ˆåˆ¤æ–­ä»åº“æ˜¯å¦åŒæ­¥å®Œæˆçš„æ–¹æ³•ï¼Œç›¸æ¯”äºsleepæ–¹æ¡ˆï¼Œå‡†ç¡®åº¦ç¡®å®æå‡äº†ä¸å°‘ï¼Œä½†è¿˜æ˜¯æ²¡æœ‰è¾¾åˆ°â€œç²¾ç¡®â€çš„ç¨‹åº¦ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ç°åœ¨ä¸€èµ·æ¥å›é¡¾ä¸‹ï¼Œä¸€ä¸ªäº‹åŠ¡çš„binlogåœ¨ä¸»å¤‡åº“ä¹‹é—´çš„çŠ¶æ€ï¼š</p><ol>\n<li>\n<p>ä¸»åº“æ‰§è¡Œå®Œæˆï¼Œå†™å…¥binlogï¼Œå¹¶åé¦ˆç»™å®¢æˆ·ç«¯ï¼›</p>\n</li>\n<li>\n<p>binlogè¢«ä»ä¸»åº“å‘é€ç»™å¤‡åº“ï¼Œå¤‡åº“æ”¶åˆ°ï¼›</p>\n</li>\n<li>\n<p>åœ¨å¤‡åº“æ‰§è¡Œbinlogå®Œæˆã€‚</p>\n</li>\n</ol><p>æˆ‘ä»¬ä¸Šé¢åˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿçš„é€»è¾‘ï¼Œæ˜¯â€œå¤‡åº“æ”¶åˆ°çš„æ—¥å¿—éƒ½æ‰§è¡Œå®Œæˆäº†â€ã€‚ä½†æ˜¯ï¼Œä»binlogåœ¨ä¸»å¤‡ä¹‹é—´çŠ¶æ€çš„åˆ†æä¸­ï¼Œä¸éš¾çœ‹å‡ºè¿˜æœ‰ä¸€éƒ¨åˆ†æ—¥å¿—ï¼Œå¤„äºå®¢æˆ·ç«¯å·²ç»æ”¶åˆ°æäº¤ç¡®è®¤ï¼Œè€Œå¤‡åº“è¿˜æ²¡æ”¶åˆ°æ—¥å¿—çš„çŠ¶æ€ã€‚</p><p>å¦‚å›¾4æ‰€ç¤ºå°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªçŠ¶æ€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/55/9e/557445207b57d6c0f2747509d7d6619e.png?wh=1142*510\" alt=\"\"></p><center><span class=\"reference\">å›¾4 å¤‡åº“è¿˜æ²¡æ”¶åˆ°trx3</span></center><p>è¿™æ—¶ï¼Œä¸»åº“ä¸Šæ‰§è¡Œå®Œæˆäº†ä¸‰ä¸ªäº‹åŠ¡trx1ã€trx2å’Œtrx3ï¼Œå…¶ä¸­ï¼š</p><ol>\n<li>\n<p>trx1å’Œtrx2å·²ç»ä¼ åˆ°ä»åº“ï¼Œå¹¶ä¸”å·²ç»æ‰§è¡Œå®Œæˆäº†ï¼›</p>\n</li>\n<li>\n<p>trx3åœ¨ä¸»åº“æ‰§è¡Œå®Œæˆï¼Œå¹¶ä¸”å·²ç»å›å¤ç»™å®¢æˆ·ç«¯ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ä¼ åˆ°ä»åº“ä¸­ã€‚</p>\n</li>\n</ol><p>å¦‚æœè¿™æ—¶å€™ä½ åœ¨ä»åº“Bä¸Šæ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¸Šé¢çš„é€»è¾‘ï¼Œä»åº“è®¤ä¸ºå·²ç»æ²¡æœ‰åŒæ­¥å»¶è¿Ÿï¼Œä½†è¿˜æ˜¯æŸ¥ä¸åˆ°trx3çš„ã€‚ä¸¥æ ¼åœ°è¯´ï¼Œå°±æ˜¯å‡ºç°äº†è¿‡æœŸè¯»ã€‚</p><p>é‚£ä¹ˆï¼Œè¿™ä¸ªé—®é¢˜æœ‰æ²¡æœ‰åŠæ³•è§£å†³å‘¢ï¼Ÿ</p><h1>é…åˆsemi-sync</h1><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦å¼•å…¥åŠåŒæ­¥å¤åˆ¶ï¼Œä¹Ÿå°±æ˜¯semi-sync replicationã€‚</p><p>semi-syncåšäº†è¿™æ ·çš„è®¾è®¡ï¼š</p><ol>\n<li>\n<p>äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œä¸»åº“æŠŠbinlogå‘ç»™ä»åº“ï¼›</p>\n</li>\n<li>\n<p>ä»åº“æ”¶åˆ°binlogä»¥åï¼Œå‘å›ç»™ä¸»åº“ä¸€ä¸ªackï¼Œè¡¨ç¤ºæ”¶åˆ°äº†ï¼›</p>\n</li>\n<li>\n<p>ä¸»åº“æ”¶åˆ°è¿™ä¸ªackä»¥åï¼Œæ‰èƒ½ç»™å®¢æˆ·ç«¯è¿”å›â€œäº‹åŠ¡å®Œæˆâ€çš„ç¡®è®¤ã€‚</p>\n</li>\n</ol><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå¯ç”¨äº†semi-syncï¼Œå°±è¡¨ç¤ºæ‰€æœ‰ç»™å®¢æˆ·ç«¯å‘é€è¿‡ç¡®è®¤çš„äº‹åŠ¡ï¼Œéƒ½ç¡®ä¿äº†å¤‡åº“å·²ç»æ”¶åˆ°äº†è¿™ä¸ªæ—¥å¿—ã€‚</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/76795\">ç¬¬25ç¯‡æ–‡ç« </a>çš„è¯„è®ºåŒºï¼Œæœ‰åŒå­¦é—®åˆ°ï¼šå¦‚æœä¸»åº“æ‰ç”µçš„æ—¶å€™ï¼Œæœ‰äº›binlogè¿˜æ¥ä¸åŠå‘ç»™ä»åº“ï¼Œä¼šä¸ä¼šå¯¼è‡´ç³»ç»Ÿæ•°æ®ä¸¢å¤±ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æ™®é€šçš„å¼‚æ­¥å¤åˆ¶æ¨¡å¼ï¼Œå°±å¯èƒ½ä¼šä¸¢å¤±ï¼Œä½†semi-syncå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>è¿™æ ·ï¼Œsemi-syncé…åˆå‰é¢å…³äºä½ç‚¹çš„åˆ¤æ–­ï¼Œå°±èƒ½å¤Ÿç¡®å®šåœ¨ä»åº“ä¸Šæ‰§è¡Œçš„æŸ¥è¯¢è¯·æ±‚ï¼Œå¯ä»¥é¿å…è¿‡æœŸè¯»ã€‚</p><p>ä½†æ˜¯ï¼Œsemi-sync+ä½ç‚¹åˆ¤æ–­çš„æ–¹æ¡ˆï¼Œåªå¯¹ä¸€ä¸»ä¸€å¤‡çš„åœºæ™¯æ˜¯æˆç«‹çš„ã€‚åœ¨ä¸€ä¸»å¤šä»åœºæ™¯ä¸­ï¼Œä¸»åº“åªè¦ç­‰åˆ°ä¸€ä¸ªä»åº“çš„ackï¼Œå°±å¼€å§‹ç»™å®¢æˆ·ç«¯è¿”å›ç¡®è®¤ã€‚è¿™æ—¶ï¼Œåœ¨ä»åº“ä¸Šæ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚ï¼Œå°±æœ‰ä¸¤ç§æƒ…å†µï¼š</p><ol>\n<li>\n<p>å¦‚æœæŸ¥è¯¢æ˜¯è½åœ¨è¿™ä¸ªå“åº”äº†ackçš„ä»åº“ä¸Šï¼Œæ˜¯èƒ½å¤Ÿç¡®ä¿è¯»åˆ°æœ€æ–°æ•°æ®ï¼›</p>\n</li>\n<li>\n<p>ä½†å¦‚æœæ˜¯æŸ¥è¯¢è½åˆ°å…¶ä»–ä»åº“ä¸Šï¼Œå®ƒä»¬å¯èƒ½è¿˜æ²¡æœ‰æ”¶åˆ°æœ€æ–°çš„æ—¥å¿—ï¼Œå°±ä¼šäº§ç”Ÿè¿‡æœŸè¯»çš„é—®é¢˜ã€‚</p>\n</li>\n</ol><p>å…¶å®ï¼Œåˆ¤æ–­åŒæ­¥ä½ç‚¹çš„æ–¹æ¡ˆè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Œå³ï¼šå¦‚æœåœ¨ä¸šåŠ¡æ›´æ–°çš„é«˜å³°æœŸï¼Œä¸»åº“çš„ä½ç‚¹æˆ–è€…GTIDé›†åˆæ›´æ–°å¾ˆå¿«ï¼Œé‚£ä¹ˆä¸Šé¢çš„ä¸¤ä¸ªä½ç‚¹ç­‰å€¼åˆ¤æ–­å°±ä¼šä¸€ç›´ä¸æˆç«‹ï¼Œå¾ˆå¯èƒ½å‡ºç°ä»åº“ä¸Šè¿Ÿè¿Ÿæ— æ³•å“åº”æŸ¥è¯¢è¯·æ±‚çš„æƒ…å†µã€‚</p><p>å®é™…ä¸Šï¼Œå›åˆ°æˆ‘ä»¬æœ€åˆçš„ä¸šåŠ¡é€»è¾‘é‡Œï¼Œå½“å‘èµ·ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚ä»¥åï¼Œæˆ‘ä»¬è¦å¾—åˆ°å‡†ç¡®çš„ç»“æœï¼Œå…¶å®å¹¶ä¸éœ€è¦ç­‰åˆ°â€œä¸»å¤‡å®Œå…¨åŒæ­¥â€ã€‚</p><p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ—¶åºå›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9c/09/9cf54f3e91dc8f7b8947d7d8e384aa09.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾5 ä¸»å¤‡æŒç»­å»¶è¿Ÿä¸€ä¸ªäº‹åŠ¡</span></center><p>å›¾5æ‰€ç¤ºï¼Œå°±æ˜¯ç­‰å¾…ä½ç‚¹æ–¹æ¡ˆçš„ä¸€ä¸ªbad caseã€‚å›¾ä¸­å¤‡åº“Bä¸‹çš„è™šçº¿æ¡†ï¼Œåˆ†åˆ«è¡¨ç¤ºrelaylogå’Œbinlogä¸­çš„äº‹åŠ¡ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå›¾5ä¸­ä»çŠ¶æ€1 åˆ°çŠ¶æ€4ï¼Œä¸€ç›´å¤„äºå»¶è¿Ÿä¸€ä¸ªäº‹åŠ¡çš„çŠ¶æ€ã€‚</p><p>å¤‡åº“Bä¸€ç›´åˆ°çŠ¶æ€4éƒ½å’Œä¸»åº“Aå­˜åœ¨å»¶è¿Ÿï¼Œå¦‚æœç”¨ä¸Šé¢å¿…é¡»ç­‰åˆ°æ— å»¶è¿Ÿæ‰èƒ½æŸ¥è¯¢çš„æ–¹æ¡ˆï¼Œselectè¯­å¥ç›´åˆ°çŠ¶æ€4éƒ½ä¸èƒ½è¢«æ‰§è¡Œã€‚</p><p>ä½†æ˜¯ï¼Œå…¶å®å®¢æˆ·ç«¯æ˜¯åœ¨å‘å®Œtrx1æ›´æ–°åå‘èµ·çš„selectè¯­å¥ï¼Œæˆ‘ä»¬åªéœ€è¦ç¡®ä¿trx1å·²ç»æ‰§è¡Œå®Œæˆå°±å¯ä»¥æ‰§è¡Œselectè¯­å¥äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨çŠ¶æ€3æ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚ï¼Œå¾—åˆ°çš„å°±æ˜¯é¢„æœŸç»“æœäº†ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°ç»“ä¸€ä¸‹ï¼Œsemi-syncé…åˆåˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿçš„æ–¹æ¡ˆï¼Œå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol>\n<li>\n<p>ä¸€ä¸»å¤šä»çš„æ—¶å€™ï¼Œåœ¨æŸäº›ä»åº“æ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚ä¼šå­˜åœ¨è¿‡æœŸè¯»çš„ç°è±¡ï¼›</p>\n</li>\n<li>\n<p>åœ¨æŒç»­å»¶è¿Ÿçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å‡ºç°è¿‡åº¦ç­‰å¾…çš„é—®é¢˜ã€‚</p>\n</li>\n</ol><p>æ¥ä¸‹æ¥ï¼Œæˆ‘è¦å’Œä½ ä»‹ç»çš„ç­‰ä¸»åº“ä½ç‚¹æ–¹æ¡ˆï¼Œå°±å¯ä»¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p><h1>ç­‰ä¸»åº“ä½ç‚¹æ–¹æ¡ˆ</h1><p>è¦ç†è§£ç­‰ä¸»åº“ä½ç‚¹æ–¹æ¡ˆï¼Œæˆ‘éœ€è¦å…ˆå’Œä½ ä»‹ç»ä¸€æ¡å‘½ä»¤ï¼š</p><pre><code>select master_pos_wait(file, pos[, timeout]);\n</code></pre><p>è¿™æ¡å‘½ä»¤çš„é€»è¾‘å¦‚ä¸‹ï¼š</p><ol>\n<li>\n<p>å®ƒæ˜¯åœ¨ä»åº“æ‰§è¡Œçš„ï¼›</p>\n</li>\n<li>\n<p>å‚æ•°fileå’ŒposæŒ‡çš„æ˜¯ä¸»åº“ä¸Šçš„æ–‡ä»¶åå’Œä½ç½®ï¼›</p>\n</li>\n<li>\n<p>timeoutå¯é€‰ï¼Œè®¾ç½®ä¸ºæ­£æ•´æ•°Nè¡¨ç¤ºè¿™ä¸ªå‡½æ•°æœ€å¤šç­‰å¾…Nç§’ã€‚</p>\n</li>\n</ol><p>è¿™ä¸ªå‘½ä»¤æ­£å¸¸è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªæ­£æ•´æ•°Mï¼Œè¡¨ç¤ºä»å‘½ä»¤å¼€å§‹æ‰§è¡Œï¼Œåˆ°åº”ç”¨å®Œfileå’Œposè¡¨ç¤ºçš„binlogä½ç½®ï¼Œæ‰§è¡Œäº†å¤šå°‘äº‹åŠ¡ã€‚</p><p>å½“ç„¶ï¼Œé™¤äº†æ­£å¸¸è¿”å›ä¸€ä¸ªæ­£æ•´æ•°Må¤–ï¼Œè¿™æ¡å‘½ä»¤è¿˜ä¼šè¿”å›ä¸€äº›å…¶ä»–ç»“æœï¼ŒåŒ…æ‹¬ï¼š</p><ol>\n<li>\n<p>å¦‚æœæ‰§è¡ŒæœŸé—´ï¼Œå¤‡åº“åŒæ­¥çº¿ç¨‹å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™è¿”å›NULLï¼›</p>\n</li>\n<li>\n<p>å¦‚æœç­‰å¾…è¶…è¿‡Nç§’ï¼Œå°±è¿”å›-1ï¼›</p>\n</li>\n<li>\n<p>å¦‚æœåˆšå¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±å‘ç°å·²ç»æ‰§è¡Œè¿‡è¿™ä¸ªä½ç½®äº†ï¼Œåˆ™è¿”å›0ã€‚</p>\n</li>\n</ol><p>å¯¹äºå›¾5ä¸­å…ˆæ‰§è¡Œtrx1ï¼Œå†æ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚çš„é€»è¾‘ï¼Œè¦ä¿è¯èƒ½å¤ŸæŸ¥åˆ°æ­£ç¡®çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªé€»è¾‘ï¼š</p><ol>\n<li>\n<p>trx1äº‹åŠ¡æ›´æ–°å®Œæˆåï¼Œé©¬ä¸Šæ‰§è¡Œshow master statuså¾—åˆ°å½“å‰ä¸»åº“æ‰§è¡Œåˆ°çš„Fileå’ŒPositionï¼›</p>\n</li>\n<li>\n<p>é€‰å®šä¸€ä¸ªä»åº“æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼›</p>\n</li>\n<li>\n<p>åœ¨ä»åº“ä¸Šæ‰§è¡Œselect master_pos_wait(File, Position, 1)ï¼›</p>\n</li>\n<li>\n<p>å¦‚æœè¿”å›å€¼æ˜¯&gt;=0çš„æ­£æ•´æ•°ï¼Œåˆ™åœ¨è¿™ä¸ªä»åº“æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼›</p>\n</li>\n<li>\n<p>å¦åˆ™ï¼Œåˆ°ä¸»åº“æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ã€‚</p>\n</li>\n</ol><p>æˆ‘æŠŠä¸Šé¢è¿™ä¸ªæµç¨‹ç”»å‡ºæ¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b2/57/b20ae91ea46803df1b63ed683e1de357.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾6 master_pos_waitæ–¹æ¡ˆ</span></center><p>è¿™é‡Œæˆ‘ä»¬å‡è®¾ï¼Œè¿™æ¡selectæŸ¥è¯¢æœ€å¤šåœ¨ä»åº“ä¸Šç­‰å¾…1ç§’ã€‚é‚£ä¹ˆï¼Œå¦‚æœ1ç§’å†…master_pos_waitè¿”å›ä¸€ä¸ªå¤§äºç­‰äº0çš„æ•´æ•°ï¼Œå°±ç¡®ä¿äº†ä»åº“ä¸Šæ‰§è¡Œçš„è¿™ä¸ªæŸ¥è¯¢ç»“æœä¸€å®šåŒ…å«äº†trx1çš„æ•°æ®ã€‚</p><p>æ­¥éª¤5åˆ°ä¸»åº“æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œæ˜¯è¿™ç±»æ–¹æ¡ˆå¸¸ç”¨çš„é€€åŒ–æœºåˆ¶ã€‚å› ä¸ºä»åº“çš„å»¶è¿Ÿæ—¶é—´ä¸å¯æ§ï¼Œä¸èƒ½æ— é™ç­‰å¾…ï¼Œæ‰€ä»¥å¦‚æœç­‰å¾…è¶…æ—¶ï¼Œå°±åº”è¯¥æ”¾å¼ƒï¼Œç„¶ååˆ°ä¸»åº“å»æŸ¥ã€‚</p><p>ä½ å¯èƒ½ä¼šè¯´ï¼Œå¦‚æœæ‰€æœ‰çš„ä»åº“éƒ½å»¶è¿Ÿè¶…è¿‡1ç§’äº†ï¼Œé‚£æŸ¥è¯¢å‹åŠ›ä¸å°±éƒ½è·‘åˆ°ä¸»åº“ä¸Šäº†å—ï¼Ÿç¡®å®æ˜¯è¿™æ ·ã€‚</p><p>ä½†æ˜¯ï¼ŒæŒ‰ç…§æˆ‘ä»¬è®¾å®šä¸å…è®¸è¿‡æœŸè¯»çš„è¦æ±‚ï¼Œå°±åªæœ‰ä¸¤ç§é€‰æ‹©ï¼Œä¸€ç§æ˜¯è¶…æ—¶æ”¾å¼ƒï¼Œä¸€ç§æ˜¯è½¬åˆ°ä¸»åº“æŸ¥è¯¢ã€‚å…·ä½“æ€ä¹ˆé€‰æ‹©ï¼Œå°±éœ€è¦ä¸šåŠ¡å¼€å‘åŒå­¦åšå¥½é™æµç­–ç•¥äº†ã€‚</p><h1>GTIDæ–¹æ¡ˆ</h1><p>å¦‚æœä½ çš„æ•°æ®åº“å¼€å¯äº†GTIDæ¨¡å¼ï¼Œå¯¹åº”çš„ä¹Ÿæœ‰ç­‰å¾…GTIDçš„æ–¹æ¡ˆã€‚</p><p>MySQLä¸­åŒæ ·æä¾›äº†ä¸€ä¸ªç±»ä¼¼çš„å‘½ä»¤ï¼š</p><pre><code> select wait_for_executed_gtid_set(gtid_set, 1);\n</code></pre><p>è¿™æ¡å‘½ä»¤çš„é€»è¾‘æ˜¯ï¼š</p><ol>\n<li>\n<p>ç­‰å¾…ï¼Œç›´åˆ°è¿™ä¸ªåº“æ‰§è¡Œçš„äº‹åŠ¡ä¸­åŒ…å«ä¼ å…¥çš„gtid_setï¼Œè¿”å›0ï¼›</p>\n</li>\n<li>\n<p>è¶…æ—¶è¿”å›1ã€‚</p>\n</li>\n</ol><p>åœ¨å‰é¢ç­‰ä½ç‚¹çš„æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œå®Œäº‹åŠ¡åï¼Œè¿˜è¦ä¸»åŠ¨å»ä¸»åº“æ‰§è¡Œshow master statusã€‚è€ŒMySQL 5.7.6ç‰ˆæœ¬å¼€å§‹ï¼Œå…è®¸åœ¨æ‰§è¡Œå®Œæ›´æ–°ç±»äº‹åŠ¡åï¼ŒæŠŠè¿™ä¸ªäº‹åŠ¡çš„GTIDè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ ·ç­‰GTIDçš„æ–¹æ¡ˆå°±å¯ä»¥å‡å°‘ä¸€æ¬¡æŸ¥è¯¢ã€‚</p><p>è¿™æ—¶ï¼Œç­‰GTIDçš„æ‰§è¡Œæµç¨‹å°±å˜æˆäº†ï¼š</p><ol>\n<li>\n<p>trx1äº‹åŠ¡æ›´æ–°å®Œæˆåï¼Œä»è¿”å›åŒ…ç›´æ¥è·å–è¿™ä¸ªäº‹åŠ¡çš„GTIDï¼Œè®°ä¸ºgtid1ï¼›</p>\n</li>\n<li>\n<p>é€‰å®šä¸€ä¸ªä»åº“æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼›</p>\n</li>\n<li>\n<p>åœ¨ä»åº“ä¸Šæ‰§è¡Œ select wait_for_executed_gtid_set(gtid1, 1)ï¼›</p>\n</li>\n<li>\n<p>å¦‚æœè¿”å›å€¼æ˜¯0ï¼Œåˆ™åœ¨è¿™ä¸ªä»åº“æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼›</p>\n</li>\n<li>\n<p>å¦åˆ™ï¼Œåˆ°ä¸»åº“æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ã€‚</p>\n</li>\n</ol><p>è·Ÿç­‰ä¸»åº“ä½ç‚¹çš„æ–¹æ¡ˆä¸€æ ·ï¼Œç­‰å¾…è¶…æ—¶åæ˜¯å¦ç›´æ¥åˆ°ä¸»åº“æŸ¥è¯¢ï¼Œéœ€è¦ä¸šåŠ¡å¼€å‘åŒå­¦æ¥åšé™æµè€ƒè™‘ã€‚</p><p>æˆ‘æŠŠè¿™ä¸ªæµç¨‹å›¾ç”»å‡ºæ¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d5/39/d521de8017297aff59db2f68170ee739.png?wh=1142*880\" alt=\"\"></p><center><span class=\"reference\">å›¾7 wait_for_executed_gtid_setæ–¹æ¡ˆ</span></center><p>åœ¨ä¸Šé¢çš„ç¬¬ä¸€æ­¥ä¸­ï¼Œtrx1äº‹åŠ¡æ›´æ–°å®Œæˆåï¼Œä»è¿”å›åŒ…ç›´æ¥è·å–è¿™ä¸ªäº‹åŠ¡çš„GTIDã€‚é—®é¢˜æ˜¯ï¼Œæ€ä¹ˆèƒ½å¤Ÿè®©MySQLåœ¨æ‰§è¡Œäº‹åŠ¡åï¼Œè¿”å›åŒ…ä¸­å¸¦ä¸ŠGTIDå‘¢ï¼Ÿ</p><p>ä½ åªéœ€è¦å°†å‚æ•°session_track_gtidsè®¾ç½®ä¸ºOWN_GTIDï¼Œç„¶åé€šè¿‡APIæ¥å£mysql_session_track_get_firstä»è¿”å›åŒ…è§£æå‡ºGTIDçš„å€¼å³å¯ã€‚</p><p>åœ¨ä¸“æ çš„<a href=\"https://time.geekbang.org/column/article/68319\">ç¬¬ä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»‹ç»mysql_reset_connectionçš„æ—¶å€™ï¼Œè¯„è®ºåŒºæœ‰åŒå­¦ç•™è¨€é—®è¿™ç±»æ¥å£åº”è¯¥æ€ä¹ˆä½¿ç”¨ã€‚</p><p>è¿™é‡Œæˆ‘å†å›ç­”ä¸€ä¸‹ã€‚å…¶å®ï¼ŒMySQLå¹¶æ²¡æœ‰æä¾›è¿™ç±»æ¥å£çš„SQLç”¨æ³•ï¼Œæ˜¯æä¾›ç»™ç¨‹åºçš„API(<a href=\"https://dev.mysql.com/doc/refman/5.7/en/c-api-functions.html\">https://dev.mysql.com/doc/refman/5.7/en/c-api-functions.html</a>)ã€‚</p><p>æ¯”å¦‚ï¼Œä¸ºäº†è®©å®¢æˆ·ç«¯åœ¨äº‹åŠ¡æäº¤åï¼Œè¿”å›çš„GITDèƒ½å¤Ÿåœ¨å®¢æˆ·ç«¯æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ‘å¯¹MySQLå®¢æˆ·ç«¯ä»£ç åšäº†ç‚¹ä¿®æ”¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/97/63/973bdd8741f830acebe005cbf37a7663.png?wh=990*143\" alt=\"\"></p><center><span class=\"reference\">å›¾8 æ˜¾ç¤ºæ›´æ–°äº‹åŠ¡çš„GTID--ä»£ç </span></center><p>è¿™æ ·ï¼Œå°±å¯ä»¥çœ‹åˆ°è¯­å¥æ‰§è¡Œå®Œæˆï¼Œæ˜¾ç¤ºå‡ºGITDçš„å€¼ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/25/fe/253106d31d9d97aaa2846b2015f593fe.png?wh=950*162\" alt=\"\"></p><center><span class=\"reference\">å›¾9 æ˜¾ç¤ºæ›´æ–°äº‹åŠ¡çš„GTID--æ•ˆæœ</span></center><p>å½“ç„¶äº†ï¼Œè¿™åªæ˜¯ä¸€ä¸ªä¾‹å­ã€‚ä½ è¦ä½¿ç”¨è¿™ä¸ªæ–¹æ¡ˆçš„æ—¶å€™ï¼Œè¿˜æ˜¯åº”è¯¥åœ¨ä½ çš„å®¢æˆ·ç«¯ä»£ç ä¸­è°ƒç”¨mysql_session_track_get_firstè¿™ä¸ªå‡½æ•°ã€‚</p><h1>å°ç»“</h1><p>åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘è·Ÿä½ ä»‹ç»äº†ä¸€ä¸»å¤šä»åšè¯»å†™åˆ†ç¦»æ—¶ï¼Œå¯èƒ½ç¢°åˆ°è¿‡æœŸè¯»çš„åŸå› ï¼Œä»¥åŠå‡ ç§åº”å¯¹çš„æ–¹æ¡ˆã€‚</p><p>è¿™å‡ ç§æ–¹æ¡ˆä¸­ï¼Œæœ‰çš„æ–¹æ¡ˆçœ‹ä¸Šå»æ˜¯åšäº†å¦¥åï¼Œæœ‰çš„æ–¹æ¡ˆçœ‹ä¸Šå»ä¸é‚£ä¹ˆé è°±å„¿ï¼Œä½†éƒ½æ˜¯æœ‰å®é™…åº”ç”¨åœºæ™¯çš„ï¼Œä½ éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ã€‚</p><p>å³ä½¿æ˜¯æœ€åç­‰å¾…ä½ç‚¹å’Œç­‰å¾…GTIDè¿™ä¸¤ä¸ªæ–¹æ¡ˆï¼Œè™½ç„¶çœ‹ä¸Šå»æ¯”è¾ƒé è°±å„¿ï¼Œä½†ä»ç„¶å­˜åœ¨éœ€è¦æƒè¡¡çš„æƒ…å†µã€‚å¦‚æœæ‰€æœ‰çš„ä»åº“éƒ½å»¶è¿Ÿï¼Œé‚£ä¹ˆè¯·æ±‚å°±ä¼šå…¨éƒ¨è½åˆ°ä¸»åº“ä¸Šï¼Œè¿™æ—¶å€™ä¼šä¸ä¼šç”±äºå‹åŠ›çªç„¶å¢å¤§ï¼ŒæŠŠä¸»åº“æ‰“æŒ‚äº†å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™å‡ ä¸ªæ–¹æ¡ˆæ˜¯å¯ä»¥æ··åˆä½¿ç”¨çš„ã€‚</p><p>æ¯”å¦‚ï¼Œå…ˆåœ¨å®¢æˆ·ç«¯å¯¹è¯·æ±‚åšåˆ†ç±»ï¼ŒåŒºåˆ†å“ªäº›è¯·æ±‚å¯ä»¥æ¥å—è¿‡æœŸè¯»ï¼Œè€Œå“ªäº›è¯·æ±‚å®Œå…¨ä¸èƒ½æ¥å—è¿‡æœŸè¯»ï¼›ç„¶åï¼Œå¯¹äºä¸èƒ½æ¥å—è¿‡æœŸè¯»çš„è¯­å¥ï¼Œå†ä½¿ç”¨ç­‰GTIDæˆ–ç­‰ä½ç‚¹çš„æ–¹æ¡ˆã€‚</p><p>ä½†è¯è¯´å›æ¥ï¼Œè¿‡æœŸè¯»åœ¨æœ¬è´¨ä¸Šæ˜¯ç”±ä¸€å†™å¤šè¯»å¯¼è‡´çš„ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½ä¼šæœ‰åˆ«çš„ä¸éœ€è¦ç­‰å¾…å°±å¯ä»¥æ°´å¹³æ‰©å±•çš„æ•°æ®åº“æ–¹æ¡ˆï¼Œä½†è¿™å¾€å¾€æ˜¯ç”¨ç‰ºç‰²å†™æ€§èƒ½æ¢æ¥çš„ï¼Œä¹Ÿå°±æ˜¯éœ€è¦åœ¨è¯»æ€§èƒ½å’Œå†™æ€§èƒ½ä¸­å–æƒè¡¡ã€‚</p><p>æœ€å ï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€ä¸ªé—®é¢˜å§ã€‚</p><p>å‡è®¾ä½ çš„ç³»ç»Ÿé‡‡ç”¨äº†æˆ‘ä»¬æ–‡ä¸­ä»‹ç»çš„æœ€åä¸€ä¸ªæ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯ç­‰GTIDçš„æ–¹æ¡ˆï¼Œç°åœ¨ä½ è¦å¯¹ä¸»åº“çš„ä¸€å¼ å¤§è¡¨åšDDLï¼Œå¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä½ ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„åˆ†æå’Œæ–¹æ¡ˆè®¾è®¡å†™åœ¨è¯„è®ºåŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« è·Ÿä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>ä¸ŠæœŸç»™ä½ ç•™çš„é—®é¢˜æ˜¯ï¼Œåœ¨GTIDæ¨¡å¼ä¸‹ï¼Œå¦‚æœä¸€ä¸ªæ–°çš„ä»åº“æ¥ä¸Šä¸»åº“ï¼Œä½†æ˜¯éœ€è¦çš„binlogå·²ç»æ²¡äº†ï¼Œè¦æ€ä¹ˆåšï¼Ÿ</p><p>@æŸã€äººåŒå­¦ç»™äº†å¾ˆè¯¦ç»†çš„åˆ†æï¼Œæˆ‘æŠŠä»–çš„å›ç­”ç•¥åšä¿®æ”¹è´´è¿‡æ¥ã€‚</p><ol>\n<li>\n<p>å¦‚æœä¸šåŠ¡å…è®¸ä¸»ä»ä¸ä¸€è‡´çš„æƒ…å†µï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ä¸»åº“ä¸Šå…ˆæ‰§è¡Œshow global variables like â€˜gtid_purgedâ€™ï¼Œå¾—åˆ°ä¸»åº“å·²ç»åˆ é™¤çš„GTIDé›†åˆï¼Œå‡è®¾æ˜¯gtid_purged1ï¼›ç„¶åå…ˆåœ¨ä»åº“ä¸Šæ‰§è¡Œreset masterï¼Œå†æ‰§è¡Œset global gtid_purged =â€˜gtid_purged1â€™ï¼›æœ€åæ‰§è¡Œstart slaveï¼Œå°±ä¼šä»ä¸»åº“ç°å­˜çš„binlogå¼€å§‹åŒæ­¥ã€‚binlogç¼ºå¤±çš„é‚£ä¸€éƒ¨åˆ†ï¼Œæ•°æ®åœ¨ä»åº“ä¸Šå°±å¯èƒ½ä¼šæœ‰ä¸¢å¤±ï¼Œé€ æˆä¸»ä»ä¸ä¸€è‡´ã€‚</p>\n</li>\n<li>\n<p>å¦‚æœéœ€è¦ä¸»ä»æ•°æ®ä¸€è‡´çš„è¯ï¼Œæœ€å¥½è¿˜æ˜¯é€šè¿‡é‡æ–°æ­å»ºä»åº“æ¥åšã€‚</p>\n</li>\n<li>\n<p>å¦‚æœæœ‰å…¶ä»–çš„ä»åº“ä¿ç•™æœ‰å…¨é‡çš„binlogçš„è¯ï¼Œå¯ä»¥æŠŠæ–°çš„ä»åº“å…ˆæ¥åˆ°è¿™ä¸ªä¿ç•™äº†å…¨é‡binlogçš„ä»åº“ï¼Œè¿½ä¸Šæ—¥å¿—ä»¥åï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œå†æ¥å›ä¸»åº“ã€‚</p>\n</li>\n<li>\n<p>å¦‚æœbinlogæœ‰å¤‡ä»½çš„æƒ…å†µï¼Œå¯ä»¥å…ˆåœ¨ä»åº“ä¸Šåº”ç”¨ç¼ºå¤±çš„binlogï¼Œç„¶åå†æ‰§è¡Œstart slaveã€‚</p>\n</li>\n</ol><p>è¯„è®ºåŒºç•™è¨€ç‚¹èµæ¿ï¼š</p><blockquote>\n<p>@æ‚Ÿç©º åŒå­¦çº§è”å®éªŒï¼ŒéªŒè¯äº†seconds_behind_masterçš„è®¡ç®—é€»è¾‘ã€‚</p>\n</blockquote><blockquote>\n<p>@_CountingStars é—®äº†ä¸€ä¸ªå¥½é—®é¢˜ï¼šMySQLæ˜¯æ€ä¹ˆå¿«é€Ÿå®šä½binlogé‡Œé¢çš„æŸä¸€ä¸ªGTIDä½ç½®çš„ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œåœ¨binlogæ–‡ä»¶å¤´éƒ¨çš„Previous_gtidså¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n</blockquote><blockquote>\n<p>@ç‹æœ‹é£ åŒå­¦é—®äº†ä¸€ä¸ªå¥½é—®é¢˜ï¼Œsql_slave_skip_counterè·³è¿‡çš„æ˜¯ä¸€ä¸ªeventï¼Œç”±äºMySQLæ€»ä¸èƒ½æ‰§è¡Œä¸€åŠçš„äº‹åŠ¡ï¼Œæ‰€ä»¥æ—¢ç„¶è·³è¿‡äº†ä¸€ä¸ªeventï¼Œå°±ä¼šè·³åˆ°è¿™ä¸ªäº‹åŠ¡çš„æœ«å°¾ï¼Œå› æ­¤set global sql_slave_skip_counter=1;start slaveæ˜¯å¯ä»¥è·³è¿‡æ•´ä¸ªäº‹åŠ¡çš„ã€‚</p>\n</blockquote>","neighbors":{"left":{"article_title":"27 | ä¸»åº“å‡ºé—®é¢˜äº†ï¼Œä»åº“æ€ä¹ˆåŠï¼Ÿ","id":77427},"right":{"article_title":"29 | å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ•°æ®åº“æ˜¯ä¸æ˜¯å‡ºé—®é¢˜äº†ï¼Ÿ","id":78134}},"comments":[{"had_liked":false,"id":61098,"user_name":"æœ‰é“­","can_delete":false,"product_type":"c1","uid":1046302,"ip_address":"","ucode":"2C7CB36CA5C04C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3XbCueYYVWTiclv8T5tFpwiblOxLphvSZxL4ujMdqVMibZnOiaFK2C5nKRGv407iaAsrI0CDICYVQJtiaITzkjfjbvrQ/132","comment_is_top":false,"comment_ctime":1547619822,"is_pvip":false,"replies":[{"id":"21763","content":"è¿™æ ·æˆ‘è§‰å¾—ä½ å’Œæˆ‘çš„æ—¶é—´éƒ½å€¼äº†ğŸ˜†<br><br>æŠŠä½ æ›´æ–°äº†è®¤è¯†çš„ç‚¹å‘åˆ°è¯„è®ºåŒºï¼Œè¿™æ ·ä¼šå°è±¡æ›´æ·±å“ˆğŸ¤<br>","user_name":"ä½œè€…å›å¤","comment_id":61098,"uid":"1264162","ip_address":"","utype":1,"ctime":1547622265,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":8,"race_medal":0,"score":"491173891566","product_id":100020801,"comment_content":"è¿™ä¸“æ çœŸçš„æ˜¯å¹²è´§æ»¡æ»¡ï¼Œæ¯çœ‹ä¸€ç¯‡æˆ‘éƒ½æœ‰â€œæˆ‘å‘ç°æˆ‘çœŸçš„ä¸ä¼šä½¿ç”¨MySQLâ€å’Œâ€œæˆ‘åŸæ¥æŠŠMySQLç”¨é”™äº†â€çš„æŒ«è´¥æ„Ÿ","like_count":115,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436742,"discussion_content":"è¿™æ ·æˆ‘è§‰å¾—ä½ å’Œæˆ‘çš„æ—¶é—´éƒ½å€¼äº†ğŸ˜†\n\næŠŠä½ æ›´æ–°äº†è®¤è¯†çš„ç‚¹å‘åˆ°è¯„è®ºåŒºï¼Œè¿™æ ·ä¼šå°è±¡æ›´æ·±å“ˆğŸ¤\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547622265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015189,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/95/dd73022c.jpg","nickname":"æˆ‘æ˜¯æ›¾ç»é‚£ä¸ªå°‘å¹´","note":"","ucode":"9F02F7FF147D14","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352521,"discussion_content":"åç«¯å¼€å‘ï¼Œçœ‹å®Œä¹‹åä¸€è„¸æ‡µé€¼ï¼Œå…¨æ˜¯æŒ«è´¥æ„Ÿã€‚","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1614761080,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":5,"child_discussions":[{"author":{"id":1809686,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/16/a2fb8136.jpg","nickname":"å­£æŸäºº","note":"","ucode":"1EEF2A58C3BD79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1015189,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/95/dd73022c.jpg","nickname":"æˆ‘æ˜¯æ›¾ç»é‚£ä¸ªå°‘å¹´","note":"","ucode":"9F02F7FF147D14","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":360579,"discussion_content":"ä¿ºä¹Ÿä¸€æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1616480734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352521,"ip_address":""},"score":360579,"extra":""},{"author":{"id":2257035,"avatar":"https://static001.geekbang.org/account/avatar/00/22/70/8b/31a1fcfc.jpg","nickname":"é’±æ€æƒ˜","note":"","ucode":"343DB49A374825","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1809686,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/16/a2fb8136.jpg","nickname":"å­£æŸäºº","note":"","ucode":"1EEF2A58C3BD79","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407309,"discussion_content":"ä¿ºä¹Ÿä¸€æ ·","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634976630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":360579,"ip_address":""},"score":407309,"extra":""},{"author":{"id":2790511,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/94/6f/9697953b.jpg","nickname":"ğŸ€switch","note":"","ucode":"4449F4A87D49D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1015189,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7d/95/dd73022c.jpg","nickname":"æˆ‘æ˜¯æ›¾ç»é‚£ä¸ªå°‘å¹´","note":"","ucode":"9F02F7FF147D14","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542484,"discussion_content":"ä¿ºä¹Ÿä¸€æ ·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640764769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":352521,"ip_address":""},"score":542484,"extra":""}]},{"author":{"id":1448630,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1a/b6/4777f789.jpg","nickname":"å¿ƒå£°","note":"","ucode":"ABFFC9137B0FC8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288084,"discussion_content":"å“¥ä»¬ï¼Œä½ æ˜¯DBA è¿˜æ˜¯åç«¯å¼€å‘ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1593649163,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61020,"user_name":"æ›¾å‰‘","can_delete":false,"product_type":"c1","uid":1304922,"ip_address":"","ucode":"55466F93BE9978","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/5a/a6f2ec4b.jpg","comment_is_top":false,"comment_ctime":1547604532,"is_pvip":false,"replies":[{"id":"21744","content":"ğŸ‘ è¡¨ç¤ºè¿™ä¸¤ç¯‡æ–‡ç« ä½ éƒ½getåˆ°äº†","user_name":"ä½œè€…å›å¤","comment_id":61020,"uid":"1264162","ip_address":"","utype":1,"ctime":1547610644,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"375209759284","product_id":100020801,"comment_content":"è€å¸ˆå†™çš„æ¯ä¸€ç¯‡æ–‡ç« éƒ½èƒ½è®©æˆ‘è·ç›Šè‰¯å¤šã€‚æ¯ä¸€ç¯‡éƒ½å€¼å¾—çœ‹å¥½å‡ éã€‚<br>ä»Šå¤©çš„é—®é¢˜ï¼Œå¤§è¡¨åšDDLçš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°ä¸»ä»å»¶è¿Ÿï¼Œå¯¼è‡´ç­‰ GTID çš„æ–¹æ¡ˆå¯èƒ½ä¼šå¯¼è‡´è¿™éƒ¨åˆ†æµé‡å…¨æ‰“åˆ°ä¸»åº“ï¼Œæˆ–è€…å…¨éƒ¨è¶…æ—¶ã€‚<br>å¦‚æœè¿™éƒ¨åˆ†æµé‡å¤ªå¤§çš„è¯ï¼Œæˆ‘ä¼šé€‰æ‹©ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»çš„ä¸¤ç§æ–¹æ³•ï¼š<br>1.åœ¨å„ä¸ªä»åº“å…ˆSET sql_log_bin = OFFï¼Œç„¶ååšDDLï¼Œæ‰€æœ‰ä»åº“åŠå¤‡ä¸»å…¨åšå®Œä¹‹åï¼Œåšä¸»ä»åˆ‡æ¢ï¼Œæœ€ååœ¨åŸæ¥çš„ä¸»åº“ç”¨åŒæ ·çš„æ–¹å¼åšDDLã€‚<br>2.ä»åº“ä¸Šæ‰§è¡ŒDDLï¼›å°†ä»åº“ä¸Šæ‰§è¡ŒDDLäº§ç”Ÿçš„GTIDåœ¨ä¸»åº“ä¸Šåˆ©ç”¨ç”Ÿæˆä¸€ä¸ªç©ºäº‹åŠ¡GTIDçš„æ–¹å¼å°†è¿™ä¸ªGTIDåœ¨ä¸»åº“ä¸Šç”Ÿæˆå‡ºæ¥ã€‚<br>å„ä¸ªä»åº“åšå®Œä¹‹åå†ä¸»ä»åˆ‡æ¢ï¼Œç„¶åå†åœ¨åŸæ¥çš„ä¸»åº“ä¸ŠåŒæ ·åšä¸€æ¬¡ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœæœ‰MMæ¶æ„çš„æƒ…å†µä¸‹ï¼Œæ‰¿æ‹…å†™èŒè´£çš„ä¸»åº“ä¸Šçš„slaveéœ€è¦å…ˆåœæ‰ã€‚","like_count":88,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436707,"discussion_content":"ğŸ‘ è¡¨ç¤ºè¿™ä¸¤ç¯‡æ–‡ç« ä½ éƒ½getåˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547610644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1310826,"avatar":"https://static001.geekbang.org/account/avatar/00/14/00/6a/da96c764.jpg","nickname":"å°¹å¸Œé—¯","note":"","ucode":"A35F70179808D8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216582,"discussion_content":"1.é‚£ä¸»åº“ä¸Šä¸¢å¤±çš„binlogæ€ä¹ˆåŠï¼Ÿä»åº“å¯èƒ½ä¹Ÿæ²¡æœ‰ã€‚\n2.å¦‚æœä¸»åº“ä¸¢å¤±ï¼Œä»åº“å­˜åœ¨å¯¹åº”binlogï¼Œä½ æ„æ€æ˜¯ä¸»ä»äº¤æ¢å—ï¼Ÿä¹‹å‰è®²çš„éƒ½æ˜¯åœ¨ä»åº“ä¸Šè®¾ç½®ä¸»å¤‡åº“äº¤æ¢å‚æ•°ï¼Œå®ŒæˆåŒæ­¥ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1585467400,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","nickname":"æ²‰æ·€çš„æ¢¦æƒ³","note":"","ucode":"BCB7C26F9D214B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570853,"discussion_content":"åœ¨å¤‡åº“æ‰§è¡Œ DDL ç†è®ºä¸Šä¸ä¹Ÿä¼šé€ æˆå»¶è¿Ÿå—ï¼Ÿå’Œ binlog åŒæ­¥æ‰§è¡Œçš„ DDL æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸ºä»€ä¹ˆèƒ½è§£å†³ä¸»åº“ DDL ä¸»ä»å»¶è¿Ÿçš„é—®é¢˜ï¼Ÿ æ±‚è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651942310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1599768,"avatar":"https://static001.geekbang.org/account/avatar/00/18/69/18/ca8a5c22.jpg","nickname":"æ”¶","note":"","ucode":"EC3338DB7AEF34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1177315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","nickname":"æ²‰æ·€çš„æ¢¦æƒ³","note":"","ucode":"BCB7C26F9D214B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578167,"discussion_content":"å¥½é—®é¢˜ï¼Œå¦‚æœä»åº“åšå…ˆåšddlæ­¤æ—¶é™¤äº†è¯¥è¡¨(å¦‚æœé”è¡¨)å…¶ä»–è¡¨è¿˜å¯ä»¥æ‰¿æ¥æµé‡ï¼Œä¸»ä»åˆ‡æ¢åä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚\nåŸå»¶è¿Ÿæ—¶é—´ï¼šä»åº“æ‰§è¡Œddlï¼Œæ­¤æ—¶æ˜¯é’ˆå¯¹æ•´ä¸ªå®ä¾‹çš„å»¶è¿Ÿ\næ–°ç‰ˆæœ¬ï¼šé™¤ddlè¡¨å¤–æ²¡æœ‰å»¶è¿Ÿ\næŠŠä¸å¯ç”¨çš„æ—¶é—´ç¼©å°ï¼Œå®é™…ä¸Šå°±æ˜¯èŠ‚çœäº†å»¶è¿Ÿæ—¶é—´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656552652,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":570853,"ip_address":""},"score":578167,"extra":""}]}]},{"had_liked":false,"id":61281,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1547651526,"is_pvip":false,"replies":[{"id":"21798","content":"é¢ï¼Œè¿™ä¸ªæœ€éš¾å›ç­”äº†<br><br>è¯´å®è¯å› ä¸ºæˆ‘åŸæ¥å›¢é˜Ÿæ˜¯å›¢é˜Ÿè‡ªå·±åšçš„proxyï¼ˆæ²¡æœ‰å¼€æºï¼‰ï¼Œæ‰€ä»¥æˆ‘å¯¹å…¶ä»–proxyç”¨å¾—å¹¶ä¸å¤šï¼Œå®åœ¨ä¸æ•¢éšä¾¿æŒ‡ä¸€ä¸ªã€‚<br><br>å¦‚æœæˆ‘è¯´ä¸ªæ¯”è¾ƒç†Ÿæ‚‰çš„è¯ï¼Œå¯èƒ½MariaDB MaxScaleè¿˜ä¸é”™","user_name":"ä½œè€…å›å¤","comment_id":61281,"uid":"1264162","ip_address":"","utype":1,"ctime":1547659104,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":5,"race_medal":0,"score":"169051376070","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘å…ˆè¯·æ•™ä¸¤ä¸ªé—®é¢˜(ä¼°è®¡å¤§å¤šæ•°åŒå­¦éƒ½æœ‰è¿™ä¸ªç–‘æƒ‘)ğŸ˜„:<br>1.ç°åœ¨çš„ä¸­é—´ä»¶å¯ä»¥è¯´æ˜¯ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼,è¯·é—®è€å¸ˆå“ªä¸€æ¬¾ä¸­é—´ä»¶é€‚åˆå¤§å¤šæ•°ä¸åˆ†åº“åˆ†è¡¨,åªæ˜¯åšè¯»å†™åˆ†ç¦»ä¸šåŠ¡çš„proxy,èƒ½æ¨èä¸€æ¬¾å˜›?æ¯•ç«Ÿå¤§å¤šæ•°å…¬å¸éƒ½æ²¡æœ‰ä¸“é—¨åšä¸­é—´ä»¶å¼€å‘çš„å›¢é˜Ÿ<br>2.å¦‚æœæ˜¯ä¸šåŠ¡ä¸Šè¿›è¡Œäº†åˆ†åº“åˆ†è¡¨,è€å¸ˆèƒ½æ¨èä¸€æ¬¾åˆ†åº“åˆ†è¡¨çš„proxyå˜›ï¼Ÿæˆ‘ç›®å‰äº†è§£åˆ°çš„é’ˆå¯¹åˆ†åº“åˆ†è¡¨çš„proxyéƒ½æˆ–å¤šæˆ–å°‘æœ‰äº›é—®é¢˜ã€‚ä¸è¿‡åˆ†å¸ƒå¼æ•°æ®åº“æ˜¯ä¸€ä¸ªè¶‹åŠ¿ä¹Ÿæ˜¯ä¸€ä¸ªéš¾ç‚¹ã€‚","like_count":40,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436816,"discussion_content":"é¢ï¼Œè¿™ä¸ªæœ€éš¾å›ç­”äº†\n\nè¯´å®è¯å› ä¸ºæˆ‘åŸæ¥å›¢é˜Ÿæ˜¯å›¢é˜Ÿè‡ªå·±åšçš„proxyï¼ˆæ²¡æœ‰å¼€æºï¼‰ï¼Œæ‰€ä»¥æˆ‘å¯¹å…¶ä»–proxyç”¨å¾—å¹¶ä¸å¤šï¼Œå®åœ¨ä¸æ•¢éšä¾¿æŒ‡ä¸€ä¸ªã€‚\n\nå¦‚æœæˆ‘è¯´ä¸ªæ¯”è¾ƒç†Ÿæ‚‰çš„è¯ï¼Œå¯èƒ½MariaDB MaxScaleè¿˜ä¸é”™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547659104,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1044546,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/42/7728d4f5.jpg","nickname":"è‰¿è‰¿","note":"","ucode":"8F727AB7A7F6B2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39162,"discussion_content":"å¯ä»¥è€ƒè™‘ä½¿ç”¨ sharding sphere ã€‚","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1571899618,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1259077,"avatar":"https://static001.geekbang.org/account/avatar/00/13/36/45/23cf8dcd.jpg","nickname":"æ²¡æƒ³å¥½ã€‚ã€‚ã€‚","note":"","ucode":"8377B471928145","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":15361,"discussion_content":"æˆ‘ä»¬å…¬å¸æ˜¯ç”¨çš„mycatæ„Ÿè§‰è¿˜æŒºæ–¹ä¾¿ï¼Œé…ç½®ä¹Ÿç®€å•","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1568817058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2104856,"avatar":"https://static001.geekbang.org/account/avatar/00/20/1e/18/9d1f1439.jpg","nickname":"liaomars","note":"","ucode":"4FCA97EE9FB57D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566861,"discussion_content":"ç”¨äº‘æ•°æ®åº“æä¾›å®Œæ•´æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650781406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1794060,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/60/0c/e1f012cb.jpg","nickname":"frankie","note":"","ucode":"813D1352B68A21","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257521,"discussion_content":"å®ç°è¯»å†™åˆ†ç¦» æˆ‘æ¨èç”¨haproxy,è‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼Œä¸€ä¸ªèŠ‚ç‚¹æŒ‚è°ƒä¹‹åï¼Œè‡ªåŠ¨å»è¯»å–æ²¡æœ‰æŒ‚è°ƒçš„èŠ‚ç‚¹ï¼ŒæŒ‚è°ƒçš„èŠ‚ç‚¹æ¢å¤åï¼Œè¿˜èƒ½è‡ªåŠ¨å»è¯»ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588582083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":106586,"user_name":"ç‹¼çŒ«","can_delete":false,"product_type":"c1","uid":1080112,"ip_address":"","ucode":"F911CC975F4218","user_header":"https://static001.geekbang.org/account/avatar/00/10/7b/30/1b50450b.jpg","comment_is_top":false,"comment_ctime":1561350055,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"126115401639","product_id":100020801,"comment_content":"å…¨ç½‘æœ€å¥½çš„è¯¾ç¨‹ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œä¸æ¥å—åé©³","like_count":30},{"had_liked":false,"id":61254,"user_name":"æ˜“ç¿”","can_delete":false,"product_type":"c1","uid":1304541,"ip_address":"","ucode":"8C63DB7379186C","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/dd/e68f9cf5.jpg","comment_is_top":false,"comment_ctime":1547646830,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"121806731118","product_id":100020801,"comment_content":"ä¸ºè€å¸ˆä¸€å¥ä½ çš„æ—¶é—´å’Œæˆ‘çš„æ—¶é—´éƒ½å€¼äº†ã€‚ç‚¹èµ","like_count":28,"discussions":[{"author":{"id":1199343,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4c/ef/c1593763.jpg","nickname":"Nick","note":"","ucode":"8F8BE8CE3B9EE9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":54847,"discussion_content":"ç¿”å“¥ï¼Œä½ ä¹Ÿåœ¨å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574319460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1304541,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e7/dd/e68f9cf5.jpg","nickname":"æ˜“ç¿”","note":"","ucode":"8C63DB7379186C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1199343,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4c/ef/c1593763.jpg","nickname":"Nick","note":"","ucode":"8F8BE8CE3B9EE9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":63993,"discussion_content":"æ˜¯çš„ï¼Œæ„Ÿè°¢äº’è”ç½‘è®©æˆ‘ä¸é’±å“¥åœ¨è¿™é‡Œé‡é€¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574929284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":54847,"ip_address":""},"score":63993,"extra":""}]}]},{"had_liked":false,"id":62374,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1548041128,"is_pvip":false,"replies":[{"id":"23183","content":"ä½ è¯´å¾—å¯¹ï¼Œè¿™ç§æ–¹æ¡ˆä¸‹èƒ½æ”¯æŒçš„DDLåªæœ‰ä»¥ä¸‹å‡ ç§ï¼š<br>  åˆ›å»º&amp;#47;åˆ é™¤ç´¢å¼•ã€æ–°å¢æœ€åä¸€åˆ—ã€åˆ é™¤æœ€åä¸€åˆ—<br><br>å…¶ä¸­DBAä¼šè®¤ä¸ºâ€œåˆç†â€çš„DDLéœ€æ±‚å°±æ˜¯ï¼š â€œåˆ›å»º&amp;#47;åˆ é™¤ç´¢å¼•ã€æ–°å¢æœ€åä¸€åˆ—â€<br><br>æ–°æ˜¥å¿«ä¹~","user_name":"ä½œè€…å›å¤","comment_id":62374,"uid":"1264162","ip_address":"","utype":1,"ctime":1549270464,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":7,"race_medal":0,"score":"100332288936","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼š<br>å…³äºä¸»åº“å¤§è¡¨çš„DDLæ“ä½œï¼Œæˆ‘çœ‹äº†é—®é¢˜ç­”æ¡ˆï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆã€‚ç¬¬ä¸€ç§æ˜¯è¯»å†™è¯·æ±‚è½¬åˆ°ä¸»åº“ï¼Œåœ¨ä¸»åº“ä¸ŠåšDDLã€‚ç¬¬äºŒç§æ˜¯ä»åº“ä¸ŠåšDDLï¼Œå®Œæˆåè¿›è¡Œä¸»ä»åˆ‡æ¢ã€‚<br><br>å…³äºç¬¬äºŒç§ï¼Œæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼š<br>ä»åº“ä¸ŠåšDDLï¼Œè¯»å†™è¯·æ±‚èµ°ä¸»åº“ï¼Œç­‰åˆ°ä»åº“å®Œæˆåï¼Œä»åº“å¿…é¡»è¦åŒæ­¥DDLæœŸé—´ï¼Œä¸»åº“å®Œæˆçš„äº‹åŠ¡åæ‰èƒ½è¿›è¡Œä¸»ä»åˆ‡æ¢ã€‚è€Œå¦‚æœDDLæ“ä½œæ˜¯åˆ é™¤ä¸€åˆ—ï¼Œé‚£ä¹ˆåœ¨åŒæ­¥è¿‡ç¨‹ä¸­ä¼šå‡ºé”™å‘€ï¼Ÿï¼ˆæ¯”å¦‚æŠ›å‡ºè¿™ä¸€åˆ—ä¸å­˜åœ¨çš„é”™è¯¯ï¼‰ã€‚","like_count":23,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437188,"discussion_content":"ä½ è¯´å¾—å¯¹ï¼Œè¿™ç§æ–¹æ¡ˆä¸‹èƒ½æ”¯æŒçš„DDLåªæœ‰ä»¥ä¸‹å‡ ç§ï¼š\n  åˆ›å»º&amp;amp;#47;åˆ é™¤ç´¢å¼•ã€æ–°å¢æœ€åä¸€åˆ—ã€åˆ é™¤æœ€åä¸€åˆ—\n\nå…¶ä¸­DBAä¼šè®¤ä¸ºâ€œåˆç†â€çš„DDLéœ€æ±‚å°±æ˜¯ï¼š â€œåˆ›å»º&amp;amp;#47;åˆ é™¤ç´¢å¼•ã€æ–°å¢æœ€åä¸€åˆ—â€\n\næ–°æ˜¥å¿«ä¹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549270464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1563985,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKdiaUiaCYQe9tibemaNU5ya7RrU3MYcSGEIG7zF27u0ZDnZs5lYxPb7KPrAsj3bibM79QIOnPXAatfIw/132","nickname":"Geek_a8be59","note":"","ucode":"BEC0F57B51DC44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":588518,"discussion_content":"èƒ½åœ¨ä»åº“è°ƒä»·å”¯ä¸€ç´¢å¼•ä¹ˆï¼Ÿæ¯”å¦‚åœ¨ä»åº“æ‰§è¡ŒddlæœŸé—´æŸä¸ªå­—æ®µæ˜¯æ²¡æœ‰é‡å¤çš„ï¼Œç„¶åddlçš„æ—¶å€™æ·»åŠ äº†é‡å¤ã€‚ç­‰ä»å¥ddlå®Œæˆç„¶ååŒæ­¥è½ä¸‹çš„æ•°æ®å²‚ä¸æ˜¯ä¼šæŠ¥é”™ï¼Œè€Œä¸»åº“åˆæ˜¯æ­£å¸¸çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663811034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":437188,"ip_address":"ä¸Šæµ·"},"score":588518,"extra":""}]},{"author":{"id":1177315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","nickname":"æ²‰æ·€çš„æ¢¦æƒ³","note":"","ucode":"BCB7C26F9D214B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570854,"discussion_content":"åœ¨å¤‡åº“æ‰§è¡Œ DDL ç†è®ºä¸Šä¸ä¹Ÿä¼šé€ æˆå»¶è¿Ÿå—ï¼Ÿå’Œ binlog åŒæ­¥æ‰§è¡Œçš„ DDL æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸ºä»€ä¹ˆèƒ½è§£å†³ä¸»åº“ DDL ä¸»ä»å»¶è¿Ÿçš„é—®é¢˜ï¼Ÿ æ±‚è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651942323,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2278559,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c4/9f/a01e4bd1.jpg","nickname":"æµ·æµª","note":"","ucode":"091941B3556B4B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":327801,"discussion_content":"ä¸ºä»€ä¹ˆæ˜¯æœ€åä¸€åˆ—å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605955304,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2278559,"avatar":"https://static001.geekbang.org/account/avatar/00/22/c4/9f/a01e4bd1.jpg","nickname":"æµ·æµª","note":"","ucode":"091941B3556B4B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376339,"discussion_content":"å¢åŠ æœ€åä¸€åˆ—ï¼ŒåŸæ¥çš„SQLæ“ä½œä¸å—å½±å“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622086874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":327801,"ip_address":""},"score":376339,"extra":""}]},{"author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"éƒ­ä¿Šæ°","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2368,"discussion_content":"è€å¸ˆï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆåˆ é™¤ä¸€åˆ—çš„ddlï¼Œå°±ç›´æ¥åœ¨ä¸»åº“ä¸Šæ‰§è¡Œå—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563521546,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2133834,"avatar":"https://static001.geekbang.org/account/avatar/00/20/8f/4a/a340734f.jpg","nickname":"å¹³å‡¡","note":"","ucode":"5F7D49235A9598","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"éƒ­ä¿Šæ°","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409744,"discussion_content":"çº¿ä¸Šç¯å¢ƒdbaä¸€èˆ¬ä¸ä¼šå…è®¸ä½ åˆ é™¤åˆ—ï¼Œå³ä¾¿æ˜¯å¤šä½™çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635500826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2368,"ip_address":""},"score":409744,"extra":""}]}]},{"had_liked":false,"id":61419,"user_name":"çŒªå“¥å“¥","can_delete":false,"product_type":"c1","uid":1311362,"ip_address":"","ucode":"ACBB4556516D34","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLkhgYnYZBdhdwKnXQibey04cy9N9ria3DadH7iagoKukaWK1FJwjfCoh0He4p7b2icSYVzHH71l8ZXiaQ/132","comment_is_top":false,"comment_ctime":1547694536,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78857105864","product_id":100020801,"comment_content":"è€å¸ˆ, ä½ çœŸæ£’, æˆ‘å…¬å¸çš„ç”Ÿäº§ç¯å¢ƒè§£å†³è¿‡æœŸè¯»ä½¿ç”¨çš„å°±æ˜¯å¼ºåˆ¶èµ°ä¸»åº“æ–¹æ¡ˆ, çœ‹äº†è¿™ç¯‡æ–‡ç« , å›°æƒ‘äº†å¾ˆä¹…çš„é—®é¢˜è¿åˆƒè€Œè§£ï¼å¾ˆæ„Ÿè°¢!","like_count":19},{"had_liked":false,"id":120434,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1564892013,"is_pvip":false,"replies":[{"id":"44202","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":120434,"uid":"1264162","ip_address":"","utype":1,"ctime":1564922429,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"70284368749","product_id":100020801,"comment_content":"1ï¼šå•æœºçš„æ€§èƒ½æ€»æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥ï¼Œå°±å‡ºç°äº†è¯»å†™åˆ†ç¦»<br>2ï¼šè¯»å†™åˆ†ç¦»å¸¦æ¥äº†æ›´é«˜çš„æ€§èƒ½ï¼Œä¹Ÿå¼•å…¥äº†æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜<br>3ï¼šä¸ºäº†æ•°æ®ä¸€è‡´æ€§ï¼Œåˆäº§ç”Ÿäº†å„ç§è§£å†³æ–¹æ¡ˆ<br>äººå°‘åŠ›é‡å°ï¼Œäººå¤šäº†äº‹å°±å¤šï¼Œå¦‚æœç®¡ç†èƒ½åŠ›å¥½ï¼Œè¿˜æ˜¯äººå¤šå¥½åŠäº‹ã€‚<br>åŸç†æ˜¯è¿™æ ·ï¼Œæ²¡æ€ä¹ˆå®æ“è¿‡ï¼Œæ„Ÿè°¢è€å¸ˆçš„åˆ†äº«ï¼Œè®©è‡ªå·±çš„è®¤çŸ¥è¾¹ç•Œæœ‰ç§»åŠ¨äº†ä¸€ç‚¹ç‚¹ã€‚","like_count":16,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461332,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564922429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1018972,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","nickname":"äºšæ—","note":"","ucode":"4A5A6D24314B79","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568018,"discussion_content":"äººå°‘åŠ›é‡å°ï¼Œäººå¤šäº†äº‹å°±å¤šï¼Œå¦‚æœç®¡ç†å¥½ï¼Œè¿˜æ˜¯äººå¤šå¥½åŠäº‹ã€‚ï¼ˆç‰›çš®ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651046202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61520,"user_name":"Max","can_delete":false,"product_type":"c1","uid":1302420,"ip_address":"","ucode":"E3F1CD8FCB66B3","user_header":"https://static001.geekbang.org/account/avatar/00/13/df/94/84296110.jpg","comment_is_top":false,"comment_ctime":1547713055,"is_pvip":false,"replies":[{"id":"21866","content":"å‰é¢çš„åˆ†æå¾ˆå¥½å“ˆ<br><br><br>ç„¶åä¸€ä¸»13ä»æœ‰ç‚¹å¤šäº†ï¼Œå¦åˆ™ä¸»åº“ç”Ÿæˆbinlogå¤ªå¿«çš„è¯ï¼Œä¸»åº“çš„ç½‘å¡ä¼šè¢«æ‰“çˆ†ã€‚è¦è¿™ä¹ˆå¤šçš„è¯ï¼Œå¾—åšçº§è”ã€‚<br><br>DBAè§£å†³ä¸èƒ½é åŠ æœºå™¨è§£å†³çš„äº‹æƒ…^_^ è€Œä¸”å¦‚æœé€šè¿‡ä¼˜åŒ–ï¼Œå¯ä»¥æŠŠ13å˜æˆ3ï¼Œé‚£ä¹Ÿæ˜¯DBAçš„ä»·å€¼","user_name":"ä½œè€…å›å¤","comment_id":61520,"uid":"1264162","ip_address":"","utype":1,"ctime":1547717395,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"53087320607","product_id":100020801,"comment_content":"æˆ‘ä¸€èˆ¬æ˜¯å…ˆæ˜¯åœ¨ä»åº“ä¸Šè®¾ç½® set_log_bin=offï¼Œç„¶åæ‰§è¡Œddl,è¯­å¥ã€‚<br>ç„¶åå®Œæˆä»¥åï¼Œä¸»ä»åšä¸€ä¸‹åˆ‡æ¢ã€‚ç„¶ååœ¨ä¸»åº“ä¸Šåœ¨æ‰§è¡Œä¸€ä¸‹set_log_bin=off,æ‰§è¡Œddlè¯­å¥ã€‚<br>ç„¶ååœ¨åšä¸€ä¸‹ä¸»ä»åˆ‡æ¢ã€‚<br>ä¸ªäººå¯¹pt-online-scheman-changeä¸æ˜¯å¾ˆæ¨èä½¿ç”¨ï¼Œå®ƒçš„åŸç†åŸºæœ¬æ˜¯åˆ›å»ºè§¦å‘å™¨ï¼Œç„¶ååˆ›å»ºå’Œæ—§è¡¨ä¸€æ ·ç»“æ„çš„æ•°æ®è¡¨ï¼Œ<br>æŠŠæ—§è¡¨çš„æ•°æ®å¤åˆ¶è¿‡å»ã€‚æœ€ååˆ é™¤æ—§è¡¨ã€‚ä»¥å‰åšä¸ªä¸€ä¸ªæµ‹è¯•ï¼Œå¦‚æœæ—§è¡¨ä¸€ç›´åœ¨è¢«select,åˆ é™¤è¿‡ç¨‹ä¼šä¸€ç›´ä¼šç­‰å¾…ã€‚<br>æ‰€ä»¥ä¸ªäººä¸æ˜¯å¾ˆå»ºè®®ã€‚ä¸‡ä¸€ä¸å°å¿ƒå˜æˆä»åˆ åº“åˆ°è·¯æ­¥ï¼Œé‚£å°±å¾—ä¸å¿å¤±äº†ã€‚<br><br>è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œä¸€ä¸»å¤šä»å¯ä»¥å¤šåˆ°ä»€ä¹ˆåœ°æ­¥ï¼Œä»¥å‰æˆ‘ä»¬CTOè§£å†³çš„æ–¹æ¡ˆå°±æ˜¯åŠ æœºå™¨ï¼Œä¸€ä¸»åä¸‰ä»ã€‚<br>å½“æ—¶æˆ‘æ˜¯åå¯¹çš„ï¼Œå…¶å®ä¸ªäººå»ºè®®è¿˜æ˜¯ä»SQLï¼Œä¸šåŠ¡ä¸Šé¢å»ä¼˜åŒ–ã€‚è€Œä¸æ˜¯ä¸€å‘³çš„åŠ æœºå™¨ã€‚å¦‚æœåŠ æœºå™¨è§£å†³çš„è¯ï¼Œè¿˜è¦DBAåšä»€ä¹ˆå‘¢ï¼Ÿ","like_count":12,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436896,"discussion_content":"å‰é¢çš„åˆ†æå¾ˆå¥½å“ˆ\n\n\nç„¶åä¸€ä¸»13ä»æœ‰ç‚¹å¤šäº†ï¼Œå¦åˆ™ä¸»åº“ç”Ÿæˆbinlogå¤ªå¿«çš„è¯ï¼Œä¸»åº“çš„ç½‘å¡ä¼šè¢«æ‰“çˆ†ã€‚è¦è¿™ä¹ˆå¤šçš„è¯ï¼Œå¾—åšçº§è”ã€‚\n\nDBAè§£å†³ä¸èƒ½é åŠ æœºå™¨è§£å†³çš„äº‹æƒ…^_^ è€Œä¸”å¦‚æœé€šè¿‡ä¼˜åŒ–ï¼Œå¯ä»¥æŠŠ13å˜æˆ3ï¼Œé‚£ä¹Ÿæ˜¯DBAçš„ä»·å€¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547717395,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1177315,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","nickname":"æ²‰æ·€çš„æ¢¦æƒ³","note":"","ucode":"BCB7C26F9D214B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570855,"discussion_content":"åœ¨å¤‡åº“æ‰§è¡Œ DDL å’Œ binlog åŒæ­¥æ‰§è¡Œçš„ DDL æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸ºä»€ä¹ˆèƒ½è§£å†³é—®é¢˜ï¼Ÿ æ±‚è§£ç­”","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651942588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60927,"user_name":"äºŒé©¬","can_delete":false,"product_type":"c1","uid":1006802,"ip_address":"","ucode":"4F1DF8732242A1","user_header":"","comment_is_top":false,"comment_ctime":1547595073,"is_pvip":false,"replies":[{"id":"21727","content":"ä¿®æ”¹max_connectionså‚æ•°","user_name":"ä½œè€…å›å¤","comment_id":60927,"uid":"1264162","ip_address":"","utype":1,"ctime":1547605027,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"53087202625","product_id":100020801,"comment_content":"æœ€è¿‘åšæ€§èƒ½æµ‹è¯•æ—¶å‘ç°å½“å¹¶å‘ç”¨æˆ·è¾¾åˆ°ä¸€å®šé‡(æ¯”å¦‚500)ï¼Œéƒ¨åˆ†ç”¨æˆ·è¿æ¥ä¸ä¸Šï¼Œèƒ½å¦ä»‹ç»ä¸‹MySQLè¿æ¥ç›¸å…³é—®é¢˜ï¼Œè°¢è°¢ï¼","like_count":12,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436667,"discussion_content":"ä¿®æ”¹max_connectionså‚æ•°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547605027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61166,"user_name":"ä¸‡å‹‡","can_delete":false,"product_type":"c1","uid":1309092,"ip_address":"","ucode":"BC9E0918DF4516","user_header":"https://static001.geekbang.org/account/avatar/00/13/f9/a4/f0b92135.jpg","comment_is_top":false,"comment_ctime":1547630544,"is_pvip":false,"replies":[{"id":"21780","content":"1. æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬è¯´çš„æ˜¯ï¼Œå¦‚æœéç´§æ€¥æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯å°½é‡ç”¨gh-ostï¼Œåœ¨â€œç´§æ€¥â€çš„æƒ…å†µä¸‹ï¼Œæ‰è¿™ä¹ˆåšï¼›ç¡®å®æ˜¯è¦ç»•è¿‡proxyçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™äº‹å„¿æ˜¯è¦è´Ÿè´£è¿ç»´çš„åŒå­¦åšï¼›<br>2. ptå·¥å…·æ˜¯æœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¯•ä¸€ä¸‹gh-ostå“ˆï¼›group_replicationå¤šå†™æ¨¡å¼å›½å†…æˆ‘è¿˜æ²¡æœ‰å¬åˆ°å›½å†…æœ‰å…¬å¸åœ¨ç”Ÿäº§ä¸Šå¤§è§„æ¨¡ç”¨çš„ï¼Œå¦‚æœä½ æœ‰ä½¿ç”¨ç»éªŒï¼Œåˆ†äº«ä¸€ä¸‹å“ˆ","user_name":"ä½œè€…å›å¤","comment_id":61166,"uid":"1264162","ip_address":"","utype":1,"ctime":1547635411,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"35907368912","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸‹ã€‚<br>1.å¯¹å¤§è¡¨åšddlï¼Œæ˜¯å¯ä»¥é‡‡ç”¨å…ˆåœ¨å¤‡åº“ä¸Šset global log_bin=offï¼Œå…ˆåšå®Œddlï¼Œç„¶ååˆ‡æ¢ä¸»å¤‡åº“ã€‚ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œåœ¨åˆ‡ä¸»å¤‡çš„æ—¶å€™ï¼Œæ•°æ®åº“ä¼šæœ‰ä¸ªä¸å¯ç”¨çš„æ—¶é—´æ®µï¼Œå¯¹ä¸šåŠ¡ä¼šé€ æˆå½±å“ã€‚ç°åœ¨çš„æ¶æ„æ–¹å¼ï¼Œä¸­é—´å±‚è¿˜æœ‰proxyï¼Œæ„å‘³ç€proxyä¹Ÿéœ€è¦ä¿®æ”¹ä¸»å¤‡é…ç½®ï¼Œåšreloadã€‚è¿™æ ·åšçš„è¯ï¼Œæ„Ÿè§‰æˆæœ¬å¤ªé«˜ï¼Œåœ¨çœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿™ç§æ–¹æ³•é€‚ç”¨å—ï¼Ÿ<br>2.ç›®å‰æˆ‘ä»¬å¸¸é‡‡ç”¨çš„æ˜¯å¯¹å‡ ç™¾ä¸‡ä»¥ä¸Šçš„è¡¨ç”¨pt-online-schema-changeï¼Œè¿™ç§æ–¹å¼ä¼šäº§ç”Ÿå¤§é‡çš„binlogï¼Œä¸šåŠ¡é«˜å³°æœŸä¸èƒ½åšï¼Œä¼šå¼•èµ·ä¸»å¤‡å»¶è¿Ÿã€‚åœ¨ç”Ÿäº§ä¸šåŠ¡ä¸­ï¼Œæˆ‘è§‰å¾—ç­‰ä¸»åº“èŠ‚ç‚¹æˆ–è€…ç­‰gtidè¿™ç§æ–¹æ¡ˆæŒºä¸é”™ï¼Œè‡³å°‘èƒ½ä¿è¯ä¸šåŠ¡ï¼Œä½†ä¹Ÿä¼šå¢åŠ ä¸»åº“çš„å‹åŠ›ã€‚<br>3.5.7ç‰ˆæœ¬å‡ºçš„group_replicationå¤šå†™æ¨¡å¼æ€§èƒ½ä¸çŸ¥é“å¦‚ä½•ï¼Ÿæ¶æ„å˜åŠ¨å¤ªå¤§ï¼Œè¿˜ä¸æ•¢ä¸Šã€‚<br>","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436770,"discussion_content":"1. æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬è¯´çš„æ˜¯ï¼Œå¦‚æœéç´§æ€¥æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯å°½é‡ç”¨gh-ostï¼Œåœ¨â€œç´§æ€¥â€çš„æƒ…å†µä¸‹ï¼Œæ‰è¿™ä¹ˆåšï¼›ç¡®å®æ˜¯è¦ç»•è¿‡proxyçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™äº‹å„¿æ˜¯è¦è´Ÿè´£è¿ç»´çš„åŒå­¦åšï¼›\n2. ptå·¥å…·æ˜¯æœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¯•ä¸€ä¸‹gh-ostå“ˆï¼›group_replicationå¤šå†™æ¨¡å¼å›½å†…æˆ‘è¿˜æ²¡æœ‰å¬åˆ°å›½å†…æœ‰å…¬å¸åœ¨ç”Ÿäº§ä¸Šå¤§è§„æ¨¡ç”¨çš„ï¼Œå¦‚æœä½ æœ‰ä½¿ç”¨ç»éªŒï¼Œåˆ†äº«ä¸€ä¸‹å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547635411,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356393,"discussion_content":"gh-ostå·¥å…·ä»‹ç»ï¼šhttps://www.cnblogs.com/zhoujinyi/p/9187502.html\npt-oscæ­»é”åˆ†æï¼šhttps://www.cnblogs.com/code-007/p/7729569.html","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1615576049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253869,"user_name":"å¤©ä¸‹ç¬¬ä¸ƒ","can_delete":false,"product_type":"c1","uid":1085515,"ip_address":"","ucode":"62560E80452772","user_header":"https://static001.geekbang.org/account/avatar/00/10/90/4b/ba24dc0e.jpg","comment_is_top":false,"comment_ctime":1602924249,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27372728025","product_id":100020801,"comment_content":"è¿™ç»å¯¹æå®¢æ—¶é—´æœ€å¹²è´§çš„ä¸“æ ï¼Œå†…å®¹+è¯„è®ºéƒ½æ˜¯é«˜ç²¾ï¼ŒåŸæ¥æˆ‘ä¸ä¼šMySQLï¼Œæˆ‘å¯¹MySQLä¸€æ— æ‰€çŸ¥ï¼Œæƒ­æ„§æƒ­æ„§ã€‚","like_count":6},{"had_liked":false,"id":174221,"user_name":"Zhaoyang","can_delete":false,"product_type":"c1","uid":1037190,"ip_address":"","ucode":"131D83AC2566D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d3/86/b5d72c87.jpg","comment_is_top":false,"comment_ctime":1580094508,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"27349898284","product_id":100020801,"comment_content":"æœ€è¿‘è¿™å‡ ç¯‡æ–‡ç« ï¼ŒçœŸæ˜¯çœ‹çš„æˆ‘æ¯”è¾ƒè¾›è‹¦ï¼Œå› ä¸ºæˆ‘å¹³æ—¶çš„ä¸šåŠ¡éƒ½æ˜¯å¢åˆ æ”¹æŸ¥ï¼Œè€Œä¸”ï¼Œæœ‰DBAåŒå­¦å‘¢ï¼Œæ‰€ä»¥ä¸»ä»è¿™é‡Œæˆ‘æ¥è§¦çš„éå¸¸å°‘ï¼Œæˆ‘é¡¶å¤šä¹Ÿå°±è€ƒè™‘ä¸€ä¸‹ä¸»ä»ä¸åŒæ­¥çš„é—®é¢˜ã€‚å…¶ä»–é—®é¢˜æˆ‘éƒ½ä¸ä¼šæƒ³åˆ°ã€‚ä¹Ÿä¸ä¼šçŸ¥é“æ€ä¹ˆè§£å†³ã€‚<br>é‚£æˆ‘æ¥ä¸‹æ¥è¿˜æ˜¯å…ˆæŠŠä¸“æ è¿‡ä¸€éæŠŠï¼Œå…ˆç•™ä¸ªå¤§æ¦‚å…¶çš„å°è±¡ï¼Œç›®å‰æ¥è¯´å¹¶æ²¡æœ‰ææ‡‚ï¼Œå› ä¸ºè‡ªå·±ç¡®å®æ²¡æœ‰ç»å†è¿‡ã€‚","like_count":6,"discussions":[{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292767,"discussion_content":"æˆ‘ä¹Ÿä¸€æ ·çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1595324856,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1658592,"avatar":"https://static001.geekbang.org/account/avatar/00/19/4e/e0/25cc5c57.jpg","nickname":"finalğŸ‘¿ ğŸ‘¿","note":"","ucode":"10F728A2DD3753","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533178,"discussion_content":"ç¡®å®ï¼Œçœ‹åˆ°åé¢æ„Ÿè§‰éƒ½ æœ‰ç‚¹æ¨¡ç³Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637808069,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84701,"user_name":"å•Šå•Šå•Šå“¦å“¦","can_delete":false,"product_type":"c1","uid":1309877,"ip_address":"","ucode":"68C7153ECAAC57","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/RNO4yZyBvic914hewmNNE8iblYDcfv5yGHZ9OnKuCuZXNmGR0F5qV3icKLT2xpMt66GyEpicZVvrmz8A6TIqt92MQg/132","comment_is_top":false,"comment_ctime":1554896110,"is_pvip":false,"replies":[{"id":"30743","content":"è®¾è®¡ä¸å‡ºbugçš„è¯ï¼Œåº”è¯¥è¦ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":84701,"uid":"1264162","ip_address":"","utype":1,"ctime":1555146383,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"23029732590","product_id":100020801,"comment_content":"è€å¸ˆã€‚æœ€è¿‘å…¬å¸åœ¨é˜¿é‡Œäº‘è¦ç”¨ ä¸€ä¸»å¤šä»ã€‚ æˆ‘æƒ³é—®ä¸‹é˜¿é‡Œçš„ã€‚ select *from test for update ä¼šå®šä½åˆ°ä¸»åº“å—","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446424,"discussion_content":"è®¾è®¡ä¸å‡ºbugçš„è¯ï¼Œåº”è¯¥è¦ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555146383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009693,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJLxEbhSEziblPNVkr9XFIAzPCib0TQvBxHYwiaKiaib7ExZ8dmUWyqWoibSedACTHCf52INMib80ic92G6wQ/132","nickname":"åˆ˜ç« ","note":"","ucode":"7608C518D49AE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581795,"discussion_content":"è¿™ç§æŸ¥è¯¢æœ‰é£é™©å§ï¼Œä¼šé”è¡¨å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658996053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61095,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1547619253,"is_pvip":false,"replies":[{"id":"21762","content":"1. è¿™ä¸ªç­‰å¾…æ—¶é—´å…¶å®å°±åŸºæœ¬ä¸Šæ˜¯ä¸»å¤‡å»¶è¿Ÿçš„æ—¶é—´<br>2. ç”¨äº†proxyè¿™äº‹æƒ…å°±å¾—proxyåšäº†ï¼Œå°±ä¸è¦å®¢æˆ·ç«¯åšäº†ã€‚æ²¡æœ‰gtidï¼Œå¯ä»¥ç”¨å€’æ•°ç¬¬äºŒç§æ–¹æ³•å‘€ï¼šï¼‰<br>3. æ˜¯çš„ï¼Œå…¶å®â€œèµ°ä¸»åº“â€è¿™ç§åšæ³•è¿˜æŒºå¤šçš„ã€‚æˆ‘ä¹‹å‰çœ‹åˆ°æœ‰çš„å…¬å¸çš„åšæ³•ï¼Œå°±æ˜¯ç›´æ¥æ‹†åº“äº†ã€‚ç­‰äºä¸€å¥—â€œä¸€ä¸»å¤šä»â€æ‹†æˆå¤šå¥—ã€‚","user_name":"ä½œè€…å›å¤","comment_id":61095,"uid":"1264162","ip_address":"","utype":1,"ctime":1547622136,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"23022455733","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰å‡ ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸‹ï¼Œ<br>1.å¦‚æœä¸æƒ³æœ‰è¿‡æœŸè¯»ï¼Œç”¨ç­‰GTIDçš„æ–¹æ¡ˆï¼Œé‚£ä¹ˆæ¯æ¬¡æŸ¥è¯¢éƒ½è¦æœ‰ç­‰GTIDçš„ç›¸å…³æ“ä½œï¼Œå¢åŠ çš„è¿™éƒ¨åˆ†å¯¹æ€§èƒ½æœ‰å¤šå°‘å½±å“ï¼›<br>2.æˆ‘ä»¬ç”¨çš„è¯»å†™åˆ†ç¦»proxyä¸æ”¯æŒç­‰GTIDï¼Œé‚£æ˜¯ä¸æ˜¯è‡ªå·±è¦åœ¨å®¢æˆ·ç«¯å®ç°è¿™éƒ¨åˆ†é€»è¾‘ï¼Œç­‰äºè¯»å†™åˆ†ç¦»çš„æ¶æ„æ—¢ç”¨äº†proxyï¼Œåˆåœ¨å®¢æˆ·ç«¯åšäº†ç›¸å…³ç­–ç•¥ï¼Œæ„Ÿè§‰è¿™æ–¹æ¡ˆæ›´é€‚åˆæœ‰èƒ½åŠ›è‡ªç ”proxyçš„å…¬å¸å•Šï¼›<br>3.æ„Ÿè§‰ç›®å‰å¤§å¤šæ•°ç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯ç”¨çš„è¯»ä¸»åº“è¿™ç§æ–¹å¼é¿å…è¿‡æœŸè¯»ï¼Œå¦‚æœåªèƒ½ç”¨è¿™ç§æ–¹æ¡ˆçš„è¯è¯¥æ€ä¹ˆæ‰©å±•mysqlæ¶æ„æ¥é¿å…ä¸»åº“å‹åŠ›å¤ªå¤§å‘¢ã€‚<br>æˆ‘ä»¬æ˜¯é¡¹ç›®ä¸Šçº¿å¾ˆä¹…ç„¶ååŠ çš„è¯»å†™åˆ†ç¦»ï¼Œå¥½å¤šserviceå±‚ä»£ç å†™çš„ä¸å¥½ï¼Œå¯ä»¥è¯»ä»åº“çš„sqlè¢«å†™åˆ°äº†äº‹åŠ¡ä¸­ï¼Œè¿™æ ·ä¼šè¢«proxyè½¬åˆ°ä¸»åº“ä¸Šè¯»ï¼Œæ‰€ä»¥å¯¼è‡´ä¸»åº“è´Ÿæ‹…äº†å¥½å¤šè¯»çš„sqlï¼Œæ„Ÿè§‰è¯»å†™åˆ†ç¦»ä¸ä»…å¯¹mysqlè¿™å—è¦æŒæ¡ï¼Œæ•´ä½“çš„ä»£ç ç»“æ„ä¸Šä¹Ÿè¦æœ‰æ‰€è°ƒæ•´å§ã€‚","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436741,"discussion_content":"1. è¿™ä¸ªç­‰å¾…æ—¶é—´å…¶å®å°±åŸºæœ¬ä¸Šæ˜¯ä¸»å¤‡å»¶è¿Ÿçš„æ—¶é—´\n2. ç”¨äº†proxyè¿™äº‹æƒ…å°±å¾—proxyåšäº†ï¼Œå°±ä¸è¦å®¢æˆ·ç«¯åšäº†ã€‚æ²¡æœ‰gtidï¼Œå¯ä»¥ç”¨å€’æ•°ç¬¬äºŒç§æ–¹æ³•å‘€ï¼šï¼‰\n3. æ˜¯çš„ï¼Œå…¶å®â€œèµ°ä¸»åº“â€è¿™ç§åšæ³•è¿˜æŒºå¤šçš„ã€‚æˆ‘ä¹‹å‰çœ‹åˆ°æœ‰çš„å…¬å¸çš„åšæ³•ï¼Œå°±æ˜¯ç›´æ¥æ‹†åº“äº†ã€‚ç­‰äºä¸€å¥—â€œä¸€ä¸»å¤šä»â€æ‹†æˆå¤šå¥—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547622136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":281479,"user_name":"æˆ‘æ˜¯æ›¾ç»é‚£ä¸ªå°‘å¹´","can_delete":false,"product_type":"c1","uid":1015189,"ip_address":"","ucode":"9F02F7FF147D14","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7d/95/dd73022c.jpg","comment_is_top":false,"comment_ctime":1614761276,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18794630460","product_id":100020801,"comment_content":"é˜¿é‡Œäº‘æ•°æ®åº“çš„æ–¹æ¡ˆå°±æ˜¯ï¼Œå¢åŠ äº‹ç‰©æ³¨è§£å¼ºåˆ¶èµ°ä¸»åº“ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªæ€è·¯æŒºå¥½ï¼Œä¸šåŠ¡ä¸Šä¹Ÿæ¯”è¾ƒç®€å•ã€‚","like_count":5},{"had_liked":false,"id":122967,"user_name":"Charles | å§œæµ·é¾™","can_delete":false,"product_type":"c1","uid":1178235,"ip_address":"","ucode":"17BA74D1684184","user_header":"https://static001.geekbang.org/account/avatar/00/11/fa/7b/f89a398b.jpg","comment_is_top":false,"comment_ctime":1565580540,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18745449724","product_id":100020801,"comment_content":"è¿™ä¸“æ çœŸçš„æ˜¯å¹²è´§æ»¡æ»¡ï¼Œæ¯çœ‹ä¸€ç¯‡æˆ‘éƒ½æœ‰â€œæˆ‘å‘ç°æˆ‘çœŸçš„ä¸ä¼šä½¿ç”¨MySQLâ€å’Œâ€œæˆ‘åŸæ¥æŠŠMySQLç”¨é”™äº†â€çš„æŒ«è´¥æ„Ÿ","like_count":4,"discussions":[{"author":{"id":1997293,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/79/ed/4737a49b.jpg","nickname":"é›ªã®é›«Â·é›¨ã®éŸ³","note":"","ucode":"0693DA3939A321","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270422,"discussion_content":"è¶Šå­¦è¶Šå‘ç°è‡ªå·±æ‡‚å¾—ä¸å¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590001869,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1044546,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f0/42/7728d4f5.jpg","nickname":"è‰¿è‰¿","note":"","ucode":"8F727AB7A7F6B2","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":39163,"discussion_content":"åŒæŒ«è´¥æ„Ÿã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571899644,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":103950,"user_name":"æ™“æ°","can_delete":false,"product_type":"c1","uid":1441546,"ip_address":"","ucode":"1174C88EEBF8A6","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/0a/12faa44e.jpg","comment_is_top":false,"comment_ctime":1560570831,"is_pvip":false,"replies":[{"id":"37609","content":"åœ¨è¯´ä¸»å¤‡å»¶è¿Ÿ&#47;ä¸»ä»å»¶è¿Ÿçš„æ—¶å€™ï¼Œä»åº“å’Œå¤‡åº“æˆ‘å½“æˆåŒä¸€ä¸ªæ¦‚å¿µäº†ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":103950,"uid":"1264162","ip_address":"","utype":1,"ctime":1560585460,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"18740440015","product_id":100020801,"comment_content":"çœ‹äº†åˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿè¿™ç§æ–¹æ¡ˆï¼Œæœ‰ä¸ªç–‘æƒ‘ï¼š<br>è¯»å†™åˆ†ç¦»çš„è¯»åº”è¯¥æ˜¯è¯»ä»åº“çš„å§ï¼Œä¸ºä»€ä¹ˆæ˜¯å»åˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿï¼Œè€Œä¸æ˜¯åˆ¤æ–­ä¸»ä»çš„æ— å»¶è¿Ÿ<br>","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":454071,"discussion_content":"åœ¨è¯´ä¸»å¤‡å»¶è¿Ÿ/ä¸»ä»å»¶è¿Ÿçš„æ—¶å€™ï¼Œä»åº“å’Œå¤‡åº“æˆ‘å½“æˆåŒä¸€ä¸ªæ¦‚å¿µäº†ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560585460,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":310771,"user_name":"SZQ","can_delete":false,"product_type":"c1","uid":2372454,"ip_address":"","ucode":"DB138F4A65CF87","user_header":"https://static001.geekbang.org/account/avatar/00/24/33/66/edaee2fc.jpg","comment_is_top":false,"comment_ctime":1630898310,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14515800198","product_id":100020801,"comment_content":"è¿™ä¸€ç¯‡çœ‹äº†ç¬¬ä¸‰éï¼Œè¿˜æ˜¯çœ‹å¾—å¤´æ™•ï¼Œç­‰åˆ°çŒ´å¹´é©¬æœˆå†å›æ¥çœ‹ä¸€ä¸‹å§","like_count":3},{"had_liked":false,"id":209904,"user_name":"æ¨","can_delete":false,"product_type":"c1","uid":1971269,"ip_address":"","ucode":"7EFEFE285975C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/oltLEqTrmHm2aJP99BK6tHu5h7hp4aj08wR5Wt6H31iadFduDAVvjYKmhQ2nvGbLV3lkVdiat2GRasgWXoJeTibUg/132","comment_is_top":false,"comment_ctime":1587633828,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14472535716","product_id":100020801,"comment_content":"æˆ‘ä¸»ä»åº“ä»¥å‰éƒ½ä¸çŸ¥é“æ€ä¹ˆå®ç°çš„å“ˆå“ˆï¼Œçœ‹äº†è€å¸ˆçš„ä¸“æ å­¦åˆ°äº†å¾ˆå¤š<br>å¦‚ä½•å¼€å¯gtidè€å¸ˆçœ‹çœ‹è¿™ä¸ªå¯ä»¥å—?<br>gtid_mode=ON<br>enforce_gtid_consistency=ON<br>http:&#47;&#47;blog.itpub.net&#47;31429259&#47;viewspace-2643665&#47;<br>ç­‰åº“ä½ç‚¹æ–¹æ¡ˆselect master_pos_wait(File, Position, 1)æˆ‘åœ¨mysqlä¸­æ‰§è¡Œä¸äº†æ˜¯ä»€ä¹ˆåŸå› å‘€?<br>å®¢æˆ·ç«¯ä»£ç ä¸­è°ƒç”¨ mysql_session_track_get_first è¿™ä¸ªå‡½æ•°?<br>è¿™ä¸ªæˆ‘ç”¨javaæˆ–è€…goæ€ä¹ˆè°ƒç”¨?ç›´æ¥javaè°ƒç”¨å‡½æ•°å‡½æ•°ä¸€æ ·è°ƒç”¨mysql_session_track_get_firstå—","like_count":3},{"had_liked":false,"id":64264,"user_name":"IceGeek17","can_delete":false,"product_type":"c1","uid":1103101,"ip_address":"","ucode":"1B42D7260449B4","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/fd/43802282.jpg","comment_is_top":false,"comment_ctime":1548728736,"is_pvip":false,"replies":[{"id":"22953","content":"é¢ï¼Œè¿™ä¸ªé—®é¢˜æœ‰ç‚¹å¤§â€¦ ä½ æä¸€ä¸ªå…·ä½“é—®é¢˜æˆ‘ä»¬æ¥è®¨è®ºå§","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548940648,"ip_address":"","comment_id":64264,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14433630624","product_id":100020801,"comment_content":"è€å¸ˆï¼Œèƒ½ä¸èƒ½åˆ†æä¸‹ï¼Œå¦‚æœå»å®ç°ä¸€ä¸ªåšè¯»å†™åˆ†ç¦»çš„proxyï¼Œæœ‰å“ªäº›é‡è¦çš„ç‚¹è¦è€ƒè™‘ï¼Œæ¯”å¦‚ï¼šè¿æ¥ç®¡ç†ã€æµé‡åˆ†é…ç®¡ç†ã€proxyè‡ªå·±çš„é«˜å¯ç”¨ï¼Œç­‰ç­‰ã€‚<br>å› ä¸ºè€å¸ˆåŸæ¥çš„å›¢é˜Ÿè‡ªå·±å¼€å‘è¿‡proxyï¼Œè‚¯å®šæœ‰ç›¸å…³çš„ç»éªŒï¼Œä¹Ÿè¶Ÿè¿‡å¾ˆå¤šå‘ï¼Œèƒ½ä¸èƒ½ä»å¦‚ä½•å®ç°ä¸€ä¸ªproxyéœ€è¦è€ƒè™‘å“ªäº›å…³é”®ç‚¹ï¼Œåœ¨æ¶æ„ä¸Šåšä¸€ä¸ªåˆ†æå’Œæ¢³ç†","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437928,"discussion_content":"é¢ï¼Œè¿™ä¸ªé—®é¢˜æœ‰ç‚¹å¤§â€¦ ä½ æä¸€ä¸ªå…·ä½“é—®é¢˜æˆ‘ä»¬æ¥è®¨è®ºå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548940648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62346,"user_name":"black_mirror","can_delete":false,"product_type":"c1","uid":1320092,"ip_address":"","ucode":"2549C87298BF12","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM4z9WYWVvWDhMF0SicPE5ad56ME6DibyWGbRoQa0lH4U9icdsjNcv3ssRickcuRMDA01e6vMXnmOVSr9l5LVUefVxicn/132","comment_is_top":false,"comment_ctime":1548035991,"is_pvip":false,"replies":[{"id":"22030","content":"ä¸çŸ¥é“pythonæ˜¯ä¸æ˜¯æœ‰æ–¹æ³•å¯ä»¥æŠŠcä»£ç ä½œä¸ºæ‰©å±•æ¨¡å—ğŸ˜…","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548037506,"ip_address":"","comment_id":62346,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14432937879","product_id":100020801,"comment_content":"æ—è€å¸ˆ æ‚¨å¥½<br>è¯·é—®mysql_session_track_get_fitstè¿™ä¸ªå‡½æ•°æŸ¥è¯¢äº†å®˜æ–¹èµ„æ–™éƒ½éœ€è¦å¯ä»¥ä¿®æ”¹æºç <br>1.åœ¨ä¸æ‡‚c++æƒ…å†µä¸‹ï¼Œgithubä¸Šä¸‹è½½æºç åæ€ä¹ˆå°è¯•ç®€å•ç¼–è¯‘ä½¿ç”¨ï¼Œå¦‚å›¾8ä»£ç <br>2. mysql_session_track_get_fitstå‡½æ•°è²Œä¼¼æ²¡æœ‰pythonè¯­è¨€apiï¼Œä¸ä¼šjavaï¼Œæƒ³åœ¨ä»£ç å±‚é¢æ¨¡æ‹Ÿæ•´ä¸ªè¿‡ç¨‹ï¼Œè¿˜æœ‰æœ¨æœ‰è§£å†³æ–¹æ³•ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437176,"discussion_content":"ä¸çŸ¥é“pythonæ˜¯ä¸æ˜¯æœ‰æ–¹æ³•å¯ä»¥æŠŠcä»£ç ä½œä¸ºæ‰©å±•æ¨¡å—ğŸ˜…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548037506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61393,"user_name":"ThinkingQuest","can_delete":false,"product_type":"c1","uid":1118560,"ip_address":"","ucode":"597D0C00DAEFE4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/0SDRac7XoordnKYgDLhz5wxAOtE6xqcsSywsywEtKQAR7xicBZQ6ceYftfZjl4Ivq3a5dzvRhYkn2GcUWiaQK7ZQ/132","comment_is_top":false,"comment_ctime":1547689149,"is_pvip":false,"replies":[{"id":"21868","content":"JDBCçš„connectoræˆ‘ä¹Ÿæ²¡ç ”ç©¶è¿‡ï¼Œä¸è¿‡æˆ‘è®¤ä¸ºåº”è¯¥æ˜¯éinteractiveæ¨¡å¼ã€‚<br><br>éœ€è¦è¿™ä¸¤ä¸ªçš„åŸå› ï¼Œè¿˜æ˜¯å› ä¸ºæœ‰ä¸åŒçš„ä½¿ç”¨æ¨¡å¼ï¼Œç»™MySQLå®¢æˆ·ç«¯å’Œä¸€äº›å…¶ä»–çš„å¯è§†åŒ–å·¥å…·å®¢æˆ·ç«¯ä½¿ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547717492,"ip_address":"","comment_id":61393,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14432591037","product_id":100020801,"comment_content":"æ¥¼ä¸Šæœ‰äººæåˆ°8å°æ—¶è‡ªåŠ¨æ–­å¼€è¿æ¥çš„é—®é¢˜ã€‚ <br>mysqlä¸­æœ‰wait_timeoutå’Œinteractive_timeoutä¸¤ä¸ªå‚æ•°ã€‚ <br><br>è¿™ä¿©å‚æ•°æŒºå®¹æ˜“æ··æ·†çš„ï¼Œå¾€ä¸Šåšå®¢æ–‡ç« è¯´çš„å¾ˆå¤šï¼Œä½†æ˜¯ä¸æ•¢ç›¸ä¿¡ä»–ä»¬ã€‚<br>å®˜æ–¹çš„è§£é‡Šåœ¨è¿™é‡Œï¼š<br>https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;server-system-variables.html#sysvar_interactive_timeout<br>https:&#47;&#47;dev.mysql.com&#47;doc&#47;refman&#47;8.0&#47;en&#47;server-system-variables.html#sysvar_wait_timeout<br><br>åªè¯´ç”¨è¿™ä¸¤ä¸ªå‚æ•°ä¸­çš„å“ªä¸ªï¼Œå–å†³äºå®¢æˆ·ç«¯è°ƒç”¨mysql_real_connect()çš„æ—¶å€™ä¼ é€’çš„optionsä¸­æ˜¯å¦ä½¿ç”¨äº†CLIENT_INTERACTIVEé€‰é¡¹ã€‚<br><br>ä½†æ˜¯å¾ˆå¤šåšjavaå¼€å‘çš„åŒå­¦ï¼Œæƒ³å¿…å¹¶ä¸çŸ¥é“JDBCçš„connectorç”¨çš„æ˜¯å“ªä¸€ä¸ªã€‚ <br>æˆ‘å€¾å‘äºè®¤ä¸ºæ˜¯interactive_timeoutã€‚ mysql client cliå¤§æ¦‚æ˜¯wait_timeoutå§ã€‚<br>å…¶å®åšä¸€ä¸ªå®éªŒå°±å¯ä»¥çŸ¥é“ç»“æœã€‚ ä½†æ˜¯ä¸é˜…è¯»mysqlä»£ç ï¼Œå¤§æ¦‚ä¸èƒ½ç†è§£mysqlä¸ºä»€ä¹ˆè®¾è®¡è¿™ä¹ˆä¸¤ä¸ªtimeoutï¼Œæ˜¯å‡ºäºä»€ä¹ˆè€ƒè™‘çš„ã€‚","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436861,"discussion_content":"JDBCçš„connectoræˆ‘ä¹Ÿæ²¡ç ”ç©¶è¿‡ï¼Œä¸è¿‡æˆ‘è®¤ä¸ºåº”è¯¥æ˜¯éinteractiveæ¨¡å¼ã€‚\n\néœ€è¦è¿™ä¸¤ä¸ªçš„åŸå› ï¼Œè¿˜æ˜¯å› ä¸ºæœ‰ä¸åŒçš„ä½¿ç”¨æ¨¡å¼ï¼Œç»™MySQLå®¢æˆ·ç«¯å’Œä¸€äº›å…¶ä»–çš„å¯è§†åŒ–å·¥å…·å®¢æˆ·ç«¯ä½¿ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547717492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":253884,"user_name":"moonfox","can_delete":false,"product_type":"c1","uid":1526355,"ip_address":"","ucode":"902BFF40EFA9FA","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","comment_is_top":false,"comment_ctime":1602932173,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"10192866765","product_id":100020801,"comment_content":"è¯·é—®ä¸‹ï¼Œæ–‡ä¸­æåˆ° â€œå¦‚æœä¸»åº“æ‰ç”µçš„æ—¶å€™ï¼Œæœ‰äº› binlog è¿˜æ¥ä¸åŠå‘ç»™ä»åº“ï¼Œä¼šå¯¼è‡´ç³»ç»Ÿæ•°æ®ä¸¢å¤±â€ã€‚è¿™é‡Œæ‰€è¯´çš„ç³»ç»Ÿæ•°æ®ä¸¢å¤±æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿä»åº“æ²¡æ”¶åˆ°æ—¥å¿—å¯¼è‡´çš„ä¸»ä»ä¸ä¸€è‡´ï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œä¸»åº“æ¢å¤åï¼Œä¸å¯ä»¥é‡æ–°ä¼ ç»™ä»åº“ä¹ˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1201009,"avatar":"https://static001.geekbang.org/account/avatar/00/12/53/71/a4e9f20e.jpg","nickname":"è¨€åˆæœ¨æ‰","note":"","ucode":"300BEDC1B07DF1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":349606,"discussion_content":"åº”è¯¥æ˜¯è¿™æ ·ä¸€ä¸ªæƒ…æ™¯ï¼Œä¹‹å‰è¯´è¿‡åœ¨ä¸»åº“ä¸­ä¸€ä¸ªäº‹åŠ¡çš„å®Œæˆæ˜¯ï¼šredolog prepare => binlog commit => redolog commitã€‚å½“æ–­ç”µç¬é—´æ‰§è¡Œåˆ° binlog commitæ—¶æ–­ç”µï¼Œä½†æ˜¯æ­¤æ—¶ redolog prepare é˜¶æ®µå·²ç»å†™å…¥åˆ° redolog æ–‡ä»¶äº†ï¼Œè€Œ binlog å› ä¸ºæ–­ç”µè¿˜æ²¡æœ‰è½ç›˜ï¼Œè€Œå½“ä¸»åº“é‡å¯æ—¶å€™ï¼Œæ•°æ®æ¢å¤è¿‡ç¨‹ä¸­æ ¹æ® redolog å‘ç°äº‹åŠ¡å·²ç»å®Œæˆï¼Œä½†æ˜¯binlogæ²¡æœ‰ï¼Œä¼šè¡¥å…¨ç¼ºå¤±çš„æ•°æ®ï¼Œä½†æ˜¯å¹¶ä¸ä¼šäº§ç”Ÿbinlogäº†ã€‚ç›´è§‚ä¸Šæ¥çœ‹å°±æ˜¯ï¼Œè¿™ä¸ªäº‹åŠ¡åœ¨ä¸»åº“æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯ binlog æ–‡ä»¶ç¼ºå¤±äº†ã€‚æ‰€ä»¥å°±ç®—ä¸»ä»æ¢å¤äº†ï¼Œä»åº“è¯·æ±‚åŒæ­¥ï¼Œä¸»åº“ä¹Ÿæ²¡æœ‰ä¸œè¥¿å‘è¿‡å»ï¼Œä»åº“è‡ªç„¶æ•°æ®å°±ä¼šä¸¢å¤±ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1613377627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":1201009,"avatar":"https://static001.geekbang.org/account/avatar/00/12/53/71/a4e9f20e.jpg","nickname":"è¨€åˆæœ¨æ‰","note":"","ucode":"300BEDC1B07DF1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376781,"discussion_content":"binlog æ²¡æœ‰ commitï¼Œä¸»åº“é‡å¯ä¸ä¼šæ¢å¤æ•°æ®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622343182,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":349606,"ip_address":""},"score":376781,"extra":""}]},{"author":{"id":1130590,"avatar":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","nickname":"Ryoma","note":"","ucode":"7F692369239692","race_medal":2,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376782,"discussion_content":"å¦‚æœä¸»åº“ä¸€ç›´æ‰ç”µå‘¢ï¼Ÿåªèƒ½é€šè¿‡å¤‡åº“æ¢å¤æ•°æ®ï¼Œè€Œæ­¤æ—¶æœ‰éƒ¨åˆ†æ•°æ®ä»…å­˜åœ¨ä¸»åº“ä¸­ï¼Œæ•…è€Œä¼šå¯¼è‡´æ•°æ®ç¼ºå¤±","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622343235,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77058,"user_name":"æ¶›å“¥å“¥","can_delete":false,"product_type":"c1","uid":1361159,"ip_address":"","ucode":"329A1384E3AB5E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","comment_is_top":false,"comment_ctime":1552821503,"is_pvip":false,"replies":[{"id":"28207","content":"ä¸å»ºè®®ï¼Œå®¹æ˜“ä¸»å¤‡ä¸ä¸€è‡´","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1552918759,"ip_address":"","comment_id":77058,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142756095","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹ï¼Œä¸»åº“ç”¨innodbå¼•æ“ï¼Œ ä»åº“ç”¨ myisamå¯ä»¥å—ï¼Ÿå¦‚æœä¸»åº“æŒ‚äº†ï¼Œä¸å‡†å¤‡ç”¨ä»åº“é¡¶ä¸Šæ¥ï¼Œå»ºè®®è¿™æ ·ç”¨ä¸åŒå¼•æ“å—ï¼Ÿè°¢è°¢è€å¸ˆ  ğŸ˜ŠğŸ˜Š","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443566,"discussion_content":"ä¸å»ºè®®ï¼Œå®¹æ˜“ä¸»å¤‡ä¸ä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552918759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306743,"user_name":"Geek_8a8abf","can_delete":false,"product_type":"c1","uid":1546393,"ip_address":"","ucode":"05A27D9DB4EC22","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL3UicUedUgydknpcnBRh58IZPmeoPnEYzt3KgwPk7XfdwR9LDaicGhIXJibTw2c8sVAUu24zmD1bDew/132","comment_is_top":false,"comment_ctime":1628687990,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5923655286","product_id":100020801,"comment_content":"ä»å¼€å‘çš„è§’åº¦è€ƒè™‘ï¼Œç­‰å¾…ä¸»åº“ä½ç‚¹å’ŒGTIDçš„æ–¹æ¡ˆä¸çŸ¥é“æ€ä¹ˆåœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨ï¼Œå¯¹äºæ•°æ®çš„è¯»å’Œå†™ä¸€èˆ¬éƒ½æ˜¯ä¸åŒçš„çº¿ç¨‹æˆ–è¿›ç¨‹ï¼ŒAæ›´æ–°äº†æŸè¡Œæ•°æ®æäº¤åå¯ä»¥æ‹¿åˆ°GTIDï¼Œä½†æ˜¯Bè¿›ç¨‹å»è¯»æ•°æ®çš„æ—¶å€™æ€ä¹ˆå»æ‹¿åˆ°Aæ›´æ–°åçš„GTIDï¼Œä»è€Œåˆ¤æ–­ä»åº“å·²ç»æ˜¯æœ€æ–°çš„æ•°æ®äº†","like_count":1},{"had_liked":false,"id":269125,"user_name":"x-rayîŒº","can_delete":false,"product_type":"c1","uid":1140175,"ip_address":"","ucode":"8363F0C4D0AC0B","user_header":"https://static001.geekbang.org/account/avatar/00/11/65/cf/326c0eea.jpg","comment_is_top":false,"comment_ctime":1608533566,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5903500862","product_id":100020801,"comment_content":"ç­‰ä½ç‚¹å’ŒGTIDè¿™ä¸¤ä¸ªæ–¹æ¡ˆï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼Œè¿™ä¸ªçœ‹èµ·æ¥ï¼Œä¼¼ä¹åªèƒ½ç”¨åœ¨ä¸€æ¬¡æ›´æ–°ç´§æ¥ç€ä¸€æ¬¡æŸ¥è¯¢çš„æ—¶å€™ã€‚å› ä¸ºæ­¤æ—¶ä»–ä»¬å¤„äºåŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œæˆ–è€…è¯´åŒä¸€ä¸ªHTTPè¯·æ±‚ä¸­ã€‚æ‰€ä»¥è¿™æ¬¡æŸ¥è¯¢èƒ½æ‹¿åˆ°ä¸Šæ¬¡æ›´æ–°çš„ä½ç‚¹å’ŒGTIDã€‚å‡å¦‚Aç”¨æˆ·æ›´æ–°ï¼ŒBç”¨æˆ·æŸ¥è¯¢ï¼Œè¿™ç§æƒ…å†µï¼ŒBç”¨æˆ·çš„è¿™ä¸ªæŸ¥è¯¢ï¼Œæ€ä¹ˆæ‹¿åˆ°Aç”¨æˆ·é‚£æ¬¡æ›´æ–°çš„GTIDæˆ–è€…ä½ç‚¹å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2031114,"avatar":"","nickname":"æ¯›æ¯›é…±","note":"","ucode":"056E939BD62D44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351734,"discussion_content":"æˆ‘ä¹Ÿæœ‰åŒæ ·çš„ç–‘é—®ï¼Œä½ å¾—åˆ°ç­”æ¡ˆäº†ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614419292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1514292,"avatar":"https://static001.geekbang.org/account/avatar/00/17/1b/34/4d8c5694.jpg","nickname":"Movan","note":"","ucode":"D5A2E9E2E7A439","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2031114,"avatar":"","nickname":"æ¯›æ¯›é…±","note":"","ucode":"056E939BD62D44","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380589,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624593944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351734,"ip_address":""},"score":380589,"extra":""}]}]},{"had_liked":false,"id":230333,"user_name":"å¤œè™","can_delete":false,"product_type":"c1","uid":1136756,"ip_address":"","ucode":"4E02CFF0B2C5F1","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/74/6ca93fbf.jpg","comment_is_top":false,"comment_ctime":1593350088,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5888317384","product_id":100020801,"comment_content":"æœ‰ä¸¤ä¸ªé—®é¢˜æ²¡æœ‰ææ˜ç™½<br>1. å¦‚ä½•åˆ¤æ–­æŸ¥è¯¢çš„å‘èµ·æ˜¯åœ¨ä¸€ä¸ªæ›´æ–°äº‹ç‰©ä¸­ï¼Ÿ<br>2. å¦‚ä½•åˆ¤æ–­æŸ¥è¯¢çš„å‘èµ·æ˜¯ç´§è·Ÿåœ¨ä¸€ä¸ªæ›´æ–°äº‹ç‰©ä¹‹åï¼Ÿ","like_count":1},{"had_liked":false,"id":216467,"user_name":"Geek_mango","can_delete":false,"product_type":"c1","uid":1526460,"ip_address":"","ucode":"C9B4FD825065B5","user_header":"https://static001.geekbang.org/account/avatar/00/17/4a/bc/21b36468.jpg","comment_is_top":false,"comment_ctime":1589265861,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5884233157","product_id":100020801,"comment_content":"MySQL 5.7æ–°å¢äº†rpl_semi_sync_master_wait_slave_countå‚æ•°ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶ä¸»åº“æ¥å—å¤šå°‘ä¸ªslaveå†™äº‹åŠ¡æˆåŠŸåé¦ˆï¼Œç»™é«˜å¯ç”¨æ¶æ„åˆ‡æ¢æä¾›äº†çµæ´»æ€§ã€‚","like_count":1,"discussions":[{"author":{"id":1062848,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ersGSic8ib7OguJv6CJiaXY0s4n9C7Z51sWxTTljklFpq3ZAIWXoFTPV5oLo0GMTkqW5sYJRRnibNqOJQ/132","nickname":"walleæ–Œ","note":"","ucode":"0DB3243004951F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296294,"discussion_content":"å“ˆ  è¿™ä¸ªå‚æ•°ä¹Ÿä¼šå¯¼è‡´å†™å…¥çš„å»¶è¿Ÿï¼Œæœ€åä¼šä¸ä¼šæƒ³hdfsä¸€æ ·ï¼Œè‡³å°‘3ä¸ªä»¥ä¸Šçš„åŒæ­¥å†™å…¥æ‰å¯ä»¥ï¼Œåªä¸è¿‡æ˜¯å†™å…¥å—è€Œå·²ã€‚ã€‚å“ˆå“ˆ æœ€åæŠ€æœ¯è·¯å­ é«˜åº¦ç›¸ä¼¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596504299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177274,"user_name":"zero","can_delete":false,"product_type":"c1","uid":1684113,"ip_address":"","ucode":"27019747CA63FF","user_header":"https://static001.geekbang.org/account/avatar/00/19/b2/91/fbc34225.jpg","comment_is_top":false,"comment_ctime":1581339759,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5876307055","product_id":100020801,"comment_content":"çœ‹å®Œå‘ç°ï¼Œç™½ç”¨äº†è¿™ä¹ˆé•¿æ—¶é—´mysql","like_count":1},{"had_liked":false,"id":112236,"user_name":"null","can_delete":false,"product_type":"c1","uid":1024294,"ip_address":"","ucode":"F9039EFED6B55D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZPnUAiajaR5C25EDLWeJURggyiaOP5GGPe2qlwpQcm5e3ybib8OsP4tvddFDLVRSNNGL5I3SFPJHsA/132","comment_is_top":false,"comment_ctime":1562688769,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5857656065","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼<br><br>è¯¾åæ€è€ƒé¢˜ï¼Œæƒ³åˆ°äº† 27 è¯¾çš„â€œGTID å’Œåœ¨çº¿ DDLâ€ï¼š<br>1. åœ¨ä¸»åº“æ‰§è¡Œï¼šstop slave;<br>2. åœ¨å¤‡åº“ DDLï¼Œå¹¶å¾—åˆ° GTID_OF_DDL;<br>3. åœ¨ä¸»åº“æ‰§è¡Œï¼š<br>set gtid_next=GTID_OF_DDL;<br>begin; commit;<br>set gtid_next=automatic;<br>start slave;<br><br>ç„¶ååˆ‡æ¢ä¸»å¤‡ï¼Œå†åœ¨å¦ä¸€ä¸ªå®ä¾‹æ‰§è¡Œä¸€éã€‚<br><br>æœ‰äº›ç–‘é—®ï¼šå‡å¦‚ DDL åˆ é™¤ä¸€ä¸ªå­—æ®µï¼Œå…ˆåœ¨ å¤‡åº“A å¤„ç† DDLï¼Œæ‰§è¡ŒæˆåŠŸåï¼š<br>1. å®¢æˆ·ç«¯åœ¨ å¤‡åº“A çš„æŸ¥è¯¢ï¼Œå’Œè·Ÿåœ¨ä¸»åº“çš„æŸ¥è¯¢ï¼Œå°‘äº†è¯¥å­—æ®µï¼Œä¸»å¤‡æ•°æ®ä¸ä¸€è‡´äº†ï¼Œéœ€è¦å‰”é™¤ å¤‡åº“A è¿™æ®µæ—¶é—´ä¸æä¾›æœåŠ¡ä¹ˆï¼Ÿ<br><br>2. å¤‡åº“A DDL åˆ é™¤å­—æ®µæˆåŠŸåï¼Œåœ¨ä¸»åº“ start slave åï¼Œéœ€è¦ä¸»å¤‡æ•°æ®ä¸€è‡´åï¼Œæ‰èƒ½ç»§ç»­åˆ‡æ¢ä¸»å¤‡ã€‚è€Œåœ¨ç­‰å¾… å¤‡åº“A ç»§ç»­åº”ç”¨ä¸»åº“çš„ binlog æ—¶ï¼Œå¦‚æœæœ‰ insert æ“ä½œï¼Œè€Œå¤‡åº“æ— è¯¥å­—æ®µï¼Œinsert å¤±è´¥äº†ã€‚è¿™åˆè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ<br><br>è°¢è°¢è€å¸ˆï¼ï¼","like_count":1,"discussions":[{"author":{"id":1043325,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/c9xpiakQ3OC1AlfCeW03lLnnb7mj5v35Hib8YDs66zpnVib2n2qFichFmFp2Ec4QDPR0dKh38MkBBLyD3bE4NiaanZQ/132","nickname":"é¾™æ™“","note":"","ucode":"FAF34F1C65D103","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355576,"discussion_content":"è€å¸ˆè¯´åˆ é™¤åªèƒ½æ˜¯æœ€åä¸€ä¸ªå­—æ®µï¼Œå…¶ä»–å­—æ®µä¸æ”¯æŒï¼Œå¯ä»¥æµ‹è¯•ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615454440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1043325,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/c9xpiakQ3OC1AlfCeW03lLnnb7mj5v35Hib8YDs66zpnVib2n2qFichFmFp2Ec4QDPR0dKh38MkBBLyD3bE4NiaanZQ/132","nickname":"é¾™æ™“","note":"","ucode":"FAF34F1C65D103","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376347,"discussion_content":"æ˜¯ä¸èƒ½åˆ é™¤åˆ—çš„ï¼Œæ˜¯æ·»åŠ ç´¢å¼•ã€åˆ é™¤ç´¢å¼•ã€æ·»åŠ æœ€åä¸€ä¸ªåˆ—æ‰å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622088284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":355576,"ip_address":""},"score":376347,"extra":""}]}]},{"had_liked":false,"id":87221,"user_name":"è‚–é‚¦çš„å­¦å¾’","can_delete":false,"product_type":"c1","uid":1159128,"ip_address":"","ucode":"1DB95CD3E10F33","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/d8/0f85fc8f.jpg","comment_is_top":false,"comment_ctime":1555550571,"is_pvip":false,"replies":[{"id":"31597","content":"show master status ?","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1555724891,"ip_address":"","comment_id":87221,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5850517867","product_id":100020801,"comment_content":"æœ‰ä¸ªç–‘é—® ä¸»åº“æ‰§è¡Œæ›´æ–°å¾—åˆ°çš„ä½ç‚¹ä¿¡æ¯è¯»è¯·æ±‚æ€ä¹ˆæ‹¿åˆ°å‘¢ ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447350,"discussion_content":"show master status ?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555724891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61792,"user_name":"è¾£æ¤’","can_delete":false,"product_type":"c1","uid":1330376,"ip_address":"","ucode":"85C62DE976C6A5","user_header":"https://static001.geekbang.org/account/avatar/00/14/4c/c8/bed1e08a.jpg","comment_is_top":false,"comment_ctime":1547801899,"is_pvip":false,"replies":[{"id":"21922","content":"é¢ï¼Œè¿™ä¸ªæˆ‘è¿˜çœŸä¸çŸ¥é“ğŸ˜…ï¼ŒæŠ±æ­‰å“ˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547803232,"ip_address":"","comment_id":61792,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842769195","product_id":100020801,"comment_content":"è€å¸ˆï¼Œmysql_session_track_get_firstæ˜¯cçš„ï¼Œæœ‰æ²¡æœ‰javaçš„ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436997,"discussion_content":"é¢ï¼Œè¿™ä¸ªæˆ‘è¿˜çœŸä¸çŸ¥é“ğŸ˜…ï¼ŒæŠ±æ­‰å“ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547803232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61726,"user_name":"ä¿¡ä¿¡","can_delete":false,"product_type":"c1","uid":1303865,"ip_address":"","ucode":"8DF0EC045579FD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/39/951f89c8.jpg","comment_is_top":false,"comment_ctime":1547782427,"is_pvip":false,"replies":[{"id":"21906","content":"ä¸ä¼šå“¦<br>å¦‚æœtrx3è¿˜æ²¡ä¼ åˆ°å¤‡åº“ï¼Œå¤‡åº“æ˜¯ä¼šè®¤ä¸ºå·²ç»åŒæ­¥å®Œæˆäº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547785448,"ip_address":"","comment_id":61726,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5842749723","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ–‡ä¸­åˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿæ–¹æ¡ˆçš„ç¬¬äºŒç§å’Œç¬¬ä¸‰ç§æ–¹æ³•ï¼Œéƒ½æ˜¯å¯¹æ¯”äº†ä¸»ä»æ‰§è¡Œå®Œçš„æ—¥å¿—æ˜¯å¦ç›¸åŒã€‚å› ä¸ºä¸ä¼šå‡ºç°å›¾4ä¸‹æ–¹è¯´çš„ï¼šâ€œä»åº“è®¤ä¸ºå·²ç»æ²¡æœ‰åŒæ­¥å»¶è¿Ÿï¼Œä½†è¿˜æ˜¯æŸ¥ä¸åˆ° trx3 çš„ã€‚â€å› ä¸ºå¦‚æœä»åº“æœªæ‰§è¡Œtrx3çš„è¯ï¼Œç¬¬äºŒï¼Œç¬¬ä¸‰ç§æ–¹æ³•éƒ½æ˜¯ä¸é€šè¿‡çš„ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436970,"discussion_content":"ä¸ä¼šå“¦\nå¦‚æœtrx3è¿˜æ²¡ä¼ åˆ°å¤‡åº“ï¼Œå¤‡åº“æ˜¯ä¼šè®¤ä¸ºå·²ç»åŒæ­¥å®Œæˆäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547785448,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376349,"discussion_content":"trx3æ²¡ä¼ ç»™å¤‡åº“ï¼Œå¤‡åº“å¹¶ä¸çŸ¥é“ä¸»åº“ä¸Šé¢æœ‰trx3ï¼Œåœ¨å¤‡åº“ä¸Šé¢çš„relay logä¸­çš„äº‹åŠ¡éƒ½åº”ç”¨å®Œäº†ï¼Œå¤‡åº“å°±è®¤ä¸ºè‡ªå·±æ²¡æœ‰å»¶è¿Ÿäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622088609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1652836,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","nickname":"pc","note":"","ucode":"1AD538B9A900B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":133571,"discussion_content":"ä½ç‚¹å’ŒGTIDæ¥è¯´ï¼Œtrx3è¿˜æ²¡ä¼ åˆ°å¤‡åº“ï¼Œæ€ä¹ˆä¼šæ˜¯è®¤ä¸ºåŒæ­¥å®Œæˆäº†å‘¢ï¼Ÿä¸»å¤‡çš„ä½ç‚¹å’ŒGTIDé›†åˆéƒ½ä¸åŒå•Šï¼Ÿæ²¡èƒ½ç†è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578972156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60975,"user_name":"* æ™“ *","can_delete":false,"product_type":"c1","uid":1307301,"ip_address":"","ucode":"AF807F9E3B7FB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/f2/a5/bc63dee1.jpg","comment_is_top":false,"comment_ctime":1547600444,"is_pvip":false,"replies":[{"id":"21732","content":"MGRå¼€å§‹æœ‰å›½å†…å…¬å¸åœ¨ä½¿ç”¨äº†<br><br>InnoDB clusterä¹Ÿå¯ä»¥çš„ï¼Œä½†æ˜¯ä¸€èˆ¬å°±æ˜¯å¹³æ—¶ä¸€å†™å¤šè¯»ï¼Œåªåœ¨ä¸»å¤‡åˆ‡æ¢çš„æ—¶å€™ï¼ŒçŸ­æš‚å…è®¸å¤šå†™","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547605615,"ip_address":"","comment_id":60975,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842567740","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå¦‚æœç”¨MGRæˆ–InnoDB clusteræ–¹æ¡ˆåšè¯»å†™åˆ†ç¦»çš„è¯å¯ä»¥æ›¿ä»£æ–‡ä¸­æåˆ°çš„æ–¹æ¡ˆå—ï¼Ÿè¿™ä¸¤ä¸ªæ–¹æ¡ˆå»ºè®®åœ¨ç”Ÿäº§ä¸­å¤§é‡ä½¿ç”¨å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436691,"discussion_content":"MGRå¼€å§‹æœ‰å›½å†…å…¬å¸åœ¨ä½¿ç”¨äº†\n\nInnoDB clusterä¹Ÿå¯ä»¥çš„ï¼Œä½†æ˜¯ä¸€èˆ¬å°±æ˜¯å¹³æ—¶ä¸€å†™å¤šè¯»ï¼Œåªåœ¨ä¸»å¤‡åˆ‡æ¢çš„æ—¶å€™ï¼ŒçŸ­æš‚å…è®¸å¤šå†™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547605615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60967,"user_name":"Stalary","can_delete":false,"product_type":"c1","uid":1101749,"ip_address":"","ucode":"F69AFF7C958D31","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/b5/d1ec6a7d.jpg","comment_is_top":false,"comment_ctime":1547599685,"is_pvip":false,"replies":[{"id":"21731","content":"åº”è¯¥å°±æ˜¯æˆ‘ç›´æ’­æ—¶è¯´çš„è¿™ä¸ªæƒ…å†µå§ã€‚ https:&#47;&#47;time.geekbang.org&#47;column&#47;article&#47;73370<br><br>wait_timeout è¿™ä¸ªå‚æ•°é»˜è®¤æ˜¯8å°æ—¶ï¼Œæ”¹ä¸ªæ›´å¤§çš„å€¼è¯•è¯•","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547605557,"ip_address":"","comment_id":60967,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5842566981","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªé—®é¢˜å•Šï¼Œæµ‹è¯•æœç”¨hakriè¿æ¥æ± è¿æ¥mysqlï¼Œä½†æ˜¯æ¯æ¬¡è¶…è¿‡å…«å°æ—¶ä¸ä½¿ç”¨ï¼Œæ•°æ®åº“è¿æ¥å°±ä¼šè¢«è‡ªåŠ¨å›æ”¶äº†ï¼Œè¿™ä¸ªæœ‰ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•å˜›ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436686,"discussion_content":"åº”è¯¥å°±æ˜¯æˆ‘ç›´æ’­æ—¶è¯´çš„è¿™ä¸ªæƒ…å†µå§ã€‚ https://time.geekbang.org/column/article/73370\n\nwait_timeout è¿™ä¸ªå‚æ•°é»˜è®¤æ˜¯8å°æ—¶ï¼Œæ”¹ä¸ªæ›´å¤§çš„å€¼è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547605557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1134574,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4f/ee/bd08cfab.jpg","nickname":"ä¸€é­„","note":"","ucode":"71541125D4AA5A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406426,"discussion_content":"å¿ƒè·³æœºåˆ¶ï¼Œå®šæ—¶è¯·æ±‚ä¸€æ¬¡æŸ¥è¯¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634771605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"ä¸€æ­¥","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":117697,"discussion_content":"æ¯ç§’é’Ÿæ‰§è¡Œ ä¸€æ¬¡ select 1? ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578136339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60929,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1547595557,"is_pvip":false,"replies":[{"id":"21728","content":"å°±æ˜¯åæ¥æ‰æ‰§è¡Œçš„äº‹åŠ¡","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547605121,"ip_address":"","comment_id":60929,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5842562853","product_id":100020801,"comment_content":"å›¾5ä¸­çŠ¶æ€3å’ŒçŠ¶æ€4çš„tx2å’Œtrx3ä»å“ªå†’å‡ºæ¥çš„ï¼Œå‰é¢çŠ¶æ€1å’ŒçŠ¶æ€2åº¦æ²¡æœ‰","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436669,"discussion_content":"å°±æ˜¯åæ¥æ‰æ‰§è¡Œçš„äº‹åŠ¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547605121,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357093,"user_name":"Geek_edc9a8","can_delete":false,"product_type":"c1","uid":1928405,"ip_address":"å¹¿ä¸œ","ucode":"1A46C55275CA4C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/KK6pdxQNCogX2bUfxcxbegeLibLFIicoahXhuq039ceu3fekowfsricMQ8wouXT9bZR9xTlqhyI159aoVxg1q5G5g/132","comment_is_top":false,"comment_ctime":1662951656,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662951656","product_id":100020801,"comment_content":"è¯·é—®å¤§ç¥ä¸€ä¸ªé—®é¢˜ï¼Œæ•°æ®åº“åšäº†gtidä¸»ä»ï¼Œæ•°æ®åº“æ˜¯Aï¼Œè¿™æ—¶åœ¨ä»åº“ä¸Šåˆåˆ›å»ºäº†ä¸€ä¸ªæ•°æ®åº“Bå¯¹ä»åº“é‡Œçš„Aåº“æ•°æ®è¿›è¡Œç»Ÿè®¡å¤„ç†ï¼Œå‘ç°ç»å¸¸ä¼šAçš„ä¸»ä»æ–­å¼€ï¼Œè¿™ä¸ªæœ‰åŠæ³•è§£å†³å—ï¼Ÿä¼šæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":356031,"user_name":"Geek_323a60","can_delete":false,"product_type":"c1","uid":2797976,"ip_address":"å››å·","ucode":"CDC276EC255411","user_header":"","comment_is_top":false,"comment_ctime":1661928999,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661928999","product_id":100020801,"comment_content":"åœ¨æ‰§è¡Œ DDL æ—¶ï¼Œæ¯”å¦‚å¢åŠ æœ€åä¸€åˆ—ã€‚è‹¥ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨çš„æ˜¯ select * ï¼Œåœ¨ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºè®°å½•ååšååºåˆ—åŒ–æ—¶ä¸ä¼šå› ä¸ºå¤šäº†ä¸€åˆ—å±æ€§è€Œå¯¼è‡´ååºåˆ—åŒ–å¤±è´¥å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":355900,"user_name":"Geek_db92b2","can_delete":false,"product_type":"c1","uid":2852033,"ip_address":"åŒ—äº¬","ucode":"6B3C9CA2FE2F76","user_header":"https://static001.geekbang.org/account/avatar/00/2b/84/c1/d13e75da.jpg","comment_is_top":false,"comment_ctime":1661842371,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661842371","product_id":100020801,"comment_content":"çº¯å°ç™½åœ¨çº¿å­¦ä¹ ","like_count":0},{"had_liked":false,"id":355484,"user_name":"ç™½å°é¾™","can_delete":false,"product_type":"c1","uid":1230191,"ip_address":"ä¸Šæµ·","ucode":"34BFCBA8D98AB8","user_header":"https://static001.geekbang.org/account/avatar/00/12/c5/6f/8ba27eab.jpg","comment_is_top":false,"comment_ctime":1661418802,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1661418802","product_id":100020801,"comment_content":"æœ‰å“ªäº›ä¸­é—´ä»¶å®ç°äº†å»¶è¿Ÿåˆ¤æ–­çš„èƒ½åŠ›ï¼Œå¯å¦æ¨èï¼Ÿ","like_count":0},{"had_liked":false,"id":345026,"user_name":"æ²‰æ·€çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1177315,"ip_address":"","ucode":"BCB7C26F9D214B","user_header":"https://static001.geekbang.org/account/avatar/00/11/f6/e3/e4bcd69e.jpg","comment_is_top":false,"comment_ctime":1651942510,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651942510","product_id":100020801,"comment_content":"å…³äºå¤§è¡¨ DDLï¼Œçœ‹åˆ°è¯„è®ºåŒºæœ‰å¾ˆå¤šå¤§ä½¬è¯´åœ¨å¤‡åº“æ‰§è¡Œ DDL å¯ä»¥è§£å†³è¯¥é—®é¢˜ã€‚ä½†æ˜¯æˆ‘ç†è§£åœ¨å¤‡åº“æ‰§è¡Œ DDL ç†è®ºä¸Šå’Œ binlog åŒæ­¥æ‰§è¡Œçš„ DDL ä¸æ˜¯ä¸€æ ·çš„å˜›ï¼Ÿä¸ºä»€ä¹ˆèƒ½è§£å†³ä¸»åº“ DDL ä¸»ä»å»¶è¿Ÿçš„é—®é¢˜ï¼Ÿ æ±‚çŸ¥é“çš„å¤§ä½¬è§£ç­”<br>","like_count":0},{"had_liked":false,"id":340659,"user_name":"â€­â€­","can_delete":false,"product_type":"c1","uid":1326444,"ip_address":"","ucode":"186811937EE646","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/6c/935bdc7d.jpg","comment_is_top":false,"comment_ctime":1649001135,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649001135","product_id":100020801,"comment_content":"æœ´ç´ æ€æƒ³æ˜¯ä¸»ä»æ— å»¶è¿Ÿï¼Œå…·ä½“ç»†åŒ–ä¸ºç¡®ä¿æŸäº‹åŠ¡å·²ç»åœ¨ä»åº“å®ç°","like_count":0},{"had_liked":false,"id":328006,"user_name":"xusenme","can_delete":false,"product_type":"c1","uid":1263618,"ip_address":"","ucode":"5AD07291DF9752","user_header":"","comment_is_top":false,"comment_ctime":1640446894,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640446894","product_id":100020801,"comment_content":"æœ‰æ²¡æœ‰åŠæ³•è®©ä»èŠ‚ç‚¹æ”¯æŒç±»ä¼¼raftçš„readindxæœºåˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…ä¸šåŠ¡ä»£ç æ”¹åŠ¨","like_count":0},{"had_liked":false,"id":320466,"user_name":"df","can_delete":false,"product_type":"c1","uid":2828469,"ip_address":"","ucode":"AA44DFDDEA393D","user_header":"","comment_is_top":false,"comment_ctime":1636343582,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636343582","product_id":100020801,"comment_content":"å¦‚æœä¸æ˜¯å†™åè¯»è€Œæ˜¯åªè¯»äº‹åŠ¡ï¼Œæ˜¯ä¸æ˜¯å°±å¾—ä¸»ä»åŒæ­¥æ‰èƒ½è¯»äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":318097,"user_name":"beslet","can_delete":false,"product_type":"c1","uid":1334377,"ip_address":"","ucode":"6A95C896558C11","user_header":"https://static001.geekbang.org/account/avatar/00/14/5c/69/1a4fa7d9.jpg","comment_is_top":false,"comment_ctime":1635149849,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635149849","product_id":100020801,"comment_content":"æœ‰ä¸ªç–‘æƒ‘ï¼Œçº¿ä¸Šä¸šåŠ¡å¯¹æ•°æ®çš„è¯»å†™ä¸€èˆ¬éƒ½æ˜¯åˆ†å¸ƒå¼é›†ç¾¤ä¸Šé¢ä¸åŒçš„çº¿ç¨‹ï¼Œè€Œä¸”å®é™…å¼€å‘ä¸€èˆ¬ä¸åªæ˜¯ç®€å•çš„æŸ¥è¯¢æŸä¸ªidçš„è®°å½•ï¼Œè¿˜æœ‰å¯èƒ½æŸ¥æŸä¸ªèŒƒå›´çš„æ•°æ®ç­‰å¤æ‚çš„æŸ¥è¯¢ã€‚<br>æ€ä¹ˆæ ¹æ®æŸ¥è¯¢è¯­å¥æ¡ä»¶åˆ†æå‡ºå…³è”çš„æ˜¯å“ªä¸ªçº¿ç¨‹çš„GTIDï¼Œæ„Ÿè§‰éƒ½æ˜¯æ¯”è¾ƒéš¾å®ç°çš„","like_count":0},{"had_liked":false,"id":307050,"user_name":"Tico Wang","can_delete":false,"product_type":"c1","uid":1588958,"ip_address":"","ucode":"CF890147BE07E3","user_header":"https://static001.geekbang.org/account/avatar/00/18/3e/de/9f5b936a.jpg","comment_is_top":false,"comment_ctime":1628840136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628840136","product_id":100020801,"comment_content":"MySQL 5.7 C API Developer Guide<br>https:&#47;&#47;dev.mysql.com&#47;doc&#47;c-api&#47;5.7&#47;en&#47;","like_count":0},{"had_liked":false,"id":301569,"user_name":"äººé—´ä¹å›­","can_delete":false,"product_type":"c1","uid":1350559,"ip_address":"","ucode":"4A203AB47FCF3C","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/9f/2cbc2a4f.jpg","comment_is_top":false,"comment_ctime":1625741664,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1625741664","product_id":100020801,"comment_content":"gtidæ–¹æ¡ˆæœ‰ç‚¹åƒetcdçš„readindexğŸ˜Œ","like_count":0},{"had_liked":false,"id":289098,"user_name":"ç½—é€‰ä¸œ","can_delete":false,"product_type":"c1","uid":2015657,"ip_address":"","ucode":"7E844804319E3B","user_header":"https://static001.geekbang.org/account/avatar/00/1e/c1/a9/ece95406.jpg","comment_is_top":false,"comment_ctime":1618876613,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1618876613","product_id":100020801,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼šåŠåŒæ­¥æ¨¡å¼ï¼Œä¸»åº“åœ¨å†™Binlogæ—¶ä¼šå°†binlogå‘ç»™ä»åº“ï¼Œä»åº“æ‰§è¡Œå®Œå¹¶ä¸”æäº¤äº†æ‰ä¼šè¿”å›ackï¼Œæ­¤æ—¶ä¸»åº“æ”¶åˆ°ackåæ‰ç»§ç»­redolog commitã€‚é—®é¢˜ï¼šå¦‚æœä¸»åº“æ”¶åˆ°ackåredolog commitå¤±è´¥äº†ï¼Œé‚£ä¹ˆä¸»åº“ä¼šå›æ»šæ­¤æ¬¡æ“ä½œã€‚ä½†æ˜¯ä»åº“å·²ç»å†™å…¥äº†ä¸»åº“çš„Binlogå¹¶ä¸”æ‰§è¡Œå®Œæ¯•ã€‚æ˜¯å¦å› æ­¤äº§ç”Ÿäº†ä¸»ä»æ•°æ®ä¸ä¸€è‡´ã€‚","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376351,"discussion_content":"é”™äº†ï¼Œæ˜¯binlogåˆ·ç›˜ä¹‹åæ‰ä¼šä¼ binglogåˆ°ä»åº“ï¼Œä»åº“æ”¶åˆ°ä¹‹åå°±è¿”å›ACKï¼Œæ²¡è¯´è¦ä»åº“æ‰§è¡Œå®Œäº‹åŠ¡ä¹‹åå†è¿”å›ACKã€‚ä½ è¯´çš„ä¼ è¾“çš„æ—¶é—´ç‚¹ä¸å¯¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622089000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287840,"user_name":"ä¸‰ä¸‡æ£µæ ‘","can_delete":false,"product_type":"c1","uid":1270449,"ip_address":"","ucode":"EB361BB4E09AE5","user_header":"https://static001.geekbang.org/account/avatar/00/13/62/b1/3d1fc497.jpg","comment_is_top":false,"comment_ctime":1618191240,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1618191240","product_id":100020801,"comment_content":"å”‰ã€‚çœ‹å®Œæ„Ÿè§‰æˆ‘å¯¹mysqlä¸€æ— æ‰€çŸ¥ã€‚","like_count":0},{"had_liked":false,"id":287615,"user_name":"è´ºå­","can_delete":false,"product_type":"c1","uid":2076283,"ip_address":"","ucode":"A64DC9D9CF7CCD","user_header":"https://static001.geekbang.org/account/avatar/00/1f/ae/7b/47200692.jpg","comment_is_top":false,"comment_ctime":1618050571,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618050571","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘è§‰å¾—æ‚¨çš„é—®é¢˜åº”è¯¥åŠ å‰æï¼ŒåŒä¸€ä¸ªè¡¨ddlï¼Œå¹¶ä¸”ä¸æ˜¯ä»¥writesetä¸ºå¹¶å‘åŸåˆ™ã€‚ç„¶ååé¢åˆå¯¹è¿™ä¸ªè¡¨åšdmlæ‰ä¼šæœ‰é—®é¢˜å§ï¼Ÿå› ä¸ºå¦‚æœè¿™ä¸ªè¡¨æ˜¯å†·è¡¨ï¼Œddlçš„æ“ä½œå’Œå…¶ä»–è¡¨çš„dmlæ˜¯å¯ä»¥æ ¹æ®5.7.22åçš„writesetå¹¶è¡ŒåŸåˆ™æ˜¯å¯ä»¥å¹¶å‘æ‰§è¡Œçš„ï¼å°±ä¸ä¼šäº§ç”Ÿå¤§é—®é¢˜","like_count":0},{"had_liked":false,"id":285262,"user_name":"Ken","can_delete":false,"product_type":"c1","uid":1988131,"ip_address":"","ucode":"DB59170F4FC74E","user_header":"https://static001.geekbang.org/account/avatar/00/1e/56/23/848ac9f4.jpg","comment_is_top":false,"comment_ctime":1616716236,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616716236","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ã€‚è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæ¯æ¬¡æŸ¥è¯¢éƒ½ä½¿ç”¨ä¸»åº“ä½ç‚¹å‡½æ•°ï¼Œå¹¶å‘é‡å¤§æ—¶ä¼šä¸ä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Ÿæˆ‘ä¹‹å‰é‡è¿‡å¹¶å‘é‡çš„å¤§çš„åº“ï¼Œç›‘æ§ç³»ç»Ÿè½®è¯¢SHOW STATUS éƒ½æˆä¸ºäº†é˜»å¡æºï¼ŒæŠŠç›‘æ§åœäº†å°±æ…¢æ…¢æ¢å¤äº†ã€‚å½“æ—¶æ—¶é—´ç´§è¿«æ²¡æœ‰æ·±ç©¶åŸå› ï¼Œä¹Ÿéš¾å¤ç°é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œç‰¹æ„è¯·æ•™è€å¸ˆé«˜å¹¶å‘æŸ¥è¯¢è¿™ç±»å‡½æ•°æ˜¯å¦æœ‰é—®é¢˜æˆ–éšæ‚£ï¼Ÿå¦‚æœæœ‰å¤§é‡å¯æ¥å—å»¶æ—¶çš„åœºæ™¯ï¼Œæˆ‘è§‰å¾—ç›´æ¥ä¸Šredis å°±å¥½äº†ï¼Œè‡³å°‘å‡è½»90%ä»¥ä¸Šçš„è¯»å‹åŠ›ï¼Œå‰©ä¸‹çš„è¯»å‹åŠ›ï¼Œå®Œå…¨èµ°ä¸»åº“æˆ–ä»åº“ä¹Ÿå¯ä»¥ã€‚å¦‚æœä¸æ¥å—å»¶æ—¶è¯»ï¼Œç›´æ¥èµ°ä¸»åº“æˆ–åŒæ­¥å¤åˆ¶ï¼Œæ€§èƒ½å½“ç„¶ä¼šæœ‰æ‰€ä¸‹é™ã€‚","like_count":0},{"had_liked":false,"id":276135,"user_name":"å¾®æœ«å‡¡å°˜","can_delete":false,"product_type":"c1","uid":1099525,"ip_address":"","ucode":"25EDFD0914D0F4","user_header":"https://static001.geekbang.org/account/avatar/00/10/c7/05/19c5c255.jpg","comment_is_top":false,"comment_ctime":1611806865,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611806865","product_id":100020801,"comment_content":"ä»¥å‰åœ¨åšä¸€ä¸ªéœ€æ±‚çš„æ—¶å€™å°±é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Œç”±äºä¸»ä»å»¶è¿Ÿé—®é¢˜ï¼Œå¯¼è‡´è¿‡æœŸè¯»ï¼Œæœ€åé‡‡ç”¨è¯»ä¸»åº“çš„æ–¹å¼è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå…¶ä»–çš„æ–¹æ¡ˆæ„Ÿè§‰è¿‡äºå¤æ‚ï¼Œå¯æ“ä½œæ€§ä¹Ÿæ˜¯é‚£ä¹ˆå¼ºï¼Œä¸ªäººæ„Ÿè§‰ï¼Œå¯¹äºè®¿é—®é‡ä¸å¤§ï¼Œç›´æ¥è¯»ä¸»åº“å³å¯","like_count":0},{"had_liked":false,"id":247318,"user_name":"Magic","can_delete":false,"product_type":"c1","uid":1272047,"ip_address":"","ucode":"FD9CEDAA419EB0","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/ef/6264ca3d.jpg","comment_is_top":false,"comment_ctime":1599658279,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599658279","product_id":100020801,"comment_content":"é•¿äº‹åŠ¡å¯¼è‡´ç­‰gtidè¶…æ—¶ï¼Œæœ€ååœ¨å›åˆ°ä¸»åº“æŸ¥è¯¢ã€‚<br>è§£å†³æ–¹æ³•æ˜¯å°†å¤§è¡¨ddlæ”¾åœ¨å¤‡åº“åšï¼Œåšå®Œåå†è¿›è¡Œä¸»å¤‡åˆ‡æ¢","like_count":0},{"had_liked":false,"id":230961,"user_name":"itsxun","can_delete":false,"product_type":"c1","uid":1599454,"ip_address":"","ucode":"69E6CEA3FCB4F3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLOKzDVXse2WibsBGOR27GVYOlv8WRtFBfQe4ekNia2S5986QibD6Wv17gyDpZqmQt3kJcAcbhl3rroQ/132","comment_is_top":false,"comment_ctime":1593532826,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593532826","product_id":100020801,"comment_content":"å¯¹è€å¸ˆä½©æœå¾—äº”ä½“æŠ•åœ°ã€‚","like_count":0},{"had_liked":false,"id":225510,"user_name":"é£å«å¶","can_delete":false,"product_type":"c1","uid":1162800,"ip_address":"","ucode":"7AE8D3963343AB","user_header":"https://static001.geekbang.org/account/avatar/00/11/be/30/1154657e.jpg","comment_is_top":false,"comment_ctime":1591773611,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1591773611","product_id":100020801,"comment_content":"å¦‚æœçƒ­ç‚¹æ•°æ®ï¼Œæ˜¯å¦å¯ä»¥å¢åŠ Redisçƒ­ç‚¹æ•°æ®ç¼“å­˜æœºåˆ¶","like_count":0,"discussions":[{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292766,"discussion_content":"è‚¯å®šå¯ä»¥çš„ï¼Œè¿™ç¯‡æ–‡ç« è®¨è®ºçš„åªæ˜¯æ•°æ®åº“å±‚é¢çš„è§£å†³æ–¹æ¡ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595324744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221593,"user_name":"Geek_a8be59","can_delete":false,"product_type":"c1","uid":1563985,"ip_address":"","ucode":"BEC0F57B51DC44","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKdiaUiaCYQe9tibemaNU5ya7RrU3MYcSGEIG7zF27u0ZDnZs5lYxPb7KPrAsj3bibM79QIOnPXAatfIw/132","comment_is_top":false,"comment_ctime":1590545678,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1590545678","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œåœ¨ä½¿ç”¨åŠåŒæ­¥æ–¹æ¡ˆçš„æ—¶å€™ä¼šä¸ä¼šå‡ºç°ä»åº“çš„ç£ç›˜æ»¡äº†ï¼Œå¯¼è‡´ä»åº“ä¸€ç›´è¿”å›ä¸äº†ackï¼Œå¯¼è‡´ä¸€ç›´äº‹åŠ¡æäº¤è¶…æ—¶çš„æƒ…å†µï¼Ÿ è¿˜æœ‰å¦‚æœè¶…æ—¶äº†ï¼Œé‚£ä¹ˆä¸è¿”å›ackäº‹åŠ¡ä¼šåšå›æ»šæ“ä½œä¹ˆï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376358,"discussion_content":"æœ‰è¶…æ—¶æ—¶é—´ï¼Œä¼šè‡ªåŠ¨æ¢æˆåˆ‡å¼‚æ­¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622093941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":220930,"user_name":"æ˜“æ°´å¯’","can_delete":false,"product_type":"c1","uid":1238961,"ip_address":"","ucode":"F5D8127ED4754E","user_header":"https://static001.geekbang.org/account/avatar/00/12/e7/b1/5c63be67.jpg","comment_is_top":false,"comment_ctime":1590344719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590344719","product_id":100020801,"comment_content":"sbmåˆ¤æ–­ä¸»ä»æ˜¯å¦åŒæ­¥ä¹Ÿä¸å‡†çš„å§ï¼Œä¹‹å‰ä»é«˜æ€§èƒ½mysqlè¿™æœ¬ä¹¦çœ‹åˆ°ä»åº“åªæœ‰åœ¨æ‰§è¡Œäº†å¯¹åº”çš„äº‹ä»¶æ—¶æ‰èƒ½è®¡ç®—å‡ºsbmå€¼ï¼Œå¦‚æœæœªæ‰§è¡Œå°±æ˜¯0ï¼Œ0ä¸ä»£è¡¨å°±ä¸»ä»åŒæ­¥äº†ã€‚","like_count":0},{"had_liked":false,"id":214993,"user_name":"Mr_freezing37","can_delete":false,"product_type":"c1","uid":1061402,"ip_address":"","ucode":"BB605A6FEDCEB6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/y5NFbibdKCFCg0lHKK5ERGOQWXYYK7jhnqm2BxQ6r7tWvXx8uDmibglweejDWU39BTmDSAtBJGj1ibOZK2uIHQyqg/132","comment_is_top":false,"comment_ctime":1588864765,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1588864765","product_id":100020801,"comment_content":"è€å¸ˆè¾›è‹¦äº†ï¼<br>ä»Šå¹´æ‰æ¥è§¦åˆ°è¿™ä¸ªä¸“æ ï¼Œæ­£åœ¨äºŒåˆ·ï¼Œæ”¶è·ä¸æ¯”ç¬¬ä¸€æ¬¡å°ã€‚<br>å¯¹çœ‹èµ·æ¥å¾ˆé è°±çš„GTIDæ–¹æ¡ˆï¼Œè¿˜æ˜¯æœ‰ç§æå¿ƒåŠèƒ†çš„æ„Ÿè§‰ï¼ŒåŸºäºï¼š<br>1.ä¸šåŠ¡ä¸Šæƒ³è¯»çš„æ˜¯â€è®°å½•â€ï¼ŒGTIDæ–¹æ¡ˆç­‰å¾…çš„æ˜¯äº‹åŠ¡åˆ°è¾¾ï¼Œè¿™ä¸¤è€…ç­‰ä»·å—ã€‚<br>2.ä¸šåŠ¡ä¸Šåœ¨ä¸»åº“ä¸Šçš„è¯»è¯·æ±‚ï¼Œæœ‰MVCCæä¾›ä¸€è‡´æ€§è¯»ã€‚è½¬ç§»åˆ°ä»åº“ä¸Šä¹‹åï¼Œå› ä¸ºæ€»æœ‰ä¸€éƒ¨åˆ†äº‹åŠ¡æ˜¯ä¸åœ¨è¿™ä¸ªåº“ä¸Šçš„ï¼ŒMVCCæœ‰æ— ç ´åå¯èƒ½ã€‚<br><br>è®¾æƒ³äº†ä»¥ä¸‹åœºæ™¯ï¼š<br>æ—¶åˆ»Tå®¢æˆ·ç«¯åœ¨ä¸»åº“Aæäº¤äº‹åŠ¡æˆåŠŸï¼Œæ‹¿åˆ°GTIDï¼Œé€‰å®šä»åº“Bã€‚å‡å®šä¸»ä»å»¶æ—¶å³ä¸º0.9ç§’ï¼ŒæŸ¥è¯¢SQLè€—æ—¶ä¸º0ï¼Œå¿½ç•¥å…¶ä»–è°ƒç”¨è€—æ—¶ï¼›<br>GTIDæ–¹æ¡ˆä¸­ï¼Œå®¢æˆ·ç«¯åœ¨ä»åº“Bä¸Šçš„æ‹¿åˆ°ç»“æœé›†çš„æ—¶åˆ»å³ä¸ºT+0.9ç§’ã€‚<br>è¿™0.9ç§’ä¸­ï¼Œå¦‚æœä¸»åº“ä¸Šï¼Œå†æœ‰ä¸æ­¤GTIDå†²çªçš„è®°å½•æ›´æ”¹ã€‚<br><br>è¿™ç§æƒ…å†µä¸‹ï¼Œæ­¤æ¬¡æŸ¥è¯¢äº‹å®ä¸Šè¿˜æ˜¯â€œè¿‡æœŸè¯»â€äº†å§ï¼Ÿ<br><br>ç±»ä¼¼çš„ï¼Œè¿™0.9ç§’ä¸­ï¼Œå¯èƒ½å‘ç”Ÿå…¶ä»–å½±å“è¯¥æŸ¥è¯¢ä¸€è‡´æ€§è§†å›¾çš„äº‹åŠ¡ï¼Œæäº¤åœ¨ä¸»åº“Aä¸”å¹¶æœªè¢«åŒæ­¥åˆ°ä»åº“Bã€‚","like_count":0,"discussions":[{"author":{"id":1043325,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/c9xpiakQ3OC1AlfCeW03lLnnb7mj5v35Hib8YDs66zpnVib2n2qFichFmFp2Ec4QDPR0dKh38MkBBLyD3bE4NiaanZQ/132","nickname":"é¾™æ™“","note":"","ucode":"FAF34F1C65D103","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355582,"discussion_content":"åƒä½ è¯´çš„è¿™ç§æƒ…å†µåº”è¯¥æ˜¯ä¸é€‚åˆåšè¯»å†™åˆ†ç¦»çš„ï¼Œéœ€è¦å¯¹ä¸šåŠ¡é€»è¾‘åšè¯¦ç»†åˆ†æï¼Œå³æ—¶æ€§è¦æ±‚æ²¡ä½ æè¿°çš„è¿™ä¹ˆé«˜æ‰å¯ä»¥è¯»å†™åˆ†ç¦»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615455268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207961,"user_name":"TIAN","can_delete":false,"product_type":"c1","uid":1276795,"ip_address":"","ucode":"CCCF80602C1753","user_header":"https://static001.geekbang.org/account/avatar/00/13/7b/7b/5b39b47b.jpg","comment_is_top":false,"comment_ctime":1587223072,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587223072","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œçœ‹äº†ä¸‰æœŸå…³äºä¸»å¤‡ä¸»ä»çš„æ–‡ç« ï¼Œæ„Ÿè§‰ä¸»ä»è¿˜å¥½ï¼Œä½†æ˜¯ä¸»å¤‡çš„æ–¹å¼ä¹Ÿä½¿ç”¨binlogæ¥åŒæ­¥ä¹ˆï¼Ÿæˆ‘è®°å¾—åœ¨å“ªçœ‹è¿‡ä¸€ä¸ªæ•™ç¨‹æ˜¯ç”¨keepalive+drbdå®ç°çš„ä¸»å¤‡æ–¹å¼ï¼Œè¿™æ ·æ•°æ®æ˜¯ä¸ç”¨binlogæ¥åŒæ­¥çš„ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæ‚¨çš„è¯¾ç¨‹ä¸­æ²¡æœ‰æåˆ°ï¼Œç›®å‰å¤§å¤šæ•°ä¸»å¤‡éƒ½è¿˜æ˜¯ç”¨binlogä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":202057,"user_name":"Kvicii.Y","can_delete":false,"product_type":"c1","uid":1442588,"ip_address":"","ucode":"446BFA633569EA","user_header":"https://static001.geekbang.org/account/avatar/00/16/03/1c/c9fe6738.jpg","comment_is_top":false,"comment_ctime":1585895118,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585895118","product_id":100020801,"comment_content":"æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œè¿™äº›mysqlç»™å‡ºçš„APIï¼Œè²Œä¼¼å‡ ä¹éƒ½æ˜¯Cè¯­è¨€çš„ç‰ˆæœ¬ï¼Œé‚£å¦‚ä½•åœ¨JAVAçš„Clientç«¯å’ŒProxyç«¯åœ°å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":181477,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1215139,"ip_address":"","ucode":"258880ACE79448","user_header":"https://static001.geekbang.org/account/avatar/00/12/8a/a3/aee7ded7.jpg","comment_is_top":false,"comment_ctime":1582548890,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582548890","product_id":100020801,"comment_content":"æ—è€å¸ˆ æœ€è¿‘å‡ ç¯‡çœ‹çš„ä¸æ‡‚ï¼Œæ²¡æœ‰å®é™…ç»å†è¿‡è¿™äº›ï¼Œå¸Œæœ›åŠªåŠ›èƒ½çœ‹æ‡‚ã€‚","like_count":0},{"had_liked":false,"id":176505,"user_name":"Geek_3004e0","can_delete":false,"product_type":"c1","uid":1732823,"ip_address":"","ucode":"441D39BDC39E4A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/70/d7/d1049bae.jpg","comment_is_top":false,"comment_ctime":1581073710,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581073710","product_id":100020801,"comment_content":"è€å¸ˆæƒ³è¯·æ•™ä¸ªé—®é¢˜ï¼Œä¸çŸ¥é“è¿˜ä¼šä¸ä¼šè¢«å›ç­”äº†ã€‚æˆ‘ç”¨MariaDB MaxScale2.2å»åšMySQL 8.0.16çš„ä¸»ä»åˆ†ç¦»æµ‹è¯•ï¼Œå®‰è£…è¿è¡Œçœ‹èµ·æ¥æ­£å¸¸ï¼Œmaxscaleçœ‹ç€ä¹ŸæŠŠç”¨æˆ·ä¿¡æ¯è·å–åˆ°äº†ã€‚ä½†æ˜¯æˆ‘ç”¨mysql cliè¿æ¥maxscaleæ—¶ï¼Œå‘ç°åˆšè¿æ¥ä¸Šä¼šè¯å°±ä¼šè¢«æ–­å¼€ï¼Œå³ç”¨mysql -utest -p -hmaxscale-host -P4006 è¾“å…¥å¯†ç åè¿›å…¥åˆ°äº†å¯ä»¥æ“ä½œæ•°æ®åº“çš„ç•Œé¢ï¼Œä½†æ˜¯åé¢è¾“å…¥ä»»ä½•è¯­å¥éƒ½æç¤ºAuthentication with backend failed. Session will be closedã€‚æˆ‘æŠ“åŒ…çœ‹äº†ä¸‹ï¼Œå‘ç°maxscaleå‘é€ç»™serverç«¯login requeståŒ…æ—¶ï¼ŒæŒ‡å®šäº†è®¤è¯æ–¹å¼mysql_native_passwordï¼ˆå› ä¸ºmaxscaleé»˜è®¤ä½¿ç”¨mysql_native_passwordè®¤è¯æ–¹å¼ï¼Œæˆ‘åˆ›å»ºtestç”¨æˆ·æ—¶å°±æŒ‡å®šäº†è¿™ç§è®¤è¯æ–¹å¼ï¼‰ã€ç”¨æˆ·åå’Œå¯†ç ï¼›serverå…ˆå›å¤äº†ä¸€ä¸ªackåŒ…ç»™maxscaleï¼›ç„¶åserveråˆå‘äº†ä¸€ä¸ªauth switch requeståŒ…ç»™maxscaleï¼ŒæŒ‡å®šäº†auth method name:mysql_native_passwordå’Œauth method dataã€‚maxscaleæ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡å°±å‘serverå‘é€finåŒ…æ–­å¼€è¿æ¥ã€‚<br>ä¸æ˜ç™½ä¸ºä»€ä¹ˆä½¿ç”¨éƒ½æ˜¯è¦ç”¨mysql_native_passwordè®¤è¯æ–¹å¼ï¼Œserverç«¯è¿˜ä¼šå‘é€auth switch requestç»™maxscaleï¼Œè€Œmaxscaleæ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡ä¸ºä»€ä¹ˆå°±finäº†ã€‚å¸Œæœ›è€å¸ˆèƒ½è§£ç­”ï¼Œå®åœ¨æ‰¾ä¸å‡ºåŸå› äº†ã€‚","like_count":0},{"had_liked":false,"id":170155,"user_name":"a...Z","can_delete":false,"product_type":"c1","uid":1293877,"ip_address":"","ucode":"5A5A44903785FD","user_header":"https://static001.geekbang.org/account/avatar/00/13/be/35/dd79037e.jpg","comment_is_top":false,"comment_ctime":1578539644,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578539644","product_id":100020801,"comment_content":"æœ€åçš„gtid æˆ‘è§‰å¾—é¡µå¯ä»¥æœ‰è¿™æ ·ä¸€ä¸ªæ€è·¯ï¼Œå¦‚æœå­åœ¨ä¸»åº“æ“ä½œæˆåŠŸäº†ï¼Œä¼šè¿”å›æ“ä½œçš„idï¼Œå»ä»åº“æŸ¥ï¼Œå¦‚æœä»åº“è¿”å›æ²¡æœ‰ï¼Œç›´æ¥èµ°ä¸»åº“ï¼Œä¹Ÿä¼šæ˜¯ä¸€æ ·çš„æ„æ€å§","like_count":0},{"had_liked":false,"id":168511,"user_name":"inrtyx","can_delete":false,"product_type":"c1","uid":1246178,"ip_address":"","ucode":"81CD18FF34ABAB","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/e2/5768d26e.jpg","comment_is_top":false,"comment_ctime":1578102239,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1578102239","product_id":100020801,"comment_content":"å¾€äº‹å¦‚çƒŸ","like_count":0},{"had_liked":false,"id":163520,"user_name":"å•Šæµ©","can_delete":false,"product_type":"c1","uid":1185712,"ip_address":"","ucode":"BD0354188B7693","user_header":"https://static001.geekbang.org/account/avatar/00/12/17/b0/dda316ee.jpg","comment_is_top":false,"comment_ctime":1576736563,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1576736563","product_id":100020801,"comment_content":"ä»¥å‰é‡åˆ°å¿…é¡»æ‹¿åˆ°æœ€æ–°ç»“æœçš„ä¸šåŠ¡åœºæ™¯ï¼Œå°±åªä¼šå¼ºåˆ¶èµ°ä¸»åº“æ–¹æ¡ˆè¿™ä¸€ç§æ–¹æ¡ˆã€‚è¿™æ¬¡åˆå­¦åˆ°äº†Nå¤šç§å“ˆï¼Œåˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿï¼Œç­‰semi-syncï¼Œç­‰ä¸»åº“ä½ç‚¹ï¼ŒGTIDæ–¹æ¡ˆï¼Œè¿˜æœ‰ä¸å¤ªé è°±çš„sleepæ–¹æ¡ˆ~<br>","like_count":0},{"had_liked":false,"id":140656,"user_name":"å†ç»­å•¸å‚²","can_delete":false,"product_type":"c1","uid":1360184,"ip_address":"","ucode":"912987A17DCA92","user_header":"https://static001.geekbang.org/account/avatar/00/14/c1/38/e45bbb6b.jpg","comment_is_top":false,"comment_ctime":1571022137,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571022137","product_id":100020801,"comment_content":"åƒè€æ˜¯è¯´çš„è¯»å†™åˆ†ç¦»çš„proxyä¸­é—´ä»¶ï¼Œæˆ‘ä»¬ä¸€ç›´ç”¨çš„æ˜¯mycatï¼ŒåŠŸèƒ½æŒºå¤šï¼Œä¹ŸæŒºç¨³å®šçš„ï¼Œå¯ä»¥çœ‹çœ‹ã€‚","like_count":0},{"had_liked":false,"id":137693,"user_name":"å®¶ä¹","can_delete":false,"product_type":"c1","uid":1301941,"ip_address":"","ucode":"94F8720B59F221","user_header":"https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJia90ErsTQtNDNeyTWNwWjicERicXj72b4xgbvru2IkUdrLxrgJb5lCrTaiaW2iaX3mOYiaV8vYo3voWlg/132","comment_is_top":false,"comment_ctime":1569824809,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569824809","product_id":100020801,"comment_content":"æ–Œå“¥çš„æ¯ç¯‡æ–‡ç« å’Œè¯¾åè®¨è®ºæˆ‘éƒ½ä¼šè®¤çœŸçœ‹å®Œï¼Œå¯¹æ–Œå“¥çš„å­¦æœ¯å°±ä¸è¯´äº†ã€‚æŠ€æœ¯å¥½ï¼Œè¿˜èƒ½è°¦è™šè®¤çœŸå›ç­”æ¯ä¸ªäººçš„é—®é¢˜çš„æ€åº¦å°±å¾ˆå€¼å¾—å­¦ä¹ å°Šæ•¬ã€‚çœŸå¿ƒè°¢è°¢æ–Œå“¥ã€‚è¿™ä¸ªä¸“æ çœŸçš„æ˜¯æˆ‘ç›®å‰èŠ±çš„æœ€å€¼çš„è¯¾é¢˜ã€‚ä¹ŸæåŠ›æ¨èç»™æˆ‘çš„åŒäº‹æ‹œè¯»ã€‚","like_count":0},{"had_liked":false,"id":133095,"user_name":"-W.LI-","can_delete":false,"product_type":"c1","uid":1210699,"ip_address":"","ucode":"3556786538664F","user_header":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","comment_is_top":false,"comment_ctime":1568358448,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568358448","product_id":100020801,"comment_content":"è€å¸ˆå¥½!ä¸çŸ¥é“è€å¸ˆè¿˜ä¼šä¸ä¼šçœ‹è§ï¼Œæœ€åä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œä¸šåŠ¡æˆæ‰§è¡ŒæŸ¥è¯¢è¯­å¥çš„æ—¶å€™ï¼Œæ€ä¹ˆè·å–åˆ°ã€‚ä¸»åº“ä½ç‚¹ï¼Œæˆ–è€…äº‹ç‰©idä¹ˆ?ã€‚éœ€è¦ä¸­é—´å±‚è®°å½•è¿™äº›ä¿¡æ¯å—?æœåŠ¡ç«¯åªè´Ÿè´£å†™select xx from t where id =5ã€‚id=5è¿™æ¡è®°å½•ä¸»åº“ä¸­çš„æœ€åä¸€ä¸ªä½ç‚¹ï¼Œäº‹åŠ¡idä¸Šå“ªå–?è¿˜æœ‰å°±æ˜¯ä¸€äº›æ˜æ˜¾è¿‡äº†å¾ˆä¹…äº†ä¹Ÿå–ä¸€éä¸æ˜¯æ›´æ…¢äº†ä¹ˆ?","like_count":0},{"had_liked":false,"id":132527,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1568162326,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568162326","product_id":100020801,"comment_content":"Seconds_Behind_Masterä¸º0ï¼Œåœ¨ç‰¹æ®Šåœºæ™¯åˆ¤æ–­ä¸»ä»æ˜¯å¦å»¶è¿Ÿä¼šæœ‰é—®é¢˜<br><br>Seconds_Behind_Master: The number of seconds that the slave SQL thread is behind processing the master binary log<br><br>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯SQL threadåœ¨æ‰§è¡ŒIO thread dumpä¸‹æ¥çš„relay logçš„æ—¶é—´å·®ã€‚è¿™é‡Œé¢å°±æœ‰å‡ ä¸ªæ³¨æ„é—®é¢˜ï¼š<br>1ï¼Œè¿™ä¸ªæ—¶é—´ä¾èµ–ä¸¤ä¸ªçº¿ç¨‹ï¼›<br>2ï¼Œrelay logä¸­eventè®°å½•çš„æ—¶é—´æˆ³æ˜¯ä¸»åº“ä¸Šçš„æ—¶é—´æˆ³ï¼Œè€ŒSQL threadçš„æ—¶é—´æˆ³æ˜¯ä»åº“ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸»åº“å’Œä»åº“çš„æ—¶é—´æ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼ç¡®å®æ˜¯ä»åº“å»¶åä¸»åº“çš„ä¸€ä¸ªæ—¶é—´å·®ã€‚ä½†æ˜¯å¦‚æœä¸»åº“å’Œä»åº“çš„æ—¶é—´ä¸æ˜¯ä¸€è‡´çš„ï¼Œé‚£è¿™ä¸ªå°±æ²¡ä»·å€¼äº†ï¼Œè¯¥ç»“æœå¯ä»¥è¿›è¡Œä¸‹æµ‹è¯•ï¼›<br>3ï¼Œåœ¨ä¸»åº“ä¸Šæ‰§è¡Œäº†ä¸€ä¸ªéå¸¸å¤§çš„eventï¼Œåœ¨è¿™ä¸ªeventåœ¨ä¸»åº“ä¸Šæ²¡æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œä»åº“ä¼šæ˜¾ç¤ºä¸º0ï¼Œè€Œå½“ä¸»åº“æ‰§è¡Œå®Œæ¯•ä¼ åˆ°ä»åº“ä¸Šå¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±ä¼šæ˜¯ä¸ªå·¨å¤§å€¼ã€‚<br><br>","like_count":0},{"had_liked":false,"id":105512,"user_name":"å†¥ç‹æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1311603,"ip_address":"","ucode":"CA43C381A69736","user_header":"https://static001.geekbang.org/account/avatar/00/14/03/73/38397da1.jpg","comment_is_top":false,"comment_ctime":1561019198,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561019198","product_id":100020801,"comment_content":"ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜å“ˆï¼Œå°±æ˜¯è¯´åœ¨GTIDæ–¹æ¡ˆä¹‹ä¸­éœ€è¦ä½¿ç”¨æ’å…¥ä¿®æ”¹æ•°æ®è®°å½•çš„sqlæ“ä½œçš„GTIDæ¥åˆ¤æ–­æ˜¯å¦åº”è¯¥å‘ä»åº“ä¸‹ï¼Œä½†æ˜¯åœ¨å®é™…çš„ç”Ÿäº§ç¯å¢ƒä¹‹ä¸­ï¼Œå®¢æˆ·ç«¯å¦‚ä½•å°†ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢æ“ä½œå’Œæ’å…¥ä¿®æ”¹æ•°æ®æ“ä½œçš„GTIDè®°å½•å¯¹åº”ä¸Šå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":103945,"user_name":"æ™“æ°","can_delete":false,"product_type":"c1","uid":1441546,"ip_address":"","ucode":"1174C88EEBF8A6","user_header":"https://static001.geekbang.org/account/avatar/00/15/ff/0a/12faa44e.jpg","comment_is_top":false,"comment_ctime":1560569758,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560569758","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆä¸»å¤‡å’Œä¸»ä»æ˜¯ä¸æ˜¯æœ‰åŒºåˆ«çš„ï¼Œæˆ‘çœ‹åˆ°è¿™ç¯‡æ–‡ç« é‡Œé¢å¥½åƒæœ‰äº›åœ°æ–¹æŠŠè¿™ä¸¤ä¸ªæ··æ·†äº†","like_count":0},{"had_liked":false,"id":91642,"user_name":"Bang","can_delete":false,"product_type":"c1","uid":1160079,"ip_address":"","ucode":"0CB8A52B177868","user_header":"https://static001.geekbang.org/account/avatar/00/11/b3/8f/4caf7f03.jpg","comment_is_top":false,"comment_ctime":1557065897,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557065897","product_id":100020801,"comment_content":"è¯·é—®ä¸€ä¸‹ï¼Œé‡åº“ç»å¸¸ä¼šå‡ºç°Duplicateæ˜¯ä»€ä¹ˆæƒ…å†µï¼Œè¿™ä¸€æ®µæ—¶é—´ ç»å¸¸ä¼šè¿™æ ·ã€‚ç„¶åè¦æ‰‹åŠ¨å»å¤„ç†ä¸€ä¸‹ï¼Œç„¶åè¿‡ä¸€æ®µæ—¶é—´ åˆä¼šè¿™æ ·ã€‚","like_count":0},{"had_liked":false,"id":91516,"user_name":"Break","can_delete":false,"product_type":"c1","uid":1508922,"ip_address":"","ucode":"6D1CCFC60E11EF","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/3a/68bed1d9.jpg","comment_is_top":false,"comment_ctime":1557047466,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1557047466","product_id":100020801,"comment_content":"æœ‰ä¸€ä¸ªç–‘é—®, ç­‰ä¸»åº“ä½ç‚¹æ–¹æ¡ˆ, å¦‚æœä»åº“é‡ŒæŸ¥åˆ°çš„master_pos_waitå¤§äº0, é‚£åº”è¯¥æ˜¯è¡¨ç¤ºä»åº“è¿˜æ²¡æœ‰æ‰§è¡Œåˆ°ç›®æ ‡ä½ç½®,è¿™æ ·æ•°æ®åº”è¯¥ä¸æ˜¯æœ€æ–°çš„, æ‰€ä»¥åº”è¯¥è¦æŸ¥ä¸»åº“æ‰å¯¹å‘€. åªæœ‰è¿”å›0, æ‰è¡¨ç¤ºå·²ç»æ‰§è¡Œåˆ°ç›®æ ‡ä½ç½®, è¿™æ ·ä»åº“æ•°æ®æ‰æ˜¯æœ€æ–°. è¿˜æ˜¯è¯´æˆ‘ç†è§£é”™äº†ğŸ˜‚?","like_count":0,"discussions":[{"author":{"id":1652836,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","nickname":"pc","note":"","ucode":"1AD538B9A900B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":133573,"discussion_content":"å—¯ï¼Œä½ ç†è§£é”™äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578972232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87506,"user_name":"æ¨é™†ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1108457,"ip_address":"","ucode":"3BC968447406EB","user_header":"https://static001.geekbang.org/account/avatar/00/10/e9/e9/1f95e422.jpg","comment_is_top":false,"comment_ctime":1555629521,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1555629521","product_id":100020801,"comment_content":"æœ€åä¸¤ä¸ªæ–¹æ¡ˆï¼Œå¯ä»¥è§£å†³è¿‡æœŸè¯»çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæ˜¯Clientç«¯æ¨¡å¼ï¼Œè®©åº”ç”¨åœ¨æŸ¥è¯¢å‰å¤šæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œæ„Ÿè§‰åº”ç”¨å¾ˆéš¾ç†è§£å’ŒåŒæ„ï¼Œè¿™ä¹Ÿæ˜¯ITåœˆä¸€ä¸ªå¸¸è§çš„çŸ›ç›¾ï¼šåº”ç”¨ä¸å¹³å°ä¹‹é—´çš„çŸ›ç›¾ï¼›å¦‚æœæ˜¯Proxyæ¨¡å¼ï¼Œä»£ç†åˆæ— æ„Ÿå†™è¯·æ±‚å’ŒæŸ¥è¯¢è¯·æ±‚çš„æˆå¯¹å…³ç³»ã€‚ä¸çŸ¥é“è€å¸ˆæ‰€åœ¨çš„å…¬å¸æ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Ÿè°¢è°¢","like_count":0},{"had_liked":false,"id":86969,"user_name":"å¿µä½ å¦‚æ˜”","can_delete":false,"product_type":"c1","uid":1323531,"ip_address":"","ucode":"FCAD88AB57D084","user_header":"https://static001.geekbang.org/account/avatar/00/14/32/0b/981b4e93.jpg","comment_is_top":false,"comment_ctime":1555488945,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555488945","product_id":100020801,"comment_content":"è€å¸ˆï¼šç­‰ä¸»åº“ä½ç‚¹æ–¹æ¡ˆï¼š<br>å›¾ä¸­çš„çŠ¶æ€å››ï¼šæ€ä¹ˆåˆ¤å®šæˆ‘çš„select real_query ï¼Œè¯»å–çš„ä¸ºtrx1çš„è€Œä¸æ˜¯trx2çš„å‘¢ ï¼Ÿ<br>æˆ‘æ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢æ‰€æ¶‰åŠåˆ°çš„è¡Œï¼Œå®ƒæ˜¯æ€ä¹ˆå»åˆ†ææ‰€æ¶‰åŠåˆ°çš„è¡Œæ•°æ®å¯¹åº”çš„æœ€æ–°å€¼æ˜¯åœ¨å“ªä¸ªäº‹åŠ¡é‡Œçš„å‘¢","like_count":0},{"had_liked":false,"id":76883,"user_name":"æµªè¿¹å¤©æ¶¯çš„èœ—ç‰›","can_delete":false,"product_type":"c1","uid":1462230,"ip_address":"","ucode":"ABB3D1C542F777","user_header":"https://static001.geekbang.org/account/avatar/00/16/4f/d6/8371b5c3.jpg","comment_is_top":false,"comment_ctime":1552738226,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1552738226","product_id":100020801,"comment_content":"ç­‰ä¸»åº“ä½ç‚¹æ–¹æ¡ˆ æ„Ÿè§‰å®ç”¨æ€§ä¸æ˜¯å¾ˆå¼ºå‘€ï¼Œä¸çŸ¥é“æˆ‘æœ‰æ²¡æœ‰ç†è§£é”™ã€‚å› ä¸ºå®é™…åœºæ™¯æ„Ÿè§‰ä¸ä¼šç«‹å³å†™ä¸€æ¡æ•°æ®ï¼Œç„¶åæˆ‘åœ¨ä»åº“ä¸Šå†æŸ¥ã€‚ä»ä»åº“æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä¸å¯èƒ½è®°å½•è¯¥è®°å½•åœ¨ä¸»åº“çš„postionå‘€ã€‚","like_count":0,"discussions":[{"author":{"id":1140175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/65/cf/326c0eea.jpg","nickname":"x-rayîŒº","note":"","ucode":"8363F0C4D0AC0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336223,"discussion_content":"å¯¹ï¼Œæˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ï¼Œå¦‚æœAç”¨æˆ·æ›´æ–°ï¼ŒBç”¨æˆ·æŸ¥è¯¢ï¼ŒBç”¨æˆ·æ€ä¹ˆæ‹¿åˆ°Aç”¨æˆ·æ›´æ–°çš„ä½ç‚¹æˆ–è€…GTIDï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608533624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61466,"user_name":"å®‹æ–‡æ°","can_delete":false,"product_type":"c1","uid":1034773,"ip_address":"","ucode":"2F5425B179F471","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ca/15/e3f9fb4e.jpg","comment_is_top":false,"comment_ctime":1547704042,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547704042","product_id":100020801,"comment_content":"ä¸€æ­¥ä¸€æ­¥ å¾ªåºæ¸æ¸ è®²çš„å¤ªæ£’äº† æ„Ÿè°¢è€å¸ˆ","like_count":0},{"had_liked":false,"id":61171,"user_name":"ä¸åœ","can_delete":false,"product_type":"c1","uid":1055507,"ip_address":"","ucode":"D4A568307D017D","user_header":"https://static001.geekbang.org/account/avatar/00/10/1b/13/b7e5a662.jpg","comment_is_top":false,"comment_ctime":1547631194,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547631194","product_id":100020801,"comment_content":"é«˜æ‰‹ï¼Œä½ è¿™ç°åœ¨åœ¨å“ªé‡Œä¸Šç­äº†ï¼Œæœ‰å…´è¶£æ¥æˆ‘ä»¬å…¬å¸è€è€ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":61052,"user_name":"HuaMax","can_delete":false,"product_type":"c1","uid":1118488,"ip_address":"","ucode":"2E78DE1AF098AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/18/8cee35f9.jpg","comment_is_top":false,"comment_ctime":1547608996,"is_pvip":false,"replies":[{"id":"21758","content":"æ ¸å¿ƒæ˜¯è¦å¤„ç†å»¶è¿Ÿé—®é¢˜ï¼Œæ¯”å¦‚æ€ä¹ˆæ“ä½œå¯ä»¥ä¸ä¼šäº§ç”Ÿå»¶è¿Ÿ<br><br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547621386,"ip_address":"","comment_id":61052,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1547608996","product_id":100020801,"comment_content":"è¯¾åé¢˜ã€‚å¯¹å¤§è¡¨åšddlæ˜¯ä¸€ä¸ªå¤§äº‹åŠ¡ï¼Œç­‰å¾…ä»åº“æ‰§è¡Œï¼ŒåŸºæœ¬å°±ä¼šè¶…æ—¶ï¼Œæœ€åéƒ½è¿”å›åˆ°ä¸»åº“æ‰§è¡Œï¼Œè¿™æ ·çš„è¯ä¸å¦‚è·³è¿‡ç­‰å¾…ä»åº“è¿™ä¸€æ­¥ï¼Œä½†æ˜¯åƒè€å¸ˆæ–‡ä¸­æåˆ°éœ€è¦åšå¥½é™æµã€‚ä»å¦ä¸€ä¸ªè§’åº¦ï¼Œå¯¹äºä¸»åº“çš„ddlæ“ä½œï¼Œä»ä¸šåŠ¡åœºæ™¯å»è€ƒè™‘ï¼Œä¸€èˆ¬éšååˆ°æ¥çš„æŸ¥è¯¢ä¸ä¼šè¢«è¿™ä¸ªddlå½±å“ï¼Œè€Œæ˜¯å¯¹æ–°çš„ä¸šåŠ¡å˜æ›´æœ‰å½±å“ï¼Œè¿™æ ·çš„è¯ï¼Œä¹Ÿå¯ä»¥è·³è¿‡ç­‰å¾…ä»åº“è¿™ä¸€æ­¥ï¼Œç›´æ¥è®©ä»åº“æ‰§è¡Œå³å¯ã€‚ä¸çŸ¥é“ç†è§£æ˜¯å¦æ­£ç¡®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436724,"discussion_content":"æ ¸å¿ƒæ˜¯è¦å¤„ç†å»¶è¿Ÿé—®é¢˜ï¼Œæ¯”å¦‚æ€ä¹ˆæ“ä½œå¯ä»¥ä¸ä¼šäº§ç”Ÿå»¶è¿Ÿ\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547621386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60934,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1547596419,"is_pvip":false,"replies":[{"id":"21729","content":"å°±æ˜¯å›¾8","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547605144,"ip_address":"","comment_id":60934,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1547596419","product_id":100020801,"comment_content":"mysql_session_track_get_fitstè¿™ä¸ªå‡½æ•°æ€ä¹ˆç”¨ï¼Œåé¢æœ‰å®ä¾‹å­ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436672,"discussion_content":"å°±æ˜¯å›¾8","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547605144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":170760,"discussion_content":"Cè¯­è¨€çš„å‡½æ•°å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581684951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}