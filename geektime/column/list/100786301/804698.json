{"id":804698,"title":"11ï½œAgentåº•å±‚ï¼šå¸¦ä½ æ‹†è§£ã€å®ç°ä¸€å¥—Agentåº•å±‚æ¡†æ¶","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é‡‘ä¼Ÿã€‚</p><p>ç»è¿‡ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘æƒ³ä½ å·²ç»å¯¹Agentæ™ºèƒ½ä½“çš„åº”ç”¨å¼€å‘æœ‰äº†ä¸€å®šçš„äº†è§£ã€‚ä½ æœ‰æ²¡æœ‰æƒ³è¿‡Cozeè¿™æ ·çš„å¹³å°åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p><p>æˆ‘æŠŠä¸ŠèŠ‚è¯¾çš„è¯èŒ¬ç•™åœ¨äº†æˆ‘ä»¬é€‰æ‹©è‡ªç ”äº†ä¸€å¥—è¥é”€Agentå¹³å°åº•å±‚ï¼Œé‚£è¿™èŠ‚è¯¾ï¼Œæˆ‘å°±å¸¦ä½ å®Œå…¨å®ç°ä¸€éAgentå¹³å°åº•å±‚æ¡†æ¶ï¼Œå¯¹ä½ äº†è§£å®Œæ•´çš„Agentå¹³å°æ¶æ„éå¸¸æœ‰å¸®åŠ©ã€‚</p><p>æˆ‘ä»¬å…ˆè¯´æœ€æ ¸å¿ƒçš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œåº•å±‚å¼€å‘ã€‚</p><h2>åº•å±‚å¼€å‘</h2><p>å…ˆå›é¡¾ä¸€ä¸‹æˆ‘ä»¬ä¸ŠèŠ‚è¯¾è¯´çš„Agentå’Œå¤§å‹æ¨¡å‹ä¹‹é—´çš„ä»£ç†å…³ç³»ã€‚è¿™ä¸ªä»£ç†å±‚æ„æˆäº†ç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚æˆ‘ä»¬åº”è¯¥å°†è¿™ä¸€ä¸‡ä¸ªAgentè§†ä¸ºä¸€ä¸ªç»Ÿä¸€çš„Agentå®ä½“ã€‚è¿™ä¸ªç»Ÿä¸€çš„Agentå¯ä»¥é€šè¿‡æç¤ºè¯è¿›è¡Œé‡æ–°å®šä¹‰ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªåŸºäºå¤§å‹æ¨¡å‹çš„èŠå¤©åº”ç”¨ç¨‹åºã€‚</p><p>å…³é”®åœ¨äºï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå°†æˆ‘ä»¬çš„ä¸šåŠ¡æ‰§è¡Œé€»è¾‘åµŒå…¥åˆ°èŠå¤©çš„è¿‡ç¨‹ä¸­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/28/b9/28417228f762c8c0652a105f70b9d9b9.png?wh=1920x1047\" alt=\"å›¾ç‰‡\"></p><p>æœ‰çš„äººå¯èƒ½ä¼šæƒ³ï¼Œè®©å¤§æ¨¡å‹ç›´æ¥è°ƒç”¨æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä¸å°±è¡Œäº†å—ï¼Ÿä»å¹¿ä¹‰ä¸Šæ¥è¯´ï¼Œè¿™æ ·å®ç°ä¹Ÿæ²¡é—®é¢˜ï¼Œåªä¸è¿‡æˆ‘ä»¬è¿™é‡Œè¯´çš„å¤§æ¨¡å‹æŒ‡çš„æ˜¯åªæœ‰æ–‡æœ¬èŠå¤©èƒ½åŠ›çš„å¤§æ¨¡å‹ã€‚æ‰€ä»¥è¿˜éœ€è¦ä¸€ä¸ªâ€œåŠ©ç†â€è§’è‰²ä»£ç†æ‰§è¡Œã€‚</p><h3>æ„å›¾è¯†åˆ«</h3><p>é‚£æ€ä¹ˆæ‰èƒ½å®ç°è¿™ä¸ªæ ¸å¿ƒçš„ä»£ç†å±‚å‘¢ï¼Ÿæˆ‘ä»¬å…ˆä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹è¯´ã€‚ç”¨è¿‡GPTçš„æœ‹å‹å¯èƒ½éƒ½æœ‰ä¸‹é¢çš„ä½“éªŒï¼Œå½“æˆ‘ä»¬è¦æ±‚GPTåŸºäºäº’è”ç½‘å·²æœ‰çŸ¥è¯†å›ç­”é—®é¢˜ï¼Œå®ƒä¼šæ€ä¹ˆåšå‘¢ï¼Ÿ</p><p><img src=\"https://static001.geekbang.org/resource/image/74/23/74bd708924b3dfc3535325db11e23723.jpg?wh=3536x2212\" alt=\"\"></p><p>ä½ çœ‹ï¼Œæˆ‘é—®äº†ä¸€ä¸ªé—®é¢˜ï¼ŒGPTæœç´¢äº†7ä¸ªç½‘ç«™ï¼Œç„¶åæ ¹æ®è¿™äº›ç½‘ç«™çš„å†…å®¹åšå‡ºäº†å›ç­”ã€‚ä½†æ˜¯æ˜¾ç„¶å¤§æ¨¡å‹æ˜¯ä¸å…·å¤‡ç½‘ç»œæœç´¢èƒ½åŠ›çš„ã€‚é‚£å®ƒæ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æˆ‘ä»¬æé—®é‡Œçš„ <code>è¯·ä½ å…ˆæŸ¥è¯¢ç½‘ç»œèµ„æ–™å†å›ç­”æˆ‘</code> è¿™ä¸ªæ„å›¾å¿…é¡»è¢«è¯†åˆ«å‡ºæ¥ï¼Œå¹¶æ”¹å˜åŸæœ‰æµç¨‹ï¼Œå®ƒæ‰èƒ½åšåˆ°æ‰§è¡Œæœç´¢æ“ä½œã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/db/b7/dbcf7e8d7b569f8e43ee1fbd3d31e3b7.png?wh=1920x1047\" alt=\"å›¾ç‰‡\"></p><p>å½“ç„¶ï¼Œ<code>è¯·ä½ å…ˆæŸ¥è¯¢ç½‘ç»œèµ„æ–™å†å›ç­”æˆ‘</code> è¿™å¥è¯è¿˜æœ‰åˆ«çš„è¡¨è¿°æ–¹å¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„è¿™äº›ã€‚</p><pre><code class=\"language-plain\">è¯·å…ˆé€šè¿‡ç½‘ç»œæœç´¢ç›¸å…³èµ„æ–™ï¼Œç„¶åå†å›ç­”æˆ‘çš„é—®é¢˜ã€‚\nå…ˆæŸ¥é˜…ä¸€äº›ç½‘ç»œèµ„æºï¼Œå†ç»™æˆ‘è¯¦ç»†è§£ç­”ã€‚\nè¯·å…ˆåœ¨ç½‘ä¸Šæ‰¾ä¸€äº›èµ„æ–™ï¼Œç„¶åå†ä¸ºæˆ‘è§£ç­”ã€‚\nå…ˆåœ¨äº’è”ç½‘æœé›†ç›¸å…³ä¿¡æ¯ï¼Œç„¶åå†å›ç­”æˆ‘ã€‚\nè¯·å…ˆæŸ¥æ‰¾ç½‘ç»œä¸Šçš„ç›¸å…³å†…å®¹ï¼Œå†æ¥å›ç­”æˆ‘çš„é—®é¢˜ã€‚\nè¯·å…ˆä»ç½‘ä¸Šè·å–ç›¸å…³ä¿¡æ¯ï¼Œç„¶åå†ç»™å‡ºç­”æ¡ˆã€‚\nå…ˆé€šè¿‡ç½‘ç»œæŸ¥è¯¢ä¸€ä¸‹ï¼Œå†ç»™æˆ‘æä¾›ç­”æ¡ˆã€‚\nè¯·å…ˆåœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€äº›ç›¸å…³èµ„æ–™ï¼Œå†æ¥å›ç­”æˆ‘çš„é—®é¢˜ã€‚\nè¯·å…ˆé€šè¿‡ç½‘ç»œæŸ¥è¯¢ç›¸å…³å†…å®¹ï¼Œç„¶åå†å›ç­”æˆ‘ã€‚\nè¯·å…ˆåˆ©ç”¨ç½‘ç»œæœç´¢ç›¸å…³èµ„æ–™ï¼Œç„¶åå†ç»™å‡ºè§£ç­”ã€‚\n</code></pre><p>è¿™ä¹Ÿå°±å¼•ç”³å‡ºä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯<strong>æ„å›¾è¯†åˆ«</strong><strong>æ¨¡å—å¿…é¡»è¯†åˆ«å‡ºæ‰€æœ‰çš„è¡¨è¿°æ–¹å¼ã€‚</strong>è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œæ„å›¾è¯†åˆ«è¿˜éœ€è¦å…·å¤‡ä¸Šä¸‹æ–‡çš„è¯†åˆ«èƒ½åŠ›ã€‚å› ä¸ºä¸€ä¸ªæ„å›¾å¾ˆå¯èƒ½éšè—åœ¨å¤šæ¬¡çš„ä¸Šä¸‹æ–‡äº¤äº’ä¸­ã€‚</p><p>å½“ç”¨æˆ·çš„æœç´¢æ„å›¾è¢«è¯†åˆ«ä¹‹åï¼Œä»£ç†å¯ä»¥è°ƒèµ·æ’ä»¶æˆ–å·¥ä½œæµã€‚ä½ å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œå¤§æ¨¡å‹çš„æ’ä»¶èƒ½åŠ›å’ŒAgentå¹³å°çš„æ’ä»¶èƒ½åŠ›ä»¥åŠå·¥ä½œæµæ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œéƒ½æ˜¯è®©å¤§æ¨¡å‹å…·å¤‡é¢å¤–ç¨‹åºæ‰§è¡Œèƒ½åŠ›çš„ä¸€ç§æ–¹æ³•ã€‚</p><p>æ¯”æ„å›¾è¯†åˆ«æ›´é‡è¦çš„è¿˜æœ‰<strong>å‚æ•°é—®é¢˜</strong>ã€‚æ¯”å¦‚ä¸ŠèŠ‚è¯¾çš„è¥é”€AIï¼Œåœ¨åŠ©ç†èŠå¤©äº¤äº’ä¸­ï¼Œä»£ç†å±‚éœ€è¦æ ¹æ®èŠå¤©ä¸Šä¸‹æ–‡è¯†åˆ«å‡ºå¯¹åº”å·¥ä½œæµçš„å‚æ•°ï¼Œå°±æ˜¯å…¬å¸åç§°ã€‚</p><p>é‚£ä¸Šé¢ä¾‹å­é‡Œçš„ç½‘ç»œè¯»å–æ’ä»¶ï¼Œè¾“å…¥å‚æ•°æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä½ å¯ä»¥æƒ³æƒ³ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/34/cc/34aa93a09c1d4249a17ece37cb35d0cc.png?wh=1920x1047\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘æƒ³ä½ ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œè¦å®ç°è¿™ä¸ªAgentçš„åº•å±‚ï¼Œæœ€æ ¸å¿ƒçš„å°±æ˜¯<strong>æ„å›¾è¯†åˆ«</strong>å’Œ<strong>å‚æ•°è¯†åˆ«</strong>ã€‚éœ€è¦æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªèƒ½åŠ›éƒ½æ˜¯å¤§æ¨¡å‹å…·å¤‡çš„ï¼Œæˆ‘ä»¬å®ç°çš„Agentåº•å±‚ä¹Ÿæ˜¯ç”¨å¤§æ¨¡å‹æ¥åš<strong>æ„å›¾è¯†åˆ«</strong>å’Œ<strong>å‚æ•°è¯†åˆ«</strong>ã€‚</p><h3>Agenté€†å‘åˆ†æ</h3><p>ä¸ºäº†æ›´å¥½åœ°è®¾è®¡è¿™ä¸ªåº•å±‚çš„æ¶æ„ï¼Œæˆ‘åœ¨æ–‘å¤´é›å¹³å°ä¸Šå†™äº†å‡ ä¸ªæµ‹è¯•ç”¨çš„Agentï¼Œä¸“é—¨ç”¨äºæ„å›¾è¯†åˆ«å’Œå‚æ•°è¯†åˆ«çš„é€†å‘åˆ†æå®éªŒã€‚è¿™å¯¹ç†è§£è¿™ä¸¤ä¸ªæ¨¡å—è‡³å…³é‡è¦ï¼Œä½ ä¸€å®šè¦è·Ÿç€æˆ‘ä¸€æ­¥æ­¥æ¥åšã€‚</p><p>ä¸‹é¢æ˜¯æˆ‘åŸºäºAgentå¹³å°åšçš„ä¸€ä¸ª<strong>è¯»å–å˜é‡çš„å·¥ä½œæµ</strong>ï¼Œçœ‹çœ‹å®ƒçš„å…·ä½“å·¥ä½œæµä»£ç ã€‚</p><ul>\n<li><strong>å·¥ä½œæµ1ï¼šç¨‹åºå‘˜æµ‹è¯•ï¼ˆåŸºäºLLMå®ç°ï¼‰ã€‚</strong></li>\n</ul><pre><code class=\"language-plain\">æç¤ºè¯ï¼šæŠŠ {{message}} é‡Œçš„å˜é‡åå–å‡ºï¼Œæ²¡æœ‰å°±ç›´æ¥è¾“å‡º \"123\" å­—ç¬¦ä¸²\n</code></pre><p>æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€äº›caseï¼Œå¹¶æµ‹è¯•è¿™ä¸ªAgentï¼Œç†è§£Agentå¹³å°çš„ä»£ç†æ¨¡å—æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/57/b800e605029f0ab196476755b84f5757.png?wh=1920x1210\" alt=\"å›¾ç‰‡\"></p><p>ç¬¬ä¸€ä¸ªcaseé‡Œï¼Œå·¥ä½œæµçš„è¾“å…¥æ˜¯ <code>å–å˜é‡å a=1</code> è¿™å¥è¯ï¼Œç»è¿‡LLMçš„åˆ†æï¼Œè¾“å‡ºçš„å˜é‡åæ˜¯ <code>a</code>ï¼Œæœ€ååŠ©ç†ç»™çš„å›å¤æ˜¯ <code>æˆåŠŸæå–åˆ°çš„å˜é‡åä¸º:a</code>ã€‚åœ¨ç¬¬äºŒä¸ªcaseé‡Œï¼Œæˆ‘ä»¬æ²¡æœ‰è¾“å…¥å˜é‡åï¼Œä½†æ˜¯å·¥ä½œæµä»ç„¶å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æå–å‡ºåˆšæ‰çš„å˜é‡åæ¥ã€‚</p><p>OKï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸¤ä¸ªç»“è®ºã€‚ä¸€æ˜¯å·¥ä½œæµè¾“å‡ºçš„ <code>a</code>  è¢«è¿”å›ç»™å¤§æ¨¡å‹é‡æ–°ç»„ç»‡è¯­è¨€ï¼Œæœ€åæ‰è¿”å›ç»™åŠ©ç†ã€‚äºŒæ˜¯ä»£ç†æ¨¡å—å°†ä¸Šä¸‹æ–‡ä¸€èµ·äº¤ç»™äº†å·¥ä½œæµï¼Œè¿™æ ·å®ƒæ‰èƒ½å‡†ç¡®è¯†åˆ«ä¹‹å‰çš„å˜é‡åã€‚</p><p>ä¸‹é¢é€šè¿‡å¦å¤–ä¸€ä¸ªå·¥ä½œæµçš„æµ‹è¯•ï¼Œä¹Ÿå¯ä»¥å°è¯è¿™å‡ ä¸ªç»“è®ºã€‚</p><ul>\n<li><strong>å·¥ä½œæµ2ï¼šé€€æ¬¾å®¡æ‰¹ï¼ˆåŸºäºPythonå®ç°ï¼‰ã€‚</strong></li>\n</ul><pre><code class=\"language-plain\">if orderId == \"1\": \n  return 'æ‚¨çš„é€€æ¢è´§ç”³è¯·å·²é€šè¿‡ï¼Œé’±æ¬¾å·²æŒ‰åŸè·¯å¾„é€€è¿˜'\nelse:\n  return 'æ²¡æœ‰æŸ¥è¯¢åˆ°'\n</code></pre><p>å¯¹äºçš„caseæµ‹è¯•å¦‚ä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥å¥½å¥½åˆ†æä¸€ä¸‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/87/1b388037f50d87c9119d9bd6ae29c587.png?wh=1920x1263\" alt=\"å›¾ç‰‡\"></p><p>æ³¨æ„çœ‹ï¼Œcase 2ä¸­åŠ©ç†çš„æœ€ç»ˆå›å¤å’Œæˆ‘Pythonç¨‹åºçš„è¾“å‡º <code>æ‚¨çš„é€€æ¢è´§ç”³è¯·å·²é€šè¿‡ï¼Œé’±æ¬¾å·²æŒ‰åŸè·¯å¾„é€€è¿˜</code> æ˜¯ä¸åŒçš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œ<strong>ä»£ç†å±‚åªæ˜¯å‚è€ƒå·¥ä½œæµçš„è¾“å‡ºï¼Œå…·ä½“å¦‚ä½•å›å¤å®¢æˆ·éƒ½æ˜¯å¤§æ¨¡å‹å†³å®šçš„ã€‚</strong></p><p>è¿™ä¹Ÿæ­£ç¬¦åˆä¹‹å‰æåˆ°çš„ï¼šAgentåªæ˜¯ä¸€ä¸ªå…¬å¸çš„å®¢æœè§’è‰²ï¼Œå®ƒçš„èŒè´£æ˜¯æ»¡è¶³å®¢æˆ·çš„éœ€æ±‚ï¼Œå¹¶è´Ÿè´£æ²Ÿé€šï¼Œå·¥ä½œæµåˆ™åƒå…¬å¸å†…éƒ¨çš„éƒ¨é—¨ï¼Œä»–ä»¬å¹¶ä¸ç›´æ¥å¯¹å¤–ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬å›æƒ³ä¸€ä¸‹ä¸ŠèŠ‚è¯¾çš„AgentåŠ©ç†ï¼Œå¯ä»¥é…ç½®çš„éƒ¨åˆ†æ˜¯ä¸æ˜¯åªæœ‰åŠ©ç†æç¤ºè¯å’Œå·¥ä½œæµèŠ‚ç‚¹çš„è¾“å…¥è¾“å‡ºå‚æ•°å‘¢ï¼Ÿæˆ‘æƒ³å‘Šè¯‰ä½ çš„æ˜¯ï¼Œ<strong>è¿™äº›é…ç½®å°±æ˜¯ç”¨äºè®©å¤§æ¨¡å‹åšæ„å›¾è¯†åˆ«å’Œå‚æ•°è¯†åˆ«çš„ã€‚</strong></p><p>ä¸‹é¢æ˜¯æˆ‘åšçš„Agentåº•å±‚çš„æ¶æ„æµç¨‹å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/c7/3b/c7877834bd2de530befe4ea2e4bc2e3b.png?wh=1920x866\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘æƒ³è¿™ä¸ªæµç¨‹å›¾å·²ç»æŠŠæ•´ä¸ªAgentä»£ç†å±‚çš„ç¨‹åºæµç¨‹åšå¾—éå¸¸æ¸…æ¥šäº†ï¼Œä½ å¯ä»¥ä»£å…¥ä¸€æ¬¡ç”¨æˆ·çš„æé—®å¥½å¥½çœ‹ä¸€ä¸‹ã€‚</p><h3>æŠ€æœ¯å®ç°</h3><p>æœ€åï¼Œæˆ‘ä»¬è¯´æŠ€æœ¯å®ç°ã€‚æ„å›¾è¯†åˆ«å’Œå‚æ•°è¯†åˆ«çš„å…·ä½“å®ç°æ–¹æ³•æœ‰ä¸¤ç§ï¼Œå¯ä»¥é€šè¿‡å¾®è°ƒå¤§æ¨¡å‹å®ç°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æç¤ºè¯å®ç°ï¼Œæ€æƒ³éƒ½æ˜¯æƒ³é€šçš„ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªDemoçº§åˆ«çš„æ ¸å¿ƒæ¶æ„ä»£ç æ¼”ç¤ºï¼Œè¿™ä¸ªä»£ç å°±æ˜¯ä¸Šè¿°Agentåº•å±‚æ¶æ„çš„æ ¸å¿ƒé€»è¾‘å®ç°ä¾‹å­ã€‚è¿™ä¸ªDemoä»¥ä¸€ä¸ªç”¨é¤ä¸šåŠ¡ä¸ºä¾‹ï¼Œåˆ†ä¸ºæç¤ºè¯å’Œæ ¸å¿ƒä»£ç ä¸¤ä¸ªéƒ¨åˆ†ã€‚ç†è§£äº†è¿™ä¸ªä¾‹å­ï¼Œå‰©ä¸‹çš„ä¸€ä¸‡ä¸ªAgentä¹Ÿå°±ç†è§£äº†ã€‚</p><p>é¦–å…ˆæ˜¯æ ¸å¿ƒæç¤ºè¯ã€‚</p><pre><code class=\"language-plain\">ç°åœ¨æœ‰3ä¸ªè§’è‰²ï¼Œsys ä»£è¡¨åº”ç”¨ç¨‹åºç³»ç»Ÿï¼Œuser ä»£è¡¨ç”¨æˆ·ï¼Œä½ çš„è§’è‰²æ˜¯ä¸€åé¤å…æœåŠ¡å‘˜ï¼Œä½ çš„ç›®çš„æ˜¯æœåŠ¡ç”¨æˆ·ï¼Œè¯·ä½ æ ¹æ®ä¸Šä¸‹æ–‡å†³å®šæ˜¯å¦è°ƒç”¨ sysåº”ç”¨ç¨‹åºç³»ç»Ÿã€‚\nè°ƒç”¨ç³»ç»Ÿåˆ™è¾“å‡º to_sys: åº”ç”¨ç¨‹åºå‚æ•°\nå›å¤ç”¨æˆ·åˆ™è¾“å‡º to_user: å›å¤çš„æ¶ˆæ¯\n\n\nè§„åˆ™ï¼š\n1ï¼Œè¦ä¸€å¥ä¸€å¥çš„å’Œæˆ‘æ²Ÿé€šï¼Œæ¯æ¬¡åªèƒ½é€‰æ‹©å’Œto_sysæˆ–to_userå…¶ä¸­ä¹‹ä¸€ï¼Œæˆ‘ä¼šä»£ä¸ºè½¬è¾¾å’Œå¤„ç†æ¶ˆæ¯ï¼Œå¹¶ä¸”ç”¨sys æˆ– userå¼€å¤´çš„æ¶ˆæ¯å›å¤ä½ \n2ï¼Œè°ƒç”¨ç¨‹åºçš„å…·ä½“å‚æ•°è¦åœ¨ä¸Šä¸‹æ–‡ä¸­ç¡®å®šï¼Œæ¯”å¦‚æˆ‘ä»¬åº”ç”¨ç¨‹åºæœ‰ä¸ªå‚æ•°aï¼Œä¸Šä¸‹æ–‡é‡Œç”¨æˆ·æˆ–ç³»ç»Ÿæ²¡æœ‰æä¾›ï¼Œä½ å°±ä¸èƒ½æ“…è‡ªå†³å®šaçš„å…·ä½“æ•°å€¼ï¼Œè°ƒç”¨ç¨‹åºç”¨jsonæ ¼å¼\n3ï¼Œå½“æˆ‘ç”¨sysï¼šå¼€å¤´ç»™ä½ å›å¤çš„æ—¶å€™ï¼Œè¡¨ç¤ºæœ¬æ¬¡åº”ç”¨ç¨‹åºè¿”å›ï¼Œä½ è¦ç»“åˆè¿™ä¸ªè¿”å›ä¿¡æ¯ç»§ç»­å’Œç”¨æˆ·æ²Ÿé€šï¼Œä½ ç›´æ¥ç”¨to_userå’Œç”¨æˆ·æ²Ÿé€šï¼Œè¦æ³¨æ„å½±è—ç¨‹åºç³»ç»Ÿè¿™ä¸ªä¿¡æ¯ï¼Œè®©ç”¨æˆ·æ„ŸçŸ¥ä¸åˆ°\n\n\nåä¾‹ï¼š\n1ï¼Œç±»ä¼¼ä¸‹é¢çš„å›å¤æ˜¯é”™è¯¯çš„ï¼Œé”™è¯¯åŸå› æ˜¯åœ¨æ¶ˆæ¯é‡ŒåŒæ—¶å‡ºç°to_sys å’Œ to_user\n\"\"\"\nto_sys: {\nâ€˜appâ€™ : 'ç‚¹é¤åº”ç”¨',\n'usernum' : 1,\n'caiming' : 'åŒ…å­',\n'cainum' : 3\n}\n\n\nto_user: å¥½çš„ï¼Œä¸‰ä¸ªåŒ…å­å·²ç»ä¸ºæ‚¨ä¸‹å•äº†ï¼Œç¨ç­‰ç‰‡åˆ»å°±ä¼šä¸Šèœã€‚æ˜¯å¦è¿˜éœ€è¦ç‚¹å…¶ä»–èœå“æˆ–è€…é¥®æ–™å‘¢ï¼Ÿ\n\"\"\"\n\n\n[åº”ç”¨ç¨‹åºåˆ—è¡¨å¦‚ä¸‹]\n1ï¼Œç‚¹é¤åº”ç”¨ï¼Œå½“ç”¨æˆ·ç‚¹é¤æ—¶è°ƒç”¨ï¼Œ\nè¯·ä½ å’Œç”¨æˆ·æ²Ÿé€šç¡®å®šè¿™äº›å‚æ•°ï¼šç”¨æˆ·äººæ•°ï¼Œèœåï¼ˆå¿…å¡«ï¼‰ï¼Œæ•°é‡ï¼ˆå¿…å¡«)\nè¾“å‡ºjsonæ ¼å¼ä¾‹å­ï¼š{\n    â€˜appâ€™ : 'ç‚¹é¤åº”ç”¨', #åº”ç”¨åå­—ï¼ˆå¿…å¡«ï¼‰\n    'usernum' : 1,  #ç”¨æˆ·äººæ•°\n    'caiming' : 'åŒ…å­', #èœå\n    'cainum' : 5 #æ•°é‡\n}\n2ï¼Œèœå•åº”ç”¨ï¼Œåœ¨ç‚¹é¤ä¹‹å‰è°ƒç”¨ï¼Œ\nå‚æ•°ï¼šæ— \nè¾“å‡ºjsonæ ¼å¼ä¾‹å­ï¼š{\n    â€˜appâ€™ : 'èœå•åº”ç”¨', #åº”ç”¨åå­—ï¼ˆå¿…å¡«ï¼‰\n}\n3ï¼Œç»“è´¦åº”ç”¨ï¼Œå½“ç”¨æˆ·ç”¨å®Œé¤éœ€è¦ç»“è´¦æ—¶è°ƒç”¨ï¼Œ\nå‚æ•°ï¼šæ— \nè¾“å‡ºjsonæ ¼å¼ä¾‹å­ï¼š{\n    â€˜appâ€™ : 'ç»“è´¦åº”ç”¨', #åº”ç”¨åå­—ï¼ˆå¿…å¡«ï¼‰\n}\n\n\næ¥ä¸‹æ¥ç”¨to_userç»™ç”¨æˆ·å¼€å§‹ç¬¬ä¸€æ¡æ¶ˆæ¯\nä½ çš„é¤å…åå­—æ˜¯: æˆéƒ½å°åƒ\n</code></pre><p>æˆ‘ä»¬å¯åˆ†æä¸€ä¸‹è¿™ä¸ªæ ¸å¿ƒæç¤ºè¯ï¼Œæœ‰ä¸‰ä¸ªå±‚æ¬¡ã€‚</p><p>å…¶ä¸€æ˜¯å®šä¹‰è§’è‰²ï¼Œæç¤ºè¯é‡Œè¡¨æ˜äº†ä»£ç†ã€ç³»ç»Ÿã€ç”¨æˆ·ä¸‰è€…çš„å…³ç³»ï¼Œè®©å¤§æ¨¡å‹æ ¹æ®ä¸Šä¸‹æ–‡æ¥å†³å®šå…·ä½“çš„å›å¤ï¼Œè¿™ä¹Ÿå°±è§£å†³äº†æ„å›¾è¯†åˆ«çš„é—®é¢˜ã€‚å…¶äºŒæ˜¯å¯¹ <code>sys</code> ç±»å‚æ•°çš„é™å®šæç¤ºè¯ï¼Œè®©å¤§æ¨¡å‹æŒ‰æ’ä»¶å’Œå·¥ä½œæµçš„å‚æ•°æ ¼å¼æ¥å›ç­”ã€‚å…¶ä¸‰æ˜¯å°†åº”ç”¨çš„å·¥ä½œæµå’Œå…·ä½“å‚æ•°æ³¨å…¥æç¤ºè¯ï¼Œè®©å¤§æ¨¡å‹ç†è§£åº”ç”¨ã€‚</p><p>è¿™æ®µæç¤ºè¯çš„ä½œç”¨å°±æ˜¯å‘Šè¯‰å¤§æ¨¡å‹æˆ‘ä»¬çš„å…·ä½“åœºæ™¯ä»¥åŠåŠ©ç†çš„å…·ä½“èƒ½åŠ›ï¼Œå°†ä¸Šä¸‹æ–‡äº¤ç»™å®ƒå¤„ç†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå„ä¸ªæ’ä»¶å’Œå·¥ä½œæµçš„å‚æ•°éƒ½æ˜¯å¤§æ¨¡å‹æ¥ç»„ç»‡çš„ï¼Œæˆ‘ä»¬ç»™äºå¼•å¯¼å³å¯ã€‚</p><p>å’Œæç¤ºè¯å¯¹åº”çš„Demoç¨‹åºä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-plain\">import json\ndef deal_app(app, params):\n    print(\"&gt;&gt;&gt; \" + app)\n\n\n    if app == \"èœå•åº”ç”¨\":\n        return 'èœå• 1åŒ…å­ 2é¥ºå­ 3 å¯ä¹æˆ–é›ªç¢§'\n\n\n    if app == \"ç»“è´¦åº”ç”¨\":\n        return 'ä¸€å…±æ¶ˆè´¹100å…ƒ'\n\n\n    if app == \"ç‚¹é¤åº”ç”¨\":\n        if 'caiming' not in params or  params['caiming'] == None:\n            return \"è¯·å…ˆé€‰æ‹©èœå“å’Œæ•°é‡\"\n        if params['caiming'] == 'é¢åŒ…':\n            return 'é¢åŒ…å–å®Œäº†'\n\n\n        return \"å·²ä¸‹å•\"\n\n\n    return \"æ²¡æœ‰è¿™ä¸ªåº”ç”¨\"\n\n\ndef deal_answer(answer):\n\n\n    if answer.find(\"to_user:\") &gt;= 0 and answer.find(\"to_sys:\") &gt;= 0:\n        print(answer)\n        return xf_ai('user', \"è¯·ä¸è¦åŒæ—¶å›å¤to_user å’Œ to_sys, ä¸¤è€…åªèƒ½é€‰ä¸€ä¸ªï¼Œä¹Ÿä¸è¦[ç­‰å¾…ç³»ç»Ÿå›å¤]è¿™æ ·çš„è¯´æ˜\", \"sys:\")\n\n\n    if answer.find(\"to_sys:\") &gt;= 0 and answer.find(\"\\nsys:\") &gt;= 0:\n        print(answer)\n        return xf_ai('user', \"è¯·ä¸è¦åŒæ—¶å›å¤to_sys å’Œ sys, åªå›å¤to_sysçš„æ•°æ®\", \"sys:\")\n\n\n    if answer.find(\"to_user:\") == 0:\n        return answer.replace(\"to_user:\", \"\")\n\n\n    if answer.find(\"to_sys:\") == 0:\n        # print(answer)\n        j = answer.replace(\"to_sys:\", \"\")\n        j = j.strip()\n        end = j.find(\"}\")\n        j = j[0:end+1]\n        print(j)\n        jj = json.loads(j)\n        app = jj['app']\n        s = deal_app(app, jj)\n        o = xf_ai('user', s, \"sys:è¯·å‘Šè¯‰ç”¨æˆ·ï¼š\")\n        return o\n    # print(answer)\n    return \"\"\ndef get_input_from_command_line():\n    \"\"\"\n    Get input string from command line using input function.\n    \"\"\"\n    input_string = input(\"ç”¨æˆ·: \")\n    return input_string\n\n\ndef out_user_message(s):\n    if s == False:\n        return\n\n\n    print('æœåŠ¡å‘˜ï¼š'  + s)\n    \n\n\nif __name__ == '__main__':\n\n\n    o = xf_ai('user', prompt)\n    out_user_message(o)\n\n\n    while True:\n        s = get_input_from_command_line()\n        if s  == 'quit':\n            exit()\n        o = xf_ai('user', s, \"user:\")\n        out_user_message(o)\n</code></pre><p>è¿™ä¸ªç¨‹åºå°±æ˜¯ä»£ç†å±‚çš„æ ¸å¿ƒé€»è¾‘ä»£ç äº†ã€‚æ•´ä½“çš„æ€æƒ³å°±æ˜¯å›´ç»•æ ¸å¿ƒæç¤ºè¯æ„å»ºå¤„ç†æµç¨‹ï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ç›´æ¥å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Œåœ¨å·¥ä½œæµçŠ¶æ€ä¸‹è°ƒç”¨å·¥ä½œæµé€»è¾‘ï¼Œæ ¹æ®è¿”å›ä¿¡æ¯å†è®©æ¨¡å‹ç»„ç»‡è¯­è¨€å›å¤ç”¨æˆ·ï¼Œå®Œæˆæ•´ä¸ªäº¤äº’ã€‚</p><p>ä¸‹é¢æ˜¯å®ƒæ ¸å¿ƒç¨‹åºæµç¨‹å›¾ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/3c/2a/3cdac3cb473cf36d69c34dd5bba4432a.png?wh=1920x569\" alt=\"å›¾ç‰‡\"></p><p>åƒä¸‡ä¸è¦å°çœ‹è¿™ä¸ªæç¤ºè¯å’Œåº•å±‚Demoï¼Œå®é™…ä¸Šéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ã€‚æˆ‘ä»¬æ•´ä¸ªç³»ç»Ÿéƒ½æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä»£ç ä¸Šæ„å»ºçš„ï¼Œä½ å¯ä»¥æŠŠè¿™éƒ¨åˆ†çš„å®ç°å•ç‹¬ä½œä¸ºä¸€ä¸ªå®éªŒæ¥åšï¼Œä¸€å®šä¼šå¯¹å¤§æ¨¡å‹å¼€å‘æœ‰æ›´æ·±å…¥çš„ä½“ä¼šã€‚</p><p>å¦‚æœè¦æ›´å¥½åœ°ç†è§£æ•´å¥—Agentç³»ç»Ÿï¼Œæˆ‘æƒ³å¯ä»¥ä»æˆ‘ä»¬æœ€ç»ˆçš„åŠ©ç†åˆ›å»ºç•Œé¢ç»§ç»­ç»™ä½ åˆ†æã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a9/61/a9f69141cf5d7dc70654fbac19901d61.png?wh=1627x1377\" alt=\"å›¾ç‰‡\"></p><p>æˆ‘ä»¬çš„åˆ›å»ºåŠ©ç†åŠŸèƒ½å®é™…åˆ†ä¸º5æ­¥ï¼Œæ¯ä¸€æ­¥éƒ½å¿…é¡»å®Œæˆï¼Œè¿™æ˜¯å’ŒCozeè¿™ç±»å¹³å°ä¸åŒçš„ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸€æ­¥å°±æ˜¯ç»™æ¯ä¸ªåŠ©ç†é…ä¸€ä¸ªçŸ¥è¯†åº“ã€‚</p><h2>åº”ç”¨å¼€å‘</h2><p>è¿™é‡Œæˆ‘è¿˜æ˜¯ä¼šä¸¾ä¸€ä¸ªå…·ä½“çš„åº”ç”¨ä¾‹å­ï¼Œå› ä¸ºæˆ‘ä»¬çš„åº•å±‚demoæ˜¯ä»¥é¤é¦†èœå•ä¸ºåŸºç¡€å®ç°çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å°±ç»§ç»­æ‰©å±•è¿™ä¸ªæ¡ˆä¾‹ï¼Œå¼€å‘ä¸€ä¸ªé»„ç„–é¸¡ç‚¹é¤å¤§å¸ˆã€‚</p><h3>çŸ¥è¯†åº“æ’ä»¶</h3><p>é‚£ä¹ˆæ˜¾ç„¶ï¼Œèœå•æ•°æ®æ˜¯å®ƒçš„æ ¸å¿ƒã€‚å®é™…ä¸Šå¤§éƒ¨åˆ†åº”ç”¨éƒ½ä¼šç”¨åˆ°æ•°æ®åº“ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆç»™æ¯ä¸ªåŠ©ç†éƒ½é…ç½®çŸ¥è¯†åº“çš„åŸå› ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/71/ff/71efb752b804c9329974a454de621bff.png?wh=1581x1125\" alt=\"å›¾ç‰‡\"></p><p>è¦å®ç°è¿™å¥—å®¢æˆ·è‡ªåŠ©é…ç½®ï¼Œå¦‚ä½•è·Ÿç°æœ‰ç³»ç»Ÿå¯¹æ¥å‘¢ï¼Ÿéœ€è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚å…¶ä¸€æ˜¯æ•°æ®å±‚é¢çš„è‡ªåŠ©è®­ç»ƒï¼Œå…¶äºŒæ˜¯ä¸šåŠ¡é€»è¾‘å±‚é¢çš„å·¥ä½œæµç§»æ¤ã€‚</p><p>åœ¨æ•°æ®å±‚é¢ï¼Œæˆ‘ä»¬æä¾›äº†çŸ¥è¯†åº“è‡ªåŠ©è®­ç»ƒï¼Œè¿™æ ·æ¯ä¸ªå®¢æˆ·éƒ½å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªè‡ªå·±å®šåˆ¶åŒ–çš„å°æ¨¡å‹ï¼Œä¿è¯æ•°æ®çš„ç§æœ‰å±æ€§ã€‚</p><p><strong>ä»¥ä¸€ä¸ªé»„ç„–é¸¡é¤é¦†èœå•çš„æ•°æ®ä¸ºä¾‹ï¼Œ<strong><strong>æˆ‘ä»¬</strong></strong>çœ‹ä¸€ä¸‹ç§æœ‰çŸ¥è¯†åº“çš„æ­å»ºæµç¨‹ã€‚</strong></p><p>ç¬¬ä¸€æ­¥ï¼Œå°†èœå•æ•°æ®æ•´ç†æˆå›ºå®šçš„è¾“å…¥æ ¼å¼ï¼Œè¿™ä¸€æ­¥æ¯”è¾ƒç®€å•ã€‚</p><pre><code class=\"language-plain\">{\n    \"1\": {\"name\": \"ç»å…¸é»„ç„–é¸¡\", \"description\": \"é¸¡è‚‰é²œå«©ï¼Œé…ä»¥æµ“éƒé…±æ±å’ŒåœŸè±†\", \"price\": \"12å…ƒ\", \"category\": \"ä¸»èœ\"},\n    \"2\": {\"name\": \"è¾£å‘³é»„ç„–é¸¡\", \"description\": \"ç»å…¸é»„ç„–é¸¡åŸºç¡€ä¸ŠåŠ å…¥è¾£æ¤’è°ƒå‘³\", \"price\": \"13å…ƒ\", \"category\": \"ä¸»èœ\"},\n    \"3\": {\"name\": \"é¦™è‡é»„ç„–é¸¡\", \"description\": \"é»„ç„–é¸¡åŠ å…¥é¦™è‡ï¼Œé£å‘³ç‹¬ç‰¹\", \"price\": \"14å…ƒ\", \"category\": \"ä¸»èœ\"}\n}\n</code></pre><p>ç¬¬äºŒæ­¥ï¼Œå°†èœå•å‘é‡åŒ–ï¼Œå°†ç±»ä¼¼ <code>item[\"description\"]</code> è¿™æ ·çš„æœ¬å­—æ®µè½¬åŒ–ä¸ºå‘é‡è¡¨ç¤ºï¼Œå…·ä½“ä¼ªä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-plain\">from transformers import BertModel, BertTokenizer\nimport torch\n\n\n# ä½¿ç”¨BERTæ¨¡å‹\ntokenizer = BertTokenizer.from_pretrained('bert-base-uncased')\nmodel = BertModel.from_pretrained('bert-base-uncased')\n\n\ndef get_embedding(texts):\n    embeddings = []\n    for text in texts:\n        inputs = tokenizer(text, return_tensors='pt')\n        outputs = model(**inputs)\n        vector = outputs.last_hidden_state.mean(dim=1).detach().numpy()\n        embeddings.append(vector)\n    return embeddings\n\n\n# è¯»å–æ•°æ®å¹¶å‘é‡åŒ–\nwith open('huangmenji_menu.json', 'r') as f:\n    menu_data = json.loads(f.read())\n\n\nmenu_descriptions = [item[\"description\"] for item in menu_data.values()]\nmenu_embeddings = get_embedding(menu_descriptions)\n</code></pre><p>è¿™ä¸€æ­¥æ ¸å¿ƒæ˜¯ <code>get_embedding(menu_descriptions)</code> è¿™ä¸ªé€»è¾‘ã€‚å®ƒå®ç°çš„æ˜¯æ–‡æœ¬å‘é‡çš„è½¬åŒ–ï¼Œåªæœ‰è½¬åŒ–ä¸ºå‘é‡æ•°æ®æ ¼å¼æ‰èƒ½åœ¨å‘é‡æ•°æ®åº“åšåç»­æ“ä½œã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼Œå­˜å‚¨å’Œè¯»å–å‘é‡æ•°æ®åº“ï¼Œè¿™é‡Œä»¥ <code>Milvuså‘é‡æ•°æ®åº“</code> ä¸ºä¾‹ï¼Œæ³¨æ„è¦å°†èœå•ä¿¡æ¯å’Œå‘é‡ä¿¡æ¯ä¸€èµ·å­˜å‚¨ï¼Œå…·ä½“ä¼ªä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-plain\">from pymilvus import MilvusClient, FieldSchema, CollectionSchema, DataType, Collection\nimport numpy as np\n\n\n# è¿æ¥åˆ°Milvus\nclient = MilvusClient(uri=\"http://localhost:19530\", db_name=\"default\")\n\n\n# å®šä¹‰é›†åˆschema\nfields = [\n    FieldSchema(name=\"id\", dtype=DataType.INT64, is_primary=True, auto_id=False),\n    FieldSchema(name=\"name\", dtype=DataType.VARCHAR, max_length=100),\n    FieldSchema(name=\"description\", dtype=DataType.VARCHAR, max_length=1000),\n    FieldSchema(name=\"embedding\", dtype=DataType.FLOAT_VECTOR, dim=768)\n]\nschema = CollectionSchema(fields, \"é»„ç„–é¸¡é¤é¦†èœå•\")\nindex_params = client.prepare_index_params()\nindex_params.add_index(\n    field_name=\"embedding\",\n    index_type=\"IVF_FLAT\",\n    metric_type=\"IP\",\n    params={\"nlist\": 128}\n)\n\n\n# åˆ›å»ºé›†åˆ\ncollection_name = \"huangmenji_menu\"\nclient.create_collection(\n    collection_name=collection_name,\n    schema=schema,\n    index_params=index_params\n)\n\n\n# æ’å…¥æ•°æ®\nentities = [\n    {\"id\": int(item_id),\n     \"name\": menu_data[item_id][\"name\"],\n     \"description\": menu_data[item_id][\"description\"],\n     \"embedding\": menu_embeddings[int(item_id)-1].tolist()}\n    for item_id in menu_data\n]\nclient.insert(collection_name=collection_name, data=entities)\n</code></pre><p>æ•´ä¸ªæ¨¡å—æœ€æ ¸å¿ƒçš„ä¸€è¡Œä»£ç å…¶å®å°±æ˜¯è¿™å¥ <code>FieldSchema(name=\"embedding\", dtype=DataType.FLOAT_VECTOR, dim=768)</code>ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¼ ç»Ÿæ•°æ®åº“é‡Œçš„ç´¢å¼•ã€‚åŠ ä¸Šè¿™ä¸ªå­—æ®µåï¼Œåç»­å·¥ä½œæµä¸­éœ€è¦ç”¨åˆ°èœå•æ—¶éƒ½å¯ä»¥ç”¨å‘é‡æŸ¥è¯¢ï¼Œå…·ä½“æŸ¥è¯¢ç±»ä¼¼ä¸‹é¢çš„ä¼ªä»£ç ã€‚</p><pre><code class=\"language-plain\"># æŸ¥è¯¢å‘é‡åŒ–è¾“å…¥\nquery = \"æˆ‘å–œæ¬¢åƒè¾£ï¼Œæœ‰ä»€ä¹ˆèœå“æ¨è\"\nquery_embedding = get_embedding([query])\n\n\n# æœç´¢ç›¸ä¼¼çš„èœå•é¡¹\nres = client.search(\n    collection_name=collection_name,\n    data=query_embedding,\n    limit=3,\n    search_params={\"metric_type\": \"IP\", \"params\": {}},\n    output_fields=['name', 'description']\n)\n\n\n# æ˜¾ç¤ºç»“æœ\nfor result in res:\n    print(f\"Found menu item: {result['name']} - {result['description']}\")\n</code></pre><p>æ³¨æ„ï¼Œç”¨æˆ·çš„è¾“å…¥ä¾‹å¦‚ <code>â€œå–œæ¬¢è¾£å‘³çš„èœå“â€</code> å¯èƒ½æ¯ä¸ªäººè¡¨è¿°ä¸ä¸€æ ·ã€‚ä½†æ˜¯åŒæ ·éœ€æ±‚ä¸‹ï¼Œé€šè¿‡å‘é‡æŸ¥è¯¢å°±å¯ä»¥æ‰¾åˆ°ç›¸ä¼¼çš„èœå“ä¿¡æ¯ï¼Œè¿™æ­£æ˜¯å‘é‡æ•°æ®åº“çš„æ ¸å¿ƒä½œç”¨ã€‚</p><p>å¦‚æœå•ç‹¬é’ˆå¯¹ä¸€ä¸ªåº”ç”¨å¼€å‘è¿™æ ·ä¸€ä¸ªçŸ¥è¯†åº“æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è¦åšçš„æ˜¯è®©æ‰€æœ‰åŠ©ç†å¯ä»¥å¤ç”¨ä¸€å¥—çŸ¥è¯†åº“é€»è¾‘ï¼Œå› æ­¤åœ¨å®æˆ˜ä¸­ï¼Œæˆ‘ä»¬ä¼šé’ˆå¯¹è¿™ç±»é€»è¾‘å¼€å‘ä¸€ä¸ªç»Ÿä¸€çš„æ’ä»¶ã€‚</p><p>ä¸‹é¢æ˜¯è¿™ä¸ªçŸ¥è¯†åº“æ’ä»¶çš„ä¼ªä»£ç è¡¨ç¤ºã€‚</p><pre><code class=\"language-plain\"># AIçŸ¥è¯†åº“æ’ä»¶\ndef plugin_ai_knowledge_base_query(query: str, knowledge_base_name: str, field: str) -&gt; str:\n    \"\"\"\n    è¾“å…¥ï¼š\n        query (str) - ç”¨æˆ·æŸ¥è¯¢çš„é—®é¢˜æˆ–ä¸»é¢˜\n        knowledge_base_name (str) - çŸ¥è¯†åº“çš„åç§°\n        field (str) - éœ€è¦è·å–çš„å…·ä½“å­—æ®µåç§°\n    è¾“å‡ºï¼šstr - ä»çŸ¥è¯†åº“ä¸­è·å–çš„ç›¸å…³ä¿¡æ¯\n    \"\"\"\n    # è°ƒç”¨åŸç³»ç»Ÿå‡½æ•°è·å–çŸ¥è¯†åº“ä¿¡æ¯\n    return original_system_get_knowledge_base_info(query, knowledge_base_name, field)\n\n\n</code></pre><p>è¦æ³¨æ„ï¼Œè¿™é‡Œçš„ä¼ªä»£ç å·²ç»æä¾›äº†æ ¸å¿ƒçš„é€»è¾‘ï¼Œå¦‚æœä½ æƒ³åšè¿™éƒ¨åˆ†å®éªŒï¼Œå®Œæ•´çš„ä»£ç å¯ä»¥åœ¨è¯¾åäº¤æµç¾¤èµ„æ–™ä¸­é¢†å–ã€‚</p><p>ç±»ä¼¼ä¸ŠèŠ‚è¯¾æåˆ°çš„å…¬å¸ä¿¡æ¯åŠŸèƒ½ã€é‚®ä»¶å‘é€åŠŸèƒ½ã€æ–‡ç« ç”ŸæˆåŠŸèƒ½ï¼Œåœ¨è¥é”€åœºæ™¯ä¸‹åœºæ™¯çš„åŠŸèƒ½æœ‰å‡ åä¸ªï¼Œæˆ‘ä»¬å°†åŸæœ‰åŠŸèƒ½å…¨éƒ¨è½¬æ¢ä¸ºäº†å†…éƒ¨Agentæ’ä»¶ã€‚</p><h3>é»„ç„–é¸¡ç‚¹é¤å¤§å¸ˆ</h3><p>å…¶å®ï¼Œç‚¹é¤å¤§å¸ˆçš„åº”ç”¨é€»è¾‘å°±æ˜¯å·¥ä½œæµçš„ç¼–æ’é€»è¾‘ï¼Œåªä¸è¿‡åœ¨æˆ‘ä»¬çš„è¥é”€Agenté¡¹ç›®é‡Œï¼Œæ²¡æœ‰å®ç°æ‹–æ‹½å¼€å‘ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªç®€å•çš„yamlé…ç½®æ–‡ä»¶æ¥ç¼–æ’å·¥ä½œæµã€‚</p><p>å…ˆå›é¡¾ä¸Šä¸€èŠ‚è¯¾çš„å·¥ä½œæµç¼–æ’é€»è¾‘çš„ä¾‹å­ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/50/4b/50a6f2341a1a6af80b6871ec883e544b.png?wh=1920x354\" alt=\"å›¾ç‰‡\"></p><p>ä»¥é»„ç„–é¸¡é¤é¦†çš„èœå•æ¨èéœ€æ±‚ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¼€å‘ä¸€ä¸ªèœå•æ¨èå·¥ä½œæµï¼Œç”¨æ¥ç»™é—¨åº—ç‚¹é¤åŠ©ç†æ‰©å±•èƒ½åŠ›ã€‚ä½ åªéœ€è¦åœ¨yamlé…ç½®æ–‡ä»¶é‡Œå°†å·¥ä½œçš„å‰åå…³ç³»å’Œè¾“å…¥è¾“å‡ºé…ç½®å³å¯ï¼Œä¸‹é¢æ˜¯å¯¹åº”çš„ä¼ªä»£ç ã€‚</p><pre><code class=\"language-plain\">version: '1.0'\nname: 'èœå•æ¨èå·¥ä½œæµ'\ndescription: 'ä¸€ä¸ªåŸºäºç”¨æˆ·å–œå¥½ä½¿ç”¨AIçŸ¥è¯†åº“å’Œè‡ªå®šä¹‰é€»è¾‘æ¨èèœå“çš„å·¥ä½œæµã€‚'\nsteps:\n  - id: 'input_step'\n    type: 'input'\n    description: 'è·å–ç”¨æˆ·å¯¹èœå“çš„å–œå¥½'\n    input:\n      description: 'ç”¨æˆ·è¾“å…¥çš„èœå“å–œå¥½'\n      example: 'æˆ‘å–œæ¬¢åƒè¾£ï¼Œæœ‰ä»€ä¹ˆèœå“æ¨è'\n    output:\n      name: 'user_preference'\n      type: 'str'\n\n\n  - id: 'query_knowledge_base'\n    type: 'plugin'\n    plugin: 'plugin_ai_knowledge_base_query'\n    description: 'æ ¹æ®ç”¨æˆ·å–œå¥½æŸ¥è¯¢AIçŸ¥è¯†åº“ä¸­çš„èœå“æ¨è'\n    inputs:\n      query: '{user_preference}'\n      knowledge_base_name: 'huangmenji_menu'\n      # åœ¨è¿™é‡Œå…·ä½“åŒ–å­—æ®µçš„é€‰æ‹©\n      field: 'embedding'  # ä½¿ç”¨å‘é‡æ•°æ®åº“çš„åµŒå…¥å‘é‡å­—æ®µè¿›è¡ŒæŸ¥è¯¢\n    outputs:\n      name: 'dish_recommendations'\n      type: 'str'\n\n\n  - id: 'custom_logic_filter_spicy'\n    type: 'custom'\n    function: 'filter_spicy_dishes'\n    description: 'è¿‡æ»¤æ¨èçš„èœå“ï¼Œä»…ä¿ç•™è¾£å‘³èœå“'\n    inputs:\n      recommendations: '{dish_recommendations}'\n    outputs:\n      name: 'spicy_dish_recommendations'\n      type: 'list'\n\n\n  - id: 'output_step'\n    type: 'output'\n    description: 'å‘ç”¨æˆ·æä¾›æœ€ç»ˆçš„è¾£å‘³èœå“æ¨èåˆ—è¡¨'\n    inputs:\n      spicy_dishes: '{spicy_dish_recommendations}'\n    output:\n      description: 'èœå“æ¨èåˆ—è¡¨'\n      example: ['éº»å©†è±†è…', 'è¾£å­é¸¡', 'å››å·ç«é”…']\n</code></pre><p>åœ¨è¿™ä¸ªå·¥ä½œæµé…ç½®ä¸­ï¼Œ<code>query_knowledge_base</code> æ˜¯åˆšæ‰è¯´çš„æ’ä»¶èƒ½åŠ›ï¼Œåœ¨ç”¨æˆ·ä¸Šä¼ è‡ªå·±çš„èœå•ä¹‹åå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œ<code>filter_spicy_dishes</code> åˆ™æ˜¯æˆ‘ä»¬å†…éƒ¨é’ˆå¯¹èœå•è¿™ä¸ªè¡Œä¸šåœºæ™¯å¼€å‘çš„èœå“æ¨èé€»è¾‘ï¼Œå®ƒå¯ä»¥æ˜¯åŸºäºLLMå¼€å‘çš„ã€‚</p><p>çœ‹åˆ°è¿™ä¸ªç¼–æ’å·¥ä½œæµçš„yamlé…ç½®ï¼Œä½ å¯èƒ½æ„è¯†åˆ°å®ƒæ²¡åŠæ³•å’Œæˆ‘ä»¬çš„Agentåº•å±‚Demoç›´æ¥å¯¹æ¥åˆ°ä¸€èµ·ã€‚å®é™…ä¸Šæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„ã€åŸºäºyamlé…ç½®è°ƒåº¦å…·ä½“å·¥ä½œæµé€»è¾‘çš„æ¡†æ¶ã€‚ä½ ä¹Ÿå¯ä»¥è‡ªå·±æƒ³ä¸€æƒ³è¿™éƒ¨åˆ†çš„é€»è¾‘ã€‚å¦‚æœç†è§£äº†Agentåº•å±‚çš„é€»è¾‘ï¼Œè¿™éƒ¨åˆ†ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œå…·ä½“ä»£ç å¯ä»¥åœ¨è¯¾åäº¤æµç¾¤é¢†å–ã€‚</p><p>è¿™é‡Œåªæ˜¯å€ŸåŠ©åº”ç”¨çš„é…ç½®æ›´å¥½åœ°è¯´æ˜Agentåº•å±‚æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p><p>å¥½ï¼Œæˆ‘å†æ¥è¯´ä¸€ä¸ªæ›´è¿›ä¸€æ­¥çš„é…ç½®ä¾‹å­ï¼Œé»„ç„–é¸¡è¥é”€å¤§å¸ˆåº”ç”¨ã€‚å®ƒèƒ½æ ¹æ®å®¢æˆ·è¾“å…¥çš„ç”¨æˆ·æ ‡ç­¾ï¼Œè‡ªåŠ¨ç­›é€‰å’Œå‘é€è¥é”€çŸ­ä¿¡ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªå·¥ä½œæµçš„å¼€å‘æ›´åŠ ç®€å•ï¼Œåªéœ€è¦é€šè¿‡é…ç½®ç»„åˆç°æœ‰çš„æ’ä»¶èƒ½åŠ›å°±å¯ä»¥å®Œæˆï¼Œä¸éœ€è¦ç¼–å†™ä»£ç ã€‚å…¶é…ç½®æ–‡ä»¶çš„ä¼ªä»£ç å¦‚ä¸‹ã€‚</p><pre><code class=\"language-plain\">version: '1.0'\nname: 'å®¢æˆ·è¥é”€å·¥ä½œæµ'\ndescription: 'æ ¹æ®ç”¨æˆ·æ ‡ç­¾å’Œè¥é”€éœ€æ±‚è¿›è¡Œä¸ªæ€§åŒ–è¥é”€çš„å·¥ä½œæµã€‚'\nsteps:\n  - id: 'input_step'\n    type: 'input'\n    description: 'è·å–ç”¨æˆ·æ ‡ç­¾å’Œè¥é”€éœ€æ±‚'\n    input:\n      description: 'ç”¨æˆ·è¾“å…¥çš„æ ‡ç­¾å’Œè¥é”€éœ€æ±‚'\n      example: \n        tag: 'æ½œåœ¨å®¢æˆ·'\n        marketing_need: 'æ¨å¹¿æ–°äº§å“'\n    output:\n      name: 'user_tag'\n      type: 'str'\n      name: 'marketing_need'\n      type: 'str'\n\n\n  - id: 'get_user_info'\n    type: 'plugin'\n    plugin: 'plugin_user_info_by_tag_get'\n    description: 'æ ¹æ®ç”¨æˆ·æ ‡ç­¾è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯'\n    inputs:\n      tag: '{user_tag}'\n    outputs:\n      name: 'user_info'\n      type: 'dict'\n\n\n  - id: 'generate_marketing_article'\n    type: 'plugin'\n    plugin: 'plugin_marketing_article_generate'\n    description: 'ç”Ÿæˆé€‚åˆç›®æ ‡ç”¨æˆ·çš„è¥é”€æ–‡ç« '\n    inputs:\n      topic: '{marketing_need}'\n      audience: '{user_info[preferences]}'\n    outputs:\n      name: 'marketing_article'\n      type: 'str'\n\n\n  - id: 'send_sms'\n    type: 'plugin'\n    plugin: 'plugin_sms_send'\n    description: 'å‘é€è¥é”€çŸ­ä¿¡ç»™ç”¨æˆ·'\n    inputs:\n      mobile: '{user_info[mobile]}'\n      subject: 'æœ€æ–°äº§å“æ¨è'\n      body: '{marketing_article}'\n    outputs:\n      name: 'sms_status'\n      type: 'bool'\n\n\n  - id: 'output_step'\n    type: 'output'\n    description: 'è¾“å‡ºçŸ­ä¿¡å‘é€çŠ¶æ€'\n    inputs:\n      sms_status: '{sms_status}'\n    output:\n      description: 'çŸ­ä¿¡å‘é€æ˜¯å¦æˆåŠŸ'\n      example: true\n</code></pre><p>éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œçš„ <code>plugin_sms_send</code> ä¹Ÿæ˜¯åŸè¥é”€å¹³å°çš„çŸ­ä¿¡åŠŸèƒ½ç›´æ¥ç§»æ¤çš„ã€‚æ’ä»¶èƒ½åŠ›è¶³å¤Ÿå¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¼€å‘å·¥ä½œæµçš„æ•ˆç‡ä¼šå¾ˆé«˜ã€‚</p><h2>å°ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬åˆ†æäº†Agentå¹³å°çš„æ“ä½œé€»è¾‘ï¼Œè®¾è®¡å¹¶å®ç°äº†ä¸€å¥—è‡ªæœ‰çš„Agentä»£ç†å±‚æ ¸å¿ƒã€‚åŸºäºè¿™å¥—æ ¸å¿ƒï¼Œæˆ‘ä»¬æŠŠåŸæœ‰è¥é”€å¹³å°çš„åŠŸèƒ½å…¨éƒ¨è½¬åŒ–å¼€å‘äº†Agentå¹³å°çš„æ’ä»¶èƒ½åŠ›ã€‚</p><p>å®ç°è¥é”€Agentå¹³å°çš„æ ¸å¿ƒæ˜¯å®ç°Agentä»£ç†å±‚çš„é€»è¾‘ï¼Œè€ŒAgentä»£ç†å±‚çš„æ ¸å¿ƒæœ‰ä¸¤ç‚¹ï¼Œä¸€æ˜¯åŸºäºä¸Šä¸‹æ–‡çš„ç”¨æˆ·æ„å›¾è¯†åˆ«ï¼ŒäºŒæ˜¯è°ƒç”¨è‡ªå®šä¹‰çš„å·¥ä½œæµå®Œæˆä¸šåŠ¡é€»è¾‘ã€‚è€Œæœ€å¥½çš„ä¸Šä¸‹æ–‡æ„å›¾è¯†åˆ«çš„æ–¹æ¡ˆå°±æ˜¯å¤§æ¨¡å‹ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å¦‚ä½•é€šè¿‡å¤§æ¨¡å‹å¾®è°ƒè®©å¤§æ¨¡å‹è¯†åˆ«åˆ°æ’ä»¶èƒ½åŠ›ï¼Ÿç›¸æ¯”äºæç¤ºè¯çš„æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ¡ˆæœ‰ä»€ä¹ˆä¼˜åŠ¿å’ŒåŠ£åŠ¿ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµã€‚å¦‚æœè§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿå¯ä»¥æŠŠè¯¾ç¨‹åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·å­¦ä¹ ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼</p><p><a href=\"https://jsj.top/f/hm26hN\">&gt;&gt;æˆ³æ­¤åŠ å…¥è¯¾ç¨‹äº¤æµç¾¤</a></p>","comments":[{"had_liked":false,"id":394714,"user_name":"è¿ç‘é¾™","can_delete":false,"product_type":"c1","uid":1898112,"ip_address":"æ²³åŒ—","ucode":"E0D3C3D4FCB7C9","user_header":"https://static001.geekbang.org/account/avatar/00/1c/f6/80/85ec2c2a.jpg","comment_is_top":false,"comment_ctime":1727852142,"is_pvip":false,"replies":[{"id":143425,"content":"ğŸ‘ğŸ‘ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1763517,"ctime":1729077086,"ip_address":"åŒ—äº¬","comment_id":394714,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100786301,"comment_content":"Agent ä»£ç†å±‚çš„æ ¸å¿ƒæœ‰ä¸¤ç‚¹ï¼Œä¸€æ˜¯åŸºäºä¸Šä¸‹æ–‡çš„ç”¨æˆ·æ„å›¾è¯†åˆ«ï¼ŒäºŒæ˜¯è°ƒç”¨è‡ªå®šä¹‰çš„å·¥ä½œæµå®Œæˆä¸šåŠ¡é€»è¾‘ã€‚è€Œæœ€å¥½çš„ä¸Šä¸‹æ–‡æ„å›¾è¯†åˆ«çš„æ–¹æ¡ˆå°±æ˜¯å¤§æ¨¡å‹ã€‚","like_count":1,"discussions":[{"author":{"id":1763517,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e8/bd/62169942.jpg","nickname":"é‡‘ä¼Ÿ","note":"","ucode":"C0393789836F21","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652504,"discussion_content":"ğŸ‘ğŸ‘ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1729077086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394071,"user_name":"ç ”å‘è´¦å·","can_delete":false,"product_type":"c1","uid":3933917,"ip_address":"æµ™æ±Ÿ","ucode":"A18FD0975E3E0C","user_header":"","comment_is_top":false,"comment_ctime":1725709555,"is_pvip":false,"replies":[{"id":143432,"content":"cozeå¥½ä¸€äº›","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1763517,"ctime":1729077277,"ip_address":"åŒ—äº¬","comment_id":394071,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100786301,"comment_content":"è€å¸ˆï¼Œè·ŸCozeé›·åŒçš„fastgptï¼Œç†Ÿæ‚‰å—ï¼Œå“ªä¸ªæ›´å¥½ç”¨","like_count":1,"discussions":[{"author":{"id":1763517,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e8/bd/62169942.jpg","nickname":"é‡‘ä¼Ÿ","note":"","ucode":"C0393789836F21","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652511,"discussion_content":"cozeå¥½ä¸€äº›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1729077277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004480,"avatar":"","nickname":"Jason Zhang","note":"","ucode":"81DA53D1F0CE5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":650907,"discussion_content":"Cozeæ›´ç®€å•ï¼Œæ’ä»¶æ›´ä¸°å¯Œï¼Œfastgptå¯ä»¥ç§æœ‰åŒ–éƒ¨ç½²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1725859186,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ±Ÿè‹","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394293,"user_name":"æ¢å°‘æ°","can_delete":false,"product_type":"c1","uid":1384542,"ip_address":"ä¸Šæµ·","ucode":"458D88E3720419","user_header":"https://static001.geekbang.org/account/avatar/00/15/20/5e/c9981e3b.jpg","comment_is_top":false,"comment_ctime":1726371531,"is_pvip":false,"replies":[{"id":143438,"content":"æˆ‘ç»™ä½ æ‰¾ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1763517,"ctime":1729077627,"ip_address":"åŒ—äº¬","comment_id":394293,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100786301,"comment_content":"é»„ç„–é¸¡ç‚¹é¤å¤§å¸ˆ  è¿™éƒ¨åˆ†çš„ä»£ç ï¼Œåœ¨èµ„æ–™ä¸­æ²¡æœ‰æ‰¾åˆ°","like_count":0,"discussions":[{"author":{"id":1763517,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/e8/bd/62169942.jpg","nickname":"é‡‘ä¼Ÿ","note":"","ucode":"C0393789836F21","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":652517,"discussion_content":"æˆ‘ç»™ä½ æ‰¾ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1729077627,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2,\"source\":0}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":394472,"user_name":"çŸ³äº‘å‡","can_delete":false,"product_type":"c1","uid":1024195,"ip_address":"å¹¿ä¸œ","ucode":"78F1DD33EFD000","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/c3/c5db35df.jpg","comment_is_top":false,"comment_ctime":1726901099,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":1,"score":2,"product_id":100786301,"comment_content":"å¾®è°ƒçš„ä¼˜åŠ¿:\n\næ›´å¥½çš„æ•´åˆæ€§: å¾®è°ƒåçš„æ¨¡å‹å¯ä»¥æ›´è‡ªç„¶åœ°å°†æ’ä»¶èƒ½åŠ›èå…¥åˆ°è‡ªèº«çš„çŸ¥è¯†å’Œæ¨ç†è¿‡ç¨‹ä¸­,è€Œä¸æ˜¯å•çº¯ä¾èµ–æç¤ºè¯è§¦å‘ã€‚\næ€§èƒ½æå‡: ç»è¿‡å¾®è°ƒ,æ¨¡å‹å¯ä»¥æ›´å‡†ç¡®åœ°åˆ¤æ–­ä½•æ—¶ä½¿ç”¨æ’ä»¶,å‡å°‘ä¸å¿…è¦çš„è°ƒç”¨,æé«˜æ•ˆç‡ã€‚\nä¸Šä¸‹æ–‡ç†è§£: å¾®è°ƒæ¨¡å‹å¯ä»¥åŸºäºæ›´å¹¿æ³›çš„ä¸Šä¸‹æ–‡æ¥å†³å®šæ˜¯å¦ä½¿ç”¨æ’ä»¶,è€Œä¸ä»…ä»…ä¾èµ–ç‰¹å®šçš„è§¦å‘è¯ã€‚\nçµæ´»æ€§: å¯ä»¥æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯å®šåˆ¶æ¨¡å‹çš„æ’ä»¶ä½¿ç”¨è¡Œä¸ºã€‚\n\nå¾®è°ƒçš„åŠ£åŠ¿:\n\næˆæœ¬é«˜: å¾®è°ƒè¿‡ç¨‹éœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºå’Œæ—¶é—´,ç›¸æ¯”ç®€å•çš„æç¤ºè¯æ–¹æ¡ˆæˆæœ¬æ›´é«˜ã€‚\nå¤æ‚æ€§: éœ€è¦è®¾è®¡åˆé€‚çš„å¾®è°ƒæ•°æ®é›†å’Œè®­ç»ƒç­–ç•¥,è¿™ä¸ªè¿‡ç¨‹æ¯”ç¼–å†™æç¤ºè¯æ›´ä¸ºå¤æ‚ã€‚\nå¯èƒ½çš„è¿‡æ‹Ÿåˆ: å¦‚æœå¾®è°ƒä¸å½“,æ¨¡å‹å¯èƒ½è¿‡åº¦ä¾èµ–ç‰¹å®šæ’ä»¶æˆ–åœ¨ä¸æ°å½“çš„åœºæ™¯ä½¿ç”¨æ’ä»¶ã€‚\næ›´æ–°å›°éš¾: å½“éœ€è¦æ·»åŠ æˆ–ä¿®æ”¹æ’ä»¶æ—¶,å¯èƒ½éœ€è¦é‡æ–°è¿›è¡Œå¾®è°ƒ,è€Œæç¤ºè¯æ–¹æ¡ˆåˆ™æ›´å®¹æ˜“æ›´æ–°ã€‚\n\nç›¸æ¯”ä¹‹ä¸‹,æç¤ºè¯æ–¹æ¡ˆçš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå®æ–½ç®€å•ã€æˆæœ¬ä½ã€æ˜“äºæ›´æ–°ã€‚ä½†å®ƒå¯èƒ½ç¼ºä¹çµæ´»æ€§,ä¸”åœ¨å¤æ‚åœºæ™¯ä¸‹çš„è¡¨ç°å¯èƒ½ä¸å¦‚ç»è¿‡å¾®è°ƒçš„æ¨¡å‹ã€‚","like_count":3}]}