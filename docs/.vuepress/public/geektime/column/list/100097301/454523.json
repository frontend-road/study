{"id":454523,"title":"06 | switchè¡¨è¾¾å¼ï¼šæ€ä¹ˆç®€åŒ–å¤šæƒ…æ™¯æ“ä½œï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èŒƒå­¦é›·ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬èŠä¸€èŠSwitchè¡¨è¾¾å¼ã€‚</p><p>switchè¡¨è¾¾å¼è¿™ä¸ªç‰¹æ€§ï¼Œé¦–å…ˆåœ¨JDK 12ä¸­ä»¥é¢„è§ˆç‰ˆçš„å½¢å¼å‘å¸ƒã€‚åœ¨JDK 13ä¸­ï¼Œæ”¹è¿›çš„switchè¡¨è¾¾å¼å†æ¬¡ä»¥é¢„è§ˆç‰ˆçš„å½¢å¼å‘å¸ƒã€‚æœ€åï¼Œswitchè¡¨è¾¾å¼åœ¨JDK 14æ­£å¼å‘å¸ƒã€‚</p><p>ä¸è®ºä½ å­¦ä¹ ä»€ä¹ˆæ ·çš„ç¼–ç¨‹è¯­è¨€ï¼Œåˆç†åœ°åˆ†æã€åˆ¤æ–­ã€å¤„ç†ä¸åŒçš„æƒ…å†µéƒ½æ˜¯å¿…å¤‡çš„åŸºæœ¬åŠŸã€‚æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨çš„if-elseè¯­å¥ï¼Œè¿˜æœ‰switchè¯­å¥ï¼Œéƒ½æ˜¯ç”¨æ¥å¤„ç†ç§ç§ä¸åŒçš„æƒ…å†µçš„ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“switchè¯­å¥ï¼Œé‚£ä¹ˆswitchè¡¨è¾¾å¼åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿswitchè¯­å¥å’Œswitchè¡¨è¾¾å¼åˆæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p><p>å¦‚æœä½ äº†è§£äº†Javaçš„è¯­å¥å’Œè¡¨è¾¾å¼è¿™ä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œä½ çš„å›°æ‰°ä¹Ÿè®¸ä¼šå°‘ä¸€ç‚¹ã€‚Javaè§„èŒƒé‡Œï¼Œè¡¨è¾¾å¼å®Œæˆå¯¹æ•°æ®çš„æ“ä½œã€‚ä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å€¼ï¼ˆi * 4ï¼‰ï¼›æˆ–è€…æ˜¯ä¸€ä¸ªå˜é‡ï¼ˆi = 4ï¼‰ï¼›æˆ–è€…ä»€ä¹ˆéƒ½ä¸æ˜¯ï¼ˆvoidç±»å‹ï¼‰ã€‚</p><p>Javaè¯­å¥æ˜¯Javaæœ€åŸºæœ¬çš„å¯æ‰§è¡Œå•ä½ï¼Œå®ƒæœ¬èº«ä¸æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªå˜é‡ã€‚Javaè¯­å¥çš„æ ‡å¿—æ€§ç¬¦å·æ˜¯åˆ†å·ï¼ˆä»£ç ï¼‰å’ŒåŒå¼•å·ï¼ˆä»£ç å—ï¼‰ï¼Œæ¯”å¦‚if-elseè¯­å¥ï¼Œèµ‹å€¼è¯­å¥ç­‰ã€‚è¿™æ ·å†æ¥çœ‹ï¼Œå°±å¾ˆç®€å•äº†ï¼šswitchè¡¨è¾¾å¼å°±æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè€Œswitchè¯­å¥å°±æ˜¯ä¸€ä¸ªè¯­å¥ã€‚</p><p>switchè¡¨è¾¾å¼æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦switchè¡¨è¾¾å¼ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡æ¡ˆä¾‹å’Œä»£ç ï¼Œä¸€ç‚¹ä¸€ç‚¹åœ°æ¥å­¦ä¹ switchè¡¨è¾¾å¼å§ã€‚</p><!-- [[[read_end]]] --><h2>é˜…è¯»æ¡ˆä¾‹</h2><p>åœ¨è®²è§£æˆ–è€…å­¦ä¹ switchè¯­å¥æ—¶ï¼Œæ¯å¹´çš„åäºŒä¸ªæœˆæˆ–è€…æ¯å‘¨çš„ä¸ƒå¤©ï¼Œæ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„æ¼”ç¤ºæ•°æ®ã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹é‡Œï¼Œæˆ‘ä»¬ä¹Ÿä½¿ç”¨è¿™æ ·çš„æ•°æ®ï¼Œæ¥çœ‹çœ‹ä¼ ç»Ÿçš„switchè¯­å¥æœ‰å“ªäº›éœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬è¦è®¨è®ºçš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„é—®é¢˜:  è¯¥æ€ä¹ˆç”¨ä»£ç è®¡ç®—ä¸€ä¸ªæœˆæœ‰å¤šå°‘å¤©ï¼Ÿç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰è¿™æ ·çš„é¡ºå£æºœï¼Œâ€œä¸€ä¸‰äº”ä¸ƒå…«åè…Šï¼Œä¸‰åä¸€å¤©æ°¸ä¸å·®ï¼Œå››å…­ä¹å†¬ä¸‰åæ•´ï¼Œå¹³å¹´äºŒæœˆäºŒåå…«ï¼Œé—°å¹´äºŒæœˆæŠŠä¸€åŠ â€ã€‚</p><p>ä¸‹é¢çš„è¿™æ®µä»£ç ï¼Œå°±æ˜¯æŒ‰ç…§è¿™ä¸ªé¡ºå£æºœçš„é€»è¾‘æ¥è®¡ç®—äº†ä¸€ä¸‹ï¼Œä»Šå¤©æ‰€åœ¨çš„è¿™ä¸ªæœˆï¼Œä¸€å…±æœ‰å¤šå°‘å¤©ã€‚</p><pre><code class=\"language-java\">package co.ivi.jus.swexpr.former;\n\nimport java.util.Calendar;\n\nclass DaysInMonth {\n    public static void main(String[] args) {\n        Calendar today = Calendar.getInstance();\n        int month = today.get(Calendar.MONTH);\n        int year = today.get(Calendar.YEAR);\n\n        int daysInMonth;\n        switch (month) {\n            case Calendar.JANUARY:\n            case Calendar.MARCH:\n            case Calendar.MAY:\n            case Calendar.JULY:\n            case Calendar.AUGUST:\n            case Calendar.OCTOBER:\n            case Calendar.DECEMBER:\n                daysInMonth = 31;\n                break;\n            case Calendar.APRIL:\n            case Calendar.JUNE:\n            case Calendar.SEPTEMBER:\n            case Calendar.NOVEMBER:\n                daysInMonth = 30;\n                break;\n            case Calendar.FEBRUARY:\n                if (((year % 4 == 0) &amp;&amp; !(year % 100 == 0))\n                        || (year % 400 == 0)) {\n                    daysInMonth = 29;\n                } else {\n                    daysInMonth = 28;\n                }\n                break;\n            default:\n                throw new RuntimeException(\n                    \"Calendar in JDK does not work\");\n        }\n\n        System.out.println(\n            \"There are \" + daysInMonth + \" days in this month.\");\n    }\n}\n</code></pre><p>è¿™æ®µä»£ç é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†switchè¯­å¥ã€‚ä»£ç æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆé”™è¯¯ï¼Œä½†æ˜¯ï¼Œè‡³å°‘æœ‰ä¸¤ä¸ªå®¹æ˜“çŠ¯é”™è¯¯çš„åœ°æ–¹ã€‚</p><p>ç¬¬ä¸€ä¸ªå®¹æ˜“çŠ¯é”™çš„åœ°æ–¹ï¼Œå°±æ˜¯åœ¨breakå…³é”®å­—çš„ä½¿ç”¨ä¸Šã€‚ä¸Šé¢çš„ä»£ç é‡Œï¼Œå¦‚æœå¤šä½¿ç”¨ä¸€ä¸ªbreakå…³é”®å­—ï¼Œä»£ç çš„é€»è¾‘å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼›åŒæ ·çš„ï¼Œå°‘ä½¿ç”¨ä¸€ä¸ªbreakå…³é”®å­—ä¹Ÿä¼šå‡ºç°é—®é¢˜ã€‚</p><pre><code class=\"language-java\">int daysInMonth;\nswitch (month) {\n    case Calendar.JANUARY:\n    case Calendar.MARCH:\n    case Calendar.MAY:\n        break;    // WRONG BREAK!!!\n    case Calendar.JULY:\n    case Calendar.AUGUST:\n    case Calendar.OCTOBER:\n    case Calendar.DECEMBER:\n        daysInMonth = 31;\n        break;\n    // snipped\n}\n</code></pre><pre><code class=\"language-java\">int daysInMonth;\nswitch (month) {\n    // snipped\n    case Calendar.APRIL:\n    case Calendar.JUNE:\n    case Calendar.SEPTEMBER:\n    case Calendar.NOVEMBER:\n        daysInMonth = 30;\n                         // WRONG, NO BREAK!!!\n    case Calendar.FEBRUARY:\n        if (((year % 4 == 0) &amp;&amp; !(year % 100 == 0))\n                || (year % 400 == 0)) {\n            daysInMonth = 29;\n        } else {\n            daysInMonth = 28;\n        }\n        break;\n    // snipped\n}\n</code></pre><p>breakè¯­å¥çš„é—æ¼æˆ–è€…å†—ä½™ï¼Œè¿™æ ·çš„é”™è¯¯å¦‚æ­¤å¾—å¸¸è§ï¼Œç”šè‡³äºè¢«å•åˆ—æˆäº†ä¸€ä¸ª<a href=\"https://cwe.mitre.org/data/definitions/484.html\">å¸¸è§è½¯ä»¶å®‰å…¨æ¼æ´</a>ã€‚å‡¡æ˜¯ä½¿ç”¨switchè¯­å¥çš„ä»£ç ï¼Œéƒ½æœ‰å¯èƒ½æˆä¸ºé»‘å®¢ä»¬é‡ç‚¹å…³æ³¨çš„å¯¹è±¡ã€‚ç”±äºé€»è¾‘çš„é”™è¯¯å’Œé»‘å®¢çš„ç‰¹æ®Šå…³ç…§ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦åäºŒåˆ†çš„å°å¿ƒï¼›é˜…è¯»ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦åå¤åœ°æŸ¥éªŒbreakè¯­å¥çš„å‰åè¯­å¢ƒã€‚æ¯«æ— ç–‘é—®ï¼Œè¿™å¢åŠ äº†ä»£ç ç»´æŠ¤çš„æˆæœ¬ï¼Œé™ä½äº†ç”Ÿäº§æ•ˆç‡ã€‚</p><p>ä¸ºä»€ä¹ˆswitchè¯­å¥é‡Œéœ€è¦ä½¿ç”¨breakå‘¢ï¼Ÿæœ€ä¸»è¦çš„åŸå› ï¼Œå°±æ˜¯å¸Œæœ›èƒ½å¤Ÿåœ¨ä¸åŒçš„æƒ…å†µä¸‹ï¼Œå…±äº«éƒ¨åˆ†æˆ–è€…å…¨éƒ¨çš„ä»£ç ç‰‡æ®µã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå››æœˆã€å…­æœˆã€ä¹æœˆã€åä¸€æœˆè¿™å››ç§æƒ…æ™¯ï¼Œå¯ä»¥å…±äº«æ¯ä¸ªæœˆéƒ½æ˜¯30å¤©è¿™æ ·çš„ä»£ç ç‰‡æ®µã€‚è¿™ä¸ªä»£ç ç‰‡æ®µåªéœ€è¦å†™åœ¨åä¸€æœˆæƒ…æ™¯çš„åé¢ï¼Œå‰é¢çš„å››æœˆã€å…­æœˆå’Œä¹æœˆè¿™ä¸‰ä¸ªæƒ…æ™¯éƒ½ä¼šé¡ºæ¬¡æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼ˆfall-throughï¼‰ï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªbreakè¯­å¥æˆ–è€…switchè¯­å¥ç»ˆç»“ã€‚</p><p>ç°åœ¨æˆ‘ä»¬éƒ½çŸ¥é“äº†ï¼Œè¿™æ ·æ˜¯ä¸€ä¸ªå¼Šå¤§äºåˆ©çš„è®¾è®¡ã€‚ä½†å¾ˆé—æ†¾ï¼ŒJavaåˆå§‹çš„è®¾è®¡å°±æ˜¯é‡‡ç”¨äº†è¿™æ ·çš„è®¾è®¡æ€æƒ³ã€‚å¦‚æœè¦æ–°è®¾è®¡ä¸€é—¨ç°ä»£çš„è¯­è¨€ï¼Œæˆ‘ä»¬éœ€è¦æ›´å¤šåœ°ä½¿ç”¨switchè¯­å¥ï¼Œä½†æ˜¯å°±ä¸è¦å†ä½¿ç”¨breakè¯­å¥äº†ã€‚ä¸è¿‡ï¼Œä¸åŒçš„æƒ…æ™¯å…±äº«ä»£ç ç‰‡æ®µï¼Œä»ç„¶æ˜¯ä¸€ä¸ªçœŸå®çš„éœ€æ±‚ã€‚åœ¨åºŸå¼ƒæ‰breakè¯­å¥ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°åœ¨ä¸åŒçš„æƒ…æ™¯é—´å…±äº«ä»£ç ç‰‡æ®µçš„æ–°è§„åˆ™ã€‚</p><p>ç¬¬äºŒä¸ªå®¹æ˜“çŠ¯é”™çš„åœ°æ–¹ï¼Œæ˜¯åå¤å‡ºç°çš„èµ‹å€¼è¯­å¥ã€‚ åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<strong>daysInMonth</strong>è¿™ä¸ªæœ¬åœ°å˜é‡çš„å˜é‡å£°æ˜å’Œå®é™…èµ‹å€¼æ˜¯åˆ†å¼€çš„ã€‚èµ‹å€¼è¯­å¥éœ€è¦åå¤å‡ºç°ï¼Œä»¥é€‚åº”ä¸åŒçš„æƒ…æ™¯ã€‚å¦‚æœåœ¨switchè¯­å¥é‡Œï¼Œ<strong>daysInMonth</strong>å˜é‡æ²¡æœ‰è¢«èµ‹å€¼ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œç¼ºçœçš„æˆ–è€…åˆå§‹çš„å˜é‡å€¼å°±ä¼šè¢«ä½¿ç”¨ã€‚</p><pre><code class=\"language-java\">int daysInMonth = 0;\nswitch (month) {\n    // snipped\n    case Calendar.APRIL:\n    case Calendar.JUNE:\n    case Calendar.SEPTEMBER:\n    case Calendar.NOVEMBER:\n        break;   // WRONG, INITIAL daysInMonth value IS USED!!!\n    case Calendar.FEBRUARY:\n    // snipped\n}\n</code></pre><p>åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œåˆå§‹çš„å˜é‡å€¼ä¸æ˜¯ä¸€ä¸ªåˆé€‚çš„æ•°æ®ï¼›å½“ç„¶ï¼Œåœ¨å¦å¤–ä¸€ä¸ªä¾‹å­é‡Œï¼Œç¼ºçœçš„æˆ–è€…åˆå§‹çš„å˜é‡å€¼ä¹Ÿå¯èƒ½å°±æ˜¯ä¸€ä¸ªåˆé€‚çš„æ•°æ®äº†ã€‚ä¸ºäº†åˆ¤æ–­è¿™ä¸ªæœ¬åœ°å˜é‡æœ‰æ²¡æœ‰åˆé€‚çš„å€¼ï¼Œæˆ‘ä»¬éœ€è¦é€šè§ˆæ•´ä¸ªswitchè¯­å¥å—ï¼Œç¡®ä¿èµ‹å€¼æ²¡æœ‰é—æ¼ï¼Œä¹Ÿæ²¡æœ‰å¤šä½™ã€‚è¿™å¢åŠ äº†ç¼–ç å‡ºé”™çš„å‡ ç‡ï¼Œä¹Ÿå¢åŠ äº†é˜…è¯»ä»£ç çš„æˆæœ¬ã€‚</p><p>é‚£ä¹ˆï¼Œèƒ½ä¸èƒ½è®©å¤šæƒ…æ™¯å¤„ç†çš„ä»£ç å—æ‹¥æœ‰ä¸€ä¸ªæ•°å€¼å‘¢ï¼Ÿ æˆ–è€…æ¢ä¸ªè¯´æ³•ï¼Œå¤šæƒ…æ™¯å¤„ç†çš„ä»£ç å—èƒ½ä¸èƒ½å˜æˆä¸€ä¸ªè¡¨è¾¾å¼ï¼Ÿè¿™ä¸ªæƒ³æ³•ï¼Œå°±å‚¬ç”Ÿäº†Javaè¯­è¨€çš„æ–°ç‰¹æ€§ï¼šâ€œswitchè¡¨è¾¾å¼â€ã€‚</p><h2>switchè¡¨è¾¾å¼</h2><p>switchè¡¨è¾¾å¼æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿä¸‹é¢çš„è¿™æ®µä»£ç ï¼Œä½¿ç”¨çš„å°±æ˜¯switchè¡¨è¾¾å¼ï¼Œå®ƒæ”¹è¿›äº†ä¸Šé¢é˜…è¯»æ¡ˆä¾‹é‡Œçš„ä»£ç ã€‚ä½ å¯ä»¥å¸¦ç€ä¸Šé¢é‡åˆ°çš„é—®é¢˜ï¼Œæ¥é˜…è¯»è¿™æ®µä»£ç ã€‚è¿™äº›é—®é¢˜åŒ…æ‹¬ï¼š</p><ul>\n<li>switchè¡¨è¾¾å¼æ˜¯æ€ä¹ˆè¡¨ç¤ºä¸€ä¸ªæ•°å€¼ï¼Œä»è€Œå¯ä»¥ç»™å˜é‡èµ‹å€¼çš„ï¼Ÿ</li>\n<li>åœ¨ä¸åŒçš„æƒ…æ™¯é—´ï¼Œswitchè¡¨è¾¾å¼æ˜¯æ€ä¹ˆå…±äº«ä»£ç ç‰‡æ®µçš„ï¼Ÿ</li>\n<li>ä½¿ç”¨switchè¡¨è¾¾å¼çš„ä»£ç ï¼Œæœ‰æ²¡æœ‰å˜å¾—æ›´ç®€å•ã€æ›´çš®å®ã€æ›´å®¹æ˜“ç†è§£ï¼Ÿ</li>\n</ul><pre><code class=\"language-java\">package co.ivi.jus.swexpr.modern;\n\nimport java.util.Calendar;\n\nclass DaysInMonth {\n    public static void main(String[] args) {\n        Calendar today = Calendar.getInstance();\n        int month = today.get(Calendar.MONTH);\n        int year = today.get(Calendar.YEAR);\n\n        int daysInMonth = switch (month) {\n            case Calendar.JANUARY,\n                 Calendar.MARCH,\n                 Calendar.MAY,\n                 Calendar.JULY,\n                 Calendar.AUGUST,\n                 Calendar.OCTOBER,\n                 Calendar.DECEMBER -&gt; 31;\n            case Calendar.APRIL,\n                 Calendar.JUNE,\n                 Calendar.SEPTEMBER,\n                 Calendar.NOVEMBER -&gt; 30;\n            case Calendar.FEBRUARY -&gt; {\n                if (((year % 4 == 0) &amp;&amp; !(year % 100 == 0))\n                        || (year % 400 == 0)) {\n                    yield 29;\n                } else {\n                    yield 28;\n                }\n            }\n            default -&gt; throw new RuntimeException(\n                    \"Calendar in JDK does not work\");\n        };\n\n        System.out.println(\n                \"There are \" + daysInMonth + \" days in this month.\");\n    }\n}\n</code></pre><p><strong>æˆ‘ä»¬æœ€å…ˆçœ‹åˆ°çš„å˜åŒ–ï¼Œå°±æ˜¯switchä»£ç å—å‡ºç°åœ¨äº†èµ‹å€¼è¿ç®—ç¬¦çš„å³ä¾§ã€‚</strong>è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œè¿™ä¸ªswitchä»£ç å—è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå˜é‡ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªswitchä»£ç å—æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚</p><pre><code class=\"language-java\">int daysInMonth = switch (month) {\n    // snipped\n}\n</code></pre><p><strong>æˆ‘ä»¬çœ‹åˆ°çš„ç¬¬äºŒä¸ªå˜åŒ–ï¼Œæ˜¯å¤šæƒ…æ™¯çš„åˆå¹¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªcaseè¯­å¥ï¼Œå¯ä»¥å¤„ç†å¤šä¸ªæƒ…æ™¯ã€‚</strong>è¿™äº›æƒ…æ™¯ï¼Œä½¿ç”¨é€—å·åˆ†éš”å¼€æ¥ï¼Œå…±äº«ä¸€ä¸ªä»£ç å—ã€‚è€Œä¼ ç»Ÿçš„switchä»£ç ï¼Œä¸€ä¸ªcaseè¯­å¥åªèƒ½å¤„ç†ä¸€ç§æƒ…æ™¯ã€‚</p><pre><code class=\"language-java\">case Calendar.JANUARY,\n     Calendar.MARCH,\n     // snipped\n</code></pre><p>å¤šæƒ…æ™¯çš„åˆå¹¶çš„è®¾è®¡ï¼Œæ»¡è¶³äº†å…±äº«ä»£ç ç‰‡æ®µçš„éœ€æ±‚ã€‚è€Œä¸”ï¼Œç”±äºåªä½¿ç”¨ä¸€ä¸ªcaseè¯­å¥ï¼Œä¹Ÿå°±ä¸å†éœ€è¦ä½¿ç”¨breakè¯­å¥æ¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚äº†ã€‚æ‰€ä»¥ï¼Œbreakè¯­å¥ä»switchè¡¨è¾¾å¼é‡Œæ¶ˆå¤±äº†ã€‚</p><p>ä¸åŒä¹‹å¤„åœ¨äºï¼Œä¼ ç»Ÿçš„switchä»£ç ï¼Œä¸åŒçš„caseè¯­å¥ä¹‹é—´å¯ä»¥å…±äº«éƒ¨åˆ†çš„ä»£ç ç‰‡æ®µï¼›è€Œswitchè¡¨è¾¾å¼é‡Œï¼Œéœ€è¦å…±äº«å…¨éƒ¨çš„ä»£ç ç‰‡æ®µã€‚è¿™çœ‹ä¼¼æ˜¯ä¸€ä¸ªæŸå¤±ï¼Œä½†å…¶å®ï¼Œå…±äº«éƒ¨åˆ†ä»£ç ç‰‡æ®µçš„èƒ½åŠ›ç»™ä»£ç çš„ç¼–å†™è€…å¸¦æ¥çš„å›°æƒ‘è¿œè¿œå¤šäºå®ƒå¸¦æ¥çš„å¥½å¤„ã€‚å¦‚æœéœ€è¦å…±äº«éƒ¨åˆ†çš„ä»£ç ç‰‡æ®µï¼Œæˆ‘ä»¬æ€»æ˜¯å¯ä»¥æ‰¾åˆ°æ›¿æ¢çš„åŠæ³•ï¼Œæ¯”å¦‚æŠŠéœ€è¦å…±äº«çš„ä»£ç å°è£…æˆæ›´å°çš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦æ‹…å¿ƒswitchè¡¨è¾¾å¼ä¸æ”¯æŒå…±äº«éƒ¨åˆ†ä»£ç ç‰‡æ®µã€‚</p><p><strong>ä¸‹ä¸€ä¸ªå˜åŒ–ï¼Œæ˜¯ä¸€ä¸ªæ–°çš„æƒ…æ™¯æ“ä½œç¬¦ï¼Œâ€œ-&gt;â€ï¼Œ<strong><strong>å®ƒæ˜¯ä¸€ä¸ª</strong></strong>ç®­å¤´æ ‡è¯†ç¬¦ã€‚è¿™ä¸ªç¬¦å·ä½¿ç”¨åœ¨caseè¯­å¥é‡Œï¼Œä¸€èˆ¬åŒ–çš„å½¢å¼æ˜¯â€œcase L -&gt;â€</strong>ã€‚è¿™é‡Œçš„Lï¼Œå°±æ˜¯è¦åŒ¹é…çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªæƒ…æ™¯ã€‚å¦‚æœç›®æ ‡å˜é‡å’Œæƒ…æ™¯åŒ¹é…ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œæ“ä½œç¬¦å³è¾¹çš„è¡¨è¾¾å¼æˆ–è€…ä»£ç å—ã€‚å¦‚æœè¦åŒ¹é…çš„æƒ…æ™¯æœ‰ä¸¤ä¸ªæˆ–è€…ä¸¤ä¸ªä»¥ä¸Šï¼Œå°±è¦ä½¿ç”¨é€—å·â€œ,â€ç”¨åˆ†éš”ç¬¦æŠŠå®ƒä»¬åˆ†å‰²å¼€æ¥ã€‚</p><pre><code class=\"language-java\">case Calendar.JANUARY,\n     // snipped\n     Calendar.DECEMBER -&gt; 31;\n</code></pre><p>ä¼ ç»Ÿçš„switchä»£ç ï¼Œè¿™ä¸ªä¸€èˆ¬åŒ–çš„å½¢å¼æ˜¯â€œcase L ï¼šâ€ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨å†’å·æ ‡è¯†ç¬¦ã€‚ä¸ºä»€ä¹ˆä¸å»¶ç»­ä½¿ç”¨ä¼ ç»Ÿçš„æƒ…æ™¯æ“ä½œç¬¦å‘¢ï¼Ÿè¿™ä¸»è¦æ˜¯å‡ºäºç®€åŒ–ä»£ç çš„è€ƒè™‘ã€‚æˆ‘ä»¬ä¾ç„¶å¯ä»¥åœ¨switchè¡¨è¾¾å¼é‡Œä½¿ç”¨å†’å·æ ‡è¯†ç¬¦ï¼Œä½¿ç”¨å†’å·æ ‡è¯†ç¬¦çš„ä¸€ä¸ªcaseè¯­å¥åªèƒ½åŒ¹é…ä¸€ä¸ªæƒ…æ™¯ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬ç¨åå†è®¨è®ºã€‚</p><p><strong>ä¸‹ä¸€ä¸ªæˆ‘ä»¬çœ‹åˆ°çš„å˜åŒ–ï¼Œæ˜¯ç®­å¤´æ ‡è¯†ç¬¦å³ä¾§çš„æ•°å€¼ã€‚è¿™ä¸ªæ•°å€¼ï¼Œä»£è¡¨çš„å°±æ˜¯è¯¥åŒ¹é…æƒ…æ™¯ä¸‹ï¼Œswitchè¡¨è¾¾å¼çš„æ•°å€¼ã€‚</strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>ç®­å¤´æ ‡è¯†ç¬¦å³ä¾§å¯ä»¥æ˜¯è¡¨è¾¾å¼ã€ä»£ç å—æˆ–è€…å¼‚å¸¸æŠ›å‡ºè¯­å¥ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–çš„å½¢å¼ã€‚</strong>å¦‚æœåªéœ€è¦ä¸€ä¸ªè¯­å¥ï¼Œè¿™ä¸ªè¯­å¥ä¹Ÿè¦ä»¥ä»£ç å—çš„å½¢å¼å‘ˆç°å‡ºæ¥ã€‚</p><pre><code class=\"language-java\">case Calendar.JANUARY,\n     // snipped\n     Calendar.DECEMBER -&gt; {  // CORRECT, enclosed with braces.\n    yield 31;\n}\n</code></pre><p>æ²¡æœ‰ä»¥ä»£ç å—å½¢å¼å‘ˆç°çš„ä»£ç ï¼Œç¼–è¯‘çš„æ—¶å€™ï¼Œå°±ä¼šæŠ¥é”™ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„çº¦æŸã€‚ä»£ç å—çš„å½¢å¼ï¼Œå¢å¼ºäº†è§†è§‰æ•ˆæœï¼Œå‡å°‘äº†ç¼–ç çš„å¤±è¯¯ã€‚åœ¨<a href=\"https://time.geekbang.org/column/intro/100019601\">ã€Šä»£ç ç²¾è¿›ä¹‹è·¯ã€‹</a>è¿™ä¸ªä¸“æ é‡Œï¼Œæˆ‘ä»¬åå¤å¼ºè°ƒè¿‡è¿™ç§å½¢å¼çš„å¥½å¤„ã€‚</p><pre><code class=\"language-java\">case Calendar.JANUARY,\n     // snipped\n     Calendar.DECEMBER -&gt;   // WRONG, not a block.\n    yield 31;\n</code></pre><p>å¦å¤–ï¼Œç®­å¤´æ ‡è¯†ç¬¦å³ä¾§éœ€è¦ä¸€ä¸ªè¡¨è¾¾switchè¡¨è¾¾å¼çš„æ•°å€¼ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºçš„çº¦æŸã€‚å¦‚æœä¸€ä¸ªè¯­å¥ç ´åäº†è¿™ä¸ªéœ€è¦ï¼Œå®ƒå°±ä¸èƒ½å‡ºç°åœ¨switchè¡¨è¾¾å¼é‡Œã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„ä»£ç é‡Œçš„returnè¯­å¥ï¼Œæ„å›¾é€€å‡ºè¯¥æ–¹æ³•ï¼Œè€Œæ²¡æœ‰è¡¨è¾¾è¿™ä¸ªswitchè¡¨è¾¾å¼çš„æ•°å€¼ã€‚è¿™æ®µä»£ç å°±ä¸èƒ½é€šè¿‡ç¼–è¯‘å™¨çš„å®¡æŸ¥ã€‚</p><pre><code class=\"language-java\">int daysInMonth = switch (month) {\n    // snipped\n    case Calendar.APRIL,\n         // snipped\n         Calendar.NOVEMBER -&gt; {\n        // yield 30;\n        return; // WRONG, return outside of enclosing switch expression.\n    }\n    // snipped\n}\n</code></pre><p><strong>æœ€åä¸€ä¸ªæˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°çš„å˜åŒ–ï¼Œæ˜¯å‡ºç°äº†ä¸€ä¸ªæ–°çš„å…³é”®å­—â€œyieldâ€</strong>ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œswitch è¡¨è¾¾å¼ç®­å¤´æ ‡è¯†ç¬¦çš„å³ä¾§æ˜¯ä¸€ä¸ªæ•°å€¼æˆ–è€…æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ å¦‚æœéœ€è¦ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¯­å¥ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨ä»£ç å—çš„å½¢å¼ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦å¼•å…¥ä¸€ä¸ªæ–°çš„ yield è¯­å¥æ¥äº§ç”Ÿä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼å°±æˆä¸ºè¿™ä¸ªå°é—­ä»£ç å—ä»£è¡¨çš„æ•°å€¼ã€‚</p><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠyieldè¯­å¥äº§ç”Ÿçš„å€¼çœ‹æˆæ˜¯switchè¡¨è¾¾å¼çš„è¿”å›å€¼ã€‚æ‰€ä»¥ï¼Œyieldåªèƒ½ç”¨åœ¨switch è¡¨è¾¾å¼é‡Œï¼Œè€Œä¸èƒ½ç”¨åœ¨switchè¯­å¥é‡Œã€‚</p><pre><code class=\"language-java\">case Calendar.FEBRUARY -&gt; {\n    if (((year % 4 == 0) &amp;&amp; !(year % 100 == 0))\n            || (year % 400 == 0)) {\n        yield 29;\n    } else {\n        yield 28;\n    }\n}\n</code></pre><p><strong>å…¶å®ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæˆ‘ä»¬ä»ä¸Šè¿°çš„ä»£ç é‡Œçœ‹ä¸åˆ°çš„å˜åŒ–ã€‚åœ¨switchè¡¨è¾¾å¼é‡Œï¼Œæ‰€æœ‰çš„æƒ…æ™¯éƒ½è¦åˆ—ä¸¾å‡ºæ¥ï¼Œä¸èƒ½å¤šã€ä¹Ÿä¸èƒ½å°‘ï¼ˆè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ç©·ä¸¾ï¼‰ã€‚</strong></p><p>æ¯”å¦‚è¯´ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œå¦‚æœæ²¡æœ‰æœ€åçš„defaultæƒ…æ™¯åˆ†æ”¯ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚è¿™æ˜¯ä¸€ä¸ªå½±å“æ·±è¿œçš„æ”¹è¿›ï¼Œå®ƒä¼šä½¿å¾—switchè¡¨è¾¾å¼çš„ä»£ç æ›´åŠ å¥å£®ï¼Œå¤§å¹…åº¦é™ä½ç»´æŠ¤æˆæœ¬ï¼Œå¦‚æœæœªæ¥éœ€è¦å¢åŠ ä¸€ä¸ªæƒ…æ™¯åˆ†æ”¯çš„è¯ï¼Œå°±æ›´æ˜¯å¦‚æ­¤äº†ã€‚</p><pre><code class=\"language-java\">int daysInMonth = switch (month) {\n    case Calendar.JANUARY,\n         // snipped\n         Calendar.DECEMBER -&gt; 31;\n    case Calendar.APRIL,\n         // snipped\n         Calendar.NOVEMBER -&gt; 30;\n    case Calendar.FEBRUARY -&gt; {\n             // snipped\n    }\n    // WRONG to comment out the default branch, 'switch' expression\n    // MUST cover all possible input values.\n    //\n    // default -&gt; throw new RuntimeException(\n    //        \"Calendar in JDK does not work\");\n};\n</code></pre><h2>æ”¹è¿›çš„switchè¯­å¥</h2><p>é€šè¿‡ä¸Šé¢çš„è§£è¯»ï¼Œæˆ‘ä»¬çŸ¥é“äº†switchè¡¨è¾¾å¼é‡Œæœ‰å¾ˆå¤šç§¯æçš„å˜åŒ–ã€‚é‚£è¿™äº›å˜åŒ–æœ‰æ²¡æœ‰å½±å“switchè¯­å¥å‘¢ï¼Ÿæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨switchè¯­å¥é‡Œä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦å—ï¼Ÿæˆ‘ä»¬å‰é¢è¯´è¿‡ï¼Œyieldè¯­å¥æ˜¯æ¥äº§ç”Ÿä¸€ä¸ªswitchè¡¨è¾¾å¼ä»£è¡¨çš„æ•°å€¼çš„ï¼Œå› æ­¤yieldè¯­å¥åªèƒ½ç”¨åœ¨switchè¡¨è¾¾å¼é‡Œï¼Œä¸èƒ½ç”¨åœ¨switchè¯­å¥ã€‚</p><p>å…¶ä»–çš„å˜åŒ–å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥çœ‹ä¸‹é¢ä¸€æ®µä»£ç ã€‚</p><pre><code class=\"language-java\">private static int daysInMonth(int year, int month) {\n    int daysInMonth = 0;\n    switch (month) {\n        case Calendar.JANUARY,\n             Calendar.MARCH,\n             Calendar.MAY,\n             Calendar.JULY,\n             Calendar.AUGUST,\n             Calendar.OCTOBER,\n             Calendar.DECEMBER -&gt;\n            daysInMonth = 31;\n        case Calendar.APRIL,\n             Calendar.JUNE,\n             Calendar.SEPTEMBER,\n             Calendar.NOVEMBER -&gt;\n            daysInMonth = 30;\n        case Calendar.FEBRUARY -&gt; {\n            if (((year % 4 == 0) &amp;&amp; !(year % 100 == 0))\n                    || (year % 400 == 0)) {\n                daysInMonth = 29;\n                break;\n            }\n\n            daysInMonth = 28;\n        }\n        // default -&gt; throw new RuntimeException(\n        //        \"Calendar in JDK does not work\");\n    }\n\n    return daysInMonth;\n}\n</code></pre><p>åœ¨è¿™æ®µä»£ç é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ç®­å¤´æ ‡è¯†ç¬¦ï¼Œçœ‹åˆ°äº†breakè¯­å¥ï¼Œçœ‹åˆ°äº†æ³¨é‡Šæ‰çš„defaultè¯­å¥ã€‚è¿™æ˜¯ä¸€æ®µåˆæ³•çš„ã€èƒ½å¤Ÿå·¥ä½œçš„ä»£ç ã€‚æ¢ä¸ªè¯´æ³•ï¼Œswitchè¯­å¥å¯ä»¥ä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨breakè¯­å¥ï¼Œä¹Ÿä¸éœ€è¦åˆ—å‡ºæ‰€æœ‰çš„æƒ…æ™¯ã€‚è¡¨é¢ä¸Šçœ‹èµ·æ¥ï¼Œswitchè¯­å¥çš„æ”¹è¿›ä¸æ˜¯é‚£ä¹ˆæ˜¾è€Œæ˜“è§ã€‚å…¶å®ï¼Œswitchè¯­å¥çš„æ”¹è¿›ä¸»è¦ä½“ç°åœ¨breakè¯­å¥çš„ä½¿ç”¨ä¸Šã€‚</p><p>æˆ‘ä»¬åº”è¯¥ä¹Ÿçœ‹åˆ°äº†ï¼Œbreakè¯­å¥æ²¡æœ‰å‡ºç°åœ¨ä¸‹ä¸€ä¸ªcaseè¯­å¥ä¹‹å‰ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„switchè¯­å¥ä¸å†éœ€è¦breakè¯­å¥æ¥å®ç°æƒ…æ™¯é—´çš„ä»£ç å…±äº«äº†ã€‚è™½ç„¶æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·ä½¿ç”¨breakè¯­å¥ï¼Œä½†æ˜¯å·²ç»ä¸å†å¿…è¦äº†ã€‚</p><pre><code class=\"language-java\">switch (month) {\n    // snipped\n    case Calendar.APRIL,\n             // snipped\n         Calendar.NOVEMBER -&gt; {\n            daysInMonth = 30;\n            break;  // UNNECESSARY, could be removed safely.\n        }\n    // snipped\n}\n</code></pre><p>æœ‰æ²¡æœ‰breakè¯­å¥ï¼Œä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„switchè¯­å¥éƒ½ä¸ä¼šé¡ºæ¬¡æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼ˆfall-throughï¼‰ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å‰é¢è°ˆåˆ°çš„breakè¯­å¥å¸¦æ¥çš„çƒ¦æ¼ä¹Ÿå°±æ¶ˆå¤±ä¸è§äº†ã€‚</p><p>ä¸è¿‡ï¼Œä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„switchè¯­å¥å¹¶æ²¡æœ‰ç¦æ­¢breakè¯­å¥ï¼Œè€Œæ˜¯æ¢å¤äº†å®ƒæœ¬æ¥çš„æ„ä¹‰ï¼šä»ä»£ç ç‰‡æ®µé‡ŒæŠ½èº«ï¼Œå°±åƒå®ƒåœ¨å¾ªç¯è¯­å¥é‡Œæ‰®æ¼”çš„è§’è‰²ä¸€æ ·ã€‚</p><pre><code class=\"language-java\">switch (month) {\n   // snipped\n   case Calendar.FEBRUARY -&gt; {\n        if (((year % 4 == 0) &amp;&amp; !(year % 100 == 0))\n                || (year % 400 == 0)) {\n            daysInMonth = 29;\n            break;     // BREAK the switch statement\n        }\n    \n        daysInMonth = 28;\n    }\n   // snipped\n}\n</code></pre><h2>æ€ªå‘³çš„switchè¡¨è¾¾å¼</h2><p>æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼Œswitchè¡¨è¾¾å¼ä¹Ÿå¯ä»¥ä½¿ç”¨å†’å·æ ‡è¯†ç¬¦ã€‚ä½¿ç”¨å†’å·æ ‡è¯†ç¬¦çš„ä¸€ä¸ªcaseè¯­å¥åªèƒ½åŒ¹é…ä¸€ä¸ªæƒ…æ™¯ï¼Œè€Œä¸”æ”¯æŒfall-throughã€‚å’Œç®­å¤´æ ‡è¯†ç¬¦çš„switchè¡¨è¾¾å¼ä¸€æ ·ï¼Œä½¿ç”¨å†’å·æ ‡è¯†ç¬¦switchè¡¨è¾¾å¼ä¹Ÿä¸æ”¯æŒbreakè¯­å¥ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯yieldè¯­å¥ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªå……æ»¡äº†æ€ªå‘³é“çš„ç¼–ç å½¢å¼ï¼Œæˆ‘å¹¶ä¸æ¨èä½¿ç”¨è¿™ç§å½¢å¼ï¼Œä½†æˆ‘å¯ä»¥å¸¦ä½ ç•¥ä½œäº†è§£ã€‚ä¸‹é¢çš„è¿™æ®µä»£ç ï¼Œå°±æ˜¯æˆ‘ä»¬è¯•ç€æŠŠç®­å¤´æ ‡è¯†ç¬¦æ›¿æ¢æˆå†’å·æ ‡è¯†ç¬¦çš„ä¸€ä¸ªä¾‹å­ã€‚ä½ å¯ä»¥æ¯”è¾ƒä¸€ä¸‹ä½¿ç”¨å†’å·æ ‡è¯†ç¬¦å’Œç®­å¤´æ ‡è¯†ç¬¦çš„ä¸¤æ®µä»£ç ï¼Œæƒ³ä¸€æƒ³ä¸¤ç§ä¸åŒå½¢å¼çš„ä¼˜åŠ£ã€‚æ¯«æ— ç–‘é—®ï¼Œä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„ä»£ç æ›´åŠ ç®€æ´ã€‚</p><pre><code class=\"language-java\">package co.ivi.jus.swexpr.legacy;\n\nimport java.util.Calendar;\n\nclass DaysInMonth {\n    public static void main(String[] args) {\n        Calendar today = Calendar.getInstance();\n        int month = today.get(Calendar.MONTH);\n        int year = today.get(Calendar.YEAR);\n\n    int daysInMonth = switch (month) {\n        case Calendar.JANUARY:\n        case Calendar.MARCH:\n        case Calendar.MAY:\n        case Calendar.JULY:\n        case Calendar.AUGUST:\n        case Calendar.OCTOBER:\n        case Calendar.DECEMBER:\n            yield 31;\n        case Calendar.APRIL:\n        case Calendar.JUNE:\n        case Calendar.SEPTEMBER:\n        case Calendar.NOVEMBER:\n            yield 30;\n        case Calendar.FEBRUARY:\n            if (((year % 4 == 0) &amp;&amp; !(year % 100 == 0))\n                    || (year % 400 == 0)) {\n                yield 29;\n            } else {\n                yield 28;\n            }\n        default:\n            throw new RuntimeException(\n                    \"Calendar in JDK does not work\");\n        };\n\n        System.out.println(\n            \"There are \" + daysInMonth + \" days in this month.\");\n    }\n}\n</code></pre><p>æœ‰äº†ä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„switchè¯­å¥å’Œswitchè¡¨è¾¾å¼ä¹‹åï¼Œæˆ‘ä»¬ä¸å†æ¨èä½¿ç”¨å†’å·æ ‡è¯†ç¬¦çš„switchè¯­å¥å’Œswitchè¡¨è¾¾å¼ã€‚å­¦ä¹ å¹¶ä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„switchè¯­å¥å’Œswitchè¡¨è¾¾å¼ï¼Œä¼šä½¿ä»£ç æ›´ç®€æ´ã€æ›´å¥å£®ã€‚</p><h2>æ€»ç»“</h2><p>å¥½ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘æ¥åšä¸ªå°ç»“ã€‚ä»å‰é¢çš„è®¨è®ºä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹äº†è§£äº†switchè¡¨è¾¾å¼å’Œæ”¹è¿›çš„switchè¯­å¥ã€‚æˆ‘ä»¬è¿˜è®¨è®ºäº†switchè¡¨è¾¾å¼å¸¦æ¥çš„æ–°æ¦‚å¿µå’Œæ–°çš„å…³é”®å­—ï¼Œäº†è§£äº†è¿™äº›åŸºæœ¬æ¦‚å¿µä»¥åŠå®ƒä»¬çš„é€‚ç”¨èŒƒå›´ã€‚</p><p>æ–°çš„switchå½¢å¼ã€è¯­å¥å’Œè¡¨è¾¾å¼ï¼Œä¸åŒçš„ä½¿ç”¨èŒƒå›´ï¼Œè¿™äº›æ¦‚å¿µäº¤ç»‡åœ¨ä¸€èµ·ï¼Œè®©switchçš„å­¦ä¹ å’Œä½¿ç”¨éƒ½å˜æˆäº†ä¸€ä»¶æœ‰ç‚¹æŒ‘æˆ˜æ€§çš„äº‹æƒ…ã€‚ç®­å¤´æ ‡è¯†ç¬¦çš„å¼•å…¥ï¼Œç®€åŒ–äº†ä»£ç ï¼Œæé«˜äº†ç¼–ç æ•ˆç‡ã€‚å¯æ˜¯ï¼Œå­¦ä¹ è¿™ä¹ˆå¤šç§switchçš„è¡¨ç°å½¢å¼ï¼Œä¹Ÿå¢åŠ äº†æˆ‘ä»¬çš„å­¦ä¹ è´Ÿæ‹…ã€‚ä¸ºäº†å¸®åŠ©ä½ å¿«é€ŸæŒæ¡è¿™äº›å½¢å¼ï¼Œæˆ‘æŠŠä¸åŒçš„switchè¡¨è¾¾å½¢å¼ï¼Œä»¥åŠå®ƒä»¬æ”¯æŒçš„ç‰¹å¾ï¼Œæ”¾åœ¨äº†ä¸‹é¢è¿™å¼ è¡¨æ ¼é‡Œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/8e/09/8ea744fd05104e66703f4c24a72ddd09.jpg?wh=1920x991\" alt=\"å›¾ç‰‡\"></p><p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥è®°ä½ä¸‹é¢çš„æ€»ç»“ï¼š</p><ul>\n<li>breakè¯­å¥åªèƒ½å‡ºç°åœ¨switchè¯­å¥é‡Œï¼Œä¸èƒ½å‡ºç°åœ¨switchè¡¨è¾¾å¼é‡Œï¼›</li>\n<li>yieldè¯­å¥åªèƒ½å‡ºç°åœ¨switchè¡¨è¾¾å¼é‡Œï¼Œä¸èƒ½å‡ºç°åœ¨switchè¯­å¥é‡Œï¼›</li>\n<li>switchè¡¨è¾¾å¼éœ€è¦ç©·ä¸¾å‡ºæ‰€æœ‰çš„æƒ…æ™¯ï¼Œè€Œswitchè¯­å¥ä¸éœ€è¦æƒ…æ™¯ç©·ä¸¾ï¼›</li>\n<li>ä½¿ç”¨å†’å·æ ‡è¯†ç¬¦çš„swtichå½¢å¼ï¼Œæ”¯æŒæƒ…æ™¯é—´çš„fall-throughï¼›è€Œä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„swtichå½¢å¼ä¸æ”¯æŒfall-throughï¼›</li>\n<li>ä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„swtichå½¢å¼ï¼Œä¸€ä¸ªcaseè¯­å¥æ”¯æŒå¤šä¸ªæƒ…æ™¯ï¼›è€Œä½¿ç”¨å†’å·æ ‡è¯†ç¬¦çš„swtichå½¢å¼ä¸æ”¯æŒå¤šæƒ…æ™¯çš„caseè¯­å¥ã€‚</li>\n</ul><p>ä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„swtichå½¢å¼ï¼ŒåºŸæ­¢äº†å®¹æ˜“å‡ºé—®é¢˜çš„fall-throughè¿™ä¸ªç‰¹å¾ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„swtichå½¢å¼ï¼Œé€æ­¥åºŸæ­¢ä½¿ç”¨å†’å·æ ‡è¯†ç¬¦çš„swtichå½¢å¼ã€‚åœ¨switchè¡¨è¾¾å¼å’Œswitchè¯­å¥ä¹‹é—´ï¼Œæˆ‘ä»¬åº”è¯¥ä¼˜å…ˆä½¿ç”¨switchè¡¨è¾¾å¼ã€‚è¿™äº›é€‰æ‹©ï¼Œéƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–ä»£ç é€»è¾‘ï¼Œå‡å°‘ä»£ç é”™è¯¯ï¼Œæé«˜ç”Ÿäº§æ•ˆç‡ã€‚</p><p>å¦‚æœä½ è¦ä¸°å¯Œä½ çš„ä»£ç è¯„å®¡æ¸…å•ï¼Œå­¦ä¹ å®Œè¿™ä¸€èŠ‚å†…å®¹åï¼Œä½ å¯ä»¥åŠ å…¥ä¸‹é¢è¿™ä¸€æ¡ï¼š</p><blockquote>\n<p>ä½¿ç”¨å†’å·æ ‡è¯†ç¬¦çš„swtichå½¢å¼ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æ›´æ”¹ä¸ºä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦ï¼Ÿ<br>\nä½¿ç”¨switchè¯­å¥èµ‹å€¼çš„æ“ä½œï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æ›´æ”¹ä¸ºä½¿ç”¨switchè¡¨è¾¾å¼ï¼Ÿ</p>\n</blockquote><p>å¦å¤–ï¼Œæˆ‘è¿˜æ‹å‡ºäº†å‡ ä¸ªä»Šå¤©è®¨è®ºè¿‡çš„æŠ€æœ¯è¦ç‚¹ï¼Œè¿™äº›éƒ½å¯èƒ½åœ¨ä½ ä»¬é¢è¯•ä¸­å‡ºç°å“¦ã€‚é€šè¿‡è¿™ä¸€æ¬¡å­¦ä¹ ï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š</p><ul>\n<li>çŸ¥é“switchè¡¨è¾¾å¼ï¼Œå¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨switchè¡¨è¾¾å¼ï¼›\n<ul>\n<li>é¢è¯•é—®é¢˜ï¼šä½ çŸ¥é“switchè¡¨è¾¾å¼å—ï¼Ÿè¯¥æ€ä¹ˆå¤„ç†switchè¡¨è¾¾å¼é‡Œçš„è¯­å¥ï¼Ÿ</li>\n</ul>\n</li>\n<li>äº†è§£switchè¡¨è¾¾å¼è¦è§£å†³çš„é—®é¢˜ï¼Œå¹¶ä¸”çŸ¥é“è§£å†³æ‰è¿™äº›é—®é¢˜çš„åŠæ³•ï¼›\n<ul>\n<li>é¢è¯•é—®é¢˜ï¼šä½¿ç”¨switchè¡¨è¾¾å¼æœ‰å“ªäº›å¥½å¤„ï¼Ÿ</li>\n</ul>\n</li>\n<li>äº†è§£ä¸åŒçš„switchçš„è¡¨ç°å½¢å¼ï¼Œèƒ½å¤Ÿçœ‹å¾—æ‡‚ä¸åŒçš„è¡¨ç°å½¢å¼ï¼Œå¹¶ä¸”ç»™å‡ºæ”¹è¿›æ„è§ã€‚\n<ul>\n<li>é¢è¯•é—®é¢˜ï¼šä½ æ›´å–œæ¬¢ä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦è¿˜æ˜¯å†’å·æ ‡è¯†ç¬¦ï¼Ÿ</li>\n</ul>\n</li>\n</ul><p>å¦‚æœä½ èƒ½å¤Ÿæœ‰æ„è¯†åœ°ä½¿ç”¨ç®­å¤´æ ‡è¯†ç¬¦çš„switchè¡¨è¾¾å¼ï¼Œåº”è¯¥å¯ä»¥å¤§å¹…åº¦æé«˜ç¼–ç çš„æ•ˆç‡å’Œè´¨é‡ï¼›å¦‚æœä½ èƒ½å¤Ÿäº†è§£ä¸åŒçš„switchè¡¨ç°å½¢å¼ï¼Œå¹¶ä¸”å¯¹æ¯ç§å½¢å¼éƒ½æœ‰è‡ªå·±çš„è§è§£ï¼Œä½ å°±èƒ½å¸®åŠ©ä½ çš„åŒäº‹æé«˜ç¼–ç çš„æ•ˆç‡å’Œè´¨é‡ã€‚æ¯«æ— ç–‘é—®ï¼Œåœ¨é¢è¯•çš„æ—¶å€™ï¼Œæœ‰æ„è¯†åœ°åœ¨ä»£ç é‡Œä½¿ç”¨switchè¡¨è¾¾å¼ï¼Œæ˜¯ä¸€ä¸ªèƒ½å¤Ÿå±•ç°ä½ çš„å­¦ä¹ èƒ½åŠ›ã€ç†è§£èƒ½åŠ›å’Œå¯¹æ–°çŸ¥è¯†çš„æ¥å—èƒ½åŠ›çš„ä¸€ä¸ªå¥½æœºä¼šã€‚</p><h2>æ€è€ƒé¢˜</h2><p>åœ¨å‰é¢çš„è®¨è®ºé‡Œï¼Œæˆ‘ä»¬è¯´è¿‡æƒ…æ™¯ç©·ä¸¾æ˜¯ä¸€ä¸ªå½±å“æ·±è¿œçš„æ”¹è¿›æ–¹å‘ï¼Œå®ƒä¼šä½¿å¾—switchè¡¨è¾¾å¼çš„ä»£ç æ›´åŠ å¥å£®ï¼Œå¤§å¹…åº¦é™ä½ç»´æŠ¤æˆæœ¬ï¼Œç‰¹åˆ«æ˜¯åœ¨æœªæ¥éœ€è¦å¢åŠ ä¸€ä¸ªæƒ…æ™¯åˆ†æ”¯çš„æƒ…å½¢ä¸‹ã€‚ä½†æ˜¯ï¼Œé™äºç¯‡å¹…ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è¯¦ç»†åœ°å±•å¼€è®¨è®ºå…¶ä¸­çš„ç»†èŠ‚ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªè®¨è®ºå½“ä½œä¸€ä¸ªç¨å¾®æœ‰ç‚¹æŒ‘æˆ˜çš„æ€è€ƒé¢˜ã€‚</p><p>å‡è®¾æœ‰ä¸€å¤©ï¼Œåœ°çƒå’Œå¤ªé˜³çš„å…³ç³»å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ç§å˜åŒ–è¿˜æ²¡æœ‰å¤§åˆ°æ¯ç­äººç±»çš„ç¨‹åº¦ï¼Œä½†æ˜¯ä¹Ÿè¶³ä»¥æ”¹å˜å¹´æœˆçš„å…³ç³»äº†ã€‚äºæ˜¯ï¼Œå¤©æ–‡å­¦å®¶é‡æ–°ä¿®è®¢äº†æ—¥å†ï¼Œå¢åŠ äº†ä¸€ä¸ªæ–°çš„æœˆä»½ï¼Œç¬¬åä¸‰ä¸ªæœˆã€‚ä¸ºäº†å¯¹åº”è¿™ç§å˜åŒ–ï¼ŒJDKçš„è®¾è®¡è€…ä»¬ä¹Ÿç»™Calendarç±»å¢åŠ äº†ç¬¬åä¸‰ä¸ªæœˆï¼šCalendar.AFTERDECã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬çš„é—®é¢˜å°±æ¥äº†ã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨çš„ä»£ç èƒ½å¤Ÿæ£€æµ‹åˆ°è¿™ä¸ªå˜åŒ–å—ï¼Ÿå¦‚æœä¸èƒ½ï¼Œæ˜¯ä¸æ˜¯åªæœ‰ç³»ç»Ÿå´©æºƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿæ„è¯†åˆ°é—®é¢˜çš„å­˜åœ¨ï¼Ÿ</p><p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œæœ‰æ²¡æœ‰æ›´å¥å£®çš„è®¾è®¡ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åœ¨ç³»ç»Ÿå´©æºƒä¹‹å‰å°±èƒ½å¤Ÿæ£€æµ‹åˆ°è¿™ä¸ªæ„æƒ³ä¸åˆ°çš„å˜åŒ–ï¼Ÿä»è€Œç»™æˆ‘ä»¬ç•™å‡ºæ—¶é—´æ›´æ”¹æˆ‘ä»¬çš„ä»£ç å’Œç³»ç»Ÿï¼Ÿ</p><p>ç¨å¾®æç¤ºä¸€ä¸ªï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„å…¶ä¸­ä¸€ä¸ªæ€è·¯ï¼Œå°±æ˜¯è¦ä½¿ç”¨æœ‰ç©·ä¸¾èƒ½åŠ›çš„è¡¨è¾¾å¼ï¼Œç„¶åè®¾è®¡å‡ºå¯ä»¥è¡¨è¾¾ç©·ä¸¾æƒ…æ™¯çš„æ–°å½¢å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ³›æ³›çš„æ•´æ•°æ¥è¡¨è¾¾åäºŒä¸ªæœˆã€‚</p><p>æˆ‘åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­å†™äº†ä¸€ä¸ªä»£ç å°æ ·ã€‚è¿™ä¸ªä»£ç å°æ ·ï¼Œå®ç°çš„è¿˜æ˜¯ä¸€å¹´åªæœ‰åäºŒä¸ªæœˆçš„é€»è¾‘ã€‚ç°åœ¨æˆ‘ä»¬å‡è®¾ï¼Œä¸€å¹´è¿˜æ˜¯åäºŒä¸ªæœˆï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³è®©è¿™æ®µä»£ç å¥å£®åˆ°èƒ½å¤Ÿæ£€æµ‹åˆ°æœªæ¥ä¸€å¹´å˜æˆåä¸€ä¸ªæœˆæˆ–è€…åä¸‰ä¸ªæœˆçš„æƒ…æ™¯ã€‚</p><p>åœ¨è¿™ä¸ªä»£ç å°æ ·é‡Œï¼Œæˆ‘ä¹Ÿè¯•ç€åŠ å…¥äº†ä¸€äº›æç¤ºã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è¯•ç€æ‰¾æ‰¾å…¶ä»–çš„è§£å†³æ–¹æ¡ˆã€‚è¯·è¯•ç€å°†è¿™æ®µä»£ç ä¿®æ”¹æˆä½ å–œæ¬¢çš„æ ·å­ï¼Œè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹æ€ä¹ˆè§£å†³æ‰è¿™ä¸ªé—®é¢˜ã€‚</p><pre><code class=\"language-java\">package co.ivi.jus.swexpr.review.xuelei;\n\nimport java.util.Calendar;\n\nclass DaysInMonth {\n    public static void main(String[] args) {\n        Calendar today = Calendar.getInstance();\n        int month = today.get(Calendar.MONTH);\n        int year = today.get(Calendar.YEAR);\n\n    // Hints: could we replace the integer month\n    // with an exhaustive enumeration?\n    int daysInMonth = switch (month) {\n            case Calendar.JANUARY,\n                 Calendar.MARCH,\n                 Calendar.MAY,\n                 Calendar.JULY,\n                 Calendar.AUGUST,\n                 Calendar.OCTOBER,\n                 Calendar.DECEMBER -&gt; 31;\n            case Calendar.APRIL,\n                 Calendar.JUNE,\n                 Calendar.SEPTEMBER,\n                 Calendar.NOVEMBER -&gt; 30;\n            case Calendar.FEBRUARY -&gt; {\n                if (((year % 4 == 0) &amp;&amp; !(year % 100 == 0))\n                        || (year % 400 == 0)) {\n                    yield 29;\n                } else {\n                    yield 28;\n                }\n            }\n            // Hints: Are we able to replace the default case by\n            // enumerating all cases with case clause above?\n            default -&gt; throw new RuntimeException(\n                    \"Calendar in JDK does not work\");\n        };\n\n        System.out.println(\n            \"There are \" + daysInMonth + \" days in this month.\");\n    }\n}\n</code></pre><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºç•™è¨€ã€è®¨è®ºï¼Œåˆ†äº«ä½ çš„é˜…è¯»ä½“éªŒä»¥åŠä½ å¯¹è¿™ä¸ªæ€è€ƒé¢˜çš„æƒ³æ³•ã€‚</p><p>æ³¨ï¼šæœ¬æ–‡ä½¿ç”¨çš„å®Œæ•´çš„ä»£ç å¯ä»¥ä»<a href=\"https://github.com/XueleiFan/java-up/tree/main/src/main/java/co/ivi/jus/swexpr\">GitHub</a>ä¸‹è½½ï¼Œä½ å¯ä»¥é€šè¿‡ä¿®æ”¹<a href=\"https://github.com/XueleiFan/java-up/tree/main/src/main/java/co/ivi/jus/instance\">GitHub</a>ä¸Š<a href=\"https://github.com/XueleiFan/java-up/blob/main/src/main/java/co/ivi/jus/swexpr/review/xuelei/DaysInMonth.java\">review template</a>ä»£ç ï¼Œå®Œæˆè¿™æ¬¡çš„æ€è€ƒé¢˜ã€‚å¦‚æœä½ æƒ³è¦åˆ†äº«ä½ çš„ä¿®æ”¹æˆ–è€…æƒ³å¬å¬è¯„å®¡çš„æ„è§ï¼Œè¯·æäº¤ä¸€ä¸ª GitHubçš„æ‹‰å–è¯·æ±‚ï¼ˆPull Requestï¼‰ï¼Œå¹¶æŠŠæ‹‰å–è¯·æ±‚çš„åœ°å€è´´åˆ°ç•™è¨€é‡Œã€‚è¿™ä¸€å°èŠ‚çš„æ‹‰å–è¯·æ±‚ä»£ç ï¼Œè¯·åœ¨<a href=\"https://github.com/XueleiFan/java-up/blob/main/src/main/java/co/ivi/jus/swexpr/review\">å®ä¾‹åŒ¹é…ä¸“ç”¨çš„ä»£ç è¯„å®¡ç›®å½•</a>ä¸‹ï¼Œå»ºä¸€ä¸ªä»¥ä½ çš„åå­—å‘½åçš„å­ç›®å½•ï¼Œä»£ç æ”¾åˆ°ä½ ä¸“æœ‰çš„å­ç›®å½•é‡Œã€‚æ¯”å¦‚ï¼Œæˆ‘çš„ä»£ç ï¼Œå°±æ”¾åœ¨swexpr/review/xueleiçš„ç›®å½•ä¸‹é¢ã€‚</p>","neighbors":{"left":{"article_title":"05 | ç±»å‹åŒ¹é…ï¼šæ€ä¹ˆåˆ‡é™¤è‡ƒè‚¿çš„å¼ºåˆ¶è½¬æ¢ï¼Ÿ","id":449798},"right":{"article_title":"07 | switchåŒ¹é…ï¼šèƒ½ä¸èƒ½é€‚é…ä¸åŒçš„ç±»å‹ï¼Ÿ","id":460478}},"comments":[{"had_liked":false,"id":324342,"user_name":"fatme","can_delete":false,"product_type":"c1","uid":1034451,"ip_address":"","ucode":"75A805D2BB2AD1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c8/d3/3020ae46.jpg","comment_is_top":false,"comment_ctime":1638375961,"is_pvip":false,"replies":[{"id":"117714","content":"ä¸è°¢ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1111315","ctime":1638416933,"ip_address":"","comment_id":324342,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10228310553","product_id":100097301,"comment_content":"ç»ˆäºæ˜ç™½æ€è€ƒé¢˜çš„æ€è·¯ï¼ŒåŸæ¥æ˜¯è¦åœ¨ç¼–è¯‘æœŸæš´éœ²å‡ºé—®é¢˜ã€‚è¿™ç§æ€è·¯ï¼Œå³ä½¿æ˜¯å¯¹ jdk 8 ä»¥ä¸‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ï¼Œåªä¸è¿‡æ˜¯ä¸åƒ switch è¡¨è¾¾å¼ä¸€æ ·æœ‰è¯­è¨€æœ¬èº«çš„å¸®åŠ©ã€‚åˆå­¦äº†ä¸€æ‹›ï¼Œè°¢è°¢è€å¸ˆï¼","like_count":2,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535354,"discussion_content":"ä¸è°¢ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638416933,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323514,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1637942018,"is_pvip":false,"replies":[{"id":"117419","content":"â€œå°±ä¸‰è¡Œä»£ç ï¼Œæpræœ‰ç‚¹å¤ªå¯’é…¸äº†â€ï¼Œå¤šå°çš„æ”¹åŠ¨éƒ½ä¸ä¼šæ˜¾å¾—å¯’é…¸ã€‚ä»»ä½•ä¸€ä¸ªå¼€æºç¤¾åŒºï¼Œéƒ½éœ€è¦å¾ˆå¤šå°çš„æ”¹åŠ¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1111315","ctime":1637988150,"ip_address":"","comment_id":323514,"utype":1}],"discussion_count":5,"race_medal":0,"score":"10227876610","product_id":100097301,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯: æˆ‘ä»¬ç°åœ¨çš„ä»£ç èƒ½å¤Ÿæ£€æµ‹åˆ°è¿™ä¸ªå˜åŒ–å—ï¼Ÿå¦‚æœä¸èƒ½ï¼Œæ˜¯ä¸æ˜¯åªæœ‰ç³»ç»Ÿå´©æºƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿæ„è¯†åˆ°é—®é¢˜çš„å­˜åœ¨ï¼Ÿ<br><br>ç­”: å¦‚æœæ˜¯æ–°å¢çš„æœˆä»½ç°åœ¨çš„è®¾è®¡åªèƒ½æŠ›å‡ºå¼‚å¸¸,æé†’æˆ‘ä»¬ä¿®æ”¹ä»£ç .å¦‚æœæ˜¯å‡å°‘äº†æœˆä»½,åœ¨æœªæ›´æ–°JDKçš„æƒ…å†µä¸‹,ä»£ç æ­£å¸¸è¿è¡Œ.å¦å¤–: JDKå¹¶éå¼ºæ›´æ–°,æœ‰äº›ç”¨æˆ·å¹¶ä¸ä¼šé¢‘ç¹æ›´æ–°JDK,åœ¨æˆ‘æ¥è§¦çš„ä¸€äº›é¡¹ç›®,ç”šè‡³è¿˜åœ¨ä½¿ç”¨JDK1.6,å› æ­¤å¯¹äºæ–°ç‰¹æ€§å’Œæ¼æ´çš„ä¿®å¤,ååº”å¾ˆè¿Ÿç¼“.<br><br>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œæœ‰æ²¡æœ‰æ›´å¥å£®çš„è®¾è®¡ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åœ¨ç³»ç»Ÿå´©æºƒä¹‹å‰å°±èƒ½å¤Ÿæ£€æµ‹åˆ°è¿™ä¸ªæ„æƒ³ä¸åˆ°çš„å˜åŒ–ï¼Ÿä»è€Œç»™æˆ‘ä»¬ç•™å‡ºæ—¶é—´æ›´æ”¹æˆ‘ä»¬çš„ä»£ç å’Œç³»ç»Ÿï¼Ÿ<br><br>ç­”: æŒç»­å…³æ³¨JDKæ¼æ´ä¿®å¤å’Œç‰ˆæœ¬å‘å¸ƒ,åŠæ—¶å‡çº§.è¿™æ ·æ‰€é‡åˆ°çš„é”™è¯¯ä¼šç¬¬ä¸€æ—¶é—´åé¦ˆç»™æˆ‘ä»¬,ä»¥ç•™ç»™æˆ‘ä»¬ä¿®å¤é—®é¢˜çš„æ—¶é—´.<br><br><br>é¢˜å¤–è¯,æœ¬æ¥å‡†å¤‡ç”¨java.time.LocalDateé‡å†™ä¸€ä¸‹è·å–æœˆä»½å¤©æ•°,æƒ³æäº¤ä¸€ä¸ªpr.å‘ç°ç”¨LocalDateæ¥å†™,å°±ä¸‰è¡Œä»£ç .æpræœ‰ç‚¹å¤ªå¯’é…¸äº†,å°±å‘åœ¨è¿™æŠŠ(ç¬‘~)<br><br>import java.time.LocalDate;<br><br>var localDate=LocalDate.now();<br>&#47;&#47; åˆ¤æ–­æ˜¯å¦ä¸ºé—°å¹´.<br>var isleapYear=localDate.isLeapYear();<br>System.out.println(localDate.getMonth().length(isleapYear));<br><br>ä¸‹é¢è¿™æ®µä»£ç æ¥è‡ªjava.time.Month.class,è¿™æ ·åˆ¤æ–­æ„Ÿè§‰:<br><br> public int length(boolean leapYear) {<br>        switch (this) {<br>            case FEBRUARY:<br>                return (leapYear ? 29 : 28);<br>            case APRIL:<br>            case JUNE:<br>            case SEPTEMBER:<br>            case NOVEMBER:<br>                return 30;<br>            default:<br>                return 31;<br>        }<br>    }<br><br>å¯ä»¥æ”¹å†™ä¸º:<br><br>public int length(boolean leapYear) {<br>        return switch (this) {<br>            case FEBRUARY -&gt; (leapYear ? 29 : 28);<br>            case APRIL,<br>                 JUNE,<br>                 SEPTEMBER,<br>                 NOVEMBER -&gt; 30;<br>            default -&gt; 31;<br>        };<br>    }","like_count":2,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533836,"discussion_content":"â€œå°±ä¸‰è¡Œä»£ç ï¼Œæpræœ‰ç‚¹å¤ªå¯’é…¸äº†â€ï¼Œå¤šå°çš„æ”¹åŠ¨éƒ½ä¸ä¼šæ˜¾å¾—å¯’é…¸ã€‚ä»»ä½•ä¸€ä¸ªå¼€æºç¤¾åŒºï¼Œéƒ½éœ€è¦å¾ˆå¤šå°çš„æ”¹åŠ¨ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637988150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1054958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","nickname":"ABC","note":"","ucode":"7501AD9C0C4A70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":533855,"discussion_content":"å¥½çš„è€å¸ˆ,æ™šç‚¹æäº¤ä¸€ä¸ªpr.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637994227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533836,"ip_address":""},"score":533855,"extra":""},{"author":{"id":1054958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","nickname":"ABC","note":"","ucode":"7501AD9C0C4A70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":533886,"discussion_content":"https://github.com/XueleiFan/java-up/pull/13","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638007325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533836,"ip_address":""},"score":533886,"extra":""}]},{"author":{"id":1784474,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/3a/9a/8b6aaa39.jpg","nickname":"é»‘","note":"","ucode":"96D0F91F8A6FCA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535589,"discussion_content":"è¿™ç§ä¿®æ”¹æœ‰ä¸ªbugã€‚å¦‚æœåŠ å…¥äº†13æœˆã€‚é»˜è®¤äº†13æœˆæœ‰äº†31å¤©ğŸ˜‚ã€‚ä¸åˆç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638492703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534044,"discussion_content":"å—¯ï¼Œæˆ‘è¿˜ä»¥ä¸ºä½ è¦ç»™OpenJDKæäº¤ä¸€ä¸ªPRå‘¢ã€‚å’±ä»¬è‡ªå·±çš„ç±»åº“ä¹Ÿæ¬¢è¿å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638077000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323432,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1637901434,"is_pvip":false,"replies":[{"id":"117337","content":"å¥½çœ‹å°±æ˜¯ç”Ÿäº§åŠ›ï¼","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1111315","ctime":1637905630,"ip_address":"","comment_id":323432,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10227836026","product_id":100097301,"comment_content":"-&gt;å¥½ç”¨å¾ˆå¤šï¼Œswitch å˜å¥½çœ‹äº†","like_count":2,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533559,"discussion_content":"å¥½çœ‹å°±æ˜¯ç”Ÿäº§åŠ›ï¼","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637905630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323421,"user_name":"çŒ¿äººè°·","can_delete":false,"product_type":"c1","uid":1100149,"ip_address":"","ucode":"85106C7FB14C43","user_header":"https://static001.geekbang.org/account/avatar/00/10/c9/75/62ce2d69.jpg","comment_is_top":false,"comment_ctime":1637896139,"is_pvip":true,"replies":[{"id":"117338","content":"å®ƒåº”è¯¥æ˜¯æˆ‘ä»¬ä»¥åä½¿ç”¨switchçš„æ ‡å‡†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1111315","ctime":1637905740,"ip_address":"","comment_id":323421,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10227830731","product_id":100097301,"comment_content":"è¿™ä¸ªæ–°ç‰¹æ€§çœ‹ç€å¾ˆä¸é”™ï¼","like_count":2,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533560,"discussion_content":"å®ƒåº”è¯¥æ˜¯æˆ‘ä»¬ä»¥åä½¿ç”¨switchçš„æ ‡å‡†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637905740,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359147,"user_name":"if...else...","can_delete":false,"product_type":"c1","uid":2550743,"ip_address":"æµ™æ±Ÿ","ucode":"D0565908C99695","user_header":"https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg","comment_is_top":false,"comment_ctime":1665289655,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665289655","product_id":100097301,"comment_content":"å­¦ä¹ æ‰“å¡","like_count":0},{"had_liked":false,"id":345239,"user_name":"è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1181887,"ip_address":"","ucode":"EDFC3EFAB0B88E","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/bf/cd6bfc22.jpg","comment_is_top":false,"comment_ctime":1652152330,"is_pvip":false,"replies":[{"id":"126239","content":"å¯ä»¥ä½¿ç”¨returnçš„ç±»æ¯”æ¥ç†è§£ã€‚åªæ˜¯ï¼Œè¿”å›çš„æ˜¯è¡¨è¾¾å¼çš„å€¼ï¼Œè€Œä¸æ˜¯é€€å‡ºä¸€ä¸ªæ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1111315","ctime":1652714440,"ip_address":"","comment_id":345239,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1652152330","product_id":100097301,"comment_content":"è¿™é‡Œçš„ yield  ï¼Œä»…æ˜¯ ç±»ä¼¼returnçš„åŠŸèƒ½ä¹ˆï¼Ÿè¿˜æ˜¯æœ‰å¤šçº¿ç¨‹é‡Œçš„ yield å«ä¹‰å’Œç”¨å¤„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572346,"discussion_content":"å¯ä»¥ä½¿ç”¨returnçš„ç±»æ¯”æ¥ç†è§£ã€‚åªæ˜¯ï¼Œè¿”å›çš„æ˜¯è¡¨è¾¾å¼çš„å€¼ï¼Œè€Œä¸æ˜¯é€€å‡ºä¸€ä¸ªæ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1652714440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327995,"user_name":"ç¬¬äºŒå°‘","can_delete":false,"product_type":"c1","uid":1004264,"ip_address":"","ucode":"4A09D1E7589F67","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/e8/92a2e66d.jpg","comment_is_top":false,"comment_ctime":1640441520,"is_pvip":true,"replies":[{"id":"119423","content":"ideaæ˜¯ä¸ªå¾ˆå¥½çš„å·¥å…·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1111315","ctime":1640480021,"ip_address":"","comment_id":327995,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1640441520","product_id":100097301,"comment_content":"å…³äºæœ¬è®²æ€è€ƒé¢˜ï¼Œå¦‚æœè¦åœ¨ç¼–è¯‘æœŸé—´æ£€æµ‹å‡ºCalendarç±»å¢åŠ äº†ç¬¬åä¸‰ä¸ªæœˆï¼Œå…³é”®å°±æ˜¯è¦æœ‰ä¸€ç§æœºåˆ¶èƒ½ç©·ä¸¾Calendarç±»é‡Œé¢å®šä¹‰çš„æ‰€æœ‰æœˆä»½ï¼Œæ¯”å¦‚å¯ä»¥ç”¨æšä¸¾æ¥å®ç°é¢„å®šä¹‰çš„æœˆä»½ï¼Œå°±å¯ä»¥ç©·ä¸¾äº†ï¼›ç„¶åå¯¹äº switch(x),åªè¦ x å¯¹åº”çš„å€¼æ˜¯å¯ç©·ä¸¾çš„ï¼Œé‚£ä¹ˆjdk 17çš„ç¼–è¯‘å™¨å·²ç»æ”¯æŒæ£€æŸ¥ x å¯¹åº”çš„å€¼åœ¨caseé‡Œæœ‰æ²¡æœ‰å…¨éƒ¨è¢«è¦†ç›–äº†ï¼Œå¦‚æœæ²¡æœ‰å…¨éƒ¨è¦†ç›–ï¼Œå°±ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ï¼š<br><br>java: switch è¡¨è¾¾å¼ä¸åŒ…å«æ‰€æœ‰å¯èƒ½çš„è¾“å…¥å€¼<br><br>å¦‚æœæ˜¯åœ¨ideé‡Œï¼Œä¸éœ€è¦æ‰‹åŠ¨æ‰§è¡Œç¼–è¯‘ï¼Œå°±ä¼šæœ‰é”™è¯¯æç¤ºï¼›å¦‚æœç¼–è¯‘å™¨æœ¬èº«ä¸æ”¯æŒåšè¿™ç§æ£€æŸ¥ï¼Œé‚£ä¹Ÿå¯ä»¥å……åˆ†åˆ©ç”¨ideæ¥æ£€æŸ¥é”™è¯¯ï¼Œæ¯”å¦‚IntellJ IDEA,å¯ä»¥è‡ªå®šä¹‰å¯¹åº”çš„inspectionsæ¥åšåˆ°è¿™ä¸€ç‚¹","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541594,"discussion_content":"ideaæ˜¯ä¸ªå¾ˆå¥½çš„å·¥å…·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640480022,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325674,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1639096323,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1639096323","product_id":100097301,"comment_content":"<br>æ–‡æœ«çš„è¡¨æ ¼å’Œæ€»ç»“å¤ªæ£’äº†ï¼<br>å¦ï¼šæˆ‘åœ¨ Java 8 ä¸­å‡ ä¹ä¸å†ä½¿ç”¨ Calendar ç±»äº†ã€‚","like_count":0},{"had_liked":false,"id":323540,"user_name":"xiaobang","can_delete":false,"product_type":"c1","uid":1157508,"ip_address":"","ucode":"1735BDCFD61655","user_header":"https://static001.geekbang.org/account/avatar/00/11/a9/84/c87b51ce.jpg","comment_is_top":false,"comment_ctime":1637980342,"is_pvip":false,"replies":[{"id":"117430","content":"æ˜¯çš„ï¼Œå¦‚æœæœˆä»½çš„APIé‡æ–°è®¾è®¡çš„è¯ï¼Œä¸€å®šæ˜¯ä½¿ç”¨æšä¸¾è€Œä¸æ˜¯æ•´æ•°æ¥è¡¨è¾¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1111315","ctime":1638053386,"ip_address":"","comment_id":323540,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637980342","product_id":100097301,"comment_content":"ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ„Ÿè§‰å¯ä»¥ç”¨æšä¸¾ç±»å‹æ¥è¡¨ç¤ºæœˆä»½ï¼Œè¿™æ ·switchè¡¨è¾¾å¼æ£€æŸ¥åˆ°æ²¡æœ‰ç©·ä¸¾åˆ°å…¨éƒ¨å€¼<br>","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533980,"discussion_content":"æ˜¯çš„ï¼Œå¦‚æœæœˆä»½çš„APIé‡æ–°è®¾è®¡çš„è¯ï¼Œä¸€å®šæ˜¯ä½¿ç”¨æšä¸¾è€Œä¸æ˜¯æ•´æ•°æ¥è¡¨è¾¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638053386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323495,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1637932676,"is_pvip":false,"replies":[{"id":"117418","content":"â€œç»¼åˆèƒ½åŠ› Go çš„æ›´çµæ´»â€ï¼Œè¯¥æ€ä¹ˆç†è§£ï¼Ÿä»ä½ ç»™å‡ºçš„ä¾‹å­æ²¡æœ‰çœ‹å‡ºæ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1111315","ctime":1637987974,"ip_address":"","comment_id":323495,"utype":1}],"discussion_count":7,"race_medal":0,"score":"1637932676","product_id":100097301,"comment_content":"ä»Šå¤©ã€Šæå®¢æ—¶é—´ã€‹ä¸¤ä¸ªä¸“æ åŒæ—¶æ›´æ–°ï¼Œä¸»é¢˜éƒ½æ˜¯ switch<br><br>- ã€Šæ·±å…¥å‰–æ Java æ–°ç‰¹æ€§ã€‹06 | Switchè¡¨è¾¾å¼ï¼šæ€ä¹ˆç®€åŒ–å¤šæƒ…æ™¯æ“ä½œï¼Ÿ<br>- ã€ŠTony Bai Â· Go è¯­è¨€ç¬¬ä¸€è¯¾ã€‹20ï½œæ§åˆ¶ç»“æ„ï¼šGoä¸­çš„switchè¯­å¥æœ‰å“ªäº›å˜åŒ–ï¼Ÿ<br><br>å¯¹æ¯”ç»“æœ<br><br>- Java17 å±…ç„¶å¯ä»¥æ¯” Go ç®€æ´ï¼<br>- ä½†ç„¶ç»¼åˆèƒ½åŠ› Go çš„æ›´çµæ´»<br><br><br>Java17 switch<br><br>```java<br>String checkWorkday(int day) {<br>\treturn switch (day) {<br>\t\tcase 1, 2, 3, 4, 5 -&gt; &quot;it is a work day&quot;;<br>\t\tcase 6, 7 -&gt; &quot;it is a weekend day&quot;;<br>\t\tdefault -&gt; &quot;are you live on earth&quot;;<br>\t};<br>}<br>```<br><br>Go switch<br><br>```go<br>func checkWorkday(day int) string {<br>\tswitch day {<br>\tcase 1, 2, 3, 4, 5:<br>\t\treturn &quot;it is a work day&quot;<br>\tcase 6, 7:<br>\t\treturn &quot;it is a weekend day&quot;<br>\tdefault:<br>\t\treturn &quot;are you live on earth&quot;<br>\t}<br>}<br>```","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533834,"discussion_content":"â€œç»¼åˆèƒ½åŠ› Go çš„æ›´çµæ´»â€ï¼Œè¯¥æ€ä¹ˆç†è§£ï¼Ÿä»ä½ ç»™å‡ºçš„ä¾‹å­æ²¡æœ‰çœ‹å‡ºæ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637987974,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":4,"child_discussions":[{"author":{"id":1054958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","nickname":"ABC","note":"","ucode":"7501AD9C0C4A70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":533854,"discussion_content":"æˆ‘çš„ç†è§£:ä»–çš„æ„æ€æ˜¯æ¢æˆæ•°å­—æ›´çµæ´»ä¸€äº›?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637994194,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533834,"ip_address":""},"score":533854,"extra":""},{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":534211,"discussion_content":"1ï¼šæ”¯æŒå¤æ‚çš„ç»“æ„ä½“\n2ï¼šæ”¯æŒä¸åŒçš„ç±»å‹\nåŸæ–‡ï¼šhttps://time.geekbang.org/column/article/455912\nè¯¦è§ä»£ç ï¼š\n\nä¾‹1\ntype person struct {\n    name string\n    age  int\n}\n\nfunc main() {\n    p := person{&#34;tom&#34;, 13}\n    switch p {\n    case person{&#34;tony&#34;, 33}:\n        println(&#34;match tony&#34;)\n    case person{&#34;tom&#34;, 13}:\n        println(&#34;match tom&#34;)\n    case person{&#34;lucy&#34;, 23}:\n        println(&#34;match lucy&#34;)\n    default:\n        println(&#34;no match&#34;)\n    }\n}\n\nä¾‹2\nfunc main() {\n    var x interface{} = 13\n    switch v := x.(type) {\n    case nil:\n        println(&#34;v is nil&#34;)\n    case int:\n        println(&#34;the type of v is int, v =&#34;, v)\n    case string:\n        println(&#34;the type of v is string, v =&#34;, v)\n    case bool:\n        println(&#34;the type of v is bool, v =&#34;, v)\n    default:\n        println(&#34;don&#39;t support the type&#34;)\n    }\n}","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638124015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533834,"ip_address":""},"score":534211,"extra":""},{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534214,"discussion_content":"æ˜ç™½äº†ï¼Œæˆ‘ä»¬è¿˜æœ‰ç¬¬ä¸ƒè®²ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638140729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":534211,"ip_address":""},"score":534214,"extra":""}]},{"author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/e24e181e.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533934,"discussion_content":"æˆ‘ä¹ŸåŒæ—¶åœ¨å­¦è¿™ä¸¤é—¨è¯¾ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638025614,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1121758,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","nickname":"aoe","note":"","ucode":"1C6201EDB4E954","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1603004,"avatar":"https://static001.geekbang.org/account/avatar/00/18/75/bc/e24e181e.jpg","nickname":"Calvin","note":"","ucode":"0EEF5B207623B5","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534293,"discussion_content":"çœŸå·§ï¼æˆ‘çŒœä½ ä¹Ÿä¸»è¦å†™Java","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638156446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533934,"ip_address":""},"score":534293,"extra":""}]}]},{"had_liked":false,"id":323483,"user_name":"Jxin","can_delete":false,"product_type":"c1","uid":1251111,"ip_address":"","ucode":"4C03928388C413","user_header":"https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg","comment_is_top":false,"comment_ctime":1637923372,"is_pvip":false,"replies":[{"id":"117395","content":"1. å¦‚æœåå¯¹çš„å£°éŸ³å†å¤šä¸€ç‚¹ï¼Œ è¿™ä¸ªå†’å·çš„è¡¨è¾¾å¼å½¢å¼å¯èƒ½å°±æ²¡äº†ã€‚<br><br>2. éœ€è¦å’Œå†’å·çš„å½¢å¼åŒºåˆ«å¼€æ¥ã€‚<br><br>3. èƒ½å¤Ÿæ”¯æŒæœ‰é™çš„è¡¨è¾¾å¼å•Šã€‚ å†çœ‹çœ‹ä¸‹ä¸€è®²å§ï¼Œ é‡Œè¾¹æœ‰ç›¸å…³çš„è¯é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":"1111315","ctime":1637942415,"ip_address":"","comment_id":323483,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637923372","product_id":100097301,"comment_content":"1.æ—¢ç„¶çŸ¥é“æ˜¯ä¸€ä¸ªå¼Šå¤§äºåˆ©çš„æ–¹æ¡ˆï¼Œä¸ºä½• switchè¡¨è¾¾å¼ è¿˜è¦ä½¿ç”¨ å†’å·æ ‡è¯†ç¬¦ æ¥ä¿ç•™fall-throughçš„æ¨¡å¼ï¼Ÿ switchè¡¨è¾¾å¼ åŒºåˆ«äº  switchè¯­å¥ï¼Œå¯æ²¡æœ‰å…¼å®¹é—®é¢˜ã€‚<br>2.çŒœæµ‹ä½¿ç”¨ -&gt; è€Œä¸æ˜¯ : ã€‚åº”è¯¥æ˜¯ä¸ºäº†åŒºåˆ« switchè¯­å¥ : çš„è¯­ä¹‰ï¼ŒåŒæ—¶å¯¹ç§° Lambda é£æ ¼çš„è¡¨è¾¾æ–¹å¼ã€‚<br>3. switchè¯­å¥ æœ¬èº«å¥½åƒç›´æ¥è¢«å½’ä¸ºåå‘³é“ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼ˆeffé‡Œçœ‹åˆ°çš„è¿˜æ˜¯å“ªï¼Œå¿˜äº†ï¼‰ã€‚å»ºè®®ç›´æ¥ç”¨ ifå«è¯­å¥&#47;mapç­–ç•¥æ¨¡å¼ æ¥æ›¿æ¢ã€‚ switchè¡¨è¾¾å¼ ä»ä½¿ç”¨ä¸Šæ¥çœ‹ï¼Œä¸ªäººè§‰å¾—è¯­ä¹‰ä¸Šæ¯” ifå«è¯­å¥&#47;mapç­–ç•¥æ¨¡å¼éƒ½è¦æ¸…æ™°ï¼Œä½¿ç”¨è¿™ä¸ªå†™æ³•å¯ä»¥æé«˜é˜…è¯»æ•ˆç‡ã€‚å”¯ä¸€å¯æƒœçš„æ˜¯caseåé¢æ— æ³•æ”¯æŒè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®é™…ä½¿ç”¨åœºæ™¯å°±ä¼šå¾ˆå—é™ï¼ˆè¿™ä¸ªé€‚ç”¨èŒƒå›´ä¹Ÿè·Ÿç¼–ç è®¾è®¡èƒ½åŠ›æœ‰å…³ï¼Œè¦ç”¨è¿˜æ˜¯å¯ä»¥ç”¨çš„ï¼Œåªæ˜¯æ²¡æœ‰æ”¯æŒè¡¨è¾¾å¼æ¥çš„ç®€å•æ˜“ç”¨ï¼‰ã€‚<br><br>è¯¾åé¢˜ï¼š<br>1.ä¸èƒ½ï¼Œç¬¬åä¸‰ä¸ªæœˆä¼šè·å–ä¸åˆ°å¤©æ•°ï¼Œè¿™å¥½åƒä¸ç®—æ˜¯ç³»ç»Ÿå´©æºƒï¼Œåªèƒ½è¯´å‡ºbugæ‰çŸ¥é“ã€‚<br>2.åœ¨ DaysInMonth è¿½åŠ ä¸€ä¸ª ä¸€ä¸ª static ä»£ç å—(æ–¹æ³•æœ‰å¾ˆå¤š)ï¼Œæ ¡éªŒæ—¥æœŸæšä¸¾å®ä¾‹æ˜¯å¦è¶…è¿‡12ï¼Œè¶…è¿‡å‘Šè­¦ã€‚ è¿™æ ·è‡³å°‘åœ¨é¡¹ç›®å¯åŠ¨èƒ½æ„ŸçŸ¥åˆ°ã€‚","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533759,"discussion_content":"1. å¦‚æœåå¯¹çš„å£°éŸ³å†å¤šä¸€ç‚¹ï¼Œ è¿™ä¸ªå†’å·çš„è¡¨è¾¾å¼å½¢å¼å¯èƒ½å°±æ²¡äº†ã€‚\n\n2. éœ€è¦å’Œå†’å·çš„å½¢å¼åŒºåˆ«å¼€æ¥ã€‚\n\n3. èƒ½å¤Ÿæ”¯æŒæœ‰é™çš„è¡¨è¾¾å¼å•Šã€‚ å†çœ‹çœ‹ä¸‹ä¸€è®²å§ï¼Œ é‡Œè¾¹æœ‰ç›¸å…³çš„è¯é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637942415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323424,"user_name":"å¤§èƒ–å­å‘€ã€","can_delete":false,"product_type":"c1","uid":1258251,"ip_address":"","ucode":"4BADF8096254BE","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/0b/fd18c8ab.jpg","comment_is_top":false,"comment_ctime":1637896390,"is_pvip":false,"replies":[{"id":"117336","content":"1. å¤šä¸€ä¸ªæœˆæ£€æµ‹åˆ°çš„æ–¹å¼æ˜¯è¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™éœ€è¦æµ‹è¯•ä»£ç çš„é…åˆï¼Œä¸èƒ½ç­‰åˆ°å®é™…è¿è¡Œé˜¶æ®µã€‚å°‘ä¸€ä¸ªæœˆä»½ï¼Œé€šå¸¸è¿™ä¸ªæœˆä»½ï¼Œæ¯”å¦‚FEBRUARYï¼Œå°±ä¼šä»APIé‡Œåˆ é™¤æ‰ï¼Œè¿™æ ·ç¼–è¯‘æ—¶å°±å¯ä»¥æ£€æµ‹å‡ºæ¥äº†ã€‚<br><br>2. ä½ çš„ç–‘é—®å¯ä»¥é€šè¿‡è‡ªå·±è¿›ä¸€æ­¥çš„å‡è®¾è§£å†³ï¼Œä½ å¯ä»¥ä½¿ç”¨30&amp;#47;31&amp;#47;28ï¼Œæˆ–è€…å¦å¤–çš„ä¸€ä¸ªä½ å–œæ¬¢çš„æ•°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1111315","ctime":1637905607,"ip_address":"","comment_id":323424,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637896390","product_id":100097301,"comment_content":"ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œç›®å‰çš„ç¨‹åºå¯ä»¥æ£€æµ‹åˆ°å¤šäº†ä¸€ä¸ªæœˆä»½ï¼Œä¼šé€šè¿‡æœ€åçš„defaultè¯­å¥æŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯æ£€æµ‹ä¸åˆ°å°‘äº†ä¸€ä¸ªæœˆä»½ï¼›<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³ç€æ˜¯å¦å¯ä»¥åœ¨defaultè¡¨è¾¾å¼é‡Œï¼Œé€šè¿‡éå†Calendaræšä¸¾çš„å…ƒç´ ï¼Œå»åŒ¹é…å‡ºCalendar.AFTERDECï¼Œä½†æ˜¯æˆ‘æœ‰ç–‘é—®çš„æ˜¯ï¼šæœˆä»½å¤šå‡ºäº†ä¸€ä¸ªæœˆï¼Œå®ƒçš„å‡ºç°æ˜¯å¦ä¼šå¯¼è‡´å·²æœ‰æœˆä»½çš„è®¡ç®—æ–¹å¼çš„æ”¹å˜ï¼Ÿå®ƒçš„è®¡ç®—æ–¹å¼æ˜¯æŒ‰ç…§31ã€30å¤©ï¼Œè¿˜æ˜¯æŒ‰ç…§2æœˆä»½ï¼Œåˆæˆ–è€…æ˜¯ä¸€ä¸ªå´­æ–°çš„è®¡ç®—æ–¹å¼ï¼Ÿè¿™ä¸€å—æˆ‘ç¡®å®ä¸çŸ¥é“è¯¥å¦‚ä½•åœ¨ä»£ç ä¸­å®ç°ï¼Œæ±‚è€å¸ˆæŒ‡ç‚¹ã€‚","like_count":0,"discussions":[{"author":{"id":1111315,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f5/13/78741b7b.jpg","nickname":"èŒƒå­¦é›·","note":"","ucode":"D7CBE4A33427BD","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533558,"discussion_content":"1. å¤šä¸€ä¸ªæœˆæ£€æµ‹åˆ°çš„æ–¹å¼æ˜¯è¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™éœ€è¦æµ‹è¯•ä»£ç çš„é…åˆï¼Œä¸èƒ½ç­‰åˆ°å®é™…è¿è¡Œé˜¶æ®µã€‚å°‘ä¸€ä¸ªæœˆä»½ï¼Œé€šå¸¸è¿™ä¸ªæœˆä»½ï¼Œæ¯”å¦‚FEBRUARYï¼Œå°±ä¼šä»APIé‡Œåˆ é™¤æ‰ï¼Œè¿™æ ·ç¼–è¯‘æ—¶å°±å¯ä»¥æ£€æµ‹å‡ºæ¥äº†ã€‚\n\n2. ä½ çš„ç–‘é—®å¯ä»¥é€šè¿‡è‡ªå·±è¿›ä¸€æ­¥çš„å‡è®¾è§£å†³ï¼Œä½ å¯ä»¥ä½¿ç”¨30&amp;#47;31&amp;#47;28ï¼Œæˆ–è€…å¦å¤–çš„ä¸€ä¸ªä½ å–œæ¬¢çš„æ•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637905607,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}