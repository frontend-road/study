{"id":64948,"title":"32 | æµ…è°ˆå®¹å™¨ç½‘ç»œ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ç£Šã€‚ä»Šå¤©æˆ‘å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼šæµ…è°ˆå®¹å™¨ç½‘ç»œã€‚</p><p>åœ¨å‰é¢è®²è§£å®¹å™¨åŸºç¡€æ—¶ï¼Œæˆ‘æ›¾ç»æåˆ°è¿‡ä¸€ä¸ªLinuxå®¹å™¨èƒ½çœ‹è§çš„â€œç½‘ç»œæ ˆâ€ï¼Œå®é™…ä¸Šæ˜¯è¢«éš”ç¦»åœ¨å®ƒè‡ªå·±çš„Network Namespaceå½“ä¸­çš„ã€‚</p><p>è€Œæ‰€è°“â€œç½‘ç»œæ ˆâ€ï¼Œå°±åŒ…æ‹¬äº†ï¼šç½‘å¡ï¼ˆNetwork Interfaceï¼‰ã€å›ç¯è®¾å¤‡ï¼ˆLoopback Deviceï¼‰ã€è·¯ç”±è¡¨ï¼ˆRouting Tableï¼‰å’Œiptablesè§„åˆ™ã€‚å¯¹äºä¸€ä¸ªè¿›ç¨‹æ¥è¯´ï¼Œè¿™äº›è¦ç´ ï¼Œå…¶å®å°±æ„æˆäº†å®ƒå‘èµ·å’Œå“åº”ç½‘ç»œè¯·æ±‚çš„åŸºæœ¬ç¯å¢ƒã€‚</p><p>éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œä½œä¸ºä¸€ä¸ªå®¹å™¨ï¼Œå®ƒå¯ä»¥å£°æ˜ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ç½‘ç»œæ ˆï¼ˆâ€“net=hostï¼‰ï¼Œå³ï¼šä¸å¼€å¯Network Namespaceï¼Œæ¯”å¦‚ï¼š</p><pre><code>$ docker run â€“d â€“net=host --name nginx-host nginx\n</code></pre><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå®¹å™¨å¯åŠ¨åï¼Œç›´æ¥ç›‘å¬çš„å°±æ˜¯å®¿ä¸»æœºçš„80ç«¯å£ã€‚</p><p>åƒè¿™æ ·ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œæ ˆçš„æ–¹å¼ï¼Œè™½ç„¶å¯ä»¥ä¸ºå®¹å™¨æä¾›è‰¯å¥½çš„ç½‘ç»œæ€§èƒ½ï¼Œä½†ä¹Ÿä¼šä¸å¯é¿å…åœ°å¼•å…¥å…±äº«ç½‘ç»œèµ„æºçš„é—®é¢˜ï¼Œæ¯”å¦‚ç«¯å£å†²çªã€‚æ‰€ä»¥ï¼Œ<strong>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›å®¹å™¨è¿›ç¨‹èƒ½ä½¿ç”¨è‡ªå·±Network Namespaceé‡Œçš„ç½‘ç»œæ ˆï¼Œå³ï¼šæ‹¥æœ‰å±äºè‡ªå·±çš„IPåœ°å€å’Œç«¯å£ã€‚</strong></p><p>è¿™æ—¶å€™ï¼Œä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é—®é¢˜å°±æ˜¯ï¼š<span class=\"orange\">è¿™ä¸ªè¢«éš”ç¦»çš„å®¹å™¨è¿›ç¨‹ï¼Œè¯¥å¦‚ä½•è·Ÿå…¶ä»–Network Namespaceé‡Œçš„å®¹å™¨è¿›ç¨‹è¿›è¡Œäº¤äº’å‘¢ï¼Ÿ</span></p><!-- [[[read_end]]] --><p>ä¸ºäº†ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œä½ å…¶å®å¯ä»¥æŠŠæ¯ä¸€ä¸ªå®¹å™¨çœ‹åšä¸€å°ä¸»æœºï¼Œå®ƒä»¬éƒ½æœ‰ä¸€å¥—ç‹¬ç«‹çš„â€œç½‘ç»œæ ˆâ€ã€‚</p><p>å¦‚æœä½ æƒ³è¦å®ç°ä¸¤å°ä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œæœ€ç›´æ¥çš„åŠæ³•ï¼Œå°±æ˜¯æŠŠå®ƒä»¬ç”¨ä¸€æ ¹ç½‘çº¿è¿æ¥èµ·æ¥ï¼›è€Œå¦‚æœä½ æƒ³è¦å®ç°å¤šå°ä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œé‚£å°±éœ€è¦ç”¨ç½‘çº¿ï¼ŒæŠŠå®ƒä»¬è¿æ¥åœ¨ä¸€å°äº¤æ¢æœºä¸Šã€‚</p><p>åœ¨Linuxä¸­ï¼Œèƒ½å¤Ÿèµ·åˆ°è™šæ‹Ÿäº¤æ¢æœºä½œç”¨çš„ç½‘ç»œè®¾å¤‡ï¼Œæ˜¯ç½‘æ¡¥ï¼ˆBridgeï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ˆData Linkï¼‰çš„è®¾å¤‡ï¼Œä¸»è¦åŠŸèƒ½æ˜¯æ ¹æ®MACåœ°å€å­¦ä¹ æ¥å°†æ•°æ®åŒ…è½¬å‘åˆ°ç½‘æ¡¥çš„ä¸åŒç«¯å£ï¼ˆPortï¼‰ä¸Šã€‚</p><p>å½“ç„¶ï¼Œè‡³äºä¸ºä»€ä¹ˆè¿™äº›ä¸»æœºä¹‹é—´éœ€è¦MACåœ°å€æ‰èƒ½è¿›è¡Œé€šä¿¡ï¼Œè¿™å°±æ˜¯ç½‘ç»œåˆ†å±‚æ¨¡å‹çš„åŸºç¡€çŸ¥è¯†äº†ã€‚ä¸ç†Ÿæ‚‰è¿™å—å†…å®¹çš„è¯»è€…ï¼Œå¯ä»¥é€šè¿‡<a href=\"https://www.lifewire.com/layers-of-the-osi-model-illustrated-818017\">è¿™ç¯‡æ–‡ç« </a>æ¥å­¦ä¹ ä¸€ä¸‹ã€‚</p><p>è€Œä¸ºäº†å®ç°ä¸Šè¿°ç›®çš„ï¼ŒDockeré¡¹ç›®ä¼šé»˜è®¤åœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåå«docker0çš„ç½‘æ¡¥ï¼Œå‡¡æ˜¯è¿æ¥åœ¨docker0ç½‘æ¡¥ä¸Šçš„å®¹å™¨ï¼Œå°±å¯ä»¥é€šè¿‡å®ƒæ¥è¿›è¡Œé€šä¿¡ã€‚</p><p>å¯æ˜¯ï¼Œæˆ‘ä»¬åˆè¯¥å¦‚ä½•æŠŠè¿™äº›å®¹å™¨â€œè¿æ¥â€åˆ°docker0ç½‘æ¡¥ä¸Šå‘¢ï¼Ÿ</p><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ä¸€ç§åå«<strong>Veth Pair</strong>çš„è™šæ‹Ÿè®¾å¤‡äº†ã€‚</p><p>Veth Pairè®¾å¤‡çš„ç‰¹ç‚¹æ˜¯ï¼šå®ƒè¢«åˆ›å»ºå‡ºæ¥åï¼Œæ€»æ˜¯ä»¥ä¸¤å¼ è™šæ‹Ÿç½‘å¡ï¼ˆVeth Peerï¼‰çš„å½¢å¼æˆå¯¹å‡ºç°çš„ã€‚å¹¶ä¸”ï¼Œä»å…¶ä¸­ä¸€ä¸ªâ€œç½‘å¡â€å‘å‡ºçš„æ•°æ®åŒ…ï¼Œå¯ä»¥ç›´æ¥å‡ºç°åœ¨ä¸å®ƒå¯¹åº”çš„å¦ä¸€å¼ â€œç½‘å¡â€ä¸Šï¼Œå“ªæ€•è¿™ä¸¤ä¸ªâ€œç½‘å¡â€åœ¨ä¸åŒçš„Network Namespaceé‡Œã€‚</p><p>è¿™å°±ä½¿å¾—Veth Pairå¸¸å¸¸è¢«ç”¨ä½œè¿æ¥ä¸åŒNetwork Namespace çš„â€œç½‘çº¿â€ã€‚</p><p>æ¯”å¦‚ï¼Œç°åœ¨æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªå«ä½œnginx-1çš„å®¹å™¨ï¼š</p><pre><code>$ docker run â€“d --name nginx-1 nginx\n</code></pre><p>ç„¶åè¿›å…¥åˆ°è¿™ä¸ªå®¹å™¨ä¸­æŸ¥çœ‹ä¸€ä¸‹å®ƒçš„ç½‘ç»œè®¾å¤‡ï¼š</p><pre><code># åœ¨å®¿ä¸»æœºä¸Š\n$ docker exec -it nginx-1 /bin/bash\n# åœ¨å®¹å™¨é‡Œ\nroot@2b3c181aecf1:/# ifconfig\neth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 172.17.0.2  netmask 255.255.0.0  broadcast 0.0.0.0\n        inet6 fe80::42:acff:fe11:2  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 02:42:ac:11:00:02  txqueuelen 0  (Ethernet)\n        RX packets 364  bytes 8137175 (7.7 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 281  bytes 21161 (20.6 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        \nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        \n$ route\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         172.17.0.1      0.0.0.0         UG    0      0        0 eth0\n172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 eth0\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå®¹å™¨é‡Œæœ‰ä¸€å¼ å«ä½œeth0çš„ç½‘å¡ï¼Œå®ƒæ­£æ˜¯ä¸€ä¸ªVeth Pairè®¾å¤‡åœ¨å®¹å™¨é‡Œçš„è¿™ä¸€ç«¯ã€‚</p><p>é€šè¿‡routeå‘½ä»¤æŸ¥çœ‹nginx-1å®¹å™¨çš„è·¯ç”±è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªeth0ç½‘å¡æ˜¯è¿™ä¸ªå®¹å™¨é‡Œçš„é»˜è®¤è·¯ç”±è®¾å¤‡ï¼›æ‰€æœ‰å¯¹172.17.0.0/16ç½‘æ®µçš„è¯·æ±‚ï¼Œä¹Ÿä¼šè¢«äº¤ç»™eth0æ¥å¤„ç†ï¼ˆç¬¬äºŒæ¡172.17.0.0è·¯ç”±è§„åˆ™ï¼‰ã€‚</p><p>è€Œè¿™ä¸ªVeth Pairè®¾å¤‡çš„å¦ä¸€ç«¯ï¼Œåˆ™åœ¨å®¿ä¸»æœºä¸Šã€‚ä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹å®¿ä¸»æœºçš„ç½‘ç»œè®¾å¤‡çœ‹åˆ°å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code># åœ¨å®¿ä¸»æœºä¸Š\n$ ifconfig\n...\ndocker0   Link encap:Ethernet  HWaddr 02:42:d8:e4:df:c1  \n          inet addr:172.17.0.1  Bcast:0.0.0.0  Mask:255.255.0.0\n          inet6 addr: fe80::42:d8ff:fee4:dfc1/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:309 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:372 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:0 \n          RX bytes:18944 (18.9 KB)  TX bytes:8137789 (8.1 MB)\nveth9c02e56 Link encap:Ethernet  HWaddr 52:81:0b:24:3d:da  \n          inet6 addr: fe80::5081:bff:fe24:3dda/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:288 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:371 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:0 \n          RX bytes:21608 (21.6 KB)  TX bytes:8137719 (8.1 MB)\n          \n$ brctl show\nbridge name bridge id  STP enabled interfaces\ndocker0  8000.0242d8e4dfc1 no  veth9c02e56\n</code></pre><p>é€šè¿‡ifconfigå‘½ä»¤çš„è¾“å‡ºï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œnginx-1å®¹å™¨å¯¹åº”çš„Veth Pairè®¾å¤‡ï¼Œåœ¨å®¿ä¸»æœºä¸Šæ˜¯ä¸€å¼ è™šæ‹Ÿç½‘å¡ã€‚å®ƒçš„åå­—å«ä½œveth9c02e56ã€‚å¹¶ä¸”ï¼Œé€šè¿‡brctl showçš„è¾“å‡ºï¼Œä½ å¯ä»¥çœ‹åˆ°è¿™å¼ ç½‘å¡è¢«â€œæ’â€åœ¨äº†docker0ä¸Šã€‚</p><p>è¿™æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬å†åœ¨è¿™å°å®¿ä¸»æœºä¸Šå¯åŠ¨å¦ä¸€ä¸ªDockerå®¹å™¨ï¼Œæ¯”å¦‚nginx-2ï¼š</p><pre><code>$ docker run â€“d --name nginx-2 nginx\n$ brctl show\nbridge name bridge id  STP enabled interfaces\ndocker0  8000.0242d8e4dfc1 no  veth9c02e56\n       vethb4963f3\n</code></pre><p>ä½ å°±ä¼šå‘ç°ä¸€ä¸ªæ–°çš„ã€åå«vethb4963f3çš„è™šæ‹Ÿç½‘å¡ï¼Œä¹Ÿè¢«â€œæ’â€åœ¨äº†docker0ç½‘æ¡¥ä¸Šã€‚</p><p>è¿™æ—¶å€™ï¼Œå¦‚æœä½ åœ¨nginx-1å®¹å™¨é‡Œpingä¸€ä¸‹nginx-2å®¹å™¨çš„IPåœ°å€ï¼ˆ172.17.0.3ï¼‰ï¼Œå°±ä¼šå‘ç°åŒä¸€å®¿ä¸»æœºä¸Šçš„ä¸¤ä¸ªå®¹å™¨é»˜è®¤å°±æ˜¯ç›¸äº’è¿é€šçš„ã€‚</p><p><span class=\"orange\">è¿™å…¶ä¸­çš„åŸç†å…¶å®éå¸¸ç®€å•ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ã€‚</span></p><p>å½“ä½ åœ¨nginx-1å®¹å™¨é‡Œè®¿é—®nginx-2å®¹å™¨çš„IPåœ°å€ï¼ˆæ¯”å¦‚ping 172.17.0.3ï¼‰çš„æ—¶å€™ï¼Œè¿™ä¸ªç›®çš„IPåœ°å€ä¼šåŒ¹é…åˆ°nginx-1å®¹å™¨é‡Œçš„ç¬¬äºŒæ¡è·¯ç”±è§„åˆ™ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ¡è·¯ç”±è§„åˆ™çš„ç½‘å…³ï¼ˆGatewayï¼‰æ˜¯0.0.0.0ï¼Œè¿™å°±æ„å‘³ç€è¿™æ˜¯ä¸€æ¡ç›´è¿è§„åˆ™ï¼Œå³ï¼šå‡¡æ˜¯åŒ¹é…åˆ°è¿™æ¡è§„åˆ™çš„IPåŒ…ï¼Œåº”è¯¥ç»è¿‡æœ¬æœºçš„eth0ç½‘å¡ï¼Œé€šè¿‡äºŒå±‚ç½‘ç»œç›´æ¥å‘å¾€ç›®çš„ä¸»æœºã€‚</p><p>è€Œè¦é€šè¿‡äºŒå±‚ç½‘ç»œåˆ°è¾¾nginx-2å®¹å™¨ï¼Œå°±éœ€è¦æœ‰172.17.0.3è¿™ä¸ªIPåœ°å€å¯¹åº”çš„MACåœ°å€ã€‚æ‰€ä»¥nginx-1å®¹å™¨çš„ç½‘ç»œåè®®æ ˆï¼Œå°±éœ€è¦é€šè¿‡eth0ç½‘å¡å‘é€ä¸€ä¸ªARPå¹¿æ’­ï¼Œæ¥é€šè¿‡IPåœ°å€æŸ¥æ‰¾å¯¹åº”çš„MACåœ°å€ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šARPï¼ˆAddress Resolution Protocolï¼‰ï¼Œæ˜¯é€šè¿‡ä¸‰å±‚çš„IPåœ°å€æ‰¾åˆ°å¯¹åº”çš„äºŒå±‚MACåœ°å€çš„åè®®ã€‚</p>\n</blockquote><p>æˆ‘ä»¬å‰é¢æåˆ°è¿‡ï¼Œè¿™ä¸ªeth0ç½‘å¡ï¼Œæ˜¯ä¸€ä¸ªVeth Pairï¼Œå®ƒçš„ä¸€ç«¯åœ¨è¿™ä¸ªnginx-1å®¹å™¨çš„Network Namespaceé‡Œï¼Œè€Œå¦ä¸€ç«¯åˆ™ä½äºå®¿ä¸»æœºä¸Šï¼ˆHost Namespaceï¼‰ï¼Œå¹¶ä¸”è¢«â€œæ’â€åœ¨äº†å®¿ä¸»æœºçš„docker0ç½‘æ¡¥ä¸Šã€‚</p><p>ä¸€æ—¦ä¸€å¼ è™šæ‹Ÿç½‘å¡è¢«â€œæ’â€åœ¨ç½‘æ¡¥ä¸Šï¼Œå®ƒå°±ä¼šå˜æˆè¯¥ç½‘æ¡¥çš„â€œä»è®¾å¤‡â€ã€‚ä»è®¾å¤‡ä¼šè¢«â€œå‰¥å¤ºâ€è°ƒç”¨ç½‘ç»œåè®®æ ˆå¤„ç†æ•°æ®åŒ…çš„èµ„æ ¼ï¼Œä»è€Œâ€œé™çº§â€æˆä¸ºç½‘æ¡¥ä¸Šçš„ä¸€ä¸ªç«¯å£ã€‚è€Œè¿™ä¸ªç«¯å£å”¯ä¸€çš„ä½œç”¨ï¼Œå°±æ˜¯æ¥æ”¶æµå…¥çš„æ•°æ®åŒ…ï¼Œç„¶åæŠŠè¿™äº›æ•°æ®åŒ…çš„â€œç”Ÿæ€å¤§æƒâ€ï¼ˆæ¯”å¦‚è½¬å‘æˆ–è€…ä¸¢å¼ƒï¼‰ï¼Œå…¨éƒ¨äº¤ç»™å¯¹åº”çš„ç½‘æ¡¥ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨æ”¶åˆ°è¿™äº›ARPè¯·æ±‚ä¹‹åï¼Œdocker0ç½‘æ¡¥å°±ä¼šæ‰®æ¼”äºŒå±‚äº¤æ¢æœºçš„è§’è‰²ï¼ŒæŠŠARPå¹¿æ’­è½¬å‘åˆ°å…¶ä»–è¢«â€œæ’â€åœ¨docker0ä¸Šçš„è™šæ‹Ÿç½‘å¡ä¸Šã€‚è¿™æ ·ï¼ŒåŒæ ·è¿æ¥åœ¨docker0ä¸Šçš„nginx-2å®¹å™¨çš„ç½‘ç»œåè®®æ ˆå°±ä¼šæ”¶åˆ°è¿™ä¸ªARPè¯·æ±‚ï¼Œä»è€Œå°†172.17.0.3æ‰€å¯¹åº”çš„MACåœ°å€å›å¤ç»™nginx-1å®¹å™¨ã€‚</p><p>æœ‰äº†è¿™ä¸ªç›®çš„MACåœ°å€ï¼Œnginx-1å®¹å™¨çš„eth0ç½‘å¡å°±å¯ä»¥å°†æ•°æ®åŒ…å‘å‡ºå»ã€‚</p><p>è€Œæ ¹æ®Veth Pairè®¾å¤‡çš„åŸç†ï¼Œè¿™ä¸ªæ•°æ®åŒ…ä¼šç«‹åˆ»å‡ºç°åœ¨å®¿ä¸»æœºä¸Šçš„veth9c02e56è™šæ‹Ÿç½‘å¡ä¸Šã€‚ä¸è¿‡ï¼Œæ­¤æ—¶è¿™ä¸ªveth9c02e56ç½‘å¡çš„ç½‘ç»œåè®®æ ˆçš„èµ„æ ¼å·²ç»è¢«â€œå‰¥å¤ºâ€ï¼Œæ‰€ä»¥è¿™ä¸ªæ•°æ®åŒ…å°±ç›´æ¥æµå…¥åˆ°äº†docker0ç½‘æ¡¥é‡Œã€‚</p><p>docker0å¤„ç†è½¬å‘çš„è¿‡ç¨‹ï¼Œåˆ™ç»§ç»­æ‰®æ¼”äºŒå±‚äº¤æ¢æœºçš„è§’è‰²ã€‚æ­¤æ—¶ï¼Œdocker0ç½‘æ¡¥æ ¹æ®æ•°æ®åŒ…çš„ç›®çš„MACåœ°å€ï¼ˆä¹Ÿå°±æ˜¯nginx-2å®¹å™¨çš„MACåœ°å€ï¼‰ï¼Œåœ¨å®ƒçš„CAMè¡¨ï¼ˆå³äº¤æ¢æœºé€šè¿‡MACåœ°å€å­¦ä¹ ç»´æŠ¤çš„ç«¯å£å’ŒMACåœ°å€çš„å¯¹åº”è¡¨ï¼‰é‡ŒæŸ¥åˆ°å¯¹åº”çš„ç«¯å£ï¼ˆPortï¼‰ä¸ºï¼švethb4963f3ï¼Œç„¶åæŠŠæ•°æ®åŒ…å‘å¾€è¿™ä¸ªç«¯å£ã€‚</p><p>è€Œè¿™ä¸ªç«¯å£ï¼Œæ­£æ˜¯nginx-2å®¹å™¨â€œæ’â€åœ¨docker0ç½‘æ¡¥ä¸Šçš„å¦ä¸€å—è™šæ‹Ÿç½‘å¡ï¼Œå½“ç„¶ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªVeth Pairè®¾å¤‡ã€‚è¿™æ ·ï¼Œæ•°æ®åŒ…å°±è¿›å…¥åˆ°äº†nginx-2å®¹å™¨çš„Network Namespaceé‡Œã€‚</p><p>æ‰€ä»¥ï¼Œnginx-2å®¹å™¨çœ‹åˆ°çš„æƒ…å†µæ˜¯ï¼Œå®ƒè‡ªå·±çš„eth0ç½‘å¡ä¸Šå‡ºç°äº†æµå…¥çš„æ•°æ®åŒ…ã€‚è¿™æ ·ï¼Œnginx-2çš„ç½‘ç»œåè®®æ ˆå°±ä¼šå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œæœ€åå°†å“åº”ï¼ˆPongï¼‰è¿”å›åˆ°nginx-1ã€‚</p><p>ä»¥ä¸Šï¼Œå°±æ˜¯åŒä¸€ä¸ªå®¿ä¸»æœºä¸Šçš„ä¸åŒå®¹å™¨é€šè¿‡docker0ç½‘æ¡¥è¿›è¡Œé€šä¿¡çš„æµç¨‹äº†ã€‚æˆ‘æŠŠè¿™ä¸ªæµç¨‹æ€»ç»“æˆäº†ä¸€å¹…ç¤ºæ„å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/e0/66/e0d28e0371f93af619e91a86eda99a66.png?wh=1715*995\" alt=\"\"><br>\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…çš„æ•°æ®ä¼ é€’æ—¶ï¼Œä¸Šè¿°æ•°æ®çš„ä¼ é€’è¿‡ç¨‹åœ¨ç½‘ç»œåè®®æ ˆçš„ä¸åŒå±‚æ¬¡ï¼Œéƒ½æœ‰Linuxå†…æ ¸Netfilterå‚ä¸å…¶ä¸­ã€‚æ‰€ä»¥ï¼Œå¦‚æœæ„Ÿå…´è¶£çš„è¯ï¼Œä½ å¯ä»¥é€šè¿‡æ‰“å¼€iptablesçš„TRACEåŠŸèƒ½æŸ¥çœ‹åˆ°æ•°æ®åŒ…çš„ä¼ è¾“è¿‡ç¨‹ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code># åœ¨å®¿ä¸»æœºä¸Šæ‰§è¡Œ\n$ iptables -t raw -A OUTPUT -p icmp -j TRACE\n$ iptables -t raw -A PREROUTING -p icmp -j TRACE\n</code></pre><p>é€šè¿‡ä¸Šè¿°è®¾ç½®ï¼Œä½ å°±å¯ä»¥åœ¨/var/log/syslogé‡Œçœ‹åˆ°æ•°æ®åŒ…ä¼ è¾“çš„æ—¥å¿—äº†ã€‚è¿™ä¸€éƒ¨åˆ†å†…å®¹ï¼Œä½ å¯ä»¥åœ¨è¯¾åç»“åˆ<a href=\"https://en.wikipedia.org/wiki/Iptables\">iptablesçš„ç›¸å…³çŸ¥è¯†</a>è¿›è¡Œå®è·µï¼Œä»è€ŒéªŒè¯æˆ‘å’Œä½ åˆ†äº«çš„æ•°æ®åŒ…ä¼ é€’æµç¨‹ã€‚</p><p>ç†Ÿæ‚‰äº†docker0ç½‘æ¡¥çš„å·¥ä½œæ–¹å¼ï¼Œä½ å°±å¯ä»¥ç†è§£ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong>è¢«é™åˆ¶åœ¨Network Namespaceé‡Œçš„å®¹å™¨è¿›ç¨‹ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡Veth Pairè®¾å¤‡+å®¿ä¸»æœºç½‘æ¡¥çš„æ–¹å¼ï¼Œå®ç°äº†è·ŸåŒå…¶ä»–å®¹å™¨çš„æ•°æ®äº¤æ¢ã€‚</strong></p><p>ä¸ä¹‹ç±»ä¼¼åœ°ï¼Œå½“ä½ åœ¨ä¸€å°å®¿ä¸»æœºä¸Šï¼Œè®¿é—®è¯¥å®¿ä¸»æœºä¸Šçš„å®¹å™¨çš„IPåœ°å€æ—¶ï¼Œè¿™ä¸ªè¯·æ±‚çš„æ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯å…ˆæ ¹æ®è·¯ç”±è§„åˆ™åˆ°è¾¾docker0ç½‘æ¡¥ï¼Œç„¶åè¢«è½¬å‘åˆ°å¯¹åº”çš„Veth Pairè®¾å¤‡ï¼Œæœ€åå‡ºç°åœ¨å®¹å™¨é‡Œã€‚è¿™ä¸ªè¿‡ç¨‹çš„ç¤ºæ„å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/9f/01/9fb381d1e49318bb6a67bda3f9db6901.png?wh=1715*995\" alt=\"\"><br>\nåŒæ ·åœ°ï¼Œå½“ä¸€ä¸ªå®¹å™¨è¯•å›¾è¿æ¥åˆ°å¦å¤–ä¸€ä¸ªå®¿ä¸»æœºæ—¶ï¼Œæ¯”å¦‚ï¼šping 10.168.0.3ï¼Œå®ƒå‘å‡ºçš„è¯·æ±‚æ•°æ®åŒ…ï¼Œé¦–å…ˆç»è¿‡docker0ç½‘æ¡¥å‡ºç°åœ¨å®¿ä¸»æœºä¸Šã€‚ç„¶åæ ¹æ®å®¿ä¸»æœºçš„è·¯ç”±è¡¨é‡Œçš„ç›´è¿è·¯ç”±è§„åˆ™ï¼ˆ10.168.0.0/24 via eth0)ï¼‰ï¼Œå¯¹10.168.0.3çš„è®¿é—®è¯·æ±‚å°±ä¼šäº¤ç»™å®¿ä¸»æœºçš„eth0å¤„ç†ã€‚</p><p>æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œè¿™ä¸ªæ•°æ®åŒ…å°±ä¼šç»å®¿ä¸»æœºçš„eth0ç½‘å¡è½¬å‘åˆ°å®¿ä¸»æœºç½‘ç»œä¸Šï¼Œæœ€ç»ˆåˆ°è¾¾10.168.0.3å¯¹åº”çš„å®¿ä¸»æœºä¸Šã€‚å½“ç„¶ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„å®ç°è¦æ±‚è¿™ä¸¤å°å®¿ä¸»æœºæœ¬èº«æ˜¯è¿é€šçš„ã€‚è¿™ä¸ªè¿‡ç¨‹çš„ç¤ºæ„å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/90/95/90bd630c0723ea8a1fb7ccd738ad1f95.png?wh=1834*994\" alt=\"\"><br>\næ‰€ä»¥è¯´ï¼Œ<strong>å½“ä½ é‡åˆ°å®¹å™¨è¿ä¸é€šâ€œå¤–ç½‘â€çš„æ—¶å€™ï¼Œä½ éƒ½åº”è¯¥å…ˆè¯•è¯•docker0ç½‘æ¡¥èƒ½ä¸èƒ½pingé€šï¼Œç„¶åæŸ¥çœ‹ä¸€ä¸‹è·Ÿdocker0å’ŒVeth Pairè®¾å¤‡ç›¸å…³çš„iptablesè§„åˆ™æ˜¯ä¸æ˜¯æœ‰å¼‚å¸¸ï¼Œå¾€å¾€å°±èƒ½å¤Ÿæ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆäº†ã€‚</strong></p><p>ä¸è¿‡ï¼Œåœ¨æœ€åä¸€ä¸ªâ€œDockerå®¹å™¨è¿æ¥å…¶ä»–å®¿ä¸»æœºâ€çš„ä¾‹å­é‡Œï¼Œä½ å¯èƒ½å·²ç»è”æƒ³åˆ°äº†è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœåœ¨å¦å¤–ä¸€å°å®¿ä¸»æœºï¼ˆæ¯”å¦‚ï¼š10.168.0.3ï¼‰ä¸Šï¼Œä¹Ÿæœ‰ä¸€ä¸ªDockerå®¹å™¨ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬çš„nginx-1å®¹å™¨åˆè¯¥å¦‚ä½•è®¿é—®å®ƒå‘¢ï¼Ÿ</p><p>è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å°±æ˜¯å®¹å™¨çš„â€œè·¨ä¸»é€šä¿¡â€é—®é¢˜ã€‚</p><p>åœ¨Dockerçš„é»˜è®¤é…ç½®ä¸‹ï¼Œä¸€å°å®¿ä¸»æœºä¸Šçš„docker0ç½‘æ¡¥ï¼Œå’Œå…¶ä»–å®¿ä¸»æœºä¸Šçš„docker0ç½‘æ¡¥ï¼Œæ²¡æœ‰ä»»ä½•å…³è”ï¼Œå®ƒä»¬äº’ç›¸ä¹‹é—´ä¹Ÿæ²¡åŠæ³•è¿é€šã€‚æ‰€ä»¥ï¼Œè¿æ¥åœ¨è¿™äº›ç½‘æ¡¥ä¸Šçš„å®¹å™¨ï¼Œè‡ªç„¶ä¹Ÿæ²¡åŠæ³•è¿›è¡Œé€šä¿¡äº†ã€‚</p><p>ä¸è¿‡ï¼Œä¸‡å˜ä¸ç¦»å…¶å®—ã€‚</p><p>å¦‚æœæˆ‘ä»¬é€šè¿‡è½¯ä»¶çš„æ–¹å¼ï¼Œåˆ›å»ºä¸€ä¸ªæ•´ä¸ªé›†ç¾¤â€œå…¬ç”¨â€çš„ç½‘æ¡¥ï¼Œç„¶åæŠŠé›†ç¾¤é‡Œçš„æ‰€æœ‰å®¹å™¨éƒ½è¿æ¥åˆ°è¿™ä¸ªç½‘æ¡¥ä¸Šï¼Œä¸å°±å¯ä»¥ç›¸äº’é€šä¿¡äº†å—ï¼Ÿ</p><p>è¯´å¾—æ²¡é”™ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬æ•´ä¸ªé›†ç¾¤é‡Œçš„å®¹å™¨ç½‘ç»œå°±ä¼šç±»ä¼¼äºä¸‹å›¾æ‰€ç¤ºçš„æ ·å­ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/b4/3d/b4387a992352109398a66d1dbe6e413d.png?wh=1828*721\" alt=\"\"><br>\nå¯ä»¥çœ‹åˆ°ï¼Œæ„å»ºè¿™ç§å®¹å™¨ç½‘ç»œçš„æ ¸å¿ƒåœ¨äºï¼šæˆ‘ä»¬éœ€è¦åœ¨å·²æœ‰çš„å®¿ä¸»æœºç½‘ç»œä¸Šï¼Œå†é€šè¿‡è½¯ä»¶æ„å»ºä¸€ä¸ªè¦†ç›–åœ¨å·²æœ‰å®¿ä¸»æœºç½‘ç»œä¹‹ä¸Šçš„ã€å¯ä»¥æŠŠæ‰€æœ‰å®¹å™¨è¿é€šåœ¨ä¸€èµ·çš„è™šæ‹Ÿç½‘ç»œã€‚æ‰€ä»¥ï¼Œè¿™ç§æŠ€æœ¯å°±è¢«ç§°ä¸ºï¼šOverlay Networkï¼ˆè¦†ç›–ç½‘ç»œï¼‰ã€‚</p><p>è€Œè¿™ä¸ªOverlay Networkæœ¬èº«ï¼Œå¯ä»¥ç”±æ¯å°å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªâ€œç‰¹æ®Šç½‘æ¡¥â€å…±åŒç»„æˆã€‚æ¯”å¦‚ï¼Œå½“Node 1ä¸Šçš„Container 1è¦è®¿é—®Node 2ä¸Šçš„Container 3çš„æ—¶å€™ï¼ŒNode 1ä¸Šçš„â€œç‰¹æ®Šç½‘æ¡¥â€åœ¨æ”¶åˆ°æ•°æ®åŒ…ä¹‹åï¼Œèƒ½å¤Ÿé€šè¿‡æŸç§æ–¹å¼ï¼ŒæŠŠæ•°æ®åŒ…å‘é€åˆ°æ­£ç¡®çš„å®¿ä¸»æœºï¼Œæ¯”å¦‚Node 2ä¸Šã€‚è€ŒNode 2ä¸Šçš„â€œç‰¹æ®Šç½‘æ¡¥â€åœ¨æ”¶åˆ°æ•°æ®åŒ…åï¼Œä¹Ÿèƒ½å¤Ÿé€šè¿‡æŸç§æ–¹å¼ï¼ŒæŠŠæ•°æ®åŒ…è½¬å‘ç»™æ­£ç¡®çš„å®¹å™¨ï¼Œæ¯”å¦‚Container 3ã€‚</p><p>ç”šè‡³ï¼Œæ¯å°å®¿ä¸»æœºä¸Šï¼Œéƒ½ä¸éœ€è¦æœ‰ä¸€ä¸ªè¿™ç§ç‰¹æ®Šçš„ç½‘æ¡¥ï¼Œè€Œä»…ä»…é€šè¿‡æŸç§æ–¹å¼é…ç½®å®¿ä¸»æœºçš„è·¯ç”±è¡¨ï¼Œå°±èƒ½å¤ŸæŠŠæ•°æ®åŒ…è½¬å‘åˆ°æ­£ç¡®çš„å®¿ä¸»æœºä¸Šã€‚è¿™äº›å†…å®¹ï¼Œæˆ‘åœ¨åé¢çš„æ–‡ç« ä¸­ä¼šä¸ºä½ ä¸€ä¸€è®²è¿°ã€‚</p><h2>æ€»ç»“</h2><p>åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸»è¦ä¸ºä½ ä»‹ç»äº†åœ¨æœ¬åœ°ç¯å¢ƒä¸‹ï¼Œå•æœºå®¹å™¨ç½‘ç»œçš„å®ç°åŸç†å’Œdocker0ç½‘æ¡¥çš„ä½œç”¨ã€‚</p><p>è¿™é‡Œçš„å…³é”®åœ¨äºï¼Œå®¹å™¨è¦æƒ³è·Ÿå¤–ç•Œè¿›è¡Œé€šä¿¡ï¼Œå®ƒå‘å‡ºçš„IPåŒ…å°±å¿…é¡»ä»å®ƒçš„Network Namespaceé‡Œå‡ºæ¥ï¼Œæ¥åˆ°å®¿ä¸»æœºä¸Šã€‚</p><p>è€Œè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•å°±æ˜¯ï¼šä¸ºå®¹å™¨åˆ›å»ºä¸€ä¸ªä¸€ç«¯åœ¨å®¹å™¨é‡Œå……å½“é»˜è®¤ç½‘å¡ã€å¦ä¸€ç«¯åœ¨å®¿ä¸»æœºä¸Šçš„Veth Pairè®¾å¤‡ã€‚</p><p>ä¸Šè¿°å•æœºå®¹å™¨ç½‘ç»œçš„çŸ¥è¯†ï¼Œæ˜¯åé¢æˆ‘ä»¬è®²è§£å¤šæœºå®¹å™¨ç½‘ç»œçš„é‡è¦åŸºç¡€ï¼Œè¯·åŠ¡å¿…è®¤çœŸæ¶ˆåŒ–ç†è§£ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å°½ç®¡å®¹å™¨çš„Host Networkæ¨¡å¼æœ‰ä¸€äº›ç¼ºç‚¹ï¼Œä½†æ˜¯å®ƒæ€§èƒ½å¥½ã€é…ç½®ç®€å•ï¼Œå¹¶ä¸”æ˜“äºè°ƒè¯•ï¼Œæ‰€ä»¥å¾ˆå¤šå›¢é˜Ÿä¼šç›´æ¥ä½¿ç”¨Host Networkã€‚é‚£ä¹ˆï¼Œå¦‚æœè¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å®¹å™¨çš„Host Networkæ¨¡å¼ï¼Œä½ è§‰å¾—éœ€è¦åšå“ªäº›é¢å¤–çš„å‡†å¤‡å·¥ä½œå‘¢ï¼Ÿ</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ ç»™æˆ‘ç•™è¨€ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","neighbors":{"left":{"article_title":"31 | å®¹å™¨å­˜å‚¨å®è·µï¼šCSIæ’ä»¶ç¼–å†™æŒ‡å—","id":64392},"right":{"article_title":"33 | æ·±å…¥è§£æå®¹å™¨è·¨ä¸»æœºç½‘ç»œ","id":65287}},"comments":[{"had_liked":false,"id":37956,"user_name":"blackpiglet","can_delete":false,"product_type":"c1","uid":1032928,"ip_address":"","ucode":"58AA8329C91767","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/e0/7188aa0a.jpg","comment_is_top":false,"comment_ctime":1541825350,"is_pvip":false,"discussion_count":11,"race_medal":0,"score":"903484957510","product_id":100015201,"comment_content":"çœ‹åˆ°æœ‰ä½åŒå­¦é—®æ€ä¹ˆæ‰¾ docker å’Œ å®¿ä¸»æœºä¸Š veth è®¾å¤‡çš„å…³ç³»ï¼Œå­¦å®Œåæˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ï¼ŒæŸ¥äº†ä¸€ä¸‹ï¼Œç»“è®ºæ˜¯æ²¡æœ‰å‘½ä»¤å¯ä»¥ç›´æ¥æŸ¥åˆ°ã€‚ä½†æ˜¯å¯ä»¥æŸ¥çœ‹ container é‡Œçš„ eth0 ç½‘å¡çš„ iflink æ‰¾åˆ°å¯¹åº”å…³ç³»ã€‚<br># å®¿ä¸»æœºä¸Š<br>$ ip link <br>......<br>9: veth0e9cd8d@if8: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP mode DEFAULT group default <br>    link&#47;ether 6a:fb:59:e5:7e:da brd ff:ff:ff:ff:ff:ff link-netnsid 1<br><br># å®¹å™¨å†…<br>$ sudo docker exec -it e151 bash<br>root@e1517e9d9e1a:&#47;# cat &#47;sys&#47;class&#47;net&#47;eth0&#47;iflink <br>9<br><br>è¿™æ ·å°±å¯ä»¥ç¡®å®š container e1517e9d9e1a åœ¨ç‰©ç†æœºä¸Šå¯¹åº”çš„ veth pair æ˜¯ veth0e9cd8d äº†ã€‚<br><br>è¿™ç§æ–¹å¼éœ€è¦ç™»å½•åˆ° docker é‡Œæ‰§è¡Œå‘½ä»¤ï¼Œä¸æ˜¯æ‰€æœ‰çš„å®¹å™¨éƒ½èƒ½è¿™ä¹ˆåšï¼Œä¸è¿‡ github ä¸Šæœ‰äººä¸“é—¨åšäº†ä¸ªè„šæœ¬æ¥ç”¨å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ï¼š<br>https:&#47;&#47;github.com&#47;micahculpepper&#47;dockerveth","like_count":211,"discussions":[{"author":{"id":1493414,"avatar":"https://static001.geekbang.org/account/avatar/00/16/c9/a6/e26048f8.jpg","nickname":"æ™“ä¸¹ğŸ¤’","note":"","ucode":"432BA150343E6B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542904,"discussion_content":"å®¹å™¨å†…æ‰§è¡Œ ethtool -S eth0 | grep peer_ifindex, å¯ä»¥çœ‹åˆ°å¯¹ç«¯åºåˆ—å·ï¼Œç„¶åå®¿ä¸»æœºä¸Š ip link | grep é‚£ä¸ªåºåˆ—å·ä¹Ÿå¯ä»¥æ‰¾åˆ°","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1640877984,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1793475,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/5d/c3/69019d24.jpg","nickname":"æ±Ÿä¸œ","note":"","ucode":"391A62BC7039B3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563044,"discussion_content":"å¯ç”¨ã€ç¦ç”¨æ¥å£\n  ip link set device down   ç¦ç”¨æŒ‡å®šæ¥å£\n  ip link set device up    å¯ç”¨æŒ‡å®šæ¥å£\n\n  æ¯”å¦‚ç¦ç”¨eth0å°±æ˜¯ip link set eth0 down\n (ifconfig æŸ¥çœ‹æ¥å£)","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1649928348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476242,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoH0yFsw11puZt1kX9aNDicW5REJljurmD9MBWo9h0mFibNjdzWtEZZhMZErBSvAg8co8NM3Jib0oqrA/132","nickname":"Geek_e0cb26","note":"","ucode":"68E20693D2EE95","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588744,"discussion_content":"ç›´æ¥ç”¨ip addrçœ‹å¾—æ›´æ¸…æ¥š,,\napt-get update &amp;&amp; apt-get install iproute2\n$ ip addr\n351: eth0@if352: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default\n    link/ether 02:42:ac:1d:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 172.29.0.2/16 brd 172.29.255.255 scope global eth0\n       valid_lft forever preferred_lft forever\nå…³äºç½‘æ¡¥ç½‘ç»œ, çœ‹åˆ°ä¸€ç¯‡ä¸é”™çš„æ–‡ç« : \nhttps://mp.weixin.qq.com/s?__biz=MzIwODI1ODI0Mw==&amp;mid=2651298967&amp;idx=1&amp;sn=74e45187c6b6dfe8dbf831a41f3d0dd5&amp;chksm=8cf6e93bbb81602dd3587232e767e32e7accff835cd872955003f72cfee38e6b804798df53c1&amp;token=1359849894&amp;lang=zh_CN#rd","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664069330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"å›¢","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542899,"discussion_content":"ç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640876970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384773,"discussion_content":"ä¸ºå•¥å®¿ä¸»æœºå™¨çš„ifindexç¼–å·è¦æ¯”å®¹å™¨é‡Œé¢çš„å°1ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626746900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1122150,"avatar":"https://static001.geekbang.org/account/avatar/00/11/1f/66/59e0647a.jpg","nickname":"ä¸‡å†åäº”å¹´","note":"","ucode":"3D8CF5DF847AE8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371122,"discussion_content":"èµï¼Œéå¸¸å¥½ç”¨çš„æ–¹æ³•ğŸ‘\næŸ¥çœ‹ container é‡Œçš„ eth0 ç½‘å¡çš„ iflink æ‰¾åˆ°å¯¹åº”å…³ç³»ã€‚\n# å®¿ä¸»æœºä¸Š\n$ ip linkÂ \n......\n9: veth0e9cd8d@if8: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master docker0 state UP mode DEFAULT group defaultÂ \nÂ Â Â Â link/ether 6a:fb:59:e5:7e:da brd ff:ff:ff:ff:ff:ff link-netnsid 1\n\n# å®¹å™¨å†…\n$ sudo docker exec -it e151 bash\nroot@e1517e9d9e1a:/# cat /sys/class/net/eth0/iflinkÂ \n9\n\nè¿™æ ·å°±å¯ä»¥ç¡®å®š container e1517e9d9e1a åœ¨ç‰©ç†æœºä¸Šå¯¹åº”çš„ veth pair æ˜¯ veth0e9cd8d äº†ã€‚\n\nè¿™ç§æ–¹å¼éœ€è¦ç™»å½•åˆ° docker é‡Œæ‰§è¡Œå‘½ä»¤ï¼Œä¸æ˜¯æ‰€æœ‰çš„å®¹å™¨éƒ½èƒ½è¿™ä¹ˆåšï¼Œä¸è¿‡ github ä¸Šæœ‰äººä¸“é—¨åšäº†ä¸ªè„šæœ¬æ¥ç”¨å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ï¼š\nhttps://github.com/micahculpepper/dockerveth","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619658569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1090196,"avatar":"https://static001.geekbang.org/account/avatar/00/10/a2/94/ae0a60d8.jpg","nickname":"æ±Ÿå±±æœª","note":"","ucode":"5293DD9482717F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309848,"discussion_content":"mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601461326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2043157,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/2d/15/efa5f9f7.jpg","nickname":"æ¼‚æµç“¶","note":"","ucode":"42F8B4724D1C53","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":288214,"discussion_content":"æ„Ÿè°¢è¿™ä½åŒå­¦è§£æƒ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593680131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1484283,"avatar":"https://static001.geekbang.org/account/avatar/00/16/a5/fb/e78299a6.jpg","nickname":"szh","note":"","ucode":"6DFDF4883AB576","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":233633,"discussion_content":"è¿™ä¸ªå¾ˆå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586935747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1205253,"avatar":"https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg","nickname":"æˆ‘æ¥ä¹Ÿ","note":"","ucode":"773D6104F56767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":228919,"discussion_content":"å“ˆå“ˆ,å¤ä¹ çš„æ—¶å€™æŒ‰ç€ä½ çš„è¯´æ˜å®æ“äº†ä¸‹,ç¡®å®ä¸é”™!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586590065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":114224,"discussion_content":"ç‰›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577964357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":38121,"user_name":"Jianwen Ji","can_delete":false,"product_type":"c1","uid":1027028,"ip_address":"","ucode":"20A8AC1AA8A8E9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erHaczgBsEF7zqCj8Hlq2vtYh0M6Jj3pia66ZW0O4fFvNldbkHYX6d8B0fBHwicxAcMMRmcNzPrJLMA/132","comment_is_top":false,"comment_ctime":1541946334,"is_pvip":false,"discussion_count":7,"race_medal":0,"score":"242060114910","product_id":100015201,"comment_content":"å½“ä¸€ä¸ªå®¹å™¨è¯•å›¾è¿æ¥åˆ°å¦å¤–ä¸€ä¸ªå®¿ä¸»æœºæ—¶ï¼Œæ¯”å¦‚ï¼šping 10.168.0.3ï¼Œå®ƒå‘å‡ºçš„è¯·æ±‚æ•°æ®åŒ…ï¼Œé¦–å…ˆç»è¿‡ docker0 ç½‘æ¡¥å‡ºç°åœ¨å®¿ä¸»æœºä¸Šã€‚å®¿ä¸»æœºå†æŠŠè¿™ä¸ªpingåŒ…å‘é€å‡ºå»ä¹‹å‰ä¼šåšæºnatè½¬æ¢ï¼ŒæŠŠæºipæ”¹æˆå®¿ä¸»æœºçš„ipã€‚å¤§å®¶å¯ä»¥åˆ†åˆ«åœ¨docker0å’Œå®¿ä¸»æœºçš„çœŸå®ç½‘å¡ä¸Štcpdump æŠ“åŒ…çœ‹ä¸€ä¸‹ã€‚åœ¨å®¿ä¸»æœºç”¨iptables -L -t natå°±èƒ½çœ‹åˆ°ç›¸åº”çš„è§„åˆ™ã€‚","like_count":56,"discussions":[{"author":{"id":1201777,"avatar":"https://static001.geekbang.org/account/avatar/00/12/56/71/fb2d9923.jpg","nickname":"Kerwin","note":"","ucode":"082382EFB0A1A2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":44981,"discussion_content":"ä¸æ”¹çš„è¯ï¼Œç›®çš„å®¿ä¸»æœºä¸ä¼šè®¤è¯†å®¹å™¨çš„ipï¼Œå°±æ— æ³•é€šä¿¡äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572998328,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544761,"discussion_content":"çš„ç¡®éœ€è¦æŠŠæºåœ°å€è½¬æ¢ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641700004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"å›¢","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542900,"discussion_content":"ç¡®å®è¿™ä¸€ç‚¹åœ¨æ•°æ®æµè½¬è¿‡ç¨‹ä¸­æ¯”è¾ƒé‡è¦ï¼Œä¼°è®¡ä½œè€…å¿˜è®°æäº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640877178,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057843,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","nickname":"é˜¿ç”˜","note":"","ucode":"BC93175B70E05D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540487,"discussion_content":"èµï¼Œæˆ‘è§‰å¾—è¿™ä¸ªå…³é”®ç‚¹ä½œè€…æ²¡æœ‰æåˆ°å®åœ¨ä¸åº”è¯¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640067896,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2054990,"avatar":"","nickname":"æµ·æŸ”å„¿ç¨€ç½•","note":"","ucode":"CBEEBEA2CAE8A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290426,"discussion_content":"ç¡®å®æ˜¯çœ‹åˆ°äº†ä¸å¤–éƒ¨äº’é€šè¿›è¡Œäº†SNATå¯ä»¥é€šè¿‡æŠ“åŒ…çœ‹åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594468363,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1131907,"avatar":"https://static001.geekbang.org/account/avatar/00/11/45/83/93d389ba.jpg","nickname":"æˆ‘æ˜¯è°","note":"","ucode":"AE3996142811F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":264860,"discussion_content":"iptablesæ²¡æœ‰çœ‹åˆ°æºåœ°å€è½¬æ¢çš„è§„åˆ™å•Šï¼Œæ˜¯é iptablesåšçš„æºåœ°å€è½¬æ¢å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589353417,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2550335,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eor3yhoBAvuFPgibmLwRTtbFDvSyt9icTdco5fctGa31jVWWgYA8uKrAT2fEO0q3bep7HjtkiaTWHAiaA/132","nickname":"yxyjw999","note":"","ucode":"A4A3C810C8384E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1131907,"avatar":"https://static001.geekbang.org/account/avatar/00/11/45/83/93d389ba.jpg","nickname":"æˆ‘æ˜¯è°","note":"","ucode":"AE3996142811F4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384456,"discussion_content":"é€šè¿‡MASQUERADEè¿›è¡ŒåŸåœ°å€ä¼ªè£…","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1626599914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":264860,"ip_address":""},"score":384456,"extra":""}]}]},{"had_liked":false,"id":36846,"user_name":"pytimer","can_delete":false,"product_type":"c1","uid":1014666,"ip_address":"","ucode":"A0038F6CB1F9AC","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ercmNryEicqDS73icpUu7W0BnZ7ZIia6jR7kdVMIzH0q1d7L8EKAYWeTJcribibGcHnJzpsjRFxAe26egQ/132","comment_is_top":false,"comment_ctime":1541376259,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"207699806467","product_id":100015201,"comment_content":"ä½¿ç”¨hostç½‘ç»œçš„è¯ï¼Œåº”è¯¥è¦æå‰è§„åˆ’å¥½æ¯ä¸ªæœåŠ¡åº”è¯¥ä½¿ç”¨çš„ç«¯å£å§","like_count":48,"discussions":[{"author":{"id":1019036,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8c/9c/d48473ab.jpg","nickname":"dancer","note":"","ucode":"B8D5641A3AC490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":206334,"discussion_content":"è®²çš„çœŸå¥½ï¼ä¹‹å‰ä¸€ç›´ä¸ç†è§£ä¸ºä»€ä¹ˆç½‘æ¡¥ä¸Šçš„vethæ”¶åˆ°äº†äº†æ•°æ®ï¼Œå°±èƒ½æŠŠå®ƒè½¬å‘åˆ°åˆ«çš„å®¹å™¨ï¼ŒåŸæ¥æ˜¯è¿™ä¸ªvethè¢«ç½‘æ¡¥é™çº§æˆäº†ä¸€ä¸ªç«¯å£","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584382062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58093,"user_name":"ç¨‹ç©ºä¸‡é‡Œ","can_delete":false,"product_type":"c1","uid":1218737,"ip_address":"","ucode":"EAF054AE7D1AC7","user_header":"https://static001.geekbang.org/account/avatar/00/12/98/b1/73268f62.jpg","comment_is_top":false,"comment_ctime":1546996184,"is_pvip":false,"replies":[{"id":"20977","content":"é‚£å°±å¤šç•™è¨€å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1547019276,"ip_address":"","comment_id":58093,"utype":1}],"discussion_count":1,"race_medal":0,"score":"138985949656","product_id":100015201,"comment_content":"å¼ è€å¸ˆå¯¹ç½‘ç»œçš„è®²è§£å®åœ¨æ˜¯å¤ªæ£’äº†ï¼Œæ£’åœ¨å¹¶ä¸ä½¿ç”¨é«˜æ·±çš„ç½‘ç»œè¯è¯­ï¼Œé‚£äº›é«˜æ·±çš„ç½‘ç»œè¯è¯­è®©äººä¸çŸ¥æ‰€è¿°ï¼Œå¤´æ™•è½¬å‘çš„ï¼Œè€Œæ˜¯ç”¨æœ€ç›´ç™½çš„è®²è¯å¼åŠ ä¸Šé…å›¾æ¥è®²è§£ï¼Œä¸€çœ‹å°±æ‡‚ï¼Œå¤ªå–œæ¬¢äº†ï¼å°‘ç•™è¨€çš„æˆ‘ï¼Œéƒ½å¿ä¸ä½å†™ç•™è¨€ï¼","like_count":33,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435901,"discussion_content":"é‚£å°±å¤šç•™è¨€å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547019276,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":38328,"user_name":"kissingers","can_delete":false,"product_type":"c1","uid":1135299,"ip_address":"","ucode":"615151808CF628","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKzqiaZnBw2myRWY802u48Rw3W2zDtKoFQ6vN63m4FdyjibM21FfaOYe8MbMpemUdxXJeQH6fRdVbZA/132","comment_is_top":false,"comment_ctime":1542021971,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"108916204371","product_id":100015201,"comment_content":"æŸ¥çœ‹veth å¯¹ç«¯æ¥å£è¿˜æœ‰ä¸€ä¸ªåŠæ³•ï¼šç”¨ ethtool -S &lt;NIC&gt;ï¼Œè¾“å‡ºç»“æœæœ‰ä¸€é¡¹peer_inindexï¼Œå†åœ¨host ä¸Šç”¨ip link showï¼Œå¯ä»¥å¯¹åº”åˆ°ã€‚","like_count":25,"discussions":[{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"å›¢","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542925,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640881289,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130611,"user_name":"Brave Shine","can_delete":false,"product_type":"c1","uid":1222003,"ip_address":"","ucode":"CBB1BAF89DB936","user_header":"https://static001.geekbang.org/account/avatar/00/12/a5/73/3ddc7c77.jpg","comment_is_top":false,"comment_ctime":1567494086,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"70286970822","product_id":100015201,"comment_content":"ã€ç®€åŒ–ç‰ˆã€‘<br>æ‰¾ docker å’Œ å®¿ä¸»æœºä¸Š veth è®¾å¤‡çš„å…³ç³»<br>-  å®¹å™¨<br>ip netns exec netns1(network namespaces) ethool -S veth1 <br>æ‰¾åˆ°è¿™ä¸ªå­—æ®µï¼š<br>NIC statisticsï¼š<br>  peer_ifindex: 5(åºåˆ—å·)<br><br>-  å®¿ä¸»æœº<br>ip netns exec netns2 ip link | grep 5 &lt;- åºåˆ—å·<br><br>ç»“æœï¼šveth0","like_count":16},{"had_liked":false,"id":36850,"user_name":"Acter","can_delete":false,"product_type":"c1","uid":1082561,"ip_address":"","ucode":"EF747BEAD2A797","user_header":"https://static001.geekbang.org/account/avatar/00/10/84/c1/dfcad82a.jpg","comment_is_top":false,"comment_ctime":1541376677,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"61670918821","product_id":100015201,"comment_content":"è¯·é—®è€å¸ˆï¼šdocker0ç½‘æ¡¥å’Œæ™®é€šçš„linuxç½‘æ¡¥åœ¨å®ç°ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ","like_count":14},{"had_liked":false,"id":258383,"user_name":"ch_ort","can_delete":false,"product_type":"c1","uid":1580926,"ip_address":"","ucode":"B79746E687F29E","user_header":"","comment_is_top":false,"comment_ctime":1604404758,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"53144012310","product_id":100015201,"comment_content":"å®¹å™¨ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œæ ˆçš„æ–¹å¼ï¼Œè™½ç„¶ç®€å•ä¸”èƒ½æä¾›æ¯”è¾ƒå¥½çš„ç½‘ç»œæ€§èƒ½ï¼Œä½†æ˜¯ä¸å¯é¿å…åœ°å¼•å…¥äº†å…±äº«ç½‘ç»œèµ„æºçš„é—®é¢˜ï¼Œæ¯”å¦‚ç«¯å£å†²çªã€‚<br><br>å®¹å™¨ä½¿ç”¨Network Namespaceè¿›è¡Œéš”ç¦»å¯ä»¥é¿å…å…±äº«ç½‘ç»œèµ„æºçš„é—®é¢˜ï¼Œä½†è¯¥å¦‚ä½•å’Œå…¶ä»–å®¹å™¨è¿›ç¨‹äº¤äº’ï¼Ÿ  <br>-&gt; è”ç³»åˆ°å¤šå°ç‰©ç†æœºçš„äº¤äº’æ˜¯é€šè¿‡ç½‘çº¿ï¼Œå…±åŒè¿æ¥åˆ°ä¸€ä¸ªäº¤æ¢æœºæ¥å®ç°ç‰©ç†æœºçš„ç›¸äº’è¿é€šã€‚ <br>-&gt; åˆ°äº†å®¹å™¨ï¼Œä¹Ÿæœ‰ä¸€ä¸ªç±»ä¼¼äº¤æ¢æœºçš„è™šæ‹Ÿäº¤æ¢æœºè®¾å¤‡ï¼Œç½‘æ¡¥ï¼ˆBridgeï¼‰ï¼Œå‡¡æ˜¯è¿æ¥åˆ°è¿™ä¸ªç½‘æ¡¥ä¸Šçš„å®¹å™¨è¿›ç¨‹ï¼Œéƒ½å¯ä»¥é€šè¿‡å®ƒæ¥ç›¸äº’é€šä¿¡ <br>-&gt;  ç°åœ¨å®¹å™¨æœ‰äº†è™šæ‹Ÿçš„äº¤æ¢æœºäº†ï¼Œä½†æ˜¯å®¹å™¨è¿æ¥åˆ°â€œäº¤æ¢æœºâ€ä¸Šçš„â€œç½‘çº¿â€å‘¢ï¼Ÿ  é€šè¿‡ Veth Pairæ¥å……å½“ç½‘çº¿çš„åŠŸèƒ½ï¼Œå®ƒè¢«åˆ›å»ºå‡ºæ¥åï¼Œæ€»æ˜¯ä»¥ä¸¤å¼ è™šæ‹Ÿç½‘å¡ï¼ˆVeth Peerï¼‰çš„å½¢å¼æˆå¯¹å‡ºç°ï¼Œä½œä¸ºç½‘çº¿çš„ä¸¤ç«¯ã€‚<br>-&gt; å› æ­¤ï¼š åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¢«é™åˆ¶åœ¨Network Namespaceé‡Œçš„å®¹å™¨è¿›ç¨‹å®é™…ä¸Šæ˜¯é€šè¿‡Veth Pariè®¾å¤‡+å®¿ä¸»æœºç½‘æ¡¥çš„æ–¹å¼ï¼Œå®ç°äº†è·Ÿå…¶ä»–å®¹å™¨çš„æ•°æ®äº¤æ¢<br><br>ç°åœ¨è§£å†³äº†å®¹å™¨å’ŒåŒä¸€ä¸ªå®¿ä¸»æœºä¸‹å…¶ä»–å®¹å™¨äº¤äº’çš„é—®é¢˜äº†ï¼Œé‚£ä¹ˆå¦‚æœå®¹å™¨æƒ³è¦å’Œå…¶ä»–å®¿ä¸»æœºä¸Šçš„å®¹å™¨äº¤äº’ï¼Œè¦å¦‚ä½•å®ç°ï¼Ÿ<br>-&gt; ç­”æ¡ˆå’Œå•ä¸ªå®¿ä¸»æœºä¸Šå®¹å™¨äº’è®¿ç›¸ä¼¼ï¼Œæˆ‘ä»¬ç”¨è½¯ä»¶æˆ–åº”å°†çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªæ•´ä¸ªé›†ç¾¤â€œå…¬ç”¨â€çš„ç½‘æ¡¥ï¼Œç„¶åæŠŠé›†ç¾¤é‡Œæ‰€æœ‰å®¹å™¨éƒ½è¿æ¥åˆ°è¿™ä¸ªç½‘æ¡¥ä¸Š<br><br>-&gt; æ„å»ºè¿™ç§å®¹å™¨ç½‘ç»œçš„æ ¸å¿ƒåœ¨äºéœ€è¦åœ¨å·²æœ‰çš„å®¿ä¸»æœºç½‘ç»œä¸Šï¼Œå†é€šè¿‡è½¯ä»¶æ„ä»¶ä¸€ä¸ªè¦†ç›–åœ¨å·²æœ‰å®¿ä¸»æœºç½‘ç»œä¹‹ä¸Šçš„ã€å¯ä»¥æŠŠæ‰€æœ‰å®¹å™¨è¿æ¥åœ¨ä¸€èµ·çš„è™šæ‹Ÿç½‘ç»œã€‚æ‰€ä»¥ï¼Œè¿™ç§æŠ€æœ¯å°±è¢«ç§°ä¸ºï¼šOverlay Networkï¼ˆè¦†ç›–ç½‘ç»œï¼‰ã€‚<br>","like_count":12},{"had_liked":false,"id":37047,"user_name":"loda","can_delete":false,"product_type":"c1","uid":1043287,"ip_address":"","ucode":"3F9575DBFA1031","user_header":"https://static001.geekbang.org/account/avatar/00/0f/eb/57/3032e1a7.jpg","comment_is_top":false,"comment_ctime":1541431875,"is_pvip":false,"replies":[{"id":"13381","content":"å½“ç„¶å¯ä»¥ã€‚ä½†è¿™è¿˜æ˜¯overlayï¼Œåªæ˜¯æ²¡ç”¨éš§é“ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1541508024,"ip_address":"","comment_id":37047,"utype":1}],"discussion_count":7,"race_medal":0,"score":"53081039427","product_id":100015201,"comment_content":"è¯·æ•™ä¸ªé—®é¢˜ï¼Œé»˜è®¤æƒ…å†µä¸¤å°ä¸»æœºçš„docker0æ— æ³•äº’é€šï¼Œé‚£ä¹ˆå¦‚æœåœ¨è¿™ä¸¤å°æœºå™¨ä¸Šé…ç½®äº†è·¯ç”±è§„åˆ™ï¼Œå°†docker0çš„æ•°æ®è½¬å‘åˆ°eth0ï¼Œä¸¤å°æœºå™¨é€šè¿‡ç½‘çº¿æˆ–è€…äº¤æ¢æœºç›¸è¿ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å¯ä»¥ä¿è¯ä¸ç”¨å¼•å…¥overlay networkï¼Œå®¹å™¨ä¹‹é—´ä¹Ÿèƒ½äº’é€š","like_count":13,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428140,"discussion_content":"å½“ç„¶å¯ä»¥ã€‚ä½†è¿™è¿˜æ˜¯overlayï¼Œåªæ˜¯æ²¡ç”¨éš§é“ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541508024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1073666,"avatar":"https://static001.geekbang.org/account/avatar/00/10/62/02/2370d8c0.jpg","nickname":"æµ®ç™½","note":"","ucode":"6FB94B1EB3D4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299691,"discussion_content":"IPåŒ…ï¼š 172.17.0.0 -> ç½‘å…³ï¼ˆdocker0ï¼‰ -> 10.168.0.0ï¼Œå¤§æ¦‚è¿‡ç¨‹å°±æ˜¯è¿™æ ·çš„ï¼Œåœ¨172.17.0.0ç½‘ç»œä¸‹çš„IPåŒ…ç»è¿‡ç½‘å…³è¿›å…¥å¦ä¸€ä¸ªç½‘ç»œ10.168.0.0ï¼Œå¦‚æœæŠŠdocker0ç±»æ¯”æˆè·¯ç”±å™¨ï¼Œé‚£ä¹ˆdocker0åœ¨172.17.0.0è¿™ä¸€ä¾§å……å½“ç½‘å…³ï¼ŒIPåœ°å€æ˜¯172.17.0.1ï¼ŒåŒæ—¶åœ¨10.168.0.0è¿™ä¸€ä¾§å……å½“è¿™ä¸ªç½‘ç»œä¸Šçš„ä¸€ä¸ªä¸»æœºï¼Œåº”è¯¥æ‹¥æœ‰ç€å’Œ10.168.0.2ç±»ä¼¼çš„IPï¼ˆä½†ä¸èƒ½æ˜¯10.168.0.1ï¼‰ï¼Œä½†æ˜¯docker0åœ¨10.168.0.0è¿™ä¸€ä¾§æ˜¯ç›´æ¥ä½¿ç”¨äº†10.168.0.2è¿™ä¸ªIPçš„å§ï¼Œå…·ä½“æ˜¯æ€ä¹ˆæ ·çš„æˆ‘ä¹Ÿä¸æ¸…æ¥šäº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597766100,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120478,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/de/45875491.jpg","nickname":"è”ºæ³¢","note":"","ucode":"C185D35419790C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":137060,"discussion_content":"ä½ ä»¬çš„ç–‘é—®æ˜¯å¯¹çš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®è·¯ç”±æˆ–è€…natå®ç°containerçš„è·¨ä¸»æœºäº’é€šï¼Œè€Œä¸”è¿™ä¸ªä¸æ˜¯overlayï¼Œå› ä¸ºå¹¶æ²¡æœ‰åœ¨contaiberæ•°æ®åŒ…å¤–é¢åˆåŒ…ä¸€å±‚overlayä¿¡æ¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579176824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004165,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/85/99545c24.jpg","nickname":"å¶ç‹","note":"","ucode":"D7193A95D8281C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":120806,"discussion_content":"æˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ï¼Œå‰é¢è¯´Node1çš„å®¹å™¨åˆ°Node2ä¸»æœºæ—¶ï¼Œå¯ä»¥è¿æ¥ã€‚åé¢é©¬ä¸Šè¯´Node1çš„å®¹å™¨åˆ°Node2çš„å®¹å™¨æ— æ³•è¿æ¥ï¼Œå°±æœ‰ç‚¹è®©äººå›°æƒ‘ã€‚å…¶å®æŒ‰å‰é¢è¯´çš„é…ç½®ç›´è¿è·¯ç”±è§„åˆ™ï¼Œéƒ½åˆ°Node2ä¸»æœºäº†ï¼Œå†åˆ°docker0ï¼Œå°±è¿›å»å®¹å™¨äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578297115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1073666,"avatar":"https://static001.geekbang.org/account/avatar/00/10/62/02/2370d8c0.jpg","nickname":"æµ®ç™½","note":"","ucode":"6FB94B1EB3D4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1004165,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/85/99545c24.jpg","nickname":"å¶ç‹","note":"","ucode":"D7193A95D8281C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299685,"discussion_content":"ä¸è¡Œçš„ï¼Œdocker0å³æœ‰2å±‚ç½‘ç»œçš„MACåœ°å€ï¼Œåˆæœ‰3å±‚ç½‘ç»œçš„IPåœ°å€ï¼Œæ‰€ä»¥å®ƒæ›´åƒæ˜¯ä¸€ä¸ªè™šæ‹Ÿè·¯ç”±å™¨ï¼Œåœ¨ä¸€å°å®¿ä¸»æœºä¸Šå……å½“å®¹å™¨çš„ç½‘å…³ã€‚Node1ä¸­å®¹å™¨å¯ä»¥è®¿é—®Node2å®¿ä¸»æœºï¼Œä½†æ˜¯Node1ä¸­å®¹å™¨ä¸èƒ½è®¿é—®Node2å®¿ä¸»æœºä¸­çš„å®¹å™¨ï¼Œå› ä¸ºNode1å’ŒNode2çš„è™šæ‹Ÿè·¯ç”±ï¼ˆdocker0ï¼‰å…·æœ‰ç›¸åŒçš„ç½‘ç»œå·ï¼ˆéƒ½æ˜¯172.17.0.0ï¼‰ï¼Œæ‰€ä»¥ä»–ä»¬ä¸‹é¢çš„å®¹å™¨ä¹Ÿå…·æœ‰ç›¸åŒçš„ç½‘ç»œå·ï¼Œè¿™æ ·ï¼Œå½“Node1ä¸Šçš„å®¹å™¨ï¼ˆå‡è®¾æ˜¯172.17.0.2ï¼‰æƒ³è®¿é—®Node2ä¸Šå®¹å™¨ï¼ˆå‡è®¾æ˜¯172.17.0.3ï¼‰æ—¶ï¼Œå®¹å™¨çš„æœ¬åœ°è·¯ç”±è¡¨èƒ½åˆ¤æ–­å‡º172.13.0.3è·Ÿè‡ªå·±ä¸€æ ·ï¼ŒåŒå±ä¸€ä¸ªæ•°æ®é“¾è·¯å±‚ç½‘ç»œï¼ˆå› ä¸ºç½‘ç»œå·ç›¸åŒï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥é€šè¿‡æ•°æ®é“¾è·¯å±‚ï¼ˆä»¥å¤ªç½‘ï¼‰è¿›è¡Œé€šè®¯ï¼ˆå¦‚æœæ²¡æœ‰å¯¹æ–¹çš„MACåœ°å€ä¼šå…ˆç”¨ARPå¹¿æ’­æŸ¥è¯¢å¯¹æ–¹çš„MACï¼‰ã€‚è¿™ä¸ªæ—¶å€™åªä½¿ç”¨åˆ°äº†docker0çš„äºŒå±‚ç½‘ç»œçš„èƒ½åŠ›ï¼Œæ²¡æœ‰ä½¿ç”¨å…¶3å±‚ç½‘ç»œçš„èƒ½åŠ›ï¼ˆIPè·¯ç”±æ§åˆ¶ï¼‰ï¼Œæ˜¯ä¸ä¼šèµ°åˆ°ç½‘å…³ï¼ˆdocker0ï¼‰ä¹‹å¤–çš„ã€‚","likes_number":17,"is_delete":false,"is_hidden":false,"ctime":1597764693,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":120806,"ip_address":""},"score":299685,"extra":""},{"author":{"id":1073666,"avatar":"https://static001.geekbang.org/account/avatar/00/10/62/02/2370d8c0.jpg","nickname":"æµ®ç™½","note":"","ucode":"6FB94B1EB3D4F6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1004165,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/52/85/99545c24.jpg","nickname":"å¶ç‹","note":"","ucode":"D7193A95D8281C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299688,"discussion_content":"Node1ä¸­çš„å®¹å™¨è®¿é—®Node2æ—¶ï¼Œé€šè¿‡è·¯ç”±è¡¨è®¡ç®—å‡ºIPåŒ…çš„ä¸‹ä¸€è·³æ˜¯172.17.0.1ï¼Œäºæ˜¯å°±å‘ç»™äº†docker0ç½‘æ¡¥ï¼ˆè¿™ç›¸å½“äºæˆ‘ä»¬çš„å¹³æ—¶çš„ä¸»æœºæŠŠIPåŒ…å‘ç»™ç½‘å…³ï¼Œä¹Ÿå°±æ˜¯è·¯ç”±å™¨ï¼‰ï¼Œä»docker0åˆ°å®¿ä¸»æœºçš„è½¬å˜è¿‡ç¨‹æˆ‘ä¸æ¸…æ¥šï¼Œä½†æ˜¯ä¸‹ä¸€æ­¥å°±æ˜¯åˆ°äº†å®¿ä¸»æœºäº†ï¼Œå®¿ä¸»æœºé€šè¿‡è·¯ç”±æ§åˆ¶è¡¨è®¡ç®—å‡ºç›®æ ‡IP10.168.0.3è·Ÿè‡ªå·±åœ¨åŒä¸€ä¸ªé“¾è·¯ç½‘ç»œä¸Šï¼Œå¯¹åº”çš„ç½‘å¡æ˜¯eth0ï¼Œç„¶åå°±ä½¿ç”¨eth0ç½‘å¡å°†IPåŒ…å‘é€åˆ°å‡ºå»ï¼ˆå‘é€å‰å¯èƒ½è¦é€šè¿‡ARPåè®®æŸ¥æ‰¾10.168.0.3çš„MACåœ°å€ï¼‰ï¼Œ10.168.0.2å’Œ10.168.0.3åœ¨åŒä¸€ä¸ªé“¾è·¯ç½‘ç»œä¸Šï¼Œæ‰€ä»¥ä¸éœ€è¦èµ°è·¯ç”±å†è¿›è¡ŒIPåŒ…çš„ä¸‹ä¸€è·³ï¼Œ10.168.0.3ç›´æ¥å°±æ”¶åˆ°äº†ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1597765540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":120806,"ip_address":""},"score":299688,"extra":""},{"author":{"id":1837179,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/08/7b/7f086546.jpg","nickname":"Alex","note":"","ucode":"70806CEA9AB15E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1073666,"avatar":"https://static001.geekbang.org/account/avatar/00/10/62/02/2370d8c0.jpg","nickname":"æµ®ç™½","note":"","ucode":"6FB94B1EB3D4F6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536831,"discussion_content":"æµå¼Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638878660,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":299685,"ip_address":""},"score":536831,"extra":""}]}]},{"had_liked":false,"id":92395,"user_name":"é¥­ç²’","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1557246457,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"48801886713","product_id":100015201,"comment_content":"nginx å†…çš„ifconfigå¯ä»¥åœ¨å®¹å™¨å†…å®‰è£…ã€‚<br># apt-get update <br># apt install net-tools","like_count":11,"discussions":[{"author":{"id":1054727,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/07/9f5f5dd3.jpg","nickname":"æ†¶æµ·æ‹¾è²","note":"","ucode":"99E883A8601DED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25126,"discussion_content":"nginxå®¹å™¨é‡Œå¯ä»¥ç”¨ipå‘½ä»¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570430814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1056944,"avatar":"https://static001.geekbang.org/account/avatar/00/10/20/b0/0a1551c4.jpg","nickname":"æ—¥æ‹±ä¸€å’","note":"","ucode":"3BDFD6F473862C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20984,"discussion_content":"æ„Ÿè§‰ç”¨ debug container image ä¼šå¥½ä¸€ç‚¹ï¼Œ ç½‘ç»œå·¥å…·æ¯”è¾ƒå¤šï¼Œ nginx é•œåƒéƒ½è¿˜è¦æ‰‹åŠ¨å®‰è£…ã€‚ ç•¥éº»çƒ¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569410029,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1500593,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIicibkDiceIZd7R3y57L7WIVFpVWU6ebp40G3ZNLFtlUWb7d4O5BpyxKQSd81FXo4rQFbQoUWu35jJg/132","nickname":"zhuxuxu","note":"","ucode":"DCD8E5D7F6F8A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1056944,"avatar":"https://static001.geekbang.org/account/avatar/00/10/20/b0/0a1551c4.jpg","nickname":"æ—¥æ‹±ä¸€å’","note":"","ucode":"3BDFD6F473862C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268442,"discussion_content":"ä½ è¯´çš„è¿™ä¸ªæ˜¯é•œåƒå— è¿˜æ˜¯å‘½ä»¤ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589777526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":20984,"ip_address":""},"score":268442,"extra":""}]}]},{"had_liked":false,"id":36912,"user_name":"Yuki_YANG","can_delete":false,"product_type":"c1","uid":1218647,"ip_address":"","ucode":"C200463E3AB225","user_header":"https://static001.geekbang.org/account/avatar/00/12/98/57/e6ef93ae.jpg","comment_is_top":false,"comment_ctime":1541385972,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"48786026228","product_id":100015201,"comment_content":"æ–‡ä¸­&quot;é€šè¿‡ ifconfig å‘½ä»¤çš„è¾“å‡ºï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œnginx-1 å®¹å™¨å¯¹åº”çš„ Veth Pair è®¾å¤‡, åœ¨å®¿ä¸»æœºä¸Šæ˜¯ä¸€å¼ è™šæ‹Ÿç½‘å¡ã€‚å®ƒçš„åå­—å«ä½œveth9c02e56&quot;<br>è¯·é—®ä¸‹æ˜¯ç”¨å“ªä¸ªå‘½ä»¤çœ‹å‡ºæ¥çš„, è²Œä¼¼route, ifconfig, brctl, æ‰¾ä¸åˆ°è¿™ä¸ªå¯¹åº”å…³ç³»å‘¢<br><br><br><br>","like_count":11},{"had_liked":false,"id":39117,"user_name":"å¸…","can_delete":false,"product_type":"c1","uid":1207367,"ip_address":"","ucode":"DB792F56C26429","user_header":"https://static001.geekbang.org/account/avatar/00/12/6c/47/57b6c4e8.jpg","comment_is_top":false,"comment_ctime":1542192025,"is_pvip":false,"replies":[{"id":"13980","content":"å¯¹<br>","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1542205017,"ip_address":"","comment_id":39117,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35901930393","product_id":100015201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œç½‘ç»œçš„ç« èŠ‚ä¸­è®²åˆ°çš„äºŒå±‚ç½‘ç»œå’Œä¸‰å±‚ç½‘ç»œæ˜¯åˆ†åˆ«æŒ‡æ•°æ®é“¾è·¯å±‚å’Œç½‘ç»œå±‚ä¹ˆï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428927,"discussion_content":"å¯¹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1542205017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37902,"user_name":"kissingers","can_delete":false,"product_type":"c1","uid":1135299,"ip_address":"","ucode":"615151808CF628","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKzqiaZnBw2myRWY802u48Rw3W2zDtKoFQ6vN63m4FdyjibM21FfaOYe8MbMpemUdxXJeQH6fRdVbZA/132","comment_is_top":false,"comment_ctime":1541780210,"is_pvip":false,"replies":[{"id":"13664","content":"å¯¹ã€‚è¿™é‡Œå…¶å®éƒ½åœ¨äºŒå±‚ebtableså¤„ç†çš„ã€‚æˆ‘ä¿®æ”¹ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1541842296,"ip_address":"","comment_id":37902,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35901518578","product_id":100015201,"comment_content":"è€å¸ˆï¼Œå®¹å™¨1è®¿é—®å®¹å™¨2ï¼Œç›´æ¥docker0ç½‘æ¡¥æ ¹æ®è½¬å‘è¡¨è½¬å‘å°±è¡Œäº†ï¼Œæ€ä¹ˆè¿˜æœ‰å…ˆåˆ°docker0æ¥å£ï¼Œè·¯ç”±é€‰æ‹©ï¼Œå†å›åˆ°docker0è½¬å‘çš„è¿‡ç¨‹ï¼Ÿè®¿é—®å¤–ç½‘æ—¶æ‰ä¼šæœ‰åˆ°docker0è¿™ä¸ªç½‘å…³ï¼Œå†è·¯ç”±å‡ºå»çš„è¿‡ç¨‹å§ï¼Ÿ","like_count":8,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428519,"discussion_content":"å¯¹ã€‚è¿™é‡Œå…¶å®éƒ½åœ¨äºŒå±‚ebtableså¤„ç†çš„ã€‚æˆ‘ä¿®æ”¹ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541842296,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37046,"user_name":"loda","can_delete":false,"product_type":"c1","uid":1043287,"ip_address":"","ucode":"3F9575DBFA1031","user_header":"https://static001.geekbang.org/account/avatar/00/0f/eb/57/3032e1a7.jpg","comment_is_top":false,"comment_ctime":1541431616,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"31606202688","product_id":100015201,"comment_content":"æ¨èä½¿ç”¨ip link showæ¥çœ‹veth-ethæ˜ å°„å…³ç³»ï¼Œå¯ä»¥çœ‹åˆ°ifconfigçœ‹ä¸åˆ°çš„link","like_count":7},{"had_liked":false,"id":251594,"user_name":"Geek_633adb","can_delete":false,"product_type":"c1","uid":2078963,"ip_address":"","ucode":"6B12E1F3E7A631","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7vS14iaOp9WSIviciaKibTorW43zeJD8kVqplSFLBCibYoXtR2Q3w9pRvpUwQHNlNcvNxexgpdxJTEpFg/132","comment_is_top":false,"comment_ctime":1601709215,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23076545695","product_id":100015201,"comment_content":"è¿™è¯¾è´¨é‡å¤ªé«˜äº†, å¸æ”¶æ•ˆæœè¿œèƒœäºåˆšåˆšçœ‹å®Œçš„&quot;é˜¿é‡Œäº‘åŸç”ŸæŠ€æœ¯å…¬å¼€è¯¾&quot;, ç£Šå“¥è¡¨è¾¾èƒ½åŠ›çœŸçš„ç‰›ï¼","like_count":5},{"had_liked":false,"id":79269,"user_name":"gl328518397","can_delete":false,"product_type":"c1","uid":1293354,"ip_address":"","ucode":"05AF4661EF0AAF","user_header":"https://static001.geekbang.org/account/avatar/00/13/bc/2a/00a3d488.jpg","comment_is_top":false,"comment_ctime":1553420428,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18733289612","product_id":100015201,"comment_content":"nginxé•œåƒæ²¡æœ‰ifconfig è¿™äº›å‘½ä»¤å§ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1102245,"avatar":"https://static001.geekbang.org/account/avatar/00/10/d1/a5/2bbedc3b.jpg","nickname":"over","note":"","ucode":"FE272AC19842D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348998,"discussion_content":"å®‰è£…ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612839238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52107,"user_name":"Devil May Cry.Samsara","can_delete":false,"product_type":"c1","uid":1067416,"ip_address":"","ucode":"007363CC2BB184","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/98/a29a006e.jpg","comment_is_top":false,"comment_ctime":1545310568,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18725179752","product_id":100015201,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸ªé—®é¢˜<br>dockerçš„è¿™ä¸ªç½‘ç»œ vethpairç½‘å¡ ipæ˜¯æ€ä¹ˆæ¥çš„ä¹ˆï¼Ÿ<br>æˆ‘æ— æ„å‘ç° ï¼Œvethpairçš„ipéƒ½æ˜¯ä¹‹å‰éƒ½æ˜¯172ç½‘æ®µï¼Œ  ä»Šå¤©å‘ç°æœ‰ä¸ª192çš„ç‰©ç†ip å±…ç„¶è®¿é—®ä¸é€šäº†ï¼Œï¼Œç„¶åå°±å‘ç° dockeré‡Œé¢çš„ ipé™¤äº†172ç½‘æ®µ å±…ç„¶è¿˜æœ‰192ç½‘æ®µï¼Œæ‰€ä»¥ä¸ç‰©ç†192ç½‘æ®µçš„è·¯ç”±è¡¨æœ‰å†²çªäº†<br>dockeré‡Œé¢è¿™ä¸ªæˆ‘ç”¨çš„éƒ½æ˜¯é»˜è®¤ç½‘æ¡¥æ¨¡å¼ï¼Œè¿™ä¸ªvethpare çš„ipåˆ°åº•æ€ä¹ˆæ¥çš„ï¼Œéš¾é“ä¸æ˜¯ä»docker0çš„ç½‘æ¡¥ä¸Šåˆ›å»ºå‡ºæ¥çš„ä¹ˆã€‚<br>","like_count":4,"discussions":[{"author":{"id":2100644,"avatar":"","nickname":"Geek_8e2759","note":"","ucode":"EBDBA4D92B5C50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320808,"discussion_content":"172.17.0.1/16 ç½‘æ®µæ˜¯ docker0 é»˜è®¤ç½‘æ®µï¼›å¦‚æœè¿˜æœ‰ 192 ç½‘æ®µçš„ï¼Œé‚£æ˜¯ä¸æ˜¯å› ä¸ºè¿˜æœ‰ä¸€ä¸ª 192 ç½‘æ®µçš„ç½‘æ¡¥ï¼Œåœ¨è¿™ä¸ªç½‘æ¡¥ä¸Šä¹Ÿé…ç½®äº†ä¸€ä¸ª vethpair","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604483083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37703,"user_name":"kissingers","can_delete":false,"product_type":"c1","uid":1135299,"ip_address":"","ucode":"615151808CF628","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKzqiaZnBw2myRWY802u48Rw3W2zDtKoFQ6vN63m4FdyjibM21FfaOYe8MbMpemUdxXJeQH6fRdVbZA/132","comment_is_top":false,"comment_ctime":1541687631,"is_pvip":false,"replies":[{"id":"13573","content":"é™æ€IPã€‚è®¿é—®å¤–ç½‘ä¸ºä»€ä¹ˆè¦NATã€‚åŒä¸»æœºä¸¤å¼ ç½‘å¡è¦ç”¨ä»€ä¹ˆè¿ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1541719259,"ip_address":"","comment_id":37703,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18721556815","product_id":100015201,"comment_content":"docker0ç½‘æ¡¥æœ‰æ²¡æœ‰dhcp åŠŸèƒ½ï¼Ÿä¸»æœºä¸Šçš„å®¹å™¨è®¿é—®å¤–ç½‘æ²¡æœ‰NATï¼Ÿä¸»æœºç½‘å¡æ²¡è¿åˆ°docker0ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428457,"discussion_content":"é™æ€IPã€‚è®¿é—®å¤–ç½‘ä¸ºä»€ä¹ˆè¦NATã€‚åŒä¸»æœºä¸¤å¼ ç½‘å¡è¦ç”¨ä»€ä¹ˆè¿ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541719259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2449777,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDUJyeq54fiaXAgF62tNeocO3lHsKT4mygEcNoZLnibg6ONKicMgCgUHSfgW8hrMUXlwpNSzR8MHZwg/132","nickname":"types","note":"","ucode":"8B50927EF1804F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359214,"discussion_content":"docker è®¿é—®å¤–ç½‘æ˜¯éœ€è¦NATçš„, ç±»ä¼¼å¦‚ä¸‹\niptables -t nat -A POSTROUTING -s 192.168.2.0/24 -o enp5s0 -j MASQUERADE\nä»…ä»…æ ¹æ®è·¯ç”±è§„åˆ™ï¼Œsource IPä¸ä¼šå˜åŒ–ï¼Œè¿”å›çš„æ¶ˆæ¯æ— æ³•åˆ°è¾¾source hostã€€","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1616142898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164763,"user_name":"å½¬å“¥","can_delete":false,"product_type":"c1","uid":1148392,"ip_address":"","ucode":"6FF7945FF40DD4","user_header":"https://static001.geekbang.org/account/avatar/00/11/85/e8/1e3e5657.jpg","comment_is_top":false,"comment_ctime":1577087809,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14461989697","product_id":100015201,"comment_content":"åœ¨k8sçš„node ä¸Šçœ‹åˆ°ä¸¤ä¸ªbridgeï¼š<br>[root@iZbp199519zhaqjop2eeueZ ~]# brctl show<br>bridge name\tbridge id\t\tSTP enabled\tinterfaces<br>cni0\t\t8000.0a58ac140101\tno\t\tveth0982eb93<br>\t\t\t\t\t\t\tveth1ebba82a<br>\t\t\t\t\t\t\tveth25fd7752<br>\t\t\t\t\t\t\tveth2963c093<br>\t\t\t\t\t\t\tveth2f243ddd<br>\t\t\t\t\t\t\tveth319b6524<br>\t\t\t\t\t\t\tveth3c36e5f4<br>\t\t\t\t\t\t\tveth4554e1b9<br>\t\t\t\t\t\t\tveth4ccc7ce2<br>\t\t\t\t\t\t\tveth72769145<br>\t\t\t\t\t\t\tveth72fb8dcc<br>\t\t\t\t\t\t\tveth8b3290bf<br>\t\t\t\t\t\t\tveth98697671<br>\t\t\t\t\t\t\tvethd9a36cf2<br>\t\t\t\t\t\t\tvethf2f528fc<br>docker0\t\t8000.024284d8b746\tno","like_count":3,"discussions":[{"author":{"id":1366782,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/eQysJPqzuAoyrWzWyXyYibrAszp6B4WUic7g2TnO8ksfWtCibOEMRqQmCZk4xJwEPQwTRH21W4e2f77FoQTzL6Dhw/132","nickname":"é’±æ¶›","note":"","ucode":"B08EB10AD30D74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323256,"discussion_content":"k8sä½¿ç”¨çš„cni0çš„ç½‘ç»œæ’ä»¶ï¼Œæ²¡æœ‰ç”¨é»˜è®¤çš„dockerç½‘ç»œï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604907958,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":36910,"user_name":"fiisio","can_delete":false,"product_type":"c1","uid":1148088,"ip_address":"","ucode":"87CB8F5EAA033B","user_header":"https://static001.geekbang.org/account/avatar/00/11/84/b8/0b73ecdc.jpg","comment_is_top":false,"comment_ctime":1541385695,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"14426287583","product_id":100015201,"comment_content":"å®¹å™¨é‡Œé¢åº”è¯¥æ˜¯veth ä¸æ˜¯ ethå§ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1363634,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ce/b2/1f914527.jpg","nickname":"æµ·ç›—èˆ¹é•¿","note":"","ucode":"ECB28BA21A4113","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290655,"discussion_content":"å®¹å™¨ä¸­æ¥å£å°±æ˜¯eth0","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1594558605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1317899,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAWUhO0xSjD6wbGScY5WOujAE94vNYWlWmsVdibb0IWbXzSSNXJHp0lqfWVq8ZicKBsEY1EuAWArew/132","nickname":"Felix","note":"","ucode":"9318688F3C5419","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":369155,"discussion_content":"åç§°å¯ä»¥ä¿®æ”¹å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618961072,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":46383,"user_name":"xumc","can_delete":false,"product_type":"c1","uid":1033274,"ip_address":"","ucode":"22D24AF9D52B65","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/3a/77bbc665.jpg","comment_is_top":false,"comment_ctime":1543912359,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10133846951","product_id":100015201,"comment_content":"æœ‰ç”¨macçš„å—ï¼Ÿåœ¨macé‡Œdocker run -d --name nginx-v2 nginxï¼Œ  docker exec -it nginx-v2 &#47;bin&#47;bash<br>é‡Œæ²¡æœ‰ifconfig ipconfig, netstat -nsè¿™æ ·çš„å‘½ä»¤ï¼ŒæŸ¥äº†ä¸€ä¸‹ï¼Œmacä¸Šdockerè¿è¡Œåœ¨è™šæ‹Ÿæœºé‡Œï¼Œä¸ç”¨docker-0ç½‘æ¡¥<br>æ‰€ä»¥æƒ³é—®ä¸€ä¸‹ï¼šMACé‡Œå¦‚ä½•ç†è§£dockerçš„ç½‘ç»œï¼Ÿ<br>éš¾é“è¦æè™šæ‹Ÿæœºå—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1401797,"avatar":"https://static001.geekbang.org/account/avatar/00/15/63/c5/a85ade71.jpg","nickname":"åˆ˜å†¬","note":"","ucode":"982676C96C0EB4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532576,"discussion_content":"æˆ‘ä¸ªäººè§‰å¾—æœ€ç®€å•çš„æ–¹æ¡ˆï¼Œå°±æ˜¯æä¸ªVirtual Boxï¼Œç„¶åè£…Ubuntuï¼Œç„¶åè£…Dockerã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637648441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":36974,"user_name":"è™è™â¤ï¸","can_delete":false,"product_type":"c1","uid":1086535,"ip_address":"","ucode":"157F261E80291A","user_header":"https://static001.geekbang.org/account/avatar/00/10/94/47/75875257.jpg","comment_is_top":false,"comment_ctime":1541409868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10131344460","product_id":100015201,"comment_content":"ç”¨hostç½‘ç»œéœ€è¦å¹³å°èƒ½å¤Ÿè‡ªåŠ¨åˆ†é…ç«¯å£ï¼Œé¿å…å†²çªã€‚å¹¶ä¸”applicationå¯ä»¥é€šè¿‡æ¯”å¦‚ç¯å¢ƒå˜é‡åŠ¨æ€é…ç½®ç«¯å£ä¿¡æ¯ã€‚","like_count":2},{"had_liked":false,"id":36904,"user_name":"silver","can_delete":false,"product_type":"c1","uid":1186740,"ip_address":"","ucode":"908E3C8560D6E1","user_header":"https://static001.geekbang.org/account/avatar/00/12/1b/b4/a6db1c1e.jpg","comment_is_top":false,"comment_ctime":1541384034,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10131318626","product_id":100015201,"comment_content":"å½“å®¹å™¨è¯•å›¾è¿æ¥åˆ°åˆ«çš„å®¿ä¸»æœºæ—¶ï¼Œå®¹å™¨çš„è¿æ¥å…·ä½“æ€ä¹ˆè¢«routeåˆ°å®¿ä¸»æœºçš„eth0çš„å‘¢ï¼Ÿæ ¹æ®å‰æ–‡å¯¹â€œä»è®¾å¤‡â€çš„æè¿°ï¼Œè¿™äº›è¯·æ±‚ä¸æ˜¯åº”è¯¥å…¨è¢«ç›´æ¥è½¬å‘åˆ°äº†docker0ä¸Šå—","like_count":2},{"had_liked":false,"id":292022,"user_name":"è‘£æ°¸åˆš","can_delete":false,"product_type":"c1","uid":1169147,"ip_address":"","ucode":"ADA792B226A6CD","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/fb/837af7bf.jpg","comment_is_top":false,"comment_ctime":1620647217,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5915614513","product_id":100015201,"comment_content":"1ã€å¦‚ä½•å°†veth paireè®¾å¤‡å’Œå®¹å™¨çš„å…³ç³»å¯¹åº”èµ·æ¥ï¼Ÿ<br>é¦–å…ˆï¼š åœ¨å®¹å™¨å†…æ‰§è¡Œ ip link å‘½ä»¤ ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ ip addr å‘½ä»¤ï¼Œåªæ˜¯å‡ºå…¥å†…å®¹æ¯” ip link å‘½ä»¤æ›´è¯¦ç»†ï¼Œè¿™é‡Œä¸éœ€è¦é‚£ä¹ˆè¯¦ç»† ï¼‰<br>root@d03940d4deb7:&#47;# ip link   \t# ç¬¬1ä¸ªå®¹å™¨ä¸­æ‰§è¡Œ<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000<br>    link&#47;loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>32: eth0@if33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT group default <br>    link&#47;ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff<br><br>root@4a92ae9c8a04:&#47;# ip link \t # ç¬¬2ä¸ªå®¹å™¨ä¸­æ‰§è¡Œ<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000<br>    link&#47;loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>34: eth0@if35: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT group default <br>    link&#47;ether 02:42:ac:11:00:03 brd ff:ff:ff:ff:ff:ff<br>æ³¨æ„æ ‡è®°çš„è’åœ°çº¢è‰²åŠ ç²—å­—ä½“<br><br>ç„¶åï¼Œåœ¨å®¿ä¸»æœºä¸­æ‰§è¡Œ <br>[root@VM-12-2-centos container_network_xuexi]# ip link<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000<br>    link&#47;loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000<br>    link&#47;ether 52:54:00:9b:57:b4 brd ff:ff:ff:ff:ff:ff<br>3: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT group default <br>    link&#47;ether 02:42:42:28:61:42 brd ff:ff:ff:ff:ff:ff<br>33: veth56a81c2@if32: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP mode DEFAULT group default <br>    link&#47;ether 32:18:bb:35:43:6d brd ff:ff:ff:ff:ff:ff link-netnsid 0<br>35: veth0a71d12@if34: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP mode DEFAULT group default <br>    link&#47;ether e2:82:eb:a8:6d:13 brd ff:ff:ff:ff:ff:ff link-netnsid 1<br>è¿™æ ·å°±æ‰¾åˆ°äº†å¯¹åº”å…³ç³»","like_count":1},{"had_liked":false,"id":92243,"user_name":"å…­å¤©å¤©å¤©å‘ä¸Š","can_delete":false,"product_type":"c1","uid":1518477,"ip_address":"","ucode":"D21973B2A51690","user_header":"https://static001.geekbang.org/account/avatar/00/17/2b/8d/14bb07d4.jpg","comment_is_top":false,"comment_ctime":1557211416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5852178712","product_id":100015201,"comment_content":"é»˜è®¤æŒ‰ç…§çš„Ubuntuæˆ–è€…centosæ˜¯æ²¡æœ‰ifconfigæˆ–pingå‘½ä»¤çš„ï¼Œåœ¨ubuntué‡Œå®‰è£…çš„å‘½ä»¤æ˜¯ï¼›<br>apt-get update<br>&#47;&#47;ifconfig <br>apt install net-tools       <br>&#47;&#47;ping<br>apt install iputils-ping ","like_count":1},{"had_liked":false,"id":36896,"user_name":"silver","can_delete":false,"product_type":"c1","uid":1186740,"ip_address":"","ucode":"908E3C8560D6E1","user_header":"https://static001.geekbang.org/account/avatar/00/12/1b/b4/a6db1c1e.jpg","comment_is_top":false,"comment_ctime":1541382296,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5836349592","product_id":100015201,"comment_content":"è¯»è¿™ç¯‡æ–‡ç« å‘ç°NIC bridgeè¿™äº›æ¦‚å¿µç†è§£æœ‰äº›åƒåŠ›ï¼Œæœ‰ä»€ä¹ˆå¥½çš„èµ„æ–™æ¨èä¹ˆ","like_count":1,"discussions":[{"author":{"id":2663721,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er8sYHCPqtn0TRP72qup5YicYAvTDNP7b8cuykCR0o5Yb6ViaQJFKShJbMsWahVk4sQdwDU2UQf6NiaA/132","nickname":"akai","note":"","ucode":"8D4AA48A86B71C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575525,"discussion_content":"å¯ä»¥ç†è§£ä¸ºäºŒå±‚äº¤æ¢æœºã€‚å‚è€ƒèµ„æ–™ã€Šè®¡ç®—æœºç½‘ç»œã€‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654916604,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360679,"user_name":"ç¬é—´","can_delete":false,"product_type":"c1","uid":1035035,"ip_address":"åŒ—äº¬","ucode":"70597EC50C71E5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cb/1b/a9afb6c6.jpg","comment_is_top":false,"comment_ctime":1666752718,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666752718","product_id":100015201,"comment_content":"æƒ³é—®ä¸€ä¸‹ï¼Œdocker0 ä½œä¸ºäºŒå±‚äº¤æ¢æœºä¸ºä»€ä¹ˆä¼šæœ‰ipåœ°å€ï¼Ÿ","like_count":0},{"had_liked":false,"id":342773,"user_name":"çªçªå¤´","can_delete":false,"product_type":"c1","uid":1063866,"ip_address":"","ucode":"5C2635ED6484F8","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/ba/3b30dcde.jpg","comment_is_top":false,"comment_ctime":1650455683,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1650455683","product_id":100015201,"comment_content":"éœ€è¦ç¡®è®¤ç«¯å£å ç”¨çš„æƒ…å†µ","like_count":0},{"had_liked":false,"id":339668,"user_name":"fomy","can_delete":false,"product_type":"c1","uid":1125834,"ip_address":"","ucode":"CD87EA03B1F327","user_header":"https://static001.geekbang.org/account/avatar/00/11/2d/ca/02b0e397.jpg","comment_is_top":false,"comment_ctime":1648282980,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1648282980","product_id":100015201,"comment_content":"å¹²è´§æ»¡æ»¡ï¼Œä¸€ç¯‡æ–‡ç« èŠ±è´¹å‡ ä¸ªå°æ—¶æ‰èƒ½æ¶ˆåŒ–å®Œã€‚","like_count":0},{"had_liked":false,"id":338917,"user_name":"LLL","can_delete":false,"product_type":"c1","uid":1748234,"ip_address":"","ucode":"0871A8A94B54FE","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ad/0a/6a7d41f1.jpg","comment_is_top":false,"comment_ctime":1647787145,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647787145","product_id":100015201,"comment_content":"è€å¸ˆï¼Œå®¹å™¨è®¿é—®å¤–ç½‘æƒ…å†µï¼Œå®¹å™¨å†…è™šæ‹Ÿç½‘å¡è¦åšä¸€æ¬¡2å±‚å°è£…ï¼Œåˆ°è¾¾å®¿ä¸»æœºç½‘å¡åè¿˜è¦ä¸€æ¬¡2å±‚å°è£…å—","like_count":0},{"had_liked":false,"id":330389,"user_name":"æ·±æµ·æå…‰","can_delete":false,"product_type":"c1","uid":1096111,"ip_address":"","ucode":"331024F7E99C64","user_header":"https://static001.geekbang.org/account/avatar/00/10/b9/af/f59b4c7c.jpg","comment_is_top":false,"comment_ctime":1641962576,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641962576","product_id":100015201,"comment_content":"è¯·é—®ä¸‹è€å¸ˆï¼Œå¦‚æœpodè¢«é”€æ¯äº†ï¼Œå¯¹åº”çš„docker0ç½‘æ¡¥ä¸Šçš„veth å¯¹ä¼šè¢«å–æ¶ˆä¸ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çš„Macåœ°å€å’Œip ä¹Ÿä¼šå›æ”¶ä¸ï¼Œå› ä¸ºå†è®¿é—®è¿™ä¸ªip å‡ºç°çš„æ˜¯è¶…æ—¶å¼‚å¸¸","like_count":0},{"had_liked":false,"id":327330,"user_name":"é˜¿ç”˜","can_delete":false,"product_type":"c1","uid":1057843,"ip_address":"","ucode":"BC93175B70E05D","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","comment_is_top":false,"comment_ctime":1640068029,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1640068029","product_id":100015201,"comment_content":"&gt; ä¸ä¹‹ç±»ä¼¼åœ°ï¼Œå½“ä½ åœ¨ä¸€å°å®¿ä¸»æœºä¸Šï¼Œè®¿é—®è¯¥å®¿ä¸»æœºä¸Šçš„å®¹å™¨çš„ IP åœ°å€æ—¶ï¼Œè¿™ä¸ªè¯·æ±‚çš„æ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯å…ˆæ ¹æ®è·¯ç”±è§„åˆ™åˆ°è¾¾ docker0 ç½‘æ¡¥ï¼Œç„¶åè¢«è½¬å‘åˆ°å¯¹åº”çš„ Veth Pair è®¾å¤‡ï¼Œæœ€åå‡ºç°åœ¨å®¹å™¨é‡Œã€‚<br>å®¹å™¨çš„ç§æœ‰åœ°å€æ²¡åŠæ³•ç›´æ¥ä»å¤–éƒ¨è®¿é—®å§ï¼Ÿè¿™ä¸ªè·¯ç”±è§„åˆ™æ˜¯æ€ä¹ˆå»ºç«‹çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":325251,"user_name":"Alex","can_delete":false,"product_type":"c1","uid":1837179,"ip_address":"","ucode":"70806CEA9AB15E","user_header":"https://static001.geekbang.org/account/avatar/00/1c/08/7b/7f086546.jpg","comment_is_top":false,"comment_ctime":1638879368,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638879368","product_id":100015201,"comment_content":"å¦‚æœè¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å®¹å™¨çš„ Host Network æ¨¡å¼ï¼Œéœ€è¦æå‰åˆ†é…å¥½ç«¯å£ï¼Œé¿å…å†²çª","like_count":0},{"had_liked":false,"id":325034,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1638783306,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638783306","product_id":100015201,"comment_content":"å®¹å™¨è¦æƒ³è·Ÿå¤–ç•Œè¿›è¡Œé€šä¿¡ï¼Œå®ƒå‘å‡ºçš„ IP åŒ…å°±å¿…é¡»ä»å®ƒçš„ Network Namespace é‡Œå‡ºæ¥ï¼Œæ¥åˆ°å®¿ä¸»æœºä¸Šã€‚è€Œè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•å°±æ˜¯ï¼šä¸ºå®¹å™¨åˆ›å»ºä¸€ä¸ªä¸€ç«¯åœ¨å®¹å™¨é‡Œå……å½“é»˜è®¤ç½‘å¡ã€å¦ä¸€ç«¯åœ¨å®¿ä¸»æœºä¸Šçš„ Veth Pair è®¾å¤‡ã€‚","like_count":0},{"had_liked":false,"id":325032,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1638782686,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638782686","product_id":100015201,"comment_content":"ç†Ÿæ‚‰äº† docker0 ç½‘æ¡¥çš„å·¥ä½œæ–¹å¼ï¼Œä½ å°±å¯ä»¥ç†è§£ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¢«é™åˆ¶åœ¨ Network Namespace é‡Œçš„å®¹å™¨è¿›ç¨‹ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡ Veth Pair è®¾å¤‡ + å®¿ä¸»æœºç½‘æ¡¥çš„æ–¹å¼ï¼Œå®ç°äº†è·ŸåŒå…¶ä»–å®¹å™¨çš„æ•°æ®äº¤æ¢ã€‚ä¸ä¹‹ç±»ä¼¼åœ°ï¼Œå½“ä½ åœ¨ä¸€å°å®¿ä¸»æœºä¸Šï¼Œè®¿é—®è¯¥å®¿ä¸»æœºä¸Šçš„å®¹å™¨çš„ IP åœ°å€æ—¶ï¼Œè¿™ä¸ªè¯·æ±‚çš„æ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯å…ˆæ ¹æ®è·¯ç”±è§„åˆ™åˆ°è¾¾ docker0 ç½‘æ¡¥ï¼Œç„¶åè¢«è½¬å‘åˆ°å¯¹åº”çš„ Veth Pair è®¾å¤‡ï¼Œæœ€åå‡ºç°åœ¨å®¹å™¨é‡Œã€‚è¿™ä¸ªè¿‡ç¨‹çš„ç¤ºæ„å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š","like_count":0},{"had_liked":false,"id":325030,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1638782661,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638782661","product_id":100015201,"comment_content":"æ•°æ®åŒ…å…ˆåˆ°è¾¾docker 0ç½‘æ¡¥ï¼Œå†æ ¹æ®è·¯ç”±è§„åˆ™è½¬åˆ°å¯¹åº”çš„ veth pair è®¾å¤‡ï¼Œ æœ€ååˆ°è¾¾å®¹å™¨","like_count":0},{"had_liked":false,"id":325029,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1638782607,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638782607","product_id":100015201,"comment_content":"å½“ä½ é‡åˆ°å®¹å™¨è¿ä¸é€šâ€œå¤–ç½‘â€çš„æ—¶å€™ï¼Œä½ éƒ½åº”è¯¥å…ˆè¯•è¯• docker0 ç½‘æ¡¥èƒ½ä¸èƒ½ ping é€šï¼Œç„¶åæŸ¥çœ‹ä¸€ä¸‹è·Ÿ docker0 å’Œ Veth Pair è®¾å¤‡ç›¸å…³çš„ iptables è§„åˆ™æ˜¯ä¸æ˜¯æœ‰å¼‚å¸¸ï¼Œå¾€å¾€å°±èƒ½å¤Ÿæ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆäº†ã€‚","like_count":0},{"had_liked":false,"id":317758,"user_name":"é™ˆæ–¯ä½³","can_delete":false,"product_type":"c1","uid":1259323,"ip_address":"","ucode":"C236F874FC767A","user_header":"https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg","comment_is_top":false,"comment_ctime":1634949200,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634949200","product_id":100015201,"comment_content":"ç¬¬ä¸‰åäºŒè¯¾:æµ…è°ˆå®¹å™¨ç½‘ç»œ<br>ç½‘ç»œæ ˆåŒ…æ‹¬:ç½‘å¡ï¼ˆNetwork Interfaceï¼‰ã€å›ç¯è®¾å¤‡ï¼ˆLoopback deviceï¼‰ã€è·¯ç”±è¡¨ï¼ˆRouting Tableï¼‰ã€iptablesç»„æˆã€‚<br><br>Linuxä¸­èƒ½èµ·åˆ°è™šæ‹Ÿæœºäº¤æ¢ä½œç”¨çš„è®¾å¤‡æ˜¯ç½‘æ¡¥bridgeã€‚å®ƒæ˜¯ä¸€ä¸ªå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ˆData Linkï¼‰çš„è®¾å¤‡ï¼Œä¸»è¦åŠŸèƒ½æ˜¯æ ¹æ®MACåœ°å€å­¦ä¹ æ¥å°†æ•°æ®åŒ…è½¬å‘åˆ°ç½‘æ¡¥çš„ä¸åŒç«¯å£ã€‚dockeré¡¹ç›®é»˜è®¤çš„ç½‘æ¡¥æ˜¯docker0ã€‚Veth pairæ˜¯ç”¨æ¥è¿æ¥ä¸åŒnetwork namespaceçš„ç½‘çº¿ã€‚è¢«é™åˆ¶åœ¨network namespaceé‡Œçš„å®¹å™¨è¿›ç¨‹å®é™…ä¸Šæ˜¯é€šè¿‡veth pair+å®¿ä¸»æœºç½‘æ¡¥ï¼ˆdocker0ï¼‰çš„æ–¹å¼å®ç°äº†è·Ÿå…¶ä»–å®¹å™¨çš„æ•°æ®äº¤æ¢ã€‚å½“ä½ é‡åˆ°å®¹å™¨è¿æ¥ä¸é€šå¤–ç½‘çš„æ—¶å€™ï¼Œä½ éƒ½åº”è¯¥å…ˆè¯•è¯•ï¼Œdocker0ç½‘æ¡¥èƒ½ä¸èƒ½pingé€šï¼Œç„¶åæŸ¥çœ‹ä¸€ä¸‹äº†docker0å’Œveth pairè®¾å¤‡ç›¸å…³çš„iptablesè§„åˆ™æ˜¯ä¸æ˜¯æœ‰å¼‚å¸¸ï¼Œå¾€å¾€å°±èƒ½å¤Ÿæ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆã€‚<br><br><br><br><br><br>","like_count":0},{"had_liked":false,"id":316374,"user_name":"ä¸½å›­","can_delete":false,"product_type":"c1","uid":1316034,"ip_address":"","ucode":"4C4F0527C12894","user_header":"https://static001.geekbang.org/account/avatar/00/14/14/c2/e4b63ae3.jpg","comment_is_top":false,"comment_ctime":1634290475,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634290475","product_id":100015201,"comment_content":"è€å¸ˆå¥½ï¼Œä½¿ç”¨hostNetworkæ—¶ï¼Œé»˜è®¤ä½¿ç”¨ç®¡ç†ç½‘ï¼Œä½†æ˜¯é›†ç¾¤ä¸­çš„podé€šä¿¡éœ€è¦ä½¿ç”¨å†…ç½‘ï¼ŒhostNetworkå¯ä»¥é…ç½®ä½¿ç”¨é‚£ä¸ªç½‘ç»œå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":314137,"user_name":"å”æ±Ÿ","can_delete":false,"product_type":"c1","uid":1878120,"ip_address":"","ucode":"867C9808CF7760","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJpJXWFP3dNle88WnTkRTsEQkPJmOhepibiaTfhEtMRrbdg5EAWm4EzurA61oKxvCK2ZjMmy1QvmChw/132","comment_is_top":false,"comment_ctime":1632875024,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632875024","product_id":100015201,"comment_content":"è€å¸ˆï¼Œå®¹å™¨é‡Œé¢çš„ç½‘ç»œæ ˆå…·ä½“æ˜¯ä»€ä¹ˆè§’è‰²åœ¨å¤„ç†å‘€ï¼Ÿæ¯”å¦‚ç½‘ç»œå±‚æ•°æ®çš„æ‹†è§£åŒ…ï¼Œè®°å¾—å®¹å™¨é‡Œé¢æ²¡æœ‰å†…æ ¸ï¼Œæ•°æ®çš„7å±‚å¤„ç†æ˜¯ç¡åœ¨å¤„ç†ï¼Ÿ","like_count":0},{"had_liked":false,"id":308183,"user_name":"ä¸€ç¬‘æ·¡ç„¶","can_delete":false,"product_type":"c1","uid":1165645,"ip_address":"","ucode":"477ACF40DD74B8","user_header":"https://static001.geekbang.org/account/avatar/00/11/c9/4d/89a764b5.jpg","comment_is_top":false,"comment_ctime":1629444331,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629444331","product_id":100015201,"comment_content":"åœ¨å®¹å™¨å†…éƒ¨é€šè¿‡docker0çš„ipï¼Œèƒ½è®¿é—®å®¿ä¸»æœºä¸Šå…¶ä»–åº”ç”¨ç¨‹åºå—ï¼Œå¦å¤–docker0çš„ipæ˜¯å›ºå®šå—","like_count":0},{"had_liked":false,"id":299524,"user_name":"vincentjia","can_delete":false,"product_type":"c1","uid":1005699,"ip_address":"","ucode":"EC26D23594600D","user_header":"","comment_is_top":false,"comment_ctime":1624694532,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624694532","product_id":100015201,"comment_content":"æ·±è¯»ä¸€éï¼Œå—ç›ŠåŒªæµ…","like_count":0},{"had_liked":false,"id":298501,"user_name":"Geek_5baa01","can_delete":false,"product_type":"c1","uid":2470693,"ip_address":"","ucode":"EE194170C4B30E","user_header":"","comment_is_top":false,"comment_ctime":1624159436,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1624159436","product_id":100015201,"comment_content":"Veth Pair åœ¨ MAC ä¸ŠæŸ¥çœ‹ä¸äº†....","like_count":0},{"had_liked":false,"id":292024,"user_name":"è‘£æ°¸åˆš","can_delete":false,"product_type":"c1","uid":1169147,"ip_address":"","ucode":"ADA792B226A6CD","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/fb/837af7bf.jpg","comment_is_top":false,"comment_ctime":1620647316,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620647316","product_id":100015201,"comment_content":"å¯ä»¥ä½¿ç”¨å¦‚ä¸‹dockerfileåˆ›å»ºä¸€ä¸ªnginxé•œåƒï¼Œå¢åŠ ifconfig ï¼Œip linkç­‰å‘½ä»¤<br>[root@k8s-node1 dockerfile_dir]# cat Dockerfile <br>FROM nginx:1.9.1<br>RUN apt-get update &amp;&amp; apt install net-tools","like_count":0},{"had_liked":false,"id":291482,"user_name":"è‘£æ°¸åˆš","can_delete":false,"product_type":"c1","uid":1169147,"ip_address":"","ucode":"ADA792B226A6CD","user_header":"https://static001.geekbang.org/account/avatar/00/11/d6/fb/837af7bf.jpg","comment_is_top":false,"comment_ctime":1620303170,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620303170","product_id":100015201,"comment_content":"ä½ å¥½ï¼Œè€å¸ˆï¼š<br>è¯·é—®ï¼Œveth è®¾å¤‡å¦‚ä½•å¯¹åº”èµ·æ¥å‘¢ï¼Œæ¯”å¦‚ä¸»æœºçš„ä¸€ä¸ªveth å¯¹åº”çš„å“ªä¸ªå®¹å™¨çš„eth0å‘¢","like_count":0},{"had_liked":false,"id":284682,"user_name":"Geek_7769cb","can_delete":false,"product_type":"c1","uid":1586120,"ip_address":"","ucode":"4098431A2F27C2","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/qKojC39YlhNJfq3oPsVicNhhTJMmkicqQ54brKPaRrBkvibTadOwA9GYVwD8ywLhpplhWiaicVKUW3I60YAB1ib6OrpA/132","comment_is_top":false,"comment_ctime":1616415118,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1616415118","product_id":100015201,"comment_content":"<br>$ docker run â€“d â€“net=host --name nginx-host nginx<br><br>è¿™å¥åº”è¯¥æ˜¯ <br>$ docker run â€“d --net=host --name nginx-host nginx","like_count":0},{"had_liked":false,"id":284270,"user_name":"types","can_delete":false,"product_type":"c1","uid":2449777,"ip_address":"","ucode":"8B50927EF1804F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDUJyeq54fiaXAgF62tNeocO3lHsKT4mygEcNoZLnibg6ONKicMgCgUHSfgW8hrMUXlwpNSzR8MHZwg/132","comment_is_top":false,"comment_ctime":1616145108,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616145108","product_id":100015201,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œdocker containerå†…éƒ¨é€šè¿‡bridgeçš„æ–¹å¼è®¿é—®å¤–ç½‘ï¼Œå¤–ç½‘çš„æ•°æ®æ˜¯å¦‚ä½•è¾¾åˆ°å®¹å™¨å†…éƒ¨çš„ã€‚<br>ç›®å‰æˆ‘åœ¨ç½‘ä¸Šæœç´¢çš„ç»“æœæ˜¯SNATä¹‹åconntrackä¼šä¿å­˜ç›¸åº”çš„PNATä¿¡æ¯ï¼Œä»è€Œä¿è¯æ•°æ®å¯ä»¥å›æµï¼Œè¯·é—®æ˜¯å¦å‡†ç¡®ï¼ï¼","like_count":0},{"had_liked":false,"id":279058,"user_name":"ï¼Ÿ","can_delete":false,"product_type":"c1","uid":2030035,"ip_address":"","ucode":"3043E00A056081","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f9/d3/2cb7516e.jpg","comment_is_top":false,"comment_ctime":1613578333,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1613578333","product_id":100015201,"comment_content":"ç°åœ¨k8sæ¨èä½¿ç”¨ipvsï¼Œiptableå› ä¸ºæ˜¯éå†æ–¹å¼å»æŸ¥æ‰¾ç½‘ç»œè§„åˆ™çš„ï¼Œè€Œipvsåˆ™æ˜¯é€šè¿‡å“ˆå¸Œç®—æ³•ï¼Œå½“æˆ‘ä»¬é›†ç¾¤å¾ˆå¤§çš„æ—¶å€™ä¼šæœ‰å¤§é‡çš„iptableè§„åˆ™ï¼Œä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™","like_count":0,"discussions":[{"author":{"id":1057843,"avatar":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","nickname":"é˜¿ç”˜","note":"","ucode":"BC93175B70E05D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540488,"discussion_content":"IPVSæ˜¯LVSçš„å®ç°å§ï¼Ÿä¸»è¦åšè´Ÿè½½å‡è¡¡çš„ï¼Œè·Ÿiptableè¿˜ä¸ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640068177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269934,"user_name":"Geek_dcd9db","can_delete":false,"product_type":"c1","uid":2379525,"ip_address":"","ucode":"5B49BDFFC1EC6A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/dyMfbxmVZ1YTGg2bYOSia2icoIr815gJQF72XcibfFaLgqwcsDk48jDMmjITV3bBxXsPvd2v5IdRXvz4u6fSHUDwA/132","comment_is_top":false,"comment_ctime":1608859103,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608859103","product_id":100015201,"comment_content":"è€å¸ˆä½ å¥½ï¼Œå®¹å™¨è®¿é—®å®¿ä¸»æœºçš„æ—¶å€™ï¼Œæ•°æ®åŒ…å…ˆåˆ°è¾¾ç½‘æ¡¥ï¼Œé‚£ç½‘æ¡¥åˆ¤æ–­ä¸åœ¨ä¸€ä¸ªç½‘æ®µï¼Œæ€ä¹ˆè½¬å‘åˆ°å®¿ä¸»æœºçš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":266655,"user_name":"Wind","can_delete":false,"product_type":"c1","uid":1887603,"ip_address":"","ucode":"AD108636DE44C4","user_header":"https://static001.geekbang.org/account/avatar/00/1c/cd/73/f6889c2f.jpg","comment_is_top":false,"comment_ctime":1607427430,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607427430","product_id":100015201,"comment_content":"ç”µåŠ›çŒ« å“ˆå“ˆ","like_count":0},{"had_liked":false,"id":250119,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1600941361,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600941361","product_id":100015201,"comment_content":"å¯¹äºä½¿ç”¨hostç½‘ç»œè¿æ¥,éœ€è¦è€ƒè™‘çš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯ç«¯å£çš„å†²çªå¯èƒ½æ€§<br>å¦‚æœåœ¨ä¸€ä¸ªå®¿ä¸»æœºä¸Šè¿è¡Œå¤šä¸ªç›¸åŒè¿›ç¨‹,å¿…ç„¶ä¼šå‡ºç°ç«¯å£å†²çªçš„é—®é¢˜","like_count":0},{"had_liked":false,"id":245759,"user_name":"å¤§Gæ¥äº†å‘¦","can_delete":false,"product_type":"c1","uid":1610260,"ip_address":"","ucode":"97711D9CCA73B0","user_header":"https://static001.geekbang.org/account/avatar/00/18/92/14/6ca50b3b.jpg","comment_is_top":false,"comment_ctime":1599042157,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599042157","product_id":100015201,"comment_content":"ç½‘ç»œåŸºç¡€æ¯”è¾ƒè–„å¼±ï¼Œå¯¹äºk8sçš„ç½‘ç»œä¹‹å‰ä¹Ÿå­¦ä¹ è¿‡ï¼Œä½†æ˜¯æ€»æ˜¯å°è±¡ä¸æ·±åˆ»ï¼Œä¸è¿‡ç»è¿‡è€å¸ˆçš„è®²è§£ï¼Œæˆ‘ç°åœ¨å¯¹åé¢çš„ç½‘ç»œå­¦ä¹ ä¿¡æ¯å€å¢ï¼Œé€šä¿—æ˜“æ‡‚æŠŠå¤æ‚çš„çŸ¥è¯†ç‚¹è¯´æ˜ç™½ï¼Œæ‰æ˜¯çœŸçš„å‰å®³ï¼","like_count":0},{"had_liked":false,"id":242153,"user_name":"å†¬å†¬","can_delete":false,"product_type":"c1","uid":1180054,"ip_address":"","ucode":"B673E6482B5C93","user_header":"https://static001.geekbang.org/account/avatar/00/12/01/96/afcb6174.jpg","comment_is_top":false,"comment_ctime":1597625708,"is_pvip":false,"discussion_count":0,"race_medal":2,"score":"1597625708","product_id":100015201,"comment_content":"dockerå®ä¾‹é€šè¿‡VethPairä¸å®¿ä¸»æœºå»ºç«‹è¿æ¥å…³ç³»ï¼Œå…¶ä¸­Vethçš„ä¸€ç«¯åœ¨å®¹å™¨å†…ï¼Œå¦ä¸€æ®µæ’åœ¨å®¿ä¸»æœºçš„docker0ç½‘æ¡¥ä¸Šã€‚<br>å®¹å™¨å†…è¯·æ±‚è·¯ç”±æ˜¯é€šè¿‡å®¿ä¸»æœºå‘å¤–è½¬å‘ï¼Œåœ¨å®¹å™¨å†…ping otherIpæ—¶ éœ€å°†otherIpè½¬æ¢ä¸ºmacåœ°å€(é€šarpåœ°å€è§£æè·å–ç¡¬ä»¶åœ°å€)ï¼Œå®¹å™¨å†…æ— æ³•å®Œæˆæ­¤æ“ä½œ å®¹å™¨é€šè¿‡é»˜è®¤è·¯ç”±åœ¨å®¿ä¸»æœºè§£æï¼Œè·å–è¯·æ±‚macåœ°å€ ç„¶åä»å®¹å™¨ç»è¿‡docker0ä¸­ VethPairå¦å¤–ä¸€ç«¯ é€šè¿‡å®¿ä¸»æœºå°†è¯·æ±‚è½¬å‘å‡ºå»ã€‚","like_count":0},{"had_liked":false,"id":241416,"user_name":"åˆ˜æ˜“ä¹‹","can_delete":false,"product_type":"c1","uid":1909024,"ip_address":"","ucode":"1CDC3E98B92CE3","user_header":"https://static001.geekbang.org/account/avatar/00/1d/21/20/d7f5bb18.jpg","comment_is_top":false,"comment_ctime":1597288138,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597288138","product_id":100015201,"comment_content":"å…³äºè¯¾åé¢˜ç›®<br>1.ç›´æ¥æ˜¯å®¿ä¸»æœºç½‘ç»œ,å¯¹äºç«¯å£çš„ä½¿ç”¨ éœ€è¦è¿›è¡Œç»´æŠ¤,ä»¥å…é€ æˆç«¯å£å†²çª<br>2.éœ€è¦åšå¥½ç½‘ç»œéš”ç¦»","like_count":0},{"had_liked":false,"id":222406,"user_name":"cliff(äº®å‰‘)","can_delete":false,"product_type":"c1","uid":1314866,"ip_address":"","ucode":"A8D1A92331AE20","user_header":"https://static001.geekbang.org/account/avatar/00/14/10/32/e37aacfe.jpg","comment_is_top":false,"comment_ctime":1590796231,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1590796231","product_id":100015201,"comment_content":"RHEL8ä¸Šæ²¡æœ‰brctlï¼Œ å¦‚ä½•æŸ¥çœ‹ç½‘æ¡¥çš„ç«¯å£","like_count":0,"discussions":[{"author":{"id":1363634,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ce/b2/1f914527.jpg","nickname":"æµ·ç›—èˆ¹é•¿","note":"","ucode":"ECB28BA21A4113","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":290656,"discussion_content":"å®‰è£…ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594558640,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216839,"user_name":"æˆ‘æ˜¯è°","can_delete":false,"product_type":"c1","uid":1131907,"ip_address":"","ucode":"AE3996142811F4","user_header":"https://static001.geekbang.org/account/avatar/00/11/45/83/93d389ba.jpg","comment_is_top":false,"comment_ctime":1589353364,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589353364","product_id":100015201,"comment_content":"ä¸»æœº1ä¸Šçš„å®¹å™¨è®¿é—®ä¸»æœº2åº”è¯¥åšäº†æºåœ°å€è½¬æ¢å§ï¼Œè¿™ä¸ªåœ¨iptablesè§„åˆ™é‡Œæ²¡æœ‰çœ‹åˆ°ç›¸å…³çš„è§„åˆ™å•Šï¼Œè¯·é—®æœ‰äººçŸ¥é“æ˜¯æ€ä¹ˆåšçš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1296833,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIro8BKyich3jKa3z45RWMkXXSgXibbVN6d01KN4cot2ZzoAD5YsicxRV04QRlYfmVE4icLr5xQblrkqA/132","nickname":"éº¦å­","note":"","ucode":"160354D35D7ABB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":308960,"discussion_content":"nat è¡¨é‡Œé¢çš„ masqurade é‚£æ¡è§„åˆ™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601132366,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216673,"user_name":"Andy","can_delete":false,"product_type":"c1","uid":1119133,"ip_address":"","ucode":"4BCA899B8E4E85","user_header":"https://static001.geekbang.org/account/avatar/00/11/13/9d/0ff43179.jpg","comment_is_top":false,"comment_ctime":1589326222,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589326222","product_id":100015201,"comment_content":"æœ¬èŠ‚è¯¾å­¦åˆ°äº†ï¼ŒåŒä¸€å°æœåŠ¡å™¨å®¹å™¨é—´ç½‘ç»œæ˜¯äº’é€šçš„ï¼Œå¦‚æœæƒ³è®©ä¸åŒæœåŠ¡å™¨é—´å®¹å™¨äº’é€šï¼Œéœ€è¦ä¸€ä¸ªè¿æ¥æ‰€æœ‰æœåŠ¡å™¨çš„è™šæ‹Ÿç½‘ç»œæ’ä»¶ã€‚å­¦åˆ°äº†ï¼Œroute ã€brctl show","like_count":0},{"had_liked":false,"id":209140,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1587514931,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587514931","product_id":100015201,"comment_content":"å­¦ä¹ äº†ï¼Œç²¾å½©ã€‚æŒä¹…åŒ–çš„éƒ¨åˆ†æœ‰ç‚¹æ‡µï¼Œè·³è¿‡å­¦ä¹ å®¹å™¨ç½‘ç»œï¼Œå¼€å¤´è¿™ç¯‡å¾ˆå¥½æ‡‚ã€‚","like_count":0},{"had_liked":false,"id":202361,"user_name":"AE","can_delete":false,"product_type":"c1","uid":1007575,"ip_address":"","ucode":"57E32DCEC92245","user_header":"https://static001.geekbang.org/account/avatar/00/0f/5f/d7/4e036beb.jpg","comment_is_top":false,"comment_ctime":1585975469,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585975469","product_id":100015201,"comment_content":"è¯·é—®è¿™å¥è¯æ€ä¹ˆç†è§£ï¼Ÿ  ä¸å¤ªç†è§£  å‰¥å¤ºè°ƒç”¨ç½‘ç»œåè®®æ ˆå¤„ç†æ•°æ®åŒ…  é™çº§ç«¯å£<br>ä¸€æ—¦ä¸€å¼ è™šæ‹Ÿç½‘å¡è¢«â€œæ’â€åœ¨ç½‘æ¡¥ä¸Šï¼Œå®ƒå°±ä¼šå˜æˆè¯¥ç½‘æ¡¥çš„â€œä»è®¾å¤‡â€ã€‚ä»è®¾å¤‡ä¼šè¢«â€œå‰¥å¤ºâ€è°ƒç”¨ç½‘ç»œåè®®æ ˆå¤„ç†æ•°æ®åŒ…çš„èµ„æ ¼ï¼Œä»è€Œâ€œé™çº§â€æˆä¸ºç½‘æ¡¥ä¸Šçš„ä¸€ä¸ªç«¯å£ã€‚è€Œè¿™ä¸ªç«¯å£å”¯ä¸€çš„ä½œç”¨ï¼Œå°±æ˜¯æ¥æ”¶æµå…¥çš„æ•°æ®åŒ…ï¼Œç„¶åæŠŠè¿™äº›æ•°æ®åŒ…çš„â€œç”Ÿæ€å¤§æƒâ€ï¼ˆæ¯”å¦‚è½¬å‘æˆ–è€…ä¸¢å¼ƒï¼‰ï¼Œå…¨éƒ¨äº¤ç»™å¯¹åº”çš„ç½‘æ¡¥ã€‚","like_count":0},{"had_liked":false,"id":185107,"user_name":"å´”","can_delete":false,"product_type":"c1","uid":1120006,"ip_address":"","ucode":"09EF60A03327AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/17/06/e7fd65fc.jpg","comment_is_top":false,"comment_ctime":1583484686,"is_pvip":false,"replies":[{"id":"72833","content":"OSI å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1584423145,"ip_address":"","comment_id":185107,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1583484686","product_id":100015201,"comment_content":"ä¸å¥½æ„æ€ï¼Œè¿™é‡Œæƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæ–‡ä¸­æåˆ°çš„äºŒå±‚ç½‘ç»œï¼Œä»¥åŠåé¢æåˆ°çš„ä¸‰å±‚ç½‘ç»œï¼ŒæŒ‡çš„æ˜¯OSIæ¨¡å‹ï¼Œè¿˜æ˜¯TCP&#47;IP æ¨¡å‹","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486255,"discussion_content":"OSI å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584423145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175146,"user_name":"Dale","can_delete":false,"product_type":"c1","uid":1010056,"ip_address":"","ucode":"DD4717C06E417D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/69/88/528442b0.jpg","comment_is_top":false,"comment_ctime":1580570923,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580570923","product_id":100015201,"comment_content":"ç”Ÿäº§ç¯å¢ƒä½¿ç”¨HostNetworkï¼Œå› ä¸ºå¤ç”¨å®¿ä¸»æœºçš„ç½‘ç»œï¼Œæ‰€æœ‰æœåŠ¡ç«¯å£æå‰éœ€è¦è§„åˆ’å¥½ï¼Œä¸èƒ½å‡ºç°å†²çªã€‚","like_count":0},{"had_liked":false,"id":155150,"user_name":"å”è£è½©","can_delete":false,"product_type":"c1","uid":1268732,"ip_address":"","ucode":"D225DC43E94D23","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ8a5dg6aBRohA4bQ5KcHdDt6nCnrk0PiarfnVZ3zsgrBbjayAG1bhuAEfyZaNpplnXYDytZlWpfkA/132","comment_is_top":false,"comment_ctime":1574652191,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574652191","product_id":100015201,"comment_content":"æ”¹é€ è®¡ç®—æˆ–è€…æœåŠ¡æ¡†æ¶å‘€ï¼Œæ¯ä¸€ç±»è®¡ç®—æ¡†æ¶è‡ªå·±å»ä¸€æ®µç«¯å£åŒºé—´å¯»å€ã€‚ä¸­é—´ä»¶çš„äººåšpaasçš„æ—¶å€™æœ€å–œæ¬¢è¿™ä¹ˆåšäº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æ£€æŸ¥å¹¶å ç”¨ç«¯å£è¿™ä¸ªé€»è¾‘è¿‡ç¨‹å¾—åŸå­åŒ–ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°æ£€æŸ¥å®Œç«¯å£å¯ç”¨ä½†æ˜¯çœŸæ­£å»å ç”¨çš„æ—¶å€™å´å·²ç»è¢«å ç”¨äº†è¿™æ ·çš„é—®é¢˜","like_count":0},{"had_liked":false,"id":107482,"user_name":"GaelYang","can_delete":false,"product_type":"c1","uid":1463730,"ip_address":"","ucode":"B8E0B2402A7DCC","user_header":"https://static001.geekbang.org/account/avatar/00/16/55/b2/d70deacf.jpg","comment_is_top":false,"comment_ctime":1561543509,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561543509","product_id":100015201,"comment_content":"docker0 ç½‘æ¡¥ä¼šå¸¦æ¥æ€§èƒ½çš„ä¸‹é™å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":94172,"user_name":"æ·¡å®š","can_delete":false,"product_type":"c1","uid":1283773,"ip_address":"","ucode":"3BDB305F29FAEF","user_header":"https://static001.geekbang.org/account/avatar/00/13/96/bd/27ce72ab.jpg","comment_is_top":false,"comment_ctime":1557737348,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557737348","product_id":100015201,"comment_content":"è€å¸ˆï¼Œiptables &#47;netfilter é‚£ä¸ªè¿æ¥è²Œä¼¼ç¿»å¢™æ‰èƒ½ç”¨ï¼Œä½ è¿™è¾¹æœ‰iptablesçš„è®²è§£å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":58489,"user_name":"æ±¤å°¼æˆ¿","can_delete":false,"product_type":"c1","uid":1100996,"ip_address":"","ucode":"A4D961DD9C2F74","user_header":"https://static001.geekbang.org/account/avatar/00/10/cc/c4/5ac16f31.jpg","comment_is_top":false,"comment_ctime":1547089940,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1547089940","product_id":100015201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘åœ¨å®¹å™¨Aä¸­pingå®¹å™¨Bçš„ipçš„å®è·µä¸­ï¼Œé€šè¿‡å¯¹docker0ç½‘æ¡¥ã€å®¹å™¨Aåœ¨å®¿ä¸»æœºçš„è™šæ‹Ÿç½‘å¡ä»¥åŠå®¹å™¨Båœ¨å®¿ä¸»æœºçš„è™šæ‹Ÿç½‘å¡ä½¿ç”¨tcpdumpçš„æŠ“åŒ…å‘ç°ï¼ŒarpæŠ¥å‘Šçš„æ˜¯å®¹å™¨Bå†…çš„eth0çš„macåœ°å€ï¼Œåœ¨å®¿ä¸»æœºä¸Šarpå‘½ä»¤æŸ¥çœ‹å®¹å™¨Bçš„ipç¡®å®å¯¹åº”çš„æ˜¯å®¹å™¨Bä¸­çš„è™šæ‹Ÿç½‘å¡eth0çš„macåœ°å€ï¼Œè€Œä¸æ˜¯å®¹å™¨Båœ¨å®¿ä¸»æœºä¸Šæ’åœ¨docker0ä¸Šçš„è™šæ‹Ÿç½‘å¡çš„macåœ°å€ï¼Œé‚£è€å¸ˆåœ¨æ–‡ç« ä¸­é€šè¿‡æŸ¥çœ‹camçŸ¥é“å®¹å™¨åœ¨å®¿ä¸»æœºä¸Šçš„è™šæ‹Ÿç½‘å¡çš„ä¿¡æ¯ï¼Œè¿™ä¸€å—æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿè¿™ä¸€æ­¥æœ‰ç‚¹ç–‘æƒ‘ï¼Œæˆ–è€…è¯´çŸ¥é“äº†å®¹å™¨å†…çš„è™šæ‹Ÿç½‘å¡é»˜è®¤å°±çŸ¥é“å…¶åœ¨å®¿ä¸»æœºä¸Šå¯¹åº”çš„è™šæ‹Ÿç½‘å¡ï¼Ÿæœ›è€å¸ˆå¸®å¿™è§£æƒ‘ã€‚","like_count":0},{"had_liked":false,"id":50779,"user_name":"ç‰å‰‘å†°é”‹","can_delete":false,"product_type":"c1","uid":1214202,"ip_address":"","ucode":"8EA56A71BA5B22","user_header":"https://static001.geekbang.org/account/avatar/00/12/86/fa/4bcd7365.jpg","comment_is_top":false,"comment_ctime":1545044183,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545044183","product_id":100015201,"comment_content":"è¯·æ•™ä¸€ä¸‹ï¼Œå¤šä¸ªè¿è¡Œå®¹å™¨ï¼Œå¦‚ä½•å¯¹åº”å®¹å™¨ä¸å®¿ä¸»æœºå¯¹åº”çš„è™šæ‹Ÿç½‘å¡ï¼Ÿ","like_count":0},{"had_liked":false,"id":47873,"user_name":"æ—è¾‰","can_delete":false,"product_type":"c1","uid":1103911,"ip_address":"","ucode":"A51EBC35DA54AD","user_header":"https://static001.geekbang.org/account/avatar/00/10/d8/27/5d7bf561.jpg","comment_is_top":false,"comment_ctime":1544242125,"is_pvip":false,"replies":[{"id":"17505","content":"æ˜¯ä¹ˆâ€¦â€¦ç¼–è¾‘çœ‹ä¸€ä¸‹ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1544533474,"ip_address":"","comment_id":47873,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1544242125","product_id":100015201,"comment_content":"è€å¸ˆï¼Œä½ çš„ç¬¬ä¸€æ¡å‘½ä»¤-dçš„-æ ·å¼ä¸å¯¹ã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":431922,"discussion_content":"æ˜¯ä¹ˆâ€¦â€¦ç¼–è¾‘çœ‹ä¸€ä¸‹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1544533474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43111,"user_name":"jssfy","can_delete":false,"product_type":"c1","uid":1137238,"ip_address":"","ucode":"F16353CFE607B7","user_header":"https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg","comment_is_top":false,"comment_ctime":1543167502,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1543167502","product_id":100015201,"comment_content":"èµä¸€ä¸ªï¼<br>è¯·é—®172.17.0.1è¿™ä¸ªipå’Œdocker0ç½‘æ¡¥æ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿæ˜¯å¦å¯ä»¥ç†è§£ä¸ºè¿æ¥å®¿ä¸»æœºçš„vethä¸€ç«¯","like_count":0},{"had_liked":false,"id":37177,"user_name":"swordholder","can_delete":false,"product_type":"c1","uid":1002569,"ip_address":"","ucode":"3D1361126AD3CB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/49/d21c134f.jpg","comment_is_top":false,"comment_ctime":1541474654,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1541474654","product_id":100015201,"comment_content":"dockerçš„è·¨ä¸»æœºç½‘ç»œæœ‰ä¸¤ç§æ–¹å¼ï¼šoverlayå°åŒ…å’Œè·¯ç”±<br>ç°åœ¨å…¬æœ‰äº‘éƒ½æä¾›äº†kubernetesæœåŠ¡ï¼Œé‚£ä¹ˆåœ¨é˜¿é‡Œäº‘æˆ–è…¾è®¯äº‘ä¸Šåˆ›å»ºçš„é›†ç¾¤ï¼Œé‡‡ç”¨çš„æ˜¯å“ªç§æ–¹å¼ï¼Ÿ","like_count":0},{"had_liked":false,"id":37045,"user_name":"loda","can_delete":false,"product_type":"c1","uid":1043287,"ip_address":"","ucode":"3F9575DBFA1031","user_header":"https://static001.geekbang.org/account/avatar/00/0f/eb/57/3032e1a7.jpg","comment_is_top":false,"comment_ctime":1541431502,"is_pvip":false,"replies":[{"id":"13382","content":"æ˜¯çš„ï¼Œå·²ä¿®æ­£","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1541508125,"ip_address":"","comment_id":37045,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1541431502","product_id":100015201,"comment_content":"åœ¨å®¿ä¸»æœºä¸Šifconfigçœ‹åˆ°çš„è™šæ‹Ÿç½‘å¡åº”è¯¥æ˜¯veth9c02e56ï¼Œè€Œä¸æ˜¯vethb4963f3ï¼Œ12è¡Œä»£ç åº”è¯¥æœ‰ç‚¹é—®é¢˜","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428139,"discussion_content":"æ˜¯çš„ï¼Œå·²ä¿®æ­£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1541508125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":36994,"user_name":"gogo","can_delete":false,"product_type":"c1","uid":1003104,"ip_address":"","ucode":"E8F0F3B000020A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","comment_is_top":false,"comment_ctime":1541415045,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1541415045","product_id":100015201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œé›†ç¾¤ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„kubeletä¸€ç›´æŠ¥é”™ï¼Œ&#47;sys&#47;fs&#47;cgroup&#47;devices&#47;kubupods&#47;pod... no space left on device,é‡å¯äº†dockerå’Œkubeletæ— æ•ˆï¼Œè¯·é—®è¿™å¯èƒ½æ˜¯ä»€ä¹ˆåŸå› å‘¢","like_count":0}]}