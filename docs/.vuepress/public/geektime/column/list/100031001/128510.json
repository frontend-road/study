{"id":128510,"title":"27 | å¦‚ä½•åœ¨Dartå±‚å…¼å®¹Android/iOSå¹³å°ç‰¹å®šå®ç°ï¼Ÿï¼ˆäºŒï¼‰","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚</p><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸ä½ ä»‹ç»äº†æ–¹æ³•é€šé“ï¼Œè¿™ç§åœ¨Flutterä¸­å®ç°è°ƒç”¨åŸç”ŸAndroidã€iOSä»£ç çš„è½»é‡çº§è§£å†³æ–¹æ¡ˆã€‚ä½¿ç”¨æ–¹æ³•é€šé“ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåŸç”Ÿä»£ç æ‰€æ‹¥æœ‰çš„èƒ½åŠ›ï¼Œä»¥æ¥å£å½¢å¼æä¾›ç»™Dartã€‚</p><p>è¿™æ ·ï¼Œå½“å‘èµ·æ–¹æ³•è°ƒç”¨æ—¶ï¼ŒFlutteråº”ç”¨ä¼šä»¥ç±»ä¼¼ç½‘ç»œå¼‚æ­¥è°ƒç”¨çš„æ–¹å¼ï¼Œå°†è¯·æ±‚æ•°æ®é€šè¿‡ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦æŒ‡å®šçš„æ–¹æ³•é€šé“ä¼ è¾“è‡³åŸç”Ÿä»£ç å®¿ä¸»ï¼›è€ŒåŸç”Ÿä»£ç å¤„ç†å®Œæ¯•åï¼Œä¼šå°†å“åº”ç»“æœé€šè¿‡æ–¹æ³•é€šé“å›ä¼ è‡³Flutterï¼Œä»è€Œå®ç°Dartä»£ç ä¸åŸç”ŸAndroidã€iOSä»£ç çš„äº¤äº’ã€‚è¿™ï¼Œä¸è°ƒç”¨ä¸€ä¸ªæœ¬åœ°çš„Dart å¼‚æ­¥APIå¹¶æ— å¤ªå¤šåŒºåˆ«ã€‚</p><p>é€šè¿‡æ–¹æ³•é€šé“ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåŸç”Ÿæ“ä½œç³»ç»Ÿæä¾›çš„åº•å±‚èƒ½åŠ›ï¼Œä»¥åŠç°æœ‰åŸç”Ÿå¼€å‘ä¸­ä¸€äº›ç›¸å¯¹æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆï¼Œä»¥æ¥å£å°è£…çš„å½¢å¼åœ¨Dartå±‚å¿«é€Ÿæå®šï¼Œä»è€Œè§£å†³åŸç”Ÿä»£ç åœ¨Flutterä¸Šçš„å¤ç”¨é—®é¢˜ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨Flutteræœ¬èº«æä¾›çš„ä¸°å¯Œæ§ä»¶ï¼Œåšå¥½UIæ¸²æŸ“ã€‚</p><p>åº•å±‚èƒ½åŠ›+åº”ç”¨å±‚æ¸²æŸ“ï¼Œçœ‹ä¼¼æˆ‘ä»¬å·²ç»æå®šäº†æ­å»ºä¸€ä¸ªå¤æ‚Appçš„æ‰€æœ‰å†…å®¹ã€‚ä½†ï¼ŒçœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿ</p><h2>æ„å»ºä¸€ä¸ªå¤æ‚Appéƒ½éœ€è¦ä»€ä¹ˆï¼Ÿ</h2><p>åˆ«æ€¥ï¼Œåœ¨ä¸‹ç»“è®ºä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŒ‰ç…§å››è±¡é™åˆ†ææ³•ï¼ŒæŠŠèƒ½åŠ›å’Œæ¸²æŸ“åˆ†è§£æˆå››ä¸ªç»´åº¦ï¼Œåˆ†ææ„å»ºä¸€ä¸ªå¤æ‚Appéƒ½éœ€è¦ä»€ä¹ˆã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d1/cc/d1826dfb3a8b688db04cbf5beb04f2cc.png?wh=1022*802\" alt=\"\"></p><center><span class=\"reference\">å›¾1 å››è±¡é™åˆ†ææ³•</span></center><!-- [[[read_end]]] --><p>ç»è¿‡åˆ†æï¼Œæˆ‘ä»¬ç»ˆäºå‘ç°ï¼ŒåŸæ¥æ„å»ºä¸€ä¸ªAppéœ€è¦è¦†ç›–é‚£ä¹ˆå¤šçš„çŸ¥è¯†ç‚¹ï¼Œé€šè¿‡Flutterå’Œæ–¹æ³•é€šé“åªèƒ½æå®šåº”ç”¨å±‚æ¸²æŸ“ã€åº”ç”¨å±‚èƒ½åŠ›å’Œåº•å±‚èƒ½åŠ›ï¼Œå¯¹äºé‚£äº›æ¶‰åŠåˆ°åº•å±‚æ¸²æŸ“ï¼Œæ¯”å¦‚æµè§ˆå™¨ã€ç›¸æœºã€åœ°å›¾ï¼Œä»¥åŠåŸç”Ÿè‡ªå®šä¹‰è§†å›¾çš„åœºæ™¯ï¼Œè‡ªå·±åœ¨Flutterä¸Šé‡æ–°å¼€å‘ä¸€å¥—æ˜¾ç„¶ä¸å¤ªç°å®ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ··åˆè§†å›¾çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚æˆ‘ä»¬å¯ä»¥åœ¨Flutterçš„Widgetæ ‘ä¸­æå‰é¢„ç•™ä¸€å—ç©ºç™½åŒºåŸŸï¼Œåœ¨Flutterçš„ç”»æ¿ä¸­ï¼ˆå³FlutterViewä¸FlutterViewControllerï¼‰åµŒå…¥ä¸€ä¸ªä¸ç©ºç™½åŒºåŸŸå®Œå…¨åŒ¹é…çš„åŸç”Ÿè§†å›¾ï¼Œå°±å¯ä»¥å®ç°æƒ³è¦çš„è§†è§‰æ•ˆæœäº†ã€‚</p><p>ä½†æ˜¯ï¼Œé‡‡ç”¨è¿™ç§æ–¹æ¡ˆæå…¶ä¸ä¼˜é›…ï¼Œå› ä¸ºåµŒå…¥çš„åŸç”Ÿè§†å›¾å¹¶ä¸åœ¨Flutterçš„æ¸²æŸ“å±‚çº§ä¸­ï¼Œéœ€è¦åŒæ—¶åœ¨Flutterä¾§ä¸åŸç”Ÿä¾§åšå¤§é‡çš„é€‚é…å·¥ä½œï¼Œæ‰èƒ½å®ç°æ­£å¸¸çš„ç”¨æˆ·äº¤äº’ä½“éªŒã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼ŒFlutteræä¾›äº†ä¸€ä¸ªå¹³å°è§†å›¾ï¼ˆPlatform Viewï¼‰çš„æ¦‚å¿µã€‚å®ƒæä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå…è®¸å¼€å‘è€…åœ¨Flutteré‡Œé¢åµŒå…¥åŸç”Ÿç³»ç»Ÿï¼ˆAndroidå’ŒiOSï¼‰çš„è§†å›¾ï¼Œå¹¶åŠ å…¥åˆ°Flutterçš„æ¸²æŸ“æ ‘ä¸­ï¼Œå®ç°ä¸Flutterä¸€è‡´çš„äº¤äº’ä½“éªŒã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œé€šè¿‡å¹³å°è§†å›¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ä¸€ä¸ªåŸç”Ÿæ§ä»¶åŒ…è£…æˆFlutteræ§ä»¶ï¼ŒåµŒå…¥åˆ°Flutteré¡µé¢ä¸­ï¼Œå°±åƒä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„Widgetä¸€æ ·ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä¸ä½ è¯¦ç»†è®²è¿°å¦‚ä½•ä½¿ç”¨å¹³å°è§†å›¾ã€‚</p><h2>å¹³å°è§†å›¾</h2><p>å¦‚æœè¯´æ–¹æ³•é€šé“è§£å†³çš„æ˜¯åŸç”Ÿèƒ½åŠ›é€»è¾‘å¤ç”¨é—®é¢˜ï¼Œé‚£ä¹ˆå¹³å°è§†å›¾è§£å†³çš„å°±æ˜¯åŸç”Ÿè§†å›¾å¤ç”¨é—®é¢˜ã€‚Flutteræä¾›äº†ä¸€ç§è½»é‡çº§çš„æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å¯ä»¥åˆ›å»ºåŸç”Ÿï¼ˆAndroidå’ŒiOSï¼‰çš„è§†å›¾ï¼Œé€šè¿‡ä¸€äº›ç®€å•çš„Dartå±‚æ¥å£å°è£…ä¹‹åï¼Œå°±å¯ä»¥å°†å®ƒæ’å…¥Widgetæ ‘ä¸­ï¼Œå®ç°åŸç”Ÿè§†å›¾ä¸Flutterè§†å›¾çš„æ··ç”¨ã€‚</p><p>ä¸€æ¬¡å…¸å‹çš„å¹³å°è§†å›¾ä½¿ç”¨è¿‡ç¨‹ä¸æ–¹æ³•é€šé“ç±»ä¼¼ï¼š</p><ul>\n<li>é¦–å…ˆï¼Œç”±ä½œä¸ºå®¢æˆ·ç«¯çš„Flutterï¼Œé€šè¿‡å‘åŸç”Ÿè§†å›¾çš„Flutterå°è£…ç±»ï¼ˆåœ¨iOSå’ŒAndroidå¹³å°åˆ†åˆ«æ˜¯UIKitViewå’ŒAndroidViewï¼‰ä¼ å…¥è§†å›¾æ ‡è¯†ç¬¦ï¼Œç”¨äºå‘èµ·åŸç”Ÿè§†å›¾çš„åˆ›å»ºè¯·æ±‚ï¼›</li>\n<li>ç„¶åï¼ŒåŸç”Ÿä»£ç ä¾§å°†å¯¹åº”åŸç”Ÿè§†å›¾çš„åˆ›å»ºäº¤ç»™å¹³å°è§†å›¾å·¥å‚ï¼ˆPlatformViewFactoryï¼‰å®ç°ï¼›</li>\n<li>æœ€åï¼Œåœ¨åŸç”Ÿä»£ç ä¾§å°†è§†å›¾æ ‡è¯†ç¬¦ä¸å¹³å°è§†å›¾å·¥å‚è¿›è¡Œå…³è”æ³¨å†Œï¼Œè®©Flutterå‘èµ·çš„è§†å›¾åˆ›å»ºè¯·æ±‚å¯ä»¥ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„è§†å›¾åˆ›å»ºå·¥å‚ã€‚</li>\n</ul><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒä½¿ç”¨Widgeté‚£æ ·ï¼Œä½¿ç”¨åŸç”Ÿè§†å›¾äº†ã€‚æ•´ä¸ªæµç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/2b/e8/2b3afbb05585c474e4dc2d18bf6066e8.png?wh=1108*768\" alt=\"\"></p><center><span class=\"reference\">å›¾2 å¹³å°è§†å›¾ç¤ºä¾‹</span></center><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¥ä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ªçº¢è‰²çš„åŸç”Ÿè§†å›¾å†…åµŒåˆ°Flutterä¸­ï¼Œä¸ä½ æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å¹³å°è§†å›¾ã€‚è¿™éƒ¨åˆ†å†…å®¹ä¸»è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š</p><ul>\n<li>ä½œä¸ºè°ƒç”¨å‘èµ·æ–¹çš„Flutterï¼Œå¦‚ä½•å®ç°åŸç”Ÿè§†å›¾çš„æ¥å£è°ƒç”¨ï¼Ÿ</li>\n<li>å¦‚ä½•åœ¨åŸç”Ÿï¼ˆAndroidå’ŒiOSï¼‰ç³»ç»Ÿå®ç°æ¥å£ï¼Ÿ</li>\n</ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†åˆ†åˆ«ä¸ä½ è®²è¿°è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p><h3>Flutterå¦‚ä½•å®ç°åŸç”Ÿè§†å›¾çš„æ¥å£è°ƒç”¨ï¼Ÿ</h3><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨SampleViewçš„å†…éƒ¨ï¼Œåˆ†åˆ«ä½¿ç”¨äº†åŸç”ŸAndroidã€iOSè§†å›¾çš„å°è£…ç±»AndroidViewå’ŒUIkitViewï¼Œå¹¶ä¼ å…¥äº†ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºå’ŒåŸç”Ÿè§†å›¾å»ºç«‹å…³è”ï¼š</p><pre><code>class SampleView extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    //ä½¿ç”¨Androidå¹³å°çš„AndroidViewï¼Œä¼ å…¥å”¯ä¸€æ ‡è¯†ç¬¦sampleView\n    if (defaultTargetPlatform == TargetPlatform.android) {\n      return AndroidView(viewType: 'sampleView');\n    } else {\n      //ä½¿ç”¨iOSå¹³å°çš„UIKitViewï¼Œä¼ å…¥å”¯ä¸€æ ‡è¯†ç¬¦sampleView\n      return UiKitView(viewType: 'sampleView');\n    }\n  }\n}\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œå¹³å°è§†å›¾åœ¨Flutterä¾§çš„ä½¿ç”¨æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä¸æ™®é€šWidgetå¹¶æ— æ˜æ˜¾åŒºåˆ«ã€‚è€Œå…³äºæ™®é€šWidgetçš„ä½¿ç”¨æ–¹å¼ï¼Œä½ å¯ä»¥å‚è€ƒç¬¬<a href=\"https://time.geekbang.org/column/article/110292\">12</a>ã€<a href=\"https://time.geekbang.org/column/article/110859\">13</a>ç¯‡çš„ç›¸å…³å†…å®¹è¿›è¡Œå¤ä¹ ã€‚</p><p>è°ƒç”¨æ–¹çš„å®ç°æå®šäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åŸç”Ÿä»£ç ä¸­å®Œæˆè§†å›¾åˆ›å»ºçš„å°è£…ï¼Œå»ºç«‹ç›¸å…³çš„ç»‘å®šå…³ç³»ã€‚åŒæ ·çš„ï¼Œç”±äºéœ€è¦åŒæ—¶é€‚é…Androidå’ŒiOSå¹³å°ï¼Œæˆ‘ä»¬éœ€è¦åˆ†åˆ«åœ¨ä¸¤ä¸ªç³»ç»Ÿä¸Šå®Œæˆå¯¹åº”çš„æ¥å£å®ç°ã€‚</p><h3>å¦‚ä½•åœ¨åŸç”Ÿç³»ç»Ÿå®ç°æ¥å£ï¼Ÿ</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹<strong>Androidç«¯çš„å®ç°</strong>ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«åˆ›å»ºäº†å¹³å°è§†å›¾å·¥å‚å’ŒåŸç”Ÿè§†å›¾å°è£…ç±»ï¼Œå¹¶é€šè¿‡è§†å›¾å·¥å‚çš„createæ–¹æ³•ï¼Œå°†å®ƒä»¬å…³è”èµ·æ¥ï¼š</p><pre><code>//è§†å›¾å·¥å‚ç±»\nclass SampleViewFactory extends PlatformViewFactory {\n    private final BinaryMessenger messenger;\n    //åˆå§‹åŒ–æ–¹æ³•\n    public SampleViewFactory(BinaryMessenger msger) {\n        super(StandardMessageCodec.INSTANCE);\n        messenger = msger;\n    }\n    //åˆ›å»ºåŸç”Ÿè§†å›¾å°è£…ç±»ï¼Œå®Œæˆå…³è”\n    @Override\n    public PlatformView create(Context context, int id, Object obj) {\n        return new SimpleViewControl(context, id, messenger);\n    }\n}\n//åŸç”Ÿè§†å›¾å°è£…ç±»\nclass SimpleViewControl implements PlatformView {\n    private final View view;//ç¼“å­˜åŸç”Ÿè§†å›¾\n    //åˆå§‹åŒ–æ–¹æ³•ï¼Œæå‰åˆ›å»ºå¥½è§†å›¾\n    public SimpleViewControl(Context context, int id, BinaryMessenger messenger) {\n        view = new View(context);\n        view.setBackgroundColor(Color.rgb(255, 0, 0));\n    }\n    \n    //è¿”å›åŸç”Ÿè§†å›¾\n    @Override\n    public View getView() {\n        return view;\n    }\n    //åŸç”Ÿè§†å›¾é”€æ¯å›è°ƒ\n    @Override\n    public void dispose() {\n    }\n}\n</code></pre><p>å°†åŸç”Ÿè§†å›¾å°è£…ç±»ä¸åŸç”Ÿè§†å›¾å·¥å‚å®Œæˆå…³è”åï¼Œæ¥ä¸‹æ¥å°±éœ€è¦å°†Flutterä¾§çš„è°ƒç”¨ä¸è§†å›¾å·¥å‚ç»‘å®šèµ·æ¥äº†ã€‚ä¸ä¸Šä¸€ç¯‡æ–‡ç« è®²è¿°çš„æ–¹æ³•é€šé“ç±»ä¼¼ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦åœ¨MainActivityä¸­è¿›è¡Œç»‘å®šæ“ä½œï¼š</p><pre><code>protected void onCreate(Bundle savedInstanceState) {\n  ...\n  Registrar registrar =    registrarFor(&quot;samples.chenhang/native_views&quot;);//ç”Ÿæˆæ³¨å†Œç±»\n  SampleViewFactory playerViewFactory = new SampleViewFactory(registrar.messenger());//ç”Ÿæˆè§†å›¾å·¥å‚\n\nregistrar.platformViewRegistry().registerViewFactory(&quot;sampleView&quot;, playerViewFactory);//æ³¨å†Œè§†å›¾å·¥å‚\n}\n</code></pre><p>å®Œæˆç»‘å®šä¹‹åï¼Œå¹³å°è§†å›¾è°ƒç”¨å“åº”çš„Androidéƒ¨åˆ†å°±æå®šäº†ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹<strong>iOSç«¯çš„å®ç°</strong>ã€‚</p><p>ä¸Androidç±»ä¼¼ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦åˆ†åˆ«åˆ›å»ºå¹³å°è§†å›¾å·¥å‚å’ŒåŸç”Ÿè§†å›¾å°è£…ç±»ï¼Œå¹¶é€šè¿‡è§†å›¾å·¥å‚çš„createæ–¹æ³•ï¼Œå°†å®ƒä»¬å…³è”èµ·æ¥ï¼š</p><pre><code>//å¹³å°è§†å›¾å·¥å‚\n@interface SampleViewFactory : NSObject&lt;FlutterPlatformViewFactory&gt;\n- (instancetype)initWithMessenger:(NSObject&lt;FlutterBinaryMessenger&gt;*)messager;\n@end\n\n@implementation SampleViewFactory{\n  NSObject&lt;FlutterBinaryMessenger&gt;*_messenger;\n}\n\n- (instancetype)initWithMessenger:(NSObject&lt;FlutterBinaryMessenger&gt; *)messager{\n  self = [super init];\n  if (self) {\n    _messenger = messager;\n  }\n  return self;\n}\n\n-(NSObject&lt;FlutterMessageCodec&gt; *)createArgsCodec{\n  return [FlutterStandardMessageCodec sharedInstance];\n}\n\n//åˆ›å»ºåŸç”Ÿè§†å›¾å°è£…å®ä¾‹\n-(NSObject&lt;FlutterPlatformView&gt; *)createWithFrame:(CGRect)frame viewIdentifier:(int64_t)viewId arguments:(id)args{\n  SampleViewControl *activity = [[SampleViewControl alloc] initWithWithFrame:frame viewIdentifier:viewId arguments:args binaryMessenger:_messenger];\n  return activity;\n}\n@end\n\n//å¹³å°è§†å›¾å°è£…ç±»\n@interface SampleViewControl : NSObject&lt;FlutterPlatformView&gt;\n- (instancetype)initWithWithFrame:(CGRect)frame viewIdentifier:(int64_t)viewId arguments:(id _Nullable)args binaryMessenger:(NSObject&lt;FlutterBinaryMessenger&gt;*)messenger;\n@end\n\n@implementation SampleViewControl{\n    UIView * _templcateView;\n}\n//åˆ›å»ºåŸç”Ÿè§†å›¾\n- (instancetype)initWithWithFrame:(CGRect)frame viewIdentifier:(int64_t)viewId arguments:(id)args binaryMessenger:(NSObject&lt;FlutterBinaryMessenger&gt; *)messenger{\n  if ([super init]) {\n    _templcateView = [[UIView alloc] init];\n    _templcateView.backgroundColor = [UIColor redColor];\n  }\n  return self;\n}\n\n-(UIView *)view{\n  return _templcateView;\n}\n\n@end\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦æŠŠåŸç”Ÿè§†å›¾çš„åˆ›å»ºä¸Flutterä¾§çš„è°ƒç”¨å…³è”èµ·æ¥ï¼Œæ‰å¯ä»¥åœ¨Flutterä¾§æ‰¾åˆ°åŸç”Ÿè§†å›¾çš„å®ç°ï¼š</p><pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {\n  NSObject&lt;FlutterPluginRegistrar&gt;* registrar = [self registrarForPlugin:@&quot;samples.chenhang/native_views&quot;];//ç”Ÿæˆæ³¨å†Œç±»\n  SampleViewFactory* viewFactory = [[SampleViewFactory alloc] initWithMessenger:registrar.messenger];//ç”Ÿæˆè§†å›¾å·¥å‚\n    [registrar registerViewFactory:viewFactory withId:@&quot;sampleView&quot;];//æ³¨å†Œè§†å›¾å·¥å‚\n ...\n}\n</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨iOSå¹³å°ä¸Šï¼ŒFlutterå†…åµŒUIKitViewç›®å‰è¿˜å¤„äºæŠ€æœ¯é¢„è§ˆçŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦åœ¨Info.plistæ–‡ä»¶ä¸­å¢åŠ ä¸€é¡¹é…ç½®ï¼ŒæŠŠå†…åµŒåŸç”Ÿè§†å›¾çš„åŠŸèƒ½å¼€å…³è®¾ç½®ä¸ºtrueï¼Œæ‰èƒ½æ‰“å¼€è¿™ä¸ªéšè—åŠŸèƒ½ï¼š</p><pre><code>&lt;dict&gt;\n   ...\n  &lt;key&gt;io.flutter.embedded_views_preview&lt;/key&gt;\n  &lt;true/&gt;\n  ....\n&lt;/dict&gt;\n</code></pre><p>ç»è¿‡ä¸Šé¢çš„å°è£…ä¸ç»‘å®šï¼ŒAndroidç«¯ä¸iOSç«¯çš„å¹³å°è§†å›¾åŠŸèƒ½éƒ½å·²ç»å®ç°äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Flutteråº”ç”¨é‡Œï¼Œåƒä½¿ç”¨æ™®é€šWidgetä¸€æ ·ï¼Œå»å†…åµŒåŸç”Ÿè§†å›¾äº†ï¼š</p><pre><code> Scaffold(\n        backgroundColor: Colors.yellowAccent,\n        body:  Container(width: 200, height:200,\n            child: SampleView(controller: controller)\n        ));\n</code></pre><p>å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬åˆ†åˆ«åœ¨iOSå’ŒAndroidå¹³å°çš„Flutteråº”ç”¨ä¸Šï¼Œå†…åµŒäº†ä¸€ä¸ªçº¢è‰²çš„åŸç”Ÿè§†å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/09/3f/095093cea18f8e18b6de2c94e447d03f.png?wh=2018*1792\" alt=\"\"></p><center><span class=\"reference\">å›¾3 å†…åµŒåŸç”Ÿè§†å›¾ç¤ºä¾‹</span></center><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åŸç”Ÿè§†å›¾å°è£…åœ¨ä¸€ä¸ªStatelessWidgetä¸­ï¼Œå¯ä»¥æœ‰æ•ˆåº”å¯¹é™æ€å±•ç¤ºçš„åœºæ™¯ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´åŸç”Ÿè§†å›¾çš„æ ·å¼ï¼Œåˆè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p><h2>å¦‚ä½•åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼ŒåŠ¨æ€åœ°è°ƒæ•´åŸç”Ÿè§†å›¾çš„æ ·å¼ï¼Ÿ</h2><p>ä¸åŸºäºå£°æ˜å¼çš„Flutter Widgetï¼Œæ¯æ¬¡å˜åŒ–åªèƒ½ä»¥æ•°æ®é©±åŠ¨å…¶è§†å›¾é”€æ¯é‡å»ºä¸åŒï¼ŒåŸç”Ÿè§†å›¾æ˜¯åŸºäºå‘½ä»¤å¼çš„ï¼Œå¯ä»¥ç²¾ç¡®åœ°æ§åˆ¶è§†å›¾å±•ç¤ºæ ·å¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŸç”Ÿè§†å›¾çš„å°è£…ç±»ä¸­ï¼Œå°†å…¶æŒæœ‰çš„ä¿®æ”¹è§†å›¾å®ä¾‹ç›¸å…³çš„æ¥å£ï¼Œä»¥æ–¹æ³•é€šé“çš„æ–¹å¼æš´éœ²ç»™Flutterï¼Œè®©Flutterä¹Ÿå¯ä»¥æ‹¥æœ‰åŠ¨æ€è°ƒæ•´è§†å›¾è§†è§‰æ ·å¼çš„èƒ½åŠ›ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¥ä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ä½•åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´å†…åµŒåŸç”Ÿè§†å›¾çš„èƒŒæ™¯é¢œè‰²ã€‚</p><p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°åŸç”Ÿè§†å›¾çš„ä¸€ä¸ªåˆå§‹åŒ–å±æ€§ï¼Œå³onPlatformViewCreatedï¼šåŸç”Ÿè§†å›¾ä¼šåœ¨å…¶åˆ›å»ºå®Œæˆåï¼Œä»¥å›è°ƒçš„å½¢å¼é€šçŸ¥è§†å›¾idï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ—¶å€™æ³¨å†Œæ–¹æ³•é€šé“ï¼Œè®©åç»­çš„è§†å›¾ä¿®æ”¹è¯·æ±‚é€šè¿‡è¿™æ¡é€šé“ä¼ é€’ç»™åŸç”Ÿè§†å›¾ã€‚</p><p>ç”±äºæˆ‘ä»¬åœ¨åº•å±‚ç›´æ¥æŒæœ‰äº†åŸç”Ÿè§†å›¾çš„å®ä¾‹ï¼Œå› æ­¤ç†è®ºä¸Šå¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªåŸç”Ÿè§†å›¾çš„Flutterå°è£…ç±»ä¸Šæä¾›è§†å›¾ä¿®æ”¹æ–¹æ³•ï¼Œè€Œä¸ç®¡å®ƒåˆ°åº•æ˜¯StatelessWidgetè¿˜æ˜¯StatefulWidgetã€‚ä½†ä¸ºäº†éµç…§Flutterçš„Widgetè®¾è®¡ç†å¿µï¼Œæˆ‘ä»¬è¿˜æ˜¯å†³å®šå°†è§†å›¾å±•ç¤ºä¸è§†å›¾æ§åˆ¶åˆ†ç¦»ï¼Œå³ï¼šå°†åŸç”Ÿè§†å›¾å°è£…ä¸ºä¸€ä¸ªStatefulWidgetä¸“é—¨ç”¨äºå±•ç¤ºï¼Œé€šè¿‡å…¶controlleråˆå§‹åŒ–å‚æ•°ï¼Œåœ¨è¿è¡ŒæœŸä¿®æ”¹åŸç”Ÿè§†å›¾çš„å±•ç¤ºæ•ˆæœã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>//åŸç”Ÿè§†å›¾æ§åˆ¶å™¨\nclass NativeViewController {\n  MethodChannel _channel;\n  //åŸç”Ÿè§†å›¾å®Œæˆåˆ›å»ºåï¼Œé€šè¿‡idç”Ÿæˆå”¯ä¸€æ–¹æ³•é€šé“\n  onCreate(int id) {\n    _channel = MethodChannel('samples.chenhang/native_views_$id');\n  }\n  //è°ƒç”¨åŸç”Ÿè§†å›¾æ–¹æ³•ï¼Œæ”¹å˜èƒŒæ™¯é¢œè‰²\n  Future&lt;void&gt; changeBackgroundColor() async {\n    return _channel.invokeMethod('changeBackgroundColor');\n  }\n}\n\n//åŸç”Ÿè§†å›¾Flutterä¾§å°è£…ï¼Œç»§æ‰¿è‡ªStatefulWidget\nclass SampleView extends StatefulWidget {\n  const SampleView({\n    Key key,\n    this.controller,\n  }) : super(key: key);\n\n  //æŒæœ‰è§†å›¾æ§åˆ¶å™¨\n  final NativeViewController controller;\n  @override\n  State&lt;StatefulWidget&gt; createState() =&gt; _SampleViewState();\n}\n\nclass _SampleViewState extends State&lt;SampleView&gt; {\n  //æ ¹æ®å¹³å°ç¡®å®šè¿”å›ä½•ç§å¹³å°è§†å›¾\n  @override\n  Widget build(BuildContext context) {\n    if (defaultTargetPlatform == TargetPlatform.android) {\n      return AndroidView(\n        viewType: 'sampleView',\n        //åŸç”Ÿè§†å›¾åˆ›å»ºå®Œæˆåï¼Œé€šè¿‡onPlatformViewCreatedäº§ç”Ÿå›è°ƒ\n        onPlatformViewCreated: _onPlatformViewCreated,\n      );\n    } else {\n      return UiKitView(viewType: 'sampleView',\n        //åŸç”Ÿè§†å›¾åˆ›å»ºå®Œæˆåï¼Œé€šè¿‡onPlatformViewCreatedäº§ç”Ÿå›è°ƒ\n        onPlatformViewCreated: _onPlatformViewCreated\n      );\n    }\n  }\n  //åŸç”Ÿè§†å›¾åˆ›å»ºå®Œæˆåï¼Œè°ƒç”¨controlçš„onCreateæ–¹æ³•ï¼Œä¼ å…¥view id\n  _onPlatformViewCreated(int id) {\n    if (widget.controller == null) {\n      return;\n    }\n    widget.controller.onCreate(id);\n  }\n}\n</code></pre><p>Flutterçš„è°ƒç”¨æ–¹å®ç°æå®šäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«çœ‹çœ‹Androidå’ŒiOSç«¯çš„å®ç°ã€‚</p><p>ç¨‹åºçš„æ•´ä½“ç»“æ„ä¸ä¹‹å‰å¹¶æ— ä¸åŒï¼Œåªæ˜¯åœ¨è¿›è¡ŒåŸç”Ÿè§†å›¾åˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆæ–¹æ³•é€šé“çš„æ³¨å†Œå’Œç›¸å…³äº‹ä»¶çš„å¤„ç†ï¼›åœ¨å“åº”æ–¹æ³•è°ƒç”¨æ¶ˆæ¯æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­æ–¹æ³•åï¼Œå¦‚æœå®Œå…¨åŒ¹é…ï¼Œåˆ™ä¿®æ”¹è§†å›¾èƒŒæ™¯ï¼Œå¦åˆ™è¿”å›å¼‚å¸¸ã€‚</p><p>Androidç«¯æ¥å£å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>class SimpleViewControl implements PlatformView, MethodCallHandler {\n    private final MethodChannel methodChannel;\n    ...\n    public SimpleViewControl(Context context, int id, BinaryMessenger messenger) {\n        ...\n        //ç”¨view idæ³¨å†Œæ–¹æ³•é€šé“\n        methodChannel = new MethodChannel(messenger, &quot;samples.chenhang/native_views_&quot; + id);\n        //è®¾ç½®æ–¹æ³•é€šé“å›è°ƒ\n        methodChannel.setMethodCallHandler(this);\n    }\n    //å¤„ç†æ–¹æ³•è°ƒç”¨æ¶ˆæ¯\n    @Override\n    public void onMethodCall(MethodCall methodCall, MethodChannel.Result result) {\n        //å¦‚æœæ–¹æ³•åå®Œå…¨åŒ¹é…\n        if (methodCall.method.equals(&quot;changeBackgroundColor&quot;)) {\n            //ä¿®æ”¹è§†å›¾èƒŒæ™¯ï¼Œè¿”å›æˆåŠŸ\n            view.setBackgroundColor(Color.rgb(0, 0, 255));\n            result.success(0);\n        }else {\n            //è°ƒç”¨æ–¹å‘èµ·äº†ä¸€ä¸ªä¸æ”¯æŒçš„APIè°ƒç”¨\n            result.notImplemented();\n        }\n    }\n  ...\n}\n</code></pre><p>iOSç«¯æ¥å£å®ç°ä»£ç ï¼š</p><pre><code>@implementation SampleViewControl{\n    ...\n    FlutterMethodChannel* _channel;\n}\n\n- (instancetype)initWithWithFrame:(CGRect)frame viewIdentifier:(int64_t)viewId arguments:(id)args binaryMessenger:(NSObject&lt;FlutterBinaryMessenger&gt; *)messenger{\n    if ([super init]) {\n        ...\n        //ä½¿ç”¨view idå®Œæˆæ–¹æ³•é€šé“çš„åˆ›å»º\n        _channel = [FlutterMethodChannel methodChannelWithName:[NSString stringWithFormat:@&quot;samples.chenhang/native_views_%lld&quot;, viewId] binaryMessenger:messenger];\n        //è®¾ç½®æ–¹æ³•é€šé“çš„å¤„ç†å›è°ƒ\n        __weak __typeof__(self) weakSelf = self;\n        [_channel setMethodCallHandler:^(FlutterMethodCall* call, FlutterResult result) {\n            [weakSelf onMethodCall:call result:result];\n        }];\n    }\n    return self;\n}\n\n//å“åº”æ–¹æ³•è°ƒç”¨æ¶ˆæ¯\n- (void)onMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result {\n    //å¦‚æœæ–¹æ³•åå®Œå…¨åŒ¹é…\n    if ([[call method] isEqualToString:@&quot;changeBackgroundColor&quot;]) {\n        //ä¿®æ”¹è§†å›¾èƒŒæ™¯è‰²ï¼Œè¿”å›æˆåŠŸ\n        _templcateView.backgroundColor = [UIColor blueColor];\n        result(@0);\n    } else {\n        //è°ƒç”¨æ–¹å‘èµ·äº†ä¸€ä¸ªä¸æ”¯æŒçš„APIè°ƒç”¨\n        result(FlutterMethodNotImplemented);\n    }\n}\n ...\n@end\n</code></pre><p>é€šè¿‡æ³¨å†Œæ–¹æ³•é€šé“ï¼Œä»¥åŠæš´éœ²çš„changeBackgroundColoræ¥å£ï¼ŒAndroidç«¯ä¸iOSç«¯ä¿®æ”¹å¹³å°è§†å›¾èƒŒæ™¯é¢œè‰²çš„åŠŸèƒ½éƒ½å·²ç»å®ç°äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨Flutteråº”ç”¨è¿è¡ŒæœŸé—´ï¼Œä¿®æ”¹åŸç”Ÿè§†å›¾å±•ç¤ºæ ·å¼äº†ï¼š</p><pre><code>class DefaultState extends State&lt;DefaultPage&gt; {\n  NativeViewController controller;\n  @override\n  void initState() {\n    controller = NativeViewController();//åˆå§‹åŒ–åŸç”ŸViewæ§åˆ¶å™¨\n\tsuper.initState();\n  }\n  \n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n          ...\n          //å†…åµŒåŸç”ŸView\n          body:  Container(width: 200, height:200,\n              child: SampleView(controller: controller)\n          ),\n         //è®¾ç½®ç‚¹å‡»è¡Œä¸ºï¼šæ”¹å˜è§†å›¾é¢œè‰² \n         floatingActionButton: FloatingActionButton(onPressed: ()=&gt;controller.changeBackgroundColor())\n    );\n  }\n}\n</code></pre><p>è¿è¡Œä¸€ä¸‹ï¼Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/fd/ac/fd1f6d7280aaacb3294d7733706fc8ac.gif?wh=720*1256\" alt=\"\"></p><center><span class=\"reference\">å›¾4 åŠ¨æ€ä¿®æ”¹åŸç”Ÿè§†å›¾æ ·å¼</span></center><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œã€‚æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ä»Šå¤©çš„ä¸»è¦å†…å®¹å§ã€‚</p><p>å¹³å°è§†å›¾è§£å†³äº†åŸç”Ÿæ¸²æŸ“èƒ½åŠ›çš„å¤ç”¨é—®é¢˜ï¼Œä½¿å¾—Flutterèƒ½å¤Ÿé€šè¿‡è½»é‡çº§çš„ä»£ç å°è£…ï¼ŒæŠŠåŸç”Ÿè§†å›¾ç»„è£…æˆä¸€ä¸ªFlutteræ§ä»¶ã€‚</p><p>Flutteræä¾›äº†å¹³å°è§†å›¾å·¥å‚å’Œè§†å›¾æ ‡è¯†ç¬¦ä¸¤ä¸ªæ¦‚å¿µï¼Œå› æ­¤Dartå±‚å‘èµ·çš„è§†å›¾åˆ›å»ºè¯·æ±‚å¯ä»¥é€šè¿‡æ ‡è¯†ç¬¦ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„è§†å›¾åˆ›å»ºå·¥å‚ï¼Œä»è€Œå®ç°åŸç”Ÿè§†å›¾ä¸Flutterè§†å›¾çš„èåˆå¤ç”¨ã€‚å¯¹äºéœ€è¦åœ¨è¿è¡ŒæœŸåŠ¨æ€è°ƒç”¨åŸç”Ÿè§†å›¾æ¥å£çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŸç”Ÿè§†å›¾çš„å°è£…ç±»ä¸­æ³¨å†Œæ–¹æ³•é€šé“ï¼Œå®ç°ç²¾ç¡®æ§åˆ¶åŸç”Ÿè§†å›¾å±•ç¤ºçš„æ•ˆæœã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºFlutterä¸åŸç”Ÿæ¸²æŸ“æ–¹å¼å®Œå…¨ä¸åŒï¼Œå› æ­¤è½¬æ¢ä¸åŒçš„æ¸²æŸ“æ•°æ®ä¼šæœ‰è¾ƒå¤§çš„æ€§èƒ½å¼€é”€ã€‚å¦‚æœåœ¨ä¸€ä¸ªç•Œé¢ä¸ŠåŒæ—¶å®ä¾‹åŒ–å¤šä¸ªåŸç”Ÿæ§ä»¶ï¼Œå°±ä¼šå¯¹æ€§èƒ½é€ æˆéå¸¸å¤§çš„å½±å“ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é¿å…åœ¨ä½¿ç”¨Flutteræ§ä»¶ä¹Ÿèƒ½å®ç°çš„æƒ…å†µä¸‹å»ä½¿ç”¨å†…åµŒå¹³å°è§†å›¾ã€‚</p><p>å› ä¸ºè¿™æ ·åšï¼Œä¸€æ–¹é¢éœ€è¦åˆ†åˆ«åœ¨Androidå’ŒiOSç«¯å†™å¤§é‡çš„é€‚é…æ¡¥æ¥ä»£ç ï¼Œè¿èƒŒäº†è·¨å¹³å°æŠ€æœ¯çš„æœ¬æ„ï¼Œä¹Ÿå¢åŠ äº†åç»­çš„ç»´æŠ¤æˆæœ¬ï¼›å¦ä¸€æ–¹é¢æ¯•ç«Ÿé™¤å»åœ°å›¾ã€WebViewã€ç›¸æœºç­‰æ¶‰åŠåº•å±‚æ–¹æ¡ˆçš„ç‰¹æ®Šæƒ…å†µå¤–ï¼Œå¤§éƒ¨åˆ†åŸç”Ÿä»£ç èƒ½å¤Ÿå®ç°çš„UIæ•ˆæœï¼Œå®Œå…¨å¯ä»¥ç”¨Flutterå®ç°ã€‚</p><p>æˆ‘æŠŠä»Šå¤©åˆ†äº«æ‰€æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æ‰“åŒ…åˆ°äº†<a href=\"https://github.com/cyndibaby905/27_native_view\">GitHub</a>ä¸­ï¼Œä½ å¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼Œåå¤è¿è¡Œå‡ æ¬¡ï¼ŒåŠ æ·±ç†è§£ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€é“æ€è€ƒé¢˜å§ã€‚</p><p>è¯·ä½ åœ¨åŠ¨æ€è°ƒæ•´åŸç”Ÿè§†å›¾æ ·å¼çš„ä»£ç åŸºç¡€ä¸Šï¼Œå¢åŠ é¢œè‰²å‚æ•°ï¼Œä»¥å®ç°åŠ¨æ€å˜æ›´åŸç”Ÿè§†å›¾é¢œè‰²çš„éœ€æ±‚ã€‚</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç­‰å¾…ä½ ï¼æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>","comments":[{"had_liked":false,"id":129185,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1567058478,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18746927662","product_id":100031001,"comment_content":"å¦™å•Šï¼Œé€šè¿‡å¹³å°è§†å›¾ï¼ŒFlutterå°±å¯ä»¥ä½¿ç”¨åŸç”Ÿè§†å›¾äº†ï¼Œè¿™æ ·ï¼ŒåŸºæœ¬æ‰€æœ‰éœ€æ±‚éƒ½å¯ä»¥å®ç°äº†ã€‚å¦‚æœç¤¾åŒºå†ç¹è£ä¸€ç‚¹ï¼Œè®¸å¤šç»„ä»¶éƒ½å¯ä»¥æ‹¿æ¥å³ç”¨ï¼Œé‚£å¼€å‘éœ€æ±‚çš„é€Ÿåº¦å°±æ˜¯ç›¸å½“å¿«äº†ã€‚","like_count":4,"discussions":[{"author":{"id":1459289,"avatar":"https://static001.geekbang.org/account/avatar/00/16/44/59/9cc7d8cd.jpg","nickname":"æ¯›æˆæ–¹","note":"","ucode":"DFBF3D464D8D7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374556,"discussion_content":"ä¸ºç¤¾åŒºè´¡çŒ®ä¸€ä»½åŠ›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621244034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":190210,"user_name":"Verios","can_delete":false,"product_type":"c1","uid":1042365,"ip_address":"","ucode":"C26BB8B8334A0B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e7/bd/cb2fb958.jpg","comment_is_top":false,"comment_ctime":1584615080,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10174549672","product_id":100031001,"comment_content":" æ¯æ¬¡ widget é‡å»ºï¼Œéƒ½ä¼šcreateä¸€ä¸ªåŸç”Ÿ view å—ï¼Ÿ<br>","like_count":2},{"had_liked":false,"id":169852,"user_name":"jianwei","can_delete":false,"product_type":"c1","uid":1621006,"ip_address":"","ucode":"B62E46E862AF6D","user_header":"https://static001.geekbang.org/account/avatar/00/18/bc/0e/c76861eb.jpg","comment_is_top":false,"comment_ctime":1578458656,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10168393248","product_id":100031001,"comment_content":"floatingActionButton: FloatingActionButton(<br>\tonPressed: () =&gt; controller.changeBackground(&#39;#FFFFFF&#39;),<br>),<br><br>Future&lt;void&gt; changeBackground(String colorString) async {<br>\ttry {<br>\t  return _channel.invokeMethod(&#39;changeBackgroundColor&#39;, &lt;String, dynamic&gt; {<br>\t    &#39;color&#39;: colorString<br>\t  });<br>\t} catch (e) {<br>\t}<br>}<br><br>- (void)onMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result {<br>    if ([call.method isEqualToString:@&quot;changeBackgroundColor&quot;]) {<br>        NSString *colorString = call.arguments[@&quot;color&quot;];<br>        if (colorString.length != 0) {<br>            _templcateView.backgroundColor = [UIColor colorWithHexString:colorString];<br>            result(@0);<br>            return;<br>        }<br>    }<br>    result(FlutterMethodNotImplemented);<br>}","like_count":2},{"had_liked":false,"id":139592,"user_name":"èˆ’å¤§é£","can_delete":false,"product_type":"c1","uid":1313651,"ip_address":"","ucode":"5CC2E0F8C40E38","user_header":"https://static001.geekbang.org/account/avatar/00/14/0b/73/4f1c9676.jpg","comment_is_top":false,"comment_ctime":1570687084,"is_pvip":true,"replies":[{"id":"54824","content":"å¯ä»¥ï¼ŒActivityå†…åµŒflutterViewå…¶å®å°±æ˜¯è¿™ç§æ–¹å¼ï¼Œåªæ˜¯è¿™ä¸ªè§†å›¾å¤§å°æ˜¯æ•´ä¸ªå±å¹•","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1571284748,"ip_address":"","comment_id":139592,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10160621676","product_id":100031001,"comment_content":"åè¿‡æ¥ï¼Œå¯ä»¥åœ¨åŸç”Ÿé¡µé¢ä¸­åµŒå…¥ä¸€å°å—Flutterè§†å›¾å—","like_count":2,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470012,"discussion_content":"å¯ä»¥ï¼ŒActivityå†…åµŒflutterViewå…¶å®å°±æ˜¯è¿™ç§æ–¹å¼ï¼Œåªæ˜¯è¿™ä¸ªè§†å›¾å¤§å°æ˜¯æ•´ä¸ªå±å¹•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571284748,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1454751,"avatar":"https://static001.geekbang.org/account/avatar/00/16/32/9f/46ac03ad.jpg","nickname":"å¿«åˆ°ç¢—é‡Œæ¥","note":"","ucode":"D3EE7B9064DD7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533171,"discussion_content":"é‚£iOS åŸç”Ÿé¡µé¢ æ€ä¹ˆåµŒå…¥flutterè§†å›¾å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637807254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130347,"user_name":"å®‡","can_delete":false,"product_type":"c1","uid":1331553,"ip_address":"","ucode":"41CAD68B5474A2","user_header":"https://static001.geekbang.org/account/avatar/00/14/51/61/9c5beba4.jpg","comment_is_top":false,"comment_ctime":1567430045,"is_pvip":false,"replies":[{"id":"49516","content":"èµğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1567677846,"ip_address":"","comment_id":130347,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10157364637","product_id":100031001,"comment_content":"æ€è€ƒé¢˜å®ç°æ€è·¯<br><br>dartå±‚è®¾ç½®é¢œè‰²å‚æ•°çš„æ–¹æ³•ï¼š<br>changeBackgroundColor(int r, int g, int b) async<br>  {<br>    _channel.invokeMethod(&#39;changeBackgroundColor&#39;, {&quot;r&quot;:r, &quot;g&quot;:g, &quot;b&quot;:b});<br>  }<br><br>dartå±‚è°ƒç”¨ï¼š<br>controller.changeBackgroundColor(0, 255, 255)<br><br>android nativeå±‚å®ç°ï¼š<br>if (methodCall.method.equals(&quot;changeBackgroundColor&quot;)) {<br>      int r = methodCall.argument(&quot;r&quot;);<br>      int g = methodCall.argument(&quot;g&quot;);<br>      int b = methodCall.argument(&quot;b&quot;);<br>      view.setBackgroundColor(Color.rgb(r, g, b));<br>      result.success(0);<br>    }else {<br>      result.notImplemented();<br>    }<br>","like_count":3,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465916,"discussion_content":"èµğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567677846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323728,"user_name":"äº”ååº¦ç°é»‘","can_delete":false,"product_type":"c1","uid":2132275,"ip_address":"","ucode":"A5AB673CA37856","user_header":"https://static001.geekbang.org/account/avatar/00/20/89/33/6c66ed4a.jpg","comment_is_top":false,"comment_ctime":1638144995,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638144995","product_id":100031001,"comment_content":"Flutter é¡µé¢åµŒå…¥åŸç”Ÿè§†å›¾ï¼Œæœ‰æ»šåŠ¨æ¡çš„æƒ…å†µï¼ŒåŸç”Ÿè§†å›¾å®šä½é—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿ","like_count":0},{"had_liked":false,"id":291242,"user_name":"åˆ˜æ´ªæ—","can_delete":false,"product_type":"c1","uid":1535242,"ip_address":"","ucode":"1FDBB425191CA8","user_header":"https://static001.geekbang.org/account/avatar/00/17/6d/0a/8e7f0f04.jpg","comment_is_top":false,"comment_ctime":1620137944,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1620137944","product_id":100031001,"comment_content":"å¯¹å‰ç«¯æ¥è¯´æ˜¯ä¸æ˜¯è¿˜è¦å­¦å®‰å“å’ŒiOSå¼€å‘å•Š","like_count":0,"discussions":[{"author":{"id":1459289,"avatar":"https://static001.geekbang.org/account/avatar/00/16/44/59/9cc7d8cd.jpg","nickname":"æ¯›æˆæ–¹","note":"","ucode":"DFBF3D464D8D7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374557,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621244081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290372,"user_name":"Geek_cc0a3b","can_delete":false,"product_type":"c1","uid":1442156,"ip_address":"","ucode":"8D6C16AC4A9ED0","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83er6ADlY3IFt3Rs1aVDyrTO2BiaV8wiabypPwbXhbPcyqicCvnTV9lUYHULVqUab7ww4taX5QbmFyatLQ/132","comment_is_top":false,"comment_ctime":1619517589,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619517589","product_id":100031001,"comment_content":"å†…åµŒåŸç”Ÿç©ºé—´ï¼Œäº‹ä»¶å“åº”æ¯”å¦‚onClickæ˜¯ç›´æ¥åœ¨åŸç”Ÿå±‚å“åº”äº†å§ï¼Œflutterä¸éœ€è¦è´Ÿè´£å¤„ç†åŸç”Ÿäº‹ä»¶çš„å“åº”å§ï¼Ÿ","like_count":0},{"had_liked":false,"id":290071,"user_name":"å°å¼º","can_delete":false,"product_type":"c1","uid":1328832,"ip_address":"","ucode":"358B91401C1C18","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/c0/cdc50180.jpg","comment_is_top":false,"comment_ctime":1619346868,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1619346868","product_id":100031001,"comment_content":"&#47;&#47;åŸç”Ÿè§†å›¾é”€æ¯å›è°ƒ    @Override    public void dispose() {    }<br>å®‰å“ä¸Šæœ‰è¿™ä¸ªå›è°ƒï¼Œæ€ä¹ˆiOSæ²¡æœ‰å¯¹åº”çš„å›è°ƒï¼Œåˆšå¥½é¡¹ç›®é‡åˆ°è¿™ä¸ªé—®é¢˜äº†ï¼ŒæœŸå¾…è€å¸ˆè§£æƒ‘","like_count":0},{"had_liked":false,"id":241770,"user_name":"æ— å","can_delete":false,"product_type":"c1","uid":1110113,"ip_address":"","ucode":"2D2E877CF97138","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/61/68462a07.jpg","comment_is_top":false,"comment_ctime":1597416778,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597416778","product_id":100031001,"comment_content":"iOS å¹³å°è§†å›¾ä¸­ï¼š-(NSObject&lt;FlutterPlatformView&gt; *)createWithFrame:(CGRect)frame viewIdentifier:(int64_t)viewId arguments:(id)args{}<br>ä¸ºä½•frameçš„å€¼éƒ½æ˜¯(0.0, 0.0, 0.0, 0.0)ï¼Œä¸ºä½•æ²¡æœ‰å®½é«˜ï¼Ÿè¿™é‡Œä¸åº”è¯¥æ˜¯æ˜¾ç¤ºçš„è§†å›¾å¤§å°å—ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":241328,"user_name":"lala","can_delete":false,"product_type":"c1","uid":1215387,"ip_address":"","ucode":"61798D0911ECBA","user_header":"","comment_is_top":false,"comment_ctime":1597247877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597247877","product_id":100031001,"comment_content":"  _onPlatformViewCreated(int id) {<br>    if (widget.controller == null) {<br>      return;<br>    }<br>    widget.controller.onCreate(id);<br>  }<br>ç¤ºä¾‹ä¸­idä¼ å€¼æ˜¯å¤šå°‘å‘¢ï¼Ÿè¯·è€å¸ˆè§£ç­”ä¸‹ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","like_count":0},{"had_liked":false,"id":236908,"user_name":"Geek_fdd35e","can_delete":false,"product_type":"c1","uid":2052987,"ip_address":"","ucode":"68968CF01C463E","user_header":"","comment_is_top":false,"comment_ctime":1595581730,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1595581730","product_id":100031001,"comment_content":"registrarFor(&quot;com.hangchen&#47;NativeViews&quot;); <br>registrarForè¿™ä¸ªæ–¹æ³•æ‰¾ä¸åˆ°äº†,è¯´æ²¡æœ‰å£°æ˜, flutter 1.0.0","like_count":0,"discussions":[{"author":{"id":1795371,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/65/2b/446ef7b6.jpg","nickname":"è®¸å…ˆæ£®","note":"","ucode":"1F42D4A6B5C6AF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":314625,"discussion_content":"è¿™æ ·å†™ï¼š\n //å¹³å°viewçš„åˆ›å»º\n        SampleViewFactory sampleViewFactory = new SampleViewFactory(getFlutterEngine().getDartExecutor().getBinaryMessenger());\n        flutterEngine.getPlatformViewsController().getRegistry().registerViewFactory(&#34;sampleView&#34;, sampleViewFactory);","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603179179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":223918,"user_name":"zeqin","can_delete":false,"product_type":"c1","uid":1089026,"ip_address":"","ucode":"ACEF2967FA4419","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/akIbCt3y9ssJWI17UoalPcCICJboZoibSybpR3f6RoNYSFhLchLA0Kib0N1q15DI3DW8vF6K6wpt0TPh81Au44HQ/132","comment_is_top":false,"comment_ctime":1591232852,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591232852","product_id":100031001,"comment_content":"é‚£æ€ä¹ˆå®ç°åŸç”Ÿå’Œfutteré—´äº’ç›¸ä¼ å€¼ï¼Ÿ","like_count":0},{"had_liked":false,"id":216848,"user_name":"æ— å","can_delete":false,"product_type":"c1","uid":1110113,"ip_address":"","ucode":"2D2E877CF97138","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/61/68462a07.jpg","comment_is_top":false,"comment_ctime":1589354386,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589354386","product_id":100031001,"comment_content":"iOS ä¸­FlutterPlatformViewFactoryçš„func create(withFrame frame: CGRect, viewIdentifier viewId: Int64, arguments args: Any?)æ–¹æ³•ä¸­çš„frameå€¼éƒ½ä¸º0ï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°æ˜¯å¹²ä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä¼šæœ‰å€¼ï¼Ÿ","like_count":0},{"had_liked":false,"id":188518,"user_name":"æ˜Ÿæ˜Ÿ","can_delete":false,"product_type":"c1","uid":1126460,"ip_address":"","ucode":"013714D9EF1847","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/3c/c2c72e28.jpg","comment_is_top":false,"comment_ctime":1584363771,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1584363771","product_id":100031001,"comment_content":"è¿™ä¸ªåœ¨io.flutter.embedding.android.FlutterActivityä¸­å¦‚ä½•ç»‘å®šå‘¢ï¼Œæ²¡æœ‰å“åº”çš„æ–¹æ³•å•Š","like_count":0,"discussions":[{"author":{"id":1369877,"avatar":"https://static001.geekbang.org/account/avatar/00/14/e7/15/8d699a19.jpg","nickname":"åªæ˜¯ä¸¶å¾ˆå­¤å•","note":"","ucode":"362155C96A4509","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":259974,"discussion_content":"å¯ä»¥è¿™æ · \n  \n flutterEngine.platformViewsController.registry.registerViewFactory(&#34;SampleView&#34;,\n                SimpleViewFactory(StandardMessageCodec(), flutterEngine.dartExecutor.binaryMessenger))","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588834333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175460,"user_name":"JW","can_delete":false,"product_type":"c1","uid":1180823,"ip_address":"","ucode":"1078B9415C1176","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/97/80740db0.jpg","comment_is_top":false,"comment_ctime":1580725493,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1580725493","product_id":100031001,"comment_content":"åœ¨flutterå·¥ç¨‹ä¸‹ .androidæ‰“å¼€çš„javaæ–‡ä»¶æ— æ³•ç¼–è¯‘å’Œæç¤ºï¼Œç¼–å†™æœ¬åœ°ä»£ç ä¸å‹å¥½ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1054958,"avatar":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","nickname":"ABC","note":"","ucode":"7501AD9C0C4A70","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334920,"discussion_content":"å¯ä»¥ç›´æ¥æ‰“å¼€androidç›®å½•ï¼Œåªæ˜¯éœ€è¦ä¸‹è½½androidä¾èµ–é‚£äº›ï¼Œæ„å»ºå®Œæˆåï¼Œå°±å¯ä»¥å†™Javaä»£ç äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608027629,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1124983,"avatar":"https://static001.geekbang.org/account/avatar/00/11/2a/77/c96b5f6c.jpg","nickname":"è°¢é¹ç¨‹","note":"","ucode":"D8DF33B3EBC4DD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":320462,"discussion_content":"é€‰ä¸­å·¥ç¨‹ç›®å½•é¼ æ ‡å³é”®-->Flutter --> Open Android Module in Android Studio","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604373633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169375,"user_name":"mqh","can_delete":false,"product_type":"c1","uid":1020208,"ip_address":"","ucode":"DE68D4900C9287","user_header":"https://static001.geekbang.org/account/avatar/00/0f/91/30/432a7288.jpg","comment_is_top":false,"comment_ctime":1578323821,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1578323821","product_id":100031001,"comment_content":"ç°åœ¨æ³¨å†Œæ’ä»¶çš„è¯éœ€è¦ç”¨FlutterPluginï¼Œç”¨æ–°æ¥å£çš„è¯å¦‚ä½•è¿›è¡Œæ³¨å†Œï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2161498,"avatar":"","nickname":"ä¸ƒä¸ƒä¸è¯´è¯","note":"","ucode":"B62B9A517CD7FE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":307807,"discussion_content":"ä¸ä¼šã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600763568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155864,"user_name":"kennen","can_delete":false,"product_type":"c1","uid":1595129,"ip_address":"","ucode":"FD89DB480C1D99","user_header":"https://static001.geekbang.org/account/avatar/00/18/56/f9/597cc541.jpg","comment_is_top":false,"comment_ctime":1574769487,"is_pvip":false,"replies":[{"id":"59962","content":"ä½ å›å¿†ä¸€ä¸‹iOSä¸­autolayoutå’Œautoreleaseä¸­çˆ¶å®¹å™¨çš„å¸ƒå±€å˜åŒ–å¯¹äºç»„ä»¶å¸ƒå±€çš„å½±å“","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1574830439,"ip_address":"","comment_id":155864,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574769487","product_id":100031001,"comment_content":"iOSä¸­çš„frameå‚æ•°å¹¶æ²¡æœ‰ç”¨åˆ°ï¼Œflutteræ˜¯æ€ä¹ˆæŠŠå®½é«˜ä¼ ç»™iOSæ¥å±•ç¤ºçš„å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475902,"discussion_content":"ä½ å›å¿†ä¸€ä¸‹iOSä¸­autolayoutå’Œautoreleaseä¸­çˆ¶å®¹å™¨çš„å¸ƒå±€å˜åŒ–å¯¹äºç»„ä»¶å¸ƒå±€çš„å½±å“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574830439,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143831,"user_name":"Miracle_","can_delete":false,"product_type":"c1","uid":1594671,"ip_address":"","ucode":"5B885163D73439","user_header":"","comment_is_top":false,"comment_ctime":1571797623,"is_pvip":false,"replies":[{"id":"56201","content":"çœ‹å…·ä½“åœºæ™¯ã€‚æˆ‘çš„å»ºè®®æ˜¯ï¼Œå¦‚æœç‚¹å‡»äº¤äº’çš„äº‹ä»¶å¤„ç†æ˜¯èƒ½å¤Ÿåœ¨åŸç”Ÿè§†å›¾å†…æå®šçš„ï¼ŒåŸç”Ÿè§†å›¾è‡ªå·±ç›‘å¬å°±å¥½ã€‚å¦åˆ™å°±éœ€è¦ä¼ å‡ºæ¥è®©flutterå¤„ç†","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1572322377,"ip_address":"","comment_id":143831,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571797623","product_id":100031001,"comment_content":"è¯·é—®ä¸‹ï¼ŒåµŒå…¥äº†åŸç”Ÿè§†å›¾åï¼Œå¦‚æœåµŒå…¥çš„æ˜¯è¾ƒä¸ºå¤æ‚çš„è§†å›¾ï¼Œè§†å›¾å¸¦èµ°ç‚¹å‡»ç­‰äº¤äº’äº‹ä»¶ï¼Œåº”è¯¥åœ¨å“ªè¾¹è®¾ç½®ç›‘å¬æˆ–è€…å¤„ç†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":471714,"discussion_content":"çœ‹å…·ä½“åœºæ™¯ã€‚æˆ‘çš„å»ºè®®æ˜¯ï¼Œå¦‚æœç‚¹å‡»äº¤äº’çš„äº‹ä»¶å¤„ç†æ˜¯èƒ½å¤Ÿåœ¨åŸç”Ÿè§†å›¾å†…æå®šçš„ï¼ŒåŸç”Ÿè§†å›¾è‡ªå·±ç›‘å¬å°±å¥½ã€‚å¦åˆ™å°±éœ€è¦ä¼ å‡ºæ¥è®©flutterå¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572322377,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140820,"user_name":"å’Œå°èƒ–","can_delete":false,"product_type":"c1","uid":1180727,"ip_address":"","ucode":"406BD7AB987EBF","user_header":"https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg","comment_is_top":false,"comment_ctime":1571053075,"is_pvip":false,"replies":[{"id":"56187","content":"å‰å®³ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"åœŸè±†ç›’å­","uid":"1088582","ctime":1572321038,"ip_address":"","comment_id":140820,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1571053075","product_id":100031001,"comment_content":"æ€è€ƒé¢˜å¦‚ä¸‹ï¼š<br><br>&#47;&#47;å£°æ˜ä¿®æ”¹åŸç”Ÿæ§ä»¶èƒŒæ™¯çš„æ–¹æ³•<br>  changeBgColor() async {<br>    try {<br>      _methodChannel.invokeMethod(&quot;changeBgColor&quot;, {<br>        &quot;color1&quot;: Random().nextInt(255),<br>        &quot;color2&quot;: Random().nextInt(255),<br>        &quot;color3&quot;: Random().nextInt(255)<br>      });<br>    } catch (e) {<br>      print(e);<br>    }<br>  }<br><br>override fun onMethodCall(p0: MethodCall, p1: MethodChannel.Result) {<br>            when (p0.method) {<br>                &quot;changeBgColor&quot; -&gt; {<br>                    view.setBackgroundColor(Color.rgb(p0.argument&lt;Int&gt;(&quot;color1&quot;)!!, p0.argument&lt;Int&gt;(&quot;color2&quot;)!!, p0.argument&lt;Int&gt;(&quot;color3&quot;)!!))<br>                    p1.success(0)<br>                }<br>                &#47;&#47;å¦‚æœæ˜¯åˆ«çš„æ–¹æ³•åˆ™è¿”å›æœªå®ç°<br>                else -&gt; p1.notImplemented()<br>            }<br>        }","like_count":0,"discussions":[{"author":{"id":1088582,"avatar":"https://static001.geekbang.org/account/avatar/00/10/9c/46/0b29b188.jpg","nickname":"åœŸè±†ç›’å­","note":"","ucode":"A910F88CAC0A87","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470575,"discussion_content":"å‰å®³ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572321038,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}