{"id":168360,"title":"39 | 调优参数：图解费脑的三个参数","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geek_netty\">https://gitee.com/geektime-geekbang/geek_netty</a></p>","comments":[{"had_liked":false,"id":154519,"user_name":"Standly","can_delete":false,"product_type":"c3","uid":1181055,"ip_address":"","ucode":"805CC5784D3F76","user_header":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","comment_is_top":false,"comment_ctime":1574473249,"is_pvip":false,"replies":[{"id":59373,"content":"不完全一样，因为拉黑了后，你能看到他，你给他也能发消息，但是对方看不到（微信是这样的吧么？印象弹出个消息说不是好友。），但是半关是可以的。但是相同点是：对方都看不到你了，也不会给你发消息了。","user_name":"作者回复","user_name_real":"Geek_9bc307","uid":1638649,"ctime":1574515545,"ip_address":"","comment_id":154519,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"半关，感觉有点像server把client拉进微信黑名单。","like_count":3,"discussions":[{"author":{"id":1638649,"avatar":"https://static001.geekbang.org/account/avatar/00/19/00/f9/44a3e5bd.jpg","nickname":"傅健","note":"","ucode":"5EA8BB26F5B036","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475492,"discussion_content":"不完全一样，因为拉黑了后，你能看到他，你给他也能发消息，但是对方看不到（微信是这样的吧么？印象弹出个消息说不是好友。），但是半关是可以的。但是相同点是：对方都看不到你了，也不会给你发消息了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574515545,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1181055,"avatar":"https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg","nickname":"Standly","note":"","ucode":"805CC5784D3F76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56861,"discussion_content":"主动拉黑者可以继续给对方发消息的，并且对方也能收到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574520381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202805,"user_name":"花儿少年","can_delete":false,"product_type":"c3","uid":1318540,"ip_address":"","ucode":"CFE4F64243673B","user_header":"https://static001.geekbang.org/account/avatar/00/14/1e/8c/d9330d2b.jpg","comment_is_top":false,"comment_ctime":1586072137,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"半关的比喻可谓是很形象了","like_count":5},{"had_liked":false,"id":362443,"user_name":"Kenneth。🌞","can_delete":false,"product_type":"c3","uid":1786752,"ip_address":"上海","ucode":"299ADF236395CC","user_header":"https://static001.geekbang.org/account/avatar/00/1b/43/80/b1ae32cd.jpg","comment_is_top":false,"comment_ctime":1668519075,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师，SO_REUSEADDR默认不开启， \n例如服务端启动后，客户端连接并发送数据，然后服务端马上关闭连接。 在接着启动也没有提示端口被占用啊。  linux 默认是2MSL 等待60s,按理应该60s 之后在能使用该端口啊。","like_count":0},{"had_liked":false,"id":328400,"user_name":"Mong狗","can_delete":false,"product_type":"c3","uid":1048525,"ip_address":"","ucode":"9DF0D65D75984E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ff/cd/9c44f2d5.jpg","comment_is_top":false,"comment_ctime":1640704147,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":2,"score":2,"product_id":100036701,"comment_content":"netty服务所在服务器出现大量的close_wait 和这三个参数有关吗？按照老师图中的过程，服务器端在接收到客户端的fin之后，没有再次发出Fin给客户端，导致出现了close_wait，这个问题该如何排查呢","like_count":0},{"had_liked":false,"id":270144,"user_name":"Alpha 👀","can_delete":false,"product_type":"c3","uid":1200971,"ip_address":"","ucode":"3C0BAD36550718","user_header":"https://static001.geekbang.org/account/avatar/00/12/53/4b/28991f30.jpg","comment_is_top":false,"comment_ctime":1608952598,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师您好，关于半关，我有个疑问，客户端关闭连接发送的都是fin包，服务端怎么判断这是一个半关还是正常关闭，还是说这个半关开关打开，那么对服务端来说，所有的fin都是半关请求？","like_count":0},{"had_liked":false,"id":230078,"user_name":"zxk","can_delete":false,"product_type":"c3","uid":1221195,"ip_address":"","ucode":"4BB2BD9D2BCD04","user_header":"https://static001.geekbang.org/account/avatar/00/12/a2/4b/b72f724f.jpg","comment_is_top":false,"comment_ctime":1593253023,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"老师，想请教下，四次挥手的时候，client 端 处于 FIN_WAIT_2 状态，这期间 server 端不是本来就仍然能够传送数据到 client 端吗？感觉这个半关是不是有点重复了。","like_count":0},{"had_liked":false,"id":230075,"user_name":"刘岚乔月","can_delete":false,"product_type":"c3","uid":1095289,"ip_address":"","ucode":"99A9AB4E4E1111","user_header":"https://static001.geekbang.org/account/avatar/00/10/b6/79/22e582a5.jpg","comment_is_top":false,"comment_ctime":1593252276,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"请问老师，一般在什么业务场景下会用到这种半关闭的功能呢？可以举一些例子吗？","like_count":0},{"had_liked":false,"id":221709,"user_name":"大胖子呀、","can_delete":false,"product_type":"c3","uid":1258251,"ip_address":"","ucode":"4BADF8096254BE","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/0b/fd18c8ab.jpg","comment_is_top":false,"comment_ctime":1590571279,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"server端：你和我分手我不和你分手，哈哈哈，笑死我了，老师真是举例大师🤣🤣","like_count":0},{"had_liked":false,"id":184538,"user_name":"Geek_498c16","can_delete":false,"product_type":"c3","uid":1716617,"ip_address":"","ucode":"616913785EFF06","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL6ibvATzI5FKR6r71GU3CjdlPkZYYSBYBtNibIGENFZDnqajW7LOPKZXUPWSsjt8OiaxTZ0neT8LwQQ/132","comment_is_top":false,"comment_ctime":1583334279,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100036701,"comment_content":"channel.close()如果只在客户端调用,而服务器端没有调用,这种情况下不是也是半关的效果嘛?和这里讲的半关有什么区别","like_count":0,"discussions":[{"author":{"id":1025718,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a6/b6/27412d76.jpg","nickname":"sc","note":"","ucode":"46D659C89BA8C4","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":212834,"discussion_content":"这样客户端就收不到服务端的数据了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585021409,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}