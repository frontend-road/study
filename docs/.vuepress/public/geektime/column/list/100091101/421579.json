{"id":421579,"title":"03 | The Google File System ï¼ˆä¸€ï¼‰ï¼š Masterçš„ä¸‰ä¸ªèº«ä»½","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ–‡æµ©ã€‚ä»ä»Šå¤©å¼€å§‹ï¼Œæˆ‘ä»¬å°±æ­£å¼åœ°æ¥ä¸€èµ·è§£è¯»å’Œå­¦ä¹ å¤§æ•°æ®é¢†åŸŸä¸­ï¼Œä¸€äº›ç»å…¸çš„è®ºæ–‡ã€‚è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±ä»â€œ<a href=\"https://storage.googleapis.com/pub-tools-public-publication-data/pdf/035fc972c796d33122033a0614bc94cff1527999.pdf\">The Google File System</a>â€è¿™ç¯‡è®ºæ–‡å¼€å§‹ã€‚</p><p>è¿™ç¯‡è®ºæ–‡å‘è¡¨åœ¨2003å¹´ï¼Œç°åœ¨æ¥çœ‹ï¼Œå®ƒç®—æ˜¯ä¸€ç¯‡â€œè€â€è®ºæ–‡äº†ã€‚ç„¶è€Œåœ¨æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ç¯‡è®ºæ–‡çš„æ—¶å€™ï¼Œå®ƒå¯ä»£è¡¨ç€å¼ºå¤§è€Œç¥ç§˜çš„é»‘ç§‘æŠ€ã€‚</p><p>åœ¨è¿™ç¯‡è®ºæ–‡å‘è¡¨ä¹‹å‰ï¼Œå·¥ä¸šç•Œçš„åˆ†å¸ƒå¼ç³»ç»Ÿæœ€å¤šä¹Ÿå°±æ˜¯å‡ åå°æœåŠ¡å™¨çš„MPIé›†ç¾¤ã€‚è€Œè¿™ç¯‡GFSçš„è®ºæ–‡ä¸€å‘è¡¨ï¼Œä¸€ä¸‹å­å°±æ‹¿å‡ºäº†ä¸€ä¸ªè¿ä½œåœ¨1000å°æœåŠ¡å™¨ä»¥ä¸Šçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚å¹¶ä¸”è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè¿˜ä¼šé¢ä¸´å¤–éƒ¨æ•°ç™¾ä¸ªå¹¶å‘è®¿é—®çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç§°å¾—ä¸Šæ˜¯çŸ³ç ´å¤©æƒŠã€‚</p><p>å½“ç„¶ï¼Œåœ¨18å¹´åçš„ä»Šå¤©ï¼Œå¼€æºç¤¾åŒºé‡Œçš„å„ç§åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä¹Ÿéƒ½è¿œæ¯”å½“åˆçš„GFSæ›´åŠ å¤æ‚ã€å¼ºå¤§ã€‚å›é¡¾è¿™ç¯‡18å¹´å‰çš„è®ºæ–‡ï¼ŒGFSå¯ä»¥è¯´æ˜¯â€œ<strong>æŠ€æœ¯ä¸Šè¾‰ç…Œè€Œå·¥ç¨‹ä¸Šä¿å®ˆ</strong>â€ã€‚è¯´GFSæŠ€æœ¯ä¸Šè¾‰ç…Œï¼Œæ˜¯å› ä¸ºGoogleé€šè¿‡å»‰ä»·çš„PCçº§åˆ«çš„ç¡¬ä»¶ï¼Œæ­å»ºå‡ºäº†å¯ä»¥å¤„ç†æ•´ä¸ªäº’è”ç½‘ç½‘é¡µæ•°æ®çš„ç³»ç»Ÿã€‚è€Œè¯´GFSå·¥ç¨‹ä¸Šä¿å®ˆï¼Œåˆ™æ˜¯å› ä¸ºGFSæ²¡æœ‰â€œå‘æ˜â€ä»€ä¹ˆç‰¹åˆ«çš„é»‘ç§‘æŠ€ï¼Œè€Œæ˜¯åœ¨å·¥ç¨‹ä¸Šåšäº†å¤§é‡çš„å–èˆï¼ˆtrade-offï¼‰ã€‚</p><h2>GFSçš„è®¾è®¡å†³ç­–</h2><p>åœ¨æˆ‘çœ‹æ¥ï¼ŒGFSå®šäº†ä¸‰ä¸ªéå¸¸é‡è¦çš„è®¾è®¡åŸåˆ™ï¼Œè¿™ä¸‰ä¸ªåŸåˆ™å¸¦æ¥äº†å¾ˆå¤šå’Œä¼ ç»Ÿçš„åˆ†å¸ƒå¼ç³»ç»Ÿç ”ç©¶å¤§ç›¸å¾„åº­çš„è®¾è®¡å†³ç­–ã€‚ä½†æ˜¯è¿™ä¸‰ä¸ªåŸåˆ™åˆå¸¦æ¥äº†å¤§é‡å·¥ç¨‹ä¸Šçš„å®ç”¨æ€§ï¼Œä½¿å¾—GFSçš„è®¾è®¡æ€è·¯åç»­è¢«Hadoopè¿™æ ·çš„ç³»ç»Ÿå¿«é€Ÿå€Ÿé‰´å¹¶äºˆä»¥å®ç°ã€‚</p><!-- [[[read_end]]] --><p>é‚£è¿™ä¸‰ä¸ªåŸåˆ™æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘å°±ç»™ä½ ä»‹ç»ä»‹ç»ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªæ˜¯ä»¥å·¥ç¨‹ä¸Šâ€œç®€å•â€ä½œä¸ºè®¾è®¡åŸåˆ™ã€‚</strong></p><p>GFSç›´æ¥ä½¿ç”¨äº†LinuxæœåŠ¡ä¸Šçš„æ™®é€šæ–‡ä»¶ä½œä¸ºåŸºç¡€å­˜å‚¨å±‚ï¼Œå¹¶ä¸”é€‰æ‹©äº†æœ€ç®€å•çš„å•Masterè®¾è®¡ã€‚å•Masterè®©GFSçš„æ¶æ„å˜å¾—éå¸¸ç®€å•ï¼Œé¿å…äº†éœ€è¦ç®¡ç†å¤æ‚çš„ä¸€è‡´æ€§é—®é¢˜ã€‚ä¸è¿‡å®ƒä¹Ÿå¸¦æ¥äº†å¾ˆå¤šé™åˆ¶ï¼Œæ¯”å¦‚ä¸€æ—¦Masterå‡ºç°æ•…éšœï¼Œæ•´ä¸ªé›†ç¾¤å°±æ— æ³•å†™å…¥æ•°æ®ï¼Œè€Œæ¢å¤Masteråˆ™éœ€è¦è¿ç»´äººå‘˜æ‰‹åŠ¨æ“ä½œï¼Œæ‰€ä»¥GFSå…¶å®ç®—ä¸ä¸Šä¸€ä¸ªé«˜å¯ç”¨çš„ç³»ç»Ÿã€‚</p><p>ä½†å¦å¤–ä¸€æ–¹é¢ï¼ŒGFSè¿˜æ˜¯é‡‡ç”¨äº†Checkpointsã€æ“ä½œæ—¥å¿—ï¼ˆOperation Logsï¼‰ã€å½±å­Masterï¼ˆShadow Masterï¼‰ç­‰ä¸€ç³»åˆ—çš„å·¥ç¨‹æ‰‹æ®µï¼Œæ¥å°½å¯èƒ½åœ°ä¿éšœæ•´ä¸ªç³»ç»Ÿçš„â€œå¯æ¢å¤ï¼ˆRecoverableï¼‰â€ï¼Œä»¥åŠè¯»å±‚é¢çš„â€œå¯ç”¨æ€§ï¼ˆAvailabilityï¼‰â€ã€‚</p><p>å¯ä»¥è¯´ï¼ŒGFSæ˜¯æªå®ˆâ€œç®€å•â€è¿™ä¸ªåŸåˆ™è€Œè®¾è®¡äº†ç¬¬ä¸€ç‰ˆæœ¬çš„ç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨ä¸ç ´åè¿™ä¸ªè®¾è®¡åŸåˆ™çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ä¸Šé¢ä¸€ç³»åˆ—ç‹¬ç«‹å¯æ’æ‹”çš„å·¥ç¨‹ç­–ç•¥ï¼Œæ¥è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p><p><strong>ç¬¬äºŒä¸ªæ˜¯æ ¹æ®ç¡¬ä»¶ç‰¹æ€§æ¥è¿›è¡Œè®¾è®¡å–èˆã€‚</strong></p><p>2003å¹´ï¼Œå¤§å®¶éƒ½è¿˜åœ¨ç”¨æœºæ¢°ç¡¬ç›˜ï¼Œéšæœºè¯»å†™çš„æ€§èƒ½å¾ˆå·®ï¼Œæ‰€ä»¥åœ¨GFSçš„è®¾è®¡ä¸­ï¼Œé‡è§†çš„æ˜¯é¡ºåºè¯»å†™çš„æ€§èƒ½ï¼Œå¯¹éšæœºå†™å…¥çš„ä¸€è‡´æ€§ç”šè‡³æ²¡æœ‰ä»»ä½•ä¿éšœã€‚</p><p>è€Œä½ è¦çŸ¥é“ï¼Œ2003å¹´çš„æ•°æ®ä¸­å¿ƒï¼Œå„å°æœºå™¨çš„ç½‘å¡å¸¦å®½åªæœ‰100MBï¼Œç½‘ç»œå¸¦å®½å¸¸å¸¸æ˜¯ç³»ç»Ÿç“¶é¢ˆã€‚æ‰€ä»¥GFSåœ¨å†™æ•°æ®çš„æ—¶å€™ï¼Œé€‰æ‹©äº†æµæ°´çº¿å¼çš„æ•°æ®ä¼ è¾“ï¼Œè€Œæ²¡æœ‰é€‰æ‹©æ ‘å½¢çš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚æ›´è¿›ä¸€æ­¥åœ°ï¼ŒGFSä¸“é—¨è®¾è®¡äº†ä¸€ä¸ªSnapshotçš„æ–‡ä»¶å¤åˆ¶æ“ä½œï¼Œåœ¨æ–‡ä»¶å¤åˆ¶çš„æ—¶å€™é¿å…äº†æ•°æ®åœ¨ç½‘ç»œä¸Šä¼ è¾“ã€‚è¿™äº›è®¾è®¡éƒ½æ˜¯ä¸ºäº†å‡å°‘æ•°æ®åœ¨ç½‘ç»œä¸Šçš„ä¼ è¾“ï¼Œé¿å…æˆ‘ä»¬æœ‰é™çš„ç½‘ç»œå¸¦å®½æˆä¸ºç“¶é¢ˆã€‚</p><p><strong>ç¬¬ä¸‰ä¸ªæ˜¯æ ¹æ®å®é™…åº”ç”¨çš„ç‰¹æ€§ï¼Œæ”¾å®½äº†æ•°æ®ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰çš„é€‰æ‹©ã€‚</strong></p><p>æœ€åï¼Œè®ºæ–‡é‡Œä¹Ÿæåˆ°ï¼ŒGFSæ˜¯ä¸ºäº†åœ¨å»‰ä»·ç¡¬ä»¶ä¸Šè¿›è¡Œå¤§è§„æ¨¡æ•°æ®å¤„ç†è€Œè®¾è®¡çš„ã€‚æ‰€ä»¥GFSçš„ä¸€è‡´æ€§ç›¸å½“å®½æ¾ã€‚GFSæœ¬èº«å¯¹äºéšæœºå†™å…¥çš„ä¸€è‡´æ€§æ²¡æœ‰ä»»ä½•ä¿éšœï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªä»»åŠ¡äº¤ç»™äº†å®¢æˆ·ç«¯ã€‚å¯¹äºè¿½åŠ å†™å…¥ï¼ˆAppendï¼‰ï¼ŒGFSä¹Ÿåªæ˜¯ä½œå‡ºäº†â€œè‡³å°‘ä¸€æ¬¡ï¼ˆAt Least Onceï¼‰â€è¿™æ ·å®½æ¾çš„ä¿éšœã€‚</p><p>å¯ä»¥è¯´ï¼ŒGFSæ˜¯ä¸€ä¸ªåŸºæœ¬æ²¡æœ‰ä»€ä¹ˆä¸€è‡´æ€§ä¿éšœçš„æ–‡ä»¶ç³»ç»Ÿã€‚ä½†å³ä½¿æ˜¯è¿™æ ·ï¼Œé€šè¿‡åœ¨å®¢æˆ·ç«¯åº“é‡Œé¢åŠ ä¸Šæ ¡éªŒã€å»é‡è¿™æ ·çš„å¤„ç†æœºåˆ¶ï¼ŒGFSåœ¨å¤§è§„æ¨¡æ•°æ®å¤„ç†ä¸Šå·²ç»ç®—æ˜¯è¶³å¤Ÿå¥½ç”¨äº†ã€‚</p><p>OKï¼Œé‚£åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥å°±å¤§è‡´ç†è§£äº†GFSçš„è®¾è®¡å†³ç­–ã€‚ä¸è¿‡ä½ ä¹Ÿè¦æ¸…æ¥šçš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªè®¾è®¡åŸåˆ™å¯è¿œè¿œæ²¡æœ‰ä»¥ä¸Šæˆ‘ä»‹ç»çš„è¿™ä¹ˆç®€å•ã€‚æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šé€šè¿‡ä¸‰èŠ‚è¯¾çš„æ—¶é—´ï¼Œæ¥å¸¦ä½ åˆ†åˆ«å‰–æè¿™ä¸‰ä¸ªé‡è¦çš„è®¾è®¡é€‰æ‹©ã€‚</p><p>é‚£ä¹ˆä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±å…ˆä¸€èµ·æ¥çœ‹çœ‹ç¬¬ä¸€ä¸ªé€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯â€œç®€å•â€è¿™ä¸ªè®¾è®¡åŸåˆ™ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/15/15/158149b378d1d5b383078b3ee3440915.jpg?wh=1920x947\" alt=\"å›¾ç‰‡\"></p><p>åœ¨è¿™ä¸ªè®¾è®¡åŸåˆ™ä¸‹ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°GFSæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„å•Masteræ¶æ„ï¼Œä½†æ˜¯è¿™ä¸ªMasterå…¶å®æœ‰ä¸‰ç§ä¸åŒçš„èº«ä»½ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul>\n<li>ç›¸å¯¹äºå­˜å‚¨æ•°æ®çš„Chunkserverï¼ŒMasteræ˜¯ä¸€ä¸ªç›®å½•æœåŠ¡ï¼›</li>\n<li>ç›¸å¯¹äºä¸ºäº†ç¾éš¾æ¢å¤çš„Backup Masterï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒæ­¥å¤åˆ¶çš„ä¸»ä»æ¶æ„ä¸‹çš„ä¸»èŠ‚ç‚¹ï¼›</li>\n<li>ç›¸å¯¹äºä¸ºäº†ä¿éšœè¯»æ•°æ®çš„å¯ç”¨æ€§è€Œè®¾ç«‹çš„Shadow Masterï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼‚æ­¥å¤åˆ¶çš„ä¸»ä»æ¶æ„ä¸‹çš„ä¸»èŠ‚ç‚¹ã€‚</li>\n</ul><p>å¹¶ä¸”ï¼Œè¿™ä¸‰ç§èº«ä»½æ˜¯ä¾é ä¸åŒçš„ç‹¬ç«‹æ¨¡å—å®Œæˆçš„ï¼Œäº’ç›¸ä¹‹é—´å¹¶ä¸å¹²æ‰°ã€‚æ‰€ä»¥ï¼Œå­¦å®Œè¿™ä¸€è®²ï¼Œä½ å¯¹å¸¸è§çš„ä¸»ä»æ¶æ„ï¼ˆMaster-Slaveï¼‰ä¸‹çš„Masterçš„èŒè´£ï¼Œä»¥åŠæ•°æ®å¤åˆ¶çš„æ¨¡å¼ä¹Ÿä¼šæœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†ã€‚</p><h2>Masterçš„ç¬¬ä¸€ä¸ªèº«ä»½ï¼šä¸€ä¸ªç›®å½•æœåŠ¡</h2><p>ä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œä¸€ä¸ªæœ‰å‡ åƒå°æœåŠ¡å™¨è·‘åœ¨çº¿ä¸Šçš„çœŸå®ç³»ç»Ÿï¼ŒGFSçš„è®¾è®¡å¯ä»¥è¯´æ˜¯éå¸¸ç®€å•ã€‚</p><p>æˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ã€‚è¦æŠŠä¸€ä¸ªæ–‡ä»¶å­˜åœ¨GFSä¸Šï¼Œå…¶å®å’Œåœ¨Linuxæ“ä½œç³»ç»Ÿä¸Šå¾ˆåƒï¼ŒGFSä¸€æ ·ä¼šé€šè¿‡â€œå‘½åç©ºé—´+æ–‡ä»¶åâ€æ¥å®šä¹‰ä¸€ä¸ªæ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸€è®²çš„å½•éŸ³æ–‡ä»¶å­˜å‚¨åœ¨/data/geektime/bigdata/gfs01è¿™æ ·ä¸€ä¸ªè·¯å¾„ä¸‹ã€‚è¿™æ ·ï¼Œæ‰€æœ‰GFSçš„å®¢æˆ·ç«¯ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ª/data/geektime/bigdataå‘½åç©ºé—´åŠ ä¸Šgfs01è¿™ä¸ªæ–‡ä»¶åï¼Œå»è¯»æˆ–è€…å†™è¿™ä¸ªæ–‡ä»¶ã€‚</p><p><strong>é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬çš„å®¢æˆ·ç«¯ï¼Œå®é™…ä¸Šè¦å»è¯»æˆ–è€…å†™è¿™ä¸ªgfs01æ–‡ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å®é™…å­˜æ”¾åœ¨å“ªä¸ªç‰©ç†æœåŠ¡å™¨ä¸Šå‘¢ï¼Ÿä»¥åŠæˆ‘ä»¬çš„å®¢æˆ·ç«¯ï¼Œå…·ä½“æ˜¯æ€ä¹ˆè¯»åˆ°è¿™ä¸ªæ–‡ä»¶çš„å‘¢ï¼Ÿ</strong></p><p>é¦–å…ˆä½ è¦çŸ¥é“ï¼Œåœ¨æ•´ä¸ªGFSä¸­ï¼Œæœ‰ä¸¤ç§æœåŠ¡å™¨ï¼Œä¸€ç§æ˜¯<strong>master</strong>ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªGFSä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçš„ä¸»æ§èŠ‚ç‚¹ï¼›ç¬¬äºŒç§æ˜¯<strong>chunkserver</strong>ï¼Œä¹Ÿå°±æ˜¯å®é™…å­˜å‚¨æ•°æ®çš„èŠ‚ç‚¹ã€‚</p><p>è€Œæ—¢ç„¶GFSæ˜¯å«åšåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶ï¼Œå…¶å®å°±å¯ä»¥ä¸å­˜å‚¨åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šã€‚</p><p>å› æ­¤ï¼Œåœ¨GFSé‡Œé¢ï¼Œä¼šæŠŠæ¯ä¸€ä¸ªæ–‡ä»¶æŒ‰ç…§64MBä¸€å—çš„å¤§å°ï¼Œåˆ‡åˆ†æˆä¸€ä¸ªä¸ªchunkã€‚æ¯ä¸ªchunkéƒ½ä¼šæœ‰ä¸€ä¸ªåœ¨GFSä¸Šçš„å”¯ä¸€çš„handleï¼Œè¿™ä¸ªhandleå…¶å®å°±æ˜¯ä¸€ä¸ªç¼–å·ï¼Œèƒ½å¤Ÿå”¯ä¸€æ ‡è¯†å‡ºå…·ä½“çš„chunkã€‚ç„¶åæ¯ä¸€ä¸ªchunkï¼Œéƒ½ä¼šä»¥ä¸€ä¸ªæ–‡ä»¶çš„å½¢å¼ï¼Œæ”¾åœ¨chunkserverä¸Šã€‚</p><p>è€Œchunkserverï¼Œå…¶å®å°±æ˜¯ä¸€å°æ™®é€šçš„LinuxæœåŠ¡å™¨ï¼Œä¸Šé¢è·‘äº†ä¸€ä¸ªç”¨æˆ·æ€çš„GFSçš„chunkserverç¨‹åºã€‚è¿™ä¸ªç¨‹åºï¼Œä¼šè´Ÿè´£å’Œmasterä»¥åŠGFSçš„å®¢æˆ·ç«¯è¿›è¡ŒRPCé€šä¿¡ï¼Œå®Œæˆå®é™…çš„æ•°æ®è¯»å†™æ“ä½œã€‚</p><p>å½“ç„¶ï¼Œä¸ºäº†ç¡®ä¿æ•°æ®ä¸ä¼šå› ä¸ºæŸä¸€ä¸ªchunkserveråäº†å°±ä¸¢å¤±äº†ï¼Œæ¯ä¸ªchunkéƒ½ä¼šå­˜ä¸Šæ•´æ•´ä¸‰ä»½å‰¯æœ¬ï¼ˆreplicaï¼‰ã€‚å…¶ä¸­ä¸€ä»½æ˜¯ä¸»æ•°æ®ï¼ˆprimaryï¼‰ï¼Œä¸¤ä»½æ˜¯å‰¯æ•°æ®ï¼ˆsecondaryï¼‰ï¼Œå½“ä¸‰ä»½æ•°æ®å‡ºç°ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œå°±ä»¥ä¸»æ•°æ®ä¸ºå‡†ã€‚æœ‰äº†ä¸‰ä¸ªå‰¯æœ¬ï¼Œä¸ä»…å¯ä»¥é˜²æ­¢å› ä¸ºå„ç§åŸå› ä¸¢æ•°æ®ï¼Œè¿˜å¯ä»¥åœ¨æœ‰å¾ˆå¤šå¹¶å‘è¯»å–çš„æ—¶å€™ï¼Œåˆ†æ‘Šç³»ç»Ÿè¯»å–çš„å‹åŠ›ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/4c/2e/4ccb89f66276af2ce19c1fc83fdb432e.jpg?wh=2000x1504\" alt=\"\" title=\"æ–‡ä»¶ä¼šæ‹†åˆ†æˆchunkæ”¾åœ¨ä¸åŒçš„chunkserverä¸Š\"></p><p>å¦‚æ­¤ä¸€æ¥ï¼Œæ–‡ä»¶å°±è¢«æ‹†åˆ†æˆäº†ä¸€ä¸ªä¸ªçš„chunkå­˜åœ¨äº†chunkserverä¸Šã€‚é‚£ä¹ˆä½ å¯èƒ½è¿˜è¦é—®ï¼š<strong>GFSçš„å®¢æˆ·ç«¯ï¼Œæ€ä¹ˆçŸ¥é“è¯¥å»å“ªä¸ªchunkserveræ‰¾è‡ªå·±è¦çš„æ–‡ä»¶å‘¢ï¼Ÿ</strong></p><p>ç­”æ¡ˆå½“ç„¶æ˜¯é—®masterå•¦ã€‚</p><p>é¦–å…ˆï¼Œmasteré‡Œé¢ä¼šå­˜æ”¾ä¸‰ç§ä¸»è¦çš„å…ƒæ•°æ®ï¼ˆmetadataï¼‰ï¼š</p><ol>\n<li>æ–‡ä»¶å’Œchunkçš„å‘½åç©ºé—´ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼å‰é¢/data/geektime/bigdata/gfs01è¿™æ ·çš„è·¯å¾„å’Œæ–‡ä»¶åï¼›</li>\n<li>è¿™äº›æ–‡ä»¶è¢«æ‹†åˆ†æˆäº†å“ªå‡ ä¸ªchunkï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå…¨è·¯å¾„æ–‡ä»¶ååˆ°å¤šä¸ªchunk handleçš„æ˜ å°„å…³ç³»ï¼›</li>\n<li>è¿™äº›chunkå®é™…è¢«å­˜å‚¨åœ¨äº†å“ªäº›chunkserverä¸Šï¼Œä¹Ÿå°±æ˜¯chunk handleåˆ°chunkserverçš„æ˜ å°„å…³ç³»ã€‚</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/44/e2/440494242af83f78909bf836bbe1c0e2.jpg?wh=1920x982\" alt=\"å›¾ç‰‡\"></p><p>ç„¶åï¼Œ<strong>å½“æˆ‘ä»¬è¦é€šè¿‡ä¸€ä¸ªå®¢æˆ·ç«¯å»è¯»å–GFSé‡Œé¢çš„æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æ€ä¹ˆåšå‘¢ï¼Ÿ</strong>GFSä¼šæœ‰ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol>\n<li>å®¢æˆ·ç«¯å…ˆå»é—®masterï¼Œæˆ‘ä»¬æƒ³è¦è¯»å–çš„æ•°æ®åœ¨å“ªé‡Œã€‚è¿™é‡Œï¼Œå®¢æˆ·ç«¯ä¼šå‘å‡ºä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯æ–‡ä»¶åï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯è¦è¯»å–å“ªä¸€æ®µæ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯»å–æ–‡ä»¶çš„offsetåŠlengthã€‚å› ä¸ºæ‰€æœ‰æ–‡ä»¶éƒ½è¢«åˆ‡æˆ64MBå¤§å°çš„ä¸€ä¸ªchunkäº†ï¼Œæ‰€ä»¥æ ¹æ®offsetå’Œlengthï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ç®—å‡ºå®¢æˆ·ç«¯è¦è¯»å–çš„æ•°æ®åœ¨å“ªå‡ ä¸ªchunké‡Œé¢ã€‚äºæ˜¯ï¼Œå®¢æˆ·ç«¯å°±ä¼šå‘Šè¯‰masterï¼Œæˆ‘è¦å“ªä¸ªæ–‡ä»¶çš„ç¬¬å‡ ä¸ªchunkã€‚</li>\n<li>masteræ‹¿åˆ°äº†è¿™ä¸ªè¯·æ±‚ä¹‹åï¼Œå°±ä¼šæŠŠè¿™ä¸ªchunkå¯¹åº”çš„æ‰€æœ‰å‰¯æœ¬æ‰€åœ¨çš„chunkserverï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ã€‚</li>\n<li>ç­‰å®¢æˆ·ç«¯æ‹¿åˆ°chunkæ‰€åœ¨çš„chunkserverä¿¡æ¯åï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥ç›´æ¥å»æ‰¾å…¶ä¸­ä»»æ„çš„ä¸€ä¸ªchunkserverè¯»å–è‡ªå·±æ‰€è¦çš„æ•°æ®ã€‚</li>\n</ol><p>ä½ å¯ä»¥å‚è€ƒä¸‹å›¾æ‰€å±•ç¤ºçš„å®¢æˆ·ç«¯è¯»å–æ•°æ®çš„æ•´ä¸ªè¿‡ç¨‹æŒ‡ä»¤æµå‘ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/71/95/7124aa76c1ec715b2a29613b5f065d95.jpg?wh=2000x1504\" alt=\"\" title=\"GFSé‡Œå®¢æˆ·ç«¯è¯»å–æ•°æ®çš„æ•´ä¸ªè¿‡ç¨‹æŒ‡ä»¤æµå‘\"></p><p>è¿™æ•´ä¸ªè¿‡ç¨‹æŠ½è±¡ä¸€ä¸‹ï¼Œå…¶å®å’ŒLinuxæ–‡ä»¶ç³»ç»Ÿå·®ä¸å¤šã€‚master<s>èŠ‚ç‚¹</s>å’Œchunkserverè¿™æ ·ä¸¤ç§èŠ‚ç‚¹çš„è®¾è®¡ï¼Œå…¶å®å’Œæ“ä½œç³»ç»Ÿä¸­çš„æ–‡ä»¶ç³»ç»Ÿä¸€è„‰ç›¸æ‰¿ã€‚<strong>masterå°±å¥½åƒå­˜å‚¨äº†æ‰€æœ‰inodeä¿¡æ¯çš„super blockï¼Œè€Œchunkå°±æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªä¸ªblockã€‚</strong>åªä¸è¿‡chunkæ¯”blockçš„å°ºå¯¸å¤§äº†ä¸€äº›ï¼Œå¹¶ä¸”æ”¾åœ¨äº†å¾ˆå¤šå°ä¸åŒçš„æœºå™¨ä¸Šè€Œå·²ã€‚æˆ‘ä»¬é€šè¿‡masteræ‰¾åˆ°chunkçš„ä½ç½®æ¥è¯»å–æ•°æ®ï¼Œå°±å¥½åƒæ“ä½œç³»ç»Ÿé‡Œé€šè¿‡inodeåˆ°blockçš„ä½ç½®ï¼Œå†ä»blocké‡Œé¢è¯»å–æ•°æ®ã€‚</p><p>æ‰€ä»¥ï¼Œè¿™ä¸ªæ—¶å€™çš„masterï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªâ€œ<strong>ç›®å½•æœåŠ¡</strong>â€ï¼Œmasteræœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åªæ˜¯å­˜å‚¨ç›®å½•è¿™æ ·çš„å…ƒæ•°æ®ã€‚è¿™ä¸ªå’Œæˆ‘ä»¬çš„å•æœºç³»ç»Ÿçš„è®¾è®¡æ€æƒ³æ˜¯ä¸€æ ·çš„ã€‚å…¶å®åœ¨è®¡ç®—æœºè¿™ä¸ªè¡Œä¸šä¸­ï¼Œæ‰€æœ‰çš„ç³»ç»Ÿéƒ½æ˜¯ä»æœ€ç®€å•ã€æœ€åº•å±‚çš„ç³»ç»Ÿæ¼”åŒ–è€Œæ¥çš„ã€‚è€Œè¿™ä¸ªè¯¾ç¨‹ä¸­ä½ çœ‹åˆ°çš„å¤§éƒ¨åˆ†çš„è®¾è®¡ï¼Œå…¶å®éƒ½æœ‰è¿™ä¸ªç‰¹è´¨ã€‚</p><h2>masterçš„å¿«é€Ÿæ¢å¤æ€§å’Œå¯ç”¨æ€§ä¿éšœ</h2><p>ä¸è¿‡ï¼Œç®€å•ä¸æ˜¯æ²¡æœ‰ä»£ä»·çš„ã€‚</p><p>åœ¨è¿™ä¸ªè®¾è®¡ä¸‹ï¼Œä½ ä¼šå‘ç°GFSé‡Œé¢çš„masterèŠ‚ç‚¹å‹åŠ›å¾ˆå¤§ã€‚åœ¨ä¸€ä¸ª1000å°æœåŠ¡å™¨çš„é›†ç¾¤é‡Œé¢ï¼Œchunkserveræœ‰ä¸Šåƒä¸ªï¼Œä½†masteråªæœ‰ä¸€ä¸ªã€‚å‡ ç™¾ä¸ªå®¢æˆ·ç«¯å¹¶å‘è¯»å–çš„æ•°æ®ï¼Œè™½ç„¶å¯ä»¥åˆ†æ‘Šåˆ°é‚£1000ä¸ªchunkserverçš„èŠ‚ç‚¹ä¸Šï¼Œä½†æ˜¯æ‰¾åˆ°è¦è¯»çš„æ–‡ä»¶çš„æ•°æ®å­˜æ”¾åœ¨å“ªé‡Œï¼Œéƒ½è¦å»masterèŠ‚ç‚¹é‡Œé¢å»æ‰¾ã€‚</p><p>æ‰€ä»¥ï¼ŒmasterèŠ‚ç‚¹çš„æ‰€æœ‰æ•°æ®ï¼Œéƒ½æ˜¯<strong>ä¿å­˜åœ¨å†…å­˜</strong>é‡Œçš„ã€‚è¿™æ ·ï¼Œmasterçš„æ€§èƒ½æ‰èƒ½è·Ÿå¾—ä¸Šå‡ ç™¾ä¸ªå®¢æˆ·ç«¯çš„å¹¶å‘è®¿é—®ã€‚</p><p>ä½†æ˜¯æ•°æ®æ”¾åœ¨å†…å­˜é‡Œå¸¦æ¥çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€æ—¦masteræŒ‚æ‰ï¼Œæ•°æ®å°±ä¼šéƒ½ä¸¢äº†ã€‚æ‰€ä»¥ï¼Œmasterä¼šé€šè¿‡è®°å½•æ“ä½œæ—¥å¿—å’Œå®šæœŸç”Ÿæˆå¯¹åº”çš„Checkpointsè¿›è¡ŒæŒä¹…åŒ–ï¼Œä¹Ÿå°±æ˜¯å†™åˆ°ç¡¬ç›˜ä¸Šã€‚</p><p>è¿™æ˜¯ä¸ºäº†ç¡®ä¿åœ¨masteré‡Œçš„è¿™äº›æ•°æ®ï¼Œä¸ä¼šå› ä¸ºä¸€æ¬¡æœºå™¨æ•…éšœå°±ä¸¢å¤±æ‰ã€‚å½“masterèŠ‚ç‚¹é‡å¯çš„æ—¶å€™ï¼Œå°±ä¼šå…ˆè¯»å–æœ€æ–°çš„Checkpointsï¼Œç„¶åé‡æ”¾ï¼ˆreplayï¼‰Checkpointsä¹‹åçš„æ“ä½œæ—¥å¿—ï¼ŒæŠŠmasterèŠ‚ç‚¹çš„çŠ¶æ€æ¢å¤åˆ°ä¹‹å‰æœ€æ–°çš„çŠ¶æ€ã€‚è¿™æ˜¯æœ€å¸¸è§çš„å­˜å‚¨ç³»ç»Ÿä¼šç”¨åˆ°çš„<strong>å¯æ¢å¤æœºåˆ¶</strong>ã€‚</p><p>å½“ç„¶ï¼Œå…‰æœ‰è¿™äº›è¿˜ä¸å¤Ÿï¼Œå¦‚æœåªæ˜¯masterèŠ‚ç‚¹é‡æ–°å¯åŠ¨ä¸€ä¸‹ï¼Œä»Checkpointså’Œæ—¥å¿—ä¸­æ¢å¤åˆ°æœ€æ–°çŠ¶æ€è‡ªç„¶æ˜¯å¾ˆå¿«çš„ã€‚<strong>å¯è¦æ˜¯masterèŠ‚ç‚¹çš„ç¡¬ä»¶å½»åº•æ•…éšœäº†å‘¢ï¼Ÿ</strong></p><p>ä½ è¦çŸ¥é“ï¼Œå»æ•°æ®ä¸­å¿ƒé‡æ–°æ›´æ¢ç¡¬ä»¶å¯ä¸æ˜¯å‡ åˆ†é’Ÿçš„äº‹æƒ…ï¼Œæ‰€ä»¥GFSè¿˜ä¸ºmasterå‡†å¤‡å¥½äº†å‡ ä¸ªâ€œå¤‡èƒâ€ï¼Œä¹Ÿå°±æ˜¯å¦å¤–å‡ å°Backup Masterã€‚æ‰€æœ‰é’ˆå¯¹masterçš„æ•°æ®æ“ä½œï¼Œéƒ½éœ€è¦åŒæ ·å†™åˆ°å¦å¤–å‡†å¤‡çš„è¿™å‡ å°æœåŠ¡å™¨ä¸Šã€‚åªæœ‰å½“æ•°æ®åœ¨masterä¸Šæ“ä½œæˆåŠŸï¼Œå¯¹åº”çš„æ“ä½œè®°å½•åˆ·æ–°åˆ°ç¡¬ç›˜ä¸Šï¼Œå¹¶ä¸”è¿™å‡ ä¸ªBackup Masterçš„æ•°æ®ä¹Ÿå†™å…¥æˆåŠŸï¼Œå¹¶æŠŠæ“ä½œè®°å½•åˆ·æ–°åˆ°ç¡¬ç›˜ä¸Šï¼Œæ•´ä¸ªæ“ä½œæ‰ä¼šè¢«è§†ä¸ºæ“ä½œæˆåŠŸã€‚</p><p>è¿™ç§æ–¹å¼ï¼Œå«åšæ•°æ®çš„â€œ<strong>åŒæ­¥å¤åˆ¶</strong>â€ï¼Œæ˜¯åˆ†å¸ƒå¼æ•°æ®ç³»ç»Ÿé‡Œçš„ä¸€ç§å…¸å‹æ¨¡å¼ã€‚å‡å¦‚ä½ éœ€è¦ä¸€ä¸ªé«˜å¯ç”¨çš„MySQLé›†ç¾¤ï¼Œä¸€æ ·ä¹Ÿå¯ä»¥é‡‡ç”¨åŒæ­¥å¤åˆ¶çš„æ–¹å¼ï¼Œåœ¨ä¸»ä»æœåŠ¡å™¨ä¹‹é—´åŒæ­¥æ•°æ®ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/19/c1/199f3ddb59c4d0a0233f9b71549a85c1.jpg?wh=1920x1444\" alt=\"å›¾ç‰‡\" title=\"åœ¨t1æ—¶é—´ç‚¹ä¸Šï¼Œå®¢æˆ·ç«¯å¾—åˆ°å†™å…¥æˆåŠŸçš„è¿”å›ï¼Œæ­¤æ—¶Masterå’ŒBackup Masterçš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯Shadow Masterçš„æ•°æ®ï¼Œè¦åˆ°t2æ—¶é—´ç‚¹æ‰ä¼šè¿½ä¸Šæ¥\"></p><p>è€Œåœ¨åŒæ­¥å¤åˆ¶è¿™ä¸ªæœºåˆ¶ä¹‹å¤–ï¼Œåœ¨é›†ç¾¤å¤–éƒ¨è¿˜æœ‰ç›‘æ§masterçš„æœåŠ¡åœ¨è¿è¡Œã€‚å¦‚æœåªæ˜¯masterçš„è¿›ç¨‹æŒ‚æ‰äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªç›‘æ§ç¨‹åºä¼šç«‹åˆ»é‡å¯masterè¿›ç¨‹ã€‚è€Œå¦‚æœmasteræ‰€åœ¨çš„ç¡¬ä»¶æˆ–è€…ç¡¬ç›˜å‡ºç°æŸåï¼Œé‚£ä¹ˆè¿™ä¸ªç›‘æ§ç¨‹åºå°±ä¼šåœ¨å‰é¢è¯´çš„Backup Masteré‡Œé¢æ‰¾ä¸€ä¸ªå‡ºæ¥ï¼Œå¯åŠ¨å¯¹åº”çš„masterè¿›ç¨‹ï¼Œè®©å®ƒâ€œå¤‡èƒè½¬æ­£â€ï¼Œå˜æˆæ–°çš„masterã€‚</p><p>è€Œè¿™ä¸ªé‡Œé¢çš„æ•°æ®ï¼Œå’ŒåŸæ¥çš„masterå…¶å®ä¸€æ¨¡ä¸€æ ·ã€‚</p><p>ä¸è¿‡ï¼Œä¸ºäº†è®©é›†ç¾¤ä¸­çš„å…¶ä»–chunkserverä»¥åŠå®¢æˆ·ç«¯ä¸ç”¨æ„ŸçŸ¥è¿™ä¸ªå˜åŒ–ï¼ŒGFSé€šè¿‡ä¸€ä¸ªè§„èŒƒåç§°ï¼ˆCanonical Nameï¼‰æ¥æŒ‡å®šmasterï¼Œè€Œä¸æ˜¯é€šè¿‡IPåœ°å€æˆ–è€…Macåœ°å€ã€‚è¿™æ ·ï¼Œä¸€æ—¦è¦åˆ‡æ¢masterï¼Œè¿™ä¸ªç›‘æ§ç¨‹åºåªéœ€è¦ä¿®æ”¹DNSçš„åˆ«åï¼Œå°±èƒ½è¾¾åˆ°ç›®çš„ã€‚æœ‰äº†è¿™ä¸ªæœºåˆ¶ï¼ŒGFSçš„masterå°±ä»ä¹‹å‰çš„å¯æ¢å¤ï¼ˆRecoverableï¼‰ï¼Œè¿›åŒ–æˆäº†èƒ½å¤Ÿ<strong>å¿«é€Ÿæ¢å¤ï¼ˆFast Recoveryï¼‰</strong>ã€‚</p><p>ä¸è¿‡ï¼Œå°±ç®—åšåˆ°äº†å¿«é€Ÿæ¢å¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸æ»¡è¶³ã€‚æ¯•ç«Ÿï¼Œä»ç›‘æ§ç¨‹åºå‘ç°masterèŠ‚ç‚¹æ•…éšœã€å¯åŠ¨å¤‡ä»½èŠ‚ç‚¹ä¸Šçš„masterè¿›ç¨‹ã€è¯»å–Checkpointså’Œæ“ä½œæ—¥å¿—ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªå‡ ç§’çº§åˆ«ä¹ƒè‡³åˆ†é’Ÿçº§åˆ«çš„è¿‡ç¨‹ã€‚åœ¨è¿™ä¸ªæ—¶é—´æ®µé‡Œï¼Œæˆ‘ä»¬å¯èƒ½ä»ç„¶æœ‰å‡ ç™¾ä¸ªå®¢æˆ·ç«¯ç¨‹åºâ€œå—·å—·å¾…å“ºâ€ï¼Œå¸Œæœ›èƒ½å¤Ÿåœ¨GFSä¸Šè¯»å†™æ•°æ®ã€‚è™½ç„¶ä½œä¸ºå•ä¸ªmasterçš„è®¾è®¡ï¼Œè¿™ä¸ªæ—¶å€™çš„ç¡®æ˜¯æ²¡æœ‰åŠæ³•å»å†™å…¥æ•°æ®çš„ã€‚</p><p>ä½†æ˜¯Googleçš„å·¥ç¨‹å¸ˆè¿˜æ˜¯æƒ³äº†ä¸€ä¸ªåŠæ³•ï¼Œè®©æˆ‘ä»¬è¿™ä¸ªæ—¶å€™è¿˜èƒ½å¤Ÿä»GFSä¸Šè¯»å–æ•°æ®ã€‚</p><p>è¿™ä¸ªåŠæ³•å°±æ˜¯åŠ å…¥ä¸€ç³»åˆ—<strong>åªè¯»çš„â€œå½±å­Masterâ€</strong>ï¼Œè¿™äº›å½±å­Masterå’Œå‰é¢çš„å¤‡èƒä¸åŒï¼Œmasterå†™å…¥æ•°æ®å¹¶ä¸éœ€è¦ç­‰åˆ°å½±å­Masterä¹Ÿå†™å…¥å®Œæˆæ‰è¿”å›æˆåŠŸã€‚è€Œæ˜¯å½±å­Masterä¸æ–­åŒæ­¥masterè¾“å…¥çš„å†™å…¥ï¼Œå°½å¯èƒ½ä¿æŒè¿½ä¸Šmasterçš„æœ€æ–°çŠ¶æ€ã€‚</p><p>è¿™ç§æ–¹å¼ï¼Œå«åšæ•°æ®çš„â€œ<strong>å¼‚æ­¥å¤åˆ¶</strong>â€ï¼Œæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œå¦ä¸€ç§å…¸å‹æ¨¡å¼ã€‚å¼‚æ­¥å¤åˆ¶ä¸‹ï¼Œå½±å­Masterå¹¶ä¸æ˜¯å’Œmasterçš„æ•°æ®å®Œå…¨åŒæ­¥çš„ï¼Œè€Œæ˜¯å¯èƒ½ä¼šæœ‰ä¸€äº›å°å°çš„å»¶æ—¶ã€‚</p><p>å½±å­Masterä¼šä¸æ–­åŒæ­¥masteré‡Œçš„æ•°æ®ï¼Œä¸è¿‡å½“masterå‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯ä»¬å°±å¯ä»¥ä»è¿™äº›å½±å­Masteré‡Œæ‰¾åˆ°è‡ªå·±æƒ³è¦çš„ä¿¡æ¯ã€‚å½“ç„¶ï¼Œå› ä¸ºå°å°çš„å»¶æ—¶ï¼Œå®¢æˆ·ç«¯æœ‰å¾ˆå°çš„æ¦‚ç‡ï¼Œä¼šè¯»åˆ°ä¸€äº›è¿‡æ—¶çš„masteré‡Œé¢çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å‘½åç©ºé—´ã€æ–‡ä»¶åç­‰è¿™äº›å…ƒæ•°æ®ã€‚ä½†ä½ ä¹Ÿè¦çŸ¥é“ï¼Œè¿™ç§æƒ…å†µå…¶å®åªä¼šå‘ç”Ÿåœ¨ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶éƒ½æ»¡è¶³çš„æƒ…å†µä¸‹ï¼š</p><ol>\n<li>ç¬¬ä¸€ä¸ªï¼Œæ˜¯masteræŒ‚æ‰äº†ï¼›</li>\n<li>ç¬¬äºŒä¸ªï¼Œæ˜¯æŒ‚æ‰çš„masteræˆ–è€…Backup Masterä¸Šçš„Checkpointså’Œæ“ä½œæ—¥å¿—ï¼Œè¿˜æ²¡æœ‰è¢«å½±å­MasteråŒæ­¥å®Œï¼›</li>\n<li>ç¬¬ä¸‰ä¸ªï¼Œåˆ™æ˜¯æˆ‘ä»¬è¦è¯»å–çš„å†…å®¹ï¼Œæ°æ°æ˜¯åœ¨æ²¡æœ‰åŒæ­¥å®Œçš„é‚£éƒ¨åˆ†æ“ä½œä¸Šï¼›</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/7a/2d/7a312ed6bda66ce6e8b112yyfb77c82d.jpg?wh=1920x1444\" alt=\"å›¾ç‰‡\"></p><p>ç›¸æ¯”äºè¿™ä¸ªå°å°çš„å¯èƒ½æ€§ï¼Œå½±å­Masterè®©æ•´ä¸ªGFSåœ¨masterå¿«é€Ÿæ¢å¤çš„è¿‡ç¨‹ä¸­ï¼Œè™½ç„¶ä¸èƒ½å†™æ•°æ®ï¼Œä½†ä»ç„¶æ˜¯å®Œå…¨å¯è¯»çš„ã€‚è‡³å°‘åœ¨é›†ç¾¤çš„è¯»å–æ“ä½œä¸Šï¼ŒGFSå¯ä»¥ç®—å¾—ä¸Šæ˜¯â€œé«˜å¯ç”¨ï¼ˆHigh Availabilityï¼‰â€çš„äº†ã€‚</p><h2>å°ç»“</h2><p>å¥½äº†ï¼Œç›¸ä¿¡åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥å°±å¯¹GFSçš„åŸºæœ¬æ¶æ„æœ‰ä¸€å®šçš„äº†è§£äº†ã€‚GFSå¹¶ä¸æ˜¯ä¸€ç¯‡æœ‰ç€å¤§é‡æ–°çš„ç ”ç©¶å‘ç°çš„ç†è®ºæ€§çš„è®ºæ–‡ã€‚æ°æ°ç›¸åï¼Œæ•´ä¸ªGFSçš„æ¶æ„ï¼Œæ˜¯é€šè¿‡éå¸¸é‡è¦çš„å·¥ç¨‹åŸåˆ™æ¥è®¾è®¡çš„ï¼Œä¹Ÿå°±æ˜¯<strong>å°½é‡ç®€å•ã€éœ€è¦è€ƒè™‘å®é™…çš„ç¡¬ä»¶æƒ…å†µ</strong>ï¼Œä»¥åŠ<strong>é’ˆå¯¹å®é™…çš„åº”ç”¨åœºæ™¯è¿›è¡Œè®¾è®¡</strong>ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬é‡ç‚¹å›´ç»•GFSçš„â€œç®€å•æ€§â€ï¼Œäº†è§£äº†GFSçš„åŸºç¡€æ¶æ„è®¾è®¡ã€‚GFSé‡‡ç”¨äº†å•Masteræ¶æ„ï¼Œä½†æ˜¯è¿™ä¸ªMasteræœ‰ç€ä¸‰é‡ä¸åŒçš„å«ä¹‰ã€‚</p><p>é¦–å…ˆï¼Œä½œä¸ºå’Œchunkserverç›¸å¯¹çš„masterï¼Œå®ƒæ˜¯ä¸€ä¸ªç›®å½•æœåŠ¡ã€‚æ‰€æœ‰çš„å…ƒæ•°æ®éƒ½ä¼šä¿ç•™åœ¨æˆ‘ä»¬çš„masteré‡Œï¼Œè€Œæ‰€æœ‰çš„æ•°æ®ä¼šä¿å­˜åœ¨chunkserveré‡Œã€‚masterå­˜çš„å°±å¥½æ¯”æ˜¯inodeä¿¡æ¯ï¼Œè€Œchunkserverå­˜çš„åˆ™æ˜¯å®é™…çš„blockã€‚</p><p>å…¶æ¬¡ï¼Œä¸ºäº†ä¿éšœç³»ç»Ÿåœ¨æ•…éšœä¸‹çš„å¿«é€Ÿæ¢å¤èƒ½åŠ›å’Œè¯»æ•°æ®çš„é«˜å¯ç”¨æ€§ï¼ŒGFSåˆå¯¹è¿™ä¸ªmasteræ·»åŠ äº†å„ç§å·¥ç¨‹ä¿éšœæªæ–½ã€‚è¿™äº›æªæ–½ï¼ŒåŒ…æ‹¬Checkpointså’Œæ“ä½œæ—¥å¿—ã€Backup Masterã€å¤–éƒ¨çš„ç›‘æ§ç¨‹åºï¼Œä»¥åŠåªè¯»çš„å½±å­ Masterã€‚åœ¨è¿™ä¸ªé«˜å¯ç”¨åœºæ™¯ä¸‹ï¼ŒMasteræ˜¯å”¯ä¸€å¯ä»¥å†™å…¥æ•°æ®çš„èŠ‚ç‚¹ã€‚Backup Masteré€šè¿‡åŒæ­¥å¤åˆ¶çš„æ–¹å¼ä»masteråŒæ­¥æ•°æ®ï¼Œè€Œå½±å­Masteråˆ™é€šè¿‡å¼‚æ­¥å¤åˆ¶çš„æ–¹å¼æ¥åŒæ­¥masterçš„æ•°æ®ã€‚</p><p>åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼ŒBackup Masterå’Œå½±å­Masterå…¶å®æ˜¯Masterçš„SlaveèŠ‚ç‚¹ã€‚å¦‚æœæˆ‘ä»¬æŠŠMasterå½“æˆæ˜¯ä¸€ä¸ªMySQLæ•°æ®åº“çš„ä¸»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆBackup Masterå°±æ˜¯é…ç½®äº†é«˜å¯ç”¨çš„åŒæ­¥å¤åˆ¶çš„HAèŠ‚ç‚¹ï¼Œè€Œå½±å­Masterå°±æ˜¯åªé…ç½®äº†å¼‚æ­¥å¤åˆ¶åˆ†æ‹…æ•°æ®è¯»å–å‹åŠ›çš„readonlyèŠ‚ç‚¹ã€‚</p><p>æˆ‘å¸Œæœ›ä½ åœ¨å­¦å®Œè¿™ç¯‡è®ºæ–‡ä¹‹åï¼Œä¹Ÿèƒ½å¤Ÿå­¦ä»¥è‡´ç”¨ï¼Œ<strong>å½“ä½ æ—¥ååœ¨åšç³»ç»Ÿè®¾è®¡çš„æ—¶å€™ï¼Œå°±ä»â€œç®€å•â€å¼€å§‹ï¼Œè®©ç³»ç»Ÿæ›´å®¹æ˜“ç»´æŠ¤å’Œè¿­ä»£</strong>ã€‚åŒæ ·çš„ï¼Œä½ ä¹Ÿä¸€å®šä¼šé¢ä¸´ï¼Œä½ çš„masteréœ€è¦æ‰¿æ‹…å“ªäº›èŒè´£ã€é‡‡ç”¨å“ªäº›æ•°æ®å¤åˆ¶æ–¹å¼çš„é—®é¢˜ã€‚</p><p>ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä¼šå¸¦ä½ æ¥çœ‹çœ‹GFSå¦å¤–ä¸€ä¸ªéå¸¸é‡è¦çš„è®¾è®¡åŸåˆ™ï¼Œé‚£å°±æ˜¯æ ¹æ®å®é™…ç¡¬ä»¶æƒ…å†µè¿›è¡Œç³»ç»Ÿè®¾è®¡ã€‚ä½ ä¼šå‘ç°ï¼Œè½¯ä»¶ç³»ç»Ÿçš„è®¾è®¡ï¼Œä¸æ˜¯æŠ½è±¡çš„ç”»ç”»å›¾çº¸ï¼Œè€Œæ˜¯å’Œæˆ‘ä»¬è®¾è®¡æ±½è½¦ã€é£æœºä¸€æ ·ï¼Œéœ€è¦è€ƒè™‘çœŸå®çš„ç‰©ç†ç¡¬ä»¶çš„æ€§èƒ½å’Œé™åˆ¶çš„ã€‚ç”šè‡³æœ‰äº›è®¾è®¡ï¼Œå°±æ˜¯ä¸“é—¨é’ˆå¯¹ç¡¬ä»¶çš„ç‰©ç†ç‰¹æ€§çš„ã€‚</p><h2>æ¨èé˜…è¯»</h2><p>æœ€åï¼Œä¸“æ æ˜¯ä½ å­¦ä¹ çš„èµ·ç‚¹ï¼Œæˆ‘éå¸¸æ¨èä½ å»è¯»ä¸€è¯»GFSè®ºæ–‡çš„åŸæ–‡ã€‚å¦‚æœä½ è§‰å¾—è‡ªå·±è‹±æ–‡ä¸å¤Ÿå¥½ï¼Œä½œä¸º2003å¹´çš„ä¸€ç¯‡â€œè€â€è®ºæ–‡ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¤§é‡çš„ä¸­æ–‡è§£è¯»ç¬”è®°ï¼Œä½ éƒ½å¯ä»¥å»ç¿»ä¸€ç¿»ï¼Œæˆ‘æŠŠè®ºæ–‡çš„é“¾æ¥æ”¾åœ¨äº†<a href=\"https://static.googleusercontent.com/media/research.google.com/zh-CN//archive/gfs-sosp2003.pdf\">è¿™é‡Œ</a>ã€‚å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä¸ªé€‰æ‹©ï¼Œå°±æ˜¯å»è¯»ä¸€è¯»å€Ÿé‰´äº†GFSçš„Hadoopä¸Šçš„HDFSçš„è®ºæ–‡ï¼Œæˆ‘ä¹ŸæŠŠ<a href=\"https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=5496972\">é“¾æ¥</a>æ”¾åœ¨äº†è¿™é‡Œã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒMITçš„å¼€æ”¾è¯¾ç¨‹ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿé‡Œçš„ç¬¬ä¸‰è®²ï¼Œå°±æ˜¯é’ˆå¯¹GFSçš„ä¸“é—¨è®²è§£ï¼Œä½ ä¹Ÿå¯ä»¥å»çœ‹ä¸€çœ‹ä»–ä»¬çš„<a href=\"http://nil.csail.mit.edu/6.824/2020/video/3.html\">è§†é¢‘</a>ï¼Œç½‘ä¸Šä¹Ÿèƒ½æ‰¾åˆ°æœ‰ä¸­æ–‡å­—å¹•çš„ç‰ˆæœ¬ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>åœ¨è¯¾ç¨‹çš„æœ€åï¼Œæˆ‘æ¥ç»™ä½ ç•™ä¸¤é“æ€è€ƒé¢˜ï¼Œä½ å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼š</p><ol>\n<li>å¦‚æœä½ è¯»äº†è®ºæ–‡åŸæ–‡ï¼Œä½ åº”è¯¥çœ‹åˆ°GFSçš„å®¢æˆ·ç«¯ä¼šåœ¨è¯»å–æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼ŒæŠŠä¸€äº›æ•°æ®ç¼“å­˜äº†ä¸‹æ¥ï¼Œé‚£ä¹ˆå®ƒç©¶ç«Ÿç¼“å­˜äº†å“ªäº›æ•°æ®æ¥å‡å°‘é¢‘ç¹çš„ç½‘ç»œå¾€æ¥ï¼Ÿåœ¨è¿™ä¸ªç¼“å­˜æœºåˆ¶ä¸Šï¼Œå®¢æˆ·ç«¯æœ‰å¯èƒ½ä¼šè¯»åˆ°è¿‡æ—¶çš„æ•°æ®å—ï¼Ÿ</li>\n<li>æˆ‘å‰é¢è¯´äº†ï¼Œmasterçš„æ•°æ®éƒ½ä¼šé€šè¿‡æ“ä½œæ—¥å¿—å’ŒCheckpointsæŒä¹…åŒ–åœ¨ç¡¬ç›˜ä¸Šã€‚ä½†è¿™å¥è¯å…¶å®ä¸å®Œå…¨æ­£ç¡®ï¼Œæ¯ä¸ªchunkå­˜æ”¾åœ¨ä»€ä¹ˆchunkserverä¸Šçš„è¿™äº›å…ƒæ•°æ®ï¼Œmasterå¹¶ä¸ä¼šæŒä¹…åŒ–ã€‚è¯»å®Œè®ºæ–‡ä¹‹åï¼Œä½ èƒ½è¯´è¯´å½“masteré‡å¯çš„æ—¶å€™ï¼Œæ€ä¹ˆé‡æ–°æ‹¿åˆ°è¿™ä¸ªæ•°æ®å—ï¼Ÿ</li>\n</ol><p>ä½ å¯ä»¥æŠŠä½ çš„ç­”æ¡ˆç•™åœ¨è¯„è®ºåŒºï¼Œå’Œå¤§å®¶ä¸€èµ·æ¢è®¨ã€äº¤æµï¼Œçœ‹çœ‹è‡ªå·±çš„ç†è§£æ˜¯ä¸æ˜¯æ­£ç¡®ã€‚</p>","comments":[{"had_liked":false,"id":313797,"user_name":"åœ¨è·¯ä¸Š","can_delete":false,"product_type":"c1","uid":1402511,"ip_address":"","ucode":"6E31908EFE1107","user_header":"https://static001.geekbang.org/account/avatar/00/15/66/8f/02be926d.jpg","comment_is_top":false,"comment_ctime":1632668614,"is_pvip":false,"replies":[{"id":"113907","content":"èµğŸ‘ä½ çœŸçš„å¾ˆæ£’ï¼","user_name":"ä½œè€…å›å¤","comment_id":313797,"uid":"1053568","ip_address":"","utype":1,"ctime":1633162064,"user_name_real":"å¾æ–‡æµ©"}],"discussion_count":3,"race_medal":0,"score":"147661556678","product_id":100091101,"comment_content":"å¾è€å¸ˆå¥½ï¼ŒMIT 6.824çš„GFSé‚£ä¸€è®²çš„è®²è§£æ¡†æ¶æ˜¯ä»‹ç»åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿçš„çŸ›ç›¾ã€GFSçš„ç‰¹ç‚¹ã€å†…éƒ¨ç»“æ„å’Œè¯»å†™æ“ä½œï¼Œä¸€èˆ¬ä»‹ç»HDFSçš„ä¹¦ç±ä¹Ÿæ˜¯ç±»ä¼¼çš„æµç¨‹ã€‚ä¸è¿‡è€å¸ˆä»ç®€å•æ€§ã€è€ƒè™‘ç¡¬ä»¶æ€§èƒ½ã€ç»“åˆä¸šåŠ¡ç‰¹ç‚¹ä¸‰ä¸ªè§’åº¦æ¥è°ˆGFSè®©æˆ‘æœ‰äº†æ–°çš„å¯å‘ã€‚åœ¨è€å¸ˆçš„é¼“åŠ±ä¸‹ï¼Œä»Šå¤©æˆ‘è¯•ç€è¯»äº†ã€ŠThe Google File Systemã€‹çš„ä¸€éƒ¨åˆ†ï¼ŒèŠ±äº†å››ä¸ªå°æ—¶è¯»å®Œäº†INTRODUCTIONå’ŒDESIGN OVERVIEWï¼Œä½“ä¼šåˆ°äº†ä¸€ç‚¹è®ºæ–‡çš„ç²¾è¾Ÿï¼Œå¸Œæœ›è‡ªå·±èƒ½åšæŒä¸‹å»ã€‚<br><br>å›åˆ°è€å¸ˆçš„é—®é¢˜ï¼ŒGFS clientä¼šç¼“å­˜chunkå¯¹åº”çš„chunkserveråœ°å€ï¼Œç›´åˆ°ç¼“å­˜ä¿¡æ¯è¿‡æœŸæˆ–è€…æ–‡ä»¶é‡æ–°æ‰“å¼€ã€‚è¿™ç§æœºåˆ¶æ˜¯å¦ä¼šè¯»åˆ°è¿‡æ—¶çš„æ•°æ®å‘¢ï¼Ÿè®ºæ–‡ä¸­æ˜¯è¿™æ ·è¯´çš„ï¼ŒSince clients cache chunk locations, they may read from a stale replica before that information is refreshed ... as most of our files are append-only, a stale replica usually retures a premature end of chunk rather than outdated data. ä¹Ÿå°±æ˜¯è¯´ï¼Œåªä¼šè¯»ä¸åˆ°æœ€æ–°çš„æ•°æ®ï¼Œä¸ä¼šè¯»åˆ°è¿‡æ—¶çš„æ•°æ®ã€‚<br><br>è®ºæ–‡ä¸­çš„2.6.2 Chunk Locationsè®¨è®ºäº†chunk locationçš„ç®¡ç†æœºåˆ¶ï¼Œchunkserverå¯åŠ¨æ—¶ä¸ŠæŠ¥chunk location informationï¼Œä¹‹åå†å‘¨æœŸæ€§ä¸ŠæŠ¥ã€‚ä¹‹æ‰€ä»¥è¿™ä¹ˆè®¾è®¡ï¼Œä¸»è¦è€ƒè™‘ä¸¤ä¸ªåŸå› ã€‚ç¬¬ä¸€ï¼Œæ¶ˆé™¤masterå’Œchunkserverçš„åŒæ­¥é—®é¢˜ï¼Œç¬¬äºŒï¼ŒchunkserverçœŸæ­£ç®¡ç†äº†chunkï¼Œå¯¹äºchunk locationæ‹¥æœ‰æœ€ç»ˆçš„è¯è¯­æƒã€‚","like_count":35,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527476,"discussion_content":"èµğŸ‘ä½ çœŸçš„å¾ˆæ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633162064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1131300,"avatar":"https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg","nickname":"zixuan","note":"","ucode":"C72920DD05B074","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541796,"discussion_content":"è¡¥å……ä¸‹ï¼ŒstaleæŒ‡æ²¡æœ‰å’Œprimaryå®ŒæˆåŒæ­¥çš„chunk","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640569603,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1300466,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGMphabeneYXs9otkAtr67RvxJClDa7jPe7w8yExg4YaS2FGJruDKMj5yN1E90o6MFibnicH8gM0ibg/132","nickname":"hadoop_admin","note":"","ucode":"7EAFA775505C7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403569,"discussion_content":"æˆ‘è§‰å¾—ä¸ä¼šè¯»åˆ°è¿‡æ—¶çš„ä¿¡æ¯ï¼Œä½†å¯èƒ½è¯»ä¸åˆ°æ•°æ®ï¼Œæ¯”å¦‚æŸäº›chunkserver æ„å¤–å®•æœºäº†ï¼Œé‚£ä¹ˆè¿™äº›chunk å¯èƒ½å°±è¿ç§»åˆ°å…¶ä»–chunkserverä¸Šå»äº†ï¼Œå¦‚æœclient ç«¯æ²¡æœ‰æ›´æ–°å°±ä¼šè¯»ä¸åˆ°æ­£ç¡®çš„æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634111415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313432,"user_name":"å³°","can_delete":false,"product_type":"c1","uid":1056019,"ip_address":"","ucode":"C53CB64E8E7D19","user_header":"https://static001.geekbang.org/account/avatar/00/10/1d/13/31ea1b0b.jpg","comment_is_top":false,"comment_ctime":1632438537,"is_pvip":true,"replies":[{"id":"113912","content":"ğŸ‘å’Œè®ºæ–‡é‡Œçš„è¯´æ³•åŸºæœ¬ä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","comment_id":313432,"uid":"1053568","ip_address":"","utype":1,"ctime":1633162951,"user_name_real":"å¾æ–‡æµ©"}],"discussion_count":1,"race_medal":0,"score":"53172046089","product_id":100091101,"comment_content":"<br>1. ä¸ºäº†å‡å°‘masterçš„å‹åŠ›ï¼Œæ‰€ä»¥è¦ç¼“å­˜masterä¸Šçš„å…ƒæ•°æ®ä¿¡æ¯ã€‚åº”è¯¥ä¼šé€ æˆè¯»è¿‡æœŸæ•°æ®ï¼Œå› ä¸ºå†™å…¥ä¸å¯å˜ï¼Œä½†æ”¯æŒè¿½åŠ å†™ï¼Œå¯¹äºè¿½åŠ å†™å…¥çš„chunkçš„å…ƒæ•°æ®ï¼Œæ€ä¹ˆåŒæ­¥åˆ°å®¢æˆ·ç«¯ç¼“å­˜æŒ‰ç…§GFSç®€å•æ€§çš„åŸåˆ™æ€•æ˜¯ä¸æƒ³åšäº†ã€‚<br><br>2. æ¯ä¸ªchunkserverä¼šä¸ŠæŠ¥è‡ªå·±æ‹¥æœ‰å“ªäº›chunkã€‚åŸå› çš„è¯ï¼Œchunkserverå¿…ç„¶æœ‰è¿™ä¸ªä¿¡æ¯ï¼Œå¦‚æœmasterè¿˜æŒä¹…åŒ–çš„è¯ï¼Œçªç„¶å†’å‡ºä¸ªæ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜å¾—è€ƒè™‘ï¼Œæ•°æ®é“¾è·¯ä¸Šä¹Ÿä¼šæ›´å¤æ‚ã€‚","like_count":13,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527348,"discussion_content":"ğŸ‘å’Œè®ºæ–‡é‡Œçš„è¯´æ³•åŸºæœ¬ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633162951,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313436,"user_name":"pedro","can_delete":false,"product_type":"c1","uid":1200704,"ip_address":"","ucode":"F40C839DDFD599","user_header":"https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg","comment_is_top":false,"comment_ctime":1632443021,"is_pvip":false,"replies":[{"id":"113903","content":"æ˜¯è¿™æ ·çš„ï¼Œæ‰“ä¸ªä¸ä¸€å®šæ°å½“çš„æ¯”æ–¹ï¼Œå°±åƒå¤§å®¶éƒ½åœ¨ææ ¸ç†è®ºçš„æ—¶å€™ï¼ŒGoogleç‚¸äº†ä¸€æšæ ¸å¼¹è¯´æ ¸ç‰©ç†å°±æ˜¯è¿™æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":313436,"uid":"1053568","ip_address":"","utype":1,"ctime":1633160948,"user_name_real":"å¾æ–‡æµ©"}],"discussion_count":1,"race_medal":0,"score":"48877083277","product_id":100091101,"comment_content":"mit6.824åœ¨è®²GFSçš„æ—¶å€™è¯´ï¼ŒGFSå¹¶æ²¡æœ‰ä»€ä¹ˆç†è®ºåˆ›æ–°ï¼Œä½†æ˜¯å®ƒä¸€ä¸‹å­æäº†1000å¤šå°æœºå™¨çš„é›†ç¾¤ï¼Œå¯¹å…¶å®ƒè®ºæ–‡è€Œè¨€å®Œå…¨æ˜¯é™ç»´æ‰“å‡»ï¼Œç„¶åå®ƒå°±è¢«ä¼šè®®æ¥æ”¶äº†ã€‚","like_count":12,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527350,"discussion_content":"æ˜¯è¿™æ ·çš„ï¼Œæ‰“ä¸ªä¸ä¸€å®šæ°å½“çš„æ¯”æ–¹ï¼Œå°±åƒå¤§å®¶éƒ½åœ¨ææ ¸ç†è®ºçš„æ—¶å€™ï¼ŒGoogleç‚¸äº†ä¸€æšæ ¸å¼¹è¯´æ ¸ç‰©ç†å°±æ˜¯è¿™æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633160948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313683,"user_name":"webmin","can_delete":false,"product_type":"c1","uid":1047014,"ip_address":"","ucode":"98B0CA882454E8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f9/e6/47742988.jpg","comment_is_top":false,"comment_ctime":1632621142,"is_pvip":true,"replies":[{"id":"113925","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":313683,"uid":"1053568","ip_address":"","utype":1,"ctime":1633165277,"user_name_real":"å¾æ–‡æµ©"}],"discussion_count":1,"race_medal":0,"score":"31697392214","product_id":100091101,"comment_content":"1. GFSå®¢æˆ·ç«¯ä¼šåœ¨è¯»å–æ•°æ®æ—¶ï¼ŒæŠŠæ–‡ä»¶å…¶ä½™å—çš„å…ƒæ•°æ®ç¼“å­˜åœ¨æœ¬åœ°ï¼Œå› ä¸ºæ˜¯è¿½åŠ å†™å·²å†™å…¥æˆåŠŸçš„å…ƒæ•°æ®çŸ­æœŸä¸ä¼šå˜åŒ–ï¼Œå†è€…ä»ç©ºé—´å±€éƒ¨æ€§çš„åŸç†å‡ºå‘ï¼Œè¯»éƒ¨åˆ†å—åï¼Œå¤§æ¦‚ç‡ä¼šè¦æ¥ä¸‹æ¥è¯»è¿™ä¸ªæ–‡ä»¶ä½™ä¸‹å—ï¼Œæ‰€ä»¥æå‰è£…è½½å…ƒæ•°æ®ä¹Ÿç®—æ˜¯ä¸€ç§ä¼˜åŒ–é¢„æµ‹å§ï¼›<br><br>2. masteré‡å¯åï¼Œä¼šè®©chunkserverä¸ŠæŠ¥è‡ªå·±ç®¡ç†çš„chunkçš„metaä¿¡æ¯ï¼Œè¿™æ ·åšå¯ä»¥æˆ‘æƒ³æ˜¯è€ƒè™‘åˆ°äº†åœ¨masterå…³é—­æœŸé—´chunkserveræœ¬èº«ä¼šå‘ç”Ÿä¸€äº›å˜åŒ–ï¼Œæ¯”å¦‚chunkserverçš„ä¸»å¤‡å‘ç”Ÿåˆ‡æ¢æˆ–è€…å› ä¸ºè¿ç»´éœ€è¦è°ƒæ•´äº†chunkserverçš„IPåœ°å€ç­‰å§ã€‚","like_count":8,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527436,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633165277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313923,"user_name":"Geek_74dea9","can_delete":false,"product_type":"c1","uid":2760246,"ip_address":"","ucode":"14092EEBC08171","user_header":"","comment_is_top":false,"comment_ctime":1632743844,"is_pvip":false,"replies":[{"id":"113820","content":"å›ç­”æ­£ç¡®ï¼Œç›¸ä¿¡ä½ ä¸€å®šä»”ç»†å»çœ‹äº†è®ºæ–‡ã€‚","user_name":"ä½œè€…å›å¤","comment_id":313923,"uid":"1053568","ip_address":"","utype":1,"ctime":1632917406,"user_name_real":"å¾æ–‡æµ©"}],"discussion_count":1,"race_medal":0,"score":"18812613028","product_id":100091101,"comment_content":"chunkçš„ä½ç½®ä¿¡æ¯å¹¶ä¸ä¼šæŒä¹…åŒ–ï¼Œè€Œæ˜¯åœ¨masterå¯åŠ¨çš„æ—¶å€™ï¼Œ è®©chunk serveræ±‡æŠ¥ç»™master","like_count":5,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527520,"discussion_content":"å›ç­”æ­£ç¡®ï¼Œç›¸ä¿¡ä½ ä¸€å®šä»”ç»†å»çœ‹äº†è®ºæ–‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632917406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":344238,"user_name":"ahnselina","can_delete":false,"product_type":"c1","uid":1100888,"ip_address":"","ucode":"EE3B18BB9B7C11","user_header":"https://static001.geekbang.org/account/avatar/00/10/cc/58/c593587c.jpg","comment_is_top":false,"comment_ctime":1651390955,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10241325547","product_id":100091101,"comment_content":"å¾è€å¸ˆå¥½ï¼Œæœ‰ä¸ªç–‘é—®ï¼š<br>Shadow masteråˆ†æ‹…è¯»å‹åŠ›çš„è§’è‰²ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨backup masteræ¥åˆ†æ‹…å‘¢ï¼Ÿ","like_count":2},{"had_liked":false,"id":314055,"user_name":"æ¨æ¨ã€‚","can_delete":false,"product_type":"c1","uid":1990393,"ip_address":"","ucode":"457992FB234357","user_header":"https://static001.geekbang.org/account/avatar/00/1e/5e/f9/ca88bdb8.jpg","comment_is_top":false,"comment_ctime":1632820090,"is_pvip":true,"replies":[{"id":"113916","content":"è¿™éƒ¨åˆ†å¯ä»¥è¯»ä¸€ä¸‹è®ºæ–‡ 4.3 éƒ¨åˆ†ï¼Œmasterå’Œchunkserverä¹‹é—´æœ‰å¿ƒè·³<br><br>é›†ç¾¤å¹¶ä¸ä¼šâ€œåˆ›å»ºâ€æ–°çš„trunk serverï¼Œè€Œæ˜¯æœ‰æ–°çš„ç¡¬ä»¶åŠ å…¥åˆ°trunk serverï¼Œmasterå¯ä»¥æ ¹æ®ç­–ç•¥å»åšrebalanceã€‚<br><br>å¦‚æœæœ‰ç¡¬ä»¶ä¸‹çº¿ï¼Œmasterä¹Ÿä¸å…³å¿ƒå¦‚ä½•æ¢å¤ï¼Œä»–åªä¼šåˆ©ç”¨å‰©ä¸‹çš„ç¡¬ä»¶æ¥ç¡®ä¿3ä»½replicaæ¥ä¿æŒå¯ç”¨æ€§ã€‚","user_name":"ä½œè€…å›å¤","comment_id":314055,"uid":"1053568","ip_address":"","utype":1,"ctime":1633164410,"user_name_real":"å¾æ–‡æµ©"}],"discussion_count":2,"race_medal":0,"score":"10222754682","product_id":100091101,"comment_content":"æƒ³é—®ä¸€ä¸‹ master å¦‚ä½•æ›´æ–° chunk serverçš„çŠ¶æ€å’Œæ•°æ®å‘¢ å¦‚æœæœ‰ chunk server failedäº† å¦‚ä½•å»ºç«‹ä¸€ä¸ªæ–°çš„trunk server å‘¢","like_count":3,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527559,"discussion_content":"è¿™éƒ¨åˆ†å¯ä»¥è¯»ä¸€ä¸‹è®ºæ–‡ 4.3 éƒ¨åˆ†ï¼Œmasterå’Œchunkserverä¹‹é—´æœ‰å¿ƒè·³\n\né›†ç¾¤å¹¶ä¸ä¼šâ€œåˆ›å»ºâ€æ–°çš„trunk serverï¼Œè€Œæ˜¯æœ‰æ–°çš„ç¡¬ä»¶åŠ å…¥åˆ°trunk serverï¼Œmasterå¯ä»¥æ ¹æ®ç­–ç•¥å»åšrebalanceã€‚\n\nå¦‚æœæœ‰ç¡¬ä»¶ä¸‹çº¿ï¼Œmasterä¹Ÿä¸å…³å¿ƒå¦‚ä½•æ¢å¤ï¼Œä»–åªä¼šåˆ©ç”¨å‰©ä¸‹çš„ç¡¬ä»¶æ¥ç¡®ä¿3ä»½replicaæ¥ä¿æŒå¯ç”¨æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633164410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009518,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/6e/f5ee46e8.jpg","nickname":"æµ·æ»¨","note":"","ucode":"F1B94D2DB944DC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399985,"discussion_content":"ä¸€èˆ¬æ˜¯chunk severä¸»åŠ¨ä»¥å¿ƒè·³åŒ…çš„æ–¹å¼ä¸ŠæŠ¥è‡ªå·±çš„çŠ¶æ€ã€‚å¦‚æœæœ‰chunk severæŒ‚äº†ï¼Œmasterä¸ä¼šå»å»ºç«‹æ–°çš„chunk severï¼Œè€Œæ˜¯å°†è¿™ä¸ªæŒ‚æ‰chunk serverä¸Šçš„æ–‡ä»¶chunkï¼ˆé€šè¿‡å…¶ä»–æ–‡ä»¶chunkå‰¯æœ¬ï¼‰è¿ç§»åˆ°å…¶ä»–chunk severä¸Šã€‚æ–°chunk severçš„å»ºç«‹ï¼Œåªèƒ½äººå·¥è¿ç»´æ¥æ“ä½œ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1633131863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327073,"user_name":"zixuan","can_delete":false,"product_type":"c1","uid":1131300,"ip_address":"","ucode":"C72920DD05B074","user_header":"https://static001.geekbang.org/account/avatar/00/11/43/24/3f9f7c70.jpg","comment_is_top":false,"comment_ctime":1639903833,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5934871129","product_id":100091101,"comment_content":"Shadow masteråˆ†æ‹…è¯»å‹åŠ›çš„è§’è‰²ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ç”¨backup masteræ¥æ‰¿æ‹…å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1066964,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/d4/e216d06e.jpg","nickname":"mimiyk","note":"","ucode":"A12FAA6C327E3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570060,"discussion_content":"backup masteræ—¥å¸¸åªæ˜¯æ¥æ”¶æ•°æ®è½ç›˜å¹¶ä¸å¯åŠ¨masterè¿›ç¨‹, è¦è®©å®ƒå¯ç”¨å¾—å¯åŠ¨è¿›ç¨‹è¯»checkpointé‡æ”¾åæ‰èƒ½å·¥ä½œ, æ¯”è¾ƒè€—æ—¶. Shadow masteråˆ™ä¸€ç›´æ˜¯æ´»è·ƒçš„.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651651655,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2313483,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoxwOia66AoThuONdeGHK5ZA80QzfXgNSeolk72UWCC4ssw6oY7reZkmXsczvke42gfUONu17bk8Vw/132","nickname":"jackey90","note":"","ucode":"40F2251AF4D160","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":567067,"discussion_content":"æˆ‘ä¹Ÿæœ‰åŒæ ·çš„ç–‘é—®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650818331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320185,"user_name":"~~äº”æµ©~~","can_delete":false,"product_type":"c1","uid":2225465,"ip_address":"","ucode":"E25E5A029CAFED","user_header":"https://static001.geekbang.org/account/avatar/00/21/f5/39/4f3e5c0c.jpg","comment_is_top":false,"comment_ctime":1636111816,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5931079112","product_id":100091101,"comment_content":"å¤šä¸ªbackup masteråŒæ­¥æ“ä½œï¼Œå¦‚ä½•åšåˆ°æ•°æ®ä¸€è‡´çš„ï¼Œå…¶å®åˆæ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼æ²¡æœ‰å¼ºä¸€è‡´ç®—æ³•ï¼Œé ç®€å•çš„äºŒé˜¶æ®µæäº¤ï¼Œææ€•ä¸è¡Œ","like_count":1,"discussions":[{"author":{"id":1066752,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","nickname":"piboye","note":"","ucode":"7CFD8712857A85","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541449,"discussion_content":"æœ‰masterï¼ŒåŒæ­¥åªæ˜¯å¤åˆ¶ï¼Œå¤åˆ¶æœ¬èº«ä¸éœ€è¦å¤æ‚ç®—æ³•ï¼Œä¹Ÿä¸éœ€è¦äºŒé˜¶æ®µã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640366453,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066752,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","nickname":"piboye","note":"","ucode":"7CFD8712857A85","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541450,"discussion_content":"æœ‰masterå¯ä»¥æƒ³è±¡æˆå•çº¿ä¸²è¡Œå¤„ç†ï¼Œå¤åˆ¶æœºåˆ¶å°±æ˜¯å¤åˆ¶æµæ°´ï¼Œç¡®è®¤æœºåˆ¶åªéœ€è¦ä¿è¯ä¹‹å‰çš„éƒ½å¤åˆ¶åˆ°äº†2ä»½å°±å¯ä»¥è¿”è¿˜å®¢æˆ·ç«¯æˆåŠŸäº†ã€‚ æµæ°´ä½ å¯ä»¥æƒ³è±¡æˆä¸€ä¸ªtcpæµï¼Œackå½“æˆæ˜¯ç¡®è®¤ï¼Œackçš„åºå·å°±è¡¨ç¤ºä¹‹å‰éƒ½æˆåŠŸäº†ã€‚ä¸çŸ¥é“æ˜¯å¦å¯ä»¥è¿™ä¹ˆç†è§£ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640366840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313751,"user_name":"æ½‡æ¹˜å¤œé›¨","can_delete":false,"product_type":"c1","uid":2775556,"ip_address":"","ucode":"7EBE77DF29E86E","user_header":"https://static001.geekbang.org/account/avatar/00/2a/5a/04/335e02fd.jpg","comment_is_top":false,"comment_ctime":1632647642,"is_pvip":false,"replies":[{"id":"113827","content":"æ½‡æ¹˜å¤œé›¨åŒå­¦ï¼Œ<br><br>ä½ å¥½ï¼Œä»æˆ‘è‡ªå·±è¯»è®ºæ–‡çš„ç»éªŒæ¥çœ‹ã€‚è¯»GFSï¼ŒMapReduceå’ŒBigTableçš„è®ºæ–‡ï¼Œå¯¹äºèƒŒæ™¯çŸ¥è¯†çš„è¦æ±‚ä¸é«˜ã€‚ä¹Ÿæ¯”è¾ƒå®¹æ˜“è¯»æ‡‚ã€‚<br><br>å¯¹äºæ²¡æœ‰å¤ªå¤šå®é™…åˆ†å¸ƒå¼ç³»ç»Ÿç»éªŒçš„åŒå­¦æ¥è¯´ï¼Œä¸»è¦çš„å­¦ä¹ æŒ‘æˆ˜ï¼Œä¼šåœ¨åç»­çš„Chubbyï¼ŒSpannerè¿™äº›è®ºæ–‡ä¸­ã€‚ä¸è¿‡æˆ‘ä¼šåœ¨é‡Œé¢è¡¥å……è¶³å¤Ÿçš„åŸºç¡€çŸ¥è¯†ï¼Œè®©å¤§å®¶èƒ½å¤Ÿè¯»æ‡‚è¿™äº›çœ‹èµ·æ¥æœ‰äº›å¤æ‚çš„è®ºæ–‡ã€‚","user_name":"ä½œè€…å›å¤","comment_id":313751,"uid":"1053568","ip_address":"","utype":1,"ctime":1632918543,"user_name_real":"å¾æ–‡æµ©"}],"discussion_count":1,"race_medal":0,"score":"5927614938","product_id":100091101,"comment_content":"æƒ³è¯·é—®ä¸‹ï¼Œçœ‹gfsä¸‰é©¾é©¬è½¦ç­‰è®ºæ–‡éœ€è¦å•¥å‰ç½®çŸ¥è¯†å—ï¼Œæˆ‘æ­£åœ¨å­¦å¤§æ•°æ®ç›¸å…³æŠ€æœ¯ä¸æ¡†æ¶ï¼Œå¯¹åˆ†å¸ƒå¼ä¸æ˜¯å¾ˆäº†è§£ï¼Œçœ‹è®ºæ–‡æœ‰ç‚¹æ‘¸ä¸ç€å¤´è„‘","like_count":1,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527460,"discussion_content":"æ½‡æ¹˜å¤œé›¨åŒå­¦ï¼Œ\n\nä½ å¥½ï¼Œä»æˆ‘è‡ªå·±è¯»è®ºæ–‡çš„ç»éªŒæ¥çœ‹ã€‚è¯»GFSï¼ŒMapReduceå’ŒBigTableçš„è®ºæ–‡ï¼Œå¯¹äºèƒŒæ™¯çŸ¥è¯†çš„è¦æ±‚ä¸é«˜ã€‚ä¹Ÿæ¯”è¾ƒå®¹æ˜“è¯»æ‡‚ã€‚\n\nå¯¹äºæ²¡æœ‰å¤ªå¤šå®é™…åˆ†å¸ƒå¼ç³»ç»Ÿç»éªŒçš„åŒå­¦æ¥è¯´ï¼Œä¸»è¦çš„å­¦ä¹ æŒ‘æˆ˜ï¼Œä¼šåœ¨åç»­çš„Chubbyï¼ŒSpannerè¿™äº›è®ºæ–‡ä¸­ã€‚ä¸è¿‡æˆ‘ä¼šåœ¨é‡Œé¢è¡¥å……è¶³å¤Ÿçš„åŸºç¡€çŸ¥è¯†ï¼Œè®©å¤§å®¶èƒ½å¤Ÿè¯»æ‡‚è¿™äº›çœ‹èµ·æ¥æœ‰äº›å¤æ‚çš„è®ºæ–‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632918543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":351484,"user_name":"æ—¥å°±æœˆå°†","can_delete":false,"product_type":"c1","uid":2651148,"ip_address":"","ucode":"0F9BA55A2898FF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/cabLXAUXiavXnEckAgo971o4l1CxP4L9wOV2eUGTyKBUicTib6gJyKV9iatM4GG1scz5Ym17GOzXWQEGzhE31tXUtQ/132","comment_is_top":false,"comment_ctime":1657845442,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657845442","product_id":100091101,"comment_content":"æˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæ–‡ä¸­è¯´çš„GFS åœ¨å†™æ•°æ®çš„æ—¶å€™ï¼Œé€‰æ‹©äº†æµæ°´çº¿å¼çš„æ•°æ®ä¼ è¾“ï¼Œè€Œæ²¡æœ‰é€‰æ‹©æ ‘å½¢çš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚è¿™ä¸¤ç§ä¼ è¾“æ–¹å¼çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆèµ„æ–™å¯ä»¥äº†è§£ä¸€ä¸‹è¿™ä¸¤ç§æ–¹å¼å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":347520,"user_name":"Chloe","can_delete":false,"product_type":"c1","uid":1004953,"ip_address":"","ucode":"C4848ED5B35752","user_header":"https://static001.geekbang.org/account/avatar/00/0f/55/99/4bdadfd3.jpg","comment_is_top":false,"comment_ctime":1654109035,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654109035","product_id":100091101,"comment_content":"åˆšå­¦äº†ä¸¤å¤©ï¼Œå¾ˆå–œæ¬¢è€å¸ˆçš„é£æ ¼ã€‚è¯¾ç¨‹å†…å®¹åˆšåˆšå¥½ï¼Œå³è®²æ˜ç™½äº†æ¥é¾™å»è„‰ï¼Œåˆæ¿€å‘äº†è¯»åŸè‘—çš„å…´è¶£ï¼Œè°¢è°¢è€å¸ˆ","like_count":0},{"had_liked":false,"id":347519,"user_name":"Chao","can_delete":false,"product_type":"c1","uid":1152428,"ip_address":"","ucode":"CE995B39587D22","user_header":"https://static001.geekbang.org/account/avatar/00/11/95/ac/ff011d99.jpg","comment_is_top":false,"comment_ctime":1654104942,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654104942","product_id":100091101,"comment_content":"1. ä¸ºäº†å‡å°‘chuckserverä¹‹é—´çš„trafficï¼Œæ¯ä¸ªchunkserveréœ€è¦ç¼“å­˜chunkçš„metadataï¼Œä»¥åŠchunkçš„hash codeï¼Œè¿™æ ·å¦‚æœæœ‰æ›´æ”¹çš„è¯å¯ä»¥ç›´æ¥æ¯”è¾ƒhash codeï¼Œå¦‚æœä¸€è‡´ï¼Œå°±ä»£è¡¨ä¸éœ€è¦æ›´æ–°<br>2. masteré‡æ–°å¯åŠ¨ä¹‹åä¼špingæ¯ä¸ªchunk serverï¼Œç„¶åchunk serverè¿”å›å®ƒè‡ªèº«ç¼“å­˜çš„metadada","like_count":0},{"had_liked":false,"id":335952,"user_name":"é»„é‡‘æœ","can_delete":false,"product_type":"c1","uid":1456586,"ip_address":"","ucode":"329811FF99F4B8","user_header":"https://static001.geekbang.org/account/avatar/00/16/39/ca/cdc58834.jpg","comment_is_top":false,"comment_ctime":1645785001,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645785001","product_id":100091101,"comment_content":"çŒœæµ‹:å®¢æˆ·ç«¯å¸Œæœ›è¯»å–æ•°æ®çš„æ—¶å€™, ä¼šè¯¢é—® master è‡ªå·±ç›®æ ‡æ–‡ä»¶çš„ metadata, çŒœæµ‹ä¸ºäº†æé«˜æ•ˆç‡ä¼šç¼“å­˜è¿™éƒ¨åˆ†æ•°æ®<br>æ˜¯å¦æœ‰å¯èƒ½ä¼šè®¿é—®åˆ°è¿‡æœŸçš„è€æ•°æ®?<br>æœ‰å¯èƒ½, æ•°æ®åœ¨åç»­çš„æ—¶é—´ä¸­æœ‰å¯èƒ½è¢«åˆ«çš„ç”¨æˆ·æ“ä½œ<br><br>æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ•°æ®å¯ä»¥æ€ä¹ˆæ“ä½œå‘¢? <br>ä¿®æ”¹æ–‡ä»¶å†…å®¹- è²Œä¼¼ä¸æ”¯æŒä¿®æ”¹æ–‡ä»¶å†…å®¹å§<br>åˆ é™¤æ–‡ä»¶- æ‹¿ç€è€çš„ metadata æ— æ³•è®¿é—®åˆ°æ•°æ®, å½±å“ä¸å¤§<br>åˆ é™¤ä¹‹ååœ¨æ·»åŠ æ–‡ä»¶-æ‹¿ç€è€çš„ metadata æ— æ³•è®¿é—®åˆ°æ•°æ®, ä½†æ˜¯æ–‡ä»¶å®é™…å­˜åœ¨å†…å­˜ä¸­, æœ‰å½±å“<br><br>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢?<br>æ˜¯å¦å¯ä»¥è€ƒè™‘ä¸ºmetadata æ·»åŠ ç‰ˆæœ¬å·, å®¢æˆ·ç«¯å» chunkserver æ‹¿æ•°æ®çš„æ—¶å€™å‘ç°ç‰ˆæœ¬æ¯”è¾ƒè½åå¯ä»¥å» master è·å–æœ€æ–°çš„æ•°æ®<br><br>æœ‰ä¸å¯¹çš„åœ°æ–¹è¿˜æœ›æŒ‡æ­£,å¤šè°¢","like_count":0},{"had_liked":false,"id":330617,"user_name":"é˜¿æ©¦æœ¨","can_delete":false,"product_type":"c1","uid":1104828,"ip_address":"","ucode":"06AB6A83A820A1","user_header":"https://static001.geekbang.org/account/avatar/00/10/db/bc/286e72d2.jpg","comment_is_top":false,"comment_ctime":1642071637,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1642071637","product_id":100091101,"comment_content":"å®¢æˆ·ç«¯è¯»å–æ–‡ä»¶æ—¶ï¼Œåªå‘é€æ–‡ä»¶åç§°å’Œè·¯å¾„ä¸å¯ä»¥å—ï¼Ÿä¸ºä½•éœ€è¦å‘é€offsetå’Œlengthï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2419502,"avatar":"https://static001.geekbang.org/account/avatar/00/24/eb/2e/90fea784.jpg","nickname":"æŸ’","note":"","ucode":"D41241629321A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":583520,"discussion_content":"ä½ åˆä¸ç”¨è¯»æ•´ä¸ªæ–‡ä»¶ï¼Œæ¯”å¦‚åªè¯»æ–‡ä»¶çš„æŸä¸€è¡Œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1660179590,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ä¸Šæµ·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327941,"user_name":"dahai","can_delete":false,"product_type":"c1","uid":1762705,"ip_address":"","ucode":"9F866FC42DF9A8","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIVR2wY9icec2CGzZ4VKPdwK2icytM5k1tHm08qSEysFOgl1y7lk2ccDqSCvzibHufo2Cb9c2hjr0LIg/132","comment_is_top":false,"comment_ctime":1640409876,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640409876","product_id":100091101,"comment_content":"å…³äºä¸ºä»€ä¹ˆä¸å¯åŠ¨å¤‡ä»½master,è€Œæ˜¯å¯åŠ¨å½±å­master.åŸå› æ˜¯å½±å­masteræ˜¯çƒ­æ•°æ®ï¼Œå¯ä»¥ç›´æ¥å¯åŠ¨è¢«ä½¿ç”¨ï¼Œè€Œå¤‡ä»½masteræœ‰éƒ¨åˆ†éœ€è¦é‡æ”¾çš„æ—¥å¿—ï¼Œæ— æ³•ç«‹å³å¯åŠ¨ã€‚æ˜¯è¿™æ ·ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":327923,"user_name":"piboye","can_delete":false,"product_type":"c1","uid":1066752,"ip_address":"","ucode":"7CFD8712857A85","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","comment_is_top":false,"comment_ctime":1640365913,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1640365913","product_id":100091101,"comment_content":"nvmå†…å­˜ï¼Œæ˜¯å¯ä»¥åŠ é€Ÿè¿™ä¸ªmasterçš„æ€§èƒ½å§","like_count":0},{"had_liked":false,"id":322403,"user_name":"Geek_4c2e3e","can_delete":false,"product_type":"c1","uid":2827756,"ip_address":"","ucode":"A6C35563483EC6","user_header":"","comment_is_top":false,"comment_ctime":1637370803,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1637370803","product_id":100091101,"comment_content":"è¯¾åæ€è€ƒé¢˜ï¼š<br>1:å®¢æˆ·ç«¯ç¼“å­˜äº†chunk locationsï¼Œå¯èƒ½ä¼šè¯»åˆ°è¿‡æ—¶çš„æ•°æ®ï¼Œè¿™ä¸ªè¿‡æ—¶çª—å£å—ç¼“å­˜é¡¹è¶…æ—¶æ—¶é—´å’Œä¸‹æ¬¡æ‰“å¼€æ–‡ä»¶çš„æ—¶æœºå½±å“ã€‚åŸæ–‡ï¼šSince clients cache chunk locations, they may read from a stale replica before that information is refreshed. This window is limited by the cache entryâ€™s timeout and the next open of the file, which purges from the cache all chunk information for that file.<br>2.è½®è¯¢chunkserverã€‚åŸæ–‡ï¼šThe master does not keep a persistent record of which chunkservers have a replica of a given chunk. It simply polls chunkservers for that information at startup.","like_count":0},{"had_liked":false,"id":319620,"user_name":"fuyu","can_delete":false,"product_type":"c1","uid":1012551,"ip_address":"","ucode":"E2D00651A70E27","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIKVicSvNf6OFvv4m3ibfsYCIUxic41kODPa9cuGUJjPcBtryLBDljalIVUiaJKlkGEJtOMZ03XSFlx1w/132","comment_is_top":false,"comment_ctime":1635867519,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635867519","product_id":100091101,"comment_content":"ä¸è¿‡ï¼Œä¸ºäº†è®©é›†ç¾¤ä¸­çš„å…¶ä»– chunkserver ä»¥åŠå®¢æˆ·ç«¯ä¸ç”¨æ„ŸçŸ¥è¿™ä¸ªå˜åŒ–ï¼ŒGFS é€šè¿‡ä¸€ä¸ªè§„èŒƒåç§°ï¼ˆCanonical Nameï¼‰æ¥æŒ‡å®š masterï¼Œè€Œä¸æ˜¯é€šè¿‡ IP åœ°å€æˆ–è€… Mac åœ°å€ã€‚è¿™æ ·ï¼Œä¸€æ—¦è¦åˆ‡æ¢ masterï¼Œè¿™ä¸ªç›‘æ§ç¨‹åºåªéœ€è¦ä¿®æ”¹ DNS çš„åˆ«åï¼Œå°±èƒ½è¾¾åˆ°ç›®çš„ã€‚æœ‰äº†è¿™ä¸ªæœºåˆ¶ï¼ŒGFS çš„ master å°±ä»ä¹‹å‰çš„å¯æ¢å¤ï¼ˆRecoverableï¼‰ï¼Œè¿›åŒ–æˆäº†èƒ½å¤Ÿå¿«é€Ÿæ¢å¤ï¼ˆFast Recoveryï¼‰ã€‚<br><br><br>è¿™ä¸ªæ²¡æ˜ç™½ä»€ä¹ˆæ„æ€ï¼Ÿå¦‚æœæ˜¯åŸŸåï¼ŒSDK è‚¯å®šä¼šæœ‰ç¼“å­˜æ—¶é—´ï¼Œæ²¡æ˜ç™½Canonical Nameæ˜¯ä»€ä¹ˆæ„æ€","like_count":1},{"had_liked":false,"id":317480,"user_name":"é˜¿ç”˜","can_delete":false,"product_type":"c1","uid":1057843,"ip_address":"","ucode":"BC93175B70E05D","user_header":"https://static001.geekbang.org/account/avatar/00/10/24/33/bcf37f50.jpg","comment_is_top":false,"comment_ctime":1634809924,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1634809924","product_id":100091101,"comment_content":"masterè·Ÿchunkserverä¹‹é—´æ²¡æœ‰å¿ƒè·³ä¹‹ç±»çš„åä½œå—ï¼Ÿä¸ä¼šå¯¹æŒ‚æ‰çš„chunkserverè¿›è¡Œæ˜ å°„ä¿®æ”¹æˆ–è€…æ•°æ®è¿ç§»å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":316027,"user_name":"hadoop_admin","can_delete":false,"product_type":"c1","uid":1300466,"ip_address":"","ucode":"7EAFA775505C7E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJGMphabeneYXs9otkAtr67RvxJClDa7jPe7w8yExg4YaS2FGJruDKMj5yN1E90o6MFibnicH8gM0ibg/132","comment_is_top":false,"comment_ctime":1634111203,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1634111203","product_id":100091101,"comment_content":"æœ‰ä¸€ä¸ªé—®é¢˜æ²¡æƒ³æ˜ç™½ï¼Œåœ¨GFSç³»ç»Ÿä¸­ï¼ŒGFS çš„å®¢æˆ·ç«¯éœ€è¦è¯»æŸä¸ªæ–‡ä»¶ï¼Œå®ƒå‘GFS çš„masterå‘ç”Ÿè¯·æ±‚çš„æ—¶å€™åªæœ‰æ–‡ä»¶åå§ï¼Œå®ƒè¿˜ä¸çŸ¥é“chunkçš„ä¿¡æ¯å§ï¼Ÿæ–‡ä¸­ çš„è¯·æ±‚ä¸­è¿˜å¸¦äº†chunkä¿¡æ¯ï¼Œæ²¡æ˜ç™½ã€‚","like_count":0,"discussions":[{"author":{"id":2207117,"avatar":"https://static001.geekbang.org/account/avatar/00/21/ad/8d/43cba089.jpg","nickname":"è“è‰²ã€‚","note":"","ucode":"005371B754F4DF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556083,"discussion_content":"offset+size æ˜¯ä¸€ç§å¾ˆå¸¸è§çš„è®¾è®¡æ€è·¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647191091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066752,"avatar":"https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg","nickname":"piboye","note":"","ucode":"7CFD8712857A85","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541451,"discussion_content":"64mæ˜¯å›ºå®šçš„chunkå¤§å°ï¼Œä¸æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œå°±åƒlinuxçš„é¡µå¤§å°å›ºå®šä¸º16kï¼Œä½ æƒ³è¯»offsetçš„æ—¶å€™ï¼Œå°±è½¬æ¢æˆå¯¹åº”çš„ç¬¬å‡ é¡µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640367635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315024,"user_name":"Will","can_delete":false,"product_type":"c1","uid":1969213,"ip_address":"","ucode":"1F1B255267052C","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJIic0IdMZpPQ6c2nicqroRM2csjG7n2uUvHBtKxBl7mqwyibDhFmoIKBpqiazj8AzVpmicWXWq4MUwuaw/132","comment_is_top":false,"comment_ctime":1633662447,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1633662447","product_id":100091101,"comment_content":"å¯ä»¥é—®ä¸€ä¸‹è€å¸ˆ GSFè®¾è®¡åŸåˆ™çš„å›¾ æ˜¯ç”¨ä»€ä¹ˆè½¯ä»¶ç”»çš„ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1234202,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Gf2QrwPGnMxzibPQoVjgoRAFtpO2Sy8QUNqyNRHgwkkZjH9XT1nficRmQAYP40IxgjcM4yaxDicuadiaGCIyyJLWQA/132","nickname":"zs19940317","note":"","ucode":"CC4DE62F16B8D1","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547951,"discussion_content":"xmind","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642951401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314586,"user_name":"thomas","can_delete":false,"product_type":"c1","uid":1016777,"ip_address":"","ucode":"9AB945308F1B50","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/c9/5d03981a.jpg","comment_is_top":false,"comment_ctime":1633244143,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1633244143","product_id":100091101,"comment_content":"å‡è®¾1ä¸ªæ–‡ä»¶æœ‰3ä¸ªå‰¯æœ¬(1ä¸ªå‰¯æœ¬åœ¨ä¸€ä¸ªchunkserver)ï¼Œ æœ‰Nä¸ªå®¢æˆ·ç«¯æ¥è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚ä½•ä¿è¯è¿™Nä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œèƒ½å¹³å‡çš„åˆ†å‘åˆ°è¿™3ä¸ªchunkserverï¼Ÿæ˜¯masterä¼šå»åšè½®è¯¢ï¼Œç„¶åè¿”å›ç»™å®¢æˆ·ç«¯å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":314545,"user_name":"ç«å¨ƒå„¿","can_delete":false,"product_type":"c1","uid":1252132,"ip_address":"","ucode":"2704841763FD70","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/24/1006c208.jpg","comment_is_top":false,"comment_ctime":1633192208,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1633192208","product_id":100091101,"comment_content":"GFS çš„å®¢æˆ·ç«¯ä¼šåœ¨è¯»å–æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼ŒæŠŠä¸€äº›æ•°æ®ç¼“å­˜äº†ä¸‹æ¥ï¼Œé‚£ä¹ˆå®ƒç©¶ç«Ÿç¼“å­˜äº†å“ªäº›æ•°æ®æ¥å‡å°‘é¢‘ç¹çš„ç½‘ç»œå¾€æ¥ï¼Ÿåœ¨è¿™ä¸ªç¼“å­˜æœºåˆ¶ä¸Šï¼Œå®¢æˆ·ç«¯æœ‰å¯èƒ½ä¼šè¯»åˆ°è¿‡æ—¶çš„æ•°æ®å—ï¼Ÿ<br>åº”è¯¥æ˜¯  ç¼“å­˜ ä¹‹å‰ è¯»å–åˆ°çš„CHUNK å¯¹åº”çš„ CHUNK SERVER çš„å¯¹åº”å…³ç³»ã€‚<br><br>èƒ½è¯´è¯´å½“ master é‡å¯çš„æ—¶å€™ï¼Œæ€ä¹ˆé‡æ–°æ‹¿åˆ°è¿™ä¸ªæ•°æ®å—ï¼Ÿ<br>å½“MASTER é‡å¯æ—¶å€™ï¼Œ ä¼šæ‰¾åˆ° CHUNKSERVER, é‡æ–° è·å– CHUNKSERVERé‡Œé¢ ä¿å­˜çš„ CHUNKä¿¡æ¯ï¼Œä»¥åŠå„ç§SERVERè‡ªèº«é…ç½® ç›¸å…³çš„ä¿¡æ¯ï¼Œä»¥é˜²æ­¢ é‡å¯ä¹‹åï¼ŒCHUNKSERVERçš„ æ•°æ®åˆ†å¸ƒ äº§ç”Ÿäº† æ”¹å˜ã€‚<br><br>","like_count":0},{"had_liked":false,"id":314493,"user_name":"Lebron","can_delete":false,"product_type":"c1","uid":1327057,"ip_address":"","ucode":"042295490BEBE1","user_header":"https://static001.geekbang.org/account/avatar/00/14/3f/d1/910a7dc9.jpg","comment_is_top":false,"comment_ctime":1633142922,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633142922","product_id":100091101,"comment_content":"è€å¸ˆï¼Œåœ¨æ‚¨ä»‹ç»å®¢æˆ·ç«¯è¯»å–å½±å­Masterä¹Ÿè®¸ä¼šè¯»å–åˆ°è¿‡æ—¶ä¿¡æ¯çš„é‚£å¼ å›¾ç‰‡é‡Œï¼Œå®¢æˆ·ç«¯ä¸GFS Masterçš„äº¤äº’ç®­å¤´æ˜¯å¦å†™åäº†ï¼Ÿæˆ‘çš„ç†è§£æ˜¯ï¼Œå®¢æˆ·ç«¯å‘GFS Masterå‘é€å†™å…¥æ•°æ®çš„è¯·æ±‚ï¼Œè€ŒGFS Masterè¿”å›ç»™å®¢æˆ·ç«¯å…¨éƒ¨FLUSTå®Œæˆï¼Œå†™å…¥æˆåŠŸçš„ä¿¡æ¯ã€‚","like_count":0},{"had_liked":false,"id":314485,"user_name":"æµ·æ»¨","can_delete":false,"product_type":"c1","uid":1009518,"ip_address":"","ucode":"F1B94D2DB944DC","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/6e/f5ee46e8.jpg","comment_is_top":false,"comment_ctime":1633131434,"is_pvip":true,"replies":[{"id":"113896","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633159397,"ip_address":"","comment_id":314485,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1633131434","product_id":100091101,"comment_content":"1. å®¢æˆ·ç«¯åº”è¯¥ä¼šç¼“å­˜è¯·æ±‚è¿‡çš„æ–‡ä»¶å¯¹åº”çš„chunk severçš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œè¿™éƒ¨åˆ†æ•°æ®å ç”¨å¤§å°å¾ˆå°éå¸¸é€‚åˆç¼“å­˜ï¼Œç¼“å­˜ä¹‹åå¯ä»¥å‡å°‘å¯¹master serverçš„å‹åŠ›ã€‚<br>ç¼“å­˜çš„æ•°æ®æ˜¯å¯èƒ½è¿‡æ—¶çš„ï¼Œæˆ‘è§‰å¾—ä¸»è¦åˆ†2ç§æƒ…å†µï¼Œä¸€ç§æ˜¯æ–‡ä»¶chunkå¯¹åº”çš„chunk severå˜äº†ï¼Œè¿™ä¸ªæ—¶å€™æ–‡ä»¶chunkä¸€æ—¦è¯·æ±‚ä¸åˆ°é‡æ–°å‘masteré‡æ–°è¯·æ±‚æ›´æ–°å°±å¯ä»¥äº†ï¼›è¿˜æœ‰ä¸€ç§æƒ…å†µæ•°æ®æ›´æ–°äº†ï¼Œæ¯”å¦‚æ–‡ä»¶å¯¹åº”çš„chunkæ•°å˜å¤šäº†ï¼Œè¿™ç§æƒ…å†µåº”è¯¥åœ¨chunk severæœ‰ç›¸å…³æœºåˆ¶æ¥æ ¡éªŒè¿™ç§æƒ…å†µå§ã€‚<br><br>2. è¿˜æ²¡æœ‰è¯»è¿‡è®ºæ–‡ï¼Œæˆ‘çŒœæµ‹åº”è¯¥æ˜¯chunk severä¸»åŠ¨ä¸ŠæŠ¥çš„æ–¹å¼æ¥ä½¿masteré‡æ–°æ‹¿åˆ°è¿™ä¸ªæ•°æ®çš„å§","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527697,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633159397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314469,"user_name":"èå†°","can_delete":false,"product_type":"c1","uid":2073875,"ip_address":"","ucode":"FC01D3E6720A0F","user_header":"https://static001.geekbang.org/account/avatar/00/1f/a5/13/5fbde43f.jpg","comment_is_top":false,"comment_ctime":1633097719,"is_pvip":true,"replies":[{"id":"113915","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633164220,"ip_address":"","comment_id":314469,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1633097719","product_id":100091101,"comment_content":"1. å®¢æˆ·ç«¯ä¼šç¼“å­˜æ–‡ä»¶å’Œ chunkserver çš„æ˜ å°„ï¼Œè¿™ä¸ªç¼“å­˜ä¼šåœ¨æ—¶æ•ˆç»“æŸæˆ–è€…æ–‡ä»¶è¢«é‡æ–°æ‰“å¼€çš„æ—¶å€™å¤±æ•ˆ<br>2. chunk å­˜æ”¾åœ¨ä»€ä¹ˆ chunkserver è¿™ä¸ªç”± chunkserver è‡ªå·±ç»´æŠ¤ï¼Œmaster é‡å¯çš„æ—¶å€™ä¼šè·Ÿæ‰€æœ‰ chunkserver è·å–å¯¹åº”å­˜å‚¨çš„ chunk","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527689,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633164220,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314306,"user_name":"ROY","can_delete":false,"product_type":"c1","uid":1296815,"ip_address":"","ucode":"FB99E4456D2E5F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoqEsRcQ5icwkgTDBX9JA8iaqohBdIGhxMXLFDSevEXqm5sAarw3hKeEHzxkoEJ5sx7plibcRPqmicAlQ/132","comment_is_top":false,"comment_ctime":1632967070,"is_pvip":false,"replies":[{"id":"113892","content":"ä¸èƒ½ç®—è½®è¯¢ï¼Œå‡†å¤‡æ¥è¯´æ˜¯å„ä¸ªchunkserverä¸»åŠ¨ä¸ŠæŠ¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633156393,"ip_address":"","comment_id":314306,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632967070","product_id":100091101,"comment_content":"å®¢æˆ·æœºä¿å­˜æ§åˆ¶æµè€Œä¸æ˜¯æ•°æ®æµï¼Œå½“chunkæœ‰æ›´æ–°ç­‰æ“ä½œæ—¶ï¼Œä¼šå®¢æˆ·ç«¯å’Œchunkserverä¹‹é—´å»ºç«‹çš„é“¾æ¥å¤±æ•ˆï¼Œå¿…é¡»é‡æ–°ä»masterè·å–<br>masterå¤±è´¥çš„æ—¶å€™æ˜¯ç”¨logå¿«é€Ÿæ¢å¤å½“æ—¶çš„çŠ¶æ€çš„ï¼Œè€Œchunkserverä¸Šå­˜æ”¾ä»€ä¹ˆå…ƒæ•°æ®åº”è¯¥æ˜¯é€šè¿‡è½®è¯¢å„ä¸ªchunkserverå¾—åˆ°çš„å§","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527638,"discussion_content":"ä¸èƒ½ç®—è½®è¯¢ï¼Œå‡†å¤‡æ¥è¯´æ˜¯å„ä¸ªchunkserverä¸»åŠ¨ä¸ŠæŠ¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633156393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313696,"user_name":"Geek_648c55","can_delete":false,"product_type":"c1","uid":2155951,"ip_address":"","ucode":"165A1D37E0B473","user_header":"","comment_is_top":false,"comment_ctime":1632623142,"is_pvip":false,"replies":[{"id":"113919","content":"æ˜¯å®šæœŸæŠŠå½“å‰masterå†…å­˜é‡Œçš„GFSçš„MetadataæŒä¹…åŒ–ä¸‹æ¥ï¼Œé¿å…èŠ‚ç‚¹æ•…éšœæ¢å¤çš„æ—¶å€™éœ€è¦æ›´å¤šçš„æ—¶é—´ã€‚æ¢å¤çš„æ—¶å€™è¯»è¿™ä¸ªmetadataçš„checkpointï¼Œç„¶åreplayéƒ¨åˆ†æ—¥å¿—å°±å¯ä»¥äº†ï¼Œè€Œä¸ç”¨replayæ‰€æœ‰çš„æ—¥å¿—ã€‚<br><br>å¾ˆå¤šå…¶ä»–æ•°æ®åº“ä¹Ÿæœ‰ç±»ä¼¼çš„æœºåˆ¶ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633164542,"ip_address":"","comment_id":313696,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1632623142","product_id":100091101,"comment_content":"gfså†™æ“ä½œæ›´æ–°å†…å­˜å’Œè®°å½•æ“ä½œæ—¥å¿—å°±ç®—å®Œæˆäº†æ˜¯å§ã€‚ç”¨é¡ºåºå†™çš„æ“ä½œæ—¥å¿—ï¼Œä»£æ›¿ç£ç›˜çš„éšæœºè¯»å†™ï¼Œæå‡æ€§èƒ½ã€‚ä½†æ˜¯ï¼Œæ–‡ä¸­æåˆ°çš„checkpointæ˜¯æŒ‡ä»€ä¹ˆï¼Œæ˜¯æŒ‡å·²å®Œæˆåˆ·ç›˜çš„æŒ‡ä»¤ä½ç½®ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527444,"discussion_content":"æ˜¯å®šæœŸæŠŠå½“å‰masterå†…å­˜é‡Œçš„GFSçš„MetadataæŒä¹…åŒ–ä¸‹æ¥ï¼Œé¿å…èŠ‚ç‚¹æ•…éšœæ¢å¤çš„æ—¶å€™éœ€è¦æ›´å¤šçš„æ—¶é—´ã€‚æ¢å¤çš„æ—¶å€™è¯»è¿™ä¸ªmetadataçš„checkpointï¼Œç„¶åreplayéƒ¨åˆ†æ—¥å¿—å°±å¯ä»¥äº†ï¼Œè€Œä¸ç”¨replayæ‰€æœ‰çš„æ—¥å¿—ã€‚\n\nå¾ˆå¤šå…¶ä»–æ•°æ®åº“ä¹Ÿæœ‰ç±»ä¼¼çš„æœºåˆ¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633164542,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1009518,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/67/6e/f5ee46e8.jpg","nickname":"æµ·æ»¨","note":"","ucode":"F1B94D2DB944DC","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":399988,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼ŒGFSå†™æ“ä½œçš„æ—¶å€™åªä¼šä¿è¯å†…å­˜å’Œæ“ä½œæ—¥å¿—åˆ·ç›˜å®Œæˆã€‚ä½†æ˜¯å†…å­˜ä¸­æ–‡ä»¶ä¸æ–‡ä»¶chunk handleçš„å¯¹åº”å…³ç³»è‚¯å®šéœ€è¦è½ç›˜æ›´æ–°çš„ï¼Œä¸ç„¶masteræœåŠ¡æŒ‚æ‰ä¹‹ååªèƒ½ä»å…¨é‡çš„æ“ä½œæ—¥å¿—é‡Œé¢replayäº†ï¼Œè¿™ä¸ªå·¥ä½œé‡å°±éå¸¸å¤§äº†ã€‚æ‰€ä»¥è¿™é‡Œçš„checkpointå°±æ˜¯æŒ‡å½“å‰ç£ç›˜ä¸­æ–‡ä»¶ä¸æ–‡ä»¶chunk handleæœ€æ–°æ˜ å°„å…³ç³»æ‰€å¯¹åº”çš„æ“ä½œæ—¥å¿—ä½ç½®ã€‚\nä½ å¯ä»¥ç†è§£ä¸ºæ–‡ä»¶ä¸æ–‡ä»¶chunkæ˜ å°„å…³ç³»æœ‰ä¸¤ä»½æ•°æ®ï¼Œä¸€ä»½åœ¨å†…å­˜ä¸­ç”±å†™æ“ä½œæµç¨‹æ¥ä¿è¯ï¼Œæ˜¯æœ€æ–°çš„æ•°æ®ï¼Œå¦ä¸€ä»½åœ¨ç£ç›˜ä¸­é€šè¿‡å¼‚æ­¥çš„æ–¹å¼replayæ“ä½œæ—¥å¿—æ¥æ›´æ–°ï¼Œä¼šæœ‰ä¸€ç‚¹å»¶è¿Ÿã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1633133157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313691,"user_name":"Geek_648c55","can_delete":false,"product_type":"c1","uid":2155951,"ip_address":"","ucode":"165A1D37E0B473","user_header":"","comment_is_top":false,"comment_ctime":1632621790,"is_pvip":false,"replies":[{"id":"113902","content":"è¿™ä¸ªè¯·çœ‹ç¬¬äºŒè®²ï¼Œä¸“é—¨ä¸€è®²éƒ½åœ¨è®²è¿™ä¸ªé—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633160876,"ip_address":"","comment_id":313691,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632621790","product_id":100091101,"comment_content":"æ‰€ä»¥ GFS åœ¨å†™æ•°æ®çš„æ—¶å€™ï¼Œé€‰æ‹©äº†æµæ°´çº¿å¼çš„æ•°æ®ä¼ è¾“ï¼Œè€Œæ²¡æœ‰é€‰æ‹©æ ‘å½¢çš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚<br>ä»€ä¹ˆæ˜¯æµæ°´çº¿å¼æ•°æ®ä¼ è¾“ï¼Œä»€ä¹ˆåˆæ˜¯æ ‘å½¢æ•°æ®ä¼ è¾“ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527441,"discussion_content":"è¿™ä¸ªè¯·çœ‹ç¬¬äºŒè®²ï¼Œä¸“é—¨ä¸€è®²éƒ½åœ¨è®²è¿™ä¸ªé—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633160876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313520,"user_name":"æ¯›æ¯›é…±","can_delete":false,"product_type":"c1","uid":2031114,"ip_address":"","ucode":"056E939BD62D44","user_header":"","comment_is_top":false,"comment_ctime":1632472877,"is_pvip":false,"replies":[{"id":"113900","content":"å†™è¯·æ±‚ä¼šç›´æ¥æœ‰WALå…ˆåˆ°ç¡¬ç›˜ï¼Œä½†æ˜¯åŒæ­¥è¦æ›´æ–°å†…å­˜é‡Œçš„BTREE<br><br>Checkpointsæ˜¯å› ä¸ºå½“Masterè¦æ¢å¤çš„æ—¶å€™ä¸å¯èƒ½é‡æ”¾æ‰€æœ‰çš„å†å²æ—¥å¿—ï¼Œæ‰€ä»¥éœ€è¦å®šæ—¶æœ‰checkpointsæ¥å‡å°‘è¿›ç¨‹æŒ‚æ‰åçš„æ¢å¤æ—¶é—´<br><br>æ˜¯å¦æ˜¯2PCæäº¤è®ºæ–‡é‡Œæ²¡æœ‰è¯´ã€‚ä½†æ˜¯GFSå’ŒHadoop 1.0ä¸åŒï¼Œæ˜¯æœ‰åŒæ­¥å¤åˆ¶çš„Back Masterï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥åš2PCä¿éšœä¸¤è¾¹æ•°æ®å®Œå…¨ä¸€è‡´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å¾æ–‡æµ©","uid":"1053568","ctime":1633160813,"ip_address":"","comment_id":313520,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1632472877","product_id":100091101,"comment_content":"é—®ä¸€ä¸ªåˆçº§é—®é¢˜å“ˆï½ è€å¸ˆè¯´ï¼šâ€œmaster çš„æ•°æ®éƒ½ä¼šé€šè¿‡æ“ä½œæ—¥å¿—å’Œ Checkpoints æŒä¹…åŒ–åœ¨ç¡¬ç›˜ä¸Šâ€ï¼Œå…·ä½“æ˜¯æŠŠä»€ä¹ˆæ•°æ®æŒä¹…åŒ–åœ¨ç¡¬ç›˜ä¸Šï¼Ÿ æ¯”å¦‚ï¼Œæ˜¯â€œå…¨è·¯å¾„æ–‡ä»¶ååˆ°å¤šä¸ª chunk handle çš„æ˜ å°„å…³ç³»â€œå—ï¼Ÿè¿™ä¸ªä¸æ˜¯åœ¨å†™è¯·æ±‚æ—¶ç›´æ¥æŒä¹…åŒ–åœ¨ç¡¬ç›˜ä¸Šå—ï¼Ÿä¸æ˜¯ç›´æ¥è½ç›˜çš„è¯ï¼Œæ˜¯é‡‡ç”¨çš„äºŒæ®µå¼æäº¤ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1053568,"avatar":"https://static001.geekbang.org/account/avatar/00/10/13/80/8de66543.jpg","nickname":"å¾æ–‡æµ©","note":"","ucode":"1D39AC564172E9","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527374,"discussion_content":"å†™è¯·æ±‚ä¼šç›´æ¥æœ‰WALå…ˆåˆ°ç¡¬ç›˜ï¼Œä½†æ˜¯åŒæ­¥è¦æ›´æ–°å†…å­˜é‡Œçš„BTREE\n\nCheckpointsæ˜¯å› ä¸ºå½“Masterè¦æ¢å¤çš„æ—¶å€™ä¸å¯èƒ½é‡æ”¾æ‰€æœ‰çš„å†å²æ—¥å¿—ï¼Œæ‰€ä»¥éœ€è¦å®šæ—¶æœ‰checkpointsæ¥å‡å°‘è¿›ç¨‹æŒ‚æ‰åçš„æ¢å¤æ—¶é—´\n\næ˜¯å¦æ˜¯2PCæäº¤è®ºæ–‡é‡Œæ²¡æœ‰è¯´ã€‚ä½†æ˜¯GFSå’ŒHadoop 1.0ä¸åŒï¼Œæ˜¯æœ‰åŒæ­¥å¤åˆ¶çš„Back Masterï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥åš2PCä¿éšœä¸¤è¾¹æ•°æ®å®Œå…¨ä¸€è‡´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633160813,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}