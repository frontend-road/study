{"id":619938,"title":"73｜异常捕获：出现异常时，如何利用程序进行处理？","content":"<p><strong>课后习题</strong><br>\n在文件操作过程中，使用 open() 函数打开文件时，有可能会出现该文件在磁盘中不存在的异常，请编写 try-except 语句，对文件打开的异常进行异常捕获。</p><p>注：当出现异常时，需关闭文件，无异常时正常读取文件。</p><p><strong>课程代码、课件及其他相关资料地址</strong><br>\n<a href=\"https://gitee.com/wilsonyin/zero-basics-python\">https://gitee.com/wilsonyin/zero-basics-python</a></p>","comments":[{"had_liked":false,"id":365672,"user_name":"Matthew","can_delete":false,"product_type":"c3","uid":2843865,"ip_address":"广东","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1672891447,"is_pvip":false,"replies":[{"id":133351,"content":"要看open()函数的打开方式，如果是读取方式，也就是参数为r ，不会自动生成文件； 另一种情况是采用的参数为w， 也就是写入方式打开文件， open()函数会自动生成目标文件，但是前提是open()函数指定的文件路径要存在，否则也会报告FileNotFoundError异常","user_name":"作者回复","user_name_real":"编辑","uid":1056235,"ctime":1673339122,"ip_address":"广东","comment_id":365672,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"有个问题，当文件不存在时，打开文件就报 FileNotFoundError，这是 文件描述符 是不会生成的吧？","like_count":0,"discussions":[{"author":{"id":1056235,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1d/eb/b2123759.jpg","nickname":"尹会生","note":"","ucode":"D1093DBD093617","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599114,"discussion_content":"要看open()函数的打开方式，如果是读取方式，也就是参数为r ，不会自动生成文件； 另一种情况是采用的参数为w， 也就是写入方式打开文件， open()函数会自动生成目标文件，但是前提是open()函数指定的文件路径要存在，否则也会报告FileNotFoundError异常","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673339122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":384623,"user_name":"依托答辩","can_delete":false,"product_type":"c3","uid":2383299,"ip_address":"上海","ucode":"4BE79E8A030813","user_header":"https://static001.geekbang.org/account/avatar/00/24/5d/c3/b8bb888c.jpg","comment_is_top":false,"comment_ctime":1701247078,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"请教一个问题。在else和finally代码块中，报f is not defined，那我要怎么才能拿到f这个对象\n\ntry:\n  f = open(&#39;test.txt&#39;, &#39;r&#39;)\nexcept FileNotFoundError:\n  print(&#39;文件不存在&#39;)\nelse:\n  # 文件存在则读取\n  f.read()\nfinally:\n  # 不管有无文件最后都要关闭\n  f.close()","like_count":1,"discussions":[{"author":{"id":3838010,"avatar":"","nickname":"8000tank","note":"","ucode":"C5DC98A0EB57CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":649276,"discussion_content":"是会报错的，因为try中的f 是一个局部变量……","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1723083181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365671,"user_name":"Matthew","can_delete":false,"product_type":"c3","uid":2843865,"ip_address":"江苏","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1672891396,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"try:\n    f = open(&quot;data.txt&quot;)\nexcept FileNotFoundError as e:\n    print(&quot;要打开的文件不存在！&quot;)\n    print(e)\nelse:\n    print(f.read())\n    f.close()","like_count":1},{"had_liked":false,"id":396283,"user_name":"尹长拟","can_delete":false,"product_type":"c3","uid":3074007,"ip_address":"北京","ucode":"1EBD42B5BBD934","user_header":"","comment_is_top":false,"comment_ctime":1733849608,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"try:\n    f = open(&quot;text.txt&quot;,&#39;r&#39;)\n    content = f.read()\n    print(content)\n\nexcept Exception as e:\n    print(f&quot;出现的异常类型为{type(e)},异常信息：{e}&quot;)\n\n    if &#39;f&#39; in locals() and not f.closed:\n        f.close()\n        print(&#39;文件已关闭&#39;)","like_count":0},{"had_liked":false,"id":390158,"user_name":"键盘上的魔术","can_delete":false,"product_type":"c3","uid":2697700,"ip_address":"上海","ucode":"A731D721FB8D3A","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","comment_is_top":false,"comment_ctime":1714484735,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"f = None\ntry:\n    f = open(&#39;.&#47;file.txt&#39;)\nexcept FileNotFoundError as e:\n    # f.close() 如果文件都找不到，f是拿不到东西的\n    print(f&quot;FileNotFoundError, e : {e}&quot;)\nexcept Exception as e:\n    print(f&quot;Other Exception, e : {e}&quot;)\nelse:   # 没有异常\n    print(f.read())\nfinally:\n    if f :\n        f.close()","like_count":0},{"had_liked":false,"id":385084,"user_name":"Geek_631607","can_delete":false,"product_type":"c3","uid":3789991,"ip_address":"广东","ucode":"EAF874838F0BE4","user_header":"","comment_is_top":false,"comment_ctime":1702024220,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"try:\n    f = open(&#39;.&#47;a.txt&#39;)\nexcept Exception as e:\n    print(e)\nelse:\n    content = f.read()\n    print(content)\n    f.close()","like_count":0},{"had_liked":false,"id":382650,"user_name":"MarkG","can_delete":false,"product_type":"c3","uid":3675806,"ip_address":"山东","ucode":"454082595FE769","user_header":"https://static001.geekbang.org/account/avatar/00/38/16/9e/48621655.jpg","comment_is_top":false,"comment_ctime":1697726848,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"# 在文件操作过程中，使用 open() 函数打开文件时，有可能会出现该文件在磁盘中不存在的异常，\n# 请编写 try-except 语句，对文件打开的异常进行异常捕获。\ntry:\n    with open(&quot;a.txt&quot;) as f:\n        print(f.read())\nexcept Exception as e:\n    print(&quot;打开 a.txt 失败&quot;)","like_count":0},{"had_liked":false,"id":380466,"user_name":"Geek_219b52","can_delete":false,"product_type":"c3","uid":1524531,"ip_address":"浙江","ucode":"955D79DEFD2DF4","user_header":"https://static001.geekbang.org/account/avatar/00/17/43/33/b9127867.jpg","comment_is_top":false,"comment_ctime":1693639212,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"&#39;&#39;&#39;\n在文件操作过程中，使用 open() 函数打开文件时，有可能会出现该文件在磁盘中不存在的异常，请编写 try-except 语句，对文件打开的异常进行异常捕获。\n注：当出现异常时，需关闭文件，无异常时正常读取文件。\n&#39;&#39;&#39;\n#coding=utf-8\nimport os\n\ntry:\n    with open(&quot;D:\\零基础学python\\演示代码\\set.py&quot;,&quot;r&quot;,encoding=&quot;utf-8&quot;)as f:\n        print(f.read())    \n\nexcept Exception as e:\n    print(&quot;打开文件有异常&quot;)\n    print(e)\n\nelse:\n    print(&quot;打开文件正常&quot;)\n    print(f.read())","like_count":0},{"had_liked":false,"id":379299,"user_name":"Geek_Mike","can_delete":false,"product_type":"c3","uid":3196376,"ip_address":"云南","ucode":"CFA942192C3B74","user_header":"https://static001.geekbang.org/account/avatar/00/30/c5/d8/c5509b9c.jpg","comment_is_top":false,"comment_ctime":1691677207,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"str1 = &#39;Hello Python!&#39;\ntry:\n    with open(&#39;.&#47;123.txt&#39;, &#39;r&#39;) as f:\n        data = f.read()\n        print(data)\nexcept FileNotFoundError:\n    print(&#39;file is not found.&#39;)\nelse:\n    with open(&#39;.&#47;123.txt&#39;, &#39;a&#39;) as f:\n        f.write(str1)\n        print(f&quot;successfully wrote &#39;{str1}&#39; to the file.&quot;)\nfinally:\n    pass","like_count":0},{"had_liked":false,"id":369280,"user_name":"yanyu-xin","can_delete":false,"product_type":"c3","uid":1899757,"ip_address":"广东","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1677320137,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"try:\n    with open(&#39;.&#47;a.txt&#39;, &#39;r&#39;) as f:\n        print(&#39;文件a.txt :&#39;, f.read())  \nexcept Exception as e:\n    print(&#39;文件出错err :&#39;, e) # err : [Errno 2] No such file or directory: &#39;.&#47;a1.txt&#39;\nelse: \n    print(&#39;文件OK&#39;)","like_count":0},{"had_liked":false,"id":369261,"user_name":"yanyu-xin","can_delete":false,"product_type":"c3","uid":1899757,"ip_address":"广东","ucode":"3AA389F9E4C236","user_header":"","comment_is_top":false,"comment_ctime":1677299815,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"try:\n    with open(&#39;.&#47;a.txt&#39;, &#39;r&#39;) as f:\n        print(&#39;文件a.txt :&#39;, f.read())  \nexcept Exception as e:\n    print(&#39;文件出错err :&#39;, e) # err : [Errno 2] No such file or directory: &#39;.&#47;a1.txt&#39;\nelse: \n    print(&#39;文件OK&#39;)","like_count":0},{"had_liked":false,"id":367729,"user_name":"朱雯","can_delete":false,"product_type":"c3","uid":1035744,"ip_address":"北京","ucode":"064C45FBF6B51F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/e0/c85bb948.jpg","comment_is_top":false,"comment_ctime":1675517694,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"try:\n     with open(&quot;ttttttt.txt&quot;,&quot;r&quot;) as f:\n         print(f.read()) #FileNotFoundError\nexcept Exception as e :\n    print(e)","like_count":0},{"had_liked":false,"id":367413,"user_name":"聪少 Jeff","can_delete":false,"product_type":"c3","uid":1159983,"ip_address":"广东","ucode":"C791ACA9B47679","user_header":"https://static001.geekbang.org/account/avatar/00/11/b3/2f/d08a1363.jpg","comment_is_top":false,"comment_ctime":1675221145,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"上交作业\ntry:\n    with open(&#39;.&#47;abc.txt&#39;, &#39;r&#39;) as f:\n        print(f.read())\nexcept Exception as e:\n        print(e)\n\n输出结果：[Errno 2] No such file or directory: &#39;.&#47;abc.txt&#39;","like_count":0},{"had_liked":false,"id":366718,"user_name":"Cy23","can_delete":false,"product_type":"c3","uid":1591293,"ip_address":"辽宁","ucode":"8DC561C5151758","user_header":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","comment_is_top":false,"comment_ctime":1674108383,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"try:\n  with open(&#39;.&#47;1.txt&#39;,&#39;r&#39;) as f:\n    print(f.read())\nexcept FileNotFoundError:\n  print(&#39;文件不存在&#39;)","like_count":0},{"had_liked":false,"id":366483,"user_name":"PatrickL","can_delete":false,"product_type":"c3","uid":1341431,"ip_address":"上海","ucode":"EF0EC18639B9B2","user_header":"https://static001.geekbang.org/account/avatar/00/14/77/f7/11548247.jpg","comment_is_top":false,"comment_ctime":1673849811,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"try:\n    with open(&#39;test.txt&#39;,&#39;r&#39;):\n        print(f.read())\nexcept FileNotFoundError:\n    print(&#39;该文件在磁盘中不存在。&#39;)","like_count":0},{"had_liked":false,"id":365687,"user_name":"Matthew","can_delete":false,"product_type":"c3","uid":2843865,"ip_address":"江苏","ucode":"96093089773740","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKSVuNarJuDhBSvHY0giaq6yriceEBKiaKuc04wCYWOuso50noqDexaPJJibJN7PHwvcQppnzsDia1icZkw/132","comment_is_top":false,"comment_ctime":1672904433,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100310001,"comment_content":"try:\n    with open( &quot;data.txt&quot; ) as f:\n        print(f.read())\nexcept FileNotFoundError:\n    print(&#39;该文件在磁盘中不存在。&#39;)","like_count":0}]}