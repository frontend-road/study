{"id":7036,"title":"59 | æ€§èƒ½è®¾è®¡ç¯‡ä¹‹â€œå¼‚æ­¥å¤„ç†â€","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆçš“ï¼Œç½‘åå·¦è€³æœµè€—å­ã€‚</p>\n<p>åœ¨å¼¹åŠ›è®¾è®¡ç¯‡ä¸­æˆ‘ä»¬è®²è¿‡ï¼Œå¼‚æ­¥é€šè®¯çš„è®¾è®¡æ¨¡å¼æœ‰åŠ©äºæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®¹é”™èƒ½åŠ›ã€‚å…¶å®ï¼Œå¼‚æ­¥é€šè®¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿˜å¯ä»¥å¢åŠ æ•´ä¸ªç³»ç»Ÿçš„ååé‡ï¼Œä»è€Œå¯ä»¥é¢å¯¹æ›´é«˜çš„å¹¶å‘ï¼Œå¹¶å¯ä»¥ä»å®¹åœ°åˆ©ç”¨å¥½ç°æœ‰çš„ç³»ç»Ÿèµ„æºã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬è¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨ä½ çš„å·¥ä½œä¸­ï¼Œæœ‰å¾ˆå¤šäººä¼šæ¥æ‰¾ä½ ï¼Œè®©ä½ å¸®ç€åšäº‹ã€‚å¦‚æœä½ æ˜¯è¿™ç§è¯·æ±‚å“åº”å¼çš„å·¥ä½œæ–¹å¼ï¼Œé‚£ä¹ˆæœ¬è´¨ä¸Šæ¥è¯´ï¼Œä½ æ˜¯åœ¨è¢«åŠ¨å·¥ä½œï¼Œä¹Ÿå°±æ˜¯è¢«åˆ«äººé©±åŠ¨çš„å·¥ä½œæ–¹å¼ã€‚</p>\n<p>å½“ä½ åœ¨åšä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œå¦‚æœæœ‰åˆ«äººæ¥æ‰¾ä½ åšå…¶å®ƒäº‹ï¼Œä½ å°±ä¼šè¢«æ‰“æ–­è€Œè¦å»å¹²åˆ«çš„äº‹ã€‚è€Œå¦‚æœä½ å¯ä»¥ç»Ÿç­¹å®‰æ’è¿™äº›äº‹æƒ…ï¼Œæœ¬æ¥äº”ä»¶äº‹åªéœ€è¦2ä¸ªå°æ—¶ï¼Œå¦‚æœä¸èƒ½ï¼Œæˆ–è€…è€è¢«åˆ«äººæ‰“ä¹±æ€è·¯ï¼Œé‚£ä½ å¯èƒ½å°±è¦èŠ±5ä¸ªå°æ—¶ã€‚å¼‚æ­¥å¤„ç†ä»»åŠ¡å¯ä»¥è®©ä½ æ›´å¥½åœ°åˆ©ç”¨å¥½æ—¶é—´å’Œèµ„æºã€‚åˆ©ç”¨å¥½äº†æ—¶é—´å’Œèµ„æºï¼Œæ€§èƒ½è‡ªç„¶å°±ä¼šæå‡ä¸Šæ¥ã€‚</p>\n<p>è¿™å°±å¥½åƒé‚®é€’ä¸šåŠ¡ä¸€æ ·ï¼Œä½ å¯„ä¸œè¥¿çš„æ—¶å€™ï¼Œé‚®é€’å…¬å¸ä¼šæŠŠå¤§é‡çš„å»å¾€åŒä¸€ä¸ªæ–¹å‘çš„è®¢å•åˆå¹¶å¤„ç†ï¼Œå¹¶ç»Ÿä¸€åœ°è°ƒé…ç‰©æµäº¤é€šå·¥å…·ï¼Œä»è€Œåœ¨æ•´ä½“ä¸Šæ›´ä¸ºèŠ‚çœèµ„æºå’Œæ—¶é—´ã€‚</p>\n<p>åœ¨åˆ†å¸ƒå¼æ¶æ„ä¸­ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿè¢«æ‹†æˆäº†å¾ˆå¤šçš„å­ç³»ç»Ÿã€‚å¦‚æœæƒ³æŠŠè¿™å †ç³»ç»Ÿåˆç†åœ°ç”¨å¥½ï¼Œå¹¶æ›´å¿«åœ°å¤„ç†å¤§é‡çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å°±éœ€è¦ç»Ÿä¸€åœ°è§„åˆ’å’Œç»Ÿç­¹æ•´ä½“ï¼Œè¿™æ ·å¯ä»¥è¾¾åˆ°æ•´ä½“çš„æœ€ä¼˜ã€‚æœ¬è´¨ä¸Šï¼Œè¿™å’Œé‚®é€’å…¬å¸å¤„ç†é‚®ä»¶ä¸€æ ·ï¼Œæ˜¯ç›¸åŒçš„é“ç†ã€‚</p>\n<p>åœ¨è®¡ç®—æœºçš„ä¸–ç•Œé‡Œï¼Œåˆ°å¤„éƒ½æ˜¯å¼‚æ­¥å¤„ç†ã€‚æ¯”å¦‚ï¼šå½“ç¨‹åºè¯»å†™æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿå¹¶ä¸ä¼šçœŸæ­£åŒæ­¥åœ°å»æ“ä½œç¡¬ç›˜ï¼Œè€Œæ˜¯æŠŠç¡¬ç›˜è¯»å†™è¯·æ±‚å…ˆåœ¨å†…å­˜ä¸­holdä¸Šä¸€å°ä¼šå„¿ï¼ˆå‡ åæ¯«ç§’ï¼‰ï¼Œç„¶åï¼Œå¯¹è¿™äº›è¯»å†™è¯·æ±‚åšmergeå’Œsortã€‚</p>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œmergeæ˜¯æŠŠç›¸åŒçš„æ“ä½œåˆå¹¶ï¼Œç›¸åŒçš„è¯»æ“ä½œåªè¯»ä¸€æ¬¡ï¼Œç›¸åŒçš„å†™æ“ä½œï¼Œåªå†™æœ€åä¸€æ¬¡ï¼Œè€Œsortæ˜¯æŠŠä¸åŒçš„æ“ä½œæ’ä¸ªåºï¼Œè¿™æ ·å¯ä»¥è®©ç¡¬ç›˜å‘ä¸€ä¸ªæ–¹å‘è½¬ä¸€æ¬¡å°±å¯ä»¥æŠŠæ‰€æœ‰çš„æ•°æ®è¯»å‡ºæ¥ï¼Œè€Œä¸æ˜¯æ¥æ¥å›å›åœ°è½¬ã€‚è¿™æ ·å¯ä»¥æå¤§åœ°æé«˜ç¡¬ç›˜çš„ååç‡ã€‚</p>\n<p>å†å¦‚ï¼Œæˆ‘ä»¬çš„TCPåè®®å‘ç½‘ç»œå‘åŒ…çš„æ—¶å€™ï¼Œä¼šæŠŠæˆ‘ä»¬è¦å‘çš„æ•°æ®å…ˆåœ¨ç¼“å†²åŒºä¸­è¿›è¡Œå›¤ç§¯ï¼Œå½“å›¤ç§¯åˆ°ä¸€å®šå°ºå¯¸æ—¶ï¼ˆMTUï¼‰ï¼Œæ‰å‘ç½‘ç»œå‘é€ï¼Œè¿™æ ·å¯ä»¥æœ€å¤§åŒ–åˆ©ç”¨æˆ‘ä»¬çš„ç½‘ç»œå¸¦å®½ã€‚è€Œä¼ è¾“é€Ÿåº¦å’Œæ€§èƒ½ä¹Ÿä¼šå˜å¾—å¾ˆå¿«ã€‚</p>\n<p><strong>è¿™å°±æ˜¯å¼‚æ­¥ç³»ç»Ÿæ‰€å¸¦æ¥çš„å¥½å¤„â€”â€”è®©æˆ‘ä»¬çš„ç³»ç»Ÿå¯ä»¥ç»Ÿä¸€è°ƒåº¦ã€‚</strong></p>\n<p>å¦å¤–ï¼Œæˆ‘ä¸¾ä¸Šé¢è¿™ä¸¤ä¸ªä¾‹å­æ˜¯æƒ³å‘Šè¯‰ä½ ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè§‰å¾—å¼‚æ­¥é€šè®¯æ…¢ï¼Œå…¶å®å¹¶ä¸ç„¶ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿå¯ä»¥æŠŠå¼‚æ­¥åšå¾—æ¯”è¾ƒå®æ—¶ã€‚</p>\n<p>å¤šè¯´ä¸€å¥ï¼Œå°±ç®—æ˜¯æœ‰å»¶æ—¶ï¼Œå¼‚æ­¥å¤„ç†åœ¨ç”¨æˆ·ä½“éªŒä¸Šä¹Ÿå¯ä»¥ç»™ç”¨æˆ·å¸¦æ¥ä¸€ä¸ªä¸é”™çš„ç”¨æˆ·ä½“éªŒï¼Œé‚£å°±æ˜¯ç”¨æˆ·å¯ä»¥æœ‰æœºä¼šåæ‚”ä¹‹å‰çš„æ“ä½œã€‚</p>\n<h1>å¼‚æ­¥å¤„ç†çš„è®¾è®¡</h1>\n<p>ä¹‹å‰ï¼Œæˆ‘ä»¬åœ¨å¼¹åŠ›è®¾è®¡ä¸­è®²çš„æ˜¯å¼‚æ­¥é€šè®¯ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬æƒ³è®²çš„æ˜¯å¼‚æ­¥ä»»åŠ¡å¤„ç†ã€‚å½“ç„¶ï¼Œè¿™é‡Œé¢æ²¡æœ‰ä»€ä¹ˆå†²çªçš„ï¼Œåªä¸è¿‡æ˜¯ï¼Œå¼‚æ­¥é€šè®¯è®²çš„æ˜¯æ€ä¹ˆæŠŠç³»ç»Ÿè¿æ¥èµ·æ¥ï¼Œè€Œæˆ‘ä»¬è¿™é‡Œæƒ³è®²çš„æ˜¯æ€ä¹ˆå¤„ç†ä»»åŠ¡ã€‚</p>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‰å°ç³»ç»Ÿï¼ŒæŠŠç”¨æˆ·å‘æ¥çš„è¯·æ±‚ä¸€ä¸€è®°å½•ä¸‹æ¥ï¼Œæœ‰ç‚¹åƒè¯·æ±‚æ—¥å¿—ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬çš„æ“ä½œåœ¨æ•°æ®åº“æˆ–æ˜¯å­˜å‚¨ä¸Šåªä¼šæœ‰è¿½åŠ çš„æ“ä½œï¼Œæ€§èƒ½ä¼šå¾ˆé«˜ã€‚æˆ‘ä»¬æ”¶åˆ°è¯·æ±‚åï¼Œç»™å®¢æˆ·ç«¯è¿”å›â€œæ”¶åˆ°è¯·æ±‚ï¼Œæ­£åœ¨å¤„ç†ä¸­â€ã€‚</p>\n<!-- [[[read_end]]] -->\n<p>ç„¶åï¼Œæˆ‘ä»¬æœ‰ä¸ªä»»åŠ¡å¤„ç†ç³»ç»Ÿæ¥çœŸæ­£åœ°å¤„ç†æ”¶åˆ°çš„è¿™äº›è¯·æ±‚ã€‚ä¸ºäº†è§£è€¦ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä»»åŠ¡æ´¾å‘å™¨ï¼Œè¿™é‡Œå°±ä¼šå‡ºæ¥ä¸¤ä¸ªäº‹ï¼Œä¸€ä¸ªæ˜¯æ¨æ¨¡å‹Pushï¼Œä¸€ä¸ªæ˜¯æ‹‰æ¨¡å‹Pullã€‚</p>\n<p>æ‰€è°“Pushæ¨æ¨¡å‹ï¼Œå°±æ˜¯æŠŠä»»åŠ¡æ´¾å‘ç»™ç›¸åº”çš„äººå»å¤„ç†ï¼Œæœ‰ç‚¹åƒæ˜¯ä¸€ä¸ªå·¥å¤´çš„è°ƒåº¦è€…çš„è§’è‰²ã€‚è€ŒPullæ‹‰æ¨¡å‹ï¼Œåˆ™æ˜¯ç”±å¤„ç†çš„äººæ¥æ‹‰å–ä»»åŠ¡å¤„ç†ã€‚è¿™ä¸¤ç§æ¨¡å‹å„æœ‰å„çš„å¥½åã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒPushæ¨¡å‹å¯ä»¥åšè°ƒåº¦ï¼Œä½†æ˜¯å®ƒéœ€è¦çŸ¥é“ä¸‹æ¸¸å·¥ä½œç»“ç‚¹çš„æƒ…å†µã€‚</p>\n<p>é™¤äº†è¦çŸ¥é“å“ªäº›æ˜¯æ´»ç€çš„ï¼Œè¿˜è¦çŸ¥é“å®ƒä»¬çš„å¿™é—²ç¨‹åº¦ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“ä¸‹æ¸¸å·¥ä½œç»“ç‚¹æ‰©å®¹ç¼©å®¹æˆ–æ˜¯æœ‰æ•…éšœéœ€è¦ç»´æŠ¤ç­‰ä¸€äº›æƒ…å†µå‘ç”Ÿæ—¶ï¼ŒPushç»“ç‚¹éƒ½éœ€è¦çŸ¥é“ï¼Œè¿™ä¼šå¢åŠ ä¸€å®šçš„ç³»ç»Ÿå¤æ‚åº¦ã€‚è€ŒPullçš„å¥½å¤„åˆ™æ˜¯å¯ä»¥è®©ä¸Šæ¸¸ç»“ç‚¹ä¸ç”¨å…³å¿ƒä¸‹æ¸¸ç»“ç‚¹çš„çŠ¶æ€ï¼Œåªè¦è‡ªå·±å¿™å¾—è¿‡æ¥ï¼Œå°±ä¼šæ¥æ‹¿ä»»åŠ¡å¤„ç†ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸€å®šçš„å¤æ‚åº¦ï¼Œä½†æ˜¯å°‘äº†æ•´ä½“ä»»åŠ¡è°ƒåº¦ã€‚</p>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬æ„å»ºçš„éƒ½æ˜¯æ¨æ‹‰ç»“åˆçš„ç³»ç»Ÿï¼ŒPushç«¯ä¼šåšä¸€å®šçš„ä»»åŠ¡è°ƒåº¦ï¼Œæ¯”å¦‚å®ƒå¯ä»¥åƒç‰©æµé‚£æ ·æŠŠç›¸åŒå•†å“çš„è®¢å•éƒ½åˆå¹¶èµ·æ¥ï¼Œæ‰“æˆä¸€ä¸ªåŒ…ï¼Œäº¤ç»™ä¸‹æ¸¸ç³»ç»Ÿè®©å…¶ä¸€æ¬¡å¤„ç†æ‰ï¼›ä¹Ÿå¯ä»¥æŠŠåŒä¸€ä¸ªç”¨æˆ·çš„è®¢å•ä¸­çš„ä¸åŒå•†å“ç»™æ‹†æˆå¤šä¸ªè®¢å•ã€‚ç„¶åPullç«¯æ¥è®¢é˜…Pushç«¯å‘å‡ºæ¥çš„å¼‚æ­¥æ¶ˆæ¯ï¼Œå¤„ç†ç›¸åº”çš„ä»»åŠ¡ã€‚</p>\n<h1>äº‹ä»¶æº¯æº</h1>\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦æä¸€ä¸‹Event Sourcingï¼ˆäº‹ä»¶æº¯æºï¼‰è¿™ä¸ªè®¾è®¡æ¨¡å¼ã€‚</p>\n<p>æ‰€è°“Event Sourcingï¼Œå…¶ä¸»è¦æƒ³è§£å†³çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•°æ®åº“ä¸­çš„ä¸€ä¸ªæ•°æ®çš„å€¼ï¼ˆçŠ¶æ€ï¼‰ï¼Œä½†æˆ‘ä»¬å®Œå…¨ä¸çŸ¥é“è¿™ä¸ªå€¼æ˜¯æ€ä¹ˆå¾—å‡ºæ¥çš„ã€‚å°±åƒé“¶è¡Œçš„å­˜æŠ˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é“¶è¡Œçš„å­˜æŠ˜çœ‹åˆ°æˆ‘ä»¬æ”¶æ”¯çš„æ‰€æœ‰è®°å½•ï¼Œä¹Ÿèƒ½çœ‹å¾—åˆ°æ¯ä¸€ç¬”è®°å½•åçš„ä½™é¢ã€‚</p>\n<p>å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æœ‰äº†æ‰€æœ‰çš„æ”¶æ”¯æµæ°´è´¦çš„è®°å½•ï¼Œæˆ‘ä»¬å®Œå…¨ä¸éœ€è¦ä¿å­˜ä½™é¢ï¼Œå› ä¸ºæˆ‘ä»¬åªéœ€è¦å›æ”¾ä¸€ä¸‹æ‰€æœ‰çš„æ”¶æ”¯äº‹ä»¶ï¼Œå°±å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„æ•°æ®çŠ¶æ€ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿå°±ä¼šå˜å¾—éå¸¸ç®€å•ï¼Œåªéœ€è¦è¿½åŠ ä¸å¯ä¿®æ”¹çš„æ•°æ®æ“ä½œäº‹ä»¶ï¼Œè€Œä¸æ˜¯ä¿å­˜æœ€ç»ˆçŠ¶æ€ã€‚é™¤äº†å¯ä»¥æé«˜æ€§èƒ½å’Œå“åº”æ—¶é—´ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æä¾›äº‹åŠ¡æ•°æ®ä¸€è‡´æ€§ï¼Œå¹¶ä¿ç•™äº†å¯ä»¥å¯ç”¨è¡¥å¿æ“ä½œçš„å®Œæ•´è®°å½•å’Œå†å²è®°å½•ã€‚</p>\n<p>è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬çš„ä»£ç é‡Œæœ‰äº†bugï¼Œåœ¨è®°å½•çŠ¶æ€çš„ç³»ç»Ÿé‡Œï¼Œæˆ‘ä»¬ä¿®æ”¹bugåè¿˜éœ€è¦åšæ•°æ®ä¿®æ­£ã€‚ç„¶è€Œï¼Œåœ¨Event Sourcingçš„ç³»ç»Ÿé‡Œï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ‰€æœ‰äº‹ä»¶é‡æ–°æ’­æ”¾ä¸€éå°±å¥½äº†ï¼Œå› ä¸ºæ•´ä¸ªç³»ç»Ÿæ²¡æœ‰çŠ¶æ€äº†ã€‚</p>\n<p>äº‹ä»¶ä¸å¯å˜ï¼Œå¹¶ä¸”å¯ä½¿ç”¨åªè¿½åŠ æ“ä½œè¿›è¡Œå­˜å‚¨ã€‚ ç”¨æˆ·ç•Œé¢ã€å·¥ä½œæµæˆ–å¯åŠ¨äº‹ä»¶çš„è¿›ç¨‹å¯ç»§ç»­ï¼Œå¤„ç†äº‹ä»¶çš„ä»»åŠ¡å¯åœ¨åå°å¼‚æ­¥è¿è¡Œã€‚ æ­¤å¤–ï¼Œå¤„ç†äº‹åŠ¡æœŸé—´ä¸å­˜åœ¨äº‰ç”¨ï¼Œè¿™ä¸¤ç‚¹å¯æå¤§æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§ã€‚</p>\n<p>äº‹ä»¶æ˜¯æè¿°å·²å‘ç”Ÿæ“ä½œçš„ç®€å•å¯¹è±¡ä»¥åŠæè¿°äº‹ä»¶ä»£è¡¨çš„æ“ä½œæ‰€éœ€çš„ç›¸å…³æ•°æ®ã€‚ äº‹ä»¶ä¸ä¼šç›´æ¥æ›´æ–°æ•°æ®å­˜å‚¨ï¼Œåªä¼šå¯¹äº‹ä»¶è¿›è¡Œè®°å½•ï¼Œä»¥ä¾¿åœ¨åˆé€‚çš„æ—¶é—´è¿›è¡Œå¤„ç†ã€‚ è¿™å¯ç®€åŒ–å®æ–½å’Œç®¡ç†ã€‚</p>\n<p>äº‹ä»¶æº¯æºä¸éœ€è¦ç›´æ¥æ›´æ–°æ•°æ®å­˜å‚¨ä¸­çš„å¯¹è±¡ï¼Œå› è€Œæœ‰åŠ©äºé˜²æ­¢å¹¶å‘æ›´æ–°é€ æˆå†²çªã€‚</p>\n<p>æœ€é‡è¦çš„æ˜¯ï¼Œå¼‚æ­¥å¤„ç† + äº‹ä»¶æº¯æºçš„æ–¹å¼ï¼Œå¯ä»¥å¾ˆå¥½åœ°è®©æˆ‘ä»¬çš„æ•´ä¸ªç³»ç»Ÿè¿›è¡Œä»»åŠ¡çš„ç»Ÿç­¹å®‰æ’ã€æ‰¹é‡å¤„ç†ï¼Œå¯ä»¥è®©æ•´ä½“å¤„ç†è¿‡ç¨‹è¾¾åˆ°æ€§èƒ½å’Œèµ„æºçš„æœ€å¤§åŒ–åˆ©ç”¨ã€‚</p>\n<p>å…³äºEvent Sourcingä¸€èˆ¬ä¼šå’ŒCQRSä¸€èµ·æã€‚å¦å¤–ï¼Œä½ å¯ä»¥å»GitHubä¸Šçœ‹çœ‹<a href=\"https://github.com/cer/event-sourcing-examples\">è¿™ä¸ªé¡¹ç›®çš„ç¤ºä¾‹</a>ä»¥å¾—åˆ°æ›´å¤šçš„ä¿¡æ¯ã€‚</p>\n<h1>å¼‚æ­¥å¤„ç†çš„åˆ†å¸ƒå¼äº‹åŠ¡</h1>\n<p>åœ¨å‰é¢çš„ã€Šåˆ†å¸ƒå¼ç³»ç»Ÿçš„æœ¬è´¨ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬è¯´è¿‡ï¼Œå¯¹äºåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œåœ¨å¼ºä¸€è‡´æ€§ä¸‹ï¼Œåœ¨ä¸šåŠ¡å±‚ä¸Šåªèƒ½åšä¸¤é˜¶æ®µæäº¤ï¼Œè€Œåœ¨æ•°æ®å±‚é¢ä¸Šéœ€è¦ä½¿ç”¨Raft/Paxosçš„ç®—æ³•ã€‚ä½†æ˜¯ï¼Œæˆ‘æƒ³è¯´ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œéœ€è¦ç”¨åˆ°å¼ºä¸€è‡´æ€§çš„åœºæ™¯å®åœ¨ä¸å¤šï¼Œä¸æ˜¯æ‰€æœ‰çš„åœºæ™¯éƒ½å¿…é¡»è¦å¼ºä¸€è‡´æ€§çš„äº‹åŠ¡çš„ã€‚</p>\n<p>æˆ‘ä»¬ä»”ç»†æƒ³æƒ³ç°å®ç”Ÿæ´»å½“ä¸­çš„å¾ˆå¤šä¾‹å­ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å»é¤é¦†åƒé¥­ï¼Œå…ˆä»˜é’±ï¼Œç„¶åæ‹¿ä¸ªå°ç¥¨å»é¢†é¤ã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒæŠŠäº¤é’±å’Œå–è´§è¿™ä¸¤ä¸ªåŠ¨ä½œåˆ†å¼€ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„é¤é¦†æœ‰æ›´é«˜çš„å¹¶å‘å’Œæ¥å®¢èƒ½åŠ›ã€‚å¦‚æœè¦åšæˆä¸¤é˜¶æ®µæäº¤ï¼Œé¡¾å®¢é”å®šå¥½é’±ï¼Œé¤é¦†é”å®šå¥½é£Ÿæï¼Œæœ€åä¸€æ‰‹äº¤é’±ä¸€æ‰‹äº¤é¤ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä»¶éå¸¸ææ€–çš„äº‹ã€‚</p>\n<p>æ˜¯çš„ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ç°å®ä¸–ç•Œä¸­æœ‰å¾ˆå¤šè¿™æ ·å…ˆä»˜é’±ï¼Œæ‹¿å°ç¥¨å»é¢†è´§çš„åœºæ™¯ï¼Œä¹Ÿæœ‰å…ˆæ¶ˆè´¹ï¼Œç„¶åæ‹¿ä¸€ä¸ªè´¦å•å»ä»˜é’±çš„åœºæ™¯ã€‚æ€»ä¹‹ï¼Œå®Œå…¨ä¸éœ€è¦ä¸¤é˜¶æ®µæäº¤è¿™ç§æ–¹å¼ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼æ¥è¾¾åˆ°ä¸€è‡´æ€§ï¼Œå½“ç„¶ï¼Œæ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>\n<p>è¦è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸ªäº¤æ˜“å‡­è¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªäº‹åŠ¡éœ€è¦åšAå’ŒBä¸¤ä»¶äº‹ï¼Œæ¯”å¦‚ï¼ŒæŠŠæˆ‘çš„é’±è½¬ç»™æˆ‘çš„æœ‹å‹ï¼Œé¦–å…ˆå…ˆåšæ‰£é’±äº¤æ˜“ï¼Œç„¶åï¼Œè®°å½•ä¸‹æ‰£é’±çš„å‡­è¯ï¼Œæ‹¿è¿™ä¸ªå‡­è¯å»ç»™æˆ‘æœ‹å‹çš„è´¦å·ä¸ŠåŠ é’±ã€‚</p>\n<p>åœ¨è¾¾æˆè¿™ä¸ªäº‹åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ã€‚</p>\n<ul>\n<li>å‡­è¯éœ€è¦éå¸¸å¥½åœ°ä¿å­˜èµ·æ¥ï¼Œä¸ç„¶ä¼šå¯¼è‡´äº‹åŠ¡åšä¸ä¸‹å»ã€‚</li>\n<li>å‡­è¯å¤„ç†çš„å¹‚ç­‰æ€§é—®é¢˜ï¼Œä¸ç„¶åœ¨é‡è¯•æ—¶å°±ä¼šå‡ºç°å¤šæ¬¡äº¤æ˜“çš„æƒ…å†µã€‚</li>\n<li>å¦‚æœäº‹åŠ¡å®Œæˆä¸äº†ï¼Œéœ€è¦åšè¡¥å¿äº‹åŠ¡å¤„ç†ã€‚</li>\n</ul>\n<h1>å¼‚æ­¥å¤„ç†çš„è®¾è®¡è¦ç‚¹</h1>\n<p>å¼‚æ­¥å¤„ç†ä¸­çš„äº‹ä»¶é©±åŠ¨å’Œäº‹ä»¶æº¯æºæ˜¯ä¸¤ä¸ªæ¯”è¾ƒå…³é”®çš„æŠ€æœ¯ã€‚</p>\n<p>å¼‚æ­¥å¤„ç†å¯èƒ½ä¼šå› ä¸ºä¸€äº›æ•…éšœå¯¼è‡´æˆ‘ä»¬çš„ä¸€äº›ä»»åŠ¡æ²¡æœ‰è¢«å¤„ç†ï¼Œæ¯”å¦‚æ¶ˆæ¯ä¸¢å¤±ï¼Œæ²¡æœ‰é€šçŸ¥åˆ°ï¼Œæˆ–é€šçŸ¥åˆ°äº†ï¼Œæ²¡æœ‰å¤„ç†ã€‚æœ‰è¿™ä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œå¼‚æ­¥é€šçŸ¥çš„æ–¹å¼éœ€è¦ä»»åŠ¡å¤„ç†æ–¹å¤„ç†å®Œæˆåï¼Œç»™ä»»åŠ¡å‘èµ·æ–¹å›ä¼ çŠ¶æ€ï¼Œè¿™æ ·ç¡®ä¿ä¸ä¼šæœ‰æ¼æ‰çš„ã€‚</p>\n<p>å¦å¤–ï¼Œå‘èµ·æ–¹ä¹Ÿéœ€è¦æœ‰ä¸ªå®šæ—¶ä»»åŠ¡ï¼ŒæŠŠä¸€äº›è¶…æ—¶æ²¡æœ‰å›ä¼ çŠ¶æ€çš„ä»»åŠ¡å†é‡æ–°åšä¸€éï¼Œä½ å¯ä»¥è®¤ä¸ºè¿™æ˜¯å¼‚æ­¥ç³»ç»Ÿä¸­çš„&quot;å¯¹è´¦&quot;åŠŸèƒ½ã€‚å½“ç„¶ï¼Œå¦‚æœè¦é‡åšçš„è¯ï¼Œå°±éœ€è¦å¤„ç†æ–¹æ”¯æŒå¹‚ç­‰æ€§å¤„ç†ã€‚</p>\n<p>å¼‚æ­¥å¤„ç†çš„æ•´ä½“ä¸šåŠ¡äº‹åŠ¡é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¼‚æ­¥å¤„ç†åœ¨å¤„ç†ä»»åŠ¡çš„æ—¶å€™ï¼Œå¹¶ä¸çŸ¥é“èƒ½å¦å¤„ç†æˆåŠŸï¼Œäºæ˜¯å°±ä¼šä¸€æ­¥ä¸€æ­¥åœ°å¤„ç†ï¼Œå¦‚æœåˆ°æœ€åä¸€æ­¥ä¸èƒ½æˆåŠŸï¼Œé‚£ä¹ˆä½ å°±éœ€è¦å›æ»šã€‚è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦èµ°æˆ‘ä»¬åœ¨å¼¹åŠ›è®¾è®¡ä¸­è¯´çš„è¡¥å¿äº‹åŠ¡çš„æµç¨‹ã€‚</p>\n<p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„ä¸šåŠ¡éƒ½å¯ä»¥ç”¨å¼‚æ­¥çš„æ–¹å¼ï¼Œæ¯”å¦‚ä¸€äº›éœ€è¦å¼ºä¸€è‡´æ€§çš„ä¸šåŠ¡ï¼Œä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼å¯èƒ½å°±ä¸é€‚åˆï¼Œè¿™é‡Œéœ€è¦æˆ‘ä»¬å°å¿ƒåœ°åˆ†æä¸šåŠ¡ã€‚æˆ‘ç›¸ä¿¡ç»å¤§å¤šæ•°çš„ä¸šåŠ¡åœºæ™¯éƒ½ç”¨ä¸åˆ°å¼ºä¸€è‡´æ€§ï¼ŒåŒ…æ‹¬é“¶è¡Œä¸šåŠ¡ã€‚å¦å¤–ï¼Œåœ¨éœ€è¦æ€§èƒ½çš„æ—¶å€™ï¼Œéœ€è¦ç‰ºç‰²å¼ºä¸€è‡´æ€§ï¼Œå˜ä¸ºæœ€ç»ˆä¸€è‡´æ€§ã€‚</p>\n<p>åœ¨è¿ç»´æ—¶ï¼Œæˆ‘ä»¬è¦ç›‘æ§ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ç§¯å‹æƒ…å†µã€‚å¦‚æœæœ‰ä»»åŠ¡ç§¯å‹äº†ï¼Œè¦èƒ½åšåˆ°å¿«é€Ÿåœ°æ‰©å®¹ã€‚å¦‚æœä¸èƒ½æ‰©å®¹ï¼Œè€Œä¸”ä»»åŠ¡ç§¯å‹å¤ªå¤šï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»ŸæŒ‚æ‰ï¼Œé‚£ä¹ˆå°±è¦å¼€å§‹å¯¹å‰ç«¯æµé‡è¿›è¡Œé™æµã€‚</p>\n<p>æœ€åï¼Œè¿˜æƒ³å¼ºè°ƒä¸€ä¸‹ï¼Œå¼‚æ­¥å¤„ç†ç³»ç»Ÿçš„æœ¬è´¨æ˜¯æŠŠè¢«åŠ¨çš„ä»»åŠ¡å¤„ç†å˜æˆä¸»åŠ¨çš„ä»»åŠ¡å¤„ç†ï¼Œå…¶æœ¬è´¨æ˜¯åœ¨å¯¹ä»»åŠ¡è¿›è¡Œè°ƒåº¦å’Œç»Ÿç­¹ç®¡ç†ã€‚</p>\n<h1>å°ç»“</h1>\n<p>å¥½äº†ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ä»Šå¤©åˆ†äº«çš„ä¸»è¦å†…å®¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»‹ç»äº†å¼‚æ­¥é€šè®¯ï¼Œå®ƒåœ¨å¼¹åŠ›è®¾è®¡ä¸­çš„ä½œç”¨æ˜¯æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®¹é”™èƒ½åŠ›ï¼Œè€Œå…¶å®æˆ‘ä»¬è¿˜å¯ä»¥åœ¨å¼‚æ­¥é€šè®¯çš„åŸºç¡€ä¸Šç»Ÿç­¹ä»»åŠ¡æ¥æé«˜ç³»ç»Ÿçš„ååé‡ã€‚æ¥ç€ï¼Œæˆ‘è®²äº†å¼‚æ­¥é€šè®¯çš„è®¾è®¡ï¼ŒåŒ…æ‹¬æ¨æ‹‰ç»“åˆçš„æ¨¡å‹ã€‚å¼‚æ­¥å¤„ç†é…åˆäº‹ä»¶æº¯æºä¸€èµ·ä½¿ç”¨ï¼Œå°†å¤§å¤§ç®€åŒ–bugä¿®å¤åçš„æ•°æ®æ¢å¤ï¼Œä¹Ÿèƒ½ç”¨äºå®ç°å­˜å‚¨çš„äº‹åŠ¡ä¸€è‡´æ€§ã€‚</p>\n<p>æˆ‘å°†é¤é¦†åƒé¥­ä½œä¸ºæ¯”å–»ï¼Œä»‹ç»äº†å¼‚æ­¥å¤„ç†çš„äº‹åŠ¡ä¸€è‡´æ€§ä¸€èˆ¬ä¸æ˜¯å¼ºä¸€è‡´æ€§ï¼Œè€Œæ˜¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œè¿™æ ·æ‰èƒ½å–å¾—é«˜çš„ååé‡ã€‚æœ€åï¼Œæˆ‘æŒ‡å‡ºäº†å¼‚æ­¥å¤„ç†çš„è®¾è®¡è¦ç‚¹ã€‚ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬è®²è¿°æ•°æ®åº“æ‰©å±•ã€‚å¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚</p>\n<p>ä¹Ÿæ¬¢è¿ä½ åˆ†äº«ä¸€ä¸‹ä½ çš„å¼‚æ­¥å¤„ç†è¿‡ç¨‹æ˜¯æ€æ ·ç»Ÿç­¹å®‰æ’æ¥æé«˜æ‰§è¡Œæ•ˆç‡çš„ï¼Ÿå¼‚æ­¥äº‹åŠ¡åˆæ˜¯æ€æ ·å®ç°çš„ï¼Ÿ</p>\n<p>æ–‡æœ«ç»™å‡ºäº†ã€Šåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æ¨¡å¼ã€‹ç³»åˆ—æ–‡ç« çš„ç›®å½•ï¼Œå¸Œæœ›ä½ èƒ½åœ¨è¿™ä¸ªåˆ—è¡¨é‡Œæ‰¾åˆ°è‡ªå·±æ„Ÿå…´è¶£çš„å†…å®¹ã€‚</p>\n<ul>\n<li>å¼¹åŠ›è®¾è®¡ç¯‡\n<ul>\n<li><a href=\"https://time.geekbang.org/column/article/3912\">è®¤è¯†æ•…éšœå’Œå¼¹åŠ›è®¾è®¡</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/3917\">éš”ç¦»è®¾è®¡Bulkheads</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/3926\">å¼‚æ­¥é€šè®¯è®¾è®¡Asynchronous</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/4050\">å¹‚ç­‰æ€§è®¾è®¡Idempotency</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/4086\">æœåŠ¡çš„çŠ¶æ€State</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/4087\">è¡¥å¿äº‹åŠ¡Compensating Transaction</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/4121\">é‡è¯•è®¾è®¡Retry</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/4241\">ç†”æ–­è®¾è®¡Circuit Breaker</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/4245\">é™æµè®¾è®¡Throttle</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/4252\">é™çº§è®¾è®¡degradation</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/4253\">å¼¹åŠ›è®¾è®¡æ€»ç»“</a></li>\n</ul>\n</li>\n<li>ç®¡ç†è®¾è®¡ç¯‡\n<ul>\n<li><a href=\"https://time.geekbang.org/column/article/5175\">åˆ†å¸ƒå¼é”Distributed Lock</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/5819\">é…ç½®ä¸­å¿ƒConfiguration Management</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/5909\">è¾¹è½¦æ¨¡å¼Sidecar</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/5920\">æœåŠ¡ç½‘æ ¼Service Mesh</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/6086\">ç½‘å…³æ¨¡å¼Gateway</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/6283\">éƒ¨ç½²å‡çº§ç­–ç•¥</a></li>\n</ul>\n</li>\n<li>æ€§èƒ½è®¾è®¡ç¯‡\n<ul>\n<li><a href=\"https://time.geekbang.org/column/article/6282\">ç¼“å­˜Cache</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/7036\">å¼‚æ­¥å¤„ç†Asynchronous</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/7045\">æ•°æ®åº“æ‰©å±•</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/7047\">ç§’æ€Flash Sales</a></li>\n<li><a href=\"https://time.geekbang.org/column/article/7086\">è¾¹ç¼˜è®¡ç®—Edge Computing</a></li>\n</ul>\n</li>\n</ul>\n","comments":[{"had_liked":false,"id":8559,"user_name":"æµªè¡å±…å£«","can_delete":false,"product_type":"c1","uid":1055456,"ip_address":"","ucode":"376D4CBC0CB2BD","user_header":"https://static001.geekbang.org/account/avatar/00/10/1a/e0/06e54287.jpg","comment_is_top":false,"comment_ctime":1526340369,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"156145163025","product_id":100002201,"comment_content":"è€—å­å“¥çš„æ–‡ç« æ²¡å¾—è¯´â€¦å¼•ç»æ®å…¸â€¦ä½†æœ‰ä¸€ç‚¹å°å»ºè®®ï¼Œè€—å­å“¥èƒ½å¦æŠŠç›¸å…³çš„å¼€æºæ¡†æ¶ä¹Ÿå¼•ç”¨ä¸€ä¸‹ï¼Ÿæˆ‘ä»¬å°å…¬å¸çš„å°å¼Ÿè§è¯†å°â€¦ä¸çŸ¥é“å“ªäº›","like_count":36,"discussions":[{"author":{"id":2446418,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/zdK3dSkFwicZHtx5CLAKFJRORRibq2YqvHOP0tySLxVx0X1oD9AJanan2wia2hHaswgxdrCzEEGyVgFTVZ8sElTzQ/132","nickname":"Geek_fbfc4f","note":"","ucode":"7010B242A3F474","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374678,"discussion_content":"æ˜¯çš„ï¼Œå¯æƒœåªèƒ½è‡ªå·±æ‰¾äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621312769,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":8646,"user_name":"Alan","can_delete":false,"product_type":"c1","uid":1061340,"ip_address":"","ucode":"15C718CA868099","user_header":"https://static001.geekbang.org/account/avatar/00/10/31/dc/af9c4356.jpg","comment_is_top":false,"comment_ctime":1526351705,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"104605566809","product_id":100002201,"comment_content":"å¾ˆå¤±æœ›","like_count":24,"discussions":[{"author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":164968,"discussion_content":"å’‹æ»´å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581244008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1044220,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ee/fc/e1078d9c.jpg","nickname":"Donne","note":"","ucode":"C24CEEE55DF24E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1336475,"avatar":"https://static001.geekbang.org/account/avatar/00/14/64/9b/0b578b08.jpg","nickname":"J.Smile","note":"","ucode":"C4D98DFDBF7584","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549898,"discussion_content":"è®²çš„éå¸¸æµ…ï¼ŒåŸºæœ¬æ˜¯å°ç™½çš„å…¥é—¨çº§æŒ‡å¼•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644289268,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":164968,"ip_address":""},"score":549898,"extra":""}]}]},{"had_liked":false,"id":167484,"user_name":"cf","can_delete":false,"product_type":"c1","uid":1563302,"ip_address":"","ucode":"1CBDFB2549B961","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/uxKzInotBfwJLOfGtLrLC181ISxn539P04ibGVbB5lFBhCeN52kjATon74B6JQibuyTVibc8rPKUPvA63684AmVibA/132","comment_is_top":false,"comment_ctime":1577839851,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"66002349291","product_id":100002201,"comment_content":"æ€§èƒ½è®¾è®¡å†™å‡ ç¯‡å†™çš„æ¯”è¾ƒä¸€èˆ¬ï¼Œéƒ½æ˜¯é¢ä¸Šå“—å•¦å“—å•¦ï¼Œä¸å¤Ÿæ·±å…¥","like_count":15},{"had_liked":false,"id":8876,"user_name":"é¢‡å¿’å¦¥","can_delete":false,"product_type":"c1","uid":1026448,"ip_address":"","ucode":"AA86AD1049BC2E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/90/0c5ed3d9.jpg","comment_is_top":false,"comment_ctime":1526512468,"is_pvip":false,"replies":[{"id":"2943","content":"æ˜¯çš„ï¼Œè¦åšsnapshot ","user_name":"ä½œè€…å›å¤","user_name_real":"å·¦è€³æœµ","uid":"1001269","ctime":1526978430,"ip_address":"","comment_id":8876,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44476185428","product_id":100002201,"comment_content":"Event sourcing éœ€è¦snapshot å¦åˆ™å¯åŠ¨æ—¶æ¯æ¬¡å›æ”¾æ—¥å¿—å¤ªææ€–ã€‚<br>å¦‚æœè¦è‡ªåˆ¶åˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥çœ‹ä¸€ä¸‹atomixé¡¹ç›®","like_count":10,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"å·¦è€³æœµ","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417883,"discussion_content":"æ˜¯çš„ï¼Œè¦åšsnapshot ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526978430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":215235,"user_name":"é±¼","can_delete":false,"product_type":"c1","uid":1487584,"ip_address":"","ucode":"89EC9CE3AD0281","user_header":"https://static001.geekbang.org/account/avatar/00/16/b2/e0/d856f5a4.jpg","comment_is_top":false,"comment_ctime":1588936079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"23063772559","product_id":100002201,"comment_content":"Event Sourcing ä¸CQRS<br>Event SourcingåŸæœ¬åªéœ€è¿½åŠ è®°å½•Event,ç„¶åé€šè¿‡èšåˆæ“ä½œå¾—åˆ°èšåˆå¯¹è±¡çš„æœ€æ–°çŠ¶æ€ã€‚ä½†æ˜¯æ¯ä¸€æ¬¡é‡æ–°ï¼ˆä¾‹å¦‚ç³»ç»Ÿé‡å¯ï¼‰è·å–èšåˆå¯¹è±¡çš„æœ€æ–°çŠ¶æ€å¤ªæ¶ˆè€—èµ„æºï¼Œæ‰€ä»¥å°±éœ€è¦æŠŠèšåˆå¯¹è±¡çš„æœ€æ–°çŠ¶æ€å­˜åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œå³ç‰©åŒ–è§†å›¾ã€‚è¿™æ ·æˆ‘ä»¬Queryæ“ä½œç›´æ¥è¯»å–è§†å›¾æ•°æ®å³å¯ï¼Œè€ŒCommandæ“ä½œï¼ˆä¿®æ”¹æ“ä½œï¼‰æ²¿ç”¨åŸæ¥çš„äº‹ä»¶é©±åŠ¨æ¨¡å¼è¿½åŠ è®°å½•ã€‚æ‰€ä»¥CQRSæ˜¯Event Sourcingå¾ˆè‡ªç„¶çš„ä¸€ä¸ªç»“æœã€‚<br>é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨è¿½åŠ è§¦å‘äº‹ä»¶æ“ä½œæ—¶ï¼Œä½¿ç”¨ä¸€ä¸ªEventHandleræ¥æ›´æ–°è§†å›¾ï¼ˆèšåˆå¯¹è±¡çš„æœ€æ–°çŠ¶æ€ï¼‰ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¤šä¸ªèŠ‚ç‚¹ä¿å­˜ç‰©åŒ–è§†å›¾è¿›ä¸€æ­¥æå‡è¯»å–æ€§èƒ½ã€‚è¿™ä¹Ÿæ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„ä¸€ç§å®è·µå§ã€‚","like_count":5},{"had_liked":false,"id":11262,"user_name":"1angxi","can_delete":false,"product_type":"c1","uid":1052412,"ip_address":"","ucode":"93D449527B73BB","user_header":"https://static001.geekbang.org/account/avatar/00/10/0e/fc/822a4e75.jpg","comment_is_top":false,"comment_ctime":1528008331,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"18707877515","product_id":100002201,"comment_content":"é˜¿é‡Œé¢è¯•çš„æ—¶å€™ç‰¹åˆ«å–œæ¬¢é—®è¿™ç±»é—®é¢˜ğŸ¤£","like_count":4,"discussions":[{"author":{"id":1603271,"avatar":"","nickname":"Geek_f3a3d1","note":"","ucode":"E15FA1C3AB3174","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":125005,"discussion_content":"å¹nbçš„é—®é¢˜å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578466678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169282,"user_name":"æ–‡åˆ‚ æ°µå…± è¶…","can_delete":false,"product_type":"c1","uid":1282813,"ip_address":"","ucode":"C2CE1512D23012","user_header":"https://static001.geekbang.org/account/avatar/00/13/92/fd/6b0e58fe.jpg","comment_is_top":false,"comment_ctime":1578304805,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14463206693","product_id":100002201,"comment_content":"åšæŒå­¦ä¹ ï¼Œå­¦ä¹ ç¬”è®° https:&#47;&#47;mubu.com&#47;colla&#47;4M6zFJw6f90","like_count":3},{"had_liked":false,"id":116365,"user_name":"edisonhuang","can_delete":false,"product_type":"c1","uid":1530167,"ip_address":"","ucode":"BB2F639A779F96","user_header":"https://static001.geekbang.org/account/avatar/00/17/59/37/bd2de0a4.jpg","comment_is_top":false,"comment_ctime":1563844363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14448746251","product_id":100002201,"comment_content":"å¼‚æ­¥å¤„ç†çš„æœ¬è´¨æ˜¯æŠŠè¢«åŠ¨å¤„ç†ä»»åŠ¡è½¬æ¢ä¸ºä¸»åŠ¨å¤„ç†ï¼Œè¿™æ ·å¯ä»¥å¯¹ä»»åŠ¡åšè§„åˆ’ï¼Œç»Ÿç­¹å®‰æ’ã€‚å¼‚æ­¥å¤„ç† + äº‹ä»¶æº¯æºçš„æ–¹å¼ï¼Œå¯ä»¥è®©æ•´ä½“å¤„ç†è¿‡ç¨‹è¾¾åˆ°æ€§èƒ½å’Œèµ„æºçš„æœ€å¤§åŒ–åˆ©ç”¨ã€‚<br>è¿™é‡Œå°±å¯¹åº”äº†ä¸¤ç§æ¨¡å¼pushå’Œpullï¼Œpushåšä¸€å®šçš„è°ƒåº¦ï¼Œpullç«¯è®¢é˜…pushæäº¤çš„äº‹ä»¶ï¼Œä¸»åŠ¨å¤„ç†ä»»åŠ¡ã€‚<br>å¼‚æ­¥å¤„ç†å¯ä»¥ä¿è¯äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¸èƒ½ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œä½†æ˜¯å¤§å¤§æé«˜äº†ç³»ç»Ÿçš„æ€§èƒ½å’Œååé‡","like_count":3},{"had_liked":false,"id":8622,"user_name":"K","can_delete":false,"product_type":"c1","uid":1084327,"ip_address":"","ucode":"4CC9519227A4E6","user_header":"https://static001.geekbang.org/account/avatar/00/10/8b/a7/8aea800d.jpg","comment_is_top":false,"comment_ctime":1526347909,"is_pvip":false,"replies":[{"id":"2944","content":"å¯ä»¥çš„ï¼Œä½†å…·ä½“è¦çœ‹ä¸šåŠ¡åœºæ™¯äº†","user_name":"ä½œè€…å›å¤","user_name_real":"å·¦è€³æœµ","uid":"1001269","ctime":1526978507,"ip_address":"","comment_id":8622,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14411249797","product_id":100002201,"comment_content":"è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œç”¨äº‹åŠ¡æ€§çš„MQæ¥åšæœ€ç»ˆä¸€è‡´æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªå¥½çš„å®è·µå—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1001269,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/47/35/89726f5f.jpg","nickname":"å·¦è€³æœµ","note":"","ucode":"8A4741D677702E","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":417798,"discussion_content":"å¯ä»¥çš„ï¼Œä½†å…·ä½“è¦çœ‹ä¸šåŠ¡åœºæ™¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1526978507,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":40144,"user_name":"å‰‘å…«","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1542523068,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10132457660","product_id":100002201,"comment_content":"å¼‚æ­¥å¤„ç†è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„<br>åƒä¸€äº›éæ ¸å¿ƒä¸šåŠ¡å¯ä»¥ç®€å•åšæˆå¼‚æ­¥åŒ–<br>æœ‰äº›å¯¹ä¸šåŠ¡æˆåŠŸè¦æ±‚æœ€ç»ˆä¸€è‡´æ€§åˆ™è¿˜éœ€è¦ä¸€ç³»åˆ—çš„ä¿éšœæ‰‹æ®µï¼Œå¦‚å¯¹è´¦è¡¥å¿ç­‰","like_count":2},{"had_liked":false,"id":12768,"user_name":"TH","can_delete":false,"product_type":"c1","uid":1053413,"ip_address":"","ucode":"C5EA20546DC09C","user_header":"https://static001.geekbang.org/account/avatar/00/10/12/e5/592d9324.jpg","comment_is_top":false,"comment_ctime":1529025727,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10118960319","product_id":100002201,"comment_content":"Event Sourcingæ˜¯å¦ä¼šå‡æ…¢æ€§èƒ½ï¼Ÿå› ä¸ºå›æ”¾äº‹ä»¶æµä¼šæ¯”ç›´æ¥ä»å­˜å‚¨è·å–çŠ¶æ€å€¼è¦æ…¢å§ï¼Ÿæ˜¯å¦è¿˜æ˜¯éœ€è¦å‰ç½®ä¸€ä¸ªç¼“å­˜ï¼ŸCQRSé‡ŒCç«¯çš„äº‹ä»¶æµåœ¨å¤„ç†å®Œå¹¶æ›´æ–°Qç«¯ä¹‹åè¿˜æœ‰å¿…è¦ç»§ç»­ä¿ç•™å—ï¼Ÿ","like_count":2},{"had_liked":false,"id":12494,"user_name":"æœ‰å®¹ä¹ƒå¤§","can_delete":false,"product_type":"c1","uid":1092469,"ip_address":"","ucode":"29F1D005EB0028","user_header":"https://static001.geekbang.org/account/avatar/00/10/ab/75/cb6ac153.jpg","comment_is_top":false,"comment_ctime":1528862422,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10118797014","product_id":100002201,"comment_content":"å¼‚æ­¥å¤„ç†ç”¨å‘æ¶ˆæ¯çš„å½¢å¼å®ç°çš„ã€‚","like_count":2},{"had_liked":false,"id":9824,"user_name":"åœ£è¯ä½¿è€…","can_delete":false,"product_type":"c1","uid":1028183,"ip_address":"","ucode":"E59436F6392122","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b0/57/a84d633e.jpg","comment_is_top":false,"comment_ctime":1527120638,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10117055230","product_id":100002201,"comment_content":"è€—å­å“¥è®²çš„è¿™ä¸ªæ“ä½œç³»ç»Ÿçš„mergeå’Œsortå’Œlinuxç³»ç»Ÿç¼–ç¨‹ä¸­æœ‰å‡ºå…¥ï¼Œä¹¦ä¸­çš„æ„æ€æ˜¯å¦‚æœè¯»è¯·æ±‚çš„åºå·æ˜¯2341ï¼Œå†…æ ¸å…ˆsortæˆ1234ç„¶åmergeæˆä¸€ä¸ªè¯·æ±‚ï¼Œå›ºæ€ç›˜ä¸€èˆ¬æ˜¯noopç®—æ³•ï¼Œåªmergeä¸sortï¼Œä¸Šä¸€ä¸ªè¯·æ±‚å°±ä¼šæ˜¯ä¸¤ä¸ªè¯»è¯·æ±‚1å’Œ234ã€‚ä¸çŸ¥é“æˆ‘çš„ç†è§£å¯¹ä¸å¯¹ã€‚","like_count":2},{"had_liked":false,"id":8609,"user_name":"Xg huang","can_delete":false,"product_type":"c1","uid":1016995,"ip_address":"","ucode":"9680FA95DE3553","user_header":"","comment_is_top":false,"comment_ctime":1526346968,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10116281560","product_id":100002201,"comment_content":"çš“å“¥ï¼Œæƒ³é—®ä¸‹ä½ ä»¬åœ¨å®ç°event souring æ¨¡å¼çš„æ—¶å€™ï¼Œç”¨äº†ä»€ä¹ˆä¸­é—´ä»¶åšå­˜å‚¨ï¼Ÿæˆ‘æœ€å¸¸æ¥è§¦çš„ä¸»è¦æ˜¯rabit mqå’Œkafka, å‰è€…ä¸»è¦æ˜¯push æ¨¡å‹æˆ‘è§‰å¾—ä¸å¤ªé€‚åˆåšes,åè€…è™½ç„¶æ˜¯pullæ¨¡å‹ï¼Œä½†æ›´å¤šçš„æ˜¯å¼ºè°ƒæ€§èƒ½è€Œä¸æ˜¯æ•°æ®å¯é æ€§ï¼Œæ‰€ä»¥é—®ä¸‹çš“å“¥æ˜¯æ€æ ·é€‰å‹çš„ï¼Œè°¢è°¢","like_count":2},{"had_liked":false,"id":8848,"user_name":"50infivedays","can_delete":false,"product_type":"c1","uid":1041782,"ip_address":"","ucode":"D54E8F993C7412","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e5/76/dacea81b.jpg","comment_is_top":false,"comment_ctime":1526481407,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5821448703","product_id":100002201,"comment_content":"æƒ³äº†è§£ä¸‹æ•°æ®æ•´å½¢ç›¸å…³çš„å†…å®¹","like_count":1},{"had_liked":false,"id":8738,"user_name":"çº¦ä¹¦äºš","can_delete":false,"product_type":"c1","uid":1046714,"ip_address":"","ucode":"81EA27ADD9EC1A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/f8/ba/14e05601.jpg","comment_is_top":false,"comment_ctime":1526394551,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5821361847","product_id":100002201,"comment_content":"å®è·µçš„ä¾‹å­ï¼ŒæŸ”æ€§äº‹åŠ¡çš„æœ€å¤§åŠªåŠ›é€šçŸ¥ç®—ä¹ˆï¼Ÿ","like_count":1},{"had_liked":false,"id":357835,"user_name":"æ¢…å­é»„æ—¶é›¨","can_delete":false,"product_type":"c1","uid":1015938,"ip_address":"ä¸Šæµ·","ucode":"9F788D09C2E9E7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/80/82/3c21b30c.jpg","comment_is_top":false,"comment_ctime":1663669412,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1663669412","product_id":100002201,"comment_content":"å¸¸çœ‹å¸¸æ–°ã€‚","like_count":0},{"had_liked":false,"id":321098,"user_name":"æ–¹å‹‡(gopher)","can_delete":false,"product_type":"c1","uid":1290625,"ip_address":"","ucode":"D199911C4CFEF5","user_header":"https://static001.geekbang.org/account/avatar/00/13/b1/81/13f23d1e.jpg","comment_is_top":false,"comment_ctime":1636679036,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636679036","product_id":100002201,"comment_content":"æˆ‘ä»¬åœ¨æ¶ˆè´¹è€…è®¾ç½®å¹‚ç­‰ï¼Œä½†æ˜¯åŸºäºredis.å¦‚æœåšäº‹ä»¶æº¯æºä¸šåŠ¡è‡ªå·±å°±è¦å¤„ç†å¹‚ç­‰é€»è¾‘ã€‚","like_count":0},{"had_liked":false,"id":308277,"user_name":"Watts","can_delete":false,"product_type":"c1","uid":1145583,"ip_address":"","ucode":"A3D0EBC00D477C","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/ef/9168ae82.jpg","comment_is_top":false,"comment_ctime":1629512588,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1629512588","product_id":100002201,"comment_content":"è‚¯å¾·åŸºæ‰‹æœºç‚¹é¤ä¸‹å•ä»˜æ¬¾åï¼Œå¤§å±å¹•æœ‰ä¸ªå–é¤é˜Ÿåˆ—ã€‚ç”Ÿæ´»ä¸­çš„å¼‚æ­¥å¤„ç†ï¼Œè¿™ä¸ªä¾‹å­è¿˜æŒºæœ‰æ„æ€çš„ã€‚","like_count":0},{"had_liked":false,"id":279764,"user_name":"Ins","can_delete":false,"product_type":"c1","uid":1328500,"ip_address":"","ucode":"A2509BAD9CB72C","user_header":"https://static001.geekbang.org/account/avatar/00/14/45/74/7a82eebb.jpg","comment_is_top":false,"comment_ctime":1613959187,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1613959187","product_id":100002201,"comment_content":"å¼‚æ­¥ç›¸å¯¹äºåŒæ­¥çš„ç¼ºç‚¹å¯ä»¥ç¨å¾®è®²ä¸€ä¸‹ï¼Œå› ä¸ºåŒæ­¥å¤„ç†æ‰æ˜¯æœ€åŸå§‹æœ€ç¬¦åˆç›´è§‰çš„æ–¹å¼ã€‚","like_count":0,"discussions":[{"author":{"id":2446418,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/zdK3dSkFwicZHtx5CLAKFJRORRibq2YqvHOP0tySLxVx0X1oD9AJanan2wia2hHaswgxdrCzEEGyVgFTVZ8sElTzQ/132","nickname":"Geek_fbfc4f","note":"","ucode":"7010B242A3F474","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374679,"discussion_content":"å‰é¢çš„å¼‚æ­¥å¤„ç†å¥½åƒæœ‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1621312883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":10741,"user_name":"æ˜µç§°","can_delete":false,"product_type":"c1","uid":1025680,"ip_address":"","ucode":"FD6A58AB271E5D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/90/5295fce8.jpg","comment_is_top":false,"comment_ctime":1527682961,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1527682961","product_id":100002201,"comment_content":"çš“å“¥æ–‡ä¸­è®²åˆ°æ¨æ‹‰ç»“åˆçš„ä¾‹å­ï¼Œæ˜¯å¦å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¸Šæ¸¸å°†æ•°æ®pushåˆ°ä¸‹æ¸¸ï¼Œä½†æ˜¯ä¸‹æ¸¸åªåœ¨ä»ä¸Šæ¸¸pullåˆ°å¤„ç†æ•°æ®çš„å‘½ä»¤æ—¶è¿›è¡Œå¤„ç†ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1603271,"avatar":"","nickname":"Geek_f3a3d1","note":"","ucode":"E15FA1C3AB3174","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":125007,"discussion_content":"æ€ä¹ˆå¬èµ·æ¥è¿™ä¹ˆåƒä¸­é—´ä»¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578466759,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}