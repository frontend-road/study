{"id":76161,"title":"23 | MySQLæ˜¯æ€ä¹ˆä¿è¯æ•°æ®ä¸ä¸¢çš„ï¼Ÿ","content":"<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä¼šç»§ç»­å’Œä½ ä»‹ç»åœ¨ä¸šåŠ¡é«˜å³°æœŸä¸´æ—¶æå‡æ€§èƒ½çš„æ–¹æ³•ã€‚ä»æ–‡ç« æ ‡é¢˜â€œMySQLæ˜¯æ€ä¹ˆä¿è¯æ•°æ®ä¸ä¸¢çš„ï¼Ÿâ€ï¼Œä½ å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œä»Šå¤©æˆ‘å’Œä½ ä»‹ç»çš„æ–¹æ³•ï¼Œè·Ÿæ•°æ®çš„å¯é æ€§æœ‰å…³ã€‚</p><p>åœ¨ä¸“æ å‰é¢æ–‡ç« å’Œç­”ç–‘ç¯‡ä¸­ï¼Œæˆ‘éƒ½ç€é‡ä»‹ç»äº†WALæœºåˆ¶ï¼ˆä½ å¯ä»¥å†å›é¡¾ä¸‹<a href=\"https://time.geekbang.org/column/article/68633\">ç¬¬2ç¯‡</a>ã€<a href=\"https://time.geekbang.org/column/article/70848\">ç¬¬9ç¯‡</a>ã€<a href=\"https://time.geekbang.org/column/article/71806\">ç¬¬12ç¯‡</a>å’Œ<a href=\"https://time.geekbang.org/column/article/73161\">ç¬¬15ç¯‡</a>æ–‡ç« ä¸­çš„ç›¸å…³å†…å®¹ï¼‰ï¼Œå¾—åˆ°çš„ç»“è®ºæ˜¯ï¼šåªè¦redo logå’Œbinlogä¿è¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå°±èƒ½ç¡®ä¿MySQLå¼‚å¸¸é‡å¯åï¼Œæ•°æ®å¯ä»¥æ¢å¤ã€‚</p><p>è¯„è®ºåŒºæœ‰åŒå­¦åˆç»§ç»­è¿½é—®ï¼Œredo logçš„å†™å…¥æµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Œå¦‚ä½•ä¿è¯redo logçœŸå®åœ°å†™å…¥äº†ç£ç›˜ã€‚é‚£ä¹ˆä»Šå¤©ï¼Œæˆ‘ä»¬å°±å†ä¸€èµ·çœ‹çœ‹MySQLå†™å…¥binlogå’Œredo logçš„æµç¨‹ã€‚</p><h1>binlogçš„å†™å…¥æœºåˆ¶</h1><p>å…¶å®ï¼Œbinlogçš„å†™å…¥é€»è¾‘æ¯”è¾ƒç®€å•ï¼šäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…ˆæŠŠæ—¥å¿—å†™åˆ°binlog cacheï¼Œäº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œå†æŠŠbinlog cacheå†™åˆ°binlogæ–‡ä»¶ä¸­ã€‚</p><p>ä¸€ä¸ªäº‹åŠ¡çš„binlogæ˜¯ä¸èƒ½è¢«æ‹†å¼€çš„ï¼Œå› æ­¤ä¸è®ºè¿™ä¸ªäº‹åŠ¡å¤šå¤§ï¼Œä¹Ÿè¦ç¡®ä¿ä¸€æ¬¡æ€§å†™å…¥ã€‚è¿™å°±æ¶‰åŠåˆ°äº†binlog cacheçš„ä¿å­˜é—®é¢˜ã€‚</p><p>ç³»ç»Ÿç»™binlog cacheåˆ†é…äº†ä¸€ç‰‡å†…å­˜ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸€ä¸ªï¼Œå‚æ•° binlog_cache_sizeç”¨äºæ§åˆ¶å•ä¸ªçº¿ç¨‹å†…binlog cacheæ‰€å å†…å­˜çš„å¤§å°ã€‚å¦‚æœè¶…è¿‡äº†è¿™ä¸ªå‚æ•°è§„å®šçš„å¤§å°ï¼Œå°±è¦æš‚å­˜åˆ°ç£ç›˜ã€‚</p><!-- [[[read_end]]] --><p>äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œæ‰§è¡Œå™¨æŠŠbinlog cacheé‡Œçš„å®Œæ•´äº‹åŠ¡å†™å…¥åˆ°binlogä¸­ï¼Œå¹¶æ¸…ç©ºbinlog cacheã€‚çŠ¶æ€å¦‚å›¾1æ‰€ç¤ºã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9e/3e/9ed86644d5f39efb0efec595abb92e3e.png?wh=1142*748\" alt=\"\"></p><center><span class=\"reference\">å›¾1 binlogå†™ç›˜çŠ¶æ€</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±binlog cacheï¼Œä½†æ˜¯å…±ç”¨åŒä¸€ä»½binlogæ–‡ä»¶ã€‚</p><ul>\n<li>å›¾ä¸­çš„writeï¼ŒæŒ‡çš„å°±æ˜¯æŒ‡æŠŠæ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„page cacheï¼Œå¹¶æ²¡æœ‰æŠŠæ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œæ‰€ä»¥é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚</li>\n<li>å›¾ä¸­çš„fsyncï¼Œæ‰æ˜¯å°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜çš„æ“ä½œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¤ä¸ºfsyncæ‰å ç£ç›˜çš„IOPSã€‚</li>\n</ul><p>write å’Œfsyncçš„æ—¶æœºï¼Œæ˜¯ç”±å‚æ•°sync_binlogæ§åˆ¶çš„ï¼š</p><ol>\n<li>\n<p>sync_binlog=0çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡æäº¤äº‹åŠ¡éƒ½åªwriteï¼Œä¸fsyncï¼›</p>\n</li>\n<li>\n<p>sync_binlog=1çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡æäº¤äº‹åŠ¡éƒ½ä¼šæ‰§è¡Œfsyncï¼›</p>\n</li>\n<li>\n<p>sync_binlog=N(N&gt;1)çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡æäº¤äº‹åŠ¡éƒ½writeï¼Œä½†ç´¯ç§¯Nä¸ªäº‹åŠ¡åæ‰fsyncã€‚</p>\n</li>\n</ol><p>å› æ­¤ï¼Œåœ¨å‡ºç°IOç“¶é¢ˆçš„åœºæ™¯é‡Œï¼Œå°†sync_binlogè®¾ç½®æˆä¸€ä¸ªæ¯”è¾ƒå¤§çš„å€¼ï¼Œå¯ä»¥æå‡æ€§èƒ½ã€‚åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè€ƒè™‘åˆ°ä¸¢å¤±æ—¥å¿—é‡çš„å¯æ§æ€§ï¼Œä¸€èˆ¬ä¸å»ºè®®å°†è¿™ä¸ªå‚æ•°è®¾æˆ0ï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯å°†å…¶è®¾ç½®ä¸º100~1000ä¸­çš„æŸä¸ªæ•°å€¼ã€‚</p><p>ä½†æ˜¯ï¼Œå°†sync_binlogè®¾ç½®ä¸ºNï¼Œå¯¹åº”çš„é£é™©æ˜¯ï¼šå¦‚æœä¸»æœºå‘ç”Ÿå¼‚å¸¸é‡å¯ï¼Œä¼šä¸¢å¤±æœ€è¿‘Nä¸ªäº‹åŠ¡çš„binlogæ—¥å¿—ã€‚</p><h1>redo logçš„å†™å…¥æœºåˆ¶</h1><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†è¯´è¯´redo logçš„å†™å…¥æœºåˆ¶ã€‚</p><p>åœ¨ä¸“æ çš„<a href=\"https://time.geekbang.org/column/article/73161\">ç¬¬15ç¯‡ç­”ç–‘æ–‡ç« </a>ä¸­ï¼Œæˆ‘ç»™ä½ ä»‹ç»äº†redo log bufferã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆçš„redo logæ˜¯è¦å…ˆå†™åˆ°redo log bufferçš„ã€‚</p><p>ç„¶åå°±æœ‰åŒå­¦é—®äº†ï¼Œredo log bufferé‡Œé¢çš„å†…å®¹ï¼Œæ˜¯ä¸æ˜¯æ¯æ¬¡ç”Ÿæˆåéƒ½è¦ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼Œä¸éœ€è¦ã€‚</p><p>å¦‚æœäº‹åŠ¡æ‰§è¡ŒæœŸé—´MySQLå‘ç”Ÿå¼‚å¸¸é‡å¯ï¼Œé‚£è¿™éƒ¨åˆ†æ—¥å¿—å°±ä¸¢äº†ã€‚ç”±äºäº‹åŠ¡å¹¶æ²¡æœ‰æäº¤ï¼Œæ‰€ä»¥è¿™æ—¶æ—¥å¿—ä¸¢äº†ä¹Ÿä¸ä¼šæœ‰æŸå¤±ã€‚</p><p>é‚£ä¹ˆï¼Œå¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œäº‹åŠ¡è¿˜æ²¡æäº¤çš„æ—¶å€™ï¼Œredo log bufferä¸­çš„éƒ¨åˆ†æ—¥å¿—æœ‰æ²¡æœ‰å¯èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼Œç¡®å®ä¼šæœ‰ã€‚</p><p>è¿™ä¸ªé—®é¢˜ï¼Œè¦ä»redo logå¯èƒ½å­˜åœ¨çš„ä¸‰ç§çŠ¶æ€è¯´èµ·ã€‚è¿™ä¸‰ç§çŠ¶æ€ï¼Œå¯¹åº”çš„å°±æ˜¯å›¾2 ä¸­çš„ä¸‰ä¸ªé¢œè‰²å—ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/9d/d4/9d057f61d3962407f413deebc80526d4.png?wh=1142*639\" alt=\"\"></p><center><span class=\"reference\">å›¾2 MySQL redo logå­˜å‚¨çŠ¶æ€</span></center><p>è¿™ä¸‰ç§çŠ¶æ€åˆ†åˆ«æ˜¯ï¼š</p><ol>\n<li>\n<p>å­˜åœ¨redo log bufferä¸­ï¼Œç‰©ç†ä¸Šæ˜¯åœ¨MySQLè¿›ç¨‹å†…å­˜ä¸­ï¼Œå°±æ˜¯å›¾ä¸­çš„çº¢è‰²éƒ¨åˆ†ï¼›</p>\n</li>\n<li>\n<p>å†™åˆ°ç£ç›˜(write)ï¼Œä½†æ˜¯æ²¡æœ‰æŒä¹…åŒ–ï¼ˆfsync)ï¼Œç‰©ç†ä¸Šæ˜¯åœ¨æ–‡ä»¶ç³»ç»Ÿçš„page cacheé‡Œé¢ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„é»„è‰²éƒ¨åˆ†ï¼›</p>\n</li>\n<li>\n<p>æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå¯¹åº”çš„æ˜¯hard diskï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ç»¿è‰²éƒ¨åˆ†ã€‚</p>\n</li>\n</ol><p>æ—¥å¿—å†™åˆ°redo log bufferæ˜¯å¾ˆå¿«çš„ï¼Œwirteåˆ°page cacheä¹Ÿå·®ä¸å¤šï¼Œä½†æ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜çš„é€Ÿåº¦å°±æ…¢å¤šäº†ã€‚</p><p>ä¸ºäº†æ§åˆ¶redo logçš„å†™å…¥ç­–ç•¥ï¼ŒInnoDBæä¾›äº†innodb_flush_log_at_trx_commitå‚æ•°ï¼Œå®ƒæœ‰ä¸‰ç§å¯èƒ½å–å€¼ï¼š</p><ol>\n<li>\n<p>è®¾ç½®ä¸º0çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½åªæ˜¯æŠŠredo logç•™åœ¨redo log bufferä¸­;</p>\n</li>\n<li>\n<p>è®¾ç½®ä¸º1çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½å°†redo logç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼›</p>\n</li>\n<li>\n<p>è®¾ç½®ä¸º2çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½åªæ˜¯æŠŠredo logå†™åˆ°page cacheã€‚</p>\n</li>\n</ol><p>InnoDBæœ‰ä¸€ä¸ªåå°çº¿ç¨‹ï¼Œæ¯éš”1ç§’ï¼Œå°±ä¼šæŠŠredo log bufferä¸­çš„æ—¥å¿—ï¼Œè°ƒç”¨writeå†™åˆ°æ–‡ä»¶ç³»ç»Ÿçš„page cacheï¼Œç„¶åè°ƒç”¨fsyncæŒä¹…åŒ–åˆ°ç£ç›˜ã€‚</p><p>æ³¨æ„ï¼Œäº‹åŠ¡æ‰§è¡Œä¸­é—´è¿‡ç¨‹çš„redo logä¹Ÿæ˜¯ç›´æ¥å†™åœ¨redo log bufferä¸­çš„ï¼Œè¿™äº›redo logä¹Ÿä¼šè¢«åå°çº¿ç¨‹ä¸€èµ·æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªæ²¡æœ‰æäº¤çš„äº‹åŠ¡çš„redo logï¼Œä¹Ÿæ˜¯å¯èƒ½å·²ç»æŒä¹…åŒ–åˆ°ç£ç›˜çš„ã€‚</p><p>å®é™…ä¸Šï¼Œé™¤äº†åå°çº¿ç¨‹æ¯ç§’ä¸€æ¬¡çš„è½®è¯¢æ“ä½œå¤–ï¼Œè¿˜æœ‰ä¸¤ç§åœºæ™¯ä¼šè®©ä¸€ä¸ªæ²¡æœ‰æäº¤çš„äº‹åŠ¡çš„redo logå†™å…¥åˆ°ç£ç›˜ä¸­ã€‚</p><ol>\n<li>\n<p><strong>ä¸€ç§æ˜¯ï¼Œredo log bufferå ç”¨çš„ç©ºé—´å³å°†è¾¾åˆ° innodb_log_buffer_sizeä¸€åŠçš„æ—¶å€™ï¼Œåå°çº¿ç¨‹ä¼šä¸»åŠ¨å†™ç›˜ã€‚</strong>æ³¨æ„ï¼Œç”±äºè¿™ä¸ªäº‹åŠ¡å¹¶æ²¡æœ‰æäº¤ï¼Œæ‰€ä»¥è¿™ä¸ªå†™ç›˜åŠ¨ä½œåªæ˜¯writeï¼Œè€Œæ²¡æœ‰è°ƒç”¨fsyncï¼Œä¹Ÿå°±æ˜¯åªç•™åœ¨äº†æ–‡ä»¶ç³»ç»Ÿçš„page cacheã€‚</p>\n</li>\n<li>\n<p><strong>å¦ä¸€ç§æ˜¯ï¼Œå¹¶è¡Œçš„äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œé¡ºå¸¦å°†è¿™ä¸ªäº‹åŠ¡çš„redo log bufferæŒä¹…åŒ–åˆ°ç£ç›˜ã€‚</strong>å‡è®¾ä¸€ä¸ªäº‹åŠ¡Aæ‰§è¡Œåˆ°ä¸€åŠï¼Œå·²ç»å†™äº†ä¸€äº›redo logåˆ°bufferä¸­ï¼Œè¿™æ—¶å€™æœ‰å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„äº‹åŠ¡Bæäº¤ï¼Œå¦‚æœinnodb_flush_log_at_trx_commitè®¾ç½®çš„æ˜¯1ï¼Œé‚£ä¹ˆæŒ‰ç…§è¿™ä¸ªå‚æ•°çš„é€»è¾‘ï¼Œäº‹åŠ¡Bè¦æŠŠredo log bufferé‡Œçš„æ—¥å¿—å…¨éƒ¨æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚è¿™æ—¶å€™ï¼Œå°±ä¼šå¸¦ä¸Šäº‹åŠ¡Aåœ¨redo log bufferé‡Œçš„æ—¥å¿—ä¸€èµ·æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚</p>\n</li>\n</ol><p>è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæˆ‘ä»¬ä»‹ç»ä¸¤é˜¶æ®µæäº¤çš„æ—¶å€™è¯´è¿‡ï¼Œæ—¶åºä¸Šredo logå…ˆprepareï¼Œ å†å†™binlogï¼Œæœ€åå†æŠŠredo log commitã€‚</p><p>å¦‚æœæŠŠinnodb_flush_log_at_trx_commitè®¾ç½®æˆ1ï¼Œé‚£ä¹ˆredo logåœ¨prepareé˜¶æ®µå°±è¦æŒä¹…åŒ–ä¸€æ¬¡ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªå´©æºƒæ¢å¤é€»è¾‘æ˜¯è¦ä¾èµ–äºprepare çš„redo logï¼Œå†åŠ ä¸Šbinlogæ¥æ¢å¤çš„ã€‚ï¼ˆå¦‚æœä½ å°è±¡æœ‰ç‚¹å„¿æ¨¡ç³Šäº†ï¼Œå¯ä»¥å†å›é¡¾ä¸‹<a href=\"https://time.geekbang.org/column/article/73161\">ç¬¬15ç¯‡æ–‡ç« </a>ä¸­çš„ç›¸å…³å†…å®¹ï¼‰ã€‚</p><p>æ¯ç§’ä¸€æ¬¡åå°è½®è¯¢åˆ·ç›˜ï¼Œå†åŠ ä¸Šå´©æºƒæ¢å¤è¿™ä¸ªé€»è¾‘ï¼ŒInnoDBå°±è®¤ä¸ºredo logåœ¨commitçš„æ—¶å€™å°±ä¸éœ€è¦fsyncäº†ï¼Œåªä¼šwriteåˆ°æ–‡ä»¶ç³»ç»Ÿçš„page cacheä¸­å°±å¤Ÿäº†ã€‚</p><p>é€šå¸¸æˆ‘ä»¬è¯´MySQLçš„â€œåŒ1â€é…ç½®ï¼ŒæŒ‡çš„å°±æ˜¯sync_binlogå’Œinnodb_flush_log_at_trx_commitéƒ½è®¾ç½®æˆ 1ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªäº‹åŠ¡å®Œæ•´æäº¤å‰ï¼Œéœ€è¦ç­‰å¾…ä¸¤æ¬¡åˆ·ç›˜ï¼Œä¸€æ¬¡æ˜¯redo logï¼ˆprepare é˜¶æ®µï¼‰ï¼Œä¸€æ¬¡æ˜¯binlogã€‚</p><p>è¿™æ—¶å€™ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ªç–‘é—®ï¼Œè¿™æ„å‘³ç€æˆ‘ä»MySQLçœ‹åˆ°çš„TPSæ˜¯æ¯ç§’ä¸¤ä¸‡çš„è¯ï¼Œæ¯ç§’å°±ä¼šå†™å››ä¸‡æ¬¡ç£ç›˜ã€‚ä½†æ˜¯ï¼Œæˆ‘ç”¨å·¥å…·æµ‹è¯•å‡ºæ¥ï¼Œç£ç›˜èƒ½åŠ›ä¹Ÿå°±ä¸¤ä¸‡å·¦å³ï¼Œæ€ä¹ˆèƒ½å®ç°ä¸¤ä¸‡çš„TPSï¼Ÿ</p><p>è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼Œå°±è¦ç”¨åˆ°ç»„æäº¤ï¼ˆgroup commitï¼‰æœºåˆ¶äº†ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘éœ€è¦å…ˆå’Œä½ ä»‹ç»æ—¥å¿—é€»è¾‘åºåˆ—å·ï¼ˆlog sequence numberï¼ŒLSNï¼‰çš„æ¦‚å¿µã€‚LSNæ˜¯å•è°ƒé€’å¢çš„ï¼Œç”¨æ¥å¯¹åº”redo logçš„ä¸€ä¸ªä¸ªå†™å…¥ç‚¹ã€‚æ¯æ¬¡å†™å…¥é•¿åº¦ä¸ºlengthçš„redo logï¼Œ LSNçš„å€¼å°±ä¼šåŠ ä¸Šlengthã€‚</p><p>LSNä¹Ÿä¼šå†™åˆ°InnoDBçš„æ•°æ®é¡µä¸­ï¼Œæ¥ç¡®ä¿æ•°æ®é¡µä¸ä¼šè¢«å¤šæ¬¡æ‰§è¡Œé‡å¤çš„redo logã€‚å…³äºLSNå’Œredo logã€checkpointçš„å…³ç³»ï¼Œæˆ‘ä¼šåœ¨åé¢çš„æ–‡ç« ä¸­è¯¦ç»†å±•å¼€ã€‚</p><p>å¦‚å›¾3æ‰€ç¤ºï¼Œæ˜¯ä¸‰ä¸ªå¹¶å‘äº‹åŠ¡(trx1, trx2, trx3)åœ¨prepare é˜¶æ®µï¼Œéƒ½å†™å®Œredo log bufferï¼ŒæŒä¹…åŒ–åˆ°ç£ç›˜çš„è¿‡ç¨‹ï¼Œå¯¹åº”çš„LSNåˆ†åˆ«æ˜¯50ã€120 å’Œ160ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/93/cc/933fdc052c6339de2aa3bf3f65b188cc.png?wh=1142*2171\" alt=\"\"></p><center><span class=\"reference\">å›¾3 redo log ç»„æäº¤</span></center><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ</p><ol>\n<li>\n<p>trx1æ˜¯ç¬¬ä¸€ä¸ªåˆ°è¾¾çš„ï¼Œä¼šè¢«é€‰ä¸ºè¿™ç»„çš„ leaderï¼›</p>\n</li>\n<li>\n<p>ç­‰trx1è¦å¼€å§‹å†™ç›˜çš„æ—¶å€™ï¼Œè¿™ä¸ªç»„é‡Œé¢å·²ç»æœ‰äº†ä¸‰ä¸ªäº‹åŠ¡ï¼Œè¿™æ—¶å€™LSNä¹Ÿå˜æˆäº†160ï¼›</p>\n</li>\n<li>\n<p>trx1å»å†™ç›˜çš„æ—¶å€™ï¼Œå¸¦çš„å°±æ˜¯LSN=160ï¼Œå› æ­¤ç­‰trx1è¿”å›æ—¶ï¼Œæ‰€æœ‰LSNå°äºç­‰äº160çš„redo logï¼Œéƒ½å·²ç»è¢«æŒä¹…åŒ–åˆ°ç£ç›˜ï¼›</p>\n</li>\n<li>\n<p>è¿™æ—¶å€™trx2å’Œtrx3å°±å¯ä»¥ç›´æ¥è¿”å›äº†ã€‚</p>\n</li>\n</ol><p>æ‰€ä»¥ï¼Œä¸€æ¬¡ç»„æäº¤é‡Œé¢ï¼Œç»„å‘˜è¶Šå¤šï¼ŒèŠ‚çº¦ç£ç›˜IOPSçš„æ•ˆæœè¶Šå¥½ã€‚ä½†å¦‚æœåªæœ‰å•çº¿ç¨‹å‹æµ‹ï¼Œé‚£å°±åªèƒ½è€è€å®å®åœ°ä¸€ä¸ªäº‹åŠ¡å¯¹åº”ä¸€æ¬¡æŒä¹…åŒ–æ“ä½œäº†ã€‚</p><p>åœ¨å¹¶å‘æ›´æ–°åœºæ™¯ä¸‹ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡å†™å®Œredo log bufferä»¥åï¼Œæ¥ä¸‹æ¥è¿™ä¸ªfsyncè¶Šæ™šè°ƒç”¨ï¼Œç»„å‘˜å¯èƒ½è¶Šå¤šï¼ŒèŠ‚çº¦IOPSçš„æ•ˆæœå°±è¶Šå¥½ã€‚</p><p>ä¸ºäº†è®©ä¸€æ¬¡fsyncå¸¦çš„ç»„å‘˜æ›´å¤šï¼ŒMySQLæœ‰ä¸€ä¸ªå¾ˆæœ‰è¶£çš„ä¼˜åŒ–ï¼šæ‹–æ—¶é—´ã€‚åœ¨ä»‹ç»ä¸¤é˜¶æ®µæäº¤çš„æ—¶å€™ï¼Œæˆ‘æ›¾ç»ç»™ä½ ç”»äº†ä¸€ä¸ªå›¾ï¼Œç°åœ¨æˆ‘æŠŠå®ƒæˆªè¿‡æ¥ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/98/51/98b3b4ff7b36d6d72e38029b86870551.png?wh=1142*856\" alt=\"\"></p><center><span class=\"reference\">å›¾4 ä¸¤é˜¶æ®µæäº¤</span></center><p>å›¾ä¸­ï¼Œæˆ‘æŠŠâ€œå†™binlogâ€å½“æˆä¸€ä¸ªåŠ¨ä½œã€‚ä½†å®é™…ä¸Šï¼Œå†™binlogæ˜¯åˆ†æˆä¸¤æ­¥çš„ï¼š</p><ol>\n<li>\n<p>å…ˆæŠŠbinlogä»binlog cacheä¸­å†™åˆ°ç£ç›˜ä¸Šçš„binlogæ–‡ä»¶ï¼›</p>\n</li>\n<li>\n<p>è°ƒç”¨fsyncæŒä¹…åŒ–ã€‚</p>\n</li>\n</ol><p>MySQLä¸ºäº†è®©ç»„æäº¤çš„æ•ˆæœæ›´å¥½ï¼ŒæŠŠredo logåšfsyncçš„æ—¶é—´æ‹–åˆ°äº†æ­¥éª¤1ä¹‹åã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢çš„å›¾å˜æˆäº†è¿™æ ·ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/5a/28/5ae7d074c34bc5bd55c82781de670c28.png?wh=1142*1522\" alt=\"\"></p><center><span class=\"reference\">å›¾5 ä¸¤é˜¶æ®µæäº¤ç»†åŒ–</span></center><p>è¿™ä¹ˆä¸€æ¥ï¼Œbinlogä¹Ÿå¯ä»¥ç»„æäº¤äº†ã€‚åœ¨æ‰§è¡Œå›¾5ä¸­ç¬¬4æ­¥æŠŠbinlog fsyncåˆ°ç£ç›˜æ—¶ï¼Œå¦‚æœæœ‰å¤šä¸ªäº‹åŠ¡çš„binlogå·²ç»å†™å®Œäº†ï¼Œä¹Ÿæ˜¯ä¸€èµ·æŒä¹…åŒ–çš„ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å‡å°‘IOPSçš„æ¶ˆè€—ã€‚</p><p>ä¸è¿‡é€šå¸¸æƒ…å†µä¸‹ç¬¬3æ­¥æ‰§è¡Œå¾—ä¼šå¾ˆå¿«ï¼Œæ‰€ä»¥binlogçš„writeå’Œfsyncé—´çš„é—´éš”æ—¶é—´çŸ­ï¼Œå¯¼è‡´èƒ½é›†åˆåˆ°ä¸€èµ·æŒä¹…åŒ–çš„binlogæ¯”è¾ƒå°‘ï¼Œå› æ­¤binlogçš„ç»„æäº¤çš„æ•ˆæœé€šå¸¸ä¸å¦‚redo logçš„æ•ˆæœé‚£ä¹ˆå¥½ã€‚</p><p>å¦‚æœä½ æƒ³æå‡binlogç»„æäº¤çš„æ•ˆæœï¼Œå¯ä»¥é€šè¿‡è®¾ç½® binlog_group_commit_sync_delay å’Œ binlog_group_commit_sync_no_delay_countæ¥å®ç°ã€‚</p><ol>\n<li>\n<p>binlog_group_commit_sync_delayå‚æ•°ï¼Œè¡¨ç¤ºå»¶è¿Ÿå¤šå°‘å¾®ç§’åæ‰è°ƒç”¨fsync;</p>\n</li>\n<li>\n<p>binlog_group_commit_sync_no_delay_countå‚æ•°ï¼Œè¡¨ç¤ºç´¯ç§¯å¤šå°‘æ¬¡ä»¥åæ‰è°ƒç”¨fsyncã€‚</p>\n</li>\n</ol><p>è¿™ä¸¤ä¸ªæ¡ä»¶æ˜¯æˆ–çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶å°±ä¼šè°ƒç”¨fsyncã€‚</p><p>æ‰€ä»¥ï¼Œå½“binlog_group_commit_sync_delayè®¾ç½®ä¸º0çš„æ—¶å€™ï¼Œbinlog_group_commit_sync_no_delay_countä¹Ÿæ— æ•ˆäº†ã€‚</p><p>ä¹‹å‰æœ‰åŒå­¦åœ¨è¯„è®ºåŒºé—®åˆ°ï¼ŒWALæœºåˆ¶æ˜¯å‡å°‘ç£ç›˜å†™ï¼Œå¯æ˜¯æ¯æ¬¡æäº¤äº‹åŠ¡éƒ½è¦å†™redo logå’Œbinlogï¼Œè¿™ç£ç›˜è¯»å†™æ¬¡æ•°ä¹Ÿæ²¡å˜å°‘å‘€ï¼Ÿ</p><p>ç°åœ¨ä½ å°±èƒ½ç†è§£äº†ï¼ŒWALæœºåˆ¶ä¸»è¦å¾—ç›Šäºä¸¤ä¸ªæ–¹é¢ï¼š</p><ol>\n<li>\n<p>redo log å’Œ binlogéƒ½æ˜¯é¡ºåºå†™ï¼Œç£ç›˜çš„é¡ºåºå†™æ¯”éšæœºå†™é€Ÿåº¦è¦å¿«ï¼›</p>\n</li>\n<li>\n<p>ç»„æäº¤æœºåˆ¶ï¼Œå¯ä»¥å¤§å¹…åº¦é™ä½ç£ç›˜çš„IOPSæ¶ˆè€—ã€‚</p>\n</li>\n</ol><p>åˆ†æåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼š<strong>å¦‚æœä½ çš„MySQLç°åœ¨å‡ºç°äº†æ€§èƒ½ç“¶é¢ˆï¼Œè€Œä¸”ç“¶é¢ˆåœ¨IOä¸Šï¼Œå¯ä»¥é€šè¿‡å“ªäº›æ–¹æ³•æ¥æå‡æ€§èƒ½å‘¢ï¼Ÿ</strong></p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ï¼š</p><ol>\n<li>\n<p>è®¾ç½® binlog_group_commit_sync_delay å’Œ binlog_group_commit_sync_no_delay_countå‚æ•°ï¼Œå‡å°‘binlogçš„å†™ç›˜æ¬¡æ•°ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯åŸºäºâ€œé¢å¤–çš„æ•…æ„ç­‰å¾…â€æ¥å®ç°çš„ï¼Œå› æ­¤å¯èƒ½ä¼šå¢åŠ è¯­å¥çš„å“åº”æ—¶é—´ï¼Œä½†æ²¡æœ‰ä¸¢å¤±æ•°æ®çš„é£é™©ã€‚</p>\n</li>\n<li>\n<p>å°†sync_binlog è®¾ç½®ä¸ºå¤§äº1çš„å€¼ï¼ˆæ¯”è¾ƒå¸¸è§æ˜¯100~1000ï¼‰ã€‚è¿™æ ·åšçš„é£é™©æ˜¯ï¼Œä¸»æœºæ‰ç”µæ—¶ä¼šä¸¢binlogæ—¥å¿—ã€‚</p>\n</li>\n<li>\n<p>å°†innodb_flush_log_at_trx_commitè®¾ç½®ä¸º2ã€‚è¿™æ ·åšçš„é£é™©æ˜¯ï¼Œä¸»æœºæ‰ç”µçš„æ—¶å€™ä¼šä¸¢æ•°æ®ã€‚</p>\n</li>\n</ol><p>æˆ‘ä¸å»ºè®®ä½ æŠŠinnodb_flush_log_at_trx_commit è®¾ç½®æˆ0ã€‚å› ä¸ºæŠŠè¿™ä¸ªå‚æ•°è®¾ç½®æˆ0ï¼Œè¡¨ç¤ºredo logåªä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™æ ·çš„è¯MySQLæœ¬èº«å¼‚å¸¸é‡å¯ä¹Ÿä¼šä¸¢æ•°æ®ï¼Œé£é™©å¤ªå¤§ã€‚è€Œredo logå†™åˆ°æ–‡ä»¶ç³»ç»Ÿçš„page cacheçš„é€Ÿåº¦ä¹Ÿæ˜¯å¾ˆå¿«çš„ï¼Œæ‰€ä»¥å°†è¿™ä¸ªå‚æ•°è®¾ç½®æˆ2è·Ÿè®¾ç½®æˆ0å…¶å®æ€§èƒ½å·®ä¸å¤šï¼Œä½†è¿™æ ·åšMySQLå¼‚å¸¸é‡å¯æ—¶å°±ä¸ä¼šä¸¢æ•°æ®äº†ï¼Œç›¸æ¯”ä¹‹ä¸‹é£é™©ä¼šæ›´å°ã€‚</p><h1>å°ç»“</h1><p>åœ¨ä¸“æ çš„<a href=\"https://time.geekbang.org/column/article/68633\">ç¬¬2ç¯‡</a>å’Œ<a href=\"https://time.geekbang.org/column/article/73161\">ç¬¬15ç¯‡</a>æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ åˆ†æäº†ï¼Œå¦‚æœredo logå’Œbinlogæ˜¯å®Œæ•´çš„ï¼ŒMySQLæ˜¯å¦‚ä½•ä¿è¯crash-safeçš„ã€‚ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ç€é‡å’Œä½ ä»‹ç»çš„æ˜¯MySQLæ˜¯â€œæ€ä¹ˆä¿è¯redo logå’Œbinlogæ˜¯å®Œæ•´çš„â€ã€‚</p><p>å¸Œæœ›è¿™ä¸‰ç¯‡æ–‡ç« ä¸²èµ·æ¥çš„å†…å®¹ï¼Œèƒ½å¤Ÿè®©ä½ å¯¹crash-safeè¿™ä¸ªæ¦‚å¿µæœ‰æ›´æ¸…æ™°çš„ç†è§£ã€‚</p><p>ä¹‹å‰çš„ç¬¬15ç¯‡ç­”ç–‘æ–‡ç« å‘å¸ƒä¹‹åï¼Œæœ‰åŒå­¦ç»§ç»­ç•™è¨€é—®åˆ°äº†ä¸€äº›è·Ÿæ—¥å¿—ç›¸å…³çš„é—®é¢˜ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿ä½ å›é¡¾ã€å­¦ä¹ ï¼Œæˆ‘å†é›†ä¸­å›ç­”ä¸€æ¬¡è¿™äº›é—®é¢˜ã€‚</p><p><strong>é—®é¢˜1ï¼š</strong>æ‰§è¡Œä¸€ä¸ªupdateè¯­å¥ä»¥åï¼Œæˆ‘å†å»æ‰§è¡Œhexdumpå‘½ä»¤ç›´æ¥æŸ¥çœ‹ibdæ–‡ä»¶å†…å®¹ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰çœ‹åˆ°æ•°æ®æœ‰æ”¹å˜å‘¢ï¼Ÿ</p><p>å›ç­”ï¼šè¿™å¯èƒ½æ˜¯å› ä¸ºWALæœºåˆ¶çš„åŸå› ã€‚updateè¯­å¥æ‰§è¡Œå®Œæˆåï¼ŒInnoDBåªä¿è¯å†™å®Œäº†redo logã€å†…å­˜ï¼Œå¯èƒ½è¿˜æ²¡æ¥å¾—åŠå°†æ•°æ®å†™åˆ°ç£ç›˜ã€‚</p><p><strong>é—®é¢˜2ï¼š</strong>ä¸ºä»€ä¹ˆbinlog cacheæ˜¯æ¯ä¸ªçº¿ç¨‹è‡ªå·±ç»´æŠ¤çš„ï¼Œè€Œredo log bufferæ˜¯å…¨å±€å…±ç”¨çš„ï¼Ÿ</p><p>å›ç­”ï¼šMySQLè¿™ä¹ˆè®¾è®¡çš„ä¸»è¦åŸå› æ˜¯ï¼Œbinlogæ˜¯ä¸èƒ½â€œè¢«æ‰“æ–­çš„â€ã€‚ä¸€ä¸ªäº‹åŠ¡çš„binlogå¿…é¡»è¿ç»­å†™ï¼Œå› æ­¤è¦æ•´ä¸ªäº‹åŠ¡å®Œæˆåï¼Œå†ä¸€èµ·å†™åˆ°æ–‡ä»¶é‡Œã€‚</p><p>è€Œredo logå¹¶æ²¡æœ‰è¿™ä¸ªè¦æ±‚ï¼Œä¸­é—´æœ‰ç”Ÿæˆçš„æ—¥å¿—å¯ä»¥å†™åˆ°redo log bufferä¸­ã€‚redo log bufferä¸­çš„å†…å®¹è¿˜èƒ½â€œæ­ä¾¿è½¦â€ï¼Œå…¶ä»–äº‹åŠ¡æäº¤çš„æ—¶å€™å¯ä»¥è¢«ä¸€èµ·å†™åˆ°ç£ç›˜ä¸­ã€‚</p><p><strong>é—®é¢˜3ï¼š</strong>äº‹åŠ¡æ‰§è¡ŒæœŸé—´ï¼Œè¿˜æ²¡åˆ°æäº¤é˜¶æ®µï¼Œå¦‚æœå‘ç”Ÿcrashçš„è¯ï¼Œredo logè‚¯å®šä¸¢äº†ï¼Œè¿™ä¼šä¸ä¼šå¯¼è‡´ä¸»å¤‡ä¸ä¸€è‡´å‘¢ï¼Ÿ</p><p>å›ç­”ï¼šä¸ä¼šã€‚å› ä¸ºè¿™æ—¶å€™binlog ä¹Ÿè¿˜åœ¨binlog cacheé‡Œï¼Œæ²¡å‘ç»™å¤‡åº“ã€‚crashä»¥åredo logå’Œbinlogéƒ½æ²¡æœ‰äº†ï¼Œä»ä¸šåŠ¡è§’åº¦çœ‹è¿™ä¸ªäº‹åŠ¡ä¹Ÿæ²¡æœ‰æäº¤ï¼Œæ‰€ä»¥æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚</p><p><strong>é—®é¢˜4ï¼š</strong>å¦‚æœbinlogå†™å®Œç›˜ä»¥åå‘ç”Ÿcrashï¼Œè¿™æ—¶å€™è¿˜æ²¡ç»™å®¢æˆ·ç«¯ç­”å¤å°±é‡å¯äº†ã€‚ç­‰å®¢æˆ·ç«¯å†é‡è¿è¿›æ¥ï¼Œå‘ç°äº‹åŠ¡å·²ç»æäº¤æˆåŠŸäº†ï¼Œè¿™æ˜¯ä¸æ˜¯bugï¼Ÿ</p><p>å›ç­”ï¼šä¸æ˜¯ã€‚</p><p>ä½ å¯ä»¥è®¾æƒ³ä¸€ä¸‹æ›´æç«¯çš„æƒ…å†µï¼Œæ•´ä¸ªäº‹åŠ¡éƒ½æäº¤æˆåŠŸäº†ï¼Œredo log commitå®Œæˆäº†ï¼Œå¤‡åº“ä¹Ÿæ”¶åˆ°binlogå¹¶æ‰§è¡Œäº†ã€‚ä½†æ˜¯ä¸»åº“å’Œå®¢æˆ·ç«¯ç½‘ç»œæ–­å¼€äº†ï¼Œå¯¼è‡´äº‹åŠ¡æˆåŠŸçš„åŒ…è¿”å›ä¸å›å»ï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯ä¹Ÿä¼šæ”¶åˆ°â€œç½‘ç»œæ–­å¼€â€çš„å¼‚å¸¸ã€‚è¿™ç§ä¹Ÿåªèƒ½ç®—æ˜¯äº‹åŠ¡æˆåŠŸçš„ï¼Œä¸èƒ½è®¤ä¸ºæ˜¯bugã€‚</p><p>å®é™…ä¸Šæ•°æ®åº“çš„crash-safeä¿è¯çš„æ˜¯ï¼š</p><ol>\n<li>\n<p>å¦‚æœå®¢æˆ·ç«¯æ”¶åˆ°äº‹åŠ¡æˆåŠŸçš„æ¶ˆæ¯ï¼Œäº‹åŠ¡å°±ä¸€å®šæŒä¹…åŒ–äº†ï¼›</p>\n</li>\n<li>\n<p>å¦‚æœå®¢æˆ·ç«¯æ”¶åˆ°äº‹åŠ¡å¤±è´¥ï¼ˆæ¯”å¦‚ä¸»é”®å†²çªã€å›æ»šç­‰ï¼‰çš„æ¶ˆæ¯ï¼Œäº‹åŠ¡å°±ä¸€å®šå¤±è´¥äº†ï¼›</p>\n</li>\n<li>\n<p>å¦‚æœå®¢æˆ·ç«¯æ”¶åˆ°â€œæ‰§è¡Œå¼‚å¸¸â€çš„æ¶ˆæ¯ï¼Œåº”ç”¨éœ€è¦é‡è¿åé€šè¿‡æŸ¥è¯¢å½“å‰çŠ¶æ€æ¥ç»§ç»­åç»­çš„é€»è¾‘ã€‚æ­¤æ—¶æ•°æ®åº“åªéœ€è¦ä¿è¯å†…éƒ¨ï¼ˆæ•°æ®å’Œæ—¥å¿—ä¹‹é—´ï¼Œä¸»åº“å’Œå¤‡åº“ä¹‹é—´ï¼‰ä¸€è‡´å°±å¯ä»¥äº†ã€‚</p>\n</li>\n</ol><p>æœ€åï¼Œåˆåˆ°äº†è¯¾åé—®é¢˜æ—¶é—´ã€‚</p><p>ä»Šå¤©æˆ‘ç•™ç»™ä½ çš„æ€è€ƒé¢˜æ˜¯ï¼šä½ çš„ç”Ÿäº§åº“è®¾ç½®çš„æ˜¯â€œåŒ1â€å—ï¼Ÿ å¦‚æœå¹³æ—¶æ˜¯çš„è¯ï¼Œä½ æœ‰åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹æ”¹æˆè¿‡â€œéåŒ1â€å—ï¼Ÿä½ çš„è¿™ä¸ªæ“ä½œåˆæ˜¯åŸºäºä»€ä¹ˆå†³å®šçš„ï¼Ÿ</p><p>å¦å¤–ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“è¿™äº›è®¾ç½®å¯èƒ½æœ‰æŸï¼Œå¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œä½ çš„æ­¢æŸæ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„ç†è§£æˆ–è€…ç»éªŒå†™åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾é€‰å–æœ‰è¶£çš„è¯„è®ºå’Œä½ ä¸€èµ·åˆ†äº«å’Œåˆ†æã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>æˆ‘åœ¨ä¸Šç¯‡æ–‡ç« æœ€åï¼Œæƒ³è¦ä½ åˆ†äº«çš„æ˜¯çº¿ä¸Šâ€œæ•‘ç«â€çš„ç»éªŒã€‚</p><p>@Long åŒå­¦ï¼Œåœ¨ç•™è¨€ä¸­æåˆ°äº†å‡ ä¸ªå¾ˆå¥½çš„åœºæ™¯ã€‚</p><ul>\n<li>\n<p>å…¶ä¸­ç¬¬3ä¸ªé—®é¢˜ï¼Œâ€œå¦‚æœä¸€ä¸ªæ•°æ®åº“æ˜¯è¢«å®¢æˆ·ç«¯çš„å‹åŠ›æ‰“æ»¡å¯¼è‡´æ— æ³•å“åº”çš„ï¼Œé‡å¯æ•°æ®åº“æ˜¯æ²¡ç”¨çš„ã€‚â€ï¼Œè¯´æ˜ä»–å¾ˆå¥½åœ°æ€è€ƒäº†ã€‚<br>\nè¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºé‡å¯ä¹‹åï¼Œä¸šåŠ¡è¯·æ±‚è¿˜ä¼šå†å‘ã€‚è€Œä¸”ç”±äºæ˜¯é‡å¯ï¼Œbuffer poolè¢«æ¸…ç©ºï¼Œå¯èƒ½ä¼šå¯¼è‡´è¯­å¥æ‰§è¡Œå¾—æ›´æ…¢ã€‚</p>\n</li>\n<li>\n<p>ä»–æåˆ°çš„ç¬¬4ä¸ªé—®é¢˜ä¹Ÿå¾ˆå…¸å‹ã€‚æœ‰æ—¶å€™ä¸€ä¸ªè¡¨ä¸Šä¼šå‡ºç°å¤šä¸ªå•å­—æ®µç´¢å¼•ï¼ˆè€Œä¸”å¾€å¾€è¿™æ˜¯å› ä¸ºè¿ç»´å·¥ç¨‹å¸ˆå¯¹ç´¢å¼•åŸç†ä¸å¤Ÿæ¸…æ™°åšçš„è®¾è®¡ï¼‰ï¼Œè¿™æ ·å°±å¯èƒ½å‡ºç°ä¼˜åŒ–å™¨é€‰æ‹©ç´¢å¼•åˆå¹¶ç®—æ³•çš„ç°è±¡ã€‚ä½†å®é™…ä¸Šï¼Œç´¢å¼•åˆå¹¶ç®—æ³•çš„æ•ˆç‡å¹¶ä¸å¥½ã€‚è€Œé€šè¿‡å°†å…¶ä¸­çš„ä¸€ä¸ªç´¢å¼•æ”¹æˆè”åˆç´¢å¼•çš„æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åº”å¯¹æ–¹æ¡ˆã€‚</p>\n</li>\n</ul><p>è¿˜æœ‰å…¶ä»–å‡ ä¸ªåŒå­¦æåˆ°çš„é—®é¢˜åœºæ™¯ï¼Œä¹Ÿå¾ˆå¥½ï¼Œå¾ˆå€¼å¾—ä½ ä¸€çœ‹ã€‚</p><blockquote>\n<p>@Max åŒå­¦æåˆ°ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼šå®¢æˆ·ç«¯ç¨‹åºçš„è¿æ¥å™¨ï¼Œè¿æ¥å®Œæˆåä¼šåšä¸€äº›è¯¸å¦‚show columnsçš„æ“ä½œï¼Œåœ¨çŸ­è¿æ¥æ¨¡å¼ä¸‹è¿™ä¸ªå½±å“å°±éå¸¸å¤§äº†ã€‚<br>\nè¿™ä¸ªæé†’æˆ‘ä»¬ï¼Œåœ¨reviewé¡¹ç›®çš„æ—¶å€™ï¼Œä¸æ­¢è¦reviewæˆ‘ä»¬è‡ªå·±ä¸šåŠ¡çš„ä»£ç ï¼Œä¹Ÿè¦reviewè¿æ¥å™¨çš„è¡Œä¸ºã€‚ä¸€èˆ¬åšæ³•å°±æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒï¼ŒæŠŠgeneral_logæ‰“å¼€ï¼Œç”¨ä¸šåŠ¡è¡Œä¸ºè§¦å‘è¿æ¥ï¼Œç„¶åé€šè¿‡general logåˆ†æè¿æ¥å™¨çš„è¡Œä¸ºã€‚</p>\n</blockquote><blockquote>\n<p>@Manjusaka åŒå­¦çš„ç•™è¨€ä¸­ï¼Œç¬¬äºŒç‚¹æå¾—éå¸¸å¥½ï¼šå¦‚æœä½ çš„æ•°æ®åº“è¯·æ±‚æ¨¡å¼ç›´æ¥å¯¹åº”äºå®¢æˆ·è¯·æ±‚ï¼Œè¿™å¾€å¾€æ˜¯ä¸€ä¸ªå±é™©çš„è®¾è®¡ã€‚å› ä¸ºå®¢æˆ·è¡Œä¸ºä¸å¯æ§ï¼Œå¯èƒ½çªç„¶å› ä¸ºä½ ä»¬å…¬å¸çš„ä¸€ä¸ªè¿è¥æ¨å¹¿ï¼Œå‹åŠ›æš´å¢ï¼Œè¿™æ ·å¾ˆå®¹æ˜“æŠŠæ•°æ®åº“æ‰“æŒ‚ã€‚<br>\nåœ¨è®¾è®¡æ¨¡å‹é‡Œé¢è®¾è®¡ä¸€å±‚ï¼Œä¸“é—¨è´Ÿè´£ç®¡ç†è¯·æ±‚å’Œæ•°æ®åº“æœåŠ¡èµ„æºï¼Œå¯¹äºæ¯”è¾ƒé‡è¦å’Œå¤§æµé‡çš„ä¸šåŠ¡ï¼Œæ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡æ–¹å‘ã€‚</p>\n</blockquote><blockquote>\n<p>@Vincent åŒå­¦æäº†ä¸€ä¸ªå¥½é—®é¢˜ï¼Œç”¨æ–‡ä¸­æåˆ°çš„DDLæ–¹æ¡ˆï¼Œä¼šå¯¼è‡´binlogé‡Œé¢å°‘äº†è¿™ä¸ªDDLè¯­å¥ï¼Œåç»­å½±å“å¤‡ä»½æ¢å¤çš„åŠŸèƒ½ã€‚ç”±äºéœ€è¦å¦ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼ˆä¸»å¤‡åŒæ­¥åè®®ï¼‰ï¼Œæˆ‘æ”¾åœ¨åé¢çš„æ–‡ç« ä¸­è¯´æ˜ã€‚</p>\n</blockquote><p></p>","neighbors":{"left":{"article_title":"22 | MySQLæœ‰å“ªäº›â€œé¥®é¸©æ­¢æ¸´â€æé«˜æ€§èƒ½çš„æ–¹æ³•ï¼Ÿ","id":75746},"right":{"article_title":"24 | MySQLæ˜¯æ€ä¹ˆä¿è¯ä¸»å¤‡ä¸€è‡´çš„ï¼Ÿ","id":76446}},"comments":[{"had_liked":false,"id":56870,"user_name":"é”…å­","can_delete":false,"product_type":"c1","uid":1323048,"ip_address":"","ucode":"4A9143AFB07FF2","user_header":"https://static001.geekbang.org/account/avatar/00/14/30/28/6e019a7a.jpg","comment_is_top":true,"comment_ctime":1546571347,"is_pvip":false,"replies":[{"id":"20527","content":"ä½ çœ‹åˆ°çš„â€œbinlogçš„è®°å½•â€ï¼Œä¹Ÿæ˜¯ä»page cacheè¯»çš„å“¦ã€‚<br>Page cacheæ˜¯æ“ä½œç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ğŸ˜„<br><br>å¥½é—®é¢˜","user_name":"ä½œè€…å›å¤","comment_id":56870,"uid":"1264162","ip_address":"","utype":1,"ctime":1546573295,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":15,"race_medal":0,"score":"9.2233727213011005e+18","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸€ä¸ªç–‘é—®ï¼šå½“è®¾ç½®sync_binlog=0æ—¶ï¼Œæ¯æ¬¡commitéƒ½åªæ—¶writeåˆ°page cacheï¼Œå¹¶ä¸ä¼šfsyncã€‚ä½†æ˜¯åšå®éªŒæ—¶binlogæ–‡ä»¶ä¸­è¿˜æ˜¯ä¼šæœ‰è®°å½•ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿæ˜¯ä¸æ˜¯åå°çº¿ç¨‹æ¯ç§’ä¸€æ¬¡çš„è½®è¯¢ä¹Ÿä¼šå°†binlog cacheæŒä¹…åŒ–åˆ°ç£ç›˜ï¼Ÿè¿˜æ˜¯æœ‰å…¶ä»–çš„å‚æ•°æ§åˆ¶å‘¢ï¼Ÿ","like_count":160,"discussions":[{"author":{"id":2250622,"avatar":"https://static001.geekbang.org/account/avatar/00/22/57/7e/453a0db7.jpg","nickname":"å¤§æ¢§æ¡æ ‘","note":"","ucode":"1E910FF0194159","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561152,"discussion_content":"ç£ç›˜ï¼šå®é™…ä¸Šæˆ‘å•¥ä¹Ÿæ²¡åšï¼Œä½ ä»¬éƒ½è¢«æˆ‘éª—äº†","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1649562248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008468,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/63/54/c9475cd0.jpg","nickname":"cz","note":"","ucode":"96385190176F78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391448,"discussion_content":"ç‰›ï¼Œ æ–‡ä»¶åœ¨ OS page cache å±‚å…±äº«äº†ï¼Œ æƒ³è¯»å–åŸå§‹ç£ç›˜æ–‡ä»¶ï¼Œè¿˜è¦ç”¨ç‰¹æ®Šçš„option open file","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1630467021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1692320,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d2/a0/c8714628.jpg","nickname":"ç‹¬ä¸€æ— äºŒ","note":"","ucode":"A7DE0EA2BD8FE3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60978,"discussion_content":"å¥½é—®é¢˜ï¼Œè°¢è°¢ï¼Œä¸ç„¶æˆ‘è¿˜ä»¥ä¸ºbinlogå†™çš„å¤ªå¿«äº†ï¼Œæˆ‘è·Ÿä¸ä¸Šçš„åŸå› ï¼Œéš¾æ€ªæ¯æ¬¡éƒ½èƒ½çœ‹åˆ°binlogæ›´æ–°çš„æ“ä½œ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1574768093,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1692320,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d2/a0/c8714628.jpg","nickname":"ç‹¬ä¸€æ— äºŒ","note":"","ucode":"A7DE0EA2BD8FE3","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":577917,"discussion_content":"å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656411335,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":60978,"ip_address":""},"score":577917,"extra":""}]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435289,"discussion_content":"ä½ çœ‹åˆ°çš„â€œbinlogçš„è®°å½•â€ï¼Œä¹Ÿæ˜¯ä»page cacheè¯»çš„å“¦ã€‚\nPage cacheæ˜¯æ“ä½œç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ğŸ˜„\n\nå¥½é—®é¢˜","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1546573295,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1788647,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/4a/e7/6c16af5d.jpg","nickname":"æ±‰æ±Ÿ","note":"","ucode":"01622D984B8F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346570,"discussion_content":"666","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1611995464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2249670,"avatar":"","nickname":"mofee888","note":"","ucode":"F1FB6F68DCF802","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342814,"discussion_content":"Page cache å°±ä¸ä¼šå†™ç£ç›˜äº†å—ï¼Ÿè¿˜æ˜¯ä¼šå†™ç£ç›˜çš„å§ï¼Ÿåªæ˜¯å†™ç£ç›˜çš„æ—¶æœºäº¤ç»™æ“ä½œç³»ç»Ÿè‡ªå·±å†³å®šäº†è€Œå·²ï¼Œå¦‚æœä½ çš„å†…å­˜ç´§å¼ ä¹Ÿå¯èƒ½é©¬ä¸Šå†™å…¥ç£ç›˜ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1610845724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1788258,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/49/62/25de50e4.jpg","nickname":"ç™½æ–‡å¬","note":"","ucode":"F3C538231BF5D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292253,"discussion_content":"è¿™ä¸ªé—®é¢˜ç‰›é€¼,åŸæ¥å¼€åˆ°çš„ä¸æ˜¯çœŸæ­£æŒä¹…åŒ–åˆ°ç£ç›˜çš„å†…å­˜,æ˜¯å’Œpage cacheä¸€ä½“çš„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1595156145,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1593957,"avatar":"https://static001.geekbang.org/account/avatar/00/18/52/65/320eccb3.jpg","nickname":"ç‹æ–¯æ‹‰","note":"","ucode":"D00DD3CE432189","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5576,"discussion_content":"é‚£æ˜¯ä¸æ˜¯è¿™ç§æƒ…å†µå®•æœºå°±ä¼šä¸¢æ‰æ‰€æœ‰çš„binlogï¼Œ\nå¦‚æœæœåŠ¡å™¨æ­£å¸¸çš„å…³é—­ï¼Œä¼šåœ¨å…³é—­å‰è°ƒç”¨fsyncçš„å§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566358894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1308783,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/6f/080973cf.jpg","nickname":"Edward","note":"","ucode":"10FAADF92D05F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1593957,"avatar":"https://static001.geekbang.org/account/avatar/00/18/52/65/320eccb3.jpg","nickname":"ç‹æ–¯æ‹‰","note":"","ucode":"D00DD3CE432189","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":11891,"discussion_content":"è¿™ç§æƒ…å†µï¼Œå¦‚æœæ˜¯MySQLå¼‚å¸¸å…³é—­ä¸ä¼šä¸¢æ•°æ®ï¼Œå¦‚æœæ˜¯ä¸»æœºæ‰ç”µä¼šä¸¢æ•°æ®ã€‚MySQLæ­£å¸¸å…³é—­å‰ä¼šè°ƒç”¨fsyncæŒä¹…åŒ–ï¼Œä¸ä¼šä¸¢æ•°æ®","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1568441342,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5576,"ip_address":""},"score":11891,"extra":""},{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1308783,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/6f/080973cf.jpg","nickname":"Edward","note":"","ucode":"10FAADF92D05F4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577918,"discussion_content":"mysqlå¼‚å¸¸å…³é—­è°ƒä¸äº†fsync  ä½†æ˜¯æ•°æ®è¿˜æ˜¯åœ¨æ“ä½œç³»ç»Ÿçš„cacheä¸­, ä¹Ÿä¸ä¼šä¸¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656411393,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":11891,"ip_address":""},"score":577918,"extra":""}]},{"author":{"id":1010446,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/6b/0e/f4d5da3f.jpg","nickname":"helin","note":"","ucode":"08A5E56B0B810C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":563888,"discussion_content":"linux os æœ¬èº«ä¹Ÿä¼šæœ‰pdflushå®šæ—¶åˆ·æ–°page cacheåˆ°disk","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650104782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1140175,"avatar":"https://static001.geekbang.org/account/avatar/00/11/65/cf/326c0eea.jpg","nickname":"x-rayîŒº","note":"","ucode":"8363F0C4D0AC0B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325463,"discussion_content":"è¿™ä¸ªé—®é¢˜å‰å®³äº†ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605325153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1314724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/a4/0b49469f.jpg","nickname":"æœ¨å­00","note":"","ucode":"8F78CA722EB29B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310924,"discussion_content":"è®¾ç½®sync_binlog=0ï¼Œbinlogæ–‡ä»¶ä¸­çš„è®°å½•æ˜¯page cache ä¸­çš„ï¼Ÿè¿™æ ·çš„è¯ä¸»ä»åŒæ­¥ï¼Œæ˜¯æ€ä¹ˆåŒæ­¥çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602135004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274615,"avatar":"","nickname":"15652790052","note":"","ucode":"8A15D673C16A8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5438,"discussion_content":"å¯ä»¥è£¸è¯»ç£ç›˜ï¼Œè·³è¿‡æ–‡ä»¶ç³»ç»Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566268979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56863,"user_name":"WilliamX","can_delete":false,"product_type":"c1","uid":1295476,"ip_address":"","ucode":"E915091A891873","user_header":"https://static001.geekbang.org/account/avatar/00/13/c4/74/27cf551a.jpg","comment_is_top":false,"comment_ctime":1546570221,"is_pvip":false,"replies":[{"id":"20521","content":"å—¯ï¼Œè¿™ä¸ªè§£é‡Šä¹Ÿå¾ˆå¥½ã€‚ğŸ‘ğŸ¿","user_name":"ä½œè€…å›å¤","comment_id":56863,"uid":"1264162","ip_address":"","utype":1,"ctime":1546571101,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":7,"race_medal":0,"score":"607136958957","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆ binlog cache æ˜¯æ¯ä¸ªçº¿ç¨‹è‡ªå·±ç»´æŠ¤çš„ï¼Œè€Œ redo log buffer æ˜¯å…¨å±€å…±ç”¨çš„ï¼Ÿ<br>è¿™ä¸ªé—®é¢˜ï¼Œæ„Ÿè§‰è¿˜æœ‰ä¸€ç‚¹ï¼Œbinlogå­˜å‚¨æ˜¯ä»¥statementæˆ–è€…rowæ ¼å¼å­˜å‚¨çš„ï¼Œè€Œredo logæ˜¯ä»¥pageé¡µæ ¼å¼å­˜å‚¨çš„ã€‚pageæ ¼å¼ï¼Œå¤©ç”Ÿå°±æ˜¯å…±æœ‰çš„ï¼Œè€Œrowæ ¼å¼ï¼Œåªè·Ÿå½“å‰äº‹åŠ¡ç›¸å…³","like_count":142,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435285,"discussion_content":"å—¯ï¼Œè¿™ä¸ªè§£é‡Šä¹Ÿå¾ˆå¥½ã€‚ğŸ‘ğŸ¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546571101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243369,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f8/e9/f16a536b.jpg","nickname":"æå®¢-ç»å½±","note":"","ucode":"D302CE68123E74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128526,"discussion_content":"æˆ‘è·Ÿè¿™ä½åŒå­¦ä¸€æ ·ï¼Œåœ¨è¿™é‡Œè”ç³»åˆ°binlogçš„æ ¼å¼ï¼Œstatementè®°å½•çš„æ˜¯æ›´æ–°çš„SQLï¼Œä½†æ˜¯è¦å†™ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸­æ–­ï¼Œè¦ä¸åŒæ­¥åˆ°ä»åº“æ— æ³•æ¢å¤ä¸€æ ·çš„æ•°æ®å†…å®¹","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1578647419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1243369,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f8/e9/f16a536b.jpg","nickname":"æå®¢-ç»å½±","note":"","ucode":"D302CE68123E74","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589759,"discussion_content":"çœŸæ£’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665303485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":128526,"ip_address":"é™•è¥¿"},"score":589759,"extra":""}]},{"author":{"id":2945508,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/kTIwKz8eeicPsWibiavOkCnhfys2HkhLFmNKN7hV3ax1GNsjs8Ss2BlH0ekelxFibZz4C3cy1R1YcEMopJhXCghqyQ/132","nickname":"Geek_c22ad7","note":"","ucode":"6A3ACF366C02CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556976,"discussion_content":"redo log ä¸­é—´æ’å…¥å…¶ä»–çš„redo logä¸ä¹Ÿæ˜¯ä¼šé€ æˆç»“æœå¾—æ··ä¹±å—ï¼Ÿ ä¾‹å¦‚ä¸€ä¸ªredo log Aä»¤a=1ï¼Œredo log Bä»¤a=2ï¼Œæœ¬æ¥Båº”è¯¥åœ¨Aåè¾¹ï¼Œæœ€ç»ˆç»“æœa=2ï¼Œç»“æœAè¢«ä¸­æ–­äº†ï¼ŒBè·‘åˆ°Aå‰é¢ï¼Œæœ€ç»ˆç»“æœa=1ï¼Œç»“æœå°±ä¸å¯¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647592456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1780797,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2c/3d/0bd58aa4.jpg","nickname":"Em","note":"","ucode":"32012A5C603C8A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2945508,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/kTIwKz8eeicPsWibiavOkCnhfys2HkhLFmNKN7hV3ax1GNsjs8Ss2BlH0ekelxFibZz4C3cy1R1YcEMopJhXCghqyQ/132","nickname":"Geek_c22ad7","note":"","ucode":"6A3ACF366C02CC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":577919,"discussion_content":"ä½ è¿™æ˜¯å¯¹åŒä¸€è¡Œæ•°æ®åŒä¸€ä¸ªå­—æ®µä¿®æ”¹äº†å§,  è¿™åœ¨ä¸Šé¢é”çš„é‚£ä¸€å…³å°±è¿‡ä¸äº†      æ€ä¹ˆä¼šèµ°åˆ°è¿™é‡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656411885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":556976,"ip_address":""},"score":577919,"extra":""}]},{"author":{"id":1851970,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/42/42/2a04ada9.jpg","nickname":"æ¯›å°æ ‘","note":"","ucode":"E47DC07CE4959E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534796,"discussion_content":"è¯„è®ºåŒºéƒ½æ˜¯å¤©æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638279549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1731047,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/GmtqEx7x5hagZtXbd8Xs8ocUuHHLGIgiaqTwTcibPnpla1PVTbed2Ax7ZfzCjN2Qpeyao6ogq7L3icLzSB3vY1rlg/132","nickname":"Chanson","note":"","ucode":"74B3B180B4B953","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":298783,"discussion_content":"æ£’ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597398633,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63987,"user_name":"alias cd=rm -rf","can_delete":false,"product_type":"c1","uid":1318325,"ip_address":"","ucode":"E7B27D76305B75","user_header":"https://static001.geekbang.org/account/avatar/00/14/1d/b5/971261fd.jpg","comment_is_top":false,"comment_ctime":1548637420,"is_pvip":false,"replies":[{"id":"22644","content":"ä¸æ˜¯ã€‚<br><br>è¯´æ˜ä¸€ä¸‹å“ˆï¼Œæ‰€è°“çš„ redo log prepareï¼Œæ˜¯â€œå½“å‰äº‹åŠ¡æäº¤â€çš„ä¸€ä¸ªé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨äº‹åŠ¡Aæäº¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰ä¼šèµ°åˆ°äº‹åŠ¡Açš„redo log prepareè¿™ä¸ªé˜¶æ®µã€‚<br><br>äº‹åŠ¡Aåœ¨æäº¤å‰ï¼Œæœ‰ä¸€éƒ¨åˆ†redo logè¢«äº‹åŠ¡Bæå‰æŒä¹…åŒ–ï¼Œä½†æ˜¯äº‹åŠ¡Aè¿˜æ²¡æœ‰è¿›å…¥æäº¤é˜¶æ®µï¼Œæ˜¯æ— æ‰€è°“â€œredo log prepareâ€çš„ã€‚<br><br>å¥½é—®é¢˜<br><br>","user_name":"ä½œè€…å›å¤","comment_id":63987,"uid":"1264162","ip_address":"","utype":1,"ctime":1548644158,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":16,"race_medal":0,"score":"495469876460","product_id":100020801,"comment_content":"äº‹åŠ¡Aæ˜¯å½“å‰äº‹åŠ¡ï¼Œè¿™æ—¶å€™äº‹åŠ¡Bæäº¤äº†ã€‚äº‹åŠ¡Bçš„redologæŒä¹…åŒ–æ—¶å€™ï¼Œä¼šé¡ºé“æŠŠAäº§ç”Ÿçš„redologä¹ŸæŒä¹…åŒ–ï¼Œè¿™æ—¶å€™Açš„redologçŠ¶æ€æ˜¯prepareçŠ¶æ€ä¹ˆï¼Ÿ<br>","like_count":116,"discussions":[{"author":{"id":1241770,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f2/aa/32fc0d54.jpg","nickname":"å¤±ç«çš„å¤å¤©","note":"","ucode":"10C6E66EB2A65F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":116234,"discussion_content":"ä½ çš„åç§°å……æ»¡äº†æ¶æ„","likes_number":34,"is_delete":false,"is_hidden":false,"ctime":1578058087,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1207495,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6c/c7/c8a881ab.jpg","nickname":"labuladong","note":"","ucode":"D4FB8DFCD3A275","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296781,"discussion_content":"è¿™ä¸¤ä¸ªã€Œæäº¤ã€çš„å«ä¹‰æ˜¯ä¸ä¸€æ ·çš„ã€‚MySQL äº‹åŠ¡ä¸­æ‰§è¡Œ commit å‘½ä»¤æ˜¯ç¬¬ä¸€ç§ã€Œæäº¤ã€ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„äº‹åŠ¡çš„æäº¤ã€‚\n\nä½†æ˜¯å½“ä½ æ‰§è¡Œäº† commit å‘½ä»¤ä¹‹åï¼ŒMySQL æ˜¯ä¸æ˜¯è¦ç¡®ä¿è¿™ä¸ªäº‹åŠ¡ç»“æŸï¼Ÿä¹Ÿå°±æ˜¯è¦å†™å…¥ redo log å’Œ binlogã€‚ä¸ºäº†ä¿è¯ crash-safe å’Œæ•°æ®ä¸€è‡´ç­‰é—®é¢˜ï¼Œredo log å’Œ binlog çš„å†™å…¥ä½¿ç”¨äº†ä¸¤é˜¶æ®µæäº¤åè®®ï¼Œredo log ä¼šæœ‰ prepare å’Œ committed ä¸¤ç§çŠ¶æ€ï¼Œredo log æäº¤åä¼šä» prepare çŠ¶æ€è¿›å…¥ committed çŠ¶æ€ï¼Œè¿™å°±æ˜¯ç¬¬äºŒç§ã€Œæäº¤ã€ã€‚\n\næ€»ç»“æ¥è¯´ï¼Œç¬¬ä¸€ç§ã€Œæäº¤ã€å°±æ˜¯ä¸€æ¡è¡¨ç¤ºäº‹åŠ¡ç»“æŸå‘½ä»¤ï¼Œè€Œç¬¬äºŒç§ã€Œæäº¤ã€æ˜¯ MySQL åº•å±‚çš„ä¸€ç§æœºåˆ¶ã€‚","likes_number":33,"is_delete":false,"is_hidden":false,"ctime":1596644452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":2154955,"avatar":"https://static001.geekbang.org/account/avatar/00/20/e1/cb/2d718a3e.jpg","nickname":"èˆŸ","note":"","ucode":"FD049300DFA316","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1207495,"avatar":"https://static001.geekbang.org/account/avatar/00/12/6c/c7/c8a881ab.jpg","nickname":"labuladong","note":"","ucode":"D4FB8DFCD3A275","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":332842,"discussion_content":"å±…ç„¶åœ¨è¿™çœ‹åˆ°åŠ›æ‰£å¤§ä½¬äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607353284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296781,"ip_address":""},"score":332842,"extra":""},{"author":{"id":2112092,"avatar":"https://static001.geekbang.org/account/avatar/00/20/3a/5c/60fdf8e2.jpg","nickname":"wtdd","note":"","ucode":"26C64BF9CCA061","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2154955,"avatar":"https://static001.geekbang.org/account/avatar/00/20/e1/cb/2d718a3e.jpg","nickname":"èˆŸ","note":"","ucode":"FD049300DFA316","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394400,"discussion_content":"è¿™ä¸ªäººåœ¨åŠ›æ‰£è¢«é”¤çˆ†å“ˆå“ˆã€‚ç™½å«–åˆ«äººçš„æˆæœå‡ºä¹¦è¿˜ä¸æ ‡æ³¨æ¥æºï¼Œä¸åº”è¯¥è¿™æ ·åšçš„ã€‚","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1631869298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":332842,"ip_address":""},"score":394400,"extra":""}]},{"author":{"id":2377275,"avatar":"https://static001.geekbang.org/account/avatar/00/24/46/3b/ac4b8ab0.jpg","nickname":"Streamä¸Šçš„å¸§","note":"","ucode":"325FBEFF80BD91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336822,"discussion_content":"äº‹åŠ¡æœªæäº¤å‰ï¼Œä¸ä¼šè§¦å‘ä¸¤é˜¶æ®µæäº¤åè®®ï¼Œè¿™æ˜¯å‰æã€‚\näº‹åŠ¡æäº¤ä¹‹å‰çš„SQLæ“ä½œï¼Œæ‰§è¡Œçš„æ˜¯å†…å­˜æ“ä½œã€redo log bufferå’Œbinlog cacheä¸­çš„æ“ä½œã€‚\näº‹åŠ¡æäº¤ä»¥åï¼Œè§¦å‘ä¸¤é˜¶æ®µæäº¤åè®®ï¼Œå¼€å§‹å°†redo log bufferå’Œbinlog cacheä¸­çš„å†…å®¹å†™å…¥åˆ°æ“ä½œç³»ç»Ÿçš„ page cacheä¸­å’Œè¿›è¡Œç£ç›˜åŒæ­¥(è¿™ä¸ªéœ€è¦çœ‹ä¸¤é˜¶æ®µç®—æ³•æ€ä¹ˆå®ç°äº†)ï¼Œä¸¤é˜¶æ®µæäº¤ï¼Œæ ‡è¯†è¿™æ¬¡binlogå’Œredo logä¸­çš„æ“ä½œæ˜¯å¦æˆåŠŸã€‚å¦‚æœä¸æˆæœå›æ»šã€‚","likes_number":22,"is_delete":false,"is_hidden":false,"ctime":1608709823,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115724,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","nickname":"ä¹˜é£","note":"","ucode":"0420C5535DACB7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66537,"discussion_content":"åŸºäºä¸Šé¢çš„è®¨è®ºå¯ä»¥è¿™æ ·ç†è§£å—:\n  äº‹åŠ¡Aæœªæäº¤å‰è¢«åŠ¨æŒä¹…åŒ–åˆ°ç£ç›˜çš„äº‹åŠ¡æ­¤æ—¶ä¸æ˜¯prepareçŠ¶æ€.\n  äº‹åŠ¡Aæäº¤æ—¶ä¼šå…ˆå‘innoDBå‘èµ·è¯·æ±‚,innoDBæ ‡è®°æ­¤æ—¶äº‹åŠ¡å¤„äºprepareçŠ¶æ€å¹¶è¿”å›ç»™server,serverå†™å…¥binlogåå†é€šçŸ¥innoDB,innoDBæ­¤æ—¶æ‰ä¼šçœŸæ­£æ‰§è¡Œcommit,å°†äº‹åŠ¡æ ‡è®°ä¸ºæ­£å¼çŠ¶æ€.\n\n","likes_number":13,"is_delete":false,"is_hidden":false,"ctime":1575082964,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1675475,"avatar":"https://static001.geekbang.org/account/avatar/00/19/90/d3/ab5db902.jpg","nickname":"Chiron","note":"","ucode":"76BBD1F32A35D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1115724,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwSoTjHPX5tm4whBSfoZLX6toZxrZGUaLABQywKNf4MDc9toK3QSV7Z99ATcGicFCysoleQ5ISzmw/132","nickname":"ä¹˜é£","note":"","ucode":"0420C5535DACB7","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115839,"discussion_content":"å¤ªç»•äº†ï¼Œå¤´ç–¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578039562,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":66537,"ip_address":""},"score":115839,"extra":""},{"author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1675475,"avatar":"https://static001.geekbang.org/account/avatar/00/19/90/d3/ab5db902.jpg","nickname":"Chiron","note":"","ucode":"76BBD1F32A35D1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351066,"discussion_content":"ç®€å•ç†è§£ï¼Œäº‹åŠ¡æäº¤å‘½ä»¤commitä¼šè¿›è¡Œä¸‰ä¸ªåŠ¨ä½œï¼Œredo logæŒä¹…åŒ–prepareï¼ŒbinlogæŒä¹…åŒ–ï¼Œredo logæŒä¹…åŒ–commitã€‚ä½†æ˜¯æ˜¯ä¸æ˜¯çœŸæ­£çš„å»æŒä¹…åŒ–äº†ï¼Œå–å†³äºsync_binlogä»¥åŠbinlog_group_commit_sync_delayä»¥åŠbinlog_group_commit_sync_no_delay_countä»¥åŠinnodb_flush_log_at_trx_commitã€‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1614144165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":115839,"ip_address":""},"score":351066,"extra":""}]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437795,"discussion_content":"ä¸æ˜¯ã€‚\n\nè¯´æ˜ä¸€ä¸‹å“ˆï¼Œæ‰€è°“çš„ redo log prepareï¼Œæ˜¯â€œå½“å‰äº‹åŠ¡æäº¤â€çš„ä¸€ä¸ªé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨äº‹åŠ¡Aæäº¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰ä¼šèµ°åˆ°äº‹åŠ¡Açš„redo log prepareè¿™ä¸ªé˜¶æ®µã€‚\n\näº‹åŠ¡Aåœ¨æäº¤å‰ï¼Œæœ‰ä¸€éƒ¨åˆ†redo logè¢«äº‹åŠ¡Bæå‰æŒä¹…åŒ–ï¼Œä½†æ˜¯äº‹åŠ¡Aè¿˜æ²¡æœ‰è¿›å…¥æäº¤é˜¶æ®µï¼Œæ˜¯æ— æ‰€è°“â€œredo log prepareâ€çš„ã€‚\n\nå¥½é—®é¢˜\n\n","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1548644158,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2107375,"avatar":"https://static001.geekbang.org/account/avatar/00/20/27/ef/a7f94eda.jpg","nickname":"Jerry You","note":"","ucode":"679A44B505482F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377557,"discussion_content":"äº‹åŠ¡Aæœ‰ä¸€éƒ¨åˆ†è¢«æå‰æŒä¹…åŒ–ï¼Œé‚£ä¹ˆç­‰åˆ°AçœŸæ­£æäº¤çš„æ—¶å€™ï¼Œredolog è¿˜æ˜¯é¡ºåºå¾€åå†™ä¹ˆï¼Ÿ ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622708662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1117597,"avatar":"https://static001.geekbang.org/account/avatar/00/11/0d/9d/58d09086.jpg","nickname":"è¾¾è¾¾é˜Ÿé•¿","note":"","ucode":"1C3F2E4F6B7637","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":261403,"discussion_content":"æ’çœ¼ï¼Œæå‰åˆ·å…¥çš„redo log buffer çŠ¶æ€","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1588952961,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1324501,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/d5/17833946.jpg","nickname":"å…«å®","note":"","ucode":"89D991A930FDEA","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403813,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634168914,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1891368,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL6EicLXHeU06fj2Dy5nA4GoVyNzRV5V68uVxVwuKSNYG6T23KLPJ3z570GI3GI2NA9x885DvSE5Xg/132","nickname":"åˆ˜ç£Š","note":"","ucode":"8B0EBB3DA4B63E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393828,"discussion_content":"åªæœ‰æ‰§è¡Œåˆ°commitçŠ¶æ€çš„äº‹åŠ¡ï¼Œæ‰ä¼šå»è€ƒè™‘èƒ½å¦ç»„æäº¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631611957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2021212,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/MdmRMTV2IwvQZF2IO0G0CFWbKxT9CIibmcdicS3J4SmrA4P1e36jCwyXZpia06ItwP4GibGnCrPJHicBbd5y9libTpiaA/132","nickname":"^_^","note":"","ucode":"301EE75D170771","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342573,"discussion_content":"è¿™é‡Œçš„redo logçš„prepareå’Œcommitä»£è¡¨çš„æ˜¯äº‹åŠ¡æ‰§è¡Œåˆ°ä»€ä¹ˆç¨‹åº¦äº†ï¼Œç»“åˆä¸¤é˜¶æ®µæäº¤åè®®æ¥ç†è§£å°±æ˜¯ä¸¤ä¸ªç³»ç»Ÿåšå¥½çº¦å®š: redo log prepare==>binlog done ==>redo log commitï¼›ä¸¤é˜¶æ¢¯æäº¤æœºåˆ¶å°±æ˜¯ä¿è¯æ•°æ®åº“åœ¨æ‰§è¡Œcommitå‘½ä»¤å‰æ‰€æœ‰å·¥ä½œå·²ç»å®Œæˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610718877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1809802,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/8a/a2d34896.jpg","nickname":"ä¸€å…ƒ(wx:abley1874)","note":"","ucode":"5E7A33642FC767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304744,"discussion_content":"é‚£ä¹ˆä¼šä¸ä¼šå‡ºç°ï¼Œäº‹åŠ¡Aå·²ç»å¤„äºcommité˜¶æ®µï¼Œäº‹åŠ¡Bå…ˆäº‹åŠ¡Aä¸€æ­¥å°†redo log bufferä¸­äº‹åŠ¡Açš„redo logè½ç›˜å‘¢ï¼Ÿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599654061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1809802,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/9d/8a/a2d34896.jpg","nickname":"ä¸€å…ƒ(wx:abley1874)","note":"","ucode":"5E7A33642FC767","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":311328,"discussion_content":"æˆ‘è§‰å¾—å¯ä»¥ï¼Œè¿™ä¹Ÿæ˜¯redo log åœ¨fsyncæ—¶æ•…æ„ç­‰ï¼Œå³ç»„æäº¤çš„æ•ˆæœ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602310011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":304744,"ip_address":""},"score":311328,"extra":""}]}]},{"had_liked":false,"id":56878,"user_name":"å€ªå¤§äºº","can_delete":false,"product_type":"c1","uid":1193052,"ip_address":"","ucode":"4798D69F3E86FB","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/5c/6b4757a0.jpg","comment_is_top":false,"comment_ctime":1546571663,"is_pvip":false,"replies":[{"id":"20671","content":"å¥½é—®é¢˜ï¼Œæˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ä¹Ÿä¸ºäº†è¿™ä¸ªé—®é¢˜å»ç¿»äº†ä»£ç ï¼Œæ˜¯è¿™æ ·çš„ï¼š<br>è¾¾åˆ°Næ¬¡ä»¥åï¼Œå¯ä»¥åˆ·ç›˜äº†ï¼Œç„¶åå†è¿›å…¥(sync_delayå’Œno_delay_count)è¿™ä¸ªé€»è¾‘ï¼›<br><br>Sync_delayå¦‚æœå¾ˆå¤§ï¼Œå°±è¾¾åˆ°no_delay_countæ‰åˆ·ï¼›<br><br>åªè¦sync_binlog=0,ä¹Ÿä¼šæœ‰å‰é¢çš„ç­‰å¾…é€»è¾‘ï¼Œä½†æ˜¯ç­‰å®Œåè¿˜æ˜¯ä¸è°ƒfsyncğŸ˜„","user_name":"ä½œè€…å›å¤","comment_id":56878,"uid":"1264162","ip_address":"","utype":1,"ctime":1546762468,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":7,"race_medal":0,"score":"332259053455","product_id":100020801,"comment_content":"è€å¸ˆæ±‚è§£sync_binlogå’Œbinlog_group_commit_sync_no_delay_countè¿™ä¸¤ä¸ªå‚æ•°åŒºåˆ«<br><br>å¦‚æœ<br>       sync_binlog = N<br>       binlog_group_commit_sync_no_delay_count = M<br>       binlog_group_commit_sync_delay = å¾ˆå¤§å€¼<br>è¿™ç§æƒ…å†µfsyncä»€ä¹ˆæ—¶å€™å‘ç”Ÿå‘€ï¼Œmin(N,M)å—ï¼Ÿ<br>æ„Ÿè§‰sync_binlogæ­é…binlog_group_commit_sync_delayä¹Ÿå¯ä»¥å®ç°ç»„æäº¤ï¼Ÿ<br><br>å¦‚æœ<br>        sync_binlog = 0<br>         binlog_group_commit_sync_no_delay_count = 10<br>è¿™ç§æƒ…å†µä¸‹æ˜¯ç´¯è®¡10ä¸ªäº‹åŠ¡fsyncä¸€æ¬¡ï¼Ÿ","like_count":77,"discussions":[{"author":{"id":1320050,"avatar":"https://static001.geekbang.org/account/avatar/00/14/24/72/9e2a651c.jpg","nickname":"å®¶æœ‰é‚¹å¤ª","note":"","ucode":"5636BD37EB1A99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":55427,"discussion_content":"ä¹Ÿå°±æ˜¯è¯´å…ˆè¦æ»¡è¶³sync_binlogï¼Œè¿™ä¸ªæ—¶å€™å‡†å¤‡åˆ·ç›˜äº†ï¼Œç„¶åæ‰å»åˆ¤æ–­æ˜¯å¦è¦å»¶è¿Ÿç»„æäº¤ï¼Œæ˜¯ä¹ˆï¼Ÿ","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1574378050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1707393,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0d/81/ed4957e8.jpg","nickname":"walzzz","note":"","ucode":"17D8079494189A","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":1320050,"avatar":"https://static001.geekbang.org/account/avatar/00/14/24/72/9e2a651c.jpg","nickname":"å®¶æœ‰é‚¹å¤ª","note":"","ucode":"5636BD37EB1A99","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382210,"discussion_content":"åäº†å§ï¼Œä»–æ˜¯è¯´sync_binlog=0ï¼Œå‰é¢ç­‰å®Œåé¢è¿˜æ˜¯ä¸è°ƒfsync","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625474581,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":55427,"ip_address":""},"score":382210,"extra":""},{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1320050,"avatar":"https://static001.geekbang.org/account/avatar/00/14/24/72/9e2a651c.jpg","nickname":"å®¶æœ‰é‚¹å¤ª","note":"","ucode":"5636BD37EB1A99","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532173,"discussion_content":"å¦‚æœ sync_binlog = 0,é‚£ä¹ˆå³ä½¿è¿›å…¥(sync_delayå’Œno_delay_count)è¿™ä¸ªé€»è¾‘çš„åˆ¤æ–­æ»¡è¶³äº†ï¼Œä¹Ÿä¸ä¼šåˆ·ç›˜ï¼Œè€Œæ˜¯ç­‰å¾…ç³»ç»Ÿé»˜è®¤çš„é—²æ—¶åˆ·ç›˜ç­–ç•¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637549300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":55427,"ip_address":""},"score":532173,"extra":"{\"user_type\":1}"}]},{"author":{"id":2446024,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/GA9AqKGEdib009iaPw3FSluiaeibCXmen7yFIKicZB8qqEtczZJF2WmwBJ738eExnxDmPREIGjqc4BFVXiamyhuCZASw/132","nickname":"ä¸€ç¼•é˜³å…‰","note":"","ucode":"CA89C1B7CB16C0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587513,"discussion_content":"å…¶å®ç®€å•å•ç†è§£ï¼Œgroupæäº¤çš„æ—¶å€™ï¼Œæ˜¯æäº¤æœ‰å¤šå°‘å‡†å¤‡fsyncçš„æ•°æ®ï¼Œè€Œfsyncçš„æ•°æ®æ˜¯é sync_binlog æ¥å†³å®šæä¾›çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1663123684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435293,"discussion_content":"å¥½é—®é¢˜ï¼Œæˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ä¹Ÿä¸ºäº†è¿™ä¸ªé—®é¢˜å»ç¿»äº†ä»£ç ï¼Œæ˜¯è¿™æ ·çš„ï¼š\nè¾¾åˆ°Næ¬¡ä»¥åï¼Œå¯ä»¥åˆ·ç›˜äº†ï¼Œç„¶åå†è¿›å…¥(sync_delayå’Œno_delay_count)è¿™ä¸ªé€»è¾‘ï¼›\n\nSync_delayå¦‚æœå¾ˆå¤§ï¼Œå°±è¾¾åˆ°no_delay_countæ‰åˆ·ï¼›\n\nåªè¦sync_binlog=0,ä¹Ÿä¼šæœ‰å‰é¢çš„ç­‰å¾…é€»è¾‘ï¼Œä½†æ˜¯ç­‰å®Œåè¿˜æ˜¯ä¸è°ƒfsyncğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546762468,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1132922,"avatar":"https://static001.geekbang.org/account/avatar/00/11/49/7a/229097af.jpg","nickname":"jiyeon2__","note":"","ucode":"7ADFD70438E661","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":580274,"discussion_content":"sync_binlog = N\nbinlog_group_commit_sync_no_delay_count = M\nè¿™ç§æƒ…å†µåº”è¯¥æ˜¯æ»¡è¶³Nä¸ªgroupï¼ˆæ¯ä¸ªgroupæœ‰Mä¸ªäº‹åŠ¡ï¼‰åæ‰fsyncå§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658058333,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":435293,"ip_address":""},"score":580274,"extra":""}]},{"author":{"id":2036924,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/14/bc/326284b1.jpg","nickname":"ambrella","note":"","ucode":"9C0019364DCBB5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377072,"discussion_content":"è¿™é‡Œå¥½æ™•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622477445,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":62660,"user_name":"Komine","can_delete":false,"product_type":"c1","uid":1040449,"ip_address":"","ucode":"1668595D691F3A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/e0/41/8ae7a30a.jpg","comment_is_top":false,"comment_ctime":1548125506,"is_pvip":false,"replies":[{"id":"22190","content":"å¥½é—®é¢˜<br><br>æˆ‘è§‰å¾—ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„åŸå› æ˜¯ï¼Œä¸€ä¸ªçº¿ç¨‹åªèƒ½åŒæ—¶æœ‰ä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œã€‚<br><br>ç”±äºè¿™ä¸ªè®¾å®šï¼Œæ‰€ä»¥æ¯å½“æ‰§è¡Œä¸€ä¸ªbegin&#47;start transactionçš„æ—¶å€™ï¼Œå°±ä¼šé»˜è®¤æäº¤ä¸Šä¸€ä¸ªäº‹åŠ¡ï¼›<br>è¿™æ ·å¦‚æœä¸€ä¸ªäº‹åŠ¡çš„binlogè¢«æ‹†å¼€çš„æ—¶å€™ï¼Œåœ¨å¤‡åº“æ‰§è¡Œå°±ä¼šè¢«å½“åšå¤šä¸ªäº‹åŠ¡åˆ†æ®µè‡ªè¡Œï¼Œè¿™æ ·ç ´åäº†åŸå­æ€§ï¼Œæ˜¯æœ‰é—®é¢˜çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":62660,"uid":"1264162","ip_address":"","utype":1,"ctime":1548138498,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"302195836226","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆbinlog æ˜¯ä¸èƒ½â€œè¢«æ‰“æ–­çš„â€çš„å‘¢ï¼Ÿä¸»è¦å‡ºäºä»€ä¹ˆè€ƒè™‘ï¼Ÿ","like_count":71,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437294,"discussion_content":"å¥½é—®é¢˜\n\næˆ‘è§‰å¾—ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„åŸå› æ˜¯ï¼Œä¸€ä¸ªçº¿ç¨‹åªèƒ½åŒæ—¶æœ‰ä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œã€‚\n\nç”±äºè¿™ä¸ªè®¾å®šï¼Œæ‰€ä»¥æ¯å½“æ‰§è¡Œä¸€ä¸ªbegin/start transactionçš„æ—¶å€™ï¼Œå°±ä¼šé»˜è®¤æäº¤ä¸Šä¸€ä¸ªäº‹åŠ¡ï¼›\nè¿™æ ·å¦‚æœä¸€ä¸ªäº‹åŠ¡çš„binlogè¢«æ‹†å¼€çš„æ—¶å€™ï¼Œåœ¨å¤‡åº“æ‰§è¡Œå°±ä¼šè¢«å½“åšå¤šä¸ªäº‹åŠ¡åˆ†æ®µè‡ªè¡Œï¼Œè¿™æ ·ç ´åäº†åŸå­æ€§ï¼Œæ˜¯æœ‰é—®é¢˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548138498,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355861,"discussion_content":"binlogçš„åŸºäºäº‹åŠ¡ç»´åº¦æ¥è®°å½•çš„ï¼Œï¼Œå°±æ˜¯è¯´ä¸€ä¸ªå®Œæ•´çš„binlogå°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡ï¼Œå¦‚æœbinlogæ‹†å¼€äº†ï¼Œé‚£è¿™ä¸ªäº‹åŠ¡çš„è®°å½•å°±ä¸å®Œæ•´äº†ã€ä¸åŸå­äº†ï¼Œæ‰€ä»¥ä¸€ä¸ªäº‹åŠ¡çš„binlogä¸èƒ½æ‹†å¼€ã€‚è€Œredo logçš„è®°å½•æ˜¯åŸºäºæ•°æ®é¡µçš„ï¼Œä¸€ä¸ªäº‹åŠ¡å¯ä»¥æœ‰å¾ˆå¤šæ•°æ®é¡µçš„è®°å½•ï¼Œåªè¦ä¿è¯redo logçš„æ•°æ®é¡µç»´åº¦è®°å½•æ˜¯å®Œæ•´çš„å°±å¯ä»¥ï¼Œæ‰€ä»¥redo logæ˜¯å¯ä»¥æ‹†å¼€çš„ã€‚","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1615482123,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1261530,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDKsicmpne7xQNocwRQ80DDZ3CzjsDoVIcH0SBiaYzS056oVOx4pEeEVeCaXE3QtsjUIEI0x1xQVTw/132","nickname":"muggle","note":"","ucode":"D78087BCAD0860","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535381,"discussion_content":"\nç­”ï¼šbinlogå†™å…¥çš„å‰ææ¡ä»¶æ˜¯äº‹åŠ¡è¢«æäº¤ï¼Œäº‹åŠ¡è‡³å°‘è¿›å…¥äº†prepareçŠ¶æ€ï¼Œè‹¥æ­¤æ—¶ä¸€ä¸ªäº‹åŠ¡çš„binlogå¦‚æœèƒ½æ‹†åˆ†å†™ï¼Œåˆ™æ„å‘³ç€åœ¨å¤‡åº“æ‰§è¡Œæ—¶ï¼Œå°±ç›¸å½“äºæ‹†åˆ†æˆäº†å¤šä¸ªäº‹åŠ¡æ®µæ‰§è¡Œï¼Œæ­¤æ—¶ç ´åäº†äº‹åŠ¡çš„åŸå­æ€§ï¼Œå¯èƒ½å¯¼è‡´ä¸€äº›ä¸å¯é¢„çŸ¥çš„é—®é¢˜ï¼šä¾‹å¦‚å¤‡åº“binlogå¹¶è¡Œå¤åˆ¶ç­‰å¤æ‚é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638423244,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1320050,"avatar":"https://static001.geekbang.org/account/avatar/00/14/24/72/9e2a651c.jpg","nickname":"å®¶æœ‰é‚¹å¤ª","note":"","ucode":"5636BD37EB1A99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393923,"discussion_content":"redo logçš„æ¯ä¸€ä¸ªpageéƒ½æ˜¯ç‹¬ç«‹çš„å•å…ƒï¼Œæ¯ä¸ªpage headeréƒ½ä¼šè®°å½•äº‹åŠ¡idä¿¡æ¯ã€‚æ‰€ä»¥æ‰“æ•£äº†æ²¡å…³ç³»ï¼Œè¿˜èƒ½ä¸²èµ·æ¥ã€‚binlogä¸€ä¸ªäº‹åŠ¡åªä¼šè®°å½•ä¸€æ¬¡äº‹åŠ¡idï¼Œå¦‚æœæ‰“æ•£äº†å°±ä¸²ä¸èµ·æ¥äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631662942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58540,"user_name":"çŒªå“¥å“¥","can_delete":false,"product_type":"c1","uid":1311362,"ip_address":"","ucode":"ACBB4556516D34","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLkhgYnYZBdhdwKnXQibey04cy9N9ria3DadH7iagoKukaWK1FJwjfCoh0He4p7b2icSYVzHH71l8ZXiaQ/132","comment_is_top":false,"comment_ctime":1547108412,"is_pvip":false,"replies":[{"id":"21178","content":"ä½ ç†è§£çš„æ˜¯å¯¹çš„","user_name":"ä½œè€…å›å¤","comment_id":58540,"uid":"1264162","ip_address":"","utype":1,"ctime":1547134527,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"173345800252","product_id":100020801,"comment_content":"è€å¸ˆ æˆ‘æƒ³é—®ä¸‹æ–‡ä»¶ç³»ç»Ÿçš„page cacheè¿˜æ˜¯ä¸æ˜¯å†…å­˜, æ˜¯ä¸æ˜¯æ–‡ä»¶ç³»ç»Ÿå‘å†…æ ¸ç”³è¯·çš„ä¸€å—çš„å†…å­˜?","like_count":41,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436112,"discussion_content":"ä½ ç†è§£çš„æ˜¯å¯¹çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547134527,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1543040,"avatar":"https://static001.geekbang.org/account/avatar/00/17/8b/80/8702bd5f.jpg","nickname":"evan","note":"","ucode":"491B073D5AFEDE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319986,"discussion_content":"æ˜¯å†…å­˜ page cacheæ˜¯ç”¨ä½œæ“ä½œç³»ç»Ÿé¡µç¼“å†²çš„, ä½†æ˜¯Mysqlä¼šä½¿ç”¨direct io, ç»•è¿‡æ“ä½œç³»ç»Ÿçš„page cache, è€Œä½¿ç”¨è‡ªå·±çš„buffer pool, ä½†è‡ªå·±çš„buffer poolä¹Ÿæ˜¯å‘æ“ä½œç³»ç»Ÿç”³è¯·çš„...","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1604221245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2029015,"avatar":"","nickname":"å°é’¢ç‚®","note":"","ucode":"676C4CCF3CCD0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":411164,"discussion_content":"log buffer->os buffer->log file on disk","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635859824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57390,"user_name":"æŸã€äºº","can_delete":false,"product_type":"c1","uid":1308784,"ip_address":"","ucode":"ADB42AA12A11C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","comment_is_top":false,"comment_ctime":1546776573,"is_pvip":false,"replies":[{"id":"20674","content":"1. Writeçš„æ—¶å€™åªè¦å†™è¿›å»äº†ï¼Œfsyncå…¶å®å¾ˆå¿«çš„ã€‚è¿ç»­æ€§æ˜¯writeçš„æ—¶å€™åšçš„ï¼ˆå†™çš„æ—¶å€™ä¿è¯äº†è¿ç»­ï¼‰<br><br>2. ä½ çš„ç†è§£åº”è¯¥æ˜¯å¯¹çš„ã€‚ä¸æ˜¯è¡¨çº§","user_name":"ä½œè€…å›å¤","comment_id":57390,"uid":"1264162","ip_address":"","utype":1,"ctime":1546781232,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":17,"race_medal":0,"score":"156165599229","product_id":100020801,"comment_content":"æœ‰è°ƒåˆ°éåŒ1çš„æ—¶å€™,åœ¨å¤§ä¿ƒæ—¶éæ ¸å¿ƒåº“å’Œä»åº“å»¶è¿Ÿè¾ƒå¤šçš„æƒ…å†µã€‚<br>è®¾ç½®çš„æ˜¯sync_binlog=0å’Œinnodb_flush_log_at_trx_commit=2<br>é’ˆå¯¹0å’Œ2,åœ¨mysql crashæ—¶ä¸ä¼šå‡ºç°å¼‚å¸¸,åœ¨ä¸»æœºæŒ‚äº†æ—¶ï¼Œä¼šæœ‰å‡ ç§é£é™©:<br>1.å¦‚æœäº‹åŠ¡çš„binlogå’Œredo logéƒ½è¿˜æœªfsync,åˆ™è¯¥äº‹åŠ¡æ•°æ®ä¸¢å¤±<br>2.å¦‚æœäº‹åŠ¡binlog fsyncæˆåŠŸ,redo logæœªfsync,åˆ™è¯¥äº‹åŠ¡æ•°æ®ä¸¢å¤±ã€‚<br>è™½ç„¶binlogè½ç›˜æˆåŠŸ,ä½†æ˜¯binlogæ²¡æœ‰æ¢å¤redo logçš„èƒ½åŠ›,æ‰€ä»¥redo logä¸èƒ½æ¢å¤.<br>ä¸è¿‡åç»­å¯ä»¥è§£æbinlogæ¥æ¢å¤è¿™éƒ¨åˆ†æ•°æ®<br>3.å¦‚æœäº‹åŠ¡binlog fsyncæœªæˆåŠŸ,redo logæˆåŠŸã€‚<br>ç”±äºredo logæ¢å¤æ•°æ®æ˜¯åœ¨å¼•æ“å±‚,æ‰€ä»¥é‡æ–°å¯åŠ¨æ•°æ®åº“,redo logèƒ½æ¢å¤æ•°æ®,ä½†æ˜¯ä¸èƒ½æ¢å¤serverå±‚çš„binlog,åˆ™binlogä¸¢å¤±ã€‚<br>å¦‚æœè¯¥äº‹åŠ¡è¿˜æœªä»FS page cacheé‡Œå‘é€ç»™ä»åº“,é‚£ä¹ˆä¸»ä»å°±ä¼šå‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µ<br>4.å¦‚æœbinlogå’Œredo logéƒ½æˆåŠŸfsync,é‚£ä¹ˆçš†å¤§æ¬¢å–œã€‚<br><br>è€å¸ˆæˆ‘æœ‰å‡ ä¸ªé—®é¢˜:<br>1.å› ä¸ºbinlogä¸èƒ½è¢«æ‰“æ–­,é‚£ä¹ˆbinlogåšfsyncæ˜¯å•çº¿ç¨‹å§?<br>å¦‚æœæ˜¯çš„è¯,é‚£ä¹ˆbinlogçš„writeåˆ°fsyncçš„æ—¶é—´,å°±åº”è¯¥æ˜¯redo log fsync+ä¸Šä¸€ä¸ªäº‹åŠ¡çš„binlog fsyncæ—¶é—´ã€‚<br>ä½†æ˜¯æµ‹è¯•åˆ°çš„ç°è±¡,ä¸€ä¸ªè¶…å¤§äº‹åŠ¡åšfsyncæ—¶,å¯¹å…¶å®ƒäº‹åŠ¡çš„æäº¤å½±å“ä¹Ÿä¸å¤§ã€‚<br>å¦‚æœæ˜¯å¤šçº¿ç¨‹åšfsync,æ€ä¹ˆä¿è¯çš„ä¸€ä¸ªäº‹åŠ¡binlogåœ¨ç£ç›˜ä¸Šçš„è¿ç»­æ€§ï¼Ÿ<br>2.  5.7çš„å¹¶è¡Œå¤åˆ¶æ˜¯åŸºäºbinlogç»„æˆå‘˜å¹¶è¡Œçš„,ä¸ºä»€ä¹ˆå¾ˆå¤šæ–‡ç« è¯´æ˜¯è¡¨çº§åˆ«çš„å¹¶è¡Œå¤åˆ¶ï¼Ÿ","like_count":36,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435555,"discussion_content":"1. Writeçš„æ—¶å€™åªè¦å†™è¿›å»äº†ï¼Œfsyncå…¶å®å¾ˆå¿«çš„ã€‚è¿ç»­æ€§æ˜¯writeçš„æ—¶å€™åšçš„ï¼ˆå†™çš„æ—¶å€™ä¿è¯äº†è¿ç»­ï¼‰\n\n2. ä½ çš„ç†è§£åº”è¯¥æ˜¯å¯¹çš„ã€‚ä¸æ˜¯è¡¨çº§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546781232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1692320,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d2/a0/c8714628.jpg","nickname":"ç‹¬ä¸€æ— äºŒ","note":"","ucode":"A7DE0EA2BD8FE3","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":60997,"discussion_content":"æ‰¾ä¸åˆ°å•ç‹¬å‘è¯„è®ºçš„åœ°æ–¹ï¼Œæ­£å¥½çœ‹åˆ°ä½ å‘çš„è¯„è®ºäº§ç”Ÿäº†ä¸€ä¸ªç–‘é—®ï¼Œä¹Ÿä¸çŸ¥é“æœ‰æ²¡æœ‰äººå›ç­”ã€‚ä»åº“å°†è‡ªå·±æ‰§è¡Œçš„å’Œå·²ç»æ¥æ”¶çš„ä½ç½®ä¿¡æ¯å‘ç»™ä¸»åº“ï¼Œä¸»åº“show master statusä¹‹åï¼Œçœ‹åˆ°çš„æ˜¯æŒä¹…åŒ–çš„æ–‡ä»¶è¿˜æ˜¯ä¹ŸåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿç¼“å­˜çš„binlogï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1574768758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1320050,"avatar":"https://static001.geekbang.org/account/avatar/00/14/24/72/9e2a651c.jpg","nickname":"å®¶æœ‰é‚¹å¤ª","note":"","ucode":"5636BD37EB1A99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1692320,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d2/a0/c8714628.jpg","nickname":"ç‹¬ä¸€æ— äºŒ","note":"","ucode":"A7DE0EA2BD8FE3","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":393925,"discussion_content":"æˆ‘ç†è§£show master statusåº”è¯¥æ˜¯ä»è¡¨é‡Œè·å–çš„gtidå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631663649,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":60997,"ip_address":""},"score":393925,"extra":""}]},{"author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355866,"discussion_content":"é—®ï¼šå…±åŒå†™ä¸€ä¸ªbinlogæ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹åº”è¯¥éœ€è¦é”æ¥ç»´æŒæäº¤çš„æ—¶åºå§ï¼Œå†™æ–‡ä»¶çš„æ—¶å€™æ˜¯ä¸æ˜¯å¯èƒ½ä¼šå˜æˆç“¶é¢ˆç‚¹ï¼Ÿ\n\nä½œè€…å›å¤: ä¸ä¼šçš„ï¼Œå¤§å®¶åˆ†å¤´å†™ï¼Œç„¶åä¸€èµ·æŒä¹…åŒ–åˆ°ç£ç›˜","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615483447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":2336545,"avatar":"https://static001.geekbang.org/account/avatar/00/23/a7/21/9366cdd8.jpg","nickname":"ä¸‰äº•å¯¿","note":"","ucode":"325E9D64C22C0D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":371242,"discussion_content":"åˆ†å¤´å†™æ˜¯æ€ä¹ˆä¿è¯é¡ºåºçš„ï¼Œä¸å¤ªæ˜ç™½è¿™é‡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619693270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":355866,"ip_address":""},"score":371242,"extra":""},{"author":{"id":2775007,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI6LQLz15qzxQxxllMHKibevP2BpjRldqW0laElfFlHfSAER2OMBicp7pez90AevWKwWxwC6pp5iaWWw/132","nickname":"äº”æœˆ","note":"","ucode":"B984F2138C5345","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2336545,"avatar":"https://static001.geekbang.org/account/avatar/00/23/a7/21/9366cdd8.jpg","nickname":"ä¸‰äº•å¯¿","note":"","ucode":"325E9D64C22C0D","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530718,"discussion_content":"æˆ‘çš„ç†è§£, é¡ºåºçš„ä¿è¯æ˜¯ä¸æ˜¯å’Œè¿™ä¸ªbinlogçš„LSNæœ‰å…³, åœ¨è½ç›˜ä¹‹å‰, å¯èƒ½æœ‰ä¸€ä¸ªæœºåˆ¶æ¥æ ¹æ®æ¯ä¸ªbinlogçš„LSNæ¥æ’åº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637133835,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":371242,"ip_address":""},"score":530718,"extra":"{\"user_type\":1}"},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587765,"discussion_content":"ç»„æäº¤é‡Œé¢æœ‰ä¸ªé”åˆ†æ®µå°±æ˜¯ç”¨æ¥å¤„ç†è¿™ä¸ªé—®é¢˜çš„ï¼Œæ¯ä¸ªé”ä¼šç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿›å…¥ç¬¬ä¸€ä¸ªé˜Ÿåˆ—ä»¥åï¼Œåç»­çš„é˜¶æ®µéƒ½è¦ä¿æŒè¿™ä¸ªæ—¶åºï¼›é€šè¿‡è¿™ä¸ªæœºåˆ¶å°±å¯ä»¥å®ç°è¿™å‡ ä¸ªé˜¶æ®µçš„å¹¶å‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663259493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":355866,"ip_address":"å¹¿ä¸œ"},"score":587765,"extra":""}]},{"author":{"id":1324501,"avatar":"https://static001.geekbang.org/account/avatar/00/14/35/d5/17833946.jpg","nickname":"å…«å®","note":"","ucode":"89D991A930FDEA","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":403815,"discussion_content":"Mark","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634169137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2009461,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/a9/75/dbccd12d.jpg","nickname":"ç¨»è‰äºº","note":"","ucode":"6694EE2CD36B8C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":355864,"discussion_content":"å°±æ˜¯è¯´binlogçš„ç»„æäº¤æ—¶æ˜¯åœ¨writeæ—¶å°±ä¿è¯äº†çš„ï¼Œç„¶åfsyncçš„æ—¶å€™å°±ä¸€æ³¢æ‰§è¡Œä¸ç”¨è€ƒè™‘é¡ºåºæ€§äº†ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œbinlogæ— æ³•å¹¶å‘writeï¼Ÿåªèƒ½ä¸²è¡Œwrite?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615482568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351020,"discussion_content":"é’ˆå¯¹ç¬¬3ç§åœºæ™¯ï¼Œsync_binlogç­‰äº0çš„æ—¶å€™ï¼Œä¸æ˜¯æ¯æ¬¡äº‹åŠ¡æäº¤éƒ½ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜çš„å—ï¼Ÿè¿™æ—¶å€™ä¸å°±ç›¸å½“äºredo logæœ‰prepareï¼Œåœ¨ç­‰binlog fsyncã€‚ä¸»æœºæ¢å¤MySQLé‡å¯çš„æ—¶å€™ï¼Œå°±å›æ»šè¯¥äº‹åŠ¡ã€‚æ€ä¹ˆå¯èƒ½å‡ºç°â€œå¦‚æœè¯¥äº‹åŠ¡è¿˜æœªä»FS page cacheé‡Œå‘é€ç»™ä»åº“,é‚£ä¹ˆä¸»ä»å°±ä¼šå‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µâ€å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614125016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1308784,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","nickname":"æŸã€äºº","note":"","ucode":"ADB42AA12A11C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351204,"discussion_content":"sync binlogè®¾ç½®ä¸º0ä¸æ˜¯æ¯æ¬¡äº‹åŠ¡æäº¤éƒ½ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614176966,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351020,"ip_address":""},"score":351204,"extra":""},{"author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1308784,"avatar":"https://static001.geekbang.org/account/avatar/00/13/f8/70/f3a33a14.jpg","nickname":"æŸã€äºº","note":"","ucode":"ADB42AA12A11C1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":353731,"discussion_content":"è°¢è°¢å›å¤ï¼Œsync_binlog = 1æ‰æ˜¯æ¯æ¬¡æäº¤éƒ½æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚ææ··äº†~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615197118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":351204,"ip_address":""},"score":353731,"extra":""}]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331357,"discussion_content":"è¿˜æ˜¯æ²¡æœ‰å›ç­”binlogåœ¨writeæ—¶æ˜¯ä¸æ˜¯å¹¶å‘çš„ï¼Œä¸ªäººæ„Ÿè§‰ä¸æ˜¯ï¼Œå¦‚æœä¸æ˜¯ï¼Œé‚£å°±æ˜¯é¡ºåºçš„ï¼Œé‚£è¿™æ ·å°±ä¼šå½±å“æ€§èƒ½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606834877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1005164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/6c/6e2fd5df.jpg","nickname":"Alan","note":"","ucode":"AB242424C998DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":45725,"discussion_content":"æ„Ÿè§‰ è¿˜æ˜¯ä¸èƒ½ç™¾åˆ†ç™¾ç»å¯¹ä¿è¯æ•°æ®ä¸ä¸¢å‘€ å’Œæ ‡é¢˜ä¸åŒ¹é…","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573061934,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1275980,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoicSMibHxGmeNXCLAnB6S7icPh814icIsw7VZ5vYzLOyKKUJYmFC5WGPekH5qI7rRbH3n4Y2obiaKlBTQ/132","nickname":"konh","note":"","ucode":"1CAD0D67067CC1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/6c/6e2fd5df.jpg","nickname":"Alan","note":"","ucode":"AB242424C998DC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":317179,"discussion_content":"å¦‚æœbinlongå’Œredologç­–ç•¥éƒ½é€‰æ‹©æäº¤äº‹åŠ¡å°±æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œé‚£ä¸å°±ä¿è¯æ•°æ®ä¸ä¸¢å¤±äº†ã€‚\nç°åœ¨æ˜¯ä¸ºäº†æå‡æ€§èƒ½ï¼Œæ‰€ä»¥æŠ›å¼ƒäº†ä¸€å®šçš„æ•°æ®å®‰å…¨æ€§","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1603512526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":45725,"ip_address":""},"score":317179,"extra":""},{"author":{"id":1357311,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b5/ff/d1f205b0.jpg","nickname":"L","note":"","ucode":"5B847B2378854E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/6c/6e2fd5df.jpg","nickname":"Alan","note":"","ucode":"AB242424C998DC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318600,"discussion_content":"å¯ä»¥ç™¾åˆ†ç™¾ï¼Œä½†æ˜¯ä½ å°±è¦ç‰ºç‰²æ€§èƒ½ï¼  æ‰€æœ‰çš„è®¾è®¡ï¼Œéƒ½æ˜¯åšæƒè¡¡ï¼","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1603789338,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":45725,"ip_address":""},"score":318600,"extra":""},{"author":{"id":1320050,"avatar":"https://static001.geekbang.org/account/avatar/00/14/24/72/9e2a651c.jpg","nickname":"å®¶æœ‰é‚¹å¤ª","note":"","ucode":"5636BD37EB1A99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1005164,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/56/6c/6e2fd5df.jpg","nickname":"Alan","note":"","ucode":"AB242424C998DC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393926,"discussion_content":"åŒ1é…ç½®çš„è¯ï¼Œå¦‚æœbinlogå’Œredo logéƒ½fsyncæˆåŠŸï¼Œé‚£è‡ªç„¶æ²¡é—®é¢˜ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªfsyncå¤±è´¥ï¼Œé‚£ä¹ˆrecoverçš„æ—¶å€™ä¼šå›æ»šï¼Œæ•°æ®ä¹Ÿæ˜¯ä¸€è‡´çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631663915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":45725,"ip_address":""},"score":393926,"extra":""}]}]},{"had_liked":false,"id":128743,"user_name":"æµ©ç€šæœ‰è¾¹","can_delete":false,"product_type":"c1","uid":1087384,"ip_address":"","ucode":"B4540E94EAFFE0","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/98/5ef15aa0.jpg","comment_is_top":false,"comment_ctime":1566955879,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"113236105575","product_id":100020801,"comment_content":"åˆšå¼€å§‹æˆ‘ä¹Ÿé‡åˆ°äº†jacyä¸€æ ·çš„é—®é¢˜ï¼Œè®¤ä¸ºbinlogå†™åˆ°fileé‡Œé¢å°±æ˜¯å†™åˆ°diskäº†ï¼Œå°±ä¸ç†è§£ä¸ºä»€ä¹ˆè¿˜è¦fsyncï¼Œåæ¥ä»”ç»†å›è¯»äº†æ–‡ç« ï¼Œå‘ç°binlogå†™åˆ°fileæ˜¯æŒ‡å†™åˆ°pagecacheï¼Œå¹¶ä¸æ˜¯diskã€‚<br>å»ºè®®è€å¸ˆåœ¨æè¿°binlogå†™ç›˜çš„é‚£ä¸¤ä¸ªæ­¥éª¤æ—¶ï¼ŒæŠŠå†™åˆ°fileç›´æ¥æè¿°ä¸ºå†™åˆ°pagecacheï¼Œé¿å…æ­§ä¹‰","like_count":27},{"had_liked":false,"id":58286,"user_name":"xiaoyou","can_delete":false,"product_type":"c1","uid":1302588,"ip_address":"","ucode":"2B6E553E8187F0","user_header":"https://static001.geekbang.org/account/avatar/00/13/e0/3c/ae0f6f57.jpg","comment_is_top":false,"comment_ctime":1547026859,"is_pvip":false,"replies":[{"id":"21015","content":"ä½ è¯´çš„å¯¹ï¼Œåˆ†æå¾—å¾ˆå¥½","user_name":"ä½œè€…å›å¤","comment_id":58286,"uid":"1264162","ip_address":"","utype":1,"ctime":1547043584,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":15,"race_medal":0,"score":"100331274667","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæ–‡ç« è¯´innodbçš„ redo log åœ¨commitçš„æ—¶å€™ä¸è¿›è¡Œfsyncï¼Œåªä¼šwrite åˆ°page cacheä¸­ã€‚å½“sync_binlog&gt;1,å¦‚æœredo log å®Œæˆäº†prepareæŒä¹…åŒ–è½ç›˜ï¼Œbinlogåªæ˜¯write page cacheï¼Œæ­¤æ—¶commitæ ‡è¯†å®Œæˆwrite ä½†æ²¡æœ‰è½ç›˜ï¼Œè€Œclientæ”¶åˆ°commitæˆåŠŸï¼Œè¿™ä¸ªæ—¶å€™ä¸»æœºæ‰ç”µï¼Œå¯åŠ¨çš„æ—¶å€™åšå´©æºƒæ¢å¤ï¼Œæ²¡æœ‰commitæ ‡è¯†å’Œbinglogï¼Œäº‹åŠ¡ä¼šå›æ»šã€‚æˆ‘çœ‹æ–‡ç« è¯´sync_binlogè®¾ç½®ä¸ºå¤§äº1çš„å€¼ï¼Œä¼šä¸¢binlogæ—¥å¿—,æ­¤æ—¶æ•°æ®ä¹Ÿä¼šä¸¢å¤±å§ï¼Ÿ","like_count":23,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435988,"discussion_content":"ä½ è¯´çš„å¯¹ï¼Œåˆ†æå¾—å¾ˆå¥½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547043584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348920,"discussion_content":"æ‰€ä»¥æ–‡ç« ä¸­æåˆ°çš„å®¢æœç«¯æ”¶åˆ°commit,æ—¥å¿—å°±ä¸€å®šæŒä¹…åŒ–äº†æ˜¯ä¸å‡†ç¡®çš„å§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1612776082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1901428,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLwIAiaxOJWE3Ut6hRvTzvFkCIibcURojC0XrQI1lC3h58enlNcpXQ98rmUOr5lA6ST3m24micj191Gw/132","nickname":"ä¸ç–¾","note":"","ucode":"18AA0F294C1586","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":374956,"discussion_content":"å¯¹ã€‚å‡è®¾binlog_syncè®¾ç½®ä¸º5ï¼Œåœ¨æ‰§è¡Œç¬¬4ä¸ªäº‹åŠ¡è¿‡ç¨‹ä¸­æœåŠ¡å™¨å®•æœºï¼Œæ‰§è¡Œå‰3ä¸ªäº‹åŠ¡çš„å®¢æˆ·ç«¯è™½ç„¶æ”¶åˆ°commitï¼Œä½†äº‹åŠ¡å…¶å®æ˜¯è¿˜æœªæŒä¹…åŒ–çš„","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1621418720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":348920,"ip_address":""},"score":374956,"extra":""},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589820,"discussion_content":"è¯´çš„æ˜¯åŒ1åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665326293,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":348920,"ip_address":"é™•è¥¿"},"score":589820,"extra":""}]},{"author":{"id":1810156,"avatar":"","nickname":"poordickey","note":"","ucode":"2A436EC813AF97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334458,"discussion_content":"è¿™ä¸ªè¯„è®ºå¯ä»¥å¾€å‰æ’ä¸  è¿™ä¸ªå¯ä»¥è¯´æ˜¯æ•°æ®ä¸¢å¤±çš„ä¸€ç§åœºæ™¯äº†","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607852839,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1810156,"avatar":"","nickname":"poordickey","note":"","ucode":"2A436EC813AF97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334456,"discussion_content":"ä¸¤å…¨ä¸èƒ½é½ç¾   è¦ä¿è¯äº‹ç‰©ä¸€è‡´å°±å¾—ä¸æ–­fsyncä»è€Œæ€§èƒ½å°±ä¼šå˜å·®   è¦æƒ³é«˜æ€§èƒ½å°±å¾—æ‰¿æ‹…äº‹ç‰©ä¸¢å¤±çš„é£é™©","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1607852777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561117,"discussion_content":"æ•°æ®ç›¸å¯¹å®¢æˆ·ç«¯æ˜¯ä¸¢å¤±äº†ã€‚ä½†æ˜¯redoå’Œbinlogè¿˜æ˜¯èƒ½ä¿æŒä¸€è‡´æ€§çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649555758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1014347,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7a/4b/1a7b36ab.jpg","nickname":"æ¬§æ˜Ÿæ˜Ÿ","note":"","ucode":"56365442E231A0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561000,"discussion_content":"å¦‚æœè¦ä¿è¯æ•°æ®ä¸ä¸¢ï¼Œå°±è¦è®¾ç½®sync_binlog=1ï¼Œä½†æ€§èƒ½å°±ä¼šä¸‹é™","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649510098,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1320050,"avatar":"https://static001.geekbang.org/account/avatar/00/14/24/72/9e2a651c.jpg","nickname":"å®¶æœ‰é‚¹å¤ª","note":"","ucode":"5636BD37EB1A99","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":393927,"discussion_content":"å…¶å®fsyncè¿‡ç¨‹å¾ˆå¿«çš„ï¼Œè€Œä¸”commitæ—¶é—´å äº¤æ˜“æ—¶é—´çš„æ¯”ç‡å¾ˆä½çš„ï¼Œæ‰€ä»¥å¼€å¯åŒ1å¯¹æ€§èƒ½å½±å“å…¶å®æ²¡é‚£ä¹ˆå¤§ã€‚ä¸å…¶å…³æ³¨è¿™ä¸ªï¼Œä¸å¦‚å…³æ³¨ä¸‹æŠŠåº”ç”¨ç¨‹åºå†™çš„å¥½ä¸€ç‚¹ï¼Œç´¢å¼•è®¾è®¡çš„å¥½ä¸€ç‚¹ï¼Œè¿™ä¸ªæ‰æ˜¯å¤§å¤´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631664316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1676246,"avatar":"https://static001.geekbang.org/account/avatar/00/19/93/d6/040e4965.jpg","nickname":"Omer","note":"","ucode":"8EE3E531313265","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391267,"discussion_content":"è¯·æ•™ä¸ªé—®é¢˜, é‚£å¦‚æœè¯´binlogä¸¢å¤±äº†, ä½†æ˜¯commitåˆ·ç£ç›˜äº†, ä¼šæ€ä¹ˆå¤„ç†è¿™ä¸ªæƒ…å†µ,æˆ‘çœ‹æ¢å¤çš„æ—¶å€™å¦‚æœcommitäº†å°±ç›´æ¥okäº†, é‚£è¿™æ ·binlogåˆæ²¡æœ‰æ•°æ®å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630381420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1155646,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","nickname":"ppd0705","note":"","ucode":"EB63D4E3FD1E9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":270686,"discussion_content":"commitä¹‹å‰bin logåº”è¯¥å·²ç»fsyncäº†å§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590036568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1155646,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKotsBr2icbYNYlRSlicGUD1H7lulSTQUAiclsEz9gnG5kCW9qeDwdYtlRMXic3V6sj9UrfKLPJnQojag/132","nickname":"ppd0705","note":"","ucode":"EB63D4E3FD1E9A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294461,"discussion_content":"sync binlog = næ—¶ï¼Œ ä¼šç­‰å¾…æœ‰nä¸ªäº‹åŠ¡æäº¤æ‰ä¼šä¸»åŠ¨fsyncï¼Œæ‰€ä»¥æŸä¸ªäº‹åŠ¡åœ¨æäº¤æ—¶å› ä¸ºä¸è¶³næ‰€ä»¥ä¸ä¼šä¸»åŠ¨fsyncï¼Œä½†ä¹Ÿä¼šå“åº”å®¢æˆ·ç«¯æˆåŠŸï¼Œå¦‚æœæ­¤åˆ»æ–‡ä»¶ç³»ç»Ÿä¹Ÿæ²¡æœ‰fsyncå¹¶ä¸”crashäº†ï¼Œé‚£ä¹ˆè¿™äº›binlogå°±æ²¡æŒä¹…åŒ–ã€‚\n\nç­‰é‡å¯åï¼Œå³ä½¿æœ‰redologä½†æ˜¯ä¸å­˜åœ¨binlogï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæ¢å¤è¿™ä¸ªäº‹åŠ¡ï¼Œé‚£è¿™ä¸ªäº‹åŠ¡çš„å˜æ›´æ“ä½œå°±ä¸¢äº†ğŸ˜","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1595898540,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":270686,"ip_address":""},"score":294461,"extra":""},{"author":{"id":1676246,"avatar":"https://static001.geekbang.org/account/avatar/00/19/93/d6/040e4965.jpg","nickname":"Omer","note":"","ucode":"8EE3E531313265","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391266,"discussion_content":"å¤§ä½¬è¯·æ•™ä¸ªé—®é¢˜, é‚£å¦‚æœè¯´binlogä¸¢å¤±äº†, ä½†æ˜¯commitåˆ·ç£ç›˜äº†, ä¼šæ€ä¹ˆå¤„ç†è¿™ä¸ªæƒ…å†µ,æˆ‘çœ‹æ¢å¤çš„æ—¶å€™å¦‚æœcommitäº†å°±ç›´æ¥okäº†, é‚£è¿™æ ·binlogåˆæ²¡æœ‰æ•°æ®å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630381415,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":294461,"ip_address":""},"score":391266,"extra":""},{"author":{"id":1055662,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1b/ae/ec71a853.jpg","nickname":"Shan","note":"","ucode":"90374AC27C09D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1676246,"avatar":"https://static001.geekbang.org/account/avatar/00/19/93/d6/040e4965.jpg","nickname":"Omer","note":"","ucode":"8EE3E531313265","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":396350,"discussion_content":"æˆ‘è§‰å¾—äº‹åŠ¡è¿˜æ˜¯æˆåŠŸçš„ï¼Œåªä¸è¿‡bin logä¸¢å¤±äº†ï¼Œå¦‚æœåœ¨bin log åœ¨page cacheçš„æ—¶å€™æ²¡æœ‰ä¸‹å‘åˆ°ä»åº“çš„è¯ã€‚å°±ä¼šå¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´ã€‚å¦‚æœ‰é—®é¢˜ï¼Œè¿˜è¯·æŒ‡å‡ºã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1632412099,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":391266,"ip_address":""},"score":396350,"extra":""}]}]},{"had_liked":false,"id":57204,"user_name":"ä¸€å¤§åªğŸ˜´","can_delete":false,"product_type":"c1","uid":1310960,"ip_address":"","ucode":"92F3D2B7F63568","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/f0/08409e78.jpg","comment_is_top":false,"comment_ctime":1546681795,"is_pvip":false,"replies":[{"id":"20630","content":"ğŸ‘ğŸ¿<br>éå¸¸å¥½<br><br>ç„¶åå†è¡¥ä¸Šæˆ‘å›ç­”çš„è¿™ä¸ªé€»è¾‘ï¼Œå°±å®Œå¤‡äº†<br><br>","user_name":"ä½œè€…å›å¤","comment_id":57204,"uid":"1264162","ip_address":"","utype":1,"ctime":1546684534,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"87446027715","product_id":100020801,"comment_content":"ä½ æ˜¯æ€ä¹ˆéªŒè¯çš„ï¼Ÿç­‰äº0çš„æ—¶å€™è™½ç„¶æœ‰èµ°è¿™ä¸ªé€»è¾‘ï¼Œä½†æ˜¯æœ€åè°ƒç”¨fsyncä¹‹å‰åˆ¤æ–­æ˜¯0ï¼Œå°±å•¥ä¹Ÿæ²¡åšå°±èµ°äº†<br>å›å¤è€å¸ˆ:<br>       è€å¸ˆï¼Œæˆ‘è¯´çš„sync_binlog=0æˆ–=1æ•ˆæœä¸€æ ·ï¼Œå°±æ˜¯çœ‹è¯­å¥å®é™…æ‰§è¡Œçš„æ•ˆæœï¼Œå‚æ•°binlog_group_commit_sync_delayæˆ‘è®¾ç½®æˆäº†500000å¾®ç§’ï¼Œåœ¨=1æˆ–=0æ—¶ï¼Œå¯¹è¡¨è¿›è¡ŒInsertï¼Œç„¶åéƒ½ä¼šæœ‰0.5ç§’çš„ç­‰å¾…ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œæ—¶é—´éƒ½æ˜¯0.51 secï¼Œå…³é—­binlog_group_commit_sync_delayï¼Œinsertæ‰§è¡Œä¼šé£å¿«ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸º=1æˆ–=0éƒ½æ˜¯å—ç»„æäº¤å‚æ•°çš„å½±å“çš„ã€‚","like_count":21,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435460,"discussion_content":"ğŸ‘ğŸ¿\néå¸¸å¥½\n\nç„¶åå†è¡¥ä¸Šæˆ‘å›ç­”çš„è¿™ä¸ªé€»è¾‘ï¼Œå°±å®Œå¤‡äº†\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546684534,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57830,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1546920548,"is_pvip":false,"replies":[{"id":"21112","content":"ä½ çš„ç†è§£å¾ˆåˆ°ä½","user_name":"ä½œè€…å›å¤","comment_id":57830,"uid":"1264162","ip_address":"","utype":1,"ctime":1547118303,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":9,"race_medal":0,"score":"78856331876","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œçœ‹äº†@å€ªå¤§äººçš„é—®é¢˜ï¼Œä¸ªäººè®¤ä¸ºï¼š<br>sync_binlogå’Œbinlog_group_commit_sync_no_delay_countçš„æœ€å¤§åŒºåˆ«ä¸»è¦åœ¨äºï¼Œæ•°æ®çš„ä¸¢å¤±ä¸å¦å§ï¼Ÿ<br><br>sync_binlog = Nï¼šæ¯ä¸ªäº‹åŠ¡writeåå°±å“åº”å®¢æˆ·ç«¯äº†ã€‚åˆ·ç›˜æ˜¯Næ¬¡äº‹åŠ¡ååˆ·ç›˜ã€‚Næ¬¡äº‹åŠ¡ä¹‹é—´å®•æœºï¼Œæ•°æ®ä¸¢å¤±ã€‚<br><br>binlog_group_commit_sync_no_delay_count=Nï¼š å¿…é¡»ç­‰åˆ°Nä¸ªåæ‰èƒ½æäº¤ã€‚æ¢è¨€ä¹‹ï¼Œä¼šå¢åŠ å“åº”å®¢æˆ·ç«¯çš„æ—¶é—´ã€‚ä½†æ˜¯ä¸€æ—¦å“åº”äº†ï¼Œé‚£ä¹ˆæ•°æ®å°±ä¸€å®šæŒä¹…åŒ–äº†ã€‚å®•æœºçš„è¯ï¼Œæ•°æ®æ˜¯ä¸ä¼šä¸¢å¤±çš„ã€‚<br><br>ä¸çŸ¥é“æˆ‘è¿™ä¹ˆç†è§£å¯¹ä¸å¯¹ï¼Ÿ<br>","like_count":19,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435780,"discussion_content":"ä½ çš„ç†è§£å¾ˆåˆ°ä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547118303,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1395853,"avatar":"","nickname":"èƒ–å¤´æ¬§å·´","note":"","ucode":"97EF28759A4E4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533808,"discussion_content":"binlog_group_commit_sync_no_delay_countä¸å½±å“å“åº”æ—¶é—´å‘€ï¼Œè¿™æ˜¯binlogå»¶è¿Ÿå¤šä¹…å»è°ƒfsyncè€Œå·²","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637982729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1250580,"avatar":"https://static001.geekbang.org/account/avatar/00/13/15/14/21e0807e.jpg","nickname":"gm","note":"","ucode":"0E39AE5BE34E27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":410453,"discussion_content":"å¯ä»¥é€šè¿‡ä¸åŒè§’åº¦çœ‹å¾…ï¼Œä»å®¢æˆ·ç«¯çš„è§’åº¦çœ‹å¾…sync_binlogï¼Œä»mysqlç³»ç»Ÿè§’åº¦çœ‹å¾…sync_no_delay_count","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635692319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1115149,"avatar":"https://static001.geekbang.org/account/avatar/00/11/04/0d/3dc5683a.jpg","nickname":"æŸ¯å¯Ÿé‡‘","note":"","ucode":"F722BF8FCD2C47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391055,"discussion_content":"å¦‚æœ n è®¾ç½®ä¸º 10ï¼Œå¦‚æœä¸€ç›´è¾¾ä¸åˆ° 10 ä¸ªï¼Œæˆ‘çš„äº‹åŠ¡å°±å¡æ­»äº†ï¼Œä¸€ç›´æäº¤ä¸äº†ï¼Ÿï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630250271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1707393,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0d/81/ed4957e8.jpg","nickname":"walzzz","note":"","ucode":"17D8079494189A","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382211,"discussion_content":"æ„Ÿè§‰è¯´çš„ä¸å¯¹å§ï¼Œbinlog_group_commit_sync_no_delay_count=Nä¹Ÿä¸æ˜¯è¦ç­‰æœ‰ç¬¬Nä¸ªåç¬¬ä¸€ä¸ªæ‰è¿”å›å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625474775,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1652836,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","nickname":"pc","note":"","ucode":"1AD538B9A900B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":120579,"discussion_content":"æŒ‰ç…§ä¹‹å‰çš„è®¨è®ºï¼Œæ˜¯è¦å…ˆåˆ¤æ–­sync_binlogï¼Ÿå¦‚æœsync_binlog> binlog_group_commit_sync_no_delay_countï¼Œé‚£ä¹ˆåˆ°è¾¾Må€¼ä¹Ÿä¸æäº¤ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578283291,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1508329,"avatar":"https://static001.geekbang.org/account/avatar/00/17/03/e9/6358059c.jpg","nickname":"GalaxyCreater","note":"","ucode":"C79E8A088D57CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1652836,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","nickname":"pc","note":"","ucode":"1AD538B9A900B6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":245732,"discussion_content":"æ»¡è¶³sync_binlogæˆ– binlog_group_commit_sync_no_delay_countä¸­çš„ä¸€ä¸ªå°±ä¼šæäº¤","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587695426,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":120579,"ip_address":""},"score":245732,"extra":""},{"author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1508329,"avatar":"https://static001.geekbang.org/account/avatar/00/17/03/e9/6358059c.jpg","nickname":"GalaxyCreater","note":"","ucode":"C79E8A088D57CF","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365353,"discussion_content":"ä¸æ˜¯ï¼Œæ˜¯å…ˆæ»¡è¶³sync_binlogï¼Œç„¶åå†åˆ¤æ–­æ˜¯å¦æ»¡è¶³binlog_group_commit_sync_delayæˆ–binlog_group_commit_sync_no_delay_countã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617781900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":245732,"ip_address":""},"score":365353,"extra":""},{"author":{"id":1707393,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0d/81/ed4957e8.jpg","nickname":"walzzz","note":"","ucode":"17D8079494189A","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382209,"discussion_content":"åäº†å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625474438,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":365353,"ip_address":""},"score":382209,"extra":""}]}]},{"had_liked":false,"id":71299,"user_name":"melon","can_delete":false,"product_type":"c1","uid":1023773,"ip_address":"","ucode":"7A80C20EBCAAA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9f/1d/ec173090.jpg","comment_is_top":false,"comment_ctime":1551317297,"is_pvip":false,"replies":[{"id":"25523","content":"å‰é¢çš„ä¼ªä»£ç ä¸é”™å“ˆ<br><br>â€binlog_group_commit_sync_no_delay_countè¿™ä¸ªå‚æ•°æ˜¯ä¸æ˜¯ä¸åº”è¯¥è®¾ç½®çš„æ¯”å¹¶å‘çº¿ç¨‹æ•°å¤§â€œï¼Œæœ€å¥½æ˜¯è¿™æ ·çš„ï¼Œå¦åˆ™çš„è¯ï¼Œå°±åªèƒ½ç­‰binlog_group_commit_sync_delay |æ—¶é—´åˆ°äº†","user_name":"ä½œè€…å›å¤","comment_id":71299,"uid":"1264162","ip_address":"","utype":1,"ctime":1551320027,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"44500990257","product_id":100020801,"comment_content":"è€å¸ˆå¸®å¿™çœ‹ä¸€ä¸‹æˆ‘binlog ç»„æäº¤è¿™å—ç†è§£çš„å¯¹ä¸å¯¹<br><br>binlog write é˜¶æ®µ<br>ç»„é‡Œé¢ç¬¬ä¸€ä¸ªèµ°åˆ° binlog write çš„äº‹åŠ¡è®°å½•ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œç”¨äºåœ¨ binlog fsync é˜¶æ®µè®¡ç®— sync delayäº†å¤šå°‘æ—¶é—´ï¼Œå§‘ä¸”è®¡ä¸º start_time<br>ç»„é‡Œå·² sync write æ¬¡æ•°+1ï¼Œå§‘ä¸”è®°ä¸º group_write<br>å…¨å±€å·² sync wirte æ¬¡æ•°+1ï¼Œå§‘ä¸”è®°ä¸º global_write<br><br>binlog fsync é˜¶æ®µ<br>IF ( NOW - sart_time ) &gt;= binlog_group_commit_sync_delay || group_write &gt;= binlog_group_commit_sync_no_delay_count<br>    IF sync_binlog &gt;0 &amp;&amp; global_write &gt;= sync_binlog<br>        fsync<br><br>    è®¾ç½® binlog ç»„æäº¤ä¿¡å·ï¼Œè®©å…¶å®ƒç­‰å¾…çš„äº‹åŠ¡ç»§ç»­<br>ELSE<br>    ç­‰å¾… binlog ç»„æäº¤ä¿¡å·<br><br>å¦å¤– binlog_group_commit_sync_no_delay_count è¿™ä¸ªå‚æ•°æ˜¯ä¸æ˜¯ä¸åº”è¯¥è®¾ç½®çš„æ¯”å¹¶å‘çº¿ç¨‹æ•°å¤§ï¼Œå› ä¸ºä¸€ä¸ªç»„é‡Œçš„äº‹åŠ¡åº”è¯¥ä¸ä¼šæ¯”å¹¶å‘çº¿ç¨‹æ•°å¤šå§ï¼Œè®¾ç½®å¤§äº†ä¹Ÿå°±æ²¡ä»€ä¹ˆæ„ä¹‰äº†ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£å§è€å¸ˆã€‚","like_count":10,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441098,"discussion_content":"å‰é¢çš„ä¼ªä»£ç ä¸é”™å“ˆ\n\nâ€binlog_group_commit_sync_no_delay_countè¿™ä¸ªå‚æ•°æ˜¯ä¸æ˜¯ä¸åº”è¯¥è®¾ç½®çš„æ¯”å¹¶å‘çº¿ç¨‹æ•°å¤§â€œï¼Œæœ€å¥½æ˜¯è¿™æ ·çš„ï¼Œå¦åˆ™çš„è¯ï¼Œå°±åªèƒ½ç­‰binlog_group_commit_sync_delay |æ—¶é—´åˆ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551320027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1323652,"avatar":"","nickname":"sibyl","note":"","ucode":"0D142011860D69","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":294465,"discussion_content":"binlog fsync é˜¶æ®µ:\n\nif(binlog_group_commit_sync_delay > 0  || binlog_group_commit_sync_no_delay_count > 0){\n    while  ( NOW - sart_time <=          binlog_group_comnit_sync_delay &amp;&amp; group_write <= binlog_group_commit_sync_no_delay_count){}\n    fsync\n\n}\n\n IF sync_binlog > 0 &amp;&amp; global_write >= sync_binlog\n        fsync","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595899088,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":71589,"user_name":"liao xueqiang","can_delete":false,"product_type":"c1","uid":1310325,"ip_address":"","ucode":"68713441579F6B","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/75/46742f12.jpg","comment_is_top":false,"comment_ctime":1551398442,"is_pvip":false,"replies":[{"id":"25732","content":"ä¸æ˜¯ï¼Œè¿™æ„æ€å°±æ˜¯ï¼Œå³ä½¿å¼‚å¸¸æ‰ç”µï¼Œåªè¦redo logçš„prepare éƒ¨åˆ†+binlogå®Œæ•´ï¼Œå°±ä¼šä¿è¯ä¸ä¸¢æ•°æ®ã€‚<br><br>ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤šä¼šä¸¢å¤±1ç§’çš„â€œredo log commitä¿¡æ¯â€ï¼Œä½†æ˜¯è¿™ä¸ªcommitä¿¡æ¯ä¸¢å¤±ï¼Œå¹¶ä¸ä¼šå½±å“æ•°æ®ï¼ˆå°±æ˜¯å´©æºƒæ¢å¤æ…¢ä¸€ç‚¹ï¼‰","user_name":"ä½œè€…å›å¤","comment_id":71589,"uid":"1264162","ip_address":"","utype":1,"ctime":1551403979,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":8,"race_medal":0,"score":"40206104106","product_id":100020801,"comment_content":"æ¯ç§’ä¸€æ¬¡åå°è½®è¯¢åˆ·ç›˜ï¼Œå†åŠ ä¸Šå´©æºƒæ¢å¤è¿™ä¸ªé€»è¾‘ï¼ŒInnoDB å°±è®¤ä¸º redo log åœ¨ commit çš„æ—¶å€™å°±ä¸éœ€è¦ fsync äº†ï¼Œåªä¼š write åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸­å°±å¤Ÿäº†ã€‚è€å¸ˆå¥½ï¼Œè¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿè¿™ä¸æ˜¯æœåŠ¡å™¨é‡å¯çš„æƒ…å†µä¸‹ï¼Œä¼šä¸¢å¤±1ç§’çš„æ•°æ®å—","like_count":10,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":441220,"discussion_content":"ä¸æ˜¯ï¼Œè¿™æ„æ€å°±æ˜¯ï¼Œå³ä½¿å¼‚å¸¸æ‰ç”µï¼Œåªè¦redo logçš„prepare éƒ¨åˆ†+binlogå®Œæ•´ï¼Œå°±ä¼šä¿è¯ä¸ä¸¢æ•°æ®ã€‚\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤šä¼šä¸¢å¤±1ç§’çš„â€œredo log commitä¿¡æ¯â€ï¼Œä½†æ˜¯è¿™ä¸ªcommitä¿¡æ¯ä¸¢å¤±ï¼Œå¹¶ä¸ä¼šå½±å“æ•°æ®ï¼ˆå°±æ˜¯å´©æºƒæ¢å¤æ…¢ä¸€ç‚¹ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551403979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1889026,"avatar":"","nickname":"çº¢é¢œé“­å¿ƒ","note":"","ucode":"18F94E5444C71A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230994,"discussion_content":"å¦‚æœç¢°åˆ°æ—¢æœ‰ prepareã€åˆæœ‰ commit çš„ redo logï¼Œå°±ç›´æ¥æäº¤ï¼›\nå¦‚æœç¢°åˆ°åªæœ‰ parepareã€è€Œæ²¡æœ‰ commit çš„ redo logï¼Œå°±æ‹¿ç€ XID å» binlog æ‰¾å¯¹åº”çš„äº‹åŠ¡ã€‚","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1586784162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1055662,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1b/ae/ec71a853.jpg","nickname":"Shan","note":"","ucode":"90374AC27C09D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1889026,"avatar":"","nickname":"çº¢é¢œé“­å¿ƒ","note":"","ucode":"18F94E5444C71A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":396355,"discussion_content":"> å¦‚æœç¢°åˆ°æ—¢æœ‰ prepareã€åˆæœ‰ commit çš„ redo logï¼Œå°±ç›´æ¥æäº¤ï¼›\nredo log commit ä¹‹åä½†æ˜¯bin log ä¸¢å¤±çš„è¿™ç§æˆ‘ç†è§£ä¹Ÿæ˜¯æˆåŠŸï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632412358,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":230994,"ip_address":""},"score":396355,"extra":""},{"author":{"id":1302556,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e0/1c/aa50dc27.jpg","nickname":"icyricky","note":"","ucode":"D63C285165309D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1055662,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1b/ae/ec71a853.jpg","nickname":"Shan","note":"","ucode":"90374AC27C09D2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407576,"discussion_content":"binlogåœ¨redo log commitä¹‹å‰å°±è½ç›˜äº†ï¼Œä¸ä¼šå‡ºç°ä½ è¯´çš„binlogä¸¢å¤±çš„åœºæ™¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635064239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":396355,"ip_address":""},"score":407576,"extra":""}]},{"author":{"id":1366960,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLYicScS2u9alz421bWmOT0qKkAJbXcsFhtuqM6XByicnSL6nFHTQ5fPLM9R8HgjABicJXdqQljIJroQ/132","nickname":"ä¸Šå–„è‹¥æ°´","note":"","ucode":"DEB612BBF40014","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342645,"discussion_content":"åˆ·ç¬¬ä¸‰éæ‰è±ç„¶å¼€æœ—ï¼ŒåŸæ¥redologæ—¥å¿—åœ¨commitçš„æ—¶å€™ï¼Œæ˜¯ç»§ç»­å†™ç£ç›˜ã€‚ä¹‹å‰ä¸€ç›´ä»¥ä¸ºæ˜¯æ‰¾åˆ°åŸæ¥prepareçš„æ—¥å¿—ï¼Œä¿®æ”¹ä¸ºcommitçŠ¶æ€ã€‚æ‰€ä»¥æ‰å›°æƒ‘ï¼Œç¬¬äºŒæ¬¡ä¹Ÿä¸æ˜¯é¡ºåºå†™ï¼Œæ²¡æœ‰èŠ‚çœæ—¶é—´ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1610764221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1366960,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLYicScS2u9alz421bWmOT0qKkAJbXcsFhtuqM6XByicnSL6nFHTQ5fPLM9R8HgjABicJXdqQljIJroQ/132","nickname":"ä¸Šå–„è‹¥æ°´","note":"","ucode":"DEB612BBF40014","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":348924,"discussion_content":"ä¹‹å‰å’Œä½ æœ‰ä¸€æ ·çš„ç–‘æƒ‘ï¼Œçœ‹å®Œä½ å†™çš„ï¼Œåˆçœ‹äº†ä¸€éåŸæ–‡ï¼Œæ‰æ˜ç™½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612777179,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":342645,"ip_address":""},"score":348924,"extra":""}]},{"author":{"id":1889026,"avatar":"","nickname":"çº¢é¢œé“­å¿ƒ","note":"","ucode":"18F94E5444C71A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230997,"discussion_content":"ä¸¢æ•°æ®æ˜¯ä¸å¯èƒ½çš„ åªä¸è¿‡æ‹¿ç€xidå»ç£ç›˜æŸ¥æ‰¾binlog æ‰¾åˆ°åå†commitåˆ°redo log  å®Œæˆäº‹åŠ¡æäº¤","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1586784310,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1255820,"avatar":"https://static001.geekbang.org/account/avatar/00/13/29/8c/3a810521.jpg","nickname":"CaptainBerg","note":"","ucode":"4033CF49863F7E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301124,"discussion_content":"â€œcommit ä¸fsync ï¼Œåªwriteâ€ï¼ŒæŒ‡çš„æ˜¯redo logçš„é‚£ä¸ªcommitæ ‡è¯†ã€‚æŒ‰ç…§æ–‡ä¸­çš„è¯´æ³•ï¼Œå½“é…ç½®ä¸ºåŒ1æ—¶ï¼Œredo logçš„prepareé˜¶æ®µå·²ç»æŠŠredologè½ç›˜äº†ï¼Œæ‰€ä»¥å°±ç®—redologçš„commité˜¶æ®µä¸fsync  commitæ ‡è¯†ï¼Œä¹Ÿä¸å½±å“crash safe","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598413569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99492,"user_name":"jacy","can_delete":false,"product_type":"c1","uid":1103456,"ip_address":"","ucode":"0022A8759DDCE6","user_header":"https://static001.geekbang.org/account/avatar/00/10/d6/60/f21b2164.jpg","comment_is_top":false,"comment_ctime":1559229259,"is_pvip":false,"replies":[{"id":"36697","content":"wrieå¾ˆå¤šæ¬¡ï¼Œfsyncä¸€æ¬¡","user_name":"ä½œè€…å›å¤","comment_id":99492,"uid":"1264162","ip_address":"","utype":1,"ctime":1560003793,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":1,"score":"35918967627","product_id":100020801,"comment_content":"1.å…ˆæŠŠ binlog ä» binlog cache ä¸­å†™åˆ°ç£ç›˜ä¸Šçš„ binlog æ–‡ä»¶ï¼›<br>2.è°ƒç”¨ fsync æŒä¹…åŒ–ã€‚<br><br>è€å¸ˆï¼Œè¿™ä¸¤æ­¥æˆ‘ä¸ä¸å¤ªç†è§£ï¼Œå†™åˆ°ç£ç›˜binlogæ–‡ä»¶ï¼Œä¸å°±æ˜¯æŒä¹…åŒ–äº†å—ï¼Œä¸ºå•¥è¿˜è¦è°ƒç”¨fsyncå†åˆ·ä¸€æ¬¡ç›˜å‘¢ï¼Ÿèƒ½å¦å¸®å¿™è§£ç­”ä¸€ä¸‹ï¼Œæ„Ÿè°¢ğŸ™","like_count":8,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452136,"discussion_content":"wrieå¾ˆå¤šæ¬¡ï¼Œfsyncä¸€æ¬¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560003793,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1082785,"avatar":"https://static001.geekbang.org/account/avatar/00/10/85/a1/2442332c.jpg","nickname":"éƒ­ä¿Šæ°","note":"","ucode":"D328E5738A4413","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2010,"discussion_content":"æˆ‘çš„ç†è§£æ˜¯ç¬¬1æ­¥ï¼Œæ˜¯å°†binlog cacheä¸­çš„å†™åˆ°äº†page cacheä¸­ï¼Œåªä¸è¿‡è¿™ä¸ªé¡µç¼“å­˜åå­—å«ç³»ç»Ÿbinlogæ–‡ä»¶","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1563178294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63950,"user_name":"alias cd=rm -rf","can_delete":false,"product_type":"c1","uid":1318325,"ip_address":"","ucode":"E7B27D76305B75","user_header":"https://static001.geekbang.org/account/avatar/00/14/1d/b5/971261fd.jpg","comment_is_top":false,"comment_ctime":1548609101,"is_pvip":false,"replies":[{"id":"22632","content":"æ¯ä¸ªäº‹åŠ¡åœ¨æäº¤è¿‡ç¨‹çš„prepareé˜¶æ®µï¼Œä¼šæŠŠredologæŒä¹…åŒ–ï¼› â€œå½“å‰äº‹åŠ¡çš„redologæŒä¹…åŒ–åprepareçŠ¶æ€ä¹ˆâ€è¿™ä¸ªæè¿°è¿˜æ˜¯ä¸æ¸…æ¥šï¼Œä½ ç”¨äº‹åŠ¡Aã€äº‹åŠ¡Bè¿™æ ·æ¥æè¿°å§ğŸ˜†<br><br>redologå·²ç»è¢«æŒä¹…åŒ–åˆ°ç£ç›˜äº†ï¼Œé‚£ä¹ˆå½“å‰äº‹åŠ¡æäº¤æ—¶å€™ï¼Œ<br>ï¼ˆå…¶å®è¿™é‡Œåªæ˜¯â€œéƒ¨åˆ†â€è¢«æŒä¹…åŒ–ï¼Œå› ä¸ºè¿™ä¸ªäº‹åŠ¡è‡ªå·±åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šäº§ç”Ÿæ–°çš„æ—¥å¿—ï¼‰ï¼Œåªéœ€è¦ç»§ç»­æŒä¹…åŒ–å‰©ä¸‹çš„redo log","user_name":"ä½œè€…å›å¤","comment_id":63950,"uid":"1264162","ip_address":"","utype":1,"ctime":1548637167,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"35908347469","product_id":100020801,"comment_content":"è€å¸ˆä¸å¥½æ„æ€ï¼Œæˆ‘æ¥ç€åˆšæ‰çš„é—®é¢˜é—®å“ˆ<br>å¹¶å‘äº‹åŠ¡çš„redologæŒä¹…åŒ–ï¼Œä¼šæŠŠå½“å‰äº‹åŠ¡çš„redologæŒä¹…åŒ–ï¼Œå½“å‰äº‹åŠ¡çš„redologæŒä¹…åŒ–åprepareçŠ¶æ€ä¹ˆï¼Ÿredologå·²ç»è¢«æŒä¹…åŒ–åˆ°ç£ç›˜äº†ï¼Œé‚£ä¹ˆå½“å‰äº‹åŠ¡æäº¤æ—¶å€™ï¼Œredologå˜ä¸ºprepareçŠ¶æ€ï¼Œè¿™æ—¶å€™æ˜¯ä»redologbufferåŠ è½½è¿˜æ˜¯ä»ç£ç›˜åŠ è½½ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437778,"discussion_content":"æ¯ä¸ªäº‹åŠ¡åœ¨æäº¤è¿‡ç¨‹çš„prepareé˜¶æ®µï¼Œä¼šæŠŠredologæŒä¹…åŒ–ï¼› â€œå½“å‰äº‹åŠ¡çš„redologæŒä¹…åŒ–åprepareçŠ¶æ€ä¹ˆâ€è¿™ä¸ªæè¿°è¿˜æ˜¯ä¸æ¸…æ¥šï¼Œä½ ç”¨äº‹åŠ¡Aã€äº‹åŠ¡Bè¿™æ ·æ¥æè¿°å§ğŸ˜†\n\nredologå·²ç»è¢«æŒä¹…åŒ–åˆ°ç£ç›˜äº†ï¼Œé‚£ä¹ˆå½“å‰äº‹åŠ¡æäº¤æ—¶å€™ï¼Œ\nï¼ˆå…¶å®è¿™é‡Œåªæ˜¯â€œéƒ¨åˆ†â€è¢«æŒä¹…åŒ–ï¼Œå› ä¸ºè¿™ä¸ªäº‹åŠ¡è‡ªå·±åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šäº§ç”Ÿæ–°çš„æ—¥å¿—ï¼‰ï¼Œåªéœ€è¦ç»§ç»­æŒä¹…åŒ–å‰©ä¸‹çš„redo log","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548637167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406756,"discussion_content":"redologä¸è¿ç»­ä¹Ÿæ²¡å…³ç³»å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634828282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2797976,"avatar":"","nickname":"Geek_323a60","note":"","ucode":"CDC276EC255411","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585348,"discussion_content":"å°å­¦æ²¡æ¯•ä¸šå—ï¼Ÿè¿™ç—…å¥å†™çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661496305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å››å·"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57912,"user_name":"Geek_527020","can_delete":false,"product_type":"c1","uid":1097150,"ip_address":"","ucode":"4DAAC586AB1563","user_header":"https://static001.geekbang.org/account/avatar/00/10/bd/be/53350286.jpg","comment_is_top":false,"comment_ctime":1546939265,"is_pvip":false,"replies":[{"id":"20885","content":"æ²¡äº‹ï¼Œè¿™äº›æ“ä½œæ²¡æäº¤ï¼Œå´©æºƒæ¢å¤çš„æ—¶å€™å°±å›æ»šäº†","user_name":"ä½œè€…å›å¤","comment_id":57912,"uid":"1264162","ip_address":"","utype":1,"ctime":1546950144,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":4,"race_medal":0,"score":"35906677633","product_id":100020801,"comment_content":"äº‹åŠ¡è¿˜æœªç»“æŸï¼Œbinlogå’Œredo logå°±å†™åˆ°ç£ç›˜ä¸­äº†ï¼Œå¦‚æœå‡ºç°äº†äº‹åŠ¡å›æ»šï¼Œå†™åˆ°ç£ç›˜çš„æ•°æ®è¦åˆ é™¤å—ï¼Œå¦‚æœä¸åˆ é™¤ï¼ŒMYSQLå¥”æºƒé‡å¯ï¼Œå²‚ä¸æ˜¯å¤šäº†æ“ä½œï¼Œè¯·è€å¸ˆè§£ç­”ä¸‹ç–‘æƒ‘","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435826,"discussion_content":"æ²¡äº‹ï¼Œè¿™äº›æ“ä½œæ²¡æäº¤ï¼Œå´©æºƒæ¢å¤çš„æ—¶å€™å°±å›æ»šäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1546950144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2287841,"avatar":"https://static001.geekbang.org/account/avatar/00/22/e8/e1/6045b299.jpg","nickname":"LPF","note":"","ucode":"036C552D7251E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331547,"discussion_content":"è€å¸ˆæ²¡ç»™ä½ å›ç­”æ¸…æ¥šï¼Œçš„ç¡®redologçš„æ•°æ®å¯èƒ½æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œä½†æ˜¯æ²¡æœ‰commitæ˜¯ä¸æ‰§è¡Œçš„ï¼Œå³ä¸ä¼šå¯¹mysqlæœ‰å½±å“ï¼Œä½ å°±å½“åƒåœ¾æ•°æ®å§ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606897840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2147472,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLbM6ZwjHTUuMNI1gIib8ZQTaljbnh1GxEE7RhffyO3SE5ibhh2fWwG1xkyb1XNnYzUhe5b2zaFYy8g/132","nickname":"Geek_8226bc","note":"","ucode":"9F67898DAC2223","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2287841,"avatar":"https://static001.geekbang.org/account/avatar/00/22/e8/e1/6045b299.jpg","nickname":"LPF","note":"","ucode":"036C552D7251E9","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":394683,"discussion_content":"é‚£å°±æ˜¯æ²¡æœ‰å›æ»šredologçš„æ„æ€äº†ï¼Ÿåªæ˜¯åœ¨åˆ·redologä¸ä¼šåˆ·prepareçŠ¶æ€çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1631978797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":331547,"ip_address":""},"score":394683,"extra":""}]},{"author":{"id":2945508,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/kTIwKz8eeicPsWibiavOkCnhfys2HkhLFmNKN7hV3ax1GNsjs8Ss2BlH0ekelxFibZz4C3cy1R1YcEMopJhXCghqyQ/132","nickname":"Geek_c22ad7","note":"","ucode":"6A3ACF366C02CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":556986,"discussion_content":"å†™ç£ç›˜äº†ä½†æ˜¯æ²¡æœ‰commitæ ‡è¯†ï¼Œæ˜¯æ— æ•ˆçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647595091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57161,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1546667621,"is_pvip":false,"replies":[{"id":"20611","content":"å¯¹çš„ï¼Œlsn å°±æ˜¯å†™åœ¨æ•°æ®é¡µçš„<br>i","user_name":"ä½œè€…å›å¤","comment_id":57161,"uid":"1264162","ip_address":"","utype":1,"ctime":1546669816,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"35906405989","product_id":100020801,"comment_content":"æ‚¨è¯´çš„Lsn ç¡®ä¿ä¸ä¼šäºŒæ¬¡æ‰§è¡Œ æ„æ€æ˜¯æŒä¹…åŒ–åœ¨ç£ç›˜ä¸­çš„é¡µä¹Ÿæœ‰å’Œredo log recordç›¸å…³çš„lsnå— ç„¶åæ ¹æ®lsnçš„å¤§å°åœ¨recoveryé˜¶æ®µç¡®å®šredo logéœ€ä¸éœ€è¦æ‰§è¡Œï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435437,"discussion_content":"å¯¹çš„ï¼Œlsn å°±æ˜¯å†™åœ¨æ•°æ®é¡µçš„\ni","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546669816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56789,"user_name":"æ…§é‘«coming","can_delete":false,"product_type":"c1","uid":1324385,"ip_address":"","ucode":"7BAC9CA255630E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLE4LYb3jrH63ZV98Zpc8DompwDgb1O3nffMoZCmiaibauRyEFv6NDNsST9RWxZExvMLMWb50zaanoQ/132","comment_is_top":false,"comment_ctime":1546562087,"is_pvip":false,"replies":[{"id":"20470","content":"æ˜¯çš„æ˜¯çš„å“¦<br><br>æœ€å¥½å°±æ˜¯æœºå™¨Ioç‰¹åˆ«å¥½ï¼Œä¸ç”¨æ”¹æœ€å¥½äº†ã€‚å®åœ¨è¦æ”¹å°±å°½é‡é€‰é£é™©å°çš„","user_name":"ä½œè€…å›å¤","comment_id":56789,"uid":"1264162","ip_address":"","utype":1,"ctime":1546564427,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"31611333159","product_id":100020801,"comment_content":"è¿™é‡Œæç¤ºå’Œæˆ‘ä¸€æ ·çš„å°ç™½ï¼Œæ³¨æ„è€å¸ˆæœ€åçš„è¯´çš„æå‡ioæ€§èƒ½æ–¹æ³•3ï¼Œæ˜¯åœ¨ä¸»æœºæ‰ç”µæˆ–oså´©æºƒçš„æ—¶å€™ï¼Œpage cache ä¼šä¸¢å¤±;è€Œæœ€åè€å¸ˆå»ºè®®å°†redo logå†™åˆ°page cashï¼Œè¯´çš„æ˜¯èƒ½é˜²æ­¢â€œMySQLå¼‚å¸¸é‡å¯æ—¶æ•°æ®ä¸¢å¤±â€ã€‚ä¹Ÿå°±æ˜¯ä»…ä»…å†™æ•°æ®çš„ç¨‹åºcrashï¼Œé‚£ä¹ˆå·²ç»å†™å…¥page cashä¸­çš„æ•°æ®ä¸ä¼šä¸¢å¤±ï¼Œä½†å¦‚æœç³»ç»Ÿcrashæˆ–è€…é‡å¯çš„è¯ï¼Œé‚£å°±æ²¡åŠæ³•å•¦ğŸ˜†","like_count":7,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435237,"discussion_content":"æ˜¯çš„æ˜¯çš„å“¦\n\næœ€å¥½å°±æ˜¯æœºå™¨Ioç‰¹åˆ«å¥½ï¼Œä¸ç”¨æ”¹æœ€å¥½äº†ã€‚å®åœ¨è¦æ”¹å°±å°½é‡é€‰é£é™©å°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546564427,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56901,"user_name":"HuaMax","can_delete":false,"product_type":"c1","uid":1118488,"ip_address":"","ucode":"2E78DE1AF098AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/18/8cee35f9.jpg","comment_is_top":false,"comment_ctime":1546574955,"is_pvip":false,"replies":[{"id":"20536","content":"æ˜¯çš„ï¼Œwriteæ˜¯åˆ°page cache","user_name":"ä½œè€…å›å¤","comment_id":56901,"uid":"1264162","ip_address":"","utype":1,"ctime":1546577669,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"27316378731","product_id":100020801,"comment_content":"è€å¸ˆåœ¨è§£é‡Šç»„æäº¤çš„åŸç†é‚£é‡Œçš„å›¾ä¸­ç¬¬äºŒæ­¥åº”è¯¥æ˜¯binlog cacheå†™å…¥åˆ°ç³»ç»Ÿpage cacheçš„æ„æ€å§ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435304,"discussion_content":"æ˜¯çš„ï¼Œwriteæ˜¯åˆ°page cache","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546577669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56813,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1546563469,"is_pvip":false,"replies":[{"id":"21083","content":"Page cacheæ˜¯åœ¨æ–‡ä»¶ç³»ç»Ÿçš„å†…å­˜ï¼Œè¿˜æ²¡æŒä¹…åŒ–","user_name":"ä½œè€…å›å¤","comment_id":56813,"uid":"1264162","ip_address":"","utype":1,"ctime":1547100971,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"27316367245","product_id":100020801,"comment_content":"binlog cache å’Œpage cache æœ‰å•¥åŒºåˆ«ï¼Œä¸€ä¸ªåœ¨å†…å­˜ä¸€ä¸ªåœ¨ç£ç›˜ï¼Œpage cache ä¸æ˜¯å·²ç»åœ¨ç£ç›˜ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435250,"discussion_content":"Page cacheæ˜¯åœ¨æ–‡ä»¶ç³»ç»Ÿçš„å†…å­˜ï¼Œè¿˜æ²¡æŒä¹…åŒ–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547100971,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93673,"user_name":"è«å","can_delete":false,"product_type":"c1","uid":1487905,"ip_address":"","ucode":"852C2321C45EE3","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/21/17a88779.jpg","comment_is_top":false,"comment_ctime":1557556727,"is_pvip":false,"replies":[{"id":"34899","content":"æ˜¯çš„<br><br>æ‰€ä»¥æˆ‘ä»¬è¯´ï¼Œå¦‚æœè¦ä¿è¯æ•°æ®ä¸ä¸¢ï¼Œå°±è¦è®¾ç½®=1","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1558709897,"ip_address":"","comment_id":93673,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23032393207","product_id":100020801,"comment_content":"è€å¸ˆï¼Œsync_binlog=Nï¼ŒNä¹‹é—´å®¢æˆ·ç«¯å·²æ˜ç¡®æ”¶åˆ°äº‹åŠ¡æäº¤ï¼Œè€Œå¦‚æœæœŸé—´æœºå™¨å´©æºƒæˆ–æ‰ç”µï¼Œé‡å¯ä¼šå¯¼è‡´æ•°æ®åº“æ•°æ®ä¹Ÿä¸¢å¤±æˆ–å›æ»šï¼Œé‚£ä¸æ˜¯å®¢æˆ·ç«¯å¤„ç†çš„æ•°æ®å¯èƒ½ä¹Ÿä¼šæœ‰é—®é¢˜ï¼Ÿæ¯”å¦‚è´¦æˆ·ç±»æ•°æ®ã€é“¶è¡Œè½¬è´¦ç­‰ï¼Ÿæœ›è§£æƒ‘ï¼","like_count":6,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449726,"discussion_content":"æ˜¯çš„\n\næ‰€ä»¥æˆ‘ä»¬è¯´ï¼Œå¦‚æœè¦ä¿è¯æ•°æ®ä¸ä¸¢ï¼Œå°±è¦è®¾ç½®=1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558709897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63633,"user_name":"å˜»å˜»","can_delete":false,"product_type":"c1","uid":1063149,"ip_address":"","ucode":"C47140EF144225","user_header":"https://static001.geekbang.org/account/avatar/00/10/38/ed/72f73710.jpg","comment_is_top":false,"comment_ctime":1548424912,"is_pvip":false,"replies":[{"id":"22501","content":"ç¬¬ä¸€ä¸ªé—®é¢˜æ²¡çœ‹æ‡‚ã€‚<br><br>â€œå¦‚æœå†™å®Œpage cacheå°±è¿”å›ä¹Ÿæ²¡æœ‰æŒä¹…åŒ–å§â€ï¼Œ æ˜¯çš„ï¼Œ<br><br>â€œå®¢æˆ·ç«¯æ”¶åˆ°äº‹åŠ¡æˆåŠŸçš„æ¶ˆæ¯ï¼Œäº‹åŠ¡å°±ä¸€å®šæŒä¹…åŒ–äº†â€æ˜¯å»ºç«‹åœ¨åŒ1åŸºç¡€ä¸Šçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548433849,"ip_address":"","comment_id":63633,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23023261392","product_id":100020801,"comment_content":"1. å¦‚æœå®¢æˆ·ç«¯æ”¶åˆ°äº‹åŠ¡æˆåŠŸçš„æ¶ˆæ¯ï¼Œäº‹åŠ¡å°±ä¸€å®šæŒä¹…åŒ–äº†ï¼›<br>commitæ˜¯åœ¨ä»€ä¹ˆé˜¶æ®µè¿”å›çš„ï¼Ÿå¦‚æœå†™å®Œpage cacheå°±è¿”å›ä¹Ÿæ²¡æœ‰æŒä¹…åŒ–å§ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437662,"discussion_content":"ç¬¬ä¸€ä¸ªé—®é¢˜æ²¡çœ‹æ‡‚ã€‚\n\nâ€œå¦‚æœå†™å®Œpage cacheå°±è¿”å›ä¹Ÿæ²¡æœ‰æŒä¹…åŒ–å§â€ï¼Œ æ˜¯çš„ï¼Œ\n\nâ€œå®¢æˆ·ç«¯æ”¶åˆ°äº‹åŠ¡æˆåŠŸçš„æ¶ˆæ¯ï¼Œäº‹åŠ¡å°±ä¸€å®šæŒä¹…åŒ–äº†â€æ˜¯å»ºç«‹åœ¨åŒ1åŸºç¡€ä¸Šçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548433849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57506,"user_name":"æ…§é‘«coming","can_delete":false,"product_type":"c1","uid":1324385,"ip_address":"","ucode":"7BAC9CA255630E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLE4LYb3jrH63ZV98Zpc8DompwDgb1O3nffMoZCmiaibauRyEFv6NDNsST9RWxZExvMLMWb50zaanoQ/132","comment_is_top":false,"comment_ctime":1546824372,"is_pvip":false,"replies":[{"id":"20725","content":"è¿™æ ·å°±æ˜¯æ¯10æ¬¡fsyncä¸€ä¸‹(sync_no_delay_count &gt;sync_binlog)","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546827713,"ip_address":"","comment_id":57506,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23021660852","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®binlog_group_commit_sync_no_delay_countå’Œsync_binlogå‚æ•°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå‰è€…è®¾ç½®ä¸º10åè€…è®¾ç½®ä¸º5ï¼Œé‚£æ˜¯å‡ æ¬¡write page_cacheæ‰å†™ç›˜ä¸€æ¬¡ï¼Ÿ","like_count":5,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435613,"discussion_content":"è¿™æ ·å°±æ˜¯æ¯10æ¬¡fsyncä¸€ä¸‹(sync_no_delay_count &amp;gt;sync_binlog)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546827713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124320,"user_name":"ä¸€åªç¾Š","can_delete":false,"product_type":"c1","uid":1303375,"ip_address":"","ucode":"6A3ADF7DA30DA3","user_header":"https://static001.geekbang.org/account/avatar/00/13/e3/4f/4709b019.jpg","comment_is_top":false,"comment_ctime":1565860005,"is_pvip":false,"replies":[{"id":"45668","content":"è®°å½•æ•°æ®å°±æ˜¯å…ˆå†™å†…å­˜ï¼Œç„¶åå†™æ—¥å¿—ï¼ˆredoå’Œbinlogï¼‰ï¼Œåå°ä¼šæœ‰æœºä¼šå°†å†…å­˜çš„æ•°æ®å†™åˆ°æ•°æ®ç›˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1565879978,"ip_address":"","comment_id":124320,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18745729189","product_id":100020801,"comment_content":"ä¹Ÿä¸çŸ¥é“è¿˜ä¼šä¸ä¼šæœ‰é—®é¢˜è§£ç­”ï¼Œè¯•è¯•ã€‚<br><br>æˆ‘çš„é—®é¢˜æ˜¯ï¼šç°åœ¨çŸ¥é“ redo log å’Œ binlog çš„è½ç›˜æ—¶æœºã€‚ä½†æ˜¯æˆ‘ä¸çŸ¥é“è®°å½•æ•°æ®æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ã€ä»€ä¹ˆæ–¹å¼è½ç›˜çš„ã€‚<br>ä¸çŸ¥é“è¿˜æœ‰æœºä¼šå¾—åˆ°è§£ç­”ä¸ã€‚","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463115,"discussion_content":"è®°å½•æ•°æ®å°±æ˜¯å…ˆå†™å†…å­˜ï¼Œç„¶åå†™æ—¥å¿—ï¼ˆredoå’Œbinlogï¼‰ï¼Œåå°ä¼šæœ‰æœºä¼šå°†å†…å­˜çš„æ•°æ®å†™åˆ°æ•°æ®ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565879978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2355521,"avatar":"https://static001.geekbang.org/account/avatar/00/23/f1/41/76c0758f.jpg","nickname":"å›æˆ˜","note":"","ucode":"A8619A79A5CED9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":365374,"discussion_content":"å‰é¢è®²è¿‡ä»€ä¹ˆæ—¶å€™å°†è„é¡µåˆ·åˆ°ç£ç›˜ï¼š1ã€redo logå†™æ»¡äº†ï¼ˆè¦æ¨è¿›checkpointï¼ŒæŠŠå¯¹åº”çš„è„é¡µåˆ·ç›˜ï¼‰ï¼›2ã€å†…å­˜æ»¡äº†ï¼ˆè¦æ·˜æ±°æ•°æ®é¡µï¼Œå¦‚æœæ•°æ®é¡µæ˜¯è„é¡µè¦å…ˆå°†è„é¡µåˆ·ç›˜ï¼‰ï¼›3ã€ç³»ç»Ÿç©ºé—²çš„æ—¶å€™ï¼›4ã€mysqlæ­£å¸¸å…³é—­çš„æ—¶å€™ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1617784818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63076,"user_name":"J!","can_delete":false,"product_type":"c1","uid":1305003,"ip_address":"","ucode":"71C946119B59D1","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/ab/37903736.jpg","comment_is_top":false,"comment_ctime":1548245618,"is_pvip":false,"replies":[{"id":"22353","content":"ä¸ä¼šçš„ï¼Œå¤§å®¶åˆ†å¤´å†™ï¼Œç„¶åä¸€èµ·æŒä¹…åŒ–åˆ°ç£ç›˜","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548257729,"ip_address":"","comment_id":63076,"utype":1}],"discussion_count":4,"race_medal":0,"score":"18728114802","product_id":100020801,"comment_content":"å…±åŒå†™ä¸€ä¸ªbinlogæ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹åº”è¯¥éœ€è¦é”æ¥ç»´æŒæäº¤çš„æ—¶åºå§ï¼Œå†™æ–‡ä»¶çš„æ—¶å€™æ˜¯ä¸æ˜¯å¯èƒ½ä¼šå˜æˆç“¶é¢ˆç‚¹ï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437459,"discussion_content":"ä¸ä¼šçš„ï¼Œå¤§å®¶åˆ†å¤´å†™ï¼Œç„¶åä¸€èµ·æŒä¹…åŒ–åˆ°ç£ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548257729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1336951,"avatar":"https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg","nickname":"lzh","note":"","ucode":"C3D83DF4230109","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10966,"discussion_content":"binlog bufferå’Œbinlog fileé—´è¿˜éš”ç€ä¸€ä¸ªpage cacheå‘¢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568345054,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1517390,"avatar":"https://static001.geekbang.org/account/avatar/00/17/27/4e/cfc94866.jpg","nickname":"é±¼å¡˜å±€ç å†œ","note":"","ucode":"D265DB38AC5EA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387219,"discussion_content":"æ“ä½œçš„æ•°æ®æœ‰äº¤é›†çš„è¯ï¼Œè¡Œé”ä¼šé˜»å¡ç»´æŒé¡ºåºï¼Œæ“ä½œä¸åŒæ•°æ®ï¼Œé¡ºåºæ— æ‰€è°“çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628059549,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331367,"discussion_content":"åŒé—®ï¼Œè°æ¥ä¿è¯é¡ºåºå‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606835776,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57805,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1546914334,"is_pvip":false,"replies":[{"id":"21110","content":"1. é»˜è®¤è¡Œä¸ºæ˜¯opt_binlog_order_commits=ONï¼Œæ˜¯ä¿è¯é¡ºåºçš„ï¼›<br><br>2. å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹æŒ‰é¡ºåºä¸€ä¸ªé˜¶æ®µä¸€ä¸ªé˜¶æ®µåœ°è°ƒç”¨ä¸‹æ¥ï¼Œè¿™ä¹ˆä¿è¯é¡ºåºçš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547118226,"ip_address":"","comment_id":57805,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18726783518","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå…³äºç»„æäº¤è¿˜æ˜¯æœ‰å‡ ä¸ªç–‘æƒ‘ï¼š<br>æˆ‘ç†è§£çš„ï¼Œç»„æäº¤åˆ†ä¸ºbinlogå’Œredologã€‚<br>binlogå¦‚æœæ²¡æœ‰ç»„æäº¤çš„è¯ï¼Œæ˜¯ä¸æ˜¯æ¶‰åŠåˆ° å†™binlogçš„é¡ºåºä¸å†™redologçš„é¡ºåºä¸ä¸€è‡´çš„é—®é¢˜ï¼Ÿè¿™ä¸ªé¡ºåºé—®é¢˜éœ€è¦åŠ é”æ¥è§£å†³ï¼Œäº‹åŠ¡ä¹‹é—´ä¸²è¡Œæ‰§è¡Œprepareåˆ°commitçš„è¿‡ç¨‹ã€‚<br>è€Œbinlogæœ‰äº†ç»„æäº¤ï¼Œå†…éƒ¨å®é™…ä¸Šé€šè¿‡é˜Ÿåˆ—çš„æœºåˆ¶ï¼Œæ—¢ä¿è¯äº†ç»„æäº¤å‡å°‘IOPSæ¶ˆè€—ï¼ŒåŒæ—¶é˜Ÿåˆ—çš„æœºåˆ¶ä¿è¯äº†binlogå’Œredologå†™å…¥çš„é¡ºåºæ€§ã€‚<br><br>ä¸Šè¿°è¿™ä¹ˆç†è§£æ­£ç¡®å—ï¼Ÿ<br><br>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯å›¾5ä¸¤é˜¶æ®µæäº¤ç»†åŒ–çš„è¿‡ç¨‹ï¼š<br>binlogçš„write åˆ° syncä¹‹é—´æ’å…¥äº† redologçš„ syncã€‚å›¾ä¸Šçš„é¡ºåºè¡¨ç¤ºbinlogçš„syncå¿…é¡»ç­‰åˆ°redologçš„syncæ‰§è¡Œåæ‰èƒ½æ‰§è¡Œï¼Ÿ redologåœ¨å¼•æ“å†…éƒ¨ï¼Œbinlogåœ¨serverç«¯ï¼Œè¿™ä¸ªä¸²è¡Œæ˜¯å¦‚ä½•ä¿è¯çš„ï¼Ÿï¼Ÿï¼ˆå› ä¸ºæˆ‘è®¤ä¸ºserverä¸innodbåªä¼šäº¤äº’ä¸¤æ¬¡å‘€ï¼Œç¬¬ä¸€æ¬¡æ˜¯prepareè¯·æ±‚ï¼Œç¬¬äºŒæ¬¡æ˜¯æœ€åçš„commitè¯·æ±‚ï¼Œbinlogæ€ä¹ˆåšåˆ°ç­‰å¾…redolog syncå®Œåå†syncï¼Ÿï¼‰","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435768,"discussion_content":"1. é»˜è®¤è¡Œä¸ºæ˜¯opt_binlog_order_commits=ONï¼Œæ˜¯ä¿è¯é¡ºåºçš„ï¼›\n\n2. å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹æŒ‰é¡ºåºä¸€ä¸ªé˜¶æ®µä¸€ä¸ªé˜¶æ®µåœ°è°ƒç”¨ä¸‹æ¥ï¼Œè¿™ä¹ˆä¿è¯é¡ºåºçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547118226,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56821,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1546564473,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18726433657","product_id":100020801,"comment_content":"redolog é‡Œé¢æœ‰å·²ç»æäº¤äº‹ç‰©æ—¥å¿—ï¼Œè¿˜æœ‰æœªæäº¤äº‹ç‰©æ—¥å¿—éƒ½æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œæ­¤æ—¶å¼‚å¸¸é‡å¯ï¼Œbinlog é‡Œé¢ä¸æ˜¯å¤šä½™è®°å½•çš„æœªæäº¤äº‹ç‰©ï¼Œå¹²å˜›ä¸è®¾è®¡ä¸æ·»åŠ æœªæäº¤äº‹ç‰©ä¸æ›´å¥½","like_count":4},{"had_liked":false,"id":290826,"user_name":"NotFoundMoneyException:Â¥0","can_delete":false,"product_type":"c1","uid":2596556,"ip_address":"","ucode":"D454002955D09C","user_header":"https://static001.geekbang.org/account/avatar/00/27/9e/cc/1d57f923.jpg","comment_is_top":false,"comment_ctime":1619771748,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"14504673636","product_id":100020801,"comment_content":"è€å¸ˆï¼Œredo logåœ¨åˆ·ç›˜çš„æ—¶å€™æŠŠæœªæäº¤çš„äº‹åŠ¡Aä¹Ÿåˆ·ç›˜ã€‚<br>1ã€é‚£ä¹ˆäº‹åŠ¡AçœŸæ­£åˆ·ç›˜çš„æ—¶å€™ï¼Œæ—¥å¿—æ˜¯æ€ä¹ˆåœ¨æ–‡ä»¶å­˜æ”¾çš„ã€‚æ˜¯ç›´æ¥è¿½åŠ ï¼Œè¿˜æ˜¯æ‰¾åˆ°å¯¹åº”çš„äº‹åŠ¡æ—¥å¿—ä¸Šä¿®æ”¹ï¼Ÿ<br>2ã€åœ¨åˆ·è„é¡µçš„æ—¶å€™æŠŠredo logçš„checkpointå¾€å‰æ¨åˆ°è¶…è¿‡Aäº‹åŠ¡æ—¥å¿—ï¼ˆæ­¤æ—¶è¿˜æ²¡æäº¤ï¼‰çš„ä½ç½®ï¼Œé‚£ä¹ˆæ–°è½ç›˜çš„redo logä¼šæŠŠäº‹åŠ¡Açš„æ—¥å¿—ç»™è¦†ç›–æ‰ï¼ŒAäº‹åŠ¡æ—¥å¿—æäº¤åï¼Œç„¶åå®•æœºï¼Œæ¢å¤çš„æ—¶å€™Aäº‹åŠ¡çš„æ•°æ®ä¼šä¸ä¼šä¸¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1261530,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDKsicmpne7xQNocwRQ80DDZ3CzjsDoVIcH0SBiaYzS056oVOx4pEeEVeCaXE3QtsjUIEI0x1xQVTw/132","nickname":"muggle","note":"","ucode":"D78087BCAD0860","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535390,"discussion_content":"åŒæ ·å¯¹ç¬¬ä¸€ä¸ªé—®é¢˜æ„Ÿåˆ°å›°æƒ‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638424876,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2680957,"avatar":"","nickname":"Geek_dbf688","note":"","ucode":"B9E078909700C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381712,"discussion_content":"é—®é¢˜1æˆ‘è§‰å¾—å¦‚æœæ˜¯è¿½åŠ çš„è¯ï¼Œé‚£ä¹‹å‰ç»„æäº¤å…ˆåˆ·ç›˜åˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Œåæ­£åé¢ä¹Ÿè¦å†èµ°ä¸€æ¬¡\né—®é¢˜2æˆ‘ä¹Ÿæœ‰ç–‘é—®ï¼Œè­¬å¦‚å¦‚æœä¸€ä¸ªé•¿äº‹åŠ¡ï¼Œä¸€ç›´ä¸æäº¤ï¼Œéƒ¨åˆ†redo logå·²ç»é€šè¿‡ç»„æäº¤æŒä¹…åŒ–äº†ï¼Œé‚£ä¹ˆå¾ªç¯å†™çš„æ—¶å€™ï¼Œè‚¯å®šä¸æ˜¯ç›´æ¥è¦†ç›–å§ï¼Œä¸ç„¶å°±ä¸¢å¤±äº†ï¼Œï¼Œé‚£ç©¶ç«Ÿæ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625192374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2680957,"avatar":"","nickname":"Geek_dbf688","note":"","ucode":"B9E078909700C3","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544567,"discussion_content":"åŒé—®ï¼Œå¦‚æœä½ çŸ¥é“äº†ç­”æ¡ˆï¼Œè¿˜è¯·å‘Šè¯‰æˆ‘ä¸€ä¸‹å‘€ï¼Œæ„Ÿè°¢å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641568000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":381712,"ip_address":""},"score":544567,"extra":""}]}]},{"had_liked":false,"id":117564,"user_name":"æ²™æ¼ é‡Œçš„éª†é©¼","can_delete":false,"product_type":"c1","uid":1012559,"ip_address":"","ucode":"5EC18A71B3A594","user_header":"https://static001.geekbang.org/account/avatar/00/0f/73/4f/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1564094439,"is_pvip":true,"discussion_count":2,"race_medal":0,"score":"14448996327","product_id":100020801,"comment_content":"è¯·æ•™ä¸‹ï¼Œä¸¤é˜¶æ®µæäº¤ç»†åŒ–é‡Œé¢ï¼Œredologçš„fsyncè¿™ä¸€æ­¥æ˜¯æŒä¹…åŒ–è½ç£ç›˜ï¼Œæˆ‘ç†è§£åº”è¯¥æ˜¯æœ€è€—æ—¶çš„ï¼Œä¸ºä»€ä¹ˆä½ åè€Œè¯´è¿™ä¸€æ­¥éå¸¸å¿«å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1314724,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0f/a4/0b49469f.jpg","nickname":"æœ¨å­00","note":"","ucode":"8F78CA722EB29B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310342,"discussion_content":"redo log æ˜¯é¡ºåºå†™ï¼Œæ¯”éšæœºå†™å¿«ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601786095,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2166073,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/k3YD3y3BzGDSdrwRJyJY4BXsNJibfM4uzOdDVKIAlFApR2FZCLg2ibrZtJ4vuahA3LHLW9GKzH5CMGqCDhWjhZqg/132","nickname":"æˆ’é…’çš„æç™½","note":"","ucode":"744E1A22761647","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406772,"discussion_content":"redologåªæ˜¯è®°å½•å¯¹æ•°æ®é¡µçš„ä¿®æ”¹ï¼Œæ²¡æœ‰å®Œæ•´çš„rowæ•°æ®ï¼Œæ‰€ä»¥å’Œbinlogç›¸æ¯”è‚¯å®šå°å¾ˆå¤šï¼Œæ•…å†™èµ·æ¥å¿«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634829131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":99769,"user_name":"Tunayoyo","can_delete":false,"product_type":"c1","uid":1447213,"ip_address":"","ucode":"E77AFDE575CE04","user_header":"https://static001.geekbang.org/account/avatar/00/16/15/2d/8447e8c8.jpg","comment_is_top":false,"comment_ctime":1559294940,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"14444196828","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œinnodb_flush_log_at_trx_commitè®¾ç½®å’Œåå°çº¿ç¨‹çš„åˆ·ç›˜æ“ä½œçš„å…³ç³»æ˜¯å•¥ï¼Ÿ<br>","like_count":3,"discussions":[{"author":{"id":1232273,"avatar":"https://static001.geekbang.org/account/avatar/00/12/cd/91/3d6c53f8.jpg","nickname":"Nash.Z","note":"","ucode":"76B14722664402","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6469,"discussion_content":"åŒé—®ï¼Œçœ‹ä¸Šè¾¹æ²¡å†™æ¸…æ¥šï¼Œéš¾é“ä¸ç®¡innodb_flush_log_at_trx_commitå‚æ•°è®¾ç½®æˆä»€ä¹ˆï¼Œåå°çº¿ç¨‹æ¯ç§’éƒ½ä¼šåˆ·ç›˜ä¸€æ¬¡å—ï¼Ÿ","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566914330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1336009,"avatar":"https://static001.geekbang.org/account/avatar/00/14/62/c9/7da27891.jpg","nickname":"DKSky","note":"","ucode":"69371A81033949","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1232273,"avatar":"https://static001.geekbang.org/account/avatar/00/12/cd/91/3d6c53f8.jpg","nickname":"Nash.Z","note":"","ucode":"76B14722664402","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":54176,"discussion_content":"æˆ‘ç†è§£æ˜¯çš„ï¼Œè¿™ä¸¤ä¸ªä¹‹é—´æ²¡æœ‰å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574264305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6469,"ip_address":""},"score":54176,"extra":""}]},{"author":{"id":1035562,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/cd/2a/bdbed6ed.jpg","nickname":"æ— è‡æœ‹å‹","note":"","ucode":"80482C5F0464A3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":49113,"discussion_content":"åº”è¯¥æ˜¯è¿™æ ·ï¼Œå½“è®¾ç½®ä¸º0æ—¶ï¼Œäº‹åŠ¡æäº¤ä¸ä¼šè§¦å‘redo-log-bufferçš„writeæ“ä½œï¼Œè€Œæ˜¯ç•™ç»™åå°çº¿ç¨‹æ¯ç§’ä¸€æ¬¡çš„åˆ·ç›˜æ“ä½œï¼Œå› æ­¤å®ä¾‹crashå°†æœ€å¤šä¸¢å¤±1ç§’é’Ÿå†…çš„äº‹åŠ¡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573556292,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":65034,"user_name":"miu","can_delete":false,"product_type":"c1","uid":1368901,"ip_address":"","ucode":"3D73FF3C09231A","user_header":"","comment_is_top":false,"comment_ctime":1549008251,"is_pvip":false,"replies":[{"id":"23187","content":"è¿™ä¸¤ä¸ªé€»è¾‘ä¸å»ºè®®æ”¾åˆ°ä¸€èµ·ç®—<br>å°±æ˜¯æŒ‰ç…§è¿™æ ·ï¼š<br>1. æœ‰è®¾ç½® BINLOG_GROUP_COMMIT_SYNC_NO_DELAY_COUNTè¿™ä¸ªå€¼ï¼Œï¼ˆå‡è®¾SYNC_DELAYå¾ˆå¤§ï¼‰ï¼Œæäº¤çš„æ—¶å€™å°±å¾—ç­‰è¿™ä¹ˆå¤šæ¬¡æ‰èƒ½è¿‡ï¼›<br>2. åˆ°äº†æäº¤é˜¶æ®µï¼Œåˆè¦æŒ‰ç…§sync_binlogæ¥åˆ¤æ–­æ˜¯å¦åˆ·ç›˜ã€‚<br><br><br>æ–°æ˜¥å¿«ä¹~","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1549270703,"ip_address":"","comment_id":65034,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14433910139","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå…³äºBINLOG_GROUP_COMMIT_SYNC_DELAYï¼Œ<br>BINLOG_GROUP_COMMIT_SYNC_NO_DELAY_COUNTï¼Œ<br>SYNC_BINLOGä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼š<br>è‹¥SYNC_BINLOG&gt;1æ—¶ï¼Œä¸”è®¾ç½®äº†BINLOG_GROUP_COMMIT_SYNC_DELAYå’ŒBINLOG_GROUP_COMMIT_SYNC_NO_DELAY_COUNTä¸¤ä¸ªå‚æ•°ã€‚<br>ä¾‹å¦‚ <br>sync_binlog=2ï¼Œ<br>BINLOG_GROUP_COMMIT_SYNC_DELAY=1000000ï¼Œ<br>BINLOG_GROUP_COMMIT_SYNC_NO_DELAY_COUNT=3ï¼Œ<br>é‚£ä¹ˆåœ¨æ‰§è¡Œå®Œç¬¬1ä¸ªäº‹åŠ¡åï¼Œåœ¨ç¬¬2ä¸ªäº‹åŠ¡æäº¤æ—¶ï¼Œä¼šæ ¹æ®åç»­çš„äº‹åŠ¡æäº¤æ¥åˆ¤æ–­fsyncç­‰å¾…çš„æ—¶é—´ï¼Œ<br>è‹¥åç»­åœ¨1ç§’å†…æ²¡æœ‰ç´¯ç§¯3ä¸ªäº‹åŠ¡çš„æäº¤ï¼Œåˆ™ä¼šç­‰å¾…1ç§’åå†åšfsyncï¼Œä»SQLè¯­å¥æ¥çœ‹ï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªè¯­å¥å¾ˆå¿«ï¼Œç¬¬äºŒä¸ªè¯­å¥éœ€è¦ç­‰å¾…1ç§’æ‰æˆåŠŸã€‚è¿™æ—¶å»¶æ—¶ç­‰å¾…çš„æ—¶é—´æ˜¯BINLOG_GROUP_COMMIT_SYNC_DELAYæ‰€è®¾ç½®çš„å€¼ã€‚<br>è‹¥æ‰§è¡Œå®Œç¬¬1ä¸ªäº‹åŠ¡åï¼Œå¹¶è¡Œæ‰§è¡Œ3ä¸ªäº‹åŠ¡ï¼ˆ1ç§’å†…å®Œæˆï¼‰ï¼Œåˆ™åç»­3ä¸ªäº‹åŠ¡ä¼šåŒæ—¶åšfsyncï¼Œè¿™æ—¶å»¶æ—¶ç­‰å¾…çš„æ—¶é—´æ˜¯BINLOG_GROUP_COMMIT_SYNC_NO_DELAY_COUNTè®¾ç½®çš„æ•°é‡çš„äº‹åŠ¡æäº¤çš„é—´éš”æ—¶é—´ã€‚<br>ä¹Ÿå°±æ˜¯sync_binlog+BINLOG_GROUP_COMMIT_SYNC_NO_DELAY_COUNT-1 ä¸ªäº‹åŠ¡åšä¸€æ¬¡fsyncã€‚<br>æˆ‘æµ‹è¯•çš„ç‰ˆæœ¬æ˜¯MySQLå®˜æ–¹5.7.24ï¼Œè¯·è€å¸ˆç‚¹è¯„ã€‚<br><br>","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438287,"discussion_content":"è¿™ä¸¤ä¸ªé€»è¾‘ä¸å»ºè®®æ”¾åˆ°ä¸€èµ·ç®—\nå°±æ˜¯æŒ‰ç…§è¿™æ ·ï¼š\n1. æœ‰è®¾ç½® BINLOG_GROUP_COMMIT_SYNC_NO_DELAY_COUNTè¿™ä¸ªå€¼ï¼Œï¼ˆå‡è®¾SYNC_DELAYå¾ˆå¤§ï¼‰ï¼Œæäº¤çš„æ—¶å€™å°±å¾—ç­‰è¿™ä¹ˆå¤šæ¬¡æ‰èƒ½è¿‡ï¼›\n2. åˆ°äº†æäº¤é˜¶æ®µï¼Œåˆè¦æŒ‰ç…§sync_binlogæ¥åˆ¤æ–­æ˜¯å¦åˆ·ç›˜ã€‚\n\n\næ–°æ˜¥å¿«ä¹~","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1549270703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63571,"user_name":"Geek_527020","can_delete":false,"product_type":"c1","uid":1097150,"ip_address":"","ucode":"4DAAC586AB1563","user_header":"https://static001.geekbang.org/account/avatar/00/10/bd/be/53350286.jpg","comment_is_top":false,"comment_ctime":1548403654,"is_pvip":false,"replies":[{"id":"22495","content":"ä¸ä¼šå•Šï¼Œæœ‰MVCCçš„ï¼Œ 08ç¯‡å†çœ‹ä¸‹<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548413578,"ip_address":"","comment_id":63571,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14433305542","product_id":100020801,"comment_content":"æ‚¨å¥½ï¼Œè€å¸ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªä»¥åï¼Œç»„æäº¤ï¼ŒæŠŠä¸ºæäº¤äº‹åŠ¡çš„redo logå†™å…¥ç£ç›˜ï¼Œå¦‚æœæœ‰æŸ¥è¯¢ï¼Œå²‚ä¸æ˜¯æŸ¥åˆ°æœªæäº¤äº‹åŠ¡çš„æ›´æ–°å†…å®¹äº†?","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437641,"discussion_content":"ä¸ä¼šå•Šï¼Œæœ‰MVCCçš„ï¼Œ 08ç¯‡å†çœ‹ä¸‹\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548413578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58547,"user_name":"roaming","can_delete":false,"product_type":"c1","uid":1039232,"ip_address":"","ucode":"2736679690AB81","user_header":"https://static001.geekbang.org/account/avatar/00/0f/db/80/6b7629d7.jpg","comment_is_top":false,"comment_ctime":1547111021,"is_pvip":false,"replies":[{"id":"21179","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547134531,"ip_address":"","comment_id":58547,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14432012909","product_id":100020801,"comment_content":"çœ‹äº†å‡ éï¼Œç»ˆäºçœ‹æ˜ç™½äº†","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436114,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547134531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57162,"user_name":"way","can_delete":false,"product_type":"c1","uid":1302713,"ip_address":"","ucode":"AD1CBEBA5FDBA9","user_header":"https://static001.geekbang.org/account/avatar/00/13/e0/b9/bca7ff9a.jpg","comment_is_top":false,"comment_ctime":1546668602,"is_pvip":false,"replies":[{"id":"20629","content":"é¢ï¼Œè¿™ä¸ªæ˜¯é”™è¯¯ä½¿ç”¨å‚æ•°çš„å¥½ä¾‹å­ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546678714,"ip_address":"","comment_id":57162,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14431570490","product_id":100020801,"comment_content":"è€å¸ˆæ–°å¹´å¥½ã€‚ä¹‹å‰é‡åˆ°ä¸ªæœ‰æ„æ€çš„ç°è±¡ã€‚ä¸»ä»åˆ‡æ¢ä»¥åã€‚ä»åº“å»¶è¿Ÿä¸€ç›´è¿½ä¸ä¸Šã€‚æŸ¥ä¸‹æ¥æ˜¯ç»„æäº¤çš„ä¸¤ä¸ªå‚æ•°æœ‰è®¾ç½®ã€‚éƒ½è°ƒæ•´ä¸º0ä»¥åï¼Œå¾ˆå¿«å°±è¿½ä¸Šäº†ã€‚","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435438,"discussion_content":"é¢ï¼Œè¿™ä¸ªæ˜¯é”™è¯¯ä½¿ç”¨å‚æ•°çš„å¥½ä¾‹å­ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546678714,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":293101,"user_name":"å¼ ä¸‰ä¸°","can_delete":false,"product_type":"c1","uid":1155275,"ip_address":"","ucode":"3A6215A40B3B21","user_header":"https://static001.geekbang.org/account/avatar/00/11/a0/cb/aab3b3e7.jpg","comment_is_top":false,"comment_ctime":1621217333,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10211151925","product_id":100020801,"comment_content":"å¦‚æœç»„æäº¤çš„æ—¶å€™ï¼Œæœªæäº¤çš„äº‹åŠ¡è¢«åŠ¨è½ç›˜ï¼Œè€Œæ°å¥½è¿™ä¸ªè¢«åŠ¨æäº¤äº‹åŠ¡åˆå›æ»šäº†ï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªæœªæäº¤äº‹åŠ¡ä¼šä»ç£ç›˜ä¸­åˆ é™¤ä¹ˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":2680957,"avatar":"","nickname":"Geek_dbf688","note":"","ucode":"B9E078909700C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381710,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625192132,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":154280,"user_name":"jian","can_delete":false,"product_type":"c1","uid":1185102,"ip_address":"","ucode":"21CDBBB8000F0C","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/4e/4636a81d.jpg","comment_is_top":false,"comment_ctime":1574403234,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10164337826","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ åœ¨æ–‡ç« ä¸­ä¸¤ä¸ªåœ°æ–¹è¯´åˆ°redo logçš„fsyncæ“ä½œã€‚<br>ç¬¬ä¸€ä¸ªåœ°æ–¹æ˜¯å›¾2è¯´â€œæ—¥å¿—å†™åˆ° redo log buffer æ˜¯å¾ˆå¿«çš„ï¼Œwirte åˆ° page cache ä¹Ÿå·®ä¸å¤šï¼Œä½†æ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜çš„é€Ÿåº¦å°±æ…¢å¤šäº†â€ã€‚æˆ‘ç†è§£redo logçš„fsyncæ“ä½œæ¶‰åŠç£ç›˜IOï¼Œä¼šæ¯”è¾ƒæ…¢ã€‚<br>ç¬¬äºŒä¸ªåœ°æ–¹åœ¨å›¾5è¯´â€œä¸è¿‡é€šå¸¸æƒ…å†µä¸‹ç¬¬ 3 æ­¥æ‰§è¡Œå¾—ä¼šå¾ˆå¿«ï¼Œæ‰€ä»¥ binlog çš„ write å’Œ fsync é—´çš„é—´éš”æ—¶é—´çŸ­ï¼Œå¯¼è‡´èƒ½é›†åˆåˆ°ä¸€èµ·æŒä¹…åŒ–çš„ binlog æ¯”è¾ƒå°‘ï¼Œå› æ­¤ binlog çš„ç»„æäº¤çš„æ•ˆæœé€šå¸¸ä¸å¦‚ redo logçš„æ•ˆæœé‚£ä¹ˆå¥½ã€‚â€ è¿™é‡Œè¯´ç¬¬3æ­¥redo logçš„prepareæ“ä½œsyncä¼šå¾ˆå¿«ã€‚<br><br>è¿™ä¸¤ä¸ªåœ°æ–¹æ˜¯å¦ä¸€è‡´å‘¢ï¼Ÿ<br>","like_count":2},{"had_liked":false,"id":120249,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1564815323,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"10154749915","product_id":100020801,"comment_content":"æ‰“å¡ï¼Œå‡å¦‚å†™ç£ç›˜çš„é€Ÿåº¦å’Œå†™å†…å­˜ä¸€æ ·ï¼Œç¼–ç¨‹çš„ä¸–ç•Œæˆ‘æƒ³ä¼šç®€å•å¾ˆå¤šã€‚","like_count":2,"discussions":[{"author":{"id":1032309,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c0/75/acc6ebef.jpg","nickname":"å®ˆæ‹™","note":"","ucode":"44422C46F303EB","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":163221,"discussion_content":"ä¸ï¼Œè¿˜ä¼šæœ‰ç¼“å­˜ï¼›å±€éƒ¨æ€§æ°¸è¿œå­˜å‚¨ï¼›çŸ¥è¯†å°ºåº¦çš„å·®å¼‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581062049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243369,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f8/e9/f16a536b.jpg","nickname":"æå®¢-ç»å½±","note":"","ucode":"D302CE68123E74","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":128530,"discussion_content":"å‡å¦‚é‡å¯å†…å­˜æ•°æ®ä¹Ÿä¼šä¸ä¼šä¸¢å¤±æˆ–é‡æ–°è½½å…¥ï¼Œè¿™ä¸ªè§£å†³ç°åœ¨å°±å¯ä»¥ç”¨å†…å­˜æ›¿æ¢ç¡¬ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578647863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1305538,"avatar":"https://static001.geekbang.org/account/avatar/00/13/eb/c2/90a701ea.jpg","nickname":"littleneko","note":"","ucode":"894F15B2D9A824","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1243369,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f8/e9/f16a536b.jpg","nickname":"æå®¢-ç»å½±","note":"","ucode":"D302CE68123E74","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":235856,"discussion_content":"NVMäº†è§£ä¸€ä¸‹ï¼Œè™½ç„¶è¾¾ä¸åˆ°å†…å­˜çš„é€Ÿåº¦ï¼Œä½†æ˜¯ç°åœ¨å·²ç»æœ‰ä¸€äº›ç©æ³•äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587049777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":128530,"ip_address":""},"score":235856,"extra":""}]}]},{"had_liked":false,"id":99752,"user_name":"Tunayoyo","can_delete":false,"product_type":"c1","uid":1447213,"ip_address":"","ucode":"E77AFDE575CE04","user_header":"https://static001.geekbang.org/account/avatar/00/16/15/2d/8447e8c8.jpg","comment_is_top":false,"comment_ctime":1559291979,"is_pvip":false,"replies":[{"id":"37467","content":"redo logä¸éœ€è¦â€œé¡ºåºâ€æŒä¹…åŒ–çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1560473202,"ip_address":"","comment_id":99752,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10149226571","product_id":100020801,"comment_content":"æ˜¯ä¸æ˜¯è¯´å¹¶è¡Œçš„äº‹åŠ¡ï¼Œéƒ½åœ¨æäº¤ï¼Œredo logå°±ä¸èƒ½è¢«é¡ºå¸¦æŒä¹…åŒ–?","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452254,"discussion_content":"redo logä¸éœ€è¦â€œé¡ºåºâ€æŒä¹…åŒ–çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1560473202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63929,"user_name":"alias cd=rm -rf","can_delete":false,"product_type":"c1","uid":1318325,"ip_address":"","ucode":"E7B27D76305B75","user_header":"https://static001.geekbang.org/account/avatar/00/14/1d/b5/971261fd.jpg","comment_is_top":false,"comment_ctime":1548599650,"is_pvip":false,"replies":[{"id":"22607","content":"1. â€œè¿™æ—¶å€™ç£ç›˜ä¸­çš„redologçš„çŠ¶æ€æ˜¯ä»€ä¹ˆçŠ¶æ€å‘¢ï¼Ÿæ˜¯prepareä¹ˆï¼Ÿâ€è¿™ä¸ªâ€œè¿™æ—¶å€™â€æ˜¯ä»€ä¹ˆæ„æ€ğŸ˜†<br>2. è¿˜åœ¨ï¼Œä¸è¿‡éšæ—¶å¯ä»¥è¢«è¦†ç›–","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548608597,"ip_address":"","comment_id":63929,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10138534242","product_id":100020801,"comment_content":"æ‚¨å¥½ï¼Œæˆ‘çœ‹æ–‡ç« åæœ‰ä¿©ç‚¹ç–‘é—®ï¼Œå‰ææ¡ä»¶å¦‚æœmysqlè®¾ç½®åŒ1<br><br>1ã€è¿™æ—¶å€™ç£ç›˜ä¸­çš„redologçš„çŠ¶æ€æ˜¯ä»€ä¹ˆçŠ¶æ€å‘¢ï¼Ÿæ˜¯prepareä¹ˆï¼Ÿ<br>2ã€å¦‚æœä¸€ä¸ªäº‹åŠ¡åœ¨è¿›è¡Œä¸­çš„æ—¶å€™redologå·²ç»è¢«æŒä¹…åŒ–ï¼Œåœ¨äº‹åŠ¡æäº¤æ—¶å€™ï¼Œè¿™æ¡redologè¿˜åœ¨redolog-bufferä¸­ä¹ˆï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437768,"discussion_content":"1. â€œè¿™æ—¶å€™ç£ç›˜ä¸­çš„redologçš„çŠ¶æ€æ˜¯ä»€ä¹ˆçŠ¶æ€å‘¢ï¼Ÿæ˜¯prepareä¹ˆï¼Ÿâ€è¿™ä¸ªâ€œè¿™æ—¶å€™â€æ˜¯ä»€ä¹ˆæ„æ€ğŸ˜†\n2. è¿˜åœ¨ï¼Œä¸è¿‡éšæ—¶å¯ä»¥è¢«è¦†ç›–","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548608597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1226968,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b8/d8/f81b5604.jpg","nickname":"hcyycb","note":"","ucode":"77FF6CA41F9E66","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409875,"discussion_content":"ä¸å­˜åœ¨è¿™ç§æƒ…å†µã€‚äº‹åŠ¡æäº¤ï¼Œredologå¼€å§‹ä¸¤é˜¶æ®µã€‚å…¶å®ï¼Œè¿™æ—¶å€™logé‡Œçš„è®°å½•éƒ½æ˜¯å·²ç»æäº¤çš„äº‹åŠ¡å®Œæˆçš„ã€‚redologè¦åˆ†ä¸¤é˜¶æ®µï¼Œå’Œbinlogé…åˆï¼Œå¯ä»¥ä¿è¯mysqlçš„crash-safeã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635522635,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61960,"user_name":"èœèœ","can_delete":false,"product_type":"c1","uid":1302241,"ip_address":"","ucode":"D798B831A89AAF","user_header":"https://static001.geekbang.org/account/avatar/00/13/de/e1/f648c746.jpg","comment_is_top":false,"comment_ctime":1547867024,"is_pvip":false,"replies":[{"id":"21957","content":"max_binlog_cache_sizeåªæ˜¯ç”¨æ¥é™åˆ¶è®¾ç½®binlog_cache_sizeçš„æ—¶å€™çš„ä¸Šé™ğŸ˜…<br>å¹¶ä¸å‚ä¸æ‰§è¡Œè¯­å¥çš„é€»è¾‘çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547869497,"ip_address":"","comment_id":61960,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10137801616","product_id":100020801,"comment_content":"æ—è€å¸ˆï¼Œä½ å¥½ï¼è¶…è¿‡äº†binlog_cache_sizeï¼Œæš‚å­˜åˆ°ç£ç›˜ï¼Œé‚£å¦‚æœè¶…è¿‡äº†max_binlog_cache_size å°±ç›´æ¥æŠ¥é”™äº†å‘¢ï¼Œè¿™ä¸¤ä¸ªå‚æ•°çš„å…³è”æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437049,"discussion_content":"max_binlog_cache_sizeåªæ˜¯ç”¨æ¥é™åˆ¶è®¾ç½®binlog_cache_sizeçš„æ—¶å€™çš„ä¸Šé™ğŸ˜…\nå¹¶ä¸å‚ä¸æ‰§è¡Œè¯­å¥çš„é€»è¾‘çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547869497,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57252,"user_name":"ä¿¡ä¿¡","can_delete":false,"product_type":"c1","uid":1303865,"ip_address":"","ucode":"8DF0EC045579FD","user_header":"https://static001.geekbang.org/account/avatar/00/13/e5/39/951f89c8.jpg","comment_is_top":false,"comment_ctime":1546698481,"is_pvip":false,"replies":[{"id":"20668","content":"æˆ‘ä»¬æ–‡ç« ä¸­ä»‹ç»çš„å·²ç»æ˜¯æ¼”è¿›è¿‡çš„ç‰ˆæœ¬ï¼Œå·²ç»ä¿è¯äº†å†™ç›˜é¡ºåºï¼Œæ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546746811,"ip_address":"","comment_id":57252,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10136633073","product_id":100020801,"comment_content":"ç½‘ä¸Šè¯´binlogçš„å†™å…¥é¡ºåºéœ€è¦å’ŒInnoDBå±‚äº‹åŠ¡æäº¤é¡ºåºä¸€è‡´ï¼Œå¦åˆ™é€šè¿‡xtrabackupè¿™ç§ç‰©ç†å¤‡ä»½å·¥å…·è¿›è¡Œå¤‡ä»½æ—¶ï¼Œä¼šå‡ºç°ä¸»å¤‡ä¸ä¸€è‡´ã€‚åˆ†æåŸå› äº”èŠ±å…«é—¨ï¼Œæ„Ÿè§‰éƒ½ä¸å¤Ÿå‡†å¤‡ï¼Œè¯·è€å¸ˆæŒ‡ç‚¹ã€‚","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435488,"discussion_content":"æˆ‘ä»¬æ–‡ç« ä¸­ä»‹ç»çš„å·²ç»æ˜¯æ¼”è¿›è¿‡çš„ç‰ˆæœ¬ï¼Œå·²ç»ä¿è¯äº†å†™ç›˜é¡ºåºï¼Œæ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546746811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57196,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1546680270,"is_pvip":false,"replies":[{"id":"20632","content":"1. ä¸æ˜¯è¿™ä¹ˆåˆ†çš„ã€‚ ä¸»é”®ç´¢å¼•å’Œæ™®é€šç´¢å¼•éƒ½æ˜¯ç”±æ•°æ®é¡µç»„æˆï¼›è¿™äº›éƒ½æœ‰å¯èƒ½è¢«ç¼“å­˜åˆ°bpé‡Œ<br>2. éèšç°‡ç´¢å¼•é¡µçš„ä¿®æ”¹ã€‚ ä¸»é”®ç´¢å¼•ä¸èƒ½ä½¿ç”¨change bufferå“¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546690272,"ip_address":"","comment_id":57196,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10136614862","product_id":100020801,"comment_content":"æƒ³å’¨è¯¢ä¸€ä¸ªé—®é¢˜ï¼Œè€å¸ˆ æˆ‘çœ‹bufferpool åˆ†ä¸ºæ•°æ®é¡µå’Œç´¢å¼•é¡µï¼Œé‚£ä¹ˆä¸»é”®ç´¢å¼•ä¸æ˜¯åŒ…å«è¡Œæ•°æ®å—ï¼Ÿé‚£ä¸»é”®ç´¢å¼•æ˜¯åœ¨æ•°æ®é¡µè¿˜æ˜¯ç´¢å¼•é¡µå‘¢ï¼Ÿ è¿˜æœ‰ change bufferç¼“å­˜çš„æ˜¯å¯¹éèšç°‡ç´¢å¼•é¡µçš„ä¿®æ”¹(æ•´è¡Œæ•°æ®è¿˜æ˜¯ä¸ç¼“å­˜ç›´æ¥åŠ åˆ°ä¸»é”®ç´¢å¼•ä¸‹)è¿˜æ˜¯å¯¹å…·ä½“è¡Œæ•°æ®çš„æ·»åŠ æˆ–è€…ä¿®æ”¹å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435457,"discussion_content":"1. ä¸æ˜¯è¿™ä¹ˆåˆ†çš„ã€‚ ä¸»é”®ç´¢å¼•å’Œæ™®é€šç´¢å¼•éƒ½æ˜¯ç”±æ•°æ®é¡µç»„æˆï¼›è¿™äº›éƒ½æœ‰å¯èƒ½è¢«ç¼“å­˜åˆ°bpé‡Œ\n2. éèšç°‡ç´¢å¼•é¡µçš„ä¿®æ”¹ã€‚ ä¸»é”®ç´¢å¼•ä¸èƒ½ä½¿ç”¨change bufferå“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546690272,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57168,"user_name":"linqw","can_delete":false,"product_type":"c1","uid":1134138,"ip_address":"","ucode":"09DCFE98C54DD8","user_header":"https://static001.geekbang.org/account/avatar/00/11/4e/3a/86196508.jpg","comment_is_top":false,"comment_ctime":1546670692,"is_pvip":false,"replies":[{"id":"20636","content":"1. é¢å†™ä¸€ä¸‹æ²¡ä»€ä¹ˆæˆæœ¬å“¦ã€‚è¢«åˆ·ç›˜ä»¥åè¿™ä¸ªäº‹åŠ¡å°±å½»åº•å®Œæˆäº†å‘€ã€‚æœ‰è¿™ä¸ªcommitæ ‡è¯†ï¼Œæ®è¯´å´©æºƒæ¢å¤ä¹Ÿæ–¹ä¾¿<br>2. å°±æ˜¯å› ä¸ºå‚æ•°ä¸è®¤è¯†ï¼Œå¯¼è‡´ç³»ç»Ÿä¸å¯åŠ¨çš„å§ğŸ˜„<br>3.å¯¹<br>4. è¿™ä¸ªè¦çœ‹ä½ æ€ä¹ˆæ”¹çš„ã€‚ï¼ˆå‡è®¾ä½ ç”¨çš„æ˜¯5.6åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼‰ï¼Œ å¤§æ”¹å°è¦é‡åšï¼›å°Næ”¹å¤§Mçš„è¯ï¼Œå¦‚æœNMéƒ½å°äº256ä¸ç”¨ï¼Œéƒ½å¤§äº256ä¹Ÿä¸ç”¨ï¼›N&lt;256&lt;M å°±è¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546692277,"ip_address":"","comment_id":57168,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10136605284","product_id":100020801,"comment_content":"è€å¸ˆæ‰“æ‰°ä¸‹ï¼Œé—®å‡ ä¸ªé—®é¢˜å“¦<br>1ã€ä¸€æ¬¡äº‹åŠ¡åœ¨æäº¤å‰ï¼Œredo logåœ¨prepareé˜¶æ®µå°±ä¼šåˆ·ç›˜ï¼Œä¸ºä»€ä¹ˆåœ¨commitçš„æ—¶å€™ï¼Œè¿˜éœ€è¦writeåˆ°æ–‡ä»¶ç³»ç»Ÿçš„page cacheä¸­äº†ï¼Ÿ<br>2ã€æœ‰ä¸€æ¬¡è®°å¾—æ•´ä¸ªæœåŠ¡å´©äº†ï¼Œinnodb_buffer_pool_sizeå¤ªå°ï¼Œä¿®æ”¹äº†5.6 ç‰ˆçš„my.cnfæ–‡ä»¶é‚£æ—¶å¤šåŠ äº†ä¸€å¥innodb_buffer_pool_chunk_sizeï¼Œè¿™ä¸ªå¥½åƒåœ¨5.7ä¹‹åæ–°å¢çš„ï¼Œå¯¼è‡´mysqld.pidå’Œmysqld.sockè¿™ä¸¤ä¸ªæ–‡ä»¶æ²¡æœ‰ç”Ÿæˆï¼Œå¯¼è‡´æ•°æ®åº“æœåŠ¡æŠ¥: Can&#39;t connect to local MySQL server through socket &#39;&#47;tmp&#47;mysql.sock&#39; (2)ï¼Œé‚£æ—¶å°†é…ç½®æ–‡ä»¶ä¸­çš„è¿™è¡Œå»æ‰ï¼Œæ•°æ®åº“æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå…¶ä¸­çš„åŸç†ä¸æ˜¯å¾ˆæ¸…æ¥š<br>3ã€rollbackåœ¨commitä¹‹åç«‹å³æ‰§è¡Œï¼Œæ²¡æœ‰ä»»ä½•å½±å“ä¹ˆï¼Ÿ<br>4ã€varcharç±»å‹é•¿åº¦ä¿®æ”¹ï¼Œvarcharç±»å‹å¥½åƒæ˜¯æ²¡æœ‰å­˜åœ¨èšç°‡ç´¢å¼•ä¸­ï¼Œè‹¥éœ€è¦é¢„ç•™varcharç±»å‹å­—æ®µï¼Œè¿˜æ— æ³•ç¡®å®šå®é™…éœ€è¦çš„é•¿åº¦ã€‚è€Œå½“éœ€è¦å¯ç”¨åˆ°é¢„ç•™çš„å­—æ®µæ—¶ï¼Œè¡¨ä¸­å¯èƒ½å·²ç»æœ‰å¾ˆå¤šæ•°æ®ï¼Œæ­¤æ—¶è¦æ ¹æ®éœ€è¦ä¿®æ”¹å­—æ®µé•¿åº¦, è€Œä¸éœ€è¦é‡åšæ•°æ®ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435441,"discussion_content":"1. é¢å†™ä¸€ä¸‹æ²¡ä»€ä¹ˆæˆæœ¬å“¦ã€‚è¢«åˆ·ç›˜ä»¥åè¿™ä¸ªäº‹åŠ¡å°±å½»åº•å®Œæˆäº†å‘€ã€‚æœ‰è¿™ä¸ªcommitæ ‡è¯†ï¼Œæ®è¯´å´©æºƒæ¢å¤ä¹Ÿæ–¹ä¾¿\n2. å°±æ˜¯å› ä¸ºå‚æ•°ä¸è®¤è¯†ï¼Œå¯¼è‡´ç³»ç»Ÿä¸å¯åŠ¨çš„å§ğŸ˜„\n3.å¯¹\n4. è¿™ä¸ªè¦çœ‹ä½ æ€ä¹ˆæ”¹çš„ã€‚ï¼ˆå‡è®¾ä½ ç”¨çš„æ˜¯5.6åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼‰ï¼Œ å¤§æ”¹å°è¦é‡åšï¼›å°Næ”¹å¤§Mçš„è¯ï¼Œå¦‚æœNMéƒ½å°äº256ä¸ç”¨ï¼Œéƒ½å¤§äº256ä¹Ÿä¸ç”¨ï¼›N&amp;lt;256&amp;lt;M å°±è¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546692277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":328343,"user_name":"å¤§è‹±é›„ä¸è¯¥å»é›ªå±±æ‰“æ»š","can_delete":false,"product_type":"c1","uid":2867414,"ip_address":"","ucode":"8024FE2D5ED659","user_header":"https://static001.geekbang.org/account/avatar/00/2b/c0/d6/81b1b782.jpg","comment_is_top":false,"comment_ctime":1640677720,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5935645016","product_id":100020801,"comment_content":"ã€1. è®¾ç½® binlog_group_commit_sync_delayå’Œ binlog_group_commit_sync_no_delay_countå‚<br>æ•°ï¼Œå‡å°‘binlogçš„å†™ç›˜æ¬¡æ•°ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯åŸºäºâ€œé¢å¤–çš„æ•…æ„ç­‰å¾…â€æ¥å®ç°çš„ï¼Œå› æ­¤å¯èƒ½ä¼šå¢åŠ <br>è¯­å¥çš„å“åº”æ—¶é—´ï¼Œä½†æ²¡æœ‰ä¸¢å¤±æ•°æ®çš„é£é™©ã€‚ã€‘ä¸ºä»€ä¹ˆæ²¡æœ‰ä¸¢å¤±æ•°æ®çš„é£é™©ï¼Ÿæˆ‘çš„ç†è§£æ˜¯writeäº†å´æ²¡æœ‰fsyncæ˜¯ç±»ä¼¼äºsync_binlog=Nçš„ï¼ŒåŸæ–‡è¯´è¿™æ˜¯å¯èƒ½ä¼šä¸¢å¤±Nä¸ªäº‹åŠ¡çš„binlogæ—¥å¿—çš„ï¼Œä¸ä¸¢å¤±æ•°æ®æ˜¯å¯ä»¥ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ„æ€å—ï¼Œæœ›è€å¸ˆè§£ç­”","like_count":1,"discussions":[{"author":{"id":1324550,"avatar":"https://static001.geekbang.org/account/avatar/00/14/36/06/08c46bcd.jpg","nickname":"è‚åˆ©","note":"","ucode":"808E064089724D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586795,"discussion_content":"ä¸ªäººç†è§£ï¼Œ sync_bing åªæ˜¯å•çº¯çš„binlog è‡ªå·±çš„åˆ·ç›˜ç­–ç•¥ï¼Œå’Œrelog æ²¡æœ‰å…³ç³»ï¼Œ\nè®¾ç½®innodb_flush_log_at_trx_commit=1ï¼Œsync_binlog=Nï¼Œrelog ä¸ä¸¢ï¼Œä½†æ˜¯ binlog ä¼šä¸¢ï¼Œ è¿™ä¸ªæ—¶å€™è®¾ç½® binlog_group_commit_sync_no_delay_count=Nï¼Œè‚¯å®šä¹Ÿä¼šä¸¢binlogï¼Œä¸¢ä¸ä¸¢binlogæ•°æ®æ˜¯ç”±sync_binlogæ¥è®¾ç½®çš„ï¼Œ\nä½†æ˜¯innodb_flush_log_at_trx_commit=1ï¼Œsync_binlog=1ï¼Œbinlog_group_commit_sync_no_delay_count=Nï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ä¸ä¼šä¸¢æ•°æ®çš„ï¼Œå¦‚æœç”¨æˆ·å‘å‡ºäº†commitçš„äº‹åŠ¡ï¼Œdelay_count=Nï¼Œä¸ä»…åŒæ—¶æ§åˆ¶äº†binlogç»„åˆ·ç›˜ï¼Œè¿˜æœ‰redologç»„åˆ·ç›˜çš„è¡Œä¸º,å»¶è¿Ÿäº†binlogåˆ·ç›˜ï¼ŒåŒæ—¶ä¹Ÿå»¶è¿Ÿäº†relog,è¿™æ˜¯binlogä¸¢äº†ï¼Œredlogä¹Ÿä¸¢äº†ï¼Œredoå’Œbinlogéƒ½æ˜¯å¤±è´¥ï¼Œäº‹åŠ¡å¤±è´¥å›æ»šï¼Œä½†æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œå°±å¯ä»¥è®¤ä¸ºä¸ä¸¢æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662519137,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1256203,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2b/0b/3ed638ce.jpg","nickname":"rusk","note":"","ucode":"08709113CA30AD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542542,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640780421,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":276436,"user_name":"æ±‰æ±Ÿ","can_delete":false,"product_type":"c1","uid":1788647,"ip_address":"","ucode":"01622D984B8F9B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/4a/e7/6c16af5d.jpg","comment_is_top":false,"comment_ctime":1611921744,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5906889040","product_id":100020801,"comment_content":"mysql åˆ·è„é¡µçš„æ—¶å€™ï¼Œå¦‚æœæœ‰æœªæäº¤çš„æ•°æ®ï¼Œè¿™æ—¶å€™è¿™ä¸ªæ•°æ®èƒ½å†™å…¥ç£ç›˜å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1324550,"avatar":"https://static001.geekbang.org/account/avatar/00/14/36/06/08c46bcd.jpg","nickname":"è‚åˆ©","note":"","ucode":"808E064089724D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586797,"discussion_content":"æ²¡æœ‰æäº¤çš„äº‹åŠ¡ï¼Œä¹Ÿæ˜¯è¦ä»¥åˆ·è„çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªå¤§äº‹åŠ¡å¾ˆå¤§ï¼Œä¸æäº¤ï¼Œå½“å†…å­˜ä¸å¤Ÿäº†ï¼Œä¹Ÿå¯ä»¥è§¦å‘ä¸€éƒ¨åˆ†è„æ•°æ®è½ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662519319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":252996,"user_name":"å¼ å“","can_delete":false,"product_type":"c1","uid":1209049,"ip_address":"","ucode":"AD840AF264C32E","user_header":"https://static001.geekbang.org/account/avatar/00/12/72/d9/488739d1.jpg","comment_is_top":false,"comment_ctime":1602556978,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5897524274","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªç–‘é—®ï¼Œæ–‡ç« ä¸­æåˆ°ï¼š<br>è®¾ç½® binlog_group_commit_sync_delay å’Œ binlog_group_commit_sync_no_delay_count å‚æ•°ï¼Œå‡å°‘ binlog çš„å†™ç›˜æ¬¡æ•°ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯åŸºäºâ€œé¢å¤–çš„æ•…æ„ç­‰å¾…â€æ¥å®ç°çš„ï¼Œå› æ­¤å¯èƒ½ä¼šå¢åŠ è¯­å¥çš„å“åº”æ—¶é—´ï¼Œä½†æ²¡æœ‰ä¸¢å¤±æ•°æ®çš„é£é™©ã€‚<br><br>ä¸ºä»€ä¹ˆæ²¡æœ‰ä¸¢å¤±æ•°æ®çš„é£é™©ï¼Ÿ æ˜¯è®¾ç½®äº† binlog_group_commit_sync_delay å’Œ binlog_group_commit_sync_no_delay_count å‚æ•°åï¼Œè¦ç­‰åˆ°è§¦å‘æ¡ä»¶è°ƒç”¨fsyncä¹‹åæ‰ç»™å®¢æˆ·ç«¯åº”ç­”å—ï¼Ÿä¹Ÿå°±æ˜¯æ‰ç®—è¿™ä¸ªäº‹åŠ¡æäº¤äº†ï¼Ÿ <br>æ‰¾äº†å®˜æ–¹æ–‡æ¡£ï¼š Controls how many microseconds the binary log commit waits before synchronizing the binary log file to diskã€‚<br>æˆ‘ç†è§£äº‹åŠ¡æäº¤åå…ˆåœ¨serverå±‚å†™binlogï¼Œç­‰å¾…group commit ï¼Œæäº¤åå°±ç›¸å½“äºcommitå¯ä»¥ç»™å®¢æˆ·ç«¯åº”ç­”å¤„ç†æˆåŠŸï¼Œç„¶åå‘Šè¯‰å¼•æ“commitï¼Œå†™redo log commitã€‚<br>æˆ‘è¿™ä¸ªç†è§£æ­£ç¡®å—","like_count":1,"discussions":[{"author":{"id":2680957,"avatar":"","nickname":"Geek_dbf688","note":"","ucode":"B9E078909700C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381827,"discussion_content":"ä½†æ˜¯ä»–åˆè¯´â€œå°†sync_binlog è®¾ç½®ä¸ºå¤§äº1çš„å€¼ï¼ˆæ¯”è¾ƒå¸¸è§æ˜¯100~1000ï¼‰ã€‚è¿™æ ·åšçš„é£é™©æ˜¯ï¼Œä¸»æœºæ‰ç”µæ—¶ä¼šä¸¢binlogæ—¥å¿—â€ï¼Œå¦‚æœåƒä½ è¿™ä¹ˆè¯´æ²¡è¿”å›å°±ä¸ç®—ä¸¢ï¼Œé‚£è¿™ä¸ªä¹Ÿä¸ç®—ä¸¢å§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625227103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":240743,"user_name":"å´”ç»åˆš","can_delete":false,"product_type":"c1","uid":1827943,"ip_address":"","ucode":"207FDF850860C4","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/P5lTnAkviacPGu5S5XJQGQdTpvkSjAVU9Nu2EYicIpMAjiaNP8aXDtfcIHicSnHw2fVIoqTWGGg48rZVzcficUlbgmw/132","comment_is_top":false,"comment_ctime":1597051042,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5892018338","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼æœ‰ä¸¤ä¸ªç–‘é—®ï¼Œæˆ‘åœ¨ç•™è¨€é‡Œé¢ä¼¼ä¹æ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆã€‚<br>1ã€å…³äºå›¾4<br>â€œ1.å…ˆæŠŠbinlogä»binlog cacheä¸­å†™åˆ°ç£ç›˜ä¸Šçš„binlogæ–‡ä»¶ï¼›â€ï¼Œè¿™é‡Œæ˜¯å°†binlog cacheä¸­çš„å†™åˆ°äº†page cacheä¸­ï¼Œåªä¸è¿‡è¿™ä¸ªé¡µç¼“å­˜åå­—å«ç³»ç»Ÿbinlogæ–‡ä»¶ï¼Ÿ<br>2ã€è¿˜æœ‰å°±æ˜¯ï¼Œå…³äºæå‡IOæ€§èƒ½ç“¶é¢ˆé‚£é‡Œï¼Œâ€œè®¾ç½® binlog_group_commit_sync_delay å’Œ binlog_group_commit_sync_no_delay_countå‚æ•°ï¼Œå‡å°‘binlogçš„å†™ç›˜æ¬¡æ•°ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯åŸºäºâ€œé¢å¤–çš„æ•…æ„ç­‰å¾…â€æ¥å®ç°çš„ï¼Œå› æ­¤å¯èƒ½ä¼šå¢åŠ è¯­å¥çš„å“åº”æ—¶é—´ï¼Œä½†æ²¡æœ‰ä¸¢å¤±æ•°æ®çš„é£é™©ã€‚â€<br>è¿™é‡Œå¦‚æœæ–­ç”µçš„è¯ï¼Œä¹Ÿä¼šæœ‰ä¸¢å¤±æ•°æ®çš„é£é™©å§ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":2680957,"avatar":"","nickname":"Geek_dbf688","note":"","ucode":"B9E078909700C3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381826,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625227010,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224019,"user_name":"å¹¼å„¿ç¼–ç¨‹æ•™å­¦","can_delete":false,"product_type":"c1","uid":1237199,"ip_address":"","ucode":"F13F3150E6CAE9","user_header":"https://static001.geekbang.org/account/avatar/00/12/e0/cf/43f201f2.jpg","comment_is_top":false,"comment_ctime":1591256838,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5886224134","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜<br>æ—¥å¿—é€»è¾‘åºåˆ—å·ï¼ˆlog sequence numberï¼ŒLSNï¼Œæˆ‘çŸ¥é“æ˜¯8å­—èŠ‚çš„ï¼Œå¾ˆå¤§(â€­16,777,216â€¬ TB)ã€‚<br>ä½†æƒ³é—®ä¸€ä¸‹ï¼Œæ˜¯å¦ä¼šå‡ºç°ç”¨å®Œçš„åœºæ™¯ï¼Ÿå¦‚æœå‡ºç°äº†ï¼Œä¼šæ€æ ·ï¼Ÿ","like_count":1},{"had_liked":false,"id":159852,"user_name":"æ‰¬å¤§å®","can_delete":false,"product_type":"c1","uid":1181888,"ip_address":"","ucode":"AC742196C894C8","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/c0/9b97453f.jpg","comment_is_top":false,"comment_ctime":1575811100,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5870778396","product_id":100020801,"comment_content":"\bè€å¸ˆå¥½ï¼Œä»¥ä¸‹ç–‘é—®æ²¡æœ‰æŸ¥æ‰¾åˆ°ç›¸å…³èµ„æ–™ï¼Œéº»çƒ¦è€å¸ˆå¯ä»¥è§£ç­”ä¸‹ã€‚innodbé‡Œçš„change bufferå’Œflush listæ˜¯ä¸€å›äº‹å—ï¼Ÿå¦‚æœä¸æ˜¯çš„è¯ è¯»æ•°æ®æ—¶æ˜¯merge flush listçš„è¿˜æ˜¯change bufferçš„å‘¢ï¼Ÿä»¥åŠæ˜¯å¦æœ‰ä¸€ä¸ªchange bufferè½¬åŒ–æˆflush listçš„è¿‡ç¨‹å‘¢ï¼Ÿ","like_count":1},{"had_liked":false,"id":126346,"user_name":"ç‹æ–¯æ‹‰","can_delete":false,"product_type":"c1","uid":1593957,"ip_address":"","ucode":"D00DD3CE432189","user_header":"https://static001.geekbang.org/account/avatar/00/18/52/65/320eccb3.jpg","comment_is_top":false,"comment_ctime":1566369194,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5861336490","product_id":100020801,"comment_content":"ç°åœ¨ç•™è¨€ä¸çŸ¥é“è€å¸ˆä½ èƒ½ä¸èƒ½çœ‹åˆ°äº†ï¼Œè¯•è¯•å§ã€‚<br>é—®é¢˜1ï¼š<br>æ²¡æäº¤çš„äº‹åŠ¡Açš„redo logå¯èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šã€‚é‚£è¿™ä¸ªæ—¶å€™å¦‚æœäº‹åŠ¡Aå›æ»šäº†ï¼ŒæŒä¹…åŒ–çš„logæ€ä¹ˆåŠå‘¢ï¼Ÿ<br>æœ‰å‡ ä¸ªæƒ³æ³•ï¼š<br>1. æ“¦ç£ç›˜ï¼Ÿ è¿™æ ·æ•ˆç‡ä¸ä¼šé«˜å§ï¼Œå› ä¸ºä¸æ˜¯é¡ºåºæ“ä½œã€‚<br>2. å› ä¸ºäº‹åŠ¡Açš„redo logæ²¡æœ‰commitï¼Œæ‰€ä»¥å°±å½“â€è„â€œredo æ”¾åœ¨ç£ç›˜é‡Œå°±å¥½ï¼Œå³ä½¿è¿™æ—¶å€™å‘ç”Ÿcrashï¼Œä¹Ÿå› ä¸ºæ²¡æœ‰commitï¼Œç”šè‡³ä¸æ˜¯prepare æ‰€ä»¥è¢«å¿½ç•¥ã€‚<br>æˆ‘æ›´å€¾å‘äºç­”æ¡ˆ2ï¼Œä¸çŸ¥é“å…·ä½“æ˜¯æ€ä¹ˆæ ·çš„ã€‚<br>é—®é¢˜2ï¼š<br>å¦‚æœæ˜¯2ï¼Œé‚£è¿™ä¸ªæ—¶å€™çš„LSNæ€ä¹ˆåŠï¼Œæ¯”å¦‚è¿™checkpointåˆ·è„æ—¶ï¼Œè„é¡µçš„LSNæ˜¯100ï¼Œä½†æ˜¯è¿™ä¸ªredoçš„LSNæ˜¯150ï¼Œé‚£æ˜¯ä¸æ˜¯å°±é”™è¯¯äº†å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1707393,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/0d/81/ed4957e8.jpg","nickname":"walzzz","note":"","ucode":"17D8079494189A","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381949,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625315959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":81681,"user_name":"poplar","can_delete":false,"product_type":"c1","uid":1463444,"ip_address":"","ucode":"4D0ECC6AC87830","user_header":"","comment_is_top":false,"comment_ctime":1554005975,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5848973271","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œä¸¤é˜¶æ®µæäº¤ï¼Œredo log prepareé˜¶æ®µè¿›è¡ŒæŒä¹…åŒ–ï¼Œç„¶åæ˜¯binlogæŒä¹…åŒ–ï¼Œé‚£ä¹ˆcommité˜¶æ®µåšäº†ä»€ä¹ˆï¼Œåˆæ˜¯å¦‚ä½•åˆ¤æ–­redo logå·²ç»æ˜¯ä¸¤é˜¶æ®µå®Œæˆäº†å‘¢","like_count":1,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165033,"discussion_content":"å¦‚æœæ˜¯åŒ1ï¼Œé‚£å°±æ˜¯éƒ½è¿›è¡Œäº†æŒä¹…åŒ–ã€‚å¦åˆ™å°±ä¸æ˜¯ã€‚commitæ˜¯å°†binlog cacheå†™åˆ°binlogæ–‡ä»¶ä¸­ï¼Œä¸åšæŒä¹…åŒ–æ“ä½œã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581250283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":74775,"user_name":"kabuka","can_delete":false,"product_type":"c1","uid":1246009,"ip_address":"","ucode":"932DD1E875D850","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/39/18956b2e.jpg","comment_is_top":false,"comment_ctime":1552296613,"is_pvip":false,"replies":[{"id":"27531","content":"page cacheå¯ä»¥ç†è§£ä¸ºæ“ä½œç³»ç»Ÿç»´æŠ¤çš„å†…å­˜<br>fsyncæ˜¯å†™é€åˆ°ç£ç›˜ï¼Œä¼šå ç”¨ioï¼Œæ‰€ä»¥è¿˜æ˜¯fsyncå ç”¨èµ„æºé«˜<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1552407045,"ip_address":"","comment_id":74775,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847263909","product_id":100020801,"comment_content":"å¯«å…¥page cache å’Œ èª¿ç”¨fsync  æœ‰ä»€éº¼å€åˆ¥å‘€ï¼Œ å“ªå€‹æœƒä½”ç”¨IOï¼Œå“ªå€‹æ¶ˆè€—è³‡æºå¤šä¸€é»ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442678,"discussion_content":"page cacheå¯ä»¥ç†è§£ä¸ºæ“ä½œç³»ç»Ÿç»´æŠ¤çš„å†…å­˜\nfsyncæ˜¯å†™é€åˆ°ç£ç›˜ï¼Œä¼šå ç”¨ioï¼Œæ‰€ä»¥è¿˜æ˜¯fsyncå ç”¨èµ„æºé«˜\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552407045,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":73333,"user_name":"liao xueqiang","can_delete":false,"product_type":"c1","uid":1310325,"ip_address":"","ucode":"68713441579F6B","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/75/46742f12.jpg","comment_is_top":false,"comment_ctime":1551862570,"is_pvip":false,"replies":[{"id":"27157","content":"â€œè¿™ä¸ªfsyncæŒ‡æŠŠå†…å­˜ä¸­çš„è„æ•°æ®åˆ·åˆ°datafileæ•°æ®æ–‡ä»¶å—ï¼Ÿâ€è¿™é‡Œè¯´çš„æ˜¯redo log<br><br>å•æŒ‡&quot;commitçš„ç¬¬äºŒé˜¶æ®µï¼Œå†™redo logæ—¶ä¸éœ€è¦æŒä¹…åŒ–åˆ°æ—¥å¿—æ–‡ä»¶ã€‚â€œ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1552161217,"ip_address":"","comment_id":73333,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5846829866","product_id":100020801,"comment_content":"æ¯ç§’ä¸€æ¬¡åå°è½®è¯¢åˆ·ç›˜ï¼Œå†åŠ ä¸Šå´©æºƒæ¢å¤è¿™ä¸ªé€»è¾‘ï¼ŒInnoDB å°±è®¤ä¸º redo log åœ¨ commit çš„æ—¶å€™å°±ä¸éœ€è¦ fsync äº†ï¼Œåªä¼š write åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸­å°±å¤Ÿäº†ã€‚<br>è¿™ä¸ªfsyncæŒ‡æŠŠå†…å­˜ä¸­çš„è„æ•°æ®åˆ·åˆ°datafileæ•°æ®æ–‡ä»¶å—ï¼Ÿredo logæœ¬æ¥å°±æ˜¯ç‰©ç†æ–‡ä»¶ï¼Œå¦‚æœæ˜¯åˆ·åˆ°redo logç‰©ç†æ–‡ä»¶ï¼Œé‚£è¦æ˜¯æ²¡åˆ·æˆåŠŸï¼Œå°±æ˜¯è¯´ç‰©ç†æ–‡ä»¶æ²¡ç”Ÿæˆï¼Œé‚£é‡å¯çš„è¯è‚¯å®šä¼šä¸¢æ‰è½®å·¡æœŸé—´çš„è¿™ä¸€ç§’æ•°æ®","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":442029,"discussion_content":"â€œè¿™ä¸ªfsyncæŒ‡æŠŠå†…å­˜ä¸­çš„è„æ•°æ®åˆ·åˆ°datafileæ•°æ®æ–‡ä»¶å—ï¼Ÿâ€è¿™é‡Œè¯´çš„æ˜¯redo log\n\nå•æŒ‡&amp;quot;commitçš„ç¬¬äºŒé˜¶æ®µï¼Œå†™redo logæ—¶ä¸éœ€è¦æŒä¹…åŒ–åˆ°æ—¥å¿—æ–‡ä»¶ã€‚â€œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552161217,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58553,"user_name":"çŒªå“¥å“¥","can_delete":false,"product_type":"c1","uid":1311362,"ip_address":"","ucode":"ACBB4556516D34","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLkhgYnYZBdhdwKnXQibey04cy9N9ria3DadH7iagoKukaWK1FJwjfCoh0He4p7b2icSYVzHH71l8ZXiaQ/132","comment_is_top":false,"comment_ctime":1547111692,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5842078988","product_id":100020801,"comment_content":"è€å¸ˆå¥½, èƒ½è¯´ä¸‹innodb_log_buffer_sizeå‚æ•°çš„ä½œç”¨å—","like_count":1},{"had_liked":false,"id":58205,"user_name":"åŒ¿åçš„æœ‹å‹","can_delete":false,"product_type":"c1","uid":1316471,"ip_address":"","ucode":"D1A2A8E466FDD1","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/77/73bd9d18.jpg","comment_is_top":false,"comment_ctime":1547009975,"is_pvip":false,"replies":[{"id":"20969","content":"1. ä¸ç”¨å»æ‰¾â€œæ‰€æœ‰innodbè¡¨â€ï¼Œç”¨åˆ°å†æ‰“å¼€<br><br>2. å¤§å®¶å…±ç”¨çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547016480,"ip_address":"","comment_id":58205,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841977271","product_id":100020801,"comment_content":"ä¸å¥‡è€å¸ˆä½ å¥½ï¼Œå¯¹äºundoå’Œredoæ—¥å¿—ï¼Œæœ‰ä¸ªç–‘é—®ï¼ŒmysqlæœåŠ¡å±‚è°ƒç”¨å¼•æ“å±‚å»è·å–æ•°æ®ï¼Œæ¯”æ–¹è¯´æ˜¯innodbå¼•æ“ï¼Œinnodbå¼•æ“æ˜¯ä¸æ˜¯å¯ä»¥è·å–åˆ°è¿™ä¸ªå®ä¾‹é‡Œè¾¹æ‰€æœ‰ä»¥innodbä½œä¸ºå¼•æ“çš„è¡¨ï¼Œ<br>  è¿˜æœ‰å°±æ˜¯äº‹åŠ¡å¤„ç†æ—¶ä¼šæ¶‰åŠåˆ°undoå’Œredoæ—¥å¿—æ–‡ä»¶ï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰ä»¥innodbä¸ºå¼•æ“çš„æ•°æ®è¡¨å…±ç”¨undoå’Œredoæ—¥å¿—æ–‡ä»¶å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435950,"discussion_content":"1. ä¸ç”¨å»æ‰¾â€œæ‰€æœ‰innodbè¡¨â€ï¼Œç”¨åˆ°å†æ‰“å¼€\n\n2. å¤§å®¶å…±ç”¨çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547016480,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57781,"user_name":"æœˆç¼º","can_delete":false,"product_type":"c1","uid":1362262,"ip_address":"","ucode":"029128BF847A9A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0bvalmQic0PAVeoA8GEfoefV4xfmWY4UErdhxxxxNicibOK12icb7iaS07J3WoJGY1oMAKKDvT4w31nQ7buLdeoP8w/132","comment_is_top":false,"comment_ctime":1546910258,"is_pvip":false,"replies":[{"id":"20831","content":"ä¸æ˜¯ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æœ€æ—©çš„ç­–ç•¥ä¹‹ä¸€äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546917410,"ip_address":"","comment_id":57781,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841877554","product_id":100020801,"comment_content":"äº‹åŠ¡è¿˜æ²¡æäº¤çš„æ—¶å€™ï¼Œredo log buffer ä¸­çš„éƒ¨åˆ†æ—¥å¿—æœ‰å¯èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œè¿™å—æ˜¯8.0é‡æ„redologåçš„æ— é”åŒ–æ‰æœ‰çš„æ–°ç‰¹æ€§å˜›ï¼Œçœ‹æºç ä¹‹å‰æ˜¯æœ‰ä¸ªprepare commit mutexé”çš„","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435757,"discussion_content":"ä¸æ˜¯ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æœ€æ—©çš„ç­–ç•¥ä¹‹ä¸€äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546917410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57270,"user_name":"æ…•å¡”","can_delete":false,"product_type":"c1","uid":1302106,"ip_address":"","ucode":"5C6C668C1106A5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/A94RKUfWfwzRzb68T9xskctQ43TBgXSBIL78p0N0ria2tQxmsTTJebYmefhkbHK7zwpoxokxs43UxpgDTdwm5tg/132","comment_is_top":false,"comment_ctime":1546702652,"is_pvip":false,"replies":[{"id":"21102","content":"1. ä¸€ç§’ä¸€æ¬¡<br>2. ä¸€èˆ¬æˆ‘å»ºè®®å°†innodb_flush_method è®¾ç½®æˆO_DIRECTï¼Œè¿™æ ·æ¯æ¬¡å†™çš„æ—¶å€™æ˜¯ç›´æ¥å†™çš„ï¼›<br>åˆ·æ•°æ®æ˜¯åå°æ“ä½œï¼›<br>3. æ˜¯çš„ï¼Œè®¡ç®—å­˜å‚¨åˆ†ç¦»çš„æ¶æ„å¯¹ç½‘ç»œçš„è¦æ±‚å¾ˆé«˜ï¼›<br>4. innodb_use_native_aio æ˜¯è®¾ç½®æˆä»€ä¹ˆçš„ ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547117469,"ip_address":"","comment_id":57270,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841669948","product_id":100020801,"comment_content":"å¤§ä½¬ è¯·æ•™ä¸‹å•Š 1.trx_commitå‚æ•°è®¾ç½®ä¸º2,æ˜¯å†™os cacheå³ç®—äº‹åŠ¡æˆåŠŸï¼Œé‚£ä½•æ—¶ä¼šè¿›è¡Œfyncå‘¢ï¼Ÿ<br>2.æ•°æ®é¡µçš„åˆ·ç›˜é»˜è®¤ä¹Ÿæ˜¯å…ˆå†™os cacheï¼Œé‚£å®ƒçš„fyncé¢‘ç‡åˆæ˜¯å¤šä¹…å•Šï¼Ÿéƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿå†³å®šï¼Ÿ<br>3.redoè¿›è¡Œfsyncæ—¶ï¼Œä¸ºé¿å…read-modify-write(æˆ‘çš„ç†è§£æ˜¯:æ¯”å¦‚è¯´ç¡¬ç›˜blockæ˜¯4kb,å¦‚æœfsyncçš„å—è¾¾ä¸åˆ°4kbï¼Œé‚£ç³»ç»Ÿä¼šå…ˆä»ç¡¬ç›˜å¯¹4kbï¼Œç„¶åä¿®æ”¹å¯¹åº”éƒ¨åˆ†ï¼Œåœ¨å†™å›ç›˜ï¼›è‹¥è¾¾åˆ°4kbï¼Œåˆ™fsyncç›´æ¥å†™ç›˜ï¼Œç†è§£å¯¹å§ï¼Ÿ)<br>å¦‚æœflushçš„blockè¾¾ä¸åˆ°4kb,ä¼šè¿›è¡Œæ—¥å¿—è¡¥é½ï¼Œé»˜è®¤å¥½åƒæ˜¯8192(æ˜¯ä¸æ˜¯ä¸ç£ç›˜å—ä¸€å—æ¯”è¾ƒå¥½)ï¼Œé‚£é—®é¢˜æ¥äº†ï¼Œredoéƒ½æ˜¯512å­—èŠ‚ä¸ºå•ä½ï¼Œå¦‚æœå°äº‹åŠ¡æ¯”è¾ƒå¤šï¼Œéƒ½ç”Ÿæˆä¸è¶…è¿‡512å­—èŠ‚ï¼Œé‚£ä¸æ˜¯å¢åŠ äº†å†™ç›˜çš„ä»£ä»·å—ï¼Œå¦‚æœä¸»ä»ä¼ redoä»£æ›¿binlog(å­˜å‚¨è®¡ç®—åˆ†ç¦»çš„æ¶æ„)  é‚£redoçš„ç½‘ç»œæµé‡ä¹Ÿä¼šå¢å¤§å•Š  å¦å¤–redoä¸‹æ²‰åˆ°å­˜å‚¨å±‚ï¼Œç‰©åŒ–çš„é€Ÿåº¦è¶Šå¿«è¶Šå¥½ï¼Œå¦‚æœæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½fsyncï¼Œè®¡ç®—å±‚çš„æ€§èƒ½å²‚ä¸æ˜¯å½±å“å¾ˆå¤§å—(ç½‘ç»œé—®é¢˜+redoç‰©åŒ–)<br>4.åœ¨linuxç‰©ç†æœºï¼Œå®‰è£…äº†libaioåŒ…ï¼Œè¿˜æ˜¯æ— æ³•ä½¿ç”¨linuxè‡ªå¸¦çš„AIOï¼Œæä¸æ¸…ä¸ºä»€ä¹ˆå•Šï¼Ÿ<br>è°¢è°¢ğŸ˜","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435500,"discussion_content":"1. ä¸€ç§’ä¸€æ¬¡\n2. ä¸€èˆ¬æˆ‘å»ºè®®å°†innodb_flush_method è®¾ç½®æˆO_DIRECTï¼Œè¿™æ ·æ¯æ¬¡å†™çš„æ—¶å€™æ˜¯ç›´æ¥å†™çš„ï¼›\nåˆ·æ•°æ®æ˜¯åå°æ“ä½œï¼›\n3. æ˜¯çš„ï¼Œè®¡ç®—å­˜å‚¨åˆ†ç¦»çš„æ¶æ„å¯¹ç½‘ç»œçš„è¦æ±‚å¾ˆé«˜ï¼›\n4. innodb_use_native_aio æ˜¯è®¾ç½®æˆä»€ä¹ˆçš„ ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547117469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57059,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1546610627,"is_pvip":false,"replies":[{"id":"21100","content":"ä½ ç¢°åˆ°è¿‡å›æ»šå¤±è´¥çš„åœºæ™¯å—ï¼Œå¦‚æœç¢°åˆ°å°±æè¿°ä¸‹å“¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547117127,"ip_address":"","comment_id":57059,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841577923","product_id":100020801,"comment_content":"å¸Œæœ›è€å¸ˆå¯ä»¥è®²è®²å›æ»šçš„æ—¶å€™æ•°æ®åº“å…·ä½“åšäº†å“ªäº›æ“ä½œï¼Œè¿˜æœ‰ä»€ä¹ˆæƒ…å†µä¼šå›æ»šå¤±è´¥ï¼Œå›æ»šå¤±è´¥åº”æ€æ ·å¤„ç†å‘¢ï¼Ÿååˆ†æ„Ÿè°¢","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435383,"discussion_content":"ä½ ç¢°åˆ°è¿‡å›æ»šå¤±è´¥çš„åœºæ™¯å—ï¼Œå¦‚æœç¢°åˆ°å°±æè¿°ä¸‹å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547117127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57056,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1546610109,"is_pvip":false,"replies":[{"id":"20573","content":"å—¯â€¦ ä½ è¿™ä¸ªé—®é¢˜è·Ÿå¦å¤–ä¸€ä¸ªé—®é¢˜å…¶å®æ˜¯ä¸€èµ·çš„ï¼šå›æ»šåšäº†ä»€ä¹ˆï¼Œæˆ‘è€ƒè™‘ä¸‹æ”¾åˆ°åé¢æ–‡ç« ä¸­","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546611923,"ip_address":"","comment_id":57056,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841577405","product_id":100020801,"comment_content":"å¯ä¸å¯ä»¥è¿™ä¹ˆç†è§£ è¿˜æ²¡commitçš„ prepare é˜¶æ®µçš„redo log æ˜¯å¯ä»¥å†™åˆ°ç£ç›˜é‡Œçš„ æ‰€ä»¥rollbacké‚£ä¸ªäº‹åŠ¡åªæ˜¯åœ¨redo logè¿½åŠ äº†é‚£ä¸ªäº‹åŠ¡çš„æ¢å¤ï¼Œè¿˜æ˜¯checkpoint ä¸ç®¡æ²¡æœ‰commité˜¶æ®µçš„redo logå‘¢ ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435382,"discussion_content":"å—¯â€¦ ä½ è¿™ä¸ªé—®é¢˜è·Ÿå¦å¤–ä¸€ä¸ªé—®é¢˜å…¶å®æ˜¯ä¸€èµ·çš„ï¼šå›æ»šåšäº†ä»€ä¹ˆï¼Œæˆ‘è€ƒè™‘ä¸‹æ”¾åˆ°åé¢æ–‡ç« ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546611923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57013,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1546600829,"is_pvip":false,"replies":[{"id":"20564","content":"å®Œæˆä¸€åŠçš„äº‹åŠ¡æ˜¯å¯ä»¥å†™åˆ°æ•°æ®ç›˜çš„ï¼ŒæŒ‰ç…§è¿™ä¸ªå†æ¨ç†ä¸‹ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546608942,"ip_address":"","comment_id":57013,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841568125","product_id":100020801,"comment_content":"å¦‚æœredo log ä¸­å¯èƒ½æœ‰è¿˜æ²¡commitçš„æ“ä½œï¼Œé‚£ä¹ˆä»–ä¸checkpoint çš„ç»“åˆæ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿæ˜¯checkpoint åªç®¡commité˜¶æ®µä¸ç®¡prepareé˜¶æ®µçš„redo log å— ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435359,"discussion_content":"å®Œæˆä¸€åŠçš„äº‹åŠ¡æ˜¯å¯ä»¥å†™åˆ°æ•°æ®ç›˜çš„ï¼ŒæŒ‰ç…§è¿™ä¸ªå†æ¨ç†ä¸‹ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546608942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56994,"user_name":"ä¸€å¤§åªğŸ˜´","can_delete":false,"product_type":"c1","uid":1310960,"ip_address":"","ucode":"92F3D2B7F63568","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/f0/08409e78.jpg","comment_is_top":false,"comment_ctime":1546595349,"is_pvip":false,"replies":[{"id":"20565","content":"ä½ æ˜¯æ€ä¹ˆéªŒè¯çš„ï¼Ÿç­‰äº0çš„æ—¶å€™è™½ç„¶æœ‰èµ°è¿™ä¸ªé€»è¾‘ï¼Œä½†æ˜¯æœ€åè°ƒç”¨fsyncä¹‹å‰åˆ¤æ–­æ˜¯0ï¼Œå°±å•¥ä¹Ÿæ²¡åšå°±èµ°äº†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546609062,"ip_address":"","comment_id":56994,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5841562645","product_id":100020801,"comment_content":"ç»è¿‡æµ‹è¯•å‘ç°sync_binlog=1æˆ–è€…=0ï¼Œæ•ˆæœä¸€æ ·ï¼Œéƒ½ä¼šç›´æ¥å—åˆ°ç»„æäº¤å‚æ•°çš„å½±å“ã€‚<br>&quot;root@localhost:mysql.sock  [test]&gt;show variables like &#39;sync_binlog&#39;;<br>+---------------+-------+<br>| Variable_name | Value |<br>+---------------+-------+<br>| sync_binlog   | 0     |<br>+---------------+-------+<br>1 row in set (0.00 sec)<br>&quot;root@localhost:mysql.sock  [test]&gt;insert into t values (58,55,55);  <br>Query OK, 1 row affected (0.51 sec)<br>&quot;root@localhost:mysql.sock  [test]&gt;show variables like &#39;sync_binlog&#39;;<br>+---------------+-------+<br>| Variable_name | Value |<br>+---------------+-------+<br>| sync_binlog   | 1     |<br>+---------------+-------+<br>1 row in set (0.00 sec)<br>&quot;root@localhost:mysql.sock  [test]&gt;insert into t values (60,60,60);<br>Query OK, 1 row affected (0.51 sec)<br><br>è€Œsync_binlog=næ—¶ï¼Œ1è‡³n-1æ¬¡å“åº”ä¸å—ç»„æäº¤å‚æ•°æ§åˆ¶ï¼Œç¬¬næ¬¡æ—¶ä¼šè§¦å‘ç»„æäº¤å‚æ•°(è¦ä¹ˆå»¶è¿Ÿï¼Œè¦ä¹ˆå¤Ÿäº‹åŠ¡ä¸ªæ•°)ã€‚<br>","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435350,"discussion_content":"ä½ æ˜¯æ€ä¹ˆéªŒè¯çš„ï¼Ÿç­‰äº0çš„æ—¶å€™è™½ç„¶æœ‰èµ°è¿™ä¸ªé€»è¾‘ï¼Œä½†æ˜¯æœ€åè°ƒç”¨fsyncä¹‹å‰åˆ¤æ–­æ˜¯0ï¼Œå°±å•¥ä¹Ÿæ²¡åšå°±èµ°äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546609062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589813,"discussion_content":"è€å“¥ï¼Œ666ã€‚   è·Ÿç€æµ‹è¯•äº†ä¸‹ï¼Œç¡®å®æ˜¯ã€‚sync_binlog=0æˆ–è€…sync_binlog=1æ—¶ï¼›å˜æ›´æ“ä½œçš„æ‰§è¡Œæ—¶é—´ä¸binlog_group_commit_sync_delayç›´æ¥ç›¸å…³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665323446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56915,"user_name":"å°˜å°","can_delete":false,"product_type":"c1","uid":1247006,"ip_address":"","ucode":"CEE0C006387A03","user_header":"https://static001.geekbang.org/account/avatar/00/13/07/1e/bdbe93f4.jpg","comment_is_top":false,"comment_ctime":1546578876,"is_pvip":false,"replies":[{"id":"20547","content":"æ­£æ–‡å†çœ‹ä¸€éğŸ˜„ åªæ˜¯æ•ˆæœå¯èƒ½æ²¡é‚£ä¹ˆå¥½ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546598005,"ip_address":"","comment_id":56915,"utype":1}],"discussion_count":3,"race_medal":0,"score":"5841546172","product_id":100020801,"comment_content":"å¦‚æœè®¾ç½®sync_binlogï¼1ï¼Œæ˜¯ä¸æ˜¯binlogå°±æ²¡æœ‰ç»„æäº¤äº†ï¼Ÿå› ä¸ºæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½ä¼šè°ƒç”¨fsyncã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435310,"discussion_content":"æ­£æ–‡å†çœ‹ä¸€éğŸ˜„ åªæ˜¯æ•ˆæœå¯èƒ½æ²¡é‚£ä¹ˆå¥½ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546598005,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2389270,"avatar":"https://static001.geekbang.org/account/avatar/00/24/75/16/6e28bf17.jpg","nickname":"åˆæ™¨","note":"","ucode":"C5D95D13E49127","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589814,"discussion_content":"å¯ä»¥è®¾ç½®ä¸‹binlog_group_commit_sync_delayï¼Œç„¶åè§‚å¯Ÿä¸‹æƒ…å†µï¼Œä»ç„¶ä½¿ç”¨äº†ç»„æäº¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665323662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"é™•è¥¿"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1411040,"avatar":"https://static001.geekbang.org/account/avatar/00/15/87/e0/63e7d43d.jpg","nickname":"æ˜Ÿç©º","note":"","ucode":"636A0A14608EF0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387555,"discussion_content":"æ„Ÿè§‰åœ¨æ‹†è§£ä¸¤é˜¶æ®µæäº¤é‚£é‡Œï¼Œbinlog çš„write å’Œ fsync ä¸­é—´éš”äº†redo log çš„fsync ï¼Œæ‰€ä»¥ä¹Ÿä¼šä½¿ç”¨åˆ°ç»„æäº¤ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628242670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56890,"user_name":"é”…å­","can_delete":false,"product_type":"c1","uid":1323048,"ip_address":"","ucode":"4A9143AFB07FF2","user_header":"https://static001.geekbang.org/account/avatar/00/14/30/28/6e019a7a.jpg","comment_is_top":false,"comment_ctime":1546572967,"is_pvip":false,"replies":[{"id":"20533","content":"å†™åˆ°page cacheä½ å°±èƒ½çœ‹è§å•¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546577348,"ip_address":"","comment_id":56890,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841540263","product_id":100020801,"comment_content":"å½“è®¾ç½®sync_binlog=0æ—¶ï¼Œæ¯æ¬¡commitéƒ½åªæ˜¯writeåˆ°page cacheï¼Œå¹¶ä¸ä¼šfsyncã€‚ä½†æ˜¯åšå®éªŒæ—¶binlogæ–‡ä»¶ä¸­è¿˜æ˜¯ä¼šæœ‰è®°å½•ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿæ˜¯ä¸æ˜¯åå°çº¿ç¨‹æ¯ç§’ä¸€æ¬¡çš„è½®è¯¢ä¹Ÿä¼šå°†binlog cacheæŒä¹…åŒ–åˆ°ç£ç›˜ï¼Ÿè¡¥å……ä¸€ä¸‹<br>è®¾ç½®binlog_group_commit_sync_delay=1000000ï¼Œbinlog_group_commit_sync_no_delay_count=10<br>","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435299,"discussion_content":"å†™åˆ°page cacheä½ å°±èƒ½çœ‹è§å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546577348,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56829,"user_name":"Dovelol","can_delete":false,"product_type":"c1","uid":1253384,"ip_address":"","ucode":"9B5DDF7720F307","user_header":"https://static001.geekbang.org/account/avatar/00/13/20/08/bc06bc69.jpg","comment_is_top":false,"comment_ctime":1546565474,"is_pvip":false,"replies":[{"id":"20500","content":"ä¼šè®²åˆ°","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546568784,"ip_address":"","comment_id":56829,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841532770","product_id":100020801,"comment_content":"ä¸»ä»æ¨¡å¼ä¸‹ï¼Œå†…ç½‘ä»åº“å¦‚æœè®¾ç½®åŒ1ï¼Œåˆšè¿˜åŸçš„æ•°æ®å‘ç°æ ¹æœ¬è¿½ä¸ä¸Šä¸»åº“ï¼Œæ‰€ä»¥ä»åº“è®¾ç½®äº†0ï¼Œè€å¸ˆåé¢ç« èŠ‚ä¼šè®²å…³äºmysqlåŒ…æ‹¬ä¸»ä»ç›‘æ§è¿™å—çš„å†…å®¹å—ã€‚","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435263,"discussion_content":"ä¼šè®²åˆ°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546568784,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56794,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1546562376,"is_pvip":false,"replies":[{"id":"20474","content":"æ‰ç”µä¼šä¸¢","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546564778,"ip_address":"","comment_id":56794,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5841529672","product_id":100020801,"comment_content":"pagecache ä¹Ÿç®—åˆ·ç›˜ï¼Œå’Œrelog æ–‡ä»¶å†™å…¥åˆ·ç›˜æœ‰å•¥åŒºåˆ«","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435238,"discussion_content":"æ‰ç”µä¼šä¸¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546564778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356658,"user_name":"è‚åˆ©","can_delete":false,"product_type":"c1","uid":1324550,"ip_address":"å¹¿ä¸œ","ucode":"808E064089724D","user_header":"https://static001.geekbang.org/account/avatar/00/14/36/06/08c46bcd.jpg","comment_is_top":false,"comment_ctime":1662475661,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662475661","product_id":100020801,"comment_content":"ä¸è€å¸ˆï¼Œæƒ³é—®ä¸€ä¸‹ï¼Œä¸»å¤‡åŒæ­¥binlogçš„æ—¶å€™ï¼Œdumpçº¿ç¨‹æ˜¯åœ¨write é˜¶æ®µè¯»page cache ä¸­æ•°æ®ï¼Œè¿˜æ˜¯ä»fsyncåçš„ä»ç£ç›˜ä¸Šè¯»binlog æ–‡ ä»¶æ•°æ®ã€‚<br>   æˆ‘ä¸ªäººæ€è€ƒè‚¯å®šæ˜¯åº”è¯¥æ˜¯ä»page cache ä¸­è¯»ï¼Œå¦‚æœæ˜¯ä»ç£ç›˜ä¸Šå»è¯»ï¼Œåº”è¯¥å¤ªæ…¢äº†ï¼Œä¸»åº“è½ç›˜ï¼Œä»åº“è½ç›˜ï¼Œå°±2æ¬¡è½ç›˜äº†ã€‚<br>  ä½†æ˜¯æ‰¾ä¸åˆ°ç›¸å…³çš„èµ„æ–™è¿›è¡Œç¡®è®¤ã€‚","like_count":0},{"had_liked":false,"id":354312,"user_name":"Geek1560","can_delete":false,"product_type":"c1","uid":2028949,"ip_address":"åŒ—äº¬","ucode":"5F27A28B8002E6","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f5/95/a362f01b.jpg","comment_is_top":false,"comment_ctime":1660276217,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1660276217","product_id":100020801,"comment_content":"è¯·é—® redolog å¤„äº prepare é˜¶æ®µæ—¶ï¼Œæ­¤æ—¶å†™åˆ° redolog file é‡Œäº†å—ï¼Œè¿˜æ˜¯æ˜¯åœ¨ redologbuffer é‡Œå‘€","like_count":0},{"had_liked":false,"id":351754,"user_name":"å¯¥è‹¥æ™¨æ˜Ÿ","can_delete":false,"product_type":"c1","uid":1447739,"ip_address":"","ucode":"2E87E43687DE72","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eou1BMETumU21ZI4yiaLenOMSibzkAgkw944npIpsJRicmdicxlVQcgibyoQ00rdGk9Htp1j0dM5CP2Fibw/132","comment_is_top":false,"comment_ctime":1658154822,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1658154822","product_id":100020801,"comment_content":"åªæœ‰åŒ1è®¾ç½®æ‰æœ‰ç»„æäº¤å—","like_count":0},{"had_liked":false,"id":348264,"user_name":"å¤§æ‡’è™«","can_delete":false,"product_type":"c1","uid":1440873,"ip_address":"","ucode":"51014C4A7074DA","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/69/02953435.jpg","comment_is_top":false,"comment_ctime":1654913611,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654913611","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œsync_log=1ï¼Œä¼šç­‰åˆ°binlog fsyncåˆ°diskå®Œæˆï¼Œæ‰å»æäº¤äº‹åŠ¡å— ï¼Ÿ ","like_count":0},{"had_liked":false,"id":347615,"user_name":"boydenyol","can_delete":false,"product_type":"c1","uid":2019755,"ip_address":"","ucode":"869678C332F755","user_header":"https://static001.geekbang.org/account/avatar/00/1e/d1/ab/6e925b26.jpg","comment_is_top":false,"comment_ctime":1654226262,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654226262","product_id":100020801,"comment_content":"è€å¸ˆï¼Œå¦‚æœbin logåœ¨æäº¤çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†å´©æºƒï¼Œå³redo logoæœ‰äº†commitæ ‡å¿—ï¼Œä½†æ˜¯bin logè¿˜æ²¡æœ‰flyncåˆ°ç£ç›˜ï¼Œè¿™é‡Œå°±ä¼šä¸¢å¤±æ—¥å¿—ï¼Œä¸»ä»ä¸ä¸€è‡´äº†å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":346415,"user_name":"const","can_delete":false,"product_type":"c1","uid":1500149,"ip_address":"","ucode":"258BA2B11ED1B2","user_header":"https://static001.geekbang.org/account/avatar/00/16/e3/f5/f076b407.jpg","comment_is_top":false,"comment_ctime":1653122548,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653122548","product_id":100020801,"comment_content":"æœ‰ä¸ªé—®é¢˜ï¼Œinnodb_flush_log_at_tx_commit ä¸º1çš„æ—¶å€™ï¼Œæ˜¯å†…å­˜ä¸­çš„redo logç¯ä¸­çš„ib_logfileä¸­çš„æ•°æ® å†™å…¥page cacheç„¶å°±åˆ°diskè¿˜æ˜¯è¯´    æ•°æ®ä»redo log bufferä¸­æ‹¿åˆ° å†™å…¥page cacheå†åˆ°disk ","like_count":0},{"had_liked":false,"id":342890,"user_name":"æ ¸æ¡ƒ","can_delete":false,"product_type":"c1","uid":1385204,"ip_address":"","ucode":"7AB05270CBCCCB","user_header":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","comment_is_top":false,"comment_ctime":1650523413,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650523413","product_id":100020801,"comment_content":"å…³äºè¿™ç« çš„å†…å®¹ï¼Œæœ‰ä¸€ç‚¹å›°æƒ‘ï¼Œå¯¹äºoracleè¿™äº›æ•°æ®åº“æ¥è¯´ï¼Œä¸€èˆ¬æ˜¯ä¸å»ºè®®ä½¿ç”¨page cacheçš„ã€‚å› ä¸ºæœ¬è´¨ä¸Šæ•°æ®åº“è‡ªå·±æ˜¯æœ‰ä¸€ä»½å†…å­˜åœ¨ç»´æŠ¤çš„ï¼Œè€Œä½¿ç”¨äº†page cacheï¼Œä¹Ÿåªæ˜¯åˆ©ç”¨ç³»ç»Ÿçš„ç¼“å­˜ï¼Œè¿™æ ·åšåªæ˜¯æŠŠå†…å®¹ä»ç”¨æˆ·æ€å¤åˆ¶ä¸€éåˆ°å†…æ ¸æ€è¿›è¡Œæ¬è¿ï¼Œä½†æ˜¯æ„ä¹‰ä¸å¤§å•Šï¼Œæ‰€ä»¥åœ¨è¿™æ ·çš„åŸºç¡€ä¸Šï¼Œç›®å‰æ•°æ®åº“åˆ©ç”¨page cacheè¿™ä¸ªï¼Œæˆ‘æ¯”è¾ƒå›°æƒ‘ã€‚","like_count":0},{"had_liked":false,"id":342033,"user_name":"è®¸å®‡å®","can_delete":false,"product_type":"c1","uid":1107388,"ip_address":"","ucode":"3FBB9621953EF1","user_header":"https://static001.geekbang.org/account/avatar/00/10/e5/bc/e5ff2613.jpg","comment_is_top":false,"comment_ctime":1649985174,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1649985174","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæœ‰ä¸ªé—®é¢˜å’¨è¯¢ä¸€ä¸‹ï¼Œæˆ‘ä»¬æœåŠ¡å™¨ç³»ç»ŸæŒ‚äº†ï¼Œç°åœ¨mysqlæ˜¯å¯ä¸æ¥äº†ï¼Œå®‰è£…ç›®å½•ä¸‹æ–‡ä»¶éƒ½è¿˜å­˜åœ¨ï¼Œè¿™æ ·å¦‚ä½•æ‰èƒ½æ¢å¤æ•°æ®ï¼Œè¯•äº†å¥½å¤šçš„æ–¹æ³•éƒ½æ²¡æˆåŠŸã€‚","like_count":0},{"had_liked":false,"id":340844,"user_name":"è°­çˆ»","can_delete":false,"product_type":"c1","uid":1638791,"ip_address":"","ucode":"0555C52069B1FA","user_header":"https://static001.geekbang.org/account/avatar/00/19/01/87/1a2882ac.jpg","comment_is_top":false,"comment_ctime":1649174329,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649174329","product_id":100020801,"comment_content":"çœ‹åˆ°è¿™ä¸ªä½ç½® å‘ç°çœŸçš„å¥½éš¾å•Š æ¯ä¸€ç¯‡è®¤çœŸçœ‹ è¿˜æ˜¯æ²¡çœ‹æ‡‚","like_count":0},{"had_liked":false,"id":337754,"user_name":"é²Â·æœ¬","can_delete":false,"product_type":"c1","uid":1209939,"ip_address":"","ucode":"F1DEB30C21B48E","user_header":"https://static001.geekbang.org/account/avatar/00/12/76/53/21d62a23.jpg","comment_is_top":false,"comment_ctime":1647011031,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1647011031","product_id":100020801,"comment_content":"bäº‹åŠ¡æäº¤æ—¶é¡ºå¸¦æŒä¹…åŒ–äº†aäº‹åŠ¡çš„redo logï¼Œå¦‚æœè¿™æ—¶å€™ï¼Œaäº‹åŠ¡è¦å›æ»šï¼Œè¿™ä¸ªå·²ç»æŒä¹…åŒ–çš„redo logè¦å’‹å¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":331961,"user_name":"AKEI","can_delete":false,"product_type":"c1","uid":2762604,"ip_address":"","ucode":"D6836002F27010","user_header":"https://static001.geekbang.org/account/avatar/00/2a/27/6c/5abd5e9f.jpg","comment_is_top":false,"comment_ctime":1642923027,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642923027","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜å›°æ‰°äº†å¾ˆä¹…çƒ¦è¯·è§£ç­”ä¸‹ã€‚<br>å›¾3é‚£é‡Œçš„ä¸‰ä¸ªå¹¶å‘äº‹åŠ¡åœ¨prepareé˜¶æ®µï¼Œtrx1ç¬¬ä¸€ä¸ªåˆ°è¾¾åè¢«é€‰ä¸ºleaderä¸ºæ—¶é—´èŠ‚ç‚¹aï¼Œtrx1å¼€å§‹å†™ç›˜ä¸ºæ—¶é—´èŠ‚ç‚¹bï¼Œé‚£trx2å’Œtrx3åº”è¯¥æ˜¯åœ¨aå’Œbä¹‹é—´è¿›æ¥äº†å§ï¼Ÿé‚£aå’Œbä¹‹é—´trx1åšäº†ä»€ä¹ˆæ“ä½œå‘¢ï¼Ÿ<br>æ ¸å¿ƒçš„é—®é¢˜å°±æ˜¯å¤šä¸ªäº‹åŠ¡åœ¨prepareé˜¶æ®µæ˜¯æ€æ ·ç»„ç»‡ä¸ºä¸€ç»„çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":331871,"user_name":"AKEI","can_delete":false,"product_type":"c1","uid":2762604,"ip_address":"","ucode":"D6836002F27010","user_header":"https://static001.geekbang.org/account/avatar/00/2a/27/6c/5abd5e9f.jpg","comment_is_top":false,"comment_ctime":1642842521,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1642842521","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜å›°æ‰°äº†å¾ˆä¹…çƒ¦è¯·è§£ç­”ä¸‹ã€‚<br>å›¾3é‚£é‡Œçš„ä¸‰ä¸ªå¹¶å‘äº‹åŠ¡åœ¨prepareé˜¶æ®µï¼Œä»¥ä¸ºç€è¿™ä¸‰ä¸ªäº‹åŠ¡æ˜¯åŒæ—¶åœ¨å®¢æˆ·ç«¯æ‰§è¡Œcommitå‘½ä»¤äº†å¯¹å§ã€‚<br>trx1ç¬¬ä¸€ä¸ªåˆ°è¾¾åè¢«é€‰ä¸ºleaderä¸ºæ—¶é—´èŠ‚ç‚¹aï¼Œtrx1å¼€å§‹å†™ç›˜ä¸ºæ—¶é—´èŠ‚ç‚¹bï¼Œé‚£trx2å’Œtrx3åº”è¯¥æ˜¯åœ¨aå’Œbä¹‹é—´è¿›æ¥äº†å§ï¼Ÿé‚£aå’Œbä¹‹é—´trx1åšäº†ä»€ä¹ˆæ“ä½œå‘¢ï¼Ÿ<br>æ ¸å¿ƒçš„é—®é¢˜å°±æ˜¯å¤šä¸ªäº‹åŠ¡åœ¨prepareé˜¶æ®µæ˜¯æ€æ ·ç»„ç»‡ä¸ºä¸€ç»„çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":328744,"user_name":"Geek_56d8e2","can_delete":false,"product_type":"c1","uid":1184778,"ip_address":"","ucode":"D44E94FF5BFD9F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/hHAggykOyjScVG9qqSsdVaShDZoK6awO1uZYb3b75UA5QocVPMe3AT3AP3RDamtU7k8nekvc67DUzLRFDMTUQQ/132","comment_is_top":false,"comment_ctime":1640860089,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1640860089","product_id":100020801,"comment_content":"è€å¸ˆè¯·æ•™ä¸ªé—®é¢˜å“ˆ  å› ä¸ºmysqlå¥½åƒå¹¶æ²¡ä¿è¯ æ•°æ®è„é¡µå’Œredolog åˆ·ç›˜çš„é¡ºåº    å¦‚æœæ•°æ®è„é¡µåˆ·ç›˜æ—¶æœº å…ˆäºredolog åˆ·ç›˜æ—¶æœº  æ­¤æ—¶å‘ç”Ÿäº†crash ä¸” äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤   <br>é—®é¢˜1ï¼šè¿™ç§ç°è±¡ä¼šå‘ç”Ÿå—ï¼Ÿ<br>é—®é¢˜2ï¼šå¦‚æœä¼šå‘ç”Ÿ é‚£é‡å¯å mysql æ˜¯é€šè¿‡ä»€ä¹ˆæœºåˆ¶æ£€æµ‹åˆ°è¿™éƒ¨åˆ†æ•°æ®å‘¢ ï¼Ÿ<br>é—®é¢˜3ï¼šæ£€æµ‹åˆ°å  mysql åˆæ˜¯æ€ä¹ˆå°†è¿™éƒ¨åˆ†æ•°æ®å›æ»šçš„","like_count":0},{"had_liked":false,"id":325202,"user_name":"å£ç½©å¦–ç²¾","can_delete":false,"product_type":"c1","uid":2810676,"ip_address":"","ucode":"07BED12094551A","user_header":"https://static001.geekbang.org/account/avatar/00/2a/e3/34/74868d54.jpg","comment_is_top":false,"comment_ctime":1638861625,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638861625","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®ä¸€ä¸‹åœ¨å›¾5ä¸­ä¸¤é˜¶æ®µæäº¤çš„æœ€åä¸€ä¸ªredo log commitæ—¶writeçš„æ˜¯å•¥ï¼Ÿåœ¨prepareé˜¶æ®µå½“å‰äº‹åŠ¡çš„redo logä¸æ˜¯å·²ç»è½ç›˜äº†å—ï¼Ÿæœ›æ‚¨è§£ç­”ï¼Œè°¢è°¢ï¼","like_count":0},{"had_liked":false,"id":319925,"user_name":"éå¢¨","can_delete":false,"product_type":"c1","uid":2739046,"ip_address":"","ucode":"6C2F75B04DA1EB","user_header":"https://static001.geekbang.org/account/avatar/00/29/cb/66/c34226a9.jpg","comment_is_top":false,"comment_ctime":1636009997,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636009997","product_id":100020801,"comment_content":"è‡ªæˆ‘ç†è§£ï¼šæ˜¾ç¤ºæäº¤æƒ…å½¢ä¸‹ï¼Œåœ¨commitå‘½ä»¤æ‰§è¡Œå‰ï¼Œredolog å’Œ binlog å°±å·²ç»åˆ†åˆ«å†™åœ¨redolog bufferã€binlog cacheä¸­äº†ï¼Œç­‰commitå‘½ä»¤æ‰§è¡Œæ—¶ï¼Œæ‰ä¼šä¾æ¬¡æ‰§è¡Œredologã€binlogå†™æ“ä½œï¼›<br>å†™redologæ˜¯ç”±å‚æ•°innodb_flush_log_at_trx_commitå†³å®šçš„ï¼š<br>å½“å‚æ•°ä¸º0æ—¶ï¼Œåªéœ€ä¿®æ”¹redo logçŠ¶æ€ï¼›<br>å½“å‚æ•°ä¸º1æ—¶ï¼ŒæŠŠredo logä»redolog bufferå†™å…¥page cacheåfsyncåˆ°ç£ç›˜ï¼Œå¹¶ä¿®æ”¹redo logçŠ¶æ€ï¼›<br>å½“å‚æ•°ä¸º2æ—¶ï¼ŒæŠŠredo logä»redolog bufferä¸­å†™å…¥page cacheï¼Œå¹¶ä¿®æ”¹redo logçŠ¶æ€ï¼›<br>å†™binlog:å•å•åªæ˜¯æŠŠbinlogä»binlog cacheå†™å…¥page cacheï¼›<br>è€Œå‚æ•°sync_binlogåªæ˜¯æ§åˆ¶äº†æ˜¯å¦æŠŠpage cacheä¸­çš„binlog å¼‚æ­¥åˆ·æ–°åˆ°ç£ç›˜ï¼›<br>å½“å‚æ•°ä¸º0æ—¶ï¼Œåªè¿›è¡Œå†™ä½†ä¸fsyncï¼›<br>å½“å‚æ•°ä¸º1æ—¶ï¼Œæ¯æ¬¡å†™æ“ä½œå®Œæˆåå°±fsyncåˆ°ç£ç›˜ï¼›<br>å½“å‚æ•°ä¸ºNæ—¶ï¼Œå½“ç§¯ç´¯Nä¸ªäº‹åŠ¡åï¼Œæ‰fsyncåˆ°ç£ç›˜ï¼›<br>","like_count":1},{"had_liked":false,"id":319535,"user_name":"prader26","can_delete":false,"product_type":"c1","uid":1433707,"ip_address":"","ucode":"5EFFFC374ADECE","user_header":"https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg","comment_is_top":false,"comment_ctime":1635843832,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635843832","product_id":100020801,"comment_content":"<br>é€šå¸¸æˆ‘ä»¬è¯´ MySQL çš„â€œåŒ 1â€é…ç½®ï¼ŒæŒ‡çš„å°±æ˜¯ sync_binlog å’Œ innodb_flush_log_at_trx_commit éƒ½è®¾ç½®æˆ 1ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªäº‹åŠ¡å®Œæ•´æäº¤å‰ï¼Œéœ€è¦ç­‰å¾…ä¸¤æ¬¡åˆ·ç›˜ï¼Œä¸€æ¬¡æ˜¯ redo logï¼ˆprepare é˜¶æ®µï¼‰ï¼Œä¸€æ¬¡æ˜¯ binlogã€‚","like_count":0},{"had_liked":false,"id":312620,"user_name":"ä¸å‡¡","can_delete":false,"product_type":"c1","uid":2031689,"ip_address":"","ucode":"28A3EC4C309C56","user_header":"","comment_is_top":false,"comment_ctime":1631893230,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631893230","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™ï¼Œäº‹ç‰©çš„å¤§å°æ˜¯æ€ä¹ˆè®¡ç®—çš„ï¼Ÿ1.æ˜¯lsnçš„åç§»é‡å·®å€¼å—ï¼Ÿå¦‚æœæ˜¯ï¼Œlsnä¸­çš„lengthæ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„ï¼Ÿ2.binlog_cache_sizeå¤§å°é»˜è®¤32KBï¼Œè¿™ä¸ªlengthè¶…è¿‡äº†32KBå°±ä¼šç”¨åˆ°å†…å­˜ä¸´æ—¶è¡¨æ˜¯å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":307326,"user_name":"å¾æœå¤©å ‚","can_delete":false,"product_type":"c1","uid":2445066,"ip_address":"","ucode":"686ED7ECC00004","user_header":"https://static001.geekbang.org/account/avatar/00/25/4f/0a/0ebfbb01.jpg","comment_is_top":false,"comment_ctime":1629029823,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629029823","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œredo logä¸å®šæœŸä¼šåˆ·ç›˜ï¼Œäº‹åŠ¡è¿˜æ²¡æäº¤æ—¶å€™ä¸€éƒ¨åˆ†æ•°æ®å°±å·²ç»åˆ·ç›˜äº†ï¼Œé‚£äº‹åŠ¡å›æ»šåredo logä¸å°±å¤šäº†ä¸€éƒ¨åˆ†æ—¥å¿—äº†å—ï¼Œè¿™éƒ¨åˆ†æ—¥å¿—å¯¹ä¸šåŠ¡æ²¡æœ‰å¦¨ç¢å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":305963,"user_name":"æ˜Ÿç©º","can_delete":false,"product_type":"c1","uid":1411040,"ip_address":"","ucode":"636A0A14608EF0","user_header":"https://static001.geekbang.org/account/avatar/00/15/87/e0/63e7d43d.jpg","comment_is_top":false,"comment_ctime":1628245877,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628245877","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œæ˜¯ä¸æ˜¯æ— è®ºå‚æ•°è®¾ç½®çš„æ˜¯ä»€ä¹ˆå€¼ï¼Œredo log åˆ·ç›˜ï¼Œéƒ½æ˜¯write+fsyncï¼Œåªæ˜¯ä»€ä¹ˆæ—¶é—´åšå“ªä¸ªæ­¥éª¤çš„é—®é¢˜è€Œå·²ï¼Œè¿™æ ·ç†è§£æ­£ç¡®å—ï¼Ÿ<br>å› ä¸ºå¦‚æœ redo log é‚£ä¸ªå‚æ•°=1ï¼Œåªfsync çš„è¯ï¼Œé‚£è¯¥å¦‚ä½•è§£é‡Šä¸¤é˜¶æ®µçš„4ä¸ªæ­¥éª¤å‘¢ï¼Œæ¯”è¾ƒç–‘æƒ‘ã€‚","like_count":0},{"had_liked":false,"id":305957,"user_name":"æ˜Ÿç©º","can_delete":false,"product_type":"c1","uid":1411040,"ip_address":"","ucode":"636A0A14608EF0","user_header":"https://static001.geekbang.org/account/avatar/00/15/87/e0/63e7d43d.jpg","comment_is_top":false,"comment_ctime":1628242537,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628242537","product_id":100020801,"comment_content":"å½“innodb_flush_log_at_trx_commitè®¾ç½®ä¸º 1 çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½å°† redo log ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå³ç›´æ¥fsync ï¼Œè€Œä¸æ˜¯write+fsyncå§ï¼Ÿé‚£ä¹ˆåœ¨ä¸¤é˜¶æ®µæäº¤é‚£é‡Œï¼Œæ‹†è§£ä¸º4æ­¥ï¼Œç¬¬ä¸€æ­¥redo prepare write ï¼Œæ˜¯ä¸æ˜¯åªæœ‰å½“ innodb_flush_log_at_trx_commit ä¸ä¸º1 æ—¶ï¼Œæ‰ä¼šæ˜¯è¿™æ ·ï¼Ÿ","like_count":0},{"had_liked":false,"id":303845,"user_name":"å°ç ´å­©","can_delete":false,"product_type":"c1","uid":1352328,"ip_address":"","ucode":"F7616DF0BCDA5E","user_header":"https://static001.geekbang.org/account/avatar/00/14/a2/88/3f79f13b.jpg","comment_is_top":false,"comment_ctime":1627024505,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627024505","product_id":100020801,"comment_content":"ä¸€ä¸ªäº‹ç‰©æ²¡æäº¤ï¼Œè€Œredo logå·²ç»å†™åˆ°page cacheï¼Œå¦‚æœè¿™ä¸ªäº‹ç‰©å›æ»šäº†ï¼Œè¿™ä¸ªäº‹ç‰©çš„redo logæ˜¯ä¸æ˜¯è¿˜è¦ä»page cacheä¸Šåˆ æ‰ï¼Œå¦‚æœè¿™ä¸ªpage cacheå·²ç»è½ç›˜ï¼Œæ˜¯ä¸æ˜¯è¿˜è¦ä»diskä¸Šåˆ æ‰","like_count":0},{"had_liked":false,"id":302269,"user_name":"jiez95","can_delete":false,"product_type":"c1","uid":1235647,"ip_address":"","ucode":"65E5B97B960805","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJicjzWf69FU1YLHtplL3mVY75CCuia4IB9p5BxtgS1gC2mzfwow6gGMeU4YttycugWGeKMskqYWkxw/132","comment_is_top":false,"comment_ctime":1626151620,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626151620","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç–‘é—®è¯·æ•™ä¸€ä¸‹:<br>ç»„æäº¤éƒ½ä¼šæŠŠæœªcommitçš„redo logåˆ·ç›˜<br>1. é‚£ä¹ˆå¦‚æœæ­¤æ—¶redo logåˆ°è¾¾checkpointè§¦å‘æ•°æ®åˆ·ç›˜æ˜¯å¦ä¼šå§buffer_poolä¸­çš„è„é¡µåˆ·åˆ°ç£ç›˜ä¸­.<br>2. å¦‚æœä¼šé‚£ä¹ˆå¦‚æœè¿™ä¸ªæ—¶å€™crash, ä»…é€šè¿‡redo log + bin log å¥½åƒæ— æ³•å°†ç£ç›˜ä¸­çš„è„æ•°æ®ç»™å¤„ç†æ‰å§<br>(å³æƒ³é—® crashæ¢å¤çš„ç­–ç•¥ï¼š 1. åªæ¢å¤å·²æäº¤äº‹åŠ¡ 2. é‡åšæ‰€æœ‰äº‹åŠ¡ï¼Œå¦‚æœæ˜¯æœªæäº¤æˆ–å›æ»šçš„é€šè¿‡undo log å›æ»šæ‰æœªæäº¤äº‹åŠ¡)","like_count":0},{"had_liked":false,"id":302200,"user_name":"ä¸åƒè¾£ğŸ‘¾","can_delete":false,"product_type":"c1","uid":1333649,"ip_address":"","ucode":"B25E0725B5E85F","user_header":"https://static001.geekbang.org/account/avatar/00/14/59/91/fa2d8bb2.jpg","comment_is_top":false,"comment_ctime":1626136219,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1626136219","product_id":100020801,"comment_content":"è€å¸ˆ binlogé‚£ä¸ªæ˜¯é…ç½®çš„æ˜¯1ï¼Œredologé…ç½®çš„ä¸º2ã€‚å½“æœåŠ¡å™¨é‡å¯ binlogè½ç›˜åè¢«å¤‡åº“æ‰§è¡Œäº†ï¼Œredologè¿˜æ²¡è½ç›˜ï¼Œæ¢å¤çš„æ—¶å€™æ˜¯ä¸æ˜¯å°±é€ æˆä¸»å¤‡ä¸ä¸€è‡´äº†ï¼Ÿ","like_count":0},{"had_liked":false,"id":301319,"user_name":"å°˜","can_delete":false,"product_type":"c1","uid":1244251,"ip_address":"","ucode":"2C71FBCED5BFE6","user_header":"https://static001.geekbang.org/account/avatar/00/12/fc/5b/caa6a2a6.jpg","comment_is_top":false,"comment_ctime":1625630344,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1625630344","product_id":100020801,"comment_content":"ç­‰ trx1 è¦å¼€å§‹å†™ç›˜çš„æ—¶å€™ï¼Œè¿™ä¸ªç»„é‡Œé¢å·²ç»æœ‰äº†ä¸‰ä¸ªäº‹åŠ¡ï¼Œè¿™æ—¶å€™ LSN ä¹Ÿå˜æˆäº† 160ï¼›ä¸ºä»€ä¹ˆLSNæ˜¯160ï¼Œæ€ä¹ˆç®—çš„","like_count":0},{"had_liked":false,"id":300947,"user_name":"walzzz","can_delete":false,"product_type":"c1","uid":1707393,"ip_address":"","ucode":"17D8079494189A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/0d/81/ed4957e8.jpg","comment_is_top":false,"comment_ctime":1625463147,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1625463147","product_id":100020801,"comment_content":"äº‹åŠ¡è¿˜æ²¡æäº¤çš„æ—¶å€™ï¼Œredo log bufferä¸­çš„éƒ¨åˆ†æ—¥å¿—å°±å¯èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜â€”â€”é‚£å¦‚æœæ­¤æ—¶è¿›è¡Œå›æ»šï¼ŒæŒä¹…åŒ–äº†çš„redo logå°†å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":300946,"user_name":"walzzz","can_delete":false,"product_type":"c1","uid":1707393,"ip_address":"","ucode":"17D8079494189A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/0d/81/ed4957e8.jpg","comment_is_top":false,"comment_ctime":1625463140,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1625463140","product_id":100020801,"comment_content":"äº‹åŠ¡è¿˜æ²¡æäº¤çš„æ—¶å€™ï¼Œredo log bufferä¸­çš„éƒ¨åˆ†æ—¥å¿—å°±å¯èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜â€”â€”é‚£å¦‚æœæ­¤æ—¶è¿›è¡Œå›æ»šï¼ŒæŒä¹…åŒ–äº†çš„redo logå°†å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":300760,"user_name":"ç²¾ç¥ç—…","can_delete":false,"product_type":"c1","uid":1199038,"ip_address":"","ucode":"3066FE896874E4","user_header":"https://static001.geekbang.org/account/avatar/00/12/4b/be/83cbb285.jpg","comment_is_top":false,"comment_ctime":1625376199,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625376199","product_id":100020801,"comment_content":" åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œæœ‰å¤šæ¡è¯­å¥ï¼Œ æ˜¯æ‰§è¡Œä¸€æ¡è¯­å¥ç”Ÿæˆä¸€æ¡redolog å—ï¼Ÿå¦‚æœäº‹åŠ¡è¿˜æœªæäº¤ï¼Œåå°å¼‚æ­¥çº¿ç¨‹æŠŠæœªæäº¤çš„redolog fsync å†™å…¥ç£ç›˜ä¸ä¼šæœ‰é—®é¢˜å—?","like_count":0},{"had_liked":false,"id":296062,"user_name":"cake","can_delete":false,"product_type":"c1","uid":1966533,"ip_address":"","ucode":"55A7FC6CC1204C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/01/c5/b48d25da.jpg","comment_is_top":false,"comment_ctime":1622725559,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622725559","product_id":100020801,"comment_content":"hello è€å¸ˆ å¯ä»¥ä»åŸç†ä¸Šè§£é‡Šä¸‹ ä¸ºä»€ä¹ˆbinlog å¿…é¡»ä¸€æ¬¡å†™å…¥,log buffer ä¸­å†…å®¹å´å¯ä»¥æ­é¡ºé£è½¦å—","like_count":0},{"had_liked":false,"id":294104,"user_name":"T","can_delete":false,"product_type":"c1","uid":1668015,"ip_address":"","ucode":"4CC56C9EC26B8E","user_header":"https://static001.geekbang.org/account/avatar/00/19/73/af/a0c708ec.jpg","comment_is_top":false,"comment_ctime":1621762758,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621762758","product_id":100020801,"comment_content":"è¿™ä¸€ç«  æ˜¯ä¸æ˜¯å¯ä»¥æåŠä¸‹double write æœºåˆ¶ï¼Ÿæ„Ÿè§‰ä¼šæ·±ä¸€ç‚¹","like_count":0},{"had_liked":false,"id":294057,"user_name":"æ±‰æ±Ÿ","can_delete":false,"product_type":"c1","uid":1788647,"ip_address":"","ucode":"01622D984B8F9B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/4a/e7/6c16af5d.jpg","comment_is_top":false,"comment_ctime":1621737809,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621737809","product_id":100020801,"comment_content":"çœ‹äº†è€å¸ˆçš„æ–‡ç« ï¼Œä¹Ÿçœ‹äº†åŒå­¦ä»¬çš„è¯„è®ºï¼Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œè€å¸ˆè¯´åªæœ‰äº‹åŠ¡Aè¿›å…¥åˆ°commité˜¶æ®µï¼Œredolog æ‰ä¼šæœ‰ redolog prepare çŠ¶æ€ï¼Œcrash-safeæ•°æ®æ¢å¤çš„æ—¶å€™å»æ‰¾redologï¼Œç¢°åˆ°åªæœ‰ parepareã€è€Œæ²¡æœ‰ commit çš„ redo logï¼Œå°±æ‹¿ç€ XID å» binlog æ‰¾å¯¹åº”çš„äº‹åŠ¡ï¼Œæ¢å¤æ•°æ®ã€‚é‚£åœ¨å‡è®¾äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­äº‹åŠ¡Aåœ¨æäº¤å‰ï¼Œæœ‰ä¸€éƒ¨åˆ†redo logè¢«äº‹åŠ¡Bæå‰æŒä¹…åŒ–ï¼Œè¿™ä¸ªæ—¶å€™æ–­ç”µï¼Œè¿˜éœ€è¦é€šè¿‡æ‰«æredologå’Œbinlog çœ‹æ˜¯å¦éœ€è¦æäº¤æ•°æ®å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":293303,"user_name":"lleft","can_delete":false,"product_type":"c1","uid":1970443,"ip_address":"","ucode":"D573EB509455AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","comment_is_top":false,"comment_ctime":1621328916,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1621328916","product_id":100020801,"comment_content":"æ²¡æœ‰æäº¤çš„äº‹åŠ¡çš„redo logè¢«åŠ¨åˆ·ç›˜éƒ½æ˜¯åªåˆ·åˆ°æ–‡ä»¶ç³»ç»Ÿçš„page cacheè¿˜æ˜¯è¯´åªæœ‰redo log bufferå åˆ°innodb_buffer_pool_sizeçš„ä¸€åŠè¿™ç§æƒ…å†µæ‰ä¼šåªåˆ·åˆ°page cacheï¼Œå…¶ä»–çš„éƒ½æ˜¯ç›´æ¥è½ç›˜åˆ°redo logæ–‡ä»¶ï¼Ÿ","like_count":0},{"had_liked":false,"id":285813,"user_name":"T","can_delete":false,"product_type":"c1","uid":1668015,"ip_address":"","ucode":"4CC56C9EC26B8E","user_header":"https://static001.geekbang.org/account/avatar/00/19/73/af/a0c708ec.jpg","comment_is_top":false,"comment_ctime":1617018410,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1617018410","product_id":100020801,"comment_content":"æ€»ç»“ä¸€ä¸‹ï¼šåªæœ‰äº‹åŠ¡æäº¤ æ‰ä¼šè§¦å‘ ä¸¤é˜¶æ®µæäº¤ï¼Œæäº¤ä¹‹å‰ï¼Œbinlog,redo log å„è‡ªåœ¨å†…å­˜é‡Œé¢ç©ï¼ˆbinlog cacheï¼Œredo log bufferï¼‰,ç„¶åinnodbæ¯ç§’ä¼šæŠŠredolog bufferçš„æ•°æ®å†™åˆ°page cache,ç„¶åæŒä¹…åŒ–ï¼ˆæ‰€ä»¥ä¼šå‡ºç°è¿˜æ²¡æäº¤çš„redologè¢«æŒä¹…åŒ–ï¼‰ï¼Œè¿˜æœ‰ä¸¤ç§æƒ…å†µä¼šå‡ºç°æ²¡æäº¤çš„redologè¢«å†™åˆ°ç£ç›˜ä¸­ï¼›1.redo log buff å ç”¨ç©ºé—´åˆ°äº†buff_sizeçš„ä¸€åŠï¼Œä¼šä¸»åŠ¨å†™ç›˜ï¼Œä½†æ˜¯å› ä¸ºäº‹åŠ¡æ²¡æäº¤ï¼Œæ‰€ä»¥ç›´æ¥åˆ°äº†pagecache,2.å¹¶è¡Œäº‹åŠ¡ä¹Ÿå¯èƒ½æŠŠredo log buff é‡Œé¢çš„æ—¥å¿—å…¨éƒ¨ä¸¢åˆ°ç£ç›˜æˆ–è€…page cache(å–å†³äºå‚æ•°innodb_flush_log_at_trx_commitç­‰äºå‡ ï¼Œè‡ªå·±å¯ä»¥çœ‹23ç« )ï¼Œä½†æ˜¯è¿™3ç§æƒ…å†µï¼Œéƒ½æ˜¯æ²¡é—®é¢˜çš„ï¼Œä¸ºä»€ä¹ˆï¼Œå› ä¸ºæœ‰binlogï¼Œå¼€ç¯‡æˆ‘å°±è¯´äº†ä¸¤é˜¶æ®µæäº¤æ˜¯åœ¨æäº¤åè§¦å‘ï¼Œæ‰€ä»¥ å°±ç®—äº‹åŠ¡æœ€åæ²¡æäº¤ï¼Œå› ä¸ºæ²¡binlogï¼Œæ‰€ä»¥ä¼šå›æ»šæ‰redo logã€‚","like_count":0},{"had_liked":false,"id":281459,"user_name":"Bin","can_delete":false,"product_type":"c1","uid":1304406,"ip_address":"","ucode":"26BA010D2990C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/56/87f45704.jpg","comment_is_top":false,"comment_ctime":1614756419,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614756419","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå½“å‚æ•°sync_binlog=0ï¼šbinlogä»€ä¹ˆæ—¶å€™ä¼šåšfsyncæ“ä½œï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1299041,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d2/61/c77f63df.jpg","nickname":"zhangchuan","note":"","ucode":"8EF11A6A6DF5CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368356,"discussion_content":"ä¸º0æ—¶ï¼Œåªæ˜¯æŠŠç¼“å­˜æ•°æ®å†™åˆ°page cacheä¸­ï¼Œä¸åˆ·ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618668114,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":277827,"user_name":"ä»è¿œæ–¹è¿‡æ¥","can_delete":false,"product_type":"c1","uid":1797551,"ip_address":"","ucode":"4791DBC7E05B1D","user_header":"","comment_is_top":false,"comment_ctime":1612609220,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612609220","product_id":100020801,"comment_content":"ä¸ºä»€ä¹ˆredo log å«bufferï¼Œbinlogå«cacheå‘¢ï¼Ÿä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":276922,"user_name":"åŠ±ç ”å†°","can_delete":false,"product_type":"c1","uid":1106394,"ip_address":"","ucode":"FCBC8266018FA0","user_header":"https://static001.geekbang.org/account/avatar/00/10/e1/da/d7f591a7.jpg","comment_is_top":false,"comment_ctime":1612178592,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1612178592","product_id":100020801,"comment_content":"è€å¸ˆ: æˆ‘ä¸å»ºè®®ä½ æŠŠ innodb_flush_log_at_trx_commit è®¾ç½®æˆ 0ã€‚å› ä¸ºæŠŠè¿™ä¸ªå‚æ•°è®¾ç½®æˆ 0ï¼Œè¡¨ç¤º redo log åªä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™æ ·çš„è¯ MySQL æœ¬èº«å¼‚å¸¸é‡å¯ä¹Ÿä¼šä¸¢æ•°æ®ï¼Œé£é™©å¤ªå¤§ã€‚è€Œ redo log å†™åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cache çš„é€Ÿåº¦ä¹Ÿæ˜¯å¾ˆå¿«çš„ï¼Œæ‰€ä»¥å°†è¿™ä¸ªå‚æ•°è®¾ç½®æˆ 2 è·Ÿè®¾ç½®æˆ 0 å…¶å®æ€§èƒ½å·®ä¸å¤šï¼Œä½†è¿™æ ·åš MySQL å¼‚å¸¸é‡å¯æ—¶å°±ä¸ä¼šä¸¢æ•°æ®äº†ï¼Œç›¸æ¯”ä¹‹ä¸‹é£é™©ä¼šæ›´å°ã€‚<br>è€å¸ˆï¼Œè®¾ç½®æˆ0è·Ÿ2éƒ½æ˜¯å…¶å®éƒ½æ˜¯å†™åˆ°å†…å­˜é‡Œé¢ï¼Œåªä¸è¿‡è®¾ç½®æˆ2æ˜¯å†™å…¥ç³»ç»Ÿçš„page cacheä¸­ï¼Œä¸ºä»€ä¹ˆè®¾ç½®æˆ2å°±ä¸ä¸¢æ•°æ®å‘¢ï¼Ÿæ˜¯å› ä¸ºæ¯ä¸€ç§’çš„fsyncå—ï¼Ÿå¦‚æœæ˜¯é‚£è¿™ä¸€ç§’ä¹‹é—´çš„æ•°æ®æ˜¯ä¸æ˜¯ä¹Ÿæœ‰ä¸¢çš„é£é™©ï¼Ÿ","like_count":0},{"had_liked":false,"id":275307,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1101762,"ip_address":"","ucode":"003700A99A910B","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/c2/a5b3ceaf.jpg","comment_is_top":false,"comment_ctime":1611459573,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611459573","product_id":100020801,"comment_content":"æ—è€å¸ˆ, ä½ å¥½.<br><br>å…³äºä¼˜åŒ–çš„ç¬¬ä¸€æ¡(è®¾ç½® binlog ç»„æäº¤çš„å‚æ•°), æˆ‘çš„ç†è§£æ˜¯å¦‚æœè¿˜æ²¡è¾¾åˆ° binlog ç»„æäº¤çš„æ¬¡æ•°,è¿™æ—¶å¦‚æœä¸»æœºæ–­ç”µæˆ–è€…å¼‚å¸¸é‡å¯,ä¹Ÿä¼šå¯¼è‡´è¿™éƒ¨åˆ†è¿˜æ²¡æŒä¹…åŒ–çš„ binlog ä¸¢å¤±å§.<br><br>ä¸ºä»€ä¹ˆæ—è€å¸ˆè¯´ä¸ä¼šæœ‰æ•°æ®ä¸¢å¤±çš„é£é™©å‘¢? æˆ‘ä¸å¤ªç†è§£.","like_count":0},{"had_liked":false,"id":273164,"user_name":"åˆ˜éœ‡","can_delete":false,"product_type":"c1","uid":1836971,"ip_address":"","ucode":"64D0A2BA0F4A03","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIWFAJGwjiadzt3Cv7Wgv3jqcpu113lbuhBEKIEDEqaF615bGPr0Fib5eDlyIeUxm7XE7SbiavdMyI0w/132","comment_is_top":false,"comment_ctime":1610461512,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1610461512","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—®ä¸€ä¸‹redo logæ‰“commitæ ‡çš„é—®é¢˜ï¼Œåœ¨äº‹åŠ¡æ‰§è¡Œä¸­å°±å·²ç»è¢«redoå°±è¢«æŒä¹…åŒ–çš„æƒ…å†µä¸‹ï¼Œåç»­è¦å†æ‰“prepareæ ‡æˆ–commitæ ‡çš„æ—¶å€™ï¼Œæ˜¯ç›´æ¥åœ¨ç£ç›˜é‡Œå†é¡ºåºå†™ä¸€ä¸ªæ‰“æ ‡çš„æ—¥å¿—ä¹ˆï¼Ÿè¿˜æ˜¯è¦æ‰¾åˆ°ä¹‹å‰æŒä¹…åŒ–æ—¥å¿—çš„ä½ç½®ï¼Œç„¶åç»™æ—¥å¿—æ‰“æ ‡ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1366960,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLYicScS2u9alz421bWmOT0qKkAJbXcsFhtuqM6XByicnSL6nFHTQ5fPLM9R8HgjABicJXdqQljIJroQ/132","nickname":"ä¸Šå–„è‹¥æ°´","note":"","ucode":"DEB612BBF40014","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":342651,"discussion_content":"æœ‰åŒæ ·ç–‘æƒ‘ï¼Œæ„Ÿè§‰åº”è¯¥æ˜¯é¡ºåºå†å†™æ—¥å¿—ï¼Œå¦åˆ™è¿˜éœ€è¦æ‰¾åˆ°ä¹‹å‰çš„è®°å½•è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿå°±æ²¡æœ‰é¡ºåºå†™çš„ä¼˜åŠ¿äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610765518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":272162,"user_name":"æ½‡æ´’çš„æ¯…å°å³°","can_delete":false,"product_type":"c1","uid":1118141,"ip_address":"","ucode":"24638DAED92F08","user_header":"https://static001.geekbang.org/account/avatar/00/11/0f/bd/7a9b2a0c.jpg","comment_is_top":false,"comment_ctime":1609957386,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1609957386","product_id":100020801,"comment_content":"è€å¸ˆä¸»æœºæ‰ç”µå’Œå¼‚å¸¸é‡å¯æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå°†innodb_flush_log_at_trx_commitè®¾ç½®ä¸º2 é£é™©æ˜¯ä¸»æœºæ‰ç”µä¼šä¸¢å¤±æ•°æ®å’Œæ‰€ä»¥å°†è¿™ä¸ªå‚æ•°è®¾ç½®æˆ 2 è·Ÿè®¾ç½®æˆ 0 å…¶å®æ€§èƒ½å·®ä¸å¤šï¼Œä½†è¿™æ ·åš MySQL å¼‚å¸¸é‡å¯æ—¶å°±ä¸ä¼šä¸¢æ•°æ®äº†ï¼Œç›¸æ¯”ä¹‹ä¸‹é£é™©ä¼šæ›´å° æœ‰ç‚¹åˆ†ä¸æ¸…äº†","like_count":0,"discussions":[{"author":{"id":1440185,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f9/b9/21b0553f.jpg","nickname":"å¶å°‘æ³¢","note":"","ucode":"CDF3DEEC7DFEA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":343473,"discussion_content":"ä¸»æœºæ‰ç”µï¼Œä¼šå¯¼è‡´æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ï¼ˆpage cacheï¼‰ä¸­çš„æ•°æ®ä¸¢å¤±ï¼›å¼‚å¸¸é‡å¯ï¼Œæˆ‘ç†è§£è¯´çš„æ˜¯mysqlè¿›ç¨‹é‡å¯ï¼Œæ²¡æ–­ç”µçš„è¯ï¼Œæ–‡ä»¶ç³»ç»Ÿç¼“å­˜ä¸­çš„æ•°æ®ä¸ä¼šä¸¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611056442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":269646,"user_name":"å¼ ä¸‰","can_delete":false,"product_type":"c1","uid":1004092,"ip_address":"","ucode":"1155528FAE1546","user_header":"https://static001.geekbang.org/account/avatar/00/0f/52/3c/d6fcb93a.jpg","comment_is_top":false,"comment_ctime":1608726005,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608726005","product_id":100020801,"comment_content":"è¿™ç¯‡å€¼å¾—çœ‹å¥½å¤šéï¼ŒåŒ…æ‹¬æ–‡ä¸­æåˆ°çš„ç¬¬äºŒç¯‡å’Œç¬¬15ç¯‡","like_count":0},{"had_liked":false,"id":265587,"user_name":"AluAlu","can_delete":false,"product_type":"c1","uid":1309974,"ip_address":"","ucode":"ACDE9CD9D7B459","user_header":"https://static001.geekbang.org/account/avatar/00/13/fd/16/719fa5c3.jpg","comment_is_top":false,"comment_ctime":1606957908,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606957908","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå¦‚æœAäº‹åŠ¡çš„éƒ¨åˆ†redologè¢«Bäº‹åŠ¡commitæ‰ï¼Œå¦‚æœAäº‹åŠ¡å›æ»šäº†æ€ä¹ˆåŠï¼Ÿ","like_count":0},{"had_liked":false,"id":265403,"user_name":"LPF","can_delete":false,"product_type":"c1","uid":2287841,"ip_address":"","ucode":"036C552D7251E9","user_header":"https://static001.geekbang.org/account/avatar/00/22/e8/e1/6045b299.jpg","comment_is_top":false,"comment_ctime":1606890697,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606890697","product_id":100020801,"comment_content":"è¯·é—®è€å¸ˆï¼Œmysqlçš„redo logæŒä¹…åŒ–åˆ°ç£ç›˜äº†ï¼Œä½†æ˜¯binlogæ²¡æ­£ç¡®å†™å…¥ï¼Œæ­¤æ—¶è¦å›æ»šï¼Œé‚£ä¹ˆredologæŒä¹…åŒ–åˆ°ç£ç›˜çš„æ•°æ®ä¸å°±æ˜¯è„æ•°æ®å—ã€‚","like_count":0},{"had_liked":false,"id":261402,"user_name":"x-rayîŒº","can_delete":false,"product_type":"c1","uid":1140175,"ip_address":"","ucode":"8363F0C4D0AC0B","user_header":"https://static001.geekbang.org/account/avatar/00/11/65/cf/326c0eea.jpg","comment_is_top":false,"comment_ctime":1605323447,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1605323447","product_id":100020801,"comment_content":"binlogåœ¨åˆ·ç£ç›˜çš„æ—¶å€™ï¼Œæ¯”å¦‚ä¸€ä¸ªå®Œæ•´äº‹åŠ¡çš„binlogåœ¨åˆ·ç›˜ï¼Œåˆ·ä¸€åŠæ–­ç”µäº†ï¼Œä¼šæ€æ ·ï¼Ÿ","like_count":0},{"had_liked":false,"id":261004,"user_name":"kali","can_delete":false,"product_type":"c1","uid":1042714,"ip_address":"","ucode":"7159F913A83016","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/1NMAMj2T81BGLJhsnJ7IZL9BeP6LoX6ajukkTKficABoStaE6mAFHBibRQ3HiaG3VNJibVtqQy5m9RMibGfic62yibd7g/132","comment_is_top":false,"comment_ctime":1605170571,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1605170571","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰äºŒä¸ªç–‘é—®ï¼š<br>1ï¼šå½“è®¾ç½®ä¸ºsync_binlog=0,innodb_flush_log_at_trx_commit=0çš„æ—¶å€™ï¼Œåªæ‰§è¡Œè¯­å¥ï¼Œä¸commitï¼Œæ˜¯å…ˆå†™binlog cache ,è¿˜æ˜¯å…ˆå†™redo log cache ï¼Œè¿˜æ˜¯åŒæ—¶å†™å‘¢ï¼Ÿ å¦‚æœæ˜¯å…ˆå†™redo log cache ,ä¸ºä»€ä¹ˆæ‰§è¡Œå¤§çš„insert into select * from big_tableçš„æ—¶å€™ï¼Œä¼šæŠ¥è¶…è¿‡max_binlog_size å¤§å°å‘¢ï¼Ÿ<br>2ï¼šåœ¨åšäº‹åŠ¡å†²çªæ£€æµ‹çš„æ—¶å€™ï¼Œä¼šæœ‰æ•°æ®å†™åˆ°binlog cacheä¸­å—ï¼Ÿ<br>2ï¼š","like_count":0},{"had_liked":false,"id":258494,"user_name":"dbtiger","can_delete":false,"product_type":"c1","uid":1324202,"ip_address":"","ucode":"05E8447593318C","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/aa/431de942.jpg","comment_is_top":false,"comment_ctime":1604461740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604461740","product_id":100020801,"comment_content":"å°±å•å•æå‡æ€§èƒ½è€Œé€‰æ‹©ä¸¢ binlog æ—¥å¿—æˆ–è€…ä¸¢æ•°æ®è¿™ç§é€‰æ‹©æ˜¯ä¸ç†æ€§çš„ï¼Œæ•°æ®åº“æ„ä¹‰å°±åœ¨äºå®‰å…¨å­˜æ•°æ®ï¼Œå¯¹äºç‰ºç‰²ä¸¢æ•°æ®æ¥æ¢å–æ€§èƒ½æ˜¯ä¸‹ä¸‹ç­–ã€‚","like_count":0},{"had_liked":false,"id":256663,"user_name":"lanco","can_delete":false,"product_type":"c1","uid":1188352,"ip_address":"","ucode":"C24A0A8716C78C","user_header":"https://static001.geekbang.org/account/avatar/00/12/22/00/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1603700257,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603700257","product_id":100020801,"comment_content":"çœ‹åˆ°æ–‡ç« çš„ä¸¤å¥è¯ï¼Œå†™åˆ°ç£ç›˜ä¸æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œå†™åˆ°ç£ç›˜æ˜¯å†™åˆ°æ–‡ä»¶ç³»ç»Ÿå±‚é¢ï¼ŒæŒä¹…åŒ–åˆ°ç£ç›˜æ‰æ˜¯è½åˆ°ç£ç›˜ä¸Šï¼Œlinuxåœ¨è£¸ç£ç›˜ä¸Šå°è£…äº†ä¸€å±‚æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™æ ·å­æ“ä½œç³»ç»Ÿä¸æ˜¯ç›´æ¥è¯»è£¸ç£ç›˜ï¼Œè€Œæ˜¯é€šè¿‡æ–‡ä»¶ç³»ç»Ÿå»å’Œç£ç›˜äº¤äº’","like_count":0},{"had_liked":false,"id":250677,"user_name":"Geek_b2933e","can_delete":false,"product_type":"c1","uid":1370020,"ip_address":"","ucode":"B9398B99B9914D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKKUmQ9Vu1JmWw1ZMIZvN6QibLuSVibiaPQrO5TzCOYNfu4T74vMvXJk12J7C0jZGYhUJWET0h0AG0Rw/132","comment_is_top":false,"comment_ctime":1601194063,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1601194063","product_id":100020801,"comment_content":"page cache æ˜¯ä¸€å—å†…å­˜ å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1788647,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/4a/e7/6c16af5d.jpg","nickname":"æ±‰æ±Ÿ","note":"","ucode":"01622D984B8F9B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":346611,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612005700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245734,"user_name":"summer_7196","can_delete":false,"product_type":"c1","uid":1390813,"ip_address":"","ucode":"B61E9F29D0D8CE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ2QFSebcWYzvSibOicRbaeqGmq1kFuHVvwjadDsicQnIbovlGqSfmfibtib9TSwcIqWfcxkKw8DSxTTVg/132","comment_is_top":false,"comment_ctime":1599036960,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599036960","product_id":100020801,"comment_content":"åœ¨åŒ1çš„é…ç½®ä¸‹ï¼Œsync_binlog=1,æŒ‡äº‹ç‰©æäº¤æ—¶æ‰fsyncã€‚å‡è®¾ä¸€ä¸ªäº‹ç‰©é‡Œæœ‰å¤šä¸ªæ›´æ–°è¯­å¥ï¼Œæ˜¯ç­‰æ‰€æœ‰è¯­å¥æ‰§è¡Œå®Œï¼Œå†ä¸€æ¬¡æ€§fsyncçš„ï¼Œè¿˜æ˜¯æ¯ä¸ªsqlæ‰§è¡Œå®Œå°±åˆ·ç›˜äº†ã€‚ä»–æ˜¯æ€ä¹ˆåˆ¤å®šäº‹ç‰©æäº¤è¿™ä¸ªåŠ¨ä½œçš„ã€‚æˆ‘æ˜¯ç†è§£æˆåªæœ‰commitçš„æ—¶å€™ï¼Œæ‰å«äº‹ç‰©æäº¤æ—¶ã€‚ä½†æ˜¯è¿™æ ·åˆä¸ç¬¦åˆå´©æºƒæ¢å¤åŸç†ã€‚äº‹ç‰©æäº¤æ—¶æŒ‡ä¸€ä¸ªè¯­å¥æ‰§è¡Œå®Œï¼Ÿï¼Ÿå¦‚æœä¸æ˜¯ï¼Œä»–æ€ä¹ˆçŸ¥é“æˆ‘æœ‰å‡ ä¸ªæ›´æ–°è¯­å¥çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":241845,"user_name":"${name}","can_delete":false,"product_type":"c1","uid":2044025,"ip_address":"","ucode":"EE643BCFC70661","user_header":"https://static001.geekbang.org/account/avatar/00/1f/30/79/cc553d32.jpg","comment_is_top":false,"comment_ctime":1597465217,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597465217","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜<br>innodb_flush_log_at_trx_commitè®¾ç½®ä¸º 1 çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½å°† redo log ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼›<br>è¿™å¥è¯æˆ‘ç†è§£å°±æ˜¯ commit + write + fsync <br>é‚£ä¸ºä»€ä¹ˆæ¯ç§’ä¸€æ¬¡åå°è½®è¯¢åˆ·ç›˜ï¼Œå†åŠ ä¸Šå´©æºƒæ¢å¤è¿™ä¸ªé€»è¾‘ï¼Œ<br>InnoDB å°±è®¤ä¸º redo log åœ¨ commit çš„æ—¶å€™å°±ä¸éœ€è¦ fsync äº†ï¼Œåªä¼š write åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸­å°±å¤Ÿäº†ã€‚","like_count":0},{"had_liked":false,"id":237794,"user_name":"Romber","can_delete":false,"product_type":"c1","uid":1205508,"ip_address":"","ucode":"3FB24B736FF7E3","user_header":"https://static001.geekbang.org/account/avatar/00/12/65/04/fea2dcf9.jpg","comment_is_top":false,"comment_ctime":1595955678,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595955678","product_id":100020801,"comment_content":"å¦‚æœbinlogå·²writeåˆ°page cacheäº†ï¼Œæ­£åœ¨fsyncåˆ°ç£ç›˜çš„è¿‡ç¨‹ä¸­çªç„¶æœåŠ¡å™¨æ‰ç”µäº†ï¼Œè¿™ä¸ªæ—¶å€™ä¼šæ€ä¹ˆæ ·ï¼Ÿbinlogæ–‡ä»¶æŸåå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":237632,"user_name":"sibyl","can_delete":false,"product_type":"c1","uid":1323652,"ip_address":"","ucode":"0D142011860D69","user_header":"","comment_is_top":false,"comment_ctime":1595905615,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595905615","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼ŒæŒ‰ç…§æˆ‘å¾—ç†è§£ï¼Œbinlog sync è®¾ç½®ä¸º1ï¼Œinnodb_flush_log_at_trx_commitè®¾ç½®ä¸º2ï¼Œä¹Ÿæ˜¯æœ‰å¯èƒ½ä¸¢å¤±æ•°æ®å’Œä¸»ä»ä¸ä¸€è‡´çš„å§ï¼Ÿ<br><br>å› ä¸º12é…ç½®ä¿è¯åœ¨å“åº”å®¢æˆ·ç«¯ä¹‹å‰binlogæŒä¹…åŒ–ä½†æ˜¯ä¸ä¿è¯redologæŒä¹…åŒ–ï¼Œå‡å¦‚åœ¨å“åº”å®¢æˆ·ç«¯å¤„ç†æˆåŠŸåç«‹åˆ»crashäº†ï¼Œé‚£ä¹ˆé‡å¯åï¼Œåªæœ‰binlogæ²¡æœ‰redologæ‰€ä»¥æ— æ³•æ¢å¤äº‹åŠ¡ï¼Œé€ æˆæ•°æ®ä¸¢å¤±;å¹¶ä¸”ä»åº“èƒ½è·å–binlogå¹¶æ‰§è¡Œï¼Œæ‰€ä»¥é€ æˆä¸»ä»ä¸ä¸€è‡´ã€‚<br><br>è€å¸ˆï¼Œè¿™æ ·ç†è§£å¯¹ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":237608,"user_name":"sibyl","can_delete":false,"product_type":"c1","uid":1323652,"ip_address":"","ucode":"0D142011860D69","user_header":"","comment_is_top":false,"comment_ctime":1595899220,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595899220","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå‚è€ƒmelonæè¿°binlog fsyncé˜¶æ®µçš„ä¼ªä»£ç ï¼Œåšäº†ä¸€ç‚¹ä¿®æ”¹: è®¾ç½®delayåï¼Œäº‹åŠ¡ä¼šç­‰å¾…æ¡ä»¶ï¼Œæ‰€ä»¥æˆ‘ç”¨äº†whileè¡¨ç¤ºï¼Œå…·ä½“å¦‚ä¸‹:<br><br><br>binlog fsync é˜¶æ®µ:<br><br>if(binlog_group_commit_sync_delay &gt; 0 || binlog_group_commit_sync_no_delay_count &gt; 0){<br>    while ( NOW - sart_time &lt;= binlog_group_comnit_sync_delay &amp;&amp; group_write &lt;= binlog_group_commit_sync_no_delay_count){}<br>    fsync<br><br>}<br><br> IF sync_binlog &gt; 0 &amp;&amp; global_write &gt;= sync_binlog<br>        fsync","like_count":0},{"had_liked":false,"id":237601,"user_name":"sibyl","can_delete":false,"product_type":"c1","uid":1323652,"ip_address":"","ucode":"0D142011860D69","user_header":"","comment_is_top":false,"comment_ctime":1595898054,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595898054","product_id":100020801,"comment_content":"1.è¯·é—®è€å¸ˆï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡å“åº”å®¢æˆ·ç«¯å‰redologå’Œbinlogä¸€å®šæ˜¯flushçš„ä¹ˆï¼Ÿ<br><br>å¦‚æœä¸é…ç½®æœ‰å…³ï¼Œé‚£æ˜¯ä¸æ˜¯åŒ1æ‰èƒ½ä¿è¯ä¸€å®šflushï¼Œæ­¤æ—¶æ‰ä¸ä¼šä¸¢æ•°æ®å¯¹ä¹ˆï¼Ÿ<br><br>2.innodb flush log at trx commit å½±å“çš„æ˜¯ redolog  prepare flushå§ï¼Ÿ<br><br>3.binlog sync è®¾ç½®æˆ100ï¼Œredolog flush è®¾ç½®æˆ0&#47;2ï¼Œé‚£ä¹ˆå¯èƒ½åœ¨å“åº”å®¢æˆ·ç«¯æˆåŠŸæ—¶å¹¶æ²¡æœ‰flush redolog å’Œ binlogï¼Œç„¶åç«‹åˆ»crashäº†ï¼Œè¿™ä¸å°±å®Œæˆæ•°æ®ä¸¢å¤±äº†ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":235455,"user_name":"jack","can_delete":false,"product_type":"c1","uid":1783638,"ip_address":"","ucode":"37CE8FC549732B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/37/56/7f98bf2c.jpg","comment_is_top":false,"comment_ctime":1595043426,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595043426","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘ç°åœ¨ä½¿ç”¨mysql5,7.31ç‰ˆæœ¬æ­å»ºä¸»ä»å¤åˆ¶ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­bin-log æ ¼å¼æ˜¯ä½¿ç”¨mixedè¿˜æ˜¯rowçš„ã€‚","like_count":0},{"had_liked":false,"id":231036,"user_name":"`","can_delete":false,"product_type":"c1","uid":1556919,"ip_address":"","ucode":"BBE7BE85F22CEE","user_header":"https://static001.geekbang.org/account/avatar/00/17/c1/b7/e638e5a7.jpg","comment_is_top":false,"comment_ctime":1593570306,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593570306","product_id":100020801,"comment_content":"æ‰€ä»¥ä¸€ä¸ªlogçš„å†™å…¥åˆ†ä¸‰æ­¥ï¼Œå†™å…¥buffer&#47;cache -&gt; å†™å…¥æ–‡ä»¶ç³»ç»Ÿpagecache -&gt;å†™å…¥ç£ç›˜ã€‚æˆ‘çš„ä¸€ä¸ªé—®é¢˜æ˜¯ä¸ºä»€ä¹ˆè¦ç¬¬äºŒæ­¥å‘¢ï¼Œä¸å¯ä»¥ä»log buffer&#47;cacheç›´æ¥å†™å…¥ç£ç›˜å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":226972,"user_name":"shiziwen","can_delete":false,"product_type":"c1","uid":1016917,"ip_address":"","ucode":"ADADC770D82D66","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","comment_is_top":false,"comment_ctime":1592238273,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1592238273","product_id":100020801,"comment_content":"Walæœºåˆ¶ä½¿å¾— redo log å’Œbin logéƒ½é¡ºåºå†™ï¼Œè¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":226968,"user_name":"shiziwen","can_delete":false,"product_type":"c1","uid":1016917,"ip_address":"","ucode":"ADADC770D82D66","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg","comment_is_top":false,"comment_ctime":1592237006,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1592237006","product_id":100020801,"comment_content":"è€å¸ˆåœ¨å›ç­”åŒå­¦çš„é—®é¢˜æ—¶æåˆ°â€œæ‰€è°“çš„ redo log prepareï¼Œæ˜¯â€œå½“å‰äº‹åŠ¡æäº¤â€çš„ä¸€ä¸ªé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨äº‹åŠ¡Aæäº¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰ä¼šèµ°åˆ°äº‹åŠ¡Açš„redo log prepareè¿™ä¸ªé˜¶æ®µã€‚â€<br>æ˜¯ä¸æ˜¯æ„å‘³ç€ï¼Œä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨commitçš„æ—¶å€™ï¼Œæ‰ä¼šå†™redo logï¼Ÿ<br><br>åœ¨ç¬¬äºŒç« ä»‹ç»â€œupdate è¯­å¥æäº¤è¿‡ç¨‹â€æ—¶æåˆ°â€œå¼•æ“å°†è¿™è¡Œæ–°æ•°æ®æ›´æ–°åˆ°å†…å­˜ä¸­ï¼ŒåŒæ—¶å°†è¿™ä¸ªæ›´æ–°æ“ä½œè®°å½•åˆ° redo log é‡Œé¢ï¼Œæ­¤æ—¶ redo log å¤„äº prepare çŠ¶æ€ã€‚ç„¶åå‘ŠçŸ¥æ‰§è¡Œå™¨æ‰§è¡Œå®Œæˆäº†ï¼Œéšæ—¶å¯ä»¥æäº¤äº‹åŠ¡ã€‚â€ï¼Œä»è¿™æ®µè¯ä¸­ï¼Œæ— æ³•åˆ¤æ–­redo logå†™å…¥çš„æ—¶æœºã€‚","like_count":0,"discussions":[{"author":{"id":1299041,"avatar":"https://static001.geekbang.org/account/avatar/00/13/d2/61/c77f63df.jpg","nickname":"zhangchuan","note":"","ucode":"8EF11A6A6DF5CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368323,"discussion_content":"å¯¹äºé—®é¢˜1çš„è§£ç­”æ˜¯äº‹åŠ¡åœ¨æ‰§è¡Œæ—¶ä¼šå†™redo log bufferï¼Œè€Œåœ¨æäº¤æ—¶ä¼šå°†redo log bufferä¸­çš„æ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„page cacheä¸­ç„¶åè°ƒç”¨fsyncåˆ·åˆ°ç£ç›˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618654212,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":224438,"user_name":"Geek_f40120","can_delete":false,"product_type":"c1","uid":2028635,"ip_address":"","ucode":"7EF9C529B7AE9A","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKawxntLfibLJJmbicIiczetxQBOsn8uNTbNBANje21Chiay38FiaA43CuY7sxLQp12ghDvWXghNTXrGNQ/132","comment_is_top":false,"comment_ctime":1591400059,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1591400059","product_id":100020801,"comment_content":"è€å¸ˆï¼Œçœ‹äº†è¿™ç« åï¼Œæˆ‘æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š<br>1ï¼šäº‹åŠ¡æœªæäº¤ï¼Œmysqlé­é‡æ–­ç”µé‡å¯ï¼Œä½†æ˜¯redo-logå·²ç»è¢«æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆå¤„ç†ï¼Ÿ<br>2ï¼šæ–‡ä»¶ç³»ç»Ÿçš„page cacheæ˜¯åªåœ¨å†…å­˜ä¸­æœ‰ï¼Œè¿˜æ˜¯åœ¨ç£ç›˜ä¸Šä¹Ÿä¼šæœ‰ï¼Ÿ<br>3ï¼šå¦‚æœæŠŠ innodb_flush_log_at_trx_commit è®¾ç½®æˆ 1ï¼Œé‚£ä¹ˆ redo log åœ¨ prepare é˜¶æ®µå°±è¦æŒä¹…åŒ–ä¸€æ¬¡ï¼Œè¿™ä¸ªæŒä¹…åŒ–æ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜å—ï¼Ÿ<br>4ï¼šæ ¹æ®å›¾5ï¼Œå¯ä»¥çœ‹å‡ºredo-logæ˜¯åœ¨prepareé˜¶æ®µæŒä¹…åŒ–æ—¥å¿—åˆ°ç£ç›˜çš„ï¼Œåœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œredo-logæ—¥å¿—å†™åˆ°pagecaheä¸­çš„ï¼Œè¿™æ ·ç†è§£å¯¹å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":220715,"user_name":"ad","can_delete":false,"product_type":"c1","uid":1060556,"ip_address":"","ucode":"7AC650031EB7A9","user_header":"https://static001.geekbang.org/account/avatar/00/10/2e/cc/964a8bcb.jpg","comment_is_top":false,"comment_ctime":1590311672,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590311672","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæ–‡ä¸­æåˆ°â€œç„¶åå°±æœ‰åŒå­¦é—®äº†ï¼Œredo log buffer é‡Œé¢çš„å†…å®¹ï¼Œæ˜¯ä¸æ˜¯æ¯æ¬¡ç”Ÿæˆåéƒ½è¦ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œä¸éœ€è¦ã€‚å¦‚æœäº‹åŠ¡æ‰§è¡ŒæœŸé—´ MySQL å‘ç”Ÿå¼‚å¸¸é‡å¯ï¼Œé‚£è¿™éƒ¨åˆ†æ—¥å¿—å°±ä¸¢äº†ã€‚ç”±äºäº‹åŠ¡å¹¶æ²¡æœ‰æäº¤ï¼Œæ‰€ä»¥è¿™æ—¶æ—¥å¿—ä¸¢äº†ä¹Ÿä¸ä¼šæœ‰æŸå¤±ã€‚â€œï¼Œä¼šä¸ä¼šå‡ºç°äº‹åŠ¡æ‰§è¡ŒæœŸé—´mysql å‘ç”Ÿå¼‚å¸¸é‡å¯ï¼Œredo log bufferæ—¥å¿—ä¸¢å¤±ï¼Œä½†æ˜¯binlogæ—¥å¿—å­˜åœ¨ï¼Ÿå¦‚æœå‡ºç°è¿™ç§æƒ…å†µmysqlåç»­çš„é€»è¾‘æ˜¯æ€æ ·çš„ï¼Ÿ","like_count":0},{"had_liked":false,"id":220436,"user_name":"æ³¨æ„åŠ›$","can_delete":false,"product_type":"c1","uid":1142316,"ip_address":"","ucode":"7FB3399A1EAB72","user_header":"https://static001.geekbang.org/account/avatar/00/11/6e/2c/e2f3cfc0.jpg","comment_is_top":false,"comment_ctime":1590241665,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1590241665","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¯·é—® äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆçš„ redo log æ˜¯è¦å…ˆå†™åˆ° redo log buffer çš„ã€‚  redo log buffer æ˜¯ä¸€å—å†…å­˜ï¼Œé‚£åº”è¯¥æ˜¯å…ˆå†™æ—¥å¿—å‘¢è¿˜æ˜¯å…ˆå†™å†…å­˜å‘¢ï¼Ÿå†…å­˜ä¸æ˜¯å®¹æ˜“ä¸¢å¤±å—","like_count":0},{"had_liked":false,"id":214950,"user_name":"â€¦","can_delete":false,"product_type":"c1","uid":1297845,"ip_address":"","ucode":"207C7F95192129","user_header":"https://static001.geekbang.org/account/avatar/00/13/cd/b5/2e60f2b0.jpg","comment_is_top":false,"comment_ctime":1588855656,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1588855656","product_id":100020801,"comment_content":"è€å¸ˆè¯´çš„ç»„æäº¤æ˜¯ ä»redo log bufferæ‰¹é‡writeå‘¢ï¼Œè¿˜æ˜¯ä»page cacheæ‰¹é‡fsyncå‘¢ï¼Ÿ<br>å›¾3çœ‹èµ·æ¥æ˜¯æ‰¹é‡ä»redolog bufferæ‰¹é‡writeï¼Œä½†æ˜¯å›¾5é¡ºåºçš„ä¼˜åŒ–åªæ˜¯å°†fsync æ‹¿åˆ°åé¢äº†ï¼Œå¹¶ä¸ä¼šç­‰åˆ°æ›´å¤šredolog bufferé‡Œé¢çš„å†…å®¹è¿›è¡Œæ‰¹é‡write å‘€","like_count":0,"discussions":[{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331380,"discussion_content":"ä¸ªäººç†è§£æ˜¯å°½å¯èƒ½å¤šçš„å»¶åfsyncçš„è°ƒç”¨ï¼Œwriteä¹Ÿæ˜¯ä¸€ä¸ªä¸€ä¸ªæ¥çš„ï¼Œå†™åˆ°pagecacheä¸­ï¼Œæ”’å¤šäº†ä»¥åï¼Œå†è°ƒç”¨ä¸€æ¬¡fsyncå°±è¡Œäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606838383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211346,"user_name":"æ·±æµ·æå…‰","can_delete":false,"product_type":"c1","uid":1096111,"ip_address":"","ucode":"331024F7E99C64","user_header":"https://static001.geekbang.org/account/avatar/00/10/b9/af/f59b4c7c.jpg","comment_is_top":false,"comment_ctime":1587950736,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587950736","product_id":100020801,"comment_content":"è€å¸ˆæœ€è¿‘åå¤çœ‹äº†redologéƒ¨åˆ†è¢«æŒä¹…åŒ–ä½†æ˜¯äº‹ç‰©æ²¡æœ‰æäº¤æˆåŠŸçš„åœºæ™¯çš„é—®é¢˜ï¼Œå¼€å¯binlogçš„æƒ…å†µä¸‹ï¼Œåœ¨å´©æºƒæ¢å¤æ—¶æ‰«æåˆ°è¿™éƒ¨åˆ†redologæ—¶æ˜¯æ ¹æ®å¯¹åº”çš„xidå…¥binlogé‡Œæ‰¾ï¼Œå¦‚æœæ²¡æœ‰commitåˆ™é€šè¿‡undologå›æ»šæ‰ï¼Œè¿™ä¹Ÿæ˜¯åˆ¤æ–­æ‰€æœ‰redologæ˜¯å¦commitçš„èƒŒåé€»è¾‘å§ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªåœºæ™¯æ˜¯å¦‚æœæ²¡æœ‰å¼€å§‹binlogçš„æƒ…å†µä¸‹å°±æ²¡åœ°æ–¹æ¥æ£€æŸ¥æ˜¯å¦æäº¤ï¼Œé‚£åˆæ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Œè¿˜æœ‰å°±æ˜¯æˆ‘ç†è§£çš„redologåœ¨åœ¨æ–‡ä»¶é‡Œæ²¡æœ‰çŠ¶æ€å§ï¼Œæ— è®ºæ˜¯å®šæ—¶åˆ·æ–°ï¼Œè¿˜æ˜¯prepareåˆ·æ–°çš„ï¼Œè€Œè¿™äº›çŠ¶æ€éƒ½æ˜¯binlogé‡Œçš„å¸Œæœ›è€å¸ˆè§£ç­”ï¼Œè°¢è°¢ğŸ™","like_count":0},{"had_liked":false,"id":205803,"user_name":"å†¬é£å‘å·¦å¹","can_delete":false,"product_type":"c1","uid":1066928,"ip_address":"","ucode":"376C45C5134F93","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/b0/a9b77a1e.jpg","comment_is_top":false,"comment_ctime":1586741978,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586741978","product_id":100020801,"comment_content":"åº”è¯¥æ˜¯è¿™æ ·ï¼šåªè¦binlogå†™æˆåŠŸäº†ï¼Œæ— è®ºredoæœ‰æ²¡æœ‰commitï¼Œå…¶å®æ•´ä¸ªäº‹åŠ¡éƒ½å·²ç»æ˜¯æˆåŠŸçš„äº†ï¼Œå› ä¸ºå¯ä»¥æ ¹æ®redo logå’Œbin logä¸­çš„xidç¡®è®¤äº‹åŠ¡çš„æœ€ç»ˆçŠ¶æ€ã€‚","like_count":0},{"had_liked":false,"id":205800,"user_name":"å†¬é£å‘å·¦å¹","can_delete":false,"product_type":"c1","uid":1066928,"ip_address":"","ucode":"376C45C5134F93","user_header":"https://static001.geekbang.org/account/avatar/00/10/47/b0/a9b77a1e.jpg","comment_is_top":false,"comment_ctime":1586741821,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586741821","product_id":100020801,"comment_content":"æ€»æ„Ÿè§‰ä¸¤é˜¶æ®µæäº¤æ²¡æœ‰ä»‹ç»å®Œæ•´ã€‚<br>1ã€prepareé˜¶æ®µï¼Œå†™äº†redo logï¼Œå°šæœªè½ç›˜ï¼›<br>2ã€å†™binlogæ—¥å¿—ï¼›<br>3ã€æ‰§è¡Œredo logçš„commitã€‚<br>é—®é¢˜æ˜¯ï¼šç¬¬2æ­¥çš„å†™çš„binlogæ—¥å¿—æ˜¯ä¸ªä»€ä¹ˆçŠ¶æ€ï¼Œæ­¤æ—¶èƒ½åŒæ­¥åˆ°slaveèŠ‚ç‚¹å—ã€‚æˆ‘ç†è§£ï¼Œå› ä¸ºæ²¡æœ‰æ‰§è¡Œç¬¬3æ­¥ï¼Œæ‰€ä»¥æ˜¯ä¸èƒ½åŒæ­¥åˆ°slaveçš„ã€‚å¦‚æœè¿™æ ·ï¼Œæ‰§è¡Œç¬¬3æ­¥åï¼Œé‚£å²‚ä¸æ˜¯è¿˜éœ€è¦è®°ä¸€æ¬¡binlogçš„commitæ—¥å¿—ï¼Œå¦‚æœæ­¤æ—¶æœåŠ¡å™¨æŒ‚äº†å‘¢ï¼Œè¿™ä¸ªbinlogçš„commitæ²¡è®°æˆåŠŸå‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":202780,"user_name":"æµ®ç”Ÿé†‰","can_delete":false,"product_type":"c1","uid":1783354,"ip_address":"","ucode":"7549E41BD65511","user_header":"https://static001.geekbang.org/account/avatar/00/1b/36/3a/335db90a.jpg","comment_is_top":false,"comment_ctime":1586068011,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586068011","product_id":100020801,"comment_content":"è€å¸ˆè¯´binlogæ˜¯ä¸èƒ½è¢«æ‰“æ–­çš„<br>é‚£ä¹ˆä¸ºä»€ä¹ˆbinlogæ˜¯ä¸èƒ½è¢«æ‰“æ–­çš„ï¼Ÿ<br>æˆ‘çš„ç†è§£:å› ä¸ºbinlogæ˜¯é€»è¾‘æ—¥å¿—ï¼Œå¦‚æœä¸€ä¸ªäº‹åŠ¡è¢«æ‰“æ–­äº†ï¼Œé‚£ä¹ˆåœ¨ä»åº“æ‰§è¡Œçš„æ—¶å€™ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜<br><br>é‚£ä¹ˆå¦‚æœä¸¤ä¸ªäº‹åŠ¡çš„æ‰§è¡Œé¡ºåºæ¢äº†å‘¢?<br>æˆ‘çš„ç†è§£:<br>åœ¨RRçš„éš”ç¦»æœºåˆ¶ä¸‹ï¼Œå¦‚æœä¸¤ä¸ªäº‹åŠ¡åŒæ—¶å¯¹ä¸€ä¸ªè¡¨çš„è¡Œè®°å½•è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆåç”³è¯·é”çš„SQL(äº‹åŠ¡Bï¼‰ä¼šç­‰å¾…ï¼Œç­‰å¦ä¸€ä¸ªäº‹åŠ¡(äº‹åŠ¡A)å…ˆæ‰§è¡Œå®Œæˆé‡Šæ”¾é”ç„¶åæ‰ä¼šç»§ç»­æ‰§è¡Œã€‚åœ¨binlogé‡Œäº‹åŠ¡Aä¼šåœ¨å‰é¢,ä¸ä¼šå‡ºç°é¡ºåºä¸æ­£ç¡®çš„æƒ…å½¢<br><br>é‚£ä¹ˆåœ¨RCçš„éš”ç¦»çº§åˆ«ä¸‹:<br>æœ‰æ²¡æœ‰å¯èƒ½å‡ºç°ä¸Šè¿°Bin logé¡ºåºä¸å¯¹çš„é—®é¢˜","like_count":0},{"had_liked":false,"id":187555,"user_name":"ipofss","can_delete":false,"product_type":"c1","uid":1018620,"ip_address":"","ucode":"DE3061C9259F9E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/fc/d1dd57dd.jpg","comment_is_top":false,"comment_ctime":1584157604,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584157604","product_id":100020801,"comment_content":"å°ç»“ä¸­çš„é—®é¢˜4ï¼Œæˆ‘è§‰å¾—æœ‰ç‚¹ä½“ä¼šã€‚ä¹‹å‰åœ¨ä¸ä¸€ä¸ªåŒäº‹å¯¹æ¥ï¼Œæˆ‘ç”¨çš„Javaï¼Œä»–ç”¨çš„.netï¼Œä»–è°ƒç”¨æˆ‘çš„æ¥å£ï¼Œç„¶åè¯´æ”¶ä¸åˆ°æˆåŠŸçš„ç»“æœï¼Œå°±è®¤ä¸ºæ˜¯å¤±è´¥ã€‚æˆ‘è§‰å¾—ä»–æ”¶åˆ°æˆåŠŸï¼Œå°±ä¸€å®šæ˜¯æˆåŠŸï¼›æ”¶åˆ°å¤±è´¥å°±ä¸€å®šæ˜¯å¤±è´¥ï¼›å¦‚æœæ”¶ä¸åˆ°ç»“æœï¼Œæˆ–è€…å¼‚å¸¸ï¼Œå°±æœ‰å¯èƒ½æ˜¯ç½‘ç»œçš„é—®é¢˜ï¼Œéœ€è¦é‡æ–°æŸ¥ä¸€æ¬¡ï¼Œçœ‹çœ‹æ˜¯å¦éœ€è¦å†è°ƒç”¨ä¸€æ¬¡ã€‚è€Œä¸”æˆ‘çš„æ¥å£è¦ä¿è¯å¹‚ç­‰æ€§ã€‚åŒç†äºé—®é¢˜4ï¼Œå¯¹äºå¤–ç•Œè°ƒç”¨çš„æ•°æ®åº“æœåŠ¡ï¼Œåªè¦æ•°æ®åº“å†…éƒ¨ï¼Œå’Œä¸»å¤‡æ•°æ®åº“ä¹‹é—´èƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦å…³æ³¨ä¸šåŠ¡å±‚çš„è°ƒç”¨ï¼Œä¸šåŠ¡å±‚å†æ¥æŸ¥ä¸€æ¬¡çœ‹çœ‹æ˜¯å¦æˆåŠŸå°±è¡Œäº†ã€‚","like_count":0},{"had_liked":false,"id":179561,"user_name":"æ–æ³¢é‚£å¥‘","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1582031841,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582031841","product_id":100020801,"comment_content":"è€å¸ˆ é—®ä¸ªé—®é¢˜ æˆ‘çš„ç†è§£æ˜¯ åœ¨redo logæˆ–è€…bin logå†™å…¥page cacheæ—¶ å°±è¿›å…¥äº†æ“ä½œç³»ç»Ÿå±‚é¢ é‚£fsyncåº”è¯¥æœ‰æ“ä½œç³»ç»Ÿå†³å®š é‚£è¿™ä¸ªè·Ÿmysqlä»€ä¹ˆå…³ç³»å‘¢?","like_count":0},{"had_liked":false,"id":178532,"user_name":"å‡Œäº‘","can_delete":false,"product_type":"c1","uid":1028756,"ip_address":"","ucode":"A092ACE7FA40DF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/94/6111101d.jpg","comment_is_top":false,"comment_ctime":1581735990,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581735990","product_id":100020801,"comment_content":"é€šå¸¸æˆ‘ä»¬è¯´ MySQL çš„â€œåŒ 1â€é…ç½®ï¼ŒæŒ‡çš„å°±æ˜¯ sync_binlog å’Œ innodb_flush_log_at_trx_commit éƒ½è®¾ç½®æˆ 1ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªäº‹åŠ¡å®Œæ•´æäº¤å‰ï¼Œéœ€è¦ç­‰å¾…ä¸¤æ¬¡åˆ·ç›˜ï¼Œä¸€æ¬¡æ˜¯ redo logï¼ˆprepare é˜¶æ®µï¼‰ï¼Œä¸€æ¬¡æ˜¯ binlogã€‚<br>-----redo log å’Œ binlog åˆ·ç›˜çš„æ—¶åˆ»ç‚¹åº”è¯¥éƒ½æ˜¯åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œå› æ­¤&quot;redo logï¼ˆprepare é˜¶æ®µï¼‰&quot; æ˜¯å¦åº”è¯¥ä¿®æ”¹ä¸º redo log commité˜¶æ®µã€‚","like_count":0},{"had_liked":false,"id":174417,"user_name":"RedDevil","can_delete":false,"product_type":"c1","uid":1131128,"ip_address":"","ucode":"F8F5DC209BB3B9","user_header":"https://static001.geekbang.org/account/avatar/00/11/42/78/7ba89c75.jpg","comment_is_top":false,"comment_ctime":1580201050,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580201050","product_id":100020801,"comment_content":"è€å¸ˆå…³äºredo logå†™ç›˜ç­–ç•¥æˆ‘æœ‰ä¸ªç–‘é—®<br>åœ¨æ–‡ä¸­ï¼Œæ‚¨æåˆ°äº† innodb_flush_log_at_trx_commit å‚æ•°ï¼Œå®ƒæœ‰ä¸‰ç§å¯èƒ½å–å€¼è®¾ç½®ä¸º 1 çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½å°† redo log ç›´æ¥fsyncåˆ°ç£ç›˜ï¼›<br>ä½†æ˜¯åœ¨åç»­å†…å®¹ï¼Œæ‚¨åˆæŒ‡å‡º innodb_flush_log_at_trx_commit è®¾ç½®ä¸º1æ—¶ï¼Œåœ¨redo log prepareé˜¶æ®µå°±ä¼šfsyncåˆ°ç£ç›˜ï¼›<br>è¿™é‡Œæˆ‘ä¸å¤ªæ˜ç™½ï¼Œinnodb_flush_log_at_trx_commit å‚æ•°å½±å“çš„æ˜¯redolog prepareé˜¶æ®µè¿˜æ˜¯commité˜¶æ®µï¼Ÿ","like_count":0},{"had_liked":false,"id":172353,"user_name":"æ¿æ —é¥¼","can_delete":false,"product_type":"c1","uid":1405020,"ip_address":"","ucode":"2DA25B053D7721","user_header":"https://static001.geekbang.org/account/avatar/00/15/70/5c/ebb274eb.jpg","comment_is_top":false,"comment_ctime":1579159533,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579159533","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæ–‡ä¸­æœ‰ä¸ªåœ°æ–¹ä¸€ç›´ç†è§£ä¸äº†ï¼šå›¾äº”ä¸‹é¢è¯´:<br>ä¸è¿‡é€šå¸¸æƒ…å†µä¸‹ç¬¬ 3 æ­¥æ‰§è¡Œå¾—ä¼šå¾ˆå¿«ï¼Œæ‰€ä»¥ binlog çš„ write å’Œ fsync é—´çš„é—´éš”æ—¶é—´çŸ­ï¼Œå¯¼è‡´èƒ½é›†åˆåˆ°ä¸€èµ·æŒä¹…åŒ–çš„ binlog æ¯”è¾ƒå°‘ï¼Œå› æ­¤ binlog çš„ç»„æäº¤çš„æ•ˆæœé€šå¸¸ä¸å¦‚ redo log çš„æ•ˆæœé‚£ä¹ˆå¥½ã€‚<br><br>æŒ‰ç…§å›¾5ï¼Œæ­¥éª¤3æ˜¯redo logè½ç›˜ï¼Œæ­¥éª¤2æ˜¯bin log writeåˆ°paper cache,æŒ‰ç…§è¿™è¾¹çš„é€»è¾‘ï¼Œåº”è¯¥æ˜¯æ­¥éª¤3è½ç›˜æ‰§è¡Œçš„æ¯”è¾ƒæ…¢ï¼Œbin logçš„writeå’Œfsyncä¹‹é—´æ—¶é—´æ›´é•¿ä¸€ç‚¹ï¼Œç»„æäº¤æ•ˆæœæ›´å¥½å§ï¼Œè¿˜æ˜¯æœ‰å…¶ä»–å½±å“å› ç´ å‘¢ã€‚","like_count":0},{"had_liked":false,"id":171941,"user_name":"æœ€åˆçš„å°è±¡","can_delete":false,"product_type":"c1","uid":1228852,"ip_address":"","ucode":"4DD68307FA274E","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/34/0574bb44.jpg","comment_is_top":false,"comment_ctime":1579056150,"is_pvip":false,"replies":[{"id":"66715","content":"page cacheæ˜¯æ“ä½œç³»ç»Ÿç”¨æ¥ç¼“å­˜è¯»å†™æ–‡ä»¶çš„æœºåˆ¶ã€‚<br>å¯ä»¥æœä¸€ä¸‹ â€œæ–‡ä»¶ç³»ç»Ÿ page cacheâ€","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1579088612,"ip_address":"","comment_id":171941,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1579056150","product_id":100020801,"comment_content":"å¯ä»¥ç¨å¾®ä»‹ç»ä¸€ä¸‹page cacheå—ï¼Œæ„Ÿè§‰å¯¹è¿™ä¸ªä¸œè¥¿ä¸æ˜¯å¾ˆæ¸…æ¥šã€‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481555,"discussion_content":"page cacheæ˜¯æ“ä½œç³»ç»Ÿç”¨æ¥ç¼“å­˜è¯»å†™æ–‡ä»¶çš„æœºåˆ¶ã€‚\nå¯ä»¥æœä¸€ä¸‹ â€œæ–‡ä»¶ç³»ç»Ÿ page cacheâ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579088612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":171938,"user_name":"æœ€åˆçš„å°è±¡","can_delete":false,"product_type":"c1","uid":1228852,"ip_address":"","ucode":"4DD68307FA274E","user_header":"https://static001.geekbang.org/account/avatar/00/12/c0/34/0574bb44.jpg","comment_is_top":false,"comment_ctime":1579055662,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579055662","product_id":100020801,"comment_content":"å¦‚ redo log å†™åˆ° page cacheï¼Œä½†è¿˜æ²¡æœ‰è¿›è¡Œfsyncæ­¤æ—¶æ•°æ®åº“å¼‚å¸¸å…³é—­ï¼Œé‡å¯åæ•°æ®ä¼šä¸ä¼šä¸¢å¤±ï¼Ÿ","like_count":0},{"had_liked":false,"id":170303,"user_name":"æ„ç¦è¡Œ","can_delete":false,"product_type":"c1","uid":1310737,"ip_address":"","ucode":"07E7D1031DAC01","user_header":"https://static001.geekbang.org/account/avatar/00/14/00/11/fd201938.jpg","comment_is_top":false,"comment_ctime":1578564018,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578564018","product_id":100020801,"comment_content":"å°† innodb_flush_log_at_trx_commit è®¾ç½®ä¸º 2ã€‚è¿™æ ·åšçš„é£é™©æ˜¯ï¼Œä¸»æœºæ‰ç”µçš„æ—¶å€™ä¼šä¸¢æ•°æ®ã€‚<br>=======<br>è¯·æ•™ä¸‹è€å¸ˆï¼Œå¦‚æœæœåŠ¡å™¨å®‰è£…äº†raidç”µå®¹å¡ï¼Œæ˜¯å¦å¯ä»¥è§„é¿è®¾ç½®ä¸º2ä¸»æœºæ‰ç”µä¸¢å¤±æ•°æ®çš„é£é™©ï¼Ÿ","like_count":0},{"had_liked":false,"id":169883,"user_name":"88591","can_delete":false,"product_type":"c1","uid":1254656,"ip_address":"","ucode":"04CE3E46455185","user_header":"https://static001.geekbang.org/account/avatar/00/13/25/00/3afbab43.jpg","comment_is_top":false,"comment_ctime":1578468037,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578468037","product_id":100020801,"comment_content":"è¿™å°±æ˜¯ç†è®ºä¸å®è·µçš„å·®å¼‚ã€‚ç†è®ºä¸Šé¢è¦æ±‚ æ•°æ®æ˜¯æŒä¹…åŒ–çš„ã€‚ä½†æ˜¯å®ç°è¿‡ç¨‹ä¸­ï¼Œè¿˜çš„æƒè¡¡æ€§èƒ½ã€‚å¦‚æœæƒ³æŒä¹…åŒ– ä¸€å®šæˆåŠŸï¼Œé‚£ä¹ˆå°±çš„ç‰ºç‰²æ€§èƒ½ã€‚ä¸åŒä¸šåŠ¡åœºæ™¯ä½¿ç”¨æ–¹å¼ä¸ä¸€æ ·ã€‚","like_count":0},{"had_liked":false,"id":167660,"user_name":"Danpier","can_delete":false,"product_type":"c1","uid":1463474,"ip_address":"","ucode":"11E208FDE34961","user_header":"https://static001.geekbang.org/account/avatar/00/16/54/b2/5ea0b709.jpg","comment_is_top":false,"comment_ctime":1577888378,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577888378","product_id":100020801,"comment_content":"â€œä½†æ˜¯ï¼Œå°† sync_binlog è®¾ç½®ä¸º Nï¼Œå¯¹åº”çš„é£é™©æ˜¯ï¼šå¦‚æœä¸»æœºå‘ç”Ÿå¼‚å¸¸é‡å¯ï¼Œä¼šä¸¢å¤±æœ€è¿‘ N ä¸ªäº‹åŠ¡çš„ binlog æ—¥å¿—ã€‚â€<br>è¿™ä¸ªè¡¨è¿°æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Ÿä¸»æœºå¼‚å¸¸é‡å¯æ—¶ï¼Œbinlog cache æœ€å¤šæœ‰ N-1 ä¸ªäº‹åŠ¡ binlog æ—¥å¿—ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯ä¸¢å¤±çš„äº‹åŠ¡ binlog æ—¥å¿—ä¸è¶…è¿‡ N-1 å§ï¼Ÿ<br>","like_count":0},{"had_liked":false,"id":167316,"user_name":"é˜¿æœ","can_delete":false,"product_type":"c1","uid":1066705,"ip_address":"","ucode":"349D3572F5ABE7","user_header":"https://static001.geekbang.org/account/avatar/00/10/46/d1/a1ddf49f.jpg","comment_is_top":false,"comment_ctime":1577762352,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577762352","product_id":100020801,"comment_content":"redo log,binlog éƒ½æ˜¯å…ˆå†™å…¥page cacheï¼Œç„¶åæ‰¹é‡å†™å…¥ç£ç›˜","like_count":0},{"had_liked":false,"id":167145,"user_name":"æç³","can_delete":false,"product_type":"c1","uid":1212029,"ip_address":"","ucode":"7407B4D49D793B","user_header":"https://static001.geekbang.org/account/avatar/00/12/7e/7d/f54bfa0b.jpg","comment_is_top":false,"comment_ctime":1577698325,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577698325","product_id":100020801,"comment_content":"innodb_flush_log_at_trx_commit  = 1çš„æ—¶å€™ï¼Œæäº¤äº‹åŠ¡å°±å†™ç›˜ï¼Œè¿˜æ˜¯é¡ºåºå†™å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":159734,"user_name":"é•¿æœŸè§„åˆ’","can_delete":false,"product_type":"c1","uid":1019332,"ip_address":"","ucode":"5EF65E9115834B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8d/c4/6f97daea.jpg","comment_is_top":false,"comment_ctime":1575768496,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1575768496","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªä¸¤ä¸ªé—®é¢˜è¯·æ•™ä¸€ä¸‹ï¼Œ<br>é—®é¢˜1ï¼šMySQLå†…å­˜ä¸­çš„æ•°æ®é¡µä¼šå®šæœŸåˆ·åˆ°ç£ç›˜ï¼Œä½†å¦‚æœMySQLå®•æœºæ—¶ï¼Œå¯èƒ½æœ‰æœªåˆ·å…¥ç£ç›˜çš„æ•°æ®é¡µã€‚å½“é‡å¯åï¼Œç£ç›˜è¯»åˆ°çš„å°±æ˜¯æ—§æ•°æ®é¡µï¼Œç„¶åä¼šå¯¹è¿™äº›æ•°æ®é¡µé‡æ”¾redo logï¼Œä½†åªé‡æ”¾æ²¡æœ‰åˆ·ç›˜çš„é‚£éƒ¨åˆ†ï¼Œå¯¹å—ï¼Ÿ<br>é—®é¢˜2ï¼šredo logä¸å†…å­˜æ•°æ®é¡µçš„æ•°æ®å§‹ç»ˆæ˜¯ä¸€è‡´çš„ï¼Œå¯¹å—<br>","like_count":0},{"had_liked":false,"id":156425,"user_name":"jian","can_delete":false,"product_type":"c1","uid":1185102,"ip_address":"","ucode":"21CDBBB8000F0C","user_header":"https://static001.geekbang.org/account/avatar/00/12/15/4e/4636a81d.jpg","comment_is_top":false,"comment_ctime":1574869717,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574869717","product_id":100020801,"comment_content":"â€œé—®é¢˜ 2ï¼šä¸ºä»€ä¹ˆ binlog cache æ˜¯æ¯ä¸ªçº¿ç¨‹è‡ªå·±ç»´æŠ¤çš„ï¼Œè€Œ redo log buffer æ˜¯å…¨å±€å…±ç”¨çš„ï¼Ÿå›ç­”ï¼šMySQL è¿™ä¹ˆè®¾è®¡çš„ä¸»è¦åŸå› æ˜¯ï¼Œbinlog æ˜¯ä¸èƒ½â€œè¢«æ‰“æ–­çš„â€ã€‚â€è¯·é—®è€å¸ˆï¼Œè¿™é‡Œè¯´binlogä¸èƒ½æ‰“æ–­ï¼Œæ˜¯ä¸æ˜¯ä¸ºäº†ä»åº“æ‰§è¡Œbinlogçš„é¡ºåºéœ€è¦å’Œä¸»åº“çš„ä¿æŒä¸€è‡´ï¼Ÿ","like_count":0},{"had_liked":false,"id":150807,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1015754,"ip_address":"","ucode":"00DF2FEC58D2E6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7f/ca/ea85bfdd.jpg","comment_is_top":false,"comment_ctime":1573612497,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1573612497","product_id":100020801,"comment_content":"ä½äºç³»ç»Ÿçš„ page cacheä¸­çš„æ•°æ®ï¼Œå½“ç³»ç»Ÿé‡å¯åæ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1111037,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f3/fd/ca3a1b4a.jpg","nickname":"nofrish","note":"","ucode":"8A5A47FE242891","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300364,"discussion_content":"page cacheæ˜¯å†…å­˜ï¼Œæ‰€ä»¥ç³»ç»Ÿé‡å¯åæ•°æ®ä¼šä¸¢å¤±çš„\næˆ‘æ„Ÿè§‰æœ€åé‚£ä¸ªåœ°æ–¹è®²çš„ä¹Ÿæœ‰ç‚¹å¥‡æ€ªï¼Œä»å¯é æ€§æ–¹é¢æ¥è¯´ï¼Œå†™å…¥page cacheå’Œå†™å…¥redo log bufferåº”è¯¥æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆå°±è¯´å†™å…¥page cacheå°±å¯ä»¥ä¿è¯æ•°æ®ä¸ä¸¢å¤±å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598065002,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":143192,"user_name":"æˆ‘ä¸åƒç”œé£Ÿ","can_delete":false,"product_type":"c1","uid":1086808,"ip_address":"","ucode":"1718E6D78F2852","user_header":"https://static001.geekbang.org/account/avatar/00/10/95/58/95e9507d.jpg","comment_is_top":false,"comment_ctime":1571644829,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571644829","product_id":100020801,"comment_content":"æ›´æ–°åçš„æ•°æ®æ˜¯ä¸æ˜¯åœ¨redo logçš„commité˜¶æ®µå†™å…¥ç£ç›˜ï¼Ÿ","like_count":0},{"had_liked":false,"id":132770,"user_name":"later","can_delete":false,"product_type":"c1","uid":1621789,"ip_address":"","ucode":"1F7844D991C26F","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/djAZwFHFWrjZgM22hCOKw8qweicSvWGjj0ExbM521pfMtufATMNzG4tdK89m6wUJZzxXtbXFkianIJdaMzW0qPDQ/132","comment_is_top":false,"comment_ctime":1568216416,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568216416","product_id":100020801,"comment_content":"è€å¸ˆæ˜¯ä¸æ˜¯åªè¦æ²¡æœ‰è¿›è¡Œfsyncæ“ä½œä¹‹å‰ï¼Œå¼‚å¸¸æ–­ç”µï¼Œæ˜¯ä¸æ˜¯éƒ½ä¼šé€ æˆæ•°æ®ä¸¢å¤±","like_count":0},{"had_liked":false,"id":131549,"user_name":"Geek_b74670","can_delete":false,"product_type":"c1","uid":1649282,"ip_address":"","ucode":"083AF837FB0112","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLGAV2NgUo0VVNjiagIJCZmPHvogtAJcUib6icLCbR4vcvfziashHZjpZ0FUxSdawFnHGUSmIaePvDaWQ/132","comment_is_top":false,"comment_ctime":1567790048,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1567790048","product_id":100020801,"comment_content":"å›¾5ä¸¤é˜¶æ®µæäº¤ç»†åŒ–æµç¨‹å›¾ä¸­ï¼Œæ­¥éª¤2ä¸­æ˜¯binlogæ—¥å¿—æ˜¯ç”±binlog cacheå†™å…¥äº†å›¾1ä¸­çš„bin log filesä¸ï¼Ÿæ­¥éª¤1æ˜¯redo logæ—¥å¿—ç”±redo log bufferå†™å…¥äº†fs page cacheä¸ï¼Ÿ","like_count":0},{"had_liked":false,"id":131540,"user_name":"Yann","can_delete":false,"product_type":"c1","uid":1005761,"ip_address":"","ucode":"A2778D84359D65","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/c1/ecf857d4.jpg","comment_is_top":false,"comment_ctime":1567787205,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567787205","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œå¦‚æœ sync_binlog=0 , innodb_flush_log_at_trx_commit = 2 , binlog_group_commit_sync_delay = 0, binlog_group_commit_sync_no_delay_count = 0,æƒ…å†µä¸‹åªæœ‰æ¯ç§’åå°æ¯ç§’è½®å¾ªä¸‹ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ï¼Œä½†ç”±äºè¿›ç¨‹è°ƒåº¦ç­–ç•¥å¹¶ä¸ä¼šæ¯æ¬¡éƒ½ä¼š100%çš„â€œæ¯ç§’â€ï¼Œ å¦‚æœåœ¨ä¸‹ä¸€ç§’åˆ·ç£ç›˜å‰æ­£å¸¸å…³é—­mysql,åœ¨å…³é—­å‰mysqlä¼šæ‰§è¡Œä¸€æ¬¡æŒä¹…åŒ–ç£ç›˜æ“ä½œå—","like_count":0},{"had_liked":false,"id":131535,"user_name":"Yann","can_delete":false,"product_type":"c1","uid":1005761,"ip_address":"","ucode":"A2778D84359D65","user_header":"https://static001.geekbang.org/account/avatar/00/0f/58/c1/ecf857d4.jpg","comment_is_top":false,"comment_ctime":1567785429,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567785429","product_id":100020801,"comment_content":"mysql severæ­£å¸¸stopå‰ä¼šå°†page cache æŒä¹…åŒ–åˆ°ç£ç›˜å—","like_count":0},{"had_liked":false,"id":130706,"user_name":"heyman","can_delete":false,"product_type":"c1","uid":1173894,"ip_address":"","ucode":"92EF9EF1B1B1B3","user_header":"https://static001.geekbang.org/account/avatar/00/11/e9/86/d34800a4.jpg","comment_is_top":false,"comment_ctime":1567514944,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567514944","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ã€‚çœ‹äº†ä½ çš„ä¸€ä¸ªå›å¤ï¼š<br><br>ã€Œè¯´æ˜ä¸€ä¸‹å“ˆï¼Œæ‰€è°“çš„ redo log prepareï¼Œæ˜¯â€œå½“å‰äº‹åŠ¡æäº¤â€çš„ä¸€ä¸ªé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨äº‹åŠ¡Aæäº¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰ä¼šèµ°åˆ°äº‹åŠ¡Açš„redo log prepareè¿™ä¸ªé˜¶æ®µã€‚<br><br>äº‹åŠ¡Aåœ¨æäº¤å‰ï¼Œæœ‰ä¸€éƒ¨åˆ†redo logè¢«äº‹åŠ¡Bæå‰æŒä¹…åŒ–ï¼Œä½†æ˜¯äº‹åŠ¡Aè¿˜æ²¡æœ‰è¿›å…¥æäº¤é˜¶æ®µï¼Œæ˜¯æ— æ‰€è°“â€œredo log prepareâ€çš„ã€‚ã€<br><br>ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œâ€œäº‹åŠ¡Aåœ¨æäº¤å‰ï¼Œæœ‰ä¸€éƒ¨åˆ†redo logè¢«äº‹åŠ¡Bæå‰æŒä¹…åŒ–ï¼Œä½†æ˜¯äº‹åŠ¡Aè¿˜æ²¡æœ‰è¿›å…¥æäº¤é˜¶æ®µï¼Œæ˜¯æ— æ‰€è°“â€œredo log prepareâ€çš„â€ï¼Œæ—¢ä¸æ˜¯prepare ï¼Œåˆä¸æ˜¯commitï¼Œé‚£æ˜¯å¦ä¸€ç§æ²¡æœ‰æåˆ°çš„çŠ¶æ€å—ï¼Ÿ<br><br>å‡å¦‚è¿™æ—¶äº‹åŠ¡Aå›æ»šäº†ï¼Œå®ƒè¿™äº›å·²ç»æŒä¹…åŒ–çš„redo logæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ<br><br>","like_count":0},{"had_liked":false,"id":127998,"user_name":"é©¬ä»¥","can_delete":false,"product_type":"c1","uid":1344431,"ip_address":"","ucode":"3FEA06CA14DE28","user_header":"https://static001.geekbang.org/account/avatar/00/14/83/af/1cb42cd3.jpg","comment_is_top":false,"comment_ctime":1566818795,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566818795","product_id":100020801,"comment_content":"binlog fileä¹Ÿæ˜¯ä¸€å—å†…å­˜å•å…ƒå—ï¼Ÿå¦‚æœæ˜¯ä¸ºä»€ä¹ˆè¦å¢åŠ è¿™ä¸€å—å†…å­˜å‘¢ï¼Ÿæ„Ÿè§‰è¿™æ ·å¾ˆæ¶ˆè€—å†…å­˜ï¼Œå¦‚æœä¸æ˜¯å†…å­˜ä¸ºä»€ä¹ˆä¸ç›´æ¥å†™ç£ç›˜å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":116262,"user_name":"æ„šäºº","can_delete":false,"product_type":"c1","uid":1355952,"ip_address":"","ucode":"40DE41849EF9EA","user_header":"https://static001.geekbang.org/account/avatar/00/14/b0/b0/30b29949.jpg","comment_is_top":false,"comment_ctime":1563809594,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1563809594","product_id":100020801,"comment_content":"ç»„æäº¤åœºæ™¯ä¸‹ï¼Œå¦‚æœäº‹åŠ¡rollbackè¯¥å¦‚ä½•å¤„ç†redo logï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165041,"discussion_content":"ä¹Ÿåº”è¯¥æ˜¯å›æ»šå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581250745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":108425,"user_name":"å¾®ç¬‘","can_delete":false,"product_type":"c1","uid":1363834,"ip_address":"","ucode":"6E8E2964D0191F","user_header":"https://static001.geekbang.org/account/avatar/00/14/cf/7a/51951b07.jpg","comment_is_top":false,"comment_ctime":1561770428,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1561770428","product_id":100020801,"comment_content":"è€å¸ˆå¥½  redo commité˜¶æ®µå°†redoæ›´æ–°ä¸ºcommitçŠ¶æ€æ˜¯ä»€ä¹ˆæ—¶å€™åˆ·ç›˜","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165043,"discussion_content":"çœ‹ç­–ç•¥ï¼Œæ–‡ä¸­æœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581250801,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":107326,"user_name":"è€æ±Ÿ","can_delete":false,"product_type":"c1","uid":1303409,"ip_address":"","ucode":"7033BBF9AF43A9","user_header":"https://static001.geekbang.org/account/avatar/00/13/e3/71/45eb3475.jpg","comment_is_top":false,"comment_ctime":1561514903,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561514903","product_id":100020801,"comment_content":"å…³äºIOé—®é¢˜ï¼Œè¿˜æœ‰ä¸€äº›æ–¹å¼å¯ä»¥è€ƒè™‘ï¼š<br>1ï¼‰åˆ†æè¯·æ±‚SQLï¼Œæ€§èƒ½æ˜¯å¦åˆç†ï¼Œæ˜¯å¦æœ‰å½±å“æ€§èƒ½<br>2ï¼‰ä¸šåŠ¡è¯·æ±‚æ˜¯å¦åˆç†ï¼Œæ˜¯å¦ç©ºè·‘ä¸€äº›å†—ä½™è¯·æ±‚<br>3ï¼‰å¥½çš„æœºå™¨","like_count":0},{"had_liked":false,"id":106404,"user_name":"ææ€ªè€…ğŸ˜˜ ğŸ˜’ ğŸ˜ ğŸ‘¿","can_delete":false,"product_type":"c1","uid":1300678,"ip_address":"","ucode":"40DFF5D3E3B24C","user_header":"https://static001.geekbang.org/account/avatar/00/13/d8/c6/2b2a58cf.jpg","comment_is_top":false,"comment_ctime":1561291095,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561291095","product_id":100020801,"comment_content":"å‡è®¾ä¸€ä¸ªäº‹åŠ¡æœ‰ä¸¤æ¡sqlè¯­å¥ï¼Œsql1å’Œsql2ï¼Œå†™redo logçš„æ—¶å€™æ˜¯ä¸æ˜¯å½“sql1å…ˆæ‰§è¡Œå®Œå†™è¿›redo log bufferï¼Œsql2æ‰§è¡Œå®Œåˆå†™å…¥redo log bufferä¸€æ¬¡ï¼Œè¿˜æ˜¯ç­‰å…¨éƒ¨å®Œæˆå†å†™å…¥","like_count":0},{"had_liked":false,"id":99766,"user_name":"Tunayoyo","can_delete":false,"product_type":"c1","uid":1447213,"ip_address":"","ucode":"E77AFDE575CE04","user_header":"https://static001.geekbang.org/account/avatar/00/16/15/2d/8447e8c8.jpg","comment_is_top":false,"comment_ctime":1559294738,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1559294738","product_id":100020801,"comment_content":"innodb_flush_log_at_trx_commit =1ï¼Œå¹¶è¡Œäº‹åŠ¡æäº¤ï¼Œlogæ€ä¹ˆè¿˜æœ‰åœ¨bufferé‡Œé¢çš„æƒ…å†µï¼Ÿä¸æ˜¯ç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165044,"discussion_content":"æ€»å¾—å®¹ä¸ªæ—¶é—´å¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581250865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":95169,"user_name":"Lane","can_delete":false,"product_type":"c1","uid":1008257,"ip_address":"","ucode":"F70459D1BBD9F4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/62/81/ad80f427.jpg","comment_is_top":false,"comment_ctime":1557977258,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1557977258","product_id":100020801,"comment_content":"ç–‘é—®ï¼š<br>è€å¸ˆè¯´  è®¾ç½® binlog_group_commit_sync_delay å’Œ binlog_group_commit_sync_no_delay_count ä¼šå¯¼è‡´å»¶è¿Ÿä½†æ˜¯ä¸ä¼šä¸¢å¤±ã€‚<br>è¿™ä¸ªå‚æ•°æ˜¯å»¶è¿Ÿfsyncçš„æ—¶æœºï¼Œé‚£ä¹ˆwriteåæœªfsyncï¼Œå®•æœºï¼Œä¸è¿˜æ˜¯ä¼šä¸¢å—ï¼Ÿ","like_count":0},{"had_liked":false,"id":91961,"user_name":"liao xueqiang","can_delete":false,"product_type":"c1","uid":1310325,"ip_address":"","ucode":"68713441579F6B","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/75/46742f12.jpg","comment_is_top":false,"comment_ctime":1557145710,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1557145710","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³äº†å¾ˆä¹…ï¼Œè¿˜æ˜¯æ²¡èƒ½ç†è§£ä¸‹é¢è¿™å¥è¯ï¼Œä¹Ÿç»™æ‚¨å°±è¿™ä¸ªé—®é¢˜ç•™äº†å¥½å‡ æ¬¡è¨€ã€‚<br>æ¯ç§’ä¸€æ¬¡åå°è½®è¯¢åˆ·ç›˜ï¼Œå†åŠ ä¸Šå´©æºƒæ¢å¤è¿™ä¸ªé€»è¾‘ï¼ŒInnoDBå°±è®¤ä¸º redo log åœ¨ commit çš„æ—¶å€™å°±ä¸éœ€è¦fsync äº†ï¼Œåªä¼š write åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸­å°±å¤Ÿäº†ã€‚<br><br>å¦‚æœåªå†™åˆ°redo logåªå†™åˆ°äº†page cacheä¸­ï¼Œé‚£æœåŠ¡å™¨é‡å¯ï¼Œä¸å°±æ²¡æœ‰äº†è¿™ä¸€ç§’çš„redo logçš„ä¿¡æ¯äº†ã€‚æ²¡æœ‰äº†è¿™ä¸€ç§’çš„redo logçš„ä¿¡æ¯æ€ä¹ˆå®ç°å¥”æºƒæ¢å¤å‘¢ï¼Ÿå¥”æºƒæ¢å¤éœ€è¦redo logå’Œbinlogï¼Œæ²¡æœ‰äº†redo logï¼Œå…‰æœ‰binlogï¼Œæ€ä¹ˆæ¥ç»­èµ·æ¥å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1702886,"avatar":"https://static001.geekbang.org/account/avatar/00/19/fb/e6/1b9edb91.jpg","nickname":"ç»ƒä¹ ç”Ÿ","note":"","ucode":"60203A2AA0EA36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293994,"discussion_content":"redologè¿›å…¥prepareé˜¶æ®µæ—¶å°±å·²ç»æŒä¹…åŒ–åˆ°ç£ç›˜äº†ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ä»…æœ‰Binlogçš„æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595754882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90715,"user_name":"Break","can_delete":false,"product_type":"c1","uid":1508922,"ip_address":"","ucode":"6D1CCFC60E11EF","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/3a/68bed1d9.jpg","comment_is_top":false,"comment_ctime":1556615840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556615840","product_id":100020801,"comment_content":"&lt;li&gt;å›¾ä¸­çš„ writeï¼ŒæŒ‡çš„å°±æ˜¯æŒ‡æŠŠæ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cacheï¼Œå¹¶æ²¡æœ‰æŠŠæ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œæ‰€ä»¥é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚&lt;&#47;li&gt;<br><br>å¦‚æœæŠŠsync_binlogè®¾ç½®ä¸º0, é‚£ä¹ˆå°±æ°¸è¿œä¸ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜å—? è¿™æ ·æ²¡é—®é¢˜å—? ä½†æ˜¯æˆ‘çœ‹è¯„è®ºé‡Œåˆè¯´page  cacheä¹Ÿæ˜¯æ–‡ä»¶ç³»ç»Ÿ, é‚£ä¹ˆå°±æ˜¯æ”¾åœ¨ç£ç›˜çš„? é‚£è¿˜æ˜¯å˜æˆå†™å…¥åˆ°ç£ç›˜å•Š......","like_count":0},{"had_liked":false,"id":85230,"user_name":"æ¨æ˜¥é¹","can_delete":false,"product_type":"c1","uid":1172056,"ip_address":"","ucode":"518F38232F97B5","user_header":"https://static001.geekbang.org/account/avatar/00/11/e2/58/8c8897c8.jpg","comment_is_top":false,"comment_ctime":1555024087,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1555024087","product_id":100020801,"comment_content":"Redologçš„prepareé˜¶æ®µçš„fsyncè¿‡ç¨‹ï¼Œä¸æ˜¯å·²ç»æŠŠäº‹åŠ¡æŒä¹…åŒ–åˆ°ç£ç›˜äº†å—ï¼Ÿé‚£ä¹ˆredologçš„commitçŠ¶æ€è¿˜æœ‰ç”¨å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1702886,"avatar":"https://static001.geekbang.org/account/avatar/00/19/fb/e6/1b9edb91.jpg","nickname":"ç»ƒä¹ ç”Ÿ","note":"","ucode":"60203A2AA0EA36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293991,"discussion_content":"æœ‰ç”¨ï¼Œå´©æºƒæ¢å¤çš„æ—¶å€™æœ‰ä½œç”¨ã€‚å¦‚æœå‘ç°äº‹åŠ¡æœ‰å®Œæ•´çš„prepareé˜¶æ®µçš„redolog,å¹¶ä¸”æœ‰commitæ ‡è®°ï¼Œå°±ç›´æ¥è®¤ä¸ºäº‹åŠ¡æäº¤äº†åšç›¸åº”æ•°æ®çš„æ›´æ”¹ï¼Œå¦åˆ™çš„è¯è¿˜è¦æ‹¿xidå»binlogæ–‡ä»¶æ‰¾æ˜¯å¦æœ‰æ— å®Œæˆçš„binlog","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1595754751,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84369,"user_name":"liao xueqiang","can_delete":false,"product_type":"c1","uid":1310325,"ip_address":"","ucode":"68713441579F6B","user_header":"https://static001.geekbang.org/account/avatar/00/13/fe/75/46742f12.jpg","comment_is_top":false,"comment_ctime":1554855529,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1554855529","product_id":100020801,"comment_content":"æ¯ç§’ä¸€æ¬¡åå°è½®è¯¢åˆ·ç›˜ï¼Œå†åŠ ä¸Šå´©æºƒæ¢å¤è¿™ä¸ªé€»è¾‘ï¼ŒInnoDB å°±è®¤ä¸º redo log åœ¨ commit çš„æ—¶å€™å°±ä¸éœ€è¦ fsync äº†ï¼Œåªä¼š write åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ page cache ä¸­å°±å¤Ÿäº†ã€‚<br><br>è€å¸ˆï¼Œè¿™å¥è¯å•ç‹¬æ‹å‡ºæ¥æ— æ³•ç†è§£ï¼Œé‡å¯æœåŠ¡å™¨ä¼šä¸¢1ç§’æ•°æ®å•Šã€‚è¿™å¥è¯çš„å‰ææ˜¯ä¸æ˜¯innodb_flush_log_at_trx_commit=1","like_count":0,"discussions":[{"author":{"id":1702886,"avatar":"https://static001.geekbang.org/account/avatar/00/19/fb/e6/1b9edb91.jpg","nickname":"ç»ƒä¹ ç”Ÿ","note":"","ucode":"60203A2AA0EA36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293990,"discussion_content":"è¿™æ—¶ä¸¢çš„åªæ˜¯commité˜¶æ®µçš„redolog,prepareé˜¶æ®µçš„redologå·²ç»æŒä¹…åŒ–é“ç£ç›˜äº†ï¼Œæ¥ä¸‹æ¥åšæ•°æ®å¥”æºƒæ¢å¤ä»ç„¶æ˜¯æ²¡é—®é¢˜çš„ï¼Œåªæ˜¯ç”±äºå°‘äº†commité˜¶æ®µçš„relogï¼Œå¯èƒ½æ¢å¤çš„è¿‡ç¨‹ä¼šæ…¢ç‚¹ï¼Œå› ä¸ºè¦æ‹¿xidå»Binlogæ–‡ä»¶ä¸­æŸ¥æ‰¾åŒ¹é…çš„binlog","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595754482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":84252,"user_name":"æ¸…é£æµŠé…’","can_delete":false,"product_type":"c1","uid":1302407,"ip_address":"","ucode":"4BB111C61A40C4","user_header":"https://static001.geekbang.org/account/avatar/00/13/df/87/0e05dadd.jpg","comment_is_top":false,"comment_ctime":1554813026,"is_pvip":false,"replies":[{"id":"30752","content":"è¦çœ‹ä½ çš„haç­–ç•¥å“¦<br><br>è€ƒè™‘æ•°æ®å¯é æ€§ï¼Œä¸€èˆ¬è¿˜æ˜¯è¦çš„<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1555147464,"ip_address":"","comment_id":84252,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554813026","product_id":100020801,"comment_content":"è€å¸ˆï¼Œmgrç¯å¢ƒè¿˜æœ‰å¿…è¦è®¾ç½®åŒä¸€å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446294,"discussion_content":"è¦çœ‹ä½ çš„haç­–ç•¥å“¦\n\nè€ƒè™‘æ•°æ®å¯é æ€§ï¼Œä¸€èˆ¬è¿˜æ˜¯è¦çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555147464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76262,"user_name":"ä¸€æ¢¦å¦‚æ˜¯","can_delete":false,"product_type":"c1","uid":1305308,"ip_address":"","ucode":"9CCB1D0E547C83","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/dc/9a970e98.jpg","comment_is_top":false,"comment_ctime":1552560438,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552560438","product_id":100020801,"comment_content":"Binlogçš„æ˜¯ä¸æ˜¯ç»„æäº¤ï¼Œå’Œredo logçš„ç»„æäº¤æœ‰å¿…ç„¶è”ç³»å—ï¼Ÿè¿™å—æ²¡å¤ªæ˜ç™½ã€‚æµ‹è¯•çš„æ—¶å€™binlogé‡Œé¢çš„last_commitedå€¼æœ‰çš„ç›¸åŒæœ‰çš„ä¸ç›¸åŒã€‚å¦‚æœlast_commitedå€¼ç›¸åŒï¼Œæ˜¯ä¸æ˜¯æ„å‘³ç€redo logé‡Œè¿™å‡ ä¸ªäº‹åŠ¡ä¹Ÿå¿…é¡»æ˜¯ç»„æäº¤çš„å‘¢","like_count":0},{"had_liked":false,"id":75592,"user_name":"Snake","can_delete":false,"product_type":"c1","uid":1034894,"ip_address":"","ucode":"C3E80DE87EACD1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ca/8e/5768649e.jpg","comment_is_top":false,"comment_ctime":1552438506,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552438506","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®æ–‡ä¸­è¯´åˆ°çš„binlog_cacheå’Œredo_log_bufferæ˜¯æ˜¯é’ˆå¯¹ä¸€ä¸ªæ•°æ®åº“å®ä¾‹çš„ï¼Œè¿˜æ˜¯é’ˆå¯¹å®é™…ä¸‹å…·ä½“æŸä¸€ä¸ªåº“çš„ï¼Ÿå¦‚æœé’ˆå¯¹æ˜¯é’ˆå¯¹å®ä¾‹ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰å“ªäº›é…ç½®æˆ–è€…æœºåˆ¶æ˜¯é’ˆå¯¹åº“çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":60722,"user_name":"ä¼¼æ°´æµå¹´","can_delete":false,"product_type":"c1","uid":1304443,"ip_address":"","ucode":"D114A8E273133C","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/7b/71da8283.jpg","comment_is_top":false,"comment_ctime":1547537456,"is_pvip":false,"replies":[{"id":"21670","content":"å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„page cacheï¼Œæ˜¯å±äºæ“ä½œç³»ç»Ÿçš„å†…å­˜çš„ä¸€éƒ¨åˆ†","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547551926,"ip_address":"","comment_id":60722,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1547537456","product_id":100020801,"comment_content":"æˆ‘ç½‘ä¸ŠæŸ¥pagecacheæ˜¯åœ¨å†…å­˜é‡Œçš„ï¼Œè¿™ä¸æ‚¨è®²çš„ä¸€æ ·å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436598,"discussion_content":"å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„page cacheï¼Œæ˜¯å±äºæ“ä½œç³»ç»Ÿçš„å†…å­˜çš„ä¸€éƒ¨åˆ†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547551926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028635,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKawxntLfibLJJmbicIiczetxQBOsn8uNTbNBANje21Chiay38FiaA43CuY7sxLQp12ghDvWXghNTXrGNQ/132","nickname":"Geek_f40120","note":"","ucode":"7EF9C529B7AE9A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":279705,"discussion_content":"æ“ä½œç³»ç»Ÿçš„å†…å­˜ï¼Œé‚£å²‚ä¸æ˜¯æ–­ç”µå°±æ²¡æœ‰äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591400986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57832,"user_name":"Mr.Strive.Z.H.L","can_delete":false,"product_type":"c1","uid":1030198,"ip_address":"","ucode":"6D97E159E2EECD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b8/36/542c96bf.jpg","comment_is_top":false,"comment_ctime":1546920979,"is_pvip":false,"replies":[{"id":"21113","content":"å†™binlogå¯ä»¥å¹¶å‘å†™çš„ï¼Œå¤§å®¶çº¦å¥½ç£ç›˜è‡ªå·±å†™è‡ªå·±çš„å°±è¡Œ^_^","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547118722,"ip_address":"","comment_id":57832,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546920979","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼š<br>è¿™ä¸€èŠ‚çš„ç–‘æƒ‘æ¯”è¾ƒå¤šï¼Œå˜»å˜»<br>è¿˜æƒ³åœ¨ç¡®è®¤ä¸€ä¸ªé—®é¢˜ï¼š<br>æˆ‘è®¤ä¸ºredologçš„ç»„æäº¤ æ˜¯ä»writeå¼€å§‹çš„ç»„æäº¤ã€‚ä¸ªäººè®¤ä¸ºwriteåˆ°pagecacheçš„æ—¶å€™æ˜¯ä¸éœ€è¦åŠ é”çš„ã€‚<br>è€Œbinlogçš„ç»„æäº¤ï¼Œåœ¨writeé˜¶æ®µï¼Œéƒ½æ˜¯å•çº¿ç¨‹å¯¹è‡ªå·±çš„binlog cache writeåˆ°pagecacheã€‚è¿™ä¸ªæ—¶å€™å¿…é¡»åŠ é”ã€‚è™½ç„¶syncé˜¶æ®µï¼Œä¸¤è€…éƒ½æ˜¯æ‰¹é‡è¿›è¡Œçš„ã€‚ä½†æ˜¯ä»writeé˜¶æ®µæ¥çœ‹ï¼Œbinlogå¹¶æ²¡æœ‰å®ç°çœŸæ­£æ„ä¹‰ä¸Šå®ç°ç»„æäº¤ï¼Œæ²¡æ³•è§£å†³ä¸Šé”é—®é¢˜ã€‚ï¼ˆåœ¨ç½‘ä¸Šçœ‹åˆ°ï¼ŒbinlogçœŸæ­£çš„ç»„æäº¤ï¼Œåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿™ç§å®ç°å¥½åƒæ˜¯æ¯”è¾ƒæ–°çš„mysqlç‰ˆæœ¬æ‰ä½¿ç”¨çš„ï¼‰<br><br>æˆ‘è¿™ä¹ˆç†è§£å¯¹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435782,"discussion_content":"å†™binlogå¯ä»¥å¹¶å‘å†™çš„ï¼Œå¤§å®¶çº¦å¥½ç£ç›˜è‡ªå·±å†™è‡ªå·±çš„å°±è¡Œ^_^","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547118722,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57408,"user_name":"52rock","can_delete":false,"product_type":"c1","uid":1025632,"ip_address":"","ucode":"3C4376A8EAAEF6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/60/0eac2751.jpg","comment_is_top":false,"comment_ctime":1546782865,"is_pvip":true,"replies":[{"id":"20684","content":"åˆ é™¤äº†ä»€ä¹ˆlogåæ­£å¸¸çš„ï¼Ÿ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546798077,"ip_address":"","comment_id":57408,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546782865","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œwindowsç³»ç»Ÿä¸‹MySQLå¶å°”æœ‰ååº“çš„æƒ…å†µï¼Œæ¢å¤æ•°æ®æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰ä»€ä¹ˆé…ç½®å¯ä»¥ä¼˜åŒ–<br>1.æŸä¸ªè¡¨æç¤ºæ‰“ä¸å¼€ï¼Œä¹Ÿæ— æ³•é‡å»ºè¡¨<br>2.mysqlæ— æ³•å¯åŠ¨ 1067<br>3.binlogæ—¥å¿—æ–‡ä»¶æ— æ³•å†™å…¥ï¼Œåˆ äº†logæ–‡ä»¶åæ­£å¸¸ã€‚<br><br>my.inié…ç½®å¦‚ä¸‹<br>[mysqld]<br># use 5.6.20<br>[mysqld]<br>bind-address = 0.0.0.0<br>character-set-server=utf8<br>log-bin=my.bin<br>binlog_format=statement<br>server-id=1<br><br>#ä¸éœ€è¦åŒæ­¥çš„åº“<br>binlog-ignore-db=information_schema<br>binlog-ignore-db=performance_schema<br>binlog-ignore-db=mysql<br><br>max_connect_errors = 3000<br>wait_timeout=2880000<br>interactive_timeout=2880000<br><br>query_cache_size = 0<br>query_cache_type = 0<br><br>sql-mode=NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION<br><br>max_allowed_packet =256MB<br>read_buffer_size = 8M<br>read_rnd_buffer_size = 16M<br>lower_case_table_names = 1<br>key_buffer_size = 15M<br><br>table_open_cache = 400<br>table_definition_cache = 400<br>table_open_cache_instances = 64<br>metadata_locks_hash_instances=64<br><br>sort_buffer_size = 16M<br>join_buffer_size = 16M<br>thread_cache_size = 768<br>query_cache_size = 0<br>query_cache_type = 0<br>tmp_table_size = 96M<br>performance_schema=OFF<br>open_files_limit = 65535<br>back_log = 1024<br><br>innodb_buffer_pool_size=800MB<br># 4MB-8MB ok<br>innodb_file_per_table = 1                                               <br>external-locking = FALSE<br>#skip-external-locking<br>expire_logs_days=45<br>max_binlog_size=200M<br>skip-name-resolve=OFF<br>transaction-isolation=repeatable-read<br>log_warnings=0","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435565,"discussion_content":"åˆ é™¤äº†ä»€ä¹ˆlogåæ­£å¸¸çš„ï¼Ÿ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546798077,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57404,"user_name":"æ»”æ»”","can_delete":false,"product_type":"c1","uid":1303342,"ip_address":"","ucode":"6968B5771AF79D","user_header":"https://static001.geekbang.org/account/avatar/00/13/e3/2e/77ad18f4.jpg","comment_is_top":false,"comment_ctime":1546781987,"is_pvip":false,"replies":[{"id":"20683","content":"å—¯ï¼Œè¿™æ ·å¾ˆå¿«çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546797953,"ip_address":"","comment_id":57404,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1546781987","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæƒ³ä»ä¸€ä¸ªæœ‰è‡ªå¢ä¸»é”®(id)çš„è¡¨ä¸­å–å‡ºä¸»é”®å€¼æœ€å¤§çš„næ¡è®°å½•ï¼Œæ€æ ·æ“ä½œæ•ˆç‡æœ€é«˜å‘¢ï¼Ÿä½¿ç”¨order by id limit næ˜¯æœ€å¿«çš„æ–¹å¼å—ï¼ŸğŸ¤”","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435564,"discussion_content":"å—¯ï¼Œè¿™æ ·å¾ˆå¿«çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546797953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1065351,"avatar":"https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg","nickname":"SuperSnow","note":"","ucode":"84C89AA8083E6A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":165046,"discussion_content":"å¾—åŠ ä¸€ä¸ªDESCå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581251061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57063,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1546611871,"is_pvip":false,"replies":[{"id":"20579","content":"ä¸ä¼šå‡ºé—®é¢˜ï¼ŒLSNç¡®ä¿ä¸ä¼šäºŒæ¬¡æ‰§è¡Œ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546618465,"ip_address":"","comment_id":57063,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546611871","product_id":100020801,"comment_content":"è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ checkpointä¹‹åçš„redo logä¸€å®šæ˜¯è¿˜æœªflushçš„å˜›ï¼Ÿ å¦‚æœä¸æ˜¯çš„è¯ï¼Œå¦‚æœæœºå™¨åäº†é‡å¯ ä»checkpointä¹‹åé‡æ–°æ‰§è¡Œredo log çœ‹åˆ°å·²ç»flushè¿‡çš„é¡µ ä¸ä¼šå‡ºé—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435386,"discussion_content":"ä¸ä¼šå‡ºé—®é¢˜ï¼ŒLSNç¡®ä¿ä¸ä¼šäºŒæ¬¡æ‰§è¡Œ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546618465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57062,"user_name":"æœ±æœˆä¿Š","can_delete":false,"product_type":"c1","uid":1017707,"ip_address":"","ucode":"4DA0728B862FBD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/6b/0b6cd39a.jpg","comment_is_top":false,"comment_ctime":1546611746,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1546611746","product_id":100020801,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæ’å…¥ä¸€æ¡è¯­å¥çš„æ—¶å€™ï¼Œè¿”å›è¿™æ¡è®°å½•çš„è‡ªå¢idã€‚","like_count":0},{"had_liked":false,"id":57052,"user_name":"nero","can_delete":false,"product_type":"c1","uid":1110627,"ip_address":"","ucode":"BACD4A95B5FA09","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/63/1f495e51.jpg","comment_is_top":false,"comment_ctime":1546609758,"is_pvip":false,"replies":[{"id":"20577","content":"æ²¡äº‹ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546615177,"ip_address":"","comment_id":57052,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546609758","product_id":100020801,"comment_content":"è€å¸ˆè¯·æ•™ä¸‹ï¼š<br>äº‹åŠ¡è¿˜æ²¡æäº¤çš„æ—¶å€™ï¼Œredo log buffer ä¸­çš„éƒ¨åˆ†æ—¥å¿—æœ‰å¯èƒ½è¢«æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œè¿™ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435380,"discussion_content":"æ²¡äº‹ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546615177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57037,"user_name":"æœ±æœˆä¿Š","can_delete":false,"product_type":"c1","uid":1017707,"ip_address":"","ucode":"4DA0728B862FBD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/6b/0b6cd39a.jpg","comment_is_top":false,"comment_ctime":1546605791,"is_pvip":false,"replies":[{"id":"20562","content":"è¿˜æ²¡æœ‰è¿™ä¸ªè¯­æ³•ï¼Œè¿™ä¸ªæ˜¯è¦return å•¥å‘¢â€¦","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546608499,"ip_address":"","comment_id":57037,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546605791","product_id":100020801,"comment_content":"è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œmysqlæ”¯æŒinsert into xxx returning xxx;å—ï¼Ÿ ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435371,"discussion_content":"è¿˜æ²¡æœ‰è¿™ä¸ªè¯­æ³•ï¼Œè¿™ä¸ªæ˜¯è¦return å•¥å‘¢â€¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546608499,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56954,"user_name":"å¤¹å¿ƒé¢åŒ…","can_delete":false,"product_type":"c1","uid":1301957,"ip_address":"","ucode":"002BBA49D83D17","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJCscgdVibmoPyRLRaicvk6rjTJxePZ6VFHvGjUQvtfhCS6kO4OZ1AVibbhNGKlWZmpEFf2yA6ptsqHw/132","comment_is_top":false,"comment_ctime":1546586182,"is_pvip":false,"replies":[{"id":"21098","content":"çœ‹çœ‹æ˜¯ä¸æ˜¯ log_queries_not_using_indexesè®¾ç½®æˆonäº†ï¼Ÿ<br><br>è¿˜æœ‰çœ‹çœ‹long_query_time è®¾ç½®çš„æ˜¯å¤šå°‘<br><br>å†è´´ä¸ªæ…¢æŸ¥è¯¢æ—¥å¿—çš„ä¾‹å­çœ‹çœ‹å“ˆ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547116922,"ip_address":"","comment_id":56954,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546586182","product_id":100020801,"comment_content":"è€å¸ˆ,è¯·æ•™ä¸€ä¸ªä¸æœ¬è¯¾æ— å…³çš„æ¡ˆä¾‹,ç¯å¢ƒæ˜¯æ¯å¤©ç”Ÿæˆä¸€å¼ è¡¨,æ¯ä¸ªæœˆä¸€ä¸ªåº“,æ¯å¤©çš„æ•°æ®é‡ä¸å›ºå®š,ä½†æ˜¯éƒ½æ˜¯çƒ­æ•°æ®,éƒ½æœ‰å¯èƒ½è¢«æŸ¥è¯¢.éšç€æ•°æ®é‡çš„å¢å¤š,è´Ÿè½½æŒç»­å‡é«˜.æ…¢æ—¥å¿—å‡ºç°å¾ˆå¤šæ‰«æå‡ åƒè¡Œçš„è¯­å¥.cpuä½¿ç”¨ç‡å¾ˆä½,iowaitä¸º5-10,buffer_poolå‘½ä¸­ç‡è¿˜æ˜¯100%.ç£ç›˜åœ¨å‹åŠ›å¤§æ—¶å€™å¤„äºç¹å¿™çŠ¶æ€.æ˜¯å¦å¯ä»¥è®¤ä¸º,å‹åŠ›åœ¨äºç£ç›˜ç“¶é¢ˆ(ç£ç›˜é…ç½®8å—7200è½¬ç»„æˆçš„raid10),ä½†æ˜¯iowaitå¹¶éå¾ˆé«˜,å‘½ä¸­100% ä¸èƒ½ç†è§£,","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435327,"discussion_content":"çœ‹çœ‹æ˜¯ä¸æ˜¯ log_queries_not_using_indexesè®¾ç½®æˆonäº†ï¼Ÿ\n\nè¿˜æœ‰çœ‹çœ‹long_query_time è®¾ç½®çš„æ˜¯å¤šå°‘\n\nå†è´´ä¸ªæ…¢æŸ¥è¯¢æ—¥å¿—çš„ä¾‹å­çœ‹çœ‹å“ˆ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547116922,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56873,"user_name":"ä»¤ç‹å°‘ä¾ ","can_delete":false,"product_type":"c1","uid":1334516,"ip_address":"","ucode":"36390E67AF0779","user_header":"https://static001.geekbang.org/account/avatar/00/14/5c/f4/88f107d9.jpg","comment_is_top":false,"comment_ctime":1546571392,"is_pvip":false,"replies":[{"id":"20526","content":"æ²¡é…å°±æ˜¯ä½¿ç”¨é»˜è®¤å€¼ï¼Œshow variables å‘½ä»¤å¯ä»¥çœ‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546573221,"ip_address":"","comment_id":56873,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546571392","product_id":100020801,"comment_content":"è¯·é—®ä¸‹sync_binlogå‚æ•°åœ¨å“ªï¼Œä¸ºå•¥æˆ‘çš„my.cnfé…ç½®é¡¹é‡Œæ²¡æœ‰ï¼Œæ˜¯æœ‰é»˜è®¤å€¼å—ï¼Ÿ<br>port        = 3306<br>socket      = &#47;tmp&#47;mysql.sock<br>port        = 3306<br>socket      = &#47;tmp&#47;mysql.sock<br>datadir = &#47;usr&#47;local&#47;mysql&#47;var<br>skip-external-locking<br>key_buffer_size = 32M<br>max_allowed_packet = 1M<br>table_open_cache = 128<br>sort_buffer_size = 768K<br>net_buffer_length = 8K<br>read_buffer_size = 768K<br>read_rnd_buffer_size = 512K<br>myisam_sort_buffer_size = 8M<br>thread_cache_size = 16<br>query_cache_size = 16M<br>tmp_table_size = 32M<br>performance_schema_max_table_instances = 1000<br>explicit_defaults_for_timestamp = true<br>#skip-networking<br>max_connections = 500<br>max_connect_errors = 100<br>open_files_limit = 65535<br>#log-bin=mysql-bin<br>binlog_format=mixed<br>server-id   = 1<br>expire_logs_days = 10<br>#loose-innodb-trx=0<br>#loose-innodb-locks=0<br>#loose-innodb-lock-waits=0<br>#loose-innodb-cmp=0<br>#loose-innodb-cmp-per-index=0<br>#loose-innodb-cmp-per-index-reset=0<br>#loose-innodb-cmp-reset=0<br>#loose-innodb-cmpmem=0<br>#loose-innodb-cmpmem-reset=0<br>#loose-innodb-buffer-page=0<br>#loose-innodb-buffer-page-lru=0<br>#loose-innodb-buffer-pool-stats=0<br>#loose-innodb-metrics=0<br>#loose-innodb-ft-default-stopword=0<br>#loose-innodb-ft-inserted=0<br>#loose-innodb-ft-deleted=0<br>#loose-innodb-ft-being-deleted=0<br>#loose-innodb-ft-config=0<br>#loose-innodb-ft-index-cache=0<br>#loose-innodb-ft-index-table=0<br>#loose-innodb-sys-tables=0<br>#loose-innodb-sys-tablestats=0<br>#loose-innodb-sys-indexes=0<br>#loose-innodb-sys-columns=0<br>#loose-innodb-sys-fields=0<br>#loose-innodb-sys-foreign=0<br>#loose-innodb-sys-foreign-cols=0<br>default_storage_engine = InnoDB<br>innodb_file_per_table = 1<br>innodb_data_home_dir = &#47;usr&#47;local&#47;mysql&#47;var<br>innodb_data_file_path = ibdata1:10M:autoextend<br>innodb_log_group_home_dir = &#47;usr&#47;local&#47;mysql&#47;var<br>innodb_buffer_pool_size = 128M<br>innodb_log_file_size = 32M<br>innodb_log_buffer_size = 8M<br>innodb_flush_log_at_trx_commit = 1<br>innodb_lock_wait_timeout = 50<br><br>[mysqldump]<br>quick<br>max_allowed_packet = 16M<br>no-auto-rehash<br>key_buffer_size = 32M<br>sort_buffer_size = 768K<br>read_buffer = 2M<br>write_buffer = 2M<br>[mysqlhotcopy]<br>interactive-timeout<br>","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435290,"discussion_content":"æ²¡é…å°±æ˜¯ä½¿ç”¨é»˜è®¤å€¼ï¼Œshow variables å‘½ä»¤å¯ä»¥çœ‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546573221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56850,"user_name":"å¸ƒè¡£éª‡å®¢","can_delete":false,"product_type":"c1","uid":1256280,"ip_address":"","ucode":"5226B0F67090D1","user_header":"https://static001.geekbang.org/account/avatar/00/13/2b/58/11c05ccb.jpg","comment_is_top":false,"comment_ctime":1546567869,"is_pvip":false,"replies":[{"id":"20529","content":"å—¯å—¯ï¼Œæ˜¯å¦åŒ1ï¼Œè¿™ä¸ªæ€§èƒ½å·®è·æ•ˆæœè¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546573403,"ip_address":"","comment_id":56850,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546567869","product_id":100020801,"comment_content":"DD,æ‰“å¡ï¼Œæœªè®¾ç½®è¿‡è¿™äº›å‚æ•°ã€‚å¦‚æœæ‰‹åŠ¨æ£é¼“å»æ”¹å˜è¿™ä¸¤ä¸ªå‚æ•°ï¼Ÿæ˜¯å¦éœ€è¦ç»™åšæ•°æ®åº“å‹æµ‹æ‰èƒ½çœ‹å‡ºæ•ˆæœå‘¢","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435277,"discussion_content":"å—¯å—¯ï¼Œæ˜¯å¦åŒ1ï¼Œè¿™ä¸ªæ€§èƒ½å·®è·æ•ˆæœè¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546573403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56816,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1546563863,"is_pvip":false,"replies":[{"id":"21096","content":"write æ˜¯å†™åˆ°page cache<br>fsyncæ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜<br>å¦‚æœè®¾ç½®äº†trx_commit=0æˆ–è€…2 ï¼Œç¡®å®å¯èƒ½ä¼šä¸¢çš„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1547116718,"ip_address":"","comment_id":56816,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546563863","product_id":100020801,"comment_content":"relog çš„write å’Œfsync å“ªä¸ªæ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå‰é¢è¯´æ²¡æœ‰æäº¤çš„äº‹ç‰©å¯èƒ½æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œåé¢åˆåˆè¯´ï¼Œåªæ˜¯åœ¨page cache ä¸­ï¼Œæ²¡æœ‰æäº¤çš„äº‹ç‰©ï¼Œæ­¤æ—¶å¼‚å¸¸é‡å¯æ€ä¹ˆåŠï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435252,"discussion_content":"write æ˜¯å†™åˆ°page cache\nfsyncæ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜\nå¦‚æœè®¾ç½®äº†trx_commit=0æˆ–è€…2 ï¼Œç¡®å®å¯èƒ½ä¼šä¸¢çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547116718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56812,"user_name":"Second Sight","can_delete":false,"product_type":"c1","uid":1309199,"ip_address":"","ucode":"E979B311AA3491","user_header":"https://static001.geekbang.org/account/avatar/00/13/fa/0f/14bdda08.jpg","comment_is_top":false,"comment_ctime":1546563405,"is_pvip":false,"replies":[{"id":"20481","content":"æˆ‘ä¹Ÿè¿™ä¹ˆåšè¿‡ğŸ˜„","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546565979,"ip_address":"","comment_id":56812,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1546563405","product_id":100020801,"comment_content":"ä¸»ä»å¤åˆ¶å»¶è¿Ÿè¿‡å¤§çš„æ—¶å€™è°ƒæ•´è¿‡åŒ1çš„å‚æ•°ï¼Œå…ˆæ•‘ç«ğŸ˜‚","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435249,"discussion_content":"æˆ‘ä¹Ÿè¿™ä¹ˆåšè¿‡ğŸ˜„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546565979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":56799,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1546562681,"is_pvip":false,"replies":[{"id":"20475","content":" å‚è€ƒä½ ä¸Šä¸€ä¸ªé—®é¢˜ğŸ˜“","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1546564792,"ip_address":"","comment_id":56799,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1546562681","product_id":100020801,"comment_content":"binlog cache å†™å…¥å…¥binlog æ–‡ä»¶ï¼Œè¿™ä¸ªä¸å°±æ˜¯æŒä¹…åŒ–å—ï¼Ÿåé¢å¹²å˜›è¿˜è¦fsync æŒä¹…åŒ–ï¼Œä¸æ˜¯å¤šä½™","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":435240,"discussion_content":" å‚è€ƒä½ ä¸Šä¸€ä¸ªé—®é¢˜ğŸ˜“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546564792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1702886,"avatar":"https://static001.geekbang.org/account/avatar/00/19/fb/e6/1b9edb91.jpg","nickname":"ç»ƒä¹ ç”Ÿ","note":"","ucode":"60203A2AA0EA36","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":293985,"discussion_content":"binlog cache æŒä¹…åŒ–åˆ°binlogæ–‡ä»¶å…¶å®è¦ç»è¿‡ä¸¤ä¸ªæ­¥éª¤ã€‚ç¬¬ä¸€æ­¥ï¼šå…ˆwrite åˆ°ç£ç›˜çš„page cacheï¼ˆpagecacheä»ç„¶åœ¨å†…å­˜ï¼‰ä¸­ï¼Œç¬¬äºŒæ­¥fsync æŠŠpage cacheä¸­çš„æ•°æ®çœŸæ­£å†™åˆ°ç£ç›˜ä¸­","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595753685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}