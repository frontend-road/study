{"id":116260,"title":"33 | æˆ‘åº”è¯¥è¿ç§»åˆ°HTTP/2å—ï¼Ÿ","content":"<p>è¿™ä¸€è®²æ˜¯â€œé£ç¿”ç¯‡â€çš„æœ€åä¸€è®²ï¼Œè€ŒHTTPçš„æ‰€æœ‰çŸ¥è¯†ä¹Ÿå·®ä¸å¤šå¿«å­¦å®Œäº†ã€‚</p><p>å‰é¢ä½ å·²ç»çœ‹åˆ°äº†æ–°çš„HTTP/2å’ŒHTTP/3åè®®ï¼Œäº†è§£äº†å®ƒä»¬çš„ç‰¹ç‚¹å’Œå·¥ä½œåŸç†ï¼Œå¦‚æœå†è”ç³»ä¸Šå‰å‡ å¤©â€œå®‰å…¨ç¯‡â€çš„HTTPSï¼Œä½ å¯èƒ½åˆä¼šå‘å‡ºç–‘é—®ï¼š</p><p>â€œåˆšè´¹äº†å¥½å¤§çš„åŠ›æ°”å‡çº§åˆ°HTTPSï¼Œè¿™åˆå‡ºäº†ä¸€ä¸ªHTTP/2ï¼Œè¿˜æœ‰å†æ¬¡å‡çº§çš„å¿…è¦å—ï¼Ÿâ€</p><p>ä¸å„å¤§æµè§ˆå™¨â€œå¼ºæ¨â€HTTPSçš„å¾…é‡ä¸ä¸€æ ·ï¼ŒHTTP/2çš„å…¬å¸ƒå¯è°“æ˜¯â€œæ³¢æ¾œä¸æƒŠâ€ã€‚è™½ç„¶å®ƒæ˜¯HTTPåè®®çš„ä¸€ä¸ªé‡å¤§å‡çº§ï¼Œä½†Appleã€Googleç­‰ç§‘æŠ€å·¨å¤´å¹¶æ²¡æœ‰åƒHTTPSé‚£æ ·ç»™äºˆå¤§é‡èµ„æºçš„æ”¯æŒã€‚</p><p>ç›´åˆ°ä»Šå¤©ï¼ŒHTTP/2åœ¨äº’è”ç½‘ä¸Šè¿˜æ˜¯å¤„äºâ€œä¸æ¸©ä¸ç«â€çš„çŠ¶æ€ï¼Œè™½ç„¶å·²ç»æœ‰äº†ä¸å°‘çš„ç½‘ç«™æ”¹é€ å‡çº§åˆ°äº†HTTP/2ï¼Œä½†æ™®åŠçš„é€Ÿåº¦è¿œä¸åŠHTTPSã€‚</p><p>æ‰€ä»¥ï¼Œä½ æœ‰è¿™æ ·çš„ç–‘é—®ä¹Ÿæ˜¯å¾ˆè‡ªç„¶çš„ï¼Œå‡çº§åˆ°HTTP/2ç©¶ç«Ÿèƒ½ç»™æˆ‘ä»¬å¸¦æ¥å¤šå°‘å¥½å¤„å‘¢ï¼Ÿåˆ°åº•â€œå€¼ä¸å€¼â€å‘¢ï¼Ÿ</p><h2>HTTP/2çš„ä¼˜ç‚¹</h2><p>å‰é¢çš„å‡ è®²ä¸»è¦å…³æ³¨äº†HTTP/2çš„å†…éƒ¨å®ç°ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥çœ‹çœ‹å®ƒæœ‰å“ªäº›ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚</p><p>é¦–å…ˆè¦è¯´çš„æ˜¯ï¼ŒHTTP/2æœ€å¤§çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯<strong>å®Œå…¨ä¿æŒäº†ä¸HTTP/1çš„å…¼å®¹</strong>ï¼Œåœ¨è¯­ä¹‰ä¸Šæ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œä¹‹å‰åœ¨HTTPä¸Šçš„æ‰€æœ‰æŠ•å…¥éƒ½ä¸ä¼šæµªè´¹ã€‚</p><p>å› ä¸ºå…¼å®¹HTTP/1ï¼Œæ‰€ä»¥HTTP/2ä¹Ÿå…·æœ‰HTTP/1çš„æ‰€æœ‰ä¼˜ç‚¹ï¼Œå¹¶ä¸”â€œåŸºæœ¬â€è§£å†³äº†HTTP/1çš„æ‰€æœ‰ç¼ºç‚¹ï¼Œå®‰å…¨ä¸æ€§èƒ½å…¼é¡¾ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯â€œ<span class=\"orange\">æ›´å®‰å…¨çš„HTTPã€æ›´å¿«çš„HTTPS</span>â€ã€‚</p><!-- [[[read_end]]] --><p>åœ¨å®‰å…¨ä¸Šï¼ŒHTTP/2å¯¹HTTPSåœ¨å„æ–¹é¢éƒ½åšäº†å¼ºåŒ–ã€‚ä¸‹å±‚çš„TLSè‡³å°‘æ˜¯1.2ï¼Œè€Œä¸”åªèƒ½ä½¿ç”¨å‰å‘å®‰å…¨çš„å¯†ç å¥—ä»¶ï¼ˆå³ECDHEï¼‰ï¼Œè¿™åŒæ—¶ä¹Ÿå°±é»˜è®¤å®ç°äº†â€œTLS False Startâ€ï¼Œæ”¯æŒ1-RTTæ¡æ‰‹ï¼Œæ‰€ä»¥ä¸éœ€è¦å†åŠ é¢å¤–çš„é…ç½®å°±å¯ä»¥è‡ªåŠ¨å®ç°HTTPSåŠ é€Ÿã€‚</p><p>å®‰å…¨æœ‰äº†ä¿éšœï¼Œå†æ¥çœ‹HTTP/2åœ¨æ€§èƒ½æ–¹é¢çš„æ”¹è¿›ã€‚</p><p>ä½ åº”è¯¥çŸ¥é“ï¼Œå½±å“ç½‘ç»œé€Ÿåº¦çš„ä¸¤ä¸ªå…³é”®å› ç´ æ˜¯â€œ<strong>å¸¦å®½</strong>â€å’Œâ€œ<strong>å»¶è¿Ÿ</strong>â€ï¼ŒHTTP/2çš„å¤´éƒ¨å‹ç¼©ã€å¤šè·¯å¤ç”¨ã€æµä¼˜å…ˆçº§ã€æœåŠ¡å™¨æ¨é€ç­‰æ‰‹æ®µå…¶å®éƒ½æ˜¯é’ˆå¯¹è¿™ä¸¤ä¸ªè¦ç‚¹ã€‚</p><p>æ‰€è°“çš„â€œå¸¦å®½â€å°±æ˜¯ç½‘ç»œçš„ä¼ è¾“é€Ÿåº¦ã€‚ä»æœ€æ—©çš„56K/sï¼Œåˆ°å¦‚ä»Šçš„100M/sï¼Œè™½ç„¶ç½‘é€Ÿå·²ç»æ˜¯â€œä»Šéæ˜”æ¯”â€ï¼Œæ¯”ä»å‰å¿«äº†å‡ åå€ã€å‡ ç™¾å€ï¼Œä½†ä»ç„¶æ˜¯â€œç¨€ç¼ºèµ„æºâ€ï¼Œå›¾ç‰‡ã€è§†é¢‘è¿™æ ·çš„å¤šåª’ä½“æ•°æ®å¾ˆå®¹æ˜“ä¼šæŠŠå¸¦å®½ç”¨å°½ã€‚</p><p>èŠ‚çº¦å¸¦å®½çš„åŸºæœ¬æ‰‹æ®µå°±æ˜¯å‹ç¼©ï¼Œåœ¨HTTP/1é‡Œåªèƒ½å‹ç¼©bodyï¼Œè€ŒHTTP/2åˆ™å¯ä»¥ç”¨HPACKç®—æ³•å‹ç¼©headerï¼Œè¿™å¯¹é«˜æµé‡çš„ç½‘ç«™éå¸¸æœ‰ä»·å€¼ï¼Œæœ‰æ•°æ®è¡¨æ˜èƒ½èŠ‚çœå¤§æ¦‚5%~10%çš„æµé‡ï¼Œè¿™æ˜¯å®å®åœ¨åœ¨çš„â€œçœŸé‡‘ç™½é“¶â€ã€‚</p><p>ä¸HTTP/1â€œå¹¶å‘å¤šä¸ªè¿æ¥â€ä¸åŒï¼ŒHTTP/2çš„â€œå¤šè·¯å¤ç”¨â€ç‰¹æ€§è¦æ±‚å¯¹<strong>ä¸€ä¸ªåŸŸåï¼ˆæˆ–è€…IPï¼‰åªç”¨ä¸€ä¸ªTCPè¿æ¥</strong>ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½åœ¨è¿™ä¸€ä¸ªè¿æ¥ä¸Šä¼ è¾“ï¼Œè¿™æ ·ä¸ä»…èŠ‚çº¦äº†å®¢æˆ·ç«¯ã€æœåŠ¡å™¨å’Œç½‘ç»œçš„èµ„æºï¼Œè¿˜å¯ä»¥æŠŠå¸¦å®½è·‘æ»¡ï¼Œè®©TCPå……åˆ†â€œåƒé¥±â€ã€‚</p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åœ¨HTTP/1é‡Œçš„é•¿è¿æ¥ï¼Œè™½ç„¶æ˜¯åŒå‘é€šä¿¡ï¼Œä½†ä»»æ„ä¸€ä¸ªæ—¶é—´ç‚¹å®é™…ä¸Šè¿˜æ˜¯å•å‘çš„ï¼šä¸Šè¡Œè¯·æ±‚æ—¶ä¸‹è¡Œç©ºé—²ï¼Œä¸‹è¡Œå“åº”æ—¶ä¸Šè¡Œç©ºé—²ï¼Œå†åŠ ä¸Šâ€œé˜Ÿå¤´é˜»å¡â€ï¼Œå®é™…çš„å¸¦å®½æ‰“äº†ä¸ªâ€œå¯¹æŠ˜â€è¿˜ä¸æ­¢ï¼ˆå¯å‚è€ƒ<a href=\"https://time.geekbang.org/column/article/104949\">ç¬¬17è®²</a>ï¼‰ã€‚</p><p>è€Œåœ¨HTTP/2é‡Œï¼Œâ€œå¤šè·¯å¤ç”¨â€åˆ™è®©TCPå¼€è¶³äº†é©¬åŠ›ï¼Œâ€œå…¨é€Ÿç‹‚å¥”â€ï¼Œå¤šä¸ªè¯·æ±‚å“åº”å¹¶å‘ï¼Œæ¯æ—¶æ¯åˆ»ä¸Šä¸‹è¡Œæ–¹å‘ä¸Šéƒ½æœ‰æµåœ¨ä¼ è¾“æ•°æ®ï¼Œæ²¡æœ‰ç©ºé—²çš„æ—¶å€™ï¼Œå¸¦å®½çš„åˆ©ç”¨ç‡èƒ½å¤Ÿæ¥è¿‘100%ã€‚æ‰€ä»¥ï¼ŒHTTP/2åªä½¿ç”¨ä¸€ä¸ªè¿æ¥ï¼Œå°±èƒ½æŠµå¾—è¿‡HTTP/1é‡Œçš„äº”å…­ä¸ªè¿æ¥ã€‚</p><p>ä¸è¿‡æµä¹Ÿå¯èƒ½ä¼šæœ‰ä¾èµ–å…³ç³»ï¼Œå¯èƒ½ä¼šå­˜åœ¨ç­‰å¾…å¯¼è‡´çš„é˜»å¡ï¼Œè¿™å°±æ˜¯â€œå»¶è¿Ÿâ€ï¼Œæ‰€ä»¥HTTP/2çš„å…¶ä»–ç‰¹æ€§å°±æ´¾ä¸Šäº†ç”¨åœºã€‚</p><p>â€œä¼˜å…ˆçº§â€å¯ä»¥è®©å®¢æˆ·ç«¯å‘Šè¯‰æœåŠ¡å™¨ï¼Œå“ªä¸ªæ–‡ä»¶æ›´é‡è¦ï¼Œæ›´éœ€è¦ä¼˜å…ˆä¼ è¾“ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥è°ƒé«˜æµçš„ä¼˜å…ˆçº§ï¼Œåˆç†åœ°åˆ†é…æœ‰é™çš„å¸¦å®½èµ„æºï¼Œè®©é«˜ä¼˜å…ˆçº§çš„HTMLã€å›¾ç‰‡æ›´å¿«åœ°åˆ°è¾¾å®¢æˆ·ç«¯ï¼Œå°½æ—©åŠ è½½æ˜¾ç¤ºã€‚</p><p>â€œæœåŠ¡å™¨æ¨é€â€ä¹Ÿæ˜¯é™ä½å»¶è¿Ÿçš„æœ‰æ•ˆæ‰‹æ®µï¼Œå®ƒä¸éœ€è¦å®¢æˆ·ç«¯é¢„å…ˆè¯·æ±‚ï¼ŒæœåŠ¡å™¨ç›´æ¥å°±å‘ç»™å®¢æˆ·ç«¯ï¼Œè¿™å°±çœå»äº†å®¢æˆ·ç«¯è§£æHTMLå†è¯·æ±‚çš„æ—¶é—´ã€‚</p><h2>HTTP/2çš„ç¼ºç‚¹</h2><p>è¯´äº†ä¸€å¤§å †HTTP/2çš„ä¼˜ç‚¹ï¼Œå†æ¥çœ‹çœ‹å®ƒæœ‰ä»€ä¹ˆç¼ºç‚¹å§ã€‚</p><p>å¬è¿‡ä¸Šä¸€è®²HTTP/3çš„ä»‹ç»ï¼Œä½ å°±çŸ¥é“HTTP/2åœ¨TCPçº§åˆ«è¿˜æ˜¯å­˜åœ¨â€œé˜Ÿå¤´é˜»å¡â€çš„é—®é¢˜ã€‚æ‰€ä»¥ï¼Œå¦‚æœç½‘ç»œè¿æ¥è´¨é‡å·®ï¼Œå‘ç”Ÿä¸¢åŒ…ï¼Œé‚£ä¹ˆTCPä¼šç­‰å¾…é‡ä¼ ï¼Œä¼ è¾“é€Ÿåº¦å°±ä¼šé™ä½ã€‚</p><p>å¦å¤–ï¼Œåœ¨ç§»åŠ¨ç½‘ç»œä¸­å‘ç”ŸIPåœ°å€åˆ‡æ¢çš„æ—¶å€™ï¼Œä¸‹å±‚çš„TCPå¿…é¡»é‡æ–°å»ºè¿ï¼Œè¦å†æ¬¡â€œæ¡æ‰‹â€ï¼Œç»å†â€œæ…¢å¯åŠ¨â€ï¼Œè€Œä¸”ä¹‹å‰è¿æ¥é‡Œç§¯ç´¯çš„HPACKå­—å…¸ä¹Ÿéƒ½æ¶ˆå¤±äº†ï¼Œå¿…é¡»é‡å¤´å¼€å§‹è®¡ç®—ï¼Œå¯¼è‡´å¸¦å®½æµªè´¹å’Œæ—¶å»¶ã€‚</p><p>åˆšæ‰ä¹Ÿè¯´äº†ï¼ŒHTTP/2å¯¹ä¸€ä¸ªåŸŸååªå¼€ä¸€ä¸ªè¿æ¥ï¼Œæ‰€ä»¥ä¸€æ—¦è¿™ä¸ªè¿æ¥å‡ºé—®é¢˜ï¼Œé‚£ä¹ˆæ•´ä¸ªç½‘ç«™çš„ä½“éªŒä¹Ÿå°±å˜å·®äº†ã€‚</p><p>è€Œè¿™äº›æƒ…å†µä¸‹HTTP/1åè€Œä¸ä¼šå—åˆ°å½±å“ï¼Œå› ä¸ºå®ƒâ€œæœ¬æ¥å°±æ…¢â€ï¼Œè€Œä¸”è¿˜ä¼šå¯¹ä¸€ä¸ªåŸŸåå¼€6~8ä¸ªè¿æ¥ï¼Œé¡¶å¤šå…¶ä¸­çš„ä¸€ä¸¤ä¸ªè¿æ¥ä¼šâ€œæ›´æ…¢â€ï¼Œå…¶ä»–çš„è¿æ¥ä¸ä¼šå—åˆ°å½±å“ã€‚</p><h2>åº”è¯¥è¿ç§»åˆ°HTTP/2å—ï¼Ÿ</h2><p>è¯´åˆ°è¿™é‡Œï¼Œä½ å¯¹è¿ç§»åˆ°HTTP/2æ˜¯å¦å·²ç»æœ‰äº†è‡ªå·±çš„åˆ¤æ–­å‘¢ï¼Ÿ</p><p>åœ¨æˆ‘çœ‹æ¥ï¼ŒHTTP/2å¤„äºä¸€ä¸ªç•¥â€œå°´å°¬â€çš„ä½ç½®ï¼Œå‰é¢æœ‰â€œè€å‰è¾ˆâ€HTTP/1ï¼Œåé¢æœ‰â€œæ–°æ¥è€…â€HTTP/3ï¼Œå³æœ‰â€œè€å‰è¾ˆâ€çš„â€œæ‰“å‹â€ï¼Œåˆæœ‰â€œæ–°æ¥è€…â€çš„â€œè¿½èµ¶â€ï¼Œä¹Ÿå°±éš¾æ€ªæ²¡æœ‰è·å¾—å¸‚åœºçš„å¤§åŠ›â€œå¹æ§â€äº†ã€‚</p><p>ä½†è¿™ç»ä¸æ˜¯è¯´HTTP/2â€œä¸€æ— æ˜¯å¤„â€ï¼Œå®é™…ä¸ŠHTTP/2çš„æ€§èƒ½æ”¹è¿›æ•ˆæœæ˜¯éå¸¸æ˜æ˜¾çš„ï¼ŒTop 1000çš„ç½‘ç«™ä¸­å·²ç»æœ‰è¶…è¿‡40%è¿è¡Œåœ¨äº†HTTP/2ä¸Šï¼ŒåŒ…æ‹¬çŸ¥åçš„Appleã€Facebookã€Googleã€Twitterç­‰ç­‰ã€‚ä»…ç”¨äº†å››å¹´çš„æ—¶é—´ï¼ŒHTTP/2å°±æ‹¥æœ‰äº†è¿™ä¹ˆå¤§çš„å¸‚åœºä»½é¢å’Œå·¨å¤´çš„è®¤å¯ï¼Œè¶³ä»¥è¯æ˜å®ƒçš„ä»·å€¼ã€‚</p><p>å› ä¸ºHTTP/2çš„ä¾§é‡ç‚¹æ˜¯â€œæ€§èƒ½â€ï¼Œæ‰€ä»¥â€œæ˜¯å¦è¿ç§»â€å°±éœ€è¦åœ¨è¿™æ–¹é¢è¿›è¡Œè¯„ä¼°ã€‚å¦‚æœç½‘ç«™çš„æµé‡å¾ˆå¤§ï¼Œé‚£ä¹ˆHTTP/2å°±å¯ä»¥å¸¦æ¥å¯è§‚çš„æ”¶ç›Šï¼›åä¹‹ï¼Œå¦‚æœç½‘ç«™æµé‡æ¯”è¾ƒå°ï¼Œé‚£ä¹ˆå‡çº§åˆ°HTTP/2å°±æ²¡æœ‰å¤ªå¤šå¿…è¦äº†ï¼Œåªè¦åˆ©ç”¨ç°æœ‰çš„HTTPå†ä¼˜åŒ–å°±è¶³çŸ£ã€‚</p><p>ä¸è¿‡å¦‚æœä½ æ˜¯æ–°å»ºç½‘ç«™ï¼Œæˆ‘è§‰å¾—å®Œå…¨å¯ä»¥è·³è¿‡HTTP/1ã€HTTPSï¼Œç›´æ¥â€œä¸€æ­¥åˆ°ä½â€ï¼Œä¸ŠHTTP/2ï¼Œè¿™æ ·ä¸ä»…å¯ä»¥è·å¾—æ€§èƒ½æå‡ï¼Œè¿˜å…å»äº†è€æ—§çš„â€œå†å²åŒ…è¢±â€ï¼Œæ—¥åä¹Ÿä¸ä¼šå†æœ‰è¿ç§»çš„çƒ¦æ¼ã€‚</p><p>é¡ºä¾¿å†å¤šå˜´ä¸€å¥ï¼ŒHTTP/2æ¯•ç«Ÿæ˜¯â€œä¸‹ä¸€ä»£â€HTTPåè®®ï¼Œå®ƒçš„å¾ˆå¤šç‰¹æ€§ä¹Ÿå»¶ç»­åˆ°äº†HTTP/3ï¼Œææ—©å‡çº§åˆ°HTTP/2è¿˜å¯ä»¥è®©ä½ åœ¨HTTP/3åˆ°æ¥æ—¶æœ‰æ›´å¤šçš„æŠ€æœ¯ç§¯ç´¯å’Œå‚¨å¤‡ï¼Œä¸è‡³äºè½åäºæ—¶ä»£ã€‚</p><h2>é…ç½®HTTP/2</h2><p>å‡è®¾ä½ å·²ç»å†³å®šè¦ä½¿ç”¨HTTP/2ï¼Œåº”è¯¥å¦‚ä½•æ­å»ºæœåŠ¡å‘¢ï¼Ÿ</p><p>å› ä¸ºHTTP/2â€œäº‹å®ä¸Šâ€æ˜¯åŠ å¯†çš„ï¼Œæ‰€ä»¥å¦‚æœä½ å·²ç»åœ¨â€œå®‰å…¨ç¯‡â€é‡ŒæˆåŠŸè¿ç§»åˆ°äº†HTTPSï¼Œé‚£ä¹ˆåœ¨Nginxé‡Œå¯ç”¨HTTP/2ç®€ç›´å¯ä»¥è¯´æ˜¯â€œä¸è´¹å¹ç°ä¹‹åŠ›â€ï¼Œåªéœ€è¦åœ¨serveré…ç½®é‡Œå†å¤šåŠ ä¸€ä¸ªå‚æ•°å°±å¯ä»¥æå®šäº†ã€‚</p><pre><code>server {\n    listen       443 ssl http2;\n\n\n    server_name  www.xxx.net;\n\n\n    ssl_certificate         xxx.crt;\n    ssl_certificate_key     xxx.key;\n</code></pre><p>æ³¨æ„â€œlistenâ€æŒ‡ä»¤ï¼Œåœ¨â€œsslâ€åé¢å¤šäº†ä¸€ä¸ªâ€œhttp2â€ï¼Œè¿™å°±è¡¨ç¤ºåœ¨443ç«¯å£ä¸Šå¼€å¯äº†SSLåŠ å¯†ï¼Œç„¶åå†å¯ç”¨HTTP/2ã€‚</p><p>é…ç½®æœåŠ¡å™¨æ¨é€ç‰¹æ€§å¯ä»¥ä½¿ç”¨æŒ‡ä»¤â€œhttp2_pushâ€å’Œâ€œhttp2_push_preloadâ€ï¼š</p><pre><code>http2_push         /style/xxx.css;\nhttp2_push_preload on;\n</code></pre><p>ä¸è¿‡å¦‚ä½•åˆç†åœ°é…ç½®æ¨é€æ˜¯ä¸ªéš¾é¢˜ï¼Œå¦‚æœæ¨é€ç»™æµè§ˆå™¨ä¸éœ€è¦çš„èµ„æºï¼Œåè€Œæµªè´¹äº†å¸¦å®½ã€‚</p><p>è¿™æ–¹é¢æš‚æ—¶æ²¡æœ‰ä¸€èˆ¬æ€§çš„åŸåˆ™æŒ‡å¯¼ï¼Œä½ å¿…é¡»æ ¹æ®è‡ªå·±ç½‘ç«™çš„å®é™…æƒ…å†µå»â€œçŒœæµ‹â€å®¢æˆ·ç«¯æœ€éœ€è¦çš„æ•°æ®ã€‚</p><p>ä¼˜åŒ–æ–¹é¢ï¼ŒHTTPSçš„ä¸€äº›ç­–ç•¥ä¾ç„¶é€‚ç”¨ï¼Œæ¯”å¦‚ç²¾ç®€å¯†ç å¥—ä»¶ã€ECCè¯ä¹¦ã€ä¼šè¯å¤ç”¨ã€HSTSå‡å°‘é‡å®šå‘è·³è½¬ç­‰ç­‰ã€‚</p><p>ä½†è¿˜æœ‰ä¸€äº›ä¼˜åŒ–æ‰‹æ®µåœ¨HTTP/2é‡Œæ˜¯ä¸é€‚ç”¨çš„ï¼Œè€Œä¸”è¿˜ä¼šæœ‰åæ•ˆæœï¼Œæ¯”å¦‚è¯´å¸¸è§çš„ç²¾çµå›¾ï¼ˆSpritingï¼‰ã€èµ„æºå†…è”ï¼ˆinliningï¼‰ã€åŸŸååˆ†ç‰‡ï¼ˆShardingï¼‰ç­‰ï¼Œè‡³äºåŸå› æ˜¯ä»€ä¹ˆï¼Œæˆ‘æŠŠå®ƒç•™ç»™ä½ è‡ªå·±å»æ€è€ƒï¼ˆæç¤ºï¼Œä¸ç¼“å­˜æœ‰å…³ï¼‰ã€‚</p><p>è¿˜è¦æ³¨æ„ä¸€ç‚¹ï¼ŒHTTP/2é»˜è®¤å¯ç”¨headerå‹ç¼©ï¼ˆHPACKï¼‰ï¼Œä½†å¹¶æ²¡æœ‰é»˜è®¤å¯ç”¨bodyå‹ç¼©ï¼Œæ‰€ä»¥ä¸è¦å¿˜äº†åœ¨Nginxé…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šâ€œgzipâ€æŒ‡ä»¤ï¼Œå‹ç¼©HTMLã€JSç­‰æ–‡æœ¬æ•°æ®ã€‚</p><h2>åº”ç”¨å±‚åè®®åå•†ï¼ˆALPNï¼‰</h2><p>æœ€åè¯´ä¸€ä¸‹HTTP/2çš„â€œæœåŠ¡å‘ç°â€å§ã€‚</p><p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œåœ¨URIé‡Œç”¨çš„éƒ½æ˜¯HTTPSåè®®åï¼Œæ²¡æœ‰ç‰ˆæœ¬æ ‡è®°ï¼Œæµè§ˆå™¨æ€ä¹ˆçŸ¥é“æœåŠ¡å™¨æ”¯æŒHTTP/2å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸Šæ¥å°±èƒ½ç”¨HTTP/2ï¼Œè€Œä¸æ˜¯ç”¨HTTP/1é€šä¿¡å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆåœ¨TLSçš„æ‰©å±•é‡Œï¼Œæœ‰ä¸€ä¸ªå«â€œ<strong>ALPN</strong>â€ï¼ˆApplication Layer Protocol Negotiationï¼‰çš„ä¸œè¥¿ï¼Œç”¨æ¥ä¸æœåŠ¡å™¨å°±TLSä¸Šè·‘çš„åº”ç”¨åè®®è¿›è¡Œâ€œåå•†â€ã€‚</p><p>å®¢æˆ·ç«¯åœ¨å‘èµ·â€œClient Helloâ€æ¡æ‰‹çš„æ—¶å€™ï¼Œåé¢ä¼šå¸¦ä¸Šä¸€ä¸ªâ€œALPNâ€æ‰©å±•ï¼Œé‡Œé¢æŒ‰ç…§ä¼˜å…ˆé¡ºåºåˆ—å‡ºå®¢æˆ·ç«¯æ”¯æŒçš„åº”ç”¨åè®®ã€‚</p><p>å°±åƒä¸‹å›¾è¿™æ ·ï¼Œæœ€ä¼˜å…ˆçš„æ˜¯â€œh2â€ï¼Œå…¶æ¬¡æ˜¯â€œhttp/1.1â€ï¼Œä»¥å‰è¿˜æœ‰â€œspdyâ€ï¼Œä»¥åè¿˜å¯èƒ½ä¼šæœ‰â€œh3â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/d8/b0/d8f8606948bbd63c31466e464c1956b0.png?wh=1233*545\" alt=\"\"></p><p>æœåŠ¡å™¨çœ‹åˆ°ALPNæ‰©å±•ä»¥åå°±å¯ä»¥ä»åˆ—è¡¨é‡Œé€‰æ‹©ä¸€ç§åº”ç”¨åè®®ï¼Œåœ¨â€œServer Helloâ€é‡Œä¹Ÿå¸¦ä¸Šâ€œALPNâ€æ‰©å±•ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æœåŠ¡å™¨å†³å®šä½¿ç”¨çš„æ˜¯å“ªä¸€ç§ã€‚å› ä¸ºæˆ‘ä»¬åœ¨Nginxé…ç½®é‡Œä½¿ç”¨äº†HTTP/2åè®®ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå®ƒé€‰æ‹©çš„å°±æ˜¯â€œh2â€ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/19/a7/19be1138574589458c96040e1a23b3a7.png?wh=1197*361\" alt=\"\"></p><p>è¿™æ ·åœ¨TLSæ¡æ‰‹ç»“æŸåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°±é€šè¿‡â€œALPNâ€å®Œæˆäº†åº”ç”¨å±‚çš„åè®®åå•†ï¼Œåé¢å°±å¯ä»¥ä½¿ç”¨HTTP/2é€šä¿¡äº†ã€‚</p><h2>å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬è®¨è®ºäº†æ˜¯å¦åº”è¯¥è¿ç§»åˆ°HTTP/2ï¼Œè¿˜æœ‰åº”è¯¥å¦‚ä½•è¿ç§»åˆ°HTTP/2ã€‚</p><ol>\n<li><span class=\"orange\">HTTP/2å®Œå…¨å…¼å®¹HTTP/1ï¼Œæ˜¯â€œæ›´å®‰å…¨çš„HTTPã€æ›´å¿«çš„HTTPSâ€ï¼Œå¤´éƒ¨å‹ç¼©ã€å¤šè·¯å¤ç”¨ç­‰æŠ€æœ¯å¯ä»¥å……åˆ†åˆ©ç”¨å¸¦å®½ï¼Œé™ä½å»¶è¿Ÿï¼Œä»è€Œå¤§å¹…åº¦æé«˜ä¸Šç½‘ä½“éªŒï¼›</span></li>\n<li><span class=\"orange\">TCPåè®®å­˜åœ¨â€œé˜Ÿå¤´é˜»å¡â€ï¼Œæ‰€ä»¥HTTP/2åœ¨å¼±ç½‘æˆ–è€…ç§»åŠ¨ç½‘ç»œä¸‹çš„æ€§èƒ½è¡¨ç°ä¼šä¸å¦‚HTTP/1ï¼›</span></li>\n<li><span class=\"orange\">è¿ç§»åˆ°HTTP/2è‚¯å®šä¼šæœ‰æ€§èƒ½æå‡ï¼Œä½†é«˜æµé‡ç½‘ç«™æ•ˆæœä¼šæ›´æ˜¾è‘—ï¼›</span></li>\n<li><span class=\"orange\">å¦‚æœå·²ç»å‡çº§åˆ°äº†HTTPSï¼Œé‚£ä¹ˆå†å‡çº§åˆ°HTTP/2ä¼šå¾ˆç®€å•ï¼›</span></li>\n<li><span class=\"orange\">TLSåè®®æä¾›â€œALPNâ€æ‰©å±•ï¼Œè®©å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åå•†ä½¿ç”¨çš„åº”ç”¨å±‚åè®®ï¼Œâ€œå‘ç°â€HTTP/2æœåŠ¡ã€‚</span></li>\n</ol><h2>è¯¾ä¸‹ä½œä¸š</h2><ol>\n<li>å’Œâ€œå®‰å…¨ç¯‡â€çš„ç¬¬29è®²ç±»ä¼¼ï¼Œç»“åˆè‡ªå·±çš„å®é™…æƒ…å†µï¼Œåˆ†æä¸€ä¸‹æ˜¯å¦åº”è¯¥è¿ç§»åˆ°HTTP/2ï¼Œæœ‰æ²¡æœ‰éš¾ç‚¹ï¼Ÿ</li>\n<li>ç²¾çµå›¾ï¼ˆSpritingï¼‰ã€èµ„æºå†…è”ï¼ˆinliningï¼‰ã€åŸŸååˆ†ç‰‡ï¼ˆShardingï¼‰è¿™äº›æ‰‹æ®µä¸ºä»€ä¹ˆä¼šå¯¹HTTP/2çš„æ€§èƒ½ä¼˜åŒ–é€ æˆåæ•ˆæœå‘¢ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ æŠŠè‡ªå·±çš„å­¦ä¹ ä½“ä¼šå†™åœ¨ç•™è¨€åŒºï¼Œä¸æˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/fb/55/fb986a7575ec902c86c17a937dbca655.png?wh=1769*3444\" alt=\"unpreview\"></p><p></p>","comments":[{"had_liked":false,"id":122951,"user_name":"æˆ‘è¡Œæˆ‘ç´ ","can_delete":false,"product_type":"c1","uid":1224678,"ip_address":"","ucode":"4C69542FAB0671","user_header":"https://static001.geekbang.org/account/avatar/00/12/af/e6/9c77acff.jpg","comment_is_top":false,"comment_ctime":1565578976,"is_pvip":false,"replies":[{"id":"45187","content":"å›ç­”çš„éå¸¸å¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1565580797,"ip_address":"","comment_id":122951,"utype":1}],"discussion_count":1,"race_medal":0,"score":"207724009184","product_id":100029001,"comment_content":"2.å› ä¸ºHTTP&#47;2ä¸­ä½¿ç”¨å°é¢—ç²’åŒ–çš„èµ„æºï¼Œä¼˜åŒ–äº†ç¼“å­˜ï¼Œè€Œä½¿ç”¨ç²¾çµå›¾å°±ç›¸å½“äºä¼ è¾“å¤§æ–‡ä»¶ï¼Œä½†æ˜¯å¤§æ–‡ä»¶ä¼šå»¶è¿Ÿå®¢æˆ·ç«¯çš„å¤„ç†æ‰§è¡Œï¼Œå¹¶ä¸”ç¼“å­˜å¤±æ•ˆçš„å¼€é”€å¾ˆæ˜‚è´µï¼Œå¾ˆå°‘æ•°é‡çš„æ•°æ®æ›´æ–°å°±ä¼šä½¿æ•´ä¸ªç²¾çµå›¾å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ä¸‹è½½(http1ä¸­ä½¿ç”¨ç²¾çµå›¾æ˜¯ä¸ºäº†å‡å°‘è¯·æ±‚)ï¼›<br>HTTP1ä¸­ä½¿ç”¨å†…è”èµ„æºä¹Ÿæ˜¯ä¸ºäº†å‡å°‘è¯·æ±‚ï¼Œå†…è”èµ„æºæ²¡æœ‰åŠæ³•ç‹¬ç«‹ç¼“å­˜ï¼Œç ´åäº†HTTP&#47;2çš„å¤šè·¯å¤ç”¨å’Œä¼˜å…ˆçº§ç­–ç•¥ï¼›<br>åŸŸååˆ†ç‰‡åœ¨HTTP1ä¸­æ˜¯ä¸ºäº†çªç ´æµè§ˆå™¨æ¯ä¸ªåŸŸåä¸‹åŒæ—¶è¿æ¥æ•°ï¼Œä½†æ˜¯è¿™åœ¨HTTP&#47;2ä¸­ä½¿ç”¨å¤šè·¯å¤ç”¨è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœä½¿ç”¨åŸŸååˆ†ç‰‡åè€Œä¼šé™åˆ¶HTTP2çš„è‡ªç”±å‘æŒ¥","like_count":48,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462472,"discussion_content":"å›ç­”çš„éå¸¸å¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565580797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123207,"user_name":"å‰ç«¯è¥¿ç“œå“¥","can_delete":false,"product_type":"c1","uid":1248576,"ip_address":"","ucode":"150130C34CD1C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","comment_is_top":false,"comment_ctime":1565626470,"is_pvip":false,"replies":[{"id":"45270","content":"å›ç­”çš„å¾ˆå¥½ã€‚<br><br>å¯¹äºç¬¬ä¸‰ç‚¹ï¼ŒåŸŸååˆ†ç‰‡å¯¹äºhttp&#47;2ä¼šå¢åŠ è¿æ¥æˆæœ¬ã€HPackå­—å…¸ã€æ…¢å¯åŠ¨ç­‰å¤šä¸ªä¸åˆ©å› ç´ ï¼Œæ‰€ä»¥åº”è¯¥å°‘ç”¨ã€‚<br><br>æœ€åçš„ç»¼åˆç¯‡è¿˜ä¼šå†è®²ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1565658288,"ip_address":"","comment_id":123207,"utype":1}],"discussion_count":2,"race_medal":0,"score":"70285103206","product_id":100029001,"comment_content":"è¯¾ä¸‹ä½œä¸šçš„ç¬¬äºŒé¢˜çš„ä¸ªäººç†è§£ã€‚<br><br>é—®ï¼š ç²¾çµå›¾ï¼ˆSpritingï¼‰ã€èµ„æºå†…è”ï¼ˆinliningï¼‰ã€åŸŸååˆ†ç‰‡ï¼ˆShardingï¼‰è¿™äº›æ‰‹æ®µä¸ºä»€ä¹ˆä¼šå¯¹ HTTP&#47;2 çš„æ€§èƒ½ä¼˜åŒ–é€ æˆåæ•ˆæœå‘¢ï¼Ÿ<br><br>ç­”ï¼šä¸»è¦æ˜¯ç¼“å­˜å’Œè¯·æ±‚é€Ÿåº¦çš„åŸå› ã€‚ä½¿ç”¨ HTTP&#47;2 åï¼Œè¯·æ±‚å°±å¯ä»¥åšåˆ°ä¹±åºæ”¶å‘ã€å¤šè·¯å¤ç”¨ã€‚<br><br>1. å›¾ç‰‡å°±ç®—å¾ˆå¤šï¼Œåœ¨ HTTP&#47;2 ä¹Ÿå¯ä»¥åšåˆ° â€œå¹¶å‘â€ã€‚ä½¿ç”¨äº†ç²¾çµå›¾çš„è¯ï¼Œé¦–å…ˆæ–‡ä»¶å˜å¤§äº†ï¼Œåœ¨ HTTP&#47;2 ä¸­ç›¸æ¯”åˆ†å¼€è¯·æ±‚è¦æ›´æ…¢ï¼Œè€Œä¸”ä¸åˆ©äºç¼“å­˜ï¼ˆæ¯”å¦‚ä¿®æ”¹äº†å…¶ä¸­å‡ ä¸ªå›¾ç‰‡ï¼‰ã€‚<br><br>2. èµ„æºå†…è”ï¼Œæ˜¯æŒ‡å°†ä¸€ä¸ªèµ„æºä½œä¸ºå¦ä¸€ä¸ªèµ„æºçš„ä¸€éƒ¨åˆ†ï¼Œä½¿äºŒè€…ä½œä¸ºä¸€ä¸ªæ•´ä½“çš„èµ„æºæ¥è¯·æ±‚ï¼Œæ¯”å¦‚ HTML æ–‡ä»¶é‡ŒåµŒå…¥ base64 çš„å›¾ç‰‡ï¼Œè¯¥æ–¹æ¡ˆæ˜¯ä¸ºäº†å‡å°‘ HTTP&#47;1 ä¸‹çš„è¯·æ±‚æ•°ï¼ŒåŠ å¿«ç½‘é¡µå“åº”æ—¶é—´ã€‚HTTP&#47;2 ä¸å­˜åœ¨ç½‘é¡µåŠ è½½å˜æ…¢çš„æƒ…å†µï¼Œè€Œä¸”ä¸å†…è”çš„è¯ï¼Œèƒ½æ›´å¥½åœ°å‘æŒ¥ç¼“å­˜çš„ä¼˜åŠ¿ï¼ˆæ¯”å¦‚å›¾ç‰‡æ˜¯å›ºå®šçš„ï¼Œä½† HTML æ˜¯åŠ¨æ€çš„ï¼‰ã€‚<br><br>3. åŸŸååˆ†ç‰‡ã€‚è¿™ä¸ªä¸æ˜¯å¾ˆæ‡‚ï¼Œè€å¸ˆåœ¨æœ¬æ–‡ä¹Ÿè¯´åˆ°ï¼š â€œHTTP&#47;2 å¯¹ä¸€ä¸ªåŸŸååªå¼€ä¸€ä¸ªè¿æ¥ï¼Œæ‰€ä»¥ä¸€æ—¦è¿™ä¸ªè¿æ¥å‡ºé—®é¢˜ï¼Œé‚£ä¹ˆæ•´ä¸ªç½‘ç«™çš„ä½“éªŒä¹Ÿå°±å˜å·®äº†â€ã€‚è¿™ä¹ˆæ¥è¯´ï¼ŒåŸŸååˆ†ç‰‡å»ºç«‹å¤šä¸ªè¿æ¥ï¼Œè²Œä¼¼å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿå¦‚æœä¸è€ƒè™‘è¿™ä¸ªé—®é¢˜çš„è¯ï¼Œå› ä¸ºå¤šè·¯å¤ç”¨çš„åŸå› ï¼Œå°±ç®—å¤šäº†ä¸€ä¸ªè¿æ¥ï¼Œä¹Ÿåªæ˜¯å˜æˆäº†ä¸¤ä¸ªå¤šè·¯å¤ç”¨ï¼Œå¹¶æ²¡æœ‰æé«˜å¤šå°‘æ•ˆç‡ï¼Œå€’ä¸æ˜¯å¾ˆæœ‰å¿…è¦ï¼Œè€Œä¸”ä»£ç å®ç°ä¹Ÿä¼šæ¯”è¾ƒéº»çƒ¦ã€‚","like_count":16,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462581,"discussion_content":"å›ç­”çš„å¾ˆå¥½ã€‚\n\nå¯¹äºç¬¬ä¸‰ç‚¹ï¼ŒåŸŸååˆ†ç‰‡å¯¹äºhttp/2ä¼šå¢åŠ è¿æ¥æˆæœ¬ã€HPackå­—å…¸ã€æ…¢å¯åŠ¨ç­‰å¤šä¸ªä¸åˆ©å› ç´ ï¼Œæ‰€ä»¥åº”è¯¥å°‘ç”¨ã€‚\n\næœ€åçš„ç»¼åˆç¯‡è¿˜ä¼šå†è®²ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565658288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1006424,"avatar":"","nickname":"é—¨çª—å°äºŒ","note":"","ucode":"0BF3780C247F22","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582766,"discussion_content":"m","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659666151,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"ç¦å»º"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123450,"user_name":"ä¸¶æ™¯","can_delete":false,"product_type":"c1","uid":1079269,"ip_address":"","ucode":"128AAC7A93E641","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/e5/8b5844df.jpg","comment_is_top":false,"comment_ctime":1565678908,"is_pvip":false,"replies":[{"id":"45302","content":"åŸºæœ¬æ­£ç¡®ã€‚<br><br>http&#47;1çš„é—®é¢˜ä¸€ä¸ªæ˜¯é˜Ÿå¤´é˜»å¡ï¼Œå¦ä¸€ä¸ªæ˜¯æŠ¥æ–‡å¤´æ•°æ®å†—ä½™ï¼Œå¤šä¸ªå°è¯·æ±‚ä¼šæµªè´¹å¸¦å®½ï¼Œæ‰€ä»¥èµ„æºåˆå¹¶ã€å†…è”å°±å¾ˆæœ‰å¿…è¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1565685288,"ip_address":"","comment_id":123450,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35925417276","product_id":100029001,"comment_content":"è€å¸ˆè¿™ä¹ˆç†è§£æœ‰é”™å—ï¼Ÿ<br>http1 æœ€å¥½æŠŠå¤šä¸ªè¯·æ±‚åˆæˆä¸€ä¸ªè¯·æ±‚ï¼ˆæ¯”å¦‚ç²¾çµå›¾ï¼Œèµ„æºå†…è”ï¼ŒåŸŸååˆ†ç‰‡ç­‰ï¼‰ï¼ŒåŸå› æ˜¯ http1 å­˜åœ¨ http çš„é˜Ÿå¤´é˜»å¡ï¼Œæ¯æ¬¡å‘é€æ–°çš„è¯·æ±‚éƒ½åˆéœ€è¦å¸¦ä¸Šæ²¡æœ‰å‹ç¼©çš„è¯·æ±‚å¤´ï¼ŒDNSåŠæ—¶æœ‰ç¼“å­˜ä¹Ÿéœ€è¦æŸ¥æ‰¾ï¼Œè€Œä¸”æœ‰æ—¶å€™ä¼šè¢«æ¸…ç©ºã€‚http2 æŸäº›æƒ…å†µæ¯”å¦‚ç²¾çµå›¾ï¼Œèµ„æºå†…è”å°±ä¸éœ€è¦åˆæˆä¸€ä¸ªè¯·æ±‚ï¼Œå› ä¸º http2 æ˜¯åŸºäºæµå’Œå¸§çš„ï¼Œæ²¡æœ‰äº† http1 çš„é˜Ÿå¤´é˜»å¡ï¼Œå¯ä»¥å¹¶å‘å¤šä¸ªè¯·æ±‚ï¼Œè€Œä¸” http2 çš„è¯·æ±‚å¤´ä½¿ç”¨äº† hpage å‹ç¼©ç®—æ³•ï¼Œä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶è¯·æ±‚å¤´çš„é•¿åº¦ä¼šéå¸¸çŸ­ï¼ˆæ¯”å¦‚ 65 ä¸€ä¸ªæ•°å­—å°±èƒ½è¡¨ç¤ºä»¥å‰çš„ä¸€é•¿ä¸² UAï¼‰ã€‚è€Œä¸”è¿˜åŠ å…¥äº†æœåŠ¡å™¨æ¨é€ï¼ŒæœåŠ¡å™¨ä¼šé¢„å…ˆæŠŠå¯èƒ½éœ€è¦çš„èµ„æºå…ˆæ¨é€ç»™ä½ ã€‚å¦‚æœè¿˜æ˜¯ä½¿ç”¨ä¸€ä¸ªè¯·æ±‚ï¼Œå¯èƒ½ä¼šå› ä¸ºåªæ›´æ–°ä¸€ç‚¹ç‚¹èµ„æºè€Œæ›´æ–°æ•´ä¸ªç¼“å­˜ï¼ˆæ¯”å¦‚æ›´æ–°ç²¾çµå›¾æˆ–èµ„æºå†…è”å…¶ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼‰ã€‚","like_count":8,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462681,"discussion_content":"åŸºæœ¬æ­£ç¡®ã€‚\n\nhttp/1çš„é—®é¢˜ä¸€ä¸ªæ˜¯é˜Ÿå¤´é˜»å¡ï¼Œå¦ä¸€ä¸ªæ˜¯æŠ¥æ–‡å¤´æ•°æ®å†—ä½™ï¼Œå¤šä¸ªå°è¯·æ±‚ä¼šæµªè´¹å¸¦å®½ï¼Œæ‰€ä»¥èµ„æºåˆå¹¶ã€å†…è”å°±å¾ˆæœ‰å¿…è¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565685288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123023,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1565593321,"is_pvip":false,"replies":[{"id":"45199","content":"è¿ç§»åˆ°http&#47;2è¿˜éœ€è¦è€ƒè™‘è¿ç»´ã€éƒ¨ç½²ç­‰æˆæœ¬ï¼ŒæŠ€æœ¯ä¸Šçš„éš¾åº¦å€’æ˜¯ä¸å¤§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1565599897,"ip_address":"","comment_id":123023,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23040429801","product_id":100029001,"comment_content":"åˆ†æä¸€ä¸‹æ˜¯å¦åº”è¯¥è¿ç§»åˆ° HTTP&#47;2ï¼Œæœ‰æ²¡æœ‰éš¾ç‚¹ï¼Ÿ<br>ä»æ…¢ã€è´µã€éš¾ä¸‰ä¸ªè§’åº¦æ¥åˆ†æ<br>é€Ÿåº¦å¿«ï¼Œå…è´¹ï¼Œéƒ¨ç½²ç®€å•ï¼Œå…·ä½“åˆ†æè¿‡ç¨‹å°±ä¸å†™äº†ï¼Œæˆ‘è§‰å¾—åº”è¯¥ç«‹å³è¿ç§»åˆ° HTTP&#47;2ã€‚<br><br>ç²¾çµå›¾ï¼ˆSpritingï¼‰ã€èµ„æºå†…è”ï¼ˆinliningï¼‰ã€åŸŸååˆ†ç‰‡ï¼ˆShardingï¼‰è¿™äº›æ‰‹æ®µä¸ºä»€ä¹ˆä¼šå¯¹ HTTP&#47;2 çš„æ€§èƒ½ä¼˜åŒ–é€ æˆåæ•ˆæœå‘¢ï¼Ÿ<br>ç²¾çµå›¾ã€èµ„æºå†…è”å¯ä»¥å‡å°‘HTTPè¯·æ±‚æ•°ä½†åŠ å¤§å•ä¸ªè¯·æ±‚çš„å¤§å°ã€åŸŸååˆ†ç‰‡ä¸ºäº†çªç ´ä¸åŒä¸€åŸŸåæœ€å¤šå»ºç«‹6ä¸ªè¿æ¥çš„é™åˆ¶ï¼ŒHTTP&#47;2ä½¿ç”¨æµå¹¶å‘è¯·æ±‚å“åº”å¤šä¸ªèµ„æºï¼Œå®Œå…¨ä¸éœ€è¦æ­¤ä¼˜åŒ–ï¼Œç›¸åè¿˜ä¼šå¤šå»ºç«‹TCPè¿æ¥æµªè´¹èµ„æºã€‚<br>","like_count":5,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462503,"discussion_content":"è¿ç§»åˆ°http/2è¿˜éœ€è¦è€ƒè™‘è¿ç»´ã€éƒ¨ç½²ç­‰æˆæœ¬ï¼ŒæŠ€æœ¯ä¸Šçš„éš¾åº¦å€’æ˜¯ä¸å¤§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565599897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123017,"user_name":"é˜¿é”‹","can_delete":false,"product_type":"c1","uid":1127761,"ip_address":"","ucode":"7AF449ABA89242","user_header":"https://static001.geekbang.org/account/avatar/00/11/35/51/c616f95a.jpg","comment_is_top":false,"comment_ctime":1565591868,"is_pvip":false,"replies":[{"id":"45198","content":"<br>1.å¯ä»¥å‚è€ƒä¸€ä¸‹ç¬¬17è®²ï¼Œé‡Œé¢è§£é‡Šäº†åŸŸååˆ†ç‰‡ã€‚<br><br>2.èµ„æºå†…è”ï¼Œå°±æ˜¯æŠŠæ¯”è¾ƒå°çš„å›¾ç‰‡ã€jsç­‰èµ„æºç¼–ç æˆbase64ï¼Œä»¥æ–‡æœ¬çš„å½¢å¼åµŒå…¥è¿›htmlï¼Œè¿™æ ·é€šè¿‡ä¸€æ¬¡è¯·æ±‚å°±å¯ä»¥ä¸‹è½½åˆ°æ›´å¤šçš„æ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1565593608,"ip_address":"","comment_id":123017,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14450493756","product_id":100029001,"comment_content":"HTTP&#47;1 é‡Œå®ç°äº†é•¿è¿æ¥ï¼Œä¸ºå•¥è¿˜ä¼šå¯¹ä¸€ä¸ªåŸŸåå¼€ 6~8 ä¸ªè¿æ¥ï¼Œæ˜¯ä¸æ˜¯httpä¸ºäº†è§£å†³httpè‡ªèº«çš„å¯¹å¤´é˜»å¡ï¼Œä¸è¦è®©httpç­‰å¾…å®Œå“åº”ä¹‹åï¼Œæ‰å‘å‡ºä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œè€Œæ‰“å¼€å¤šä¸ªè¿æ¥ï¼Ÿè¿™äº›æ‰“å¼€äº†çš„è¿æ¥ä¼šå¾—åˆ°é‡å¤åˆ©ç”¨ï¼Œå°±æ˜¯ä¸€æ®µæ—¶é—´å†…ä¸ä¼šå…³é—­ï¼Ÿè¿™æ ·æ‰ä¼šæ¯”HTTPï¼ˆçŸ­è¿æ¥ï¼‰é«˜æ•ˆï¼Ÿ<br>å¯ä»¥è§£æä¸€ä¸‹å†…è”èµ„æºï¼ŒåŸŸååˆ†ç‰‡ï¼Œä»€ä¹ˆæ„æ€ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462498,"discussion_content":"\n1.å¯ä»¥å‚è€ƒä¸€ä¸‹ç¬¬17è®²ï¼Œé‡Œé¢è§£é‡Šäº†åŸŸååˆ†ç‰‡ã€‚\n\n2.èµ„æºå†…è”ï¼Œå°±æ˜¯æŠŠæ¯”è¾ƒå°çš„å›¾ç‰‡ã€jsç­‰èµ„æºç¼–ç æˆbase64ï¼Œä»¥æ–‡æœ¬çš„å½¢å¼åµŒå…¥è¿›htmlï¼Œè¿™æ ·é€šè¿‡ä¸€æ¬¡è¯·æ±‚å°±å¯ä»¥ä¸‹è½½åˆ°æ›´å¤šçš„æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565593608,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145184,"user_name":"çœ‹ï¼Œæœ‰åªçŒª","can_delete":false,"product_type":"c1","uid":1137727,"ip_address":"","ucode":"F9BB302BC71CE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/5c/3f/34e5c750.jpg","comment_is_top":false,"comment_ctime":1572227064,"is_pvip":true,"replies":[{"id":"56003","content":"æ˜¯çš„ï¼Œè¿™ä¸ªmagicçš„ç¡®æ˜¯æ˜¾å¾—æœ‰ç‚¹â€œå¤šä½™â€ï¼Œä½†åè®®æ ‡å‡†é‡Œå°±æ˜¯è¿™ä¹ˆè§„å®šçš„ï¼Œåªèƒ½éµå®ˆã€‚<br><br>åœ¨rfcé‡Œï¼Œå¯¹è¿™ä¸ªçš„è¯´æ˜æ˜¯å¯¹åè®®çš„æœ€ç»ˆç¡®è®¤ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªç®€å•çš„æ ¡éªŒæœºåˆ¶ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆæ˜¯æ­£å¼æ”¶å‘æ•°æ®å‰çš„â€œæ¡æ‰‹â€ï¼Œç¡®è®¤æ˜¯http&#47;2è€Œä¸æ˜¯å…¶ä»–çš„åè®®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1572232741,"ip_address":"","comment_id":145184,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10162161656","product_id":100029001,"comment_content":"è€å¸ˆï¼Œæˆ‘è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶é€šè¿‡ALPNåå•†äº†é€šä¿¡é‡‡ç”¨çš„åè®®ï¼Œé‚£å»ºç«‹å¥½TLSè¿æ¥åï¼Œåç»­æ“ä½œç›´æ¥é‡‡ç”¨HTTP2å³å¯ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦å‘é€Magicå‘¢","like_count":2,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472282,"discussion_content":"æ˜¯çš„ï¼Œè¿™ä¸ªmagicçš„ç¡®æ˜¯æ˜¾å¾—æœ‰ç‚¹â€œå¤šä½™â€ï¼Œä½†åè®®æ ‡å‡†é‡Œå°±æ˜¯è¿™ä¹ˆè§„å®šçš„ï¼Œåªèƒ½éµå®ˆã€‚\n\nåœ¨rfcé‡Œï¼Œå¯¹è¿™ä¸ªçš„è¯´æ˜æ˜¯å¯¹åè®®çš„æœ€ç»ˆç¡®è®¤ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªç®€å•çš„æ ¡éªŒæœºåˆ¶ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆæ˜¯æ­£å¼æ”¶å‘æ•°æ®å‰çš„â€œæ¡æ‰‹â€ï¼Œç¡®è®¤æ˜¯http/2è€Œä¸æ˜¯å…¶ä»–çš„åè®®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572232741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":339127,"user_name":"çƒé­","can_delete":false,"product_type":"c1","uid":1204752,"ip_address":"","ucode":"B369FD836310EE","user_header":"https://static001.geekbang.org/account/avatar/00/12/62/10/c1b4770d.jpg","comment_is_top":false,"comment_ctime":1647933215,"is_pvip":true,"replies":[{"id":"124067","content":"æˆ‘æ˜¯åšç ”å‘çš„ï¼Œå¯¹äºè¿™ç§æ¯”è¾ƒå¤æ‚çš„åº”ç”¨åœºæ™¯æ²¡æœ‰å¤ªå¤šå®é™…ç»éªŒï¼Œè¿˜æ˜¯å¾—æ ¹æ®è‡ªå·±çš„æƒ…å†µå»æ‘¸ç´¢ï¼Œä¸å¤ªå¯èƒ½ç»™å‡ºæ™®é€‚çš„è§£å†³æ–¹æ¡ˆï¼ŒæŠ±æ­‰äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1648081215,"ip_address":"","comment_id":339127,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5942900511","product_id":100029001,"comment_content":"è€å¸ˆä½ å¥½ï¼Œç›®å‰æˆ‘ä»¬å›¢é˜Ÿæ­£åœ¨å°è¯•å‡çº§HTTP&#47;2åè®®ï¼Œè€ƒè™‘åˆ°åŸåŸŸåä¸‹æœ‰å¾ˆå¤šå…¶å®ƒå›¢é˜Ÿçš„æ¥å£æœåŠ¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ–°çš„åŸŸåæ¥å‡çº§HTTP&#47;2ï¼Œç„¶åæŠŠæ¥å£é€æ­¥è¿ç§»è¿‡å»ã€‚æœ€è¿‘æ‰“ç®—è¿ç§»ä¸€ä¸ªæµé‡å¾ˆå¤§çš„æ¥å£å¤§æ¦‚2000qpsï¼Œå‰æœŸå¯¹å…¶åšäº†5%å°æµé‡å®éªŒï¼Œä½†æ˜¯ç»“æœå¾ˆä¸ç†æƒ³ï¼Œæ€§èƒ½å¹¶æ²¡æœ‰æå‡åè€ŒåŠ£åŒ–äº†ã€‚è·‘äº†ä¸€ä¸‹æ¯ä¸ªé˜¶æ®µçš„è€—æ—¶ï¼Œå‘ç°æœåŠ¡ç«¯è€—æ—¶å¤§æ¦‚æœ‰15-20msçš„ä¸‹é™ï¼ˆæ¥å£å¹³å‡è€—æ—¶900msï¼‰ï¼Œtcpæœ‰10msçš„ä¸‹é™ï¼Œsslä¹Ÿæœ‰5-10msçš„ä¸‹é™ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¥½çš„ä¼˜åŒ–å‡çº§å»ºè®®å˜›ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558061,"discussion_content":"æˆ‘æ˜¯åšç ”å‘çš„ï¼Œå¯¹äºè¿™ç§æ¯”è¾ƒå¤æ‚çš„åº”ç”¨åœºæ™¯æ²¡æœ‰å¤ªå¤šå®é™…ç»éªŒï¼Œè¿˜æ˜¯å¾—æ ¹æ®è‡ªå·±çš„æƒ…å†µå»æ‘¸ç´¢ï¼Œä¸å¤ªå¯èƒ½ç»™å‡ºæ™®é€‚çš„è§£å†³æ–¹æ¡ˆï¼ŒæŠ±æ­‰äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648081215,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":204027,"user_name":"æ˜æœˆ","can_delete":false,"product_type":"c1","uid":1476588,"ip_address":"","ucode":"D3C649B954A519","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJayib1ZcRfOaoLsdsWZokiaO5tLAdC4uNAicQJRIVXrz9fIchib7QwXibnRrsJaoh5TUlia7faUf36g8Bw/132","comment_is_top":false,"comment_ctime":1586322134,"is_pvip":false,"replies":[{"id":"76274","content":"ä¸å®Œå…¨å¯¹ã€‚http&#47;2ä¼ è¾“å¤§æ–‡ä»¶ä¸æ˜¯é—®é¢˜ï¼Œé—®é¢˜åœ¨äºè¿™ä¸€ä¸ªå¤§æ–‡ä»¶é‡ŒåŒ…å«äº†å¾ˆå¤šçš„å°æ–‡ä»¶ï¼Œç¼“å­˜å¤±æ•ˆåé‡ä¼ ä¼šæµªè´¹å¸¦å®½ï¼Œä¸åˆ’ç®—ã€‚<br><br>è¿™ä¸ªä¸è¿æ¥æ²¡æœ‰å…³ç³»ï¼Œhttp&#47;2åœ¨ä¸€ä¸ªè¿æ¥ä¸Šå¯ä»¥å¼€å¤šä¸ªæµï¼Œä¸æ˜¯ç‹¬å ä¼ è¾“æ•°æ®çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1586324053,"ip_address":"","comment_id":204027,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5881289430","product_id":100029001,"comment_content":"ç²¾çµå›¾ã€èµ„æºå†…è”åœ¨http2æ•ˆæœä¸å¥½ ç»ˆæåŸå› ä¹Ÿè¿˜æ˜¯http2åªèƒ½å»ºç«‹ä¸€ä¸ªè¿æ¥ è¿™æ ·ä¸€ä¸ªå¤§æ–‡ä»¶ä¼ è¾“ä¼šå ç”¨è¿™å”¯ä¸€çš„è¿æ¥ ç¼“å­˜å¤±æ•ˆååˆè¦æ›´æ–°å ç”¨è¿™ä¸ªè¿æ¥æ›´æ–°èµ„æº æˆ‘ç†è§£çš„å¯¹å—","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":491045,"discussion_content":"ä¸å®Œå…¨å¯¹ã€‚http/2ä¼ è¾“å¤§æ–‡ä»¶ä¸æ˜¯é—®é¢˜ï¼Œé—®é¢˜åœ¨äºè¿™ä¸€ä¸ªå¤§æ–‡ä»¶é‡ŒåŒ…å«äº†å¾ˆå¤šçš„å°æ–‡ä»¶ï¼Œç¼“å­˜å¤±æ•ˆåé‡ä¼ ä¼šæµªè´¹å¸¦å®½ï¼Œä¸åˆ’ç®—ã€‚\n\nè¿™ä¸ªä¸è¿æ¥æ²¡æœ‰å…³ç³»ï¼Œhttp/2åœ¨ä¸€ä¸ªè¿æ¥ä¸Šå¯ä»¥å¼€å¤šä¸ªæµï¼Œä¸æ˜¯ç‹¬å ä¼ è¾“æ•°æ®çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586324053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476588,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJayib1ZcRfOaoLsdsWZokiaO5tLAdC4uNAicQJRIVXrz9fIchib7QwXibnRrsJaoh5TUlia7faUf36g8Bw/132","nickname":"æ˜æœˆ","note":"","ucode":"D3C649B954A519","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":227936,"discussion_content":"ç†è§£äº† è°¢è°¢è€å¸ˆ äºŒåˆ·åˆšåˆ·å®Œäº† æ„Ÿè§‰æŠ€æœ¯é‡Œé¢çš„è®²ç©¶å¾ˆå¤š æå‰æ²¡ç ”ç©¶è¿‡çš„ä¸œè¥¿éƒ½æœ‰å¾ˆå¤šé“é“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586518456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":145076,"user_name":"çœ‹ï¼Œæœ‰åªçŒª","can_delete":false,"product_type":"c1","uid":1137727,"ip_address":"","ucode":"F9BB302BC71CE8","user_header":"https://static001.geekbang.org/account/avatar/00/11/5c/3f/34e5c750.jpg","comment_is_top":false,"comment_ctime":1572181079,"is_pvip":true,"replies":[{"id":"55947","content":"åŠ å¯†ç‰ˆæœ¬ä½ ç†è§£çš„æ˜¯æ­£ç¡®çš„ã€‚<br><br>å¯¹äºéåŠ å¯†ç‰ˆæœ¬ï¼Œhttp&#47;2è¦æ±‚ä½¿ç”¨upgradeæœºåˆ¶å‡çº§åˆ°http&#47;2ï¼Œæ­¥éª¤æ¯”alpnè¦å¤æ‚ä¸€äº›ï¼Œå¯ä»¥å‚è€ƒrfcã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1572224416,"ip_address":"","comment_id":145076,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867148375","product_id":100029001,"comment_content":"è€å¸ˆï¼Œè¯·é—®æˆ‘å¯¹æœåŠ¡å‘ç°çš„ç†è§£å¯¹å—ï¼Ÿ<br>é’ˆå¯¹åŠ å¯†ç‰ˆæœ¬çš„HTTP&#47;2ï¼Œå®¢æˆ·ç«¯éœ€è¦`Client Hello`çš„`ALPN`ä¸­æ·»åŠ æ”¯æŒçš„åè®®ï¼Œç”±æœåŠ¡å™¨é€‰æ‹©ï¼ŒæœåŠ¡å™¨ä¹Ÿé€šè¿‡`ALPN`å‘ŠçŸ¥å®¢æˆ·ç«¯åç»­é€šä¿¡é‡‡ç”¨çš„åè®®ã€‚<br>éåŠ å¯†ç‰ˆæœ¬çš„HTTP&#47;1ä¸­ï¼Œå®¢æˆ·ç«¯å»ºç«‹TCPè¿æ¥åï¼Œå°†å‘é€Magicã€‚æœåŠ¡å™¨è¯†åˆ«åˆ°åï¼Œåç»­é€šä¿¡é‡‡ç”¨HTTP&#47;2ã€‚","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472234,"discussion_content":"åŠ å¯†ç‰ˆæœ¬ä½ ç†è§£çš„æ˜¯æ­£ç¡®çš„ã€‚\n\nå¯¹äºéåŠ å¯†ç‰ˆæœ¬ï¼Œhttp/2è¦æ±‚ä½¿ç”¨upgradeæœºåˆ¶å‡çº§åˆ°http/2ï¼Œæ­¥éª¤æ¯”alpnè¦å¤æ‚ä¸€äº›ï¼Œå¯ä»¥å‚è€ƒrfcã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572224416,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130519,"user_name":"Luke","can_delete":false,"product_type":"c1","uid":1003156,"ip_address":"","ucode":"4060B4E2EF1D13","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/94/0b22b6a2.jpg","comment_is_top":false,"comment_ctime":1567477206,"is_pvip":false,"replies":[{"id":"48837","content":"http&#47;1å¼€å¤šä¸ªè¿æ¥ï¼Œè€Œhttp&#47;2åªæœ‰ä¸€ä¸ªè¿æ¥ï¼Œå¼±ç½‘ä¸‹å¤šä¸ªè¿æ¥æ˜¾ç„¶è¦æ¯”ä¸€ä¸ªè¿æ¥çš„ä¼ è¾“æ•ˆæœå¥½ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1567500404,"ip_address":"","comment_id":130519,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5862444502","product_id":100029001,"comment_content":"TCP åè®®å­˜åœ¨â€œé˜Ÿå¤´é˜»å¡â€ï¼Œæ‰€ä»¥ HTTP&#47;2 åœ¨å¼±ç½‘æˆ–è€…ç§»åŠ¨ç½‘ç»œä¸‹çš„æ€§èƒ½è¡¨ç°ä¼šä¸å¦‚ HTTP&#47;1ï¼›<br>è€å¸ˆï¼ŒHTTP&#47;1ï¼ŒHTTP&#47;2éƒ½æ˜¯åŸºäºTCPåè®®çš„ï¼Œåœ¨åŒæ ·â€œé˜Ÿå¤´é˜»å¡â€çš„æƒ…å†µä¸‹ï¼Œä¸ºä»€ä¹ˆHTTP&#47;1çš„æ€§èƒ½è¦ä¼˜äºHTTP&#47;2 ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465992,"discussion_content":"http/1å¼€å¤šä¸ªè¿æ¥ï¼Œè€Œhttp/2åªæœ‰ä¸€ä¸ªè¿æ¥ï¼Œå¼±ç½‘ä¸‹å¤šä¸ªè¿æ¥æ˜¾ç„¶è¦æ¯”ä¸€ä¸ªè¿æ¥çš„ä¼ è¾“æ•ˆæœå¥½ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567500404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1476507,"avatar":"https://static001.geekbang.org/account/avatar/00/16/87/9b/8bebc8b6.jpg","nickname":"Marshall","note":"","ucode":"0FB004E8163F44","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200485,"discussion_content":"è€å¸ˆhttp2å¯ä»¥è‡ªå·±å¼ºè¡Œå¼€å¯å¤šä¸ªé“¾æ¥å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583681402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127066,"user_name":"ğŸ‘» å°äºŒ","can_delete":false,"product_type":"c1","uid":1625463,"ip_address":"","ucode":"9EEA8553163270","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/77/b2ab5d44.jpg","comment_is_top":false,"comment_ctime":1566548279,"is_pvip":false,"replies":[{"id":"47160","content":"<br>1.åœ¨http&#47;2åè®®é‡Œæ²¡æœ‰æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„æ¦‚å¿µï¼Œåº”ç”¨å‘é€æ•°æ®éœ€è¦è‡ªå·±å¤„ç†socketçš„å¹¶å‘è¯»å†™ï¼Œä½†æ•°æ®å†™å…¥socketåå°±ä¼šç”±http&#47;2è‡ªå·±åˆ†å¸§ç®¡ç†ï¼Œå®ç°å¤šè·¯å¤ç”¨ã€‚<br><br>2.http&#47;2ç”¨ä¸€ä¸ªè¿æ¥èƒ½å¤Ÿå®ç°æœ€ä½³æ€§èƒ½ï¼Œå¯ä»¥çœå»è¿æ¥ã€æ…¢å¯åŠ¨ç­‰æˆæœ¬ï¼Œå½“ç„¶å› ä¸ºtcpå±‚æœ‰é˜Ÿå¤´é˜»å¡ï¼Œæ‰€ä»¥åœ¨ç½‘ç»œè´¨é‡å·®æ—¶ä¼šæœ‰æ€§èƒ½æŸå¤±ã€‚<br><br>3.å¤šä¸ªç½‘å¡å°±æ˜¯å¤šä¸ªipåœ°å€ï¼Œå°±å¯ä»¥å¼€å¤šä¸ªè¿æ¥ï¼Œä½†æ¯ä¸ªhttp&#47;2è¿æ¥å°±ä¼šé‡å»ºhpackåŠ¨æ€è¡¨ã€æ…¢å¯åŠ¨ï¼Œæ•ˆç‡ä¼šä½ä¸€ç‚¹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1566691053,"ip_address":"","comment_id":127066,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5861515575","product_id":100029001,"comment_content":"æœ‰ä¸€ç‚¹æˆ‘ä¸æ˜ç™½ï¼Œ http2åªæœ‰ä¸€æ¡è¿æ¥ï¼Œ é‚£åœ¨å¤šçº¿ç¨‹å¹¶å‘æ—¶ï¼Œ åº”è¯¥éœ€è¦é”å§ï¼Œ ä¹Ÿå°±æ˜¯åŒä¸€ç¬é—´åªèƒ½ä¸€ä¸ªå†™å…¥ï¼Œå¤šå‡ æ¡è¿æ¥ï¼Œ ä¸æ˜¯èƒ½å¹¶å‘å—ï¼Ÿ<br>è¿˜æ˜¯è¯´ç½‘å¡å±‚åŒä¸€ç¬é—´ä¹Ÿåªèƒ½å¤„ç†ä¸€ä¸ªå†™çš„è¯·æ±‚ï¼Œ æ‰€ä»¥å¹¶ä¸å¹¶å‘éƒ½æ²¡å…³ç³»ã€‚ä¸è¿‡åœ¨tcpå±‚é¢ä¸Šçš„é˜Ÿå¤´é˜»å¡è¿˜æ˜¯æœ‰å…³ç³»çš„å§ï¼Œ å¤š å¼€ä¸€ä¸ªè¿æ¥ï¼Œ å°±ä¸ä¼šéƒ½é˜»å¡ä½äº†<br><br>å¦‚æœæœ‰å¤šä¸ªç½‘å¡å‘¢ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464302,"discussion_content":"\n1.åœ¨http/2åè®®é‡Œæ²¡æœ‰æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„æ¦‚å¿µï¼Œåº”ç”¨å‘é€æ•°æ®éœ€è¦è‡ªå·±å¤„ç†socketçš„å¹¶å‘è¯»å†™ï¼Œä½†æ•°æ®å†™å…¥socketåå°±ä¼šç”±http/2è‡ªå·±åˆ†å¸§ç®¡ç†ï¼Œå®ç°å¤šè·¯å¤ç”¨ã€‚\n\n2.http/2ç”¨ä¸€ä¸ªè¿æ¥èƒ½å¤Ÿå®ç°æœ€ä½³æ€§èƒ½ï¼Œå¯ä»¥çœå»è¿æ¥ã€æ…¢å¯åŠ¨ç­‰æˆæœ¬ï¼Œå½“ç„¶å› ä¸ºtcpå±‚æœ‰é˜Ÿå¤´é˜»å¡ï¼Œæ‰€ä»¥åœ¨ç½‘ç»œè´¨é‡å·®æ—¶ä¼šæœ‰æ€§èƒ½æŸå¤±ã€‚\n\n3.å¤šä¸ªç½‘å¡å°±æ˜¯å¤šä¸ªipåœ°å€ï¼Œå°±å¯ä»¥å¼€å¤šä¸ªè¿æ¥ï¼Œä½†æ¯ä¸ªhttp/2è¿æ¥å°±ä¼šé‡å»ºhpackåŠ¨æ€è¡¨ã€æ…¢å¯åŠ¨ï¼Œæ•ˆç‡ä¼šä½ä¸€ç‚¹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566691053,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356307,"user_name":"Geek_8476da","can_delete":false,"product_type":"c1","uid":1623282,"ip_address":"åŒ—äº¬","ucode":"9AE358E5F160AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erMrXia5kb1AXUJoiccmIQxSQ7ib5SkibsQqd9FZInQcwYeNbZXp7CCtMibtg0RLHoza1NVo8A5M3uIluA/132","comment_is_top":false,"comment_ctime":1662123787,"is_pvip":false,"replies":[{"id":"129769","content":"great","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1662346511,"ip_address":"åŒ—äº¬","comment_id":356307,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1662123787","product_id":100029001,"comment_content":"å­¦ä¹ httpåˆ°æœ€å¥½<br>å¥½çš„æ–¹æ³•åº”è¯¥æ˜¯å®è·µï¼ï¼ï¼","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586570,"discussion_content":"great","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662346512,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"åŒ—äº¬"},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":331887,"user_name":"fmouse","can_delete":false,"product_type":"c1","uid":1202325,"ip_address":"","ucode":"9A8858CFFAB858","user_header":"https://static001.geekbang.org/account/avatar/00/12/58/95/640b6465.jpg","comment_is_top":false,"comment_ctime":1642852403,"is_pvip":false,"replies":[{"id":"121356","content":"æ˜¯çš„ï¼Œå¯ä»¥å»çœ‹rfcã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1643068531,"ip_address":"","comment_id":331887,"utype":1}],"discussion_count":1,"race_medal":2,"score":"1642852403","product_id":100029001,"comment_content":"è€å¸ˆå¥½ï¼Œå¯¹äº HTTP&#47;2 çš„â€œæœåŠ¡å‘ç°â€ç”¨ TLS çš„æ‰©å±•é‡Œâ€œALPNâ€ã€‚<br>åœ¨ ã€Š30ï½œæ—¶ä»£ä¹‹é£ï¼ˆä¸Šï¼‰ï¼šHTTP&#47;2ç‰¹æ€§æ¦‚è§ˆã€‹æåˆ°â€œåœ¨ HTTP&#47;2 æ ‡å‡†åˆ¶å®šçš„æ—¶å€™ï¼ˆ2015 å¹´ï¼‰å·²ç»å‘ç°äº†å¾ˆå¤š SSL&#47;TLS çš„å¼±ç‚¹ï¼Œè€Œæ–°çš„ TLS1.3 è¿˜æœªå‘å¸ƒã€‚â€<br>TLS1.2+çš„æ—¶å€™å·²ç»æ”¯æŒæ‰©å±•ç‰¹æ€§äº†æ˜¯å—ã€‚","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548165,"discussion_content":"æ˜¯çš„ï¼Œå¯ä»¥å»çœ‹rfcã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643068531,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323252,"user_name":"è·¯æ¼«æ¼«","can_delete":false,"product_type":"c1","uid":1273044,"ip_address":"","ucode":"F70F1DC612DE9D","user_header":"https://static001.geekbang.org/account/avatar/00/13/6c/d4/85ef1463.jpg","comment_is_top":false,"comment_ctime":1637804739,"is_pvip":false,"replies":[{"id":"117320","content":"å› ä¸ºä¸€ä¸ªhttp&amp;#47;2è¿æ¥çš„ä¼ è¾“æ•ˆç‡å·²ç»å¾ˆé«˜äº†ï¼Œå†å¤šçš„è¿æ¥åè€Œä¼šæµªè´¹èµ„æºï¼Œè™½ç„¶ç†è®ºä¸Šè¯´ä¼šå¢åŠ ä¼ è¾“èƒ½åŠ›ï¼Œä½†ç»¼åˆæ€§ä»·æ¯”ä¸é«˜ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":"1181974","ctime":1637881177,"ip_address":"","comment_id":323252,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637804739","product_id":100029001,"comment_content":"è€å¸ˆï¼Œhttp2 å¤šå¼€å‡ ä¸ªè¿æ¥ï¼Œå²‚ä¸æ˜¯å¾ˆå‰å®³å—ï¼Œä¸ºå•¥è¦é™åˆ¶ä¸€ä¸ªï¼Œä¹‹å‰è¿˜6-8ä¸ªå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533474,"discussion_content":"å› ä¸ºä¸€ä¸ªhttp&amp;#47;2è¿æ¥çš„ä¼ è¾“æ•ˆç‡å·²ç»å¾ˆé«˜äº†ï¼Œå†å¤šçš„è¿æ¥åè€Œä¼šæµªè´¹èµ„æºï¼Œè™½ç„¶ç†è®ºä¸Šè¯´ä¼šå¢åŠ ä¼ è¾“èƒ½åŠ›ï¼Œä½†ç»¼åˆæ€§ä»·æ¯”ä¸é«˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637881177,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307090,"user_name":"Unknown element","can_delete":false,"product_type":"c1","uid":2028277,"ip_address":"","ucode":"34A129800D0238","user_header":"https://static001.geekbang.org/account/avatar/00/1e/f2/f5/b82f410d.jpg","comment_is_top":false,"comment_ctime":1628855738,"is_pvip":false,"replies":[{"id":"111228","content":"æ˜¯çš„ï¼Œæ˜æ–‡çš„http&#47;2å°±åªèƒ½ä»http&#47;1å‡çº§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1628900918,"ip_address":"","comment_id":307090,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1628855738","product_id":100029001,"comment_content":"è€å¸ˆè¯¾å¤–å°è´´å£«ç¬¬å››æ¡connectionï¼šupgradeåº”è¯¥æ˜¯æ˜æ–‡çš„http 1æºå¸¦çš„å­—æ®µå§  å‡çº§åˆ°HTTP2ä¹‹å‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸åº”è¯¥æ˜¯é€šè¿‡HTTP1é€šä¿¡å—","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525041,"discussion_content":"æ˜¯çš„ï¼Œæ˜æ–‡çš„http/2å°±åªèƒ½ä»http/1å‡çº§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628900918,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296280,"user_name":"hao","can_delete":false,"product_type":"c1","uid":2368078,"ip_address":"","ucode":"371A47DD4510E7","user_header":"https://static001.geekbang.org/account/avatar/00/24/22/4e/2e081d9c.jpg","comment_is_top":false,"comment_ctime":1622879004,"is_pvip":false,"replies":[{"id":"107516","content":"greatã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç½—å‰‘é”‹","uid":"1181974","ctime":1622886064,"ip_address":"","comment_id":296280,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1622879004","product_id":100029001,"comment_content":"ç²¾çµå›¾ï¼ˆSpritingï¼‰ã€èµ„æºå†…è”ï¼ˆinliningï¼‰ã€åŸŸååˆ†ç‰‡ï¼ˆShardingï¼‰è¿™äº›æ‰‹æ®µä¸ºä»€ä¹ˆä¼šå¯¹HTTP&#47;2çš„æ€§èƒ½ä¼˜åŒ–é€ æˆåæ•ˆæœå‘¢ ï¼Ÿ<br><br><br>- ç²¾çµå›¾ï¼ˆSpritingï¼‰å’Œèµ„æºå†…è”ï¼ˆinliningï¼‰å‡å°‘äº†è¯·æ±‚æ•°ä½†å¢åŠ äº†æ¯æ¬¡è¯·æ±‚çš„æŠ¥æ–‡å¤§å°ï¼Œä½†  `ä¸åˆ©äºç¼“å­˜`ï¼ˆç²¾çµå›¾ä¸­æŸä¸ªå›¾æ ‡æ”¹åŠ¨å°±è¦é‡æ–°è¯·æ±‚æ•´ä¸ªç²¾çµå›¾ï¼Œèµ„æºå†…è”åŒç†ï¼‰<br><br>  &gt; èµ„æºå†…è”ï¼šå†…åµŒcss  ã€jsç­‰èµ„æº<br><br><br>  - å¯¹äºHTTP&#47;1æ¥è¯´ï¼Œå› ä¸ºå®ƒå­˜åœ¨  `é˜Ÿå¤´é˜»å¡`  ï¼Œæ‰€ä»¥å°†å¤šä¸ªå°çš„  `èµ„æºåˆå¹¶`  å¯ä»¥æœ‰æ•ˆçš„ç¼“è§£è¿™ç§æƒ…å†µçš„å‡ºç°<br>  - ä½†å¯¹äºHTTP&#47;2æ¥è¯´ï¼Œå®ƒå·²ç»å¼•å…¥äº†æµçš„æ¦‚å¿µå®ç°äº†åŸºäºå•ä¸ªTCPè¿æ¥çš„å¤šè·¯å¤ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´è§£å†³äº†  `HTTPçš„é˜Ÿå¤´é˜»å¡`ï¼Œå®ƒä¸éœ€è¦é€šè¿‡èµ„æºåˆå¹¶æ¥ç¼“è§£<br><br>- åŸŸååˆ†ç‰‡æ˜¯æŒ‡åˆ©ç”¨å¤šä¸ªåŸŸåå’ŒåŒä¸€ä¸ªIPåœ°å€å»ºç«‹TCPè¿æ¥ï¼Œå·§å¦™åœ°é¿å¼€äº†æµè§ˆå™¨å¯¹å¹¶å‘è¿æ¥æ•°çš„é™åˆ¶<br><br><br>  - å¯¹äºHTTP&#47;1æ¥è¯´ï¼Œå› ä¸ºå®ƒæ²¡æœ‰  `å¤šè·¯å¤ç”¨`  ï¼Œæ‰€ä»¥è¿™æ ·èƒ½å¾ˆå¥½çš„ç¼“è§£å› ä¸º  `ä¸¢åŒ…é‡å‘`  è€Œå¯¼è‡´çš„  `é˜Ÿå¤´é˜»å¡`  <br>  - ä½†å¯¹äºHTTP&#47;2æ¥è¯´ï¼Œå¤šå»ºç«‹çš„TCPè¿æ¥å®Œå…¨æ˜¯æµªè´¹èµ„æºï¼ˆä¸¤ç«¯çš„é™æ€è¡¨å’ŒåŠ¨æ€è¡¨ï¼ŒTCPè¿æ¥çš„æˆæœ¬ç­‰ï¼‰  ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":521384,"discussion_content":"greatã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1622886064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":202589,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1586011523,"is_pvip":false,"replies":[{"id":"76045","content":"åè®®æœ¬èº«å¾ˆå¥½ï¼Œä½†ç›¸å…³çš„è¿ç»´ã€æµ‹è¯•ã€å…¼å®¹æˆæœ¬å¿…é¡»è¦è€ƒè™‘ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1586222612,"ip_address":"","comment_id":202589,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1586011523","product_id":100029001,"comment_content":"è¿ç§»åˆ°HTTP&#47;2æ„Ÿè§‰æˆæœ¬å°æ”¶ç›Šé«˜ï¼Œå¥½åƒæ²¡æœ‰ä»€ä¹ˆç†ç”±ä¸è¿ç§»ä¸€ä¸‹ï¼Œé™¤äº†å¼±ç½‘ç¯å¢ƒä¸‹æ€§èƒ½å·®ä¸€äº›ï¼Œæ˜¯å¦è¿˜æœ‰ä»€ä¹ˆä¸åˆ©å½±å“å‘¢ï¼Ÿæˆ–è€…ä¸æƒ³æ”¹å˜ä¹Ÿæ˜¯ä¸€ç§åŸå› ï¼Œè°çŸ¥é“æ–°ä¸œè¥¿æ˜¯å¦æœ‰ä»€ä¹ˆå‘å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490625,"discussion_content":"åè®®æœ¬èº«å¾ˆå¥½ï¼Œä½†ç›¸å…³çš„è¿ç»´ã€æµ‹è¯•ã€å…¼å®¹æˆæœ¬å¿…é¡»è¦è€ƒè™‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586222612,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182707,"user_name":"keep it simple","can_delete":false,"product_type":"c1","uid":1574739,"ip_address":"","ucode":"72B8DC00247C9E","user_header":"https://static001.geekbang.org/account/avatar/00/18/07/53/05aa9573.jpg","comment_is_top":false,"comment_ctime":1582853929,"is_pvip":false,"replies":[{"id":"70675","content":"æ˜¯çš„ï¼Œhttp&#47;2å¯¹ä¸Šå±‚åº”ç”¨å®Œå…¨å…¼å®¹ï¼Œæ²¡æœ‰è¿ç§»æˆæœ¬ï¼Œå¯ä»¥ç«‹å³è·å¾—æ€§èƒ½æå‡ã€‚<br><br>å½“ç„¶äº†ï¼Œä½ è¿˜æ˜¯è¦åšä¸€äº›æµ‹è¯•ï¼Œä¸šåŠ¡é€»è¾‘ä¹‹å¤–å¯èƒ½è¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦åšã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1582857885,"ip_address":"","comment_id":182707,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1582853929","product_id":100029001,"comment_content":"çœ‹ä¸Šå»è¿ç§»åˆ°HTTP&#47;2å®Œå…¨ä¸éœ€è¦æ”¹åº”ç”¨ä»£ç å‘€ï¼Œåªéœ€è¦ä¿®æ”¹nginxé…ç½®å°±è¡Œ","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485420,"discussion_content":"æ˜¯çš„ï¼Œhttp/2å¯¹ä¸Šå±‚åº”ç”¨å®Œå…¨å…¼å®¹ï¼Œæ²¡æœ‰è¿ç§»æˆæœ¬ï¼Œå¯ä»¥ç«‹å³è·å¾—æ€§èƒ½æå‡ã€‚\n\nå½“ç„¶äº†ï¼Œä½ è¿˜æ˜¯è¦åšä¸€äº›æµ‹è¯•ï¼Œä¸šåŠ¡é€»è¾‘ä¹‹å¤–å¯èƒ½è¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦åšã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582857885,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122863,"user_name":"çº¢å†›","can_delete":false,"product_type":"c1","uid":1182247,"ip_address":"","ucode":"DE3FCE0ACDF620","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/27/f6215028.jpg","comment_is_top":false,"comment_ctime":1565562778,"is_pvip":false,"replies":[{"id":"45060","content":"å½“ç„¶å¯ä»¥ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®alpnå‘Šè¯‰å®¢æˆ·ç«¯ä½¿ç”¨http&#47;1ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"chrono","uid":"1181974","ctime":1565571181,"ip_address":"","comment_id":122863,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565562778","product_id":100029001,"comment_content":"å¦‚æœæµè§ˆå™¨æ¯”è¾ƒè€ï¼Œåªæ”¯æŒhttp1ï¼Œè®¿é—®http2æœåŠ¡å™¨å¯ä»¥å·¥ä½œå—<br>","like_count":0,"discussions":[{"author":{"id":1181974,"avatar":"https://static001.geekbang.org/account/avatar/00/12/09/16/1161017c.jpg","nickname":"ç½—å‰‘é”‹","note":"","ucode":"95678C988F24AB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462432,"discussion_content":"å½“ç„¶å¯ä»¥ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®alpnå‘Šè¯‰å®¢æˆ·ç«¯ä½¿ç”¨http/1ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565571181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}