{"id":278259,"title":"08 | Flink集群资源管理器支持","content":"<p><strong>课件和Demo地址</strong><br>\n<a href=\"https://gitee.com/geektime-geekbang/geektime-Flink\">https://gitee.com/geektime-geekbang/geektime-Flink</a></p>","comments":[{"had_liked":false,"id":272417,"user_name":"KoalaRun1024","can_delete":false,"product_type":"c3","uid":1300602,"ip_address":"","ucode":"7EE284EE743DA5","user_header":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIbLh86ic9KR6bfGRCYQrxdheqV9R9IDRiaOibFfGUVZiaqVHgwcw4Le2YprVicLKiakStGLfGRibCggBicHw/132","comment_is_top":false,"comment_ctime":1610085180,"is_pvip":false,"replies":[{"id":99641,"content":"好的，后面好很多，前面不太适应","user_name":"作者回复","user_name_real":"张利兵","uid":1119779,"ctime":1611069101,"ip_address":"","comment_id":272417,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"老师，感觉您的语言组织上需要简练和准确一下。","like_count":3,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513273,"discussion_content":"好的，后面好很多，前面不太适应","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611069101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245893,"user_name":"Geek_9e8288","can_delete":false,"product_type":"c3","uid":1090240,"ip_address":"","ucode":"7FC573854C41DE","user_header":"https://static001.geekbang.org/account/avatar/00/10/a2/c0/08cbd51b.jpg","comment_is_top":false,"comment_ctime":1599102916,"is_pvip":false,"replies":[{"id":90837,"content":"可以的，后面单独有一张讲PyFlink的使用，但是大部分学员还是以Java，Scala为主，语言不是难点，重点是能理解Flink的原理，接口基本上都差不多","user_name":"作者回复","user_name_real":"张利兵","uid":1119779,"ctime":1599670441,"ip_address":"","comment_id":245893,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"老师，能不能考虑增加一些Python的示例呢？我们数据分析比较熟悉pyspark，jupyter，对java不太熟悉。","like_count":1,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":505005,"discussion_content":"可以的，后面单独有一张讲PyFlink的使用，但是大部分学员还是以Java，Scala为主，语言不是难点，重点是能理解Flink的原理，接口基本上都差不多","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599670441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244757,"user_name":"Geek_0a139e","can_delete":false,"product_type":"c3","uid":1174849,"ip_address":"","ucode":"6913B2FB35B373","user_header":"https://static001.geekbang.org/account/avatar/00/11/ed/41/994a6eec.jpg","comment_is_top":false,"comment_ctime":1598668986,"is_pvip":false,"replies":[{"id":90079,"content":"嗯 不同的模式都有各自的优势，但是Flink相对比较灵活点，需要注意Yarn Client里面的Spark Driver还会和Executor之间进行通信，但是Flink里面Client不会，Job提交上去了之后会在Master节点中启动JobMaster来管理和协调Task的执行。","user_name":"作者回复","user_name_real":"Leonard","uid":1119779,"ctime":1598686777,"ip_address":"","comment_id":244757,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"想到了spark on yarn的两种提交作业模式，yarn client 和 yarn cluster，分别对应flink 的 per-job 和 Application Mode模式","like_count":1,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504692,"discussion_content":"嗯 不同的模式都有各自的优势，但是Flink相对比较灵活点，需要注意Yarn Client里面的Spark Driver还会和Executor之间进行通信，但是Flink里面Client不会，Job提交上去了之后会在Master节点中启动JobMaster来管理和协调Task的执行。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598686777,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244446,"user_name":"张子涵","can_delete":false,"product_type":"c3","uid":1743397,"ip_address":"","ucode":"57C509EA32B916","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9a/25/3e5e942b.jpg","comment_is_top":false,"comment_ctime":1598519995,"is_pvip":false,"replies":[{"id":90042,"content":"yarn和k8s确实比较常用，因此也是大部分公司的首选","user_name":"作者回复","user_name_real":"Leonard","uid":1119779,"ctime":1598622734,"ip_address":"","comment_id":244446,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"看下来，只记住了，yarn和k8s常用","like_count":1,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504583,"discussion_content":"yarn和k8s确实比较常用，因此也是大部分公司的首选","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598622734,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":244343,"user_name":"逃离舒适圈","can_delete":false,"product_type":"c3","uid":2149200,"ip_address":"","ucode":"9C75FC91DFBC43","user_header":"https://static001.geekbang.org/account/avatar/00/20/cb/50/639c42de.jpg","comment_is_top":false,"comment_ctime":1598489257,"is_pvip":false,"replies":[{"id":90124,"content":"我们后面留一个番外篇，专门来讲讲如何更高效的学习Flink？","user_name":"作者回复","user_name_real":"Leonard","uid":1119779,"ctime":1598796060,"ip_address":"","comment_id":244343,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"大佬 平时咋学习的？","like_count":1,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504559,"discussion_content":"我们后面留一个番外篇，专门来讲讲如何更高效的学习Flink？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598796060,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":254234,"user_name":"Radar","can_delete":false,"product_type":"c3","uid":1052758,"ip_address":"","ucode":"CEC0BA51316892","user_header":"https://static001.geekbang.org/account/avatar/00/10/10/56/3405a6b0.jpg","comment_is_top":false,"comment_ctime":1603088084,"is_pvip":false,"replies":[{"id":93236,"content":"整理的不做","user_name":"作者回复","user_name_real":"张利兵","uid":1119779,"ctime":1603526576,"ip_address":"","comment_id":254234,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"    - 单机&#47;分布式多台物理主机部署，不支持高可用\n    - 依赖Java 8或Java 11JDK环境\n    - 支持Linux&#47;MacOSX&#47;WSL\n    - 仅支持Session模式提交job\n    - 部署流程： https:&#47;&#47;flink.apache.org&#47;downloads.html\n        - .&#47;bin&#47;start-cluster.sh\n        - .&#47;jps\n        - .&#47;bin&#47;stop-cluster.sh\n    - 监控\n        - http:&#47;&#47;9.134.76.111:8081&#47;#&#47;overview JobManager&#47;Log\n        - flink-1.11.2&#47;log\n    - 多机：\n        - conf&#47;flink-conf.yaml 修改 jobmanager.rpc.address\n        - conf&#47;master 配置ip地址\n        - conf&#47;worker 配置worker\n    - run:\n        - .&#47;bin&#47;flink run .&#47;examples&#47;batch&#47;WordCount.jar","like_count":0,"discussions":[{"author":{"id":1119779,"avatar":"https://static001.geekbang.org/account/avatar/00/11/16/23/99c7ede5.jpg","nickname":"张利兵","note":"","ucode":"DBAE17970AB143","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":507324,"discussion_content":"整理的不做","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603526576,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":354513,"user_name":"李锦武","can_delete":false,"product_type":"c3","uid":3125347,"ip_address":"广东","ucode":"5DA0EA2A2617BC","user_header":"","comment_is_top":false,"comment_ctime":1660481151,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"这里讲到了 native 集群部署， 但是却缺乏什么是 native 的定义，native 对应的概念是非 native 吗？ 怎么区分的？","like_count":2},{"had_liked":false,"id":360995,"user_name":"bingoabin","can_delete":false,"product_type":"c3","uid":1470835,"ip_address":"浙江","ucode":"4A0FB45D377623","user_header":"https://static001.geekbang.org/account/avatar/00/16/71/73/475cb585.jpg","comment_is_top":false,"comment_ctime":1667098911,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"native是啥","like_count":0},{"had_liked":false,"id":284938,"user_name":"双椒叔叔","can_delete":false,"product_type":"c3","uid":1395385,"ip_address":"","ucode":"9C4B1DB2E693AF","user_header":"https://static001.geekbang.org/account/avatar/00/15/4a/b9/1531ff1c.jpg","comment_is_top":false,"comment_ctime":1616551577,"is_pvip":false,"replies":null,"discussion_count":1,"race_medal":0,"score":2,"product_id":100058801,"comment_content":"Native模式跟Per Job模式有啥区别嘞，还是很模糊\n","like_count":0,"discussions":[{"author":{"id":1529210,"avatar":"https://static001.geekbang.org/account/avatar/00/17/55/7a/d44df1d6.jpg","nickname":"freesocean","note":"","ucode":"CAD4C80CF569D3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380957,"discussion_content":"我个人理解是这样：按照资源的隔离级别分了Session和PerJob模式，而1.11后，又根据Client客户端的运行位置，分出了一个Application模式，而native模式，指的是在资源分配时可以以更细的粒度控制，比如slot级别，非native模式只能是TaskManager级别，粒度比较粗，所以支持native，意味着可以和资源管理系统进行深度通信，动态申请资源。所以Per-job和native是从不同角度考虑的。所以在Yarn或者K8s这样的资源管理系统中，如果是非native的PerJob模式，提交job资源申请过程干预较少，主要交给K8s和yarn管理，如果是native模式，则可以动态申请资源。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1624841719,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}