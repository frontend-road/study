{"id":14070,"title":"17 | å³æ—¶ç¼–è¯‘ï¼ˆä¸‹ï¼‰","content":"<p>ä»Šå¤©æˆ‘ä»¬æ¥ç»§ç»­è®²è§£Javaè™šæ‹Ÿæœºä¸­çš„å³æ—¶ç¼–è¯‘ã€‚</p>\n<h2>Profiling</h2>\n<p>ä¸Šç¯‡æåˆ°ï¼Œåˆ†å±‚ç¼–è¯‘ä¸­çš„0å±‚ã€2å±‚å’Œ3å±‚éƒ½ä¼šè¿›è¡Œprofilingï¼Œæ”¶é›†èƒ½å¤Ÿåæ˜ ç¨‹åºæ‰§è¡ŒçŠ¶æ€çš„æ•°æ®ã€‚å…¶ä¸­ï¼Œæœ€ä¸ºåŸºç¡€çš„ä¾¿æ˜¯æ–¹æ³•çš„è°ƒç”¨æ¬¡æ•°ä»¥åŠå¾ªç¯å›è¾¹çš„æ‰§è¡Œæ¬¡æ•°ã€‚å®ƒä»¬è¢«ç”¨äºè§¦å‘å³æ—¶ç¼–è¯‘ã€‚</p>\n<p>æ­¤å¤–ï¼Œ0å±‚å’Œ3å±‚è¿˜ä¼šæ”¶é›†ç”¨äº4å±‚C2ç¼–è¯‘çš„æ•°æ®ï¼Œæ¯”å¦‚è¯´åˆ†æ”¯è·³è½¬å­—èŠ‚ç çš„åˆ†æ”¯profileï¼ˆbranch profileï¼‰ï¼ŒåŒ…æ‹¬è·³è½¬æ¬¡æ•°å’Œä¸è·³è½¬æ¬¡æ•°ï¼Œä»¥åŠéç§æœ‰å®ä¾‹æ–¹æ³•è°ƒç”¨æŒ‡ä»¤ã€å¼ºåˆ¶ç±»å‹è½¬æ¢checkcastæŒ‡ä»¤ã€ç±»å‹æµ‹è¯•instanceofæŒ‡ä»¤ï¼Œå’Œå¼•ç”¨ç±»å‹çš„æ•°ç»„å­˜å‚¨aastoreæŒ‡ä»¤çš„ç±»å‹profileï¼ˆreceiver type profileï¼‰ã€‚</p>\n<p>åˆ†æ”¯profileå’Œç±»å‹profileçš„æ”¶é›†å°†ç»™åº”ç”¨ç¨‹åºå¸¦æ¥ä¸å°‘çš„æ€§èƒ½å¼€é”€ã€‚æ®ç»Ÿè®¡ï¼Œæ­£æ˜¯å› ä¸ºè¿™éƒ¨åˆ†é¢å¤–çš„profilingï¼Œä½¿å¾—3å±‚C1ä»£ç çš„æ€§èƒ½æ¯”2å±‚C1ä»£ç çš„ä½30%ã€‚</p>\n<p>åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨è§£é‡Šæ‰§è¡Œè¿‡ç¨‹ä¸­æ”¶é›†åˆ†æ”¯profileä»¥åŠç±»å‹profileã€‚åªæœ‰åœ¨æ–¹æ³•è§¦å‘C1ç¼–è¯‘åï¼ŒJavaè™šæ‹Ÿæœºè®¤ä¸ºè¯¥æ–¹æ³•æœ‰å¯èƒ½è¢«C2ç¼–è¯‘ï¼Œæ–¹æ‰åœ¨è¯¥æ–¹æ³•çš„C1ä»£ç ä¸­æ”¶é›†è¿™äº›profileã€‚</p>\n<p>åªè¦åœ¨æ¯”è¾ƒæç«¯çš„æƒ…å†µä¸‹ï¼Œä¾‹å¦‚ç­‰å¾…C1ç¼–è¯‘çš„æ–¹æ³•æ•°ç›®å¤ªå¤šæ—¶ï¼ŒJavaè™šæ‹Ÿæœºæ‰ä¼šå¼€å§‹åœ¨è§£é‡Šæ‰§è¡Œè¿‡ç¨‹ä¸­æ”¶é›†è¿™äº›profileã€‚</p><!-- [[[read_end]]] -->\n<p>é‚£ä¹ˆè¿™äº›è€—è´¹å·¨å¤§ä»£ä»·æ”¶é›†è€Œæ¥çš„profileå…·ä½“æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</p>\n<p>ç­”æ¡ˆæ˜¯ï¼ŒC2å¯ä»¥æ ¹æ®æ”¶é›†å¾—åˆ°çš„æ•°æ®è¿›è¡ŒçŒœæµ‹ï¼Œå‡è®¾æ¥ä¸‹æ¥çš„æ‰§è¡ŒåŒæ ·ä¼šæŒ‰ç…§æ‰€æ”¶é›†çš„profileè¿›è¡Œï¼Œä»è€Œä½œå‡ºæ¯”è¾ƒæ¿€è¿›çš„ä¼˜åŒ–ã€‚</p>\n<h2>åŸºäºåˆ†æ”¯profileçš„ä¼˜åŒ–</h2>\n<p>ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢è¿™æ®µä»£ç ä¸­åŒ…å«ä¸¤ä¸ªæ¡ä»¶åˆ¤æ–­ã€‚ç¬¬ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­å°†æµ‹è¯•æ‰€è¾“å…¥çš„booleanå€¼ã€‚</p>\n<p>å¦‚æœä¸ºtrueï¼Œåˆ™å°†å±€éƒ¨å˜é‡vè®¾ç½®ä¸ºæ‰€è¾“å…¥çš„intå€¼ã€‚å¦‚æœä¸ºfalseï¼Œåˆ™å°†æ‰€è¾“å…¥çš„intå€¼ç»è¿‡ä¸€ç•ªè¿ç®—ä¹‹åï¼Œå†å­˜å…¥å±€éƒ¨å˜é‡vä¹‹ä¸­ã€‚</p>\n<p>ç¬¬äºŒä¸ªæ¡ä»¶åˆ¤æ–­åˆ™æµ‹è¯•å±€éƒ¨å˜é‡væ˜¯å¦å’Œæ‰€è¾“å…¥çš„intå€¼ç›¸ç­‰ã€‚å¦‚æœç›¸ç­‰ï¼Œåˆ™è¿”å›0ã€‚å¦‚æœä¸ç­‰ï¼Œåˆ™å°†å±€éƒ¨å˜é‡vç»è¿‡ä¸€ç•ªè¿ç®—ä¹‹åï¼Œå†å°†ä¹‹è¿”å›ã€‚æ˜¾ç„¶ï¼Œå½“æ‰€è¾“å…¥çš„booleanå€¼ä¸ºtrueçš„æƒ…å†µä¸‹ï¼Œè¿™æ®µä»£ç å°†è¿”å›0ã€‚</p>\n<pre><code>public static int foo(boolean f, int in) {\n  int v;\n  if (f) {\n    v = in;\n  } else {\n    v = (int) Math.sin(in);\n  }\n\n  if (v == in) {\n    return 0;\n  } else {\n    return (int) Math.cos(v);\n  }\n}\n// ç¼–è¯‘è€Œæˆçš„å­—èŠ‚ç ï¼š\npublic static int foo(boolean, int);\n  Code:\n     0: iload_0\n     1: ifeq          9\n     4: iload_1\n     5: istore_2\n     6: goto          16\n     9: iload_1\n    10: i2d\n    11: invokestatic  java/lang/Math.sin:(D)D\n    14: d2i\n    15: istore_2\n    16: iload_2\n    17: iload_1\n    18: if_icmpne     23\n    21: iconst_0\n    22: ireturn\n    23: iload_2\n    24: i2d\n    25: invokestatic java/lang/Math.cos:(D)D\n    28: d2i\n    29: ireturn\n</code></pre>\n<p><img src=\"https://static001.geekbang.org/resource/image/53/0e/53d57c8c7645d8e2292a08ee97557b0e.png?wh=1224*666\" alt=\"\" /></p>\n<p>å‡è®¾åº”ç”¨ç¨‹åºè°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæ‰€ä¼ å…¥çš„booleanå€¼çš†ä¸ºtrueã€‚é‚£ä¹ˆï¼Œåç§»é‡ä¸º1ä»¥åŠåç§»é‡ä¸º18çš„æ¡ä»¶è·³è½¬æŒ‡ä»¤æ‰€å¯¹åº”çš„åˆ†æ”¯profileä¸­ï¼Œè·³è½¬çš„æ¬¡æ•°éƒ½ä¸º0ã€‚</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/90/cc/90eb47e4c9b202c45804ef7383a9d6cc.png?wh=1270*682\" alt=\"\" /></p>\n<p>C2å¯ä»¥æ ¹æ®è¿™ä¸¤ä¸ªåˆ†æ”¯profileä½œå‡ºå‡è®¾ï¼Œåœ¨æ¥ä¸‹æ¥çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¿™ä¸¤ä¸ªæ¡ä»¶è·³è½¬æŒ‡ä»¤ä»æ—§ä¸ä¼šå‘ç”Ÿè·³è½¬ã€‚åŸºäºè¿™ä¸ªå‡è®¾ï¼ŒC2ä¾¿ä¸å†ç¼–è¯‘è¿™ä¸¤ä¸ªæ¡ä»¶è·³è½¬è¯­å¥æ‰€å¯¹åº”çš„falseåˆ†æ”¯äº†ã€‚</p>\n<p>æˆ‘ä»¬æš‚ä¸”ä¸ç®¡å½“å‡è®¾é”™è¯¯çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œå…ˆæ¥çœ‹ä¸€çœ‹å‰©ä¸‹æ¥çš„ä»£ç ã€‚ç»è¿‡â€œå‰ªæâ€ä¹‹åï¼Œåœ¨ç¬¬äºŒä¸ªæ¡ä»¶è·³è½¬å¤„ï¼Œvçš„å€¼åªæœ‰å¯èƒ½ä¸ºæ‰€è¾“å…¥çš„intå€¼ã€‚å› æ­¤ï¼Œè¯¥æ¡ä»¶è·³è½¬å¯ä»¥è¿›ä¸€æ­¥è¢«ä¼˜åŒ–æ‰ã€‚æœ€ç»ˆçš„ç»“æœæ˜¯ï¼Œåœ¨ç¬¬ä¸€ä¸ªæ¡ä»¶è·³è½¬ä¹‹åï¼ŒC2ä»£ç å°†ç›´æ¥è¿”å›0ã€‚</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/d9/9a/d997a7ea02b7f85136974a54dce7589a.png?wh=1218*286\" alt=\"\" /></p>\n<p>è¿™é‡Œæˆ‘æ‰“å°äº†C2çš„ç¼–è¯‘ç»“æœã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åœ°å€ä¸º2ceeçš„æŒ‡ä»¤å¤„è¿›è¡Œè¿‡ä¸€æ¬¡æ¯”è¾ƒä¹‹åï¼Œè¯¥æœºå™¨ç ä¾¿ç›´æ¥è¿”å›0ã€‚</p>\n<pre><code>Compiled method (c2)      95   16       4       CompilationTest::foo (30 bytes)\n...\nCompilationTest.foo  [0x0000000104fb2ce0, 0x0000000104fb2d38]  88 bytes\n[Entry Point]\n[Verified Entry Point]\n[Constants]\n  # {method} {0x000000012629e380} 'foo' '(ZI)I' in 'CompilationTest'\n  # parm0:    rsi       = boolean\n  # parm1:    rdx       = int\n  #           [sp+0x30]  (sp of caller)\n  0x0000000104fb2ce0: mov    DWORD PTR [rsp-0x14000],eax\n  0x0000000104fb2ce7: push   rbp\n  0x0000000104fb2ce8: sub    rsp,0x20\n  0x0000000104fb2cec: test   esi,esi\n  0x0000000104fb2cee: je     0x0000000104fb2cfe // è·³è½¬è‡³?\n  0x0000000104fb2cf0: xor    eax,eax            // å°†è¿”å›å€¼è®¾ç½®ä¸º0\n  0x0000000104fb2cf2: add    rsp,0x20\n  0x0000000104fb2cf6: pop    rbp\n  0x0000000104fb2cf7: test   DWORD PTR [rip+0xfffffffffca32303],eax // safepoint\n  0x0000000104fb2cfd: ret    \n  ...\n</code></pre>\n<p>æ€»ç»“ä¸€ä¸‹ï¼Œæ ¹æ®æ¡ä»¶è·³è½¬æŒ‡ä»¤çš„åˆ†æ”¯profileï¼Œå³æ—¶ç¼–è¯‘å™¨å¯ä»¥å°†ä»æœªæ‰§è¡Œè¿‡çš„åˆ†æ”¯å‰ªæ‰ï¼Œä»¥é¿å…ç¼–è¯‘è¿™äº›å¾ˆæœ‰å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ä»£ç ï¼Œä»è€ŒèŠ‚çœç¼–è¯‘æ—¶é—´ä»¥åŠéƒ¨ç½²ä»£ç æ‰€è¦æ¶ˆè€—çš„å†…å­˜ç©ºé—´ã€‚æ­¤å¤–ï¼Œâ€œå‰ªæâ€å°†ç²¾ç®€ç¨‹åºçš„æ•°æ®æµï¼Œä»è€Œè§¦å‘æ›´å¤šçš„ä¼˜åŒ–ã€‚</p>\n<p>åœ¨ç°å®ä¸­ï¼Œåˆ†æ”¯profileå‡ºç°ä»…è·³è½¬æˆ–è€…ä»…ä¸è·³è½¬çš„æƒ…å†µå¹¶ä¸å¤šè§ã€‚å½“ç„¶ï¼Œå³æ—¶ç¼–è¯‘å™¨å¯¹åˆ†æ”¯profileçš„åˆ©ç”¨ä¹Ÿä¸ä»…é™äºâ€œå‰ªæâ€ã€‚å®ƒè¿˜ä¼šæ ¹æ®åˆ†æ”¯profileï¼Œè®¡ç®—æ¯ä¸€æ¡ç¨‹åºæ‰§è¡Œè·¯å¾„çš„æ¦‚ç‡ï¼Œä»¥ä¾¿æŸäº›ç¼–è¯‘å™¨ä¼˜åŒ–ä¼˜å…ˆå¤„ç†æ¦‚ç‡è¾ƒé«˜çš„è·¯å¾„ã€‚</p>\n<h2>åŸºäºç±»å‹profileçš„ä¼˜åŒ–</h2>\n<p>å¦å¤–ä¸€ä¸ªä¾‹å­åˆ™æ˜¯å…³äºinstanceofä»¥åŠæ–¹æ³•è°ƒç”¨çš„ç±»å‹profileã€‚ä¸‹é¢è¿™æ®µä»£ç å°†æµ‹è¯•æ‰€ä¼ å…¥çš„å¯¹è±¡æ˜¯å¦ä¸ºExceptionçš„å®ä¾‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›å®ƒçš„ç³»ç»Ÿå“ˆå¸Œå€¼ï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ™è¿”å›å®ƒçš„å“ˆå¸Œå€¼ã€‚</p>\n<pre><code>public static int hash(Object in) {\n  if (in instanceof Exception) {\n    return System.identityHashCode(in);\n  } else {\n    return in.hashCode();\n  }\n}\n// ç¼–è¯‘è€Œæˆçš„å­—èŠ‚ç ï¼š\npublic static int hash(java.lang.Object);\n  Code:\n     0: aload_0\n     1: instanceof java/lang/Exception\n     4: ifeq          12\n     7: aload_0\n     8: invokestatic java/lang/System.identityHashCode:(Ljava/lang/Object;)I\n    11: ireturn\n    12: aload_0\n    13: invokevirtual java/lang/Object.hashCode:()I\n    16: ireturn\n</code></pre>\n<p>å‡è®¾åº”ç”¨ç¨‹åºè°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæ‰€ä¼ å…¥çš„Objectçš†ä¸ºIntegerå®ä¾‹ã€‚é‚£ä¹ˆï¼Œåç§»é‡ä¸º1çš„instanceofæŒ‡ä»¤çš„ç±»å‹profileä»…åŒ…å«Integerï¼Œåç§»é‡ä¸º4çš„åˆ†æ”¯è·³è½¬è¯­å¥çš„åˆ†æ”¯profileä¸­ä¸è·³è½¬çš„æ¬¡æ•°ä¸º0ï¼Œåç§»é‡ä¸º13çš„æ–¹æ³•è°ƒç”¨æŒ‡ä»¤çš„ç±»å‹profileä»…åŒ…å«Integerã€‚</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/2c/77/2c13a1af8632a2bbf77338e57c957b77.png?wh=1698*434\" alt=\"\" /></p>\n<p>åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œinstanceofæµ‹è¯•å¹¶ä¸ç®€å•ã€‚å¦‚æœinstanceofçš„ç›®æ ‡ç±»å‹æ˜¯finalç±»å‹ï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºä»…éœ€æ¯”è¾ƒæµ‹è¯•å¯¹è±¡çš„åŠ¨æ€ç±»å‹æ˜¯å¦ä¸ºè¯¥finalç±»å‹ã€‚</p>\n<p>åœ¨è®²è§£å¯¹è±¡çš„å†…å­˜åˆ†å¸ƒé‚£ä¸€ç¯‡ä¸­ï¼Œæˆ‘æ›¾ç»æåˆ°è¿‡ï¼Œå¯¹è±¡å¤´å­˜æœ‰è¯¥å¯¹è±¡çš„åŠ¨æ€ç±»å‹ã€‚å› æ­¤ï¼Œè·å–å¯¹è±¡çš„åŠ¨æ€ç±»å‹ä»…ä¸ºå•ä¸€çš„å†…å­˜è¯»æŒ‡ä»¤ã€‚</p>\n<p>å¦‚æœç›®æ ‡ç±»å‹ä¸æ˜¯finalç±»å‹ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ä¾‹å­ä¸­çš„Exceptionï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºéœ€è¦ä»æµ‹è¯•å¯¹è±¡çš„åŠ¨æ€ç±»å‹å¼€å§‹ï¼Œä¾æ¬¡æµ‹è¯•è¯¥ç±»ï¼Œè¯¥ç±»çš„çˆ¶ç±»ã€ç¥–å…ˆç±»ï¼Œè¯¥ç±»æ‰€ç›´æ¥å®ç°æˆ–è€…é—´æ¥å®ç°çš„æ¥å£æ˜¯å¦ä¸ç›®æ ‡ç±»å‹ä¸€è‡´ã€‚</p>\n<p>ä¸è¿‡ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒinstanceofæŒ‡ä»¤çš„ç±»å‹profileä»…åŒ…å«Integerã€‚æ ¹æ®è¿™ä¸ªä¿¡æ¯ï¼Œå³æ—¶ç¼–è¯‘å™¨å¯ä»¥å‡è®¾ï¼Œåœ¨æ¥ä¸‹æ¥çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‰€è¾“å…¥çš„Objectå¯¹è±¡ä»ä¸ºIntegerå®ä¾‹ã€‚</p>\n<p>å› æ­¤ï¼Œç”Ÿæˆçš„ä»£ç å°†æµ‹è¯•æ‰€è¾“å…¥çš„å¯¹è±¡çš„åŠ¨æ€ç±»å‹æ˜¯å¦ä¸ºIntegerã€‚å¦‚æœæ˜¯çš„è¯ï¼Œåˆ™ç»§ç»­æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ã€‚ï¼ˆè¯¥ä¼˜åŒ–æºè‡ªGraalï¼Œé‡‡ç”¨C2å¯èƒ½æ— æ³•å¤ç°ã€‚ï¼‰</p>\n<p>ç„¶åï¼Œå³æ—¶ç¼–è¯‘å™¨ä¼šé‡‡ç”¨å’Œç¬¬ä¸€ä¸ªä¾‹å­ä¸­ä¸€è‡´çš„é’ˆå¯¹åˆ†æ”¯profileçš„ä¼˜åŒ–ï¼Œä»¥åŠå¯¹æ–¹æ³•è°ƒç”¨çš„æ¡ä»¶å»è™šåŒ–å†…è”ã€‚</p>\n<p>æˆ‘ä¼šåœ¨æ¥ä¸‹æ¥çš„ç¯‡ç« ä¸­è¯¦ç»†ä»‹ç»å†…è”ï¼Œè¿™é‡Œå…ˆè¯´ç»“æœï¼šç”Ÿæˆçš„ä»£ç å°†æµ‹è¯•æ‰€è¾“å…¥çš„å¯¹è±¡åŠ¨æ€ç±»å‹æ˜¯å¦ä¸ºIntegerã€‚å¦‚æœæ˜¯çš„è¯ï¼Œåˆ™æ‰§è¡ŒInteger.hashCode()æ–¹æ³•çš„å®è´¨å†…å®¹ï¼Œä¹Ÿå°±æ˜¯è¿”å›è¯¥Integerå®ä¾‹çš„valueå­—æ®µã€‚</p>\n<pre><code>public final class Integer ... {\n    ...\n    @Override\n    public int hashCode() {\n        return Integer.hashCode(value);\n    }\n\n    public static int hashCode(int value) {\n        return value;\n    }\n    ...\n}\n</code></pre>\n<p><img src=\"https://static001.geekbang.org/resource/image/ef/b6/ef02474d3474e96c6f55b07493652fb6.png?wh=1484*1218\" alt=\"\" /></p>\n<p>å’Œç¬¬ä¸€ä¸ªä¾‹å­ä¸€æ ·ï¼Œæ ¹æ®æ•°æ®æµåˆ†æï¼Œä¸Šè¿°ä»£ç å¯ä»¥æœ€ç»ˆä¼˜åŒ–ä¸ºæå…¶ç®€å•çš„å½¢å¼ã€‚</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/53/be/53e470037dd49d3d27695a5174fc3dbe.png?wh=1270*440\" alt=\"\" /></p>\n<p>è¿™é‡Œæˆ‘æ‰“å°äº†Graalçš„ç¼–è¯‘ç»“æœã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åœ°å€ä¸º1ab7çš„æŒ‡ä»¤å¤„è¿›è¡Œè¿‡ä¸€æ¬¡æ¯”è¾ƒä¹‹åï¼Œè¯¥æœºå™¨ç ä¾¿ç›´æ¥è¿”å›æ‰€ä¼ å…¥çš„Integerå¯¹è±¡çš„valueå­—æ®µã€‚</p>\n<pre><code>Compiled method (JVMCI)     600   23       4\n...\n----------------------------------------------------------------------\nCompilationTest.hash (CompilationTest.hash(Object))  [0x000000011d811aa0, 0x000000011d811b00]  96 bytes\n[Entry Point]\n[Verified Entry Point]\n[Constants]\n  # {method} {0x00000001157053c8} 'hash' '(Ljava/lang/Object;)I' in 'CompilationTest'\n  # parm0:    rsi:rsi   = 'java/lang/Object'\n  #           [sp+0x20]  (sp of caller)\n  0x000000011d811aa0: mov    DWORD PTR [rsp-0x14000],eax\n  0x000000011d811aa7: sub    rsp,0x18\n  0x000000011d811aab: mov    QWORD PTR [rsp+0x10],rbp\n  // æ¯”è¾ƒ[rsi+0x8]ï¼Œä¹Ÿå°±æ˜¯æ‰€ä¼ å…¥çš„Objectå‚æ•°çš„åŠ¨æ€ç±»å‹ï¼Œæ˜¯å¦ä¸ºIntegerã€‚è¿™é‡Œ0xf80022adæ˜¯Integerç±»çš„å†…å­˜åœ°å€ã€‚\n  0x000000011d811ab0: cmp    DWORD PTR [rsi+0x8],0xf80022ad\n  // å¦‚æœä¸æ˜¯ï¼Œè·³è½¬è‡³ï¼Ÿ\n  0x000000011d811ab7: jne    0x000000011d811ad3\n  // åŠ è½½Integer.valueã€‚åœ¨å¯ç”¨å‹ç¼©æŒ‡é’ˆæ—¶ï¼Œè¯¥å­—æ®µçš„åç§»é‡ä¸º12ï¼Œä¹Ÿå°±æ˜¯0xc\n  0x000000011d811abd: mov    eax,DWORD PTR [rsi+0xc]\n  0x000000011d811ac0: mov    rbp,QWORD PTR [rsp+0x10]\n  0x000000011d811ac5: add    rsp,0x18\n  0x000000011d811ac9: test   DWORD PTR [rip+0xfffffffff272f537],eax        \n  0x000000011d811acf: vzeroupper \n  0x000000011d811ad2: ret\n</code></pre>\n<p>å’ŒåŸºäºåˆ†æ”¯profileçš„ä¼˜åŒ–ä¸€æ ·ï¼ŒåŸºäºç±»å‹profileçš„ä¼˜åŒ–åŒæ ·ä¹Ÿæ˜¯ä½œå‡ºå‡è®¾ï¼Œä»è€Œç²¾ç®€æ§åˆ¶æµä»¥åŠæ•°æ®æµã€‚è¿™ä¸¤è€…çš„æ ¸å¿ƒéƒ½æ˜¯å‡è®¾ã€‚</p>\n<p>å¯¹äºåˆ†æ”¯profileï¼Œå³æ—¶ç¼–è¯‘å™¨å‡è®¾çš„æ˜¯ä»…æ‰§è¡ŒæŸä¸€åˆ†æ”¯ï¼›å¯¹äºç±»å‹profileï¼Œå³æ—¶ç¼–è¯‘å™¨å‡è®¾çš„æ˜¯å¯¹è±¡çš„åŠ¨æ€ç±»å‹ä»…ä¸ºç±»å‹profileä¸­çš„é‚£å‡ ä¸ªã€‚</p>\n<p>é‚£ä¹ˆï¼Œå½“å‡è®¾å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œç¨‹åºå°†ä½•å»ä½•ä»ï¼Ÿæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p>\n<h2>å»ä¼˜åŒ–</h2>\n<p>Javaè™šæ‹Ÿæœºç»™å‡ºçš„è§£å†³æ–¹æ¡ˆä¾¿æ˜¯å»ä¼˜åŒ–ï¼Œå³ä»æ‰§è¡Œå³æ—¶ç¼–è¯‘ç”Ÿæˆçš„æœºå™¨ç åˆ‡æ¢å›è§£é‡Šæ‰§è¡Œã€‚</p>\n<p>åœ¨ç”Ÿæˆçš„æœºå™¨ç ä¸­ï¼Œå³æ—¶ç¼–è¯‘å™¨å°†åœ¨å‡è®¾å¤±è´¥çš„ä½ç½®ä¸Šæ’å…¥ä¸€ä¸ªé™·é˜±ï¼ˆtrapï¼‰ã€‚è¯¥é™·é˜±å®é™…ä¸Šæ˜¯ä¸€æ¡callæŒ‡ä»¤ï¼Œè°ƒç”¨è‡³Javaè™šæ‹Ÿæœºé‡Œä¸“é—¨è´Ÿè´£å»ä¼˜åŒ–çš„æ–¹æ³•ã€‚ä¸æ™®é€šçš„callæŒ‡ä»¤ä¸ä¸€æ ·çš„æ˜¯ï¼Œå»ä¼˜åŒ–æ–¹æ³•å°†æ›´æ”¹æ ˆä¸Šçš„è¿”å›åœ°å€ï¼Œå¹¶ä¸å†è¿”å›å³æ—¶ç¼–è¯‘å™¨ç”Ÿæˆçš„æœºå™¨ç ä¸­ã€‚</p>\n<p>åœ¨ä¸Šé¢çš„ç¨‹åºæ§åˆ¶æµå›¾ä¸­ï¼Œæˆ‘ç”»äº†å¾ˆå¤šçº¢è‰²æ–¹æ¡†çš„é—®å·ã€‚è¿™äº›é—®å·ä¾¿ä»£è¡¨ç€ä¸€ä¸ªä¸ªçš„é™·é˜±ã€‚ä¸€æ—¦è¸å…¥è¿™äº›é™·é˜±ï¼Œä¾¿å°†å‘ç”Ÿå»ä¼˜åŒ–ï¼Œå¹¶åˆ‡æ¢è‡³è§£é‡Šæ‰§è¡Œã€‚</p>\n<p>å»ä¼˜åŒ–çš„è¿‡ç¨‹ç›¸å½“å¤æ‚ã€‚ç”±äºå³æ—¶ç¼–è¯‘å™¨é‡‡ç”¨äº†è®¸å¤šä¼˜åŒ–æ–¹å¼ï¼Œå…¶ç”Ÿæˆçš„ä»£ç å’ŒåŸæœ¬çš„å­—èŠ‚ç çš„å·®å¼‚éå¸¸ä¹‹å¤§ã€‚</p>\n<p>åœ¨å»ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å°†å½“å‰æœºå™¨ç çš„æ‰§è¡ŒçŠ¶æ€è½¬æ¢è‡³æŸä¸€å­—èŠ‚ç ä¹‹å‰çš„æ‰§è¡ŒçŠ¶æ€ï¼Œå¹¶ä»è¯¥å­—èŠ‚ç å¼€å§‹æ‰§è¡Œã€‚è¿™ä¾¿è¦æ±‚å³æ—¶ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è®°å½•å¥½è¿™ä¸¤ç§æ‰§è¡ŒçŠ¶æ€çš„æ˜ å°„ã€‚</p>\n<p>ä¸¾ä¾‹æ¥è¯´ï¼Œç»è¿‡é€ƒé€¸åˆ†æä¹‹åï¼Œæœºå™¨ç å¯èƒ½å¹¶æ²¡æœ‰å®é™…åˆ†é…å¯¹è±¡ï¼Œè€Œæ˜¯åœ¨å„ä¸ªå¯„å­˜å™¨ä¸­å­˜å‚¨è¯¥å¯¹è±¡çš„å„ä¸ªå­—æ®µï¼ˆæ ‡é‡æ›¿æ¢ï¼Œå…·ä½“æˆ‘ä¼šåœ¨ä¹‹åçš„ç¯‡ç« ä¸­è¿›è¡Œä»‹ç»ï¼‰ã€‚åœ¨å»ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼ŒJavaè™šæ‹Ÿæœºéœ€è¦è¿˜åŸå‡ºè¿™ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿è§£é‡Šæ‰§è¡Œæ—¶èƒ½å¤Ÿä½¿ç”¨è¯¥å¯¹è±¡ã€‚</p>\n<p>å½“æ ¹æ®æ˜ å°„å…³ç³»åˆ›å»ºå¥½å¯¹åº”çš„è§£é‡Šæ‰§è¡Œæ ˆæ¡¢åï¼ŒJavaè™šæ‹Ÿæœºä¾¿ä¼šé‡‡ç”¨OSRæŠ€æœ¯ï¼ŒåŠ¨æ€æ›¿æ¢æ ˆä¸Šçš„å†…å®¹ï¼Œå¹¶åœ¨ç›®æ ‡å­—èŠ‚ç å¤„å¼€å§‹è§£é‡Šæ‰§è¡Œã€‚</p>\n<p>æ­¤å¤–ï¼Œåœ¨è°ƒç”¨Javaè™šæ‹Ÿæœºçš„å»ä¼˜åŒ–æ–¹æ³•æ—¶ï¼Œå³æ—¶ç¼–è¯‘å™¨ç”Ÿæˆçš„æœºå™¨ç å¯ä»¥æ ¹æ®äº§ç”Ÿå»ä¼˜åŒ–çš„åŸå› æ¥å†³å®šæ˜¯å¦ä¿ç•™è¿™ä¸€ä»½æœºå™¨ç ï¼Œä»¥åŠä½•æ—¶é‡æ–°ç¼–è¯‘å¯¹åº”çš„Javaæ–¹æ³•ã€‚</p>\n<p>å¦‚æœå»ä¼˜åŒ–çš„åŸå› ä¸ä¼˜åŒ–æ— å…³ï¼Œå³ä½¿é‡æ–°ç¼–è¯‘ä¹Ÿä¸ä¼šæ”¹å˜ç”Ÿæˆçš„æœºå™¨ç ï¼Œé‚£ä¹ˆç”Ÿæˆçš„æœºå™¨ç å¯ä»¥åœ¨è°ƒç”¨å»ä¼˜åŒ–æ–¹æ³•æ—¶ä¼ å…¥Action_Noneï¼Œè¡¨ç¤ºä¿ç•™è¿™ä¸€ä»½æœºå™¨ç ï¼Œåœ¨ä¸‹ä¸€æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶é‡æ–°è¿›å…¥è¿™ä¸€ä»½æœºå™¨ç ã€‚</p>\n<p>å¦‚æœå»ä¼˜åŒ–çš„åŸå› ä¸é™æ€åˆ†æçš„ç»“æœæœ‰å…³ï¼Œä¾‹å¦‚ç±»å±‚æ¬¡åˆ†æï¼Œé‚£ä¹ˆç”Ÿæˆçš„æœºå™¨ç å¯ä»¥åœ¨è°ƒç”¨å»ä¼˜åŒ–æ–¹æ³•æ—¶ä¼ å…¥Action_Recompileï¼Œè¡¨ç¤ºä¸ä¿ç•™è¿™ä¸€ä»½æœºå™¨ç ï¼Œä½†æ˜¯å¯ä»¥ä¸ç»è¿‡é‡æ–°profileï¼Œç›´æ¥é‡æ–°ç¼–è¯‘ã€‚</p>\n<p>å¦‚æœå»ä¼˜åŒ–çš„åŸå› ä¸åŸºäºprofileçš„æ¿€è¿›ä¼˜åŒ–æœ‰å…³ï¼Œé‚£ä¹ˆç”Ÿæˆçš„æœºå™¨ç éœ€è¦åœ¨è°ƒç”¨å»ä¼˜åŒ–æ–¹æ³•æ—¶ä¼ å…¥Action_Reinterpretï¼Œè¡¨ç¤ºä¸ä¿ç•™è¿™ä¸€ä»½æœºå™¨ç ï¼Œè€Œä¸”éœ€è¦é‡æ–°æ”¶é›†ç¨‹åºçš„profileã€‚</p>\n<p>è¿™æ˜¯å› ä¸ºåŸºäºprofileçš„ä¼˜åŒ–å¤±è´¥çš„æ—¶å€™ï¼Œå¾€å¾€ä»£è¡¨è¿™ç¨‹åºçš„æ‰§è¡ŒçŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå› æ­¤éœ€è¦æ›´æ­£å·²æ”¶é›†çš„profileï¼Œä»¥æ›´å¥½åœ°åæ˜ æ–°çš„ç¨‹åºæ‰§è¡ŒçŠ¶æ€ã€‚</p>\n<h2>æ€»ç»“ä¸å®è·µ</h2>\n<p>ä»Šå¤©æˆ‘ä»‹ç»äº†Javaè™šæ‹Ÿæœºçš„profilingä»¥åŠåŸºäºæ‰€æ”¶é›†çš„æ•°æ®çš„ä¼˜åŒ–å’Œå»ä¼˜åŒ–ã€‚</p>\n<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œè§£é‡Šæ‰§è¡Œè¿‡ç¨‹ä¸­ä»…æ”¶é›†æ–¹æ³•çš„è°ƒç”¨æ¬¡æ•°ä»¥åŠå¾ªç¯å›è¾¹çš„æ‰§è¡Œæ¬¡æ•°ã€‚</p>\n<p>å½“æ–¹æ³•è¢«3å±‚C1æ‰€ç¼–è¯‘æ—¶ï¼Œç”Ÿæˆçš„C1ä»£ç å°†æ”¶é›†æ¡ä»¶è·³è½¬æŒ‡ä»¤çš„åˆ†æ”¯profileï¼Œä»¥åŠç±»å‹ç›¸å…³æŒ‡ä»¤çš„ç±»å‹profileã€‚åœ¨éƒ¨åˆ†æç«¯æƒ…å†µä¸‹ï¼ŒJavaè™šæ‹Ÿæœºä¹Ÿä¼šåœ¨è§£é‡Šæ‰§è¡Œè¿‡ç¨‹ä¸­æ”¶é›†è¿™äº›profileã€‚</p>\n<p>åŸºäºåˆ†æ”¯profileçš„ä¼˜åŒ–ä»¥åŠåŸºäºç±»å‹profileçš„ä¼˜åŒ–éƒ½å°†å¯¹ç¨‹åºä»Šåçš„æ‰§è¡Œä½œå‡ºå‡è®¾ã€‚è¿™äº›å‡è®¾å°†ç²¾ç®€æ‰€è¦ç¼–è¯‘çš„ä»£ç çš„æ§åˆ¶æµä»¥åŠæ•°æ®æµã€‚åœ¨å‡è®¾å¤±è´¥çš„æƒ…å†µä¸‹ï¼ŒJavaè™šæ‹Ÿæœºå°†é‡‡å–å»ä¼˜åŒ–ï¼Œé€€å›è‡³è§£é‡Šæ‰§è¡Œå¹¶é‡æ–°æ”¶é›†ç›¸å…³çš„profileã€‚</p>\n<p>ä»Šå¤©çš„å®è·µç¯èŠ‚ï¼Œä½ å¯ä»¥ä½¿ç”¨å‚æ•°</p>\n<pre><code>-XX:CompileCommand='print,*ClassName.methodName'\n</code></pre>\n<p>æ¥æ‰“å°ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å³æ—¶ç¼–è¯‘å™¨ç”Ÿæˆçš„æœºå™¨ç ã€‚å®˜æ–¹çš„JDKå¯èƒ½ä¸åŒ…å«åæ±‡ç¼–å™¨åŠ¨æ€é“¾æ¥åº“ï¼Œå¦‚hsdis-amd64.dylibã€‚ä½ å¯èƒ½éœ€è¦å¦å¤–ä¸‹è½½ã€‚</p>\n<pre><code>// java -XX:CompileCommand='print,CompilationTest.foo' CompilationTestjava -XX:CompileCommand='print,CompilationTest.foo' CompilationTest\npublic class CompilationTest {\n  public static int foo(boolean f, int in) {\n    int v;\n    if (f) {\n      v = in;\n    } else {\n      v = (int) Math.sin(in);\n    }\n    if (v == in) {\n      return 0;\n    } else {\n      return (int) Math.cos(v);\n    }\n  }\n  public static void main(String[] args) throws InterruptedException {\n    for (int i = 0; i &lt; 500000; i++) {\n      foo(true, 2);\n    }\n    Thread.sleep(2000);\n  }\n}\n\n\n// java -XX:+UnlockExperimentalVMOptions -XX:+UseJVMCICompiler -XX:CompileCommand='print,CompilationTest2.hash' CompilationTest2\npublic class CompilationTest2 {\n  public static int hash(Object input) {\n    if (input instanceof Exception) {\n      return System.identityHashCode(input);\n    } else {\n      return input.hashCode();\n    }\n  }\n  public static void main(String[] args) throws InterruptedException {\n    for (int i = 0; i &lt; 500000; i++) {\n      hash(i);\n    }\n    Thread.sleep(2000);\n  }\n}\n</code></pre>\n<p></p>\n","comments":[{"had_liked":false,"id":22631,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1535868832,"is_pvip":false,"replies":[{"id":"8205","content":"æˆ‘è§‰å¾—æ€»ç»“å¾—å¾ˆåˆ°ä½äº†ã€‚<br><br>è¿™ç¯‡æ–‡ç« ä¸»è¦å°±æ˜¯åœ¨ä»‹ç»profile-guided optimizationã€‚ä»‹ç»äº†ä¸¤ä¸ªä¼˜åŒ–çš„æ¡ˆä¾‹ï¼Œä»¥åŠè¿‡äºä¹è§‚çš„ä¼˜åŒ–å‡ºé”™æ—¶æ€ä¹ˆè¡¥æ•‘ã€‚","user_name":"ä½œè€…å›å¤","comment_id":22631,"uid":"1176688","ip_address":"","utype":1,"ctime":1535967401,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"117499985824","product_id":100010301,"comment_content":"è¿™èŠ‚æ˜¯å³æ—¶ç¼–è¯‘å™¨çš„æœ‰å…³ä¼˜åŒ–ã€å»ä¼˜åŒ–ã€ä»¥åŠä½•æ—¶ä¼˜åŒ–å’Œä¸ºä»€ä¹ˆå»ä¼˜åŒ–çš„å†…å®¹ã€‚å¯èƒ½æ¯”è¾ƒåº•å±‚ï¼Œçœ‹ä¸è§æ‘¸ä¸ç€ï¼Œä¸€å¥ä¸¤å¥ä¹Ÿè¯´ä¸æ¸…æ¥šï¼Œæ‰€ä»¥ï¼Œæœ‰ç‚¹æ™¦æ¶©ã€‚<br>ä¸è¿‡ç»è¿‡åå¤çœ‹æœ‰ç‚¹æ„Ÿè§‰äº†ï¼Œå°ç»“å¦‚ä¸‹ï¼š<br>1:profile-æ˜¯æ”¶é›†è¿è¡Œæ—¶çŠ¶æ€ä¿¡æ¯ï¼Œç”¨äºç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œå½“ç„¶ï¼Œæ”¶é›†ä¿¡æ¯ä¹Ÿæ˜¯è€—æ€§èƒ½çš„ï¼Œæ‰€ä»¥ï¼Œä¹Ÿæ˜¯æœ‰å‰ææ¡ä»¶çš„ï¼Œå½“å­˜åœ¨ä¼˜åŒ–çš„å¯èƒ½æ€§æ—¶æ‰å»è´¹åŠ²å§å•¦çš„æ”¶é›†ç›¸å…³ä¿¡æ¯<br><br>2:æœ¬èŠ‚ä»‹ç»çš„ä¸¤ç§ä¼˜åŒ–çš„æ–¹å¼æ€è·¯ï¼Œéƒ½æ˜¯é‡‡ç”¨å–å·§å°‘åšäº‹æƒ…çš„æ–¹å¼å®ç°ï¼Œæ˜¯å»ºç«‹åœ¨å‡è®¾æœ‰äº›äº‹æƒ…ä¸éœ€è¦åšçš„å‰æä¸‹é‡‡ç”¨çš„ä¼˜åŒ–æªæ–½<br><br>3:å¦‚æœå‡è®¾å¤±è´¥ï¼Œé‚£å°±å»ä¼˜åŒ–å‘—ï¼è¿˜ç”¨åŸæ¥çš„æ–¹å¼è€è€å®å®çš„è§£é‡Šæ‰§è¡Œå°±å®Œäº†<br><br>ä¸Šè¿°æ€è·¯æ˜¯ç†è§£äº†ï¼Œä¸è¿‡å…·ä½“å®ç°è¿˜æ˜¯è’™è’™çš„ï¼Œåº”è¯¥æ˜¯æ°´å¹³æœ‰é™ç†è§£ä¸åˆ°ä½å§ï¼æ•´ä½“è¿˜æ˜¯æœ‰æ”¶è·çš„ï¼Œæ‰€ä»¥ï¼Œéå¸¸æ„Ÿè°¢ï¼","like_count":28,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423196,"discussion_content":"æˆ‘è§‰å¾—æ€»ç»“å¾—å¾ˆåˆ°ä½äº†ã€‚\n\nè¿™ç¯‡æ–‡ç« ä¸»è¦å°±æ˜¯åœ¨ä»‹ç»profile-guided optimizationã€‚ä»‹ç»äº†ä¸¤ä¸ªä¼˜åŒ–çš„æ¡ˆä¾‹ï¼Œä»¥åŠè¿‡äºä¹è§‚çš„ä¼˜åŒ–å‡ºé”™æ—¶æ€ä¹ˆè¡¥æ•‘ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535967401,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234801,"user_name":"è¥¿é—¨å¹ç‰›","can_delete":false,"product_type":"c1","uid":1508990,"ip_address":"","ucode":"E5D3624DDE1E83","user_header":"https://static001.geekbang.org/account/avatar/00/17/06/7e/735968e2.jpg","comment_is_top":false,"comment_ctime":1594799073,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78904210401","product_id":100010301,"comment_content":"è¿™ç¯‡æ–‡ç« è®²çš„åˆ†æ”¯ä¼˜åŒ–ï¼Œç±»å‹ä¼˜åŒ–ï¼Œå…¶å®å°±æ˜¯å¯¹åº”äº†CPUæŒ‡ä»¤æ‰§è¡Œæ—¶å€™çš„åˆ†æ”¯é¢„æµ‹å’Œå†’é™©æŠ€æœ¯ï¼ŒJVMåªæ˜¯ä¸ªè™šæ‹Ÿæœºï¼Œéƒ½æ˜¯åœ¨æ¨¡æ‹Ÿæ•´ä¸ªè®¡ç®—æœºçš„è¿è¡Œè¿‡ç¨‹ï¼Œæ‰€ä»¥æŠ½è±¡å‡ºäº†å†…å­˜æ¨¡å‹ç­‰æ¦‚ç‡ï¼Œå› ä¸ºjava åœ¨è§£é‡Šæ‰§è¡Œçš„æ—¶å€™ï¼Œæ•ˆç‡ä¸é«˜ï¼Œä½†æ˜¯è§£é‡Šæ‰§è¡Œçš„å¥½å¤„å°±æ˜¯åº”ç”¨ç¨‹åºçš„å¯åŠ¨ä¸éœ€è¦åŠ è½½å¾ˆå¤šç±»ï¼Œå¯åŠ¨å¿«ã€‚<br>ä¸ºäº†å¹³è¡¡è§£é‡Šæ‰§è¡Œçš„æ•ˆç‡é—®é¢˜ï¼Œå¼•å…¥å³æ—¶ç¼–è¯‘æŠ€æœ¯ï¼Œå³æ—¶ç¼–è¯‘æ˜¯æŠŠä¸€æ•´å—ä»£ç (å¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¾ªç¯å—)ç›´æ¥ç¼–è¯‘æˆä¸€æ®µæœºå™¨ç ï¼Œä»¥ä¾¿åç»­çƒ­ç‚¹ä»£ç é‡å¤ä½¿ç”¨ã€‚<br>CPUåœ¨æ‰§è¡ŒæŒ‡ä»¤çš„æ—¶å€™ï¼Œä»ç¡¬ä»¶æ–¹é¢è€ƒè™‘ï¼ŒCPUå¾ˆå¿«ï¼ŒCPUå®Œå…¨ä¸ä¼šç­‰æŸä¸ªæ¡ä»¶åˆ¤æ–­ç»“æœå‡ºæ¥ä»¥ååœ¨æ ¹æ®åˆ¤æ–­ç»“æœç¡®å®šæ‰§è¡Œé‚£æ¡æŒ‡ä»¤ï¼Œè€Œæ˜¯æ ¹æ®é¢„æµ‹çš„æ–¹æ³•ï¼Œä¸ç­‰åˆ¤æ–­ç»“æœå°±æ ¹æ®åˆ¤æ–­æ‰§è¡Œåç»­çš„æŒ‡ä»¤ï¼Œå¦‚æœå¯¹äº†ï¼Œå°±çœå»ç­‰å¾…æ—¶é—´ï¼Œè™½ç„¶CPUç­‰å¾…ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•çš„æ—¶é—´å¾ˆçŸ­ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶é—´è·Ÿcpuçš„é¢‘ç‡ä¸€æ¯”ï¼Œè¿˜æ˜¯å¾ˆå¯è§‚çš„ï¼Œå¦‚æœé¢„æµ‹é”™äº†ï¼Œé‚£å°±æŠŠæ‰§è¡Œé”™è¯¯çš„æŒ‡ä»¤ç§»é™¤ï¼Œæ¶‰åŠåˆ°åŠ è½½åˆ°å¯„å­˜å™¨çš„æ•°æ®éƒ½åˆ æ‰ï¼Œç„¶ååœ¨æŒ‰æ­£ç¡®çš„åˆ†æ”¯å»æ‰§è¡Œã€‚<br>javaåœ¨å³æ—¶ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å‡ºæ¥çš„æ˜¯ä¸€æ•´æ®µæœºå™¨ç ï¼Œç¨‹åºè¿˜æ²¡è¿è¡Œå‘¢ï¼Œæ— æ³•åˆ¤æ–­èµ°å“ªä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥æ˜¯é€šè¿‡æ”¶é›†çš„profile æ•°æ®è¿›è¡Œé¢„æµ‹ï¼Œé¢„æµ‹å¯¹äº†å½“ç„¶å¥½ï¼Œé”™å°±é”™äº†ï¼Œåœ¨å›å»èµ°ä¸€éå°±å¥½ï¼Œä½†æ˜¯æ ¹æ®profile çš„æ•°æ®è¿›è¡Œé¢„æµ‹ï¼Œé”™è¯¯çš„æ¦‚ç‡ä¸é«˜ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œifæ¡ä»¶åˆ¤æ–­ï¼Œé¢„æµ‹é”™è¯¯çš„æ¦‚ç‡æ˜¯ç™¾åˆ†ä¹‹äº”åï¼Œé€šè¿‡æ”¶é›†æ•°æ®çš„åˆ†æï¼Œå®Œå…¨å¯ä»¥æŠŠè¿™ä¸ªé”™è¯¯çš„æ¦‚ç‡é™åˆ°å¾ˆä½ï¼Œæ‰€ä»¥jvmåœ¨å³æ—¶ç¼–è¯‘çš„æ—¶å€™ï¼Œå®Œå…¨æœ‰å¿…è¦è¿›è¡Œé¢„æµ‹ï¼Œè™½ç„¶æ”¶é›†æ•°æ®æœ‰å¼€é”€ï¼Œä½†æ˜¯åŒæ ·å¸¦æ¥çš„æ€§èƒ½æ•ˆç‡ä¹Ÿæœ‰æå‡ã€‚<br>ä¹‹å‰åªæ˜¯å¯¹cpuçš„åˆ†æ”¯é¢„æµ‹å’Œæ•°æ®å†’é™©æœ‰äº†è§£ï¼Œä»Šå¤©çœ‹äº†è€å¸ˆçš„æ–‡ç« ï¼ŒçœŸæ˜¯å¤§èµã€‚æ–¹æ³•è®ºéƒ½æ˜¯é€šç”¨çš„ï¼Œåªæ˜¯åœ¨ä¸åŒçš„åœ°æ–¹ç”¨äº†ä¸åŒçš„å®ç°ã€‚","like_count":19},{"had_liked":false,"id":31325,"user_name":"xiaobang","can_delete":false,"product_type":"c1","uid":1157508,"ip_address":"","ucode":"1735BDCFD61655","user_header":"https://static001.geekbang.org/account/avatar/00/11/a9/84/c87b51ce.jpg","comment_is_top":false,"comment_ctime":1539150485,"is_pvip":false,"replies":[{"id":"11446","content":"åœ¨åŒä¸€æ–¹æ³•å†…ï¼Œæ‰€æœ‰çš„å­—èŠ‚ç éƒ½è¢«ç¼–è¯‘äº†ã€‚æœºå™¨ç ä¸å­—èŠ‚ç çš„åˆ‡æ¢åœ¨æ–¹æ³•è°ƒç”¨(æˆ–è€…å¾ªç¯å›è¾¹ï¼Œå¯¹åº”OSRç¼–è¯‘)ã€‚<br><br>å¯¹äºå·²ç»åœ¨å †ä¸Šçš„å¯¹è±¡ï¼Œå­—èŠ‚ç å’Œæœºå™¨ç æ‰€ä½¿ç”¨å¯¹è±¡å¸ƒå±€æ˜¯ä¸€è‡´çš„ï¼Œè§£é‡Šæ‰§è¡Œå™¨ä»å“ªä¸ªåç§»é‡è®¿é—®æŸå­—æ®µï¼Œæœºå™¨ç ä¹Ÿä¼šä»è¿™ä¸ªåç§»é‡è®¿é—®å­—æ®µã€‚(å¯¹äºæ ‡é‡æ›¿æ¢çš„æ–°å»ºå¯¹è±¡ï¼Œæœºå™¨ç ä¼šåœ¨å»ä¼˜åŒ–æ—¶é‡å»ºå¯¹è±¡ã€‚)<br><br>JVMé‡Œçš„Runtimeæ˜¯å…±äº«çš„ï¼Œå› æ­¤åƒnewå¯¹è±¡ï¼Œå®é™…ä¸Šéƒ½ä¼šèµ°åˆ°åŒä¸€ä¸ªåº•å±‚æ–¹æ³•ä¸­ã€‚GCæ˜¯ç‹¬ç«‹çš„ç»„ä»¶ï¼Œè·Ÿå­—èŠ‚ç æœºå™¨ç æ²¡å…³ç³»ï¼Œæ‰€æœ‰newå¯¹è±¡éƒ½ä¼šè¢«JVM runtimeè¿½è¸ªã€‚","user_name":"ä½œè€…å›å¤","comment_id":31325,"uid":"1176688","ip_address":"","utype":1,"ctime":1539275972,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":2,"race_medal":0,"score":"31603921557","product_id":100010301,"comment_content":"æƒ³é—®ä¸‹ç”Ÿæˆçš„æœºå™¨ç å¦‚ä½•å’Œå…¶å®ƒæœªç¼–è¯‘çš„å­—èŠ‚ç äº¤äº’ï¼Ÿæ¯”å¦‚ç›¸äº’è°ƒç”¨ï¼Œè®¿é—®å¯¹è±¡å†…çš„å­—æ®µï¼Œnewå¯¹è±¡å’Œå¯¹åº”çš„gc","like_count":7,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426294,"discussion_content":"åœ¨åŒä¸€æ–¹æ³•å†…ï¼Œæ‰€æœ‰çš„å­—èŠ‚ç éƒ½è¢«ç¼–è¯‘äº†ã€‚æœºå™¨ç ä¸å­—èŠ‚ç çš„åˆ‡æ¢åœ¨æ–¹æ³•è°ƒç”¨(æˆ–è€…å¾ªç¯å›è¾¹ï¼Œå¯¹åº”OSRç¼–è¯‘)ã€‚\n\nå¯¹äºå·²ç»åœ¨å †ä¸Šçš„å¯¹è±¡ï¼Œå­—èŠ‚ç å’Œæœºå™¨ç æ‰€ä½¿ç”¨å¯¹è±¡å¸ƒå±€æ˜¯ä¸€è‡´çš„ï¼Œè§£é‡Šæ‰§è¡Œå™¨ä»å“ªä¸ªåç§»é‡è®¿é—®æŸå­—æ®µï¼Œæœºå™¨ç ä¹Ÿä¼šä»è¿™ä¸ªåç§»é‡è®¿é—®å­—æ®µã€‚(å¯¹äºæ ‡é‡æ›¿æ¢çš„æ–°å»ºå¯¹è±¡ï¼Œæœºå™¨ç ä¼šåœ¨å»ä¼˜åŒ–æ—¶é‡å»ºå¯¹è±¡ã€‚)\n\nJVMé‡Œçš„Runtimeæ˜¯å…±äº«çš„ï¼Œå› æ­¤åƒnewå¯¹è±¡ï¼Œå®é™…ä¸Šéƒ½ä¼šèµ°åˆ°åŒä¸€ä¸ªåº•å±‚æ–¹æ³•ä¸­ã€‚GCæ˜¯ç‹¬ç«‹çš„ç»„ä»¶ï¼Œè·Ÿå­—èŠ‚ç æœºå™¨ç æ²¡å…³ç³»ï¼Œæ‰€æœ‰newå¯¹è±¡éƒ½ä¼šè¢«JVM runtimeè¿½è¸ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539275972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1312195,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJyos9KR4uD0712bmZ7NpwQ5MDYibFEXeEDdcQKNDElASPLVwiciavBf0UVY0B0QEwJibvu1hPhW8lmuA/132","nickname":"jeffrey","note":"","ucode":"28DCE7A4CE1A5F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":352025,"discussion_content":"å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå³æ—¶ç¼–è¯‘ç¼–è¯‘æ˜¯ä¸€ç›´åœ¨è¿è¡Œçš„ï¼Œèƒ½å¦è®¾å®šä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œè¿‡äº†æ—¶é—´ç‚¹åå°±ä¸å†åšå³æ—¶ç¼–è¯‘çš„ä¼˜åŒ–äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614575626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22214,"user_name":"å¾å¿—æ¯…","can_delete":false,"product_type":"c1","uid":1180544,"ip_address":"","ucode":"7FE57C2FE64055","user_header":"https://static001.geekbang.org/account/avatar/00/12/03/80/1d5a150f.jpg","comment_is_top":false,"comment_ctime":1535556530,"is_pvip":false,"replies":[{"id":"8004","content":"JMMçš„å·¥ä½œå†…å­˜æ˜¯ä¸ªè™šæ‹Ÿæ¦‚å¿µï¼Œæ˜ å°„åˆ°æˆ‘ä»¬çš„ä½“ç³»æ¶æ„å°±æ˜¯CPUç¼“å­˜ã€‚<br><br>è¦è¿½è¸ªç¼“å­˜æ›´æ–°äº‹ä»¶çš„è¯ï¼Œä¼°è®¡å¾—çœ‹perfï¼ŒVTuneç­‰æ”¯æŒCPU performance counterçš„å·¥å…·å•¦","user_name":"ä½œè€…å›å¤","comment_id":22214,"uid":"1176688","ip_address":"","utype":1,"ctime":1535619066,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":2,"race_medal":0,"score":"14420458418","product_id":100010301,"comment_content":"é›¨è¿ªè€å¸ˆï¼Œè¯·é—®æœ‰ä»€ä¹ˆæ–¹å¼å¯ä»¥è·Ÿè¸ªJMMé‡Œä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜çš„äº¤äº’ï¼Œå¦‚ä»€ä¹ˆæ—¶å€™åŠ è½½åˆ°å·¥ä½œå†…å­˜ã€ä»€ä¹ˆæ—¶å€™åŒæ­¥åˆ°ä¸»å†…å­˜ï½ ç›¼å›å¤ï¼Œè°¢è°¢","like_count":3,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423042,"discussion_content":"JMMçš„å·¥ä½œå†…å­˜æ˜¯ä¸ªè™šæ‹Ÿæ¦‚å¿µï¼Œæ˜ å°„åˆ°æˆ‘ä»¬çš„ä½“ç³»æ¶æ„å°±æ˜¯CPUç¼“å­˜ã€‚\n\nè¦è¿½è¸ªç¼“å­˜æ›´æ–°äº‹ä»¶çš„è¯ï¼Œä¼°è®¡å¾—çœ‹perfï¼ŒVTuneç­‰æ”¯æŒCPU performance counterçš„å·¥å…·å•¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535619066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1097836,"avatar":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","nickname":"éšå¿ƒè€Œè‡³","note":"","ucode":"31866865255101","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":36468,"discussion_content":"å»ºè®®æœç´¢ä¸‹ç¼“å­˜ä¸€è‡´æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571380131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221684,"user_name":"ä»»é‘«","can_delete":false,"product_type":"c1","uid":1142025,"ip_address":"","ucode":"9803EB15B634C3","user_header":"https://static001.geekbang.org/account/avatar/00/11/6d/09/ffeabc27.jpg","comment_is_top":false,"comment_ctime":1590566080,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5885533376","product_id":100010301,"comment_content":"ã€Šè€å­ã€‹å°è¨€ï¼šâ€å°†æ¬²å–ä¹‹ï¼Œå¿…å…ˆäºˆä¹‹â€œã€‚æˆ‘ä»¬æƒ³è¦ä½¿ç”¨ç¼–è¯‘ä¼˜åŒ–æ¥æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼Œè¿™å°±æ˜¯ä½ æƒ³è¦â€å–â€œï¼Œç„¶è€Œä¼˜åŒ–æ˜¯è¦ä»˜å‡ºä»£ä»·çš„ï¼Œè¿™å°±æ˜¯â€äºˆâ€œï¼›å…¨éƒ¨éƒ½ç¼–è¯‘ä¼˜åŒ–å½“ç„¶ä»£ä»·å¤ªå¤§ï¼Œæˆ‘ä»¬å¸Œæœ›è®©è¿™ä¸ªä»£ä»·å°ä¸€ç‚¹ï¼Œå› æ­¤éœ€è¦åœ¨å‰æœŸä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­æ”¶é›†å®ƒçš„profileï¼Œæ ¹æ®è¿™ä¸ªç»Ÿè®¡æ¶ˆæ¯æ¥å†³å®šå“ªäº›ä¼˜åŒ–ï¼Œæ€ä¹ˆä¼˜åŒ–ï¼Œè¿™å°±æ˜¯è¦ç¡®å®šä¼˜åŒ–çš„ç­–ç•¥ï¼Œè¿™åˆæ˜¯ä¸€ä¸ªâ€å–â€œï¼Œæ”¶é›†profileä¼šé™ä½ä»£ç è¿è¡Œæ•ˆç‡ï¼Œè¿™å°±æ˜¯ä¸ºäº†ç¡®å®šè¿™ä¸ªç¼–è¯‘ä¼˜åŒ–ç­–ç•¥æ‰€è¦ä»˜å‡ºçš„ä»£ä»·ï¼Œè¿™å°±æ˜¯ç¬¬äºŒä¸ªâ€äºˆâ€œã€‚ä¸€åˆ‡ä¼˜åŒ–å‡éœ€æƒè¡¡ä»£ä»·ï¼Œä¸ç®¡ä½ æ˜¯â€æ—¶é—´æ¢ç©ºé—´â€œã€â€ç©ºé—´æ¢æ—¶é—´â€œä»€ä¹ˆçš„ï¼Œå°±æ˜¯ä¸€ä¸ªâ€å°†æ¬²å–ä¹‹å¿…å…ˆä¸ä¹‹â€œã€‚","like_count":2},{"had_liked":false,"id":22732,"user_name":"ä¹”æ¯…","can_delete":false,"product_type":"c1","uid":1196561,"ip_address":"","ucode":"7AAA209C173AEA","user_header":"https://static001.geekbang.org/account/avatar/00/12/42/11/f26d89fd.jpg","comment_is_top":false,"comment_ctime":1535943158,"is_pvip":false,"replies":[{"id":"8206","content":"é©¬ä¸Šä¼šä¸“é—¨å¼€ä¸€ç¯‡ä»‹ç»ã€‚å¯ä»¥å…³æ³¨ä¸€ä¸‹OpenJDKçš„Panamaé¡¹ç›®ï¼Œä¼šæä¾›vector API","user_name":"ä½œè€…å›å¤","comment_id":22732,"uid":"1176688","ip_address":"","utype":1,"ctime":1535967575,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"5830910454","product_id":100010301,"comment_content":"è¯·æ•™ä¸‹è€å¸ˆï¼ŒJITåˆ©ç”¨SIMDè¿›è¡Œä¼˜åŒ–çš„å®ç°ç¨‹åº¦ï¼Ÿå®è·µä¸­çœ‹åˆ°å¤§å¤šæ˜¯ä»…ä»…åšäº†å¾ªç¯å±•å¼€ã€‚æ¢è¨€ä¹‹ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæœ€ä½³å®è·µï¼Œå¯ä»¥å†™å‡ºJIT SIMDä¼˜åŒ–å‹å¥½çš„ä»£ç ã€‚","like_count":1,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423243,"discussion_content":"é©¬ä¸Šä¼šä¸“é—¨å¼€ä¸€ç¯‡ä»‹ç»ã€‚å¯ä»¥å…³æ³¨ä¸€ä¸‹OpenJDKçš„Panamaé¡¹ç›®ï¼Œä¼šæä¾›vector API","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535967575,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22211,"user_name":"é™ˆå‰ç±³","can_delete":false,"product_type":"c1","uid":1024310,"ip_address":"","ucode":"CE47B971F6A0B7","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/36/14b9dcb8.jpg","comment_is_top":false,"comment_ctime":1535555767,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5830523063","product_id":100010301,"comment_content":"é‚£ä¹ˆæœ‰ä»€ä¹ˆè§„åˆ™ï¼Œå¯ä»¥è®©ä»£ç å°½å¯èƒ½è¢«ä¼˜åŒ–ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1210699,"avatar":"https://static001.geekbang.org/account/avatar/00/12/79/4b/740f91ca.jpg","nickname":"-W.LI-","note":"","ucode":"3556786538664F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":25726,"discussion_content":"æ¡ä»¶è®¾ä½ä¸€ç‚¹?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570547374,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319558,"user_name":"å†œå¤«å±±æ³‰","can_delete":false,"product_type":"c1","uid":2103543,"ip_address":"","ucode":"1AA31FA24A8B05","user_header":"https://static001.geekbang.org/account/avatar/00/20/18/f7/35873e59.jpg","comment_is_top":false,"comment_ctime":1635848810,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635848810","product_id":100010301,"comment_content":"åªæœ‰åœ¨æ–¹æ³•è§¦å‘ C1 ç¼–è¯‘åï¼ŒJava è™šæ‹Ÿæœºè®¤ä¸ºè¯¥æ–¹æ³•æœ‰å¯èƒ½è¢« C2 ç¼–è¯‘ï¼Œæ–¹æ‰åœ¨è¯¥æ–¹æ³•çš„ C1 ä»£ç ä¸­æ”¶é›†è¿™äº› profileã€‚  â€” è¯·é—®è¿™ä¸ªä½ç½®ï¼ŒJava è™šæ‹Ÿæœºæ˜¯å¦‚ä½•åˆ¤æ–­è¯¥æ–¹æ³•æ˜¯å¦æœ‰å¯èƒ½è¢« C2 ç¼–è¯‘çš„å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":278598,"user_name":"æ°´æµ´æ¸…é£","can_delete":false,"product_type":"c1","uid":1133926,"ip_address":"","ucode":"36EF5179E6F952","user_header":"https://static001.geekbang.org/account/avatar/00/11/4d/66/28742ad4.jpg","comment_is_top":false,"comment_ctime":1613121694,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1613121694","product_id":100010301,"comment_content":"å³æ—¶ç¼–è¯‘é‡‡ç”¨åˆ†å±‚ç¼–è¯‘æ¥å¯¹æ‰§è¡Œæ•ˆç‡ä¸ç¼–è¯‘æ•ˆç‡ä¹‹é—´è¿›è¡Œå¹³è¡¡.<br><br>åˆ†å±‚åˆ†ä¸ºäº”å±‚ï¼š<br>0.è§£é‡Šæ‰§è¡Œ<br>1.c1ç¼–è¯‘æ‰§è¡Œï¼ˆå…¶ä¸­åˆ†ä¸ºä¸‰å±‚ï¼Œåä¸¤å±‚æ”¶é›†profileï¼Œprofileç”¨äºc2ç¼–è¯‘ä¼˜åŒ–ï¼Œå±‚å±‚é€’è¿›ï¼‰<br>2.c2ç¼–è¯‘æ‰§è¡Œ<br><br>å³ä½¿ç¼–è¯‘çš„profileæ”¶é›†ï¼›<br>1.æ–¹æ³•è°ƒç”¨æ¬¡æ•°<br>2.å¾ªç¯å›è¾¹æ¬¡æ•°<br>3.åˆ†æ”¯profile<br>4.ç±»å‹profile<br><br>profileçš„æ”¶é›†å¯¹æ€§èƒ½æ˜¯ğŸˆ¶ï¸æ¶ˆè€—çš„ï¼Œå› æ­¤éœ€è¦åˆ†å±‚ç¼–è¯‘.<br><br>å³æ—¶ç¼–è¯‘çš„ä¼˜åŒ–æ˜¯åŸºäºå‡è®¾ï¼ˆè¿è¡Œæ€çš„çŠ¶æ€è½¬æ¢ä»¥åŠåˆ†å¸ƒï¼‰ï¼Œå¦‚æœå¤±è´¥ï¼Œåœ¨ä¸å‡è®¾åŸå› ç›¸å…³æ—¶ï¼Œéœ€è¦åšå»ä¼˜åŒ–.<br>","like_count":0},{"had_liked":false,"id":226479,"user_name":"å‰‘å…«","can_delete":false,"product_type":"c1","uid":1297630,"ip_address":"","ucode":"0A09F41DB8A4E7","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/de/e28c01e1.jpg","comment_is_top":false,"comment_ctime":1592119019,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1592119019","product_id":100010301,"comment_content":"å³æ—¶ç¼–ç»å™¨çš„ä¼˜åŒ–ï¼š<br>1.å°†é«˜é¢‘ä»£ç å˜æˆæœºå™¨ç ï¼Œå‡å°‘ç¿»è¯‘çš„æ€§èƒ½æ¶ˆè€—<br>é«˜é¢‘ä»£ç æœ‰ï¼šæ–¹æ³•ï¼ŒåŠå¾ªç¯ä¸­çš„ä»£ç <br>2.åŸºäºæ¡ä»¶å‡è®¾<br>å°±æ˜¯å°†ç›¸åº”çš„æ¡ä»¶åˆ¤æ–­æ ¹æ®ä¿¡æ¯æ¥è¿›è¡Œå‰ªæï¼Œå‡å°‘ç¨‹åºæµã€‚<br>å¦‚æœä¼˜åŒ–çš„æœºå™¨ç åœ¨æ‰§è¡Œæ—¶å‘ç°æ²¡èµ°åˆ°è¿™ä¸ªåˆ†æ”¯ä¼šè§¦å‘ä¸€ä¸ªé™·é˜±ä»£ç ï¼Œé‡‡ç”¨è§£é‡Šæ‰§è¡Œ","like_count":0},{"had_liked":false,"id":164854,"user_name":"é¥­ç²’","can_delete":false,"product_type":"c1","uid":1153455,"ip_address":"","ucode":"4C3220B0D43997","user_header":"https://static001.geekbang.org/account/avatar/00/11/99/af/d29273e2.jpg","comment_is_top":false,"comment_ctime":1577100672,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577100672","product_id":100010301,"comment_content":"ç»™æˆ‘çš„æ„Ÿè§‰æ˜¯ JVM åŸºäºä»£ç æ‰§è¡Œæ•°æ®çš„æ”¶é›†åˆ†æï¼ˆæœ‰ç‚¹åƒæ˜¯ç”¨æ¦‚ç‡ç»Ÿè®¡ã€æœºå™¨å­¦ä¹ æ¥åˆ†ææ”¶é›†çš„ä»£ç æ‰§è¡Œæ•°æ® profilingï¼‰ï¼Œåœ¨ä¸æ”¹å˜ä»£ç æœ€ç»ˆæ‰§è¡Œé€»è¾‘çš„æ­£ç¡®æ€§ä¸‹ï¼Œä¼˜åŒ–ä»£ç çš„æ‰§è¡Œã€‚æ— æ³•ä¼˜åŒ–çš„æƒ…å†µä¸‹å†å›é€€ä¼˜åŒ–ã€‚","like_count":0},{"had_liked":false,"id":142497,"user_name":"éšå¿ƒè€Œè‡³","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1571380542,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571380542","product_id":100010301,"comment_content":"Windowséœ€è¦ä¸‹è½½å¯¹åº”çš„dllæ–‡ä»¶ï¼ŒGoogleäº†å¯¹åº”çš„ä¸‹è½½åœ°å€<br>https:&#47;&#47;github.com&#47;LiuDui&#47;JavaTools","like_count":0},{"had_liked":false,"id":142493,"user_name":"éšå¿ƒè€Œè‡³","can_delete":false,"product_type":"c1","uid":1097836,"ip_address":"","ucode":"31866865255101","user_header":"https://static001.geekbang.org/account/avatar/00/10/c0/6c/29be1864.jpg","comment_is_top":false,"comment_ctime":1571379934,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571379934","product_id":100010301,"comment_content":"è¿™ä¸¤èŠ‚éƒ½æ˜¯è®²JVMæƒ³åšä¸€äº›å‡è®¾ï¼Œæ¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼ˆä¼˜åŒ–ï¼‰ï¼›å¦‚æœå‡è®¾é”™äº†å°±é‡æ–°æ¥è¿‡ï¼ˆå»ä¼˜åŒ–ï¼Œé€€åŒ–ä¸ºè§£é‡Šæ‰§è¡Œï¼‰ã€‚<br>è¿™é‡ŒJVMå°è¯•åšçš„äº‹æƒ…ï¼Œæ„Ÿè§‰å’Œåº•å±‚CPUæƒ³åšçš„åˆ†æ”¯é¢„æµ‹å¦‚å‡ºä¸€è¾™ã€‚<br>å…·ä½“å¯å‚è€ƒï¼šhttps:&#47;&#47;time.geekbang.org&#47;column&#47;article&#47;102166","like_count":1},{"had_liked":false,"id":126292,"user_name":"æ¨±å°è·¯ä¾ç„¶","can_delete":false,"product_type":"c1","uid":1269957,"ip_address":"","ucode":"DBA9FF68015FE5","user_header":"https://static001.geekbang.org/account/avatar/00/13/60/c5/69286d58.jpg","comment_is_top":false,"comment_ctime":1566357626,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566357626","product_id":100010301,"comment_content":"ç±»å‹profileé‡Œï¼Œè€å¸ˆçš„ç¬¬ä¸€ä¸ªå›¾æ„Ÿè§‰æœ‰ç‚¹æ€ªæ€ªçš„ï¼ŒæŒ‰æ–‡å­—æ¥æè¿°çš„è¯ï¼Œä¸ªäººç†è§£ä¸ºï¼š<br>- åŸæ¥ï¼š<br>    - æµ‹è¯•è¯¥ç±»æ˜¯å¦ä¸Exceptionç±»å‹ä¸€è‡´<br>    - æµ‹è¯•è¯¥ç±»çˆ¶ç±»æ˜¯å¦ä¸Exceptionç±»å‹ä¸€è‡´<br>    - æµ‹è¯•è¯¥ç±»ç¥–å…ˆç±»æ˜¯å¦ä¸Exceptionç±»å‹ä¸€è‡´<br>    - æµ‹è¯•è¯¥ç±»æ˜¯å¦æœ‰ç›´æ¥å®ç°æˆ–è€…é—´æ¥å®ç°çš„æ¥å£ä¸Exceptionç±»å‹ä¸€è‡´<br>    - éƒ½ä¸ä¸€è‡´ï¼Œreturn ((Integer)in).value;<br><br>ç„¶åä¼˜åŒ–ä¸ºäº†ï¼Œç›´æ¥åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸º Integerï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç›´æ¥è¿”å›((Integer)in).valueã€‚ä¸ç»è¿‡ä¸­é—´çš„çˆ¶ç±»ã€ç¥–å…ˆç±»ã€ç›´æ¥é—´æ¥å®ç°çš„æ¥å£ç±»å‹åˆ¤æ–­ç­‰","like_count":0},{"had_liked":false,"id":22318,"user_name":"èŒ¶åº•","can_delete":false,"product_type":"c1","uid":1188926,"ip_address":"","ucode":"687DD3686A84D2","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/3e/692a93f7.jpg","comment_is_top":false,"comment_ctime":1535597762,"is_pvip":false,"replies":[{"id":"8007","content":"Java 10è‡ªå¸¦Graalç¼–è¯‘å™¨ã€‚Oracle OTNä¸‹çš„GraalVMä¹Ÿæ˜¯ç¼–è¯‘å¥½çš„ç‰ˆæœ¬ï¼Œæ— éœ€å¦å¤–ç¼–è¯‘ã€‚<br><br>å¦‚æœæƒ³è¦æ”¹Graalæºä»£ç åç¼–è¯‘ï¼Œå¯ä»¥å‚è€ƒgithub.com&#47;oracle&#47;graal&#47;tree&#47;master&#47;compiler&#47;README.md","user_name":"ä½œè€…å›å¤","comment_id":22318,"uid":"1176688","ip_address":"","utype":1,"ctime":1535619449,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"1535597762","product_id":100010301,"comment_content":"å¤§ä½¬æˆ‘å·²ç»æŠŠgraalæ‹¿åˆ°æ‰‹äº†ã€‚ç›®å‰ç”¨äº†ä¸‹guä¸‹è¯­è¨€æŒºå¥½ä½¿çš„ã€‚ä½†æ˜¯è¿™ä¸ªæ€ä¹ˆç¼–è¯‘å•Šã€‚ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423067,"discussion_content":"Java 10è‡ªå¸¦Graalç¼–è¯‘å™¨ã€‚Oracle OTNä¸‹çš„GraalVMä¹Ÿæ˜¯ç¼–è¯‘å¥½çš„ç‰ˆæœ¬ï¼Œæ— éœ€å¦å¤–ç¼–è¯‘ã€‚\n\nå¦‚æœæƒ³è¦æ”¹Graalæºä»£ç åç¼–è¯‘ï¼Œå¯ä»¥å‚è€ƒgithub.com/oracle/graal/tree/master/compiler/README.md","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535619449,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":22298,"user_name":"æäºŒæœ¨","can_delete":false,"product_type":"c1","uid":1103091,"ip_address":"","ucode":"30E03BB84ADB27","user_header":"https://static001.geekbang.org/account/avatar/00/10/d4/f3/129d6dfe.jpg","comment_is_top":false,"comment_ctime":1535593123,"is_pvip":true,"replies":[{"id":"8005","content":"è°ƒä¼˜çš„æƒ…å†µä¸å¤šçš„ï¼Œèƒ½åšçš„å³æ—¶ç¼–è¯‘å™¨éƒ½å¸®ä½ åšäº†","user_name":"ä½œè€…å›å¤","comment_id":22298,"uid":"1176688","ip_address":"","utype":1,"ctime":1535619125,"user_name_real":"éƒ‘é›¨è¿ª"}],"discussion_count":1,"race_medal":0,"score":"1535593123","product_id":100010301,"comment_content":"æ„Ÿè§‰å¥½éš¾ï¼Œæˆ‘æƒ³é—®ä¸‹åœ¨ç°å®æƒ…å†µä¸‹é€šè¿‡ç¼–è¯‘å™¨è°ƒä¼˜çš„æƒ…å†µå¤šå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1176688,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f4/70/2f61fa20.jpg","nickname":"éƒ‘é›¨è¿ª","note":"","ucode":"F7CA1AE501EAFF","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":423061,"discussion_content":"è°ƒä¼˜çš„æƒ…å†µä¸å¤šçš„ï¼Œèƒ½åšçš„å³æ—¶ç¼–è¯‘å™¨éƒ½å¸®ä½ åšäº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1535619125,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}