{"id":625484,"title":"102｜如何使用Django-admin实现文章上传？","content":"<p><strong>本讲相关链接</strong><br>\n字段类型参考：<a href=\"https://docs.djangoproject.com/zh-hans/4.0/ref/models/fields/\">https://docs.djangoproject.com/zh-hans/4.0/ref/models/fields/</a><br>\n管理界面地址：<a href=\"http://127.0.0.1/admin\">http://127.0.0.1/admin</a></p><p><strong>课后习题</strong><br>\n请你根据这一讲的内容，通过 Django-admin 实现 Blog 的上传功能。</p><p><strong>课程代码、课件及其他相关资料地址</strong><br>\n<a href=\"https://gitee.com/wilsonyin/zero-basics-python\">https://gitee.com/wilsonyin/zero-basics-python</a></p>","comments":[{"had_liked":false,"id":367446,"user_name":"Cy23","can_delete":false,"product_type":"c3","uid":1591293,"ip_address":"辽宁","ucode":"8DC561C5151758","user_header":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","comment_is_top":true,"comment_ctime":1675238202,"is_pvip":false,"replies":[{"id":133872,"content":"赞，顶你上去","user_name":"作者回复","user_name_real":"编辑","uid":1056235,"ctime":1675399058,"ip_address":"广东","comment_id":367446,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"如果按照视频一步一步来，可能会遇见的问题\n1.搭建完访问现实英文，因为没改settings.py里的时区，\n2.改成mysql后无法登录，因为没创建用户python manage.py createsuperuser\n3.进入后台不现实MYBLOG栏目，因为setting.py中的INSTALLED_APPS里老师开始忘记说添加&quot;myblog&quot;\n4.对models.py里定义字段后，要记得python manage.py makemigrations和python manage.py migrate，生成变动与同步到数据库中","like_count":18,"discussions":[{"author":{"id":1056235,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1d/eb/b2123759.jpg","nickname":"尹会生","note":"","ucode":"D1093DBD093617","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":601741,"discussion_content":"赞，顶你上去","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1675399058,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"广东","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378535,"user_name":"jie","can_delete":false,"product_type":"c3","uid":3678491,"ip_address":"","ucode":"D2C69B56B8EFC7","user_header":"https://static001.geekbang.org/account/avatar/00/38/21/1b/67a67c57.jpg","comment_is_top":false,"comment_ctime":1690378180,"is_pvip":false,"replies":[{"id":138169,"content":"有几个原因，你可以依次排查一下：\n首先，你需要使用 makemigrations 命令来生成迁移文件。这个命令会检查你的模型定义与数据库的结构，然后创建一个新的迁移文件来表示这些更改。\npython manage.py makemigrations\n\n模型没有更改：如果自上次迁移以来没有对模型进行任何更改，则不会生成新的迁移文件。\n\n应用没有添加到 INSTALLED_APPS：确保你想要迁移的应用已添加到设置文件（通常是 settings.py）中的 INSTALLED_APPS 列表中。","user_name":"作者回复","user_name_real":"编辑","uid":1056235,"ctime":1691593440,"ip_address":"甘肃","comment_id":378535,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"为什么执行python manage.py migrate之后，没有生成迁移文件?也就是在migrations里没有像0001_initial字样的py文件","like_count":0,"discussions":[{"author":{"id":1056235,"avatar":"https://static001.geekbang.org/account/avatar/00/10/1d/eb/b2123759.jpg","nickname":"尹会生","note":"","ucode":"D1093DBD093617","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":625343,"discussion_content":"有几个原因，你可以依次排查一下：\n首先，你需要使用 makemigrations 命令来生成迁移文件。这个命令会检查你的模型定义与数据库的结构，然后创建一个新的迁移文件来表示这些更改。\npython manage.py makemigrations\n\n模型没有更改：如果自上次迁移以来没有对模型进行任何更改，则不会生成新的迁移文件。\n\n应用没有添加到 INSTALLED_APPS：确保你想要迁移的应用已添加到设置文件（通常是 settings.py）中的 INSTALLED_APPS 列表中。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691593440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"甘肃","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":386987,"user_name":"JSJohnsonJS","can_delete":false,"product_type":"c3","uid":1938853,"ip_address":"四川","ucode":"732F8EA6078302","user_header":"https://static001.geekbang.org/account/avatar/00/1d/95/a5/de5df896.jpg","comment_is_top":false,"comment_ctime":1706086985,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"INSTALLED_APPS里面要添加myblog，这么重要的信息，老师居然是讲到最后才提出来，导致一开始按照老师的步骤走，执行结果就是跟老师的不一样。建议老师在最开始对settings修改的时候，就重点强调一下，后续就会跟老师的执行结果一致了。","like_count":2},{"had_liked":false,"id":367445,"user_name":"Cy23","can_delete":false,"product_type":"c3","uid":1591293,"ip_address":"辽宁","ucode":"8DC561C5151758","user_header":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","comment_is_top":false,"comment_ctime":1675237903,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100310001,"comment_content":"from django.db import models\n\n# Create your models here.\n\nclass Article(models.Model):\n  title = models.CharField(max_length=200, verbose_name=&quot;文章标题&quot;)\n  pub_date = models.DateTimeField(verbose_name=&quot;发布时间&quot;)\n  data = models.TextField(max_length=200, verbose_name=&quot;文章内容&quot;)\n  image = models.ImageField(verbose_name=&quot;图片&quot;, null=True, blank=True, upload_to=&#39;image&#39;, max_length=200)\n\n\n\n\npython manage.py makemigrations\npython manage.py migrate\npython manage.py runserver 127.0.0.1:8080","like_count":2}]}