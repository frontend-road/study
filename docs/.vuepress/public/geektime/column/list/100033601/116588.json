{"id":116588,"title":"03 | HTTP请求流程：为什么很多站点第二次打开速度会很快？","content":"<p>在<a href=\"https://time.geekbang.org/column/article/113550\">上一篇文章</a>中我介绍了TCP协议是如何保证数据完整传输的，相信你还记得，一个TCP连接过程包括了建立连接、传输数据和断开连接三个阶段。</p><p>而HTTP协议，正是建立在TCP连接基础之上的。<strong>HTTP是一种允许浏览器向服务器获取资源的协议，是Web的基础</strong>，通常由浏览器发起请求，用来获取不同类型的文件，例如HTML文件、CSS文件、JavaScript文件、图片、视频等。此外，<strong>HTTP也是浏览器使用最广的协议</strong>，所以要想学好浏览器，就要先深入了解HTTP。</p><p>不知道你是否有过下面这些疑问：</p><ol>\n<li>为什么通常在第一次访问一个站点时，打开速度很慢，当再次访问这个站点时，速度就很快了？</li>\n<li>当登录过一个网站之后，下次再访问该站点，就已经处于登录状态了，这是怎么做到的呢？</li>\n</ol><p>这一切的秘密都隐藏在HTTP的请求过程中。所以，在今天这篇文章中，我将通过分析一个HTTP请求过程中每一步的状态来带你了解完整的HTTP请求过程，希望你看完这篇文章后，能够对HTTP协议有个全新的认识。</p><h2>浏览器端发起HTTP请求流程</h2><p>如果你在浏览器地址栏里键入极客时间网站的地址：<a href=\"http://time.geekbang.org/index.html%EF%BC%8C\">http://time.geekbang.org/index.html，</a> 那么接下来，浏览器会完成哪些动作呢？下面我们就一步一步详细“追踪”下。</p><!-- [[[read_end]]] --><h3>1. 构建请求</h3><p>首先，浏览器构建<strong>请求行</strong>信息（如下所示），构建好后，浏览器准备发起网络请求。</p><pre><code>GET /index.html HTTP1.1\n</code></pre><h3>2. 查找缓存</h3><p>在真正发起网络请求之前，浏览器会先在浏览器缓存中查询是否有要请求的文件。其中，<strong>浏览器缓存是一种在本地保存资源副本，以供下次请求时直接使用的技术</strong>。</p><p>当浏览器发现请求的资源已经在浏览器缓存中存有副本，它会拦截请求，返回该资源的副本，并直接结束请求，而不会再去源服务器重新下载。这样做的好处有：</p><ul>\n<li>缓解服务器端压力，提升性能（获取资源的耗时更短了）；</li>\n<li>对于网站来说，缓存是实现快速资源加载的重要组成部分。</li>\n</ul><p>当然，如果缓存查找失败，就会进入网络请求过程了。</p><h3>3. 准备IP地址和端口</h3><p>不过，先不急，在了解网络请求之前，我们需要先看看HTTP和TCP的关系。因为浏览器使用<strong>HTTP协议作为应用层协议</strong>，用来封装请求的文本信息；并使用<strong>TCP/IP作传输层协议</strong>将它发到网络上，所以在HTTP工作开始之前，浏览器需要通过TCP与服务器建立连接。也就是说<strong>HTTP的内容是通过TCP的传输数据阶段来实现的</strong>，你可以结合下图更好地理解这二者的关系。</p><p><img src=\"https://static001.geekbang.org/resource/image/12/80/1277f342174b23f9442d3b27016d7980.png?wh=1142*570\" alt=\"\"></p><center><span class=\"reference\">TCP和HTTP的关系示意图</span></center><p>那接下来你可以思考这么“一连串”问题：</p><ul>\n<li>HTTP网络请求的第一步是做什么呢？结合上图看，是和服务器建立TCP连接。</li>\n<li>那建立连接的信息都有了吗？<a href=\"https://time.geekbang.org/column/article/113550\">上一篇文章</a>中，我们讲到建立TCP连接的第一步就是需要准备IP地址和端口号。</li>\n<li>那怎么获取IP地址和端口号呢？这得看看我们现在有什么，我们有一个URL地址，那么是否可以利用URL地址来获取IP和端口信息呢？</li>\n</ul><p>在<a href=\"https://time.geekbang.org/column/article/113550\">上一篇文章</a>中，我们介绍过数据包都是通过IP地址传输给接收方的。由于IP地址是数字标识，比如极客时间网站的IP是39.106.233.176,  难以记忆，但使用极客时间的域名（time.geekbang.org）就好记多了，所以基于这个需求又出现了一个服务，负责把域名和IP地址做一一映射关系。这套域名映射为IP的系统就叫做“<strong>域名系统</strong>”，简称<strong>DNS</strong>（Domain Name System）。</p><p>所以，这样一路推导下来，你会发现在<strong>第一步浏览器会请求DNS返回域名对应的IP</strong>。当然浏览器还提供了<strong>DNS数据缓存服务</strong>，如果某个域名已经解析过了，那么浏览器会缓存解析的结果，以供下次查询时直接使用，这样也会减少一次网络请求。</p><p>拿到IP之后，接下来就需要获取端口号了。通常情况下，如果URL没有特别指明端口号，那么HTTP协议默认是80端口。</p><h3>4. 等待TCP队列</h3><p>现在已经把端口和IP地址都准备好了，那么下一步是不是可以建立TCP连接了呢？</p><p>答案依然是“不行”。Chrome有个机制，同一个域名同时最多只能建立6个TCP连接，如果在同一个域名下同时有10个请求发生，那么其中4个请求会进入排队等待状态，直至进行中的请求完成。</p><p>当然，如果当前请求数量少于6，会直接进入下一步，建立TCP连接。</p><h3>5. 建立TCP连接</h3><p>排队等待结束之后，终于可以快乐地和服务器握手了，在HTTP工作开始之前，浏览器通过TCP与服务器建立连接。而TCP的工作方式，我在<a href=\"https://time.geekbang.org/column/article/113550\">上一篇文章</a>中已经做过详细介绍了，如果有必要，你可以自行回顾下，这里我就不再重复讲述了。</p><h3>6. 发送HTTP请求</h3><p>一旦建立了TCP连接，浏览器就可以和服务器进行通信了。而HTTP中的数据正是在这个通信过程中传输的。</p><p>你可以结合下图来理解，浏览器是如何发送请求信息给服务器的。</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/d7/b8993c73f7b60feb9b8bd147545c47d7.png?wh=1142*656\" alt=\"\"></p><center><span class=\"reference\">HTTP请求数据格式</span></center><p>首先浏览器会向服务器发送<strong>请求行</strong>，它包括了<strong>请求方法、请求URI（Uniform Resource Identifier）和HTTP版本协议</strong>。</p><p>发送请求行，就是告诉服务器浏览器需要什么资源，最常用的请求方法是<strong>Get</strong>。比如，直接在浏览器地址栏键入极客时间的域名（time.geekbang.org），这就是告诉服务器要Get它的首页资源。</p><p>另外一个常用的请求方法是<strong>POST</strong>，它用于发送一些数据给服务器，比如登录一个网站，就需要通过POST方法把用户信息发送给服务器。如果使用POST方法，那么浏览器还要准备数据给服务器，这里准备的数据是通过<strong>请求体</strong>来发送。</p><p>在浏览器发送请求行命令之后，还要以<strong>请求头</strong>形式发送其他一些信息，把浏览器的一些基础信息告诉服务器。比如包含了浏览器所使用的操作系统、浏览器内核等信息，以及当前请求的域名信息、浏览器端的Cookie信息，等等。</p><h2>服务器端处理HTTP请求流程</h2><p>历经千辛万苦，HTTP的请求信息终于被送达了服务器。接下来，服务器会根据浏览器的请求信息来准备相应的内容。</p><h3>1. 返回请求</h3><p>一旦服务器处理结束，便可以返回数据给浏览器了。你可以通过工具软件curl来查看返回请求数据，具体使用方法是在命令行中输入以下命令：</p><pre><code>curl -i  https://time.geekbang.org/\n</code></pre><p>注意这里加上了<code>-i</code>是为了返回响应行、响应头和响应体的数据，返回的结果如下图所示，你可以结合这些数据来理解服务器是如何响应浏览器的。</p><p><img src=\"https://static001.geekbang.org/resource/image/3e/76/3e30476a4bbda49fd7cd4fd0ea09f076.png?wh=1142*651\" alt=\"\"></p><center><span class=\"reference\">服务器响应的数据格式</span></center><p>首先服务器会返回<strong>响应行</strong>，包括协议版本和状态码。</p><p>但并不是所有的请求都可以被服务器处理的，那么一些无法处理或者处理出错的信息，怎么办呢？服务器会通过请求行的<strong>状态码</strong>来告诉浏览器它的处理结果，比如：</p><ul>\n<li>最常用的状态码是200，表示处理成功；</li>\n<li>如果没有找到页面，则会返回<strong>404</strong>。</li>\n</ul><p>状态码类型很多，这里我就不过多介绍了，网上有很多资料，你可以自行查询和学习。</p><p>随后，正如浏览器会随同请求发送请求头一样，服务器也会随同响应向浏览器发送<strong>响应头</strong>。响应头包含了服务器自身的一些信息，比如服务器生成返回数据的时间、返回的数据类型（JSON、HTML、流媒体等类型），以及服务器要在客户端保存的Cookie等信息。</p><p>发送完响应头后，服务器就可以继续发送<strong>响应体</strong>的数据，通常，响应体就包含了HTML的实际内容。</p><p>以上这些就是服务器响应浏览器的具体过程。</p><h3>2. 断开连接</h3><p>通常情况下，一旦服务器向客户端返回了请求数据，它就要关闭 TCP 连接。不过如果浏览器或者服务器在其头信息中加入了：</p><pre><code>Connection:Keep-Alive \n</code></pre><p>那么TCP连接在发送后将仍然保持打开状态，这样浏览器就可以继续通过同一个TCP连接发送请求。<strong>保持TCP连接可以省去下次请求时需要建立连接的时间，提升资源加载速度</strong>。比如，一个Web页面中内嵌的图片就都来自同一个Web站点，如果初始化了一个持久连接，你就可以复用该连接，以请求其他资源，而不需要重新再建立新的TCP连接。</p><h3>3. 重定向</h3><p>到这里似乎请求流程快结束了，不过还有一种情况你需要了解下，比如当你在浏览器中打开geekbang.org后，你会发现最终打开的页面地址是 <a href=\"https://www.geekbang.org\">https://www.geekbang.org</a>。</p><p>这两个URL之所以不一样，是因为涉及到了一个<strong>重定向操作</strong>。跟前面一样，你依然可以使用curl来查看下请求geekbang.org 会返回什么内容？</p><p>在控制台输入如下命令：</p><pre><code>curl -I geekbang.org\n</code></pre><p>注意这里输入的参数是<code>-I</code>，和<code>-i</code>不一样，<code>-I</code>表示只需要获取响应头和响应行数据，而不需要获取响应体的数据，最终返回的数据如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/28/43/28d5796c6ab7faa619ed8f1bd17b0843.jpg?wh=2525*1130\" alt=\"\"></p><center><span class=\"reference\">服务器返回响应行和响应头（含重定向格式）</span></center><p>从图中你可以看到，响应行返回的状态码是301，状态301就是告诉浏览器，我需要重定向到另外一个网址，而需要重定向的网址正是包含在响应头的Location字段中，接下来，浏览器获取Location字段中的地址，并使用该地址重新导航，这就是一个完整重定向的执行流程。这也就解释了为什么输入的是 geekbang.org，最终打开的却是 <a href=\"https://www.geekbang.org\">https://www.geekbang.org</a> 了。</p><p>不过也不要认为这种跳转是必然的。如果你打开 <a href=\"https://12306.cn\">https://12306.cn</a>，你会发现这个站点是打不开的。这是因为12306的服务器并没有处理跳转，所以必须要手动输入完整的 <a href=\"https://www.12306.cn\">https://www.12306.cn</a> 才能打开页面。</p><h2>问题解答</h2><p>说了这么多，相信你现在已经了解了HTTP的请求流程，那现在我们再回过头来看看文章开头提出的问题。</p><h3>1. 为什么很多站点第二次打开速度会很快？</h3><p>如果第二次页面打开很快，主要原因是第一次加载页面过程中，缓存了一些耗时的数据。</p><p>那么，哪些数据会被缓存呢？从上面介绍的核心请求路径可以发现，<strong>DNS缓存</strong>和<strong>页面资源缓存</strong>这两块数据是会被浏览器缓存的。其中，DNS缓存比较简单，它主要就是在浏览器本地把对应的IP和域名关联起来，这里就不做过多分析了。</p><p>我们重点看下浏览器资源缓存，下面是缓存处理的过程：</p><p><img src=\"https://static001.geekbang.org/resource/image/5f/08/5fc2f88a04ee0fc41a808f3481287408.png?wh=1142*1258\" alt=\"\"></p><center><span class=\"reference\">缓存查找流程示意图</span></center><p>首先，我们看下服务器是通过什么方式让浏览器缓存数据的？</p><p>从上图的第一次请求可以看出，当服务器返回<strong>HTTP响应头</strong>给浏览器时，浏览器是<strong>通过响应头中的Cache-Control字段来设置是否缓存该资源</strong>。通常，我们还需要为这个资源设置一个缓存过期时长，而这个时长是通过Cache-Control中的Max-age参数来设置的，比如上图设置的缓存过期时间是2000秒。</p><pre><code>Cache-Control:Max-age=2000\n</code></pre><p>这也就意味着，在该缓存资源还未过期的情况下, 如果再次请求该资源，会直接返回缓存中的资源给浏览器。</p><p>但如果缓存过期了，浏览器则会继续发起网络请求，并且在<strong>HTTP请求头</strong>中带上：</p><pre><code>If-None-Match:&quot;4f80f-13c-3a1xb12a&quot;\n</code></pre><p>服务器收到请求头后，会根据If-None-Match的值来判断请求的资源是否有更新。</p><ul>\n<li>如果没有更新，就返回304状态码，相当于服务器告诉浏览器：“这个缓存可以继续使用，这次就不重复发送数据给你了。”</li>\n<li>如果资源有更新，服务器就直接返回最新资源给浏览器。</li>\n</ul><p>关于缓存的细节内容特别多，具体细节你可以参考这篇 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ\">HTTP缓存</a>，在这里我就不赘述了。</p><p>简要来说，很多网站第二次访问能够秒开，是因为这些网站把很多资源都缓存在了本地，浏览器缓存直接使用本地副本来回应请求，而不会产生真实的网络请求，从而节省了时间。同时，DNS数据也被浏览器缓存了，这又省去了DNS查询环节。</p><h3>2. 登录状态是如何保持的？</h3><p>通过上面的介绍，你已经了解了缓存是如何工作的。下面我们再一起看下登录状态是如何保持的。</p><ul>\n<li>用户打开登录页面，在登录框里填入用户名和密码，点击确定按钮。点击按钮会触发页面脚本生成用户登录信息，然后调用POST方法提交用户登录信息给服务器。</li>\n<li>服务器接收到浏览器提交的信息之后，查询后台，验证用户登录信息是否正确，如果正确的话，会生成一段表示用户身份的字符串，并把该字符串写到响应头的Set-Cookie字段里，如下所示，然后把响应头发送给浏览器。</li>\n</ul><pre><code>Set-Cookie: UID=3431uad;\n</code></pre><ul>\n<li>浏览器在接收到服务器的响应头后，开始解析响应头，如果遇到响应头里含有Set-Cookie字段的情况，浏览器就会把这个字段信息保存到本地。比如把<code>UID=3431uad</code>保持到本地。</li>\n<li>当用户再次访问时，浏览器会发起HTTP请求，但在发起请求之前，浏览器会读取之前保存的Cookie数据，并把数据写进请求头里的Cookie字段里（如下所示），然后浏览器再将请求头发送给服务器。</li>\n</ul><pre><code>Cookie: UID=3431uad;\n</code></pre><ul>\n<li>服务器在收到HTTP请求头数据之后，就会查找请求头里面的“Cookie”字段信息，当查找到包含<code>UID=3431uad</code>的信息时，服务器查询后台，并判断该用户是已登录状态，然后生成含有该用户信息的页面数据，并把生成的数据发送给浏览器。</li>\n<li>浏览器在接收到该含有当前用户的页面数据后，就可以正确展示用户登录的状态信息了。</li>\n</ul><p>好了，通过这个流程你可以知道浏览器页面状态是通过使用Cookie来实现的。Cookie流程可以参考下图：</p><p><img src=\"https://static001.geekbang.org/resource/image/d9/b3/d9d6cefe8d3d6d84a37a626687c6ecb3.png?wh=1142*932\" alt=\"\"></p><center><span class=\"reference\">Cookie流程图</span></center><p>简单地说，如果服务器端发送的响应头内有 Set-Cookie 的字段，那么浏览器就会将该字段的内容保持到本地。当下次客户端再往该服务器发送请求时，客户端会自动在请求头中加入 Cookie 值后再发送出去。服务器端发现客户端发送过来的Cookie后，会去检查究竟是从哪一个客户端发来的连接请求，然后对比服务器上的记录，最后得到该用户的状态信息。</p><h2>总结</h2><p>本篇文章的内容比较多、比较碎，但是非常重要，所以我先来总结下今天的主要内容。</p><p>为了便于你理解，我画了下面这张详细的“HTTP请求示意图”，用来展现浏览器中的HTTP请求所经历的各个阶段。</p><p><img src=\"https://static001.geekbang.org/resource/image/1b/6c/1b49976aca2c700883d48d927f48986c.png?wh=1142*423\" alt=\"\"></p><center><span class=\"reference\">HTTP请求流程示意图</span></center><p>从图中可以看到，浏览器中的HTTP请求从发起到结束一共经历了如下八个阶段：构建请求、查找缓存、准备IP和端口、等待TCP队列、建立TCP连接、发起HTTP请求、服务器处理请求、服务器返回请求和断开连接。</p><p>然后我还通过HTTP请求路径解答了两个经常会碰到的问题，一个涉及到了Cache流程，另外一个涉及到如何使用Cookie来进行状态管理。</p><p>通过今天系统的讲解，想必你已经了解了一个HTTP完整的工作流程，相信这些知识点之于你以后的学习或工作会很有帮助。</p><p>另外，你应该也看出来了本篇文章是有很多分析问题的思路在里面的。所以在学习过程中，你也要学会提问，通过最终要做什么和现在有什么，去一步步分析并提出一些问题，让疑问带领着你去学习，抓住几个本质的问题就可以学透相关知识点，让你能站在更高维度去查看整体框架。希望它能成为你的一个学习技巧吧！</p><h2>思考时间</h2><p>最后，还是留给你个思考题：结合今天所讲HTTP请求的各个阶段，如果一个页面的网络加载时间过久，你是如何分析卡在哪个阶段的？</p><p>欢迎在留言区与我分享你的想法，也欢迎你在留言区记录你的思考过程。感谢阅读，如果你觉得这篇文章对你有帮助的话，也欢迎把它分享给更多的朋友。</p>","neighbors":{"left":{"article_title":"02 | TCP协议：如何保证页面文件能被完整送达浏览器？","id":113550},"right":{"article_title":"04 | 导航流程：从输入URL到页面展示，这中间发生了什么？","id":117637}},"comments":[{"had_liked":false,"id":122452,"user_name":"mfist","can_delete":false,"product_type":"c1","uid":1373624,"ip_address":"","ucode":"4F99F422C23FB4","user_header":"https://static001.geekbang.org/account/avatar/00/14/f5/b8/9f165f4b.jpg","comment_is_top":false,"comment_ctime":1565395408,"is_pvip":false,"replies":[{"id":"44942","content":"👍","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565401021,"ip_address":"","comment_id":122452,"utype":1}],"discussion_count":9,"race_medal":0,"score":"508371536336","product_id":100033601,"comment_content":"1 首先猜测最可能的出问题的地方，网络传输丢包比较严重，需要不断重传。然后通过ping curl看看对应的时延高不高。<br>2 然后通过wireshake看看具体哪里出了问题。<br>3 假如别人访问很快，自己电脑很慢，就要看看自己客户端是否有问题了。<br><br>感觉平常碰到很多http问题，基本都能通过上面方式搞定","like_count":118,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462259,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565401021,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1247574,"avatar":"https://static001.geekbang.org/account/avatar/00/13/09/56/2628852c.jpg","nickname":"星之所在","note":"","ucode":"03ADB0ADD5FC27","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":247377,"discussion_content":"也有可能是服务响应慢呢","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1587811889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1183777,"avatar":"https://static001.geekbang.org/account/avatar/00/12/10/21/6ed6680e.jpg","nickname":"Bryce X","note":"","ucode":"CFC341FE8471EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1247574,"avatar":"https://static001.geekbang.org/account/avatar/00/13/09/56/2628852c.jpg","nickname":"星之所在","note":"","ucode":"03ADB0ADD5FC27","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302055,"discussion_content":"ping能看出来？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598774636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":247377,"ip_address":""},"score":302055,"extra":""},{"author":{"id":1406834,"avatar":"https://static001.geekbang.org/account/avatar/00/15/77/72/ad7056f9.jpg","nickname":"hb","note":"","ucode":"DCFA6CECF64E37","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1183777,"avatar":"https://static001.geekbang.org/account/avatar/00/12/10/21/6ed6680e.jpg","nickname":"Bryce X","note":"","ucode":"CFC341FE8471EE","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383396,"discussion_content":"ping不是有丢包率","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626079341,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":302055,"ip_address":""},"score":383396,"extra":""}]},{"author":{"id":1248375,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/77/d855bfb2.jpg","nickname":"Bupt_daydayup","note":"","ucode":"5E2BBE695288B5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568846,"discussion_content":"MARK","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651242632,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1374414,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f8/ce/495dfc91.jpg","nickname":"行云流水","note":"","ucode":"3CCE8B9902005A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561330,"discussion_content":"加载慢，如果是网络问题，还是后台问题。加载问题，前端可以做的无非是分包。。。。。 感觉前端有点鸡肋。。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649601543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2292437,"avatar":"","nickname":"sdai","note":"","ucode":"C4A3D6879C8F98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384791,"discussion_content":"dns解析慢也很常见吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626752061,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1698735,"avatar":"https://static001.geekbang.org/account/avatar/00/19/eb/af/e49af9a8.jpg","nickname":"JC.彦","note":"","ucode":"E87C1420B140F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":184957,"discussion_content":"丢包严重与什么有关呢？如何处理呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582590454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1698735,"avatar":"https://static001.geekbang.org/account/avatar/00/19/eb/af/e49af9a8.jpg","nickname":"JC.彦","note":"","ucode":"E87C1420B140F4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336229,"discussion_content":"网络是之一","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608535959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":184957,"ip_address":""},"score":336229,"extra":""}]}]},{"had_liked":false,"id":122583,"user_name":"一步","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1565428742,"is_pvip":true,"replies":[{"id":"44977","content":"这是浏览器的三级缓存机制，使用memory cache比disk cache 的访问速度要快，但是具体什么规则等我回头看下源码再来回答你了。<br><br>还有另外一种cache，是service worker的cache。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565434368,"ip_address":"","comment_id":122583,"utype":1}],"discussion_count":25,"race_medal":1,"score":"332277910534","product_id":100033601,"comment_content":"对于浏览器缓存地方的选择一直搞不明白其中的原理，在浏览器中访问的时候打开network面板，发现缓存的来源有的from disk有的是from memory。对于资源什么情况下缓存到硬盘什么时候缓存到内存，想请教一下老师","like_count":77,"discussions":[{"author":{"id":1661637,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5a/c5/221ab4d9.jpg","nickname":"wubinsheng","note":"","ucode":"6ECCABF4C4D7D1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":13500,"discussion_content":"官方说明：\nChrome employs two caches — an on-disk cache and a very fast in-memory cache. The lifetime of an in-memory cache is attached to the lifetime of a render process, which roughly corresponds to a tab. Requests that are answered from the in-memory cache are invisible to the web request API. If a request handler changes its behavior (for example, the behavior according to which requests are blocked), a simple page refresh might not respect this changed behavior. To make sure the behavior change goes through, call handlerBehaviorChanged() to flush the in-memory cache. But don&#39;t do it often; flushing the cache is a very expensive operation. You don&#39;t need to call handlerBehaviorChanged() after registering or unregistering an event listener.\n\n我整理过：\ndisk：新tab打开时，都是disk；html文件都是disk\nmemory：新tab再次使用缓存时，是memory\n","likes_number":19,"is_delete":false,"is_hidden":false,"ctime":1568681034,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1019849,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8f/c9/833d5060.jpg","nickname":"玉皇大亮","note":"","ucode":"5C4FDF1FDCF8A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1661637,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5a/c5/221ab4d9.jpg","nickname":"wubinsheng","note":"","ucode":"6ECCABF4C4D7D1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":65285,"discussion_content":"请问这些文档是哪里看到的呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574993357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":13500,"ip_address":""},"score":65285,"extra":""},{"author":{"id":1944577,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/ac/01/7e13be41.jpg","nickname":"Jehan","note":"","ucode":"F59071B670A6E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1661637,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5a/c5/221ab4d9.jpg","nickname":"wubinsheng","note":"","ucode":"6ECCABF4C4D7D1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305758,"discussion_content":"没这么简单吧 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600076625,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":13500,"ip_address":""},"score":305758,"extra":""},{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1661637,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5a/c5/221ab4d9.jpg","nickname":"wubinsheng","note":"","ucode":"6ECCABF4C4D7D1","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334915,"discussion_content":"新打开tab都是disk是对的。但是刷新当前tab，不都是mermory，也有disk cache","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1608026040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":13500,"ip_address":""},"score":334915,"extra":""}]},{"author":{"id":1043716,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ed/04/7941d031.jpg","nickname":"Atoe","note":"","ucode":"5FB8C5C6A67067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":389238,"discussion_content":"- Memory Cache : 内存缓存\n\n- Disk Cache：硬盘缓存\n\n打开网页：查找 disk cache 中是否有匹配，如有则使用，如没有则发送网络请求\n普通刷新 (F5)：因 TAB 没关闭，因此 memory cache 是可用的，会被优先使用，其次才是 disk cache\n强制刷新 (Ctrl + F5)：浏览器不使用缓存，因此发送的请求头部均带有 Cache-control: no-cache，服务器直接返回 200 和最新内容","likes_number":10,"is_delete":false,"is_hidden":false,"ctime":1629188167,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1496820,"avatar":"https://static001.geekbang.org/account/avatar/00/16/d6/f4/ce90b9d6.jpg","nickname":"刘小绪同学","note":"","ucode":"3F83985A4A4017","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7592,"discussion_content":"css 一定是硬盘缓存，如果页面没有关闭的情况下刷新，js、图片等资源会从内存缓存加载，如果页面关闭了，再访问的话，都是从硬盘缓存拿","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1567580782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462318,"discussion_content":"这是浏览器的三级缓存机制，使用memory cache比disk cache 的访问速度要快，但是具体什么规则等我回头看下源码再来回答你了。\n\n还有另外一种cache，是service worker的cache。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1565434368,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148422,"avatar":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","nickname":"美美","note":"","ucode":"44CC95C45AF345","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281531,"discussion_content":"同问，非常期待这个答案","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1591760101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1557285,"avatar":"https://static001.geekbang.org/account/avatar/00/17/c3/25/24ebb80a.jpg","nickname":"勿妄","note":"","ucode":"E402DCFEFB9CC9","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363047,"discussion_content":"😄😄等答案","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617104073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1005391,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","nickname":"一步","note":"","ucode":"73CEA468CE70C3","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":1557285,"avatar":"https://static001.geekbang.org/account/avatar/00/17/c3/25/24ebb80a.jpg","nickname":"勿妄","note":"","ucode":"E402DCFEFB9CC9","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":363065,"discussion_content":"大家都在等(等不到了，老师去做其他的事情了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617107470,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":363047,"ip_address":""},"score":363065,"extra":""}]},{"author":{"id":1478580,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/e22k2kfOIJVRTbMTsvBbxl4YLtsJSMboW8NialVzD46Tia2YO7ZAn4J6TQn7Xxf7ASRAjOQDSeVPQe0t1Om0JjaA/132","nickname":"大钊","note":"","ucode":"C51BB488E6952F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":547117,"discussion_content":"期待老师的答疑，我最近也遇到。当iframe页面打开时，会有出现from disk cache,导致有时候部署新版本，页面都是拿不到最新的css和js，导致css和js404。这个是不是在请求头设置no-cache就可以了呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642549406,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1551953,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ae/51/90bc98e4.jpg","nickname":"一只会编码的大水蛭","note":"","ucode":"DA49B85C76C71B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":351244,"discussion_content":"mark一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1614213736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":322952,"discussion_content":"好像还没有最终的答案？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604847265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1944577,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/ac/01/7e13be41.jpg","nickname":"Jehan","note":"","ucode":"F59071B670A6E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305760,"discussion_content":"还有个push cache吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600076669,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1424137,"avatar":"https://static001.geekbang.org/account/avatar/00/15/bb/09/f593ef68.jpg","nickname":"Javon Yan","note":"","ucode":"12643538BC8B7C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1944577,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/ac/01/7e13be41.jpg","nickname":"Jehan","note":"","ucode":"F59071B670A6E2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357880,"discussion_content":"HTTP2 的内容\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615887367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":305760,"ip_address":""},"score":357880,"extra":""}]},{"author":{"id":1435019,"avatar":"https://static001.geekbang.org/account/avatar/00/15/e5/8b/7c1f2b19.jpg","nickname":"卡西","note":"","ucode":"3D48F58D7C8461","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56370,"discussion_content":"期待老师解答这个问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574476818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1740548,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/8f/04/508f860b.jpg","nickname":"学习使人进步","note":"","ucode":"D959566A25D759","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":53641,"discussion_content":"老师讲的很好！了解了很多以前不知道或不懂的东西，这个问题也期待老师有时间帮解答下，感谢！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574186118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1154741,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9e/b5/a4b4f88f.jpg","nickname":"毕加索","note":"","ucode":"EFF944D268509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":48143,"discussion_content":"+1  同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573453024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622820,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqwEyAicIKcPUbXQkv4Q4o0FyYSCvibrfmsia9QSr9rvaPYt7EyL6FB3nsgQLtCBhXC5oSUrVnQUFiaqQ/132","nickname":"Andyhuang","note":"","ucode":"D0E81EF17A2C91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7013,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567263315,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1458737,"avatar":"https://static001.geekbang.org/account/avatar/00/16/42/31/127e4be8.jpg","nickname":"美食家","note":"","ucode":"8192AC29AFF915","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6536,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566960307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1097299,"avatar":"https://static001.geekbang.org/account/avatar/00/10/be/53/71057a8b.jpg","nickname":"风一样的浪漫","note":"","ucode":"EE023C0B759F26","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6413,"discussion_content":"缓存有哪些from来源，如何控制呢\n期待老师的解答，这个问题网上很多抄来抄去的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566891866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1630063,"avatar":"https://static001.geekbang.org/account/avatar/00/18/df/6f/8b8f0710.jpg","nickname":"欢","note":"","ucode":"17CF9D77A1989A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6199,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566782024,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1235099,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d8/9b/f9a00567.jpg","nickname":"why.","note":"","ucode":"C9E9B10F2BC0EB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6119,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566713673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512537,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","nickname":"木瓜777","note":"","ucode":"FC52A499AF6374","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5647,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566401134,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1378423,"avatar":"https://static001.geekbang.org/account/avatar/00/15/08/77/50e83495.jpg","nickname":"天心","note":"","ucode":"6D0755641D22BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4495,"discussion_content":"同有此疑问，期待作者的回复，谢谢。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565492207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124742,"user_name":"宇宙全栈","can_delete":false,"product_type":"c1","uid":1001309,"ip_address":"","ucode":"2E984CA0ECFB85","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/5d/9afdf648.jpg","comment_is_top":false,"comment_ctime":1565958119,"is_pvip":false,"discussion_count":9,"race_medal":0,"score":"267853930471","product_id":100033601,"comment_content":"老师好，请教下TCP连接如何断开的问题：<br>1、没有 keep-alive 时，http数据传输完成后，是由浏览器主动发起断开TCP连接，还是由服务器主动发起断开 TCP 连接？<br>2、设置了 keep-alive 时，当关闭页面时，浏览器会发起断开 TCP 连接吗？如果不关闭页面，浏览器会一直保持这个 TCP 连接吗？<br>3、设置了 keep-alive 时，如果浏览器出现故障时了（挂掉了），此时服务器保持的 TCP 连接多久会释放？","like_count":63,"discussions":[{"author":{"id":2548055,"avatar":"https://static001.geekbang.org/account/avatar/00/26/e1/57/f45d069c.jpg","nickname":"巫迪","note":"","ucode":"6863FE9F37F4EE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":412824,"discussion_content":"1. 一般是浏览器，4次挥手主动发起方需要处理TIME_WAIT 状态，服务器不适合发起\n2.进程关闭会清理资源，此时会关闭TCP\n3.根据你设置的timeout决定 node服务器默认5S","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1636295975,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512860,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Rr8ABLicfgJHZ3xs3bXNjHdicwVN0zBiaFtIEXw4D1licedSuia3zicxJC4lqtrNwPmCeAW5UR2Ugia0dNfcvtXYnpOwQ/132","nickname":"LearnAndTry","note":"","ucode":"0ECF4398C870DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":255362,"discussion_content":"应该是 心跳包检测和关闭一端主动发起断开请求两种方式相结合。  ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1588392867,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1274328,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLicryBoLjDicckia0c5bkOoAlYoR2I9NMK8BiaD7HCGxhS1eM9YSfDuUJuZC90uwv9FvHIVSsBoxFgZw/132","nickname":"MwumLi","note":"","ucode":"9A8A72334ADF6E","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":137849,"discussion_content":"为啥没有回答","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1579192473,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512860,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Rr8ABLicfgJHZ3xs3bXNjHdicwVN0zBiaFtIEXw4D1licedSuia3zicxJC4lqtrNwPmCeAW5UR2Ugia0dNfcvtXYnpOwQ/132","nickname":"LearnAndTry","note":"","ucode":"0ECF4398C870DC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":255360,"discussion_content":"参考下 这篇文章 https://blog.csdn.net/cccallen/article/details/8003324","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1588392484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1972689,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/19/d1/647e65b7.jpg","nickname":"Geek_2020","note":"","ucode":"C7E8DC71F7FC6D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":268978,"discussion_content":"看看tcp四次挥手的发起方","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1589852745,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2518919,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ9d89ymlVge9vQMDFURgib37hho3nkbFlccyL6cLj5WpIWQib8JcV0TYnqRekeKREvcKiaGEdbzq0dw/132","nickname":"fourthree","note":"","ucode":"1A5AC64F6E9CED","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":578574,"discussion_content":"第一个问题：浏览器和服务器是请求和应答模式。服务端是没有能力主动向浏览器端推送消息的，那只能是浏览器发起断开连接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1656905189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":322955,"discussion_content":"同求答案!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604847364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1991463,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/63/27/deefd03f.jpg","nickname":"HucerF","note":"","ucode":"68F847741F8D8D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257795,"discussion_content":"我也想知道这个的答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588604645,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1383616,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/WAVWZmic17sCmZmibMQqmFqMZib9AQp6Ucglwp2ibqU6fLib7EUk6sib9b7iaVc5xgltyfuicoEAnGmE3zibNWUFpvYscFA/132","nickname":"cjj","note":"","ucode":"07F43F1B0C5387","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":230722,"discussion_content":"我也想知道这个答案","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586766461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123470,"user_name":"Hurry","can_delete":false,"product_type":"c1","uid":1138560,"ip_address":"","ucode":"12FEE2A50CC667","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/80/51269d88.jpg","comment_is_top":false,"comment_ctime":1565683141,"is_pvip":false,"replies":[{"id":"45320","content":"结合网络模块来分析，总结的挺好","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565711466,"ip_address":"","comment_id":123470,"utype":1}],"discussion_count":5,"race_medal":0,"score":"220609015237","product_id":100033601,"comment_content":"使用 chrome network 面板，看那个 瀑布图 中每个阶段的含义，就可以判断问题出现在那个方向了，每个阶段的含义，https:&#47;&#47;developers.google.com&#47;web&#47;tools&#47;chrome-devtools&#47;network&#47;reference#timing-explanation  举个例子 Content Download 如果太长，很有可能是下载的资源太大，但也有可能是网络慢导致的下载太慢，简单计算一下，在例如 Waiting (TTFB) 这个太长的话，有可能是网络慢，或者就是 后端处理时间过长导致的，至少可以排查掉前端原因，还有很多，例如 DNS lookup 等，但是最终要确认具体哪里慢，最好是结合系统日志去分析","like_count":51,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462688,"discussion_content":"结合网络模块来分析，总结的挺好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565711466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1568263,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ee/07/465058c7.jpg","nickname":"Even.Yu","note":"","ucode":"D55F190AC6E4FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391308,"discussion_content":"如果确认是资源大导致的Content Download 太长的话 解决办法是什么呢？ 分包传输吗？ 我记得启动分包传输是不是需要服务器走配置呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630396344,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1568263,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ee/07/465058c7.jpg","nickname":"Even.Yu","note":"","ucode":"D55F190AC6E4FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391301,"discussion_content":"这个有实战操作吗？ 干货满满！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630394851,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1328142,"avatar":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","nickname":"-_-|||","note":"","ucode":"94B21594658BF9","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66784,"discussion_content":"lookup 是干什么的，经常看见lookup.js","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575106809,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1015542,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/7e/f6/abb7bfe3.jpg","nickname":"永远蔡","note":"","ucode":"ABE9FA50A3C28D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20232,"discussion_content":"多谢分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569291275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122975,"user_name":"XWL","can_delete":false,"product_type":"c1","uid":1597186,"ip_address":"","ucode":"5D3988791C60AF","user_header":"https://static001.geekbang.org/account/avatar/00/18/5f/02/f8a80843.jpg","comment_is_top":false,"comment_ctime":1565581400,"is_pvip":false,"replies":[{"id":"45196","content":"一个是强制刷新，也就是资源都走网络。<br><br>一个是正常处理流程。<br><br>比如通过网络面板，打开一个站点，再使用强制刷新，可以看到如下信息<br>176 requests<br>3.1 MB transferred<br>3.5 MB resources<br>Finish: 26.30 s<br>DOMContentLoaded: 5.04 s<br>Load: 14.88 s<br><br>如果使用正常的刷新，看到的信息如下：<br>171 requests<br>419 KB transferred<br>3.2 MB resources<br>Finish: 25.09 s<br>DOMContentLoaded: 1.41 s<br>Load: 6.24 s<br><br>其中的transferred是真正的网络传输的数据，使用强制刷新，传输的数据体积就大多了，而且请求时间也变得更长了。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565589350,"ip_address":"","comment_id":122975,"utype":1}],"discussion_count":4,"race_medal":0,"score":"169069305944","product_id":100033601,"comment_content":"浏览器刷新操作，ctrl+F5和F5有什么区别","like_count":39,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462486,"discussion_content":"一个是强制刷新，也就是资源都走网络。\n\n一个是正常处理流程。\n\n比如通过网络面板，打开一个站点，再使用强制刷新，可以看到如下信息\n176 requests\n3.1 MB transferred\n3.5 MB resources\nFinish: 26.30 s\nDOMContentLoaded: 5.04 s\nLoad: 14.88 s\n\n如果使用正常的刷新，看到的信息如下：\n171 requests\n419 KB transferred\n3.2 MB resources\nFinish: 25.09 s\nDOMContentLoaded: 1.41 s\nLoad: 6.24 s\n\n其中的transferred是真正的网络传输的数据，使用强制刷新，传输的数据体积就大多了，而且请求时间也变得更长了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565589350,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1355699,"avatar":"https://static001.geekbang.org/account/avatar/00/14/af/b3/3486dea2.jpg","nickname":"gigot","note":"","ucode":"FCAA7BCEC157CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37734,"discussion_content":"ctrl+F5 强制刷新 http 请求会少了 if-none-match 字段，所以不会协商缓存，将直接强制从服务器请求资源；f5 则会进行协商缓存","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1571661008,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2251558,"avatar":"","nickname":"Geek_d44931","note":"","ucode":"4A784CE802FB56","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":406070,"discussion_content":"window.location.reload() 跟F5是等价的吗","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634696736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2198755,"avatar":"https://static001.geekbang.org/account/avatar/00/21/8c/e3/b9e926f9.jpg","nickname":"面罩","note":"","ucode":"E85F2550D7C6D6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":387373,"discussion_content":"普通刷新页面，会走正常的缓存流程，比如强缓存和协商缓存。而强制刷新会跳过强缓存和协商缓存的过程，直接请求服务器重新拉取资源，也就是上面同学说的看不到 if-none-match 或 if-modified-since 字段","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1628140298,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123061,"user_name":"蚂蚁内推+v","can_delete":false,"product_type":"c1","uid":1050508,"ip_address":"","ucode":"24B10AEE54B3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/07/8c/0d886dcc.jpg","comment_is_top":false,"comment_ctime":1565599047,"is_pvip":false,"replies":[{"id":"45216","content":"cookie是不安全的，比如黑客可以通过一些手段插入一些脚本到你的页面里面（具体一些途径我们浏览器安全篇再讲），通过脚本获取到你的cookie数据，然后就可以利用cookie做一些坏事了。  <br><br>当然也有一些方法规避，常用的一个是将部分cookie设置成httponly的属性，设置了httponly属性后cookie，就无法通过js脚本来读取了，只是在发送http请求时候会被带上！<br><br>当然还有一些其他防范的方法，这个同样咱们后面在聊！","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565610133,"ip_address":"","comment_id":123061,"utype":1}],"discussion_count":3,"race_medal":0,"score":"164774356295","product_id":100033601,"comment_content":"set cookie 会不会有安全问题，麻烦老师指导下","like_count":38,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462518,"discussion_content":"cookie是不安全的，比如黑客可以通过一些手段插入一些脚本到你的页面里面（具体一些途径我们浏览器安全篇再讲），通过脚本获取到你的cookie数据，然后就可以利用cookie做一些坏事了。  \n\n当然也有一些方法规避，常用的一个是将部分cookie设置成httponly的属性，设置了httponly属性后cookie，就无法通过js脚本来读取了，只是在发送http请求时候会被带上！\n\n当然还有一些其他防范的方法，这个同样咱们后面在聊！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565610133,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2709291,"avatar":"","nickname":"Geek_6cc77c","note":"","ucode":"B5858F8A7672C9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385934,"discussion_content":"CSRF","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627354749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1383156,"avatar":"https://static001.geekbang.org/account/avatar/00/15/1a/f4/a40453e7.jpg","nickname":"man-moonth","note":"","ucode":"145EED9CFA19E4","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4658,"discussion_content":"原来还有httponly这个属性~不过这个属性限制太大了，不少场景还是要读取浏览器cookies的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565624157,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122642,"user_name":"月隐千山","can_delete":false,"product_type":"c1","uid":1178864,"ip_address":"","ucode":"9B86DF2A149C8D","user_header":"https://static001.geekbang.org/account/avatar/00/11/fc/f0/c72e1be3.jpg","comment_is_top":false,"comment_ctime":1565449455,"is_pvip":true,"replies":[{"id":"45208","content":"是没有办法通过前端代码来控制缓存的，缓存是后端或者部署的同学来控制的，但是前端同学应该知道那些内容要被缓存，和后端或者部署的同学配合来打！","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565605915,"ip_address":"","comment_id":122642,"utype":1}],"discussion_count":9,"race_medal":0,"score":"147594337519","product_id":100033601,"comment_content":"老师，在做前端页面的时候，是否可以设置当前页面是否可以被缓存，以及哪些部分可以被缓存？还是说整个缓存机制都是由浏览器自己控制的？","like_count":34,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462339,"discussion_content":"是没有办法通过前端代码来控制缓存的，缓存是后端或者部署的同学来控制的，但是前端同学应该知道那些内容要被缓存，和后端或者部署的同学配合来打！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565605915,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1048131,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/fe/43/39682b28.jpg","nickname":"振涌","note":"","ucode":"6A0D64E7F9ECF3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284700,"discussion_content":"HTTP 请求带上 Cache-Control，有一些属性可以控制部分缓存机制，例如请求带上 Cache-Control:max-stale，则不考虑缓存的时长，直接提取缓存返回","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592589568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1380187,"avatar":"https://static001.geekbang.org/account/avatar/00/15/0f/5b/dc7589e0.jpg","nickname":"houqx","note":"","ucode":"71FDE1BDF1C649","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5969,"discussion_content":"<meta http-equiv=&#34;Cache-Control&#34; content=&#34;max-age=3600&#34; /> 在html中这样设置，可以起到前端控制缓存吧？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566556030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1440735,"avatar":"https://static001.geekbang.org/account/avatar/00/15/fb/df/8615f2d3.jpg","nickname":"kaiking","note":"","ucode":"DBE91C5855B9FD","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1380187,"avatar":"https://static001.geekbang.org/account/avatar/00/15/0f/5b/dc7589e0.jpg","nickname":"houqx","note":"","ucode":"71FDE1BDF1C649","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":366395,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618049707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5969,"ip_address":""},"score":366395,"extra":""}]},{"author":{"id":2032564,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/IezlAw9cWia42pJNE9T0TibM8sHGHNxAvNEo5XDwka4YaJricuIseXbBUFmAHot0YV0IkCjzv3zWokNLicI709kSbg/132","nickname":"Geek_04cc8c","note":"","ucode":"A796471FE77D66","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":289359,"discussion_content":"Vue里面可以通过keep-alive配合meta的一些属性来控制某些页面是否要缓存吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594081454,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937101,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/cd/c0afa9fa.jpg","nickname":"王大可","note":"","ucode":"73BB877C4EF7A8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":277677,"discussion_content":"前端开发如果涉及到node站点的话，也可以通过node做缓存","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591090857,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1051487,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLHOZjqhVkWgUrUibLnXkiaFkhJdfWT2BZP3LldE3tArIoHASlhTSp8tiatiamLbQOjKeMcYHkAexoyCg/132","nickname":"江霖","note":"","ucode":"D197B3FD012944","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38688,"discussion_content":"可以使用service worker，web服务器nginx也可以设置缓存的资源","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571819117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1550401,"avatar":"https://static001.geekbang.org/account/avatar/00/17/a8/41/b263223b.jpg","nickname":"黄紫茜","note":"","ucode":"9B524073A0F7B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4609,"discussion_content":"可以通过设置http的响应头设置，我有写过一篇相关的缓存问题的文章，里面写的挺详细的，你可以看看https://zzilcc.github.io/2019/06/16/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E8%AF%A6%E8%A7%A3/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565592240,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1449126,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ericSVf8WOEzoprz4iar2NnUlh7RibXUmwV8XClicZLz8icUhmauVj1cq1gOf7HGtU4adibcpb1aQ36hFcQ/132","nickname":"ISXMG","note":"","ucode":"58E018EED947E2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4591,"discussion_content":"可以通过设置响应头一些属性来控制资源是否缓存，这方面的知识很多，你搜索一下资料就知道了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565580781,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148989,"user_name":"CMS","can_delete":false,"product_type":"c1","uid":1588451,"ip_address":"","ucode":"30FAC843F9D153","user_header":"https://static001.geekbang.org/account/avatar/00/18/3c/e3/aee9692f.jpg","comment_is_top":false,"comment_ctime":1573122557,"is_pvip":false,"replies":[{"id":"59307","content":"http&#47;1.1 一个tcp同时只能处理一个请求，浏览器会为每个域名维护6个tcp连接！<br><br>但是每个tcp连接是可以复用的，也就是处理完一个请求之后，不断开这个tcp连接，可以用来处理下个http请求！<br><br>不过http2是可以并行请求资源的，所以如果使用http2，浏览器只会为每个域名维护一个tcp连接","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1574481756,"ip_address":"","comment_id":148989,"utype":1}],"discussion_count":9,"race_medal":0,"score":"139012076029","product_id":100033601,"comment_content":"Chrome 有个机制，同一个域名同时最多只能建立 6 个 TCP 连接，如果在同一个域名下同时有 10 个请求发生，那么其中 4 个请求会进入排队等待状态，直至进行中的请求完成。 是指同一个域名下的6个并发请求么。我理解建立一个tcp连接，可以处理多个请求吧？<br>这一块蒙了，看好多人问这个","like_count":32,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473698,"discussion_content":"http/1.1 一个tcp同时只能处理一个请求，浏览器会为每个域名维护6个tcp连接！\n\n但是每个tcp连接是可以复用的，也就是处理完一个请求之后，不断开这个tcp连接，可以用来处理下个http请求！\n\n不过http2是可以并行请求资源的，所以如果使用http2，浏览器只会为每个域名维护一个tcp连接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574481756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2208091,"avatar":"","nickname":"杨梦圆","note":"","ucode":"55603CD633E076","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":546064,"discussion_content":"老师，那如果是http2的话，是不是能同时发起和响应无数个个请求了？平时我们有请求数量限制是因为浏览器的限制么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642147578,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":473698,"ip_address":""},"score":546064,"extra":""}]},{"author":{"id":2711728,"avatar":"https://static001.geekbang.org/account/avatar/00/29/60/b0/f928b3e4.jpg","nickname":"子墨","note":"","ucode":"637E2BC1B57603","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385810,"discussion_content":": http/1.1 一个tcp同时只能处理一个请求,那么那种秒杀功能，几百万并发指的是什么意思呢？不是同时几百万个并发请求嘛？","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1627284444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1376211,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ff/d3/dc645af7.jpg","nickname":"youngBrain","note":"","ucode":"D8B2DC48F3ABBA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":558518,"discussion_content":"浏览器针对每个域名维护 6 个 tcp 连接，结合上文架构上网络请求有独立的进程处理，是不是也就意味着多个 tab（渲染进程）如果都访问同一个域名是不是会共享这 6 个 tcp 请求呢？还是说每个渲染进程的 6 个 tcp 连接是独立的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1648365108,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1163119,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bf/6f/1916fba0.jpg","nickname":"贝贝","note":"","ucode":"964FD46CEC87CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368050,"discussion_content":"那在 http2.0的话，tcp 并行处理，是不是没有排队等 tcp 的时间了？\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618551790,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336233,"discussion_content":"http2 浏览器会为每个域名维护一个TCP连接，并且http传输时并行的，不像http1.1一个tcp同时只能处理一个http","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608536329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336232,"discussion_content":"所以TCP连接不存在排队时间了吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608536241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1328142,"avatar":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","nickname":"-_-|||","note":"","ucode":"94B21594658BF9","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":66793,"discussion_content":"http2每个域名维护一个tcp连接，怎么并行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575107452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1024186,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a0/ba/d6143072.jpg","nickname":"zaleguo","note":"","ucode":"09DA55095861B8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1328142,"avatar":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","nickname":"-_-|||","note":"","ucode":"94B21594658BF9","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":265580,"discussion_content":"在同一个tcp连接中同时发送多个http请求","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589418621,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":66793,"ip_address":""},"score":265580,"extra":""}]}]},{"had_liked":false,"id":147048,"user_name":"Geek_0d3179","can_delete":false,"product_type":"c1","uid":1728349,"ip_address":"","ucode":"536FDEC6017135","user_header":"","comment_is_top":false,"comment_ctime":1572777196,"is_pvip":false,"replies":[{"id":"56811","content":"浏览器为用同一个域名只维护一个TCP连接。<br><br>你从通过Chrome打开chrome:&#47;&#47;net-export&#47; 这个地址，然后记录网络过程。<br><br>最后在使用这个https:&#47;&#47;netlog-viewer.appspot.com&#47;  打开你日志文件，就能看到h2的详细信息了。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1572829413,"ip_address":"","comment_id":147048,"utype":1}],"discussion_count":2,"race_medal":0,"score":"126126828780","product_id":100033601,"comment_content":"老师您好~有个问题困扰我了。希望您能解答我，十分感谢。http2同个域名只能维持一个长连接。那我现在打开了一个域名下的a页面，然后又打开了这个域名的b页面，那这个b页面是新开一个tcp长连接吗？还是会用a页面的长连接？换句话说，维持一个tcp长连接，指的是一个页面维持一个？还是整个浏览器维持一个？还是同一个渲染进程维持一个？","like_count":29,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473115,"discussion_content":"浏览器为用同一个域名只维护一个TCP连接。\n\n你从通过Chrome打开chrome://net-export/ 这个地址，然后记录网络过程。\n\n最后在使用这个https://netlog-viewer.appspot.com/  打开你日志文件，就能看到h2的详细信息了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1572829413,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2796878,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/ad/4e/2630b9af.jpg","nickname":"Simon","note":"","ucode":"022639C5F15C55","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404251,"discussion_content":"浏览器为同一渲染进程维持一个tcp连接","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1634268718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122463,"user_name":"liu_xm","can_delete":false,"product_type":"c1","uid":1059215,"ip_address":"","ucode":"AD252F31D5C122","user_header":"https://static001.geekbang.org/account/avatar/00/10/29/8f/a07b72bc.jpg","comment_is_top":false,"comment_ctime":1565399502,"is_pvip":false,"replies":[{"id":"44941","content":"是的，通常如图片这种静态资源都是直接配置到cdn上的","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565400963,"ip_address":"","comment_id":122463,"utype":1}],"discussion_count":11,"race_medal":0,"score":"104644614606","product_id":100033601,"comment_content":"同域名只能建立6个tcp链接的话，那加载大量图片或者其他资源的时候不是很卡呢？","like_count":24,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462264,"discussion_content":"是的，通常如图片这种静态资源都是直接配置到cdn上的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565400963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1162030,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bb/2e/70d25615.jpg","nickname":"风之化身","note":"","ucode":"90BF1B9FF802CF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4991,"discussion_content":"域名发散可以解决这个问题","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1565864686,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1633264,"avatar":"https://static001.geekbang.org/account/avatar/00/18/eb/f0/c687d678.jpg","nickname":"433590","note":"","ucode":"6E09D280422EF0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5838,"discussion_content":"弱弱问一句，CDN是什么🤔","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1566478476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1059215,"avatar":"https://static001.geekbang.org/account/avatar/00/10/29/8f/a07b72bc.jpg","nickname":"liu_xm","note":"","ucode":"AD252F31D5C122","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1633264,"avatar":"https://static001.geekbang.org/account/avatar/00/18/eb/f0/c687d678.jpg","nickname":"433590","note":"","ucode":"6E09D280422EF0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5844,"discussion_content":"百度一下，更清楚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566480300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":5838,"ip_address":""},"score":5844,"extra":""}]},{"author":{"id":1568263,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ee/07/465058c7.jpg","nickname":"Even.Yu","note":"","ucode":"D55F190AC6E4FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391323,"discussion_content":"我尝试理解下图片上传到CDN。 目前来看应该CDN一般会是站点以外的其他域名 所以他不会因为同一域名下的6个限制导致请求阻塞问题。 对吧？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630398868,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2114442,"avatar":"https://static001.geekbang.org/account/avatar/00/20/43/8a/9380fe92.jpg","nickname":"KeilingZhuang","note":"","ucode":"CDBA0336FE3E26","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304904,"discussion_content":"H2的多路复用可以了解一下。老师这里说的是http/1.1的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599709247,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625233,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cc/91/d56a81af.jpg","nickname":"CoderArthur","note":"","ucode":"5B591914F0F67C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5175,"discussion_content":"其余请求是在这6个请求完后复用原来的链接吧？现在HTTP 1.1默认是persist。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566028754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027581,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ad/fd/abb7bfe3.jpg","nickname":"JawQ_","note":"","ucode":"5BC7B00363CC78","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4816,"discussion_content":"那即使是配置到cdn上，浏览器请求的数量也还是那么多没变化呀","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565751456,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":3,"child_discussions":[{"author":{"id":1059215,"avatar":"https://static001.geekbang.org/account/avatar/00/10/29/8f/a07b72bc.jpg","nickname":"liu_xm","note":"","ucode":"AD252F31D5C122","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1027581,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ad/fd/abb7bfe3.jpg","nickname":"JawQ_","note":"","ucode":"5BC7B00363CC78","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4881,"discussion_content":"是的，不过api的请求和图片的请求分开了，起码这俩不会相互影响了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1565790239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4816,"ip_address":""},"score":4881,"extra":""},{"author":{"id":1627601,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d5/d1/a9f688a0.jpg","nickname":"薯条别跑","note":"","ucode":"AC6E2B350B8062","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1027581,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ad/fd/abb7bfe3.jpg","nickname":"JawQ_","note":"","ucode":"5BC7B00363CC78","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135214,"discussion_content":"我们这边cdn上传静态资源的时候，会有很多域名，pic1.aaa.com pic2.aaa.com等等等等，随机上传到相应的域名上，即楼上说的域名发散，最大限度减小的超过并发请求数量的情况，（嘿哈","likes_number":9,"is_delete":false,"is_hidden":false,"ctime":1579077882,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4816,"ip_address":""},"score":135214,"extra":""},{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1027581,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ad/fd/abb7bfe3.jpg","nickname":"JawQ_","note":"","ucode":"5BC7B00363CC78","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336231,"discussion_content":"多个CDN节点啊","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608536180,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4816,"ip_address":""},"score":336231,"extra":""}]}]},{"had_liked":true,"id":122931,"user_name":"peter","can_delete":false,"product_type":"c1","uid":1058183,"ip_address":"","ucode":"261C3FC001DE2D","user_header":"https://static001.geekbang.org/account/avatar/00/10/25/87/f3a69d1b.jpg","comment_is_top":false,"comment_ctime":1565574990,"is_pvip":true,"replies":[{"id":"45142","content":"对，只发送一次。<br><br>问下文章什么地方让你感觉是发送了两次啊？<br><br>我检查下。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565576429,"ip_address":"","comment_id":122931,"utype":1}],"discussion_count":17,"race_medal":0,"score":"70285051726","product_id":100033601,"comment_content":"请问：请求行和请求头是发送两次吗？ 从文章的文字来看，是发送两次。 但我感觉是发送一次，即发送一次请求，该请求包含请求行和请求头。","like_count":16,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462459,"discussion_content":"对，只发送一次。\n\n问下文章什么地方让你感觉是发送了两次啊？\n\n我检查下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565576429,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4629,"discussion_content":"这个的确容易产生误解，图我回头修改下","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1565608623,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":4,"child_discussions":[{"author":{"id":1438648,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f3/b8/b7ed0329.jpg","nickname":"小小酥","note":"","ucode":"53137236133A77","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":319020,"discussion_content":"一年了还没有改吗","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1603925373,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4629,"ip_address":""},"score":319020,"extra":""},{"author":{"id":1243584,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f9/c0/20b4a205.jpg","nickname":"啊哈哈","note":"","ucode":"A8542946C03707","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1438648,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f3/b8/b7ed0329.jpg","nickname":"小小酥","note":"","ucode":"53137236133A77","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334917,"discussion_content":"哈哈哈\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608026357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":319020,"ip_address":""},"score":334917,"extra":""},{"author":{"id":2383973,"avatar":"https://static001.geekbang.org/account/avatar/00/24/60/65/0658ca66.jpg","nickname":"付伟超","note":"","ucode":"2CD9A5902B1FA8","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1438648,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f3/b8/b7ed0329.jpg","nickname":"小小酥","note":"","ucode":"53137236133A77","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337116,"discussion_content":"一年又过去几个月还没改","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608800505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":319020,"ip_address":""},"score":337116,"extra":""}]},{"author":{"id":1004349,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/53/3d/1189e48a.jpg","nickname":"微思","note":"","ucode":"853C48AA183A7B","race_medal":4,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4696,"discussion_content":"图上的每一个带箭头的线都会被认为是一次请求","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1565666767,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1588451,"avatar":"https://static001.geekbang.org/account/avatar/00/18/3c/e3/aee9692f.jpg","nickname":"CMS","note":"","ucode":"30FAC843F9D153","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":46111,"discussion_content":"确实产生了误解","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1573122048,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1374277,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f8/45/3753456c.jpg","nickname":"heytoo","note":"","ucode":"2FA916EB3E8B50","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5324,"discussion_content":"老铁这个提醒点赞， 也为李老师的严谨点赞。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1566178986,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2514423,"avatar":"","nickname":"Xx","note":"","ucode":"0BE62D47E42B0E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356390,"discussion_content":"这里似乎也没说错，毕竟是一次http请求里包含了请求头和请求行，都是在一次tcp连接里发出去的。只不过有先后顺序而已。如果我理解错了 望各位指正。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1615570118,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1626734,"avatar":"","nickname":"Geek_f74777","note":"","ucode":"8B512972A145A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4620,"discussion_content":"他指的应该是图中箭头画的次数","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1565601699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1577400,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqtaHMciakwNRfMqLRIDvOBhjYZllqXDYjXnGJibF7vCtiauUwvDA6F90RQ7TojgyWrgVvT0DfqhRScw/132","nickname":"看啥看看不懂","note":"","ucode":"408AF9B8B72A76","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407262,"discussion_content":"我也是迷惑这个，还以为之前学的学错了。。。。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634959624,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2711728,"avatar":"https://static001.geekbang.org/account/avatar/00/29/60/b0/f928b3e4.jpg","nickname":"子墨","note":"","ucode":"637E2BC1B57603","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385812,"discussion_content":"一年又过去几个月还没改","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627284897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1645648,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/50/217d8bb4.jpg","nickname":"飏","note":"","ucode":"419D35CD60D280","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8676,"discussion_content":"别说，文中有文字描述这块，我也差点整蒙了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568035285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625233,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cc/91/d56a81af.jpg","nickname":"CoderArthur","note":"","ucode":"5B591914F0F67C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5179,"discussion_content":"前面的确有地方说说发两次","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566029873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1029532,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/GicvRPEGZhqEqRU5wUiaZLT7lXFpzHZ9Y0knJsM7Pq66AhDmDfrQJLQNXcBG8ib9utIibkO4NVeUrFP3R9tvZD7b8A/132","nickname":"海贼王","note":"","ucode":"959C274A5E0E8B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5020,"discussion_content":"对啊，我也以为发送两次呢，既然发送一次，就画一个箭头呗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565876189,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1180833,"avatar":"https://static001.geekbang.org/account/avatar/00/12/04/a1/99aca569.jpg","nickname":"冯剑","note":"","ucode":"C22CAC2021A485","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4680,"discussion_content":"作者应该 认真审核下 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565659829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":3,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127105,"user_name":"houqx","can_delete":false,"product_type":"c1","uid":1380187,"ip_address":"","ucode":"71FDE1BDF1C649","user_header":"https://static001.geekbang.org/account/avatar/00/15/0f/5b/dc7589e0.jpg","comment_is_top":false,"comment_ctime":1566554958,"is_pvip":false,"replies":[{"id":"47143","content":"用户快速点击也有可能的，通常，前端要处理防止多次点击的情况。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1566657782,"ip_address":"","comment_id":127105,"utype":1}],"discussion_count":8,"race_medal":0,"score":"65991064398","product_id":100033601,"comment_content":"问一个今天遇到的跟本篇文章没有太大关系的问题：<br>问题描述：前端有一按钮，点击可以签到(比如调用的接口名为doSign)，签到成功后置灰，不能再点击。但是看服务端日志存在同一时间同一用户该接口的多次调用(通常为3次，间隔10ms以内)。<br>我想问的问题是：<br>1：这里的重复调用是哪里引入的(用户手抖多次点击？)<br>2：浏览器在发出一个网络请求后，当这个请求还没返回的时候，会再重复发起相同的请求吗？(用户快速点击)","like_count":15,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464322,"discussion_content":"用户快速点击也有可能的，通常，前端要处理防止多次点击的情况。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566657782,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1952230,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/c9/e6/5cc0b2b4.jpg","nickname":"黯墨","note":"","ucode":"B79074735C71D2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407711,"discussion_content":"除了节流防抖，还可以做一个防背推，只用最新的返回数据","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635087758,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1194643,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3a/93/d7be8a1a.jpg","nickname":"晓小东","note":"","ucode":"93F9462EAAA63C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":543664,"discussion_content":"0","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641264018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1023696,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/9e/d0/6ce2f8db.jpg","nickname":"admin","note":"","ucode":"0F22E8578521E9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384691,"discussion_content":"这么短的时间难道不是预检请求吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626701977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2093945,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/f3/79/a2bedc1e.jpg","nickname":"J6","note":"","ucode":"3F097CE1FFCA05","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":312205,"discussion_content":"前端做一下截流防抖，或者在请求返回结果前给按钮一个loading动画并置灰。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602607826,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1338019,"avatar":"https://static001.geekbang.org/account/avatar/00/14/6a/a3/82fa23f7.jpg","nickname":"何锦余","note":"","ucode":"153750511B9ADE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":84876,"discussion_content":"你都说了签到成功后置灰，点了第一次签到在服务端返回结果之前，我再点击一次不就发送了两次签到请求了嘛","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576507796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1051487,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLHOZjqhVkWgUrUibLnXkiaFkhJdfWT2BZP3LldE3tArIoHASlhTSp8tiatiamLbQOjKeMcYHkAexoyCg/132","nickname":"江霖","note":"","ucode":"D197B3FD012944","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":38692,"discussion_content":"个人觉得纯人的话10ms，借助按键精灵这种工具才可以吧。还是从代码角度排查一下吧，实在找不到问题可以使用debounce处理一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571819522,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1386289,"avatar":"https://static001.geekbang.org/account/avatar/00/15/27/31/78da81cb.jpg","nickname":"李春静Daisy","note":"","ucode":"93AEA4E5BAA80D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19500,"discussion_content":"你用个状态拦截提交一下就好","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569202279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122447,"user_name":"nissan","can_delete":false,"product_type":"c1","uid":1262913,"ip_address":"","ucode":"A38C4256D653BF","user_header":"https://static001.geekbang.org/account/avatar/00/13/45/41/27d3fcf9.jpg","comment_is_top":false,"comment_ctime":1565390889,"is_pvip":false,"replies":[{"id":"44943","content":"是否要使用localstorage，还是要看具体应用场景。其实使用cookie会很方便，因为它会随着http请求头把cookie内容发送服务器，用localstorage需要重新实现数据上传和下载。 ","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565401214,"ip_address":"","comment_id":122447,"utype":1}],"discussion_count":1,"race_medal":0,"score":"65989900329","product_id":100033601,"comment_content":"请问老师，使用者的资讯（如UID=3431uad）是放在cookie还是localstorage中好呢？我的理解是存不存cookie是后端决定（要求set-cookie)存localstorage是前端程式控制的。是这样吗？","like_count":15,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462255,"discussion_content":"是否要使用localstorage，还是要看具体应用场景。其实使用cookie会很方便，因为它会随着http请求头把cookie内容发送服务器，用localstorage需要重新实现数据上传和下载。 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565401214,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123337,"user_name":"Louis","can_delete":false,"product_type":"c1","uid":1351094,"ip_address":"","ucode":"891D9EDD6D2851","user_header":"","comment_is_top":false,"comment_ctime":1565660285,"is_pvip":false,"replies":[{"id":"45516","content":"一个http中的keep-alive是排队请求，也就是一个http请求完成之后才能继续请求下一个，而http2中请求是并发的，可以同时处理很多请求！","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565827014,"ip_address":"","comment_id":123337,"utype":1}],"discussion_count":1,"race_medal":0,"score":"48810300541","product_id":100033601,"comment_content":"请问老师http的keep alive和http2中的信道服用有什么区别呢","like_count":11,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462626,"discussion_content":"一个http中的keep-alive是排队请求，也就是一个http请求完成之后才能继续请求下一个，而http2中请求是并发的，可以同时处理很多请求！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565827014,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122637,"user_name":"aaron","can_delete":false,"product_type":"c1","uid":1097648,"ip_address":"","ucode":"7DBB9B0656BDC3","user_header":"https://static001.geekbang.org/account/avatar/00/10/bf/b0/6730d757.jpg","comment_is_top":false,"comment_ctime":1565449273,"is_pvip":false,"replies":[{"id":"45009","content":"http在传输过程中是明文的，所以数据在传输过程中是能够被截获或者修改的，比如谁在你电脑上安装了一个网络拦截软件，或者你的路由器被谁安装了监听软件，甚至在网络服务提供商都有可能修改你页面的内容，基于这些原因，我们需要在传输过程中加密数据，这就是https出现的原因，即便你拦截到了请求，获取的只是加密后的数据，拿到也没有什么用。<br><br>这块在浏览器安全篇会系统介绍。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565513665,"ip_address":"","comment_id":122637,"utype":1}],"discussion_count":3,"race_medal":0,"score":"48810089529","product_id":100033601,"comment_content":"老师，请问https为什么能防止网络劫持？","like_count":11,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462338,"discussion_content":"http在传输过程中是明文的，所以数据在传输过程中是能够被截获或者修改的，比如谁在你电脑上安装了一个网络拦截软件，或者你的路由器被谁安装了监听软件，甚至在网络服务提供商都有可能修改你页面的内容，基于这些原因，我们需要在传输过程中加密数据，这就是https出现的原因，即便你拦截到了请求，获取的只是加密后的数据，拿到也没有什么用。\n\n这块在浏览器安全篇会系统介绍。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565513665,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1046745,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/f8/d9/dc58bb9b.jpg","nickname":"SUNTOPO","note":"","ucode":"0DD7492725962C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":132249,"discussion_content":"因为是明文的，所以拦截方能够知道文档的结构，从而再你的文档中插入其他内容如广告，而不应该总体文档的渲染。如果是明文的，不知道该把广告插入到那个字节后面，如果随意加入可能就导致解密失败，无法显示问题，也就达不到做广告的目的了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578891209,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1097648,"avatar":"https://static001.geekbang.org/account/avatar/00/10/bf/b0/6730d757.jpg","nickname":"aaron","note":"","ucode":"7DBB9B0656BDC3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4763,"discussion_content":"老师好，我遇到这样情况的，我们有一个客服网站是HTTPS的，客服系统老是遭到拦截，客服打开以后联系上的客服，尽然不是我们的客服导致我们业务出现很大损失。从客服那边的截图显示网站是跟我们一样的，但是客服人不是我们这边的。我问了别人，https也是可以拦截，具体怎么拦截的，哪个环节出现了问题，证书泄露了还是什么情况","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565706853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129297,"user_name":"weineel","can_delete":false,"product_type":"c1","uid":1049741,"ip_address":"","ucode":"6DC6EF4F256A53","user_header":"https://static001.geekbang.org/account/avatar/00/10/04/8d/005c2ff3.jpg","comment_is_top":false,"comment_ctime":1567081810,"is_pvip":true,"discussion_count":4,"race_medal":2,"score":"35926820178","product_id":100033601,"comment_content":"老是你好，有个疑问：在我理解中的 TCP 连接需要四元组(client ip, client port, server ip, server port)保证连接的唯一性，那浏览器是怎么对同一服务器(server ip, server port 不变)创建多个 TCP 连接的？<br><br>浏览器只有一个网络进程且 client ip 不变，是不是在创建连接的时候，会监听多个 client port 以保证4元组的唯一？","like_count":8,"discussions":[{"author":{"id":1297819,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/foJmj0zeZnLxy7E2s0USIEkMicJ47UqZXXKGfaSGHhYXCxwMsuXvMomolYKQK2RxM39pXyribAPaxlTyYcsCR9Fg/132","nickname":"Geek_bce8c4","note":"","ucode":"BC85785E271506","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211368,"discussion_content":"client port 一般是由tcp自动分配的。网络进程中可以发起多个tcp连接线程，每个线程的client port是不一样的。个人理解，若有误请大家指正。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584845068,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1120478,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/de/45875491.jpg","nickname":"蔺波","note":"","ucode":"C185D35419790C","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":56438,"discussion_content":"应该是这样，每次创建新的socket管理，系统自动选择client port","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1574480564,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1708271,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/10/ef/4c9b2383.jpg","nickname":"Everlaa","note":"","ucode":"9B4FFFABD62B07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":235221,"discussion_content":"应该不用每个连接启一个端口，不然本地的端口会被大量占用。其实这个应该可以用nio解释吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587030423,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1622820,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqwEyAicIKcPUbXQkv4Q4o0FyYSCvibrfmsia9QSr9rvaPYt7EyL6FB3nsgQLtCBhXC5oSUrVnQUFiaqQ/132","nickname":"Andyhuang","note":"","ucode":"D0E81EF17A2C91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7014,"discussion_content":"同问，希望老师能解答一下","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567263351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126662,"user_name":"行云流水","can_delete":false,"product_type":"c1","uid":1374414,"ip_address":"","ucode":"3CCE8B9902005A","user_header":"https://static001.geekbang.org/account/avatar/00/14/f8/ce/495dfc91.jpg","comment_is_top":false,"comment_ctime":1566443534,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35926181902","product_id":100033601,"comment_content":"1.按照老师说的,至少在浏览器中 http是在 tcp的传输阶段。不是每一层独立完成后交给下一层。OSI七层模型只是一个参考,浏览器只是参考OSI模型实现,不一定遵守OSI的层级关系？<br>2. 上一节有一个同学提问说的，针对数据包实时渲染问题。老师说在TCP层就解决了丢包和顺序问题。但现在HTTP是在TCP层的传输层中使用。不明白怎么解决丢包和顺序问题？","like_count":8,"discussions":[{"author":{"id":1021638,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/96/c6/ac69caa9.jpg","nickname":"今晚吃啥","note":"","ucode":"960608C402BA87","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8841,"discussion_content":"HTTP是在TCP之上，TCP解决丢包和顺序问题；网络分层，是包含关系；","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1568081403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144580,"user_name":"stanlee","can_delete":false,"product_type":"c1","uid":1714035,"ip_address":"","ucode":"22F7F9C8BC2416","user_header":"https://static001.geekbang.org/account/avatar/00/1a/27/73/b79761ec.jpg","comment_is_top":false,"comment_ctime":1571973017,"is_pvip":false,"replies":[{"id":"55780","content":"首先回答第一个问题：<br>”同一个域名同时最多只能建立 6 个 TCP 连接“ 指的不光是指Ajax，还包括页面中的资源加载，只要是一个域名下的资源，浏览器同一时刻最多只支持6个并行请求。<br><br>不过这是HTTP&#47;1.1的规则，HTTP&#47;2已经不用这套规则了，而且HTTP&#47;2也很成熟了，有条件可以考虑切换到HTTP&#47;2.<br><br>Ajax其实就是HTTP请求，包括了XMLHttpRequest和Fetch，HTTP请求是建立在TCP协议之上的。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1572012726,"ip_address":"","comment_id":144580,"utype":1}],"discussion_count":3,"race_medal":0,"score":"27341776793","product_id":100033601,"comment_content":"老师，同一个域名同时最多只能建立 6 个 TCP 连接  是不是意思是统一域名同时只能发送6个AJAX请求吗， TCP连接和AJAX请求有什么关系吗","like_count":6,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":472013,"discussion_content":"首先回答第一个问题：\n”同一个域名同时最多只能建立 6 个 TCP 连接“ 指的不光是指Ajax，还包括页面中的资源加载，只要是一个域名下的资源，浏览器同一时刻最多只支持6个并行请求。\n\n不过这是HTTP/1.1的规则，HTTP/2已经不用这套规则了，而且HTTP/2也很成熟了，有条件可以考虑切换到HTTP/2.\n\nAjax其实就是HTTP请求，包括了XMLHttpRequest和Fetch，HTTP请求是建立在TCP协议之上的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572012726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1568263,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ee/07/465058c7.jpg","nickname":"Even.Yu","note":"","ucode":"D55F190AC6E4FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391313,"discussion_content":"HTTP2 和 HTTPS 有什么区别呢？\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630397515,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1714035,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/27/73/b79761ec.jpg","nickname":"stanlee","note":"","ucode":"22F7F9C8BC2416","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":64181,"discussion_content":"谢谢老师","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574941277,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123344,"user_name":"张舵主","can_delete":false,"product_type":"c1","uid":1197797,"ip_address":"","ucode":"E76E4D03105929","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/e5/bd8a8447.jpg","comment_is_top":false,"comment_ctime":1565660636,"is_pvip":false,"replies":[{"id":"45520","content":"第一个问题：dns缓存是保存浏览器本地的，下次启动依然有结果！<br><br>第二个问题：图片和其他域名都一样的，都会缓存的","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565827284,"ip_address":"","comment_id":123344,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27335464412","product_id":100033601,"comment_content":"<br>老师您好，我有2个问题：1，浏览器缓存DNS的解析结果，这个缓存是缓存到浏览器进程中吗？是不是浏览器关闭后浏览器的这个DNS的缓存也一起清除了？2，浏览器打开某个站点页面后，这个页面里面还有很多的域名需要解析例如一些图片的链接，这些解析结果都会缓存吗？","like_count":6,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462629,"discussion_content":"第一个问题：dns缓存是保存浏览器本地的，下次启动依然有结果！\n\n第二个问题：图片和其他域名都一样的，都会缓存的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565827284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":238271,"user_name":"大桥2号","can_delete":false,"product_type":"c1","uid":2095749,"ip_address":"","ucode":"2BB88B211C5C8A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/fa/85/1920fa21.jpg","comment_is_top":false,"comment_ctime":1596107984,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23070944464","product_id":100033601,"comment_content":"1. 返回请求 (响应行，响应头，响应体)<br>   - 其中响应行包括HTTP协议版本和状态码，也包含其他信息，例如 缓存信息 cache-control， etag等 以及cookie <br>2. 断开连接 (断开TCP连接)  但是如果在头信息中加入 Connection ： Keep-Alive就一直保持连接<br><br>- 关于缓存<br>  - DNS 缓存比较简单，主要是浏览器在本地把对应IP和域名管理起来<br>  - 浏览器资源缓存<br>    - 服务器通过响应头`Cache-Control`字段设置是否缓存该资源 例如`Cache-Control: Max-age=2000`;<br>    - 缓存如果未过期再次请求直接拿缓存<br>    - 缓存如果过期，再次请求时浏览器会继续发起网络请求并且在HTTP请求头携带 `If-None-Match: &#39;4f80f-13c-3a1xb12a&#39;`<br>    - 服务器根据这个请求头的值判断请求的资源是否有更新，如果更新会直接返回，没有更新会走缓存<br>    - 协商缓存还可以通过设置字段`Last-Modified`第一次访问资源，服务器返回资源的同时，响应头中设置 Last-Modified（服务器上的最后修改时间），浏览器接收后，缓存文件和响应头；<br>      **下一次请求这个资源，浏览器检测到有 Last-Modified，于是添加If-Modified-Since请求头，值就是Last-Modified中的值**；<br>      服务器再次收到这个资源请求，会**根据 If-Modified-Since 中的值与服务器中这个资源的最后修改时间对比**，如果没有变化，返回304和空的响应体，直接从缓存读取，如果If-Modified-Since的时间小于服务器中这个资源的最后修改时间，说明文件有更新，于是返回新的资源文件和200；`If-Modified-Since : &lt;last_modified_value&gt;`<br>      但是Last-Modified 只能以秒计时，如果在不可感知的时间内修改完成文件，那么服务端会认为资源还是命中了，不会返回正确的资源；<br>    - **Etag**是服务器响应请求时，返回当前资源文件的一个唯一标识(由服务器生成)，只要资源有变化，Etag就会重新生成；下一次加载资源向服务器发送请求时，会将上一次返回的Etag值放到请求头If-None-Match里，服务器只需要比较客户端传来的**If-None-Match**跟自己服务器上该资源的ETag是否一致，就能很好地判断资源相对客户端而言是否被修改过了。如果服务器发现ETag匹配不上，那么直接以常规GET 200回包形式将新的资源（当然也包括了新的ETag）发给客户端；如果ETag是一致的，则直接返回304知会客户端直接使用本地缓存即可。`IF-None-Match: &lt;etag_value&gt;`","like_count":5,"discussions":[{"author":{"id":1568263,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ee/07/465058c7.jpg","nickname":"Even.Yu","note":"","ucode":"D55F190AC6E4FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391319,"discussion_content":"其实这么来看性能最好的缓存就是: Cache-Control: Max-age=2000 。 因为在客户端直接完成了效验，都少去了服务端往返的时间。 但实际业务中其实用协商缓存也就是Etag的情况可能会多一些。我想问下有没有最佳实践把两者结合的？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630398263,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127109,"user_name":"houqx","can_delete":false,"product_type":"c1","uid":1380187,"ip_address":"","ucode":"71FDE1BDF1C649","user_header":"https://static001.geekbang.org/account/avatar/00/15/0f/5b/dc7589e0.jpg","comment_is_top":false,"comment_ctime":1566556156,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23041392636","product_id":100033601,"comment_content":"不接CDN与接入CDN，DNS解析过程一样吗? 知道 A记录与cname，但是这里串不起来，还希望老师讲解一下","like_count":5,"discussions":[{"author":{"id":1162862,"avatar":"https://static001.geekbang.org/account/avatar/00/11/be/6e/46a5da10.jpg","nickname":"Hong","note":"","ucode":"2E7FB03BFEC8F9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368156,"discussion_content":"CDN是负责资源分发调度的，主要缓存静态资源(可以根据访问节点智能分配节点来缓存资源，做到快速资源加载)，减少网站服务器的压力，同时提高资源加载速度，整体站点响应快体验更好。和DNS不是一个概念，DNS是负责域名解析的，里面会有A记录和CNAME的概念。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1618583102,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123087,"user_name":"sunshineling","can_delete":false,"product_type":"c1","uid":1543564,"ip_address":"","ucode":"7E8E03C8568112","user_header":"https://static001.geekbang.org/account/avatar/00/17/8d/8c/ec40964b.jpg","comment_is_top":false,"comment_ctime":1565602951,"is_pvip":true,"replies":[{"id":"45211","content":"是同一个域名下面，同一时间只能有6个并发请求，超过六个以上的需要排队！<br>","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565606309,"ip_address":"","comment_id":123087,"utype":1}],"discussion_count":5,"race_medal":0,"score":"23040439431","product_id":100033601,"comment_content":"老师，你说chrome一次最多只能建立6个tcp连接，有点不理解，这是说只能支持6个用户并发吗？<br>","like_count":5,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462533,"discussion_content":"是同一个域名下面，同一时间只能有6个并发请求，超过六个以上的需要排队！\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565606309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1798000,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6f/70/dd299c7b.jpg","nickname":"Lc——++","note":"","ucode":"B912B4B3305F34","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":172030,"discussion_content":"同一个域名指的是客户端域名还是服务端域名呀请问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581766766,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1915533,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/3a/8d/f5e7a20d.jpg","nickname":"何以解忧","note":"","ucode":"4DFE2BDBAF4919","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1798000,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/6f/70/dd299c7b.jpg","nickname":"Lc——++","note":"","ucode":"B912B4B3305F34","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357360,"discussion_content":"域名都是服务器资源地址","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615793796,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":172030,"ip_address":""},"score":357360,"extra":""}]},{"author":{"id":1627601,"avatar":"https://static001.geekbang.org/account/avatar/00/18/d5/d1/a9f688a0.jpg","nickname":"薯条别跑","note":"","ucode":"AC6E2B350B8062","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":135221,"discussion_content":"不是的，如果这12个请求是同域名且同时发出的话，实际上只有6个请求成功发出了，剩下的6个在排队等待。等前面请求有响应后会依次继续发送请求","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579078150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625161,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cc/49/4fba1938.jpg","nickname":"芳华年月","note":"","ucode":"79DFE01DCB6767","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":10010,"discussion_content":"老师，那比如页面起始有12张图片，意思只能一次先加载6涨？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568255953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126048,"user_name":"奋斗达人","can_delete":false,"product_type":"c1","uid":1024497,"ip_address":"","ucode":"BE76F79260F75E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/f1/c260195b.jpg","comment_is_top":false,"comment_ctime":1566300903,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"18746170087","product_id":100033601,"comment_content":"感觉更面向初学者，写的很浅出，不是很深入。但还是学到了不少新的知识:)<br>1.Chrome针对每个域名只允许同时6个请求，多出的需要排队<br>2.浏览器的缓存查找流程，什么时候是200，什么是304，如何更新Age","like_count":4,"discussions":[{"author":{"id":1272789,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6b/d5/0e4b70a2.jpg","nickname":"Sean","note":"","ucode":"BC0715BF423613","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32516,"discussion_content":"200是在缓存命中的时候，即缓存有效期 内，会使用缓存资源组装成200的成功响应报文；304是缓存过期了，向服务器发起了请求（携带着缓存资源的e-tag等标示），服务器验证之后发现缓存的资源与服务器端的最新资源是一致的，即资源并没有改变；因此直接返回没有响应体的304 Not Modified，告知浏览器可以复用缓存资源。缓存周期重新开始。\n总结来说，就是有没有向服务器发起资源有效性的验证。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1571043115,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1568263,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ee/07/465058c7.jpg","nickname":"Even.Yu","note":"","ucode":"D55F190AC6E4FB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1272789,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6b/d5/0e4b70a2.jpg","nickname":"Sean","note":"","ucode":"BC0715BF423613","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391314,"discussion_content":"协商缓存实质还是要对服务器资源的变更做判定的，想请问下大佬在协商缓存的基础上有咩有强制缓存 + 强制更新的策略？ 强制更新指比如我一个新的版本升级可能还在强制缓存的有效期内。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630397824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":32516,"ip_address":""},"score":391314,"extra":""}]}]},{"had_liked":false,"id":123987,"user_name":"°半月含雪雨","can_delete":false,"product_type":"c1","uid":1111119,"ip_address":"","ucode":"AD1363CCE660B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/f4/4f/6be9c5d7.jpg","comment_is_top":false,"comment_ctime":1565788399,"is_pvip":false,"replies":[{"id":"45667","content":"👍","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565879284,"ip_address":"","comment_id":123987,"utype":1}],"discussion_count":4,"race_medal":0,"score":"18745657583","product_id":100033601,"comment_content":"原本以为TCP&#47;IP的五层结构的每一层都是独立完成之后然后再交给下一层去处理。看到老师写的请求流程之后恍然大悟，这方面的知识终于串到了一起。网络加载时间过久有可能是dns缓存，页面缓存都没有；寻找到目标服务器经历的节点比较多（可以用cdn），目标文件比较大（可以拆包），客户端性能不够等原因。","like_count":4,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462941,"discussion_content":"👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565879284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1374414,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f8/ce/495dfc91.jpg","nickname":"行云流水","note":"","ucode":"3CCE8B9902005A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5707,"discussion_content":"上一节有一个同学提问说的，针对数据包实时渲染问题。老师说在TCP层就解决了丢包和顺序问题。但现在HTTP是在TCP层的传输层中使用。我就不明白怎么解决丢包和顺序问题？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566443225,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1374414,"avatar":"https://static001.geekbang.org/account/avatar/00/14/f8/ce/495dfc91.jpg","nickname":"行云流水","note":"","ucode":"3CCE8B9902005A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5705,"discussion_content":"按照老师说的,至少在浏览器中 http是在 tcp的传输阶段。不是每一层独立完成后交给下一层。OSI七层模型只是一个参考,浏览器只是参考实现？不是很明白？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566442861,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1029532,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/GicvRPEGZhqEqRU5wUiaZLT7lXFpzHZ9Y0knJsM7Pq66AhDmDfrQJLQNXcBG8ib9utIibkO4NVeUrFP3R9tvZD7b8A/132","nickname":"海贼王","note":"","ucode":"959C274A5E0E8B","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5019,"discussion_content":"所以说不是独立完成之后再移交给下一层？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565875926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219359,"user_name":"听雨听风","can_delete":false,"product_type":"c1","uid":1765734,"ip_address":"","ucode":"DC35F0A3BA90E4","user_header":"https://static001.geekbang.org/account/avatar/00/1a/f1/66/7153dcba.jpg","comment_is_top":false,"comment_ctime":1590017277,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14474919165","product_id":100033601,"comment_content":"Chrome 有个机制，同一个域名同时最多只能建立 6 个 TCP 连接，如果在同一个域名下同时有 10 个请求发生，那么其中 4 个请求会进入排队等待状态，直至进行中的请求完成。<br>---如果同时打开两个或多个页面窗口均为同一个域名下的页面，是每个页面窗口可建立6个TCP连接，还是总共可建立6个TCP连接。","like_count":3},{"had_liked":false,"id":223709,"user_name":"igetter","can_delete":false,"product_type":"c1","uid":1623203,"ip_address":"","ucode":"2CF0EC4653CE4B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqOtThoyf1GUazm9fn7jTFJiaf7yZwh9unGgLSsIJ2Op20wIpJHDw5ZxeCGf3ibZKdZ2K3ibCR1n71Hg/132","comment_is_top":false,"comment_ctime":1591162558,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10181097150","product_id":100033601,"comment_content":"断开网络情况下，浏览器访问一个图片，如果浏览器有缓存这个图片，会正常显示这个图片吗？","like_count":2},{"had_liked":false,"id":169991,"user_name":"登风吹过","can_delete":false,"product_type":"c1","uid":1604589,"ip_address":"","ucode":"1BB48896F27FF9","user_header":"https://static001.geekbang.org/account/avatar/00/18/7b/ed/a48faa9d.jpg","comment_is_top":false,"comment_ctime":1578489677,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10168424269","product_id":100033601,"comment_content":"请问发起ajax时的http协议版本是由什么决定的","like_count":2},{"had_liked":false,"id":136998,"user_name":"bailnl","can_delete":false,"product_type":"c1","uid":1164442,"ip_address":"","ucode":"12A377D53ED273","user_header":"https://static001.geekbang.org/account/avatar/00/11/c4/9a/e7b893a7.jpg","comment_is_top":false,"comment_ctime":1569573039,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10159507631","product_id":100033601,"comment_content":"文章说道DNS在浏览器有缓存，但是本地也可以配置DNS。浏览器的DNS和本地&#47;etc文件里面的host文件里面的域名映射，先后顺序是什么，权重又是怎么样的呢？","like_count":2},{"had_liked":false,"id":132077,"user_name":"轩爷","can_delete":false,"product_type":"c1","uid":1016658,"ip_address":"","ucode":"1C59F6A4E7ABAE","user_header":"https://static001.geekbang.org/account/avatar/00/0f/83/52/d67f276d.jpg","comment_is_top":false,"comment_ctime":1568018945,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10157953537","product_id":100033601,"comment_content":"如果同一个域名的6个TCP连接都是Connection:Keep-Alive，那么第7个TCP的连接请求会被挂起吗，一直到前面有TCP连接断开才执行吗？","like_count":2,"discussions":[{"author":{"id":1622818,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c3/22/7db1d955.jpg","nickname":"孟","note":"","ucode":"8EE9736F7DCB3F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":20078,"discussion_content":"应该是不会发不出去的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569254804,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127540,"user_name":"new life","can_delete":false,"product_type":"c1","uid":1447866,"ip_address":"","ucode":"B817AC3909102B","user_header":"https://static001.geekbang.org/account/avatar/00/16/17/ba/c56aa720.jpg","comment_is_top":false,"comment_ctime":1566738118,"is_pvip":true,"replies":[{"id":"47228","content":"对 一回事","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1566746836,"ip_address":"","comment_id":127540,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10156672710","product_id":100033601,"comment_content":"老师 帮忙解答个问题 http:127.0.0.1:8080 这个端口号既是Tomcat 应用端口号 也是 tcp连接用的 端口号吗 ","like_count":2,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464540,"discussion_content":"对 一回事","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566746836,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124228,"user_name":"王天真","can_delete":false,"product_type":"c1","uid":1372941,"ip_address":"","ucode":"ED70B933AB984F","user_header":"https://static001.geekbang.org/account/avatar/00/14/f3/0d/7fb84744.jpg","comment_is_top":false,"comment_ctime":1565838128,"is_pvip":false,"replies":[{"id":"45647","content":"加油","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565877330,"ip_address":"","comment_id":124228,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10155772720","product_id":100033601,"comment_content":"写的是真的好！ 帮助又梳理了一遍。非常喜欢 非常感谢！<br><br>--来自一枚前端程序媛","like_count":2,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463070,"discussion_content":"加油","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565877330,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123010,"user_name":"斐波那契","can_delete":false,"product_type":"c1","uid":1464006,"ip_address":"","ucode":"85E2EBC01392B1","user_header":"https://static001.geekbang.org/account/avatar/00/16/56/c6/0b449bc6.jpg","comment_is_top":false,"comment_ctime":1565588623,"is_pvip":false,"replies":[{"id":"45214","content":"默认情况下是通过服务器来配置的，当然在浏览器端，也可以通过强制刷新来加载资源","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565607221,"ip_address":"","comment_id":123010,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10155523215","product_id":100033601,"comment_content":"老师这个浏览器本地缓存是跟浏览器设置有关么 是不是我设置一下可能就不会本地缓存 还是说这个缓存可以由服务器的响应来控制？","like_count":2,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462496,"discussion_content":"默认情况下是通过服务器来配置的，当然在浏览器端，也可以通过强制刷新来加载资源","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565607221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122477,"user_name":"℉aith♭ook","can_delete":false,"product_type":"c1","uid":1292141,"ip_address":"","ucode":"C5F15A4776B845","user_header":"https://static001.geekbang.org/account/avatar/00/13/b7/6d/2bb17b02.jpg","comment_is_top":false,"comment_ctime":1565402384,"is_pvip":false,"replies":[{"id":"44954","content":"在浏览器安全篇会系统介绍，后面的其它章节中遇到也会穿插介绍一点","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565405613,"ip_address":"","comment_id":122477,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10155336976","product_id":100033601,"comment_content":"浏览器又是怎么对待跨域请求的呢？发送真请求之前不是还有个预请求，老师可否择机插入讲解，跨域对前端的问题对于前端来说还是常见的问题","like_count":2,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462269,"discussion_content":"在浏览器安全篇会系统介绍，后面的其它章节中遇到也会穿插介绍一点","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565405613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1620430,"avatar":"https://static001.geekbang.org/account/avatar/00/18/b9/ce/553a37e2.jpg","nickname":"susan🍭","note":"","ucode":"EE0A24B25E12E6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4568,"discussion_content":"预请求发生在复杂请求的情况下，会先发送一个options预请求。跨域是因为浏览器同源策略，且请求是xhr请求，此时协议，域名，端口有一个不同则会产生跨域现象。解决办法一，jsonp目的把xhr请求类型变成script类型，并且服务器返回的是script脚本。解决办法二，服务器端添加请求filterbean过滤，对请求放行。解决办法三，配置nginx，类似于办法二。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565567202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":287292,"user_name":"Geek_79bf1d","can_delete":false,"product_type":"c1","uid":2424465,"ip_address":"","ucode":"59766F9B5BED52","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erg8t0El6jTaXjFOsH8ibLJOatrrPqsI55wGV2bicviaO220L4juO0KyXTrAz55vZTKgkaSQOIoMZKtQ/132","comment_is_top":false,"comment_ctime":1617870132,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5912837428","product_id":100033601,"comment_content":"“准备 IP 地址和端口”段落内容有点歧义， TCP&#47;IP 是一个协议簇，它并是只包含TCP和IP协议，HTTP协议其实就是属于 TCP&#47;IP应用层的一个协议，而TCP协议属于传输层，IP协议属于网络层","like_count":1},{"had_liked":false,"id":279856,"user_name":"陈启航","can_delete":false,"product_type":"c1","uid":2177436,"ip_address":"","ucode":"89246B9BFD3269","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLC4IhKmJDYdWhQms3dmZqJ5YMDGTlPa1o52DnKSErYjsqfc6iaRJrBDZpx0RqQx7eZAED797kiaV6aw/132","comment_is_top":false,"comment_ctime":1613985319,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5908952615","product_id":100033601,"comment_content":"讲的太好了 看到总结才想起来收藏+评价","like_count":1},{"had_liked":false,"id":148029,"user_name":"arronK","can_delete":false,"product_type":"c1","uid":1192961,"ip_address":"","ucode":"58DC6FBF2CF0C1","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/01/30ca98e6.jpg","comment_is_top":false,"comment_ctime":1572930468,"is_pvip":true,"replies":[{"id":"57081","content":"是的，每个数据包都需要确认的","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1572955444,"ip_address":"","comment_id":148029,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5867897764","product_id":100033601,"comment_content":"发送http请求的时候，请求行、请求头、请求体 是三个部分分别发送的，那根据tcp传输协议，这三部分，任何一个部分也都是被当做数据包来发送，如果过大就拆分为多个小的数据包（比如上传文件的请求体）。那么每个数据包也是需要服务器返回一个“确认收到”的数据包的吧？","like_count":1,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":473375,"discussion_content":"是的，每个数据包都需要确认的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1572955444,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134008,"user_name":"xjnotxj","can_delete":false,"product_type":"c1","uid":1624316,"ip_address":"","ucode":"1A7191A875739B","user_header":"","comment_is_top":false,"comment_ctime":1568716931,"is_pvip":false,"replies":[{"id":"51443","content":"不是，dns解析就是那域名请求ip，其它操作都不属于dns解析","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1568772584,"ip_address":"","comment_id":134008,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5863684227","product_id":100033601,"comment_content":"请问老师，构建请求，查找缓存，准备ip是不是可以归类为DNS解析之中？","like_count":1,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467580,"discussion_content":"不是，dns解析就是那域名请求ip，其它操作都不属于dns解析","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568772584,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132169,"user_name":"飏","can_delete":false,"product_type":"c1","uid":1645648,"ip_address":"","ucode":"419D35CD60D280","user_header":"https://static001.geekbang.org/account/avatar/00/19/1c/50/217d8bb4.jpg","comment_is_top":false,"comment_ctime":1568035493,"is_pvip":false,"replies":[{"id":"50548","content":"<br>获取端口号简单了：<br>http默认是80。<br>https默认是443。<br>也可以通过url指明端口号：比如http：time.geekbang.com：8080。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1568069181,"ip_address":"","comment_id":132169,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5863002789","product_id":100033601,"comment_content":"李哥，拿到 IP 之后，接下来就需要获取端口号，获取端口这个怎么实现的呀？<br>","like_count":1,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466797,"discussion_content":"\n获取端口号简单了：\nhttp默认是80。\nhttps默认是443。\n也可以通过url指明端口号：比如http：time.geekbang.com：8080。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568069181,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129869,"user_name":"蔡金标","can_delete":false,"product_type":"c1","uid":1115483,"ip_address":"","ucode":"439F1EB9759DAA","user_header":"https://static001.geekbang.org/account/avatar/00/11/05/5b/ed7c4b97.jpg","comment_is_top":false,"comment_ctime":1567307825,"is_pvip":false,"replies":[{"id":"48660","content":"是的，像是收发送快递，先是一层层打包，再一层层解包","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1567466663,"ip_address":"","comment_id":129869,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5862275121","product_id":100033601,"comment_content":"您好老师，还有个疑问，就是当TCP建立连接三次握手时，这个每次握手和握手成功发送的http请求，都会经过网络层数据链路层物理层，再经过接收方的物理层数据链路层网络层，再到对方的运输层tcp接受到对应发出的状态的吗？","like_count":1,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465684,"discussion_content":"是的，像是收发送快递，先是一层层打包，再一层层解包","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567466663,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123283,"user_name":"菜儿","can_delete":false,"product_type":"c1","uid":1213219,"ip_address":"","ucode":"36E6C3977B1843","user_header":"https://static001.geekbang.org/account/avatar/00/12/83/23/d17f9865.jpg","comment_is_top":false,"comment_ctime":1565657029,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5860624325","product_id":100033601,"comment_content":"那个http缓存打不开啊。","like_count":1},{"had_liked":false,"id":123041,"user_name":"Bean","can_delete":false,"product_type":"c1","uid":1557853,"ip_address":"","ucode":"DC1A0C8B6BF083","user_header":"https://static001.geekbang.org/account/avatar/00/17/c5/5d/9e75eb36.jpg","comment_is_top":false,"comment_ctime":1565596390,"is_pvip":false,"replies":[{"id":"45213","content":"抓包有点麻烦了，Chrome自带的网络chrome:&#47;&#47;net-export&#47; 应该可以看，不过这个等我来验证下。","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565607079,"ip_address":"","comment_id":123041,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860563686","product_id":100033601,"comment_content":"老师 等待 TCP 队列  这个地方 ，怎样能看到TCP 在等待状态  （抓包工具中能看到吗）","like_count":1,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462512,"discussion_content":"抓包有点麻烦了，Chrome自带的网络chrome://net-export/ 应该可以看，不过这个等我来验证下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565607079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122662,"user_name":"jjd","can_delete":false,"product_type":"c1","uid":1192392,"ip_address":"","ucode":"CD5B3AA0C29DFF","user_header":"https://static001.geekbang.org/account/avatar/00/12/31/c8/5c7e2731.jpg","comment_is_top":false,"comment_ctime":1565461441,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5860428737","product_id":100033601,"comment_content":"我 h5 引入toB 业务的js sdk 链接，当他们的js 更新后，虽然我的h5 不需要发布版本，但是如何保证手机浏览器“新鲜度”的呢","like_count":1,"discussions":[{"author":{"id":2989668,"avatar":"","nickname":"Geek_4c5172","note":"","ucode":"D28A068DF8F926","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569043,"discussion_content":"使用协商缓存吧。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651299127,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122512,"user_name":"ytd","can_delete":false,"product_type":"c1","uid":1038790,"ip_address":"","ucode":"C6AEA2D19E447A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d9/c6/8be8664d.jpg","comment_is_top":false,"comment_ctime":1565412579,"is_pvip":false,"replies":[{"id":"45207","content":"ttfb参数可以看成是请求发出到接收到第一个字节的时间，通常这个慢可能是由于服务器处理速度慢导致的","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565605609,"ip_address":"","comment_id":122512,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860379875","product_id":100033601,"comment_content":"平时做的项目大部分都是基于java的web项目，前后端不分离的那种，在调试时打开chrome的调试工具，修改前端静态文件后我总是习惯性的“清空缓存并硬性加载”，有时就会遇到页面刷新出来的时间久的情况，但没太关注过为什么会加载这么慢。下面我尝试简单分析下卡在哪个阶段，希望老师能够指点下。开发时应用是部署在本地的，那么慢的原因就不会是网络原因，这种项目的特点就是用jsp来渲染页面，然后集成了各种前端的js库，导致如果不利用缓存的话，页面建立的tcp连接很多，需要下载的资源也多，就会导致页面加载起来比较慢，我检查了下响应头，发现没有用到connection: keep-alive这个头，那么连接也就不能复用，那么卡就主要卡在建立tcp连接、等待tcp队列上面。另外，偶尔会遇到加载很久的情况，这种情况好像是后端的服务响应过慢，这时检查浏览器的timing，就会发现TTFB很长，不过这种只是出现在：第一次启动应用或者启动后调试时偶尔会出现（感觉这种情况主要可能是在java web项目debug模式下后端需要做初始化处理之类的事情，只是猜测）。第一次应用启动时加载登录页面，后端做了跳转处理，返回302这个耗时就很长，建立连接其实时间花的不长，主要是后端迟迟不给响应（估计又是后端初始化导致的），再次加载登录页面就会好些，不会再出现302了。","like_count":1,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462283,"discussion_content":"ttfb参数可以看成是请求发出到接收到第一个字节的时间，通常这个慢可能是由于服务器处理速度慢导致的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565605609,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358000,"user_name":"wilson","can_delete":false,"product_type":"c1","uid":1286793,"ip_address":"上海","ucode":"55CFA9D4AA9A19","user_header":"https://static001.geekbang.org/account/avatar/00/13/a2/89/7098b532.jpg","comment_is_top":false,"comment_ctime":1663827449,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1663827449","product_id":100033601,"comment_content":"TCP&#47;IP协议下，HTTP、HTTPS在浏览器用的最广，那除了HTTP、HTTPS还有什么别的协议吗","like_count":0},{"had_liked":false,"id":355196,"user_name":"浅浅悠","can_delete":false,"product_type":"c1","uid":1518250,"ip_address":"湖北","ucode":"82F005FD97E73F","user_header":"https://static001.geekbang.org/account/avatar/00/17/2a/aa/e0ae9b76.jpg","comment_is_top":false,"comment_ctime":1661165052,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1661165052","product_id":100033601,"comment_content":"浏览器资源缓存能够缓存接口数据吗，这样就可以使一些字典接口只请求一次","like_count":0},{"had_liked":false,"id":350122,"user_name":"常想一二","can_delete":false,"product_type":"c1","uid":2462505,"ip_address":"","ucode":"6C3A59156D2212","user_header":"https://static001.geekbang.org/account/avatar/00/25/93/29/8459b21e.jpg","comment_is_top":false,"comment_ctime":1656581694,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1656581694","product_id":100033601,"comment_content":"请问，浏览器缓存的页面资源 开发人员可以看到吗？在哪里看呢？","like_count":0},{"had_liked":false,"id":347639,"user_name":"长安常安","can_delete":false,"product_type":"c1","uid":1761126,"ip_address":"","ucode":"7707030E0F3BB0","user_header":"https://static001.geekbang.org/account/avatar/00/1a/df/66/2708acf7.jpg","comment_is_top":false,"comment_ctime":1654243603,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1654243603","product_id":100033601,"comment_content":"Chrome 有个机制，同一个域名同时最多只能建立 6 个 TCP 连接，如果在同一个域名下同时有 10 个请求发生，那么其中 4 个请求会进入排队等待状态，直至进行中的请求完成。<br>---如果同时打开两个或多个页面窗口均为同一个域名下的页面，是每个页面窗口可建立6个TCP连接，还是总共可建立6个TCP连接。  这个问题老师给回复一下吧","like_count":0},{"had_liked":false,"id":344134,"user_name":"Geek_8e4881","can_delete":false,"product_type":"c1","uid":2882691,"ip_address":"","ucode":"E0709AFB1F5415","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/THHRPmnr42ZaHWnEEvu9Gubs9cmlY1LQia2gQfP8LeZpR2j9EkFoJPD0dxwlBhrBiayxy9fiaK9joWwjknfJK5eQw/132","comment_is_top":false,"comment_ctime":1651290893,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651290893","product_id":100033601,"comment_content":"老师 登陆状态的保持 浏览器拿到set-cookie的值会保存到本地的什么地方","like_count":0},{"had_liked":false,"id":335283,"user_name":"郝永淞","can_delete":false,"product_type":"c1","uid":1353768,"ip_address":"","ucode":"C465F74FA5FB47","user_header":"https://static001.geekbang.org/account/avatar/00/14/a8/28/3961e7fe.jpg","comment_is_top":false,"comment_ctime":1645439708,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645439708","product_id":100033601,"comment_content":"是一个tab（一个Render进程）下同一个域名维护6个TCP，还是整个浏览器同一域名维护6个TCP。<br>在SOA架构里 network有独立的进程 是不是就是按照整个浏览器来计算","like_count":0},{"had_liked":false,"id":333163,"user_name":"Geek_619e80","can_delete":false,"product_type":"c1","uid":1478795,"ip_address":"","ucode":"450C641C726D62","user_header":"https://static001.geekbang.org/account/avatar/00/16/90/8b/057c7129.jpg","comment_is_top":false,"comment_ctime":1644147890,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1644147890","product_id":100033601,"comment_content":"Http1同一个域名最多6个tcp连接，那么同一个请求同时发送10是不是有4个需要等待？如果设置了keep alive是不是10请求可以共用同一个连接实现10相同请求并发？","like_count":0},{"had_liked":false,"id":333162,"user_name":"Geek_619e80","can_delete":false,"product_type":"c1","uid":1478795,"ip_address":"","ucode":"450C641C726D62","user_header":"https://static001.geekbang.org/account/avatar/00/16/90/8b/057c7129.jpg","comment_is_top":false,"comment_ctime":1644147251,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1644147251","product_id":100033601,"comment_content":"为什么要先构建请求再查缓存呢？不应该先查缓存吗？","like_count":0},{"had_liked":false,"id":331678,"user_name":"WoLo明","can_delete":false,"product_type":"c1","uid":1378845,"ip_address":"","ucode":"4102A9109376EB","user_header":"https://static001.geekbang.org/account/avatar/00/15/0a/1d/61f69448.jpg","comment_is_top":false,"comment_ctime":1642712779,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642712779","product_id":100033601,"comment_content":"同一个站点只允许最多有6个TCP连接，keep-alive又会保持TCP连接不被关闭，那么资源请求如果超过6个，其它的资源请求怎么保证不会一直处于等待队列？","like_count":0},{"had_liked":false,"id":330263,"user_name":"奇le怪","can_delete":false,"product_type":"c1","uid":2882472,"ip_address":"","ucode":"798275474E4C2F","user_header":"https://static001.geekbang.org/account/avatar/00/2b/fb/a8/28484413.jpg","comment_is_top":false,"comment_ctime":1641887269,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641887269","product_id":100033601,"comment_content":"遇到后端返回的cookie字段，是我们前端手工添加到浏览器缓存，注入sessionStorage里？发送ajax请求的时候把字段放到请求头里，还是说浏览器自动就帮我处理了呢？","like_count":0},{"had_liked":false,"id":309922,"user_name":"Even.Yu","can_delete":false,"product_type":"c1","uid":1568263,"ip_address":"","ucode":"D55F190AC6E4FB","user_header":"https://static001.geekbang.org/account/avatar/00/17/ee/07/465058c7.jpg","comment_is_top":false,"comment_ctime":1630395896,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630395896","product_id":100033601,"comment_content":"想问下 关于整个网站分析流程有最佳实践吗？ 比如一个网站各项指标达到什么层次的话算是优秀呢？ 就拿启动时间为例。","like_count":0},{"had_liked":false,"id":309921,"user_name":"Even.Yu","can_delete":false,"product_type":"c1","uid":1568263,"ip_address":"","ucode":"D55F190AC6E4FB","user_header":"https://static001.geekbang.org/account/avatar/00/17/ee/07/465058c7.jpg","comment_is_top":false,"comment_ctime":1630395691,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630395691","product_id":100033601,"comment_content":"关于一个缓存问题: 我想提一个问, 按我对老师内容的理解， 如果设置cache-control : max .xxx 的时候 整个响应的流程完全是在客户端发生的， 这个应该是体验最好的一种表达，但面临的问题就是如果有紧急迭代需求上线的话，大部分用户可能很难第一时间体验到最新的能力，所以后面就有了协商缓存， 我理解协商缓存是避免不了 服务端 和 客户端之间的往返的（因为要看资源是否被更新）那我在想有没有两者相结合的方式 既不耽误强缓存 又能在某些紧急场景下根据资源的判定来走协商缓存。","like_count":0},{"had_liked":false,"id":306861,"user_name":"邬昌明","can_delete":false,"product_type":"c1","uid":2393393,"ip_address":"","ucode":"30838A94D4D244","user_header":"","comment_is_top":false,"comment_ctime":1628752113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1628752113","product_id":100033601,"comment_content":"http&#47;1.1 一个域名只维护一个TCP连接，一个TCP同时只能处理一个请求，那么http是怎么进行异步请求的呢？","like_count":0},{"had_liked":false,"id":305271,"user_name":"追梦的孩子","can_delete":false,"product_type":"c1","uid":1271819,"ip_address":"","ucode":"8C10323DADD845","user_header":"https://static001.geekbang.org/account/avatar/00/13/68/0b/d151e741.jpg","comment_is_top":false,"comment_ctime":1627898165,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627898165","product_id":100033601,"comment_content":"思考：如果确保计算机的网络是正常工作的话可以排除是由于域名解析查询时间过长的原因，其次就是该域名所建立的TCP连接数超过了6浏览器需要等待其他连接使用完释放连接后与服务器建立连接，还有便是浏览器发送给服务端的数据包过大或者后台服务器返回的数据包大导致了时间变长","like_count":0},{"had_liked":false,"id":292286,"user_name":"kidslimy","can_delete":false,"product_type":"c1","uid":2617199,"ip_address":"","ucode":"FFED64E6E46DAE","user_header":"","comment_is_top":false,"comment_ctime":1620756888,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1620756888","product_id":100033601,"comment_content":"有个问题，同一域名下只有6个TCP连接，是跨浏览器标签页管理的吗？如果网站已经存在6个TCP长连接（keep-alive）了，浏览器如何判断并断开其中的哪一个TCP用于加载其它资源呢？（猜测应该是有断开的吧，否则一直占用其它资源就无法加载了）","like_count":0},{"had_liked":false,"id":289930,"user_name":"cty","can_delete":false,"product_type":"c1","uid":1392853,"ip_address":"","ucode":"47A492728F56A8","user_header":"https://static001.geekbang.org/account/avatar/00/15/40/d5/5f91aee3.jpg","comment_is_top":false,"comment_ctime":1619267301,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1619267301","product_id":100033601,"comment_content":"想问一下老师，为什么会有建立多个tcp链接的可能性呢？明明可以一个tcp连接，多次传输信息，然后一次性关闭。跟浏览器的多个标签有关系吗？比如同一个域名打开多个标签，每个标签都有一个tcp连接？但是明明有缓存啊，有缓存就直接取缓存了吧？还有disk缓存和memory缓存与进程的关系是怎样的呢？访问多一个网站，打开多个标签，仅仅打开了一个进程，开辟了一片独立的内存空间，和tcp对于同一个网站建立最多6个连接有关联吗？感觉老师在这里没有讲透，还是说后面的章节会有讲呢？","like_count":0},{"had_liked":false,"id":288982,"user_name":"贝贝","can_delete":false,"product_type":"c1","uid":1163119,"ip_address":"","ucode":"964FD46CEC87CE","user_header":"https://static001.geekbang.org/account/avatar/00/11/bf/6f/1916fba0.jpg","comment_is_top":false,"comment_ctime":1618808590,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618808590","product_id":100033601,"comment_content":"http&#47;1.0 同一个域名下最多6个 tcp 连接的问题，“同一个域名”如何理解呢？ 比如 a 域名页面里有 b、c、d 域名下的图片，那么同域名指的是 a 域名还是图片地址的b、c、d 域名呢？","like_count":0},{"had_liked":false,"id":288965,"user_name":"v8","can_delete":false,"product_type":"c1","uid":1863552,"ip_address":"","ucode":"22FE67E8C124DA","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/zFOVquVttt7aTLtyHhPvH1SCUk19Rd14XoGz9QrCpFefwun86CdBJB4rbsY1M5zywXHibvRs4EqJLoUjpNyknFQ/132","comment_is_top":false,"comment_ctime":1618800765,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618800765","product_id":100033601,"comment_content":"老师好，服务器的响应阶段的响应行、响应头和响应体是分为三次分别发送到客户端吗？","like_count":0},{"had_liked":false,"id":288841,"user_name":"🇦 🇳 .","can_delete":false,"product_type":"c1","uid":2556488,"ip_address":"","ucode":"4D7F6631A7EE18","user_header":"https://static001.geekbang.org/account/avatar/00/27/02/48/48bc7bef.jpg","comment_is_top":false,"comment_ctime":1618726003,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1618726003","product_id":100033601,"comment_content":"老师您好，我一直有个问题。就是一个列表页面我打开第一次是通过请求接口后端返回的数据，当我再次打开怎么做到不再次请求接口，直接就渲染出来呢？就像Vue有个 keep-Alive 可以实现。  可以详细说下吗？ 谢谢。","like_count":0,"discussions":[{"author":{"id":2989668,"avatar":"","nickname":"Geek_4c5172","note":"","ucode":"D28A068DF8F926","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569045,"discussion_content":"vue的keep-alive与http的keep-alive不是同一个技术。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651299271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":284693,"user_name":"shark","can_delete":false,"product_type":"c1","uid":1203926,"ip_address":"","ucode":"312FB80175C8FF","user_header":"https://static001.geekbang.org/account/avatar/00/12/5e/d6/87189c9d.jpg","comment_is_top":false,"comment_ctime":1616418373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616418373","product_id":100033601,"comment_content":"1、DNS解析问题，DNS被劫持或者本地配置错误的DNS服务器ip或者DNS服务不稳定，都可能导致请求会卡在DNS解析的阶段。QQ能上，网页一直在转圈就是典型的DNS问题<br>2、请求服务端的时候，有两种情况：服务端同时间有大量的请求，请求会进入排队的状态，等待服务端响应时间过长。另外就是网络不稳定，大量的丢包重发<br>3、服务端处理请求的时候，比如接口做了大数据量的查询，服务端处理的时间过长，请求一直处于等待中<br>4、服务端回传的数据量比较大，包太多，本地接收的时间过长","like_count":0},{"had_liked":false,"id":283186,"user_name":"Geek_2014ce","can_delete":false,"product_type":"c1","uid":2136469,"ip_address":"","ucode":"167B4CCDA4D5BD","user_header":"https://static001.geekbang.org/account/avatar/00/20/99/95/1e332315.jpg","comment_is_top":false,"comment_ctime":1615611194,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615611194","product_id":100033601,"comment_content":"老师，请教2个问题。<br> 1. Connection: keep-alive<br>是会保持多久的连接呢？多久没有发送新的请求会断开呢？<br><br>2.  文中提到先发送数据行，再发送数据头，这点不太明白。 <br>      我理解的是HTTP层会将数据行，数据头（甚至数据体），包装成一个数据块。然后交给TCP传输层，所以在真正发送请求的时候，数据行，数据头的发送没有先后之分。","like_count":0},{"had_liked":false,"id":277700,"user_name":"GKNick","can_delete":false,"product_type":"c1","uid":1347231,"ip_address":"","ucode":"AE6D7674CE9D4B","user_header":"https://static001.geekbang.org/account/avatar/00/14/8e/9f/26b7e89b.jpg","comment_is_top":false,"comment_ctime":1612518883,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1612518883","product_id":100033601,"comment_content":"Chrome浏览器不同域名并发请求个数有限制吗？如果有，是多少呢？","like_count":0},{"had_liked":false,"id":273023,"user_name":"NikkiZeng","can_delete":false,"product_type":"c1","uid":1765894,"ip_address":"","ucode":"F669C811773394","user_header":"https://static001.geekbang.org/account/avatar/00/1a/f2/06/ebb5b764.jpg","comment_is_top":false,"comment_ctime":1610415300,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610415300","product_id":100033601,"comment_content":"老师,不知道你那边还会不会再回答,有问题困惑很大,就是有的网站域名前为什么加www,有的不加www,我看二级域名是不需要的,但是顶级域名很多有www,很多又没有,加不加有区别嘛?","like_count":0},{"had_liked":false,"id":272763,"user_name":"张宗伟","can_delete":false,"product_type":"c1","uid":1374181,"ip_address":"","ucode":"1447A20C7A8982","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/e5/ec543f3b.jpg","comment_is_top":false,"comment_ctime":1610268229,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1610268229","product_id":100033601,"comment_content":"1. 如果是首次请求，我会认为可能是网络速度慢的问题，可以使用CDN加速。<br>2. 如果是非首次请求，第一考虑的点就是是否启用了缓存，再者就是网络问题。","like_count":0},{"had_liked":false,"id":270626,"user_name":"jarryLee","can_delete":false,"product_type":"c1","uid":1631921,"ip_address":"","ucode":"1392ED306DA5F2","user_header":"","comment_is_top":false,"comment_ctime":1609198010,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1609198010","product_id":100033601,"comment_content":"等待TCP排队有点想不通，一个url解析只是一次http请求，也只需要建立一次tcp连接，为啥要tcp排队，难道是一个页面同时打开多个同一站点页面的情况么？","like_count":0,"discussions":[{"author":{"id":1163119,"avatar":"https://static001.geekbang.org/account/avatar/00/11/bf/6f/1916fba0.jpg","nickname":"贝贝","note":"","ucode":"964FD46CEC87CE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368051,"discussion_content":"这个我理解应该是页面中需要请求图片，发起多次 ajax 请求","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618552183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":266457,"user_name":"Geek_3d3075","can_delete":false,"product_type":"c1","uid":2336374,"ip_address":"","ucode":"8CE312557C7FF9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKYTp26rEkchInMnV3iadE6ofxSXnCnzUPdGPOyRIHziaIdlDWgIqf02V7JjIGPvygKWEUIfoqKtvfg/132","comment_is_top":false,"comment_ctime":1607344740,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607344740","product_id":100033601,"comment_content":"301重定设置是在什么位置设置的。比如我们的位置是www.badu.com,我们可以正确的拿到对应的信息，但是如果我们请求baidu.com,如何可以命中我对于（baidu.com -&gt; www.baidu.com）这个规则。<br>1、肯定不是前端，因为这个时候都没有请求到对应的位置<br>2、也不是后端服务器。<br>3、猜测是DNS域名解析这个过程。<br>希望老师可以解决疑惑。","like_count":0},{"had_liked":false,"id":264006,"user_name":"陈海霞","can_delete":false,"product_type":"c1","uid":1784091,"ip_address":"","ucode":"9C8D6ADB001FDC","user_header":"https://static001.geekbang.org/account/avatar/00/1b/39/1b/4a71693e.jpg","comment_is_top":false,"comment_ctime":1606311155,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1606311155","product_id":100033601,"comment_content":"老师，为啥chrome浏览器的最大并发请求数是6呀？","like_count":0,"discussions":[{"author":{"id":2292437,"avatar":"","nickname":"sdai","note":"","ucode":"C4A3D6879C8F98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384792,"discussion_content":"厂商的个人经验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626752314,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":256525,"user_name":"Dropping","can_delete":false,"product_type":"c1","uid":1388351,"ip_address":"","ucode":"5715847281A4B1","user_header":"https://static001.geekbang.org/account/avatar/00/15/2f/3f/936d54f7.jpg","comment_is_top":false,"comment_ctime":1603667668,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1603667668","product_id":100033601,"comment_content":"好奇浏览器缓存怎么判断新鲜度？","like_count":0},{"had_liked":false,"id":253911,"user_name":"Joseph Ho","can_delete":false,"product_type":"c1","uid":1344573,"ip_address":"","ucode":"8296CA80CB37DE","user_header":"https://static001.geekbang.org/account/avatar/00/14/84/3d/ace4ee64.jpg","comment_is_top":false,"comment_ctime":1602945415,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1602945415","product_id":100033601,"comment_content":"如果是响应太慢我会首先想到后端的SQL语句阻塞查询操作太慢了，如果是静态页面加载慢我会认为是网络延时严重","like_count":0},{"had_liked":false,"id":238272,"user_name":"大桥2号","can_delete":false,"product_type":"c1","uid":2095749,"ip_address":"","ucode":"2BB88B211C5C8A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/fa/85/1920fa21.jpg","comment_is_top":false,"comment_ctime":1596108008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1596108008","product_id":100033601,"comment_content":"我觉得可以补充一下缓存知识点，毕竟可以靠这个优化性能","like_count":0},{"had_liked":false,"id":238263,"user_name":"大桥2号","can_delete":false,"product_type":"c1","uid":2095749,"ip_address":"","ucode":"2BB88B211C5C8A","user_header":"https://static001.geekbang.org/account/avatar/00/1f/fa/85/1920fa21.jpg","comment_is_top":false,"comment_ctime":1596105621,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1596105621","product_id":100033601,"comment_content":"查找dns服务器是在哪个阶段","like_count":0,"discussions":[{"author":{"id":2217956,"avatar":"https://static001.geekbang.org/account/avatar/00/21/d7/e4/8154a102.jpg","nickname":"CV练习生","note":"","ucode":"E874C7992ECA72","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":318814,"discussion_content":"TCP建立连接之前","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603856176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":234141,"user_name":"Geek_157267","can_delete":false,"product_type":"c1","uid":2051676,"ip_address":"","ucode":"4342B8E9C187F2","user_header":"","comment_is_top":false,"comment_ctime":1594603800,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1594603800","product_id":100033601,"comment_content":"http链接超过6个，不会建立tcp链接，那什么时候建立呢？","like_count":0},{"had_liked":false,"id":220295,"user_name":"Geek_5dcc13","can_delete":false,"product_type":"c1","uid":2009388,"ip_address":"","ucode":"0D6F1907C5F451","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/60hX2atIe18teCsotXzyftfdK2rujYNbSD7u0ialIXDSwYk0B4UpmHX1LWHp98G8DBvod1BUxjrhT4qChwibgBaQ/132","comment_is_top":false,"comment_ctime":1590221213,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590221213","product_id":100033601,"comment_content":"有两个问题想问一下<br>1. DNS解析的时候走的DNS缓存是不是就是本地的hosts文件<br>2.GET请求有没有请求体呢","like_count":0},{"had_liked":false,"id":219478,"user_name":"江谢木","can_delete":false,"product_type":"c1","uid":1563403,"ip_address":"","ucode":"E1B1B0F0F03D41","user_header":"https://static001.geekbang.org/account/avatar/00/17/db/0b/f0ded153.jpg","comment_is_top":false,"comment_ctime":1590030009,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590030009","product_id":100033601,"comment_content":"老师，想问下，如果是GET请求，查询的信息也会放在请求体中？","like_count":0},{"had_liked":false,"id":218781,"user_name":"Guoss","can_delete":false,"product_type":"c1","uid":1038855,"ip_address":"","ucode":"B289416BD2971F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/da/07/70857fa5.jpg","comment_is_top":false,"comment_ctime":1589874807,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589874807","product_id":100033601,"comment_content":"老师您好，两个问题请教<br>1、例子中的set-cookie：UID中的‘UID’是可以自定义的吧，我看极客用的是SERVERID，我们用的是SESSIONID这样的key<br><br>2、在登录状态下，F12开发者工具的Application下面的cookie tab栏里面没有存储看起来像验证登录状态的信息是为什么呢","like_count":0},{"had_liked":false,"id":218686,"user_name":"草剑","can_delete":false,"product_type":"c1","uid":1026310,"ip_address":"","ucode":"C6DA55E7E1B701","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a9/06/9811fb65.jpg","comment_is_top":false,"comment_ctime":1589854740,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1589854740","product_id":100033601,"comment_content":"老师，请问浏览器端第2步的查找缓存和 http 请求的缓存有啥差异？好像接触到的都是 http 中的缓存。","like_count":0},{"had_liked":false,"id":217295,"user_name":"EmilyLucky","can_delete":false,"product_type":"c1","uid":1972343,"ip_address":"","ucode":"DBA5FE296CF473","user_header":"https://static001.geekbang.org/account/avatar/00/1e/18/77/d665f258.jpg","comment_is_top":false,"comment_ctime":1589456954,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589456954","product_id":100033601,"comment_content":"老师您好，在文中重定向部分，您说“比如当你在浏览器中打开 geekbang.org 后，你会发现最终打开的页面地址是 https:&#47;&#47;www.geekbang.org。这两个 URL 之所以不一样，是因为涉及到了一个重定向操作。”我使用谷歌浏览器打开geekbang.org 并没有发生重定向操作，而是可以直接打开；而是用火狐浏览器打开geekbang.org ，倒是会重定向到 https:&#47;&#47;www.geekbang.org。这是浏览器的问题吗？不过重定向操作不应该是服务器处理的么？","like_count":0},{"had_liked":false,"id":212208,"user_name":"思不歌","can_delete":false,"product_type":"c1","uid":1919738,"ip_address":"","ucode":"FD8F500D5FC8DC","user_header":"https://static001.geekbang.org/account/avatar/00/1d/4a/fa/7937b03c.jpg","comment_is_top":false,"comment_ctime":1588074816,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588074816","product_id":100033601,"comment_content":"请问下老师，为什么限制6个tcp链接，为了安全吗","like_count":0},{"had_liked":false,"id":204514,"user_name":"穿秋裤的男孩","can_delete":false,"product_type":"c1","uid":1748640,"ip_address":"","ucode":"D0F48C66377893","user_header":"https://static001.geekbang.org/account/avatar/00/1a/ae/a0/707350ef.jpg","comment_is_top":false,"comment_ctime":1586413628,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586413628","product_id":100033601,"comment_content":"这一篇讲的感觉有点浅，像缓存和cookie最好能讲下谷歌浏览器是缓存在哪个文件，具体怎么看之类的","like_count":0},{"had_liked":false,"id":204446,"user_name":"HoSalt","can_delete":false,"product_type":"c1","uid":1156074,"ip_address":"","ucode":"610B03E2A002D1","user_header":"https://static001.geekbang.org/account/avatar/00/11/a3/ea/53333dd5.jpg","comment_is_top":false,"comment_ctime":1586401328,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586401328","product_id":100033601,"comment_content":"「同一个域名同时最多只能建立 6 个 TCP 连接」当前网页（应用）最多同时发6个请求？","like_count":0},{"had_liked":false,"id":202639,"user_name":"四五六七八","can_delete":false,"product_type":"c1","uid":1624856,"ip_address":"","ucode":"72E495897F73E2","user_header":"https://static001.geekbang.org/account/avatar/00/18/cb/18/aa72cc77.jpg","comment_is_top":false,"comment_ctime":1586022235,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1586022235","product_id":100033601,"comment_content":"老师好，项目中遇到一个问题，dns  tcp连接特别耗时，替换成别的域名（域名在其他项目上正常）仍然没有好转，这种可能是什么原因，或者有什么优化思路吗","like_count":0},{"had_liked":false,"id":202251,"user_name":"SCRD","can_delete":false,"product_type":"c1","uid":1034783,"ip_address":"","ucode":"C2A193A2869AAD","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ca/1f/a9a7f9d9.jpg","comment_is_top":false,"comment_ctime":1585934195,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585934195","product_id":100033601,"comment_content":"所以这些缓存头都是服务器手动设置的嘛","like_count":0},{"had_liked":false,"id":196732,"user_name":"Steven","can_delete":false,"product_type":"c1","uid":1457607,"ip_address":"","ucode":"BE298AE7BB972B","user_header":"https://static001.geekbang.org/account/avatar/00/16/3d/c7/0ef34633.jpg","comment_is_top":false,"comment_ctime":1585308079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585308079","product_id":100033601,"comment_content":"请问现在cookie应该用的少了吧 和sessions的区别是什么","like_count":0},{"had_liked":false,"id":189378,"user_name":"前端西瓜哥","can_delete":false,"product_type":"c1","uid":1248576,"ip_address":"","ucode":"150130C34CD1C1","user_header":"https://static001.geekbang.org/account/avatar/00/13/0d/40/f70e5653.jpg","comment_is_top":false,"comment_ctime":1584507473,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584507473","product_id":100033601,"comment_content":"页面加载过长可能的一些原因有：<br><br>1. 【等待TCP队列】页面需要加载资源数太多且比较大。因为浏览器的 TCP 连接数有限制，所以有些请求被阻塞了。解决方案有合并资源（比如将多个小的js文件合并为一个大的js文件，雪碧图等）、使用 HTTP2 甚至 HTTP3（解决连接数限制问题）<br>2. 【服务器处理请求】服务器负载过高，不能及时响应请求。<br>3. 【传输数据阶段】请求的地理位置过远甚至跨网络服务商。解决方案有使用 CDN。<br><br>一般我是看控制台的 network 面板查看请求消耗的时间来判断原因的。","like_count":0},{"had_liked":false,"id":188867,"user_name":"Woosang","can_delete":false,"product_type":"c1","uid":1220919,"ip_address":"","ucode":"BB63C9F1BBDF61","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/CJYUnMtcdu7GdMGxzVicTYpfsbhTKzrCIpoLIJxn8ByWsq1ol35RZLe1u4eWJpFhGK7ISpee2slWYokn0vBicw7A/132","comment_is_top":false,"comment_ctime":1584428393,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584428393","product_id":100033601,"comment_content":"通过浏览器自带的开发者工具查看慢请求的具体情况","like_count":0},{"had_liked":false,"id":188699,"user_name":"Nowki","can_delete":false,"product_type":"c1","uid":1379638,"ip_address":"","ucode":"8BAB9136C8F333","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DHDKIclaxBO9KpDvg6qOkZfr9o0e42YP9mQT1tAKYEnDqMo1SddJkIvB3EK2ILtq28K3Xe7jYGhXqmrTey4A4w/132","comment_is_top":false,"comment_ctime":1584406032,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584406032","product_id":100033601,"comment_content":"通过network面板查看相关信息","like_count":0},{"had_liked":false,"id":188474,"user_name":"蛋黄酱","can_delete":false,"product_type":"c1","uid":1050196,"ip_address":"","ucode":"2351562F282B68","user_header":"https://static001.geekbang.org/account/avatar/00/10/06/54/16bb64d0.jpg","comment_is_top":false,"comment_ctime":1584358359,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1584358359","product_id":100033601,"comment_content":"咦？同一个域名只能同时6个tcp连接不是http1的限制而是chrome的么？那http2怎么办","like_count":0},{"had_liked":false,"id":184323,"user_name":"blueBean","can_delete":false,"product_type":"c1","uid":1816697,"ip_address":"","ucode":"6A68D2414BD904","user_header":"https://static001.geekbang.org/account/avatar/00/1b/b8/79/a4dbe9ee.jpg","comment_is_top":false,"comment_ctime":1583290070,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583290070","product_id":100033601,"comment_content":"老师我有个点不太明白，请您解答一下。就是上一篇文章中说IP协议负责找到对应的主机，要找到特定应用需要加端口号，然后这篇讲到http协议使用80端口。不太明白到底有几个端口号，另外浏览器怎么分辨该把资源给哪个页面呢","like_count":0},{"had_liked":false,"id":183480,"user_name":"小范er","can_delete":false,"product_type":"c1","uid":1748803,"ip_address":"","ucode":"8B2D8213D1CD9A","user_header":"https://static001.geekbang.org/account/avatar/00/1a/af/43/8fbca339.jpg","comment_is_top":false,"comment_ctime":1583049206,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583049206","product_id":100033601,"comment_content":"老师您好，请教您一个问题，URI和URLD的区别","like_count":0},{"had_liked":false,"id":182433,"user_name":"风里有诗句","can_delete":false,"product_type":"c1","uid":1812388,"ip_address":"","ucode":"9D8D8731EB553E","user_header":"https://static001.geekbang.org/account/avatar/00/1b/a7/a4/da2e300b.jpg","comment_is_top":false,"comment_ctime":1582787598,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582787598","product_id":100033601,"comment_content":"客户端保存登录态做到服务端无状态，这个都有哪些方案，知道jwt，服务端md5，还有哪些方式么？","like_count":0},{"had_liked":false,"id":181022,"user_name":"追风筝的人","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1582461096,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1582461096","product_id":100033601,"comment_content":"老师 会不会以下原因<br>1tcp连接建立过程中 队头阻塞导致 一直加载 <br>2 是网速原因<br>3是dns解析耗时久<br>4 没有使用缓存 直接从服务器获取的资源","like_count":0},{"had_liked":false,"id":173911,"user_name":"大蓝","can_delete":false,"product_type":"c1","uid":1355288,"ip_address":"","ucode":"855648168C77ED","user_header":"https://static001.geekbang.org/account/avatar/00/14/ae/18/ee4ded86.jpg","comment_is_top":false,"comment_ctime":1579777929,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1579777929","product_id":100033601,"comment_content":"通常情况下，如果 URL 没有特别指明端口号，那么 HTTP 协议默认是 80 端口。<br><br>不是默认的80端口，是服务器内部自动分流吗？","like_count":0},{"had_liked":false,"id":170605,"user_name":"Superman","can_delete":false,"product_type":"c1","uid":1724981,"ip_address":"","ucode":"DA8682F7FEEF4B","user_header":"https://static001.geekbang.org/account/avatar/00/1a/52/35/2207bf62.jpg","comment_is_top":false,"comment_ctime":1578643458,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578643458","product_id":100033601,"comment_content":"浏览器一个站点只维护6个TCP连接，如果6个连接keep-alive，那下一个连接怎么办呢","like_count":0},{"had_liked":false,"id":169788,"user_name":"Jerry银银","can_delete":false,"product_type":"c1","uid":1008404,"ip_address":"","ucode":"80DA1172A2360A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg","comment_is_top":false,"comment_ctime":1578446908,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1578446908","product_id":100033601,"comment_content":"有一些疑惑：<br><br>学习前面的章节，我知道Chrome是多进程的架构。每一个Tab是一个独立的进程。这理解应该没错吧？<br><br>不同的Tab下面打开了同一个URL，每一个URL都要重新建立tcp链接吗？有tcp链接复用机制的吧？<br><br>如果有的话，在多进程架构下，如何复用呢？","like_count":0},{"had_liked":false,"id":157267,"user_name":"-_-|||","can_delete":false,"product_type":"c1","uid":1328142,"ip_address":"","ucode":"94B21594658BF9","user_header":"https://static001.geekbang.org/account/avatar/00/14/44/0e/ce14b7d3.jpg","comment_is_top":false,"comment_ctime":1575100853,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1575100853","product_id":100033601,"comment_content":"Chrome 有个机制，同一个域名同时最多只能建立 6 个 TCP 连接，这个连接的个数好想可以设置","like_count":0},{"had_liked":false,"id":156654,"user_name":"🐒🐱🐭🐮🐯🐰🐶","can_delete":false,"product_type":"c1","uid":1189080,"ip_address":"","ucode":"52426AE36A9A39","user_header":"https://static001.geekbang.org/account/avatar/00/12/24/d8/aa41d743.jpg","comment_is_top":false,"comment_ctime":1574930871,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574930871","product_id":100033601,"comment_content":"再回课后题：在9个步骤中：等到队里，发送http(网速)，服务器处理请求（服务器处理速度），服务器相应请求（网速）","like_count":0},{"had_liked":false,"id":154286,"user_name":"filter","can_delete":false,"product_type":"c1","uid":1064585,"ip_address":"","ucode":"4559F7E9638E06","user_header":"https://static001.geekbang.org/account/avatar/00/10/3e/89/ce5c0938.jpg","comment_is_top":false,"comment_ctime":1574404103,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574404103","product_id":100033601,"comment_content":"为什么第二次打开会比第一次打开快：<br>1. DNS解析时间的节约<br>2. 缓存文件的存在<br><br>分析页面卡在哪里了：<br>查看network中Timing各个阶段的时间进行分析<br><br><br>","like_count":0},{"had_liked":false,"id":153917,"user_name":"vianem","can_delete":false,"product_type":"c1","uid":1748290,"ip_address":"","ucode":"59A2D19426ABC4","user_header":"","comment_is_top":false,"comment_ctime":1574329902,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1574329902","product_id":100033601,"comment_content":"请问多个同域名的标签页，他们共享6个最大tcp连接数吗？还是说一个标签页单独享有6个tcp连接数？","like_count":0,"discussions":[{"author":{"id":1019641,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/f9/8221aac3.jpg","nickname":"王妍","note":"","ucode":"D4CCE6C7F7F1C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257111,"discussion_content":"共享吧","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588520941,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":148472,"user_name":"六个周","can_delete":false,"product_type":"c1","uid":1067697,"ip_address":"","ucode":"7FFED12CC3346F","user_header":"https://static001.geekbang.org/account/avatar/00/10/4a/b1/e2b9e94f.jpg","comment_is_top":false,"comment_ctime":1573014401,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1573014401","product_id":100033601,"comment_content":"大家谁可以提供一个网站，有缓存到本地资源可以查看有Cache-Control的，么有找到这样一个网站。","like_count":0,"discussions":[{"author":{"id":1019641,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/8e/f9/8221aac3.jpg","nickname":"王妍","note":"","ucode":"D4CCE6C7F7F1C5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":257109,"discussion_content":"可以自己写一个服务端🙂","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588520898,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":144507,"user_name":"kvsjsm","can_delete":false,"product_type":"c1","uid":1711954,"ip_address":"","ucode":"A77CB68DF0DA5E","user_header":"https://static001.geekbang.org/account/avatar/00/1a/1f/52/9e12d6b3.jpg","comment_is_top":false,"comment_ctime":1571962059,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571962059","product_id":100033601,"comment_content":"如果所有页面打开时间过久：查看网络连接、查看ip地址设置、查看DNS解析；如果单个页面打开时间过久：命令行ping域名，用文中的crul命令查看请求消息，查看返回消息状态码","like_count":0},{"had_liked":false,"id":140755,"user_name":"lemon","can_delete":false,"product_type":"c1","uid":1699308,"ip_address":"","ucode":"6F09E7C7B99959","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/k9PnHg1D98v2nibjBf5Es4EbuR1KpPCWWISN6cbyTSKaKRvPLb79yiaia0xjKUCiadia62nFic5aibiccXYspia3JAwfJhw/132","comment_is_top":false,"comment_ctime":1571043393,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571043393","product_id":100033601,"comment_content":"老师，我自己因为业务需求把数据存在cookie中，那么我发送请求的时候，请求会携带我自己存的cookie信息吗","like_count":0},{"had_liked":false,"id":140525,"user_name":"pacos","can_delete":false,"product_type":"c1","uid":1143994,"ip_address":"","ucode":"3E56D867CAEEE6","user_header":"https://static001.geekbang.org/account/avatar/00/11/74/ba/0599cc8a.jpg","comment_is_top":false,"comment_ctime":1570975916,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1570975916","product_id":100033601,"comment_content":"如果使用了 Keep-Alive 字段，还会有 Chrome 同个域名  6 个 TCP 的问题吗？<br>因为 TCP 一直不会断开，是不是只有一个 TCP 链接就足够了？","like_count":0,"discussions":[{"author":{"id":1272789,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6b/d5/0e4b70a2.jpg","nickname":"Sean","note":"","ucode":"BC0715BF423613","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":32523,"discussion_content":"并发请求类似于第一节的并行处理，可以提高页面的响应速度。\n目前一个页面包括js、css、图片、http请求等，至少会有几十个网络请求，理论上多个TCP连接并行处理肯定是比只有一个TCP连接串行执行是要高效的。但是，每个tcp连接都需要分配一个端口及其他资源，也不能无限制的多，因此主流的浏览器都限制了【同一域名下的并发请求限制，6-8个】。这是这个限制的由来。\n\n至于keep-alive它主要是为了解决TCP的连接时延问题的（个人理解），因为在http1.0时代，每个TCP对应一个HTTP请求，请求完成之后TCP就会断开，下次再有新的http请求之后，就会重新经过三次握手建立TCP连接。使用keep-alive之后，请求完成之后，TCP连接不会断，下次再有http请求时，可以复用该TCP连接，直接跳过三次握手环节，直接发起http请求。减少了步骤之后就减少了请求的时延。提高了响应速度。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1571044656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":140141,"user_name":"zoey","can_delete":false,"product_type":"c1","uid":1625490,"ip_address":"","ucode":"3EFA7C80BF7724","user_header":"","comment_is_top":false,"comment_ctime":1570839678,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570839678","product_id":100033601,"comment_content":"老师，用户再次发送请求时，浏览器怎么区分要发送的是哪个用户的cookoe","like_count":0},{"had_liked":false,"id":137234,"user_name":"Hannah","can_delete":false,"product_type":"c1","uid":1633731,"ip_address":"","ucode":"BCD2D72E878B9A","user_header":"https://static001.geekbang.org/account/avatar/00/18/ed/c3/c1a638dd.jpg","comment_is_top":false,"comment_ctime":1569662142,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1569662142","product_id":100033601,"comment_content":"老师 这里讲的dns解析缓存是缓存到系统的host文件吗","like_count":0},{"had_liked":false,"id":134159,"user_name":"windki","can_delete":false,"product_type":"c1","uid":1308124,"ip_address":"","ucode":"04528BB393F2AE","user_header":"https://static001.geekbang.org/account/avatar/00/13/f5/dc/17f499f8.jpg","comment_is_top":false,"comment_ctime":1568768704,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568768704","product_id":100033601,"comment_content":"这里的“浏览器与服务器建立tcp连接”其实是浏览器委托操作系统的网络协议栈去与服务器建立连接","like_count":0},{"had_liked":false,"id":132766,"user_name":"felix","can_delete":false,"product_type":"c1","uid":1086157,"ip_address":"","ucode":"DF514D0BB9B508","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/cd/d39e568c.jpg","comment_is_top":false,"comment_ctime":1568215583,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568215583","product_id":100033601,"comment_content":"配置了https的网站https:&#47;&#47;a.com:51234，如果有人访问非http的url例如http:&#47;&#47;a.com:51234。同个端口，非http想重定向到https，nginx应该怎么设置？","like_count":0},{"had_liked":false,"id":132587,"user_name":"美美","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1568169320,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568169320","product_id":100033601,"comment_content":"文中说发送请求行命令后，还会以请求头形式发送其他信息，然后文中的第一张图黄色底部分也是分开发送请求头，请求行。不太明白为啥一个HTTP请求拆开发送呢","like_count":0},{"had_liked":false,"id":132585,"user_name":"美美","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1568168901,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1568168901","product_id":100033601,"comment_content":"老师，发送HTTP请求是先发送请求行，然后发送请求头，最后发送请求体，要分成三次请求么？","like_count":0,"discussions":[{"author":{"id":1663106,"avatar":"https://static001.geekbang.org/account/avatar/00/19/60/82/1d8c8c27.jpg","nickname":"钓人的鱼","note":"","ucode":"FB437B918E5868","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":18235,"discussion_content":"发送一次，老师评论中提到了，信息有点 诱导人认为是三次。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569034703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132157,"user_name":"飏","can_delete":false,"product_type":"c1","uid":1645648,"ip_address":"","ucode":"419D35CD60D280","user_header":"https://static001.geekbang.org/account/avatar/00/19/1c/50/217d8bb4.jpg","comment_is_top":false,"comment_ctime":1568034286,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1568034286","product_id":100033601,"comment_content":"首先，接口响应慢，看下接口响应码，这些基本断定非服务端、服务端的问题。对于非服务端再从网络层面分析，如Waterfall、ping api、包分析等。","like_count":0},{"had_liked":false,"id":131902,"user_name":"Ming","can_delete":false,"product_type":"c1","uid":1358174,"ip_address":"","ucode":"A94E8D8433E54F","user_header":"https://static001.geekbang.org/account/avatar/00/14/b9/5e/a8f6f7db.jpg","comment_is_top":false,"comment_ctime":1567956812,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1567956812","product_id":100033601,"comment_content":"建立 TCP 连接，可以并发（同一域名下最大值为6）；而 HTTP 请求是排队请求，是这样的吗？如果是，连接建立瞬间完成了，性能不是卡在排队处理请求了吗？","like_count":0},{"had_liked":false,"id":130440,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1567467718,"is_pvip":false,"replies":[{"id":"48696","content":"是的","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1567479079,"ip_address":"","comment_id":130440,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567467718","product_id":100033601,"comment_content":"那就是先构建请求行，再建立tcp连接，然后再发送请求行？","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465955,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567479079,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130396,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1567440710,"is_pvip":false,"replies":[{"id":"48657","content":"它们是一样的，就是请求行","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1567466378,"ip_address":"","comment_id":130396,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1567440710","product_id":100033601,"comment_content":"老师,第一步构建请求具体作用是什么？属于http吗？和第六步的发送http请求里的请求行好像","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":465938,"discussion_content":"它们是一样的，就是请求行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567466378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130387,"user_name":"Cris","can_delete":false,"product_type":"c1","uid":1473520,"ip_address":"","ucode":"F8A287134F1078","user_header":"https://static001.geekbang.org/account/avatar/00/16/7b/f0/269139d5.jpg","comment_is_top":false,"comment_ctime":1567439042,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567439042","product_id":100033601,"comment_content":"Connection:keep-alive有什么缺点？","like_count":0},{"had_liked":false,"id":129619,"user_name":"布布","can_delete":false,"product_type":"c1","uid":1644994,"ip_address":"","ucode":"58B30B53498B89","user_header":"","comment_is_top":false,"comment_ctime":1567174300,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1567174300","product_id":100033601,"comment_content":"http请求缓存设置cache-control这个值是由nginx或者Apache这种web网关设置还是由网站后台程序代码来控制呢？对与动态资源是否就无法使用这个属性呢？这个缓存是否常用于静态资源，如缓存到cdn服务器的图片，js等前端所需的静态资源，如果是由PHP或者java生成的页面是否就不能使用呢？还有文中提到If-None-Match:&quot;4f80f-13c-3a1xb12a&quot;","like_count":0,"discussions":[{"author":{"id":1644994,"avatar":"","nickname":"布布","note":"","ucode":"58B30B53498B89","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6921,"discussion_content":"这个值是由浏览器生成的还是服务端生成的呢？服务端是怎么判定这个值标识的资源未做更改呢？然后向浏览器返回304","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567174858,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129532,"user_name":"Geek_8476da","can_delete":false,"product_type":"c1","uid":1623282,"ip_address":"","ucode":"9AE358E5F160AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erMrXia5kb1AXUJoiccmIQxSQ7ib5SkibsQqd9FZInQcwYeNbZXp7CCtMibtg0RLHoza1NVo8A5M3uIluA/132","comment_is_top":false,"comment_ctime":1567150251,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1567150251","product_id":100033601,"comment_content":"为什么我在浏览器输入上面的命令  无法运行？","like_count":0,"discussions":[{"author":{"id":1645648,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/50/217d8bb4.jpg","nickname":"飏","note":"","ucode":"419D35CD60D280","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":8678,"discussion_content":"老哥，cURL是一个利用URL语法在命令行下工作的文件传输工具，1997年首次发行。它支持文件上传和下载，所以是综合传输工具，但按传统，习惯称cURL为下载工具。cURL还包含了用于程序开发的libcurl。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568035379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":129531,"user_name":"Geek_8476da","can_delete":false,"product_type":"c1","uid":1623282,"ip_address":"","ucode":"9AE358E5F160AE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erMrXia5kb1AXUJoiccmIQxSQ7ib5SkibsQqd9FZInQcwYeNbZXp7CCtMibtg0RLHoza1NVo8A5M3uIluA/132","comment_is_top":false,"comment_ctime":1567150166,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567150166","product_id":100033601,"comment_content":"浏览器缓存到cache里的数据会清理嘛，不清理的话会不会给浏览器带来压力，降低运行速度","like_count":0},{"had_liked":false,"id":129149,"user_name":"喵喵喵","can_delete":false,"product_type":"c1","uid":1644811,"ip_address":"","ucode":"16D61FB3591234","user_header":"https://static001.geekbang.org/account/avatar/00/19/19/0b/13329677.jpg","comment_is_top":false,"comment_ctime":1567050038,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567050038","product_id":100033601,"comment_content":"老师讲得很好。<br>如果等待时间过久，有一种可能在等待tcp队列排队","like_count":0},{"had_liked":false,"id":128144,"user_name":"arronK","can_delete":false,"product_type":"c1","uid":1192961,"ip_address":"","ucode":"58DC6FBF2CF0C1","user_header":"https://static001.geekbang.org/account/avatar/00/12/34/01/30ca98e6.jpg","comment_is_top":false,"comment_ctime":1566835221,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1566835221","product_id":100033601,"comment_content":"同域名6个连接，所以有的资源能和到一块儿的就扔一块儿，只要不是体积太大，就能优化加载速度。sprite图和bundle机制也利用了这一点","like_count":0},{"had_liked":false,"id":127977,"user_name":"尔冬橙","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1566816020,"is_pvip":false,"replies":[{"id":"47423","content":"是的，要往细的讲，至少要两篇才能讲清楚","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1566822011,"ip_address":"","comment_id":127977,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566816020","product_id":100033601,"comment_content":"http缓存我记得也有很多内容","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464730,"discussion_content":"是的，要往细的讲，至少要两篇才能讲清楚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566822011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":127373,"user_name":"sam","can_delete":false,"product_type":"c1","uid":1090046,"ip_address":"","ucode":"364DBCB33AB6B0","user_header":"https://static001.geekbang.org/account/avatar/00/10/a1/fe/8e29ffc0.jpg","comment_is_top":false,"comment_ctime":1566668400,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1566668400","product_id":100033601,"comment_content":"有个问题，在请求行、请求头&#47;响应行、响应头，是同步还是异步呢？","like_count":0},{"had_liked":false,"id":126796,"user_name":"433590","can_delete":false,"product_type":"c1","uid":1633264,"ip_address":"","ucode":"6E09D280422EF0","user_header":"https://static001.geekbang.org/account/avatar/00/18/eb/f0/c687d678.jpg","comment_is_top":false,"comment_ctime":1566478647,"is_pvip":false,"replies":[{"id":"46986","content":"嗯。这个我们后面来讲","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1566536570,"ip_address":"","comment_id":126796,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566478647","product_id":100033601,"comment_content":"chrome中的network面板怎么看呢？每个部分代表什么，怎么解读？看过好多资料，仍然不是很清楚","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":464172,"discussion_content":"嗯。这个我们后面来讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566536570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126218,"user_name":"无名","can_delete":false,"product_type":"c1","uid":1110113,"ip_address":"","ucode":"2D2E877CF97138","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/61/68462a07.jpg","comment_is_top":false,"comment_ctime":1566350911,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566350911","product_id":100033601,"comment_content":"老师，关于DNS缓存一直有一个疑问，就是缓存时间是多少？<br>如果我们域名重新映射到了新的IP上，那么在浏览器上原先缓存了，多久能链接到新到IP上？<br>我们平时开发Android和iOS APP，里面也会经常访问服务器，又是多久？<br>这个时间RFC文档中有明确规定吗？","like_count":0},{"had_liked":false,"id":126090,"user_name":"葛维维","can_delete":false,"product_type":"c1","uid":1160543,"ip_address":"","ucode":"A2CCAB6301168E","user_header":"https://static001.geekbang.org/account/avatar/00/11/b5/5f/a56fa0b2.jpg","comment_is_top":false,"comment_ctime":1566311278,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566311278","product_id":100033601,"comment_content":"tcp断开时机是否是所有排队请求都完成了，然后等下次有请求时再建立？","like_count":0},{"had_liked":false,"id":126052,"user_name":"奋斗达人","can_delete":false,"product_type":"c1","uid":1024497,"ip_address":"","ucode":"BE76F79260F75E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/f1/c260195b.jpg","comment_is_top":false,"comment_ctime":1566301478,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566301478","product_id":100033601,"comment_content":"问题：结合HTTP请求的各个阶段，如果一个页面的网络加载时间过久，你是如何分析卡在哪个阶段的？<br>回答：<br>1.先按F12，通过Chrome的调试工具看看整个页面的加载时长，分析是哪些请求被pending了<br>2.反复测试几次，判断是偶然的网络延迟，还是确实出现问题了<br>3.针对pending的请求使用wireshark抓包，看看对应的TCP头、HTTP头的相关信息<br>4.然后就不知道该如何分析了，这时候服务端也需要抓日志对比了吧","like_count":0},{"had_liked":false,"id":126012,"user_name":"无名","can_delete":false,"product_type":"c1","uid":1110113,"ip_address":"","ucode":"2D2E877CF97138","user_header":"https://static001.geekbang.org/account/avatar/00/10/f0/61/68462a07.jpg","comment_is_top":false,"comment_ctime":1566293053,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566293053","product_id":100033601,"comment_content":"同一个域名同时最多只能建立 6 个 TCP 连接。<br>不是同一个IP只能建立6个TCP连接吗？这样的话那直接使用IP地址访问的应该怎么算呢？","like_count":0},{"had_liked":false,"id":125989,"user_name":"🐻🔫🐸","can_delete":false,"product_type":"c1","uid":1308880,"ip_address":"","ucode":"40BABFD9D358BF","user_header":"https://static001.geekbang.org/account/avatar/00/13/f8/d0/ecc68a4f.jpg","comment_is_top":false,"comment_ctime":1566289936,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566289936","product_id":100033601,"comment_content":"浏览器对于根文档缓存的处理 会和普通的静态资源有什么区别吗","like_count":0},{"had_liked":false,"id":124919,"user_name":"阿古","can_delete":false,"product_type":"c1","uid":1625864,"ip_address":"","ucode":"0F75F9B97728A0","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqRllUL85m1a2ROyHf9rrPMbD9w7GSgxffTicb3AUqjhHVFrnUx2mybQFN1oiaYaLPDEhlJUmud9QMw/132","comment_is_top":false,"comment_ctime":1566015275,"is_pvip":false,"replies":[{"id":"45840","content":"嗯，是写错了 ，谢谢指正","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1566031688,"ip_address":"","comment_id":124919,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566015275","product_id":100033601,"comment_content":"12306.cn重定向www.12306.com？笔误吧？","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463357,"discussion_content":"嗯，是写错了 ，谢谢指正","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566031688,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124647,"user_name":"凭实力写bug","can_delete":false,"product_type":"c1","uid":1235611,"ip_address":"","ucode":"6F772551F18935","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/9b/e0ef47df.jpg","comment_is_top":false,"comment_ctime":1565937274,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565937274","product_id":100033601,"comment_content":"前端加载慢,通常就是请求资源的问题,什么dns解析都是常规流程,开个gzip压缩,当然要合理压缩,对小的文件不压缩.可以将第三方包拆开,现在单页基本都是一个包,第三方拆了,当前页面没用到的第三方包就不用第一时间加载了,后端只提供前端需要的字段,一些接口东西一堆,前端也不需要浪费","like_count":0},{"had_liked":false,"id":124584,"user_name":"看不懂的你","can_delete":false,"product_type":"c1","uid":1131725,"ip_address":"","ucode":"02BBD9928060F9","user_header":"https://static001.geekbang.org/account/avatar/00/11/44/cd/04f3a16c.jpg","comment_is_top":false,"comment_ctime":1565924694,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565924694","product_id":100033601,"comment_content":"关于登陆状态这块，是前端手动控制还是浏览器自动处理呀？我们项目是前端手动存的cookie，没走浏览器头部，通过authorization请求头进行判断","like_count":0},{"had_liked":false,"id":124522,"user_name":"Geek_2d276a","can_delete":false,"product_type":"c1","uid":1295596,"ip_address":"","ucode":"866B39EBE71356","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIBJYQ73yYqmiaU7Zg0BHPh9gpSglI79Dzcbob7I2tZOhTjbTTCw13KzVusYhLbKkukV9Ru5UfJMxQ/132","comment_is_top":false,"comment_ctime":1565916499,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1565916499","product_id":100033601,"comment_content":"DNS缓存是操作系统统一缓存，还是各进程独立缓存？","like_count":0},{"had_liked":false,"id":123460,"user_name":"寻找明天的驿站","can_delete":false,"product_type":"c1","uid":1319413,"ip_address":"","ucode":"FAC1F2907464A9","user_header":"https://static001.geekbang.org/account/avatar/00/14/21/f5/7431e82e.jpg","comment_is_top":false,"comment_ctime":1565679636,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565679636","product_id":100033601,"comment_content":"您好： 日常用到一些系统可以正常解析，ping也能够Ping通，但是浏览器就是不能够打开，而且是空白页面。这种情况是不是运营商劫持？是否有好的方法能够检测到具体原因？","like_count":0},{"had_liked":false,"id":123221,"user_name":"碧青Johnny","can_delete":false,"product_type":"c1","uid":1089135,"ip_address":"","ucode":"39B01A947EF4EC","user_header":"https://static001.geekbang.org/account/avatar/00/10/9e/6f/dc337903.jpg","comment_is_top":false,"comment_ctime":1565629547,"is_pvip":false,"replies":[{"id":"45252","content":"赞，这个后面课程会有介绍","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565652131,"ip_address":"","comment_id":123221,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565629547","product_id":100033601,"comment_content":"课后问题没人回答performance timing，我来补充一下😁","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462588,"discussion_content":"赞，这个后面课程会有介绍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565652131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":123204,"user_name":"man-moonth","can_delete":false,"product_type":"c1","uid":1383156,"ip_address":"","ucode":"145EED9CFA19E4","user_header":"https://static001.geekbang.org/account/avatar/00/15/1a/f4/a40453e7.jpg","comment_is_top":false,"comment_ctime":1565625707,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1565625707","product_id":100033601,"comment_content":"对着老师画的HTTP请求流程示意图排查卡在哪个阶段。<br>1. 可能是等待的TCP队列的请求过多。首先考虑到同一个域名同时最多只能建立6个TCP连接，检查一下是否请求的资源数量太多，导致很多请求并未发出；如果是，再看看设置了`Connection:Keep-Alive`能否改善，或者将资源聚集为一个请求。<br>2. 有可能是传输阶段。一是ping检查丢包情况；二是检查服务器处理请求的时间，network面板可以看到TTFB（第一字节时间），如果太长就是服务端响应太慢了。","like_count":0},{"had_liked":false,"id":123139,"user_name":"东丰瑞雪建华年","can_delete":false,"product_type":"c1","uid":1201423,"ip_address":"","ucode":"496FED72CEB85F","user_header":"https://static001.geekbang.org/account/avatar/00/12/55/0f/c5d68c9c.jpg","comment_is_top":false,"comment_ctime":1565613196,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565613196","product_id":100033601,"comment_content":"请求的成功率，失败率，响应时长特征值。<br>","like_count":0},{"had_liked":false,"id":123009,"user_name":"王家麦子","can_delete":false,"product_type":"c1","uid":1622990,"ip_address":"","ucode":"0DC75134E8158F","user_header":"https://static001.geekbang.org/account/avatar/00/18/c3/ce/4e78783b.jpg","comment_is_top":false,"comment_ctime":1565587983,"is_pvip":false,"replies":[{"id":"45212","content":"都可以配置的keep alive的， 目的为了下次请求资源的时候能够复用当前的tcp链接","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565606993,"ip_address":"","comment_id":123009,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1565587983","product_id":100033601,"comment_content":"上面有同学问“同域名只能建立6个tcp链接的话，那加载大量图片或者其他资源的时候不是很卡呢？”<br><br>老师说图片配置在cdn上。<br><br>请问老师，图片的请求不能配置keep-alive 么？","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462495,"discussion_content":"都可以配置的keep alive的， 目的为了下次请求资源的时候能够复用当前的tcp链接","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565606993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1589745,"avatar":"https://static001.geekbang.org/account/avatar/00/18/41/f1/02306cbb.jpg","nickname":"savokiss","note":"","ucode":"23901108131C2A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4644,"discussion_content":"那如果配置 keep alive 的话，过期时间内是不是就复用一个 tcp 连接啦？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565614528,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1622990,"avatar":"https://static001.geekbang.org/account/avatar/00/18/c3/ce/4e78783b.jpg","nickname":"王家麦子","note":"","ucode":"0DC75134E8158F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1589745,"avatar":"https://static001.geekbang.org/account/avatar/00/18/41/f1/02306cbb.jpg","nickname":"savokiss","note":"","ucode":"23901108131C2A","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5402,"discussion_content":"我理解是的 但是不知道前端怎么关","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566228495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4644,"ip_address":""},"score":5402,"extra":""}]}]},{"had_liked":false,"id":122991,"user_name":"天马","can_delete":false,"product_type":"c1","uid":1157419,"ip_address":"","ucode":"034C88480E6A33","user_header":"https://static001.geekbang.org/account/avatar/00/11/a9/2b/17f98c1d.jpg","comment_is_top":false,"comment_ctime":1565583577,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565583577","product_id":100033601,"comment_content":"我记得Chrome的Network栏可以看到是某个资源加载了多少时间。<br><br>以前遇到一次，加载了google CDN 的js，导致加载很久也出不来。","like_count":0},{"had_liked":false,"id":122932,"user_name":"Snow同學","can_delete":false,"product_type":"c1","uid":1390875,"ip_address":"","ucode":"231E98C721E4D2","user_header":"https://static001.geekbang.org/account/avatar/00/15/39/1b/bcabd223.jpg","comment_is_top":false,"comment_ctime":1565574992,"is_pvip":false,"replies":[{"id":"45159","content":"这块后内容会详细介绍","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565577216,"ip_address":"","comment_id":122932,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565574992","product_id":100033601,"comment_content":"希望老师在后续的课程能讲解获取html，css，js后，浏览器是如何解析，并如何生成DOM树，CSS树，最后渲染显示到浏览器上的完整的过程。同时给出前端人员编写代码怎么做性能高效的指导。 <br>非常期待呢，也是奔着这个买的老师的课程。希望在指导下，能提升前端功力","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462460,"discussion_content":"这块后内容会详细介绍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565577216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122904,"user_name":"Geek_007","can_delete":false,"product_type":"c1","uid":1467182,"ip_address":"","ucode":"C80107538EAA7F","user_header":"https://static001.geekbang.org/account/avatar/00/16/63/2e/e49116d1.jpg","comment_is_top":false,"comment_ctime":1565572240,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1565572240","product_id":100033601,"comment_content":"分析一个访问过慢，可以打开浏览器的开发者模式，分析network的waterfull图","like_count":0},{"had_liked":false,"id":122695,"user_name":"安思科","can_delete":false,"product_type":"c1","uid":1446237,"ip_address":"","ucode":"15FBE79CEDA0FD","user_header":"https://static001.geekbang.org/account/avatar/00/16/11/5d/0d955f19.jpg","comment_is_top":false,"comment_ctime":1565492570,"is_pvip":false,"replies":[{"id":"45209","content":"网络面板 应该充分利用起来","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565606009,"ip_address":"","comment_id":122695,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565492570","product_id":100033601,"comment_content":"打开network查看timing tab应该能看到一部分网络耗时情况，再厉害点的应该能用陶辉老师课中讲的方式了","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462364,"discussion_content":"网络面板 应该充分利用起来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565606009,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122562,"user_name":"Bence Zhu","can_delete":false,"product_type":"c1","uid":1064396,"ip_address":"","ucode":"AC87914449FC8C","user_header":"https://static001.geekbang.org/account/avatar/00/10/3d/cc/38b3089b.jpg","comment_is_top":false,"comment_ctime":1565424426,"is_pvip":false,"replies":[{"id":"44976","content":"呀，这是我敲错了，多谢，我改过来","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565433940,"ip_address":"","comment_id":122562,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565424426","product_id":100033601,"comment_content":"老师好，“缓存查找流程示意图”，最后一次响应到浏览器，状态码为什么不是304呀？\\^o^&#47;","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462310,"discussion_content":"呀，这是我敲错了，多谢，我改过来","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565433940,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122491,"user_name":"许童童","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1565407229,"is_pvip":false,"replies":[{"id":"44996","content":"能自己把这个流程串起来，必须点赞👍","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565453420,"ip_address":"","comment_id":122491,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565407229","product_id":100033601,"comment_content":"老师讲得好，这一讲大致讲了一个请求经历的网络过程，虽然我自己对这些知识都已经掌握并了解细节，但是之前收集资料的过程却不容易，如果早点有老师的指引就好了。","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462274,"discussion_content":"能自己把这个流程串起来，必须点赞👍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565453420,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122449,"user_name":"Geek_a942b2","can_delete":false,"product_type":"c1","uid":1624657,"ip_address":"","ucode":"79672FDA9186F3","user_header":"https://wx.qlogo.cn/mmopen/vi_32/icHcfIhDBHdN2Kl4oz0KUhH9pvVGNP1icdicib1Xb2XJvBGTb4j2lRYNh8ibbgjwUUtyaR6LeRb1l4WpuFYzwILxpew/132","comment_is_top":false,"comment_ctime":1565393579,"is_pvip":false,"replies":[{"id":"44944","content":"嗯。服务器也是一个因素","user_name":"作者回复","user_name_real":"李兵","uid":"1141464","ctime":1565401262,"ip_address":"","comment_id":122449,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1565393579","product_id":100033601,"comment_content":"数据传输阶段，如果网络很慢就要更长时间传输，其中服务器处理阶段需要查询数据库也是比较长，也比较容易出错","like_count":0,"discussions":[{"author":{"id":1141464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6a/d8/228449c9.jpg","nickname":"李兵","note":"","ucode":"3F3D3F6E20209E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462256,"discussion_content":"嗯。服务器也是一个因素","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565401262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122446,"user_name":"nissan","can_delete":false,"product_type":"c1","uid":1262913,"ip_address":"","ucode":"A38C4256D653BF","user_header":"https://static001.geekbang.org/account/avatar/00/13/45/41/27d3fcf9.jpg","comment_is_top":false,"comment_ctime":1565390736,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565390736","product_id":100033601,"comment_content":"想請問老師使用者的資訊（UID=3431uad）是放在cookie中好還是放在localstorage好呢？Cookie:","like_count":0},{"had_liked":false,"id":122442,"user_name":"Meeteer","can_delete":false,"product_type":"c1","uid":1544865,"ip_address":"","ucode":"BB070DCC885F47","user_header":"https://static001.geekbang.org/account/avatar/00/17/92/a1/7d5b6e4a.jpg","comment_is_top":false,"comment_ctime":1565370633,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565370633","product_id":100033601,"comment_content":"是服务器会通过  响应行  的状态码来告诉","like_count":0}]}