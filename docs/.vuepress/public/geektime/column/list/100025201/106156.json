{"id":106156,"title":"23 | Web开发：浏览器、小程序与PWA","content":"<p>你好，我是七牛云许式伟。</p><p>前面几讲我们聊到桌面软件开发，是从原生应用（Native App）角度来讲的，我们的讨论范围还只是单机软件，没有涉及网络相关的部分。</p><p>虽然介绍 Model 层的时候，我拿基于数据库实现 Model 层来谈常见的两个误区，但这只是因为这种问题经常能够见到，比较典型。实际纯单机软件很少会基于数据库来做，通常是自己设计的内存中的数据结构。</p><h2>浏览器</h2><p>今天开始我们聊聊浏览器。从商业价值看，浏览器带来的最为重大的进步是如下这三点。</p><p><strong>其一，软件服务化。</strong>当产品交付从单机软件转向云服务后，社会分工就发生了巨大变化。</p><p>互联网让 “24 小时不间断服务”成为可能。任何一个环节的力量都得到百倍乃至千倍的放大，都有可能成长出一个超级节点，进而吞噬上下游，让服务链条更短。</p><p><strong>其二，随时发布。</strong>这极大改进了软件迭代的效率。人们快速试验自己的想法，不必过度因为顾虑软件质量召回而束手束脚。</p><p><strong>其三，跨平台。</strong>浏览器消除了不同操作系统平台的差异性，让一份代码到处运行成为可能。</p><p>不过我们今天把重心放到界面开发这个视角。<strong>从作为界面开发框架的角度看，浏览器带来的最重大变化又是哪些？</strong></p><p><img src=\"https://static001.geekbang.org/resource/image/b8/c5/b8063e7ac32e854676b640c86d4628c5.png?wh=1841*1172\" alt=\"\"></p><p><strong>其一，操作系统的窗口系统被颠覆。</strong>一个网页只是一个窗口，不再有父子窗口。所有网页中的界面元素，都是一个虚拟视图（Virtual View），无论是大家耳熟能详的通用控件（比如 input，image，div 等等），还是自绘窗口（canvas）都一样。</p><!-- [[[read_end]]] --><p>这一点非常关键。哪些元素是子 View，哪些元素是图形（Shape） 已经完全淡化了，更多的是通过一种统一机制来完成事件分派（Event Dispatch）。</p><p><strong>其二，窗口的绘制机制变了。</strong>之前是调用操作系统的 GDI 生成界面，现在换成了 HTML+CSS。当然如果我们非要把 HTML+CSS 看作是另一种 GDI 语言，某种程度来看好像也可以。</p><p>但是实际上 GDI 与 HTML+CSS 有非常本质的差别。它们一个是在绘制界面，一个是在声明界面。这两者的本质差别，在视图更新（Update View）的时候一下子就显现出来。</p><p>上一讲我们在介绍 View 层的时候，介绍过 View 层的一大难点是做局部更新的优化。在 View 局部优化比较复杂的时候，我们甚至会引入 ViewModel 层来做视图局部更新的支持。</p><p>站在这个角度看 HTML+CSS，其实我们不能把它理解为 View 层，它其实是 ViewModel 层。View 层由谁干掉了？浏览器。在我们修改 HTML DOM 时，浏览器自动就更新了 View。怎么做到局部更新优化的？你不必关心，浏览器已经干完这件事情了。</p><p>这事的真正价值超过你的想象。它大幅提升了桌面应用开发的效率。</p><p><strong>其三，语言限制。</strong>浏览器的确大幅改善了界面开发的效率，但是从语言支持的角度，大部分操作系统都支持各种语言作为开发工具，而浏览器长期以来只支持 JavaScript 一门语言。</p><p>这当然是一个不小的制约。所以有很多人在试图突破这个限制。Google 曾经想要把 Dart 语言打造为下一代的 JavaScript，但最终以失败告终。</p><p>今天主流的方案还是以代码转换器为主。也就是说，我可以用自己期望的语言（比如 Go 语言）来做开发。但是在发布前通过代码转换器转为 JavaScript。</p><p>今天还有一个重要的尝试是 WebAssembly。它的目标是打通各类语言与 Web 之间的桥梁。</p><p><strong>其四，B/S 架构。</strong>无论是 B/S 还是 C/S，本质上还是软件服务化。这对软件架构产生了巨大影响。</p><p>一方面，从 Server 端的逻辑看，系统从单用户变成了多用户。另一方面，从 Browser 端（或 Client 端）看，仍然是单用户，但是没有了数据，数据都在 Server 端。这对应用架构提出了新的挑战。</p><p>应该怎么设计 Web 程序的架构？我们在下一讲中接着聊这个话题。</p><h2>小程序</h2><p>2016年9月，微信小程序（最初叫“应用号”）开始内测。下面是当天七牛云团队的一番内部对话。</p><hr><blockquote>\n<p><strong>许式伟</strong>：看下这篇，<a href=\"https://mp.weixin.qq.com/s/OxgWEOlLPcB_3DMVw_GSFA\">微信应用号来了</a>。<br><br>\n<strong>Gina</strong>：这个理念应该不是去构建一个Store，它的理念是用完即走，是场景通过扫码或者搜索触发的，并且应该打的是实体或者服务售卖群体，不会针对微信内消费，是订阅号的升级展现方式。<br><br>\n<strong>许式伟</strong>：<a href=\"https://mp.weixin.qq.com/s/x94SDqUV1REfNQ67ihgYfw\">关于微信小程序（应用号），我能透露的几个细节</a>，这一篇更详细一些。<br><br>\n微信没有必要在微信App内放Appstore，可以只有Web版本的Appstore，App不需要安装，甚至可能以消息的方式发给别人，以服务号的形式存在，这是迭代式开发。<br><br>\n以后终极形态还可以变，当前重心应该在runtime的稳定。通过上面的介绍，微信实际上升级了浏览器内核的标准，符合我之前说的新一代浏览器的定义。<br><br>\n<strong>Gina</strong>：小程序是一种不需要下载安装即可使用的应用，它实现了应用“触手可及”的梦想，用户扫一扫或者搜一下即可打开应用。也体现了“用完即走”的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无需安装卸载。<br><br>\n<strong>徐倒立</strong>：WebApp 这个技术和 idea最早来自 Google 浏览器 ，微信是商业化的最佳实践。Google浏览器在支持开发者开发App时就提出Intents，并且和Android是可以互动的。<br><br>\n<strong>Gina</strong>：没有好的土壤有好的功能也是没意义的。<br><br>\n<strong>许式伟</strong>：是，微信小程序在别的App不是做不到，是做了意义太小。苹果和腾讯不约而同在IM里面做App是有道理的。<br><br>\n<strong>Gina</strong>：IM比搜索和浏览器的封闭性更强。用户不容易跳转出去。封闭性强的土壤才能构建App生态。<br><br>\n<strong>许式伟</strong>：所以移动时代最佳的浏览器是IM，不再是以前传统浏览器。<br><br>\n<strong>杜江华</strong>：我们应该多讨论to B巨头们怎么玩、怎么思考的，对我们现阶段才更有意义，支付宝、微信等都是to C的。<br><br>\n<strong>许式伟</strong>：不是这样的。to C 的生态变化，会影响 to B。to C 是根源，我们是帮用户做App的，如果不知道以后App是怎么玩的，怎么可能做好。<br><br>\n<strong>杜江华</strong>：理解了，那应该是客户群之一互联网部分，还有不少大B 需要有其他不同的思考方式。<br><br>\n<strong>Gina</strong>：大B的趋势我挺想听的。这周聚会，阿杜能否把最近大项目和大传统客户的一些动作详细聊一下。你这边离业务最近。<br><br>\n<strong>许式伟</strong>：其实比你想象得还要恐怖，不管你是什么大B，你都得拥抱微信，只有微信和QQ让整个7亿中国网民在里面安家了，这就是一个虚拟的国家。所以我的判断是没有大B不开发微信小程序，这只是个眼光和时间问题。<br><br>\n<strong>吕桂华</strong>：这个微信应用号我们是应该关注的，相当于市场上多了一个操作系统。<br><br>\n<strong>许式伟</strong>：微信应用号不只是一个新OS，而且是下一代OS，苹果和谷歌不会坐视不理。当然还有一个痛点是跨平台。<br><br>\n<strong>Gina</strong>：这个东西可能对营销生态有大的影响。我们也要开发些营销工具。</p>\n</blockquote><hr><p>在这段对话之后的一个月内，我们做出了七牛的第一笔对外投资：“<a href=\"http://m.jisuapp.cn\">即速应用</a>”，它致力于帮助企业开始快速构建自己的小程序。</p><p><strong>为什么微信小程序必然会成功？</strong></p><p>因为，有 7 亿人同时使用的操作系统，很少。如果我们把不同 Android 厂商归为不同的主体的话，微信小程序是当时世界上最大的单一来源的操作系统。</p><p>随后，支付宝发布了支付宝小程序，国内手机厂商联合发布了 “快应用”，今日头条也发布了自己的小程序。</p><p>一下子，小程序变成了一支巨大的新兴力量，成为真正意义上的国产操作系统，对抗着 Android 和 iOS 两大移动操作系统生态。</p><p>但是，目前来说，小程序生态仍然存在有诸多问题。</p><p>最为关键的，是标准不统一。虽然都叫小程序，但是它们的接口各自都在快速迭代，很难去建立统一的标准，更谈不上让开发者一次开发，到处可用。</p><p>这和 Android 不同。虽然 Android 厂商很多，但是不同 Android 的开发接口是一致的，开发工具链是一致的。</p><p>小程序的厂商们会好好坐下来谈一谈标准一致的事情吗？应该做，但可能他们现在没空管开发者们的体验，他们的关注点是怎么快速抢地盘。</p><p>聊了那么多，我们话题回到技术本身。小程序和传统的 Web 开发有何不同？</p><p>其实有很大不同。小程序更像是 Native 程序在线化，而不是 PC Web 移动化。</p><p>为什么我们这么说？因为小程序是一个应用，而不是由一个个 Web 页面构成。</p><p>我们需要提交应用给微信或支付宝，他们也会像苹果审核 AppStore 上的应用一样，掌控着 App 的生杀大权。</p><p>而且理论上可以比苹果更牛的是，他们可以下线一个已经有千万甚至上亿级别用户的 App，让他们一无所有。苹果可以掐掉一个 App 的新增，他们可以掐掉一个 App 的全部。</p><p>这会带来新的社会问题：操作系统厂商的权限边界究竟在哪里。这不是一个简单的技术问题，而是一个伦理与法律的问题。</p><p>正因为这个风险如此之高，所以所有的厂商在拥抱微信的同时，必然时时刻刻想着如何逃离微信。</p><p><strong>刀刃，永远是两面的。</strong></p><p>这也是我个人非常佩服Facebook扎克伯格的地方。他看到了终局，所以在发布 Libra 的时候，他选择的是让一步，放弃 Control。</p><p>我还是那句话，他会成功。</p><p>让一步，其实就是进一百步。</p><h2>PWA</h2><p>国内大厂们纷纷布局小程序的时候，Google 也在发力自己的移动浏览器方案，叫 PWA，全称 “Progressive Web App”。</p><p>其实 Google 想要让浏览器获得 Native 应用同等体验之心是路人皆知的事实。</p><p>在 PC 时期，Google 就搞了 Google Native Client (NaCl)，后来转向了 WebAssembly。移动应用的在线化，Google 也同样在探索。</p><p>PWA 开始于 2015 年，比微信小程序早很多，并得到了苹果和微软的支持。从这个角度来说，PWA 的潜力不容小觑。</p><p>怎么理解 PWA？你可以理解为海外版的小程序。</p><p>那么它和小程序的差别在哪？</p><p>其一，演进思路不同。PWA 基本上以兼容并对 Web 进行逐步改造升级为导向。而小程序和 Web 还是有较大程度的差异。</p><p>其二，关注焦点不同。PWA 更技术化，它很大的精力重心放在如何让 PWA 在断网情况下和本地应用有更一致的体验。而小程序关注点在如何撬动这么庞大的用户市场，小程序之后专门出现小游戏，更加能够证明这一点。</p><p>其三，PWA 并没有中心化的 AppStore，它更像是一项技术标准，而不是一个封闭的操作系统。支持 PWA 的厂商们不用担心被人掐脖子，怎么更新你的应用自己说了算。</p><p>虽然技术上相似，但是如果以操作系统角度看，两者有代差。PWA 如果我们看作操作系统的话，相比小程序来说太传统。</p><p>为什么这么讲？因为小程序符合我前面介绍现代操作系统的 “账号(Account)-支付(Pay)-应用市场(AppStore)” 的商业闭环，但是 PWA 并没有账号，也没有支付。</p><p>怎么看待 PWA 的未来？</p><p>最终把 PWA 发扬光大的，很可能是 Facebook（当然 Facebook 也非常大概率选择放弃包袱，和小程序一样重新出发）。加上 Libra，秒杀微信小程序。</p><h2>结语</h2><p>今天我们聊了浏览器，结合浏览器的发展趋势，谈了现在仍然在高速迭代中的移动浏览器之争。有中国特色的小程序，和海外版小程序 PWA。</p><p>如果你对今天的内容有什么思考与解读，欢迎给我留言，我们一起讨论。下一讲我们将聊聊 “跨平台与 Web 开发的建议”。</p><p>如果你觉得有所收获，也欢迎把文章分享给你的朋友。感谢你的收听，我们下期再见。</p>","comments":[{"had_liked":false,"id":111859,"user_name":"黎","can_delete":false,"product_type":"c1","uid":1008946,"ip_address":"","ucode":"B2AB6BB4D7FE9C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/65/32/74e47b74.jpg","comment_is_top":false,"comment_ctime":1562632561,"is_pvip":false,"discussion_count":3,"race_medal":2,"score":"199131128177","product_id":100025201,"comment_content":"做到CEO的技术大牛，认知高度和广度，看问题的视角，确实让人耳目一新。","like_count":45,"discussions":[{"author":{"id":1147948,"avatar":"https://static001.geekbang.org/account/avatar/00/11/84/2c/1b0926b4.jpg","nickname":"Even","note":"","ucode":"C3555903EE9525","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":566700,"discussion_content":"然而这节并没有说什么干货","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1650730703,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1448031,"avatar":"https://static001.geekbang.org/account/avatar/00/16/18/5f/b391c6c2.jpg","nickname":"米虫","note":"","ucode":"18B78262CA2B0A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324913,"discussion_content":"支付入口确实是移动端必备的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605189570,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1027335,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/ad/07/20e7d3cf.jpg","nickname":"GeekGay","note":"","ucode":"9194E1FB5964A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":242908,"discussion_content":"不认同，技术方面牛没问题的，政治方面就不确认了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587507279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112207,"user_name":"Charles","can_delete":false,"product_type":"c1","uid":1001410,"ip_address":"","ucode":"32646D78CC0389","user_header":"https://static001.geekbang.org/account/avatar/00/0f/47/c2/e9fa4cf6.jpg","comment_is_top":false,"comment_ctime":1562683903,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"100346931711","product_id":100025201,"comment_content":"Google在某些方面像是“烂好人”，相信技术改变世界，造福人类。<br>腾讯微信就自私商业化一些，哪怕有研究院，核心技术永远也只是服务自己的公司，相信有用户世界就是我的。<br>","like_count":24,"discussions":[{"author":{"id":1448031,"avatar":"https://static001.geekbang.org/account/avatar/00/16/18/5f/b391c6c2.jpg","nickname":"米虫","note":"","ucode":"18B78262CA2B0A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":324914,"discussion_content":"所以google受人尊敬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1605189631,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":112290,"user_name":"Eason","can_delete":false,"product_type":"c1","uid":1018519,"ip_address":"","ucode":"69C0ADAC7C5475","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8a/97/6c1e90f1.jpg","comment_is_top":false,"comment_ctime":1562716831,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"27332520607","product_id":100025201,"comment_content":"由命令行，到GDI，到浏览器，到小程序。由浏览器到小程序这一步，技术上我们最能适应，因为整个UI开发的基础框架技术没有很大变化，但是背后的理念感觉却发生了很大变化。许老师文章我都看好几遍，感觉里面有些不少东西值得我学习思考，看一次是get 不到的。","like_count":6},{"had_liked":false,"id":112920,"user_name":"热海","can_delete":false,"product_type":"c1","uid":1495986,"ip_address":"","ucode":"6EF58BEAA06BB3","user_header":"https://static001.geekbang.org/account/avatar/00/16/d3/b2/5da80ecc.jpg","comment_is_top":false,"comment_ctime":1562845452,"is_pvip":false,"replies":[{"id":"41057","content":"1、内核主线程是一个独立进程，地址空间是3G-4G。其他用户进程系统调用（syscall）时，用的地址空间是自己的，只不过到了内核后提权了，而且内核地址空间是共享的，所以从内核函数角度感觉上相当于在一个线程中执行一个函数，并不需要做太多的特色处理。<br>2、关于堆栈，用户系统调用时参数压入的是用户堆栈。到了内核这边后，这些仍然是不变的，并不需要切换到内核自己的堆栈。","user_name":"作者回复","comment_id":112920,"uid":"1228022","ip_address":"","utype":1,"ctime":1562855779,"user_name_real":"许式伟-七牛云(已满)"}],"discussion_count":2,"race_medal":0,"score":"23037681932","product_id":100025201,"comment_content":"许老师, 我在前面11.多任务:进程,线程与协程 中, 对&quot;从操作系统内核的主线程来说，内核是独立进程，但是从系统调用的角度来说,操作系统内核更像是一个多线程的程序,每个系统调用是来自某个线程的函数调用.&quot; 这个说法不是太理解?<br>1. 从操作系统内核的主线程来说,内核是独立进程.  这个说法, 就是说操作系统内核就是一个多线程的进程,这些线程没有用户态的地址空间; 内核的各个线程共享3G~4G的地址空间, 共用一份内存地址映射表;这样理解对吗?<br>2.从系统调用的角度来说, 操作系统内核更像是一个多线程的程序,每个系统调用是来自某个线程的函数调用.  这里我有些困惑. 比如, 应用程序A, 运行起来是一个进程A, 其中通过系统调用进行操作系统内核执行代码时, 这时使用的是谁的堆栈?是进程A的堆栈, 还是操作系统进程的堆栈? 我的理解进程A应该有用户态堆栈, 但是有没有内核态堆栈?这个内核态堆栈是属于进程A还是操作系统进程的堆栈?这个地方没有理解?请帮忙解惑.","like_count":6,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":457958,"discussion_content":"1、内核主线程是一个独立进程，地址空间是3G-4G。其他用户进程系统调用（syscall）时，用的地址空间是自己的，只不过到了内核后提权了，而且内核地址空间是共享的，所以从内核函数角度感觉上相当于在一个线程中执行一个函数，并不需要做太多的特色处理。\n2、关于堆栈，用户系统调用时参数压入的是用户堆栈。到了内核这边后，这些仍然是不变的，并不需要切换到内核自己的堆栈。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562855779,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1140080,"avatar":"https://static001.geekbang.org/account/avatar/00/11/65/70/7e137498.jpg","nickname":"FOCUS","note":"","ucode":"DFE3078B632026","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":547102,"discussion_content":"内核主线程是一个独立进程，意思就是内核主线程，不是一个线程，而是一个进程？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642523066,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":457958,"ip_address":""},"score":547102,"extra":""}]}]},{"had_liked":false,"id":112013,"user_name":"八哥","can_delete":false,"product_type":"c1","uid":1012205,"ip_address":"","ucode":"ED2E09CBBFC060","user_header":"https://static001.geekbang.org/account/avatar/00/0f/71/ed/45ab9f03.jpg","comment_is_top":false,"comment_ctime":1562653789,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"14447555677","product_id":100025201,"comment_content":"Facebook本身账户体系有了，现在推出Libra，有了支付体系。之前Facebook已经有开放平台，（App Store），加上PWA。国外可能走了国内不相同的路线。","like_count":4},{"had_liked":false,"id":112418,"user_name":"瀚海星尘","can_delete":false,"product_type":"c1","uid":1024461,"ip_address":"","ucode":"90F418299EA3BF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a1/cd/2c513481.jpg","comment_is_top":false,"comment_ctime":1562729993,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10152664585","product_id":100025201,"comment_content":"小程序技术本质还是web，不同的是微信对它的管理模式相当创新，一种很有创意的组织模式。","like_count":2,"discussions":[{"author":{"id":1051622,"avatar":"https://static001.geekbang.org/account/avatar/00/10/0b/e6/99183c8d.jpg","nickname":"Subfire","note":"","ucode":"339A4EA20EBCEC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":37641,"discussion_content":"我也觉得属于web","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1571650659,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":111803,"user_name":"sam","can_delete":false,"product_type":"c1","uid":1000417,"ip_address":"","ucode":"8D48F4B9045947","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/e1/b7be5560.jpg","comment_is_top":false,"comment_ctime":1562605308,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10152539900","product_id":100025201,"comment_content":"看到了一场新的战争，PWA+Libra，最终赢家Facebook。<br><br>对于应用开发商也是多了一个安全保障，不必押注微信小程序一家。无论如何，平台之争都是激烈的。","like_count":2},{"had_liked":false,"id":287350,"user_name":"不温暖啊不纯良","can_delete":false,"product_type":"c1","uid":2079117,"ip_address":"","ucode":"204474A214E00C","user_header":"https://static001.geekbang.org/account/avatar/00/1f/b9/8d/00bded19.jpg","comment_is_top":false,"comment_ctime":1617895555,"is_pvip":false,"replies":[{"id":"104401","content":"是这样，不要当井底之蛙","user_name":"作者回复","comment_id":287350,"uid":"1228022","ip_address":"","utype":1,"ctime":1617969407,"user_name_real":"许式伟-七牛云(已满)"}],"discussion_count":1,"race_medal":0,"score":"5912862851","product_id":100025201,"comment_content":"看了老师这篇文章之后，我突然有个启发，人在沉浸于自己的小宇宙造火箭的时候，也不要忽略外界的发展，更需要关注自己的同行，和在未来有可能跟自己所造的火箭产生竞争关系的行业。","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"许式伟-七牛云(已满)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518274,"discussion_content":"是这样，不要当井底之蛙","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1617969407,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":275024,"user_name":"程序员Artist","can_delete":false,"product_type":"c1","uid":1063635,"ip_address":"","ucode":"F6AEC69AE77DC0","user_header":"https://static001.geekbang.org/account/avatar/00/10/3a/d3/c273ee50.jpg","comment_is_top":false,"comment_ctime":1611280145,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5906247441","product_id":100025201,"comment_content":"自始至终的不看好小程序，尤其是中国产小程序。各大商业公司是放心把命交给操作系统还是一个商业公司的APP呢？中国一堆小程序平台协议也不可能统一。从商业和技术角度都不可能成功。最多就是一个极小的场景补充。","like_count":2},{"had_liked":false,"id":112046,"user_name":"antipas","can_delete":false,"product_type":"c1","uid":1039798,"ip_address":"","ucode":"7F95F697D607C2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/dd/b6/fcf322a7.jpg","comment_is_top":false,"comment_ctime":1562659923,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857627219","product_id":100025201,"comment_content":"想起了凯文凯利的”失控“理论，世界会越来越 多中心化且具有分布式智能，创新来自于被创造者，造物主和被创造者共享控制权同呼吸共命运","like_count":1},{"had_liked":false,"id":111858,"user_name":"梦醒十分","can_delete":false,"product_type":"c1","uid":1043585,"ip_address":"","ucode":"33830A5A73DDF8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/81/2127e215.jpg","comment_is_top":false,"comment_ctime":1562632537,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5857599833","product_id":100025201,"comment_content":"许老师的文章质量高呀！","like_count":1},{"had_liked":false,"id":290144,"user_name":"景南鑫 Rock.J","can_delete":false,"product_type":"c1","uid":2313071,"ip_address":"","ucode":"C611E784D391F5","user_header":"https://static001.geekbang.org/account/avatar/00/23/4b/6f/50be543b.jpg","comment_is_top":false,"comment_ctime":1619400144,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1619400144","product_id":100025201,"comment_content":"纬度太高，这讲不适合初级架构听，涉及的技术太少。高阶视角，。<br>","like_count":1},{"had_liked":false,"id":258656,"user_name":"fjf--","can_delete":false,"product_type":"c1","uid":1372750,"ip_address":"","ucode":"555B604F448087","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epRXEzxNmtrLYrwP3miawZdzYDiczib2GPsSKk5pbjFEIk1PmMiaWHviaqk7YvQbraA4s6BbibLeWTpOvbA/132","comment_is_top":false,"comment_ctime":1604534519,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604534519","product_id":100025201,"comment_content":"虽然好多还是一知半解，但是开阔了眼界","like_count":0},{"had_liked":false,"id":246089,"user_name":"张浩_house","can_delete":false,"product_type":"c1","uid":1021258,"ip_address":"","ucode":"B733234B133607","user_header":"https://static001.geekbang.org/account/avatar/00/0f/95/4a/a145c675.jpg","comment_is_top":false,"comment_ctime":1599176300,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1599176300","product_id":100025201,"comment_content":"大佬看问题就是深入～","like_count":0},{"had_liked":false,"id":220347,"user_name":"考休","can_delete":false,"product_type":"c1","uid":1053955,"ip_address":"","ucode":"968DFC00D6D0CF","user_header":"https://static001.geekbang.org/account/avatar/00/10/15/03/c0fe1dbf.jpg","comment_is_top":false,"comment_ctime":1590225362,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590225362","product_id":100025201,"comment_content":"许老师对go语言的预测就很精准，期待对PWA的预测结果！","like_count":0},{"had_liked":false,"id":194373,"user_name":"活水","can_delete":false,"product_type":"c1","uid":1154935,"ip_address":"","ucode":"8A93734B62AF04","user_header":"https://static001.geekbang.org/account/avatar/00/11/9f/77/3a8fb89f.jpg","comment_is_top":false,"comment_ctime":1585055490,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585055490","product_id":100025201,"comment_content":"学习下libra和pwa,听过名字，现在看了意识到原来是要这么做的原因，嗯，保持好奇心。","like_count":0},{"had_liked":false,"id":190958,"user_name":"dxdingdu","can_delete":false,"product_type":"c1","uid":1287256,"ip_address":"","ucode":"8ACB1ADDDE71CA","user_header":"https://static001.geekbang.org/account/avatar/00/13/a4/58/8d2ba4b2.jpg","comment_is_top":false,"comment_ctime":1584713190,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1584713190","product_id":100025201,"comment_content":"许总的视野真是高!","like_count":0},{"had_liked":false,"id":163319,"user_name":"沫沫（美丽人生）","can_delete":false,"product_type":"c1","uid":1051023,"ip_address":"","ucode":"FC73BF0D79E3FD","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/8f/ad6039b6.jpg","comment_is_top":false,"comment_ctime":1576685363,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576685363","product_id":100025201,"comment_content":"从应用分发的角度，我们放弃了PWA而转向了微信小程序。小程序有对存储空间的严格限制，无法在本地缓存数据，会很消耗用户的流量，不知道许老师在这方面有没有好点建议。谢谢！","like_count":0},{"had_liked":false,"id":138799,"user_name":"你为啥那么牛","can_delete":false,"product_type":"c1","uid":1503506,"ip_address":"","ucode":"1ABC604A54A8F6","user_header":"https://static001.geekbang.org/account/avatar/00/16/f1/12/7dac30d6.jpg","comment_is_top":false,"comment_ctime":1570456131,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570456131","product_id":100025201,"comment_content":"我觉得还是PWA更有远见，国内太浮躁，小程序最终还是依靠浏览器，浏览器依赖OS。就像webos一样，腾讯多么想收购的那个手机操作系统","like_count":0},{"had_liked":false,"id":124251,"user_name":"Halohoop","can_delete":false,"product_type":"c1","uid":1108517,"ip_address":"","ucode":"623C5E6AF7BCE0","user_header":"https://static001.geekbang.org/account/avatar/00/10/ea/25/75be8cdf.jpg","comment_is_top":false,"comment_ctime":1565843057,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565843057","product_id":100025201,"comment_content":"卧槽～这文章看得我又都快s了～","like_count":0},{"had_liked":false,"id":118651,"user_name":"Eternal","can_delete":false,"product_type":"c1","uid":1188023,"ip_address":"","ucode":"EA6FE7CC98F740","user_header":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","comment_is_top":false,"comment_ctime":1564406262,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564406262","product_id":100025201,"comment_content":"最后老师的预言听得新潮澎湃，期待大佬的厮杀，这样小菜才有机会","like_count":0},{"had_liked":false,"id":113447,"user_name":"Geek_a06b28","can_delete":false,"product_type":"c1","uid":1495188,"ip_address":"","ucode":"3E2F5E9BB0A78B","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqsQxqMHibXJMAFpXibKuoIPicm9SVMPaSfmPzBXpdGicS4s7nY7CEfeKs40vNh4g9Ic2t7Lcz1iasSic8Q/132","comment_is_top":false,"comment_ctime":1563013343,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563013343","product_id":100025201,"comment_content":"许老师，在设计生产交易系统架构和数据分析系统架构（含大数据平台），有以下问题咨询您:<br>1、2种系统在总体、应用、数据、技术架构等纬度在设计的时候需要注意哪些关键的点？<br>2、两者之间如何实现有效且良好的衔？<br>3、如果使用数据服务平台是需要2个还是1个即可呢？<br>期待您的回复。","like_count":0},{"had_liked":false,"id":112545,"user_name":"Geek_88604f","can_delete":false,"product_type":"c1","uid":1501234,"ip_address":"","ucode":"33DD1318E53814","user_header":"","comment_is_top":false,"comment_ctime":1562755068,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562755068","product_id":100025201,"comment_content":"感觉小程序类似云上的SaaS服务","like_count":0},{"had_liked":false,"id":112237,"user_name":"MindController","can_delete":false,"product_type":"c1","uid":1159113,"ip_address":"","ucode":"3B9CECCD12CF6E","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/c9/d9c72c60.jpg","comment_is_top":false,"comment_ctime":1562688921,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562688921","product_id":100025201,"comment_content":"长见识了，激动人心","like_count":0},{"had_liked":false,"id":111835,"user_name":"Aaron Cheung","can_delete":false,"product_type":"c1","uid":1079816,"ip_address":"","ucode":"03972759C53667","user_header":"https://static001.geekbang.org/account/avatar/00/10/7a/08/4d3e47dd.jpg","comment_is_top":false,"comment_ctime":1562629319,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562629319","product_id":100025201,"comment_content":"起床打卡23","like_count":0}]}