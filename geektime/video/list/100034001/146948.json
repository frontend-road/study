{"id":146948,"title":"56 | 函数式编程（1）","content":"<p><strong>课件地址</strong></p><p><a href=\"https://gitee.com/geektime-geekbang/swift-course\">https://gitee.com/geektime-geekbang/swift-course</a></p>","comments":[{"had_liked":false,"id":161954,"user_name":"Geek_jg3r26","can_delete":false,"product_type":"c3","uid":1454691,"ip_address":"","ucode":"7D093ED7273CBE","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEK5icO2A4K7HYTYfQoagTz7VbtgxfS2ibBqLnKVWwQZgsePibZWFvFJEhPT8BtpQSaFx9IEodyp6c0dw/132","comment_is_top":false,"comment_ctime":1576413518,"is_pvip":false,"replies":[{"id":62423,"content":"函数式编程是和面向对象编程并列的一种编程思想，  链式编程只要写起来是一个链条就可以，面向对象里你可以使用这种链的方式，函数式编程里也可以使用链式。\n\n所以我觉得两个根本不是一回事，函数式编程是一种编程思想，链式编程是一种书写代码的方式。","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1576932889,"ip_address":"","comment_id":161954,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"老师， 函数式编程和链式编程看的挺像， 有什么区别吗","like_count":3,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477922,"discussion_content":"函数式编程是和面向对象编程并列的一种编程思想，  链式编程只要写起来是一个链条就可以，面向对象里你可以使用这种链的方式，函数式编程里也可以使用链式。\n\n所以我觉得两个根本不是一回事，函数式编程是一种编程思想，链式编程是一种书写代码的方式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1576932889,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":141206,"user_name":"pengzishang","can_delete":false,"product_type":"c3","uid":1604410,"ip_address":"","ucode":"073651AAB12FA2","user_header":"https://static001.geekbang.org/account/avatar/00/18/7b/3a/fe280812.jpg","comment_is_top":false,"comment_ctime":1571129253,"is_pvip":false,"replies":[{"id":58091,"content":"let source = &quot;Hello world&quot;\nlet target: [Character] = [&quot;a&quot;,&quot;e&quot;,&quot;i&quot;,&quot;o&quot;,&quot;u&quot;]\nzip(0..&lt;source.count, source).forEach { (index, char) in\n    if target.contains(char) {\n        print(index)\n    }\n}\n因为swift没有yield，所以不是很优雅","user_name":"作者回复","user_name_real":"Geek_f72435","uid":1341726,"ctime":1573640408,"ip_address":"","comment_id":141206,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"let source = &quot;Hello world&quot;\nlet target = [&quot;a&quot;,&quot;e&quot;,&quot;i&quot;,&quot;o&quot;,&quot;u&quot;]\n\nlet firstOrders = target.map { (character) -&gt; Int? in\n    let index =  source.firstIndex(where: {\n        String($0) == character\n    })\n    \n    return index?.utf16Offset(in: source)\n}\n\nprint(zip(target, firstOrders.compactMap({$0 ?? -1})).map({$0}))\n\n感觉还是不够简明扼要","like_count":3,"discussions":[{"author":{"id":1341726,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLxtKhpmvzx2VB4iajicfJVFmQR3eP3xBpdpQEovpSqUfAOrNImvYwVb7P37ibI0ONziau9sbFEk8oDaA/132","nickname":"elfgate","note":"","ucode":"3C0B5F7C1F664C","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":470694,"discussion_content":"let source = &amp;quot;Hello world&amp;quot;\nlet target: [Character] = [&amp;quot;a&amp;quot;,&amp;quot;e&amp;quot;,&amp;quot;i&amp;quot;,&amp;quot;o&amp;quot;,&amp;quot;u&amp;quot;]\nzip(0..&amp;lt;source.count, source).forEach { (index, char) in\n    if target.contains(char) {\n        print(index)\n    }\n}\n因为swift没有yield，所以不是很优雅","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573640408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":206627,"user_name":"王凯","can_delete":false,"product_type":"c3","uid":1946767,"ip_address":"","ucode":"A92A193132B029","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJcpcmjJiaIwRedGZFhNyPOSiadnK0G64KuZEbXHxATwDrN3J1SgsPibx2VMRloc9q9ianXHKhICfjKfw/132","comment_is_top":false,"comment_ctime":1586911760,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"let source = &quot;Hello World&quot;\nlet target: [Character] = [&quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;o&quot;, &quot;u&quot;]\nprint(zip(0..&lt;source.count, source).first {target.contains($1)}?.0)","like_count":3},{"had_liked":false,"id":258836,"user_name":"Yarren","can_delete":false,"product_type":"c3","uid":1012164,"ip_address":"","ucode":"C979C081AECA3E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/71/c4/6649bd0b.jpg","comment_is_top":false,"comment_ctime":1604565503,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"let source = &quot;Hello world&quot;\nlet target: [Character] = [&quot;a&quot;,&quot;e&quot;,&quot;i&quot;,&quot;o&quot;,&quot;u&quot;]\nprint(source.prefix{!target.contains($0)}.count)","like_count":1},{"had_liked":false,"id":166703,"user_name":"欢乐的小马驹","can_delete":false,"product_type":"c3","uid":1078951,"ip_address":"","ucode":"B594106688CEE7","user_header":"https://static001.geekbang.org/account/avatar/00/10/76/a7/374e86a7.jpg","comment_is_top":false,"comment_ctime":1577548340,"is_pvip":false,"replies":null,"discussion_count":2,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"通过第二种方式，岂不是时间复杂度更高了？","like_count":1,"discussions":[{"author":{"id":1381320,"avatar":"https://static001.geekbang.org/account/avatar/00/15/13/c8/c8493a33.jpg","nickname":"刘彪","note":"","ucode":"F99AB6EB881FB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":376321,"discussion_content":"在算法里面O(N)与O(2N)是同一个复杂度","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1622080567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1471383,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/x0xV7KicUyevKSqo8pNbyQ3NA2cJ8gBgw8iaFA5hwS1WBrxJxmyZRZ8uEhhsGXC7lvxkNnWccPojKbve1tiaOKcZw/132","nickname":"YangSir","note":"","ucode":"F718302B147DE2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":251286,"discussion_content":"同问","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1588078696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":332395,"user_name":"Geek_d004f7","can_delete":false,"product_type":"c3","uid":1459385,"ip_address":"","ucode":"C080BB063005B4","user_header":"https://static001.geekbang.org/account/avatar/00/16/44/b9/f00da14c.jpg","comment_is_top":false,"comment_ctime":1643202576,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"zip(0..., &quot;hello world&quot;).filter{ [&quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;o&quot;, &quot;u&quot;].contains(String($1)) }.first?.0","like_count":0},{"had_liked":false,"id":316091,"user_name":"风早","can_delete":false,"product_type":"c3","uid":1069713,"ip_address":"","ucode":"A4D046C90F832E","user_header":"https://static001.geekbang.org/account/avatar/00/10/52/91/d07baf7e.jpg","comment_is_top":false,"comment_ctime":1634128758,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"这个算法里面哪句是给wordDict的key赋值的呢 没发现呀 请指教～","like_count":0},{"had_liked":false,"id":316090,"user_name":"风早","can_delete":false,"product_type":"c3","uid":1069713,"ip_address":"","ucode":"A4D046C90F832E","user_header":"https://static001.geekbang.org/account/avatar/00/10/52/91/d07baf7e.jpg","comment_is_top":false,"comment_ctime":1634128725,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"func wordFreq(words:String) -&gt; [String: Int] {\n    \n    var wordDict:[String: Int] = [:]\n    let wordList = words.split(separator: &quot; &quot;)\n    print(&quot;wordDict:\\(wordDict)&quot;)\n    \n    for word in wordList {\n        \n        let lowerCaseWord = word.lowercased()\n\n        if !NON_WORDS.contains(lowerCaseWord) {\n            \n            if let count = wordDict[lowerCaseWord]{\n                \n                wordDict[lowerCaseWord] = count + 1\n                \n            }else{\n                \n                wordDict[lowerCaseWord] = 1\n            }\n        }\n    }\n    \n    print(&quot;wordDict:\\(wordDict)&quot;)\n    return wordDict;\n}\n","like_count":0},{"had_liked":false,"id":208882,"user_name":"Anrika","can_delete":false,"product_type":"c3","uid":1213766,"ip_address":"","ucode":"641978ADB99EFA","user_header":"https://static001.geekbang.org/account/avatar/00/12/85/46/3011d76a.jpg","comment_is_top":false,"comment_ctime":1587457851,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"let source = &quot;Hello World&quot;\nlet target: [Character] = [&quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;o&quot;, &quot;u&quot;]\nzip(0..&lt;source.count, source).forEach {\n    if target.contains($0.1) {\n        print($0.0)\n    }\n}","like_count":0},{"had_liked":false,"id":207952,"user_name":"Happy_Home","can_delete":false,"product_type":"c3","uid":1454030,"ip_address":"","ucode":"E09B1C4D533809","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/ce/202cf0a3.jpg","comment_is_top":false,"comment_ctime":1587221115,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100034001,"comment_content":"       let source = &quot;Hello world&quot;\n       var target: [Character] = [&quot;a&quot;,&quot;e&quot;,&quot;i&quot;,&quot;o&quot;,&quot;u&quot;]\n      \n      let result = zip([Character](source.map { $0 }),0 ..&lt; source.count).filter { (char,index) -&gt; Bool in\n        &#47;&#47;firstIndex表示已经尝试在target查找char的第一次出现的元素下标了\n            guard let currentIndex = target.firstIndex(of: char) else {\n                &#47;&#47;false时，即target中不包含此Character元素，则此时的char与index不会在新的集合中出现\n                return false\n            }\n        &#47;&#47;发现元素下标后将target中已匹配的元素剔除掉，因为已经找到了，后续的char没必要再找了，不去处会被source重复的char覆盖掉下标\n       _ = target.remove(at: currentIndex)\n          \n            return true\n        }\n        print(result)","like_count":0},{"had_liked":false,"id":200747,"user_name":"小千","can_delete":false,"product_type":"c3","uid":1286065,"ip_address":"","ucode":"8A1274AD7B87F0","user_header":"https://static001.geekbang.org/account/avatar/00/13/9f/b1/ae61b184.jpg","comment_is_top":false,"comment_ctime":1585645845,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100034001,"comment_content":"let str = &quot;Hello, World&quot;\nlet chars = [&quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;o&quot;, &quot;u&quot;]\n&#47;&#47; 命令式\nfor (index, item) in str.enumerated() {\n    let itemStr = String(item)\n    if chars.contains(itemStr) {\n        print(&quot;第一个出现的字符：\\(item)，位置：\\(index)&quot;)\n        break\n    }\n}\n&#47;&#47; 函数式\nzip(0..., str).forEach { (index, item) in\n    let itemStr = String(item)\n    if chars.contains(itemStr) {\n        &#47;* 结果都打印出来了\n         * e:1\n         * o:4\n         * o:8\n         * 不符合需求。。。（目前没想到更好的 Orz）\n         *&#47;\n        print(&quot;\\(item):\\(index)&quot;)\n    }\n}","like_count":0},{"had_liked":false,"id":141167,"user_name":"pengzishang","can_delete":false,"product_type":"c3","uid":1604410,"ip_address":"","ucode":"073651AAB12FA2","user_header":"https://static001.geekbang.org/account/avatar/00/18/7b/3a/fe280812.jpg","comment_is_top":false,"comment_ctime":1571127505,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":3,"product_id":100034001,"comment_content":"if let index =  &quot;Hello world&quot;.firstIndex(where: {$0 == &quot;e&quot;}){\n    print(index.utf16Offset(in: &quot;Hello world&quot;))\n}","like_count":0}]}