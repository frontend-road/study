{"id":182902,"title":"15 | constexprï¼šä¸€ä¸ªå¸¸æ€çš„ä¸–ç•Œ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>æˆ‘ä»¬å·²ç»è¿ç»­è®²äº†å‡ è®²æ¯”è¾ƒç´¯äººçš„ç¼–è¯‘æœŸç¼–ç¨‹äº†ã€‚ä»Šå¤©æˆ‘ä»¬è¿˜æ˜¯ç»§ç»­è¿™ä¸ªè¯é¢˜ï¼Œä½†æ˜¯ï¼Œç›¸ä¿¡ä»Šå¤©å­¦å®Œä¹‹åï¼Œä½ ä¼šæ„Ÿè§‰æ¯”ä¹‹å‰å‡ è®²è¦è½»æ¾å¾ˆå¤šã€‚C++ è¯­è¨€é‡Œçš„å¾ˆå¤šæ”¹è¿›ï¼Œè®©æˆ‘ä»¬åšç¼–è¯‘æœŸç¼–ç¨‹ä¹Ÿå˜å¾—è¶Šæ¥è¶Šç®€å•äº†ã€‚</p><h2>åˆè¯† constexpr</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€äº›ä¾‹å­ï¼š</p><pre><code class=\"language-c++\">int sqr(int n)\n{\n  return n * n;\n}\n\nint main()\n{\n  int a[sqr(3)];\n}\n</code></pre><p>æƒ³ä¸€æƒ³ï¼Œè¿™ä¸ªä»£ç åˆæ³•å—ï¼Ÿ</p><p>çœ‹è¿‡ä¹‹åï¼Œå†æƒ³æƒ³è¿™ä¸ªä»£ç å¦‚ä½•ï¼Ÿ</p><pre><code class=\"language-c++\">int sqr(int n)\n{\n  return n * n;\n}\n\nint main()\n{\n  const int n = sqr(3);\n  int a[n];\n}\n</code></pre><p>è¿˜æœ‰è¿™ä¸ªï¼Ÿ</p><pre><code class=\"language-c++\">#include &lt;array&gt;\n\nint sqr(int n)\n{\n  return n * n;\n}\n\nint main()\n{\n  std::array&lt;int, sqr(3)&gt; a;\n}\n</code></pre><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å‰é¢æ¨¡æ¿å…ƒç¼–ç¨‹é‡Œçš„é‚£äº›ç±»é‡Œçš„ <code>static const int</code> ä»€ä¹ˆçš„ï¼Œä½ è®¤ä¸ºå®ƒä»¬èƒ½ç”¨åœ¨ä¸Šé¢çš„å‡ ç§æƒ…å†µä¸‹å—ï¼Ÿ</p><p>å¦‚æœä»¥ä¸Šé—®é¢˜ä½ éƒ½çŸ¥é“æ­£ç¡®çš„ç­”æ¡ˆï¼Œé‚£æ­å–œä½ ï¼Œä½ å¯¹ C++ çš„ç†è§£å·²ç»åˆ°äº†ä¸€ä¸ªä¸é”™çš„å±‚æ¬¡äº†ã€‚ä½†é—®é¢˜ä¾ç„¶åœ¨é‚£é‡Œï¼šè¿™äº›é—®é¢˜çš„ç­”æ¡ˆä¸ç›´è§‚ã€‚å¹¶ä¸”ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¯”æ¨¡æ¿å…ƒç¼–ç¨‹æ›´æ–¹ä¾¿çš„è¿›è¡Œç¼–è¯‘æœŸè®¡ç®—çš„æ–¹æ³•ã€‚</p><p>åœ¨ C++11 å¼•å…¥ã€åœ¨ C++14 å¾—åˆ°å¤§å¹…æ”¹è¿›çš„ <code>constexpr</code> å…³é”®å­—å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œè¯ç”Ÿçš„ã€‚å®ƒçš„å­—é¢æ„æ€æ˜¯ constant expressionï¼Œå¸¸é‡è¡¨è¾¾å¼ã€‚å­˜åœ¨ä¸¤ç±» <code>constexpr</code> å¯¹è±¡ï¼š</p><!-- [[[read_end]]] --><ul>\n<li><code>constexpr</code> å˜é‡ï¼ˆå”‰â€¦â€¦ğŸ˜“ï¼‰</li>\n<li><code>constexpr</code> å‡½æ•°</li>\n</ul><p>ä¸€ä¸ª <code>constexpr</code> å˜é‡æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å®Œå…¨ç¡®å®šçš„å¸¸æ•°ã€‚ä¸€ä¸ª <code>constexpr</code> å‡½æ•°è‡³å°‘å¯¹äºæŸä¸€ç»„å®å‚å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´äº§ç”Ÿä¸€ä¸ªç¼–è¯‘æœŸå¸¸æ•°ã€‚</p><p>æ³¨æ„ä¸€ä¸ª <code>constexpr</code> å‡½æ•°ä¸ä¿è¯åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªç¼–è¯‘æœŸå¸¸æ•°ï¼ˆå› è€Œä¹Ÿæ˜¯å¯ä»¥ä½œä¸ºæ™®é€šå‡½æ•°æ¥ä½¿ç”¨çš„ï¼‰ã€‚ç¼–è¯‘å™¨ä¹Ÿæ²¡æ³•é€šç”¨åœ°æ£€æŸ¥è¿™ç‚¹ã€‚ç¼–è¯‘å™¨å”¯ä¸€å¼ºåˆ¶çš„æ˜¯ï¼š</p><ul>\n<li><code>constexpr</code> å˜é‡å¿…é¡»ç«‹å³åˆå§‹åŒ–</li>\n<li>åˆå§‹åŒ–åªèƒ½ä½¿ç”¨å­—é¢é‡æˆ–å¸¸é‡è¡¨è¾¾å¼ï¼Œåè€…ä¸å…è®¸è°ƒç”¨ä»»ä½•é <code>constexpr</code> å‡½æ•°</li>\n</ul><p><code>constexpr</code> çš„å®é™…è§„åˆ™å½“ç„¶ç¨å¾®æ›´å¤æ‚äº›ï¼Œè€Œä¸”éšç€ C++ æ ‡å‡†çš„æ¼”è¿›ä¹Ÿæœ‰ç€ä¸€äº›å˜åŒ–ï¼Œç‰¹åˆ«æ˜¯å¯¹ <code>constexpr</code> å‡½æ•°å¦‚ä½•å®ç°çš„è¦æ±‚åœ¨æ…¢æ…¢æ”¾å®½ã€‚è¦äº†è§£å…·ä½“æƒ…å†µåŒ…æ‹¬å…¶åœ¨ä¸åŒ C++ æ ‡å‡†ä¸­çš„é™åˆ¶ï¼Œå¯ä»¥æŸ¥çœ‹å‚è€ƒèµ„æ–™ <span class=\"orange\">[1]</span>ã€‚ä¸‹é¢æˆ‘ä»¬ä¹Ÿä¼šå›åˆ°è¿™ä¸ªé—®é¢˜ç•¥ä½œå±•å¼€ã€‚</p><p>æ‹¿ <code>constexpr</code> æ¥æ”¹é€ å¼€å¤´çš„ä¾‹å­ï¼Œä¸‹é¢çš„ä»£ç å°±å®Œå…¨å¯ä»¥å·¥ä½œäº†ï¼š</p><pre><code class=\"language-c++\">#include &lt;array&gt;\n\nconstexpr int sqr(int n)\n{\n  return n * n;\n}\n\nint main()\n{\n  constexpr int n = sqr(3);\n  std::array&lt;int, n&gt; a;\n  int b[n];\n}\n</code></pre><p>è¦æ£€éªŒä¸€ä¸ª <code>constexpr</code> å‡½æ•°èƒ½ä¸èƒ½äº§ç”Ÿä¸€ä¸ªçœŸæ­£çš„ç¼–è¯‘æœŸå¸¸é‡ï¼Œå¯ä»¥æŠŠç»“æœèµ‹ç»™ä¸€ä¸ª <code>constexpr</code> å˜é‡ã€‚æˆåŠŸçš„è¯ï¼Œæˆ‘ä»¬å°±ç¡®è®¤äº†ï¼Œè‡³å°‘åœ¨è¿™ç§è°ƒç”¨æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬èƒ½çœŸæ­£å¾—åˆ°ä¸€ä¸ªç¼–è¯‘æœŸå¸¸é‡ã€‚</p><h2>constexpr å’Œç¼–è¯‘æœŸè®¡ç®—</h2><p>ä¸Šé¢è¿™äº›å½“ç„¶æœ‰ç‚¹ç”¨ã€‚ä½†å¦‚æœåªæœ‰è¿™ç‚¹ç”¨çš„è¯ï¼Œå°±ä¸å€¼å¾—æˆ‘ä¸“é—¨æ¥å†™ä¸€è®²äº†ã€‚æ›´å¼ºå¤§çš„åœ°æ–¹åœ¨äºï¼Œä½¿ç”¨ç¼–è¯‘æœŸå¸¸é‡ï¼Œå°±è·Ÿæˆ‘ä»¬ä¹‹å‰çš„é‚£äº›ç±»æ¨¡æ¿é‡Œçš„ <code>static const int</code> å˜é‡ä¸€æ ·ï¼Œæ˜¯å¯ä»¥è¿›è¡Œç¼–è¯‘æœŸè®¡ç®—çš„ã€‚</p><p>ä»¥<a href=\"https://time.geekbang.org/column/article/181608\">[ç¬¬ 13 è®²]</a> æåˆ°çš„é˜¶ä¹˜å‡½æ•°ä¸ºä¾‹ï¼Œå’Œé‚£ä¸ªç‰ˆæœ¬åŸºæœ¬ç­‰ä»·çš„å†™æ³•æ˜¯ï¼š</p><pre><code class=\"language-c++\">constexpr int factorial(int n)\n{\n  if (n == 0) {\n    return 1;\n  } else {\n    return n * factorial(n - 1);\n  }\n}\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬ç”¨ä¸‹é¢çš„ä»£ç å¯ä»¥éªŒè¯æˆ‘ä»¬ç¡®å®å¾—åˆ°äº†ä¸€ä¸ªç¼–è¯‘æœŸå¸¸é‡ï¼š</p><pre><code class=\"language-c++\">int main()\n{\n  constexpr int n = factorial(10);\n  printf(\"%d\\n\", n);\n}\n</code></pre><p>ç¼–è¯‘å¯ä»¥é€šè¿‡ï¼ŒåŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬çœ‹äº§ç”Ÿçš„æ±‡ç¼–ä»£ç çš„è¯ï¼Œä¸€æ ·å¯ä»¥ç›´æ¥çœ‹åˆ°å¸¸é‡ 3628800ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼šåœ¨è¿™ä¸ª <code>constexpr</code> å‡½æ•°é‡Œï¼Œæ˜¯ä¸èƒ½å†™ <code>static_assert(n &gt;= 0)</code> çš„ã€‚ä¸€ä¸ª <code>constexpr</code> å‡½æ•°ä»ç„¶å¯ä»¥ä½œä¸ºæ™®é€šå‡½æ•°ä½¿ç”¨â€”â€”æ˜¾ç„¶ï¼Œä¼ å…¥ä¸€ä¸ªæ™®é€š <code>int</code> æ˜¯ä¸èƒ½ä½¿ç”¨é™æ€æ–­è¨€çš„ã€‚æ›¿æ¢æ–¹æ³•æ˜¯åœ¨ <code>factorial</code> çš„å®ç°å¼€å¤´åŠ å…¥ï¼š</p><pre><code class=\"language-c++\">  if (n &lt; 0) {\n    throw std::invalid_argument(\n      \"Arg must be non-negative\");\n  }\n</code></pre><p>å¦‚æœä½ åœ¨ <code>main</code> é‡Œå†™ <code>constexpr int n = factorial(-1);</code> çš„è¯ï¼Œå°±ä¼šçœ‹åˆ°ç¼–è¯‘å™¨æŠ¥å‘ŠæŠ›å‡ºå¼‚å¸¸å¯¼è‡´æ— æ³•å¾—åˆ°ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ã€‚å»ºè®®ä½ è‡ªå·±å°è¯•ä¸€ä¸‹ã€‚</p><h2>constexpr å’Œ const</h2><p>åˆå­¦ <code>constexpr</code> æ—¶ï¼Œä¸€ä¸ªå¾ˆå¯èƒ½æœ‰çš„å›°æƒ‘æ˜¯ï¼Œå®ƒè·Ÿ <code>const</code> ç”¨æ³•ä¸Šçš„åŒºåˆ«åˆ°åº•æ˜¯ä»€ä¹ˆã€‚äº§ç”Ÿè¿™ç§å›°æƒ‘æ˜¯æ­£å¸¸çš„ï¼Œæ¯•ç«Ÿ <code>const</code> æ˜¯ä¸ªé‡è½½äº†å¾ˆå¤šä¸åŒå«ä¹‰çš„å…³é”®å­—ã€‚</p><p><code>const</code> çš„åŸæœ¬å’ŒåŸºç¡€çš„å«ä¹‰ï¼Œè‡ªç„¶æ˜¯è¡¨ç¤ºå®ƒä¿®é¥°çš„å†…å®¹ä¸ä¼šå˜åŒ–ï¼Œå¦‚ï¼š</p><pre><code class=\"language-c++\">const int n = 1:\nn = 2;  // å‡ºé”™ï¼\n</code></pre><p>æ³¨æ„ <code>const</code> åœ¨ç±»å‹å£°æ˜çš„ä¸åŒä½ç½®ä¼šäº§ç”Ÿä¸åŒçš„ç»“æœã€‚å¯¹äºå¸¸è§çš„ <code>const char*</code> è¿™æ ·çš„ç±»å‹å£°æ˜ï¼Œæ„ä¹‰å’Œ <code>char const*</code> ç›¸åŒï¼Œæ˜¯æŒ‡å‘å¸¸å­—ç¬¦çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸å¯æ›´æ”¹ï¼›ä½†å’Œ <code>char * const</code> ä¸åŒï¼Œé‚£ä»£è¡¨æŒ‡å‘å­—ç¬¦çš„å¸¸æŒ‡é’ˆï¼ŒæŒ‡é’ˆæœ¬èº«ä¸å¯æ›´æ”¹ã€‚æœ¬è´¨ä¸Šï¼Œ<code>const</code> ç”¨æ¥è¡¨ç¤ºä¸€ä¸ª<strong>è¿è¡Œæ—¶å¸¸é‡</strong>ã€‚</p><p>åœ¨ C++ é‡Œï¼Œ<code>const</code> åé¢æ¸æ¸å¸¦ä¸Šäº†ç°åœ¨çš„ <code>constexpr</code> ç”¨æ³•ï¼Œä¹Ÿä»£è¡¨<strong>ç¼–è¯‘æœŸå¸¸æ•°</strong>ã€‚ç°åœ¨â€”â€”åœ¨æœ‰äº† <code>constexpr</code> ä¹‹åâ€”â€”æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ <code>constexpr</code> åœ¨è¿™äº›ç”¨æ³•ä¸­æ›¿æ¢ <code>const</code> äº†ã€‚ä»ç¼–è¯‘å™¨çš„è§’åº¦ï¼Œä¸ºäº†å‘åå…¼å®¹æ€§ï¼Œ<code>const</code> å’Œ <code>constexpr</code> åœ¨å¾ˆå¤šæƒ…å†µä¸‹è¿˜æ˜¯ç­‰ä»·çš„ã€‚ä½†æœ‰æ—¶å€™ï¼Œå®ƒä»¬ä¹Ÿæœ‰äº›ç»†å¾®çš„åŒºåˆ«ï¼Œå…¶ä¸­ä¹‹ä¸€ä¸ºæ˜¯å¦å†…è”çš„é—®é¢˜ã€‚</p><h3>å†…è”å˜é‡</h3><p>C++17 å¼•å…¥äº†å†…è”ï¼ˆinlineï¼‰å˜é‡çš„æ¦‚å¿µï¼Œå…è®¸åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å†…è”å˜é‡ï¼Œç„¶ååƒå†…è”å‡½æ•°ä¸€æ ·ï¼Œåªè¦æ‰€æœ‰çš„å®šä¹‰éƒ½ç›¸åŒï¼Œé‚£å˜é‡çš„å®šä¹‰å‡ºç°å¤šæ¬¡ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚å¯¹äºç±»çš„é™æ€æ•°æ®æˆå‘˜ï¼Œ<code>const</code> ç¼ºçœæ˜¯ä¸å†…è”çš„ï¼Œè€Œ <code>constexpr</code> ç¼ºçœå°±æ˜¯å†…è”çš„ã€‚è¿™ç§åŒºåˆ«åœ¨ä½ ç”¨ <code>&amp;</code> å»å–ä¸€ä¸ª <code>const int</code> å€¼çš„åœ°å€ã€æˆ–å°†å…¶ä¼ åˆ°ä¸€ä¸ªå½¢å‚ç±»å‹ä¸º <code>const int&amp;</code> çš„å‡½æ•°å»çš„æ—¶å€™ï¼ˆè¿™åœ¨ C++ æ–‡æ¡£é‡Œçš„è¡Œè¯å« ODR-useï¼‰ï¼Œå°±ä¼šä½“ç°å‡ºæ¥ã€‚</p><p>ä¸‹é¢æ˜¯ä¸ªåˆæ³•çš„å®Œæ•´ç¨‹åºï¼š</p><pre><code class=\"language-c++\">#include &lt;iostream&gt;\n\nstruct magic {\n  static const int number = 42;\n};\n\nint main()\n{\n  std::cout &lt;&lt; magic::number\n            &lt;&lt; std::endl;\n}\n</code></pre><p>æˆ‘ä»¬ç¨å¾®æ”¹ä¸€ç‚¹ï¼š</p><pre><code class=\"language-c++\">#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nstruct magic {\n  static const int number = 42;\n};\n\nint main()\n{\n  std::vector&lt;int&gt; v;\n  // è°ƒç”¨ push_back(const T&amp;)\n  v.push_back(magic::number);\n  std::cout &lt;&lt; v[0] &lt;&lt; std::endl;\n}\n</code></pre><p>ç¨‹åºåœ¨é“¾æ¥æ—¶å°±ä¼šæŠ¥é”™äº†ï¼Œè¯´æ‰¾ä¸åˆ° <code>magic::number</code>ï¼ˆæ³¨æ„ï¼šMSVC ç¼ºçœä¸æŠ¥é”™ï¼Œä½†ä½¿ç”¨æ ‡å‡†æ¨¡å¼â€”â€”<code>/Za</code> å‘½ä»¤è¡Œé€‰é¡¹â€”â€”ä¹Ÿä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼‰ã€‚è¿™æ˜¯å› ä¸º ODR-use çš„ç±»é™æ€å¸¸é‡ä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªå®šä¹‰ï¼Œåœ¨æ²¡æœ‰å†…è”å˜é‡ä¹‹å‰éœ€è¦åœ¨æŸä¸€ä¸ªæºä»£ç æ–‡ä»¶ï¼ˆéå¤´æ–‡ä»¶ï¼‰ä¸­è¿™æ ·å†™ï¼š</p><pre><code class=\"language-c++\">const int magic::number;\n</code></pre><p>å¿…é¡»æ­£æ­£å¥½å¥½ä¸€ä¸ªï¼Œå¤šäº†å°‘äº†éƒ½ä¸è¡Œï¼Œæ‰€ä»¥å« one definition ruleã€‚å†…è”å‡½æ•°ï¼Œç°åœ¨åˆæœ‰äº†å†…è”å˜é‡ï¼Œä»¥åŠæ¨¡æ¿ï¼Œåˆ™ä¸å—è¿™æ¡è§„åˆ™é™åˆ¶ã€‚</p><p>ä¿®æ­£è¿™ä¸ªé—®é¢˜çš„ç®€å•æ–¹æ³•æ˜¯æŠŠ <code>magic</code> é‡Œçš„ <code>static const</code> æ”¹æˆ <code>static constexpr</code> æˆ– <code>static inline const</code>ã€‚å‰è€…å¯è¡Œçš„åŸå› æ˜¯ï¼Œç±»çš„é™æ€ constexpr æˆå‘˜å˜é‡é»˜è®¤å°±æ˜¯å†…è”çš„ã€‚const å¸¸é‡å’Œç±»å¤–é¢çš„ constexpr å˜é‡ä¸é»˜è®¤å†…è”ï¼Œéœ€è¦æ‰‹å·¥åŠ  <code>inline</code> å…³é”®å­—æ‰ä¼šå˜æˆå†…è”ã€‚</p><h3>constexpr å˜é‡æ¨¡æ¿</h3><p>å˜é‡æ¨¡æ¿æ˜¯ C++14 å¼•å…¥çš„æ–°æ¦‚å¿µã€‚ä¹‹å‰æˆ‘ä»¬éœ€è¦ç”¨ç±»é™æ€æ•°æ®æˆå‘˜æ¥è¡¨è¾¾çš„ä¸œè¥¿ï¼Œä½¿ç”¨å˜é‡æ¨¡æ¿å¯ä»¥æ›´ç®€æ´åœ°è¡¨è¾¾ã€‚<code>constexpr</code> å¾ˆåˆé€‚ç”¨åœ¨å˜é‡æ¨¡æ¿é‡Œï¼Œè¡¨è¾¾ä¸€ä¸ªå’ŒæŸä¸ªç±»å‹ç›¸å…³çš„ç¼–è¯‘æœŸå¸¸é‡ã€‚ç”±æ­¤ï¼Œtype traits éƒ½è·å¾—äº†ä¸€ç§æ›´ç®€å•çš„è¡¨ç¤ºæ–¹å¼ã€‚å†çœ‹ä¸€ä¸‹æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/181608\">[ç¬¬ 13 è®²]</a> ç”¨è¿‡çš„ä¾‹å­ï¼š</p><pre><code class=\"language-c++\">template &lt;class T&gt;\ninline constexpr bool\n  is_trivially_destructible_v =\n    is_trivially_destructible&lt;\n      T&gt;::value;\n</code></pre><p>äº†è§£äº†å˜é‡ä¹Ÿå¯ä»¥æ˜¯æ¨¡æ¿ä¹‹åï¼Œä¸Šé¢è¿™ä¸ªä»£ç å°±å¾ˆå®¹æ˜“çœ‹æ‡‚äº†å§ï¼Ÿè¿™åªæ˜¯ä¸€ä¸ªå°å°çš„è¯­æ³•ç³–ï¼Œå…è®¸æˆ‘ä»¬æŠŠ <code>is_trivially_destructible&lt;T&gt;::value</code> å†™æˆ <code>is_trivially_destructible_v&lt;T&gt;</code>ã€‚</p><h3>constexpr å˜é‡ä»æ˜¯ const</h3><p>ä¸€ä¸ª <code>constexpr</code> å˜é‡ä»ç„¶æ˜¯ const å¸¸ç±»å‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°±åƒ <code>const char*</code> ç±»å‹æ˜¯æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆã€è‡ªèº«ä¸æ˜¯ const å¸¸é‡ä¸€æ ·ï¼Œä¸‹é¢è¿™ä¸ªè¡¨è¾¾å¼é‡Œçš„ <code>const</code> ä¹Ÿæ˜¯ä¸èƒ½ç¼ºå°‘çš„ï¼š</p><pre><code class=\"language-c++\">constexpr int a = 42;\nconstexpr const int&amp; b = a;\n</code></pre><p>ç¬¬äºŒè¡Œé‡Œï¼Œ<code>constexpr</code> è¡¨ç¤º <code>b</code> æ˜¯ä¸€ä¸ªç¼–è¯‘æœŸå¸¸é‡ï¼Œ<code>const</code> è¡¨ç¤ºè¿™ä¸ªå¼•ç”¨æ˜¯å¸¸é‡å¼•ç”¨ã€‚å»æ‰è¿™ä¸ª <code>const</code> çš„è¯ï¼Œç¼–è¯‘å™¨å°±ä¼šè®¤ä¸ºä½ æ˜¯è¯•å›¾å°†ä¸€ä¸ªæ™®é€šå¼•ç”¨ç»‘å®šåˆ°ä¸€ä¸ªå¸¸æ•°ä¸Šï¼ŒæŠ¥ä¸€ä¸ªç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ä¿¡æ¯ï¼š</p><blockquote>\n<p><strong>error:</strong> binding reference of type â€˜<strong>int&amp;</strong>â€™ to â€˜<strong>const int</strong>â€™ discards qualifiers</p>\n</blockquote><p>å¦‚æœæŒ‰ç…§ const ä½ç½®çš„è§„åˆ™ï¼Œ<code>constexpr const int&amp; b</code> å®é™…è¯¥å†™æˆ <code>const int&amp; constexpr b</code>ã€‚ä¸è¿‡ï¼Œ<code>constexpr</code> ä¸éœ€è¦åƒ <code>const</code> ä¸€æ ·æœ‰å¤æ‚çš„ç»„åˆï¼Œå› æ­¤æ°¸è¿œæ˜¯å†™åœ¨ç±»å‹å‰é¢çš„ã€‚</p><h2>constexpr æ„é€ å‡½æ•°å’Œå­—é¢ç±»å‹</h2><p>ä¸€ä¸ªåˆç†çš„ <code>constexpr</code> å‡½æ•°ï¼Œåº”å½“è‡³å°‘å¯¹äºæŸä¸€ç»„ç¼–è¯‘æœŸå¸¸é‡çš„è¾“å…¥ï¼Œèƒ½å¾—åˆ°ç¼–è¯‘æœŸå¸¸é‡çš„ç»“æœã€‚ä¸ºæ­¤ï¼Œå¯¹è¿™ä¸ªå‡½æ•°ä¹Ÿæ˜¯æœ‰äº›é™åˆ¶çš„ï¼š</p><ul>\n<li>æœ€æ—©ï¼Œ<code>constexpr</code> å‡½æ•°é‡Œè¿å¾ªç¯éƒ½ä¸èƒ½æœ‰ï¼Œä½†åœ¨ C++14 æ”¾å¼€äº†ã€‚</li>\n<li>ç›®å‰ï¼Œ<code>constexpr</code> å‡½æ•°ä»ä¸èƒ½æœ‰ <code>try â€¦ catch</code> è¯­å¥å’Œ <code>asm</code> å£°æ˜ï¼Œä½†åˆ° C++20 ä¼šæ”¾å¼€ã€‚</li>\n<li><code>constexpr</code> å‡½æ•°é‡Œä¸èƒ½ä½¿ç”¨ <code>goto</code> è¯­å¥ã€‚</li>\n<li>ç­‰ç­‰ã€‚</li>\n</ul><p>ä¸€ä¸ªæœ‰æ„æ€çš„æƒ…å†µæ˜¯ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°ã€‚å¦‚æœä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°é‡Œé¢åªåŒ…å«å¸¸é‡è¡¨è¾¾å¼ã€æ»¡è¶³å¯¹ <code>constexpr</code> å‡½æ•°çš„é™åˆ¶çš„è¯ï¼ˆè¿™ä¹Ÿæ„å‘³ç€ï¼Œé‡Œé¢ä¸å¯ä»¥æœ‰ä»»ä½•åŠ¨æ€å†…å­˜åˆ†é…ï¼‰ï¼Œå¹¶ä¸”ç±»çš„ææ„å‡½æ•°æ˜¯å¹³å‡¡çš„ï¼Œé‚£è¿™ä¸ªç±»å°±å¯ä»¥è¢«ç§°ä¸ºæ˜¯ä¸€ä¸ªå­—é¢ç±»å‹ã€‚æ¢ä¸€ä¸ªè§’åº¦æƒ³ï¼Œå¯¹ <code>constexpr</code> å‡½æ•°â€”â€”åŒ…æ‹¬å­—é¢ç±»å‹æ„é€ å‡½æ•°â€”â€”çš„è¦æ±‚æ˜¯ï¼Œå¾—è®©ç¼–è¯‘å™¨èƒ½åœ¨ç¼–è¯‘æœŸè¿›è¡Œè®¡ç®—ï¼Œè€Œä¸ä¼šäº§ç”Ÿä»»ä½•â€œå‰¯ä½œç”¨â€ï¼Œæ¯”å¦‚å†…å­˜åˆ†é…ã€è¾“å…¥ã€è¾“å‡ºç­‰ç­‰ã€‚</p><p>ä¸ºäº†å…¨é¢æ”¯æŒç¼–è¯‘æœŸè®¡ç®—ï¼ŒC++14 å¼€å§‹ï¼Œå¾ˆå¤šæ ‡å‡†ç±»çš„æ„é€ å‡½æ•°å’Œæˆå‘˜å‡½æ•°å·²ç»è¢«æ ‡ä¸º <code>constexpr</code>ï¼Œä»¥ä¾¿åœ¨ç¼–è¯‘æœŸä½¿ç”¨ã€‚å½“ç„¶ï¼Œå¤§éƒ¨åˆ†çš„å®¹å™¨ç±»ï¼Œå› ä¸ºç”¨åˆ°äº†åŠ¨æ€å†…å­˜åˆ†é…ï¼Œä¸èƒ½æˆä¸ºå­—é¢ç±»å‹ã€‚ä¸‹é¢è¿™äº›ä¸ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é…çš„å­—é¢ç±»å‹åˆ™å¯ä»¥åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼š</p><ul>\n<li><code>array</code></li>\n<li><code>initializer_list</code></li>\n<li><code>pair</code></li>\n<li><code>tuple</code></li>\n<li><code>string_view</code></li>\n<li><code>optional</code></li>\n<li><code>variant</code></li>\n<li><code>bitset</code></li>\n<li><code>complex</code></li>\n<li><code>chrono::duration</code></li>\n<li><code>chrono::time_point</code></li>\n<li>â€¦</li>\n</ul><p>ä¸‹é¢è¿™ä¸ªç©å…·ä¾‹å­ï¼Œå¯ä»¥å±•ç¤ºä¸Šé¢çš„è‹¥å¹²ç±»åŠå…¶æˆå‘˜å‡½æ•°çš„è¡Œä¸ºï¼š</p><pre><code class=\"language-c++\">#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string_view&gt;\n\nusing namespace std;\n\nint main()\n{\n  constexpr string_view sv{\"hi\"};\n  constexpr pair pr{sv[0], sv[1]};\n  constexpr array a{pr.first, pr.second};\n  constexpr int n1 = a[0];\n  constexpr int n2 = a[1];\n  cout &lt;&lt; n1 &lt;&lt; ' ' &lt;&lt; n2 &lt;&lt; '\\n';\n}\n</code></pre><p>ç¼–è¯‘å™¨å¯ä»¥åœ¨ç¼–è¯‘æœŸå³å†³å®š <code>n1</code> å’Œ <code>n2</code> çš„æ•°å€¼ï¼›ä»æœ€åç»“æœçš„è§’åº¦ï¼Œä¸Šé¢ç¨‹åºå°±æ˜¯è¾“å‡ºäº†ä¸¤ä¸ªæ•´æ•°è€Œå·²ã€‚</p><h2>if constexpr</h2><p>ä¸Šä¸€è®²çš„ç»“å°¾ï¼Œæˆ‘ä»¬ç»™å‡ºäº†ä¸€ä¸ªåœ¨ç±»å‹å‚æ•° <code>C</code> æ²¡æœ‰ <code>reserve</code> æˆå‘˜å‡½æ•°æ—¶ä¸èƒ½ç¼–è¯‘çš„ä»£ç ï¼š</p><pre><code class=\"language-c++\">template &lt;typename C, typename T&gt;\nvoid append(C&amp; container, T* ptr,\n            size_t size)\n{\n  if (has_reserve&lt;C&gt;::value) {\n    container.reserve(\n      container.size() + size);\n  }\n  for (size_t i = 0; i &lt; size;\n       ++i) {\n    container.push_back(ptr[i]);\n  }\n}\n</code></pre><p>åœ¨ C++17 é‡Œï¼Œæˆ‘ä»¬åªè¦åœ¨ <code>if</code> åé¢åŠ ä¸Š <code>constexpr</code>ï¼Œä»£ç å°±èƒ½å·¥ä½œäº† <span class=\"orange\">[2]</span>ã€‚å½“ç„¶ï¼Œå®ƒè¦æ±‚æ‹¬å·é‡Œçš„æ¡ä»¶æ˜¯ä¸ªç¼–è¯‘æœŸå¸¸é‡ã€‚æ»¡è¶³è¿™ä¸ªæ¡ä»¶åï¼Œæ ‡ç­¾åˆ†å‘ã€<code>enable_if</code> é‚£äº›æŠ€å·§å°±ä¸é‚£ä¹ˆæœ‰ç”¨äº†ã€‚æ˜¾ç„¶ï¼Œä½¿ç”¨ <code>if constexpr</code> èƒ½æ¯”ä½¿ç”¨å…¶ä»–é‚£äº›æ–¹å¼ï¼Œå†™å‡ºæ›´å¯è¯»çš„ä»£ç â€¦â€¦</p><h2>output_container.h è§£è¯»</h2><p>åˆ°äº†ä»Šå¤©ï¼Œæˆ‘ä»¬ç»ˆäºæŠŠ output_container.hï¼ˆ<span class=\"orange\">[3]</span>ï¼‰ç”¨åˆ°çš„ C++ è¯­æ³•ç‰¹æ€§éƒ½è®²è¿‡äº†ï¼Œæˆ‘ä»¬å°±æ‹¿é‡Œé¢çš„ä»£ç æ¥è®²è§£ä¸€ä¸‹ï¼Œè®©ä½ åŠ æ·±å¯¹è¿™äº›ç‰¹æ€§çš„ç†è§£ã€‚</p><pre><code class=\"language-c++\">// Type trait to detect std::pair\ntemplate &lt;typename T&gt;\nstruct is_pair : std::false_type {};\ntemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;\n  : std::true_type {};\ntemplate &lt;typename T&gt;\ninline constexpr bool is_pair_v =\n  is_pair&lt;T&gt;::value;\n</code></pre><p>è¿™æ®µä»£ç åˆ©ç”¨æ¨¡æ¿ç‰¹åŒ–ï¼ˆ<a href=\"https://time.geekbang.org/column/article/179363\">[ç¬¬ 12 è®²]</a> ã€<a href=\"https://time.geekbang.org/column/article/181636\">[ç¬¬ 14 è®²]</a>ï¼‰å’Œ <code>false_type</code>ã€<code>true_type</code> ç±»å‹ï¼ˆ<a href=\"https://time.geekbang.org/column/article/181608\">[ç¬¬ 13 è®²]</a>ï¼‰ï¼Œå®šä¹‰äº† <code>is_pair</code>ï¼Œç”¨æ¥æ£€æµ‹ä¸€ä¸ªç±»å‹æ˜¯ä¸æ˜¯ <code>pair</code>ã€‚éšåï¼Œæˆ‘ä»¬å®šä¹‰äº†å†…è” <code>constexpr</code> å˜é‡ï¼ˆæœ¬è®²ï¼‰<code>is_pair_v</code>ï¼Œç”¨æ¥ç®€åŒ–è¡¨è¾¾ã€‚</p><pre><code class=\"language-c++\">// Type trait to detect whether an\n// output function already exists\ntemplate &lt;typename T&gt;\nstruct has_output_function {\n  template &lt;class U&gt;\n  static auto output(U* ptr)\n    -&gt; decltype(\n      std::declval&lt;std::ostream&amp;&gt;()\n        &lt;&lt; *ptr,\n      std::true_type());\n  template &lt;class U&gt;\n  static std::false_type\n  output(...);\n  static constexpr bool value =\n    decltype(\n      output&lt;T&gt;(nullptr))::value;\n};\ntemplate &lt;typename T&gt;\ninline constexpr bool\n  has_output_function_v =\n    has_output_function&lt;T&gt;::value;\n</code></pre><p>è¿™æ®µä»£ç ä½¿ç”¨ SFINAE æŠ€å·§ï¼ˆ<a href=\"https://time.geekbang.org/column/article/181636\">[ç¬¬ 14 è®²]</a>ï¼‰ï¼Œæ¥æ£€æµ‹æ¨¡æ¿å‚æ•° <code>T</code> çš„å¯¹è±¡æ˜¯å¦å·²ç»å¯ä»¥ç›´æ¥è¾“å‡ºåˆ° <code>ostream</code>ã€‚ç„¶åï¼Œä¸€æ ·ç”¨ä¸€ä¸ªå†…è” <code>constexpr</code> å˜é‡æ¥ç®€åŒ–è¡¨è¾¾ã€‚</p><pre><code class=\"language-c++\">// Output function for std::pair\ntemplate &lt;typename T, typename U&gt;\nstd::ostream&amp; operator&lt;&lt;(\n  std::ostream&amp; os,\n  const std::pair&lt;T, U&gt;&amp; pr);\n</code></pre><p>å†ç„¶åæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª <code>pair</code> çš„è¾“å‡ºå‡½æ•°ï¼ˆæ ‡å‡†åº“æ²¡æœ‰æä¾›è¿™ä¸ªåŠŸèƒ½ï¼‰ã€‚æˆ‘ä»¬è¿™å„¿åªæ˜¯å£°æ˜ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬è¿™å„¿æœ‰ä¸¤ä¸ªè¾“å‡ºå‡½æ•°ï¼Œä¸”å¯èƒ½äº’ç›¸è°ƒç”¨ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦å…ˆå£°æ˜å…¶ä¸­ä¹‹ä¸€ã€‚</p><p>ä¸‹é¢ä¼šçœ‹åˆ°ï¼Œ<code>pair</code> çš„é€šç”¨è¾“å‡ºå½¢å¼æ˜¯â€œ(x, y)â€ã€‚</p><pre><code class=\"language-c++\">// Element output function for\n// containers that define a key_type\n// and have its value type as\n// std::pair\ntemplate &lt;typename T, typename Cont&gt;\nauto output_element(\n  std::ostream&amp; os,\n  const T&amp; element, const Cont&amp;,\n  const std::true_type)\n  -&gt; decltype(\n    std::declval&lt;\n      typename Cont::key_type&gt;(),\n    os);\n// Element output function for other\n// containers\ntemplate &lt;typename T, typename Cont&gt;\nauto output_element(\n  std::ostream&amp; os,\n  const T&amp; element, const Cont&amp;,\n  ...) -&gt; decltype(os);\n</code></pre><p>å¯¹äºå®¹å™¨æˆå‘˜çš„è¾“å‡ºï¼Œæˆ‘ä»¬ä¹Ÿå£°æ˜äº†ä¸¤ä¸ªä¸åŒçš„é‡è½½ã€‚æˆ‘ä»¬çš„æ„å›¾æ˜¯ï¼Œå¦‚æœå…ƒç´ çš„ç±»å‹æ˜¯ <code>pair</code> å¹¶ä¸”å®¹å™¨å®šä¹‰äº†ä¸€ä¸ª <code>key_type</code> ç±»å‹ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºé‡åˆ°äº†å…³è”å®¹å™¨ï¼Œè¾“å‡ºå½¢å¼ä¸ºâ€œx =&gt; yâ€ï¼ˆè€Œä¸æ˜¯â€œ(x, y)â€ï¼‰ã€‚</p><pre><code class=\"language-c++\">// Main output function, enabled\n// only if no output function\n// already exists\ntemplate &lt;\n  typename T,\n  typename = std::enable_if_t&lt;\n    !has_output_function_v&lt;T&gt;&gt;&gt;\nauto operator&lt;&lt;(std::ostream&amp; os,\n                const T&amp; container)\n  -&gt; decltype(container.begin(),\n              container.end(), os)\nâ€¦\n</code></pre><p>ä¸»è¾“å‡ºå‡½æ•°çš„å®šä¹‰ã€‚æ³¨æ„è¿™å„¿è¿™ä¸ªå‡½æ•°çš„å¯ç”¨æœ‰ä¸¤ä¸ªä¸åŒçš„ SFINAE æ¡ä»¶ï¼š</p><ul>\n<li>ç”¨ <code>decltype</code> è¿”å›å€¼çš„æ–¹å¼è§„å®šäº†è¢«è¾“å‡ºçš„ç±»å‹å¿…é¡»æœ‰ <code>begin()</code> å’Œ <code>end()</code> æˆå‘˜å‡½æ•°ã€‚</li>\n<li>ç”¨ <code>enable_if_t</code> è§„å®šäº†åªåœ¨è¢«è¾“å‡ºçš„ç±»å‹æ²¡æœ‰è¾“å‡ºå‡½æ•°æ—¶æ‰å¯ç”¨è¿™ä¸ªè¾“å‡ºå‡½æ•°ã€‚å¦åˆ™ï¼Œå¯¹äº <code>string</code> è¿™æ ·çš„ç±»å‹ï¼Œç¼–è¯‘å™¨å‘ç°æœ‰ä¸¤ä¸ªå¯ç”¨çš„è¾“å‡ºå‡½æ•°ï¼Œå°±ä¼šå¯¼è‡´ç¼–è¯‘å‡ºé”™ã€‚</li>\n</ul><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç”¨ <code>decltype</code> è¿”å›å€¼çš„æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä¸éœ€è¦å®šä¹‰é¢å¤–çš„æ¨¡æ¿ã€‚ä½†è¡¨è¾¾å¦å®šçš„æ¡ä»¶è¿˜æ˜¯è¦é  <code>enable_if</code>ã€‚æ­¤å¤–ï¼Œå› ä¸ºæ­¤å¤„æ˜¯éœ€è¦é¿å…æœ‰äºŒä¹‰æ€§çš„é‡è½½ï¼Œconstexpr æ¡ä»¶è¯­å¥å¸®ä¸äº†ä»€ä¹ˆå¿™ã€‚</p><pre><code class=\"language-c++\">  using element_type =\n    decay_t&lt;decltype(\n      *container.begin())&gt;;\n  constexpr bool is_char_v =\n    is_same_v&lt;element_type, char&gt;;\n  if constexpr (!is_char_v) {\n    os &lt;&lt; \"{ \";\n  }\n</code></pre><p>å¯¹éå­—ç¬¦ç±»å‹ï¼Œæˆ‘ä»¬åœ¨å¼€å§‹è¾“å‡ºæ—¶ï¼Œå…ˆè¾“å‡ºâ€œ{ â€ã€‚è¿™å„¿ä½¿ç”¨äº† <code>decay_t</code>ï¼Œæ˜¯ä¸ºäº†æŠŠç±»å‹é‡Œçš„å¼•ç”¨å’Œ const/volatile ä¿®é¥°å»æ‰ï¼Œåªå‰©ä¸‹å€¼ç±»å‹ã€‚å¦‚æœå®¹å™¨é‡Œçš„æˆå‘˜æ˜¯ <code>char</code>ï¼Œè¿™å„¿ä¼šæŠŠ <code>char&amp;</code> å’Œ <code>const char&amp;</code> è¿˜åŸæˆ <code>char</code>ã€‚</p><p>åé¢çš„ä»£ç å°±æ¯”è¾ƒç®€å•äº†ã€‚å¯èƒ½å”¯ä¸€éœ€è¦ç•™æ„çš„æ˜¯ä¸‹é¢è¿™å¥ï¼š</p><pre><code class=\"language-c++\">  output_element(\n    os, *it, container,\n    is_pair&lt;element_type&gt;());\n</code></pre><p>è¿™å„¿æˆ‘ä»¬ä½¿ç”¨äº†æ ‡ç­¾åˆ†å‘æŠ€å·§æ¥è¾“å‡ºå®¹å™¨é‡Œçš„å…ƒç´ ã€‚è¦è®°å¾—ï¼Œ<code>output_element</code> ä¸çº¯ç²¹ä½¿ç”¨æ ‡ç­¾åˆ†å‘ï¼Œè¿˜ä¼šæ£€æŸ¥å®¹å™¨æ˜¯å¦æœ‰ <code>key_type</code> æˆå‘˜ç±»å‹ã€‚</p><pre><code class=\"language-c++\">template &lt;typename T, typename Cont&gt;\nauto output_element(\n  std::ostream&amp; os,\n  const T&amp; element, const Cont&amp;,\n  const std::true_type)\n  -&gt; decltype(\n    std::declval&lt;\n      typename Cont::key_type&gt;(),\n    os)\n{\n  os &lt;&lt; element.first &lt;&lt; \" =&gt; \"\n     &lt;&lt; element.second;\n  return os;\n}\n\ntemplate &lt;typename T, typename Cont&gt;\nauto output_element(\n  std::ostream&amp; os,\n  const T&amp; element, const Cont&amp;,\n  ...) -&gt; decltype(os)\n{\n  os &lt;&lt; element;\n  return os;\n}\n</code></pre><p><code>output_element</code> çš„ä¸¤ä¸ªé‡è½½çš„å®ç°éƒ½éå¸¸ç®€å•ï¼Œåº”è¯¥ä¸éœ€è¦è§£é‡Šäº†ã€‚</p><pre><code class=\"language-c++\">template &lt;typename T, typename U&gt;\nstd::ostream&amp; operator&lt;&lt;(\n  std::ostream&amp; os,\n  const std::pair&lt;T, U&gt;&amp; pr)\n{\n  os &lt;&lt; '(' &lt;&lt; pr.first &lt;&lt; \", \"\n     &lt;&lt; pr.second &lt;&lt; ')';\n  return os;\n}\n</code></pre><p>åŒæ ·ï¼Œ<code>pair</code> çš„è¾“å‡ºçš„å®ç°ä¹Ÿéå¸¸ç®€å•ã€‚</p><p>å”¯ä¸€éœ€è¦ç•™æ„çš„ï¼Œæ˜¯ä¸Šé¢ä¸‰ä¸ªå‡½æ•°çš„è¾“å‡ºå†…å®¹å¯èƒ½è¿˜æ˜¯å®¹å™¨ï¼Œå› æ­¤æˆ‘ä»¬è¦å°†å…¶å®ç°æ”¾åœ¨åé¢ï¼Œç¡®ä¿å®ƒèƒ½çœ‹åˆ°æˆ‘ä»¬çš„é€šç”¨è¾“å‡ºå‡½æ•°ã€‚</p><p>è¦çœ‹ä¸€ä¸‹ç”¨åˆ° output_container çš„ä¾‹å­ï¼Œå¯ä»¥å›é¡¾<a href=\"https://time.geekbang.org/column/article/173167\">[ç¬¬ 4 è®²]</a> å’Œ<a href=\"https://time.geekbang.org/column/article/174434\">[ç¬¬ 5 è®²]</a>ã€‚</p><h2>å†…å®¹å°ç»“</h2><p>æœ¬è®²æˆ‘ä»¬ä»‹ç»äº†ç¼–è¯‘æœŸå¸¸é‡è¡¨è¾¾å¼å’Œç¼–è¯‘æœŸæ¡ä»¶è¯­å¥ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ç§æ–°ç‰¹æ€§å¯¹ç¼–è¯‘æœŸç¼–ç¨‹æœ‰äº†å¾ˆå¤§çš„æ”¹è¿›ï¼Œå¯ä»¥è®©ä»£ç å˜å¾—æ›´ç›´è§‚ã€‚æœ€åæˆ‘ä»¬è®¨è®ºäº†æˆ‘ä»¬ä¹‹å‰ç”¨åˆ°çš„å®¹å™¨è¾“å‡ºå‡½æ•° output_container çš„å®ç°ï¼Œé‡Œé¢ç”¨åˆ°äº†å¤šç§æˆ‘ä»¬ç›®å‰è®¨è®ºè¿‡çš„ç¼–è¯‘æœŸç¼–ç¨‹æŠ€å·§ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>è¯·ä½ ä»”ç»†æƒ³ä¸€æƒ³ï¼š</p><ol>\n<li>å¦‚æœæ²¡æœ‰ constexpr æ¡ä»¶è¯­å¥ï¼Œè¿™ä¸ªå®¹å™¨è¾“å‡ºå‡½æ•°éœ€è¦æ€æ ·å†™ï¼Ÿ</li>\n<li>è¿™ç§ä¸ä½¿ç”¨ constexpr çš„å†™æ³•æœ‰ä»€ä¹ˆæ ·çš„ç¼ºç‚¹ï¼Ÿæ¨è€Œå¹¿ä¹‹ï¼Œconstexpr æ¡ä»¶è¯­å¥çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n</ol><h2><span class=\"reference\">å‚è€ƒèµ„æ–™</span></h2><p><span class=\"reference\">[1] cppreference.com, â€œconstexpr specifierâ€. <a href=\"https://en.cppreference.com/w/cpp/language/constexpr\">https://en.cppreference.com/w/cpp/language/constexpr</a> </span></p><p><span class=\"reference\">[1a] cppreference.com, â€œconstexpr è¯´æ˜ç¬¦â€. <a href=\"https://zh.cppreference.com/w/cpp/language/constexpr\">https://zh.cppreference.com/w/cpp/language/constexpr</a> </span></p><p><span class=\"reference\">[2] cppreference.com, â€œif statementâ€, section â€œconstexpr ifâ€. <a href=\"https://en.cppreference.com/w/cpp/language/if\">https://en.cppreference.com/w/cpp/language/if</a> </span></p><p><span class=\"reference\">[2a] cppreference.com, â€œif è¯­å¥â€, â€œconstexpr ifâ€ éƒ¨åˆ†. <a href=\"https://zh.cppreference.com/w/cpp/language/if\">https://zh.cppreference.com/w/cpp/language/if</a> </span></p><p><span class=\"reference\">[3] å´å’ç‚œ, output_container. <a href=\"https://github.com/adah1972/output_container/blob/geektime/output_container.h\">https://github.com/adah1972/output_container/blob/geektime/output_container.h</a> </span></p>","comments":[{"had_liked":false,"id":167096,"user_name":"æäº®äº®","can_delete":false,"product_type":"c1","uid":1116508,"ip_address":"","ucode":"290907F930B261","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","comment_is_top":false,"comment_ctime":1577690942,"is_pvip":false,"replies":[{"id":64983,"content":"å¾ˆå°‘éœ€è¦è‡ªå·±å†™çš„ã€‚å°±åƒå­¦äº†å¾®ç§¯åˆ†å¤§éƒ¨åˆ†äººä¹Ÿæ²¡æœºä¼šç”¨ä¸€æ ·ğŸ˜‚ã€‚ä½†ä¸€ç‚¹éƒ½çœ‹ä¸æ‡‚ä¹Ÿæ˜¯ä¼šå¾ˆæœ‰é—®é¢˜çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577791811,"ip_address":"","comment_id":167096,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘è§‰å¾—æˆ‘å­¦ä¹ è¿™ä¸ªä¸“æ åªæ˜¯ä¸ºäº†èƒ½çœ‹æ‡‚è¿™äº›æ–°ç‰¹æ€§ï¼Œå†™æ˜¯å†™ä¸å‡ºæ¥ï¼Œè§„åˆ™å¤ªå¤šå¤ªå¤æ‚äº†ã€‚","like_count":12},{"had_liked":false,"id":175658,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1580791875,"is_pvip":false,"replies":[{"id":68270,"content":"å¯¹ã€‚ä¸€èˆ¬çš„ if æ˜¯è¿è¡ŒæœŸæ¡ä»¶è¯­å¥ï¼›if constexpr æ˜¯ç¼–è¯‘æœŸæ¡ä»¶è¯­å¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1580792802,"ip_address":"","comment_id":175658,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªå°ç–‘é—®ï¼Œæ–‡ä¸­æåˆ°ï¼š\n\nâ€œä¸Šä¸€è®²çš„ç»“å°¾ï¼Œæˆ‘ä»¬ç»™å‡ºäº†ä¸€ä¸ªåœ¨ç±»å‹å‚æ•° C æ²¡æœ‰ reserve æˆå‘˜å‡½æ•°æ—¶ä¸èƒ½ç¼–è¯‘çš„ä»£ç ï¼šâ€\n\n\nè¿™é‡Œæåˆ°ä½¿ç”¨ if constexprï¼Œå¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚è¿™é‡Œæ²¡æœ‰è¿‡å¤šçš„è§£é‡Šï¼Œæˆ‘ç†è§£æ˜¯ï¼šä½¿ç”¨if constexprä¹‹åï¼Œå¦‚æœæ²¡æœ‰reserveæˆå‘˜ï¼Œé‚£å°±ä¼šåœ¨ç¼–è¯‘æœŸè·³è¿‡è¿™ä¸ªifä¸­çš„å†…å®¹ï¼Œå› æ­¤ä¸ä¼šæ£€æŸ¥container.reserve()ã€‚\n\nä¸çŸ¥é“ç†è§£æ˜¯å¦æ­£ç¡®ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479743,"discussion_content":"å¾ˆå°‘éœ€è¦è‡ªå·±å†™çš„ã€‚å°±åƒå­¦äº†å¾®ç§¯åˆ†å¤§éƒ¨åˆ†äººä¹Ÿæ²¡æœºä¼šç”¨ä¸€æ ·ğŸ˜‚ã€‚ä½†ä¸€ç‚¹éƒ½çœ‹ä¸æ‡‚ä¹Ÿæ˜¯ä¼šå¾ˆæœ‰é—®é¢˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577791811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282389,"user_name":"geek","can_delete":false,"product_type":"c1","uid":2401422,"ip_address":"","ucode":"FF0845140D72A9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","comment_is_top":false,"comment_ctime":1615211943,"is_pvip":false,"replies":[{"id":102610,"content":"å—¯ã€‚å†è¡¥å……ä¸€ä¸ªï¼Œå¦‚æœä½ æœ‰nä¸ªä¸åŒçš„é™æ€æ¡ä»¶ï¼Œä½ éœ€è¦åˆ†å‘çš„å‡½æ•°æ•°é‡æ˜¯ 2^nã€‚ğŸ¤“","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1615372637,"ip_address":"","comment_id":282389,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯•ç€å›ç­”ä¸€ä¸‹ä¸¤ä¸ªæ€è€ƒé—®é¢˜ï¼š\n1 æˆ‘è®¤ä¸ºä¸ç”¨consexpr,å°±è¦ç”¨enable_ifï¼Œç±»ä¼¼äºä¸Šä¸€èŠ‚çš„appendæ–¹æ³•é‚£æ ·ï¼Œåœ¨æœ‰ä¸¤ç§å¯èƒ½æƒ…å†µæ—¶ï¼Œè¦å†™ä¸¤ä¸ªæ–¹æ³•ï¼Œåšæ ‡ç­¾åˆ†å‘ã€‚è¿™ç§æ–¹å¼çš„ä¸€ä¸ªæ¨å¹¿å°±æ˜¯ï¼šæœ‰å¤šå°‘ç§å¯èƒ½ï¼Œå°±è¦å†™å¤šå°‘ä¸ªå¯¹åº”çš„åˆ†å‘æ–¹æ³•ã€‚\n2 ä¸ç”¨constexprçš„ç¼ºç‚¹ï¼Œå°±æ˜¯ä»£ç å†—ä½™è€Œä¸”ä¸æ˜“è¯»ã€‚é‚£ä¹ˆç”¨constexprçš„ä¼˜ç‚¹å°±æ˜¯ä»£ç æ— å†—ä½™ï¼Œæ˜“è¯»ã€‚","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482846,"discussion_content":"å¯¹ã€‚ä¸€èˆ¬çš„ if æ˜¯è¿è¡ŒæœŸæ¡ä»¶è¯­å¥ï¼›if constexpr æ˜¯ç¼–è¯‘æœŸæ¡ä»¶è¯­å¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580792802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3542569,"avatar":"https://static001.geekbang.org/account/avatar/00/36/0e/29/fa3601d3.jpg","nickname":"ğŸ¶çš„å·´æ™®æ´›å¤«","note":"","ucode":"1213DD5A056674","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609054,"discussion_content":"czhåŒå­¦æŠ¥ä¸€ä¸‹å­¦å·ï¼Œç»™ä½ åŠ å¹³æ—¶åˆ†å„¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678798980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167123,"user_name":"Jerry Tan","can_delete":false,"product_type":"c1","uid":1625510,"ip_address":"","ucode":"FA93EAAF5926F2","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","comment_is_top":false,"comment_ctime":1577695975,"is_pvip":false,"replies":[{"id":64991,"content":"ç¬¬ 21 è®²ä¼šè®¨è®ºä¸€ç‚¹å·¥å…·ã€‚ä¸è¿‡ä½ æŒ‡çš„æ˜¯ä»€ä¹ˆå·¥å…·å‘¢ï¼Ÿâ€¦â€¦å¦‚æœä½ ç”¨ Windowsï¼Œå°±ä» Visual Studio çš„å…è´¹ Community ç‰ˆå¼€å§‹å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577800829,"ip_address":"","comment_id":167123,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æ‚¨å¥½è€å¸ˆ, è¯·é—®æƒ³å­¦C++ æ‚¨æœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„æ¨èçš„å¼€å‘å·¥å…·å—  è°¢è°¢ ","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516729,"discussion_content":"å—¯ã€‚å†è¡¥å……ä¸€ä¸ªï¼Œå¦‚æœä½ æœ‰nä¸ªä¸åŒçš„é™æ€æ¡ä»¶ï¼Œä½ éœ€è¦åˆ†å‘çš„å‡½æ•°æ•°é‡æ˜¯ 2^nã€‚ğŸ¤“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615372637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2401422,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","nickname":"geek","note":"","ucode":"FF0845140D72A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358497,"discussion_content":"å¥¥ï¼Œä¸åŒæ¡ä»¶çš„ç»„åˆä¼šå¯¼è‡´å¯¹åº”åˆ†å‘å‡½æ•°æ•°é‡çˆ†ç‚¸æ€§å¢é•¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615989852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334906,"user_name":"Slience-0Â°C","can_delete":false,"product_type":"c1","uid":1151612,"ip_address":"","ucode":"B50665EC6A80F5","user_header":"https://static001.geekbang.org/account/avatar/00/11/92/7c/12c571b6.jpg","comment_is_top":false,"comment_ctime":1645176364,"is_pvip":false,"replies":[{"id":122433,"content":"å¯¹ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚èƒ½ç¼–è¯‘æœŸç¡®å®šçš„ä¸œè¥¿æ‰èƒ½åšç¼–è¯‘æœŸè®¡ç®—ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1645419594,"ip_address":"","comment_id":334906,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å¸¸é‡åŒºåˆ†ç¼–è¯‘æœŸï¼Ÿå’Œè¿è¡ŒæœŸï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479752,"discussion_content":"ç¬¬ 21 è®²ä¼šè®¨è®ºä¸€ç‚¹å·¥å…·ã€‚ä¸è¿‡ä½ æŒ‡çš„æ˜¯ä»€ä¹ˆå·¥å…·å‘¢ï¼Ÿâ€¦â€¦å¦‚æœä½ ç”¨ Windowsï¼Œå°±ä» Visual Studio çš„å…è´¹ Community ç‰ˆå¼€å§‹å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577800829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625510,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","nickname":"Jerry Tan","note":"","ucode":"FA93EAAF5926F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":117215,"discussion_content":"ğŸ‘Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578102923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625510,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","nickname":"Jerry Tan","note":"","ucode":"FA93EAAF5926F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111595,"discussion_content":"å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577801154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625510,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","nickname":"Jerry Tan","note":"","ucode":"FA93EAAF5926F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111594,"discussion_content":"æˆ‘ç”¨çš„æ˜¯macpro","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577801149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1625510,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","nickname":"Jerry Tan","note":"","ucode":"FA93EAAF5926F2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111795,"discussion_content":"Xcode å’Œ CLion è¯•è¯•å•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577805126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":111594,"ip_address":"","group_id":0},"score":111795,"extra":""}]}]},{"had_liked":false,"id":334904,"user_name":"Slience-0Â°C","can_delete":false,"product_type":"c1","uid":1151612,"ip_address":"","ucode":"B50665EC6A80F5","user_header":"https://static001.geekbang.org/account/avatar/00/11/92/7c/12c571b6.jpg","comment_is_top":false,"comment_ctime":1645176259,"is_pvip":false,"replies":[{"id":122434,"content":"åƒä½ è¿™ç§ç”¨æ³•å¯ä»¥è€ƒè™‘ç”¨ std::string_viewã€‚\n\nå¯å‚è€ƒæˆ‘è¿™ä¸ªçŸ¥ä¹å›ç­”ï¼š\n\nhttps:&#47;&#47;www.zhihu.com&#47;question&#47;483774144&#47;answer&#47;2251359893","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1645639,"ctime":1645419724,"ip_address":"","comment_id":334904,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œç°ä»£C++å¦‚ä½•ä¼˜é›…çš„å®šä¹‰å­—ç¬¦ä¸²å¸¸é‡ï¼Ÿç›´æ¥ä½¿ç”¨const std::string var = &quot;xxxx &quot;æœ‰äº›é™æ€ä»£ç æ£€æŸ¥å·¥å…·ä¼šæç¤ºå¯èƒ½ä¼šæŠ›å‡ºæ— æ³•æ•è·çš„å¼‚å¸¸ï¼","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552337,"discussion_content":"å¯¹ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚èƒ½ç¼–è¯‘æœŸç¡®å®šçš„ä¸œè¥¿æ‰èƒ½åšç¼–è¯‘æœŸè®¡ç®—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645419594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290232,"user_name":"å¿ƒæ€æ­£å¸¸","can_delete":false,"product_type":"c1","uid":1688282,"ip_address":"","ucode":"02E2E67A787471","user_header":"https://static001.geekbang.org/account/avatar/00/19/c2/da/5818c896.jpg","comment_is_top":false,"comment_ctime":1619442754,"is_pvip":false,"replies":[{"id":105217,"content":"æ˜¯å¯ä»¥è¿‡çš„ã€‚åªæœ‰ç¬¬ä¸‰ä¸ªä¾‹å­ï¼Œæ¨¡æ¿å‚æ•°ï¼Œæ‰ä¼šè¦æ±‚ç‰¹åˆ«ä¸¥ã€‚\n\nä¸æ˜¯è€ƒå¤§å®¶çŸ¥é“å“ªäº›è¡Œå“ªäº›ä¸è¡Œã€‚æ­£å¦‚ä¸‹é¢å†™çš„ï¼šâ€œè¿™äº›é—®é¢˜çš„ç­”æ¡ˆä¸ç›´è§‚ã€‚â€","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1619491381,"ip_address":"","comment_id":290232,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæ–‡ç« å¼€å¤´çš„ä¸¤ä¸ªç¤ºä¾‹æˆ‘åœ¨centos8ä¸Šä½¿ç”¨g++ 8.3.1çš„ç¼–è¯‘å™¨ç¼–è¯‘é€šè¿‡äº†ï¼Œå› ä¸ºæ²¡æœ‰ç”¨åˆ°constexprçš„ç‰¹æ€§ï¼Œé¢„æœŸåœ¨int a[n]è¿™ä¸€è¡Œä¼šæŠ¥é”™ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶æ²¡æœ‰ç»™å‡ºé”™è¯¯ï¼Œè¿™æ˜¯ç¼–è¯‘å™¨åšäº†ä¼˜åŒ–å¤„ç†å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552339,"discussion_content":"åƒä½ è¿™ç§ç”¨æ³•å¯ä»¥è€ƒè™‘ç”¨ std::string_viewã€‚\n\nå¯å‚è€ƒæˆ‘è¿™ä¸ªçŸ¥ä¹å›ç­”ï¼š\n\nhttps://www.zhihu.com/question/483774144/answer/2251359893","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645419724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273512,"user_name":"æ¸…æ°´","can_delete":false,"product_type":"c1","uid":1569835,"ip_address":"","ucode":"41A8900039093A","user_header":"https://static001.geekbang.org/account/avatar/00/17/f4/2b/f74346da.jpg","comment_is_top":false,"comment_ctime":1610617992,"is_pvip":false,"replies":[{"id":99509,"content":"ç¼–è¯‘å™¨å¤ªè€ï¼Œå‡çº§åˆ°è‡³å°‘æ”¯æŒC++14çš„ç¼–è¯‘å™¨ï¼Œæ¯”å¦‚GCC 7ã€‚\n\nGCC 6ä¹Ÿè®¸ä¹Ÿå¯ä»¥ï¼Œä½†æˆ‘æ²¡æœ‰ç¯å¢ƒã€‚æ¯•ç«Ÿï¼Œç°åœ¨GCCå·²ç»å‘å¸ƒ10.2äº†ã€‚è¿™é—¨è¯¾ç¨‹æœŸæœ›ä½ ç”¨GCC 7ä»¥ä¸Šçš„ç¼–è¯‘å™¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1610885756,"ip_address":"","comment_id":273512,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œä½ å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜\n\nconstexpr int factorial(int n)\n{\n  if (n == 0) {\n    return 1;\n  } else {\n    return n * factorial(n - 1);\n  }\n}\nå¦‚æœconstexpr ä¿®é¥°å‡½æ•° è¿™æ ·æ˜¯ç¼–è¯‘ä¸è¿‡çš„ï¼Œæç¤ºnot a return-statement (è‡³å°‘c++11ä¸è¡Œ)\næ²¡æœ‰å°è¯•è¿‡æ˜¯å¦å…¶ä»–ç¼–è¯‘å™¨ å¤šè¡Œç¼–è¯‘ é€šè¿‡\nå¦‚æœä¿®æ”¹ä¸ºä¸€è¡Œè¡¨è¾¾å¼æ˜¯æ²¡é—®é¢˜çš„ï¼Œé‚£ä¹ˆè¿™æ˜¯constexprå…³é”®å­— ç”¨æ³•è¦æ±‚è¿˜æ˜¯å…¶ä»–åŸå› å¯¼è‡´ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519142,"discussion_content":"æ˜¯å¯ä»¥è¿‡çš„ã€‚åªæœ‰ç¬¬ä¸‰ä¸ªä¾‹å­ï¼Œæ¨¡æ¿å‚æ•°ï¼Œæ‰ä¼šè¦æ±‚ç‰¹åˆ«ä¸¥ã€‚\n\nä¸æ˜¯è€ƒå¤§å®¶çŸ¥é“å“ªäº›è¡Œå“ªäº›ä¸è¡Œã€‚æ­£å¦‚ä¸‹é¢å†™çš„ï¼šâ€œè¿™äº›é—®é¢˜çš„ç­”æ¡ˆä¸ç›´è§‚ã€‚â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619491381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245006,"user_name":"talor","can_delete":false,"product_type":"c1","uid":1350638,"ip_address":"","ucode":"245EE908DA39EC","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/ee/211e86cd.jpg","comment_is_top":false,"comment_ctime":1598780049,"is_pvip":false,"replies":[{"id":90197,"content":"æˆ‘å¤§æ¦‚çŸ¥é“ä½ çš„é—®é¢˜äº†ã€‚è¿™ä¸¤å¥æ˜¯ä¸èƒ½æ”¾åœ¨å‡½æ•°ä½“é‡Œçš„ã€‚constexpr å¼•ç”¨åªèƒ½ç»‘å®šåˆ°å…¨å±€å˜é‡ä¸Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1598888086,"ip_address":"","comment_id":245006,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œ\nconstexpr int a = 42;\nconstexpr const int&amp; b = a;\nè¿™ä¸ªä¾‹å­ç¼–è¯‘ä¸è¿‡ï¼Œç¼–è¯‘å™¨æ˜¯gcc 10.2.1","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513618,"discussion_content":"ç¼–è¯‘å™¨å¤ªè€ï¼Œå‡çº§åˆ°è‡³å°‘æ”¯æŒC++14çš„ç¼–è¯‘å™¨ï¼Œæ¯”å¦‚GCC 7ã€‚\n\nGCC 6ä¹Ÿè®¸ä¹Ÿå¯ä»¥ï¼Œä½†æˆ‘æ²¡æœ‰ç¯å¢ƒã€‚æ¯•ç«Ÿï¼Œç°åœ¨GCCå·²ç»å‘å¸ƒ10.2äº†ã€‚è¿™é—¨è¯¾ç¨‹æœŸæœ›ä½ ç”¨GCC 7ä»¥ä¸Šçš„ç¼–è¯‘å™¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610885756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201268,"user_name":"g_boshu","can_delete":false,"product_type":"c1","uid":1901994,"ip_address":"","ucode":"56F59C972CE7BD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIQz0Micjv7w7z4vFcXvLSSzI3dVZLBDG83zfDWhMiaQqtkHzIWWSL276GqHGBRKWrR3xP5JjmhPpnA/132","comment_is_top":false,"comment_ctime":1585742293,"is_pvip":false,"replies":[{"id":75264,"content":"æ˜¯åç‰¹åŒ–ã€‚æ²¡æœ‰è§„å®šè¯´åç‰¹åŒ–ä¸€å®šå‚æ•°æ›´å°‘å•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1585749351,"ip_address":"","comment_id":201268,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘å¯¹ä»¥ä¸‹ä»£ç æœ‰ç‚¹å„¿ç–‘æƒ‘ï¼š\n\n&#47;&#47; Type trait to detect std::pair\ntemplate &lt;typename T&gt;\nstruct is_pair : std::false_type {};\ntemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;\n  : std::true_type {};\ntemplate &lt;typename T&gt;\ninline constexpr bool is_pair_v =\n  is_pair&lt;T&gt;::value;\n\ntemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;: std::true_type {}; çœ‹ç€åº”è¯¥æ˜¯ä¸€ä¸ªåç‰¹åŒ–ï¼Œæ¨¡æ¿çš„å‚æ•°å´å˜å¤šäº†ï¼Œä¸€èˆ¬åç‰¹åŒ–ä¸åº”è¯¥æ˜¯å‚æ•°å˜å°‘å—ï¼Ÿè°¢è°¢","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504767,"discussion_content":"æˆ‘å¤§æ¦‚çŸ¥é“ä½ çš„é—®é¢˜äº†ã€‚è¿™ä¸¤å¥æ˜¯ä¸èƒ½æ”¾åœ¨å‡½æ•°ä½“é‡Œçš„ã€‚constexpr å¼•ç”¨åªèƒ½ç»‘å®šåˆ°å…¨å±€å˜é‡ä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598888086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167096,"user_name":"æäº®äº®","can_delete":false,"product_type":"c1","uid":1116508,"ip_address":"","ucode":"290907F930B261","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","comment_is_top":false,"comment_ctime":1577690942,"is_pvip":false,"replies":[{"id":64983,"content":"å¾ˆå°‘éœ€è¦è‡ªå·±å†™çš„ã€‚å°±åƒå­¦äº†å¾®ç§¯åˆ†å¤§éƒ¨åˆ†äººä¹Ÿæ²¡æœºä¼šç”¨ä¸€æ ·ğŸ˜‚ã€‚ä½†ä¸€ç‚¹éƒ½çœ‹ä¸æ‡‚ä¹Ÿæ˜¯ä¼šå¾ˆæœ‰é—®é¢˜çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577791811,"ip_address":"","comment_id":167096,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æˆ‘è§‰å¾—æˆ‘å­¦ä¹ è¿™ä¸ªä¸“æ åªæ˜¯ä¸ºäº†èƒ½çœ‹æ‡‚è¿™äº›æ–°ç‰¹æ€§ï¼Œå†™æ˜¯å†™ä¸å‡ºæ¥ï¼Œè§„åˆ™å¤ªå¤šå¤ªå¤æ‚äº†ã€‚","like_count":12,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479743,"discussion_content":"å¾ˆå°‘éœ€è¦è‡ªå·±å†™çš„ã€‚å°±åƒå­¦äº†å¾®ç§¯åˆ†å¤§éƒ¨åˆ†äººä¹Ÿæ²¡æœºä¼šç”¨ä¸€æ ·ğŸ˜‚ã€‚ä½†ä¸€ç‚¹éƒ½çœ‹ä¸æ‡‚ä¹Ÿæ˜¯ä¼šå¾ˆæœ‰é—®é¢˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577791811,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175658,"user_name":"czh","can_delete":false,"product_type":"c1","uid":1159078,"ip_address":"","ucode":"649FE5C9269D69","user_header":"https://static001.geekbang.org/account/avatar/00/11/af/a6/3f15ba2f.jpg","comment_is_top":false,"comment_ctime":1580791875,"is_pvip":false,"replies":[{"id":68270,"content":"å¯¹ã€‚ä¸€èˆ¬çš„ if æ˜¯è¿è¡ŒæœŸæ¡ä»¶è¯­å¥ï¼›if constexpr æ˜¯ç¼–è¯‘æœŸæ¡ä»¶è¯­å¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1580792802,"ip_address":"","comment_id":175658,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œæœ‰ä¸ªå°ç–‘é—®ï¼Œæ–‡ä¸­æåˆ°ï¼š\n\nâ€œä¸Šä¸€è®²çš„ç»“å°¾ï¼Œæˆ‘ä»¬ç»™å‡ºäº†ä¸€ä¸ªåœ¨ç±»å‹å‚æ•° C æ²¡æœ‰ reserve æˆå‘˜å‡½æ•°æ—¶ä¸èƒ½ç¼–è¯‘çš„ä»£ç ï¼šâ€\n\n\nè¿™é‡Œæåˆ°ä½¿ç”¨ if constexprï¼Œå¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚è¿™é‡Œæ²¡æœ‰è¿‡å¤šçš„è§£é‡Šï¼Œæˆ‘ç†è§£æ˜¯ï¼šä½¿ç”¨if constexprä¹‹åï¼Œå¦‚æœæ²¡æœ‰reserveæˆå‘˜ï¼Œé‚£å°±ä¼šåœ¨ç¼–è¯‘æœŸè·³è¿‡è¿™ä¸ªifä¸­çš„å†…å®¹ï¼Œå› æ­¤ä¸ä¼šæ£€æŸ¥container.reserve()ã€‚\n\nä¸çŸ¥é“ç†è§£æ˜¯å¦æ­£ç¡®ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482846,"discussion_content":"å¯¹ã€‚ä¸€èˆ¬çš„ if æ˜¯è¿è¡ŒæœŸæ¡ä»¶è¯­å¥ï¼›if constexpr æ˜¯ç¼–è¯‘æœŸæ¡ä»¶è¯­å¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580792802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":3542569,"avatar":"https://static001.geekbang.org/account/avatar/00/36/0e/29/fa3601d3.jpg","nickname":"ğŸ¶çš„å·´æ™®æ´›å¤«","note":"","ucode":"1213DD5A056674","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":609054,"discussion_content":"czhåŒå­¦æŠ¥ä¸€ä¸‹å­¦å·ï¼Œç»™ä½ åŠ å¹³æ—¶åˆ†å„¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1678798980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"åŒ—äº¬","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":282389,"user_name":"geek","can_delete":false,"product_type":"c1","uid":2401422,"ip_address":"","ucode":"FF0845140D72A9","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","comment_is_top":false,"comment_ctime":1615211943,"is_pvip":false,"replies":[{"id":102610,"content":"å—¯ã€‚å†è¡¥å……ä¸€ä¸ªï¼Œå¦‚æœä½ æœ‰nä¸ªä¸åŒçš„é™æ€æ¡ä»¶ï¼Œä½ éœ€è¦åˆ†å‘çš„å‡½æ•°æ•°é‡æ˜¯ 2^nã€‚ğŸ¤“","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1615372637,"ip_address":"","comment_id":282389,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯•ç€å›ç­”ä¸€ä¸‹ä¸¤ä¸ªæ€è€ƒé—®é¢˜ï¼š\n1 æˆ‘è®¤ä¸ºä¸ç”¨consexpr,å°±è¦ç”¨enable_ifï¼Œç±»ä¼¼äºä¸Šä¸€èŠ‚çš„appendæ–¹æ³•é‚£æ ·ï¼Œåœ¨æœ‰ä¸¤ç§å¯èƒ½æƒ…å†µæ—¶ï¼Œè¦å†™ä¸¤ä¸ªæ–¹æ³•ï¼Œåšæ ‡ç­¾åˆ†å‘ã€‚è¿™ç§æ–¹å¼çš„ä¸€ä¸ªæ¨å¹¿å°±æ˜¯ï¼šæœ‰å¤šå°‘ç§å¯èƒ½ï¼Œå°±è¦å†™å¤šå°‘ä¸ªå¯¹åº”çš„åˆ†å‘æ–¹æ³•ã€‚\n2 ä¸ç”¨constexprçš„ç¼ºç‚¹ï¼Œå°±æ˜¯ä»£ç å†—ä½™è€Œä¸”ä¸æ˜“è¯»ã€‚é‚£ä¹ˆç”¨constexprçš„ä¼˜ç‚¹å°±æ˜¯ä»£ç æ— å†—ä½™ï¼Œæ˜“è¯»ã€‚","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":516729,"discussion_content":"å—¯ã€‚å†è¡¥å……ä¸€ä¸ªï¼Œå¦‚æœä½ æœ‰nä¸ªä¸åŒçš„é™æ€æ¡ä»¶ï¼Œä½ éœ€è¦åˆ†å‘çš„å‡½æ•°æ•°é‡æ˜¯ 2^nã€‚ğŸ¤“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615372637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2401422,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132","nickname":"geek","note":"","ucode":"FF0845140D72A9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358497,"discussion_content":"å¥¥ï¼Œä¸åŒæ¡ä»¶çš„ç»„åˆä¼šå¯¼è‡´å¯¹åº”åˆ†å‘å‡½æ•°æ•°é‡çˆ†ç‚¸æ€§å¢é•¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615989852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167123,"user_name":"Jerry Tan","can_delete":false,"product_type":"c1","uid":1625510,"ip_address":"","ucode":"FA93EAAF5926F2","user_header":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","comment_is_top":false,"comment_ctime":1577695975,"is_pvip":false,"replies":[{"id":64991,"content":"ç¬¬ 21 è®²ä¼šè®¨è®ºä¸€ç‚¹å·¥å…·ã€‚ä¸è¿‡ä½ æŒ‡çš„æ˜¯ä»€ä¹ˆå·¥å…·å‘¢ï¼Ÿâ€¦â€¦å¦‚æœä½ ç”¨ Windowsï¼Œå°±ä» Visual Studio çš„å…è´¹ Community ç‰ˆå¼€å§‹å§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577800829,"ip_address":"","comment_id":167123,"utype":1}],"discussion_count":5,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æ‚¨å¥½è€å¸ˆ, è¯·é—®æƒ³å­¦C++ æ‚¨æœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„æ¨èçš„å¼€å‘å·¥å…·å—  è°¢è°¢ ","like_count":2,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479752,"discussion_content":"ç¬¬ 21 è®²ä¼šè®¨è®ºä¸€ç‚¹å·¥å…·ã€‚ä¸è¿‡ä½ æŒ‡çš„æ˜¯ä»€ä¹ˆå·¥å…·å‘¢ï¼Ÿâ€¦â€¦å¦‚æœä½ ç”¨ Windowsï¼Œå°±ä» Visual Studio çš„å…è´¹ Community ç‰ˆå¼€å§‹å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577800829,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625510,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","nickname":"Jerry Tan","note":"","ucode":"FA93EAAF5926F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":117215,"discussion_content":"ğŸ‘Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578102923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625510,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","nickname":"Jerry Tan","note":"","ucode":"FA93EAAF5926F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111595,"discussion_content":"å‘¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577801154,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1625510,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","nickname":"Jerry Tan","note":"","ucode":"FA93EAAF5926F2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111594,"discussion_content":"æˆ‘ç”¨çš„æ˜¯macpro","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577801149,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1625510,"avatar":"https://static001.geekbang.org/account/avatar/00/18/cd/a6/96cee976.jpg","nickname":"Jerry Tan","note":"","ucode":"FA93EAAF5926F2","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":111795,"discussion_content":"Xcode å’Œ CLion è¯•è¯•å•°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577805126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":111594,"ip_address":"","group_id":0},"score":111795,"extra":""}]}]},{"had_liked":false,"id":334906,"user_name":"Slience-0Â°C","can_delete":false,"product_type":"c1","uid":1151612,"ip_address":"","ucode":"B50665EC6A80F5","user_header":"https://static001.geekbang.org/account/avatar/00/11/92/7c/12c571b6.jpg","comment_is_top":false,"comment_ctime":1645176364,"is_pvip":false,"replies":[{"id":122433,"content":"å¯¹ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚èƒ½ç¼–è¯‘æœŸç¡®å®šçš„ä¸œè¥¿æ‰èƒ½åšç¼–è¯‘æœŸè®¡ç®—ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1645419594,"ip_address":"","comment_id":334906,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å¸¸é‡åŒºåˆ†ç¼–è¯‘æœŸï¼Ÿå’Œè¿è¡ŒæœŸï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552337,"discussion_content":"å¯¹ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚èƒ½ç¼–è¯‘æœŸç¡®å®šçš„ä¸œè¥¿æ‰èƒ½åšç¼–è¯‘æœŸè®¡ç®—ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645419594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":334904,"user_name":"Slience-0Â°C","can_delete":false,"product_type":"c1","uid":1151612,"ip_address":"","ucode":"B50665EC6A80F5","user_header":"https://static001.geekbang.org/account/avatar/00/11/92/7c/12c571b6.jpg","comment_is_top":false,"comment_ctime":1645176259,"is_pvip":false,"replies":[{"id":122434,"content":"åƒä½ è¿™ç§ç”¨æ³•å¯ä»¥è€ƒè™‘ç”¨ std::string_viewã€‚\n\nå¯å‚è€ƒæˆ‘è¿™ä¸ªçŸ¥ä¹å›ç­”ï¼š\n\nhttps:&#47;&#47;www.zhihu.com&#47;question&#47;483774144&#47;answer&#47;2251359893","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1645639,"ctime":1645419724,"ip_address":"","comment_id":334904,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œç°ä»£C++å¦‚ä½•ä¼˜é›…çš„å®šä¹‰å­—ç¬¦ä¸²å¸¸é‡ï¼Ÿç›´æ¥ä½¿ç”¨const std::string var = &quot;xxxx &quot;æœ‰äº›é™æ€ä»£ç æ£€æŸ¥å·¥å…·ä¼šæç¤ºå¯èƒ½ä¼šæŠ›å‡ºæ— æ³•æ•è·çš„å¼‚å¸¸ï¼","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552339,"discussion_content":"åƒä½ è¿™ç§ç”¨æ³•å¯ä»¥è€ƒè™‘ç”¨ std::string_viewã€‚\n\nå¯å‚è€ƒæˆ‘è¿™ä¸ªçŸ¥ä¹å›ç­”ï¼š\n\nhttps://www.zhihu.com/question/483774144/answer/2251359893","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645419724,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":290232,"user_name":"å¿ƒæ€æ­£å¸¸","can_delete":false,"product_type":"c1","uid":1688282,"ip_address":"","ucode":"02E2E67A787471","user_header":"https://static001.geekbang.org/account/avatar/00/19/c2/da/5818c896.jpg","comment_is_top":false,"comment_ctime":1619442754,"is_pvip":false,"replies":[{"id":105217,"content":"æ˜¯å¯ä»¥è¿‡çš„ã€‚åªæœ‰ç¬¬ä¸‰ä¸ªä¾‹å­ï¼Œæ¨¡æ¿å‚æ•°ï¼Œæ‰ä¼šè¦æ±‚ç‰¹åˆ«ä¸¥ã€‚\n\nä¸æ˜¯è€ƒå¤§å®¶çŸ¥é“å“ªäº›è¡Œå“ªäº›ä¸è¡Œã€‚æ­£å¦‚ä¸‹é¢å†™çš„ï¼šâ€œè¿™äº›é—®é¢˜çš„ç­”æ¡ˆä¸ç›´è§‚ã€‚â€","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1619491381,"ip_address":"","comment_id":290232,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæ–‡ç« å¼€å¤´çš„ä¸¤ä¸ªç¤ºä¾‹æˆ‘åœ¨centos8ä¸Šä½¿ç”¨g++ 8.3.1çš„ç¼–è¯‘å™¨ç¼–è¯‘é€šè¿‡äº†ï¼Œå› ä¸ºæ²¡æœ‰ç”¨åˆ°constexprçš„ç‰¹æ€§ï¼Œé¢„æœŸåœ¨int a[n]è¿™ä¸€è¡Œä¼šæŠ¥é”™ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶æ²¡æœ‰ç»™å‡ºé”™è¯¯ï¼Œè¿™æ˜¯ç¼–è¯‘å™¨åšäº†ä¼˜åŒ–å¤„ç†å—ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":519142,"discussion_content":"æ˜¯å¯ä»¥è¿‡çš„ã€‚åªæœ‰ç¬¬ä¸‰ä¸ªä¾‹å­ï¼Œæ¨¡æ¿å‚æ•°ï¼Œæ‰ä¼šè¦æ±‚ç‰¹åˆ«ä¸¥ã€‚\n\nä¸æ˜¯è€ƒå¤§å®¶çŸ¥é“å“ªäº›è¡Œå“ªäº›ä¸è¡Œã€‚æ­£å¦‚ä¸‹é¢å†™çš„ï¼šâ€œè¿™äº›é—®é¢˜çš„ç­”æ¡ˆä¸ç›´è§‚ã€‚â€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619491381,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":273512,"user_name":"æ¸…æ°´","can_delete":false,"product_type":"c1","uid":1569835,"ip_address":"","ucode":"41A8900039093A","user_header":"https://static001.geekbang.org/account/avatar/00/17/f4/2b/f74346da.jpg","comment_is_top":false,"comment_ctime":1610617992,"is_pvip":false,"replies":[{"id":99509,"content":"ç¼–è¯‘å™¨å¤ªè€ï¼Œå‡çº§åˆ°è‡³å°‘æ”¯æŒC++14çš„ç¼–è¯‘å™¨ï¼Œæ¯”å¦‚GCC 7ã€‚\n\nGCC 6ä¹Ÿè®¸ä¹Ÿå¯ä»¥ï¼Œä½†æˆ‘æ²¡æœ‰ç¯å¢ƒã€‚æ¯•ç«Ÿï¼Œç°åœ¨GCCå·²ç»å‘å¸ƒ10.2äº†ã€‚è¿™é—¨è¯¾ç¨‹æœŸæœ›ä½ ç”¨GCC 7ä»¥ä¸Šçš„ç¼–è¯‘å™¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1610885756,"ip_address":"","comment_id":273512,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œä½ å¥½ï¼Œè¯·æ•™ä¸ªé—®é¢˜\n\nconstexpr int factorial(int n)\n{\n  if (n == 0) {\n    return 1;\n  } else {\n    return n * factorial(n - 1);\n  }\n}\nå¦‚æœconstexpr ä¿®é¥°å‡½æ•° è¿™æ ·æ˜¯ç¼–è¯‘ä¸è¿‡çš„ï¼Œæç¤ºnot a return-statement (è‡³å°‘c++11ä¸è¡Œ)\næ²¡æœ‰å°è¯•è¿‡æ˜¯å¦å…¶ä»–ç¼–è¯‘å™¨ å¤šè¡Œç¼–è¯‘ é€šè¿‡\nå¦‚æœä¿®æ”¹ä¸ºä¸€è¡Œè¡¨è¾¾å¼æ˜¯æ²¡é—®é¢˜çš„ï¼Œé‚£ä¹ˆè¿™æ˜¯constexprå…³é”®å­— ç”¨æ³•è¦æ±‚è¿˜æ˜¯å…¶ä»–åŸå› å¯¼è‡´ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":513618,"discussion_content":"ç¼–è¯‘å™¨å¤ªè€ï¼Œå‡çº§åˆ°è‡³å°‘æ”¯æŒC++14çš„ç¼–è¯‘å™¨ï¼Œæ¯”å¦‚GCC 7ã€‚\n\nGCC 6ä¹Ÿè®¸ä¹Ÿå¯ä»¥ï¼Œä½†æˆ‘æ²¡æœ‰ç¯å¢ƒã€‚æ¯•ç«Ÿï¼Œç°åœ¨GCCå·²ç»å‘å¸ƒ10.2äº†ã€‚è¿™é—¨è¯¾ç¨‹æœŸæœ›ä½ ç”¨GCC 7ä»¥ä¸Šçš„ç¼–è¯‘å™¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610885756,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":245006,"user_name":"talor","can_delete":false,"product_type":"c1","uid":1350638,"ip_address":"","ucode":"245EE908DA39EC","user_header":"https://static001.geekbang.org/account/avatar/00/14/9b/ee/211e86cd.jpg","comment_is_top":false,"comment_ctime":1598780049,"is_pvip":false,"replies":[{"id":90197,"content":"æˆ‘å¤§æ¦‚çŸ¥é“ä½ çš„é—®é¢˜äº†ã€‚è¿™ä¸¤å¥æ˜¯ä¸èƒ½æ”¾åœ¨å‡½æ•°ä½“é‡Œçš„ã€‚constexpr å¼•ç”¨åªèƒ½ç»‘å®šåˆ°å…¨å±€å˜é‡ä¸Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1598888086,"ip_address":"","comment_id":245006,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"æ‚¨å¥½ï¼Œ\nconstexpr int a = 42;\nconstexpr const int&amp; b = a;\nè¿™ä¸ªä¾‹å­ç¼–è¯‘ä¸è¿‡ï¼Œç¼–è¯‘å™¨æ˜¯gcc 10.2.1","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504767,"discussion_content":"æˆ‘å¤§æ¦‚çŸ¥é“ä½ çš„é—®é¢˜äº†ã€‚è¿™ä¸¤å¥æ˜¯ä¸èƒ½æ”¾åœ¨å‡½æ•°ä½“é‡Œçš„ã€‚constexpr å¼•ç”¨åªèƒ½ç»‘å®šåˆ°å…¨å±€å˜é‡ä¸Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598888086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":201268,"user_name":"g_boshu","can_delete":false,"product_type":"c1","uid":1901994,"ip_address":"","ucode":"56F59C972CE7BD","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIQz0Micjv7w7z4vFcXvLSSzI3dVZLBDG83zfDWhMiaQqtkHzIWWSL276GqHGBRKWrR3xP5JjmhPpnA/132","comment_is_top":false,"comment_ctime":1585742293,"is_pvip":false,"replies":[{"id":75264,"content":"æ˜¯åç‰¹åŒ–ã€‚æ²¡æœ‰è§„å®šè¯´åç‰¹åŒ–ä¸€å®šå‚æ•°æ›´å°‘å•Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1585749351,"ip_address":"","comment_id":201268,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘å¯¹ä»¥ä¸‹ä»£ç æœ‰ç‚¹å„¿ç–‘æƒ‘ï¼š\n\n&#47;&#47; Type trait to detect std::pair\ntemplate &lt;typename T&gt;\nstruct is_pair : std::false_type {};\ntemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;\n  : std::true_type {};\ntemplate &lt;typename T&gt;\ninline constexpr bool is_pair_v =\n  is_pair&lt;T&gt;::value;\n\ntemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;: std::true_type {}; çœ‹ç€åº”è¯¥æ˜¯ä¸€ä¸ªåç‰¹åŒ–ï¼Œæ¨¡æ¿çš„å‚æ•°å´å˜å¤šäº†ï¼Œä¸€èˆ¬åç‰¹åŒ–ä¸åº”è¯¥æ˜¯å‚æ•°å˜å°‘å—ï¼Ÿè°¢è°¢","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490282,"discussion_content":"æ˜¯åç‰¹åŒ–ã€‚æ²¡æœ‰è§„å®šè¯´åç‰¹åŒ–ä¸€å®šå‚æ•°æ›´å°‘å•Šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585749351,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167218,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1577719632,"is_pvip":false,"replies":[{"id":64993,"content":"ä½œä¸ºç¼–è¯‘æœŸå¸¸æ•°ï¼Œæ²¡ç†ç”±è®¤ä¸ºä¸€ä¸ª constexpr å˜é‡ä¸€å®šä¼šåœ¨æ•°æ®æ®µé‡Œçš„ï¼Œå°¤å…¶æ˜¯ä¼˜åŒ–ç¼–è¯‘çš„æƒ…å†µã€‚ä¸€èˆ¬è€Œè¨€ï¼Œåªæœ‰éä¼˜åŒ–ç¼–è¯‘ã€åˆæœ‰ ODR-use æ‰èƒ½åœ¨ data æ®µé‡Œæ‰¾åˆ°å…¶å®šä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577801636,"ip_address":"","comment_id":167218,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æ–‡ä¸­ä¸€å¼€å§‹ç”¨constexpr\næ”¹é€ çš„ä¾‹å­ï¼Œä¹‹æ‰€ä»¥å¯ä»¥ï¼Œä¸€å®šæ˜¯åœ¨ä½¿ç”¨constexprçš„åœ°æ–¹â€œå°±åœ°â€è°ƒç”¨äº†èµ‹å€¼è¿ç®—ç¬¦å³ä¾§çš„å‡½æ•°ï¼Œè¿™æ ·æ‰èƒ½å¾—åˆ°ä¸€ä¸ªç¼–è¯‘æœŸçš„å¸¸é‡ï¼Œæ‰€ä»¥ï¼Œâ€œå†…è”â€æ˜¯constexprçš„åº”æœ‰ä¹‹æ„ã€‚ä½†æ˜¯åœ¨ç±»å¤–ï¼Œå¿…é¡»åŠ ä¸Šinlineæ‰å¯ä»¥ã€‚\n\nconstæœ¬è´¨æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶å¸¸é‡ï¼Œconstexpræ‰æ˜¯ç¼–è¯‘æœŸå¸¸æ•°ï¼Œé™¤äº†å†…è”å±•å¼€è¿™ä¸ªå«ä¹‰ï¼Œå†æ ¹æ®æ–‡ä¸­ODRçš„è¡¨è¿°ï¼Œè¯´æ˜constexprå˜é‡æ˜¯åˆ‡å®åˆ†é…äº†å†…å­˜ç©ºé—´çš„ï¼Œæ˜¯ä¸€ä¸ªå·¦å€¼å¯¹è±¡ã€‚ç»¼åˆä¸Šé¢çš„è€ƒè™‘ï¼Œconstexpræ„å‘³ç€è¢«å£°æ˜çš„å¯¹è±¡æ˜¯å­˜æ”¾åœ¨æ•°æ®æ®µé‡Œé¢çš„ã€‚\n\n\nconstexpr å˜é‡æ¨¡æ¿è¡¨è¾¾ä¸€ä¸ªå’ŒæŸä¸ªç±»å‹ç›¸å…³çš„ç¼–è¯‘æœŸå¸¸é‡ï¼Œè®©å˜é‡ä¹Ÿå¯ä»¥æ˜¯æ¨¡æ¿ï¼Œè¿™å¥è¯åœ¨æœ¬è¯¾ä¸­ï¼Œæˆ‘è§‰å¾—ç†è§£æˆâ€œæŠŠæ¨¡æ¿å¯¹è±¡ç”¨ä¸€ä¸ªå˜é‡å‘½åâ€æ›´åˆé€‚ï¼Œå³æŠŠæ‰€æœ‰ç¬¦å·éƒ½ç»‘å®šåˆ°äº†ä¸€ä¸ªå®ä½“ä¸Šï¼Œè¿™æ ·if constexpræ‰å˜å¾—å¯è¡Œã€‚è§£å†³äº†ä¸Šä¸€è®²ä¸­è¯´çš„c++ä¸­ä¸èƒ½åƒPythonä¸€æ ·å†™ä»£ç çš„é—®é¢˜ã€‚","like_count":1},{"had_liked":false,"id":352329,"user_name":"Chillstep","can_delete":false,"product_type":"c1","uid":3034120,"ip_address":"","ucode":"269FC6C904EC24","user_header":"https://static001.geekbang.org/account/avatar/00/2e/4c/08/96c8318a.jpg","comment_is_top":false,"comment_ctime":1658560809,"is_pvip":false,"replies":[{"id":128178,"content":"ğŸ‘Œè°¢è°¢æŠ“è™«ã€‚æˆ‘å›å¤´ä¿®æ­£ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1658575285,"ip_address":"","comment_id":352329,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¿™ä¸€æ®µæˆ‘å‘ç°æœ‰ä¸€äº›ç–‘é—®ï¼š&quot;è¿™æ˜¯å› ä¸º ODR-use çš„ç±»é™æ€å¸¸é‡ä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªå®šä¹‰ï¼Œåœ¨æ²¡æœ‰å†…è”å˜é‡ä¹‹å‰éœ€è¦åœ¨æŸä¸€ä¸ªæºä»£ç æ–‡ä»¶ï¼ˆéå¤´æ–‡ä»¶ï¼‰ä¸­è¿™æ ·å†™ï¼šconst int magic::number = 42;  &quot;è¿™ä¸€æ®µæˆ‘å®éªŒäº†ä¸‹å‘ç°å¹¶ä¸èƒ½è¿‡ç¼–è¯‘ï¼Œæˆ‘è®¤ä¸ºnumberå·²ç»æ˜¯constçš„ï¼Œåº”è¯¥æ˜¯æ²¡åŠæ³•åœ¨èµ‹å€¼çš„äº†ï¼Œè¿™é‡Œåº”è¯¥åªéœ€è¦const int magic::number;å³å¯ï¼Œè¿™æ ·æ˜¯å¯ä»¥è¿‡ç¼–è¯‘çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479785,"discussion_content":"ä½œä¸ºç¼–è¯‘æœŸå¸¸æ•°ï¼Œæ²¡ç†ç”±è®¤ä¸ºä¸€ä¸ª constexpr å˜é‡ä¸€å®šä¼šåœ¨æ•°æ®æ®µé‡Œçš„ï¼Œå°¤å…¶æ˜¯ä¼˜åŒ–ç¼–è¯‘çš„æƒ…å†µã€‚ä¸€èˆ¬è€Œè¨€ï¼Œåªæœ‰éä¼˜åŒ–ç¼–è¯‘ã€åˆæœ‰ ODR-use æ‰èƒ½åœ¨ data æ®µé‡Œæ‰¾åˆ°å…¶å®šä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577801636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316820,"user_name":"ano","can_delete":false,"product_type":"c1","uid":1783342,"ip_address":"","ucode":"7DE64BDFA78550","user_header":"https://static001.geekbang.org/account/avatar/00/1b/36/2e/376a3551.jpg","comment_is_top":false,"comment_ctime":1634559066,"is_pvip":false,"replies":[{"id":115161,"content":"æ²¡è¿™ä¹ˆç®€å•ã€‚æœ‰å¾ªç¯ä¹Ÿæœ‰å¯èƒ½ inline çš„ã€‚å„ä¸ªç¼–è¯‘å™¨çš„ç­–ç•¥å¹¶ä¸ç›¸åŒï¼Œä¼˜åŒ–çº§åˆ«ä¹Ÿä¼šäº§ç”Ÿå½±å“ã€‚\n\næ€»ä½“ä¸Šç¼–è¯‘å™¨ä¼šå¯¹ inline çš„æ•ˆæœæœ‰è‡ªå·±çš„è¯„ä¼°æ–¹å¼ï¼Œâ€œå€¼å¾—â€inline æ‰ä¼š inlineã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634909300,"ip_address":"","comment_id":316820,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ã€‚ä¸€ä¸ª function æ ‡è®°ä¸º inline, ä½†å¦‚æœ function body ä¸­æœ‰å¾ªç¯çš„è¯ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šåœ¨è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨å¤„ inline? ç¼–è¯‘å™¨æ˜¯å‡ºäºä»€ä¹ˆè€ƒè™‘ï¼Œä¸åšè¿™ä¸ª inline?","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581179,"discussion_content":"ğŸ‘Œè°¢è°¢æŠ“è™«ã€‚æˆ‘å›å¤´ä¿®æ­£ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658575285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316029,"user_name":"å¸¸æŒ¯å","can_delete":false,"product_type":"c1","uid":2062252,"ip_address":"","ucode":"D61B40E1CCEFD5","user_header":"","comment_is_top":false,"comment_ctime":1634111395,"is_pvip":false,"replies":[{"id":114527,"content":"å®ƒç»§æ‰¿è‡ª true_type æˆ– false_typeï¼Œé‚£é‡Œé¢æœ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634169503,"ip_address":"","comment_id":316029,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"\n&#47;&#47; Type trait to detect std::pair\ntemplate &lt;typename T&gt;\nstruct is_pair : std::false_type {};\ntemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;\n  : std::true_type {};\ntemplate &lt;typename T&gt;\ninline constexpr bool is_pair_v =\n  is_pair&lt;T&gt;::value;\n\nis_pairæ¨¡æ¿å¹¶æ²¡æœ‰å®šä¹‰valueæˆå‘˜å•Šï¼Œä¸ºä»€ä¹ˆå¯ä»¥::valueï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528520,"discussion_content":"æ²¡è¿™ä¹ˆç®€å•ã€‚æœ‰å¾ªç¯ä¹Ÿæœ‰å¯èƒ½ inline çš„ã€‚å„ä¸ªç¼–è¯‘å™¨çš„ç­–ç•¥å¹¶ä¸ç›¸åŒï¼Œä¼˜åŒ–çº§åˆ«ä¹Ÿä¼šäº§ç”Ÿå½±å“ã€‚\n\næ€»ä½“ä¸Šç¼–è¯‘å™¨ä¼šå¯¹ inline çš„æ•ˆæœæœ‰è‡ªå·±çš„è¯„ä¼°æ–¹å¼ï¼Œâ€œå€¼å¾—â€inline æ‰ä¼š inlineã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634909300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242287,"user_name":"yuchen","can_delete":false,"product_type":"c1","uid":1605025,"ip_address":"","ucode":"D4B55B57D218CB","user_header":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","comment_is_top":false,"comment_ctime":1597659938,"is_pvip":false,"replies":[{"id":89436,"content":"ç‰¹åŒ–å¦‚æœæ²¡æœ‰æŠŠæ‰€æœ‰çš„æ¨¡æ¿å‚æ•°å…¨éƒ¨æ¶ˆæ‰ï¼Œé‚£å°±æ˜¯åç‰¹åŒ–äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1597670026,"ip_address":"","comment_id":242287,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"template &lt;typename T&gt;\nstruct is_pair : std::false_type {};\ntemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;\n  : std::true_type {};\ntemplate &lt;typename T&gt;\ninline constexpr bool is_pair_v =\n  is_pair&lt;T&gt;::value;\nå´è€å¸ˆå¥½ï¼Œè¯·é—®è¿™é‡Œtemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;æ˜¯ç‰¹åŒ–è¿˜æ˜¯åç‰¹åŒ–å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528242,"discussion_content":"å®ƒç»§æ‰¿è‡ª true_type æˆ– false_typeï¼Œé‚£é‡Œé¢æœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634169503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235012,"user_name":"O","can_delete":false,"product_type":"c1","uid":2063412,"ip_address":"","ucode":"AE2F7E50FBD3AA","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7c/34/cd10f00b.jpg","comment_is_top":false,"comment_ctime":1594869312,"is_pvip":false,"replies":[{"id":86841,"content":"å°±æ˜¯æ ‡å‡†çš„é€’å½’è€Œå·²ï¼Œå…ˆå¤„ç†å¤–å±‚ï¼Œçœ‹åˆ°å†…å­˜æ˜¯vectorï¼Œç»§ç»­è°ƒç”¨ï¼Œç›´åˆ°å…¨éƒ¨è¾“å‡ºæˆ–é‡åˆ°æ— æ³•è¾“å‡ºçš„å†…å®¹ï¼ˆé‚£å°±ä¼šç¼–è¯‘æŠ¥é”™ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1594947939,"ip_address":"","comment_id":235012,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œæƒ³å®¹å™¨åµŒå¥—ç±»ä¼¼vector&lt;vector&lt;&gt;&gt;ä¹‹ç±»çš„ï¼Œoutputå¦‚ä½•åˆ¤æ–­","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503972,"discussion_content":"ç‰¹åŒ–å¦‚æœæ²¡æœ‰æŠŠæ‰€æœ‰çš„æ¨¡æ¿å‚æ•°å…¨éƒ¨æ¶ˆæ‰ï¼Œé‚£å°±æ˜¯åç‰¹åŒ–äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597670026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1605025,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","nickname":"yuchen","note":"","ucode":"D4B55B57D218CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299871,"discussion_content":"è°¢è°¢å´è€å¸ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597845281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182840,"user_name":"zKerry","can_delete":false,"product_type":"c1","uid":1497740,"ip_address":"","ucode":"9FB006D1A38D3F","user_header":"","comment_is_top":false,"comment_ctime":1582873823,"is_pvip":false,"replies":[{"id":70739,"content":"è°¢è°¢æŒ‡å‡ºé—®é¢˜ã€‚è¿™æ˜¯ä¿®æ”¹ä¸­å¼•å…¥çš„é—®é¢˜ã€‚å›å¤´å°±ä¿®æ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1582899403,"ip_address":"","comment_id":182840,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"\nint sqr(int n)\n{\n  return n * n;\n}\n\nint main()\n{\n  const int n = sqr(3);\n  int a[n)];\n}\nå…¶ä¸­ï¼šint a[n)] æ²¡æœ‰é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501576,"discussion_content":"å°±æ˜¯æ ‡å‡†çš„é€’å½’è€Œå·²ï¼Œå…ˆå¤„ç†å¤–å±‚ï¼Œçœ‹åˆ°å†…å­˜æ˜¯vectorï¼Œç»§ç»­è°ƒç”¨ï¼Œç›´åˆ°å…¨éƒ¨è¾“å‡ºæˆ–é‡åˆ°æ— æ³•è¾“å‡ºçš„å†…å®¹ï¼ˆé‚£å°±ä¼šç¼–è¯‘æŠ¥é”™ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594947939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169984,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1578487756,"is_pvip":false,"replies":[{"id":65978,"content":"æˆ‘å¹¶ä¸å¸Œæœ›æŠŠvector&lt;pair&lt;â€¦&gt;&gt; è¾“å‡ºæˆâ€œ=&gt;â€çš„å½¢å¼ã€‚æˆ‘è¦ä»…åœ¨è¾“å‡ºmapã€unordered_mapçš„å…ƒç´ æ—¶æ‰ä½¿ç”¨â€œ=&gt;â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578496712,"ip_address":"","comment_id":169984,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å¯¹è€å¸ˆçš„è¾“å‡ºå‡½æ•°è¿›è¡Œä¿®æ”¹ï¼šå¦‚ä¸‹\n\ntemplate&lt;typename T, typename Cont&gt;\nauto output_element(std::ostream &amp;os, const T &amp;element,\n                    const Cont &amp;)\n-&gt; typename std::enable_if&lt;is_pair&lt;typename Cont::value_type&gt;::value, bool&gt;::type {\n    os &lt;&lt; element.first &lt;&lt; &quot; =&gt; &quot; &lt;&lt; element.second;\n    return true;\n}\n\ntemplate&lt;typename T, typename Cont&gt;\nauto output_element(std::ostream &amp;os, const T &amp;element,\n                    const Cont &amp;)\n-&gt; typename std::enable_if&lt;!is_pair&lt;typename Cont::value_type&gt;::value, bool&gt;::type {\n    os &lt;&lt; element;\n    return false;\n}\n\nè°ƒç”¨å¤„ï¼š\noutput_element(os, elem, container);\n\nè¿™ä¸ªæ–¹æ³•å­¦ä¹ è‡ªè€å¸ˆä¹‹å‰è®²è¿‡çš„SFINAEï¼\n\nå¦å¤–ï¼Œé’ˆå¯¹è€å¸ˆçš„ä»£ç æœ‰äº›ç–‘é—®ï¼š\nè€å¸ˆä»£ç è°ƒç”¨å¤„ï¼š\noutput_element(os, *it, container, is_pair&lt;element_type&gt;());\nå®é™…ä¸Šåœ¨è¿™é‡Œå°±ç¡®å®šäº†element_typeæ˜¯ä¸æ˜¯pairï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œä¼ é€’è¿›å»ç›´æ¥å°±æ˜¯true_typeæˆ–è€…false_typeï¼Œé’ˆå¯¹,map&#47;vector&#47;setç­‰ç›´æ¥å°±å¯ä»¥åŒºåˆ†å¼€æ¥ï¼Œä¸éœ€è¦å†™ï¼šstd::declval&lt;typename Cont::key_type&gt;()ã€‚\nä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸å®Œæˆè¾“å‡ºçš„ï¼Œä½†æ˜¯å½“ä¼ é€’çš„æ˜¯true_typeä¸”å®¹å™¨æ²¡æœ‰key_typeçš„æ—¶å€™å°±æ˜¯SFINAEé—®é¢˜ï¼Œè°ƒç”¨å¦ä¸€ä¸ªé‡è½½å‡½æ•°ã€‚\né—®é¢˜æ˜¯ï¼Œä¸€ä¸ªå®¹å™¨å…ƒç´ æ˜¯pairï¼Œé‚£ä¹ˆis_pair&lt;element_type&gt;()å°±æ˜¯true_typeï¼Œè€Œæ—¢ç„¶æ˜¯pairäº†ï¼Œä¹Ÿå°±æœ‰äº†key_typeï¼Œæ‰€ä»¥è¿™ä¸ªå¿…ç„¶æˆç«‹ï¼Œä¹Ÿå°±æ˜¯å†™ä¸ä¸å†™éƒ½å¯ä»¥ã€‚å¦å¤–ï¼Œå½“ä¸æ˜¯pairï¼Œå°±æ˜¯false_typeï¼Œè‚¯å®šè°ƒfalse_typeçš„output_elementé‡è½½å’¯ï¼Œæ‰€ä»¥æˆ‘å¾—å‡ºè¿™é‡Œå†™è¿™ä¸ªstd::declval&lt;typename Cont::key_type&gt;()æ²¡æœ‰å•¥å­ç”¨ï¼Œå¹¶ä¸”ä»£ç æµ‹è¯•è¿‡ç¡®å®å¯ä»¥ä¸å†™ï¼Œæœ›è€å¸ˆæŒ‡ç‚¹ï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485468,"discussion_content":"è°¢è°¢æŒ‡å‡ºé—®é¢˜ã€‚è¿™æ˜¯ä¿®æ”¹ä¸­å¼•å…¥çš„é—®é¢˜ã€‚å›å¤´å°±ä¿®æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582899403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169594,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1578384976,"is_pvip":false,"replies":[{"id":65792,"content":"å…³é”®æ˜¯ä½ æ€ä¹ˆç”¨ bã€‚å¦‚æœä½ éœ€è¦å®ƒæ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Œå®ƒå°±åº”è¯¥æ˜¯ constexprã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578392824,"ip_address":"","comment_id":169594,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"constexprå˜é‡ä»æ˜¯constè¿™ä¸€å—çš„ä¾‹å­ï¼š\n```cpp\nconstexpr int a = 42;\nconstexpr const int&amp; b = a;\n```\nç¬¬äºŒè¡Œä¼šæŠ¥é”™ éœ€è¦ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼\nå»æ‰constexpræ˜¯ä¸æ˜¯æ›´å¥½ï¼Ÿ è²Œä¼¼å¯¹è¿™ä¸€å—è§£é‡Šæ²¡å½±å“ï½\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480625,"discussion_content":"å…³é”®æ˜¯ä½ æ€ä¹ˆç”¨ bã€‚å¦‚æœä½ éœ€è¦å®ƒæ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Œå®ƒå°±åº”è¯¥æ˜¯ constexprã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578392824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":168709,"user_name":"èŠ±æ™¨å°‘å¹´","can_delete":false,"product_type":"c1","uid":1098987,"ip_address":"","ucode":"6AA3537A6BA10E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","comment_is_top":false,"comment_ctime":1578145461,"is_pvip":false,"replies":[{"id":65499,"content":"å¯¹ï¼Œçº æ­£å¾—å¯¹ã€‚æˆ‘å›å¤´æ”¹ä¸€ä¸‹ã€‚\n\nèƒ½ä¸èƒ½ç¼–è¯‘æœ¬èº«ä¸æ˜¯å…³é”®ã€‚å…³é”®æ˜¯ç­”æ¡ˆä¸æ˜æ˜¾ï¼Œä¾èµ–äºä¸€äº›ç»†å¾®çš„ C++ è§„åˆ™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578222842,"ip_address":"","comment_id":168709,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"ä¸ºä»€ä¹ˆæ–‡ç« å¼€å¤´æåˆ°çš„ä¸¤ä¸ªä¾‹å­ï¼Œéƒ½æ˜¯åˆæ³•çš„å—ï¼Œç¼–è¯‘è¿è¡Œéƒ½æ²¡é—®é¢˜ã€‚\nç¬¬ä¸€ä¸ªä¾‹å­ç†æ‰€å½“ç„¶çš„åƒåº”è¯¥æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä»”ç»†æƒ³äº†ä¸‹ï¼Œä¸ºä»€ä¹ˆè¦æœ‰é—®é¢˜å‘¢ï¼Œæ•°æ®å¤§å°ä¸ºä»€ä¹ˆå°±è¦ç¼–è¯‘å™¨ç¡®å®šå‘¢ï¼Œè¿è¡ŒæœŸç¡®å®šä¸è¡Œå—ã€‚è€Œç»“æœæ˜¯ç¡®å®æ²¡æœ‰é—®é¢˜ï¼Œè¿™é‡Œé¢çš„ç„æœºæ˜¯ä»€ä¹ˆå‘¢\nç¬¬äºŒä¸ªä¾‹å­åº”è¯¥æ˜¯ int a[n];å§\nç¬¬äºŒä¸ªä¾‹å­æ˜¯å› ä¸ºconstå¸¸é‡çš„åŸå› ï¼Œç¼–è¯‘å™¨ä¼šå¼ºåˆ¶sqrå‡½æ•°ç¼–è¯‘å™¨è¿è¡Œç‰¹å®šå‚æ•°å—\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480307,"discussion_content":"å¯¹ï¼Œçº æ­£å¾—å¯¹ã€‚æˆ‘å›å¤´æ”¹ä¸€ä¸‹ã€‚\n\nèƒ½ä¸èƒ½ç¼–è¯‘æœ¬èº«ä¸æ˜¯å…³é”®ã€‚å…³é”®æ˜¯ç­”æ¡ˆä¸æ˜æ˜¾ï¼Œä¾èµ–äºä¸€äº›ç»†å¾®çš„ C++ è§„åˆ™ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578222842,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2373149,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI30dMP7aLxM3L9sUj7xK8wVAXNoDLZHAOxa6Riacvo6KnwroR3llzxhjtXCia6ichGia93Cn9NeiaJxCg/132","nickname":"Geek_01ee79","note":"","ucode":"8BD47B4D0F6964","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":363841,"discussion_content":"ç¬¬ä¸€ä¸ªæ˜¯ C99 çš„ç‰¹æ€§ Variable-length arraysï¼ŒC++ æ ‡å‡†é‡Œé¢ä¼¼ä¹æ²¡æœ‰æè¿™ä¸ªï¼Œä½†æ˜¯ g++ åæ¥ç›´æ¥æŠŠ C99 çš„ç‰¹æ€§æ”¯æŒäº†ï¼Œæ‰€ä»¥ VLA è¿™ç§åº”è¯¥æ˜¯ä¸å±äº C++ æ ‡å‡†ï¼Œä½†æ˜¯ç¼–è¯‘å™¨é€šå¸¸æä¾›äº†è¿™æ ·çš„æ‰©å±•ã€‚https://en.cppreference.com/w/c/language/array","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1617289518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167218,"user_name":"tt","can_delete":false,"product_type":"c1","uid":1489957,"ip_address":"","ucode":"7753B79AD5A9AC","user_header":"https://static001.geekbang.org/account/avatar/00/16/bc/25/1c92a90c.jpg","comment_is_top":false,"comment_ctime":1577719632,"is_pvip":false,"replies":[{"id":64993,"content":"ä½œä¸ºç¼–è¯‘æœŸå¸¸æ•°ï¼Œæ²¡ç†ç”±è®¤ä¸ºä¸€ä¸ª constexpr å˜é‡ä¸€å®šä¼šåœ¨æ•°æ®æ®µé‡Œçš„ï¼Œå°¤å…¶æ˜¯ä¼˜åŒ–ç¼–è¯‘çš„æƒ…å†µã€‚ä¸€èˆ¬è€Œè¨€ï¼Œåªæœ‰éä¼˜åŒ–ç¼–è¯‘ã€åˆæœ‰ ODR-use æ‰èƒ½åœ¨ data æ®µé‡Œæ‰¾åˆ°å…¶å®šä¹‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577801636,"ip_address":"","comment_id":167218,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"æ–‡ä¸­ä¸€å¼€å§‹ç”¨constexpr\næ”¹é€ çš„ä¾‹å­ï¼Œä¹‹æ‰€ä»¥å¯ä»¥ï¼Œä¸€å®šæ˜¯åœ¨ä½¿ç”¨constexprçš„åœ°æ–¹â€œå°±åœ°â€è°ƒç”¨äº†èµ‹å€¼è¿ç®—ç¬¦å³ä¾§çš„å‡½æ•°ï¼Œè¿™æ ·æ‰èƒ½å¾—åˆ°ä¸€ä¸ªç¼–è¯‘æœŸçš„å¸¸é‡ï¼Œæ‰€ä»¥ï¼Œâ€œå†…è”â€æ˜¯constexprçš„åº”æœ‰ä¹‹æ„ã€‚ä½†æ˜¯åœ¨ç±»å¤–ï¼Œå¿…é¡»åŠ ä¸Šinlineæ‰å¯ä»¥ã€‚\n\nconstæœ¬è´¨æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶å¸¸é‡ï¼Œconstexpræ‰æ˜¯ç¼–è¯‘æœŸå¸¸æ•°ï¼Œé™¤äº†å†…è”å±•å¼€è¿™ä¸ªå«ä¹‰ï¼Œå†æ ¹æ®æ–‡ä¸­ODRçš„è¡¨è¿°ï¼Œè¯´æ˜constexprå˜é‡æ˜¯åˆ‡å®åˆ†é…äº†å†…å­˜ç©ºé—´çš„ï¼Œæ˜¯ä¸€ä¸ªå·¦å€¼å¯¹è±¡ã€‚ç»¼åˆä¸Šé¢çš„è€ƒè™‘ï¼Œconstexpræ„å‘³ç€è¢«å£°æ˜çš„å¯¹è±¡æ˜¯å­˜æ”¾åœ¨æ•°æ®æ®µé‡Œé¢çš„ã€‚\n\n\nconstexpr å˜é‡æ¨¡æ¿è¡¨è¾¾ä¸€ä¸ªå’ŒæŸä¸ªç±»å‹ç›¸å…³çš„ç¼–è¯‘æœŸå¸¸é‡ï¼Œè®©å˜é‡ä¹Ÿå¯ä»¥æ˜¯æ¨¡æ¿ï¼Œè¿™å¥è¯åœ¨æœ¬è¯¾ä¸­ï¼Œæˆ‘è§‰å¾—ç†è§£æˆâ€œæŠŠæ¨¡æ¿å¯¹è±¡ç”¨ä¸€ä¸ªå˜é‡å‘½åâ€æ›´åˆé€‚ï¼Œå³æŠŠæ‰€æœ‰ç¬¦å·éƒ½ç»‘å®šåˆ°äº†ä¸€ä¸ªå®ä½“ä¸Šï¼Œè¿™æ ·if constexpræ‰å˜å¾—å¯è¡Œã€‚è§£å†³äº†ä¸Šä¸€è®²ä¸­è¯´çš„c++ä¸­ä¸èƒ½åƒPythonä¸€æ ·å†™ä»£ç çš„é—®é¢˜ã€‚","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479785,"discussion_content":"ä½œä¸ºç¼–è¯‘æœŸå¸¸æ•°ï¼Œæ²¡ç†ç”±è®¤ä¸ºä¸€ä¸ª constexpr å˜é‡ä¸€å®šä¼šåœ¨æ•°æ®æ®µé‡Œçš„ï¼Œå°¤å…¶æ˜¯ä¼˜åŒ–ç¼–è¯‘çš„æƒ…å†µã€‚ä¸€èˆ¬è€Œè¨€ï¼Œåªæœ‰éä¼˜åŒ–ç¼–è¯‘ã€åˆæœ‰ ODR-use æ‰èƒ½åœ¨ data æ®µé‡Œæ‰¾åˆ°å…¶å®šä¹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577801636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352329,"user_name":"Chillstep","can_delete":false,"product_type":"c1","uid":3034120,"ip_address":"","ucode":"269FC6C904EC24","user_header":"https://static001.geekbang.org/account/avatar/00/2e/4c/08/96c8318a.jpg","comment_is_top":false,"comment_ctime":1658560809,"is_pvip":false,"replies":[{"id":128178,"content":"ğŸ‘Œè°¢è°¢æŠ“è™«ã€‚æˆ‘å›å¤´ä¿®æ­£ä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç¼–è¾‘","uid":1645639,"ctime":1658575285,"ip_address":"","comment_id":352329,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œè¿™ä¸€æ®µæˆ‘å‘ç°æœ‰ä¸€äº›ç–‘é—®ï¼š&quot;è¿™æ˜¯å› ä¸º ODR-use çš„ç±»é™æ€å¸¸é‡ä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªå®šä¹‰ï¼Œåœ¨æ²¡æœ‰å†…è”å˜é‡ä¹‹å‰éœ€è¦åœ¨æŸä¸€ä¸ªæºä»£ç æ–‡ä»¶ï¼ˆéå¤´æ–‡ä»¶ï¼‰ä¸­è¿™æ ·å†™ï¼šconst int magic::number = 42;  &quot;è¿™ä¸€æ®µæˆ‘å®éªŒäº†ä¸‹å‘ç°å¹¶ä¸èƒ½è¿‡ç¼–è¯‘ï¼Œæˆ‘è®¤ä¸ºnumberå·²ç»æ˜¯constçš„ï¼Œåº”è¯¥æ˜¯æ²¡åŠæ³•åœ¨èµ‹å€¼çš„äº†ï¼Œè¿™é‡Œåº”è¯¥åªéœ€è¦const int magic::number;å³å¯ï¼Œè¿™æ ·æ˜¯å¯ä»¥è¿‡ç¼–è¯‘çš„ã€‚","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":581179,"discussion_content":"ğŸ‘Œè°¢è°¢æŠ“è™«ã€‚æˆ‘å›å¤´ä¿®æ­£ä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1658575285,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316820,"user_name":"ano","can_delete":false,"product_type":"c1","uid":1783342,"ip_address":"","ucode":"7DE64BDFA78550","user_header":"https://static001.geekbang.org/account/avatar/00/1b/36/2e/376a3551.jpg","comment_is_top":false,"comment_ctime":1634559066,"is_pvip":false,"replies":[{"id":115161,"content":"æ²¡è¿™ä¹ˆç®€å•ã€‚æœ‰å¾ªç¯ä¹Ÿæœ‰å¯èƒ½ inline çš„ã€‚å„ä¸ªç¼–è¯‘å™¨çš„ç­–ç•¥å¹¶ä¸ç›¸åŒï¼Œä¼˜åŒ–çº§åˆ«ä¹Ÿä¼šäº§ç”Ÿå½±å“ã€‚\n\næ€»ä½“ä¸Šç¼–è¯‘å™¨ä¼šå¯¹ inline çš„æ•ˆæœæœ‰è‡ªå·±çš„è¯„ä¼°æ–¹å¼ï¼Œâ€œå€¼å¾—â€inline æ‰ä¼š inlineã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634909300,"ip_address":"","comment_id":316820,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³è¯·æ•™ä¸€ä¸‹ã€‚ä¸€ä¸ª function æ ‡è®°ä¸º inline, ä½†å¦‚æœ function body ä¸­æœ‰å¾ªç¯çš„è¯ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šåœ¨è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨å¤„ inline? ç¼–è¯‘å™¨æ˜¯å‡ºäºä»€ä¹ˆè€ƒè™‘ï¼Œä¸åšè¿™ä¸ª inline?","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528520,"discussion_content":"æ²¡è¿™ä¹ˆç®€å•ã€‚æœ‰å¾ªç¯ä¹Ÿæœ‰å¯èƒ½ inline çš„ã€‚å„ä¸ªç¼–è¯‘å™¨çš„ç­–ç•¥å¹¶ä¸ç›¸åŒï¼Œä¼˜åŒ–çº§åˆ«ä¹Ÿä¼šäº§ç”Ÿå½±å“ã€‚\n\næ€»ä½“ä¸Šç¼–è¯‘å™¨ä¼šå¯¹ inline çš„æ•ˆæœæœ‰è‡ªå·±çš„è¯„ä¼°æ–¹å¼ï¼Œâ€œå€¼å¾—â€inline æ‰ä¼š inlineã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634909300,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":316029,"user_name":"å¸¸æŒ¯å","can_delete":false,"product_type":"c1","uid":2062252,"ip_address":"","ucode":"D61B40E1CCEFD5","user_header":"","comment_is_top":false,"comment_ctime":1634111395,"is_pvip":false,"replies":[{"id":114527,"content":"å®ƒç»§æ‰¿è‡ª true_type æˆ– false_typeï¼Œé‚£é‡Œé¢æœ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1634169503,"ip_address":"","comment_id":316029,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"\n&#47;&#47; Type trait to detect std::pair\ntemplate &lt;typename T&gt;\nstruct is_pair : std::false_type {};\ntemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;\n  : std::true_type {};\ntemplate &lt;typename T&gt;\ninline constexpr bool is_pair_v =\n  is_pair&lt;T&gt;::value;\n\nis_pairæ¨¡æ¿å¹¶æ²¡æœ‰å®šä¹‰valueæˆå‘˜å•Šï¼Œä¸ºä»€ä¹ˆå¯ä»¥::valueï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528242,"discussion_content":"å®ƒç»§æ‰¿è‡ª true_type æˆ– false_typeï¼Œé‚£é‡Œé¢æœ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634169503,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":242287,"user_name":"yuchen","can_delete":false,"product_type":"c1","uid":1605025,"ip_address":"","ucode":"D4B55B57D218CB","user_header":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","comment_is_top":false,"comment_ctime":1597659938,"is_pvip":false,"replies":[{"id":89436,"content":"ç‰¹åŒ–å¦‚æœæ²¡æœ‰æŠŠæ‰€æœ‰çš„æ¨¡æ¿å‚æ•°å…¨éƒ¨æ¶ˆæ‰ï¼Œé‚£å°±æ˜¯åç‰¹åŒ–äº†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1597670026,"ip_address":"","comment_id":242287,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"template &lt;typename T&gt;\nstruct is_pair : std::false_type {};\ntemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;\n  : std::true_type {};\ntemplate &lt;typename T&gt;\ninline constexpr bool is_pair_v =\n  is_pair&lt;T&gt;::value;\nå´è€å¸ˆå¥½ï¼Œè¯·é—®è¿™é‡Œtemplate &lt;typename T, typename U&gt;\nstruct is_pair&lt;std::pair&lt;T, U&gt;&gt;æ˜¯ç‰¹åŒ–è¿˜æ˜¯åç‰¹åŒ–å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":503972,"discussion_content":"ç‰¹åŒ–å¦‚æœæ²¡æœ‰æŠŠæ‰€æœ‰çš„æ¨¡æ¿å‚æ•°å…¨éƒ¨æ¶ˆæ‰ï¼Œé‚£å°±æ˜¯åç‰¹åŒ–äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597670026,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1605025,"avatar":"https://static001.geekbang.org/account/avatar/00/18/7d/a1/46c5293c.jpg","nickname":"yuchen","note":"","ucode":"D4B55B57D218CB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299871,"discussion_content":"è°¢è°¢å´è€å¸ˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597845281,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":235012,"user_name":"O","can_delete":false,"product_type":"c1","uid":2063412,"ip_address":"","ucode":"AE2F7E50FBD3AA","user_header":"https://static001.geekbang.org/account/avatar/00/1f/7c/34/cd10f00b.jpg","comment_is_top":false,"comment_ctime":1594869312,"is_pvip":false,"replies":[{"id":86841,"content":"å°±æ˜¯æ ‡å‡†çš„é€’å½’è€Œå·²ï¼Œå…ˆå¤„ç†å¤–å±‚ï¼Œçœ‹åˆ°å†…å­˜æ˜¯vectorï¼Œç»§ç»­è°ƒç”¨ï¼Œç›´åˆ°å…¨éƒ¨è¾“å‡ºæˆ–é‡åˆ°æ— æ³•è¾“å‡ºçš„å†…å®¹ï¼ˆé‚£å°±ä¼šç¼–è¯‘æŠ¥é”™ï¼‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1594947939,"ip_address":"","comment_id":235012,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œæƒ³å®¹å™¨åµŒå¥—ç±»ä¼¼vector&lt;vector&lt;&gt;&gt;ä¹‹ç±»çš„ï¼Œoutputå¦‚ä½•åˆ¤æ–­","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501576,"discussion_content":"å°±æ˜¯æ ‡å‡†çš„é€’å½’è€Œå·²ï¼Œå…ˆå¤„ç†å¤–å±‚ï¼Œçœ‹åˆ°å†…å­˜æ˜¯vectorï¼Œç»§ç»­è°ƒç”¨ï¼Œç›´åˆ°å…¨éƒ¨è¾“å‡ºæˆ–é‡åˆ°æ— æ³•è¾“å‡ºçš„å†…å®¹ï¼ˆé‚£å°±ä¼šç¼–è¯‘æŠ¥é”™ï¼‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594947939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":182840,"user_name":"zKerry","can_delete":false,"product_type":"c1","uid":1497740,"ip_address":"","ucode":"9FB006D1A38D3F","user_header":"","comment_is_top":false,"comment_ctime":1582873823,"is_pvip":false,"replies":[{"id":70739,"content":"è°¢è°¢æŒ‡å‡ºé—®é¢˜ã€‚è¿™æ˜¯ä¿®æ”¹ä¸­å¼•å…¥çš„é—®é¢˜ã€‚å›å¤´å°±ä¿®æ‰ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1582899403,"ip_address":"","comment_id":182840,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"\nint sqr(int n)\n{\n  return n * n;\n}\n\nint main()\n{\n  const int n = sqr(3);\n  int a[n)];\n}\nå…¶ä¸­ï¼šint a[n)] æ²¡æœ‰é—®é¢˜ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485468,"discussion_content":"è°¢è°¢æŒ‡å‡ºé—®é¢˜ã€‚è¿™æ˜¯ä¿®æ”¹ä¸­å¼•å…¥çš„é—®é¢˜ã€‚å›å¤´å°±ä¿®æ‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582899403,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":169984,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1578487756,"is_pvip":false,"replies":[{"id":65978,"content":"æˆ‘å¹¶ä¸å¸Œæœ›æŠŠvector&lt;pair&lt;â€¦&gt;&gt; è¾“å‡ºæˆâ€œ=&gt;â€çš„å½¢å¼ã€‚æˆ‘è¦ä»…åœ¨è¾“å‡ºmapã€unordered_mapçš„å…ƒç´ æ—¶æ‰ä½¿ç”¨â€œ=&gt;â€ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578496712,"ip_address":"","comment_id":169984,"utype":1}],"discussion_count":3,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"å¯¹è€å¸ˆçš„è¾“å‡ºå‡½æ•°è¿›è¡Œä¿®æ”¹ï¼šå¦‚ä¸‹\n\ntemplate&lt;typename T, typename Cont&gt;\nauto output_element(std::ostream &amp;os, const T &amp;element,\n                    const Cont &amp;)\n-&gt; typename std::enable_if&lt;is_pair&lt;typename Cont::value_type&gt;::value, bool&gt;::type {\n    os &lt;&lt; element.first &lt;&lt; &quot; =&gt; &quot; &lt;&lt; element.second;\n    return true;\n}\n\ntemplate&lt;typename T, typename Cont&gt;\nauto output_element(std::ostream &amp;os, const T &amp;element,\n                    const Cont &amp;)\n-&gt; typename std::enable_if&lt;!is_pair&lt;typename Cont::value_type&gt;::value, bool&gt;::type {\n    os &lt;&lt; element;\n    return false;\n}\n\nè°ƒç”¨å¤„ï¼š\noutput_element(os, elem, container);\n\nè¿™ä¸ªæ–¹æ³•å­¦ä¹ è‡ªè€å¸ˆä¹‹å‰è®²è¿‡çš„SFINAEï¼\n\nå¦å¤–ï¼Œé’ˆå¯¹è€å¸ˆçš„ä»£ç æœ‰äº›ç–‘é—®ï¼š\nè€å¸ˆä»£ç è°ƒç”¨å¤„ï¼š\noutput_element(os, *it, container, is_pair&lt;element_type&gt;());\nå®é™…ä¸Šåœ¨è¿™é‡Œå°±ç¡®å®šäº†element_typeæ˜¯ä¸æ˜¯pairï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œä¼ é€’è¿›å»ç›´æ¥å°±æ˜¯true_typeæˆ–è€…false_typeï¼Œé’ˆå¯¹,map&#47;vector&#47;setç­‰ç›´æ¥å°±å¯ä»¥åŒºåˆ†å¼€æ¥ï¼Œä¸éœ€è¦å†™ï¼šstd::declval&lt;typename Cont::key_type&gt;()ã€‚\nä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸å®Œæˆè¾“å‡ºçš„ï¼Œä½†æ˜¯å½“ä¼ é€’çš„æ˜¯true_typeä¸”å®¹å™¨æ²¡æœ‰key_typeçš„æ—¶å€™å°±æ˜¯SFINAEé—®é¢˜ï¼Œè°ƒç”¨å¦ä¸€ä¸ªé‡è½½å‡½æ•°ã€‚\né—®é¢˜æ˜¯ï¼Œä¸€ä¸ªå®¹å™¨å…ƒç´ æ˜¯pairï¼Œé‚£ä¹ˆis_pair&lt;element_type&gt;()å°±æ˜¯true_typeï¼Œè€Œæ—¢ç„¶æ˜¯pairäº†ï¼Œä¹Ÿå°±æœ‰äº†key_typeï¼Œæ‰€ä»¥è¿™ä¸ªå¿…ç„¶æˆç«‹ï¼Œä¹Ÿå°±æ˜¯å†™ä¸ä¸å†™éƒ½å¯ä»¥ã€‚å¦å¤–ï¼Œå½“ä¸æ˜¯pairï¼Œå°±æ˜¯false_typeï¼Œè‚¯å®šè°ƒfalse_typeçš„output_elementé‡è½½å’¯ï¼Œæ‰€ä»¥æˆ‘å¾—å‡ºè¿™é‡Œå†™è¿™ä¸ªstd::declval&lt;typename Cont::key_type&gt;()æ²¡æœ‰å•¥å­ç”¨ï¼Œå¹¶ä¸”ä»£ç æµ‹è¯•è¿‡ç¡®å®å¯ä»¥ä¸å†™ï¼Œæœ›è€å¸ˆæŒ‡ç‚¹ï¼","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480795,"discussion_content":"æˆ‘å¹¶ä¸å¸Œæœ›æŠŠvector&amp;lt;pair&amp;lt;â€¦&amp;gt;&amp;gt; è¾“å‡ºæˆâ€œ=&amp;gt;â€çš„å½¢å¼ã€‚æˆ‘è¦ä»…åœ¨è¾“å‡ºmapã€unordered_mapçš„å…ƒç´ æ—¶æ‰ä½¿ç”¨â€œ=&amp;gt;â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578496712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188173,"avatar":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","nickname":"å…‰åŸ~å…´","note":"","ucode":"55A0D25BFCDD47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126737,"discussion_content":"å¯¹çš„ï¼Œæˆ‘è¯•äº†çš„ï¼Œå»æ‰æ˜¯æ²¡æœ‰å½±å“çš„ï¼Œå¯¹è¿™ä¸ªç»“æœè¾“å‡ºæ²¡æœ‰å½±å“ï½ï½ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578535018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1188173,"avatar":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","nickname":"å…‰åŸ~å…´","note":"","ucode":"55A0D25BFCDD47","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":129765,"discussion_content":"æˆ‘æµ‹è¿‡çš„ï¼Œå¦‚æœæŠŠï¼š\n\ntemplate <typename T, typename Cont>\nauto output_element(std::ostream&amp; os, const T&amp; element,\n                    const Cont&amp;, const std::true_type)\n    -> decltype(std::declval<typename Cont::key_type>(), os)\n\næ”¹æˆ\n\ntemplate <typename T, typename Cont>\nstd::ostream&amp; output_element(std::ostream&amp; os, const T&amp; element,\n                             const Cont&amp;, const std::true_type)\n\né‚£ä¹ˆå¯¹äºï¼š\n\nvector<pair<int, int>> v{{1, 2}, {3, 4}};\ncout << v << endl;\n\nè¾“å‡ºå°±ä»\n\n{ (1, 2), (3, 4) }\n\nå˜æˆäº†\n\n{ 1 => 2, 3 => 4 }\n\næˆ‘å¸Œæœ›çš„æ˜¯\n\n{ (1, 2), (3, 4) }","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578736654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":126737,"ip_address":"","group_id":0},"score":129765,"extra":""}]}]},{"had_liked":false,"id":169594,"user_name":"å…‰åŸ~å…´","can_delete":false,"product_type":"c1","uid":1188173,"ip_address":"","ucode":"55A0D25BFCDD47","user_header":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","comment_is_top":false,"comment_ctime":1578384976,"is_pvip":false,"replies":[{"id":65792,"content":"å…³é”®æ˜¯ä½ æ€ä¹ˆç”¨ bã€‚å¦‚æœä½ éœ€è¦å®ƒæ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Œå®ƒå°±åº”è¯¥æ˜¯ constexprã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578392824,"ip_address":"","comment_id":169594,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"constexprå˜é‡ä»æ˜¯constè¿™ä¸€å—çš„ä¾‹å­ï¼š\n```cpp\nconstexpr int a = 42;\nconstexpr const int&amp; b = a;\n```\nç¬¬äºŒè¡Œä¼šæŠ¥é”™ éœ€è¦ä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼\nå»æ‰constexpræ˜¯ä¸æ˜¯æ›´å¥½ï¼Ÿ è²Œä¼¼å¯¹è¿™ä¸€å—è§£é‡Šæ²¡å½±å“ï½\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480795,"discussion_content":"æˆ‘å¹¶ä¸å¸Œæœ›æŠŠvector&amp;lt;pair&amp;lt;â€¦&amp;gt;&amp;gt; è¾“å‡ºæˆâ€œ=&amp;gt;â€çš„å½¢å¼ã€‚æˆ‘è¦ä»…åœ¨è¾“å‡ºmapã€unordered_mapçš„å…ƒç´ æ—¶æ‰ä½¿ç”¨â€œ=&amp;gt;â€ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578496712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188173,"avatar":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","nickname":"å…‰åŸ~å…´","note":"","ucode":"55A0D25BFCDD47","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126737,"discussion_content":"å¯¹çš„ï¼Œæˆ‘è¯•äº†çš„ï¼Œå»æ‰æ˜¯æ²¡æœ‰å½±å“çš„ï¼Œå¯¹è¿™ä¸ªç»“æœè¾“å‡ºæ²¡æœ‰å½±å“ï½ï½ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578535018,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1188173,"avatar":"https://static001.geekbang.org/account/avatar/00/12/21/4d/90ea92f8.jpg","nickname":"å…‰åŸ~å…´","note":"","ucode":"55A0D25BFCDD47","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":129765,"discussion_content":"æˆ‘æµ‹è¿‡çš„ï¼Œå¦‚æœæŠŠï¼š\n\ntemplate <typename T, typename Cont>\nauto output_element(std::ostream&amp; os, const T&amp; element,\n                    const Cont&amp;, const std::true_type)\n    -> decltype(std::declval<typename Cont::key_type>(), os)\n\næ”¹æˆ\n\ntemplate <typename T, typename Cont>\nstd::ostream&amp; output_element(std::ostream&amp; os, const T&amp; element,\n                             const Cont&amp;, const std::true_type)\n\né‚£ä¹ˆå¯¹äºï¼š\n\nvector<pair<int, int>> v{{1, 2}, {3, 4}};\ncout << v << endl;\n\nè¾“å‡ºå°±ä»\n\n{ (1, 2), (3, 4) }\n\nå˜æˆäº†\n\n{ 1 => 2, 3 => 4 }\n\næˆ‘å¸Œæœ›çš„æ˜¯\n\n{ (1, 2), (3, 4) }","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578736654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":126737,"ip_address":"","group_id":0},"score":129765,"extra":""}]}]},{"had_liked":false,"id":168709,"user_name":"èŠ±æ™¨å°‘å¹´","can_delete":false,"product_type":"c1","uid":1098987,"ip_address":"","ucode":"6AA3537A6BA10E","user_header":"https://static001.geekbang.org/account/avatar/00/10/c4/eb/2285a345.jpg","comment_is_top":false,"comment_ctime":1578145461,"is_pvip":false,"replies":[{"id":65499,"content":"å¯¹ï¼Œçº æ­£å¾—å¯¹ã€‚æˆ‘å›å¤´æ”¹ä¸€ä¸‹ã€‚\n\nèƒ½ä¸èƒ½ç¼–è¯‘æœ¬èº«ä¸æ˜¯å…³é”®ã€‚å…³é”®æ˜¯ç­”æ¡ˆä¸æ˜æ˜¾ï¼Œä¾èµ–äºä¸€äº›ç»†å¾®çš„ C++ è§„åˆ™ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1578222842,"ip_address":"","comment_id":168709,"utype":1}],"discussion_count":2,"race_medal":0,"score":3,"product_id":100040501,"comment_content":"ä¸ºä»€ä¹ˆæ–‡ç« å¼€å¤´æåˆ°çš„ä¸¤ä¸ªä¾‹å­ï¼Œéƒ½æ˜¯åˆæ³•çš„å—ï¼Œç¼–è¯‘è¿è¡Œéƒ½æ²¡é—®é¢˜ã€‚\nç¬¬ä¸€ä¸ªä¾‹å­ç†æ‰€å½“ç„¶çš„åƒåº”è¯¥æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä»”ç»†æƒ³äº†ä¸‹ï¼Œä¸ºä»€ä¹ˆè¦æœ‰é—®é¢˜å‘¢ï¼Œæ•°æ®å¤§å°ä¸ºä»€ä¹ˆå°±è¦ç¼–è¯‘å™¨ç¡®å®šå‘¢ï¼Œè¿è¡ŒæœŸç¡®å®šä¸è¡Œå—ã€‚è€Œç»“æœæ˜¯ç¡®å®æ²¡æœ‰é—®é¢˜ï¼Œè¿™é‡Œé¢çš„ç„æœºæ˜¯ä»€ä¹ˆå‘¢\nç¬¬äºŒä¸ªä¾‹å­åº”è¯¥æ˜¯ int a[n];å§\nç¬¬äºŒä¸ªä¾‹å­æ˜¯å› ä¸ºconstå¸¸é‡çš„åŸå› ï¼Œç¼–è¯‘å™¨ä¼šå¼ºåˆ¶sqrå‡½æ•°ç¼–è¯‘å™¨è¿è¡Œç‰¹å®šå‚æ•°å—\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":480625,"discussion_content":"å…³é”®æ˜¯ä½ æ€ä¹ˆç”¨ bã€‚å¦‚æœä½ éœ€è¦å®ƒæ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Œå®ƒå°±åº”è¯¥æ˜¯ constexprã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578392824,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167073,"user_name":"æ³°ä¼¦å¢","can_delete":false,"product_type":"c1","uid":1141994,"ip_address":"","ucode":"FEA6B43C8D4FF9","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/ea/e03fec22.jpg","comment_is_top":false,"comment_ctime":1577684751,"is_pvip":false,"replies":[{"id":64981,"content":"æ˜¯ï¼Œç„¶åè¦ä¹ˆä¼šæœ‰é‡å¤çš„ä»£ç ï¼Œè¦ä¹ˆå¾—å†å°è£…å‡½æ•°æ¥å¤ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577791582,"ip_address":"","comment_id":167073,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å¦‚æœæ²¡æœ‰consrexpræ¡ä»¶è¯­å¥é‚£è¾“å‡ºå‡½æ•°å°±åº”è¯¥å†™ä¸¤ä¸ªå§ï¼Œä¹Ÿæ˜¯ç”¨sfinaeï¼Œç”¨é‚£ç§enable_ifå½¢å¼ï¼Œtrue or false","like_count":0},{"had_liked":false,"id":167073,"user_name":"æ³°ä¼¦å¢","can_delete":false,"product_type":"c1","uid":1141994,"ip_address":"","ucode":"FEA6B43C8D4FF9","user_header":"https://static001.geekbang.org/account/avatar/00/11/6c/ea/e03fec22.jpg","comment_is_top":false,"comment_ctime":1577684751,"is_pvip":false,"replies":[{"id":64981,"content":"æ˜¯ï¼Œç„¶åè¦ä¹ˆä¼šæœ‰é‡å¤çš„ä»£ç ï¼Œè¦ä¹ˆå¾—å†å°è£…å‡½æ•°æ¥å¤ç”¨ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1577791582,"ip_address":"","comment_id":167073,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100040501,"comment_content":"å¦‚æœæ²¡æœ‰consrexpræ¡ä»¶è¯­å¥é‚£è¾“å‡ºå‡½æ•°å°±åº”è¯¥å†™ä¸¤ä¸ªå§ï¼Œä¹Ÿæ˜¯ç”¨sfinaeï¼Œç”¨é‚£ç§enable_ifå½¢å¼ï¼Œtrue or false","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479734,"discussion_content":"æ˜¯ï¼Œç„¶åè¦ä¹ˆä¼šæœ‰é‡å¤çš„ä»£ç ï¼Œè¦ä¹ˆå¾—å†å°è£…å‡½æ•°æ¥å¤ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577791582,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}