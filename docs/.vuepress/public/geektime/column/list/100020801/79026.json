{"id":79026,"title":"32 | ä¸ºä»€ä¹ˆè¿˜æœ‰killä¸æ‰çš„è¯­å¥ï¼Ÿ","content":"<p>åœ¨MySQLä¸­æœ‰ä¸¤ä¸ªkillå‘½ä»¤ï¼šä¸€ä¸ªæ˜¯kill query +çº¿ç¨‹idï¼Œè¡¨ç¤ºç»ˆæ­¢è¿™ä¸ªçº¿ç¨‹ä¸­æ­£åœ¨æ‰§è¡Œçš„è¯­å¥ï¼›ä¸€ä¸ªæ˜¯kill connection +çº¿ç¨‹idï¼Œè¿™é‡Œconnectionå¯ç¼ºçœï¼Œè¡¨ç¤ºæ–­å¼€è¿™ä¸ªçº¿ç¨‹çš„è¿æ¥ï¼Œå½“ç„¶å¦‚æœè¿™ä¸ªçº¿ç¨‹æœ‰è¯­å¥æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿæ˜¯è¦å…ˆåœæ­¢æ­£åœ¨æ‰§è¡Œçš„è¯­å¥çš„ã€‚</p><p>ä¸çŸ¥é“ä½ åœ¨ä½¿ç”¨MySQLçš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„ç°è±¡ï¼šä½¿ç”¨äº†killå‘½ä»¤ï¼Œå´æ²¡èƒ½æ–­å¼€è¿™ä¸ªè¿æ¥ã€‚å†æ‰§è¡Œshow processlistå‘½ä»¤ï¼Œçœ‹åˆ°è¿™æ¡è¯­å¥çš„Commandåˆ—æ˜¾ç¤ºçš„æ˜¯Killedã€‚</p><p>ä½ ä¸€å®šä¼šå¥‡æ€ªï¼Œæ˜¾ç¤ºä¸ºKilledæ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸æ˜¯åº”è¯¥ç›´æ¥åœ¨show processlistçš„ç»“æœé‡Œçœ‹ä¸åˆ°è¿™ä¸ªçº¿ç¨‹äº†å—ï¼Ÿ</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥è®¨è®ºä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p><p>å…¶å®å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œkill query/connectionå‘½ä»¤æ˜¯æœ‰æ•ˆçš„ã€‚æ¯”å¦‚ï¼Œæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°æ‰§è¡Œæ—¶é—´å¤ªä¹…ï¼Œè¦æ”¾å¼ƒç»§ç»­æŸ¥è¯¢ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”¨kill queryå‘½ä»¤ï¼Œç»ˆæ­¢è¿™æ¡æŸ¥è¯¢è¯­å¥ã€‚</p><p>è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼Œè¯­å¥å¤„äºé”ç­‰å¾…çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨killå‘½ä»¤ä¹Ÿæ˜¯æœ‰æ•ˆçš„ã€‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹è¿™ä¸ªä¾‹å­ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/17/d0/17f88dc70c3fbe06a7738a0ac01db4d0.png?wh=936*339\" alt=\"\"></p><center><span class=\"reference\">å›¾1 kill query æˆåŠŸçš„ä¾‹å­</span></center><p>å¯ä»¥çœ‹åˆ°ï¼Œsession C æ‰§è¡Œkill queryä»¥åï¼Œsession Bå‡ ä¹åŒæ—¶å°±æç¤ºäº†è¯­å¥è¢«ä¸­æ–­ã€‚è¿™ï¼Œå°±æ˜¯æˆ‘ä»¬é¢„æœŸçš„ç»“æœã€‚</p><!-- [[[read_end]]] --><h1>æ”¶åˆ°killä»¥åï¼Œçº¿ç¨‹åšä»€ä¹ˆï¼Ÿ</h1><p>ä½†æ˜¯ï¼Œè¿™é‡Œä½ è¦åœä¸‹æ¥æƒ³ä¸€ä¸‹ï¼šsession Bæ˜¯ç›´æ¥ç»ˆæ­¢æ‰çº¿ç¨‹ï¼Œä»€ä¹ˆéƒ½ä¸ç®¡å°±ç›´æ¥é€€å‡ºå—ï¼Ÿæ˜¾ç„¶ï¼Œè¿™æ˜¯ä¸è¡Œçš„ã€‚</p><p>æˆ‘åœ¨<a href=\"https://time.geekbang.org/column/article/69862\">ç¬¬6ç¯‡æ–‡ç« </a>ä¸­è®²è¿‡ï¼Œå½“å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œæ—¶ï¼Œä¼šåœ¨è¡¨ä¸ŠåŠ MDLè¯»é”ã€‚æ‰€ä»¥ï¼Œsession Bè™½ç„¶å¤„äºblockedçŠ¶æ€ï¼Œä½†è¿˜æ˜¯æ‹¿ç€ä¸€ä¸ªMDLè¯»é”çš„ã€‚å¦‚æœçº¿ç¨‹è¢«killçš„æ—¶å€™ï¼Œå°±ç›´æ¥ç»ˆæ­¢ï¼Œé‚£ä¹‹åè¿™ä¸ªMDLè¯»é”å°±æ²¡æœºä¼šè¢«é‡Šæ”¾äº†ã€‚</p><p>è¿™æ ·çœ‹æ¥ï¼Œkillå¹¶ä¸æ˜¯é©¬ä¸Šåœæ­¢çš„æ„æ€ï¼Œè€Œæ˜¯å‘Šè¯‰æ‰§è¡Œçº¿ç¨‹è¯´ï¼Œè¿™æ¡è¯­å¥å·²ç»ä¸éœ€è¦ç»§ç»­æ‰§è¡Œäº†ï¼Œå¯ä»¥å¼€å§‹â€œæ‰§è¡Œåœæ­¢çš„é€»è¾‘äº†â€ã€‚</p><blockquote>\n<p>å…¶å®ï¼Œè¿™è·ŸLinuxçš„killå‘½ä»¤ç±»ä¼¼ï¼Œkill -N pidå¹¶ä¸æ˜¯è®©è¿›ç¨‹ç›´æ¥åœæ­¢ï¼Œè€Œæ˜¯ç»™è¿›ç¨‹å‘ä¸€ä¸ªä¿¡å·ï¼Œç„¶åè¿›ç¨‹å¤„ç†è¿™ä¸ªä¿¡å·ï¼Œè¿›å…¥ç»ˆæ­¢é€»è¾‘ã€‚åªæ˜¯å¯¹äºMySQLçš„killå‘½ä»¤æ¥è¯´ï¼Œä¸éœ€è¦ä¼ ä¿¡å·é‡å‚æ•°ï¼Œå°±åªæœ‰â€œåœæ­¢â€è¿™ä¸ªå‘½ä»¤ã€‚</p>\n</blockquote><p><strong>å®ç°ä¸Šï¼Œå½“ç”¨æˆ·æ‰§è¡Œkill query thread_id_Bæ—¶ï¼ŒMySQLé‡Œå¤„ç†killå‘½ä»¤çš„çº¿ç¨‹åšäº†ä¸¤ä»¶äº‹ï¼š</strong></p><ol>\n<li>\n<p>æŠŠsession Bçš„è¿è¡ŒçŠ¶æ€æ”¹æˆTHD::KILL_QUERY(å°†å˜é‡killedèµ‹å€¼ä¸ºTHD::KILL_QUERY)ï¼›</p>\n</li>\n<li>\n<p>ç»™session Bçš„æ‰§è¡Œçº¿ç¨‹å‘ä¸€ä¸ªä¿¡å·ã€‚</p>\n</li>\n</ol><p>ä¸ºä»€ä¹ˆè¦å‘ä¿¡å·å‘¢ï¼Ÿ</p><p>å› ä¸ºåƒå›¾1çš„æˆ‘ä»¬ä¾‹å­é‡Œé¢ï¼Œsession Bå¤„äºé”ç­‰å¾…çŠ¶æ€ï¼Œå¦‚æœåªæ˜¯æŠŠsession Bçš„çº¿ç¨‹çŠ¶æ€è®¾ç½®THD::KILL_QUERYï¼Œçº¿ç¨‹Bå¹¶ä¸çŸ¥é“è¿™ä¸ªçŠ¶æ€å˜åŒ–ï¼Œè¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ã€‚å‘ä¸€ä¸ªä¿¡å·çš„ç›®çš„ï¼Œå°±æ˜¯è®©session Bé€€å‡ºç­‰å¾…ï¼Œæ¥å¤„ç†è¿™ä¸ªTHD::KILL_QUERYçŠ¶æ€ã€‚</p><p>ä¸Šé¢çš„åˆ†æä¸­ï¼Œéšå«äº†è¿™ä¹ˆä¸‰å±‚æ„æ€ï¼š</p><ol>\n<li>\n<p>ä¸€ä¸ªè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­æœ‰å¤šå¤„â€œåŸ‹ç‚¹â€ï¼Œåœ¨è¿™äº›â€œåŸ‹ç‚¹â€çš„åœ°æ–¹åˆ¤æ–­çº¿ç¨‹çŠ¶æ€ï¼Œå¦‚æœå‘ç°çº¿ç¨‹çŠ¶æ€æ˜¯THD::KILL_QUERYï¼Œæ‰å¼€å§‹è¿›å…¥è¯­å¥ç»ˆæ­¢é€»è¾‘ï¼›</p>\n</li>\n<li>\n<p>å¦‚æœå¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªå¯ä»¥è¢«å”¤é†’çš„ç­‰å¾…ï¼Œå¦åˆ™æ ¹æœ¬ä¸ä¼šæ‰§è¡Œåˆ°â€œåŸ‹ç‚¹â€å¤„ï¼›</p>\n</li>\n<li>\n<p>è¯­å¥ä»å¼€å§‹è¿›å…¥ç»ˆæ­¢é€»è¾‘ï¼Œåˆ°ç»ˆæ­¢é€»è¾‘å®Œå…¨å®Œæˆï¼Œæ˜¯æœ‰ä¸€ä¸ªè¿‡ç¨‹çš„ã€‚</p>\n</li>\n</ol><p>åˆ°è¿™é‡Œä½ å°±çŸ¥é“äº†ï¼ŒåŸæ¥ä¸æ˜¯â€œè¯´åœå°±åœçš„â€ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬<strong>å†çœ‹ä¸€ä¸ªkillä¸æ‰çš„ä¾‹å­</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨å‰é¢<a href=\"https://time.geekbang.org/column/article/78134\">ç¬¬29ç¯‡æ–‡ç« </a>ä¸­æåˆ°çš„ innodb_thread_concurrency ä¸å¤Ÿç”¨çš„ä¾‹å­ã€‚</p><p>é¦–å…ˆï¼Œæ‰§è¡Œset global innodb_thread_concurrency=2ï¼Œå°†InnoDBçš„å¹¶å‘çº¿ç¨‹ä¸Šé™æ•°è®¾ç½®ä¸º2ï¼›ç„¶åï¼Œæ‰§è¡Œä¸‹é¢çš„åºåˆ—ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/32/6e/32e4341409fabfe271db3dd4c4df696e.png?wh=936*411\" alt=\"\"></p><center><span class=\"reference\">å›¾2 kill query æ— æ•ˆçš„ä¾‹å­</span></center><p>å¯ä»¥çœ‹åˆ°ï¼š</p><ol>\n<li>\n<p>sesssion Cæ‰§è¡Œçš„æ—¶å€™è¢«å µä½äº†ï¼›</p>\n</li>\n<li>\n<p>ä½†æ˜¯session Dæ‰§è¡Œçš„kill query Cå‘½ä»¤å´æ²¡ä»€ä¹ˆæ•ˆæœï¼Œ</p>\n</li>\n<li>\n<p>ç›´åˆ°session Eæ‰§è¡Œäº†kill connectionå‘½ä»¤ï¼Œæ‰æ–­å¼€äº†session Cçš„è¿æ¥ï¼Œæç¤ºâ€œLost connection to MySQL server during queryâ€ï¼Œ</p>\n</li>\n<li>\n<p>ä½†æ˜¯è¿™æ—¶å€™ï¼Œå¦‚æœåœ¨session Eä¸­æ‰§è¡Œshow processlistï¼Œä½ å°±èƒ½çœ‹åˆ°ä¸‹é¢è¿™ä¸ªå›¾ã€‚</p>\n</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/91/53/915c20e4c11b104d7bcf9d3457304c53.png?wh=1092*221\" alt=\"\"></p><center><span class=\"reference\">å›¾3 kill connectionä¹‹åçš„æ•ˆæœ</span></center><p>è¿™æ—¶å€™ï¼Œid=12è¿™ä¸ªçº¿ç¨‹çš„Commnadåˆ—æ˜¾ç¤ºçš„æ˜¯Killedã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯è™½ç„¶æ–­å¼€äº†è¿æ¥ï¼Œä½†å®é™…ä¸ŠæœåŠ¡ç«¯ä¸Šè¿™æ¡è¯­å¥è¿˜åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ã€‚</p><p><strong>ä¸ºä»€ä¹ˆåœ¨æ‰§è¡Œkill queryå‘½ä»¤æ—¶ï¼Œè¿™æ¡è¯­å¥ä¸åƒç¬¬ä¸€ä¸ªä¾‹å­çš„updateè¯­å¥ä¸€æ ·é€€å‡ºå‘¢ï¼Ÿ</strong></p><p>åœ¨å®ç°ä¸Šï¼Œç­‰è¡Œé”æ—¶ï¼Œä½¿ç”¨çš„æ˜¯pthread_cond_timedwaitå‡½æ•°ï¼Œè¿™ä¸ªç­‰å¾…çŠ¶æ€å¯ä»¥è¢«å”¤é†’ã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ12å·çº¿ç¨‹çš„ç­‰å¾…é€»è¾‘æ˜¯è¿™æ ·çš„ï¼šæ¯10æ¯«ç§’åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å¯ä»¥è¿›å…¥InnoDBæ‰§è¡Œï¼Œå¦‚æœä¸è¡Œï¼Œå°±è°ƒç”¨nanosleepå‡½æ•°è¿›å…¥sleepçŠ¶æ€ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶12å·çº¿ç¨‹çš„çŠ¶æ€å·²ç»è¢«è®¾ç½®æˆäº†KILL_QUERYï¼Œä½†æ˜¯åœ¨è¿™ä¸ªç­‰å¾…è¿›å…¥InnoDBçš„å¾ªç¯è¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰å»åˆ¤æ–­çº¿ç¨‹çš„çŠ¶æ€ï¼Œå› æ­¤æ ¹æœ¬ä¸ä¼šè¿›å…¥ç»ˆæ­¢é€»è¾‘é˜¶æ®µã€‚</p><p>è€Œå½“session Eæ‰§è¡Œkill connection å‘½ä»¤æ—¶ï¼Œæ˜¯è¿™ä¹ˆåšçš„ï¼Œ</p><ol>\n<li>\n<p>æŠŠ12å·çº¿ç¨‹çŠ¶æ€è®¾ç½®ä¸ºKILL_CONNECTIONï¼›</p>\n</li>\n<li>\n<p>å…³æ‰12å·çº¿ç¨‹çš„ç½‘ç»œè¿æ¥ã€‚å› ä¸ºæœ‰è¿™ä¸ªæ“ä½œï¼Œæ‰€ä»¥ä½ ä¼šçœ‹åˆ°ï¼Œè¿™æ—¶å€™session Cæ”¶åˆ°äº†æ–­å¼€è¿æ¥çš„æç¤ºã€‚</p>\n</li>\n</ol><p>é‚£ä¸ºä»€ä¹ˆæ‰§è¡Œshow processlistçš„æ—¶å€™ï¼Œä¼šçœ‹åˆ°Commandåˆ—æ˜¾ç¤ºä¸ºkilledå‘¢ï¼Ÿå…¶å®ï¼Œè¿™å°±æ˜¯å› ä¸ºåœ¨æ‰§è¡Œshow processlistçš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªç‰¹åˆ«çš„é€»è¾‘ï¼š</p><pre><code>å¦‚æœä¸€ä¸ªçº¿ç¨‹çš„çŠ¶æ€æ˜¯KILL_CONNECTIONï¼Œå°±æŠŠCommandåˆ—æ˜¾ç¤ºæˆKilledã€‚\n</code></pre><p>æ‰€ä»¥å…¶å®ï¼Œå³ä½¿æ˜¯å®¢æˆ·ç«¯é€€å‡ºäº†ï¼Œè¿™ä¸ªçº¿ç¨‹çš„çŠ¶æ€ä»ç„¶æ˜¯åœ¨ç­‰å¾…ä¸­ã€‚é‚£è¿™ä¸ªçº¿ç¨‹ä»€ä¹ˆæ—¶å€™ä¼šé€€å‡ºå‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼Œåªæœ‰ç­‰åˆ°æ»¡è¶³è¿›å…¥InnoDBçš„æ¡ä»¶åï¼Œsession Cçš„æŸ¥è¯¢è¯­å¥ç»§ç»­æ‰§è¡Œï¼Œç„¶åæ‰æœ‰å¯èƒ½åˆ¤æ–­åˆ°çº¿ç¨‹çŠ¶æ€å·²ç»å˜æˆäº†KILL_QUERYæˆ–è€…KILL_CONNECTIONï¼Œå†è¿›å…¥ç»ˆæ­¢é€»è¾‘é˜¶æ®µã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ¥å°ç»“ä¸€ä¸‹ã€‚</p><p><strong>è¿™ä¸ªä¾‹å­æ˜¯killæ— æ•ˆçš„ç¬¬ä¸€ç±»æƒ…å†µï¼Œå³ï¼šçº¿ç¨‹æ²¡æœ‰æ‰§è¡Œåˆ°åˆ¤æ–­çº¿ç¨‹çŠ¶æ€çš„é€»è¾‘ã€‚</strong>è·Ÿè¿™ç§æƒ…å†µç›¸åŒçš„ï¼Œè¿˜æœ‰ç”±äºIOå‹åŠ›è¿‡å¤§ï¼Œè¯»å†™IOçš„å‡½æ•°ä¸€ç›´æ— æ³•è¿”å›ï¼Œå¯¼è‡´ä¸èƒ½åŠæ—¶åˆ¤æ–­çº¿ç¨‹çš„çŠ¶æ€ã€‚</p><p><strong>å¦ä¸€ç±»æƒ…å†µæ˜¯ï¼Œç»ˆæ­¢é€»è¾‘è€—æ—¶è¾ƒé•¿ã€‚</strong>è¿™æ—¶å€™ï¼Œä»show processlistç»“æœä¸Šçœ‹ä¹Ÿæ˜¯Command=Killedï¼Œéœ€è¦ç­‰åˆ°ç»ˆæ­¢é€»è¾‘å®Œæˆï¼Œè¯­å¥æ‰ç®—çœŸæ­£å®Œæˆã€‚è¿™ç±»æƒ…å†µï¼Œæ¯”è¾ƒå¸¸è§çš„åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol>\n<li>\n<p>è¶…å¤§äº‹åŠ¡æ‰§è¡ŒæœŸé—´è¢«killã€‚è¿™æ—¶å€™ï¼Œå›æ»šæ“ä½œéœ€è¦å¯¹äº‹åŠ¡æ‰§è¡ŒæœŸé—´ç”Ÿæˆçš„æ‰€æœ‰æ–°æ•°æ®ç‰ˆæœ¬åšå›æ”¶æ“ä½œï¼Œè€—æ—¶å¾ˆé•¿ã€‚</p>\n</li>\n<li>\n<p>å¤§æŸ¥è¯¢å›æ»šã€‚å¦‚æœæŸ¥è¯¢è¿‡ç¨‹ä¸­ç”Ÿæˆäº†æ¯”è¾ƒå¤§çš„ä¸´æ—¶æ–‡ä»¶ï¼ŒåŠ ä¸Šæ­¤æ—¶æ–‡ä»¶ç³»ç»Ÿå‹åŠ›å¤§ï¼Œåˆ é™¤ä¸´æ—¶æ–‡ä»¶å¯èƒ½éœ€è¦ç­‰å¾…IOèµ„æºï¼Œå¯¼è‡´è€—æ—¶è¾ƒé•¿ã€‚</p>\n</li>\n<li>\n<p>DDLå‘½ä»¤æ‰§è¡Œåˆ°æœ€åé˜¶æ®µï¼Œå¦‚æœè¢«killï¼Œéœ€è¦åˆ é™¤ä¸­é—´è¿‡ç¨‹çš„ä¸´æ—¶æ–‡ä»¶ï¼Œä¹Ÿå¯èƒ½å—IOèµ„æºå½±å“è€—æ—¶è¾ƒä¹…ã€‚</p>\n</li>\n</ol><p>ä¹‹å‰æœ‰äººé—®è¿‡æˆ‘ï¼Œå¦‚æœç›´æ¥åœ¨å®¢æˆ·ç«¯é€šè¿‡Ctrl+Cå‘½ä»¤ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥ç›´æ¥ç»ˆæ­¢çº¿ç¨‹å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼Œä¸å¯ä»¥ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªè¯¯è§£ï¼Œå…¶å®åœ¨å®¢æˆ·ç«¯çš„æ“ä½œåªèƒ½æ“ä½œåˆ°å®¢æˆ·ç«¯çš„çº¿ç¨‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åªèƒ½é€šè¿‡ç½‘ç»œäº¤äº’ï¼Œæ˜¯ä¸å¯èƒ½ç›´æ¥æ“ä½œæœåŠ¡ç«¯çº¿ç¨‹çš„ã€‚</p><p>è€Œç”±äºMySQLæ˜¯åœç­‰åè®®ï¼Œæ‰€ä»¥è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œçš„è¯­å¥è¿˜æ²¡æœ‰è¿”å›çš„æ—¶å€™ï¼Œå†å¾€è¿™ä¸ªè¿æ¥é‡Œé¢ç»§ç»­å‘å‘½ä»¤ä¹Ÿæ˜¯æ²¡æœ‰ç”¨çš„ã€‚å®é™…ä¸Šï¼Œæ‰§è¡ŒCtrl+Cçš„æ—¶å€™ï¼Œæ˜¯MySQLå®¢æˆ·ç«¯å¦å¤–å¯åŠ¨ä¸€ä¸ªè¿æ¥ï¼Œç„¶åå‘é€ä¸€ä¸ªkill query å‘½ä»¤ã€‚</p><p>æ‰€ä»¥ï¼Œä½ å¯åˆ«ä»¥ä¸ºåœ¨å®¢æˆ·ç«¯æ‰§è¡Œå®ŒCtrl+Cå°±ä¸‡äº‹å¤§å‰äº†ã€‚å› ä¸ºï¼Œè¦killæ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿˜æ¶‰åŠåˆ°åç«¯çš„å¾ˆå¤šæ“ä½œã€‚</p><h1>å¦å¤–ä¸¤ä¸ªå…³äºå®¢æˆ·ç«¯çš„è¯¯è§£</h1><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä¹Ÿç»å¸¸ä¼šç¢°åˆ°ä¸€äº›åŒå­¦å¯¹å®¢æˆ·ç«¯çš„ä½¿ç”¨æœ‰è¯¯è§£ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹ä¸¤ä¸ªæœ€å¸¸è§çš„è¯¯è§£ã€‚</p><p><strong>ç¬¬ä¸€ä¸ªè¯¯è§£æ˜¯ï¼šå¦‚æœåº“é‡Œé¢çš„è¡¨ç‰¹åˆ«å¤šï¼Œè¿æ¥å°±ä¼šå¾ˆæ…¢ã€‚</strong></p><p>æœ‰äº›çº¿ä¸Šçš„åº“ï¼Œä¼šåŒ…å«å¾ˆå¤šè¡¨ï¼ˆæˆ‘è§è¿‡æœ€å¤šçš„ä¸€ä¸ªåº“é‡Œæœ‰6ä¸‡ä¸ªè¡¨ï¼‰ã€‚è¿™æ—¶å€™ï¼Œä½ å°±ä¼šå‘ç°ï¼Œæ¯æ¬¡ç”¨å®¢æˆ·ç«¯è¿æ¥éƒ½ä¼šå¡åœ¨ä¸‹é¢è¿™ä¸ªç•Œé¢ä¸Šã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/7e/83/7e4666bfd580505180c77447d1f44c83.png?wh=969*112\" alt=\"\"></p><center><span class=\"reference\">å›¾4 è¿æ¥ç­‰å¾…</span></center><p>è€Œå¦‚æœdb1è¿™ä¸ªåº“é‡Œè¡¨å¾ˆå°‘çš„è¯ï¼Œè¿æ¥èµ·æ¥å°±ä¼šå¾ˆå¿«ï¼Œå¯ä»¥å¾ˆå¿«è¿›å…¥è¾“å…¥å‘½ä»¤çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œæœ‰åŒå­¦ä¼šè®¤ä¸ºæ˜¯è¡¨çš„æ•°ç›®å½±å“äº†è¿æ¥æ€§èƒ½ã€‚</p><p>ä»<a href=\"https://time.geekbang.org/column/article/68319\">ç¬¬ä¸€ç¯‡æ–‡ç« </a>ä½ å°±çŸ¥é“ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯åœ¨å’ŒæœåŠ¡ç«¯å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œéœ€è¦åšçš„äº‹æƒ…å°±æ˜¯TCPæ¡æ‰‹ã€ç”¨æˆ·æ ¡éªŒã€è·å–æƒé™ã€‚ä½†è¿™å‡ ä¸ªæ“ä½œï¼Œæ˜¾ç„¶è·Ÿåº“é‡Œé¢è¡¨çš„ä¸ªæ•°æ— å…³ã€‚</p><p>ä½†å®é™…ä¸Šï¼Œæ­£å¦‚å›¾ä¸­çš„æ–‡å­—æç¤ºæ‰€è¯´çš„ï¼Œå½“ä½¿ç”¨é»˜è®¤å‚æ•°è¿æ¥çš„æ—¶å€™ï¼ŒMySQLå®¢æˆ·ç«¯ä¼šæä¾›ä¸€ä¸ªæœ¬åœ°åº“åå’Œè¡¨åè¡¥å…¨çš„åŠŸèƒ½ã€‚ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå®¢æˆ·ç«¯åœ¨è¿æ¥æˆåŠŸåï¼Œéœ€è¦å¤šåšä¸€äº›æ“ä½œï¼š</p><ol>\n<li>\n<p>æ‰§è¡Œshow databasesï¼›</p>\n</li>\n<li>\n<p>åˆ‡åˆ°db1åº“ï¼Œæ‰§è¡Œshow tablesï¼›</p>\n</li>\n<li>\n<p>æŠŠè¿™ä¸¤ä¸ªå‘½ä»¤çš„ç»“æœç”¨äºæ„å»ºä¸€ä¸ªæœ¬åœ°çš„å“ˆå¸Œè¡¨ã€‚</p>\n</li>\n</ol><p>åœ¨è¿™äº›æ“ä½œä¸­ï¼Œæœ€èŠ±æ—¶é—´çš„å°±æ˜¯ç¬¬ä¸‰æ­¥åœ¨æœ¬åœ°æ„å»ºå“ˆå¸Œè¡¨çš„æ“ä½œã€‚æ‰€ä»¥ï¼Œå½“ä¸€ä¸ªåº“ä¸­çš„è¡¨ä¸ªæ•°éå¸¸å¤šçš„æ—¶å€™ï¼Œè¿™ä¸€æ­¥å°±ä¼šèŠ±æ¯”è¾ƒé•¿çš„æ—¶é—´ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æˆ‘ä»¬æ„ŸçŸ¥åˆ°çš„è¿æ¥è¿‡ç¨‹æ…¢ï¼Œå…¶å®å¹¶ä¸æ˜¯è¿æ¥æ…¢ï¼Œä¹Ÿä¸æ˜¯æœåŠ¡ç«¯æ…¢ï¼Œè€Œæ˜¯å®¢æˆ·ç«¯æ…¢ã€‚</strong></p><p>å›¾ä¸­çš„æç¤ºä¹Ÿè¯´äº†ï¼Œå¦‚æœåœ¨è¿æ¥å‘½ä»¤ä¸­åŠ ä¸Š-Aï¼Œå°±å¯ä»¥å…³æ‰è¿™ä¸ªè‡ªåŠ¨è¡¥å…¨çš„åŠŸèƒ½ï¼Œç„¶åå®¢æˆ·ç«¯å°±å¯ä»¥å¿«é€Ÿè¿”å›äº†ã€‚</p><p>è¿™é‡Œè‡ªåŠ¨è¡¥å…¨çš„æ•ˆæœå°±æ˜¯ï¼Œä½ åœ¨è¾“å…¥åº“åæˆ–è€…è¡¨åçš„æ—¶å€™ï¼Œè¾“å…¥å‰ç¼€ï¼Œå¯ä»¥ä½¿ç”¨Tabé”®è‡ªåŠ¨è¡¥å…¨è¡¨åæˆ–è€…æ˜¾ç¤ºæç¤ºã€‚</p><p>å®é™…ä½¿ç”¨ä¸­ï¼Œå¦‚æœä½ è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ç”¨å¾—å¹¶ä¸å¤šï¼Œæˆ‘å»ºè®®ä½ æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½é»˜è®¤åŠ -Aã€‚</p><p>å…¶å®æç¤ºé‡Œé¢æ²¡æœ‰è¯´ï¼Œé™¤äº†åŠ -Aä»¥å¤–ï¼ŒåŠ â€“quick(æˆ–è€…ç®€å†™ä¸º-q)å‚æ•°ï¼Œä¹Ÿå¯ä»¥è·³è¿‡è¿™ä¸ªé˜¶æ®µã€‚ä½†æ˜¯ï¼Œè¿™ä¸ª<strong>â€“quickæ˜¯ä¸€ä¸ªæ›´å®¹æ˜“å¼•èµ·è¯¯ä¼šçš„å‚æ•°ï¼Œä¹Ÿæ˜¯å…³äºå®¢æˆ·ç«¯å¸¸è§çš„ä¸€ä¸ªè¯¯è§£ã€‚</strong></p><p>ä½ çœ‹åˆ°è¿™ä¸ªå‚æ•°ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—è¿™åº”è¯¥æ˜¯ä¸€ä¸ªè®©æœåŠ¡ç«¯åŠ é€Ÿçš„å‚æ•°ï¼Ÿä½†å®é™…ä¸Šæ°æ°ç›¸åï¼Œè®¾ç½®äº†è¿™ä¸ªå‚æ•°å¯èƒ½ä¼šé™ä½æœåŠ¡ç«¯çš„æ€§èƒ½ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ</p><p>MySQLå®¢æˆ·ç«¯å‘é€è¯·æ±‚åï¼Œæ¥æ”¶æœåŠ¡ç«¯è¿”å›ç»“æœçš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ol>\n<li>\n<p>ä¸€ç§æ˜¯æœ¬åœ°ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯åœ¨æœ¬åœ°å¼€ä¸€ç‰‡å†…å­˜ï¼Œå…ˆæŠŠç»“æœå­˜èµ·æ¥ã€‚å¦‚æœä½ ç”¨APIå¼€å‘ï¼Œå¯¹åº”çš„å°±æ˜¯mysql_store_result æ–¹æ³•ã€‚</p>\n</li>\n<li>\n<p>å¦ä¸€ç§æ˜¯ä¸ç¼“å­˜ï¼Œè¯»ä¸€ä¸ªå¤„ç†ä¸€ä¸ªã€‚å¦‚æœä½ ç”¨APIå¼€å‘ï¼Œå¯¹åº”çš„å°±æ˜¯mysql_use_resultæ–¹æ³•ã€‚</p>\n</li>\n</ol><p>MySQLå®¢æˆ·ç«¯é»˜è®¤é‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œè€Œå¦‚æœåŠ ä¸Šâ€“quickå‚æ•°ï¼Œå°±ä¼šä½¿ç”¨ç¬¬äºŒç§ä¸ç¼“å­˜çš„æ–¹å¼ã€‚</p><p>é‡‡ç”¨ä¸ç¼“å­˜çš„æ–¹å¼æ—¶ï¼Œå¦‚æœæœ¬åœ°å¤„ç†å¾—æ…¢ï¼Œå°±ä¼šå¯¼è‡´æœåŠ¡ç«¯å‘é€ç»“æœè¢«é˜»å¡ï¼Œå› æ­¤ä¼šè®©æœåŠ¡ç«¯å˜æ…¢ã€‚å…³äºæœåŠ¡ç«¯çš„å…·ä½“è¡Œä¸ºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« å†å’Œä½ å±•å¼€è¯´æ˜ã€‚</p><p>é‚£ä½ ä¼šè¯´ï¼Œæ—¢ç„¶è¿™æ ·ï¼Œä¸ºä»€ä¹ˆè¦ç»™è¿™ä¸ªå‚æ•°å–åå«ä½œquickå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºä½¿ç”¨è¿™ä¸ªå‚æ•°å¯ä»¥è¾¾åˆ°ä»¥ä¸‹ä¸‰ç‚¹æ•ˆæœï¼š</p><ul>\n<li>ç¬¬ä¸€ç‚¹ï¼Œå°±æ˜¯å‰é¢æåˆ°çš„ï¼Œè·³è¿‡è¡¨åè‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ã€‚</li>\n<li>ç¬¬äºŒç‚¹ï¼Œmysql_store_resultéœ€è¦ç”³è¯·æœ¬åœ°å†…å­˜æ¥ç¼“å­˜æŸ¥è¯¢ç»“æœï¼Œå¦‚æœæŸ¥è¯¢ç»“æœå¤ªå¤§ï¼Œä¼šè€—è´¹è¾ƒå¤šçš„æœ¬åœ°å†…å­˜ï¼Œå¯èƒ½ä¼šå½±å“å®¢æˆ·ç«¯æœ¬åœ°æœºå™¨çš„æ€§èƒ½ï¼›</li>\n<li>ç¬¬ä¸‰ç‚¹ï¼Œæ˜¯ä¸ä¼šæŠŠæ‰§è¡Œå‘½ä»¤è®°å½•åˆ°æœ¬åœ°çš„å‘½ä»¤å†å²æ–‡ä»¶ã€‚</li>\n</ul><p>æ‰€ä»¥ä½ çœ‹åˆ°äº†ï¼Œâ€“quickå‚æ•°çš„æ„æ€ï¼Œæ˜¯è®©å®¢æˆ·ç«¯å˜å¾—æ›´å¿«ã€‚</p><h1>å°ç»“</h1><p>åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘é¦–å…ˆå’Œä½ ä»‹ç»äº†MySQLä¸­ï¼Œæœ‰äº›è¯­å¥å’Œè¿æ¥â€œkillä¸æ‰â€çš„æƒ…å†µã€‚</p><p>è¿™äº›â€œkillä¸æ‰â€çš„æƒ…å†µï¼Œå…¶å®æ˜¯å› ä¸ºå‘é€killå‘½ä»¤çš„å®¢æˆ·ç«¯ï¼Œå¹¶æ²¡æœ‰å¼ºè¡Œåœæ­¢ç›®æ ‡çº¿ç¨‹çš„æ‰§è¡Œï¼Œè€Œåªæ˜¯è®¾ç½®äº†ä¸ªçŠ¶æ€ï¼Œå¹¶å”¤é†’å¯¹åº”çš„çº¿ç¨‹ã€‚è€Œè¢«killçš„çº¿ç¨‹ï¼Œéœ€è¦æ‰§è¡Œåˆ°åˆ¤æ–­çŠ¶æ€çš„â€œåŸ‹ç‚¹â€ï¼Œæ‰ä¼šå¼€å§‹è¿›å…¥ç»ˆæ­¢é€»è¾‘é˜¶æ®µã€‚å¹¶ä¸”ï¼Œç»ˆæ­¢é€»è¾‘æœ¬èº«ä¹Ÿæ˜¯éœ€è¦è€—è´¹æ—¶é—´çš„ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ å‘ç°ä¸€ä¸ªçº¿ç¨‹å¤„äºKilledçŠ¶æ€ï¼Œä½ å¯ä»¥åšçš„äº‹æƒ…å°±æ˜¯ï¼Œé€šè¿‡å½±å“ç³»ç»Ÿç¯å¢ƒï¼Œè®©è¿™ä¸ªKilledçŠ¶æ€å°½å¿«ç»“æŸã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€ä¸ªä¾‹å­é‡ŒInnoDBå¹¶å‘åº¦çš„é—®é¢˜ï¼Œä½ å°±å¯ä»¥ä¸´æ—¶è°ƒå¤§innodb_thread_concurrencyçš„å€¼ï¼Œæˆ–è€…åœæ‰åˆ«çš„çº¿ç¨‹ï¼Œè®©å‡ºä½å­ç»™è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚</p><p>è€Œå¦‚æœæ˜¯å›æ»šé€»è¾‘ç”±äºå—åˆ°IOèµ„æºé™åˆ¶æ‰§è¡Œå¾—æ¯”è¾ƒæ…¢ï¼Œå°±é€šè¿‡å‡å°‘ç³»ç»Ÿå‹åŠ›è®©å®ƒåŠ é€Ÿã€‚</p><p>åšå®Œè¿™äº›æ“ä½œåï¼Œå…¶å®ä½ å·²ç»æ²¡æœ‰åŠæ³•å†å¯¹å®ƒåšä»€ä¹ˆäº†ï¼Œåªèƒ½ç­‰å¾…æµç¨‹è‡ªå·±å®Œæˆã€‚</p><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸‹ä¸€ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>å¦‚æœä½ ç¢°åˆ°ä¸€ä¸ªè¢«killedçš„äº‹åŠ¡ä¸€ç›´å¤„äºå›æ»šçŠ¶æ€ï¼Œä½ è®¤ä¸ºæ˜¯åº”è¯¥ç›´æ¥æŠŠMySQLè¿›ç¨‹å¼ºè¡Œé‡å¯ï¼Œè¿˜æ˜¯åº”è¯¥è®©å®ƒè‡ªå·±æ‰§è¡Œå®Œæˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥æŠŠä½ çš„ç»“è®ºå’Œåˆ†æå†™åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« çš„æœ«å°¾å’Œä½ è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><h1>ä¸ŠæœŸé—®é¢˜æ—¶é—´</h1><p>æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« æœ«å°¾ï¼Œç»™ä½ ç•™ä¸‹çš„é—®é¢˜æ˜¯ï¼Œå¸Œæœ›ä½ åˆ†äº«ä¸€ä¸‹è¯¯åˆ æ•°æ®çš„å¤„ç†ç»éªŒã€‚</p><p><strong>@è‹èŒ« åŒå­¦æåˆ°äº†ä¸€ä¸ªä¾‹å­</strong>ï¼Œæˆ‘è§‰å¾—å€¼å¾—è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚è¿ç»´çš„åŒå­¦ç›´æ¥æ‹·è´æ–‡æœ¬å»æ‰§è¡Œï¼ŒSQLè¯­å¥æˆªæ–­ï¼Œå¯¼è‡´æ•°æ®åº“æ‰§è¡Œå‡ºé”™ã€‚</p><p>ä»æµè§ˆå™¨æ‹·è´æ–‡æœ¬æ‰§è¡Œï¼Œæ˜¯ä¸€ä¸ªéå¸¸ä¸è§„èŒƒçš„æ“ä½œã€‚é™¤äº†è¿™ä¸ªä¾‹å­é‡Œé¢è¯´çš„SQLè¯­å¥æˆªæ–­é—®é¢˜ï¼Œè¿˜å¯èƒ½å­˜åœ¨ä¹±ç é—®é¢˜ã€‚</p><p>ä¸€èˆ¬è¿™ç§æ“ä½œï¼Œå¦‚æœè„šæœ¬çš„å¼€å‘å’Œæ‰§è¡Œä¸æ˜¯åŒä¸€ä¸ªäººï¼Œéœ€è¦å¼€å‘åŒå­¦æŠŠè„šæœ¬æ”¾åˆ°gitä¸Šï¼Œç„¶åæŠŠgitåœ°å€ï¼Œä»¥åŠæ–‡ä»¶çš„md5å‘ç»™è¿ç»´åŒå­¦ã€‚</p><p>è¿™æ ·å°±è¦æ±‚è¿ç»´åŒå­¦åœ¨æ‰§è¡Œå‘½ä»¤ä¹‹å‰ï¼Œç¡®è®¤è¦æ‰§è¡Œçš„æ–‡ä»¶çš„md5ï¼Œè·Ÿä¹‹å‰å¼€å‘åŒå­¦æä¾›çš„md5ç›¸åŒæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚</p><p>å¦å¤–ï¼Œæˆ‘è¦ç‰¹åˆ«ç‚¹èµä¸€ä¸‹@è‹èŒ« åŒå­¦å¤ç°é—®é¢˜çš„æ€è·¯å’Œè¿½æŸ¥é—®é¢˜çš„æ€åº¦ã€‚</p><p><strong>@linhui0705 åŒå­¦æåˆ°çš„â€œå››ä¸ªè„šæœ¬â€çš„æ–¹æ³•ï¼Œæˆ‘éå¸¸æ¨å´‡</strong>ã€‚è¿™å››ä¸ªè„šæœ¬åˆ†åˆ«æ˜¯ï¼šå¤‡ä»½è„šæœ¬ã€æ‰§è¡Œè„šæœ¬ã€éªŒè¯è„šæœ¬å’Œå›æ»šè„šæœ¬ã€‚å¦‚æœèƒ½å¤ŸåšæŒåšåˆ°ï¼Œå³ä½¿å‡ºç°é—®é¢˜ï¼Œä¹Ÿæ˜¯å¯ä»¥å¾ˆå¿«æ¢å¤çš„ï¼Œä¸€å®šèƒ½é™ä½å‡ºç°æ•…éšœçš„æ¦‚ç‡ã€‚</p><p>ä¸è¿‡ï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ€å¤§çš„æ•Œäººæ˜¯è¿™æ ·çš„æ€æƒ³ï¼šè¿™æ˜¯ä¸ªå°æ“ä½œï¼Œä¸éœ€è¦è¿™ä¹ˆä¸¥æ ¼ã€‚</p><p><strong>@KnightÂ²ÂºÂ¹â¸ ç»™äº†ä¸€ä¸ªä¿æŠ¤æ–‡ä»¶çš„æ–¹æ³•</strong>ï¼Œæˆ‘ä¹‹å‰æ²¡æœ‰ç”¨è¿‡è¿™ç§æ–¹æ³•ï¼Œä¸è¿‡è¿™ç¡®å®æ˜¯ä¸€ä¸ªä¸é”™çš„æ€è·¯ã€‚</p><p>ä¸ºäº†æ•°æ®å®‰å…¨å’ŒæœåŠ¡ç¨³å®šï¼Œå¤šåšç‚¹é¢„é˜²æ–¹æ¡ˆçš„è®¾è®¡è®¨è®ºï¼Œæ€»å¥½è¿‡æ•…éšœå¤„ç†å’Œäº‹åå¤ç›˜ã€‚æ–¹æ¡ˆè®¾è®¡è®¨è®ºä¼šå’Œæ•…éšœå¤ç›˜ä¼šï¼Œè¿™ä¸¤ç§ä¼šè®®çš„ä¼šè®®å®¤æ°”æ°›å®Œå…¨ä¸ä¸€æ ·ã€‚ç»å†è¿‡çš„åŒå­¦ä¸€å®šæ‡‚çš„ã€‚</p><p></p>","neighbors":{"left":{"article_title":"31 | è¯¯åˆ æ•°æ®åé™¤äº†è·‘è·¯ï¼Œè¿˜èƒ½æ€ä¹ˆåŠï¼Ÿ","id":78658},"right":{"article_title":"33 | æˆ‘æŸ¥è¿™ä¹ˆå¤šæ•°æ®ï¼Œä¼šä¸ä¼šæŠŠæ•°æ®åº“å†…å­˜æ‰“çˆ†ï¼Ÿ","id":79407}},"comments":[{"had_liked":false,"id":64535,"user_name":"LeonğŸ“·","can_delete":false,"product_type":"c1","uid":1219496,"ip_address":"","ucode":"B9BBD1EFAAE5A2","user_header":"https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg","comment_is_top":true,"comment_ctime":1548816322,"is_pvip":false,"replies":[{"id":"22846","content":"è¿™ä¸ªç†è§£éå¸¸åˆ°ä½ğŸ‘<br><br>é¢å¤–çš„ä¸€ä¸ªä¸åŒå°±æ˜¯show processlistçš„æ—¶å€™ï¼Œkill connectionä¼šæ˜¾ç¤ºâ€œkilledâ€<br><br>è¿™ä¸¤å¥åŠ èµ·æ¥å¯ä»¥ç”¨æ¥æ›¿æ¢æˆ‘ä»¬æ–‡ä¸­çš„æè¿°ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":64535,"uid":"1264162","ip_address":"","utype":1,"ctime":1548818818,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"9.2233724850801992e+18","product_id":100020801,"comment_content":"kill connectionæœ¬è´¨ä¸Šåªæ˜¯æŠŠå®¢æˆ·ç«¯çš„sqlè¿æ¥æ–­å¼€ï¼Œåé¢çš„æ‰§è¡Œæµç¨‹è¿˜æ˜¯è¦èµ°kill queryçš„ï¼Œæ˜¯è¿™æ ·ç†è§£å§","like_count":105,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438055,"discussion_content":"è¿™ä¸ªç†è§£éå¸¸åˆ°ä½ğŸ‘\n\né¢å¤–çš„ä¸€ä¸ªä¸åŒå°±æ˜¯show processlistçš„æ—¶å€™ï¼Œkill connectionä¼šæ˜¾ç¤ºâ€œkilledâ€\n\nè¿™ä¸¤å¥åŠ èµ·æ¥å¯ä»¥ç”¨æ¥æ›¿æ¢æˆ‘ä»¬æ–‡ä¸­çš„æè¿°ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548818818,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165990,"user_name":"learn more","can_delete":false,"product_type":"c1","uid":1128702,"ip_address":"","ucode":"0EF628B2E0F95E","user_header":"https://static001.geekbang.org/account/avatar/00/11/38/fe/00ddeb81.jpg","comment_is_top":false,"comment_ctime":1577359266,"is_pvip":false,"replies":[{"id":"63868","content":"æ‰§è¡Œkillçš„æ—¶å€™æ²¡è¿›InnoDBï¼Œä¸å—è¿™ä¸ªå‚æ•°é™åˆ¶çš„","user_name":"ä½œè€…å›å¤","comment_id":165990,"uid":"1264162","ip_address":"","utype":1,"ctime":1577600160,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"362354612130","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæ–‡ä¸­ set global innodb_thread_concurrency=2çš„é‚£ä¸ªä¾‹å­ï¼Œå‰é¢ Session A å’Œ Session B å·²ç»å ç”¨äº†ä¸¤ä¸ªçº¿ç¨‹äº†ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ä¸€ä¸ªæ–°çš„Sessionä¸­æ‰§è¡Œ Kill æˆ– show full processlist å‘½ä»¤å‘¢ï¼Ÿ","like_count":85,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479343,"discussion_content":"æ‰§è¡Œkillçš„æ—¶å€™æ²¡è¿›InnoDBï¼Œä¸å—è¿™ä¸ªå‚æ•°é™åˆ¶çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577600160,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":120529,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1564923882,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"212018321386","product_id":100020801,"comment_content":"killä¸æ‰<br>1ï¼škillå‘½ä»¤è¢«å µäº†ï¼Œè¿˜æ²¡åˆ°ä½<br>2ï¼škillå‘½ä»¤åˆ°ä½äº†ï¼Œä½†æ˜¯æ²¡è¢«ç«‹åˆ»è§¦å‘<br>3ï¼škillå‘½ä»¤è¢«è§¦å‘äº†ï¼Œä½†æ‰§è¡Œå®Œä¹Ÿéœ€è¦æ—¶é—´<br>å’ŒçŒœæµ‹è¾ƒè¿‘ï¼Œä¼°è®¡æ‰€æœ‰çš„killå‘½ä»¤ï¼Œkillä¸æ‰æ—¶éƒ½æ˜¯è¿™ä¹ˆä¸ªåŸå› ","like_count":50,"discussions":[{"author":{"id":2052476,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Qq6oLfOTgKzjiculoUDicdv7WoY1iabPfOTumibWeInVP2Mnod9XVPrNSClvIiaLbvtDlIjRnWUNaXcYwREGzlcaDog/132","nickname":"Geek_åœ¨ä¸‹èŸ‘è‚ç‹","note":"","ucode":"E1F5BBB5BC5962","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":323655,"discussion_content":"è¯¾ä»£è¡¨è®²çš„å¥½ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604978637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63556,"user_name":"Mr.sylar","can_delete":false,"product_type":"c1","uid":1311507,"ip_address":"","ucode":"70A4DADEDC4901","user_header":"","comment_is_top":false,"comment_ctime":1548399841,"is_pvip":false,"replies":[{"id":"22466","content":"ä¸åŒçš„çŸ¥è¯†ç‚¹ä¸å¤ªä¸€æ ·å“ˆï¼Œ<br>æœ‰äº›å¯ä»¥çœ‹æ–‡æ¡£ï¼›<br>æœ‰äº›å¯ä»¥è‡ªå·±éªŒè¯ï¼›<br>è¿˜æœ‰å°±æ˜¯çœ‹å…¶ä»–äººæ–‡ç« ï¼ŒåŠ éªŒè¯ï¼›ï¼ˆå°±æ˜¯æˆ‘ä»¬è¿™ä¸ªä¸“æ çš„æ–¹æ³•^_^ï¼‰<br>","user_name":"ä½œè€…å›å¤","comment_id":63556,"uid":"1264162","ip_address":"","utype":1,"ctime":1548402162,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"91742713057","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹è¿™äº›åŸç†çš„&quot;æ¸”&quot;çš„æ–¹æ³•é™¤äº†çœ‹æºç ï¼Œè¿˜æœ‰åˆ«çš„å»ºè®®å—","like_count":22,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437634,"discussion_content":"ä¸åŒçš„çŸ¥è¯†ç‚¹ä¸å¤ªä¸€æ ·å“ˆï¼Œ\næœ‰äº›å¯ä»¥çœ‹æ–‡æ¡£ï¼›\næœ‰äº›å¯ä»¥è‡ªå·±éªŒè¯ï¼›\nè¿˜æœ‰å°±æ˜¯çœ‹å…¶ä»–äººæ–‡ç« ï¼ŒåŠ éªŒè¯ï¼›ï¼ˆå°±æ˜¯æˆ‘ä»¬è¿™ä¸ªä¸“æ çš„æ–¹æ³•^_^ï¼‰\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1548402162,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1937062,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/8e/a6/c3286b61.jpg","nickname":"Javaå’å¢™å·¥ç¨‹å¸ˆ","note":"","ucode":"E76AE44A9C76AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":309528,"discussion_content":"ç›´æ¥å†™sqlæ‰§è¡Œä¸‹ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601337447,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66914,"user_name":"wjz1991","can_delete":false,"product_type":"c1","uid":1311687,"ip_address":"","ucode":"D82D744F5A4E6D","user_header":"https://static001.geekbang.org/account/avatar/00/14/03/c7/563345e1.jpg","comment_is_top":false,"comment_ctime":1550040334,"is_pvip":false,"replies":[{"id":"25267","content":"å¦‚æœæ˜¯å› ä¸ºè¿™ä¸ªåŸå› çš„ï¼Œåº”è¯¥æ˜¯è®¾ç½®innodb_thread_concurrency=0å°±ä¼šé€€å‡ºçš„ã€‚ã€‚<br>ä½ è¿™ä¸ªæƒ…å†µå¯èƒ½å¡åœ¨åˆ«çš„åœ°æ–¹äº†ï¼Œä¸‹æ¬¡å¦‚æœå†å‡ºç°ï¼Œè¦é‡å¯ä¹‹å‰ï¼Œç”¨pstackä¿ç•™ä¸ªç°åœºå“¦","user_name":"ä½œè€…å›å¤","comment_id":66914,"uid":"1264162","ip_address":"","utype":1,"ctime":1551185148,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"83154418958","product_id":100020801,"comment_content":"è€å¸ˆï¼Œä¹‹å‰ä¹Ÿæ˜¯æœ‰é‡åˆ°ç¨‹åºé—®é¢˜å¯¼è‡´cpuçˆ†æ»¡ï¼Œä¸´æ—¶å…ˆæŠŠinnodb_thread_concurrencyè®¾ç½®ä¸º16ï¼ˆé™ä½cpué¿å…å½±å“åŒæœºå™¨å®ä¾‹ï¼‰ï¼Œç„¶åä¸æ–­å»killï¼Œåé¢ç¨‹åºäººå‘˜ä¿®å¤äº†è¿™ä¸ªé—®é¢˜åï¼Œä¸€å †çš„killedçš„è¯­å¥ä¸é‡Šæ”¾ï¼Œè®¾ç½®innodb_thread_concurrency=0ï¼Œç­‰äº†åŠä¸ªæœˆéƒ½æ²¡é‡Šæ”¾ï¼Œåé¢è¿˜æ˜¯å®‰æ’ä¸»ä»åˆ‡æ¢ï¼Œå¼ºåˆ¶é‡å¯è§£å†³ï¼Œè¯·é—®è€å¸ˆï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ","like_count":19,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":438972,"discussion_content":"å¦‚æœæ˜¯å› ä¸ºè¿™ä¸ªåŸå› çš„ï¼Œåº”è¯¥æ˜¯è®¾ç½®innodb_thread_concurrency=0å°±ä¼šé€€å‡ºçš„ã€‚ã€‚\nä½ è¿™ä¸ªæƒ…å†µå¯èƒ½å¡åœ¨åˆ«çš„åœ°æ–¹äº†ï¼Œä¸‹æ¬¡å¦‚æœå†å‡ºç°ï¼Œè¦é‡å¯ä¹‹å‰ï¼Œç”¨pstackä¿ç•™ä¸ªç°åœºå“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1551185148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1448564,"avatar":"https://static001.geekbang.org/account/avatar/00/16/1a/74/8f7f8786.jpg","nickname":"GLADIATOR","note":"","ucode":"6FE14E0BCD6240","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":358656,"discussion_content":"wjzåŒå­¦ï¼Œæ˜¯æŒ‡killåä¸é‡Šæ”¾é”çš„é—®é¢˜å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616028859,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63489,"user_name":"å¤¹å¿ƒé¢åŒ…","can_delete":false,"product_type":"c1","uid":1301957,"ip_address":"","ucode":"002BBA49D83D17","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJCscgdVibmoPyRLRaicvk6rjTJxePZ6VFHvGjUQvtfhCS6kO4OZ1AVibbhNGKlWZmpEFf2yA6ptsqHw/132","comment_is_top":false,"comment_ctime":1548382447,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"78857793775","product_id":100020801,"comment_content":"å¯¹äºç»“å°¾çš„é—®é¢˜,æˆ‘è§‰å¾—è‚¯å®šæ˜¯ç­‰å¾…,å³ä¾¿æ˜¯mysqlé‡å¯,ä¹Ÿæ˜¯éœ€è¦å¯¹æœªæäº¤çš„äº‹åŠ¡è¿›è¡Œå›æ»šæ“ä½œçš„,ä¿è¯æ•°æ®åº“çš„ä¸€è‡´æ€§","like_count":19},{"had_liked":false,"id":68599,"user_name":"Lukia","can_delete":false,"product_type":"c1","uid":1028698,"ip_address":"","ucode":"C19472337BCCC6","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b2/5a/574f5bb0.jpg","comment_is_top":false,"comment_ctime":1550553747,"is_pvip":false,"replies":[{"id":"24358","content":"åˆ é™¤ä¸­é—´åˆ—ï¼Œå°±æ²¡åŠæ³•ç”¨åˆ‡æ¢çš„é‚£ä¸ªæ–¹æ¡ˆã€‚<br>MySQLçš„å¤‡åº“æ¯”ä¸»åº“å¤šä¸€ä¸ªå­—æ®µæˆ–å°‘ä¸€ä¸ªå­—æ®µï¼Œè¿™æ—¶å€™æ—¥å¿—è¿˜æ˜¯å¯ä»¥åº”ç”¨æˆåŠŸçš„ï¼ˆä½†å¦‚æœå°‘çš„æ˜¯ä¸­é—´ä¸€ä¸ªå­—æ®µï¼Œå­—æ®µå°±ä¼šå¯¹åº”é”™äº†ï¼‰","user_name":"ä½œè€…å›å¤","comment_id":68599,"uid":"1264162","ip_address":"","utype":1,"ctime":1550562056,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":3,"race_medal":0,"score":"65975063187","product_id":100020801,"comment_content":"è¯·æ•™è€å¸ˆï¼Œåˆ é™¤ä¸­é—´åˆ—å’Œä¿®æ”¹æœ«å°¾åˆ—è¿™ä¸¤ç§DDLçš„å·®åˆ«åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ<br><br>ä½œè€…å›å¤: å¯¹ï¼Œå…¶å®åªæœ‰ æ”¹ç´¢å¼•ã€ åŠ æœ€åä¸€åˆ—ã€åˆ æœ€åä¸€åˆ—<br>å…¶ä»–çš„å¤§å¤šæ•°ä¸è¡Œï¼Œæ¯”å¦‚åˆ é™¤ä¸­é—´ä¸€åˆ—è¿™ç§","like_count":16,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439748,"discussion_content":"åˆ é™¤ä¸­é—´åˆ—ï¼Œå°±æ²¡åŠæ³•ç”¨åˆ‡æ¢çš„é‚£ä¸ªæ–¹æ¡ˆã€‚\nMySQLçš„å¤‡åº“æ¯”ä¸»åº“å¤šä¸€ä¸ªå­—æ®µæˆ–å°‘ä¸€ä¸ªå­—æ®µï¼Œè¿™æ—¶å€™æ—¥å¿—è¿˜æ˜¯å¯ä»¥åº”ç”¨æˆåŠŸçš„ï¼ˆä½†å¦‚æœå°‘çš„æ˜¯ä¸­é—´ä¸€ä¸ªå­—æ®µï¼Œå­—æ®µå°±ä¼šå¯¹åº”é”™äº†ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550562056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1361159,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqJobg767PUeqrqQQ4B6YvMatj2SRyOicKZZ4gWTf30dMketiaj58Gc3RFTmckGxAXlL9ERSxGovq9g/132","nickname":"æ¶›å“¥å“¥","note":"","ucode":"329A1384E3AB5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":329019,"discussion_content":"æ ‡è®°ä¸€ä¸‹ï¼Œbinlogé‡Œé¢è®°å½•çš„æœ‰å­—æ®µçš„é¡ºåº","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1606297847,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588073,"discussion_content":"åˆ é™¤æœ€åä¸€ä¸ªä¹Ÿä¸è¡Œå§ï¼›ä¸ç„¶åº”ç”¨ä¹‹å‰çš„æ—¥å¿—ä¹Ÿæ˜¯ä¼šæŠ¥é”™çš„ï¼›æˆ‘è®°å¾—å‰é¢è¯´äº†åªæœ‰åŠ å‡ç´¢å¼•å’Œå¢åŠ æœ€åä¸€åˆ—æ‰èƒ½å‘å‰å…¼å®¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663517980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"å¹¿ä¸œ"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63728,"user_name":"HuaMax","can_delete":false,"product_type":"c1","uid":1118488,"ip_address":"","ucode":"2E78DE1AF098AF","user_header":"https://static001.geekbang.org/account/avatar/00/11/11/18/8cee35f9.jpg","comment_is_top":false,"comment_ctime":1548476473,"is_pvip":false,"replies":[{"id":"22536","content":"æœ‰è€ƒè™‘åˆ°å¯¹å…¶ä»–çº¿ç¨‹çš„å½±å“ï¼Œè¿™ä¸ªğŸ‘<br><br>å…¶å®è¿™ç§æ—¶å€™å¾€å¾€æ˜¯è¦å…ˆè€ƒè™‘åˆ‡æ¢ï¼ˆå½“ç„¶é‡å¯ä¹Ÿæ˜¯åˆ‡æ¢çš„ï¼‰<br>å¦‚æœåªçœ‹æ¢å¤æ—¶é—´çš„è¯ï¼Œç­‰å¾…ä¼šæ›´å¿« <br>","user_name":"ä½œè€…å›å¤","comment_id":63728,"uid":"1264162","ip_address":"","utype":1,"ctime":1548483985,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"44498149433","product_id":100020801,"comment_content":"è¯¾åé¢˜ã€‚æˆ‘è®¤ä¸ºéœ€è¦çœ‹å½“æ—¶çš„ä¸šåŠ¡åœºæ™¯ã€‚é‡å¯ä¼šå¯¼è‡´å…¶ä»–çš„è¿æ¥ä¹Ÿæ–­å¼€ï¼Œè¿”å›ç»™å…¶ä»–ä¸šåŠ¡è¿æ¥ä¸¢å¤±çš„é”™è¯¯ã€‚å¦‚æœæœ‰å¾ˆå¤šäº‹åŠ¡åœ¨ç­‰å¾…è¯¥äº‹åŠ¡çš„é”ï¼Œåˆ™åº”è¯¥é‡å¯ï¼Œè®©å…¶ä»–äº‹åŠ¡å¿«é€Ÿé‡è¯•è·å–é”ã€‚å¦å¤–å¦‚æœæ˜¯RRçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œé•¿äº‹åŠ¡ä¼šå› ä¸ºæ•°æ®å¯è§æ€§çš„é—®é¢˜ï¼Œå¯¹äºå¤šç‰ˆæœ¬çš„æ•°æ®éœ€è¦æ‰¾åˆ°æ­£ç¡®çš„ç‰ˆæœ¬ï¼Œå¯¹è¯»æ€§èƒ½æ˜¯ä¸æ˜¯ä¹Ÿä¼šæœ‰å½±å“ï¼Œè¿™æ—¶å€™é‡å¯ä¹Ÿæ›´å¥½ã€‚ä¸ªäººç†è§£ï¼Œè¯·è€å¸ˆæŒ‡æ­£ã€‚","like_count":11,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437696,"discussion_content":"æœ‰è€ƒè™‘åˆ°å¯¹å…¶ä»–çº¿ç¨‹çš„å½±å“ï¼Œè¿™ä¸ªğŸ‘\n\nå…¶å®è¿™ç§æ—¶å€™å¾€å¾€æ˜¯è¦å…ˆè€ƒè™‘åˆ‡æ¢ï¼ˆå½“ç„¶é‡å¯ä¹Ÿæ˜¯åˆ‡æ¢çš„ï¼‰\nå¦‚æœåªçœ‹æ¢å¤æ—¶é—´çš„è¯ï¼Œç­‰å¾…ä¼šæ›´å¿« \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548483985,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63641,"user_name":"700","can_delete":false,"product_type":"c1","uid":1072896,"ip_address":"","ucode":"E4BD0CBADAF951","user_header":"","comment_is_top":false,"comment_ctime":1548428653,"is_pvip":false,"replies":[{"id":"22500","content":"1. ä¸€èˆ¬ä½ æ‰§è¡Œkillå°±æ˜¯è¦åœæ­¢æ­£åœ¨æ‰§è¡Œçš„è¯­å¥ï¼Œæ‰€ä»¥é—®é¢˜ä¸å¤§ğŸ˜‹<br>2. ä¸åº”è¯¥å‘€ï¼Œ KILL QUERY æ˜¯å¤§å†™å“¦ï¼Œä½ å†grepä¸€ä¸‹æ—¥å¿—ï¼›<br>3. å¤šæä¾›ä¸€ç§æ–¹æ³•å˜›ã€‚kill queryæ˜¯æŒ‡ä½ åªæ˜¯æƒ³åœæ­¢è¿™ä¸ªè¯­å¥ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¼šå›æ»šã€‚ä¸€èˆ¬kill queryæ˜¯å‘ç”Ÿåœ¨å®¢æˆ·ç«¯æ‰§è¡Œctrl+cçš„æ—¶å€™å•¦ã€‚å¹³æ—¶ç´§æ€¥å¤„ç†ç¡®å®ç›´æ¥ç”¨kill + thread_idã€‚ å¥½é—®é¢˜<br>4. å¯¹ï¼Œå¦å¤–ï¼Œåœ¨kill queryæ— æ•ˆçš„æ—¶å€™ï¼Œå…¶å®kill connectionä¹Ÿæ˜¯æ— æ•ˆçš„","user_name":"ä½œè€…å›å¤","comment_id":63641,"uid":"1264162","ip_address":"","utype":1,"ctime":1548433800,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":5,"race_medal":0,"score":"44498101613","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ã€‚<br>1ï¼‰æ–‡ä¸­å¼€å¤´è¯´â€œå½“ç„¶å¦‚æœè¿™ä¸ªçº¿ç¨‹æœ‰è¯­å¥æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿæ˜¯è¦å…ˆåœæ­¢æ­£åœ¨æ‰§è¡Œçš„è¯­å¥çš„â€ã€‚æˆ‘ä¸ªäººåœ¨å¹³æ—¶ä½¿ç”¨ä¸­å°±æ˜¯æŒ‰é»˜è®¤çš„æ‰§è¡Œï¼Œä¸ç®¡è¿™ä¸ªçº¿ç¨‹æœ‰æ— æ­£åœ¨æ‰§è¡Œè¯­å¥ã€‚ä¸çŸ¥è¿™æ ·ä¼šæœ‰ä»€ä¹ˆæ½œåœ¨é—®é¢˜ï¼Ÿ<br>2ï¼‰æ–‡ä¸­è¯´â€œå®é™…ä¸Šï¼Œæ‰§è¡Œ Ctrl+C çš„æ—¶å€™ï¼Œæ˜¯ MySQL å®¢æˆ·ç«¯å¦å¤–å¯åŠ¨ä¸€ä¸ªè¿æ¥ï¼Œç„¶åå‘é€ä¸€ä¸ª kill query å‘½ä»¤â€œã€‚è¿™ä¸ªæ€ä¹ˆè§£é‡Šå‘¢ï¼Ÿ<br>æˆ‘å¼€å¯ general log çš„æ—¶å€™æ‰§è¡Œ Ctrl+C æˆ– Ctrl+D å¹¶æ²¡æœ‰çœ‹åˆ°æœ‰å¦å¤–å¯åŠ¨ä¸€ä¸ªè¿æ¥ï¼Œä¹Ÿæ²¡æœ‰çœ‹åˆ° kill query å‘½ä»¤ã€‚general log ä¸­ä»…çœ‹åˆ°å¯¹åº”çº¿ç¨‹ id å’Œ Quitã€‚<br>3ï¼‰MySQL ä¸ºä»€ä¹ˆè¦åŒæ—¶å­˜åœ¨ kill query å’Œ kill connectionï¼Œæ—¢ç„¶ kill query æœ‰æ— æ•ˆçš„åœºæ™¯ï¼Œå¹²å˜›ä¸ç›´æ¥å­˜åœ¨ä¸€ä¸ª kill connection å‘½ä»¤å°±å¥½äº†ï¼Ÿé‚£å®ƒä¿©åˆ†åˆ«å¯¹åº”çš„é€‚ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™è€ƒè™‘ kill queryï¼Œä»€ä¹ˆæ—¶å€™è€ƒè™‘ kill connectionï¼Ÿæˆ‘ä¸ªäººè§‰å¾—è¿æ¥å¦‚æœç›´æ¥è¢« kill æ‰å¤§ä¸äº†å†é‡è¿ä¸€æ¬¡å¥½äº†ã€‚ä¹Ÿæ²¡å•¥æŸå¤±ã€‚<br>4ï¼‰å°å°ä¸€ä¸ªæ€»ç»“ï¼Œä¸çŸ¥å¯¹å¦ï¼Ÿ<br>kill query - ä¼šå‡ºç°æ— æ³• kill æ‰çš„æƒ…å†µï¼Œåªèƒ½å†æ¬¡æ‰§è¡Œ kill connectionã€‚<br>kill connection - ä¼šå‡ºç° Command åˆ—æ˜¾ç¤ºæˆ Killed çš„æƒ…å†µã€‚","like_count":11,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437668,"discussion_content":"1. ä¸€èˆ¬ä½ æ‰§è¡Œkillå°±æ˜¯è¦åœæ­¢æ­£åœ¨æ‰§è¡Œçš„è¯­å¥ï¼Œæ‰€ä»¥é—®é¢˜ä¸å¤§ğŸ˜‹\n2. ä¸åº”è¯¥å‘€ï¼Œ KILL QUERY æ˜¯å¤§å†™å“¦ï¼Œä½ å†grepä¸€ä¸‹æ—¥å¿—ï¼›\n3. å¤šæä¾›ä¸€ç§æ–¹æ³•å˜›ã€‚kill queryæ˜¯æŒ‡ä½ åªæ˜¯æƒ³åœæ­¢è¿™ä¸ªè¯­å¥ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¼šå›æ»šã€‚ä¸€èˆ¬kill queryæ˜¯å‘ç”Ÿåœ¨å®¢æˆ·ç«¯æ‰§è¡Œctrl+cçš„æ—¶å€™å•¦ã€‚å¹³æ—¶ç´§æ€¥å¤„ç†ç¡®å®ç›´æ¥ç”¨kill + thread_idã€‚ å¥½é—®é¢˜\n4. å¯¹ï¼Œå¦å¤–ï¼Œåœ¨kill queryæ— æ•ˆçš„æ—¶å€™ï¼Œå…¶å®kill connectionä¹Ÿæ˜¯æ— æ•ˆçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548433800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1526355,"avatar":"https://static001.geekbang.org/account/avatar/00/17/4a/53/063f9d17.jpg","nickname":"moonfox","note":"","ucode":"902BFF40EFA9FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":325343,"discussion_content":"å¦‚æœ kill query ä¸å‘ç”Ÿå›æ»šï¼Œkill connection åè¿˜ä¼šè°ƒç”¨kill queryï¼Œé‚£å›æ»šæ˜¯ä»€ä¹ˆæ—¶å€™å‘ç”Ÿçš„å‘¢","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1605276389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1986739,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/50/b3/9269cd59.jpg","nickname":"LWD","note":"","ucode":"DDA444DB113C01","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573006,"discussion_content":"å› ä¸ºè¿æ¥å­˜åœ¨å¤ç”¨ã€‚mysqlé‡Œé¢çš„è¿æ¥è¶…æ—¶å…¶å®å°±æ˜¯é€šè¿‡kill query idå®ç°çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653126509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1652836,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","nickname":"pc","note":"","ucode":"1AD538B9A900B6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":136596,"discussion_content":"â€œkill queryæ˜¯æŒ‡ä½ åªæ˜¯æƒ³åœæ­¢è¿™ä¸ªè¯­å¥ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¼šå›æ»šâ€ï¼Œå…¶ä»–åœ°æ–¹è¯´çš„killä¼šå›æ»šæ˜¯æŒ‡kill connection å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579150730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1970443,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIx1V1QAxC4NHaxYZGyuibBN8lcURJWc5nrnO4yic1kxnDemYV2FJGialf47kYX9qtDnZZOfe1SJeLicg/132","nickname":"lleft","note":"","ucode":"D573EB509455AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1652836,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epKJlW7sqts2ZbPuhMbseTAdvHWnrc4ficAeSZyKibkvn6qyxflPrkKKU3mH6XCNmYvDg11tB6y0pxg/132","nickname":"pc","note":"","ucode":"1AD538B9A900B6","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":378283,"discussion_content":"kill queryäº‹åŠ¡ä¸ä¼šå›æ»šï¼Œåªæ˜¯åœæ­¢æ‰§è¡Œçš„SQL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623146541,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":136596,"ip_address":""},"score":378283,"extra":""}]}]},{"had_liked":false,"id":63666,"user_name":"gaohueric","can_delete":false,"product_type":"c1","uid":1272286,"ip_address":"","ucode":"C1249DE7F5ABA0","user_header":"https://static001.geekbang.org/account/avatar/00/13/69/de/5e637b01.jpg","comment_is_top":false,"comment_ctime":1548457908,"is_pvip":false,"replies":[{"id":"22544","content":"1. æ˜¯çš„ï¼Œå¦‚æœæ™®é€šç´¢å¼•ä¸Šçš„æ•°æ®é¡µè¿™æ—¶å€™æ²¡æœ‰åœ¨å†…å­˜ä¸­ï¼Œå°±ä¼šä½¿ç”¨change buffer<br>2. â€œé‚£æ™®é€šæ•°æ®å‘¢ï¼Œæ˜¯ä¸æ˜¯è·Ÿç€ä¸»é”®ä¸€å—å†™å…¥å†…å­˜äº†ï¼Ÿâ€ ä½ è¯´çš„æ˜¯æ— ç´¢å¼•çš„å­—æ®µæ˜¯å§ï¼Œè¿™äº›æ•°æ®å°±åœ¨ä¸»é”®ç´¢å¼•ä¸Šï¼Œå…¶å®æ”¹çš„å°±æ˜¯ä¸»é”®ç´¢å¼•ã€‚","user_name":"ä½œè€…å›å¤","comment_id":63666,"uid":"1264162","ip_address":"","utype":1,"ctime":1548492092,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"40203163572","product_id":100020801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œä¸€ä¸ªè¡¨ä¸­ 1ä¸ªä¸»é”®ï¼Œ2ä¸ªå”¯ä¸€ç´¢å¼•ï¼Œ1ä¸ªæ™®é€šç´¢å¼• 4ä¸ªæ™®é€šå­—æ®µï¼Œå½“æ’å…¥ä¸€æ¡å…¨éƒ¨å­—æ®µä¸ä¸ºç©ºçš„æ•°æ®æ—¶ï¼Œæ­¤æ—¶å‡è®¾æœ‰4ä¸ªç´¢å¼•æ–‡ä»¶ï¼Œåˆ†åˆ«å¯¹åº” ä¸»é”® å”¯ä¸€æ€§ç´¢å¼•ï¼Œæ™®é€šç´¢å¼•ï¼Œå‡è®¾å†…å­˜ä¸­æ²¡æœ‰è¿™ä¸ªæ•°æ®é¡µï¼Œé‚£ä¹ˆserveræ˜¯ç›´æ¥è°ƒç”¨innodbçš„æ¥å£ï¼Œç„¶åä¾æ¬¡æ ¡éªŒ ï¼ˆè¯»å–ç£ç›˜æ•°æ®ï¼ŒéªŒè¯å”¯ä¸€æ€§ï¼‰ä¸»é”®ï¼Œå”¯ä¸€æ€§ç´¢å¼•ï¼Œç„¶åç¡®è®¤æ— è¯¯Aæ—¶åˆ»ä¹‹åï¼Œå§ä¸»é”®å’Œå”¯ä¸€æ€§ç´¢å¼•çš„å†™å…¥å†…å­˜ï¼Œå†æŠŠæ™®é€šç´¢å¼•å†™å…¥change bufferï¼Ÿé‚£æ™®é€šæ•°æ®å‘¢ï¼Œæ˜¯ä¸æ˜¯è·Ÿç€ä¸»é”®ä¸€å—å†™å…¥å†…å­˜äº†ï¼Ÿ","like_count":10,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437677,"discussion_content":"1. æ˜¯çš„ï¼Œå¦‚æœæ™®é€šç´¢å¼•ä¸Šçš„æ•°æ®é¡µè¿™æ—¶å€™æ²¡æœ‰åœ¨å†…å­˜ä¸­ï¼Œå°±ä¼šä½¿ç”¨change buffer\n2. â€œé‚£æ™®é€šæ•°æ®å‘¢ï¼Œæ˜¯ä¸æ˜¯è·Ÿç€ä¸»é”®ä¸€å—å†™å…¥å†…å­˜äº†ï¼Ÿâ€ ä½ è¯´çš„æ˜¯æ— ç´¢å¼•çš„å­—æ®µæ˜¯å§ï¼Œè¿™äº›æ•°æ®å°±åœ¨ä¸»é”®ç´¢å¼•ä¸Šï¼Œå…¶å®æ”¹çš„å°±æ˜¯ä¸»é”®ç´¢å¼•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548492092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63926,"user_name":"700","can_delete":false,"product_type":"c1","uid":1072896,"ip_address":"","ucode":"E4BD0CBADAF951","user_header":"","comment_is_top":false,"comment_ctime":1548599052,"is_pvip":false,"replies":[{"id":"22608","content":"å¯¹ï¼Œå…¶å®åªæœ‰ æ”¹ç´¢å¼•ã€ åŠ æœ€åä¸€åˆ—ã€åˆ æœ€åä¸€åˆ—<br>å…¶ä»–çš„å¤§å¤šæ•°ä¸è¡Œï¼Œæ¯”å¦‚åˆ é™¤ä¸­é—´ä¸€åˆ—è¿™ç§","user_name":"ä½œè€…å›å¤","comment_id":63926,"uid":"1264162","ip_address":"","utype":1,"ctime":1548608637,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"35908337420","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚å®¢æˆ·ç«¯ç‰ˆæœ¬å¦‚ä¸‹ï¼š<br>mysql  Ver 14.14 Distrib 5.7.24, for linux-glibc2.12 (x86_64) using  EditLine wrapper<br><br>è€å¸ˆï¼Œå†è¯·æ•™å¦ä¸€ä¸ªé—®é¢˜ã€‚å¹¶éæ‰€æœ‰çš„ DDL æ“ä½œéƒ½å¯ä»¥é€šè¿‡ä¸»ä»åˆ‡æ¢æ¥å®ç°å§ï¼Ÿä¸é€‚ç”¨çš„åœºæ™¯æœ‰å“ªäº›å‘¢ï¼Ÿ","like_count":9,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437765,"discussion_content":"å¯¹ï¼Œå…¶å®åªæœ‰ æ”¹ç´¢å¼•ã€ åŠ æœ€åä¸€åˆ—ã€åˆ æœ€åä¸€åˆ—\nå…¶ä»–çš„å¤§å¤šæ•°ä¸è¡Œï¼Œæ¯”å¦‚åˆ é™¤ä¸­é—´ä¸€åˆ—è¿™ç§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548608637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63893,"user_name":"åƒå¹´å­¤ç‹¬","can_delete":false,"product_type":"c1","uid":1037215,"ip_address":"","ucode":"282CA1A68E8774","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d3/9f/36ea3be4.jpg","comment_is_top":false,"comment_ctime":1548585278,"is_pvip":false,"replies":[{"id":"22600","content":"åé¢ä¼šæœ‰æ–‡ç« ä¼šæåˆ°è¿™ä¸ªé—®é¢˜å“ˆï¼šï¼‰","user_name":"ä½œè€…å›å¤","comment_id":63893,"uid":"1264162","ip_address":"","utype":1,"ctime":1548593923,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"18728454462","product_id":100020801,"comment_content":"å¯èƒ½ä¸æ˜¯æœ¬ç« è®¨è®ºçš„é—®é¢˜ï¼Œæˆ‘æƒ³è¯·é—®è€å¸ˆâ€œMySQLä½¿ç”¨è‡ªå¢IDå’ŒUUIDä½œä¸ºä¸»é”®çš„ä¼˜åŠ£â€ï¼ŒåŸºäºä»€ä¹ˆæ ·çš„ä¸šåŠ¡åœºæ™¯ç”¨å“ªç§å¥½?","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437752,"discussion_content":"åé¢ä¼šæœ‰æ–‡ç« ä¼šæåˆ°è¿™ä¸ªé—®é¢˜å“ˆï¼šï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548593923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63694,"user_name":"Geek_a67865","can_delete":false,"product_type":"c1","uid":1297527,"ip_address":"","ucode":"FA920F7B6CEB4D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJWjvLFWEzQkszn8nicSaaYFdmE4ribeIicSGu7rfquG3EeuqJYbpHrtThKKDVfDGIib7SE7FBbfuoYDQ/132","comment_is_top":false,"comment_ctime":1548467200,"is_pvip":false,"replies":[{"id":"22538","content":"â€œæˆ‘æš‚æ—¶æ˜¯å¼ºåˆ¶æŸ¥ä¸»åº“â€ ä»è¿™å°±çœ‹ä½ æ˜¯å› ä¸ºè¯»æ˜¯è¯»çš„å¤‡åº“ï¼Œæ‰å‡ºç°è¿™ä¸ªé—®é¢˜çš„æ˜¯å§ã€‚<br><br>å‘æ¡æ©™å­çš„é—®é¢˜æ˜¯ï¼Œä»–éƒ½æ˜¯æ“ä½œä¸»åº“ã€‚<br><br>å…¶å®å¦‚æœç´¢å¼•æœ‰å”¯ä¸€é”®ï¼Œå°±ç›´æ¥ä¸Šinsertã€‚<br>ç„¶åç¢°åˆ°è¿åå”¯ä¸€é”®çº¦æŸå°±æŠ¥é”™ï¼Œè¿™ä¸ªåº”è¯¥å°±æ˜¯å”¯ä¸€é”®çº¦æŸæ­£å¸¸çš„ç”¨æ³•å§ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":63694,"uid":"1264162","ip_address":"","utype":1,"ctime":1548484110,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"18728336384","product_id":100020801,"comment_content":"ä¹Ÿé‡åˆ°@å‘æ¡æ©™å­ä¸€æ ·çš„é—®é¢˜ï¼Œä¾‹å¦‚é˜Ÿåˆ—ä¸¤ä¸ªæ¶ˆæ¯åŒæ—¶æŸ¥è¯¢åº“å­˜ï¼Œå‘ç°éƒ½ä¸å­˜åœ¨ï¼Œç„¶åå°±éƒ½æ‰§è¡Œæ’å…¥è¯­å¥ï¼Œä¸€æ¡æˆåŠŸï¼Œä¸€æ¡æŠ¥å”¯ä¸€ç´¢å¼•å¼‚å¸¸ï¼Œè¿™æ ·ç¨‹åºæ—¥å¿—ä¼šä¸€ç›´æ˜¾ç¤ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•æŠ¥é”™ï¼Œç„¶åé‡è¯•æ‰§è¡Œæ›´æ–°ï¼Œæˆ‘æš‚æ—¶æ˜¯å¼ºåˆ¶æŸ¥ä¸»åº“","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437686,"discussion_content":"â€œæˆ‘æš‚æ—¶æ˜¯å¼ºåˆ¶æŸ¥ä¸»åº“â€ ä»è¿™å°±çœ‹ä½ æ˜¯å› ä¸ºè¯»æ˜¯è¯»çš„å¤‡åº“ï¼Œæ‰å‡ºç°è¿™ä¸ªé—®é¢˜çš„æ˜¯å§ã€‚\n\nå‘æ¡æ©™å­çš„é—®é¢˜æ˜¯ï¼Œä»–éƒ½æ˜¯æ“ä½œä¸»åº“ã€‚\n\nå…¶å®å¦‚æœç´¢å¼•æœ‰å”¯ä¸€é”®ï¼Œå°±ç›´æ¥ä¸Šinsertã€‚\nç„¶åç¢°åˆ°è¿åå”¯ä¸€é”®çº¦æŸå°±æŠ¥é”™ï¼Œè¿™ä¸ªåº”è¯¥å°±æ˜¯å”¯ä¸€é”®çº¦æŸæ­£å¸¸çš„ç”¨æ³•å§ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548484110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63564,"user_name":"æœå˜‰å˜‰","can_delete":false,"product_type":"c1","uid":1306430,"ip_address":"","ucode":"C23DE27E7886BD","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/3e/9c3a8abc.jpg","comment_is_top":false,"comment_ctime":1548402103,"is_pvip":false,"replies":[{"id":"22487","content":"è¿™ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­æ–°ç”Ÿæˆçš„æ•°æ®å—ï¼Ÿ ä¼šå›æ»šçš„","user_name":"ä½œè€…å›å¤","comment_id":63564,"uid":"1264162","ip_address":"","utype":1,"ctime":1548406690,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"18728271287","product_id":100020801,"comment_content":"æˆ‘æƒ³è¯·é—®ä¸‹è€å¸ˆï¼Œä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œå¾ˆé•¿æ—¶é—´ï¼Œæˆ‘å»killã€‚é‚£ä¹ˆï¼Œæ‰§è¡Œè¿™ä¸ªäº‹åŠ¡è¿‡ç¨‹ä¸­çš„æ•°æ®ä¼šä¸ä¼šå›æ»šï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437636,"discussion_content":"è¿™ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­æ–°ç”Ÿæˆçš„æ•°æ®å—ï¼Ÿ ä¼šå›æ»šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548406690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":75893,"user_name":"ä¼¼æ°´æµå¹´","can_delete":false,"product_type":"c1","uid":1304443,"ip_address":"","ucode":"D114A8E273133C","user_header":"https://static001.geekbang.org/account/avatar/00/13/e7/7b/71da8283.jpg","comment_is_top":false,"comment_ctime":1552488770,"is_pvip":false,"replies":[{"id":"30227","content":"å°±æ˜¯å›æ»šçš„å½±å“ï¼Œæ²¡æœ‰å…¶ä»–çš„äº†","user_name":"ä½œè€…å›å¤","comment_id":75893,"uid":"1264162","ip_address":"","utype":1,"ctime":1554655788,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":2,"race_medal":0,"score":"14437390658","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®æˆ‘ç›´æ¥åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ç”¨killå‘½ä»¤æ‰ä¼šè¯çš„è¿›ç¨‹ï¼Œè¿™ä¸ªä¼šè¯çš„äº‹ç‰©åº”è¯¥ä¼šå›æ»šï¼Œé™¤æ­¤å¤–æœ‰ä¸è‰¯å½±å“å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443078,"discussion_content":"å°±æ˜¯å›æ»šçš„å½±å“ï¼Œæ²¡æœ‰å…¶ä»–çš„äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554655788,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1320092,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM4z9WYWVvWDhMF0SicPE5ad56ME6DibyWGbRoQa0lH4U9icdsjNcv3ssRickcuRMDA01e6vMXnmOVSr9l5LVUefVxicn/132","nickname":"black_mirror","note":"","ucode":"2549C87298BF12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":70611,"discussion_content":"å¦‚æœæ˜¯åœ¨æ“ä½œç³»ç»Ÿå±‚é¢kill mysqlçº¿ç¨‹ä¼šå¯¼è‡´è¿›ç¨‹crash","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575372830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":66993,"user_name":"think_wtw","can_delete":false,"product_type":"c1","uid":1040190,"ip_address":"","ucode":"18FFBDBF7CDCD1","user_header":"https://static001.geekbang.org/account/avatar/00/0f/df/3e/5f60dfde.jpg","comment_is_top":false,"comment_ctime":1550051956,"is_pvip":false,"replies":[{"id":"23783","content":"å¯¹ï¼Œè¿›è¡Œå›æ»š<br><br>å–å†³äºåšåˆ°ä»€ä¹ˆç¨‹åº¦äº†ï¼Œæ€»ä¹‹æ•ˆæœå°±æ˜¯ä¸­é—´ç”Ÿæˆçš„æ•°æ®å…¨éƒ¨æ¸…ç†æ‰ï¼Œæ¢å¤åˆ°æœªæ‰§è¡Œddlä¹‹å‰çš„çŠ¶æ€","user_name":"ä½œè€…å›å¤","comment_id":66993,"uid":"1264162","ip_address":"","utype":1,"ctime":1550112361,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"14434953844","product_id":100020801,"comment_content":"è€å¸ˆå¦‚æœæ­£åœ¨æ‰§è¡Œddl æ¯”å¦‚åˆ é™¤ä¸€åˆ—æˆ–è€…åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œæ‰§è¡Œkill queryä¹Ÿæ˜¯äº‹ç‰©è¿›è¡Œå›æ»šçš„æ˜¯å—ï¼Ÿå†…éƒ¨ä¼šåšä»€ä¹ˆæ“ä½œï¼Ÿ æ¥å¾—æ™šè¿˜æ²¡è¿½ä¸Šè¯¾ç¨‹ã€‚è°¢è°¢è§£ç­”ï¼","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":439005,"discussion_content":"å¯¹ï¼Œè¿›è¡Œå›æ»š\n\nå–å†³äºåšåˆ°ä»€ä¹ˆç¨‹åº¦äº†ï¼Œæ€»ä¹‹æ•ˆæœå°±æ˜¯ä¸­é—´ç”Ÿæˆçš„æ•°æ®å…¨éƒ¨æ¸…ç†æ‰ï¼Œæ¢å¤åˆ°æœªæ‰§è¡Œddlä¹‹å‰çš„çŠ¶æ€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1550112361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63457,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1548378532,"is_pvip":false,"replies":[{"id":"22456","content":"è¿™ä¸ªäº‹åŠ¡ç°åœ¨æ˜¯å¤„äºå›æ»šçŠ¶æ€ï¼Œ å³ä½¿æœ‰å…¶ä»–äº‹åŠ¡åœ¨æ‰§è¡Œï¼Œé‡å¯åä¹Ÿæ˜¯è¦å›æ»šçš„ï¼Œè·Ÿæœ‰æ²¡æœ‰å…¶ä»–äº‹åŠ¡åœ¨å¹¶è¡Œæ‰§è¡Œæ˜¯æ²¡å…³ç³»çš„å“¦","user_name":"ä½œè€…å›å¤","comment_id":63457,"uid":"1264162","ip_address":"","utype":1,"ctime":1548382056,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"14433280420","product_id":100020801,"comment_content":"å¦‚æœæ­¤æ—¶ä»…æœ‰ä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œ,å¯ä»¥é‡å¯,æ­¤æ—¶ redo log æ²¡æœ‰è¢«fsync åˆ°ç£ç›˜,é‡æ–°å¯åŠ¨æ¢å¤çš„æ—¶å€™ä¹Ÿä¸ä¼šæäº¤è¯¥äº‹åŠ¡<br>å¦‚æœæœ‰å…¶ä»–äº‹åŠ¡åœ¨æ‰§è¡Œ,å°±åº”è¯¥ç­‰å¾…æ‰§è¡Œå®Œæˆ<br>è€å¸ˆè¿™æ ·ç†è§£å¯¹å—,è°¢è°¢è€å¸ˆ","like_count":3,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437595,"discussion_content":"è¿™ä¸ªäº‹åŠ¡ç°åœ¨æ˜¯å¤„äºå›æ»šçŠ¶æ€ï¼Œ å³ä½¿æœ‰å…¶ä»–äº‹åŠ¡åœ¨æ‰§è¡Œï¼Œé‡å¯åä¹Ÿæ˜¯è¦å›æ»šçš„ï¼Œè·Ÿæœ‰æ²¡æœ‰å…¶ä»–äº‹åŠ¡åœ¨å¹¶è¡Œæ‰§è¡Œæ˜¯æ²¡å…³ç³»çš„å“¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548382056,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":280482,"user_name":"èŒ¶æ²¡å–å®Œ","can_delete":false,"product_type":"c1","uid":1644104,"ip_address":"","ucode":"D72D88C42A1258","user_header":"https://static001.geekbang.org/account/avatar/00/19/16/48/09493874.jpg","comment_is_top":false,"comment_ctime":1614230846,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10204165438","product_id":100020801,"comment_content":"killåªæ˜¯ä¿®æ”¹äº†çº¿ç¨‹çŠ¶æ€+å‘å‡ºä¸­æ–­ä¿¡å·  <br>å…·ä½“è¢«ä¸­æ–­çš„çº¿ç¨‹åœ¨æ”¶åˆ°ä¸­æ–­ä¿¡å·æ€ä¹ˆå¤„ç†ï¼Œç”±å®ƒè‡ªå·±å†³å®šã€‚<br>ç›´æ¥æ€æ­»çº¿ç¨‹æ˜¯ä¸å®‰å…¨çš„ï¼Œçº¿ç¨‹å ç”¨çš„èµ„æºæ²¡æ³•é‡Šæ”¾ï¼Œå›æ»šæ“ä½œæ²¡å®Œæˆç­‰ç­‰ã€‚","like_count":1},{"had_liked":false,"id":64114,"user_name":"æ–œé¢é•œå­ Bill","can_delete":false,"product_type":"c1","uid":1305242,"ip_address":"","ucode":"B5505F94540D52","user_header":"https://static001.geekbang.org/account/avatar/00/13/ea/9a/02d589f9.jpg","comment_is_top":false,"comment_ctime":1548670084,"is_pvip":false,"replies":[{"id":"22669","content":"å µä½äº†ä¸å°±å˜æ…¢äº†ğŸ˜†","user_name":"ä½œè€…å›å¤","comment_id":64114,"uid":"1264162","ip_address":"","utype":1,"ctime":1548682518,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"10138604676","product_id":100020801,"comment_content":"â€œé‡‡ç”¨ä¸ç¼“å­˜çš„æ–¹å¼æ—¶ï¼Œå¦‚æœæœ¬åœ°å¤„ç†å¾—æ…¢ï¼Œå°±ä¼šå¯¼è‡´æœåŠ¡ç«¯å‘é€ç»“æœè¢«é˜»å¡ï¼Œå› æ­¤ä¼šè®©æœåŠ¡ç«¯å˜æ…¢â€ è¿™ä¸ªæ€ä¹ˆç†è§£ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437864,"discussion_content":"å µä½äº†ä¸å°±å˜æ…¢äº†ğŸ˜†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548682518,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63751,"user_name":"Geek_a67865","can_delete":false,"product_type":"c1","uid":1297527,"ip_address":"","ucode":"FA920F7B6CEB4D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJWjvLFWEzQkszn8nicSaaYFdmE4ribeIicSGu7rfquG3EeuqJYbpHrtThKKDVfDGIib7SE7FBbfuoYDQ/132","comment_is_top":false,"comment_ctime":1548486876,"is_pvip":false,"replies":[{"id":"22561","content":"å—¯å—¯ ä¸è¿‡æˆ‘ä¹Ÿç¡®å®æ²¡æœ‰æƒ³åˆ°æ›´å¥½çš„æ–¹æ³•<br>æ¯•ç«Ÿä¸¤ä¸ªçº¿ç¨‹è¦åŒæ—¶å‘èµ·ä¸€ä¸ªinsertæ“ä½œï¼Œè¿™ä¸ªæœåŠ¡ç«¯ä¹Ÿæ‹¦ä¸ä½å‘€ğŸ˜†<br>","user_name":"ä½œè€…å›å¤","comment_id":63751,"uid":"1264162","ip_address":"","utype":1,"ctime":1548515347,"user_name_real":"æ—æ™“æ–Œ"}],"discussion_count":1,"race_medal":0,"score":"5843454172","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘çŒœå‘æ¡æ©™å­çš„é—®é¢˜ å› ä¸ºå¾ˆå¤šæ—¥å¿—ç›‘æ§ä¼šç»Ÿè®¡erroræ—¥å¿—ï¼Œè¿™æ ·å¹¶ä¸å¾ˆä¼˜é›…ï¼Œè§‰å¾—ä»–æ˜¯æƒ³æœ‰ä»€ä¹ˆåŠæ³•è§„é¿è¿™ç§å¹¶å‘å¼•èµ·çš„é—®é¢˜ï¼Œ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437704,"discussion_content":"å—¯å—¯ ä¸è¿‡æˆ‘ä¹Ÿç¡®å®æ²¡æœ‰æƒ³åˆ°æ›´å¥½çš„æ–¹æ³•\næ¯•ç«Ÿä¸¤ä¸ªçº¿ç¨‹è¦åŒæ—¶å‘èµ·ä¸€ä¸ªinsertæ“ä½œï¼Œè¿™ä¸ªæœåŠ¡ç«¯ä¹Ÿæ‹¦ä¸ä½å‘€ğŸ˜†\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548515347,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63653,"user_name":"700","can_delete":false,"product_type":"c1","uid":1072896,"ip_address":"","ucode":"E4BD0CBADAF951","user_header":"","comment_is_top":false,"comment_ctime":1548435813,"is_pvip":false,"replies":[{"id":"22542","content":"1. ä½ çš„å®¢æˆ·ç«¯ç‰ˆæœ¬æ˜¯ä»€ä¹ˆ mysql --version çœ‹çœ‹<br>3. å—¯ï¼Œæ˜¯çš„ï¼Œè¿æ¥ä¼šæ–­å¼€ï¼Œä½†æ˜¯è¿™ä¸ªè¯­å¥åœ¨serverç«¯è¿˜æ˜¯ä¼šç»§ç»­æ‰§è¡Œ ï¼ˆå¦‚æœkill query æ— æ•ˆçš„è¯ï¼‰","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548491830,"ip_address":"","comment_id":63653,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5843403109","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ã€‚æˆ‘ç»§ç»­æ¥ç€æˆ‘ä¸Šæ¡ç•™è¨€ã€‚<br>å…³äº2ï¼‰ï¼Œå› ä¸ºæ˜¯æµ‹è¯•æœºï¼Œæˆ‘æ˜¯ç›´æ¥ tail -0f è§‚å¯Ÿ general log è¾“å‡ºçš„ã€‚ç¡®å®æ²¡çœ‹åˆ° KILL QUERY ç­‰å­—çœ¼ã€‚æ•°æ®åº“ç‰ˆæœ¬æ˜¯ MySQL 5.7.24ã€‚<br>å…³äº4ï¼‰ï¼Œæ–‡ä¸­æ‚¨ä¸æ˜¯è¿™æ ·è¯´çš„å—ï¼Ÿ<br>2.ä½†æ˜¯ session D æ‰§è¡Œçš„ kill query C å‘½ä»¤å´æ²¡ä»€ä¹ˆæ•ˆæœï¼Œ <br>3.ç›´åˆ° session E æ‰§è¡Œäº† kill connection å‘½ä»¤ï¼Œæ‰æ–­å¼€äº† session C çš„è¿æ¥ï¼Œæç¤ºâ€œLost connection to MySQL server during queryâ€ï¼Œ <br><br>æ„Ÿè°¢æ‚¨çš„è§£ç­”ã€‚<br>","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437671,"discussion_content":"1. ä½ çš„å®¢æˆ·ç«¯ç‰ˆæœ¬æ˜¯ä»€ä¹ˆ mysql --version çœ‹çœ‹\n3. å—¯ï¼Œæ˜¯çš„ï¼Œè¿æ¥ä¼šæ–­å¼€ï¼Œä½†æ˜¯è¿™ä¸ªè¯­å¥åœ¨serverç«¯è¿˜æ˜¯ä¼šç»§ç»­æ‰§è¡Œ ï¼ˆå¦‚æœkill query æ— æ•ˆçš„è¯ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548491830,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1320092,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM4z9WYWVvWDhMF0SicPE5ad56ME6DibyWGbRoQa0lH4U9icdsjNcv3ssRickcuRMDA01e6vMXnmOVSr9l5LVUefVxicn/132","nickname":"black_mirror","note":"","ucode":"2549C87298BF12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310262,"discussion_content":"SQL> select version();\n+---------------+\n| version()     |\n+---------------+\n| 5.7.31-34-log |\n+---------------+\n1 row in set (0.00 sec)\n\n\nmysql db1 -e &#39;select sleep(100) from t&#39;\n2020-10-03T18:26:40.834620+08:00            9 Connect   root@127.0.0.1 on db1 using TCP/IP\n2020-10-03T18:26:40.834900+08:00            9 Query     select @@version_comment limit 1\n2020-10-03T18:26:40.835149+08:00            9 Query     select sleep(100) from t\n\n2020-10-03T18:26:56.461090+08:00           10 Connect   root@127.0.0.1 on  using TCP/IP\n2020-10-03T18:26:56.461337+08:00           10 Query     KILL QUERY 9\n2020-10-03T18:26:56.463062+08:00            9 Quit\n2020-10-03T18:26:56.463325+08:00           10 Quit","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1601720957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63632,"user_name":"Justin","can_delete":false,"product_type":"c1","uid":1305601,"ip_address":"","ucode":"D49723FEA66731","user_header":"https://static001.geekbang.org/account/avatar/00/13/ec/01/978d54af.jpg","comment_is_top":false,"comment_ctime":1548424491,"is_pvip":false,"replies":[{"id":"22502","content":"åªä¼šé”å·¦å³ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548433875,"ip_address":"","comment_id":63632,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5843391787","product_id":100020801,"comment_content":"æƒ³å’¨è¯¢ä¸€ä¸ªé—®é¢˜ å¦‚æœèµ°ç´¢å¼•æ‰¾å¯»æ¯”å¦‚age=11çš„äººçš„æ—¶å€™æ˜¯åªä¼šé”age=10åˆ°age=12å— å¦‚æœé‚£ä¸ªç´¢å¼•é¡µåŒ…å«äº†ä»5åˆ°13çš„æ•°æ® æ˜¯åªä¼šé”ç¦»11æœ€è¿‘çš„è¿˜æ˜¯è¯´äºŒåˆ†æŸ¥æ‰¾æ—¶å€™æ¯ä¸€ä¸ªè®¿é—®åˆ°çš„éƒ½ä¼šé”å‘¢","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437661,"discussion_content":"åªä¼šé”å·¦å³ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548433875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63573,"user_name":"å‘æ¡æ©™å­ ã€‚","can_delete":false,"product_type":"c1","uid":1259218,"ip_address":"","ucode":"ED076F4534FFED","user_header":"https://static001.geekbang.org/account/avatar/00/13/36/d2/c7357723.jpg","comment_is_top":false,"comment_ctime":1548403747,"is_pvip":false,"replies":[{"id":"22489","content":"æœ‰å”¯ä¸€ç´¢å¼•äº†ï¼Œå°±ç›´æ¥æ’å…¥ï¼Œç„¶åå‡ºç°å”¯ä¸€æ€§çº¦æŸå°±æ”¾å¼ƒï¼Œè¿™ä¸ªé€»è¾‘çš„é—®é¢˜æ˜¯å•¥ï¼Œæˆ‘æ„Ÿè§‰æŒºå¥½çš„å‘€ğŸ˜…<br>æ˜¯ä¸æ˜¯æˆ‘æ²¡æœ‰getåˆ°é—®é¢˜çš„ç‚¹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548408565,"ip_address":"","comment_id":63573,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5843371043","product_id":100020801,"comment_content":"è€å¸ˆæˆ‘è¿™é‡Œé—®ä¸€ä¸‹å”¯ä¸€ç´¢å¼•çš„é—®é¢˜ ï¼Œå¸Œæœ›è€å¸ˆèƒ½ç»™ç‚¹æ€è·¯<br><br>èƒŒæ™¯ ï¼š ä¸€å¼ å•†å“åº“å­˜è¡¨ ï¼Œ å¦‚æœè¡¨é‡Œæ²¡è¿™ä¸ªå•†å“åˆ™æ’å…¥ ï¼Œå¦‚æœå·²ç»å­˜åœ¨å°±æ›´æ–°åº“å­˜ ã€‚åŒæ­¥è¿™ä¸ªåº“å­˜è¡¨æ˜¯å¼‚æ­¥çš„ ï¼Œæ¯æ¬¡æ·»åŠ å•†å“åº“å­˜æˆåŠŸåä¼šå‘æ¶ˆæ¯ ï¼Œ æ”¶åˆ°æ¶ˆæ¯åä¼šå»è¡¨é‡Œæ–°å¢&#47;æ›´æ–°åº“å­˜<br><br>é—®é¢˜ ï¼š <br>å•†å“åº“å­˜è¡¨ä¼šæœ‰ä¸€ä¸ª å•†å“çš„å”¯ä¸€ç´¢å¼•ã€‚<br>å½“æˆ‘ä»¬æ‰¹é‡æ·»åŠ åŒä¸€å•†å“åº“å­˜åä¼šæ‰¹é‡å‘æ¶ˆæ¯ ï¼Œæ¶ˆæ¯åŒæ—¶ç”Ÿæ•ˆåå»å¤„ç†å°±æœ‰äº†å¹¶å‘çš„é—®é¢˜ ã€‚è¿™æ—¶å€™ä¸¤ä¸ªæ¶ˆæ¯éƒ½åˆ¤æ–­è¡¨é‡Œæ²¡æœ‰è¯¥å•†å“è®°å½•ï¼Œ ä½†æ˜¯æ’å…¥çš„æ—¶å€™å°±ä¼šæœ‰ä¸€ä¸ªæ¶ˆæ¯æ’å…¥æˆåŠŸï¼Œå¦ä¸€ä¸ªæ¶ˆæ¯æ‰§è¡Œå¤±è´¥æŠ¥å”¯ä¸€ç´¢å¼•çš„é”™è¯¯ï¼Œ ä¹‹åæ¶ˆæ¯é‡è¯•èµ°æ›´æ–°çš„é€»è¾‘ã€‚<br><br>è¿™ä¸ªè¿™æ ·åšå¯¹ä¸šåŠ¡æ²¡æœ‰å½±å“ ï¼Œä½†æ˜¯ç°åœ¨æ‰¹é‡æ·»åŠ çš„éœ€æ±‚é‡ä¸Šæ¥äº† ï¼Œçº¿ä¸Šä¸€ç›´æŠ¥è¿™ç§é”™è¯¯æ—¥å¿—ä¹Ÿä¸æ˜¯ä¸ªåŠæ³•ï¼Œ æˆ‘èƒ½æƒ³åˆ°çš„é™¤äº† catch æ‰è¿™ä¸ªå¼‚å¸¸å°±æ²¡ä»€ä¹ˆå…¶ä»–æ€è·¯äº†ã€‚ <br><br>è€å¸ˆèƒ½ç»™ä¸€äº›å…¶ä»–çš„æ€è·¯ä¹ˆ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437643,"discussion_content":"æœ‰å”¯ä¸€ç´¢å¼•äº†ï¼Œå°±ç›´æ¥æ’å…¥ï¼Œç„¶åå‡ºç°å”¯ä¸€æ€§çº¦æŸå°±æ”¾å¼ƒï¼Œè¿™ä¸ªé€»è¾‘çš„é—®é¢˜æ˜¯å•¥ï¼Œæˆ‘æ„Ÿè§‰æŒºå¥½çš„å‘€ğŸ˜…\næ˜¯ä¸æ˜¯æˆ‘æ²¡æœ‰getåˆ°é—®é¢˜çš„ç‚¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548408565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1812970,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/a9/ea/5bfce6c5.jpg","nickname":"mgs2002","note":"","ucode":"F5931108BD509B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296962,"discussion_content":"ä¹Ÿå¯ä»¥ä½¿ç”¨ä¹è§‚é”ï¼Œä½†æ˜¯ä¸€å®šè¦ç”¨å”¯ä¸€ç´¢å¼•å…œåº•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596715681,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63475,"user_name":"ä¸œé’","can_delete":false,"product_type":"c1","uid":1001046,"ip_address":"","ucode":"D7FF3299721F19","user_header":"https://static001.geekbang.org/account/avatar/00/0f/46/56/5e83f44b.jpg","comment_is_top":false,"comment_ctime":1548380909,"is_pvip":false,"replies":[{"id":"22465","content":"ä»£ç å®ç°ä¸Šï¼Œäº‹åŠ¡ç”Ÿæˆtrxidåï¼Œtrxidçš„åˆ†é…å™¨ä¼š+1ï¼Œä»¥è¿™ä¸ªåŠ 1ä»¥åçš„æ•°ä½œä¸ºé«˜æ°´ä½ï¼Œæ‰€ä»¥â€œç­‰äºâ€æ˜¯ä¸ç®—çš„ã€‚<br><br>å…¶å®æœ‰æ²¡æœ‰åŒ…å«æ˜¯ä¸€æ ·çš„ï¼Œå®ç°ä¸Šæ²¡æœ‰åŒ…å«ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548399932,"ip_address":"","comment_id":63475,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5843348205","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·æ•™ä¸€ä¸ª ç¬¬å…«ç«  çš„é—®é¢˜ã€‚å…³äºå¯è§æ€§åˆ¤æ–­ï¼Œæ–‡ä¸­éƒ½æ˜¯è¯´äº‹åŠ¡idå¤§äºé«˜æ°´ä½éƒ½ä¸å¯è§ã€‚å¦‚æœç­‰äºæ˜¯ä¸æ˜¯ä¹Ÿä¸å¯è§ã€‚è¿˜æœ‰ä¸€ä¸ªï¼Œreadviewä¸­æ˜¯å¦ä¸åŒ…å«å½“å‰äº‹åŠ¡idã€‚è°¢è°¢è€å¸ˆ","like_count":1,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437603,"discussion_content":"ä»£ç å®ç°ä¸Šï¼Œäº‹åŠ¡ç”Ÿæˆtrxidåï¼Œtrxidçš„åˆ†é…å™¨ä¼š+1ï¼Œä»¥è¿™ä¸ªåŠ 1ä»¥åçš„æ•°ä½œä¸ºé«˜æ°´ä½ï¼Œæ‰€ä»¥â€œç­‰äºâ€æ˜¯ä¸ç®—çš„ã€‚\n\nå…¶å®æœ‰æ²¡æœ‰åŒ…å«æ˜¯ä¸€æ ·çš„ï¼Œå®ç°ä¸Šæ²¡æœ‰åŒ…å«ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548399932,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63474,"user_name":"Ryoma","can_delete":false,"product_type":"c1","uid":1130590,"ip_address":"","ucode":"7F692369239692","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/5e/b8fada94.jpg","comment_is_top":false,"comment_ctime":1548380794,"is_pvip":true,"discussion_count":0,"race_medal":2,"score":"5843348090","product_id":100020801,"comment_content":"æƒ³å¾—ç®€å•ç‚¹ï¼šæ—¢ç„¶äº‹åŠ¡å¤„äºå›æ»šçŠ¶æ€äº†ï¼Œé‡å¯MySQLè¿™éƒ¨åˆ†äº‹åŠ¡è¿˜æ˜¯éœ€è¦å›æ»šã€‚ç§ä»¥ä¸ºè®©å®ƒæ‰§è¡Œå®Œæˆæ¯”è¾ƒå¥½ã€‚ ","like_count":1},{"had_liked":false,"id":345207,"user_name":"ZHI","can_delete":false,"product_type":"c1","uid":1762602,"ip_address":"","ucode":"573BB83EC7086D","user_header":"https://static001.geekbang.org/account/avatar/00/1a/e5/2a/38e4c07e.jpg","comment_is_top":false,"comment_ctime":1652108662,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1652108662","product_id":100020801,"comment_content":"æˆ‘æ‰§è¡Œ kill connection tid åï¼Œå®¢æˆ·ç«¯è¿˜åœ¨é˜»å¡ï¼Œshow processlist å‘ç°çº¿ç¨‹å·åŠ ä¸€äº†ï¼›æ€ä¹ˆå›äº‹ï¼Ÿ","like_count":0},{"had_liked":false,"id":344337,"user_name":"æ ¸æ¡ƒ","can_delete":false,"product_type":"c1","uid":1385204,"ip_address":"","ucode":"7AB05270CBCCCB","user_header":"https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg","comment_is_top":false,"comment_ctime":1651478413,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1651478413","product_id":100020801,"comment_content":"å…³äºæ€è€ƒé¢˜ï¼Œæˆ‘æ˜¯ææ–‡ä»¶ç³»ç»Ÿçš„ï¼Œé‡åˆ°è¿‡ä¸€ä¸ªèŠ‚ç‚¹è´Ÿè½½å¾ˆé«˜ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½æ²¡æ³•æ‰§è¡Œè¿”å›ï¼ŒåŒ…æ‹¬æŸ¥è¯¢ã€‚ä½†æ˜¯ååé›†ç¾¤æ²¡æœ‰æ˜¾ç¤ºå®•æœºã€‚é‚£æ—¶å€™å·²ç»å½±å“åˆ°èŠ‚ç‚¹å…¶ä»–ä¸šåŠ¡äº†ï¼Œæ‰€ä»¥åé¢è¿˜æ˜¯é€šè¿‡ä¸šåŠ¡æ‹†åˆ†åˆ†æµäº†å‹åŠ›æ‰å¥½ä¸€äº›çš„ã€‚","like_count":0},{"had_liked":false,"id":304073,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1627222285,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"1627222285","product_id":100020801,"comment_content":"å¯¹äº mysql çš„å„ç§ç¨‹åºåº“ï¼Œæ˜¯ä¸æ˜¯å»ºç«‹è¿æ¥çš„æ—¶å€™ é»˜è®¤éƒ½è¦åŠ  -A å‚æ•°å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":303055,"user_name":"somenzz","can_delete":false,"product_type":"c1","uid":1187197,"ip_address":"","ucode":"EA59A170DF8910","user_header":"https://static001.geekbang.org/account/avatar/00/12/1d/7d/368df396.jpg","comment_is_top":false,"comment_ctime":1626562671,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1626562671","product_id":100020801,"comment_content":"åªèƒ½ç­‰å¾…å›æ»šå®Œæˆï¼Œå› ä¸ºè¿™æ˜¯æ•°æ®åº“äº‹åŠ¡çš„ç‰¹æ€§å†³å®šçš„ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œå³ä½¿é‡å¯æ•°æ®åº“ï¼Œä¾ç„¶ä¼šæ˜¯å›æ»šçŠ¶æ€ã€‚","like_count":0},{"had_liked":false,"id":288863,"user_name":"KK","can_delete":false,"product_type":"c1","uid":1096397,"ip_address":"","ucode":"14C0858C413E00","user_header":"https://static001.geekbang.org/account/avatar/00/10/ba/cd/1f91aa44.jpg","comment_is_top":false,"comment_ctime":1618736164,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1618736164","product_id":100020801,"comment_content":"æˆ‘è§‰å¾—æ—¢ç„¶æ˜¯çº¿ç¨‹æ‰§è¡Œï¼Œæ˜¯å¼‚æ­¥å¤„ç†ï¼Œæƒ³è®©çº¿ç¨‹åœæ­¢ï¼Œåªæœ‰å‡ ç§æ–¹å¼ï¼š1. çº¿ç¨‹è‡ªè¡Œè¿›è¡Œç»ˆæ­¢æ¡ä»¶åˆ¤æ–­ï¼Œsleepç­‰å¾…ï¼›2. çº¿ç¨‹èƒ½å¤Ÿå“åº”ä¸­æ–­ä¿¡å·ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹å¤„äºå¯ä¸­æ–­çŠ¶æ€ï¼›3. çº¿ç¨‹èƒ½å¤Ÿå“åº”æ¯’ä¸¸è¯·æ±‚<br>ä¸–ç•Œæ˜¯å¼‚æ­¥çš„ï¼Œæƒ³è¦åœæ­¢ï¼Œåªæœ‰å‘æ¶ˆæ¯ã€‚è¦ä¸ç„¶å°±ç ´åï¼ˆé‡å¯ï¼‰ä¸–ç•Œ.","like_count":0},{"had_liked":false,"id":242681,"user_name":"è‚–é¹","can_delete":false,"product_type":"c1","uid":1302602,"ip_address":"","ucode":"BE1B8BD7053B9A","user_header":"https://static001.geekbang.org/account/avatar/00/13/e0/4a/c0a3cb3f.jpg","comment_is_top":false,"comment_ctime":1597809084,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1597809084","product_id":100020801,"comment_content":"8.0.16ç‰ˆæœ¬æœ‰ä¸ªbugï¼Œä¼šå¯¼è‡´selectè¯­å¥è¢«killä¹‹åæ°¸è¿œåœ¨å“ªï¼Œä¼šæŠŠundoæ’‘çš„å¾ˆå¤§ï¼Œåªæœ‰é‡å¯è§£å†³ã€‚è¿™ä¸ªbugåœ¨8.0.20ç‰ˆæœ¬ä¿®å¤ã€‚","like_count":0},{"had_liked":false,"id":230750,"user_name":"ç¾ç¾","can_delete":false,"product_type":"c1","uid":1148422,"ip_address":"","ucode":"44CC95C45AF345","user_header":"https://static001.geekbang.org/account/avatar/00/11/86/06/72b01bb7.jpg","comment_is_top":false,"comment_ctime":1593482792,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593482792","product_id":100020801,"comment_content":"sending dataè¿™ä¸ªçŠ¶æ€æ˜¯ä¸æ˜¯è®¾ç½®å¾—ä¸å¤ªåˆé€‚ï¼Œå¾ˆå®¹æ˜“å¼•èµ·æ­§ä¹‰ğŸ˜‚ ","like_count":0},{"had_liked":false,"id":201184,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1303038,"ip_address":"","ucode":"30D659BD4BD0AA","user_header":"","comment_is_top":false,"comment_ctime":1585729226,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1585729226","product_id":100020801,"comment_content":"è€å¸ˆå¥½ï¼Œæˆ‘é‡åˆ°äº†SELECT è¯­å¥ KILLäº†ä¹‹åä¹Ÿä¸€ç›´ä¸ä¼šæ¶ˆå¤±çš„æƒ…å†µï¼Œè¿˜ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ã€‚ï¼ˆå›æ»šäº†å¾ˆé•¿æ—¶é—´å‡ å¤©ä¹Ÿæ²¡å®Œæˆï¼‰<br>INNODB_TRX è¿™ä¸ªè¡¨æ˜¯ç©ºçš„ï¼Œä¸åƒæ˜¯äº‹åŠ¡ã€‚<br>è¯­å¥å¾ˆç®€å•ï¼šSELECT `TAG` FROM refer_map WHERE `REFER` = &#39;1_1006948_10565_1047-lyle&#39; AND `TYPE` = 5 AND `STATE` = 1<br>è¿™ä¸ªè¡¨ä¹Ÿåªæœ‰3.3G<br>çœ‹æ ·å­åªèƒ½é€šè¿‡é‡å¯è§£å†³ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331837,"discussion_content":"å¯èƒ½æ˜¯å…¨è¡¨æ‰«æ è¡Œæ•°æ¯”è¾ƒå¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606990800,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":195663,"user_name":"ä¹”ä¸¹","can_delete":false,"product_type":"c1","uid":1217413,"ip_address":"","ucode":"D832A9F97A0C7E","user_header":"https://static001.geekbang.org/account/avatar/00/12/93/85/f5d9474c.jpg","comment_is_top":false,"comment_ctime":1585210383,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585210383","product_id":100020801,"comment_content":"æˆ‘çš„è§£ç­”æ˜¯ï¼šç­‰è¯¥äº‹åŠ¡ç»“æŸã€‚å› ä¸ºmysql restartä¹Ÿæ˜¯è¦ç­‰äº‹åŠ¡å®Œæˆ, å°†è„é¡µå…¨éƒ¨åˆ·å…¥ç¡¬ç›˜ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šæ›´ä¹…ã€‚","like_count":0},{"had_liked":false,"id":174362,"user_name":"Zhaoyang","can_delete":false,"product_type":"c1","uid":1037190,"ip_address":"","ucode":"131D83AC2566D2","user_header":"https://static001.geekbang.org/account/avatar/00/0f/d3/86/b5d72c87.jpg","comment_is_top":false,"comment_ctime":1580181051,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1580181051","product_id":100020801,"comment_content":"kill connection å…¶å®å°±æ˜¯å…³é—­äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ï¼Œä½†æ˜¯æŸ¥è¯¢è¿˜ä¼šåœ¨ç»§ç»­ã€‚show processlist ä¼šå°†æ˜¾ç¤ºä¸ºkilledï¼Œä½†æ˜¯åé¢çš„æ‰§è¡Œæµç¨‹è¿˜æ˜¯ä¼šèµ°kill queryï¼Œæ‰€ä»¥å°±æ˜¯éœ€è¦ç­‰åé¢çš„æµç¨‹å»æ‰§è¡Œäº†ã€‚åªèƒ½ç­‰å¾…ã€‚","like_count":0},{"had_liked":false,"id":164903,"user_name":"superFan","can_delete":false,"product_type":"c1","uid":1103116,"ip_address":"","ucode":"AA0FFEF391488D","user_header":"https://static001.geekbang.org/account/avatar/00/10/d5/0c/8dd1791d.jpg","comment_is_top":false,"comment_ctime":1577108777,"is_pvip":false,"replies":[{"id":"62840","content":"è¿™ç§è¦çœ‹ä¸€ä¸‹å½“æ—¶åœ¨åšä»€ä¹ˆ<br>ä¸‹æ¬¡å‡ºç°çš„æ—¶å€™ï¼Œä½ pstack &lt;pid of mysqld&gt; &gt; &#47;tmp&#47;pstack.1<br>å‘æ¥çœ‹ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1577113286,"ip_address":"","comment_id":164903,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577108777","product_id":100020801,"comment_content":"è€å¸ˆ,æˆ‘è¿™è¾¹æ— æ³•killæ‰, å°è¯• &#47;etc&#47;init.d&#47;mysqld stop æŠ¥&quot;Timeout error occurred trying to stop MySQL Daemon&quot;, å°è¯•é…ç½®å¤§sotpçš„timeoutä¹Ÿä¸è¡Œ,åƒè¿™ç§æƒ…å†µæœ‰ä»€ä¹ˆæ–¹æ³•æ¢å¤å—","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478941,"discussion_content":"è¿™ç§è¦çœ‹ä¸€ä¸‹å½“æ—¶åœ¨åšä»€ä¹ˆ\nä¸‹æ¬¡å‡ºç°çš„æ—¶å€™ï¼Œä½ pstack &amp;lt;pid of mysqld&amp;gt; &amp;gt; /tmp/pstack.1\nå‘æ¥çœ‹ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577113286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":161579,"user_name":"J","can_delete":false,"product_type":"c1","uid":1328651,"ip_address":"","ucode":"C2A0069B3738A9","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/0b/26b16e63.jpg","comment_is_top":false,"comment_ctime":1576237840,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1576237840","product_id":100020801,"comment_content":"è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹ 5.6å¯¹è¡¨è¿›è¡Œå‹ç¼©çš„æ—¶å€™ï¼Œå°†æ“ä½œkillæ‰ï¼Œä»–ä¼šç­‰åˆ°è¡¨å‹ç¼©è¿™ä¸ªåŠ¨ä½œç»“æŸååœ¨å½»åº•é€€å‡ºæ“ä½œç ","like_count":0},{"had_liked":false,"id":153376,"user_name":"Jayden ç‹å‡¯è±ª","can_delete":false,"product_type":"c1","uid":1592236,"ip_address":"","ucode":"6CAADB9B449892","user_header":"https://static001.geekbang.org/account/avatar/00/18/4b/ac/2a48928f.jpg","comment_is_top":false,"comment_ctime":1574226651,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1574226651","product_id":100020801,"comment_content":"create table select distinct from t1 join t2 join t3... åä¸ªå…³è”è¡¨è¶…å¤§äº‹åŠ¡ï¼Œè·‘äº†ä¸€æ•´æ™šï¼Œç¬¬äºŒå¤©æ—©ä¸Šå¼ºåˆ¶killéƒ½killä¸æ‰ï¼Œæœ€ååªèƒ½ç›´æ¥é‡å¯OS","like_count":0,"discussions":[{"author":{"id":1303322,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e3/1a/061e77b6.jpg","nickname":"äº¢æ˜Ÿä¸œ","note":"","ucode":"5E4063E83B2BB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":331838,"discussion_content":"è¿™æ“ä½œ è¿˜distinct","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1606990928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":135135,"user_name":"ç„ä¸€","can_delete":false,"product_type":"c1","uid":1005198,"ip_address":"","ucode":"2EB1516C21BB35","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1xLhZCP0FTbicE6rEJHksT8VmK845YQrjgicyR2L4kmQM28jfgEppdXEExpayWQHkbsfAvicFib9fMQ/132","comment_is_top":false,"comment_ctime":1569036125,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"1569036125","product_id":100020801,"comment_content":"æˆ‘ç°åœ¨å°±é‡åˆ°è¿™ä¸ªé—®é¢˜äº†ï¼ŒsessionçŠ¶æ€æ˜¯killed state æ˜¯sending date, æ˜¯select ä¸€ä¸ªå¤§è¡¨ï¼Œå¦‚æœä¸é‡å¯ï¼Œç°åœ¨æœ‰å•¥æ–¹æ³•é‡Šæ”¾ä¹ˆï¼Œpstakéƒ¨åˆ†ä¿¡æ¯å¦‚ä¸‹ï¼š<br>ç•™æ„ä¸èƒ½è´´ï¼Œç•™æ„å¤ªé•¿ã€‚ã€‚","like_count":0,"discussions":[{"author":{"id":1005198,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1xLhZCP0FTbicE6rEJHksT8VmK845YQrjgicyR2L4kmQM28jfgEppdXEExpayWQHkbsfAvicFib9fMQ/132","nickname":"ç„ä¸€","note":"","ucode":"2EB1516C21BB35","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":31766,"discussion_content":"æä¸å®šï¼Œçƒ­å¿ƒç½‘å‹è¯´å¯èƒ½æ˜¯innodb_parallel_read_threadsçš„bug","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570954993,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1038646,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/d9/36/92d8eb91.jpg","nickname":"Promise","note":"","ucode":"3E07E270EED2E8","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":19545,"discussion_content":"è§£å†³äº†æ²¡ï¼Œé™¤äº†é‡å¯æœåŠ¡å™¨ã€‚æˆ‘ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜äº†ã€‚ã€‚ã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569205690,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130280,"user_name":"MrVito","can_delete":false,"product_type":"c1","uid":1252169,"ip_address":"","ucode":"716FF6F8871706","user_header":"https://static001.geekbang.org/account/avatar/00/13/1b/49/ddefc656.jpg","comment_is_top":false,"comment_ctime":1567417136,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1567417136","product_id":100020801,"comment_content":"kill å‘½ä»¤æœ¬è´¨å°±æ˜¯å‘é€ä¿¡å·ï¼Œå¹¶ä¸æ˜¯ç›´æ¥killï¼Œä½†æ˜¯kill connectionå°±æ˜¯å°†å®¢æˆ·ç«¯çš„sqlé“¾æ¥æ–­å¼€ï¼Œç„¶ååˆèµ°kill queryã€‚show processlistå°±ä¼šå±•ç¤ºkilledé‚£ä¸ªçŠ¶æ€ã€‚é—®é¢˜ ç­‰å¾…å§ï¼ å› ä¸ºé‡å¯è¿˜æ˜¯ä¼šå›æ»šäº‹åŠ¡ã€‚","like_count":0},{"had_liked":false,"id":113650,"user_name":"ä½‘å„¿","can_delete":false,"product_type":"c1","uid":1226196,"ip_address":"","ucode":"0629888E7A5E16","user_header":"https://static001.geekbang.org/account/avatar/00/12/b5/d4/3bd5b77b.jpg","comment_is_top":false,"comment_ctime":1563105199,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563105199","product_id":100020801,"comment_content":"ä¸€æ—¦å‡ºç°commandåˆ—æ˜¯killedï¼Œä½†å®é™…çº¿ç¨‹æ²¡æœ‰ç»“æŸçš„æƒ…å†µï¼Œåªèƒ½é€šè¿‡å¹²é¢„å…¶ä»–çº¿ç¨‹ï¼Œè®©è¯¥çº¿ç¨‹èµ°åˆ°å¯ä»¥åˆ¤æ–­çº¿ç¨‹çŠ¶æ€çš„åŸ‹ç‚¹ï¼Œçº¿ç¨‹æ‰èƒ½é€€å‡ºï¼Œé‚£ä¹ˆé’ˆå¯¹ç»ˆæ­¢é€»è¾‘è¿‡ç¨‹è€—æ—¶å¤ªé•¿çš„æƒ…å†µï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¤„ç†åŠæ³•å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":86664,"user_name":"æ˜äº®","can_delete":false,"product_type":"c1","uid":1487954,"ip_address":"","ucode":"CDB88FACF0A274","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/52/8cb28c7a.jpg","comment_is_top":false,"comment_ctime":1555421365,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555421365","product_id":100020801,"comment_content":"è€å¸ˆï¼Œæœ€è¿‘èšåˆæ”¯ä»˜å¹³å°ç¢°åˆ°äº†é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šä¸€åˆ°æ·±å¤œå°±ä¼šç¢°åˆ°å‡ åƒç§’çš„æ…¢sqlï¼Œkillä¸äº†ï¼Œé‡å¯è¿æ¥è¿‡æ¥çš„æœåŠ¡å™¨åº”ç”¨ä¹Ÿä¸è¡Œï¼Œé‡å¯mysqlæœåŠ¡ä¹Ÿé‡å¯ä¸äº†ï¼Œä¸€ç›´å¤„äºcommitçŠ¶æ€ï¼Œæœ€åæ¯æ¬¡åªèƒ½é‡å¯mysqlæœåŠ¡å™¨ï¼Œè¿™ä¸ªcommitæ…¢sqlæ‰æ²¡æœ‰äº†ï¼Œä½†æ˜¯é‡å¯mysqlæœåŠ¡å™¨å½±å“é¢å¤ªå¹¿ï¼Œåˆ°ç°åœ¨æ²¡å®šä½ä¸ºå•¥å½¢æˆçš„è¿™ä¸ªæ…¢sqlï¼Œèƒ½å¸®å¿™åˆ†æä¸‹å—ï¼Ÿè°¢è°¢","like_count":0},{"had_liked":false,"id":76396,"user_name":"æ¶‚æ¶‚çš„çˆ¸çˆ¸","can_delete":false,"product_type":"c1","uid":1302562,"ip_address":"","ucode":"FA95282B4DC698","user_header":"https://static001.geekbang.org/account/avatar/00/13/e0/22/18aa3672.jpg","comment_is_top":false,"comment_ctime":1552583105,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552583105","product_id":100020801,"comment_content":"è€å¸ˆä½ å¥½ï¼Œå¦‚æœæˆ‘show processlistçœ‹åˆ°ä¸€ä¸ªæ…¢æŸ¥è¯¢çš„thread_idï¼Œåœ¨å¦å¤–çš„ä¸€ä¸ªçª—å£æˆ–å‰å°é¡µé¢ï¼Œæƒ³ç”¨kill thread_idæ€æ‰è¿™ä¸ªæŸ¥è¯¢ï¼Œä¼šä¸ä¼šå‡ºç°ï¼Œåœ¨æˆ‘å¼€å§‹æ‰§è¡Œkillçš„æ—¶å€™ï¼Œè¿™ä¸ªæ…¢æŸ¥è¯¢å·²ç»æ‰§è¡Œç»“æŸï¼Œè€Œè¿™ä¸ªthread_idè¢«é‡ç”¨äº†ï¼Ÿå¯¼è‡´æˆ‘è¯¯æ€çš„æƒ…å†µï¼Ÿ<br>è¯´çš„ç®€å•ç‚¹å°±æ˜¯ï¼Œåœ¨æˆ‘æ€çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªthread_idï¼ˆå…¶å®å°±æ˜¯å®¢æˆ·ç«¯çš„connection_id()ï¼‰ä¼šä¸ä¼šè¢«é‡ç”¨ï¼Ÿ<br>è°¢è°¢å›ç­”ã€‚","like_count":0},{"had_liked":false,"id":63742,"user_name":"è·¯è¿‡","can_delete":false,"product_type":"c1","uid":1316401,"ip_address":"","ucode":"7152C19ED024CC","user_header":"https://static001.geekbang.org/account/avatar/00/14/16/31/ae8adf82.jpg","comment_is_top":false,"comment_ctime":1548482931,"is_pvip":false,"replies":[{"id":"22566","content":"è¿™ä¸¤ä¸ªæ˜¯ä¸€æ ·çš„å§ï¼Ÿ<br>éƒ½æ˜¯å¯¹åº”show processlistè¿™ä¸ªå‘½ä»¤ç»“æœé‡Œçš„ç¬¬ä¸€åˆ—","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548515704,"ip_address":"","comment_id":63742,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548482931","product_id":100020801,"comment_content":"è€å¸ˆï¼Œkillè¯­æ³•æ˜¯ï¼š<br>KILL [CONNECTION | QUERY] processlist_id<br>processlist_idæ˜¯conn_idï¼Œä¸æ˜¯thd_id.é€šè¿‡å¯¹æ¯”sys.processlistè¡¨ä¸­çš„ä¿¡æ¯å°±å¯ä»¥çŸ¥é“äº†ã€‚<br>é€šè¿‡æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£ä¹Ÿè¯´æ˜äº†ï¼š<br>thd_idï¼šThe thread ID.<br>conn_idï¼šThe connection ID.<br>æ‰€ä»¥ï¼Œè¿™ç¯‡æ–‡ç« å¼€å¤´çš„ï¼š<br>åœ¨ MySQL ä¸­æœ‰ä¸¤ä¸ª kill å‘½ä»¤ï¼šä¸€ä¸ªæ˜¯ kill query + çº¿ç¨‹ id<br>æ„Ÿè§‰æœ‰ç‚¹ä¸å¯¹ã€‚è¯·è€å¸ˆæŒ‡æ­£ã€‚è°¢è°¢ï¼","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437701,"discussion_content":"è¿™ä¸¤ä¸ªæ˜¯ä¸€æ ·çš„å§ï¼Ÿ\néƒ½æ˜¯å¯¹åº”show processlistè¿™ä¸ªå‘½ä»¤ç»“æœé‡Œçš„ç¬¬ä¸€åˆ—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548515704,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":63623,"user_name":"å¾€äº‹éšé£ï¼Œé¡ºå…¶è‡ªç„¶","can_delete":false,"product_type":"c1","uid":1235692,"ip_address":"","ucode":"F266EC6B143E38","user_header":"https://static001.geekbang.org/account/avatar/00/12/da/ec/779c1a78.jpg","comment_is_top":false,"comment_ctime":1548419066,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548419066","product_id":100020801,"comment_content":"12 å·çº¿ç¨‹çš„ç­‰å¾…é€»è¾‘æ˜¯è¿™æ ·çš„ï¼šæ¯ 10 æ¯«ç§’åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å¯ä»¥è¿›å…¥ InnoDB æ‰§è¡Œï¼Œå¦‚æœä¸è¡Œï¼Œå¦‚æœä¸è¡Œï¼Œå°±è°ƒç”¨ nanosleep å‡½æ•°è¿›å…¥ sleepçŠ¶æ€ã€‚è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯10æ¯«ç§’åˆ¤æ–­ä¸€ä¸‹ï¼Ÿæ€ä¹ˆæŸ¥çœ‹å’Œè®¾ç½®è¿™ä¸ªå‚æ•°ï¼Ÿ","like_count":0},{"had_liked":false,"id":63487,"user_name":"æ›¾å‰‘","can_delete":false,"product_type":"c1","uid":1304922,"ip_address":"","ucode":"55466F93BE9978","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/5a/a6f2ec4b.jpg","comment_is_top":false,"comment_ctime":1548382345,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548382345","product_id":100020801,"comment_content":"ä»Šå¤©çš„é—®é¢˜ï¼Œæˆ‘è§‰å¾—å¾—è®©ä»–è‡ªå·±æ‰§è¡Œå®Œæˆåè‡ªåŠ¨æ¢å¤ã€‚å› ä¸ºå¼ºåˆ¶é‡å¯åè¯¥åšçš„å›æ»šè¿˜æ˜¯ä¼šç»§ç»­åšã€‚","like_count":0},{"had_liked":false,"id":63458,"user_name":"wljs","can_delete":false,"product_type":"c1","uid":1306543,"ip_address":"","ucode":"6B88A664972AD2","user_header":"https://static001.geekbang.org/account/avatar/00/13/ef/af/ba786593.jpg","comment_is_top":false,"comment_ctime":1548378687,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1548378687","product_id":100020801,"comment_content":"è€å¸ˆåˆ†åº“åˆ†è¡¨ç”¨shardingsphereæ€ä¹ˆæ ·ï¼Ÿ","like_count":0},{"had_liked":false,"id":63437,"user_name":"äº®","can_delete":false,"product_type":"c1","uid":1086346,"ip_address":"","ucode":"5B8E59AEA6E3F2","user_header":"https://static001.geekbang.org/account/avatar/00/10/93/8a/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1548373350,"is_pvip":false,"replies":[{"id":"22455","content":"ä¼šæåˆ°ï¼Œä½†æ˜¯æ²¡æœ‰å¾ˆå¤§çš„ç¯‡å¹…ã€‚åˆ°æ—¶å€™å¦‚æœæœ‰é—®é¢˜æå‡ºæ¥å“ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"æ—æ™“æ–Œ","uid":"1264162","ctime":1548381783,"ip_address":"","comment_id":63437,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1548373350","product_id":100020801,"comment_content":"è€å¸ˆæ—©ï¼Œè¯·é—®åˆ†åº“åˆ†è¡¨è¿™å—ä¹‹åä¼šè®²åˆ°å—ï¼Ÿè°¢è°¢è€å¸ˆ","like_count":0,"discussions":[{"author":{"id":1264162,"avatar":"https://static001.geekbang.org/account/avatar/00/13/4a/22/2681d602.jpg","nickname":"æ—æ™“æ–Œ","note":"","ucode":"CDE42D44F26240","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437585,"discussion_content":"ä¼šæåˆ°ï¼Œä½†æ˜¯æ²¡æœ‰å¾ˆå¤§çš„ç¯‡å¹…ã€‚åˆ°æ—¶å€™å¦‚æœæœ‰é—®é¢˜æå‡ºæ¥å“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548381783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}