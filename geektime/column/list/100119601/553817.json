{"id":553817,"title":"03｜看板应用：从零开始快速搭建一个React项目","content":"<p>你好，我是宋一玮。从这节课开始，我们就进入到React Web应用开发的学习。</p><p>作为前端开发者，在学习一门新技术时最常用的方法是什么？Linux操作系统的创始人Linus大神有句名言：“口说无凭，放码过来。”没错儿，上手写代码确实是最有效的方式之一。</p><p>然而我也听到过不少吐槽：</p><ul>\n<li>前端开发不应该是一边写代码，一边刷新浏览器就够了吗？</li>\n<li>为什么只想写几行代码，要配置一天的开发环境？</li>\n<li>代码在别人那里跑的好好的，为什么我这里跑不起来了？</li>\n<li>我改了几行代码，为什么页面没反应/就挂了？</li>\n</ul><p>我们需要了解一个现状，那就是现代前端开发早已结束了刀耕火种的时代，逐步向其他软件开发领域看齐。比如常被一起提到的后端开发领域，开发者们也常会抱怨配置开发环境又复杂又耗时间，同样的代码换个环境编译就会挂，等等。</p><p>现代前端的编译构建、依赖管理、CI/CD等工程化实践一应俱全，正如第1讲提到的，前端应用功能日益丰富、强大，这样的变化也是为了应对开发复杂度的攀升，但同时也带来了类似的痛点。我们即将要创建的React项目，就需要用到一系列工具链。不过这些技术，对于初学者来说确实有一定的门槛。</p><p>这时你可能会问到：“那我什么时候才可以上手写React代码？”</p><!-- [[[read_end]]] --><p>答案是“立刻”。</p><p>近十年的软件开发框架比起本世纪初那些更易于上手，其中一个重要原因是，优秀的框架会提供一些脚手架或者样板工程帮助开发者快速开始。有不少React开发者——不止初学者，更包括一些进阶者——是从Facebook（后面的课程中简称为FB）官方开源的Create React App（<a href=\"https://zh-hans.reactjs.org/docs/create-a-new-react-app.html#create-react-app\">CRA</a>）入手的。</p><p>所以在这一讲，在需要了解最少概念的前提下，我们会先快速搭建一个小型React项目跑起来。然后在第4-11讲，我们会“肢解”这个项目，将拆解出来的部分从浅到深排序，一一为你讲解，并做一些必要的实验。在第12讲结尾，你将有足够的知识从零开始，选择略有不同的技术栈，将这个React项目定制成另一个版本。从此你就可以作为“独狼”（褒义）React工程师，开展各类实践了。</p><p>现在，就让我们来开发一个React看板应用。这里的“看板”是敏捷开发里的看板（Kanban），如下图所示，是一个简单的原型图：</p><p><img src=\"https://static001.geekbang.org/resource/image/5d/9e/5d6d3yyef5961ba4027b1d4a67ddc69e.jpg?wh=2956x1869\" alt=\"\"></p><h2>搭建环境</h2><p>你大概会怀疑自己上当了：“不是说‘立刻’吗？”</p><p>虽说脚手架工具可以帮我们省去大部分工作，但前端最基础的开发环境，Node.js还是要有的。当然，如果你的电脑里已经安装过Node.js，大可以跳过这一步，那自然就是“立刻”了。</p><p>因为Node.js的版本升级非常快，所以在安装时最好用一个Node版本管理工具，最主流的当然是nvm，nvm是基于shell开发的，在macOS和Linux上工作的很好，只可惜不支持Windows。而我最近比较喜欢以Rust开发的、跨平台的<a href=\"https://github.com/Schniz/fnm\">fnm</a>。</p><p>fnm功能与nvm类似，都可以在一套环境里安装多个版本的Node，随时按需切换，也可以根据具体项目的配置（支持nvm的  <code>.nvmrc</code>  ），半自动地切换版本。比起nvm，fnm执行效率更高，而且跨平台。无论你的开发机是macOS、Linux还是Windows，都可以在<a href=\"https://github.com/Schniz/fnm/releases\">这个地址</a>下载到对应的版本，加到 <code>PATH</code>中即可。</p><p>当然，对于macOS和Linux，更方便的方式还是打开命令行。在Mac上执行：</p><pre><code>brew install fnm\n</code></pre><p>安装成功后在你的 <code>.bashrc</code> 或 <code>.zshrc</code> 中加入以下命令，保存并重启命令行窗口：</p><pre><code>eval &quot;$(fnm env --use-on-cd)&quot;\n</code></pre><p>安装fnm后，用它安装Node最新的LTS（Long Term Support长期支持）版本：</p><pre><code>fnm install --lts\n</code></pre><p>装好Node.js后，建议你再安装一个针对前端开发的IDE。我推荐微软的<a href=\"https://code.visualstudio.com\">VSCode</a>，它为JavaScript和TypeScript提供了强大的Language Server，在语法检查、代码补全等方面十分出众，丰富的插件生态也为React前端开发提供了助力。</p><p>接着，我建议把VSCode加到命令行环境里，在VSCode菜单上点击 <code>View</code>-&gt; <code>Command Palette ...</code> -&gt; 输入<code>install code</code> -&gt; 选择提示的<code>Shell Command: Install 'code' command in PATH</code> 回车，这样在命令行里就可以通过<code>code /path/to/my/project</code> 的方式打开VSCode了。</p><p>需要提前说明的是，以下内容均以macOS为主，绝大部分操作都是兼容Windows的。</p><h2>搭建项目</h2><p>在Node.js环境下，就可以搭建React项目了。首先，我们需要在命令行创建一个工作目录，然后执行CRA命令：</p><pre><code>mkdir /Users/geektime/workspaces\ncd /Users/geektime/workspaces\nnpx create-react-app oh-my-kanban\n</code></pre><p>在看到如下提示时，React项目就顺利生成了。</p><pre><code>npx: installed 67 in 7.669s\n\nCreating a new React app in /Users/geektime/workspaces/oh-my-kanban.\n\nInstalling packages. This might take a couple of minutes.\n\n...\n\nSuccess! Created oh-my-kanban at /Users/geektime/workspaces/oh-my-kanban\nInside that directory, you can run several commands:\n\n  npm start\n    Starts the development server.\n\n  npm run build\n    Bundles the app into static files for production.\n\n  npm test\n    Starts the test runner.\n\n  npm run eject\n    Removes this tool and copies build dependencies, configuration files\n    and scripts into the app directory. If you do this, you can’t go back!\n\nWe suggest that you begin by typing:\n\n  cd oh-my-kanban\n  npm start\n\nHappy hacking!\n</code></pre><p>这时用VSCode打开这个项目，再回到命令行中执行启动命令：</p><pre><code>cd oh-my-kanban\ncode .\nnpm start\n</code></pre><p>在看到如下提示信息时，浏览器会自动弹出来，展示CRA的例子页面：</p><pre><code>Compiled successfully!\n\nYou can now view oh-my-kanban in the browser.\n\n  Local:            http://localhost:3000\n  On Your Network:  http://192.168.0.3:3000\n\nNote that the development build is not optimized.\nTo create a production build, use npm run build.\n\nwebpack compiled successfully\n</code></pre><p><img src=\"https://static001.geekbang.org/resource/image/49/2c/49cc65465e87a9908038aa461dc58c2c.png?wh=2624x1424\" alt=\"\"></p><p>这时切换到IDE，可以看到 <code>src/App.js</code>的代码与目前页面内容是相符的。</p><p><img src=\"https://static001.geekbang.org/resource/image/73/c6/73861f25cb17bc1faeacae0b1aedf8c6.png?wh=2624x1424\" alt=\"\"></p><p>在此基础上，如果你对源文件稍作修改：</p><pre><code> function App() {\n   return (\n     &lt;div className=&quot;App&quot;&gt;\n       &lt;header className=&quot;App-header&quot;&gt;\n+        &lt;h1&gt;我的看板&lt;/h1&gt;\n         &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\n         &lt;p&gt;\n</code></pre><p>这时你不需要主动刷新浏览器，页面会自动更新。</p><p><img src=\"https://static001.geekbang.org/resource/image/fa/9e/fa9c1876a8ef98a34e5806886173309e.png?wh=2624x1424\" alt=\"\"></p><p>相比其他软件开发领域，<strong>前端开发本身会为开发者提供即时的正反馈</strong>。这就是说你每次修改一段源码，（一般而言）都能以视觉的方式验证软件的变化。你用CRA搭建的这套React环境就符合这一特征。</p><h2>添砖加瓦</h2><p>目前的项目大部分文件都是CRA自动生成的，我们暂时不去追究这些文件和代码都是干什么的，而是先聚焦到 <code>src/App.js</code> 和 <code>src/App.css</code>  这两个源文件。</p><p>有一些初级前端开发者拿到一个原型稿或视觉稿后，会先手足无措，不知道从哪里开始；当瞄准了某个功能点，又会一下子陷入到细节里面去，反而忽视了整体。</p><p>如果你也有这样的困惑，我会建议你回忆一下上学时做考试卷的场景，拿到卷子，先整体看一下有多少选择题填空题、多少大题，各分配多少时间，如果答题时间不够了哪些战略性放弃，哪些直接靠猜（笑）。</p><p>对于React应用开发，也可以用类似的思路：<strong>从整体到局部，从简单到复杂，从视图到交互，从数据到逻辑</strong>。</p><p>依照这个思路，第一步是从整体入手，搭建视图。你首先需要增加一些布局元素。从前面的原型图可以看到，oh-my-kanban的主界面是上导航下内容、内容为横向三栏的典型布局。这种布局用CSS的Flexbox可以轻易实现。</p><p>为了应用Flexbox，需要调整一下DOM结构，直接将<code>src/App.js</code> 替换为以下代码：</p><pre><code>import logo from './logo.svg';\nimport './App.css';\n\nfunction App() {\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;h1&gt;我的看板&lt;/h1&gt;\n        &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\n      &lt;/header&gt;\n      &lt;main className=&quot;kanban-board&quot;&gt;\n        &lt;section className=&quot;kanban-column&quot;&gt;&lt;/section&gt;\n        &lt;section className=&quot;kanban-column&quot;&gt;&lt;/section&gt;\n        &lt;section className=&quot;kanban-column&quot;&gt;&lt;/section&gt;\n      &lt;/main&gt;\n    &lt;/div&gt;\n      );\n    }\n\nexport default App;\n</code></pre><p>同时，我们还需要修改<code>src/App.css</code>  ，加入flex布局属性：</p><pre><code> .App {\n+  displ ay: flex;\n+  flex-direction: column;\n+  gap: 1rem;\n+  height: 100vh;\n   text-align: center;\n }\n\n .App-logo {\n-  height: 40vmin;\n+  height: 80%;\n   pointer-events: none;\n }\n\n @media (prefers-reduced-motion: no-preference) {\n   .App-logo {\n     animation: App-logo-spin infinite 20s linear;\n   }\n }\n\n .App-header {\n+  flex: 1;\n+  margin: 1rem 1rem 0;\n+  border-radius: 1rem;\n   background-color: #282c34;\n-  min-height: 100vh;\n+  min-height: 5rem;\n   display: flex;\n-  flex-direction: row-reverse;\n+  flex-direction: row-reverse;\n   align-items: center;\n   justify-content: center;\n   font-size: calc(10px + 2vmin);\n   color: white;\n }\n</code></pre><p>并在 <code>src/App.css</code> 中追加“看板”、“看板列”两个类样式：</p><pre><code>.kanban-board {\n  flex: 10;\n  display: flex;\n  flex-direction: row;\n  gap: 1rem;\n  margin: 0 1rem 1rem;\n}\n\n.kanban-column {\n  flex: 1 1;\n  border: 1px solid gray;\n  border-radius: 1rem;\n}\n</code></pre><p>这时浏览器内的页面会自动更新，布局有了雏形：</p><p><img src=\"https://static001.geekbang.org/resource/image/c6/8d/c6792c9ba3d459d9a60bd59eca21828d.png?wh=2624x1424\" alt=\"\"></p><p>根据原型图定义，三个看板列有不同的样式代表不同的含义。那需要继续修改<code>src/App.js</code>：</p><pre><code>       &lt;/header&gt;\n       &lt;main className=&quot;kanban-board&quot;&gt;\n-        &lt;section className=&quot;kanban-column&quot;&gt;&lt;/section&gt;\n+        &lt;section className=&quot;kanban-column column-todo&quot;&gt;\n+          &lt;h2&gt;待处理&lt;/h2&gt;\n+        &lt;/section&gt;\n-        &lt;section className=&quot;kanban-column&quot;&gt;&lt;/section&gt;\n+        &lt;section className=&quot;kanban-column column-ongoing&quot;&gt;\n+          &lt;h2&gt;进行中&lt;/h2&gt;\n+        &lt;/section&gt;\n-        &lt;section className=&quot;kanban-column&quot;&gt;&lt;/section&gt;\n+        &lt;section className=&quot;kanban-column column-done&quot;&gt;\n+          &lt;h2&gt;已完成&lt;/h2&gt;\n+        &lt;/section&gt;\n       &lt;/main&gt;\n     &lt;/div&gt;\n</code></pre><p>同时在<code>src/App.css</code>末尾，为三个看板列分别加入不同的背景色样式：</p><pre><code>.kanban-column &gt; h2 {\n  margin: 0.6rem 1rem;\n  padding-bottom: 0.6rem;\n  border-bottom: 1px solid gray;\n}\n\n.column-todo {\n  background-color: #C9AF97;\n}\n\n.column-ongoing {\n  background-color: #FFE799;\n}\n\n.column-done {\n  background-color: #C0E8BA;\n}\n</code></pre><p>保存文件后，页面会更新：</p><p><img src=\"https://static001.geekbang.org/resource/image/10/f6/106070fc88225195c7c581a4e2e11af6.png?wh=2624x1424\" alt=\"\"></p><p>接下来要在看板列里加入卡片了。先从“待处理”入手，在<code>src/App.js</code>的看板列中加入一个无序列表：</p><pre><code> &lt;section className=&quot;kanban-column column-todo&quot;&gt;\n      &lt;h2&gt;待处理&lt;/h2&gt;\n      &lt;ul&gt;\n        &lt;li className=&quot;kanban-card&quot;&gt;\n          &lt;div className=&quot;card-title&quot;&gt;开发任务-1&lt;/div&gt;\n          &lt;div className=&quot;card-status&quot;&gt;22-05-22 18:15&lt;/div&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/section&gt;\n</code></pre><p>在 <code>src/App.css</code> 中加入对应的CSS，让它看起来更像卡片：</p><pre><code>.kanban-column {\n  flex: 1 1;\n  display: flex;\n  flex-direction: column;\n  border: 1px solid gray;\n  border-radius: 1rem;\n}\n\n.kanban-column &gt; ul {\n  flex: 1;\n  flex-basis: 0;\n  margin: 1rem;\n  padding: 0;\n  overflow: auto;\n}\n    \n.kanban-card {\n  margin-bottom: 1rem;\n  padding: 0.6rem 1rem;\n  border: 1px solid gray;\n  border-radius: 1rem;\n  list-style: none;\n  background-color: rgba(255, 255, 255, 0.4);\n  text-align: left;\n}\n    \n.card-title {\n  min-height: 3rem;\n}\n    \n.card-status {\n  text-align: right;\n  font-size: 0.8rem;\n  color: #333;\n}\n</code></pre><p>基本符合原型图：</p><p><img src=\"https://static001.geekbang.org/resource/image/78/6e/78b49e95b732345ac1650ef44766f86e.png?wh=2624x1424\" alt=\"\"></p><h2>循环渲染</h2><p>对照原型图，待处理列是有多张卡片的。这时有人祭出了复制粘贴大法，靠手工加入多个<code>&lt;li className=\"kanban-card\"&gt;</code>标签：</p><pre><code>&lt;section className=&quot;kanban-column column-todo&quot;&gt;\n  &lt;h2&gt;待处理&lt;/h2&gt;\n  &lt;ul&gt;\n    &lt;li className=&quot;kanban-card&quot;&gt;\n      &lt;div className=&quot;card-title&quot;&gt;开发任务-1&lt;/div&gt;\n      &lt;div className=&quot;card-status&quot;&gt;22-05-22 18:15&lt;/div&gt;\n    &lt;/li&gt;\n    &lt;li className=&quot;kanban-card&quot;&gt;\n      &lt;div className=&quot;card-title&quot;&gt;开发任务-2&lt;/div&gt;\n      &lt;div className=&quot;card-status&quot;&gt;22-05-22 18:15&lt;/div&gt;\n    &lt;/li&gt;\n    &lt;li className=&quot;kanban-card&quot;&gt;\n      &lt;div className=&quot;card-title&quot;&gt;开发任务-3&lt;/div&gt;\n      &lt;div className=&quot;card-status&quot;&gt;22-05-22 18:15&lt;/div&gt;\n    &lt;/li&gt;\n    &lt;!-- ... (省略) --&gt;\n  &lt;/ul&gt;\n&lt;/section&gt;\n</code></pre><p>从页面显示结果来看确实有效，但你一定也发现了不对劲的地方。</p><ol>\n<li>增加更多的卡片就要复制粘贴更多次吗？</li>\n<li>如果卡片的设计有任何改动，要把每张卡片的代码都修改一遍吗？</li>\n<li>我在开发阶段怎么会知道最终用户在运行时会创建多少张卡片呢？</li>\n</ol><p>是的，这样的写法违背了编程的DRY（Don’t Repeat Yourself）原则，降低了代码的可延展性、可读性。这时你可以使用<strong>循环渲染</strong>，把前面的卡片代码更新为：</p><pre><code>&lt;section className=&quot;kanban-column column-todo&quot;&gt;\n      &lt;h2&gt;待处理&lt;/h2&gt;\n      &lt;ul&gt;\n        {\n          new Array(10).fill('').map(item =&gt; (\n            &lt;li className=&quot;kanban-card&quot;&gt;\n              &lt;div className=&quot;card-title&quot;&gt;开发任务-1&lt;/div&gt;\n              &lt;div className=&quot;card-status&quot;&gt;22-05-22 18:15&lt;/div&gt;\n            &lt;/li&gt;\n          ))\n        }\n      &lt;/ul&gt;\n    &lt;/section&gt;\n</code></pre><p>这段代码里 <code>{ /* ... */ }</code> 中间的部分可以混写<strong>JS表达式</strong>。<code>new Array(10).fill('')</code> 是出于演示目的用空字符串填充一个包含10个元素的数组，数组的 <code>map()</code> 方法返回一个新的数组，这样就是一个有效的表达式。虽然这个表达式是一个循环，但你却不能混写 <code>for...of</code> 这样的循环语句。</p><p>修改后，页面更新为：</p><p><img src=\"https://static001.geekbang.org/resource/image/01/b5/01a1bc1b4b9b5c4275aa8b3cf64fceb5.png?wh=2624x1424\" alt=\"\"></p><p>接下来要同时实现两个需求：</p><ul>\n<li>10个待处理卡片的数据应该是不同的；</li>\n<li>“进行中”和“已完成”看板列也需要展示卡片。</li>\n</ul><p>这就需要将数据与展示进行拆分。在<code>src/App.js</code>头部加入三组数据和一个组件。</p><pre><code>const todoList = [\n  { title: '开发任务-1', status: '22-05-22 18:15' },\n  { title: '开发任务-3', status: '22-05-22 18:15' },\n  { title: '开发任务-5', status: '22-05-22 18:15' },\n  { title: '测试任务-3', status: '22-05-22 18:15' }\n];\nconst ongoingList = [\n  { title: '开发任务-4', status: '22-05-22 18:15' },\n  { title: '开发任务-6', status: '22-05-22 18:15' },\n  { title: '测试任务-2', status: '22-05-22 18:15' }\n];\nconst doneList = [\n  { title: '开发任务-2', status: '22-05-22 18:15' },\n  { title: '测试任务-1', status: '22-05-22 18:15' }\n];\n\n   const KanbanCard = ({ title, status }) =&gt; {\n  return (\n    &lt;li className=&quot;kanban-card&quot;&gt;\n      &lt;div className=&quot;card-title&quot;&gt;{title}&lt;/div&gt;\n      &lt;div className=&quot;card-status&quot;&gt;{status}&lt;/div&gt;\n    &lt;/li&gt;\n  );\n};\n</code></pre><p>继续修改之前的看板列代码，消费这三组数据和一个组件：</p><pre><code> &lt;main className=&quot;kanban-board&quot;&gt;\n    &lt;section className=&quot;kanban-column column-todo&quot;&gt;\n      &lt;h2&gt;待处理&lt;/h2&gt;\n      &lt;ul&gt;\n        { todoList.map(props =&gt; &lt;KanbanCard {...props} /&gt;) }\n      &lt;/ul&gt;\n    &lt;/section&gt;\n    &lt;section className=&quot;kanban-column column-ongoing&quot;&gt;\n      &lt;h2&gt;进行中&lt;/h2&gt;\n      &lt;ul&gt;\n        { ongoingList.map(props =&gt; &lt;KanbanCard {...props} /&gt;) }\n      &lt;/ul&gt;\n    &lt;/section&gt;\n    &lt;section className=&quot;kanban-column column-done&quot;&gt;\n      &lt;h2&gt;已完成&lt;/h2&gt;\n      &lt;ul&gt;\n        { doneList.map(props =&gt; &lt;KanbanCard {...props} /&gt;) }\n      &lt;/ul&gt;\n    &lt;/section&gt;\n  &lt;/main&gt;\n</code></pre><p>其中<code>{ todoList.map(props =&gt; &lt;KanbanCard {...props} /&gt;) }</code> 表达式的值是一个组件的数组，React会对这样的组件数组做循环渲染。因为 <code>App</code> 组件内部使用了 <code>KanbanCard</code> 组件，从而形成了组件层级结构（Hierarchy），我们可以称 <code>App</code> 是 <code>KanbanCard</code> 的父组件， <code>KanbanCard</code> 是 <code>App</code> 的子组件。</p><p>这时的页面是这样子的：</p><p><img src=\"https://static001.geekbang.org/resource/image/d0/66/d08d138e27ee2bbd30d0582bbe22a266.png?wh=2624x1424\" alt=\"\"></p><p>前面看板列的CSS <code>.kanban-column &gt; ul { flex: 1; flex-basis: 0; overflow: auto; }</code>，保证了卡片增减不会改变页面高度，而是自动出现滚动条。</p><h2>处理交互和条件渲染</h2><p>到目前为止，你已经搭建好了待处理、进行中、已完成三个看板列，并利用循环渲染在每个看板列中都加入了一些看板卡片。现在该加入一些交互了。最基础的交互是为看板添加新卡片。</p><p>在<code>src/App.js</code>中 <code>KanbanCard</code>的后边插入一个新组件：</p><pre><code>const KanbanNewCard = () =&gt; {\n  return (\n    &lt;li className=&quot;kanban-card&quot;&gt;\n      &lt;h3&gt;添加新卡片&lt;/h3&gt;\n      &lt;div className=&quot;card-title&quot;&gt;\n        &lt;input type=&quot;text&quot; /&gt;\n      &lt;/div&gt;\n    &lt;/li&gt;\n  );\n};\n</code></pre><p>在待处理看板列的代码中插入这个组件，同时在顶部加入一个“添加新卡片”按钮：</p><pre><code>&lt;section className=&quot;kanban-column column-todo&quot;&gt;\n  &lt;h2&gt;待处理&lt;button&gt;&amp;#8853; 添加新卡片&lt;/button&gt;&lt;/h2&gt;\n  &lt;ul&gt;\n    &lt;KanbanNewCard /&gt;\n    { todoList.map(props =&gt; &lt;KanbanCard {...props} /&gt;) }\n  &lt;/ul&gt;\n&lt;/section&gt;\n</code></pre><p>在 <code>src/App.css</code> 中加入对应的CSS：</p><pre><code>.kanban-column &gt; h2 &gt; button {\n  float: right;\n  margin-top: 0.2rem;\n  padding: 0.2rem 0.5rem;\n  border: 0;\n  border-radius: 1rem;\n  height: 1.8rem;\n  line-height: 1rem;\n  font-size: 1rem;\n}\n    \n.card-title &gt; input[type=&quot;text&quot;] {\n  width: 80%;\n}\n</code></pre><p>这时页面会更新为：</p><p><img src=\"https://static001.geekbang.org/resource/image/df/a9/dfc780403c593559c065193a16d262a9.png?wh=2624x1424\" alt=\"\"></p><p>这里我要带着你增加几个小交互：</p><ol>\n<li>默认不显示“添加新卡片”卡片；</li>\n<li>点击顶部“添加新卡片”按钮，“添加新卡片”卡片才会出现；</li>\n<li>在出现的文本框中输入卡片标题，按回车即在待处理看板列顶部新插入一张卡片，这张卡片的标题为刚才文本框的输入；</li>\n<li>在新卡片插入同时，“添加新卡片”卡片消失，回到 1 的状态。</li>\n</ol><p>你可以先修改 <code>App</code> 组件的代码实现 1 和 2 ：</p><pre><code>   +import React, { useState } from 'react';\n        \n     //... (省略)\n      \n     function App() {\n    +  const [showAdd, setShowAdd] = useState(false);\n    +  const handleAdd = (evt) =&gt; {\n    +    setShowAdd(true);\n    +  };\n    +\n       return (\n         &lt;div className=&quot;App&quot;&gt;\n           &lt;header className=&quot;App-header&quot;&gt;\n             &lt;h1&gt;我的看板&lt;/h1&gt;\n             &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\n           &lt;/header&gt;\n           &lt;main className=&quot;kanban-board&quot;&gt;\n             &lt;section className=&quot;kanban-column column-todo&quot;&gt;\n    -          &lt;h2&gt;待处理&lt;button&gt;&amp;#8853; 添加新卡片&lt;/button&gt;&lt;/h2&gt;\n    +          &lt;h2&gt;待处理&lt;button onClick={handleAdd}\n    +            disabled={showAdd}&gt;&amp;#8853; 添加新卡片&lt;/button&gt;&lt;/h2&gt;\n               &lt;ul&gt;\n    -            &lt;KanbanNewCard /&gt;\n    +            { showAdd &amp;&amp; &lt;KanbanNewCard /&gt; }\n                 { todoList.map(props =&gt; &lt;KanbanCard {...props} /&gt;) }\n               &lt;/ul&gt;\n             &lt;/section&gt;\n</code></pre><p>这里使用了<strong>条件渲染</strong>，  <code>{ showAdd &amp;&amp; &lt;KanbanNewCard /&gt; }</code>  是一个简化的条件表达式，当<code>showAdd</code> 的值为 <code>false</code> 时，表达式会短路直接返回 <code>false</code> ，React不会渲染这个值，当<code>showAdd</code> 的值为 <code>true</code> 时，子组件 <code>&lt;KanbanNewCard /&gt;</code>  则会渲染出来。</p><p>那么<code>showAdd</code> 的值什么情况下会改变呢？答案是用户点击，<code>onClick={handleAdd}</code>为按钮增加了点击事件处理，点击按钮时会把状态 <code>showAdd</code> 的值由默认的 <code>false</code> 修改为 <code>true</code> 。这里提到的状态特指React的state，是一种存在于React组件内部数据，而创建状态state时使用的 <code>useState()</code> 是React的基本Hooks之一，这些概念和API这节我们暂不展开。代码生效后，交互1和2就实现了：</p><p><img src=\"https://static001.geekbang.org/resource/image/fa/91/fa29f7cd05e9c6a3c3b0c157c2e10891.gif?wh=470x350\" alt=\"\"></p><p>接下来你要实现交互3和4。先在 <code>KanbanNewCard</code> 组件中加些代码，让它成为“受控组件”：</p><pre><code>-const KanbanNewCard = () =&gt; {\n+const KanbanNewCard = ({ onSubmit }) =&gt; {\n+  const [title, setTitle] = useState('');\n+  const handleChange = (evt) =&gt; {\n+    setTitle(evt.target.value);\n+  };\n+  const handleKeyDown = (evt) =&gt; {\n+    if (evt.key === 'Enter') {\n+      onSubmit(title);\n+    }\n+  };\n+\n   return (\n     &lt;li className=&quot;kanban-card&quot;&gt;\n       &lt;h3&gt;添加新卡片&lt;/h3&gt;\n       &lt;div className=&quot;card-title&quot;&gt;\n-        &lt;input type=&quot;text&quot; /&gt;\n+        &lt;input type=&quot;text&quot; value={title}\n+          onChange={handleChange} onKeyDown={handleKeyDown} /&gt;\n       &lt;/div&gt;\n     &lt;/li&gt;\n   );\n };\n</code></pre><p>其中 <code>onChange</code> 事件处理函数将 <code>&lt;input&gt;</code> 的输入值随时更新到状态 <code>title</code> 里， <code>onKeyDown</code> 事件处理函数会监听回车键，当用户在文本框中敲击回车时，<code>title</code> 的值会传给 <code>onSubmit</code> 函数。你可能会急着问，这个<code>onSubmit</code> 函数是哪来的？答案在下面的代码里，它来自于父组件 <code>App</code>：</p><pre><code> function App() {\n   const [showAdd, setShowAdd] = useState(false);\n   const handleAdd = (evt) =&gt; {\n     setShowAdd(true);\n   };\n+  const handleSubmit = (title) =&gt; {\n+    todoList.unshift({ title, status: new Date().toDateString() });\n+    setShowAdd(false);\n+  };\n  \n   return (\n     &lt;div className=&quot;App&quot;&gt;\n      &lt;header className=&quot;App-header&quot;&gt;\n        &lt;h1&gt;我的看板&lt;/h1&gt;\n        &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\n      &lt;/header&gt;\n       &lt;main className=&quot;kanban-board&quot;&gt;\n         &lt;section className=&quot;kanban-column column-todo&quot;&gt;\n           &lt;h2&gt;待处理&lt;button onClick={handleAdd}\n             disabled={showAdd}&gt;&amp;#8853; 添加新卡片&lt;/button&gt;&lt;/h2&gt;\n           &lt;ul&gt;\n-            { showAdd &amp;&amp; &lt;KanbanNewCard /&gt; }\n+            { showAdd &amp;&amp; &lt;KanbanNewCard onSubmit={handleSubmit} /&gt; }\n             { todoList.map(props =&gt; &lt;KanbanCard {...props} /&gt;) }\n           &lt;/ul&gt;\n</code></pre><p>刚才<code>onSubmit</code> 函数是从父组件通过props属性传递给<code>KanbanNewCard</code> 组件的。这里提到的属性props是React组件对外的数据接口，可以传入多种数据类型，包括函数，至于props的概念本节暂不展开。</p><p>父组件把一个回调函数 <code>handleSubmit</code> 通过子组件的<code>onSubmit</code> 属性传给子组件。父组件并不需要知道子组件里面发生了什么，只需要知道一旦回调函数被调用，函数参数中就能拿到用户输入的<code>title</code> 值。这时回调函数会根据<code>title</code> 的值在待处理看板列的数组开头插入一个新卡片数据，并将控制着“添加新卡片”卡片是否显示的<code>showAdd</code> 状态值设置为 <code>false</code> 。</p><p>至此，前面定义的交互 1 至 4 均已实现。效果如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/8f/75/8f075b5aaf6842a3638814f6f3e08075.gif?wh=470x350\" alt=\"\"></p><h2>数据驱动</h2><p>至此，我们利用组件事件处理和条件渲染手法，为看板列增加了一个核心交互功能：“添加新卡片”。</p><p>现在回忆一下循环渲染和条件渲染里用到的两种数据，前者 <code>todoList</code> 数组存在所有组件的外边，而后者 <code>showAdd</code> 是在组件内部由<code>useState()</code> 创建的。那么我替你提出一个问题：既然两种数据都可以用于显示，也都可以被修改，<strong>为什么React还要专门提供状态state？</strong></p><p>请你用现在的代码做个小实验。</p><p>你面前来了一位来自互联网行业的资深PM，他向你提出把前面的交互 4 需求改成：“在新卡片插入同时，‘添加新卡片’卡片<strong>并不</strong>消失”。“至于这次修改上线的时间点嘛，3分钟内可以吗？” 开个玩笑，没有PM、没有时限，只要实现需求就好。</p><p>你很快就定位到，只要把这句注释掉，应该就可以了。代码如下：</p><pre><code> function App() {\n   const [showAdd, setShowAdd] = useState(false);\n   const handleAdd = (evt) =&gt; {\n     setShowAdd(true);\n   };\n   const handleSubmit = (title) =&gt; {\n     todoList.unshift({ title, status: new Date().toDateString() });\n-    setShowAdd(false);\n+    // setShowAdd(false);\n   };\n</code></pre><p>咦，什么情况？为什么敲完标题回车页面没变化？本来预期是插入新卡片，但这却没有发生。</p><p>其实这是React正常的行为，用一个不太严谨但很方便的说法：<strong>在组件内部改变state会让组件重新渲染</strong>，细节我们暂时不展开。前面数组的改变之所以能体现在页面上，完全是因为正巧在更新完数组后，同一组件的state有所变化，致使组件重新渲染，数组的变化搭了顺风车。</p><p>知道了这一点，你大概就知道如何修复刚改出来的Bug了。把组件外面的<code>todoList</code> 数组改为state转移到组件内部：</p><pre><code> function App() {\n   const [showAdd, setShowAdd] = useState(false);\n+  const [todoList, setTodoList] = useState([\n+    { title: '开发任务-1', status: '22-05-22 18:15' },\n+    { title: '开发任务-3', status: '22-05-22 18:15' },\n+    { title: '开发任务-5', status: '22-05-22 18:15' },\n+    { title: '测试任务-3', status: '22-05-22 18:15' }\n+  ]);\n   const handleAdd = (evt) =&gt; {\n     setShowAdd(true);\n   };\n   const handleSubmit = (title) =&gt; {\n-    todoList.unshift({ title, status: new Date().toDateString() });\n+    setTodoList(currentTodoList =&gt; [\n+      { title, status: new Date().toDateString() },\n+      ...currentTodoList\n+    ]);\n    // setShowAdd(false);\n  };\n</code></pre><p>至于为什么不能沿用之前 <code>todoList.unshift()</code> 的写法，我们以后的课程中会重点涉及。</p><p>既然把数据转移到组件内部了，那外部的 <code>const todoList = [/* ... */];</code> 就可以删掉了。接着你可以自行对 <code>ongoingList</code> 和 <code>doneList</code> 做相同的转移。</p><p>至此，你的oh-my-kanban有了一个基础版本。如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/a3/21/a39b9e0519564359edfe18c59e2ac121.png?wh=2624x1424\" alt=\"\"></p><p>在三个看板列间，还有进一步的交互：</p><ol>\n<li>对于任意看板列里的任意卡片，可以用鼠标拖拽到其他的看板列；</li>\n<li>在释放拖拽时，被拖拽的卡片插入到目标看板列，并从原看板列中移除。</li>\n</ol><p>你可以独立思考一下上面的需求。目前仅仅从这一个小项目中积累的知识，大概还不足以实现。但没关系，后续我们会补上。</p><h2>小结</h2><p>在这节课，我们学到了如何利用Create React App脚手架工具快速搭建一套React项目。并从零开始，你实现了一个并不完整的、简易的看板应用。中间涉及到React的语法、循环渲染、条件渲染和交互事件处理，也让你对props和state有一个初步的印象。</p><p>对这个React项目有了感性的认识后，现在我们可以回应这节课一开始的吐槽：</p><ul>\n<li>在搭建好项目工具链后，React前端开发确实是一边写代码，一边刷新浏览器，而且是自动刷新；</li>\n<li>正因为有CRA这样优秀的脚手架工具，React的开发环境搭建起来几乎不费什么时间；</li>\n<li>代码在别人那里跑的好好的，在你这里跑不起来，首先要排查开发环境和项目搭建的问题；</li>\n<li>你改了React代码但页面没变化，有可能是你的修改没能触发React的重新渲染，这需要进一步学习React中的核心概念。</li>\n</ul><p>当然，这个看板应用的代码是比较简单甚至简陋的。在接下来的课程里，我会对这个基于CRA的项目进行解构，为你讲解其中所包含的React技术点、设计开发方法、工具链以及一些最佳实践，同时也会带着你动手实践一些关键代码。力求在这一部分课程结尾，让你有足够的知识，独立设计开发小型的React Web应用。</p><p>最后附上项目的源代码，供你学习与参考：<a href=\"https://gitee.com/evisong/geektime-column-oh-my-kanban\">https://gitee.com/evisong/geektime-column-oh-my-kanban</a></p><p>我们下节课再见！</p><h2>思考题</h2><ol>\n<li>好不容易写的代码，保存到你最喜欢的代码仓库吧。之后我们会做不少实验，手一抖删错代码是难免的，这时能访问到代码的历史就方便很多。</li>\n<li>在你的浏览器中安装FB官方的React Developer Tools扩展（<a href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi\">Chrome下载地址</a> / <a href=\"https://addons.mozilla.org/en-US/firefox/addon/react-devtools\">Firefox下载地址</a>），打开浏览器开发者工具，切换到组件页签，观察你的代码改动与组件树之间的联系。</li>\n</ol><p><img src=\"https://static001.geekbang.org/resource/image/a0/b0/a004e6fc4ea55d1ea408ea12f5f0f9b0.png?wh=2624x1424\" alt=\"\"></p><p>欢迎把你的思考和想法分享在留言区，也欢迎把课程分享给你的朋友或同事，我们下节课见！</p>","comments":[{"had_liked":false,"id":355491,"user_name":"🐑","can_delete":false,"product_type":"c1","uid":2189689,"ip_address":"北京","ucode":"DE34B3B14287D1","user_header":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","comment_is_top":true,"comment_ctime":1661424693,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"你好，我是咱们《现代React Web开发实战》的专栏编辑！课程中的相关代码我都放在了这里，你可以根据需要来学习👇\n\n🌟https:&#47;&#47;gitee.com&#47;evisong&#47;geektime-column-oh-my-kanban 这是oh-my-kanban项目源代码。\n\n🌟https:&#47;&#47;gitee.com&#47;evisong&#47;geektime-column-oh-my-kanban&#47;commits&#47;main 这个是03分步骤提交的commits。\n\n🌟https:&#47;&#47;gitee.com&#47;evisong&#47;geektime-column-oh-my-kanban&#47;releases&#47;tag&#47;v0.3.0 这个是03的完整代码。","like_count":7},{"had_liked":false,"id":355481,"user_name":"东方奇骥","can_delete":false,"product_type":"c1","uid":1354850,"ip_address":"北京","ucode":"DEE7085F7E55A4","user_header":"https://static001.geekbang.org/account/avatar/00/14/ac/62/37912d51.jpg","comment_is_top":false,"comment_ctime":1661417646,"is_pvip":false,"replies":[{"id":129362,"content":"你好，东方奇骥，为你的认真好学点赞！你的TS代码我看过，代码中能看出你的严谨和思考。\n\n我有两个小的comments：\n1. 目前03的功能，你基本都实现了，除了最后一步“把组件外面的todoList 数组改为 state 转移到组件内部”，希望你再接再厉：）\n2. interface Card和interface Submit的命名。据即不官方也不严肃的统计，软件工程师每天开发时间的50%都在为类、接口、变量取名字。我的习惯是 interface KanbanCardProps和interface KanbanNewCardProps ，等到真有抽象需求时再重构改名。这样可以省去一半的动脑时间：）","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661427533,"ip_address":"北京","comment_id":355481,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"跟着老师一起写，Typescript版本：https:&#47;&#47;github.com&#47;worldluoji&#47;front-end&#47;blob&#47;main&#47;react&#47;my-app&#47;src&#47;components&#47;board&#47;board.tsx","like_count":11,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585267,"discussion_content":"你好，东方奇骥，为你的认真好学点赞！你的TS代码我看过，代码中能看出你的严谨和思考。\n\n我有两个小的comments：\n1. 目前03的功能，你基本都实现了，除了最后一步“把组件外面的todoList 数组改为 state 转移到组件内部”，希望你再接再厉：）\n2. interface Card和interface Submit的命名。据即不官方也不严肃的统计，软件工程师每天开发时间的50%都在为类、接口、变量取名字。我的习惯是 interface KanbanCardProps和interface KanbanNewCardProps ，等到真有抽象需求时再重构改名。这样可以省去一半的动脑时间：）","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1661427533,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1354850,"avatar":"https://static001.geekbang.org/account/avatar/00/14/ac/62/37912d51.jpg","nickname":"东方奇骥","note":"","ucode":"DEE7085F7E55A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":585513,"discussion_content":"谢谢老师","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661616567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585267,"ip_address":"四川","group_id":0},"score":585513,"extra":""}]}]},{"had_liked":false,"id":356686,"user_name":"船长","can_delete":false,"product_type":"c1","uid":3170712,"ip_address":"北京","ucode":"EBC0CCDB341E35","user_header":"https://static001.geekbang.org/account/avatar/00/30/61/98/0d6b499d.jpg","comment_is_top":false,"comment_ctime":1662513752,"is_pvip":false,"replies":[{"id":129840,"content":"你好，船长，在第9节课React Hooks中会详细讲到这种用法，这里先剧透一下：在一些特定情况下，你通过useState声明的todoList变量值不是最新的state值，基于这个变量值来计算下一次的state值时，可能会覆盖上次的修改；而当state更新函数的参数是一个函数时，React会保证为这个函数传入对应state的最新值，这样函数就可以基于这个最新值来计算下一次的state值。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1662546892,"ip_address":"北京","comment_id":356686,"utype":1}],"discussion_count":3,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"老师好，问下这里 setTodoList 时为什么要用函数写？直接写有什么问题吗？\n（不能贴图，我上传了图床）\n![20220907QgBXtq](http:&#47;&#47;picbed.tanguangzhi.com&#47;uPic&#47;20220907QgBXtq)","like_count":5,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586867,"discussion_content":"你好，船长，在第9节课React Hooks中会详细讲到这种用法，这里先剧透一下：在一些特定情况下，你通过useState声明的todoList变量值不是最新的state值，基于这个变量值来计算下一次的state值时，可能会覆盖上次的修改；而当state更新函数的参数是一个函数时，React会保证为这个函数传入对应state的最新值，这样函数就可以基于这个最新值来计算下一次的state值。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1662546892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":2,"child_discussions":[{"author":{"id":1160192,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b4/00/661fb98d.jpg","nickname":"追忆似水年华","note":"","ucode":"C1D7C0DD7E7411","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":595157,"discussion_content":"感谢老师，学到一招，之前一直不知道怎样能够拿到最新的 state 值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1669793747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":586867,"ip_address":"山东","group_id":0},"score":595157,"extra":""},{"author":{"id":1050018,"avatar":"https://static001.geekbang.org/account/avatar/00/10/05/a2/721ae4c6.jpg","nickname":"Jervis","note":"","ucode":"86C02C483449CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":654089,"discussion_content":"那不是应该都用函数么，有的又是直接赋值","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1731891764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":586867,"ip_address":"广东","group_id":0},"score":654089,"extra":""}]}]},{"had_liked":false,"id":356070,"user_name":"学习前端-react","can_delete":false,"product_type":"c1","uid":1331001,"ip_address":"北京","ucode":"6C873AF98F3498","user_header":"https://static001.geekbang.org/account/avatar/00/14/4f/39/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1661947487,"is_pvip":false,"replies":[{"id":129652,"content":"你好，Geek_8aba0d，你的理解基本正确，再加一个限定：value值是来自于state，更新value也是通过更新state间接达成的，这样可以保证state是组件的“单一事实来源”。在后面第10节课事件处理，我们还会深入介绍受控组件，敬请期待。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1662047337,"ip_address":"北京","comment_id":356070,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"请问：什么是受控组件？是不是指的是value值是传入的然后触发的事件去更新value？","like_count":5,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586229,"discussion_content":"你好，Geek_8aba0d，你的理解基本正确，再加一个限定：value值是来自于state，更新value也是通过更新state间接达成的，这样可以保证state是组件的“单一事实来源”。在后面第10节课事件处理，我们还会深入介绍受控组件，敬请期待。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1662047337,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355587,"user_name":"ZENG","can_delete":false,"product_type":"c1","uid":1136797,"ip_address":"北京","ucode":"4F9A006DA78074","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/9d/91d795cf.jpg","comment_is_top":false,"comment_ctime":1661514448,"is_pvip":false,"replies":[{"id":129413,"content":"你好，coder，这个功能非常赞，这也体现了我们前端开发者对用户体验的追求。\n\n虽然后面讲hooks才会讲到useRef这个API，但我想请你先做个实验，在focus() 语句后面加一句：\n\n    console.log(&#39;focused&#39;);\n\n然后在文本框里连续输入字符，在浏览器控制台看看有没有什么异样。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661580242,"ip_address":"北京","comment_id":355587,"utype":1}],"discussion_count":7,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"做的时候加了一个input框自动焦点的功能：\nconst inputRef = useRef();\n  useEffect(() =&gt; {\n    inputRef.current.focus()\n  })","like_count":3,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585462,"discussion_content":"你好，coder，这个功能非常赞，这也体现了我们前端开发者对用户体验的追求。\n\n虽然后面讲hooks才会讲到useRef这个API，但我想请你先做个实验，在focus() 语句后面加一句：\n\n    console.log(&#39;focused&#39;);\n\n然后在文本框里连续输入字符，在浏览器控制台看看有没有什么异样。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661580242,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":3,"child_discussions":[{"author":{"id":2926068,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/a5/f4/9bf287ea.jpg","nickname":"WL","note":"","ucode":"945BA0370B9E5C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":585753,"discussion_content":"两次输出 focused；是因为严格模式影响了？","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1661787959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585462,"ip_address":"广东","group_id":0},"score":585753,"extra":""},{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2926068,"avatar":"https://static001.geekbang.org/account/avatar/00/2c/a5/f4/9bf287ea.jpg","nickname":"WL","note":"","ucode":"945BA0370B9E5C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":587329,"discussion_content":"是的，可以把src/index.js中的 &lt;React.StrictMode&gt; 去掉试试。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662978487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585753,"ip_address":"内蒙古","group_id":0},"score":587329,"extra":""},{"author":{"id":3685518,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJxzxDIUjoToBoTre10ibSWDwaQVGiciabvdHDiaMvUH8iandUawzy8G5KBZ2icicT5nxceLYvgT4vO1BwSQ/132","nickname":"王贺","note":"","ucode":"8A0E2CF7D82879","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":625100,"discussion_content":"传个空数组需要，类似于componentDidMount只有页面第一次加载进来时执行回调，不然的话每次页面重新渲染都会执行回调影响性能的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1691327530,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585462,"ip_address":"北京","group_id":0},"score":625100,"extra":""}]},{"author":{"id":1136797,"avatar":"https://static001.geekbang.org/account/avatar/00/11/58/9d/91d795cf.jpg","nickname":"ZENG","note":"","ucode":"4F9A006DA78074","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585533,"discussion_content":"我实验了一下，只要输入就会产生log，应该就是会渲染更新吧。因为我本职工作不是程序员，可能对很多知识了解还不够深入，接下来就是希望能一步步跟着老师学习下去，对 React 能掌握更深","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661666588,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广西","group_id":0},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1136797,"avatar":"https://static001.geekbang.org/account/avatar/00/11/58/9d/91d795cf.jpg","nickname":"ZENG","note":"","ucode":"4F9A006DA78074","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585649,"discussion_content":"React在非软件工程师中也很受欢迎。我之前跟一位互联网PM朋友聊到React，本来想向他介绍一下这门技术，谁知他业余时间已经用Ant-D开发过两个H5应用了。\n\n我相信你也一定能在这个专栏的学习中有所收获。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661744239,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585533,"ip_address":"北京","group_id":0},"score":585649,"extra":""},{"author":{"id":3169784,"avatar":"https://static001.geekbang.org/account/avatar/00/30/5d/f8/670b30fc.jpg","nickname":"虐猫狂魔薛定谔","note":"","ucode":"773E4CDA98C8EE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1136797,"avatar":"https://static001.geekbang.org/account/avatar/00/11/58/9d/91d795cf.jpg","nickname":"ZENG","note":"","ucode":"4F9A006DA78074","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586254,"discussion_content":"useEffect没有传递依赖数组，每次组件刷新，完成页面渲染后会执行该hook。\n-依赖数组 没传  每次组件刷新都会执行\n-依赖数组为空数组， 表示该hook不依赖任何值，只在组件第一次完成渲染后执行一次。\n-传递了依赖数组的情况我就不说了","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1662081458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585533,"ip_address":"浙江","group_id":0},"score":586254,"extra":""}]}]},{"had_liked":false,"id":355258,"user_name":"若川","can_delete":false,"product_type":"c1","uid":1230852,"ip_address":"北京","ucode":"B8C3DD4B38CC6F","user_header":"https://static001.geekbang.org/account/avatar/00/12/c8/04/fed4c1ad.jpg","comment_is_top":false,"comment_ctime":1661233884,"is_pvip":true,"replies":[{"id":129265,"content":"你好，若川。感谢你分享Windows上VSCode的使用经验。如果你在Windows上开发React应用时遇到一些不容易解决的问题，可以考虑使用Windows的WSL2 Linux子系统。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661262707,"ip_address":"北京","comment_id":355258,"utype":1}],"discussion_count":10,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"学到了新的node版本管理工具 fnm。\n\nWindows 用户安装 VSCode 后，命令行终端默认就有 code 命令了~可以 code -h 查看帮助信息。","like_count":3,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584995,"discussion_content":"你好，若川。感谢你分享Windows上VSCode的使用经验。如果你在Windows上开发React应用时遇到一些不容易解决的问题，可以考虑使用Windows的WSL2 Linux子系统。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661262707,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":4,"child_discussions":[{"author":{"id":1780486,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2b/06/aa8adf3a.jpg","nickname":"Chinge_Yang","note":"","ucode":"24CA90E0003EBE","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":585006,"discussion_content":"我在使用wsl2时，vscode 使用 yarn serve 这类开发模式时检测不到代码的变动，换成 wsl 没问题。请问您是如何解决的呢？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661265747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":584995,"ip_address":"广东","group_id":0},"score":585006,"extra":""},{"author":{"id":1230852,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c8/04/fed4c1ad.jpg","nickname":"若川","note":"","ucode":"B8C3DD4B38CC6F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":585138,"discussion_content":"原来老师基本每个评论都会回复。感谢老师推荐 Windows WSL2 Linux 子系统。\n\n我现在Windows下就是用的 Linux 子系统。\n\n我之前也写过文章《使用 ohmyzsh 打造 windows、ubuntu、mac 系统高效终端命令行工具》https://lxchuan12.gitee.io/oh-my-zsh/","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661338461,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":584995,"ip_address":"浙江","group_id":0},"score":585138,"extra":""},{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1780486,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/2b/06/aa8adf3a.jpg","nickname":"Chinge_Yang","note":"","ucode":"24CA90E0003EBE","race_medal":0,"user_type":1,"is_pvip":true},"discussion":{"id":585145,"discussion_content":"你好，Chinge_Yang，我平时用Mac多一些，最近一次用Windows的WSL2时没遇到file watch不生效的问题。我推测可能是因为代码文件路径，WSL2的文件最好存到 Linux路径下而不是C盘，具体可以参考 https://github.com/microsoft/WSL/issues/4169 这个issue。我晚上回家也会检查一下我的WSL2是怎么配置的，有发现会跟你同步。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661342261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":585006,"ip_address":"北京","group_id":0},"score":585145,"extra":""}]},{"author":{"id":1218183,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/87/bbdeb4ee.jpg","nickname":"杨永安","note":"","ucode":"D23013C30D435B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585898,"discussion_content":"我更喜欢pnpm env 功能","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661878207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1142650,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6f/7a/49ed77c2.jpg","nickname":"tiezi123","note":"","ucode":"A05C47BE5CE488","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593022,"discussion_content":"这里遇到你，哈哈哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667891474,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"辽宁","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1230852,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c8/04/fed4c1ad.jpg","nickname":"若川","note":"","ucode":"B8C3DD4B38CC6F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1142650,"avatar":"https://static001.geekbang.org/account/avatar/00/11/6f/7a/49ed77c2.jpg","nickname":"tiezi123","note":"","ucode":"A05C47BE5CE488","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593068,"discussion_content":"哈哈～大家都是一起学习，同学好😬","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667909245,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":593022,"ip_address":"浙江","group_id":0},"score":593068,"extra":""}]},{"author":{"id":1177022,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f5/be/dc9f469a.jpg","nickname":"棒棒的小伙","note":"","ucode":"AF9FA670FA8249","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590157,"discussion_content":"活捉一个源码大神","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665560248,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"澳大利亚","group_id":0},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1230852,"avatar":"https://static001.geekbang.org/account/avatar/00/12/c8/04/fed4c1ad.jpg","nickname":"若川","note":"","ucode":"B8C3DD4B38CC6F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1177022,"avatar":"https://static001.geekbang.org/account/avatar/00/11/f5/be/dc9f469a.jpg","nickname":"棒棒的小伙","note":"","ucode":"AF9FA670FA8249","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590191,"discussion_content":"哈哈不是大神～就是普通小前端～","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665578383,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":590157,"ip_address":"浙江","group_id":0},"score":590191,"extra":""}]}]},{"had_liked":false,"id":355458,"user_name":"CondorHero","can_delete":false,"product_type":"c1","uid":1528334,"ip_address":"北京","ucode":"BD850FE812D22F","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/0e/c5ff46d2.jpg","comment_is_top":false,"comment_ctime":1661400902,"is_pvip":false,"replies":[{"id":129363,"content":"你好，Condor Hero，你对技术的热情和这样举一反三的学习方式，一定会给你带来更多的收获。\n\n话说Volta我是第一次听说，我大概看了下它介绍，看起来原理与fnm类似，也是在使用shim的方式。谢谢你告诉大家。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661428050,"ip_address":"北京","comment_id":355458,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"以前只用过 nvm，这回了解了 fnm，借助它去调研了下 Node.js 管理器，然后一下子打开了 Node.js 管理器的大门，什么 nvm、n、fnm、Volta、nvs 等等，一圈看下来还是 fnm 香 ，速度快、更好的跨平台、像 nvm 一样的 API 简洁度，瞬间把 nvm 卸了装上 fnm😄","like_count":2,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585270,"discussion_content":"你好，Condor Hero，你对技术的热情和这样举一反三的学习方式，一定会给你带来更多的收获。\n\n话说Volta我是第一次听说，我大概看了下它介绍，看起来原理与fnm类似，也是在使用shim的方式。谢谢你告诉大家。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661428050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378574,"user_name":"muzzy","can_delete":false,"product_type":"c1","uid":1778005,"ip_address":"浙江","ucode":"A2E4291405D00D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKaOTc2Lx04iackJhiaOYjBQccVsyzYUrGzibeJw2G5eQez1XmnOianUTD4hFZkQWpVdLVS8ogBIxibffg/132","comment_is_top":false,"comment_ctime":1690440052,"is_pvip":false,"replies":[{"id":139718,"content":"你好，muzzy，最近半年我们新开的项目基本都是用vite创建的了，vite确实快，尤其是在代码量大的时候。不过小型项目中它跟cra的区别并不明显。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1699158037,"ip_address":"北京","comment_id":378574,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"老师 现在还推荐使用cra去创建react的应用么 还是直接用vite去创建","like_count":1,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630968,"discussion_content":"你好，muzzy，最近半年我们新开的项目基本都是用vite创建的了，vite确实快，尤其是在代码量大的时候。不过小型项目中它跟cra的区别并不明显。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699158037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356157,"user_name":"阿阳","can_delete":false,"product_type":"c1","uid":1165817,"ip_address":"北京","ucode":"20A35FB86B1C5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c9/f9/39492855.jpg","comment_is_top":false,"comment_ctime":1662017140,"is_pvip":false,"replies":[{"id":129657,"content":"你好，阿阳，在第9节课React Hooks中会详细讲到这种用法，这里先剧透一下：在一些特定情况下，你通过useState声明的todoList变量值不是最新的state值，基于这个变量值来计算下一次的state值时，可能会覆盖上次的修改；而当state更新函数的参数是一个函数时，React会保证为这个函数传入对应state的最新值，这样函数就可以基于这个最新值来计算下一次的state值。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1662048713,"ip_address":"北京","comment_id":356157,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"老师你好，请问在更新组件状态时，这样使用：\n    setTodoList((currentTodoList) =&gt; [\n      { title, status: new Date().toDateString() },\n      ...currentTodoList,\n    ]);\n这时候传入的是一个回调函数，这种使用方法能讲一下吗？","like_count":1,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586234,"discussion_content":"你好，阿阳，在第9节课React Hooks中会详细讲到这种用法，这里先剧透一下：在一些特定情况下，你通过useState声明的todoList变量值不是最新的state值，基于这个变量值来计算下一次的state值时，可能会覆盖上次的修改；而当state更新函数的参数是一个函数时，React会保证为这个函数传入对应state的最新值，这样函数就可以基于这个最新值来计算下一次的state值。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662048713,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1431110,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJ1IdxyfYWRERClTxbYAqdE81VjsBe0lkKSLQ7wia2ibx9y7LgTX68CPGw7WJEGM0S5vkStxxwzUARQ/132","nickname":"微漾无痕","note":"","ucode":"05C6472A53DCD7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":597419,"discussion_content":"老师,通过useState声明的todoList变量值不是最新的state值,能否说下&#39;特定情况&#39;具体都是哪些情况?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1671776840,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":586234,"ip_address":"四川","group_id":0},"score":597419,"extra":""}]}]},{"had_liked":false,"id":355381,"user_name":"Ccccceilui","can_delete":false,"product_type":"c1","uid":1328754,"ip_address":"北京","ucode":"B65BD49E5D7597","user_header":"https://static001.geekbang.org/account/avatar/00/14/46/72/98d9723e.jpg","comment_is_top":false,"comment_ctime":1661326619,"is_pvip":false,"replies":[{"id":129336,"content":"你好，Ccccceilui，抱歉这里我遗漏了一个步骤，安装完fnm后，需要在你的.bashrc或.zshrc文件中加入\n\n    eval &quot;$(fnm env --use-on-cd)&quot;\n\n之后重启命令行才能生效。另外后面的yarn start命令请改成npm start。\n\n抱歉给你造成了困扰，同时也感谢你的抓虫，我会尽快修正文稿。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661340877,"ip_address":"北京","comment_id":355381,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100119601,"comment_content":"执行完\n\nbrew install fnm\n和\nfnm install --lts\n命令后\n\nnpx\n和\nyarn\n命令并不存在啊？","like_count":1,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585141,"discussion_content":"你好，Ccccceilui，抱歉这里我遗漏了一个步骤，安装完fnm后，需要在你的.bashrc或.zshrc文件中加入\n\n    eval &#34;$(fnm env --use-on-cd)&#34;\n\n之后重启命令行才能生效。另外后面的yarn start命令请改成npm start。\n\n抱歉给你造成了困扰，同时也感谢你的抓虫，我会尽快修正文稿。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661340877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585212,"discussion_content":"你好，Ccccceilui，课程文稿相关内容已修正。谢谢你的抓虫。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661399112,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":378048,"user_name":"渣渣辉","can_delete":false,"product_type":"c1","uid":1911235,"ip_address":"日本","ucode":"730838D9161579","user_header":"https://static001.geekbang.org/account/avatar/00/1d/29/c3/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1689690838,"is_pvip":false,"replies":[{"id":139724,"content":"你好，渣渣辉，很高兴这节课对你有帮助！","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1699159379,"ip_address":"北京","comment_id":378048,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"对于0经验react的新手来说很受用。这节课看了1个点。","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630974,"discussion_content":"你好，渣渣辉，很高兴这节课对你有帮助！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699159379,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":375663,"user_name":"童童","can_delete":false,"product_type":"c1","uid":1251331,"ip_address":"北京","ucode":"B5265F986B260F","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJZmm5lWL0PlSEdluyDYtmyTvkHW7kSqJbsT40SZGnuFVUBDrICBlXgB53PeB8cOxuEs88PPk4feg/132","comment_is_top":false,"comment_ctime":1685794495,"is_pvip":false,"replies":[{"id":139722,"content":"你好，童童，这个错误提示大概率是因为你本地的ssh_key配置有些问题，可以参考 https:&#47;&#47;help.gitee.com&#47;repository&#47;ssh-key&#47;generate-and-add-ssh-public-key 修正本地的ssh_key。或者如果只是下载代码不需要提交，也可以考虑https协议： git clone https:&#47;&#47;gitee.com&#47;evisong&#47;geektime-column-oh-my-kanban.git","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1699159015,"ip_address":"北京","comment_id":375663,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"源码怎么clone不下来？提示“The authenticity of host xxxx can&#39;t be established. Please make sure you have the correct access rights.”","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":630972,"discussion_content":"你好，童童，这个错误提示大概率是因为你本地的ssh_key配置有些问题，可以参考 https://help.gitee.com/repository/ssh-key/generate-and-add-ssh-public-key 修正本地的ssh_key。或者如果只是下载代码不需要提交，也可以考虑https协议： git clone https://gitee.com/evisong/geektime-column-oh-my-kanban.git","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1699159015,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":365619,"user_name":"大神博士","can_delete":false,"product_type":"c1","uid":1195144,"ip_address":"上海","ucode":"8C4318095949F0","user_header":"https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg","comment_is_top":false,"comment_ctime":1672827987,"is_pvip":false,"replies":[{"id":133512,"content":"你好，大神博士，抱歉给你带来不便，平台确实有一定功能限制，导致文稿中部分代码不易复制粘贴。遇到类似的情况时，建议你查看Gitee上的代码，比如 https:&#47;&#47;gitee.com&#47;evisong&#47;geektime-column-oh-my-kanban&#47;commits&#47;v0.3.0 就是第三课中，按文稿步骤提交的代码。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1673766270,"ip_address":"北京","comment_id":365619,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"复制出来代码都是加减号，不能从样式上去区分新旧代码吗；太难受了","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":599746,"discussion_content":"你好，大神博士，抱歉给你带来不便，平台确实有一定功能限制，导致文稿中部分代码不易复制粘贴。遇到类似的情况时，建议你查看Gitee上的代码，比如 https://gitee.com/evisong/geektime-column-oh-my-kanban/commits/v0.3.0 就是第三课中，按文稿步骤提交的代码。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1673766270,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361668,"user_name":"simoom","can_delete":false,"product_type":"c1","uid":1335362,"ip_address":"北京","ucode":"6AE2EED1295F9E","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/42/ed42e7cd.jpg","comment_is_top":false,"comment_ctime":1667746534,"is_pvip":false,"replies":[{"id":131662,"content":"感谢simoom的建议，我和专栏编辑会先记下来，下次更新时会替换成\n\n    npx create-react-app@5 oh-my-kanban \n\n（强制使用CRA 5.x版本）","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1667991569,"ip_address":"北京","comment_id":361668,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"使用npx create-react-app@latest my-app才成功的, 建议更新","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593187,"discussion_content":"感谢simoom的建议，我和专栏编辑会先记下来，下次更新时会替换成\n\n    npx create-react-app@5 oh-my-kanban \n\n（强制使用CRA 5.x版本）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667991569,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":361666,"user_name":"simoom","can_delete":false,"product_type":"c1","uid":1335362,"ip_address":"北京","ucode":"6AE2EED1295F9E","user_header":"https://static001.geekbang.org/account/avatar/00/14/60/42/ed42e7cd.jpg","comment_is_top":false,"comment_ctime":1667746276,"is_pvip":false,"replies":[{"id":131661,"content":"你好，simoom，本专栏的Create React App使用的是v5.0.1。我在本地又试了试，目前的CRA默认版本是5.0.1。我猜测你本地曾经安装过CRA的4.x版本，npx优先使用了那个版本。可以使用\n\n    npx create-react-app@5 oh-my-kanban \n\n强制使用CRA 5.x版本。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1667991509,"ip_address":"北京","comment_id":361666,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"现在好像变了, 建议修改文章\n\ncqy:react&#47; $ npx create-react-app oh-my-kanban                                                                                                                                                                                                                       [22:46:28]\n\nYou are running `create-react-app` 4.0.3, which is behind the latest release (5.0.1).\n\nWe no longer support global installation of Create React App.\n\nPlease remove any global installs with one of the following commands:\n- npm uninstall -g create-react-app\n- yarn global remove create-react-app\n\nThe latest instructions for creating a new app can be found here:\nhttps:&#47;&#47;create-react-app.dev&#47;docs&#47;getting-started&#47;\n\nnpm notice\nnpm notice New patch version of npm available! 8.19.2 -&gt; 8.19.3\nnpm notice Changelog: https:&#47;&#47;github.com&#47;npm&#47;cli&#47;releases&#47;tag&#47;v8.19.3\nnpm notice Run npm install -g npm@8.19.3 to update!\nnpm notice","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":593186,"discussion_content":"你好，simoom，本专栏的Create React App使用的是v5.0.1。我在本地又试了试，目前的CRA默认版本是5.0.1。我猜测你本地曾经安装过CRA的4.x版本，npx优先使用了那个版本。可以使用\n\n    npx create-react-app@5 oh-my-kanban \n\n强制使用CRA 5.x版本。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1667991509,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359661,"user_name":"永不放弃","can_delete":false,"product_type":"c1","uid":2132129,"ip_address":"北京","ucode":"2BCCADF1E20E57","user_header":"https://static001.geekbang.org/account/avatar/00/20/88/a1/a78990c4.jpg","comment_is_top":false,"comment_ctime":1665733959,"is_pvip":false,"replies":[{"id":131085,"content":"你好，永不放弃，我尝试重现了一下你的问题，发现如果把：\n\n  .kanban-column {\n      flex: 1 1;\n      display: flex;\n      flex-direction: column;\n      border: 1px solid gray;\n      border-radius: 1rem;\n  }\n\n中的display: flex暂时禁用掉，会出现你说的整屏滚动：\n\n  .kanban-column {\n      flex: 1 1;\n      &#47;* display: flex; *&#47;\n      flex-direction: column;\n      border: 1px solid gray;\n      border-radius: 1rem;\n  }\n\n不知这是不是你的问题根源。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1666537204,"ip_address":"北京","comment_id":359661,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"前面看板列的 CSS .kanban-column &gt; ul { flex: 1; flex-basis: 0; overflow: auto; }，保证了卡片增减不会改变页面高度，而是自动出现滚动条。  我这边这样设置了，但是没有局部自动滚动图，都是整屏的。这个是啥原因？老师  .kanban-column &gt; ul {\n  flex: 1;\n  flex-basis: 0;\n  margin: 1rem;\n  padding: 0;\n  overflow: auto;\n}\n","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591362,"discussion_content":"你好，永不放弃，我尝试重现了一下你的问题，发现如果把：\n\n  .kanban-column {\n      flex: 1 1;\n      display: flex;\n      flex-direction: column;\n      border: 1px solid gray;\n      border-radius: 1rem;\n  }\n\n中的display: flex暂时禁用掉，会出现你说的整屏滚动：\n\n  .kanban-column {\n      flex: 1 1;\n      /* display: flex; */\n      flex-direction: column;\n      border: 1px solid gray;\n      border-radius: 1rem;\n  }\n\n不知这是不是你的问题根源。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666537204,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":359660,"user_name":"永不放弃","can_delete":false,"product_type":"c1","uid":2132129,"ip_address":"北京","ucode":"2BCCADF1E20E57","user_header":"https://static001.geekbang.org/account/avatar/00/20/88/a1/a78990c4.jpg","comment_is_top":false,"comment_ctime":1665733867,"is_pvip":false,"replies":[{"id":131086,"content":"你好，永不放弃，我看到你的代码了，写得很赞！项目README里的思维导图也很清晰。希望你再接再厉！","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1666537565,"ip_address":"北京","comment_id":359660,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"新手打开学习，环境已配置，项目已创建，已跑通，已跟着代码实现。 https:&#47;&#47;github.com&#47;yj229201093&#47;oh-my-kanban","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":591363,"discussion_content":"你好，永不放弃，我看到你的代码了，写得很赞！项目README里的思维导图也很清晰。希望你再接再厉！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1666537565,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358336,"user_name":"Geek_45e28f","can_delete":false,"product_type":"c1","uid":2759037,"ip_address":"北京","ucode":"6CF51984950F48","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erb3HxekfsIdQumoyJVicmOuvibm0DqIiaCNHeESJdic3t1eIXAplplMicOnmLzibI19uiagdXm8qgZftHbw/132","comment_is_top":false,"comment_ctime":1664204828,"is_pvip":false,"replies":[{"id":130438,"content":"你好，Geek_45e28f，没打印出任何东西的原因，在于代码里 .map() 箭头函数没有返回值。可以改成这样：\n\n           new Array(10).fill(&#39;&#39;).map((index) =&gt; {\n             return (\n                &lt;li className=&quot;kanban-card&quot;&gt;\n                  &lt;div className=&quot;card-title&quot;&gt;开发任务-{index + 1}&lt;&#47;div&gt;\n                  &lt;div className=&quot;card-status&quot;&gt;22-05-22 18:15&lt;&#47;div&gt;\n                &lt;&#47;li&gt;\n              );\n            })\n\n也可以改成这样：\n\n              new Array(10).fill(&#39;&#39;).map((index) =&gt; (\n                &lt;li className=&quot;kanban-card&quot;&gt;\n                  &lt;div className=&quot;card-title&quot;&gt;开发任务-{index + 1}&lt;&#47;div&gt;\n                  &lt;div className=&quot;card-status&quot;&gt;22-05-22 18:15&lt;&#47;div&gt;\n                &lt;&#47;li&gt;\n                )\n              )\n\n具体请参考前面给你另一条留言的回复。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1664364874,"ip_address":"北京","comment_id":358336,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"        &lt;section className=&quot;kanban-column column-todo&quot;&gt;\n          &lt;h2&gt;待处理&lt;&#47;h2&gt;\n          &lt;ul&gt;\n            {\n              new Array(10).fill(&#39;&#39;).map((index) =&gt; {\n                &lt;li className=&quot;kanban-card&quot;&gt;\n                  &lt;div className=&quot;card-title&quot;&gt;开发任务-{index + 1}&lt;&#47;div&gt;\n                  &lt;div className=&quot;card-status&quot;&gt;22-05-22 18:15&lt;&#47;div&gt;\n                &lt;&#47;li&gt;\n                }\n              )\n            }\n          &lt;&#47;ul&gt;\n        &lt;&#47;section&gt;\n语法也没报错。。。但是也没打印出任何东西。","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589048,"discussion_content":"你好，Geek_45e28f，没打印出任何东西的原因，在于代码里 .map() 箭头函数没有返回值。可以改成这样：\n\n           new Array(10).fill(&#39;&#39;).map((index) =&gt; {\n             return (\n                &lt;li className=&#34;kanban-card&#34;&gt;\n                  &lt;div className=&#34;card-title&#34;&gt;开发任务-{index + 1}&lt;/div&gt;\n                  &lt;div className=&#34;card-status&#34;&gt;22-05-22 18:15&lt;/div&gt;\n                &lt;/li&gt;\n              );\n            })\n\n也可以改成这样：\n\n              new Array(10).fill(&#39;&#39;).map((index) =&gt; (\n                &lt;li className=&#34;kanban-card&#34;&gt;\n                  &lt;div className=&#34;card-title&#34;&gt;开发任务-{index + 1}&lt;/div&gt;\n                  &lt;div className=&#34;card-status&#34;&gt;22-05-22 18:15&lt;/div&gt;\n                &lt;/li&gt;\n                )\n              )\n\n具体请参考前面给你另一条留言的回复。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664364874,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358335,"user_name":"Geek_45e28f","can_delete":false,"product_type":"c1","uid":2759037,"ip_address":"北京","ucode":"6CF51984950F48","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erb3HxekfsIdQumoyJVicmOuvibm0DqIiaCNHeESJdic3t1eIXAplplMicOnmLzibI19uiagdXm8qgZftHbw/132","comment_is_top":false,"comment_ctime":1664204696,"is_pvip":false,"replies":[{"id":130437,"content":"你好，Geek_45e28f，你说得对，array.map()里的箭头函数确实应该是 () =&gt; {}，不过需要 () =&gt; {} 有返回值。比如：\n\n    books.map(book =&gt; {\n      return (\n        &lt;li&gt;{book}&lt;&#47;li&gt;\n      );\n    })\n\n() =&gt; () 其实是上面箭头函数的一种简略写法，省略了函数体，直接返回表达式的值：\n\n    books.map(book =&gt; (\n        &lt;li&gt;{book}&lt;&#47;li&gt;\n    )\n\n具体请参考： https:&#47;&#47;developer.mozilla.org&#47;zh-CN&#47;docs&#47;Web&#47;JavaScript&#47;Reference&#47;Functions&#47;Arrow_functions#%E8%AF%AD%E6%B3%95","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1664364504,"ip_address":"北京","comment_id":358335,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"老师，array.map()里的箭头函数不是应该是 () =&gt; {}吗？\n为什么 ()=&gt;{}不会显示任何东西，反而()=&gt;()才会把无须列表打印出来？","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589046,"discussion_content":"你好，Geek_45e28f，你说得对，array.map()里的箭头函数确实应该是 () =&gt; {}，不过需要 () =&gt; {} 有返回值。比如：\n\n    books.map(book =&gt; {\n      return (\n        &lt;li&gt;{book}&lt;/li&gt;\n      );\n    })\n\n() =&gt; () 其实是上面箭头函数的一种简略写法，省略了函数体，直接返回表达式的值：\n\n    books.map(book =&gt; (\n        &lt;li&gt;{book}&lt;/li&gt;\n    )\n\n具体请参考： https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions#%E8%AF%AD%E6%B3%95","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664364504,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358166,"user_name":"智能-杨晋","can_delete":false,"product_type":"c1","uid":3047794,"ip_address":"北京","ucode":"020C1A75BE251D","user_header":"","comment_is_top":false,"comment_ctime":1663991111,"is_pvip":false,"replies":[{"id":130409,"content":"你好，智能-杨晋，我猜你是指这段内容？\n\n    把组件外面的todoList 数组改为 state 转移到组件内部\n\n如果是这句的话，转移之前的todoList数组并不在任何组件里面。\n\n在这节课末尾的src&#47;App.js中，有三个React函数组件，分别是：\n\n* const KanbanCard = ({ title, status }) =&gt; {} 声明的 KanbanCard\n* const KanbanNewCard = ({ onSubmit }) =&gt; {} 声明的 KanbanNewCard\n* function App() {} 声明的 App。\n\nApp.js中这些之外的代码都不是组件代码。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1664215997,"ip_address":"北京","comment_id":358166,"utype":1}],"discussion_count":1,"race_medal":0,"score":3,"product_id":100119601,"comment_content":"老师，如果就是要在父组件里面改变todoList 给 todoList插入一跳数据呢？(数据不往子组件迁移)\n","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588926,"discussion_content":"你好，智能-杨晋，我猜你是指这段内容？\n\n    把组件外面的todoList 数组改为 state 转移到组件内部\n\n如果是这句的话，转移之前的todoList数组并不在任何组件里面。\n\n在这节课末尾的src/App.js中，有三个React函数组件，分别是：\n\n* const KanbanCard = ({ title, status }) =&gt; {} 声明的 KanbanCard\n* const KanbanNewCard = ({ onSubmit }) =&gt; {} 声明的 KanbanNewCard\n* function App() {} 声明的 App。\n\nApp.js中这些之外的代码都不是组件代码。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664215997,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":357899,"user_name":"wu526","can_delete":false,"product_type":"c1","uid":1022129,"ip_address":"北京","ucode":"69282EB175B48E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/98/b1/f89a84d0.jpg","comment_is_top":false,"comment_ctime":1663739302,"is_pvip":false,"replies":[{"id":130299,"content":"你好，Casper，很高兴你落入了我精心布置的陷阱（笑）。\n\n请你在你目前代码的基础上，把：\n\n  const handleSubmit = (title) =&gt; {\n    todoList.unshift({ title, status: new Date().toDateString() });\n    setShowAdd(false);\n  };\n\n中的 setShowAdd(false);  注释掉，然后再回车试试还能不能成功。\n\n只要这个组件最后有state更新，哪怕是与todoList不太相关的showAdd，组件就会重新渲染，只要todoList的修改发生在重新渲染之前，就搭上了顺风车。\n\n相反的，如果光修改todoList这样的非state数据，而没有state更新，组件就不知道需要重新渲染。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1663821472,"ip_address":"北京","comment_id":357899,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"老师，我按文章中的步骤操作时, 在最后 没有将 &quot;组件外面的todoList 数组改为 state 转移到组件内部&quot;, 也就是直接使用 const todoList = [{...}]这种方式, 回车时新项目也添加成功了，React 的相关信息时 &quot;react&quot;: &quot;^18.2.0&quot;, &quot;react-dom&quot;: &quot;^18.2.0&quot;,  &quot;react-scripts&quot;: &quot;5.0.1&quot;。麻烦老师解惑一下，非常感谢老师。","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":588541,"discussion_content":"你好，Casper，很高兴你落入了我精心布置的陷阱（笑）。\n\n请你在你目前代码的基础上，把：\n\n  const handleSubmit = (title) =&gt; {\n    todoList.unshift({ title, status: new Date().toDateString() });\n    setShowAdd(false);\n  };\n\n中的 setShowAdd(false);  注释掉，然后再回车试试还能不能成功。\n\n只要这个组件最后有state更新，哪怕是与todoList不太相关的showAdd，组件就会重新渲染，只要todoList的修改发生在重新渲染之前，就搭上了顺风车。\n\n相反的，如果光修改todoList这样的非state数据，而没有state更新，组件就不知道需要重新渲染。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1663821472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356711,"user_name":"whoami","can_delete":false,"product_type":"c1","uid":1160437,"ip_address":"北京","ucode":"42DE960CC2AA2D","user_header":"https://static001.geekbang.org/account/avatar/00/11/b4/f5/aec0f0c0.jpg","comment_is_top":false,"comment_ctime":1662522798,"is_pvip":false,"replies":[{"id":129839,"content":"你好，whoami，没问题的，我身边也有同事在用n，而且这个工具也支持`.nvmrc`单行配置文件，功能足够。只是你可能需要自己处理`&#47;usr&#47;local`的权限问题。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1662546778,"ip_address":"北京","comment_id":356711,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"mac版本下是不是用n也可以","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586866,"discussion_content":"你好，whoami，没问题的，我身边也有同事在用n，而且这个工具也支持`.nvmrc`单行配置文件，功能足够。只是你可能需要自己处理`/usr/local`的权限问题。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662546778,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586874,"discussion_content":"补充一下， https://github.com/tj/n 这个仓库的所有者 TJ Holowaychuk 是个具有传奇色彩的人物，感兴趣的同学可以去搜索一下。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662548668,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356290,"user_name":"百里","can_delete":false,"product_type":"c1","uid":1797062,"ip_address":"北京","ucode":"1115C485942E5B","user_header":"https://static001.geekbang.org/account/avatar/00/1b/6b/c6/4cc776a7.jpg","comment_is_top":false,"comment_ctime":1662111049,"is_pvip":false,"replies":[{"id":129828,"content":"你好，百里，抱歉这几天在赶稿回复晚了。你提到的“flex: 1; flex-basis: 0;”我在我本地的Chrome和FF测试过，没有发现问题。请问你说的卡住是指？","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1662524115,"ip_address":"北京","comment_id":356290,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"到flex: 1; flex-basis: 0;这里就卡住了。\n重新学习后发现，可以改为 flex: 0px;","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586808,"discussion_content":"你好，百里，抱歉这几天在赶稿回复晚了。你提到的“flex: 1; flex-basis: 0;”我在我本地的Chrome和FF测试过，没有发现问题。请问你说的卡住是指？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662524116,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":356120,"user_name":"阿阳","can_delete":false,"product_type":"c1","uid":1165817,"ip_address":"北京","ucode":"20A35FB86B1C5C","user_header":"https://static001.geekbang.org/account/avatar/00/11/c9/f9/39492855.jpg","comment_is_top":false,"comment_ctime":1661996881,"is_pvip":false,"replies":[{"id":129655,"content":"你好，阿阳，很高兴你有收获。上手写代码是专栏编辑和我在一开始就定下的方向，我们坚信这种方式更能保证学习效果。让我们一起努力。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1662047735,"ip_address":"北京","comment_id":356120,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"一步一步的做，反复的看，好有收获，夯实基础，加深对开发思想的理解。","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586232,"discussion_content":"你好，阿阳，很高兴你有收获。上手写代码是专栏编辑和我在一开始就定下的方向，我们坚信这种方式更能保证学习效果。让我们一起努力。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662047736,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355955,"user_name":"学会用实力去谈条件","can_delete":false,"product_type":"c1","uid":1743123,"ip_address":"北京","ucode":"4D4994BE3919CC","user_header":"https://static001.geekbang.org/account/avatar/00/1a/99/13/2b325b02.jpg","comment_is_top":false,"comment_ctime":1661868191,"is_pvip":false,"replies":[{"id":129646,"content":"去详情页找到入群链接哈","user_name":"编辑回复","user_name_real":"编辑","uid":2189689,"ctime":1662029991,"ip_address":"北京","comment_id":355955,"utype":2}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"有交流群嘛，方便问题反馈和沟通","like_count":0,"discussions":[{"author":{"id":2189689,"avatar":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","nickname":"🐑","note":"","ucode":"DE34B3B14287D1","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586202,"discussion_content":"去详情页找到入群链接哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662029991,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":1,"child_discussions":[{"author":{"id":1392788,"avatar":"https://static001.geekbang.org/account/avatar/00/15/40/94/afd0919c.jpg","nickname":"起風了","note":"","ucode":"2B49D13356A1F7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2189689,"avatar":"https://static001.geekbang.org/account/avatar/00/21/69/79/b4132042.jpg","nickname":"🐑","note":"","ucode":"DE34B3B14287D1","race_medal":0,"user_type":8,"is_pvip":false},"discussion":{"id":586602,"discussion_content":"但是我才发现我扫码加了也发了关键词,他也不邀请我进去","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1662370563,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":586202,"ip_address":"广东","group_id":0},"score":586602,"extra":""}]}]},{"had_liked":false,"id":355952,"user_name":"学会用实力去谈条件","can_delete":false,"product_type":"c1","uid":1743123,"ip_address":"北京","ucode":"4D4994BE3919CC","user_header":"https://static001.geekbang.org/account/avatar/00/1a/99/13/2b325b02.jpg","comment_is_top":false,"comment_ctime":1661867600,"is_pvip":false,"replies":[{"id":129566,"content":"你好，学会用实力去谈条件，从提示看，你遇到的错误是解压失败，感觉上像是下载了但又没有完全下载，导致文件损坏了。我家联通光纤不挂梯也能下载成功，你要不要用4G&#47;5G手机热点试试？","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661916831,"ip_address":"北京","comment_id":355952,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"$fnm --version输出fnm 1.31.1，说明fnm安装成功了，但是在执行 fnm install --lts时输出Installing Node v16.17.0 (x64)后就报错了\nerror: Can&#39;t download the requested binary: Can&#39;t extract the file: failed to unpack `&#47;Users&#47;xxx&#47;Library&#47;Application Support&#47;fnm&#47;node-versions&#47;.downloads&#47;.tmpYF3No7&#47;node-v16.17.0-darwin-x64&#47;bin&#47;node`\n\n是需要配置国内的镜像加速器（开了梯子也是如此）\n官网也没做过多介绍：https:&#47;&#47;github.com&#47;Schniz&#47;fnm\n\n顺便推荐一款VSCode好用的插件：AppWorks","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585951,"discussion_content":"你好，学会用实力去谈条件，从提示看，你遇到的错误是解压失败，感觉上像是下载了但又没有完全下载，导致文件损坏了。我家联通光纤不挂梯也能下载成功，你要不要用4G/5G手机热点试试？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661916831,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1743123,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/99/13/2b325b02.jpg","nickname":"学会用实力去谈条件","note":"","ucode":"4D4994BE3919CC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":586084,"discussion_content":"可能受限于我的网络，但在我配置了国内华为的镜像加速器后可以了，只需要将老师你提供的指令替换为\n\neval &#34;$(fnm env --use-on-cd --node-dist-mirror=https://repo.huaweicloud.com/nodejs/)&#34;\n即可解决默认从 https://nodejs.org/dist/下载node的网络延迟问题\n\n希望能帮到大家。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1661956011,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"广西","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355937,"user_name":"sello","can_delete":false,"product_type":"c1","uid":2011181,"ip_address":"北京","ucode":"51E4391D7120C4","user_header":"https://static001.geekbang.org/account/avatar/00/1e/b0/2d/dd070a55.jpg","comment_is_top":false,"comment_ctime":1661861415,"is_pvip":false,"replies":[{"id":129570,"content":"你好，_灿烂，这种技术在shell编程里比较常见。你可以在你的shell下单独执行一下 $( ) 里面的命令，如果你的shell是zsh，大概会出现这样的结果：\n\n    export PATH=&quot;&#47;Users&#47;xxx&#47;Library&#47;Caches&#47;fnm_multishells&#47;xxx_xxxxx&#47;bin&quot;:$PATH\n    export FNM_MULTISHELL_PATH=&quot;&#47;Users&#47;xxx&#47;Library&#47;Caches&#47;fnm_multishells&#47;xxx_xxxxx&quot;\n    export FNM_VERSION_FILE_STRATEGY=&quot;local&quot;\n    export FNM_DIR=&quot;&#47;Users&#47;xxx&#47;Library&#47;Application Support&#47;fnm&quot;\n    export FNM_LOGLEVEL=&quot;info&quot;\n    export FNM_NODE_DIST_MIRROR=&quot;https:&#47;&#47;nodejs.org&#47;dist&quot;\n    export FNM_ARCH=&quot;arm64&quot;\n    autoload -U add-zsh-hook\n    _fnm_autoload_hook () {\n        if [[ -f .node-version || -f .nvmrc ]]; then\n        fnm use --silent-if-unchanged\n    fi\n\n    }\n\n    add-zsh-hook chpwd _fnm_autoload_hook \\\n        &amp;&amp; _fnm_autoload_hook\n\n    rehash\n\n如果你的shell是bash或其他，打印结果会略有不同。但可以肯定的是，无论在哪种shell中，fnm env --use-on-cd 的打印结果一定是当前shell下可执行的脚本。\n\n当然，这样的打印结果目前只是字符串，但当字符串作为 eval 命令的参数后，就会作为真正的脚本被shell执行。你可以试一下 eval &quot;ls -l&quot;。\n\n然后你应该就能猜到 eval &quot;$(fnm env --use-on-cd)&quot; 要干什么了。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661920865,"ip_address":"北京","comment_id":355937,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"\n老师，请问 eval &quot;$(fnm env --use-on-cd)&quot; 这行命令是做什么的","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585963,"discussion_content":"你好，_灿烂，这种技术在shell编程里比较常见。你可以在你的shell下单独执行一下 $( ) 里面的命令，如果你的shell是zsh，大概会出现这样的结果：\n\n    export PATH=&#34;/Users/xxx/Library/Caches/fnm_multishells/xxx_xxxxx/bin&#34;:$PATH\n    export FNM_MULTISHELL_PATH=&#34;/Users/xxx/Library/Caches/fnm_multishells/xxx_xxxxx&#34;\n    export FNM_VERSION_FILE_STRATEGY=&#34;local&#34;\n    export FNM_DIR=&#34;/Users/xxx/Library/Application Support/fnm&#34;\n    export FNM_LOGLEVEL=&#34;info&#34;\n    export FNM_NODE_DIST_MIRROR=&#34;https://nodejs.org/dist&#34;\n    export FNM_ARCH=&#34;arm64&#34;\n    autoload -U add-zsh-hook\n    _fnm_autoload_hook () {\n        if [[ -f .node-version || -f .nvmrc ]]; then\n        fnm use --silent-if-unchanged\n    fi\n\n    }\n\n    add-zsh-hook chpwd _fnm_autoload_hook \\\n        &amp;&amp; _fnm_autoload_hook\n\n    rehash\n\n如果你的shell是bash或其他，打印结果会略有不同。但可以肯定的是，无论在哪种shell中，fnm env --use-on-cd 的打印结果一定是当前shell下可执行的脚本。\n\n当然，这样的打印结果目前只是字符串，但当字符串作为 eval 命令的参数后，就会作为真正的脚本被shell执行。你可以试一下 eval &#34;ls -l&#34;。\n\n然后你应该就能猜到 eval &#34;$(fnm env --use-on-cd)&#34; 要干什么了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661920865,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355895,"user_name":"Geek_0c843c","can_delete":false,"product_type":"c1","uid":2610578,"ip_address":"北京","ucode":"BE232306A17626","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM7D1LViadpKva62AYrvTy0tHFVaiaUUHFhw3Cqgrvj6kufayoOSJ9IcgL5viamlhhbIwhFtL0vMu35aA/132","comment_is_top":false,"comment_ctime":1661838410,"is_pvip":false,"replies":[{"id":129565,"content":"你好，Geek_0c843c，在后面的第16节课会重点介绍用TypeScript为React项目做类型验证，其他章节中为了减少对开发者的打扰，选择了浏览器原生的ES2020语言。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661915916,"ip_address":"北京","comment_id":355895,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"不用typescrpt讲吗","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585948,"discussion_content":"你好，Geek_0c843c，在后面的第16节课会重点介绍用TypeScript为React项目做类型验证，其他章节中为了减少对开发者的打扰，选择了浏览器原生的ES2020语言。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661915916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355833,"user_name":"小新","can_delete":false,"product_type":"c1","uid":3163893,"ip_address":"北京","ucode":"6F1F1BE16A847F","user_header":"https://static001.geekbang.org/account/avatar/00/30/46/f5/f2ad6692.jpg","comment_is_top":false,"comment_ctime":1661775678,"is_pvip":false,"replies":[{"id":129571,"content":"你好，小新，你的操作系统是Windows吗？如果是的话请参考文稿下面 若川 的留言：\n\n    Windows 用户安装 VSCode 后，命令行终端默认就有 code 命令了~可以 code -h 查看帮助信息。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661921043,"ip_address":"北京","comment_id":355833,"utype":1}],"discussion_count":2,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"install code 没找到","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585965,"discussion_content":"你好，小新，你的操作系统是Windows吗？如果是的话请参考文稿下面 若川 的留言：\n\n    Windows 用户安装 VSCode 后，命令行终端默认就有 code 命令了~可以 code -h 查看帮助信息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661921043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2011181,"avatar":"https://static001.geekbang.org/account/avatar/00/1e/b0/2d/dd070a55.jpg","nickname":"sello","note":"","ucode":"51E4391D7120C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585876,"discussion_content":"点击设置按钮，点第一个命令面板，搜索install code 第一个就是","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661861472,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"中国台湾","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355473,"user_name":"Sweety Gan","can_delete":false,"product_type":"c1","uid":2786132,"ip_address":"北京","ucode":"A53E0146B20D82","user_header":"","comment_is_top":false,"comment_ctime":1661412885,"is_pvip":false,"replies":[{"id":129361,"content":"你好，Sweety Gan，专栏编辑在留言区发布了代码仓库地址： https:&#47;&#47;gitee.com&#47;evisong&#47;geektime-column-oh-my-kanban 。我会随着连载进度把文稿对应的代码加进去并打tag，敬请期待。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661426543,"ip_address":"北京","comment_id":355473,"utype":1}],"discussion_count":1,"race_medal":0,"score":4,"product_id":100119601,"comment_content":"老师，请问你的代码仓库地址可以发下吗","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585264,"discussion_content":"你好，Sweety Gan，专栏编辑在留言区发布了代码仓库地址： https://gitee.com/evisong/geektime-column-oh-my-kanban 。我会随着连载进度把文稿对应的代码加进去并打tag，敬请期待。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661426543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355441,"user_name":"Geek_fcdf7b","can_delete":false,"product_type":"c1","uid":2115742,"ip_address":"北京","ucode":"55A2DBA5C6DF79","user_header":"https://static001.geekbang.org/account/avatar/00/20/48/9e/9bbaa97d.jpg","comment_is_top":false,"comment_ctime":1661392126,"is_pvip":false,"replies":[{"id":129350,"content":"你好，Geek_fcdf7b，两者不会冲突，但两者都装不是很必要。fnm会遵守现有项目目录的.nvmrc文件定义的node版本，但你已经在nvm里装过的node版本，以及版本下面全局安装的npm包都需要在fnm下重新安装。所以如果已经有了nvm，先用着就好了，要配置新环境时再试试fnm。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661399452,"ip_address":"北京","comment_id":355441,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100119601,"comment_content":"老师好，电脑已经安装了nvm，再安装fnm，两者会兼容吗？","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":585214,"discussion_content":"你好，Geek_fcdf7b，两者不会冲突，但两者都装不是很必要。fnm会遵守现有项目目录的.nvmrc文件定义的node版本，但你已经在nvm里装过的node版本，以及版本下面全局安装的npm包都需要在fnm下重新安装。所以如果已经有了nvm，先用着就好了，要配置新环境时再试试fnm。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661399452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355275,"user_name":"DC","can_delete":false,"product_type":"c1","uid":3162871,"ip_address":"北京","ucode":"68C7E914115740","user_header":"https://static001.geekbang.org/account/avatar/00/30/42/f7/dfa829cc.jpg","comment_is_top":false,"comment_ctime":1661243158,"is_pvip":false,"replies":[{"id":129267,"content":"你好，DC，下周开始每周二四六更新，期待下周与你再见：）","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661263284,"ip_address":"北京","comment_id":355275,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100119601,"comment_content":"期待老师早日更新","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584997,"discussion_content":"你好，DC，下周开始每周二四六更新，期待下周与你再见：）","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661263284,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355220,"user_name":"林芊芊","can_delete":false,"product_type":"c1","uid":3023492,"ip_address":"北京","ucode":"08B487A9F44A7A","user_header":"","comment_is_top":false,"comment_ctime":1661181229,"is_pvip":false,"replies":[{"id":129249,"content":"你好，林芊芊，nice catch！组件的key是保证React渲染性能的一个重要功能，专栏会在后面的《06｜虚拟DOM：聊聊React组件渲染机制》这节课专门讲到key，并补全相关的代码。这样可以帮助刚接触React的学员更容易理解为什么要加入key。","user_name":"作者回复","user_name_real":"编辑","uid":1033973,"ctime":1661222656,"ip_address":"北京","comment_id":355220,"utype":1}],"discussion_count":1,"race_medal":0,"score":5,"product_id":100119601,"comment_content":"没key","like_count":0,"discussions":[{"author":{"id":1033973,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/c6/f5/dae613e0.jpg","nickname":"宋一玮","note":"","ucode":"55E5B710556C1E","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":584919,"discussion_content":"你好，林芊芊，nice catch！组件的key是保证React渲染性能的一个重要功能，专栏会在后面的《06｜虚拟DOM：聊聊React组件渲染机制》这节课专门讲到key，并补全相关的代码。这样可以帮助刚接触React的学员更容易理解为什么要加入key。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1661222656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"北京","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":396192,"user_name":"Ilearning99","can_delete":false,"product_type":"c1","uid":1989119,"ip_address":"新加坡","ucode":"7901836A2C47EF","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/qOdqzmC507sibL6sichNSDaVmyoMKibEIqHWpic4CftgOQnoA3QKeRPwic9j1Ha8MLtzzqzfSRavR9GWMju09SMADUg/132","comment_is_top":false,"comment_ctime":1733474460,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100119601,"comment_content":"我完全是前端小白，这一句&quot;npx create-react-app oh-my-kanhan&quot;卡了好久，一直报错”npm ERR! ERESOLVE unable to resolve dependency tree&quot; Found: react@19.0.0 Could not resolve dependency: npm ERR! peer react@&quot;^18.0.0&quot; from @testing-library&#47;react@13.4.0“，后面用fnm装了node 14.17.0才跑成功","like_count":0},{"had_liked":false,"id":388944,"user_name":"Geek_f4e42d","can_delete":false,"product_type":"c1","uid":3868613,"ip_address":"湖南","ucode":"80E77232E58716","user_header":"","comment_is_top":false,"comment_ctime":1711245579,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":5,"product_id":100119601,"comment_content":"看板列的 CSS .kanban-column &gt; ul { flex: 1; flex-basis: 0; overflow: auto; }，保证了卡片增减不会改变页面高度，而是自动出现滚动条。\n这个能结合上下文解释下具体原因吗？因为什么只加 overflow: auto;不能达到效果","like_count":0}]}