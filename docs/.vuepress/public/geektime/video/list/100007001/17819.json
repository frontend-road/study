{"id":17819,"title":"99 | Netflix Turbine 简介","content":"无","comments":[{"had_liked":false,"id":157544,"user_name":"花错","can_delete":false,"product_type":"c3","uid":1757419,"ip_address":"","ucode":"510F435E4ECE3E","user_header":"https://static001.geekbang.org/account/avatar/00/1a/d0/eb/96e11b82.jpg","comment_is_top":false,"comment_ctime":1575190847,"is_pvip":false,"replies":[{"id":60513,"content":"trubine对实时性要求比较高，数据处理量较大，如果微服务量多的话，建议用性能较好的虚拟机甚至物理机。一个trubine实例容量不够的话，可以进行sharding，添加新的turbine实例分摊负载。\n\nSpring Cloud对有Turbine完善改进，支持消息队列方式，具体可以参考其文档：\nhttps:&#47;&#47;projects.spring.io&#47;spring-cloud&#47;docs&#47;1.0.1&#47;spring-cloud.html#_turbine_amqp\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1575286139,"ip_address":"","comment_id":157544,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师你好,如果在大量的微服务都发生hystrix熔断,那么聚合到turbine的数据就很多,即便是集群的情况下也扛不住,是否有一个缓存的机制?比如DB或者MQ?","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476460,"discussion_content":"trubine对实时性要求比较高，数据处理量较大，如果微服务量多的话，建议用性能较好的虚拟机甚至物理机。一个trubine实例容量不够的话，可以进行sharding，添加新的turbine实例分摊负载。\n\nSpring Cloud对有Turbine完善改进，支持消息队列方式，具体可以参考其文档：\nhttps://projects.spring.io/spring-cloud/docs/1.0.1/spring-cloud.html#_turbine_amqp\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575286139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":119943,"user_name":"citysun2009","can_delete":false,"product_type":"c3","uid":1090468,"ip_address":"","ucode":"285AB0E13C5927","user_header":"https://static001.geekbang.org/account/avatar/00/10/a3/a4/fc9cf791.jpg","comment_is_top":false,"comment_ctime":1564734854,"is_pvip":false,"replies":[{"id":44058,"content":"可以理解为都是push方式，不管Hystrix应用配Turbine的地址，还是Turbine集成Eureka，这个时候不过是Hystrix从Eureka拿到Turbine的地址，然后还是Hystrix连上Turbine，可以认为建立了一个长链接，然后不断将metrics stream push到Turbine。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1564749183,"ip_address":"","comment_id":119943,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，你好：\n视频中当Turbine没有集成eureka时Hystrix应用配置Turbine地址，将数据实时发送给Turbine。此时应该是推的模式，当Turbine集成eureka后，由Turbine调用Hystrix应用，获得stream，这种我理解是拉的方式，那么在拉数据的过程中，总会有个间隔时间吧，比如每隔30秒拉一次，那么在这期间Hystrix应用会把数据临时缓存下来吗？这里缓存机制是怎么样的，老师能简单讲下吗。","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461141,"discussion_content":"可以理解为都是push方式，不管Hystrix应用配Turbine的地址，还是Turbine集成Eureka，这个时候不过是Hystrix从Eureka拿到Turbine的地址，然后还是Hystrix连上Turbine，可以认为建立了一个长链接，然后不断将metrics stream push到Turbine。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1564749183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1253652,"avatar":"https://static001.geekbang.org/account/avatar/00/13/21/14/423a821f.jpg","nickname":"Steven","note":"","ucode":"3FE64459842015","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":391891,"discussion_content":"这里怎么与视频中不一样呢？\n-如果实例少，Turbine 中直接静态配置 Hystrix 地址，建立长连接。\n-如果实例多，Hystrix 注册到 Eureka，Turbine 从 Eureka 拿到 Hystrix 地址，建立长连接。\n不是这样的吗","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1630676853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":82350,"user_name":"DZ","can_delete":false,"product_type":"c3","uid":1047376,"ip_address":"","ucode":"58BF0042E31449","user_header":"https://static001.geekbang.org/account/avatar/00/0f/fb/50/04071be6.jpg","comment_is_top":false,"comment_ctime":1554189657,"is_pvip":true,"replies":[{"id":29826,"content":"hystrix dashboard主要用于实时监控，如果要配合历史监控，可将hystrix metrics再消费到后台时序数据库(如Promethues&#47;InfluxDB等)，你可以看hystrix文档，它提供相应的数据导出接口，具体要看企业监控体系，但实现并不复杂。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1554208141,"ip_address":"","comment_id":82350,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"波波老师，请教下，hystrix dashboard只能展示小区间内的实时数据，不涉及历史数据，那么其在生产环境的监控体系中如何定位？如何同自动化监控运维相结合？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445561,"discussion_content":"hystrix dashboard主要用于实时监控，如果要配合历史监控，可将hystrix metrics再消费到后台时序数据库(如Promethues/InfluxDB等)，你可以看hystrix文档，它提供相应的数据导出接口，具体要看企业监控体系，但实现并不复杂。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1554208141,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":52445,"user_name":"王盛武","can_delete":false,"product_type":"c3","uid":1182516,"ip_address":"","ucode":"DE7EF246D3DCE8","user_header":"https://static001.geekbang.org/account/avatar/00/12/0b/34/f41d73a4.jpg","comment_is_top":false,"comment_ctime":1545383596,"is_pvip":false,"replies":[{"id":19111,"content":"turbine是有状态的（视频中解释可能有口误），一般只需1台，如果hystrix实例太多，1台管不过来，就要sharding，这个时候就需定制sharding路由机制和策略。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1545399124,"ip_address":"","comment_id":52445,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"2台turbine，如果通过eureka；  如果有4个hystrix实例；\n如果划分1台turbine指定其中的2个hystrix实例？","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":433879,"discussion_content":"turbine是有状态的（视频中解释可能有口误），一般只需1台，如果hystrix实例太多，1台管不过来，就要sharding，这个时候就需定制sharding路由机制和策略。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545399124,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}