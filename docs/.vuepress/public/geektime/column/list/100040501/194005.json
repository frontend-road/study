{"id":194005,"title":"28 | Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ?","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>ä»è¿™ä¸€è®²å¼€å§‹ï¼Œæˆ‘ä»¬è¿›å…¥äº†æœªæ¥ç¯‡ï¼Œå±•æœ›ä¸€ä¸‹å³å°†åœ¨ C++20 å‡ºç°çš„æ–°åŠŸèƒ½ã€‚æˆ‘ä»¬ç¬¬ä¸€ä¸ªè¦è®¨è®ºçš„ï¼Œæ˜¯ conceptsï¼ˆæ¦‚å¿µï¼‰â€”â€”ä¸€ä¸ªéš¾äº§äº†å¾ˆå¤šå¹´æ‰ç»ˆäºè¿›å…¥ C++ çš„æ–°åŠŸèƒ½ã€‚</p><h2>ä¸€ä¸ªå°ä¾‹å­</h2><p>è€è§„çŸ©ï¼Œè¦è®²â€œæ¦‚å¿µâ€ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¾‹å­ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ C++ é‡Œæœ‰é‡è½½ï¼Œå¯ä»¥æ ¹æ®å‚æ•°çš„ç±»å‹æ¥é€‰æ‹©åˆé€‚çš„å‡½æ•°ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ <code>half</code> å¯¹äº <code>int</code> å’Œ <code>string</code> æœ‰ä¸åŒçš„ä½œç”¨ï¼š</p><pre><code class=\"language-c++\">int half(int n)\n{\n  return n / 2;\n}\n\nstring half(string s)\n{\n  s.resize(s.size() / 2);\n  return s;\n}\n</code></pre><p>åˆçœ‹ï¼Œä¼¼ä¹é‡è½½å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†ç»†æƒ³ï¼Œä¸å¯¹å•Šï¼šé™¤äº† <code>int</code>ï¼Œæˆ‘ä»¬è¿˜æœ‰å·®ä¸å¤šçš„ <code>short</code>ã€<code>long</code> ç­‰ç±»å‹ï¼Œç”šè‡³è¿˜æœ‰ <code>boost::multiprecision::cpp_int</code>ï¼›é™¤äº† <code>string</code>ï¼Œæˆ‘ä»¬ä¹Ÿè¿˜æœ‰ <code>wstring</code>ã€<code>u16string</code>ã€<code>u32string</code> ç­‰ç­‰ã€‚ä¸Šé¢çš„æ¯ä¸ªå‡½æ•°ï¼Œå®é™…ä¸Šéƒ½é€‚ç”¨äºä¸€æ—ç±»å‹ï¼Œè€Œä¸æ˜¯å•ä¸ªç±»å‹ã€‚é‡è½½åœ¨è¿™æ–¹é¢å¹¶å¸®ä¸äº†ä»€ä¹ˆå¿™ã€‚</p><p>ä¹Ÿè®¸ä½ ç°åœ¨å·²ç»ååº”è¿‡æ¥äº†ï¼Œæˆ‘ä»¬æœ‰ SFINAE å•Šï¼å›ç­”éƒ¨åˆ†æ­£ç¡®ã€‚å¯æ˜¯ï¼Œä½ å‘Šè¯‰æˆ‘ä½ æœ‰æ²¡æœ‰æƒ³åˆ°ä¸€ç§å¾ˆç®€å•çš„æ–¹å¼èƒ½è®© SFINAE å¯¹æ•´æ•°ç±»å‹å¯ä»¥å·¥ä½œï¼ŸType traitsï¼Ÿå—¯å—¯ï¼Œæ€»æ˜¯å¯ä»¥è§£å†³çš„æ˜¯å§ï¼Œä½†è¿™ä¼šä¸ä¼šæ˜¯ä¸€æ¡æŠŠåˆå­¦è€…åŠé€€çš„é“è·¯å‘¢ï¼Ÿâ€¦â€¦</p><!-- [[[read_end]]] --><p>C++ çš„æ¦‚å¿µå°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åªéœ€è¦äº‹å…ˆå®šä¹‰äº† <code>Integer</code> å’Œ <code>String</code> çš„æ¦‚å¿µï¼ˆå¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¦‚å¿µæˆ‘ä»¬åé¢ä¼šè¯´ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p><pre><code class=\"language-c++\">template &lt;Integer N&gt;\nN half(N n)\n{\n  return n / 2;\n}\n\ntemplate &lt;String S&gt;\nS half(S s)\n{\n  s.resize(s.size() / 2);\n  return s;\n}\n</code></pre><p>æˆ‘ä»¬åº”å½“äº†è§£ä¸€ä¸‹ï¼Œä»æ¦‚å¿µä¸Šè®²ï¼Œä¸Šé¢è¿™ç§å½¢å¼çš„å«ä¹‰å’Œä¸‹é¢çš„ä»£ç å®è´¨ç›¸åŒï¼ˆä»¥ä¸Šé¢çš„ç¬¬ä¸€ä¸ªå‡½æ•°ä¸ºä¾‹ï¼‰ï¼š</p><pre><code class=\"language-c++\">template &lt;typename N&gt;\n  requires Integer&lt;N&gt;\nN half(N n)\n{\n  return n / 2;\n}\n</code></pre><p>å³ï¼Œè¿™ä¸ª <code>half</code> æ˜¯ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œæœ‰ä¸€ä¸ªæ¨¡æ¿å‚æ•°ï¼Œå¯ç”¨è¿™ä¸ªæ¨¡æ¿çš„å‰ææ¡ä»¶æ˜¯è¿™ä¸ªå‚æ•°æ»¡è¶³ <code>Integer</code> è¿™ä¸ªçº¦æŸã€‚</p><h2>Concepts ç®€å²</h2><p>2019 å¹´ 11 æœˆï¼Œä¸Šæµ·ï¼Œå½“åœ¨ C++ å³°ä¼šä¸Šè¢«é—®èµ·ä»–æœ€å–œæ¬¢çš„ C++ ç‰¹æ€§æœ‰å“ªäº›æ—¶ï¼ŒBjarne çš„å›ç­”é‡Œå°±æœ‰ conceptsã€‚è¿™ä¸æ¯«ä¸è®©æˆ‘æ„Ÿåˆ°æƒŠè®¶ã€‚è™½ç„¶ C++ çš„â€œæ¦‚å¿µâ€çœ‹èµ·æ¥æ˜¯ä¸ªæŒºç®€å•çš„æ¦‚å¿µï¼Œä½†å®ƒçš„å†å²å¹¶ä¸çŸ­â€”â€”Bjarne æƒ³æŠŠå®ƒåŠ å…¥ C++ å·²ç»æœ‰å¥½å¤šå¹´äº† <span class=\"orange\">[1]</span>ã€‚</p><p>ä»åŸºæœ¬æ¦‚å¿µä¸Šæ¥è®²ï¼Œâ€œæ¦‚å¿µâ€å°±æ˜¯ä¸€ç»„å¯¹æ¨¡æ¿å‚æ•°çš„çº¦æŸæ¡ä»¶ã€‚æˆ‘ä»¬è®¨è®ºè¿‡æ¨¡æ¿å°±æ˜¯ C++ é‡Œçš„é¸­å­ç±»å‹ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰æè¿‡ï¼ŒBjarne å¯¹æ¨¡æ¿çš„æ¥å£å®é™…ä¸Šæ˜¯ç›¸å½“ä¸æ»¡æ„çš„ï¼šä»–è‡ªå·±çš„ç”¨è¯ç›´æ¥å°±æ˜¯ lousyï¼Œå¹¶è®¤ä¸ºè¿™ä¸€ç³Ÿç³•çš„æ¥å£è®¾è®¡æ˜¯åé¢å¯¼è‡´äº†ææ€–çš„æ¨¡æ¿ç¼–è¯‘é”™è¯¯ä¿¡æ¯çš„æ ¹æºã€‚</p><p>ä»å¦ä¸€æ–¹é¢è®²ï¼ŒAlex Stepanov è®¾è®¡çš„ STL ä¸€å¼€å§‹å°±åŒ…å«äº†â€œæ¦‚å¿µâ€çš„æ¦‚å¿µï¼Œå¦‚æˆ‘ä»¬åœ¨<a href=\"https://time.geekbang.org/column/article/176842\">[ç¬¬ 7 è®²]</a> ä¸­æåˆ°çš„å„ç§ä¸åŒç±»å‹çš„è¿­ä»£å™¨ï¼š</p><ul>\n<li>Output Iterator</li>\n<li>Input Iterator</li>\n<li>Forward Iterator</li>\n<li>Bidirectional Iterator</li>\n<li>Random Access Iterator</li>\n<li>â€¦</li>\n</ul><p>è¿™äº›æ¦‚å¿µå‡ºç°åœ¨äº† STL çš„æ–‡æ¡£ä¸­ï¼Œæœ‰è¯¦ç»†çš„å®šä¹‰ï¼›ä½†å®ƒä»¬åªæ˜¯è½åœ¨çº¸é¢ä¸Šï¼Œè€Œæ²¡æœ‰åœ¨ C++ è¯­è¨€ä¸­æœ‰çœŸæ­£çš„ä½“ç°ã€‚åæ¥ï¼Œä»–è¿˜è¿›ä¸€æ­¥æŠŠå¾ˆå¤šæ¦‚å¿µçš„å½¢å¼æè¿°å†™è¿›äº†ä»–äº 2009 å¹´ï¼ˆå’Œ Paul McJones ä¸€èµ·ï¼‰å‡ºç‰ˆçš„â€œç¥ä½œâ€ <em>Elements of Programming</em> <span class=\"orange\">[2]</span> ä¸­ï¼Œå¹¶ç»™å‡ºäº†å‡æƒ³çš„å®ç°ä»£ç â€”â€”å…¶ä¸­å°±æœ‰å…³é”®å­— <code>requires</code>â€”â€”å³ä½¿é‚£æ—¶æ²¡æœ‰ä»»ä½•ç¼–è¯‘å™¨èƒ½å¤Ÿç¼–è¯‘è¿™æ ·çš„ä»£ç ã€‚</p><p>åœ¨ C++ ç¬¬ä¸€æ¬¡æ ‡å‡†åŒ–ï¼ˆ1998ï¼‰ä¹‹åï¼ŒBjarne å¤šæ¬¡è¯•å›¾æŠŠâ€œæ¦‚å¿µâ€å¼•å…¥ C++ï¼ˆæ ¹æ®æˆ‘çœ‹åˆ°çš„æ–‡çŒ®ï¼Œä»–åœ¨ 03 åˆ° 09 å¹´ç›´æ¥æœ‰è‡³å°‘ä¹ç¯‡å•ç‹¬æˆ–åˆè‘—çš„è®ºæ–‡è·Ÿâ€œæ¦‚å¿µâ€æœ‰å…³ï¼‰ï¼Œä½†ä¸€ç›´æ²¡æœ‰æˆåŠŸâ€”â€”é­”é¬¼åœ¨ç»†èŠ‚ï¼Œä¸€æ—¦è¿›å…¥ç»†èŠ‚ï¼Œäººä»¬å¯¹ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆç¾çš„ç‚¹å­çš„åˆ†æ­§å°±éå¸¸å¤§äº†ã€‚ä¸€ç›´åˆ° C++11 æ ‡å‡†åŒ–ï¼Œâ€œæ¦‚å¿µâ€ è¿˜æ˜¯å› ä¸ºè‰æ¡ˆå¤æ‚ã€äº‰è®®å¤šã€æ— æˆç†Ÿå®ç°è€Œæ²¡æœ‰è¿›å…¥ C++ æ ‡å‡†ã€‚</p><p>ç›®å‰ C++20 é‡Œçš„â€œæ¦‚å¿µâ€çš„åŸºç¡€æ˜¯ 2009 å¹´é‡æ–°å¯åŠ¨çš„ Concepts Liteï¼Œå¹¶åœ¨ 2015 å¹´å‡ºç‰ˆæˆä¸ºæŠ€æœ¯è§„æ ¼ä¹¦ Concepts TSï¼ˆæ­£å¼çš„ TS æ–‡æ¡£éœ€è¦èŠ±é’±è´­ä¹°ï¼Œæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥äº†è§£å¯ä»¥æŸ¥çœ‹æ­£å¼å‡ºç‰ˆå‰çš„è‰æ¡ˆ <span class=\"orange\">[3]</span>ï¼‰ã€‚å¾ˆå¤šäººå‚ä¸äº†ç›¸å…³å·¥ä½œï¼Œå…¶ä¸­å°±åŒ…æ‹¬äº† Andrew Suttonã€Bjarne Stroustrup å’Œ Alex Stepanovã€‚è¿™å›ï¼Œå®ç°ç®€åŒ–äº†ï¼Œæœ‰äº†ä¸€ä¸ªå®ç°ï¼ˆGCCï¼‰ï¼Œäº‰è®®ä¹Ÿå°‘å¤šäº†ã€‚ç„¶è€Œï¼Œâ€œæ¦‚å¿µâ€è¿˜æ˜¯æ²¡æœ‰è¿›å…¥ C++17ï¼Œä¸»è¦ç”±äºä¸‹é¢è¿™äº›åŸå› ï¼š</p><ul>\n<li>ä» Concepts TS å‡ºç‰ˆåˆ°æ ‡å‡†å®šç¨¿åªæœ‰ä¸åˆ°å››ä¸ªâ½‰çš„æ—¶é—´ï¼ˆC++20 çš„å†…å®¹ä¹ŸåŒæ ·æ˜¯åœ¨ 2019 å¹´å°±å…¨éƒ¨å†»ç»“äº†ï¼Œåˆ°æ­£å¼å‡ºç‰ˆå‰çš„æ—¶é—´ç•™ä¸ªä¿®æ­£å°é—®é¢˜å’Œèµ°æ‰¹å‡†æµç¨‹ï¼‰</li>\n<li>â€œæ¦‚å¿µâ€åªæœ‰ä¸€ä¸ªå®ç°ï¼ˆGCCï¼‰</li>\n<li>Concepts TS è§„æ ¼ä¹¦çš„ä½œè€…å’Œ GCC ä¸­çš„æ¦‚å¿µå®ç°è€…æ˜¯åŒâ¼€ä¸ªâ¼ˆï¼Œæ²¡æœ‰â¼ˆç‹¬â½´åœ°ä»è§„æ ¼ä¹¦å‡ºå‘å®ç°æ¦‚å¿µ</li>\n<li>Concepts TS â¾¥æ²¡æœ‰å®é™…å®šä¹‰æ¦‚å¿µï¼Œæ ‡å‡†åº“ä¹Ÿæ²¡æœ‰æŠŠæ¦‚å¿µç”¨èµ·æ¥</li>\n</ul><p>å½“ç„¶ï¼Œå¤§å®¶è¿˜æ˜¯è®¤å¯â€œæ¦‚å¿µâ€æ˜¯ä¸ªå¥½åŠŸèƒ½ï¼Œåˆ°äº† 2017 å¹´ 7 æœˆï¼Œâ€œæ¦‚å¿µâ€å°±æ­£å¼å¹¶å…¥ C++20 è‰æ¡ˆäº†ã€‚ä¹‹åï¼Œå°ä¿®è®¢è¿˜æ˜¯ä¸å°‘çš„ï¼ˆæ‰€ä»¥â€œæ¦‚å¿µâ€æ²¡æœ‰è¿›å…¥ C++20 ä¹Ÿä¸å®Œå…¨æ˜¯ä»¶åäº‹ï¼‰ã€‚ä»ç”¨æˆ·çš„è§’åº¦ï¼Œæœ€å¤§çš„ä¸€ä¸ªæ”¹å˜æ˜¯â€œæ¦‚å¿µâ€çš„åå­—ï¼šç›®å‰ï¼Œæ‰€æœ‰æ ‡å‡†â€œæ¦‚å¿µâ€ä»å…¨éƒ¨ç”±å¤§å†™å­—æ¯æ‰“å¤´æ”¹æˆäº†â€œæ ‡å‡†å¤§å°å†™â€â€”â€”å³å…¨éƒ¨å°å†™å­—æ¯åŠ ä¸‹åˆ’çº¿ <span class=\"orange\">[4]</span>ã€‚æ¯”å¦‚ï¼Œå…è®¸ç›¸ç­‰æ¯”è¾ƒè¿™ä¸ªæ¦‚å¿µï¼ŒåŸå…ˆå†™ä½œ <code>EqualityComparable</code>ï¼Œç°åœ¨è¦å†™æˆ <code>equality_comparable</code>ã€‚</p><h2>åŸºæœ¬çš„ Concepts</h2><p>ä¸‹å›¾ä¸­ç»™å‡ºäº† C++ é‡Œå¯¹è±¡ç›¸å…³çš„éƒ¨åˆ†æ ‡å‡†æ¦‚å¿µï¼ˆä¸å®Œæ•´ï¼‰ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/fc/21/fc99fa3b010ab1e84741eea004933f21.png?wh=1084*828\" alt=\"\"></p><p>æˆ‘ä»¬ä»ä¸‹å¾€ä¸Šå¿«é€Ÿçœ‹ä¸€ä¸‹ï¼š</p><ul>\n<li><code>move_constructible</code>ï¼šå¯ç§»åŠ¨æ„é€ </li>\n<li><code>swappable</code>ï¼šå¯äº¤æ¢</li>\n<li><code>movable</code>ï¼šå¯ç§»åŠ¨æ„é€ ã€å¯äº¤æ¢ï¼Œåˆåœ¨ä¸€èµ·å°±æ˜¯å¯ç§»åŠ¨äº†</li>\n<li><code>copy_constructible</code>ï¼šå¯æ‹·è´æ„é€ </li>\n<li><code>copyable</code>ï¼šå¯æ‹·è´æ„é€ ã€å¯ç§»åŠ¨ï¼Œåˆåœ¨ä¸€èµ·å°±æ˜¯å¯å¤åˆ¶äº†ï¼ˆæ³¨ï¼šè¿™å„¿â€œæ‹·è´â€å’Œâ€œå¤åˆ¶â€åªæ˜¯æˆ‘åœ¨ç¿»è¯‘ä¸­åšçš„ä¸€ç‚¹å°åŒºåˆ†ï¼Œè‹±æ–‡ä¸­æ²¡æœ‰åŒºåˆ«ï¼‰</li>\n<li><code>default_initializable</code>ï¼šå¯é»˜è®¤åˆå§‹åŒ–ï¼ˆåå­—ä¸å« <code>default_constructible</code> æ˜¯å› ä¸ºç›®å‰çš„ type traits ä¸­æœ‰ <code>is_default_constructible</code>ï¼Œä¸”æ„ä¹‰å’Œ <code>default_initializable</code> æœ‰ç‚¹å¾®å¦™çš„åŒºåˆ«ï¼›è¯¦è§<a href=\"https://timsong-cpp.github.io/lwg-issues/3338\">é—®é¢˜æŠ¥å‘Š 3338</a>ï¼‰</li>\n<li><code>semiregular</code>ï¼šå¯å¤åˆ¶ã€å¯é»˜è®¤åˆå§‹åŒ–ï¼Œåˆåœ¨ä¸€èµ·å°±æ˜¯åŠæ­£åˆ™äº†</li>\n<li><code>equality_comparable</code>ï¼šå¯ç›¸ç­‰æ¯”è¾ƒï¼Œå³å¯¹è±¡ä¹‹é—´å¯ä»¥ä½¿ç”¨ <code>==</code> è¿ç®—ç¬¦</li>\n<li><code>regular</code>ï¼šåŠæ­£åˆ™ã€å¯ç›¸ç­‰æ¯”è¾ƒï¼Œåˆåœ¨ä¸€èµ·å°±æ˜¯æ­£åˆ™äº†</li>\n</ul><p>è¿™äº›â€œæ¦‚å¿µâ€ç°åœ¨ä¸åªæ˜¯æ–‡å­—æè¿°ï¼Œç»å¤§éƒ¨åˆ†æ˜¯å¯ä»¥çœŸæ­£åœ¨ä»£ç ä¸­å®šä¹‰çš„ã€‚ç°åœ¨ï¼Œå‡†æ ‡å‡†çš„å®šä¹‰å·²ç»å¯ä»¥åœ¨ cppreference.com ä¸Šæ‰¾åˆ° <span class=\"orange\">[5]</span>ã€‚ä»å®é™…çš„è§’åº¦ï¼Œä¸‹é¢æˆ‘ä»¬åˆ—ä¸¾éƒ¨åˆ†æ¦‚å¿µåœ¨ CMCSTL2 <span class=\"orange\">[6]</span>â€”â€”ä¸€ä¸ª Rangesï¼ˆæˆ‘ä»¬ä¸‹ä¸€è®²è®¨è®ºï¼‰çš„å‚è€ƒå®ç°â€”â€”ä¸­çš„å®šä¹‰ã€‚</p><p>ä»ç®€å•æ€§çš„è§’åº¦ï¼Œæˆ‘ä»¬è‡ªä¸Šå¾€ä¸‹çœ‹ï¼Œé¦–å…ˆæ˜¯ <code>regular</code>ï¼š</p><pre><code class=\"language-c++\">template &lt;class T&gt;\nconcept regular =\n  semiregular&lt;T&gt; &amp;&amp;\n  equality_comparable&lt;T&gt;;\n</code></pre><p>å¾ˆç®€å•å§ï¼Œå®šä¹‰ä¸€ä¸ª concept æ­¤å¤„åªæ˜¯ä¸€äº›é’ˆå¯¹ç±»å‹çš„æ¡ä»¶è€Œå·²ã€‚å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªæ¦‚å¿µæµ‹è¯•è¡¨è¾¾å¼ï¼ˆå¦‚ <code>semiregular&lt;T&gt;</code>ï¼‰çš„ç»“æœæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆç¼–è¯‘æœŸå¸¸é‡ï¼‰ã€‚</p><p>ç„¶åæ˜¯ <code>semiregular</code>ï¼š</p><pre><code class=\"language-c++\">template &lt;class T&gt;\nconcept semiregular =\n  copyable&lt;T&gt; &amp;&amp;\n  default_initializable&lt;T&gt;;\n</code></pre><p>å†çœ‹ä¸€çœ¼ <code>equality_comparable</code>ï¼š</p><pre><code class=\"language-c++\">template &lt;class T, class U&gt;\nconcept WeaklyEqualityComparable =\n  requires(\n      const remove_reference_t&lt;T&gt;&amp; t,\n      const remove_reference_t&lt;U&gt;&amp; u) {\n    { t == u } -&gt; boolean;\n    { t != u } -&gt; boolean;\n    { u == t } -&gt; boolean;\n    { u != t } -&gt; boolean;\n  };\n\ntemplate &lt;class T&gt;\nconcept equality_comparable =\n  WeaklyEqualityComparable&lt;T, T&gt;;\n</code></pre><p>è¿™ä¸ªç¨å¤æ‚ç‚¹ï¼Œç”¨åˆ°äº† <code>requires</code> <span class=\"orange\">[7]</span>ï¼Œä½†ä¸éœ€è¦æˆ‘è®²è§£ï¼Œä½ ä¹Ÿèƒ½çœ‹å‡ºæ¥ <code>equality_comparable</code> çš„è¦æ±‚å°±æ˜¯ç±»å‹çš„å¸¸å·¦å€¼å¼•ç”¨ä¹‹é—´å…è®¸è¿›è¡Œ <code>==</code> å’Œ <code>!=</code> çš„æ¯”è¾ƒï¼Œä¸”è¿”å›ç±»å‹ä¸ºå¸ƒå°”ç±»å‹å§ã€‚</p><p>æ³¨æ„ä¸Šé¢çš„å®šä¹‰é‡Œå†™çš„æ˜¯ <code>boolean</code> è€Œä¸æ˜¯ <code>bool</code>ã€‚è¿™ä¸ªæ¦‚å¿µå®šä¹‰ä¸è¦æ±‚æ¯”è¾ƒè¿ç®—ç¬¦çš„ç»“æœç±»å‹æ˜¯ <code>bool</code>ï¼Œè€Œæ˜¯å¯ä»¥ç”¨åœ¨éœ€è¦å¸ƒå°”å€¼çš„ä¸Šä¸‹æ–‡ä¸­ã€‚è‡ªç„¶ï¼Œ<code>boolean</code> ä¹Ÿæ˜¯æœ‰å®šä¹‰çš„ï¼Œä½†è¿™ä¸ªå®šä¹‰å¯èƒ½æ¯”ä½ æƒ³è±¡çš„å¤æ‚ï¼Œæˆ‘è¿™å„¿å°±ä¸å†™å‡ºæ¥äº†ğŸ˜œã€‚</p><p>æˆ‘ä»¬ä¹‹å‰å·²ç»è®²è¿‡äº†å„ç§è¿­ä»£å™¨ï¼Œæ¯ä¸ªè¿­ä»£å™¨ä¹Ÿè‡ªç„¶åœ°æ»¡è¶³ä¸€ä¸ªâ€œæ¦‚å¿µâ€â€”â€”æ¦‚å¿µåç§°åŸºæœ¬ä¸Šå°±æ˜¯ä¹‹å‰ç»™çš„ï¼Œåªæ˜¯å¤§å°å†™è¦å˜åŒ–ä¸€ä¸‹è€Œå·²ã€‚æœ€åº•ä¸‹çš„ <code>iterator</code> æ˜¯ä¸ªä¾‹å¤–ï¼šå› ä¸ºè¿™ä¸ªåå­—åœ¨æ ‡å‡†é‡Œå·²ç»è¢«å ç”¨å•¦ã€‚æ‰€ä»¥ç°åœ¨å®ƒçš„åå­—æ˜¯ <code>input_or_output_iterator</code>ã€‚</p><p>è¿­ä»£å™¨æœ¬èº«éœ€è¦æ»¡è¶³å“ªäº›æ¦‚å¿µå‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/6a/0c/6ade3581f8f2da22c92987e81974210c.png?wh=1142*512\" alt=\"\"></p><p>æ³¨æ„è¿™å¼ è·Ÿä¸Šé¢é‚£å¼ å›¾ä¸ä¸€æ ·ï¼Œæ¦‚å¿µä¹‹é—´ä¸æ˜¯ç®€å•çš„â€œåˆå–â€å…³ç³»ï¼Œè€Œæ˜¯ä¸€ç§â€œç»§æ‰¿â€å…³ç³»ï¼šä¸Šé¢çš„æ¦‚å¿µæ¯”å®ƒæŒ‡å‘çš„ä¸‹é¢çš„æ¦‚å¿µæœ‰æ›´å¤šçš„è¦æ±‚ã€‚å…·ä½“åˆ°ä»£ç ï¼š</p><pre><code class=\"language-c++\">template &lt;class I&gt;\nconcept weakly_incrementable =\n  semiregular&lt;I&gt; &amp;&amp; requires(I i) {\n    typename iter_difference_t&lt;I&gt;;\n    requires signed_integral&lt;\n      iter_difference_t&lt;I&gt;&gt;;\n    { ++i } -&gt; same_as&lt;I&amp;&gt;;\n    i++;\n  };\n</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>weakly_incrementable</code> æ˜¯ <code>semiregular</code> å†åŠ ä¸€äº›é¢å¤–çš„è¦æ±‚ï¼š</p><ul>\n<li><code>iter_difference_t&lt;I&gt;</code> æ˜¯ä¸€ä¸ªç±»å‹</li>\n<li><code>iter_difference_t&lt;I&gt;</code> æ˜¯ä¸€ä¸ªæœ‰ç¬¦å·çš„æ•´æ•°ç±»å‹</li>\n<li><code>++i</code> çš„ç»“æœè·Ÿ <code>I&amp;</code> æ˜¯å®Œå…¨ç›¸åŒçš„ç±»å‹</li>\n<li>èƒ½å¤Ÿæ‰§è¡Œ <code>i++</code> æ“ä½œï¼ˆä¸æ£€æŸ¥ç»“æœçš„ç±»å‹ï¼‰</li>\n</ul><p><code>input_or_output_iterator</code> ä¹Ÿå¾ˆç®€å•ï¼š</p><pre><code class=\"language-c++\">template &lt;class I&gt;\nconcept input_or_output_iterator =\n  __dereferenceable&lt;I&amp;&gt; &amp;&amp;\n  weakly_incrementable&lt;I&gt;;\n</code></pre><p>å°±æ˜¯è¦æ±‚å¯ä»¥è§£å¼•ç”¨ã€å¯ä»¥æ‰§è¡Œ <code>++</code>ã€å¯ä»¥ä½¿ç”¨ <code>iter_difference_t</code> æå–è¿­ä»£å™¨çš„ <code>difference_type</code> è€Œå·²ã€‚</p><p>å‰©ä¸‹çš„æ¦‚å¿µçš„å®šä¹‰ä¹Ÿä¸å¤æ‚ï¼Œæˆ‘è¿™å„¿å°±ä¸ä¸€ä¸€è®²è§£äº†ã€‚æ„Ÿå…´è¶£çš„è¯ä½ å¯ä»¥è‡ªå·±å»çœ‹ CMCSTL2 çš„æºä»£ç ã€‚</p><h3>ç®€å•çš„æ¦‚å¿µæµ‹è¯•</h3><p>ä¸ºäº†è®©ä½ å†ç®€å•æ„Ÿå—ä¸€ä¸‹æ ‡å‡†çš„æ¦‚å¿µï¼Œæˆ‘å†™äº†ä¸‹é¢è¿™ä¸ªç®€å•çš„æµ‹è¯•ç¨‹åºï¼Œå±•ç¤ºä¸€äº›æ ‡å‡†æ¦‚å¿µçš„æµ‹è¯•ç»“æœï¼š</p><pre><code class=\"language-c++\">#include &lt;armadillo&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;type_traits&gt;\n\nusing namespace std;\n\n#if defined(__cpp_concepts)\n\n#if __cpp_concepts &lt; 201811\n\n#include &lt;experimental/ranges/concepts&gt;\nusing namespace experimental::ranges;\n\n#else\n\n#include &lt;concepts&gt;\n\n#endif\n\n#else // defined(__cpp_concepts)\n\n#error \"No support for concepts!\"\n\n#endif\n\n#define TEST_CONCEPT(Concept,      \\\n                     Type)         \\\n  cout &lt;&lt; #Concept &lt;&lt; '&lt;' &lt;&lt; #Type \\\n       &lt;&lt; \"&gt;: \"                    \\\n       &lt;&lt; Concept&lt;Type&gt; &lt;&lt; endl\n\n#define TEST_CONCEPT2(             \\\n  Concept, Type1, Type2)           \\\n  cout &lt;&lt; #Concept &lt;&lt; '&lt;'          \\\n       &lt;&lt; #Type1 &lt;&lt; \", \" &lt;&lt; #Type2 \\\n       &lt;&lt; \"&gt;: \"                    \\\n       &lt;&lt; Concept&lt;Type1,           \\\n                  Type2&gt; &lt;&lt; endl\n\nint main()\n{\n  cout &lt;&lt; boolalpha;\n  cout &lt;&lt; \"__cpp_concepts is \"\n       &lt;&lt; __cpp_concepts &lt;&lt; endl;\n  TEST_CONCEPT(regular, int);\n  TEST_CONCEPT(regular, char);\n  TEST_CONCEPT(integral, int);\n  TEST_CONCEPT(integral, char);\n  TEST_CONCEPT(readable, int);\n  TEST_CONCEPT(readable,\n               unique_ptr&lt;int&gt;);\n  TEST_CONCEPT2(\n    writable, unique_ptr&lt;int&gt;, int);\n  TEST_CONCEPT2(writable,\n                unique_ptr&lt;int&gt;,\n                double);\n  TEST_CONCEPT2(writable,\n                unique_ptr&lt;int&gt;,\n                int*);\n  TEST_CONCEPT(semiregular,\n               unique_ptr&lt;int&gt;);\n  TEST_CONCEPT(semiregular,\n               shared_ptr&lt;int&gt;);\n  TEST_CONCEPT(equality_comparable,\n               unique_ptr&lt;int&gt;);\n  TEST_CONCEPT(semiregular,\n               arma::imat);\n  TEST_CONCEPT2(assignable_from,\n                arma::imat&amp;,\n                arma::imat&amp;);\n  TEST_CONCEPT(semiregular,\n               arma::imat22);\n  TEST_CONCEPT2(assignable_from,\n                arma::imat22&amp;,\n                arma::imat22&amp;);\n}\n</code></pre><p>ä»£ç ç…§é¡¾äº†ä¸¤ç§å¯èƒ½çš„ç¯å¢ƒï¼š</p><ul>\n<li>æœ€æ–°çš„ MSVCï¼ˆéœ€è¦ä½¿ç”¨ <code>/std:c++latest</code>ï¼›æˆ‘ç”¨çš„æ˜¯ Visual Studio 2019 16.4.4ï¼‰</li>\n<li>GCCï¼ˆéœ€è¦ä½¿ç”¨ <code>-fconcepts</code>ï¼›æˆ‘æµ‹è¯•äº† 7ã€8ã€9 ä¸‰ä¸ªç‰ˆæœ¬éƒ½å¯ä»¥ï¼‰å’Œ CMCSTL2ï¼ˆéœ€è¦å°†å…¶ include ç›®å½•ç”¨ <code>-I</code> é€‰é¡¹åŠ åˆ°å‘½ä»¤è¡Œä¸Šï¼‰</li>\n</ul><p>ç¨‹åºåœ¨ MSVC ä¸‹çš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote>\n<p><code>__cpp_concepts is 201811</code><br>\n<code>regular&lt;int&gt;: true</code><br>\n<code>regular&lt;char&gt;: true</code><br>\n<code>integral&lt;int&gt;: true</code><br>\n<code>integral&lt;char&gt;: true</code><br>\n<code>readable&lt;int&gt;: false</code><br>\n<code>readable&lt;unique_ptr&lt;int&gt;&gt;: true</code><br>\n<code>writable&lt;unique_ptr&lt;int&gt;, int&gt;: true</code><br>\n<code>writable&lt;unique_ptr&lt;int&gt;, double&gt;: true</code><br>\n<code>writable&lt;unique_ptr&lt;int&gt;, int*&gt;: false</code><br>\n<code>semiregular&lt;unique_ptr&lt;int&gt;&gt;: false</code><br>\n<code>semiregular&lt;shared_ptr&lt;int&gt;&gt;: true</code><br>\n<code>equality_comparable&lt;unique_ptr&lt;int&gt;&gt;: true</code><br>\n<code>semiregular&lt;arma::imat&gt;: true</code><br>\n<code>assignable_from&lt;arma::imat&amp;, arma::imat&amp;&gt;: true</code><br>\n<code>semiregular&lt;arma::imat22&gt;: false</code><br>\n<code>assignable_from&lt;arma::imat22&amp;, arma::imat22&amp;&gt;: false</code></p>\n</blockquote><p>é™¤äº†ç¬¬ä¸€è¡Œ <code>__cpp_concepts</code> çš„è¾“å‡ºï¼ŒGCC çš„ç»“æœä¹Ÿæ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚å¤§éƒ¨åˆ†çš„ç»“æœåº”å½“æ²¡æœ‰æ„å¤–ï¼Œä½†ä¹Ÿéœ€è¦æ³¨æ„ï¼ŒæŸäº›ç”¨èµ·æ¥æ²¡é—®é¢˜çš„ç±»ï¼ˆå¦‚ <code>arma::imat22</code>ï¼‰ï¼Œå´å› ä¸ºä¸€äº›å®ç°ä¸Šçš„ç‰¹æ®ŠæŠ€æœ¯ï¼Œä¸èƒ½æ»¡è¶³ <code>semiregular</code>ã€‚â€”â€”æ¦‚å¿µè¦æ¯”é¸­å­ç±»å‹æ›´ä¸ºä¸¥æ ¼ã€‚</p><h2>æ¦‚å¿µã€å‡ºé”™ä¿¡æ¯å’Œ SFINAE</h2><p>æ˜¾ç„¶ï¼Œå¯¹äºä¸Šé¢å‡ºç°çš„è¿™ä¸ªä¾‹å­ï¼š</p><pre><code class=\"language-c++\">template &lt;Integer N&gt;\nN half(N n)\n{\n  return n / 2;\n}\n</code></pre><p>æˆ‘ä»¬ç”¨ <code>enable_if</code> ä¹Ÿæ˜¯èƒ½å†™å‡ºæ¥çš„ï¼š</p><pre><code class=\"language-c++\">template &lt;typename N&gt;\nenable_if_t&lt;Integer&lt;N&gt;, N&gt;\nhalf(N n)\n{\n  return n / 2;\n}\n</code></pre><p>ä¸è¿‡ï¼Œä½ ä¸ä¼šè§‰å¾—è¿™ç§æ–¹å¼æ›´å¥½å§ï¼Ÿè€Œä¸”ï¼Œå¯¹äºæ²¡æœ‰è¿”å›å€¼çš„æƒ…å†µï¼Œè¦ç”¨å¯¹ <code>enable_if</code> è¿˜æ˜¯éå¸¸éº»çƒ¦çš„ï¼ˆå‚è§ <span class=\"orange\">[8]</span> é‡Œçš„ Notes /æ³¨è§£éƒ¨åˆ†ï¼‰ã€‚</p><p>æ›´é‡è¦çš„æ˜¯ï¼Œâ€œæ¦‚å¿µâ€å¯ä»¥æä¾›æ›´ä¸ºå‹å¥½å¯è¯»çš„ä»£ç ï¼Œä»¥åŠæ½œåœ¨æ›´ä¸ºå‹å¥½çš„å‡ºé”™ä¿¡æ¯ã€‚æ‹¿ Andrew Sutton çš„ä¸€ä¸ªä¾‹å­ <span class=\"orange\">[9]</span>ï¼ˆæ ¹æ®æˆ‘ä»¬ä¸ŠèŠ‚è¯´çš„ç¼–è¯‘ç¯å¢ƒåšäº†æ”¹ç¼–ï¼‰ï¼š</p><pre><code class=\"language-c++\">#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n#if defined(__cpp_concepts)\n\n#if __cpp_concepts &lt; 201811\n\n#include &lt;experimental/ranges/concepts&gt;\nusing namespace experimental::ranges;\n\n#else\n\n#include &lt;concepts&gt;\n#include &lt;ranges&gt;\nusing namespace ranges;\n\n#endif\n\n#define REQUIRES(x) requires x\n\n#else // defined(__cpp_concepts)\n\n#define REQUIRES(x)\n\n#endif\n\ntemplate &lt;typename R, typename T&gt;\n  REQUIRES(\n    (range&lt;R&gt; &amp;&amp;\n     equality_comparable_with&lt;\n       T, typename R::value_type&gt;))\nbool in(R const&amp; r, T const&amp; value)\n{\n  for (auto const&amp; x : r)\n    if (x == value)\n      return true;\n  return false;\n}\n\nint main()\n{\n  vector&lt;string&gt; v{\"Hello\",\n                   \"World\"};\n  in(v, \"Hello\");\n  in(v, 0);\n}\n</code></pre><p>ä»¥ GCC 8 ä¸ºä¾‹ï¼Œå¦‚æœä¸ä½¿ç”¨æ¦‚å¿µçº¦æŸï¼Œ<code>in(v, 0)</code> è¿™è¡Œä¼šäº§ç”Ÿ 166 è¡Œå‡ºé”™ä¿¡æ¯ï¼›è€Œå¯ç”¨äº†æ¦‚å¿µçº¦æŸåï¼Œå‡ºé”™ä¿¡æ¯ç¼©å‡åˆ°äº† 8 è¡Œã€‚MSVC ä¸Šå¯¹äºè¿™ä¸ªä¾‹å­ä¸ä½¿ç”¨æ¦‚å¿µé”™è¯¯ä¿¡æ¯ä¹Ÿè¾ƒçŸ­ï¼Œä½†å¯ç”¨äº†æ¦‚å¿µåä»ç„¶èƒ½äº§ç”Ÿæ›´çŸ­ã€æ›´æ˜ç¡®çš„å‡ºé”™ä¿¡æ¯ï¼š</p><blockquote>\n<p><code>test.cpp(47): error C2672: 'in': no matching overloaded function found</code><br>\n<code>test.cpp(47): error C7602: 'in': the associated constraints are not satisfied</code><br>\n<code>test.cpp(34): note: see declaration of 'in'</code></p>\n</blockquote><p>éšç€ç¼–è¯‘å™¨çš„æ”¹è¿›ï¼Œæ¦‚å¿µåœ¨å‡ºé”™ä¿¡æ¯ä¸Šçš„ä¼˜åŠ¿åœ¨æ¶ˆå‡ï¼Œä½†åœ¨ä»£ç è¡¨è¾¾ä¸Šçš„ä¼˜åŠ¿ä»ç„¶æ˜¯å®å®åœ¨åœ¨çš„ã€‚è®°å¾—<a href=\"https://time.geekbang.org/column/article/181636\">[ç¬¬ 14 è®²]</a> é‡Œæˆ‘ä»¬è´¹äº†å¥½å¤§çš„åŠ²ã€ç”¨äº†å‡ ç§ä¸åŒçš„æ–¹æ³•æ¥å®šä¹‰ <code>has_reserve</code> å—ï¼Ÿåœ¨æ¦‚å¿µé¢å‰ï¼Œé‚£äº›å°±æˆäº†â€œå›â€å­—æœ‰å‡ ç§å†™æ³•äº†ã€‚æˆ‘ä»¬å¯ä»¥é£å¿«åœ°å®šä¹‰ä¸‹é¢çš„æ¦‚å¿µï¼š</p><pre><code class=\"language-c++\">template &lt;typename T&gt;\nconcept has_reserve =\n  requires(T&amp; dest) {\n    dest.reserve(1U);\n  };\n</code></pre><p>è¿™ä¸ªæ¦‚å¿µç”¨åœ¨ç¼–è¯‘æœŸæ¡ä»¶è¯­å¥é‡Œï¼Œæ•ˆæœå’Œä¹‹å‰çš„å®Œå…¨ç›¸åŒâ€¦â€¦å“¦ï¼Œé”™äº†ï¼Œä¸ç”¨å†å†™ <code>::value</code> æˆ– <code>{}</code> äº†ğŸ˜‚ã€‚</p><p>åœ¨<a href=\"https://time.geekbang.org/column/article/181608\">[ç¬¬ 13 è®²]</a> æˆ‘ç»™å‡ºè¿‡çš„ <code>fmap</code>ï¼Œåœ¨å®é™…ä»£ç ä¸­æˆ‘ä¹Ÿæ˜¯ç”¨äº† SFINAE æ¥è¿›è¡Œçº¦æŸçš„ï¼ˆç•¥ç®€åŒ–ï¼‰ï¼š</p><pre><code class=\"language-c++\">template &lt;\n  template &lt;typename, typename&gt;\n  class OutContainer = vector,\n  typename F, class R&gt;\nauto fmap(F&amp;&amp; f, R&amp;&amp; inputs)\n  -&gt; decltype(begin(inputs),\n              end(inputs),\n              OutContainer&lt;\n                decay_t&lt;decltype(f(\n                  *begin(inputs)))&gt;,\n                allocator&lt;decay_t&lt;\n                  decltype(f(*begin(\n                    inputs)))&gt;&gt;&gt;());\n</code></pre><p>æˆ‘è´¹äº†è€å¤§çš„åŠ²ï¼Œè¦æŠŠè¿”å›å€¼å†™å‡ºæ¥ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸ºäº†åˆ©ç”¨ SFINAE è€Œå·²ã€‚å¦‚æœä½¿ç”¨â€œæ¦‚å¿µâ€ï¼Œé‚£ä»£ç å¯ä»¥ç®€åŒ–æˆï¼š</p><pre><code class=\"language-c++\">template &lt;\n  template &lt;typename, typename&gt;\n  class OutContainer = vector,\n  typename F, class R&gt;\n  requires requires(R&amp;&amp; r) {\n    begin(r);\n    end(r);\n  }\nauto fmap(F&amp;&amp; f, R&amp;&amp; inputs);\n</code></pre><p>ä¸Šé¢çš„ <code>requires requires</code> ä¸æ˜¯é”™è¯¯ï¼Œæ­£å¦‚ <code>noexcept(noexcept(â€¦))</code> ä¸æ˜¯é”™è¯¯ä¸€æ ·ã€‚ç¬¬ä¸€ä¸ª <code>requires</code> å¼€å§‹ä¸€ä¸ª <strong>requires å­å¥</strong>ï¼Œåé¢è·Ÿä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ï¼Œç»“æœçš„çœŸå‡è¡¨ç¤ºæ˜¯å¦æ»¡è¶³äº†æ¨¡æ¿çš„çº¦æŸæ¡ä»¶ã€‚ç¬¬äºŒä¸ª <code>requires</code> åˆ™å¼€å§‹äº†ä¸€ä¸ª <strong>requires è¡¨è¾¾å¼</strong>ï¼šå¦‚æœç±»å‹ <code>R</code> æ»¡è¶³çº¦æŸâ€”â€”å¯ä»¥ä½¿ç”¨ <code>begin</code> å’Œ <code>end</code> å¯¹ <code>R&amp;&amp;</code> ç±»å‹çš„å˜é‡è¿›è¡Œè°ƒç”¨â€”â€”åˆ™è¿”å›çœŸï¼Œå¦åˆ™è¿”å›å‡ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨ C++20 é‡Œï¼Œä¸Šé¢è¿™ä¸ªæ¡ä»¶æˆ‘æ˜¯ä¸éœ€è¦è¿™ä¹ˆå†™å‡ºæ¥çš„ã€‚æœ‰ä¸€ä¸ªç°æˆçš„æ¦‚å¿µå¯ç”¨ï¼Œè¿™ä¹ˆå†™å°±è¡Œäº†ï¼š</p><pre><code class=\"language-c++\">template &lt;\n  template &lt;typename, typename&gt;\n  class OutContainer = vector,\n  typename F, class R&gt;\n  requires range&lt;R&gt;\nauto fmap(F&amp;&amp; f, R&amp;&amp; inputs);\n</code></pre><p>å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»Šå¤©ç¬¬äºŒæ¬¡ç”¨äº† <code>range</code> è¿™ä¸ªæ¦‚å¿µã€‚ç©¶ç«Ÿä»€ä¹ˆæ˜¯ rangeï¼Ÿæˆ‘ä»¬ç•™åˆ°ä¸‹ä¸€è®²å†è¯´ã€‚</p><h2>å†…å®¹å°ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬è®¨è®ºäº† C++20 é‡Œå¯ä»¥è¯´æ˜¯æœ€é‡è¦çš„æ–°åŠŸèƒ½â€”â€”æ¦‚å¿µã€‚æ¦‚å¿µå¯ä»¥ç”¨æ¥å¯¹æ¨¡æ¿å‚æ•°è¿›è¡Œçº¦æŸï¼Œèƒ½å–ä»£ SFINAEï¼Œäº§ç”Ÿæ›´å¥½ã€æ›´å¯è¯»çš„ä»£ç ã€‚</p><p>æ³¨æ„æœ¬è®²çš„å†…å®¹å¹¶éä¸€ä¸ªå½¢å¼åŒ–çš„æè¿°ï¼Œè¯·ä½ åœ¨é˜…è¯»äº†æœ¬è®²çš„å†…å®¹ä¹‹åï¼Œå†å¯¹ç…§å‚è€ƒèµ„æ–™ [6] çš„å†…å®¹çœ‹ä¸€ä¸‹æ›´ä¸¥æ ¼çš„æè¿°ï¼Œç„¶åå†å›è¿‡å¤´æ¥è¯»ä¸€ä¸‹ä¾‹å­ï¼Œæ¥åŠ æ·±ä½ å¯¹æœ¬è®²å†…å®¹çš„ç†è§£ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>è¯·ç»“åˆè‡ªå·±çš„ C++ é¡¹ç›®ï¼Œè€ƒè™‘ä¸€ä¸‹ï¼Œâ€œæ¦‚å¿µâ€å¯ä»¥ä¸ºå¼€å‘å…·ä½“å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿåè¿‡æ¥ï¼Œè´Ÿé¢çš„å½±å“åˆå¯èƒ½ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ</p><h2><span class=\"reference\">å‚è€ƒèµ„æ–™</span></h2><p><span class=\"reference\">[1] Bjarne Stroustrup, â€œConcepts: the future of generic programming, or how to design good concepts and use them wellâ€. <a href=\"http://www.stroustrup.com/good_concepts.pdf\">http://www.stroustrup.com/good_concepts.pdf</a> </span></p><p><span class=\"reference\">[2] Alexander Stepanov and Paul McJones, <em>Elements of Programming</em>. Addison-Wesley, 2009. æœ‰ä¸­æ–‡ç‰ˆï¼ˆè£˜å®—ç‡•è¯‘ã€Šç¼–ç¨‹åŸæœ¬ã€‹ï¼Œäººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾ï¼Œ2019 å¹´ï¼‰ </span></p><p><span class=\"reference\">[3] ISO/IEC JTC1 SC22 WG21, N4549, â€œProgramming languages â€” C++ extensions for conceptsâ€. <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4549.pdf\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4549.pdf</a> </span></p><p><span class=\"reference\">[4] Herb Sutter et al., â€œRename concepts to standard_case for C++20, while we still canâ€. <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1754r1.pdf\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1754r1.pdf</a> </span></p><p><span class=\"reference\">[5] cppreference.com, â€œStandard library header &lt;concepts&gt;â€. <a href=\"https://en.cppreference.com/w/cpp/header/concepts\">https://en.cppreference.com/w/cpp/header/concepts</a>. </span></p><p><span class=\"reference\">[5a] cppreference.com, â€œæ ‡å‡†åº“å¤´æ–‡ä»¶ &lt;concepts&gt;â€. <a href=\"https://zh.cppreference.com/w/cpp/header/concepts\">https://zh.cppreference.com/w/cpp/header/concepts</a>. </span></p><p><span class=\"reference\">[6] Casey Carter et al., cmcstl2. <a href=\"https://github.com/CaseyCarter/cmcstl2\">https://github.com/CaseyCarter/cmcstl2</a> </span></p><p><span class=\"reference\">[7] cppreference.com, â€œConstraints and conceptsâ€. <a href=\"https://en.cppreference.com/w/cpp/language/constraints\">https://en.cppreference.com/w/cpp/language/constraints</a> </span></p><p><span class=\"reference\">[7a] cppreference.com, â€œçº¦æŸä¸æ¦‚å¿µâ€. <a href=\"https://zh.cppreference.com/w/cpp/language/constraints\">https://zh.cppreference.com/w/cpp/language/constraints</a> </span></p><p><span class=\"reference\">[8] cppreference.com, â€œstd::enable_ifâ€. <a href=\"https://en.cppreference.com/w/cpp/types/enable_if\">https://en.cppreference.com/w/cpp/types/enable_if</a> </span></p><p><span class=\"reference\">[8a] cppreference.com, â€œstd::enable_ifâ€. <a href=\"https://zh.cppreference.com/w/cpp/types/enable_if\">https://zh.cppreference.com/w/cpp/types/enable_if</a> </span></p><p><span class=\"reference\">[9] Andrew Sutton, â€œIntroducing conceptsâ€. <a href=\"https://accu.org/index.php/journals/2157\">https://accu.org/index.php/journals/2157</a> </span></p>","neighbors":{"left":{"article_title":"27 | C++ REST SDKï¼šä½¿ç”¨ç°ä»£C++å¼€å‘ç½‘ç»œåº”ç”¨","id":193523},"right":{"article_title":"29 | Rangesï¼šæ— è¿­ä»£å™¨çš„è¿­ä»£å’Œæ›´æ–¹ä¾¿çš„ç»„åˆ","id":195553}},"comments":[{"had_liked":false,"id":383498,"user_name":"æäº‘é¾™","can_delete":false,"product_type":"c1","uid":3201926,"ip_address":"åŒ—äº¬","ucode":"785924B16BE788","user_header":"https://static001.geekbang.org/account/avatar/00/30/db/86/51ec4c41.jpg","comment_is_top":false,"comment_ctime":1699169000,"is_pvip":false,"replies":[{"id":140089,"content":"æ˜¯é”™äº†ã€‚è°¢è°¢ã€‚æ­£æ–‡å·²æ›´æ–°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1645639,"ctime":1700005440,"ip_address":"å¹¿ä¸œ","comment_id":383498,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ‚¨çš„è¿™æ®µä»£ç ï¼ŒOutContaineræ˜¯éœ€è¦2ä¸ªæ¨¡æ¿å‚æ•°çš„ï¼Œä½†æ˜¯ç‰¹åŒ–çš„æ—¶å€™åªæä¾›äº†ä¸€ä¸ªç±»å‹ä½œä¸ºæ¨¡æ¿å‚æ•°ï¼Œæ˜¯ä¸æ˜¯æ¼å†™äº†ä¸€ä¸ªæ¨¡æ¿å‚æ•°ï¼Ÿæˆ‘å›åˆ°13è®²ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥åŠ ä¸Š allocator&lt;decay_t&lt;decltype(f(*begin(inputs)))&gt;&gt;&gt;?è¿˜æ˜¯ç¼–è¯‘æœŸä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨æ¨æ–­ç¬¬äºŒä¸ªç±»å‹ï¼Ÿ\ntemplate &lt;\n  template &lt;typename, typename&gt;\n  class OutContainer = vector,\n  typename F, class R&gt;\nauto fmap(F&amp;&amp; f, R&amp;&amp; inputs)\n  -&gt; decltype(\n    begin(inputs),\n    end(inputs),\n    OutContainer&lt;decay_t&lt;\n      decltype(f(*begin(\n        inputs)))&gt;&gt;());","like_count":1},{"had_liked":false,"id":306120,"user_name":"Geek_QiDian","can_delete":false,"product_type":"c1","uid":1760241,"ip_address":"","ucode":"048B4D7E07E2E2","user_header":"https://static001.geekbang.org/account/avatar/00/1a/db/f1/1015328a.jpg","comment_is_top":false,"comment_ctime":1628390769,"is_pvip":false,"replies":[{"id":110945,"content":"æœ‰æ”¯æŒ ranges çš„ç‰ˆæœ¬ output_rangeï¼ˆURL é‡Œç›¸åº”æ”¹ä¸€ä¸‹å°±è¡Œï¼‰ï¼Œæ²¡æœ‰å»åšæ¦‚å¿µå®ç°ç‰ˆæœ¬è¿‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1628564977,"ip_address":"","comment_id":306120,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®è€å¸ˆçš„ output_container çš„æ¦‚å¿µå®ç°ç‰ˆæœ¬æœ‰å—ï¼Ÿæƒ³ç ”ç©¶ä¸€ä¸‹","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631809,"discussion_content":"æ˜¯é”™äº†ã€‚è°¢è°¢ã€‚æ­£æ–‡å·²æ›´æ–°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700005440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177124,"user_name":"å»–ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":1141444,"ip_address":"","ucode":"8E8C475CD11FBC","user_header":"https://static001.geekbang.org/account/avatar/00/11/6a/c4/8679ca8a.jpg","comment_is_top":false,"comment_ctime":1581297462,"is_pvip":false,"replies":[{"id":68818,"content":"Javaå’ŒC#çš„æ³›å‹çº¦æŸéƒ½å¤ªå¼±äº†ï¼Œåªèƒ½æ˜¯ä½ éœ€è¦åšä»€ä¹ˆï¼Œè€Œä¸èƒ½è¯´ä½ ä¸å¯ä»¥åšä»€ä¹ˆã€‚å¦å¤–ï¼Œè¿™ç§åŸºäºç»§æ‰¿çš„çº¦æŸæ˜¯ è·Ÿ C++ çš„é¸­å­ç±»å‹æ–¹å¼èƒŒé“è€Œé©°çš„ï¼šæ¦‚å¿µä»ç„¶æ˜¯åŸºäºé¸­å­ç±»å‹çš„ï¼Œè™½ç„¶æ˜¯æ›´å½¢å¼åŒ–çš„é¸­å­ç±»å‹â€”â€”ä½†å®ƒä»ç„¶æ˜¯ä¸ä½¿ç”¨ç»§æ‰¿ä½“ç³»çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581332140,"ip_address":"","comment_id":177124,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"c++é‡Œçš„æ³›å‹çº¦æŸå’Œjavaæˆ–è€…c#ä¸­çš„æ³›å‹çº¦æŸå¾ˆåƒï¼Œä½†æ˜¯å¤æ‚äº†å¥½å¤š...ä¸åƒåè€…åªèƒ½çº¦æŸæ³›å‹å‚æ•°å®ç°æŸä¸€æ¥å£ï¼Œc++å¯ä»¥é€šè¿‡å¾ˆå°çš„çº¦æŸç»„åˆæˆéœ€è¦çš„çº¦æŸï¼Œæ„Ÿè§‰è¿™å°±æ˜¯å‡½æ•°å¼é‡Œé¢ç»å¸¸æçš„ç»„åˆçš„åŠ›é‡å§","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524639,"discussion_content":"æœ‰æ”¯æŒ ranges çš„ç‰ˆæœ¬ output_rangeï¼ˆURL é‡Œç›¸åº”æ”¹ä¸€ä¸‹å°±è¡Œï¼‰ï¼Œæ²¡æœ‰å»åšæ¦‚å¿µå®ç°ç‰ˆæœ¬è¿‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628564977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228645,"user_name":"æ˜“è½»å°˜","can_delete":false,"product_type":"c1","uid":1136684,"ip_address":"","ucode":"0D0CB9D6D45A70","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/2c/92c7ce3b.jpg","comment_is_top":false,"comment_ctime":1592770055,"is_pvip":false,"replies":[{"id":84389,"content":"æœ‰ç­”æ¡ˆçš„ã€‚å­¦åˆ°è¿™ä¹ˆåé¢äº†ï¼Œå°±å»çœ‹ä¸€ä¸‹ç­”æ¡ˆå§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1592833305,"ip_address":"","comment_id":228645,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"ä¸ªäººè®¤ä¸ºå¥½å¤„å°±æ˜¯1. ä»£ç é‡å‡å°‘ï¼Œ2. ä»£ç å˜å¾—æ›´åŠ æ˜“è¯»ï¼Œå’Œè€å¸ˆè¯´çš„3. å‡ºé”™ä¿¡æ¯å˜å¾—æ›´å‹å–„äº†ã€‚\n\næˆ‘å¯¹æ¨¡æ¿ç¼–ç¨‹ä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œæ‰€ä»¥ä¹‹å‰å¾ˆå°‘é€šè¿‡SFINAEæ¥ç›´æ¥è§„åˆ¶å‡½æ•°çš„æ¨¡æ¿å‚æ•°ç±»å‹ï¼Œåè€Œæ˜¯é€šè¿‡æ¨¡ä»¿javaçš„åšæ³•ï¼Œå†™æ¨¡æ¿ç±»ä½œä¸ºæ¥å£ï¼ŒåŒ…è£…å®é™…çš„ç±»å‹ã€‚å¦‚æœéœ€è¦çš„çº¦æŸç®€å•è¿™æ ·å†™ä¹Ÿä¸éº»çƒ¦ï¼Œä½†æ˜¯æ— æ³•åƒconceptsçš„å†™æ³•é‚£æ ·éšæ„çš„ç»„åˆå„ç§çº¦æŸï¼Œè¦å®ç°è¿™èŠ‚å›¾ä¸­é‚£ç§ç±»ä¼¼æ ‘çŠ¶çš„ç»“æ„éº»çƒ¦å¾—å°±ä¸æ˜¯ä¸€ç‚¹åŠç‚¹äº†ã€‚\n\nè‡³äºç¼ºç‚¹ï¼Œæš‚æ—¶æ²¡æœ‰æƒ³åˆ°ï¼Œå¸Œæœ›è€å¸ˆèƒ½æç¤ºæç¤º","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483313,"discussion_content":"Javaå’ŒC#çš„æ³›å‹çº¦æŸéƒ½å¤ªå¼±äº†ï¼Œåªèƒ½æ˜¯ä½ éœ€è¦åšä»€ä¹ˆï¼Œè€Œä¸èƒ½è¯´ä½ ä¸å¯ä»¥åšä»€ä¹ˆã€‚å¦å¤–ï¼Œè¿™ç§åŸºäºç»§æ‰¿çš„çº¦æŸæ˜¯ è·Ÿ C++ çš„é¸­å­ç±»å‹æ–¹å¼èƒŒé“è€Œé©°çš„ï¼šæ¦‚å¿µä»ç„¶æ˜¯åŸºäºé¸­å­ç±»å‹çš„ï¼Œè™½ç„¶æ˜¯æ›´å½¢å¼åŒ–çš„é¸­å­ç±»å‹â€”â€”ä½†å®ƒä»ç„¶æ˜¯ä¸ä½¿ç”¨ç»§æ‰¿ä½“ç³»çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581332140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203594,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1586238277,"is_pvip":false,"replies":[{"id":76164,"content":"å¯¹äºæ€ç»´ä¸¥è°¨çš„äººæ¥è¯´ï¼Œæ˜¯æŠ½è±¡ï¼Œæ˜¯å¥½äº‹ï¼Œä¸æ˜¯å›°éš¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1586274156,"ip_address":"","comment_id":203594,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å¦‚æœæ˜¯å¼•å…¥æ¦‚å¿µçš„è¯\n1.ä»å½“å‰çš„æ ‡å‡†åº“é‡Œå¯ä»¥æŠ½å–æ›´å¤šè¿‘ä¼¼æ¦‚å¿µçš„æ“ä½œï¼ˆç±»ä¼¼äºitreratorï¼‰ï¼Œç›´æ¥è°ƒç”¨å³å¯ã€‚\n2.åœ¨classçš„è®¾è®¡ä¸Šç›´æ¥æ ‡è®°æ¦‚å¿µç›¸å…³å…³é”®å­—å°±å¯ä»¥æ£€æŸ¥classçš„è®¾è®¡æ˜¯ä¸æ˜¯ç¬¦åˆåŸåˆ™\n\nç¼ºç‚¹:ç†è§£èµ·æ¥æ¯”è¾ƒå›°éš¾","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499124,"discussion_content":"æœ‰ç­”æ¡ˆçš„ã€‚å­¦åˆ°è¿™ä¹ˆåé¢äº†ï¼Œå°±å»çœ‹ä¸€ä¸‹ç­”æ¡ˆå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592833305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184772,"user_name":"æäº®äº®","can_delete":false,"product_type":"c1","uid":1116508,"ip_address":"","ucode":"290907F930B261","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","comment_is_top":false,"comment_ctime":1583398588,"is_pvip":false,"replies":[{"id":71451,"content":"ä»£ç å‰é¢è¦æœ‰ï¼š\n\n#include &lt;vector&gt;\nusing namespace std;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1583450877,"ip_address":"","comment_id":184772,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"vs2019  c++17\ntemplate &lt;typename, typename&gt;\n    class OutContainer = vector,\nè¿™é‡Œæç¤ºé”™è¯¯ï¼š\tC2065\tâ€œvectorâ€: æœªå£°æ˜çš„æ ‡è¯†ç¬¦\t\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486126,"discussion_content":"ä»£ç å‰é¢è¦æœ‰ï¼š\n\n#include &amp;lt;vector&amp;gt;\nusing namespace std;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583450877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1116508,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","nickname":"æäº®äº®","note":"","ucode":"290907F930B261","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198001,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œæˆ‘åˆšå‘ç°äº†ã€‚å¤ªä¹…æ²¡ç”¨C++ï¼Œå‚»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583461028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175831,"user_name":"å§‹ä¹‹æºç¨³äºå¿ƒ","can_delete":false,"product_type":"c1","uid":1326578,"ip_address":"","ucode":"E0721C63557ACD","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/f2/912c9f9d.jpg","comment_is_top":false,"comment_ctime":1580865672,"is_pvip":false,"replies":[{"id":68372,"content":"æ²¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œä¸ç†Ÿæ‚‰ã€‚å»ºè®®åˆ° Stack Overflow ä¸Šå»é—®ï¼Œæœ€å¥½æè¿°æ¸…æ¥šç¯å¢ƒï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæœ€å°çš„æµ‹è¯•ç¨‹åºã€‚\n\nä¸€èˆ¬è€Œè¨€ï¼Œç½‘ç»œç¨‹åºå’Œå¤šçº¿ç¨‹ç¨‹åºè¦åšå¥½å•å…ƒæµ‹è¯•ï¼Œä¹Ÿåªæœ‰å•å…ƒæµ‹è¯•å¯ä»¥åœ¨è°ƒè¯•å™¨é‡Œé¡ºåˆ©è¿›è¡Œã€‚å®Œæ•´ç³»ç»Ÿçš„è°ƒè¯•å¤šé è®°æ—¥å¿—å’Œåˆ†æã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1580874286,"ip_address":"","comment_id":175831,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘é—®ä¸€ä¸ªä¸æ­¤æ–‡ç« æ— å…³çš„ï¼Œä¸€ä¸ªGDBè°ƒè¯•çš„é—®é¢˜ï¼š\nä¸€ä¸ªç½‘ç»œå¤šçº¿ç¨‹æœåŠ¡ï¼Œä¸€ä¸ªsocketä¸€ä¸ªçº¿ç¨‹ã€‚æœ‰ä¸€ä¸ªå…±äº«å˜é‡ç”¨boostçš„unordered_mapï¼ŒåŒæ­¥ä¹Ÿç”¨boostçš„unique_lock\nç¨‹åºåœ¨è¿è¡Œæ—¶åŸºæœ¬æ­£å¸¸ï¼Œä½†åœ¨gdbè°ƒè¯•æ—¶åªè¦æ‰“å°å…±äº«å˜é‡(å³ä½¿é‡Œé¢æ²¡æœ‰æ•°æ®)ï¼Œå°±ä¼šæ”¶åˆ°SIGSEGï¼Œè°ƒè¯•å…¶å®ƒå˜é‡æˆ–ç”¨ä¸‹é¢çš„æ­¥éª¤å°±æ²¡äº‹\n1   handle SIGPIPE nostop noprint\n2   set print elements 0\n3   å°†å…±äº«çš„å˜é‡çš„ç±»å‹å˜ä¸º stlçš„map\né—®é¢˜ï¼š\n  è¿™ç§æƒ…å†µäº§ç”Ÿçš„ä¸»è¦åŸå› æ˜¯ä»€ä¹ˆï¼Œç”¨äº†boostçš„ hash mapå—ï¼Œå’Œå±è”½ç®¡é“å…³ç³»æœ‰å¤šå¤§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":482920,"discussion_content":"æ²¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œä¸ç†Ÿæ‚‰ã€‚å»ºè®®åˆ° Stack Overflow ä¸Šå»é—®ï¼Œæœ€å¥½æè¿°æ¸…æ¥šç¯å¢ƒï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæœ€å°çš„æµ‹è¯•ç¨‹åºã€‚\n\nä¸€èˆ¬è€Œè¨€ï¼Œç½‘ç»œç¨‹åºå’Œå¤šçº¿ç¨‹ç¨‹åºè¦åšå¥½å•å…ƒæµ‹è¯•ï¼Œä¹Ÿåªæœ‰å•å…ƒæµ‹è¯•å¯ä»¥åœ¨è°ƒè¯•å™¨é‡Œé¡ºåˆ©è¿›è¡Œã€‚å®Œæ•´ç³»ç»Ÿçš„è°ƒè¯•å¤šé è®°æ—¥å¿—å’Œåˆ†æã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580874286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1326578,"avatar":"https://static001.geekbang.org/account/avatar/00/14/3d/f2/912c9f9d.jpg","nickname":"å§‹ä¹‹æºç¨³äºå¿ƒ","note":"","ucode":"E0721C63557ACD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":161203,"discussion_content":"å¥½çš„ï¼Œè°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580875700,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":383498,"user_name":"æäº‘é¾™","can_delete":false,"product_type":"c1","uid":3201926,"ip_address":"åŒ—äº¬","ucode":"785924B16BE788","user_header":"https://static001.geekbang.org/account/avatar/00/30/db/86/51ec4c41.jpg","comment_is_top":false,"comment_ctime":1699169000,"is_pvip":false,"replies":[{"id":140089,"content":"æ˜¯é”™äº†ã€‚è°¢è°¢ã€‚æ­£æ–‡å·²æ›´æ–°ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"ä½œè€…","uid":1645639,"ctime":1700005440,"ip_address":"å¹¿ä¸œ","comment_id":383498,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è€å¸ˆï¼Œæ‚¨çš„è¿™æ®µä»£ç ï¼ŒOutContaineræ˜¯éœ€è¦2ä¸ªæ¨¡æ¿å‚æ•°çš„ï¼Œä½†æ˜¯ç‰¹åŒ–çš„æ—¶å€™åªæä¾›äº†ä¸€ä¸ªç±»å‹ä½œä¸ºæ¨¡æ¿å‚æ•°ï¼Œæ˜¯ä¸æ˜¯æ¼å†™äº†ä¸€ä¸ªæ¨¡æ¿å‚æ•°ï¼Ÿæˆ‘å›åˆ°13è®²ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥åŠ ä¸Š allocator&lt;decay_t&lt;decltype(f(*begin(inputs)))&gt;&gt;&gt;?è¿˜æ˜¯ç¼–è¯‘æœŸä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨æ¨æ–­ç¬¬äºŒä¸ªç±»å‹ï¼Ÿ\ntemplate &lt;\n  template &lt;typename, typename&gt;\n  class OutContainer = vector,\n  typename F, class R&gt;\nauto fmap(F&amp;&amp; f, R&amp;&amp; inputs)\n  -&gt; decltype(\n    begin(inputs),\n    end(inputs),\n    OutContainer&lt;decay_t&lt;\n      decltype(f(*begin(\n        inputs)))&gt;&gt;());","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":631809,"discussion_content":"æ˜¯é”™äº†ã€‚è°¢è°¢ã€‚æ­£æ–‡å·²æ›´æ–°ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1700005440,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"å¹¿ä¸œ","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":306120,"user_name":"Geek_QiDian","can_delete":false,"product_type":"c1","uid":1760241,"ip_address":"","ucode":"048B4D7E07E2E2","user_header":"https://static001.geekbang.org/account/avatar/00/1a/db/f1/1015328a.jpg","comment_is_top":false,"comment_ctime":1628390769,"is_pvip":false,"replies":[{"id":110945,"content":"æœ‰æ”¯æŒ ranges çš„ç‰ˆæœ¬ output_rangeï¼ˆURL é‡Œç›¸åº”æ”¹ä¸€ä¸‹å°±è¡Œï¼‰ï¼Œæ²¡æœ‰å»åšæ¦‚å¿µå®ç°ç‰ˆæœ¬è¿‡ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1628564977,"ip_address":"","comment_id":306120,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"è¯·é—®è€å¸ˆçš„ output_container çš„æ¦‚å¿µå®ç°ç‰ˆæœ¬æœ‰å—ï¼Ÿæƒ³ç ”ç©¶ä¸€ä¸‹","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524639,"discussion_content":"æœ‰æ”¯æŒ ranges çš„ç‰ˆæœ¬ output_rangeï¼ˆURL é‡Œç›¸åº”æ”¹ä¸€ä¸‹å°±è¡Œï¼‰ï¼Œæ²¡æœ‰å»åšæ¦‚å¿µå®ç°ç‰ˆæœ¬è¿‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628564977,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177124,"user_name":"å»–ç†ŠçŒ«","can_delete":false,"product_type":"c1","uid":1141444,"ip_address":"","ucode":"8E8C475CD11FBC","user_header":"https://static001.geekbang.org/account/avatar/00/11/6a/c4/8679ca8a.jpg","comment_is_top":false,"comment_ctime":1581297462,"is_pvip":false,"replies":[{"id":68818,"content":"Javaå’ŒC#çš„æ³›å‹çº¦æŸéƒ½å¤ªå¼±äº†ï¼Œåªèƒ½æ˜¯ä½ éœ€è¦åšä»€ä¹ˆï¼Œè€Œä¸èƒ½è¯´ä½ ä¸å¯ä»¥åšä»€ä¹ˆã€‚å¦å¤–ï¼Œè¿™ç§åŸºäºç»§æ‰¿çš„çº¦æŸæ˜¯ è·Ÿ C++ çš„é¸­å­ç±»å‹æ–¹å¼èƒŒé“è€Œé©°çš„ï¼šæ¦‚å¿µä»ç„¶æ˜¯åŸºäºé¸­å­ç±»å‹çš„ï¼Œè™½ç„¶æ˜¯æ›´å½¢å¼åŒ–çš„é¸­å­ç±»å‹â€”â€”ä½†å®ƒä»ç„¶æ˜¯ä¸ä½¿ç”¨ç»§æ‰¿ä½“ç³»çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1581332140,"ip_address":"","comment_id":177124,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"c++é‡Œçš„æ³›å‹çº¦æŸå’Œjavaæˆ–è€…c#ä¸­çš„æ³›å‹çº¦æŸå¾ˆåƒï¼Œä½†æ˜¯å¤æ‚äº†å¥½å¤š...ä¸åƒåè€…åªèƒ½çº¦æŸæ³›å‹å‚æ•°å®ç°æŸä¸€æ¥å£ï¼Œc++å¯ä»¥é€šè¿‡å¾ˆå°çš„çº¦æŸç»„åˆæˆéœ€è¦çš„çº¦æŸï¼Œæ„Ÿè§‰è¿™å°±æ˜¯å‡½æ•°å¼é‡Œé¢ç»å¸¸æçš„ç»„åˆçš„åŠ›é‡å§","like_count":1,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483313,"discussion_content":"Javaå’ŒC#çš„æ³›å‹çº¦æŸéƒ½å¤ªå¼±äº†ï¼Œåªèƒ½æ˜¯ä½ éœ€è¦åšä»€ä¹ˆï¼Œè€Œä¸èƒ½è¯´ä½ ä¸å¯ä»¥åšä»€ä¹ˆã€‚å¦å¤–ï¼Œè¿™ç§åŸºäºç»§æ‰¿çš„çº¦æŸæ˜¯ è·Ÿ C++ çš„é¸­å­ç±»å‹æ–¹å¼èƒŒé“è€Œé©°çš„ï¼šæ¦‚å¿µä»ç„¶æ˜¯åŸºäºé¸­å­ç±»å‹çš„ï¼Œè™½ç„¶æ˜¯æ›´å½¢å¼åŒ–çš„é¸­å­ç±»å‹â€”â€”ä½†å®ƒä»ç„¶æ˜¯ä¸ä½¿ç”¨ç»§æ‰¿ä½“ç³»çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581332140,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":228645,"user_name":"æ˜“è½»å°˜","can_delete":false,"product_type":"c1","uid":1136684,"ip_address":"","ucode":"0D0CB9D6D45A70","user_header":"https://static001.geekbang.org/account/avatar/00/11/58/2c/92c7ce3b.jpg","comment_is_top":false,"comment_ctime":1592770055,"is_pvip":false,"replies":[{"id":84389,"content":"æœ‰ç­”æ¡ˆçš„ã€‚å­¦åˆ°è¿™ä¹ˆåé¢äº†ï¼Œå°±å»çœ‹ä¸€ä¸‹ç­”æ¡ˆå§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1592833305,"ip_address":"","comment_id":228645,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"ä¸ªäººè®¤ä¸ºå¥½å¤„å°±æ˜¯1. ä»£ç é‡å‡å°‘ï¼Œ2. ä»£ç å˜å¾—æ›´åŠ æ˜“è¯»ï¼Œå’Œè€å¸ˆè¯´çš„3. å‡ºé”™ä¿¡æ¯å˜å¾—æ›´å‹å–„äº†ã€‚\n\næˆ‘å¯¹æ¨¡æ¿ç¼–ç¨‹ä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œæ‰€ä»¥ä¹‹å‰å¾ˆå°‘é€šè¿‡SFINAEæ¥ç›´æ¥è§„åˆ¶å‡½æ•°çš„æ¨¡æ¿å‚æ•°ç±»å‹ï¼Œåè€Œæ˜¯é€šè¿‡æ¨¡ä»¿javaçš„åšæ³•ï¼Œå†™æ¨¡æ¿ç±»ä½œä¸ºæ¥å£ï¼ŒåŒ…è£…å®é™…çš„ç±»å‹ã€‚å¦‚æœéœ€è¦çš„çº¦æŸç®€å•è¿™æ ·å†™ä¹Ÿä¸éº»çƒ¦ï¼Œä½†æ˜¯æ— æ³•åƒconceptsçš„å†™æ³•é‚£æ ·éšæ„çš„ç»„åˆå„ç§çº¦æŸï¼Œè¦å®ç°è¿™èŠ‚å›¾ä¸­é‚£ç§ç±»ä¼¼æ ‘çŠ¶çš„ç»“æ„éº»çƒ¦å¾—å°±ä¸æ˜¯ä¸€ç‚¹åŠç‚¹äº†ã€‚\n\nè‡³äºç¼ºç‚¹ï¼Œæš‚æ—¶æ²¡æœ‰æƒ³åˆ°ï¼Œå¸Œæœ›è€å¸ˆèƒ½æç¤ºæç¤º","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":499124,"discussion_content":"æœ‰ç­”æ¡ˆçš„ã€‚å­¦åˆ°è¿™ä¹ˆåé¢äº†ï¼Œå°±å»çœ‹ä¸€ä¸‹ç­”æ¡ˆå§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592833305,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":203594,"user_name":"èŒƒé—²","can_delete":false,"product_type":"c1","uid":1073125,"ip_address":"","ucode":"F21FD7DF6BA53C","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/e5/54325854.jpg","comment_is_top":false,"comment_ctime":1586238277,"is_pvip":false,"replies":[{"id":76164,"content":"å¯¹äºæ€ç»´ä¸¥è°¨çš„äººæ¥è¯´ï¼Œæ˜¯æŠ½è±¡ï¼Œæ˜¯å¥½äº‹ï¼Œä¸æ˜¯å›°éš¾ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1586274156,"ip_address":"","comment_id":203594,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å¦‚æœæ˜¯å¼•å…¥æ¦‚å¿µçš„è¯\n1.ä»å½“å‰çš„æ ‡å‡†åº“é‡Œå¯ä»¥æŠ½å–æ›´å¤šè¿‘ä¼¼æ¦‚å¿µçš„æ“ä½œï¼ˆç±»ä¼¼äºitreratorï¼‰ï¼Œç›´æ¥è°ƒç”¨å³å¯ã€‚\n2.åœ¨classçš„è®¾è®¡ä¸Šç›´æ¥æ ‡è®°æ¦‚å¿µç›¸å…³å…³é”®å­—å°±å¯ä»¥æ£€æŸ¥classçš„è®¾è®¡æ˜¯ä¸æ˜¯ç¬¦åˆåŸåˆ™\n\nç¼ºç‚¹:ç†è§£èµ·æ¥æ¯”è¾ƒå›°éš¾","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490903,"discussion_content":"å¯¹äºæ€ç»´ä¸¥è°¨çš„äººæ¥è¯´ï¼Œæ˜¯æŠ½è±¡ï¼Œæ˜¯å¥½äº‹ï¼Œä¸æ˜¯å›°éš¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586274156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":184772,"user_name":"æäº®äº®","can_delete":false,"product_type":"c1","uid":1116508,"ip_address":"","ucode":"290907F930B261","user_header":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","comment_is_top":false,"comment_ctime":1583398588,"is_pvip":false,"replies":[{"id":71451,"content":"ä»£ç å‰é¢è¦æœ‰ï¼š\n\n#include &lt;vector&gt;\nusing namespace std;","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1583450877,"ip_address":"","comment_id":184772,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"vs2019  c++17\ntemplate &lt;typename, typename&gt;\n    class OutContainer = vector,\nè¿™é‡Œæç¤ºé”™è¯¯ï¼š\tC2065\tâ€œvectorâ€: æœªå£°æ˜çš„æ ‡è¯†ç¬¦\t\n","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":490903,"discussion_content":"å¯¹äºæ€ç»´ä¸¥è°¨çš„äººæ¥è¯´ï¼Œæ˜¯æŠ½è±¡ï¼Œæ˜¯å¥½äº‹ï¼Œä¸æ˜¯å›°éš¾ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1586274156,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":175831,"user_name":"å§‹ä¹‹æºç¨³äºå¿ƒ","can_delete":false,"product_type":"c1","uid":1326578,"ip_address":"","ucode":"E0721C63557ACD","user_header":"https://static001.geekbang.org/account/avatar/00/14/3d/f2/912c9f9d.jpg","comment_is_top":false,"comment_ctime":1580865672,"is_pvip":false,"replies":[{"id":68372,"content":"æ²¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œä¸ç†Ÿæ‚‰ã€‚å»ºè®®åˆ° Stack Overflow ä¸Šå»é—®ï¼Œæœ€å¥½æè¿°æ¸…æ¥šç¯å¢ƒï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæœ€å°çš„æµ‹è¯•ç¨‹åºã€‚\n\nä¸€èˆ¬è€Œè¨€ï¼Œç½‘ç»œç¨‹åºå’Œå¤šçº¿ç¨‹ç¨‹åºè¦åšå¥½å•å…ƒæµ‹è¯•ï¼Œä¹Ÿåªæœ‰å•å…ƒæµ‹è¯•å¯ä»¥åœ¨è°ƒè¯•å™¨é‡Œé¡ºåˆ©è¿›è¡Œã€‚å®Œæ•´ç³»ç»Ÿçš„è°ƒè¯•å¤šé è®°æ—¥å¿—å’Œåˆ†æã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"å´å’ç‚œ","uid":1645639,"ctime":1580874286,"ip_address":"","comment_id":175831,"utype":1}],"discussion_count":2,"race_medal":0,"score":2,"product_id":100040501,"comment_content":"å´è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘é—®ä¸€ä¸ªä¸æ­¤æ–‡ç« æ— å…³çš„ï¼Œä¸€ä¸ªGDBè°ƒè¯•çš„é—®é¢˜ï¼š\nä¸€ä¸ªç½‘ç»œå¤šçº¿ç¨‹æœåŠ¡ï¼Œä¸€ä¸ªsocketä¸€ä¸ªçº¿ç¨‹ã€‚æœ‰ä¸€ä¸ªå…±äº«å˜é‡ç”¨boostçš„unordered_mapï¼ŒåŒæ­¥ä¹Ÿç”¨boostçš„unique_lock\nç¨‹åºåœ¨è¿è¡Œæ—¶åŸºæœ¬æ­£å¸¸ï¼Œä½†åœ¨gdbè°ƒè¯•æ—¶åªè¦æ‰“å°å…±äº«å˜é‡(å³ä½¿é‡Œé¢æ²¡æœ‰æ•°æ®)ï¼Œå°±ä¼šæ”¶åˆ°SIGSEGï¼Œè°ƒè¯•å…¶å®ƒå˜é‡æˆ–ç”¨ä¸‹é¢çš„æ­¥éª¤å°±æ²¡äº‹\n1   handle SIGPIPE nostop noprint\n2   set print elements 0\n3   å°†å…±äº«çš„å˜é‡çš„ç±»å‹å˜ä¸º stlçš„map\né—®é¢˜ï¼š\n  è¿™ç§æƒ…å†µäº§ç”Ÿçš„ä¸»è¦åŸå› æ˜¯ä»€ä¹ˆï¼Œç”¨äº†boostçš„ hash mapå—ï¼Œå’Œå±è”½ç®¡é“å…³ç³»æœ‰å¤šå¤§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1645639,"avatar":"https://static001.geekbang.org/account/avatar/00/19/1c/47/53c48284.jpg","nickname":"å´å’ç‚œ","note":"","ucode":"8C24C10AEC779F","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486126,"discussion_content":"ä»£ç å‰é¢è¦æœ‰ï¼š\n\n#include &amp;lt;vector&amp;gt;\nusing namespace std;","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583450877,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1116508,"avatar":"https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg","nickname":"æäº®äº®","note":"","ucode":"290907F930B261","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":198001,"discussion_content":"è°¢è°¢è€å¸ˆï¼Œæˆ‘åˆšå‘ç°äº†ã€‚å¤ªä¹…æ²¡ç”¨C++ï¼Œå‚»äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583461028,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}