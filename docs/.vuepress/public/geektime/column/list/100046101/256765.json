{"id":256765,"title":"å­¦ä¹ è·¯å¾„ | åˆ†å¸ƒå¼åè®®ä¸ç®—æ³•ä½ åº”è¯¥è¿™ä¹ˆå­¦","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯éŸ©å¥ã€‚</p><p>åœ¨æ­£å¼å¼€å§‹å­¦ä¹ è¿™é—¨è¯¾ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆå’Œä½ èŠä¸€èŠæ€ä¹ˆå­¦ï¼Œå› ä¸ºæŒæ¡äº†å­¦ä¹ è·¯å¾„ã€å»ºç«‹äº†å…¨å±€è§‚ä¹‹åï¼Œä½ æ‰èƒ½è¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåˆ†å¸ƒå¼åè®®å’Œç®—æ³•ï¼ˆä¸ºäº†ä¸å•°å—¦ï¼Œå’±ä»¬ä¸‹æ–‡éƒ½ç®€ç§°åˆ†å¸ƒå¼ç®—æ³•ï¼‰å¾ˆå®ç”¨ã€ä¹Ÿå¾ˆç«ï¼Œå¾ˆå¤šåç«¯å·¥ç¨‹å¸ˆåœ¨é¢è¯•çš„æ—¶å€™ï¼Œéƒ½ä¼šè¢«é—®åŠåˆ†å¸ƒå¼ã€é«˜å¯ç”¨ã€ä¸€è‡´æ€§è¿™äº›ä¸“ä¸šåè¯èƒŒåçš„ç®—æ³•åŸç†å’Œå®ç°æ–¹å¼ã€‚</p><p>ä½†æ˜¯åˆ†å¸ƒå¼ç®—æ³•ä¹Ÿæ˜¯æ¯”è¾ƒæ–°çš„ï¼Œå¿«é€Ÿå‘å±•çš„ã€‚æ¯”å¦‚ï¼Œ1989å¹´è±æ–¯åˆ©Â·å…°ä¼¯ç‰¹ï¼ˆLeslie Lamportï¼‰æå‡ºäº†Paxosï¼Œ2006å¹´ï¼Œè°·æ­Œç ”å‘å›¢é˜Ÿè®©Paxosåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è½åœ°ï¼Œä½†æ˜¯Paxosç¼ºä¹ç¼–ç¨‹å®ç°çš„å¿…é¡»ç»†èŠ‚ï¼Œæœ€ç»ˆçš„ç®—æ³•å®ç°ä»æ˜¯å»ºç«‹åœ¨ä¸€ä¸ªæœªè¯æ˜çš„ç®—æ³•ä¹‹ä¸Šã€‚å†åæ¥ï¼Œä¹Ÿå°±æ˜¯åˆ°äº†2013ï¼Œæ–¯å¦ç¦å¤§å­¦çš„è¿­æˆˆÂ·å®‰åŠ ç½—ï¼ˆDiego Ongaroï¼‰å’Œçº¦ç¿°Â·å¥¥æ–¯ç‰¹éœå¾·ï¼ˆJohn Ousterhoutï¼‰æå‡ºäº†Raftï¼Œä½†æ˜¯2016å¹´ï¼ŒRaftä»åœ¨è§£å†³æˆå‘˜å˜æ›´çš„Bugã€‚</p><p>æ­£å› ä¸ºæŠ€æœ¯æ¯”è¾ƒæ–°ï¼Œæ‰€ä»¥å°šæœªèƒ½æ²‰æ·€ä¸ºä¹¦ï¼Œå¾ˆå¤šåŒå­¦éƒ½æ‰¾ä¸åˆ°åˆ†å¸ƒå¼ç®—æ³•æ–¹é¢çš„ç»å…¸ä¹¦ç±ï¼Œå†åŠ ä¸Šäº’è”ç½‘ä¸Šä¸­æ–‡èµ„æ–™é”™è¯¯å¤šï¼Œä»–ä»¬åœ¨å­¦ä¹ ç›¸å…³çš„åˆ†å¸ƒå¼ç®—æ³•çš„æ—¶å€™ï¼Œä¼šè§‰å¾—åƒåŠ›å’Œå›°æƒ‘ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚ä½•æ‰èƒ½æŒæ¡ä¸€ä¸ªç›¸å¯¹æ–°ã€è€Œä¸”åˆåœ¨è“¬å‹ƒå¿«é€Ÿå‘å±•çš„æŠ€æœ¯çŸ¥è¯†å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘è¿™èŠ‚è¯¾æƒ³è¦è·Ÿä½ åˆ†äº«çš„å†…å®¹ï¼š<strong>å¦‚ä½•é«˜æ•ˆåœ°å­¦ä¹ å’ŒæŒæ¡åˆ†å¸ƒå¼ç®—æ³•ï¼Ÿ</strong></p><!-- [[[read_end]]] --><p>åœ¨æˆ‘çœ‹æ¥ï¼Œå¼€å‘åˆ†å¸ƒå¼ç³»ç»Ÿæœ€å…³é”®çš„å°±æ˜¯æ ¹æ®åœºæ™¯ç‰¹ç‚¹ï¼Œé€‰æ‹©åˆé€‚çš„ç®—æ³•ï¼Œåœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´å¦¥åæŠ˜ä¸­ï¼Œè€Œå¦¥åæŠ˜ä¸­çš„å…³é”®å°±åœ¨äºèƒ½å¦ç†è§£å„ç®—æ³•çš„ç‰¹ç‚¹ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å…ˆè¦å¼„æ¸…æ¥šæ¯ä¸ªç®—æ³•çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Œé€‚åˆæ€æ ·çš„åœºæ™¯ï¼Œè¿™æ ·å½“ä½ åœ¨å¼€å‘åˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ï¼Œæ‰èƒ½åšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œæ¸¸åˆƒæœ‰ä½™åœ°é€‰æ‹©é€‚åˆçš„ç®—æ³•ï¼Œæ¥è§£å†³å®é™…åœºæ™¯çš„é—®é¢˜ã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šè¿™äº›ç®—æ³•ç©¶ç«Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿé€‚åˆæ€æ ·çš„åœºæ™¯å‘¢ï¼Ÿ</p><h2>åˆ†å¸ƒå¼ç®—æ³•çš„å››åº¦ç©ºé—´</h2><p>ä¸ºäº†å¸®ä½ æ›´å¥½åœ°ç†è§£æœ€å¸¸ç”¨çš„åˆ†å¸ƒå¼ç®—æ³•çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»æ‹œå åº­å®¹é”™ã€ä¸€è‡´æ€§ã€æ€§èƒ½å’Œå¯ç”¨æ€§å››ä¸ªçº¬åº¦å¸®ä½ æ•´ç†äº†ä¸€å¼ è¡¨ï¼Œä½ å¯ä»¥å¯¹ç…§ç€çœ‹ä¸€ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/1c/33/1cc7514e341fab7bd7044b37285f4433.jpg?wh=1142*785\" alt=\"\"></p><h2>æ‹œå åº­å®¹é”™</h2><p>æ‹œå åº­é”™è¯¯æ˜¯è±æ–¯åˆ©Â·å…°ä¼¯ç‰¹åœ¨ã€Šæ‹œå åº­å°†å†›é—®é¢˜ã€‹ä¸­æå‡ºçš„ä¸€ä¸ªé”™è¯¯æ¨¡å‹ï¼Œæè¿°äº†ä¸€ä¸ªå®Œå…¨ä¸å¯ä¿¡çš„åœºæ™¯ï¼Œé™¤äº†å­˜åœ¨æ•…éšœè¡Œä¸ºï¼Œè¿˜å­˜åœ¨æ¶æ„è¡Œä¸ºã€‚é¡¾åæ€ä¹‰ï¼Œæ‹œå åº­å®¹é”™ï¼ˆByzantine Fault Toleranceï¼ŒBFTï¼‰ï¼Œå°±æ˜¯æŒ‡èƒ½å®¹å¿æ‹œå åº­é”™è¯¯äº†ã€‚</p><p>è€Œéæ‹œå åº­å®¹é”™ï¼Œåˆå«æ•…éšœå®¹é”™ï¼ˆCrash Fault Toleranceï¼ŒCFTï¼‰ï¼Œè§£å†³çš„æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å­˜åœ¨æ•…éšœï¼Œä½†ä¸å­˜åœ¨æ¶æ„èŠ‚ç‚¹çš„å…±è¯†é—®é¢˜ï¼Œæ¯”å¦‚è¿›ç¨‹å´©æºƒã€æœåŠ¡å™¨ç¡¬ä»¶æ•…éšœç­‰ã€‚</p><p>ä¸€èˆ¬è€Œè¨€ï¼Œåœ¨å¯ä¿¡ç¯å¢ƒï¼ˆæ¯”å¦‚ä¼ä¸šå†…ç½‘ï¼‰ä¸­ï¼Œç³»ç»Ÿå…·æœ‰æ•…éšœå®¹é”™èƒ½åŠ›å°±å¯ä»¥äº†ï¼Œå¸¸è§çš„ç®—æ³•æœ‰äºŒé˜¶æ®µæäº¤åè®®ï¼ˆ2PCï¼‰ã€TCCï¼ˆTry-Confirm-Cancelï¼‰ã€Paxosç®—æ³•ã€ZABåè®®ã€Raftç®—æ³•ã€Gossipåè®®ã€Quorum NWRç®—æ³•ã€‚</p><p>è€Œåœ¨ä¸å¯ä¿¡çš„ç¯å¢ƒï¼ˆæ¯”å¦‚æœ‰äººåšæ¶ï¼‰ä¸­ï¼Œè¿™æ—¶ç³»ç»Ÿéœ€è¦å…·å¤‡æ‹œå åº­å®¹é”™èƒ½åŠ›ï¼Œå¸¸è§çš„æ‹œå åº­å®¹é”™ç®—æ³•æœ‰POWç®—æ³•ã€PBFTç®—æ³•ã€‚</p><h2>ä¸€è‡´æ€§</h2><p>ä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬å°†ä¸€è‡´æ€§åˆ†ä¸ºä¸‰ç±»ã€‚</p><ul>\n<li>å¼ºä¸€è‡´æ€§ï¼šä¿è¯å†™æ“ä½œå®Œæˆåï¼Œä»»ä½•åç»­è®¿é—®éƒ½èƒ½è¯»åˆ°æ›´æ–°åçš„å€¼ã€‚</li>\n<li>å¼±ä¸€è‡´æ€§ï¼šå†™æ“ä½œå®Œæˆåï¼Œç³»ç»Ÿä¸èƒ½ä¿è¯åç»­çš„è®¿é—®éƒ½èƒ½è¯»åˆ°æ›´æ–°åçš„å€¼ã€‚</li>\n<li>æœ€ç»ˆä¸€è‡´æ€§ï¼šä¿è¯å¦‚æœå¯¹æŸä¸ªå¯¹è±¡æ²¡æœ‰æ–°çš„å†™æ“ä½œäº†ï¼Œæœ€ç»ˆæ‰€æœ‰åç»­è®¿é—®éƒ½èƒ½è¯»åˆ°ç›¸åŒçš„æœ€è¿‘æ›´æ–°çš„å€¼ã€‚</li>\n</ul><p>ä½†æ˜¯æˆ‘è¦æé†’ä½ æ³¨æ„ï¼Œå¼ºä¸€è‡´æ€§æ˜¯å…·æœ‰å¤šç§å«ä¹‰çš„ã€‚</p><p>é¦–å…ˆï¼Œåœ¨åŸƒé‡Œå…‹Â·å¸ƒé²å°”çš„çŒœæƒ³ä¸­ï¼ŒCAPä¸­çš„å¼ºä¸€è‡´æ€§ï¼ˆä¹Ÿå°±æ˜¯Cï¼‰æ˜¯æŒ‡ACIDçš„Cï¼Œç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§ï¼Œè€Œè¿™ç§ä¸€è‡´æ€§ï¼Œå¯ä»¥é€šè¿‡äºŒé˜¶æ®µæäº¤åè®®æ¥å®ç°ã€‚</p><p>å…¶æ¬¡ï¼Œåœ¨CAPå®šç†ä¸­ï¼ŒCAPä¸­çš„å¼ºä¸€è‡´æ€§ï¼ˆä¹Ÿå°±æ˜¯Cï¼‰æ˜¯æŒ‡åŸå­ä¸€è‡´æ€§ï¼ˆä¹Ÿå°±æ˜¯çº¿æ€§ä¸€è‡´æ€§ï¼‰ã€‚å…¶ä¸­ï¼ŒPaxosã€Raftèƒ½å®ç°çº¿æ€§ä¸€è‡´æ€§ï¼Œè€ŒZooKeeperåŸºäºè¯»æ€§èƒ½çš„è€ƒè™‘ï¼Œå®ƒé€šè¿‡ZABåè®®æä¾›çš„æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><p>ä¸€èˆ¬è€Œè¨€ï¼Œåœ¨éœ€è¦ç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§æ—¶ï¼Œä½ å¯ä»¥è€ƒè™‘é‡‡ç”¨äºŒé˜¶æ®µæäº¤åè®®ã€TCCã€‚åœ¨éœ€è¦æ•°æ®è®¿é—®æ˜¯çš„å¼ºä¸€è‡´æ€§æ—¶ï¼Œä½ å¯è€ƒè™‘Raftç®—æ³•ã€‚åœ¨å¯ç”¨æ€§ä¼˜å…ˆçš„ç³»ç»Ÿï¼Œä½ å¯ä»¥é‡‡ç”¨Gossipåè®®æ¥å®ç°æœ€ç»ˆä¸€è‡´æ€§ï¼Œå¹¶å®ç°Quorum NWRæ¥æä¾›å¼ºä¸€è‡´æ€§ã€‚</p><h2>å¯ç”¨æ€§</h2><p>å¯ç”¨æ€§è¯´çš„æ˜¯ä»»ä½•æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸ç®¡è®¿é—®å“ªä¸ªéæ•…éšœèŠ‚ç‚¹ï¼Œéƒ½èƒ½å¾—åˆ°å“åº”æ•°æ®ï¼Œä½†ä¸ä¿è¯æ˜¯åŒä¸€ä»½æœ€æ–°æ•°æ®ï¼Œå¯ç”¨æ€§å¼ºè°ƒçš„æ˜¯æœåŠ¡å¯ç”¨ã€‚</p><p>ä¸€èˆ¬æ¥è®²ï¼Œé‡‡ç”¨Gossipåè®®å®ç°æœ€ç»ˆä¸€è‡´æ€§ç³»ç»Ÿï¼Œå®ƒçš„å¯ç”¨æ€§æ˜¯æœ€é«˜çš„ï¼Œå› ä¸ºå“ªæ€•åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé›†ç¾¤è¿˜èƒ½åœ¨è¿è¡Œå¹¶æä¾›æœåŠ¡ã€‚å…¶æ¬¡æ˜¯Paxosç®—æ³•ã€ZABåè®®ã€Raftç®—æ³•ã€Quorum NWRç®—æ³•ã€PBFTç®—æ³•ã€POWç®—æ³•ï¼Œå®ƒä»¬èƒ½å®¹å¿ä¸€å®šæ•°èŠ‚ç‚¹æ•…éšœã€‚</p><p>æœ€åæ˜¯äºŒé˜¶æ®µæäº¤åè®®ã€TCCï¼Œåªæœ‰å½“æ‰€æœ‰èŠ‚ç‚¹éƒ½åœ¨è¿è¡Œæ—¶ï¼Œæ‰èƒ½å·¥ä½œï¼Œå¯ç”¨æ€§æœ€ä½ã€‚</p><h2>æ€§èƒ½</h2><p>ä¸€èˆ¬æ¥è®²ï¼Œé‡‡ç”¨Gossipåè®®çš„APå‹åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå…·å¤‡æ°´å¹³æ‰©å±•èƒ½åŠ›ï¼Œè¯»å†™æ€§èƒ½æ˜¯æœ€é«˜çš„ã€‚å…¶æ¬¡æ˜¯Paxosç®—æ³•ã€ZABåè®®ã€Raftç®—æ³•ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯é¢†å¯¼è€…æ¨¡å‹ï¼Œå†™æ€§èƒ½å—é™äºé¢†å¯¼è€…ï¼Œè¯»æ€§èƒ½å–å†³äºä¸€è‡´æ€§å®ç°ã€‚æœ€åæ˜¯äºŒé˜¶æ®µæäº¤åè®®å’ŒTCCï¼Œå› ä¸ºåœ¨å®ç°äº‹åŠ¡æ—¶ï¼Œéœ€è¦é¢„ç•™å’Œé”å®šèµ„æºï¼Œæ€§èƒ½ç›¸å¯¹ä½ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯è¿™äº›ç®—æ³•çš„ç‰¹ç‚¹äº†ï¼Œäº†è§£å®Œè¿™éƒ¨åˆ†å†…å®¹ä¹‹åï¼Œæˆ‘æƒ³ä½ ä¸€å®šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šâ€œè€éŸ©ï¼Œè¿™äº›ç®—æ³•çœ‹èµ·æ¥å¾ˆæ·±å¥¥ï¼Œæˆ‘æ€æ ·æ‰èƒ½ææ‡‚å®ƒä»¬å‘¢ï¼ŸæŒ‰éƒ¨å°±ç­çš„å­¦å—ï¼Ÿâ€</p><p>æ ¹æ®æˆ‘å¤šå¹´çš„ç»éªŒï¼Œä½ ä¹‹æ‰€ä»¥è§‰å¾—è¿™äº›ç®—æ³•å’Œç›¸å…³çš„åˆ†å¸ƒå¼æŠ€æœ¯ï¼Œå­¦èµ·æ¥æ¯”è¾ƒéš¾ï¼Œæ˜¯å› ä¸ºå®ƒä»¬æ¯”è¾ƒæ–°ï¼Œç¼ºä¹ä½“ç³»åŒ–ã€‚å¦‚æœè¿™æ—¶æœ‰ä¸ªå…¨æ™¯å›¾ï¼Œå¸®ä½ å»ºç«‹å…¨å±€è§‚ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ä½“ç³»åŒ–çš„ç†è§£ç›¸å…³ç®—æ³•äº†ï¼Œåœ¨æé«˜å­¦ä¹ æ•ˆç‡åŒæ—¶ï¼Œä¹Ÿèƒ½åœ¨å®é™…åœºæ™¯ä¸­â€œæŒ‰å›¾ç´¢éª¥â€çš„é€‰ç”¨ç›¸å…³çš„ç®—æ³•ï¼Œè€Œè¿™äº›å°±æ˜¯æˆ‘æ¥ä¸‹æ¥æƒ³å’Œä½ å…·ä½“èŠä¸€èŠçš„ã€‚</p><h2>ä¸“æ å†…å®¹è¯¥å¦‚ä½•å­¦ï¼Ÿ</h2><p><strong>æ‹œå åº­å°†å†›é—®é¢˜ï¼šæœ€å¤æ‚çš„åˆ†å¸ƒå¼å®¹é”™æ¨¡å‹</strong><br>\n<strong>éš¾åº¦ï¼š</strong>ä¸€é¢—æ˜Ÿ<br>\n<strong>å­¦ä¹ ææ–™ï¼š</strong> 01è®²ã€åŠ é¤ | æ‹œå åº­å°†å†›é—®é¢˜ï¼šå¦‚ä½•åŸºäºç­¾åæ¶ˆæ¯å®ç°ä½œæˆ˜è®¡åˆ’çš„ä¸€è‡´æ€§ï¼Ÿ</p><p>æ‹œå åº­å®¹é”™æ˜¯åˆ†å¸ƒå¼é¢†åŸŸæœ€å¤æ‚çš„å®¹é”™æ¨¡å‹ï¼Œæ˜¯ä½ å¿…é¡»è¦äº†è§£çš„ã€‚å¦å¤–ï¼Œå£ä¿¡æ¶ˆæ¯å‹æ‹œå åº­é—®é¢˜ä¹‹è§£ã€ç­¾åæ¶ˆæ¯å‹æ‹œå åº­é—®é¢˜ä¹‹è§£ï¼Œä½ å¯ä»¥é€šè¿‡é¢„è®¾ä¸åŒçš„å¿ å°†æ•°ã€å›å°†æ•°ï¼Œæ¥æ¨æ¼”ä¸‹ï¼Œåœ¨æ¨æ¼”ä¸­å­¦ä¹ å’ŒæŒæ¡ã€‚</p><p><strong>CAPç†è®ºï¼šé…¸ç¢±å¹³è¡¡ä¹‹é“</strong><br>\n<strong>éš¾åº¦ï¼š</strong> äºŒé¢—æ˜Ÿ<br>\n<strong>å­¦ä¹ ææ–™ï¼š</strong> 02è®²ã€03è®²ã€04è®²</p><p>å­¦ä¹ CAPç†è®ºçš„å…³é”®ï¼Œä¸æ˜¯ä»…ä»…çŸ¥é“CAPä¸å¯èƒ½ä¸‰è§’ï¼Œè€Œæ˜¯è¦èƒ½åœ¨Cå’ŒAä¹‹é—´ï¼Œæ ¹æ®å®é™…åœºæ™¯ç‰¹ç‚¹ï¼Œå¦¥åæƒè¡¡æŠ˜ä¸­ã€‚è¿™ä¹Ÿæ˜¯CAPçŒœæƒ³æå‡ºçš„åˆè¡·ï¼Œå¸Œæœ›ä¸šç•Œèƒ½é‡è§†å¯ç”¨æ€§ï¼Œè€Œä¸æ˜¯åªè€ƒè™‘ACIDã€‚</p><p><strong>åˆ†å¸ƒå¼äº‹åŠ¡ï¼šè¿›é€€ä¸å…±</strong><br>\n<strong>éš¾åº¦ï¼š</strong> äºŒé¢—æ˜Ÿ<br>\n<strong>å­¦ä¹ ææ–™ï¼š</strong> 03è®²ï¼ŒåŠ é¤ | MySQL XAæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„ï¼ŒåŠ é¤ | TCCå¦‚ä½•å®ç°æŒ‡ä»¤çš„åŸå­æ€§</p><p>äº‹åŠ¡æ˜¯æŒ‡å…·æœ‰ACIDç‰¹æ€§çš„ä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼Œå®ç°çš„æ˜¯ç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§ã€‚ä¸€èˆ¬åœ¨æ”¯ä»˜ï¼Œæˆ–å…¶ä»–éœ€è¦åŸå­æ“ä½œçš„åœºæ™¯ä¸‹æ¯”è¾ƒå¸¸ç”¨ã€‚</p><p>å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯äºŒé˜¶æ®µæäº¤åè®®å’ŒTCCï¼Œè¿™ä¸¤ä¸ªç®—æ³•çš„é€‚ç”¨åœºæ™¯æ˜¯ä¸åŒçš„ï¼ŒäºŒé˜¶æ®µæäº¤åè®®å®ç°çš„æ˜¯æ•°æ®å±‚é¢çš„äº‹åŠ¡ï¼Œæ¯”å¦‚XAè§„èŒƒé‡‡ç”¨çš„å°±æ˜¯äºŒé˜¶æ®µæäº¤åè®®ï¼›TCCå®ç°çš„æ˜¯ä¸šåŠ¡å±‚é¢çš„äº‹åŠ¡ï¼Œæ¯”å¦‚å½“æ“ä½œä¸ä»…ä»…æ˜¯æ•°æ®åº“æ“ä½œï¼Œè¿˜æ¶‰åŠå…¶ä»–ä¸šåŠ¡ç³»ç»Ÿçš„è®¿é—®æ“ä½œæ—¶ï¼Œè¿™æ—¶å°±åº”è¯¥è€ƒè™‘TCCäº†ã€‚</p><p><strong>åˆ†å¸ƒå¼å¼ºä¸€è‡´æ€§ï¼šä½ å¿…é¡»ç»™æˆ‘æœ€æ–°çš„æ•°æ®</strong><br>\n<strong>éš¾åº¦ï¼š</strong> äº”é¢—æ˜Ÿ<br>\n<strong>å­¦ä¹ å†…å®¹ï¼š</strong> 05è®²ã€06è®²ã€07è®²ã€08è®²ã€09è®²ã€10è®²ã€‚</p><p>å¾ˆå¤šåŒå­¦ç»å¸¸è¯¯è§£çš„ä¸€ä¸ªç‚¹ï¼Œå°±æ˜¯å°†Consensusï¼ˆå…±è¯†ï¼‰å½“æˆäº†ä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯ç§°ä¸ºPaxosã€Raftä¸ºä¸€è‡´æ€§ç®—æ³•ï¼Œå…¶å®Paxoså’ŒRaftæ˜¯å…±è¯†ç®—æ³•ã€‚è€Œä¹‹æ‰€ä»¥å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºåœ¨å¾ˆå¤šä¸­æ–‡æ–‡ç« ä¸­ï¼Œå°†Consensuså’ŒConsistencyéƒ½ç¿»è¯‘æˆäº†ä¸€è‡´æ€§ï¼Œå…¶å®è¿™æ ·æ˜¯ä¸åˆé€‚çš„ï¼Œå› ä¸ºå…±è¯†ï¼ˆConsensusï¼‰å’Œä¸€è‡´æ€§ï¼ˆConsistencyï¼‰æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚</p><ul>\n<li>å…±è¯†ï¼šå„èŠ‚ç‚¹å°±æŒ‡å®šå€¼ï¼ˆValueï¼‰è¾¾æˆå…±è¯†ï¼Œè€Œä¸”è¾¾æˆå…±è¯†åçš„å€¼ï¼Œå°±ä¸å†æ”¹å˜äº†ã€‚</li>\n<li>ä¸€è‡´æ€§ï¼šæ˜¯æŒ‡å†™æ“ä½œå®Œæˆåï¼Œèƒ½å¦ä»å„èŠ‚ç‚¹ä¸Šè¯»åˆ°æœ€æ–°å†™å…¥çš„æ•°æ®ï¼Œå¦‚æœç«‹å³èƒ½è¯»åˆ°ï¼Œå°±æ˜¯å¼ºä¸€è‡´æ€§ï¼Œå¦‚æœæœ€ç»ˆèƒ½è¯»åˆ°ï¼Œå°±æ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</li>\n</ul><p>æåˆ°å…±è¯†ç®—æ³•ï¼ŒPaxosæ˜¯ä¸€ä¸ªå¿…é¡»è¦æåŠçš„è¯é¢˜ï¼Œè€Œä¸”ZABåè®®ã€Raftç®—æ³•éƒ½å¯ä»¥çœ‹ä½œæ˜¯Paxoså˜ç§ï¼Œæ‰€ä»¥ï¼Œä½ éœ€è¦äº†è§£Paxosç®—æ³•ã€‚</p><p>ä½†å› ä¸ºPaxosç®—æ³•çš„å¯ç†è§£æ€§å’Œå¯ç¼–ç¨‹æ€§ç—›ç‚¹çªå‡ºï¼Œæ‰€ä»¥åœ¨å®é™…åœºæ™¯ä¸­ï¼Œæœ€å¸¸çš„å…±è¯†ç®—æ³•æ˜¯Raftï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºRaftå®ç°å¼ºä¸€è‡´æ€§ç³»ç»Ÿï¼ŒRaftæ˜¯éœ€è¦å½»åº•æŒæ¡çš„ï¼Œåœ¨å­¦ä¹ æ—¶ï¼Œä½ å¯ä»¥ç»“åˆ17è®²ã€18è®²ã€19è®²ã€20è®²æ¥ä¸€èµ·å­¦ä¹ ï¼Œä»å‰ä¼ ï¼ˆPaxosï¼‰åˆ°ç†è®ºï¼Œå†åˆ°å®æˆ˜ï¼Œå½»åº•åƒé€å’ŒæŒæ¡ã€‚</p><p>è€Œä¸€è‡´å“ˆå¸Œæ˜¯å¸¸ç”¨çš„å¯»å€ç®—æ³•ï¼Œèƒ½çªç ´é›†ç¾¤æ€§èƒ½çš„é¢†å¯¼è€…é™åˆ¶ï¼Œä¹Ÿæ˜¯éœ€è¦æˆ‘ä»¬æŒæ¡çš„ã€‚</p><p><strong>åˆ†å¸ƒå¼æœ€ç»ˆä¸€è‡´æ€§ï¼šæ•°æ®æ—§ç‚¹æ²¡å…³ç³»</strong><br>\n<strong>éš¾åº¦ï¼š</strong>ä¸‰é¢—æ˜Ÿ<br>\n<strong>å­¦ä¹ ææ–™ï¼š</strong> 11è®²ã€12è®²ã€‚</p><p>æ— è®ºå®ç°åˆ†å¸ƒå¼äº‹åŠ¡è¿˜æ˜¯å¼ºä¸€è‡´æ€§ï¼Œæ€§èƒ½å’Œå¯ç”¨æ€§éƒ½æ˜¯æŒ‘æˆ˜ï¼Œåœ¨ä¸€äº›å¯¹æ€§èƒ½æˆ–å¯ç”¨æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åœºæ™¯ï¼Œæ¯”å¦‚æ—¶åºæ•°æ®ã€ç»Ÿè®¡æ•°æ®ã€çŠ¶æ€æ•°æ®ï¼ˆQQç™»å½•çŠ¶æ€ï¼‰ï¼Œæœ€ç»ˆä¸€è‡´æ€§æ˜¯é¦–é€‰ï¼Œå› ä¸ºæœ€ç»ˆä¸€è‡´æ€§ç³»ç»Ÿä¸ä»…èƒ½æä¾›å‡ºè‰²çš„æ€§èƒ½ï¼Œè¿˜èƒ½å®ç°æ°´å¹³æ‰©å±•ã€‚è€ŒGossipåè®®æ˜¯å®ç°æœ€ç»ˆä¸€è‡´æ€§çš„å¸¸ç”¨æ–¹æ³•ã€‚</p><p>å¦‚æœå®ç°äº†æœ€ç»ˆä¸€è‡´æ€§ï¼Œä½†æœ‰æ—¶å¯èƒ½éœ€è¦ä¸´æ—¶æä¾›å¼ºä¸€è‡´æ€§èƒ½åŠ›ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥ç”¨Quorum NWRæ¥å®ç°ã€‚</p><p><strong>ZABåè®®ï¼šZooKeeperèƒŒåçš„ä¸€è‡´æ€§ç§˜å¯†</strong><br>\n<strong>éš¾åº¦ï¼š</strong> äºŒé¢—æ˜Ÿ<br>\n<strong>å­¦ä¹ ææ–™ï¼š</strong> 15è®²ï¼ŒåŠ é¤ | ZABåè®®ï¼ˆä¸€ï¼‰ï¼šä¸»èŠ‚ç‚¹å´©æºƒäº†ï¼Œæ€ä¹ˆåŠï¼ŸåŠ é¤ | ZABåè®®ï¼ˆäºŒï¼‰ï¼šå¦‚ä½•ä»æ•…éšœä¸­æ¢å¤ï¼ŸåŠ é¤ | ZABåè®®ï¼ˆä¸‰ï¼‰ï¼šå¦‚ä½•å¤„ç†è¯»å†™è¯·æ±‚ï¼Ÿ</p><p>ZooKeeperæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œè€Œä¸”ZABåè®®åœ¨å…±è¯†ç®—æ³•çš„å‘å±•è¿‡ç¨‹ä¸­èµ·åˆ°äº†ä¸€ä¸ªæ‰¿å‰å¯åçš„ä½œç”¨ï¼Œå®ƒå—Paxosç®—æ³•ã€åŸå­å¹¿æ’­åè®®çš„å¯å‘ï¼Œåˆå½±å“åˆ°åæ¥çš„Raftç®—æ³•ã€‚ä½†ä»å®æˆ˜çš„è§’åº¦ï¼ŒZABåè®®çš„å®ç°ï¼Œæ— æ³•å‰¥ç¦»ZooKeeperä»£ç ç‹¬ç«‹ä½¿ç”¨ï¼Œ<strong>æ‰€ä»¥è¿™éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘å»ºè®®æ—¥å¸¸ä½¿ç”¨ZooKeeperçš„åŒå­¦ä»”ç»†å­¦ä¹ ä¸€ä¸‹ï¼Œå…¶ä»–åŒå­¦çš„è¯ï¼Œå¯ä»¥é€‰å­¦ã€‚</strong></p><p><strong>æ‹œå åº­å®¹é”™ç®—æ³•ï¼šæœ‰äººä½œæ¶ï¼Œå¦‚ä½•è¾¾æˆå…±è¯†</strong><br>\n<strong>éš¾åº¦ï¼š</strong> äºŒé¢—æ˜Ÿ<br>\n<strong>å­¦ä¹ ææ–™ï¼š</strong> 13è®²ã€14è®²ï¼ŒåŠ é¤ | PBFTç®—æ³•ï¼šå¦‚ä½•æ›¿æ¢ä½œæ¶çš„é¢†å¯¼è€…ï¼Ÿ</p><p>åœ¨ä¸€ä¸ªå®Œå…¨ä¸å¯ä¿¡çš„ç¯å¢ƒä¸­ï¼ˆæ¯”å¦‚æœ‰äººä½œæ¶ï¼‰ï¼Œå¦‚æœéœ€è¦è¾¾æˆå…±è¯†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¿…é¡»è€ƒè™‘æ‹œå åº­å®¹é”™ç®—æ³•ï¼Œå¸¸ç”¨çš„æ‹œå åº­å®¹é”™ç®—æ³•æœ‰POWç®—æ³•ã€PBFTç®—æ³•ï¼Œå®ƒä»¬åœ¨åŒºå—é“¾ä¸­åº”ç”¨å¹¿æ³›ã€‚</p><p><strong>å®æˆ˜ï¼šå®è·µæ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼</strong><br>\n<strong>éš¾åº¦ï¼š</strong>å››é¢—æ˜Ÿ<br>\n<strong>å­¦ä¹ ææ–™ï¼š</strong> 16è®²ã€17è®²ã€18è®²ã€19è®²ã€20è®²ã€‚</p><p>ä½ å¯èƒ½æœ‰è¿™æ ·çš„ä½“ä¼šï¼ŒæŠ€æœ¯çš„å­¦ä¹ å¾€å¾€æ˜¯åœ¨æ¨¡ä»¿ä¸­å¼€å§‹çš„ï¼Œåœ¨å®æˆ˜ä¸­é¡¿æ‚Ÿå‡åã€‚åˆ†å¸ƒå¼ç®—æ³•çš„å­¦ä¹ ä¹Ÿä¸ä¾‹å¤–ï¼ŒæŠ€æœ¯æ˜¯éœ€è¦åœ¨å®æˆ˜ä¸­å­¦ä¹ ï¼Œä¹Ÿåªæœ‰åœ¨å®æˆ˜ä¸­ï¼Œä½ æ‰èƒ½çœŸæ­£çš„ç†è§£æŠ€æœ¯ã€‚</p><p>ä»–å±±ä¹‹çŸ³ï¼Œå¯ä»¥æ”»ç‰ï¼Œä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å®é™…åœºæ™¯ä¸­ä¸€è‡´æ€§çš„å®ç°ï¼Œæˆ‘ä¼šå‰–æInfluxDBä¼ä¸šç‰ˆçš„ä¸€è‡´æ€§å®ç°ï¼ˆå¼ºä¸€è‡´æ€§å’Œæœ€ç»ˆä¸€è‡´æ€§ä¸¤ä¸ªæ–¹æ¡ˆï¼‰ã€‚ä¹Ÿä¼šåˆ†æä¸€ä¸ªæµè¡Œçš„Raftå®ç°ï¼ˆHashicorp Raftï¼‰ï¼Œé™¤äº†åœ¨ä»£ç ä¸­ç†è§£Raftç®—æ³•ï¼Œä¹Ÿä¼šå¸¦ä½ ç†Ÿæ‚‰ä¸€ä¸‹Hashicorp Raftçš„APIæ¥å£ï¼Œæœ€ç»ˆåœ¨19ã€20è®²ï¼Œå¸¦ä½ ä½¿ç”¨APIæ¥å£å¼€å‘å®ç°è‡ªå·±çš„åˆ†å¸ƒå¼KVç³»ç»Ÿã€‚</p><p>æˆ‘å•°å—¦äº†é‚£ä¹ˆå¤šï¼Œå…¶å®å°±æ˜¯ä¸ºäº†è®©ä½ æ›´é«˜æ•ˆåœ°æŒæ¡å¸¸ç”¨çš„åˆ†å¸ƒå¼ç®—æ³•ã€‚å¦å¤–ï¼Œä¸ºäº†å¸®ä½ æ›´å¥½çš„ç†è§£ç®—æ³•çš„ç‰¹ç‚¹å’Œæ•´ä½“å­¦ä¹ çš„æ€è·¯ï¼Œæˆ‘åšäº†ä¸ªçŸ¥è¯†åœ°å›¾ï¼Œæ–¹ä¾¿ä½ æ¢³ç†æ•´ä¸ªçŸ¥è¯†ä½“ç³»ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/12/13/122bdf34957c6277352ea51c43552213.png?wh=3094*1824\" alt=\"\"></p><h2>æ€»ç»“</h2><p>ç”Ÿæœ‰æ¶¯çŸ¥æ— æ¶¯ï¼Œåªæœ‰æŠ“ä½æŠ€æœ¯æœ¬è´¨ï¼Œæ‰èƒ½ä¸¾ä¸€åä¸‰ï¼Œä»¥ä¸å˜åº”ä¸‡å˜ã€‚è€Œæœ¬è¯¾ç¨‹æˆ‘å¸¦ä½ äº†è§£çš„è¿™äº›ç®—æ³•å’Œç†è®ºï¼Œéƒ½æ˜¯æœ€ç»å…¸å’Œç»å¾—èµ·æ—¶é—´æ£€éªŒçš„ã€‚</p><p>ä½†å­¦ä¹ çš„è¿‡ç¨‹ç»ä¸ä¼šä¸€å¸†é£é¡ºï¼Œå¦‚æœä½ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­æœ‰å›°æƒ‘ã€èŒ«ç„¶ï¼Œç”šè‡³æ˜¯æ²®ä¸§ï¼Œå¸Œæœ›ä½ èƒ½å¤šç•™è¨€ï¼Œå’±ä»¬èŠä¸€èŠï¼Œä¸€èµ·æƒ³æƒ³åŠæ³•ï¼Œ<strong>è®©æˆ‘ä»¬æŠŠåˆ†å¸ƒå¼ç®—æ³•å­¦ä¹ è¿™ä»¶æ„ä¹‰éå‡¡çš„äº‹æƒ…åšæŒä¸‹å»ï¼Œä¸€èµ·æ”»å…‹åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡çš„å…³é”®éš¾é¢˜ã€‚</strong></p><p>ç°åœ¨ï¼Œå°±è®©æˆ‘ä»¬æ­£å¼å¼€å§‹åˆ†å¸ƒå¼ç®—æ³•ä¹‹æ—…å§ï¼ä¸€èµ·äº«å—æŠ€æœ¯çš„ä¹è¶£ã€‚</p>","neighbors":{"left":{"article_title":"å¼€ç¯‡è¯ | æƒ³æˆä¸ºåˆ†å¸ƒå¼é«˜æ‰‹ï¼Ÿé‚£å°±å…ˆæŠŠåè®®å’Œç®—æ³•çƒ‚ç†Ÿäºå¿ƒå§","id":195652},"right":{"article_title":"01 | æ‹œå åº­å°†å†›é—®é¢˜ï¼šæœ‰å›å¾’çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•æ‰èƒ½è¾¾æˆå…±è¯†ï¼Ÿ","id":195662}},"comments":[{"had_liked":false,"id":252126,"user_name":"å°ä½•","can_delete":false,"product_type":"c1","uid":1067516,"ip_address":"","ucode":"EFD72AB3CA2AF7","user_header":"https://static001.geekbang.org/account/avatar/00/10/49/fc/5627215c.jpg","comment_is_top":false,"comment_ctime":1602134534,"is_pvip":true,"replies":[{"id":"92160","content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥ç†è§£ä¸ºæ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œå„èŠ‚ç‚¹å¤„äºä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ï¼›æ•°æ®è®¿é—®çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥ç†è§£ä¸ºå†™æ“ä½œå®Œæˆåï¼Œèƒ½å¦è¯»å–åˆ°æœ€æ–°æ•°æ®ï¼Œå¦‚æœå†™æ“ä½œå®Œæˆåï¼Œè¯»æ“ä½œéƒ½èƒ½è¯»å–åˆ°æœ€æ–°æ•°æ®ï¼Œé‚£ä¹ˆå°±æ˜¯å¼ºä¸€è‡´æ€§ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1602226970,"ip_address":"","comment_id":252126,"utype":1}],"discussion_count":5,"race_medal":0,"score":"70321611270","product_id":100046101,"comment_content":"â€œä¸€èˆ¬è€Œè¨€ï¼Œåœ¨éœ€è¦ç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§æ—¶ï¼Œä½ å¯ä»¥è€ƒè™‘é‡‡ç”¨äºŒé˜¶æ®µæäº¤åè®®ã€TCCã€‚åœ¨éœ€è¦æ•°æ®è®¿é—®æ˜¯çš„å¼ºä¸€è‡´æ€§æ—¶ï¼Œä½ å¯è€ƒè™‘ Raft ç®—æ³•ã€‚åœ¨å¯ç”¨æ€§ä¼˜å…ˆçš„ç³»ç»Ÿï¼Œä½ å¯ä»¥é‡‡ç”¨ Gossip åè®®æ¥å®ç°æœ€ç»ˆä¸€è‡´æ€§ï¼Œå¹¶å®ç° Quorum NWR æ¥æä¾›å¼ºä¸€è‡´æ€§ã€‚â€<br>è€å¸ˆï¼Œèƒ½è§£é‡Šä¸€ä¸‹ä¸Šæ–‡ä¸­çš„éœ€è¦ç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§å’Œæ•°æ®è®¿é—®çš„ä¸€è‡´æ€§ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":506722,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥ç†è§£ä¸ºæ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œå„èŠ‚ç‚¹å¤„äºä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ï¼›æ•°æ®è®¿é—®çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥ç†è§£ä¸ºå†™æ“ä½œå®Œæˆåï¼Œèƒ½å¦è¯»å–åˆ°æœ€æ–°æ•°æ®ï¼Œå¦‚æœå†™æ“ä½œå®Œæˆåï¼Œè¯»æ“ä½œéƒ½èƒ½è¯»å–åˆ°æœ€æ–°æ•°æ®ï¼Œé‚£ä¹ˆå°±æ˜¯å¼ºä¸€è‡´æ€§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1602226970,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1219258,"avatar":"https://static001.geekbang.org/account/avatar/00/12/9a/ba/f5eb2a66.jpg","nickname":"å’•å™œç”·çˆµ-Tony","note":"","ucode":"8C841851AC767F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"discussion":{"id":552172,"discussion_content":"åŸƒé‡Œå…‹Â·å¸ƒé²å°”çš„çŒœæƒ³ å’Œ CAPå®šç†ä¸æ˜¯ä¸€å›äº‹å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645336630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":506722,"ip_address":""},"score":552172,"extra":""}]},{"author":{"id":1522824,"avatar":"https://static001.geekbang.org/account/avatar/00/17/3c/88/e83528da.jpg","nickname":"uking","note":"","ucode":"41005AC547327B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":344828,"discussion_content":"å¯¹ï¼Œè¿™ä¹ˆè§£é‡Šçš„è¯æ˜¯ä¸æ˜¯æ›´åº”è¯¥ç†è§£ä¸ºåŸå­æ€§ï¼Œæ˜¯ä¸æ˜¯è¦æ¢ä¸ªæ–¹å¼ç†è§£ä¸‹ï¼šä»¥å‰æˆ‘ä»¬æ‰€è®²çš„åŸå­æ€§æ˜¯æŒ‡å•æœºä¸­å¯¹æ•°æ®æ“ä½œçš„åŸå­æ€§ï¼Œå¯¹æ•°æ®æ›´æ–°çš„ä¸€ç»„æ“ä½œåœ¨å•æœºçš„æ•°æ®åº“ç³»ç»Ÿä¸­è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼Œè€Œè¿™é‡Œæ‰€è®²çš„æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹ï¼Œè¦ä¹ˆåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸­éƒ½æˆåŠŸï¼Œè¦ä¹ˆåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸­éƒ½å¤±è´¥","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1611581265,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1298018,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/3Mf5ickZ4gwXXM0kO04EtWY6icTswVNSg1H8bhy72b5ErNjbmKkawcneovickGfmK1OkfhfIZ2Fib77e2uLIsiaH4aw/132","nickname":"lcken","note":"","ucode":"9F7CD55370D94B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":338710,"discussion_content":"â€œç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥ç†è§£ä¸ºæ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œå„èŠ‚ç‚¹å¤„äºä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚ â€è¿™ä¸åº”è¯¥æ˜¯åŸå­æ€§å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609343101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1111985,"avatar":"https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg","nickname":"Frank","note":"","ucode":"9DADD72C193296","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":1298018,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/3Mf5ickZ4gwXXM0kO04EtWY6icTswVNSg1H8bhy72b5ErNjbmKkawcneovickGfmK1OkfhfIZ2Fib77e2uLIsiaH4aw/132","nickname":"lcken","note":"","ucode":"9F7CD55370D94B","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550418,"discussion_content":"åƒï¼Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644539866,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":338710,"ip_address":""},"score":550418,"extra":""}]}]},{"had_liked":false,"id":289720,"user_name":"èµµå­¦ä¹ ","can_delete":false,"product_type":"c1","uid":1829065,"ip_address":"","ucode":"2B660A158C4C3E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/x3cpRvAjkpyCiaibTJlvhlaE6g5XUgDYH24ZISWzZUO5mDkfW0fPJJDWnwa8V6c3FYxnVasFMTGc4xqaoWkuXXsA/132","comment_is_top":false,"comment_ctime":1619153698,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"57453728546","product_id":100046101,"comment_content":"ä¸ºä»€ä¹ˆå¤§å¤šæ•°äººéƒ½è¯´zkæ˜¯cpçš„ï¼Œæœ‰è¯´å¼ºä¸€è‡´çš„ï¼Œåˆè¯´é¡ºåºä¸€è‡´çš„ï¼Œè¿™é‡Œåˆè¯´zabæ˜¯æœ€ç»ˆä¸€è‡´çš„ï¼Œå¸Œæœ›åé¢é˜…è¯»ä¸­èƒ½æ‰¾åˆ°åˆé€‚çš„ç­”æ¡ˆï¼","like_count":13,"discussions":[{"author":{"id":1120408,"avatar":"https://static001.geekbang.org/account/avatar/00/11/18/98/6567af28.jpg","nickname":"èƒ¡é›ªæ¾","note":"","ucode":"958103BCC03C65","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384427,"discussion_content":"å¼„æ˜ç™½äº†å—ï¼Ÿæˆ‘çœ‹åˆ°ä¹Ÿå¾ˆçº³é—·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626587834,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1693576,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d7/88/7dcde249.jpg","nickname":"åº„å‘¨æ¢¦è¶","note":"","ucode":"7878ED3EB11E97","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":379006,"discussion_content":"è€å¸ˆæ€ä¹ˆä¸è§£ç­”ä¸‹å’§ ï¼Œå“ˆå“ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1623586402,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":296536,"user_name":"ç¦»å¢ƒâ€","can_delete":false,"product_type":"c1","uid":1895314,"ip_address":"","ucode":"7186EF2BEF8956","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/STqKg1kLgvRuduQfo0R2E2osYBian7XrQAjSWmOwL9nyZVhq7vyLPnlGcgvguFV4aV7ToWLFiauEMKy96KWHKBVg/132","comment_is_top":false,"comment_ctime":1623034047,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14507935935","product_id":100046101,"comment_content":"ä¹‹å‰çœ‹å…¶ä»–æ–‡ç« ï¼Œæå¾—è‡ªå·±äº‘é‡Œé›¾é‡Œçš„ï¼Œå¸Œæœ›åœ¨è¿™æ‹¨å¼€äº‘é›¾","like_count":3},{"had_liked":false,"id":245045,"user_name":"--","can_delete":false,"product_type":"c1","uid":1075167,"ip_address":"","ucode":"A262E3991E69DA","user_header":"https://static001.geekbang.org/account/avatar/00/10/67/df/8b85d0d9.jpg","comment_is_top":false,"comment_ctime":1598794124,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"10188728716","product_id":100046101,"comment_content":"æˆ‘è§‰å¾—çº¿æ€§ä¸€è‡´æ€§æœ‰ç‚¹ç»•ï¼Œæ‰€ä»¥è¡¥å……ä¸€ä¸ªçº¿æ€§ä¸€è‡´æ€§çš„è¯´æ˜ï¼šhttps:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Consistency_model#Sequential_consistency<br>çº¿æ€§ä¸€è‡´æ€§æ˜¯å±äºå¼ºä¸€è‡´æ€§çš„ï¼Œä½†æ˜¯å®ƒæ˜¯â€œç¨å¼±â€çš„å¼ºä¸€è‡´æ€§ï¼Œå› ä¸ºåœ¨ç®—æ³•ç³»ç»Ÿçš„å†…éƒ¨ï¼Œå†™æ“ä½œçš„æäº¤å¹¶ä¸æ˜¯æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ˜¯åŒæ—¶åº”ç”¨çš„ã€‚è€Œç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§ï¼Œå†™æ“ä½œçš„æäº¤æ˜¯åŒæ—¶åº”ç”¨çš„ï¼Œæ‰€ä»¥å®ƒæ˜¯â€œç¨å¼ºâ€çš„ä¸€è‡´æ€§ã€‚ä¹‹æ‰€ä»¥è¯´å®ƒä»¬éƒ½æ˜¯å¼ºä¸€è‡´çš„ï¼Œé‚£æ˜¯å› ä¸ºä¸€è‡´æ€§æ˜¯å¯¹å¤–éƒ¨ç³»ç»Ÿè®¿é—®ç®—æ³•ç³»ç»Ÿè€Œè¨€ï¼Œåªæœ‰å†™æ“ä½œæäº¤ä¹‹åï¼Œå¤–éƒ¨ç³»ç»Ÿéƒ½èƒ½è¯»å–åˆ°æœ€æ–°çš„å€¼ã€‚å¦‚æœ‰ä¸æ­£ç¡®ä¹‹å¤„ï¼Œéº»çƒ¦æŒ‡æ•™ã€‚","like_count":2,"discussions":[{"author":{"id":1075167,"avatar":"https://static001.geekbang.org/account/avatar/00/10/67/df/8b85d0d9.jpg","nickname":"--","note":"","ucode":"A262E3991E69DA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310346,"discussion_content":"æˆ‘å¯¹çº¿æ€§ä¸€è‡´æ€§çš„ç†è§£æ˜¯å†™æ“ä½œçš„æäº¤ä¸éœ€è¦æ‰€æœ‰èŠ‚ç‚¹åŒæ—¶è¿›è¡Œã€‚ä½ ä¸¾çš„ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯å¼ºä¸€è‡´çš„ï¼Œåªæœ‰æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æˆåŠŸæ‰èƒ½è¿”å›æˆåŠŸã€‚ç¬¬äºŒä¸ªä¾‹å­æ˜¯çº¿æ€§ä¸€è‡´æ€§çš„ï¼Œæ¯”å¦‚ä¸»ä»æ˜¯åŠåŒæ­¥çš„ä¸€ä¸»ä¸‰ä»ï¼Œç­‰å¾…çš„ackæ˜¯2ï¼Œé‚£ä¹ˆåªéœ€è¦ä¸¤ä¸ªä»å†™æˆåŠŸå°±è¡Œäº†ï¼Œä¸éœ€è¦ä¸‰ä¸ªéƒ½æˆåŠŸã€‚å¼ºä¸€è‡´æ¯”çº¿æ€§ä¸€è‡´æ€§è¦æ±‚é«˜è¯´çš„æ˜¯å¦‚æœä½ è¦å†™æˆåŠŸçš„è¯ï¼Œå¼ºä¸€è‡´è¦æ±‚æ‰€æœ‰éƒ½å†™æˆåŠŸï¼Œè€Œçº¿æ€§ä¸€è‡´æ€§ä¸éœ€è¦æ‰€æœ‰å†™æˆåŠŸã€‚ä½ çš„ç¬¬ä¸€ä¸ªä¾‹å­è¯´çš„ä¸€ä¸ªå¤±è´¥å°±èƒ½è¿”å›æ²¡é”™ï¼Œä½†æ˜¯æ”¯ä»˜è¿™ä»¶äº‹æ²¡æˆåŠŸå•Šã€‚å‡è®¾æ˜¯æœ‰ä¸€å°æœºå™¨å®•æœºäº†ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªä¾‹å­ä¸€ç›´éƒ½ä¸èƒ½æˆåŠŸï¼Œè€Œç¬¬äºŒä¸ªä¾‹å­å´èƒ½æˆåŠŸï¼Œæ‰€ä»¥è¯´ç¬¬äºŒä¸ªä¾‹å­çš„å¯ç”¨æ€§æ˜¯æ›´å¼ºçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601788728,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1512642,"avatar":"https://static001.geekbang.org/account/avatar/00/17/14/c2/46ebe3a0.jpg","nickname":"ä¾§è€³å€¾å¬","note":"","ucode":"5BF2A2440B54F0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":302935,"discussion_content":"æˆ‘è§‰å¾—ä½ è¯´çš„æœ‰äº›æ¨¡ç³Šï¼Œæˆ‘å¯¹äºä½ çš„è¯„è®ºçš„ç†è§£ï¼Œçº¿æ€§ä¸€è‡´æ€§ä¸­æ‰€è°“çš„çº¿æ€§æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ¯”å¦‚æ”¯ä»˜ï¼Œå‚ç›´åˆ’åˆ†ä¸ºå¤šä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ä¸€å—ä¸šåŠ¡ï¼Œä½ å®Œæˆä¸€æ¬¡æ”¯ä»˜éœ€è¦é€šè¿‡ABCDæœåŠ¡åè¿”å›ç»™ç”¨æˆ·æ”¯ä»˜å®Œæˆï¼Œè¿™å››ä¸ªæœåŠ¡çš„æ•°æ®éœ€è¦å¼ºä¸€è‡´æ€§ï¼Œå…¶ä¸­ä»»ä½•ä¸€æ–¹å¤±è´¥éƒ½ä¸ºæ”¯ä»˜å¤±è´¥ã€‚è€Œæ‰€è°“çš„ç³»ç»Ÿä¸€è‡´æ€§æ˜¯ç±»ä¼¼äºæ•°æ®åº“ä¸»ä»ï¼Œä¿®æ”¹ä¸»åº“åæ•°æ®åŒæ­¥ç»™ä»åº“ï¼Œåœ¨è¿™ä¸€æ•´ä¸ªç³»ç»Ÿå†…æ•°æ®ä¿æŒä¸€è‡´æ€§ã€‚ä»è¿™æ¥çœ‹åè€Œçº¿æ€§ä¸€è‡´æ€§å¯¹æ•°æ®å¼ºä¸€è‡´æ€§è¦æ±‚æ›´é«˜ï¼Œç³»ç»Ÿä¸€è‡´æ€§åè€Œä½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599092662,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":297506,"user_name":"åº„å‘¨æ¢¦è¶","can_delete":false,"product_type":"c1","uid":1693576,"ip_address":"","ucode":"7878ED3EB11E97","user_header":"https://static001.geekbang.org/account/avatar/00/19/d7/88/7dcde249.jpg","comment_is_top":false,"comment_ctime":1623586165,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"5918553461","product_id":100046101,"comment_content":"è€å¸ˆåˆ†å¸ƒå¼çš„è„‘è£‚é—®é¢˜ã€ç¾Šç¾¤é—®é¢˜èƒ½è®²è®²å—ï¼Ÿé¢è¯•ä¸­ç»å¸¸é—®åˆ°","like_count":1,"discussions":[{"author":{"id":1010914,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIgYQgM25OaLGNWPUg5NSrQuCrPNicHqNgB9lsJGMalNU18sibF4cdYxKPuwgVsIc1m5ha5voHrY9Lg/132","nickname":"jacoffee","note":"","ucode":"B3BFD39138400B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":569357,"discussion_content":"åŸºäºä¸ªäººçš„ç†è§£:\n1. è„‘è£‚é—®é¢˜(split-brain)ï¼Œä¸€èˆ¬æ˜¯å› leaderé€‰ä¸¾è€Œå¯¼è‡´æŸç§æƒ…å†µä¸‹é›†ç¾¤ä¸­å‡ºç°äº†ä¸¤ä¸ªleaderï¼Œæ¯”å¦‚è¯´è€çš„leaderå› ä¸ºé€šè®¯æˆ–è€…å…¶å®ƒæ•…éšœæœªå®šæ—¶ä¸ŠæŠ¥çŠ¶æ€ã€‚ä¸€èˆ¬ä¼šé€šè¿‡fencingçš„ç­–ç•¥ï¼Œæ¥æ‹’ç»è€çš„leaderæ“ä½œä»¥é¿å…æ•°æ®ä¸ä¸€ï¼Œæ¯”å¦‚è¯´HDFSä¸­ä¼šåˆ©ç”¨epoch(å¯ä»¥ç®€å•ç†è§£ä¸ºç‰ˆæœ¬å·)æ¥é¿å…è€çš„leaderå‘Journal Nodeä¸­å†™å…¥æ”¹åŠ¨ã€‚\n2. ç¾Šç¾¤æ•ˆåº”(herd effect)ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªæ¦‚å¿µæ˜¯åœ¨Zookeeperçš„leaderé€‰ä¸¾ä¸­ï¼Œå½“æœªèƒ½æˆä¸º/election/è·¯å¾„ä¸‹æœ€å°çš„ç¬æ—¶èŠ‚ç‚¹æ—¶ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç›‘å¬leader nodeå¯¹åº”çš„è·¯å¾„ï¼Œä½†å¦‚æœå®¢æˆ·ç«¯åŒæ—¶ç›‘å¬çš„è¯ï¼Œå½“leader nodeé‡Šæ”¾æˆ–è€…æ˜¯æŒ‚æ‰çš„æ—¶å€™ï¼Œå¤šä¸ªå®¢æˆ·ç«¯ä¼šåŒæ—¶æ”¶åˆ°é€šçŸ¥ï¼Œè¿™ä¸ªå°±ç§°ä¹‹ä¸ºç¾Šç¾¤æ•ˆåº”ã€‚Zookeeperçš„æ”¹è¿›æ–¹æ¡ˆæ˜¯ï¼Œæœªèƒ½æˆleaderå®¢æˆ·ç«¯ï¼Œç›‘å¬/electionè·¯å¾„ä¸‹æ¯”è‡ªå·±å°çš„znodeã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1651413370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239122,"user_name":"ONENESS2019","can_delete":false,"product_type":"c1","uid":1501620,"ip_address":"","ucode":"F8CCF2118B29D7","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/UyjYSHTkMsqodhBJlbzL01Y3tRklSQzleSRbWvwZcYdTdGiczJEJT8dbTfrmcTFicEhMIEaSaeN4zCjNP1WUG2fg/132","comment_is_top":false,"comment_ctime":1596441230,"is_pvip":false,"replies":[{"id":"97183","content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼ŒTCCæœ€ç»ˆä¸€è‡´æ€§ï¼ŒæŒ‡çš„æ˜¯ç³»ç»ŸçŠ¶æ€çš„æœ€ç»ˆä¸€è‡´ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1607849148,"ip_address":"","comment_id":239122,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5891408526","product_id":100046101,"comment_content":"åœ¨å››åº¦ç©ºé—´çš„è¡¨æ ¼ä¸­ï¼ŒTCCåº”è¯¥æ˜¯å¼ºä¸€è‡´æ€§å§ã€‚åœ¨ä¸€è‡´æ€§æ ‡é¢˜ä¸‹ï¼Œè¿˜å¼ºè°ƒäº†å¼ºä¸€è‡´æ€§çš„ä¸¤ç§ä¸ç”¨ç†è§£ã€‚å‰åæœ‰çŸ›ç›¾å‘€","like_count":1,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502989,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼ŒTCCæœ€ç»ˆä¸€è‡´æ€§ï¼ŒæŒ‡çš„æ˜¯ç³»ç»ŸçŠ¶æ€çš„æœ€ç»ˆä¸€è‡´ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607849148,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1084291,"avatar":"https://static001.geekbang.org/account/avatar/00/10/8b/83/d2afc837.jpg","nickname":"è·¯äºº","note":"","ucode":"55FF703DE772D7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":299973,"discussion_content":"tccæ˜¯æœ€ç»ˆä¸€è‡´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1597891478,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":355637,"user_name":"çºµä¸æœ½","can_delete":false,"product_type":"c1","uid":1877862,"ip_address":"å¹¿ä¸œ","ucode":"DB2CA2C46B2EF1","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLu3MgZBAyyiavX2CMF2KRib791j3bBGiaQDzuQwBF2k6AKHANV2uTAAss2vVaeC7xcSYYD8vjmibRpTQ/132","comment_is_top":false,"comment_ctime":1661580171,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1661580171","product_id":100046101,"comment_content":"ç°åœ¨ï¼Œraftè¿˜æœ‰bugå—ï¼Ÿ","like_count":0},{"had_liked":false,"id":347305,"user_name":"é€é¥","can_delete":false,"product_type":"c1","uid":1013003,"ip_address":"","ucode":"570969BCFC96EF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/0b/553d4ec4.jpg","comment_is_top":false,"comment_ctime":1653913661,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653913661","product_id":100046101,"comment_content":"è¯»äº†ä¸¤è¾¹ï¼Œè¿˜æ˜¯æœ‰ç‚¹æ‡µé€¼ï¼Œä½†æ˜¯è§‰å¾—å¾ˆæœ‰æ–™ã€‚æœŸå¾…ä¸‹ä¸ªæœˆé‡è¯»çš„æ—¶å€™èƒ½æœ‰å¾ˆæ·±å…¥çš„ç†è§£ï¼","like_count":0},{"had_liked":false,"id":325370,"user_name":"é›¶é›¶ç²","can_delete":false,"product_type":"c1","uid":2326769,"ip_address":"","ucode":"F993CC91AF3FE1","user_header":"","comment_is_top":false,"comment_ctime":1638933570,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638933570","product_id":100046101,"comment_content":"è€å¸ˆï¼Œæ˜¯å¦å¯ä»¥ç†è§£ä¸ºå¯ç”¨æ€§é«˜çš„åè®®æ€§èƒ½ä¹Ÿä¸€å®šé«˜ï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":318419,"user_name":"å®‡é£","can_delete":false,"product_type":"c1","uid":1105513,"ip_address":"","ucode":"D64C53CD189164","user_header":"https://static001.geekbang.org/account/avatar/00/10/de/69/113da382.jpg","comment_is_top":false,"comment_ctime":1635296699,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635296699","product_id":100046101,"comment_content":"æ£’æ£’çš„ï¼Œç³»ç»Ÿæ•´ç†å„ä¸ªç®—æ³•åŒºåˆ«å’Œå­¦ä¹ æ–¹æ³•ï¼Œæ”¶è´§å¤š","like_count":0},{"had_liked":false,"id":295676,"user_name":"Dearã€‚","can_delete":false,"product_type":"c1","uid":1035607,"ip_address":"","ucode":"FF9BD22F77CE8C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/57/94d49207.jpg","comment_is_top":false,"comment_ctime":1622540659,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622540659","product_id":100046101,"comment_content":"ã€ŒCAPå…³æ³¨çš„æ˜¯æ•°æ®ã€è¿™ä¸ªè¯´æ³•æˆç«‹å—","like_count":0},{"had_liked":false,"id":274418,"user_name":"é‡‘é¾Ÿ","can_delete":false,"product_type":"c1","uid":1228500,"ip_address":"","ucode":"1C7D35C8AE8D9D","user_header":"https://static001.geekbang.org/account/avatar/00/12/be/d4/ff1c1319.jpg","comment_is_top":false,"comment_ctime":1611018010,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611018010","product_id":100046101,"comment_content":"ç³»ç»ŸçŠ¶æ€ä¸€è‡´æ€§æ˜¯æŒ‡åŸå­æ€§å§","like_count":0},{"had_liked":false,"id":231987,"user_name":"å¯†ç 123456","can_delete":false,"product_type":"c1","uid":1126593,"ip_address":"","ucode":"9889463CC0EA71","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/c1/2dde6700.jpg","comment_is_top":false,"comment_ctime":1593821440,"is_pvip":false,"replies":[{"id":"86545","content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œå­¦è€Œæ—¶ä¹ ä¹‹ä¸äº¦è¯´ä¹ï¼Œæœ‰é—®é¢˜å¤šç•™è¨€ï¼Œå’±ä»¬å¤šäº¤æµã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1594742318,"ip_address":"","comment_id":231987,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593821440","product_id":100046101,"comment_content":"ğŸ˜‚ğŸ˜‚åœ¨å›å¤´çœ‹çš„æ—¶å€™ï¼Œå‘ç°è‡ªå·±åªè®°å¾—å¤§æ¦‚ã€‚æ­£å¥½å¤ä¹ ä¸‹ã€‚","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500465,"discussion_content":"åŠ ä¸€é¢—æ˜Ÿ:)ï¼Œå­¦è€Œæ—¶ä¹ ä¹‹ä¸äº¦è¯´ä¹ï¼Œæœ‰é—®é¢˜å¤šç•™è¨€ï¼Œå’±ä»¬å¤šäº¤æµã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594742318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231571,"user_name":"Geek.Kwok","can_delete":false,"product_type":"c1","uid":1043668,"ip_address":"","ucode":"80D38825D990F9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ec/d4/8f877895.jpg","comment_is_top":false,"comment_ctime":1593713148,"is_pvip":false,"replies":[{"id":"86335","content":"å­¦ä¹ ä¸­ï¼Œé‡åˆ°é—®é¢˜ï¼Œå¤šç•™è¨€äº¤æµï¼Œä¸€èµ·è§£å†³:)","user_name":"ä½œè€…å›å¤","user_name_real":"hanj4096","uid":"1642497","ctime":1594558596,"ip_address":"","comment_id":231571,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1593713148","product_id":100046101,"comment_content":"è€å¸ˆçš„æ€»ç»“å¾ˆæ£’ï¼Œç»™æˆ‘ä»¬æŒ‡æ˜äº†å­¦ä¹ å’Œå®è·µçš„æ¡†æ¶","like_count":0,"discussions":[{"author":{"id":1642497,"avatar":"https://static001.geekbang.org/account/avatar/00/19/10/01/750740a8.jpg","nickname":"hanj4096","note":"","ucode":"481047E40315AA","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500353,"discussion_content":"å­¦ä¹ ä¸­ï¼Œé‡åˆ°é—®é¢˜ï¼Œå¤šç•™è¨€äº¤æµï¼Œä¸€èµ·è§£å†³:)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594558596,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":231523,"user_name":"ä»»ç¦¹æ½¼","can_delete":false,"product_type":"c1","uid":1369245,"ip_address":"","ucode":"BFDD83CA34E202","user_header":"","comment_is_top":false,"comment_ctime":1593697643,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593697643","product_id":100046101,"comment_content":"å¿…é¡»ç»™ä¸ªèµ","like_count":0},{"had_liked":false,"id":231474,"user_name":"å®æ‚¦","can_delete":false,"product_type":"c1","uid":1901403,"ip_address":"","ucode":"68844C314FEEF8","user_header":"https://static001.geekbang.org/account/avatar/00/1d/03/5b/3cdbc9fa.jpg","comment_is_top":false,"comment_ctime":1593682564,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1593682564","product_id":100046101,"comment_content":"è€å¸ˆï¼Œè¿™ä¸ªåŠ é¤ç‚¹èµï¼","like_count":0}]}