{"id":447685,"title":"01｜基本概念：从参数的角度看视频图像","content":"<p>你好，我是李江。</p><p>从今天开始，我们会一起来学习一些视频和图像相关的技术。主要包括视频图像的基本概念、图像的缩放处理、视频压缩编码、视频打包传输以及音视频同步等相关知识。</p><p>今天，我们就从视频和图像（视频是由一帧帧图像组成的）的基础知识讲起。掌握了这些之后，我们再讨论如何对图像进行缩放、如何使缩放后的图像更加清晰，以及如何对视频进行编码压缩等就更加游刃有余了。当然了，这些话题更难，但也更有意思，希望我们能有个不错的开始！</p><h2>像素</h2><p>相信你对像素这个概念一点都不陌生。从智能手机市场大火到现在，我们经常能够听到某某最新款手机，多少多少万像素。像素越高，则图像就会越清晰，拍出来的图片就会更逼真。那像素到底是什么呢？</p><p><strong>像素是图像的基本单元，一个个像素就组成了图像。你可以认为像素就是图像中的一个点。</strong></p><p>我们来直观地看看像素是怎么组成图像的。在下面这张图中，你可以看到一个个方块，这些方块就是像素。</p><p><img src=\"https://static001.geekbang.org/resource/image/5a/ce/5aa82584e3c3ba42e40f7265a53c91ce.jpeg?wh=2472x1034\" alt=\"\"></p><p>那一张图片有多少个像素呢？要回答这个问题就需要引出另外一个非常重要的概念——分辨率。</p><h2>分辨率</h2><p>图像（或视频）的分辨率是指图像的大小或尺寸。我们一般用像素个数来表示图像的尺寸。比如说一张1920x1080的图像，前者1920指的是该图像的宽度方向上有1920个像素点，而后者1080指的是图像的高度方向上有1080个像素点。</p><!-- [[[read_end]]] --><p>视频行业常见的分辨率有QCIF（176x144）、CIF（352x288）、D1（704x576或720x576），还有我们比较熟悉的360P（640x360）、720P（1280x720）、1080P（1920x1080）、4K（3840x2160）、8K（7680x4320）等。</p><p>那么<strong>同样一张图像用不同的分辨率表示会有什么不同呢？</strong>我们可以通过以下这组图片来直观感受一下。</p><p><img src=\"https://static001.geekbang.org/resource/image/af/7e/af3ddc69e258537c348b026acb240f7e.jpg?wh=2108x832\" alt=\"\"></p><p>我们可以看到，1x1的时候我们只能看到一个像素，只有一种颜色，根本就不是我们想象中的图像了。而10x10的图像几乎都是糊的，只能看到一点点轮廓。随着图像的分辨率越来越高，图像的细节就越来越清晰。由此，我们可以总结出：</p><ol>\n<li><strong>像素就只是一个带有颜色的小块。</strong></li>\n<li><strong> 图像的分辨率越高，图像就越清晰。</strong></li>\n</ol><p>但从更加专业的角度来说，第2句话不够严谨。原始图像的话，分辨率越高确实会越清晰，但是我们看到的图像往往是经过后期处理的，比如放大缩小，或者磨皮美颜。经过处理过后的图像，尤其是放大之后的图像，分辨率很高，但是它并没有很清晰。</p><p>这是因为放大的图像是通过“插值”处理得到的，而插值的像素是使用邻近像素经过插值算法计算得到的，跟实际相机拍摄的像素是不一样的，相当于“脑补”出来的像素值。</p><p>因此，放大的图像还是会存在偏差，表现出来就是会模糊。我们会在之后的课程中来具体聊聊这个过程是怎么做的。总之，<strong>我们不能简单地认为分辨率数值越高的图像就越清晰</strong>。</p><p>刚才我们在前面还提到，像素就是一个带有颜色的小块，那这个小块到底是怎么组成的呢？这里我们就来讲讲RGB图像像素和位深的概念。</p><h2>位深</h2><p>一般来说，我们看到的彩色图像中，都有三个通道，这三个通道就是R、G、B通道。简单来说就是，彩色图像中的像素是有三个颜色值的，分别是红、绿、蓝三个值。也就是说我们看到的那个带有颜色的块其实是由R、G、B三个值组成的（有的时候还会有Alpha值，代表透明度，我们这里不展开讨论）。</p><p>通常R、G、B各占8个位，也就是一个字节。8个位能表示256种颜色值，那3个通道的话就是256的3次方个颜色值，总共是1677万种颜色。我们称这种图像是8bit图像，而这个8bit就是位深。</p><p>我们可以看到，<strong>位深越大，我们能够表示的颜色值就越多。</strong>因此，图像就可以更精确地展示你拍摄的真实世界。比如现在有10bit图像和12bit图像，8bit图像的每一个像素需要占用3x8总共24个位，3个字节，同理10bit、12bit就会占用更多。</p><p>所以，图像的位深越大，需要的存储空间就会越大，传输这张图像使用的流量就会越多。目前我们大多数情况下看到的图像以及视频还是8bit位深的。</p><h2>Stride</h2><p>接下来我们来看一个特别的概念——Stride。这个Stride不是图像本身的属性，但是视频开发者经常会碰到，也是经常会出问题的一个东西。我们团队在工作中就多次遇到过由于客户没有处理好这个东西，从而导致播放的图像出现“花屏”的情况。</p><p>Stride也可以称之为跨距，是图像存储的时候有的一个概念。<strong>它指的是图像存储时内存中每行像素所占用的空间。</strong>你可能会问，一张图像的分辨率确定了，那一行的像素值不就确定了吗？为什么还需要跨距这个东西呢？其实，为了能够快速读取一行像素，我们一般会对内存中的图像实现内存对齐，比如16字节对齐。</p><p>举个例子，我们现在有一张RGB图像，分辨率是1278x720。我们将它存储在内存当中，一行像素需要1278x3=3834个字节，3834除以16无法整除。因此，没有16字节对齐。所以如果需要对齐的话，我们需要在3834个字节后面填充6个字节，也就是3840个字节做16字节对齐，这样这幅图像的Stride就是3840了。如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/24/5e/24c1542183ce2b25116e2257c4558b5e.jpg?wh=1192x991\" alt=\"\"></p><p>这个地方你一定要注意，<strong>每读取一行数据的时候需要跳过这多余的6个字节</strong>。如果没有跳过的话，这6个字节的像素就会被我们误认为是下一行开始的2个像素（每个像素R、G、B各占1个字节，2个像素共6个字节）。那这样得到的图像就完全错了，显示出来的就是“花屏”现象，屏幕会出现一条条的斜线。</p><p>所以，不管你去读取还是渲染一张图片，还是说你将这张图片存储下来，都需要设置正确的Stride。很多时候，尤其是不规则分辨率的时候，它和图像的Width（R、G、B的话就是Width x 3）是不一样的。</p><p>有的时候即便图像的Width是一个规则的值，比如说1920或者1280等能被16整除的宽度，图像存储在内存中有可能Stride和Width（R、G、B的话就是Width x 3）也是不一样的，尤其是不同的视频解码器内部实现的不同，会导致输出的图像的Stride不一样。</p><p>所以，一定要在处理图片的时候注意这个Stride值。如果出现一条条斜线的花屏或者说解码后图像的颜色不对的情况，我们需要先确认一下这个Stride值对不对。</p><h2>帧率</h2><p>以上就是图像的基本概念，接下来我们来讲讲视频的一些基本概念。</p><p>前面我们说到，视频是由一系列图像组成的，即“连续”的一帧帧图像就可以组成视频。但事实上，视频中的图像并不是真正意义上的连续。也就是说，在1秒钟之内，图像的数量是有限的。只是当数量达到一定值之后，人的眼睛的灵敏度就察觉不出来了，看起来就是连续的视频了。</p><p>这个<strong>1秒钟内图像的数量就是帧率</strong>。据研究表明，一般帧率达到10～12帧每秒，人眼就会认为是流畅的了。当然，可能会有个体差异。</p><p>通常，我们在电影院看的电影帧率一般是24fps（帧每秒），监控行业常用25fps，而我们声网常用的帧率有15fps、24fps和30fps。你可以根据自己的使用场景来具体设定你想使用的帧率值。</p><p>选择帧率的时候还需要考虑设备处理性能的问题，尤其是实时视频通话场景。<strong>帧率高，代表着每秒钟处理的图像数量会很高，从而需要的设备性能就比较高</strong>。如果是含有多个图像处理过程，比如人脸识别、美颜等算法的时候，就更需要考虑帧率大小和设备性能的问题。同样，也要考虑带宽流量的问题。帧率越大，流量也会越多，对带宽的要求也会越高。</p><h2>码率</h2><p>我们已经知道，视频的帧率越高，1秒钟内的图像数据量就会越大。通常我们存储视频的时候需要对图像进行压缩之后再存储，否则视频会非常大。</p><p>那么压缩之后的视频我们一般如何描述它的大小呢？一般对于一个视频文件，我们直接看视频的大小就可以了。但是在实时通信或者直播的时候，视频是视频流的形式，我们怎么衡量呢？</p><p>这就涉及到我接下来要介绍的概念——码率。码率是指视频在单位时间内的数据量的大小，一般是1秒钟内的数据量，其单位一般是Kb/s或者Mb/s。通常，<strong>我们用压缩工具压缩同一个原始视频的时候，码率越高，图像的失真就会越小，视频画面就会越清晰</strong>。但同时，码率越高，存储时占用的内存空间就会越大，传输时使用的流量就会越多。</p><p>这里请你思考一个问题，同一个原始视频被压缩之后，真的是码率越高，清晰度就越高吗？</p><p>其实准确来说的话，不是。因为视频的压缩是一个非常复杂的过程，之后我们会有好几节课来讲视频压缩的知识。事实上，视频压缩之后的清晰度还跟压缩时选用的压缩算法，以及压缩时使用的压缩速度有关。压缩算法越先进，压缩率就会越高，码率自然就会越小。压缩速度越慢，压缩的时候压缩算法就会越精细，最后压缩率也会有提高，相同的清晰度码率也会更小。</p><p>所以，<strong>并不是码率越高，清晰度就会越高</strong>。</p><h2>小结</h2><p>今天我们学习了图像和视频的基础知识，都很简单但很重要，这里我为你总结了一张图帮助你记忆。</p><p><img src=\"https://static001.geekbang.org/resource/image/20/ca/20468627e2eccba12119a267c1abbcca.jpg?wh=2546x1406\" alt=\"\"></p><p>总结来说，一张图像是由像素组成的，而图像有多少像素则由分辨率来表示。在分辨率之外，存取一副图像还需要特别注意Stride这个东西，它跟分辨率中的Width是不一样的。然后，一帧帧图像组成了视频，我们将每秒中的图像数量称之为帧率。视频编码后每秒的数据量称之为码率。</p><p>这些知识点是我们之后课程的基础，随着我们不断深入学习，还会不断巩固这些概念。</p><h2>思考题</h2><p>现在请你想一想：码率是固定的，还是会变化的？如果是固定的，怎么做到呢？</p><p>这节课到这里就结束了，欢迎留言和我分享你的思考和疑惑，你也可以把今天所学分享给身边的朋友，邀请他加入探讨，共同进步。</p>","comments":[{"had_liked":false,"id":322803,"user_name":"西格玛","can_delete":false,"product_type":"c1","uid":2616564,"ip_address":"","ucode":"95DE1B8A8ACD8F","user_header":"https://static001.geekbang.org/account/avatar/00/27/ec/f4/3c569056.jpg","comment_is_top":false,"comment_ctime":1637594242,"is_pvip":false,"replies":[{"id":"117211","content":"1、一般芯片读取效率在16字节对齐时最高，芯片能一次性读取16字节的数据，16字节对齐之后可以充分利用芯片的性能，速度更快。当然并不是stride一定是16字节对齐的，有的也32字节对齐，甚至64字节对齐。<br>2、图像存储在内存中一般是个一维数组，一般我们需要一行一行像素读取，不太会一列一列读取。因此高度方向上一般不对齐。<br>3、不会花屏，但是会有多余的不是图像的部分，一般不会留着这个padding部分。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637648705,"ip_address":"","comment_id":322803,"utype":1}],"discussion_count":4,"race_medal":1,"score":"74652038274","product_id":100098901,"comment_content":"stride比较难理解，小白问几个stride的问题：<br>1.stride为什么是16字节对齐？<br>2.为什么stride是宽度16字节对齐，高度却不限制？<br>3.读取图片的时候，如果就把stride当成宽度（实际宽度小于stride），还会花屏吗？（stride大于宽度的部分我当成纯色）","like_count":18,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532578,"discussion_content":"1、一般芯片读取效率在16字节对齐时最高，芯片能一次性读取16字节的数据，16字节对齐之后可以充分利用芯片的性能，速度更快。当然并不是stride一定是16字节对齐的，有的也32字节对齐，甚至64字节对齐。\n2、图像存储在内存中一般是个一维数组，一般我们需要一行一行像素读取，不太会一列一列读取。因此高度方向上一般不对齐。\n3、不会花屏，但是会有多余的不是图像的部分，一般不会留着这个padding部分。","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1637648705,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":1191052,"avatar":"https://static001.geekbang.org/account/avatar/00/12/2c/8c/6ae8e723.jpg","nickname":"cheng","note":"","ucode":"21B17510CC7F7D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":578829,"discussion_content":"stride超过宽度的部分会在显示的时候裁剪掉吗，还是什么时候来处理掉","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657034320,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532578,"ip_address":""},"score":578829,"extra":""}]},{"author":{"id":1334142,"avatar":"https://static001.geekbang.org/account/avatar/00/14/5b/7e/b6b6a741.jpg","nickname":"魏新勇","note":"","ucode":"D1A35C82EC73FC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533447,"discussion_content":"这个stride一定是后对齐吗？有前对齐的情况吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637856699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":1,"child_discussions":[{"author":{"id":2007977,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/y0XwrXvTYD1pUk3pze1jAvOVS8zLib0aia5UvkibmfnrhMm1aqZiaicyyGicrI6EWupBoTR1KhEVHcwvFwziblaibJfibibA/132","nickname":"黄瑞峰","note":"","ucode":"D00894483AFAE3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1334142,"avatar":"https://static001.geekbang.org/account/avatar/00/14/5b/7e/b6b6a741.jpg","nickname":"魏新勇","note":"","ucode":"D1A35C82EC73FC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534132,"discussion_content":"我遇到的都是后对齐，前对其没见过","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638104815,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533447,"ip_address":""},"score":534132,"extra":""}]}]},{"had_liked":false,"id":322867,"user_name":"贾献华","can_delete":false,"product_type":"c1","uid":1065314,"ip_address":"","ucode":"4D69C026FF8D3D","user_header":"https://static001.geekbang.org/account/avatar/00/10/41/62/33520c3e.jpg","comment_is_top":false,"comment_ctime":1637637946,"is_pvip":true,"replies":[{"id":"117217","content":"是的。回答的很对。一般来说除非要求绝对固定，不然不会填充数据。毕竟浪费带宽。你的回答考虑地很全面。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637649202,"ip_address":"","comment_id":322867,"utype":1}],"discussion_count":1,"race_medal":0,"score":"61767180090","product_id":100098901,"comment_content":"码率可以是固定的，也可以是变化的。<br><br>如果是固定码率，<br>1. 编码后的码率小于固定码率，填充数据<br>2. 编码后的码率大于固定码率，丢弃细节数据，降低码率","like_count":15,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532585,"discussion_content":"是的。回答的很对。一般来说除非要求绝对固定，不然不会填充数据。毕竟浪费带宽。你的回答考虑地很全面。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637649202,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323158,"user_name":"麋鹿少年","can_delete":false,"product_type":"c1","uid":1121154,"ip_address":"","ucode":"99E9DED6B1A387","user_header":"https://static001.geekbang.org/account/avatar/00/11/1b/82/f35e1a28.jpg","comment_is_top":false,"comment_ctime":1637746060,"is_pvip":false,"replies":[{"id":"117292","content":"会详细介绍。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637816797,"ip_address":"","comment_id":323158,"utype":1}],"discussion_count":2,"race_medal":0,"score":"18817615244","product_id":100098901,"comment_content":"大佬，之后会讲讲webrtc的码率自适应吗","like_count":4,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533213,"discussion_content":"会详细介绍。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637816797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533050,"discussion_content":"会详细讲","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637762845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322783,"user_name":"_zeta","can_delete":false,"product_type":"c1","uid":1068298,"ip_address":"","ucode":"94BBEBBE33EB83","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/0a/e124ec4b.jpg","comment_is_top":false,"comment_ctime":1637585996,"is_pvip":false,"replies":[{"id":"117209","content":"看起来是在没有IDR之前就出了非IDR帧，导致第一帧解码不了。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637648329,"ip_address":"","comment_id":322783,"utype":1}],"discussion_count":5,"race_medal":0,"score":"18817455180","product_id":100098901,"comment_content":"老师讲的太好了，声网服务这么好还是因为有大神坐镇的。<br>刚开始做音视频不久，有个问题想请教，我们在iOS平台自采集后用 VideoToolBox 进行H.264编码，写入SEI时，我们自研的播放器是可以解析SEI的，但问题是用ffplay拉流会报 <br>[h264 @ 0x14786b800] nal_unit_type: 1(Coded slice of a non-IDR picture), nal_ref_idc: 1<br>[h264 @ 0x14786be00] nal_unit_type: 6(SEI), nal_ref_idc: 0B f=0&#47;0<br>[h264 @ 0x14786be00] no frame!<br>[h264 @ 0x1478f4e00] nal_unit_type: 5(IDR), nal_ref_idc: 1B f=0&#47;0<br>这种警告，目前没有解决这个问题的头绪，能否帮着解答一下。","like_count":4,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532574,"discussion_content":"看起来是在没有IDR之前就出了非IDR帧，导致第一帧解码不了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637648329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1090051,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/ywSuwVNMKNjRLPMjZmpQOQHWW2usAu8RwRIOlBHaVVU6J3xHdtibgO6FVzYkRIkV50vCr62ia4OwJp07giabiazUGA/132","nickname":"ripple","note":"","ucode":"99008FD0533F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532487,"discussion_content":"要看下自己的seitype是不是写错了，如果用5，那就得全部按5的标准来，最好用f3开始","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637629111,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":3,"child_discussions":[{"author":{"id":1068298,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/0a/e124ec4b.jpg","nickname":"_zeta","note":"","ucode":"94BBEBBE33EB83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1090051,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/ywSuwVNMKNjRLPMjZmpQOQHWW2usAu8RwRIOlBHaVVU6J3xHdtibgO6FVzYkRIkV50vCr62ia4OwJp07giabiazUGA/132","nickname":"ripple","note":"","ucode":"99008FD0533F68","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536186,"discussion_content":"能再细说说么？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638711772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532487,"ip_address":""},"score":536186,"extra":""},{"author":{"id":1068298,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/0a/e124ec4b.jpg","nickname":"_zeta","note":"","ucode":"94BBEBBE33EB83","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1090051,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/ywSuwVNMKNjRLPMjZmpQOQHWW2usAu8RwRIOlBHaVVU6J3xHdtibgO6FVzYkRIkV50vCr62ia4OwJp07giabiazUGA/132","nickname":"ripple","note":"","ucode":"99008FD0533F68","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536187,"discussion_content":"这个标准该怎么找","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638711791,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532487,"ip_address":""},"score":536187,"extra":""},{"author":{"id":1090051,"avatar":"https://wx.qlogo.cn/mmopen/vi_32/ywSuwVNMKNjRLPMjZmpQOQHWW2usAu8RwRIOlBHaVVU6J3xHdtibgO6FVzYkRIkV50vCr62ia4OwJp07giabiazUGA/132","nickname":"ripple","note":"","ucode":"99008FD0533F68","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1068298,"avatar":"https://static001.geekbang.org/account/avatar/00/10/4d/0a/e124ec4b.jpg","nickname":"_zeta","note":"","ucode":"94BBEBBE33EB83","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":536468,"discussion_content":"官方h264标准看","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638789850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":536187,"ip_address":""},"score":536468,"extra":""}]}]},{"had_liked":false,"id":323165,"user_name":"yu","can_delete":false,"product_type":"c1","uid":1138645,"ip_address":"","ucode":"56856DCC0C8387","user_header":"https://static001.geekbang.org/account/avatar/00/11/5f/d5/2fec2911.jpg","comment_is_top":false,"comment_ctime":1637747747,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"10227682339","product_id":100098901,"comment_content":"4K分辨率的文稿写错了吧，语音读的应该是对，4096×2160","like_count":1,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533048,"discussion_content":"4K有好几种分辨率","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637762694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":2}","child_discussion_number":3,"child_discussions":[{"author":{"id":2354314,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ec/8a/4de35fb7.jpg","nickname":"paradise","note":"","ucode":"1CA1101E0A3106","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":533488,"discussion_content":"4K标准分辨率就是3840*2160，至于4096*2160不是标准的4K分辨率","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637886754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533048,"ip_address":""},"score":533488,"extra":"{\"user_type\":1}"},{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":2354314,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ec/8a/4de35fb7.jpg","nickname":"paradise","note":"","ucode":"1CA1101E0A3106","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533519,"discussion_content":"不是的吧，有好几个标准的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637892432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533488,"ip_address":""},"score":533519,"extra":"{\"user_type\":2}"},{"author":{"id":1007769,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/60/99/ca957da8.jpg","nickname":"Joey","note":"","ucode":"983A3D7E75DD7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2354314,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ec/8a/4de35fb7.jpg","nickname":"paradise","note":"","ucode":"1CA1101E0A3106","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548171,"discussion_content":"这个理解不完整，4k其实就是宽或者高在4000左右，比如2k 可以是2560x1440，也可以是1920x1080","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643071944,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":533488,"ip_address":""},"score":548171,"extra":""}]}]},{"had_liked":false,"id":322924,"user_name":"DK","can_delete":false,"product_type":"c1","uid":1123993,"ip_address":"","ucode":"36ABC236DB59FD","user_header":"https://static001.geekbang.org/account/avatar/00/11/26/99/cf6e1335.jpg","comment_is_top":false,"comment_ctime":1637659291,"is_pvip":false,"replies":[{"id":"117265","content":"一般来说：<br>1、对清晰度要求高，可以选择变化的码率。<br>2、RTC场景，一般使用固定码率。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637731491,"ip_address":"","comment_id":322924,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10227593883","product_id":100098901,"comment_content":"码率可以是固定的,但是更倾向于使用变化的<br>首先我们储存视频时并不是以图片的形式进行存储,而是以图片中不同色值的变化作为一个存储的依据,在不同的时间点内,运动色值的轨迹变化量可能不同,所以最终的结果导致了不同,考虑的最优算法<br>如果不能确定色值轨迹的变化量,而是固定的存储某个位置的像素点变化,码率就是固定的","like_count":3,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532912,"discussion_content":"一般来说：\n1、对清晰度要求高，可以选择变化的码率。\n2、RTC场景，一般使用固定码率。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637731491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322876,"user_name":"Geek_00444b","can_delete":false,"product_type":"c1","uid":2851407,"ip_address":"","ucode":"36A9226ED74679","user_header":"","comment_is_top":false,"comment_ctime":1637639938,"is_pvip":false,"replies":[{"id":"117215","content":"这个思路有点像webrtc中的paced_sender的思路。但是一般来说我们还是会使用提高QP和降低QP的方式来实现码率基本恒定。提高QP画面会变模糊一些，会有可能出现马赛克，但是码率会降低。降低QP画面会变清晰。码率也会提高。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637649043,"ip_address":"","comment_id":322876,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10227574530","product_id":100098901,"comment_content":"码率可以变化也可以恒定，码率如果是固定的，可以通过一个缓冲区来暂时存储码率，从而使输出的码率恒定，但是加了缓冲区会增加时延","like_count":2,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532583,"discussion_content":"这个思路有点像webrtc中的paced_sender的思路。但是一般来说我们还是会使用提高QP和降低QP的方式来实现码率基本恒定。提高QP画面会变模糊一些，会有可能出现马赛克，但是码率会降低。降低QP画面会变清晰。码率也会提高。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637649043,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1147033,"avatar":"https://static001.geekbang.org/account/avatar/00/11/80/99/abe64707.jpg","nickname":"翻山越岭","note":"","ucode":"84DF7E880C22EC","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532684,"discussion_content":"问下QP具体指的什么？老师能讲解下","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637666369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":1,"child_discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":1147033,"avatar":"https://static001.geekbang.org/account/avatar/00/11/80/99/abe64707.jpg","nickname":"翻山越岭","note":"","ucode":"84DF7E880C22EC","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533049,"discussion_content":"量化参数，不急，后面会细讲。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637762772,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":532684,"ip_address":""},"score":533049,"extra":"{\"user_type\":2}"}]}]},{"had_liked":false,"id":322856,"user_name":"哦吼掉了","can_delete":false,"product_type":"c1","uid":1232599,"ip_address":"","ucode":"1F89B1BA1EEF52","user_header":"https://static001.geekbang.org/account/avatar/00/12/ce/d7/8168e1bf.jpg","comment_is_top":false,"comment_ctime":1637634193,"is_pvip":true,"replies":[{"id":"117214","content":"2、位深是一个像素点中某一个通道（比如R通道、G通道、B通道）的像素值的二进制位的数量。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637648853,"ip_address":"","comment_id":322856,"utype":1}],"discussion_count":2,"race_medal":0,"score":"10227568785","product_id":100098901,"comment_content":"1.图像由像素组成,有多少像素取决于分辨率,对原始图像来说分辨率和清晰度成正相关。图像以一定帧率组成视频,视频以一定的码率进行传输。<br>2.基本概念<br>位深:一幅图像中包含的二进制位的数量<br>位深越大,能够表示的颜色值就越多。RGB通道。1位深,只能表示黑白;<br>跨距:图像存储时内存中每行像素所占用的空间。为快速读取一行像素,进行内存对齐。<br>帧率:视频在单位时间内图像的数量<br>码率:视频在单位时间内的数据量的大小","like_count":2,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532581,"discussion_content":"2、位深是一个像素点中某一个通道（比如R通道、G通道、B通道）的像素值的二进制位的数量。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637648853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1004576,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/54/20/93c79f7c.jpg","nickname":"晓龙","note":"","ucode":"78CDCEBD183D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532712,"discussion_content":"位深是不是就是色域，不同的色域，位深就不同","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637671926,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325791,"user_name":"weekend","can_delete":false,"product_type":"c1","uid":2853514,"ip_address":"","ucode":"03EEAFC78B76B4","user_header":"https://static001.geekbang.org/account/avatar/00/2b/8a/8a/2aa0e992.jpg","comment_is_top":false,"comment_ctime":1639130720,"is_pvip":false,"replies":[{"id":"118424","content":"是的","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1639408476,"ip_address":"","comment_id":325791,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5934098016","product_id":100098901,"comment_content":"同一个原始视频，在同一个压缩算法和压缩速度前提下，码率越大，清晰度就越大，失真越小。<br>这样理解对吗？","like_count":1,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538467,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1639408476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":325005,"user_name":"文进","can_delete":false,"product_type":"c1","uid":2257439,"ip_address":"","ucode":"CD1B6196EBC448","user_header":"https://static001.geekbang.org/account/avatar/00/22/72/1f/9ddfeff7.jpg","comment_is_top":false,"comment_ctime":1638777380,"is_pvip":false,"replies":[{"id":"119354","content":"是的，没错","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1640313107,"ip_address":"","comment_id":325005,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5933744676","product_id":100098901,"comment_content":"老师，这样理解是否对。<br>如果每个画面的像素是固定的，相同像素，所占用空间大小一致，相同时间下，按理数据量大小&#47;单位时间，得出码率应该相同。但是即使像素相同，码率通常却是变化，是因为这里的数据量应该是转码后的数据量吧？每帧哪怕像素相同，经过不同的压缩算法，每秒得到数据量大小不同。甚至不同画面之间，相同算法，得到的数据也是不一样的，导致码率发生变化。","like_count":1,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541267,"discussion_content":"是的，没错","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640313107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323774,"user_name":"Alan","can_delete":false,"product_type":"c1","uid":1051460,"ip_address":"","ucode":"BD6733AD64F833","user_header":"https://static001.geekbang.org/account/avatar/00/10/0b/44/c59fa938.jpg","comment_is_top":false,"comment_ctime":1638156893,"is_pvip":true,"replies":[{"id":"117640","content":"实时音视频体验可以从音视频延时、卡顿、登陆成功率、出图时间、音质、画质等几个维度进行综合评估，并需要关注一下哪些厂商宣传和实际的是否是一致的，最好是能提供质量保证。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638329128,"ip_address":"","comment_id":323774,"utype":1}],"discussion_count":1,"race_medal":4,"score":"5933124189","product_id":100098901,"comment_content":"可以客观评价下，目前国内的音视频服务厂商整体指标的对比么？最近在选择更合适的音视频服务商，希望老师给个参考","like_count":1,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534993,"discussion_content":"实时音视频体验可以从音视频延时、卡顿、登陆成功率、出图时间、音质、画质等几个维度进行综合评估，并需要关注一下哪些厂商宣传和实际的是否是一致的，最好是能提供质量保证。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1638329128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":322841,"user_name":"西钾钾","can_delete":false,"product_type":"c1","uid":1097722,"ip_address":"","ucode":"0EE77083636ED9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJV27QOK57cdpdh3E4hbArCOlccdtjCyWooF9fhjeSKAMo9SN1v9RODkrZUZD4RejjbdsqU2FIeMA/132","comment_is_top":false,"comment_ctime":1637630600,"is_pvip":false,"replies":[{"id":"117216","content":"回答的很好，很厉害。但是简单背景我们还是会压缩的，只是压缩的失真很小。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637649103,"ip_address":"","comment_id":322841,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5932597896","product_id":100098901,"comment_content":"码率应该是编码器控制的既可以是固定的也可以是变化的。<br>1、变化我理解是，视频的内容不同时，就会产生变化，比如视频的背景特别简单和特别复杂这两种情况下编码出来的码率就是不一样的。<br>2、固定我理解是，比如上面同样的场景在背景简单和复杂的情况下，编码器在处理复杂背景是压缩的狠，在处理简单背景是不压缩。<br>不知道我的理解是不是对的。还希望老师解答😀","like_count":1,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532584,"discussion_content":"回答的很好，很厉害。但是简单背景我们还是会压缩的，只是压缩的失真很小。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637649103,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352212,"user_name":"idiot","can_delete":false,"product_type":"c1","uid":2526391,"ip_address":"","ucode":"D7A6E980B530B4","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/fcftgBsticCicEEkuzB0GTkHIocX62YVTSvnhR1c94sccj42lVaYXrmcZyhzUI3l9NcvuN1rXLhXt2eBrZZ0Tw7A/132","comment_is_top":false,"comment_ctime":1658458337,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1658458337","product_id":100098901,"comment_content":"视频行业的常见分辨率都是16的倍数，也就不需要填充字节，那么stride问题的实际出现场景是什么呢？","like_count":0},{"had_liked":false,"id":351445,"user_name":"平安","can_delete":false,"product_type":"c1","uid":1563344,"ip_address":"","ucode":"DBB656A939052A","user_header":"https://static001.geekbang.org/account/avatar/00/17/da/d0/75462190.jpg","comment_is_top":false,"comment_ctime":1657794525,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1657794525","product_id":100098901,"comment_content":"老师你好，Stride 的对齐方式是可以自己定义的吗？<br>如果不是随便自定义的那为什么选择 16 字节对齐而不是8字节、24字节呢；","like_count":0},{"had_liked":false,"id":347245,"user_name":"龚长华","can_delete":false,"product_type":"c1","uid":2969046,"ip_address":"","ucode":"A710129E480788","user_header":"","comment_is_top":false,"comment_ctime":1653869113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1653869113","product_id":100098901,"comment_content":"码率一般是变化的。如果码率固定， 那就通过编码过程中的码率控制来达到固定码率，但估计无法做到绝对固定码率。","like_count":0},{"had_liked":false,"id":346950,"user_name":"Geek_2e9158","can_delete":false,"product_type":"c1","uid":1098091,"ip_address":"","ucode":"1DDBD625AD5582","user_header":"https://static001.geekbang.org/account/avatar/00/10/c1/6b/54a4c862.jpg","comment_is_top":false,"comment_ctime":1653556363,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1653556363","product_id":100098901,"comment_content":"更高级的算法 是不是 一定意味着更慢的压缩速度？ 有没有 场景 是 高级的算法  同时 压缩速都也很快的？","like_count":0},{"had_liked":false,"id":342095,"user_name":"追梦小乐","can_delete":false,"product_type":"c1","uid":1035507,"ip_address":"","ucode":"82AB8A7F98389D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cc/f3/5e4b0315.jpg","comment_is_top":false,"comment_ctime":1650012337,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1650012337","product_id":100098901,"comment_content":"老师如果width是是能被16整除的宽度，为什么stride和width会不一样？ 那stride一般是怎么加上，会加多少？","like_count":0},{"had_liked":false,"id":340577,"user_name":"A君","can_delete":false,"product_type":"c1","uid":1940105,"ip_address":"","ucode":"FE96F089C2312C","user_header":"https://static001.geekbang.org/account/avatar/00/1d/9a/89/babe8b52.jpg","comment_is_top":false,"comment_ctime":1648944492,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1648944492","product_id":100098901,"comment_content":"分辨率大小决定像素点多少，位深决定像素点的内存大小，存读图像时要用stride而不是width，帧率代表每秒传输的数据量，码率表示每秒传输的压缩过的数据量。","like_count":0},{"had_liked":false,"id":324088,"user_name":"plh","can_delete":false,"product_type":"c1","uid":1031828,"ip_address":"","ucode":"D79F2B87AC3AD2","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erEHTaQDkWqEYib9iabib8rACYpSFBHTPFmgicUKaib79MB6VIxNwiajHUS8kYFEKCGOjpibf0dibhIjqhfzg/132","comment_is_top":false,"comment_ctime":1638284577,"is_pvip":false,"replies":[{"id":"117720","content":"对于播放器来说，实时码率一般是一秒钟多少帧，从编码好的码流中读取这个多帧数据，就知道总共多少字节大小了，码率就是总字节数除以一秒。对于实时发送的视频流一般你可以知道你一秒钟发送了多少字节的，那码率也就知道了。对于编码器来说它一秒钟输出多少肯定也知道，很容易算码率。对于普通人看一个视频文件的码率。可以直接用文件总大小除以总时长，但是一般视频文件里面还有音频数据，所以得到的是视频和音频的总码率，通常音频的码率相比视频小很多，可以近似认为是视频的码率。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638422819,"ip_address":"","comment_id":324088,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1638284577","product_id":100098901,"comment_content":"小白用户问个问题，码率是怎么计算出来的。","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535372,"discussion_content":"对于播放器来说，实时码率一般是一秒钟多少帧，从编码好的码流中读取这个多帧数据，就知道总共多少字节大小了，码率就是总字节数除以一秒。对于实时发送的视频流一般你可以知道你一秒钟发送了多少字节的，那码率也就知道了。对于编码器来说它一秒钟输出多少肯定也知道，很容易算码率。对于普通人看一个视频文件的码率。可以直接用文件总大小除以总时长，但是一般视频文件里面还有音频数据，所以得到的是视频和音频的总码率，通常音频的码率相比视频小很多，可以近似认为是视频的码率。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638422819,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323372,"user_name":"Geek_ba06dc","can_delete":false,"product_type":"c1","uid":2697486,"ip_address":"","ucode":"86DDBC87FC5E01","user_header":"","comment_is_top":false,"comment_ctime":1637858493,"is_pvip":true,"replies":[{"id":"117425","content":"我一般用xmind。我觉得还挺好用的。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1638016389,"ip_address":"","comment_id":323372,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637858493","product_id":100098901,"comment_content":"思维导图用什么软件u做的","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533899,"discussion_content":"我一般用xmind。我觉得还挺好用的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638016389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323031,"user_name":"ShawnL","can_delete":false,"product_type":"c1","uid":1017051,"ip_address":"","ucode":"45E24DF69F9E80","user_header":"https://static001.geekbang.org/account/avatar/00/0f/84/db/ef93601d.jpg","comment_is_top":false,"comment_ctime":1637713542,"is_pvip":false,"replies":[{"id":"117261","content":"会保持分辨率，减小码率的方式可以关注视频压缩的课程，就在下一周会更新。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637730553,"ip_address":"","comment_id":323031,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1637713542","product_id":100098901,"comment_content":"在压缩图像以后，视频里面的图片像素还能保持原来的尺寸么(e.g 1080p)? 尤其是如果为了固定码率或者减小码率的情况下，是否可以理解为视频的分辨率就要降低。","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532906,"discussion_content":"会保持分辨率，减小码率的方式可以关注视频压缩的课程，就在下一周会更新。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637730553,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323027,"user_name":"Geek_828b39","can_delete":false,"product_type":"c1","uid":2729802,"ip_address":"","ucode":"DE2A5F215A3C1E","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/D62JX0VEX0yhnWxgbiaXMUnEqdsVxc8JMxUBibVicbLSZ6zia606EG0zI9oosiceHsdiavDZGUyHzcvsEExFGxwP4mDg/132","comment_is_top":false,"comment_ctime":1637712927,"is_pvip":false,"replies":[{"id":"117260","content":"是的，笔误了，多谢兄弟指出错误。","user_name":"作者回复","user_name_real":"编辑","uid":"2744713","ctime":1637730464,"ip_address":"","comment_id":323027,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1637712927","product_id":100098901,"comment_content":"D1分辨率不是704×576或者720×576么？","like_count":0,"discussions":[{"author":{"id":2744713,"avatar":"https://static001.geekbang.org/account/avatar/00/29/e1/89/2bc80aa1.jpg","nickname":"叫什么好呢","note":"","ucode":"2A4069A23DE3B2","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":532905,"discussion_content":"是的，笔误了，多谢兄弟指出错误。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637730464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2354314,"avatar":"https://static001.geekbang.org/account/avatar/00/23/ec/8a/4de35fb7.jpg","nickname":"paradise","note":"","ucode":"1CA1101E0A3106","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533493,"discussion_content":"D1 分辨率是有P制和N制之分的，P制下逐行扫描的行高是576，N制下逐行扫描的行高是480，你说的这个分辨率是P制的，我们国家使用的是P制","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637886959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]}]}