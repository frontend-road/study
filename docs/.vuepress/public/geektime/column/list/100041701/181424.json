{"id":181424,"title":"07 | SQLæ³¨å…¥ï¼šæ˜æ˜è®¾ç½®äº†å¼ºå¯†ç ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šè¢«åˆ«äººç™»å½•ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä½•ä¸ºèˆŸã€‚</p><p>åœ¨ä¸Šä¸€è®²ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†XSSæ”»å‡»ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥ä»‹ç»å¦å¤–ä¸€ç§å¸¸è§çš„Webæ”»å‡»ï¼šSQLæ³¨å…¥ã€‚</p><p>åœ¨è®²æ­£æ–‡ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæ¡ˆä¾‹ã€‚æŸå¤©ï¼Œå½“ä½ åœ¨æŸ¥çœ‹åº”ç”¨çš„ç®¡ç†åå°æ—¶ï¼Œå‘ç°æœ‰å¾ˆå¤šå¼‚å¸¸çš„æ“ä½œã€‚æ¥ç€ï¼Œä½ å¾ˆå¿«ååº”è¿‡æ¥äº†ï¼Œè¿™åº”è¯¥æ˜¯é»‘å®¢æˆåŠŸç™»å½•äº†ç®¡ç†å‘˜è´¦æˆ·ã€‚äºæ˜¯ï¼Œä½ ç«‹åˆ»æ‰¾åˆ°ç®¡ç†å‘˜ï¼Œè´£é—®ä»–æ˜¯ä¸æ˜¯è®¾ç½®äº†å¼±å¯†ç ã€‚ç®¡ç†å‘˜å¾ˆæ— è¾œåœ°è¡¨ç¤ºï¼Œè‡ªå·±çš„å¯†ç éå¸¸å¤æ‚ï¼Œä¸å¯èƒ½æ³„éœ²ï¼Œä½†æ˜¯ä¸ºäº†å®‰å…¨èµ·è§ï¼Œä»–è¿˜æ˜¯ç«‹å³ä¿®æ”¹äº†å½“å‰çš„å¯†ç ã€‚å¥‡æ€ªçš„æ˜¯ï¼Œç¬¬äºŒå¤©ï¼Œé»‘å®¢è¿˜æ˜¯èƒ½å¤Ÿç»§ç»­ç™»å½•ç®¡ç†å‘˜è´¦å·ã€‚é—®é¢˜æ¥äº†ï¼Œé»‘å®¢ç©¶ç«Ÿæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿä½ è§‰å¾—è¿™é‡Œé¢çš„é—®é¢˜ç©¶ç«Ÿå‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿä½ å¯ä»¥å…ˆè‡ªå·±æ€è€ƒä¸€ä¸‹ï¼Œç„¶åè·Ÿç€æˆ‘å¼€å§‹ä»Šå¤©çš„å­¦ä¹ ï¼</p><h2>SQLæ³¨å…¥æ”»å‡»æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿ</h2><p>åœ¨ä¸Šä¸€è®²ä¸­ï¼Œæˆ‘ä»¬è®²äº†ï¼ŒXSSæ˜¯é»‘å®¢é€šè¿‡ç¯¡æ”¹HTMLä»£ç ï¼Œæ¥æ’å…¥å¹¶æ‰§è¡Œæ¶æ„è„šæœ¬çš„ä¸€ç§æ”»å‡»ã€‚å…¶å®ï¼ŒSQLæ³¨å…¥å’ŒXSSæ”»å‡»å¾ˆç±»ä¼¼ï¼Œéƒ½æ˜¯é»‘å®¢é€šè¿‡ç¯¡æ”¹ä»£ç é€»è¾‘å‘èµ·çš„æ”»å‡»ã€‚é‚£ä¹ˆï¼Œä¸åŒçš„ç‚¹æ˜¯ä»€ä¹ˆï¼ŸSQLæ³¨å…¥åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šå°†åº”ç”¨çš„ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚æ¯æ¬¡ç”¨æˆ·ç™»å½•æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€ä¸ªç›¸åº”çš„SQLè¯­å¥ã€‚è¿™æ—¶ï¼Œé»‘å®¢ä¼šé€šè¿‡æ„é€ ä¸€äº›æ¶æ„çš„è¾“å…¥å‚æ•°ï¼Œåœ¨åº”ç”¨æ‹¼æ¥SQLè¯­å¥çš„æ—¶å€™ï¼Œå»ç¯¡æ”¹æ­£å¸¸çš„SQLè¯­æ„ï¼Œä»è€Œæ‰§è¡Œé»‘å®¢æ‰€æ§åˆ¶çš„SQLæŸ¥è¯¢åŠŸèƒ½ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±ç›¸å½“äºé»‘å®¢â€œæ³¨å…¥â€äº†ä¸€æ®µSQLä»£ç åˆ°åº”ç”¨ä¸­ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„<strong>SQLæ³¨å…¥</strong>ã€‚</p><!-- [[[read_end]]] --><p>è¿™ä¹ˆè¯´å¯èƒ½è¿˜æ˜¯æœ‰ç‚¹ç†è®ºï¼Œä¸å¤Ÿå…·ä½“ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä»¥å‡ ä¸ªç®€å•è€Œåˆç»å…¸çš„ç¤ºä¾‹ï¼Œæ¥ç»™ä½ ä»‹ç»ä¸¤ç§ä¸»è¦çš„SQLæ³¨å…¥æ–¹å¼ã€‚</p><h3>1.ä¿®æ”¹WHEREè¯­å¥</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚ç°åœ¨æœ‰ä¸€ä¸ªç®€å•çš„ç™»å½•é¡µé¢ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥Usernameå’ŒPasswordè¿™ä¸¤ä¸ªå˜é‡æ¥å®Œæˆç™»å½•ã€‚å…·ä½“çš„Webåå°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>uName = getRequestString(&quot;username&quot;);\nuPass = getRequestString(&quot;password&quot;);\n\nsql = 'SELECT * FROM Users WHERE Username =&quot;' + uName + '&quot; AND Password =&quot;' + uPass + '&quot;'\n</code></pre><p>å½“ç”¨æˆ·æäº¤ä¸€ä¸ªè¡¨å•ï¼ˆå‡è®¾Usernameä¸ºadminï¼ŒPasswordä¸º123456ï¼‰æ—¶ï¼ŒWebå°†æ‰§è¡Œä¸‹é¢è¿™è¡Œä»£ç ï¼š</p><pre><code>SELECT * FROM Users WHERE Username =&quot;admin&quot; AND Password =&quot;123456&quot;\n</code></pre><p>ç”¨æˆ·åå¯†ç å¦‚æœæ­£ç¡®çš„è¯ï¼Œè¿™å¥SQLå°±èƒ½å¤Ÿè¿”å›å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ï¼›å¦‚æœé”™è¯¯çš„è¯ï¼Œä¸ä¼šè¿”å›ä»»ä½•ä¿¡æ¯ã€‚å› æ­¤ï¼Œåªè¦è¿”å›çš„è¡Œæ•°â‰¥1ï¼Œå°±è¯´æ˜éªŒè¯é€šè¿‡ï¼Œç”¨æˆ·å¯ä»¥æˆåŠŸç™»å½•ã€‚</p><p>æ‰€ä»¥ï¼Œå½“ç”¨æˆ·æ­£å¸¸åœ°è¾“å…¥è‡ªå·±çš„ç”¨æˆ·åå’Œå¯†ç æ—¶ï¼Œè‡ªç„¶å°±å¯ä»¥æˆåŠŸç™»å½•åº”ç”¨ã€‚é‚£é»‘å®¢æƒ³è¦åœ¨ä¸çŸ¥é“å¯†ç çš„æƒ…å†µä¸‹ç™»å½•åº”ç”¨ï¼Œä»–åˆä¼šè¾“å…¥ä»€ä¹ˆå‘¢ï¼Ÿä»–ä¼šè¾“å…¥ <strong><code>\" or \"\"=\"</code></strong>ã€‚è¿™æ—¶ï¼Œåº”ç”¨çš„æ•°æ®åº“å°±ä¼šæ‰§è¡Œä¸‹é¢è¿™è¡Œä»£ç ï¼š</p><pre><code>SELECT * FROM Users WHERE Username =&quot;&quot; AND Password =&quot;&quot; or &quot;&quot;=&quot;&quot;\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒWHEREè¯­å¥åé¢çš„åˆ¤æ–­æ˜¯é€šè¿‡orè¿›è¡Œæ‹¼æ¥çš„ï¼Œå…¶ä¸­\"\"=\"\"çš„ç»“æœæ˜¯trueã€‚é‚£ä¹ˆï¼Œå½“æœ‰ä¸€ä¸ªoræ˜¯trueçš„æ—¶å€™ï¼Œæœ€ç»ˆç»“æœå°±ä¸€å®šæ˜¯trueäº†ã€‚å› æ­¤ï¼Œè¿™ä¸ªWHEREè¯­å¥æ˜¯æ’ä¸ºçœŸçš„ï¼Œæ‰€ä»¥ï¼Œæ•°æ®åº“å°†è¿”å›å…¨éƒ¨çš„æ•°æ®ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½è§£ç­”æ–‡ç« å¼€å¤´çš„é—®é¢˜äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé»‘å®¢åªéœ€è¦åœ¨ç™»å½•é¡µé¢ä¸­è¾“å…¥ <strong><code>\" or \"\"=\"</code></strong>ï¼Œå°±å¯ä»¥åœ¨ä¸çŸ¥é“å¯†ç çš„æƒ…å†µä¸‹ï¼ŒæˆåŠŸç™»å½•åå°äº†ã€‚è€Œè¿™ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œä¸‡èƒ½å¯†ç â€ã€‚è€Œè¿™ä¸ªâ€œä¸‡èƒ½å¯†ç â€ï¼Œå…¶å®å°±æ˜¯é€šè¿‡ä¿®æ”¹WHEREè¯­å¥ï¼Œæ”¹å˜æ•°æ®åº“çš„è¿”å›ç»“æœï¼Œå®ç°æ— å¯†ç ç™»å½•ã€‚</p><h3>2.æ‰§è¡Œä»»æ„è¯­å¥</h3><p>é™¤æ­¤ä¹‹å¤–ï¼Œå¤§éƒ¨åˆ†çš„æ•°æ®åº“éƒ½æ”¯æŒå¤šè¯­å¥æ‰§è¡Œã€‚å› æ­¤ï¼Œé»‘å®¢é™¤äº†ä¿®æ”¹åŸæœ¬çš„WHEREè¯­å¥ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨åŸè¯­å¥çš„åé¢ï¼Œæ’å…¥é¢å¤–çš„SQLè¯­å¥ï¼Œæ¥å®ç°ä»»æ„çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼ŒMySQLæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®åº“ï¼Œæˆ‘ä»¬å°±ä»¥å®ƒä¸ºä¾‹ï¼Œæ¥ä»‹ç»ä¸€ä¸‹ï¼Œä»»æ„è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€‚</p><p>åœ¨MySQLä¸­ï¼Œå®ç°ä»»æ„è¯­å¥æ‰§è¡Œæœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯åˆ©ç”¨åˆ†å·å°†åŸæœ¬çš„SQLè¯­å¥è¿›è¡Œåˆ†å‰²ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸€æ¬¡æ‰§è¡Œå¤šä¸ªè¯­å¥äº†ã€‚æ¯”å¦‚ï¼Œä¸‹é¢è¿™ä¸ªè¯­å¥åœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šå…ˆæ’å…¥ä¸€ä¸ªè¡Œï¼Œç„¶åå†è¿”å›Usersè¡¨ä¸­å…¨éƒ¨çš„æ•°æ®ã€‚</p><pre><code>INSERT INTO Users (Username, Password) VALUES(&quot;test&quot;,&quot;000000&quot;); SELECT * FROM Users;\n</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚åœ¨ç”¨æˆ·å®Œæˆç™»å½•åï¼Œåº”ç”¨é€šå¸¸ä¼šé€šè¿‡userIdæ¥è·å–å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ã€‚å…¶Webåå°çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>uid = getRequestString(&quot;userId&quot;);\nsql = &quot;SELECT * FROM Users WHERE UserId = &quot; + uid;\n</code></pre><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé»‘å®¢åªè¦åœ¨ä¼ å…¥çš„userIdå‚æ•°ä¸­åŠ å…¥ä¸€ä¸ªåˆ†å·ï¼Œå°±å¯ä»¥æ‰§è¡Œä»»æ„çš„SQLè¯­å¥äº†ã€‚æ¯”å¦‚ï¼Œé»‘å®¢æƒ³â€œåˆ åº“è·‘è·¯â€çš„è¯ï¼Œå°±ä»¤userIdä¸º <strong><code>1;DROP TABLE Users</code></strong>ï¼Œé‚£ä¹ˆï¼Œåå°å®é™…æ‰§è¡Œçš„SQLå°±ä¼šå˜æˆä¸‹é¢è¿™è¡Œä»£ç ï¼Œè€Œæ•°æ®åº“ä¸­æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯å°±éƒ½ä¼šè¢«åˆ é™¤ã€‚</p><pre><code>SELECT * FROM Users WHERE UserId = 1ï¼›DROP TABLE Users\n</code></pre><p>SQLæ³¨å…¥çš„â€œå§¿åŠ¿â€è¿˜æœ‰å¾ˆå¤šï¼ˆæ¯”å¦‚ï¼š<a href=\"https://www.freebuf.com/articles/web/175049.html\">æ²¡æœ‰å›æ˜¾çš„ç›²æ³¨</a>ã€<a href=\"https://www.jianshu.com/p/1f82582452df?utm_campaign\">åŸºäºINSERTè¯­å¥çš„æ³¨å…¥</a>ç­‰ç­‰ï¼‰ï¼Œå®ƒä»¬çš„åŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡æ›´æ”¹SQLçš„è¯­ä¹‰æ¥æ‰§è¡Œé»‘å®¢è®¾å®šçš„SQLè¯­å¥ã€‚å¦‚æœä½ æœ‰å…´è¶£ï¼Œå¯ä»¥é€šè¿‡æˆ‘å‰é¢ç»™å‡ºçš„é“¾æ¥å»è¿›ä¸€æ­¥äº†è§£ã€‚</p><h2>é€šè¿‡SQLæ³¨å…¥æ”»å‡»ï¼Œé»‘å®¢èƒ½åšä»€ä¹ˆï¼Ÿ</h2><p>é€šè¿‡ä¸Šé¢å¯¹SQLæ³¨å…¥çš„ç®€å•ä»‹ç»ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼ŒSQLæ³¨å…¥ä¼šä»¤Webåå°æ‰§è¡Œéå¸¸è§„çš„SQLè¯­å¥ï¼Œä»è€Œå¯¼è‡´å„ç§å„æ ·çš„é—®é¢˜ã€‚é‚£ä¹ˆé€šè¿‡SQLæ³¨å…¥æ”»å‡»ï¼Œé»‘å®¢ç©¶ç«Ÿèƒ½å¤Ÿå¹²äº›ä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±ä¸€ä¸€æ¥çœ‹ã€‚</p><h3>1.ç»•è¿‡éªŒè¯</h3><p>åœ¨ä¸Šé¢çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»è¿‡ï¼Œ<strong><code>\" or \"\"=\"</code></strong> ä½œä¸ºä¸‡èƒ½å¯†ç ï¼Œå¯ä»¥è®©é»‘å®¢åœ¨ä¸çŸ¥é“å¯†ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ç™»å½•è®¤è¯ã€‚å› æ­¤ï¼ŒSQLæ³¨å…¥æœ€ç›´æ¥çš„åˆ©ç”¨æ–¹å¼ï¼Œå°±æ˜¯ç»•è¿‡éªŒè¯ï¼Œä¹Ÿå°±ç›¸å½“äºèº«ä»½è®¤è¯è¢«ç ´è§£äº†ã€‚</p><h3>2.ä»»æ„ç¯¡æ”¹æ•°æ®</h3><p>é™¤äº†ç»•è¿‡éªŒè¯ï¼Œæˆ‘ä»¬åœ¨ä»»æ„è¯­å¥æ‰§è¡Œçš„éƒ¨åˆ†ä¸­è®²åˆ°ï¼ŒSQLæ³¨å…¥æ¼æ´å¯¼è‡´é»‘å®¢å¯ä»¥æ‰§è¡Œä»»æ„çš„SQLè¯­å¥ã€‚å› æ­¤ï¼Œé€šè¿‡æ’å…¥DMLç±»çš„SQLè¯­å¥ï¼ˆINSERTã€UPDATEã€DELETEã€TRUNCATEã€DROPç­‰ï¼‰ï¼Œé»‘å®¢å°±å¯ä»¥å¯¹è¡¨æ•°æ®ç”šè‡³è¡¨ç»“æ„è¿›è¡Œæ›´æ”¹ï¼Œè¿™æ ·æ•°æ®çš„å®Œæ•´æ€§å°±ä¼šå—åˆ°æŸå®³ã€‚æ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­ï¼Œé»‘å®¢é€šè¿‡æ’å…¥DROP TABLE Usersï¼Œåˆ é™¤æ•°æ®åº“ä¸­å…¨éƒ¨çš„ç”¨æˆ·ã€‚</p><h3>3.çªƒå–æ•°æ®</h3><p>åœ¨XSSæ¼æ´ä¸­ï¼Œé»‘å®¢å¯ä»¥é€šè¿‡çªƒå–Cookieå’Œâ€œé’“é±¼â€è·å¾—ç”¨æˆ·çš„éšç§æ•°æ®ã€‚é‚£ä¹ˆï¼Œåœ¨SQLæ³¨å…¥ä¸­ï¼Œé»‘å®¢ä¼šæ€ä¹ˆæ¥è·å–è¿™äº›éšç§æ•°æ®å‘¢ï¼Ÿ</p><p>åœ¨å„ç±»å®‰å…¨äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°â€œæ‹–åº“â€è¿™ä¸ªè¯ã€‚æ‰€è°“â€œæ‹–åº“â€ï¼Œå°±æ˜¯æŒ‡é»‘å®¢é€šè¿‡ç±»ä¼¼SQLæ³¨å…¥çš„æ‰‹æ®µï¼Œè·å–åˆ°æ•°æ®åº“ä¸­çš„å…¨éƒ¨æ•°æ®ï¼ˆå¦‚ç”¨æˆ·åã€å¯†ç ã€æ‰‹æœºå·ç­‰éšç§æ•°æ®ï¼‰ã€‚æœ€ç®€å•çš„ï¼Œé»‘å®¢åˆ©ç”¨UNIONå…³é”®è¯ï¼Œå°†SQLè¯­å¥æ‹¼æ¥æˆä¸‹é¢è¿™è¡Œä»£ç ä¹‹åï¼Œå°±å¯ä»¥ç›´æ¥è·å–å…¨éƒ¨çš„ç”¨æˆ·ä¿¡æ¯äº†ã€‚</p><pre><code>SELECT * FROM Users WHERE UserId = 1 UNION SELECT * FROM Users\n</code></pre><h3>4.æ¶ˆè€—èµ„æº</h3><p>é€šè¿‡<a href=\"https://time.geekbang.org/column/article/176567\">ç¬¬1è®²</a>å¯¹CIAä¸‰å…ƒç»„çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œé™¤äº†è·å–æ•°æ®ä¹‹å¤–ï¼Œå½±å“æœåŠ¡å¯ç”¨æ€§ä¹Ÿæ˜¯é»‘å®¢çš„ç›®æ ‡ä¹‹ä¸€ã€‚</p><p>SQLæ³¨å…¥ç ´åå¯ç”¨æ€§ååˆ†ç®€å•ï¼Œå¯ä»¥é€šè¿‡å®Œå…¨æ¶ˆè€—æœåŠ¡å™¨çš„èµ„æºæ¥å®ç°ã€‚æ¯”å¦‚ï¼Œåœ¨Webåå°ä¸­ï¼Œé»‘å®¢å¯ä»¥åˆ©ç”¨WHILEæ‰“é€ æ­»å¾ªç¯æ“ä½œï¼Œæˆ–è€…å®šä¹‰å­˜å‚¨è¿‡ç¨‹ï¼Œè§¦å‘ä¸€ä¸ªæ— é™è¿­ä»£ç­‰ç­‰ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ•°æ®åº“æœåŠ¡å™¨å› ä¸ºCPUè¢«è¿…é€Ÿæ‰“æ»¡ï¼ŒæŒç»­100%ï¼Œè€Œæ— æ³•åŠæ—¶å“åº”å…¶ä»–è¯·æ±‚ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œé€šè¿‡SQLæ³¨å…¥æ”»å‡»ï¼Œé»‘å®¢å¯ä»¥ç»•è¿‡éªŒè¯ç™»å½•åå°ï¼Œéæ³•ç¯¡æ”¹æ•°æ®åº“ä¸­çš„æ•°æ®ï¼›è¿˜èƒ½æ‰§è¡Œä»»æ„çš„SQLè¯­å¥ï¼Œç›—å–ç”¨æˆ·çš„éšç§æ•°æ®å½±å“å…¬å¸ä¸šåŠ¡ç­‰ç­‰ã€‚æ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºï¼ŒSQLæ³¨å…¥ç›¸å½“äºè®©é»‘å®¢ç›´æ¥å’ŒæœåŠ¡ç«¯çš„æ•°æ®åº“è¿›è¡Œäº†äº¤äº’ã€‚æ­£å¦‚æˆ‘ä»¬ä¸€ç›´æ‰€è¯´çš„ï¼Œåº”ç”¨çš„æœ¬è´¨æ˜¯æ•°æ®ï¼Œé»‘å®¢æ§åˆ¶äº†æ•°æ®åº“ï¼Œä¹Ÿå°±ç›¸å½“äºæ§åˆ¶äº†æ•´ä¸ªåº”ç”¨ã€‚</p><h2>å¦‚ä½•è¿›è¡ŒSQLæ³¨å…¥é˜²æŠ¤ ï¼Ÿ</h2><p>åœ¨è®¤è¯†åˆ°SQLæ³¨å…¥çš„å±å®³ä¹‹åï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªç®€å•çš„SQLæŸ¥è¯¢é€»è¾‘ï¼Œèƒ½å¤Ÿå¸¦æ¥å·¨å¤§çš„å®‰å…¨éšæ‚£ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥åšåˆ°åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°±é¿å…å‡ºç°SQLæ³¨å…¥æ¼æ´ã€‚é‚£å…·ä½“åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šä¸ºä½ ä»‹ç»3ç§å¸¸è§çš„é˜²æŠ¤æ–¹æ³•ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼šä½¿ç”¨PreparedStatementã€ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹å’ŒéªŒè¯è¾“å…¥ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸€æ¥çœ‹ã€‚</p><h3>1.ä½¿ç”¨PreparedStatement</h3><p>é€šè¿‡<strong>åˆç†åœ°</strong>ä½¿ç”¨PreparedStatementï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿé¿å…99.99%çš„SQLæ³¨å…¥é—®é¢˜ã€‚ä½ è‚¯å®šå¾ˆå¥½å¥‡ï¼Œæˆ‘ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆè¯´ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬ä¸€èµ·çœ‹ä¸€ä¸‹å®ƒçš„å®ç°è¿‡ç¨‹ã€‚</p><p>å½“æ•°æ®åº“åœ¨å¤„ç†ä¸€ä¸ªSQLå‘½ä»¤çš„æ—¶å€™ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š</p><ul>\n<li>å°†SQLè¯­å¥è§£ææˆæ•°æ®åº“å¯ä½¿ç”¨çš„æŒ‡ä»¤é›†ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨EXPLAINå…³é”®å­—åˆ†æSQLè¯­å¥ï¼Œå°±æ˜¯å¹²çš„è¿™ä¸ªäº‹æƒ…ï¼›</li>\n<li>å°†å˜é‡ä»£å…¥æŒ‡ä»¤é›†ï¼Œå¼€å§‹å®é™…æ‰§è¡Œã€‚ä¹‹æ‰€ä»¥åœ¨æ‰¹é‡å¤„ç†SQLçš„æ—¶å€™èƒ½å¤Ÿæå‡æ€§èƒ½ï¼Œå°±æ˜¯å› ä¸ºè¿™æ ·åšé¿å…äº†é‡å¤è§£æSQLçš„è¿‡ç¨‹ã€‚</li>\n</ul><p>é‚£ä¹ˆPreparedStatementä¸ºä»€ä¹ˆèƒ½å¤Ÿé¿å…SQLæ³¨å…¥çš„é—®é¢˜å‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºï¼ŒSQLæ³¨å…¥æ˜¯åœ¨è§£æçš„è¿‡ç¨‹ä¸­ç”Ÿæ•ˆçš„ï¼Œç”¨æˆ·çš„è¾“å…¥ä¼šå½±å“SQLè§£æçš„ç»“æœã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨PreparedStatementï¼Œå°†SQLè¯­å¥çš„è§£æå’Œå®é™…æ‰§è¡Œè¿‡ç¨‹åˆ†å¼€ï¼Œåªåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä»£å…¥ç”¨æˆ·çš„æ“ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œæ— è®ºé»‘å®¢æäº¤çš„å‚æ•°æ€ä¹ˆå˜åŒ–ï¼Œæ•°æ®åº“éƒ½ä¸ä¼šå»æ‰§è¡Œé¢å¤–çš„é€»è¾‘ï¼Œä¹Ÿå°±é¿å…äº†SQLæ³¨å…¥çš„å‘ç”Ÿã€‚</p><p>åœ¨Javaä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢çš„ä»£ç å°†è§£æå’Œæ‰§è¡Œåˆ†å¼€ï¼š</p><pre><code>String sql = &quot;SELECT * FROM Users WHERE UserId = ?&quot;;\nPreparedStatement statement = connection.prepareStatement(sql);\nstatement.setInt(1, userId); \nResultSet results = statement.executeQuery();\n\n</code></pre><p>ä¸ºäº†å®ç°ç›¸ä¼¼çš„æ•ˆæœï¼Œåœ¨PHPä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨PDOï¼ˆPHP Data Objectsï¼‰ï¼›åœ¨C#ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨OleDbCommandç­‰ç­‰ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦ä½ æ³¨æ„ï¼Œå‰é¢æˆ‘ä»¬è¯´äº†ï¼Œé€šè¿‡åˆç†åœ°ä½¿ç”¨PreparedStatementå°±èƒ½è§£å†³99.99%çš„SQLæ³¨å…¥é—®é¢˜ï¼Œé‚£åˆ°åº•æ€ä¹ˆåšæ‰ç®—â€œåˆç†åœ°â€ä½¿ç”¨å‘¢ï¼Ÿ</p><p>PreparedStatementä¸ºSQLè¯­å¥çš„è§£æå’Œæ‰§è¡Œæä¾›äº†ä¸åŒçš„â€œæ–¹æ³•â€ï¼Œä½ éœ€è¦åˆ†å¼€æ¥è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ åœ¨ä½¿ç”¨PreparedStatementçš„æ—¶å€™ï¼Œè¿˜æ˜¯é€šè¿‡å­—ç¬¦ä¸²æ‹¼æ¥æ¥æ„é€ SQLè¯­å¥ï¼Œé‚£ä»ç„¶æ˜¯å°†è§£æå’Œæ‰§è¡Œæ”¾åœ¨äº†ä¸€å—ï¼Œä¹Ÿå°±ä¸ä¼šäº§ç”Ÿç›¸åº”çš„é˜²æŠ¤æ•ˆæœäº†ã€‚æˆ‘è¿™é‡Œç»™ä½ å±•ç¤ºäº†ä¸€ä¸ªé”™è¯¯æ¡ˆä¾‹ï¼Œä½ å¯ä»¥å’Œä¸Šé¢çš„ä»£ç è¿›è¡Œå¯¹æ¯”ã€‚</p><pre><code>String sql = &quot;SELECT * FROM Users WHERE UserId = &quot; + userId;\nPreparedStatement statement = connection.prepareStatement(sql);\nResultSet results = statement.executeQuery();\n</code></pre><h3>2.ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¯´ä¸€è¯´ï¼Œå¦‚ä½•ä½¿ç”¨<a href=\"https://baike.baidu.com/item/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1240317?fr=aladdin\">å­˜å‚¨è¿‡ç¨‹</a>æ¥é˜²æ­¢SQLæ³¨å…¥ã€‚å®é™…ä¸Šï¼Œå®ƒçš„åŸç†å’Œä½¿ç”¨PreparedStatementç±»ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡å°†SQLè¯­å¥çš„è§£æå’Œæ‰§è¡Œè¿‡ç¨‹åˆ†å¼€ï¼Œæ¥å®ç°é˜²æŠ¤ã€‚åŒºåˆ«åœ¨äºï¼Œå­˜å‚¨è¿‡ç¨‹é˜²æ³¨å…¥æ˜¯å°†è§£æSQLçš„è¿‡ç¨‹ï¼Œç”±æ•°æ®åº“é©±åŠ¨è½¬ç§»åˆ°äº†æ•°æ®åº“æœ¬èº«ã€‚</p><p>è¿˜æ˜¯ä¸Šè¿°çš„ä¾‹å­ï¼Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å®ç°ï¼š</p><pre><code>delimiter $$ã€€ã€€#å°†è¯­å¥çš„ç»“æŸç¬¦å·ä»åˆ†å·;ä¸´æ—¶æ”¹ä¸ºä¸¤ä¸ª$$(å¯ä»¥æ˜¯è‡ªå®šä¹‰)\nCREATE PROCEDURE select_user(IN p_id INTEGER)\nBEGIN\nã€€ SELECT * FROM Users WHERE UserId = p_id;\nEND$$ \ndelimiter;ã€€ã€€#å°†è¯­å¥çš„ç»“æŸç¬¦å·æ¢å¤ä¸ºåˆ†å·\n\ncall select_user(1);\n</code></pre><h3>3.éªŒè¯è¾“å…¥</h3><p>åœ¨ä¸Šä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬è®²è¿‡ï¼Œ<strong>é˜²æŠ¤çš„æ ¸å¿ƒåŸåˆ™æ˜¯ï¼Œä¸€åˆ‡ç”¨æˆ·è¾“å…¥çš†ä¸å¯ä¿¡</strong>ã€‚å› æ­¤ï¼ŒSQLæ³¨å…¥çš„é˜²æŠ¤æ‰‹æ®µå’ŒXSSå…¶å®ä¹Ÿæ˜¯ç›¸é€šçš„ï¼Œä¸»è¦çš„ä¸åŒåœ¨äºï¼š</p><ul>\n<li>SQLæ³¨å…¥çš„æ”»å‡»å‘ç”Ÿåœ¨è¾“å…¥çš„æ—¶å€™ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åªèƒ½åœ¨è¾“å…¥çš„æ—¶å€™å»è¿›è¡Œé˜²æŠ¤å’ŒéªŒè¯ï¼›</li>\n<li>å¤§éƒ¨åˆ†æ•°æ®åº“ä¸æä¾›é’ˆå¯¹SQLçš„ç¼–ç ï¼Œå› ä¸ºé‚£ä¼šæ”¹å˜åŸæœ‰çš„è¯­æ„ï¼Œæ‰€ä»¥SQLæ³¨å…¥æ²¡æœ‰ç¼–ç çš„ä¿æŠ¤æ–¹æ¡ˆã€‚</li>\n</ul><p>å› æ­¤ï¼Œå¯¹æ‰€æœ‰è¾“å…¥è¿›è¡ŒéªŒè¯æˆ–è€…è¿‡æ»¤æ“ä½œï¼Œèƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…SQLæ³¨å…¥çš„å‡ºç°ã€‚æ¯”å¦‚ï¼Œåœ¨é€šè¿‡userIdè·å–Usersç›¸å…³ä¿¡æ¯çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®è®¤userIdå¿…ç„¶æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹userIdå‚æ•°ï¼Œè¿›è¡Œä¸€ä¸ªæ•´å‹è½¬åŒ–ï¼ˆæ¯”å¦‚ï¼ŒJavaä¸­çš„Integer.parseIntï¼ŒPHPçš„intvalï¼‰ï¼Œå°±å¯ä»¥å®ç°é˜²æŠ¤äº†ã€‚</p><p>å½“ç„¶ï¼Œéƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œç”¨æˆ·è¾“å…¥çš„å‚æ•°ä¼šæ¯”è¾ƒå¤æ‚ã€‚æˆ‘ä»¬ä»¥ç”¨æˆ·å‘å‡ºçš„è¯„è®ºä¸ºä¾‹ï¼Œå…¶å†…å®¹å®Œå…¨ç”±ç”¨æˆ·å®šä¹‰ï¼Œåº”ç”¨æ— æ³•é¢„åˆ¤å®ƒçš„æ ¼å¼ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ç”¨åªèƒ½é€šè¿‡å¯¹éƒ¨åˆ†å…³é”®å­—ç¬¦è¿›è¡Œè¿‡æ»¤ï¼Œæ¥é¿å…SQLæ³¨å…¥çš„å‘ç”Ÿã€‚æ¯”å¦‚ï¼Œåœ¨MySQLä¸­ï¼Œéœ€è¦æ³¨æ„çš„å…³é”®è¯æœ‰\"  %  â€™  \\  _ã€‚</p><p>è¿™é‡Œæˆ‘ç®€å•åœ°æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨å®é™…ä½¿ç”¨è¿™äº›é˜²æŠ¤æ–¹æ³•æ—¶çš„æ³¨æ„ç‚¹ã€‚å¯¹äºéªŒè¯è¾“å…¥æ¥è¯´ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚åœºæ™¯ä¸‹çš„éªŒè¯è¾“å…¥æªæ–½ï¼Œå…¶é˜²æŠ¤æ•ˆæœæ˜¯æœ€å¼±çš„ã€‚å› æ­¤ï¼Œé¿å…SQLæ³¨å…¥çš„é˜²æŠ¤æ–¹æ³•ï¼Œé¦–è¦é€‰æ‹©ä»ç„¶æ˜¯PreparedStatementæˆ–è€…å­˜å‚¨è¿‡ç¨‹ã€‚</p><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œè¿™ä¸€èŠ‚å†…å®¹å·®ä¸å¤šäº†ï¼Œä¸‹é¢æˆ‘æ¥å¸¦ä½ æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ è¦æŒæ¡çš„é‡ç‚¹å†…å®¹ã€‚</p><p>SQLæ³¨å…¥å°±æ˜¯é»‘å®¢é€šè¿‡ç›¸å…³æ¼æ´ï¼Œç¯¡æ”¹SQLè¯­å¥çš„æ”»å‡»ã€‚é€šè¿‡SQLæ³¨å…¥ï¼Œé»‘å®¢æ—¢å¯ä»¥å½±å“æ­£å¸¸çš„SQLæ‰§è¡Œç»“æœï¼Œä»è€Œç»•è¿‡éªŒè¯ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œé¢å¤–çš„SQLè¯­å¥ï¼Œå¯¹æ•°æ®çš„æœºå¯†æ€§ã€å®Œæ•´æ€§å’Œå¯ç”¨æ€§éƒ½äº§ç”Ÿå½±å“ã€‚</p><p>ä¸ºäº†é¿å…SQLæ³¨å…¥çš„å‡ºç°ï¼Œæˆ‘ä»¬éœ€è¦æ­£ç¡®åœ°ä½¿ç”¨PreparedStatementæ–¹æ³•æˆ–è€…å­˜å‚¨è¿‡ç¨‹ï¼Œå°½é‡é¿å…åœ¨SQLè¯­å¥ä¸­å‡ºç°å­—ç¬¦ä¸²æ‹¼æ¥çš„æ“ä½œã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒSQLæ³¨å…¥çš„é˜²æŠ¤ä¹Ÿå¯ä»¥å’ŒXSSä¸€æ ·ï¼Œå¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡ŒéªŒè¯ã€æ£€æµ‹å¹¶è¿‡æ»¤SQLä¸­çš„å…³é”®è¯ï¼Œä»è€Œé¿å…åŸæœ‰è¯­å¥è¢«ç¯¡æ”¹ã€‚</p><p>ä»Šå¤©çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œä¸ºäº†æ–¹ä¾¿ä½ è®°å¿†ï¼Œæˆ‘æ€»ç»“äº†ä¸€ä¸ªçŸ¥è¯†è„‘å›¾ï¼Œä½ å¯ä»¥é€šè¿‡å®ƒæ¥å¯¹ä»Šå¤©çš„é‡ç‚¹å†…å®¹è¿›è¡Œå¤ä¹ å·©å›ºã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/1b/36/1b898391a3a04a764d0442d8481c4236.jpg?wh=1142*802\" alt=\"\"></p><h2>æ€è€ƒé¢˜</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹å·®ä¸å¤šäº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€é“æ€è€ƒé¢˜ã€‚</p><p>å‡è®¾æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªè¯­å¥ï¼š</p><pre><code>SELECT Username FROM Users WHERE UserId = 1\n</code></pre><p>ä½ ç°åœ¨å·²ç»çŸ¥é“ï¼ŒWHEREè¯­å¥ä¸­å­˜åœ¨äº†SQLæ³¨å…¥çš„ç‚¹ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆæ‰èƒ½è·å–åˆ°é™¤äº†Usernameä¹‹å¤–çš„å…¶ä»–å­—æ®µå‘¢ï¼Ÿè¿™é‡Œæˆ‘ç»™ä½ ä¸€ä¸ªå°æç¤ºï¼Œä½ å¯ä»¥å…ˆäº†è§£ä¸€ä¸‹â€œ<a href=\"https://www.freebuf.com/articles/web/175049.html\">ç›²æ³¨</a>â€è¿™ä¸ªæ¦‚å¿µï¼Œä¹‹åå†æ¥æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„æ€è€ƒå’Œç–‘æƒ‘ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚æˆ‘ä»¬ä¸‹ä¸€è®²å†è§ï¼</p>","neighbors":{"left":{"article_title":"06 | XSSï¼šå½“ä½ â€œè¢«å‘é€â€äº†ä¸€æ¡å¾®åšæ—¶ï¼Œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ","id":179592},"right":{"article_title":"08 | CSRF/SSRFï¼šä¸ºä»€ä¹ˆé¿å…äº†XSSï¼Œè¿˜æ˜¯â€œè¢«å‘é€â€äº†ä¸€æ¡å¾®åšï¼Ÿ","id":182074}},"comments":[{"had_liked":false,"id":164777,"user_name":"è±†è±†","can_delete":false,"product_type":"c1","uid":1187545,"ip_address":"","ucode":"F38848C82F7520","user_header":"https://static001.geekbang.org/account/avatar/00/12/1e/d9/cb12e020.jpg","comment_is_top":false,"comment_ctime":1577090000,"is_pvip":false,"replies":[{"id":"62831","content":"èµï¼Œæ˜¯è¿™ä¹ˆä¸ªåŸç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577108697,"ip_address":"","comment_id":164777,"utype":1}],"discussion_count":1,"race_medal":0,"score":"181965716432","product_id":100041701,"comment_content":"ä¹‹å‰åªæ˜¯çŸ¥é“äº›ç®€å•çš„ SQL æ³¨å…¥æ–¹å¼ä»¥åŠé˜²èŒƒæªæ–½ï¼Œä»Šå¤©æ–‡æœ«çš„ç›²æ³¨ç¡®å®æ¶¨äº†çŸ¥è¯†ï¼Œå…³äºæ€è€ƒé¢˜è‡ªå·±åšäº†å¦‚ä¸‹çš„ç»ƒä¹ ã€‚<br><br>é¦–å…ˆç›²æ³¨åº”è¯¥ä¹Ÿæ˜¯é€šè¿‡ web ç«¯çš„è¾“å…¥æ¥å®ç°é»‘å®¢çš„å…¥ä¾µç›®çš„çš„ï¼Œé‚£ä¹ˆé»‘å®¢å°±å¯ä»¥é€šè¿‡è§‚å¯Ÿé¡µé¢çš„ååº”æ¥åŠ¨æ€ä¿®æ”¹è‡ªå·±çš„æ³¨å…¥å‚æ•°ã€‚æ¯”å¦‚ä¸€äº›æäº¤è¾“å…¥æ¡†ï¼Œå½“æˆ‘ä»¬æäº¤äº†å‚æ•°ä¹‹åé¡µé¢ååº”æ­£å¸¸é‚£ä¹ˆå°±è¯´æ˜æˆ‘ä»¬çš„çŒœæµ‹æ˜¯æ­£ç¡®çš„ï¼Œå¦åˆ™ç»§ç»­çŒœã€‚<br><br>æˆ‘ä»¬éƒ½çŸ¥é“ MySQL å†…éƒ¨æœ‰ä¸€ä¸ª information_schema çš„åº“ï¼Œé‡Œé¢éƒ½æ˜¯æ•°æ®è£¤çš„å…ƒä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªåº“è¿›è¡ŒçŒœæµ‹ï¼Œé€šè¿‡è§‚å¯Ÿé¡µé¢çš„ååº”æ¥éªŒè¯è‡ªå·±çš„çŒœæµ‹æ˜¯å¦æ­£ç¡®ã€‚<br><br>ç¬¬ä¸€æ­¥æˆ‘ä»¬è¦çŸ¥é“æ•°æ®çš„åå­—ï¼Œé‚£ä¹ˆå°±å…ˆçŒœæµ‹å…¶é•¿åº¦ã€‚ä»¥ä¸‹æˆ‘ä»¬ä¼šç”¨åˆ° DATABASE(), LENGTH(), SUBSTRING(), ASCII() å››ä¸ªå†…ç½®å‡½æ•°ã€‚<br><br>1. ç¡®å®šæ•°æ®åº“é•¿åº¦<br><br>SELECT name FROM user WHERE id = 1 AND (SELECT LENGTH(DATABASE()) = 4);<br><br>å¾—åˆ°æ•°æ®åº“é•¿åº¦ä¹‹åçŒœæµ‹æ•°æ®åº“åå­—çš„æ¯ä¸ªå­—æ¯ã€‚<br><br>2. ç¡®å®šæ•°æ®åº“åå­— é€šè¿‡ ASCII ç æ–¹å¼<br><br>SELECT name FROM user WHERE id = 1 AND (SELECT ASCII(SUBSTRING(DATABASE(), 1, 1)) &lt; 128); <br><br>æ ¹æ® ASCII ç çŒœæµ‹æ˜¯å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•æ¥çŒœæµ‹ã€‚å‡è®¾çš„åˆ°çš„ç»“æœæ˜¯ testã€‚<br><br>å¾—åˆ°æ•°æ®åº“åå­—ä¹‹åï¼ŒçŒœæµ‹ user è¡¨æœ‰å¤šå°‘ä¸ªåˆ—ã€‚<br><br>3. è·å–è¯¥è¡¨æœ‰å¤šå°‘åˆ—<br><br>SELECT name FROM user WHERE id = 1 AND ((SELECT COUNT(*) FROM information_schema.COLUMNS WHERE table_name = &#39;user&#39; AND TABLE_SCHEMA = &#39;test&#39;) = 3);<br><br>è·å–åˆ°åˆ—çš„å¤šå°‘åˆ—ä¹‹åï¼Œå°±å¯ä»¥è·å–åˆ°æ¯ä¸€åˆ—çš„é•¿åº¦äº†ã€‚<br><br>4. è·å–åˆ—é•¿<br>SELECT name FROM user WHERE id = 1  AND ((SELECT LENGTH(column_name) FROM information_schema.COLUMNS WHERE table_name = &#39;user&#39; AND TABLE_SCHEMA = &#39;test&#39; LIMIT 0, 1) = 2);<br><br><br>æœ€åï¼Œè·å–æ¯ä¸€åˆ—çš„å…·ä½“å€¼ã€‚<br><br>5. è·å–åˆ—åï¼ŒåŒæ ·æ˜¯ä½¿ç”¨ ASCII ç æ–¹å¼<br>SELECT name FROM user WHERE id = 1  AND ((SELECT ASCII(SUBSTRING(column_name, 1, 1)) FROM information_schema.COLUMNS WHERE table_name = &#39;user&#39; AND TABLE_SCHEMA = &#39;test&#39; LIMIT 0, 1) &lt; 120)<br><br>ä¸ºäº†æ•…äº‹çš„é¡ºåˆ©å‘å±•è¿™é‡Œæˆ‘å‡è®¾æˆ‘ä»¬å·²çŸ¥è¡¨å userï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ ¹æ®åŒæ ·çš„é€»è¾‘ä» information_schema.TABLES è¡¨ä¸­è·å– test åº“çš„æ‰€æœ‰è¡¨ä¿¡æ¯ã€‚<br><br>æœ€åï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸ªæ–¹å¼æœ‰ç‚¹å‚»å•Šï¼Œå› ä¸ºå®ƒä¾èµ–ä¸€äº›å¾ˆç‰¹å®šçš„æ¡ä»¶ï¼Œæ¯”å¦‚åç«¯æ²¡æœ‰åš SQL æ³¨å…¥çš„é˜²æŠ¤ï¼Œè€Œä¸”è¿˜å¿…é¡»ç»“åˆå‰ç«¯é¡µé¢çš„ååº”ã€‚","like_count":43,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478891,"discussion_content":"èµï¼Œæ˜¯è¿™ä¹ˆä¸ªåŸç†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577108697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164932,"user_name":"å°æ™å­","can_delete":false,"product_type":"c1","uid":1132337,"ip_address":"","ucode":"3AAA6FB5ACB6AE","user_header":"https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg","comment_is_top":false,"comment_ctime":1577113393,"is_pvip":false,"replies":[{"id":"62856","content":"èµï½","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577143648,"ip_address":"","comment_id":164932,"utype":1}],"discussion_count":1,"race_medal":0,"score":"31641884465","product_id":100041701,"comment_content":"ç ”ç©¶äº†ä¸‹ç›²æ³¨çš„æ–‡ç« ï¼Œé•¿è§è¯†äº†ï¼Œä»¥å‰åªæ˜¯å¤§æ¦‚çŸ¥é“sqlæ³¨å…¥ï¼ŒçŸ¥é“æœ€ç®€å•çš„æ–¹å¼ï¼Œç›²æ³¨è¿™ç§æ–¹æ³•è¿˜æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œé’ˆå¯¹è¿™ä¸ªæ€è€ƒé¢˜ï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è·å–å…¶ä»–å­—æ®µï¼Œæ€è·¯å¦‚ä¸‹ï¼Œå¯ä»¥å†™è„šæœ¬å®ç°ï¼Œè¿˜æœ‰å‰ææ˜¯èƒ½å¤Ÿè¿›è¡Œç›²æ³¨ï¼Œ<br>1. å…ˆåˆ¤æ–­å­—æ®µçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦åœ¨a-zä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œ<br><br>select Username from Users where UserId = 1 and 1 = (select 1 from information_schema.columns WHERE table_name=&#39;Usersâ€™ and COLUMN_NAME REGEXP &#39;^[a-z]&#39;)<br>å¦‚æœç»“æœæ˜¾ç¤ºUsernameé‚£å°±è¯´æ˜å­—æ®µçš„ç¬¬ä¸€ä¸ªå­—ç¬¦åœ¨aåˆ°zä¸­ï¼Œ<br><br>2. ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•åœ¨aåˆ°zä¹‹é—´æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚ä¸‹è¯­å¥ï¼Œ<br><br>select Username from Users where UserId = 1 and 1 = (select 1 from information_schema.columns WHERE table_name=&#39;Usersâ€™ and COLUMN_NAME REGEXP &#39;^a[a-z]&#39;)<br><br>å¦‚æœèƒ½æ˜¾ç¤ºUsernameï¼Œé‚£ä¹ˆå°±è¯´æ˜aæ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå†ä¾æ¬¡å»æŸ¥ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œåä¹‹ï¼Œæ¢ä¸€ä¸ªå­—ç¬¦å†è¯•ã€‚<br><br>3. ä»¥æ­¤ç±»æ¨ï¼Œå¯ä»¥æ‰¾åˆ°æ‰€æœ‰çš„å­—æ®µåã€‚<br><br>é¡ºä¾¿è¯´ä¸‹ï¼Œå­—æ®µåä¸­å¯èƒ½åŒ…å«å…¶ä»–å­—ç¬¦ï¼Œå¦‚ _ ç­‰ï¼Œå¯ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­åŒæ ·å»åŒ¹é…ã€‚<br><br>","like_count":8,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478956,"discussion_content":"èµï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577143648,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":165011,"user_name":"sober","can_delete":false,"product_type":"c1","uid":1134921,"ip_address":"","ucode":"B2D5723AA0E82B","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/49/01cebe31.jpg","comment_is_top":false,"comment_ctime":1577147492,"is_pvip":false,"replies":[{"id":"63255","content":"è¿™å—åœ¨å‰é¢çš„åŠ å¯†å’Œè®¤è¯åº”è¯¥æœ‰æ¶‰åŠï¼Œè¿˜æœ‰å“ªäº›é—®é¢˜ï¼Œå¯ä»¥å…·ä½“ç•™è¨€æ²Ÿé€šä¸€ä¸‹ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577346878,"ip_address":"","comment_id":165011,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10167082084","product_id":100041701,"comment_content":"å¸Œæœ›è€å¸ˆèƒ½æŠ½å‡ºä¸€èŠ‚è®²è®²ç™»å½•å®æˆ˜ï¼Œæƒ³çœŸæ­£äº†è§£ä¸€ä¸‹æ•´ä¸ªç™»å½•å¦‚ä½•åº”ç”¨åŠ å¯†ï¼Œè°¢è°¢è€å¸ˆäº†","like_count":2,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478982,"discussion_content":"è¿™å—åœ¨å‰é¢çš„åŠ å¯†å’Œè®¤è¯åº”è¯¥æœ‰æ¶‰åŠï¼Œè¿˜æœ‰å“ªäº›é—®é¢˜ï¼Œå¯ä»¥å…·ä½“ç•™è¨€æ²Ÿé€šä¸€ä¸‹ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577346878,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":298822,"user_name":"äºšæ—","can_delete":false,"product_type":"c1","uid":1018972,"ip_address":"","ucode":"4A5A6D24314B79","user_header":"https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg","comment_is_top":false,"comment_ctime":1624337624,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5919304920","product_id":100041701,"comment_content":"OWASPçš„ Enterprise Security API Javaåº“å¥½åƒå¯ä»¥æå®šè¿™äº›é—®é¢˜","like_count":1},{"had_liked":false,"id":167420,"user_name":"å°è€é¼ ","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1577788957,"is_pvip":false,"replies":[{"id":"65027","content":"å¦‚æœä½¿ç”¨äº†ormçš„è¯ï¼Œç¡®å®ä¸ä¼šå‡ºç°ã€‚ä½†å¦‚æœè¿˜æ˜¯è‡ªå·±å†™sqlçš„è¯ï¼Œå…¶å®è¿˜æ˜¯å¾ˆæ™®éçš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577853168,"ip_address":"","comment_id":167420,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5872756253","product_id":100041701,"comment_content":"ç°åœ¨SQLæ³¨å…¥ä¸å¸¸è§äº†å§ï¼Œç°åœ¨çš„å¼€å‘æ¡†æ¶éƒ½å¯é¿å…SQLæ³¨å…¥äº†å§ã€‚æ¯”å¦‚åŸºäºpythonçš„Djangoã€‚","like_count":1,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479857,"discussion_content":"å¦‚æœä½¿ç”¨äº†ormçš„è¯ï¼Œç¡®å®ä¸ä¼šå‡ºç°ã€‚ä½†å¦‚æœè¿˜æ˜¯è‡ªå·±å†™sqlçš„è¯ï¼Œå…¶å®è¿˜æ˜¯å¾ˆæ™®éçš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577853168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1257460,"avatar":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","nickname":"å°è€é¼ ","note":"","ucode":"C663A0C863A515","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":113832,"discussion_content":"ormæ˜¯ä»€ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577935238,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":279616,"user_name":"é™ˆå¯èˆª","can_delete":false,"product_type":"c1","uid":2177436,"ip_address":"","ucode":"89246B9BFD3269","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/ajNVdqHZLLC4IhKmJDYdWhQms3dmZqJ5YMDGTlPa1o52DnKSErYjsqfc6iaRJrBDZpx0RqQx7eZAED797kiaV6aw/132","comment_is_top":false,"comment_ctime":1613873480,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1613873480","product_id":100041701,"comment_content":"ä½¿ç”¨ORMæ“ä½œæ•°æ®åº“æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥é¿å…å¾ˆå¤§ä¸€éƒ¨åˆ†sqlæ³¨å…¥å‘¢?","like_count":0},{"had_liked":false,"id":270168,"user_name":"é äººå“å»èµ¢","can_delete":false,"product_type":"c1","uid":1301286,"ip_address":"","ucode":"7A20F9EBE847E1","user_header":"https://static001.geekbang.org/account/avatar/00/13/db/26/54f2c164.jpg","comment_is_top":false,"comment_ctime":1608966011,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608966011","product_id":100041701,"comment_content":"è¿™ä¸ªä¸‡èƒ½å¯†ç &quot; or &quot;&quot;=&quot;ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ï¼ŒçŸ¥é“å­—æ®µåçš„è¯ç›´æ¥å½“æˆå‚æ•°æŸ¥è¯¢ï¼ŒçœŸçš„å°±æ˜¯é—®é¢˜å¾ˆå¤§ã€‚<br>è¿™ä¸ªPreparedStatementä¹‹æ‰€ä»¥èƒ½åšåˆ°å±è”½å¤§å¤šæ•°SQLæ³¨å…¥ï¼Œå…¶å®æ˜¯å› ä¸ºâ€œè´Ÿè´£ä»»â€ï¼Œä»–æŠŠè¿™äº›å‚æ•°åŠ äº†ç‚¹æ–™ï¼Œæ¯”å¦‚æ·»åŠ ä¸€äº›è½¬ä¹‰å­—ç¬¦ã€‚<br>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœäººå®¶åšçš„ä¸æ˜¯ä¸‡èƒ½å¯†ç ï¼Œè€Œæ˜¯ä¿®æ”¹æ•°æ®è¿™äº›ï¼Œè¿™ä¸ªæ˜¯çœŸçš„æŒºå¯æ€•çš„ä¸€ä»¶äº‹ã€‚","like_count":0},{"had_liked":false,"id":235550,"user_name":"Gamer777","can_delete":false,"product_type":"c1","uid":1862855,"ip_address":"","ucode":"DD491A4B961EC2","user_header":"","comment_is_top":false,"comment_ctime":1595083291,"is_pvip":false,"replies":[{"id":"87698","content":"å¯ä»¥é˜²å¾¡æ³¨å…¥ã€‚åº•å±‚è¿›è¡Œè½¬ä¹‰ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯preparedstatementå¸®ä½ é‡‡å–çš„é˜²å¾¡æªæ–½ï¼Œè€Œä¸éœ€è¦ä½ å»æ“å¿ƒè½¬ä¹‰å•¥çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1595831259,"ip_address":"","comment_id":235550,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1595083291","product_id":100041701,"comment_content":"é€šè¿‡ä½¿ç”¨ PreparedStatementï¼Œå°† SQL è¯­å¥çš„è§£æå’Œå®é™…æ‰§è¡Œè¿‡ç¨‹åˆ†å¼€ï¼Œåªåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä»£å…¥ç”¨æˆ·çš„æ“ä½œã€‚åˆ†å¼€æ‰§è¡Œè¿˜æ˜¯æ— æ³•é˜²å¾¡SQLæ³¨å…¥å—ï¼Œä¸ç„¶ä¸ºä»€ä¹ˆåº•å±‚è¿˜æ˜¯ä¼šå¯¹ä¸€äº›ç‰¹æ®Šç¬¦å·è¿›è¡Œè½¬ä¹‰æ“ä½œï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":501761,"discussion_content":"å¯ä»¥é˜²å¾¡æ³¨å…¥ã€‚åº•å±‚è¿›è¡Œè½¬ä¹‰ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯preparedstatementå¸®ä½ é‡‡å–çš„é˜²å¾¡æªæ–½ï¼Œè€Œä¸éœ€è¦ä½ å»æ“å¿ƒè½¬ä¹‰å•¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1595831259,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":233147,"user_name":"HEæ˜ä¼Ÿ","can_delete":false,"product_type":"c1","uid":1211663,"ip_address":"","ucode":"DC302021D4250A","user_header":"https://static001.geekbang.org/account/avatar/00/12/7d/0f/26c38307.jpg","comment_is_top":false,"comment_ctime":1594251999,"is_pvip":false,"replies":[{"id":"86523","content":"æ­£ç¡®ä½¿ç”¨çš„è¯ï¼Œå°±å¯ä»¥","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1594704073,"ip_address":"","comment_id":233147,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1594251999","product_id":100041701,"comment_content":"è€å¸ˆï¼Œç°åœ¨çš„spring bootè¿™äº›æ¡†æ¶éƒ½èƒ½é¢„é˜²sqlæ³¨å…¥äº†å§","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":500914,"discussion_content":"æ­£ç¡®ä½¿ç”¨çš„è¯ï¼Œå°±å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594704073,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":219327,"user_name":"LIKE","can_delete":false,"product_type":"c1","uid":1254252,"ip_address":"","ucode":"9DAB7F9051648A","user_header":"https://static001.geekbang.org/account/avatar/00/13/23/6c/82ba5e1f.jpg","comment_is_top":false,"comment_ctime":1589989094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1589989094","product_id":100041701,"comment_content":"åˆšå…¥è¡Œçš„æ—¶å€™é‡åˆ°è¿‡2æ¬¡é€šè¿‡sqlæ³¨å…¥ç»•è¿‡ç™»å½•çš„æƒ…å†µï¼Œä¸€ä¸ªæ˜¯é’¢é“äº¤æ˜“çš„ç½‘ç«™ï¼Œä¸€ä¸ªæ˜¯æ±½è½¦ç›¸å…³appã€‚é‚£ä¼šæ˜¯åˆšå…¥è¡Œï¼Œæ„Ÿè§‰sqlæ³¨å…¥ç®€ç›´å°±æ˜¯é»‘ç§‘æŠ€ã€‚åæ¥å­¦ä¹ çš„æ·±å…¥äº†è§£åˆ°javaï¼Œdaoå±‚é™¤åŸç”Ÿçš„jdbcå¤–å…¶ä»–çš„éƒ½å·²ç»æ”¯æŒsqlé¢„ç¼–è¯‘ï¼Œé¢„ç¼–è¯‘ä¹‹åçš„sqlå°±å®‰å…¨å¾ˆå¤šã€‚","like_count":0},{"had_liked":false,"id":199179,"user_name":"COOK","can_delete":false,"product_type":"c1","uid":1233016,"ip_address":"","ucode":"0F1C0E7CA4F36B","user_header":"https://static001.geekbang.org/account/avatar/00/12/d0/78/a11a999d.jpg","comment_is_top":false,"comment_ctime":1585481499,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585481499","product_id":100041701,"comment_content":"ç”¨preparedstatementæŠŠsqlçš„è§£æå’Œæ‰§è¡Œåˆ†å¼€","like_count":0},{"had_liked":false,"id":194241,"user_name":"tardc","can_delete":false,"product_type":"c1","uid":1074057,"ip_address":"","ucode":"71142F0FD5B171","user_header":"https://static001.geekbang.org/account/avatar/00/10/63/89/f7d841c1.jpg","comment_is_top":false,"comment_ctime":1585040282,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585040282","product_id":100041701,"comment_content":"è¦è·å–å…¶ä»–å­—æ®µï¼Œå¯ä»¥åˆ©ç”¨ç›²æ³¨çš„æ–¹æ³•çŒœæµ‹ï¼Œå¦‚æœé¡µé¢æœ‰å›æ˜¾çš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨UnionæŸ¥è¯¢æ¥å›æ˜¾ã€‚","like_count":0},{"had_liked":false,"id":193382,"user_name":"COOK","can_delete":false,"product_type":"c1","uid":1233016,"ip_address":"","ucode":"0F1C0E7CA4F36B","user_header":"https://static001.geekbang.org/account/avatar/00/12/d0/78/a11a999d.jpg","comment_is_top":false,"comment_ctime":1584891374,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1584891374","product_id":100041701,"comment_content":"è€å¸ˆè®²å¾—å¾ˆæ¸…æ¥šï¼Œèµ","like_count":0},{"had_liked":false,"id":171383,"user_name":"felix","can_delete":false,"product_type":"c1","uid":1086157,"ip_address":"","ucode":"DF514D0BB9B508","user_header":"https://static001.geekbang.org/account/avatar/00/10/92/cd/d39e568c.jpg","comment_is_top":false,"comment_ctime":1578914480,"is_pvip":false,"replies":[{"id":"66746","content":"å¦‚æœæ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ç„¶åç›´æ¥æ‰§è¡Œsqlï¼Œé‚£å°±ä¼šè¢«æ³¨å…¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1579097948,"ip_address":"","comment_id":171383,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1578914480","product_id":100041701,"comment_content":"å¦‚æœæ˜¯string,è¿˜æ˜¯è§£å†³ä¸äº†ç¬¬ä¸€ä¸ªpasswordæˆ–çš„æƒ…å†µ?","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":481324,"discussion_content":"å¦‚æœæ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ç„¶åç›´æ¥æ‰§è¡Œsqlï¼Œé‚£å°±ä¼šè¢«æ³¨å…¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579097948,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167795,"user_name":"å¾‹é£›","can_delete":false,"product_type":"c1","uid":1462608,"ip_address":"","ucode":"65394E437AD2DF","user_header":"https://static001.geekbang.org/account/avatar/00/16/51/50/f5f2a121.jpg","comment_is_top":false,"comment_ctime":1577935865,"is_pvip":false,"replies":[{"id":"65223","content":"1ã€å¯ä»¥ï¼Œå°±æ˜¯æœ‰ç‚¹å¼±ã€‚å¦‚æœä½ é™åˆ¶åªèƒ½ä¸€ä¸ªå­—ç¬¦çš„è¯ï¼Œå¯èƒ½è¿˜è¡Œã€‚<br>2ã€å¯ä»¥<br>3ã€è‡ªå·±æ­ç¯å¢ƒã€‚ç½‘ä¸Šæœ‰å¼€æºçš„æ¸—é€æµ‹è¯•ç¯å¢ƒï¼Œæ¯”å¦‚WebGoatï¼Œå¯ä»¥è‡ªå·±æ­ä¸€ä¸ªç©ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577973357,"ip_address":"","comment_id":167795,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577935865","product_id":100041701,"comment_content":"ä½œä¸ºç¼–ç¨‹å°ç™½è€Œè¨€ï¼Œå­¦ä¹ éš¾åº¦æœ‰ç‚¹å¤§å“¦ğŸ™„ã€‚å¤šçœ‹äº†å¥½å‡ ç¯‡ç›²æ³¨çš„æ–‡ç« ï¼Œä»ç„¶æ˜¯æ™•å¤´è½¬å‘çš„ã€‚è±†è±†å·²ç»æä¾›äº†å¾ˆå¥½çš„ç­”æ¡ˆã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯æ¥è¯´è¯´æˆ‘çš„ç†è§£ï¼Œä¸è¶³ä¹‹å¤„è¯·è€å¸ˆæ‰¹è¯„æŒ‡æ­£ã€‚<br><br>ç›²æ³¨å…¶å®å°±æ˜¯ç»“åˆSQLæœ€åŸºæœ¬çš„ä¸¤ç§æ³¨å…¥æ–¹å¼ï¼Œä¸æ–­å»çŒœæµ‹å¹¶éªŒè¯æ•°æ®åº“å¯èƒ½çš„ä¿¡æ¯ï¼Œæœ€ç»ˆè·å¾—ç­”æ¡ˆçš„è¿‡ç¨‹ã€‚è¿™éœ€è¦æ³¨å…¥è€…ç®€å•çš„åŸºç¡€å’Œä¸°å¯Œçš„ç»éªŒï¼Œä»¥åŠé•¿æ—¶é—´é¢‘ç¹åœ°è·Ÿæ•°æ®åº“äº¤äº’ã€‚<br><br>å¯¹äºè¿™ç§æ”»å‡»ï¼Œå¼€å‘è€…é‡‡ç”¨PreparedStatment,å­˜å‚¨è¿‡ç¨‹ï¼ŒéªŒè¯è¾“å…¥ç­‰æ–¹æ³•å°±å¯ä»¥é˜²èŒƒæ”»å‡»ã€‚<br><br>è¯·æ•™è€å¸ˆï¼šå¯¹äºè¾“å…¥å†…å®¹éªŒè¯æ˜¯ä¸æ˜¯è¿˜å¯ä»¥é€šè¿‡é•¿åº¦è¿›è¡Œæ§åˆ¶ï¼Ÿå¯¹äºç›²æ³¨æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡å•ä½æ—¶é—´å†…æŸä¸ªidè·Ÿæ•°æ®åº“è¿æ¥æ¬¡æ•°è¿›è¡Œé™åˆ¶å’Œé¢„è­¦ï¼Ÿå¦‚æœæƒ³åŠ¨æ‰‹è¯•éªŒï¼Œå¦‚ä½•é¿å…è§¦ç¢°çº¢çº¿ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479996,"discussion_content":"1ã€å¯ä»¥ï¼Œå°±æ˜¯æœ‰ç‚¹å¼±ã€‚å¦‚æœä½ é™åˆ¶åªèƒ½ä¸€ä¸ªå­—ç¬¦çš„è¯ï¼Œå¯èƒ½è¿˜è¡Œã€‚\n2ã€å¯ä»¥\n3ã€è‡ªå·±æ­ç¯å¢ƒã€‚ç½‘ä¸Šæœ‰å¼€æºçš„æ¸—é€æµ‹è¯•ç¯å¢ƒï¼Œæ¯”å¦‚WebGoatï¼Œå¯ä»¥è‡ªå·±æ­ä¸€ä¸ªç©ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577973357,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167422,"user_name":"å°è€é¼ ","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1577789217,"is_pvip":false,"replies":[{"id":"65026","content":"sqlmapæ˜¯è‡ªåŠ¨åŒ–è¿›è¡Œsqlæ³¨å…¥çš„å·¥å…·ï¼Œè¿™ä¸ªä¸“æ æ³¨é‡ç”²æ–¹å®‰å…¨é˜²å¾¡ï¼Œæ‰€ä»¥æ”»å‡»åªä»‹ç»åŸç†ï¼Œä¸ä¼šè¿‡å¤šå»æ¶‰åŠæ”»å‡»çš„å„ç§ç»†èŠ‚ã€‚è¿™æ–¹é¢æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªå­¦ä¸€ä¸‹ï¼Œæœ‰é—®é¢˜æ¬¢è¿ç•™è¨€æ²Ÿé€šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577853106,"ip_address":"","comment_id":167422,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577789217","product_id":100041701,"comment_content":"å¯ä»‹ç»ä¸‹sqlmapå—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":479859,"discussion_content":"sqlmapæ˜¯è‡ªåŠ¨åŒ–è¿›è¡Œsqlæ³¨å…¥çš„å·¥å…·ï¼Œè¿™ä¸ªä¸“æ æ³¨é‡ç”²æ–¹å®‰å…¨é˜²å¾¡ï¼Œæ‰€ä»¥æ”»å‡»åªä»‹ç»åŸç†ï¼Œä¸ä¼šè¿‡å¤šå»æ¶‰åŠæ”»å‡»çš„å„ç§ç»†èŠ‚ã€‚è¿™æ–¹é¢æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªå­¦ä¸€ä¸‹ï¼Œæœ‰é—®é¢˜æ¬¢è¿ç•™è¨€æ²Ÿé€šã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577853106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":167032,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1577675389,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577675389","product_id":100041701,"comment_content":"   æ€è€ƒé¢˜çš„å¤„ç†æ–¹å¼ï¼šæœ€ç®€å•å°±æ˜¯ç”¨å­˜å‚¨è¿‡ç¨‹ï¼›å°¤å…¶å¦‚æœå¼€å‘è¯­è¨€æ˜¯.netçš„è¯ã€‚sqlæ³¨å…¥é—®é¢˜çš„çˆ†å‘åº”å½“æ˜¯åœ¨2008-2009å¹´å·¦å³ï¼Œsql serverå½“æ—¶çš„ä¸»æµç‰ˆæœ¬åœ¨2005ï¼›è®°å¾—å½“æ—¶å°±æ˜¯ç”±äºæ³¨å…¥çš„çˆ†å‘ï¼Œå¯¼è‡´å½“æ—¶å¤§é‡çš„æ•°æ®åº“ä»£ç ä»ç›´æ¥å†™æ”¹æˆäº†è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚","like_count":0},{"had_liked":false,"id":164765,"user_name":"Zhen","can_delete":false,"product_type":"c1","uid":1643029,"ip_address":"","ucode":"4235C791CB4A5D","user_header":"https://static001.geekbang.org/account/avatar/00/19/12/15/874b9d62.jpg","comment_is_top":false,"comment_ctime":1577088326,"is_pvip":false,"replies":[{"id":"62832","content":"æ•°æ®åº“çš„ä»»åŠ¡å°±æ˜¯æ‰§è¡ŒSQLï¼Œåœ¨SQLæ³¨å…¥çš„è¿‡ç¨‹ä¸­ï¼ŒJAVAæäº¤ç»™æ•°æ®åº“çš„ï¼Œå°±æ˜¯ä¸€æ¡å®Œæ•´çš„SQLè¯­å¥ã€‚å› æ­¤ï¼Œä»æ•°æ®åº“çš„è§’åº¦ï¼Œæ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577108853,"ip_address":"","comment_id":164765,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577088326","product_id":100041701,"comment_content":"äº†è§£äº†ä¸€ä¸‹ç›²æ³¨ï¼Œæ¯”è¾ƒæœ‰æ„æ€ï¼Œæ ¹æ®ä½ SQLæ³¨å…¥çš„æ”»å‡»è¯­å¥è¿”å›TRUEæˆ–è€…FALSEï¼Œå¯è¢«ç”¨æ¥ä¸€ç‚¹ç‚¹çŒœæµ‹è·å–æ•°æ®åº“schemaã€‚ æ¯”å¦‚ï¼šå¦‚æœ http:&#47;&#47;newspaper.com&#47;items.php?id=2 and 1=2 Â  è¿”å›FALSEï¼›http:&#47;&#47;newspaper.com&#47;items.php?id=2 and 1=1 è¿”å›æ­£ç¡®ï¼Œå°±è¯´æ˜åé¢è¾“å…¥çš„è¯­å¥è¢«æœåŠ¡å™¨æ‰§è¡Œäº† Â  è€Œä¸”å­˜åœ¨ä¸€ä¸ªæ•°å­—å‹çš„æ³¨å…¥ï¼›é‚£æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥å¼€å§‹ç›²æ³¨ï¼Œåˆ¤æ–­å®ƒç›®å‰ä½¿ç”¨çš„æ•°æ®åº“ã€ç‰ˆæœ¬ã€ä¸€ç‚¹ç‚¹çŒœæµ‹æ•°æ®åº“å†…å®¹ã€‚<br><br>å¦å¤–æœ‰ä¸ªå¾ˆåˆçº§çš„é—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹ï¼ŒSQLæ³¨å…¥æ˜¯ä¸æ˜¯æ‰€æœ‰SQLæ•°æ®åº“å›ºæœ‰çš„é—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆæ•°æ®åº“æœ¬èº«ä¸èƒ½è‡ªæˆ‘å®Œå–„åšåˆ°è¾“å…¥å‚æ•°çš„è¿‡æ»¤å’Œä¿æŠ¤ï¼Œè€Œæ˜¯è¦Javaåº”ç”¨ç¨‹åºæ¥é€šè¿‡PreparedStatementæ¥åšï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478887,"discussion_content":"æ•°æ®åº“çš„ä»»åŠ¡å°±æ˜¯æ‰§è¡ŒSQLï¼Œåœ¨SQLæ³¨å…¥çš„è¿‡ç¨‹ä¸­ï¼ŒJAVAæäº¤ç»™æ•°æ®åº“çš„ï¼Œå°±æ˜¯ä¸€æ¡å®Œæ•´çš„SQLè¯­å¥ã€‚å› æ­¤ï¼Œä»æ•°æ®åº“çš„è§’åº¦ï¼Œæ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577108853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164611,"user_name":"Cy23","can_delete":false,"product_type":"c1","uid":1591293,"ip_address":"","ucode":"8DC561C5151758","user_header":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","comment_is_top":false,"comment_ctime":1577060187,"is_pvip":false,"replies":[{"id":"62833","content":"è¿™æ˜¯å…¸å‹çš„åº”ç”¨é€»è¾‘çš„æ¼æ´ã€‚è¿™ç§æ•°æ®ï¼Œå¿…é¡»ä»¥åå°æ•°æ®ä¸ºå‡†ï¼Œä¸èƒ½æ‹¿å‰ç«¯çš„æ•°æ®å»ä¿®æ”¹ä»»ä½•åå°çš„æ•°æ®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577109119,"ip_address":"","comment_id":164611,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1577060187","product_id":100041701,"comment_content":"æ³¨å†Œçš„æ—¶å€™çœ‹inputçš„nameéƒ½æœ‰ä»€ä¹ˆï¼ŒåŸºæœ¬ä¸Šå°±äº†è§£ä¸ªå¤§æ¦‚æœ‰ä»€ä¹ˆå­—æ®µï¼Œç„¶åå°è¯•çŒœå¸¸ç”¨çš„å­—æ®µï¼Œ<br>æˆ–è€…æŸ¥è¯¢æ˜¾ç¤ºçš„è¯­å¥é‡Œæ³¨å…¥æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰å­—æ®µåï¼Œç„¶åæ›¿æ¢å­—æ®µååˆ°æ˜¾ç¤ºè¾“å‡ºçš„åœ°æ–¹æŸ¥çœ‹ï¼Œ<br>çªç„¶æƒ³èµ·åŸæ¥æœ‰ä¸ªèµ„æºä¸‹è½½çš„ç½‘ç«™ï¼ŒåŸæ¥æ˜¯å…è´¹çš„ï¼Œåæ¥æ”¶è´¹äº†ï¼Œæœ‰å¤©æ— æ„å°†é¡µé¢ä¸Šä¸‹è½½æ‰€éœ€è¦çš„åˆ†å€¼æ”¹ä¸ºè´Ÿæ•°ï¼Œç»“æœä¸‹è½½--ä¸ºæ­£ç»™æˆ‘åŠ åˆ†äº†ï¼Œç„¶åå°è¯•ä¿®æ”¹åˆ†å€¼å¤§å°ï¼Œç»“æœæˆ‘ç»™è‡ªå·±å……æ»¡äº†ï¼Œæˆ‘æŠŠè¿™ä¸ªæ¼æ´å‘Šè¯‰ç»™ç«™é•¿ï¼Œç«™é•¿ä¸ºäº†è¡¨ç¤ºæ„Ÿè°¢å¥–åŠ±æˆ‘1000åˆ†ï¼Œç„¶åæˆ‘å‘ç°ï¼Œæˆ‘é‚£999999999å˜æˆäº†1000ã€‚","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478837,"discussion_content":"è¿™æ˜¯å…¸å‹çš„åº”ç”¨é€»è¾‘çš„æ¼æ´ã€‚è¿™ç§æ•°æ®ï¼Œå¿…é¡»ä»¥åå°æ•°æ®ä¸ºå‡†ï¼Œä¸èƒ½æ‹¿å‰ç«¯çš„æ•°æ®å»ä¿®æ”¹ä»»ä½•åå°çš„æ•°æ®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577109119,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1591293,"avatar":"https://static001.geekbang.org/account/avatar/00/18/47/fd/895f0c27.jpg","nickname":"Cy23","note":"","ucode":"8DC561C5151758","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":98120,"discussion_content":"å—¯ï¼Œåº”è¯¥æ ¹æ®idé‡æ–°æŸ¥è¯¢å‡ºå¯¹åº”çš„åˆ†å€¼è¿›è¡Œå¤„ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577145128,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164604,"user_name":"rocedu","can_delete":false,"product_type":"c1","uid":1013097,"ip_address":"","ucode":"E46E29CBBB94A9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/69/791d0f5e.jpg","comment_is_top":false,"comment_ctime":1577058922,"is_pvip":true,"replies":[{"id":"62834","content":"ä½ å¥½ï¼Œæ„Ÿè°¢ä½ çš„ç•™è¨€ã€‚æœ¬è¯¾é¢˜çš„ä¸»è¦ç›®çš„è¿˜æ˜¯è®©å¤§å®¶æ‡‚å¾—å¦‚ä½•é¿å…æ¼æ´ï¼Œæ‰€ä»¥åªä»¥æœ€ç®€å•çš„æ¼æ´åˆ©ç”¨åŸç†è¿›è¡Œè®²è§£ï¼Œå®æ“æ”»å‡»ä¸æ˜¯å¿…é¡»çš„ï½","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577109260,"ip_address":"","comment_id":164604,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577058922","product_id":100041701,"comment_content":"è¦æ˜¯æœ‰ä¸ªè¯¾é¢˜ç¨‹é…å¥—è™šæ‹Ÿæœºå°±æ›´å¥½äº†","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478834,"discussion_content":"ä½ å¥½ï¼Œæ„Ÿè°¢ä½ çš„ç•™è¨€ã€‚æœ¬è¯¾é¢˜çš„ä¸»è¦ç›®çš„è¿˜æ˜¯è®©å¤§å®¶æ‡‚å¾—å¦‚ä½•é¿å…æ¼æ´ï¼Œæ‰€ä»¥åªä»¥æœ€ç®€å•çš„æ¼æ´åˆ©ç”¨åŸç†è¿›è¡Œè®²è§£ï¼Œå®æ“æ”»å‡»ä¸æ˜¯å¿…é¡»çš„ï½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577109260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":164583,"user_name":"ban","can_delete":false,"product_type":"c1","uid":1034204,"ip_address":"","ucode":"E523CE97E48266","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c7/dc/9408c8c2.jpg","comment_is_top":false,"comment_ctime":1577032612,"is_pvip":false,"replies":[{"id":"62518","content":"æˆ‘ä¹Ÿå¸Œæœ›æ˜¯è¿™æ ·çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"captain","uid":"1012580","ctime":1577057369,"ip_address":"","comment_id":164583,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1577032612","product_id":100041701,"comment_content":"ç°åœ¨åº”è¯¥å¾ˆå¤šå¤§éƒ¨åˆ†å¼€å‘éƒ½ä½¿ç”¨ PreparedStatement äº†å§","like_count":0,"discussions":[{"author":{"id":1012580,"avatar":"","nickname":"captain","note":"","ucode":"471A8412D923EB","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478826,"discussion_content":"æˆ‘ä¹Ÿå¸Œæœ›æ˜¯è¿™æ ·çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577057369,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}