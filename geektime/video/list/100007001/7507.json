{"id":7507,"title":"19 |【实验】AngularJS 单页应用实验和课后扩展","content":"无","comments":[{"had_liked":false,"id":216555,"user_name":"唐江","can_delete":false,"product_type":"c3","uid":1878120,"ip_address":"","ucode":"867C9808CF7760","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJpJXWFP3dNle88WnTkRTsEQkPJmOhepibiaTfhEtMRrbdg5EAWm4EzurA61oKxvCK2ZjMmy1QvmChw/132","comment_is_top":false,"comment_ctime":1589282706,"is_pvip":false,"replies":[{"id":80670,"content":"没有完全理解你的需求，能再解释详细一点？","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1589729495,"ip_address":"","comment_id":216555,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"前后端分离的情况，后端加上oauth2 。如何实现本身项目的登陆 和 第三发应用的访问？用户在前端登陆 前端不是一个第三方应用","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494862,"discussion_content":"没有完全理解你的需求，能再解释详细一点？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589729495,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":64035,"user_name":"swortect","can_delete":false,"product_type":"c3","uid":1288071,"ip_address":"","ucode":"A8C294E590C1B6","user_header":"https://static001.geekbang.org/account/avatar/00/13/a7/87/4f2fa359.jpg","comment_is_top":false,"comment_ctime":1548644980,"is_pvip":false,"replies":[{"id":22676,"content":"简化模式安全性较低，通过指定redirect_uri+state参数+https，可以适当提高安全性。一般交易型应用不建议简化模式，如果需要更严格安全，请考虑授权码模式。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1548684326,"ip_address":"","comment_id":64035,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，想请教一下。前端因为代码可见，如何防止代码被别人下载，伪造ua和referer模拟真实请求获去token。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":437822,"discussion_content":"简化模式安全性较低，通过指定redirect_uri+state参数+https，可以适当提高安全性。一般交易型应用不建议简化模式，如果需要更严格安全，请考虑授权码模式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548684326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58554,"user_name":"oO蜗牛君🐌、、","can_delete":false,"product_type":"c3","uid":1115761,"ip_address":"","ucode":"9178C612393FD5","user_header":"https://static001.geekbang.org/account/avatar/00/11/06/71/1d98ad80.jpg","comment_is_top":false,"comment_ctime":1547111805,"is_pvip":false,"replies":[{"id":21526,"content":"定制授权页可以参考这里：https:&#47;&#47;stackoverflow.com&#47;questions&#47;29345508&#47;spring-oauth2-custom-oauth-approval-page-at-oauth-authorize。如果还需要对spring security oauth2做深度定制，可以参考这个项目：https:&#47;&#47;github.com&#47;newnil&#47;oauth2-family-barrel","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1547451176,"ip_address":"","comment_id":58554,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"bobo老师，我看授权页面太丑了，能修改么？或者是二次开发，请指点一下。谢谢。","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436116,"discussion_content":"定制授权页可以参考这里：https://stackoverflow.com/questions/29345508/spring-oauth2-custom-oauth-approval-page-at-oauth-authorize。如果还需要对spring security oauth2做深度定制，可以参考这个项目：https://github.com/newnil/oauth2-family-barrel","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547451176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54902,"user_name":"小猴子","can_delete":false,"product_type":"c3","uid":1297538,"ip_address":"","ucode":"0BC6903BBEC7B0","user_header":"https://static001.geekbang.org/account/avatar/00/13/cc/82/cbf38ad4.jpg","comment_is_top":false,"comment_ctime":1545979803,"is_pvip":false,"replies":[{"id":20030,"content":"应该是一些angularjs资源被墙了，我更了一些链接，你更新下代码再试。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1546087920,"ip_address":"","comment_id":54902,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"项目跑不起来oauth-ui-implicit 这一个报找不到oauth-ng.js","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434606,"discussion_content":"应该是一些angularjs资源被墙了，我更了一些链接，你更新下代码再试。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546087920,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":216552,"user_name":"唐江","can_delete":false,"product_type":"c3","uid":1878120,"ip_address":"","ucode":"867C9808CF7760","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJpJXWFP3dNle88WnTkRTsEQkPJmOhepibiaTfhEtMRrbdg5EAWm4EzurA61oKxvCK2ZjMmy1QvmChw/132","comment_is_top":false,"comment_ctime":1589282150,"is_pvip":false,"replies":[{"id":80667,"content":"可以不授权，授权是oauth2在第三方场景下需要的，比如你用github API开发应用，别人在用这个应用访问他在github上的数据时，oauth2要求询问用户是否授权访问数据。\n\n如果你不涉及第三方场景，只是第一方企业应用，就用传统登陆认证或者jwt登陆认证即可，不需要授权。\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1589729197,"ip_address":"","comment_id":216552,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"只是前后端分离的项目，用户登陆怎么还有授权啊。 能不授权吗 就像普通登陆一样","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":494859,"discussion_content":"可以不授权，授权是oauth2在第三方场景下需要的，比如你用github API开发应用，别人在用这个应用访问他在github上的数据时，oauth2要求询问用户是否授权访问数据。\n\n如果你不涉及第三方场景，只是第一方企业应用，就用传统登陆认证或者jwt登陆认证即可，不需要授权。\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1589729197,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207806,"user_name":"Ann","can_delete":false,"product_type":"c3","uid":1522435,"ip_address":"","ucode":"6168471A259EEB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIY8d8yb0o6a0HoMOkTHeBy0IYITgoX6n0apWu93175CuvIgqmqwibByj9S2Y3sApNjTiadr4qkDUCA/132","comment_is_top":false,"comment_ctime":1587183543,"is_pvip":false,"replies":[{"id":78383,"content":"你好，我更新了一下源码oauth-ng.js引用问题，本地尝试ok，你再尝试下。\n\n更新源码在这里：\nhttps:&#47;&#47;github.com&#47;spring2go&#47;oauth2lab.git\n\n","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1587736173,"ip_address":"","comment_id":207806,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"oauth-ng.js的问题有同学解决了吗，寻求帮助，感谢","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":492245,"discussion_content":"你好，我更新了一下源码oauth-ng.js引用问题，本地尝试ok，你再尝试下。\n\n更新源码在这里：\nhttps://github.com/spring2go/oauth2lab.git\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587736173,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":61241,"user_name":"尹兆发","can_delete":false,"product_type":"c3","uid":1273088,"ip_address":"","ucode":"4D58FD644BF063","user_header":"https://static001.geekbang.org/account/avatar/00/13/6d/00/d740cfd9.jpg","comment_is_top":false,"comment_ctime":1547644215,"is_pvip":true,"replies":[{"id":22082,"content":"你好，可以尝试下在persistence.properties中的连接字符串jdbc.url后面加useSSL=true，参考：https:&#47;&#47;blog.csdn.net&#47;guoweimelon&#47;article&#47;details&#47;50810399","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1548071969,"ip_address":"","comment_id":61241,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"oauth_server启动的时候报错：请老师指点一下。\n\n\n报错如下：\nWed Jan 16 21:05:19 CST 2019 WARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\n\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;revokeTokenEndpoint&#39;: Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;tokenServices&#39; defined in class path resource [io&#47;spring2go&#47;config&#47;OAuth2AuthorizationServerConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.provider.token.DefaultTokenServices]: Factory method &#39;tokenServices&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;tokenStore&#39; defined in class path resource [io&#47;spring2go&#47;config&#47;OAuth2AuthorizationServerConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.provider.token.TokenStore]: Factory method &#39;tokenStore&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [io&#47;spring2go&#47;config&#47;OAuth2AuthorizationServerConfig.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: ","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436800,"discussion_content":"你好，可以尝试下在persistence.properties中的连接字符串jdbc.url后面加useSSL=true，参考：https://blog.csdn.net/guoweimelon/article/details/50810399","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1548071969,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":55474,"user_name":"swortect","can_delete":false,"product_type":"c3","uid":1288071,"ip_address":"","ucode":"A8C294E590C1B6","user_header":"https://static001.geekbang.org/account/avatar/00/13/a7/87/4f2fa359.jpg","comment_is_top":false,"comment_ctime":1546192008,"is_pvip":false,"replies":[{"id":20290,"content":"嗯，implicit官方翻为简化模式，英文原义是不言明的，隐含的，所以我也常翻成隐合模式。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1546435150,"ip_address":"","comment_id":55474,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"隐含模式就是简化模式么","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434785,"discussion_content":"嗯，implicit官方翻为简化模式，英文原义是不言明的，隐含的，所以我也常翻成隐合模式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1546435150,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58584,"user_name":"oO蜗牛君🐌、、","can_delete":false,"product_type":"c3","uid":1115761,"ip_address":"","ucode":"9178C612393FD5","user_header":"https://static001.geekbang.org/account/avatar/00/11/06/71/1d98ad80.jpg","comment_is_top":false,"comment_ctime":1547124377,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"1:问题 http:&#47;&#47;localhost:8083&#47;resources&#47;oauth-ng.js net::ERR_ABORTED 404 解决了。\n方案：\n第一步：在resource文件下建立一个任意文件夹，这里叫“js”，然后把“oauth-ng.js”文件copy进来；\n第二步：类UiWebConfig\n&#47;&#47;        registry.addResourceHandler(&quot;&#47;resources&#47;**&quot;).addResourceLocations(&quot;&#47;resources&#47;&quot;);\n        registry.addResourceHandler(&quot;&#47;js&#47;**&quot;).addResourceLocations(&quot;classpath:&#47;js&#47;&quot;);\n总结：\n貌似 https:&#47;&#47;www.baeldung.com&#47; 上的这个代码没有符合spring目录规范，也不清楚为什么视频上的好用，具体不研究了，按照以上修改，肯定好用。\n","like_count":2},{"had_liked":false,"id":58564,"user_name":"oO蜗牛君🐌、、","can_delete":false,"product_type":"c3","uid":1115761,"ip_address":"","ucode":"9178C612393FD5","user_header":"https://static001.geekbang.org/account/avatar/00/11/06/71/1d98ad80.jpg","comment_is_top":false,"comment_ctime":1547114442,"is_pvip":false,"replies":null,"discussion_count":0,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"oauth-ui-implicit 这个报错，找不到以下文件，上面同学也是这个问题，您说更新代码，但是我看代码还是旧的~\n我已经翻墙了~\nlocalhost&#47;:31 GET http:&#47;&#47;localhost:8083&#47;resources&#47;oauth-ng.js net::ERR_ABORTED 404","like_count":0}]}