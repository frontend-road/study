{"id":389649,"title":"15 | ç ”å‘æµç¨‹å®æˆ˜ï¼šIAMé¡¹ç›®æ˜¯å¦‚ä½•è¿›è¡Œç ”å‘æµç¨‹ç®¡ç†çš„ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å­”ä»¤é£ã€‚</p><p>åœ¨ <a href=\"https://time.geekbang.org/column/article/383390\"><strong>08è®²</strong></a>  å’Œ <a href=\"https://time.geekbang.org/column/article/388920\"><strong>14è®²</strong></a>  ï¼Œæˆ‘åˆ†åˆ«ä»‹ç»äº†å¦‚ä½•è®¾è®¡ç ”å‘æµç¨‹ï¼Œå’Œå¦‚ä½•åŸºäº Makefile é«˜æ•ˆåœ°ç®¡ç†é¡¹ç›®ã€‚é‚£ä¹ˆä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»¥ç ”å‘æµç¨‹ä¸ºä¸»çº¿ï¼Œæ¥çœ‹ä¸‹IAMé¡¹ç›®æ˜¯å¦‚ä½•é€šè¿‡Makefileæ¥é«˜æ•ˆç®¡ç†é¡¹ç›®çš„ã€‚å­¦å®Œè¿™ä¸€è®²ï¼Œä½ ä¸ä»…èƒ½æ›´åŠ æ·±åˆ»åœ°ç†è§£ <strong>08è®²</strong> å’Œ <strong>14è®²</strong> æ‰€ä»‹ç»çš„å†…å®¹ï¼Œè¿˜èƒ½å¾—åˆ°å¾ˆå¤šå¯ä»¥ç›´æ¥ç”¨åœ¨å®é™…æ“ä½œä¸­çš„ç»éªŒã€æŠ€å·§ã€‚</p><p>ç ”å‘æµç¨‹æœ‰å¾ˆå¤šé˜¶æ®µï¼Œå…¶ä¸­çš„å¼€å‘é˜¶æ®µå’Œæµ‹è¯•é˜¶æ®µæ˜¯éœ€è¦å¼€å‘è€…æ·±åº¦å‚ä¸çš„ã€‚æ‰€ä»¥åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä¼šé‡ç‚¹ä»‹ç»è¿™ä¸¤ä¸ªé˜¶æ®µä¸­çš„Makefileé¡¹ç›®ç®¡ç†åŠŸèƒ½ï¼Œå¹¶ä¸”ç©¿æ’ä¸€äº›æˆ‘çš„Makefileçš„è®¾è®¡æ€è·¯ã€‚</p><p>ä¸ºäº†å‘ä½ æ¼”ç¤ºæµç¨‹ï¼Œè¿™é‡Œå…ˆå‡è®¾ä¸€ä¸ªåœºæ™¯ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€æ±‚ï¼šç»™IAMå®¢æˆ·ç«¯å·¥å…·iamctlå¢åŠ ä¸€ä¸ªhelloworldå‘½ä»¤ï¼Œè¯¥å‘½ä»¤å‘ç»ˆç«¯æ‰“å°hello worldã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸‹å¦‚ä½•å…·ä½“å»æ‰§è¡Œç ”å‘æµç¨‹ä¸­çš„æ¯ä¸€æ­¥ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¿›å…¥å¼€å‘é˜¶æ®µã€‚</p><h2>å¼€å‘é˜¶æ®µ</h2><p>å¼€å‘é˜¶æ®µæ˜¯å¼€å‘è€…çš„ä¸»æˆ˜åœºï¼Œå®Œå…¨ç”±å¼€å‘è€…æ¥ä¸»å¯¼ï¼Œå®ƒåˆå¯åˆ†ä¸ºä»£ç å¼€å‘å’Œä»£ç æäº¤ä¸¤ä¸ªå­é˜¶æ®µã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ä»£ç å¼€å‘é˜¶æ®µã€‚</p><h3>ä»£ç å¼€å‘</h3><p>æ‹¿åˆ°éœ€æ±‚ä¹‹åï¼Œé¦–å…ˆéœ€è¦å¼€å‘ä»£ç ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦é€‰æ‹©ä¸€ä¸ªé€‚åˆå›¢é˜Ÿå’Œé¡¹ç›®çš„Gitå·¥ä½œæµã€‚å› ä¸ºGit  Flowå·¥ä½œæµæ¯”è¾ƒé€‚åˆå¤§å‹çš„éå¼€æºé¡¹ç›®ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€‰æ‹©<strong>Git</strong>  <strong>Flowå·¥ä½œæµ</strong>ã€‚ä»£ç å¼€å‘çš„å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><!-- [[[read_end]]] --><p>ç¬¬ä¸€æ­¥ï¼ŒåŸºäºdevelopåˆ†æ”¯ï¼Œæ–°å»ºä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯  feature/helloworldã€‚</p><pre><code>$ git checkout -b feature/helloworld develop\n</code></pre><p><strong>è¿™é‡Œéœ€è¦æ³¨æ„</strong>ï¼šæ–°å»ºçš„branchåè¦ç¬¦åˆGit  Flowå·¥ä½œæµä¸­çš„åˆ†æ”¯å‘½åè§„åˆ™ã€‚å¦åˆ™ï¼Œåœ¨git commité˜¶æ®µï¼Œä¼šå› ä¸ºbranchä¸è§„èŒƒå¯¼è‡´commitå¤±è´¥ã€‚IAMé¡¹ç›®çš„åˆ†æ”¯å‘½ä»¤è§„åˆ™å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/15/79/15bb43219269273baf70a27ea94e1279.png?wh=2775x1250\" alt=\"\"></p><p>IAMé¡¹ç›®é€šè¿‡pre-commit githooksæ¥ç¡®ä¿åˆ†æ”¯åæ˜¯ç¬¦åˆè§„èŒƒçš„ã€‚åœ¨IAMé¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œgit commit å‘½ä»¤ï¼Œgitä¼šè‡ªåŠ¨æ‰§è¡Œ<a href=\"https://github.com/marmotedu/iam/blob/master/githooks/pre-commit\">pre-commit</a>è„šæœ¬ï¼Œè¯¥è„šæœ¬ä¼šæ£€æŸ¥å½“å‰branchçš„åå­—æ˜¯å¦ç¬¦åˆè§„èŒƒã€‚</p><p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦ä½ æ³¨æ„ï¼šgitä¸ä¼šæäº¤ <code>.git/hooks</code> ç›®å½•ä¸‹çš„githooksè„šæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ä»¥ä¸‹æ‰‹æ®µï¼Œç¡®ä¿å¼€å‘è€…cloneä»“åº“ä¹‹åï¼Œä»ç„¶èƒ½å®‰è£…æˆ‘ä»¬æŒ‡å®šçš„githooksè„šæœ¬åˆ° <code>.git/hooks</code> ç›®å½•ï¼š</p><pre><code># Copy githook scripts when execute makefile    \nCOPY_GITHOOK:=$(shell cp -f githooks/* .git/hooks/) \n</code></pre><p>ä¸Šè¿°ä»£ç æ”¾åœ¨<a href=\"https://github.com/marmotedu/iam/blob/master/scripts/make-rules/common.mk#L74\">scripts/make-rules/common.mk</a>æ–‡ä»¶ä¸­ï¼Œæ¯æ¬¡æ‰§è¡Œmakeå‘½ä»¤æ—¶éƒ½ä¼šæ‰§è¡Œï¼Œå¯ä»¥ç¡®ä¿githookséƒ½å®‰è£…åˆ° <code>.git/hooks</code> ç›®å½•ä¸‹ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œåœ¨feature/helloworldåˆ†æ”¯ä¸­ï¼Œå®Œæˆhelloworldå‘½ä»¤çš„æ·»åŠ ã€‚</p><p>é¦–å…ˆï¼Œé€šè¿‡ <code>iamctl new helloworld</code> å‘½ä»¤åˆ›å»ºhelloworldå‘½ä»¤æ¨¡æ¿ï¼š</p><pre><code>$ iamctl new helloworld -d internal/iamctl/cmd/helloworld\nCommand file generated: internal/iamctl/cmd/helloworld/helloworld.go\n</code></pre><p>æ¥ç€ï¼Œç¼–è¾‘<code>internal/iamctl/cmd/cmd.go</code>æ–‡ä»¶ï¼Œåœ¨æºç æ–‡ä»¶ä¸­æ·»åŠ <code>helloworld.NewCmdHelloworld(f, ioStreams),</code>ï¼ŒåŠ è½½helloworldå‘½ä»¤ã€‚è¿™é‡Œå°†helloworldå‘½ä»¤è®¾ç½®ä¸º<code>Troubleshooting and Debugging Commands</code>å‘½ä»¤åˆ†ç»„ï¼š</p><pre><code>import (\n    &quot;github.com/marmotedu/iam/internal/iamctl/cmd/helloworld&quot;\n)\n        ...\n        {\n            Message: &quot;Troubleshooting and Debugging Commands:&quot;,\n            Commands: []*cobra.Command{\n                validate.NewCmdValidate(f, ioStreams),\n                helloworld.NewCmdHelloworld(f, ioStreams),\n            },\n        },\n</code></pre><p>è¿™äº›æ“ä½œä¸­åŒ…å«äº†low codeçš„æ€æƒ³ã€‚åœ¨ç¬¬ <a href=\"https://time.geekbang.org/column/article/384648\"><strong>10è®²</strong></a> ä¸­æˆ‘å°±å¼ºè°ƒè¿‡ï¼Œè¦å°½å¯èƒ½ä½¿ç”¨ä»£ç è‡ªåŠ¨ç”Ÿæˆè¿™ä¸€æŠ€æœ¯ã€‚è¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼šä¸€æ–¹é¢èƒ½å¤Ÿæé«˜æˆ‘ä»¬çš„ä»£ç å¼€å‘æ•ˆç‡ï¼›å¦ä¸€æ–¹é¢ä¹Ÿèƒ½å¤Ÿä¿è¯è§„èŒƒï¼Œå‡å°‘æ‰‹åŠ¨æ“ä½œå¯èƒ½å¸¦æ¥çš„é”™è¯¯ã€‚æ‰€ä»¥è¿™é‡Œï¼Œæˆ‘å°†iamctlçš„å‘½ä»¤ä¹Ÿæ¨¡æ¿åŒ–ï¼Œå¹¶é€šè¿‡ <code>iamctl new</code> è‡ªåŠ¨ç”Ÿæˆã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼Œç”Ÿæˆä»£ç ã€‚</p><pre><code>$ make gen\n</code></pre><p>å¦‚æœæ”¹åŠ¨ä¸æ¶‰åŠä»£ç ç”Ÿæˆï¼Œå¯ä»¥ä¸æ‰§è¡Œ<code>make gen</code>æ“ä½œã€‚ <code>make gen</code> æ‰§è¡Œçš„å…¶å®æ˜¯gen.runä¼ªç›®æ ‡ï¼š</p><pre><code>gen.run: gen.clean gen.errcode gen.docgo.doc\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æ‰§è¡Œ <code>make gen.run</code> æ—¶ï¼Œå…¶å®ä¼šå…ˆæ¸…ç†ä¹‹å‰ç”Ÿæˆçš„æ–‡ä»¶ï¼Œå†åˆ†åˆ«è‡ªåŠ¨ç”Ÿæˆerror codeå’Œdoc.goæ–‡ä»¶ã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œé€šè¿‡<code>make gen</code> ç”Ÿæˆçš„å­˜é‡ä»£ç è¦å…·æœ‰å¹‚ç­‰æ€§ã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½ç¡®ä¿æ¯æ¬¡ç”Ÿæˆçš„ä»£ç æ˜¯ä¸€æ ·çš„ï¼Œé¿å…ä¸ä¸€è‡´å¸¦æ¥çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°†æ›´å¤šçš„ä¸è‡ªåŠ¨ç”Ÿæˆä»£ç ç›¸å…³çš„åŠŸèƒ½æ”¾åœ¨ gen.mk Makefile ä¸­ã€‚ä¾‹å¦‚ï¼š</p><ul>\n<li>gen.docgo.docï¼Œä»£è¡¨è‡ªåŠ¨ç”Ÿæˆdoc.goæ–‡ä»¶ã€‚</li>\n<li>gen.ca.%ï¼Œä»£è¡¨è‡ªåŠ¨ç”Ÿæˆiamctlã€iam-apiserverã€iam-authz-serverè¯ä¹¦æ–‡ä»¶ã€‚</li>\n</ul><p>ç¬¬å››æ­¥ï¼Œç‰ˆæƒæ£€æŸ¥ã€‚</p><p>å¦‚æœæœ‰æ–°æ–‡ä»¶æ·»åŠ ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‰§è¡Œ <code>make verify-copyright</code>  ï¼Œæ¥æ£€æŸ¥æ–°æ–‡ä»¶æœ‰æ²¡æœ‰æ·»åŠ ç‰ˆæƒå¤´ä¿¡æ¯ã€‚</p><pre><code>$ make verify-copyright\n</code></pre><p>å¦‚æœç‰ˆæƒæ£€æŸ¥å¤±è´¥ï¼Œå¯ä»¥æ‰§è¡Œ<code>make add-copyright</code>è‡ªåŠ¨æ·»åŠ ç‰ˆæƒå¤´ã€‚æ·»åŠ ç‰ˆæƒä¿¡æ¯åªé’ˆå¯¹å¼€æºè½¯ä»¶ï¼Œå¦‚æœä½ çš„è½¯ä»¶ä¸éœ€è¦æ·»åŠ ï¼Œå°±å¯ä»¥ç•¥è¿‡è¿™ä¸€æ­¥ã€‚</p><p>è¿™é‡Œè¿˜æœ‰ä¸ªMakefileç¼–å†™æŠ€å·§ï¼šå¦‚æœMakefileçš„commandéœ€è¦æŸä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä½¿è¯¥ç›®æ ‡ä¾èµ–ç±»ä¼¼tools.verify.addlicenseè¿™ç§ç›®æ ‡ï¼Œtools.verify.addlicenseä¼šæ£€æŸ¥è¯¥å·¥å…·æ˜¯å¦å·²å®‰è£…ï¼Œå¦‚æœæ²¡æœ‰å°±å…ˆå®‰è£…ã€‚</p><pre><code>.PHONY: copyright.verify    \ncopyright.verify: tools.verify.addlicense \n  ...\ntools.verify.%:          \n  @if ! which $* &amp;&gt;/dev/null; then $(MAKE) tools.install.$*; fi\n.PHONY: install.addlicense                              \ninstall.addlicense:        \n  @$(GO) get -u github.com/marmotedu/addlicense\n</code></pre><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ä½¿ <code>make copyright.verify</code> å°½å¯èƒ½è‡ªåŠ¨åŒ–ï¼Œå‡å°‘æ‰‹åŠ¨ä»‹å…¥çš„æ¦‚ç‡ã€‚</p><p>ç¬¬äº”æ­¥ï¼Œä»£ç æ ¼å¼åŒ–ã€‚</p><pre><code>$ make format\n</code></pre><p>æ‰§è¡Œ<code>make format</code>ä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æ ¼å¼åŒ–æ“ä½œï¼š</p><ol>\n<li>è°ƒç”¨gofmtæ ¼å¼åŒ–ä½ çš„ä»£ç ã€‚</li>\n<li>è°ƒç”¨goimportså·¥å…·ï¼Œè‡ªåŠ¨å¢åˆ ä¾èµ–çš„åŒ…ï¼Œå¹¶å°†ä¾èµ–åŒ…æŒ‰å­—æ¯åºæ’åºå¹¶åˆ†ç±»ã€‚</li>\n<li>è°ƒç”¨golineså·¥å…·ï¼ŒæŠŠè¶…è¿‡120è¡Œçš„ä»£ç æŒ‰golinesè§„åˆ™ï¼Œæ ¼å¼åŒ–æˆ&lt;120è¡Œçš„ä»£ç ã€‚</li>\n<li>è°ƒç”¨ <code>go mod edit -fmt</code> æ ¼å¼åŒ–go.modæ–‡ä»¶ã€‚</li>\n</ol><p>ç¬¬å…­æ­¥ï¼Œé™æ€ä»£ç æ£€æŸ¥ã€‚</p><pre><code>$ make lint\n</code></pre><p>å…³äºé™æ€ä»£ç æ£€æŸ¥ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥å…ˆäº†è§£ä»£ç å¼€å‘é˜¶æ®µæœ‰è¿™ä¸ªæ­¥éª¤ï¼Œè‡³äºå¦‚ä½•æ“ä½œï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€è®²ç»™ä½ è¯¦ç»†ä»‹ç»ã€‚</p><p>ç¬¬ä¸ƒæ­¥ï¼Œå•å…ƒæµ‹è¯•ã€‚</p><pre><code>$ make test\n</code></pre><p>è¿™é‡Œè¦æ³¨æ„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„åŒ…éƒ½éœ€è¦æ‰§è¡Œå•å…ƒæµ‹è¯•ã€‚ä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼Œæ’é™¤æ‰ä¸éœ€è¦å•å…ƒæµ‹è¯•çš„åŒ…ï¼š</p><pre><code>go test `go list ./...|egrep -v $(subst $(SPACE),'|',$(sort $(EXCLUDE_TESTS)))`\n</code></pre><p>åœ¨go.testçš„commandä¸­ï¼Œæˆ‘ä»¬è¿˜è¿è¡Œäº†ä»¥ä¸‹å‘½ä»¤ï¼š</p><pre><code>sed -i '/mock_.*.go/d' $(OUTPUT_DIR)/coverage.out\n</code></pre><p>è¿è¡Œè¯¥å‘½ä»¤çš„ç›®çš„ï¼Œæ˜¯æŠŠmock_.* .goæ–‡ä»¶ä¸­çš„å‡½æ•°å•å…ƒæµ‹è¯•ä¿¡æ¯ä»coverage.outä¸­åˆ é™¤ã€‚mock_.*.goæ–‡ä»¶ä¸­çš„å‡½æ•°æ˜¯ä¸éœ€è¦å•å…ƒæµ‹è¯•çš„ï¼Œå¦‚æœä¸åˆ é™¤ï¼Œå°±ä¼šå½±å“åé¢çš„å•å…ƒæµ‹è¯•è¦†ç›–ç‡çš„è®¡ç®—ã€‚</p><p>å¦‚æœæƒ³æ£€æŸ¥å•å…ƒæµ‹è¯•è¦†ç›–ç‡ï¼Œè¯·æ‰§è¡Œï¼š</p><pre><code>$ make cover\n</code></pre><p>é»˜è®¤æµ‹è¯•è¦†ç›–ç‡è‡³å°‘ä¸º60%ï¼Œä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡ŒæŒ‡å®šè¦†ç›–ç‡é˜ˆå€¼ä¸ºå…¶ä»–å€¼ï¼Œä¾‹å¦‚ï¼š</p><pre><code>$ make cover COVERAGE=90\n</code></pre><p>å¦‚æœæµ‹è¯•è¦†ç›–ç‡ä¸æ»¡è¶³è¦æ±‚ï¼Œå°±ä¼šè¿”å›ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p><pre><code>test coverage is 62.1%\ntest coverage does not meet expectations: 90%, please add test cases!\nmake[1]: *** [go.test.cover] Error 1\nmake: *** [cover] Error 2\n</code></pre><p>è¿™é‡Œmakeå‘½ä»¤çš„é€€å‡ºç ä¸º<code>1</code>ã€‚</p><p>å¦‚æœå•å…ƒæµ‹è¯•è¦†ç›–ç‡è¾¾ä¸åˆ°è®¾ç½®çš„é˜ˆå€¼ï¼Œå°±éœ€è¦è¡¥å……æµ‹è¯•ç”¨ä¾‹ï¼Œå¦åˆ™ç¦æ­¢åˆå¹¶åˆ°developå’Œmasteråˆ†æ”¯ã€‚IAMé¡¹ç›®é…ç½®äº†GitHub Actions CIè‡ªåŠ¨åŒ–æµæ°´çº¿ï¼ŒCIæµæ°´çº¿ä¼šè‡ªåŠ¨è¿è¡Œï¼Œæ£€æŸ¥å•å…ƒæµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¾¾åˆ°è¦æ±‚ã€‚</p><p>ç¬¬å…«æ­¥ï¼Œæ„å»ºã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬æ‰§è¡Œ<code>make build</code>å‘½ä»¤ï¼Œæ„å»ºå‡º<code>cmd/</code>ç›®å½•ä¸‹æ‰€æœ‰çš„äºŒè¿›åˆ¶å®‰è£…æ–‡ä»¶ã€‚</p><pre><code>$ make build\n</code></pre><p><code>make build</code> ä¼šè‡ªåŠ¨æ„å»º <code>cmd/</code> ç›®å½•ä¸‹çš„æ‰€æœ‰ç»„ä»¶ï¼Œå¦‚æœåªæƒ³æ„å»ºå…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªç»„ä»¶ï¼Œå¯ä»¥ä¼ å…¥ <code>BINS</code>é€‰é¡¹ï¼Œç»„ä»¶ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ï¼Œå¹¶ç”¨åŒå¼•å·å¼•èµ·æ¥ï¼š</p><pre><code>$ make build BINS=&quot;iam-apiserver iamctl&quot;\n</code></pre><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä»£ç å¼€å‘é˜¶æ®µçš„å…¨éƒ¨æ“ä½œã€‚</p><p>å¦‚æœä½ è§‰å¾—æ‰‹åŠ¨æ‰§è¡Œçš„makeå‘½ä»¤æ¯”è¾ƒå¤šï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œmakeå‘½ä»¤ï¼š</p><pre><code>$ make\n===========&gt; Generating iam error code go source files\n===========&gt; Generating error code markdown documentation\n===========&gt; Generating missing doc.go for go packages\n===========&gt; Verifying the boilerplate headers for all files\n===========&gt; Formating codes\n===========&gt; Run golangci to lint source codes\n===========&gt; Run unit test\n...\n===========&gt; Building binary iam-pump v0.7.2-24-g5814e7b for linux amd64\n===========&gt; Building binary iamctl v0.7.2-24-g5814e7b for linux amd64\n...\n</code></pre><p>ç›´æ¥æ‰§è¡Œ<code>make</code>ä¼šæ‰§è¡Œä¼ªç›®æ ‡<code>all</code>æ‰€ä¾èµ–çš„ä¼ªç›®æ ‡ <code>all: tidy gen add-copyright format lint cover build</code>ï¼Œä¹Ÿå³æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šä¾èµ–åŒ…æ·»åŠ /åˆ é™¤ã€ç”Ÿæˆä»£ç ã€è‡ªåŠ¨æ·»åŠ ç‰ˆæƒå¤´ã€ä»£ç æ ¼å¼åŒ–ã€é™æ€ä»£ç æ£€æŸ¥ã€è¦†ç›–ç‡æµ‹è¯•ã€æ„å»ºã€‚</p><p>è¿™é‡Œä½ éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šallä¸­ä¾èµ–coverï¼Œcoverå®é™…æ‰§è¡Œçš„æ˜¯ <code>go.test.cover</code> ï¼Œè€Œ <code>go.test.cover</code> åˆä¾èµ– <code>go.test</code> ï¼Œæ‰€ä»¥coverå®é™…ä¸Šæ˜¯å…ˆæ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œå†æ£€æŸ¥å•å…ƒæµ‹è¯•è¦†ç›–ç‡æ˜¯å¦æ»¡è¶³é¢„è®¾çš„é˜ˆå€¼ã€‚</p><p>æœ€åè¡¥å……ä¸€ç‚¹ï¼Œåœ¨å¼€å‘é˜¶æ®µæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦éšæ—¶æ‰§è¡Œ <code>make gen</code> ã€ <code>make format</code> ã€ <code>make lint</code> ã€ <code>make cover</code> ç­‰æ“ä½œï¼Œä¸ºçš„æ˜¯èƒ½å¤Ÿæå‰å‘ç°é—®é¢˜å¹¶æ”¹æ­£ã€‚</p><h3>ä»£ç æäº¤</h3><p>ä»£ç å¼€å‘å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦å°†ä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œæ•´ä¸ªæµç¨‹åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œå¼€å‘å®Œåï¼Œå°†ä»£ç æäº¤åˆ°feature/helloworldåˆ†æ”¯ï¼Œå¹¶pushåˆ°è¿œç«¯ä»“åº“ã€‚</p><pre><code>$ git add internal/iamctl/cmd/helloworld internal/iamctl/cmd/cmd.go\n$ git commit -m &quot;feat: add new iamctl command 'helloworld'&quot;\n$ git push origin feature/helloworld\n</code></pre><p>è¿™é‡Œæˆ‘å»ºè®®ä½ åªæ·»åŠ è·Ÿ<code>feature/helloworld</code>ç›¸å…³çš„æ”¹åŠ¨ï¼Œè¿™æ ·å°±çŸ¥é“ä¸€ä¸ªcommitåšäº†å“ªäº›å˜æ›´ï¼Œæ–¹ä¾¿ä»¥åè¿½æº¯ã€‚æ‰€ä»¥ï¼Œæˆ‘ä¸å»ºè®®ç›´æ¥æ‰§è¡Œ<code>git add .</code>è¿™ç±»æ–¹å¼æäº¤æ”¹åŠ¨ã€‚</p><p>åœ¨æäº¤commitæ—¶ï¼Œcommit-msg githooksä¼šæ£€æŸ¥commit messageæ˜¯å¦ç¬¦åˆAngular Commit Messageè§„èŒƒï¼Œå¦‚æœä¸ç¬¦åˆä¼šæŠ¥é”™ã€‚commit-msageè°ƒç”¨äº†<a href=\"https://github.com/llorllale/go-gitlint\">go-gitlint</a>æ¥æ£€æŸ¥commit messageã€‚go-gitlintä¼šè¯»å– <code>.gitlint</code> ä¸­é…ç½®çš„commit messageæ ¼å¼ï¼š</p><pre><code>--subject-regex=^((Merge branch.*of.*)|((revert: )?(feat|fix|perf|style|refactor|test|ci|docs|chore)(\\(.+\\))?: [^A-Z].*[^.]$))\n--subject-maxlen=72\n--body-regex=^([^\\r\\n]{0,72}(\\r?\\n|$))*$\n</code></pre><p>IAMé¡¹ç›®é…ç½®äº†GitHub Actionsï¼Œå½“æœ‰ä»£ç è¢«pushåï¼Œä¼šè§¦å‘CIæµæ°´çº¿ï¼Œæµæ°´çº¿ä¼šæ‰§è¡Œ<code>make all</code>ç›®æ ‡ã€‚GitHub Actions CIæµç¨‹æ‰§è¡Œè®°å½•å¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/68/22/6819f96bda8dcb214c3b7eeba2f37022.png?wh=2061x435\" alt=\"\"></p><p>å¦‚æœCIä¸é€šè¿‡ï¼Œå°±éœ€è¦ä¿®æ”¹ä»£ç ï¼Œç›´åˆ°CIæµæ°´çº¿é€šè¿‡ä¸ºæ­¢ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹GitHub Actionsçš„é…ç½®ï¼š</p><pre><code>name: IamCI\n\non: \n  push:\n    branchs:\n    - '*'\n  pull_request:\n    types: [opened, reopened]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v2\n\n    - name: Set up Go\n      uses: actions/setup-go@v2\n      with:\n        go-version: 1.16\n\n    - name: all\n      run: make\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒGitHub Actionså®é™…ä¸Šæ‰§è¡Œäº†3æ­¥ï¼šæ‹‰å–ä»£ç ã€è®¾ç½®Goç¼–è¯‘ç¯å¢ƒã€æ‰§è¡Œmakeå‘½ä»¤ï¼ˆä¹Ÿå°±æ˜¯æ‰§è¡Œ <code>make all</code> ç›®æ ‡ï¼‰ã€‚</p><p>GitHub Actionsä¹Ÿæ‰§è¡Œäº† <code>make all</code> ç›®æ ‡ï¼Œå’Œæ‰‹åŠ¨æ“ä½œæ‰§è¡Œçš„ <code>make all</code> ç›®æ ‡ä¿æŒä¸€è‡´ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†è®©çº¿ä¸Šçš„CIæµç¨‹å’Œæœ¬åœ°çš„CIæµç¨‹å®Œå…¨ä¿æŒä¸€è‡´ã€‚è¿™æ ·ï¼Œå½“æˆ‘ä»¬åœ¨æœ¬åœ°æ‰§è¡Œmakeå‘½ä»¤é€šè¿‡åï¼Œåœ¨çº¿ä¸Šä¹Ÿä¼šé€šè¿‡ã€‚ä¿æŒä¸€ä¸ªä¸€è‡´çš„æ‰§è¡Œæµç¨‹å’Œæ‰§è¡Œç»“æœå¾ˆé‡è¦ã€‚å¦åˆ™ï¼Œæœ¬åœ°æ‰§è¡Œmakeé€šè¿‡ï¼Œä½†æ˜¯çº¿ä¸Šå´ä¸é€šè¿‡ï¼Œå²‚ä¸å¾ˆè®©äººå¤´ç–¼ï¼Ÿ</p><p>ç¬¬äºŒæ­¥ï¼Œæäº¤pull requestã€‚</p><p>ç™»é™†GitHubï¼ŒåŸºäºfeature/helloworldåˆ›å»ºpull requestï¼Œå¹¶æŒ‡å®šReviewersè¿›è¡Œcode reviewã€‚å…·ä½“æ“ä½œå¦‚ä¸‹å›¾ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/53/ab/53f4103f5c8cabb76ef2fddaec3a54ab.png?wh=1694x733\" alt=\"\"></p><p>å½“æœ‰æ–°çš„pull requestè¢«åˆ›å»ºåï¼Œä¹Ÿä¼šè§¦å‘CIæµæ°´çº¿ã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºå®Œpull requeståï¼Œå°±å¯ä»¥é€šçŸ¥reviewers æ¥ reviewä»£ç ï¼ŒGitHubä¹Ÿä¼šå‘ç«™å†…ä¿¡ã€‚</p><p>ç¬¬å››æ­¥ï¼ŒReviewers å¯¹ä»£ç è¿›è¡Œreviewã€‚</p><p>Revieweré€šè¿‡review github diffåçš„å†…å®¹ï¼Œå¹¶ç»“åˆCIæµç¨‹æ˜¯å¦é€šè¿‡æ·»åŠ è¯„è®ºï¼Œå¹¶é€‰æ‹©Commentï¼ˆä»…è¯„è®ºï¼‰ã€Approveï¼ˆé€šè¿‡ï¼‰ã€Request Changesï¼ˆä¸é€šè¿‡ï¼Œéœ€è¦ä¿®æ”¹ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/39/ce/39d992c7bdb35848706bce792877e8ce.png?wh=2473x1001\" alt=\"\"></p><p>å¦‚æœreviewä¸é€šè¿‡ï¼Œfeatureå¼€å‘è€…å¯ä»¥ç›´æ¥åœ¨feature/helloworldåˆ†æ”¯ä¿®æ­£ä»£ç ï¼Œå¹¶pushåˆ°è¿œç«¯çš„feature/helloworldåˆ†æ”¯ï¼Œç„¶åé€šçŸ¥reviewerså†æ¬¡reviewã€‚å› ä¸ºæœ‰pushäº‹ä»¶å‘ç”Ÿï¼Œæ‰€ä»¥ä¼šè§¦å‘GitHub Actions CIæµæ°´çº¿ã€‚</p><p>ç¬¬äº”æ­¥ï¼Œcode reviewé€šè¿‡åï¼Œmaintainerå°±å¯ä»¥å°†æ–°çš„ä»£ç åˆå¹¶åˆ°developåˆ†æ”¯ã€‚</p><p>ä½¿ç”¨<strong>Create a merge commit</strong>çš„æ–¹å¼ï¼Œå°†pull requeståˆå¹¶åˆ°developåˆ†æ”¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/30/7d/30de6bb6c8ff431ec56debbc0f5b667d.png?wh=1247x366\" alt=\"\"></p><p><strong>Create a merge commit</strong>çš„å®é™…æ“ä½œæ˜¯ <code>git merge --no-ff</code>ï¼Œfeature/helloworldåˆ†æ”¯ä¸Šæ‰€æœ‰çš„ commit éƒ½ä¼šåŠ åˆ° develop åˆ†æ”¯ä¸Šï¼Œå¹¶ä¸”ä¼šç”Ÿæˆä¸€ä¸ª merge commitã€‚ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå¯ä»¥æ¸…æ™°åœ°çŸ¥é“æ˜¯è°åšäº†å“ªäº›æäº¤ï¼Œå›æº¯å†å²çš„æ—¶å€™ä¹Ÿä¼šæ›´åŠ æ–¹ä¾¿ã€‚</p><p>ç¬¬å…­æ­¥ï¼Œåˆå¹¶åˆ°developåˆ†æ”¯åï¼Œè§¦å‘CIæµç¨‹ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå¼€å‘é˜¶æ®µçš„æ“ä½œå°±å…¨éƒ¨å®Œæˆäº†ï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/44/73/444b0701f8866b50a49bd0138488c873.png?wh=1697x1028\" alt=\"\"></p><p>åˆå¹¶åˆ°developåˆ†æ”¯ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥å¼€å‘é˜¶æ®µçš„ä¸‹ä¸€é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯æµ‹è¯•é˜¶æ®µäº†ã€‚</p><h2>æµ‹è¯•é˜¶æ®µ</h2><p>åœ¨æµ‹è¯•é˜¶æ®µï¼Œå¼€å‘äººå‘˜ä¸»è¦è´Ÿè´£æä¾›æµ‹è¯•åŒ…å’Œä¿®å¤æµ‹è¯•æœŸé—´å‘ç°çš„bugï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿå¯èƒ½ä¼šå‘ç°ä¸€äº›æ–°çš„éœ€æ±‚æˆ–å˜åŠ¨ç‚¹ï¼Œæ‰€ä»¥éœ€è¦åˆç†è¯„ä¼°è¿™äº›æ–°çš„éœ€æ±‚æˆ–å˜åŠ¨ç‚¹æ˜¯å¦è¦æ”¾åœ¨å½“å‰è¿­ä»£ä¿®æ”¹ã€‚</p><p>æµ‹è¯•é˜¶æ®µçš„æ“ä½œæµç¨‹å¦‚ä¸‹ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼ŒåŸºäºdevelopåˆ†æ”¯ï¼Œåˆ›å»ºreleaseåˆ†æ”¯ï¼Œæµ‹è¯•ä»£ç ã€‚</p><pre><code>$ git checkout -b release/1.0.0 develop\n$ make\n</code></pre><p>ç¬¬äºŒæ­¥ï¼Œæäº¤æµ‹è¯•ã€‚</p><p>å°†release/1.0.0åˆ†æ”¯çš„ä»£ç æäº¤ç»™æµ‹è¯•åŒå­¦è¿›è¡Œæµ‹è¯•ã€‚è¿™é‡Œå‡è®¾ä¸€ä¸ªæµ‹è¯•å¤±è´¥çš„åœºæ™¯ï¼šæˆ‘ä»¬è¦æ±‚æ‰“å°â€œhello worldâ€ï¼Œä½†æ‰“å°çš„æ˜¯â€œHello Worldâ€ï¼Œéœ€è¦ä¿®å¤ã€‚é‚£å…·ä½“åº”è¯¥æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥ç›´æ¥åœ¨release/1.0.0åˆ†æ”¯ä¿®æ”¹ä»£ç ï¼Œä¿®æ”¹å®Œæˆåï¼Œæœ¬åœ°æ„å»ºå¹¶æäº¤ä»£ç ï¼š</p><pre><code>$ make\n$ git add internal/iamctl/cmd/helloworld/\n$ git commit -m &quot;fix: fix helloworld print bug&quot;\n$ git push origin release/1.0.0\n</code></pre><p>pushåˆ°release/1.0.0åï¼ŒGitHub Actionsä¼šæ‰§è¡ŒCIæµæ°´çº¿ã€‚å¦‚æœæµæ°´çº¿æ‰§è¡ŒæˆåŠŸï¼Œå°±å°†ä»£ç æä¾›ç»™æµ‹è¯•ï¼›å¦‚æœæµ‹è¯•ä¸æˆåŠŸï¼Œå†é‡æ–°ä¿®æ”¹ï¼Œç›´åˆ°æµæ°´çº¿æ‰§è¡ŒæˆåŠŸã€‚</p><p>æµ‹è¯•åŒå­¦ä¼šå¯¹release/1.0.0åˆ†æ”¯çš„ä»£ç è¿›è¡Œå……åˆ†çš„æµ‹è¯•ï¼Œä¾‹å¦‚åŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç³»ç»Ÿæµ‹è¯•ç­‰ã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼Œæµ‹è¯•é€šè¿‡åï¼Œå°†åŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯ã€‚</p><pre><code>$ git checkout develop\n$ git merge --no-ff release/1.0.0\n$ git checkout master\n$ git merge --no-ff release/1.0.0\n$ git tag -a v1.0.0 -m &quot;add print hello world&quot; # masteråˆ†æ”¯æ‰“tag\n</code></pre><p>åˆ°è¿™é‡Œï¼Œæµ‹è¯•é˜¶æ®µçš„æ“ä½œå°±åŸºæœ¬å®Œæˆäº†ã€‚æµ‹è¯•é˜¶æ®µçš„äº§ç‰©æ˜¯master/developåˆ†æ”¯çš„ä»£ç ã€‚</p><p>ç¬¬å››æ­¥ï¼Œåˆ é™¤feature/helloworldåˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ€§åˆ é™¤release/1.0.0åˆ†æ”¯ã€‚</p><p>æˆ‘ä»¬çš„ä»£ç éƒ½åˆå¹¶å…¥master/developåˆ†æ”¯åï¼Œfeatureå¼€å‘è€…å¯ä»¥é€‰æ‹©æ˜¯å¦è¦ä¿ç•™featureã€‚ä¸è¿‡ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„åŸå› ï¼Œæˆ‘å»ºè®®åˆ æ‰ï¼Œå› ä¸ºfeatureåˆ†æ”¯å¤ªå¤šçš„è¯ï¼Œä¸ä»…çœ‹èµ·æ¥å¾ˆä¹±ï¼Œè¿˜ä¼šå½±å“æ€§èƒ½ï¼Œåˆ é™¤æ“ä½œå¦‚ä¸‹ï¼š</p><pre><code>$ git branch -d feature/helloworld\n</code></pre><h2>IAMé¡¹ç›®çš„Makefileé¡¹ç›®ç®¡ç†æŠ€å·§</h2><p>åœ¨ä¸Šé¢çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬ä»¥ç ”å‘æµç¨‹ä¸ºä¸»çº¿ï¼Œäº²èº«ä½“éªŒäº†IAMé¡¹ç›®çš„Makefileé¡¹ç›®ç®¡ç†åŠŸèƒ½ã€‚è¿™äº›æ˜¯ä½ æœ€åº”è¯¥æŒæ¡çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†IAMé¡¹ç›®çš„Makefileè¿˜æœ‰å¾ˆå¤šåŠŸèƒ½å’Œè®¾è®¡æŠ€å·§ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šç»™ä½ åˆ†äº«ä¸€äº›å¾ˆæœ‰ä»·å€¼çš„Makefileé¡¹ç›®ç®¡ç†æŠ€å·§ã€‚</p><h3>helpè‡ªåŠ¨è§£æ</h3><p>å› ä¸ºéšç€é¡¹ç›®çš„æ‰©å±•ï¼ŒMakefileå¤§æ¦‚ç‡ä¼šä¸æ–­åŠ å…¥æ–°çš„ç®¡ç†åŠŸèƒ½ï¼Œè¿™äº›ç®¡ç†åŠŸèƒ½ä¹Ÿéœ€è¦åŠ å…¥åˆ° <code>make help</code> è¾“å‡ºä¸­ã€‚ä½†å¦‚æœæ¯æ·»åŠ ä¸€ä¸ªç›®æ ‡ï¼Œéƒ½è¦ä¿®æ”¹ <code>make help</code> å‘½ä»¤ï¼Œå°±æ¯”è¾ƒéº»çƒ¦ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚æ‰€ä»¥è¿™é‡Œï¼Œæˆ‘é€šè¿‡è‡ªåŠ¨è§£æçš„æ–¹å¼ï¼Œæ¥ç”Ÿæˆ<code>make help</code>è¾“å‡ºï¼š</p><pre><code>## help: Show this help info.    \n.PHONY: help           \nhelp: Makefile               \n  @echo -e &quot;\\nUsage: make &lt;TARGETS&gt; &lt;OPTIONS&gt; ...\\n\\nTargets:&quot;                         \n  @sed -n 's/^##//p' $&lt; | column -t -s ':' | sed -e 's/^/ /'    \n  @echo &quot;$$USAGE_OPTIONS&quot;    \n</code></pre><p>ç›®æ ‡helpçš„å‘½ä»¤ä¸­ï¼Œé€šè¿‡ <code>sed -n 's/^##//p' $&lt; | column -t -s ':' | sed -e 's/^/ /'</code> å‘½ä»¤ï¼Œè‡ªåŠ¨è§£æMakefileä¸­ <code>##</code> å¼€å¤´çš„æ³¨é‡Šè¡Œï¼Œä»è€Œè‡ªåŠ¨ç”Ÿæˆ <code>make help</code> è¾“å‡ºã€‚</p><h3>Optionsä¸­æŒ‡å®šå˜é‡å€¼</h3><p>é€šè¿‡ä»¥ä¸‹èµ‹å€¼æ–¹å¼ï¼Œå˜é‡å¯ä»¥åœ¨Makefile optionsä¸­è¢«æŒ‡å®šï¼š</p><pre><code>ifeq ($(origin COVERAGE),undefined)    \nCOVERAGE := 60    \nendif   \n</code></pre><p>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ‰§è¡Œ<code>make</code>  ï¼Œåˆ™COVERAGEè®¾ç½®ä¸ºé»˜è®¤å€¼60ï¼›å¦‚æœæˆ‘ä»¬æ‰§è¡Œ<code>make COVERAGE=90</code>  ï¼Œåˆ™COVERAGEå€¼ä¸º90ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ›´çµæ´»åœ°æ§åˆ¶Makefileçš„è¡Œä¸ºã€‚</p><h3>è‡ªåŠ¨ç”ŸæˆCHANGELOG</h3><p>ä¸€ä¸ªé¡¹ç›®æœ€å¥½æœ‰CHANGELOGç”¨æ¥å±•ç¤ºæ¯ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å˜æ›´å†…å®¹ï¼Œä½œä¸ºRelease Noteçš„ä¸€éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ¯æ¬¡éƒ½è¦æ‰‹åŠ¨ç¼–å†™CHANGELOGï¼Œä¼šå¾ˆéº»çƒ¦ï¼Œä¹Ÿä¸å®¹æ˜“åšæŒï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<a href=\"https://github.com/git-chglog/git-chglog\">git-chglog</a>å·¥å…·æ¥è‡ªåŠ¨ç”Ÿæˆã€‚</p><p>IAMé¡¹ç›®çš„git-chglogå·¥å…·çš„é…ç½®æ–‡ä»¶æ”¾åœ¨<a href=\"https://github.com/marmotedu/iam/tree/master/.chglog\">.chglog</a>ç›®å½•ä¸‹ï¼Œåœ¨å­¦ä¹ git-chglogå·¥å…·æ—¶ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹ã€‚</p><h3>è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬å·</h3><p>ä¸€ä¸ªé¡¹ç›®ä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œå½“å‰ç”¨å¾—æ¯”è¾ƒå¤šçš„æ˜¯è¯­ä¹‰åŒ–ç‰ˆæœ¬å·è§„èŒƒã€‚ä½†å¦‚æœé å¼€å‘è€…æ‰‹åŠ¨æ‰“ç‰ˆæœ¬å·ï¼Œå·¥ä½œæ•ˆç‡ä½ä¸è¯´ï¼Œç»å¸¸è¿˜ä¼šå‡ºç°æ¼æ‰“ã€æ‰“çš„ç‰ˆæœ¬å·ä¸è§„èŒƒç­‰é—®é¢˜ã€‚æ‰€ä»¥æœ€å¥½çš„åŠæ³•æ˜¯ï¼Œç‰ˆæœ¬å·ä¹Ÿé€šè¿‡å·¥å…·è‡ªåŠ¨ç”Ÿæˆã€‚åœ¨IAMé¡¹ç›®ä¸­ï¼Œé‡‡ç”¨äº†<a href=\"https://github.com/arnaud-deprez/gsemver\">gsemver</a>å·¥å…·æ¥è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬å·ã€‚</p><p>æ•´ä¸ªIAMé¡¹ç›®çš„ç‰ˆæœ¬å·ï¼Œéƒ½æ˜¯é€šè¿‡<a href=\"https://github.com/marmotedu/iam/blob/master/scripts/ensure_tag.sh\">scripts/ensure_tag.sh</a>è„šæœ¬æ¥ç”Ÿæˆçš„ï¼š</p><pre><code>version=v`gsemver bump`\nif [ -z &quot;`git tag -l $version`&quot; ];then\n  git tag -a -m &quot;release version $version&quot; $version\nfi\n</code></pre><p>åœ¨scripts/ensure_tag.shè„šæœ¬ä¸­ï¼Œé€šè¿‡ <code>gsemver bump</code> å‘½ä»¤æ¥è‡ªåŠ¨åŒ–ç”Ÿæˆè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬å·ï¼Œå¹¶æ‰§è¡Œ <code>git tag -a</code> ç»™ä»“åº“æ‰“ä¸Šç‰ˆæœ¬å·æ ‡ç­¾ï¼Œ<code>gsemver</code> å‘½ä»¤ä¼šæ ¹æ®Commit Messageè‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬å·ã€‚</p><p>ä¹‹åï¼ŒMakefileå’ŒShellè„šæœ¬ç”¨åˆ°çš„æ‰€æœ‰ç‰ˆæœ¬å·å‡ç»Ÿä¸€ä½¿ç”¨<a href=\"https://github.com/marmotedu/iam/blob/v1.0.0/scripts/make-rules/common.mk#L28\">scripts/make-rules/common.mk</a>æ–‡ä»¶ä¸­çš„VERSIONå˜é‡ï¼š</p><pre><code>VERSION := $(shell git describe --tags --always --match='v*')\n</code></pre><p>ä¸Šè¿°çš„Shellå‘½ä»¤é€šè¿‡ <code>git describe</code> æ¥è·å–ç¦»å½“å‰æäº¤æœ€è¿‘çš„tagï¼ˆç‰ˆæœ¬å·ï¼‰ã€‚</p><p>åœ¨æ‰§è¡Œ <code>git describe</code> æ—¶ï¼Œå¦‚æœç¬¦åˆæ¡ä»¶çš„tagæŒ‡å‘æœ€æ–°æäº¤ï¼Œåˆ™åªæ˜¾ç¤ºtagçš„åå­—ï¼Œå¦åˆ™ä¼šæœ‰ç›¸å…³çš„åç¼€ï¼Œæ¥æè¿°è¯¥tagä¹‹åæœ‰å¤šå°‘æ¬¡æäº¤ï¼Œä»¥åŠæœ€æ–°çš„æäº¤commit idã€‚ä¾‹å¦‚ï¼š</p><pre><code>$ git describe --tags --always --match='v*'\nv1.0.0-3-g1909e47\n</code></pre><p>è¿™é‡Œè§£é‡Šä¸‹ç‰ˆæœ¬å·ä¸­å„å­—ç¬¦çš„å«ä¹‰ï¼š</p><ul>\n<li>3ï¼šè¡¨ç¤ºè‡ªæ‰“tag v1.0.0ä»¥æ¥æœ‰3æ¬¡æäº¤ã€‚</li>\n<li>g1909e47ï¼šg ä¸ºgitçš„ç¼©å†™ï¼Œåœ¨å¤šç§ç®¡ç†å·¥å…·å¹¶å­˜çš„ç¯å¢ƒä¸­å¾ˆæœ‰ç”¨å¤„ã€‚</li>\n<li>1909e47ï¼š7ä½å­—ç¬¦è¡¨ç¤ºä¸ºæœ€æ–°æäº¤çš„commit id å‰7ä½ã€‚</li>\n</ul><p>æœ€åè§£é‡Šä¸‹å‚æ•°ï¼š</p><ul>\n<li>â€“tagsï¼Œä½¿ç”¨æ‰€æœ‰çš„æ ‡ç­¾ï¼Œè€Œä¸æ˜¯åªä½¿ç”¨å¸¦æ³¨é‡Šçš„æ ‡ç­¾ï¼ˆannotated tagï¼‰ã€‚<code>git tag &lt;tagname&gt; </code>ç”Ÿæˆä¸€ä¸ª unannotated tagï¼Œ<code>git tag -a &lt;tagname&gt; -m '&lt;message&gt;' </code>ç”Ÿæˆä¸€ä¸ª annotated tagã€‚</li>\n<li>â€“alwaysï¼Œå¦‚æœä»“åº“æ²¡æœ‰å¯ç”¨çš„æ ‡ç­¾ï¼Œé‚£ä¹ˆä½¿ç”¨commitç¼©å†™æ¥æ›¿ä»£æ ‡ç­¾ã€‚</li>\n<li>â€“match <pattern>ï¼Œåªè€ƒè™‘ä¸ç»™å®šæ¨¡å¼ç›¸åŒ¹é…çš„æ ‡ç­¾ã€‚</pattern></li>\n</ul><h3>ä¿æŒè¡Œä¸ºä¸€è‡´</h3><p>ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ä¸€äº›ç®¡ç†åŠŸèƒ½ï¼Œä¾‹å¦‚æ£€æŸ¥Commit Messageæ˜¯å¦ç¬¦åˆè§„èŒƒã€è‡ªåŠ¨ç”ŸæˆCHANGELOGã€è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬å·ã€‚è¿™äº›å¯ä»¥é€šè¿‡Makefileæ¥æ“ä½œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥IAMçš„æ‰€æœ‰Commitæ˜¯å¦ç¬¦åˆAngular Commit Messageè§„èŒƒï¼š</p><pre><code>$ go-gitlint\nb62db1f: subject does not match regex [^(revert: )?(feat|fix|perf|style|refactor|test|ci|docs|chore)(\\(.+\\))?: [^A-Z].*[^.]$]\n</code></pre><p>ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œæ‰‹åŠ¨æ¥ç”ŸæˆCHANGELOGï¼š</p><pre><code>$ git-chglog v1.0.0 CHANGELOG/CHANGELOG-1.0.0.md\n</code></pre><p>è¿˜å¯ä»¥æ‰§è¡Œgsemveræ¥ç”Ÿæˆç‰ˆæœ¬å·ï¼š</p><pre><code>$ gsemver bump\n1.0.1\n</code></pre><p>è¿™é‡Œè¦å¼ºè°ƒçš„æ˜¯ï¼Œæˆ‘ä»¬è¦ä¿è¯<strong>ä¸ç®¡ä½¿ç”¨æ‰‹åŠ¨æ“ä½œï¼Œè¿˜æ˜¯é€šè¿‡Makefileæ“ä½œ</strong>ï¼Œéƒ½è¦ç¡®ä¿git commit messageè§„èŒƒæ£€æŸ¥ç»“æœã€ç”Ÿæˆçš„CHANGELOGã€ç”Ÿæˆçš„ç‰ˆæœ¬å·æ˜¯ä¸€è‡´çš„ã€‚è¿™éœ€è¦æˆ‘ä»¬<strong>é‡‡ç”¨åŒä¸€ç§æ“ä½œæ–¹å¼</strong>ã€‚</p><h2>æ€»ç»“</h2><p>åœ¨æ•´ä¸ªç ”å‘æµç¨‹ä¸­ï¼Œéœ€è¦å¼€å‘äººå‘˜æ·±åº¦å‚ä¸çš„é˜¶æ®µæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯å¼€å‘é˜¶æ®µå’Œæµ‹è¯•é˜¶æ®µã€‚åœ¨å¼€å‘é˜¶æ®µï¼Œå¼€å‘è€…å®Œæˆä»£ç å¼€å‘ä¹‹åï¼Œé€šå¸¸éœ€è¦æ‰§è¡Œç”Ÿæˆä»£ç ã€ç‰ˆæƒæ£€æŸ¥ã€ä»£ç æ ¼å¼åŒ–ã€é™æ€ä»£ç æ£€æŸ¥ã€å•å…ƒæµ‹è¯•ã€æ„å»ºç­‰æ“ä½œã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™äº›æ“ä½œé›†æˆåœ¨Makefileä¸­ï¼Œæ¥æé«˜æ•ˆç‡ï¼Œå¹¶å€Ÿæ­¤ç»Ÿä¸€æ“ä½œã€‚</p><p>å¦å¤–ï¼ŒIAMé¡¹ç›®åœ¨ç¼–å†™Makefileæ—¶ä¹Ÿé‡‡ç”¨äº†ä¸€äº›æŠ€å·§ï¼Œä¾‹å¦‚<code>make help</code> å‘½ä»¤ä¸­ï¼Œhelpä¿¡æ¯æ˜¯é€šè¿‡è§£æMakefileæ–‡ä»¶çš„æ³¨é‡Šæ¥å®Œæˆçš„ï¼›å¯ä»¥é€šè¿‡git-chglogè‡ªåŠ¨ç”ŸæˆCHANGELOGï¼›é€šè¿‡gsemverè‡ªåŠ¨ç”Ÿæˆè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬å·ç­‰ã€‚</p><h2>è¯¾åç»ƒä¹ </h2><ol>\n<li>çœ‹ä¸‹IAMé¡¹ç›®çš„ <code>make dependencies</code> æ˜¯å¦‚ä½•å®ç°çš„ï¼Œè¿™æ ·å®ç°æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</li>\n<li>IAMé¡¹ç›®ä¸­ä½¿ç”¨ äº†<code>gofmt</code> ã€<code>goimports</code> ã€<code>golines</code> 3ç§æ ¼å¼åŒ–å·¥å…·ï¼Œæ€è€ƒä¸‹ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–æ ¼å¼åŒ–å·¥å…·å€¼å¾—é›†æˆåœ¨ <code>make format</code> ç›®æ ‡çš„å‘½ä»¤ä¸­ï¼Ÿ</li>\n</ol><p>æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„è§è§£ï¼Œå’Œæˆ‘ä¸€èµ·äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ï¼</p>","neighbors":{"left":{"article_title":"14 | é¡¹ç›®ç®¡ç†ï¼šå¦‚ä½•ç¼–å†™é«˜è´¨é‡çš„Makefileï¼Ÿ","id":388920},"right":{"article_title":"16 | ä»£ç æ£€æŸ¥ï¼šå¦‚ä½•è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼Ÿ","id":390401}},"comments":[{"had_liked":false,"id":306403,"user_name":"Sch0ng","can_delete":false,"product_type":"c1","uid":1145554,"ip_address":"","ucode":"73F6113931B1AC","user_header":"https://static001.geekbang.org/account/avatar/00/11/7a/d2/4ba67c0c.jpg","comment_is_top":false,"comment_ctime":1628526543,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35988264911","product_id":100079601,"comment_content":"è¿™ä¸€å¥—æµç¨‹ä¸‹æ¥ç¡®å®èƒ½èŠ‚çœå¾ˆå¤šæ—¶é—´ï¼Œé‡å¤æ€§çš„æ“ä½œäº¤ç»™è‡ªåŠ¨åŒ–æ¯”äººæ‰‹å·¥å†™æ›´åŠ å¯é ã€‚<br>é«˜æ•ˆï¼Œçœæ—¶çœåŠ›è¿˜ä¸æ˜“å‡ºé”™ã€‚","like_count":8},{"had_liked":false,"id":302366,"user_name":"Alery","can_delete":false,"product_type":"c1","uid":1156557,"ip_address":"","ucode":"08F3F49181E67B","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/cd/3aff5d57.jpg","comment_is_top":false,"comment_ctime":1626180656,"is_pvip":false,"replies":[{"id":"109489","content":"éƒ½å¯ä»¥çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":302366,"uid":"1167883","ip_address":"","utype":1,"ctime":1626280252,"user_name_real":"CK1.0"}],"discussion_count":1,"race_medal":0,"score":"18806049840","product_id":100079601,"comment_content":"â€œå¦‚æœ review ä¸é€šè¿‡ï¼Œfeature å¼€å‘è€…å¯ä»¥ç›´æ¥åœ¨ feature&#47;helloworld åˆ†æ”¯ä¿®æ­£ä»£ç ï¼Œå¹¶ push åˆ°è¿œç«¯çš„ feature&#47;helloworld åˆ†æ”¯ï¼Œç„¶åé€šçŸ¥ reviewers å†æ¬¡ reviewã€‚å› ä¸ºæœ‰ push äº‹ä»¶å‘ç”Ÿï¼Œæ‰€ä»¥ä¼šè§¦å‘ GitHub Actions CI æµæ°´çº¿ã€‚â€<br><br>è¯·é—®ä¿®å¤åçš„ä»£ç æ˜¯ç›´æ¥æ‰§è¡Œgith commit --amendè¿˜æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªcommit","like_count":4,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523278,"discussion_content":"éƒ½å¯ä»¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626280252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299925,"user_name":"daz2yy","can_delete":false,"product_type":"c1","uid":1008723,"ip_address":"","ucode":"639A67961EC893","user_header":"https://static001.geekbang.org/account/avatar/00/0f/64/53/c93b8110.jpg","comment_is_top":false,"comment_ctime":1624925399,"is_pvip":false,"replies":[{"id":"108772","content":"æµ‹è¯•å®Œä¹‹åå°±ä¼šä¸Šçº¿<br><br>æ•°æ®åº“å˜åŠ¨è¿™ç§è¿ç»´å¼€å‘ï¼Œå‘å¸ƒçš„æ—¶å€™å˜åŠ¨ï¼Œå¯ä»¥å†™åœ¨å‘å¸ƒè®¡åˆ’é‡Œ","user_name":"ä½œè€…å›å¤","comment_id":299925,"uid":"1167883","ip_address":"","utype":1,"ctime":1624945261,"user_name_real":"CK1.0"}],"discussion_count":3,"race_medal":0,"score":"14509827287","product_id":100079601,"comment_content":"è€å¸ˆå¥½ï¼Œæƒ³é—®ä¸‹ï¼Œæµ‹è¯•é˜¶æ®µè¿‡äº†ä¹‹åï¼Œè¿™ä¸ªç‰¹æ€§å°±èƒ½ç›´æ¥ä¸Šçº¿å—ï¼Ÿè¿˜æ˜¯è¯´ç­‰å¤§å®¶ä¸€èµ·å¼€å‘å®Œè¿™ä¸ªè¿­ä»£å†…å®¹å†ä¸Šçº¿ï¼Ÿ<br>å¦å¤–ï¼Œåç«¯å¼€å‘è¿™é‡Œç»å¸¸ä¼šè®¾è®¡ SQL çš„å˜åŠ¨ï¼Œä¸€ç§æ˜¯æ•°æ®å˜åŠ¨ï¼Œä¸€ç§æ˜¯ç»“æ„å˜åŠ¨ï¼Œè€å¸ˆè¿™å—æ€ä¹ˆå»ç®¡ç†çš„å‘¢ï¼Ÿè¿˜æœ‰å¦‚ä½•é›†æˆåˆ°ç‰¹æ€§ç ”å‘æµç¨‹é‡Œçš„å‘¢ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522588,"discussion_content":"æµ‹è¯•å®Œä¹‹åå°±ä¼šä¸Šçº¿\n\næ•°æ®åº“å˜åŠ¨è¿™ç§è¿ç»´å¼€å‘ï¼Œå‘å¸ƒçš„æ—¶å€™å˜åŠ¨ï¼Œå¯ä»¥å†™åœ¨å‘å¸ƒè®¡åˆ’é‡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624945261,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008723,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/64/53/c93b8110.jpg","nickname":"daz2yy","note":"","ucode":"639A67961EC893","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":381224,"discussion_content":"è°¢è°¢è€å¸ˆå›å¤ï¼Œåç»­ä¼šæœ‰è¿™å—çš„é¡¹ç›®å®æˆ˜å˜›ï¼Œä¹‹å‰åšPHPé¡¹ç›®çš„æ—¶å€™æˆ‘ä»¬æœ‰ç”¨ laravelï¼Œå®ƒé›†æˆæœ‰migrationçš„åŠŸèƒ½ï¼Œæ‰€ä»¥å¾ˆæ–¹ä¾¿ç®¡ç†æ•°æ®åº“ç‰ˆæœ¬ï¼Œgoè¿™è¾¹é¡¹ç›®ä¼šè¿™æ ·ç”¨å—ï¼Ÿ\n\nå¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå•ç‹¬çš„å‘ç‰ˆåŒ…æ‹¬æ•°æ®åº“çš„æ›´æ–°ï¼Œå¦‚ä½•åŒæ­¥ç»™å…¶å®ƒçš„ç ”å‘åŒå­¦å‘¢ï¼Ÿå‡å¦‚åç»­æœ‰å…¶ä»–åŒå­¦æ¥ç€å¼€å‘åç»­åŠŸèƒ½ï¼Œæˆ–è€…å…¶ä»–åŒå­¦æœ‰ä¾èµ–äºæ­¤åŠŸèƒ½ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1624958485,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1351076,"avatar":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","nickname":"lesserror","note":"","ucode":"25A54D1165FCF6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400152,"discussion_content":"è¿™é‡Œçš„å‘å¸ƒè®¡åˆ’æ€ä¹ˆç†è§£å‘¢ï¼Ÿ æœ‰åŒå­¦çŸ¥é“ä¹ˆï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633182446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":305766,"user_name":"å¾è•´","can_delete":false,"product_type":"c1","uid":1436177,"ip_address":"","ucode":"1FDA719936FDA2","user_header":"https://static001.geekbang.org/account/avatar/00/15/ea/11/4f464693.jpg","comment_is_top":false,"comment_ctime":1628152660,"is_pvip":false,"replies":[{"id":"110911","content":"å¥½é—®é¢˜ã€‚æ‰“åœ¨releaseåˆ†æ”¯ä¸Šã€‚<br><br>masteråˆ†æ”¯ä¸Šçš„ä»£ç éƒ½æ˜¯å……åˆ†æµ‹è¯•è¿‡çš„ä»£ç ã€‚ä¸ç„¶ä¸è®©åˆmasterçš„","user_name":"ä½œè€…å›å¤","comment_id":305766,"uid":"1167883","ip_address":"","utype":1,"ctime":1628525750,"user_name_real":"CK1.0"}],"discussion_count":1,"race_medal":0,"score":"10218087252","product_id":100079601,"comment_content":"æµ‹è¯•å®Œæˆçš„tagåº”è¯¥æ‰“åœ¨masterä¸Šï¼Œè¿˜æ˜¯releaseåˆ†æ”¯å¯¹åº”çš„commitä¸Šå‘¢ï¼Ÿmasterä¸Šåº”è¯¥è¿˜æœ‰å…¶å®ƒæ²¡æœ‰æµ‹è¯•çš„åŠŸèƒ½å§ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524504,"discussion_content":"å¥½é—®é¢˜ã€‚æ‰“åœ¨releaseåˆ†æ”¯ä¸Šã€‚\n\nmasteråˆ†æ”¯ä¸Šçš„ä»£ç éƒ½æ˜¯å……åˆ†æµ‹è¯•è¿‡çš„ä»£ç ã€‚ä¸ç„¶ä¸è®©åˆmasterçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628525750,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":299907,"user_name":"helloworld","can_delete":false,"product_type":"c1","uid":1105161,"ip_address":"","ucode":"1EECCA0F43E278","user_header":"https://static001.geekbang.org/account/avatar/00/10/dd/09/feca820a.jpg","comment_is_top":false,"comment_ctime":1624898794,"is_pvip":false,"replies":[{"id":"108773","content":"å¦‚æœä»£ç éƒ½ä¸€æ ·æ²¡å¿…è¦å†åˆï¼Œä¸è¿‡å†åˆä¸‹æ²¡ä»€ä¹ˆå¤§é—®é¢˜ï¼Œå°å¿ƒæ€»ä¸ä¸ºè¿‡ã€‚","user_name":"ä½œè€…å›å¤","comment_id":299907,"uid":"1167883","ip_address":"","utype":1,"ctime":1624945378,"user_name_real":"CK1.0"}],"discussion_count":1,"race_medal":0,"score":"10214833386","product_id":100079601,"comment_content":"releaseåˆ†æ”¯æ˜¯ä»developåˆ†æ”¯æ¥çš„ï¼Œå¦‚æœæµ‹è¯•ç›´æ¥é€šè¿‡ï¼Œæ²¡æœ‰åšè¿›ä¸€æ­¥ä¿®æ”¹ï¼Œå°±ä¸ç”¨å†åˆå¹¶åˆ°developåˆ†æ”¯äº†å§ï¼Œç›´æ¥åˆå¹¶åˆ°masteråˆ†æ”¯å°±å¯ä»¥äº†å§ï¼Œè¿™æ ·ç†è§£å¯¹ä¸å¯¹å‘¢","like_count":3,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522582,"discussion_content":"å¦‚æœä»£ç éƒ½ä¸€æ ·æ²¡å¿…è¦å†åˆï¼Œä¸è¿‡å†åˆä¸‹æ²¡ä»€ä¹ˆå¤§é—®é¢˜ï¼Œå°å¿ƒæ€»ä¸ä¸ºè¿‡ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624945378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":340495,"user_name":"Geek_6bdb4e","can_delete":false,"product_type":"c1","uid":2720810,"ip_address":"","ucode":"2953D400AA5385","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","comment_is_top":false,"comment_ctime":1648864220,"is_pvip":true,"replies":[{"id":"125558","content":"è°ƒç”¨æ—¶æœºï¼Œé¡¹ç›®åˆšcloneä¸‹æ¥çš„æ—¶å€™ï¼š<br>git clone https:&#47;&#47;github.com&#47;marmotedu&#47;iam<br>make dependencies<br><br>ä¸æ”¾åœ¨allçš„åŸå› æ—¶ï¼Œmake dependencies åªéœ€è¦æ‰§è¡Œä¸€æ¬¡å°±å¯ä»¥äº†ã€‚<br>æ”¾åœ¨allä¸­ï¼Œæ¯æ¬¡éƒ½è¦æ‰§è¡Œdependenciesï¼Œä¼šå¯¼è‡´makeå‘½ä»¤å¾ˆæ…¢<br><br><br>","user_name":"ä½œè€…å›å¤","comment_id":340495,"uid":"1167883","ip_address":"","utype":1,"ctime":1651080207,"user_name_real":"ç¼–è¾‘"}],"discussion_count":2,"race_medal":0,"score":"5943831516","product_id":100079601,"comment_content":"æˆ‘æ¥å›ç­”ä¸€ä¸‹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šmake dependenciesä¼šæ‰§è¡Œdependencies.runï¼Œè¿›è€Œæ‰§è¡Œ1. dependencies.packagesï¼Œè¿™ä¸ªæ˜¯å¯¹ä»£ç æœ¬èº«ä¾èµ–çš„packagesè¿›è¡Œç®¡ç†ï¼Œ2. dependencies.toolsï¼Œè¿™ä¸ªæ˜¯å¯¹é¡¹ç›®æœ¬èº«ä¾èµ–çš„ä¸€äº›å·¥å…·è¿›è¡Œæ£€æŸ¥å’Œç®¡ç†ï¼Œå…¶ä¸­åˆæ ¹æ®é‡è¦ç­‰çº§åŒºåˆ†ä¸ºblockerå’Œcriticalä»¥åŠtrivialï¼Œç¼ºå¤±blockerå¯èƒ½å¯¼è‡´CIæµç¨‹å¤±è´¥ï¼Œç¼ºå¤±criticalå¯èƒ½å¯¼è‡´makeçš„ä¸€äº›ç¯èŠ‚å¤±è´¥ï¼Œtiivialæ˜¯å¯é€‰çš„å·¥å…·ï¼Œç¼ºå¤±æ²¡æœ‰ä»»ä½•å½±å“ã€‚æˆ‘æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œè¿™ä¸ªmake dependenciesçš„è°ƒç”¨æ—¶æœºæ˜¯ä»€ä¹ˆæ—¶å€™ï¼Œå‘ç°åªæœ‰é€šè¿‡make dependenciesæ—¶å€™æ‰ä¼šè°ƒç”¨ï¼Œä¸ºä»€ä¹ˆä¸æŠŠè¿™æ¡æ”¾åˆ°make allçš„ä¾èµ–é¡¹é‡Œé¢å‘¢","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568255,"discussion_content":"è°ƒç”¨æ—¶æœºï¼Œé¡¹ç›®åˆšcloneä¸‹æ¥çš„æ—¶å€™ï¼š\ngit clone https://github.com/marmotedu/iam\nmake dependencies\n\nä¸æ”¾åœ¨allçš„åŸå› æ—¶ï¼Œmake dependencies åªéœ€è¦æ‰§è¡Œä¸€æ¬¡å°±å¯ä»¥äº†ã€‚\næ”¾åœ¨allä¸­ï¼Œæ¯æ¬¡éƒ½è¦æ‰§è¡Œdependenciesï¼Œä¼šå¯¼è‡´makeå‘½ä»¤å¾ˆæ…¢\n\n\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651080207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2720810,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/xfclWEPQ7szTZnKqnX9icSbgDWV0VAib3Cyo8Vg0OG3Usby88ic7ZgO2ho5lj0icOWI4JeJ70zUBiaTW1xh1UCFRPqA/132","nickname":"Geek_6bdb4e","note":"","ucode":"2953D400AA5385","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568377,"discussion_content":"å¤šè°¢å¤šè°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651120301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":307623,"user_name":"é™ˆéº’æ–‡","can_delete":false,"product_type":"c1","uid":2187256,"ip_address":"","ucode":"41475885FA5AD5","user_header":"https://static001.geekbang.org/account/avatar/00/21/5f/f8/1d16434b.jpg","comment_is_top":false,"comment_ctime":1629182615,"is_pvip":false,"replies":[{"id":"111376","content":"è·Ÿç€è€å¸ˆçš„æ€è·¯å­¦ä¹ å°±å¯ä»¥äº†","user_name":"ä½œè€…å›å¤","comment_id":307623,"uid":"1167883","ip_address":"","utype":1,"ctime":1629242370,"user_name_real":"CK1.0"}],"discussion_count":1,"race_medal":0,"score":"5924149911","product_id":100079601,"comment_content":"è¿™ä¹ˆå¤šçš„çŸ¥è¯†ç‚¹ï¼Œä»å“ªå¼€å§‹å…¥æ‰‹æ¯”è¾ƒèƒ½è·Ÿä¸Šå¤§ä½¬çš„èŠ‚å¥ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":525221,"discussion_content":"è·Ÿç€è€å¸ˆçš„æ€è·¯å­¦ä¹ å°±å¯ä»¥äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1629242370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":300086,"user_name":"Geek_4c902b","can_delete":false,"product_type":"c1","uid":2108063,"ip_address":"","ucode":"9404B396C83FD3","user_header":"","comment_is_top":false,"comment_ctime":1624979574,"is_pvip":false,"replies":[{"id":"108953","content":"make build BINS=iamctlä¼šæ„å»ºiamctlå·¥å…·ã€‚<br><br>iamctlåœ¨IAMé¡¹ç›®å®‰è£…é‚£ä¸€è®²ä¼šä»‹ç»å¦‚ä½•å®‰è£…ã€‚","user_name":"ä½œè€…å›å¤","comment_id":300086,"uid":"1167883","ip_address":"","utype":1,"ctime":1625388613,"user_name_real":"CK1.0"}],"discussion_count":1,"race_medal":0,"score":"5919946870","product_id":100079601,"comment_content":"è€å¸ˆï¼Œæ‚¨å¥½ï¼š<br>iamctl new helloworld  è¿™ä¸ªiamctl å‘½ä»¤å“ªæ¥çš„å‘€","like_count":1,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":522637,"discussion_content":"make build BINS=iamctlä¼šæ„å»ºiamctlå·¥å…·ã€‚\n\niamctlåœ¨IAMé¡¹ç›®å®‰è£…é‚£ä¸€è®²ä¼šä»‹ç»å¦‚ä½•å®‰è£…ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625388613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":349486,"user_name":"è´±è´±çš„æ¢¦æƒ³","can_delete":false,"product_type":"c1","uid":1068326,"ip_address":"","ucode":"A3F7AF23D193AF","user_header":"https://static001.geekbang.org/account/avatar/00/10/4d/26/44095eba.jpg","comment_is_top":false,"comment_ctime":1655990482,"is_pvip":true,"discussion_count":0,"race_medal":4,"score":"1655990482","product_id":100079601,"comment_content":"æ…¢æ…¢çš„å¹²æ´»","like_count":0},{"had_liked":false,"id":344353,"user_name":"H.xu","can_delete":false,"product_type":"c1","uid":2058007,"ip_address":"","ucode":"5FD118EA1A44B0","user_header":"https://static001.geekbang.org/account/avatar/00/1f/67/17/cbd5c23f.jpg","comment_is_top":false,"comment_ctime":1651486291,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1651486291","product_id":100079601,"comment_content":"[going@192 iam]$ make test<br>===========&gt; Run unit test<br>found packages example (doc.go) and main (example.go) in &#47;home&#47;going&#47;workspace&#47;golang&#47;src&#47;github.com&#47;marmotedu&#47;iam&#47;pkg&#47;rollinglog&#47;example<br>found packages example (doc.go) and main (example.go) in &#47;home&#47;going&#47;workspace&#47;golang&#47;src&#47;github.com&#47;marmotedu&#47;iam&#47;pkg&#47;validator&#47;example<br>no Go files in &#47;home&#47;going&#47;workspace&#47;golang&#47;src&#47;github.com&#47;marmotedu&#47;iam<br>make[1]: *** [scripts&#47;make-rules&#47;golang.mk:81: go.test] Error 1<br>make: *** [Makefile:108: test] Error 2<br>è¿™ä¸ªé”™è¯¯æ˜¯ä»€ä¹ˆåŸå› çš„å‘€","like_count":0,"discussions":[{"author":{"id":1313498,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0a/da/dcf8f2b1.jpg","nickname":"qiutian","note":"","ucode":"99658A8E342498","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576568,"discussion_content":"æˆ‘ä¹Ÿä¸€è·¯ç¢°åˆ°å¥½å¤šè¿™ç§é”™è¯¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655653092,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343729,"user_name":"ğŸŒ¿å°æ¯’è‰","can_delete":false,"product_type":"c1","uid":2667573,"ip_address":"","ucode":"6FAF0629DD827A","user_header":"https://static001.geekbang.org/account/avatar/00/28/b4/35/3a96e893.jpg","comment_is_top":false,"comment_ctime":1651026624,"is_pvip":true,"replies":[{"id":"125510","content":"è¿™ä¸ªè¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚å…·ä½“ï¼Œå¯ä»¥æ·»åŠ ä»£ç ç”ŸæˆåŠŸèƒ½é¡¹çš„æ—¶å€™ï¼Œè¯„ä¼°æµ‹è¯•ä¸‹","user_name":"ä½œè€…å›å¤","comment_id":343729,"uid":"1167883","ip_address":"","utype":1,"ctime":1651076445,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1651026624","product_id":100079601,"comment_content":"å¦‚ä½•ä¿è¯â€œé€šè¿‡make gen ç”Ÿæˆçš„å­˜é‡ä»£ç è¦å…·æœ‰å¹‚ç­‰æ€§â€ï¼Œ å¦‚ä½•æµ‹è¯•ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568199,"discussion_content":"è¿™ä¸ªè¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚å…·ä½“ï¼Œå¯ä»¥æ·»åŠ ä»£ç ç”ŸæˆåŠŸèƒ½é¡¹çš„æ—¶å€™ï¼Œè¯„ä¼°æµ‹è¯•ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651076446,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":343531,"user_name":"å°è¾¾","can_delete":false,"product_type":"c1","uid":2831405,"ip_address":"","ucode":"5CFFCEA36B3B8D","user_header":"","comment_is_top":false,"comment_ctime":1650894236,"is_pvip":true,"replies":[{"id":"125512","content":"åœ¨iamé¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ","user_name":"ä½œè€…å›å¤","comment_id":343531,"uid":"1167883","ip_address":"","utype":1,"ctime":1651077386,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1650894236","product_id":100079601,"comment_content":"iamctl new helloworld -d internal&#47;iamctl&#47;cmd&#47;helloworldè¿™ä¸ªåœ¨å“ªä¸ªç›®å½•ä¸‹æ‰§è¡Œå‘¢","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":568202,"discussion_content":"åœ¨iamé¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651077387,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336863,"user_name":"CSB22","can_delete":false,"product_type":"c1","uid":2084707,"ip_address":"","ucode":"D66335E41D3025","user_header":"https://static001.geekbang.org/account/avatar/00/1f/cf/63/23db516f.jpg","comment_is_top":false,"comment_ctime":1646405677,"is_pvip":true,"replies":[{"id":"123430","content":"æ„Ÿè°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","comment_id":336863,"uid":"1167883","ip_address":"","utype":1,"ctime":1647038613,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1646405677","product_id":100079601,"comment_content":"Markä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šMaintainer å¤„ç† pull request å†²çªåˆå¹¶ã€‚https:&#47;&#47;blog.csdn.net&#47;danchenziDCZ&#47;article&#47;details&#47;81061989","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555690,"discussion_content":"æ„Ÿè°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1647038613,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":335802,"user_name":"RunDouble","can_delete":false,"product_type":"c1","uid":1634539,"ip_address":"","ucode":"AFDA87B58B869E","user_header":"https://static001.geekbang.org/account/avatar/00/18/f0/eb/24a8be29.jpg","comment_is_top":false,"comment_ctime":1645693123,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1645693123","product_id":100079601,"comment_content":"å¥½åƒæ²¡æœ‰ç”¨ git rebase origin&#47;develop","like_count":0},{"had_liked":false,"id":327449,"user_name":"æ±Ÿå±±æœª","can_delete":false,"product_type":"c1","uid":1090196,"ip_address":"","ucode":"5293DD9482717F","user_header":"https://static001.geekbang.org/account/avatar/00/10/a2/94/ae0a60d8.jpg","comment_is_top":false,"comment_ctime":1640138273,"is_pvip":false,"replies":[{"id":"119715","content":"ç‰ˆæœ¬å·å¯æŒ‰ä»¥ä¸‹è§„åˆ™é€’å¢ï¼š<br>1. ä¸»ç‰ˆæœ¬å·ï¼ˆMAJORï¼‰ï¼šå½“åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼šå¸¦æœ‰ BREAKING CHANGE çš„ commitã€‚<br>2. æ¬¡ç‰ˆæœ¬å·ï¼ˆMINORï¼‰ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢åŠä¿®æ”¹ã€‚è¿™é‡Œæœ‰ä¸ªä¸æˆæ–‡çš„çº¦å®šéœ€è¦ä½ æ³¨æ„ï¼Œå¶æ•°ä¸ºç¨³å®šç‰ˆæœ¬ï¼Œå¥‡æ•°ä¸ºå¼€å‘ç‰ˆæœ¬ã€‚ï¼ˆfeat: xxxxï¼‰<br>3. ä¿®è®¢å·ï¼ˆPATCHï¼‰ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚(fix:  xxx)","user_name":"ä½œè€…å›å¤","comment_id":327449,"uid":"1167883","ip_address":"","utype":1,"ctime":1640826731,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1640138273","product_id":100079601,"comment_content":"æ ¹æ®ç¬¦åˆè§„èŒƒçš„commit message ç”Ÿæˆç‰ˆæœ¬å·ï¼Œè¿™é‡Œæœ‰ä¸ªç–‘é—®<br>æ˜¯ä¸€æ¬¡commitä¼šæ»šåŠ¨ä¸€æ¬¡æ•°å­—å—ï¼Ÿå› ä¸ºä¸€ä¸ªç‰ˆæœ¬å¯èƒ½åŒ…å«å¤šä¸ªfeatureï¼Œfeature aæœ‰ä¸€æ¬¡commitï¼Œfeature bæœ‰ä¸€æ¬¡commitï¼Œä½†å®ƒä»¬éƒ½å±äºè¿™æ¬¡çš„ç‰ˆæœ¬æ›´æ–°ã€‚é‚£ä¼šé€ æˆ minor version +2 å—","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542663,"discussion_content":"ç‰ˆæœ¬å·å¯æŒ‰ä»¥ä¸‹è§„åˆ™é€’å¢ï¼š\n1. ä¸»ç‰ˆæœ¬å·ï¼ˆMAJORï¼‰ï¼šå½“åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼šå¸¦æœ‰ BREAKING CHANGE çš„ commitã€‚\n2. æ¬¡ç‰ˆæœ¬å·ï¼ˆMINORï¼‰ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢åŠä¿®æ”¹ã€‚è¿™é‡Œæœ‰ä¸ªä¸æˆæ–‡çš„çº¦å®šéœ€è¦ä½ æ³¨æ„ï¼Œå¶æ•°ä¸ºç¨³å®šç‰ˆæœ¬ï¼Œå¥‡æ•°ä¸ºå¼€å‘ç‰ˆæœ¬ã€‚ï¼ˆfeat: xxxxï¼‰\n3. ä¿®è®¢å·ï¼ˆPATCHï¼‰ï¼šå½“åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚(fix:  xxx)","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640826731,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":323519,"user_name":"yandongxiao","can_delete":false,"product_type":"c1","uid":1017700,"ip_address":"","ucode":"D397F4DB0109C8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/87/64/3882d90d.jpg","comment_is_top":false,"comment_ctime":1637943387,"is_pvip":false,"replies":[{"id":"117668","content":"66666","user_name":"ä½œè€…å›å¤","comment_id":323519,"uid":"1167883","ip_address":"","utype":1,"ctime":1638361187,"user_name_real":"ç¼–è¾‘"}],"discussion_count":1,"race_medal":0,"score":"1637943387","product_id":100079601,"comment_content":"æ€»ç»“ï¼šè¿™äº›æ­¥éª¤åº”è¯¥æ˜¯å¼€å‘è€…ç»å¸¸é‡åˆ°çš„ã€‚<br>å¼€å‘é˜¶æ®µï¼šæ‰§è¡Œ make allï¼Œæœ¬åœ°èµ°ä¸€éCIæµç¨‹ã€‚åŒ…æ‹¬ï¼Œè‡ªåŠ¨ç”Ÿæˆéƒ¨åˆ†ä»£ç æˆ–æ–‡æ¡£ã€é™æ€ä»£ç æ£€æŸ¥ã€ä»£ç æ ¼å¼åŒ–ã€æ„å»ºç­‰ã€‚<br>æäº¤é˜¶æ®µï¼šæ£€æŸ¥ commit message æ˜¯å¦ç¬¦åˆ angular è§„èŒƒï¼›åœ¨ push commit &#47; pull request &#47; merge to develop ç‚¹ï¼Œè§¦å‘ CI æµç¨‹ã€‚æ‰€ä»¥ï¼Œå¼€å‘è€…è¦æœ‰åœ¨æœ¬åœ°è·‘CIçš„æ–¹æ³•ã€‚<br>æµ‹è¯•é˜¶æ®µï¼šæŒ‰ç…§ Git Flow çš„åŸåˆ™ï¼Œåˆ›å»ºå‡º release åˆ†æ”¯ï¼Œå¯¹ä»£ç è¿›è¡Œæµ‹è¯•ã€‚","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":535140,"discussion_content":"66666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638361187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":317489,"user_name":"ç–¯ç´","can_delete":false,"product_type":"c1","uid":1099379,"ip_address":"","ucode":"82ACAA4A27753D","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/73/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1634813000,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634813000","product_id":100079601,"comment_content":"ç§æˆ¿å¹²æ´»ğŸ‘","like_count":0},{"had_liked":false,"id":314537,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1633181291,"is_pvip":false,"replies":[{"id":"114076","content":"tagæœ‰2ç§ï¼Œæœ‰å¸¦æ³¨é‡Šçš„(git tag -a &lt;tagname&gt; -m &#39;&lt;message&gt;&#39;, ç”Ÿæˆä¸€ä¸ª annotated tag)ï¼Œæœ‰ä¸å¸¦æ³¨é‡Šçš„(git tag &lt;tagname&gt;, ç”Ÿæˆä¸€ä¸ª unannotated tag). git describeé»˜è®¤åªåˆ—å‡ºannotated tagï¼Œ--tagsæŒ‡å®šgit describeä¹Ÿåˆ—å‡ºunannotated tagï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰tagã€‚<br><br>--always: æ„æ€æ˜¯ï¼Œå¦‚æœå½“å‰gitä»“åº“æ²¡æœ‰tagï¼Œé‚£ä¹ˆä½¿ç”¨commitæ¥æ›¿ä»£ï¼Œä¾‹å¦‚ï¼š<br>$ git describe<br>fatal: No names found, cannot describe anything.<br>[colin@dev 222]$ git describe --always<br>18fedf3","user_name":"ä½œè€…å›å¤","comment_id":314537,"uid":"1167883","ip_address":"","utype":1,"ctime":1633664139,"user_name_real":"CK1.0"}],"discussion_count":1,"race_medal":0,"score":"1633181291","product_id":100079601,"comment_content":"å­”è€å¸ˆï¼Œ--tags  å’Œ --always è¿˜æ˜¯æ²¡èƒ½ç†è§£ã€‚èƒ½å†è¯¦ç»†è¯´è¯´çœ‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527716,"discussion_content":"tagæœ‰2ç§ï¼Œæœ‰å¸¦æ³¨é‡Šçš„(git tag -a &amp;lt;tagname&amp;gt; -m &amp;#39;&amp;lt;message&amp;gt;&amp;#39;, ç”Ÿæˆä¸€ä¸ª annotated tag)ï¼Œæœ‰ä¸å¸¦æ³¨é‡Šçš„(git tag &amp;lt;tagname&amp;gt;, ç”Ÿæˆä¸€ä¸ª unannotated tag). git describeé»˜è®¤åªåˆ—å‡ºannotated tagï¼Œ--tagsæŒ‡å®šgit describeä¹Ÿåˆ—å‡ºunannotated tagï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰tagã€‚\n\n--always: æ„æ€æ˜¯ï¼Œå¦‚æœå½“å‰gitä»“åº“æ²¡æœ‰tagï¼Œé‚£ä¹ˆä½¿ç”¨commitæ¥æ›¿ä»£ï¼Œä¾‹å¦‚ï¼š\n$ git describe\nfatal: No names found, cannot describe anything.\n[colin@dev 222]$ git describe --always\n18fedf3","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633664139,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314521,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1633168598,"is_pvip":false,"replies":[{"id":"114078","content":"æ ¹æ®éœ€è¦åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬å³å¯","user_name":"ä½œè€…å›å¤","comment_id":314521,"uid":"1167883","ip_address":"","utype":1,"ctime":1633664256,"user_name_real":"CK1.0"}],"discussion_count":1,"race_medal":0,"score":"1633168598","product_id":100079601,"comment_content":"å­”è€æ¿ï¼Œè¿™é‡Œæ–‡ä¸­åˆ›å»ºçš„releaseåˆ†æ”¯çš„ç‰ˆæœ¬1.0.0ï¼šgit checkout -b release&#47;1.0.0 developã€‚<br><br>æ˜¯æœ€ä½³å®è·µå—ï¼Ÿ è¿˜æ˜¯æ ¹æ®éœ€è¦ä»»æ„åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬å³å¯ã€‚","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527708,"discussion_content":"æ ¹æ®éœ€è¦åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬å³å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633664256,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":314456,"user_name":"lesserror","can_delete":false,"product_type":"c1","uid":1351076,"ip_address":"","ucode":"25A54D1165FCF6","user_header":"https://static001.geekbang.org/account/avatar/00/14/9d/a4/e481ae48.jpg","comment_is_top":false,"comment_ctime":1633078506,"is_pvip":false,"replies":[{"id":"114080","content":"valid_branch_regex=&quot;^(master|develop)$|(feature|release|hotfix)\\&#47;[a-z0-9._-]+$&quot;<br><br>è¿™ä¸ªæ­£åˆ™èƒ½å›ç­”ä½ çš„é—®é¢˜å—","user_name":"ä½œè€…å›å¤","comment_id":314456,"uid":"1167883","ip_address":"","utype":1,"ctime":1633664853,"user_name_real":"CK1.0"}],"discussion_count":2,"race_medal":0,"score":"1633078506","product_id":100079601,"comment_content":"å­”è€æ¿ï¼Œèƒ½å¤§è‡´è¯´è¯´ï¼šIAM é¡¹ç›®çš„åˆ†æ”¯å‘½ä»¤è§„åˆ™å›¾æ€ä¹ˆè§£è¯»å—ï¼Ÿ<br><br>ä¸»è¦ç¡®è®¤ä¸€ä¸‹å’Œæˆ‘ç†è§£çš„æ˜¯å¦ç›¸åŒã€‚","like_count":0,"discussions":[{"author":{"id":1248326,"avatar":"https://static001.geekbang.org/account/avatar/00/13/0c/46/dfe32cf4.jpg","nickname":"å¤šé€‰å‚æ•°","note":"","ucode":"B2294D80AB075F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533796,"discussion_content":"æœ‰è¢«è€å¸ˆçš„è¿™ä¸ªæ­£åˆ™ç§€åˆ°ï¼Œç”¨æ­£åˆ™æ¥è§£é‡Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1637979319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527686,"discussion_content":"valid_branch_regex=&amp;quot;^(master|develop)$|(feature|release|hotfix)\\/[a-z0-9._-]+$&amp;quot;\n\nè¿™ä¸ªæ­£åˆ™èƒ½å›ç­”ä½ çš„é—®é¢˜å—","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1633664853,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":304999,"user_name":"ç‹éª¥","can_delete":false,"product_type":"c1","uid":1049879,"ip_address":"","ucode":"CE53ADEA51235A","user_header":"https://static001.geekbang.org/account/avatar/00/10/05/17/63887353.jpg","comment_is_top":false,"comment_ctime":1627741448,"is_pvip":false,"replies":[{"id":"110648","content":"å»golangci-lint githubä»“åº“ä¸­æ‰‹åŠ¨ä¸‹è½½å®‰è£…ä¸‹golangci-lintå§ï¼Œå¯èƒ½golangci-lintæœ€æ–°çš„åˆ†æ”¯æœ‰ç‚¹é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1628166023,"ip_address":"","comment_id":304999,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1627741448","product_id":100079601,"comment_content":"æ‰§è¡Œmake å¤±è´¥ï¼Œno such linter cyclop<br><br>[going@dev iam]$ make<br>===========&gt; Generating iam error code go source files<br>===========&gt; Generating error code markdown documentation<br>===========&gt; Generating missing doc.go for go packages<br>===========&gt; Formating codes<br>===========&gt; Run golangci to lint source codes<br>ERRO Running error: no such linter cyclop, run &#39;golangci-lint linters&#39; to see the list of supported linters<br>make[1]: *** [scripts&#47;make-rules&#47;golang.mk:76: go.lint] Error 3<br>make: *** [Makefile:101: lint] Error 2<br>[going@dev iam]$ go version<br>go version go1.16.2 linux&#47;amd64<br>[going@dev iam]$ golangci-lint version<br>golangci-lint has version v1.28.4-0.20200719134607-6a689074bf17 built from (unknown, mod sum: &quot;h1:LlCfXb0ozr7UL4sgH7UbR2Rt2eSjQE&#47;1zcIeWTu7ypk=&quot;) on (unknown)","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":524244,"discussion_content":"å»golangci-lint githubä»“åº“ä¸­æ‰‹åŠ¨ä¸‹è½½å®‰è£…ä¸‹golangci-lintå§ï¼Œå¯èƒ½golangci-lintæœ€æ–°çš„åˆ†æ”¯æœ‰ç‚¹é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1628166023,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1049879,"avatar":"https://static001.geekbang.org/account/avatar/00/10/05/17/63887353.jpg","nickname":"ç‹éª¥","note":"","ucode":"CE53ADEA51235A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386965,"discussion_content":"ç‰ˆæœ¬å¤ªä½ go get github.com/golangci/golangci-lint/cmd/golangci-lint@v1.41.1 æ‰‹åŠ¨å®‰è£… 1.41.1è§£å†³é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627912764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":302370,"user_name":"Alery","can_delete":false,"product_type":"c1","uid":1156557,"ip_address":"","ucode":"08F3F49181E67B","user_header":"https://static001.geekbang.org/account/avatar/00/11/a5/cd/3aff5d57.jpg","comment_is_top":false,"comment_ctime":1626181007,"is_pvip":false,"replies":[{"id":"109488","content":"å¯¹çš„ï¼Œè¿˜è¦pushåˆ°è¿œç«¯ä»“åº“","user_name":"ä½œè€…å›å¤","user_name_real":"CK1.0","uid":"1167883","ctime":1626280227,"ip_address":"","comment_id":302370,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1626181007","product_id":100079601,"comment_content":"æµ‹è¯•é€šè¿‡åï¼Œå°†åŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ° master åˆ†æ”¯å’Œ develop åˆ†æ”¯ã€‚æœ¬åœ°æ‰§è¡Œå®Œmergeæ­¥éª¤è¿˜å¾—åŒæ­¥åˆ°è¿œç«¯ä»“åº“å§ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1167883,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d2/0b/cdd0787a.jpg","nickname":"å­”ä»¤é£","note":"","ucode":"8363EA4BD0AAF0","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":523279,"discussion_content":"å¯¹çš„ï¼Œè¿˜è¦pushåˆ°è¿œç«¯ä»“åº“","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626280227,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2179895,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/a4nwicfbEpwqfm8En9iapFqGoOpVg0p0N4ZjIFAdWQMiaxT0JT9OpYrM5ud1OliaLAUhhiaHDjY8mxmNfSbgBNAAGTQ/132","nickname":"sqnv_geek","note":"","ucode":"B23265E1862E4F","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573174,"discussion_content":"å¯ä»¥ç›´æ¥push åˆ°masterå’Œdevelopï¼Ÿ è¿™2ä¸ªåˆ†æ”¯åº”è¯¥æ˜¯å—ä¿æŠ¤çš„å§ï¼Œåªèƒ½PRå§ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653232792,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2084707,"avatar":"https://static001.geekbang.org/account/avatar/00/1f/cf/63/23db516f.jpg","nickname":"CSB22","note":"","ucode":"D66335E41D3025","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554502,"discussion_content":"Markä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šmaintainer å¤„ç†pull requestå†²çªã€‚https://blog.csdn.net/danchenziDCZ/article/details/81061989","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646405742,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}