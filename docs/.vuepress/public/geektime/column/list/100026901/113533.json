{"id":113533,"title":"39 | Djangoï¼šæ­å»ºç›‘æ§å¹³å°","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æ™¯éœ„ã€‚</p><p>é€šè¿‡å‰å‡ èŠ‚è¯¾çš„å­¦ä¹ ï¼Œç›¸ä¿¡ä½ å¯¹é‡åŒ–äº¤æ˜“ç³»ç»Ÿå·²ç»æœ‰äº†ä¸€ä¸ªæœ€åŸºæœ¬çš„è®¤çŸ¥ï¼Œä¹Ÿèƒ½é€šè¿‡è‡ªå·±çš„ä»£ç ï¼Œæ­å»ºä¸€ä¸ªç®€å•çš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿæ¥è¿›è¡Œç›ˆåˆ©ã€‚</p><p>å‰é¢å‡ èŠ‚è¯¾ï¼Œæˆ‘ä»¬çš„é‡ç‚¹åœ¨åå°ä»£ç ã€ä¸­é—´ä»¶ã€åˆ†å¸ƒå¼ç³»ç»Ÿå’Œè®¾è®¡æ¨¡å¼ä¸Šã€‚è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬é‡ç‚¹æ¥çœ‹å‰ç«¯äº¤äº’ã€‚</p><p>ç›‘æ§å’Œè¿ç»´ï¼Œæ˜¯äº’è”ç½‘å·¥ä¸šé“¾ä¸Šéå¸¸é‡è¦çš„ä¸€ç¯ã€‚ç›‘æ§çš„ç›®çš„å°±æ˜¯é˜²æ‚£äºæœªç„¶ã€‚é€šè¿‡ç›‘æ§ï¼Œæˆ‘ä»¬èƒ½å¤ŸåŠæ—¶äº†è§£åˆ°ä¼ä¸šç½‘ç»œçš„è¿è¡ŒçŠ¶æ€ã€‚ä¸€æ—¦å‡ºç°å®‰å…¨éšæ‚£ï¼Œä½ å°±å¯ä»¥åŠæ—¶é¢„è­¦ï¼Œæˆ–è€…æ˜¯ä»¥å…¶ä»–æ–¹å¼é€šçŸ¥è¿ç»´äººå‘˜ï¼Œè®©è¿ç»´ç›‘æ§äººå‘˜æœ‰æ—¶é—´å¤„ç†å’Œè§£å†³éšæ‚£ï¼Œé¿å…å½±å“ä¸šåŠ¡ç³»ç»Ÿçš„æ­£å¸¸ä½¿ç”¨ï¼Œå°†ä¸€åˆ‡é—®é¢˜çš„æ ¹æºæ‰¼æ€åœ¨æ‘‡ç¯®å½“ä¸­ã€‚</p><p>åœ¨ç¡…è°·äº’è”ç½‘å¤§å…¬å¸ä¸­ï¼Œç›‘æ§å’Œè¿ç»´è¢«ç§°ä¸º SREï¼Œæ˜¯å…¬å¸æ­£å¸¸è¿è¡Œä¸­éå¸¸é‡è¦çš„ä¸€ç¯ã€‚ä½œä¸º billion çº§åˆ«çš„ Facebookï¼Œå†…éƒ¨è‡ªç„¶ä¹Ÿæœ‰ç€å¤§å¤§å°å°ã€å„ç§å„æ ·çš„ç›‘æ§ç³»ç»Ÿå’Œè¿ç»´å·¥å…·ï¼Œæœ‰çš„å¯¹æ ‡ä¸šåŠ¡æ•°æ®ï¼Œæœ‰çš„å¯¹æ ‡æœåŠ¡å™¨çš„å¥åº·çŠ¶æ€ï¼Œæœ‰çš„åˆ™æ˜¯é¢å‘æ•°æ®åº“å’Œå¾®æœåŠ¡çš„æ§åˆ¶ä¿¡æ¯ã€‚</p><p>ä¸è¿‡ï¼Œä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œè¿ç»´å·¥ä½œæœ€é‡è¦çš„å°±æ˜¯ç»´æŠ¤ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚é™¤äº†ç†Ÿæ‚‰è¿ç”¨å„ç§æé«˜è¿ç»´æ•ˆç‡çš„å·¥å…·æ¥è¾…åŠ©å·¥ä½œå¤–ï¼Œäº‘èµ„æºè´¹ç”¨ç®¡ç†ã€å®‰å…¨ç®¡ç†ã€ç›‘æ§ç­‰ï¼Œéƒ½éœ€è¦è€—è´¹ä¸å°‘ç²¾åŠ›å’Œæ—¶é—´ã€‚è¿ç»´ç›‘æ§ä¸æ˜¯ä¸€æœä¸€å¤•å¾—æ¥çš„ï¼Œè€Œæ˜¯éšç€ä¸šåŠ¡å‘å±•çš„è¿‡ç¨‹ä¸­åŒæ­¥å’Œå‘å±•çš„ã€‚</p><!-- [[[read_end]]] --><p>ä½œä¸ºé‡åŒ–å®è·µå†…å®¹çš„æœ€åä¸€èŠ‚ï¼Œä»Šå¤©æˆ‘ä»¬å°±ä½¿ç”¨ Django è¿™ä¸ª Web æ¡†æ¶ï¼Œæ¥æ­å»ºä¸€ä¸ªç®€å•çš„é‡åŒ–ç›‘æ§å¹³å°ã€‚</p><h2>Django ç®€ä»‹å’Œå®‰è£…</h2><p>Django æ˜¯ç”¨ Python å¼€å‘çš„ä¸€ä¸ªå…è´¹å¼€æºçš„ Web æ¡†æ¶ï¼Œå¯ä»¥ç”¨æ¥å¿«é€Ÿæ­å»ºä¼˜é›…çš„é«˜æ€§èƒ½ç½‘ç«™ã€‚å®ƒé‡‡ç”¨çš„æ˜¯â€œMVCâ€çš„æ¡†æ¶æ¨¡å¼ï¼Œå³æ¨¡å‹ Mã€è§†å›¾ V å’Œæ§åˆ¶å™¨ Cã€‚</p><p>Django æœ€å¤§çš„ç‰¹è‰²ï¼Œåœ¨äºå°†ç½‘é¡µå’Œæ•°æ®åº“ä¸­å¤æ‚çš„å…³ç³»ï¼Œè½¬åŒ–ä¸º Python ä¸­å¯¹åº”çš„ç®€å•å…³ç³»ã€‚å®ƒçš„è®¾è®¡ç›®çš„ï¼Œæ˜¯ä½¿å¸¸è§çš„Webå¼€å‘ä»»åŠ¡å˜å¾—å¿«é€Ÿè€Œç®€å•ã€‚Djangoæ˜¯å¼€æºçš„ï¼Œä¸æ˜¯å•†ä¸šé¡¹ç›®æˆ–è€…ç§‘ç ”é¡¹ç›®ï¼Œå¹¶ä¸”é›†ä¸­åŠ›é‡è§£å†³Webå¼€å‘ä¸­é‡åˆ°çš„ä¸€ç³»åˆ—é—®é¢˜ã€‚æ‰€ä»¥ï¼ŒDjango æ¯å¤©éƒ½ä¼šåœ¨ç°æœ‰çš„åŸºç¡€ä¸Šè¿›æ­¥ï¼Œä»¥é€‚åº”ä¸æ–­æ›´è¿­çš„å¼€å‘éœ€æ±‚ã€‚è¿™æ ·æ—¢èŠ‚çœäº†å¼€å‘æ—¶é—´ï¼Œä¹Ÿæé«˜äº†åæœŸç»´æŠ¤çš„æ•ˆç‡ã€‚</p><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸Šæ‰‹ä½¿ç”¨è¿›ä¸€æ­¥æ¥äº†è§£ã€‚å…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•å®‰è£…å’Œä½¿ç”¨ Djangoã€‚ä½ å¯ä»¥å…ˆæŒ‰ç…§ä¸‹é¢ä»£ç å—çš„å†…å®¹æ¥æ“ä½œï¼Œå®‰è£…Django ï¼š</p><pre><code>pip3 install Django\ndjango-admin --version\n\n########## è¾“å‡º ##########\n\n2.2.3\n</code></pre><p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ Django é¡¹ç›®ï¼š</p><pre><code>django-admin startproject TradingMonitor\ncd TradingMonitor/\npython3 manage.py migrate\n\n########## è¾“å‡º ##########\n</code></pre><pre><code>  Applying contenttypes.0001_initial... OK\n  Applying auth.0001_initial... OK\n  Applying admin.0001_initial... OK\n  Applying admin.0002_logentry_remove_auto_add... OK\n  Applying admin.0003_logentry_add_action_flag_choices... OK\n  Applying contenttypes.0002_remove_content_type_name... OK\n  Applying auth.0002_alter_permission_name_max_length... OK\n  Applying auth.0003_alter_user_email_max_length... OK\n  Applying auth.0004_alter_user_username_opts... OK\n  Applying auth.0005_alter_user_last_login_null... OK\n  Applying auth.0006_require_contenttypes_0002... OK\n  Applying auth.0007_alter_validators_add_error_messages... OK\n  Applying auth.0008_alter_user_username_max_length... OK\n  Applying auth.0009_alter_user_last_name_max_length... OK\n  Applying auth.0010_alter_group_name_max_length... OK\n  Applying auth.0011_update_proxy_permissions... OK\n  Applying sessions.0001_initial... OK\n</code></pre><p>è¿™æ—¶ï¼Œä½ èƒ½çœ‹åˆ°æ–‡ä»¶ç³»ç»Ÿå¤§æ¦‚æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p><pre><code>TradingMonitor/\nâ”œâ”€â”€ TradingMonitor\nâ”‚   â”œâ”€â”€ __init__.py\nâ”‚   â”œâ”€â”€ settings.py\nâ”‚   â”œâ”€â”€ urls.py\nâ”‚   â””â”€â”€ wsgi.py\nâ”œâ”€â”€ db.sqlite3\nâ””â”€â”€ manage.py\n</code></pre><p>æˆ‘ç®€å•è§£é‡Šä¸€ä¸‹å®ƒçš„æ„æ€ï¼š</p><ul>\n<li>TradingMonitor/TradingMonitorï¼Œè¡¨ç¤ºé¡¹ç›®æœ€åˆçš„ Python åŒ…ï¼›</li>\n<li>TradingMonitor/init.pyï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå£°æ˜æ‰€åœ¨ç›®å½•çš„åŒ…ä¸ºä¸€ä¸ª Python åŒ…ï¼›</li>\n<li>TradingMonitor/settings.pyï¼Œç®¡ç†é¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼›</li>\n<li>TradingMonitor/urls.pyï¼Œå£°æ˜è¯·æ±‚ URL çš„æ˜ å°„å…³ç³»ï¼›</li>\n<li>TradingMonitor/wsgi.pyï¼Œè¡¨ç¤ºPython ç¨‹åºå’Œ Web æœåŠ¡å™¨çš„é€šä¿¡åè®®ï¼›</li>\n<li>manage.pyï¼Œè¡¨ç¤ºä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥å’Œ Django é¡¹ç›®è¿›è¡Œäº¤äº’ï¼›</li>\n<li>Db.sqlite3ï¼Œè¡¨ç¤ºé»˜è®¤çš„æ•°æ®åº“ï¼Œå¯ä»¥åœ¨è®¾ç½®ä¸­æ›¿æ¢æˆå…¶ä»–æ•°æ®åº“ã€‚</li>\n</ul><p>å¦å¤–ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°äº†ä¸Šè¿°å‘½ä»¤ä¸­çš„<code>python3 manage.py migrate</code>ï¼Œè¿™ä¸ªå‘½ä»¤è¡¨ç¤ºåˆ›å»ºæˆ–æ›´æ–°æ•°æ®åº“æ¨¡å¼ã€‚æ¯å½“ model æºä»£ç è¢«æ”¹å˜åï¼Œå¦‚æœæˆ‘ä»¬è¦å°†å…¶åº”ç”¨åˆ°æ•°æ®åº“ä¸Šï¼Œå°±éœ€è¦æ‰§è¡Œä¸€æ¬¡è¿™ä¸ªå‘½ä»¤ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªç³»ç»Ÿæ·»åŠ ç®¡ç†å‘˜è´¦æˆ·ï¼š</p><pre><code>python3 manage.py createsuperuser\n\n########## è¾“å‡º ##########\n\nUsername (leave blank to use 'ubuntu'): admin\nEmail address:  \nPassword: \nPassword (again): \nSuperuser created successfully.\n</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬æ¥å¯åŠ¨ Django çš„ debugging æ¨¡å¼ï¼š</p><pre><code>python3 manage.py runserver\n</code></pre><p>æœ€åï¼Œæ‰“å¼€æµè§ˆå™¨è¾“å…¥ï¼š<code>http://127.0.0.1:8000</code>ã€‚å¦‚æœä½ èƒ½çœ‹åˆ°ä¸‹é¢è¿™ä¸ªç”»é¢ï¼Œå°±è¯´æ˜ Django å·²ç»éƒ¨ç½²æˆåŠŸäº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6d/02/6d8244a8016c97139b3de4680ae2e802.png?wh=1109*946\" alt=\"\"></p><p>Django çš„å®‰è£…æ˜¯ä¸æ˜¯éå¸¸ç®€å•å‘¢ï¼Ÿè¿™å…¶å®ä¹Ÿæ˜¯ Python ä¸€è´¯çš„ç†å¿µï¼Œç®€æ´ï¼Œå¹¶ç®€åŒ–å…¥é—¨çš„é—¨æ§›ã€‚</p><p>OKï¼Œç°åœ¨æˆ‘ä»¬å†å®šä½åˆ° <code>http://127.0.0.1:8000/admin</code>ï¼Œä½ ä¼šçœ‹åˆ° Django çš„åå°ç®¡ç†ç½‘é¡µï¼Œè¿™é‡Œæˆ‘å°±ä¸è¿‡å¤šä»‹ç»äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/ef/93/ef29a801bd367263aa4792131eeae093.png?wh=528*388\" alt=\"\"><br>\n<img src=\"https://static001.geekbang.org/resource/image/31/25/311b3ebf2b0801e84de60d36a81c6925.png?wh=871*423\" alt=\"\"></p><p>åˆ°æ­¤ï¼ŒDjango å°±å·²ç»æˆåŠŸå®‰è£…ï¼Œå¹¶ä¸”æ­£å¸¸å¯åŠ¨å•¦ã€‚</p><h2>MVC æ¶æ„</h2><p>åˆšåˆšæˆ‘è¯´è¿‡ï¼ŒMVC æ¶æ„æ˜¯ Django è®¾è®¡æ¨¡å¼çš„ç²¾é«“ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥å…·ä½“çœ‹ä¸€ä¸‹è¿™ä¸ªæ¶æ„ï¼Œå¹¶é€šè¿‡ Django  åŠ¨æ‰‹æ­å»ºä¸€ä¸ªæœåŠ¡ç«¯ã€‚</p><h3>è®¾è®¡æ¨¡å‹ Model</h3><p>åœ¨ä¹‹å‰çš„æ—¥å¿—å’Œå­˜å‚¨ç³»ç»Ÿè¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»‹ç»è¿‡ peewee è¿™ä¸ªåº“ï¼Œå®ƒèƒ½é¿å¼€é€šè¿‡ç¹ççš„ SQL è¯­å¥æ¥æ“ä½œ MySQLï¼Œç›´æ¥ä½¿ç”¨ Python çš„ class æ¥è¿›è¡Œè½¬æ¢ã€‚äº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯ Django é‡‡å–çš„æ–¹å¼ã€‚</p><p>Django æ— éœ€æ•°æ®åº“å°±å¯ä»¥ä½¿ç”¨ï¼Œå®ƒé€šè¿‡å¯¹è±¡å…³ç³»æ˜ å°„å™¨ï¼ˆobject-relational mappingï¼‰ï¼Œä»…ä½¿ç”¨Pythonä»£ç å°±å¯ä»¥æè¿°æ•°æ®ç»“æ„ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™æ®µ Model ä»£ç ï¼š</p><pre><code>#  TradingMonitor/models.py\n\nfrom django.db import models\n\n\nclass Position(models.Model):\n    asset = models.CharField(max_length=10)\n    timestamp = models.DateTimeField()\n    amount = models.DecimalField(max_digits=10, decimal_places=3)\n</code></pre><p>models.py æ–‡ä»¶ä¸»è¦ç”¨ä¸€ä¸ª Python ç±»æ¥æè¿°æ•°æ®è¡¨ï¼Œç§°ä¸ºæ¨¡å‹ ã€‚è¿ç”¨è¿™ä¸ªç±»ï¼Œä½ å¯ä»¥é€šè¿‡ç®€å•çš„ Python ä»£ç æ¥åˆ›å»ºã€æ£€ç´¢ã€æ›´æ–°ã€åˆ é™¤æ•°æ®åº“ä¸­çš„è®°å½•ï¼Œè€Œä¸ç”¨å†™ä¸€æ¡åˆä¸€æ¡çš„SQLè¯­å¥ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„é¿å…é€šè¿‡ SQL æ“ä½œæ•°æ®åº“ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Position æ¨¡å‹ï¼Œç”¨æ¥è¡¨ç¤ºæˆ‘ä»¬çš„äº¤æ˜“ä»“ä½ä¿¡æ¯ã€‚å…¶ä¸­ï¼Œ</p><ul>\n<li>asset è¡¨ç¤ºå½“å‰æŒæœ‰èµ„äº§çš„ä»£ç ï¼Œä¾‹å¦‚ btcï¼›</li>\n<li>timestamp è¡¨ç¤ºæ—¶é—´æˆ³ï¼›</li>\n<li>amount åˆ™è¡¨ç¤ºæ—¶é—´æˆ³æ—¶åˆ»çš„æŒä»“ä¿¡æ¯ã€‚</li>\n</ul><h3>è®¾è®¡è§†å›¾ Views</h3><p>åœ¨æ¨¡å‹è¢«å®šä¹‰ä¹‹åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥åœ¨è§†å›¾ä¸­å¼•ç”¨æ¨¡å‹äº†ã€‚é€šå¸¸ï¼Œè§†å›¾ä¼šæ ¹æ®å‚æ•°æ£€ç´¢æ•°æ®ï¼ŒåŠ è½½ä¸€ä¸ªæ¨¡æ¿ï¼Œå¹¶ä½¿ç”¨æ£€ç´¢åˆ°çš„æ•°æ®å‘ˆç°æ¨¡æ¿ã€‚</p><p>è®¾è®¡è§†å›¾ï¼Œåˆ™æ˜¯æˆ‘ä»¬ç”¨æ¥å®ç°ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ã€‚æˆ‘ä»¬æ¥çœ‹ render_positions è¿™ä¸ªä»£ç ï¼Œå®ƒæ¥å— request å’Œ asset ä¸¤ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å…ˆä¸ç”¨ç®¡ requestã€‚è¿™é‡Œçš„ asset è¡¨ç¤ºæŒ‡å®šä¸€ä¸ªèµ„äº§åç§°ï¼Œä¾‹å¦‚ btcï¼Œç„¶åè¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªæ¸²æŸ“é¡µé¢ã€‚</p><pre><code>#  TradingMonitor/views.py\n\nfrom django.shortcuts import render\nfrom .models import Position\n\ndef render_positions(request, asset):\n    positions = Position.objects.filter(asset = asset)\n    context = {'asset': asset, 'positions': positions}\n    return render(request, 'positions.html', context)\n</code></pre><p>ä¸è¿‡ï¼Œè¿™ä¸ªå‡½æ•°å…·ä½“æ˜¯æ€ä¹ˆå·¥ä½œçš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸€è¡Œè¡Œæ¥çœ‹ã€‚</p><p><code>positions = Position.objects.filter(asset = asset)</code>ï¼Œè¿™è¡Œä»£ç å‘æ•°æ®åº“ä¸­æ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢æ“ä½œï¼Œå…¶ä¸­ï¼Œ filter è¡¨ç¤ºç­›é€‰ï¼Œæ„æ€æ˜¯ä»æ•°æ®åº“ä¸­é€‰å‡ºæ‰€æœ‰æˆ‘ä»¬éœ€è¦çš„ asset çš„ä¿¡æ¯ã€‚ä¸è¿‡ï¼Œè¿™é‡Œæˆ‘åªæ˜¯ä¸ºä½ ä¸¾ä¾‹åšç¤ºèŒƒï¼›çœŸæ­£åšç›‘æ§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæ›´æœ‰é’ˆå¯¹æ€§åœ°ä»æ•°æ®åº“ä¸­ç­›é€‰è¯»å–ä¿¡æ¯ï¼Œè€Œä¸æ˜¯ä¸€å£æ°”è¯»å–å‡ºæ‰€æœ‰çš„ä¿¡æ¯ã€‚</p><p><code>context = {'asset': asset, 'positions': positions}</code>ï¼Œè¿™è¡Œä»£ç æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°è£…ä¸€ä¸ªå­—å…¸ã€‚è‡³äºè¿™ä¸ªå­—å…¸çš„ç”¨å¤„ï¼Œä¸‹é¢çš„å†…å®¹ä¸­å¯ä»¥ä½“ç°ã€‚</p><p><code>return render(request, 'positions.html', context)</code>ï¼Œæœ€åè¿™è¡Œä»£ç è¿”å›ä¸€ä¸ªé¡µé¢ã€‚è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨çš„æ¨¡æ¿è®¾è®¡ï¼Œè¿™ä¹Ÿæ˜¯ Django éå¸¸æ¨èçš„å¼€å‘æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è®©æ¨¡æ¿å’Œæ•°æ®åˆ†ç¦»ï¼Œè¿™æ ·ï¼Œæ•°æ®åªéœ€è¦å‘å…¶ä¸­å¡«å……å³å¯ã€‚</p><p>æœ€åçš„æ¨¡æ¿æ–‡ä»¶æ˜¯ <code>position.html</code>ï¼Œä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œ context ä½œä¸ºå˜é‡ä¼ ç»™äº†æ¨¡æ¿ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹è®¾è®¡æ¨¡æ¿çš„å†…å®¹ã€‚</p><h3>è®¾è®¡æ¨¡æ¿Templates</h3><p>æ¨¡æ¿æ–‡ä»¶ï¼Œå…¶å®å°±æ˜¯ HTML æ–‡ä»¶å’Œéƒ¨åˆ†ä»£ç çš„ç»¼åˆã€‚ä½ å¯ä»¥æƒ³è±¡æˆï¼Œè¿™ä¸ªHTML åœ¨æœ€ç»ˆé€ç»™ç”¨æˆ·ä¹‹å‰ï¼Œéœ€è¦è¢«æˆ‘ä»¬é¢„å…ˆå¤„ç†ä¸€ä¸‹ï¼Œè€Œé¢„å…ˆå¤„ç†çš„æ–¹å¼å°±æ˜¯æ‰¾åˆ°å¯¹åº”çš„åœ°æ–¹è¿›è¡Œæ›¿æ¢ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™æ®µç¤ºä¾‹ä»£ç ï¼š</p><pre><code>#  TradingMonitor/templates/positions.html\n\n&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en-US&quot;&gt;\n&lt;head&gt;\n&lt;title&gt;Positions for {{asset}}&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;h1&gt;Positions for {{asset}}&lt;/h1&gt;\n\n&lt;table&gt;\n&lt;tr&gt;\n    &lt;th&gt;Time&lt;/th&gt;\n    &lt;th&gt;Amount&lt;/th&gt;\n&lt;/tr&gt;\n{% for position in positions %}\n&lt;tr&gt;\n    &lt;th&gt;{{position.timestamp}}&lt;/th&gt;\n    &lt;th&gt;{{position.amount}}&lt;/th&gt;\n&lt;/tr&gt;\n{% endfor %}\n&lt;/table&gt;\n&lt;/body&gt;\n</code></pre><p>æˆ‘é‡ç‚¹è¯´ä¸€ä¸‹å‡ ä¸ªåœ°æ–¹ã€‚é¦–å…ˆæ˜¯<code>&lt;title&gt;Positions for {{asset}}&lt;/title&gt;</code>ï¼Œè¿™é‡ŒåŒå¤§æ‹¬å·æ‹¬ä½ asset è¿™ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡å¯¹åº”çš„æ­£æ˜¯å‰é¢ context å­—å…¸ä¸­çš„ asset keyã€‚Django çš„æ¸²æŸ“å¼•æ“ä¼šå°† asset ï¼Œæ›¿æ¢æˆ context ä¸­ asset å¯¹åº”çš„å†…å®¹ï¼Œæ­¤å¤„æ˜¯æ›¿æ¢æˆäº† btcã€‚</p><p>å†æ¥çœ‹<code>{% for position in positions %}</code>ï¼Œè¿™æ˜¯ä¸ªå¾ˆå…³é”®çš„åœ°æ–¹ã€‚æˆ‘ä»¬éœ€è¦å¤„ç†ä¸€ä¸ªåˆ—è¡¨çš„æƒ…å†µï¼Œç”¨ for å¯¹ positions è¿›è¡Œè¿­ä»£å°±è¡Œäº†ã€‚è¿™é‡Œçš„ positions ï¼ŒåŒæ ·å¯¹åº”çš„æ˜¯ context ä¸­çš„ positionsã€‚</p><p>æœ«å°¾çš„<code>{% endfor %}</code>ï¼Œè‡ªç„¶å°±è¡¨ç¤ºç»“æŸäº†ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†æ•°æ®å°è£…åˆ°äº†ä¸€ä¸ªåˆ—è¡¨ä¹‹ä¸­ã€‚</p><h3>è®¾è®¡é“¾æ¥ Urls</h3><p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„æ“ä½œæä¾› URL æ¥å£ï¼Œå…·ä½“æ“ä½œæˆ‘æ”¾åœ¨äº†ä¸‹é¢çš„ä»£ç ä¸­ï¼Œå†…å®¹æ¯”è¾ƒç®€å•ï¼Œæˆ‘å°±ä¸è¯¦ç»†å±•å¼€è®²è§£äº†ã€‚</p><pre><code>#  TradingMonitor/urls.py\n\nfrom django.contrib import admin\nfrom django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('positions/&lt;str:asset&gt;', views.render_positions),\n]\n</code></pre><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <code>http://127.0.0.1:8000/positions/btc</code> æ¥è®¿é—®å•¦ï¼</p><h3>æµ‹è¯•</h3><p>å½“ç„¶ï¼Œé™¤äº†ä¸»è¦æµç¨‹å¤–ï¼Œæˆ‘è¿˜éœ€è¦å¼ºè°ƒå‡ ä¸ªå¾ˆç®€å•ä½†éå¸¸å…³é”®çš„ç»†èŠ‚ï¼Œä¸ç„¶ï¼Œæˆ‘ä»¬è¿™äº›æ”¹å˜å°±ä¸èƒ½è¢«çœŸæ­£åœ°åº”ç”¨ã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œåœ¨ <code>TradingMonitor/TradingMonitor</code> ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ migrationsï¼›å¹¶åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶ <code>__init__.py</code>ã€‚</p><pre><code>mkdir TradingMonitor/migrations\ntouch TradingMonitor/migrations/__init__.py\n</code></pre><p>æ­¤æ—¶ï¼Œä½ çš„ç›®å½•ç»“æ„åº”è¯¥é•¿æˆä¸‹é¢è¿™æ ·ï¼š</p><pre><code>TradingMonitor/\nâ”œâ”€â”€ TradingMonitor\nâ”‚   â”œâ”€â”€ migrations\nâ”‚       â””â”€â”€ __init__.py\nâ”‚   â”œâ”€â”€ templates\nâ”‚       â””â”€â”€ positions.html\nâ”‚   â”œâ”€â”€ __init__.py\nâ”‚   â”œâ”€â”€ settings.py\nâ”‚   â”œâ”€â”€ urls.py\nâ”‚   â”œâ”€â”€ models.py\nâ”‚   â”œâ”€â”€ views.py\nâ”‚   â””â”€â”€ wsgi.py\nâ”œâ”€â”€ db.sqlite3\nâ””â”€â”€ manage.py\n</code></pre><p>ç¬¬äºŒæ­¥ï¼Œä¿®æ”¹ <code>TradingMonitor/settings.py</code>ï¼š</p><pre><code>INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'TradingMonitor',  # è¿™é‡ŒæŠŠæˆ‘ä»¬çš„ app åŠ ä¸Š\n]\n</code></pre><pre><code>TEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR, 'TradingMonitor/templates')],  # è¿™é‡ŒæŠŠ templates çš„ç›®å½•åŠ ä¸Š\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n</code></pre><p>ç¬¬ä¸‰æ­¥ï¼Œè¿è¡Œ <code>python manage.py makemigrations</code>ï¼š</p><pre><code>python manage.py makemigrations\n\n########## è¾“å‡º ##########\n\nMigrations for 'TradingMonitor':\n  TradingMonitor/migrations/0001_initial.py\n    - Create model Position\n</code></pre><p>ç¬¬å››æ­¥ï¼Œè¿è¡Œ <code>python manage.py migrate</code>ï¼š</p><pre><code>python manage.py migrate\n\n\n########## è¾“å‡º ##########\n\n\nOperations to perform:\n  Apply all migrations: TradingMonitor, admin, auth, contenttypes, sessions\nRunning migrations:\n  Applying TradingMonitor.0001_initial... OK\n</code></pre><p>è¿™å‡ æ­¥çš„å…·ä½“æ“ä½œï¼Œæˆ‘éƒ½ç”¨ä»£ç å’Œæ³¨é‡Šè¡¨ç¤ºäº†å‡ºæ¥ï¼Œä½ å®Œå…¨å¯ä»¥åŒæ­¥è¿›è¡Œæ“ä½œã€‚æ“ä½œå®Œæˆåï¼Œç°åœ¨ï¼Œæˆ‘ä»¬çš„æ•°æ®ç»“æ„å°±å·²ç»è¢«æˆåŠŸåŒæ­¥åˆ°æ•°æ®åº“ä¸­äº†ã€‚</p><p>æœ€åï¼Œè¾“å…¥ <code>python manage.py runserver</code>ï¼Œç„¶åæ‰“å¼€æµè§ˆå™¨è¾“å…¥<code>http://127.0.0.1:8000/positions/btc</code>ï¼Œä½ å°±èƒ½çœ‹åˆ°æ•ˆæœå•¦ã€‚<br>\n<img src=\"https://static001.geekbang.org/resource/image/ab/4a/abb5a9aaf8016f485d38552f4291784a.png?wh=542*339\" alt=\"\"></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å†å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹ MVC æ¨¡å¼ï¼Œé€šè¿‡æˆ‘ç”»çš„è¿™å¼ å›¾ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼ŒMã€Vã€Cè¿™ä¸‰è€…ï¼Œä»¥ä¸€ç§æ’ä»¶ä¼¼çš„ã€æ¾è€¦åˆçš„æ–¹å¼è¿æ¥åœ¨ä¸€èµ·ï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/c7/bc/c7ff058064e869d6da652805c29263bc.png?wh=628*333\" alt=\"\"></p><p>å½“ç„¶ï¼Œæˆ‘å¸¦ä½ å†™çš„åªæ˜¯ä¸€ä¸ªç®€å•çš„ Django åº”ç”¨ç¨‹åºï¼Œå¯¹äºçœŸæ­£çš„é‡åŒ–å¹³å°ç›‘æ§ç³»ç»Ÿè€Œè¨€ï¼Œè¿™è¿˜åªæ˜¯ä¸€ä¸ªç®€å•çš„å¼€å§‹ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹äºç›‘æ§ç³»ç»Ÿæ¥è¯´ï¼Œå…¶å®è¿˜æœ‰ç€éå¸¸å¤šçš„å¼€æºæ’ä»¶å¯ä»¥ä½¿ç”¨ã€‚æœ‰ä¸€äº›ç•Œé¢éå¸¸é…·ç‚«ï¼Œæœ‰ä¸€äº›å¯ä»¥åšåˆ°å¾ˆé«˜çš„ç¨³å®šæ€§å’Œæ˜“ç”¨æ€§ï¼Œå®ƒä»¬å¾ˆå¤šéƒ½å¯ä»¥ç»“åˆ Django åšå‡ºå¾ˆå¥½çš„æ•ˆæœæ¥ã€‚æ¯”è¾ƒå…¸å‹çš„æœ‰ï¼š</p><ul>\n<li>Graphite æ˜¯ä¸€æ¬¾å­˜å‚¨æ—¶é—´åºåˆ—æ•°æ®ï¼Œå¹¶é€šè¿‡ Django Web åº”ç”¨ç¨‹åºåœ¨å›¾å½¢ä¸­æ˜¾ç¤ºçš„æ’ä»¶ï¼›</li>\n<li>Vimeo åˆ™æ˜¯ä¸€ä¸ªåŸºäº Graphite çš„ä»ªè¡¨æ¿ï¼Œå…·æœ‰é™„åŠ åŠŸèƒ½å’Œå¹³æ»‘çš„è®¾è®¡ï¼›</li>\n<li>Scout ç›‘æ§  Djangoå’ŒFlaskåº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œæä¾›è‡ªåŠ¨æ£€æµ‹è§†å›¾ã€SQLæŸ¥è¯¢ã€æ¨¡æ¿ç­‰ã€‚</li>\n</ul><h2>æ€»ç»“</h2><p>è¿™ä¸€èŠ‚è¯¾çš„å†…å®¹æ›´é è¿‘ä¸Šæ¸¸åº”ç”¨å±‚ï¼Œæˆ‘ä»¬ä»¥ Django è¿™ä¸ª Python åç«¯ä¸ºä¾‹ï¼Œè®²è§£äº†æ­å»ºä¸€ä¸ªæœåŠ¡ç«¯çš„è¿‡ç¨‹ã€‚ä½ åº”è¯¥å‘ç°äº†ï¼Œä½¿ç”¨ RESTful Framework æ­å»ºæœåŠ¡å™¨ï¼Œæ˜¯ä¸€ä¸ªå¦‚æ­¤ç®€å•çš„è¿‡ç¨‹ï¼Œä½ å¯ä»¥å»å¼€ä¸€ä¸ªè‡ªå·±çš„äº¤æ˜“æ‰€äº†ï¼ˆç¬‘ï¼‰ã€‚ç›¸æ¯”èµ·å…·ä½“çš„æŠ€æœ¯ï¼Œä»Šå¤©æˆ‘æ‰€è®²çš„ MVC æ¡†æ¶å’Œ Django çš„æ€æƒ³ï¼Œæ›´å€¼å¾—ä½ å»æ·±å…¥å­¦ä¹ å’Œé¢†ä¼šã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä»Šå¤©æˆ‘æƒ³ç»™ä½ ç•™ä¸€ä¸ªéš¾åº¦æ¯”è¾ƒé«˜çš„ä½œä¸šã€‚RESTful API åœ¨ Django ä¸­æ˜¯å¦‚ä½•å®ç°å®‰å…¨è®¤è¯çš„ï¼Ÿä½ èƒ½é€šè¿‡æœç´¢å’Œè‡ªå­¦æŒæ¡è¿™ä¸ªçŸ¥è¯†ç‚¹å—ï¼Ÿå¸Œæœ›å¯ä»¥åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„è®¤çœŸå­¦ä¹ è®°å½•å’Œæ€»ç»“ï¼Œæˆ‘ä¼šä¸€ä¸€ç»™å‡ºå»ºè®®ã€‚ä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€åŒäº‹ï¼Œä¸€èµ·äº¤æµã€ä¸€èµ·è¿›æ­¥ã€‚</p><p></p>","comments":[{"had_liked":false,"id":125465,"user_name":"Jingxiao","can_delete":false,"product_type":"c1","uid":1259521,"ip_address":"","ucode":"EB966BB87132F6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","comment_is_top":true,"comment_ctime":1566187352,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"9.223372141500201e+18","product_id":100026901,"comment_content":"å¸¸ç”¨çš„è®¤è¯æ–¹å¼æœ‰ï¼ŒHTTP Basic Authï¼ŒOAuthï¼ŒCookie Authï¼ŒToken Authï¼Œè€Œ Django Restful ä¸€ç§å¸¸ç”¨çš„æ–¹å¼æ˜¯ JSON Web Tokenï¼ˆJWTï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸è½»å·§çš„è§„èŒƒï¼Œå¯ä»¥å‚è€ƒ https:&#47;&#47;github.com&#47;jpadilla&#47;django-rest-framework-jwt.","like_count":25},{"had_liked":false,"id":121422,"user_name":"Kuzaman","can_delete":false,"product_type":"c1","uid":1166957,"ip_address":"","ucode":"DB60937873CBF1","user_header":"https://static001.geekbang.org/account/avatar/00/11/ce/6d/6de830ef.jpg","comment_is_top":false,"comment_ctime":1565138550,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"126119190134","product_id":100026901,"comment_content":"å»ºè®®è€å¸ˆä»¥åèƒ½ä¸“é—¨å‡ºä¸€ä¸ªå®æˆ˜æ ç›®ï¼Œå¿…é¡¶","like_count":30,"discussions":[{"author":{"id":2508685,"avatar":"https://static001.geekbang.org/account/avatar/00/26/47/8d/5d2f4acd.jpg","nickname":"zys","note":"","ucode":"594399D8EA484D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":356222,"discussion_content":"ä»–è¿™å«é¡¹ç›®å®æˆ˜?çœŸæœäº†,,,Bç«™å¤§æŠŠè§†é¢‘,,,","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1615554107,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":124238,"user_name":"å›¾Â·ç¾å…‹å°”","can_delete":false,"product_type":"c1","uid":1076720,"ip_address":"","ucode":"021FB5AE110066","user_header":"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eppQqDE6TNibvr3DNdxG323AruicIgWo5DpVr6U7yZVNkbF2rKluyDfhdpgAEcYEOZTAnbrMdTzFkUw/0","comment_is_top":false,"comment_ctime":1565840656,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"74580284688","product_id":100026901,"comment_content":"MVCåœ¨Djangoä¸­å¯¹åº”çš„æ˜¯MTV","like_count":18},{"had_liked":false,"id":121545,"user_name":"å¥¥ç‰¹è™¾ä¸ä¼šå†™ä»£ç ","can_delete":false,"product_type":"c1","uid":1025685,"ip_address":"","ucode":"B41DD6B575571A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a6/95/3960d10e.jpg","comment_is_top":false,"comment_ctime":1565157258,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"53104764810","product_id":100026901,"comment_content":"è€å¸ˆçš„ä¸“æ æ˜¯æˆ‘åœ¨æå®¢æ—¶é—´çœ‹è¿‡çš„è´¨é‡æœ€é«˜çš„ä¸“æ äº†ï¼Œæ–‡å­—ç®€å•æ˜“æ‡‚ï¼Œåˆä¸å¤±æ·±åº¦ï¼Œä¸çŸ¥é“ä»¥åä¼šä¸ä¼šä¸“é—¨å‡ºä¸€ä¸ªé‡åŒ–äº¤æ˜“çš„ä¸“æ ï¼Œä¸€å®šæ”¯æŒï¼","like_count":13,"discussions":[{"author":{"id":1919541,"avatar":"https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg","nickname":"å®Œç¾åšæŒ","note":"","ucode":"AE0261D8DDEF64","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":361940,"discussion_content":"å¤–è¡Œå¾ˆéš¾æ‡‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616808754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1524904,"avatar":"https://static001.geekbang.org/account/avatar/00/17/44/a8/0ce75c8c.jpg","nickname":"Skrpy","note":"","ucode":"BB6CB4E9AA1712","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4262,"discussion_content":"è¿™æ˜¯åœ¨ä»€ä¹ˆç³»ç»Ÿè£…å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565259091,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2628251,"avatar":"https://static001.geekbang.org/account/avatar/00/28/1a/9b/aa3b16f5.jpg","nickname":"æµ·æ£ ","note":"","ucode":"9416069D151314","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1524904,"avatar":"https://static001.geekbang.org/account/avatar/00/17/44/a8/0ce75c8c.jpg","nickname":"Skrpy","note":"","ucode":"BB6CB4E9AA1712","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":549935,"discussion_content":"linux","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644303332,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":4262,"ip_address":""},"score":549935,"extra":""}]},{"author":{"id":1568487,"avatar":"https://static001.geekbang.org/account/avatar/00/17/ee/e7/4375e97c.jpg","nickname":"é›²è‡³","note":"","ucode":"47E2D099322BB1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":4177,"discussion_content":"è¿™æ˜¯åœ¨ä»€ä¹ˆç³»ç»Ÿè£…å‘€","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1565187166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121477,"user_name":"TKbook","can_delete":false,"product_type":"c1","uid":1073829,"ip_address":"","ucode":"F6E0E99CC79059","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/a5/43aa0c27.jpg","comment_is_top":false,"comment_ctime":1565144379,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"27334948155","product_id":100026901,"comment_content":"è²Œä¼¼è¿˜ç¼ºå°‘ä¸€æ­¥ï¼Œæ·»åŠ ç›¸å…³æ•°æ®ã€‚","like_count":6,"discussions":[{"author":{"id":2873069,"avatar":"","nickname":"Geek_bc0291","note":"","ucode":"DF2C8ED3E9B0BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":550027,"discussion_content":"use TradingMonitor;\ninsert into TradingMonitor_position (asset,timestamp,amount) values (&#39;btc&#39;,now(),&#39;100&#39;);\ninsert into TradingMonitor_position (asset,timestamp,amount) values (&#39;btc&#39;,now(),&#39;130&#39;);\nå¤šæ’å¦‚å‡ æ¡å°±è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1644334153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1200713,"avatar":"https://static001.geekbang.org/account/avatar/00/12/52/49/23a6ea52.jpg","nickname":"å¶å­","note":"","ucode":"4B043DE31345C2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310171,"discussion_content":"æƒ³é—®ä¸‹å»å“ªæ·»åŠ æ•°æ®å•Šï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601654797,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132426,"user_name":"å°ä¾ é¾™æ—‹é£","can_delete":false,"product_type":"c1","uid":1126441,"ip_address":"","ucode":"073F3924A99835","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg","comment_is_top":false,"comment_ctime":1568119007,"is_pvip":false,"replies":[{"id":"50655","content":"æ£’","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1568129083,"ip_address":"","comment_id":132426,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18747988191","product_id":100026901,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ¬åœ°çš„djangoç‰ˆæœ¬æ˜¯1.11.8ï¼Œæ²¡æ³•è¿è¡Œä½ çš„æœ€æ–°ç‰ˆæœ¬ã€‚<br>æŒ‡å‡ºä¸€ä¸ªé”™è¯¯ï¼šä¸ç”¨æ‰‹åŠ¨åˆ›å»ºmigrationsæ–‡ä»¶å¤¹ã€‚æ‰§è¡Œpython3 manage.py makemigrationså‘½ä»¤å°±ä¼šç”Ÿæˆäº†ã€‚<br>æœ‰ä¸ªé—®é¢˜ï¼šè¿™ä¸ªurlçš„æ­£åˆ™è¡¨è¾¾å¼æˆ‘ä¸å¤ªæ‡‚â€œpath(&#39;positions&#47;&lt;str:asset&gt;&#39;, views.render_positions)â€ï¼Œ&lt;str:asset&gt;ä¸æ˜¯ä¸€èˆ¬éƒ½å†™æˆ(?P&lt;asset&gt;[a-zA-Z]+)è¿™æ ·å­çš„å˜›ï¼Ÿ<br>ä½œä¸šå›ç­”ï¼š<br>å› ä¸ºhttpåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ä¸€æ¬¡æ–°çš„è¯·æ±‚ï¼Œä¸ä¼šè®°å¾—ä¹‹å‰é€šä¿¡çš„çŠ¶æ€ã€‚æ‰€ä»¥éœ€è¦ä¸€äº›ç‰¹æ®Šæ‰‹æ®µæ¥è®°å½•çŠ¶æ€ã€‚<br>æ–¹æ³•ä¸€ï¼šæŠŠuserinfoå­˜å‚¨åœ¨request.sessionä¸­ï¼Œæ¯æ¬¡è¯·æ±‚è¿›è¡ŒéªŒè¯userinfoï¼›<br>æ–¹æ³•äºŒï¼šjwtç”Ÿæˆä¸€ä¸ªåŒ…å«ç”¨æˆ·ä¿¡æ¯çš„tokenä»¤ç‰Œï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ¯æ¬¡å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚å…ˆéªŒè¯æ˜¯å¦è¯·æ±‚å¤´ä¸­å¸¦æœ‰tokenï¼Œè¦æ˜¯æœ‰tokenè§£æå‡ºæ¥çš„ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Œä»¥æ­¤æ¥ç¡®å®šç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚","like_count":5,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":466931,"discussion_content":"æ£’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568129083,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":121406,"user_name":"å¤œæœˆä¸æŒ‚ç§‘","can_delete":false,"product_type":"c1","uid":1543651,"ip_address":"","ucode":"9D358B176E5CA9","user_header":"https://static001.geekbang.org/account/avatar/00/17/8d/e3/c3ed083a.jpg","comment_is_top":false,"comment_ctime":1565136579,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"14450038467","product_id":100026901,"comment_content":"djangoä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªcsrfå­—æ®µç”¨æ¥è®¤è¯ã€‚","like_count":3,"discussions":[{"author":{"id":1414844,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKxqOFPRvW2d6WEC705zuSSvxBOBxibBib4XQxBGAGPOx2bRGqhsSeQkUNa0Z11OJoKbuGsNaMR4GNg/132","nickname":"hel793","note":"","ucode":"4E4F51EE321162","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":12967,"discussion_content":"CSRFå­—æ®µæ˜¯ç”¨æ¥é˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»çš„ï¼Œä¸æ˜¯ç”¨æ¥è®¤è¯çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1568620684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":122998,"user_name":"è·¯ä¼´å‹è¡Œ","can_delete":false,"product_type":"c1","uid":1506974,"ip_address":"","ucode":"96B54B7EEAEDAD","user_header":"https://static001.geekbang.org/account/avatar/00/16/fe/9e/8165b0a0.jpg","comment_is_top":false,"comment_ctime":1565585071,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10155519663","product_id":100026901,"comment_content":"DRF æœ‰è‡ªå¸¦çš„tokenéªŒè¯ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸­é—´ä»¶å®ç°æ‹¦æˆª","like_count":2},{"had_liked":false,"id":121680,"user_name":"æ——æœ¨å¡å¡","can_delete":false,"product_type":"c1","uid":1104407,"ip_address":"","ucode":"2C05BFE91D6892","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/17/69cca649.jpg","comment_is_top":false,"comment_ctime":1565181833,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10155116425","product_id":100026901,"comment_content":"ä¸çŸ¥ä¸è§‰å·²ç»å­¦ä¹ äº†40è®²ï¼Œä¸“æ é©¬ä¸Šå°±ç»“æŸäº†ï¼Œè¿˜æ²¡å­¦å¤Ÿï¼","like_count":2},{"had_liked":false,"id":258219,"user_name":"å±±é›¨æ·‹æ·‹","can_delete":false,"product_type":"c1","uid":1515297,"ip_address":"","ucode":"0D4538C616A130","user_header":"https://static001.geekbang.org/account/avatar/00/17/1f/21/da776587.jpg","comment_is_top":false,"comment_ctime":1604328376,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5899295672","product_id":100026901,"comment_content":"ç›‘æ§ç³»ç»Ÿçš„ç¨³å®šæ€§è°æ¥ä¿è¯ï¼Œç›‘æ§ç›‘æ§ç³»ç»Ÿæœ¬èº«ï¼Ÿ","like_count":1},{"had_liked":false,"id":254166,"user_name":"æ—æ¶¦å¨¥æ˜¯æˆ‘å¥³æœ‹å‹","can_delete":false,"product_type":"c1","uid":1422391,"ip_address":"","ucode":"5660F6039156A7","user_header":"https://static001.geekbang.org/account/avatar/00/15/b4/37/5d2a5288.jpg","comment_is_top":false,"comment_ctime":1603075003,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5898042299","product_id":100026901,"comment_content":"Djangoæ˜¯MVTï¼Œè™½ç„¶æ˜¯ä»MVCæ¼”å˜çš„ï¼Œä½†è¿˜æ˜¯æœ‰å¿…è¦åŒºåˆ«å¼€","like_count":1},{"had_liked":false,"id":245059,"user_name":"Rså…ˆç”Ÿ","can_delete":false,"product_type":"c1","uid":1649120,"ip_address":"","ucode":"4B09A979E106F9","user_header":"https://static001.geekbang.org/account/avatar/00/19/29/e0/35835788.jpg","comment_is_top":false,"comment_ctime":1598799474,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5893766770","product_id":100026901,"comment_content":"è¯·æ•™è€å¸ˆä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ç”¨çš„æ˜¯python2.7ï¼Œç„¶åDjangoçš„ç‰ˆæœ¬ä¸º1.11.29ï¼Œä½†æ˜¯åœ¨æœ€åè®¿é—®urlçš„æ˜¯æ—¶å€™çš„æ˜¾ç¤ºpage not foundã€‚è¿™ä¸ªæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ<br>","like_count":1},{"had_liked":false,"id":241232,"user_name":"è¿½é£ç­çš„äºº","can_delete":false,"product_type":"c1","uid":1488020,"ip_address":"","ucode":"2993D60F94C396","user_header":"https://static001.geekbang.org/account/avatar/00/16/b4/94/2796de72.jpg","comment_is_top":false,"comment_ctime":1597220269,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5892187565","product_id":100026901,"comment_content":"<br>pip3 install Django<br>django-admin --version<br><br>########## è¾“å‡º ##########<br><br>2.2.3<br>è€å¸ˆ  djangoçš„è¿™äº›å‘½ä»¤å†Windows CMDå‘½ä»¤æ¡†æ‰§è¡Œåä¸è¡Œï¼Œè®¿é—®ä¸äº†https:&#47;&#47;127.0.0.1:8000,  å†centos æ‰§è¡Œå®Œæ‰€æœ‰ä»£ç   å¯åŠ¨ådjango æœåŠ¡ï¼Œå‘½ä»¤æ˜¾ç¤º[root@localhost TradingMonitor]# python3 manage.py runserver<br>Watching for file changes with StatReloader<br>Performing system checks...<br><br>System check identified no issues (0 silenced).<br>August 12, 2020 - 15:59:14<br>Django version 3.1, using settings &#39;TradingMonitor.settings&#39;<br>Starting development server at http:&#47;&#47;127.0.0.1:8000&#47;<br>Quit the server with CONTROL-C. ï¼Œä½†æ˜¯æµè§ˆå™¨è®¿é—®å¤±è´¥ æ˜¯ä»€ä¹ˆåŸå› ","like_count":1,"discussions":[{"author":{"id":1009002,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/65/6a/be36c108.jpg","nickname":"ikel","note":"","ucode":"1D5CE7803C1C2B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":319234,"discussion_content":"settings.pyä¸­ä¿®æ”¹è¿™ä¸ªè¯•è¯•\nALLOWED_HOSTS = [&#39;*&#39;]\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603968205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":239581,"user_name":"Geek_aa780e","can_delete":false,"product_type":"c1","uid":1671394,"ip_address":"","ucode":"20C49732158424","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/8KpWhCMxgVgqKMxNT9zuJuVnz1gNBzYlWrZCO4hlF4OQibhawvn0hpHhHgHr4kSXfVNjeuE4StuvTR54NGcE4Zg/132","comment_is_top":false,"comment_ctime":1596591489,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5891558785","product_id":100026901,"comment_content":"å¯ä»¥è®²ä¸€ä¸‹åœ¨webé¡¹ç›®ä¸­ï¼Œå¯¹äºéæ³•æƒ…å†µï¼Œæ¯”å¦‚è¯´æ•°æ®åº“é“¾æ¥é”™è¯¯æŠ¥çš„å¼‚å¸¸ï¼Œè¯¥æ€ä¹ˆå¤„ç†å—ï¼Ÿ æ˜¯ç›´æ¥æŠ›åˆ°handlerå±‚ï¼Œè¿˜æ˜¯åœ¨å“ªè¿›è¡Œæ•è·ï¼Ÿ ","like_count":1},{"had_liked":false,"id":206382,"user_name":"çš®çš®ä¾ ","can_delete":false,"product_type":"c1","uid":1258402,"ip_address":"","ucode":"04205990C1DE1F","user_header":"https://static001.geekbang.org/account/avatar/00/13/33/a2/6c0ffc15.jpg","comment_is_top":false,"comment_ctime":1586850776,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5881818072","product_id":100026901,"comment_content":"djangoå¥½åƒæ˜¯åŸºäºMVTæ¨¡å‹ï¼Œä¸è¿‡è·ŸMVCå·®ä¸å¤š","like_count":1},{"had_liked":false,"id":203892,"user_name":"å§‘è‹å°æ²ˆğŸƒğŸ¸","can_delete":false,"product_type":"c1","uid":1085941,"ip_address":"","ucode":"FFC9C7BC1C6B4B","user_header":"https://static001.geekbang.org/account/avatar/00/10/91/f5/6881f336.jpg","comment_is_top":false,"comment_ctime":1586301261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5881268557","product_id":100026901,"comment_content":"è¯·æ•™ä¸€ä¸ªSqlalchemyçš„æ›´æ–°æ•°æ®é—®é¢˜ï¼š<br>æˆ‘åˆ›å»ºä¸€ä¸ªsessionåï¼Œsession. query(User). filter(ID=user_id). first()<br>æ˜æ˜èƒ½æ‰¾åˆ°ä¸€æ¡æ•°æ®ï¼Œä½†æ˜¯æ‰§è¡Œ user.Name = &#39;my nam&#39;<br>session. commit()æ—¶å´æç¤º expected to update 1 row: 0 were matched","like_count":1},{"had_liked":false,"id":123963,"user_name":"æ‹¾æ‡æ‹¾æ‡","can_delete":false,"product_type":"c1","uid":1051873,"ip_address":"","ucode":"D775F374C2A1D3","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/e1/f663213e.jpg","comment_is_top":false,"comment_ctime":1565785013,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"5860752309","product_id":100026901,"comment_content":"DRFå¥½åƒå¥½ä¹…æ²¡æ›´æ–°äº†ï¼Œä¸æ”¯æŒDjango2.0ã€‚ä¸çŸ¥é“æœ‰ä»€ä¹ˆæ¡†æ¶å¯ä»¥æ›¿ä»£","like_count":1},{"had_liked":false,"id":121938,"user_name":"jxs1211","can_delete":false,"product_type":"c1","uid":1101006,"ip_address":"","ucode":"B7F1F2D84389E7","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132","comment_is_top":false,"comment_ctime":1565252933,"is_pvip":false,"replies":[{"id":"48147","content":"fbæ˜¯é€šè¿‡graphqlè¿æ¥å‰åç«¯ã€‚å‰åç«¯ä¹Ÿæ˜¯ç‹¬ç«‹å¼€å‘ã€‚åšåç«¯ä¸éœ€è¦çœ‹ä»€ä¹ˆä¹¦ç±ï¼Œä¸å¦‚å¤šæ“ä½œï¼Œå¤šçœ‹ä¸€äº›ä¼˜ç§€çš„ä»£ç ","user_name":"ä½œè€…å›å¤","user_name_real":"Jingxiao","uid":"1259521","ctime":1567123789,"ip_address":"","comment_id":121938,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5860220229","product_id":100026901,"comment_content":"ç›®å‰æµè¡Œå‰åç«¯åˆ†ç¦»ï¼Œé€šè¿‡httpé€šä¿¡ï¼Œç‹¬ç«‹éƒ¨ç½²ï¼Œä¸çŸ¥åœ¨fackbookä¹Ÿæ˜¯è¿™æ ·ï¼Œå¦å¤–æƒ³äº†è§£ä¸‹pythonåšåç«¯æœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„æ¨èä¹¦ç±å¯ä¾›å­¦ä¹ å—","like_count":2,"discussions":[{"author":{"id":1259521,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132","nickname":"Jingxiao","note":"","ucode":"EB966BB87132F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":462015,"discussion_content":"fbæ˜¯é€šè¿‡graphqlè¿æ¥å‰åç«¯ã€‚å‰åç«¯ä¹Ÿæ˜¯ç‹¬ç«‹å¼€å‘ã€‚åšåç«¯ä¸éœ€è¦çœ‹ä»€ä¹ˆä¹¦ç±ï¼Œä¸å¦‚å¤šæ“ä½œï¼Œå¤šçœ‹ä¸€äº›ä¼˜ç§€çš„ä»£ç ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567123789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":311046,"user_name":"è½é›¨","can_delete":false,"product_type":"c1","uid":2041435,"ip_address":"","ucode":"5B3B09E72211B6","user_header":"https://static001.geekbang.org/account/avatar/00/1f/26/5b/30281476.jpg","comment_is_top":false,"comment_ctime":1631029684,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1631029684","product_id":100026901,"comment_content":"æŒ‰ç…§æ–‡æ¡£æ“ä½œ,æœ€åä¸€ç›´æç¤ºno such table: TradingMonitor_position .æ„Ÿè§‰å¾ˆå¤šåœ°æ–¹éƒ½æ²¡è®²æ¸…æ¥š.è¿™è¯¾æ„Ÿè§‰æœ‰ç‚¹ä¸å€¼","like_count":0},{"had_liked":false,"id":165568,"user_name":"Geek_a86175","can_delete":false,"product_type":"c1","uid":1704845,"ip_address":"","ucode":"EFBFFEF86C4120","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/O1kSTJtNUNtpehQmFxbSVHiaOHbibYR3dB2Ms9LgmfkGFxLfpM8QCcyge1OP5HLCpxXtFcy1jXcc3ibiaTcfaQ0pmg/132","comment_is_top":false,"comment_ctime":1577261781,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1577261781","product_id":100026901,"comment_content":"æœ‰çš„æ–‡ç« è¯´åˆ›å»ºé¡¹ç›®åï¼Œè¿˜åº”è¯¥åˆ›å»ºåº”ç”¨ï¼Œä¸€ä¸ªå¤§çš„ä¸šåŠ¡æ¨¡å—ä½œä¸ºä¸€ä¸ªAPPï¼Œè¿™ä¸ªæ–‡ç« å¥½åƒæ²¡æœ‰æåŠè¿™å—","like_count":0},{"had_liked":false,"id":149044,"user_name":"è‡ªç”±æ°‘","can_delete":false,"product_type":"c1","uid":1346236,"ip_address":"","ucode":"435C67531697F1","user_header":"https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg","comment_is_top":false,"comment_ctime":1573130707,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573130707","product_id":100026901,"comment_content":"ä½¿ç”¨å®‰å…¨ä»¤ç‰Œã€‚é€‚ç”¨äºæœåŠ¡å™¨å®¢æˆ·ç«¯ç¨‹åºã€‚https:&#47;&#47;blog.csdn.net&#47;qw943571775&#47;article&#47;details&#47;82687843","like_count":0},{"had_liked":false,"id":121728,"user_name":"ç¨³","can_delete":false,"product_type":"c1","uid":1284626,"ip_address":"","ucode":"BF5723E63E4115","user_header":"https://static001.geekbang.org/account/avatar/00/13/9a/12/06863960.jpg","comment_is_top":false,"comment_ctime":1565193476,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565193476","product_id":100026901,"comment_content":"Djangoè‡ªå¸¦çš„æ˜¯é€šè¿‡sessionæ¥è®¤è¯çš„ï¼ŒDRFé‡Œæ”¯æŒTokenç­‰å½¢å¼ï¼Œå¤§å¤šé€šè¿‡ä¸­é—´ä»¶ã€dispatchã€è£…é¥°å™¨æ¥å®ç°","like_count":0},{"had_liked":false,"id":121677,"user_name":"æ——æœ¨å¡å¡","can_delete":false,"product_type":"c1","uid":1104407,"ip_address":"","ucode":"2C05BFE91D6892","user_header":"https://static001.geekbang.org/account/avatar/00/10/da/17/69cca649.jpg","comment_is_top":false,"comment_ctime":1565181649,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565181649","product_id":100026901,"comment_content":"é€šè¿‡ Session or auth or Tokenæ¥å®ç°ï¼Ÿ","like_count":0},{"had_liked":false,"id":121546,"user_name":"Hurt","can_delete":false,"product_type":"c1","uid":1050946,"ip_address":"","ucode":"DCE7428CCF08EF","user_header":"https://static001.geekbang.org/account/avatar/00/10/09/42/1f762b72.jpg","comment_is_top":false,"comment_ctime":1565157324,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1565157324","product_id":100026901,"comment_content":"å¯ä»¥ç”¨drf æˆ–è€…è‡ªå·±åšæ•°æ® é€šè¿‡è·¯ç”±å’Œæ–¹æ³•è‡ªå·±ç»„ç»‡","like_count":0}]}