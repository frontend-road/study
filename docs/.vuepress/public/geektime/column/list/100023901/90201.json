{"id":90201,"title":"20 | å¹¶å‘å®¹å™¨ï¼šéƒ½æœ‰å“ªäº›â€œå‘â€éœ€è¦æˆ‘ä»¬å¡«ï¼Ÿ","content":"<p>Javaå¹¶å‘åŒ…æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å†…å®¹éƒ½æ˜¯å…³äº<strong>å¹¶å‘å®¹å™¨</strong>çš„ï¼Œå› æ­¤å­¦ä¹ å’Œææ‡‚è¿™éƒ¨åˆ†çš„å†…å®¹å¾ˆæœ‰å¿…è¦ã€‚</p><p>Java 1.5ä¹‹å‰æä¾›çš„<strong>åŒæ­¥å®¹å™¨</strong>è™½ç„¶ä¹Ÿèƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯æ€§èƒ½å¾ˆå·®ï¼Œè€ŒJava 1.5ç‰ˆæœ¬ä¹‹åæä¾›çš„å¹¶å‘å®¹å™¨åœ¨æ€§èƒ½æ–¹é¢åˆ™åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œå¹¶ä¸”å®¹å™¨çš„ç±»å‹ä¹Ÿæ›´åŠ ä¸°å¯Œäº†ã€‚ä¸‹é¢æˆ‘ä»¬å°±å¯¹æ¯”äºŒè€…æ¥å­¦ä¹ è¿™éƒ¨åˆ†çš„å†…å®¹ã€‚</p><h2>åŒæ­¥å®¹å™¨åŠå…¶æ³¨æ„äº‹é¡¹</h2><p>Javaä¸­çš„å®¹å™¨ä¸»è¦å¯ä»¥åˆ†ä¸ºå››ä¸ªå¤§ç±»ï¼Œåˆ†åˆ«æ˜¯Listã€Mapã€Setå’ŒQueueï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„Javaå®¹å™¨éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„ArrayListã€HashMapå°±ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚åœ¨ä»‹ç»çº¿ç¨‹å®‰å…¨çš„å®¹å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒè¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•å°†éçº¿ç¨‹å®‰å…¨çš„å®¹å™¨å˜æˆçº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼Ÿ</p><p>åœ¨å‰é¢<a href=\"https://time.geekbang.org/column/article/87365\">ã€Š12 | å¦‚ä½•ç”¨é¢å‘å¯¹è±¡æ€æƒ³å†™å¥½å¹¶å‘ç¨‹åºï¼Ÿã€‹</a>æˆ‘ä»¬è®²è¿‡å®ç°æ€è·¯å…¶å®å¾ˆç®€å•ï¼Œåªè¦æŠŠéçº¿ç¨‹å®‰å…¨çš„å®¹å™¨å°è£…åœ¨å¯¹è±¡å†…éƒ¨ï¼Œç„¶åæ§åˆ¶å¥½è®¿é—®è·¯å¾„å°±å¯ä»¥äº†ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±ä»¥ArrayListä¸ºä¾‹ï¼Œçœ‹çœ‹å¦‚ä½•å°†å®ƒå˜æˆçº¿ç¨‹å®‰å…¨çš„ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼ŒSafeArrayListå†…éƒ¨æŒæœ‰ä¸€ä¸ªArrayListçš„å®ä¾‹cï¼Œæ‰€æœ‰è®¿é—®cçš„æ–¹æ³•æˆ‘ä»¬éƒ½å¢åŠ äº†synchronizedå…³é”®å­—ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬è¿˜å¢åŠ äº†ä¸€ä¸ªaddIfNotExist()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯ç”¨synchronizedæ¥ä¿è¯åŸå­æ€§çš„ã€‚</p><!-- [[[read_end]]] --><pre><code>SafeArrayList&lt;T&gt;{\n  //å°è£…ArrayList\n  List&lt;T&gt; c = new ArrayList&lt;&gt;();\n  //æ§åˆ¶è®¿é—®è·¯å¾„\n  synchronized\n  T get(int idx){\n    return c.get(idx);\n  }\n\n  synchronized\n  void add(int idx, T t) {\n    c.add(idx, t);\n  }\n\n  synchronized\n  boolean addIfNotExist(T t){\n    if(!c.contains(t)) {\n      c.add(t);\n      return true;\n    }\n    return false;\n  }\n}\n</code></pre><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šä¸¾ä¸€åä¸‰ï¼Œç„¶åæƒ³åˆ°ï¼šæ‰€æœ‰éçº¿ç¨‹å®‰å…¨çš„ç±»æ˜¯ä¸æ˜¯éƒ½å¯ä»¥ç”¨è¿™ç§åŒ…è£…çš„æ–¹å¼æ¥å®ç°çº¿ç¨‹å®‰å…¨å‘¢ï¼Ÿå…¶å®è¿™ä¸€ç‚¹ä¸æ­¢ä½ æƒ³åˆ°äº†ï¼ŒJava SDKçš„å¼€å‘äººå‘˜ä¹Ÿæƒ³åˆ°äº†ï¼Œæ‰€ä»¥ä»–ä»¬åœ¨Collectionsè¿™ä¸ªç±»ä¸­è¿˜æä¾›äº†ä¸€å¥—å®Œå¤‡çš„åŒ…è£…ç±»ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œåˆ†åˆ«æŠŠArrayListã€HashSetå’ŒHashMapåŒ…è£…æˆäº†çº¿ç¨‹å®‰å…¨çš„Listã€Setå’ŒMapã€‚</p><pre><code>List list = Collections.\n  synchronizedList(new ArrayList());\nSet set = Collections.\n  synchronizedSet(new HashSet());\nMap map = Collections.\n  synchronizedMap(new HashMap());\n</code></pre><p>æˆ‘ä»¬æ›¾ç»å¤šæ¬¡å¼ºè°ƒï¼Œ<strong>ç»„åˆæ“ä½œéœ€è¦æ³¨æ„ç«æ€æ¡ä»¶é—®é¢˜</strong>ï¼Œä¾‹å¦‚ä¸Šé¢æåˆ°çš„addIfNotExist()æ–¹æ³•å°±åŒ…å«ç»„åˆæ“ä½œã€‚ç»„åˆæ“ä½œå¾€å¾€éšè—ç€ç«æ€æ¡ä»¶é—®é¢˜ï¼Œå³ä¾¿æ¯ä¸ªæ“ä½œéƒ½èƒ½ä¿è¯åŸå­æ€§ï¼Œä¹Ÿå¹¶ä¸èƒ½ä¿è¯ç»„åˆæ“ä½œçš„åŸå­æ€§ï¼Œè¿™ä¸ªä¸€å®šè¦æ³¨æ„ã€‚</p><p>åœ¨å®¹å™¨é¢†åŸŸ<strong>ä¸€ä¸ªå®¹æ˜“è¢«å¿½è§†çš„â€œå‘â€æ˜¯ç”¨è¿­ä»£å™¨éå†å®¹å™¨</strong>ï¼Œä¾‹å¦‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œé€šè¿‡è¿­ä»£å™¨éå†å®¹å™¨listï¼Œå¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨foo()æ–¹æ³•ï¼Œè¿™å°±å­˜åœ¨å¹¶å‘é—®é¢˜ï¼Œè¿™äº›ç»„åˆçš„æ“ä½œä¸å…·å¤‡åŸå­æ€§ã€‚</p><pre><code>List list = Collections.\n  synchronizedList(new ArrayList());\nIterator i = list.iterator(); \nwhile (i.hasNext())\n  foo(i.next());\n</code></pre><p>è€Œæ­£ç¡®åšæ³•æ˜¯ä¸‹é¢è¿™æ ·ï¼Œé”ä½listä¹‹åå†æ‰§è¡Œéå†æ“ä½œã€‚å¦‚æœä½ æŸ¥çœ‹Collectionså†…éƒ¨çš„åŒ…è£…ç±»æºç ï¼Œä½ ä¼šå‘ç°åŒ…è£…ç±»çš„å…¬å…±æ–¹æ³•é”çš„æ˜¯å¯¹è±¡çš„thisï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬è¿™é‡Œçš„listï¼Œæ‰€ä»¥é”ä½listç»å¯¹æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><pre><code>List list = Collections.\n  synchronizedList(new ArrayList());\nsynchronized (list) {  \n  Iterator i = list.iterator(); \n  while (i.hasNext())\n    foo(i.next());\n}    \n</code></pre><p>ä¸Šé¢æˆ‘ä»¬æåˆ°çš„è¿™äº›ç»è¿‡åŒ…è£…åçº¿ç¨‹å®‰å…¨å®¹å™¨ï¼Œéƒ½æ˜¯åŸºäºsynchronizedè¿™ä¸ªåŒæ­¥å…³é”®å­—å®ç°çš„ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸º<strong>åŒæ­¥å®¹å™¨</strong>ã€‚Javaæä¾›çš„åŒæ­¥å®¹å™¨è¿˜æœ‰Vectorã€Stackå’ŒHashtableï¼Œè¿™ä¸‰ä¸ªå®¹å™¨ä¸æ˜¯åŸºäºåŒ…è£…ç±»å®ç°çš„ï¼Œä½†åŒæ ·æ˜¯åŸºäºsynchronizedå®ç°çš„ï¼Œå¯¹è¿™ä¸‰ä¸ªå®¹å™¨çš„éå†ï¼ŒåŒæ ·è¦åŠ é”ä¿è¯äº’æ–¥ã€‚</p><h2>å¹¶å‘å®¹å™¨åŠå…¶æ³¨æ„äº‹é¡¹</h2><p>Javaåœ¨1.5ç‰ˆæœ¬ä¹‹å‰æ‰€è°“çš„çº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼Œä¸»è¦æŒ‡çš„å°±æ˜¯<strong>åŒæ­¥å®¹å™¨</strong>ã€‚ä¸è¿‡åŒæ­¥å®¹å™¨æœ‰ä¸ªæœ€å¤§çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯æ€§èƒ½å·®ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½ç”¨synchronizedæ¥ä¿è¯äº’æ–¥ï¼Œä¸²è¡Œåº¦å¤ªé«˜äº†ã€‚å› æ­¤Javaåœ¨1.5åŠä¹‹åç‰ˆæœ¬æä¾›äº†æ€§èƒ½æ›´é«˜çš„å®¹å™¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¸º<strong>å¹¶å‘å®¹å™¨</strong>ã€‚</p><p>å¹¶å‘å®¹å™¨è™½ç„¶æ•°é‡éå¸¸å¤šï¼Œä½†ä¾ç„¶æ˜¯å‰é¢æˆ‘ä»¬æåˆ°çš„å››å¤§ç±»ï¼šListã€Mapã€Setå’ŒQueueï¼Œä¸‹é¢çš„å¹¶å‘å®¹å™¨å…³ç³»å›¾ï¼ŒåŸºæœ¬ä¸ŠæŠŠæˆ‘ä»¬ç»å¸¸ç”¨çš„å®¹å™¨éƒ½è¦†ç›–åˆ°äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/a2/1d/a20efe788caf4f07a4ad027639c80b1d.png?wh=1142*378\" alt=\"\"></p><center><span class=\"reference\">å¹¶å‘å®¹å™¨å…³ç³»å›¾</span></center><p>é‰´äºå¹¶å‘å®¹å™¨çš„æ•°é‡å¤ªå¤šï¼Œå†åŠ ä¸Šç¯‡å¹…é™åˆ¶ï¼Œæ‰€ä»¥æˆ‘å¹¶ä¸ä¼šä¸€ä¸€è¯¦ç»†ä»‹ç»å®ƒä»¬çš„ç”¨æ³•ï¼Œåªæ˜¯æŠŠå…³é”®ç‚¹ä»‹ç»ä¸€ä¸‹ã€‚</p><h3>ï¼ˆä¸€ï¼‰List</h3><p>Listé‡Œé¢åªæœ‰ä¸€ä¸ªå®ç°ç±»å°±æ˜¯<strong>CopyOnWriteArrayList</strong>ã€‚CopyOnWriteï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å†™çš„æ—¶å€™ä¼šå°†å…±äº«å˜é‡æ–°å¤åˆ¶ä¸€ä»½å‡ºæ¥ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯è¯»æ“ä½œå®Œå…¨æ— é”ã€‚</p><p>é‚£CopyOnWriteArrayListçš„å®ç°åŸç†æ˜¯æ€æ ·çš„å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±æ¥ç®€å•ä»‹ç»ä¸€ä¸‹</p><p>CopyOnWriteArrayListå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜å˜é‡arrayå°±æŒ‡å‘è¿™ä¸ªå†…éƒ¨æ•°ç»„ï¼Œæ‰€æœ‰çš„è¯»æ“ä½œéƒ½æ˜¯åŸºäºarrayè¿›è¡Œçš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿­ä»£å™¨Iteratoréå†çš„å°±æ˜¯arrayæ•°ç»„ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/38/10/38739130ee9f34b821b5849f4f15e710.png?wh=1142*279\" alt=\"\"></p><center><span class=\"reference\">æ‰§è¡Œè¿­ä»£çš„å†…éƒ¨ç»“æ„å›¾</span></center><p>å¦‚æœåœ¨éå†arrayçš„åŒæ—¶ï¼Œè¿˜æœ‰ä¸€ä¸ªå†™æ“ä½œï¼Œä¾‹å¦‚å¢åŠ å…ƒç´ ï¼ŒCopyOnWriteArrayListæ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ï¼ŸCopyOnWriteArrayListä¼šå°†arrayå¤åˆ¶ä¸€ä»½ï¼Œç„¶ååœ¨æ–°å¤åˆ¶å¤„ç†çš„æ•°ç»„ä¸Šæ‰§è¡Œå¢åŠ å…ƒç´ çš„æ“ä½œï¼Œæ‰§è¡Œå®Œä¹‹åå†å°†arrayæŒ‡å‘è¿™ä¸ªæ–°çš„æ•°ç»„ã€‚é€šè¿‡ä¸‹å›¾ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¯»å†™æ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œéå†æ“ä½œä¸€ç›´éƒ½æ˜¯åŸºäºåŸarrayæ‰§è¡Œï¼Œè€Œå†™æ“ä½œåˆ™æ˜¯åŸºäºæ–°arrayè¿›è¡Œã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/b8/89/b861fb667e94c4e6ea0ca9985e63c889.png?wh=1142*507\" alt=\"\"></p><center><span class=\"reference\">æ‰§è¡Œå¢åŠ å…ƒç´ çš„å†…éƒ¨ç»“æ„å›¾</span></center><p>ä½¿ç”¨CopyOnWriteArrayListéœ€è¦æ³¨æ„çš„â€œå‘â€ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢ã€‚ä¸€ä¸ªæ˜¯åº”ç”¨åœºæ™¯ï¼ŒCopyOnWriteArrayListä»…é€‚ç”¨äºå†™æ“ä½œéå¸¸å°‘çš„åœºæ™¯ï¼Œè€Œä¸”èƒ½å¤Ÿå®¹å¿è¯»å†™çš„çŸ­æš‚ä¸ä¸€è‡´ã€‚ä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå†™å…¥çš„æ–°å…ƒç´ å¹¶ä¸èƒ½ç«‹åˆ»è¢«éå†åˆ°ã€‚å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCopyOnWriteArrayListè¿­ä»£å™¨æ˜¯åªè¯»çš„ï¼Œä¸æ”¯æŒå¢åˆ æ”¹ã€‚å› ä¸ºè¿­ä»£å™¨éå†çš„ä»…ä»…æ˜¯ä¸€ä¸ªå¿«ç…§ï¼Œè€Œå¯¹å¿«ç…§è¿›è¡Œå¢åˆ æ”¹æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p><h3>ï¼ˆäºŒï¼‰Map</h3><p>Mapæ¥å£çš„ä¸¤ä¸ªå®ç°æ˜¯ConcurrentHashMapå’ŒConcurrentSkipListMapï¼Œå®ƒä»¬ä»åº”ç”¨çš„è§’åº¦æ¥çœ‹ï¼Œä¸»è¦åŒºåˆ«åœ¨äº<strong>ConcurrentHashMapçš„keyæ˜¯æ— åºçš„ï¼Œè€ŒConcurrentSkipListMapçš„keyæ˜¯æœ‰åºçš„</strong>ã€‚æ‰€ä»¥å¦‚æœä½ éœ€è¦ä¿è¯keyçš„é¡ºåºï¼Œå°±åªèƒ½ä½¿ç”¨ConcurrentSkipListMapã€‚</p><p>ä½¿ç”¨ConcurrentHashMapå’ŒConcurrentSkipListMapéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå®ƒä»¬çš„keyå’Œvalueéƒ½ä¸èƒ½ä¸ºç©ºï¼Œå¦åˆ™ä¼šæŠ›å‡º<code>NullPointerException</code>è¿™ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†Mapç›¸å…³çš„å®ç°ç±»å¯¹äºkeyå’Œvalueçš„è¦æ±‚ï¼Œä½ å¯ä»¥å¯¹æ¯”å­¦ä¹ ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/6d/be/6da9933b6312acf3445f736262425abe.png?wh=1142*596\" alt=\"\"></p><p>ConcurrentSkipListMapé‡Œé¢çš„SkipListæœ¬èº«å°±æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œä¸­æ–‡ä¸€èˆ¬éƒ½ç¿»è¯‘ä¸ºâ€œè·³è¡¨â€ã€‚è·³è¡¨æ’å…¥ã€åˆ é™¤ã€æŸ¥è¯¢æ“ä½œå¹³å‡çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(log n)ï¼Œç†è®ºä¸Šå’Œå¹¶å‘çº¿ç¨‹æ•°æ²¡æœ‰å…³ç³»ï¼Œæ‰€ä»¥åœ¨å¹¶å‘åº¦éå¸¸é«˜çš„æƒ…å†µä¸‹ï¼Œè‹¥ä½ å¯¹ConcurrentHashMapçš„æ€§èƒ½è¿˜ä¸æ»¡æ„ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹ConcurrentSkipListMapã€‚</p><h3>ï¼ˆä¸‰ï¼‰Set</h3><p>Setæ¥å£çš„ä¸¤ä¸ªå®ç°æ˜¯CopyOnWriteArraySetå’ŒConcurrentSkipListSetï¼Œä½¿ç”¨åœºæ™¯å¯ä»¥å‚è€ƒå‰é¢è®²è¿°çš„CopyOnWriteArrayListå’ŒConcurrentSkipListMapï¼Œå®ƒä»¬çš„åŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚</p><h3>ï¼ˆå››ï¼‰Queue</h3><p>Javaå¹¶å‘åŒ…é‡Œé¢Queueè¿™ç±»å¹¶å‘å®¹å™¨æ˜¯æœ€å¤æ‚çš„ï¼Œä½ å¯ä»¥ä»ä»¥ä¸‹ä¸¤ä¸ªç»´åº¦æ¥åˆ†ç±»ã€‚ä¸€ä¸ªç»´åº¦æ˜¯<strong>é˜»å¡ä¸éé˜»å¡</strong>ï¼Œæ‰€è°“é˜»å¡æŒ‡çš„æ˜¯å½“é˜Ÿåˆ—å·²æ»¡æ—¶ï¼Œå…¥é˜Ÿæ“ä½œé˜»å¡ï¼›å½“é˜Ÿåˆ—å·²ç©ºæ—¶ï¼Œå‡ºé˜Ÿæ“ä½œé˜»å¡ã€‚å¦ä¸€ä¸ªç»´åº¦æ˜¯<strong>å•ç«¯ä¸åŒç«¯</strong>ï¼Œå•ç«¯æŒ‡çš„æ˜¯åªèƒ½é˜Ÿå°¾å…¥é˜Ÿï¼Œé˜Ÿé¦–å‡ºé˜Ÿï¼›è€ŒåŒç«¯æŒ‡çš„æ˜¯é˜Ÿé¦–é˜Ÿå°¾çš†å¯å…¥é˜Ÿå‡ºé˜Ÿã€‚Javaå¹¶å‘åŒ…é‡Œ<strong>é˜»å¡é˜Ÿåˆ—éƒ½ç”¨Blockingå…³é”®å­—æ ‡è¯†ï¼Œå•ç«¯é˜Ÿåˆ—ä½¿ç”¨Queueæ ‡è¯†ï¼ŒåŒç«¯é˜Ÿåˆ—ä½¿ç”¨Dequeæ ‡è¯†</strong>ã€‚</p><p>è¿™ä¸¤ä¸ªç»´åº¦ç»„åˆåï¼Œå¯ä»¥å°†Queueç»†åˆ†ä¸ºå››å¤§ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><p>1.<strong>å•ç«¯é˜»å¡é˜Ÿåˆ—</strong>ï¼šå…¶å®ç°æœ‰ArrayBlockingQueueã€LinkedBlockingQueueã€SynchronousQueueã€LinkedTransferQueueã€PriorityBlockingQueueå’ŒDelayQueueã€‚å†…éƒ¨ä¸€èˆ¬ä¼šæŒæœ‰ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿™ä¸ªé˜Ÿåˆ—å¯ä»¥æ˜¯æ•°ç»„ï¼ˆå…¶å®ç°æ˜¯ArrayBlockingQueueï¼‰ä¹Ÿå¯ä»¥æ˜¯é“¾è¡¨ï¼ˆå…¶å®ç°æ˜¯LinkedBlockingQueueï¼‰ï¼›ç”šè‡³è¿˜å¯ä»¥ä¸æŒæœ‰é˜Ÿåˆ—ï¼ˆå…¶å®ç°æ˜¯SynchronousQueueï¼‰ï¼Œæ­¤æ—¶ç”Ÿäº§è€…çº¿ç¨‹çš„å…¥é˜Ÿæ“ä½œå¿…é¡»ç­‰å¾…æ¶ˆè´¹è€…çº¿ç¨‹çš„å‡ºé˜Ÿæ“ä½œã€‚è€ŒLinkedTransferQueueèåˆLinkedBlockingQueueå’ŒSynchronousQueueçš„åŠŸèƒ½ï¼Œæ€§èƒ½æ¯”LinkedBlockingQueueæ›´å¥½ï¼›PriorityBlockingQueueæ”¯æŒæŒ‰ç…§ä¼˜å…ˆçº§å‡ºé˜Ÿï¼›DelayQueueæ”¯æŒå»¶æ—¶å‡ºé˜Ÿã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/59/83/5974a10f5eb0646fa94f7ba505bfcf83.png?wh=1142*419\" alt=\"\"></p><center><span class=\"reference\">å•ç«¯é˜»å¡é˜Ÿåˆ—ç¤ºæ„å›¾</span></center><p>2.<strong>åŒç«¯é˜»å¡é˜Ÿåˆ—</strong>ï¼šå…¶å®ç°æ˜¯LinkedBlockingDequeã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/1a/96/1a58ff20f1271d899b93a4f9d54ce396.png?wh=1142*432\" alt=\"\"></p><center><span class=\"reference\">åŒç«¯é˜»å¡é˜Ÿåˆ—ç¤ºæ„å›¾</span></center><p>3.<strong>å•ç«¯éé˜»å¡é˜Ÿåˆ—</strong>ï¼šå…¶å®ç°æ˜¯ConcurrentLinkedQueueã€‚<br>\n4.<strong>åŒç«¯éé˜»å¡é˜Ÿåˆ—</strong>ï¼šå…¶å®ç°æ˜¯ConcurrentLinkedDequeã€‚</p><p>å¦å¤–ï¼Œä½¿ç”¨é˜Ÿåˆ—æ—¶ï¼Œéœ€è¦æ ¼å¤–æ³¨æ„é˜Ÿåˆ—æ˜¯å¦æ”¯æŒæœ‰ç•Œï¼ˆæ‰€è°“æœ‰ç•ŒæŒ‡çš„æ˜¯å†…éƒ¨çš„é˜Ÿåˆ—æ˜¯å¦æœ‰å®¹é‡é™åˆ¶ï¼‰ã€‚å®é™…å·¥ä½œä¸­ï¼Œä¸€èˆ¬éƒ½ä¸å»ºè®®ä½¿ç”¨æ— ç•Œçš„é˜Ÿåˆ—ï¼Œå› ä¸ºæ•°æ®é‡å¤§äº†ä¹‹åå¾ˆå®¹æ˜“å¯¼è‡´OOMã€‚ä¸Šé¢æˆ‘ä»¬æåˆ°çš„è¿™äº›Queueä¸­ï¼Œåªæœ‰ArrayBlockingQueueå’ŒLinkedBlockingQueueæ˜¯æ”¯æŒæœ‰ç•Œçš„ï¼Œæ‰€ä»¥<strong>åœ¨ä½¿ç”¨å…¶ä»–æ— ç•Œé˜Ÿåˆ—æ—¶ï¼Œä¸€å®šè¦å……åˆ†è€ƒè™‘æ˜¯å¦å­˜åœ¨å¯¼è‡´OOMçš„éšæ‚£</strong>ã€‚</p><h2>æ€»ç»“</h2><p>Javaå¹¶å‘å®¹å™¨çš„å†…å®¹å¾ˆå¤šï¼Œä½†é‰´äºç¯‡å¹…æœ‰é™ï¼Œæˆ‘ä»¬åªæ˜¯å¯¹ä¸€äº›å…³é”®ç‚¹è¿›è¡Œäº†æ¢³ç†å’Œä»‹ç»ã€‚</p><p>è€Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œä½ ä¸å•è¦æ¸…æ¥šæ¯ç§å®¹å™¨çš„ç‰¹æ€§ï¼Œè¿˜è¦èƒ½<strong>é€‰å¯¹å®¹å™¨ï¼Œè¿™æ‰æ˜¯å…³é”®</strong>ï¼Œè‡³äºæ¯ç§å®¹å™¨çš„ç”¨æ³•ï¼Œç”¨çš„æ—¶å€™çœ‹ä¸€ä¸‹APIè¯´æ˜å°±å¯ä»¥äº†ï¼Œè¿™äº›å®¹å™¨çš„ä½¿ç”¨éƒ½ä¸éš¾ã€‚åœ¨æ–‡ä¸­ï¼Œæˆ‘ä»¬ç”šè‡³éƒ½æ²¡æœ‰ä»‹ç»Javaå®¹å™¨çš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ï¼ˆFail-Fastï¼‰ï¼ŒåŸå› å°±åœ¨äºå½“ä½ é€‰å¯¹å®¹å™¨çš„æ—¶å€™ï¼Œæ ¹æœ¬ä¸ä¼šè§¦å‘å®ƒã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>çº¿ä¸Šç³»ç»ŸCPUçªç„¶é£™å‡ï¼Œä½ æ€€ç–‘æœ‰åŒå­¦åœ¨å¹¶å‘åœºæ™¯é‡Œä½¿ç”¨äº†HashMapï¼Œå› ä¸ºåœ¨1.8ä¹‹å‰çš„ç‰ˆæœ¬é‡Œå¹¶å‘æ‰§è¡ŒHashMap.put()å¯èƒ½ä¼šå¯¼è‡´CPUé£™å‡åˆ°100%ï¼Œä½ è§‰å¾—è¯¥å¦‚ä½•éªŒè¯ä½ çš„çŒœæµ‹å‘¢ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p></p>","neighbors":{"left":{"article_title":"19 | CountDownLatchå’ŒCyclicBarrierï¼šå¦‚ä½•è®©å¤šçº¿ç¨‹æ­¥è°ƒä¸€è‡´ï¼Ÿ","id":89461},"right":{"article_title":"21 | åŸå­ç±»ï¼šæ— é”å·¥å…·ç±»çš„å…¸èŒƒ","id":90515}},"comments":[{"had_liked":false,"id":85515,"user_name":"é»‘ç™½å°¤æ–‡","can_delete":false,"product_type":"c1","uid":1152644,"ip_address":"","ucode":"95B9F73AA0F20D","user_header":"https://static001.geekbang.org/account/avatar/00/11/96/84/d4ba322f.jpg","comment_is_top":false,"comment_ctime":1555087057,"is_pvip":false,"replies":[{"id":"30656","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","comment_id":85515,"uid":"1269969","ip_address":"","utype":1,"ctime":1555116855,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"710224690897","product_id":100023901,"comment_content":"Java7ä¸­çš„HashMapåœ¨æ‰§è¡Œputæ“ä½œæ—¶ä¼šæ¶‰åŠåˆ°æ‰©å®¹ï¼Œç”±äºæ‰©å®¹æ—¶é“¾è¡¨å¹¶å‘æ“ä½œä¼šé€ æˆé“¾è¡¨æˆç¯ï¼Œæ‰€ä»¥å¯èƒ½å¯¼è‡´cpué£™å‡100%ã€‚","like_count":166,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446691,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555116855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1405947,"avatar":"https://static001.geekbang.org/account/avatar/00/15/73/fb/40164b5d.jpg","nickname":"A$APRocky","note":"","ucode":"D1B5C2F8B1B67C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":310012,"discussion_content":"å¹¶å‘æ‰§è¡Œæ‰ä¼š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1601559484,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85623,"user_name":"GrubbyğŸ‘","can_delete":false,"product_type":"c1","uid":1181905,"ip_address":"","ucode":"26B9256226F919","user_header":"https://static001.geekbang.org/account/avatar/00/12/08/d1/3c7747ef.jpg","comment_is_top":false,"comment_ctime":1555146578,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"443936778066","product_id":100023901,"comment_content":"è¿™ç¯‡å¤ªç®€å•äº†ï¼Œä½†å…¶å®è¿™äº›å®¹å™¨å¹³æ—¶ç”¨çš„æŒºå¤šçš„ï¼Œå¸Œæœ›è€å¸ˆåé¢èƒ½å‡ºä¸€ç¯‡æ›´åŠ è¯¦ç»†çš„ä»‹ç»","like_count":104},{"had_liked":false,"id":85538,"user_name":"ykkk88","can_delete":false,"product_type":"c1","uid":1068585,"ip_address":"","ucode":"A1BCFC2F0D1022","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/29/1be3dd40.jpg","comment_is_top":false,"comment_ctime":1555119377,"is_pvip":false,"replies":[{"id":"30801","content":"å¦‚æœkeyå†²çªæ¯”è¾ƒå¤§ï¼Œhashmapè¿˜æ˜¯è¦é é“¾è¡¨æˆ–è€…treeæ¥è§£å†³å†²çªçš„ï¼Œæ‰€ä»¥O(1)æ˜¯ç†æƒ³å€¼ã€‚åŒæ—¶å¢åˆ æ”¹æ“ä½œå¾ˆå¤šä¹Ÿå½±å“hashmapæ€§èƒ½ã€‚è¿™ä¸ªä¹Ÿæ˜¯è¦çœ‹å†²çªæƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´hashmapçš„ç¨³å®šæ€§å·®ï¼Œå¦‚æœå¾ˆä¸å¹¸æ­£å¥½å¶é‡å®ƒçš„ç¨³å®šæ€§é—®é¢˜ï¼ŒåŒæ—¶åˆæ¥å—ä¸äº†ï¼Œå°±å¯ä»¥å°è¯•skiplistmapï¼Œå®ƒèƒ½ä¿è¯ç¨³å®šæ€§ï¼Œæ— è®ºä½ çš„å¹¶å‘é‡æ˜¯å¤šå¤§ï¼Œä¹Ÿæ²¡æœ‰keyå†²çªçš„é—®é¢˜ã€‚","user_name":"ä½œè€…å›å¤","comment_id":85538,"uid":"1269969","ip_address":"","utype":1,"ctime":1555171749,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":5,"race_medal":2,"score":"370922306833","product_id":100023901,"comment_content":"æ²¡æœ‰ç†è§£ä¸ºä»€ä¹ˆconcurrentskiplistmapæ¯”concurrenthashmapæ€§èƒ½å¥½","like_count":87,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446702,"discussion_content":"å¦‚æœkeyå†²çªæ¯”è¾ƒå¤§ï¼Œhashmapè¿˜æ˜¯è¦é é“¾è¡¨æˆ–è€…treeæ¥è§£å†³å†²çªçš„ï¼Œæ‰€ä»¥O(1)æ˜¯ç†æƒ³å€¼ã€‚åŒæ—¶å¢åˆ æ”¹æ“ä½œå¾ˆå¤šä¹Ÿå½±å“hashmapæ€§èƒ½ã€‚è¿™ä¸ªä¹Ÿæ˜¯è¦çœ‹å†²çªæƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´hashmapçš„ç¨³å®šæ€§å·®ï¼Œå¦‚æœå¾ˆä¸å¹¸æ­£å¥½å¶é‡å®ƒçš„ç¨³å®šæ€§é—®é¢˜ï¼ŒåŒæ—¶åˆæ¥å—ä¸äº†ï¼Œå°±å¯ä»¥å°è¯•skiplistmapï¼Œå®ƒèƒ½ä¿è¯ç¨³å®šæ€§ï¼Œæ— è®ºä½ çš„å¹¶å‘é‡æ˜¯å¤šå¤§ï¼Œä¹Ÿæ²¡æœ‰keyå†²çªçš„é—®é¢˜ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555171749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1703222,"avatar":"https://static001.geekbang.org/account/avatar/00/19/fd/36/f947c340.jpg","nickname":"Rogerå®‡","note":"","ucode":"CBA23C01409349","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281456,"discussion_content":"è€å¸ˆè¯´çš„ä¸å®Œå…¨å¯¹ï¼ŒConcurrentHashMapä¸­keyå†²çªåˆ°ä¸€å®šç¨‹åº¦é“¾è¡¨ä¼šè½¬çº¢é»‘æ ‘ï¼ŒæŸ¥è¯¢é”€é‡æ˜¯OlgK,Kä¸ºåŒä¸€ä¸ªbucketå†…çš„å…ƒç´ æ•°ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªè½¬åŒ–æœ¬èº«æœ‰é¢å¤–æ¶ˆè€—ï¼Œç¨³å®šæ€§ä¸å¦‚è·³è¡¨çš„è§£é‡Šçœ‹ä¸Šå»ä¹Ÿåˆç†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1591750493,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1810156,"avatar":"","nickname":"poordickey","note":"","ucode":"2A436EC813AF97","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1703222,"avatar":"https://static001.geekbang.org/account/avatar/00/19/fd/36/f947c340.jpg","nickname":"Rogerå®‡","note":"","ucode":"CBA23C01409349","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337956,"discussion_content":"å…¶å®è·³è¡¨å°±æ˜¯å†™ä»£ç å®ç°å®¹æ˜“ç‚¹  è·Ÿçº¢é»‘æ ‘æ€§èƒ½å·®ä¸å¤š  ä½†æ˜¯ç©ºé—´ç¨å¾®å ç”¨å¤šäº›  éƒ½æ˜¯Logkæ“ä½œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609136396,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":281456,"ip_address":""},"score":337956,"extra":""}]},{"author":{"id":2963434,"avatar":"","nickname":"Geek_94fa0e","note":"","ucode":"15BC7D4E130E80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561239,"discussion_content":"ä¸ºä»€ä¹ˆ skiplist è¿˜é€‚åˆ å¢åˆ æ”¹æŸ¥ï¼Ÿï¼Ÿï¼Ÿ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649583615,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1096397,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ba/cd/1f91aa44.jpg","nickname":"KK","note":"","ucode":"14C0858C413E00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":357317,"discussion_content":"ä½ ä¹Ÿå¯ä»¥ä»ä¸¤è€…é”ä½çš„èŒƒå›´æ¥è€ƒè™‘ï¼Œmapéœ€è¦é”ä½tree","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1615784591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85532,"user_name":"å¼ å¤©å±¹","can_delete":false,"product_type":"c1","uid":1477612,"ip_address":"","ucode":"8BD6BD6DCF0F4F","user_header":"https://static001.geekbang.org/account/avatar/00/16/8b/ec/dc03f5ad.jpg","comment_is_top":false,"comment_ctime":1555115936,"is_pvip":false,"replies":[{"id":"30659","content":"ğŸ‘ï¼Œä¸æ­¢æ˜¯å­˜åœ¨ç«æ€æ¡ä»¶ï¼Œå¦‚æœåœ¨éå†çš„æ—¶å€™å‡ºç°ä¿®æ”¹æ“ä½œï¼Œç›´æ¥æŠ›å¿«é€Ÿå¤±è´¥å¼‚å¸¸<br>","user_name":"ä½œè€…å›å¤","comment_id":85532,"uid":"1269969","ip_address":"","utype":1,"ctime":1555117937,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"194828644256","product_id":100023901,"comment_content":"æˆ‘ç†è§£çš„hashMapæ¯”å…¶å®ƒçº¿æ€§å®¹å™¨æ›´å®¹æ˜“å‡ºé—®é¢˜æ˜¯å› ä¸ºæœ‰æ‰©å®¹æ“ä½œï¼Œå­˜åœ¨æ›´å¤šç«æ€æ¡ä»¶ï¼Œæ‰€ä»¥å¦‚æœæ¡ä»¶æ»¡è¶³æ—¶åˆ‡æ¢å¯èƒ½å¯¼è‡´æ–°ç”Ÿæˆå¾ˆå¤šæ•°ç»„ï¼Œç”šè‡³å¯èƒ½å‡ºç°é“¾è¡¨é—­ç¯ï¼Œè¿™ç§æƒ…å†µå¯ä»¥æŸ¥çœ‹å †æ ˆï¼Œæ¯”å¦‚jstackæŸ¥çœ‹ä¼šå‘ç°æ–¹æ³•è°ƒç”¨æ ˆä¸€ç›´å¡åœ¨HashMapçš„æ–¹æ³•ã€‚å¦å¤–ä¸Šæ–‡è¿­ä»£å™¨éå†ä¸å®‰å…¨æ˜¯å› ä¸ºhasNext(size)å’Œnext()å­˜åœ¨çš„ç«æ€æ¡ä»¶å—","like_count":45,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446700,"discussion_content":"ğŸ‘ï¼Œä¸æ­¢æ˜¯å­˜åœ¨ç«æ€æ¡ä»¶ï¼Œå¦‚æœåœ¨éå†çš„æ—¶å€™å‡ºç°ä¿®æ”¹æ“ä½œï¼Œç›´æ¥æŠ›å¿«é€Ÿå¤±è´¥å¼‚å¸¸\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555117937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1309889,"avatar":"https://static001.geekbang.org/account/avatar/00/13/fc/c1/c76c9d0e.jpg","nickname":"å‰é€”æœªåœã€‚","note":"","ucode":"6DEE5B690C7CB2","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":384812,"discussion_content":"å¾ˆå¤šå®¹å™¨éƒ½æœ‰æ‰©å®¹æ“ä½œå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626762378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85618,"user_name":"WolvesLeader","can_delete":false,"product_type":"c1","uid":1103839,"ip_address":"","ucode":"33610E19CA2E96","user_header":"https://static001.geekbang.org/account/avatar/00/10/d7/df/fc0a6709.jpg","comment_is_top":false,"comment_ctime":1555145014,"is_pvip":false,"replies":[{"id":"30761","content":"æˆ‘è§‰å¾—è‡ªå·±ç†è§£èµ·æ¥å›°éš¾è€Œä¸”å¯¹å®é™…å·¥ä½œè¿˜æœ‰ç”¨çš„å°±ä¼šè®²çš„æ·±å…¥ä¸€äº›ï¼Œåä¹‹æˆ‘è§‰å¾—æ¦‚å¿µæˆ–è€…å·¥å…·è·Ÿæ­£å¸¸æ€ç»´æ²¡æœ‰å†²çªï¼Œå°±ä¼šè®²çš„ç®€å•ï¼Œç”šè‡³ç•¥è¿‡ã€‚æ¯•ç«Ÿæˆ‘ä»¬åªæ˜¯å·¥å…·çš„ä½¿ç”¨è€…ï¼Œé¦–è¦é—®é¢˜æ˜¯åˆ©ç”¨è¿™äº›å·¥å…·è§£å†³é—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„è®¤å¯ï¼Œæˆ‘ç”šè‡³è§‰å¾—å†™å®Œç¬¬äºŒç¯‡å’Œç®¡ç¨‹ä¹‹åå°±å¯ä»¥æ”¶å·¥äº†ï¼Œå…¶ä»–æ‰€æœ‰ç« èŠ‚ä¸è¿‡å°±æ˜¯å¸®åŠ©å¤§å®¶è¿›ä¸€æ­¥ç†è§£ï¼Œä»ä¸åŒè§’åº¦ç†è§£ã€‚","user_name":"ä½œè€…å›å¤","comment_id":85618,"uid":"1269969","ip_address":"","utype":1,"ctime":1555163144,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":5,"race_medal":0,"score":"164763902262","product_id":100023901,"comment_content":"ä¸ªäººè®¤ä¸ºæ‚¨ç¬¬äºŒç¯‡å†…å­˜æ¨¡å‹è®²çš„éå¸¸æ£’ï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œ","like_count":38,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446737,"discussion_content":"æˆ‘è§‰å¾—è‡ªå·±ç†è§£èµ·æ¥å›°éš¾è€Œä¸”å¯¹å®é™…å·¥ä½œè¿˜æœ‰ç”¨çš„å°±ä¼šè®²çš„æ·±å…¥ä¸€äº›ï¼Œåä¹‹æˆ‘è§‰å¾—æ¦‚å¿µæˆ–è€…å·¥å…·è·Ÿæ­£å¸¸æ€ç»´æ²¡æœ‰å†²çªï¼Œå°±ä¼šè®²çš„ç®€å•ï¼Œç”šè‡³ç•¥è¿‡ã€‚æ¯•ç«Ÿæˆ‘ä»¬åªæ˜¯å·¥å…·çš„ä½¿ç”¨è€…ï¼Œé¦–è¦é—®é¢˜æ˜¯åˆ©ç”¨è¿™äº›å·¥å…·è§£å†³é—®é¢˜ã€‚æ„Ÿè°¢ä½ çš„è®¤å¯ï¼Œæˆ‘ç”šè‡³è§‰å¾—å†™å®Œç¬¬äºŒç¯‡å’Œç®¡ç¨‹ä¹‹åå°±å¯ä»¥æ”¶å·¥äº†ï¼Œå…¶ä»–æ‰€æœ‰ç« èŠ‚ä¸è¿‡å°±æ˜¯å¸®åŠ©å¤§å®¶è¿›ä¸€æ­¥ç†è§£ï¼Œä»ä¸åŒè§’åº¦ç†è§£ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555163144,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1008071,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/61/c7/b64ac05e.jpg","nickname":"sky","note":"","ucode":"9FE5F43055D3AB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":258540,"discussion_content":"åé¢çš„è¯¾ç¨‹æ€»ç»“å½’çº³ ç»“åˆå®é™…ä¾‹å­å¾ˆæ£’ğŸ‘","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1588691685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1063308,"avatar":"https://static001.geekbang.org/account/avatar/00/10/39/8c/089525aa.jpg","nickname":"å°ä¹™å“¥","note":"","ucode":"C77E79BEA0C325","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386957,"discussion_content":"åˆå¥‘åˆäº†å¼€ç¯‡è¯ï¼Œè·³å‡ºæ¥çœ‹å…¨æ™¯ï¼Œé’»è¿›å»çœ‹æœ¬è´¨ã€‚ä¸è¦ä¸€ä¸Šæ¥å°±å¹²ç»†èŠ‚å’Œå®ç°ï¼Œåˆ‡è®°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627909605,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1436391,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ea/e7/9ce305ec.jpg","nickname":"Sancho","note":"","ucode":"78849913082622","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333535,"discussion_content":"â€œæˆ‘ç”šè‡³è§‰å¾—å†™å®Œç¬¬äºŒç¯‡å’Œç®¡ç¨‹ä¹‹åå°±å¯ä»¥æ”¶å·¥äº†â€ï¼Œä½œè€…å¥½è°¦è™šï¼Œä¸ªäººæ„Ÿè§‰åé¢è®²å¾—è¿˜æ˜¯å¾ˆå¥½å¾ˆæœ‰ç”¨çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607559990,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1061206,"avatar":"https://static001.geekbang.org/account/avatar/00/10/31/56/c21f0a1a.jpg","nickname":"Steve","note":"","ucode":"442CE19F51D044","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":281091,"discussion_content":"å¤´å‡ ç¯‡æ˜¯ç²¾åï¼Œåé¢çš„é™ªè¡¬ã€‚ä¸€ä¸ªæˆä½“ç³»çš„æ•™ç¨‹ï¼Œéƒ½ä¸èƒ½ç¼ºå°‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591670165,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87384,"user_name":"é¾™çŒ«","can_delete":false,"product_type":"c1","uid":1112490,"ip_address":"","ucode":"FD726CC969EF9C","user_header":"https://static001.geekbang.org/account/avatar/00/10/f9/aa/3e80212e.jpg","comment_is_top":false,"comment_ctime":1555580419,"is_pvip":false,"replies":[{"id":"31415","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","comment_id":87384,"uid":"1269969","ip_address":"","utype":1,"ctime":1555587222,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":3,"race_medal":0,"score":"138994533891","product_id":100023901,"comment_content":"java8ä¹‹å‰çš„ç‰ˆæœ¬hashmapæ‰§è¡Œputæ–¹æ³•æ—¶ä¼šæœ‰ç¯å½¢é“¾è¡¨çš„é£é™©ï¼Œjava8ä»¥åæ”¹æˆäº†çº¢é»‘æ ‘","like_count":32,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447422,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555587222,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1546081,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoV7kTQGEFG101jDKycJ4AroKgTn7oicvbaia4ibk7uElZLjKe6SFoQicuvsJodHibZiazsdraiae0qhuzZg/132","nickname":"Geek_e5d39f","note":"","ucode":"A4712DE9721E06","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":263300,"discussion_content":"1.8ä¹‹åä¸ä¼šå½¢æˆå¾ªç¯é“¾è¡¨ï¼Œåº”è¯¥æ˜¯å› ä¸ºåŠ èŠ‚ç‚¹çš„æ–¹å¼å˜äº†æ— å…³çº¢é»‘æ ‘ï¼Œ\n1.7çš„æ—¶å€™æ–°å¢å…ƒç´ ä¼šæ”¾åœ¨é“¾è¡¨å¤´éƒ¨ï¼Œå¹¶å‘ä¼šæœ‰å¾ªç¯é“¾è¡¨å’Œå…ƒç´ ä¸¢å¤±é£é™©\n1.8çš„æ—¶å€™æ–°å¢å…ƒç´ æ”¾åœ¨äº†é“¾è¡¨å°¾éƒ¨ï¼Œå¹¶å‘åªä¼šæœ‰å…ƒç´ ä¸¢å¤±çš„é£é™©","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1589197039,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1655117,"avatar":"https://static001.geekbang.org/account/avatar/00/19/41/4d/f6d6d13a.jpg","nickname":"å•Šè‰¯æ¢“æ˜¯æˆ‘","note":"","ucode":"E42FC1A60D331C","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":347210,"discussion_content":"åªè¦æ”¹å˜åº”è¯¥æ˜¯ä»å¤´æ’æ³•æ”¹ä¸ºå°¾æ’æ³•å§ï¼Œè¿™æ ·å­æ‰©å®¹ ä¸ä¼šå¯¼è‡´å›ç¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1612174282,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85579,"user_name":"CCC","can_delete":false,"product_type":"c1","uid":1003738,"ip_address":"","ucode":"2E254444098267","user_header":"https://static001.geekbang.org/account/avatar/00/0f/50/da/ed4803cb.jpg","comment_is_top":false,"comment_ctime":1555132556,"is_pvip":false,"replies":[{"id":"30759","content":"é‚£ä¸ªè·³è¡¨å°±è·Ÿå­—å…¸çš„ç´¢å¼•ä¸€æ ·ï¼Œé€šè¿‡è¿™ä¸ªç´¢å¼•æ—¢èƒ½å¿«é€Ÿå®šä½æ•°æ®ï¼Œä¹Ÿèƒ½éš”ç¦»å¹¶å‘ï¼ˆå¯ä»¥å¹¶å‘æŸ¥çœ‹ä¸åŒé¡µä¸Šçš„å­—ï¼‰","user_name":"ä½œè€…å›å¤","comment_id":85579,"uid":"1269969","ip_address":"","utype":1,"ctime":1555153554,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"91749445772","product_id":100023901,"comment_content":"è€å¸ˆï¼Œç”¨è·³è¡¨å®ç°çš„ConcurrentSkipListMapä¸ºä»€ä¹ˆå¯ä»¥åšåˆ°æ— é”å¹¶å‘å‘¢","like_count":21,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446721,"discussion_content":"é‚£ä¸ªè·³è¡¨å°±è·Ÿå­—å…¸çš„ç´¢å¼•ä¸€æ ·ï¼Œé€šè¿‡è¿™ä¸ªç´¢å¼•æ—¢èƒ½å¿«é€Ÿå®šä½æ•°æ®ï¼Œä¹Ÿèƒ½éš”ç¦»å¹¶å‘ï¼ˆå¯ä»¥å¹¶å‘æŸ¥çœ‹ä¸åŒé¡µä¸Šçš„å­—ï¼‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555153554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85536,"user_name":"Liam","can_delete":false,"product_type":"c1","uid":1094597,"ip_address":"","ucode":"1D15D3B64F2606","user_header":"https://static001.geekbang.org/account/avatar/00/10/b3/c5/7fc124e2.jpg","comment_is_top":false,"comment_ctime":1555118954,"is_pvip":false,"replies":[{"id":"30784","content":"å®é™…å·¥ä½œä¸­ï¼Œä¸ºäº†é˜²æ­¢OOMï¼ŒåŸºæœ¬ä¸Šéƒ½ä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼Œæˆ‘å·¥ä½œä¸­ä¹Ÿæ²¡ç”¨è¿‡LinkedTransferQueueã€‚","user_name":"ä½œè€…å›å¤","comment_id":85536,"uid":"1269969","ip_address":"","utype":1,"ctime":1555168886,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"74569562986","product_id":100023901,"comment_content":"LinkedTransferQueueæœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯å—ï¼Ÿ","like_count":17,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446701,"discussion_content":"å®é™…å·¥ä½œä¸­ï¼Œä¸ºäº†é˜²æ­¢OOMï¼ŒåŸºæœ¬ä¸Šéƒ½ä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼Œæˆ‘å·¥ä½œä¸­ä¹Ÿæ²¡ç”¨è¿‡LinkedTransferQueueã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555168886,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85659,"user_name":"QQæ€ª","can_delete":false,"product_type":"c1","uid":1211223,"ip_address":"","ucode":"1A39B8433D9208","user_header":"https://static001.geekbang.org/account/avatar/00/12/7b/57/a9b04544.jpg","comment_is_top":false,"comment_ctime":1555165547,"is_pvip":false,"replies":[{"id":"30786","content":"æ˜¯çš„ï¼Œåº•å±‚å®ç°å˜äº†ï¼Œæˆ‘åŒäº‹åœ¨1.8ç‰ˆæœ¬è´¹äº†å¥½å¤§åŠ²éƒ½æ²¡é‡ç°å‡ºæ¥","user_name":"ä½œè€…å›å¤","comment_id":85659,"uid":"1269969","ip_address":"","utype":1,"ctime":1555169006,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"65979674987","product_id":100023901,"comment_content":"é™¤äº†jdk8ä¹‹å‰å› ä¸ºå¹¶å‘å¯¼è‡´çš„é“¾è¡¨æˆç¯çš„é—®é¢˜è¿˜æœ‰ä¸€ç§å¯èƒ½æ˜¯å› ä¸ºjdk8ä¹‹å‰hashå†²çªè¿˜æ˜¯ä½¿ç”¨çš„æ˜¯é“¾è¡¨ï¼Œè€Œjdk8ä¹‹åä½¿ç”¨äº†çº¢é»‘æ ‘ï¼Œå¼€å§‹è¿˜æ˜¯ç”Ÿæˆé“¾è¡¨ï¼Œå½“é“¾è¡¨é•¿åº¦ä¸º8æ—¶å°±ä¼šè½¬å˜ä¸ºçº¢é»‘æ ‘ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logn),æ¯”é“¾è¡¨æ•ˆæœå¥½çš„å¤šã€‚","like_count":15,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446755,"discussion_content":"æ˜¯çš„ï¼Œåº•å±‚å®ç°å˜äº†ï¼Œæˆ‘åŒäº‹åœ¨1.8ç‰ˆæœ¬è´¹äº†å¥½å¤§åŠ²éƒ½æ²¡é‡ç°å‡ºæ¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555169006,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2660077,"avatar":"","nickname":"ä¾›åº”é“¾äº‘","note":"","ucode":"3033481918D1B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":548838,"discussion_content":"jdk8ä¸­å½“é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘æ—¶ï¼Œå¤šçº¿ç¨‹ä¸‹æ“ä½œHashMapï¼Œåœ¨resizeæ—¶çº¢é»‘æ ‘è‡ªæ—‹ä¹Ÿå¯èƒ½å‡ºç°æ­»å¾ªç¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1643421126,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85564,"user_name":"ç½—æ´²","can_delete":false,"product_type":"c1","uid":1263417,"ip_address":"","ucode":"68133E38A25C17","user_header":"https://static001.geekbang.org/account/avatar/00/13/47/39/0ce1aa62.jpg","comment_is_top":false,"comment_ctime":1555124952,"is_pvip":false,"replies":[{"id":"30765","content":"ğŸ‘<br>","user_name":"ä½œè€…å›å¤","comment_id":85564,"uid":"1269969","ip_address":"","utype":1,"ctime":1555166902,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"61684667096","product_id":100023901,"comment_content":"jdk1.8ä»¥å‰çš„HashMapå¹¶å‘æ‰©å®¹çš„æ—¶å€™ä¼šå¯¼è‡´é™·å…¥æ­»å¾ªç¯ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´cpué£™å‡ï¼Œé‚£ä¹ˆéªŒè¯çŒœæƒ³æˆ‘è§‰å¾—æœ‰2ç§æ–¹æ³•ï¼š<br>1.çº¿ä¸ŠæŸ¥æ•…éšœï¼Œç”¨dumpåˆ†æçº¿ç¨‹ã€‚<br>2.ç”¨1.8ä»¥å‰çš„jdkåœ¨æœ¬åœ°æ¨¡æ‹Ÿã€‚<br>","like_count":14,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446716,"discussion_content":"ğŸ‘\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555166902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":97409,"user_name":"å¼ ç”³å‚²","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1558665783,"is_pvip":true,"replies":[{"id":"34881","content":"å¤åˆ¶çš„æ—¶å€™å…è®¸è¯»ï¼Œå¯èƒ½è¯»åˆ°æ•°ç»„é‡Œæ—§çš„å…ƒç´ ã€‚æ•°ç»„çš„å¼•ç”¨æ˜¯ä¸€è‡´çš„ï¼Œä¸€æ—¦è®¾ç½®å°±èƒ½è¯»åˆ°ï¼Œä½†æ˜¯é‡Œé¢çš„å…ƒç´ ä¼šæœ‰ä¸ä¸€è‡´çš„æƒ…å†µ","user_name":"ä½œè€…å›å¤","comment_id":97409,"uid":"1269969","ip_address":"","utype":1,"ctime":1558700075,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":3,"race_medal":2,"score":"44508338743","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜ï¼š<br>æ–‡ç« é‡Œé¢è¯´ï¼Œä½¿ç”¨CopyOnWriteArrayListæ—¶ï¼Œéœ€è¦èƒ½å¤Ÿå®¹å¿è¯»å†™çš„çŸ­æš‚ä¸ä¸€è‡´ï¼Œä½†æ˜¯æˆ‘ç†è§£CopyOnWriteArrayListåº”è¯¥ä¸ä¼šå‡ºç°ä¸ä¸€è‡´é—®é¢˜å§ã€‚å› ä¸ºåº•å±‚çš„arrayæ˜¯ç”¨volatileä¿®é¥°çš„ï¼Œæ ¹æ®happens-beforeåŸåˆ™ï¼Œå¯¹volatileå˜é‡çš„å†™happens-beforeäºå¯¹å˜é‡çš„è¯»ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå­˜åœ¨å¹¶å‘è¯»å†™çš„æƒ…å†µï¼Œå†™çº¿ç¨‹çš„setArray()ä¸€å®šæ˜¯å¯¹è¯»çº¿ç¨‹çš„getArray()å¯è§çš„ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºè¯»åˆ°çš„å§‹ç»ˆéƒ½æ˜¯æœ€æ–°çš„æ•°æ®ã€‚<br>ä¸çŸ¥é“æˆ‘çš„ç†è§£æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿ<br>","like_count":10,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":451272,"discussion_content":"å¤åˆ¶çš„æ—¶å€™å…è®¸è¯»ï¼Œå¯èƒ½è¯»åˆ°æ•°ç»„é‡Œæ—§çš„å…ƒç´ ã€‚æ•°ç»„çš„å¼•ç”¨æ˜¯ä¸€è‡´çš„ï¼Œä¸€æ—¦è®¾ç½®å°±èƒ½è¯»åˆ°ï¼Œä½†æ˜¯é‡Œé¢çš„å…ƒç´ ä¼šæœ‰ä¸ä¸€è‡´çš„æƒ…å†µ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558700075,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1302876,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e1/5c/b32f00b1.jpg","nickname":"Richard","note":"","ucode":"C16AE7CE877DCA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7836,"discussion_content":"çœ‹äº†ä¸‹ä»£ç ï¼Œè®¾ç½®æˆåŠŸåä¼šé©¬ä¸Šè¯»åˆ°æ•°ç»„å˜åŒ–ï¼Œå¦‚æœåœ¨è¿˜æ²¡è®¾ç½®æˆåŠŸçš„æ—¶å€™å»è¯»ï¼Œå³ä½¿è¯»åˆ°çš„æ˜¯æ—§çš„æ•°ç»„ä¹Ÿä¸èƒ½ç®—æ˜¯ä¸ä¸€è‡´å§ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567688081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":2963434,"avatar":"","nickname":"Geek_94fa0e","note":"","ucode":"15BC7D4E130E80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1302876,"avatar":"https://static001.geekbang.org/account/avatar/00/13/e1/5c/b32f00b1.jpg","nickname":"Richard","note":"","ucode":"C16AE7CE877DCA","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":561241,"discussion_content":"æœ‰é“ç†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649583749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":7836,"ip_address":""},"score":561241,"extra":""}]}]},{"had_liked":false,"id":151531,"user_name":"Randy","can_delete":false,"product_type":"c1","uid":1125259,"ip_address":"","ucode":"7BF52ADBFD4F5D","user_header":"https://static001.geekbang.org/account/avatar/00/11/2b/8b/dd02189a.jpg","comment_is_top":false,"comment_ctime":1573736817,"is_pvip":false,"replies":[{"id":"59690","content":"åˆšå¥½æœ‰ç¯‡å…¬ä¼—å·è®²åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå†™çš„éå¸¸å¥½ã€‚https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;yxn47A4UcsrORoDJyREEuQ","user_name":"ä½œè€…å›å¤","comment_id":151531,"uid":"1269969","ip_address":"","utype":1,"ctime":1574729953,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":3,"race_medal":0,"score":"40228442481","product_id":100023901,"comment_content":"ç•™è¨€ä¸­å¾ˆå¤šéƒ½æåˆ°åœ¨JDK1.8ä»¥å‰ä¼šå­˜åœ¨HashMapçš„å¹¶å‘æƒ…å†µä¸‹resizeå¯èƒ½å¯¼è‡´æ­»å¾ªç¯é—®é¢˜ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜åœ¨1.8ä¸­ä¹Ÿå­˜åœ¨ï¼Œå¹¶æ²¡æœ‰å› ä¸ºåœ¨1.8ä¸­å¼•å…¥äº†çº¢é»‘æ ‘è€Œè§„é¿æ‰ã€‚å› ä¸ºå¯¼è‡´é—®é¢˜çš„åŸå› æ˜¯resizeæ–¹æ³•è°ƒç”¨äº†transferï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯å‘ç”Ÿåœ¨é“¾è¡¨çš„é‡ç»„è¿‡ç¨‹ï¼Œè·Ÿçº¢é»‘æ ‘æ²¡æœ‰å…³ç³»ã€‚æ‰€ä»¥JDK1.8ä¸­è¿˜æ˜¯å­˜åœ¨è¿™ä¸ªé—®é¢˜<br>è¯·å®ä»¤è€å¸ˆæŒ‡æ­£","like_count":9,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474517,"discussion_content":"åˆšå¥½æœ‰ç¯‡å…¬ä¼—å·è®²åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå†™çš„éå¸¸å¥½ã€‚https://mp.weixin.qq.com/s/yxn47A4UcsrORoDJyREEuQ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574729953,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2963434,"avatar":"","nickname":"Geek_94fa0e","note":"","ucode":"15BC7D4E130E80","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":561246,"discussion_content":"è¿™ç¯‡æ–‡ç« å†™çš„å¾ˆå¥½!","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649585064,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":474517,"ip_address":""},"score":561246,"extra":""}]},{"author":{"id":1658706,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJeQVzYNLVuOv8IuxydsXuVXEUoqLmN0vpkiceZuU26KPOt05xuxCSnsbkgBu4q9qmibRfTOvCiaPGJg/132","nickname":"Qualifor","note":"","ucode":"8F42453286719C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":139910,"discussion_content":"æ‰€ä»¥æ ¹æ®è€å¸ˆæ¨èçš„è¿™ä¸ªæ–‡ç« æ¥çœ‹ï¼Œä¸»è¦æ˜¯java8æŠŠé“¾è¡¨çš„å¤´æ’æ³•ç»™æ”¹æˆå°¾æ’æ³•äº†å§ï¼Œè·Ÿçº¢é»‘æ ‘å¹¶æ²¡æœ‰å…³ç³»ï¼Œè¯·è€å¸ˆæŒ‡æ­£","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1579329191,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87916,"user_name":"candy","can_delete":false,"product_type":"c1","uid":1449024,"ip_address":"","ucode":"9CA127B28F1058","user_header":"","comment_is_top":false,"comment_ctime":1555752563,"is_pvip":false,"replies":[{"id":"31625","content":"çœ‹è¿™å‡ è¡Œçœ‹ä¸å‡ºæ¥ï¼Œä¸€èˆ¬é—®é¢˜éƒ½èƒ½é€šè¿‡çº¿ç¨‹æ ˆå‘ç°é—®é¢˜ã€‚æˆ‘é‡åˆ°è¿‡ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å…±ç”¨ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œç”Ÿäº§è€…æŠŠçº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹ç”¨å…‰äº†ï¼Œå¯¼è‡´æ¶ˆè´¹ä¸äº†ã€‚è¿™ç§æƒ…å†µä¸‹é€šè¿‡çº¿ç¨‹æ± ä¸å¤ªå®¹æ˜“çœ‹ï¼Œéœ€è¦å»è®¡æ•°ã€‚ä¸çŸ¥é“ä½ çš„é—®é¢˜æ˜¯ä¸æ˜¯è¿™ä¸ªã€‚æ‰€æœ‰çº¿ç¨‹éƒ½ç­‰å¾…ï¼Œè¿˜æ²¡æœ‰æ­»é”ï¼Œå°±æŸ¥æŸ¥ä¸ºä»€ä¹ˆä¼šç­‰å¾…å§ã€‚","user_name":"ä½œè€…å›å¤","comment_id":87916,"uid":"1269969","ip_address":"","utype":1,"ctime":1555769747,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":6,"race_medal":0,"score":"40210458227","product_id":100023901,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæœ€è¿‘ä¸¤å¤©ï¼Œæˆ‘çº¿ä¸Šè·‘çš„è®¡è´¹è¿›ç¨‹å‡æ­»äº†(ä»1æœˆ11æ—¥å¼€å§‹è·‘çš„ï¼Œ4æœˆ10æ—¥ç¬¬ä¸€æ¬¡å‡ºç°å‡æ­»ï¼‰ï¼Œ ExecutorService services = Executors.newFixedThreadPool(taskThreads);   CountDownLatch cdt = new CountDownLatch(size);<br>                        &#47;&#47;ä¸€ä¸ªä¸ªçš„å¤„ç†æ•°æ®<br>                        for (int j = 0; j &lt; size; j++) {<br>                            CFTask task = new CFTask(table, channelIds.get(j), batchId, cdt);<br>                            services.submit(task);<br>                        }<br>                        cdt.await(); è¿™ä¸ªæœ‰ä»€ä¹ˆé”™è¯¯å—ï¼Ÿè®©å¤šä¸ªçº¿ç¨‹å¤„ç†æ­¥è°ƒä¸€è‡´<br><br>çº¿ä¸Šjstack pid æŸ¥çœ‹ éƒ¨åˆ†æ—¥å¿—ï¼Œå¦‚ä¸‹ï¼šå¥½åƒçº¿ç¨‹æ± æ‰€æœ‰çº¿ç¨‹éƒ½åœ¨ç­‰å¾…æ‰§è¡Œï¼Œæ„Ÿè§‰ä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢æ“ä½œè·‘æ­»äº†ï¼Œå¾ˆå¥‡æ€ª<br>","like_count":9,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447646,"discussion_content":"çœ‹è¿™å‡ è¡Œçœ‹ä¸å‡ºæ¥ï¼Œä¸€èˆ¬é—®é¢˜éƒ½èƒ½é€šè¿‡çº¿ç¨‹æ ˆå‘ç°é—®é¢˜ã€‚æˆ‘é‡åˆ°è¿‡ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å…±ç”¨ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œç”Ÿäº§è€…æŠŠçº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹ç”¨å…‰äº†ï¼Œå¯¼è‡´æ¶ˆè´¹ä¸äº†ã€‚è¿™ç§æƒ…å†µä¸‹é€šè¿‡çº¿ç¨‹æ± ä¸å¤ªå®¹æ˜“çœ‹ï¼Œéœ€è¦å»è®¡æ•°ã€‚ä¸çŸ¥é“ä½ çš„é—®é¢˜æ˜¯ä¸æ˜¯è¿™ä¸ªã€‚æ‰€æœ‰çº¿ç¨‹éƒ½ç­‰å¾…ï¼Œè¿˜æ²¡æœ‰æ­»é”ï¼Œå°±æŸ¥æŸ¥ä¸ºä»€ä¹ˆä¼šç­‰å¾…å§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555769747,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2697700,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LFJZ4x47rvShGhsePLIxc8EzdlBxAmVAIjJ2FQZ4NEpo8E4JCZQEOb2NIfOuiaQLL6Otkt7W3Rmu6Tv3AkgYdRA/132","nickname":"é”®ç›˜ä¸Šçš„é­”æœ¯","note":"","ucode":"A731D721FB8D3A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":562627,"discussion_content":"æ¯ä¸ªçº¿ç¨‹é‡Œæœ‰è°ƒç”¨cdt.countDown()å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1649858135,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1441569,"avatar":"https://static001.geekbang.org/account/avatar/00/15/ff/21/8815d2e5.jpg","nickname":"äº®å­","note":"","ucode":"DF37D5E0714D02","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":544038,"discussion_content":"CFTaskçš„æ‰§è¡Œæ–¹æ³•åŠ ä¸‹try catchï¼ŒåŒæ—¶cdt.await() åŠ ä¸ªInterruptedExceptionçš„å¼‚å¸¸æ•è·","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641384176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1461801,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4e/29/4b0d7a05.jpg","nickname":"ren","note":"","ucode":"A8787FDFD56956","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370668,"discussion_content":"æ‰€ä»¥ æœ€åæ‰¾åˆ°é—®é¢˜äº†ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1619504187,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1282819,"avatar":"","nickname":"å°¼ç³¯ç±³","note":"","ucode":"04D1B63F3801AE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305130,"discussion_content":"å‘çº¿ç¨‹æ± æäº¤çš„CFTaskå®ä¾‹ï¼Œå…¶æ‰§è¡Œrun()ï¼Œæ˜¯ä¸æ˜¯æœ‰å¼‚å¸¸è¢«æŠ›å‡ºï¼Œsubmitæ–¹å¼ä¼šæŠŠå¼‚å¸¸åƒæ‰ï¼Œä¸”çº¿ç¨‹æ± æ•´ä¸ªä¼šè¢«æŒ‚èµ·å‘¢ã€‚å¯ä»¥å…ˆæ•´ä¸ªä»£ç å—try-catchä¸‹ï¼Œçœ‹ä¸‹æ˜¯å¦å¼‚å¸¸äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599791850,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1241185,"avatar":"https://static001.geekbang.org/account/avatar/00/12/f0/61/fedca2e9.jpg","nickname":"(Kelen)","note":"","ucode":"C8578DB62E3B2D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":207897,"discussion_content":"æœ€åé—®é¢˜åŸå› æ˜¯å•¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584523000,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85563,"user_name":"å—å±±","can_delete":false,"product_type":"c1","uid":1119593,"ip_address":"","ucode":"94656FE4A6C378","user_header":"https://static001.geekbang.org/account/avatar/00/11/15/69/187b9968.jpg","comment_is_top":false,"comment_ctime":1555124820,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"35914863188","product_id":100023901,"comment_content":"é€‰å¯¹å®¹å™¨çš„å‰æè¿˜æ˜¯è¦å¯¹åŸç†ï¼Œç‰¹æ€§ï¼Œä½¿ç”¨åœºæ™¯ï¼Œä¼˜ç¼ºç‚¹ï¼Œå‘ï¼Œç”šè‡³åº•å±‚å®ç°éƒ½äº†å¦‚æŒ‡æŒæ‰èƒ½è¯´é€‰å¯¹å®¹å™¨ï¼Œè¦ä¸ç„¶æ›´å¤šçš„ä¹Ÿæ˜¯è’™å¯¹å®¹å™¨","like_count":8},{"had_liked":false,"id":88549,"user_name":"æˆ‘åŠä½ å–„è‰¯","can_delete":false,"product_type":"c1","uid":1447802,"ip_address":"","ucode":"99ACEDE16B19D3","user_header":"https://static001.geekbang.org/account/avatar/00/16/17/7a/ab9bb6df.jpg","comment_is_top":false,"comment_ctime":1555940226,"is_pvip":false,"replies":[{"id":"31764","content":"CopyOnWriteArrayListå†™æ“ä½œæ˜¯äº’æ–¥çš„ã€‚","user_name":"ä½œè€…å›å¤","comment_id":88549,"uid":"1269969","ip_address":"","utype":1,"ctime":1555946169,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":2,"race_medal":0,"score":"31620711298","product_id":100023901,"comment_content":"è€å¸ˆï¼Œé’ˆå¯¹CopyOnWriteArrayList<br>1.å¦‚æœæ­£åœ¨éå†çš„æ—¶å€™ï¼ŒåŒæ—¶æœ‰ä¸¤ä¸ªå†™æ“ä½œæ‰§è¡Œï¼Œæ˜¯ä¼šé¡ºåºåœ¨ä¸€ä¸ªæ–°æ•°ç»„ä¸Šæ‰§è¡Œå†™æ“ä½œï¼Œè¿˜æ˜¯æœ‰ä¸¤ä¸ªå†™æ“ä½œåˆ†åˆ«è¿›è¡Œï¼Ÿå¦‚æœæ˜¯ä¸¤ä¸ªæ–°æ•°ç»„çš„è¯ï¼Œé‚£ä¹ˆarrayåˆå°†æŒ‡å‘å“ªä¸€ä¸ªæ–°æ•°ç»„ï¼Ÿ<br>2.å¦‚æœåœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå†™æ“ä½œå·²ç»å®Œæˆäº†ï¼Œä½†æ˜¯éå†å°šæœªç»“æŸï¼Œé‚£ä¹ˆæ˜¯arrayæ˜¯ç›´æ¥æŒ‡å‘æ–°æ•°ç»„ï¼Œå¹¶ç»§ç»­åœ¨æ–°æ•°ç»„ä¸Šæ‰§è¡Œæœªå®Œæˆçš„éå†ï¼Œè¿˜æ˜¯ç­‰å¾…éå†å®Œæˆäº†ï¼Œå†ä¿®æ”¹arrayçš„æŒ‡å‘å‘¢ï¼Ÿå¦‚æœåœ¨éå†å®Œä¹‹å‰å°±ä¿®æ”¹æŒ‡å‘ï¼Œé‚£ä¹ˆå°±ä¼šå­˜åœ¨é—®é¢˜äº†å•Šï¼","like_count":7,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447825,"discussion_content":"CopyOnWriteArrayListå†™æ“ä½œæ˜¯äº’æ–¥çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555946169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1585829,"avatar":"https://static001.geekbang.org/account/avatar/00/18/32/a5/9868cd56.jpg","nickname":"southday","note":"","ucode":"4A8FB63D35F6E1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":5037,"discussion_content":"ç¬¬1ä¸ªé—®é¢˜ï¼Œè€å¸ˆå·²ç»å›ç­”äº†ã€‚æˆ‘æ¥è¯´ä¸‹ç¬¬2ä¸ªé—®é¢˜å§ï¼Œæˆ‘ç‰¹æ„çœ‹äº†ä¸‹ CopyOnWriteArrayList æºç ï¼ˆJDK 11ï¼‰ï¼ŒIterator() è¿”å›çš„æ˜¯ COWIterator å†…éƒ¨ç±»å®ä¾‹ï¼Œç®€åŒ–ä»£ç å¦‚ä¸‹ï¼š\n```java\nstatic final class COWIterator<E> implements ListIterator<E> {\n    /** Snapshot of the array */\n    private final Object[] snapshot;\n    /** Index of element to be returned by subsequent call to next.  */\n    private int cursor;\n\n    COWIterator(Object[] es, int initialCursor) {\n        cursor = initialCursor;\n        snapshot = es;\n    }\n}\n```\nå¯ä»¥çœ‹åˆ°ï¼Œè¿­ä»£å™¨ä¸­è®¿é—®çš„æ˜¯ array çš„å¿«ç…§ï¼Œsnapshot æœ€åˆå’Œ array æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªç©ºé—´ï¼ˆæ—§æ•°æ®ï¼‰ï¼Œå†™çº¿ç¨‹æ›´æ–°äº† arrayæŒ‡é’ˆï¼Œä½†ä¸ä¼šæ›´æ–° snapshot çš„æŒ‡å‘ï¼Œå¹¶ä¸” snapshot æ˜¯è¢« final ä¿®é¥°çš„ï¼Œåœ¨è®¿é—®å¿«ç…§è¿‡ç¨‹ä¸­ä¹Ÿä¸ä¼šè¢«æ›´æ”¹ï¼›","likes_number":8,"is_delete":false,"is_hidden":false,"ctime":1565886205,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87525,"user_name":"æœˆæœˆæœˆæœˆ","can_delete":false,"product_type":"c1","uid":1330605,"ip_address":"","ucode":"3CD83BD83C6D3F","user_header":"https://static001.geekbang.org/account/avatar/00/14/4d/ad/5e4e94e4.jpg","comment_is_top":false,"comment_ctime":1555632791,"is_pvip":false,"replies":[{"id":"31546","content":"å¹¶å‘å®¹å™¨çš„éå†æ˜¯çº¿ç¨‹å®‰å…¨çš„<br>","user_name":"ä½œè€…å›å¤","comment_id":87525,"uid":"1269969","ip_address":"","utype":1,"ctime":1555675487,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"27325436567","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸‹ï¼Œæ–‡ç« é‡Œæåˆ°å®¹å™¨åœ¨éå†æ—¶è¦æ³¨æ„åŠ é”ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå¯¹äºéçº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŒ…è£…è®©å®ƒå˜æˆçº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼Œç„¶ååœ¨éå†çš„æ—¶å€™é”ä½é›†åˆå¯¹è±¡ã€‚ä½†æ˜¯å¯¹äºå¹¶å‘å®¹å™¨æ¥è¯´ï¼Œåœ¨éå†çš„æ—¶å€™è¦æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨å‘¢ï¼Ÿå¦‚æœè¿˜æ˜¯é”ä½å®¹å™¨å¯¹è±¡ï¼Œä½†æ˜¯å¯¹äºä¸æ˜¯ä½¿ç”¨synchronizedå»å®ç°çš„å¹¶å‘å®¹å™¨ï¼Œé”å¯¹è±¡ä¸å°±ä¸ä¸€æ ·äº†å—ï¼Ÿé‚£è¿™æ ·è¯¥æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨å‘¢ï¼Ÿ","like_count":6,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447494,"discussion_content":"å¹¶å‘å®¹å™¨çš„éå†æ˜¯çº¿ç¨‹å®‰å…¨çš„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555675487,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86807,"user_name":"Sunny_Lu","can_delete":false,"product_type":"c1","uid":1453000,"ip_address":"","ucode":"4327DE41D7DB28","user_header":"https://static001.geekbang.org/account/avatar/00/16/2b/c8/61eeae65.jpg","comment_is_top":false,"comment_ctime":1555463289,"is_pvip":false,"replies":[{"id":"31282","content":"ğŸ‘ï¼Œå¤šä¸ªæ•°ç»„<br>","user_name":"ä½œè€…å›å¤","comment_id":86807,"uid":"1269969","ip_address":"","utype":1,"ctime":1555499574,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"27325267065","product_id":100023901,"comment_content":"æ„Ÿè§‰copyonwriteçš„ä½¿ç”¨é™åˆ¶å¾ˆå¤§ï¼Œé¦–å…ˆè¦å®¹å¿æš‚æ—¶çš„ä¸ä¸€è‡´ï¼Œæ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå†™ä¸€æ—¦å¤šä¸€ç‚¹ ä¸æ–­çš„å¤åˆ¶ä¹Ÿä¼šæœ‰æ€§èƒ½ä¸Šçš„é—®é¢˜å§ï¼Ÿè¿˜æ˜¯è¯´å¤šæ¬¡çš„å†™ç”¨çš„æ˜¯åŒä¸€ä¸ªæ•°ç»„å‘¢","like_count":6,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447184,"discussion_content":"ğŸ‘ï¼Œå¤šä¸ªæ•°ç»„\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555499574,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85658,"user_name":"æ›¾è½¼éºŸ","can_delete":false,"product_type":"c1","uid":1451391,"ip_address":"","ucode":"D418371AC11270","user_header":"https://static001.geekbang.org/account/avatar/00/16/25/7f/473d5a77.jpg","comment_is_top":false,"comment_ctime":1555164910,"is_pvip":false,"replies":[{"id":"30791","content":"1.8ç‰ˆæœ¬ä¹‹åConcurrentHashMapçš„å®ç°æ”¹äº†","user_name":"ä½œè€…å›å¤","comment_id":85658,"uid":"1269969","ip_address":"","utype":1,"ctime":1555169397,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"23030001390","product_id":100023901,"comment_content":"å¸®è€å¸ˆè¡¥å……HashMapï¼šå½“æ•°æ®çš„HashCode åˆ†å¸ƒçŠ¶æ€è‰¯å¥½ï¼Œå¹¶ä¸”å†²çªè¾ƒå°‘çš„æ—¶å€™å¯¹ConcurrentHashMapï¼ˆæŸ¥è¯¢ï¼Œvalueä¿®æ”¹ï¼Œä¸åŒ…æ‹¬æ’å…¥ï¼‰ï¼Œæ€§èƒ½ä¸ŠåŸºæœ¬ä¸Šæ˜¯å’ŒHashMapä¸€è‡´çš„ï¼Œä¸»è¦å–å†³äºåˆ†æ®µé”çš„æ’æ€æƒ³ã€‚ä½†æ˜¯ç”±äºæ’å…¥ä½¿ç”¨çš„æ˜¯CASçš„æ–¹å¼ï¼Œæ‰€ä»¥å¦‚æœå¯¹æ•°æ®è¿½åŠ ä¸å¤šï¼ˆæ’å…¥ï¼‰çš„æƒ…å†µä¸‹ï¼Œå»ºè®®å¯ä»¥è€ƒè™‘å¤šä½¿ç”¨ConcurrentHashMapé¿å…ç”±äºä¿®æ”¹æ•°æ®äº§ç”Ÿä¸€äº›æ„æƒ³ä¸åˆ°çš„å¹¶å‘é—®é¢˜ï¼Œå½“ç„¶å†…éƒ¨ä¹Ÿæœ‰ä¿æŠ¤æœºåˆ¶é€šè¿‡æŠ›å‡ºConcurrentModificationExceptionï¼ˆå¿«é€Ÿå¤±è´¥æœºåˆ¶ï¼‰æ¥è®©æˆ‘ä»¬åŠæ—¶å‘ç°å‡ºç°å¹¶å‘æ•°æ®å¼‚å¸¸çš„æƒ…å†µï¼Œä¸çŸ¥é“æˆ‘è¡¥å……çš„æ˜¯å¦æ­£ç¡®ã€‚","like_count":5,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446754,"discussion_content":"1.8ç‰ˆæœ¬ä¹‹åConcurrentHashMapçš„å®ç°æ”¹äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555169397,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":133884,"user_name":"Sharry","can_delete":false,"product_type":"c1","uid":1239293,"ip_address":"","ucode":"045DDB864659F6","user_header":"https://static001.geekbang.org/account/avatar/00/12/e8/fd/035f4c94.jpg","comment_is_top":false,"comment_ctime":1568690654,"is_pvip":false,"replies":[{"id":"51386","content":"ğŸ‘","user_name":"ä½œè€…å›å¤","comment_id":133884,"uid":"1269969","ip_address":"","utype":1,"ctime":1568717959,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"18748559838","product_id":100023901,"comment_content":"åœ¨ JDK7  ä¸Š HashMap æ•°æ®è¿ç§»æ—¶, ä¼šå¯¼è‡´ç»“ç‚¹ç¿»è½¬, å¤šçº¿ç¨‹æ“ä½œæ—¶, å¯èƒ½ä¼šå¼•å‘æ­»å¾ªç¯<br>, åœ¨ JDK8 ä¸Šä¿®æ”¹äº†æ•°æ®è¿ç§»çš„ç®—æ³•, ä¿è¯æ•°æ®çš„é¡ºä¾¿, ä¸ä¼šå‡ºç°æ­»å¾ªç¯é—®é¢˜","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467543,"discussion_content":"ğŸ‘","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568717959,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":132582,"user_name":"æé‘«ç£Š","can_delete":false,"product_type":"c1","uid":1101615,"ip_address":"","ucode":"D06517CFCEEE00","user_header":"https://static001.geekbang.org/account/avatar/00/10/cf/2f/4f89f22a.jpg","comment_is_top":false,"comment_ctime":1568168355,"is_pvip":false,"replies":[{"id":"51083","content":"è¯»æ— é”ï¼Œå†™è¦çœ‹å…·ä½“å®ç°","user_name":"ä½œè€…å›å¤","comment_id":132582,"uid":"1269969","ip_address":"","utype":1,"ctime":1568503656,"user_name_real":"ç‹å®ä»¤"}],"discussion_count":1,"race_medal":0,"score":"18748037539","product_id":100023901,"comment_content":"æ—¢ç„¶ CopyOnWrite çš„å†™æ“ä½œæ˜¯äº’æ–¥çš„ï¼Œé‚£è€å¸ˆä¸ºä»€ä¹ˆåœ¨å­¦ä¹ æ”»ç•¥ä¸­æŠŠ CopyOnWrite å½’ä¸ºæ— é”çš„æ–¹æ¡ˆï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467021,"discussion_content":"è¯»æ— é”ï¼Œå†™è¦çœ‹å…·ä½“å®ç°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1568503656,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85522,"user_name":"å‘¨æ²»æ…§","can_delete":false,"product_type":"c1","uid":1335293,"ip_address":"","ucode":"7D56C4E66BEE17","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKR3ibELhjgVicCNShZCBwvaDxibnzibggG4wUzVkS2mkDxUBZyIs87nDEdJ7PiahJBVoZcuhQ84RxAziag/132","comment_is_top":false,"comment_ctime":1555110688,"is_pvip":false,"replies":[{"id":"30657","content":"åŸå› æ˜¯å¯¹çš„ï¼Œcpué£™å‡ä¸é™çš„é—®é¢˜éƒ½å¯ä»¥ç”¨dumpçº¿ç¨‹æ ˆæ¥åˆ†æ<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555117082,"ip_address":"","comment_id":85522,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14440012576","product_id":100023901,"comment_content":"hashmapåœ¨putçš„æ—¶å€™æ‰©å®¹å¯¼è‡´é“¾è¡¨çš„æ­»ç¯å¯¼è‡´ï¼Œå¯ä»¥é€šè¿‡éå†å»entriesä¸­entryçš„nextä¸€ç›´ä¸ä¸ºç©ºæ¥åˆ¤æ–­","like_count":3,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446696,"discussion_content":"åŸå› æ˜¯å¯¹çš„ï¼Œcpué£™å‡ä¸é™çš„é—®é¢˜éƒ½å¯ä»¥ç”¨dumpçº¿ç¨‹æ ˆæ¥åˆ†æ\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555117082,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":91803,"user_name":"Geek_c991e0","can_delete":false,"product_type":"c1","uid":1206623,"ip_address":"","ucode":"5B6391E2D69D50","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epLLXBLBLgticobxvBYRezd304Y66Q8ibYCl7mG9dvTHGrx9obRcn7ZmJBcib3ibsQPIX3xIbNYiaAUrOA/132","comment_is_top":false,"comment_ctime":1557111835,"is_pvip":false,"replies":[{"id":"34455","content":"åªå…è®¸ä¸€ä¸ªä¸€ä¸ªå†™ï¼Œå†™æ“ä½œæ˜¯æœ‰é”çš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1558362275,"ip_address":"","comment_id":91803,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10147046427","product_id":100023901,"comment_content":"è€å¸ˆå¥½ï¼Œcopyonwriteå¦‚æœå¹¶å‘å†™å…¥å¾ˆå¤šï¼Œå¤åˆ¶å¤šä¸ªarrayå†™å…¥ï¼Œé‚£é‡æ–°æŒ‡å‘çš„æ—¶å€™æ€ä¹ˆæŠŠå¤šä¸ªåˆå¹¶é‚£ï¼Œè¿˜æ˜¯è¯´å†™çš„æ—¶å€™åªå…è®¸ä¸€ä¸ªä¸€ä¸ªçš„å†™","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449035,"discussion_content":"åªå…è®¸ä¸€ä¸ªä¸€ä¸ªå†™ï¼Œå†™æ“ä½œæ˜¯æœ‰é”çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558362275,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":90620,"user_name":"å½­é”","can_delete":false,"product_type":"c1","uid":1179669,"ip_address":"","ucode":"F2CB53DE42026D","user_header":"https://static001.geekbang.org/account/avatar/00/12/00/15/6e399ec7.jpg","comment_is_top":false,"comment_ctime":1556589631,"is_pvip":false,"replies":[{"id":"32461","content":"å†™ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ï¼Œè¿˜è¦çœ‹æ•°ç»„çš„å¤§å°ã€‚å¦‚æœæ•°ç»„å°ï¼Œå¯ä»¥åªçœ‹ä¸€è‡´æ€§çš„è¦æ±‚ã€‚å¦‚æœæ•°ç»„å¤§ï¼Œè¿˜è¦çœ‹å†™æ“ä½œæ˜¯ä¸æ˜¯å¤š","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1556607210,"ip_address":"","comment_id":90620,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10146524223","product_id":100023901,"comment_content":"å¾ˆå¤šåœ°æ–¹éƒ½è¯´ï¼ŒCopyOnWriteAyyayListåªé€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚ä½†å®‰å…¨å¹¶å‘å®¹å™¨ï¼Œåªæœ‰CopyOnWriteAyyayListå•Šã€‚ä¸é€‚ç”¨åˆèƒ½æ€ä¹ˆæ ·ï¼Ÿç”¨Vectorï¼Œæ€§èƒ½æ¯”CopyOnWriteAyyayListå·®åˆ°ä¸çŸ¥é“å“ªé‡Œå»äº†ã€‚<br>å› æ­¤ï¼Œæˆ‘è§‰å¾—ä¸æ˜¯è¦æ¢ä¸€ç§è¯´æ³•ï¼Œåœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚æœæ¥å—ä¸äº†â€œæœ€ç»ˆä¸€è‡´â€ï¼Œæ‰è€ƒè™‘å…¶ä»–çš„å¹¶å‘å®¹å™¨ã€‚","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448597,"discussion_content":"å†™ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ï¼Œè¿˜è¦çœ‹æ•°ç»„çš„å¤§å°ã€‚å¦‚æœæ•°ç»„å°ï¼Œå¯ä»¥åªçœ‹ä¸€è‡´æ€§çš„è¦æ±‚ã€‚å¦‚æœæ•°ç»„å¤§ï¼Œè¿˜è¦çœ‹å†™æ“ä½œæ˜¯ä¸æ˜¯å¤š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556607210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85592,"user_name":"ç‹¬ç«‹è‡ªä¸»","can_delete":false,"product_type":"c1","uid":1371039,"ip_address":"","ucode":"11213FDC994385","user_header":"https://static001.geekbang.org/account/avatar/00/14/eb/9f/125ed81c.jpg","comment_is_top":false,"comment_ctime":1555136013,"is_pvip":false,"replies":[{"id":"30758","content":"ä¸¤ä¸ªåŸå­æ“ä½œç›´æ¥ï¼Œå¯èƒ½å‘ç”Ÿå¾ˆå¤šäº‹æƒ…ã€‚ä½ å¯ä»¥å‚è€ƒã€Š07 | å®‰å…¨æ€§ã€æ´»è·ƒæ€§ä»¥åŠæ€§èƒ½é—®é¢˜ã€‹é‡Œé¢çš„set(get()+1)é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555153101,"ip_address":"","comment_id":85592,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10145070605","product_id":100023901,"comment_content":"è€å¸ˆç»„åˆæ“ä½œä¸ºä»€ä¹ˆä¸èƒ½ä¿è¯åŸå­æ€§ã€‚èƒ½ä¸¾ä¸ªä¾‹å­å—è¿™é‡Œæ²¡äº†è§£æ¸…æ¥šã€‚è°¢è°¢","like_count":2,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446725,"discussion_content":"ä¸¤ä¸ªåŸå­æ“ä½œç›´æ¥ï¼Œå¯èƒ½å‘ç”Ÿå¾ˆå¤šäº‹æƒ…ã€‚ä½ å¯ä»¥å‚è€ƒã€Š07 | å®‰å…¨æ€§ã€æ´»è·ƒæ€§ä»¥åŠæ€§èƒ½é—®é¢˜ã€‹é‡Œé¢çš„set(get()+1)é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555153101,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85543,"user_name":"crazypokerk","can_delete":false,"product_type":"c1","uid":1158383,"ip_address":"","ucode":"9AAD5D9726E503","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/ef/494f56c3.jpg","comment_is_top":false,"comment_ctime":1555121665,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10145056257","product_id":100023901,"comment_content":"æ»¡æ»¡å¹²è´§ï¼Œæ¡ç†ç«‹é©¬æ¸…æ™°äº†ï¼","like_count":2},{"had_liked":false,"id":268649,"user_name":"é˜¿å£°","can_delete":false,"product_type":"c1","uid":1148174,"ip_address":"","ucode":"EEA5F2E9D4FC9C","user_header":"https://static001.geekbang.org/account/avatar/00/11/85/0e/e6640576.jpg","comment_is_top":false,"comment_ctime":1608282295,"is_pvip":false,"replies":[{"id":"97501","content":"åœ¨ç”¨æˆ·å±‚é¢è¿™æ ·ç†è§£å¾ˆç›´è§‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1608358626,"ip_address":"","comment_id":268649,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5903249591","product_id":100023901,"comment_content":"å¾ˆå¤šè¯„è®ºå¯¹CopyOnWriteArrayListå®¹å™¨åœ¨å¹¶å‘æƒ…å†µä¸‹çš„çš„å†™æ“ä½œæœ‰ç–‘é—®ï¼Œæ‹…å¿ƒå­˜åœ¨æ•°æ®è¦†ç›–ï¼Œæˆ‘è¯´ä¸‹æˆ‘çš„ç†è§£ï¼š<br><br>1ã€å¹¶å‘è¯»ï¼Œè¯»çš„æ˜¯å¿«ç…§ï¼Œä¸ä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚<br>2ã€å¹¶å‘è¿­ä»£å™¨éå†ï¼Œç”Ÿæˆçš„è¿­ä»£å™¨å†…éƒ¨ä½¿ç”¨çš„ä¹Ÿæ˜¯å¿«ç…§ï¼Œä¸ä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚<br>3ã€å¹¶å‘å†™ï¼Œå†…éƒ¨ä½¿ç”¨ReentrantLock.lockåšçš„å¹¶å‘æ§åˆ¶ï¼Œåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºè¿›è¡Œå†™å¤åˆ¶æ“ä½œï¼›å…¶ä»–çº¿ç¨‹è¢«lockä½ï¼ŒåŒæ­¥æ’é˜Ÿå¤„ç†ã€‚<br>æ‰€ä»¥å¹¶å‘å†™æ“ä½œæ˜¯ä¸ä¼šå‡ºç°è¦†ç›–çš„æƒ…å†µçš„ã€‚<br><br>PSï¼šè¿™ä¸ªè·Ÿmysqlçš„å¿«ç…§è¯»ã€å½“å‰è¯»å¾ˆç›¸ä¼¼ï¼Œå¯ä»¥ç±»æ¯”å¯¹ç…§ã€‚","like_count":1,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":511997,"discussion_content":"åœ¨ç”¨æˆ·å±‚é¢è¿™æ ·ç†è§£å¾ˆç›´è§‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608358626,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115132,"user_name":"å°äºˆ","can_delete":false,"product_type":"c1","uid":1442580,"ip_address":"","ucode":"3F5EAEE1746074","user_header":"https://static001.geekbang.org/account/avatar/00/16/03/14/e9ca2d09.jpg","comment_is_top":false,"comment_ctime":1563498487,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5858465783","product_id":100023901,"comment_content":"åªæœ‰ ArrayBlockingQueue å’Œ LinkedBlockingQueue æ˜¯æ”¯æŒæœ‰ç•Œçš„å—ï¼Œå…¶ä»–çš„é˜Ÿåˆ—åº”è¯¥ä¹Ÿæ”¯æŒæœ‰ç•Œçš„å§ï¼Œæ¯”å¦‚PriorityBlockingQueueåˆå§‹åŒ–çš„æ—¶å€™å°±æ˜¯å¯ä»¥æŒ‡å®šå¤§å°çš„å§ï¼","like_count":1,"discussions":[{"author":{"id":1460568,"avatar":"","nickname":"whuzxj","note":"","ucode":"0EC6153B0A0E8A","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216716,"discussion_content":"PriorityBlockingQueueåˆå§‹åŒ–çš„æ—¶å€™å¯ä»¥æŒ‡å®šåˆå§‹å¤§å°ï¼Œåç»­æ˜¯å¯ä»¥æ‰©å®¹çš„ã€‚è€ŒArrayBlockingQueue å’Œ LinkedBlockingQueueæŒ‡å®šåˆå§‹å¤§å°åï¼Œåç»­æ˜¯ä¸å¯ä»¥æ‰©å®¹çš„ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1585478430,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":352983,"user_name":"SkillIP","can_delete":false,"product_type":"c1","uid":1744250,"ip_address":"åŒ—äº¬","ucode":"60EAEB93EC6858","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9d/7a/fb762fea.jpg","comment_is_top":false,"comment_ctime":1659063601,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1659063601","product_id":100023901,"comment_content":"è€å¸ˆèƒ½å›ç­”ä¸€ä¸‹ï¼Œæ€ä¹ˆéªŒè¯çŒœæµ‹ä¹ˆï¼Ÿæ˜¯é€šè¿‡æŸ¥çœ‹Dumpæ–‡ä»¶ä¹ˆï¼Ÿ","like_count":0},{"had_liked":false,"id":332617,"user_name":"æ¸…é£","can_delete":false,"product_type":"c1","uid":2317711,"ip_address":"","ucode":"62490AD4F949BB","user_header":"https://static001.geekbang.org/account/avatar/00/23/5d/8f/498d9ea5.jpg","comment_is_top":false,"comment_ctime":1643378575,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1643378575","product_id":100023901,"comment_content":"å¤´æ’æ³•å¯èƒ½å¯¼è‡´å¤šçº¿ç¨‹ç¯å¢ƒä¸‹é“¾è¡¨æˆç¯ï¼Œ1.8åé»˜è®¤å°¾æ’æ³•å°±æ²¡è¿™é—®é¢˜äº†","like_count":0},{"had_liked":false,"id":287445,"user_name":"YWH","can_delete":false,"product_type":"c1","uid":1145122,"ip_address":"","ucode":"B448CCF13F2BF2","user_header":"https://static001.geekbang.org/account/avatar/00/11/79/22/58981901.jpg","comment_is_top":false,"comment_ctime":1617953703,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1617953703","product_id":100023901,"comment_content":"è€å¸ˆï¼Œè°ˆåˆ° CopyOnWriteArrayList çš„â€œè¿­ä»£å™¨ Iterator éå†çš„å°±æ˜¯ array æ•°ç»„â€ï¼Œè¿™ä¸ª array æ•°ç»„æŒ‡çš„æ˜¯ CopyOnWriteArrayList  å†…éƒ¨çš„æ•°ç»„å§ï¼Ÿåé¢è¯´â€œCopyOnWriteArrayList è¿­ä»£å™¨æ˜¯åªè¯»çš„ï¼Œä¸æ”¯æŒå¢åˆ æ”¹ã€‚å› ä¸ºè¿­ä»£å™¨éå†çš„ä»…ä»…æ˜¯ä¸€ä¸ªå¿«ç…§ï¼Œè€Œå¯¹å¿«ç…§è¿›è¡Œå¢åˆ æ”¹æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚â€åˆ™æ˜¯åœ¨å¿«ç…§éå†ï¼Œè¿™æ ·æ˜¯å¦æœ‰çŸ›ç›¾å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2226367,"avatar":"https://static001.geekbang.org/account/avatar/00/21/f8/bf/59f2e600.jpg","nickname":"æœˆæ˜é£æ¸…","note":"","ucode":"65A97CF2E320FA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575040,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1654567845,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":283872,"user_name":"ç§‹å¶","can_delete":false,"product_type":"c1","uid":1477444,"ip_address":"","ucode":"D0B7EAE78B04BE","user_header":"https://static001.geekbang.org/account/avatar/00/16/8b/44/80808100.jpg","comment_is_top":false,"comment_ctime":1615968443,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1615968443","product_id":100023901,"comment_content":"LinkedBlockingQueue ä¸æŒ‡å®šå¤§å°å…¶é»˜è®¤å¤§å°å°±æ˜¯Integer.MAX_VALUEï¼ŒExecutorså†…ç½®çš„çº¿ç¨‹æ± é˜Ÿåˆ—å¤§éƒ¨åˆ†éƒ½æ˜¯è¿™ç§é˜Ÿåˆ—ï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨Executorsåˆ›å»ºé˜Ÿåˆ—ã€‚","like_count":0},{"had_liked":false,"id":245315,"user_name":"é‚£æœˆçœŸç¾","can_delete":false,"product_type":"c1","uid":1441895,"ip_address":"","ucode":"CEF1AF65C6064E","user_header":"https://static001.geekbang.org/account/avatar/00/16/00/67/e24dd940.jpg","comment_is_top":false,"comment_ctime":1598891849,"is_pvip":false,"replies":[{"id":"90225","content":"é€‚ç”¨å†™å°‘è¯»å¤šåœºæ™¯ï¼Œä¸ä¼šæœ‰å¹¶å‘é—®ä½ <br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1598926410,"ip_address":"","comment_id":245315,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1598891849","product_id":100023901,"comment_content":"è€å¸ˆï¼Œå‡å¦‚æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œCopyOnWriteArrayListå°±ä¼šæœ‰å¹¶å‘é—®é¢˜å§ï¼Ÿå› ä¸ºä¼šåŒæ—¶æŒ‡å‘ä¸¤ä¸ªä¸åŒçš„æ•°ç»„ä¸”éƒ½åªä¿å­˜äº†å½“å‰çº¿ç¨‹çš„å¿«ç…§ã€‚æ—¢ç„¶å¦‚æ­¤é‚£è¿˜æœ‰å•¥æ„ä¹‰å‘¢ï¼Ÿæ²¡æ³•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œè¯»æ€§èƒ½ä¹Ÿä¸æ¯”ArrayListå¿«å•Š","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":504848,"discussion_content":"é€‚ç”¨å†™å°‘è¯»å¤šåœºæ™¯ï¼Œä¸ä¼šæœ‰å¹¶å‘é—®ä½ \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598926410,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1148174,"avatar":"https://static001.geekbang.org/account/avatar/00/11/85/0e/e6640576.jpg","nickname":"é˜¿å£°","note":"","ucode":"EEA5F2E9D4FC9C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335714,"discussion_content":"å¹¶å‘è¯»ï¼Œè¯»çš„æ˜¯å¿«ç…§ï¼Œä¸ä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚\nå¹¶å‘å†™ï¼Œå†…éƒ¨ä½¿ç”¨ReentrantLock.lockåšçš„å¹¶å‘æ§åˆ¶ï¼Œåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºè¿›è¡Œå†™å¤åˆ¶æ“ä½œï¼›å…¶ä»–çº¿ç¨‹è¢«lockä½ï¼ŒåŒæ­¥æ’é˜Ÿå¤„ç†ã€‚\nè¿™ä¸ªè·Ÿmysqlçš„å¿«ç…§è¯»ã€å½“å‰è¯»å¾ˆç›¸ä¼¼ï¼Œå¯ä»¥ç±»æ¯”å¯¹ç…§ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608281749,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":221907,"user_name":"Geek_3422b1","can_delete":false,"product_type":"c1","uid":2007135,"ip_address":"","ucode":"ECD3AF9B1AFF13","user_header":"","comment_is_top":false,"comment_ctime":1590631719,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1590631719","product_id":100023901,"comment_content":"CopyOnWriteArrayList  å†™çš„æ—¶å€™ä¼šå¤åˆ¶ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œç„¶åå°†æ–°çš„çº¿ç¨‹èµ‹å€¼ç»™array,  é‚£ä¹ˆå¤šçº¿ç¨‹å†™çš„æ—¶å€™ä¸å°±å®Œæˆå½¼æ­¤è¦†ç›–äº†å—ï¼Ÿè¿™ä¸ªè¯¥æ€ä¹ˆç†è§£ï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":219178,"user_name":"æ— è¨€çš„çº¦å®š","can_delete":false,"product_type":"c1","uid":1128953,"ip_address":"","ucode":"5E8046EB6B7956","user_header":"https://static001.geekbang.org/account/avatar/00/11/39/f9/acfb9a48.jpg","comment_is_top":false,"comment_ctime":1589961941,"is_pvip":false,"replies":[{"id":"94099","content":"æ•°æ®é‡å¾ˆå¤§æ—¶å¾ˆæœ‰å¯èƒ½oomï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1604407317,"ip_address":"","comment_id":219178,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1589961941","product_id":100023901,"comment_content":"è€å¸ˆï¼Œæœ‰ä¸ªé—®é¢˜éœ€è¦è¯·æ•™ï¼Œå¤šçº¿ç¨‹ä»Kafkaä¸­å–å‡ºæ•°æ®åæŒ‰æ—¶é—´å…ˆåé¡ºåºå­˜å…¥ConcurrentSkipListMapï¼Œæ•°æ®é‡å¾ˆå¤§æ—¶è·³è¡¨ä¼šå­˜ä¸ä¸‹å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":495704,"discussion_content":"æ•°æ®é‡å¾ˆå¤§æ—¶å¾ˆæœ‰å¯èƒ½oomï¿½ï¿½ï¿½ï¿½ï¿½ï¿½","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1604407317,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":199188,"user_name":"ğŸ˜œå“ˆå“ˆ","can_delete":false,"product_type":"c1","uid":1069001,"ip_address":"","ucode":"1FF58FB3A91135","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/c9/88837387.jpg","comment_is_top":false,"comment_ctime":1585481777,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1585481777","product_id":100023901,"comment_content":"Java8ä»¥å‰çš„HashMapå¦‚æœputæ“ä½œæ—¶æœ‰æ‰©å®¹ï¼Œé“¾è¡¨å¹¶å‘æ“ä½œä¼šé€ æˆé“¾è¡¨æˆç¯ï¼Œä»è€Œå¯¼è‡´cpué£™å‡100%ã€‚","like_count":0},{"had_liked":false,"id":157502,"user_name":"Michael","can_delete":false,"product_type":"c1","uid":1274787,"ip_address":"","ucode":"C233DF1D224EC1","user_header":"https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg","comment_is_top":false,"comment_ctime":1575180355,"is_pvip":true,"replies":[{"id":"67118","content":"æˆ‘åªèƒ½è¯´ï¼Œåœºæ™¯å’Œä¾æ®å‚è€ƒç®—æ³•é‡Œæ•°ç»„å’Œé“¾è¡¨çš„é€‰æ‹©ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1579438741,"ip_address":"","comment_id":157502,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1575180355","product_id":100023901,"comment_content":"è€å¸ˆå¥½ï¼<br>ThreadPoolExecutorçš„æ„é€ æ–¹æ³•ä¸­ä¼ å…¥çš„é˜Ÿåˆ—ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨LinkedBlockingQueueæœ‰ç•Œé˜Ÿåˆ—ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨ArrayBlockingQueueæœ‰ç•Œé˜Ÿåˆ—ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿæœ‰ä»€ä¹ˆä¾æ®ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476450,"discussion_content":"æˆ‘åªèƒ½è¯´ï¼Œåœºæ™¯å’Œä¾æ®å‚è€ƒç®—æ³•é‡Œæ•°ç»„å’Œé“¾è¡¨çš„é€‰æ‹©ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1579438741,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":150155,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1573470345,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1573470345","product_id":100023901,"comment_content":"ç¬¬ä¸€æ¬¡å¬è¯´å®¹å™¨çš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ï¼Œå­¦ä¹ äº†","like_count":0},{"had_liked":false,"id":135649,"user_name":"ly","can_delete":false,"product_type":"c1","uid":1221628,"ip_address":"","ucode":"5E2B85252DABF3","user_header":"https://static001.geekbang.org/account/avatar/00/12/a3/fc/379387a4.jpg","comment_is_top":false,"comment_ctime":1569235065,"is_pvip":false,"replies":[{"id":"52036","content":"çŒœæµ‹æ˜¯keyå†²çªåçš„è§£å†³æ–¹å¼å†³å®šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1569245729,"ip_address":"","comment_id":135649,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1569235065","product_id":100023901,"comment_content":"å¯¹äºhashtableå’ŒconhashmapåŠconskiplistmapï¼Œä¸ºä»€ä¹ˆéå¾—è¦æ±‚valueä¹Ÿå¿…é¡»ä¸èƒ½ä¸ºnullå‘¢ï¼ŸæŒ‰é“ç†ï¼Œkeyä¸èƒ½ä¸ºnullåº”è¯¥å°±å¤Ÿäº†å§ï¼Œä¸çŸ¥é“è¿™æ ·è®¾è®¡å¯¹è¿™äº›é›†åˆæœ¬èº«çš„ç»“æ„æœ‰ä»€ä¹ˆå½±å“å—ï¼Œè¿˜æ˜¯è¯´ä»…ä»…æ˜¯ç»™å®¹å™¨ä½¿ç”¨è€…ä¸€ä¸ªçº¦å®šï¼ˆå…„å¼Ÿï¼Œåªè¦å­˜åœ¨keyï¼Œåˆ™è¿”å›ç»™ä½ çš„ä¸€å®šä¸ä¼šæ˜¯nullï¼‰","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":468288,"discussion_content":"çŒœæµ‹æ˜¯keyå†²çªåçš„è§£å†³æ–¹å¼å†³å®šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569245729,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":134911,"user_name":"é£ç¿”","can_delete":false,"product_type":"c1","uid":1068571,"ip_address":"","ucode":"65AF6AF292DAD6","user_header":"https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg","comment_is_top":false,"comment_ctime":1568950213,"is_pvip":true,"replies":[{"id":"52710","content":"è¿™ä¸ªæ˜¯é‡Œé¢çš„ä¸€ä¸ªå†…éƒ¨ç±»çš„ğŸ˜‚","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1569668081,"ip_address":"","comment_id":134911,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1568950213","product_id":100023901,"comment_content":"è€å¸ˆ é‡å¤§å‘ç° CopyOnWriteArrayList jdk ä¸€ç‚¹8 è¯»æ“ä½œé‡Œè¾¹æœ‰é” å¾ˆå¥‡æ€ª<br><br>public class CopyOnWriteArrayList&lt;E&gt;<br> public E get(int index) {<br>            final ReentrantLock lock = l.lock;<br>            lock.lock();<br>            try {<br>                rangeCheck(index);<br>                checkForComodification();<br>                return l.get(index+offset);<br>            } finally {<br>                lock.unlock();<br>            }<br>        }","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":467954,"discussion_content":"è¿™ä¸ªæ˜¯é‡Œé¢çš„ä¸€ä¸ªå†…éƒ¨ç±»çš„ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569668081,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":125401,"user_name":"ç»™å¿ƒæ¥å—å†°å—","can_delete":false,"product_type":"c1","uid":1063689,"ip_address":"","ucode":"7AFB56581782A2","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/09/2cf074a7.jpg","comment_is_top":false,"comment_ctime":1566179586,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1566179586","product_id":100023901,"comment_content":"æ˜¯å¦å¯ä»¥æŠŠHashMapæ¢æˆConcurrentSkipListMap,ç„¶åå†çœ‹cpuçš„èµ„æºä½¿ç”¨æƒ…å†µ","like_count":0},{"had_liked":false,"id":120383,"user_name":"å°”å†¬æ©™","can_delete":false,"product_type":"c1","uid":1225224,"ip_address":"","ucode":"0B013A49BC18DA","user_header":"https://static001.geekbang.org/account/avatar/00/12/b2/08/92f42622.jpg","comment_is_top":false,"comment_ctime":1564852353,"is_pvip":false,"replies":[{"id":"53799","content":"æˆ‘ä¹Ÿæ²¡æœ‰æ·±å…¥å¯¹æ¯”è¿‡ï¼Œvectorè¿™ä¸ªå®¹å™¨åœ¨å…¶ä»–è¯­è¨€é‡Œä¹Ÿæœ‰ï¼Œå¯èƒ½æ˜¯ä¸ºäº†æŸç§å½¢å¼ä¸Šçš„æ ‡å‡†åŒ–æ‰åˆ›å»ºçš„","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1570670476,"ip_address":"","comment_id":120383,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564852353","product_id":100023901,"comment_content":"è€å¸ˆï¼Œcollectiosç‰ˆçš„arraylistå’Œvectoræ˜¯ä¸æ˜¯æ€§èƒ½æœ‰å·®åˆ«ä¹ˆï¼Ÿå¦‚æœæœ‰å·®åœ¨å“ªè¾¹ï¼Ÿæˆ‘çœ‹ä»–ä»¬éƒ½æ˜¯ç”¨synchronizedé”æ–¹æ³•","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":461309,"discussion_content":"æˆ‘ä¹Ÿæ²¡æœ‰æ·±å…¥å¯¹æ¯”è¿‡ï¼Œvectorè¿™ä¸ªå®¹å™¨åœ¨å…¶ä»–è¯­è¨€é‡Œä¹Ÿæœ‰ï¼Œå¯èƒ½æ˜¯ä¸ºäº†æŸç§å½¢å¼ä¸Šçš„æ ‡å‡†åŒ–æ‰åˆ›å»ºçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1570670476,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":118023,"user_name":"ä¸šä½™è‰","can_delete":false,"product_type":"c1","uid":1126538,"ip_address":"","ucode":"99BDC1E629049D","user_header":"https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg","comment_is_top":false,"comment_ctime":1564213755,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564213755","product_id":100023901,"comment_content":"å†™çš„å¾ˆå¥½ï¼Œéœ€è¦ç»†ç»†å“å‘³","like_count":0},{"had_liked":false,"id":97028,"user_name":"wang","can_delete":false,"product_type":"c1","uid":1270262,"ip_address":"","ucode":"C1A3BCACCB188E","user_header":"https://static001.geekbang.org/account/avatar/00/13/61/f6/1d6b548a.jpg","comment_is_top":false,"comment_ctime":1558574152,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1558574152","product_id":100023901,"comment_content":"è·³è¡¨ä¸æ˜¯å¯ä»¥åšåˆ°æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸ºlog(n)ä¹ˆ","like_count":0},{"had_liked":false,"id":93826,"user_name":"xiaoming","can_delete":false,"product_type":"c1","uid":1444765,"ip_address":"","ucode":"242B4C52B2B865","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/e6TFib156x0VEiaWPkwpgAqgqJ8P07WpHPicRTWqnBIAW6br6yoXDA6kCdAlWBBjlqFtlyyhM4rPzUhlF8IdMPhZQ/132","comment_is_top":false,"comment_ctime":1557631235,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557631235","product_id":100023901,"comment_content":"List list = Collections.synchronizedList(new ArrayList());<br>Iterator i = list.iterator();<br>while (i.hasNext())<br>  foo(i.next());<br>è€å¸ˆ, è¿™æ®µä»£ç æ˜¯å¦å¯ä»¥è¿™æ ·ç†è§£ï¼Ÿ  while (i.hasNext())   foo(i.next()); è¿™æ®µä»£ç æ²¡æœ‰åŠ é”,  å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æ“ä½œã€‚ <br>Açº¿ç¨‹ list[0]= i.next(), ä¸Bçº¿ç¨‹list[0] = i.next()è·å–äº†ç›¸åŒçš„æ•°æ®data = 0,  <br>å‡è®¾fooå°±æ˜¯è¿›è¡Œ+1çš„æ“ä½œ<br>ç„¶åA,Bçº¿ç¨‹éƒ½å¯¹dataè¿›è¡Œ æ“ä½œ foo(data) ï¼Œä¸¤ä¸ªçº¿ç¨‹è¿è¡Œå®Œå, list[0] =1ã€‚  <br>å¦‚æœåŠ é”listäº†, è¿™æ®µå°±æ˜¯å°±æ˜¯äº’æ–¥çš„, Açº¿ç¨‹æ‰§è¡Œå®Œåé‡Šæ”¾äº†é”list,  Bçº¿ç¨‹è·å–é”æ‰èƒ½æ‰§è¡Œwhile (i.hasNext())  foo(i.next()); ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œå®Œæˆå list[0] =2ï¼›","like_count":0},{"had_liked":false,"id":93377,"user_name":"åˆ˜é¹","can_delete":false,"product_type":"c1","uid":1524765,"ip_address":"","ucode":"48A831C5D2031C","user_header":"https://static001.geekbang.org/account/avatar/00/17/44/1d/833b3890.jpg","comment_is_top":false,"comment_ctime":1557459818,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557459818","product_id":100023901,"comment_content":"cpu 100%çš„çŒœæµ‹--ã€‹å¯èƒ½ç”¨jstackçœ‹çœ‹ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ","like_count":0},{"had_liked":false,"id":90677,"user_name":"å¹³å¤´è¾‰è¾‰","can_delete":false,"product_type":"c1","uid":1180283,"ip_address":"","ucode":"9BB2AD9ACD14CE","user_header":"https://static001.geekbang.org/account/avatar/00/12/02/7b/eae23749.jpg","comment_is_top":false,"comment_ctime":1556608156,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1556608156","product_id":100023901,"comment_content":"ç©ºé—´å¤æ‚åº¦ä¹Ÿä¸ä¸€æ ·","like_count":0},{"had_liked":false,"id":90625,"user_name":"å½­é”","can_delete":false,"product_type":"c1","uid":1179669,"ip_address":"","ucode":"F2CB53DE42026D","user_header":"https://static001.geekbang.org/account/avatar/00/12/00/15/6e399ec7.jpg","comment_is_top":false,"comment_ctime":1556590614,"is_pvip":false,"replies":[{"id":"32459","content":"skiplistçš„ä¼˜ç‚¹æ˜¯ç¨³å®šï¼Œhashä¸æ˜¯æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ˜¯O1ã€‚å¦å¤–è¿˜è¦çœ‹ä»–è§£å†³keyå†²çªçš„ç­–ç•¥æ˜¯ä»€ä¹ˆ","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1556606916,"ip_address":"","comment_id":90625,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1556590614","product_id":100023901,"comment_content":"æ€§èƒ½ä¸Šï¼ŒConcurrentHashMapæ€ä¹ˆä¼šæ¯”ConcurrentSkipListMapæ›´å·®å‘¢ï¼ŸHashæœ¬èº«çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼Œä¸¤è€…å¹¶å‘ä¸Šéƒ½ä½¿ç”¨äº†åˆ†æ®µåŠ é”æŠ€æœ¯ã€‚è¿™ä¸ªæ€§èƒ½å·®åœ¨å“ªé‡Œäº†å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":448599,"discussion_content":"skiplistçš„ä¼˜ç‚¹æ˜¯ç¨³å®šï¼Œhashä¸æ˜¯æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ˜¯O1ã€‚å¦å¤–è¿˜è¦çœ‹ä»–è§£å†³keyå†²çªçš„ç­–ç•¥æ˜¯ä»€ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556606916,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85932,"user_name":"å¤šè¥„ä¸¸","can_delete":false,"product_type":"c1","uid":1074310,"ip_address":"","ucode":"1AA1497C5A293C","user_header":"https://static001.geekbang.org/account/avatar/00/10/64/86/f5a9403a.jpg","comment_is_top":false,"comment_ctime":1555295220,"is_pvip":false,"replies":[{"id":"30898","content":"é“¾è¡¨æ­»å¾ªç¯äº†","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555299978,"ip_address":"","comment_id":85932,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555295220","product_id":100023901,"comment_content":"è€å¸ˆï¼Œhashmap æ‰©å®¹æ—¶ï¼Œä¼šéå†é“¾è¡¨æˆ‘èƒ½æƒ³æ¥ï¼Œä½†æ˜¯ä¸ºå•¥cpuä¼šé£™å‡åˆ°100%, æ˜¯å› ä¸ºæ‰©å®¹æ—¶éå†çš„æ˜¯æ— ç•Œé“¾è¡¨çš„åŸå› å˜›ï¼Ÿ   ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446870,"discussion_content":"é“¾è¡¨æ­»å¾ªç¯äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555299978,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85735,"user_name":"undifined","can_delete":false,"product_type":"c1","uid":1068920,"ip_address":"","ucode":"449CB4CD2DC089","user_header":"https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg","comment_is_top":false,"comment_ctime":1555216097,"is_pvip":false,"replies":[{"id":"30826","content":"cowçš„è¯»æ˜¯æ— é”çš„ï¼Œè¿™ä¸ªæ˜¯å…³é”®<br>","user_name":"ä½œè€…å›å¤","user_name_real":"ç‹å®ä»¤","uid":"1269969","ctime":1555225894,"ip_address":"","comment_id":85735,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555216097","product_id":100023901,"comment_content":"è€å¸ˆ CopyOnWriteArrayList å¦‚æœç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯ï¼Œè€Œä¸”çŸ­æš‚ä¸ä¸€è‡´ï¼Œå…¶å®çœŸæ­£å¯ç”¨çš„åœºæ™¯æ¯”è¾ƒå°‘ï¼Œå¦‚æœå¢åŠ å…ƒç´ ä¸ä¼šå¼•èµ·æ‰©å®¹ï¼Œé‚£åŠ é”çš„å¼€é”€æ˜¯ä¸æ˜¯æ¯”å¤åˆ¶æ•°ç»„å°ï¼Œè¿™æ ·çœ‹ CopyOnWriteArrayList å…¶å®ä¸æ˜¯å¾ˆæœ‰æ„ä¹‰ ","like_count":0,"discussions":[{"author":{"id":1269969,"avatar":"https://static001.geekbang.org/account/avatar/00/13/60/d1/8efa89ab.jpg","nickname":"ç‹å®ä»¤","note":"","ucode":"4FE19F5BC32FCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446784,"discussion_content":"cowçš„è¯»æ˜¯æ— é”çš„ï¼Œè¿™ä¸ªæ˜¯å…³é”®\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555225894,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}