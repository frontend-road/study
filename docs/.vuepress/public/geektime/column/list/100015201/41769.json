{"id":41769,"title":"23 | å£°æ˜å¼APIä¸Kubernetesç¼–ç¨‹èŒƒå¼","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ç£Šã€‚ä»Šå¤©æˆ‘å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼šå£°æ˜å¼APIä¸Kubernetesç¼–ç¨‹èŒƒå¼ã€‚</p><p>åœ¨å‰é¢çš„å‡ ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å’Œä½ åˆ†äº«äº†å¾ˆå¤šKubernetesçš„APIå¯¹è±¡ã€‚è¿™äº›APIå¯¹è±¡ï¼Œæœ‰çš„æ˜¯ç”¨æ¥æè¿°åº”ç”¨ï¼Œæœ‰çš„åˆ™æ˜¯ä¸ºåº”ç”¨æä¾›å„ç§å„æ ·çš„æœåŠ¡ã€‚ä½†æ˜¯ï¼Œæ— ä¸€ä¾‹å¤–åœ°ï¼Œä¸ºäº†ä½¿ç”¨è¿™äº›APIå¯¹è±¡æä¾›çš„èƒ½åŠ›ï¼Œä½ éƒ½éœ€è¦ç¼–å†™ä¸€ä¸ªå¯¹åº”çš„YAMLæ–‡ä»¶äº¤ç»™Kubernetesã€‚</p><p>è¿™ä¸ªYAMLæ–‡ä»¶ï¼Œæ­£æ˜¯Kuberneteså£°æ˜å¼APIæ‰€å¿…é¡»å…·å¤‡çš„ä¸€ä¸ªè¦ç´ ã€‚ä¸è¿‡ï¼Œæ˜¯ä¸æ˜¯åªè¦ç”¨YAMLæ–‡ä»¶ä»£æ›¿äº†å‘½ä»¤è¡Œæ“ä½œï¼Œå°±æ˜¯å£°æ˜å¼APIäº†å‘¢ï¼Ÿ</p><p>ä¸¾ä¸ªä¾‹å­ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒDocker Swarmçš„ç¼–æ’æ“ä½œéƒ½æ˜¯åŸºäºå‘½ä»¤è¡Œçš„ï¼Œæ¯”å¦‚ï¼š</p><pre><code>$ docker service create --name nginx --replicas 2  nginx\n$ docker service update --image nginx:1.7.9 nginx\n</code></pre><p>åƒè¿™æ ·çš„ä¸¤æ¡å‘½ä»¤ï¼Œå°±æ˜¯ç”¨Docker Swarmå¯åŠ¨äº†ä¸¤ä¸ªNginxå®¹å™¨å®ä¾‹ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€æ¡createå‘½ä»¤åˆ›å»ºäº†è¿™ä¸¤ä¸ªå®¹å™¨ï¼Œè€Œç¬¬äºŒæ¡updateå‘½ä»¤åˆ™æŠŠå®ƒä»¬â€œæ»šåŠ¨æ›´æ–°â€æˆäº†ä¸€ä¸ªæ–°çš„é•œåƒã€‚</p><p>å¯¹äºè¿™ç§ä½¿ç”¨æ–¹å¼ï¼Œæˆ‘ä»¬ç§°ä¸º<strong>å‘½ä»¤å¼å‘½ä»¤è¡Œæ“ä½œ</strong>ã€‚</p><p>é‚£ä¹ˆï¼Œåƒä¸Šé¢è¿™æ ·çš„åˆ›å»ºå’Œæ›´æ–°ä¸¤ä¸ªNginxå®¹å™¨çš„æ“ä½œï¼Œåœ¨Kubernetesé‡Œåˆè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>è¿™ä¸ªæµç¨‹ï¼Œç›¸ä¿¡ä½ å·²ç»éå¸¸ç†Ÿæ‚‰äº†ï¼šæˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°ç¼–å†™ä¸€ä¸ªDeploymentçš„YAMLæ–‡ä»¶ï¼š</p><pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\nspec:\n  selector:\n    matchLabels:\n      app: nginx\n  replicas: 2\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: nginx\n        ports:\n        - containerPort: 80\n</code></pre><!-- [[[read_end]]] --><p>ç„¶åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨kubectl createå‘½ä»¤åœ¨Kubernetesé‡Œåˆ›å»ºè¿™ä¸ªDeploymentå¯¹è±¡ï¼š</p><pre><code>$ kubectl create -f nginx.yaml\n</code></pre><p>è¿™æ ·ï¼Œä¸¤ä¸ªNginxçš„Podå°±ä¼šè¿è¡Œèµ·æ¥äº†ã€‚</p><p>è€Œå¦‚æœè¦æ›´æ–°è¿™ä¸¤ä¸ªPodä½¿ç”¨çš„Nginxé•œåƒï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å‰é¢æ›¾ç»ä½¿ç”¨è¿‡kubectl set imageå’Œkubectl editå‘½ä»¤ï¼Œæ¥ç›´æ¥ä¿®æ”¹Kubernetesé‡Œçš„APIå¯¹è±¡ã€‚ä¸è¿‡ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½æœ‰è¿™æ ·çš„æƒ³æ³•ï¼Œæˆ‘èƒ½ä¸èƒ½é€šè¿‡ä¿®æ”¹æœ¬åœ°YAMLæ–‡ä»¶æ¥å®Œæˆè¿™ä¸ªæ“ä½œå‘¢ï¼Ÿè¿™æ ·æˆ‘çš„æ”¹åŠ¨å°±ä¼šä½“ç°åœ¨è¿™ä¸ªæœ¬åœ°YAMLæ–‡ä»¶é‡Œäº†ã€‚</p><p>å½“ç„¶å¯ä»¥ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™ä¸ªYAMLæ–‡ä»¶é‡Œçš„Podæ¨¡æ¿éƒ¨åˆ†ï¼ŒæŠŠNginxå®¹å™¨çš„é•œåƒæ”¹æˆ1.7.9ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>...\n    spec:\n      containers:\n      - name: nginx\n        image: nginx:1.7.9\n</code></pre><p>è€Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œä¸€å¥kubectl replaceæ“ä½œï¼Œæ¥å®Œæˆè¿™ä¸ªDeploymentçš„æ›´æ–°ï¼š</p><pre><code>$ kubectl replace -f nginx.yaml\n</code></pre><p>å¯æ˜¯ï¼Œä¸Šé¢è¿™ç§åŸºäºYAMLæ–‡ä»¶çš„æ“ä½œæ–¹å¼ï¼Œæ˜¯â€œå£°æ˜å¼APIâ€å—ï¼Ÿ</p><p>å¹¶ä¸æ˜¯ã€‚</p><p>å¯¹äºä¸Šé¢è¿™ç§å…ˆkubectl createï¼Œå†replaceçš„æ“ä½œï¼Œæˆ‘ä»¬ç§°ä¸º<strong>å‘½ä»¤å¼é…ç½®æ–‡ä»¶æ“ä½œã€‚</strong></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒçš„å¤„ç†æ–¹å¼ï¼Œå…¶å®è·Ÿå‰é¢Docker Swarmçš„ä¸¤å¥å‘½ä»¤ï¼Œæ²¡ä»€ä¹ˆæœ¬è´¨ä¸Šçš„åŒºåˆ«ã€‚åªä¸è¿‡ï¼Œå®ƒæ˜¯æŠŠDockerå‘½ä»¤è¡Œé‡Œçš„å‚æ•°ï¼Œå†™åœ¨äº†é…ç½®æ–‡ä»¶é‡Œè€Œå·²ã€‚</p><p><strong>é‚£ä¹ˆï¼Œåˆ°åº•ä»€ä¹ˆæ‰æ˜¯â€œå£°æ˜å¼APIâ€å‘¢ï¼Ÿ</strong></p><p>ç­”æ¡ˆæ˜¯ï¼Œkubectl applyå‘½ä»¤ã€‚</p><p>åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘æ›¾ç»æåˆ°è¿‡è¿™ä¸ªkubectl applyå‘½ä»¤ï¼Œå¹¶æ¨èä½ ä½¿ç”¨å®ƒæ¥ä»£æ›¿kubectl createå‘½ä»¤ï¼ˆä½ ä¹Ÿå¯ä»¥å€Ÿæ­¤æœºä¼šå†å›é¡¾ä¸€ä¸‹ç¬¬12ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/40008\">ã€Šç‰›åˆ€å°è¯•ï¼šæˆ‘çš„ç¬¬ä¸€ä¸ªå®¹å™¨åŒ–åº”ç”¨ã€‹</a>ä¸­çš„ç›¸å…³å†…å®¹ï¼‰ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘å°±ä½¿ç”¨kubectl applyå‘½ä»¤æ¥åˆ›å»ºè¿™ä¸ªDeploymentï¼š</p><pre><code>$ kubectl apply -f nginx.yaml\n</code></pre><p>è¿™æ ·ï¼ŒNginxçš„Deploymentå°±è¢«åˆ›å»ºäº†å‡ºæ¥ï¼Œè¿™çœ‹èµ·æ¥è·Ÿkubectl createçš„æ•ˆæœä¸€æ ·ã€‚</p><p>ç„¶åï¼Œæˆ‘å†ä¿®æ”¹ä¸€ä¸‹nginx.yamlé‡Œå®šä¹‰çš„é•œåƒï¼š</p><pre><code>...\n    spec:\n      containers:\n      - name: nginx\n        image: nginx:1.7.9\n</code></pre><p>è¿™æ—¶å€™ï¼Œå…³é”®æ¥äº†ã€‚</p><p>åœ¨ä¿®æ”¹å®Œè¿™ä¸ªYAMLæ–‡ä»¶ä¹‹åï¼Œæˆ‘ä¸å†ä½¿ç”¨kubectl replaceå‘½ä»¤è¿›è¡Œæ›´æ–°ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œä¸€æ¡kubectl applyå‘½ä»¤ï¼Œå³ï¼š</p><pre><code>$ kubectl apply -f nginx.yaml\n</code></pre><p>è¿™æ—¶ï¼ŒKuberneteså°±ä¼šç«‹å³è§¦å‘è¿™ä¸ªDeploymentçš„â€œæ»šåŠ¨æ›´æ–°â€ã€‚</p><p>å¯æ˜¯ï¼Œå®ƒè·Ÿkubectl replaceå‘½ä»¤æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«å—ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œä½ å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºï¼Œkubectl replaceçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ä½¿ç”¨æ–°çš„YAMLæ–‡ä»¶ä¸­çš„APIå¯¹è±¡ï¼Œ<strong>æ›¿æ¢åŸæœ‰çš„APIå¯¹è±¡</strong>ï¼›è€Œkubectl applyï¼Œåˆ™æ˜¯æ‰§è¡Œäº†ä¸€ä¸ª<strong>å¯¹åŸæœ‰APIå¯¹è±¡çš„PATCHæ“ä½œ</strong>ã€‚</p><blockquote>\n<p>ç±»ä¼¼åœ°ï¼Œkubectl set imageå’Œkubectl editä¹Ÿæ˜¯å¯¹å·²æœ‰APIå¯¹è±¡çš„ä¿®æ”¹ã€‚</p>\n</blockquote><p>æ›´è¿›ä¸€æ­¥åœ°ï¼Œè¿™æ„å‘³ç€kube-apiserveråœ¨å“åº”å‘½ä»¤å¼è¯·æ±‚ï¼ˆæ¯”å¦‚ï¼Œkubectl replaceï¼‰çš„æ—¶å€™ï¼Œä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªå†™è¯·æ±‚ï¼Œå¦åˆ™ä¼šæœ‰äº§ç”Ÿå†²çªçš„å¯èƒ½ã€‚è€Œå¯¹äºå£°æ˜å¼è¯·æ±‚ï¼ˆæ¯”å¦‚ï¼Œkubectl applyï¼‰ï¼Œ<strong>ä¸€æ¬¡èƒ½å¤„ç†å¤šä¸ªå†™æ“ä½œï¼Œå¹¶ä¸”å…·å¤‡Mergeèƒ½åŠ›</strong>ã€‚</p><p>è¿™ç§åŒºåˆ«ï¼Œå¯èƒ½ä¹ä¸€å¬èµ·æ¥æ²¡é‚£ä¹ˆé‡è¦ã€‚è€Œä¸”ï¼Œæ­£æ˜¯ç”±äºè¦ç…§é¡¾åˆ°è¿™æ ·çš„APIè®¾è®¡ï¼ŒåšåŒæ ·ä¸€ä»¶äº‹æƒ…ï¼ŒKuberneteséœ€è¦çš„æ­¥éª¤å¾€å¾€è¦æ¯”å…¶ä»–é¡¹ç›®å¤šä¸å°‘ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ ä»”ç»†æ€è€ƒä¸€ä¸‹Kubernetesé¡¹ç›®çš„å·¥ä½œæµç¨‹ï¼Œå°±ä¸éš¾ä½“ä¼šåˆ°è¿™ç§å£°æ˜å¼APIçš„ç‹¬åˆ°ä¹‹å¤„ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä»¥Istioé¡¹ç›®ä¸ºä¾‹ï¼Œæ¥ä¸ºä½ è®²è§£ä¸€ä¸‹å£°æ˜å¼APIåœ¨å®é™…ä½¿ç”¨æ—¶çš„é‡è¦æ„ä¹‰ã€‚</p><p>åœ¨2017å¹´5æœˆï¼ŒGoogleã€IBMå’ŒLyftå…¬å¸ï¼Œå…±åŒå®£å¸ƒäº†Istioå¼€æºé¡¹ç›®çš„è¯ç”Ÿã€‚å¾ˆå¿«ï¼Œè¿™ä¸ªé¡¹ç›®å°±åœ¨æŠ€æœ¯åœˆå„¿é‡Œï¼Œæ€èµ·äº†ä¸€é˜µåå«â€œå¾®æœåŠ¡â€çš„çƒ­æ½®ï¼ŒæŠŠService Meshè¿™ä¸ªæ–°çš„ç¼–æ’æ¦‚å¿µæ¨åˆ°äº†é£å£æµªå°–ã€‚</p><p>è€ŒIstioé¡¹ç›®ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªåŸºäºKubernetesé¡¹ç›®çš„å¾®æœåŠ¡æ²»ç†æ¡†æ¶ã€‚å®ƒçš„æ¶æ„éå¸¸æ¸…æ™°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src=\"https://static001.geekbang.org/resource/image/d3/1b/d38daed2fedc90e20e9d2f27afbaec1b.jpg?wh=1920*1080\" alt=\"\"><br>\nåœ¨ä¸Šé¢è¿™ä¸ªæ¶æ„å›¾ä¸­ï¼Œæˆ‘ä»¬ä¸éš¾çœ‹åˆ°Istioé¡¹ç›®æ¶æ„çš„æ ¸å¿ƒæ‰€åœ¨ã€‚<strong>Istioæœ€æ ¹æœ¬çš„ç»„ä»¶ï¼Œæ˜¯è¿è¡Œåœ¨æ¯ä¸€ä¸ªåº”ç”¨Podé‡Œçš„Envoyå®¹å™¨</strong>ã€‚</p><p>è¿™ä¸ªEnvoyé¡¹ç›®æ˜¯Lyftå…¬å¸æ¨å‡ºçš„ä¸€ä¸ªé«˜æ€§èƒ½C++ç½‘ç»œä»£ç†ï¼Œä¹Ÿæ˜¯Lyftå…¬å¸å¯¹Istioé¡¹ç›®çš„å”¯ä¸€è´¡çŒ®ã€‚</p><p>è€ŒIstioé¡¹ç›®ï¼Œåˆ™æŠŠè¿™ä¸ªä»£ç†æœåŠ¡ä»¥sidecarå®¹å™¨çš„æ–¹å¼ï¼Œè¿è¡Œåœ¨äº†æ¯ä¸€ä¸ªè¢«æ²»ç†çš„åº”ç”¨Podä¸­ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒPodé‡Œçš„æ‰€æœ‰å®¹å™¨éƒ½å…±äº«åŒä¸€ä¸ªNetwork Namespaceã€‚æ‰€ä»¥ï¼ŒEnvoyå®¹å™¨å°±èƒ½å¤Ÿé€šè¿‡é…ç½®Podé‡Œçš„iptablesè§„åˆ™ï¼ŒæŠŠæ•´ä¸ªPodçš„è¿›å‡ºæµé‡æ¥ç®¡ä¸‹æ¥ã€‚</p><p>è¿™æ—¶å€™ï¼ŒIstioçš„æ§åˆ¶å±‚ï¼ˆControl Planeï¼‰é‡Œçš„Pilotç»„ä»¶ï¼Œå°±èƒ½å¤Ÿé€šè¿‡è°ƒç”¨æ¯ä¸ªEnvoyå®¹å™¨çš„APIï¼Œå¯¹è¿™ä¸ªEnvoyä»£ç†è¿›è¡Œé…ç½®ï¼Œä»è€Œå®ç°å¾®æœåŠ¡æ²»ç†ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p><p>å‡è®¾è¿™ä¸ªIstioæ¶æ„å›¾å·¦è¾¹çš„Podæ˜¯å·²ç»åœ¨è¿è¡Œçš„åº”ç”¨ï¼Œè€Œå³è¾¹çš„Podåˆ™æ˜¯æˆ‘ä»¬åˆšåˆšä¸Šçº¿çš„åº”ç”¨çš„æ–°ç‰ˆæœ¬ã€‚è¿™æ—¶å€™ï¼ŒPiloté€šè¿‡è°ƒèŠ‚è¿™ä¸¤Podé‡Œçš„Envoyå®¹å™¨çš„é…ç½®ï¼Œä»è€Œå°†90%çš„æµé‡åˆ†é…ç»™æ—§ç‰ˆæœ¬çš„åº”ç”¨ï¼Œå°†10%çš„æµé‡åˆ†é…ç»™æ–°ç‰ˆæœ¬åº”ç”¨ï¼Œå¹¶ä¸”ï¼Œè¿˜å¯ä»¥åœ¨åç»­çš„è¿‡ç¨‹ä¸­éšæ—¶è°ƒæ•´ã€‚è¿™æ ·ï¼Œä¸€ä¸ªå…¸å‹çš„â€œç°åº¦å‘å¸ƒâ€çš„åœºæ™¯å°±å®Œæˆäº†ã€‚æ¯”å¦‚ï¼ŒIstioå¯ä»¥è°ƒèŠ‚è¿™ä¸ªæµé‡ä»90%-10%ï¼Œæ”¹åˆ°80%-20%ï¼Œå†åˆ°50%-50%ï¼Œæœ€ååˆ°0%-100%ï¼Œå°±å®Œæˆäº†è¿™ä¸ªç°åº¦å‘å¸ƒçš„è¿‡ç¨‹ã€‚</p><p>æ›´é‡è¦çš„æ˜¯ï¼Œåœ¨æ•´ä¸ªå¾®æœåŠ¡æ²»ç†çš„è¿‡ç¨‹ä¸­ï¼Œæ— è®ºæ˜¯å¯¹Envoyå®¹å™¨çš„éƒ¨ç½²ï¼Œè¿˜æ˜¯åƒä¸Šé¢è¿™æ ·å¯¹Envoyä»£ç†çš„é…ç½®ï¼Œç”¨æˆ·å’Œåº”ç”¨éƒ½æ˜¯å®Œå…¨â€œæ— æ„Ÿâ€çš„ã€‚</p><p>è¿™æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šæœ‰æ‰€ç–‘æƒ‘ï¼šIstioé¡¹ç›®æ˜æ˜éœ€è¦åœ¨æ¯ä¸ªPodé‡Œå®‰è£…ä¸€ä¸ªEnvoyå®¹å™¨ï¼Œåˆæ€ä¹ˆèƒ½åšåˆ°â€œæ— æ„Ÿâ€çš„å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œ<strong>Istioé¡¹ç›®ä½¿ç”¨çš„ï¼Œæ˜¯Kubernetesä¸­çš„ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½ï¼Œå«ä½œDynamic Admission Controlã€‚</strong></p><p>åœ¨Kubernetesé¡¹ç›®ä¸­ï¼Œå½“ä¸€ä¸ªPodæˆ–è€…ä»»ä½•ä¸€ä¸ªAPIå¯¹è±¡è¢«æäº¤ç»™APIServerä¹‹åï¼Œæ€»æœ‰ä¸€äº›â€œåˆå§‹åŒ–â€æ€§è´¨çš„å·¥ä½œéœ€è¦åœ¨å®ƒä»¬è¢«Kubernetesé¡¹ç›®æ­£å¼å¤„ç†ä¹‹å‰è¿›è¡Œã€‚æ¯”å¦‚ï¼Œè‡ªåŠ¨ä¸ºæ‰€æœ‰PodåŠ ä¸ŠæŸäº›æ ‡ç­¾ï¼ˆLabelsï¼‰ã€‚</p><p>è€Œè¿™ä¸ªâ€œåˆå§‹åŒ–â€æ“ä½œçš„å®ç°ï¼Œå€ŸåŠ©çš„æ˜¯ä¸€ä¸ªå«ä½œAdmissionçš„åŠŸèƒ½ã€‚å®ƒå…¶å®æ˜¯Kubernetesé¡¹ç›®é‡Œä¸€ç»„è¢«ç§°ä¸ºAdmission Controllerçš„ä»£ç ï¼Œå¯ä»¥é€‰æ‹©æ€§åœ°è¢«ç¼–è¯‘è¿›APIServerä¸­ï¼Œåœ¨APIå¯¹è±¡åˆ›å»ºä¹‹åä¼šè¢«ç«‹åˆ»è°ƒç”¨åˆ°ã€‚</p><p>ä½†è¿™å°±æ„å‘³ç€ï¼Œå¦‚æœä½ ç°åœ¨æƒ³è¦æ·»åŠ ä¸€äº›è‡ªå·±çš„è§„åˆ™åˆ°Admission Controllerï¼Œå°±ä¼šæ¯”è¾ƒå›°éš¾ã€‚å› ä¸ºï¼Œè¿™è¦æ±‚é‡æ–°ç¼–è¯‘å¹¶é‡å¯APIServerã€‚æ˜¾ç„¶ï¼Œè¿™ç§ä½¿ç”¨æ–¹æ³•å¯¹Istioæ¥è¯´ï¼Œå½±å“å¤ªå¤§äº†ã€‚</p><p>æ‰€ä»¥ï¼ŒKubernetesé¡¹ç›®ä¸ºæˆ‘ä»¬é¢å¤–æä¾›äº†ä¸€ç§â€œçƒ­æ’æ‹”â€å¼çš„Admissionæœºåˆ¶ï¼Œå®ƒå°±æ˜¯Dynamic Admission Controlï¼Œä¹Ÿå«ä½œï¼šInitializerã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ã€‚æ¯”å¦‚ï¼Œæˆ‘æœ‰å¦‚ä¸‹æ‰€ç¤ºçš„ä¸€ä¸ªåº”ç”¨Podï¼š</p><pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: myapp-pod\n  labels:\n    app: myapp\nspec:\n  containers:\n  - name: myapp-container\n    image: busybox\n    command: ['sh', '-c', 'echo Hello Kubernetes! &amp;&amp; sleep 3600']\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªPodé‡Œé¢åªæœ‰ä¸€ä¸ªç”¨æˆ·å®¹å™¨ï¼Œå«ä½œï¼šmyapp-containerã€‚</p><p>æ¥ä¸‹æ¥ï¼ŒIstioé¡¹ç›®è¦åšçš„ï¼Œå°±æ˜¯åœ¨è¿™ä¸ªPod YAMLè¢«æäº¤ç»™Kubernetesä¹‹åï¼Œåœ¨å®ƒå¯¹åº”çš„APIå¯¹è±¡é‡Œè‡ªåŠ¨åŠ ä¸ŠEnvoyå®¹å™¨çš„é…ç½®ï¼Œä½¿è¿™ä¸ªå¯¹è±¡å˜æˆå¦‚ä¸‹æ‰€ç¤ºçš„æ ·å­ï¼š</p><pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: myapp-pod\n  labels:\n    app: myapp\nspec:\n  containers:\n  - name: myapp-container\n    image: busybox\n    command: ['sh', '-c', 'echo Hello Kubernetes! &amp;&amp; sleep 3600']\n  - name: envoy\n    image: lyft/envoy:845747b88f102c0fd262ab234308e9e22f693a1\n    command: [&quot;/usr/local/bin/envoy&quot;]\n    ...\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œè¢«Istioå¤„ç†åçš„è¿™ä¸ªPodé‡Œï¼Œé™¤äº†ç”¨æˆ·è‡ªå·±å®šä¹‰çš„myapp-containerå®¹å™¨ä¹‹å¤–ï¼Œå¤šå‡ºäº†ä¸€ä¸ªå«ä½œenvoyçš„å®¹å™¨ï¼Œå®ƒå°±æ˜¯Istioè¦ä½¿ç”¨çš„Envoyä»£ç†ã€‚</p><p>é‚£ä¹ˆï¼ŒIstioåˆæ˜¯å¦‚ä½•åœ¨ç”¨æˆ·å®Œå…¨ä¸çŸ¥æƒ…çš„å‰æä¸‹å®Œæˆè¿™ä¸ªæ“ä½œçš„å‘¢ï¼Ÿ</p><p>Istioè¦åšçš„ï¼Œå°±æ˜¯ç¼–å†™ä¸€ä¸ªç”¨æ¥ä¸ºPodâ€œè‡ªåŠ¨æ³¨å…¥â€Envoyå®¹å™¨çš„Initializerã€‚</p><p><strong>é¦–å…ˆï¼ŒIstioä¼šå°†è¿™ä¸ªEnvoyå®¹å™¨æœ¬èº«çš„å®šä¹‰ï¼Œä»¥ConfigMapçš„æ–¹å¼ä¿å­˜åœ¨Kuberneteså½“ä¸­</strong>ã€‚è¿™ä¸ªConfigMapï¼ˆåå«ï¼šenvoy-initializerï¼‰çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: envoy-initializer\ndata:\n  config: |\n    containers:\n      - name: envoy\n        image: lyft/envoy:845747db88f102c0fd262ab234308e9e22f693a1\n        command: [&quot;/usr/local/bin/envoy&quot;]\n        args:\n          - &quot;--concurrency 4&quot;\n          - &quot;--config-path /etc/envoy/envoy.json&quot;\n          - &quot;--mode serve&quot;\n        ports:\n          - containerPort: 80\n            protocol: TCP\n        resources:\n          limits:\n            cpu: &quot;1000m&quot;\n            memory: &quot;512Mi&quot;\n          requests:\n            cpu: &quot;100m&quot;\n            memory: &quot;64Mi&quot;\n        volumeMounts:\n          - name: envoy-conf\n            mountPath: /etc/envoy\n    volumes:\n      - name: envoy-conf\n        configMap:\n          name: envoy\n</code></pre><p>ç›¸ä¿¡ä½ å·²ç»æ³¨æ„åˆ°äº†ï¼Œè¿™ä¸ªConfigMapçš„dataéƒ¨åˆ†ï¼Œæ­£æ˜¯ä¸€ä¸ªPodå¯¹è±¡çš„ä¸€éƒ¨åˆ†å®šä¹‰ã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Envoyå®¹å™¨å¯¹åº”çš„containerså­—æ®µï¼Œä»¥åŠä¸€ä¸ªç”¨æ¥å£°æ˜Envoyé…ç½®æ–‡ä»¶çš„volumeså­—æ®µã€‚</p><p>ä¸éš¾æƒ³åˆ°ï¼ŒInitializerè¦åšçš„å·¥ä½œï¼Œå°±æ˜¯æŠŠè¿™éƒ¨åˆ†Envoyç›¸å…³çš„å­—æ®µï¼Œè‡ªåŠ¨æ·»åŠ åˆ°ç”¨æˆ·æäº¤çš„Podçš„APIå¯¹è±¡é‡Œã€‚å¯æ˜¯ï¼Œç”¨æˆ·æäº¤çš„Podé‡Œæœ¬æ¥å°±æœ‰containerså­—æ®µå’Œvolumeså­—æ®µï¼Œæ‰€ä»¥Kubernetesåœ¨å¤„ç†è¿™æ ·çš„æ›´æ–°è¯·æ±‚æ—¶ï¼Œå°±å¿…é¡»ä½¿ç”¨ç±»ä¼¼äºgit mergeè¿™æ ·çš„æ“ä½œï¼Œæ‰èƒ½å°†è¿™ä¸¤éƒ¨åˆ†å†…å®¹åˆå¹¶åœ¨ä¸€èµ·ã€‚</p><p>æ‰€ä»¥è¯´ï¼Œåœ¨Initializeræ›´æ–°ç”¨æˆ·çš„Podå¯¹è±¡çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨PATCH APIæ¥å®Œæˆã€‚è€Œè¿™ç§PATCH APIï¼Œæ­£æ˜¯å£°æ˜å¼APIæœ€ä¸»è¦çš„èƒ½åŠ›ã€‚</p><p><strong>æ¥ä¸‹æ¥ï¼ŒIstioå°†ä¸€ä¸ªç¼–å†™å¥½çš„Initializerï¼Œä½œä¸ºä¸€ä¸ªPodéƒ¨ç½²åœ¨Kubernetesä¸­</strong>ã€‚è¿™ä¸ªPodçš„å®šä¹‰éå¸¸ç®€å•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  labels:\n    app: envoy-initializer\n  name: envoy-initializer\nspec:\n  containers:\n    - name: envoy-initializer\n      image: envoy-initializer:0.0.1\n      imagePullPolicy: Always\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªenvoy-initializerä½¿ç”¨çš„envoy-initializer:0.0.1é•œåƒï¼Œå°±æ˜¯ä¸€ä¸ªäº‹å…ˆç¼–å†™å¥½çš„â€œè‡ªå®šä¹‰æ§åˆ¶å™¨â€ï¼ˆCustom Controllerï¼‰ï¼Œæˆ‘å°†ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®²è§£å®ƒçš„ç¼–å†™æ–¹æ³•ã€‚è€Œåœ¨è¿™é‡Œï¼Œæˆ‘è¦å…ˆä¸ºä½ è§£é‡Šä¸€ä¸‹è¿™ä¸ªæ§åˆ¶å™¨çš„ä¸»è¦åŠŸèƒ½ã€‚</p><p>æˆ‘æ›¾åœ¨ç¬¬16ç¯‡æ–‡ç« <a href=\"https://time.geekbang.org/column/article/40583\">ã€Šç¼–æ’å…¶å®å¾ˆç®€å•ï¼šè°ˆè°ˆâ€œæ§åˆ¶å™¨â€æ¨¡å‹ã€‹</a>ä¸­å’Œä½ åˆ†äº«è¿‡ï¼Œä¸€ä¸ªKubernetesçš„æ§åˆ¶å™¨ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªâ€œæ­»å¾ªç¯â€ï¼šå®ƒä¸æ–­åœ°è·å–â€œå®é™…çŠ¶æ€â€ï¼Œç„¶åä¸â€œæœŸæœ›çŠ¶æ€â€ä½œå¯¹æ¯”ï¼Œå¹¶ä»¥æ­¤ä¸ºä¾æ®å†³å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚</p><p>è€ŒInitializerçš„æ§åˆ¶å™¨ï¼Œä¸æ–­è·å–åˆ°çš„â€œå®é™…çŠ¶æ€â€ï¼Œå°±æ˜¯ç”¨æˆ·æ–°åˆ›å»ºçš„Podã€‚è€Œå®ƒçš„â€œæœŸæœ›çŠ¶æ€â€ï¼Œåˆ™æ˜¯ï¼šè¿™ä¸ªPodé‡Œè¢«æ·»åŠ äº†Envoyå®¹å™¨çš„å®šä¹‰ã€‚</p><p>æˆ‘è¿˜æ˜¯ç”¨ä¸€æ®µGoè¯­è¨€é£æ ¼çš„ä¼ªä»£ç ï¼Œæ¥ä¸ºä½ æè¿°è¿™ä¸ªæ§åˆ¶é€»è¾‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>for {\n  // è·å–æ–°åˆ›å»ºçš„Pod\n  pod := client.GetLatestPod()\n  // Diffä¸€ä¸‹ï¼Œæ£€æŸ¥æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡\n  if !isInitialized(pod) {\n    // æ²¡æœ‰ï¼Ÿé‚£å°±æ¥åˆå§‹åŒ–ä¸€ä¸‹\n    doSomething(pod)\n  }\n}\n</code></pre><ul>\n<li>å¦‚æœè¿™ä¸ªPodé‡Œé¢å·²ç»æ·»åŠ è¿‡Envoyå®¹å™¨ï¼Œé‚£ä¹ˆå°±â€œæ”¾è¿‡â€è¿™ä¸ªPodï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªæ£€æŸ¥å‘¨æœŸã€‚</li>\n<li>è€Œå¦‚æœè¿˜æ²¡æœ‰æ·»åŠ è¿‡Envoyå®¹å™¨çš„è¯ï¼Œå®ƒå°±è¦è¿›è¡ŒInitializeæ“ä½œäº†ï¼Œå³ï¼šä¿®æ”¹è¯¥Podçš„APIå¯¹è±¡ï¼ˆdoSomethingå‡½æ•°ï¼‰ã€‚</li>\n</ul><p>è¿™æ—¶å€™ï¼Œä½ åº”è¯¥ç«‹åˆ»èƒ½æƒ³åˆ°ï¼ŒIstioè¦å¾€è¿™ä¸ªPodé‡Œåˆå¹¶çš„å­—æ®µï¼Œæ­£æ˜¯æˆ‘ä»¬ä¹‹å‰ä¿å­˜åœ¨envoy-initializerè¿™ä¸ªConfigMapé‡Œçš„æ•°æ®ï¼ˆå³ï¼šå®ƒçš„dataå­—æ®µçš„å€¼ï¼‰ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨Initializeræ§åˆ¶å™¨çš„å·¥ä½œé€»è¾‘é‡Œï¼Œå®ƒé¦–å…ˆä¼šä»APIServerä¸­æ‹¿åˆ°è¿™ä¸ªConfigMapï¼š</p><pre><code>func doSomething(pod) {\n  cm := client.Get(ConfigMap, &quot;envoy-initializer&quot;)\n}\n</code></pre><p>ç„¶åï¼ŒæŠŠè¿™ä¸ªConfigMapé‡Œå­˜å‚¨çš„containerså’Œvolumeså­—æ®µï¼Œç›´æ¥æ·»åŠ è¿›ä¸€ä¸ªç©ºçš„Podå¯¹è±¡é‡Œï¼š</p><pre><code>func doSomething(pod) {\n  cm := client.Get(ConfigMap, &quot;envoy-initializer&quot;)\n  \n  newPod := Pod{}\n  newPod.Spec.Containers = cm.Containers\n  newPod.Spec.Volumes = cm.Volumes\n}\n</code></pre><p>ç°åœ¨ï¼Œå…³é”®æ¥äº†ã€‚</p><p>Kubernetesçš„APIåº“ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–¹æ³•ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨æ–°æ—§ä¸¤ä¸ªPodå¯¹è±¡ï¼Œç”Ÿæˆä¸€ä¸ªTwoWayMergePatchï¼š</p><pre><code>func doSomething(pod) {\n  cm := client.Get(ConfigMap, &quot;envoy-initializer&quot;)\n\n  newPod := Pod{}\n  newPod.Spec.Containers = cm.Containers\n  newPod.Spec.Volumes = cm.Volumes\n\n  // ç”Ÿæˆpatchæ•°æ®\n  patchBytes := strategicpatch.CreateTwoWayMergePatch(pod, newPod)\n\n  // å‘èµ·PATCHè¯·æ±‚ï¼Œä¿®æ”¹è¿™ä¸ªpodå¯¹è±¡\n  client.Patch(pod.Name, patchBytes)\n}\n</code></pre><p><strong>æœ‰äº†è¿™ä¸ªTwoWayMergePatchä¹‹åï¼ŒInitializerçš„ä»£ç å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªpatchçš„æ•°æ®ï¼Œè°ƒç”¨Kubernetesçš„Clientï¼Œå‘èµ·ä¸€ä¸ªPATCHè¯·æ±‚</strong>ã€‚</p><p>è¿™æ ·ï¼Œä¸€ä¸ªç”¨æˆ·æäº¤çš„Podå¯¹è±¡é‡Œï¼Œå°±ä¼šè¢«è‡ªåŠ¨åŠ ä¸ŠEnvoyå®¹å™¨ç›¸å…³çš„å­—æ®µã€‚</p><p>å½“ç„¶ï¼ŒKubernetesè¿˜å…è®¸ä½ é€šè¿‡é…ç½®ï¼Œæ¥æŒ‡å®šè¦å¯¹ä»€ä¹ˆæ ·çš„èµ„æºè¿›è¡Œè¿™ä¸ªInitializeæ“ä½œï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><pre><code>apiVersion: admissionregistration.k8s.io/v1alpha1\nkind: InitializerConfiguration\nmetadata:\n  name: envoy-config\ninitializers:\n  // è¿™ä¸ªåå­—å¿…é¡»è‡³å°‘åŒ…æ‹¬ä¸¤ä¸ª &quot;.&quot;\n  - name: envoy.initializer.kubernetes.io\n    rules:\n      - apiGroups:\n          - &quot;&quot; // å‰é¢è¯´è¿‡ï¼Œ &quot;&quot;å°±æ˜¯core API Groupçš„æ„æ€\n        apiVersions:\n          - v1\n        resources:\n          - pods\n</code></pre><p>è¿™ä¸ªé…ç½®ï¼Œå°±æ„å‘³ç€Kubernetesè¦å¯¹æ‰€æœ‰çš„Podè¿›è¡Œè¿™ä¸ªInitializeæ“ä½œï¼Œå¹¶ä¸”ï¼Œæˆ‘ä»¬æŒ‡å®šäº†è´Ÿè´£è¿™ä¸ªæ“ä½œçš„Initializerï¼Œåå«ï¼šenvoy-initializerã€‚</p><p>è€Œä¸€æ—¦è¿™ä¸ªInitializerConfigurationè¢«åˆ›å»ºï¼ŒKuberneteså°±ä¼šæŠŠè¿™ä¸ªInitializerçš„åå­—ï¼ŒåŠ åœ¨æ‰€æœ‰æ–°åˆ›å»ºçš„Podçš„Metadataä¸Šï¼Œæ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  initializers:\n    pending:\n      - name: envoy.initializer.kubernetes.io\n  name: myapp-pod\n  labels:\n    app: myapp\n...\n</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„Podï¼Œéƒ½ä¼šè‡ªåŠ¨æºå¸¦äº†metadata.initializers.pendingçš„Metadataä¿¡æ¯ã€‚</p><p>è¿™ä¸ªMetadataï¼Œæ­£æ˜¯æ¥ä¸‹æ¥Initializerçš„æ§åˆ¶å™¨åˆ¤æ–­è¿™ä¸ªPodæœ‰æ²¡æœ‰æ‰§è¡Œè¿‡è‡ªå·±æ‰€è´Ÿè´£çš„åˆå§‹åŒ–æ“ä½œçš„é‡è¦ä¾æ®ï¼ˆä¹Ÿå°±æ˜¯å‰é¢ä¼ªä»£ç ä¸­isInitialized()æ–¹æ³•çš„å«ä¹‰ï¼‰ã€‚</p><p><strong>è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå½“ä½ åœ¨Initializeré‡Œå®Œæˆäº†è¦åšçš„æ“ä½œåï¼Œä¸€å®šè¦è®°å¾—å°†è¿™ä¸ªmetadata.initializers.pendingæ ‡å¿—æ¸…é™¤æ‰ã€‚è¿™ä¸€ç‚¹ï¼Œä½ åœ¨ç¼–å†™Initializerä»£ç çš„æ—¶å€™ä¸€å®šè¦éå¸¸æ³¨æ„ã€‚</strong></p><p>æ­¤å¤–ï¼Œé™¤äº†ä¸Šé¢çš„é…ç½®æ–¹æ³•ï¼Œä½ è¿˜å¯ä»¥åœ¨å…·ä½“çš„Podçš„Annotationé‡Œæ·»åŠ ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„å­—æ®µï¼Œä»è€Œå£°æ˜è¦ä½¿ç”¨æŸä¸ªInitializerï¼š</p><pre><code>apiVersion: v1\nkind: Pod\nmetadata\n  annotations:\n    &quot;initializer.kubernetes.io/envoy&quot;: &quot;true&quot;\n    ...\n</code></pre><p>åœ¨è¿™ä¸ªPodé‡Œï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªAnnotationï¼Œå†™æ˜ï¼š <code>initializer.kubernetes.io/envoy=true</code>ã€‚è¿™æ ·ï¼Œå°±ä¼šä½¿ç”¨åˆ°æˆ‘ä»¬å‰é¢æ‰€å®šä¹‰çš„envoy-initializeräº†ã€‚</p><p>ä»¥ä¸Šï¼Œå°±æ˜¯å…³äºInitializeræœ€åŸºæœ¬çš„å·¥ä½œåŸç†å’Œä½¿ç”¨æ–¹æ³•äº†ã€‚ç›¸ä¿¡ä½ æ­¤æ—¶å·²ç»æ˜ç™½ï¼Œ<strong>Istioé¡¹ç›®çš„æ ¸å¿ƒï¼Œå°±æ˜¯ç”±æ— æ•°ä¸ªè¿è¡Œåœ¨åº”ç”¨Podä¸­çš„Envoyå®¹å™¨ç»„æˆçš„æœåŠ¡ä»£ç†ç½‘æ ¼</strong>ã€‚è¿™ä¹Ÿæ­£æ˜¯Service Meshçš„å«ä¹‰ã€‚</p><blockquote>\n<p>å¤‡æ³¨ï¼šå¦‚æœä½ å¯¹è¿™ä¸ªDemoæ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨<a href=\"https://github.com/resouer/kubernetes-initializer-tutorial\">è¿™ä¸ªGitHubé“¾æ¥</a>é‡Œæ‰¾åˆ°å®ƒçš„æ‰€æœ‰æºç å’Œæ–‡æ¡£ã€‚è¿™ä¸ªDemoï¼Œæ˜¯æˆ‘forkè‡ªKelsey Hightowerçš„ä¸€ä¸ªåŒåçš„Demoã€‚</p>\n</blockquote><p>è€Œè¿™ä¸ªæœºåˆ¶å¾—ä»¥å®ç°çš„åŸç†ï¼Œæ­£æ˜¯å€ŸåŠ©äº†Kubernetesèƒ½å¤Ÿå¯¹APIå¯¹è±¡è¿›è¡Œåœ¨çº¿æ›´æ–°çš„èƒ½åŠ›ï¼Œè¿™ä¹Ÿæ­£æ˜¯<strong>Kubernetesâ€œå£°æ˜å¼APIâ€çš„ç‹¬ç‰¹ä¹‹å¤„ï¼š</strong></p><ul>\n<li>é¦–å…ˆï¼Œæ‰€è°“â€œå£°æ˜å¼â€ï¼ŒæŒ‡çš„å°±æ˜¯æˆ‘åªéœ€è¦æäº¤ä¸€ä¸ªå®šä¹‰å¥½çš„APIå¯¹è±¡æ¥â€œå£°æ˜â€ï¼Œæˆ‘æ‰€æœŸæœ›çš„çŠ¶æ€æ˜¯ä»€ä¹ˆæ ·å­ã€‚</li>\n<li>å…¶æ¬¡ï¼Œâ€œå£°æ˜å¼APIâ€å…è®¸æœ‰å¤šä¸ªAPIå†™ç«¯ï¼Œä»¥PATCHçš„æ–¹å¼å¯¹APIå¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ— éœ€å…³å¿ƒæœ¬åœ°åŸå§‹YAMLæ–‡ä»¶çš„å†…å®¹ã€‚</li>\n<li>æœ€åï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ï¼Œæœ‰äº†ä¸Šè¿°ä¸¤ä¸ªèƒ½åŠ›ï¼ŒKubernetesé¡¹ç›®æ‰å¯ä»¥åŸºäºå¯¹APIå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼Œåœ¨å®Œå…¨æ— éœ€å¤–ç•Œå¹²é¢„çš„æƒ…å†µä¸‹ï¼Œå®Œæˆå¯¹â€œå®é™…çŠ¶æ€â€å’Œâ€œæœŸæœ›çŠ¶æ€â€çš„è°ƒè°ï¼ˆReconcileï¼‰è¿‡ç¨‹ã€‚</li>\n</ul><p>æ‰€ä»¥è¯´ï¼Œ<strong>å£°æ˜å¼APIï¼Œæ‰æ˜¯Kubernetesé¡¹ç›®ç¼–æ’èƒ½åŠ›â€œèµ–ä»¥ç”Ÿå­˜â€çš„æ ¸å¿ƒæ‰€åœ¨</strong>ï¼Œå¸Œæœ›ä½ èƒ½å¤Ÿè®¤çœŸç†è§£ã€‚</p><p>æ­¤å¤–ï¼Œä¸éš¾çœ‹åˆ°ï¼Œæ— è®ºæ˜¯å¯¹sidecarå®¹å™¨çš„å·§å¦™è®¾è®¡ï¼Œè¿˜æ˜¯å¯¹Initializerçš„åˆç†åˆ©ç”¨ï¼ŒIstioé¡¹ç›®çš„è®¾è®¡ä¸å®ç°ï¼Œå…¶å®éƒ½ä¾æ‰˜äºKubernetesçš„å£°æ˜å¼APIå’Œå®ƒæ‰€æä¾›çš„å„ç§ç¼–æ’èƒ½åŠ›ã€‚å¯ä»¥è¯´ï¼ŒIstioæ˜¯åœ¨Kubernetesé¡¹ç›®ä½¿ç”¨ä¸Šçš„ä¸€ä½â€œé›†å¤§æˆè€…â€ã€‚</p><blockquote>\n<p>è¦çŸ¥é“ï¼Œä¸€ä¸ªIstioé¡¹ç›®éƒ¨ç½²å®Œæˆåï¼Œä¼šåœ¨Kubernetesé‡Œåˆ›å»ºå¤§çº¦43ä¸ªAPIå¯¹è±¡ã€‚</p>\n</blockquote><p>æ‰€ä»¥ï¼ŒKubernetesç¤¾åŒºä¹Ÿçœ‹å¾—å¾ˆæ˜ç™½ï¼šIstioé¡¹ç›®æœ‰å¤šç«çƒ­ï¼Œå°±è¯´æ˜Kubernetesè¿™å¥—â€œå£°æ˜å¼APIâ€æœ‰å¤šæˆåŠŸã€‚è¿™ï¼Œæ—¢æ˜¯Google Cloudå–œé—»ä¹è§çš„äº‹æƒ…ï¼Œä¹Ÿæ˜¯Istioé¡¹ç›®ä¸€æ¨å‡ºå°±è¢«Googleå…¬å¸å’Œæ•´ä¸ªæŠ€æœ¯åœˆå„¿çƒ­æ§çš„é‡è¦åŸå› ã€‚</p><p>è€Œåœ¨ä½¿ç”¨Initializerçš„æµç¨‹ä¸­ï¼Œæœ€æ ¸å¿ƒçš„æ­¥éª¤ï¼Œè«è¿‡äºInitializerâ€œè‡ªå®šä¹‰æ§åˆ¶å™¨â€çš„ç¼–å†™è¿‡ç¨‹ã€‚å®ƒéµå¾ªçš„ï¼Œæ­£æ˜¯æ ‡å‡†çš„â€œKubernetesç¼–ç¨‹èŒƒå¼â€ï¼Œå³ï¼š</p><blockquote>\n<p><strong>å¦‚ä½•ä½¿ç”¨æ§åˆ¶å™¨æ¨¡å¼ï¼ŒåŒKubernetesé‡ŒAPIå¯¹è±¡çš„â€œå¢ã€åˆ ã€æ”¹ã€æŸ¥â€è¿›è¡Œåä½œï¼Œè¿›è€Œå®Œæˆç”¨æˆ·ä¸šåŠ¡é€»è¾‘çš„ç¼–å†™è¿‡ç¨‹ã€‚</strong></p>\n</blockquote><p>è¿™ï¼Œä¹Ÿæ­£æ˜¯æˆ‘è¦åœ¨åé¢æ–‡ç« ä¸­ä¸ºä½ è¯¦ç»†è®²è§£çš„å†…å®¹ã€‚</p><h2>æ€»ç»“</h2><p>åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸ºä½ é‡ç‚¹è®²è§£äº†Kuberneteså£°æ˜å¼APIçš„å«ä¹‰ã€‚å¹¶ä¸”ï¼Œé€šè¿‡å¯¹Istioé¡¹ç›®çš„å‰–æï¼Œæˆ‘ä¸ºä½ è¯´æ˜äº†å®ƒä½¿ç”¨Kubernetesçš„Initializerç‰¹æ€§ï¼Œå®ŒæˆEnvoyå®¹å™¨â€œè‡ªåŠ¨æ³¨å…¥â€çš„åŸç†ã€‚</p><p>äº‹å®ä¸Šï¼Œä»â€œä½¿ç”¨Kuberneteséƒ¨ç½²ä»£ç â€ï¼Œåˆ°â€œä½¿ç”¨Kubernetesç¼–å†™ä»£ç â€çš„èœ•å˜è¿‡ç¨‹ï¼Œæ­£æ˜¯ä½ ä»ä¸€ä¸ªKubernetesç”¨æˆ·ï¼Œåˆ°Kubernetesç©å®¶çš„æ™‹çº§ä¹‹è·¯ã€‚</p><p>è€Œï¼Œå¦‚ä½•ç†è§£â€œKubernetesç¼–ç¨‹èŒƒå¼â€ï¼Œå¦‚ä½•ä¸ºKubernetesæ·»åŠ è‡ªå®šä¹‰APIå¯¹è±¡ï¼Œç¼–å†™è‡ªå®šä¹‰æ§åˆ¶å™¨ï¼Œæ­£æ˜¯è¿™ä¸ªæ™‹çº§è¿‡ç¨‹ä¸­çš„å…³é”®ç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘è¦åœ¨åé¢å‡ ç¯‡æ–‡ç« ä¸­åˆ†äº«çš„æ ¸å¿ƒå†…å®¹ã€‚</p><p>æ­¤å¤–ï¼ŒåŸºäºä»Šå¤©è¿™ç¯‡æ–‡ç« æ‰€è®²è¿°çš„Istioçš„å·¥ä½œåŸç†ï¼Œå°½ç®¡Istioé¡¹ç›®ä¸€ç›´å®£ç§°å®ƒå¯ä»¥è¿è¡Œåœ¨éKubernetesç¯å¢ƒä¸­ï¼Œä½†æˆ‘å¹¶ä¸å»ºè®®ä½ èŠ±å¤ªå¤šæ—¶é—´å»åšè¿™ä¸ªå°è¯•ã€‚</p><p>æ¯•ç«Ÿï¼Œæ— è®ºæ˜¯ä»æŠ€æœ¯å®ç°è¿˜æ˜¯åœ¨ç¤¾åŒºè¿ä½œä¸Šï¼ŒIstioä¸Kubernetesé¡¹ç›®ä¹‹é—´éƒ½æ˜¯ç´§å¯†çš„ã€å”‡é½¿ç›¸ä¾çš„å…³ç³»ã€‚å¦‚æœè„±ç¦»äº†Kubernetesé¡¹ç›®è¿™ä¸ªåŸºç¡€ï¼Œé‚£ä¹ˆè¿™æ¡åŸæœ¬å°±ä¸ç®—å¹³å¦çš„â€œå¾®æœåŠ¡â€ä¹‹è·¯ï¼Œææ€•ä¼šæ›´åŠ å›°éš¾é‡é‡ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>ä½ æ˜¯å¦å¯¹Envoyé¡¹ç›®åšè¿‡äº†è§£ï¼Ÿä½ è§‰å¾—ä¸ºä»€ä¹ˆå®ƒèƒ½å¤Ÿå‡»è´¥Nginxä»¥åŠHAProxyç­‰ç«å“ï¼Œæˆä¸ºService Meshä½“ç³»çš„æ ¸å¿ƒï¼Ÿ</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ ç»™æˆ‘ç•™è¨€ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p>","neighbors":{"left":{"article_title":"22 | æ’¬åŠ¨ç¦»çº¿ä¸šåŠ¡ï¼šJobä¸CronJob","id":41607},"right":{"article_title":"24 | æ·±å…¥è§£æå£°æ˜å¼APIï¼ˆä¸€ï¼‰ï¼šAPIå¯¹è±¡çš„å¥¥ç§˜","id":41876}},"comments":[{"had_liked":false,"id":43524,"user_name":"å‘¨é¾™äº­","can_delete":false,"product_type":"c1","uid":1004577,"ip_address":"","ucode":"21BD0DD15CFCA3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/21/8c13a2b4.jpg","comment_is_top":false,"comment_ctime":1543236327,"is_pvip":false,"replies":[{"id":"15726","content":"æ˜¯çš„","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1543371591,"ip_address":"","comment_id":43524,"utype":1}],"discussion_count":5,"race_medal":0,"score":"473989638887","product_id":100015201,"comment_content":"æ˜¯å› ä¸ºenvoyæä¾›äº†apiå½¢å¼çš„é…ç½®å…¥å£ï¼Œæ›´æ–¹ä¾¿åšæµé‡æ²»ç†","like_count":110,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430416,"discussion_content":"æ˜¯çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543371591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1971269,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/oltLEqTrmHm2aJP99BK6tHu5h7hp4aj08wR5Wt6H31iadFduDAVvjYKmhQ2nvGbLV3lkVdiat2GRasgWXoJeTibUg/132","nickname":"æ¨","note":"","ucode":"7EFEFE285975C6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":589136,"discussion_content":"ç›®å‰ä¸éœ€è¦æµé‡æ²»ç†  æš‚æ—¶æ²¡ä½¿ç”¨istio","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1664440917,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"æ¹–å—"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2254917,"avatar":"https://static001.geekbang.org/account/avatar/00/22/68/45/ddf89612.jpg","nickname":"bestgopher","note":"","ucode":"D89735C8CA9C6E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542803,"discussion_content":"ğŸ‚ğŸº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640849030,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1837179,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/08/7b/7f086546.jpg","nickname":"Alex","note":"","ucode":"70806CEA9AB15E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382763,"discussion_content":"ğŸ‚ğŸº","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625715349,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1260026,"avatar":"https://static001.geekbang.org/account/avatar/00/13/39/fa/a7edbc72.jpg","nickname":"å®‰æ’","note":"","ucode":"F78CFA9624CAEF","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":113140,"discussion_content":"ç‰›ğŸ‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577890424,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32522,"user_name":"è™è™â¤ï¸","can_delete":false,"product_type":"c1","uid":1086535,"ip_address":"","ucode":"157F261E80291A","user_header":"https://static001.geekbang.org/account/avatar/00/10/94/47/75875257.jpg","comment_is_top":false,"comment_ctime":1539600361,"is_pvip":false,"replies":[{"id":"11849","content":"istioä¸å°±æ˜¯ä¾‹å­ï¼Ÿç³»ç»Ÿé‡Œå®Œå…¨å¯ä»¥æœ‰å¥½å‡ ä¸ªinitializeråœ¨æ”¹åŒä¸€ä¸ªpodï¼Œä½ ç›´æ¥replaceäº†åˆ«äººè¿˜ç©ä¸ç©äº†ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539602696,"ip_address":"","comment_id":32522,"utype":1}],"discussion_count":10,"race_medal":0,"score":"306482278377","product_id":100015201,"comment_content":"è€å¸ˆï¼Œç”¨å£°æ˜å¼apiçš„å¥½å¤„æ²¡æœ‰ä½“ä¼šå¤ªæ·±åˆ»ã€‚<br>å¦‚æœåœ¨dosomethingä¸­mergeå‡ºæ–°çš„yamlï¼Œç„¶åç”¨replaceä¼šæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ<br>å¥½åƒåœ¨è¿™ç¯‡æ–‡ç« ä¸­ä»…ä»…æåˆ°å£°æ˜å¼çš„å¯ä»¥å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶å†™ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¼˜ç‚¹å—ï¼Ÿ<br>ä¹Ÿå°±æ˜¯è¯´ä¿®æ”¹å¯¹è±¡æ¯”æ›¿æ¢å¯¹è±¡çš„ä¼˜åŠ¿åœ¨å“ªï¼Ÿ","like_count":71,"discussions":[{"author":{"id":1203276,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5c/4c/ccf611c4.jpg","nickname":"miao linjie","note":"","ucode":"1C16D43A055213","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":227715,"discussion_content":"ä¸»è¦æ˜¯k8sçš„apiéƒ½ä¸æ˜¯åŒæ­¥çš„ï¼Œå¤šä¸ªæ§åˆ¶å™¨å¯ä»¥åŒæ—¶ä¿®æ”¹ä¸€ä¸ªpodã€‚ å¦‚æœä¸€ä¸ªæ§åˆ¶å™¨ä¿®æ”¹å®Œåå°±ç›´æ¥replaceæ‰äº†ï¼Œ é‚£å¾ˆå¤§å¯èƒ½ä¼šæŠŠå…¶ä»–æ§åˆ¶å™¨çš„ä¿®æ”¹è¦†ç›–æ‰ã€‚ ","likes_number":33,"is_delete":false,"is_hidden":false,"ctime":1586514441,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1203276,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5c/4c/ccf611c4.jpg","nickname":"miao linjie","note":"","ucode":"1C16D43A055213","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345146,"discussion_content":"å¦‚æœåŒæ—¶æœ‰æ§åˆ¶å™¨ä¿®æ”¹åŒä¸€ä¸ªpartå†…å®¹ï¼Œä¸çŸ¥é“ä¼šæ€ä¹ˆæ ·ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1611669294,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":227715,"ip_address":""},"score":345146,"extra":""},{"author":{"id":1292087,"avatar":"https://static001.geekbang.org/account/avatar/00/13/b7/37/0290ff6e.jpg","nickname":"Veitor","note":"","ucode":"3397AC6D239195","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1203276,"avatar":"https://static001.geekbang.org/account/avatar/00/12/5c/4c/ccf611c4.jpg","nickname":"miao linjie","note":"","ucode":"1C16D43A055213","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":370636,"discussion_content":"æ‰€ä»¥å£°æ˜å¼APIçš„æœ€ä¸»è¦çš„æœ¬è´¨å°±æ˜¯å…·æœ‰Mergeèƒ½åŠ›ï¼Ÿ","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1619488814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":227715,"ip_address":""},"score":370636,"extra":""}]},{"author":{"id":1651441,"avatar":"https://static001.geekbang.org/account/avatar/00/19/32/f1/fd24d52b.jpg","nickname":"é’ç¦¾qingh","note":"","ucode":"453FC435B03790","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334202,"discussion_content":"é‚£å°±ä¸ç©äº†","likes_number":6,"is_delete":false,"is_hidden":false,"ctime":1607763925,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1837179,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/08/7b/7f086546.jpg","nickname":"Alex","note":"","ucode":"70806CEA9AB15E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382764,"discussion_content":"å£°æ˜å¼APIçš„æœ€ä¸»è¦çš„æœ¬è´¨å°±æ˜¯å…·æœ‰Mergeèƒ½åŠ›","likes_number":5,"is_delete":false,"is_hidden":false,"ctime":1625715398,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426804,"discussion_content":"istioä¸å°±æ˜¯ä¾‹å­ï¼Ÿç³»ç»Ÿé‡Œå®Œå…¨å¯ä»¥æœ‰å¥½å‡ ä¸ªinitializeråœ¨æ”¹åŒä¸€ä¸ªpodï¼Œä½ ç›´æ¥replaceäº†åˆ«äººè¿˜ç©ä¸ç©äº†ï¼Ÿ","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1539602696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1145068,"avatar":"https://static001.geekbang.org/account/avatar/00/11/78/ec/f7f0d21a.jpg","nickname":"Dev-L","note":"","ucode":"485E940C3F17B9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":292422,"discussion_content":"patchçš„æ–¹å¼å¯ä»¥å…è®¸ä¸åŒçš„initializerä¿®æ”¹ä¸åŒçš„part","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1595221122,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"å›¢","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533343,"discussion_content":"å¤šä¸ªinitializerä¿®æ”¹åŒä¸€ä¸ªpodï¼Œåªä¼šmergeï¼Œä¸ä¼šè¦†ç›–ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1637841943,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1053419,"avatar":"https://static001.geekbang.org/account/avatar/00/10/12/eb/b2cba6c4.jpg","nickname":"å…´æµ©","note":"","ucode":"E0BE135E97FCE4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579422,"discussion_content":"patché¢å¤–æä¾›äº†å¾ˆå¤šäº†æ‰©å±•çš„é’©å­æµç¨‹ï¼Œreplaceå°±ç›´æ¥æš´åŠ›æ›¿æ¢äº†ï¼Œæ²¡æœ‰æ‰©å±•æ€§","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657441288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1017721,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/87/79/1fc93cbe.jpg","nickname":"tglgame","note":"","ucode":"827AB8769B8683","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":413910,"discussion_content":"æ„Ÿè§‰æœ‰äº›ç±»ä¼¼ä¹è§‚é”çš„æœºåˆ¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636606232,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32355,"user_name":"Geek_zz","can_delete":false,"product_type":"c1","uid":1130682,"ip_address":"","ucode":"A3AC7C2991B50D","user_header":"https://static001.geekbang.org/account/avatar/00/11/40/ba/2c8af305.jpg","comment_is_top":false,"comment_ctime":1539558958,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"199108054574","product_id":100015201,"comment_content":"å±…ç„¶çœ‹ä¸€éå°±è®°ä½äº†è¿™èŠ‚è¯¾çš„åŸç†","like_count":46},{"had_liked":false,"id":32524,"user_name":"swordholder","can_delete":false,"product_type":"c1","uid":1002569,"ip_address":"","ucode":"3D1361126AD3CB","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4c/49/d21c134f.jpg","comment_is_top":false,"comment_ctime":1539600893,"is_pvip":false,"replies":[{"id":"11856","content":"ä¸ä¼šå•Šã€‚æ³¨æ„çœ‹apiserverçš„æµç¨‹å›¾ï¼Œinitializerå‘ç”Ÿåœ¨admissioné˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µå®Œæˆåpodæ‰ä¼šåˆ›å»ºå‡ºæ¥ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539609316,"ip_address":"","comment_id":32524,"utype":1}],"discussion_count":2,"race_medal":0,"score":"181928227325","product_id":100015201,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼Œåœ¨envoy-initializerçš„â€œæ§åˆ¶å¾ªç¯â€ä¸­è·å–æ–°åˆ›å»ºçš„Podï¼Œè¿™ä¸ªPodæ˜¯å¦å·²ç»åœ¨æ­£å¸¸è¿è¡Œäº†ï¼Ÿ<br>Initializer æäº¤patchä¿®æ”¹Podå¯¹è±¡ï¼ŒKuberneteså‘ç°Podæ›´æ–°ï¼Œç„¶åä»¥â€œæ»šåŠ¨å‡çº§â€çš„æ–¹å¼æ›´æ–°è¿è¡Œä¸­çš„Podï¼Ÿ","like_count":42,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426806,"discussion_content":"ä¸ä¼šå•Šã€‚æ³¨æ„çœ‹apiserverçš„æµç¨‹å›¾ï¼Œinitializerå‘ç”Ÿåœ¨admissioné˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µå®Œæˆåpodæ‰ä¼šåˆ›å»ºå‡ºæ¥ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539609316,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"å›¢","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533344,"discussion_content":"è¢«initializerå½±å“çš„podåœ¨è‡ªåŠ¨åŠ çš„labelé‡Œæœ‰pendingå­—æ ·ï¼ŒçŒœæµ‹åº”è¯¥æ˜¯åˆ›å»ºè¿‡ç¨‹è¢«pendingä½äº†ï¼Œç­‰å¾…initializeråšäº‹ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1637842070,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251705,"user_name":"ch_ort","can_delete":false,"product_type":"c1","uid":1580926,"ip_address":"","ucode":"B79746E687F29E","user_header":"","comment_is_top":false,"comment_ctime":1601803371,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"164810560619","product_id":100015201,"comment_content":"é€šä¿—åœ°è¯´ï¼šå¦‚æœè¦æŠŠä¸€ä¸ªä¸œè¥¿å­˜å…¥å†°ç®±ã€‚å‘½ä»¤å¼APIéœ€è¦åšçš„æ˜¯ï¼šæ‰“å¼€å†°ç®± -&gt; æ”¾å…¥ä¸œè¥¿ -&gt; å…³æ‰å†°ç®±ã€‚è€Œå£°æ˜å¼å°±æ˜¯ï¼š è¿™ä¸ªä¸œè¥¿åœ¨å†°ç®±é‡Œã€‚<br><br><br><br>å‘½ä»¤å¼è¯·æ±‚ä¸å£°æ˜å¼è¯·æ±‚ï¼š<br>ï¼ˆ1ï¼‰æœåŠ¡å¯¹äºå‘½ä»¤å¼è¯·æ±‚ï¼Œä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªå†™è¯·æ±‚ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´å†²çª<br>ï¼ˆ2ï¼‰æœåŠ¡å¯¹äºå£°æ˜å¼è¯·æ±‚ï¼Œä¸€æ¬¡èƒ½å¤„ç†å¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”å…·å¤‡Mergeçš„èƒ½åŠ›<br><br>kubectl replaceå‘½ä»¤ä¸kubectl applyå‘½ä»¤çš„æœ¬è´¨åŒºåˆ«åœ¨äºï¼Œkubectl replaceçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ä½¿ç”¨æ–°çš„YAMLæ–‡ä»¶ä¸­çš„APIå¯¹è±¡ï¼Œæ›¿æ¢åŸæœ‰çš„APIå¯¹è±¡ï¼›è€Œkubectl applyï¼Œåˆ™æ˜¯æ‰§è¡Œäº†ä¸€ä¸ªå¯¹åŸæœ‰APIå¯¹è±¡çš„PATCHï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰æ“ä½œ<br><br>å£°æ˜å¼APIç‰¹ç‚¹ï¼š<br>ï¼ˆ1ï¼‰æˆ‘ä»¬åªéœ€è¦æäº¤ä¸€ä¸ªå®šä¹‰å¥½çš„APIå¯¹è±¡æ¥â€œå£°æ˜â€ï¼Œæˆ‘æ‰€æœŸæœ›çš„çŠ¶æ€æ˜¯ä»€ä¹ˆæ ·å­<br>ï¼ˆ2ï¼‰å£°æ˜å¼APIå…è®¸ç”±å¤šä¸ªAPIå†™ç«¯ï¼Œä»¥PATCHçš„æ–¹å¼å¯¹APIå¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ— éœ€å…³å¿ƒæœ¬åœ°åŸå§‹YAMLæ–‡ä»¶çš„å†…å®¹<br>ï¼ˆ3ï¼‰æœ‰äº†ä¸Šè¿°ä¸¤ä¸ªèƒ½åŠ›ï¼ŒKubernetesé¡¹ç›®æ‰å¯ä»¥ç»™äºˆå¯¹APIå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼Œåœ¨å®Œå…¨æ— éœ€å¤–ç•Œå¹²é¢„çš„æƒ…å†µä¸‹ï¼Œå®Œæˆå¯¹â€œå®é™…çŠ¶æ€â€å’Œâ€œæœŸæœ›çŠ¶æ€â€çš„è°ƒè°ï¼ˆReconcileï¼‰è¿‡ç¨‹<br><br><br>","like_count":38},{"had_liked":false,"id":32753,"user_name":"è™è™â¤ï¸","can_delete":false,"product_type":"c1","uid":1086535,"ip_address":"","ucode":"157F261E80291A","user_header":"https://static001.geekbang.org/account/avatar/00/10/94/47/75875257.jpg","comment_is_top":false,"comment_ctime":1539688035,"is_pvip":false,"replies":[{"id":"11983","content":"æ˜¯å•Š","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539745783,"ip_address":"","comment_id":32753,"utype":1}],"discussion_count":2,"race_medal":0,"score":"160453477987","product_id":100015201,"comment_content":"kubectl apply æ˜¯é€šè¿‡mvcc å®ç°çš„å¹¶å‘å†™å—ï¼Ÿ","like_count":37,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426885,"discussion_content":"æ˜¯å•Š","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1539745783,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2268436,"avatar":"","nickname":"binf","note":"","ucode":"AE6D7CD6CAFE4D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542682,"discussion_content":"mvccè¿˜èƒ½å¹¶å‘å†™ï¼Ÿã€‚ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640827620,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32607,"user_name":"æ··æ²Œæ¸ºæ— æ","can_delete":false,"product_type":"c1","uid":1221896,"ip_address":"","ucode":"A8517768BF1E77","user_header":"https://static001.geekbang.org/account/avatar/00/12/a5/08/10b18682.jpg","comment_is_top":false,"comment_ctime":1539625732,"is_pvip":false,"replies":[{"id":"11898","content":"å°±æ˜¯è¿™ä¹ˆå›äº‹å„¿","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539652716,"ip_address":"","comment_id":32607,"utype":1}],"discussion_count":2,"race_medal":0,"score":"151863481092","product_id":100015201,"comment_content":"dynamic admission controlæœ‰ç‚¹åƒé˜²ç«å¢™çš„DNATï¼Œæ•°æ®åŒ…å³å°†è¿›å…¥è·¯ç”±è¡¨çš„ç¬é—´è¢«ä¿®æ”¹äº†ç›®çš„åœ°å€ï¼Œè¿™æ ·è·¯ç”±è¡¨å°±å¯¹æ•°æ®åŒ…çš„ä¿®æ”¹[æ— æ„Ÿ]ã€‚<br>patchå°±åƒå¤šäººä½¿ç”¨gitæ¥è¿›è¡Œæ–‡ä»¶çš„&quot;åˆå¹¶å‹&quot;ä¿®æ”¹ã€‚","like_count":35,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426832,"discussion_content":"å°±æ˜¯è¿™ä¹ˆå›äº‹å„¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539652716,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1934785,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Pu41KPIhAp72l0N7kOFL738owSAIT5EyH0oUUMacQRWzeFV77QDjSDNTSFNvjNZib1myibvxAfQAsAY5KzsIia73w/132","nickname":"ç‹é¹","note":"","ucode":"B79003C125BE00","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":576840,"discussion_content":"åˆšæƒ³è¯´ç±»ä¼¼äºgitæäº¤åˆå¹¶","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655807709,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32588,"user_name":"huan","can_delete":false,"product_type":"c1","uid":1012286,"ip_address":"","ucode":"46CB95F6E4E5FF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/3e/534db55d.jpg","comment_is_top":false,"comment_ctime":1539616972,"is_pvip":false,"replies":[{"id":"11899","content":"è¿™ç¡®å®æ˜¯ä¸€ä¸ªå› ç´ ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539652798,"ip_address":"","comment_id":32588,"utype":1}],"discussion_count":4,"race_medal":0,"score":"96028897484","product_id":100015201,"comment_content":"åˆæŸ¥äº†ä¸‹envoyçš„è®¾è®¡ï¼Œæ„Ÿè§‰å®ƒæ”¯æŒçƒ­æ›´æ–°å’Œçƒ­é‡å¯ï¼Œåº”è¯¥å¾ˆé€‚åˆå£°æ˜å¼è§„åˆ™çš„å¼€å‘èŒƒå¼ï¼Œè¿™å¯ä»¥çœ‹åšä¸€ç§ä¼˜åŠ¿ï¼Œç›¸æ¯”è€Œè¨€ï¼Œnginxçš„reloadéœ€è¦æŠŠworkerè¿›ç¨‹é€€å‡ºï¼Œæ¯”è¾ƒé¢å‘å‘½ä»¤","like_count":22,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426826,"discussion_content":"è¿™ç¡®å®æ˜¯ä¸€ä¸ªå› ç´ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539652798,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2640738,"avatar":"https://static001.geekbang.org/account/avatar/00/28/4b/62/b060f4b5.jpg","nickname":"Nightwish","note":"","ucode":"FC4C213C4063E0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":386182,"discussion_content":"nginx çš„reload ä¸ä¼šå°†workè¿›ç¨‹ä¸­çš„ä½œä¸šæ‰“æ–­å§ï¼Ÿenvoyçš„çƒ­é‡å¯ä¸æƒ³nginx çš„reload?","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627457153,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1261493,"avatar":"https://static001.geekbang.org/account/avatar/00/13/3f/b5/5fe77e16.jpg","nickname":"ä¸ç»æ„é—´","note":"","ucode":"C39D98697ACB8B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2640738,"avatar":"https://static001.geekbang.org/account/avatar/00/28/4b/62/b060f4b5.jpg","nickname":"Nightwish","note":"","ucode":"FC4C213C4063E0","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409121,"discussion_content":"ä¸ªäººç†è§£ã€‚k8sçš„å£°æ˜å¼apiéƒ½æ˜¯ä½œç”¨æ˜¯ä½“ç°åœ¨æ§åˆ¶å¾ªç¯é‡Œçš„ï¼Œä¸‹æ¬¡å¾ªç¯å°±å¯ä»¥åº”ç”¨äº†ã€‚ä¸åƒnginxéœ€è¦åˆ›å»ºworkè¿›ç¨‹ï¼Œä¸”è¿™äº›è¿›ç¨‹æ˜¯è¦å®æ—¶æä¾›æœåŠ¡çš„ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635383286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":386182,"ip_address":""},"score":409121,"extra":""}]},{"author":{"id":1313840,"avatar":"https://static001.geekbang.org/account/avatar/00/14/0c/30/bb4bfe9d.jpg","nickname":"lyonger","note":"","ucode":"E89A75DADEA2A1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":345147,"discussion_content":"è¯·é—®çƒ­æ›´æ–°ï¼Œçƒ­é‡å¯æ€ä¹ˆç†è§£ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1611669469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32360,"user_name":"DJH","can_delete":false,"product_type":"c1","uid":1256740,"ip_address":"","ucode":"2BDEF123B3DB6A","user_header":"https://static001.geekbang.org/account/avatar/00/13/2d/24/28acca15.jpg","comment_is_top":false,"comment_ctime":1539560695,"is_pvip":false,"replies":[{"id":"11809","content":"presetç›¸å½“äºinitializerçš„å­é›†ï¼Œæ¯”è¾ƒé€‚åˆåœ¨å‘å¸ƒæµç¨‹é‡Œå¤„ç†æ¯”è¾ƒç®€å•çš„æƒ…å†µã€‚initializeræ˜¯è¦å†™ä»£ç çš„ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539571050,"ip_address":"","comment_id":32360,"utype":1}],"discussion_count":2,"race_medal":0,"score":"87438906615","product_id":100015201,"comment_content":"è¯·æ•™è€å¸ˆï¼ŒInitializerå’ŒPresetéƒ½èƒ½æ³¨å…¥PODé…ç½®ï¼Œé‚£ä¹ˆè¿™ä¸¤ç§æ–¹æ³•çš„é€‚ç”¨åœºæ™¯æœ‰ä½•ä¸åŒï¼Ÿ","like_count":20,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426740,"discussion_content":"presetç›¸å½“äºinitializerçš„å­é›†ï¼Œæ¯”è¾ƒé€‚åˆåœ¨å‘å¸ƒæµç¨‹é‡Œå¤„ç†æ¯”è¾ƒç®€å•çš„æƒ…å†µã€‚initializeræ˜¯è¦å†™ä»£ç çš„ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1539571050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1153968,"avatar":"https://static001.geekbang.org/account/avatar/00/11/9b/b0/30d6c3d8.jpg","nickname":"xiaohinata","note":"","ucode":"5402942AF518C1","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555058,"discussion_content":"åˆšå¥½å¯¹æ­¤æœ‰ç–‘é—®ï¼Œç½‘ä¸Šæ²¡ä»‹ç»åŒºåˆ«çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646729939,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":37799,"user_name":"Lis","can_delete":false,"product_type":"c1","uid":1284254,"ip_address":"","ucode":"1D095DA2CE2C65","user_header":"https://static001.geekbang.org/account/avatar/00/13/98/9e/b9069b65.jpg","comment_is_top":false,"comment_ctime":1541730094,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"74556174126","product_id":100015201,"comment_content":"è€å¸ˆå¥½ï¼Œè¯¾åä½œä¸šçš„æ–¹å¼éå¸¸æ£’ï¼Œå¯å¦åœ¨ä¸‹ä¸€èŠ‚è¯¾çš„å¼€å§‹å…ˆæ€»ç»“ä¸€ä¸‹è¯¾åä½œä¸šå‘¢ï¼Ÿ","like_count":17},{"had_liked":false,"id":184147,"user_name":"lucasun","can_delete":false,"product_type":"c1","uid":1887574,"ip_address":"","ucode":"5B900BC7C36F43","user_header":"https://static001.geekbang.org/account/avatar/00/1c/cd/56/dca89081.jpg","comment_is_top":false,"comment_ctime":1583238435,"is_pvip":false,"replies":[{"id":"72839","content":"Istio ç°åœ¨æ˜¯admission hookã€‚è¿™éƒ¨åˆ†åŠŸèƒ½å˜åŒ–å¤ªå¤šäº†ï¼Œæœ€å¥½æ˜¯è‡ªå·±å†™ä¸ªsidecar operator æ¥ç®¡ç†ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1584423431,"ip_address":"","comment_id":184147,"utype":1}],"discussion_count":2,"race_medal":0,"score":"70302715171","product_id":100015201,"comment_content":"Initializerä¸æ˜¯ä¸€ç›´bataç„¶ååºŸå¼ƒäº†å˜›ï¼Œistioç”¨çš„æ˜¯MutatingAdmissionWebhookå§","like_count":16,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":485909,"discussion_content":"Istio ç°åœ¨æ˜¯admission hookã€‚è¿™éƒ¨åˆ†åŠŸèƒ½å˜åŒ–å¤ªå¤šäº†ï¼Œæœ€å¥½æ˜¯è‡ªå·±å†™ä¸ªsidecar operator æ¥ç®¡ç†ã€‚","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584423431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"å›¢","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533347,"discussion_content":"Mark.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637842367,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":39074,"user_name":"Alex","can_delete":false,"product_type":"c1","uid":1246046,"ip_address":"","ucode":"68E92087D486E0","user_header":"https://static001.geekbang.org/account/avatar/00/13/03/5e/818a8b1b.jpg","comment_is_top":false,"comment_ctime":1542183488,"is_pvip":false,"replies":[{"id":"14131","content":"å°±ä¸ä¼šæ³¨å…¥æˆåŠŸäº†","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1542281949,"ip_address":"","comment_id":39074,"utype":1}],"discussion_count":2,"race_medal":0,"score":"70261660224","product_id":100015201,"comment_content":"Initializerä¸æ–°çš„pod åœ¨git mergeå†²çªäº†è¯¥æ€ä¹ˆè§£å†³ï¼Ÿ","like_count":16,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":428907,"discussion_content":"å°±ä¸ä¼šæ³¨å…¥æˆåŠŸäº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1542281949,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1113864,"avatar":"https://static001.geekbang.org/account/avatar/00/10/ff/08/7c18d8a4.jpg","nickname":"å›¢","note":"","ucode":"D56ABBCE4E4D90","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":533345,"discussion_content":"Mark.","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1637842325,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"user_type\":1}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":43861,"user_name":"ç¾½ç¿¼1982","can_delete":false,"product_type":"c1","uid":1130194,"ip_address":"","ucode":"1C7362888B7E3D","user_header":"https://static001.geekbang.org/account/avatar/00/11/3e/d2/5f9d3fa7.jpg","comment_is_top":false,"comment_ctime":1543312491,"is_pvip":false,"replies":[{"id":"15723","content":"ç¼–ç¨‹å‹å¥½çš„apiï¼Œæ–¹ä¾¿å®¹å™¨åŒ–ï¼Œé…ç½®æ–¹ä¾¿","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1543371514,"ip_address":"","comment_id":43861,"utype":1}],"discussion_count":1,"race_medal":0,"score":"65967821931","product_id":100015201,"comment_content":"æ‰€ä»¥è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>æˆ‘çš„ç†è§£æ˜¯Envyæ€§èƒ½æ›´é«˜ï¼Œå ç”¨ç³»ç»Ÿèµ„æºæ›´å°‘","like_count":15,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":430527,"discussion_content":"ç¼–ç¨‹å‹å¥½çš„apiï¼Œæ–¹ä¾¿å®¹å™¨åŒ–ï¼Œé…ç½®æ–¹ä¾¿","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1543371514,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":60945,"user_name":"é—«é£","can_delete":false,"product_type":"c1","uid":1013162,"ip_address":"","ucode":"30C782D30108D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/75/aa/21275b9d.jpg","comment_is_top":false,"comment_ctime":1547597665,"is_pvip":false,"replies":[{"id":"22063","content":"service mesh is just a fancy way of microservice","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1548053718,"ip_address":"","comment_id":60945,"utype":1}],"discussion_count":1,"race_medal":0,"score":"44497270625","product_id":100015201,"comment_content":"æœåŠ¡ç½‘æ ¼æœ€åˆæ˜¯ç”±linkerdé¡¹ç›®æå‡ºæ¦‚å¿µçš„ï¼Œlstioæ˜¯å¦å¤–ä¸€ä¸ªåèµ·ä¹‹ç§€ï¼Œä½¿å¤§å®¶éƒ½å…³æ³¨åˆ°äº†è¾¹è½¦ä»£ç†æ¨¡å¼å’ŒæœåŠ¡æ²»ç†çš„æ–°æ–¹æ³•çš„å·¨å¤§å¨åŠ›ã€‚æ–‡ä¸­åº”è¯¥ç¬”è¯¯å†™é”™ä¸ºå¾®æœåŠ¡äº†ã€‚<br><br>ä¸è¿‡ç‘•ä¸æ©ç‘œï¼Œæœ¬èŠ‚å†™çš„æå…¶ç²¾å½©å’Œæ·±å…¥æµ…å‡ºã€‚","like_count":10,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436678,"discussion_content":"service mesh is just a fancy way of microservice","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1548053718,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32458,"user_name":"å…¬ä¼—å·ï¼šäº‘åŸç”ŸServerless","can_delete":false,"product_type":"c1","uid":1253954,"ip_address":"","ucode":"B615BD756C7552","user_header":"https://static001.geekbang.org/account/avatar/00/13/22/42/79604ce6.jpg","comment_is_top":false,"comment_ctime":1539579059,"is_pvip":false,"replies":[{"id":"11831","content":"knativeæ²¡å•¥ç‰¹åˆ«çš„ï¼Œæš‚æ—¶å°±ä¸ç»™ç¯‡å¹…äº†","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539581544,"ip_address":"","comment_id":32458,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35899317427","product_id":100015201,"comment_content":"ç£Šå“¥ç«Ÿç„¶ç©¿æ’äº†istioçš„è®²è§£ï¼Œåç»­æœ‰æ²¡æœ‰è®¡åˆ’è®²è®²knativeå‘¢","like_count":8,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426779,"discussion_content":"knativeæ²¡å•¥ç‰¹åˆ«çš„ï¼Œæš‚æ—¶å°±ä¸ç»™ç¯‡å¹…äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539581544,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32523,"user_name":"è™è™â¤ï¸","can_delete":false,"product_type":"c1","uid":1086535,"ip_address":"","ucode":"157F261E80291A","user_header":"https://static001.geekbang.org/account/avatar/00/10/94/47/75875257.jpg","comment_is_top":false,"comment_ctime":1539600478,"is_pvip":false,"replies":[{"id":"11857","content":"ä½ çš„é”™è¯¯ä¹‹å¤„åœ¨äºï¼Œpatchæ•°æ®åªå¯èƒ½è¢«PATCH APIè®¤è¯†ã€‚ä½ æ€»æƒ³ç€è®©replaceä¹Ÿèƒ½ç”¨patchæ•°æ®ï¼Œé‚£replaceä¸å°±æˆäº†patch apiäº†ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539609469,"ip_address":"","comment_id":32523,"utype":1}],"discussion_count":3,"race_medal":0,"score":"31604371550","product_id":100015201,"comment_content":"è€å¸ˆï¼Œä¸ºä»€ä¹ˆä¿®æ”¹å¯¹è±¡å¯ä»¥å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶å†™ï¼Œè€Œæ›¿æ¢ä¸è¡Œï¼Ÿæ„Ÿè§‰è¿˜å·®ä¸€å±‚çª—æˆ·çº¸ï¼Œè€å¸ˆå¸®æˆ‘æ…ç ´:)<br>æˆ–è€…æœ‰ä»€ä¹ˆèµ„æ–™å¯ä»¥è®©æˆ‘æ›´æ·±å…¥ç†è§£ä¸‹å—ï¼Ÿ","like_count":7,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426805,"discussion_content":"ä½ çš„é”™è¯¯ä¹‹å¤„åœ¨äºï¼Œpatchæ•°æ®åªå¯èƒ½è¢«PATCH APIè®¤è¯†ã€‚ä½ æ€»æƒ³ç€è®©replaceä¹Ÿèƒ½ç”¨patchæ•°æ®ï¼Œé‚£replaceä¸å°±æˆäº†patch apiäº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539609469,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1513000,"avatar":"https://static001.geekbang.org/account/avatar/00/17/16/28/41aed84a.jpg","nickname":"Zwj","note":"","ucode":"6F1A01F27BEC1A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":572914,"discussion_content":"replaceå¯¼è‡´podåªèƒ½ä¿å­˜å…¶ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯çš„æ‰€æäº¤çš„çŠ¶æ€ï¼Œå› ä¸ºreplaceæäº¤çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„podæ¨¡æ¿ã€‚è€Œpatchä½¿å¾—å¤§å®¶æ‰€ä¿®æ”¹çš„éƒ¨åˆ†éƒ½å¯ä»¥ä¿ç•™ï¼Œpatchæäº¤çš„æ˜¯å„è‡ªä¿®æ”¹çš„éƒ¨åˆ†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1653039301,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1066638,"avatar":"https://static001.geekbang.org/account/avatar/00/10/46/8e/334d25ba.jpg","nickname":"BOB","note":"","ucode":"239C06A7CD3BD5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2074,"discussion_content":"è€å¸ˆï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ä¸ï¼š\npatchæœ‰ç‚¹ç±»ä¼¼äºæ•°æ®åº“ä¹è§‚é”æˆ–è€…svnçš„ç‰ˆæœ¬æ§åˆ¶ï¼Œå¹¶å‘ä¿®æ”¹çš„æ—¶å€™å®¢æˆ·ç«¯æ¯æ¬¡å¿…é¡»æäº¤å…¨é‡çš„èµ„æºæ¸…å•åˆ°æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‰ä¸€ä¸ªäººçš„ä¿®æ”¹ç»“æœï¼Œåä¸€ä¸ªäººè¦æƒ³å¢åŠ ç‚¹ä»€ä¹ˆä¸œè¥¿çš„è¯ï¼Œå¿…é¡»è·å–åˆ°å‰ä¸€ä¸ªäººä¿®æ”¹å®Œæ¯•çš„æ¸…å•ï¼Œç„¶åå†åŠ ã€‚è€Œpatchåˆ™ä¸ç„¶ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563245451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93813,"user_name":"Zhikun Lao","can_delete":false,"product_type":"c1","uid":1087490,"ip_address":"","ucode":"C39A437FCE1C8B","user_header":"https://static001.geekbang.org/account/avatar/00/10/98/02/14e24394.jpg","comment_is_top":false,"comment_ctime":1557628139,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"23032464619","product_id":100015201,"comment_content":"è€å¸ˆä½ å¥½ï¼<br>â€å¦‚æœä½ å¯¹è¿™ä¸ª Demo æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨è¿™ä¸ª GitHub é“¾æ¥é‡Œæ‰¾åˆ°å®ƒçš„æ‰€æœ‰æºç å’Œæ–‡æ¡£ã€‚è¿™ä¸ª Demoï¼Œæ˜¯æˆ‘ fork è‡ª Kelsey Hightower çš„ä¸€ä¸ªåŒåçš„ Demoâ€œ<br><br>æˆ‘çœ‹è¿™ä¸ªinitializerçš„pluginéƒ½å·²ç»æ²¡äº†ï¼Œç°åœ¨æ˜¯ä¸æ˜¯éƒ½è¦å†™Admission hookäº†ï¼Ÿ https:&#47;&#47;kubernetes.io&#47;docs&#47;reference&#47;access-authn-authz&#47;extensible-admission-controllers&#47;#<br><br>ä¾‹å¦‚è¿™ä¸ª https:&#47;&#47;github.com&#47;kubernetes&#47;kubernetes&#47;blob&#47;v1.13.0&#47;test&#47;images&#47;webhook&#47;main.go","like_count":5,"discussions":[{"author":{"id":1478151,"avatar":"","nickname":"Geek_7ec3a9","note":"","ucode":"31ADD1F469E29A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":211446,"discussion_content":"æ˜¯çš„ï¼Œç°åœ¨é«˜ç‰ˆæœ¬çš„k8séå¸¸ä¸å»ºè®®ä½¿ç”¨initializerï¼Œç”¨webhookå§","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584851288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32880,"user_name":"gotojeff","can_delete":false,"product_type":"c1","uid":1212606,"ip_address":"","ucode":"1E49871F44F9E5","user_header":"https://static001.geekbang.org/account/avatar/00/12/80/be/8350f94d.jpg","comment_is_top":false,"comment_ctime":1539721020,"is_pvip":false,"replies":[{"id":"11978","content":"å“¦å“¦ï¼Œè¿™ä¸ªå¿˜è®°è´´äº†ã€‚æ²¡é”™ï¼Œè¿™ä¸ªconfigmapéœ€è¦ä½¿ç”¨envoyçš„é…ç½®æ–‡ä»¶åˆ›å»ºå‡ºæ¥ï¼Œé…ç½®æ–‡ä»¶ç½‘ä¸Šå¯ä»¥ä¸‹åˆ°ã€‚kubectl create configmap envoy â€”from-file envoy.json","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539744159,"ip_address":"","comment_id":32880,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23014557500","product_id":100015201,"comment_content":"Hi è€å¸ˆ<br>â€˜â€™â€˜æœ‰ä¸ªç–‘é—®ï¼š name ä¸ºenvoyçš„configmapæ˜¯åœ¨å“ªé‡Œå®šä¹‰çš„å‘¢ï¼Ÿ<br>2018-10-16<br>î˜ˆ ä½œè€…å›å¤<br>æ–‡ä¸­ä¸æ˜¯è´´å‡ºæ¥äº†ï¼Ÿ<br>â€™â€˜â€™<br>configmapæ¨¡æ¿ä¸­çš„ metadata - nameæ˜¯envoy-initializerï¼Œä½†æ˜¯åœ¨ä¸‹é¢çš„container volumesä¸­çš„configmap nameæ˜¯envoyï¼Œæˆ‘çš„ç–‘æƒ‘æ˜¯è¿™æ˜¯2ä¸ªä¸åŒçš„configmapå§ï¼Ÿåè€…æ˜¯åœ¨å…¶ä»–åœ°æ–¹å®šä¹‰çš„ï¼Ÿ<br>","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426906,"discussion_content":"å“¦å“¦ï¼Œè¿™ä¸ªå¿˜è®°è´´äº†ã€‚æ²¡é”™ï¼Œè¿™ä¸ªconfigmapéœ€è¦ä½¿ç”¨envoyçš„é…ç½®æ–‡ä»¶åˆ›å»ºå‡ºæ¥ï¼Œé…ç½®æ–‡ä»¶ç½‘ä¸Šå¯ä»¥ä¸‹åˆ°ã€‚kubectl create configmap envoy â€”from-file envoy.json","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539744159,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32566,"user_name":"å‚æ‚Ÿ","can_delete":false,"product_type":"c1","uid":1186023,"ip_address":"","ucode":"AAD3D8BB695658","user_header":"https://static001.geekbang.org/account/avatar/00/12/18/e7/d58e287c.jpg","comment_is_top":false,"comment_ctime":1539612842,"is_pvip":true,"replies":[{"id":"11891","content":"ä½†å…¶å®envoyå‘å¸ƒçš„ä¸ç®—æ™šï¼Œç§°ä¸ä¸Šæ­ä¾¿è½¦ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539616597,"ip_address":"","comment_id":32566,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23014449322","product_id":100015201,"comment_content":"æˆ‘æƒ³envoyçš„æˆåŠŸï¼Œæ˜¯å› ä¸ºå®ƒçœŸæ­£ç†è§£äº†k8sçš„æŠ€æœ¯ç²¾é«“ï¼Œå¹¶æˆåŠŸçš„åº”ç”¨åˆ°äº†å½“å‰æœ€ç«çš„å¾®æœåŠ¡é¢†åŸŸï¼Œå°†å¾®æœåŠ¡ä½“ç³»ä¸K8Sæ†ç»‘åœ¨ä¸€èµ·ï¼Œservice meshæˆä¸ºå¾®æœåŠ¡æ–°ä¸€ä»£æŠ€æœ¯çš„ä»£è¨€ï¼Œè¿™æ— è®ºä»æŠ€æœ¯ä¸Šè¿˜æ˜¯æˆ˜ç•¥ä¸Šéƒ½èµ¢å¾—äº†googleçš„èŠ³å¿ƒï¼ŒæˆåŠŸä¹Ÿå°±æ°´åˆ°æ¸ æˆã€‚","like_count":5,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426820,"discussion_content":"ä½†å…¶å®envoyå‘å¸ƒçš„ä¸ç®—æ™šï¼Œç§°ä¸ä¸Šæ­ä¾¿è½¦ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539616597,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32689,"user_name":"silver","can_delete":false,"product_type":"c1","uid":1186740,"ip_address":"","ucode":"908E3C8560D6E1","user_header":"https://static001.geekbang.org/account/avatar/00/12/1b/b4/a6db1c1e.jpg","comment_is_top":false,"comment_ctime":1539668164,"is_pvip":false,"replies":[{"id":"11915","content":"APIå¯¹è±¡éƒ½æœ‰revisionï¼Œæ‰€ä»¥apiserverå¤„ç†mergeçš„æµç¨‹è·Ÿgit serveræ˜¯ä¸€æ ·çš„ã€‚è¿™è·Ÿkubectlè¿™å…³ç³»ï¼Œå®ƒåªæ˜¯ä¸ªå®¢æˆ·ç«¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539673253,"ip_address":"","comment_id":32689,"utype":1}],"discussion_count":1,"race_medal":0,"score":"18719537348","product_id":100015201,"comment_content":"kubectl applyæ€ä¹ˆåšconcurrency controlå‘¢ï¼Ÿå‡è®¾client Aå’ŒBéƒ½æœ‰version 1çš„specã€‚ç„¶åä»–ä»¬åœ¨å„è‡ªä¿®æ”¹äº†specä¹‹åcall applyã€‚å‡è®¾client Açš„patchæ“ä½œå…ˆæˆåŠŸï¼Œå¦‚æœkubectlç®€å•çš„ä¸etcdé‡Œæœ‰çš„specåšä¸€ä¸ªdiffï¼Œä¼šä¸ä¼šå‡ºç°ä¸€ä¸ªclient BæŠŠclient Açš„æ›´æ–°ä¸ªrevertçš„æƒ…å†µï¼Ÿ","like_count":4,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426861,"discussion_content":"APIå¯¹è±¡éƒ½æœ‰revisionï¼Œæ‰€ä»¥apiserverå¤„ç†mergeçš„æµç¨‹è·Ÿgit serveræ˜¯ä¸€æ ·çš„ã€‚è¿™è·Ÿkubectlè¿™å…³ç³»ï¼Œå®ƒåªæ˜¯ä¸ªå®¢æˆ·ç«¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539673253,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32500,"user_name":"Dillion","can_delete":false,"product_type":"c1","uid":1219687,"ip_address":"","ucode":"502EDF7ECA5569","user_header":"https://static001.geekbang.org/account/avatar/00/12/9c/67/c0128e6c.jpg","comment_is_top":false,"comment_ctime":1539591541,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18719460725","product_id":100015201,"comment_content":"æˆ‘å¯¹å£°æ˜å¼APIçš„ç†è§£æ˜¯ï¼šapiserverä¸etcdåœ¨ä¸æ–­ç»´æŠ¤è€…æŸä¸ªå¯¹è±¡å„ä¸ªå±æ€§å­—æ®µã€‚ä¿®æ”¹å¯¹è±¡çŠ¶æ€çš„æ–¹å¼æ˜¯ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯ï¼Œå¯¹è±¡çš„å±æ€§ä½œä¸ºAPIï¼Œæš´éœ²ç»™ç”¨æˆ·ï¼Œç”¨æˆ·é€šè¿‡ä¿®æ”¹å¯¹è±¡å±æ€§ï¼Œå®ç°å¯¹å¯¹è±¡çš„ä¿®æ”¹ã€‚","like_count":4},{"had_liked":false,"id":281610,"user_name":"å‹¤åŠ³çš„å°èƒ–å­-libo","can_delete":false,"product_type":"c1","uid":1158344,"ip_address":"","ucode":"5BB20CD5A56568","user_header":"https://static001.geekbang.org/account/avatar/00/11/ac/c8/4b1c0d40.jpg","comment_is_top":false,"comment_ctime":1614827384,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14499729272","product_id":100015201,"comment_content":"å‡­è¿™ç¯‡Istioçš„æ–‡ç« å°±å€¼å›ç¥¨ä»·ã€‚","like_count":3},{"had_liked":false,"id":37018,"user_name":"ç‹å¤©æ˜","can_delete":false,"product_type":"c1","uid":1012262,"ip_address":"","ucode":"60C51851C73A37","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/26/7387fc89.jpg","comment_is_top":false,"comment_ctime":1541422898,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14426324786","product_id":100015201,"comment_content":"æŒ‰GitHubé‡Œçš„å¯åŠ¨çš„pod envoy-initializer-xxxxæŠ¥çŠ¶æ€crashloopbackoff,æ—¥å¿—æ˜¾ç¤ºbackoff restarting failed container,ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰é‡åˆ°è¿™ç§æƒ…å†µ","like_count":3},{"had_liked":false,"id":35066,"user_name":"Pixar","can_delete":false,"product_type":"c1","uid":1197659,"ip_address":"","ucode":"E653387BA8EA16","user_header":"https://static001.geekbang.org/account/avatar/00/12/46/5b/07858c33.jpg","comment_is_top":false,"comment_ctime":1540393132,"is_pvip":false,"replies":[{"id":"12532","content":"ä¸æ˜¯è¦†ç›–ï¼Œæ˜¯æŠŠä»–æ”¹æˆå¸¦envoyçš„","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1540439754,"ip_address":"","comment_id":35066,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14425295020","product_id":100015201,"comment_content":"å¯ä»¥è¿™æ ·ç†è§£å—ï¼Ÿä»¥istio ä¸ºä¾‹ï¼Œå…¶å®å­˜å‚¨åœ¨etcd ä¸­çš„ pod å¯¹è±¡å¹¶æ²¡æœ‰ envoy è®¾ç½®ï¼Œæ‰€æœ‰çš„envoy è®¾ç½®éƒ½æ˜¯å¯¹è±¡è¢«etcd å–å‡ºå initiater  åŠ ä¸Šå»çš„ï¼Ÿ  initiater åŠ ä¸Šå»ä»¥åï¼Œä¼šç”¨å«æœ‰envoy é…ç½®çš„ å¯¹è±¡å¤ç›–æ‰ etcd ä¸­æ²¡æœ‰envoy é…ç½®çš„å—ï¼Ÿ","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":427433,"discussion_content":"ä¸æ˜¯è¦†ç›–ï¼Œæ˜¯æŠŠä»–æ”¹æˆå¸¦envoyçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1540439754,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32498,"user_name":"å…µæˆˆ","can_delete":false,"product_type":"c1","uid":1017595,"ip_address":"","ucode":"0F1723EBCE1BC0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/86/fb/4add1a52.jpg","comment_is_top":false,"comment_ctime":1539591084,"is_pvip":false,"replies":[{"id":"11848","content":"å®˜æ–¹æ–‡æ¡£å…¶å®ä¸å¥½æ„æ€è¯´çš„å¤ªç›´æ¥ï¼Œæ‰€ä»¥ï¼Œè¿˜ä¸åœ¨ç‚¹å­ä¸Šã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539596216,"ip_address":"","comment_id":32498,"utype":1}],"discussion_count":2,"race_medal":0,"score":"14424492972","product_id":100015201,"comment_content":"é’ˆå¯¹ç£Šå“¥çš„æ€è€ƒé¢˜ï¼ŒEnvoyçš„å®˜æ–¹æ–‡æ¡£æœ‰ç›¸å…³æ–‡ç« åˆ†æï¼šhttps:&#47;&#47;www.envoyproxy.io&#47;docs&#47;envoy&#47;latest&#47;intro&#47;comparison<br>æ¯”å¦‚å®Œå¤‡çš„ Http&#47;2 æ”¯æŒã€é«˜çº§è´Ÿè½½å‡è¡¡ã€å¯æ’å…¥å¼æ¶æ„ã€è¯¦ç»†çš„ç»Ÿè®¡åˆ†æç­‰ï¼Œå¯è§Envoyè¿™ä¸ªç»„ä»¶æ¯”è¾ƒå®Œå¤‡ä¸”æ€§èƒ½å¤Ÿå¥½ã€‚","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426795,"discussion_content":"å®˜æ–¹æ–‡æ¡£å…¶å®ä¸å¥½æ„æ€è¯´çš„å¤ªç›´æ¥ï¼Œæ‰€ä»¥ï¼Œè¿˜ä¸åœ¨ç‚¹å­ä¸Šã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1539596216,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2291160,"avatar":"https://static001.geekbang.org/account/avatar/00/22/f5/d8/121e4b68.jpg","nickname":"Woa ğŸ¤","note":"","ucode":"6033F496082F3B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":546039,"discussion_content":"å“ˆå“ˆå“ˆå“ˆä¸å¥½æ„æ€å¯è¿˜è¡Œ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1642135230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32423,"user_name":"gogo","can_delete":false,"product_type":"c1","uid":1003104,"ip_address":"","ucode":"E8F0F3B000020A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","comment_is_top":false,"comment_ctime":1539568168,"is_pvip":false,"replies":[{"id":"11807","content":"æ˜¯å•Šï¼Œå®ƒä»¬ä¸å°±æ˜¯ç›´æ¥patch apiå¯¹è±¡çš„å˜›","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539570855,"ip_address":"","comment_id":32423,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14424470056","product_id":100015201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘å¯¹å£°æ˜å¼apiè¿˜æ˜¯æ²¡æœ‰å¤ªç†è§£ï¼Œé™¤äº†applyè¿˜æœ‰å…¶ä»–çš„å‘½ä»¤å—ï¼Ÿæ‚¨æ–‡ä¸­æåˆ°çš„kubectl set imageå’Œkubectl editä¹Ÿç®—æ˜¯å£°æ˜å¼apiå—","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426767,"discussion_content":"æ˜¯å•Šï¼Œå®ƒä»¬ä¸å°±æ˜¯ç›´æ¥patch apiå¯¹è±¡çš„å˜›","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1539570855,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32418,"user_name":"huan","can_delete":false,"product_type":"c1","uid":1012286,"ip_address":"","ucode":"46CB95F6E4E5FF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/72/3e/534db55d.jpg","comment_is_top":false,"comment_ctime":1539567575,"is_pvip":false,"replies":[{"id":"11808","content":"è¿™ä¸ªåªæ˜¯æ¬¡è¦å› ç´ ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539570879,"ip_address":"","comment_id":32418,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14424469463","product_id":100015201,"comment_content":"ä¹‹å‰ä¸€ç›´ç”¨nginxå’Œhaproxyï¼Œæ²¡ç”¨è¿‡envoyã€‚<br>æŸ¥äº†ä¸‹å®˜ç½‘ï¼Œçœ‹envoyçš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€æ˜¯â€œsmall memory footprintâ€ï¼Œæˆ‘æƒ³è¿™ä¸ªç‰¹å¾ç‰¹åˆ«é€‚åˆenvoyä½œä¸ºsidecarçš„è§’è‰²æ³¨å…¥åˆ°æ¯ä¸ªpodä¸­ï¼ˆç±»ä¼¼çš„ç”¨æ±‡ç¼–å†™çš„pauseå®¹å™¨ä¸€æ ·çš„åº•å±‚å®¹å™¨ï¼‰","like_count":3,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426766,"discussion_content":"è¿™ä¸ªåªæ˜¯æ¬¡è¦å› ç´ ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539570879,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":57214,"user_name":"divfor","can_delete":false,"product_type":"c1","uid":1000315,"ip_address":"","ucode":"3B14C74252741D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/43/7b/0c7f8fbe.jpg","comment_is_top":false,"comment_ctime":1546687246,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10136621838","product_id":100015201,"comment_content":"å¤šè·¯å¹¶å‘å†™æˆ‘çš„ç†è§£æ˜¯patchBytes := strategicpatch.CreateTwoWayMergePatch(pod, newPod)çš„æ—¶å€™podçš„çŠ¶æ€æœªå¿…ç­‰äºpatchæ—¶å€™çš„podçŠ¶æ€ï¼Œæ‰€ä»¥è¦å…ˆè®°ä¸‹å·®å¼‚ï¼Œä¸­é—´ç»™äºˆå…¶ä»–å†™è€…æœºä¼šï¼Œæœ€åè‡ªå·±patchçš„æ—¶å€™åªç®¡è‡ªå·±è®°ä¸‹çš„å·®å¼‚ï¼Œè€Œä¸åŠ¨å…¶ä»–å†™è€…çš„éƒ¨åˆ†ã€‚ä¸‡ä¸€è·Ÿå…¶ä»–å†™è€…å†²çªäº†å°±å¤±è´¥å§ï¼Œç”±äººæ¥è§£å†³","like_count":2},{"had_liked":false,"id":55242,"user_name":"blackpiglet","can_delete":false,"product_type":"c1","uid":1032928,"ip_address":"","ucode":"58AA8329C91767","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c2/e0/7188aa0a.jpg","comment_is_top":false,"comment_ctime":1546074422,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10136009014","product_id":100015201,"comment_content":"çœ‹äº† envoy è¢«é€‰åš Isito çš„ sidecar (æˆ–è€…è¯´ service mesh ä¹‹æ‰€ä»¥å‡ºç°) è€Œä¸æ˜¯ NGINX ç­‰è€ç‰Œ Proxy çš„åŸå› ï¼Œæ„Ÿè§‰ API åœ¨ Cloud Native ç¯å¢ƒä¸‹çœŸçš„å¤ªé‡è¦äº†ã€‚","like_count":2},{"had_liked":false,"id":32557,"user_name":"åŒ—å¡","can_delete":false,"product_type":"c1","uid":1218128,"ip_address":"","ucode":"2D947A61689FC6","user_header":"https://static001.geekbang.org/account/avatar/00/12/96/50/bde525b1.jpg","comment_is_top":false,"comment_ctime":1539607841,"is_pvip":false,"replies":[{"id":"11890","content":"éƒ½å¯ä»¥åšä»£ç†ï¼Œä½†ç”¨æ³•å’Œå®ç°å¤§ä¸ä¸€æ ·ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539616554,"ip_address":"","comment_id":32557,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10129542433","product_id":100015201,"comment_content":"å¯¹envoyä¸å¤ªæ˜ç™½ï¼Œenvoyå’Œtraefikæœ‰ä»€ä¹ˆç±»ä¼¼ä¹‹å¤„å—ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426816,"discussion_content":"éƒ½å¯ä»¥åšä»£ç†ï¼Œä½†ç”¨æ³•å’Œå®ç°å¤§ä¸ä¸€æ ·ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539616554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":251738,"user_name":"ch_ort","can_delete":false,"product_type":"c1","uid":1580926,"ip_address":"","ucode":"B79746E687F29E","user_header":"","comment_is_top":false,"comment_ctime":1601818459,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5896785755","product_id":100015201,"comment_content":"å£°æ˜å¼APIï¼Œæœ‰PATCHå’Œè‡ªåŠ¨mergeçš„èƒ½åŠ›ï¼Œè¿™æ ·ç³»ç»Ÿé‡Œå®Œå…¨å¯ä»¥æœ‰å¥½å‡ ä¸ªinitializeråœ¨æ”¹åŒä¸€ä¸ªpodï¼Œåä¹‹å¦‚æœä½ ç›´æ¥replaceäº†åˆ«äººå°±æ²¡æ³•ç©äº†","like_count":1},{"had_liked":false,"id":230844,"user_name":"æ™æœˆ520","can_delete":false,"product_type":"c1","uid":1845394,"ip_address":"","ucode":"4F05E02A5C1608","user_header":"https://static001.geekbang.org/account/avatar/00/1c/28/92/436735f5.jpg","comment_is_top":false,"comment_ctime":1593509322,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5888476618","product_id":100015201,"comment_content":"åæ­£è®°ä½å†™yaml å¥½ä¹…è¡Œäº† æˆ‘ä¹Ÿä¸æƒ³ææ‡‚è¿™ä¸ªå¤ªç†è®ºçš„ä¸œè¥¿äº†","like_count":1},{"had_liked":false,"id":33304,"user_name":"cqc","can_delete":false,"product_type":"c1","uid":1099493,"ip_address":"","ucode":"18053C9C62805F","user_header":"https://static001.geekbang.org/account/avatar/00/10/c6/e5/7e86498f.jpg","comment_is_top":false,"comment_ctime":1539776291,"is_pvip":false,"replies":[{"id":"12080","content":"å¯ä»¥å°è¯•äº†è§£ä¸€ä¸‹envoyçš„api","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539849234,"ip_address":"","comment_id":33304,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5834743587","product_id":100015201,"comment_content":"é™¤äº†èƒ½æƒ³åˆ°envoyä½œä¸ºé€šç”¨çš„sidecarå¯ä»¥æä¾›æ›´ä¸ºå®Œå–„çš„å¾®æœåŠ¡æ²»ç†èƒ½åŠ›ä¹‹å¤–ï¼Œåœ¨ä»£ç†ç½‘ç»œæµé‡æ–¹é¢ï¼Œæ„Ÿè§‰å…¶ä»–ä¸¤ä¸ªè½¯ä»¶ä¹Ÿèƒ½åšåˆ°ã€‚æ±‚è§£ç­”^.^","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426962,"discussion_content":"å¯ä»¥å°è¯•äº†è§£ä¸€ä¸‹envoyçš„api","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539849234,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32441,"user_name":"æ—­","can_delete":false,"product_type":"c1","uid":1263368,"ip_address":"","ucode":"1AC4D6A6F2D2A1","user_header":"https://static001.geekbang.org/account/avatar/00/13/47/08/985632a6.jpg","comment_is_top":false,"comment_ctime":1539573695,"is_pvip":false,"replies":[{"id":"11836","content":"è§serviceéƒ¨åˆ†çš„è®²è§£","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539581820,"ip_address":"","comment_id":32441,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5834540991","product_id":100015201,"comment_content":"è€å¸ˆï¼Œæˆ‘çš„Nodeportä¸masterçš„ipä¸èƒ½è®¿é—®ï¼Œnodeçš„ipå’Œnodeportæ˜¯å¯ä»¥è®¿é—®ï¼ŒæŠŠforwardæ”¹æˆacceptä¹Ÿè¿˜æ˜¯ä¸è¡Œï¼Œéº»çƒ¦è€å¸ˆæŒ‡ç‚¹ä¸‹ï¼Œå¤šè°¢äº†","like_count":1,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426771,"discussion_content":"è§serviceéƒ¨åˆ†çš„è®²è§£","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539581820,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":360004,"user_name":"lfn","can_delete":false,"product_type":"c1","uid":1026593,"ip_address":"åŒ—äº¬","ucode":"2E1558C6A12A89","user_header":"https://static001.geekbang.org/account/avatar/00/0f/aa/21/6c3ba9af.jpg","comment_is_top":false,"comment_ctime":1666112930,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1666112930","product_id":100015201,"comment_content":"2022-10-19, æ‰“å¡","like_count":0},{"had_liked":false,"id":359063,"user_name":"Geek_8ed998","can_delete":false,"product_type":"c1","uid":1793879,"ip_address":"ä¸Šæµ·","ucode":"1C164836354665","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLJHTX1IwEl1Eh1CCO2ejL2gKe08Vxib61UZz9l5WGA81ObK0Nk5MCZ3ic6IWcW5kyX0DtwBNMEMl2Q/132","comment_is_top":false,"comment_ctime":1665216010,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1665216010","product_id":100015201,"comment_content":"ç°åœ¨æ˜¯ä¸æ˜¯é€šè¿‡MutatingWebhookConfigurationè¿™ä¸ªæ–¹å¼æ³¨å…¥äº†","like_count":0},{"had_liked":false,"id":356503,"user_name":"æ–°ä¸€","can_delete":false,"product_type":"c1","uid":1120598,"ip_address":"ä¸Šæµ·","ucode":"3E20BD71E23003","user_header":"https://static001.geekbang.org/account/avatar/00/11/19/56/7fbe26b5.jpg","comment_is_top":false,"comment_ctime":1662369810,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1662369810","product_id":100015201,"comment_content":"è¿™ç¯‡å¤ªç²¾å½©äº†ï¼ŒK8så°±æ˜¯ä¼šæŠŠå¤æ‚çš„ä¸œè¥¿ï¼Œç”¨ç®€å•çš„æ¨¡å¼å»å®ç°ï¼ŒåŒ–ç¹ä¸ºç®€ï¼Œæ›´æ¥è¿‘æœ¬è´¨","like_count":0},{"had_liked":false,"id":333495,"user_name":"wilson","can_delete":false,"product_type":"c1","uid":1033396,"ip_address":"","ucode":"E65744D1933F11","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c4/b4/1069f535.jpg","comment_is_top":false,"comment_ctime":1644386385,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1644386385","product_id":100015201,"comment_content":"1. envoyæ”¯æŒxdsåè®® èƒ½å¤ŸåŠ¨æ€åœ°æ¥å—è·¯ç”±ç­–ç•¥<br>2. envoyå®ç°äº†istioåº•å±‚æ‰€æœ‰çš„æµé‡ç®¡æ§åŠŸèƒ½ï¼ŒåŒ…æ‹¬é™æµ æµé‡é•œåƒç­‰","like_count":0},{"had_liked":false,"id":332354,"user_name":"Geek_qiqingkai","can_delete":false,"product_type":"c1","uid":2458942,"ip_address":"","ucode":"52E13785F9CEA1","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKUqxFg3hsV6C4l7j29gDJ6OToreAdgS5lIsQa9fe16Y0e7cUiaR5RaVnqpxWuzToQVGVRRaAwnbaw/132","comment_is_top":false,"comment_ctime":1643185344,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1643185344","product_id":100015201,"comment_content":"è¿™ä¸ªæ˜¯webhookå§","like_count":0},{"had_liked":false,"id":331029,"user_name":"çªçªå¤´","can_delete":false,"product_type":"c1","uid":1063866,"ip_address":"","ucode":"5C2635ED6484F8","user_header":"https://static001.geekbang.org/account/avatar/00/10/3b/ba/3b30dcde.jpg","comment_is_top":false,"comment_ctime":1642385581,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1642385581","product_id":100015201,"comment_content":"ä½†æ˜¯é‡‡ç”¨istioçš„è¯ï¼Œå¹³å°ä¸Šçš„å®¹å™¨ä¹Ÿå°±ç›¸å½“äºå¤šäº†ä¸€å€","like_count":0},{"had_liked":false,"id":320063,"user_name":"å°è½¯çš„é•¿é¢ˆé¹¿","can_delete":false,"product_type":"c1","uid":1244320,"ip_address":"","ucode":"ECAA0891DC55D4","user_header":"https://static001.geekbang.org/account/avatar/00/12/fc/a0/48997178.jpg","comment_is_top":false,"comment_ctime":1636073477,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1636073477","product_id":100015201,"comment_content":"è¯·é—®å¦‚æœpodå†…å­˜åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸å¤Ÿäº†ï¼Œå¯ä»¥çƒ­æ‰©å®¹å—ï¼Ÿè¿˜æ˜¯ä¸€å®šè¦é‡å¯podæˆ–è€…åšæ»šåŠ¨æ›´æ–°","like_count":0,"discussions":[{"author":{"id":2108027,"avatar":"https://static001.geekbang.org/account/avatar/00/20/2a/7b/2092e1fd.jpg","nickname":"Wall-Eve","note":"","ucode":"FBF2FED8F13BD3","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":542455,"discussion_content":"çºµå‘æ‰©ç¼©å®¹éœ€è¦é‡å¯","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640755875,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":315781,"user_name":"é™ˆæ–¯ä½³","can_delete":false,"product_type":"c1","uid":1259323,"ip_address":"","ucode":"C236F874FC767A","user_header":"https://static001.geekbang.org/account/avatar/00/13/37/3b/495e2ce6.jpg","comment_is_top":false,"comment_ctime":1633999610,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633999610","product_id":100015201,"comment_content":"ç¬¬äºŒåä¸‰è¯¾:å£°æ˜å¼APIä¸Kubernetesç¼–ç¨‹èŒƒå¼<br>å£°æ˜å¼APIï¼ˆkubectl applyï¼‰æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªPATCHæ“ä½œï¼Œä¸€æ¬¡èƒ½å¤„ç†å¤šä¸ªå†™æ“ä½œï¼Œå¹¶å…·å¤‡mergeçš„èƒ½åŠ›ã€‚<br><br>æ‰€è°“çš„â€œå£°æ˜å¼â€ï¼ŒæŒ‡çš„å°±æ˜¯æˆ‘åªéœ€è¦æäº¤ä¸€ä¸ªå®šä¹‰å¥½çš„APIå¯¹è±¡æ¥â€œå£°æ˜â€æˆ‘æ‰€æœŸæœ›çš„çŠ¶æ€æ˜¯ä»€ä¹ˆæ ·å­ã€‚â€œå£°æ˜å¼APIâ€å…è®¸å¤šä¸ªAPIå†™ç«¯ï¼Œä»¥Patchçš„æ–¹å¼å¯¹APIå¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ— éœ€å…³å¿ƒæœ¬åœ°åŸå§‹YAMLæ–‡ä»¶çš„å†…å®¹ã€‚æ­£æ˜¯å…·æœ‰ä»¥ä¸Šä¸¤ä¸ªé‡è¦èƒ½åŠ›ï¼ŒKubernetesé¡¹ç›®æ‰å¯ä»¥åŸºäºå¯¹APIå¯¹è±¡çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼Œåœ¨å®Œå…¨æ— éœ€å¤–ç•Œå¹²æ¶‰çš„æƒ…å†µä¸‹ï¼Œå®Œæˆå¯¹â€œå®é™…çŠ¶æ€â€å’Œâ€œæœŸæœ›çŠ¶æ€â€çš„è°ƒè°â€œreconcileâ€è¿‡ç¨‹ã€‚å£°æ˜å¼APIæ‰æ˜¯K8sçš„æ ¸å¿ƒæ‰€åœ¨","like_count":0},{"had_liked":false,"id":307938,"user_name":"limix","can_delete":false,"product_type":"c1","uid":1166614,"ip_address":"","ucode":"76401FF54AE0D8","user_header":"https://static001.geekbang.org/account/avatar/00/11/cd/16/981cc4f8.jpg","comment_is_top":false,"comment_ctime":1629334047,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1629334047","product_id":100015201,"comment_content":"å¹¶å‘ååŒå·¥ä½œæ˜¯apiè®¾è®¡å’Œå®ç°éœ€è¦è§£å†³çš„æ£˜æ‰‹é—®é¢˜ï¼Œk8så£°æ˜å¼apiå¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥ï¼Œä¼˜ç§€çš„apiè®¾è®¡æ‰æ˜¯k8sçš„ç²¾é«“æ‰€åœ¨~","like_count":0},{"had_liked":false,"id":281593,"user_name":"å°ä¸¢ğŸ‘£","can_delete":false,"product_type":"c1","uid":1031711,"ip_address":"","ucode":"A7699F00418FC4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/be/1f/57c88dd1.jpg","comment_is_top":false,"comment_ctime":1614821456,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1614821456","product_id":100015201,"comment_content":"åº”è¯¥æ˜¯çœ‹çš„ç¬¬ä¸‰éäº†ï¼Œè¿˜æ˜¯ä¼šæœ‰å¾ˆå¤šæ–°çš„æ”¶è·ã€‚","like_count":0,"discussions":[{"author":{"id":2589474,"avatar":"https://static001.geekbang.org/account/avatar/00/27/83/22/a44b65f5.jpg","nickname":"JamonJou","note":"","ucode":"C77E647E2FA7A7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545145,"discussion_content":"æ¸©æ•…è€ŒçŸ¥æ–°","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641865283,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":268243,"user_name":"æ—ºæ—º","can_delete":false,"product_type":"c1","uid":1227639,"ip_address":"","ucode":"2067D3BCCA7C0A","user_header":"https://static001.geekbang.org/account/avatar/00/12/bb/77/e1391dd8.jpg","comment_is_top":false,"comment_ctime":1608111323,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1608111323","product_id":100015201,"comment_content":"è¿™ç¯‡çœ‹äº†ä¸‰éï¼Œå¹²è´§å¤ªå¤š","like_count":0},{"had_liked":false,"id":248241,"user_name":"Heaven","can_delete":false,"product_type":"c1","uid":1694207,"ip_address":"","ucode":"FA33FBCC66C911","user_header":"https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg","comment_is_top":false,"comment_ctime":1600077325,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1600077325","product_id":100015201,"comment_content":"å› ä¸ºåŸºäºå£°æ˜å¼APIå§,æš´éœ²APIæ–¹ä¾¿äºŒæ¬¡å¼€å‘å’Œè°ƒè¯•","like_count":0},{"had_liked":false,"id":237402,"user_name":"WinnerYJ","can_delete":false,"product_type":"c1","uid":2057785,"ip_address":"","ucode":"2DE6B278319592","user_header":"https://static001.geekbang.org/account/avatar/00/1f/66/39/df4995ce.jpg","comment_is_top":false,"comment_ctime":1595820227,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1595820227","product_id":100015201,"comment_content":"ç°åº¦å‘å¸ƒæ—¶ï¼Œå¤šåŠæƒ…å†µè¿˜éœ€è¦æŒ‰ä¸šåŠ¡åœºæ™¯æŒ‡å®šå¯¹åº”éœ€è¦ç°åº¦å‘å¸ƒçš„æ¡ä»¶ï¼Œæ¯”å¦‚å…¨å›½æ¨å¹¿åˆ°1000ä¸ªæœºæ„ï¼Œéœ€è¦æŒ‡å®šåªæ¨å¹¿åˆ°æœºæ„1,2,3,4,5ï¼Œé’ˆå¯¹è¿™å‡ ä¸ªæœºæ„åšç°åº¦å‘å¸ƒï¼Œè¿™ç±»æƒ…å†µåœ¨å“ªå„¿è¿›è¡Œé…ç½®ã€‚","like_count":0},{"had_liked":false,"id":236059,"user_name":"å¤","can_delete":false,"product_type":"c1","uid":1010922,"ip_address":"","ucode":"74E6838226A405","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6c/ea/ce9854a5.jpg","comment_is_top":false,"comment_ctime":1595299765,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1595299765","product_id":100015201,"comment_content":"å¼ è€å¸ˆï¼Œè¯·é—®å€ŸåŠ©Admissionæœºåˆ¶å¯ä»¥å®ç°LVMåŠ¨æ€åˆ†é…hostpathå—ï¼Ÿ å€ŸåŠ©LVMå®ç°å¯¹å®¹å™¨å†™Hostç›®å½•çš„é™é¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1665646,"avatar":"https://static001.geekbang.org/account/avatar/00/19/6a/6e/38738a57.jpg","nickname":"the outsider","note":"","ucode":"3209715E5AD7A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":545199,"discussion_content":"åŒå­¦ï¼Œè¿™ä¸ªå¥½ï¼Œè¯·é—®ä½ é‚£è¾¹æœ‰å°è¯•å—ï¼Ÿæˆ‘æœ€è¿‘æƒ³è¯•è¯•","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1641873176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":177272,"user_name":"pk","can_delete":false,"product_type":"c1","uid":1320620,"ip_address":"","ucode":"610C72807240BC","user_header":"https://static001.geekbang.org/account/avatar/00/14/26/ac/af3e1511.jpg","comment_is_top":false,"comment_ctime":1581338499,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1581338499","product_id":100015201,"comment_content":"å¤§ç¥ä¸ºä»€ä¹ˆä¸å»ºè®®åœ¨ékubernetesç¯å¢ƒä¸‹ä½¿ç”¨istioå‘¢ï¼Ÿèƒ½ä¸¾ä¾‹è¯´æ˜ä¸€äº›å‘ä¸ï¼Ÿ","like_count":0},{"had_liked":false,"id":142670,"user_name":"ä¸‡ä¸ˆå°˜","can_delete":false,"product_type":"c1","uid":1422351,"ip_address":"","ucode":"546FF45281EF6B","user_header":"https://static001.geekbang.org/account/avatar/00/15/b4/0f/84e32679.jpg","comment_is_top":false,"comment_ctime":1571452983,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1571452983","product_id":100015201,"comment_content":"istioæ€ä¹ˆå‘éŸ³ï¼Ÿå¥½åƒæ˜¯å¸Œè…Šè¯­ï¼Œå¯èˆªçš„æ„æ€","like_count":0},{"had_liked":false,"id":102111,"user_name":"eyan422","can_delete":false,"product_type":"c1","uid":1226128,"ip_address":"","ucode":"AE6BA24EE95C05","user_header":"","comment_is_top":false,"comment_ctime":1560138704,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560138704","product_id":100015201,"comment_content":"è¯·é—®åŸºäºæ–°ç‰ˆæœ¬çš„kubernetes,ä¾‹å¦‚1.12, 1.13å¦‚ä½•å¤ç°è¿™ä¸ªä¾‹å­?è¿˜æ˜¯è¦åŸºäºwebhookå®ç°Dynamic Admission Controläº†?<br><br>https:&#47;&#47;kubernetes.io&#47;docs&#47;reference&#47;access-authn-authz&#47;extensible-admission-controllers&#47;<br><br>è°¢è°¢","like_count":0},{"had_liked":false,"id":100734,"user_name":"AAA","can_delete":false,"product_type":"c1","uid":1309946,"ip_address":"","ucode":"8E612EEA059A84","user_header":"https://static001.geekbang.org/account/avatar/00/13/fc/fa/a5c17356.jpg","comment_is_top":false,"comment_ctime":1559628898,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559628898","product_id":100015201,"comment_content":"éƒ¨ç½²demoå®Œæˆåï¼Œkube describe çœ‹ä¸åˆ°envoyå®¹å™¨ï¼Œæ€ä¹ˆéªŒè¯envoyå®¹å™¨æ˜¯å¦å·²æ³¨å…¥æˆåŠŸï¼Ÿ","like_count":0},{"had_liked":false,"id":54691,"user_name":"xfan","can_delete":false,"product_type":"c1","uid":1315147,"ip_address":"","ucode":"48ED8D498D7F56","user_header":"https://static001.geekbang.org/account/avatar/00/14/11/4b/fa64f061.jpg","comment_is_top":false,"comment_ctime":1545953340,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1545953340","product_id":100015201,"comment_content":"initializerçš„é…ç½®æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰æŒ‡å®šæ§åˆ¶å™¨envey-initializer","like_count":0},{"had_liked":false,"id":41859,"user_name":"Johnson","can_delete":false,"product_type":"c1","uid":1225037,"ip_address":"","ucode":"55B582953E49F3","user_header":"https://static001.geekbang.org/account/avatar/00/12/b1/4d/10c75b34.jpg","comment_is_top":false,"comment_ctime":1542862113,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542862113","product_id":100015201,"comment_content":"istioæ²¡çœ‹å¤ªæ˜ç™½ æ‰“ä¸ªtagæœ‰ç©ºå†ç»†çœ‹","like_count":0},{"had_liked":false,"id":38687,"user_name":"å‘¨å¨„å­","can_delete":false,"product_type":"c1","uid":1228039,"ip_address":"","ucode":"18A1E6926C095A","user_header":"https://static001.geekbang.org/account/avatar/00/12/bd/07/bf8c31fb.jpg","comment_is_top":false,"comment_ctime":1542106108,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1542106108","product_id":100015201,"comment_content":"envoyæœ€å¤§çš„ç‰¹æ€§åº”è¯¥å°±æ˜¯xDSäº†ï¼Œå¤©ç”Ÿå¾®æœåŠ¡ã€‚ä¼ ç»Ÿnginx haproxyéƒ½æ²¡æœ‰ç‰¹åˆ«å®Œç¾çš„æ–¹æ¡ˆï¼Œkongè¿™ä¸ªåˆ©ç”¨openrestyä¹Ÿç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å‘ï¼Œæ€§èƒ½è‚¯å®šæ²¡é—®é¢˜ã€‚","like_count":0},{"had_liked":false,"id":37050,"user_name":"jason_liew","can_delete":false,"product_type":"c1","uid":1062819,"ip_address":"","ucode":"7933547EC3354E","user_header":"","comment_is_top":false,"comment_ctime":1541432656,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1541432656","product_id":100015201,"comment_content":"çœ‹äº†è£…çš„istioè²Œä¼¼ç”¨çš„webhook admission. ","like_count":0},{"had_liked":false,"id":33307,"user_name":"å°å®‡å®™","can_delete":false,"product_type":"c1","uid":1029649,"ip_address":"","ucode":"BBFFC39CB9E26F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b6/11/e8506a04.jpg","comment_is_top":false,"comment_ctime":1539776716,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1539776716","product_id":100015201,"comment_content":"æœ€åçš„é—®é¢˜ï¼Œenvoyçš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å¯ä»¥åšæœåŠ¡å‘ç°å’Œä¸»åŠ¨çš„å¥åº·æ£€æŸ¥","like_count":0},{"had_liked":false,"id":32730,"user_name":"gotojeff","can_delete":false,"product_type":"c1","uid":1212606,"ip_address":"","ucode":"1E49871F44F9E5","user_header":"https://static001.geekbang.org/account/avatar/00/12/80/be/8350f94d.jpg","comment_is_top":false,"comment_ctime":1539680904,"is_pvip":false,"replies":[{"id":"11927","content":"æ–‡ä¸­ä¸æ˜¯è´´å‡ºæ¥äº†ï¼Ÿ","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539691773,"ip_address":"","comment_id":32730,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1539680904","product_id":100015201,"comment_content":"æœ‰ä¸ªç–‘é—®ï¼š name ä¸ºenvoyçš„configmapæ˜¯åœ¨å“ªé‡Œå®šä¹‰çš„å‘¢ï¼Ÿ<br>","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426873,"discussion_content":"æ–‡ä¸­ä¸æ˜¯è´´å‡ºæ¥äº†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539691773,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":32718,"user_name":"gogo","can_delete":false,"product_type":"c1","uid":1003104,"ip_address":"","ucode":"E8F0F3B000020A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4e/60/0d5aa340.jpg","comment_is_top":false,"comment_ctime":1539678338,"is_pvip":false,"replies":[{"id":"11926","content":"è¿™è·Ÿkubectlæœ‰å•¥å…³ç³»â€¦â€¦kubeletä½†å‡¡ç¢°åˆ°latestå°±æ˜¯å¼ºåˆ¶æ‹‰å–å•Š","user_name":"ä½œè€…å›å¤","user_name_real":"Geek_6ef93d","uid":"1218095","ctime":1539691744,"ip_address":"","comment_id":32718,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1539678338","product_id":100015201,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œæœ‰ä¸ªé—®é¢˜è¯·æ•™æ‚¨ï¼Œæäº¤é•œåƒçš„æ—¶å€™å¯ä»¥ä½¿ç”¨latestæ ‡ç­¾å—ï¼Ÿå¦‚æœimageæ˜¯latestçš„è¯ï¼Œkubectl applyæ€æ ·å¼ºåˆ¶é‡æ–°æ‹‰å–é•œåƒå‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1218095,"avatar":"https://static001.geekbang.org/account/avatar/00/12/96/2f/876085fa.jpg","nickname":"å¼ ç£Š Kubernetes","note":"","ucode":"16E29BDAB1F5BC","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":426868,"discussion_content":"è¿™è·Ÿkubectlæœ‰å•¥å…³ç³»â€¦â€¦kubeletä½†å‡¡ç¢°åˆ°latestå°±æ˜¯å¼ºåˆ¶æ‹‰å–å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1539691744,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}