{"id":198704,"title":"07 | WebSocketæ¥å£ï¼šå¦‚ä½•æµ‹è¯•ä¸€ä¸ªå®Œå…¨é™Œç”Ÿçš„åè®®æ¥å£ï¼Ÿ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆç£Šã€‚å¾ˆé«˜å…´ä½ åˆæ¥å’Œæˆ‘ä¸€èµ·æ¢å¯»æ¥å£æµ‹è¯•çš„å¥¥ç§˜äº†ã€‚</p><p>æˆ‘ä»¬åœ¨å‰é¢ä¸€èµ·å­¦ä¹ äº†æ€ä¹ˆåˆ†æå’Œå®Œæˆä¸€ä¸ªHTTPåè®®çš„æ¥å£æµ‹è¯•ï¼Œåˆä¸€èµ·å­¦ä¹ äº†å¦‚ä½•å°è£…æ¥å£æµ‹è¯•æ¡†æ¶ï¼Œä»¥åŠå¦‚ä½•æ­å»ºæ¥å£æµ‹è¯•å¹³å°ã€‚æˆ‘ç›¸ä¿¡ï¼Œç°åœ¨ä½ å·²ç»å®Œå…¨æŒæ¡äº†HTTPåè®®çš„æ¥å£æµ‹è¯•äº†ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™è¿˜ä¸èƒ½è¯´æ˜ä½ å·²ç»èƒ½ç‹¬ç«‹å®Œæˆæ¥å£æµ‹è¯•äº†ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºæ•°æ®åœ¨ç½‘ç»œä¼ è¾“ä¸Šéƒ½æ˜¯ä¾é ä¸€ç§åè®®æ¥å®Œæˆçš„ï¼Œåœ¨ä¸Šå­¦çš„æ—¶å€™ï¼Œä½ è‚¯å®šå­¦è¿‡åŒ…æ‹¬TCPã€UDPã€HTTPç­‰åœ¨å†…çš„ä¸€å †åè®®ï¼Œä½†æ˜¯å¦‚æœä½ é‡è§äº†ä¸€ä¸ªå…¨æ–°çš„åè®®ï¼Œä½ çŸ¥é“æ€ä¹ˆä»é›¶å¼€å§‹ï¼Œå®Œæˆæ¥å£æµ‹è¯•å—ï¼Ÿ</p><p>ä»Šå¤©æˆ‘å°±ä»¥WebSocketä¸ºä¾‹ï¼Œå‘Šè¯‰ä½ å½“ä½ ç¬¬ä¸€æ¬¡æ¥è§¦ä¸€ä¸ªå®Œå…¨é™Œç”Ÿçš„åè®®æ¥å£æ—¶ï¼Œä½ è¦å¦‚ä½•å¼€å§‹å®Œæˆæ¥å£æµ‹è¯•å·¥ä½œã€‚</p><h2>æœªçŸ¥çš„æ–°åè®®æ¥å£å¹¶ä¸å¯æ€•</h2><p>ä½œä¸ºä¸€åæµ‹è¯•å·¥ç¨‹å¸ˆï¼Œåœ¨é¢å¯¹ä¸€ä¸ªé™Œç”Ÿåè®®çš„æ¥å£æµ‹è¯•æ—¶ï¼Œä½ æ˜¯ä¸æ˜¯ä¼šå¸¸å¸¸æ„Ÿåˆ°å¾ˆæ— åŠ©ï¼Ÿé¢å¯¹è¿™æ ·çš„ä»»åŠ¡æ—¶ï¼Œä½ çš„ç¬¬ä¸€ååº”è‚¯å®šæ˜¯å‘å¼€å‘å·¥ç¨‹å¸ˆæ±‚åŠ©ï¼Œå› ä¸ºå¼€å‘å·¥ç¨‹å¸ˆåŸºäºæ–°åè®®å·²ç»å®Œæˆäº†æ¥å£å¼€å‘ï¼Œå‘å¼€å‘å·¥ç¨‹å¸ˆæ±‚åŠ©æ˜¾ç„¶æ˜¯æœ€å¥½çš„åŠæ³•ã€‚</p><p>æˆ‘åœ¨å·¥ä½œä¸­å°±é‡è§è¿‡ç±»ä¼¼çš„äº‹æƒ…ã€‚è®°å¾—é‚£æ˜¯åœ¨æˆ‘å‚åŠ å·¥ä½œçš„å‰å‡ å¹´ï¼Œæœ‰ä¸€ä¸ªè¢«æµ‹é¡¹ç›®çš„æ¥å£æ˜¯ä¸€ä¸ªç§æœ‰åè®®ï¼Œå½“æˆ‘çœ‹åˆ°æ¥å£æ–‡æ¡£çš„æ—¶å€™ï¼Œç¬¬ä¸€ååº”å°±æ˜¯æ‰¾å¼€å‘å·¥ç¨‹å¸ˆï¼Œå‘ä»–æ±‚æ•™ä¸€ä¸‹è¿™ä¸ªç§æœ‰åè®®ã€‚è¿™ä¸ªå¼€å‘å·¥ç¨‹å¸ˆäººå¾ˆå¥½ï¼Œä»–ç»™äº†æˆ‘ä¸€ä¸ªå­¦ä¹ è„‰ç»œï¼Œå…¶ä¸­åŒ…å«äº†åè®®çš„è¯´æ˜æ–‡æ¡£ã€ä»£ç å¼€å‘æ–‡æ¡£ã€å®ç°ä»£ç ç­‰å†…å®¹ï¼Œæˆ‘æ‹¿åˆ°è¿™äº›èµ„æ–™åï¼Œé©¬ä¸ŠæŒ‰ç…§ä¸Šé¢ä»–ç»™å‡ºçš„å­¦ä¹ é¡ºåºæŠ•å…¥å­¦ä¹ ã€‚</p><!-- [[[read_end]]] --><p>ä½†æ˜¯åæ¥ï¼Œåœ¨é¡¹ç›®ä»äº¤ä»˜æµ‹è¯•åˆ°å®Œæˆæµ‹è¯•åï¼Œæˆ‘å‘ç°è‡ªå·±èµ°äº†ä¸€ä¸ªå¼¯è·¯ã€‚å› ä¸ºä½œä¸ºæµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬ä¸éœ€è¦äº†è§£åè®®åº•å±‚çš„åŸç†ï¼Œåªéœ€è¦äº†è§£æ–°åè®®æ˜¯å¦‚ä½•ä¼ è¾“æ•°æ®ï¼Œåˆå¦‚ä½•è¿”å›æ•°æ®åº“å°±å¯ä»¥äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦æƒ³æ¨¡æ‹Ÿä¸€ä¸ªå®¢æˆ·ç«¯å»éªŒè¯æœåŠ¡ç«¯çš„é€»è¾‘ï¼Œé‚£ä¹ˆå¼€å§‹æ¥å£æµ‹è¯•æœ€å¿«é€Ÿçš„æ–¹æ³•ä¸æ˜¯å»çœ‹åè®®çš„è¯´æ˜æ–‡æ¡£ï¼Œè€Œæ˜¯ç›´æ¥å»çœ‹å¼€å‘å®ç°çš„å®¢æˆ·ç«¯ä»£ç ï¼Œè¿™å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œèƒ½æ›´ç›´æ¥åœ°è§£å†³é—®é¢˜ã€‚ä½†è¿™ä¹Ÿå¹¶ä¸æ˜¯è¯´ï¼Œé‚£ä½å¼€å‘å·¥ç¨‹å¸ˆå‘Šè¯‰æˆ‘çš„å­¦ä¹ è„‰ç»œæ˜¯é”™è¯¯çš„ï¼Œåªä¸è¿‡å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªéå¸¸é€‚åˆæµ‹è¯•å·¥ç¨‹å¸ˆçš„å­¦ä¹ æ–¹æ³•ã€‚</p><p>é‚£åœ¨é¢å¯¹ä¸€ä¸ªé™Œç”Ÿçš„æ–°åè®®æ—¶ï¼Œæµ‹è¯•å·¥ç¨‹å¸ˆçš„é¦–è¦ä»»åŠ¡æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><strong>åœ¨æˆ‘çœ‹æ¥ï¼Œå°±æ˜¯è¦æµ‹è¯•æ¥å£çš„æ­£ç¡®é€»è¾‘ã€é”™è¯¯é€»è¾‘æ˜¯å¦æ»¡è¶³æœ€åˆçš„éœ€æ±‚ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¿«é€Ÿåœ°æŒæ¡éªŒè¯æ‰‹æ®µã€‚</strong>åœ¨æ—¶é—´ç´§è¿«çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¿˜æ˜¯å…ˆå­¦ä¹ æ–°åè®®çš„åŸºç¡€çŸ¥è¯†ï¼Œå†å­¦ä¹ æ€ä¹ˆä½¿ç”¨å®ƒï¼Œå°±æ— ç–‘å‹æ¦¨äº†æµ‹è¯•çš„å·¥æœŸï¼Œä¹Ÿä¼šè®©æˆ‘ä»¬åœ¨çœŸæ­£å¼€å§‹å·¥ä½œæ—¶æ‰‹å¿™è„šä¹±ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä»è§£å†³å®é™…é—®é¢˜çš„è§’åº¦å‡ºå‘ï¼Œç›´æ¥æ‹¿åˆ°å¼€å‘å·¥ç¨‹å¸ˆæä¾›çš„è°ƒç”¨å®¢æˆ·ç«¯ä»£ç ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¿«é€Ÿå®Œæˆå·¥ä½œäº†ï¼›åœ¨å®Œæˆå·¥ä½œçš„åç»­æ—¶é—´é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ…¢æ…¢è¡¥å……åŸºç¡€çŸ¥è¯†ã€‚è¿™é‡Œéœ€è¦ä½ æ³¨æ„çš„æ˜¯ï¼Œæˆ‘å¹¶ä¸æ˜¯è¯´åŸºç¡€çŸ¥è¯†ä¸é‡è¦ï¼Œè€Œæ˜¯è¯´åœ¨é¡¹ç›®è¿›è¡Œè¿‡ç¨‹ä¸­ï¼Œå­¦ä¹ åŸºç¡€çŸ¥è¯†å¾ˆå¤šæ—¶å€™æ²¡æœ‰å®Œæˆé¡¹ç›®çš„è´¨é‡ä¿éšœå·¥ä½œé‡è¦ã€‚</p><h2>ç¬¬ä¸€æ¬¡æ¥è§¦WebSocketæ¥å£</h2><p>æˆ‘åœ¨å‰é¢è¯´äº†ä¸€å¤§å †æ–¹æ³•è®ºï¼Œä½ çœ‹åˆ°åå¯èƒ½è¿˜æ˜¯æ‘¸ä¸åˆ°å¤´è„‘ï¼Œé‚£ä¹ˆç°åœ¨ï¼Œæˆ‘å°±ä»¥ä¸€ä¸ªæˆ‘äº²èº«ç»å†çš„ä¾‹å­æ¥å‘Šè¯‰ä½ ï¼Œé¢å¯¹ä¸€ä¸ªé™Œç”Ÿåè®®æ¥å£è¦æ€ä¹ˆå»åšæµ‹è¯•ã€‚</p><p>å¤§æ¦‚æ˜¯åœ¨2017å¹´ï¼Œæˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°WebSocketåè®®çš„æ¥å£ï¼Œå½“å¼€å‘å·¥ç¨‹å¸ˆå‘Šè¯‰æˆ‘è¿™æ˜¯ä¸€ä¸ªWebSocketçš„æ¥å£æ—¶ï¼Œæˆ‘ä¸€è„¸æ‡µï¼Œå®Œå…¨ä¸çŸ¥é“è¦å¦‚ä½•å¼€å§‹æµ‹è¯•å®ƒã€‚</p><p>æˆ‘å…ˆåšçš„å°±æ˜¯å’Œå¼€å‘è¦äº†ä»–ä»¬è°ƒç”¨æ–¹çš„ä»£ç ï¼Œå½“æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªä»£ç æ—¶ï¼Œè¿˜æ˜¯å¾ˆéš¾ä¸ºæƒ…çš„ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨Node.jsç¼–å†™çš„ï¼Œå½“æ—¶æˆ‘å¯¹è¿™ä¸ªæŠ€æœ¯çŸ¥ä¹‹ç”šå°‘ã€‚ä½†å‡­ç€è‡ªå·±çš„ç»éªŒç§¯ç´¯ï¼Œæˆ‘å¤šå¤šå°‘å°‘è¿˜èƒ½çœ‹æ‡‚ä¸€ç‚¹è¿™ä¸ªä»£ç ï¼Œç„¶è€Œæˆ‘åœ¨è¯»äº†ä»£ç ä¹‹åï¼Œå‘ç°è‡ªå·±åŸºäºè¿™ä¸ªä»£ç å†™æµ‹è¯•ç”¨ä¾‹å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºæˆ‘å¯¹Node.jsæŠ€æœ¯å®åœ¨å¤ªé™Œç”Ÿäº†ï¼Œé™Œç”Ÿåˆ°æˆ‘æ— æ³•åˆ©ç”¨å®ƒæ¥å®Œæˆæ¥å£æµ‹è¯•ã€‚</p><p>è¿™ç§æƒ…å†µæˆ‘ç›¸ä¿¡ä½ è‚¯å®šä¹Ÿé‡è§è¿‡ï¼Œé‚£å°±æ˜¯å¼€å‘å·¥ç¨‹å¸ˆå¾ˆNiceåœ°æŠŠä»£ç ç»™äº†ä½ ï¼Œä½†ä½ å´æ²¡åŠæ³•åˆ©ç”¨å®ƒã€‚ä½†è¿™é‡Œæˆ‘æƒ³å‘Šè¯‰ä½ çš„æ˜¯ï¼Œé¢å¯¹ä¸€ä¸ªé™Œç”Ÿåè®®çš„æ¥å£æµ‹è¯•ä»»åŠ¡æ—¶ï¼Œæ— è®ºå¦‚ä½•ï¼Œç¬¬ä¸€æ¬¡ä½ è¿˜æ˜¯éœ€è¦å…ˆæ‹¿åˆ°å¹¶äº†è§£å¼€å‘å·¥ç¨‹å¸ˆå†™çš„å®¢æˆ·ç«¯ä»£ç ï¼Œå› ä¸ºè¿™æ ·ï¼Œä½ å°±å¯ä»¥å¯¹è°ƒç”¨æ–¹å¼ã€å‚æ•°ç­‰æ¥å£ç›¸å…³çš„ä¸€äº›å†…å®¹æœ‰åˆæ­¥å°è±¡ã€‚åœ¨è¯»å®Œç›¸å…³ä»£ç åï¼Œä½ å°±ç®—æ˜¯å’Œè¿™äº›æ¥å£å®Œæˆäº†é¦–æ¬¡â€œä¼šé¢â€ï¼Œä¸‹é¢ä½ å°±è¦æƒ³åŠæ³•æ•²å¼€æ¥å£çš„å¤§é—¨ï¼Œè®©è‡ªå·±èƒ½è®¿é—®è¢«æµ‹æ¥å£ã€‚</p><p>ç”±äºæŠ€æœ¯æ ˆé—®é¢˜ï¼Œæˆ‘æ²¡åŠæ³•å€ŸåŠ©å¼€å‘å·¥ç¨‹å¸ˆçš„åŠ›é‡å®Œæˆæ¥å£æµ‹è¯•ä»»åŠ¡ï¼Œå› æ­¤æˆ‘æ¥ä¸‹æ¥æƒ³åˆ°çš„æ˜¯ï¼Œå€ŸåŠ©ä¸€äº›è‡ªå·±å·²ç»ç†Ÿæ‚‰çš„å·¥å…·æ¥å®Œæˆæœ¬æ¬¡æµ‹è¯•ã€‚æˆ‘ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯æˆ‘ä»¬åœ¨ä¹‹å‰è¯¾ç¨‹ä¸­ä¸€èµ·ä½¿ç”¨è¿‡çš„Fiddlerï¼Œå› ä¸ºåœ¨ä»»ä½•ä¸€ä¸ªæ¥å£é¡¹ç›®å¼€å§‹æ—¶ï¼Œæ— è®ºå¼€å‘æ˜¯ä¸æ˜¯ç»™äº†æˆ‘æ¥å£æ–‡æ¡£ï¼Œæˆ‘éƒ½ä¼šå…ˆç”¨Fiddlerè®¿é—®çœ‹ä¸€ä¸‹ã€‚</p><p>é‚£ä¹ˆWebSocketç”¨Fiddleræ€ä¹ˆæå®šï¼Ÿæˆ‘å½“æ—¶æœç´¢äº†ä¸€ä¸‹ï¼Œè¿˜çœŸæ˜¯æœ‰åŠæ³•ï¼Œå…·ä½“çš„åŠæ³•æˆ‘å°±ä¸åœ¨è¿™é‡Œå¤šè¯´äº†ï¼Œå…¶å®ä¸»è¦å°±æ˜¯ä¿®æ”¹äº†Fiddlerä¸­Rulesä¸‹çš„Customize Rulesï¼Œå¦‚æœä½ æ„Ÿå…´è¶£å¯ä»¥è‡ªå·±å»æœä¸€ä¸‹ã€‚æˆ‘åªæ˜¯æƒ³å‘Šè¯‰ä½ ï¼Œå½“ä½ é¢å¯¹é™Œç”ŸæŠ€æœ¯é—®é¢˜çš„æ—¶å€™ï¼Œä½ åº”è¯¥ä½¿ç”¨ä½ æœ€ç†Ÿæ‚‰çš„æŠ€æœ¯å»å°è¯•è§£å†³é—®é¢˜ã€‚</p><p>ä½†ä»ä¸‹é¢çš„å›¾ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æˆ‘æ‰¾åˆ°äº†Fiddleræˆªè·WebSocketæ¥å£çš„åŠæ³•ï¼Œå´ä¸éš¾å‘ç°ï¼Œæ‰€æˆªè·çš„å…¨éƒ¨æ¶ˆæ¯éƒ½åœ¨æ—¥å¿—é‡Œé¢ï¼Œæ ¹æœ¬æ— æ³•æ“ä½œï¼Œæ‰€ä»¥æˆ‘æƒ³ç”¨Fiddlerå®ŒæˆWebSocketæµ‹è¯•çš„æƒ³æ³•ä¹Ÿå°±èƒæ­»è…¹ä¸­äº†ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/28/c5/28455a0b055a49b69f30963c1d3cf8c5.png?wh=1300*755\" alt=\"\"></p><p>ä½†æ˜¯ï¼Œæˆ‘å¯ä»¥å€ŸåŠ©Fiddleråˆ†æWebSocketçš„æ¥å£ï¼Œè¿™ä¹Ÿå’Œæˆ‘ä»¬ä¸€å¼€å§‹ç»™Fiddlerè¿™æ¬¾å·¥å…·çš„å®šä½ä¸€æ ·ï¼Œé‚£å°±æ˜¯é€šè¿‡å®ƒè¾…åŠ©åˆ†ææˆ‘ä»¬çš„è¢«æµ‹æ¥å£ã€‚</p><h2>è‡ªå·±å†™WebSocketæµ‹è¯•ä»£ç </h2><p>å½“ç”¨å·²æœ‰å·¥å…·åŸºç¡€è§£å†³WebSocketæ¥å£æµ‹è¯•è¿™ä¸ªæƒ³æ³•ç ´ç­äº†åï¼Œæˆ‘å¼€å§‹å¯»æ±‚é€šè¿‡ç¼–å†™ä»£ç ï¼Œè§£å†³WebSocketçš„æ¥å£æµ‹è¯•ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘è¿˜æ˜¯å»ºè®®ä½ è¦ä»¥ä½ è‡ªå·±çš„æŠ€æœ¯æ ˆä¸ºå‡ºå‘ç‚¹ï¼Œå¯»æ‰¾è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚ç”±äºæˆ‘çš„ä¸»è¦ç¼–ç¨‹è¯­è¨€æ˜¯Pythonï¼Œå› æ­¤ä¸‹é¢ä¸€äº›è®²è§£çš„ç¤ºä¾‹ä»£ç æ®µï¼Œæˆ‘è¿˜æ˜¯ä»¥Pythonä¸ºä¾‹ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œè§£å†³é—®é¢˜çš„æ€è·¯å¹¶ä¸é™äºPythonçš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¯ä»¥æ˜¯ä½ ä½¿ç”¨çš„ä»»ä½•å…¶å®ƒè¯­è¨€ã€‚</p><p>æˆ‘å‘ç°Pythonæä¾›äº†WebSocketçš„åè®®åº“ï¼Œå› æ­¤æˆ‘åªè¦ç”¨å®ƒå®Œæˆå®¢æˆ·ç«¯çš„æ’°å†™ï¼Œå°±å¯ä»¥è¿›è¡Œæ¥å£æµ‹è¯•äº†ã€‚è¿™é‡Œï¼Œæˆ‘å†™ä¸‹äº†ç¬¬ä¸€ä¸ªWebSocketçš„è°ƒç”¨ä»£ç ï¼ˆè¿™é‡Œæˆ‘ä»¬ä»¥ <a href=\"http://www.websocket.org/demos/echo/\">http://www.websocket.org/demos/echo/</a> ä¸ºä¾‹)ï¼Œå¦‚ä¸‹é¢å›¾ä¸­æ‰€ç¤ºï¼Œæˆ‘åœ¨ä»£ç é‡Œé¢å†™äº†è¯¦ç»†çš„æ³¨é‡Šï¼Œä½ è‚¯å®šèƒ½çœ‹æ‡‚æ¯ä¸€å¥è¯çš„æ„æ€ã€‚</p><pre><code>#å¼•å…¥websocketçš„create_connectionç±»\nfrom websocket import create_connection\n# å»ºç«‹å’ŒWebSocketæ¥å£çš„é“¾æ¥\nws = create_connection(&quot;ws://echo.websocket.org&quot;)\n# æ‰“å°æ—¥å­\nprint(&quot;å‘é€ 'Hello, World'...&quot;)\n# å‘é€Helloï¼ŒWorld\nws.send(&quot;Hello, World&quot;)\n# å°†WebSocketçš„è¿”å›å€¼å­˜å‚¨resultå˜é‡\nresult = ws.recv()\n# æ‰“å°è¿”å›çš„result\nprint(&quot;è¿”å›&quot;+result)\n# å…³é—­WebSocketé“¾æ¥\nws.close()\n</code></pre><p>ä¸çŸ¥é“ä½ å‘ç°æ²¡æœ‰ï¼Œä¸Šé¢çš„ä»£ç å’ŒHTTPåè®®çš„æ¥å£ç±»ä¼¼ï¼Œéƒ½æ˜¯å…ˆå’Œä¸€ä¸ªè¯·æ±‚å»ºç«‹è¿æ¥ï¼Œç„¶åå‘é€ä¿¡æ¯ã€‚å®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼ŒWebSocketæ˜¯ä¸€ä¸ªé•¿è¿æ¥ï¼Œå› æ­¤éœ€è¦äººä¸ºçš„å»ºç«‹è¿æ¥ï¼Œç„¶åå†å…³é—­é“¾æ¥ï¼Œè€ŒHTTPå´å¹¶ä¸éœ€è¦è¿›è¡Œè¿™ä¸€æ“ä½œã€‚</p><p>æˆ‘ç›¸ä¿¡ä½ è‚¯å®šè¿˜è®°å¾—åœ¨æµ‹è¯•æ¡†æ¶é‚£ä¸€èŠ‚ï¼ˆ<a href=\"https://time.geekbang.org/column/article/195483\">04</a>ï¼‰ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ä¸€äº›çº¿æ€§çš„æ¥å£æµ‹è¯•ä»£ç ï¼Œç„¶åé€šè¿‡åˆ†æè¿™äº›ä»£ç æŠ½è±¡å‡ºCommonç±»ï¼Œéšç€Commonç±»çš„ä¸æ–­ä¸°å¯Œï¼Œå°±å½¢æˆäº†ä½ è‡ªå·±ç§æœ‰åŒ–çš„æµ‹è¯•æ¡†æ¶ï¼Œé‚£ä¹ˆç°åœ¨é—®é¢˜æ¥äº†ï¼šCommonç±»ä¸­å¯ä»¥ä¹Ÿæ”¾å…¥WebSocketçš„é€šç”¨æ–¹æ³•å—ï¼Ÿ</p><h2>å°†WebSocketæ¥å£å°è£…è¿›ä½ çš„æ¡†æ¶</h2><p>çœ‹è§ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ååº”åº”è¯¥æ˜¯ï¼Œè¿™é‡Œæœ‰ä»€ä¹ˆä¸œè¥¿å¯ä»¥æ”¾åˆ°æˆ‘ä»¬è‡ªå·±çš„Commonç±»ä¸­å‘¢ï¼Ÿä½ å¯ä»¥æŒ‰ç…§â€œæµ‹è¯•ä»£ç å³æ¡†æ¶â€è¿™ä¸€æ€è·¯å°†è¿™ä¸ªWebSocketæ¥å£å°è£…è¿›ä½ çš„æ¡†æ¶ã€‚</p><p>æˆ‘ä»¬åœ¨å‰é¢è¯¾ç¨‹ä¸­å°è£…äº†Commonç±»ï¼Œä½ å¯ä»¥åœ¨å®ƒçš„æ„é€ å‡½æ•°ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªAPIç±»å‹çš„å‚æ•°ï¼Œä»¥ä¾¿äºçŸ¥é“è‡ªå·±è¦åšçš„æ˜¯ä»€ä¹ˆåè®®çš„æ¥å£ï¼Œå…¶ä¸­httpä»£è¡¨HTTPåè®®æ¥å£ï¼Œwsä»£è¡¨WebSocketåè®®æ¥å£ã€‚ç”±äºWebSocketæ˜¯ä¸€ä¸ªé•¿è¿æ¥ï¼Œæˆ‘ä»¬åœ¨Commonç±»ææ„å‡½æ•°ä¸­æ·»åŠ äº†å…³é—­wsé“¾æ¥çš„ä»£ç ï¼Œä»¥é‡Šæ”¾WebSocketé•¿è¿æ¥ã€‚ä¾æ®å‰é¢çš„äº¤äº’æµç¨‹ï¼Œå®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n# pythonä»£ç ä¸­å¼•å…¥requestsåº“ï¼Œå¼•å…¥åæ‰å¯ä»¥åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨å¯¹åº”çš„ç±»ä»¥åŠæˆå‘˜å‡½æ•°\nimport requests\nfrom websocket import create_connection\n\n\n# å®šä¹‰ä¸€ä¸ªcommonçš„ç±»ï¼Œå®ƒçš„çˆ¶ç±»æ˜¯object\nclass Common(object):\n  # commonçš„æ„é€ å‡½æ•°\n  def __init__(self,url_root,api_type):\n    '''\n    :param api_type:æ¥å£ç±»ä¼¼å½“å‰æ”¯æŒhttpã€wsï¼Œhttpå°±æ˜¯HTTPåè®®ï¼Œwsæ˜¯WebSocketåè®®  \n    :param url_root: è¢«æµ‹ç³»ç»Ÿçš„æ ¹è·¯ç”±   \n    '''    \n    if api_type=='ws':\n      self.ws = create_connection(url_root)\n    elif api_type=='http':\n      self.ws='null'\n      self.url_root = url_root\n\n\n  # wsåè®®çš„æ¶ˆæ¯å‘é€\n  \n  def send(self,params):\n    '''\n    :param params: websocketæ¥å£çš„å‚æ•°\n    \n    :return: è®¿é—®æ¥å£çš„è¿”å›å€¼\n    ''' \n    self.ws.send(params)\n    res = self.ws.recv()\n    return res\n\n\n  # commonç±»çš„ææ„å‡½æ•°ï¼Œæ¸…ç†æ²¡æœ‰ç”¨çš„èµ„æº\n  \n  def __del__(self):\n    '''\n    :return:\n    '''\n    if self.ws!='null&quot;:\n       self.ws.close()\n  def get(self, uri, params=None):\n    '''\n    å°è£…ä½ è‡ªå·±çš„getè¯·æ±‚ï¼Œuriæ˜¯è®¿é—®è·¯ç”±ï¼Œparamsæ˜¯getè¯·æ±‚çš„å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰é»˜è®¤ä¸ºç©º \n    :param uri: è®¿é—®è·¯ç”± \n    :param params: ä¼ é€’å‚æ•°ï¼Œstringç±»å‹ï¼Œé»˜è®¤ä¸ºNone \n    :return: æ­¤æ¬¡è®¿é—®çš„response\n    '''\n    # æ‹¼å‡‘è®¿é—®åœ°å€\n    if params is not None:\n      url = self.url_root + uri + params\n    else:    \n      url = self.url_root + uri\n    # é€šè¿‡getè¯·æ±‚è®¿é—®å¯¹åº”åœ°å€\n    res = requests.get(url)\n    # è¿”å›requestçš„Responseç»“æœï¼Œç±»å‹ä¸ºrequestsçš„Responseç±»å‹\n    return res\n  def post(self, uri, params=None):\n    '''\n    å°è£…ä½ è‡ªå·±çš„postæ–¹æ³•ï¼Œuriæ˜¯è®¿é—®è·¯ç”±ï¼Œparamsæ˜¯postè¯·æ±‚éœ€è¦ä¼ é€’çš„å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°è¿™é‡Œä¸ºç©º\n    :param uri: è®¿é—®è·¯ç”±\n    :param params: ä¼ é€’å‚æ•°ï¼Œstringç±»å‹ï¼Œé»˜è®¤ä¸ºNone\n    :return: æ­¤æ¬¡è®¿é—®çš„response\n    '''\n    # æ‹¼å‡‘è®¿é—®åœ°å€\n    url = self.url_root + uri\n    if params is not None:\n       # å¦‚æœæœ‰å‚æ•°ï¼Œé‚£ä¹ˆé€šè¿‡postæ–¹å¼è®¿é—®å¯¹åº”çš„urlï¼Œå¹¶å°†å‚æ•°èµ‹å€¼ç»™requests.posté»˜è®¤å‚æ•°data\n      # è¿”å›requestçš„Responseç»“æœï¼Œç±»å‹ä¸ºrequestsçš„Responseç±»å‹\n      res = requests.post(url, data=params)\n    else:\n      # å¦‚æœæ— å‚æ•°ï¼Œè®¿é—®æ–¹å¼å¦‚ä¸‹\n      # è¿”å›requestçš„Responseç»“æœï¼Œç±»å‹ä¸ºrequestsçš„Responseç±»å‹\n      res = requests.post(url)    \n    return res\n\n\n  def put(self,uri,params=None):\n    '''\n    å°è£…ä½ è‡ªå·±çš„putæ–¹æ³•ï¼Œuriæ˜¯è®¿é—®è·¯ç”±ï¼Œparamsæ˜¯putè¯·æ±‚éœ€è¦ä¼ é€’çš„å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°è¿™é‡Œä¸ºç©º\n    :param uri: è®¿é—®è·¯ç”±\n    :param params: ä¼ é€’å‚æ•°ï¼Œstringç±»å‹ï¼Œé»˜è®¤ä¸ºNone\n    :return: æ­¤æ¬¡è®¿é—®çš„response\n    '''\n    url = self.url_root+uri\n    if params is not None:\n      # å¦‚æœæœ‰å‚æ•°ï¼Œé‚£ä¹ˆé€šè¿‡putæ–¹å¼è®¿é—®å¯¹åº”çš„urlï¼Œå¹¶å°†å‚æ•°èµ‹å€¼ç»™requests.puté»˜è®¤å‚æ•°data\n      # è¿”å›requestçš„Responseç»“æœï¼Œç±»å‹ä¸ºrequestsçš„Responseç±»å‹\n      res = requests.put(url, data=params)\n    else:\n      # å¦‚æœæ— å‚æ•°ï¼Œè®¿é—®æ–¹å¼å¦‚ä¸‹\n      # è¿”å›requestçš„Responseç»“æœï¼Œç±»å‹ä¸ºrequestsçš„Responseç±»å‹\n      res = requests.put(url)\n    return res\n\n\n  def delete(self,uri,params=None):\n    '''\n    å°è£…ä½ è‡ªå·±çš„deleteæ–¹æ³•ï¼Œuriæ˜¯è®¿é—®è·¯ç”±ï¼Œparamsæ˜¯deleteè¯·æ±‚éœ€è¦ä¼ é€’çš„å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°è¿™é‡Œä¸ºç©º\n    :param uri: è®¿é—®è·¯ç”±\n    :param params: ä¼ é€’å‚æ•°ï¼Œstringç±»å‹ï¼Œé»˜è®¤ä¸ºNone\n    :return: æ­¤æ¬¡è®¿é—®çš„response\n    '''\n    url = self.url_root + uri\n    if params is not None:\n      # å¦‚æœæœ‰å‚æ•°ï¼Œé‚£ä¹ˆé€šè¿‡putæ–¹å¼è®¿é—®å¯¹åº”çš„urlï¼Œå¹¶å°†å‚æ•°èµ‹å€¼ç»™requests.puté»˜è®¤å‚æ•°data\n      # è¿”å›requestçš„Responseç»“æœï¼Œç±»å‹ä¸ºrequestsçš„Responseç±»å‹\n      res = requests.delete(url, data=params)\n    else:\n      # å¦‚æœæ— å‚æ•°ï¼Œè®¿é—®æ–¹å¼å¦‚ä¸‹\n      # è¿”å›requestçš„Responseç»“æœï¼Œç±»å‹ä¸ºrequestsçš„Responseç±»å‹\n      res = requests.put(url)\n    return res\n</code></pre><p>ä¸Šé¢çš„ä»£ç å¾ˆé•¿ï¼Œä½†æˆ‘çš„æ³¨é‡Šå¾ˆè¯¦ç»†ï¼Œæˆ‘å¹¶ä¸å»ºè®®ä½ ä¸€å­—ä¸è½åœ°éƒ½çœ‹å®Œï¼Œä½ åªè¦åœ¨ä½¿ç”¨çš„æ—¶å€™çœ‹ä¸€ä¸‹å¯¹åº”çš„æ–¹æ³•å°±å¥½äº†ã€‚å®ƒæ˜¯ä¸€ä¸ªè¶…çº§å·¥å…·é›†åˆï¼Œæœ€åä¼šå˜æˆä½ è‡ªå·±çš„ç±»ä¼¼å“†å•¦Aæ¢¦çš„ä¸‡èƒ½å£è¢‹ï¼Œä½ åªè¦åšå¥½è‡ªå·±çš„ç§¯ç´¯å°±å¯ä»¥äº†ã€‚</p><p>é‚£ä¹ˆï¼Œä½¿ç”¨ä¸Šè¿°çš„Commonç±»å°†ä¸Šé¢é‚£ä¸ªæµæ°´è´¦ä¸€æ ·çš„è„šæœ¬è¿›è¡Œæ”¹é€ åï¼Œå°±å¾—å‡ºäº†ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code>from common import Common\n# å»ºç«‹å’ŒWebSocketæ¥å£çš„é“¾æ¥\ncon = Common('ws://echo.websocket.org','ws')\n# è·å–è¿”å›ç»“æœ\nresult = con.send('Hello, World...')\n#æ‰“å°æ—¥å¿—\nprint(result)\n#é‡Šæ”¾WebSocketçš„é•¿è¿æ¥\ndel con\n</code></pre><p>ç°åœ¨ï¼Œä»æ”¹é€ åçš„ä»£ç ä¸­ï¼Œä½ æ˜¯ä¸æ˜¯æ›´èƒ½ä½“ä¼šåˆ°æ¡†æ¶çš„é­…åŠ›äº†ï¼Ÿå®ƒèƒ½è®©ä»£ç å˜å¾—æ›´åŠ ç®€æ´å’Œæ˜“è¯»ï¼Œå°†WebSocketçš„åè®®å°è£…åˆ°ä½ çš„æ¡†æ¶åï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªæ—¢åŒ…å«HTTPåè®®åˆåŒ…å«WebSocketåè®®çš„æ¥å£æµ‹è¯•æ¡†æ¶äº†ï¼Œéšç€ä½ ä¸æ–­åœ°ç§¯ç´¯æ–°åè®®ï¼Œä½ çš„æ¡†æ¶ä¼šè¶Šæ¥è¶Šå¼ºå¤§ï¼Œä½ è‡ªå·±çš„ç§˜å¯†æ­¦å™¨åº“ä¹Ÿä¼šä¸æ–­æ‰©å……ï¼Œéšç€ä½ å¯¹å®ƒçš„ä¸æ–­å®Œå–„ï¼Œå®ƒä¼šè®©ä½ çš„æ¥å£æµ‹è¯•å·¥ä½œè¶Šæ¥è¶Šç®€å•ï¼Œè¶Šæ¥è¶Šå¿«é€Ÿã€‚</p><h2>æ€»ç»“</h2><p>ç¾å¥½çš„æ—¶å…‰è¿‡å¾—éƒ½å¾ˆå¿«ï¼Œåˆåˆ°äº†æœ¬èŠ‚è¯¾ç»“æŸçš„æ—¶å€™äº†ï¼Œæˆ‘ä»Šå¤©ä¸»è¦è®²äº†é¢å¯¹ä¸€ä¸ªé™Œç”Ÿåè®®æ—¶ï¼ˆæ¯”å¦‚è¯´WebSocketï¼‰ï¼Œä½ è¯¥å¦‚ä½•ä»é›¶å¼€å§‹å®Œæˆæ¥å£æµ‹è¯•ä»»åŠ¡ã€‚</p><p>é’ˆå¯¹ä¸€ä¸ªé™Œç”Ÿåè®®çš„ç¬¬ä¸€æ¬¡æ¥å£æµ‹è¯•ï¼Œä½ è¦ä¿æŒè‡ªå·±æ•é”çš„æµ‹è¯•å—…è§‰ï¼Œä¾æ®è‡ªå·±çš„æŠ€æœ¯åŸºç¡€ï¼Œå°½å¿«è§£å†³é—®é¢˜ã€‚æ€»åœ°æ¥è¯´ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‰æ­¥å¿«é€Ÿå®Œæˆæµ‹è¯•ä»»åŠ¡ï¼š</p><ol>\n<li>å€ŸåŠ›å¼€å‘å·¥ç¨‹å¸ˆã€‚ä½ é¦–å…ˆè¯¥å€ŸåŠ›å°±æ˜¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œä½†ä½ ä¸è¦è¿›å…¥å¼€å‘å·¥ç¨‹å¸ˆç»™ä½ çš„é‚£ç§ï¼Œä»æŠ€æœ¯åŸºç¡€å’Œç†è®ºå¼€å§‹å­¦èµ·ï¼Œå†é€æ­¥åº”ç”¨çš„å­¦ä¹ è„‰ç»œã€‚ä½ è¦ä¸€å‡»è‡´å‘½ï¼Œç›´æ¥æŠŠä»–çš„å®¢æˆ·ç«¯ä»£ç æ‹¿æ¥ï¼Œå°½æœ€å¤§å¯èƒ½æŒªä¸ºå·±ç”¨ï¼Œå°†å…¶å˜æˆè‡ªå·±çš„æ¥å£æµ‹è¯•ä»£ç ã€‚</li>\n<li>ç«™åœ¨è‡ªå·±çš„æŠ€æœ¯æ ˆä¹‹ä¸Šï¼Œå®ŒæˆæŠ€æœ¯ç§¯ç´¯ã€‚å¦‚æœå¼€å‘å·¥ç¨‹å¸ˆçš„ä»£ç å¹¶ä¸èƒ½æ‹¿æ¥ä½¿ç”¨ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ç«™åœ¨è‡ªå·±çš„æŠ€æœ¯æ ˆä¸Šå¯»æ±‚è§£å†³æ–¹æ³•ï¼Œè¿™å…¶ä¸­æ—¢åŒ…å«äº†ä½ å·²ç»ç†Ÿæ‚‰çš„æµ‹è¯•å·¥å…·ã€æµ‹è¯•å¹³å°ï¼Œä¹ŸåŒ…å«äº†è‡ªå·±çš„æµ‹è¯•æ¡†æ¶å’Œç¼–ç åŸºç¡€ã€‚</li>\n<li>å½’å…¥æ¡†æ¶ã€‚æ— è®ºä½ ä½¿ç”¨å“ªä¸€ç§æ–¹æ³•ï¼Œåœ¨å®Œæˆæµ‹è¯•å·¥ä½œåï¼Œä½ è¿˜æ˜¯è¦æŒæ¡å¯¹åº”çš„ç†è®ºåŸºç¡€ï¼ŒåŒæ—¶æƒ³åŠæ³•å°†è¿™ä¸ªä¸€å¼€å§‹é™Œç”Ÿçš„æ¥å£ï¼Œé€šè¿‡è‡ªå·±ç†Ÿæ‚‰çš„æ–¹å¼åˆå¹¶åˆ°ä½ è‡ªå·±çš„æ¡†æ¶ä¸­ï¼Œä¸æ–­æ‰©å……è‡ªå·±æ¡†æ¶çš„æµ‹è¯•èƒ½åŠ›ï¼Œä¸æ–­ä¸°å¯Œä½ è‡ªå·±çš„æµ‹è¯•æ‰‹æ®µã€‚</li>\n</ol><h2>æ€è€ƒé¢˜</h2><p>æˆ‘ä»¬ä»Šå¤©ä¸€èµ·å­¦ä¹ äº†å¦‚ä½•ç ´è§£é™Œç”Ÿåè®®æ¥å£æµ‹è¯•éš¾é¢˜çš„æ­¥éª¤ï¼Œé‚£ä¹ˆé¢å¯¹WebSocketçš„æ¥å£æµ‹è¯•ä»»åŠ¡ï¼Œç»“åˆä½ ç°æœ‰çš„æŠ€æœ¯æ ˆï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿæœ‰ä½ è‡ªå·±çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿä½ å·¥ä½œä¸­å¦‚æœæœ‰ç±»ä¼¼çš„é™Œç”Ÿåè®®ï¼ˆæ—¢å¯ä»¥æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦çš„åè®®ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¼ä¸šç§æœ‰åè®®ï¼‰ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸­ç•™ä¸‹ä½ çš„ç–‘é—®å’Œä½ çš„åšæ³•ã€‚</p><p>æˆ‘æ˜¯é™ˆç£Šï¼Œæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« è®©ä½ æœ‰æ–°çš„å¯å‘ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸€èµ·æ²Ÿé€šæ¢è®¨ã€‚</p>","neighbors":{"left":{"article_title":"06 | æ¥å£æµ‹è¯•å¹³å°ï¼šå·¥å…·å’Œæ¡†æ¶ä¸å¯ä»¥å…¼å®¹ï¼Ÿ","id":197309},"right":{"article_title":"08 | æµ‹è¯•æ•°æ®ï¼šæ˜¯ä¸æ˜¯å¯ä»¥æŠŠæ‰€æœ‰çš„å‚æ•°éƒ½ä¿å­˜åˆ°Excelä¸­ï¼Ÿ","id":199546}},"comments":[{"had_liked":false,"id":178670,"user_name":"happychap","can_delete":false,"product_type":"c1","uid":1388033,"ip_address":"","ucode":"C872B959BF2F3D","user_header":"https://static001.geekbang.org/account/avatar/00/15/2e/01/14a478bb.jpg","comment_is_top":false,"comment_ctime":1581776443,"is_pvip":true,"replies":[{"id":"69361","content":"è°¢è°¢æ‚¨çš„æ”¯æŒï¼Œxmppå’Œmqttåè®®ç¡®å®ä¸å®¹æ˜“é‡è§ï¼Œçœ‹åˆ°æ‚¨çš„è§£å†³æ€è·¯å¯çœŸæ£’ï¼Œå€ŸåŠ›æ‰“åŠ›å¾—æ–¹æ³•ä¼šè®©æˆ‘ä»¬äº‹åŠåŠŸå€ã€‚è°¢è°¢æ‚¨çš„ç•™è¨€ï¼Œè§£å†³æ–¹æ³•ç‰¹åˆ«æ£’ï¼Œä¹Ÿå¸®æˆ‘æä¾›äº†æ€è€ƒã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Criss@é™ˆç£Š","uid":"1064280","ctime":1581813422,"ip_address":"","comment_id":178670,"utype":1}],"discussion_count":1,"race_medal":0,"score":"57416351291","product_id":100045801,"comment_content":"æˆ‘çš„å°è¯•çš„ä¸€èˆ¬é¡ºåºï¼šç°æˆå·¥å…·ï¼Œå·¥å…·ç°æˆæ’ä»¶ï¼Œæµ‹è¯•æ¡†æ¶+é¡¹ç›®ç»„å°è£…æˆ–é‡‡ç”¨çš„apiåº“ï¼ˆå¦‚ï¼šjunit +å¯¹åº”çš„åè®®å¼€æºåº“ï¼‰ã€‚<br>ä¸ªäººè§‰å¾—é‡åˆ°è¿™ç§æƒ…å†µï¼Œè¦ä¼šç‚¹ç¼–ç¨‹ï¼Œå­°ç»ƒæµ‹è¯•æ¡†æ¶èƒœç®—æ‰å¤§Ê˜á´—Ê˜<br>å·¥ä½œä¸­æœ‰çªç„¶é­é‡xmppå’Œmqttåè®®æ€§èƒ½æµ‹è¯•çš„ç»å†ï¼Œæœ€ç»ˆjmeter+å¼€æºæ’ä»¶+å‚å•†client jaråŒ…+demo+apiæ‰‹å†Œæå®šäº†ä»»åŠ¡ã€‚","like_count":14,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483916,"discussion_content":"è°¢è°¢æ‚¨çš„æ”¯æŒï¼Œxmppå’Œmqttåè®®ç¡®å®ä¸å®¹æ˜“é‡è§ï¼Œçœ‹åˆ°æ‚¨çš„è§£å†³æ€è·¯å¯çœŸæ£’ï¼Œå€ŸåŠ›æ‰“åŠ›å¾—æ–¹æ³•ä¼šè®©æˆ‘ä»¬äº‹åŠåŠŸå€ã€‚è°¢è°¢æ‚¨çš„ç•™è¨€ï¼Œè§£å†³æ–¹æ³•ç‰¹åˆ«æ£’ï¼Œä¹Ÿå¸®æˆ‘æä¾›äº†æ€è€ƒã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581813422,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178378,"user_name":"äº¬éƒ½å¿µæ…ˆè´","can_delete":false,"product_type":"c1","uid":1744834,"ip_address":"","ucode":"2A310A91069A5E","user_header":"https://static001.geekbang.org/account/avatar/00/1a/9f/c2/3d1c2f88.jpg","comment_is_top":false,"comment_ctime":1581673768,"is_pvip":false,"replies":[{"id":"69208","content":"è°¢è°¢æ‚¨çš„ç•™è¨€ï¼Œä¸€ä¸ªè§£å†³é—®é¢˜çš„å®Œç¾è¿‡ç¨‹ã€‚åŠ æ²¹","user_name":"ä½œè€…å›å¤","user_name_real":"Criss@é™ˆç£Š","uid":"1064280","ctime":1581688550,"ip_address":"","comment_id":178378,"utype":1}],"discussion_count":7,"race_medal":0,"score":"40236379432","product_id":100045801,"comment_content":"å¹´å‰åˆšå¥½å…¬å¸å¹´ä¼šï¼Œç„¶åå¼€å‘äº†ä¸ªèŠå¤©å°ç¨‹åºï¼Œå°±ç»™æˆ‘æµ‹ã€‚å½“æ—¶å®Œå…¨ä¸çŸ¥é“æ€ä¹ˆæï¼Œå°±å»çœ‹è¿™ä¸ªåè®®ã€‚ç„¶åå°±æƒ³å…ˆæŠ“åŒ…ï¼Œç»“æœæŠ“ä¸åˆ°ï¼Œæ£é¼“äº†ä¿®æ”¹fiddleræŠ“åˆ°äº†åŒ…ï¼Œç„¶åä¹Ÿæ˜¯çœ‹æŠ“åˆ°çš„æ•°æ®å¥½åƒè·Ÿå¹³æ—¶ä¸ä¸€æ ·ï¼Œç„¶åå„ç§æœç´¢ï¼Œå¹³æ—¶ä½¿ç”¨çš„jmeterï¼Œå°±åœ¨jmeterä¸­æŒ‰å¾€å¸¸çš„æ¥è¯•è¯•ï¼Œæ­£å¸¸å–æ ·å™¨ä¸è¡Œï¼Œæœ€åçœ‹åˆ°jmeterä¸­æœ‰ä¸ªwebsocketå–æ ·å™¨ï¼Œå¼€å¿ƒå®Œæˆå‹æµ‹ã€‚","like_count":9,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483783,"discussion_content":"è°¢è°¢æ‚¨çš„ç•™è¨€ï¼Œä¸€ä¸ªè§£å†³é—®é¢˜çš„å®Œç¾è¿‡ç¨‹ã€‚åŠ æ²¹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581688550,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1692907,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d4/eb/46319136.jpg","nickname":"ã€‚ã€‚ã€‚","note":"","ucode":"3EF9692AAF8C12","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":199962,"discussion_content":"ä½ å¥½   æƒ³è·Ÿä½ è¯·æ•™ä¸‹ç”¨jmeteråšå‹æµ‹çš„å®é™…æµç¨‹       å¯ä»¥å—     å‘ç°åŠ ä¸äº†å¥½å‹   åªèƒ½è¯„è®ºåŒºè§å—ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583640210,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1744834,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9f/c2/3d1c2f88.jpg","nickname":"äº¬éƒ½å¿µæ…ˆè´","note":"","ucode":"2A310A91069A5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1692907,"avatar":"https://static001.geekbang.org/account/avatar/00/19/d4/eb/46319136.jpg","nickname":"ã€‚ã€‚ã€‚","note":"","ucode":"3EF9692AAF8C12","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":208876,"discussion_content":"å…¶å®å®é™…æµç¨‹åœ¨å°å…¬å¸æ˜¯æ²¡æœ‰çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬å…¬å¸å°±åªæœ‰ä¸¤ä¸ªæµ‹è¯•ï¼Œæ¯ä¸ªäººæ‰‹ä¸Šéƒ½ä¼šæœ‰å¾ˆå¤šé¡¹ç›®ï¼ŒåŸºæœ¬åŠŸèƒ½æµ‹è¯•ç»“æŸäº†å°±æ²¡ä»€ä¹ˆï¼Œæˆ‘ä¹Ÿæ˜¯åˆšå¥½æ‰‹ä¸Šæœ‰é¡¹ç›®ï¼Œåˆåœ¨å­¦ä¹ å‹æµ‹å°±æ‹¿è¿‡æ¥ç»ƒæ‰‹ã€‚æ²¡æœ‰å‚ä¸è¿‡æ­£å¼å‹æµ‹ğŸ˜‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1584586458,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":199962,"ip_address":""},"score":208876,"extra":""}]},{"author":{"id":1822249,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ce/29/20f2f553.jpg","nickname":"å¥‹æ–—å°é’å¹´","note":"","ucode":"38D88FD8E21B11","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":185212,"discussion_content":"æ¥¼ä¸»ï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼ŒèŠå¤©å°ç¨‹åºå›å¤è¯­ä½ ä»¬ä¹Ÿæ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582603313,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1744834,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9f/c2/3d1c2f88.jpg","nickname":"äº¬éƒ½å¿µæ…ˆè´","note":"","ucode":"2A310A91069A5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1822249,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/ce/29/20f2f553.jpg","nickname":"å¥‹æ–—å°é’å¹´","note":"","ucode":"38D88FD8E21B11","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":188051,"discussion_content":"æ˜¯çš„jmeterå¯ä»¥è®¾ç½®èŠå¤©ä¿¡æ¯ï¼Œå°±åƒç›´æ’­èŠå¤©é‚£æ ·ï¼Œä¸çŸ¥é“ä½ çš„å›å¤è¯­æ˜¯æŒ‡è‡ªåŠ¨å›å¤è¿˜æ˜¯å°±æ˜¯æ­£å¸¸èŠå¤©","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582790610,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":185212,"ip_address":""},"score":188051,"extra":""}]},{"author":{"id":1171260,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/etbNBmR5PEicra7jbaV9pRsCaibXZ3ichB6JicMOnYowP65W5QMKb8Zicud19jicmEGAGh8ylwDXoYM3SHVU6hf6dFpQ/132","nickname":"roychris","note":"","ucode":"B0E239FB11A006","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171557,"discussion_content":"é¦–å…ˆå¾—é—®æ˜¯ä»€ä¹ˆåè®®å§ï¼Œç½‘ä¸Šä¹Ÿæœ‰ç°æˆçš„websocketæµ‹è¯•å·¥å…·ï¼Œå¯ä»¥ä¸´æ—¶ä½¿ç”¨ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581729697,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1744834,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/9f/c2/3d1c2f88.jpg","nickname":"äº¬éƒ½å¿µæ…ˆè´","note":"","ucode":"2A310A91069A5E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1171260,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/etbNBmR5PEicra7jbaV9pRsCaibXZ3ichB6JicMOnYowP65W5QMKb8Zicud19jicmEGAGh8ylwDXoYM3SHVU6hf6dFpQ/132","nickname":"roychris","note":"","ucode":"B0E239FB11A006","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171942,"discussion_content":"æ‹¿åˆ°é¡¹ç›®å°±çŸ¥é“åè®®æ˜¯ä»€ä¹ˆäº†ï¼Œä½†æ˜¯ä¹ æƒ¯æ˜¯ä¸€æ¥æƒ³è‡ªå·±æœ€æ“…é•¿çš„å·¥å…·æ€ä¹ˆç”¨ï¼Œä¹ æƒ¯æ€§å°±æƒ³jmeteræ€ä¹ˆç”¨äº†ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581760902,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":171557,"ip_address":""},"score":171942,"extra":""}]}]},{"had_liked":false,"id":181954,"user_name":"é’±","can_delete":false,"product_type":"c1","uid":1009652,"ip_address":"","ucode":"2C92A243A463D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg","comment_is_top":false,"comment_ctime":1582684379,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"35942422747","product_id":100045801,"comment_content":"è¿‡ï¼Œå®šä½å¾ˆæ¸…æ¥šï¼Œå…ˆæå®šå·¥ä½œï¼Œå†è¡¥å……æŠ€æœ¯åŸç†ï¼ŒæŠ€æœ¯åŸç†æ˜¯é‡è¦ä¸ç´§æ€¥çš„äº‹æƒ…ï¼Œå·¥ä½œæ˜¯é‡è¦ç´§æ€¥çš„äº‹æƒ…ï¼Œä¸è¿‡æŠ€æœ¯åŸç†éœ€è¦ä¸æ–­çš„è¡¥å……æ‰è¡Œï¼Œå…±å‹‰ã€‚","like_count":9,"discussions":[{"author":{"id":1163974,"avatar":"https://static001.geekbang.org/account/avatar/00/11/c2/c6/88d0c7b2.jpg","nickname":"ä¸€é»˜","note":"","ucode":"F23A6E42DFD0C4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200616,"discussion_content":"å…±å‹‰ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583690370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179877,"user_name":"ç½—æ˜¥å—_Nancy","can_delete":false,"product_type":"c1","uid":1787562,"ip_address":"","ucode":"271E958AC9F0C2","user_header":"https://static001.geekbang.org/account/avatar/00/1b/46/aa/5e1b5a8a.jpg","comment_is_top":false,"comment_ctime":1582115767,"is_pvip":false,"replies":[{"id":"69852","content":"å®Œç¾ è°¢è°¢æ‚¨çš„å»ºè®®ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Criss@é™ˆç£Š","uid":"1064280","ctime":1582122255,"ip_address":"","comment_id":179877,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23056952247","product_id":100045801,"comment_content":"    self.ws=&#39;null&#39;--åŠ ä¸ªå®šä¹‰å¥½ç‚¹<br>    if api_type==&#39;ws&#39;:<br>      self.ws = create_connection(url_root)<br>    elif api_type==&#39;http&#39;:<br>      self.url_root = url_root<br><br>------------------------------------------<br><br>  # commonç±»çš„ææ„å‡½æ•°ï¼Œæ¸…ç†æ²¡æœ‰ç”¨çš„èµ„æº<br>  <br>  def __del__(self):<br>    &#39;&#39;&#39;<br>    :return:<br>    &#39;&#39;&#39;<br>    if self.ws!=&#39;null&#39;:------åŠ ä¸ªåˆ¤æ–­å¥½ç‚¹<br>      self.ws.close()<br><br>ä¸ç„¶æµ‹httpçš„æ—¶å€™websocketä¼šæŠ¥é”™ã€‚","like_count":5,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484436,"discussion_content":"å®Œç¾ è°¢è°¢æ‚¨çš„å»ºè®®ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582122255,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178468,"user_name":"ğŸ¾","can_delete":false,"product_type":"c1","uid":1087256,"ip_address":"","ucode":"D0AD0260351C31","user_header":"https://static001.geekbang.org/account/avatar/00/10/97/18/a5218104.jpg","comment_is_top":false,"comment_ctime":1581694806,"is_pvip":false,"replies":[{"id":"69335","content":"æ‚¨å¥½ï¼Œæ— è®ºæ‚¨è¯´çš„dubboã€protobufè¿˜æ˜¯springcloudï¼ŒgRPCç­‰éƒ½ä¸ä¼šå—åˆ°è¯­è¨€çš„é™åˆ¶è€Œæ— æ³•è°ƒç”¨çš„ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½æ–­å®šæ²¡æœ‰è¿™ä¸ªæƒ…å†µï¼Œé‚£ä¹ˆå°±åªèƒ½é ä½ è‡ªå·±ä¾æ®è‡ªå·±çš„æŠ€æœ¯æ ˆå®Œæˆåè®®çš„å°è£…äº†ï¼Œç›®å‰æ‚¨è¯´çš„dubboï¼Œprotobufä½¿ç”¨å„ç§è¯­è¨€éƒ½æœ‰å¯¹åº”çš„è§£å†³åŠæ³•ï¼Œprotobufå¯ä»¥å‚è€ƒhttps:&#47;&#47;www.jianshu.com&#47;p&#47;58513863b491ï¼›dubboå¯ä»¥ä½¿ç”¨https:&#47;&#47;blog.csdn.net&#47;cyjs1988&#47;article&#47;details&#47;82495136ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Criss@é™ˆç£Š","uid":"1064280","ctime":1581770814,"ip_address":"","comment_id":178468,"utype":1}],"discussion_count":3,"race_medal":0,"score":"23056531286","product_id":100045801,"comment_content":"åƒå¾®æœåŠ¡æ¥å£ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ç‰¹æ®Šåè®®å¦‚dubboã€protobufè¿›è¡Œé€šä¿¡çš„ï¼Œè¿™ç§æƒ…å†µåº”è¯¥æ€ä¹ˆåšæµ‹è¯•å‘¢ï¼Ÿåªèƒ½ç”¨è‡ªå·±æ“…é•¿çš„ç¼–ç¨‹è¯­è¨€å†™ä¸€ä¸ªå®¢æˆ·ç«¯æ¨¡æ‹Ÿè°ƒç”¨æ¥è¿›è¡Œæµ‹è¯•ï¼Ÿè¿™ç§è¿˜éœ€è¦è¿æ¥é…ç½®ä¸­å¿ƒä»€ä¹ˆçš„ã€‚è€Œä¸”ä¼šä¸ä¼šå­˜åœ¨æœ‰äº›åè®®æ˜¯ä¸è·¨è¯­è¨€çš„ï¼Œæ¯”å¦‚ä»…é™Javaè¯­è¨€ï¼Œä¸æ”¯æŒpythonã€‚","like_count":6,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483838,"discussion_content":"æ‚¨å¥½ï¼Œæ— è®ºæ‚¨è¯´çš„dubboã€protobufè¿˜æ˜¯springcloudï¼ŒgRPCç­‰éƒ½ä¸ä¼šå—åˆ°è¯­è¨€çš„é™åˆ¶è€Œæ— æ³•è°ƒç”¨çš„ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½æ–­å®šæ²¡æœ‰è¿™ä¸ªæƒ…å†µï¼Œé‚£ä¹ˆå°±åªèƒ½é ä½ è‡ªå·±ä¾æ®è‡ªå·±çš„æŠ€æœ¯æ ˆå®Œæˆåè®®çš„å°è£…äº†ï¼Œç›®å‰æ‚¨è¯´çš„dubboï¼Œprotobufä½¿ç”¨å„ç§è¯­è¨€éƒ½æœ‰å¯¹åº”çš„è§£å†³åŠæ³•ï¼Œprotobufå¯ä»¥å‚è€ƒhttps://www.jianshu.com/p/58513863b491ï¼›dubboå¯ä»¥ä½¿ç”¨https://blog.csdn.net/cyjs1988/article/details/82495136ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581770814,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1167827,"avatar":"https://static001.geekbang.org/account/avatar/00/11/d1/d3/5dfc36c0.jpg","nickname":"ç‹å¾·å‘","note":"","ucode":"823DFABC56CEB5","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":171949,"discussion_content":"æ¨èä¸€æœ¬ä¹¦ï¼Œå«Javaå¾®æœåŠ¡æµ‹è¯•ï¼Œé‡Œé¢æé«˜çš„é›†æˆæµ‹è¯•å’Œå¥‘çº¦æµ‹è¯•çš„æ€è·¯å¯ä»¥æ’¸ä¸€ä¸‹","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1581761457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1300136,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTL1kXMgeyk9hcCTDWbrwuAW2OiaJmHLTN3ZppVzKJXIXicia8D9a38Nb8vjfCEepFJyJJUqAknib2UQ/132","nickname":"é…·å“¥å±…å£«","note":"","ucode":"FF721E6124F817","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":380908,"discussion_content":"protobufä¸èƒ½ç®—æ˜¯ä¸€ç§é€šè®¯åè®®å§ï¼Ÿåº”è¯¥åªæ˜¯åºåˆ—åŒ–æ•°æ®çš„ä¸€ç§æ–¹å¼ï¼Œå¦‚æœé€šè®¯çš„æ•°æ®åŠ å¯†ï¼Œåˆåº”è¯¥å¦‚ä½•éªŒè¯è¿”å›çš„æ•°æ®æ˜¯å¦æ­£ç¡®å‘¢ï¼Ÿéš¾é“ä¸ºäº†æµ‹è¯•ä¹Ÿè‡ªå·±å†™ä¸€å¥—åŠ è§£å¯†ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1624788431,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":185432,"user_name":"å­Ÿè§å¤§ä¾ ","can_delete":false,"product_type":"c1","uid":1661872,"ip_address":"","ucode":"428C84FB5332DF","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/b0/50bc0dd7.jpg","comment_is_top":false,"comment_ctime":1583582817,"is_pvip":false,"replies":[{"id":"71644","content":"å¯ä»¥ï¼Œè¿™æ ·å†™å’Œå¾ˆæ£’çš„ï¼Œæˆ‘åŠ äº†typeæ˜¯ä¸ºäº†ç®€å•æ˜äº†ï¼Œstringçš„æ¯”è¾ƒæ¯”æˆªå–åæ¯”è¾ƒä¼šå°‘ä¸€æ­¥æ“ä½œï¼ŒèŠ‚çœäº†cpuçš„è®¡ç®—ã€‚<br>è¯¾ç¨‹ä¸­ä»£ç æˆ‘åšäº†æ•´ç†ï¼šhttps:&#47;&#47;github.com&#47;crisschan&#47;api_geektimeã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"CrissChan","uid":"1064280","ctime":1583630928,"ip_address":"","comment_id":185432,"utype":1}],"discussion_count":1,"race_medal":0,"score":"14468484705","product_id":100045801,"comment_content":"å…¶å®æ ¹æœ¬å°±ä¸è¦åŠ api_typeè¿™ä¸ªå‚æ•°ï¼Œæ ¹æ®url_root å°±å¯ä»¥çŸ¥é“åè®®ç±»å‹äº†ã€‚ws:&#47;&#47;echo.websocket.org æ˜¯wsåè®®ï¼Œhttps:&#47;&#47;echo.websocket.orgæ˜¯httpsåè®®ã€‚æ ¹æ®åè®®å¤´ï¼Œæˆªå–å‡ºæ¥å°±å¯ä»¥äº†ã€‚è¿™æ ·å¯ä»¥å°‘ä¼ ä¸€ä¸ªå‚æ•°ã€‚","like_count":3,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":486360,"discussion_content":"å¯ä»¥ï¼Œè¿™æ ·å†™å’Œå¾ˆæ£’çš„ï¼Œæˆ‘åŠ äº†typeæ˜¯ä¸ºäº†ç®€å•æ˜äº†ï¼Œstringçš„æ¯”è¾ƒæ¯”æˆªå–åæ¯”è¾ƒä¼šå°‘ä¸€æ­¥æ“ä½œï¼ŒèŠ‚çœäº†cpuçš„è®¡ç®—ã€‚\nè¯¾ç¨‹ä¸­ä»£ç æˆ‘åšäº†æ•´ç†ï¼šhttps://github.com/crisschan/api_geektimeã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1583630928,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178688,"user_name":"VeryYoung","can_delete":false,"product_type":"c1","uid":1198965,"ip_address":"","ucode":"50E129987FE4E5","user_header":"https://static001.geekbang.org/account/avatar/00/12/4b/75/71845744.jpg","comment_is_top":false,"comment_ctime":1581779547,"is_pvip":false,"replies":[{"id":"69358","content":"å¥½å·§å•Šï¼Œä½ é‡è§äº†å¾ˆå¤šé™Œç”Ÿåè®®ã€‚å¾ˆå®è´µçš„ç»éªŒå•Š","user_name":"ä½œè€…å›å¤","user_name_real":"Criss@é™ˆç£Š","uid":"1064280","ctime":1581813166,"ip_address":"","comment_id":178688,"utype":1}],"discussion_count":3,"race_medal":0,"score":"14466681435","product_id":100045801,"comment_content":"å¥½å·§ï¼Œwebsocketåè®®ä¹Ÿæ˜¯æˆ‘é‡åˆ°çš„ç¬¬ä¸€ä¸ªé™Œç”Ÿåè®®ï¼Œé‚£ä¸ªæ—¶å€™æµ‹è¯•å·¥æœŸçŸ­ï¼Œç”¨çš„æ˜¯javaæŠ€æœ¯æ ˆï¼Œå°±ç”¨äº†nettyæ¡†æ¶æ¥å°è£…ï¼Œåé¢æœ‰æ—¶é—´äº†å°±è¿›è¡Œå›é¡¾ï¼Œå‘ç°è¿˜æœ‰æœ‰ä¸ªwebsocket.jarå¼€æºåŒ…ï¼Œåé¢åˆç›¸ç»§é‡åˆ°äº†amqpã€mqttç­‰éhttpåè®®ï¼","like_count":4,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483925,"discussion_content":"å¥½å·§å•Šï¼Œä½ é‡è§äº†å¾ˆå¤šé™Œç”Ÿåè®®ã€‚å¾ˆå®è´µçš„ç»éªŒå•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581813166,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1025557,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a6/15/0246a2f4.jpg","nickname":"éª†ä¿Š","note":"","ucode":"6468AA909E606D","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":177093,"discussion_content":"èƒ½åˆ†äº«ä»¥ä¸‹MQttçš„æµ‹è¯•æ–¹æ³•å—ï¼Œæœ€è¿‘æ­£åœ¨åšè¿™ä¸ªã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582078452,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1198965,"avatar":"https://static001.geekbang.org/account/avatar/00/12/4b/75/71845744.jpg","nickname":"VeryYoung","note":"","ucode":"50E129987FE4E5","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1025557,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/a6/15/0246a2f4.jpg","nickname":"éª†ä¿Š","note":"","ucode":"6468AA909E606D","race_medal":1,"user_type":1,"is_pvip":false},"discussion":{"id":177141,"discussion_content":"ç”¨äº†pahoçš„jaråŒ…ï¼Œå°è£…äº†å¸¸ç”¨è°ƒç”¨æ¥å£æ–¹æ³•å’Œå°è£…äº†æ–­è¨€æ–¹æ³•ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582080794,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":177093,"ip_address":""},"score":177141,"extra":""}]}]},{"had_liked":false,"id":178561,"user_name":"shadow","can_delete":false,"product_type":"c1","uid":1814687,"ip_address":"","ucode":"66F3C17A5CC993","user_header":"https://static001.geekbang.org/account/avatar/00/1b/b0/9f/16585556.jpg","comment_is_top":false,"comment_ctime":1581744457,"is_pvip":false,"replies":[{"id":"69331","content":"æ‚¨è¯´çš„å®åœ¨æ¡†æ¶è¿­ä»£è¿‡ç¨‹ä¸­å¿…é¡»ç»å†çš„ï¼Œå› æ­¤ä¸ºäº†èƒ½å¤Ÿå…¼å®¹è€æ¡†æ¶æŠ€æœ¯æ ˆï¼Œæˆ‘å»ºè®®åœ¨æ„é€ å‡½æ•°ä¸­ç»™ä¸¤ä¸ªå‚æ•°é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼å°±æ˜¯æœ€å¼€å§‹çš„uriå’Œapi_typeçš„ç±»å‹ï¼Œå·²è§£å†³å‰åå…¼å®¹çš„é—®é¢˜ã€‚è°¢è°¢æ‚¨è¿™ä¸ªå¥½é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"Criss@é™ˆç£Š","uid":"1064280","ctime":1581767743,"ip_address":"","comment_id":178561,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5876711753","product_id":100045801,"comment_content":"è¿™é‡ŒCommoné‡Œå¢åŠ äº†ä¸€ä¸ªå…¥å‚api_typeã€def __init__(self,url_root,api_type)ã€ï¼Œç”¨äºæ ‡è®°è¯·æ±‚åè®®ç±»å‹ï¼Œè¿™å®é™…ç›¸å½“äºæ¡†æ¶åº•å±‚æ–¹æ³•é‡æ„ï¼Œä¸€ä¸ªæ–¹æ³•æ˜¯ç»™è¿™ä¸ªå…¥å‚åŠ é»˜è®¤ä¼ å‚ï¼Œå°±æ˜¯ä¹‹å‰çš„httpï¼Œä¸çŸ¥é“è¿˜æœ‰æ²¡æœ‰åˆ«çš„æ–¹æ³•ï¼Ÿ<br>è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯ï¼Œæ¡†æ¶å¼€å‘ï¼Œä¼šå¤šå¤šå°‘å°‘çš„æ¶‰åŠåˆ°åº•å±‚é‡æ„ï¼Œç„¶åå¯èƒ½å½±å“çš„å°±æ˜¯æ‰€æœ‰çš„ç”¨ä¾‹éƒ½éœ€è¦ä¿®æ”¹ï¼Œè¿™ç§æƒ…å†µï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„è§„é¿æ–¹æ³•ï¼Ÿ","like_count":1,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483878,"discussion_content":"æ‚¨è¯´çš„å®åœ¨æ¡†æ¶è¿­ä»£è¿‡ç¨‹ä¸­å¿…é¡»ç»å†çš„ï¼Œå› æ­¤ä¸ºäº†èƒ½å¤Ÿå…¼å®¹è€æ¡†æ¶æŠ€æœ¯æ ˆï¼Œæˆ‘å»ºè®®åœ¨æ„é€ å‡½æ•°ä¸­ç»™ä¸¤ä¸ªå‚æ•°é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼å°±æ˜¯æœ€å¼€å§‹çš„uriå’Œapi_typeçš„ç±»å‹ï¼Œå·²è§£å†³å‰åå…¼å®¹çš„é—®é¢˜ã€‚è°¢è°¢æ‚¨è¿™ä¸ªå¥½é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581767743,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":345101,"user_name":"å¼ æ¯…","can_delete":false,"product_type":"c1","uid":1886796,"ip_address":"","ucode":"0707311786C079","user_header":"","comment_is_top":false,"comment_ctime":1652022483,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1652022483","product_id":100045801,"comment_content":"ä¸é”™ï¼Œå·¥ä½œä¸­ç¡®å®ä¼šé‡åˆ°å·¥å…·ä¸æ”¯æŒçš„åè®®ï¼Œæ¯”å¦‚jmeteræ€§èƒ½æµ‹è¯•æ—¶éœ€è¦æ”¯æŒjmeteræœ¬èº«ä¸æ”¯æŒçš„åè®®ç­‰ï¼Œè¿™ç§éœ€è¦é€šè¿‡ä»£ç æ¥æ‹“å±•å’Œå®ç°","like_count":0},{"had_liked":false,"id":329315,"user_name":"ä¸‰æ—¥æœˆ","can_delete":false,"product_type":"c1","uid":1394953,"ip_address":"","ucode":"7ECB9CC5935B76","user_header":"https://static001.geekbang.org/account/avatar/00/15/49/09/9afe9a24.jpg","comment_is_top":false,"comment_ctime":1641282412,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1641282412","product_id":100045801,"comment_content":"è€å¸ˆæ‚¨å¥½ï¼Œwebsocketæ²¡æœ‰create_connection()å•Š","like_count":0},{"had_liked":false,"id":310094,"user_name":"April Gao","can_delete":false,"product_type":"c1","uid":1819445,"ip_address":"","ucode":"8B4AA664129749","user_header":"https://static001.geekbang.org/account/avatar/00/1b/c3/35/133f7f4b.jpg","comment_is_top":false,"comment_ctime":1630483502,"is_pvip":false,"replies":[{"id":"114190","content":"ä¸æ˜¯ä¸ºäº†è®©ä»–æ˜¯Noneï¼Œæ˜¯ç»™ä»–ä¸€ä¸ªè¯­ä¹‰çš„ç©º","user_name":"ä½œè€…å›å¤","user_name_real":"é™ˆç£Š@Criss","uid":"1064280","ctime":1633873696,"ip_address":"","comment_id":310094,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1630483502","product_id":100045801,"comment_content":"ä¸æ‡‚å°±é—®ï¼Œself.ws=&#39;null&#39;ï¼Œpythonä¸­æ²¡æœ‰nullï¼Œè¯·é—®è¿™ä¸ªå†™æ³•æ˜¯æ­£ç¡®çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":526124,"discussion_content":"ä¸æ˜¯ä¸ºäº†è®©ä»–æ˜¯Noneï¼Œæ˜¯ç»™ä»–ä¸€ä¸ªè¯­ä¹‰çš„ç©º","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633873696,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":264613,"user_name":"æ·åæ„šç”Ÿ","can_delete":false,"product_type":"c1","uid":1170483,"ip_address":"","ucode":"A1F935D39C8488","user_header":"https://static001.geekbang.org/account/avatar/00/11/dc/33/a68c6b26.jpg","comment_is_top":false,"comment_ctime":1606545794,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606545794","product_id":100045801,"comment_content":"é‡åˆ°é™Œç”Ÿåè®®çš„æ¥å£æ€ä¹ˆåŠï¼Ÿæ–‡ç« è§£å†³é—®é¢˜çš„æ€è·¯è¿˜æ˜¯å…·æœ‰å€Ÿé‰´æ„ä¹‰ã€‚<br>å½“ä½ é¢å¯¹é™Œç”ŸæŠ€æœ¯é—®é¢˜çš„æ—¶å€™ï¼Œä½ åº”è¯¥ä½¿ç”¨ä½ æœ€ç†Ÿæ‚‰çš„æŠ€æœ¯å»å°è¯•è§£å†³é—®é¢˜ã€‚<br>å…ˆå­¦ä¹ æ€ä¹ˆä½¿ç”¨æ–°çš„åè®®ï¼Œè€Œä¸æ˜¯å…ˆäº†è§£å…¶åº•å±‚ã€‚<br><br>å¦‚åˆšå¼€å§‹å­¦ä¹ æµ‹è¯•httpåè®®çš„æ¥å£ï¼Œåˆšå¼€å§‹çš„æ—¶å€™æˆ‘å¯èƒ½ä¸å¤§æ¸…æ¥šå¾ˆå¤šè®¡ç®—æœºç½‘ç»œçš„çŸ¥è¯†ï¼Œä»€ä¹ˆä¸ƒå±‚æ¨¡å‹ã€TCP&#47;IPåè®®æ—ï¼Œæˆ‘åªè¦çŸ¥é“ä½¿ç”¨pythonçš„requestsåº“å¯ä»¥å‘èµ·getã€postè¯·æ±‚ï¼Œå°±å¯ä»¥å…ˆåšæ¥å£æµ‹è¯•ã€‚","like_count":0},{"had_liked":false,"id":238230,"user_name":"-_-","can_delete":false,"product_type":"c1","uid":1304884,"ip_address":"","ucode":"6B70C4BB44D391","user_header":"https://static001.geekbang.org/account/avatar/00/13/e9/34/83025564.jpg","comment_is_top":false,"comment_ctime":1596098448,"is_pvip":false,"replies":[{"id":"88033","content":"ä½ å»æ‰åå†™ä¸€ä¸ªhttpåè®®çš„æµ‹è¯•caseè¯•ä¸€æ¬¡å°±çŸ¥é“äº†","user_name":"ä½œè€…å›å¤","user_name_real":"CrissChan","uid":"1064280","ctime":1596119987,"ip_address":"","comment_id":238230,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1596098448","product_id":100045801,"comment_content":"elif api_type==&#39;http&#39;: self.ws=&#39;null&#39;è¿™è¾¹ä¸ºå•¥è¦åŠ self.ws=&#39;null&#39;è¿™è¾¹ä¸åŠ æœ‰ä»€ä¹ˆå½±å“å—æ—¢ç„¶æ˜¯httpä¸ºä»€ä¹ˆè¦å†™è¿™ä¸€è¡Œæ˜¯ä¸ºäº†è¿åˆææ„å‡½æ•°å—","like_count":0,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":502679,"discussion_content":"ä½ å»æ‰åå†™ä¸€ä¸ªhttpåè®®çš„æµ‹è¯•caseè¯•ä¸€æ¬¡å°±çŸ¥é“äº†","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596119987,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":227423,"user_name":"é›ªç³•","can_delete":false,"product_type":"c1","uid":1504919,"ip_address":"","ucode":"908D23B4454C00","user_header":"","comment_is_top":false,"comment_ctime":1592377341,"is_pvip":false,"replies":[{"id":"85979","content":"commonæ˜¯æŒ‡çš„Commonç±»åœ¨common.pyæ–‡ä»¶ä¸­ï¼Œä¸çŸ¥é“æ‚¨é‚£è¾¹æ˜¯ä¸æ˜¯æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ–è€…æ‚¨å¯ä»¥åœ¨å¦‚ä¸‹githubä»“åº“ä¸­ä¸‹è½½å…¨éƒ¨è¯¾ç¨‹ä»£ç https:&#47;&#47;github.com&#47;crisschan&#47;api_geektime","user_name":"ä½œè€…å›å¤","user_name_real":"CrissChan","uid":"1064280","ctime":1594185364,"ip_address":"","comment_id":227423,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1592377341","product_id":100045801,"comment_content":"from common import Common è¿è¡Œæ—¶æŠ¥é”™ï¼šModuleNotFoundError: No module named &#39;common&#39;<br>ä»£ç é‡Œç¡®å®æ²¡æœ‰å°å†™çš„commonæ¨¡å—ï¼Œè¯·é—®è€å¸ˆè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":498632,"discussion_content":"commonæ˜¯æŒ‡çš„Commonç±»åœ¨common.pyæ–‡ä»¶ä¸­ï¼Œä¸çŸ¥é“æ‚¨é‚£è¾¹æ˜¯ä¸æ˜¯æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ–è€…æ‚¨å¯ä»¥åœ¨å¦‚ä¸‹githubä»“åº“ä¸­ä¸‹è½½å…¨éƒ¨è¯¾ç¨‹ä»£ç https://github.com/crisschan/api_geektime","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1594185364,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":218665,"user_name":"Cubat","can_delete":false,"product_type":"c1","uid":2001303,"ip_address":"","ucode":"A1783E5B64FB8C","user_header":"https://static001.geekbang.org/account/avatar/00/1e/89/97/53b92627.jpg","comment_is_top":false,"comment_ctime":1589851917,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1589851917","product_id":100045801,"comment_content":"ç¬¬ä¸€æ¬¡è§åˆ° Websocket çš„æ—¶å€™ä¹Ÿæ˜¯å¤´çš®å‘éº»ï¼Œè¿˜æœ‰ HTTP2ï¼Œä¸è¿‡å¥½åœ¨åè€…ç›®å‰ç”¨çš„ä¸æ˜¯å¾ˆå¤šã€‚","like_count":0,"discussions":[{"author":{"id":1104850,"avatar":"https://static001.geekbang.org/account/avatar/00/10/db/d2/e29f8834.jpg","nickname":"lidashuang","note":"","ucode":"560ABE8032760E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":295261,"discussion_content":"æŒºå¤šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1596130435,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":211616,"user_name":"å¤œæ­Œ","can_delete":false,"product_type":"c1","uid":1562121,"ip_address":"","ucode":"724CF22FC99AA7","user_header":"https://static001.geekbang.org/account/avatar/00/17/d6/09/e9bfe86f.jpg","comment_is_top":false,"comment_ctime":1587989140,"is_pvip":false,"replies":[{"id":"82388","content":"åœ¨åº“é‡Œé¢ï¼Œä¸æ˜¯è‡ªå·±å°è£…çš„","user_name":"ä½œè€…å›å¤","user_name_real":"CrissChan","uid":"1064280","ctime":1591160726,"ip_address":"","comment_id":211616,"utype":1}],"discussion_count":6,"race_medal":0,"score":"1587989140","product_id":100045801,"comment_content":"from websocket import create_connectionï¼Œè¯·é—®websocketæ˜¯æ‚¨è‡ªå·±å°è£…çš„ç±»å—ï¼Ÿè¯•ç€è¿è¡Œä»£ç ï¼Œå‘ç°æ²¡æœ‰websocketè¿™ä¸ªæ¨¡å—ï¼Œç„¶åpip install websocket åä¹Ÿæ²¡æœ‰ create_connection è¿™ä¸ªæ–¹æ³•ã€‚æ‰€ä»¥æ˜¯è‡ªå·±å°è£…çš„å—ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493315,"discussion_content":"åœ¨åº“é‡Œé¢ï¼Œä¸æ˜¯è‡ªå·±å°è£…çš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591160726,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1712600,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/21/d8/f3282303.jpg","nickname":"saxon","note":"","ucode":"0EC1BC2A856953","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":296011,"discussion_content":"pip install websocket_client","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1596425942,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1562121,"avatar":"https://static001.geekbang.org/account/avatar/00/17/d6/09/e9bfe86f.jpg","nickname":"å¤œæ­Œ","note":"","ucode":"724CF22FC99AA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1712600,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/21/d8/f3282303.jpg","nickname":"saxon","note":"","ucode":"0EC1BC2A856953","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336849,"discussion_content":"æ”¶åˆ°ï¼Œæˆ‘è¯•ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608716033,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":296011,"ip_address":""},"score":336849,"extra":""}]},{"author":{"id":1786332,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/41/dc/42da0a32.jpg","nickname":"Mind-online","note":"","ucode":"C5852F57903019","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":335694,"discussion_content":"æˆ‘æ˜¯python3.7.0ï¼Œç”¨pip install websocket_clientç¡®å®å¯ä»¥","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608275169,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1562121,"avatar":"https://static001.geekbang.org/account/avatar/00/17/d6/09/e9bfe86f.jpg","nickname":"å¤œæ­Œ","note":"","ucode":"724CF22FC99AA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1786332,"avatar":"https://static001.geekbang.org/account/avatar/00/1b/41/dc/42da0a32.jpg","nickname":"Mind-online","note":"","ucode":"C5852F57903019","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":336850,"discussion_content":"å¥½çš„ï¼Œæˆ‘è¯•ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1608716040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":335694,"ip_address":""},"score":336850,"extra":""}]},{"author":{"id":1562121,"avatar":"https://static001.geekbang.org/account/avatar/00/17/d6/09/e9bfe86f.jpg","nickname":"å¤œæ­Œ","note":"","ucode":"724CF22FC99AA7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":287699,"discussion_content":"pipæ²¡websocketè¿™ä¸ªåº“å§ï¼Œæˆ‘è£…çš„pythonç‰ˆæœ¬ä¸å¯¹ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1593512559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":210750,"user_name":"åšå½¦-å­™æ–‡","can_delete":false,"product_type":"c1","uid":1852095,"ip_address":"","ucode":"EFE874A43F1A23","user_header":"","comment_is_top":false,"comment_ctime":1587819784,"is_pvip":false,"replies":[{"id":"78499","content":"èš‚èšçš„åº”è¯¥æ˜¯dubboå§ã€‚è¿™ç±»ä½¿ç”¨pythonçš„æµ‹è¯•åŸºç¡€åº“çš„æ‚¨å¯ä»¥æŸ¥æ‰¾ä¸€ä¸‹","user_name":"ä½œè€…å›å¤","user_name_real":"CrissChan","uid":"1064280","ctime":1587891288,"ip_address":"","comment_id":210750,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1587819784","product_id":100045801,"comment_content":"ä½ å¥½è€å¸ˆï¼Œæˆ‘ç°åœ¨é¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼ŒRPCæ¥å£æ€ä¹ˆç”¨è„šæœ¬å®ç°æ¥å£æµ‹è¯•ï¼Ÿç›®å‰è¿™ç±»æ¥å£æ˜¯èš‚èšçš„ï¼Œå±äºäººå®¶çš„ä¸œè¥¿ï¼ŒPythonä¸­æ²¡æœ‰è¿™æ ·çš„å·¥å…·åŒ…","like_count":0,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":493101,"discussion_content":"èš‚èšçš„åº”è¯¥æ˜¯dubboå§ã€‚è¿™ç±»ä½¿ç”¨pythonçš„æµ‹è¯•åŸºç¡€åº“çš„æ‚¨å¯ä»¥æŸ¥æ‰¾ä¸€ä¸‹","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587891288,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":208630,"user_name":"å°è€é¼ ","can_delete":false,"product_type":"c1","uid":1257460,"ip_address":"","ucode":"C663A0C863A515","user_header":"https://static001.geekbang.org/account/avatar/00/13/2f/f4/2dede51a.jpg","comment_is_top":false,"comment_ctime":1587393211,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587393211","product_id":100045801,"comment_content":"ä½ è¿™é‡Œåè®®å‡å¯æ‰¾åˆ°ç±»ä¼¼import requests<br>from websocket import create_connectionè¿™æ ·çš„ç±»ã€‚é‚£æ¯”å¦‚æˆ‘åœ¨çˆ±ç«‹ä¿¡å…¬å¸æµ‹è¯•DNSã€DHCPã€AAAåè®®ï¼Œæˆ‘åˆå¦‚ä½•ç”¨pythonè¿›è¡Œæµ‹è¯•å‘¢ï¼Œæˆ–è®¸pythonå°±æ²¡ç±»ä¼¼åè®®çš„åŸºç±»ã€‚","like_count":0},{"had_liked":false,"id":179318,"user_name":"aoe","can_delete":false,"product_type":"c1","uid":1121758,"ip_address":"","ucode":"1C6201EDB4E954","user_header":"https://static001.geekbang.org/account/avatar/00/11/1d/de/62bfa83f.jpg","comment_is_top":false,"comment_ctime":1581961074,"is_pvip":false,"replies":[{"id":"69615","content":"è°¢è°¢","user_name":"ä½œè€…å›å¤","user_name_real":"Criss@é™ˆç£Š","uid":"1064280","ctime":1581982694,"ip_address":"","comment_id":179318,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581961074","product_id":100045801,"comment_content":"è€å¸ˆçš„æ•…äº‹å¾ˆæœ‰è¶£","like_count":0,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484200,"discussion_content":"è°¢è°¢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581982694,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":179285,"user_name":"Ruby | æˆé•¿ç²¾è¿›","can_delete":false,"product_type":"c1","uid":1095295,"ip_address":"","ucode":"4FE6526D33D699","user_header":"https://static001.geekbang.org/account/avatar/00/10/b6/7f/1ecf6e89.jpg","comment_is_top":false,"comment_ctime":1581951976,"is_pvip":false,"replies":[{"id":"69631","content":"æ‚¨å¥½ï¼Œæ‚¨çš„ä¿¡æ¯é‡ç¨å¾®æœ‰ç‚¹å°‘ï¼Œå¦‚æœåœ¨è¿™é‡Œä¸æ–¹ä¾¿èŠå¤©å¯ä»¥æ¥æˆ‘çš„blogï¼šhttps:&#47;&#47;blog.csdn.net&#47;crisschanç•™è¨€ï¼Œå› ä¸ºæˆ‘æœ‰å¯èƒ½éœ€è¦æ›´å¤šä½ å…³äºå·¥å…·çš„ä¿¡æ¯ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Criss@é™ˆç£Š","uid":"1064280","ctime":1581988912,"ip_address":"","comment_id":179285,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1581951976","product_id":100045801,"comment_content":"wsæ¶ˆæ¯é€šè¿‡jmeterè¯·æ±‚å‘é€æˆåŠŸäº†ï¼Œä½†æ˜¯èŠå¤©çª—å£æ²¡æœ‰æ”¶åˆ°æ¶ˆæ¯ï¼Œè¯·é—®ä¼šæ˜¯ä»€ä¹ˆåŸå› ï¼Œç°åœ¨é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæ±‚è§£ä¸­","like_count":0,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":484182,"discussion_content":"æ‚¨å¥½ï¼Œæ‚¨çš„ä¿¡æ¯é‡ç¨å¾®æœ‰ç‚¹å°‘ï¼Œå¦‚æœåœ¨è¿™é‡Œä¸æ–¹ä¾¿èŠå¤©å¯ä»¥æ¥æˆ‘çš„blogï¼šhttps://blog.csdn.net/crisschanç•™è¨€ï¼Œå› ä¸ºæˆ‘æœ‰å¯èƒ½éœ€è¦æ›´å¤šä½ å…³äºå·¥å…·çš„ä¿¡æ¯ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581988912,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":178452,"user_name":"Fredo","can_delete":false,"product_type":"c1","uid":1438470,"ip_address":"","ucode":"681D6692617DAB","user_header":"https://static001.geekbang.org/account/avatar/00/15/f3/06/8da1bf0c.jpg","comment_is_top":false,"comment_ctime":1581692022,"is_pvip":false,"replies":[{"id":"69262","content":"é™Œç”Ÿåè®®åªæ˜¯æ ¡éªŒç ï¼Œå‚æ•°ç»„æˆæ–¹å¼ç­‰ä¸ä¸€æ ·ã€‚å› æ­¤ï¼Œä¸ºäº†å¿«é€Ÿå®Œæˆä»»åŠ¡æœ€å¥½çš„å°±æ˜¯çœ‹å¼€å‘å†™çš„å®¢æˆ·ç«¯ä»£ç ã€‚è¿™æ ·æ˜¯æœ€å¿«çš„è§£å†³é—®é¢˜çš„åŠæ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"Criss@é™ˆç£Š","uid":"1064280","ctime":1581744274,"ip_address":"","comment_id":178452,"utype":1}],"discussion_count":3,"race_medal":0,"score":"1581692022","product_id":100045801,"comment_content":"ä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹è¿™é‡Œåšé™Œç”Ÿçš„åè®®æ¥å£æµ‹è¯•ï¼Œæµ‹è¯•äººå‘˜å‚è€ƒçš„ä¾æ®æ˜¯ä»€ä¹ˆæ–‡æ¡£ï¼Œæˆ‘ä»¬æ€ä¹ˆå¾—çŸ¥æˆ‘ä»¬æµ‹è¯•çš„æ¥å£å‡†ç¡®æ€§å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1064280,"avatar":"https://static001.geekbang.org/account/avatar/00/10/3d/58/377289a8.jpg","nickname":"é™ˆç£Š@Criss","note":"","ucode":"AF0A1CEA749698","race_medal":0,"user_type":2,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":483826,"discussion_content":"é™Œç”Ÿåè®®åªæ˜¯æ ¡éªŒç ï¼Œå‚æ•°ç»„æˆæ–¹å¼ç­‰ä¸ä¸€æ ·ã€‚å› æ­¤ï¼Œä¸ºäº†å¿«é€Ÿå®Œæˆä»»åŠ¡æœ€å¥½çš„å°±æ˜¯çœ‹å¼€å‘å†™çš„å®¢æˆ·ç«¯ä»£ç ã€‚è¿™æ ·æ˜¯æœ€å¿«çš„è§£å†³é—®é¢˜çš„åŠæ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1581744274,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1966486,"avatar":"","nickname":"up","note":"","ucode":"3DC5F412AD73A4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":234899,"discussion_content":"æ‚¨å¥½ï¼Œæ‰€æœ‰è¯¾ç¨‹ä¸­çš„ä»£ç æœ‰å—","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587004812,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1438470,"avatar":"https://static001.geekbang.org/account/avatar/00/15/f3/06/8da1bf0c.jpg","nickname":"Fredo","note":"","ucode":"681D6692617DAB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1966486,"avatar":"","nickname":"up","note":"","ucode":"3DC5F412AD73A4","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":235899,"discussion_content":"æ²¡æœ‰å“¦ï¼Œ å¯ä»¥çœ‹ä¸‹ä½œè€…ç»™äº†é“¾æ¥ä¹ˆ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1587050376,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":234899,"ip_address":""},"score":235899,"extra":""}]}]}]}