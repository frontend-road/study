{"id":73950,"title":"168 | Demo展示(lab05)（下）","content":"","comments":[{"had_liked":false,"id":100401,"user_name":"悟","can_delete":false,"product_type":"c3","uid":1013476,"ip_address":"","ucode":"9AB58309CFB36D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/76/e4/7642f0ce.jpg","comment_is_top":false,"comment_ctime":1559547417,"is_pvip":false,"replies":[{"id":36224,"content":"微服务有同步请求响应式(request&#47;response)风格的，也有编排式(orchestration)风格的。请求响应式是主流，有些场景则需要编排式，例如互联网金融对用户贷款的审批，就是一个流程性的多步动作，一般需要流程编排引擎配合。传统的工作流引擎，一般针对单块应用。现代微服务的流程引擎，需要对分布式微服务的编排调用能力，Netflix开源的conductor(https:&#47;&#47;github.com&#47;Netflix&#47;conductor)就是这样一个开源产品，核心是一个流程编排语言+消息队列，系统比较复杂，有兴趣可以研究。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1559574494,"ip_address":"","comment_id":100401,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，微服务架构怎么和工作流引擎bpm结合？例如activiti之类的引擎","like_count":1,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":452528,"discussion_content":"微服务有同步请求响应式(request/response)风格的，也有编排式(orchestration)风格的。请求响应式是主流，有些场景则需要编排式，例如互联网金融对用户贷款的审批，就是一个流程性的多步动作，一般需要流程编排引擎配合。传统的工作流引擎，一般针对单块应用。现代微服务的流程引擎，需要对分布式微服务的编排调用能力，Netflix开源的conductor(https://github.com/Netflix/conductor)就是这样一个开源产品，核心是一个流程编排语言+消息队列，系统比较复杂，有兴趣可以研究。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1559574494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":58599,"user_name":"Jelly","can_delete":false,"product_type":"c3","uid":1124906,"ip_address":"","ucode":"F4D8374737A501","user_header":"https://static001.geekbang.org/account/avatar/00/11/2a/2a/5547dc85.jpg","comment_is_top":false,"comment_ctime":1547131633,"is_pvip":false,"replies":[{"id":21527,"content":"这个跟多环境没有关系，这个例子是本地默认环境，从错误看像是apollo client加载调用cat出错，估计是jar版本问题或配置问题，从上面的错误信息还判断不出，可微信(bulldog2015)交流提供额外信息。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1547451871,"ip_address":"","comment_id":58599,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"老师，我用IDEA运行项目报错如下，是不是多环境配置加载出问题呢？\n2019-01-10 22:39:15.276  INFO 3612 --- [           main] c.c.f.f.i.p.DefaultApplicationProvider   : App ID is set to registry by app.id property from System Property\n2019-01-10 22:39:15.278  INFO 3612 --- [           main] c.c.f.f.i.p.DefaultServerProvider        : Environment is set to null. Because it is not available in either (1) JVM system property &#39;env&#39;, (2) OS env variable &#39;ENV&#39; nor (3) property &#39;env&#39; from the properties InputStream.\n2019-01-10 22:39:15.303  INFO 3612 --- [           main] c.c.f.a.i.DefaultMetaServerProvider      : Located meta services from apollo.meta configuration: http:&#47;&#47;localhost:8080!\n2019-01-10 22:39:15.305  INFO 3612 --- [           main] c.c.f.apollo.core.MetaDomainConsts       : Located meta server address http:&#47;&#47;localhost:8080 for env UNKNOWN from com.ctrip.framework.apollo.internals.DefaultMetaServerProvider\n2019-01-10 22:39:16.354  WARN 3612 --- [           main] c.ctrip.framework.apollo.tracer.Tracer   : Failed to create transaction for type: Apollo.MetaService, name: getConfigService\n\njava.lang.IllegalStateException: java.lang.reflect.InvocationTargetException\n\tat com.ctrip.framework.apollo.tracer.internals.cat.CatMessageProducer.newTransaction(CatMessageProducer.java:81) ~[apollo-core-1.0.0.jar:1.0.0]\n\tat com.ctrip.framework.apollo.tracer.Tracer.newTransaction(Tracer.java:78) ~[apollo-core-1.0.0.jar:1.0.0]\n\tat com.ctrip.framework.apollo.internals.ConfigServiceLocator.updateConfigServices(ConfigServiceLocator.java:151) [apollo-client-1.0.0.jar:1.0.0]\n\tat ","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":436132,"discussion_content":"这个跟多环境没有关系，这个例子是本地默认环境，从错误看像是apollo client加载调用cat出错，估计是jar版本问题或配置问题，从上面的错误信息还判断不出，可微信(bulldog2015)交流提供额外信息。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1547451871,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":54577,"user_name":"旧巷里的少年","can_delete":false,"product_type":"c3","uid":1036067,"ip_address":"","ucode":"7D9F8371C67FB9","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cf/23/6c0ff9d3.jpg","comment_is_top":false,"comment_ctime":1545903745,"is_pvip":false,"replies":[{"id":19823,"content":"CAT地址统一配在机器的data&#47;appdatas&#47;cat&#47;client.xml中，这是生产推荐做法，应用内自己配cat地址（xml或编程方式）也可以，请参考CAT官方文档。","user_name":"作者回复","user_name_real":"杨波","uid":1030344,"ctime":1545924489,"ip_address":"","comment_id":54577,"utype":1}],"discussion_count":1,"race_medal":0,"score":2,"product_id":100007001,"comment_content":"项目集成cat不需要配置cat服务的ip吗，在5个项目中都没有看到配置cat 服务端ip和端口配置","like_count":0,"discussions":[{"author":{"id":1030344,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/b8/c8/c94d38a7.jpg","nickname":"杨波","note":"","ucode":"FA3418BB703BCA","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":434498,"discussion_content":"CAT地址统一配在机器的data/appdatas/cat/client.xml中，这是生产推荐做法，应用内自己配cat地址（xml或编程方式）也可以，请参考CAT官方文档。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1545924489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":"","group_id":0},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}