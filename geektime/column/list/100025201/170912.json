{"id":170912,"title":"60 |Â æ¶æ„åˆ†è§£ï¼šè¾¹ç•Œï¼Œä¸æ–­é‡æ–°å®¡è§†è¾¹ç•Œ","content":"<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä¸ƒç‰›äº‘è®¸å¼ä¼Ÿã€‚</p><p>åœ¨ä¸Šä¸€è®² â€œ<a href=\"https://time.geekbang.org/column/article/169113\">59 | å°‘è°ˆç‚¹æ¡†æ¶ï¼Œå¤šè°ˆç‚¹ä¸šåŠ¡</a>â€ ä¸­ï¼Œæˆ‘ä»¬å¼ºè°ƒï¼š</p><blockquote>\n<p>æ¶æ„å°±æ˜¯ä¸šåŠ¡çš„æ­£äº¤åˆ†è§£ã€‚æ¯ä¸ªæ¨¡å—éƒ½æœ‰å®ƒè‡ªå·±çš„ä¸šåŠ¡ã€‚</p>\n</blockquote><p>è¿™é‡Œæˆ‘ä»¬è¯´çš„æ¨¡å—æ˜¯ä¸€ç§æ³›æŒ‡ï¼Œå®ƒåŒ…æ‹¬ï¼šå‡½æ•°ã€ç±»ã€æ¥å£ã€åŒ…ã€å­ç³»ç»Ÿã€ç½‘ç»œæœåŠ¡ç¨‹åºã€æ¡Œé¢ç¨‹åºç­‰ç­‰ã€‚</p><p>æ¥å£æ˜¯ä¸šåŠ¡çš„æŠ½è±¡ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å®ƒä¸ä½¿ç”¨æ–¹çš„è€¦åˆæ–¹å¼ã€‚åœ¨ä¸šåŠ¡åˆ†è§£çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®¤çœŸå®¡è§†æ¨¡å—çš„æ¥å£ï¼Œå‘ç°å…¶ä¸­ â€œè¿‡åº¦çš„ï¼ˆæˆ–å¤šä½™çš„ï¼‰â€ çº¦æŸæ¡ä»¶ï¼ŒæŠŠå®ƒæé«˜åˆ°è¶³å¤Ÿé€šç”¨çš„ã€æ™®é€‚çš„åœºæ™¯æ¥çœ‹ã€‚</p><h2>IO å­ç³»ç»Ÿçš„éœ€æ±‚ä¸åˆå§‹æ¶æ„</h2><p>è¿™æ ·è¯´å¤ªæŠ½è±¡äº†ï¼Œä»Šå¤©æˆ‘ä»¬æ‹¿ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥è¯´æ˜æˆ‘ä»¬åœ¨å®¡è§†æ¨¡å—çš„ä¸šåŠ¡è¾¹ç•Œæ—¶ï¼Œéœ€è¦ç”¨ä»€ä¹ˆæ ·çš„æ€ç»´æ–¹å¼æ¥æ€è€ƒã€‚</p><p>æˆ‘ä»¬é€‰çš„ä¾‹å­ï¼Œæ˜¯åŠå…¬è½¯ä»¶çš„ IO å­ç³»ç»Ÿã€‚ä»éœ€æ±‚æ¥è¯´ï¼Œæˆ‘ä»¬é¦–å…ˆè€ƒè™‘æ”¯æŒçš„æ˜¯ï¼š</p><ul>\n<li>è¯»ç›˜ã€å­˜ç›˜ï¼›</li>\n<li>å‰ªè´´æ¿çš„æ‹·è´ï¼ˆå­˜ç›˜ï¼‰ã€ç²˜è´´ï¼ˆè¯»ç›˜ï¼‰ã€‚</li>\n</ul><p>è¯»ç›˜åŠŸèƒ½ä¸åªæ˜¯è¦èƒ½å¤ŸåŠ è½½è‡ªå®šä¹‰æ ¼å¼çš„æ–‡ä»¶ï¼Œä¹Ÿè¦æ”¯æŒä¸šç•Œä¸»æµçš„æ–‡ä»¶æ ¼å¼ï¼Œå¦‚ï¼š</p><ul>\n<li>Word æ–‡æ¡£ã€RTF æ–‡æ¡£ï¼›</li>\n<li>HTML æ–‡æ¡£ã€çº¯æ–‡æœ¬æ–‡æ¡£ã€‚</li>\n</ul><p>å­˜ç›˜åŠŸèƒ½æ›´å¤æ‚ä¸€äº›ï¼Œå®ƒä¸åªæ˜¯è¦æ”¯æŒä¿å­˜ä¸ºä»¥ä¸ŠåŸºäºæ–‡æœ¬é€»è¾‘çš„æµå¼æ–‡æ¡£ï¼Œè¿˜è¦æ”¯æŒåŸºäºåˆ†é¡µæ˜¾ç¤ºçš„æ–‡æ¡£æ ¼å¼ï¼Œå¦‚ï¼š</p><ul>\n<li>PDF æ–‡æ¡£ï¼›</li>\n<li>PS æ–‡æ¡£ã€‚</li>\n</ul><p>å¯¹äºè¿™æ ·çš„ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšæ¶æ„è®¾è®¡ï¼Ÿ</p><p>æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°çš„è®¾è®¡å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>type Span struct {\n  ...\n\n  SaveWord(ctx *SaveWordContext) error\n  SaveRTF(ctx *SaveRTFContext) error\n\n  LoadWord(ctx *LoadWordContext) error\n  LoadRTF(ctx *LoadRTFContext) error\n}\n\ntype Paragraph struct {\n  ...\n  SpanCount() int\n  GetSpan(i int) *Span\n\n  SaveWord(ctx *SaveWordContext) error\n  SaveRTF(ctx *SaveRTFContext) error\n\n  LoadWord(ctx *LoadWordContext) error\n  LoadRTF(ctx *LoadRTFContext) error\n}\n\ntype TextPool struct {\n  ...\n  ParagraphCount() int\n  GetParagraph(i int) *Paragraph\n\n  SaveWord(ctx *SaveWordContext) error\n  SaveRTF(ctx *SaveRTFContext) error\n\n  LoadWord(ctx *LoadWordContext) error\n  LoadRTF(ctx *LoadRTFContext) error\n}\n\ntype Document struct {\n  ...\n  TextPool() *TextPool\n\n  SaveWord(stg IStorage) error\n  SaveRTF(f *os.File) error\n  SaveFile(file string, format string) error\n\n  LoadWord(stg IStorage) error\n  LoadRTF(f *os.File) error\n  LoadFile(file string) error\n}\n</code></pre><p>ä»ä¸Šé¢çš„è®¾è®¡å¯ä»¥çœ‹å‡ºï¼Œè¯»ç›˜å­˜ç›˜çš„ä»£ç æ•£è½åœ¨æ ¸å¿ƒç³»ç»Ÿçš„å„å¤„ï¼Œå‡ ä¹æ¯ä¸ªç±»éƒ½éœ€è¦è¿›è¡Œç›¸å…³çš„ä¿®æ”¹ã€‚è¿™ç±»åŠŸèƒ½æˆ‘ä»¬æŠŠå®ƒå«åš â€œå…¨å±€æ€§åŠŸèƒ½â€ã€‚æˆ‘ä»¬ä¸‹ä¸€è®²å°†ä¸“é—¨è®¨è®ºå…¨å±€æ€§åŠŸèƒ½æ€ä¹ˆåšè®¾è®¡ã€‚</p><!-- [[[read_end]]] --><p>å…¨å±€æ€§åŠŸèƒ½çš„æ¶æ„è®¾è®¡è¦éå¸¸å°å¿ƒã€‚å¦‚æœæŒ‰ä¸Šé¢è¿™ç§è®¾è®¡ï¼Œæˆ‘ä»¬æ— æ³•ç§°ä¹‹ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å­ç³»ç»Ÿï¼Œå®ƒå®Œå®Œå…¨å…¨æ˜¯æ ¸å¿ƒç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</p><p>æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œè¿™ä¸ªæ¶æ„æ˜¯å—äº† OOP æ€æƒ³çš„æ¯’å®³ï¼Œä»¥ä¸ºä¸€åˆ‡éƒ½åº”è¯¥ä»¥å¯¹è±¡ä¸ºä¸­å¿ƒï¼Œå†µä¸”åœ¨å¾®è½¯çš„ MFC æ¡†æ¶é‡Œé¢æœ‰ Serialization æœºåˆ¶æ”¯æŒï¼Œè¿›ä¸€æ­¥åŠ å‰§äº†å†™è¿™ç±»å­˜ç›˜è¯»ç›˜ä»£ç çš„å€¾å‘ã€‚</p><p>è¿™å½“ç„¶æ˜¯ä¸å¤ªå¥½çš„ã€‚åœ¨è‰¯å¥½çš„è®¾è®¡ä¸­ï¼Œä¸€æ–¹é¢æ ¸å¿ƒç³»ç»ŸåŠŸèƒ½è¦å°‘ï¼Œå°‘åˆ°åªæœ‰æœ€å°å­é›†ï¼›å¦ä¸€æ–¹é¢æ ¸å¿ƒåŠŸèƒ½è¦èƒ½å¤Ÿæ”¶æ•›ï¼Œä¸èƒ½è¶ŠåŠ è¶Šå¤šã€‚</p><p>ä½†è¯»ç›˜å­˜ç›˜çš„éœ€æ±‚æ˜¯å¼€æ”¾çš„ï¼Œä»Šå¤©æ”¯æŒ Word å’Œ RTF æ–‡æ¡£ï¼Œæ˜å¤©æ”¯æŒ HTMLï¼Œåå¤©å¾®è½¯åˆå‡ºæ¥æ–°çš„ docx æ ¼å¼ã€‚æ–‡ä»¶æ ¼å¼æ€»æ˜¯å±‚å‡ºä¸ç©·ï¼Œéš¾ä»¥æ”¶æ•›ã€‚</p><h2>Visitor æ¨¡å¼</h2><p>æ‰€ä»¥ï¼Œä»¥ä¸Šè¯»ç›˜å­˜ç›˜çš„æ¶æ„è®¾è®¡ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ¶æ„è®¾è®¡ã€‚é‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¯èƒ½æœ‰äººä¼šæƒ³åˆ°è®¾è®¡æ¨¡å¼ä¸­çš„ Visitor æ¨¡å¼ã€‚</p><p>ä»€ä¹ˆæ˜¯ Visitor æ¨¡å¼ï¼Ÿç®€å•æ¥è¯´ï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºæ ¸å¿ƒç³»ç»Ÿçš„ Model å±‚æä¾›ä¸€å¥—éå†æ•°æ®çš„æ¥å£ï¼Œæ•°æ®æœ€ç»ˆæ˜¯é€šè¿‡äº‹ä»¶çš„æ–¹å¼æ¥æ”¶ã€‚å¦‚ä¸‹ï¼š</p><pre><code>type Visitor interface {\n  StartDocument(attrs *DocumentAttrs) error\n  StartParagraph(attrs *ParagraphAttrs) error\n  StartSpan(attrs *SpanAttrs) error\n  Characters(chars []byte) error \n  EndSpan() error\n  EndParagraph() error\n  EndDocument() error\n}\n\ntype VisitableDoc interface {\n  Visit(visitor Visitor) error\n}\n\ntype Document struct {\n  ...\n  Visit(visitor Visitor) error\n}\n\nfunc NewDocument() *Document\nfunc LoadDocument(doc VisitableDoc) (*Document, error)\n\nfunc SaveWord(stg IStorage, doc VisitableDoc) error\nfunc SaveRTF(f *os.File, doc VisitableDoc) error\nfunc SaveFile(file string, format string, doc VisitableDoc) error\n\nfunc LoadWord(stg IStorage) (VisitableDoc, error)\nfunc LoadRTF(f *os.File) (VisitableDoc, error)\nfunc LoadFile(file string) (VisitableDoc, error)\n</code></pre><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯æ˜¾ç„¶çš„ã€‚</p><p>ä¸€æ–¹é¢ï¼Œæ ¸å¿ƒç³»ç»Ÿä¸º IO ç³»ç»Ÿæä¾›äº†ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£ã€‚è¿™æ · IO å­ç³»ç»Ÿå°±ä»æ ¸å¿ƒç³»ç»Ÿä¸­æŠ½ç¦»å‡ºæ¥äº†ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼ŒWord æ–‡æ¡£çš„æ”¯æŒã€RTF æ–‡æ¡£çš„æ”¯æŒè¿™äº›æ¨¡å—åœ¨ IO å­ç³»ç»Ÿä¸­ä¹Ÿå½¼æ­¤å®Œå…¨ç‹¬ç«‹ï¼Œå´åˆç›¸äº’å¯ä»¥éå¸¸èæ´½åœ°è¿›è¡Œé…åˆã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿å°† RTF æ–‡ä»¶è½¬ä¸º Word æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>func ConvRTF2Word(rtf *os.File, word IStorage) error {\n  doc, err := LoadRTF(rtf)\n  if err != nil {\n    return err\n  }\n  return SaveWord(word, doc)\n}\n</code></pre><p>ç±»ä¼¼åœ°ï¼ŒåŠ è½½ä¸€ä¸ª Word æ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>func LoadWordDocument(stg IStorage) (*Document, error) {\n  vdoc, err := LoadWord(stg)\n  if err != nil {\n    return nil, err\n  }\n  return LoadDocument(vdoc)\n}\n</code></pre><p>é‚£ä¹ˆè¿™ä¸ªè®¾è®¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p><p>å¦‚æœä½ å¯¹æ¯”ä¸Šä¸€è®² â€œ<a href=\"/https://time.geekbang.org/column/article/169113\">59 | å°‘è°ˆç‚¹æ¡†æ¶ï¼Œå¤šè°ˆç‚¹ä¸šåŠ¡</a>â€ æåˆ°çš„ SAX å’Œ DOM æ¨¡å¼ï¼Œå¾ˆå®¹æ˜“çœ‹å‡ºè¿™é‡Œçš„  Visitor æ¨¡å¼æœ¬è´¨ä¸Šå°±æ˜¯ SAX æ¨¡å¼ï¼Œåªä¸è¿‡æ•°æ®æºä¸å†æ˜¯ç£ç›˜ä¸­çš„æ–‡ä»¶ï¼Œè€Œæ˜¯æ¢æˆäº†æ ¸å¿ƒç³»ç»Ÿçš„ Model å±‚è€Œå·²ã€‚</p><p>æ‰€ä»¥æˆ‘å‰é¢è®²çš„ SAX æ¨¡å¼çš„ç¼ºç‚¹å®ƒä¸€æ ·æœ‰ã€‚å®ƒæœ€å¤§çš„é—®é¢˜æ˜¯æœ‰é¢„è®¾çš„æ•°æ®è®¿é—®é€»è¾‘ï¼Œå…¶å®¢æˆ·æœªå¿…æœŸæœ›ä»¥ç›¸åŒçš„é€»è¾‘è®¿é—®æ•°æ®ã€‚</p><p>åŸºäºäº‹ä»¶æ¨¡å‹æ˜¯ä¸€ä¸ªéå¸¸ç®€é™‹çš„ç¼–ç¨‹æ¡†æ¶ï¼Œä¸å¤§éƒ¨åˆ† IO å­ç³»ç»Ÿçš„éœ€æ±‚æ–¹ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™é‡Œçš„ Word æ–‡æ¡£å­˜ç›˜ã€RTF æ–‡æ¡£å­˜ç›˜çš„è¯‰æ±‚å¹¶ä¸é‚£ä¹ˆåŒ¹é…ã€‚è§£å†³è¿™ç§ä¸åŒ¹é…çš„å¸¸è§„åšæ³•æ˜¯æŠŠæ•°æ®å…ˆç¼“å­˜ä¸‹æ¥ï¼Œç­‰åˆ°æˆ‘å½“å‰æ­¥éª¤æ‰€æœ‰éœ€è¦çš„æ•°æ®éƒ½å·²ç»å‘é€è¿‡æ¥äº†ï¼Œå†è¿›è¡Œå¤„ç†ã€‚</p><p>è¿™ä¸ªè®¾è®¡å¹¶ä¸æ˜¯å‡æƒ³çš„ï¼Œå®é™…ä¸Šæˆ‘å½“å¹´åœ¨åš WPS Office IO å­ç³»ç»Ÿç¬¬ä¸€ç‰ˆæœ¬çš„æ¶æ„è®¾è®¡æ—¶ï¼Œå°±é‡‡ç”¨äº†è¿™ä¸ªæ¶æ„ã€‚ä½†æœ€ç»ˆå®è·µä¸‹æ¥ï¼Œæˆ‘è‡ªå·±æ€»ç»“çš„æ—¶å€™è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªéå¸¸å¤±è´¥çš„è®¾è®¡ã€‚</p><p>ä¸€æ–¹é¢ï¼Œè™½ç„¶ Visitor æˆ–è€… SAX æ¨¡å¼çœ‹èµ·æ¥æ˜¯ â€œç®€æ´è€Œé«˜æ•ˆâ€ çš„ï¼Œä½†æ˜¯å®é™…ç¼–ç ä¸­ç¨‹åºå‘˜çš„å¿ƒæ™ºè´Ÿæ‹…æ¯”è¾ƒå¤§ï¼Œæœ‰å¤§é‡çš„å†—ä½™ä»£ç çº¯ç²¹å°±æ˜¯ä¸ºäº†ç¼“å­˜æ•°æ®ï¼Œç­‰å¾…æ›´å¤šæœ‰æ•ˆçš„æ•°æ®ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œè¿™ä¸ªæ¥å£ä»ç„¶æ˜¯æŠ½è±¡è€Œéš¾ä»¥ç†è§£çš„ã€‚æ¯”å¦‚ï¼Œä¸åŒäº‹ä»¶çš„æ¬¡åºæ˜¯ä»€ä¹ˆæ ·çš„ï¼Œéœ€è¦è¾ƒé•¿çš„æ–‡æ¡£è¯´æ˜ã€‚</p><p>è¿™ä¹Ÿæ˜¯ç»™æ¶æ„å¸ˆä»¬æäº†ä¸ªé†’ï¼Œæˆ‘ä»¬æ¶æ„è®¾è®¡çš„ KISS åŸåˆ™æå€¡çš„ç®€å•ï¼Œå¹¶ä¸æ˜¯æ¥å£å¤–è§‚ä¸Šçš„ç®€æ´ï¼Œè€Œæ˜¯ä¸šåŠ¡è¯­ä¹‰è¡¨è¾¾ä¸Šçš„å‡†ç¡®æ— æ­§ä¹‰ã€‚</p><h2>IO DOM æ¨¡å¼</h2><p>æ‰€ä»¥ç¬¬äºŒæ¬¡çš„æ¶æ„è¿­ä»£ï¼Œæˆ‘ä»¬è°ƒæ•´ä¸ºåŸºäº DOM æ¨¡å¼ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>type IoSpan interface {\n  Text() []byte\n  Attributes() IoSpanAttrs\n}\n\ntype IoSpans interface {\n  Len() int\n  Elem(i int) IoSpan\n}\n\ntype IoParagraph interface {\n  Spans() IoSpans\n  Attributes() IoParagraphAttrs\n}\n\ntype IoParagraphs interface {\n  Len() int\n  Elem(i int) IoParagraph\n}\n\ntype IoDocument interface {\n  Paragraphs() IoParagraphs\n  Attributes() IoDocumentAttrs\n}\n\nfunc NewIoDocument() IoDocument \n\ntype Document struct {\n  ...\n  Io() IoDocument\n}\n\nfunc NewDocument() *Document\n\nfunc SaveWord(stg IStorage, doc IoDocument) error\nfunc SaveRTF(f *os.File, doc IoDocument) error\nfunc SaveFile(file string, format string, doc IoDocument) error\n\nfunc LoadWord(stg IStorage, doc IoDocument) error\nfunc LoadRTF(f *os.File, doc IoDocument) error\nfunc LoadFile(file string, doc IoDocument) error\n</code></pre><p>åœ¨è¿™ä¸ªæ¶æ„ï¼Œæˆ‘ä»¬è®¤ä¸ºæœ‰ä¸¤å¥— DOMï¼Œä¸€å¥—æ˜¯ IO DOMï¼Œå³ IoDocument æ¥å£åŠå…¶ç›¸å…³çš„æ¥å£ã€‚ä¸€å¥—æ˜¯æ ¸å¿ƒç³»ç»Ÿè‡ªå·±çš„ DOMï¼Œä¹Ÿå°±æ˜¯ Document ç±»åŠå…¶ç›¸å…³çš„æ¥å£ã€‚è¿™ä¸¤å¥—æ¥å£å‡ ä¹æ˜¯é›·åŒçš„ï¼Œç†è®ºä¸Š Document åªæ˜¯ IoDocument è¿™ä¸ª DOM çš„è¶…é›†ã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¸æ˜¯ç›´æ¥åœ¨æ¥å£ä¸Šä½“ç°å‡ºè¶…é›†å…³ç³»ï¼Ÿä»è¯­æ³•è¡¨è¾¾ä¸Šå¾ˆéš¾ï¼Œæ¯•ç«Ÿè¿™æ˜¯ä¸€ä¸ªæ¥å£æ—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ¥å£ã€‚è¿™é‡Œæˆ‘ä»¬é€šè¿‡åœ¨ Document ç±»å¼•å…¥ Io() å‡½æ•°æ¥å°†å…¶è½¬ä¸º IoDocument æ¥å£ï¼Œä»¥ä½“ç°åŒæ–¹çš„è¶…é›†å…³ç³»ã€‚</p><p>åœ¨è¿™ä¸ªæ–¹æ¡ˆä¸‹ï¼Œå°† RTF æ–‡ä»¶è½¬ä¸º Word æ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>func ConvRTF2Word(rtf *os.File, word IStorage) error {\n  doc := NewIoDocument()\n  err := LoadRTF(rtf, doc)\n  if err != nil {\n    return err\n  }\n  return SaveWord(word, doc)\n}\n</code></pre><p>ç±»ä¼¼åœ°ï¼ŒåŠ è½½ä¸€ä¸ª Word æ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>func LoadWordDocument(stg IStorage) (*Document, error) {\n  doc := NewDocument()\n  err := LoadWord(stg, doc.Io())\n  if err != nil {\n    return nil, err\n  }\n  return doc, nil\n}\n</code></pre><p>ç›¸æ¯”å‰é¢çš„ Visitor æ¨¡å¼ï¼Œé‡‡ç”¨ IO DOM é™¤äº†è®©æ‰€æœ‰å­˜ç›˜è¯»ç›˜çš„æ¨¡å—ä»£ç å·¥ç¨‹é‡å˜ä½ï¼Œæ¥å£çš„ç†è§£ä¸€è‡´æ€§æ›´å¥½å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„å¥½å¤„ï¼Œæ˜¯ IO DOM æ›´è‡ªç„¶ï¼Œé¿å…äº†æƒŠå¼‚ã€‚å› ä¸ºæ ¸å¿ƒç³»ç»Ÿçš„ Model å±‚é€šå¸¸å°±æ˜¯é€šè¿‡ DOM æ¥å£æš´éœ²çš„ï¼Œè€Œ IO DOM ä»æ¦‚å¿µä¸Šåªæ˜¯ä¸€ä¸ªå­é›†å…³ç³»ï¼Œæ˜¾ç„¶å¯¹å®¢æˆ·çš„ç†è§£æˆæœ¬æ¥è¯´æ˜¯æœ€ä½çš„ã€‚è€Œ Visitor æ¨¡å¼ä½ å¯ä»¥ç†è§£ä¸ºå®ƒæ˜¯æ ¸å¿ƒç³»ç»Ÿ Model å±‚ä¸º IO å­ç³»ç»Ÿæä¾›çš„ä¸“ç”¨æ’ä»¶æœºåˆ¶ï¼Œå®ƒå¯¹æ ¸å¿ƒç³»ç»Ÿæ¥è¯´æ˜¯é¢å¤–çš„æˆæœ¬ã€‚</p><p>äº‹å®ä¸Šï¼Œåœ¨ DOM æ¨¡å¼åŸºç¡€ä¸Šæä¾› Visitor æ¨¡å¼æ˜¯æœ‰ç‚¹å¤šä½™çš„ã€‚DOM æ¨¡å¼é€šå¸¸æä¾›äº†æåº¦çµæ´»çš„æ•°æ®è®¿é—®æ¥å£ï¼Œå¯ä»¥é€‚åº”å‡ ä¹æ‰€æœ‰çš„æ•°æ®è¯»å–åœºæ™¯ã€‚</p><h2>å›åˆ°æœ€åˆçš„éœ€æ±‚</h2><p>æˆ‘ä»¬æ˜¯å¦è§£å†³äº†æœ€åˆ IO å­ç³»ç»Ÿçš„æ‰€æœ‰éœ€æ±‚ï¼Ÿ</p><p>æˆ‘ä»¬ç®€å•åˆ†æä¸‹å„ç±»ç”¨æˆ·æ•…äº‹ï¼ˆUser Storyï¼‰å°±èƒ½å¤Ÿå‘ç°å…¶å®å¹¶æ²¡æœ‰ã€‚æˆ‘ä»¬è§£å†³äº†æ‰€æœ‰æµå¼æ–‡æ¡£çš„å­˜ç›˜è¯»ç›˜ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³åŸºäºåˆ†é¡µæ˜¾ç¤ºçš„æ–‡æ¡£æ ¼å¼æ”¯æŒï¼Œå¦‚ï¼š</p><ul>\n<li>PDF æ–‡æ¡£ï¼›</li>\n<li>PS æ–‡æ¡£ã€‚</li>\n</ul><p>å› ä¸ºä»æ ¸å¿ƒç³»ç»Ÿ DOM å¾—åˆ°çš„æ–‡æ¡£ï¼Œæˆ–è€…æˆ‘ä»¬æŠ½è±¡çš„ IO DOMï¼Œéƒ½æ˜¯æµå¼æ–‡æ¡£ï¼Œå¹¶æ²¡æœ‰åˆ†é¡µä¿¡æ¯ã€‚å¦‚æœæˆ‘ä»¬ PDFã€PS æ–‡æ¡£çš„å­˜ç›˜æ¥å£æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>func SavePDF(f *os.File, doc IoDocument) error\nfunc SavePS(f *os.File, doc IoDocument) error\n</code></pre><p>é‚£ä¹ˆæ„å‘³ç€è¿™äº›å­˜ç›˜æ¨¡å—çš„å®ç°è€…éœ€è¦å¯¹ IO DOM è¿›è¡Œæ’ç‰ˆï¼ˆRenderï¼‰ï¼Œå¾—åˆ°å…·å¤‡åˆ†é¡µä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼Œç„¶åä»¥æ­¤è¿›è¡Œå­˜ç›˜ã€‚</p><p>è¿™æ„å‘³ç€ IO å­ç³»ç»Ÿåœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹ï¼Œå…¶å®ä¸æ’ç‰ˆä¸ç»˜åˆ¶å­ç³»ç»Ÿç›¸å…³ï¼ŒåŒ…æ‹¬ï¼š</p><ul>\n<li>å±å¹•ç»˜åˆ¶ï¼ˆonPaintï¼‰ï¼›</li>\n<li>æ‰“å°ï¼ˆonPrintï¼‰ã€‚</li>\n</ul><p>å¯èƒ½æœ‰äº›äººèƒ½å¤Ÿå›å¿†èµ·æ¥ï¼Œå‰é¢åœ¨ â€œ<a href=\"https://time.geekbang.org/column/article/105356\">22 | æ¡Œé¢ç¨‹åºçš„æ¶æ„å»ºè®®</a>â€ ä¸€è®²ä»‹ç» Model å’Œ ViewModel ä¹‹é—´çš„å…³ç³»æ—¶ï¼Œæˆ‘ä¹Ÿæ˜¯æ‹¿ Office æ–‡æ¡£ä¸¾ä¾‹ã€‚æ ¸å¿ƒç³»ç»Ÿçš„ DOMï¼Œæˆ–è€… IO å­ç³»ç»Ÿçš„ IO DOMï¼Œé€šè¿‡æ’ç‰ˆï¼ˆRenderï¼‰åŠŸèƒ½ï¼Œå¯ä»¥æ¸²æŸ“å‡º View å±‚æ‰€éœ€çš„æ˜¾ç¤ºæ•°æ®ï¼Œæˆ‘ä»¬ä¸å¦¨ç§°ä¹‹ä¸º View DOMã€‚</p><p>è€Œæœ‰äº† View DOMï¼Œæˆ‘ä»¬å°±ä¸åªæ˜¯å¯ä»¥è¿›è¡Œå±å¹•ç»˜åˆ¶å’Œæ‰“å°ï¼Œä¹Ÿå¯ä»¥æ”¯æŒ PDF/PS æ–‡æ¡£çš„å­˜ç›˜äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>func Render(doc IoDocument) (ViewDocument, error)\n\nfunc SavePDF(f *os.File, doc ViewDocument) error\nfunc SavePS(f *os.File, doc ViewDocument) error\n</code></pre><p>å¦‚æœä½ åšéœ€æ±‚åˆ†æçš„æ—¶å€™ï¼Œæ²¡æœ‰æŠŠè¿™äº›éœ€æ±‚å…³è”æ€§æ‰¾åˆ°ï¼Œé‚£å°±ä¸æ˜¯ä¸€æ¬¡åˆæ ¼çš„éœ€æ±‚åˆ†æè¿‡ç¨‹ã€‚</p><h2>ä¸æ–­é‡æ–°å®¡è§†è¾¹ç•Œ</h2><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„åˆ†ææ˜¯å¦å·²ç»è¶³å¤Ÿç»†è‡´ï¼ŒæŠŠæ‰€æœ‰å…³é”®ç»†èŠ‚éƒ½æƒ³å¾—è¶³å¤Ÿæ¸…æ¥šï¼Ÿ</p><p>å…¶å®å¹¶æ²¡æœ‰ï¼Œæˆ‘ä»¬åœ¨ç†éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è€ƒè™‘æ”¯æŒçš„æ˜¯ï¼š</p><ul>\n<li>å‰ªè´´æ¿çš„æ‹·è´ï¼ˆå­˜ç›˜ï¼‰ã€ç²˜è´´ï¼ˆè¯»ç›˜ï¼‰ã€‚</li>\n</ul><p>ä½†æ˜¯æˆ‘ä»¬åœ¨æ•´ç†ç”¨æˆ·æ•…äº‹ï¼ˆUser Storyï¼‰çš„æ—¶å€™ä»ç„¶æŠŠå®ƒç»™æ¼äº†ã€‚å½“ç„¶ï¼Œå‰ªè´´æ¿å¸¦æ¥çš„å½±å“æ²¡æœ‰ PDF/PS æ–‡æ¡£å¤§ï¼Œå®ƒåªæ˜¯æ„å‘³ç€æˆ‘ä»¬çš„æ•°æ®æµä¸å†æ˜¯ *os.File å¯ä»¥è¡¨è¾¾ï¼Œè€Œæ˜¯éœ€è¦ç”¨æ›´æŠ½è±¡çš„ io.Reader/Writer æ¥è¡¨ç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ä¸‹æ¥å£ï¼š</p><pre><code>func SaveRTF(f *os.File, doc IoDocument) error\nfunc LoadRTF(f *os.File, doc IoDocument) error\n\nfunc SavePDF(f *os.File, doc ViewDocument) error\nfunc SavePS(f *os.File, doc ViewDocument) error\n</code></pre><p>è¦æ”¹ä¸ºï¼š</p><pre><code>func SaveRTF(f io.Writer, doc IoDocument) error\nfunc LoadRTF(f io.Reader, doc IoDocument) error\n\nfunc SavePDF(f io.Writer, doc ViewDocument) error\nfunc SavePS(f io.Writer, doc ViewDocument) error\n</code></pre><p>è¿™å…¶å®å°±æ˜¯æˆ‘å‰é¢å¼ºè°ƒçš„ â€œå‘ç°æ¨¡å—æ¥å£ä¸­å¤šä½™çš„çº¦æŸâ€çš„ä¸€ç§å…¸å‹è¡¨ç°ã€‚åœ¨æˆ‘ä»¬æ¨¡å—æé«˜åˆ°è¶³å¤Ÿé€šç”¨çš„ã€æ™®é€‚çš„åœºæ™¯æ¥çœ‹æ—¶ï¼Œå®é™…ä¸Šå¹¶ä¸éœ€è¦å‰ªè´´æ¿è¿™æ ·å…·ä½“çš„ç”¨æˆ·åœºæ™¯ï¼Œä¹Ÿèƒ½å¤ŸåŠæ—¶åœ°å‘ç°è¿™ç§è¿‡åº¦çº¦æŸã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬çš„ IO å­ç³»ç»Ÿçš„å…¥å£çº§çš„æ¥å£ï¼š</p><pre><code>func SaveFile(file string, format string, doc IoDocument) error\nfunc LoadFile(file string, doc IoDocument) error\n</code></pre><p>æˆ‘ä»¬ä¸”ä¸è¯´è¿™é‡Œé¢æ€ä¹ˆå®ç°æ’ä»¶æœºåˆ¶ï¼Œä»¥ä¾¿äºæˆ‘ä»¬éå¸¸æ–¹ä¾¿å°±èƒ½å¤Ÿä¸ä¿®æ”¹ä»»ä½•ä»£ç ï¼Œå°±å¢åŠ ä¸€ç§æ–°çš„æ–‡ä»¶æ ¼å¼çš„è¯»å†™æ”¯æŒã€‚æˆ‘ä»¬å•å°±å®ƒçš„è¾¹ç•Œæ¥çœ‹ï¼Œä¹Ÿéœ€è¦è¿›ä¸€æ­¥æ¢è®¨ã€‚</p><p>å…¶ä¸€ï¼ŒLoadFile æ–¹æ³•æˆ‘ä»¬å¯èƒ½å¸Œæœ›çŸ¥é“åŠ è½½çš„æ–‡ä»¶å…·ä½“æ˜¯æ–‡æ¡£æ ¼å¼ï¼Œæ‰€ä»¥åº”è¯¥æ”¹ä¸ºï¼š</p><pre><code>func LoadFile(file string, doc IoDocument) (format string, err error)\n</code></pre><p>å…¶äºŒï¼Œè€ƒè™‘åˆ°å‰ªè´´æ¿çš„æ”¯æŒï¼Œæˆ‘ä»¬è¾“å…¥çš„æ•°æ®æºä¸ä¸€å®šæ˜¯æ–‡ä»¶ï¼Œè¿˜å¯èƒ½æ˜¯ io.Readerã€IStorage ç­‰ï¼Œåœ¨ Windows å¹³å°ä¸‹æœ‰ STGMEDIUM ç»“æ„ä½“æ¥è¡¨è¾¾é€šç”¨çš„ä»‹è´¨ç±»å‹ï¼Œå¯ä»¥å‚è€ƒã€‚ä»è·¨å¹³å°çš„è§’åº¦ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ç›´æ¥ç”¨ Go è¯­è¨€ä¸­çš„ä»»æ„ç±»å‹ã€‚å¦‚ä¸‹ï¼š</p><pre><code>func Save(src interface{}, format string, doc IoDocument) error\nfunc Load(src interface{}, doc IoDocument) (format string, err error)\n</code></pre><p>æ—¢ç„¶ç”¨äº† interface{} è¿™æ ·çš„ä»»æ„ç±»å‹ï¼Œå°±æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨æ–‡æ¡£å±‚é¢ä¸Šè¡¥å……æ¸…æ¥šæˆ‘ä»¬éƒ½æ”¯æŒäº›ä»€ä¹ˆï¼Œä¸æ”¯æŒäº›ä»€ä¹ˆï¼Œé¿å…åœ¨å›¢é˜Ÿå…±è¯†ä¸Šé‡åˆ°éº»çƒ¦ã€‚</p><p>å…¶ä¸‰ï¼Œè€ƒè™‘ PDF/PS è¿™ç±»éæµå¼æ–‡æ¡£çš„æ”¯æŒï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨ IoDocument ä½œä¸ºè¾“å…¥æ–‡æ¡£çš„ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ä¸‹æ¥å£ï¼š</p><pre><code>func Save(dest interface{}, format string, doc IoDocument) error\n</code></pre><p>éœ€è¦ä½œå‡ºé€‚å½“çš„è°ƒæ•´ã€‚å…·ä½“åº”è¯¥æ€ä¹ˆè°ƒï¼Ÿæ¬¢è¿ç•™è¨€å‘è¡¨ä½ çš„è§‚ç‚¹ã€‚</p><h2>ç»“è¯­</h2><p>è¿™ä¸€è®²æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œæ¥å‰–ææ¶æ„è®¾è®¡è¿‡ç¨‹ä¸­æˆ‘ä»¬å¦‚ä½•åœ¨æ€è€ƒæ¨¡å—è¾¹ç•Œã€‚</p><p>æœ€é‡è¦çš„ï¼Œå½“ç„¶æ˜¯èŒè´£ã€‚ä¸åŒçš„ä¸šåŠ¡æ¨¡å—ï¼Œåˆ†åˆ«åšä»€ä¹ˆï¼Œå®ƒä»¬ä¹‹é—´é€šè¿‡ä»€ä¹ˆæ ·çš„æ–¹å¼è€¦åˆåœ¨ä¸€èµ·ã€‚è¿™ç§è€¦åˆæ–¹å¼çš„éœ€æ±‚é€‚åº”æ€§å¦‚ä½•ï¼Œå¼€å‘äººå‘˜å®ç°ä¸Šçš„å¿ƒæ™ºè´Ÿæ‹…å¦‚ä½•ï¼Œæ˜¯æˆ‘ä»¬å†³ç­–çš„å½±å“å› ç´ ã€‚</p><p>ä¸ºäº†é¿å…ç•™ä¸‹éš¾ä»¥è°ƒæ•´çš„æ¶æ„ç¼ºé™·ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ è®¤çœŸç»†è‡´åšå¥½éœ€æ±‚åˆ†æï¼Œå¹¶ä¸”åœ¨æ¶æ„è®¾è®¡æ—¶ï¼Œè®¤çœŸç»†è‡´åœ°è¿‡ä¸€éæ‰€æœ‰çš„ç”¨æˆ·æ•…äº‹ï¼ˆUser Storyï¼‰ï¼Œä»¥ç¡®è®¤æˆ‘ä»¬çš„æ¶æ„é€‚åº”æ€§ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬åœ¨å…·ä½“æ¥å£çš„æ¯ä¸ªè¾“å…¥è¾“å‡ºå‚æ•°çš„ç±»å‹é€‰æ‹©ä¸Šï¼Œä¸€æ ·è¦éå¸¸è€ƒç©¶ï¼Œå°½å¯èƒ½å»å‘ç°å…¶ä¸­ â€œè¿‡åº¦çš„ï¼ˆæˆ–å¤šä½™çš„ï¼‰â€ çº¦æŸã€‚</p><p>å¦‚æœä½ å¯¹ä»Šå¤©çš„å†…å®¹æœ‰ä»€ä¹ˆæ€è€ƒä¸è§£è¯»ï¼Œæ¬¢è¿ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚ä¸‹ä¸€è®²æˆ‘ä»¬çš„è¯é¢˜æŒ‰ç…§å¤§çº²æ˜¯ â€œå…¨å±€æ€§åŠŸèƒ½çš„æ¶æ„è®¾è®¡â€ï¼Œä½†æˆ‘è®¡åˆ’åšä¸€ç¯‡åŠ é¤ï¼Œå†…å®¹æ˜¯æ¶æ„æ€ç»´å®æˆ˜ï¼ŒæŠŠå‰é¢æˆ‘ä»¬çš„å®æˆ˜æ¡ˆä¾‹ â€œç”»å›¾ç¨‹åºâ€ å’Œè¿™å‡ è®²çš„ç†è®ºçŸ¥è¯†ç»“åˆèµ·æ¥ã€‚</p><p>å¤§å®¶å¯ä»¥æå‰æ€è€ƒä»¥ä¸‹å†…å®¹ï¼šå¯¹ç”»å›¾ç¨‹åºè¿›è¡Œå­ç³»ç»Ÿçš„åˆ’åˆ†ï¼Œæˆ‘ä»¬çš„å“ªäº›ä»£ç æ˜¯æ ¸å¿ƒç³»ç»Ÿï¼Œå“ªäº›æ˜¯å‘¨è¾¹ç³»ç»Ÿï¼Ÿä»åˆ¤æ–­æ¶æ„è®¾è®¡çš„ä¼˜åŠ£çš„è§’åº¦ï¼Œæˆ‘ä»¬å¦‚ä½•è¯„åˆ¤å®ƒå¥½è¿˜æ˜¯ä¸å¥½ï¼Ÿ</p><p>å¦‚æœä½ è‡ªå·±ä¹Ÿå®ç°äº†ä¸€ä¸ª â€œç”»å›¾ç¨‹åºâ€ï¼Œå¯ä»¥æ ¹æ®è¿™å‡ è®²çš„å†…å®¹ï¼Œå¯¹æ¯”ä¸€ä¸‹æˆ‘ä»¬ç»™å‡ºçš„æ ·ä¾‹ï¼Œå’Œè‡ªå·±å†™çš„æœ‰å“ªäº›æ¶æ„æ€æƒ³ä¸Šçš„ä¸åŒï¼Œæ€ä¹ˆè¯„ä»·å®ƒä»¬çš„å¥½åï¼Ÿ</p><p>å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ã€‚</p>","comments":[{"had_liked":false,"id":155926,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1574779217,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35934517585","product_id":100025201,"comment_content":"è¿™ä¸‹å¥½äº†ï¼Œæ»¡è„‘å­æ¶æ„å°±æ˜¯ä¸šåŠ¡çš„æ­£äº¤åˆ†è§£äº†ã€‚ã€‚ã€‚ã€‚ã€‚","like_count":9},{"had_liked":false,"id":156180,"user_name":"Sam","can_delete":false,"product_type":"c1","uid":1314195,"ip_address":"","ucode":"C6454F1D848055","user_header":"","comment_is_top":false,"comment_ctime":1574829488,"is_pvip":false,"replies":[{"id":"60037","content":"1ã€formatå°±æ˜¯è¦ä¿å­˜çš„æ–‡ä»¶æ ¼å¼ï¼›<br>2ã€å…¶å®ä½ è¯´çš„æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œæˆ‘ä¹Ÿç”¨çš„æ˜¯è¿™ä¸ªæ–¹æ³•ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1574855789,"ip_address":"","comment_id":156180,"utype":1}],"discussion_count":1,"race_medal":0,"score":"23049665968","product_id":100025201,"comment_content":"è®¸å¤§ï¼Œè¯·æ•™æ‚¨ä¸€ä¸ªé—®é¢˜ã€‚æ–‡ä¸­æåˆ°çš„å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š<br>func Save(src interface{}, format string, doc IoDocument) error<br>func Load(src interface{}, doc IoDocument) (format string, err error)<br>å…¶ä¸­formatå‚æ•°æœ‰ä½•ç”¨æ„ï¼Œéº»çƒ¦æŒ‡ç‚¹ä¸‹ã€‚<br>ç¬¬äºŒä¸ªï¼š func Save(dest interface{}, format string, doc IoDocument) error<br>æˆ‘æ²¡æƒ³åˆ°æ”¹é€ æ–¹æ³•ï¼Œåªæƒ³åˆ°äº†å¢åŠ äº† func Export(dest interface{}, format string, doc ViewDocument) errorï¼Œè¿™ç§æ–¹å¼ï¼Œæ„Ÿè§‰å¥½Low","like_count":5,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":476020,"discussion_content":"1ã€formatå°±æ˜¯è¦ä¿å­˜çš„æ–‡ä»¶æ ¼å¼ï¼›\n2ã€å…¶å®ä½ è¯´çš„æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œæˆ‘ä¹Ÿç”¨çš„æ˜¯è¿™ä¸ªæ–¹æ³•ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574855789,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155715,"user_name":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","can_delete":false,"product_type":"c1","uid":1228022,"ip_address":"","ucode":"1A2F8AA6F6DB54","user_header":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","comment_is_top":false,"comment_ctime":1574742019,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"23049578499","product_id":100025201,"comment_content":"å…¶å®ï¼Œè¿™é‡Œé¢æœ‰ä¸€ä¸ªéšå«çš„å†³ç­–æ²¡æœ‰äº¤ä»£ï¼Œä¸ºä»€ä¹ˆæœ‰å¼•å…¥ IO DOMï¼Œç›´æ¥æ‹¿æ ¸å¿ƒç³»ç»Ÿçš„ DOM æ¥ä½œä¸º IO ç³»ç»Ÿä¾èµ–è¡Œä¸è¡Œï¼Ÿæ¬¢è¿ç•™è¨€æ¢è®¨ã€‚","like_count":6,"discussions":[{"author":{"id":1181942,"avatar":"https://static001.geekbang.org/account/avatar/00/12/08/f6/76285598.jpg","nickname":"å°é£","note":"","ucode":"03D2FF9A81AC98","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":304470,"discussion_content":"æ ¸å¿ƒdomç†è§£ä¸ºé¢å‘ä¸šåŠ¡çš„æ•°æ®ç»“æ„ï¼Œio domç†è§£ä¸ºé¢å‘å­˜å‚¨çš„æ•°æ®ç»“æ„ï¼Œæ ¸å¿ƒdomä¾èµ–io domã€‚åœ¨å·²ç»åˆ’åˆ†æ ¸å¿ƒç³»ç»Ÿå’Œioç³»ç»Ÿçš„å‰æä¸‹ï¼Œæ ¸å¿ƒç³»ç»Ÿå¤„åœ¨é«˜å±‚é¢å‘ä¸šåŠ¡ï¼Œioç³»ç»Ÿå¤„åœ¨ä½å±‚å¤„ç†ioï¼Œæ ¸å¿ƒç³»ç»Ÿä¾èµ–ioç³»ç»Ÿï¼Œæ‰€ä»¥ioç³»ç»Ÿç›´æ¥ä½¿ç”¨æ ¸å¿ƒdomå½¢æˆåå‘ä¾èµ–ä¸åˆé€‚ã€‚è¿›ä¸€æ­¥çœ‹ï¼Œå‡å¦‚ä¸€å®šè¦è®©ioç³»ç»Ÿä¾èµ–æ ¸å¿ƒdomï¼Œå½¢æˆäº†åŒå‘ä¾èµ–ï¼Œè¯´æ˜è¿™ä¸¤éƒ¨åˆ†å…³ç³»ç´§å¯†ï¼Œå¯ä»¥è®¤ä¸ºéƒ½å±äºæ ¸å¿ƒç³»ç»Ÿã€‚è¿™æ ·ioç›¸å…³æ¥å£ç›´æ¥ä½¿ç”¨æ ¸å¿ƒdomä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½†è¿™ç§æ–¹æ¡ˆæœ‰ä¸¤ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€ï¼Œè¿åäº†æ ¸å¿ƒç³»ç»Ÿå°½é‡å°å’Œç¨³å®šçš„åŸåˆ™ï¼Œioéƒ¨åˆ†æ˜¯å¤šæ ·å’Œæ˜“å˜çš„ã€‚ç¬¬äºŒï¼Œå³ä½¿ioç›¸å…³æ¥å£ä½¿ç”¨æ ¸å¿ƒdomï¼Œåœ¨å®ç°æ—¶ä¸å¯é¿å…ä¼šç”¨åˆ°å’Œioæœ‰å…³çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åœ¨æ ¸å¿ƒdomä¸­æ˜¯æ²¡æœ‰çš„ï¼Œè¿˜æ˜¯éœ€è¦åœ¨å†…éƒ¨è¿›è¡Œè½¬æ¢å¤„ç†ï¼Œå¼•å…¥ç±»ä¼¼io domçš„æ•°æ®ç»“æ„ï¼ŒåŒºåˆ«åœ¨äºéšè—åœ¨å†…éƒ¨å®ç°è¿˜æ˜¯æš´éœ²åœ¨æ¥å£å®šä¹‰ã€‚ç»¼åˆæ¥çœ‹ï¼Œè¿˜æ˜¯åŸæ–‡çš„æ–¹æ¡ˆæ›´åˆç†ã€‚","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1599576849,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2559716,"avatar":"https://static001.geekbang.org/account/avatar/00/27/0e/e4/7444469a.jpg","nickname":"é˜¿ç™½","note":"","ucode":"2140DAC07B8B10","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":573247,"discussion_content":"ä¸¤ä¸ªåŸåˆ™ï¼š1.å•å‘ä¾èµ–ï¼›2.ç¨³å®šä¸å˜åŒ–åˆ†ç¦»ï¼›","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1653294370,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2059610,"avatar":"","nickname":"guxiaobai","note":"","ucode":"6B34EE2DC2BFAE","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305679,"discussion_content":"æ¥å£éš”ç¦»åŸåˆ™ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1600053883,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1368648,"avatar":"https://static001.geekbang.org/account/avatar/00/14/e2/48/6c066714.jpg","nickname":"ä¿¡äº†","note":"","ucode":"EA188A1DD1D390","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":126953,"discussion_content":"å› ä¸ºä¸å¯è¿‡åº¦ä¾èµ–æ ¸å¿ƒç³»ç»Ÿçš„ åŸå› å—ï¼Ÿï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1578552764,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155664,"user_name":"å´","can_delete":false,"product_type":"c1","uid":1495840,"ip_address":"","ucode":"4807FB811B2EDC","user_header":"https://static001.geekbang.org/account/avatar/00/16/d3/20/95e71191.jpg","comment_is_top":false,"comment_ctime":1574734226,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"18754603410","product_id":100025201,"comment_content":"è¶Šæ¥è¶Šæœ‰å‘³ï¼Œè¿™ç³»åˆ—æ–‡ç« éœ€è¦åå¤ç ”ç©¶","like_count":5},{"had_liked":false,"id":288529,"user_name":"æœ¨ç“œ777","can_delete":false,"product_type":"c1","uid":1512537,"ip_address":"","ucode":"FC52A499AF6374","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/aFAYPyw7ywC1xE9h1qibnTBwtWn2ClJqlicy5cMomhZVaruMyqSq76wMkS279mUaGhrLGwWo9ZnW0WCWfmMovlXw/132","comment_is_top":false,"comment_ctime":1618531000,"is_pvip":false,"replies":[{"id":"104736","content":"1ã€èµ°è¿›ç”¨æˆ·ï¼›2ã€æ•´ç†&#47;æ¢³ç†éœ€æ±‚ï¼Œåšéœ€æ±‚åˆ†æï¼Œåƒä¸‡åˆ«è·³è¿‡éœ€æ±‚åˆ†æè¿™ä¸ªå…³é”®æ­¥éª¤å°±è®¾è®¡","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1618555643,"ip_address":"","comment_id":288529,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5913498296","product_id":100025201,"comment_content":"é¡¹ç›®ç»å¸¸åœ¨å¼€å§‹å‰ï¼Œæ ¹æœ¬ä¸çŸ¥é“å…·ä½“ä¸šåŠ¡éœ€æ±‚ï¼Œè€Œæ˜¯ä¸æ–­è¿­ä»£çš„ï¼Œè¯·é—®æ€ä¹ˆè¿›è¡Œ è‰¯å¥½çš„æ¶æ„è®¾è®¡å‘¢ï¼Ÿ","like_count":2,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":518651,"discussion_content":"1ã€èµ°è¿›ç”¨æˆ·ï¼›2ã€æ•´ç†/æ¢³ç†éœ€æ±‚ï¼Œåšéœ€æ±‚åˆ†æï¼Œåƒä¸‡åˆ«è·³è¿‡éœ€æ±‚åˆ†æè¿™ä¸ªå…³é”®æ­¥éª¤å°±è®¾è®¡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618555643,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":159589,"user_name":"Bachue Zhou","can_delete":false,"product_type":"c1","uid":1494491,"ip_address":"","ucode":"3175754775CA32","user_header":"https://static001.geekbang.org/account/avatar/00/16/cd/db/7467ad23.jpg","comment_is_top":false,"comment_ctime":1575696196,"is_pvip":false,"replies":[{"id":"60980","content":"æ˜¯è¿™æ ·ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸åº”è¯¥ç”¨ any ç±»å‹ï¼Œé™¤éæœ‰ä»€ä¹ˆè®©äººä¿¡æœçš„ç‰¹æ®Šç†ç”±ã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1575703065,"ip_address":"","comment_id":159589,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5870663492","product_id":100025201,"comment_content":"æ„Ÿè§‰ä»€ä¹ˆçº¦æŸéƒ½æ²¡æœ‰çš„ interfaceï½›ï½ ä¸è¯¥å‡ºç°åœ¨é‡è¦çš„æ¥å£é‡Œ ä¸å¯èƒ½çœŸçš„ä»€ä¹ˆçº¦æŸéƒ½æ²¡æœ‰ è‚¯å®šä¼šè¦æ±‚å®ç°æŸäº›æ¥å£æˆ–è€…çº¦å®šäº†æŸç§åå°„æ–¹å¼ è¿˜æ˜¯åº”è¯¥åœ¨æ¥å£é‡Œä½“ç°å‡ºå…·ä½“çš„çº¦æŸç»†èŠ‚","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":477109,"discussion_content":"æ˜¯è¿™æ ·ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸åº”è¯¥ç”¨ any ç±»å‹ï¼Œé™¤éæœ‰ä»€ä¹ˆè®©äººä¿¡æœçš„ç‰¹æ®Šç†ç”±ã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1575703065,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155879,"user_name":"å´","can_delete":false,"product_type":"c1","uid":1495840,"ip_address":"","ucode":"4807FB811B2EDC","user_header":"https://static001.geekbang.org/account/avatar/00/16/d3/20/95e71191.jpg","comment_is_top":false,"comment_ctime":1574772146,"is_pvip":false,"replies":[{"id":"59898","content":"ç½‘ä¸Šéšæ„ä¹°ä¸€æœ¬éƒ½å¯ä»¥ï¼ŒGoè¯­æ³•ç¡®å®šæ€§è¾ƒå¼ºï¼ŒæŒæ¡é—¨æ§›æ¯”è¾ƒä½ï¼Œå…³é”®åœ¨ç”¨èµ·æ¥ã€‚Goèƒ½å¤Ÿç”¨çš„é¢†åŸŸå¯ä»¥å¾ˆå¹¿æ³›ï¼Œä¸»è¦åšåç«¯å¼€å‘ï¼Œå•æˆ‘ç”šè‡³ä¹Ÿç”¨å®ƒåšè¿‡æ¸¸æˆã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1574776494,"ip_address":"","comment_id":155879,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5869739442","product_id":100025201,"comment_content":"è€å¤§ï¼Œgoè¯­è¨€çš„å…¥é—¨ä¹¦ä»‹ç»ä¸€ä¸‹ï¼Œgoè¯­è¨€æ“…é•¿åšå•¥äº†","like_count":1,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475907,"discussion_content":"ç½‘ä¸Šéšæ„ä¹°ä¸€æœ¬éƒ½å¯ä»¥ï¼ŒGoè¯­æ³•ç¡®å®šæ€§è¾ƒå¼ºï¼ŒæŒæ¡é—¨æ§›æ¯”è¾ƒä½ï¼Œå…³é”®åœ¨ç”¨èµ·æ¥ã€‚Goèƒ½å¤Ÿç”¨çš„é¢†åŸŸå¯ä»¥å¾ˆå¹¿æ³›ï¼Œä¸»è¦åšåç«¯å¼€å‘ï¼Œå•æˆ‘ç”šè‡³ä¹Ÿç”¨å®ƒåšè¿‡æ¸¸æˆã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574776494,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":321380,"user_name":"å“²","can_delete":false,"product_type":"c1","uid":2581217,"ip_address":"","ucode":"2616478F11E457","user_header":"https://static001.geekbang.org/account/avatar/00/27/62/e1/764aca72.jpg","comment_is_top":false,"comment_ctime":1636818195,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1636818195","product_id":100025201,"comment_content":"è½¯ä»¶æ¶æ„è®¾è®¡ä¸­æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç—›ç‚¹æ˜¯è€é€»è¾‘åŠ æ–°åŠŸèƒ½ï¼Œå‘ç°è¶Šæ¥è¶Šéš¾ï¼Œæœ€ååƒå±å±±ä¸€æ ·æ”¹ä¸åŠ¨ã€‚è€Œå¥½çš„ä¸šåŠ¡ä»£ç åº”è¯¥åƒæ’ä»¶ä¸€æ ·å³æ’å³ç”¨çš„ã€‚æ€ä¹ˆè¾¾åˆ°è¿™ç§æ•ˆæœå‘¢ï¼Œå°±æ˜¯æœ¬ç« æ‰€è®²çš„ï¼Œè¦æ±‚æ¯ä¸€ä¸ªç»†åˆ†çš„æ¨¡å—å„¿è¶³å¤Ÿç®€å•ä¸”è„±ç¦»è€¦åˆæ€§ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨æ¶æ„æˆ–è€…å°æ­¥é‡æ„çš„è¿‡ç¨‹ä¸­ï¼Œåšåˆ°å®šä¹‰å¥½æ¨¡å—çš„è¾¹ç•Œäº†ã€‚","like_count":0},{"had_liked":false,"id":284235,"user_name":"Run","can_delete":false,"product_type":"c1","uid":1371941,"ip_address":"","ucode":"6738D2F36ACFF6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLMDBq7lqg9ZasC4f21R0axKJRVCBImPKlQF8yOicLLXIsNgsZxsVyN1mbvFOL6eVPluTNgJofwZeA/132","comment_is_top":false,"comment_ctime":1616131435,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1616131435","product_id":100025201,"comment_content":"æœ¯è¯­å•Š","like_count":0},{"had_liked":false,"id":222136,"user_name":"will","can_delete":false,"product_type":"c1","uid":1071114,"ip_address":"","ucode":"FDEBE8C288AB6F","user_header":"https://static001.geekbang.org/account/avatar/00/10/58/0a/1a96a681.jpg","comment_is_top":false,"comment_ctime":1590685752,"is_pvip":false,"replies":[{"id":"81886","content":"ä¸€èˆ¬æ¥è¯´ï¼Œä¸šåŠ¡domå’Œio domæ˜¯è¶…é›†å…³ç³»","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1590714241,"ip_address":"","comment_id":222136,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1590685752","product_id":100025201,"comment_content":"ä»‹ç»IO DOM æ¨¡å¼æ—¶æåˆ°æœ‰ä¸¤å¥—DOMï¼Œä¸€å¥—æ˜¯ IO DOMæˆ‘å¯ä»¥çœ‹åˆ°åœ¨ä»£ç ä¸­åæ˜ ï¼Œä½†æ˜¯è¯´å¦å¤–ä¸€å¥—æ˜¯Document ç±»åŠå…¶ç›¸å…³çš„æ¥å£ï¼Œå®åœ¨ç†è§£ä¸æ¥... ç›¸å…³æ¥å£æ˜¯ä»€ä¹ˆæ¥å£ï¼Œå¥½åƒç¤ºä¾‹ä»£ç çœç•¥äº†å¾ˆå¤šï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":496681,"discussion_content":"ä¸€èˆ¬æ¥è¯´ï¼Œä¸šåŠ¡domå’Œio domæ˜¯è¶…é›†å…³ç³»","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1590714241,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":212286,"user_name":"äº¢ï¼ˆçŸ¥è¡Œåˆä¸€çš„è·¯ä¸Šï¼‰","can_delete":false,"product_type":"c1","uid":1347013,"ip_address":"","ucode":"958AF7C96EB9E8","user_header":"https://static001.geekbang.org/account/avatar/00/14/8d/c5/898b13b4.jpg","comment_is_top":false,"comment_ctime":1588084239,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1588084239","product_id":100025201,"comment_content":"æ¶æ„è®¾è®¡æ—¶ï¼Œè®¤çœŸç»†è‡´åœ°è¿‡ä¸€éæ‰€æœ‰çš„ç”¨æˆ·æ•…äº‹ï¼Œè¿™ä¸€ç‚¹å¤ªé‡è¦äº†ã€‚å®é™…è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œç»å¸¸é—ç•™ä¸€äº›é‡è¦çš„ç‚¹ï¼Œå¯¼è‡´æ”¹åŠ¨æ¨¡å—æ¥å£ï¼Œä¸€å®šè¦å¤šä¸‹åŠŸå¤«ï¼Œå‡å°‘å¼€å‘çš„æˆæœ¬ã€‚","like_count":0},{"had_liked":false,"id":210912,"user_name":"ä¸åœ¨è°ƒä¸Š","can_delete":false,"product_type":"c1","uid":1110733,"ip_address":"","ucode":"A1E82663DA37D2","user_header":"https://static001.geekbang.org/account/avatar/00/10/f2/cd/d412a403.jpg","comment_is_top":false,"comment_ctime":1587864504,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587864504","product_id":100025201,"comment_content":"è®¸å¤§ï¼Œæƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæ–‡ç« ä¸­çš„ä»£ç ï¼Œæ€ä¹ˆç•Œå®šä½¿ç”¨æ–¹å’Œæä¾›æ–¹çš„åŠŸèƒ½å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":181383,"user_name":"Bravery168","can_delete":false,"product_type":"c1","uid":1232973,"ip_address":"","ucode":"DB08AEFBD6DF2B","user_header":"https://static001.geekbang.org/account/avatar/00/12/d0/4d/2116c1a4.jpg","comment_is_top":false,"comment_ctime":1582532597,"is_pvip":false,"discussion_count":0,"race_medal":4,"score":"1582532597","product_id":100025201,"comment_content":"çœ‹è¿™ç« çš„ä½“ä¼šï¼šæ¶æ„å¸ˆè¦æŠŠæ¡é“ï¼ˆå¿ƒæ³•ï¼‰ï¼Œä¹Ÿè¦æ·±å…¥æœ¯ï¼ˆæ­¦å™¨ï¼Œæˆ–è€…è¯´è§£å†³é—®é¢˜çš„å…·ä½“æ–¹å¼æ–¹æ³•ï¼‰ï¼Œæ‰‹ä¸­èƒ½æ‹¿å‡ºçš„æ­¦å™¨å¾ˆå¤šï¼Œå¿ƒé‡Œå½¢æˆè¿ç”¨çš„æ³•åˆ™ï¼Œåšåˆ°é“æœ¯ä¸€ä½“ï¼Œæœ€åçš„å¢ƒç•Œå°±æ˜¯è¾¾åˆ°å¿ƒä¸­æœ‰æ³•ï¼Œæ‰‹ä¸­æ— å‰‘èƒœæœ‰å‰‘çš„å¢ƒç•Œã€‚","like_count":0},{"had_liked":false,"id":155929,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1574779844,"is_pvip":false,"replies":[{"id":"59960","content":"pdf è½¬ word çš„ç¡®æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œæ²¡æœ‰è®¨è®ºã€‚","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1574829318,"ip_address":"","comment_id":155929,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574779844","product_id":100025201,"comment_content":"æœ€è¿‘ä¹°äº†æ‰“å°æœºï¼Œpdf  æ‰“å‡ºæ¥æ¨¡ç³Šï¼Œwps pdf è½¬word æƒ³çš„æŒºå¥½ï¼Œå®æ–½èµ·æ¥å„ç§å‘ã€‚<br>æ€æ¥æƒ³å»ï¼Œè¿˜æ˜¯github ä¸Šæ‰¾æ‰¾pdf è½¬htmlçš„ä»£ç ï¼Œæ¯•ç«Ÿai å¾ˆæˆç†Ÿäº†ã€‚<br>ç„¶åhtml æ‰“å°ã€‚<br>æ¯•ç«Ÿå¯¹å¼€å‘æ¥è¯´ï¼Œè°ƒhtmlæ ·å¼ æ¯”ç¼–å†™word å®¹æ˜“å¤ªå¤šã€‚","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475929,"discussion_content":"pdf è½¬ word çš„ç¡®æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œæ²¡æœ‰è®¨è®ºã€‚","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574829318,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155726,"user_name":"è½çŸ³","can_delete":false,"product_type":"c1","uid":1184061,"ip_address":"","ucode":"11F60E700E96B6","user_header":"https://static001.geekbang.org/account/avatar/00/12/11/3d/7b9161ca.jpg","comment_is_top":false,"comment_ctime":1574745172,"is_pvip":false,"replies":[{"id":"59779","content":"ä»”ç»†æƒ³æƒ³ï¼Œæ˜¯å¦å¯ä»¥è§£å†³é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","uid":"1228022","ctime":1574747491,"ip_address":"","comment_id":155726,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1574745172","product_id":100025201,"comment_content":"func Save(dest interface{}, format string, func () interface{} docmentLoader) error<br><br>ç”±è°ƒç”¨æ–¹å†³å®š document çš„ç±»å‹ã€‚<br>1. å°†documentä¹Ÿè°ƒæ•´ä¸ºçˆ¶å­ç±»çš„å½¢å¼ã€‚ä½†éšçº¦æ„Ÿè§‰åˆ°è€å¸ˆå¥½åƒä¸å¤ªèµåŒç»§æ‰¿ï¼Ÿ<br>2. æˆ–è€…åœ¨è°ƒç”¨æ—¶å¼ºè½¬ä¸º SaveWord æˆ– SavePDF ä¸­çš„ IoDocument å’Œ ViewDocument ","like_count":0,"discussions":[{"author":{"id":1228022,"avatar":"https://static001.geekbang.org/account/avatar/00/12/bc/f6/e61d4b8f.jpg","nickname":"è®¸å¼ä¼Ÿ-ä¸ƒç‰›äº‘(å·²æ»¡)","note":"","ucode":"1A2F8AA6F6DB54","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":475849,"discussion_content":"ä»”ç»†æƒ³æƒ³ï¼Œæ˜¯å¦å¯ä»¥è§£å†³é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574747491,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":155653,"user_name":"Aaron Cheung","can_delete":false,"product_type":"c1","uid":1079816,"ip_address":"","ucode":"03972759C53667","user_header":"https://static001.geekbang.org/account/avatar/00/10/7a/08/4d3e47dd.jpg","comment_is_top":false,"comment_ctime":1574733001,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1574733001","product_id":100025201,"comment_content":"æ¨¡å—è¾¹ç•Œ å—æ•™äº† <br><br>æœŸå¾…æ¶æ„æ€ç»´å®æˆ˜ç¯‡ğŸ‘","like_count":0},{"had_liked":false,"id":155574,"user_name":"leslie","can_delete":false,"product_type":"c1","uid":1324255,"ip_address":"","ucode":"798E7C1CC98CC2","user_header":"https://static001.geekbang.org/account/avatar/00/14/34/df/64e3d533.jpg","comment_is_top":false,"comment_ctime":1574702386,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1574702386","product_id":100025201,"comment_content":"     æœŸå¾…è€å¸ˆçš„ã€Šæ¶æ„æ€ç»´è®¾è®¡ã€‹ï¼šå¸Œæœ›è€å¸ˆå¯ä»¥åœ¨é˜³å†å¹´ä¹‹å‰åˆ†äº«å‡ºæ¥ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„ç”¨åœ¨è‡ªå·±çš„å°†æ¥æ–°é¡¹ç›®ä¸Šã€‚<br>    ä¸€è·¯è·Ÿç€è€å¸ˆå­¦ä¹ è¿˜æ˜¯è§‰å¾—å—ç›ŠåŒªæµ…ï¼Œè®¸å¤šæ€è·¯æ¢³ç†æ¸…æ¥šäº†ã€‚çœ‹åˆ°å¾ˆå¤šæ‰©å±•æ€§çš„å‘ã€è¾¹ç•Œæœ‰æ—¶éœ€è¦è‡ªå·±ä¸æ–­çš„è°ƒæ•´åˆ°æ›´é«˜çš„é«˜åº¦ï¼Œå®Œæˆäº†ä¸€ä¸ªç±»ä¼¼çœ‹åˆ°äº†ã€å®¡æ¸…è¿˜è¦åšæ¸…ï¼Œä¾‹å¦‚ï¼šæ¶æ„çš„åˆ†çº§ä¹±ã€æ¥å£ä¹±ã€ä»£ç çš„æ•ˆç‡&#47;è§„èŒƒåŒ–ä¹±ã€æ‰§è¡Œä¹±ã€‚<br>      æ•´ä½“æ¶æ„çš„æ€ç»´è®¾è®¡ç¡®å®å¯ä»¥æ¢³ç†å‡ºè®¸å¤šï¼šè€å¸ˆè®²ã€Šä¸­é—´ä»¶å­˜å‚¨ã€‹æ—¶ï¼Œæ ¹æ®è€å¸ˆçš„å†…å®¹æ¢³ç†æ¸…æ¥šäº†æ•°æ®ç³»ç»Ÿè¿™å—ï¼Œæ€»ä½“çš„æ¶æ„æ€ç»´è¿˜æ˜¯æœŸå¾…è€å¸ˆçš„åŠ è¯¾èƒ½å¤Ÿæä¾›ä¸ä¸€æ ·çš„æ€ç»´æ–¹å¼å§ï¼Œè¿™æ ·è‡ªå·±å¯ä»¥åšçš„æ›´å¥½ã€‚æœŸå¾…è€å¸ˆçš„ã€Šæ¶æ„æ€ç»´è®¾è®¡ã€‹ï¼Œè°¢è°¢è€å¸ˆçš„åˆ†äº«ã€‚","like_count":1,"discussions":[{"author":{"id":1188023,"avatar":"https://static001.geekbang.org/account/avatar/00/12/20/b7/bdb3bcf0.jpg","nickname":"Eternal","note":"","ucode":"EA6FE7CC98F740","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":157864,"discussion_content":"åœ¨å¦å¤–ä¸€ä¸ªè¯¾ç¨‹çœ‹åˆ°ä½ \n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1580527730,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]}]}