{"id":420765,"title":"开篇词｜如何设计一个高并发、高可用的秒杀系统？","content":"<p>你好，我是志东，欢迎和我一起从零打造秒杀系统。</p><p>说起秒杀系统啊，我相信你一定听过，甚至亲身参与过秒杀活动。作为技术人，你应该也好奇和思考过秒杀系统背后的实现方案，或者你在面试的时候被问到过，毕竟说它是高频考点一点不夸张。</p><p>因此，可能你已经搜索过秒杀系统的实现，对其有了一定的了解。但我们常说理论和实践是有距离的，知道一些基本的设计理念，其实远不能完成体系化学习的目标。“纸上得来终觉浅，绝知此事要躬行”，我相信头部电商百万用户同时秒杀的实战经验，会是个不错的加持，可以帮助你深刻理解技术难点。</p><p>所以，我来了！作为曾经的头部电商平台的秒杀系统负责人，我经常会和同事、朋友们讨论秒杀系统，当然在设计过程中，我们也确实遇到了很多问题。那么作为整个专栏的开篇，我想先就学习秒杀系统的<strong>共性问题</strong>做一个解答，期望和你对齐目标，然后我们一起向终点发起挑战！欢迎加入思考。</p><h2>三个问题</h2><p><strong>问题一：为什么需要秒杀系统？秒杀系统最大的优势是什么？</strong></p><p>通俗点讲，电商平台的本质是在线上撮合买卖双方的购销需求，达成交易。虽然是线上交易，但也遵守朴素的经济学原理，供求关系决定了商品的经济活动。当<strong>供求平衡</strong>时，买方和卖方处于对等关系，双方是相对稳定、和谐的；当<strong>供大于求</strong>时，这时候市场成了买方市场，买方处于主动地位；当<strong>供不应求</strong>时，这时候市场是卖方市场，卖方处于有利的主导地位。</p><!-- [[[read_end]]] --><p>买卖双方的关系不同，决定了电商平台会采用哪种营销方式。当供大于求，一般会采用各种促销让利的方式，吸引消费者购买，常见的促销方式有单品满减、总价优惠、赠品、会员优惠等；当供不应求，就需要有计划地设置营销活动、用户参与门槛以及限购规则，尽可能的让商家利益最大化，同时惠及更广泛的消费者。</p><p><img src=\"https://static001.geekbang.org/resource/image/dc/79/dcbf846eb29232268a3ae01a8776b479.png?wh=1346x686\" alt=\"\"></p><p>当供需出现极度不平衡时，不管是线下还是线上，都会出现抢购的情况。上面这张照片，是1992年深圳市首次发行股票时群众抢购的情况，“利”字驱动，抢到即是赚到，万人空巷。同样，在线上，当1499元平价茅台上架时，当抢到口罩意味着守护更多一份健康时，流量激增，更是盛况空前。因此，回答为什么需要秒杀系统，其实很简单，那就是<strong>商品的极度供不应求</strong>。</p><p>那么秒杀系统又有哪些优势呢？对于这些极度供不应求的爆品，合理地设置活动，适时地释放库存，可以持续为电商平台带来稳定的热度和流量，可观的VIP会员费，以及技术口碑的认同。当然，通过秒杀系统，电商平台也可以对参与用户进行筛选，杜绝黄牛和刷子，让爆品惠及更广，更公平。</p><p><strong>问题二：京东、阿里巴巴等头部电商平台都把建设秒杀系统放在了什么地位？</strong></p><p>在头部电商平台，除了售卖我们前面讨论的爆品外，更多售卖的是普通商品，这两类商品特点鲜明，爆品具有流量激增的特点，而普通商品流量则比较均衡。</p><p>这里我想请你思考一下：如果这两类商品不加区别，直接在电商平台上一块进行交易，会有什么问题？</p><p>没错，灾难性的后果，容易引发平台P0级重大事故。究其原因，主要就在于秒杀流量是突发式的，而且流量规模很难提前准确预估，如果混合在一起，势必会对普通商品的交易造成比较大的冲击。</p><p>因此，对京东、阿里而言，即使需要投入新的资源，也是需要单独搭建一套秒杀系统的，它将作为<strong>交易体系非常重要的一个核心系统</strong>。</p><p>可见，秒杀在京东、阿里具有非常重要的地位，它是非常重要的营销手段之一。每年的618和双11两次大促，京东都会投入大量的人力资源和机器资源来进行备战，在备战过程中，都会将其作为一个独立专项进行推进，从专项架构梳理、流量预估、全链路压测，到专项预案演练等，再到集团技术VP的专项汇报，都体现了秒杀在大厂中不可或缺的地位。</p><p>而在平常，由于爆品运营的日常化，秒杀系统每天都在承担着重要的使命，同理对技术团队来说，每天都需要像大促那样做好秒杀的稳定保障工作。</p><p><strong>问题三：秒杀系统对于电商技术从业者意味着什么？为什么要学习秒杀系统？</strong></p><p>秒杀系统是电商技术从业者绕不开的一个话题，大到京东、阿里这样的头部电商，小到新兴的社区团购公司，都需要通过秒杀促销活动进行拉新留存，或持续引流保持热度。因此对于从事电商行业的同学来说，设计和开发秒杀系统就是一门必修课。</p><p>退一步说，即便是电商领域范围广、内容多、分工细，当前你的工作范围并不涉及秒杀系统，你也可以花些时间来系统学习一下。</p><p>一方面，这门课程里介绍的一些高可用、高性能、高并发的设计思路遵循普适的原则，在设计其他电商系统时你可以举一反三；另一方面，据我了解，大部分的电商面试场景都会考核秒杀系统的设计能力，而从我自身这么多年作为面试官的经验来看，很多候选人或多或少能描述出一些秒杀的设计思路，比如有些同学知道怎么进行库存控制，有些知道隔离，有些知道限流等等，但是能够系统地讲出怎么设计一个秒杀系统，这样的候选人少之又少。</p><p>讨论完这几个问题，你是不是已经开始好奇这门秒杀课会有什么不一样的地方？毕竟电商发展到今天，秒杀系统已经不是个新鲜的话题了。那么闲话少叙，我们一起看看课程设计。</p><h2>课程设计</h2><p>首先，我们说说课程亮点。为了让你对秒杀系统有一个全面的认知，这门课程我会手把手带你搭建一个秒杀系统，从基础的设计原则讲起，到高阶的设计技巧实战都会涉及，你看到的、学到的将是<strong>一个可扛百万流量的秒杀实战项目</strong>。</p><p>这里我十分鼓励你跟着课程一步步验证，就像我开始说的，没有什么是比你亲手实践一遍收获更大的。这里附上GitHub地址：<a href=\"https://github.com/sanyecao-seckill\">https://github.com/sanyecao-seckill</a>，以及所使用的编程语言：Nignx服务有Lua语言，后端服务都是Java。</p><p>所以说，这门课的受众目标也会较为广泛，它既适用于没有太多经验的初级工程师学习和参考，也可以让相对经验丰富的高级电商从业者查漏补缺，完善学习体系。</p><p>接下来，我们看看具体内容，共分为六个部分。</p><p><strong>前期准备：</strong>这部分我会从秒杀的业务挑战开始讲起，带你看看电商平台的秒杀玩法，总结设计原则；接着我会带着你做秒杀的技术选型，安装基础环境。</p><p><strong>系统动工：</strong>这部分的内容比较基础，我会对秒杀系统进行业务解构，开始着手搭建秒杀的项目工程，梳理秒杀的业务流程，分析系统提供的接口，填充秒杀的业务实现，最终完成一个最简秒杀系统。</p><p><strong>稳定压倒一切：</strong>这部分聚焦在“稳”上，在最简秒杀系统的基础上，我将带着你进行高可用建设，重点讲解秒杀的隔离、流控、削峰、限流、降级、热点和容灾。</p><p><strong>准确无误：</strong>这部分聚焦在“准”上，我们将通过防刷和风控，学习如何保证商品不卖给黄牛和刷子，以确保秒杀的公平性；接着会介绍秒杀的库存和限购设计，以确保商品不超卖，符合限购规则。</p><p><strong>雷令风行：</strong>这部分聚焦在“快”上，我将带着你一起进行系统优化，从而让我们的秒杀系统响应更快，用户体验更好。</p><p><strong>尾声：</strong>最后就是总结部分，梳理整个实战项目的关键点；另外我将结合自身经验，带给你在头部电商的秒杀玩法中，除了上述技术内容外的业务协同思考。</p><p><img src=\"https://static001.geekbang.org/resource/image/85/f1/85eee31f737518f3d26f82ed705399f1.jpg?wh=1896x814\" alt=\"\"></p><p>值得一提的是，每节课我都会布置一道思考题，你要做好准备哦，我们可以一起互动解决。</p><h2>自我介绍</h2><p>那么分享到这里，你可能还不认识我，这里做个自我介绍。</p><p>我叫佘志东，本科和硕士均毕业于华中科技大学。参加工作后，到目前为止，我的职业生涯可以分为两个阶段。第一个阶段是通讯行业，主要服务于朗讯、思科、华为等头部通讯公司，从Java工程师成长为软件架构师，是早期思科视频云平台的设计者和核心开发者。</p><p>从2015年开始，我进入了互联网行业，先后服务过唯品会、京东等知名互联网公司，任职资深架构师，擅长高并发分布式软件架构与开发，也是京东交易平台上海团队负责人，曾负责过京豆、预售、秒杀等核心系统。</p><p>每年的618和双11，京东大促看交易，交易大促看预售开门红，历经了三年内预售流量和订单增长十几倍的系统稳定性的巨大挑战。2020年初，在疫情背景下，我带领团队日夜奋战，为全民抢购口罩项目保驾护航，所负责的秒杀系统成功扛住了三百万人同时秒杀的巨大压力。</p><p>作为一个常年奋战在一线的架构师，我为我参与过的项目感到自豪，也希望能在这里将这份收获与沉淀传递给你！</p><p>随着技术变革，秒杀系统、电商行业乃至整个互联网还会迎来诸多挑战，时代会对技术人提出更高的要求。所以，在当下，我们更应该时刻保持好奇心，保持求知欲，保持激情。“学海无涯苦作舟”，让我们一起苦中作乐，通过学习持续武装自己！</p><p>最后，希望这门课能让你在动手实践中，对秒杀系统有一个新的感悟。更多疑惑与思考，或是在实践中遇到了哪些困难，都欢迎你在留言区中提出，我们共同探讨。</p>","neighbors":{"left":[],"right":{"article_title":"01｜直面痛点：秒杀系统的挑战和设计原则","id":420777}},"comments":[{"had_liked":false,"id":316120,"user_name":"呆萌白的大白。","can_delete":false,"product_type":"c1","uid":1284870,"ip_address":"","ucode":"A0DA4F8B5C892D","user_header":"https://static001.geekbang.org/account/avatar/00/13/9b/06/a1b0bd54.jpg","comment_is_top":false,"comment_ctime":1634170612,"is_pvip":false,"replies":[{"id":"114627","content":"你这里说的redisson是redis官方推荐的Java客户端，封装了redis的分布式锁功能，总的来说，就是简单的用lua脚本整合基本的set命令实现锁的功能，其实其他的语言也可以类似实现。","user_name":"作者回复","comment_id":316120,"uid":"1222758","ip_address":"","utype":1,"ctime":1634393892,"user_name_real":"Zhidong"}],"discussion_count":2,"race_medal":0,"score":"18814039796","product_id":100091501,"comment_content":"秒杀最重要的就是把流量挡在数据库之前。只让真实生效的数据写入mysql。挡流量最重要的两步，第一步是限制每个用户单位时间内的请求访问。第二步让所有用户请求依次排队进行。关键就是第二步需要用到高性能低延迟分布式锁，java恰好有开源的Redisson解决了秒杀中60%的问题。这个库火到什么程度star和fork比mariadb都多，虽然这个比较不恰当但也侧面反映了该库牛逼的地方。但很多语言没有这个库python go都没有，也没有成熟稳定可替代的。这就是为什么很多人问该项目的主编程语言。希望作者大大能有一个更通用的分布式锁解决方案。可以不看语言，不看库。","like_count":4,"discussions":[{"author":{"id":1222758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a8/66/02ab2ce7.jpg","nickname":"Zhidong","note":"","ucode":"AEBBCE20C242C3","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528275,"discussion_content":"你这里说的redisson是redis官方推荐的Java客户端，封装了redis的分布式锁功能，总的来说，就是简单的用lua脚本整合基本的set命令实现锁的功能，其实其他的语言也可以类似实现。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634393892,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1284870,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9b/06/a1b0bd54.jpg","nickname":"呆萌白的大白。","note":"","ucode":"A0DA4F8B5C892D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":404832,"discussion_content":"确实可以实现。因为逻辑通用的。但是实现起来工作量还是很大的。这就是为什么大家会去用框架，这也是为什么我想知道在多机分布式环境下，老师的课程有没有跟语言无关更通用的高性能分布式锁解决方案？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1634433279,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313363,"user_name":"菜心1986","can_delete":false,"product_type":"c1","uid":1716058,"ip_address":"","ucode":"E46C26FCBD1741","user_header":"https://static001.geekbang.org/account/avatar/00/1a/2f/5a/4ed3465d.jpg","comment_is_top":false,"comment_ctime":1632390833,"is_pvip":false,"replies":[{"id":"113793","content":"是的。区别在于时间单位，咋们这个专栏提到的百万是指秒级，而其他书里提到的亿级流量一般是1天内的pv","user_name":"作者回复","comment_id":313363,"uid":"1222758","ip_address":"","utype":1,"ctime":1632894086,"user_name_real":"Zhidong"}],"discussion_count":1,"race_medal":0,"score":"18812260017","product_id":100091501,"comment_content":"请问，这里的百万并发是打到服务端的有效信息么？<br>这里的百万和通常说的几亿流量是怎么区别的啊。","like_count":5,"discussions":[{"author":{"id":1222758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a8/66/02ab2ce7.jpg","nickname":"Zhidong","note":"","ucode":"AEBBCE20C242C3","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527327,"discussion_content":"是的。区别在于时间单位，咋们这个专栏提到的百万是指秒级，而其他书里提到的亿级流量一般是1天内的pv","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632894086,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313657,"user_name":"学会用实力去谈条件","can_delete":false,"product_type":"c1","uid":1743123,"ip_address":"","ucode":"4D4994BE3919CC","user_header":"https://static001.geekbang.org/account/avatar/00/1a/99/13/2b325b02.jpg","comment_is_top":false,"comment_ctime":1632583037,"is_pvip":false,"replies":[{"id":"113847","content":"一般会从事故的影响大小去定级。几个维度：资金损失，订单损失，客诉量。至于具体是多少阈值，要结合自身业务看了。","user_name":"作者回复","comment_id":313657,"uid":"1222758","ip_address":"","utype":1,"ctime":1632981176,"user_name_real":"Zhidong"}],"discussion_count":2,"race_medal":0,"score":"14517484925","product_id":100091501,"comment_content":"可以简单分享下：线上业务故障&#47;事故的级别定义吗","like_count":4,"discussions":[{"author":{"id":1222758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a8/66/02ab2ce7.jpg","nickname":"Zhidong","note":"","ucode":"AEBBCE20C242C3","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527429,"discussion_content":"一般会从事故的影响大小去定级。几个维度：资金损失，订单损失，客诉量。至于具体是多少阈值，要结合自身业务看了。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632981176,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1285055,"avatar":"https://static001.geekbang.org/account/avatar/00/13/9b/bf/a76eadff.jpg","nickname":"小嘟嘟","note":"","ucode":"1584DD1402502D","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":400031,"discussion_content":"1.  故障时长\n2.  影响范围\n       a。影响多少客户，其中包括多少vip客户\n       b。损失多少资金\n       c。舆论","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1633145844,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313345,"user_name":"离境”","can_delete":false,"product_type":"c1","uid":1895314,"ip_address":"","ucode":"7186EF2BEF8956","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/STqKg1kLgvRuduQfo0R2E2osYBian7XrQAjSWmOwL9nyZVhq7vyLPnlGcgvguFV4aV7ToWLFiauEMKy96KWHKBVg/132","comment_is_top":false,"comment_ctime":1632384107,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14517285995","product_id":100091501,"comment_content":"极客时间请的京东的老师都很接地气，源码什么的也不含糊","like_count":3},{"had_liked":false,"id":313242,"user_name":"阿福","can_delete":false,"product_type":"c1","uid":1321495,"ip_address":"","ucode":"0593CFB666B513","user_header":"https://static001.geekbang.org/account/avatar/00/14/2a/17/74f2c47e.jpg","comment_is_top":false,"comment_ctime":1632322878,"is_pvip":false,"replies":[{"id":"113487","content":"Nignx服务有Lua语言，后端服务都是Java。","user_name":"编辑回复","comment_id":313242,"uid":"1356014","ip_address":"","utype":2,"ctime":1632376963,"user_name_real":"王冬青"}],"discussion_count":1,"race_medal":0,"score":"14517224766","product_id":100091501,"comment_content":"项目是用什么语言，Java吗？","like_count":3,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"冬青","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527290,"discussion_content":"Nignx服务有Lua语言，后端服务都是Java。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632376963,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":336123,"user_name":"YX","can_delete":false,"product_type":"c1","uid":2636178,"ip_address":"","ucode":"CC108CCE845EAE","user_header":"https://static001.geekbang.org/account/avatar/00/28/39/92/88ed94f2.jpg","comment_is_top":false,"comment_ctime":1645943123,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"10235877715","product_id":100091501,"comment_content":"**1）为什么需要秒杀系统？秒杀系统最大的优势是什么？**<br><br>- 去库存，吸引消费者消费<br><br>**2）京东、阿里巴巴等头部电商平台都把建设秒杀系统放在了什么地位？**<br><br>- 交易体系非常重要的一个核心系统。<br>- 秒杀在京东、阿里具有非常重要的地位，它是非常重要的营销手段之一<br><br>**3）秒杀系统对于电商技术从业者意味着什么？为什么要学习秒杀系统？**<br><br>- 对于从事电商行业的同学来说，设计和开发秒杀系统就是一门必修课。<br>- 高可用、高性能、高并发的设计思路遵循普适的原则，在设计其他电商系统时你可以举一反三<br>- 大部分的电商面试场景都会考核秒杀系统的设计能力<br>- 能够系统地讲出怎么设计一个秒杀系统，这样的候选人少之又少<br><br>**4）本门课是怎么设计安排的？**<br><br>- 目标：对秒杀系统有一个全面的认知<br>- 过程：手把手带你搭建一个秒杀系统，从基础的设计原则讲起，到高阶的设计技巧实战<br>- 结果：一个可扛百万流量的秒杀实战项目<br><br>**5）学习本门课的关键点是什么？**<br><br>- 记住一句话：没有什么是比你亲手实践一遍收获更大的<br><br>**6）项目的github地址？**<br><br>- https:&#47;&#47;github.com&#47;sanyecao-seckill<br>- Nignx 服务有 Lua 语言，后端服务都是 Java。<br><br>**7）本门课面向的对象？**<br><br>- 没有太多经验的初级工程师学习和参考<br>- 相对经验丰富的高级电商从业者查漏补缺，完善学习体系。<br><br>**8）课程大纲是什么？**<br><br>- 前期准备：从秒杀的业务挑战开始讲起，带你看看电商平台的秒杀玩法，总结设计原则，做秒杀的技术选型，安装基础环境。<br>- 系统动工：对秒杀系统进行业务解构，开始着手搭建秒杀的项目工程，梳理秒杀的业务流程，分析系统提供的接口，充秒杀的业务实现，最终完成一个最简秒杀系统。<br>- 稳定压倒一切：这部分聚焦在“稳”上，在最简秒杀系统的基础上，我将带着你进行高可用建设，重点讲解秒杀的隔离、流控、削峰、限流、降级、热点和容灾。<br>- 准确无误：这部分聚焦在“准”上，我们将通过防刷和风控，学习如何保证商品不卖给黄牛和刷子，以确保秒杀的公平性；接着会介绍秒杀的库存和限购设计，以确保商品不超卖，符合限购规则。<br>- 雷令风行：这部分聚焦在“快”上，我将带着你一起进行系统优化，从而让我们的秒杀系统响应更快，用户体验更好。<br>- 尾声：最后就是总结部分，梳理整个实战项目的关键点；另外我将结合自身经验，带给你在头部电商的秒杀玩法中，除了上述技术内容外的业务协同思考。","like_count":3},{"had_liked":false,"id":317072,"user_name":"李威","can_delete":false,"product_type":"c1","uid":1460961,"ip_address":"","ucode":"3409A9390BD1FD","user_header":"https://static001.geekbang.org/account/avatar/00/16/4a/e1/2a498473.jpg","comment_is_top":false,"comment_ctime":1634657896,"is_pvip":false,"replies":[{"id":"116194","content":"秒杀涉及整个交易链路很多的系统，比如商详页，结算页，商品，订单，支付，促销等环节。各个系统根据秒杀场景视情况独立隔离部署，而秒杀系统一般负责隔离秒杀结算页，结算页如本专栏介绍分网关层和业务层，为支持百万秒级并发，网关层一般需要几十台物理机或高规格容器（32C），而业务层也需要不少容器来支持。综合整个链路的系统，大概几万C的计算资源是少不了的。","user_name":"作者回复","comment_id":317072,"uid":"1222758","ip_address":"","utype":1,"ctime":1636355477,"user_name_real":"Zhidong"}],"discussion_count":1,"race_medal":0,"score":"5929625192","product_id":100091501,"comment_content":"老师在文中提到的三百万并发，请问是用了多少台机器做到的呢，以及机器的配置是如何的，感谢。","like_count":2,"discussions":[{"author":{"id":1222758,"avatar":"https://static001.geekbang.org/account/avatar/00/12/a8/66/02ab2ce7.jpg","nickname":"Zhidong","note":"","ucode":"AEBBCE20C242C3","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":528639,"discussion_content":"秒杀涉及整个交易链路很多的系统，比如商详页，结算页，商品，订单，支付，促销等环节。各个系统根据秒杀场景视情况独立隔离部署，而秒杀系统一般负责隔离秒杀结算页，结算页如本专栏介绍分网关层和业务层，为支持百万秒级并发，网关层一般需要几十台物理机或高规格容器（32C），而业务层也需要不少容器来支持。综合整个链路的系统，大概几万C的计算资源是少不了的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636355477,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313230,"user_name":"_xcc","can_delete":false,"product_type":"c1","uid":1298398,"ip_address":"","ucode":"8EB4B735D36E81","user_header":"https://static001.geekbang.org/account/avatar/00/13/cf/de/85555a93.jpg","comment_is_top":false,"comment_ctime":1632318700,"is_pvip":false,"replies":[{"id":"113492","content":"安排！","user_name":"编辑回复","comment_id":313230,"uid":"1356014","ip_address":"","utype":2,"ctime":1632377339,"user_name_real":"王冬青"}],"discussion_count":1,"race_medal":0,"score":"5927285996","product_id":100091501,"comment_content":"还想问有没有代码仓库，看到Github地址就满足了","like_count":1,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"冬青","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527287,"discussion_content":"安排！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632377339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313229,"user_name":"张申傲","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1632318149,"is_pvip":true,"replies":[{"id":"113491","content":"期待同行！","user_name":"编辑回复","comment_id":313229,"uid":"1356014","ip_address":"","utype":2,"ctime":1632377307,"user_name_real":"王冬青"}],"discussion_count":1,"race_medal":0,"score":"5927285445","product_id":100091501,"comment_content":"道阻且长，行则将至。打卡","like_count":1,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"冬青","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527286,"discussion_content":"期待同行！","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632377307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313221,"user_name":"sky","can_delete":false,"product_type":"c1","uid":1082187,"ip_address":"","ucode":"FC323371453C97","user_header":"https://static001.geekbang.org/account/avatar/00/10/83/4b/0e96fcae.jpg","comment_is_top":false,"comment_ctime":1632315627,"is_pvip":false,"replies":[{"id":"113488","content":"抱歉，不是。Nignx服务有Lua语言，后端服务都是Java。","user_name":"编辑回复","comment_id":313221,"uid":"1356014","ip_address":"","utype":2,"ctime":1632377016,"user_name_real":"王冬青"}],"discussion_count":1,"race_medal":0,"score":"5927282923","product_id":100091501,"comment_content":"虽然语言只是一个工具，但还是想问下作者是用GO来实现嘛  是的话就下单了啊","like_count":1,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"冬青","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527282,"discussion_content":"抱歉，不是。Nignx服务有Lua语言，后端服务都是Java。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632377016,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":348352,"user_name":"张申傲","can_delete":false,"product_type":"c1","uid":1182372,"ip_address":"","ucode":"22D46BC529BA8A","user_header":"https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg","comment_is_top":false,"comment_ctime":1655014639,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655014639","product_id":100091501,"comment_content":"向老师学习，技术人需要持续精进","like_count":0},{"had_liked":false,"id":335930,"user_name":"saltedfish","can_delete":false,"product_type":"c1","uid":1946257,"ip_address":"","ucode":"936571E1AC4139","user_header":"https://static001.geekbang.org/account/avatar/00/1d/b2/91/cf0de36e.jpg","comment_is_top":false,"comment_ctime":1645775040,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1645775040","product_id":100091501,"comment_content":"虽然老师是用 Java 实现的，但是我还是想用我们这边的主力语言 Go 实现一下。学海无涯苦作舟！","like_count":0},{"had_liked":false,"id":324902,"user_name":"Chandler","can_delete":false,"product_type":"c1","uid":1440896,"ip_address":"","ucode":"A6D97CFF01FF70","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/80/4d1369bc.jpg","comment_is_top":false,"comment_ctime":1638710193,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1638710193","product_id":100091501,"comment_content":"建表语句和初始化数据有吗？","like_count":0},{"had_liked":false,"id":315845,"user_name":"Zz","can_delete":false,"product_type":"c1","uid":2804855,"ip_address":"","ucode":"8ADBEC2D70DEC2","user_header":"https://static001.geekbang.org/account/avatar/00/2a/cc/77/8622a8e5.jpg","comment_is_top":false,"comment_ctime":1634020733,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1634020733","product_id":100091501,"comment_content":"秒杀系统是写了自己可以学会秒杀？还是搭建给别人秒杀的平台？","like_count":0},{"had_liked":false,"id":314732,"user_name":"ruishe","can_delete":false,"product_type":"c1","uid":1110328,"ip_address":"","ucode":"B1026A37BBEC3D","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIRgxHpXzJarWkDCV2SyWI3eBNZw9ARxYZusohYH9V1sjzTicMTwTuf8nHee7x58fHu3w78DmEUzYg/132","comment_is_top":false,"comment_ctime":1633361251,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1633361251","product_id":100091501,"comment_content":"没想到在极客看到多年的师兄开课了。_佘锐","like_count":0},{"had_liked":false,"id":314017,"user_name":"没理想的人不伤心","can_delete":false,"product_type":"c1","uid":2070221,"ip_address":"","ucode":"AF4A814DB44922","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/8NJXCibjiaDoMGwndhnKtxR4feTJbcUxPw0GIsgTXVz2bFkS5ibetwT1qGD5v77INW1ByuzGZVNSWbb7waVaWz1Yg/132","comment_is_top":false,"comment_ctime":1632802236,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632802236","product_id":100091501,"comment_content":"冲冲冲","like_count":0},{"had_liked":false,"id":313954,"user_name":"nana👄","can_delete":false,"product_type":"c1","uid":2448469,"ip_address":"","ucode":"A9A35BAED23215","user_header":"https://static001.geekbang.org/account/avatar/00/25/5c/55/d113d3ea.jpg","comment_is_top":false,"comment_ctime":1632753958,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1632753958","product_id":100091501,"comment_content":"一起加油，","like_count":0},{"had_liked":false,"id":313878,"user_name":"Geek_d0863b","can_delete":false,"product_type":"c1","uid":2617677,"ip_address":"","ucode":"731BA25FE930A6","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/g4wzd5sQZzAZBtPqzOhiaX343Bz9Ga2TXr1ibS3mGNCG0uiaNeQho3eKDTqR5YoFib5tt8zjSHibic4TWHgxehZxNuwg/132","comment_is_top":false,"comment_ctime":1632727451,"is_pvip":false,"replies":[{"id":"113636","content":"课程介绍页有链接哈","user_name":"编辑回复","comment_id":313878,"uid":"1356014","ip_address":"","utype":2,"ctime":1632739630,"user_name_real":"王冬青"}],"discussion_count":2,"race_medal":0,"score":"1632727451","product_id":100091501,"comment_content":"怎么进群啊","like_count":0,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"冬青","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527504,"discussion_content":"课程介绍页有链接哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632739630,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1763933,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/ea/5d/ccb4c205.jpg","nickname":"绘世浮夸 つ","note":"","ucode":"6A3960195753BA","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":555311,"discussion_content":"课程介绍页哪里有链接进群啊\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646843552,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":313594,"user_name":"LouisYuan","can_delete":false,"product_type":"c1","uid":2536553,"ip_address":"","ucode":"8D16568EC5A7DB","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/LvrILicoibOUNTcVQFHSHtia0D8LZ8iaWMibtGYTZiaI9Xr8Oqsl2YfGmjKzKqOXy3Yb1fbkEFNe4g7CoPxvc7mZxjyw/132","comment_is_top":false,"comment_ctime":1632543954,"is_pvip":true,"replies":[{"id":"113639","content":"收到，我反馈给老师。","user_name":"编辑回复","comment_id":313594,"uid":"1356014","ip_address":"","utype":2,"ctime":1632739710,"user_name_real":"王冬青"}],"discussion_count":1,"race_medal":0,"score":"1632543954","product_id":100091501,"comment_content":"希望老师后面讲解的时候可以少一点语言相关的，让对Java不了解的也能看明白","like_count":0,"discussions":[{"author":{"id":1356014,"avatar":"https://static001.geekbang.org/account/avatar/00/14/b0/ee/d0871efd.jpg","nickname":"冬青","note":"","ucode":"14576781B499FB","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":527405,"discussion_content":"收到，我反馈给老师。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1632739710,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]}]}