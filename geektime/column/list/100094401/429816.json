{"id":429816,"title":"04 | 升级：Vue 2项目如何升级到Vue 3？","content":"<p>你好，我是大圣，欢迎进入课程导读篇的第四讲。</p><p>在上一讲，我带你了解了Vue 3 的新特性。对于Vue 3 相比于 Vue 2 有哪些优势这个问题，相信你已经了解得很清楚了。那么在这一讲，我来教你如何把Vue 2 的项目升级到Vue 3。</p><p>把Vue 2 的项目升级到Vue 3，也是小圣一直关心的问题，今天早晨小圣还问我，既然Vue 3 如此优秀，是不是应该赶紧把项目都升级到Vue 3？</p><p>首先不要着急，并不是所有项目都适合升级。就像苹果出了新款手机，哪怕新特性被人们说得天花乱坠，但是，是不是把老手机换掉，也需要斟酌，毕竟升级总是需要成本的。</p><h2>应不应该从Vue 2 升级到Vue 3</h2><p>应不应该升级？这个问题不能一概而论。</p><p>首先，如果你要开启一个新项目，那直接使用Vue 3 是最佳选择。后面课程里，我也会带你使用Vue 3 的新特性和新语法开发一个项目。</p><p>以前我独立使用Vue 2 开发应用的时候，不管我怎么去组织代码，我总是无法避免在data、template、methods中上下反复横跳，这种弊端在项目规模上来之后会更加明显。而且由于vue-cli是基于Webpack开发的，当项目规模上来后，每执行一下，调试环境就要1分钟时间，这也是大部分复杂项目的痛点之一。</p><!-- [[[read_end]]] --><p><strong>而 Vue 3 的Composition API带来的代码组织方式更利于封装代码，维护起来也不会上下横跳。</strong>Vite则带来了更丝滑的调试体验，一步步跟着专栏完成你的第一个 Vue 3 项目，你会感受到Vue 3 的魅力。</p><p>Vue 3 的正式版已经发布有一年了，无论是辅助工具，还是周边库都已经非常完善了，足以胜任大型的项目开发。并且，现在也有越来越多的公司正在尝试和体验Vue 3。所以新项目可以直接拥抱Vue 3 的生态，这也是现在很多团队在做的尝试。</p><p>而且对于Vue 2，官方还会再维护两年，但两年后的问题和需求，官方就不承诺修复和提供解答了，现在继续用 Vue 2 其实是有这个隐患的。</p><p><strong>Vue 3 也不是没有问题，由于新的响应式系统用了Proxy，会存在兼容性问题。</strong>也就是说，如果你的应用被要求兼容IE11，就应该选择Vue 2。而且，Vue团队也已经放弃 Vue 3 对IE11浏览器的支持。</p><p>其实，官方原来是有计划在 Vue 3 中支持IE11，但后来由于复杂度和优先级的问题，这个计划就搁置了下来。</p><p>不过，站在2021看待现在前端的世界，你能发现浏览器和JavaScript本身已经有了巨大的发展。大部分的前端项目都在直接使用现代的语言特性，而且微软本身也在抛弃IE，转而推广Edge。所以 Vue 官方在重新思考后，决定让 Vue 3 全面拥抱未来，把原来准备投入到Vue 3 上支持IE11的精力转投给Vue 2.7。</p><p>那么 Vue 2.7 会带来什么内容呢?</p><p>Vue 2.7 会移植Vue 3 的一些新特性，让你在Vue 2 的生态中，也能享受Vue 3 的部分新特性。在Vue 3 发布之前，Vue 2 项目中就可以基于@vue/composition-api插件，使用Composition API语法，Vue 2 会直接内置这个插件，在Vue 2 中默认也可以用Compositon来组合代码。</p><p>后面，我会带你学的&lt;script setup&gt;语法，也会在Vue 2中得到支持。当然，如果我们想用更精简的方式去组织代码，也是没问题的，因为Vite中也正式支持了Vue 2。</p><p>综上所述，我们用下图来回答这一讲开头的问题，要不要使用Vue 3，还是要“因地制宜”，在不同的场景下，我们选择合适的方式即可。</p><p><img src=\"https://static001.geekbang.org/resource/image/2d/1a/2d26cea2a48d9caec0yybe6862643e1a.jpg?wh=1921x1270\" alt=\"\"></p><h2>Vue 3 不兼容的那些写法</h2><p>通过前面的分析，在选择Vue 2 还是Vue 3 这个问题上，相信你现在已经有了自己的取舍。如果最后你依然决定要升级Vue 3，那我就先带你了解一下 Vue 3 不支持的那些写法、之后为你讲解它的生态现状，最后，我们再进入到实操升级的环节。</p><p>了解一下 Vue 3 不兼容的那些具体语法，除了可以帮你在升级项目后，避免写的代码无法使用，还会让你更好地适应Vue 3。详细的兼容性变更，官方有一个<a href=\"https://v3.cn.vuejs.org/guide/migration/introduction.html\">迁移指南</a>，我在这里就不一一给出了。同样，也为了避免八股文的形式，我在这里介绍几个重要的变更，后面项目中用到一些写法的时候，我再详细地告诉你。即使现在说太多细节，可能你也记不住。</p><p>这一部分内容，主要是针对有Vue 2 开发经验的，希望更快地适应Vue 3 的同学。在全面实战Vue 3 之前，你不必完整阅读官方的指南，因为Vue 3 的大部分 API 都是对 Vue 2 兼容的。</p><p>首先，我们来看一下 Vue 2 和 Vue 3 在项目在启动上的不同之处。在 Vue 2 中，我们使用new Vue()来新建应用，有一些全局的配置我们会直接挂在 Vue 上，比如我们通过Vue.use来使用插件，通过Vue.component来注册全局组件，如下面代码所示：</p><pre><code class=\"language-xml\">Vue.component('el-counter', {\n  data(){\n    return {count: 1}\n  },\n  template: '&lt;button @click=\"count++\"&gt;Clicked {{ count }} times.&lt;/button&gt;'\n})\n\nlet VueRouter = require('vue-router')\nVue.use(VueRouter)\n</code></pre><p>在上面的代码里，我们注册了一个el-counter组件，这个组件是全局可用的，它直接渲染一个按钮，并且在点击按钮的时候，按钮内的数字会累加。</p><p>然后我们需要注册路由插件，这也是Vue 2 中我们使用vue-router的方式。这种形式虽然很直接，但是由于全局的Vue只有一个，所以当我们在一个页面的多个应用中独立使用Vue就会非常困难。</p><p>看下面这段代码，我们在Vue上先注册了一个组件el-counter，然后创建了两个Vue的实例。这两个实例都自动都拥有了el-couter这个组件，但这样做很容易造成混淆。</p><pre><code class=\"language-xml\">Vue.component('el-counter',...)\n\nnew Vue({el:'#app1'})\nnew Vue({el:'#app2'})\n</code></pre><p>为了解决这个问题，Vue 3 引入一个新的API ，createApp，来解决这个问题，也就是新增了App的概念。全局的组件、插件都独立地注册在这个App内部，很好的解决了上面提到的两个实例容易造成混淆的问题。下面的代码是使用 createApp 的简单示例：</p><pre><code class=\"language-xml\">const { createApp } = Vue\nconst app = createApp({})\napp.component(...)\napp.use(...)\napp.mount('#app1')\n\nconst app2 = createApp({})\napp2.mount('#app2')\n</code></pre><p>createApp还移除了很多我们常见的写法，比如在createApp中，就不再支持filter、<span dollar=\"\">$</span>on、<span dollar=\"\">$</span>off、<span dollar=\"\">$</span>set、<span dollar=\"\">$</span>delete等API。不过这都不用担心，后面我会告诉你怎么去实现类似这些API的功能。</p><p>在 Vue 3 中，v-model 的用法也有更改。在后面讲到组件化，也就是我们需要深度使用v-model的时候，我会再细讲。 其实 Vue 3 还有很多小细节的更新，比如slot和slot-scope两者实现了合并，而directive注册指令的API等也有变化。你现在记不住这些也不要紧，我们会在后面的实战项目里逐渐掌握这些内容。</p><h2>Vue 3 生态现状介绍</h2><p>在 Vue 生态中，现在所有官方库的工具都全面支持 Vue 3 了，但仍然有一些生态库还处于候选或者刚发布的状态。<strong>所以，升级Vue 3 的过程中，除了 Vue 3 本身的语法变化，生态也要注意选择。</strong>有一些周边的生态库可能还存在不稳定的情况，开发项目的时候我们时刻关注项目的GitHub 即可。</p><p>Vue-cli4 已经提供内置选项，你当然可以选择它支持的 Vue 2。如果你对 Vite 不放心的话，Vue-cli4 也全面支持 Vue 3，这还是很贴心的。</p><p>vue-router 是复杂项目必不可少的路由库，它也包含一些写法上的变化，比如从 new Router变成 createRouter；使用方式上，也全面拥抱 Composition API 风格，提供了 useRouter 和useRoute 等方法。</p><p>Vuex 4.0 也支持 Vue 3，不过变化不大。有趣的是 Vue 官方成员还发布了一个 Pinia，Pinia 的 API 非常接近 Vuex5 的设计，并且对 Composition API 特别友好，更优雅一些。在课程后续的项目里，我们会使用更成熟的 Vuex4。</p><p>其他生态诸如 Nuxt、组件库Ant-design-vue、Element 等等，都有 Vue 3 的版本发布。我开发维护的 Element3 是一个教育项目，我们在组件化章节会详细介绍。除此之外，我们项目中也会使用 Element3 来作为组件库。并且在进阶开发篇，我们会自己设计一个类似风格的组件库。</p><h2>使用自动化升级工具进行Vue的升级</h2><p>小项目不用多说，从 Vue 2 升级到 Vue 3 之后，对于语法的改变之处，我们挨个替换写法就可以。<strong>但对于复杂项目，我们需要借助几个自动化工具来帮我们过渡。</strong></p><p>首先是在 Vue 3 的项目里，有一个 @vue/compat 的库，这是一个 Vue 3 的构建版本，提供了兼容 Vue 2 的行为。这个版本默认运行在 Vue 2 下，它的大部分 API 和 Vue 2 保持了一致。当使用那些在 Vue 3 中发生变化或者废弃的特性时，这个版本会提出警告，从而避免兼容性问题的发生，帮助你很好地迁移项目。并且通过升级的提示信息，@vue/compat还可以很好地帮助你学习版本之间的差异。</p><p>在下面的代码中，首先我们把项目依赖的 Vue 版本换成 Vue 3，并且引入了@vue/compat 。</p><pre><code class=\"language-diff\">\"dependencies\": {\n-  \"vue\": \"^2.6.12\",\n+  \"vue\": \"^3.2.19\",\n+  \"@vue/compat\": \"^3.2.19\"\n   ...\n},\n\"devDependencies\": {\n-  \"vue-template-compiler\": \"^2.6.12\"\n+  \"@vue/compiler-sfc\": \"^3.2.19\"\n}\n</code></pre><p>然后给 vue 设置别名@vue/compat，也就是以 compat 作为入口，代码如下：</p><pre><code class=\"language-diff\">// vue.config.js\nmodule.exports = {\n  chainWebpack: config =&gt; {\n    config.resolve.alias.set('vue', '@vue/compat')\n    ......\n  }\n}\n</code></pre><p>这时你就会在控制台看到很多警告，以及很多优化的建议。我们参照建议，挨个去做优化就可以了。</p><p>在 @vue/compat 提供了很多建议后，我们自己还是要慢慢做修改。但从另一个角度看，“偷懒”是优秀程序员的标志，社区就有能够做自动化替换的工具，比较好用的就是“阿里妈妈”出品的 gogocode，<a href=\"https://gogocode.io/zh/docs/specification/vue2-to-vue3\">官方文档</a>也写得很详细，就不在这里赘述了。</p><p><strong>自动化替换工具的原理很简单，和 Vue 的 Compiler 优化的原理是一样的，也就是利用编译原理做代码替换。</strong>如下图所示，我们利用 babel 分析左边 Vue 2 的源码，解析成 AST，然后根据Vue 3 的写法对 AST 进行转换，最后生成新的 Vue 3 代码。</p><p><img src=\"https://static001.geekbang.org/resource/image/e3/e0/e371fee0a7e75942151724yy58fbfee0.jpg?wh=1920x1040\" alt=\"图片\"></p><p>对于替换过程的中间编译成的 AST，你可以理解为用 JavaScript 的对象去描述这段代码，这和虚拟 DOM 的理念有一些相似，我们基于这个对象去做优化，最终映射生成新的Vue 3 代码。</p><p>关于AST的细节，在课程后面的 Vue 3 生态源码篇中，我会带你手写一个迷你版的 Vue 3 Compiler，那时你会对 AST 和它背后的编译原理有一个更深的认识。</p><h2>总结</h2><p>我们来总结一下你今天都学到了什么吧。<strong>首先，我带你明确了什么时候该升级 Vue 3，什么时候该继续使用 Vue 2的兼容版本。</strong>现在，Vue 3 的官方生态在整体都比较稳定，新的项目完全可以直接选择 Vue 3。并且，对于那些需要长期维护的项目，其实也很有必要进行升级。不过，Vue 2 很快会停止更新，如果你的项目需要兼容 IE11，那就需要继续使用 Vue 2.7。这样，在保持好项目的兼容性的前提下，还可以体验到 Composition API 带来的便利。</p><p><strong>然后，在升级Vue的过程中，我们可以利用官方和社区的工具，帮助我们高效地升级。</strong>我们可以使用compat来给出提醒，项目中设置@vue/compat作为 vue 的别名，这样内部就会把所有和 Vue 2 的语法相关的升级信息提示出来，逐个替换即可，或者直接使用 gogocode 进行自动化批量替换。</p><p>最后，我想说的是，<strong>全面拥抱 Vue 3 也算是一次离开舒适圈的挑战，这带来的不只是新框架的体验，同时也可能是更好的潜力与更好的待遇</strong>。课程导读篇也到此结束了，在课程的下一篇，我们会开始实战一个 Vue 3 的项目，与此同时，我也会手把手带你通过实战学会 Vue 3。</p><h2>思考题</h2><p>你可以分享一下，在你的项目里，有没有需要升级的地方？有的话，又在什么地方呢？</p><p>欢迎你在留言区跟我交流讨论，也推荐你把这一讲推荐给你自己的朋友、同事。我们下一讲见！</p>","comments":[{"had_liked":false,"id":318028,"user_name":"cwang","can_delete":false,"product_type":"c1","uid":1465246,"ip_address":"","ucode":"04CB9F4CA2CEAD","user_header":"https://static001.geekbang.org/account/avatar/00/16/5b/9e/a8dec12d.jpg","comment_is_top":false,"comment_ctime":1635126741,"is_pvip":false,"replies":[{"id":"116557","content":"这种场景非常少，不过我遇见过，就是有的后台管理系统是jquery的，有的模块后来的前端就像用vue开发，就会有一些部分模块使用的vue，多个模块之间就会用不同的vue实例","user_name":"作者回复","comment_id":318028,"uid":"1003715","ip_address":"","utype":1,"ctime":1636639049,"user_name_real":"花果山大圣"}],"discussion_count":5,"race_medal":0,"score":"104714341845","product_id":100094401,"comment_content":"谢谢大圣老师的讲解，我还有一个小的疑惑，我们通常创建Vue应用，一个实例（new Vue({})）就能满足我们的使用场景了，而且也认为应该只存在一个。但是在课程里老师说（Vue2和Vue3启动不同）：有一个页面的多个应用的情况。所以想了解下，什么情况下会遇到这种场景呢？这个问题不是这节课的主题，但是还是很好奇，谢谢大圣老师解惑。","like_count":25,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529071,"discussion_content":"这种场景非常少，不过我遇见过，就是有的后台管理系统是jquery的，有的模块后来的前端就像用vue开发，就会有一些部分模块使用的vue，多个模块之间就会用不同的vue实例","likes_number":4,"is_delete":false,"is_hidden":false,"ctime":1636639049,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2028948,"avatar":"","nickname":"Geek2808","note":"","ucode":"835C9691723163","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407865,"discussion_content":"这种组织方式是存在的，其实在早在angular里面就有module的概念，一个module内包含组件 api store utils等，我觉得这个是为复杂项目提供组织方式，更清晰","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1635139168,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1465246,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5b/9e/a8dec12d.jpg","nickname":"cwang","note":"","ucode":"04CB9F4CA2CEAD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":2028948,"avatar":"","nickname":"Geek2808","note":"","ucode":"835C9691723163","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407961,"discussion_content":"谢谢😁","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635158309,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":407865,"ip_address":""},"score":407961,"extra":""}]},{"author":{"id":1944792,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/lSSiclJq1vGFGbAHv6WEMWOcq82JhZsrJHYLqAbT4G8ExktllAAJBmYrvAWk1TfW2Q98j10yiaztZJ16ZxN93sbQ/132","nickname":"冉伟宏","note":"","ucode":"95E672FED9908E","race_medal":1,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":540180,"discussion_content":"子应用切分的场景也是适用的，现在大型系统的子模块一般都是单独开发，然后集成策略要么是iframe嵌入、要么是类似乾坤这类的子应用持续集成库；Vue的这个变化，在这种场景下就提供了应用隔离的能力。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1639982492,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1195144,"avatar":"https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg","nickname":"大神博士","note":"","ucode":"8C4318095949F0","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":579582,"discussion_content":"微前端","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1657535050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318091,"user_name":"码农初上路","can_delete":false,"product_type":"c1","uid":1387907,"ip_address":"","ucode":"14BD772209C5C7","user_header":"https://static001.geekbang.org/account/avatar/00/15/2d/83/f81e4403.jpg","comment_is_top":false,"comment_ctime":1635146694,"is_pvip":false,"replies":[{"id":"115316","content":"对的，Vue2基于Object.defineProperty来做，兼容不了IE8","user_name":"作者回复","comment_id":318091,"uid":"1003715","ip_address":"","utype":1,"ctime":1635155466,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"44584819654","product_id":100094401,"comment_content":"大圣好，vue2.7最低也能支持到IE9吗？","like_count":10,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529099,"discussion_content":"对的，Vue2基于Object.defineProperty来做，兼容不了IE8","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635155466,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318022,"user_name":"ll","can_delete":false,"product_type":"c1","uid":1296458,"ip_address":"","ucode":"57C5DAC5B51036","user_header":"https://static001.geekbang.org/account/avatar/00/13/c8/4a/3a322856.jpg","comment_is_top":false,"comment_ctime":1635126002,"is_pvip":true,"replies":[{"id":"115321","content":"那是必须的  工资驱动","user_name":"作者回复","comment_id":318022,"uid":"1003715","ip_address":"","utype":1,"ctime":1635155937,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"44584798962","product_id":100094401,"comment_content":"全面拥抱Vue 3会有更好的待遇，敲敲黑板，重点😎","like_count":10,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529068,"discussion_content":"那是必须的  工资驱动","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635155937,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318971,"user_name":"。。。","can_delete":false,"product_type":"c1","uid":1035567,"ip_address":"","ucode":"6882BABE9C3D6B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/cd/2f/f4adcb41.jpg","comment_is_top":false,"comment_ctime":1635493772,"is_pvip":false,"replies":[{"id":"118409","content":"1. tree shaking就是打包的时候可以删掉你没有用到的模块，减小上线代码的体积<br>2. 我们课程中用的全部都是componsition api，vue2中全部都是从this上取数据的方式就是options api<br>3. 全家桶就是vuex vue-router 加上一个组件库<br>4，ast全称是抽象语法树<br>5. 虚拟dom就是用js的对象去描述一个html标签或者组件","user_name":"作者回复","comment_id":318971,"uid":"1003715","ip_address":"","utype":1,"ctime":1639404464,"user_name_real":"编辑"}],"discussion_count":2,"race_medal":0,"score":"27405297548","product_id":100094401,"comment_content":"有几个问题需求请教下：<br>1. Tree-shaking 清理代码 什么意思，什么时候用<br>2. 到底什么是  Composotion api ，vue 2 的是  Options api?<br>3.  vue3 周边，或者说是 vue 全家桶都包括哪些vue技术<br>4. AST 是什么，全称是什么<br>5. 虚拟 DOM 是什么，怎么理解<br>","like_count":7,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":538424,"discussion_content":"1. tree shaking就是打包的时候可以删掉你没有用到的模块，减小上线代码的体积\n2. 我们课程中用的全部都是componsition api，vue2中全部都是从this上取数据的方式就是options api\n3. 全家桶就是vuex vue-router 加上一个组件库\n4，ast全称是抽象语法树\n5. 虚拟dom就是用js的对象去描述一个html标签或者组件","likes_number":7,"is_delete":false,"is_hidden":false,"ctime":1639404464,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2852342,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/85/f6/0edde5c2.jpg","nickname":"鱿鱼","note":"","ucode":"409B9F139FF761","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":534866,"discussion_content":"1.tree-shaking大宝的时候用的，和字面意思一样，用于打包时扔掉没用的依赖\n2.这个问题上一讲讲了\n3.各种vue的api的灵活运用和vue提倡的开发规范的贯彻\n4.我个人的理解是对一段代码的抽象/描述\n5.描述真实dom节点的一个javascript对象","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638285852,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318045,"user_name":"Condor Hero","can_delete":false,"product_type":"c1","uid":1528334,"ip_address":"","ucode":"BD850FE812D22F","user_header":"https://static001.geekbang.org/account/avatar/00/17/52/0e/c5ff46d2.jpg","comment_is_top":false,"comment_ctime":1635130960,"is_pvip":true,"replies":[{"id":"115319","content":"阅读推荐指的是文章合集吗？","user_name":"作者回复","comment_id":318045,"uid":"1003715","ip_address":"","utype":1,"ctime":1635155557,"user_name_real":"花果山大圣"}],"discussion_count":3,"race_medal":1,"score":"23109967440","product_id":100094401,"comment_content":"讲的很细，很赞👍🏻，有个小需求，希望大圣老师加上推荐阅读这样类似的章节。","like_count":5,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529076,"discussion_content":"阅读推荐指的是文章合集吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635155557,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1528334,"avatar":"https://static001.geekbang.org/account/avatar/00/17/52/0e/c5ff46d2.jpg","nickname":"Condor Hero","note":"","ucode":"BD850FE812D22F","race_medal":1,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407953,"discussion_content":"老师认为对理解文章有帮助的文章，或一些相关的好文章，作为一个补充，成为老师文章单独一节，推荐大家阅读这种。","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1635156386,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2464787,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/7icj7X67vvABNjC284ichONicn6PFeZSUAdclWKr8FJIHfWUzx6azxPuDcCNODV8ZmqXMAUibvJZiaXsYxKCmtJfxkg/132","nickname":"于三妮","note":"","ucode":"36884C1BE51F7A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408370,"discussion_content":"+1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635236805,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318251,"user_name":"南山","can_delete":false,"product_type":"c1","uid":1239362,"ip_address":"","ucode":"1B5EF54A2A56F8","user_header":"https://static001.geekbang.org/account/avatar/00/12/e9/42/1de79e71.jpg","comment_is_top":false,"comment_ctime":1635215721,"is_pvip":false,"replies":[{"id":"115442","content":"看来是用了gogocode，是不是非常的哇塞","user_name":"作者回复","comment_id":318251,"uid":"1003715","ip_address":"","utype":1,"ctime":1635252319,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"18815084905","product_id":100094401,"comment_content":"打卡<br>目前部门的老项目用的@compositon&#47;api包使用vue3的composition api来重构和优化，新项目直接使用vue3来开发<br>开阔眼界了，使用ast语法编译来转换vue2代码，真是一劳永逸！","like_count":4,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529155,"discussion_content":"看来是用了gogocode，是不是非常的哇塞","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635252319,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":327344,"user_name":"不负","can_delete":false,"product_type":"c1","uid":1238323,"ip_address":"","ucode":"147F5860711811","user_header":"https://static001.geekbang.org/account/avatar/00/12/e5/33/ff5c52ad.jpg","comment_is_top":false,"comment_ctime":1640073574,"is_pvip":true,"replies":[{"id":"119280","content":"指的是在一部分老的项目中，一个页面会有好几个Vue的实例，就是用new Vue创建好几次，会有命名混淆的问题，大部分项目都是一个Vue的实例，这是一个边缘的case","user_name":"作者回复","comment_id":327344,"uid":"1003715","ip_address":"","utype":1,"ctime":1640229351,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":1,"score":"14524975462","product_id":100094401,"comment_content":"讲得很全面了，就是不太理解下面这段里，一个全局组件，有多个Vue实例，不就是全局组件吗，这里的“造成混淆”是指什么？<br>“我们在 Vue 上先注册了一个组件 el-counter，然后创建了两个 Vue 的实例。这两个实例都自动都拥有了 el-couter 这个组件，但这样做很容易造成混淆。”<br>```<br>Vue.component(&#39;el-counter&#39;,...)<br>new Vue({el:&#39;#app1&#39;})<br>new Vue({el:&#39;#app2&#39;})<br>```","like_count":3,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541004,"discussion_content":"指的是在一部分老的项目中，一个页面会有好几个Vue的实例，就是用new Vue创建好几次，会有命名混淆的问题，大部分项目都是一个Vue的实例，这是一个边缘的case","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1640229352,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318250,"user_name":"淡若清风过","can_delete":false,"product_type":"c1","uid":2816633,"ip_address":"","ucode":"A589310DD82EA7","user_header":"https://static001.geekbang.org/account/avatar/00/2a/fa/79/c5cfe88c.jpg","comment_is_top":false,"comment_ctime":1635215576,"is_pvip":false,"replies":[{"id":"115443","content":"极客时间的更新策略，也算是帮你制定了一个学习计划吧  ","user_name":"作者回复","comment_id":318250,"uid":"1003715","ip_address":"","utype":1,"ctime":1635252346,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"14520117464","product_id":100094401,"comment_content":"拐了，还以为已经录制好的视频拿来卖，看来是到明年都更新不完","like_count":3,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529154,"discussion_content":"极客时间的更新策略，也算是帮你制定了一个学习计划吧  ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635252346,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318127,"user_name":"无双","can_delete":false,"product_type":"c1","uid":1238757,"ip_address":"","ucode":"405779043D091E","user_header":"https://static001.geekbang.org/account/avatar/00/12/e6/e5/e3daa1a7.jpg","comment_is_top":false,"comment_ctime":1635157466,"is_pvip":false,"replies":[{"id":"115449","content":"Vue3的全球发布会上，尤雨溪ppt里，Vue2还会支持18个月","user_name":"作者回复","comment_id":318127,"uid":"1003715","ip_address":"","utype":1,"ctime":1635253050,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"14520059354","product_id":100094401,"comment_content":"麻烦问一下，在哪有vue2的支持周期？","like_count":3,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529113,"discussion_content":"Vue3的全球发布会上，尤雨溪ppt里，Vue2还会支持18个月","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635253050,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318015,"user_name":"球球","can_delete":false,"product_type":"c1","uid":2823316,"ip_address":"","ucode":"ABDFF03FB6AF3F","user_header":"https://static001.geekbang.org/account/avatar/00/2b/14/94/fabb99cd.jpg","comment_is_top":false,"comment_ctime":1635124890,"is_pvip":false,"replies":[{"id":"115322","content":"是这样的，可以选择element-plus或者element3","user_name":"作者回复","comment_id":318015,"uid":"1003715","ip_address":"","utype":1,"ctime":1635156037,"user_name_real":"花果山大圣"}],"discussion_count":3,"race_medal":0,"score":"14520026778","product_id":100094401,"comment_content":"vue2升级成vue3 对应用到的element ui 也要升级是吗","like_count":3,"discussions":[{"author":{"id":1465310,"avatar":"https://static001.geekbang.org/account/avatar/00/16/5b/de/152f1c2c.jpg","nickname":"Warn","note":"","ucode":"F2F7FCDB0940D0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":407852,"discussion_content":"需要的，周边生态需要用对应升级到Vue3的。element-ui现在有一个对应的Vue3版本的element-plus","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1635133720,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529067,"discussion_content":"是这样的，可以选择element-plus或者element3","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1635156037,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":1,"child_discussions":[{"author":{"id":2503542,"avatar":"https://static001.geekbang.org/account/avatar/00/26/33/76/634e5b4f.jpg","nickname":"爱睡D小猪🍁","note":"","ucode":"38905163EDAD9C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"discussion":{"id":534367,"discussion_content":"老师，升级到3，element换到3，那代码的那些也要替代还是兼容？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1638172957,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":529067,"ip_address":""},"score":534367,"extra":""}]}]},{"had_liked":false,"id":318178,"user_name":"Mserke","can_delete":false,"product_type":"c1","uid":1276988,"ip_address":"","ucode":"F9726E91F6E24C","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83erDeOuPaaRAgWLLIdarW4RI2xrgdDkaPVLNuyba5kVFtCrqOialpOjkCgqZyOfxfxXJKd8a6jDI98g/132","comment_is_top":false,"comment_ctime":1635173252,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10225107844","product_id":100094401,"comment_content":"思考题：有需要升级的地方，项目越来越大了，要拆分成微服务","like_count":2},{"had_liked":false,"id":335748,"user_name":"Shane灬7","can_delete":false,"product_type":"c1","uid":1395772,"ip_address":"","ucode":"00E009C0A1495C","user_header":"https://static001.geekbang.org/account/avatar/00/15/4c/3c/028dc8b1.jpg","comment_is_top":false,"comment_ctime":1645672027,"is_pvip":true,"replies":[{"id":"122668","content":"已经和作者确认啦：这个图应该没反哦，需要长期维护的话，就建议升级Vue3 ，因为Vue2很快官方就不在维护了，如果只是临时项目，就建议继续用Vue 2维护。","user_name":"编辑回复","comment_id":335748,"uid":"1501385","ip_address":"","utype":2,"ctime":1645678848,"user_name_real":"编辑"}],"discussion_count":1,"race_medal":0,"score":"5940639323","product_id":100094401,"comment_content":"先给大圣老师点赞，发现一个问题，“是否使用 Vue 3”那张图中的“是否要长期维护”的“是”和“否”的位置是不是反了？","like_count":1,"discussions":[{"author":{"id":1501385,"avatar":"https://static001.geekbang.org/account/avatar/00/16/e8/c9/59bcd490.jpg","nickname":"听水的湖","note":"","ucode":"B1759F90165D81","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":552985,"discussion_content":"已经和作者确认啦：这个图应该没反哦，需要长期维护的话，就建议升级Vue3 ，因为Vue2很快官方就不在维护了，如果只是临时项目，就建议继续用Vue 2维护。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1645678848,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":8}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":324455,"user_name":"T1M","can_delete":false,"product_type":"c1","uid":1089929,"ip_address":"","ucode":"0F152FE9A2BC10","user_header":"https://static001.geekbang.org/account/avatar/00/10/a1/89/3c865bd0.jpg","comment_is_top":false,"comment_ctime":1638440854,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"5933408150","product_id":100094401,"comment_content":"打个卡----我用的ruoyi框架，准备尝试把前端升级到vue3。","like_count":1,"discussions":[{"author":{"id":1133464,"avatar":"https://static001.geekbang.org/account/avatar/00/11/4b/98/20ff3f6a.jpg","nickname":"这个需求做不了","note":"","ucode":"2BC0A306550D45","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":575691,"discussion_content":"若依框架和admin哪个好用","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1655027980,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320683,"user_name":"Geek_10f839","can_delete":false,"product_type":"c1","uid":2817147,"ip_address":"","ucode":"FC432F52C1367A","user_header":"","comment_is_top":false,"comment_ctime":1636449581,"is_pvip":false,"replies":[{"id":"116525","content":"其实放在一个全局变量里获取就可以","user_name":"作者回复","comment_id":320683,"uid":"1003715","ip_address":"","utype":1,"ctime":1636638271,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"5931416877","product_id":100094401,"comment_content":"老师您好，<br>我们在Vue2升级Vue3时遇到了一些问题，请指点～<br>1，Vue2项目中，我们会把一些数据绑定到Vue上，比如Vue.$reqList存放了请求中的异步请求，然后在axios.js的拦截器中去监听和处理，但是在Vue3中变更成了app.config.globalProperties.$reqList，但是却无法在普通的js文件中（比如axios.js）中拿到这个值。<br>","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":530083,"discussion_content":"其实放在一个全局变量里获取就可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638271,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":320008,"user_name":"章剑","can_delete":false,"product_type":"c1","uid":1397193,"ip_address":"","ucode":"0BF81D31F51353","user_header":"https://static001.geekbang.org/account/avatar/00/15/51/c9/5decc0a3.jpg","comment_is_top":false,"comment_ctime":1636037427,"is_pvip":false,"discussion_count":2,"race_medal":0,"score":"5931004723","product_id":100094401,"comment_content":"大圣老师，我最近也在升级vue3中，总体来说compositionApi 还是比较舒服的， 但是mixin有个特性，就是引入页的同名方法可以替换mixin 的方法，在之前的vue 2框架里，这个特性能让部分逻辑更容易修改，打个比方，有一套表单提交的mixin ，其中有个逻辑是提交完表单后重置表单，正常就是调用自定义的resetform 方法，如果需要有特殊操作的话，直接在引入页重新定义一个同名方法重写这个逻辑就可以了。但是在vue3 中我就不知道怎么比较好的处理这种情况了。还请指点下","like_count":1,"discussions":[{"author":{"id":2875558,"avatar":"https://static001.geekbang.org/account/avatar/00/2b/e0/a6/47bce0c0.jpg","nickname":"懒","note":"","ucode":"5C301C51018AFA","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":541092,"discussion_content":"你说的这个mixin的特性实际上是它的缺点，composition的话只需要在引入的时候解构就行了。","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1640251897,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1325045,"avatar":"https://static001.geekbang.org/account/avatar/00/14/37/f5/9bc7df46.jpg","nickname":"NULL","note":"","ucode":"FA720204542020","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":570153,"discussion_content":"mixin 能不用就不用 如果不去翻代码 对于你来讲 里面就是一个黑盒  但是去翻代码 又太累了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1651677482,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319889,"user_name":"hyangteng","can_delete":false,"product_type":"c1","uid":1002171,"ip_address":"","ucode":"4D08F87336551F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/bb/9cf1266c.jpg","comment_is_top":false,"comment_ctime":1635999539,"is_pvip":false,"replies":[{"id":"116542","content":"使用useStore","user_name":"作者回复","comment_id":319889,"uid":"1003715","ip_address":"","utype":1,"ctime":1636638712,"user_name_real":"花果山大圣"}],"discussion_count":1,"race_medal":0,"score":"5930966835","product_id":100094401,"comment_content":"请问下：vue2使用composition-api，涉及到vuex的如何处理 <br><br>例如：<br>如何获取vuex中的状态<br> 如何提交mutation和action","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529803,"discussion_content":"使用useStore","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1636638712,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318288,"user_name":"起風了","can_delete":false,"product_type":"c1","uid":1392788,"ip_address":"","ucode":"2B49D13356A1F7","user_header":"https://static001.geekbang.org/account/avatar/00/15/40/94/afd0919c.jpg","comment_is_top":false,"comment_ctime":1635231138,"is_pvip":false,"replies":[{"id":"115439","content":"@vue&#47;compat可以处理大部分场景，但是组件库是个例外，因为很多组件库对Vnode本身的格式都做了定制，很难自动化升级， antd-vue现在也全面支持vue3了 直接换最新版本也不难的","user_name":"作者回复","comment_id":318288,"uid":"1003715","ip_address":"","utype":1,"ctime":1635252262,"user_name_real":"花果山大圣"}],"discussion_count":2,"race_medal":0,"score":"5930198434","product_id":100094401,"comment_content":"老师好,手头上有个项目,是基于vue2的ant design pro vue来迭代的,还使用了一些其他例如表格组件库等,都是vue2的. 如果要升级vue3的话,使用@vue&#47;compat的同时,其他的那些插件或组件库也要升级vue3版本对应的?如果其他插件或组件库没有vue3版本的是不是升级就比较困难或者不可行了?","like_count":1,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529171,"discussion_content":"@vue/compat可以处理大部分场景，但是组件库是个例外，因为很多组件库对Vnode本身的格式都做了定制，很难自动化升级， antd-vue现在也全面支持vue3了 直接换最新版本也不难的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635252262,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1698735,"avatar":"https://static001.geekbang.org/account/avatar/00/19/eb/af/e49af9a8.jpg","nickname":"JC.彦","note":"","ucode":"E87C1420B140F4","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":408760,"discussion_content":"同问，其他组件库如better-scroll,没有Vue3版本，那么Vue2升级到Vue3后，会影响better-scroll的使用吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635320185,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":358646,"user_name":"InfoQ_cd01f1df2496","can_delete":false,"product_type":"c1","uid":2055852,"ip_address":"湖北","ucode":"C000770B9A5788","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLL5KuxVibyxbVwuPaOXN3YQLEBTlb22cV05M3P8DFGpQxFOTNBMLHRYfPHwS9UsQyUicAo92FketrA/132","comment_is_top":false,"comment_ctime":1664509277,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1664509277","product_id":100094401,"comment_content":"这讲内容我最大的收获是vue2升级vue3，可以使用@vue&#47;compat帮助我们更好的升级，因为它能把所有vue2相关的升级信息提示出来；再来就是可以使用gogocode帮助我们自动化的完成vue2到vue3的升级","like_count":0},{"had_liked":false,"id":348371,"user_name":"这个需求做不了","can_delete":false,"product_type":"c1","uid":1133464,"ip_address":"","ucode":"2BC0A306550D45","user_header":"https://static001.geekbang.org/account/avatar/00/11/4b/98/20ff3f6a.jpg","comment_is_top":false,"comment_ctime":1655027614,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1655027614","product_id":100094401,"comment_content":"老师你的element3 官方文档呢？","like_count":0},{"had_liked":false,"id":331936,"user_name":"熊能","can_delete":false,"product_type":"c1","uid":1135024,"ip_address":"","ucode":"1019EA97062AC7","user_header":"https://static001.geekbang.org/account/avatar/00/11/51/b0/d32c895d.jpg","comment_is_top":false,"comment_ctime":1642908006,"is_pvip":true,"discussion_count":1,"race_medal":0,"score":"1642908006","product_id":100094401,"comment_content":"vue2.7能支持IE6么？","like_count":0,"discussions":[{"author":{"id":1272749,"avatar":"https://static001.geekbang.org/account/avatar/00/13/6b/ad/cf2e924e.jpg","nickname":"Levix","note":"","ucode":"A82CE7EF74B311","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":554322,"discussion_content":"不能，只能兼容到 IE8","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1646317062,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319308,"user_name":"Geek_614299","can_delete":false,"product_type":"c1","uid":1565894,"ip_address":"","ucode":"6006B801D5A4C6","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK95MP7iatc1WcDdusl6mWibiaGXQebI2WFbfTjANfH2eaQX07u7nTnQ6JGOaYKibXYOjPwXDT2FBhUXg/132","comment_is_top":false,"comment_ctime":1635738464,"is_pvip":false,"replies":[{"id":"115889","content":"给你竖个大拇指","user_name":"作者回复","user_name_real":"花果山大圣","uid":"1003715","ctime":1635931096,"ip_address":"","comment_id":319308,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635738464","product_id":100094401,"comment_content":"升级！绝不惯着ie(11)","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529586,"discussion_content":"给你竖个大拇指","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635931096,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":319225,"user_name":"落风","can_delete":false,"product_type":"c1","uid":1198158,"ip_address":"","ucode":"D70B221D22A439","user_header":"https://static001.geekbang.org/account/avatar/00/12/48/4e/51896855.jpg","comment_is_top":false,"comment_ctime":1635684502,"is_pvip":false,"replies":[{"id":"115740","content":"尤其是嵌套的mixin","user_name":"作者回复","user_name_real":"花果山大圣","uid":"1003715","ctime":1635731462,"ip_address":"","comment_id":319225,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635684502","product_id":100094401,"comment_content":"vue2 开发公用逻辑时候的各种mixins，足够让人头大","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529549,"discussion_content":"尤其是嵌套的mixin","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635731462,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318718,"user_name":"请去学习吧","can_delete":false,"product_type":"c1","uid":2817286,"ip_address":"","ucode":"16BE53FC31B0CF","user_header":"","comment_is_top":false,"comment_ctime":1635402628,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635402628","product_id":100094401,"comment_content":"离开舒适圈，体验新框架，打卡学习Vue 3","like_count":0},{"had_liked":false,"id":318356,"user_name":"Geek_525762","can_delete":false,"product_type":"c1","uid":2443336,"ip_address":"","ucode":"7482A26BE61A8C","user_header":"","comment_is_top":false,"comment_ctime":1635255328,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635255328","product_id":100094401,"comment_content":"更新的很慢啊！","like_count":0},{"had_liked":false,"id":318336,"user_name":"人生如戏","can_delete":false,"product_type":"c1","uid":2819735,"ip_address":"","ucode":"F02A52DA1DA6E5","user_header":"https://static001.geekbang.org/account/avatar/00/2b/06/97/fe937d40.jpg","comment_is_top":false,"comment_ctime":1635247210,"is_pvip":true,"replies":[{"id":"115452","content":"肯定是可以的，Composition是一个额外的功能可以选用 ","user_name":"作者回复","user_name_real":"花果山大圣","uid":"1003715","ctime":1635255673,"ip_address":"","comment_id":318336,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635247210","product_id":100094401,"comment_content":"vue2.7 Composition API、vue2原来语法可以同时混用吗？因为有个项目大部分模块我在做，但有一个模块分给其他同事了，我个人想用 Composition API","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529196,"discussion_content":"肯定是可以的，Composition是一个额外的功能可以选用 ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635255673,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318236,"user_name":"速冻鱼","can_delete":false,"product_type":"c1","uid":2752085,"ip_address":"","ucode":"293DD4B76D2421","user_header":"https://static001.geekbang.org/account/avatar/00/29/fe/55/de39267a.jpg","comment_is_top":false,"comment_ctime":1635212471,"is_pvip":false,"replies":[{"id":"115445","content":"快分享一下Vue3的经验","user_name":"作者回复","user_name_real":"花果山大圣","uid":"1003715","ctime":1635252391,"ip_address":"","comment_id":318236,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635212471","product_id":100094401,"comment_content":"虽然公司一直在使用vue3，但还是能学到很多，蟹蟹大圣老师","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529149,"discussion_content":"快分享一下Vue3的经验","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635252391,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318144,"user_name":"@","can_delete":false,"product_type":"c1","uid":1985141,"ip_address":"","ucode":"B308157E3FA393","user_header":"https://static001.geekbang.org/account/avatar/00/1e/4a/75/51435f4b.jpg","comment_is_top":false,"comment_ctime":1635162836,"is_pvip":false,"replies":[{"id":"115448","content":"升级完一定很有心得 欢迎回来分享","user_name":"作者回复","user_name_real":"花果山大圣","uid":"1003715","ctime":1635252972,"ip_address":"","comment_id":318144,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1635162836","product_id":100094401,"comment_content":"我们的项目也需要升级了","like_count":0,"discussions":[{"author":{"id":1003715,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/50/c3/0aa50246.jpg","nickname":"花果山大圣","note":"","ucode":"25C0A36D628037","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":529118,"discussion_content":"升级完一定很有心得 欢迎回来分享","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635252972,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":318019,"user_name":"Aybuai","can_delete":false,"product_type":"c1","uid":2815412,"ip_address":"","ucode":"1A582B8FF68653","user_header":"https://static001.geekbang.org/account/avatar/00/2a/f5/b4/0facc7f3.jpg","comment_is_top":false,"comment_ctime":1635125173,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1635125173","product_id":100094401,"comment_content":"就我目前的项目来说有两点需要<br>1、Composition API 组合语法，项目过于庞大，有的页面上千行。维护起来特别麻烦。<br>2、自定义渲染器，随着项目的外推，可能不单单公司内部使用，可能会出现各种多端支持。","like_count":0}]}