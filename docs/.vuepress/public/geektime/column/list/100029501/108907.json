{"id":108907,"title":"17ä¸¨å¦‚ä½•ä½¿ç”¨Pythonæ“ä½œMySQLï¼Ÿ","content":"<p>æˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯ç›´æ¥åœ¨DBMSé‡Œé¢è¿›è¡ŒSQLçš„æ“ä½œï¼Œå®é™…ä¸Šæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡åç«¯è¯­è¨€å¯¹DBMSè¿›è¡Œè®¿é—®ä»¥åŠè¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œè¿™æ ·æ›´å…·æœ‰çµæ´»æ€§ï¼Œå¯ä»¥å®ç°ä¸€äº›è¾ƒä¸ºå¤æ‚çš„æ“ä½œã€‚ä½œä¸ºä¸€ä¸ªåç«¯å¼€å‘äººå‘˜ï¼ŒæŒæ¡ä¸€äº›SQLæŠ€æœ¯æ˜¯å¿…é¡»çš„ï¼›ä½œä¸ºä¸€ä¸ªæ•°æ®åº“ç®¡ç†äººå‘˜ï¼Œäº†è§£åç«¯è¯­è¨€å¦‚ä½•å¼€å‘å’Œç®¡ç†æ•°æ®åº“ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p><p>ä»Šå¤©æˆ‘ä»¥Pythonä¸ºä¾‹ï¼Œè®²è§£ä¸‹å¦‚ä½•å¯¹MySQLæ•°æ®åº“è¿›è¡Œæ“ä½œã€‚ä½ éœ€è¦æŒæ¡ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„å†…å®¹ï¼š</p><ol>\n<li>Pythonçš„DB APIè§„èŒƒæ˜¯ä»€ä¹ˆï¼Œéµå®ˆè¿™ä¸ªè§„èŒƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</li>\n<li>åŸºäºDB APIï¼ŒMySQLå®˜æ–¹æä¾›äº†é©±åŠ¨å™¨mysql-connectorï¼Œå¦‚ä½•ä½¿ç”¨å®ƒæ¥å®Œæˆå¯¹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ“ä½œï¼Ÿ</li>\n<li>CRUDæ˜¯æœ€å¸¸è§çš„æ•°æ®åº“çš„æ“ä½œï¼Œåˆ†åˆ«å¯¹åº”æ•°æ®çš„å¢åŠ ã€è¯»å–ã€ä¿®æ”¹å’Œåˆ é™¤ã€‚åœ¨æŒæ¡äº†mysql-connectorçš„ä½¿ç”¨æ–¹æ³•ä¹‹åï¼Œå¦‚ä½•å®Œæˆå¯¹æ•°æ®è¡¨çš„CRUDæ“ä½œï¼Ÿ</li>\n</ol><h2>Python DB APIè§„èŒƒ</h2><p>Pythonå¯ä»¥æ”¯æŒéå¸¸å¤šçš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œæ¯”å¦‚MySQLã€Oracleã€SQL Serverå’ŒPostgreSQLç­‰ã€‚ä¸ºäº†å®ç°å¯¹è¿™äº›DBMSçš„ç»Ÿä¸€è®¿é—®ï¼ŒPythonéœ€è¦éµå®ˆä¸€ä¸ªè§„èŒƒï¼Œè¿™å°±æ˜¯DB APIè§„èŒƒã€‚æˆ‘åœ¨ä¸‹å›¾ä¸­åˆ—å‡ºäº†DB APIè§„èŒƒçš„ä½œç”¨ï¼Œè¿™ä¸ªè§„èŒƒç»™æˆ‘ä»¬æä¾›äº†æ•°æ®åº“å¯¹è±¡è¿æ¥ã€å¯¹è±¡äº¤äº’å’Œå¼‚å¸¸å¤„ç†çš„æ–¹å¼ï¼Œä¸ºå„ç§DBMSæä¾›äº†ç»Ÿä¸€çš„è®¿é—®æ¥å£ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¦‚æœé¡¹ç›®éœ€è¦åˆ‡æ¢æ•°æ®åº“ï¼ŒPythonå±‚çš„ä»£ç ç§»æ¤ä¼šæ¯”è¾ƒç®€å•ã€‚</p><!-- [[[read_end]]] --><p><img src=\"https://static001.geekbang.org/resource/image/5d/7f/5d8113fc1637d1fe951e985b22e0287f.png?wh=1729*839\" alt=\"\"><br>\næˆ‘ä»¬åœ¨ä½¿ç”¨Pythonå¯¹DBMSè¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦ç»è¿‡ä¸‹é¢çš„å‡ ä¸ªæ­¥éª¤ï¼š</p><ol>\n<li>å¼•å…¥APIæ¨¡å—ï¼›</li>\n<li>ä¸æ•°æ®åº“å»ºç«‹è¿æ¥ï¼›</li>\n<li>æ‰§è¡ŒSQLè¯­å¥ï¼›</li>\n<li>å…³é—­æ•°æ®åº“è¿æ¥ã€‚</li>\n</ol><h2>å¦‚ä½•ä½¿ç”¨mysql-connector</h2><p>ä½¿ç”¨Pythonå¯¹æ•°æ®åº“è¿›è¡Œè®¿é—®éœ€è¦åŸºäºDB APIè§„èŒƒï¼Œè¿™é‡Œæœ‰ä¸å°‘åº“ä¾›æˆ‘ä»¬é€‰æ‹©ï¼Œæ¯”å¦‚MySQLdbã€mysqlclientã€PyMySQLã€peeweeå’ŒSQLAIchemyç­‰ã€‚ä»Šå¤©æˆ‘è®²è§£çš„æ˜¯mysql-connectorï¼Œå®ƒæ˜¯MySQL å®˜æ–¹æä¾›çš„é©±åŠ¨å™¨ï¼Œç”¨æ¥ç»™åç«¯è¯­è¨€ï¼Œæ¯”å¦‚Pythonæä¾›è¿æ¥ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•ç”¨Pythonä½¿ç”¨mysql-connectorï¼Œä»¥å®Œæˆæ•°æ®åº“çš„è¿æ¥å’Œä½¿ç”¨ã€‚</p><p>é¦–å…ˆå®‰è£…mysql-connectorã€‚åœ¨ä½¿ç”¨å‰ï¼Œä½ éœ€è¦å…ˆä½¿ç”¨ä¸‹é¢è¿™å¥å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p><pre><code>pip install mysql-connector\n</code></pre><p>åœ¨å®‰è£…ä¹‹åï¼Œä½ å¯ä»¥åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼Œç„¶åæŸ¥çœ‹ä¸‹æ•°æ®åº“çš„ç‰ˆæœ¬å·ï¼Œæ¥éªŒè¯ä¸‹æ•°æ®åº“æ˜¯å¦è¿æ¥æˆåŠŸã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code># -*- coding: UTF-8 -*-\nimport mysql.connector\n# æ‰“å¼€æ•°æ®åº“è¿æ¥\ndb = mysql.connector.connect(\n       host=&quot;localhost&quot;,\n       user=&quot;root&quot;,\n       passwd=&quot;XXX&quot;, # å†™ä¸Šä½ çš„æ•°æ®åº“å¯†ç \n       database='wucai', \n       auth_plugin='mysql_native_password'\n)\n# è·å–æ“ä½œæ¸¸æ ‡ \ncursor = db.cursor()\n# æ‰§è¡ŒSQLè¯­å¥\ncursor.execute(&quot;SELECT VERSION()&quot;)\n# è·å–ä¸€æ¡æ•°æ®\ndata = cursor.fetchone()\nprint(&quot;MySQLç‰ˆæœ¬: %s &quot; % data)\n# å…³é—­æ¸¸æ ‡&amp;æ•°æ®åº“è¿æ¥\ncursor.close()\ndb.close()\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>MySQLç‰ˆæœ¬: 8.0.13 \n</code></pre><p>ä¸Šé¢è¿™æ®µä»£ç ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„å¯¹è±¡ä½ éœ€è¦äº†è§£ä¸‹ï¼Œåˆ†åˆ«æ˜¯Connectionå’ŒCursorã€‚</p><p>Connectionå°±æ˜¯å¯¹æ•°æ®åº“çš„å½“å‰è¿æ¥è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol>\n<li>é€šè¿‡æŒ‡å®šhostã€userã€passwdå’Œportç­‰å‚æ•°æ¥åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼Œè¿™äº›å‚æ•°åˆ†åˆ«å¯¹åº”ç€æ•°æ®åº“IPåœ°å€ã€ç”¨æˆ·åã€å¯†ç å’Œç«¯å£å·ï¼›</li>\n<li>ä½¿ç”¨db.close()å…³é—­æ•°æ®åº“è¿æ¥ï¼›</li>\n<li>ä½¿ç”¨db.cursor()åˆ›å»ºæ¸¸æ ‡ï¼Œæ“ä½œæ•°æ®åº“ä¸­çš„æ•°æ®ï¼›</li>\n<li>ä½¿ç”¨db.begin()å¼€å¯äº‹åŠ¡ï¼›</li>\n<li>ä½¿ç”¨db.commit()å’Œdb.rollback()ï¼Œå¯¹äº‹åŠ¡è¿›è¡Œæäº¤ä»¥åŠå›æ»šã€‚</li>\n</ol><p>å½“æˆ‘ä»¬é€šè¿‡<code>cursor = db.cursor()</code>åˆ›å»ºæ¸¸æ ‡åï¼Œå°±å¯ä»¥é€šè¿‡é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹æ–¹å¼å¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œï¼š</p><ol>\n<li>ä½¿ç”¨<code>cursor.execute(query_sql)</code>ï¼Œæ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼›</li>\n<li>ä½¿ç”¨<code>cursor.fetchone()</code>ï¼Œè¯»å–æ•°æ®é›†ä¸­çš„ä¸€æ¡æ•°æ®ï¼›</li>\n<li>ä½¿ç”¨<code>cursor.fetchall()</code>ï¼Œå–å‡ºæ•°æ®é›†ä¸­çš„æ‰€æœ‰è¡Œï¼Œè¿”å›ä¸€ä¸ªå…ƒç»„tuplesç±»å‹ï¼›</li>\n<li>ä½¿ç”¨<code>cursor.fetchmany(n)</code>ï¼Œå–å‡ºæ•°æ®é›†ä¸­çš„å¤šæ¡æ•°æ®ï¼ŒåŒæ ·è¿”å›ä¸€ä¸ªå…ƒç»„tuplesï¼›</li>\n<li>ä½¿ç”¨<code>cursor.rowcount</code>ï¼Œè¿”å›æŸ¥è¯¢ç»“æœé›†ä¸­çš„è¡Œæ•°ã€‚å¦‚æœæ²¡æœ‰æŸ¥è¯¢åˆ°æ•°æ®æˆ–è€…è¿˜æ²¡æœ‰æŸ¥è¯¢ï¼Œåˆ™ç»“æœä¸º-1ï¼Œå¦åˆ™ä¼šè¿”å›æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®è¡Œæ•°ï¼›</li>\n<li>ä½¿ç”¨<code>cursor.close()</code>ï¼Œå…³é—­æ¸¸æ ‡ã€‚</li>\n</ol><h2>å¯¹æ•°æ®è¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥</h2><p>äº†è§£äº†Connectionå’ŒCursorçš„ä½¿ç”¨æ–¹å¼ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•æ¥å¯¹herosæ•°æ®è¡¨è¿›è¡ŒCRUDçš„æ“ä½œï¼Œå³å¢åŠ ã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤ã€‚</p><p>é¦–å…ˆæ˜¯å¢åŠ æ•°æ®ã€‚</p><p>å‡è®¾æˆ‘ä»¬æƒ³åœ¨playerè¡¨ä¸­å¢åŠ ä¸€åæ–°çƒå‘˜ï¼Œå§“åä¸ºâ€œçº¦ç¿°Â·ç§‘æ—æ–¯â€ï¼Œçƒé˜ŸIDä¸º1003ï¼ˆå³äºšç‰¹å…°å¤§è€é¹°ï¼‰ï¼Œèº«é«˜ä¸º2.08mã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code># æ’å…¥æ–°çƒå‘˜\nsql = &quot;INSERT INTO player (team_id, player_name, height) VALUES (%s, %s, %s)&quot;\nval = (1003, &quot;çº¦ç¿°-ç§‘æ—æ–¯&quot;, 2.08)\ncursor.execute(sql, val)\ndb.commit()\nprint(cursor.rowcount, &quot;è®°å½•æ’å…¥æˆåŠŸã€‚&quot;)\n</code></pre><p>æˆ‘ä»¬ä½¿ç”¨cursor.executeæ¥æ‰§è¡Œç›¸åº”çš„SQLè¯­å¥ï¼Œvalä¸ºSQLè¯­å¥ä¸­çš„å‚æ•°ï¼ŒSQLæ‰§è¡Œåä½¿ç”¨db.commit()è¿›è¡Œæäº¤ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨SQLè¯­å¥çš„æ—¶å€™ï¼Œå¯ä»¥å‘SQLè¯­å¥ä¼ é€’å‚æ•°ï¼Œè¿™æ—¶SQLè¯­å¥é‡Œè¦ç»Ÿä¸€ç”¨ï¼ˆ%sï¼‰è¿›è¡Œå ä½ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚ä¸è®ºæ’å…¥çš„æ•°å€¼ä¸ºæ•´æ•°ç±»å‹ï¼Œè¿˜æ˜¯æµ®ç‚¹ç±»å‹ï¼Œéƒ½éœ€è¦ç»Ÿä¸€ç”¨ï¼ˆ%sï¼‰è¿›è¡Œå ä½ã€‚</p><p>å¦å¤–åœ¨ç”¨æ¸¸æ ‡è¿›è¡ŒSQLæ“ä½œä¹‹åï¼Œè¿˜éœ€è¦ä½¿ç”¨db.commit()è¿›è¡Œæäº¤ï¼Œå¦åˆ™æ•°æ®ä¸ä¼šè¢«æ’å…¥ã€‚</p><p>ç„¶åæ˜¯è¯»å–æ•°æ®ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹æ•°æ®æ˜¯å¦è¢«æ’å…¥æˆåŠŸï¼Œè¿™é‡Œæˆ‘ä»¬æŸ¥è¯¢ä¸‹èº«é«˜å¤§äºç­‰äº2.08mçš„çƒå‘˜éƒ½æœ‰å“ªäº›ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code># æŸ¥è¯¢èº«é«˜å¤§äºç­‰äº2.08çš„çƒå‘˜\nsql = 'SELECT player_id, player_name, height FROM player WHERE height&gt;=2.08'\ncursor.execute(sql)\ndata = cursor.fetchall()\nfor each_player in data:\n  print(each_player)\n</code></pre><p>è¿è¡Œç»“æœï¼š</p><pre><code>(10003, 'å®‰å¾·çƒˆ-å¾·æ‹‰è’™å¾·', 2.11)\n(10004, 'ç´¢æ©-é©¬å…‹', 2.16)\n(10009, 'æ‰æ‰-å¸•æ¥šé‡Œäºš', 2.11)\n(10010, 'ä¹”æ©-æ´›ä¼Šå°”', 2.08)\n(10011, 'å¸ƒé›·å…‹-æ ¼é‡ŒèŠ¬', 2.08)\n(10015, 'äº¨åˆ©-åŸƒä¼¦æ£®', 2.11)\n(10023, 'å¤šæ›¼å¡”æ–¯-è¨åšå°¼æ–¯', 2.11)\n(10024, 'è¿ˆå°”æ–¯-ç‰¹çº³', 2.11)\n(10032, 'TJ-åˆ©å¤«', 2.08)\n(10033, 'å‡¯å°”-å¥¥å¥å› ', 2.08)\n(10037, 'ä¼Šå‡¯Â·é˜¿å°¼åšå¤', 2.08)\n(10038, 'çº¦ç¿°-ç§‘æ—æ–¯', 2.08)\n</code></pre><p>ä½ èƒ½çœ‹åˆ°çƒå‘˜çº¦ç¿°Â·ç§‘æ—æ–¯è¢«æ­£ç¡®æ’å…¥ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•ä¿®æ”¹æ•°æ®å‘¢ï¼Ÿ</p><p>å‡å¦‚æˆ‘æƒ³ä¿®æ”¹åˆšæ‰æ’å…¥çš„çƒå‘˜çº¦ç¿°Â·ç§‘æ—æ–¯çš„èº«é«˜ï¼Œå°†èº«é«˜ä¿®æ”¹æˆ2.09ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code># ä¿®æ”¹çƒå‘˜çº¦ç¿°-ç§‘æ—æ–¯\nsql = 'UPDATE player SET height = %s WHERE player_name = %s'\nval = (2.09, &quot;çº¦ç¿°-ç§‘æ—æ–¯&quot;)\ncursor.execute(sql, val)\ndb.commit()\nprint(cursor.rowcount, &quot;è®°å½•è¢«ä¿®æ”¹ã€‚&quot;)\n</code></pre><p>æœ€åæˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•åˆ é™¤çº¦ç¿°Â·ç§‘æ—æ–¯è¿™ä¸ªçƒå‘˜çš„æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>sql = 'DELETE FROM player WHERE player_name = %s'\nval = (&quot;çº¦ç¿°-ç§‘æ—æ–¯&quot;,)\ncursor.execute(sql, val)\ndb.commit()\nprint(cursor.rowcount, &quot;è®°å½•åˆ é™¤æˆåŠŸã€‚&quot;)\n</code></pre><p>æœ€åéƒ½æ‰§è¡Œå®Œäº†ï¼Œæˆ‘ä»¬æ¥å…³é—­æ¸¸æ ‡å’Œæ•°æ®åº“çš„è¿æ¥ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç å³å¯ï¼š</p><pre><code>cursor.close()\ndb.close()\n</code></pre><p>é’ˆå¯¹ä¸Šé¢çš„æ“ä½œè¿‡ç¨‹ï¼Œä½ å¯ä»¥æ¨¡æ‹Ÿä¸‹æ•°æ®çš„CRUDæ“ä½œï¼Œä½†æœ‰å‡ ç‚¹ä½ éœ€è¦æ³¨æ„ã€‚</p><p>1.æ‰“å¼€æ•°æ®åº“è¿æ¥ä»¥åï¼Œå¦‚æœä¸å†ä½¿ç”¨ï¼Œåˆ™éœ€è¦å…³é—­æ•°æ®åº“è¿æ¥ï¼Œä»¥å…é€ æˆèµ„æºæµªè´¹ã€‚<br>\n2.åœ¨å¯¹æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°å¼‚å¸¸ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨<code>try...except</code>æ•è·å¼‚å¸¸ä¿¡æ¯ã€‚æ¯”å¦‚é’ˆå¯¹æ’å…¥çƒå‘˜çº¦ç¿°Â·ç§‘æ—æ–¯è¿™ä¸ªæ“ä½œï¼Œä½ å¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ï¼š</p><pre><code>import traceback\ntry:\n  sql = &quot;INSERT INTO player (team_id, player_name, height) VALUES (%s, %s, %s)&quot;\n  val = (1003, &quot;çº¦ç¿°-ç§‘æ—æ–¯&quot;, 2.08)\n  cursor.execute(sql, val)\n  db.commit()\n  print(cursor.rowcount, &quot;è®°å½•æ’å…¥æˆåŠŸã€‚&quot;)\nexcept Exception as e:\n  # æ‰“å°å¼‚å¸¸ä¿¡æ¯\n  traceback.print_exc()\n  # å›æ»š  \n  db.rollback()\nfinally:\n  # å…³é—­æ•°æ®åº“è¿æ¥\n  db.close()\n</code></pre><p>è¿è¡Œç»“æœå‘Šè¯‰æˆ‘ä»¬è®°å½•æ’å…¥æˆåŠŸã€‚</p><p>3.å¦‚æœä½ åœ¨ä½¿ç”¨mysql-connectorè¿æ¥çš„æ—¶å€™ï¼Œç³»ç»ŸæŠ¥çš„é”™è¯¯ä¸º<code>authentication plugin caching_sha2</code>ï¼Œè¿™æ—¶ä½ éœ€è¦ä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬æ›´æ–°æ¥è§£å†³ï¼Œç‚¹å‡»<a href=\"https://dev.mysql.com/downloads/connector/python/\">è¿™é‡Œ</a>è¿›è¡Œæ›´æ–°ã€‚</p><h2>æ€»ç»“</h2><p>æˆ‘ä»Šå¤©è®²è§£äº†å¦‚ä½•ä½¿ç”¨Pythonæ¥æ“ä½œMySQLï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å®˜æ–¹æä¾›çš„mysql-connectorï¼Œå½“ç„¶é™¤äº†å®ƒä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šåº“å¯ä»¥è¿›è¡Œé€‰æ‹©ã€‚</p><p>åœ¨ä½¿ç”¨åŸºäºDB APIè§„èŒƒçš„åè®®æ—¶ï¼Œé‡ç‚¹éœ€è¦æŒæ¡Connectionå’ŒCursorè¿™ä¸¤ä¸ªå¯¹è±¡ï¼ŒConnectionå°±æ˜¯å¯¹æ•°æ®åº“çš„è¿æ¥è¿›è¡Œç®¡ç†ï¼Œè€ŒCursoræ˜¯å¯¹æ•°æ®åº“çš„æ¸¸æ ‡è¿›è¡Œç®¡ç†ï¼Œé€šè¿‡å®ƒä»¬ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œå…·ä½“çš„SQLè¯­å¥ï¼Œä»¥åŠå¤„ç†å¤æ‚çš„æ•°æ®ã€‚</p><p>ç”¨Pythonæ“ä½œMySQLï¼Œè¿˜æœ‰å¾ˆå¤šç§å§¿åŠ¿ï¼Œmysql-connectoråªæ˜¯å…¶ä¸­ä¸€ç§ï¼Œå®é™…ä¸Šè¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼Œå°±æ˜¯é‡‡ç”¨ORMæ¡†æ¶ã€‚ORMçš„è‹±æ–‡æ˜¯Object Relational Mappingï¼Œä¹Ÿå°±æ˜¯é‡‡ç”¨å¯¹è±¡å…³ç³»æ˜ å°„çš„æ¨¡å¼ï¼Œä½¿ç”¨è¿™ç§æ¨¡å¼å¯ä»¥å°†æ•°æ®åº“ä¸­å„ç§æ•°æ®è¡¨ä¹‹é—´çš„å…³ç³»æ˜ å°„åˆ°ç¨‹åºä¸­çš„å¯¹è±¡ã€‚è¿™ç§æ¨¡å¼å¯ä»¥å±è”½åº•å±‚çš„æ•°æ®åº“çš„ç»†èŠ‚ï¼Œä¸éœ€è¦æˆ‘ä»¬ä¸å¤æ‚çš„SQLè¯­å¥æ‰“äº¤é“ï¼Œç›´æ¥é‡‡ç”¨æ“ä½œå¯¹è±¡çš„å½¢å¼æ“ä½œå°±å¯ä»¥ã€‚</p><p>ä¸è¿‡å¦‚æœåº”ç”¨æ•°æ®å®ä½“å°‘ï¼Œå…¶å®æ²¡æœ‰å¿…è¦ä½¿ç”¨ORMæ¡†æ¶ï¼Œé’ˆå¯¹å°‘é‡å¯¹è±¡çš„ç®¡ç†ï¼Œè‡ªå·±å®ç°èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œæ¯”å¦‚æœ¬ç¯‡æ–‡ç« ä¸­æˆ‘è®²åˆ°çš„é‡‡ç”¨å®˜æ–¹æä¾›çš„mysql-connectoré©±åŠ¨çš„æ–¹å¼æ¥å®ç°CRUDã€‚å¼•å…¥ä¸€ä¸ªæ¡†æ¶çš„å­¦ä¹ æˆæœ¬å¾ˆé«˜ï¼Œä»£ç è†¨èƒ€ä¹Ÿå¾ˆå‰å®³ï¼Œæ‰€ä»¥å¦‚æœæ˜¯ç›¸å¯¹ç®€å•çš„æ“ä½œï¼Œå®Œå…¨å¯ä»¥è‡ªå·±åŠ¨æ‰‹æ¥å®ç°ã€‚</p><p><img src=\"https://static001.geekbang.org/resource/image/96/d2/96cf0463992b9843ba02bb7f65cb4ed2.jpg?wh=3341*1512\" alt=\"\"><br>\nä½¿ç”¨Pythonå¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œå…³é”®åœ¨äºå®æˆ˜ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å‡ºä¸€ä¸ªç»ƒä¹ é¢˜ã€‚è¯·ä½ ä½¿ç”¨Pythonå¯¹herosè¡¨ä¸­æœ€å¤§ç”Ÿå‘½å€¼å¤§äº6000çš„è‹±é›„è¿›è¡ŒæŸ¥è¯¢ï¼Œå¹¶ä¸”è¾“å‡ºç›¸åº”çš„å±æ€§å€¼ã€‚</p><p>æ¬¢è¿åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ä¼šä¸ä½ ä¸€èµ·äº¤æµã€‚ä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸å®ƒä»¬ä¸€èµ·äº¤æµä¸€ä¸‹ã€‚</p>","neighbors":{"left":{"article_title":"16ä¸¨æ¸¸æ ‡ï¼šå½“æˆ‘ä»¬éœ€è¦é€æ¡å¤„ç†æ•°æ®æ—¶ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ","id":108342},"right":{"article_title":"18ä¸¨SQLAlchemyï¼šå¦‚ä½•ä½¿ç”¨Python ORMæ¡†æ¶æ¥æ“ä½œMySQLï¼Ÿ","id":109227}},"comments":[{"had_liked":false,"id":115387,"user_name":"JustDoDT","can_delete":false,"product_type":"c1","uid":1127175,"ip_address":"","ucode":"6AF0B80F00EAEF","user_header":"https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg","comment_is_top":false,"comment_ctime":1563550708,"is_pvip":false,"replies":[{"id":"63668","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577527802,"ip_address":"","comment_id":115387,"utype":1}],"discussion_count":3,"race_medal":0,"score":"177657209844","product_id":100029501,"comment_content":"import json<br>import traceback<br>import mysql.connector<br><br># è¯»å–æ•°æ®åº“é“¾æ¥é…ç½®æ–‡ä»¶<br>with open(&#39;mysql.json&#39;, encoding=&#39;utf-8&#39;) as con_json:<br>    con_dict = json.load(con_json)<br><br># æ‰“å¼€æ•°æ®åº“é“¾æ¥<br>db = mysql.connector.connect(<br>    host=con_dict[&#39;host&#39;],<br>    user=con_dict[&#39;user&#39;],<br>    passwd=con_dict[&#39;passwd&#39;],<br>    database=con_dict[&#39;database&#39;],<br>    auth_plugin=con_dict[&#39;auth_plugin&#39;],<br>)<br><br># è·å–æ“ä½œæ¸¸æ ‡<br>cursor = db.cursor()<br>try:<br>    sql = &#39;SELECT id, name, hp_max FROM heros WHERE hp_max&gt;6000&#39;<br>    cursor.execute(sql)<br>    data = cursor.fetchall()<br>    print(cursor.rowcount, &#39;æŸ¥è¯¢æˆåŠŸã€‚&#39;)<br>    for each_hero in data:<br>        print(each_hero)<br>except Exception as e:<br>    # æ‰“å°å¼‚å¸¸ä¿¡æ¯<br>    traceback.print_exc()<br>finally:<br>    cursor.close()<br>    db.close()<br># å»ºè®®å§æ•°æ®åº“é“¾æ¥ä¿¡æ¯å†™åˆ°é…ç½®æ–‡ä»¶é‡Œï¼Œé˜²æ­¢å¯†ç æ³„éœ²ã€‚","like_count":41,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459083,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577527802,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1854657,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVIjh4T1akib5iav5IIGjXB9x98p9Y80STRcwpMDqxfGLrMvHamxlxEqLMTpiayWFWSNpBcbGwkRjRw/132","nickname":"é©¬å‰è¾‰","note":"","ucode":"4265EFBD2BB7BD","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":200239,"discussion_content":"åŒå­¦ï¼Œå¯ä»¥å‘ä¸€ä¸‹ï¼Œmysql.json è¿™ä¸ªæ–‡ä»¶çš„æ ¼å¼æ˜¯ä»€ä¹ˆæ ·å­çš„å—ï¼Œè°¢è°¢\n","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1583671505,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1077127,"avatar":"https://static001.geekbang.org/account/avatar/00/10/6f/87/669263b4.jpg","nickname":"é™ˆé‡‘é‘«","note":"","ucode":"609A24832CA80C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1854657,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVIjh4T1akib5iav5IIGjXB9x98p9Y80STRcwpMDqxfGLrMvHamxlxEqLMTpiayWFWSNpBcbGwkRjRw/132","nickname":"é©¬å‰è¾‰","note":"","ucode":"4265EFBD2BB7BD","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":210808,"discussion_content":"{\n  &#34;host&#34;:&#34;xxx&#34;,\n  &#34;user&#34;:&#34;xxx&#34;,\n  &#34;passwd&#34;:&#34;xxx&#34;,\n  &#34;database&#34;:&#34;xxx&#34;,\n  &#34;auth_plugin&#34;:&#34;mysql_native_password&#34;\n}","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1584777405,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":200239,"ip_address":""},"score":210808,"extra":""}]}]},{"had_liked":false,"id":115239,"user_name":"ä¸€å¶çŸ¥ç§‹","can_delete":false,"product_type":"c1","uid":1445189,"ip_address":"","ucode":"15A95FA86B7AE4","user_header":"https://static001.geekbang.org/account/avatar/00/16/0d/45/b88a1794.jpg","comment_is_top":false,"comment_ctime":1563516515,"is_pvip":false,"replies":[{"id":"63675","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577527923,"ip_address":"","comment_id":115239,"utype":1}],"discussion_count":1,"race_medal":0,"score":"35923254883","product_id":100029501,"comment_content":"sqlalchemyç”¨ä¹ æƒ¯äº†ã€‚ã€‚ã€‚çŒ®ä¸‘æ¥ä¸€æ®µPythonä»£ç å§<br>```Python<br># -*- coding:utf-8 -*-<br>from sqlalchemy import and_<br>from sqlalchemy import Column, INT, FLOAT, VARCHAR<br>from sqlalchemy import create_engine<br>from sqlalchemy.orm import sessionmaker<br>from sqlalchemy.ext.declarative import declarative_base<br>Base = declarative_base()<br><br><br>class Test_db:<br>    def __init__(self):<br>        &quot;&quot;&quot;æ­¤å¤„å¡«ä¸Šè‡ªå·±çš„è¿æ¥é…ç½®&quot;&quot;&quot;<br>        self.engine = create_engine(<br>            &#39;mysql+pymysql:&#47;&#47;username:password@host:port&#47;db_name?charset=utf8&#39;)<br>        db_session = sessionmaker(bind=self.engine)<br>        self.session = db_session()<br><br>    def query_all(self, target_class, query_filter):<br>        result_list = self.session.query(target_class).filter(query_filter).all()<br>        self.session.close()<br>        return result_list<br><br><br>class Heros(Base):<br>    &quot;&quot;&quot;å®šä¹‰è¡¨ç»“æ„&quot;&quot;&quot;<br>    __tablename__ = &#39;heros&#39;<br>    id = Column(INT(), primary_key=True)<br>    name = Column(VARCHAR(255))<br>    hp_max = Column(FLOAT())<br>    mp_max = Column(FLOAT())<br><br>    def __init__(self, id, name, hp_max, mp_max):<br>        self.id = id<br>        self.name = name<br>        self.hp_max = hp_max<br>        self.mp_max = mp_max<br><br><br>if __name__ == &#39;__main__&#39;:<br>    db_obj = Test_db()<br>    query_filter = and_(Heros.hp_max &gt; 6000)<br>    heros = db_obj.query_all(Heros, query_filter)<br>    for hero_info in heros:<br>        print(&quot;id:{}, name:{}, hp_max:{}, mp_max:{}&quot;.format(hero_info.id, hero_info.name,<br>                                                            hero_info.hp_max, hero_info.mp_max))<br>```<br>id:10000, name:å¤ä¾¯æƒ‡, hp_max:7350.0, mp_max:1746.0<br>id:10046, name:é’Ÿé¦—, hp_max:6280.0, mp_max:1988.0<br>id:10048, name:é¬¼è°·å­, hp_max:7107.0, mp_max:1808.0<br>id:10051, name:èµµäº‘, hp_max:6732.0, mp_max:1760.0<br>id:10052, name:æ©˜çŸ³äº¬, hp_max:7000.0, mp_max:0.0<br>id:10055, name:æ¨æˆ¬, hp_max:7420.0, mp_max:1694.0<br>id:10056, name:è¾¾æ‘©, hp_max:7140.0, mp_max:1694.0<br>id:10057, name:å­™æ‚Ÿç©º, hp_max:6585.0, mp_max:1760.0<br>id:10058, name:åˆ˜å¤‡, hp_max:6900.0, mp_max:1742.0<br>.....æ‰§è¡Œç»“æœæœ‰ç‚¹å¤šå­—æ•°é™åˆ¶äº†<br>Process finished with exit code 0","like_count":8,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459022,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577527923,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115167,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1563502328,"is_pvip":false,"replies":[{"id":"63679","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577528027,"ip_address":"","comment_id":115167,"utype":1}],"discussion_count":1,"race_medal":0,"score":"27333306104","product_id":100029501,"comment_content":"# -*- coding: UTF-8 -*-<br>import mysql.connector<br>import traceback<br><br># æ‰“å¼€æ•°æ®åº“è¿æ¥<br>db = mysql.connector.connect(<br>    host=&quot;localhost&quot;,<br>    user=&quot;root&quot;,<br>    passwd=&quot;123456&quot;,  # å†™ä¸Šä½ çš„æ•°æ®åº“å¯†ç <br>    database=&#39;nba&#39;,<br>    auth_plugin=&#39;mysql_native_password&#39;<br>)<br><br># è·å–æ“ä½œæ¸¸æ ‡<br>cursor = db.cursor()<br><br>try:<br><br>    # æŸ¥è¯¢heros è¡¨ä¸­æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„è¿›è¡ŒæŸ¥è¯¢ï¼Œå¹¶ä¸”è¾“å‡ºç›¸åº”çš„å±æ€§å€¼ã€‚<br>    sql = &#39;SELECT name, hp_max FROM heros WHERE hp_max &gt; %s ORDER BY hp_max DESC&#39;<br>    val = (6000,)<br>    cursor.execute(sql, val)<br>    data = cursor.fetchall()<br>    for each_player in data:<br>        print(each_player)<br>except Exception as e:<br>  # æ‰“å°å¼‚å¸¸ä¿¡æ¯<br>  traceback.print_exc()<br>  # å›æ»š<br>  db.rollback()<br>finally:<br>  # å…³é—­æ¸¸æ ‡ &amp; æ•°æ®åº“è¿æ¥<br>  cursor.close()<br>  db.close()<br><br>è¾“å‡ºï¼š<br><br>(&#39;å»‰é¢‡&#39;, 9328.0)<br>(&#39;ç™½èµ·&#39;, 8638.0)<br>(&#39;ç¨‹å’¬é‡‘&#39;, 8611.0)<br>(&#39;åˆ˜ç¦…&#39;, 8581.0)<br>(&#39;ç‰›é­”&#39;, 8476.0)<br>(&#39;å¼ é£&#39;, 8341.0)<br>(&#39;åº„å‘¨&#39;, 8149.0)<br>(&#39;åˆ˜é‚¦&#39;, 8073.0)<br>(&#39;é¡¹ç¾½&#39;, 8057.0)<br>(&#39;äºšç‘Ÿ&#39;, 8050.0)<br>(&#39;ä¸œçš‡å¤ªä¸€&#39;, 7669.0)<br>(&#39;å…¸éŸ¦&#39;, 7516.0)<br>(&#39;æ›¹æ“&#39;, 7473.0)<br>(&#39;æ¨æˆ¬&#39;, 7420.0)<br>(&#39;å¤ä¾¯æƒ‡&#39;, 7350.0)<br>(&#39;å•å¸ƒ&#39;, 7344.0)<br>(&#39;å“ªå’&#39;, 7268.0)<br>(&#39;å¢¨å­&#39;, 7176.0)<br>(&#39;è€å¤«å­&#39;, 7155.0)<br>(&#39;è¾¾æ‘©&#39;, 7140.0)<br>(&#39;é¬¼è°·å­&#39;, 7107.0)<br>(&#39;å…³ç¾½&#39;, 7107.0)<br>(&#39;é’Ÿæ— è‰³&#39;, 7000.0)<br>(&#39;æ©˜çŸ³äº¬&#39;, 7000.0)<br>(&#39;åˆ˜å¤‡&#39;, 6900.0)<br>(&#39;å¤ªä¹™çœŸäºº&#39;, 6835.0)<br>(&#39;å­™è†‘&#39;, 6811.0)<br>(&#39;èµµäº‘&#39;, 6732.0)<br>(&#39;æ‰é¹Š&#39;, 6703.0)<br>(&#39;é“ &#39;, 6700.0)<br>(&#39;éœ²å¨œ&#39;, 6612.0)<br>(&#39;å­™æ‚Ÿç©º&#39;, 6585.0)<br>(&#39;é’Ÿé¦—&#39;, 6280.0)<br>(&#39;é›…å…¸å¨œ&#39;, 6264.0)<br>(&#39;å…°é™µç‹&#39;, 6232.0)<br>(&#39;å®«æœ¬æ­¦è—&#39;, 6210.0)<br>(&#39;å¨œå¯éœ²éœ²&#39;, 6205.0)<br>(&#39;é«˜æ¸ç¦»&#39;, 6165.0)<br>(&#39;èŠˆæœˆ&#39;, 6164.0)<br>(&#39;ä¸çŸ¥ç«èˆ&#39;, 6014.0)<br>(&#39;å­™å°šé¦™&#39;, 6014.0)<br><br>Process finished with exit code 0","like_count":6,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458996,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577528027,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115172,"user_name":"å¤œè·¯ç ´æ™“","can_delete":false,"product_type":"c1","uid":1353577,"ip_address":"","ucode":"9B875F94B759B9","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/3hZfficKPGCq2kjFBu9SgaMjibJTEl7iaW1ta6pZNyiaWP8XEsNpunlnsiaOtBpWTXfT5BvRP3qNByml6p9rtBvqewg/132","comment_is_top":false,"comment_ctime":1563503300,"is_pvip":false,"replies":[{"id":"63678","content":"å¯†ç éªŒè¯æ–¹å¼ï¼Œé‡‡ç”¨æ˜æ–‡","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577528020,"ip_address":"","comment_id":115172,"utype":1}],"discussion_count":2,"race_medal":0,"score":"23038339780","product_id":100029501,"comment_content":"auth_plugin=&#39;mysql_native_password&#39;<br>å“ªä½äº²ç»™è§£é‡Šä¸‹è¿™ä¸ªå‚æ•°","like_count":5,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459000,"discussion_content":"å¯†ç éªŒè¯æ–¹å¼ï¼Œé‡‡ç”¨æ˜æ–‡","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577528020,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2640790,"avatar":"","nickname":"å¼ é™","note":"","ucode":"C3586FA4E0FD4A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":377543,"discussion_content":"å¦‚æœä½ çš„ MySQL æ˜¯ 8.0 ç‰ˆæœ¬ï¼Œå¯†ç æ’ä»¶éªŒè¯æ–¹å¼å‘ç”Ÿäº†å˜åŒ–ï¼Œæ—©æœŸç‰ˆæœ¬ä¸º mysql_native_passwordï¼Œ8.0 ç‰ˆæœ¬ä¸º caching_sha2_password\nhttps://www.runoob.com/note/45833","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1622704765,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":true,"id":116285,"user_name":"å¤§æ–Œ","can_delete":false,"product_type":"c1","uid":1002183,"ip_address":"","ucode":"1434C2B0A29135","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/c7/ec18673b.jpg","comment_is_top":false,"comment_ctime":1563815820,"is_pvip":false,"replies":[{"id":"63645","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577526326,"ip_address":"","comment_id":116285,"utype":1}],"discussion_count":3,"race_medal":0,"score":"18743685004","product_id":100029501,"comment_content":"æ ¸å¿ƒä»£ç ï¼š<br>cursor = db.cursor()<br><br>sql = &quot;select name,hp_max from heros where hp_max &gt; %s&quot;<br>val = (6000,)<br>cursor.execute(sql,val)<br>data = cursor.fetchall()<br>æ³¨æ„ï¼švalé‡Œé¢çš„å…ƒç´ åé¢å¿…é¡»è¦åŠ è‹±æ–‡é€—å·ï¼Œä¸åŠ æˆ–è€…ä¸­æ–‡é€—å·éƒ½ä¼šæŠ¥é”™","like_count":4,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459463,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577526326,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2565173,"avatar":"https://static001.geekbang.org/account/avatar/00/27/24/35/03603e95.jpg","nickname":"ç‰›å“¥","note":"","ucode":"27D8619DC2B946","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":385368,"discussion_content":"æ³¨æ„ï¼švalé‡Œé¢çš„å…ƒç´ åé¢å¿…é¡»è¦åŠ è‹±æ–‡é€—å·ï¼Œä¸åŠ æˆ–è€…ä¸­æ–‡é€—å·éƒ½ä¼šæŠ¥é”™---çœŸæ˜¯è¿™æ ·ï¼Œé“ç†ä¸ºä½•å´ç™¾æ€ä¸å¾—å…¶è§£ï¼ï¼ï¼","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1627018113,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1868570,"avatar":"https://static001.geekbang.org/account/avatar/00/1c/83/1a/f9d9225f.jpg","nickname":"æ¬§é˜³å•Š","note":"","ucode":"CF1D0F0802713B","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":189333,"discussion_content":"è°¢è°¢æé†’","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1582870572,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115193,"user_name":"TKbook","can_delete":false,"product_type":"c1","uid":1073829,"ip_address":"","ucode":"F6E0E99CC79059","user_header":"https://static001.geekbang.org/account/avatar/00/10/62/a5/43aa0c27.jpg","comment_is_top":false,"comment_ctime":1563505353,"is_pvip":false,"discussion_count":4,"race_medal":0,"score":"18743374537","product_id":100029501,"comment_content":"sql = &#39;DELETE FROM player WHERE name = %s&#39;<br>val = (&quot; çº¦ç¿° - ç§‘æ—æ–¯ &quot;)<br>cursor.execute(sql)<br>db.commit()<br>print(cursor.rowcount, &quot; è®°å½•åˆ é™¤æˆåŠŸã€‚&quot;)<br>è¿™é‡Œå†™é”™äº†å“‡ï¼Œè¿™æ ·å†™æ‰ä¸ä¼šæŠ¥é”™ï¼š<br>sql = &#39;DELETE FROM player WHERE player_name = %s&#39;<br>val = (&quot; çº¦ç¿° - ç§‘æ—æ–¯ &quot;, )<br>cursor.execute(sql, val)<br>db.commit()<br>print(cursor.rowcount, &quot; è®°å½•åˆ é™¤æˆåŠŸã€‚&quot;)<br><br>","like_count":4,"discussions":[{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7999,"discussion_content":"åŒé—®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567751699,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1057326,"avatar":"https://static001.geekbang.org/account/avatar/00/10/22/2e/c201ac90.jpg","nickname":"å¤§é“","note":"","ucode":"0939FA2589F45C","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2376,"discussion_content":"æˆåŠŸäº†è€¶~ æ„Ÿè°¢\nè¯·æ•™ä¸€ä¸‹ val = (&#34; çº¦ç¿° - ç§‘æ—æ–¯ &#34;, ) ä¸ºä»€ä¹ˆè¿™é‡Œæœ«å°¾è¦åŠ ä¸€ä¸ª ï¼Œ(é€—å·)å‘¢ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1563526257,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1524154,"avatar":"https://static001.geekbang.org/account/avatar/00/17/41/ba/ae028565.jpg","nickname":"YqY","note":"","ucode":"73FB936045DCB9","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1057326,"avatar":"https://static001.geekbang.org/account/avatar/00/10/22/2e/c201ac90.jpg","nickname":"å¤§é“","note":"","ucode":"0939FA2589F45C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":205843,"discussion_content":"åŠ é€—å·æ‰æ˜¯å…ƒç»„","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1584349702,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2376,"ip_address":""},"score":205843,"extra":""},{"author":{"id":1706074,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/08/5a/4d709cf5.jpg","nickname":"Prayã€PF","note":"","ucode":"1E3E4073763490","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1057326,"avatar":"https://static001.geekbang.org/account/avatar/00/10/22/2e/c201ac90.jpg","nickname":"å¤§é“","note":"","ucode":"0939FA2589F45C","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282825,"discussion_content":"é€—å·æ‰æ˜¯å…ƒç»„ç±»å‹çš„æ ‡é…","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1592100361,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":2376,"ip_address":""},"score":282825,"extra":""}]}]},{"had_liked":false,"id":192775,"user_name":"victor666","can_delete":false,"product_type":"c1","uid":1073136,"ip_address":"","ucode":"20C9BE10E07D55","user_header":"https://static001.geekbang.org/account/avatar/00/10/5f/f0/a73607b3.jpg","comment_is_top":false,"comment_ctime":1584872476,"is_pvip":false,"replies":[{"id":"82655","content":"å“ˆå“ˆ æ˜¯çš„ Pythonä»£ç æ›´ç®€æ´","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1591443554,"ip_address":"","comment_id":192775,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10174807068","product_id":100029501,"comment_content":"Pythonç›´æ¥å†™SQLæ¯”Javaæ–¹ä¾¿å¤šäº†","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":488457,"discussion_content":"å“ˆå“ˆ æ˜¯çš„ Pythonä»£ç æ›´ç®€æ´","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591443554,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":151809,"user_name":"ä¸ä¸å†é™©è®°","can_delete":false,"product_type":"c1","uid":1661704,"ip_address":"","ucode":"A43829E454C067","user_header":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","comment_is_top":false,"comment_ctime":1573795259,"is_pvip":false,"replies":[{"id":"59730","content":"è¿™ç§ä¿¡æ¯è®ºçš„å†…å®¹åœ¨æœºå™¨å­¦ä¹ ä¸­ç”¨çš„è¿˜æ˜¯æŒºå¤šçš„","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1574738432,"ip_address":"","comment_id":151809,"utype":1}],"discussion_count":3,"race_medal":0,"score":"10163729851","product_id":100029501,"comment_content":"å½“ä¸€äº›å¬ç€å¾ˆè™šçš„ç†è®ºç”¨äºå®æˆ˜æ—¶ï¼Œå…¶å¨åŠ›æ˜¯å·¨å¤§çš„ï¼Œä¾‹å¦‚ä¿¡æ¯çš„æ­£äº¤æ€§ã€‚","like_count":2,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":474620,"discussion_content":"è¿™ç§ä¿¡æ¯è®ºçš„å†…å®¹åœ¨æœºå™¨å­¦ä¹ ä¸­ç”¨çš„è¿˜æ˜¯æŒºå¤šçš„","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1574738432,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1661704,"avatar":"https://static001.geekbang.org/account/avatar/00/19/5b/08/b0b0db05.jpg","nickname":"ä¸ä¸å†é™©è®°","note":"","ucode":"A43829E454C067","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":51147,"discussion_content":"ä¸å¥½æ„æ€ï¼Œè¯„è®ºä¸²é¢‘é“äº†","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1573817408,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1576240,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLlibCGekRp9bxJ3dGfOWghhNVdF771ejzwqKnicKFBpmGuutwNGF3HGZz7KEEz2mdvPckibReRsVtDw/132","nickname":"Geek_e6159b","note":"","ucode":"0684569F9B114D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":337949,"discussion_content":"ä½ ä¸æ˜¯è®¾è®¡æ¨¡å¼çš„åŒå­¦å—ï¼Ÿ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609133591,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115115,"user_name":"æ—å½¦","can_delete":false,"product_type":"c1","uid":1032615,"ip_address":"","ucode":"5094CC6ED7B40C","user_header":"https://static001.geekbang.org/account/avatar/00/0f/c1/a7/5e66d331.jpg","comment_is_top":false,"comment_ctime":1563497528,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10153432120","product_id":100029501,"comment_content":"try...except...é‚£éƒ¨åˆ†ä»£ç æ²¡æœ‰å…³é—­æ¸¸æ ‡çš„è¯­å¥ã€‚å…³é—­æ•°æ®åº“è¿æ¥çš„è¯­å¥æ‰§è¡Œæ—¶ä¸€èˆ¬éƒ½ä¼šå…ˆéšå¼å…³é—­å¹¶é‡Šæ”¾å½“å‰çš„æ¸¸æ ‡å—ï¼Ÿ","like_count":2},{"had_liked":false,"id":115103,"user_name":"ä¸€æ­¥","can_delete":false,"product_type":"c1","uid":1005391,"ip_address":"","ucode":"73CEA468CE70C3","user_header":"https://static001.geekbang.org/account/avatar/00/0f/57/4f/6fb51ff1.jpg","comment_is_top":false,"comment_ctime":1563495803,"is_pvip":true,"discussion_count":0,"race_medal":1,"score":"10153430395","product_id":100029501,"comment_content":"çœ‹ç›®å½•ï¼Œæˆ‘ä»¥ä¸ºåˆ° SQLåˆ·é¢˜äº†ã€‚ã€‚ã€‚","like_count":2},{"had_liked":false,"id":256346,"user_name":"bahao","can_delete":false,"product_type":"c1","uid":2061470,"ip_address":"","ucode":"3D99BE6BA2F3AF","user_header":"https://static001.geekbang.org/account/avatar/00/1f/74/9e/31872e2c.jpg","comment_is_top":false,"comment_ctime":1603605444,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5898572740","product_id":100029501,"comment_content":"çœ‹æ¥è¦è¡¥ä¹ pythonäº† æ‰§è¡Œsqlå¤ªæ–¹ä¾¿äº†","like_count":1},{"had_liked":false,"id":163662,"user_name":"taoist","can_delete":false,"product_type":"c1","uid":1195004,"ip_address":"","ucode":"D70AFE25CD8F10","user_header":"https://static001.geekbang.org/account/avatar/00/12/3b/fc/04a75cd0.jpg","comment_is_top":false,"comment_ctime":1576762875,"is_pvip":true,"replies":[{"id":"62649","content":"æ­£ç¡®","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577081117,"ip_address":"","comment_id":163662,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5871730171","product_id":100029501,"comment_content":"import pymysql<br>import pymysql.cursors<br><br><br>cfg = {<br>    &quot;host&quot;: &quot;127.0.0.1&quot;,<br>    &quot;user&quot;: &quot;root&quot;,<br>    &quot;passwd&quot;: &quot;toor&quot;,<br>    &quot;database&quot;: &quot;test&quot;,<br>    &quot;charset&quot;: &quot;utf8mb4&quot;,<br>    &quot;autocommit&quot;: True,<br>    &#39;cursorclass&#39;:pymysql.cursors.DictCursor<br>}<br><br>db_con = pymysql.connect(**cfg)<br><br>try:<br>    with db_con.cursor() as cur:<br>        cur.execute(&quot;SELECT id,name,hp_max FROM heros WHERE hp_max &gt; 6000 &quot;)<br>        res = cur.fetchall()<br><br>    for i in res:<br>        print(i)<br>finally:<br>    db_con.close()<br><br>","like_count":1,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":478494,"discussion_content":"æ­£ç¡®","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577081117,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116112,"user_name":"å¤§æ–Œ","can_delete":false,"product_type":"c1","uid":1002183,"ip_address":"","ucode":"1434C2B0A29135","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4a/c7/ec18673b.jpg","comment_is_top":false,"comment_ctime":1563787654,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5858754950","product_id":100029501,"comment_content":"pythonè¿æ¥mysqlæ—¶æŠ¥é”™ã€mysql.connector.errors.NotSupportedError: Authentication plugin &#39;caching_sha2_password&#39; is not supportã€‘ã€‚<br>åŸå› æ˜¯ï¼šmysql8.0.11ä½¿ç”¨äº†Use Strong Password Encryption for Authenticationå³å¼ºå¯†ç åŠ å¯†ã€‚<br>é€šå¸¸çš„å¤„ç†æ–¹æ³•æ˜¯ï¼šé‡è£…mysqlã€è£…æ›´ä½ç‰ˆæœ¬çš„æˆ–è€…å°†Use Strong Password Encryption for Authenticationæ”¹ä¸ºUse Legacy Authentication Method(åœ¨Authentication Methodä¸­æ”¹)ã€‘<br>è¿˜æœ‰ä¸€ç§æ›´å¥½çš„æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯ä½¿ç”¨ã€pymysqlã€‘åº“æ¥è¿æ¥ï¼Œä»£ç å¦‚ä¸‹ï¼š<br>    db_host = &quot;localhost&quot;<br>    db_username = &quot;root&quot;<br>    db_password = &quot;123456&quot;<br>    db_name = &quot;database_name&quot;<br>    conn = pymysql.connect(<br>        host=db_host,<br>        user=db_username,<br>        passwd=db_password,<br>        database=db_name,<br>    )","like_count":1},{"had_liked":false,"id":115154,"user_name":"mickey","can_delete":false,"product_type":"c1","uid":1051663,"ip_address":"","ucode":"8B490C2DDE4010","user_header":"https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg","comment_is_top":false,"comment_ctime":1563501247,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5858468543","product_id":100029501,"comment_content":"sql = &#39;DELETE FROM player WHERE player_name = &quot; çº¦ç¿°-ç§‘æ—æ–¯ &quot;&#39;","like_count":1},{"had_liked":false,"id":115120,"user_name":"æå®¢é…±","can_delete":false,"product_type":"c1","uid":1553524,"ip_address":"","ucode":"A1206B584604C1","user_header":"","comment_is_top":false,"comment_ctime":1563497786,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5858465082","product_id":100029501,"comment_content":"åˆ é™¤çº¦ç¿°Â·ç§‘æ—æ–¯è¿™ä¸ªçƒå‘˜çš„æ•°æ®ä»£ç é‡Œé¢ï¼Œexcuteé‚£ä¸ªå‡½æ•°ç¼ºå°‘äº†valçš„å‚æ•°å§ï¼Ÿ","like_count":1},{"had_liked":false,"id":356934,"user_name":"å¹´å°‘æŒ½æ»‘ç¨½ä¸–æ— åŒ","can_delete":false,"product_type":"c1","uid":2962599,"ip_address":"å››å·","ucode":"793DCBDE25A07B","user_header":"https://static001.geekbang.org/account/avatar/00/2d/34/a7/52c4ea60.jpg","comment_is_top":false,"comment_ctime":1662709424,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1662709424","product_id":100029501,"comment_content":"# è¯·ä½ ä½¿ç”¨ Python å¯¹ heros è¡¨ä¸­æœ€å¤§ç”Ÿå‘½å€¼å¤§äº 6000 çš„è‹±é›„è¿›è¡ŒæŸ¥è¯¢ï¼Œå¹¶ä¸”è¾“å‡ºç›¸åº”çš„å±æ€§å€¼ã€‚<br># -*- coding: UTF-8 -*-<br>import mysql.connector<br><br># æ‰“å¼€æ•°æ®åº“è¿æ¥<br>db = mysql.connector.connect(<br>    port=3308,<br>    host=&quot;localhost&quot;,<br>    user=&quot;root&quot;,<br>    passwd=&quot;password&quot;,  # å†™ä¸Šä½ çš„æ•°æ®åº“å¯†ç <br>    database=&#39;honor_of_kings&#39;,<br>    auth_plugin=&#39;mysql_native_password&#39;<br>)<br># è·å–æ“ä½œæ¸¸æ ‡<br>cursor = db.cursor()<br><br>sql = &#39;SELECT name, hp_max FROM heros WHERE hp_max&gt;6000&#39;<br>cursor.execute(sql)<br>data = cursor.fetchall()<br>for each_player in data:<br>    print(each_player)<br><br># å…³é—­æ¸¸æ ‡&amp;æ•°æ®åº“è¿æ¥<br>cursor.close()<br>db.close()<br>","like_count":0},{"had_liked":false,"id":345477,"user_name":"Geek_dc1862","can_delete":false,"product_type":"c1","uid":1888016,"ip_address":"","ucode":"DC3B41D6BC89D4","user_header":"","comment_is_top":false,"comment_ctime":1652320220,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1652320220","product_id":100029501,"comment_content":"å¦‚æœMySQLç‰ˆæœ¬è¿‡é«˜ï¼Œæ¯”å¦‚8.0.29<br>è¿æ¥æ—¶ä¼šæŠ¥é”™ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹è¯­å¥è§£å†³:<br>æŸ¥çœ‹å…¨å±€å‚æ•°çš„å€¼:<br>show global variables like &#39;authentication_policy&#39;;<br>show global variables like &#39;default_authentication_plugin&#39;;<br>åˆ‡æ¢å…¨å±€å‚æ•°çš„å€¼ï¼š<br>set global authentication_policy=&#39;*,,&#39;;<br>ä¿®æ”¹rootç”¨æˆ·çš„åŠ å¯†æ–¹å¼ï¼š<br>ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;your_pwd&#39;;<br>æŸ¥è¯¢åŠ å¯†æ–¹å¼ï¼š<br>SELECT user,host,plugin from mysql.user;","like_count":0},{"had_liked":false,"id":322057,"user_name":"å°æŸ’Â·ä»£è´­","can_delete":false,"product_type":"c1","uid":2762791,"ip_address":"","ucode":"94C67F0203BAF2","user_header":"https://static001.geekbang.org/account/avatar/00/2a/28/27/6246dc0d.jpg","comment_is_top":false,"comment_ctime":1637150187,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1637150187","product_id":100029501,"comment_content":"import mysql.connector<br><br>db = mysql.connector.connect(<br>    host=&quot;localhost&quot;,<br>    user=&quot;root&quot;,<br>    passwd=&quot;&quot;,<br>    database=&quot;&quot;,<br>    auth_plugin=&quot;mysql_native_password&quot;<br>)<br>cursor = db.cursor()<br><br>sql = &quot;SELECT * FROM heros WHERE hp_max &gt; 6000&quot;<br><br>cursor.execute(sql)<br>data = cursor.fetchall()<br>for each_heros in data:<br>    print(each_heros)<br>cursor.close()<br>db.close()","like_count":0},{"had_liked":false,"id":303829,"user_name":"ç‰›å“¥","can_delete":false,"product_type":"c1","uid":2565173,"ip_address":"","ucode":"27D8619DC2B946","user_header":"https://static001.geekbang.org/account/avatar/00/27/24/35/03603e95.jpg","comment_is_top":false,"comment_ctime":1627015373,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1627015373","product_id":100029501,"comment_content":"<br>sql = &#39;DELETE FROM player WHERE player_name = %s&#39;<br>val = (&quot;çº¦ç¿°-ç§‘æ—æ–¯&quot;,)<br>cursor.execute(sql, val)<br>db.commit()<br>print(cursor.rowcount, &quot;è®°å½•åˆ é™¤æˆåŠŸã€‚&quot;)<br>valé‚£é‡Œâ€œçº¦ç¿°-ç§‘æ—æ–¯â€åè¾¹ä¸ºä½•æ¥é€—å·ï¼Ÿæµ‹è¯•äº†ä¸åŠ é€—å·å°±æŠ¥è¯­æ³•é”™è¯¯ã€‚","like_count":0},{"had_liked":false,"id":296013,"user_name":"å¼ é™","can_delete":false,"product_type":"c1","uid":2640790,"ip_address":"","ucode":"C3586FA4E0FD4A","user_header":"","comment_is_top":false,"comment_ctime":1622705190,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1622705190","product_id":100029501,"comment_content":"import mysql.connector<br># æ‰“å¼€æ•°æ®åº“è¿æ¥<br>db = mysql.connector.connect(<br>    host=&quot;xx.xx.xx.xx&quot;, port=&quot;3306&quot;,<br>    user=&quot;xx&quot;,<br>    passwd=&quot;xx&quot;,<br>    database=&#39;xx&#39;,<br>    auth_plugin=&#39;mysql_native_password&#39;)<br># è·å–æ“ä½œæ¸¸æ ‡<br>cursor = db.cursor()<br>SQL=&quot;SELECT åˆ—å FROM è¡¨å where æ¡ä»¶&quot;<br># æ‰§è¡ŒSQLè¯­å¥<br>cursor.execute(SQL)<br># è·å–ä¸€æ¡æ•°æ®<br>data = cursor.fetchone()<br>print(data)<br># å…³é—­æ¸¸æ ‡&amp;æ•°æ®åº“è¿æ¥<br>cursor.close()<br>db.close()<br><br>ä¸ºä»€ä¹ˆä¼šæŠ¥Unread result found ï¼Œfetchoneï¼ˆï¼‰éœ€è¦å‚æ•°å—æŒ‡å®šè¿”å›å“ªä¸€è¡Œï¼Ÿ","like_count":0},{"had_liked":false,"id":201074,"user_name":"Venn_p","can_delete":false,"product_type":"c1","uid":1341400,"ip_address":"","ucode":"8AB530B8EEE4CF","user_header":"https://static001.geekbang.org/account/avatar/00/14/77/d8/0e64251b.jpg","comment_is_top":false,"comment_ctime":1585712222,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1585712222","product_id":100029501,"comment_content":"è€å¸ˆæ‚¨å¥½ æœ‰ä¸ªé—®é¢˜è¯·æ•™ä¸‹ã€‚æ‰§è¡Œåˆ é™¤åï¼Œå†æ‰§è¡Œåˆ é™¤ä¸ºä»€ä¹ˆæ²¡æœ‰æŠ¥é”™ã€‚æ˜¯è¦è‡ªå·±åŠ ä»£ç åˆ¤æ–­å—","like_count":0},{"had_liked":false,"id":185730,"user_name":"é©¬å‰è¾‰","can_delete":false,"product_type":"c1","uid":1854657,"ip_address":"","ucode":"4265EFBD2BB7BD","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKVIjh4T1akib5iav5IIGjXB9x98p9Y80STRcwpMDqxfGLrMvHamxlxEqLMTpiayWFWSNpBcbGwkRjRw/132","comment_is_top":false,"comment_ctime":1583672381,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1583672381","product_id":100029501,"comment_content":"# å»ºè®®å§æ•°æ®åº“é“¾æ¥ä¿¡æ¯å†™åˆ°é…ç½®æ–‡ä»¶é‡Œï¼Œé˜²æ­¢å¯†ç æ³„éœ²ã€‚<br>è€å¸ˆï¼Œè¿™ä¸ª jsonæ–‡ä»¶åº”è¯¥æ€ä¹ˆå†™ï¼Ÿ","like_count":0},{"had_liked":false,"id":169304,"user_name":"ğŸ¤ªHappyJoo","can_delete":false,"product_type":"c1","uid":1234591,"ip_address":"","ucode":"96E1858F06BABA","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/9f/0213e8a0.jpg","comment_is_top":false,"comment_ctime":1578311172,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1578311172","product_id":100029501,"comment_content":"è¿˜æ˜¯æƒ³çŸ¥é“ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨æ•°æ®åº“ç®¡ç†å·¥å…·å‘¢ï¼Ÿå¥½åƒçœäº†å¾ˆå¤šæ­¥éª¤ï¼Œç®€å•çš„update ä¸€æ¡æ•°æ®ï¼Œä¸ºä»€ä¹ˆè¦ç”¨pythonå†™é‚£ä¹ˆå¤šè¡Œä»£ç å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":2815900,"avatar":"https://static001.geekbang.org/account/avatar/00/2a/f7/9c/69c5c5dc.jpg","nickname":"è¶Šé”‹åˆ©","note":"","ucode":"63E9E3F3C7D53D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":409384,"discussion_content":"å†™ä»£ç å½“ç„¶æ˜¯ä¸ºäº†è‡ªåŠ¨åŒ–å•Š","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1635428637,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":130968,"user_name":"xcoder","can_delete":false,"product_type":"c1","uid":1207135,"ip_address":"","ucode":"2C70ED36B4AC8E","user_header":"https://static001.geekbang.org/account/avatar/00/12/6b/5f/cec1e980.jpg","comment_is_top":false,"comment_ctime":1567585765,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1567585765","product_id":100029501,"comment_content":"è¯·é—®å„è·¯åœ¨çº¿è‹±é›„ï¼Œå®‰è£…mysql-connector-python-8.0.17,é‚£ä¹ˆå¯¹åº”çš„è¿˜æ˜¯é‡æ–°å®‰è£…ä¸€ä¸ª8.0.17çš„mysqläº†ï¼Ÿè¿™ä¸ªæœ‰å¯¹è€ç‰ˆæœ¬ï¼Œæ¯”å¦‚5.6çš„mysqlçš„æ”¯æŒå—ï¼Ÿæ‰¾äº†åŠå¤©æ‰¾ä¸åˆ°ï¼Œåªæœ‰8.0ç‰ˆæœ¬çš„mysqlæ‰æœ‰çš„mysql-connector-pythonå®‰è£…åŒ…å—?","like_count":0,"discussions":[{"author":{"id":1474214,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg","nickname":"éª‘è¡Œçš„æŒæŸœJ","note":"","ucode":"3163102651C653","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":7744,"discussion_content":"æˆ‘æœåˆ°æœ‰è¯´æ˜¯æ”¯æŒMySQLä»¥ä¸‹ç‰ˆæœ¬çš„ï¼š\n8.0, 5.7, 5.6, 5.5","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1567658488,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126462,"user_name":"èƒ¡","can_delete":false,"product_type":"c1","uid":1353712,"ip_address":"","ucode":"3917AFED7701CA","user_header":"https://static001.geekbang.org/account/avatar/00/14/a7/f0/e3212f18.jpg","comment_is_top":false,"comment_ctime":1566388860,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1566388860","product_id":100029501,"comment_content":"-- &gt;=2.08 æ’å…¥çš„æ•°æ®æ˜¾ç¤ºä¸å‡ºæ¥<br><br>__author__ = &#39;Administrator&#39;<br><br># -*- coding: UTF-8 -*-<br>import traceback<br>import json<br>import mysql.connector<br># æ‰“å¼€æ•°æ®åº“è¿æ¥<br>db = mysql.connector.connect(<br>       host=&quot;localhost&quot;,<br>       user=&quot;root&quot;,<br>       passwd=&quot;hjf@2019&quot;, # å†™ä¸Šä½ çš„æ•°æ®åº“å¯†ç <br>       database=&#39;nba&#39;,<br>       auth_plugin=&#39;mysql_native_password&#39;<br>)<br># è·å–æ“ä½œæ¸¸æ ‡<br>cursor = db.cursor()<br># æ‰§è¡Œ SQL è¯­å¥<br>#cursor.execute(&quot;SELECT VERSION()&quot;)<br># è·å–ä¸€æ¡æ•°æ®<br>#data = cursor.fetchone()<br>#print(&quot;MySQL ç‰ˆæœ¬: %s &quot; % data)<br># å…³é—­æ¸¸æ ‡ &amp; æ•°æ®åº“è¿æ¥<br><br><br><br># æ’å…¥æ–°çƒå‘˜<br><br>#sql = &quot;INSERT INTO player (team_id,player_id,player_name,height) VALUES (%s, %s, %s,%s)&quot;<br>#val = (1003, 10038,&quot; çº¦ç¿° - ç§‘æ—æ–¯ &quot;, 2.08)<br>#cursor.execute(sql,val)<br>#db.commit()<br>#print(cursor.rowcount, &quot; è®°å½•æ’å…¥æˆåŠŸã€‚&quot;)<br><br><br># æŸ¥è¯¢èº«é«˜å¤§äºç­‰äº 2.08 çš„çƒå‘˜<br>sql = &#39;SELECT team_id, player_id, player_name, height FROM player WHERE height &gt;=2.08&#39;<br>cursor.execute(sql)<br>data = cursor.fetchall()<br>for each_player in data:<br>  print(each_player)<br><br><br><br>cursor.close()<br>db.close()","like_count":0},{"had_liked":false,"id":126449,"user_name":"èƒ¡","can_delete":false,"product_type":"c1","uid":1353712,"ip_address":"","ucode":"3917AFED7701CA","user_header":"https://static001.geekbang.org/account/avatar/00/14/a7/f0/e3212f18.jpg","comment_is_top":false,"comment_ctime":1566387468,"is_pvip":false,"replies":[{"id":"63787","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577541900,"ip_address":"","comment_id":126449,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566387468","product_id":100029501,"comment_content":"__author__ = &#39;Administrator&#39;<br><br># -*- coding: UTF-8 -*-<br>import traceback<br>import json<br>import mysql.connector<br># æ‰“å¼€æ•°æ®åº“è¿æ¥<br>db = mysql.connector.connect(<br>       host=&quot;localhost&quot;,<br>       user=&quot;root&quot;,<br>       passwd=&quot;hjf@2019&quot;, # å†™ä¸Šä½ çš„æ•°æ®åº“å¯†ç <br>       database=&#39;nba&#39;,<br>       auth_plugin=&#39;mysql_native_password&#39;<br>)<br># è·å–æ“ä½œæ¸¸æ ‡<br>cursor = db.cursor()<br># æ‰§è¡Œ SQL è¯­å¥<br>#cursor.execute(&quot;SELECT VERSION()&quot;)<br># è·å–ä¸€æ¡æ•°æ®<br>#data = cursor.fetchone()<br>#print(&quot;MySQL ç‰ˆæœ¬: %s &quot; % data)<br># å…³é—­æ¸¸æ ‡ &amp; æ•°æ®åº“è¿æ¥<br><br><br><br># æ’å…¥æ–°çƒå‘˜<br><br>sql = &quot;INSERT INTO player (team_id,player_id,player_name,height) VALUES (%s, %s, %s,%s)&quot;<br>val = (1003, 10038,&quot; çº¦ç¿° - ç§‘æ—æ–¯ &quot;, 2.08)<br>cursor.execute(sql,val)<br>db.commit()<br>print(cursor.rowcount, &quot; è®°å½•æ’å…¥æˆåŠŸã€‚&quot;)<br><br>cursor.close()<br>db.close()","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463990,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577541900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126443,"user_name":"èƒ¡","can_delete":false,"product_type":"c1","uid":1353712,"ip_address":"","ucode":"3917AFED7701CA","user_header":"https://static001.geekbang.org/account/avatar/00/14/a7/f0/e3212f18.jpg","comment_is_top":false,"comment_ctime":1566386943,"is_pvip":false,"replies":[{"id":"62754","content":"é»˜è®¤è®¾ç½®çš„æ˜¯é€’å¢çš„ï¼Œå°±ä¸éœ€è¦æŒ‡å®šplayer_id","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577089404,"ip_address":"","comment_id":126443,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1566386943","product_id":100029501,"comment_content":"è€å¸ˆåœ¨æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œæ¼æ‰äº† player_id ?","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":463988,"discussion_content":"é»˜è®¤è®¾ç½®çš„æ˜¯é€’å¢çš„ï¼Œå°±ä¸éœ€è¦æŒ‡å®šplayer_id","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577089404,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117690,"user_name":"å‘æ¡","can_delete":false,"product_type":"c1","uid":1084458,"ip_address":"","ucode":"75853E7B13D8D4","user_header":"https://static001.geekbang.org/account/avatar/00/10/8c/2a/49e0547d.jpg","comment_is_top":false,"comment_ctime":1564111885,"is_pvip":false,"replies":[{"id":"63799","content":"æ„Ÿè°¢åˆ†äº«","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577542199,"ip_address":"","comment_id":117690,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1564111885","product_id":100029501,"comment_content":"ä½¿ç”¨8.0ä»¥ä¸Šç‰ˆæœ¬mysqlçš„åŒå­¦ï¼Œåœ¨è¿æ¥æ•°æ®åº“çš„æ—¶å€™å¯èƒ½ä¼šå—åˆ°quth_pluginä¸æ”¯æŒmysql_native_passwordçš„æŠ¥é”™ï¼Œ<br>å¯ä»¥ç”¨ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;root&#39;;è¯­å¥æŠŠauth_pluginæ”¹æ‰","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":460085,"discussion_content":"æ„Ÿè°¢åˆ†äº«","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577542199,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":116075,"user_name":"Geek_5d805b","can_delete":false,"product_type":"c1","uid":1585504,"ip_address":"","ucode":"23A0EAC120EA9C","user_header":"","comment_is_top":false,"comment_ctime":1563782191,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563782191","product_id":100029501,"comment_content":"è¯·é—®è€å¸ˆå…³äºsqlè¯­å¥ä¸­çš„%så ä½é—®é¢˜ï¼Œå¦‚æœæˆ‘è¦ä¿®æ”¹å¤šé¡¹å€¼å¯å¦ç”¨å˜é‡æ›¿ä»£å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":115896,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1563763058,"is_pvip":false,"replies":[{"id":"63651","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577526455,"ip_address":"","comment_id":115896,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563763058","product_id":100029501,"comment_content":"# -*- coding: UTF-8 -*-<br><br>import mysql.connector<br># æ‰“å¼€æ•°æ®åº“è¿æ¥<br>db = mysql.connector.connect(<br>       host=&quot;localhost&quot;,<br>       user=&quot;root&quot;,<br>       passwd=&quot;root&quot;, # å†™ä¸Šä½ çš„æ•°æ®åº“å¯†ç <br>       database=&#39;test&#39;, <br>       auth_plugin=&#39;mysql_native_password&#39;<br>)<br># è·å–æ“ä½œæ¸¸æ ‡ <br>cursor = db.cursor()<br>sql = &#39;SELECT * FROM heros WHERE hp_max&gt;=6000&#39;<br>cursor.execute(sql)<br>data = cursor.fetchall()<br>for each_hero in data:<br>  print(each_hero)<br>cursor.close()<br>db.close()","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459336,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577526455,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115892,"user_name":"cricket1981","can_delete":false,"product_type":"c1","uid":1001715,"ip_address":"","ucode":"758262F5958DA4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/48/f3/f1034ffd.jpg","comment_is_top":false,"comment_ctime":1563762877,"is_pvip":false,"replies":[{"id":"63652","content":"å¯ä»¥æŸ¥çœ‹ä¸‹ç³»ç»Ÿçš„ç¼–ç è®¾ç½® sys.getdefaultencoding","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577526654,"ip_address":"","comment_id":115892,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563762877","product_id":100029501,"comment_content":"python printè¯­å¥å‡ºæ¥çš„ä¸­æ–‡æ˜¯ä¹±ç è¦æ€ä¹ˆå¤„ç†ï¼Ÿpythonç¨‹åºç¬¬ä¸€è¡ŒåŠ è¿‡ # -*- coding: UTF-8 -*-<br>(10003, u&#39;\\u5b89\\u5fb7\\u70c8-\\u5fb7\\u62c9\\u8499\\u5fb7&#39;, 2.11)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459335,"discussion_content":"å¯ä»¥æŸ¥çœ‹ä¸‹ç³»ç»Ÿçš„ç¼–ç è®¾ç½® sys.getdefaultencoding","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577526654,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115519,"user_name":"åå¤","can_delete":false,"product_type":"c1","uid":1449474,"ip_address":"","ucode":"4D627CFA5A4B82","user_header":"https://static001.geekbang.org/account/avatar/00/16/1e/02/2864e0f2.jpg","comment_is_top":false,"comment_ctime":1563610805,"is_pvip":false,"replies":[{"id":"63663","content":"å—¯ å¯ä»¥pip install mysql-connector-python","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577527356,"ip_address":"","comment_id":115519,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563610805","product_id":100029501,"comment_content":"pip install mysql-connectorä¹‹åè¿æ¥æ•°æ®åº“ä¼šæŠ¥é”™ï¼Œæ›´æ–°åˆ°æœ€æ–°ç‰ˆè¿˜æ˜¯ä¸€æ ·æŠ¥é”™ï¼Œpip install mysql-connector-pythonä¹‹åå¯ä»¥æ­£å¸¸è¿è¡Œã€‚å¤§å®¶å¦‚æœæœ‰é‡åˆ°è¿™ä¸ªé—®é¢˜çš„å¯ä»¥å‚è€ƒ@æ—å½¦-å¹¿å·-æ•°æ®åˆ†æå¸ˆ è¿™ä¸ªåŠæ³•ã€‚","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459142,"discussion_content":"å—¯ å¯ä»¥pip install mysql-connector-python","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577527356,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115406,"user_name":"lmingzhi","can_delete":false,"product_type":"c1","uid":1014489,"ip_address":"","ucode":"72DBAF4FD184AF","user_header":"https://static001.geekbang.org/account/avatar/00/0f/7a/d9/4feb4006.jpg","comment_is_top":false,"comment_ctime":1563581379,"is_pvip":false,"replies":[{"id":"63667","content":"ä¸ç”¨çš„èµ„æºï¼Œå¯ä»¥é‡Šæ”¾æ‰","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577527785,"ip_address":"","comment_id":115406,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563581379","product_id":100029501,"comment_content":"è€å¸ˆï¼Œä½ å¥½ï¼Œæˆ‘ä¸€èˆ¬ä½¿ç”¨SQLAlchemyè¿æ¥æ•°æ®åº“:<br>from sqlalchemy import create_engine<br>db = create_engine(&#39;mysql:&#47;&#47;root@localhost&#47;test_database&#39;)<br>ä¸€èˆ¬å¦‚ä½ åœ¨æ–‡ä¸­æåˆ°çš„è¯å¦‚æœä½¿ç”¨ç»“æŸåï¼Œä¸æƒ³å†æµªè´¹èµ„æºï¼Œéœ€è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459092,"discussion_content":"ä¸ç”¨çš„èµ„æºï¼Œå¯ä»¥é‡Šæ”¾æ‰","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577527785,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115374,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1563546477,"is_pvip":false,"replies":[{"id":"63669","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577527810,"ip_address":"","comment_id":115374,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563546477","product_id":100029501,"comment_content":"æ‰§è¡Œç»“æœ:<br><br><br>(&#39;å¤ä¾¯&#39;, 7350.0)<br>(&#39;é’Ÿæ— è‰³&#39;, 7000.0)<br>(&#39;å¼ é£&#39;, 8341.0)<br>(&#39;ç‰›é­”&#39;, 8476.0)<br>(&#39;å•å¸ƒ&#39;, 7344.0)<br>(&#39;äºšç‘Ÿ&#39;, 8050.0)<br>(&#39;èŠˆæœˆ&#39;, 6164.0)<br>(&#39;ç¨‹å’¬é‡‘&#39;, 8611.0)<br>(&#39;å»‰é¢‡&#39;, 9328.0)<br>(&#39;ä¸œçš‡å¤ªä¸€&#39;, 7669.0)<br>(&#39;åº„å‘¨&#39;, 8149.0)<br>(&#39;å¤ªä¹™çœŸäºº&#39;, 6835.0)<br>(&#39;ç™½èµ·&#39;, 8638.0)<br>(&#39;é›…å…¸å¨œ&#39;, 6264.0)<br>(&#39;åˆ˜é‚¦&#39;, 8073.0)<br>(&#39;åˆ˜ç¦…&#39;, 8581.0)<br>(&#39;å¢¨å­&#39;, 7176.0)<br>(&#39;é¡¹ç¾½&#39;, 8057.0)<br>(&#39;å…³ç¾½&#39;, 7107.0)<br>(&#39;å­™å°šé¦™&#39;, 6014.0)<br>(&#39;éœ²å¨œ&#39;, 6612.0)<br>(&#39;ä¸çŸ¥ç«èˆ&#39;, 6014.0)<br>(&#39;å­™è†‘&#39;, 6811.0)<br>(&#39;é«˜æ¸ç¦»&#39;, 6165.0)<br>(&#39;æ‰é¹Š&#39;, 6703.0)<br>(&#39;é’Ÿé¦—&#39;, 6280.0)<br>(&#39;é¬¼è°·å­&#39;, 7107.0)<br>(&#39;èµµäº‘&#39;, 6732.0)<br>(&#39;æ©˜çŸ³äº¬&#39;, 7000.0)<br>(&#39;æ¨æˆ¬&#39;, 7420.0)<br>(&#39;è¾¾æ‘©&#39;, 7140.0)<br>(&#39;å­™æ‚Ÿç©º&#39;, 6585.0)<br>(&#39;åˆ˜å¤‡&#39;, 6900.0)<br>(&#39;æ›¹æ“&#39;, 7473.0)<br>(&#39;å…¸éŸ¦&#39;, 7516.0)<br>(&#39;å®«æœ¬æ­¦è—&#39;, 6210.0)<br>(&#39;è€å¤«å­&#39;, 7155.0)<br>(&#39;å“ªå’&#39;, 7268.0)<br>(&#39;å¨œå¯éœ²éœ²&#39;, 6205.0)<br>(&#39;å…°é™µç‹&#39;, 6232.0)<br>(&#39;é“ &#39;, 6700.0)","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459080,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577527810,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115373,"user_name":"ABC","can_delete":false,"product_type":"c1","uid":1054958,"ip_address":"","ucode":"7501AD9C0C4A70","user_header":"https://static001.geekbang.org/account/avatar/00/10/18/ee/a1ed60d1.jpg","comment_is_top":false,"comment_ctime":1563546437,"is_pvip":false,"replies":[{"id":"63670","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577527821,"ip_address":"","comment_id":115373,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563546437","product_id":100029501,"comment_content":"ç»ƒä¹ ç­”æ¡ˆ:<br><br><br># -*- coding: UTF-8 -*-<br>import mysql.connector<br><br>db = mysql.connector.connect(<br>       host=&quot;localhost&quot;,<br>       user=&quot;root&quot;,<br>       passwd=&quot;123456&quot;, <br>       database=&#39;geektime-sql&#39;, <br>       auth_plugin=&#39;mysql_native_password&#39;<br>)<br><br>cursor = db.cursor()<br>try:<br>  sql = &#39;SELECT  name,hp_max from heros where hp_max&gt;6000;&#39;<br>  cursor.execute(sql)<br>  data = cursor.fetchall()<br>  for each_player in data:<br>    print(each_player)<br>finally:<br>  cursor.close()<br>  db.close()","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459079,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577527821,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115369,"user_name":"è°·å¾„","can_delete":false,"product_type":"c1","uid":1019965,"ip_address":"","ucode":"D3462BF93E7A1B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/90/3d/7f5c1b37.jpg","comment_is_top":false,"comment_ctime":1563545279,"is_pvip":false,"replies":[{"id":"63671","content":"MySQLå¯†ç éªŒè¯æ–¹å¼é—®é¢˜","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577527863,"ip_address":"","comment_id":115369,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563545279","product_id":100029501,"comment_content":"auth_plugin=&#39;mysql_native_password&#39; è¿™å¥æŠ¥é”™ï¼Œæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459077,"discussion_content":"MySQLå¯†ç éªŒè¯æ–¹å¼é—®é¢˜","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577527863,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115313,"user_name":"åå¤","can_delete":false,"product_type":"c1","uid":1449474,"ip_address":"","ucode":"4D627CFA5A4B82","user_header":"https://static001.geekbang.org/account/avatar/00/16/1e/02/2864e0f2.jpg","comment_is_top":false,"comment_ctime":1563529567,"is_pvip":false,"replies":[{"id":"63673","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577527900,"ip_address":"","comment_id":115313,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563529567","product_id":100029501,"comment_content":"(&#39;å¤ä¾¯æƒ‡&#39;, 7350.0, 1746.0, 321.0, 397.0)<br>(&#39;é’Ÿæ— è‰³&#39;, 7000.0, 1760.0, 318.0, 409.0)<br>(&#39;å¼ é£&#39;, 8341.0, 100.0, 301.0, 504.0)<br>(&#39;ç‰›é­”&#39;, 8476.0, 1926.0, 273.0, 394.0)<br>(&#39;å•å¸ƒ&#39;, 7344.0, 0.0, 343.0, 390.0)<br>(&#39;äºšç‘Ÿ&#39;, 8050.0, 0.0, 346.0, 400.0)<br>(&#39;èŠˆæœˆ&#39;, 6164.0, 100.0, 289.0, 361.0)<br>(&#39;ç¨‹å’¬é‡‘&#39;, 8611.0, 0.0, 316.0, 504.0)<br>(&#39;å»‰é¢‡&#39;, 9328.0, 1708.0, 286.0, 514.0)<br>(&#39;ä¸œçš‡å¤ªä¸€&#39;, 7669.0, 1926.0, 286.0, 360.0)<br>(&#39;åº„å‘¨&#39;, 8149.0, 1694.0, 297.0, 497.0)<br>(&#39;å¤ªä¹™çœŸäºº&#39;, 6835.0, 1680.0, 284.0, 396.0)<br>(&#39;ç™½èµ·&#39;, 8638.0, 1666.0, 288.0, 430.0)<br>(&#39;é›…å…¸å¨œ&#39;, 6264.0, 1732.0, 327.0, 418.0)<br>(&#39;åˆ˜é‚¦&#39;, 8073.0, 1940.0, 302.0, 504.0)<br>(&#39;åˆ˜ç¦…&#39;, 8581.0, 1694.0, 295.0, 459.0)<br>(&#39;å¢¨å­&#39;, 7176.0, 1722.0, 328.0, 475.0)<br>(&#39;é¡¹ç¾½&#39;, 8057.0, 1694.0, 306.0, 494.0)<br>(&#39;å…³ç¾½&#39;, 7107.0, 10.0, 343.0, 386.0)<br>(&#39;å­™å°šé¦™&#39;, 6014.0, 1756.0, 411.0, 346.0)<br>(&#39;éœ²å¨œ&#39;, 6612.0, 1836.0, 335.0, 375.0)<br>(&#39;ä¸çŸ¥ç«èˆ&#39;, 6014.0, 200.0, 293.0, 336.0)<br>(&#39;å­™è†‘&#39;, 6811.0, 1926.0, 328.0, 413.0)<br>(&#39;é«˜æ¸ç¦»&#39;, 6165.0, 1988.0, 290.0, 343.0)<br>(&#39;æ‰é¹Š&#39;, 6703.0, 2016.0, 309.0, 374.0)<br>(&#39;é’Ÿé¦—&#39;, 6280.0, 1988.0, 278.0, 390.0)<br>(&#39;é¬¼è°·å­&#39;, 7107.0, 1808.0, 297.0, 394.0)<br>(&#39;èµµäº‘&#39;, 6732.0, 1760.0, 380.0, 394.0)<br>(&#39;æ©˜çŸ³äº¬&#39;, 7000.0, 0.0, 347.0, 392.0)<br>(&#39;æ¨æˆ¬&#39;, 7420.0, 1694.0, 325.0, 428.0)<br>(&#39;è¾¾æ‘©&#39;, 7140.0, 1694.0, 355.0, 415.0)<br>(&#39;å­™æ‚Ÿç©º&#39;, 6585.0, 1760.0, 349.0, 385.0)<br>(&#39;åˆ˜å¤‡&#39;, 6900.0, 1742.0, 363.0, 381.0)<br>(&#39;æ›¹æ“&#39;, 7473.0, 0.0, 361.0, 371.0)<br>(&#39;å…¸éŸ¦&#39;, 7516.0, 1774.0, 345.0, 402.0)<br>(&#39;å®«æœ¬æ­¦è—&#39;, 6210.0, 0.0, 330.0, 391.0)<br>(&#39;è€å¤«å­&#39;, 7155.0, 5.0, 329.0, 409.0)<br>(&#39;å“ªå’&#39;, 7268.0, 1808.0, 320.0, 408.0)<br>(&#39;å¨œå¯éœ²éœ²&#39;, 6205.0, 1808.0, 385.0, 359.0)<br>(&#39;å…°é™µç‹&#39;, 6232.0, 1822.0, 388.0, 342.0)<br>(&#39;é“ &#39;, 6700.0, 1784.0, 328.0, 388.0)<br>41  æŸ¥è¯¢æˆåŠŸã€‚","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459052,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577527900,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115312,"user_name":"åå¤","can_delete":false,"product_type":"c1","uid":1449474,"ip_address":"","ucode":"4D627CFA5A4B82","user_header":"https://static001.geekbang.org/account/avatar/00/16/1e/02/2864e0f2.jpg","comment_is_top":false,"comment_ctime":1563529556,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563529556","product_id":100029501,"comment_content":"ç”¨mysql-connectorä¸€ç›´æŠ¥é”™ï¼Œæ›´æ–°äº†ä¹Ÿä¸è¡Œï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚ç„¶åå°±ç”¨äº†pymysqlï¼Œä»£ç å¤§åŒå°å¼‚ã€‚<br>import pymysql<br>import traceback<br>conn = pymysql.connect(host=&#39;localhost&#39;,user=&#39;root&#39;,passwd=&#39;123456789&#39;,db=&#39;db_mysql_2019&#39;,port=3306,charset=&#39;utf8&#39;)<br>cursor = conn.cursor()<br>try:<br>    sql = &quot;SELECT name, hp_max, mp_max, attack_max, defense_max FROM heros WHERE hp_max &gt; 6000&quot;<br>    cursor.execute(sql)<br>    data = cursor.fetchall()<br>    for each_hero in data:<br>        print(each_hero)<br>    conn.commit()<br>    print(cursor.rowcount, &quot; æŸ¥è¯¢æˆåŠŸã€‚&quot;)<br>except Exception as e:<br>    traceback.print_exc()<br>    conn.rollback()<br>finally:<br>    cursor.close()<br>    conn.close()","like_count":0},{"had_liked":false,"id":115289,"user_name":"åå¤","can_delete":false,"product_type":"c1","uid":1449474,"ip_address":"","ucode":"4D627CFA5A4B82","user_header":"https://static001.geekbang.org/account/avatar/00/16/1e/02/2864e0f2.jpg","comment_is_top":false,"comment_ctime":1563525087,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1563525087","product_id":100029501,"comment_content":"å®‰è£…äº†æ›´æ–°è¿˜æ˜¯ä¼šæŠ¥åŒæ ·çš„é”™ã€‚macï¼Œjupyterã€‚","like_count":0},{"had_liked":false,"id":115200,"user_name":"è®¸ç«¥ç«¥","can_delete":false,"product_type":"c1","uid":1003005,"ip_address":"","ucode":"4B799C0C6BC678","user_header":"https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg","comment_is_top":false,"comment_ctime":1563506469,"is_pvip":false,"replies":[{"id":"63677","content":"å“ˆå“ˆ èµä¸‹éƒ½ç†è§£çš„åŒå­¦","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577527956,"ip_address":"","comment_id":115200,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1563506469","product_id":100029501,"comment_content":"è€å¸ˆä½ å¥½ï¼Œæˆ‘è§‰å¾—è¿™ä¸€èŠ‚è®²å¾—æœ‰ç‚¹å¤ªæµ…äº†ã€‚","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":459006,"discussion_content":"å“ˆå“ˆ èµä¸‹éƒ½ç†è§£çš„åŒå­¦","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577527956,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1136904,"avatar":"https://static001.geekbang.org/account/avatar/00/11/59/08/e33bfa11.jpg","nickname":"91ã€æ´²å…ˆç”Ÿ","note":"","ucode":"285C552078E192","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":2360,"discussion_content":"ç†è§£ä¸€ä¸‹ï¼Œæ°´ç‚¹é’±ä¸å®¹æ˜“å“ˆï¼Œ\nsqlå°±å†™sqlï¼Œè¿˜å†™äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè¿˜æœ‹å‹æ“ä½œmysqlï¼Œå†™å°±å†™å‘—ï¼Œä¸ºä»€ä¹ˆå†™å‡ºæ¥ä¸€ç§æ²¡ä¸œè¥¿å†™ç™¾åº¦ç²˜è´´è¿‡æ¥å‡‘æ•°çš„æ„Ÿè§‰ï¼Œæä¸æ‡‚","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1563516097,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":115133,"user_name":"giteebravo","can_delete":false,"product_type":"c1","uid":1005290,"ip_address":"","ucode":"C087E8D6B5A98B","user_header":"https://static001.geekbang.org/account/avatar/00/0f/56/ea/32608c44.jpg","comment_is_top":false,"comment_ctime":1563498615,"is_pvip":false,"discussion_count":0,"race_medal":1,"score":"1563498615","product_id":100029501,"comment_content":"1ã€æ¯æ¬¡ä¿®æ”¹æ•°æ®åº“ï¼ˆæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰éƒ½è¦ commit å¤ªéº»çƒ¦äº†ï¼›<br>2ã€å¯¼å…¥çš„ traceback åŒ…æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ","like_count":0},{"had_liked":false,"id":115107,"user_name":"ack","can_delete":false,"product_type":"c1","uid":1440912,"ip_address":"","ucode":"69CA1233EEA8E2","user_header":"https://static001.geekbang.org/account/avatar/00/15/fc/90/c9df0459.jpg","comment_is_top":false,"comment_ctime":1563496227,"is_pvip":false,"replies":[{"id":"63887","content":"Good Job","user_name":"ä½œè€…å›å¤","user_name_real":"cy","uid":"1306094","ctime":1577603419,"ip_address":"","comment_id":115107,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1563496227","product_id":100029501,"comment_content":"# -*- coding: UTF-8 -*-<br>import mysql.connector<br><br># æ‰“å¼€æ•°æ®åº“è¿æ¥<br>db = mysql.connector.connect(<br>    host=&quot;localhost&quot;,<br>    user=&quot;user&quot;,<br>    passwd=&quot;12345&quot;,<br>    database=&#39;test&#39;,<br>    auth_plugin=&#39;mysql_native_password&#39;<br>)<br># è·å–æ“ä½œæ¸¸æ ‡<br>cursor = db.cursor()<br># æ‰§è¡Œ SQL è¯­å¥<br>cursor.execute(&quot;SELECT * FROM heros WHERE hp_max&gt;6000&quot;)<br>attr = cursor.description<br>attrNum = len(attr)<br>for i in range(attrNum):<br>    print attr[i][0],<br>print  &quot;\\n&quot;<br># è·å–æ•°æ®<br>data = cursor.fetchall()<br>for row in data:<br>    for col in row:<br>        print col,<br>    print &quot;\\n&quot;<br># å…³é—­æ¸¸æ ‡ &amp; æ•°æ®åº“è¿æ¥<br>cursor.close()<br>db.close()","like_count":0,"discussions":[{"author":{"id":1306094,"avatar":"https://static001.geekbang.org/account/avatar/00/13/ed/ee/c4779b67.jpg","nickname":"cy","note":"","ucode":"50D653399A31F6","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":458968,"discussion_content":"Good Job","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1577603419,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]}]}