{"id":85332,"title":"03 | Auto Layout 是怎么进行自动布局的，性能如何？","content":"<p>你好，我是戴铭。今天我来跟你聊下 Auto Layout 。</p><p>Auto Layout ，是苹果公司提供的一个基于约束布局，动态计算视图大小和位置的库，并且已经集成到了 Xcode 开发环境里。</p><p>在引入 Auto Layout 这种自动布局方式之前，iOS 开发都是采用手动布局的方式。而手动布局的方式，原始落后、界面开发维护效率低，对从事过前端开发的人来说更是难以适应。所以，苹果需要提供更好的界面引擎来提升开发者的体验，Auto Layout 随之出现。</p><p>苹果公司早在 iOS 6 系统时就引入了 Auto Layout，但是直到现在还有很多开发者迟迟不愿使用 它，其原因就在于对其性能的担忧。即使后来，苹果公司推出了在 Auto Layout 基础上模仿前端 Flexbox 布局思路的 UIStackView工具，提高了开发体验和效率，也无法解除开发者们对其性能的顾虑。</p><p>那么，Auto Layout 到底是如何实现自动布局的，这种布局算法真的会影响性能吗？</p><p>另外，苹果公司在 WWDC 2018 的“ <a href=\"https://developer.apple.com/videos/play/wwdc2018/220\">WWDC 220 Session High Performance Auto Layout</a>”Session中介绍说： iOS 12 将大幅提高 Auto Layout 性能，使滑动达到满帧，这又是如何做到的呢？你是应该选择继续手动布局还是选择Auto Layout呢？</p><!-- [[[read_end]]] --><p>就着这三个问题，我们就来详细聊聊 Auto Layout 吧。</p><h1>Auto Layout的来历</h1><p><img src=\"https://static001.geekbang.org/resource/image/fa/a4/fa8980b42e736a3bbbb3fd4cfa5d48a4.png?wh=2732*2048\" alt=\"\"></p><center><span class=\"reference\">图1 Auto Layout 来历</span></center><p>上图记录了两个时间点：</p><ul>\n<li>一个是1997年，Auto Layout 用到的布局算法 Cassowary 被发明了出来；</li>\n<li>另一个是2011年，苹果公司将 Cassowary 算法运用到了自家的布局引擎 Auto Layout 中。</li>\n</ul><p>Cassowary 能够有效解析线性等式系统和线性不等式系统，用来表示用户界面中那些相等关系和不等关系。基于此，Cassowary 开发了一种规则系统，通过约束来描述视图间的关系。约束就是规则，这个规则能够表示出一个视图相对于另一个视图的位置。</p><p>由于 Cassowary 算法让视图位置可以按照一种简单的布局思路来写，这些简单的相对位置描述可以在运行时动态地计算出视图具体的位置。视图位置的写法简化了，界面相关代码也就更易于维护。苹果公司也是看重了这一点，将其引入到了自己的系统中。</p><p>Cassowary 算法由 Alan Borning、Kim Marriott、Peter Stuckey 等人在“<a href=\"https://constraints.cs.washington.edu/solvers/uist97.html\">Solving Linear Arithmetic Constraints for User Interface Applications</a>”论文中提出的，为了能方便开发者更好地理解 这个算法，并将其运用到更多的开发语言中，作者还将代码发布到了他们搭建的 <a href=\"https://constraints.cs.washington.edu/cassowary/\">Cassowary 网站</a>上。</p><p>由于 Cassowary 算法本身的先进性，更多的开发者将 Cassowary 运用到了各个开发语言中，比如 JavaScript、.NET、Java、Smalltalk、C++都有对应的库。</p><h1>Auto Layout 的生命周期</h1><p>Auto Layout 不只有布局算法 Cassowary，还包含了布局在运行时的生命周期等一整套布局引擎系统，用来统一管理布局的创建、更新和销毁。了解 Auto Layout 的生命周期，是理解它的性能相关话题的基础。这样，在遇到问题，特别是性能问题时，我们才能从根儿上找到原因，从而避免或改进类似的问题。</p><p>这一整套布局引擎系统叫作 Layout Engine ，是 Auto Layout 的核心，主导着整个界面布局。</p><p>每个视图在得到自己的布局之前，Layout Engine 会将视图、约束、优先级、固定大小通过计算转换成最终的大小和位置。在 Layout Engine 里，每当约束发生变化，就会触发 Deffered Layout Pass，完成后进入监听约束变化的状态。当再次监听到约束变化，即进入下一轮循环中。整个过程如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/7c/1c/7ca0e14ef02231c9aba7cb49c7e9271c.png?wh=2732*2048\" alt=\"\"></p><center><span class=\"reference\">图2 Layout Engine界面布局过程</span></center><p>图中， Constraints Change 表示的就是约束变化，添加、删除视图时会触发约束变化。Activating 或 Deactivating，设置 Constant 或 Priority 时也会触发约束变化。Layout Engine 在碰到约束变化后会重新计算布局，获取到布局后调用 superview.setNeedLayout()，然后进入 Deferred Layout Pass。</p><p>Deferred Layout Pass的主要作用是做容错处理。如果有些视图在更新约束时没有确定或缺失布局声明的话，会先在这里做容错处理。</p><p>接下来，Layout Engine会从上到下调用 layoutSubviews() ，通过 Cassowary 算法计算各个子视图的位置，算出来后将子视图的 frame 从 Layout Engine 里拷贝出来。</p><p>在这之后的处理，就和手写布局的绘制、渲染过程一样了。所以，使用 Auto Layout 和手写布局的区别，就是多了布局上的这个计算过程。那么，多的这个 Cassowary 布局，就是在iOS 12 之前影响 Auto Layout 性能的原因吗？</p><p>接下来，我就跟你分析下 Auto Layout 的性能问题。</p><h1>Auto Layout 性能问题</h1><p>Auto Layout的性能是否有问题，我们先看看苹果公司自己是怎么说的吧。</p><p><img src=\"https://static001.geekbang.org/resource/image/ef/16/ef9b42666a226226b8f5fee6d9621b16.png?wh=2518*1140\" alt=\"\"></p><center><span class=\"reference\">图3 Auto Layout 在 iOS 12 中优化后的表现</span></center><p>上图是 WWDC 2018 中 <a href=\"https://developer.apple.com/videos/play/wwdc2018/202/\">202 Session</a> 里讲到的Auto Layout 在 iOS 12 中优化后的表现。可以看到，优化后的性能，已经基本和手写布局一样可以达到性能随着视图嵌套的数量呈线性增长了。而在此之前的Auto Layout，视图嵌套的数量对性能的影响是呈指数级增长的。</p><p>所以，你说Auto Layout对性能影响能大不大呢。但是，这个锅应该由 Cassowary 算法来背吗？</p><p>在1997年时，Cassowary 是以高效的界面线性方程求解算法被提出来的。它解决的是界面的线性规划问题，而线性规划问题的解法是 <a href=\"https://en.wikipedia.org/wiki/Simplex_algorithm\">Simplex 算法</a>。单从 Simplex 算法的复杂度来看，多数情况下是没有指数时间复杂度的。而Cassowary 算法又是在 Simplex算法基础上对界面关系方程进行了高效的添加、修改更新操作，不会带来时间复杂度呈指数级增长的问题。</p><p>那么，如果 Cassowary 算法本身没有问题的话，问题就只可能是苹果公司在 iOS 12 之前在某些情况下没有用好这个算法。</p><p>接下来，我们再看一下 WWDC 2018 中 202 Session 的 Auto Layout 在兄弟视图独立开布局的情况。</p><p><img src=\"https://static001.geekbang.org/resource/image/b2/89/b2e91f2bdcb60d4a7fa4b6dbdaebca89.png?wh=2530*1154\" alt=\"\"></p><center><span class=\"reference\">图4 Auto Layout 在兄弟视图独立开布局的情况</span></center><p>可以看到，兄弟视图之间没有关系时，是不会出现性能呈指数增加问题的。这就表示 Cassowary 算法在添加时是高效的。但如果兄弟视图间有关系的话，在视图遍历时会不断处理和兄弟视图间的关系，这时会有修改更新计算。</p><p>由此可以看出，Auto Layout 并没有用上 Cassowary 高效修改更新的特性。</p><p>实际情况是，iOS 12 之前，很多约束变化时都会重新创建一个计算引擎 NSISEnginer 将约束关系重新加进来，然后重新计算。结果就是，涉及到的约束关系变多时，新的计算引擎需要重新计算，最终导致计算量呈指数级增加。</p><p>更详细的讲解，你可以参考 WWDC 2018 中 202 Session的内容，里面完整地分析了以前的问题，以及 iOS12 的解法。</p><p>总体来说， <strong>iOS12 的Auto Layout更多地利用了 Cassowary算法的界面更新策略，使其真正完成了高效的界面线性策略计算。</strong></p><p>那么，明确了 iOS 12 使得 Auto Layout 具有了和手写布局几乎相同的高性能后，你是不是就可以放心地使用 Auto Layout 了呢？</p><p>答案是肯定的。</p><p>如果你是一名手写布局的 iOS 开发者，这是你投入 Auto Layout 布局开发的最佳时机。</p><p>使用 Auto Layout 一定要注意多使用 Compression Resistance Priority 和 Hugging Priority，利用优先级的设置，让布局更加灵活，代码更少，更易于维护。</p><p>最后，为了更好地使用Auto Layout，我再来和你说说如何提高它的易用性。</p><h1>Auto Layout 的易用性</h1><p>除了性能这个心结外，很多开发者直到现在还不愿意使用 Auto Layout的另一个原因，据我了解就是它还存在原生写法不易用的问题。</p><p>苹果公司其实也考虑到了这点。所以，苹果公司后来又提供了 VFL (Visual Format Language) 这种 DSL（Domain Specific Language，中文可翻译为“领域特定语言”） 语言来简化 Auto Layout 的写法。</p><p>本质上，Auto Layout 只是一种最基础的布局思路。在前端出现了 Flexbox 这种高级的响应式布局思路后，苹果公司也紧跟其后，基于 Auto Layout 又封装了一个类似 Flexbox 的 UIStackView，用来提高 iOS 开发响应式布局的易用性。</p><p>UIStackView 会在父视图里设置子视图的排列方式，比如 Fill、Leading、Center，而不用在每个子视图中都设置自己和兄弟视图的关系，如下图所示：</p><p><img src=\"https://static001.geekbang.org/resource/image/95/9a/955a92d094e1fdd4a647e5760ff0629a.png?wh=2732*2048\" alt=\"\"></p><center><span class=\"reference\">图5 UIStackView 在父视图里设置子视图的排列方式</span></center><p>这样做，可以极大地减少你在约束关系设置上所做的重复工作，提升页面布局的体验。</p><p>我曾开发过一个 DSL 语言用来处理页面布局。我当时的想法就是，希望能够在实际工作中使用 VFL按照 UIStackView 的思路来写布局。由于那时UIStackView 系统版本要求高，所以 DSL 的内部没有使用 UIStackView，而直接使用了Auto Layout。</p><p>DSL 代码很简洁，如下所示：</p><pre><code>{\n    ht(padding:10)\n    [avatarImageView(imageName:avatar)]\n    [\n        {\n            vl(padding:10)\n            [(text:戴铭,color:AAA0A3)]\n            [(text:Starming站长,color:E3DEE0,font:13)]\n            [(text:喜欢画画编程和写小说,color:E3DEE0,font:13)]\n        }\n        (width:210,backColor:FAF8F9,backPaddingHorizontal:10,backPaddingVertical:10,radius:8)\n    ]\n}\n</code></pre><p>这段代码对应的界面效果如下：</p><p><img src=\"https://static001.geekbang.org/resource/image/47/7a/4745882ddbe68c5f120f15227578bb7a.png?wh=690*226\" alt=\"\"></p><center><span class=\"reference\">图6 页面布局效果示例</span></center><p>可以看到，嵌套视图通过简单的 DSL 也能很好地表现出来。详细的使用说明和代码实现，你可以在这里查看：<a href=\"https://github.com/ming1016/STMAssembleView\">https://github.com/ming1016/STMAssembleView</a></p><h1>小结</h1><p>今天这篇文章，我和你说了 Auto Layout 背后使用的Cassowary算法。同时，我也和你说了苹果公司经过一番努力，终于在 iOS 12 上用到了Cassowary算法的界面更新策略，使得 Auto Layout 的性能得到了大幅提升。</p><p>至此，Auto Layout 性能的提升可以让你放心地使用。</p><p>记得上次我和一个苹果公司的技术支持人员聊到，到底应该使用苹果自己的布局还是第三方工具比如 Texture 时，他的观点是：使用苹果公司的技术得到的技术升级是持续的，而第三方不再维护的可能性是很高的。</p><p>其实细细想来，这非常有道理。这次 Auto Layout 的升级就是一个很好的例子，你的代码一行不变就能享受到耗时从指数级下降到线性的性能提升。而很多第三方库，会随着 iOS 系统升级失去原有的优势。</p><h1>课后小作业</h1><p>请你参考<a href=\"https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/VisualFormatLanguage.html\">VFL的手册</a>，编写一个基于 UIStackView 的 DSL。</p><p>感谢你的收听，欢迎你在评论区给我留言分享你的观点，也欢迎把它分享给更多的朋友一起阅读。</p><p></p>","neighbors":{"left":{"article_title":"02 | App 启动速度怎么做优化与监控？","id":85331},"right":{"article_title":"04 | 项目大了人员多了，架构怎么设计更合理？","id":86522}},"comments":[{"had_liked":false,"id":76722,"user_name":"一剑寒潇","can_delete":false,"product_type":"c1","uid":1249070,"ip_address":"","ucode":"2C2B8CE792A271","user_header":"https://static001.geekbang.org/account/avatar/00/13/0f/2e/1d3e9f38.jpg","comment_is_top":true,"comment_ctime":1552696787,"is_pvip":false,"replies":[{"id":"27982","content":"有的。你可以看我的这个 demo https:&#47;&#47;github.com&#47;ming1016&#47;ShowAutoLayout","user_name":"作者回复","comment_id":76722,"uid":"1140280","ip_address":"","utype":1,"ctime":1552704036,"user_name_real":"戴铭"}],"discussion_count":3,"race_medal":0,"score":"9.2233721457817006e+18","product_id":100024501,"comment_content":"使用 Auto Layout 一定要注意多使用 Compression Resistance Priority 和 Hugging Priority，利用优先级的设置，让布局更加灵活，代码更少，更易于维护。<br><br>能否举一些详细的代码事例！！！","like_count":26,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443421,"discussion_content":"有的。你可以看我的这个 demo https://github.com/ming1016/ShowAutoLayout","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552704036,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2132638,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ergjleMbtpL8qcTqBxShJ8oD6ibfdSuvu0XZtadpj9AB8JicAIkiaQC837NRmwXPQ689wxqPAHwcAMqw/132","nickname":"Geek_3ef812","note":"","ucode":"00339A90F9C117","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":300334,"discussion_content":"cell的一些布局中会涉及到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598050846,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1132304,"avatar":"https://static001.geekbang.org/account/avatar/00/11/47/10/2d673601.jpg","nickname":"好饿早知道送外卖了","note":"","ucode":"AED22DB5BF8FC7","race_medal":2,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1518,"discussion_content":"6666","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562674442,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77040,"user_name":"开发小能手","can_delete":false,"product_type":"c1","uid":1107899,"ip_address":"","ucode":"3ED813CBE77009","user_header":"https://static001.geekbang.org/account/avatar/00/10/e7/bb/18eb89fd.jpg","comment_is_top":false,"comment_ctime":1552814034,"is_pvip":false,"replies":[{"id":"28381","content":"这样想没有问题","user_name":"作者回复","comment_id":77040,"uid":"1140280","ip_address":"","utype":1,"ctime":1552997207,"user_name_real":"戴铭"}],"discussion_count":4,"race_medal":0,"score":"242070982610","product_id":100024501,"comment_content":"关于 UI 的布局，是使用 frame 还是 Auto Layout ？这个问题困扰了我很久，在之前的团队中是建议使用 frame 的，原因是在 layoutSubviews 中做布局，将所有的子视图按照 UI 显示从上至下、从左至右的顺序来布局，感觉也很规范，代码也不会导致不易维护的程度。<br>我一直有这么一条原则：简单的 UI 使用 Auto Layout ，复杂的 UI 使用 frame。原因如下：<br>1、从代码量上来看，两种布局方式相差不大。有时候发现复杂的 UI 使用  Auto Layout 的话，代码量反而会变多，因为复杂的 UI 往往会有复杂的逻辑，比如根据数据的不同，部分 UI 的显示会有变动（比如某个子视图隐藏与显示， 会影响到其它视图的布局）。<br>2、会将那种仅做了一次约束之后，就可以不用做太多 update 的那种视为简单的布局，这种情况下使用 Auto Layout 还是挺方便的。<br>3、会将 Cell 的高度会随着数据的不同而不同的布局视为复杂的 UI 布局，这种情况下使用 Auto Layout 来布局，感觉就不合适。因为不管是 frame 还是 Auto Layout，都需要去计算高度，其实在计算 高度的时候，所有的子视图的 frame 都已经决定了，这种情况下，直接使用 frame 会比较精简。<br>4、我见过这样的代码：动态的通过文本，计算出尺寸之后，再使用 Auto Layout 进行 update，感觉太没有这个必要了。<br><br>以上是我对 UI 布局的一点思考，请教大神：凭您的经验，这样的思考有什么不合理之处么？（简单的 UI 使用 Auto Layout ，复杂的 UI 使用 frame。）","like_count":57,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443560,"discussion_content":"这样想没有问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552997207,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1234027,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d4/6b/722fd302.jpg","nickname":"低调","note":"","ucode":"36BDF69AD26DCB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6739,"discussion_content":"UITableViewAutomaticDimension","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1567078136,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2227527,"avatar":"https://static001.geekbang.org/account/avatar/00/21/fd/47/499339d1.jpg","nickname":"新味道","note":"","ucode":"979E3574082CE7","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":334417,"discussion_content":"挺好的思路分享，谢谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607842670,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1202368,"avatar":"https://static001.geekbang.org/account/avatar/00/12/58/c0/8d7dcaea.jpg","nickname":"xixi","note":"","ucode":"B83B85F10E0C07","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":315447,"discussion_content":"还不如干脆利落使用frame","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1603276004,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76851,"user_name":"徐秀滨","can_delete":false,"product_type":"c1","uid":1457337,"ip_address":"","ucode":"36895D00A181FB","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/b9/42b228f8.jpg","comment_is_top":false,"comment_ctime":1552728328,"is_pvip":false,"replies":[{"id":"28370","content":"对","user_name":"作者回复","comment_id":76851,"uid":"1140280","ip_address":"","utype":1,"ctime":1552991230,"user_name_real":"戴铭"}],"discussion_count":2,"race_medal":0,"score":"169056452872","product_id":100024501,"comment_content":"针对Auto Layout的生命周期，我是这么理解的：<br>Auto Layout拥有一套Layout Engine引擎，由它来主导页面的布局。App启动后，主线程的Run Loop会一直处于监听状态，当约束发生变化后会触发Deffered Layout Pass（延迟布局传递），在里面做容错处理（约束丢失等情况）并把view标识为dirty状态，然后Run Loop再次进入监听阶段。当下一次刷新屏幕动作来临（或者是调用layoutIfNeeded）时，Layout Engine 会从上到下调用 layoutSubviews() ，通过 Cassowary算法计算各个子视图的位置，算出来后将子视图的frame从Layout Engine拷贝出来，接下来的过程就跟手写frame是一样的了。<br>这样可对？","like_count":40,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443471,"discussion_content":"对","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552991230,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1227217,"avatar":"https://static001.geekbang.org/account/avatar/00/12/b9/d1/9881a32d.jpg","nickname":"楠","note":"","ucode":"6B87C6375AB767","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":305086,"discussion_content":"你这可以说是面试标准回答了哈哈","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1599781567,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76760,"user_name":"burning😕🙄","can_delete":false,"product_type":"c1","uid":1455292,"ip_address":"","ucode":"5AA4FAD296BFBC","user_header":"https://static001.geekbang.org/account/avatar/00/16/34/bc/fecc1070.jpg","comment_is_top":false,"comment_ctime":1552702779,"is_pvip":false,"replies":[{"id":"27996","content":"具体使用，可以看我这篇文章，里面涉及到<br>https:&#47;&#47;github.com&#47;ming1016&#47;study&#47;wiki&#47;Masonry<br><br>我把相关内容截取到这里<br><br>主要是UILabel的高度会有变化，所以这里主要是说说label变化时如何处理，设置UILabel的时候注意要设置preferredMaxLayoutWidth这个宽度，还有ContentHuggingPriority为UILayoutPriorityRequried<br><br>CGFloat maxWidth = [UIScreen mainScreen].bounds.size.width - 10 * 2;<br><br>textLabel = [UILabel new];<br>textLabel.numberOfLines = 0;<br>textLabel.preferredMaxLayoutWidth = maxWidth;<br>[self.contentView addSubview:textLabel];<br><br>[textLabel mas_makeConstraints:^(MASConstraintMaker *make) {<br>    make.top.equalTo(statusView.mas_bottom).with.offset(10);<br>    make.left.equalTo(self.contentView).with.offset(10);<br>    make.right.equalTo(self.contentView).with.offset(-10);<br>    make.bottom.equalTo(self.contentView).with.offset(-10);<br>}];<br><br>[_contentLabel setContentHuggingPriority:UILayoutPriorityRequired forAxis:UILayoutConstraintAxisVertical];<br><br>如果版本支持最低版本为iOS 8以上的话可以直接利用UITableViewAutomaticDimension在tableview的heightForRowAtIndexPath直接返回即可。<br><br>tableView.rowHeight = UITableViewAutomaticDimension;<br>tableView.estimatedRowHeight = 80; &#47;&#47;减少第一次计算量，iOS7后支持<br><br>- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {<br>    &#47;&#47; 只用返回这个！<br>    return UITableViewAutomaticDimension;<br>}<br><br>但如果需要兼容iOS 8之前版本的话，就要回到老路子上了，主要是用systemLayoutSizeFittingSize来取高。步骤是先在数据model中添加一个height的属性用来缓存高，然后在table view的heightForRowAtIndexPath代理里static一个只初始化一次的Cell实例，然后根据model内容填充数据，最后根据cell的contentView的systemLayoutSizeFittingSize的方法获取到cell的高。具体代码如下<br><br>&#47;&#47;在model中添加属性缓存高度<br>@interface DataModel : NSObject<br>@property (copy, nonatomic) NSString *text;<br>@property (assign, nonatomic) CGFloat cellHeight; &#47;&#47;缓存高度<br>@end<br><br>- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {<br>    static CustomCell *cell;<br>    &#47;&#47;只初始化一次cell<br>    static dispatch_once_t onceToken;<br>    dispatch_once(&amp;onceToken, ^{<br>        cell = [tableView dequeueReusableCellWithIdentifier:NSStringFromClass([CustomCell class])];<br>  <br><br>还有这篇 https:&#47;&#47;ming1016.github.io&#47;2015&#47;11&#47;03&#47;deeply-analyse-autolayout&#47; 会讲的更详细些","user_name":"作者回复","comment_id":76760,"uid":"1140280","ip_address":"","utype":1,"ctime":1552705543,"user_name_real":"戴铭"}],"discussion_count":1,"race_medal":0,"score":"117516819771","product_id":100024501,"comment_content":"没有讲到 cell 里面 label的高度自适应问题，这个在layout应该使用频率比较高吧","like_count":28,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443438,"discussion_content":"具体使用，可以看我这篇文章，里面涉及到\nhttps://github.com/ming1016/study/wiki/Masonry\n\n我把相关内容截取到这里\n\n主要是UILabel的高度会有变化，所以这里主要是说说label变化时如何处理，设置UILabel的时候注意要设置preferredMaxLayoutWidth这个宽度，还有ContentHuggingPriority为UILayoutPriorityRequried\n\nCGFloat maxWidth = [UIScreen mainScreen].bounds.size.width - 10 * 2;\n\ntextLabel = [UILabel new];\ntextLabel.numberOfLines = 0;\ntextLabel.preferredMaxLayoutWidth = maxWidth;\n[self.contentView addSubview:textLabel];\n\n[textLabel mas_makeConstraints:^(MASConstraintMaker *make) {\n    make.top.equalTo(statusView.mas_bottom).with.offset(10);\n    make.left.equalTo(self.contentView).with.offset(10);\n    make.right.equalTo(self.contentView).with.offset(-10);\n    make.bottom.equalTo(self.contentView).with.offset(-10);\n}];\n\n[_contentLabel setContentHuggingPriority:UILayoutPriorityRequired forAxis:UILayoutConstraintAxisVertical];\n\n如果版本支持最低版本为iOS 8以上的话可以直接利用UITableViewAutomaticDimension在tableview的heightForRowAtIndexPath直接返回即可。\n\ntableView.rowHeight = UITableViewAutomaticDimension;\ntableView.estimatedRowHeight = 80; //减少第一次计算量，iOS7后支持\n\n- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {\n    // 只用返回这个！\n    return UITableViewAutomaticDimension;\n}\n\n但如果需要兼容iOS 8之前版本的话，就要回到老路子上了，主要是用systemLayoutSizeFittingSize来取高。步骤是先在数据model中添加一个height的属性用来缓存高，然后在table view的heightForRowAtIndexPath代理里static一个只初始化一次的Cell实例，然后根据model内容填充数据，最后根据cell的contentView的systemLayoutSizeFittingSize的方法获取到cell的高。具体代码如下\n\n//在model中添加属性缓存高度\n@interface DataModel : NSObject\n@property (copy, nonatomic) NSString *text;\n@property (assign, nonatomic) CGFloat cellHeight; //缓存高度\n@end\n\n- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {\n    static CustomCell *cell;\n    //只初始化一次cell\n    static dispatch_once_t onceToken;\n    dispatch_once(&amp;amp;onceToken, ^{\n        cell = [tableView dequeueReusableCell","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552705543,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76746,"user_name":"Sean Ma","can_delete":false,"product_type":"c1","uid":1431314,"ip_address":"","ucode":"A467C04AF3CADE","user_header":"https://static001.geekbang.org/account/avatar/00/15/d7/12/416b60ba.jpg","comment_is_top":false,"comment_ctime":1552700300,"is_pvip":false,"replies":[{"id":"27989","content":"文章有提到。Layout Engine 会从上到下调用 layoutSu... 这个部份。<br><br>动画的话。因为布局约束就是要脱离frame这种表达方式的，可是动画是需要根据这个来执行，这里面就会有些矛盾，不过根据前面说到的布局约束的原理，在某个时刻约束也是会被还原成frame使视图显示，这个时刻可以通过layoutIfNeeded这个方法来进行控制。具体代码如下<br><br>[aniView mas_makeConstraints:^(MASConstraintMaker *make) {<br>    make.top.bottom.left.right.equalTo(self.view).offset(10);<br>}];<br><br>[aniView mas_updateConstraints:^(MASConstraintMaker *make) {<br>    make.top.equalTo(self.view).offset(30);<br>}];<br><br>[UIView animateWithDuration:3 animations:^{<br>    [self.view layoutIfNeeded];<br>}];","user_name":"作者回复","comment_id":76746,"uid":"1140280","ip_address":"","utype":1,"ctime":1552705052,"user_name_real":"戴铭"}],"discussion_count":1,"race_medal":0,"score":"61682242444","product_id":100024501,"comment_content":"我想了解下自动布局会在哪一个时机下能够拿到相应的frame和center，因为有时候做完约束，我想在viewdidlayer前拿到其frame。另外自动布局怎么做动画","like_count":15,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443429,"discussion_content":"文章有提到。Layout Engine 会从上到下调用 layoutSu... 这个部份。\n\n动画的话。因为布局约束就是要脱离frame这种表达方式的，可是动画是需要根据这个来执行，这里面就会有些矛盾，不过根据前面说到的布局约束的原理，在某个时刻约束也是会被还原成frame使视图显示，这个时刻可以通过layoutIfNeeded这个方法来进行控制。具体代码如下\n\n[aniView mas_makeConstraints:^(MASConstraintMaker *make) {\n    make.top.bottom.left.right.equalTo(self.view).offset(10);\n}];\n\n[aniView mas_updateConstraints:^(MASConstraintMaker *make) {\n    make.top.equalTo(self.view).offset(30);\n}];\n\n[UIView animateWithDuration:3 animations:^{\n    [self.view layoutIfNeeded];\n}];","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552705052,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77164,"user_name":"power","can_delete":false,"product_type":"c1","uid":1455616,"ip_address":"","ucode":"8FCE95CAB092C3","user_header":"https://static001.geekbang.org/account/avatar/00/16/36/00/0e79c1f1.jpg","comment_is_top":false,"comment_ctime":1552874065,"is_pvip":false,"discussion_count":6,"race_medal":0,"score":"53092481617","product_id":100024501,"comment_content":"不知道大家对视图依赖的处理有没有很好的方法:A依赖B，B依赖C，C依赖D，BC有可能不存在，所以D的依赖有可能是ABC，这种有没有好的布局思路呢","like_count":12,"discussions":[{"author":{"id":1590262,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZLhicyPutHBNOfYrtwOT4K7D7MvORg3HJlm9HicVj6Zjzp9Cib0JnddrTNVoxFxiautXUgYNBXD6XEVyXK9eP87Y4g/132","nickname":"盟讯","note":"","ucode":"EE057FC9ADEF91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6440,"discussion_content":"UIstackview","likes_number":3,"is_delete":false,"is_hidden":false,"ctime":1566905299,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1727549,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/5c/3d/99dce220.jpg","nickname":"Mr.冯","note":"","ucode":"6C6E3A2D4C5C8F","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1590262,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZLhicyPutHBNOfYrtwOT4K7D7MvORg3HJlm9HicVj6Zjzp9Cib0JnddrTNVoxFxiautXUgYNBXD6XEVyXK9eP87Y4g/132","nickname":"盟讯","note":"","ucode":"EE057FC9ADEF91","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":333357,"discussion_content":"现在发现StackView太方便了\n","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1607506501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6440,"ip_address":""},"score":333357,"extra":""}]},{"author":{"id":1212436,"avatar":"https://static001.geekbang.org/account/avatar/00/12/80/14/ab4d8b86.jpg","nickname":"逗逗的兜豆不是蛋淡","note":"","ucode":"0162F856EBFD75","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":115356,"discussion_content":"表象不存在，深层存在，高或宽为0","likes_number":1,"is_delete":false,"is_hidden":false,"ctime":1578012345,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1071791,"avatar":"https://static001.geekbang.org/account/avatar/00/10/5a/af/774c9e56.jpg","nickname":"爆seed.","note":"","ucode":"16DE5EC6CCCED6","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":368068,"discussion_content":"优先处理正常情况，然后根据条件隐藏视图并更新约束","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1618556389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1462040,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4f/18/d5e5f0c7.jpg","nickname":"温润而泽","note":"","ucode":"622A424934A87A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301181,"discussion_content":"可以用约束优先级处理，设置高度为0时，假如每个视图之间有间距，中间隐藏一个，间距就成2倍了","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1598433891,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2034149,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/LpOCzwApjeD0b88GEHaEurXSUcjejGyxDk12msCj8ibSiaiaq333n7nDIgR7LsGFXIXRKkW1AniayG0js5bAjEOfVA/132","nickname":"Geek_77d687","note":"","ucode":"D16925BFB32327","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":282345,"discussion_content":"B、C不存在即将其设置隐藏，高度为0或0.1","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1591948378,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77131,"user_name":"徐扬","can_delete":false,"product_type":"c1","uid":1458032,"ip_address":"","ucode":"B9DB3B39C5BE9B","user_header":"https://static001.geekbang.org/account/avatar/00/16/3f/70/5a1b3aa3.jpg","comment_is_top":false,"comment_ctime":1552859530,"is_pvip":false,"replies":[{"id":"28375","content":"推荐用 Masonry 和 SnapKit","user_name":"作者回复","comment_id":77131,"uid":"1140280","ip_address":"","utype":1,"ctime":1552996307,"user_name_real":"戴铭"}],"discussion_count":3,"race_medal":0,"score":"48797499786","product_id":100024501,"comment_content":"autolayout 的布局代码应该写在什么地方，是在view 的layoutsubview 方法里面写，还是在view 加载完成后写，那个更合理呢？","like_count":11,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443594,"discussion_content":"推荐用 Masonry 和 SnapKit","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552996307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":2107980,"avatar":"https://static001.geekbang.org/account/avatar/00/20/2a/4c/17993652.jpg","nickname":"Jesse","note":"","ucode":"ACB308497AF747","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":340444,"discussion_content":"autolayout写在view创建的时候，init方法里;frame的话，写在layoutsubviews。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1610007506,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1188877,"avatar":"https://static001.geekbang.org/account/avatar/00/12/24/0d/f9e016f3.jpg","nickname":"arnoldxiao","note":"","ucode":"95C7E36489F98E","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":50339,"discussion_content":"viewDidLoad","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1573708131,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76752,"user_name":"Hello灬麦德姆","can_delete":false,"product_type":"c1","uid":1458884,"ip_address":"","ucode":"7F1E617401F9CD","user_header":"https://static001.geekbang.org/account/avatar/00/16/42/c4/b9166b7d.jpg","comment_is_top":false,"comment_ctime":1552701167,"is_pvip":false,"discussion_count":3,"race_medal":0,"score":"48797341423","product_id":100024501,"comment_content":"有一会面试面试官问我AutoLayout怎么实现的，我懵逼了，相见恨晚啊！","like_count":11,"discussions":[{"author":{"id":1160792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/58/f0cb60be.jpg","nickname":"zhonglaoban","note":"","ucode":"F570E9D65EC004","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":339688,"discussion_content":"所以是怎么实现的😢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1609758106,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":2,"child_discussions":[{"author":{"id":1454246,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoq9HjQn1TcZ75BQItdbDgBibgYgfRofNrYxscxlUW5peF9qw1Z2jqvWX9cuxJeqWlJXEbQGdvbsMA/132","nickname":"Geek_ea026f","note":"","ucode":"F370AC3D8E8F54","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1160792,"avatar":"https://static001.geekbang.org/account/avatar/00/11/b6/58/f0cb60be.jpg","nickname":"zhonglaoban","note":"","ucode":"F570E9D65EC004","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":359076,"discussion_content":"通过那个Cassowary算法实现的🤣","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1616115252,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":339688,"ip_address":""},"score":359076,"extra":""},{"author":{"id":1456188,"avatar":"https://static001.geekbang.org/account/avatar/00/16/38/3c/77738aa4.jpg","nickname":"毫无根据的沉溺于美妙的幻想","note":"","ucode":"CE318147D99E3D","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1454246,"avatar":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoq9HjQn1TcZ75BQItdbDgBibgYgfRofNrYxscxlUW5peF9qw1Z2jqvWX9cuxJeqWlJXEbQGdvbsMA/132","nickname":"Geek_ea026f","note":"","ucode":"F370AC3D8E8F54","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":582353,"discussion_content":"感觉说一个名词也没啥用，并且忘的也快😄","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1659406816,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":359076,"ip_address":"安徽"},"score":582353,"extra":""}]}]},{"had_liked":false,"id":77866,"user_name":"drunkenMouse","can_delete":false,"product_type":"c1","uid":1454037,"ip_address":"","ucode":"AA8CEA703ECBE8","user_header":"","comment_is_top":false,"comment_ctime":1553009079,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"35912747447","product_id":100024501,"comment_content":"把循环这部分总结了一下：<br>触发约束变化 —&gt; Layout Engine就需要重新计算布局，会先获取到当前的布局，调用SuperView.SetNeedLayout() —&gt; Deffered Layout Pass进行监听 —&gt; Layout Engine 从上到下调用LayoutSubViews()，通过Cassowary算法计算各个子视图的位置，算出来后将子视图的Frame从Layout Engine里拷贝出来 —&gt; 和手写布局的绘制、渲染一样。","like_count":8},{"had_liked":false,"id":77222,"user_name":"xilie","can_delete":false,"product_type":"c1","uid":1013805,"ip_address":"","ucode":"AFCC4E157F7830","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVegfjqa0gM4hcRrBhZkIf7Uc5oeTMYsg6o5pd76IQlUoIIh2ic6P22xVEFtRnAzjyLtiaPVstkKug/132","comment_is_top":false,"comment_ctime":1552891544,"is_pvip":false,"replies":[{"id":"28362","content":"layoutsubview 里可以得到 frame 然后判断进行hidden处理","user_name":"作者回复","comment_id":77222,"uid":"1140280","ip_address":"","utype":1,"ctime":1552990873,"user_name_real":"戴铭"}],"discussion_count":3,"race_medal":0,"score":"23027728024","product_id":100024501,"comment_content":"Hi，看了你写的“AutoLayout情况如何计算UITableView的变高高度”，问个问题：<br><br>有时候cell里面的一些 label 会在不同情况下切换显示和隐藏，这时 label 的上下间距，会出现异常，比如：<br>竖着排列3个 label: a-b-c，间距都是20，这时 b 隐藏，c 和 a 的间距是20，设计要求是10，这种怎么处理？","like_count":5,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443642,"discussion_content":"layoutsubview 里可以得到 frame 然后判断进行hidden处理","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552990873,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1590262,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZLhicyPutHBNOfYrtwOT4K7D7MvORg3HJlm9HicVj6Zjzp9Cib0JnddrTNVoxFxiautXUgYNBXD6XEVyXK9eP87Y4g/132","nickname":"盟讯","note":"","ucode":"EE057FC9ADEF91","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":6441,"discussion_content":"c相对a有个约束，constant为10，先deactive。需要时激活","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1566905451,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":1,"child_discussions":[{"author":{"id":1473176,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7a/98/a4714d85.jpg","nickname":"尘埃落定","note":"","ucode":"A05BCD04BE4831","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":1590262,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZLhicyPutHBNOfYrtwOT4K7D7MvORg3HJlm9HicVj6Zjzp9Cib0JnddrTNVoxFxiautXUgYNBXD6XEVyXK9eP87Y4g/132","nickname":"盟讯","note":"","ucode":"EE057FC9ADEF91","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590241,"discussion_content":"请教下，具体这块代码怎么写呢？没有用过deactive这种方式。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665637260,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":6441,"ip_address":"北京"},"score":590241,"extra":""}]}]},{"had_liked":false,"id":76975,"user_name":"geeklyc","can_delete":false,"product_type":"c1","uid":1264061,"ip_address":"","ucode":"F25441AB6433B3","user_header":"https://static001.geekbang.org/account/avatar/00/13/49/bd/ae37990b.jpg","comment_is_top":false,"comment_ctime":1552791584,"is_pvip":false,"replies":[{"id":"28862","content":"cell 情况复杂时用手动frame+计算高度，简单的用AutoLayout+自动计算","user_name":"作者回复","comment_id":76975,"uid":"1140280","ip_address":"","utype":1,"ctime":1553389457,"user_name_real":"戴铭"}],"discussion_count":3,"race_medal":0,"score":"18732660768","product_id":100024501,"comment_content":"看了篇文章比较几种不同计算cell高度性能的问题，从好到坏：手动frame+计算高度，AutoLayout+计算高度，AutoLayout+自动计算。铭神，你的建议是？现在三种情况都用了下","like_count":4,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443524,"discussion_content":"cell 情况复杂时用手动frame+计算高度，简单的用AutoLayout+自动计算","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553389457,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1473176,"avatar":"https://static001.geekbang.org/account/avatar/00/16/7a/98/a4714d85.jpg","nickname":"尘埃落定","note":"","ucode":"A05BCD04BE4831","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":590242,"discussion_content":"可否举个复杂情况的例子，参考一下？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1665637389,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":"北京"},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1515589,"avatar":"https://static001.geekbang.org/account/avatar/00/17/20/45/7bc0453e.jpg","nickname":"Liusr","note":"","ucode":"CE3358EE75F073","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":284768,"discussion_content":"cell上的图片是服务器返回的，拿到图片后才能确定图片高度。只能AutoLayout+计算高度 了吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1592631602,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77194,"user_name":"wlgemini","can_delete":false,"product_type":"c1","uid":1454407,"ip_address":"","ucode":"D407F76B753243","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/47/0e8305c6.jpg","comment_is_top":false,"comment_ctime":1552881226,"is_pvip":false,"replies":[{"id":"28365","content":"棒棒的","user_name":"作者回复","comment_id":77194,"uid":"1140280","ip_address":"","utype":1,"ctime":1552991017,"user_name_real":"戴铭"}],"discussion_count":1,"race_medal":0,"score":"14437783114","product_id":100024501,"comment_content":"我也写了一个基于Auto layout的swift框架，在这里：https:&#47;&#47;github.com&#47;wlgemini&#47;Driftwood","like_count":3,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443630,"discussion_content":"棒棒的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552991017,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76733,"user_name":"CoderWGB","can_delete":false,"product_type":"c1","uid":1081064,"ip_address":"","ucode":"16478F325EEF26","user_header":"https://static001.geekbang.org/account/avatar/00/10/7e/e8/7d4787de.jpg","comment_is_top":false,"comment_ctime":1552698093,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14437599981","product_id":100024501,"comment_content":"Flexbox布局iOS开发用的少  一般都是frame或者Masonry","like_count":3},{"had_liked":false,"id":76711,"user_name":"吃蘑菇的大灰狼","can_delete":false,"product_type":"c1","uid":1079226,"ip_address":"","ucode":"87F72CBAF08D6C","user_header":"https://static001.geekbang.org/account/avatar/00/10/77/ba/b2356241.jpg","comment_is_top":false,"comment_ctime":1552694815,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"14437596703","product_id":100024501,"comment_content":"UIStackView的推出从iOS9到现在已经很久了, 他确实更方便布局，但是在平常的开发里面，貌似没看到有很多小伙伴在用, 记得有一篇文章提到，苹果的开发人员建议 ，如果能用UIStackView的，尽量都用UIStackView. 之前不知道原因，读了这篇戴老师的文章才知道UIStackView布局的原理。期待后续的文章。","like_count":3},{"had_liked":false,"id":80368,"user_name":"轩","can_delete":false,"product_type":"c1","uid":1135114,"ip_address":"","ucode":"AD4C4A358A98CB","user_header":"https://static001.geekbang.org/account/avatar/00/11/52/0a/27da878c.jpg","comment_is_top":false,"comment_ctime":1553652228,"is_pvip":false,"replies":[{"id":"29535","content":"参见 WWDC 2018 202 Session","user_name":"作者回复","comment_id":80368,"uid":"1140280","ip_address":"","utype":1,"ctime":1553941594,"user_name_real":"戴铭"}],"discussion_count":1,"race_medal":0,"score":"10143586820","product_id":100024501,"comment_content":"关于 Autolayout，iOS 12 具体做了哪些优化呢？","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444834,"discussion_content":"参见 WWDC 2018 202 Session","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553941594,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79129,"user_name":"Bo.zhang","can_delete":false,"product_type":"c1","uid":1455638,"ip_address":"","ucode":"B60C1A20DA04A3","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eobLhuHjCEdTn8V2rCSBPGLc1PqnMpibPJIickEJ9MxaciczXtmdFxtqzb4FXoRdDBgjUjdT63Jsaibgw/132","comment_is_top":false,"comment_ctime":1553360575,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"10143295167","product_id":100024501,"comment_content":"戴神 为什么https:&#47;&#47;github.com&#47;ming1016&#47;STMAssembleView 下载后程序运行后出link错误 怎么修改呢？","like_count":2,"discussions":[{"author":{"id":1458512,"avatar":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLRjPmr2NG3ibMRQeqWCmQnsrWdMAw9XhlRSEGrxgZiaKJ8MK0xFictiajtBvUuYM5pAUyiaqCEymtAypQ/132","nickname":"Turing","note":"","ucode":"C827B476D29AA0","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":23543,"discussion_content":"Comment or delete script of Embed Pods frameworks in Build Phases tab .","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1569831465,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79018,"user_name":"Geek_45fc02","can_delete":false,"product_type":"c1","uid":1457447,"ip_address":"","ucode":"FE074A1594AC7E","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJTOicFdCW2hgUwgfiaR9qSGabPvgLorp1Xcd7uLquXibWmKZxJibMsSeqibEpuHoSwusj2kOr86uLAzng/132","comment_is_top":false,"comment_ctime":1553324813,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"10143259405","product_id":100024501,"comment_content":"Autolayout+XIB或Storyboard对开发效率的提升是巨大的，真正的所见即所得，甚至对于独立开发而言很多场景都可以直接把storyboard当作画板来使用，省去了在sketch上画UI的时间。如果iOS没有XIB或者storyboard，Flutter可能会比现在更受欢迎。","like_count":2},{"had_liked":false,"id":76948,"user_name":"张松超","can_delete":false,"product_type":"c1","uid":1416371,"ip_address":"","ucode":"A1FC90C38AF017","user_header":"https://static001.geekbang.org/account/avatar/00/15/9c/b3/d1653155.jpg","comment_is_top":false,"comment_ctime":1552782741,"is_pvip":false,"replies":[{"id":"28399","content":"简单页面用 xib 没什么问题","user_name":"作者回复","comment_id":76948,"uid":"1140280","ip_address":"","utype":1,"ctime":1552998526,"user_name_real":"戴铭"}],"discussion_count":1,"race_medal":0,"score":"10142717333","product_id":100024501,"comment_content":"不推荐使用xib吗，还是不推荐使用拖线的方式","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443514,"discussion_content":"简单页面用 xib 没什么问题","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552998526,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76818,"user_name":"徐秀滨","can_delete":false,"product_type":"c1","uid":1457337,"ip_address":"","ucode":"36895D00A181FB","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/b9/42b228f8.jpg","comment_is_top":false,"comment_ctime":1552719064,"is_pvip":false,"replies":[{"id":"28014","content":"VC.view 了解下。以外的才是 C 层","user_name":"作者回复","comment_id":76818,"uid":"1140280","ip_address":"","utype":1,"ctime":1552728568,"user_name_real":"戴铭"}],"discussion_count":1,"race_medal":0,"score":"10142653656","product_id":100024501,"comment_content":"请问，使用xib画页面能够快速提高开发效率，但是怎么在MVC架构上合理使用呢？比如新建一个VC，勾上xib选项后，那么就会创建一个xib文件，这时候xib文件与VC位于同一目录下。<br>1. 从文件分类来讲，xib属于View层，VC属于C层，这就不对了。<br>2. 而且xib上有响应动作的话该怎么处理才能做到符合MVC分离，且不失了直接拉线写method这种便利性呢？","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443456,"discussion_content":"VC.view 了解下。以外的才是 C 层","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552728568,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76800,"user_name":"Anyeler","can_delete":false,"product_type":"c1","uid":1454436,"ip_address":"","ucode":"361DB28DA9484B","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/64/0e65616b.jpg","comment_is_top":false,"comment_ctime":1552713446,"is_pvip":false,"replies":[{"id":"28013","content":"孙源的 FDStackView 了解下。 https:&#47;&#47;github.com&#47;forkingdog&#47;FDStackView","user_name":"作者回复","comment_id":76800,"uid":"1140280","ip_address":"","utype":1,"ctime":1552728428,"user_name_real":"戴铭"}],"discussion_count":1,"race_medal":0,"score":"10142648038","product_id":100024501,"comment_content":"主要公司的APP支持iOS8.0以上，所以UIStackView比较少用","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443451,"discussion_content":"孙源的 FDStackView 了解下。 https://github.com/forkingdog/FDStackView","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552728428,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76734,"user_name":"断虹残雪","can_delete":false,"product_type":"c1","uid":1456275,"ip_address":"","ucode":"655DEA6962AB48","user_header":"https://static001.geekbang.org/account/avatar/00/16/38/93/fd3de018.jpg","comment_is_top":false,"comment_ctime":1552698128,"is_pvip":false,"replies":[{"id":"27986","content":"我推荐全代码，可以使用三方库简化写法，或者自己定义 DSL","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552704339,"ip_address":"","comment_id":76734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142632720","product_id":100024501,"comment_content":"铭神、请问使用Autolayout，如何适配多套主题（夜间模式）呢？我们现在的做法是每一个xib的view都拉线到代码，然后再代码做主题适配。一直感觉不太好，很繁琐...","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443424,"discussion_content":"我推荐全代码，可以使用三方库简化写法，或者自己定义 DSL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552704339,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76699,"user_name":"Kai","can_delete":false,"product_type":"c1","uid":1024088,"ip_address":"","ucode":"CD3FACF1803D8F","user_header":"https://static001.geekbang.org/account/avatar/00/0f/a0/58/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1552686687,"is_pvip":false,"replies":[{"id":"27990","content":"如果没有业务需求开发，可以自己开发个独立 App 嘛，写界面的机会还是很多的。","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552705076,"ip_address":"","comment_id":76699,"utype":1}],"discussion_count":1,"race_medal":0,"score":"10142621279","product_id":100024501,"comment_content":"如何练习auto layout的代码编写？","like_count":2,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443413,"discussion_content":"如果没有业务需求开发，可以自己开发个独立 App 嘛，写界面的机会还是很多的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552705076,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":267605,"user_name":"新味道","can_delete":false,"product_type":"c1","uid":2227527,"ip_address":"","ucode":"979E3574082CE7","user_header":"https://static001.geekbang.org/account/avatar/00/21/fd/47/499339d1.jpg","comment_is_top":false,"comment_ctime":1607842807,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5902810103","product_id":100024501,"comment_content":"请教个问题，App主要的旋转方向是Portrait， 但有些复杂点的界面需要旋转到横屏，这种怎么处理？ 旋转的操作，我们是通过AppDelegate的方向旋转方法来处理，但经常出现不旋转的问题，设置了200ms的时延再旋转也不能100%解决问题。有没有类似问题的demo分享下？  谢谢","like_count":1},{"had_liked":false,"id":107823,"user_name":"梦一","can_delete":false,"product_type":"c1","uid":1454237,"ip_address":"","ucode":"BAE2747939AC5C","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/9d/05855e47.jpg","comment_is_top":false,"comment_ctime":1561617544,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5856584840","product_id":100024501,"comment_content":"帅哥，有个疑问问一下。文中有这个Deferred Layout Pass，那么延迟更新是体现在哪里的啊，也就是哪一步是缓存了一定的变化，又是哪步改变这些缓存的变化的啊。希望帅哥解答一下啊<br>","like_count":1},{"had_liked":false,"id":78091,"user_name":"徐西文","can_delete":false,"product_type":"c1","uid":1455496,"ip_address":"","ucode":"87BCE6534CE2CF","user_header":"https://static001.geekbang.org/account/avatar/00/16/35/88/4dfad2fd.jpg","comment_is_top":false,"comment_ctime":1553069996,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5848037292","product_id":100024501,"comment_content":"iOS 12 之后, Auto Layout 的性能确实提升了不少, 但是实际开发业务 UITableView中复杂且多变的UITableViewCell 中 使用  Auto Layout 的性能还是堪忧的; 至少在相比 Texture 这样的框架性能差距还是很明显的; 正如文章结尾说的 第三方不再维护的可能性是很高的;  期待后面关于 Auto Layou 相关布局的优化。","like_count":1},{"had_liked":false,"id":78057,"user_name":"Kinarobin","can_delete":false,"product_type":"c1","uid":1455314,"ip_address":"","ucode":"B4960A6FC5D9D2","user_header":"https://static001.geekbang.org/account/avatar/00/16/34/d2/fff5be2b.jpg","comment_is_top":false,"comment_ctime":1553064612,"is_pvip":false,"replies":[{"id":"28820","content":"行数限制目前我能想到的还是需要算出显示10行的文本字数是多少","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553345110,"ip_address":"","comment_id":78057,"utype":1}],"discussion_count":2,"race_medal":0,"score":"5848031908","product_id":100024501,"comment_content":"戴老师，使用Auto Layout确实挺便利的，最近遇到一个问题，产品需要设置文本控件最多显示为10行，这就跟Auto Layout产生冲突了，想问一下如果使用Auto Layout有好的解决方案吗？谢谢！","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443951,"discussion_content":"行数限制目前我能想到的还是需要算出显示10行的文本字数是多少","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553345110,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1462040,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4f/18/d5e5f0c7.jpg","nickname":"温润而泽","note":"","ucode":"622A424934A87A","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":301187,"discussion_content":"UIFont有个lineHeight属性可以计算行高，10行行高加上间距就能得到控件最大高度，设置约束≤最大高度","likes_number":2,"is_delete":false,"is_hidden":false,"ctime":1598434501,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77192,"user_name":"徐秀滨","can_delete":false,"product_type":"c1","uid":1457337,"ip_address":"","ucode":"36895D00A181FB","user_header":"https://static001.geekbang.org/account/avatar/00/16/3c/b9/42b228f8.jpg","comment_is_top":false,"comment_ctime":1552880930,"is_pvip":false,"replies":[{"id":"28367","content":"VC 里是有 View 的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552991071,"ip_address":"","comment_id":77192,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847848226","product_id":100024501,"comment_content":"感谢老师抽空回复。“作者回复: VC.view 了解下。以外的才是 C 层”具体在操作上要怎么处理呢？（指创建VC的时候直接带有xib的方式）","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443629,"discussion_content":"VC 里是有 View 的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552991071,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77168,"user_name":"FR","can_delete":false,"product_type":"c1","uid":1389632,"ip_address":"","ucode":"6892FCB222B465","user_header":"https://static001.geekbang.org/account/avatar/00/15/34/40/a84b6612.jpg","comment_is_top":false,"comment_ctime":1552874543,"is_pvip":true,"replies":[{"id":"28371","content":"后面相关章节会讲到","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552991297,"ip_address":"","comment_id":77168,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847841839","product_id":100024501,"comment_content":"请问对facebook开源的yoga有了解吗，可以使用yoga代替AL吗","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443616,"discussion_content":"后面相关章节会讲到","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552991297,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76895,"user_name":"kevin","can_delete":false,"product_type":"c1","uid":1461532,"ip_address":"","ucode":"8BF4D9E4C11EF7","user_header":"https://static001.geekbang.org/account/avatar/00/16/4d/1c/2512341d.jpg","comment_is_top":false,"comment_ctime":1552742955,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5847710251","product_id":100024501,"comment_content":"铭神，看ios 9时的wwdc讲到先用auto resize，再用autolayout配合使用，不会冲突。到之前看ios8时使用autolayout需要先禁用auto resize，请问一下到底有没有冲突？","like_count":1},{"had_liked":false,"id":76748,"user_name":"汉茂","can_delete":false,"product_type":"c1","uid":1457626,"ip_address":"","ucode":"F9D258E200012F","user_header":"https://static001.geekbang.org/account/avatar/00/16/3d/da/a5bff26f.jpg","comment_is_top":false,"comment_ctime":1552701059,"is_pvip":false,"replies":[{"id":"27991","content":"一样的， xib 只是多了 GUI","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552705150,"ip_address":"","comment_id":76748,"utype":1}],"discussion_count":0,"race_medal":0,"score":"5847668355","product_id":100024501,"comment_content":"使用xib布局性能怎么样？","like_count":1},{"had_liked":false,"id":76736,"user_name":"sergeant","can_delete":false,"product_type":"c1","uid":1455557,"ip_address":"","ucode":"A46FA3266A7B06","user_header":"https://static001.geekbang.org/account/avatar/00/16/35/c5/6758484a.jpg","comment_is_top":false,"comment_ctime":1552698421,"is_pvip":false,"replies":[{"id":"27987","content":"xib 的自动布局和手写的自动布局是一样的，xib 只是 GUI 化了。","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552704391,"ip_address":"","comment_id":76736,"utype":1}],"discussion_count":0,"race_medal":0,"score":"5847665717","product_id":100024501,"comment_content":"关于xib上的自动布局会讲吗","like_count":1},{"had_liked":false,"id":76725,"user_name":"大太阳","can_delete":false,"product_type":"c1","uid":1455051,"ip_address":"","ucode":"C84A55C0F0102C","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/cb/a57f65cb.jpg","comment_is_top":false,"comment_ctime":1552697013,"is_pvip":false,"replies":[{"id":"27985","content":"多刷刷，有问题多留言","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552704254,"ip_address":"","comment_id":76725,"utype":1}],"discussion_count":1,"race_medal":0,"score":"5847664309","product_id":100024501,"comment_content":"刚刚听完，感觉懵懵的，不过还要继续多刷几次，结合文稿，学习不能一蹴而就，加油加油加油💪。希望戴老师可以多多和我们交流，一起进步","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443422,"discussion_content":"多刷刷，有问题多留言","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552704254,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76705,"user_name":"。","can_delete":false,"product_type":"c1","uid":1264494,"ip_address":"","ucode":"517EA9DF1B015C","user_header":"https://static001.geekbang.org/account/avatar/00/13/4b/6e/942e167c.jpg","comment_is_top":false,"comment_ctime":1552689650,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5847656946","product_id":100024501,"comment_content":"早起打卡！","like_count":1},{"had_liked":false,"id":76694,"user_name":"Geek_2139c5","can_delete":false,"product_type":"c1","uid":1453888,"ip_address":"","ucode":"12E54007CE083D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqgy6JAwuWbsJOKY1sibdhIzZcAIb0hNd3oQ4dyUGVaoXonaH7WSwfWXH2kKQPnMugzmBPSGzjVjNg/132","comment_is_top":false,"comment_ctime":1552675311,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"5847642607","product_id":100024501,"comment_content":"深夜打卡","like_count":1},{"had_liked":false,"id":340848,"user_name":"lucas.liao","can_delete":false,"product_type":"c1","uid":2893420,"ip_address":"","ucode":"9C6F0DB859CE37","user_header":"","comment_is_top":false,"comment_ctime":1649181488,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1649181488","product_id":100024501,"comment_content":"iOS开发还要大量手工计算行高的情况，我接触其他事客户端、web前端都没有这样的情况","like_count":0},{"had_liked":false,"id":336690,"user_name":"MC","can_delete":false,"product_type":"c1","uid":2930411,"ip_address":"","ucode":"8B263F8CE7B88A","user_header":"https://static001.geekbang.org/account/avatar/00/2c/b6/eb/d6e3573d.jpg","comment_is_top":false,"comment_ctime":1646291802,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1646291802","product_id":100024501,"comment_content":"layoutIfNeeded是立即更新布局，这个是不依赖于runloop吗，老师","like_count":0},{"had_liked":false,"id":310572,"user_name":"...","can_delete":false,"product_type":"c1","uid":1020427,"ip_address":"","ucode":"35C881D8AA1C5E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/0b/2ccf7908.jpg","comment_is_top":false,"comment_ctime":1630749838,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1630749838","product_id":100024501,"comment_content":"理论上UIstackView  要比Autolayou嵌套深一些","like_count":0},{"had_liked":false,"id":301728,"user_name":"无瑕子","can_delete":false,"product_type":"c1","uid":1336979,"ip_address":"","ucode":"2E5641D553E1F9","user_header":"https://static001.geekbang.org/account/avatar/00/14/66/93/088f9212.jpg","comment_is_top":false,"comment_ctime":1625823746,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1625823746","product_id":100024501,"comment_content":"每当约束发生变化，就会触发 Deffered Layout Pass 应该是The Deferred Layout Pas","like_count":0},{"had_liked":false,"id":274445,"user_name":"船长","can_delete":false,"product_type":"c1","uid":2418752,"ip_address":"","ucode":"5AD71A6E0A7C8C","user_header":"https://static001.geekbang.org/account/avatar/00/24/e8/40/fcf2fb9b.jpg","comment_is_top":false,"comment_ctime":1611023871,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1611023871","product_id":100024501,"comment_content":"既然UIStackView已经提供了一种既先进又简洁的布局思路，为何不通过制作一个类似VFL这样的DSL语言来处理布局。这样不就能够通过下发一串DSL字符串的方式来进行内容样式甚至布局的更换，不用跟版（哈哈哈哈~~~~这里有一个错别字~~~~😁），还能使多版本统一。同时在端内直接用这样的DSL语言来写界面不光能够减少代码量易于维护，还能够很直观方便的看出整个界面布局结构。","like_count":0},{"had_liked":false,"id":266975,"user_name":"亮亮","can_delete":false,"product_type":"c1","uid":2321495,"ip_address":"","ucode":"DADD92DAE1BC81","user_header":"","comment_is_top":false,"comment_ctime":1607561526,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1607561526","product_id":100024501,"comment_content":"我有一个疑问，就是Auto Layout和Flexbox布局，哪个更好，哪个更适合移动端？两种我都用过，RN中使用过Flexbox布局，也感受过Flexbox布局的强大。我是这么感觉的，Auto Layout布局快速简单，但修改变动麻烦。Flexbox布局麻烦，但灵活，修改起来非常方便。","like_count":0},{"had_liked":false,"id":265203,"user_name":"TerryGoForIt","can_delete":false,"product_type":"c1","uid":1020644,"ip_address":"","ucode":"701B0E72F15AB5","user_header":"https://static001.geekbang.org/account/avatar/00/0f/92/e4/abb7bfe3.jpg","comment_is_top":false,"comment_ctime":1606812809,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1606812809","product_id":100024501,"comment_content":"xib的缺点是什么","like_count":0},{"had_liked":false,"id":259245,"user_name":"权华","can_delete":false,"product_type":"c1","uid":1387396,"ip_address":"","ucode":"D5838B3DDC5D02","user_header":"https://static001.geekbang.org/account/avatar/00/15/2b/84/3fe59164.jpg","comment_is_top":false,"comment_ctime":1604661585,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1604661585","product_id":100024501,"comment_content":"&quot;Layout Engine 在碰到约束变化后会重新计算布局，获取到布局后调用 superview.setNeedLayout()，然后进入 Deferred Layout Pass。<br><br>接下来，Layout Engine 会从上到下调用 layoutSubviews() ，通过 Cassowary 算法计算各个子视图的位置，算出来后将子视图的 frame 从 Layout Engine 里拷贝出来。&quot;<br><br>为什么 Constraints Change 和 Deferred Layout Pass 都要计算一次布局呢？<br>","like_count":0},{"had_liked":false,"id":249801,"user_name":"也许明天","can_delete":false,"product_type":"c1","uid":2042502,"ip_address":"","ucode":"B2A8B4306E117E","user_header":"https://static001.geekbang.org/account/avatar/00/1f/2a/86/87711313.jpg","comment_is_top":false,"comment_ctime":1600817529,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1600817529","product_id":100024501,"comment_content":"当我把STMAssembleView clone下来时pod install后,打开项目编译报这个错:STMAssembleView&#47;Pods&#47;Target Support Files&#47;Pods&#47;Pods-frameworks.sh: No such file or directory<br>我在网上查了好几种办法都没解决,有没有有效的解决办法呢,卡这了","like_count":0,"discussions":[{"author":{"id":1705735,"avatar":"https://static001.geekbang.org/account/avatar/00/1a/07/07/05491ee8.jpg","nickname":"YLe","note":"","ucode":"01B35ED451C834","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":383588,"discussion_content":"删除这个脚本的执行","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1626171481,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":207689,"user_name":"我来人间一趟","can_delete":false,"product_type":"c1","uid":1733144,"ip_address":"","ucode":"15CAF96EF899E2","user_header":"https://static001.geekbang.org/account/avatar/00/1a/72/18/d9e2fcf9.jpg","comment_is_top":false,"comment_ctime":1587137261,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1587137261","product_id":100024501,"comment_content":"请问老师 ios内嵌h5，如果是已经打好的包，还可以用safri调试访问吗？","like_count":0},{"had_liked":false,"id":139577,"user_name":"天赐","can_delete":false,"product_type":"c1","uid":1456698,"ip_address":"","ucode":"45C0351910D968","user_header":"https://static001.geekbang.org/account/avatar/00/16/3a/3a/863cfa14.jpg","comment_is_top":false,"comment_ctime":1570683485,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1570683485","product_id":100024501,"comment_content":"从上到下调用layoutsubviews具体指的是什么呢？当前视图的subviews数组的顺序吗？","like_count":0},{"had_liked":false,"id":131917,"user_name":"Yann","can_delete":false,"product_type":"c1","uid":1300429,"ip_address":"","ucode":"6F69F2F81DF7A5","user_header":"https://static001.geekbang.org/account/avatar/00/13/d7/cd/60072333.jpg","comment_is_top":false,"comment_ctime":1567963508,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1567963508","product_id":100024501,"comment_content":"我有个疑问:add,delete,set约束会触发Layout Engine 会从上到下调用 layoutSubVIews方法,如果我在layoutSubVIews方法内部设置约束或者修改约束的话,为什么不会发生递归调用造成的死循环啊","like_count":0,"discussions":[{"author":{"id":2691709,"avatar":"","nickname":"Geek_a33779","note":"","ucode":"1B5077BEE00F93","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":382836,"discussion_content":"因为你的约束在layoutSubVIews里写完之后就没有变动了，所以不会再触发Layout Engine从而导致layoutSubVIews再调用。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1625736579,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":126998,"user_name":"Ace Chen","can_delete":false,"product_type":"c1","uid":1374049,"ip_address":"","ucode":"ADE330653833F8","user_header":"https://static001.geekbang.org/account/avatar/00/14/f7/61/e547b3f4.jpg","comment_is_top":false,"comment_ctime":1566531840,"is_pvip":false,"discussion_count":1,"race_medal":0,"score":"1566531840","product_id":100024501,"comment_content":"请问一下，app支持iOS8，iOS12自动布局性能才很好，那要支持iOS11，iOS10，iOS9的话岂不是要写frame才好，那也要支持iOS12一下，又要性能高效咋办？","like_count":0,"discussions":[{"author":{"id":1460977,"avatar":"https://static001.geekbang.org/account/avatar/00/16/4a/f1/e3b02c6d.jpg","nickname":"莫言","note":"","ucode":"3B5782B58BFD18","race_medal":0,"user_type":1,"is_pvip":true},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":216131,"discussion_content":"问题不大，不差这一点性能","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1585406979,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":117921,"user_name":"超越杨超越","can_delete":false,"product_type":"c1","uid":1028887,"ip_address":"","ucode":"BB390B4B7E19D4","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b3/17/9f6d67dc.jpg","comment_is_top":false,"comment_ctime":1564191965,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1564191965","product_id":100024501,"comment_content":"iOS 12以前，AutoLayout的性能问题是因为兄弟视图之间有约束关系，在view遍历时不断处理这一类关系，以及重新创建计算引擎等操作。请问大神，苹果解决这个性能问题的根本方式是什么呢？","like_count":0},{"had_liked":false,"id":111127,"user_name":"Jon pai","can_delete":false,"product_type":"c1","uid":1598858,"ip_address":"","ucode":"35567E0FCD8EAC","user_header":"https://static001.geekbang.org/account/avatar/00/18/65/8a/a2299d6d.jpg","comment_is_top":false,"comment_ctime":1562483992,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562483992","product_id":100024501,"comment_content":"好像你在评论里面提供的demo都不能运行😂<br>","like_count":0},{"had_liked":false,"id":110353,"user_name":"流年匆匆i","can_delete":false,"product_type":"c1","uid":1234514,"ip_address":"","ucode":"D52E7E27CDE1BB","user_header":"https://static001.geekbang.org/account/avatar/00/12/d6/52/4d24d3cd.jpg","comment_is_top":false,"comment_ctime":1562239715,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562239715","product_id":100024501,"comment_content":"老师，为什么我找不到 libPods-STMAssembleView.a，只有 Pods_STMAssembleView.framework，我把 Pods_STMAssembleView.framework 删除之后再删除 Embed Pods 里面的脚本，再重新添加 Pods_STMAssembleView.framework 也还是不行，哪位大神可以告诉我怎么解决的吗？<br>已经搞了好几天了，谁能帮帮我啊","like_count":0},{"had_liked":false,"id":109419,"user_name":"九三","can_delete":false,"product_type":"c1","uid":1454691,"ip_address":"","ucode":"7D093ED7273CBE","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/63/fa24f92e.jpg","comment_is_top":false,"comment_ctime":1562030931,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1562030931","product_id":100024501,"comment_content":"使用autolayout布局自定义视图，在自定义视图里layoutsubviews第一次获取不到子视图的位置大小信息， 重新调用setNeedsLayout layoutIfNeeded刷新下才能取到，用frame直接就可以拿到，这是为什么呢？想不明百","like_count":0},{"had_liked":false,"id":108267,"user_name":"黑凤梨","can_delete":false,"product_type":"c1","uid":1415222,"ip_address":"","ucode":"7D4E23F6B7BAE8","user_header":"https://static001.geekbang.org/account/avatar/00/15/98/36/b99e1074.jpg","comment_is_top":false,"comment_ctime":1561707712,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561707712","product_id":100024501,"comment_content":"在第二段讲解Auto Layout的布局原理时<br>“每个视图在得到自己的布局之前，Layout Engine 会将视图、约束、优先级、固定大小通过计算转换成最终的大小和位置”<br><br>这是不是说  在Auto Layout的布局中 每一个使用了Auto Layout布局子视图的父视图 都会有一个Layout Engine， 还是 在布局一个视图的时候，总共有一个 Layout Engine","like_count":0},{"had_liked":false,"id":108264,"user_name":"黑凤梨","can_delete":false,"product_type":"c1","uid":1415222,"ip_address":"","ucode":"7D4E23F6B7BAE8","user_header":"https://static001.geekbang.org/account/avatar/00/15/98/36/b99e1074.jpg","comment_is_top":false,"comment_ctime":1561707579,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1561707579","product_id":100024501,"comment_content":"在讲解Auto Layout 布局过程中<br>“每个视图在得到自己的布局之前，Layout Engine 会将视图、约束、优先级、固定大小通过计算转换成最终的大小和位置”<br>","like_count":0},{"had_liked":false,"id":102914,"user_name":"提盏星灯逛人间","can_delete":false,"product_type":"c1","uid":1576358,"ip_address":"","ucode":"E99309FAA4AC88","user_header":"https://static001.geekbang.org/account/avatar/00/18/0d/a6/6895c4b9.jpg","comment_is_top":false,"comment_ctime":1560328046,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1560328046","product_id":100024501,"comment_content":"汗，我们停留在最原始啊。最开始简单的布局纯代码，元素多且杂但是固定的就用xib，后来迭代压力太大，干脆什么都拉个xib出来。。xib和Storyboard实在是太快了。","like_count":0},{"had_liked":false,"id":101249,"user_name":"Xinming","can_delete":false,"product_type":"c1","uid":1454945,"ip_address":"","ucode":"F7330DD975D248","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/61/da6d8713.jpg","comment_is_top":false,"comment_ctime":1559750345,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1559750345","product_id":100024501,"comment_content":"误打误撞看了一集讲 Auto Layout 布局流程以及最佳实践的 WWDC，受益良多，正如演讲者所说，大脑有了一个好的 metal model，工具用起来才有效率<br>High Performance Auto Layout<br>https:&#47;&#47;developer.apple.com&#47;wwdc18&#47;220","like_count":0},{"had_liked":false,"id":94270,"user_name":"九三","can_delete":false,"product_type":"c1","uid":1454691,"ip_address":"","ucode":"7D093ED7273CBE","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/63/fa24f92e.jpg","comment_is_top":false,"comment_ctime":1557757235,"is_pvip":false,"replies":[{"id":"35018","content":"If you also encounter this build error, try remove libPods-STMAssembleView.a in Linked Frameworks and Libraries and then add it back.Comment or delete script of Embed Pods frameworks in Build Phases tab .","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1558851636,"ip_address":"","comment_id":94270,"utype":1}],"discussion_count":2,"race_medal":0,"score":"1557757235","product_id":100024501,"comment_content":"您好，STMAssembleView<br> 下载下来跑不起来， xcode10.14 提示ld: library not found for -lPods ，删了libPods也不好使，下载也pod install了","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":449990,"discussion_content":"If you also encounter this build error, try remove libPods-STMAssembleView.a in Linked Frameworks and Libraries and then add it back.Comment or delete script of Embed Pods frameworks in Build Phases tab .","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1558851636,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]},{"author":{"id":1234514,"avatar":"https://static001.geekbang.org/account/avatar/00/12/d6/52/4d24d3cd.jpg","nickname":"流年匆匆i","note":"","ucode":"D52E7E27CDE1BB","race_medal":0,"user_type":1,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":1019,"discussion_content":"你这个问题解决了吗？为什么我找不到 libPods-STMAssembleView.a，只有 Pods_STMAssembleView.framework，我把 Pods_STMAssembleView.framework 删除之后再删除 Embed Pods 里面的脚本，再重新添加 Pods_STMAssembleView.framework 也还是不行，可以告诉我你是怎么解决的吗？","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1562237559,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":false,"parent_id":0,"ip_address":""},"score":2,"extra":"","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":93156,"user_name":"Damon","can_delete":false,"product_type":"c1","uid":1364010,"ip_address":"","ucode":"E211C8FAEE61BC","user_header":"https://static001.geekbang.org/account/avatar/00/14/d0/2a/d59960fb.jpg","comment_is_top":false,"comment_ctime":1557408804,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1557408804","product_id":100024501,"comment_content":"看到一些朋友提到 隐藏显示位置改变的问题，是可以设置优先级来搞定的吧","like_count":0},{"had_liked":false,"id":87658,"user_name":"强哥就是光头强呗","can_delete":false,"product_type":"c1","uid":1457755,"ip_address":"","ucode":"93538A58F814E9","user_header":"","comment_is_top":false,"comment_ctime":1555653030,"is_pvip":false,"replies":[{"id":"31684","content":"手写自动布局，使用三方库  Masonry 或  SnapKit","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1555859286,"ip_address":"","comment_id":87658,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555653030","product_id":100024501,"comment_content":"我也习惯用Auto Layout 和 布局，但是随着xib文件增多，每次打开xib的速度都很慢， 有什么办法优化一下吗","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":447551,"discussion_content":"手写自动布局，使用三方库  Masonry 或  SnapKit","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555859286,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":87249,"user_name":"可可_running","can_delete":false,"product_type":"c1","uid":1007646,"ip_address":"","ucode":"1F59B706781A9D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/60/1e/bc6b8f60.jpg","comment_is_top":false,"comment_ctime":1555552800,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555552800","product_id":100024501,"comment_content":"Layout engine 从上到下调用layoutsubviews中的从上到下指的是什么？是从父视图到子视图的顺序吗？","like_count":0},{"had_liked":false,"id":86583,"user_name":"我是熊大","can_delete":false,"product_type":"c1","uid":1208327,"ip_address":"","ucode":"4BCE42C2C64E55","user_header":"https://static001.geekbang.org/account/avatar/00/12/70/07/bb4e6568.jpg","comment_is_top":false,"comment_ctime":1555403687,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1555403687","product_id":100024501,"comment_content":"为什么我在storyboard中设置了view的位置和大小，然后通过代码修改位置和大小，发现没有效果，但是通过矩阵变换可以有效果？","like_count":0},{"had_liked":false,"id":86249,"user_name":"张威  ^ _ ^","can_delete":false,"product_type":"c1","uid":1456617,"ip_address":"","ucode":"3B4C3C3522D9D9","user_header":"https://static001.geekbang.org/account/avatar/00/16/39/e9/7e11781c.jpg","comment_is_top":false,"comment_ctime":1555331675,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555331675","product_id":100024501,"comment_content":"已学","like_count":0},{"had_liked":false,"id":86143,"user_name":"lhjzzu","can_delete":false,"product_type":"c1","uid":1463699,"ip_address":"","ucode":"460E35EDF61D62","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/b4oNLTaYfCBibPibneZVz8GqiciavzhbloQicwoIMz8E9cJibjLpOmibOrWYiamKXXwqDWicWwgCZOawlOte6icJkn3iby8GQ/132","comment_is_top":false,"comment_ctime":1555314287,"is_pvip":false,"replies":[{"id":"32677","content":"WWDC 2015: Mysteries of Auto Layout, Part 2 包含Auto Layout生命周期和调试Auto Layout的一些方法介绍https:&#47;&#47;developer.apple.com&#47;videos&#47;play&#47;wwdc2015-219&#47;","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1556893195,"ip_address":"","comment_id":86143,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1555314287","product_id":100024501,"comment_content":"请教一下，您是怎么了解到layout engine相关的知识的，这部分知识可以从哪里看到?","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446896,"discussion_content":"WWDC 2015: Mysteries of Auto Layout, Part 2 包含Auto Layout生命周期和调试Auto Layout的一些方法介绍https://developer.apple.com/videos/play/wwdc2015-219/","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1556893195,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":86038,"user_name":"Doraemon","can_delete":false,"product_type":"c1","uid":1292271,"ip_address":"","ucode":"7429DB7A7089EC","user_header":"https://static001.geekbang.org/account/avatar/00/13/b7/ef/578bb339.jpg","comment_is_top":false,"comment_ctime":1555304255,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1555304255","product_id":100024501,"comment_content":"使用Masonry有一个问题，做热修复的时候转JS代码遇到挑战，不知道怎么热修复，大神是否有好的方法推荐？","like_count":0},{"had_liked":false,"id":85146,"user_name":"枫林","can_delete":false,"product_type":"c1","uid":1236190,"ip_address":"","ucode":"6BB5534162CBDB","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/xVcA2wzqLYZaeTo7cSA2k3cJVylT3sibmcauzQRUVpJqfxkIJetkCUV7iaVWQuSuCSBICV2AfF2AS5xl1Fgo0pcw/132","comment_is_top":false,"comment_ctime":1554989321,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554989321","product_id":100024501,"comment_content":"在你的博客里面看到 “改变view 的 frame.origin不会掉用layoutSubviews”， 试了下的确没有调用 ，也没有触发drawRect，那会触发什么，直接渲染view吗？","like_count":0},{"had_liked":false,"id":85137,"user_name":"findU","can_delete":false,"product_type":"c1","uid":1471551,"ip_address":"","ucode":"B3F26ED4E5A29D","user_header":"https://static001.geekbang.org/account/avatar/00/16/74/3f/52fa1e72.jpg","comment_is_top":false,"comment_ctime":1554987586,"is_pvip":false,"replies":[{"id":"30678","content":"不是，用的 flexbox","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1555123717,"ip_address":"","comment_id":85137,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1554987586","product_id":100024501,"comment_content":"react-native的渲染布局是不是使用这个啊？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":446570,"discussion_content":"不是，用的 flexbox","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1555123717,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":85134,"user_name":"凨","can_delete":false,"product_type":"c1","uid":1459161,"ip_address":"","ucode":"642AC7279A3E81","user_header":"https://static001.geekbang.org/account/avatar/00/16/43/d9/9a419cab.jpg","comment_is_top":false,"comment_ctime":1554987247,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554987247","product_id":100024501,"comment_content":"简直是醍醐灌顶啊。😙","like_count":0},{"had_liked":false,"id":83462,"user_name":"墨明棋妙","can_delete":false,"product_type":"c1","uid":1455093,"ip_address":"","ucode":"C4F16B7654A676","user_header":"https://static001.geekbang.org/account/avatar/00/16/33/f5/3c7cb91b.jpg","comment_is_top":false,"comment_ctime":1554609381,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1554609381","product_id":100024501,"comment_content":"大神文章附带的demo例子，越多越好哈。这样更容易懂，记住。","like_count":0},{"had_liked":false,"id":81346,"user_name":"天问","can_delete":false,"product_type":"c1","uid":1467769,"ip_address":"","ucode":"776631B8A7E021","user_header":"https://static001.geekbang.org/account/avatar/00/16/65/79/570752d6.jpg","comment_is_top":false,"comment_ctime":1553869008,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553869008","product_id":100024501,"comment_content":"上一节云里雾里，这一节至少听懂了😂","like_count":0},{"had_liked":false,"id":80969,"user_name":"李乾坤David","can_delete":false,"product_type":"c1","uid":1454334,"ip_address":"","ucode":"295D0234582979","user_header":"https://static001.geekbang.org/account/avatar/00/16/30/fe/fc686f23.jpg","comment_is_top":false,"comment_ctime":1553766157,"is_pvip":false,"replies":[{"id":"29475","content":"WWDC 2018 中 202 Session","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553856535,"ip_address":"","comment_id":80969,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553766157","product_id":100024501,"comment_content":"并没有知道Autolayout性能怎么就提高了？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":445032,"discussion_content":"WWDC 2018 中 202 Session","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553856535,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":80609,"user_name":"iOSzyz","can_delete":false,"product_type":"c1","uid":1473141,"ip_address":"","ucode":"59081000A2C2F9","user_header":"https://static001.geekbang.org/account/avatar/00/16/7a/75/da95bdff.jpg","comment_is_top":false,"comment_ctime":1553688534,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553688534","product_id":100024501,"comment_content":"能否讲解下xib中使用自动布局和不用xib写代码使用自动布局的区别呢？","like_count":0},{"had_liked":false,"id":80154,"user_name":"_Dzy","can_delete":false,"product_type":"c1","uid":1453865,"ip_address":"","ucode":"15B765EACDF213","user_header":"https://static001.geekbang.org/account/avatar/00/16/2f/29/dd370ae9.jpg","comment_is_top":false,"comment_ctime":1553610540,"is_pvip":false,"replies":[{"id":"29268","content":"可以参考文中的 STMAssembleView 把 Masonry 换成 UIStackView","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553657489,"ip_address":"","comment_id":80154,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553610540","product_id":100024501,"comment_content":"有没有大佬的 DSL 作业做完了的，想看看，不是很理解怎么做。 ","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444763,"discussion_content":"可以参考文中的 STMAssembleView 把 Masonry 换成 UIStackView","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553657489,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":79813,"user_name":"Geek_08f0c9","can_delete":false,"product_type":"c1","uid":1379590,"ip_address":"","ucode":"CA4F517DD695B5","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/fU4YNhGuWrh1G1F0Ebougv5Ugf6kZ6VLPf4jPrxGuldFnbXucGibXaN0rEHticIeyoeLiaEibZ2NVL5EOySscJiaeYg/132","comment_is_top":false,"comment_ctime":1553560603,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553560603","product_id":100024501,"comment_content":"又学到了^_^^_^^_^","like_count":0},{"had_liked":false,"id":79392,"user_name":"土豆小小","can_delete":false,"product_type":"c1","uid":1457246,"ip_address":"","ucode":"5621EEDE50EA48","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLVZRHorm7z67yJxOCpYWJESPfhia00RDg4oicvPuyCwTKln2BFRMiahOKz9z22RnnEmickA64bHdB7pA/132","comment_is_top":false,"comment_ctime":1553474117,"is_pvip":false,"replies":[{"id":"28980","content":"纯代码用 SnapKit 和 Masonry ","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553501196,"ip_address":"","comment_id":79392,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553474117","product_id":100024501,"comment_content":"老师，现在xib和纯代码在布局性能方面的如何优先选择，抛开业务逻辑，您如何看待现在开发纯代码呢，最优的开发思路是如何选择呢","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444480,"discussion_content":"纯代码用 SnapKit 和 Masonry ","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553501196,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78734,"user_name":"Kean","can_delete":false,"product_type":"c1","uid":1422863,"ip_address":"","ucode":"7F0EFA6CDB1CEA","user_header":"https://static001.geekbang.org/account/avatar/00/15/b6/0f/89711af2.jpg","comment_is_top":false,"comment_ctime":1553225871,"is_pvip":false,"replies":[{"id":"28666","content":"写出具体的警告吧，针对性的解决","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553264040,"ip_address":"","comment_id":78734,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553225871","product_id":100024501,"comment_content":"想了解下，tableVIewHeaderView进行动态自动布局时候，布局警告的解决思路","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444215,"discussion_content":"写出具体的警告吧，针对性的解决","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553264040,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78653,"user_name":"Ankhetsin","can_delete":false,"product_type":"c1","uid":1028469,"ip_address":"","ucode":"3CA233D08D4A72","user_header":"https://static001.geekbang.org/account/avatar/00/0f/b1/75/60a71bbd.jpg","comment_is_top":false,"comment_ctime":1553211389,"is_pvip":false,"replies":[{"id":"28736","content":"可视化和拖拽，最终也是生成纯代码。","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553314560,"ip_address":"","comment_id":78653,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553211389","product_id":100024501,"comment_content":"您的那个作业自己编写的声名式DSL支持纯代码和所见即所得可视化和拖拽更改属性输入框两种方式吗？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444180,"discussion_content":"可视化和拖拽，最终也是生成纯代码。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553314560,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78601,"user_name":"丘陈","can_delete":false,"product_type":"c1","uid":1458273,"ip_address":"","ucode":"003374AAD54710","user_header":"https://static001.geekbang.org/account/avatar/00/16/40/61/4f545df0.jpg","comment_is_top":false,"comment_ctime":1553181274,"is_pvip":false,"replies":[{"id":"28765","content":"是 DSL","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553318490,"ip_address":"","comment_id":78601,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553181274","product_id":100024501,"comment_content":"编写出一个语言??这个厉害了，是指要自己实现一个解释器吗？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444159,"discussion_content":"是 DSL","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553318490,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78363,"user_name":"我系哆啦","can_delete":false,"product_type":"c1","uid":1258151,"ip_address":"","ucode":"109A96943F1DDA","user_header":"https://static001.geekbang.org/account/avatar/00/13/32/a7/3f3e05fa.jpg","comment_is_top":false,"comment_ctime":1553133485,"is_pvip":false,"replies":[{"id":"28861","content":"可以","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553389329,"ip_address":"","comment_id":78363,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553133485","product_id":100024501,"comment_content":"复杂的UI不能拆分成简单的UI来组合吗？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":444065,"discussion_content":"可以","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553389329,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":78229,"user_name":"张寅","can_delete":false,"product_type":"c1","uid":1459659,"ip_address":"","ucode":"EE7347A36EB47C","user_header":"https://static001.geekbang.org/account/avatar/00/16/45/cb/cc5f72f9.jpg","comment_is_top":false,"comment_ctime":1553096951,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553096951","product_id":100024501,"comment_content":"把label控件的number of lines设置为10行，然后设置好prefferMaxLayouwidth属性，并使其和label真实的、被约束后的width constraints保持一致。另外cell中所有控件的约束一定要能从cell的顶部一直连贯到底部，这样一个可自动调整高度的cell就安排的差不多了。","like_count":0},{"had_liked":false,"id":77992,"user_name":"李小草","can_delete":false,"product_type":"c1","uid":1240476,"ip_address":"","ucode":"83DAA0BFDC2068","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/9c/7afa883f.jpg","comment_is_top":false,"comment_ctime":1553050493,"is_pvip":false,"replies":[{"id":"28469","content":"没差别","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553057905,"ip_address":"","comment_id":77992,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1553050493","product_id":100024501,"comment_content":"公司用PureLayout，这个比着Masonry写法麻烦了点。两者都是封装苹果原生约束，感觉性能没什么差别吧？请老师指点。","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443926,"discussion_content":"没差别","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553057905,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77990,"user_name":"李小草","can_delete":false,"product_type":"c1","uid":1240476,"ip_address":"","ucode":"83DAA0BFDC2068","user_header":"https://static001.geekbang.org/account/avatar/00/12/ed/9c/7afa883f.jpg","comment_is_top":false,"comment_ctime":1553050307,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553050307","product_id":100024501,"comment_content":"赞👍","like_count":0},{"had_liked":false,"id":77956,"user_name":"Onlyone","can_delete":false,"product_type":"c1","uid":1454978,"ip_address":"","ucode":"1016F4E603AF40","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/edMMg8wmu2RRIFVw2UgAyiahlPSYvk02RVsTKBAZmCE57AjyiazqJdmib15VqEeTRicRAN7d15RzNOiajZqM3cZwTYw/132","comment_is_top":false,"comment_ctime":1553046246,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553046246","product_id":100024501,"comment_content":"隐藏的时候，把b的上边距.top.offset(20)和height.offset(x)高度更新约束为offser(0)即可","like_count":0},{"had_liked":false,"id":77910,"user_name":"","can_delete":false,"product_type":"c1","uid":1461366,"ip_address":"","ucode":"","user_header":"","comment_is_top":false,"comment_ctime":1553040939,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1553040939","product_id":100024501,"comment_content":"文中说layout engine 重新计算布局，在获得布局之后会调用super的刷新，而之后才会由上至下的刷新子视图们，调用super的时机是该视图主动变化时？还是任何时机都是调用super的刷新？","like_count":0},{"had_liked":false,"id":77754,"user_name":"鹏飞","can_delete":false,"product_type":"c1","uid":1458818,"ip_address":"","ucode":"A31608EF850020","user_header":"https://static001.geekbang.org/account/avatar/00/16/42/82/53d05039.jpg","comment_is_top":false,"comment_ctime":1552992866,"is_pvip":false,"replies":[{"id":"28404","content":"对的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553000183,"ip_address":"","comment_id":77754,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552992866","product_id":100024501,"comment_content":"戴老师好, 看到回复 @burning😕🙄的cell 里面 label的高度自适应问题里写的 `[_contentLabel setContentHuggingPriority:UILayoutPriorityRequired ] ` 调整label的Hugging优先级为最高, 这里的作用是不想让label被拉伸吧?, 那么直接对label的buttom约束调整优先级为默认Hugging(251)之下是不是更好? 总感觉Hugging是1000 buttom也是1000 怪怪的. 不知道理解对不对?","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443837,"discussion_content":"对的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553000183,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77740,"user_name":"鹏飞","can_delete":false,"product_type":"c1","uid":1458818,"ip_address":"","ucode":"A31608EF850020","user_header":"https://static001.geekbang.org/account/avatar/00/16/42/82/53d05039.jpg","comment_is_top":false,"comment_ctime":1552990295,"is_pvip":false,"replies":[{"id":"28405","content":"是的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553000221,"ip_address":"","comment_id":77740,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552990295","product_id":100024501,"comment_content":"&quot; 接下来，Layout Engine 会从上到下调用 layoutSubviews() &quot; 这个&quot;从上到下&quot;的意思是从父视图到最内层子视图的意思吗?","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443833,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553000221,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77283,"user_name":"山羊","can_delete":false,"product_type":"c1","uid":1456926,"ip_address":"","ucode":"950284E5544F23","user_header":"https://static001.geekbang.org/account/avatar/00/16/3b/1e/10b4f232.jpg","comment_is_top":false,"comment_ctime":1552901571,"is_pvip":false,"replies":[{"id":"28361","content":"用啊。Masonry后面章节会有专门介绍","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552990685,"ip_address":"","comment_id":77283,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552901571","product_id":100024501,"comment_content":"感觉这个一般都用Masonry吧，就好比sdwebImage和AFNetWorking一样，难道大神都不用Masonry吗？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443672,"discussion_content":"用啊。Masonry后面章节会有专门介绍","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552990685,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77256,"user_name":"manky","can_delete":false,"product_type":"c1","uid":1226745,"ip_address":"","ucode":"BDDBB16BADB5B5","user_header":"https://static001.geekbang.org/account/avatar/00/12/b7/f9/75bae002.jpg","comment_is_top":false,"comment_ctime":1552898594,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552898594","product_id":100024501,"comment_content":"更期待autolayout的优劣分析","like_count":0},{"had_liked":false,"id":77211,"user_name":"sure","can_delete":false,"product_type":"c1","uid":1063056,"ip_address":"","ucode":"7EF5F97C32611F","user_header":"","comment_is_top":false,"comment_ctime":1552888204,"is_pvip":false,"replies":[{"id":"28141","content":"是的，已经修正，感谢","user_name":"编辑回复","user_name_real":"郭蕾","uid":"1000473","ctime":1552888684,"ip_address":"","comment_id":77211,"utype":2}],"discussion_count":1,"race_medal":0,"score":"1552888204","product_id":100024501,"comment_content":"Auto Layout 的生命周期章节中第一个 Cassoway 拼写错误，应为 Cassowary","like_count":0,"discussions":[{"author":{"id":1000473,"avatar":"https://static001.geekbang.org/account/avatar/00/0f/44/19/17fadc62.jpg","nickname":"郭蕾","note":"","ucode":"34F4C07D1C5FE8","race_medal":0,"user_type":8,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443637,"discussion_content":"是的，已经修正，感谢","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552888684,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":4}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77203,"user_name":"why not ？","can_delete":false,"product_type":"c1","uid":1454667,"ip_address":"","ucode":"1894E6F598474B","user_header":"https://static001.geekbang.org/account/avatar/00/16/32/4b/2c389af8.jpg","comment_is_top":false,"comment_ctime":1552884806,"is_pvip":false,"replies":[{"id":"28364","content":"字体最好是直接设置","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552990973,"ip_address":"","comment_id":77203,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552884806","product_id":100024501,"comment_content":"请教一个问题，平时开发中使用autolayout 字体都是怎么适配的？比例？？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443635,"discussion_content":"字体最好是直接设置","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552990973,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77179,"user_name":"西京富贵兔","can_delete":false,"product_type":"c1","uid":1455922,"ip_address":"","ucode":"4E185A019A072E","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/32/758ef1c7.jpg","comment_is_top":false,"comment_ctime":1552877527,"is_pvip":false,"replies":[{"id":"28463","content":"复杂动画用手写布局这个没问题的。","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1553053250,"ip_address":"","comment_id":77179,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552877527","product_id":100024501,"comment_content":"平时开发的时候，可能没有遇到过太复杂的UI层级，auto layout使用上也都还顺畅。但每每遇到和动画相关的问题的时候，使用auto layout就经常感觉做不到想要的效果，或者出来的效果不理想，都会改用手写布局，戴老师对于面对复杂动画的时候，布局方式这方面有哪些经验能否分享一二。","like_count":1,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443622,"discussion_content":"复杂动画用手写布局这个没问题的。","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1553053250,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77102,"user_name":"Jason","can_delete":false,"product_type":"c1","uid":1022775,"ip_address":"","ucode":"3862346E26661D","user_header":"https://static001.geekbang.org/account/avatar/00/0f/9b/37/a2d8ef24.jpg","comment_is_top":false,"comment_ctime":1552834043,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552834043","product_id":100024501,"comment_content":"想请教下关于UICollectionViewCell的auto sizing有什么好的办法吗？实践过程中发现，UICollectionViewCell的auto sizing没有tableViewCell的好用，自动算出来的高度是对的，但是实际上界面的布局第一次显示总是不对，需要滚动下才变正常。不知道是不是姿势不对。还望指点。","like_count":0},{"had_liked":false,"id":77096,"user_name":"NeroXie","can_delete":false,"product_type":"c1","uid":1440210,"ip_address":"","ucode":"C73B8CE8252CDE","user_header":"https://static001.geekbang.org/account/avatar/00/15/f9/d2/0f4d1ab2.jpg","comment_is_top":false,"comment_ctime":1552832274,"is_pvip":false,"replies":[{"id":"28376","content":"是的","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552996331,"ip_address":"","comment_id":77096,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552832274","product_id":100024501,"comment_content":"WWDC中关于Deferred Layout Pass阶段提到了Update Constraints。 之前不是很理解为什么前面的Constraints Change过程已经更新约束，到了Deferred Layout Pass阶段，又需要更新约束。是不是上面提到的容错处理那块。","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443577,"discussion_content":"是的","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552996331,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":77008,"user_name":"bart","can_delete":false,"product_type":"c1","uid":1394152,"ip_address":"","ucode":"CDB3351F85A65D","user_header":"https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoGRhUIWgJcgLOkpH6p4EfxVGvF0daA9r91CoEcJ0lRIAiad8FJFzf4WVHgJRh0OdicX5PZ2MpWCV0Q/132","comment_is_top":false,"comment_ctime":1552802858,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552802858","product_id":100024501,"comment_content":"vfl无法表示safeArea的边界问题如何处理呢。","like_count":0},{"had_liked":false,"id":77002,"user_name":"ColdMountain","can_delete":false,"product_type":"c1","uid":1454505,"ip_address":"","ucode":"06A515A2307912","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/a9/28fa245b.jpg","comment_is_top":false,"comment_ctime":1552800322,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552800322","product_id":100024501,"comment_content":"xib结合Masonry 使用还是挺好的 不会一味只使用某一项技术 结合实际需求来做 之后也关注一下 原生的Autolayout 以及UIStackView","like_count":0},{"had_liked":false,"id":77000,"user_name":"ColdMountain","can_delete":false,"product_type":"c1","uid":1454505,"ip_address":"","ucode":"06A515A2307912","user_header":"https://static001.geekbang.org/account/avatar/00/16/31/a9/28fa245b.jpg","comment_is_top":false,"comment_ctime":1552800137,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552800137","product_id":100024501,"comment_content":"最早一开始是frame方式 之后用了xib 感觉还不错 就是修改维护成本高 之后根据需求xib结合","like_count":0},{"had_liked":false,"id":76878,"user_name":"张蒙","can_delete":false,"product_type":"c1","uid":1035858,"ip_address":"","ucode":"CF8727F5DCFD55","user_header":"https://static001.geekbang.org/account/avatar/00/0f/ce/52/4f1911b5.jpg","comment_is_top":false,"comment_ctime":1552735504,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552735504","product_id":100024501,"comment_content":"很赞，学习了","like_count":0},{"had_liked":false,"id":76843,"user_name":"止于止水","can_delete":false,"product_type":"c1","uid":1459453,"ip_address":"","ucode":"F109DF27205293","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo2BicfKfhqiaf1NG1InuZX2kib5hibIj0RxhW8BUkicmCbQjVxIWCUHnoEVGks8rHloa4nwaWM2vcB8Dw/132","comment_is_top":false,"comment_ctime":1552725875,"is_pvip":false,"replies":[{"id":"28015","content":"子视图分工明确，可配置、可复用做到位，就好维护了，不然还能用 DSL 不是么","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552728678,"ip_address":"","comment_id":76843,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552725875","product_id":100024501,"comment_content":"简单布局可以，复杂布局在没有注释的前提下是不是不容易维护呢？有什么解决方法？","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443465,"discussion_content":"子视图分工明确，可配置、可复用做到位，就好维护了，不然还能用 DSL 不是么","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552728678,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76822,"user_name":"乐乐银行家","can_delete":false,"product_type":"c1","uid":1456305,"ip_address":"","ucode":"3A23B041A2E2BC","user_header":"https://static001.geekbang.org/account/avatar/00/16/38/b1/b0300bf2.jpg","comment_is_top":false,"comment_ctime":1552720271,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552720271","product_id":100024501,"comment_content":"UIStackView 这个比较好用，现在可以适配iOS 7，脚本可以适配低版本！我一般开发用，设置优先级！","like_count":0},{"had_liked":false,"id":76794,"user_name":"谢知行","can_delete":false,"product_type":"c1","uid":1168573,"ip_address":"","ucode":"0E1BBF3B917FBC","user_header":"https://static001.geekbang.org/account/avatar/00/11/d4/bd/7ca98113.jpg","comment_is_top":false,"comment_ctime":1552710545,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1552710545","product_id":100024501,"comment_content":"我现在布局用的第三方布局框架mylayout感觉不错","like_count":0},{"had_liked":false,"id":76793,"user_name":"晓龙","can_delete":false,"product_type":"c1","uid":1004576,"ip_address":"","ucode":"78CDCEBD183D3A","user_header":"https://static001.geekbang.org/account/avatar/00/0f/54/20/93c79f7c.jpg","comment_is_top":false,"comment_ctime":1552710124,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552710124","product_id":100024501,"comment_content":"平时开发中UIStackView用的很少，以后开发中会尝试使用","like_count":0},{"had_liked":false,"id":76751,"user_name":"Tristan","can_delete":false,"product_type":"c1","uid":1456669,"ip_address":"","ucode":"A9AF47D0B8FC08","user_header":"https://static001.geekbang.org/account/avatar/00/16/3a/1d/508fe169.jpg","comment_is_top":false,"comment_ctime":1552701135,"is_pvip":false,"replies":[{"id":"27993","content":"自动布局有自己声明周期，触发变化需要达到他的条件","user_name":"作者回复","user_name_real":"戴铭","uid":"1140280","ctime":1552705307,"ip_address":"","comment_id":76751,"utype":1}],"discussion_count":1,"race_medal":0,"score":"1552701135","product_id":100024501,"comment_content":"kvc监听cell的contentview的frame和contentview的子view的frame，发现contentview的frame多次改变，宽度从320变成414。而子view只有一次new，frame是zero<br>为什么会有320，子view的frame后来为什么没有触发kvc呢","like_count":0,"discussions":[{"author":{"id":1140280,"avatar":"https://static001.geekbang.org/account/avatar/00/11/66/38/f9999b2b.jpg","nickname":"戴铭","note":"","ucode":"D61E685F962387","race_medal":0,"user_type":2,"is_pvip":false},"reply_author":{"id":0,"avatar":"","nickname":"","note":"","ucode":"","race_medal":0,"user_type":1,"is_pvip":false},"discussion":{"id":443434,"discussion_content":"自动布局有自己声明周期，触发变化需要达到他的条件","likes_number":0,"is_delete":false,"is_hidden":false,"ctime":1552705307,"is_liked":false,"can_delete":false,"is_complain":false,"is_top":true,"parent_id":0,"ip_address":""},"score":2,"extra":"{\"reply\":true,\"user_type\":2}","child_discussion_number":0,"child_discussions":[]}]},{"had_liked":false,"id":76729,"user_name":"ghcoder","can_delete":false,"product_type":"c1","uid":1161077,"ip_address":"","ucode":"130D8C0FD6DCBF","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/9T2kwSiaMkIVVKgp5BUMBJibtWNYy3O0Via3q4dDcfqHJ8uG1qzcreV6Mqib74SkCJfjDWYs4ibQqbd97yWvx9P9GuA/132","comment_is_top":false,"comment_ctime":1552697543,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552697543","product_id":100024501,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":76727,"user_name":"初心莫负眉间雪","can_delete":false,"product_type":"c1","uid":1455699,"ip_address":"","ucode":"8D19D759E5F257","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/ZVDC5RiaUwxK0S3icK1XZwFEMeYqVjIjFvjU4W1qWel3UIVMnUW9YG9OWx664UzYHEgtzibxhRVOy8Tk80ZoDdLIA/132","comment_is_top":false,"comment_ctime":1552697104,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552697104","product_id":100024501,"comment_content":"打卡","like_count":0},{"had_liked":false,"id":76726,"user_name":"HeminWon","can_delete":false,"product_type":"c1","uid":1453537,"ip_address":"","ucode":"BBAA4983A16131","user_header":"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJnx7B5U2PNYX8Ps0uAA3St9d1NGAaMJOrMbknWganEM0GxXHIdLCWvLXZRO1Tvs6YiaEnem2oN73g/132","comment_is_top":false,"comment_ctime":1552697014,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552697014","product_id":100024501,"comment_content":"打卡 课后作业写起来","like_count":0},{"had_liked":false,"id":76724,"user_name":"data","can_delete":false,"product_type":"c1","uid":1010493,"ip_address":"","ucode":"4EEC3CE11E65F8","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/3d/ae41c2b3.jpg","comment_is_top":false,"comment_ctime":1552696974,"is_pvip":true,"discussion_count":0,"race_medal":0,"score":"1552696974","product_id":100024501,"comment_content":"学习了","like_count":0},{"had_liked":false,"id":76715,"user_name":"远恒之义","can_delete":false,"product_type":"c1","uid":1020989,"ip_address":"","ucode":"C0CB54C7AE9EB0","user_header":"https://static001.geekbang.org/account/avatar/00/0f/94/3d/9ff6988e.jpg","comment_is_top":false,"comment_ctime":1552695327,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552695327","product_id":100024501,"comment_content":"手写撸界面，少用 xib。  <br><br>用 Masonry 来自动布局，性能上没太关注优先级的设置，后面会关注性能的问题。   <br><br>听说过 UIStackView 没用过，会试试这个写法。","like_count":0},{"had_liked":false,"id":76713,"user_name":"张先生","can_delete":false,"product_type":"c1","uid":1455896,"ip_address":"","ucode":"8C8F8845BC025A","user_header":"https://static001.geekbang.org/account/avatar/00/16/37/18/b5a8bfc1.jpg","comment_is_top":false,"comment_ctime":1552695071,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552695071","product_id":100024501,"comment_content":"早起打卡","like_count":0},{"had_liked":false,"id":76712,"user_name":"Ace","can_delete":false,"product_type":"c1","uid":1010490,"ip_address":"","ucode":"D3B779A0E8264E","user_header":"https://static001.geekbang.org/account/avatar/00/0f/6b/3a/38de3fc4.jpg","comment_is_top":false,"comment_ctime":1552694885,"is_pvip":false,"discussion_count":0,"race_medal":0,"score":"1552694885","product_id":100024501,"comment_content":"早起打卡，我们项目基本上都是基于Autolayout(Masonry).出了个别对性能要求急高的视图。","like_count":0}]}